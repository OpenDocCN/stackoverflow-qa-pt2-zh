# StackOverflow 问答 15955000-15955999

# apache - 在 SSL 虚拟主机中使用 Apache RedirectMatch

> ID：15955000
> 
> 赞同：0
> 
> 时间：2013-04-11T17:20:18.567
> 
> 标签：apache, redirect, proxy, mod-proxy

我想：

*   将 https 请求重定向`/`到`/sweetApp/`
*   将所有 http 请求重定向到 https
*   重定向后，代理请求到内部 IP 地址

我已经设置了这些虚拟主机规则。http 到 https 重定向有效，但重定向到`/sweetApp/`无效。

最后，我想要一个外部请求`sweetSite.com`来代理和重定向，所以内部服务器只看到一个请求`192.168.3.92:9080/sweetApp/`

我使用的是 Apache 2.4.3，所以它应该支持基于名称的 ssl vhosts。

```
#Redirect to SSL
<VirtualHost *:80>
ServerName sweetSite.com
RedirectMatch ^/$ https://sweetSite.com/
</VirtualHost>

# The Real McCoy
<VirtualHost *:443>
ServerName sweetSite.com

#Map to /sweetApp/ by default
RedirectMatch ^/$ /sweetApp/

SSLEngine On
SSLProxyEngine On
SSLCertificateFile ssl/certificate.crt
SSLCertificateKeyFile ssl/certificate.key

#SSL to HTTP Proxy
ProxyPass / http://192.168.3.92:9080/
ProxyPassReverse / http://192.168.3.92:9080/
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:26:15.850

我的问题是，如果有 proxyPass 规则，它优先于任何重定向规则。

因为我需要这台机器来执行重定向和代理，所以我能找到的唯一解决方案是使用 mod_rewrite 来“代理”并将 url 更改为`/sweetApp/`.

# sql - Oracle 在两个不同的列中找到共同值

> ID：15955003
> 
> 赞同：0
> 
> 时间：2013-04-11T17:20:25.943
> 
> 标签：sql, oracle

如果我有这样的结构：

```
CREATE TABLE things (
    id,
    personA varchar2,
    personB varchar2,
    attribute ...,
) 
```

而且我想找到，对于给定的属性，如果我所有的东西至少有一个普通人，我会怎么做？

因此，如果我的数据是（并且每个属性可能超过 2 个）：

```
1, John, Steve, Apple
2, Steve, Larry, Apple
3, Paul, Larry, Orange
4, Paul, Larry, Orange
5, Chris, Michael, Tomato
6, Steve, Larry, Tomato 
```

对于 Apple，Steve 是我的普通人，对于 Orange，Paul 和 Larry 都是，对于 Tomato，我没有普通人。但是，我不需要一次返回所有这些的查询。我有这些属性之一，并且需要 0、1 或 2 行，具体取决于我有什么样的共性。我一直试图想出一些东西，但不能完全弄清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T17:28:24.070

这将为您提供`common person`/`attribute`列表。我根据您的示例数据运行它并得到了预期的结果。希望它至少指向正确的方向:)

```
WITH NormNames AS (
  SELECT PersonA AS Person, Attribute FROM things
  UNION ALL SELECT PersonB AS Person, Attribute FROM things
)
SELECT
  Person, Attribute, COUNT(*)
  FROM NormNames
  GROUP BY Person, Attribute
  HAVING COUNT(*) >= 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:54:31.743

如果您使用的是 11gR2，您还可以使用[运算`unpivot`符](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#sthref6755)来避免自加入：

```
select person, attribute
from (
    select *
    from things
    unpivot (person for which_person in (persona as 'A', personb as 'B'))
)
group by person, attribute
having count(*) > 1;

PERSON     ATTRIBUTE
---------- ----------
Steve      Apple
Paul       Orange
Larry      Orange

3 rows selected. 
```

或者只是匹配该属性的人，我认为这是您问题的结尾所要寻找的：

```
select person
from (
    select *
    from things
    unpivot (person for which_person in (persona as 'A', personb as 'B'))
)
where attribute = 'Apple'
group by person, attribute
having count(*) > 1;

PERSON
----------
Steve

1 row selected. 
```

* * *

将`unpivot`列转换为行。单独运行它会将原来的六行转换为十二行，将原来的`persona`/`personb`列替换为一个单独`person`的列和一个额外的列，指示新行是从哪一列形成的，我们在这里并不真正关心：

```
select *
from things
unpivot (person for which_person in (persona as 'A', personb as 'B'));

        ID ATTRIBUTE  W PERSON
---------- ---------- - ----------
         1 Apple      A John
         1 Apple      B Steve
         2 Apple      A Steve
         2 Apple      B Larry
         3 Orange     A Paul
         3 Orange     B Larry
         4 Orange     A Paul
         4 Orange     B Larry
         5 Tomato     A Chris
         5 Tomato     B Michael
         6 Tomato     A Steve
         6 Tomato     B Larry

12 rows selected. 
```

外部查询然后做一个简单的组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:57:09.860

这是一种方法。

它通过交叉连接到一个数字列表来实现一个 unpivot 方法（您可以使用 Alex 使用的 unpivot 方法），然后加入结果集，希望使用散列连接来增加好处。

```
with
  row_generator as (
    select 1 counter from dual union all
    select 2 counter from dual),
  data_generator as (
    select
      attribute,
      id       ,
      case counter
        when 1 then persona
        when 2 then personb
      end person
    from
      things,
      row_generator)
select
  t1.attribute,
  t1.person
from
  row_generator t1,
  row_generator t2
where
  t1.attribute = t2.attribute and
  t1.person    =  t2.person   and
  t1.id        != t2.id; 
```

# javascript - How to run certain part of CSS3 animation in reverse order

> ID：15955006
> 
> 赞同：3
> 
> 时间：2013-04-11T17:20:28.713
> 
> 标签：javascript, jquery, css, animation

I am trying to run a certain part of a CSS3 animation in reverse order after it runs forwards.

The part I am trying to get is the keyframes from 50% to 100% to go in reverse after they have gone forwards.

I have 5 animations that go in the order fallA, fallB, fallC, fallD, and fallE then after fallE is done, I need it to go fallE, fallD, fallC, fallB, and fallA; but, only to the 50% keyframe from the 100% it is at.

Is there a way I can do this with CSS or even javascript / jquery?

Here is the animation code:

```
 .animated.fallA{
        -moz-animation: fallA 1s forwards ease-in-out;
        -webkit-animation: fallA 1s forwards ease-in-out;
        animation: fallA 1s forwards ease-in-out;
    }
    .animated.fallB{
        -moz-animation: fallB 1.2s forwards ease-in-out;
        -webkit-animation: fallB 1.2s forwards ease-in-out;
        animation: fallB 1.2s forwards ease-in-out;
    }
    .animated.fallC{
        -moz-animation: fallC 1.4s forwards ease-in-out;
        -webkit-animation: fallC 1.4s forwards ease-in-out;
        animation: fallC 1.4s fowards ease-in-out;
    }
    .animated.fallD{
        -moz-animation: fallD 1.6s forwards ease-in-out;
        -webkit-animation: fallD 1.6s forwards ease-in-out;
        animation: fallD 1.6s forwards ease-in-out;
    }
    .animated.fallE{
        -moz-animation: fallE 1.8s forwards ease-in-out;
        -webkit-animation: fallE 1.8s forwards ease-in-out;
        animation: fallE 1.8s forwards ease-in-out;
    }
    @-moz-keyframes fallA{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:0;
        }
    }
    @-webkit-keyframes fallA{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:0;
        }
    }
    @keyframes fallA{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:0;
        }
    }
    @-moz-keyframes fallB{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:-20px;
        }
    }
    @-webkit-keyframes fallB{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:-20px;
        }
    }
    @keyframes fallB{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:-20px;
        }
    }
    @-moz-keyframes fallC{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:-30px;
        }
    }
    @-webkit-keyframes fallC{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:-30px;
        }
    }
    @keyframes fallC{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:-30px;
        }
    }
    @-moz-keyframes fallD{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:-20px;
        }
    }
    @-webkit-keyframes fallD{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:-20px;
        }
    }
    @keyframes fallD{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:-20px;
        }       
    }
    @-moz-keyframes fallE{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:0;
        }
    }
    @-webkit-keyframes fallE{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:0;
        }
    }
    @keyframes fallE{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        50%{
            opacity:1.0;
            top:0;
        }
        100%{
            top:0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:32:15.690

have you tried with this?

```
.foo{
animation-direction:alternate;
-webkit-animation-direction:alternate;
} 
```

[here](http://developer.mozilla.org/en-US/docs/CSS/animation-direction) is the mozilla dev network reference
and [here](http://www.w3.org/TR/css3-animations/#animation-direction-property) the W3C reference

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:33:51.190

Have a look at cubic-bezier as an easing function, in stead of the ease-in-out. [http://cubic-bezier.com](http://cubic-bezier.com)

You would have to make your animation go to your current 50% mark, and by using the correct bezier, you make make it 'overshoot' and move back. Something like this: [http://cubic-bezier.com/#.29,.61,.79,3](http://cubic-bezier.com/#.29,.61,.79,3)

**edit:**
I did not look at your animation code carefull enough it seems. Bezier is not what you are after, as you are trying to create a bounce effect, and not an elastic 'overshoot' effect (if I understand your code correctly) [http://jsfiddle.net/4KwY8/1/](http://jsfiddle.net/4KwY8/1/)

The solution is not that hard. You just need to define your keyframes a bit diiferently for your fallB, C and D. The css would look something like this:

```
@keyframes fallB{
    0%{
        position:relative;
        opacity:0.0;
        top:-100px;
    }
    33%, 100%{
        opacity:1.0;
        top:0;
    }
    66%{
        top:-20px;
    }
} 
```

As you can see I use the middle keyframe both for the 1/3 point and the 3/3 point. The fiddle with this change included looks like this: [http://jsfiddle.net/4KwY8/2/](http://jsfiddle.net/4KwY8/2/)

I think this is what you where after. You might have to do some finetuning in terms of timing and keyframe positioning, but I think you get the general idea. If it is not clear, feel free to ask.

PS: For inspiration, some more cool css animation effects can be found here: [http://daneden.me/animate/](http://daneden.me/animate/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T17:36:30.233

Rather than trying to hand code your animation, and working round all the limitations of CSS 3 transitions, I'd recommend you do yourself a big favour and use one of the various JavaScript tween libraries such as the [Greensock animation platform](http://www.greensock.com/gsap-js/) (GSAP).

It's incredibly powerful, with support for delays, staggers, repeats, loops, reverse etc. You could probably rewrite the above (plus the additional functionality you need) in a few lines with GSAP.

You can see how it stacks up against CSS 3 transitions [here](http://www.greensock.com/transitions/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:49:26.557

You could write another keyframe animation in reverse (or using direction reverse) that has your needed animation from 0% to 100% and runs in half the time. So when the animation ends you could use jQuery to bind to the animation end and add a class that would apply the 'reverse' animation.

# php - 带有PDF问题的PHP imagick

> ID：15955013
> 
> 赞同：0
> 
> 时间：2013-04-11T17:21:01.257
> 
> 标签：php, pdf, imagick

我正在尝试将 PDF 的第一页转换为图像文件。

我有以下代码：

```
$im = new imagick('/images/test.pdf[0]');

$im->setImageFormat("jpg");
$page=$im->queryFormats();
echo "<pre>";
 print_r ($page);
echo "</pre>"; 
```

但是，我收到一条错误消息：

`Uncaught exception 'ImagickException' with message 'unable to open image`

如果我改变：

`$im = new imagick('/images/test.pdf[0]');`

至：

`$im = new imagick('/images/test.pdf');`

我收到以下错误：

`Uncaught exception 'ImagickException' with message 'Unable to read the file`

我确定我的 PDF 的路径是正确的，但我不确定如何解决这个问题。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:23:49.170

`/images`您的驱动器的根目录中有文件夹吗？请记住 - imagick 在 PHP 中运行，并且不知道您网站的 URL 空间结构是什么。您需要使用本地文件系统路径，例如

```
$im = new imagick('/path/to/example.com/html/images/test.pdf[0]'); 
```

# mysql - 如何从数据库中检索几行

> ID：15955015
> 
> 赞同：0
> 
> 时间：2013-04-11T17:21:06.207
> 
> 标签：mysql, vb.net

好的，所以我创建了一个新项目，允许用户相互发送消息。我已经差不多完成了，只是需要清理一些东西。

我已成功允许用户发送消息（通过 mysql）。现在我在我应该检索消息并将其显示在表单中的部分；这就是我卡住的地方。如果用户在数据库中只有 1 条消息，这很容易做到，但如果他有超过 1 条呢？我将如何检索它们并在表单中显示它们。我使用这个查询：

```
SELECT ToID
FROM Message
WHERE (ID LIKE @ID) 
```

它的作用是检查数据库中包含收件人作为用户 ID 的任何消息。如果数据库确实包含任何消息，那么程序将在文本框中显示它们。但是如果超过 1 条消息，数据库将如何在表单中显示它们？该表单具有以下文本框：

1.  发件人
2.  主题
3.  日期。

这是我希望用于检索消息的查询：

```
SELECT ID, Title, Body, Date, FromUsername
FROM Message
WHERE (ID LIKE @ID) 
```

请帮忙？任何其他解决方案都可以，只要它易于理解（我是 vb 新手）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:31:49.230

如果我理解正确，为什么不使用列表框而不是文本框来显示消息。这样，有多少消息并不重要，它们只会不断添加到列表框中。

就像是：

```
For Each s as String in messageList
listbox1.items.add(s)

Next 
```

**编辑：**

检索数据，然后将其绑定到列表框——我从来没有真正使用过 mysql，所以我从谷歌搜索中提取了代码——它应该能让你开始。

```
dim table as new DataTable("table1")

' Create a Connection
using conn as new MysqlConnection("...connectionstring")
    conn.Open() ' Open it

    ' Create a new Command Object
    using cmd as new MysqlCommand("SELECT ID, Title, Body, Date, FromUsername FROM Message WHERE (ID LIKE @ID)", conn)

        ' Create a DataAdapter
        ' A DataAdapter can fill a DataSet or DataTable
        ' and if you use it with a CommandBuilder it also
        ' can persist the changes back to the DB with da.Update(...)
        using da as new MysqlDataAdapter(cmd)
            da.Fill(table) ' Fill the table
        end using

    end using
end using

' A Binding Source allows record navigation
dim bs as new BindingSource(table, nothing)

' You can bind virtually every property (most common are "text" "checked" or "visible"
' of a windows.forms control to a DataSource
' like a DataTable or even plain objects

ListBox1.DisplayMember = "Message"
ListBox1.ValueMember = "ID"
ListBox1.DataSource = table2 
```

# javascript - Backbone.js 在扩展后将对象重命名为“子”

> ID：15955026
> 
> 赞同：0
> 
> 时间：2013-04-11T17:22:09.183
> 
> 标签：javascript, jquery, backbone.js

我正在将我所有的 JavaScript 类转换为 Backbone 模型。最初，当我在 Google Chrome 中使用 Javascript 调试器时，我的对象会显示为 type `DataNode`。

这是之前的代码示例。

```
 var DataNode = { name: function() { return "hello world"; } }; 
```

将其转换为 Backbone 模型后，它现在在调试器中显示为`child`.

现在和 Backbone 模型做同样的事情。

```
 var DataNode = Backbone.Model.extend({ name: function() { return "hello world"; } }); 
```

当我查看变量`DataNode`chrome 时说它的类型是`child`而不是`DataNode`像以前那样。

对于从 Backbone 模型扩展的所有对象，现在都在发生这种情况。现在有点痛苦，因为当我有一堆模型时，我不知道哪个是哪个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:29:38.553

欢迎来到 JS 中的类名问题。

事实上发生的事情是你的类实际上根本没有名字。在这种情况下，您的浏览器将尝试为您的日志对象指定一个适当的名称。如果你没有像以前那样做任何复杂的事情，即创建一个类，实例化一个对象，你的浏览器将看不到类名，通常给它包含类的 var 的名称。

您可能已经想过（或认为）：

```
var MyClass = function() {}; 
```

和

```
var MyClass = function MyClass() {}; 
```

我们是一样的。你错了。第二种是（据我所知）为您的班级命名的唯一方法。尝试两种情况：`console.log((new MyClass).constructor.name)`. 第一个会给你一个空字符串，第二个会给你 MyClass。

现在不要被愚弄了。你可能会想“我只需要设置constructor.name”。构造函数属性的每个属性都是受保护的，你不能自己设置它们。所以这就是问题所在。使用 Backbone 创建类的方式，我无法想到设置类名（或者可能是 eval，但不要。）。

所以我要说的是，你的事业失败了。再说一次，我对 JS 不是一无所知，可能会遗漏一些东西。

如果您有兴趣了解有关函数的构造函数属性的更多信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-27T23:21:27.770

[正如 Dan Malcom 在Debugging Javascript (Backbone and Marionette)](https://stackoverflow.com/a/15034014/4200039)问题中所描述的那样，您似乎实际上可以使用命名函数表达式覆盖构造函数属性。相关代码片段：

```
var Product = Backbone.Model.extend({
constructor: function Product() {
    Backbone.Model.prototype.constructor.apply(this, arguments);
}
}); 
```

关键是`function Product()`零件。[这](http://backbonejs.org/docs/backbone.html#section-248)是它在源的扩展功能中发生的地方。

# html - 删除列表样式图像

> ID：15955030
> 
> 赞同：0
> 
> 时间：2013-04-11T17:22:21.033
> 
> 标签：html, css

我以为我知道这一点，但我发现很难删除列表样式的图像。让我们来

[链接已删除]

举个例子。我想删除您可以在右侧看到的箭头。我尝试了以下方法：

```
#rightCol ul,#rightCol li,#rightCol ul li{list-style:none;}
#rightCol ul,#rightCol li,#rightCol ul li{background-image:none;} 
```

我首先使用背景图像创建箭头，但无法真正摆脱它。有什么建议吗？（以上是一个测试，就我而言，它将是#rightCol .nolists...）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:25:01.367

这里的 li 元素有背景，所以你需要做：

```
#rightCol .moduletable ul li{
    background: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:25:11.843

`background-image:none`对我来说很好。您是否尝试过刷新缓存？

**编辑：** 啊，是的，不同之处在于，您的样式不如用于放置背景图像的样式那么具体，因此它会被覆盖，其中包括`.moduletable`.

```
#rightCol .moduletable ul li {
   background-image:none;
} 
```

应该做的伎俩。

CSS 优先级基于特异性以及样式与其他样式相比出现的位置。如果您有两种具有*相同*特性的样式，则后一种将覆盖前一种的属性，但如果较早的一种*更*具体，它将优先。

# c++ - 预处理器魔术来完成模板中的类型名

> ID：15955031
> 
> 赞同：0
> 
> 时间：2013-04-11T17:22:21.323
> 
> 标签：c++, templates, c-preprocessor

我有一堆用户定义的结构；我们称它们为 A、B 和 C。

我无法修改它们，我需要添加日志记录功能；所以我添加了我自己的这些结构的日志版本来帮助解决这个问题。我们称它们为 A_Log、B_Log 和 C_Log。

我正在创建一个模板 StateLogger 类，其中包含一个名为`LogState(const T *ptr)`where`T`旨在为 A、B 或 C的成员函数。

```
template <typename T>
class StateLogger {
    public:
    void LogState(const T *ptr);

    private:
    std::vector<T> requests;
}; 
```

在这个函数中，我打算构造 A_Log/B_Log/C_Log 结构。

```
template<typename T>
void StateLogger<T>::LogState(const T *ptr) {
    ...
    VOODOO myLog = VOODOO(ptr);

} 
```

我想知道是否可以使用一些预处理器魔法附加`_Log`到`T`in `VOODOO`。所以，如果我使用`StateLogger<A>::LogState(a_ptr)` 我希望编译器生成`A_Log`而不是`Voodoo`.

我意识到我可以使用模板专业化来解决这个问题，但我对此很好奇。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T17:25:01.600

```
template <class T> struct logger_type;
template <> struct logger_type<A> {
    typedef A_Log type;
}; 
```

等等

这样，只要您需要记录器，只需使用`typename logger_type<T>::type`.

# asp.net - 如何关联请求和响应以进行日志记录

> ID：15955037
> 
> 赞同：3
> 
> 时间：2013-04-11T17:22:38.873
> 
> 标签：asp.net, servicestack

我正在使用全局过滤器来记录工作正常的请求/响应，但现在我想在两者中嵌入一个相关 ID（Guid），我可以将两者联系在一起。这样做的首选方法是什么？

谢谢你，斯蒂芬

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:45:07.880

不确定您是否正在考虑这些，但您可以使用[ServiceStack 请求和响应过滤器](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)来执行此操作听起来您想做这样的事情......

1.  **在请求属性过滤器中创建 Guid**并保存到 db。
2.  虽然仍在请求过滤器中将该 Guid 存储到 IHttpRequest.Items 字典中。这本词典是供您使用的。它将适用于所有 ServiceStack 服务。
3.  **通过 IHttpRequest 变量**访问响应属性过滤器中的 Guid ，并将响应条目保存到数据库。****

# python - map_async 完成后立即执行回调

> ID：15955038
> 
> 赞同：1
> 
> 时间：2013-04-11T17:22:39.150
> 
> 标签：python, python-multithreading

我将 map_async 与返回大量数据的进程一起使用。正常的 map_async 导致数据存储在内存中，然后在处理完所有内容后返回。为了解决这个问题，我使用了一种生成器方法：

[结合 itertools 和多处理？](https://stackoverflow.com/questions/7306522/combining-itertools-and-multiprocessing)

但是，这并没有充分利用多线程（例如，如果您完成了 29 个线程和 1 个线程挂起，则在每个人都完成之前它不会开始下一批作业）。有没有办法拥有 map_async 或者是否存在类似的函数，它将在每个线程完成时将其返回发送到回调函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:41:46.233

您想要的是使用基于生产者-消费者的解决方案。生产者将任务放入 a`multiprocessing.Queue`中，消费者（子进程）在循环中获取并处理它们。

[这](https://stackoverflow.com/questions/13980160/multiprocessing-producer-consumer-design)是一个很好的 SO 问题，有一个（详细的）可能的解决方案。

# php - PHP - 数组和 Foreach

> ID：15955046
> 
> 赞同：1
> 
> 时间：2013-04-11T17:23:21.253
> 
> 标签：php, arrays, foreach

我在 Google 中搜索并查阅了 PHP 文档，但无法弄清楚以下代码是如何工作的：

```
$some='name=Licensing Module;nextduedate=2013-04-10;status=Active|name=Test Addon;nextduedate=2013-04-11;status=Active';
function getActiveAddons($somet) {
    $addons = array( );
    foreach ($somet as $addon) {

        if ($addon['status'] == 'Active') {
            $addons[] = $addon['name'];
            continue;
        }
    }

    return $addons;
}
echo (count( getActiveAddons( $some ) ) ? implode( '<br />', getActiveAddons( $some ) ) : 'None'); 
```

代码总是回显的`None`。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:28:05.810

我不知道你从哪里得到这段代码，但你初始化`$some`的方式错误。预计它是这样的数组：

```
$some = array(
    array(
     'name' => 'Licensing Module',
     'nextduedate' => '2013-04-10',
     'status' => 'Active'
    ),
    array(
     'name' => 'Test Addon'
     'nextduedate' => '2013-04-11',
     'status' => 'Active'
    )
 ); 
```

我猜你读过的文章期望你将原始字符串解析成这种格式。

你可以这样实现：

```
$string = 'name=Licensing Module;nextduedate=2013-04-10;status=Active|name=Test Addon;nextduedate=2013-04-11;status=Active';

$result = array();
foreach(explode('|', $string) as $record) {
    $item = array();
    foreach(explode(';', $record) as $column) {
        $keyval = explode('=', $column);
        $item[$keyval[0]] = $keyval[1];
    }
    $result[]= $item;
}

// now call your function
getActiveAddons($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:32:24.290

$some 不是数组，因此 foreach 不会对其进行操作。你需要做类似的事情

```
$some = array(
   array(
      'name' => 'Licensing Module',
      'nextduedate' => '2013-04-10',
      'status' => 'Active'
   ),
   array(
      'name' => 'Test Addon',
      'nextduedate' => '2013-04-11',
      'status'=> 'Active'
   )
); 
```

这将创建一个可以循环的多维数组。

```
function getActiveAddons($somet) {
    $addons = array( );
    foreach ($somet as $addon) {
        foreach($addon as $key => $value) {
            if ($key == 'status' && $value == 'Active') {
                $addons[] = $addon['name'];
                continue;
            }
        }
    }
    return $addons;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:41:56.637

首先，您的 $some 变量只是一个字符串。您可以使用explode() 将字符串解析为一个数组，但从一个数组开始会更容易：

```
$some = array(
    array(
        "name" => "Licensing Module",
        "nextduedate" => "2013-04-10",
        "status" => "Active",
    ),
    array(
        "name" => "Test Addon",
        "nextduedate" => "2013-04-11",
        "status" => "Active",
    )
); 
```

现在，对于您的功能，您走在正确的轨道上，但我将对其进行清理：

```
function getActiveAddons($somet) {
    if (!is_array($somet)) {
        return false;
    }

    $addons = array();
    foreach ($somet as $addon) {
        if ($addon['status'] == 'Active') {
            $addons[] = $addon['name'];
        }
    }

    if (count($addons) > 0) {
        return $addons;
    }

    return false;
} 
```

最后是你的输出（你调用了两次函数）：

```
$result = getActiveAddons($some);

if ($result === false) {
    echo "No active addons!";
}
else {
    echo implode("<br />", $result);
} 
```

# knitr - knitr + LyX2.0.5.1：pdf 生成失败

> ID：15955050
> 
> 赞同：4
> 
> 时间：2013-04-11T17:23:28.817
> 
> 标签：knitr, lyx

使用 LyX2.0.5.1 我在生成 pdf 时出错。

**第一个文件：aab.lyx。**
LyX 错误：

```
File ended while scanning use of \title. <*> aab.tex *** (job aborted, no legal \end found) 
```

临时文件 aab.Rnw 已创建。使用 Rstudio，我可以打开它并编译 pdf。
aab.tex 文件以**\title{A结尾**

标题是“Aïkido Aviron Bayonnais”。

**第二个文件：bp.lyx。**
LyX 弹出窗口：

```
 Une erreur s'est produite lors de l'exécution :   
    Rscript --verbose --no-save --no-restore "/Applications/LyX.app/Contents/Resources/scripts/lyxknitr.R" "/Users/alainbret/tmp/lyx /lyx_tmpdir.EWu435/lyx_tmpbuf2/""bp.Rnw" "/Users/alainbret/tmp/lyx/lyx_tmpdir.EWu435/lyx_tmpbuf2/""bp.tex" UTF-8 "/Users/alainbret/Git/test/BloodPressure/scripts/". 
```

临时文件 bp.Rnw 和 bp.tex 已正确创建。
使用 Rstudio，我可以制作 pdf。

这些文件在 LyX2.0.4、R3.0.0.0 和 knitr 的开发版本中正确处理。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:58:14.813

有两个 LyX 错误可能会影响您：[#8504](http://www.lyx.org/trac/ticket/8504)和[#8537](http://www.lyx.org/trac/ticket/8537)。这两个错误都已在 LyX 的开发版本中修复，下一个版本（2.0.6）可能需要一个月的时间。

您可以按照[本页](http://yihui.name/knitr/demo/lyx/)“其他语言”部分中的说明自行修复#8504 。但是你不能对#8537 做任何事情，除非你从源代码编译 LyX。无论如何，请尝试解决第一个问题，看看是否有帮助。

顺便说一句，虽然这可能无关紧要，但 LyX 的当前版本是 2.0.5.1。你可以升级它。

# mysql - 如何授予对一个特定 mysql 表的远程访问权限？

> ID：15955052
> 
> 赞同：0
> 
> 时间：2013-04-11T17:23:40.310
> 
> 标签：mysql, remote-access

客户希望从那里的 IP 地址访问其 CRM 程序的特定 mysql 表。我正在开发网站部分并使用表格收集数据。

我应该采取哪些步骤来授予从一个 IP 地址访问特定 mysql 表的权限以及如何测试它？

```
GRANT ALL PRIVILEGES ON mydatabase.* to jsmith@'69.234.27.102' IDENTIFIED BY 'jimspassword'; 
```

我可以用特定的表替换 * 吗？我如何从我的电脑上测试这个？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:23:45.633

授予权限：

```
GRANT ALL PRIVILEGES ON mydatabase.mytable to yourtestuser@'your_ip_address' IDENTIFIED BY 'yourpassword'; 
```

记得：

```
FLUSH PRIVILEGES; 
```

在那之后。

让 MySQL 监听网络连接：

在`my.cnf`：

```
[mysqld]
port = 3306 
```

检查：

```
netstat -lnp 
```

确保防火墙不会阻止您的连接

```
iptables-save 
```

从您的 PC 上检查网络级别是否一切正常：

```
telnet mysqlbox_ip 3306 
```

确保 MySQL 中是否定义了用户：

```
mysql> \u mysql
mysql> select * from user; 
```

确保定义了表权限：

```
mysql> select * from tables_priv; 
```

# android - iOS 和 Android 应用开发：原生 vs 混合

> ID：15955053
> 
> 赞同：2
> 
> 时间：2013-04-11T17:23:42.413
> 
> 标签：android, ios, native, hybrid

我需要为 iOS 和 Android 开发一个应用程序。我可以在 obj 中编码。C 和 Java。该应用程序将显示来自 MySQL 数据库的数据，并将使用位置数据（您周围）显示在地图上。该数据库将在线管理。

我认为原生开发最适合这个应用程序。但是 HTML/JS 编码对我来说要容易得多。那么你会用哪种方式来制作专业的应用程序呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:47:51.777

使用混合 HTML 应用程序开发本机应用程序时，您将永远无法达到丰富、流畅和复杂的程度。简单是不可能的。因此，如果您知道这两种代码语言，如果您想获得最佳结果，肯定会选择 Native 选项。

但是，如果您时间有限，或者想要一个更快的选择，而不需要深入细致的工作人员，那么应该考虑 Hybrid。

只知道原生开发会花费你更多的时间。

因此，对于您的问题，如果您想创建一个合适的专业应用程序，请使用 Native 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:33:47.317

不幸的是，android 和 iOS 中的设计范式大不相同。我见过的制作原生应用程序的唯一可接受的例外是具有独立外观和感觉的游戏开发。

在多个平台之间管理数据的一个好方法是创建 RESTful Web 服务并让它们通过 JSON 进行通信。虽然我没有亲自在 Objective C 中实现 JSON，但我发现 Gson 对于通过 Android 连接到服务器非常有用。

这样，您的客户端可以使用本机对象更轻松，而不必担心客户端上的数据库健康和状态。

# ubuntu - 子域虚拟主机显示错误目录

> ID：15955055
> 
> 赞同：0
> 
> 时间：2013-04-11T17:23:45.420
> 
> 标签：ubuntu, virtualhost, host

我的子域虚拟主机有问题，它指向我的 /var/www 而不是 /var/www/info。

我有域，假设它是 xyz.com，为这个域创建了 dynhost，为这个域创建了子域 cname，所以如果我 ping 他们两个我有相同的 IP 地址。

我创建了两个虚拟主机：xyz.com 和 info.xyz.com，所以我在 /etc/apache2/sites-avaible 中有 2 个文件，在 /etc/apache2/sites-enabled 中有 2 个指向这些文件的符号链接。

xyz.com 虚拟主机：

```
<VirtualHost *:80>
    DocumentRoot /var/www
    ServerName xyz.com
    ServerAlias xyz.com *.xyz.com

    ErrorLog /var/log/apache2/xyz.com-error.log
    TransferLog /var/log/apache2/xyz.com-access.log

    <Directory /var/www>
            Options -Indexes +FollowSymLinks
            AllowOverride All
            Order deny,allow
            Allow from all
    </Directory>
</VirtualHost> 
```

info.xyz.com

```
<VirtualHost *:80>
    DocumentRoot /var/www/info
    ServerName info.xyz.com
    ServerAlias info.xyz.com *.info.xyz.com

    ErrorLog /var/log/apache2/info.xyz.com-error.log
    TransferLog /var/log/apache2/info.xyz.com-access.log

    <Directory /var/www/info/>
            Options -Indexes +FollowSymLinks
            AllowOverride All
            Order deny,allow
            Allow from all
    </Directory>
</VirtualHost> 
```

我的操作系统是 ubuntu 服务器 12.04。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:51:33.950

你的别名：

```
ServerAlias xyz.com *.xyz.com 
```

由于您有通配符，因此正在捕获两个站点的请求。

# spring - Spring Scope作为单例工作

> ID：15955059
> 
> 赞同：1
> 
> 时间：2013-04-11T17:23:59.803
> 
> 标签：spring, scope

在下面的示例中，我不太清楚发生了什么

```
 <bean id="triangle" class="com.mkyong.Triangle" scope="singleton">
<property name ="pt1" ref ="point1" />
<property name ="pt2" ref ="point2"/>
<property name ="pt3" ref ="point3"/>
</bean>

<bean id="triangle1" class="com.mkyong.Triangle" scope="singleton">
<property name ="pt1" ref ="point1" />
<property name ="pt2" ref ="point2"/>
<property name ="pt3" ref ="point3"/>
</bean> 
```

我看到了三角形对象的两个实例。Spring内部如何处理这个？我知道 Spring 正在使用反射。使用单例有什么意义，因为它的行为类似于原型（给我两个三角形对象）。如果范围的概念适用于相同的 id（三角形或三角形 1），则应将其定义为每个弹簧容器每个 id 每个对象每个类加载器每个 jvm，而不是每个弹簧容器单个对象每个类加载器每个 jvm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:26:39.750

将 bean 定义为单例并不意味着它只是该类的一个实例。单例范围适用于 bean 定义，因此您将有两个三角形类型的单例 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:27:56.117

它将有一个三角形 1 的实例或三角形 2 的另一个实例。

> 当一个 bean 是单例时，只有一个 bean 的共享实例将被管理，并且所有对 id 或 id 与该 bean 定义匹配的 bean 的请求都将导致 Spring 容器返回一个特定的 bean 实例。

[您可以在http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html#beans-factory-scopes-singleton](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html#beans-factory-scopes-singleton)查看更多信息

# c# - 使用 foreach 循环时，每行显示一个通用列表两个列表项

> ID：15955067
> 
> 赞同：4
> 
> 时间：2013-04-11T17:24:24.037
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我有一个传递给视图的通用对象列表。目前，每个列表项都逐行显示给用户：

```
@foreach (var result in Model.SearchResults)
{
    result.Address.TownCity
    // ...
} 
```

所以每个列表项都显示在自己的行中。从美学上讲，这看起来并不是最好的，因为留下了很多空白空间。

我想做的是这样的：

> 第 1 行 | 清单项目 1 | 清单项目 2
> 
> 第 2 行 | 清单项目 3 | 清单项目 4
> 
> 等等.....

这是我必须在服务器端做的事情，即将我的列表的一半放入另一个列表中，并且在视图中有两个 foreach 循环 - 每个循环逐行填充一列？或者无论如何这可以使用剃刀在视图中完成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T17:29:09.630

您可以这样做将每组行分组为“批次”，然后循环遍历批次中的每个项目。

```
@{
    var batches = Model.SearchResult
        .Select((x, i) => new { x, i })
        .GroupBy(p => (p.i / 2), p => p.x);
}
@foreach(var row in batches)
{
    <span>Row @row.Key</span>
    @foreach(var item in row)
    {
        <span>| @item.Address.TownCity</span>
    }
} 
```

或者，您可以使用它；它更简单，虽然有点不那么优雅

```
@{
    var resultArray = Model.SearchResult.ToArray(); // only necessary if SearchResult is not a list or array
}
@for(var i = 0; i < resultArray.Length; i++)
{
    var item = resultArray[i];
    if (i % 2 == 0)
    {
        <span>Row @(i / 2)</span>
    }
    <span>| @item.Address.TownCity</span>
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T17:47:00.453

这在 CSS 中很容易做到，而不会给您的代码增加额外的负载和复杂性

看到这个小提琴：http: [//jsfiddle.net/taBec/](http://jsfiddle.net/taBec/)

```
@foreach (var result in Model.SearchResults)
{
    <div class="box">@result.Address.TownCity</div>
} 
```

然后在 CSS 中：

```
.box { width: 150px; float: left; height:25px} 
```

您的应用程序运行速度更快，您的设计响应迅速且流畅。我希望这有帮助。

# plone - 使用 mr.migrator 和 transmogrify.filesystem 导入图片（尤其是带有图片的新闻）

> ID：15955079
> 
> 赞同：1
> 
> 时间：2013-04-11T17:25:12.893
> 
> 标签：plone, transmogrifier

我正在查看这个示例（[https://github.com/aclark4life/mr_migrator_demo/tree/master/data](https://github.com/aclark4life/mr_migrator_demo/tree/master/data)），它主要满足我的需要。我没有看到的是如何在图像中包含图像或新闻项目。

将不胜感激一些正确方向的指示。

# backbone.js - jsonp backbon fetch 集合

> ID：15955080
> 
> 赞同：0
> 
> 时间：2013-04-11T17:25:14.210
> 
> 标签：backbone.js, collections, jsonp, fetch

这是我的情况

```
var player = new Backbone.Model.extend({});
    var QuerySolarModel = Backbone.Collection.extend({
        model: player,

        url : function (){
            return myurl";
            },
       });

    this.list = new QuerySolarModel();
    this.list.filter= filter;
            this.list.fetch({
            dataType: "jsonp",
        success: function(){
            console.log('success');
        },
        error: function(data, response) {
               console.log("errore ");
            }
    }).complete(function () {alert("done");});
    console.log('la lista dovrebbe essere '+this.list); 
```

我必须通过外部 url 获取集合，url 的答案是

```
 {
  "responseHeader":{
    "status":0,
    "QTime":1,
    "params":{
      "indent":"true",
      "q":"FULLNAME:MINO",
      "wt":"json"}},
  "response":{"numFound":18,"start":0,"docs":[
      {
        "id":"2",
        "PHYSICAL_CUSTOMER_DATA_ID":"5",
        "CONTRACT_IDENTITY":"0000000002",
        "STATUS_ID":"3",
        "STATUS_DESC":"Suspended",
        "FULLNAME":"MINO MAX",
        "GAME_ACCOUNT_ID":"1000000038",
        "ADDRESS":"VIA ROMA_1 VIA ROMA_2 VIA ROMA_3",
        "EMAIL":["l.ghionna@mail.it",
          "3475061120"],
        "_version_":1432013050215399424},
      {
        "id":"3",
        "PHYSICAL_CUSTOMER_DATA_ID":"6",
        "CONTRACT_IDENTITY":"0000000003",
        "FULLNAME":"MINO MAX",
        "GAME_ACCOUNT_ID":"1000000045",
        "ADDRESS":"VIA ROMA_1 VIA ROMA_2 VIA ROMA_3",
        "EMAIL":["3475061120",
          "l.ghionna@mail.it"],
        "_version_":1432013050244759552}]
  }} 
```

我想为每个“玩家”制作一个模型集合，但浏览器回答我：

资源解释为脚本，但使用 MIME 类型文本/纯文本传输：“myurl”。jquery.js:8169

未捕获的语法错误：意外的令牌：选择：1

我在哪里弄错了？？

编辑：我明白为什么它不起作用，你使用 jsnop 它必须由回调（{your json}）mmm 包装，现在我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:07:55.050

尝试`dataType: "jsonp"`从选项中删除。

您的代码也无效->`return myurl";`

# android - Android achartengine setDisplayChartValues 崩溃 App

> ID：15955081
> 
> 赞同：2
> 
> 时间：2013-04-11T17:25:15.487
> 
> 标签：android, charts, achartengine

我只想在图表线的正上方显示 Y 值，我发现执行此操作的方法是将 setDisplayChartValues 设置为 true。但是，当我使用它时，应用程序崩溃并显示以下错误消息：***java.lang.IndexOutOfBoundsException: Invalid index 3, size is 3 is 3*** of points in the chart。

```
public class LineGraph {

private XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
private double max = 0;
private double min = 999;

public View getView(Context ctx, String[] dates, double[] y){

    for(int i = 0; i < y.length; i++){

        if(y[i] > max)
            max = y[i];

        if(y[i] < min)
            min = y[i];
    }

    TimeSeries series = new TimeSeries("progress");
    for(int i = 0; i < dates.length; i++){

        String temp[] = dates[i].split("/");

        int year = Integer.parseInt(temp[0]);
        int month = Integer.parseInt(temp[1]);
        int day = Integer.parseInt(temp[2]);

        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.YEAR, year);
        cal.set(Calendar.MONTH, month-1);
        cal.set(Calendar.DAY_OF_MONTH, day);
        Date dt = cal.getTime();

        series.add(dt, y[i]);
    }

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    dataset.addSeries(series);

    XYSeriesRenderer renderer = new XYSeriesRenderer();
    renderer.setColor(Color.GREEN);
    renderer.setPointStyle(PointStyle.CIRCLE);
    renderer.setFillPoints(true);
    renderer.setLineWidth(3f); // Girth of the chart line

    //mRenderer.setZoomButtonsVisible(true);
    //mRenderer.setZoomEnabled(false, false);

    renderer.setDisplayChartValues(true);

    mRenderer.addSeriesRenderer(renderer);
    mRenderer.setApplyBackgroundColor(true);
    mRenderer.setBackgroundColor(Color.BLACK);
    //mRenderer.setShowGrid(true);

    //mRenderer.setXTitle("dias");
    mRenderer.setYTitle("Weight (Kg)");
    mRenderer.setPointSize(5f);
    mRenderer.setPanEnabled(true, false);
    mRenderer.setLabelsTextSize(17f);

    //Setting the max and min height of the chart
    mRenderer.setYAxisMax(max + 2);
    mRenderer.setYAxisMin(min - 2);

    View view = ChartFactory.getTimeChartView(ctx, dataset, mRenderer, "dd/MMM/yyyy");

    return view;
} 
```

通过使用 renderer.setDisplayChartValues(true); 应用程序崩溃，没有它，工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T21:06:17.997

这是一个奇怪的问题，但是将数据添加到`TimeSeries`乱序中会导致这种情况。我用 a`TreeMap`来模仿`TimeSeries`. 然后，只需遍历排序的键`TreeMap`并将数据添加到`TimeSeries`那种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:15:06.280

我建议您升级到最新的 1.1.0 版本，因为此问题已在不久前修复。你可以在[这里](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)下载版本。

# c# - 如何在 EC2 Ubuntu 服务器上使用 C# 重新启动计算机？

> ID：15955084
> 
> 赞同：0
> 
> 时间：2013-04-11T17:25:23.677
> 
> 标签：c#, ubuntu, mono, amazon-ec2

我正在使用 Ubuntu 在 AWS EC2 实例上运行 C# 控制台应用程序。我想使用 C# 从我的应用程序重新启动计算机。有什么方法可以`sudo reboot`从 C# 执行吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:03:46.730

它使用以下代码工作。

```
Process process = new Process();
process.StartInfo.FileName = "/usr/bin/sudo";
process.StartInfo.Arguments = "/sbin/shutdown -r now";
process.Start(); 
```

# ubuntu - Ubuntu Server 12.10 睡眠和唤醒？

> ID：15955087
> 
> 赞同：0
> 
> 时间：2013-04-11T17:25:34.997
> 
> 标签：ubuntu, ubuntu-12.10

我刚刚启动并运行了我的 Ubuntu Server 12.10，但是当我离开或服务器空闲一段时间后，我希望我的服务器进入**睡眠状态**，但当我希望它通过 ssh 重新打开时，我也希望它重新打开。

是否可以通过 SSH 使其休眠/唤醒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:47:37.477

Absolutley，您只需要设置 Wake On Lan： [https ://help.ubuntu.com/community/WakeOnLan](https://help.ubuntu.com/community/WakeOnLan)

# python - 如何在 Django 中测试手动数据库事务代码？

> ID：15955089
> 
> 赞同：6
> 
> 时间：2013-04-11T17:25:46.227
> 
> 标签：python, django, unit-testing, transactions

我正在将数据从遗留系统传输到 Django。为了确保当前数据库的完整性，我手动提交所有内容。

但是，在编写单元测试时，事务不会正确回滚。由于`TestCase`可能正在使用事务，有没有办法在 Django 中正确测试依赖事务的代码？

```
@transaction.commit_manually
def import_records():
    # initial prep
    try:
        import_data()
    except Exception as error:
        rollback = True
    except (KeyboardInterrupt, SystemExit):
        sys.stdout.write("Import canceled\n")
        rollback = True
    if rollback is True:
        transaction.rollback()
    # save history of import 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T17:34:52.353

我相信您正在寻找[`TransactionTestCase`](https://docs.djangoproject.com/en/dev/topics/testing/tools/#django.test.TransactionTestCase)与正常不同的处理设置和拆卸的方法`TestCase`。

# php - 更新当前行

> ID：15955090
> 
> 赞同：0
> 
> 时间：2013-04-11T17:25:50.133
> 
> 标签：php, mysql, database

我到处寻找帮助，但似乎找不到答案。我有一个表格，人们可以在其中输入搜索词。单击提交按钮后，它链接到一个 PHP 页面，该页面搜索针对我的数据库中的 3 个字段输入的术语。这一切都很好。我想为显示的每个结果添加一个按钮，允许我单击以添加到递增的数字。

如果我在我的查询语句中定义我想要更新的行，这是有效的，因为它会在单击按钮后重定向到自身；但我希望按钮更新结果中显示的记录，而不是定义的记录。

显然，可以有几个返回的结果，每个结果都有自己的按钮，所以我希望用户能够单击附加到该记录的按钮，并让它更新数据库该行中的字段。是否可以以任何方式定义“当前记录”？

这是当前代码：

```
if($_POST['like']){

$add =("UPDATE Players SET played=played+1 WHERE SquadNo=11");
$result = mysql_query($add) or die(mysql_error());

} 
```

如您所见，我`squad number 11`此时已定义，但想要更新当前行。

第二个问题，在此阶段较小，是当我单击按钮以增加值时，它似乎会更新搜索并在发生增加后提供一组不同的结果。我怎样才能防止这种情况发生？

谢谢 - 我希望这是有道理的。

这是我的完整代码：

```
<?php
mysql_connect ("localhost", "USER","PASSWORD")  or die (mysql_error());
mysql_select_db ("TABLE");

 if($_POST['like']){

    $add =("UPDATE Players SET played=played+1 WHERE SquadNo=11");
    $result = mysql_query($add) or die(mysql_error());

    }

$term = $_POST['term'];

$sql = mysql_query("select * from Players where POS like '%$term%' or POS2 like '%$term%' or POS3 like '%$term%' ");

while ($row = mysql_fetch_array($sql)){
    echo 'Name: '.$row['Name'];
    echo '<br/> Surname: '.$row['Surname'];
    echo '<br/> Position 1: '.$row['POS'];
    echo '<br/> Position 2: '.$row['POS2'];
    echo '<br/> Position 3: '.$row['POS3'];
    echo '<br/> Squad Number: '.$row['SquadNo'];
    echo '<br/> Played: '.$row['played'];
    echo '<br/><br/>';
    echo'<form method="post" action="' . $_SERVER[PHP_SELF]. '">
   <input type="submit" name="like" value="like"><br>
</form>';
      echo '<br/><br/>';

    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:27:52.583

您需要跟踪按钮所在的行，例如

```
<form ...>
   <input type="hidden" name="rowID" value="$row['record_id']" />
   <input type="submit">
</form> 
```

然后做相当于

```
UDPATE yourtable SET ... WHERE row_id = $row_id_from_form 
```

# c# - Winforms 添加/编辑表单的最佳实践

> ID：15955091
> 
> 赞同：1
> 
> 时间：2013-04-11T17:25:50.810
> 
> 标签：c#, winforms

我正在学习在 .NET C# WINFORMS 下开发

我有将老师添加到数据库的形式。

现在我需要为编辑老师制作表格。

为此目的创建不同的表格是正常的吗？因为它有相同的控件，所以也许只是调用相同的添加教师的形式，但将数据加载到控件，并将按钮从添加更改为保存？

在 web 开发 (php) 中，我有时使用相同的表单来编辑/添加数据，因为处理这种行为并不难。但我不确定这种做法是否也适用于 Windows 编程。

这里是添加的形式。如果我也重复使用此表单进行编辑，我担心以后很难维护此代码。

肿瘤坏死因子。

![这种形式](https://i.stack.imgur.com/ARxx1.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:27:28.987

imo是的，您应该重用相同的表格...长期维护的代码更少

编辑：正如 imp0ssible 所说，如果它是主要形式，这是不可能的

只需制作 2 个构造函数，这样您就知道您是否正在添加或编辑老师

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:29:42.310

这个表格，主表格吗？如果没有，您可以为这种形式的（添加，编辑，...）调用不同的构造函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T17:29:05.080

我通常会使用相同的表格来解决这个问题。为了清楚起见，我不会重新标记按钮，而是使用不同的标题和/或其他清晰的标题来指示用户是在添加还是在更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-13T17:40:57.857

```
 Reproduktor rep;
    public Edit(Reproduktor rep)
    {
        InitializeComponent();
        this.rep = rep;
        comboBox1.SelectedIndex = comboBox1.FindStringExact(rep.typSoustavy);
        if (comboBox1.SelectedIndex == 0)
        {
            txtFl.Text = (rep as Reproduktor).fl.ToString(); //+fr
        }
        else if(comboBox1.SelectedIndex ==1)
        {
            txtSub.text blablabla 
        }
        else if(comboBox1 ==2)
        { }
        textBox1.Text = rep.vyrobce;
        textBox2.Text = rep.nazev;
        //cena.tostring
        comboBox1.SelectedIndex = comboBox1.FindStringExact(rep.bluethoot);
    }

    private void buttonStorno_Click(object sender, EventArgs e)
    {
        DialogResult = DialogResult.Cancel;
        this.Close();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-13T17:55:48.803

另一个构造函数可以工作，这样您就可以根据需要知道要启用或禁用哪些控件，这是最简单的方法，您将重用相同的表单/代码。

# android - 在android中使用媒体播放器播放音频时出现未知错误

> ID：15955094
> 
> 赞同：0
> 
> 时间：2013-04-11T17:25:56.677
> 
> 标签：android, media-player

在我的应用程序中，我必须从外部存储播放歌曲。它工作正常，但有时媒体播放器在没有错误日志或警告的情况下停止。这是发生这种情况时出现的我的logcat：

```
04-12 11:18:31.528: D/jdwp(12465): sendBufferedRequest : len=0x39
04-12 11:18:31.541: D/jdwp(12465): sendBufferedRequest : len=0x3B
04-11 22:39:16.320: D/dalvikvm(16048): threadid=10: interp stack at 0x4bf6e000

04-11 22:39:16.326: D/jdwp(16048): sendBufferedRequest : len=0x3B

04-11 22:39:16.436: D/dalvikvm(16048): threadid=11: interp stack at 0x4bfa8000

04-11 22:39:16.436: D/dalvikvm(16048): threadid=11: calling run()

04-11 22:39:16.437: D/dalvikvm(16048): threadid=12: interp stack at 0x4bfb0000

04-11 22:39:16.437: D/dalvikvm(16048): threadid=12: calling run()

04-11 22:39:16.476: D/dalvikvm(16048): threadid=13: interp stack at 0x4bfb8000

04-11 22:39:16.476: D/dalvikvm(16048): threadid=13: calling run()

04-11 22:39:16.486: D/dalvikvm(16048): threadid=13: exiting

04-11 23:42:26.737: D/dalvikvm(3500): threadid=13: bye!

04-11 23:42:26.737: D/dalvikvm(3500): threadid=0: freeing

04-11 23:42:26.753: D/ACRA(3500): Using default Report Fields

04-11 23:42:26.765: D/ACRA(3500): Looking for error files in /data/data/com.pakagename/files 
```

我正在尝试`media.setdatasource(file.getFD)`某些主题的建议，但它不起作用我需要你的帮助，谢谢

这是我创建媒体播放器时的代码：

```
try {
        try {
            Log.d("file music ", musicObject.getFilePath());
            FileInputStream fileInputStream = new FileInputStream(musicObject.getFilePath());
            mediaPlayer.setDataSource(fileInputStream.getFD());

        } catch (IOException e1) {

            e1.printStackTrace();
        }
        mediaPlayer.playlistEntry = musicObject;

        mediaPlayer.setOnCompletionListener(new OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer mp) {
                Log.e("",
                        "onCompletion getPlaylistPlaybackMode "
                                + mPlaylist.getPlaylistPlaybackMode()
                                + " seleected track id "
                                + mPlaylist.getSelectedIndex());
                mMPHandler.sendEmptyMessageDelayed(MSG_MP_RELEASE, 500);
            }

        });

        mediaPlayer.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                mediaPlayer.preparing = false;

                // we may start playing
                if (mPlaylist.getSelectedTrack() == mediaPlayer.playlistEntry
                        && mediaPlayer.playAfterPrepare) {
                    mediaPlayer.playAfterPrepare = false;
                    play();
                    Log.d("onprepared", "true");
                }

            }

        });

        mediaPlayer
                .setOnBufferingUpdateListener(new OnBufferingUpdateListener() {

                    @Override
                    public void onBufferingUpdate(MediaPlayer mp,
                            int percent) {
                        if (mPlayerEngineListener != null) {
                            mPlayerEngineListener.onTrackBuffering(percent);
                        }
                    }

                });

        mediaPlayer.setOnErrorListener(new OnErrorListener() {

            @Override
            public boolean onError(MediaPlayer mp, int what, int extra) {
                Log.w(UILApplication.TAG, "PlayerEngineImpl fail, what ("
                        + what + ") extra (" + extra + ")");
                CommonUtils.writetoFile( "PlayerEngineImpl fail, what ("
                        + what + ") extra (" + extra + ")", context);

                if (what == MediaPlayer.MEDIA_ERROR_UNKNOWN) {

                    if (mPlayerEngineListener != null) {
                        mPlayerEngineListener.onTrackStreamError();
                    }
                    stop();
                    return true;
                }

                if (what == -1) {
                    long failTime = System.currentTimeMillis();
                    if (failTime - mLastFailTime > FAIL_TIME_FRAME) {

                        mTimesFailed = 1;
                        mLastFailTime = failTime;
                        Log.w(UILApplication.TAG, "PlayerEngineImpl "
                                + mTimesFailed
                                + " fail within FAIL_TIME_FRAME");
                    } else {

                        mTimesFailed++;
                        if (mTimesFailed > ACCEPTABLE_FAIL_NUMBER) {
                            Log.w(UILApplication.TAG,
                                    "PlayerEngineImpl too many fails, aborting playback");
                            if (mPlayerEngineListener != null) {
                                mPlayerEngineListener.onTrackStreamError();
                            }
                            stop();
                            return true;
                        }
                    }
                }
                return false;
            }
        });

        mediaPlayer.preparing = true;
        try {
            mediaPlayer.prepare();
        } catch (IOException e) {

            e.printStackTrace();
        }

        if (mPlayerEngineListener != null) {
            mPlayerEngineListener.onTrackChanged(mPlaylist
                    .getSelectedTrack());
        }

        return mediaPlayer;
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } 
```

玩的时候：

```
if (mCurrentMediaPlayer != null
                && mCurrentMediaPlayer.musicObject != mPlaylist
                        .getSelected()) {
            try {
            mCurrentMediaPlayer.stop();
        } catch (IllegalStateException e) {
            // this may happen sometimes
        } finally {
            mCurrentMediaPlayer.release();
            mCurrentMediaPlayer = null;
        }
            mCurrentMediaPlayer = build(mPlaylist.getSelectedTrack());
        } 
```

和汉德勒在`oncompletionListener`：

```
protected Handler mMPHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if(msg.what == MSG_MP_RELEASE) {
            if (mPlaylist.getPlaylistPlaybackMode() == PlaylistPlaybackMode.SHUFFLE_AND_REPEAT1
                    || mPlaylist.getPlaylistPlaybackMode() == PlaylistPlaybackMode.REPEAT1) {
                Log.e("",
                        "onCompletion getPlaylistPlaybackMode "
                                + mPlaylist.getPlaylistPlaybackMode()
                                + " seleected track id "
                                + mPlaylist.getSelectedIndex());
                play(mPlaylist.getSelectedIndex());
            } else if (!mPlaylist.isLastTrackOnList()
                    || mPlaylist.getPlaylistPlaybackMode() == PlaylistPlaybackMode.REPEAT
                    || mPlaylist.getPlaylistPlaybackMode() == PlaylistPlaybackMode.SHUFFLE_AND_REPEAT) {
                next();
            } else

            {
                stop();
            }
        }
    }
}; 
```

编辑：直到现在，我不知道会发生什么。当我在应用程序外执行一些或很多后台操作时会出现

```
 04-12 11:18:31.528: D/jdwp(12465): sendBufferedRequest : len=0x39
04-12 11:18:31.541: D/jdwp(12465): sendBufferedRequest : len=0x3B 
```

也许是问题

编辑：我从 android 开发者网页中找到了一些信息：

> Android 系统仅在内存不足时才会强制停止服务，并且必须为具有用户焦点的活动恢复系统资源。如果服务绑定到具有用户焦点的活动，则它不太可能被杀死，如果服务被声明在前台运行（稍后讨论），那么它几乎永远不会被杀死。否则，如果服务已启动并且长时间运行，那么系统将随着时间的推移降低其在后台任务列表中的位置，并且该服务将变得非常容易被杀死 - 如果您的服务已启动，那么您必须将其设计为优雅地处理系统重新启动。如果系统终止了您的服务，它会在资源再次可用时立即重新启动它（尽管这也取决于您从 onStartCommand() 返回的值，稍后讨论）。有关系统何时可能破坏服务的更多信息，请参阅进程和线程文档。

我怎么修不了？

# ruby-on-rails - 从不同实例中查找时间聚合

> ID：15955097
> 
> 赞同：2
> 
> 时间：2013-04-11T17:25:59.197
> 
> 标签：ruby-on-rails, ruby, datetime, aggregate

我有一个名为 WorkInterval 的模型，它的记录基本上包含：

```
start_date, end_date 
```

我希望能够获得特定任务的所有 WorkIntervals（我知道如何处理关联）并获得花费的总时间。因此，对所有实例的 end_date 和 start_date （end_date - start_date）之间的所有差异进行聚合（添加）。

现在我能够做到这一点：

`@task.work_intervals`-> 这给了我所有的work_intervals，但是我怎样才能以干净的红宝石方式获得花费在该任务上的时间总和？

注意：
1 - end_date 和 start_date 都是**DateTime**。
2 - 某些实例的 end_date 可能为 NIL，如果是这种情况，则应采用当前日期时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:33:29.710

```
@task.work_intervals
.map {|i| (i.end_date || Time.now).to_time - i.start_date.to_time }
.reduce(:+)
# => total in seconds 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T19:04:32.897

这是一个提示，在您的任务模型中定义如下函数：

```
def total_time_in_hours
 _total_time = 0
 self.work_intervals.each do |work_interval|
  _start_date = work_interval.start_date
  _end_date = work_interval.end_date
  _end_date = Time.now unless _end_date.blank?
  _total_time += ((_end_date - _start_date)/1.hour).round
 end
 _total_time
end 
```

现在像这样访问总时间`@any_task.total_time_in_hours`......希望有帮助...... :)

[更新]

忽略这个答案，我犯了一些错误...... :(

我的测试是在 posgresql 中使用我的数据库的实际记录完成的，表列最初是作为日期时间创建的，但是当我在 Rails 中检索记录时，我不知道是否发生了变化......

```
1.8.7-p371 :001 > @init_date = MaterialReservacion.first.hora_limite

  => Thu, 11 Apr 2013 19:09:14 CDT -05:00

1.8.7-p371 :002 > @end_date = Time.now

  => Fri Apr 12 09:33:34 -0500 2013 

1.8.7-p371 :003 > ((@end_date-@init_date)/1.hour).round
  => 14 
```

# android - Commons Math - 找不到类 org.apache.commons

> ID：15955098
> 
> 赞同：3
> 
> 时间：2013-04-11T17:26:09.037
> 
> 标签：android, math, apache-commons, apache-commons-math

我已经从[这里](http://commons.apache.org/proper/commons-math/download_math.cgi)下载了二进制 Zip 。我将 zip 解压缩到一个文件夹中。然后我右键单击`libs`Eclipse 中的文件夹。我将 *.jar 文件导入到`libs`文件夹中，然后我右键单击它并`added to path`. 我添加了

```
 import org.apache.commons.math3.stat.descriptive.DescriptiveStatistics; 
```

到我的java文件，我正在添加值

```
DescriptiveStatistics rStandardDeviation = new DescriptiveStatistics(); 
```

之后我通过以下方式运行数学部分：

```
double bMean = bStandardDeviation.getMean();
double rStd = rStandardDeviation.getStandardDeviation(); 
```

编译、清理或构建时没有错误。当我尝试在手机上运行该应用程序时，我得到：

```
Could not find class 'org.apache.commons.math3.stat.descriptive.DescriptiveStatistics', referenced from method com.example.mydemo.MainActivity.<init> 
```

任何想法有人出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:28:38.243

在您的构建配置中，确保您检查要在 Order and Export 中导出的库。看

![在此处输入图像描述](https://i.stack.imgur.com/Npshy.png)

# email - iOS：如何设置文本视图的模态邮件撰写控制器导航栏的颜色？

> ID：15955104
> 
> 赞同：0
> 
> 时间：2013-04-11T17:26:17.313
> 
> 标签：email, hyperlink, textview, navigationbar, appearance

当用户在 中长按电子邮件链接`UITextView`，并选择新消息选项时，系统会显示邮件撰写控制器。我想改变它的导航栏颜色（或外观）。

有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T20:36:15.493

```
MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
[[mailer navigationBar] setTintColor:[UIColor whiteColor]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:27:50.480

使用 RGB：

```
UINavigationBar *bar = [self.navigationController navigationBar];
[bar setTintColor:[UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:1.0]]; 
```

# java - GridWorld 代码中间的 NullPointerException

> ID：15955106
> 
> 赞同：-4
> 
> 时间：2013-04-11T17:26:35.303
> 
> 标签：java, nullpointerexception, gridworld

我正在使用[GridWorld](http://gridworld.info)案例研究。我似乎在提供的程序中发现了一个错误。尝试通过 GUI 创建大小无效的网格并关闭错误消息后，每当我尝试对现有网格执行任何操作时，都会收到 NullPointerException：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
        at info.gridworld.gui.GUIController$3.mousePressed(GUIController.java:119)
        at java.awt.AWTEventMulticaster.mousePressed(AWTEventMulticaster.java:279)
        at java.awt.Component.processMouseEvent(Component.java:6501)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
        at java.awt.Component.processEvent(Component.java:6269)
        at java.awt.Container.processEvent(Container.java:2229)
        at java.awt.Component.dispatchEventImpl(Component.java:4860)
        at java.awt.Container.dispatchEventImpl(Container.java:2287)
        at java.awt.Component.dispatchEvent(Component.java:4686)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4489)
        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
        at java.awt.Container.dispatchEventImpl(Container.java:2273)
        at java.awt.Window.dispatchEventImpl(Window.java:2713)
        at java.awt.Component.dispatchEvent(Component.java:4686)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
        at java.awt.EventQueue.access$000(EventQueue.java:101)
        at java.awt.EventQueue$3.run(EventQueue.java:666)
        at java.awt.EventQueue$3.run(EventQueue.java:664)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
        at java.awt.EventQueue$4.run(EventQueue.java:680)
        at java.awt.EventQueue$4.run(EventQueue.java:678)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre ad.java:211)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread. java:128)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre   ad.java:117)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

此外，我无法通过提供的 GUI 将网格更改为其他内容：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
        at info.gridworld.gui.WorldFrame.setGrid(WorldFrame.java:237)
        at info.gridworld.gui.MenuMaker$GridConstructorItem.actionPerformed(MenuMaker.java:344)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
        at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
        at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
        at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
        at javax.swing.AbstractButton.doClick(AbstractButton.java:376)
        at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:833)
        at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:877)
        at java.awt.Component.processMouseEvent(Component.java:6504)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
        at java.awt.Component.processEvent(Component.java:6269)
        at java.awt.Container.processEvent(Container.java:2229)
        at java.awt.Component.dispatchEventImpl(Component.java:4860)
        at java.awt.Container.dispatchEventImpl(Container.java:2287)
        at java.awt.Component.dispatchEvent(Component.java:4686)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
        at java.awt.Container.dispatchEventImpl(Container.java:2273)
        at java.awt.Window.dispatchEventImpl(Window.java:2713)
        at java.awt.Component.dispatchEvent(Component.java:4686)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
        at java.awt.EventQueue.access$000(EventQueue.java:101)
        at java.awt.EventQueue$3.run(EventQueue.java:666)
        at java.awt.EventQueue$3.run(EventQueue.java:664)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
        at java.awt.EventQueue$4.run(EventQueue.java:680)
        at java.awt.EventQueue$4.run(EventQueue.java:678)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

我认为这是 GridWorld 程序本身的错误，而不是我编写的任何代码中的错误，因为即使我只是启动程序而没有给它任何执行代码，这似乎也会发生。我进行了一些调查，发现由于某种原因，`null`每当我尝试在 GUI 中更改网格时，网格都会设置为，并且我尝试创建的网格无效（或者在创建网格时发生任何异常）。为什么网格设置为`null`？有没有办法我自己在提供的源代码中解决这个问题？

我正在使用的版本是 GridWorld 1.02，可在 GridWorld.info 的“非官方代码”链接下找到。CollegeBoard 网站上的代码较旧。我已经对此进行了测试，并且旧版本*也会*发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:14:25.550

我看起来你需要`newGrid`在调用`setGrid(Grid<T> newGrid)`a时检查是否为空`WorldFrame`。我可以通过创建具有负行或列值的网格来重新创建您描述的问题。允许网格设置为 null 似乎会导致 NPE 下行。

对源进行以下更改将修复它。关闭错误消息后，我能够创建一个有效大小的新网格以及使用其他 GUI 功能。

WorldFrame.java：

```
public void setGrid(Grid<T> newGrid)
{
    if (newGrid == null) {  // this is what I added...
        return;
    }

    Grid<T> oldGrid = world.getGrid();
    Map<Location, T> occupants = new HashMap<Location, T>();
    for (Location loc : oldGrid.getOccupiedLocations())
        occupants.put(loc, world.remove(loc));

    world.setGrid(newGrid);
    for (Location loc : occupants.keySet())
    {
        if (newGrid.isValid(loc))
            world.add(loc, occupants.get(loc));
    }

    display.setGrid(newGrid);
    repaint();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:09:03.710

## 这是发生的事情

NullPointer 异常发生在源文件*GUIController.java*中，如堆栈跟踪所示。

```
Grid<T> gr = parentFrame.getWorld().getGrid();
Location loc = display.locationForPoint(evt.getPoint());
if (loc != null && gr.isValid(loc) && !isRunning()) 
```

`gr`，从中检索的`getWorld().getGrid()`可以为空，并且 if 语句在调用 之前不检查 gr `gr.isValid()`。

溯源：

Grid 由*WorldFrame.java*`setGrid()`中的方法设置，该方法不检查其输入，也就是说，如果您调用该方法，它会将新网格设置为 null。*`null`*

 *该`setGrid()`方法是从 MenuMaker.java 调用的*（*第 343 行）

```
Grid<T> newGrid = (Grid<T>) invokeConstructor(); 
parent.setGrid(newGrid); 
```

并且该`invokeConstructor()`方法在异常时返回 null。 **这就是你的 null 来自哪里**

## 使固定

确保 WorldFrame.java 中的*setGrid*不接受空值作为参数。

```
public void setGrid(Grid<T> newGrid) {
    if (newGrid == null) {
        return;
    }
    // rest of method goes here 
```

一个可能更好但更复杂的解决方案是确保`invokeConstructor()`in`MenuMaker.java`不返回 null。通知 GUI 并处理异常（而不是返回 null）将是一个更优雅的解决方案。

希望这可以帮助。*

# java - 如何使用 NFC 扫描标签？

> ID：15955115
> 
> 赞同：1
> 
> 时间：2013-04-11T17:26:59.090
> 
> 标签：java, android, nfc

我只是想阅读标签的内容。但是我研究这个的时间越长，我就越觉得自己是唯一一个不明白它是如何工作的人。

浏览 developer.android.com 网站，我发现了以下方法：

```
 public String readTag(Tag tag) {
        MifareUltralight mifare = MifareUltralight.get(tag);
        try {
            mifare.connect();
            byte[] payload = mifare.readPages(4);
            return new String(payload, Charset.forName("US-ASCII"));
        } catch (IOException e) {
            Log.e(TAG, "IOException while writing Scanner message...", e);
        } finally {
            if (mifare != null) {
                try {
                    mifare.close();
                }
                catch (IOException e) {
                    Log.e(TAG, "Error closing tag...", e);
                }
            }
        }
        return null;
    } 
```

现在在我可以使用它之前，我需要初始化一些东西：

```
 public void configScanner()
    {
        Intent intent = getIntent();
        tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
        pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
        ndef = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
        try {
            ndef.addDataType("*/*");    /* Handles all MIME based dispatches. You should specify only the ones that you need. */
        }
        catch (MalformedMimeTypeException e) {
            throw new RuntimeException("fail", e);
        }
        intentFiltersArray = new IntentFilter[] {ndef, };
        techListsArray = new String[][] { new String[] { Ndef.class.getName() } };
    } 
```

然后我只是尝试执行它。

```
public void scanClick(View v) 
{
    textview1.setText(readTag(tag));
} 
```

我还在清单和我自己的 XML 文件中添加了一些东西

显现：

```
<intent-filter>
   <action android:name="android.nfc.action.TECH_DISCOVERED"/>
</intent-filter>
<meta-data android:name="android.nfc.action.TECH_DISCOVERED"
           android:resource="@xml/scan" /> 
```

扫描.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
    <tech-list>
        <tech>android.nfc.tech.IsoDep</tech>
        <tech>android.nfc.tech.NfcA</tech>
        <tech>android.nfc.tech.NfcB</tech>
        <tech>android.nfc.tech.NfcF</tech>
        <tech>android.nfc.tech.NfcV</tech>
        <tech>android.nfc.tech.Ndef</tech>
        <tech>android.nfc.tech.NdefFormatable</tech>
        <tech>android.nfc.tech.MifareClassic</tech>
        <tech>android.nfc.tech.MifareUltralight</tech>
    </tech-list>
</resources> 
```

但是，当我执行代码时，我会在执行`readTag(tag)`. 我只是不明白如何让这些东西工作。

根据要求：LogCat 输出：

```
04-11 17:13:07.650: E/AndroidRuntime(672): FATAL EXCEPTION: main
04-11 17:13:07.650: E/AndroidRuntime(672): java.lang.IllegalStateException: Could not execute method of the activity
04-11 17:13:07.650: E/AndroidRuntime(672):  at android.view.View$1.onClick(View.java:3591)
04-11 17:13:07.650: E/AndroidRuntime(672):  at android.view.View.performClick(View.java:4084)
04-11 17:13:07.650: E/AndroidRuntime(672):  at android.view.View$PerformClick.run(View.java:16966)
04-11 17:13:07.650: E/AndroidRuntime(672):  at android.os.Handler.handleCallback(Handler.java:615)
04-11 17:13:07.650: E/AndroidRuntime(672):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-11 17:13:07.650: E/AndroidRuntime(672):  at android.os.Looper.loop(Looper.java:137)
04-11 17:13:07.650: E/AndroidRuntime(672):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-11 17:13:07.650: E/AndroidRuntime(672):  at java.lang.reflect.Method.invokeNative(Native Method)
04-11 17:13:07.650: E/AndroidRuntime(672):  at java.lang.reflect.Method.invoke(Method.java:511)
04-11 17:13:07.650: E/AndroidRuntime(672):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-11 17:13:07.650: E/AndroidRuntime(672):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-11 17:13:07.650: E/AndroidRuntime(672):  at dalvik.system.NativeStart.main(Native Method)
04-11 17:13:07.650: E/AndroidRuntime(672): Caused by: java.lang.reflect.InvocationTargetException
04-11 17:13:07.650: E/AndroidRuntime(672):  at java.lang.reflect.Method.invokeNative(Native Method)
04-11 17:13:07.650: E/AndroidRuntime(672):  at java.lang.reflect.Method.invoke(Method.java:511)
04-11 17:13:07.650: E/AndroidRuntime(672):  at android.view.View$1.onClick(View.java:3586)
04-11 17:13:07.650: E/AndroidRuntime(672):  ... 11 more
04-11 17:13:07.650: E/AndroidRuntime(672): Caused by: java.lang.NullPointerException
04-11 17:13:07.650: E/AndroidRuntime(672):  at android.nfc.tech.MifareUltralight.get(MifareUltralight.java:94)
04-11 17:13:07.650: E/AndroidRuntime(672):  at com.example.android_test.MainActivity.readTag(MainActivity.java:108)
04-11 17:13:07.650: E/AndroidRuntime(672):  at com.example.android_test.MainActivity.scanClick(MainActivity.java:155)
04-11 17:13:07.650: E/AndroidRuntime(672):  ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:40:40.960

我在您发布的清单中没有看到这一点，但您确实需要它。

将此添加到您的清单中

```
<uses-permission android:name="android.permission.NFC" /> 
```

# com - 注册/加载 64 位 .NET dll 的问题

> ID：15955119
> 
> 赞同：0
> 
> 时间：2013-04-11T17:27:05.673
> 
> 标签：com, 64-bit, activex

我有一个调用 VB 进程内 COM 服务器的 VB 客户端应用程序`myprogressbar`。

（是的，这是 VB 调用 VB 的不正当方式，但客户端是一个测试工具——在生产代码中，客户端不是 VB，需要使用 COM）。

```
Dim progressbar As Object = CreateObject("myprogressbar.myprogressbar")
progressbar.showform() 
```

这失败并出现错误

`System.Exception: cannot create ActiveX component`.

x86 服务器已注册（成功）

```
c:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe x86\Release\myprogressbar.dll 
```

并且 x64 服务器已注册（成功）

```
c:\Windows\Microsoft.NET\Framework64\v4.0.30319\RegAsm.exe x64\Release\myprogressbar.dll 
```

**更新：**同样的事情发生在单个服务器编译为`Any CPU`. 任何先前关于 x86 版本工作的报告仅归结为仍在注册的先前安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:02:12.410

解决了这个问题。

问题是 .NET 程序集，除非加载到 GAC 中，否则需要使用`/c`switch`regasm`注册（它注册代码库的完整路径），因此可执行文件可以在运行时找到它们。这与`regsvr32`默认情况下具有这种行为的情况形成对比。

# binding - cfselect 未绑定到 cfc

> ID：15955121
> 
> 赞同：2
> 
> 时间：2013-04-11T17:27:15.640
> 
> 标签：binding, coldfusion, coldfusion-10, cfselect

我是新版本的 ColdFusion 的新手，我在将简单的数据绑定到 cfselect 时遇到问题。我已经尽我所能彻底研究它，我什至回到教科书并基本上在测试文件中复制了代码示例，但我仍然得到同样的错误。

我正在尝试构建有 2 个 cfselects 并且第二个依赖于第一个的常见情况，但在这一点上，我什至无法让第一个工作。返回的错误是：

“选择框 Species_id 绑定失败，绑定值不是二维数组或有效的序列化查询”

提前感谢您的帮助。这是代码：

```
<cfcomponent>
    <cffunction name="getSpecies" access="remote" returnType="array">
    <cfset var rsData = "">
    <cfset var myReturn=ArrayNew(2)>
    <cfset var i=0>
      <cfstoredproc datasource="#application.dsn#" procedure="up_get_Species">
            <cfprocresult name="DataResults">
        </cfstoredproc>
    <cfloop query="DataResults">
        <cfset myReturn[rsData.currentRow][1]=rsData.Species_id>
        <cfset myReturn[rsData.currentRow][2]=rsData.Species>
    </cfloop>
    <cfreturn myReturn>
    </cffunction>
</cfcomponent>

<html>
<head>
    <title>CFSelect Example</title>
</head> 
<body>
<h1>Sandbox for getting cfselect bind working</h1>
<cfform name="form1">
Wood Type
<br>
<cfselect name="Species_id" bind="office.cfc:data.getspecies()"
    bindOnLoad = "true" />
</cfform>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:09:54.140

看起来您的绑定语法已关闭。绑定表达式应以`type:`绑定 (cfc、url、javascript) 开头。由于您要绑定到一个组件，因此您必须在它前面加上`"cfc:"`，即

```
 bind="cfc:path.to.yourComponentName.yourFunctionName()" 
```

也就是说，CF 的更高版本支持绑定到查询，这简化了绑定。只需将功能更改`returnType`为`query`.

```
<cffunction name="getSpecies" access="remote" returnType="query">
     <!--- Be sure to Local scope all variables, including query names --->
     <cfstoredproc datasource="#application.dsn#" procedure="up_get_Species">
          <cfprocresult name="Local.DataResults">
     </cfstoredproc>

     <cfreturn Local.DataResults >
</cffunction> 
```

然后在您的选择列表中指定`display`和属性。`value`

```
<cfselect name="service" 
          bind="cfc:office.cfc:data.getSpecies()"
          display="Species"
          value="Species_id" ...> 
```

# ruby-on-rails-3.2 - rails + prawn (with grid) 如何更新此 pdf 布局以仅在第一页有一个块？

> ID：15955125
> 
> 赞同：0
> 
> 时间：2013-04-11T17:27:29.223
> 
> 标签：ruby-on-rails-3.2, pdf-generation, prawn

我有以下大虾文档布局

```
define_grid(:columns => 5, :rows => 8, :gutter => 10)

repeat(:all) do
    draw_text "bottom-left - text on all pages", :at => bounds.bottom_left
end

repeat(:all) do
    grid([0,0], [0,2]).bounding_box do
        text "TOP LEFT"
    end

    grid([0,3], [0,4]).bounding_box do
        text "TOP RIGHT"
    end
end

repeat(:all) do
    grid([1,0], [1,4]).bounding_box do
         text "ADDRESSES"
     end
end

grid([2,0], [6,4]).bounding_box do
    text "LINE ITEMS TABLE"
    data = [["This row should be repeated on every new page"]]
    data += [["..."]] * 30
    table(data, :header => true, :position => :center)
    move_down 2
    text "TOTALS"
end    

repeat(:all) do
    grid([7,0], [7,4]).bounding_box do
        text "FOOTER"
    end
end

string = "page <page> #{t(:of)} <total>"
options = { :at => [bounds.right - 150, 0],
          :width => 150,
          :align => :right,
          :start_count_at => 1,
          :color => "000000" }
number_pages string, options 
```

这很好，但这是一张发票，所以我希望 ADDRESSES 块只在第一页上，而 LINE ITEMS TABLE 在网格中（[1,0]，[6,4]）.bounding_box on ll后续页面...有可能吗？我尝试了很多选择，但都没有成功..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:17:55.060

将 2 个边界框合并为一个，并在“地址”上添加条件重复（仅第 1 页）

```
grid([1,0], [6,4]).bounding_box do
    repeat(lambda { |pg| pg == 1 }) do
        text "ADDRESSES"
    end
    text "LINE ITEMS TABLE"
    data = [["This row should be repeated on every new page"]]
    data += [["..."]] * 30
    table(data, :header => true, :position => :center)
    move_down 2
    text "TOTALS"
end 
```

# emacs - 如何在 Emacs 中向 SemanticDB 添加更多源目录？

> ID：15955135
> 
> 赞同：1
> 
> 时间：2013-04-11T17:28:08.363
> 
> 标签：emacs, cedet

我已经阅读了文档，但我对这部分感到困惑。我现在不想使用 EDE 项目，但我希望 SemanticDB 也可以从不同的目录提供其数据库。

例如：

我的项目位于**/foo/src** ，但如果需要，我还想在**/bar/src**中浏览其库之一的一些代码。

我试过使用项目根目录和系统包含路径但没有成功。如何才能做到这一点？另外，我怎么知道 SemanticDB 中已经缓存了什么？

# php - NoRecordExists 输入过滤器

> ID：15955137
> 
> 赞同：2
> 
> 时间：2013-04-11T17:28:22.343
> 
> 标签：php, zend-framework2

我有一个用于“添加”和“编辑”表单的字段集。

字段集实现`InputFilterProviderInterface`以提供其验证。

在验证添加操作时，我需要检查数据库中不存在具有相同值的数据库记录，因此我使用`NoRecordExists`验证器。

到目前为止一切都很好。但是，当我在编辑表单中使用相同的字段集时，验证将失败，因为显然已经有一条具有特定值的记录，它是正在编辑的记录。

所以我转向验证器的`exclude`选项，`NoRecordExists`并使用我正在编辑的记录的“id”（这是我的主键字段）排除记录。

所以我快到了，唯一我无法解决的是如何获得我想在创建输入过滤器时排除的“id”值`getInputFilterSpecification`。

这是我的字段集代码。如果有人能告诉我如何从内部访问表单（或绑定对象）的其他属性，`getInputFilterSpecification`我将非常感激。

也许我需要以不同的方式实现我的 imputfilter 来做到这一点？甚至实现自定义验证器？但是对于看起来非常常规的用例来说，自定义验证器肯定会过大...

提前谢谢了。:wq

```
<?php
namespace Kickoff\Form\Competition;

use Kickoff\Form\AbstractFieldset,
    Kickoff\Model\Entities\Competition,
    DoctrineModule\Stdlib\Hydrator\DoctrineObject as DoctrineHydrator,
    Zend\InputFilter\InputFilterProviderInterface;

class CompetitionFieldset extends AbstractFieldset implements InputFilterProviderInterface
{
    public function init()
    {
        $this->setName('Competition')
            ->setHydrator(new DoctrineHydrator($this->getObjectManager(),'Kickoff\Model\Entities\Competition'))
            ->setObject(new Competition())
            ->setLabel('Competition')
            ->setAttribute('class','form-collection');

        $this->add(array(
            'type' => 'Zend\Form\Element\Hidden',
            'name' => 'id',
        ));

        $this->add(array(
            'name' => 'name',
            'options' => array(
                'label' => 'Competition name',
                'admin_inline' => true,
            ),
        ));

        $this->add(array(
            'name' => 'long_name',
            'options' => array(
                'label' => 'Competition long name',
                'admin_inline' => true,
            ),
            'attributes' => array(
                'class' => 'input-xxlarge',
            ),
        ));

        $this->add(array(
            'type' => 'Zend\Form\Element\Collection',
            'name' => 'leagues',
            'options' => array(
                'label' => 'Leagues',
                'count' => 0,
                'should_create_template' => true,
                'allow_add' => true,
                'target_element' => array(
                    'type' => 'LeagueFieldset',
                ),
            ),
        ));
    }

    /**
     * Implement InputFilterProviderInterface
     */
    public function getInputFilterSpecification()
    {
        return array(
            'name' => array(
                'filters'  => array(
                    array('name' => 'Zend\Filter\StringTrim'),
                ),
                'validators' => array(
                    'notempty' => array(
                        'name' => 'NotEmpty',
                        'break_chain_on_failure' => true,
                        'options' => array(
                            'messages' => array('isEmpty' => 'Competition name is required.',),
                        ),
                    ),
                    'length' => array(
                        'name' => 'StringLength',
                        'options' => array(
                            'max' => '64',
                            'messages' => array(
                                'stringLengthTooLong' => 'Competition name must be no more than 64 characters.',
                            ),
                        ),
                    ),
                    'unique' => array(
                        'name' => 'Db\NoRecordExists',
                        'options' => array(
                            'table' => 'competition',
                            'field' => 'name',
                            'adapter' => $this->serviceManager->getServiceLocator()->get('db'),
                            'exclude' => array(
                                'field' => 'id',
                                'value' => '',
                            ),
                            'messages' => array(
                                'recordFound' => 'A competition already exists with this name',
                            ),
                        ),
                    ),
                ),
            ),
            'long_name' => array(
                'filters'  => array(
                    array('name' => 'Zend\Filter\StringTrim'),
                ),
                'validators' => array(
                    'length' => array(
                        'name' => 'StringLength',
                        'options' => array(
                            'max' => '128',
                            'messages' => array(
                                'stringLengthTooLong' => 'Competition long name must be no more than 128 characters.',
                            ),
                        ),
                    ),
                ),
            ),
        );
    }
} 
```

编辑：将我的“编辑”控制器操作添加到这篇文章中：

```
public function editCompetitionAction()
{
    $id = $this->params()->fromRoute('competition_id');

    $repository = $this->getEntityManager()->getRepository('Kickoff\Model\Entities\Competition');
    $competition = $repository->find($id);

    if (null == $competition) {
        $this->getResponse()->setStatusCode(404);
        return;
    }

    $formManager = $this->serviceLocator->get('FormElementManager');
    $form = $formManager->get('Kickoff\Form\Competition\CompetitionForm');
    $form->bind($competition);

    $request = $this->getRequest();
    if ($request->isPost()) {
        $form->setData($request->getPost());
        $this->logger->debug("Validator is ".print_r($form->getValidator(),1));
        if ($form->isValid()) {
            $this->getEntityManager()->persist($competition);
            $this->getEntityManager()->flush();
        }
    }

    return array(
        'form' => $form,
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:09:03.100

在 InputFilter 之外检查该条件会更简单。

如果您这样做，那么您可以对更新和插入使用相同的表单。

您可以a）使用单独的操作来更新和插入（CRUD）或b）如果您希望他们在某个条件下更新/插入，请执行以下操作

```
// form validates for update or insert now...

if($form->isValid()) {
    if($mapper->exists($object)) {
        $mapper->update($object);
    }
    else {
        $mapper->save($object);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-23T12:26:56.790

在这里，我找到了**添加操作**和**编辑操作的解决方案**

***控制器：***

在`addAction:`

```
 $postData = $this->request->getPost ();
            $dbAdapter = $this->getServiceLocator()->get('Zend\Db\Adapter\Adapter');
            $form->setInputFilter(new FormFilter($dbAdapter));
            $form->setData ($postData);
            if (!$form->isValid ()) {
                $viewModel->error = true;
                return $viewModel;
            } 
```

在`editAction:`

```
 $post = $request->getPost();
            $dbAdapter = $this->getServiceLocator()->get('Zend\Db\Adapter\Adapter');                
            $form->setInputFilter(new FormFilter($dbAdapter,$Id));
            $form->setData ($post);
            $Id = $post['id'];
            if (!$form->isValid ()) {
                    $viewModel->error = true;
                    $viewModel->Id = $Id;
                    $viewModel->form = $form;
                    return $viewModel;
            } 
```

在***表单过滤器***文件中：

```
class FormFilter extends InputFilter {

    public function __construct ($dbAdapter, $id = '')
    {
        $this->dbAdapter = $dbAdapter;
        $this->add(array(
                'name'       => 'name',
                'required'   => true,
                'filters'  => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                ),
                'validators' => array(
                        array(
                                'name'    => 'StringLength',
                                'options' => array(
                                        'encoding' => 'UTF-8'
                                ),
                        ),
                        array(
                                'name'    => 'Zend\Validator\Db\NoRecordExists',
                                'options' => array(
                                        'table' => 'test',
                                        'field' => 'name',
                                        'adapter' => $this->dbAdapter,
                                        'exclude' => array(
                                                'field' => 'id',
                                                'value' => $id,
                                        ),
                                        'messages' => array(
                                                \Zend\Validator\Db\NoRecordExists::ERROR_RECORD_FOUND => 'The specified name already exists in database'
                                        ),
                                ),
                        ),
                ),
        ));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T14:36:35.173

这是我的工作解决方案：

```
$inputFilter->add($factory->createInput(array(
            'name'     => 'role_name',
            'required' => true,
            'filters'  => array(
                array('name' => 'StripTags')
            ),
            'validators' => array(
                array(
                    'name'    => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min'      => 2,
                        'max'     => 15
                    ),
                ),
                array(
                    'name'    => 'Zend\Validator\Db\NoRecordExists',
                    'options' => array(
                        'table' => 'user_role',
                        'field' => 'code',
                        'adapter' => \Zend\Db\TableGateway\Feature\GlobalAdapterFeature::getStaticAdapter(),
                        'messages' => array(
                            \Zend\Validator\Db\NoRecordExists::ERROR_RECORD_FOUND => 'The specified name already exists in database' 
                        ),
                    ),
                ),
            ),
        ))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T18:37:09.300

在这种情况下使用这个验证器是错误的。

会发生什么：验证器向数据库发送一个 SELECT 查询。如果它发现了什么，它将报告“无效”。

如果它没有找到某些东西，它会报告“有效”，但如果同时第二个请求做同样的事情并返回一个“有效”怎么办。谁赢？以及如何处理一个查询的失败，因为显然您想将输入写入数据库？

这称为[TOCTOU](http://en.wikipedia.org/wiki/Time_of_check_to_time_of_use)问题。将唯一记录写入数据库只能通过尝试插入新记录并等待数据库抱怨非唯一索引违规来完成。这是写操作的预期结果，可以处理。

验证器并非没用：您仍然可以使用它来检查数据库中是否存在问题，例如，在用户填写用户名的过程中的 Ajax 查询中等。检查并从中获取布尔值*仅用于读取目的*的数据库完全可以。但作为输入验证器，这是错误的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-17T12:23:12.240

我找到了解决这个问题的方法。基本上，默认的 NoRecordExists 验证器期望该值与列一起被排除在配置参数中。如 Ritesh 所述，这可以在控制器中进行更改；我玩了一段时间，得到了这个解决方案。

我正在使用 isValid 函数中可用的上下文数组变量。您无需发送 id 值，而是发送要从中提取的表单字段的值

在 InputFilter 你有以下

```
$this->add ( array (
    'name'  => 'user_email',
    'required' => true,
    'filters' => array (
        array ( 
            'name' => 'StringTrim',
        ),
        array ( 
            'name' => 'StripTags',
        ),
    ),
    'validators' => array (
        array (
            'name' => 'EmailAddress',
            'options' => array (
                'domain' => true,
            )
        ),
        array (
            'name' => 'Application\Validator\NoRecordExists',
            'options' => array (
                'table' => 'user',
                'field' => 'user_email',
                'adapter' => \Zend\Db\TableGateway\Feature\GlobalAdapterFeature::getStaticAdapter( ),
                'exclude' => array(
                    'field' => 'user_id',
                    'formvalue' => 'user_id',
                ),
            )
        ),

    )
) ); 
```

表单中定义了一个隐藏元素 user_id；那里设置的值在检查中使用

```
<?php

namespace Application\Validator;

class NoRecordExists extends \Zend\Validator\Db\NoRecordExists {

    public function isValid( $value, $context=array( ) ) {

        $exclude = $this->getExclude( );

        if( is_array( $exclude ) ){
            if ( array_key_exists( 'formvalue', $exclude ) ) {
                $formvalue = $exclude[ 'formvalue' ];
                $exclude[ 'value' ] = $context[ $formvalue ];
                $this->setExclude( $exclude );
            }
        }

        return parent::isValid( $value );

    }

} 
```

希望这可以帮助

# ruby-on-rails - 如何检查 current_user 是否通过omniauth 登录？

> ID：15955139
> 
> 赞同：1
> 
> 时间：2013-04-11T17:28:28.377
> 
> 标签：ruby-on-rails, ruby, rubygems

如果我有omniauth 允许用户使用诸​​如facebook/twitter 之类的提供程序登录，我如何检查current_user 是否使用omniauth 登录？

我希望仅当 current_user 通过omniauth 登录时才允许代码运行。

这是我的架构的外观

```
create_table "users", :force => true do |t|
    t.string    "name"
    t.string    "email"
    t.timestamp "created_at",                         :null => false
    t.timestamp "updated_at",                         :null => false
    t.string    "password_digest"
    t.string    "remember_token"

  end

 create_table "authentications", :force => true do |t|
    t.integer  "user_id"
    t.string   "provider"
    t.string   "uid"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "secret"
    t.string   "token"
  end 
```

控制器

```
 class PostsController < ApplicationController
    def create
      @post = current_user.posts.build(params[:post])

      if @post.save
        if @post.check
          UserMailer.check_email(@user).deliver
        else
          flash[:success] = "Posted"
          Twitter::Client.new.update(@post.content) if logged_using_omniauth? request != nil
        end
        redirect_to root_path
      else
        @feed_items = []
        render 'static_pages/home'
      end
    end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-19T07:38:51.343

我建议维护一个会话以检查其是否通过omniauth 登录。

### 在 OmniauthCallbacksController

```
def method_name
 .......
 #if logged in set the session
 session[:logged_in_using_omniauth] = true
 .......
end 
```

### 在应用程序控制器中

```
def logged_in_using_omniauth?
  session[:logged_in_using_omniauth].present?
end 
```

并通过以下方式将该方法公开为辅助方法：

```
helper_method :logged_in_using_omniauth? 
```

现在`logged_in_using_omniauth?`在控制器或视图中的任何地方使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:54:13.323

您可以通过以下方式验证它：

```
def logged_using_omniauth? request
  res = nil
  omniauth = request.env["omniauth.auth"]
  res = Authentication.find_by_provider_and_uid ↵  
  (omniauth['provider'], omniauth['uid']) if omniauth
  res  
end 
```

如果返回`authentication`的不是`nil`，那么他们使用omniauth 登录。

# ruby-on-rails - 如何将 Ruby 库添加到我的应用程序？

> ID：15955141
> 
> 赞同：0
> 
> 时间：2013-04-11T17:28:36.243
> 
> 标签：ruby-on-rails, ruby

我正在尝试使用[sharefile-ruby](https://github.com/avguchenko/sharefile-ruby)库，它是 ShareFile API 的包装器。

它没有 gem，所以我相信我必须手动添加 .rb 文件。我使用的每个库都只是安装了 gem，所以我不确定在这里做什么。

另外，要使用这个库，我是否只需添加`require 'sharefile-ruby'`我试图使用它的每个控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:34:27.290

该库是[单个 Ruby 文件](https://github.com/avguchenko/sharefile-ruby/blob/master/sharefile-ruby.rb)。只需将文件放在您的应用程序中的某个位置并要求它：

```
require 'sharefile-ruby' 
```

当然，如果你把它放在 lib/foo/sharefile-ruby.rb 那么你需要使用：

```
require 'foo/sharefile-ruby' 
```

等等。

# c# - 具有多个模型的实体框架引发错误，指出“支持 语境变了……”

> ID：15955145
> 
> 赞同：3
> 
> 时间：2013-04-11T17:28:47.380
> 
> 标签：c#, asp.net-mvc, database, entity-framework

我有两个独立的不相关模型，我试图在同一个数据库中使用它们。这是每个的代码：

```
public class ImageDBContext : DbContext
{
    public ImageDBContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<ImageModel> Images { get; set; }

}

[Table("Images")]
public class ImageModel
{
    [Key]
    public int ID { get; set; }
    public string Type { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public string FileName { get; set; }

    [NotMapped]
    public HttpPostedFileBase Attachment { get; set; }
} 
```

这是另一个模型

```
public class TestimonialDBContext : DbContext
{
    public TestimonialDBContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<Testimonial> Testimonials { get; set; }
}

[Table("Testimonials")]
public class Testimonial
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
} 
```

当我访问一个模型的视图时，效果很好。哪个模型都没有关系，但是当我转到另一个模型的视图时，我得到了这个错误：

自创建数据库以来，支持“ImageDBContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库 ( [http://go.microsoft.com/fwlink/?LinkId=238269](http://go.microsoft.com/fwlink/?LinkId=238269) )。

在我看来，两个模型都试图使用同一张桌子？该表由第一个初始化的模型创建，但随后第二个模型尝试使用现有表而不是创建自己的表。

如何让两个模型在数据库中使用它们自己的表？

这是连接字符串：

```
 <add name="DefaultConnection" connectionString="Data Source=localhost\SQLEXPRESS;Initial Catalog=--------;User ID=-------;Password=---------" providerName="System.Data.SqlClient" /> 
```

更新：我已将以下代码添加到模型中，但仍然出现相同的错误。

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<ImageModel>().ToTable("ImagesTable");
    } 
```

和

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Testimonial>().ToTable("TestimonialsTable");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:38:24.643

该错误消息具有欺骗性 - 这不能/不应该通过“代码优先迁移”来解决。您有两个不同的 DbContext。如果它是同一个数据库，那么只需使用您添加了图像和推荐信的一个上下文。

你这样做的方式，你基本上是说有两个不同的数据库，它们使用相同的连接字符串，每个数据库都有一个表，要么`Images`，要么`Testimonials`。因此，当您访问说`Images`页面时，会使用一张表创建数据库`Images`。但是当您访问`Testimonials`它时，它会识别出数据库结构与一个表的模型不匹配`Testimonials`并警告您。

像这样创建一个数据库上下文：

```
public class MyDBContext : DbContext
{
    public DbSet<ImageModel> Images { get; set; }
    public DbSet<Testimonial> Testimonials { get; set; }
} 
```

当您需要访问数据库时，只需在您的控制器中创建此类的新实例。如果将连接字符串（在 web.config 中）命名为“MyDbContext”，则可以跳过需要调用的空构造函数`base("DefaultConnection")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:43:42.083

当模型被创建、迁移然后更新到 Db 中时 - EF/CF 创建`__MigrationHistory`- 它存储 DbContext 的确切 EDMX 模型、实体。

> 到目前为止，包括 EF 5 - 不支持多个迁移表。

理论上，您可以通过调整迁移脚本来管理两个迁移 - 并创建一个包含这两个集合的数据库，所以这不是问题。

但是，当您制作两个模型/DbContext-s -**迁移表时，Db 表布局和您的实体不匹配**- 对于同一个数据库......

从 EF 6 开始 - 您将获得对`multi-tenant migrations`. 即 EF6 将允许每个数据库有多个上下文。

有关更多信息和详细信息，请参阅我的这篇文章......
[迁移没有按我的意愿工作...... Asp.net EntityFramework](https://stackoverflow.com/questions/15794413/migration-not-working-as-i-wish-asp-net-entityframework/15795166#15795166)

**关闭迁移：**

> 解决您遇到的问题的方法是**删除 migrations**。您可以简单地删除`__MigrationHistory`表（它在 下`system tables`），并且不要尝试进行迁移。

（关闭迁移的）“侵入性”较小的方法是执行以下操作...

```
Database.SetInitializer<FirstContext>(null);
Database.SetInitializer<SecondContext>(null); 
```

（从[这里](https://stackoverflow.com/a/10624165/417747)）

# c++ - 列表迭代器不可取消引用运行时

> ID：15955150
> 
> 赞同：1
> 
> 时间：2013-04-11T17:29:04.210
> 
> 标签：c++, visual-c++, iterator, artificial-intelligence, listiterator

我在运行时表达式上收到此错误：列表迭代器不可取消引用。下面是我正在使用的代码。

头文件

```
//-----------------------------------------------------------------------------
//
//  Name:   Fletcher_TargetingSystem.h
//
//  Author: Alan Fletcher (20040797)
//
//  Desc:   class to select a target from the opponents currently in a bot's
//          perceptive memory.
//-----------------------------------------------------------------------------
#include "2d/Vector2D.h"
#include <list>
#include "../../AbstTargetingSystem.h"

class AbstRaven_Bot;

class Fletcher_TargetingSystem : public AbstTargetingSystem
{

public:
    Fletcher_TargetingSystem(AbstRaven_Bot* owner);

    //each time this method is called the opponents in the owner's sensory 
    //memory are examined and the closest  is assigned to m_pCurrentTarget.
    //if there are no opponents that have had their memory records updated
    //within the memory span of the owner then the current target is set
    //to null

    void       Update();
    void         closestBotStrategy();

    void      setCurrentTarget(AbstRaven_Bot* t);
    AbstRaven_Bot* getCurrentTarget();

    void      setCurrentOwner(AbstRaven_Bot* t);
    AbstRaven_Bot* getCurrentOwner();
};

class Fletcher_getClosestBotStrategy
{

public:
    Fletcher_getClosestBotStrategy()
    {}
    Fletcher_getClosestBotStrategy(AbstRaven_Bot* owner);

    //each time this method is called the opponents in the owner's sensory 
    //memory are examined and the closest  is assigned to m_pCurrentTarget.
    //if there are no opponents that have had their memory records updated
    //within the memory span of the owner then the current target is set
    //to null
    void      pickTarget(AbstRaven_Bot& owner);
};

#endif 
```

c++文件

```
#include "Fletcher_TargetingSystem.h"
#include "../../AbstRaven_Bot.h"
#include "../../Raven_SensoryMemory.h"
#include "../../Debug/DebugConsole.h"

//-------------------------------- ctor ---------------------------------------
//-----------------------------------------------------------------------------
Fletcher_TargetingSystem::Fletcher_TargetingSystem(AbstRaven_Bot* owner):
AbstTargetingSystem(owner){

}

//-------------------------------- ctor ---------------------------------------
//-----------------------------------------------------------------------------
Fletcher_getClosestBotStrategy::Fletcher_getClosestBotStrategy(AbstRaven_Bot* owner){

}
std::list<AbstRaven_Bot*> SensedBots;
std::list<AbstRaven_Bot*>::const_iterator curBot;
//----------------------------- Update ----------------------------------------

//-----------------------------------------------------------------------------
//----------------------------- closestPlayer ----------------------------------------

//-----------------------------------------------------------------------------
void Fletcher_getClosestBotStrategy::pickTarget(AbstRaven_Bot& owner)
{

    double ClosestDistSoFar = MaxDouble;

    Fletcher_TargetingSystem *fTS = new Fletcher_TargetingSystem(&owner);

    for (curBot; curBot != SensedBots.end(); ++curBot)
    {
        //make sure the bot is alive and that it is not the owner
        if ((*curBot)->isAlive() && (*curBot != fTS->getCurrentOwner()) )
        {
            double dist = Vec2DDistanceSq((*curBot)->Pos(), fTS->getCurrentOwner()->Pos());
            if (dist < ClosestDistSoFar)
            {
                ClosestDistSoFar = dist;
                fTS->setCurrentTarget(*curBot);// = *curBot;
            }

        }
    }
    //return *fTS;
}

void Fletcher_TargetingSystem::Update()
{
    // currentStrategy = targetClosestBotStrategy;
    // target = currentStrategy.pickTarget();
    //std::list<AbstRaven_Bot*> SensedBots;
    SensedBots = getCurrentOwner()->GetSensoryMem()->GetListOfRecentlySensedOpponents();
    curBot = SensedBots.begin();
    //std::list<AbstRaven_Bot*>::const_iterator curBot = SensedBots.begin();
    setCurrentTarget(0);//       = 0;

    Fletcher_getClosestBotStrategy* fGCBS = new Fletcher_getClosestBotStrategy(this->getCurrentOwner());
    fGCBS->pickTarget(**curBot);
}

AbstRaven_Bot* Fletcher_TargetingSystem::getCurrentOwner(){
    return m_pOwner;
}
AbstRaven_Bot* Fletcher_TargetingSystem::getCurrentTarget(){
    return m_pCurrentTarget;
}

void Fletcher_TargetingSystem::setCurrentTarget(AbstRaven_Bot* t){
    m_pCurrentTarget = t;
}
void Fletcher_TargetingSystem::setCurrentOwner(AbstRaven_Bot* t){
    m_pOwner = m_pOwner;
} 
```

任何帮助告诉我如何解决这个问题将不胜感激谢谢

还有错误的确切含义是什么以及它是如何/何时发生的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:36:41.023

你在`curBot`这里初始化：

```
void Fletcher_TargetingSystem::Update()
{
    // ...
    curBot = SensedBots.begin();
    // ...
} 
```

但你似乎没有在`Update()`任何地方打电话，所以在这一行：

```
for (curBot; curBot != SensedBots.end(); ++curBot)
{ // ... } 
```

如错误消息所示，您正在尝试使用不可取消引用的未初始化迭代器。

解决方案：使用前先初始化`curBot`。

旁注：为什么`curBot`在全局范围内声明？`for`在您实际使用它的地方（即在循环中）声明/初始化它会更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:38:46.097

你初始化全局：

```
std::list<AbstRaven_Bot*>::const_iterator curBot; 
```

仅在 Update() 内部具有：

```
SensedBots = getCurrentOwner()->GetSensoryMem()
              ->GetListOfRecentlySensedOpponents();
curBot = SensedBots.begin(); 
```

您可能会`SensedBots`在其他地方进行更改（例如更改为 other`getCurrentOwner()->GetSensoryMem()->GetListOfRecentlySensedOpponents();)`并且不设置`curBot`，从而使以前的值无效。

通常你会：

```
for (curBot=SensedBots.begin();  curBot != SensedBots.end(); ++curBot) 
```

即使您调用`Update()`make`curBot=SensedBots.begin();` 也有可能调用`pickTarget()`2 次，并且在两者之间更改大小，从而使第二次进入 for 循环`SensedBots`的 endlich first-call-value 无效， 并带有“falch”值。`curBot= SensedBots.end();`

# c - 程序的未定义行为。有时它可以工作，有时在运行时发生错误

> ID：15955151
> 
> 赞同：0
> 
> 时间：2013-04-11T17:29:04.283
> 
> 标签：c, malloc

**请告诉我有什么问题。**

创建二维动态数组：我创建了一个指针数组，然后为每个指针分配了一个块。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main()
{
    int i, j;
    int **a = NULL;

    a = (int **)malloc(5*sizeof(int *));

    if ( NULL == a)
    {
        printf("Failed to allocate memory.");
        return 1;
    }

    for ( i = 0; i < 10; i++ )
        a[i] = (int *)malloc(10*sizeof(int ));

    for ( i = 0; i < 5; i++ )
    {
        for ( j = 0; j < 10; j++ )
            a[i][j] = i*j;
    }

    for ( i = 0; i < 5; i++ )           // While running it prints this array. But...
    {                                   
        for ( j = 0; j < 10; j++ )
            printf("%4d", a[i][j]);
        printf("\n");
    }

    /* Trying to free allocated memory. */
    for ( i = 0; i < 5; i++ )           // ... sometimes app crashes around here.
    {
        free(a[i]);
    }

return 0;
} 
```

看不到这种未定义行为的任​​何原因......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:31:43.863

这条线

```
a = (int **)malloc(5*sizeof(int *)); 
```

为 5 个指向整数列表的指针创建足够的空间

然后你写

```
for ( i = 0; i < 10; i++ )
   a[i] = (int *)malloc(10*sizeof(int )); 
```

您尝试使用其中的 10 个的地方！

因此未定义的行为。将 10 更改为 5 或分配正确的空间量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:35:47.913

Ed Heal 和 Mat 告诉你问题出在哪里，所以让我告诉你如何不再有这个问题。

# 避免在代码中使用“幻数”。

分配时，将大小放入变量中（使用数字恰好 ONCE），然后在需要大小的任何地方使用该变量。

```
int an = 5;
a = (int **)malloc(an * sizeof(int *));

...

for ( i = 0; i < an; i++ )
   a[i] = (int *)malloc(10*sizeof(int )); 
```

正如 Ed 提醒我的那样，它不一定是一个变量。您可以使用预处理器宏。

```
#define AN 5 
```

或者您也可以使用`enum`.

```
enum { AN = 5 }; 
```

如果数字是常数（变量用于变化的事物），这两个选项通常会更好。

# sql-server - 水晶报表的 TSQL

> ID：15955154
> 
> 赞同：0
> 
> 时间：2013-04-11T17:29:22.533
> 
> 标签：sql-server, tsql, crystal-reports, crystal-reports-2008

下面的 sql 适用于总数。即客户花费 90,000 他们获得 0.01 的折扣，但如果他们在第一季度花费 150,000，前 100,000 应该是 0.01 的折扣，下一个应该是 50,000 应该是 0.02，但是当第二季度开始时，这个数字应该是每年一次。IE，如果他们在第一季度花费了 100,000，而在第二季度花费了 100,000，那么从那时起他们将达到 200,000 大关

```
 Select Sum ({@fBillingQ1})
 Case is <= 100000: 0.01*Sum ({@fBillingQ1})
 case   100001 to  200000: 0.020*Sum ({@fBillingQ1})
 default: 0.030*Sum ({@fBillingQ1}) 
```

我能够为 Q1 想出这个，但不知道如何为其他 3 做

```
 Select Sum ({@fBillingQ1})
  Case is <= 100000: 0.01*Sum ({@fBillingQ1})
  case   100001 to  200000: (0.01*Sum ({@fBillingQ1}))+(0.020*Sum ({@fBillingQ1} - 100000))
  default: ((0.01*Sum ({@fBillingQ1}))+(0.020*Sum ({@fBillingQ1} - 100000))+(0.030*Sum ({@fBillingQ1}-      200000)) 
```

# mysql - 半复杂数据库查询

> ID：15955157
> 
> 赞同：0
> 
> 时间：2013-04-11T17:29:28.923
> 
> 标签：mysql

我在mysql中有两个表。

*   表 1 包含一个名为`app_id`
*   表 2 包含一个名为`id`

我需要创建一个查询，该查询将显示`app_id`表 1 的 id 中不存在的任何行的所有表 1 列。例如：

表格1：

```
app_id 
1    
2    
3    
4    
5 
```

表 2：

```
id   
1    
3    
4    
5 
```

所以我的结果将是表 1 的列，显示`app_id=2`表 2 中未找到的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:31:11.653

你可以做

```
SELECT app_id FROM tableOne WHERE app_id NOT IN(SELECT id from tableTwo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:32:40.373

只需进行左连接，然后选择不匹配的行：

```
SELECT * FROM table_1 LEFT JOIN table_2 ON table_1.app_id = table_2.id WHERE table_2.id IS NULL; 
```

# javascript - 使用 xhr 上传文件时，在哪里以及如何设置正确的编码

> ID：15955159
> 
> 赞同：2
> 
> 时间：2013-04-11T17:29:29.710
> 
> 标签：javascript, encoding, utf-8, multipartform-data

我正在上传图像文件，我需要它们来处理带重音的字符——所以我把所有东西都用到了`UTF-8`.

我使用这个 javascript 函数来上传它们：

```
 $('#files').change(function(e) {
            var formData = new FormData();
            for (var i=0; i<this.files.length;i++){
                formData.append(this.files[i].name, this.files[i]);
            }
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(e) {
                if ( 4 == this.readyState ) {
                    showMessage("Uploaded.");
                }
            };
            xhr.open('post', 'accoms/upload.jsp', true);
            xhr.send(formData);
        }, false); 
```

因此，例如，如果我有一个名为“Björk.jpg”的文件，当我查看使用 FireFox Firebug 发送到服务器的内容时​​，它显示为：

```
Content-Disposition: form-data; name="BjÃ¶rk.jpg"; filename="BjÃ¶rk.jpg" 
```

这似乎是服务器收到的。

帖子的编码显示如下：

```
Content-Type    text/html;charset=UTF-8 
```

当我以其他形式发送常规表单数据输入文本时，它会正确发送和服务器接收单词“Björk”。

这是服务器端代码，以防万一：

```
mpp=new MultipartParser(request, 100000000);
com.oreilly.servlet.multipart.Part part;
FilePart fp=null;
String fileName="";
files=new ArrayList();
while((part=mpp.readNextPart())!=null){
    if (part.isFile()){
        fp=(FilePart)part;
        fileName=fp.getFileName();
        File file=new File(fileName);
        long size=fp.writeTo(file);
                    files.add(file);
            }
} 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:08:26.127

[从API 参考](http://www.servlets.com/cos/javadoc/com/oreilly/servlet/multipart/MultipartParser.html)中可以看出，解析器使用自己的编码。

尝试：

```
mpp = new MultipartParser(request, 100000000);
mpp.setEncoding("UTF-8");
//rest of your code 
```

该参考建议在构造函数中传递它：

```
mpp = new MultipartParser(request, 100000000, true, true, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:34:11.693

您可以像这样设置编码

```
var oReq = new XMLHttpRequest();
oReq.open("GET", url, true);
// retrieve data unprocessed as a binary string
oReq.overrideMimeType("text/plain; charset=x-user-defined"); 
```

更多信息可以在这里找到 [https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:39:40.507

问题很可能出在您的服务器端代码中。也许您没有考虑到文件名是 UTF-8 编码的。您在问题中发布的任何内容都表明该名称发送不正确。您在 Firebug 中看到的不一定是发送的内容。Firebug 在检查请求时使用的默认编码很可能与浏览器使用的编码不匹配。这可以解释为什么文件名在 Firebug 中看起来是乱码。

# markdown - 带有长线的降价表

> ID：15955160
> 
> 赞同：44
> 
> 时间：2013-04-11T17:29:32.473
> 
> 标签：markdown, octopress

我正在使用降价来创建一个表。我的描述列包含很长的文本，因此当我换行时它在降价文件上看起来很糟糕：

```
Argument            | Description |
--------            | ----------- |
appDir              | The top level directory that contains your app. If this
option is used then it assumed your scripts are in |a subdirectory under this path. This option is not required. If it is not specified, then baseUrl below is the anchor point for finding things. If this option is specified, then all the files from the app directory will be copied to the dir: output area, and baseUrl will assume to be a relative path under this directory.  
baseUrl             | By default, all modules are located relative to this path. If baseUrl is not explicitly set, then all modules are loaded relative to the directory that holds the build file. If appDir is set, then baseUrl should be specified as relative to the appDir.
dir                 | The directory path to save the output. If not specified, then the path will default to be a directory called "build" as a sibling to the build file. All relative paths are relative to the build file. 
modules             | List the modules that will be optimized. All their immediate and deep dependencies will be included in the module's file when the build is done. If that module or any of its dependencies includes i18n bundles, only the root bundles will be included unless the locale: section is set above. 
```

我想换行，因为它对我来说更具可读性。
有没有办法让表格对编辑器更具可读性？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-10-18T07:24:21.197

还有另一种选择。由于哲学认为 Markdown 应该是轻量级的，而不是标记语言，并且旨在供人类自然消费（与 SGML/HTML 样式格式相比），我相信在特殊情况下回退到 ASCII 艺术是很好和自然的.

对于这个特殊的任务，角色艺术是很自然的。因此，只需将表格缩进四个空格，将其格式化以提高可读性，Markdown 只会将其视为预先格式化的文本，双方就可以停止相互争斗。

例如：

```
|  Sequence   | Result                                                        |
|-------------|---------------------------------------------------------------|
| `a?c`       | Matches `abc`, `axc`, and `aac`. Does not match `ac`, `abbc`, | 
|             | or `a/c`.                                                     |
|-------------|---------------------------------------------------------------|
| `a*c`       | Matches "ac", "abc" and "azzzzzzzc". Does not match "a/c".    |
|-------------|---------------------------------------------------------------|
| `foo...bar` | Matches "foobar", "fooxbar", and "fooz/blaz/rebar". Does not  |
|             | match "fo/obar", "fobar" or "food/bark".                      |
|-------------|---------------------------------------------------------------|
| `....obj`   | Matches all files anywhere in the current hierarchy that end  |
|             | in ".obj". Note that the first three periods are interpreted  |
|             | as "...", and the fourth one is interpreted as a literal "."  |
|             | character.                                                    |
|-------------|---------------------------------------------------------------| 
```

... 并做了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-12T10:04:05.963

我相信@Naor 是对的：您必须使用 HTML 来创建换行符，尽管答案中没有说明这一点。并且显示的完整表格代码并不是绝对必要的：要实现换行符，您只需要双空格或`<br />`标记。[来自 Markdown 规范](http://daringfireball.net/projects/markdown/syntax)：

> Markdown 支持“硬包装”文本段落。这与大多数其他将段落中的每个换行符转换为`<br />`标签的文本到 HTML 格式化程序（包括 Movable Type 的“转换换行符”选项）有很大不同。
> 
> 当您确实想`<br />`使用 Markdown 插入中断标记时，请以两个或更多空格结束一行，然后键入 return。

请注意，我必须在文本中添加代码包装器，因为 SO 风格的 Markdown 需要转义 HTML 中断标记 - 所以我们知道`<br />`有效。

但是，如果您想做一些更复杂的事情，比如我*，您可以使用 HTML 设置各种属性，如下所示：

```
<table width="300">
  <tr>
    <td> This is some text </td>
    <td> This is some somewhat longer block of text </td>
    <td> This is some very long block of text repeated to make it even longer. This is some very long block of text repeated to make it even longer. This is some very long block of text repeated to make it even longer.  </td>
  </tr>
</table> 
```

我尝试添加`style="width:75%"`到`<td>`s 中，但没有影响。

*我应该注意到我遇到了这个问题，因为我在使用 GitHub 风格的 Markdown 编写表格中的代码时遇到了类似的问题，这非常痛苦。但我注意到这一点是因为它应该为我给出的示例着色：我所说的“有效”或“无效”的任何事情都来自那个环境。

*`code`编辑：如果您的表中有块，则可能进一步值得注意的是，这无关紧要。不过，这不是 Markdown 的问题：HTML`<code></code>`块会导致表格拉伸。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-24T10:14:38.590

嗨，我想知道同样的事情。我需要这个作为文档文件，这就是我处理这个的方式：

```
| key | description                        |
| --- | ---                                |
| foo | bla bla blabla bla blabla bla bla  |
|     | bla bla blabla bla bla bla bla bla |
| bar | something else bla                 | 
```

我同意上述 Sam 的观点，即 Markdown 被认为是“硬包装”语言，因此这是作弊（我想这不是有效的 Markdown）。但例如在几个 Github 项目`README.md`文件中，我看到人们像这样包装列表项：

```
 * foo
 * bla bla bla bla bla bla bla bla bla bla 
   bla bla bla bla bla bla bla bla bla 
```

我的学院还指出[http://www.tablesgenerator.com/markdown_tables](http://www.tablesgenerator.com/markdown_tables)以类似的方式包装表格（感谢汤姆）

因此，如果您正在做一些不会被解析的事情（例如 Github 文档），我认为可以使用我的示例，但如果您正在对 HTML 解析器或 Cucumber 测试表进行一些 Markdown，则不应该换行。

但我可能错了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T19:47:21.983

遗憾的是，您必须为此使用 HTML

```
<table>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
<tr>
<td>appDir</td>
<td>The top level directory that contains your app. If this option is used then
it assumed your scripts are in</td>
</tr>
<tr>
<td>baseUrl</td>
<td>By default, all modules are located relative to this path. If baseUrl is not
explicitly set, then all modules are loaded relative to the directory that holds
the build file. If appDir is set, then baseUrl should be specified as relative
to the appDir.</td>
</tr>
<tr>
<td>dir</td>
<td>The directory path to save the output. If not specified, then the path will
default to be a directory called "build" as a sibling to the build file. All
relative paths are relative to the build file.</td>
</tr>
<tr>
<td>modules</td>
<td>List the modules that will be optimized. All their immediate and deep
dependencies will be included in the module's file when the build is done. If
that module or any of its dependencies includes i18n bundles, only the root
bundles will be included unless the locale: section is set above.</td>
</tr>
</table> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-02T22:45:15.070

这不是一个捷径，而是一个格式化选项：

而不是这样做：

```
| TABLE  | NUMBER | RELATIONSHIPS |
| ------ | ------ | ------------- |
| TABLEA | NUM001 | TABLE2, TABLE4, TABLE7 |
| TABLEB | NUM002 | TABLEA | 
```

你可以这样做：

```
| TABLE  | NUMBER | RELATIONSHIPS |
| ------ | ------ | ------------- |
| TABLEA | NUM001 | TABLE2        | 
|        |        | TABLE4        |
|        |        | TABLE7        |
| TABLEB | NUM002 | TABLEA        | 
```

并简单地在没有多行数据的列中留下空格。一个体面的代码编辑器可以帮助进行大量格式化，因此您无需手动输入多个空格。

# objective-c - 成绩簿的二维数组

> ID：15955166
> 
> 赞同：0
> 
> 时间：2013-04-11T17:29:42.090
> 
> 标签：objective-c, macos, cocoa, parsing, csv

这是我第一次尝试用 mac 编程。学习曲线陡峭。我有一个 .csv 文件，其中包含几列 ascii 数据组织的空白字段、用户名、姓名（格式为“姓氏、名字中间名”）、作业 1 级（整数）、作业 2 级（整数）.... 作业n 等级（整数），平均等级（下降一个等级），部分编号（整数）。代替等级，它们可能是作业栏中的文本条目：I 代表生病，X 代表豁免等。我需要按部分计算每个作业的平均成绩。IE。第 9999 节学生的平均成绩是**__ 。**. 我已经查看了各种解析方案，但在我对目标 c 的理解中，这些方案太复杂了，无法知道如何使用它们，更不用说它们是如何工作的了。因此，我正在链接一些更具体、更不普遍的东西。

我已经编写了一些代码来将文件读入一个长字符串。我已经编写了将字符串分解为代码行数组的代码（学生 n 评分），我对如何将行数组分解为二维项目行数组感到困惑。完成后，我想通过查看单个作业的每一列成绩来计算每个作业的部分平均值。如果该行的学生在我正在计算的部分中，我想对数字成绩求和，跳过任何 S 或 X 条目并除以数字条目的数量以获得该作业的平均值。

最终，我将输出一个 csv 文件，其中包含节号、每个作业的平均成绩、每个作业的累积成绩。

所以对于我的第一个问题，如何将数组分解为项目以及如何使用数字索引访问各个项目？任何建设性的指导都将被最亲切地接受。

这是我到目前为止所做的：

```
 // main.m

#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

     @autoreleasepool
    {

        // insert code here...

        // beginning of sample code ************************************

        // content is a pointer to a string containing all the data from the file
        // contentarray is a pointer to an array where each index is a line from the file (separated by \n
        // itemarray is a pointer to an array where the primary index - row is the nth line of the file and column is the nth item in the line.

        NSInteger   itemcount, rowcount;
        NSString *pathwithgradefile = @"/some_path/sampledata.csv";
        // NSError *error = nil;

        NSString *content =  [NSString stringWithContentsOfFile:pathwithgradefile encoding:NSUTF8StringEncoding error:nil];
        NSLog(@"%@",content);

        Make array of lines from the file - This part works. 
       NSArray *contentArray = [content componentsSeparatedByString:@"\n"]; // csv file line ends with newline

        // output check of contentarray.
        NSLog(@" \nlist contentArray line by line\n");   

        rowcount=0;
        for (NSString *item in contentArray) {
            // display item
                        NSLog(@"\n\r");
            NSLog(@"row count: %lid Content: %@",rowcount, [contentArray objectAtIndex:rowcount]);
            rowcount++;   // this section works

        }

        // parse into 2d array with rows and items in each row
        // this section is bogus - I am really clueless on how to proceed.
        itemcount=0;
        for (NSString *item in contentArray) {
           NSArray *itemArray = [item componentsSeparatedByString:@","];
            // log first item

           NSLog(@"\n\r");
            NSLog(@"item count: %lid Content: %@",itemcount, [itemArray objectAtIndex:rowcount]);
            itemcount++;
       }        
    }
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:12:34.453

如果您的数据不是连续的或在您想要使用的数字索引中有间隙，您最好使用带有 NSNumber 键的字典。像这样的东西可能会做你想做的事。

```
NSMutableDictionary *outputData = [NSMutableDictionary dictionaryWithCapacity: 5];
NSUInteger sectionColumnIndex = 3; // What ever column you want to use as the top level
for (NSString *item in contentArray) {
    NSArray *itemArray = [item componentsSeparatedByString:@","];
    NSNumber *sectionNumber = [NSNumber numberWithInt:[[itemArray objectAtIndex: sectionColumnIndex] intValue]];
    if(![outputData objectForKey: sectionNumber]){
        NSMutableArray *sectionEntries = [NSMutableArray arrayWitCapacity: 5];
        [outputData setObject: sectionEntries forKey: sectionNumber];
    }

    NSMutableArray *sectionEntries = [outputData objectForKey: sectionNumber];
    [sectionEntries addObject: itemArray];
} 
```

注意：这可能有错别字，但应该让你开始。

# teradata - 在 Aster 中，我如何使用 CREATE TABLE IF EXISTS 以及我使用的是什么版本的 postgres？

> ID：15955168
> 
> 赞同：2
> 
> 时间：2013-04-11T17:29:44.227
> 
> 标签：teradata, teradata-aster

我们将 Aster 用于我们的一些网络会话日志。我在内部被告知 Aster 使用`PostgreSQL`，事实上对于我的很多查询，我查看这个站点并遵循`PostgreSQL`代码指南，这些指南总是有效的。

现在，我正在尝试使用一个不断失败的简单查询（“NOT”处或附近的语法错误）：

```
create table IF NOT EXISTS scratchdb.test_table
(partition key(uvn)) as
select distinct date(created_dt) as full_date,uvn,user_id from db.db_table 
```

我不断收到错误`IF NOT EXISTS`。所以我发现另一篇文章说我至少需要`PostgreSQL-9.1`工作`IF NOT EXISTS`。为了找出我正在使用的版本，该文章建议：

```
select version(); 
```

但这会返回一个错误：

```
function version is not supported 
```

所以，Aster 不能是 100% `PostgreSQL`。我的两个问题是，`IF EXISTS`在 Aster 中创建表时如何使用，以及如何判断`PostgreSQL`我使用的是哪个版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T05:44:37.387

在 Aster 中删除/创建表时使用两个 SQL 语句：

```
DROP TABLE IF EXISTS scratchdb.test_table;
CREATE TABLE scratchdb.test_table ... 
```

此外，我不建议查阅 8.3 版以上的 Postgres 文档，即使那样，也不能保证 Aster 支持那里找到的功能或特性。Aster 确实与 Postgres 有很多相似之处，但并不相同。

所以，没有 PosgreSQL 的版本——重要的是 Aster 的唯一版本。检查它的一种方法是通过管理控制台 (AMC)：将浏览器指向`https://server_name_or_ip_address`

登录后单击***管理员：集群管理：节点***选项卡。它显示集群中存在的所有节点以及软件版本信息。

# javascript - 来自异步函数的 HTML5 Javascript 返回值

> ID：15955169
> 
> 赞同：0
> 
> 时间：2013-04-11T17:29:59.440
> 
> 标签：javascript, html

我怎样才能让返回的客户真正从这个函数返回一个客户数组？我的意思是我会使用另一种语言`Thread.SignalOne`或`Async callback`. 我怎样才能在 JS 中做到这一点？

```
 var getAllFiles = function() {
 var customers = [];
 var objectStore = dbGlobals.db.transaction("files").objectStore("files");

 objectStore.openCursor().onsuccess = function(event) {
  var cursor = event.target.result;
  if (cursor) {
      if(cursor.key.indexOf(currentFolder) != -1)  {
        customers.push(cursor.value);
      }
      cursor.continue();      
  }
  else {
//  alert("Got all customers: " + customers);
    return customers;
  }
}; 
```

}

# asp.net-mvc - 绑定到非 DateTime 属性时，DefaultModelBinder 是否使用 CultureInfo 实例中的信息？

> ID：15955170
> 
> 赞同：1
> 
> 时间：2013-04-11T17:30:05.000
> 
> 标签：asp.net-mvc, cultureinfo

我正试图在`CultureInfo`课堂上绕圈子。

的实现 `IValueProvider.GetValue` 必须返回一个实例`ValueProviderResult`，其中它的构造函数指定`CultureInfo`为其参数之一。我知道在将值绑定到类型的属性时`DefaultModelBinder`需要`CultureInfo`实例`DateTime`，但是默认绑定器在`CultureInfo`将值绑定到类型以外的属性时是否也使用信息`DateTime`？

谢谢

# watir-webdriver - watir webdriver“没有这样的会话：标题\n”在执行 Browser.new 时的消息：chrome

> ID：15955171
> 
> 赞同：2
> 
> 时间：2013-04-11T17:30:09.663
> 
> 标签：watir-webdriver, selenium-chromedriver

我正在尝试使用 Watir Webdriver 起步，我需要它与 Chrome 一起使用。我下载了 chromedriver 并将其添加到我的路径中，但是当我这样做时（在 irb 中，使用 mac）：

```
require 'watir-webdriver'
b = Watir::Browser.new :chrome 
```

我收到这条消息：

```
<Watir::Browser:0x..fb07a5a545bf96f92 url={"message"=>"no such session: url\n  (Driver info: chromedriver=0.7,platform=Mac OS X 10.7.5 x86_64)"} title={"message"=>"no such session: title\n  (Driver info: chromedriver=0.7,platform=Mac OS X 10.7.5 x86_64)"}> 
```

如果我省略 ":chrome" 部分，它将打开一个新的 Firefox 浏览器。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:02:03.073

这似乎是`ChromeDriver2 v0.7 (r192977)`. 您可以降级到`ChromeDriver2 v0.5 beta (March 26th)`它应该可以解决您的问题。

所有版本都[可以在这里找到](https://code.google.com/p/chromedriver/downloads/list)。

在 Ruby 1.9.3 32 位下，在 Win7 64 位上运行，对我来说非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T10:50:27.580

如果您使用的是 Mac，只需在命令行上执行 chromedriver 的 brew install 即可。冲泡安装 chromedriver

您可能需要先设置您的 Mac，只需转到此链接并按照说明安装 homebrew。 [http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)

这是将 chromedriver 安装到您的路径的最简单方法，并且像魅力一样工作。

# javascript - JQuery手风琴高度问题

> ID：15955174
> 
> 赞同：1
> 
> 时间：2013-04-11T17:30:21.920
> 
> 标签：javascript, jquery, html, css, jquery-ui

我正在使用 JQuery 手风琴：

```
<script language="javascript" type="text/javascript">
    $(function () {
        var activeIndex = parseInt($('#<%=hidAccordionIndex.ClientID %>').val());

        $("#accordion").accordion({
            autoHeight: true,
           // event: "mousedown",
            active: activeIndex,
            change: function (event, ui) {
//                var index = $(this).accordion("option", "active");
  //              $("#<% =hidAccordionIndex.ClientID %>").val(index);
    }
        });
    });
</script> 
```

和 HTML：

```
 <asp:HiddenField ID="hidAccordionIndex" runat="server" Value="0" />
        <div id="kez_header">
        <table class="style1">
            <tr>
                <td>
                    <h4>
                        Company Settings
                    </h4>
                </td>
                <td align="right" valign="middle">
                </td>
            </tr>
        </table>
    </div>
    <div id="accordion">
  <h3>Paymo Credentials</h3>
  <div>
      <div class="form-horizontal">
              <div class="control-group">
                                <label class="control-label" for="<%=txtApi.ClientID%>">
                                    API Key</label>
                                <div class="controls">
                                    <asp:TextBox ID="txtApi" placeholder="API Key" runat="server" TextMode="SingleLine" Width="304px"></asp:TextBox>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label" for="<%=txtEmail.ClientID%>">
                                    Email</label>
                                <div class="controls">
                                    <asp:TextBox ID="txtEmail" placeholder="Email" runat="server" TextMode="Email" Width="281px"></asp:TextBox>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label" for="<%=txtPassword.ClientID%>">
                                    Password</label>
                                <div class="controls">
                                    <asp:TextBox ID="txtPassword" placeholder="Password" runat="server" TextMode="Password" Width="186px"></asp:TextBox>
                                </div>
                            </div>
                            <asp:Button CssClass="btn" ID="btnEditPaymo" runat="server" OnClick="btnEditPaymo_Click" Text="Save Changes" />
                        </div>
  </div>
          <h3>Paymo Settings</h3>
  <div>
                        <div class="form-horizontal">
                            <div class="control-group">
                                <label class="control-label" for="<%=txtFilter.ClientID%>">
                                    Filters</label>
                                <div class="controls">
                                    <asp:TextBox ID="txtFilter" placeholder="Filters (Separate by ';')" runat="server" TextMode="SingleLine" Width="200px"></asp:TextBox>
                                </div>
                            </div>
                            <asp:Button CssClass="btn" ID="btnEditPaymoSettings" runat="server" Text="Save Changes" OnClick="btnEditPaymoSettings_Click" />
                        </div>

  </div>
  <h3>CRM Credentials</h3>
  <div>
                        <div class="form-horizontal">
                               <div class="control-group">
                                <label class="control-label" for="<%=txtCRMOrg.ClientID%>">
                                    Organization</label>
                                <div class="controls">
                                    <asp:TextBox ID="txtCRMOrg" placeholder="Organization" runat="server" TextMode="SingleLine"></asp:TextBox>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label" for="<%=txtCrmDomain.ClientID%>">
                                    Domain</label>
                                <div class="controls">
                                    <asp:TextBox ID="txtCrmDomain" placeholder="Domain" runat="server" TextMode="SingleLine"></asp:TextBox>
                                </div>
                            </div>
                               <div class="control-group">
                                <label class="control-label" for="<%=txtCRMUser.ClientID%>">
                                    Username</label>
                                <div class="controls">
                                    <asp:TextBox ID="txtCRMUser" placeholder="Username" runat="server" TextMode="SingleLine"></asp:TextBox>
                                </div>
                            </div>
                               <div class="control-group">
                                <label class="control-label" for="<%=txtCRMPassword.ClientID%>">
                                    Password</label>
                                <div class="controls">
                                    <asp:TextBox ID="txtCRMPassword" placeholder="Password" runat="server" TextMode="Password"></asp:TextBox>
                                </div>
                            </div>
                            <asp:Button CssClass="btn" ID="btnEditCRM" runat="server" Text="Save Changes" OnClick="btnEditCRM_Click" />
                        </div>

  </div>
                  <h3>CRM Settings</h3>
  <div>
                        <div class="form-horizontal">
                            <div class="control-group">
                                <label class="control-label">
                                    Status Reason Filters</label>
                                <div class="controls">
                                    <asp:CheckBoxList ID="cblCRMStatus" runat="server" CssClass="checkbox"></asp:CheckBoxList>
                                </div>
                            </div>
                             <div class="control-group">
                             <label class="control-label">
                                    Case Type Filters</label>
                                <div class="controls">
                                    <asp:CheckBoxList ID="cblCRMType" runat="server" CssClass="checkbox"></asp:CheckBoxList>
                                </div>
                            </div>
                            <asp:Button CssClass="btn" ID="btnEditCRMSettings" runat="server" Text="Save Changes" OnClick="btnEditCRMSettings_Click" />
                        </div>

  </div>
  <h3>Work Day Hours</h3>
  <div>
                        <div class="form-horizontal">
                            <div class="control-group">
                                <label class="control-label" for="<%=txtHours.ClientID%>">
                                    Hours</label>
                                <div class="controls">
                                    <asp:TextBox ID="txtHours" placeholder="Hours" runat="server" TextMode="SingleLine" Width="66px"></asp:TextBox>
                                </div>
                            </div>
                            <asp:Button CssClass="btn" ID="btnEditHours" runat="server" OnClick="btnEditHours_Click" Text="Save Changes" />
                        </div>

  </div>
</div> 
```

我不知道为什么，但所有面板/选项卡都是最长选项卡的高度，看起来很奇怪。相反，我希望他们都达到他们需要的高度。

我尝试使用和不使用 autoHeight 都没有运气。

正在生成高度：

```
<div class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" style="display: block; height: 1339.21875px;" id="ui-accordion-accordion-panel-0" aria-labelledby="ui-accordion-accordion-header-0" role="tabpanel" aria-expanded="true" aria-hidden="false">
    <div class="form-horizontal">
        <div class="control-group">
            <label class="control-label" for="ContentPlaceHolder1_txtApi">API Key</label>
            <div class="controls">
                <input name="ctl00$ContentPlaceHolder1$txtApi" type="text" value="10065f74bdee9f0b7870c1d35f13ad3c" id="ContentPlaceHolder1_txtApi" placeholder="API Key" style="width:304px;">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="ContentPlaceHolder1_txtEmail">Email</label>
            <div class="controls">
                <input name="ctl00$ContentPlaceHolder1$txtEmail" type="email" value="joshua_larouche@hotmail.com" id="ContentPlaceHolder1_txtEmail" placeholder="Email" style="width:281px;">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="ContentPlaceHolder1_txtPassword">Password</label>
            <div class="controls">
                <input name="ctl00$ContentPlaceHolder1$txtPassword" type="password" id="ContentPlaceHolder1_txtPassword" placeholder="Password" style="width:186px;">
            </div>
        </div>
        <input type="submit" name="ctl00$ContentPlaceHolder1$btnEditPaymo" value="Save Changes" id="ContentPlaceHolder1_btnEditPaymo" class="btn">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T17:32:49.417

使用高度样式属性：

```
heightStyle: "content" 
```

见：[http ://api.jqueryui.com/accordion/#option-heightStyle](http://api.jqueryui.com/accordion/#option-heightStyle)

# php - 解析错误：语法错误，上传到托管服务器时出现意外的“[”

> ID：15955176
> 
> 赞同：0
> 
> 时间：2013-04-11T17:30:31.100
> 
> 标签：php, syntax-error, wamp

我正在使用 WAMP 开发基于 PHP 的项目，使用它时没有出现错误。但上传到托管服务器后，出现此错误，

```
Parse error: syntax error, unexpected '[' in /data/multiserv/users/830768/projects/1970916/www/index.php on line 6 
```

第6行代码如下

```
render("/event_view.php",["title" => "Current Events","rows"=>$rows]); 
```

渲染函数是预定义的，并且在 WAMP 中接受变量而不会出错。我正在搜索其他线程，但示例不是很清楚（我不是 PHP 专家）。谁能帮我。因为这是一个学校项目，所以我几乎没有时间将其上传到服务器并进行此工作。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:32:26.077

该数组语法是在 PHP 5.4 中引入的。很可能您使用的是新版本的 PHP，而主机使用的是旧版本。如果是这样，那么您可以使用旧的数组语法，它适用于两个版本：

```
render("/event_view.php", array("title" => "Current Events", "rows" => $rows)); 
```

# ajax - 使用 Jquery 和 ajax 进行 Twitter 搜索

> ID：15955177
> 
> 赞同：0
> 
> 时间：2013-04-11T17:30:32.917
> 
> 标签：ajax, json

目前我的代码是：

```
<!DOCTYPE html>
<head>

    <title>Search Tweets</title>
<style type = "text/css">

#tweets{
    border: 1px solid red;
    text-align: center;
    font-family: cursive;
}
#box{
    float: left;
    margin-left: auto;
    margin-right: auto;

}
#btn{
    margin-left: auto;
    margin-right: auto;
}
#main{
    padding-bottom: 20px;
}

</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">

$(document).ready(function() {
    $('#submit').click(function() {
        var params = {
            q: $('#query').val(),
            rpp: 10
        };
        searchTwitter(params);
    });

function searchTwitter(query) {
    $.ajax({
        url: 'http://search.twitter.com/search.json?' + jQuery.param(query),
        dataType: 'jsonp',
        success: function(data) {
            var tweets = $('#tweets');
            tweets.html('');
            for (res in data['results']) {
                tweets.append('<div>' + data['results'][res]['profile_image_url'] + data['results'][res]['from_user'] + ' Said: <p>' + data['results'][res]['text'] + '</p></div><br />');

            }
        }
    });
    }
});

</script>

</head>
<body>
<div id ="main">
    <div id ="box">
        <input id="query" type="text" value="" />
    </div>
    <div id ="btn">
        <input id="submit" type="button" value="Search" />
    </div>

</div>
    <div id="tweets">Tweets

    </div>
</body>

</html> 
```

一切正常，但是当它从个人资料图像 url 接收代码时，它只显示 URL 而不是图像本身。我如何获得显示的个人资料图像而不仅仅是代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:33:58.637

只需将图像 url 包装在 img 标签中

```
tweets.append('<div><img src="' + data['results'][res]['profile_image_url'] +'">' + data['results'][res]['from_user'] + ' Said: <p>' + data['results'][res]['text'] + '</p></div><br />'); 
```

# html - 空间不足时如何开始缩小同级 div

> ID：15955178
> 
> 赞同：2
> 
> 时间：2013-04-11T17:30:37.050
> 
> 标签：html, css

嗨，我有以下 HTML：

```
<div>  
    <div style="display:inline-block;">
        Child one **************************************
    </div>

     <div style="display: inline-block;width: 100px;">
         Child two
    </div>  
</div> 
```

[http://jsfiddle.net/cVH9G/](http://jsfiddle.net/cVH9G/)

当我调整浏览器父 div 的大小时，它们开始缩小。一旦没有足够的空间容纳固定宽度的子 2，它就会溢出到子 1 的下方。我想要实现的是永远不要溢出孩子二并始终将其保持在右上角，当孩子二没有足够的空间时缩小孩子一而不是溢出孩子二。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:54:16.823

我尝试了以下方法：

```
<div class="wrapper">
    <div class="child-one">Child one **************************************</div>
    <div class="child-two">Child two</div>
</div> 
```

使用以下 CSS：

```
.wrapper {
    position: relative;
    border: 2px solid red;
    overflow: auto;
}
.child-one {
    margin-right: 110px;
}
.child-two {
    position: absolute;
    right:0;
    top: 0;
    border: 1px solid gold;
    width: 100px;
} 
```

您可以使用绝对定位来保持`child-two`原位。

`table-cell`也可以如前所示工作，但在 IE7 或更低版本中没有得到很好的支持。

浮动不是一个好的选择，因为您要么让一个 div 开始第二行，要么需要隐藏溢出，在我看来，这是不太有吸引力的选择。

小提琴：hthttp://jsfiddle.net/audetwebdesign/pbbEP/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:37:43.990

您可以尝试`min-width`为您的父 div 提供一个：

```
<div style="border:3px solid red;min-width: 500px;"> 
```

**[演示](http://jsfiddle.net/cVH9G/1/)**

这将确保您的父 div 始终显示为至少 500 像素的最小宽度，并在用户将浏览器调整为更窄时创建一个水平滚动条。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T17:44:16.490

**工作小提琴： http:** [//jsfiddle.net/cVH9G/5/](http://jsfiddle.net/cVH9G/5/)（更新改进）

第一个孩子随着屏幕宽度调整大小，第二个孩子始终保持宽度在右侧`100px`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T17:45:51.237

另外的选择：

```
<div style="border:3px solid red; ">
    <div style="border: 1px solid gold; display: inline-block; width: 20%; float:right;">
         Child two
    </div>   
    <div style="border: 1px solid green; display:inline-block; width: 75%; word-break: break-all;">
        Child one **************************************
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T17:47:35.180

尝试使用花车；而不是内联块。我想这就是你在[http://jsfiddle.net/cVH9G/3/之后的样子](http://jsfiddle.net/cVH9G/3/)

请注意，我还在`overflow:hidden`您的包装器中添加了一个，以防止它崩溃（clearfix）。

另请注意，我改变了孩子的顺序，使 child2 保持在右上角，即使父母缩小。

相关的 css 如下所示：

```
#child1 {
    display: block;
    float: left;    
}
#child2 {
    width: 100px;
    display: block;
    float: right;
} 
```

# jquery - 带有参数的 jQuery Ajax 请求到包含下划线的 url

> ID：15955181
> 
> 赞同：2
> 
> 时间：2013-04-11T17:30:43.550
> 
> 标签：jquery, ajax, firefox

我试图对像`http://localhost:3000/foo_bar`. 呼叫将类似于`$.ajax({url: "/foo_bar", data: { my: "params" }})`. 奇怪的是，这在 Chrome 中可以正常工作。但是一旦我开始在 FF 中测试这个，我就会得到一个错误。Ajax 调用从未完成 - 相反，请求在 jQuery 框架深处的某个地方失败。不过，如果我删除了 data 参数，它会正常工作。我花了很长时间才发现问题出在“foo_bar”中的下划线。当我将其更改为连字符时，请求在两个浏览器中都按预期完成。有人知道为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:44:33.510

一般来说，我认为下划线被视为单词连接符而不是分隔符所以'/foo_bar'只是'/foobar'。不知道是不是这个问题。

# onclick - 单击图像时播放 MP3

> ID：15955183
> 
> 赞同：3
> 
> 时间：2013-04-11T17:30:59.787
> 
> 标签：onclick, mp3, html5-audio

当我单击站点中的某个图像时，我想播放 MP3 文件。我还希望隐藏 MP3 文件。我怎样才能做到这一点？我尝试了这段代码，但没有任何反应：

```
<html>
<body>

<script language="javascript" type="text/javascript">
 function playSound(soundfile) {

document.getElementById("dummy").innerHTML=document.getElementById("dummy").innerHTML +
"<embed src=\""+mp3/a/bat.mp3+"\" hidden=\"true\" autostart=\"true\" loop=\"false\"     />";
 }

<span id="dummy" onclick="playSound('mp3/a/bat.mp3');"><img src="short_a/bat.jpg" 

name="Bottom-1" width="115" height="45" border="0" id="Bottom-1"/></a></span>

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T18:06:43.270

这不是关于`PHP`，您只需将`HTML`代码添加到您的`PHP`页面。

如果你坚持嵌入标签，这里就是你想要的代码，[DEMO](http://jsfiddle.net/zHfrP/)

```
<!DOCTYPE html>
<html>
  <head>
      <script type="text/javascript">
          function playSound(el,soundfile) {
              var embed = document.getElementById("embed");
              if (!embed) {
                  var embed = document.createElement("embed");
                      embed.id= "embed";
                      embed.setAttribute("src", soundfile);
                      embed.setAttribute("hidden", "true");
                  el.appendChild(embed);
              } else {
                  embed.parentNode.removeChild(embed);
              }
          }
      </script>
  </head>
<body>
    <span id="dummy" onclick="playSound(this, 'https://dl.dropbox.com/u/39640025/MP3/Waves.mp3');">
      <img src="short_a/bat.jpg" name="Bottom-1" width="115" height="45" border="0" id="Bottom-1"/>
    </span>
</body>
</html> 
```

不过我推荐你使用 Audio API, [DEMO](http://jsfiddle.net/zHfrP/1/)

```
<!DOCTYPE html>
<html>
  <head>
      <script type="text/javascript">
          function playSound(el,soundfile) {
              if (el.mp3) {
                  if(el.mp3.paused) el.mp3.play();
                  else el.mp3.pause();
              } else {
                  el.mp3 = new Audio(soundfile);
                  el.mp3.play();
              }
          }
      </script>
  </head>
<body>
    <span id="dummy" onclick="playSound(this, 'https://dl.dropbox.com/u/39640025/MP3/Waves.mp3');">
      <img src="short_a/bat.jpg" name="Bottom-1" width="115" height="45" border="0" id="Bottom-1"/>
    </span>
</body>
</html> 
```

# android - Android Geoloqi SDK：让组/创建 api 调用工作

> ID：15955184
> 
> 赞同：0
> 
> 时间：2013-04-11T17:30:59.740
> 
> 标签：android, api, request, token

我正在使用 Geoloqi android sdk 编写一个项目。我想使用 api 方法调用 group/create，但是在我的 OnRunApiRequestListener() 内部类中，onComplete() 不断返回而不是 onSuccess()。我在 logcat 中找到的错误代码是“HTTP/1.1 400 Bad Request”。我在 geoloqi 的网站上查找了它，错误代码显示“当标头中存在令牌时，在 GET 或 POST 中找到了身份验证令牌”。不完全确定这意味着什么，但我认为这与 group/create 需要应用程序访问令牌这一事实有关。我有一个应用程序访问令牌，但我不知道将它放在我的项目中的哪个位置。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:04:38.183

你能告诉我一些你想用你的应用程序做什么吗？

不建议将应用程序访问令牌放在客户端应用程序中，因为从 APK 中提取字符串相对容易，并且应用程序访问令牌允许管理员访问您的应用程序。

一个可能的解决方案是创建一个简单的服务器来接收来自您的 android 应用程序的请求并代表该应用程序向 Geoloqi 发出请求。

# php - htmlentities() 和用户输入搞乱 SQL 查询

> ID：15955192
> 
> 赞同：0
> 
> 时间：2013-04-11T17:31:27.333
> 
> 标签：php, mysql

我环顾四周大约 15 分钟，找不到任何与我有相同问题的东西。

我在我的网站上进行了一次简单的聊天，当有人输入数据时，它会进行。

```
$m = htmlentities($_POST['m']);
$m = mysql_real_escape_string($m); 
```

..然后像往常一样被插入到数据库中。这对于阻止人们在聊天中使用 HTML 代码非常有效，但今天有人发现插入 ASCII 字符（他们复制并粘贴“›”符号）会导致 JSON 返回

```
"chat":null 
```

但在返回的 JSON 中没有那个符号，它看起来像

```
"chat":"<span class=\"chatMessage\"><span style=\"color:#FF7F00\">[12:11:42] Me: Message<\/span><\/span> 
```

带有符号的行有

```
&acirc;€&amp;ordm; 
```

在里面，而不是应该在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:30:06.337

# “»”显示为“Â»”的原因

您的数据被编码为 utf8，但是您页面上的元标记或服务器错误地告诉它是 ISO-8859-1 或其他东西。修复你的标题。

# image - 在 IMG 右键单击 时，显示“将此页面添加为书签”“页面另存为”而不是典型的“将 img 另存为”

> ID：15955193
> 
> 赞同：1
> 
> 时间：2013-04-11T17:31:27.210
> 
> 标签：image, html

我环顾了问题论坛以找到答案，但看起来以前没有人遇到过这个问题。所以如果我错过了，我很抱歉浪费你的时间！

就像我在问题标题中指出的那样，我`IMG`的右键单击功能不起作用。似乎浏览器无法识别`img element`. 这一定与`Pinterest Pin It plugin`我所拥有的有关。如果按reload/refresh并右键单击图像（在JS加载之前），您可以`save as image`在右键单击时看到正常选项。但是一旦页面完全加载，你就不能了。

我在 Firebug 中检查了它，也许它与`pin it overlay`跨度有关？我不确定。

有没有人听说过这个问题？我真的很感激任何指导。也许我只是在搜索错误的关键字。非常感谢。

这是我的网站：[http ://brightontheday.com](http://brightontheday.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:59:25.873

我相信您指的是您页面上的图片，上面写着“Floral Frenzy”，当您将鼠标悬停时，它会显示 Pinterest 注入的“PIN”叠加层。

您非常接近断言 Pinterest 是原因或相关。在您的 img 顶部有一个跨度覆盖：

```
<span class="pinit-overlay alignnone" style="height: 714px; width: 466px; ... 
```

因此，该叠加层就是被右键单击的内容，并且由于这不是 img，因此您将获得与右键单击页面空白区域相同的右键单击菜单。

一般来说，您可以通过右键单击 Chrome 并单击 Inspect Element 来检查此类问题，这将向您显示 DOM 树以及您现在实际结束的标签。在这种情况下，Chrome 会直接带您进入问题范围。

我与 Pinterest 的合作不足以知道这个叠加层是否是 Pinterest 的一部分、你添加的东西，或者如果它是由 Pinterest 注入的你可以配置的东西，但作为暴力破解，你可以隔离它通过 CSS 到实际引脚周围的一小块区域，例如：

```
span.pinit-overlay {
    width: 100px !important; height: 66px !important;
} 
```

该 hack 将迫使叠加层比它应用的实际 pin 按钮大一点 (4px)，因此大部分图像仍将位于顶部并获得标准的右键单击菜单，并且 pin 按钮继续工作。

有趣的是，尽管有这个 hack，但 Pin 按钮仍然可以发现，当您将鼠标悬停在图像的任何部分时仍然会出现，这真的让我质疑为什么要放置覆盖层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-30T17:53:15.723

我最终改用了[这个插件](http://mrsztuczkens.me/jpibfi/)，不再有问题了！

# c++ - std::make_pair: "无法将 'int*' 转换为 'std::pair *' 在初始化中"

> ID：15955195
> 
> 赞同：0
> 
> 时间：2013-04-11T17:31:30.407
> 
> 标签：c++, c++11, std-pair

在下面列出的函数中，我正在尝试创建一个指向 std::pair 对象的指针，在该对象中出现此消息底部显示的编译错误（相关的行号已在下面的代码片段中标记）。你能告诉我这段代码有什么问题吗？谢谢。

```
 void 
 XXX::addSubscription(EndPointAddr* ptrRequesterServiceAddr, 
                      EndPointAddr* ptrRequestedServiceAddr)
 {
  //LINE 908 indicated in the g++ output starts HERE
  std::pair<EndPointAddr*, EndPointAddr* > *thePair = 
  new  std::make_pair(ptrRequesterServiceAddr, ptrRequestedServiceAddr);

  mServiceSubscriptionsList.push_back(thePair); 
 } 
```

**编译输出：**

```
 ../XXX.cpp: 
 In member function ‘void XXX::addSubscription(EndPointAddr*, EndPointAddr*)’:
 ../XXX.cpp:908:59: error: expected type-specifier
 ../XXX.cpp:908:59: error: cannot convert ‘int*’ to ‘std::pair<EndPointAddr*, EndPointAddr*>*’ in initialization
 ../XXX.cpp:908:59: error: expected ‘,’ or ‘;’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:35:07.510

```
std::pair<EndPointAddr*, EndPointAddr* > *thePair = 
  new  std::make_pair(ptrRequesterServiceAddr, ptrRequestedServiceAddr);
            ^^^^^^ 
```

应该

```
std::pair<EndPointAddr*, EndPointAddr* > *thePair = 
  new  std::pair<EndPointAddr*, EndPointAddr*>(ptrRequesterServiceAddr, ptrRequestedServiceAddr);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

`std::make_pair`是一个函数。您正在尝试将`std::pair`指针分配给函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:39:01.673

您需要使用构造函数而不是 make pair 而不是 std::make_pair

```
 std::pair<EndPointAddr*, EndPointAddr* > *thePair = 
  new  std::pair<EndPointAddr*, EndPointAddr* >(ptrRequesterServiceAddr, ptrRequestedServiceAddr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:24:09.177

您的示例代码未显示`mServiceSubscriptionsList`有助于了解的类型。

尝试这个：

```
void 
 XXX::addSubscription(EndPointAddr* ptrRequesterServiceAddr, 
                      EndPointAddr* ptrRequestedServiceAddr)
 {
  //LINE 908 indicated in the g++ output starts HERE
  std::pair<EndPointAddr*, EndPointAddr* > thePair = 
  std::make_pair(ptrRequesterServiceAddr, ptrRequestedServiceAddr);

  mServiceSubscriptionsList.push_back(thePair); 
 } 
```

# ruby-on-rails - 视图在没有布局的情况下被渲染

> ID：15955197
> 
> 赞同：0
> 
> 时间：2013-04-11T17:31:38.043
> 
> 标签：ruby-on-rails, layout, erb

我刚刚在 Windows 上使用 Rails 3.2.11 创建了一个新项目，默认情况下我的视图在没有布局的情况下呈现。

我有一个控制器如下：

```
class DashboardsController < ApplicationController
  def initialize
    @ini=Date.new(2013,01,01)
    @end=Date.new(2013,12,31)

  def show
  end
end 
```

我的视图`show.html.erb`在没有布局的情况下呈现，即使我强制`layout :application`控制器它不起作用。

我设法解决此问题的唯一方法是明确告诉 show 方法使用布局进行渲染。

```
def show
  render :layout => 'application'
end 
```

我错过了什么吗？

默认情况下不应该为所有操作选择默认应用程序布局吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:25:23.990

我刚刚找到了阅读这个[问题](https://stackoverflow.com/a/14151277/305116)的问题的答案。

问题出在我的控制器上，我在其中覆盖了初始化方法但忘记调用 super.

我用完整的代码更新了我的问题以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:38:15.887

`layout`需要一个字符串。

```
class DashboardsController < ApplicationController
  layout "application"  

  def show
  end
end 
```

符号调用应返回模板名称（作为字符串）的指定方法。

```
class DashboardsController < ApplicationController
  layout :grab_bag  

  def show
  end

  def grab_bag
    ["red", "white", "blue"].sample
  end
end 
```

# javascript - 打印body标签的css时留下边框

> ID：15955199
> 
> 赞同：0
> 
> 时间：2013-04-11T17:31:43.353
> 
> 标签：javascript, html, css, printing-web-page

我正在尝试为身体标签打印一个带有边框的身体......但问题是它没有触及纸张的顶部和底部......我删除了填充但仍然无法正常工作......提供我的代码以下....

[http://jsfiddle.net/jjnKP/embedded/result/](http://jsfiddle.net/jjnKP/embedded/result/)

```
@media print {
        body {margin:0; padding:0; line-height: 1.4em; word-spacing:1px; letter-spacing:0.2px; font: 17px Arial, Helvetica,"Lucida Grande", serif; color: #000;}
        .mainDiv, .navbar, .copyright  {
            display: none;
        }

        #templateTwoPadding {
                padding: 0 0;
            }

            #tableHeadingLastDF{text-align: left;width: 134px; border:1px solid white;}
            #makeLeftDF{text-align: left;}

            .jumbotron .lead {
                font-size: 12px;
                width: 670px;
            }

            #listWidthDF{
                width: 670px;

            }
        } 
```

# asp.net-mvc - @Html.ActionLink 帮助器指向当前页面

> ID：15955203
> 
> 赞同：0
> 
> 时间：2013-04-11T17:32:02.827
> 
> 标签：asp.net-mvc, asp.net-mvc-4, html.actionlink

## 设置：

我正在使用`Html.ActionLink`助手为我的操作创建标签`Reset`，在控制器`PasswordReset`中，在区域中`Admin`。

## Html.ActionLink 调用（已编辑，但仍然没有乐趣）：

对 Html.ActionLink 的调用在 foreach 循环中（html 简化）：

```
foreach(var item in Model.Entities)
{
   <p>
      @Html.ActionLink("Reset Password", 
          "Reset",
          "PasswordReset", 
          new {area="Admin", 
               userName=item.UserName, 
               email=item.Email, 
               roles=item.Roles},
          null)
   </p>
} 
```

## 我的行动：

```
[HttpGet]
        public virtual ActionResult Reset(string userName, string email, string roles)
        {
            if (string.IsNullOrEmpty(userName)) throw new ApplicationException("Invalid Username!");
            var ue = new UsernameEmailDTO
            {
                UserName = userName,
                Email = email,
                Roles = roles
            };
            return View(ue);
        } 
```

## 路线：

```
context.MapRoute(
            "Admin_PasswordReset",
            "Admin/Password/Reset/{userName}",
            new { controller = "PasswordReset", action="Reset", email = UrlParameter.Optional, roles = UrlParameter.Optional }
        ); 
```

## 问题：

我可以使用路由直接调用操作。

但是，我的操作链接只生成一个指向当前页面的链接。

所以我的 Html.ActionLink 代码中一定有错误。

但是什么？！

非常令人沮丧，因为我以为我已经克服了这种疼痛障碍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:44:10.657

助手正在用当前路由路径覆盖您的 url。传递 routeValues: null 作为参数来解决这个问题。

```
foreach(var item in Model.Entities)
{
    <p>
     @Html.ActionLink("Reset Password", "Reset", "PasswordReset", 
     new {
            userName = item.UserName,
            email = item.Email,
        roles = item.Roles }
    )
    </p>
} 
```

编辑：我现在看到了。问题是您的路线配置。您正在传递 3 个参数，但您的路线只需要一个。当 Html 助手创建路由时，它会采用匹配的第一条路由。

 **```
context.MapRoute(
        "Admin_PasswordReset",
        "Admin/Password/Reset/{userName}/{email}/{roles}",
        new { controller = "PasswordReset", action="Reset", email = UrlParameter.Optional, roles = UrlParameter.Optional }
    ); 
```*  *在这里找到它：[Html ActionLink 路由问题](https://stackoverflow.com/questions/4923107/html-actionlink-route-problem)**

# c# - 从 My.Resources 设置应用程序图标？

> ID：15955204
> 
> 赞同：-1
> 
> 时间：2013-04-11T17:32:07.767
> 
> 标签：c#, vb.net, visual-studio, visual-studio-2012, icons

我可以通过 my.resources 的图标资源中的代码设置应用程序图标吗？

PS：应用程序图标，不是表单图标（Me.icon =...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:04:03.670

您是否在问如何在设计时设置应用程序图标？

项目属性应用程序选项卡

# matlab - 检查大型矩阵matlab中的重复条目

> ID：15955208
> 
> 赞同：2
> 
> 时间：2013-04-11T17:32:22.073
> 
> 标签：matlab, duplicates

我有一个非常大的矩阵（901x1801），我通过组合三个相似数组的值（其中包含重复值）来生成使用数学表达式的唯一代码。矩阵充满了这些代码。

我的问题是...如何检查矩阵 (901x1801) 的每个值是否唯一且不重复一次？

或者......谁能告诉我如何通过组合三个相似元素的数组来生成矩阵，以使每个生成的值都是唯一的。

尽早答复将非常适用。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:59:13.750

使用大矩阵`M`，要获取所有唯一值，请使用：

```
uniqueValues = unique(M(:)); 
```

然后，要了解是否有任何重复值，您可以使用：

```
repeatedValuesFound = numel(uniqueValues) ~= numel(M); 
```

也就是说，如果唯一值数组与原始数组具有相同数量的元素，则原始数组的所有元素都必须是唯一的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:35:06.640

要查找 M 中重复项的位置，请使用以下代码：

```
V = M(:);                           % flatten
[Vs, Vi] = sort(V);                 % sort, Vi are indices into V
delta = Vs(2:end) - Vs(1:end-1);    % delta==0 means duplicate
dup1 = Vi(find(delta == 0));        % dup1 has indices of duplicates in V
dup2 = Vi(find(delta == 0) + 1);    % dup2 has the corresponding other 
                                    % rewrite to [row col]
[dup1(:,1) dup1(:,2)] = ind2sub(size(M), dup1);
[dup2(:,1) dup2(:,2)] = ind2sub(size(M), dup2); 
```

dup1 和 dup2 的行现在包含 M 中重复的位置。

# cors - Google Cloud Storage 上的 CORS 已损坏

> ID：15955214
> 
> 赞同：2
> 
> 时间：2013-04-11T17:32:44.660
> 
> 标签：cors, google-cloud-storage

此 curl 请求适用于 CORS：

```
> curl -H "Origin: http://DOMAIN-WE-REQUEST-FROM" https://api.github.com -s -D - -o /dev/null
HTTP/1.1 200 OK
Server: GitHub.com
Date: Thu, 11 Apr 2013 17:26:32 GMT
Content-Type: application/json; charset=utf-8
Connection: keep-alive
Status: 200 OK
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 58
X-GitHub-Media-Type: github.beta
X-Content-Type-Options: nosniff
Content-Length: 1729
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-OAuth-Scopes, X-Accepted-OAuth-Scopes
Access-Control-Allow-Origin: *
ETag: "b883d9a4fa4fe813d8daafea01b9276b"
Cache-Control: max-age=0, private, must-revalidate 
```

对 Google 启用 CORS 的域的相同请求不会发回正确的标头：

```
> curl -H "Origin: http://DOMAIN-WE-REQUEST-FROM" http://EXAMPLE.storage.googleapis.com/FILE-THAT-WAS-RETURNING-CORS-THIS-MORNING.gif -s -D - -o /dev/null
HTTP/1.1 200 OK
Server: HTTP Upload Server Built on Apr 8 2013 13:06:58 (1365451618)
Date: Thu, 11 Apr 2013 17:25:50 GMT
Cache-Control: no-cache, no-transform
Expires: Fri, 11 Apr 2014 17:25:50 GMT
Last-Modified: Thu, 24 Jan 2013 20:58:29 GMT
ETag: "7c21bc009de625eda70e50c9fea4665a"
x-goog-generation: 1359061109538000
x-goog-metageneration: 1
Content-Type: image/gif
x-goog-hash: md5=fCG8AJ3mJe2nDlDJ/qRmWg==
Accept-Ranges: bytes
Content-Length: 111711 
```

我们的 CORS 配置是正确的：

```
> gsutil getcors gs://EXAMPLE
<?xml version="1.0" ?>
<CorsConfig>
    <Cors>
        <Origins>
            <Origin>
                http://OTHER-DOMAIN
            </Origin>
            <Origin>
                http://DOMAIN-WE-REQUEST-FROM
            </Origin>
        </Origins>
        <Methods>
            <Method>
                GET
            </Method>
            <Method>
                HEAD
            </Method>
            <Method>
                OPTIONS
            </Method>
            <Method>
                PUT
            </Method>
        </Methods>
        <ResponseHeaders>
            <ResponseHeader>
                accept-encoding
            </ResponseHeader>
            <ResponseHeader>
                cache-control
            </ResponseHeader>
            <ResponseHeader>
                content-length
            </ResponseHeader>
            <ResponseHeader>
                content-type
            </ResponseHeader>
            <ResponseHeader>
                expect
            </ResponseHeader>
            <ResponseHeader>
                if-modified-since
            </ResponseHeader>
            <ResponseHeader>
                origin
            </ResponseHeader>
            <ResponseHeader>
                range
            </ResponseHeader>
            <ResponseHeader>
                referer
            </ResponseHeader>
            <ResponseHeader>
                x-goog-acl
            </ResponseHeader>
            <ResponseHeader>
                x-goog-api-version
            </ResponseHeader>
        </ResponseHeaders>
        <MaxAgeSec>
            300
        </MaxAgeSec>
    </Cors>
</CorsConfig> 
```

没有 CORS。这在生产中破坏了我们的应用程序，请回复谷歌云团队。

（谷歌已声明支持将在此处进行：[https](https://groups.google.com/forum/?fromgroups=#!topic/gs-discussion/wu7vnC-TpT4) ://groups.google.com/forum/?fromgroups=#!topic/gs-discussion/wu7vnC-TpT4 ）

# backbone.js - 下划线模板：使用空格传递主干模型属性

> ID：15955220
> 
> 赞同：2
> 
> 时间：2013-04-11T17:33:08.007
> 
> 标签：backbone.js, underscore.js

我有一个具有空格属性的模型。这似乎没问题。但是，我无法将其传递给下划线模板。

请参阅[this fiddle](http://jsfiddle.net/FGGSh/)了解我的确切问题。

```
var Person = Backbone.Model.extend({
    defaults: {
    'first name' : 'Mendel'
}
});
var person = new Person();
var template = _.template("Hello <%= 'first name' %>!");
console.log(person.get('first name'));
// Possible ??
console.log(template(person.attributes)); 
```

尝试寻找解决方案，但到目前为止没有运气。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T18:44:28.967

根本问题是[`_.template`](http://underscorejs.org/#template)：

> 默认情况下，**模板**`with`通过语句将数据中的值放在本地范围内。

所以你在里面使用的所有东西都`<%= ... %>`被认为是一个有效的 JavaScript 变量名。你`first name`不是一个有效的 JavaScript 变量名，所以一切都崩溃了。

一个快速的解决方案是手动命名所有内容，以便您可以`[]`用来获取您的属性，从而避免“JavaScript 变量名不能包含空格”问题：

```
var template = _.template("Hello <%= person['first name'] %>!");
console.log(template({ person: person.attributes})); 
```

演示：http: [//jsfiddle.net/ambiguous/5v7XQ/](http://jsfiddle.net/ambiguous/5v7XQ/)

如果您不介意升级下划线（一个好主意），那么您可以使用以下[`data`选项](http://underscorejs.org/#template)：

> **但是，您可以使用变量**设置指定单个变量名称。这可以显着提高模板的渲染速度。
> 
> ```
> _.template("Using 'with': <%= data.answer %>", {answer: 'no'}, {variable: 'data'});
> => "Using 'with': no" 
> ```

然后你可以这样做：

```
var template = _.template("Hello <%= person['first name'] %>!", null, { variable: 'person' });
console.log(template(person.attributes)); 
```

演示：http: [//jsfiddle.net/ambiguous/NXhSN/](http://jsfiddle.net/ambiguous/NXhSN/)

另一种选择是停止使用名称中包含空格的属性。如果您的所有模型属性名称也是有效的 JavaScript 变量名称，那么问题就会消失。

# python - 在 C 中解包 (r,g,b) 原始像素缓冲区

> ID：15955226
> 
> 赞同：0
> 
> 时间：2013-04-11T17:33:43.523
> 
> 标签：python, c, arrays, bitmap, ctypes

目前正在尝试将 C 用于以前在 python (pypy) 中完成的工作。我想我会尝试用 C 语言编写它（以获得最佳速度），并使用 ctypes 进行通信。

现在我想做的是从位图（bmp 文件）中获取像素缓冲区，将其发送到 C 函数，该函数将原始缓冲区转换为 R、G、B 值的平面数组并将其返回给 python。但是在尝试将“缓冲区”转换为 R、G、B 值时，我遇到了困难。在 python 中，我会简单地使用“struct”模块：`B,G,R = struct.unpack('<BBB', buffer[i:i+3])`

我应该如何在 C 中做同样的事情？

**Python：**

```
from bmplib import Bitmap
import ctypes
lib = ctypes.CDLL('_bitmap.dll') 

bmp = Bitmap()
bmp.open('4x4.bmp')
buf = bmp._rawAsArray() #Returns a array.array() of char (raw pixel-data)

addr, count = buf.buffer_info()
lib.getData.argtypes = []

arr = ctypes.cast(addr, ctypes.POINTER(ctypes.c_char))
lib.getData(arr, count) #Does not return anything yet.. 
```

**C 尝试转换像素失败：**

```
#include <stdio.h>

void getData(char *, const int);
void getData(char * array, const int length) {
  int i = 0;
  while(i < length) {
    /* ----- Clearly wrong as i got some HUGE number----- */
    printf("%d, ", ((int *) array)[i]   << 8); //B 
    printf("%d, ", ((int *) array)[i+1] << 8); //G
    printf("%d\n", ((int *) array)[i+2] << 8); //R
    i += 3;
  }
  //return total;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:39:59.987

目前尚不清楚您在`char * array`. 假设每个数组元素有一个字节，则不需要进行任何移位：

```
 while(i < length) {
    printf("%d, ", (unsigned int)array[i++]); //B 
    printf("%d, ", (unsigned int)array[i++]); //G
    printf("%d\n", (unsigned int)array[i++]); //R
  } 
```

但是请记住，[BMP](http://en.wikipedia.org/wiki/BMP_file_format#Pixel_format)图像的每一行都可以有一些填充，因此这仅在`array`对应于单行`length`且不包括填充时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:39:39.427

你所做`array[i] << 8`的与向左移动`array[i]`8 位或乘以`array[i]`256 相同。这就是为什么你会得到巨大的数字。摆脱，`<< 8`你应该没事。

`int`此外，在取消引用数组之后进行类型转换。它应该是`(int)array[i]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:40:18.830

您将`char`-pointer 转换为`int`-pointer，这会导致奇怪的数字。您不需要强制转换它，但如果您必须强制转换结果。像这样：

```
printf("%d, ", (char)(array[i] << 8)); //B 
```

# css - 带有 videoJS 的嵌入式视频 - Safari 的大小问题

> ID：15955227
> 
> 赞同：0
> 
> 时间：2013-04-11T17:33:44.087
> 
> 标签：css, html, video, safari

好的，我有一些与 Chrome 完美配合的东西，但在 Safari 中它有点奇怪。

第一个视频播放得很好，完全符合我的要求，但在页面下方我有另一个嵌入视频，即使我对每个视频都使用完全相同的代码，除了“自动播放”和视频文件当然，第二个真的很大，好像是两倍高。。

这就像它每次都增加了100％。

这是第一个的 html

```
<video autoplay id="my_video_1" class="video-js vjs-default-skin" controls
preload="auto" poster="../images/posters/1969.png"
data-setup="{}"> 
<source src="../videos/1969.mp4" type='video/mp4'>
<source src="../videos/1969.webm" type='video/webm'>
</video> 
```

第二个

```
<video id="anothervideo" class="video-js vjs-default-skin" controls
preload="auto" poster="../images/posters/1969.png"
data-setup="{}"> 
<source src="../videos/video-2.mp4" type='video/mp4'>
<source src="../videos/video-2.webm" type='video/webm'>
</video> 
```

认为它可能对导致问题的两者都使用相同的 id，所以使用了两个单独的，但没有做任何事情，这是 ids 的 css

```
min-height: 100%; min-width: 100%; height: auto !important; width: auto !important; 
```

不知道发生了什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:41:54.260

我错过了关于它在 Safari 中的那部分。但我确实有一个解决方案给你。因此，它似乎确实是导致问题的最小高度。你可以做的是添加这个CSS：

```
#my_video_2{
    min-height:inherit;
} 
```

似乎在第二个视频上出现了问题，但第一个视频需要正确显示。

看看这是否有效。

# ruby-on-rails - simple_form 发送参数

> ID：15955239
> 
> 赞同：3
> 
> 时间：2013-04-11T17:34:19.443
> 
> 标签：ruby-on-rails, simple-form

我正在尝试发送一个额外的参数，使用 simple_form 在 rails 中提交表单，我认为这可以解决问题：

`<%= simple_form_for(@user, :groupId => 1) do |f| %>`

但在 tne 控制器中，该参数被忽略

[我在这里](https://stackoverflow.com/questions/9828416/simple-form-send-a-extra-parameter)找到了答案，但我真的很想有一个更好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:40:37.787

怎么样：

```
<%= simple_form_for @user, url: user_path(@user, :groupId => 1) do |f| %> 
```

`simple_form_for`有类似的用法`form_for`。请参阅[http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for)

# asp.net - 无法在远程 IIS 上工作

> ID：15955243
> 
> 赞同：5
> 
> 时间：2013-04-11T17:34:39.210
> 
> 标签：asp.net, iis, glimpse

我已经尝试了我能想到的一切，所以我转向 SO。我无法让 Glimpse 在远程 IIS 服务器上工作。我正在使用带有 ADO、ASP.NET、EF5 和 Mvc4 扩展的 Glimpse 1.2。当我使用 VS 开发服务器在本地启动 Web 应用程序时，一切都运行良好。但是，在部署到我们的远程开发服务器时，我似乎无法显示 Glimpse 图标。这是我尝试并注意到的：

*   我忽略了我的 LocalPolicy `web.config`：

    ```
    <glimpse defaultRuntimePolicy="On" endpointBaseUri="~/Glimpse.axd">
        <inspectors>
            <ignoredTypes>
                <add type="Glimpse.Mvc.Inspector.DependencyInjectionInspector, Glimpse.Mvc4" />
                <add type="Glimpse.AspNet.Policy.LocalPolicy, Glimpse.AspNet"/>
            </ignoredTypes>
        </inspectors>
    </glimpse> 
    ```

*   我能够访问 /Glimpse.axd 并按下启用按钮没有问题

*   使用内容设置 cookie：

    ```
    glimpsePolicy
    On
    backofficetest/
    1088
    2027053056
    32990064
    3189135193
    30291671
    * 
    ```

*   打开 Glimpse 日志不会显示任何错误或警告消息。它为每个请求生成以下内容：

`2013-04-11 12:43:06.8992 | DEBUG | RuntimePolicy set to 'Off' by IRuntimePolicy of type 'Glimpse.AspNet.Policy.LocalPolicy' during RuntimeEvent 'BeginRequest'.`

*   Fiddler 验证在请求期间没有调用任何与 Glimpse 相关的资源。

*   页面源中没有任何与 Glimpse 相关的内容。

我确定我只是错过了某个地方的设置，但这让我发疯。有人有想法么？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T18:04:27.823

您的配置需要更新，如下所示：

```
<glimpse defaultRuntimePolicy="On" endpointBaseUri="~/Glimpse.axd">
  <inspectors> 
    <ignoredTypes> 
      <add type="Glimpse.Mvc.Inspector.DependencyInjectionInspector, Glimpse.Mvc4" /> 
    </ignoredTypes> 
  </inspectors>
  <runtimePolicies>
    <ignoredTypes>
        <add type="Glimpse.AspNet.Policy.LocalPolicy, Glimpse.AspNet"/>
    </ignoredTypes>
  </runtimePolicies>
</glimpse> 
```

运行时策略和检查器是两个不同的东西，并且在它们自己的节点中进行配置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-19T12:58:26.593

甚至我也有类似的问题。它在我的本地机器上工作，但在 IIS 上托管时它不起作用。我使用[了 nikmd23](https://stackoverflow.com/users/107289/nikmd23)代码并且它有效，后来意识到只有`<runtimePolicies>`是必需的。

这对我有用：

```
<glimpse defaultRuntimePolicy="On" endpointBaseUri="~/Glimpse.axd">      
  <runtimePolicies>
    <ignoredTypes>
        <add type="Glimpse.AspNet.Policy.LocalPolicy, Glimpse.AspNet"/>
    </ignoredTypes>
  </runtimePolicies>
</glimpse> 
```

# c# - 选项的标准操作 绑定和映射之外的单子

> ID：15955248
> 
> 赞同：5
> 
> 时间：2013-04-11T17:34:55.993
> 
> 标签：c#, functional-programming, monads

我正在使用`option<`a`>`Petricek 书（真实世界函数式编程）中 F# monad 的 C# 实现：

```
internal enum OptionType { Some, None }

internal abstract class Option<T>
{
    private readonly OptionType tag;

    protected Option(OptionType tag)
    {
        this.tag = tag;
    }

    public OptionType Tag
    {
        get { return this.tag; }
    }

    public bool MatchNone()
    {
        return this.Tag == OptionType.None;
    }

    public bool MatchSome(out T value)
    {
        if (this.Tag == OptionType.Some)
        {
            value = ((Some<T>)this).Value;
        }
        else
        {
            value = default(T);
        }
        return this.Tag == OptionType.Some;
    }
}

internal sealed class None<T> : Option<T>
{
    public None() : base(OptionType.None) { }
}

internal sealed class Some<T> : Option<T>
{
    private readonly T value;

    public Some(T value)
        : base(OptionType.Some)
    {
        this.value = value;
    }

    public T Value
    {
        get
        {
            return this.value;
        }
    }
}

internal static class Option
{
    public static Option<T> None<T>()
    {
        return new None<T>();
    }

    public static Some<T> Some<T>(T value)
    {
        return new Some<T>(value);
    }
}

internal static class OptionExtensions
{
    public static Option<T2> Bind<T1, T2>(this Option<T1> option, Func<T1, Option<T2>> func)
    {
        T1 value1;
        if (option.MatchSome(out value1))
        {
            return func(value1);
        }
        return Option.None<T2>();
    }

    public static Option<T2> Map<T1, T2>(this Option<T1> option, Func<T1, T2> func)
    {
        T1 value1;
        if (option.MatchSome(out value1))
        {
            return Option.Some(func(value1));
        }
        return Option.None<T2>();
    }
} 
```

**现在我需要一个操作来提取值（如果不是`None`或返回默认值）。**

我想知道这是否可以使用 and 的组合`Map`，`Bind`但我认为不是。

所以我回到[F# 文档](http://msdn.microsoft.com/en-us/library/dd233245.aspx)，它给了我一些其他有用的扩展方法的提示，但不完全是我需要的。

我设计了这个功能来满足我的需要：

```
public static T2 Return<T1, T2>(this Option<T1> option, Func<T1, T2> func, T2 noneValue)
{
    T1 value1;
    if (option.MatchSome(out value1))
    {
        return func(value1);
    }
    return noneValue;
} 
```

因此，为了不重新发明轮子，问题是：是否有参考或通用功能模式来定义`Option<T>`monad 上的操作？*根据需要添加新操作是否正确？*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T19:11:04.507

您始终可以提取值的 monad 通常是*comonad*。你知道 monad`M<T>`有方法（在 C# 语法中）

```
static M<T> Unit<T>(T t) { ... }
static M<R> Bind<A, R>(M<A> ma, Func<A, M<R>> func) { ... } 
```

或者，或者，你可以用

```
static M<T> Unit<T>(T t) { ... }
static M<R> FMap<A, R>(M<A> ma, Func<A, R> func) { ... }
static M<T> Join<T>(M<M<T>> mmt) { ... } 
```

这两种表征是等价的；您可以构建另一个的给定实现。

一个comonad有操作

```
static T Extract<T>(M<T> mt) { ... } 
static M<R> Extend<A, R>(M<A> ma, Func<M<A>, R> func) { ... } 
```

Extract 是 Unit 的“对立面”，Extend 是 Bind 的“对立面”。

或者，您也可以使用以下操作定义一个comonad：

```
static T Extract<T>(M<T> mt) { ... } 
static M<R> FMap<A, R>(M<A> ma, Func<A, R> func) { ... }
static M<M<T>> Duplicate<T>(M<T> mt) { ... } 
```

其中 Duplicate 是 Join 的“对立面”。同样，这两种表征是等价的；给定一个，您可以构建另一个。

显然，您不能仅在给定 Bind、Unit、FMap 和 Join 的情况下实现 Extract，因为*它们都不会以任何方式返回 T*，并且它是您需要的 T。

对于任何一个版本的 comonad，您遇到的问题是可选的 monad 真的不是 comonad，因为如果 monadic 值“缺失”，则没有自然的方法来实现 Extract。

现在，你可以做`Nullable<T>`你想做的事。`Nullable<T>.GetValueOrDefault()`如果有则返回值，如果没有则返回`default(T)`。如果你想把 Optional 变成一个comonad，这可能是你可以在这里做的最好的事情。

# html - CSS 类不会隐藏 div 内的内容

> ID：15955249
> 
> 赞同：0
> 
> 时间：2013-04-11T17:35:00.163
> 
> 标签：html, css

我写了这个css代码：

```
body.product.70 div.mydiv {
display:none
} 
```

和 HTML：

```
<body class="product 70">
    <div class="mydiv">
       content
    </div>
</body> 
```

但它不想隐藏。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:36:29.250

那么对于初学者来说，你的`class`属性缺少一个结束引号......

编辑：除此之外，您正在应用两个类名，其中一个是`70`. 这不是一个有效的 CSS 类名。CSS 类必须以连字符、下划线或字母开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:38:10.577

```
<body class="product 70">
    <div class="mydiv">
       content
    </div>
</body>

.product .mydiv {
display:none
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:50:07.667

在 css 上调用时不需要指定太多的类。如果每个产品都有 .product 类，则无需在 css 上使用“70”类：

```
body.product {
    display:none;
} 
```

我建议您使用更具语义的 html，例如：

```
<body>
    <div class="product">
        <div class="mydiv">
            Hello
        </div>   
    </div>
</body> 
```

最后是css代码：

```
.product{
    display:none;
} 
```

我建议你不要只在类名上使用数字。也许一个字母后跟一个数字对开发人员来说会更明确:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:48:41.320

类可以以数字开头，但为了使这些类可读，第一个数字需要转义，显然是 \3# 后跟一个空格，在这种情况下：

```
body.product.\37 0 div.mydiv {
    display:none
} 
```

这是小提琴：http: [//jsfiddle.net/FaruC/](http://jsfiddle.net/FaruC/)

在 CSS1 中，类名可以以数字（“.55ft”）开头，除非它是尺寸（“.55in”）。在 CSS2 中，此类类被解析为未知维度（以允许将来添加新单位）。为了使“.55ft”成为一个有效的类，CSS2 要求第一个数字被转义（“.\35 5ft”）——http: [//www.w3.org/TR/CSS21/grammar.html](http://www.w3.org/TR/CSS21/grammar.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T18:06:31.697

**首先 70 不是一个有效的类名。**

而不是给你的身体上课。给它一个 ID，如此[处所述](http://css-tricks.com/id-your-body-for-greater-css-control-and-specificity/)

有几种方法可以实现你想要的

直接给类添加display none的属性

```
.mydiv{
display:none;
} 
```

或者，如果您要上多个此类课程。指定只有 .product 类中的类才能获得此样式属性

```
.product .mydiv{
display:none;
}
OR
body.product .mydiv{
display:none;
} 
```

# javascript - 用于创建 js 应用程序的假服务器

> ID：15955260
> 
> 赞同：1
> 
> 时间：2013-04-11T17:35:52.807
> 
> 标签：javascript, api, backbone.js, mocking

当我创建一个项目（我创建带有主干的 js 应用程序）时，有时服务器还没有准备好给我正确的响应。我们创造我们的边平行。所以我的请求需要假数据。我需要收藏和完整的restapi。

所以我想问你，什么是好的解决方案？例如，我可以使用沙发数据库吗？我听说他们的 API 很完整，我可以很容易地创建集合和文档。我也尝试使用 apiary.io 但它不是很有用。请告诉我你是如何解决这个问题的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:52:52.873

看看[lineman.js](https://github.com/testdouble/lineman)。它运行一个节点服务器，因此您可以设置路由以仅针对这种类型的场景返回 json 数据。还有一个简短的介绍[视频](http://www.youtube.com/watch?v=BmZ4XRErYAI)。该工具还可以捆绑和缩小 js 以及减少编译。所有这些都是可配置的，因为它通过 grunt 驱动。

# xml - XSLT 逻辑排序 - 放置图像

> ID：15955275
> 
> 赞同：0
> 
> 时间：2013-04-11T17:36:49.913
> 
> 标签：xml, xslt

```
CASE 1: 

<Loop type="MAIN01" name="MAIN01 Data">
            <RepeatingSegment type="MAIN01" name="MAIN REP SEG">
            <Segment type="MAIN01" name="MAIN SEG">
                <Element type="350" name="Element_Of_Main01"  param=" ">1</Element>
            </Segment>
            </RepeatingSegment>
            <Loop type="POOT" name="POOT Data">
            <RepeatingSegment type="POOT" name="POOT REP SEG">
            <Segment type="POOT" name="POOT SEG">
                <Element type="349" name="Element_Of_POOT" dt="I" param=" ">F</Element>
            </Segment>
            </RepeatingSegment>
            </Loop>
            <Loop type="SAC" name="Service, Promotion, Allowance, or Charge Information">
            <RepeatingSegment type="SAC" name="Service, Promotion, Allowance, or Charge Information - REP SEG">
            <Segment type="SAC" name="Service, Promotion, Allowance, or Charge Information">
                <Element type="248" name="Allowance or Charge Indicator" dt="I" >C</Element>
                </Segment>
            </RepeatingSegment>
            </Loop>
</Loop>             

CASE 2: 
    <Loop type="MAIN01" name="MAIN01 Data">
            <RepeatingSegment type="MAIN01" name="MAIN REP SEG">
            <Segment type="MAIN01" name="MAIN SEG">
                <Element type="350" name="Element_Of_Main01"  param=" ">1</Element>
            </Segment>
            </RepeatingSegment>
            <Loop type="POOT" name="POOT Data">
            <RepeatingSegment type="POOT" name="POOT REP SEG">
            <Segment type="POOT" name="POOT SEG">
                <Element type="349" name="Element_Of_POOT" dt="I" param=" ">F</Element>
            </Segment>
            </RepeatingSegment>
            </Loop>
</Loop> 
```

场景，我想在案例 1 的“SAC”之前和案例 2 的“POOT”之前插入一个图片。

当前现有的逻辑只是通过外循环 MAIN01 ，在段 type = "MAIN_01" 的末尾插入图像。这意味着在案例 1 中，图像在“POOT”之前显示得非常好。

```
 <xsl:if test="(ancestor::Loop[1]/@type = 'MAIN01' or ancestor::Loop[2]/@type = 'MAIN01') and (ancestor::RepeatingSegment/following-sibling::Loop or ancestor::RepeatingSegment[1]/following-sibling::RepeatingSegment[1]/@type != 'MAIN01')">
   IMAGE ADDED HERE !! 
</xsl:if>       

Expected: 
        case 1:
             MAIN01 -> POOT -> IMAGE --> SAC
        case 2: 
            MAIN01 ->IMAGE --> POOT

Current status :
        case 1:
             MAIN01 -> IMAGE --> POOT -> SAC
        case 2: 
            MAIN01 -> IMAGE --> POOT 
```

先感谢您。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:19:58.927

看起来您希望在作为 Loop 元素的子元素的最后一个 Loop 元素之前有一个图像。

```
<xsl:template match="Loop">
    <xsl:if test="parent::Loop
            and (
            generate-id(parent::Loop/Loop[last()]) 
            = 
            generate-id(.) )">

    -- image--
    </xsl:if>
    <xsl:apply-templates />
</xsl:template> 
```

# mongodb - Mongo 聚合查询中已创建属性的投影 _id 的空结果

> ID：15955281
> 
> 赞同：0
> 
> 时间：2013-04-11T17:37:07.227
> 
> 标签：mongodb, aggregation-framework

所以我试图让我的数据按月细分，并遵循我在一些 SO 帖子中看到的模式，但是 _id 结果返回为空，我似乎无法理解为什么。我的模型中的日期确实是 Date 类型。

```
{
$match: {
  date: {$gte: startDate, $lte: endDate }
},
$project: {
    'date': 1
  , 'fatigue.percent': 1
  , 'fitness.percent': 1
  , 'maintenance.percent': 1
  , 'substances.percent': 1
  , 'unsafe.percent': 1
  , 'created_on': {
      month: { '$month': '$date' }
    }
}
,$group: {
      _id: '$created_on'
    , averageFatigue: {$avg : '$fatigue.percent'}
    , averageFitness: {$avg : '$fitness.percent'}
    , averageMaintenance: {$avg : '$maintenance.percent'}
    , averageSubstances: {$avg : '$substances.percent'}
    , averageUnsafe: {$avg : '$unsafe.percent'}
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:14:17.077

$project 和 $group 的管道运算符表达式必须用花括号括起来，如 $match：

```
db.test.aggregate(
{
  $match: {
            date: {$gte: startDate, $lte: endDate }
          }
},
{ 
  $project: {
    'date': 1
  , 'fatigue.percent': 1
  , 'fitness.percent': 1
  , 'maintenance.percent': 1
  , 'substances.percent': 1
  , 'unsafe.percent': 1
  , 'created_on': {
                    month: { '$month': '$date' }
                  }
  }
},
{
  $group: {
      _id: '$created_on'
    , averageFatigue: {$avg : '$fatigue.percent'}
    , averageFitness: {$avg : '$fitness.percent'}
    , averageMaintenance: {$avg : '$maintenance.percent'}
    , averageSubstances: {$avg : '$substances.percent'}
    , averageUnsafe: {$avg : '$unsafe.percent'}
  }
}
) 
```

# iphone - 使用 NSLayoutConstraints 在 UITextView 中将 UILabel 居中

> ID：15955284
> 
> 赞同：3
> 
> 时间：2013-04-11T17:37:13.947
> 
> 标签：iphone, ios, cocoa-touch, autolayout

我正在尝试将 a 添加`UILabel`到 a`UITextView`并使其居中于 textView 的顶部。它不是居中，而是放在左侧。我怀疑这是因为标签的内在大小优先于约束尝试将其拉伸到整个视图。不知道如何解决这个问题。这是代码：

```
self.titleLabel = [[UILabel alloc] initWithFrame:CGRectZero];
self.titleLabel.translatesAutoresizingMaskIntoConstraints = NO;
self.titleLabel.textAlignment = NSTextAlignmentCenter;
self.titleLabel.text = @"Some text that should be centered in the textView";
[self addSubview:self.titleLabel];

NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(_titleLabel);

NSArray *hConstraint = 
   [NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[_titleLabel]-|"
                                               options:0 metrics:nil
                                                 views:viewsDictionary];
[self addConstraints:hConstraint];

NSArray *vConstraint = 
   [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-(-50)-[_titleLabel]"
                                               options:0 metrics:nil
                                                 views:viewsDictionary];
[self addConstraints:vConstraint]; 
```

这是 iPad 模拟器中标签如何左对齐的片段：

![在此处输入图像描述](https://i.stack.imgur.com/PcRmV.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:39:47.867

您不能用于`constraintsWithVisualFormat`创建居中约束。您必须将视图的*中心*设置为某个位置/关系，而`constraintsWithVisualFormat`字符串语法不允许您这样做。您必须使用`constraintWithItem:attribute:...`（或在 nib/storyboard 中设置）。

这是将一个视图水平居中于另一个视图的代码：

```
NSLayoutConstraint* con =
 [NSLayoutConstraint
  constraintWithItem:subview attribute:NSLayoutAttributeCenterX
  relatedBy:0
  toItem:superview attribute:NSLayoutAttributeCenterX
  multiplier:1 constant:0];
[superview addConstraint:con]; 
```

要将子视图设置为在 nib 中居中，请使用编辑器菜单将其在其父视图中水平或垂直居中，然后摆脱任何多余的约束（如果有的话 - nib 编辑器通常非常适合摆脱这些当您居中某物时自动）。

哦，对不起，还有一件事：关于约束的美妙之处之一是您可以约束到*任何*其他视图。标签可能在文本视图的*前面*，但这并不意味着它必须被限制在文本视图中。如果你愿意，它可以，但我认为它会随着文本视图滚动。

那应该让你开始。我的书中还有更多内容：[http ://www.aeth.com/iOSBook/ch14.html#_autolayout](http://www.apeth.com/iOSBook/ch14.html#_autolayout)

# c# - 使用 c# 解析 JSON，无需密钥

> ID：15955287
> 
> 赞同：0
> 
> 时间：2013-04-11T17:37:19.347
> 
> 标签：c#, json, serialization, json.net

好的，所以我之前一直被 JSON.NET 困住，但我又被困住了，多亏了你们帮助我的最后一个问题，我成功地完成了我的项目：3。但是现在我需要反序列化一段实际上没有密钥的 JSON。好吧，但它是一个整数，它可以在 0 - 50 之间变化，这意味着我不知道如何做到这一点。我尝试使用 IDictionary，但失败得很惨……无论如何，这是 JSON：

```
{
"response": {
    "success": 1,
    "current_time": 1362339098, // this will return the time when cache was generated
    "prices": {
        "35": { // defindex
            "11": { // quality
                "0": { // price index ( crate # or unusual effect, 0 when not used )
                    "current": { // current price
                        "currency": "keys",
                        "value": 39,
                        "value_high": 41,
                        "date": 1357515306 // date when the price was updated
                    },
                    "previous": { // previous price
                        "currency": "keys",
                        "value": 37,
                        "value_high": 39
                    }
                }
            },
            "3": { // quality
                "0": { // price index
                    "current": {
                        "currency": "metal",
                        "value": 0.33,
                        "value_high": 0.66
                    }
                }
            }
        },
        "5002": { // refined metal, useful for converting usd prices into metal
            "6": {
                "0": {
                    "current": {
                        "currency": "usd",
                        "value": 0.39,
                        "value_high": 0.42,
                        "date": 1358090106
                    }
                }
            }
        },                          
        "5022": { // one of the crate defindex
            "6": {
                "1": { // crate #1
                    "current": {
                        "currency": "metal",
                        "value": 1.33,
                        "value_high": 1.55,
                        "date": 1357515175
                    }
                }
            }
        }
    }
}
} 
```

（数据格式......再次......）

这是我可悲的尝试：

```
public class Json1 {
    public Json2 response { get; set; }
}
public class Json2 {
    public int success { get; set; }
    public string current_time { get; set; }
    public IDictionary<int, Json3> prices { get; set; }
}
public class Json3 {

}
public class Json4 {

}
public class Json5 {
    public Json6 current { get; set; }
}
public class Json6 {
    public string currency { get; set; }
    public string value { get; set; }
    public string value_high { get; set; }
} 
```

Json 3 和 4 是空的，因为我不断删除以尝试不同的东西......

但是，是的......我已经习惯了 json，但无法弄清楚这一点。任何友好的回应都非常感谢提前。

（我知道我在一些浮点数和长整数上使用了字符串，这是故意的，但我想可以更改）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:29:26.123

我个人使用 Newtonsoft.Json 非常好，你可以在[http://json.codeplex.com/](http://json.codeplex.com/)找到它， 它处理许多其他东西之间的匿名类型和 linq。

还有一个很好的文档。你应该没问题：

只是一个简单的例子：

序列化：

```
var listId = new List<int>();
listId.Add(1);
listId.Add(2);
listId.Add(3);
String jsonList = JsonConvert.SerializeObject(listId); 
```

反序列化：

```
List<int> listID = JsonConvert.DeserializeObject<List<int>>(JsonListOfID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:30:55.333

如果你有 Visual Studio 2012，你可以编辑 -> 选择性粘贴 -> 将 JSON 粘贴为类，它会用你的 JSON 生成它。尽管在这种情况下，这可能对您没有帮助，因为属性名称是动态的。也许结构有帮助。另一种选择可能是将响应解析为 JToken，然后使用 linq 获取数据。

```
public class Rootobject
{
public Response response { get; set; }
}

public class Response
{
public int success { get; set; }
public int current_time { get; set; }
public _35 _35 { get; set; }
public _5002 _5002 { get; set; }
public _5022 _5022 { get; set; }
}

public class _35
{
public _11 _11 { get; set; }
public _3 _3 { get; set; }
}

public class _11
{
public _0 _0 { get; set; }
}

public class _0
{
public Current current { get; set; }
public Previous previous { get; set; }
}

public class Current
{
public string currency { get; set; }
public int value { get; set; }
public int value_high { get; set; }
public int date { get; set; }
}

public class Previous
{
public string currency { get; set; }
public int value { get; set; }
public int value_high { get; set; }
}

public class _3
{
public _01 _0 { get; set; }
}

public class _01
{
public Current1 current { get; set; }
}

public class Current1
{
public string currency { get; set; }
public float value { get; set; }
public float value_high { get; set; }
}

public class _5002
{
public _6 _6 { get; set; }
}

public class _6
{
public _02 _0 { get; set; }
}

public class _02
{
public Current2 current { get; set; }
}

public class Current2
{
public string currency { get; set; }
public float value { get; set; }
public float value_high { get; set; }
public int date { get; set; }
}

public class _5022
{
public _61 _6 { get; set; }
}

public class _61
{
public _1 _1 { get; set; }
}

public class _1
{
public Current3 current { get; set; }
}

public class Current3
{
public string currency { get; set; }
public float value { get; set; }
public float value_high { get; set; }
public int date { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T20:02:56.527

你在正确的轨道上`IDictionary`。这个 JSON 结构实际上是一堆嵌套的字典。尝试像这样制作您的课程：

```
public class Json1
{
    public Json2 response { get; set; }
}
public class Json2
{
    public int success { get; set; }
    public string current_time { get; set; }
    public IDictionary<int, IDictionary<int, IDictionary<int, Json5>>> prices { get; set; }
}
public class Json5
{
    public Json6 current { get; set; }
}
public class Json6
{
    public string currency { get; set; }
    public string value { get; set; }
    public string value_high { get; set; }
} 
```

你可以像这样反序列化它：

```
Json1 obj = JsonConvert.DeserializeObject<Json1>(json); 
```

反序列化后，您可以获得如下值：

```
foreach (KeyValuePair<int, IDictionary<int, IDictionary<int, Json5>>> price in obj.response.prices)
{
    Console.WriteLine("price index: " + price.Key);
    foreach (KeyValuePair<int, IDictionary<int, Json5>> quality in price.Value)
    {
        Console.WriteLine("\t quality: " + quality.Key);
        foreach (KeyValuePair<int, Json5> index in quality.Value)
        {
            Console.WriteLine("\t\t index: " + index.Key);
            Console.WriteLine("\t\t\t currency: " + index.Value.current.currency);
            Console.WriteLine("\t\t\t value: " + index.Value.current.value);
            Console.WriteLine("\t\t\t value_high: " + index.Value.current.value_high);
        }
    }
} 
```

上述输出（以表明它有效）：

```
price index: 35
        quality: 11
                index: 0
                        currency: keys
                        value: 39
                        value_high: 41
        quality: 3
                index: 0
                        currency: metal
                        value: 0.33
                        value_high: 0.66
price index: 5002
        quality: 6
                index: 0
                        currency: usd
                        value: 0.39
                        value_high: 0.42
price index: 5022
        quality: 6
                index: 1
                        currency: metal
                        value: 1.33
                        value_high: 1.55 
```

# css - 用 Rails 3 和 Foundation 4 覆盖 a:visited 的正确方法是什么？

> ID：15955292
> 
> 赞同：6
> 
> 时间：2013-04-11T17:37:40.967
> 
> 标签：css, ruby-on-rails-3, sass, zurb-foundation

我正在使用 Foundation 4 开发一个新的 Rails 项目。我使用 Foundation 的类将链接变成了一个按钮：

```
<%= link_to 'New Item', new_item_path, :class => "small button round" %> 
```

按钮出现了，看起来像我想要的：

![在此处输入图像描述](https://i.stack.imgur.com/ibdr0.png)

但是，一旦我访问了链接，它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/OGr1Y.png)

不太好。

我查看了 CSS，发现访问链接的颜色是在scaffolds.css.scss 中设置的：

```
a {
  color: #000;
  &:visited {
    color: #666;
  }
  &:hover {
    color: #fff;
    background-color: #000;
  }
} 
```

如何正确取消链接上的这种颜色变化？我知道我可以删除该`&:visited`部分，但这似乎太暴力了。我认为必须有一种更优雅的方式，但我的 CSS/SCSS/Foundation 知识太薄了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-28T18:20:46.657

如果脚手架.css.scss 只是由`rails g scaffold`命令生成的，请删除它。使用 zurb-foundation 时它可能是多余的，并且可能会破坏其他一些东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T17:51:40.033

无法删除访问过的伪选择器，因为它是在您提供页面后由用户的浏览器添加的。如果要覆盖所有链接的颜色更改，请删除 &:visited。如果您只想为按钮覆盖它，请添加：

```
a.button {
  &:visited {
    color: #fff !important;
  }
} 
```

这将仅更改按钮类的访问链接颜色。

# php - 在 Laravel 中显示已注册的路由

> ID：15955295
> 
> 赞同：17
> 
> 时间：2013-04-11T17:37:43.257
> 
> 标签：php, laravel

在此截屏视频中：[https](https://tutsplus.com/lesson/displaying-registered-routes/) ://tutsplus.com/lesson/displaying-registered-routes/ Jeffrey Way 演示了他创建的命令，并在描述中链接到 github。然而，有一个更新说它现在已经融入了 Laravel 4 核心，但是我已经搜索过它无济于事。

一般的想法是列出所有路由和绑定到它们的操作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-12-12T15:42:01.783

控制台命令：

```
php artisan routes (laravel 4)
php artisan route:list (laravel 5)

+--------+----------------------------------------------------+-----------------------+----------------------------------------------+--------------------------------------------------------------------+---------------+
| Domain | URI                                                | Name                  | Action                                       | Before Filters                                                     | After Filters |
+--------+----------------------------------------------------+-----------------------+----------------------------------------------+--------------------------------------------------------------------+---------------+
|        | GET /admin/configuration                           |                       | ConfigurationController@index                | auth, keyMaster:configuration                                      |               |
|        | POST /admin/configuration                          |                       | ConfigurationController@update               | auth, keyMaster:configuration                                      |               |
|        | GET /admin/logs/errors                             |                       | LogsController@errors                        | auth, keyMaster:logs/errors                                        |               |
|        | GET /admin/logs/errors/{name}                      |                       | LogsController@errors                        | auth, keyMaster:logs/errors                                        |               |
|        | DELETE /admin/logs/errors                          |                       | LogsController@delete                        | auth, keyMaster:logs/errors                                        |               |
|        | GET /admin/logs/events                             |                       | LogsController@events                        | auth, keyMaster:logs/events                                        |               |
|        | GET /admin/logs/events/data                        |                       | LogsController@eventsData                    | auth, keyMaster:logs/events                                        |               | 
```

ETC...

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-05-15T08:49:01.523

我创建了一个路由，它将在 html 表中列出每条路由及其各自的详细信息。

```
Route::get('routes', function() {
    $routeCollection = Route::getRoutes();

    echo "<table style='width:100%'>";
    echo "<tr>";
        echo "<td width='10%'><h4>HTTP Method</h4></td>";
        echo "<td width='10%'><h4>Route</h4></td>";
        echo "<td width='80%'><h4>Corresponding Action</h4></td>";
    echo "</tr>";
    foreach ($routeCollection as $value) {
        echo "<tr>";
            echo "<td>" . $value->getMethods()[0] . "</td>";
            echo "<td>" . $value->getPath() . "</td>";
            echo "<td>" . $value->getActionName() . "</td>";
        echo "</tr>";
    }
    echo "</table>";
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-11T17:42:07.290

您可能仍在使用旧版本的 L4 测试版。如果您下载新副本，您会在运行时看到它列出`php artisan`。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-04-08T21:23:23.917

您可以使用我的库：[asvae/laravel-api-tester](https://github.com/asvae/laravel-api-tester)：

*   [动图](https://i.imgur.com/q1AAPlh.gifv)
*   [演示](http://laravel-api-tester.asva.by/api-tester)

[![Laravel api 测试器](https://i.stack.imgur.com/NGZWA.png)](https://i.stack.imgur.com/NGZWA.png)

* * *

**要在Laravel 5+**的控制台中显示所有路由，请执行以下操作：

```
php artisan route:list 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-14T09:44:22.940

对于 Lavarel 5 和 5+ 命令是：

```
php artisan route:list 
```

对于较低版本的 Lavarel（低于 Lavarel 5），它将是：

```
php artisan routes 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-08-24T03:33:58.630

我不知道这是否有用，但我会在这里分享。

您可以在终端中使用此命令来查找 Laravel 中注册路由的总数。

```
php artisan route:list | wc -l 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-03T05:19:58.170

您可以使用以下功能`Laravel 5.8`

```
$routes = collect(\Route::getRoutes())
                    ->map(function ($route) { 
                            return  array(
                                            'domain' => $route->domain(),
                                            'method' => implode('|', $route->methods()),
                                            'uri'    => $route->uri(),
                                            'name'   => $route->getName(),
                                            'action' => ltrim($route->getActionName(), '\\'),
                                            'middleware' => collect($route->gatherMiddleware())
                                                            ->map(function ($middleware) {
                                                                return $middleware instanceof Closure ? 'Closure' : $middleware;
                                                            })->implode(','),
                                        ); 
                        }); 
```

请查看以下链接以供参考：

[https://github.com/laravel/framework/blob/5.8/src/Illuminate/Foundation/Console/RouteListCommand.php](https://github.com/laravel/framework/blob/5.8/src/Illuminate/Foundation/Console/RouteListCommand.php)

或者

您可以使用以下代码：

```
foreach (\Route::getRoutes()->getRoutes() as $route)
        {
            $action = $route->getAction();
            $uri = $route->uri();

            if (array_key_exists('controller', $action))
            {               
                // You can also use explode('@', $action['controller']); here
                // to separate the class name from the method

                if(isset($action['as']) && !empty($action['as'])){

                    $controller = explode("@",str_replace($action['namespace']."\\","",$action['controller']));

                    $controllers[$controller[0]][$action['as']] = array('router_group' => $action['middleware'], 'function' => $controller[1], 'uri' => $uri);
                }
            }
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-19T06:20:11.633

在 laravel 5.6 或更高版本上，根据 jeanfrg 的回答，使用这个：

```
Route::get('routes', function() {
    $routeCollection = Route::getRoutes(); 

    echo "<table style='width:100%'>";
    echo "<tr>";
        echo "<td width='10%'><h4>HTTP Method</h4></td>";
        echo "<td width='10%'><h4>Route</h4></td>";
        echo "<td width='80%'><h4>Corresponding Action</h4></td>";
    echo "</tr>";
    foreach ($routeCollection as $value) {
        echo "<tr>";
            echo "<td>" . $value->methods()[0] . "</td>";
            echo "<td>" . $value->uri() . "</td>";
            echo "<td>" . $value->getActionName() . "</td>";
        echo "</tr>";
    }
    echo "</table>";
}); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2019-01-19T20:37:24.560

laravel 5.4 更新

```
Route::get('routes', function() {
    $routeCollection = Route::getRoutes();
    echo "<table style='width:100%'>";
    echo "<tr>";
        echo "<td width='10%'><h4>HTTP Method</h4></td>";
        echo "<td width='10%'><h4>Route</h4></td>";
        echo "<td width='80%'><h4>Corresponding Action</h4></td>";
    echo "</tr>";
    foreach ($routeCollection as $value) {
        echo "<tr>";
            echo "<td>" . $value->methods()[0] . "</td>";
            echo "<td>" . $value->uri() . "</td>";
            echo "<td>" . $value->getActionName() . "</td>";
        echo "</tr>";
    }
    echo "</table>";
}); 
```

# ios - 是否使用包含的视图控制器来管理轮播动画？

> ID：15955300
> 
> 赞同：0
> 
> 时间：2013-04-11T17:37:47.147
> 
> 标签：ios

我需要实现一个由三个部分组成的屏幕，并且想知道如何最好地解决它 - 作为一个包含多个视图并管理它们的视图控制器，或者让屏幕的中间部分由它自己的视图控制器管理它包含在另一个视图控制器中。

*   屏幕的红色部分将包含一个背景图像、几个按钮、一个选项卡和一些动态文本。（它不是导航栏）。
*   屏幕的绿色部分只是一些静态图像和文本。
*   屏幕的蓝色部分是以某种方式（待定）动画的一系列图像，但首选自动旋转或滑动轮播。蓝色部分在红色和绿色部分之间延伸，当紫色或黄色部分出现时将被覆盖。
*   紫色部分将以编程方式向下和向后滑动以显示消息
*   每当用户从红色部分中的选项卡拖放时，黄色部分将向下滑动并向后滑动，其中将包含一些文本和一个按钮。

所以我的主要问题是应该由一个单独包含的 VC 管理屏幕的蓝色部分来处理动画，还是一个 VC 可以只管理屏幕上的每个视图？

第二个问题是，有没有现成的方法来实现黄色部分的上下拖动？

这适用于 iOS5 和 5。

谢谢

![在此处输入图像描述](https://i.stack.imgur.com/fu9Ve.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:10:06.627

如果您打算使用对象库中的“容器视图”，它不适用于 iOS 5，您可以创建另一个 ViewController 并将其添加到主 VC，但在这种情况下，您必须编写更多代码才能正确处理控制器：

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)

如果您要重用该 VC 并且必须使用 iOS5，那么实现您的自定义包含视图控制器是一个好主意

如果您不打算再次使用该 CVC 并且您需要 iOS5+，我将只使用一个 ViewController 来管理所有视图。

# javascript - Javascript XMLHttpRequest 谜题：异步与同步

> ID：15955301
> 
> 赞同：0
> 
> 时间：2013-04-11T17:37:50.820
> 
> 标签：javascript, asynchronous, xmlhttprequest, firefox-addon

在构建 Firefox 扩展时，我有一个对话框，当用户点击“确定”按钮时调用 Javascript 函数。该函数如下所示：

```
var acceptSubscribeHttpReq = null;
function acceptSubscribe(url) {
    acceptSubscribeHttpReq = new XMLHttpRequest();
    acceptSubscribeHttpReq.onload = httpLoadedSubscribe;
    acceptSubscribeHttpReq.onerror = httpErrorSubscribe;
    try {
        acceptSubscribeHttpReq.open("GET", url, true);
        acceptSubscribeHttpReq.send(null);
    } catch(e) {
        acceptSubscribeHttpReq.abort();
        return false;
    }
    // alert("request.status = "+acceptSubscribeHttpReq.status);
    return true;
 } 
```

有趣的是，如果我使用同步发送（通过将 open 的第三个参数设置为 false），或者如果我在函数末尾取消注释警报，这可以正常工作。但是，如果我在不取消注释警报的情况下使用异步，那么这会默默地失败——我按预期从这个函数返回，但 onload 处理程序永远不会触发。

这似乎表明 XMLHttpRequest 对象在函数退出时被销毁。那是对的吗？发生这种情况是因为这是从按钮调用的吗？如果是这样，可能的解决方案是什么？如果不是这样，知道为什么会发生这种情况吗？

这是对话框的 XUL：

```
<dialog id="winMain" title="&settingWindow.title;" style="min-width:400px;"
    onload="initSubscribe();" ondialogaccept="return acceptSubscribe();"
    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> 
```

任何和所有的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:45:15.980

请求的字段*状态*仅在*请求*完成后才存在（onload / onerror）。如果您在请求完成之前尝试访问此字段，则会出现错误，因为该字段不存在。

# ios - 将第三方 iOS 框架与 Appcelerator 一起使用？

> ID：15955302
> 
> 赞同：0
> 
> 时间：2013-04-11T17:37:56.583
> 
> 标签：ios, titanium, appcelerator, appcelerator-mobile, titanium-modules

最近开始尝试`Appcelerator`平台，我想知道是否有机会集成我为`iOS`平台编写的自己的框架库之一`Objective-C`，我有兴趣为平台做类似的事情`Android`。

我知道使用`JavaScript`代码与本机代码进行通信是可行的，但是有没有办法通过`Appcelerator`平台和我的框架来做到这一点？

谢谢你。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:41:11.733

是的，这一直在做，我们称它们为钛球中的*模块*。事实上，Appcelerator 已经提供了一个大型的开源模块存储库，[你可以在 github 上找到它们。](https://github.com/appcelerator/titanium_modules)它们的范围从贝宝集成到凹凸、乱舞和绘图库。

同样非常有用的是githhub 上的[mod 开发指南，它提供了常见操作的代码示例，](https://github.com/appcelerator/titanium_modules/tree/master/moddevguide)[而这个文档指南](http://docs.appcelerator.com/titanium/3.0/#!/guide/Extending_Titanium_Mobile)几乎概述了整个过程。

我为 iOS 制作了一些自定义模块，它通常非常简单，只需移动代码并公开 API 或视图。

# c++ - 查找 cv::Mat 的最大值

> ID：15955305
> 
> 赞同：34
> 
> 时间：2013-04-11T17:38:01.913
> 
> 标签：c++, pointers, opencv, iterator, computer-vision

我试图找到 a 的最大像素值`cv::Mat`。

问题：`*maxValue`总是返回`0`。

从[这个 SO 线程](https://stackoverflow.com/questions/10158756/using-stdmax-element-on-a-vectordouble)中，我了解到'`max_element`返回迭代器，而不是值。这就是我使用的原因`*maxValue`'

```
cv::Mat imageMatrix;

double  sigmaX = 0.0;
int ddepth = CV_16S; //  ddepth – The desired depth of the destination image

cv::GaussianBlur( [self cvMatFromUIImage:imageToProcess], imageMatrix, cv::Size(3,3), sigmaX);

cv::Laplacian(imageMatrix, imageMatrix, ddepth, 1);

std::max_element(imageMatrix.begin(),imageMatrix.end());

std::cout << "The maximum value is : " << *maxValue << std::endl; 
```

注意：如果`min_element`被替换为代替`max_element`，并且`minValue`代替`maxValue`，`*minValue`将始终返回`0`。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-11T18:25:08.707

您应该使用 OpenCV 内置函数`minMaxLoc`而不是`std`函数。

```
Mat m;
//Initialize m
double minVal; 
double maxVal; 
Point minLoc; 
Point maxLoc;

minMaxLoc( m, &minVal, &maxVal, &minLoc, &maxLoc );

cout << "min val: " << minVal << endl;
cout << "max val: " << maxVal << endl; 
```

# c# - 输入类型文件，必需属性不起作用

> ID：15955313
> 
> 赞同：3
> 
> 时间：2013-04-11T17:38:20.853
> 
> 标签：c#, html, image, asp.net-mvc-4, required

我在我的 C# 项目中使用 MVC 4 框架。我创建了一个页面，在我的数据库（路径）中添加广告，在文件夹中添加实际图像。

该代码有效，但我想建立一个安全机制，防止页面发布空输入文件（图像选择器）。我发现 HTML 5 支持“必需”属性，但仍然存在一些问题。

当我按下提交按钮时（当没有选择图像时），它会标记该字段，但后面的代码（UploadController 中的 UploadAd 方法）仍然会被触发。这是什么原因造成的？

以下图像和代码可以使其更易于理解：

查看代码： http: [//pastebin.com/s9eWn4zW](http://pastebin.com/s9eWn4zW)

控制器代码+站点验证： http: [//oi47.tinypic.com/23leeef.jpg](http://oi47.tinypic.com/23leeef.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-21T08:12:07.870

尝试这个 ：

```
<div class="editor-field">
     <input type="file" name="image" id="uploadfile" required/>
</div>

<script type="text/javascript">
$(document).ready(function() {
    $('#upload').bind("click",function() 
    { 
        var imgVal = $('#uploadfile').val(); 
        if(imgVal=='') 
        { 
            alert("empty input file"); 
            return false; 
        } 
    }); 
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:05:33.803

广告创建页面使用以下形式：

```
@using (Html.BeginForm("UploadAd", "Upload", FormMethod.Post, new { enctype = "multipart/form-data", id = "adForm" }))
{
...
  <div class="editor-label">
            <p>Photo</p>
        </div>
        <div class="editor-field">
            <input type="file" id="files" name="files[]" multiple required/>
        </div>
} 
```

添加以下脚本使其工作：

```
<script>
    function manualValidate(ev) {
        if (ev.target.checkValidity()) {
            return true;
        } else { return false;}

    }
    $("#adForm").bind("submit", manualValidate);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:42:48.847

您可以将`required`属性添加到客户端并在用户单击提交时对其进行验证。此外，**您还必须**在服务器端进行验证。保存前检查文件是否存在

```
foreach(var postedFile in Request.Files)
{
   if (postedFile!= null && postedFile.ContentLength > 0) 
   {
      // good ! Save now
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:59:59.853

我建议使用一个额外的客户端属性，`FileName`该属性将在您的`Model`课程中发生，如下所示：

```
[Required(AllowEmptyStrings = false, ErrorMessage = "You must add a file.")] 
public string FileName { get; set; }

<div class="editor-label">File</div>
<div class="editor-field">
    <input type="file" //yourCustomAttributes />
    <input type="text" name="FileName" readonly />
    @Html.ValidationMessageFor(model => model.FileName)
</div> 
```

添加 javascript 行也编辑`FileName textbox`为选择要上传的文件。这样，`client-side controls`如果未选择任何文件，将发生并阻止将表单提交给您的控制器。

# nullpointerexception - 局部变量在循环内部声明时无法解析，但在外部声明时抛出 NPE

> ID：15955315
> 
> 赞同：0
> 
> 时间：2013-04-11T17:38:33.167
> 
> 标签：nullpointerexception, declaration

基本上我正在做的是通过一副纸牌进行耐心测试，以确定耐心耗尽的概率，主要方法只打印出这个数字，没有用户系统输入。当第一张牌被抽出来时，你说“1”，第二张牌说“2”，第三张牌“3”，然后你从第四张牌重新开始。所以是 1-2-3-1-2-3-1-... 如果你说 1 时抽到 A，你说 2 时抽到 2，或者说 3 时抽到 3，那么耐心就用完了。这是通过一副 52 张纸牌总共运行 100 次（也许我会将其设置为 1000）。下面是两个类 Card（创建卡片）和 Carddeck（创建卡片组）以及主要方法 d84 的实现。

```
public class Card {
public static final int SPADES = 1;
public static final int HEARTS = SPADES + 1;
public static final int DIAMONDS = SPADES + 2;
public static final int CLUBS = SPADES + 3;
private int rank;   // value
private int suit;   // color

/** Creates a card with color, suit (SPADES, HEARTS, DIAMONDS, CLUBS) 
    and value, rank (1-13) */
public Card(int suit, int rank) {
    this.suit = suit;
    this.rank = rank;
}

/** Gets suit */
public int getSuit() {
    return suit;
}

/** Gets rank */
public int getRank() {
    return rank;
}

/** Returns a readable representation of the card, e.g. "diamonds jack" */
public String toString(){
    String suitString = "";     
    switch(suit) {
        case SPADES: suitString = "spades"; break;
        case HEARTS: suitString = "hearts"; break;
        case DIAMONDS: suitString = "diamonds"; break;
        case CLUBS: suitString = "clubs"; break;
    }
    String rankString = "";
    switch(rank) {
        case 1: rankString = "ace"; break;
        case 11: rankString = "jack"; break;
        case 12: rankString = "queen"; break;
        case 13: rankString = "king"; break;
        default: rankString = String.valueOf(rank);
    }
    return suitString + " " + rankString;
}
} 
```

-

```
import java.util.Random;
public class CardDeck {
private Card[] theCards;
private int cardNbr = -1;
public CardDeck() {
    theCards = new Card[52];
    for (int suit = Card.SPADES; suit <= Card.CLUBS; suit++) {
        for (int r = 0; r < 13; r++) {
            theCards[r*suit] = new Card(suit, r+1);
        }
    }
}
public void shuffle() {
    Random rand = new Random();
    for (int i = 0; i < 52; i++) {
        int n = rand.nextInt(52);
        theCards[i] = theCards[n];
    }
}
public boolean moreCards() {
    return cardNbr < 51;
}
public Card getCard() {
    cardNbr++;
    return theCards[cardNbr];
}} 
```

-

```
public class d84 {
public static void main(String[] args) {
    int patBroke = 0;
    for (int j = 0; j < 100; j++){
        CardDeck deck = new CardDeck();
        deck.shuffle();
        while (deck.moreCards() == true) {
            int say = 1;
            while (say <= 3) {
                Card drawn = deck.getCard();
                if (say == drawn.getRank()) {
                    patBroke++;
                    break;
                }
            say++;
            }
            if (say == drawn.getRank()) {
                break;
            }
        }
    }
    System.out.print("The probability of patience running out is " + (1-patBroke/100));
}
} 
```

执行时，线程“main”java.lang.Error 中的异常：未解决的编译问题：在 d84.main(d84.java:17) 无法解决所绘制的问题。宣布了吗？删除此子句后，编译器会在 d84.java:11 处声明相同的错误。如果 Card draw 声明在循环外，则执行将在 17 或 11 处抛出 NullPointerException。

课堂卡片是在讲座中给出的，所以我不会在那里更改任何代码。另一方面，Carddeck 是我自己的实现，主要方法 d84 也是我自己的代码。

那么，在这种情况下，如何避免“绘制无法解决”和 NPE？

事先谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:43:44.453

您的问题与循环本身无关，而是与`{}`子句中变量的范围有关。不能在声明它的范围之外引用变量。

将您的逻辑更改为：

```
 int say = 1;
        Card drawn = null;  // Added
        while (say <= 3) {
            drawn = deck.getCard();  // Changed
            if (say == drawn.getRank()) {
                patBroke++;
                break;
            }
            say++;
        }
        if (say == drawn.getRank()) {
            break;
        } 
```

（但很可能还有其他问题。）

# c# - 无法构建 lambda 表达式树

> ID：15955317
> 
> 赞同：0
> 
> 时间：2013-04-11T17:38:45.903
> 
> 标签：c#, .net, winforms, lambda, expression-trees

尝试使用表达式树创建以下表达式（需要帮助）

```
List<string> lstName = dt_Name.Select(y => y.Name);

List<string> lstLabName = dt_Label.Select(x => x.LabelName).Where(p => p.LabelName.StartsWith(lstName + '_')); 
```

我希望它实际上遍历所有 lstName 并找到 lstLabName 中满足条件的所有实例。

到目前为止我想出的代码是：

```
 private BinaryExpression CreateBinaryExpression(string buildName)
    {
        // x.LabelName
        var param = Expression.Parameter(typeof(dt_Label), "x");
        var key = param.GetType().GetProperty("LabelName");
        var left = Expression.MakeMemberAccess(param, key);

        //ParameterExpression left = Expression.Parameter(typeof(string), "p"); //p
        ConstantExpression constantExpression = Expression.Constant(buildName, typeof(string));

        // x.LabelName == buildName
        return Expression.MakeBinary(ExpressionType.Equal, left, constantExpression);
    }

    private BinaryExpression CalculateLambdaExp(List<string> lstBuildName) 
    {
            BinaryExpression binaryExpression = CreateBinaryExpression(lstBuildName[0]);

            if (lstBuildName.Count() > 1)
            {
                List<string> lstnStr = lstBuildName;
                lstnStr.RemoveAt(0);
                BinaryExpression calculatedLambdaExp = CalculateLambdaExp(lstnStr);
                binaryExpression = Expression.MakeBinary(ExpressionType.AndAlso, binaryExpression, calculatedLambdaExp);
            }

            return binaryExpression;
    }

    private List<string> RunLambdaExpression(List<string> BuildName)
    {
        ParameterExpression left = Expression.Parameter(typeof(string), "p"); //p

        var factorial = Expression.Lambda<Func<List<string>, List<string>>>(CalculateLambdaExp(BuildName), left);
        var n = factorial.Compile()(BuildName);
        List<string> lst = n.ToList();

        return lst;
    } 
```

我收到很多运行时错误。将不胜感激任何帮助。

想通了大部分：

将函数 CreateBinaryExpression 更改为：

```
 private Expression CreateBinaryExpression(string buildName)
    {
        // x.LabelName
        var param = Expression.Parameter(typeof(dt_Label), "x");
        var key = typeof(dt_Label).GetProperty("LabelName");

        var left = Expression.MakeMemberAccess(param, key);

        ConstantExpression constantExpression = Expression.Constant(buildName + '_', typeof(string));

        //x.LabelName.startsWith(buildName_)
        MethodInfo mi = typeof(string).GetMethod("StartsWith", new Type[] { typeof(string) });
        Expression call = Expression.Call(left, mi, constantExpression);

        return call;
    }; 
```

并将对该函数的所有引用更改为接收 Expression 而不是 BinaryExpression

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:19:18.367

这条线有问题

```
var key = param.GetType().GetProperty("LabelName"); 
```

`param.GetType()`将返回`System.Linq.Expressions.ParameterExpression`没有`LabelName`财产的人。

你应该使用`typeof(dt_Label).GetProperty("LabelName")`

# mod-rewrite - 我的简单重写规则不起作用

> ID：15955319
> 
> 赞同：0
> 
> 时间：2013-04-11T17:38:55.653
> 
> 标签：mod-rewrite, url-rewriting

```
RewriteRule ^(.*)/(.*)/$ index.php?r=contest&id=$1 
```

我想重写

```
localhost/index.php?r=contest&id=1 
```

至

```
localhost/contest/1 
```

以上是我出来的重写规则。最初我认为它会起作用，但显然它没有。任何人都可以指导我的错误吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:45:10.420

您问题中的规则是在第一个正则表达式组中使用反向引用 $1 `contest`，而不是在第二个组中使用 $2 `1`。

你可以试试这个：

```
RewriteRule ^([^/]+)/([^/]+)/? index.php?r=contest&id=$2 [L,NC] 
```

或者：

```
RewriteRule ^([^/]+)/([^/]+)/? index.php?r=$1&id=$2 [L,NC] 
```

选项：

仅使用一个参数的规则应该是这样的，假设它是一个动态字符串：

```
RewriteRule ^([^/]+)/? index.php?r=$1 [L,NC] 
```

### 更新完整的规则集：

请求示例：`localhost/contest/1`

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} -f  [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule . - [L]

# 2 parameters. Both dynamic.
RewriteCond %{REQUEST_URI} !index\.php   [NC]
RewriteRule ^([^/]+)/([^/]+)/?$ index.php?r=$1&id=$2 [L,NC]

# 1 dynamic parameter.
RewriteCond %{REQUEST_URI} !index\.php   [NC]
RewriteRule ^([^/]+)/?$ index.php?r=$1   [L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:52:01.077

[这是一个关于清理你的网址的](http://wettone.com/code/clean-urls)非常好的文档

# iphone - Pushviewcontroller 和 Tab Switch 同时进行

> ID：15955322
> 
> 赞同：0
> 
> 时间：2013-04-11T17:39:01.683
> 
> 标签：iphone, ios, webview, uitabbarcontroller

我有一个三标签控制器栏。每个都将使用一个 webview。我正在尝试将 url 中的链接从 tab 1 的 webview 推送到 tab 2 的 webview。我已经花了大约 12 个小时在这上面，但仍然遇到同样的问题。我终于确定我需要这样的东西：

```
UINavigationController *navigationController = [self.tabBarController.viewControllers     objectAtIndex:1];
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
ClientViewController *vc = [sb instantiateViewControllerWithIdentifier:@"ClientView"];
[vc setTempUrl:self.urlstring];
[navigationController pushViewController:vc animated:YES]; 
```

我在这里想念什么？在输出中，我不断收到“无法识别的实例选择器”。

ClientViewController.m（我想这就是你所需要的？）

```
NSString *str = tempUrl;
NSURL *url = [NSURL URLWithString:str];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[_webView loadRequest:request]; 
```

客户端视图控制器.h

```
@interface ClientViewController : UIViewController{
    NSString *myUrl;
    NSString *tempUrl;
}
@property (weak, nonatomic) IBOutlet UIWebView *webView;
@property (retain, nonatomic) NSString *myUrl;
@property (retain, nonatomic) NSString *tempUrl; 
```

所有输出日志：

> [ClientViewController pushViewController:animated:]: unrecognized selector sent to instance 0x20874980 2013-04-11 12:31:35.599 Access Portal[2785:907] *** WebKit 在 webView:decidePolicyForNavigationAction:request:frame:decisionListener:delegate 中丢弃了一个未捕获的异常: -[ClientViewController pushViewController:animated:]: 无法识别的选择器发送到实例 0x20874980

# 32bit-64bit - 64 位硬件上的 VM Virtual Box 32 位操作系统

> ID：15955323
> 
> 赞同：-2
> 
> 时间：2013-04-11T17:39:15.247
> 
> 标签：32bit-64bit, virtualbox, windows-2000

我需要安装 Windows 2000 + SQL Server 2000 来使用经典 ASP 进行一些开发，该 ASP 连接到客户端的 SQL 2000 数据库。

他们有一台旧机器要用于该项目。长篇大论会让你厌烦。

我有 Windows 2000 和 SQL 2000，但它们是旧的 32 位，我的系统是 Windows 7 64 位机器。

Virtual box 是否能够在“32 位”模式下在 64 位机器上运行？我曾尝试安装 Windows 2000，但每次都出现蓝屏。

我的猜测是 VM Box 无法做到这一点，有没有办法让它工作，因为我需要做的就是拥有 SQL Server 2000，这样我就可以导出 db 文件以上传到他们的测试服务器，实际的 web只要文件可以连接到数据库，文件就可以驻留在我的 Windows 7 PC 上。

蒂亚约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:42:00.433

您应该能够使用 64 位 VirtualBox 运行 32 位操作系统。

# sql - 二 查询 Sql 表达式

> ID：15955324
> 
> 赞同：1
> 
> 时间：2013-04-11T17:39:16.920
> 
> 标签：sql, sql-server, crystal-reports

我不确定这是否可以在水晶内完成，但它就在这里。

要获取有关此报告的更多报告信息，需要两个值。首先是查找已售出的单位...第二个是为报告找到合适的最终价格...我最初的想法是尝试将查询分配给 SQL 表达式中的变量，以获取第一个值以便传递给第二......但它不喜欢我的变量。

```
CASE WHEN "Items"."ItemId" IS NULL THEN NULL
ELSE
    LOCAL NumberVar totalSold :=(SELECT SUM([QuantitySold]) AS TotalSold 
                    FROM Skus 
                    WHERE Skus.ItemId = "Items"."ItemId" 
                    AND Skus.SkuEnabled = 1);

    SELECT TOP 1 Price 
    FROM [MYDB].[dbo].[PriceTables] p
    WHERE p.UnitsSoldBreak >= totalSold 
      AND p.ItemId = "Items"."ItemId"
    ORDER BY p.UnitsSoldBreak asc

END 
```

从本质上讲，一个项目有多个最终定价层，这些查询让我可以根据售出的数量查看最终价格。查询在 SQL Management Studio 中运行良好，只需弄清楚如何将其迁移到表达式以显示最终价格（单个数字）。

引擎在局部变量声明上咳嗽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:41:07.763

您可能想要使用子查询而不是变量。试试这样的东西：

```
CASE WHEN "Items"."ItemId" IS NULL THEN NULL
ELSE

    SELECT TOP 1 Price 
    FROM [MYDB].[dbo].[PriceTables] p
    WHERE p.UnitsSoldBreak >= ( SELECT SUM([QuantitySold]) 
                FROM Skus 
                WHERE Skus.ItemId = "Items"."ItemId" 
                  AND Skus.SkuEnabled = 1)
      AND p.ItemId = "Items"."ItemId"
    ORDER BY p.UnitsSoldBreak asc

END 
```

# responsive-design - 使用 Foundation 3 时响应式布局无法正常工作

> ID：15955325
> 
> 赞同：-1
> 
> 时间：2013-04-11T17:39:18.107
> 
> 标签：responsive-design, zurb-foundation

我正在使用 Foundation 3 创建网站，但我似乎无法让响应式布局正常工作。当屏幕尺寸改变时，导航栏似乎有响应，但网站的其余部分都不起作用。谁能帮助我如何让网站的其余部分响应？

您可以在此处查看：[https ://dl.dropboxusercontent.com/u/52725754/fight-back-jujitsu/index.html](https://dl.dropboxusercontent.com/u/52725754/fight-back-jujitsu/index.html)

任何帮助都会被应用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:32:13.447

您的网站上发生了很多事情。我注意到的一件大事是你嵌套`row`在`row`. 这会弄乱您网站的布局。如果你想有那个嵌套，那么你需要先有一个`columns`，然后是一个`row`. 你可以[检查这个小提琴](http://jsfiddle.net/v4w7r/)，它说明了我在这里谈论的内容。您会注意到第二个面板会导致水平滚动。如果您删除该`row`div 上的类，则滚动将消失。

# automation - 通过 Chef 无头安装 JIRA

> ID：15955329
> 
> 赞同：2
> 
> 时间：2013-04-11T17:39:47.923
> 
> 标签：automation, installation, jira, chef-infra

有没有人通过 Chef 无头安装 JIRA？（我正在做一个实验，看看我们是否可以快速自动设置新的项目环境）

使用 Chef 我可以像这样开始 Jira 安装... 安装 MySQL 添加 JIRA DB 和用户，授予权限模板 response.varfile 远程文件下载 JIRA 安装程序 使用 varfile 执行 JIRA 安装程序 将 MySQL 连接器复制到 JIRA lib 文件夹然后停止启动 JIRA 服务

...但是在第二阶段，JIRA 要求我打开一个浏览器并提供数据库和其他凭据来完成配置。发送的请求看起来像是生成了独特的令牌等。

考虑的方法： * 使用 curl 来伪造配置 - 有一个唯一的令牌，并且有一个我们必须使用的响应。* 使用 xvfb 和 Selenium（或类似的）来假装驱动浏览器——我们今天无法成功地让它工作。* 复制手动生成的配置文件/数据库 - 这不是一个很好的长期计划，但同样，我们有一些特殊值会导致我们出现问题。

JIRA 是一个受欢迎的产品，有人有幸通过 Chef 安装它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:27:22.057

取决于您要安装多远。为了达到有人可以创建管理员用户的程度，不使用 JIRA 安装程序怎么样。只需解压标准的 tar.gz 包，在 jira-application.properties 中设置 JIRA 主页并修复 JIRA home/dbconfig.xml 文件。将一些插件 jar 文件添加到已安装的插件中​​，您应该已经准备好了。

# javascript - 在表单的 2 个页面/步骤中保留一个 JavaScript 变量

> ID：15955335
> 
> 赞同：0
> 
> 时间：2013-04-11T17:40:01.173
> 
> 标签：javascript, html

因此，我有一个页面通过使用一系列下拉框、单选按钮等来影响 javascript var。但是我需要该 var 对该客户端保持不变，因此当他们单击添加到图表时，该 var 会被跟踪到金额付款。我不确定最好的方法是什么？

有人有任何指示可以帮助我吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:44:17.400

你可以使用：

*   服务器端脚本直接在 JavaScript 中打印值。
*   另一个页面的查询字符串，使用 JavaScript 读取。( `location.search`)
*   与哈希字符串相同。( `location.hash`)
*   Cookie，带有服务器端脚本或直接在 JavaScript 中。
*   本地存储 (HTML5)。

如果信息必须是安全的，我会使用 POST 表单和服务器端脚本。否则我会使用 cookie 或本地存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:47:55.500

另一种解决方案是使用[http://www.thomasfrank.se/sessionvars.html](http://www.thomasfrank.se/sessionvars.html)通过设置

```
sessvars.myObj = {name: "Thomas", age: 35} 
```

您将能够`sessvars`从其他页面访问变量，它比 cookie 更容易工作，并且它的好处是不向服务器的每个请求添加 cookie。cookie 编码和解码也很麻烦。

如果你只需要支持最新的浏览器，你应该使用[localStorage](http://diveintohtml5.info/storage.html)。

```
var foo = localStorage.getItem("bar");
localStorage.setItem("bar", foo); 
```

# jquery - 单击时禁用站点范围的提交按钮

> ID：15955339
> 
> 赞同：2
> 
> 时间：2013-04-11T17:40:13.947
> 
> 标签：jquery, submit, multiple-forms

我有一个多页网站，每个页面上有多个弹出窗口。有时会出现一连串的弹出窗口。例如，您希望这种情况发生吗？-> 否 -> 重新安排 -> 确认。这意味着有时提交操作被阻止并出现另一个弹出窗口。其他时候只提交弹出窗口上的表单。

单击后，我想禁用所有提交按钮。我试过添加

```
$("input[type='submit']").attr('disabled', 'disabled'); 
```

这是行不通的。禁用单个提交按钮没有问题，但我有很多事情要管理，这似乎是一个相当正常的问题。人们通常会单独禁用提交按钮吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:58:37.383

我最终做的是

```
function(evt) {
  evt.preventDefault();
  evt.stopPropagation();

  // Button disable
  var disabledClass = 'ui-state-disabled',
  button = $($(evt.target).closest('button'));
  if(button.hasClass(disabledClass)) return;
  button.attr('disabled',true).addClass(disabledClass);
} 
```

因为那里有多个按钮。我已经接受了上面的解决方案，因为它是对这个问题最完整（也是最明智）的答案。

# sql - 使用 select * 时排除列

> ID：15955348
> 
> 赞同：-2
> 
> 时间：2013-04-11T17:40:44.460
> 
> 标签：sql, sql-server-2008

使用 select * 时是否有排除列？当然我可以只列出我想要的列，但是如果说我正在查询一个有 30 列的表并且我想要其中的 27 列，那么写一些类似的东西会更干净`SELECT * EXCLUDE a, b, c`

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:31:37.840

这是生成选择列表并消除两个表中重复列的一种方法。它假定您已经知道这两个表以及它们之间的关系。这使用 AdventureWorks 和表 Sales.SalesOrderDetail 和 Sales.SalesOrderHeader。请注意，具有相同名称的多个表中的列不一定是冗余的 - 例如，可以独立于订单详细信息项目修改订单，现在您的查询 (a) 忽略详细级别修改日期，并且 (b) 不t 在结果中清楚地表明哪个修改日期已公开（除非用户阅读查询文本，如果他们有权访问它）。

```
DECLARE @sql nvarchar(max);

;WITH l AS 
(
  SELECT column_id, name FROM sys.columns 
  WHERE [object_id] = OBJECT_ID(N'Sales.SalesOrderDetail')
),
r AS
(
  SELECT column_id, name FROM sys.columns 
  WHERE [object_id] = OBJECT_ID(N'Sales.SalesOrderHeader')
)
SELECT @sql = STUFF((SELECT N',' + CHAR(13) + CHAR(10) + CHAR(9)
  + CASE WHEN l.column_id IS NOT NULL THEN 'h.' 
  ELSE 'd.' END + QUOTENAME(COALESCE(l.name,r.name)) FROM r 
FULL OUTER JOIN l 
ON l.name = r.name
ORDER BY COALESCE(l.column_id, 255), r.column_id
FOR XML PATH(''), 
TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 1, N'');

SELECT @sql = N'SELECT ' + @sql + ' 
  FROM Sales.SalesOrderHeader AS h
  INNER JOIN Sales.SalesOrderDetail AS d
  ON h.SalesOrderID = d.SalesOrderID;'

PRINT @sql;
-- EXEC sys.sp_executesql @sql; 
```

结果：

```
SELECT 
    h.[SalesOrderID],
    d.[SalesOrderDetailID],
    d.[CarrierTrackingNumber],
    d.[OrderQty],
    d.[ProductID],
    d.[SpecialOfferID],
    d.[UnitPrice],
    d.[UnitPriceDiscount],
    d.[LineTotal],
    h.[rowguid],
    h.[ModifiedDate],
    h.[RevisionNumber],
    h.[OrderDate],
    h.[DueDate],
    h.[ShipDate],
    h.[Status],
    h.[OnlineOrderFlag],
    h.[SalesOrderNumber],
    h.[PurchaseOrderNumber],
    h.[AccountNumber],
    h.[CustomerID],
    h.[SalesPersonID],
    h.[TerritoryID],
    h.[BillToAddressID],
    h.[ShipToAddressID],
    h.[ShipMethodID],
    h.[CreditCardID],
    h.[CreditCardApprovalCode],
    h.[CurrencyRateID],
    h.[SubTotal],
    h.[TaxAmt],
    h.[Freight],
    h.[TotalDue],
    h.[Comment] 
  FROM Sales.SalesOrderHeader AS h
  INNER JOIN Sales.SalesOrderDetail AS d
  ON h.SalesOrderID = d.SalesOrderID; 
```

# mysql - 在mysql中创建表时出现语法错误

> ID：15955349
> 
> 赞同：0
> 
> 时间：2013-04-11T17:40:53.540
> 
> 标签：mysql, sql

我正在使用 MAMP phpmyadmin 并且正在学习简单的 sql 来创建一个数据库，成员可以在其中签出一本书。我能够制作前两个表，但在 Order 表中失败了。

我哪里错了？

```
CREATE TABLE if not exists book (
    b_id int UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title varchar(30),
    author varchar(50),
    publisher varchar(25)
)

CREATE TABLE if not exists Member (
    m_id int UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    firstname varchar(30),
    lastname varchar(30),
    address varchar(20)
)

CREATE TABLE if not exists Order (
    o_id int AUTO_INCREMENT PRIMARY KEY,
    b_id int FOREIGN KEY REFERENCES Book(b_id),
    m_id int FOREIGN KEY REFERENCES Member(m_id)
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:42:58.793

`Order`是 MySQL 中的[保留字](http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-5.html)。如果要将其用作表/列的名称，则需要在其周围使用反引号。

```
CREATE TABLE if not exists `Order` ( ... 
```

列类型也必须与`FOREIGN KEY`约束匹配：

```
b_id int UNSIGNED,
m_id int UNSIGNED 
```

[查看演示](http://sqlfiddle.com/#!2/cea73)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:54:29.447

除了 ORDER 是保留字，并且要求数据类型*完全*匹配之外，MySQL 不支持声明外键与列内联的语法。您必须与列分开声明外键约束。两种语法形式都是标准的 ANSI SQL，但 InnoDB 仅支持表级约束声明。

这是我在 MySQL 5.5.30 上测试并开始工作的语句：

```
CREATE TABLE if not exists `Order` (
     o_id int AUTO_INCREMENT PRIMARY KEY,
     b_id int unsigned,
     m_id int unsigned,
     FOREIGN KEY (b_id) REFERENCES book(b_id),
     FOREIGN KEY (m_id) REFERENCES Member(m_id)
); 
```

# ios - iPhone中方法调用的CPU和内存使用情况

> ID：15955350
> 
> 赞同：4
> 
> 时间：2013-04-11T17:40:58.803
> 
> 标签：ios, objective-c, memory, cpu-usage

我正在尝试将一些性能统计信息添加到我的 iPhone 应用程序的方法调用中。我使用以下方法来查找处理时间：

```
#define TICK   NSDate *startTime = [NSDate date]
#define TOCK   NSLog(@"Time to process: %f", -[startTime timeIntervalSinceNow]) 
```

是否有类似的策略来测量方法调用的 CPU 和内存使用情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:01:52.160

用于`Instruments`检查应用的性能。苹果做得相当不错，所以没有必要重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:01:29.870

使用 Instruments 在现实生活中的设备上进行这些测量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T22:11:19.707

您将不得不做一些工作才能使其正常工作，但这是您可以做到的。

*   从这个 SO[答案](https://stackoverflow.com/questions/8223348/ios-get-cpu-usage-from-application)中，您可以了解如何获取当前的 CPU 使用率。
*   从这个 SO[答案](https://stackoverflow.com/questions/5012886/knowing-available-ram-on-an-ios-device)中，您可以了解如何获取当前的内存使用情况。

现在您可以生成一个新线程来定期或按需检查 CPU 和内存，然后创建一个类，如下所示：

```
@interface ProfilerBlock
-(id) init;
-(void) end;
@end 
```

*   *init*方法应该初始化当前时间并注册ProfilerBlock*实例*以从工作线程获取有关内存使用和 CPU 使用的信息。
*   *end*方法应该计算时间并打印所有需要的信息或将其写入文件或其他东西:)

*现在为ProfilerBlock*类创建一个 C-Style 释放函数

```
static void __$_Profiler_Block_Release_Object_$__(ProfilerBlock **obj) // the long name is just to prevent duplicated symbol names //
{
    [(*obj) end];
    [(*obj) release];
    (*obj) = nil;
} 
```

最后，您可以创建宏以使您的生活更轻松：

```
#define CONCAT2(x, y) x ## y
#define CONCAT(x, y) CONCAT2(x, y)
#define PROFILER_SCOPE_OBJECT __attribute__((cleanup(__$_Profiler_Block_Release_Object_$__)))
#define PROFILE_BLOCK ProfilerBlock *CONCAT(__profilerBlock_, __LINE__) PROFILER_SCOPE_OBJECT = [[ProfilerBlock alloc] init]; 
```

一旦你拥有了所有这些，你可以像这样分析方法：

```
-(void) methodToProfile
{
    PROFILE_BLOCK
    // add some code to profile here //
    // the "end" function will get called automatically after the method is done, even if you return early, allowing you to process the profiled data //
} 
```

我希望这会有所帮助，很抱歉，如果我没有详细介绍如何测量内存和 CPU，但我相信其他答案已经很好地涵盖了这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T18:01:44.357

```
 NSTimeInterval t1 = [[NSDate date] timeIntervalSince1970]; 
```

.... 定制流程 ...

```
 NSTimeInterval t2 = [[NSDate date] timeIntervalSince1970];
 NSTimeInterval dt = t2-t1; this is in milisec; 
```

# java - 编辑距离程序

> ID：15955354
> 
> 赞同：0
> 
> 时间：2013-04-11T17:41:17.077
> 
> 标签：java

我正在尝试编写一个程序来计算英语中任意两个单词之间的编辑距离。编辑距离定义为通过一次仅更改一个字母从一个单词转到另一个单词所需的最小步数，其中每个中间单词都包含在一些标准的英语单词列表中。我将提示用户输入两个词。例如，如果用户输入：“trail”和“crawl”，我希望输出为：

```
First word:  trail
Last word: crawl
The edit distance is 2 with the following chain: trail -> trawl -> crawl 
```

（所以它也包括路径）

```
import java.util.Scanner;
import java.io.*;
import java.util.ArrayList;
import java.util.Map;
import java.util.HashMap;
import java.util.Set;
import java.util.HashSet;

public class EditDistance {
 public static void main (String[] args) {
    try {
        inputDictionary();
    }
    catch (FileNotFoundException e) {
    System.out.println("Error: FileNotFoundException");
    }
    promptUser();
}

static ArrayList<String> dictionary;

    //input dictionary
public static void inputDictionary() throws FileNotFoundException {
    dictionary = new ArrayList<String>();
    Scanner scan = new Scanner(new File ("dict.txt"));
    while (scan.hasNext()) {
        String word = scan.next();
        dictionary.add(word);
    }
    scan.close();
}

public static HashSet<String> changeOneLetter(String Word) {
    HashSet<String> newWords = new HashSet<String>();
    char alphabet[] = "abcdefghijklmnopqrstuvwxyz".toCharArray();
        //take each letter and change it to a different letter
        for (int i = 0; i < Word.length(); i++) { //cycles through each letter of the word
            char wordArray[] = Word.toCharArray();
            for (int j = 0; j < 26; j++) { //swaps in each letter of the alphabet
                wordArray[i] = alphabet[j];
                //check if it's not the same as previous word
                String newWord = new String(wordArray);
                if (!newWord.equals(Word)) {
                    // if it's in the dictionary add the word to the set
                    for (String word1: dictionary) {
                        if (newWord.equals(word1)) {
                            newWords.add(newWord);
                        }
                    }
                }
            }
        }
    return newWords;
}

static Map<String, Set<String>> eachWordChange;
static String firstWord;
static String secondWord;

    //prompts the user for two words
public static void promptUser() {
    System.out.println("Enter the first word: ");
    Scanner scan = new Scanner(System.in);
    firstWord = scan.next();
    for (String word1: dictionary) {
        if (firstWord.equals(word1)) {
            System.out.println("Enter the second word: ");
            secondWord = scan.next();
            for (String word2: dictionary) {
                if (secondWord.equals(word2)) {
                    calculateEdits();
                }
            }
        }
    }
    scan.close();
}

   //this is where I'm having trouble
public static void calculateEdits() {
    String oldWord = secondWord;
    Map <String, String> findPath = new HashMap<String, String>();
    HashSet<String> oneLevel = changeOneLetter(oldWord);
    System.out.println("This is the first level: " + oneLevel);
    for (String word: oneLevel) {
        if (!firstWord.equals(word)) {

            findPath.put(word, secondWord);
            System.out.println("Next Levels: " + changeOneLetter(word));
    }
    System.out.println("Path of first level: " + findPath);
} 
```

}

现在我只有 println's 来向我展示发生了什么，所以现在它正在向我展示：

```
This is the first level: [trawl, brawl, drawl]
Next Levels: [brawl, trail, crawl, drawl]
Next Levels: [trawl, crawl, drawl]
Next Levels: [trawl, brawl, crawl, drawn]
Path of first level: {trawl=crawl, brawl=crawl, drawl=crawl} 
```

现在我有第一级，并且可以从每个第一级生成第二级，但我希望能够存储下一个级别，然后检查第一个单词（=trail）是否出现在那里，如果它在第一个单词出现之前，我不必创建地图并重做该过程。

# javascript - 获取最后一个“斜线”和第一个“问号”之间的字符串

> ID：15955357
> 
> 赞同：0
> 
> 时间：2013-04-11T17:41:30.913
> 
> 标签：javascript

我有一个网址，如下所示：

```
http://google.com/foo/querty?act=potato
http://google.com/foo/querty/?act=potato
http://google.com/foo/querty/#/21312ads
http://google.com/foo/querty#/1230982130asd 
```

对于这种 URL 格式，我如何才能通过在 javascript 中使用正则表达式来仅获取“查询”字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:49:00.053

要将 URL 与“？”匹配：

```
str.match(/^.*\/([^\/]+)\/?\?.*$/)[1]; 
```

用“#”匹配 URL：

```
str.match(/^.*\/([^\/]+)\/?#.*$/)[1]; 
```

匹配两者：

```
str.match(/^.*\/([^\/]+)\/?[#\?].*$/)[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:49:21.667

我建议：

```
var url = "http://google.com/foo/querty?act=potato".split('/').pop(),
    urlPart = url.slice(0,url.indexOf('?'));
    console.log(urlPart); 
```

考虑到不必要的复杂性（但这当然是个人喜好），我强烈建议*不要为此使用正则表达式。*

编辑以解决上述问题未能满足问题中显示的两个测试用例（在第二种情况下失败）。以下处理指定的两种情况：

```
Object.prototype.lastStringBefore = function (char, delim) {
    if (!char) {
        return this;
    }
    else {
        delim = delim || '/';
        var str = this,
            index = str.indexOf(char),
            part = str.charAt(index - 1) == delim ? str.split(delim).slice(-2, -1) : str.split(delim).pop();
        return part.length === 1 ? part[0] : part.slice(0, part.indexOf(char));
    }
}

var url1 = 'http://google.com/foo/querty?act=potato',
    url2 = 'http://google.com/foo/querty/?act=potato',
    lastWord1 = url1.lastStringBefore('?', '/'),
    lastWord2 = url2.lastStringBefore('?', '/');

console.log(lastWord1, lastWord2); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/hNdEq/1/)。

参考：

*   [`Array.pop()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/pop).
*   [`Array.slice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice).
*   [`String.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf).
*   [`String.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:49:23.010

使用[lastIndexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/lastIndexOf)查找`?`和[substr](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)以提取部分字符串：

```
url.substr(url.lastIndexOf('?')); 
```

# javascript - JavaScript gl-matrix lib：如何从角获得欧拉角和角？

> ID：15955358
> 
> 赞同：2
> 
> 时间：2013-04-11T17:41:35.497
> 
> 标签：javascript, math, euler-angles

是否可以使用 gl-matrix 库？（欧拉角，我的意思是：俯仰、偏航、滚动）（[https://github.com/toji/gl-matrix](https://github.com/toji/gl-matrix)）在命令参考中寻找但没有发现任何有用的东西。

JavaScript 的另一种实现方式也很有用。

# asp.net - .NET JIT 编译器会优化方法调用吗？

> ID：15955359
> 
> 赞同：5
> 
> 时间：2013-04-11T17:41:35.743
> 
> 标签：asp.net, .net, c#-4.0, clr

我从 ASP.NET 应用程序返回的堆栈跟踪（从 ArgumentNullException 生成）给人的印象是下面代码的最后一行发生了错误。据我所知，这是不可能的，但如果 JIT 优化了对 的调用`Bar`，这将导致不同的堆栈跟踪，它会解释一切。我确定它不是 c# 编译器，因为 CIL 看起来像我所期望的那样。JIT 编译器是否有可能删除对 Bar 的调用？

c# 4，.NET 4.0.30319.1，ASP.NET 4.0.30319.1

**编辑：** 我应该提到这是一个发布配置，Optimize code = on，Debug Info = pdb-only。

```
Stack Trace:

[ArgumentNullException: Value cannot be null. Parameter name: value]
CreateHiddenField(HtmlTextWriter tr, String name, String value) in Foo.cs:129
Foo(IHttpContext context, HtmlTextWriter writer) in Foo.cs:106 
```

* * *

```
private static void Foo(IHttpContext context, HtmlTextWriter writer)
{ // line 103
  Bar(writer, AuthorizationServerResponseDetailsHttpRequestParser.RequestSAMLFieldName, context);
  Bar(writer, AuthorizationServerResponseDetailsHttpRequestParser.RequestTargetFieldName, context);
  // line 106 - blank line in source code.
  CreateHiddenField(tr, name, string.Empty); // looks like its here
}

private static void Bar(HtmlTextWriter tr,string name, IHttpContext context)
{ // line 116
   #region Sanitation
   if (tr == null) { throw new System.ArgumentNullException("tr"); }
   if (name == null) { throw new System.ArgumentNullException("name"); }
   if (context == null) { throw new System.ArgumentNullException("context"); }
   #endregion

   CreateHiddenField(tr, name, context.RequestQueryString(name));
}

private static void CreateHiddenField(HtmlTextWriter tr, string name, string value)
{ // line 127
   #region Sanitation
   if (tr == null) { throw new System.ArgumentNullException("tr"); }
   if (name == null) { throw new System.ArgumentNullException("name"); }
   if (value == null) { throw new System.ArgumentNullException("value"); }
   #endregion

   // payload...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T18:09:34.010

根据[http://www.hanselman.com/blog/ReleaseISNOTDebug64bitOptimizationsAndCMethodInliningInReleaseBuildCallStacks.aspx](http://www.hanselman.com/blog/ReleaseISNOTDebug64bitOptimizationsAndCMethodInliningInReleaseBuildCallStacks.aspx)，如果 JITter 内联方法调用，它确实会在堆栈跟踪中折叠。如果您不希望它内联（这可能不是一个好主意），您可以使用

```
[MethodImpl(MethodImplOptions.NoInlining)] 
```

在方法上。对于 exe，您还可以使用 INI 文件告诉 JITter 生成跟踪信息（在链接页面的底部），但我不确定这对 ASP.NET 应用程序如何工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:18:04.443

我从未见过 JIT 删除方法调用，只是内联它。通常，它会删除未使用的局部变量，但我相当肯定 JIT 不能静态分析调用方法的所有副作用，所以我认为它永远不会删除方法调用。

我的猜测是 null 值被传递给内部调用的方法，该方法`CreateHiddenField`恰好也有一个参数`value`。因为默认情况下在发布模式下启用内联，所以您不能真正信任堆栈跟踪（或发生异常的假定行号）。您的问题很可能`CreateHiddenField`在隐形堆栈内部或更深处。:)

您可以禁用优化以更好地了解堆栈跟踪。 [MSDN 这里有一些说明](http://msdn.microsoft.com/en-us/library/9dd8z24x.aspx)

# codeigniter - 如何在 codeigniter 2 中集成 zend 库？

> ID：15955364
> 
> 赞同：2
> 
> 时间：2013-04-11T17:41:53.883
> 
> 标签：codeigniter, zend-framework, barcode

如何将 zendframework 2 库与 codeigniter 2 集成？我想使用来自 zendframework 的条形码库。我找到[了本](http://blog.ghostbilt.com/zend-barcodes-codeigniter/)教程并遵循了它，我得到了显示任何内容的输出。当我从浏览器检查源代码并检查图像链接时，它说“无法显示，因为它包含错误”。我不知道什么是错误。有谁能知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T16:52:55.760

将 Zend 库集成到 Codeigniter 框架非常容易：

只需将 Zend 中的库复制到CI中的**third_party文件夹即可。**

在 CI 的 library 文件夹中创建一个库，以从**third_party文件夹初始化****zend 库**。

 **--库代码--

```
class CI_Zend { 

    function load($class)
    {

    $path=(string) realpath( APPPATH.'third_party/zend') .'/'.$class . EXT;
        require_once($path) ;

    }
} 
```

这会将**zend**库附加到 CI 项目中......

您可以使用 zend 从以下位置下载虚拟 CI：

[http://www.4shared.com/archive/-KJsvwoV/citar.html](http://www.4shared.com/archive/-KJsvwoV/citar.html)**

# iphone - 在 nsDocumentDirectory 中下载一个 zip 文件，解压并阅读它

> ID：15955372
> 
> 赞同：0
> 
> 时间：2013-04-11T17:42:03.077
> 
> 标签：iphone, objective-c, cocoa

我在 URL 上有一个 .zip 文件，我想下载它，解压缩并将其保存到 nsdocument 目录中，无需任何 UI 或用户交互。然后回读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:11:33.800

在 .h 文件中声明此变量

```
NSMutableData *responseData; 
```

在您的 viewDidLoad 方法中编写此代码此方法将开始从给定 URL 下载文件

```
NSURL *serverURL = [NSURL URLWithString:@"your file URL here"];
NSURLRequest *request = [NSURLRequest requestWithURL:serverURL];
NSURLConnection *cn = [NSURLConnection connectionWithRequest:request delegate:self];
[cn start]; 
```

在 .m 文件中实现这个 Delegate 方法

```
#pragma mark - NSURLConnection Delegate Methods
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"%s",__FUNCTION__);
    responseData = nil;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSLog(@"%s",__FUNCTION__);
    responseData = [[NSMutableData alloc] initWithCapacity:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSLog(@"%s",__FUNCTION__);
    [responseData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"%s",__FUNCTION__);

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDirPath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    NSString *filePath = [docDirPath stringByAppendingPathComponent:@"DownloadedZip.zip"];

    // Save file to Document Directory
    [responseData writeToFile:filePath atomically:YES];
    responseData = nil;
} 
```

[在此处](https://code.google.com/p/ziparchive/downloads/list)下载项目到 unArchive zip 文件，并在将文件保存到 Document Directory 后放入 unArchive Code

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:15:23.587

首先将文件下载到您的设备。

```
NSString *URLstring = @"http://your.download.URL";
NSURL  *url = [NSURL URLWithString:URLstring];
NSData *urlData = [NSData dataWithContentsOfURL:url]; 
```

然后将其写入设备。ThePath 是您要在设备上保存的位置以及要保存的文件名，请记住添加文件扩展名 (.zip)。

```
[urlData writeToFile:thePath atomically:YES]; 
```

然后你可以使用[ziparchive](http://code.google.com/p/ziparchive/)或[minizip](http://www.winimage.com/zLibDll/minizip.html)之类的东西来解压缩它。有几种开源解决方案。这两个过去曾为我工作过。很容易使用。

之后，使用解压缩的数据做任何你想做的事情就足够简单了。并进行一些大扫除并从手机中删除 zip 文件。

# php - Symfony2：为什么请求传递给一个 Kernel.Terminate EventListener 受 Symfony2 中的 AppCache 影响

> ID：15955373
> 
> 赞同：3
> 
> 时间：2013-04-11T17:42:05.860
> 
> 标签：php, symfony

在我的 Symfony2.2 应用程序中，我使用了一个 onKernelTerminate EventListener，以便在我的响应被呈现后我可以进行一些“繁重的”处理，以便用户获得更快的响应时间。

在我的控制器中，我在请求上设置了一个属性，以便当事件侦听器运行时，该属性可用于确定是否有某些内容以及要处理的内容。

这在我的开发环境和未启用 AppCache 的测试环境中完美运行。但是，一旦我启用 AppCache（在我的 app.php 中）——我想要这样做，因为我将它用于我所有的 HTTP 缓存——事件侦听器停止工作，因为我通过 onKernelTerminate 中的事件访问的请求似乎有一个空属性参数包。

我在控制器中设置的属性不适用于 PostResponseEvent 中的请求。

为什么AppCache会有这个效果？是否有另一种方法可以在我的控制器和可与 AppCache 一起使用的事件侦听器之间传递数据？

这是一段代码，您可以看到：

```
#in my controller
$request->attributes->set('listener-to-process', 'test');

#in my EventListener:
public function onKernelTerminate(PostResponseEvent $event) {

    $request = $event->getRequest();

    //use this request attribute to decide what to process
    if (!$request->attributes->has('listener-to-process')) {
        return;
    };

    $type = $request->attributes->get('listener-to-process');
    $status = $this->api->persistTag(type);

    return;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T12:31:45.767

我找到了答案——我的困惑来自于不知道如何在单个请求中在服务之间传递信息。AppCache 有点像红鲱鱼（尽管我仍然不知道为什么它会重置对请求的更改）。

我认为唯一的方法是设置请求的属性，以便侦听服务可以从请求中提取。事实上，服务在请求中是持久的——所以服务本身可以在 onKernelTerminate 事件之后跟踪它需要做什么。

我创建了服务的私有属性（例如 $itemsToPersist），并在此过程中将项目添加到该数组中。

然后在监听器的 onKernelTerminate 方法中：

```
$service = $this->container->get('your_service');
$service->persistItems(); 
```

只需调用可以遍历 itemsToPersist 数组的方法并执行它需要执行的任何操作。

无需在请求中传递东西！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T14:49:39.613

关于您的原始问题：这可能是因为 Symfony`HttpCache`内核克隆了将传递给`kernel.terminate`事件的原始请求对象。因此，对克隆的请求对象所做的任何更改都不会出现在`kernel.terminate`事件中。见[https://github.com/symfony/symfony/issues/23546](https://github.com/symfony/symfony/issues/23546)

# javascript - 从 Javascript 中的 URL 中提取一部分

> ID：15955376
> 
> 赞同：-5
> 
> 时间：2013-04-11T17:42:08.970
> 
> 标签：javascript, string, url, extract

我有一个字符串：

```
http://a.long.url/can/be/here/jquery.min.js?207 
```

我需要`http://a.long.url/can/be/here/`使用 Javascript 提取基本 URL。所以它应该`/`从右边开始分割。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:47:12.040

```
url.substring(0, url.lastIndexOf("/") + 1) 
```

`+ 1`如果您最后不想要 /，请删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:52:07.350

试试这个

```
var url = 'http://a.long.url/can/be/here/jquery.min.js?207';
var path = url.split( '/' );
var stripped = "";
for ( i = 0; i < path.length-1; i++ ) {
    if(i>0) stripped += "/";
    stripped += path[i];
}
alert(stripped) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:46:46.760

```
var url = "http://my.com:8080/path/bob.js?query"

var col1 = url.indexOf("?");
if (col1 > 0) {
    var col = url.substring(0,col1).lastIndexOf("/");
} else {
    col = url.lastIndexOf("/");
}

var extracted = url.substring(0, col); 
```

不检查错误。（例如，如果`url`字符串根本没有斜杠怎么办。它不是一个有效的 URL，但它可以传递给这个代码。）还要注意，如果问号是第一个字符，它就不起作用。

# java - Android 和运行 JVM 的服务器之间的动态代码加载

> ID：15955382
> 
> 赞同：1
> 
> 时间：2013-04-11T17:42:56.010
> 
> 标签：java, android, rmi

我目前正在开发一个 Android 框架，该框架可以将方法调用委托给服务器（运行 JVM），服务器将执行方法并返回结果，因此它将以非常相似的方式运行到著名的 Java RMI。我们的团队也有一个实现动态代码加载的计划，这样即使它还不知道类的实现，你也可以在服务器上执行 Android 类的方法（它会先下载对象类的定义） .

因此，我试图找出在运行时将 Android 类导出到服务器的最佳方式。主要问题是，Dalvik 对`*.dex`具有不同结构的文件进行操作，并且与`*.class`典型 JVM 执行的文件的处理方式不同。

到目前为止，我们一直在考虑指定 dx 工具`*.class`在编译源代码时应该保留某些文件。有这样一个选项`--keep-classes`，但它会全局保留类，而我们不需要`*.class`每个类的文件。此外，据我所知，没有办法从 ADT Eclipse 管理 dx 工具选项。

您认为哪种方法最适合我们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:39:24.707

如果相反，您将脚本传递给服务器怎么办？Java可以在运行时运行脚本，支持python、ruby、javascript等。

请参阅此处： [通过脚本引擎 (jython) 从 Java 调用 Python？](https://stackoverflow.com/questions/2671768/calling-python-from-java-through-scripting-engine-jython)

在这里： [http ://www.ibm.com/developerworks/java/library/j-javascripting1/](http://www.ibm.com/developerworks/java/library/j-javascripting1/)

您仍然需要做一些工作来弄清楚如何将结果传回。

# java - 如何在Java中截断n个单词后的字符串？

> ID：15955384
> 
> 赞同：1
> 
> 时间：2013-04-11T17:43:03.967
> 
> 标签：java, string

是否有库具有在 n 个单词后截断字符串的例程？我正在寻找可以转动的东西：

```
truncateAfterWords(3, "hello, this\nis a long sentence"); 
```

进入

```
"hello, this\nis" 
```

我可以自己编写，但我认为某些开源字符串操作库中可能已经存在类似的东西。

* * *

以下是我希望任何解决方案都能通过的测试用例的完整列表：

```
import java.util.regex.*;

public class Test {

    private static final TestCase[] TEST_CASES = new TestCase[]{
        new TestCase(5, null, null),
        new TestCase(5, "", ""),
        new TestCase(5, "single", "single"),
        new TestCase(1, "single", "single"),
        new TestCase(0, "single", ""),
        new TestCase(2, "two words", "two words"),
        new TestCase(1, "two words", "two"),
        new TestCase(0, "two words", ""),
        new TestCase(2, "line\nbreak", "line\nbreak"),
        new TestCase(1, "line\nbreak", "line"),
        new TestCase(2, "multiple  spaces", "multiple  spaces"),
        new TestCase(1, "multiple  spaces", "multiple"),
        new TestCase(3, " starts with space", " starts with space"),
        new TestCase(2, " starts with space", " starts with"),
        new TestCase(10, "A full sentence, with puncutation.", "A full sentence, with puncutation."),
        new TestCase(4, "A full sentence, with puncutation.", "A full sentence, with"),
        new TestCase(50, "Testing a very long number of words in the testcase to see if the solution performs well in such a situation.  Some solutions don't do well with lots of input.", "Testing a very long number of words in the testcase to see if the solution performs well in such a situation.  Some solutions don't do well with lots of input."),
    };

    public static void main(String[] args){
        for (TestCase t: TEST_CASES){
            try {
                String r = truncateAfterWords(t.n, t.s);
                if (!t.equals(r)){
                    System.out.println(t.toString(r));
                }
            } catch (Exception x){
                System.out.println(t.toString(x));
            }       
        }   
    }

    public static String truncateAfterWords(int n, String s) {
        // TODO: implementation
        return null;
    }
}

class TestCase {
    public int n;
    public String s;
    public String e;

    public TestCase(int n, String s, String e){
        this.n=n;
        this.s=s;
        this.e=e;
    }

    public String toString(){
        return "truncateAfterWords(" + n + ", " + toJavaString(s) + ")\n  expected: " + toJavaString(e);
    }

    public String toString(String r){
        return this + "\n  actual:   " + toJavaString(r) + "";
    }

    public String toString(Exception x){
        return this + "\n  exception: " + x.getMessage();
    }    

    public boolean equals(String r){
        if (e == null && r == null) return true;
        if (e == null) return false;
        return e.equals(r);
    }   

    public static final String escape(String s){
        if (s == null) return null;
        s = s.replaceAll("\\\\","\\\\\\\\");
        s = s.replaceAll("\n","\\\\n");
        s = s.replaceAll("\r","\\\\r");
        s = s.replaceAll("\"","\\\\\"");
        return s;
    }

    private static String toJavaString(String s){
        if (s == null) return "null";
        return " \"" + escape(s) + "\"";
    }
} 
```

* * *

这个网站上有其他语言的解决方案：

*   [Ruby：将字符串截断为前 n 个单词](https://stackoverflow.com/questions/6235762/truncate-string-to-the-first-n-words)
*   [PHP：如何截断字符串](https://stackoverflow.com/questions/965235/how-can-i-truncate-a-string-in-php)
*   [Ruby on Rails：仅显示rails中字符串的前x个单词](https://stackoverflow.com/questions/7049116/displaying-only-the-first-x-words-of-a-string-in-rails)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T18:03:27.933

您可以使用一个简单的基于正则表达式的解决方案：

```
private String truncateAfterWords(int n, String str) {
   return str.replaceAll("^((?:\\W*\\w+){" + n + "}).*$", "$1");    
} 
```

**现场演示：http: [//ideone.com/Nsojc7](http://ideone.com/Nsojc7)**

### 更新：根据您的意见解决性能问题：

在处理大量单词时使用以下方法以获得更快的性能：

```
private final static Pattern WB_PATTERN = Pattern.compile("(?<=\\w)\\b");

private String truncateAfterWords(int n, String s) {
   if (s == null) return null;
   if (n <= 0) return "";
   Matcher m = WB_PATTERN.matcher(s);
   for (int i=0; i<n && m.find(); i++);
   if (m.hitEnd())
      return s;
   else
      return s.substring(0, m.end());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:04:00.940

我找到了一种使用[java.text.BreakIterator](http://docs.oracle.com/javase/6/docs/api/java/text/BreakIterator.html)类的方法：

```
private static String truncateAfterWords(int n, String s) {
    if (s == null) return null;
    BreakIterator wb = BreakIterator.getWordInstance();
    wb.setText(s);
    int pos = 0;
    for (int i = 0; i < n && pos != BreakIterator.DONE && pos < s.length();) {
        if (Character.isLetter(s.codePointAt(pos))) i++;
        pos = wb.next();
    }
    if (pos == BreakIterator.DONE || pos >= s.length()) return s;
    return s.substring(0, pos);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:07:00.730

这是一个使用正则表达式在循环中查找下一组空格的版本，直到它有足够的单词。类似于 BreakIterator 解决方案，但使用正则表达式来迭代单词中断。

```
// Any number of white space or the end of the input
private final static Pattern SPACES_PATTERN = Pattern.compile("\\s+|\\z");

private static String truncateAfterWords(int n, String s) {
    if (s == null) return null;
    Matcher matcher = SPACES_PATTERN.matcher(s);
    int matchStartIndex = 0, matchEndIndex = 0, wordsFound = 0;
    // Keep matching until enough words are found, 
    // reached the end of the string, 
    // or no more matches
    while (wordsFound<n && matchEndIndex<s.length() && matcher.find(matchEndIndex)){
        // Keep track of both the start and end of each match
        matchStartIndex = matcher.start();
        matchEndIndex = matchStartIndex + matcher.group().length();
        // Only increment words found when not at the beginning of the string
        if (matchStartIndex != 0) wordsFound++;
    }
    // From the beginning of the string to the start of the final match
    return s.substring(0, matchStartIndex);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T17:54:17.293

尝试在 Java 中使用正则表达式。仅检索 n 个单词的正则表达式是：`(.*?\s){n}`.

尝试使用代码：

```
String inputStr= "hello, this\nis a long sentence";
Pattern pattern = Pattern.compile("(.*?[\\s]){3}", Pattern.DOTALL); 
Matcher matcher = pattern.matcher(inputStr);
matcher.find(); 
String result = matcher.group(); 
System.out.println(result); 
```

要了解有关软件包的更多信息：

*   [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html)
*   [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#DOTALL](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#DOTALL)

# python - OpenERP ver 7 - Security.xml 的解释

> ID：15955389
> 
> 赞同：3
> 
> 时间：2013-04-11T17:43:30.843
> 
> 标签：python, xml, openerp

```
<?xml version="1.0" ?>
<openerp>
    <data>
        <record model="ir.module.category" id="module_lunch_category">
            <field name="name">Lunch</field>
            <field name="description">Helps you handle your lunch needs, if you are a manager you will be able to create new products, cashmoves and to confirm or cancel orders.</field>
            <field name="sequence">16</field>
        </record>
        <record id="group_lunch_user" model="res.groups">
            <field name="name">User</field>
            <field name="category_id" ref="module_lunch_category"/>
        </record>
        <record id="group_lunch_manager" model="res.groups">
            <field name="name">Manager</field>
            <field name="implied_ids" eval="[(4, ref('group_lunch_user'))]"/>
            <field name="category_id" ref="module_lunch_category"/>
            <field name="users" eval="[(4, ref('base.user_root'))]"/>
        </record>
    </data>
</openerp> 
```

我现在坚持对我的应用程序进行安全处理。它的代码[在这里显示](https://github.com/priyankahdp/openerp)

我还参考文档以阐明上述 xml 代码。但我在文档中对第 7 版没有很好的解释。我需要澄清以下部分。请建议我清楚地了解它

**请解释**

ir.module.category 是什么意思。？

```
<record model="ir.module.category" id="module_lunch_category"> 
```

model="res.groups" 是什么意思。？

```
<record id="group_lunch_user" model="res.groups"> 
```

需要澄清整个以下行

```
<field name="implied_ids" eval="[(4, ref('group_lunch_user'))]"/> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T05:07:43.213

```
1\. <record model="ir.module.category" id="module_lunch_category"> 
```

这用于通过您的应用程序名称（如购买、仓库或您自己的模块）创建类别。对于属于该模块的特定组，它只是您的模块的名称 就像您的模块名称 bpl 然后您在 ir.module.category 中创建一个**BPL**。

```
2\. <record id="group_lunch_user" model="res.groups"> 
```

这用于为此应用程序创建组，就像您创建用户并且您想授予应用程序的该用户访问权限，然后将此组添加到您的用户。

出于安全原因，您希望提供一些菜单，一些字段由不同的用户访问，因此您创建组。就像您创建“USER”和**MANAGER**组一样。

```
<record model="res.groups" id="group_bpl_manager">
            <field name="name">Manager</field>
        </record>

<record model="res.groups" id="group_bpl_user">
            <field name="name">User</field>
        </record> 
```

您在经理组中创建的这两个组可以访问所有菜单和所有字段，但用户组的访问权限有限，因此您要授予哪个用户完全访问权限，您分配经理组和有限访问权限，然后您将用户组分配给该用户.

```
3.<field name="implied_ids" eval="[(4, ref('group_lunch_user'))]"/> 
```

正如在**此组的用户中定义的自动继承这些组**意味着当您将此组分配给任何用户时，它也会自动访问此字段中给出的所有组**implicit_ids**。

分配给某个用户时的 BPL 管理器组示例，当您分配该组时，您还希望将许多其他组分配给该用户，然后在“Inherited” **implicit_ids**字段中将许多其他组添加到该组

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T06:09:56.503

您也可以参考OpenERP中的Base、Sale、Account、Purchase、Manufacturing、Stock...模块，供您参考。它们在安全方面都得到了很好的维护。

# java - 不想在 Java 中将私有设置为默认值

> ID：15955390
> 
> 赞同：-3
> 
> 时间：2013-04-11T17:43:33.607
> 
> 标签：java, default, private, access-specifier

我在一堂课上有这个：

```
if (people.count < 10)
    return false; 
```

但是*count*用红色标记，表示 *将 count 的可见性更改为默认值*

*count*在另一个类中是私有的。但我不想将其更改为默认值。我知道这是一种不好的做法。我怎样才能让它在没有 setter 和 getter 的情况下工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:45:02.420

您可以更改可见性或公开 getter。要求另一种方法来做到这一点实际上是在问，“我怎样才能在不暴露变量的情况下暴露它？” 所以，你的电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:46:36.420

该字段`count`是私有的，因为它[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)在类中。除了通过类的非私有成员之外，您不打算访问它。

将其访问权限更改为“默认”很容易但有害。

通过一些技巧（反射、本机方法……）访问它会更加复杂并且仍然有害。

暴露一个吸气剂很容易也很合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:45:19.540

```
if (people.getCount() < 10)
    return false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:46:19.153

你只有两个选择；更改可见性或使用 getter 和 setter。使用 getter 和 setter 的优点是它遵循封装原则，这在 Java 中很重要。

# torque - Torque 无法确定本地服务器主机名

> ID：15955392
> 
> 赞同：1
> 
> 时间：2013-04-11T17:43:49.017
> 
> 标签：torque

当我尝试在开放堆栈中创建的 vm 上运行“torque.setup”时，我收到错误“无法确定本地服务器主机名”

在任何其他虚拟机管理程序中创建的 VM 上安装扭矩不会出错，并且可以正常工作。

```
[root@cent63 github]# /var/spool/torque/github/torque.setup root
initializing TORQUE (admin: root@cent63)
PBS_Server: LOG_ERROR::pbsd_main, unable to determine local server hostname -     getaddrinfo(cent63) failed, h_errno=1
ERROR: pbs_server failed to start, check syslog and server logs for more information

cat /etc/hosts
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

[root@cent63 github]# hostname
cent63

[root@cent63 github]# service iptables status
iptables: Firewall is not running. 
```

主机名已设置，那么扭矩在抱怨什么？

```
vim src/server/pbsd_main.c

    snprintf(server_host, PBS_MAXHOSTNAME, "%s", optarg);

    if (get_fullhostname(server_host, server_host, PBS_MAXHOSTNAME, EMsg) == -1)
      {
      /* FAILURE */

      if (EMsg[0] != '\0')
        {
        char tmpLine[1024];

        snprintf(tmpLine, sizeof(tmpLine),
            "unable to determine full hostname for specified server host '%s' - %s",
            server_host, EMsg);

        log_err(-1, __func__, tmpLine);
        }
      else
        {
        log_err(-1, __func__, "unable to determine full server hostname");
        }

      exit(1);
      } 
```

*更新*：看起来我没有完全限定的主机名。

```
[root@cent63 github]# hostname -f
hostname: Unknown host 
```

到目前为止，向 /etc/hosts 添加主机名并没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:05:56.453

功能

```
get_fullhostname(server_host, server_host, PBS_MAXHOSTNAME, EMsg) 
```

是否相当于主机名 -f

我通过将 vm 的 IP 地址添加到 /etc/hosts 文件来解决它

```
10.2.191.12 cent63 
```

# jenkins - 如何避免 jenkins 通知被 gmail 垃圾邮件过滤器捕获

> ID：15955395
> 
> 赞同：1
> 
> 时间：2013-04-11T17:43:56.237
> 
> 标签：jenkins, gmail

*   我正在使用 Jenkins 构建服务器。
*   我只向自己发送不稳定的构建通知。
*   我使用的电子邮件是真实的并且在我的域中
*   我可以访问域管理控制台（如果可能有帮助）

我发送的电子邮件目前从我开始发送它们的那一刻起就被垃圾邮件过滤器捕获。

我可以使用哪些方法（在这些限制内）确保我的邮件通过垃圾邮件过滤器？

编辑：为了清楚起见，我知道我可以单击“非垃圾邮件”链接并为自己解决问题，但是当我将其连接到更多开发人员时，它可能再次被视为垃圾邮件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:51:21.403

所以这里有一些有用的信息，我发现可以解决这个问题。

*   第一个相关位置是管理仪表板 -> 服务 -> Gmail -> 常规设置 -> 垃圾邮件。
*   首先，您可以设置“绕过从内部发件人收到的邮件的垃圾邮件过滤器”。-*没有帮助*
*   然后，您可以在下面添加一组通过垃圾邮件过滤器的新地址或域 - 我创建了一个新组并添加了我需要的电子邮件。地址列表下方有一个复选框“不需要发件人身份验证（不推荐）”。如果我标记这个不推荐的框 -*它可以工作*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T08:43:55.860

Jenkins 向 gmail 发送电子邮件报告

在此处打开对安全性较低的应用的[gmail 访问 gmail 应用访问更改](https://www.google.com/settings/u/1/security/lesssecureapps)

Jenkins 配置，在电子邮件通知设置下

```
E-mail Notification
SMTP server     - smtp.gmail.com
Default user e-mail suffix  -   gmail.com
User Name       - your gmail account username
Password        - your gmail account password
Use SSL         - yes
SMTP Port       - 465
Reply-To Address    - reply email   
Charset     -UTF-8 
```

# iphone - iPhone开发中的方向不正确

> ID：15955396
> 
> 赞同：0
> 
> 时间：2013-04-11T17:43:57.743
> 
> 标签：iphone, objective-c, xcode, ipad

我为 iPhone 和 iPad 开发了一个通用应用程序。使用 Targets 中的“支持的界面方向”选项（在 Xcode 项目中），我设置了所需的配置，一个用于 iPhone，另一个用于 iPad。iPhone（5.1 和 6.1）没有问题，但在 iPad 上，我看到 5.1 固件中的方向不正确（不像之前写的那样设置）。对于装有 iOS 6.1 的 iPad，该应用程序可以正常工作。

我已经阅读了另一个 stackoverflow 的问题，有一个解决方案：引入以下代码，问题将是正确的。

```
-(NSInteger)supportedInterfaceOrientations{
return UIInterfaceOrientationLandscapeRight;
}
// pre-iOS 6 support
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
return UIInterfaceOrientationLandscapeRight;
} 
```

就我而言，问题仍然存在。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:48:40.123

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return toInterfaceOrientation == UIInterfaceOrientationLandscapeRight;
} 
```

在您的情况下，上述方法始终返回 YES（大于 0 的 int），这样对于所有其他界面方向，它将返回 no。

您可能希望重构代码以支持两种横向方向，但将视图锁定为仅一种横向方向是一种不好的做法。

# ios - 在 xcode 中将按钮图像设置为从库中选择的图像

> ID：15955398
> 
> 赞同：0
> 
> 时间：2013-04-11T17:43:59.400
> 
> 标签：ios, xcode, image, button

我正在制作一个应用程序，我在其中选择一个按钮，它会引导我到图书馆选择一张图片。我希望选择的图片成为按钮的主图像。有谁能够帮我？

这是我用来访问库的代码：

```
- (IBAction)image1Pressed:(id)sender {

if([UIImagePickerController isSourceTypeAvailable:
    UIImagePickerControllerSourceTypePhotoLibrary])
{
    UIImagePickerController *picker1= [[UIImagePickerController alloc]init];
    picker1.delegate = self;
    picker1.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentViewController:picker1 animated:YES completion:nil];
    [picker1 release];
}
} 
```

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:50:38.540

您需要为按钮创建一个插座，我们将其命名为“imageButton”。让图像选择器完成剩下的工作：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
UIImage *btnImage = [info objectForKey:UIImagePickerControllerOriginalImage];
    [imageButton setImage:btnImage forState:UIControlStateNormal];
} 
```

完毕。

# emacs - 使用 Aquamacs 2.4 (OSX Mountain Lion) 自动显示空格

> ID：15955400
> 
> 赞同：1
> 
> 时间：2013-04-11T17:44:06.920
> 
> 标签：emacs, dot-emacs

适用于 OSX 的 Aquamacs 2.4 旨在使用`Preferences.el`而`customizations.el`不是`~/.emacs`

* * *

首选项.el

```
(require 'whitespace)

;; This is for files previously created and then opened with Aquamacs.
(global-whitespace-mode t)

;; This is needed for new files and/or the scratch buffer.
;; Add additional hooks for each mode desired.
(add-hook 'text-mode-hook 
  (function (lambda ()
              (whitespace-mode t))))

;; These are keyboard shortcuts -- \C is ctrl; a hyphen is a pause.
(global-set-key "\C-cw" 'global-whitespace-mode)
(global-set-key "\C-c\C-w" 'whitespace-mode)
(global-set-key "\C-c=t" 'global-whitespace-toggle-options)
(global-set-key "\C-c_t" 'whitespace-toggle-options) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:40:11.170

`M-x customize-group whitespace`，并启用全局空白模式。如果您不喜欢默认的空白显示方式，请自定义空白显示映射。

# python - 搜索特定字符串，复制到文本文件中，如果不存在，则产生错误

> ID：15955401
> 
> 赞同：0
> 
> 时间：2013-04-11T17:44:07.303
> 
> 标签：python, string, copy, text-files

这类似于我之前提出的问题。但我决定让它更复杂一点。

我正在制作一个可以读取文本文件并将文本文件的特定部分复制到另一个文本文件中的程序。但是，我也想生成错误消息。

例如，我的文本文件如下所示：

```
* VERSION_1_1234
#* VERSION_2_1234
* VERSION_3_1234
#* VERSION_2_4321 
```

到目前为止，我的程序查看了“VERSION_2”的行并将该行复制到另一个文本文件中。

但是现在，我希望它搜索“VERSION_3”，如果它同时找到“VERSION_2”和“VERSION_3”，它会产生错误。

这是我到目前为止所拥有的：

```
with open('versions.txt', 'r') as verFile:
    for line in verFile:
        # if pound sign, skip line
        if line.startswith('#'):
            continue
        # if version_3 there, copy
        if 'VERSION_3_' in line:
            with open('newfile.txt', 'w') as wFile:
            wFile.write(line.rpartition('* ')[-1])
        # if version_2 there, copy
        if 'VERSION_2_' in line:
            with open('newfile.txt', 'w') as wFile:
            wFile.write(line.rpartition('* ')[-1])
        # if both versions there, produce error
        if ('VERSION_3_' and 'VERSION_2_') in line:
            print ('There's an error, you have both versions in your text file')
        # if no versions there, produce error
        if not ('VERSION_3_' and 'VERSION_2_') in line:
            print ('There's an error, you don't have any of these versions in your text file') 
```

对不起，如果它看起来有点混乱。但是，当我运行程序时，它按原样运行，但即使有 VERSION_3 行，它也会打印出最后两条错误消息。我不明白为什么。我做错了什么。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:45:41.620

你的逻辑有缺陷；`('VERSION_3_' and 'VERSION_2_') in line`不做你认为它做的事。

你要：

```
'VERSION_3_' in line and 'VERSION_2_' in line 
```

反而。相似地：

```
not ('VERSION_3_' and 'VERSION_2_') in line 
```

应该：

```
'VERSION_3_' not in line and 'VERSION_2_' not in line 
```

相反，表达式`('VERSION_3_' and 'VERSION_2_') in line`can 被解释为，因为在布尔上下文`'VERSION_2_' in line`中考虑任何非空字符串，因此返回就像运算符返回第二个字符串一样，然后针对运算符进行测试：`True``'VERSION_3_' and 'VERSION_2_'``'VERSION_2_'``and``in`

```
>>> bool('VERSION_3_' and 'VERSION_2_')
True
>>> 'VERSION_3_' and 'VERSION_2_'
'VERSION_2_' 
```

我确实怀疑即使使用这些修复程序，您的代码也无法正常工作；您一次测试一行，并且您的输入示例在*单独的行*`VERSION_`中包含字符串。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:33:14.703

忽略语法错误，因为 Martijn 做了一个很好的工作来澄清这一点，您需要某种逻辑来跟踪是否在文件中找到了文本。现在你正在检查它们是否在同一行，这不是你说你想做的。

```
with open('versions.txt', 'r') as verFile, open('newfile.txt', 'w') as wFile:
    version2,version3 = '',''
    for line in verFile:
        # if pound sign, skip line
        if line.startswith('#'):
            continue
        # if version_2 there, store
        if 'VERSION_2_' in line:
            version2 = line
        # if version_3 there, store
        if 'VERSION_3_' in line:
            version3 = line
        # if both versions there, produce error and stop
        if version2 and version3:
            print "There's an error, you have both versions in your text file"
            break
    else:
    # write out found version
        if version2:
            wFile.write(version2.rpartition('* ')[-1])
        elif version3:
            wFile.write(version3.rpartition('* ')[-1])
        else:
            print "There's an error, you don't have any of these versions in your text     file" 
```

如果任一版本有多个查找，这将返回最后一个。如果每个只有一个无关紧要，但如果您需要第一个，或者如果您有多个相同版本的查找结果想要返回错误，则必须稍微更改它。*

# java - 循环期间堆栈上会发生什么？

> ID：15955408
> 
> 赞同：1
> 
> 时间：2013-04-11T17:44:42.333
> 
> 标签：java, stack

当一个方法被调用时，JVM 知道为它分配多少空间。

但如果我有这样的代码：

```
while(someCondition) {
   Path p = someMethodThatReturnsAPath();
    //do some things
} 
```

堆栈上发生了什么？这是发生了什么吗？：

*   列出它在堆栈上创建一个指向的指针（指向从方法返回的 Path 的指针）
*   有些事情已经完成
*   p，或“指向 Path 对象的指针的指针”从堆栈中删除
*   重复

上面的代码与以下代码之间是否存在任何（即使很小）性能差异：

```
Path p = null;
while(someCondition) {
    p = someMethodThatReturnsAPath();
    //do some things
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:59:50.157

这取决于。如果您关闭 Hotspot，那么性能可能会存在很小的差异，并且事情的运行方式几乎与您在上面所期望的方式相同。随着 Hotspot 的参与，现代 JVM 通常使用一组分层的编译器来动态优化代码。通常 JVM 开始解释，然后在方法的多次迭代（包括方法中的循环）之后，该方法将在后台线程中进行优化，并在某个点与解释版本交换出来。然后在其他触发器上可能会发生更多优化，或者由于新信息而必须恢复。您可能会发现，如果 JVM 可以证明它不起作用并且没有副作用，那么对循环中的方法的调用会完全消失，或者循环可能会展开。

判断发生了什么的一个好方法是添加一些 JVM 标志。以下标志将告诉您何时优化方法 -XX:+PrintCompilation（并在此处记录[https://gist.github.com/rednaxelafx/1165804#file_notes.md](https://gist.github.com/rednaxelafx/1165804#file_notes.md)）和 -XX:+UnlockDiagnosticVMOptions -XX:+ PrintAssembly 将为您提供在 C1 和 C2 编译器启动时生成的汇编代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T23:42:16.223

方法所需的所有堆栈都在进入该方法时分配，并在离开时释放。查看生成的字节码。没有对应于进入或离开内部块的字节码指令。局部变量的字节码只是按编号引用现有的堆栈槽。

因此，指针根本不会“从堆栈中移除”。堆栈槽可能会被内部块范围之外的后续声明重用：这是另一回事。

请注意，与其他答案和评论相反，HotSpot 不会在任何地方出现。HotSpot 无法优化不存在的指令。（但是，它可以*消除*确实存在的代码。）

# c# - Winform Datagridview 句柄选项卡和箭头键

> ID：15955411
> 
> 赞同：4
> 
> 时间：2013-04-11T17:45:06.700
> 
> 标签：c#, winforms, datagridview, keydown

我想处理 DataGridView 单元格上的 KeyDown 事件。我使用以下代码在单元格上获取 KeyDown 事件：

```
private void dgvData_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {

            var tb = (DataGridViewTextBoxEditingControl)e.Control;

            tb.KeyDown += cell_KeyDown;
        } 
```

但看起来我无法处理一些特殊的键，如制表符和箭头。这些键不会转到我的 cell_KeyDown 方法。所以我尝试在 DataGridView 的 KeyDown 事件中处理它们：

```
private void dgvData_KeyDown(object sender, KeyEventArgs e)
{
// handle keys
} 
```

在那种情况下，我仍然无法捕获 Tab 键。我可以捕获箭头键，但是，在处理我的自定义事件之后，它仍然会通过箭头转到其他单元格。我想留在牢房里。

然后我像这样扩展 DataGridView：

```
class DataGridViewSp : DataGridView
    {

        protected override bool ProcessDialogKey(Keys keyData)
        {
            if (keyData == Keys.Tab)
            {
                //todo special handling
                return true;
            }

            else if (keyData == Keys.Down)
            {
                //todo special handling
                return true;
            }

            else if (keyData == Keys.Up)
            {
                //todo special handling
                return true;
            }
            else
            {
                return base.ProcessDialogKey(keyData);
            }
        }
    } 
```

现在我可以在这个重写的 ProcessDialogKey 方法中捕获 Tab 键。但是，它仍然没有捕获向下和向上箭头键。有什么不对的吗？

完美的解决方案是在单元格编辑模式下，它以我的方式处理选项卡和箭头键并留在单元格中。在网格中时，箭头键和 Tab 键以正常方式工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:50:03.210

而不是`ProcessDialogKey`使用`ProcessCmdKey`. 然后，您将捕获所需的所有密钥。

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData) {
    if (keyData == Keys.Tab)
    {
        //todo special handling
        return true;
    }
    return base.ProcessCmdKey(ref msg, keyData);
} 
```

# ember.js - 带有变量的 Ember.js 路由器

> ID：15955413
> 
> 赞同：0
> 
> 时间：2013-04-11T17:45:15.113
> 
> 标签：ember.js, ember-router

我刚刚开始使用 Ember.js，但遇到了第一个障碍！

`/username/action`例如，我的 URL 结构是`/matt/feed`（或仅`/matt`使用默认视图）。

但是，虽然我已经设法得到一个硬编码的用户名值来输出一些东西，但我不知道如何让 URL 的用户名部分成为一个变量，然后我可以用它来做事。

我用来硬编码用户名的代码如下，因为我不确定如何让 Ember.js 理解我的 URL，所以还没有真正得到任何地方！

```
'use strict';
window.App = Ember.Application.create();
App.Router.reopen({
    location:'history'
});
App.Router.map(function() {
    this.resource('matt');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:09:20.047

[直接来自http://emberjs.com/guides/routing/defining-your-routes/#toc_dynamic-segments](http://emberjs.com/guides/routing/defining-your-routes/#toc_dynamic-segments)的文档

```
App.Router.map(function() {
  this.resource('posts');
  this.resource('post', { path: '/post/:post_id' });
}); 
```

`:post_id`是路径的动态段。

# big-o - 渐近证明

> ID：15955415
> 
> 赞同：0
> 
> 时间：2013-04-11T17:45:17.603
> 
> 标签：big-o

假设 f1(n) 是 O(g1(n)) 并且 f2(n) 是 O(g2(n))，证明 f1(n)/f2(n) 不是 O(g1(n)/g2(n) ). 我实际上已经解决了 F1/f2=c1/c2 但这如何表明它们不相等。我对此有疑问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:49:11.697

这不是真的，那`f1/f2 = c1/c2`。作为提示，如果你想证明它是不正确的，举个反例就足够了。想想什么时候除法可以使结果大于我们除法。

# c++ - 如何在 Windows 上启用 ssl 编译 gSoap？

> ID：15955418
> 
> 赞同：1
> 
> 时间：2013-04-11T17:45:21.273
> 
> 标签：c++, windows, mingw, gsoap

我正在尝试构建具有 ssl 支持的 gSoap 二进制文件。我已经从这个网站下载了最新的 gSoap 和 WIN32 openssl 二进制文件：http: [//slproweb.com/products/Win32OpenSSL.html](http://slproweb.com/products/Win32OpenSSL.html)

根据[gSoap 文档](http://www.cs.fsu.edu/~engelen/soapdoc2.html#tth_sEc19.22/)，我必须使用启用 DWITH_OPENSSL 选项的标准过程进行编译。我认为最自然的选择是你使用 minGW，但我对这个工具没有什么经验。当我尝试这个时，（在应用[这个补丁](https://github.com/mxe/mxe/blob/master/src/gsoap-1-fixes.patch)之后，我留下了两个缺少的库一个链接时间：-lssl 和 -lcrypto。

我想我必须在编译指令中添加一个 -L 选项，但我在 openssl lib 文件夹中看不到任何 libssl 或 libcrypto（应该是 .a 还是 .lib ？）。我必须重新编译这些还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:53:54.603

好的，我终于成功了，这是我使用的不同步骤：

1.  [首先，我必须使用 mingw 重建 openssl，因为Shining Light Production](http://slproweb.com/products/Win32OpenSSL.html)提供的二进制文件没有附带静态库。我把 openssl 文件夹放在 c:/openssl/

2.  然后，在 stdsoap2.h 中，我将第 2247 行更改为：

    ```
    #if defined(WIN32) && !defined(__MINGW32__)
    #define soap_strtoll _strtoi64
    #else
    # define soap_strtoll strtoll
    #endif

    #if defined(WIN32) && !defined(__MINGW32__)    
    # define soap_strtoull _strtoui64
    #else
    # define soap_strtoull strtoull
    #endif 
    ```

3.  在配置文件中：

    *   我删除了所有出现的 -DWITH_GZIP 和 -lz。
    *   我添加了 -lws2_32 链接器选项（我认为支持 winsocket）配置文件中的这些更改位于第 7338-7347 行：

        ```
        WSDL2H_EXTRA_FLAGS="-DWITH_GNUTLS"
        WSDL2H_EXTRA_LIBS="-lgnutls -lgcrypt -lgpg-error"
        SAMPLE_SSL_LIBS="-lgnutls -lgcrypt -lgpg-error"
        WSDL2H_SOAP_CPP_LIB="libgsoapssl++.a"
        else
        { echo "$as_me:$LINENO: result: no" >&5
        echo "${ECHO_T}no" >&6; }
        WSDL2H_EXTRA_FLAGS="-DWITH_OPENSSL"
        WSDL2H_EXTRA_LIBS="-lssl -lcrypto -lws2_32"
        SAMPLE_SSL_LIBS="-lssl -lcrypto -lws2_32" 
        ```

4.  我在 mingw 中运行 configure 添加了正确的 LDFLAGS 和 CXXFLAGS，即：

    ```
    LDFLAGS+=" -L/c/openssl/ -L/c/MinGW/lib/" CXXFLAGS+=" -I/c/openssl/include/" ./configure 
    ```

5.  我跑了make并交叉手指！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:49:08.380

是的，据我所知，如果您使用`minGW`第一次安装`openssl`，然后添加路径 + 标志，如下例所示：

```
gcc -I/include/
-I/local/include
-L/local/lib
     -o download_file download_file.c  -llibcurl -lcurl 
```

在这里我编译基本`C`文件。

或者，如果您`./configure`像这样运行添加标志：

```
LDFLAGS+="-L/local/lib -lcurl"  LIBS+=-I/local/include .... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-08T14:06:03.223

您还可以使用更“原生”的方式，即。Visual Studio C 编译器。然而，这不是很简单。

首先，编译 openssl（对 VS 2015 社区版有效，但我相信任何 2015 都可以）：

*   下载openssl源码，解压到某个文件夹
*   下载 PERL for windows（ActivePerl 或 Straberry Perl - 这个是免费的）并安装
*   从菜单开始打开“打开 Visual Studio 2015 工具命令提示符”
*   cd 到 openssl 未压缩的源文件夹

在那里运行以下命令（这组使用不带汇编程序的版本）：

```
perl Configure VC-WIN32 no-asm --prefix=c:\some\openssl\dir
ms\do_ms
nmake -f ms\ntdll.mak
nmake -f ms\ntdll.mak test - optional step
nmake -f ms\ntdll.mak install 
```

之后，您的 openssl 产品安装在 c:\some\openssl\dir

接下来，要编译支持 SSL 的基于 gSoap 的应用程序，您必须添加以下设置（所有设置都在 Visual Studio 中的“项目->属性”中完成）：

*   C/C++ --> General，在 Additional Include Directories 中，将“c:\some\openssl\dir\include”文件夹添加到列表中
*   C/C++ --> 命令行，在“附加选项”框中，输入：/DWITH_OPENSSL
*   Linker --> Input, Additional Dependencies：将“c:\some\openssl\dir\lib\libeay32.lib”和“c:\some\openssl\dir\lib\sskeay32.lib”添加到列表中

如果您已经使用 wsdl2h.exe 和 soapcpp2.exe 工具生成了类，那么您就差不多完成了。验证您的 stdsoap2.cpp 文件是否包含以下行：

```
#include <openssl\ssl.h>
#include <openssl\rsa.h> 
```

如果没有，您可以在第一个 #ifdef WITH_OPENSSL 之后添加它们

这就是我的项目的全部内容。我可以使用 VC2015 编译并像任何其他应用程序一样运行/调试。

祝你好运。

# mysql - 在 MySql 中将 MD5 转换为 2 Bigint 时超出范围值

> ID：15955422
> 
> 赞同：2
> 
> 时间：2013-04-11T17:45:31.793
> 
> 标签：mysql, md5, bigint

在数据库（MySql）中，我正在存储一些字符串值并在存储它们之前检查这些字符串的唯一性。

对于快速字符串比较（我的意思是在记录之前检查传入的字符串是否已经存在于数据库中）我想拥有传入的字符串（MD5），将字符串分成2等份，将它们转换为2个bigint，将它们分开存储使用字符串，当记录请求到达时，我想在多列索引中搜索这两个 bigint。（当然我会得到传入的字符串，MD5那个字符串，计算2个bigint部分然后查询数据库）

但是下面的“第 3 行”在我的“MySql 例程”中产生了一个有趣的错误。

```
...
declare mystring varchar(3000); -- line 1
declare md5bigint1value bigint; -- line 2
...

set md5bigint1value = conv(substring((md5(mystring)),1,16),16,10); -- line 3
... 
```

在“第 3 行”它说：错误代码：1264。第 1 行的列“md5bigint1value”的值超出范围

有谁知道为什么会这样？

如果您需要更多信息，请告诉我。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T18:01:57.477

[CONV](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_conv)与正 to_base 一起使用时，转换为无符号值，而`BIGINT`有符号。无符号 64 位值不一定适合有符号 64 位变量。

> 如果 to_base 为负数，则将 N 视为有符号数。否则，N 被视为无符号。

您要做的是`-10`用于目标基地，即；

```
set md5bigint1value = conv(substring((md5(mystring)),1,16),16,-10); -- line 3 
```

[用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/47b0c/1)（10 不起作用，-10 会）。

# android - onDrawFrame 内 glDrawArrays 上的致命信号（GLSurfaceView.Renderer，SurfaceTexture.OnFrameAvailableListener）

> ID：15955430
> 
> 赞同：1
> 
> 时间：2013-04-11T17:46:01.613
> 
> 标签：android, opengl-es-2.0, shader, textures

经过几次之后，我收到了致命信号 11

```
GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4); 
```

在我的 OnDrawFrame 函数中调用。在崩溃之前正确绘制了纹理，我相信这意味着我的顶点和片段着色器工作正常。

我想做的是使用 GLSurfaceView.Renderer 和 SurfaceTexture.OnFrameAvailableListener 将两个纹理混合在一起。

第一个纹理是实时相机预览 SurfaceTexture，它本身就可以正常工作。第二个 tetxure 只是一个位图图像，它自己也可以正常工作。但是将它们结合起来会导致崩溃。

我的 OnDrawFrame 如下：

```
public void onDrawFrame(GL10 glUnused) { 
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    synchronized(this) { 
        if (updateSurface) {
            mSurface.updateTexImage();
            mSurface.getTransformMatrix(mSTMatrix);
            updateSurface = false;
        }
    } 

    maPositionHandle = GLES20.glGetAttribLocation(mProgram, "aPosition");
    maTextureHandle = GLES20.glGetAttribLocation(mProgram, "aTextureCoord");
    muMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix"); 
    muSTMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uSTMatrix");
    muCRatioHandle = GLES20.glGetUniformLocation(mProgram, "uCRatio");

    GLES20.glBindTexture(GL_TEXTURE_EXTERNAL_OES, textures[0]);
    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    int t1h = GLES20.glGetUniformLocation ( mProgram, "sTexture1" );
    //        GLES20.glUniform1i(t1h, textures[0]);
    GLES20.glUniform1i(t1h, 1);

    GLES20.glBindTexture(GL_TEXTURE_EXTERNAL_OES, textures[1]);
    GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
    int t2h = GLES20.glGetUniformLocation ( mProgram, "sTexture2" );
    GLES20.glUniform1i(t2h, 2);

    GLES20.glUseProgram(mProgram);

    GLES20.glEnable(GLES20.GL_BLEND);
    GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA); 

    mTriangleVertices.position(0);
    GLES20.glEnableVertexAttribArray(maPositionHandle);
    GLES20.glVertexAttribPointer(maPositionHandle, 3, GLES20.GL_FLOAT, false,
            4*5, mTriangleVertices);

    mTriangleVertices.position(3);
    GLES20.glEnableVertexAttribArray(maTextureHandle);
    GLES20.glVertexAttribPointer(maTextureHandle, 3, GLES20.GL_FLOAT, false,
            4*5, mTriangleVertices);

    Matrix.multiplyMM(mMVPMatrix, 0, mVMatrix, 0, mMMatrix, 0);  
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mMVPMatrix, 0);

    GLES20.glUniformMatrix4fv(muMVPMatrixHandle, 1, false, mMVPMatrix, 0);
    GLES20.glUniformMatrix4fv(muSTMatrixHandle, 1, false, mSTMatrix, 0);
    GLES20.glUniform1f(muCRatioHandle, mCameraRatio);

    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, 0);
    GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, 0);

    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);
    GLES20.glDisableVertexAttribArray(maPositionHandle);
    GLES20.glDisableVertexAttribArray(maTextureHandle);
    //        GLES20.glFlush();
} 
```

其中 mTriangleVertices 是：

```
mTriangleVertices = ByteBuffer.allocateDirect(mTriangleVerticesData.length
            * FLOAT_SIZE_BYTES).order(ByteOrder.nativeOrder()).asFloatBuffer();
mTriangleVertices.put(mTriangleVerticesData).position(0); 
```

mTriangleVerticesData 是：

```
private final float[] mTriangleVerticesData = {
    // X, Y, Z, U, V
    -1.0f, -1.0f, 0, 0.f, 0.f,
    1.0f, -1.0f, 0, 1.f, 0.f,
    -1.0f,  1.0f, 0, 0.f, 1.f,
    1.0f,   1.0f, 0, 1.f, 1.f,
}; 
```

任何提示、链接甚至代码片段都将不胜感激！

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:52:33.100

不知道这是否是导致崩溃的原因，但您至少为着色器分配了一个过高的纹理 ID。例如;

```
GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
int t1h = GLES20.glGetUniformLocation ( mProgram, "sTexture1" );
GLES20.glUniform1i(t1h, 1); 
```

应该读

```
GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
int t1h = GLES20.glGetUniformLocation ( mProgram, "sTexture1" );
GLES20.glUniform1i(t1h, 0); 
```

编辑：啊，这可能是崩溃的原因：

```
GLES20.glVertexAttribPointer(maTextureHandle, 3, GLES20.GL_FLOAT, false,
        4*5, mTriangleVertices); 
```

它应该是

```
GLES20.glVertexAttribPointer(maTextureHandle, 2, GLES20.GL_FLOAT, false,
        4*5, mTriangleVertices); 
```

更有可能是因为每个顶点有两个纹理值。

# html - 在使用 ` 发送的数据中附加一些内容 ` 与 html？

> ID：15955435
> 
> 赞同：0
> 
> 时间：2013-04-11T17:46:45.240
> 
> 标签：html, forms, post

`<form method="post">`有没有办法在用 html发送的数据中附加/预先添加一些东西？解释：用户将“Hello World”输入到带有 的`<textarea>`元素中`name="textArea1"`。现在是否可以编写 html 以便服务器接收：

```
$_POST['textArea1'] == 'This sentence was prepended with html. Hello World'; 
```

我知道如何用 js 做到这一点，我只是好奇是否有办法只用纯 html 做到这一点。如果这不可能，有没有办法发送发出发布请求的脚本名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:56:57.687

如果您擅长使用 PHP 追加/前置，请使用以下命令：

```
$var = 'prepend... '.$_POST['textArea1'].'... and append'; 
```

正如您在帖子中所说，使用 JS 是可能的。仅使用 HTML 是不可能的。

# php - Javascript/PHP/MySQL 更改选项取决于另一个选择的选项元素

> ID：15955439
> 
> 赞同：-1
> 
> 时间：2013-04-11T17:46:50.450
> 
> 标签：php, javascript, jquery, mysql

我的表单中有 2 个元素。每当我在第一个选项中选择一个选项时，我都想更改第二个选项。

例如，我的第一个选择元素包含团队，第二个包含成员。数据包含在 MySQL 数据库中。每当我选择一个团队时，我希望第二个选择元素的选项仅显示所选团队的成员。

我不知道这是否可以仅使用 PHP 或使用 javascript 来完成。如果您能向我展示一段可以在这种情况下工作的代码，那就太好了。

谢谢，-保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:50:34.343

您需要 Javascript 来执行此操作，因为更新网页的处理在浏览器上。当用户选择团队时，需要对 PHP 脚本进行 Ajax 调用以获取详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:51:05.120

JavaScript 不能直接从浏览器访问数据库。您需要一些服务器端脚本，例如 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:53:44.093

[Ajax](http://api.jquery.com/jQuery.ajax/)是您的问题的解决方案。Ajax 允许您轻松、快速地检索信息，而无需刷新页面。您可以创建一个事件，该事件将通过 Ajax 发送您的 php 文件（您将在其中处理所有内容）的信息，然后取回您的结果并放入您的 select 语句

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:57:30.980

有很多方法可以做到这一点，哪种方法最好取决于你的能力。

正如其他人所说，最好的方法是设置一些 Ajax 功能来联系单独的 php 脚本并为其提供第一个下拉列表的值，从中返回应该放入第二个下拉列表的列表。然后，原始页面上的 javascript/ajax 代码将执行实际处理以将脚本提供的数据加载到下拉列表中。

因为听起来您对 javascript 领域有点陌生，所以使用 Ajax 做事可能有点过头了。您可以在没有 Ajax 的情况下解决此问题，方法是使用您在 PHP 编译页面时从 MySQL 加载的值填充 javascript 数组。然后，当第一个下拉列表更改时，您可以使用相应数组中的值填充第二个下拉列表。

第二种方法并不理想（主要是因为这意味着您正在加载很多可能永远不会使用的东西），但是在您学习时会更容易理解。附带的好处是它的执行速度比 Ajax 解决方案稍快，因为它不必产生从服务器检索数据的传输开销。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T18:21:44.773

只是一个快速演示

```
<select id = "select1">
    <option value = "1"></option>
    ...
</select>

<select id = "select2">
</select> 
```

然后用javascript（我喜欢jquery做ajax的方式）：

```
$('#select1').change(function(){

    var sendmeover = $('#select1').val();

    $.post("yourphpscript.php",{ 
        sendingthiswithpost: sendmeover
    },
    //and here is the responce
    function(data){
        $('#select2').html(''+data+'');
    });
})//end select change 
```

然后你的php（yourphpscript.php）：

```
<?php
    $variablesent = $_REQUEST['sendingthiswithpost'];

    //here is where you would run an sql query and ech your results

    echo $variablesent
?> 
```

让我知道我是否遗漏了任何东西并且无法修复它，这很简单。注意：您需要`<option>`在 php 中构建标签

# iis-7 - 从 IIS6 到 IIS7 的 MemoryStream 下载失败

> ID：15955440
> 
> 赞同：0
> 
> 时间：2013-04-11T17:46:54.220
> 
> 标签：iis-7, iis-6, download, memorystream

我们正在从 IIS6 转换到 IIS7，除下载部分外，一切都进行得很好。发生的情况是下载已启动，但似乎正在发生重定向，并且下载了我们的 default.aspx 页面，而不是用户请求的文件。下面是我们在 IIS6 中使用的代码。

```
Private Sub GetFile(ByVal ReportQueueId As System.Int32, _
                    ByVal FileName As System.String _
                    )
    Dim stream As System.IO.MemoryStream = Nothing
    Dim lngRecordCount As System.Int32 = 0
    Dim objWebClient As New System.Net.WebClient
    Dim strServerName As System.String

    Try
        strServerName = Page.Request.Item("SERVER_NAME").ToString()

        Dim fURI As New System.Uri("http://" & strServerName & "/reportmonitor/" & FileName)
        ' Open the file into a stream. 
        stream = New System.IO.MemoryStream(objWebClient.DownloadData(fURI), False)

        ' Total bytes to read: 
        Dim bytesToRead As Long = stream.Length

        Page.Response.Clear()
        Page.Response.ContentType = "application/octet-stream"
        Page.Response.AddHeader("Content-Disposition", "attachment; filename=" & FileName.ToString())
        Page.Response.AddHeader("Content-Length", bytesToRead.ToString())

        ' Read the bytes from the stream in small portions. 
        While bytesToRead > 0
            ' Make sure the client is still connected. 
            If Response.IsClientConnected Then
                ' Read the data into the buffer and write into the output stream. 
                Dim buffer As Byte() = New Byte(9999) {}
                Dim length As Integer = stream.Read(buffer, 0, 10000)
                Response.OutputStream.Write(buffer, 0, length)
                Response.Flush()

                ' We have already read some bytes.. need to read 
                ' only the remaining. 
                bytesToRead = bytesToRead - length
            Else
                ' Get out of the loop, if user is not connected anymore.. 
                bytesToRead = -1
            End If
        End While

        'Update status
        lngRecordCount = UpdateStatus(ReportQueueId, _
                                      listcounts_common.ListCountsCommon_CL.ReportQueueStatus.rqsDownloaded _
                                      )
    Catch SystemException As System.Exception
        'Update status
        lngRecordCount = UpdateStatus(ReportQueueId, _
                                      listcounts_common.ListCountsCommon_CL.ReportQueueStatus.rqsOnHold _
                                      )

        'most likely a 404 file not found error
        Me.lblErrorMessage.Text = CLASS_NAME & ":GetFile: " & SystemException.Message.ToString
        Me.lblErrorMessage.Visible = True
    Finally
        objWebClient = Nothing
        stream = Nothing
    End Try
End Sub 
```

运行此代码后，我读过的唯一另一件事可能是在调用 GetFile() 的父函数中，我们有以下代码：

```
' stops page html output. If this is not done, un-desired html code will be added to csv files
 Page.Response.End() 
```

对 IIS6 和 7 之间的区别以及这个过程有什么想法吗？我尝试过的一切都没有奏效。新站点以 .NET 4 的集成模式运行。

谢谢...

**更新**

我将 fURI 修改为外部文件：

```
fURI = New System.Uri("http://manuals.info.apple.com/en_US/ipad_user_guide.pdf") 
```

该文件下载完美，所以我假设这是 IIS7 中的权限问题......关于我可能错过的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:28:07.743

由于该站点使用表单身份验证，因此在 web.config 中为虚拟添加允许的位置路径解决了转换为 IIS7 的问题。

```
<location path="reportmonitor">
<system.web>
  <authorization>
    <allow users="*" />
  </authorization>
</system.web>
</location> 
```

# javascript - 在闭包中存储大变量会导致问题吗？

> ID：15955441
> 
> 赞同：6
> 
> 时间：2013-04-11T17:46:54.753
> 
> 标签：javascript, closures

我有一个使用闭包的函数，如下所示：

```
function myobject() {
  var width=300,
      height=400,
      bigjsondata = { } // assume this is a big variable ~ 300k

  function obj(htmlelement) {
     // plot a graph in this htmlelement based on bigjsondata
  }

  return obj;
}

var plot1 = myobject();
plot1('#holder1');

var plot2 = myobject();
plot1('#holder2'); 
```

该变量`bigjsondata`包含一个大型数据集。问题是：它是否为`bigjsondata`我创建变量时分配内存`var a = myobject()`？

如果创建大量实例会导致内存问题吗？

如果是这样，只加载一次的最佳方法是什么？（`bigjsondata`不变）

**编辑：**最后，我希望`myobject`能够在全球范围内访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:54:41.370

通常 - 是的，您的代码看起来就像`bigjsondata`每次创建一个新实例一样`new myObject();`要解决这个问题，您可以使用这样的匿名初始化函数：

```
myObject = null;

(function() {
     var bigjsondata = { ... } // construct you large object here;

     function myObjectInternal() {
         // you can access `bigjsondata` from here.
         // do not change `bigjsondata`, since it will now 
         // use the changed value in all new instances of `myObjectInternal`
     }
     myObjectInternal.prototype = {
         data: function(_) {
             // you can access `bigjsondata` from here too
         }
     };

     myObject = myObjectInternal;
})(); 
```

这将创建一个匿名函数，该函数会立即且仅调用一次（如单例）。在函数内部，`bigjsondata`是函数的一个闭包`myObjectInternal`，它只在匿名函数中可见。这就是您定义外部全局变量的原因`myObject`，以使其指向`myObjectInternal` 函数/对象。

按照您的意愿定义`myObjectInternal`，您就可以`myObject`开始了。因此，在以下代码中：

```
var instance1 = new myObject();
var instance2 = new myObject(); 
```

它将使用相同`bigjsondata`的`instance1`和`instance2`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:12:47.010

不确定您要实现的目标，这应该为您提供不同级别的一些私有存储：

```
var privateStorage = function () {
  // only 1 copy total
  var bigJsonData = {...}
  return function() {
    // 1 copy for each instance
    var instanceData = {...}
    return function() {
          // something to do many times per instance
          return something_useful
    }
  }
}(); // returns function that privatelly knows about bigJsonData

var a = privateStorage(); // a is now 1st instance of the inner-most function
var b = privateStorage(); // a and b share the SAME bigJsonData object, but use different instanceData objects

a1 = a();
a2 = a(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:20:26.423

我建议为此采用面向对象的方法。

```
function obj (htmlelement)
{
    this.htmlelement = $(htmlelement);    
}

obj.prototype.htmlelement = null;
obj.prototype.bigjsondata = {};
obj.prototype.width = 300;
obj.prototype.height=400;

obj.prototype.plot = function ()
{
   var htmlelement = this.htmlelement;
   var bigjsondata = this.bigjsondata;
   var width = this.width;
   var height = this.height;
   //plot graph here;
}

var plot1  = new obj('#holder1');
var plot2 = new obj('#holder2');
plot1.plot();
plot2.plot(); 
```

在这里，相同的 bigjsondata 将在 obj 的所有对象之间共享。

# windows - 如何在 Windows 8 (WinRT) 应用程序中显示可缩放图像？

> ID：15955442
> 
> 赞同：1
> 
> 时间：2013-04-11T17:46:57.250
> 
> 标签：windows, windows-8, windows-runtime

是否可以将图像放入 WinRT 中的控件中，然后让用户放大和缩小等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:51:51.013

是的！

最简单的方法是将其放在滚动查看器中。你可以放大和缩小任何你喜欢的方式！

```
<ScrollViewer MaxZoomFactor="3"
              MinZoomFactor="0.5"
              ZoomMode="Enabled">
    <Image Source="/Assets/logo.png" Width="200" Height="200"/>
</ScrollViewer> 
```

# javascript - 如何知道哪些国家代码 navigator.userLanguage；所有国家的回报？

> ID：15955444
> 
> 赞同：0
> 
> 时间：2013-04-11T17:47:03.817
> 
> 标签：javascript, jquery

我正在使用以下代码来检测网站访问用户的语言和国家/地区。根据这个[http://www.w3schools.com/jsref/prop_nav_userlanguage.asp](http://www.w3schools.com/jsref/prop_nav_userlanguage.asp)，它返回操作系统的自然语言设置。所以它实际上返回了用户的操作系统设置。

我的问题是，我怎么知道该函数为所有国家和语言返回的所有代码？某处有清单吗？例如在西班牙它返回 es-ES。

谢谢！

```
var userLang = (navigator.language) ? navigator.language : navigator.userLanguage; 
```

# linux - [： : shell 编程中的意外错误

> ID：15955445
> 
> 赞同：0
> 
> 时间：2013-04-11T17:47:05.853
> 
> 标签：linux, shell, unix

我创建了一个脚本，它创建两个文件并在两个文件不同时反转它们的内容。我无法理解如何解决此错误：

> [：我的文件名：shell编程中的意外错误

代码：

```
echo "Enter first filename :"
read file1
echo "Enter second filename:"
read file2
echo "Enter content of file 1 : "
gedit $file1
echo "Enter content of file 2 : "
gedit $file2

check=" " 

x=` cmp $file1 $file2 `
if [ $x -eq $check ]
then
echo "Both files are same"
rm $file2
echo "Redundant file removed!!!"
else
echo "They are different"
fi

tac $file1 | cat > temp1
rev temp1 | cat > temp11 
tac $file2 | cat > temp2
rev temp2 | cat > temp22
mv temp11 $file1
mv temp22 $file2

echo "Content of both the files reversed" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:56:17.393

在 bash 中，逻辑运算符 -eq -ne -gt -lt -ge -le 特定于数字参数。对于比较字符串，您可以简单地使用

```
if [ $x = $check ]; then
 # do whatever
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:27:24.737

您可以`cmp`直接从`if`语句中使用

```
if cmp -s $file1 $file2
then
  echo "Both files are same"
  rm $file2
  echo "Redundant file removed!!!"
else
  echo "They are different"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T03:35:03.017

您必须提供您正在使用的外壳。

但我认为`if [ $x -eq $check ]`导致问题。您的 shell 将包含“-”的文件名解释为开关。您可以将 my-filename 重命名为 myfilename 或双引号 $x：

```
if [ "$x" -eq "$check" ] 
```

# ssis - 不同类型的增量负载

> ID：15955449
> 
> 赞同：0
> 
> 时间：2013-04-11T17:47:24.527
> 
> 标签：ssis

请查看以下暂存表。对于同一策略，它有多行。此表的数据是从我从外部来源收到的平面文件中加载的。

列值可以在一行到下一行之间更改。见 ColA。第一行中可能填充了有限的列。在接下来的行中将填充更多列。请参阅列 ColB 和 ColC，它们最初为 null，并填充在第二行和第三行中。

```
`CREATE TABLE #Stg
(
  PolicyNum VARCHAR(10) ,
  ColA VARCHAR(10) ,
  ColB VARCHAR(10) ,
  ColC VARCHAR(10) ,
  TimeStampKey VARCHAR(100)
)

INSERT  #Stg
    ( PolicyNum, ColA, ColB, ColC, TimeStampKey )
VALUES  ( 'MDT1000', 'SomeVal_A1', NULL, NULL, '2013041113033140MDT1000ZA' )
    ,
    ( 'MDT1000', 'SomeVal_A2', 'SomeVal_B', NULL, '2013041113051756MDT1000ZA' )
    ,
    ( 'MDT1000', 'SomeVal_A3', 'SomeVal_B', 'SomeVal_C', '2013041113115418MDT1000ZA' )` 
```

从这个临时表中，我需要在维护历史记录的同时将数据加载到目标表中。目标表基本上是类型 2 缓慢变化的维度。换句话说，我已经从暂存中加载了第一行，因为它不存在并用第二行更新它并用第三行再次更新。

以下是目标模式的示例：

```
CREATE TABLE #Dst
(
PolicyKey INT IDENTITY(1,1) PRIMARY KEY
, PolicyNum VARCHAR(10)
, ColA VARCHAR(10) 
, ColB VARCHAR(10)
, ColC VARCHAR(10)
, IsActive BIT
, RowStartDate DATETIME
, RowEndDate DATETIME
) 
```

通常我会编写一个合并语句或一个 SSIS 包来处理增量负载和 scd 尺寸，但由于原始记录和更改记录在同一个文件中，标准方法不起作用。

如果您能说明如何解决这个问题，我将不胜感激。我试图避免逐行操作。

谢谢，山姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:17:21.073

尝试这个：

```
SELECT 
  Stg.*
FROM Stg 
INNER JOIN 
(
    SELECT PolicyNum, MAX (TimeStampKey) AS MAX_TimeStampKey 
    FROM Stg
    GROUP BY PolicyNum 
 ) T 
 ON T.PolicyNum = Stg.PolicyNum
 AND T.MAX_TimeStampKey = Stg.TimeStampKey 
```

结果：

```
 PolicyNum  ColA       ColB       ColC       TimeStampKey
 ---------- ---------- ---------- ---------- -------------------
 MDT1000    SomeVal_A3 SomeVal_B  SomeVal_C  2013041113115418MDT1000ZA 
```

如果这对您有帮助，请告诉我们。

# javascript - jQuery 等待更长时间，直到调用函数

> ID：15955450
> 
> 赞同：0
> 
> 时间：2013-04-11T17:47:26.357
> 
> 标签：javascript, jquery

所以我有这个元素，我需要获取`width()`and `height()`of，但它一直返回 0，但是当我进入`$('#lightingData').width()`控制台时，它给了我正确的值。我想我需要使用其他一些包装函数，我已经尝试`$(document).ready(function() {...});`过`$(window).load(function(){...});`

是否有其他包装函数会在执行前等待更长时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:51:53.143

如果`#lightningData`元素`display:none`在`onload`触发并且您的代码执行时具有， `widht()`并且`height()`将返回 0。您可以`.show()`在检查尺寸之前显式调用该元素

```
 $('#lightingData').show().width(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:56:54.393

`.width()`您可以尝试的一件事是在尝试调用and之前显式等待加载该特定元素`.height()`。

尝试这个：

```
$('#lightingData').load(function() { 
     ...height and width manipulation here...
     ...don't forget about scope...
}); 
```

你应该把它放在你`$(document).ready(...)`的 . 文件中，因为你会希望文档至少知道它是什么`$('#lightingData')`。因为你得到`0`的是`height`而`width`不是错误，所以我可以假设它们至少是在调用方法之前找到的。

**更新**

根据@Ian 添加的评论，我想指出这仅适用于某些类型的元素（URL、IFrame、图像/媒体等——基本上是任何需要加载其内容的元素）。我不会更新代码，因为如果您将它用于其中一种元素，我上面的内容是正确的，如果您将它用于另一种元素，那将是愚蠢的。如果您同时使用它，您只需要添加一个条件/过滤器（基于您的实现）来确定此代码是否应该绑定到该特定元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:03:39.670

如果您 100% 确定 $(document).ready() 处的宽度仍为 0

尝试这个：

```
$(function () {
    $('#lightingData').show(function(e) {
        var width = $(this).width();
        //do something
    });
}); 
```

或者，一些愚蠢但适用于 90% 的情况：

```
$(function() {
    setInterval(function () {
        var width = $('#lightingData').width();
        //do something
    }, 1000);
}); 
```

这将在 $(document).ready() 之后将操作延迟 1 秒。

如果没有确切的场景，很难给出具体的解决方案。

# html - 如何将图像放置在没有设置大小的图像的右下角

> ID：15955452
> 
> 赞同：-1
> 
> 时间：2013-04-11T17:47:33.370
> 
> 标签：html, css, image

这是我的html

```
<div class="container">
   <img src="something" class="avatar"/>
   <div class="edit_photo">Edit</div>
</div> 
```

“edit_photo”的背景上有一张图片。img 标签尺寸没有设置，所以它可以是任何东西。但我希望“edit_photo” div 始终位于 img 的右下角。这可以用css吗？我想不出办法来做到这一点。img 标签必须始终是 img 标签，我不能将其更改为 div。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:54:58.700

我认为这是可能的：

CSS：

```
.container{
    position: relative;
    display: inline-block;
}

img{

    background: red;
    height: 120px;
    width: 250px;
}

.edit_photo{
    position: absolute;
    bottom: 0;
    right: 0;
    background: blue;
    height: 25px;
    width: 25px;
 } 
```

这是一个 JSFiddle 可以看到：http: [//jsfiddle.net/gW9PK/](http://jsfiddle.net/gW9PK/)

您可能需要使用 .edit_photo 并将其稍微调整一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:57:00.803

容器应该是这样`position: relative;`的，edit_photo`position: absolute;`是这样的：

```
.container {
    position: relative;
    /* inline-block for 100% of child width */
    display: inline-block;
    border: 3px solid #ddd;
}
img {
    /* for 100% height of the container */
    display: block;
}
.edit_photo {
    position: absolute;
    right: 5px;
    bottom: 10px;
    /* Some color */
    background: red;
    padding: 2px 4px;
    border-radius: 3px;
    color: white; 
} 
```

使用多个图像更新演示：http: [//jsfiddle.net/HYQLQ/3/](http://jsfiddle.net/HYQLQ/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:53:33.443

用css写这段代码

```
.container{
   position:  absolute; 
```

}

。编辑图片{

```
 position: absolute;
bottom:0px;
right:0px;
widht:20px;
height:20px; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:54:34.447

`edit_photo { bottom:-600 top:30px; right:5px; }`

玩数字。

# jquery - jQuery - 数据表 - 列过滤器不起作用

> ID：15955455
> 
> 赞同：1
> 
> 时间：2013-04-11T17:47:42.017
> 
> 标签：jquery, datatables

我正在使用 DataTables（成功）并尝试合并 ColumnFilter。我的 JS 如下所示：

```
$(document).ready(function () {
    oTable = $('#ecTable').dataTable({
        "sScrollY": "550px",
        "sScrollX": "100%",
        "bPaginate": false,
        "bScrollCollapse": true,
        "bInfo": true,
        "bFilter": false,
        "bProcessing": true,
        "aaSorting": [[0, 'desc']]
    })

    .columnFilter({
        aoColumns: [
            null,
            null,
            { type: "select" },
            { type: "select" },
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null]
    });
}); 
```

我的表格页眉和页脚如下所示：

```
<thead>
    <tr>
        <th>Listing Date</th>
        <th>Expiration Date</th>
        <th>Manufacturer</th>
        <th>Model</th>
        <th>Body Style</th>
        <th>Engine</th>
        <th>Year</th>
        <th>Mileage</th>
        <th>Ext. Color</th>
        <th>Int. Color</th>
        <th>Listing Price</th>
        <th>Comments</th>
        <th>Number Of Views</th>
        <th class="noSort">Navigation</th>
    </tr>
</thead>

   <tfoot>
        <tr>
            <th>Listing Date</th>
            <th>Expiration Date</th>
            <th>Manufacturer</th>
            <th>Model</th>
            <th>Body Style</th>
            <th>Engine</th>
            <th>Year</th>
            <th>Mileage</th>
            <th>Ext. Color</th>
            <th>Int. Color</th>
            <th>Listing Price</th>
            <th>Comments</th>
            <th>Number Of Views</th>
            <th></th>
        </tr>
    </tfoot> 
```

我在 Chrome 中没有收到任何错误。生成的数据表看起来与它应该的完全一样，除了它没有过滤列。查看生成的源代码，正在下载列过滤器的 JS。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:02:53.963

评论提升回答：

我不是数据表专家，但这条线可能与它有关吗？`"bFilter": false,`

# css - Rem/Em 混乱

> ID：15955462
> 
> 赞同：3
> 
> 时间：2013-04-11T17:48:24.123
> 
> 标签：css, sass, compass-sass, susy-compass, em

我今天在一个新网站上使用 em's/rem's 玩了一会，有几件事我想在这里讨论/询问。

多年来，我完全是一个基于像素的人，在需要时会投入一些百分比。

我一直在阅读 em 和 rem 是网络应有的“方式”。足够公平，这就是我今天试一试的原因。

所以，第一件事。使用 em's/rem's 的尺寸是否只是为了改变事物相对于主要字体大小的尺寸？

如果是这样，那么您会在什么情况下更改主要字体大小？我一直将我的设置为 16px 并使用它。

我找到了一个 Sass mixin，它允许我以像素为单位指定任何属性的尺寸，并使用 rem 和基于像素的后备输出它。不过，我先根据自己的喜好对其进行了调整。

因此，我开始使用 rem mixin 为我的所有维度（边距、填充和一些高度）构建站点。是的，当我更改主要字体大小时，所有内容都会缩放，但同样的问题与此处的第 2 个问题相同。

我使用 Compass Susy 来设置我的网格并使用 em 来指定它的设置，（我通常会选择像素）。我将 Susy 中的网格样式设置为魔术网格，当浏览器比网格宽但内部完全灵活时，它使网格保持静态。

当然，我所读到的关于使用 em 的好处的所有内容都可以使用媒体查询来完成吗？你们做什么，最重要的是主流网站使用什么？

对，接下来的两个问题是关于图像的。我今天遇到了两种情况，在等式中的某处使用带有图像的 em/rem 会导致问题。

5a。我将 h2 设置为内联块并在周围添加了填充，然后在右侧添加了相当于 45px 填充的 rem。我将 line-height 设置为 1.3 的无单位值。然后，我将图像设置为 h2 的背景，使其出现在右侧以出现在 padding-right 中。在 16px 的标准基本字体大小下，一切都很好。但是，我增加或减少了字体大小，并裁剪了图像的顶部和底部。所以又问了2个问题。我明白为什么图像会被裁剪，但这是如何处理 em/rem 和困扰我的图像之间的关系。

5b。我有一个高度设置为 200px 高度的 rem 高度的 div。然后我在其中添加了一个高度为 200 像素的图像。使用 susy mixin span-columns 将图像的宽度设置为特定的列宽，并将高度设置为自动。当字体大小改变时，我要么最终得到一个太高或太短的图像。在这种情况下，最好的办法是什么？

我正在查看一些可用的指南针 mixin，例如这个：

```
@mixin pretty-bullets($bullet-icon, $width: image-width($bullet-icon), $height: image-height($bullet-icon), $line-height: 18px, $padding: 14px) {
  margin-left: 0;
  li {
    padding-left: $padding;
    background: image-url($bullet-icon) no-repeat ($padding - $width) / 2 ($line-height - $height) / 2;
    list-style-type: none;
  }
} 
```

我不能在里面添加我所有的 em/rem 东西吗？

我认为最重要的问题是：

为什么首先需要 em/rem？在图像方面，您如何与他们合作？有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:19:07.950

关于您的帖子有很多话要说，最好从一些基础知识开始：

**为什么使用 em 或 rem 单位？**

Em & rem 单位用于相对大小。

**Em 单位：**浏览器中的 em 单位相对于其父级的字体大小发生变化，无论是 span、p、div、body 还是 html 元素。因此，当使用 em 单位作为字体大小和宽度或高度时，这些尺寸将取决于当前父级的字体大小。

**Rem 单位：**浏览器中的 rem 单位是相对于文档的基本字体大小的。如果将其设置为 16px，则 1rem 为 16px，2rem 为 32px，依此类推。这意味着您可以在单个点更改整个文档的比例，并且使用该相对测量的任何内容都将相应地增加/减少。

**要点：**这些测量值是“相对的”，因此“为什么使用 em 或 rem 单位？”这个问题的答案是针对 em 单位，当您想要相对于其父元素调整网页中元素的大小时，只需使用它们对于 rem，当您想要相对于文档调整元素的大小时使用它们。

这是一种简单的方法，但它将网页设计置于下一个问题的正确上下文中......

**在设计和布局中应该如何使用 em 和 rem 单位？**

这个问题的答案也是多方面的，但简单地说，使用 em、rem 或任何“相对”测量来描述设计中的元素是远离基于静态像素的设计。

在大多数情况下，em、rem 和百分比用于创建灵活的布局，而灵活的布局对 Web 和使用其中的元素有完全不同的方法，而不是基于像素的设计。例如，如果您有一个需要相对于文档宽度扩展的容器，并且其中有一个图像，您可能希望该图像与容器一起调整大小或根据可用空间以不同的方式定位自身。

这是我们进入“响应式”设计和布局以尝试制作“自适应”网站和应用程序的地方，也是媒体查询和其他技术的用武之地。

就我个人而言，我几乎专门将 em 用于元素的类型、边距和填充。我用百分比来描述尺寸，然后几乎总是只有宽度。在一个设备、设备尺寸和像素比率每年都在翻倍增长的世界中，您可以控制的只有这么多。

所以总结一下，有点...

**1）**如果您需要静态尺寸，只需使用像素即可。如果您需要特定的固定尺寸，则使用相对测量通常没有真正的好处。

**2)** Em's & rem's 是众多工具中的一种，它们的用途与其他工具（像素）一样。它们是一个很棒的工具，值得掌握，因此在需要时使用它们，但仅在问题需要相对大小时使用。

**3）**您可能希望将这些**Compass Susy**问题拆分为更具体的帖子，并在需要帮助时提供一些示例。

我希望这会有所帮助，即使它不能回答您在这里提出的所有问题。

干杯

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T20:13:05.650

Ems/rems 用于使站点适应客户端的不同设置。我的浏览器设置可以增加或减少您网站上的字体大小，使用 em/rem 可以让您适应我的设置。这是一个权衡 - 与网页设计中的其他一切一样 - 在您的像素精确控制和您围绕更改和用户控制进行设计的意愿之间。没有正确的答案 - 但我想提醒自己，整个网络技术都偏重于用户控制，任何让我成为像素肛门的尝试都是在与核心技术作斗争。

Ems/rems 可以在媒体查询中用于设置断点宽度，但它们解决了适应性公式的不同部分——字体大小，而不是屏幕大小。您的 Susy 网格现在可以同时适应两者！

对于任何类型的响应式/自适应设计工作来说，图像都是一种痛苦。您可能用于流体布局的相同解决方案将有助于基于 em 的布局。常见的解决方案包括`background-size`属性（Compass 有一个 mixin）并将 html 图像设置为 100% 的最大宽度。[请参阅处理灵活媒体的](http://css-tricks.com/rundown-of-handling-flexible-media/)CSS 技巧纲要。我已经使用这种[流体媒体混合](https://github.com/ericam/accoutrement/blob/master/stylesheets/accoutrement/_media.scss)来处理背景图像等的“内在比率”方法。

但是，通常情况下，我会找到一种使用更少图像进行设计的方法。我喜欢这项技术将我推向该领域的简单性 - 所以它不会打扰我。

# c# - 反序列化 xml 属性并处理换行符和其他特殊字符

> ID：15955464
> 
> 赞同：0
> 
> 时间：2013-04-11T17:48:30.187
> 
> 标签：c#, xpath, xml-parsing, xml-serialization

在过去的 2 天里，我试图找到这个问题的答案，但我找不到任何可以与我们的代码一起使用的东西。

我们有一个如下格式的传入 xml 响应，并且需要能够处理属性内的换行符和其他特殊字符。

我们遇到的问题是“agent-notes”，我们似乎无法找到 XPath 函数将特殊字符转换为 \r \n 等。

"anything everything something" 应该是 "anything \r \n Everything \r \n something"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:23:49.897

不幸的是，你不能。代理属性值是有效的，不能假定在 XPath 搜索中为您转换。您必须通过将所有 \n\r 替换为“ ”来转换搜索路径。如果它是您期望转换的值，那么您可以使用“HttpUtility.HtmlDecode 方法”。

我以前也遇到过这个问题，也遇到过同样的烦恼。编码并不总是一门完美的科学，正如你所希望的那样。

# c# - 将 XML 过滤到 ILookup 并在那里搜索的最佳方法

> ID：15955466
> 
> 赞同：0
> 
> 时间：2013-04-11T17:48:38.743
> 
> 标签：c#, c#-4.0, linq-to-xml

我对 .Net LINQ 还是很陌生，任何人都可以建议一种将这个 xml 过滤到 .Net 对象中的最佳和智能方法，因此在代码中我可以轻松地为测试套件执行所需的测试用例

```
<?xml version="1.0" encoding="utf-8" ?>
<TestSuites>
  <TestSuite name="TS1" canexecute ="true">
    <TestCase name="TC1" canexecute ="true"/>
    <TestCase name="TC2" canexecute ="false"/>
    <TestCase name="TC3" canexecute ="true"/>
  </TestSuite>
  <TestSuite name="TS2" canexecute ="false">
    <TestCase name="TC4" canexecute ="true"/>
    <TestCase name="TC5" canexecute ="false"/>
    <TestCase name="TC6" canexecute ="true"/>
  </TestSuite>
  <TestSuite name="TS3" canexecute ="false">
    <TestCase name="TC7" canexecute ="true"/>
    <TestCase name="TC8" canexecute ="false"/>
    <TestCase name="TC9" canexecute ="true"/>
  </TestSuite>
</TestSuites>

Expected output
Key   Value
TS1   TC1
      TC3
TS3   TC7
      TC9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:57:14.407

在我看来你想要这样的东西：

```
var query = doc.Descendants("TestSuite")
               .Where(x => (bool) x.Attribute("canexecute"))
               .Elements("TestCase")
               .Where(x => (bool) x.Attribute("canexecute"))
               .ToLookup(x => (string) x.Parent.Attribute("name"),
                         x => (string) x.Attribute("name")); 
```

所以说：

*   找到所有的测试套件...
*   ...可以执行
*   ...然后找到他们的测试用例...
*   ...可以执行
*   ...然后按测试套件名称分组，组中的值是测试用例名称

请注意，如果您有多个具有相同名称的测试套件，则使用上述查询，它们将被展平为一个组。

# css - 了解一些 CSS

> ID：15955469
> 
> 赞同：0
> 
> 时间：2013-04-11T17:48:45.047
> 
> 标签：css

我创建了一个从教程中提取的一些 CSS 的准系统示例，我想知道是否可以进一步解释它。

[http://jsfiddle.net/4t55g/](http://jsfiddle.net/4t55g/)

设置是您姓名的输入字段将自动扩展以填充开始按钮旁边的空间。这里的关键似乎是`overflow`包含它的跨度上的属性。为什么要设置它以`hidden`使其收缩到正确的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:24:10.720

这是 CSS 盒子模型如何工作的一个很好的例子。

HTML 看起来像：

```
<div class="formLine">
    <button>start</button>  
    <span><input type="text" placeholder="enter a name"></span>
</div> 
```

并考虑以下 CSS：

```
.formLine {
    width:50%;
    outline: 2px dotted red;
}
.formLine span {
    display: block;
    overflow :hidden;
    padding-right:5px;
}
.formLine input {
    border: 2px dotted blue;
    width: 100%;
}
.formLine button {
    width: auto;
    float:right;
} 
```

小提琴：http: [//jsfiddle.net/audetwebdesign/ZkxBv/](http://jsfiddle.net/audetwebdesign/ZkxBv/)

**为什么有效**

您的父容器包含一个跨度，`display: block`因此它将扩展以填充其父元素的宽度。`<button>`浮动到右侧，将导致 的内容在其周围`<span>`流动。在这种情况下，只有一个元素，即`<input>`标记，一个内联元素。输入标签将尽可能多地扩展以填充其父容器`<span>`.

如果您声明`overflow: visible`了 ，则输入字段将占据父容器的整个宽度，并在按钮下方开始一行。

但是，通过声明`overflow: hidden`，浏览器会执行其他操作。浏览器尝试将 span 与浮动按钮放在同一行，并确定 span 的内容太长（因此出现溢出情况）。浏览器会裁剪 span 以适应按钮，并尝试相应地包装内容。在这种情况下，输入按钮具有可变宽度，因此它会缩小以填充空间。非常聪明，它给出了有用的结果。

用简单的文本替换输入按钮可以看到效果：

```
<div class="formLine">
    <button>start</button> 
    <span><em>Some line with a few words that are not too long. As you can see, the text tries to flow around the button on the right.</em></span>
</div> 
```

在这种情况下，单词会流出到按钮（但不在下方），然后换行以形成新行。如果您更改`overflow`为可见，则文本将在按钮下方流动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:16:20.127

这是由于[块格式化上下文](https://developer.mozilla.org/en-US/docs/CSS/Block_formatting_context)是块框布局发生的区域以及浮动相互交互的区域。

块格式化上下文由以下之一创建：

*   根元素或包含它的东西
*   浮动（浮动不是无的元素）
*   绝对定位元素（位置为绝对或固定的元素）
*   inline-blocks（显示元素：inline-block）
*   表格单元格（带有 display: table-cell 的元素，这是 HTML 表格单元格的默认值）
*   表格标题（带有 display: table-caption 的元素，这是 HTML 表格标题的默认值）
*   溢出的值不是可见的元素
*   弹性框（显示元素：flex 或 inline-flex）

在块格式化上下文中，框从包含块的顶部开始一个接一个地垂直排列。两个同级框之间的垂直距离由 'margin' 属性确定。块格式化上下文中相邻块级框之间的垂直边距折叠。

在块格式化上下文中，每个框的左外边缘接触包含块的左边缘（对于从右到左的格式化，右边缘接触）。即使存在浮动也是如此（尽管框的行框可能会由于浮动而缩小），除非框建立了新的块格式化上下文（在这种情况下，框本身可能会由于浮动而变窄）。

另见：[http ://www.w3.org/TR/CSS21/visuren.html#block-formatting](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)

# c# - Linq更新数据库，主键

> ID：15955470
> 
> 赞同：2
> 
> 时间：2013-04-11T17:48:48.640
> 
> 标签：c#, linq

我有两张桌子。文档表和版本表。两者都是相同的，只是版本表有一个 ID 字段和一个 documentID 字段。文档表有一个 documentId 字段。

我可以正确找到文档，但找不到版本表信息，因为我在其中填充的 id 试图在 id 字段而不是 documentId 字段上找到它。

```
public ActionResult ApproveDocument(int id = 0)
    {
        IPACS_Document ipacs_document = db.IPACS_Document.Find(id);
        IPACS_Version ipacs_version = db.IPACS_Version.Find(id);

        ipacs_version.dateApproved = System.DateTime.Now;
        ipacs_version.approvedBy = User.Identity.Name.Split("\\".ToCharArray())[1];

        ipacs_document.dateApproved = System.DateTime.Now;
        ipacs_document.approvedBy = User.Identity.Name.Split("\\".ToCharArray())[1];
        ipacs_document.revision = ipacs_version.revision;

        db.SaveChanges();

        return RedirectToAction("Approve");
    } 
```

因此`ipacs_document`正确找到了，因为传入 11 的 id 有效。但是`ipacs_version`没有找到任何东西，因为它试图找到`id 11`而不是`documentId 11`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:53:36.243

如果您想知道如何使用`Find`(DbSet<>) 来参与`composite keys`...

> Find 方法将对象数组作为参数。使用复合主键时，传递以逗号分隔的键值，并按照它们在模型中定义的顺序传递。

[http://msdn.microsoft.com/en-us/library/gg696418(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg696418(v=vs.103).aspx)

```
db.IPACS_Version.Find(id, documentid); // mind the order 
```

对于更复杂的事情，请记住，您始终可以使用 Linq 查询，`Where`例如

```
db.IPACS_Version.Where(x => x.Id == id && x.DocumentId == docid && x.Flag == true); 
```

> **注意：**您可以使用`query`, `Where`（无论您的实体是如何制作的）-
> **但如果您`keys`的设置不正确**（根据评论）-我不鼓励您这样做。与其快速修复，不如确保您的表 pk-s 已按应有的方式设置 - 因为这是必不可少的。然后你可以看到哪个查询最适合你（或者如果你只需要就使用 Find）。

# plot - scilab 绘图阶乘；首先试图纠正方程？

> ID：15955474
> 
> 赞同：0
> 
> 时间：2013-04-11T17:48:56.073
> 
> 标签：plot, equation, factorial, scilab

我正在尝试在 scilab 中执行这个等式；但是，我收到错误：59 of function %s_pow called ... 即使我定义了 x。

```
n=0:1:3;
x=[0:0.1:2];
z = factorial(3); w = factorial(n);u = factorial(3-n);
y = z /(w.*u);
t = y.*x^n*(1-x)^(3-n) 
```

（此时我还没有在 plot 命令中添加，虽然我会假设它是 plot(t)？）

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:10:46.700

最后一行的幂`x^n`和`(1-x)^(3-n)`都导致了问题，因为`x`和`n`是矩阵并且它们的大小不同。

如[文档](http://help.scilab.org/docs/5.3.3/en_US/power.html "关于电源功能的文档")中所述，电源操作只能在以下之间执行：

> *   ( **A:square** )^( **b:scalar** ) 如果 A 是方阵且 b 是标量，则 A^b 是矩阵 A 的 b 次方。
>     
>     
> *   ( **A:matrix** ).^( **b:scalar** ) 如果 b 是标量而 A 是矩阵，则 A.^b 是由 A 的元素的 b 次幂（元素次幂）形成的矩阵。如果 A 是向量且 b 是标量，则 A^b 和 A.^b 执行相同的操作（即元素幂）。
>     
>     
> *   ( **A:scalar** ).^( **b:matrix** ) 如果 A 是标量且 b 是矩阵（或向量），则 A^b 和 A.^b 是由 a^(b(i, j))。
>     
>     
> *   ( **A:matrix** ).^( **b:matrix** ) 如果 A 和 b 是**相同大小**的向量（矩阵） A.^b 是 A(i)^b(i) 向量 (A(i,j)^b (i,j) 矩阵）。

# magento - Google 产品 Feed 错误（错误代码：invalidRequestUri。）

> ID：15955479
> 
> 赞同：1
> 
> 时间：2013-04-11T17:49:05.413
> 
> 标签：magento

我正在尝试设置项目并将其添加到我的 Google 产品 Feed 以投放产品广告。

我已经连接了我的帐户并映射了所有必需的属性。（几乎是正面的）

当我将产品添加到谷歌内容时，我收到此错误

将产品添加到 Google 购物时出错。

错误代码：invalidRequestUri。内部原因：无效的请求 URI 请参阅产品“Hangar 9 1/8th Scale Military Pilot”的“”（在“默认商店视图”商店中）

如果有人可以帮忙，我会坚持下去谢谢，Dane。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:59:52.630

检查什么是请求uri。

您的产品名称有一个特殊字符“/”，这可能会导致该产品的 URL 无效。机库 9 1/8 比例军事飞行员

# ios - 非原子分配和内存泄漏问题

> ID：15955480
> 
> 赞同：0
> 
> 时间：2013-04-11T17:49:05.553
> 
> 标签：ios, objective-c, memory-management

我有一个财产说

```
@property(nonatomic,assign) NSString *str; 
```

现在我有类似的东西

```
self.str = [[NSString alloc] init];
self.str = @"test";
NSLog(@"%@",str);
[self.str release]; 
```

当我运行时，我可以看到“潜在的内存泄漏”泄漏。

为什么它显示我泄漏？

请指导我我是iOS的学习阶段

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:53:54.290

换句话说（我只是在这里扩展 Anoop 的答案），你有两个字符串，而不是一个。

```
self.str = [[NSString alloc] init];
self.str = @"test"; 
```

第一行右边的东西是一个字符串：`[[NSString alloc] init]`。但是在第二行中，您将其扔掉，用*不同*的字符串替换它，即`@"test"`. 现在没有指向第一个字符串的参考。因此它泄漏了，因为它永远不能被释放，也不能为它做任何其他事情。

第一行中创建的字符串的情况是，在第二行之后，就像该图第二个面板中“thing1”的情况：

![在此处输入图像描述](https://i.stack.imgur.com/BZ0j1.png)

没有人指向它，因此它的内存无法管理，它永远处于孤立状态（泄漏）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T17:50:57.323

```
self.str = [[NSString alloc] init]; //1st 
```

分配了一个未使用的字符串。

```
self.str = @"test";  // 2nd 
```

另一个常量字符串“test”被分配但被释放。

所以第一个是泄漏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T18:04:30.593

当您使用工厂方法或使用**alloc、new、retain、copy、mutableCopy**创建对象时，您的对象每次都有**+1 保留计数。**在这种情况下，您拥有对象。您有责任发布它。因此，您需要在使用完对象后**释放**对象，这会导致对象的**-1 保留计数**。

由于您已经在创建它的属性，因此没有必要再次分配您的字符串。

它有它的getter setter +你再次分配它，所以给你一个泄漏。

# java - 如何从 JRuby 生成的 Java 类中使用 Mongo？

> ID：15955485
> 
> 赞同：2
> 
> 时间：2013-04-11T17:49:15.027
> 
> 标签：java, ruby, jruby

我正在尝试通过 JRuby 向 Java 应用程序公开我编写的 ruby​​ gem 的功能。我在让 jruby 加载 bson-1.8.5-java gem 而不是原生扩展 bson_ext 时遇到问题，它不能很好地与 JRuby 配合使用。我的目标是对我的 ruby​​ gem 进行最小的更改，所以我不想在我的 ruby​​ 代码中导入 Java 类。

将我的 ruby​​ 文件编译为 Java 类后，他们正在调用`require 'mongo'`

```
public class Goose extends RubyObject  {
    private static final Ruby __ruby__ = Ruby.getGlobalRuntime();
private static final RubyClass __metaclass__;

    static {
        String source = new StringBuilder("require 'mongo'\n" +
            "\n" +
            "class Goose\n" +
            "  def initialize\n" +
        ...
    __ruby__.executeScript(source, "goose.rb");
        ... 
```

从 Java 调用类失败，抱怨没有加载 BSON 扩展。

问题可以归结为

[根据本教程](http://blog.nicksieger.com/articles/2009/01/10/jruby-1-1-6-gems-in-a-jar/)，我将 mongo 和 bson-java gem 组合起来。

```
$ jruby -S gem install -i ./my-gems mongo --no-rdoc --no-ri
Fetching: bson-1.8.5-java.gem (100%)
Fetching: mongo-1.8.5.gem (100%)
Successfully installed bson-1.8.5-java
Successfully installed mongo-1.8.5
2 gems installed
$ jar cf my-gems.jar -C ./my-gems . 
```

我将 my-gems.jar 添加到我的 Eclipse 项目类路径中。

然后我运行了一个简单的 main 来测试 require 评估

```
public static void main(String[] args) {
    System.setProperty("org.jruby.embed.compat.version", "JRuby1.9");
    ScriptEngineManager factory = new ScriptEngineManager();

    ScriptEngine engine = factory.getEngineByName("jruby");

    try {
        engine.eval("require 'mongo'");
    } catch (ScriptException e) {
        e.printStackTrace();
    }
} 
```

哪个输出

```
 ** Notice: The BSON extension was not loaded. **

  For optimal performance, use of the BSON extension is recommended. To
  enable the extension make sure ENV['BSON_EXT_DISABLED'] is not set.

  Exception in thread "main" java.lang.ExceptionInInitializerError at JavaRubyTest.main(JavaRubyTest.java:27)
  Caused by: org.jruby.exceptions.RaiseException: (NameError) cannot load Java class org.bson.types.ObjectId
... 
```

但是，如果我`require 'mongo'`从 jirb 运行，它会加载。

任何指针？

# c++ - Windows WiFi 网络设备

> ID：15955489
> 
> 赞同：1
> 
> 时间：2013-04-11T17:49:24.713
> 
> 标签：c++, windows, wifi

我正在为 Windows 创建一个 WiFi 程序，我是网络编程的新手。
我正在使用本机 Wifi API 来获取有关网络的信息，但现在我想要有关连接到网络的其他设备的信息。

有人知道我应该学习什么来完成这个吗？我需要使用winsock吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:57:00.167

您可以通过 UPnP 执行此操作（假设您的 AP 支持 UPnP，但大多数都支持）。

您将连接到`WLANConfiguration`UPnP 接入点的服务，并读取`TotalAssociations`以获取关联设备的数量，以及 `AssociatedDeviceMACAddress`和/或`AssociatedDeviceIPAddress`变量以获取关联设备的地址。后者可能会为您提供 IPv4 或 IPv6 地址，或者它可能会为您提供主机名。

该`TotalAssociations`变量是“事件”，这意味着您可以让接入点告诉您希望关联设备的数量发生变化，并在发生这种情况时重新枚举它们的地址。

Microsoft 还提供了一个可能有用的[UPnP API （尽管我从未亲自使用过它，所以我不能多说）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382303.aspx)

# 参考

1.  [UPnP 架构规范](http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.1.pdf)
2.  [WLAN 配置服务规范](http://upnp.org/specs/gw/UPnP-gw-WLANConfiguration-v1-Service.pdf)

# c# - 存储：更改事件

> ID：15955491
> 
> 赞同：1
> 
> 时间：2013-04-11T17:49:28.963
> 
> 标签：c#, windows-8, windows-runtime

我还是 WinRT 世界的新手，并且是第一次使用漫游设置。在我项目的不同点，我编写或读取设置。所以我想知道是否有办法在我的设置的特定值发生更改时得到通知。似乎有[DataChanged](http://msdn.microsoft.com/de-de/library/windows/apps/windows.storage.applicationdata.datachanged.aspx)事件，但我认为它指的是来自云端的传入设置更改，因此不合适？！

# perl - perl dancer - “任何”方法 - 调用哪个实际方法？

> ID：15955493
> 
> 赞同：3
> 
> 时间：2013-04-11T17:49:46.113
> 
> 标签：perl, dancer

使用 Perl 的 Dancer 模块，如果您有一个“任何”方法（将匹配 get/post/put/delete），您如何确定浏览器使用的实际方法？

```
#!/usr/bin/perl

use Dancer;

my $instance = someclass->new();

any('/' => sub{
  my $method = ???
  my $params = params();
  return($instance->$method($params));
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:59:48.767

我想这是

```
my $method = request->method; 
```

尽管文档建议您尽可能使用以下内容（对您的一般代理/代表没有意义）：

```
request->is_get();
request->is_post();
# etc . . 
```

# extjs - 更改表格项目数据后无法推入面板

> ID：15955494
> 
> 赞同：0
> 
> 时间：2013-04-11T17:49:49.693
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1

我有一个应用程序，允许用户输入一组选项，然后在表格中返回结果。当您单击表格项目时，它会在具有更多详细信息的面板中推送。我遇到的问题是它第一次运行完美，但是当我去更改选项集时，表格项目变得不可选择。我在控制台中没有收到任何错误，所以不知道它出了什么问题。我唯一能想到的是它可能与下面的代码有关，我是否必须清除 details.setData 以允许推送第二个搜索结果数据？

```
 Ext.define('FirstApp.controller.Details', {
       extend: 'Ext.app.Controller',

     config: {
      refs: {
        placesNavView:'placesContainer',
      },
      control: {
        'placesContainer places list':{
            itemtap:function(list,index,target,record){

    var ref = record.get('reference');
    var name = record.get('name');
    var address = record.get('vicinity');
    console.log(address);
    console.log(name);
    console.log(ref);

   Ext.Viewport.setMasked({xtype:'loadmask', message:'Please Wait...'});     

    var proxy = {
        type:'ajax',
        url:'https://maps.googleapis.com/maps/api/place/details/json?  reference='+ref+'&sensor=true&key=123...',
        reader:{
            type:'json',
            rootProperty:'result'
          }
        }
    Ext.StoreMgr.get('Details').setProxy(proxy);
    Ext.StoreMgr.get('Details').load();

    console.log(proxy);

                var details = Ext.create('FirstApp.view.Details');
                details.setData(record.data);
                this.getPlacesNavView().push(details);

       Ext.Viewport.setMasked(false);           
            }
         }  
     }
   }
 }); 
```

# backbone.js - 如何正确将 Marionette EventAggregator 设置为 Require.js 模块

> ID：15955495
> 
> 赞同：4
> 
> 时间：2013-04-11T17:49:50.520
> 
> 标签：backbone.js, requirejs, marionette

我正在尝试将 vent/EventAggregator 设置为单独的 Require.js 模块。我正在使用包含 wreqr 的 Marionette 1.0.2（我相信它的实现与 1.0.0 之前的旧版本不同）：此代码来自主干.marionette.js：-

```
 // Event Aggregator
// ----------------
// A pub-sub object that can be used to decouple various parts
// of an application through event-driven architecture.

Wreqr.EventAggregator = (function(Backbone, _){
  "use strict";
  var EA = function(){};

  // Copy the `extend` function used by Backbone's classes
  EA.extend = Backbone.Model.extend;

  // Copy the basic Backbone.Events on to the event aggregator
  _.extend(EA.prototype, Backbone.Events);

  return EA;
})(Backbone, _); 
```

当我设置我的 vent.js 模块时，它应该是什么？像这样的东西： -

```
define(['marionette'],function(Marionette){
    return new Marionette.EventAggregator();
}) 
```

同样在我的需求配置中，我是否应该明确包含backbone.wreqr.js？或者只是木偶文件（见上面的片段）就足够了？

这里是我的 app.js 供参考：-

```
require.config({

    paths : {
        backbone : 'lib/backbone',
        underscore : 'lib/underscore',
        jquery : 'lib/jquery',
        marionette : 'lib/backbone.marionette',
        'backbone.wreqr' : 'lib/backbone.wreqr',
        text : 'lib/text',
        templates : '../templates'

    },
    shim : {
        jquery : {
            exports : 'jQuery'
        },
        underscore : {
            exports : '_'
        },
        backbone : {
            deps : ['jquery', 'underscore'],
            exports : 'Backbone'
        },
        marionette : {
            deps : ['jquery', 'underscore', 'backbone'],
            exports : 'Marionette'
        },
        'backbone.wreqr' : {
            deps : ['backbone', 'marionette', 'underscore'],
            exports : 'Wreqr'
        }
    }
})

require(
    ["jquery",
        "underscore",
        "backbone",
        "marionette",
        "backbone.wreqr",
        "shell/shellapp"
    ],
    function($, _, Backbone, Marionette, Wreqr, ShellApp) {
        $(function() {
           //new ShellApp();
            var shell = ShellApp;
            shell.start();
            trace("shell: "+shell);
        });
    }
); 
```

非常感谢所有帮助！

非常感谢，

山姆

****_ *_* ____** *** *** 更新**

 **感谢 Paul，我想出了如何让我的 vent.js 工作。仅供参考，我不需要在配置中单独导入 wreqr 文件。这是 vent.js 代码：-

```
define(['backbone', 'marionette'],function(Backbone, Marionette){
    return new Backbone.Wreqr.EventAggregator();
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T10:01:05.787

[这对我有用](http://jsfiddle.net/MjBKH/4/)。

```
require.config({
    paths: {
        backbone: 'http://backbonejs.org/backbone',
        underscore: 'http://underscorejs.org/underscore',
        jquery: 'http://code.jquery.com/jquery-1.9.1',
        marionette: 'http://marionettejs.com/downloads/backbone.marionette'
    },
    shim: {
        jquery: {
            exports: 'jQuery'
        },
        underscore: {
            exports: '_'
        },
        backbone: {
            deps: ['jquery', 'underscore'],
            exports: 'Backbone'
        },
        marionette: {
            deps: ['jquery', 'underscore', 'backbone'],
            exports: 'Marionette'
        }
    }
});

require(["backbone", "marionette"], function (Backbone, Marionette) {
    console.log(Backbone.Wreqr.EventAggregator);
    var ea = new Backbone.Wreqr.EventAggregator();
    console.log(ea);
}); 
```**

# vb.net - 如何从范围 IP 开始和结束 IP 生成 IP 列表

> ID：15955501
> 
> 赞同：1
> 
> 时间：2013-04-11T17:50:19.217
> 
> 标签：vb.net, ip

我想生成两个 IP 开始 IP 和 IP 之间的所有 IP 地址列表

```
 textbox1.text = startiprange = "192.168.0.0"
 textbox2.text = endiprange = "192.168.255.255" 
```

如何用简单的方法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T18:18:42.077

尝试这个

```
 'start and end ip address
    Dim startiprange As Net.IPAddress = Net.IPAddress.Parse("192.168.0.0")
    Dim endiprange As Net.IPAddress = Net.IPAddress.Parse("192.168.255.255")

    'reverse address bytes for conversion to integer
    Dim strtip() As Byte = startiprange.GetAddressBytes
    Array.Reverse(strtip)
    Dim endip() As Byte = endiprange.GetAddressBytes
    Array.Reverse(endip)

    'convert
    Dim ips As UInt32 = BitConverter.ToUInt32(strtip, 0)
    Dim ipe As UInt32 = BitConverter.ToUInt32(endip, 0)

    'then loop from start to end
    For anip As UInt32 = ips To ipe
        'convert to bytes
        Dim ipbyt() As Byte = BitConverter.GetBytes(anip)
        'reverse and create ip address
        Array.Reverse(ipbyt)
        Dim ipaddr As New Net.IPAddress(ipbyt)
        Debug.WriteLine(ipaddr.ToString)
    Next 
```

# javascript - 调试 ServiceStack POST 请求反序列化

> ID：15955502
> 
> 赞同：1
> 
> 时间：2013-04-11T17:50:24.043
> 
> 标签：javascript, jquery, json, servicestack

我有一个用例，我使用 jQuery 发布一个带有数组成员的复杂对象。例如：

```
data: {
   obj1: obj1,
   arr1: [ ... ]
} 
```

在服务器上，我实现了一个 ServiceStack 服务。服务器上的自动请求映射为请求成员生成空值，但如果我提取 Request.GetRawBody()，然后使用 ServiceStack.Text.JsonSerializer.DeserializeFromString，我得到了我需要的。

调试实际的反序列化并查看缺少的内容会很有用。有人知道怎么做吗？

**例子：**

**传入一个平面对象** 定义一个包含几个字段的简单请求对象：

```
public class Request
{
  public string Name { get; set; }
} 
```

进行 jQuery ajax 调用：

```
$.ajax({
  //...
  data: {
    name: 'John Doe'
  }
}); 
```

该调用有效，服务器接收具有“John Doe”名称属性的对象。

**使用子对象传递对象**

```
public class Request
{
  public Caller Caller { get; set; }
}

public class Caller
{
  public string Name { get; set; }
} 
```

然后从 jQuery 调用：

```
$.ajax({
  // ...
  data: {
    caller: {
      name: 'John Doe'
    }
  }
}); 
```

调用后，服务上请求的“调用者”属性为“null”，所以这种做法是行不通的。

**结论** 在我最初的评估中，我指的是对象和数组的组合。我想问题在于获得一个简单的子对象来序列化/反序列化。这是否意味着不支持该概念，或者我是否错误地传递了对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:50:52.963

如果您真的认为实际反序列化有问题，那么我建议您从 github 下载源代码并尝试创建失败的单元测试。如果您认为它与 json 反序列化有关，请下载 ServiceStack.Text 项目。否则，您应该下载主要的 ServiceStack 项目。阅读现有的单元测试对于整个项目的工作方式非常有用。

但是，**它很可能是无效的 json 表示法**。通过将序列化 DTO 的结果与实际传递给 ajax 调用的结果进行比较，对 json 进行逆向工程通常很有用。

**更新：**您的 json 应如下所示：

```
{"Caller":{"Name":"John Doe"}} 
```

检查这一点的简单方法是执行以下操作：

```
var r = new MyRequest() {Caller = new Caller() {Name = "John Doe"}};
var json = r.ToJson(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T21:18:02.833

我已经弄清楚了这个问题，希望答案对其他人有所帮助。事实证明，$.ajax 将内容类型作为 url 编码的表单发送（在 jQuery 文档中明确记录，我刚刚错过了）： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

将 contentType 设置为 'application/json' 解决了这个问题，现在所有数据都在服务器上正确反序列化。

# sql - 特殊组 by & SUM

> ID：15955503
> 
> 赞同：0
> 
> 时间：2013-04-11T17:50:25.373
> 
> 标签：sql

我有一个包含以下字段的表： `ID, S, W`和数据喜欢：

```
1,s1,w1
1,s2,w1
1,s3,w2
2,s4,w2 
```

我想计算每个 Id 的 SUM 仅适用于 W = w1 和零作为没有 w1 任何数据的其他 ID 的结果。对于这个例子，我必须得到

```
1, s1+s2, w1
2, 0, null or 0 
```

这意味着如果 Id 有 w1 只显示一些，但如果 Id=2 只有 W 不同的 w1 也显示它。我试过了

`SUM(CASE W = w1 THEN S ELSE 0 END) AS S GROUP BY ID, W` 但不怎么也显示W？我希望我很清楚是 UDF 的一部分，其中涉及许多其他表。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:02:22.033

如果我理解正确，你想要：

```
SELECT  ID,
        SUM(CASE WHEN W = 'w1' THEN S ELSE 0 END) AS S,
        CASE WHEN W = 'w1' THEN W ELSE 0 END AS W
FROM YourTable
GROUP BY ID,
         CASE WHEN W = 'w1' THEN W ELSE 0 END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:04:46.130

以下内容对您有用吗？

```
Select id, SUM(CASE W = w1 THEN S ELSE 0 END) over(Partition by id order by 1) total, W from yourtable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T17:56:41.333

你不能有第二个 Case 语句吗？就像 CASE WHEN W = w1 THEN W ELSE 0 END as W 一样？

# visual-studio - Visual Studio 2012 崩溃查看 aspx 页面

> ID：15955510
> 
> 赞同：1
> 
> 时间：2013-04-11T17:50:36.827
> 
> 标签：visual-studio, visual-studio-2012

VS 正在崩溃查看 aspx 页面 Visual Studio 我得到了这个异常。这是事件日志中的例外：

```
Application: devenv.exe (Visual Studio Premium 2012)
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.AccessViolationException
Stack:
   at Microsoft.VisualStudio.TextManager.Interop.IVsExpansionManager.EnumerateExpansions(System.Guid, Int32, System.String[], Int32, Int32, Int32, Microsoft.VisualStudio.TextManager.Interop.IVsExpansionEnumeration ByRef)
   at Microsoft.VisualStudio.Web.Snippets.SnippetListManager+SnippetCache.CacheLanguageExpansionStructs(Microsoft.VisualStudio.TextManager.Interop.IVsExpansionManager, System.Guid)
   at Microsoft.VisualStudio.Web.Snippets.SnippetListManager+SnippetCache..ctor(Microsoft.VisualStudio.TextManager.Interop.IVsExpansionManager, System.Guid, SnippetCache)
   at Microsoft.VisualStudio.Web.Snippets.SnippetListManager.ResetSnippetCache(System.Guid)
   at Microsoft.VisualStudio.Web.Snippets.SnippetListManager.EnsureInitialized(System.Guid)
   at Microsoft.VisualStudio.Web.Snippets.SnippetListManager.GetInstance(System.Guid)
   at Microsoft.VisualStudio.Web.Factory.Microsoft.VisualStudio.Web.Interop.IMVWFactory.CreateSnippetListManager(System.Guid)
   at Microsoft.VisualStudio.Shell.Interop.IOleInPlaceComponent.FDoIdle(UInt32)
   at Microsoft.VisualStudio.Platform.WindowManagement.OleInPlaceComponentIdleManager.PassOnIdleTime(System.Collections.Generic.List`1<Microsoft.VisualStudio.Shell.Interop.IOleInPlaceComponent>, Microsoft.VisualStudio.PlatformUI.OleComponentSupport.IdleTypes)
   at Microsoft.VisualStudio.Platform.WindowManagement.OleInPlaceComponentIdleManager.FDoIdleCore(UInt32)
   at Microsoft.VisualStudio.PlatformUI.OleComponentSupport.OleComponent.Microsoft.VisualStudio.OLE.Interop.IOleComponent.FDoIdle(UInt32) 
```

我有：

```
 - Started Visual Studio in Safe Mode
 - Reverted my settings to default
 - Repaired
 - Done a uninstall and reinstall 
```

还有其他人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T15:28:12.937

这听起来像是扩展管理器（Visual Studio 的非托管组件）中的一个错误。它主要负责 Visual Studio 的代码片段扩展功能。

您可以跟踪注册表，例如，此键：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config\Languages\CodeExpa‌​nsions 
```

并检查所有子键，看看是否有什么东西看起来很糟糕，目录，甚至是指向的 .XML 文件（包含片段配置）。您还可以使用 SysInternals 的 ProcMon 工具来监控正在发生的事情。

最终，您还可以杀死所有这些密钥并启动修复...

也可以在此处向 Microsoft 报告该错误：[Connect site for Visual Studio](https://connect.microsoft.com/VisualStudio)，但如果它不容易重现，则可能不会在不久的将来修复。

# php - 循环通过 JSON 数组生成多个倒数计时器？

> ID：15955512
> 
> 赞同：0
> 
> 时间：2013-04-11T17:50:42.733
> 
> 标签：php, javascript, jquery

目前我正在使用 jquery 倒数计时器插件[（This Plugin）](http://keith-wood.name/countdown.html)通过 Ajax 调用生成计数器。
现在它工作正常，一次调用没有问题，但是当我尝试生成一个通过 Json 数组循环的多个计数器时，它不起作用。
JS

```
$(document).ready(function(){ 
                    $.ajax({
                        url: 'time.php', 
                        async: false, 
                        dataType: 'json', 
                        success: function(data) { 
                            var response = data ;
                            $.each(response, function(i, item) {
                                var time = new Date(item.time) ;
                                $('.timer').append('<li id='+ i +'></li>');
                                 $('#'+i).countdown({
                                 until: time, 
                                 compact: true,
                                 format: 'HMS'
                             });  
                            });
                        }, 
                        error: function(http, message, exc) { 
                            time = new Date(); 
                    }
                }
            ); 

            }) 
```

PHP

```
<?php
  $now = time() + 9999; 
  $now1 = time()+ 5000; 
  $data = array($now,$now1);
  $json = array();
  foreach ($data as $value){
      $json[] = array(
          'time' => $value
      );
  }
  echo json_encode($json);
 ?> 
```

这是 Json 输出

```
[{"time":1365712506},{"time":1365707507}] 
```

当我试图在不设置时间的情况下显示循环结果时，它可以正常工作并显示正确的结果。
但是在设置时间并设置倒数计时器后，它显示 00 而不是计数器

```
 00:00:00
    00:00:00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:09:56.930

您需要将日期乘以 1000

```
var time = new Date(item.time*1000); 
```

我还将类更改为 ID，并在非 html5 浏览器的 LI 的 iD 中添加了一个字母

[演示](http://jsfiddle.net/mplungjan/XrF7c/)

```
$(function(){ 
  var response = [{"time":1365712506},{"time":1365707507}];
  $.each(response, function(i, item) {
    var time = new Date(item.time*1000) ;
    $('#timer').append('<li id="t'+ i +'"></li>');
    $('#t'+i).countdown({
      until: time, 
      compact: true,
      format: 'HMS'
    });  
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:10:52.383

你需要检查你的日期，我不相信他们在未来。

```
console.log(time); 
```

[小提琴](http://jsfiddle.net/65ysV/)

# javascript - 处理js服务器端

> ID：15955515
> 
> 赞同：0
> 
> 时间：2013-04-11T17:50:58.610
> 
> 标签：javascript, server-side

我需要知道如何解决以下问题的最佳方法：

我有一个在线编辑器，用户在其中编写 js 代码来解决一些问题，比如挑战。因此，我需要获取此代码，并在服务器中对其进行处理，以检查代码是否正确编写，并比较结果。

我是否需要在服务器端调用 js shell 或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:21:16.587

在您的服务器上运行用户编写的任何代码将是一个很大的安全问题。

相反，使用[eval()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)在客户端上运行代码。然后将**结果**（如果用户解决了它）发送到您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:25:09.473

谷歌搜索`JavaScript interpreter`，有不少。

# php - 使用 php 或 jquery 发送 $_GET

> ID：15955516
> 
> 赞同：0
> 
> 时间：2013-04-11T17:51:03.747
> 
> 标签：php, jquery, forms, html

我的 index.php 页面是这样的：

```
if(isset($_GET['page'])) {
        switch ($_GET['page']) {
            case 'login':
                include('login.php');
            break;
            case 'log_out':
                $_SESSION['loggedin'] = false;
                include('loggedout.html');
            break;
            case 'profile':
                include('profile.php');
            break;
            case 'contact_us':
                include('contact.html');
            break;
            default:
                include('home.html');
            break;
        }
        }  else {
            include('home.html'); 
        } 
```

现在，当按下链接或提交表单时，我可以轻松地调用新页面，即：

```
<a href="index.php?page=home">Home</a> <a href="index.php?page=contact_us">Contact Us</a> 
```

但是如果我有一个多合一的形式怎么办......它需要能够通过 PHP 代码向我发送请求`index.php`以显示登录页面或重新显示`login.php`页面，但我似乎找不到任何可以让我在 php 脚本中发送请求，即：

```
<?php 
    if(..) {
        send request to index.php i.e index.php?page=profile
    }
?> 
```

我需要这个的原因是我`index.php`用作`divs`格式化，因此如果我不通过`index.php`它们请求页面，它们将显示在一个新的 html 中（即它没有我的导航栏等）

根据@HydraIO 和其他人的评论，这将如何使用 JQuery 完成？

这是一些代码：

lgoin.php：

```
<?php session_start(); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title>Login</title>
        <meta http-equiv="content-type"
        content="text/html; charset=iso-8859-1"
        />
        <!--
            //thanks http://decoraora.com/fototapete_115x175.php for the image http://decoraora.com/fototapete/images/664.jpg -->
        <style type="text/css">
        .table { 
            background: url("bg.jpg") no-repeat; 
            width: 600px;
            height: 250px;
        }
        </style>
    </head>

    <body>
        <?php           
            if (isset($_POST['formLogin'])) {
                    $un = $_POST['username'];
                    $pwd = $_POST['password'];
                    if($pwd!=''&&$un!='') {
                        if (md5($pwd)==='29ef52e7563626a96cea7f4b4085c124') {
                            $_SESSION['loggedin'] = true;
                            $_SESSION['login_error'] = 0;
                            $_SESSION['username'] = $un;
                            $_SESSION['password'] = $pwd;
                            //include('profile.php');
                            //header("Location: index.php/page=profile");
                        //header("Location: http://localhost/index.php?index.php?page=profile");

                        } else {
                            $_SESSION['login_error'] = 1;
                            echo 'this will dipslay in its own page';
                            //include('login.php');
                        }
                    }else {
                        $_SESSION['login_error'] = 2;
                            echo 'display in its own page';
                        //include('login.php');

        ?>
        <form action="login.php" method="post">
            <table bgcolor="white" align="center" border="1px" width="50%" style="height: 40%;">
                <tr>
                    <td colspan="2" align="center">Login for CC Chat</td>
                </tr>
                <tr>
                    <td>Username:</td>
                    <td>Password:</td>
                </tr>
                <tr>
                    <td><input type="text" name="username" maxlength="50"/></td>
                    <td><input type="password" name="password" maxlength="50"/></td>
                </tr>
                <tr>
                    <td><a href="index.php?page=contact_us">Forgot your password?</a></td>
                    <td><input type="submit" name="formLogin" value="Login"/></td>
                </tr>
                <?php 
                    if(isset($_SESSION['login_error'])) {
                        switch ($_SESSION['login_error']) {
                            case 1:
                                echo '<tr>';
                                echo '<td>';
                                echo '<font color="red">Password does not match</font>';
                                echo '</td>';
                                echo '</tr>';
                                $_SESSION['login_error']=0;
                            break;
                            case 2:
                                echo '<tr>';
                                echo '<td>';
                                echo '<font color="red">Password and/or Username cannot be empty</font>';
                                echo '</td>';
                                echo '</tr>';
                                $_SESSION['login_error']=0;
                            break;
                            default:
                            break;
                        }
                    }
                    ?>
                <tr>
                    <td colspan="2" align="center">&copy; CopyLeft David Kroukamp  11039662 2013 - 2015</td>
                </tr>
            </table>
        </form>
        <?php 
        }
        }else {
        ?>
        <form action="login.php" method="post">
            <table bgcolor="white" align="center" border="1px" width="50%" style="height: 40%;">
                <tr>
                    <td colspan="2" align="center">Login for CC Chat</td>
                </tr>
                <tr>
                    <td>Username:</td>
                    <td>Password:</td>
                </tr>
                <tr>
                    <td><input type="text" name="username" maxlength="50"/></td>
                    <td><input type="password" name="password" maxlength="50"/></td>
                </tr>
                <tr>
                    <td><a href="index.php?page=contact_us">Forgot your password?</a></td>
                    <td><input type="submit" name="formLogin" value="Login"/></td>
                </tr>
                <?php 
                    if(isset($_SESSION['login_error'])) {
                        switch ($_SESSION['login_error']) {
                            case 1:
                                echo '<tr>';
                                echo '<td>';
                                echo '<font color="red">Password does not match</font>';
                                echo '</td>';
                                echo '</tr>';
                                $_SESSION['login_error']=0;
                            break;
                            case 2:
                                echo '<tr>';
                                echo '<td>';
                                echo '<font color="red">Password and/or Username cannot be empty</font>';
                                echo '</td>';
                                echo '</tr>';
                                $_SESSION['login_error']=0;
                            break;
                            default:
                            break;
                        }
                    }
                    ?>
                <tr>
                    <td colspan="2" align="center">&copy; CopyLeft David Kroukamp  11039662 2013 - 2015</td>
                </tr>
            </table>
        </form>
        <?php
        }
        ?>
    </body>

</html> 
```

索引.php：

```
<?php session_start(); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>CC Chat</title>
        <meta 
        http-equiv="content-type" content="text/html; charset=iso-8859-1" 
        />
        <!-- 
        Thanks too http://stackoverflow.com/a/7851347/1133011 for the help
        on layout which acts more like frames but avoids them and using divs. As frames have 
        known draw backs see here http://stackoverflow.com/questions/4600648/frames-with-php we
        should thus rather use include in php
        !-->
        <style type="text/css" media="screen">
        /* Generic pane rules */
            body { margin: 0 }
            .row, .col { overflow: hidden; position: absolute; }
            .row { left: 0; right: 0; }
            .col { top: 0; bottom: 0; }
            .scroll-x { overflow-x: auto; }
            .scroll-y { overflow-y: auto; }

            .header.row { height: 75px; top: 0; background-color: #E5E5E5; }
            .menu.row { height: 75px; top: 75px; background-color: #EDEDED;  }
            .body.row { top: 150px; bottom: 50px; background-color: #F5F5F5; }
            .footer.row { height: 75px; bottom: 0; background-color: #EBEBEB; }

            A:link {text-decoration: none}
            A:visited {text-decoration: none}
            A:active {text-decoration: none}
            A:hover {font-size:24; font-weight:bold; color: red;}
        </style>
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    </head>
    <body>
        <div class="header row">
            <?php 
                include("header.html"); 
            ?>
        </div> 
        <div class="body row scroll-y">
            <?php
        if(isset($_GET['page'])) {
                        switch ($_GET['page']) {
                            case 'login':
                                include('login.php');
                            break;
                            case 'log_out':
                                $_SESSION['loggedin'] = false;
                                include('loggedout.html');
                            break;
                            case 'profile':
                                include('profile.php');
                            break;
                            case 'contact_us':
                                include('contact.html');
                            break;
                            default:
                                include('home.html');
                            break;
                        }
                }  else {
                    include('home.html'); 
                }
            ?>
        </div> 
        <div class="menu row">
            <?php 
                include("nav.php"); 
            ?>
        </div> 
        <div class="footer row">
            <?php 
                include("footer.php"); 
            ?>
        </div>
    </body>
</html> 
```

在检查密码哈希的 if 语句中使用 JQuery 尝试更新：

```
<?php session_start(); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title>Login</title>
        <meta http-equiv="content-type"
        content="text/html; charset=iso-8859-1"
        />
        <!--
            //thanks http://decoraora.com/fototapete_115x175.php for the image http://decoraora.com/fototapete/images/664.jpg -->
        <style type="text/css">
        .table { 
            background: url("bg.jpg") no-repeat; 
            width: 600px;
            height: 250px;
        }
        </style>    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    </head>

    <body>
        <?php           
            if (isset($_POST['formLogin'])) {
                    $un = $_POST['username'];
                    $pwd = $_POST['password'];
                    if($pwd!=''&&$un!='') {
                        if (md5($pwd)==='29ef52e7563626a96cea7f4b4085c124') {
                            $_SESSION['loggedin'] = true;
                            $_SESSION['login_error'] = 0;
                            $_SESSION['username'] = $un;
                            $_SESSION['password'] = $pwd;
                            //include('profile.php');
                            //header("Location: index.php/page=profile");
                            //header("Location: http://localhost/index.php?index.php?page=profile");
                            //exit();
        echo "<script type='text/javascript'>";
        echo "$.get('index.php?page=profile', function(data) {
  $('.body.row').html(data);
  alert('Load was performed.');
});";  
echo "</script>";
                        } else {
                            $_SESSION['login_error'] = 1;
                            echo 'this will dipslay in its own page';
                            //include('login.php');
                        }
                    }else {
                        $_SESSION['login_error'] = 2;
                            echo 'display in its own page';
                        //include('login.php');

        ?>
        <form action="login.php" method="post">
            <table bgcolor="white" align="center" border="1px" width="50%" style="height: 40%;">
                <tr>
                    <td colspan="2" align="center">Login for CC Chat</td>
                </tr>
                <tr>
                    <td>Username:</td>
                    <td>Password:</td>
                </tr>
                <tr>
                    <td><input type="text" name="username" maxlength="50"/></td>
                    <td><input type="password" name="password" maxlength="50"/></td>
                </tr>
                <tr>
                    <td><a href="index.php?page=contact_us">Forgot your password?</a></td>
                    <td><input type="submit" name="formLogin" value="Login"/></td>
                </tr>
                <?php 
                    if(isset($_SESSION['login_error'])) {
                        switch ($_SESSION['login_error']) {
                            case 1:
                                echo '<tr>';
                                echo '<td>';
                                echo '<font color="red">Password does not match</font>';
                                echo '</td>';
                                echo '</tr>';
                                $_SESSION['login_error']=0;
                            break;
                            case 2:
                                echo '<tr>';
                                echo '<td>';
                                echo '<font color="red">Password and/or Username cannot be empty</font>';
                                echo '</td>';
                                echo '</tr>';
                                $_SESSION['login_error']=0;
                            break;
                            default:
                            break;
                        }
                    }
                    ?>
                <tr>
                    <td colspan="2" align="center">&copy; CopyLeft David Kroukamp  11039662 2013 - 2015</td>
                </tr>
            </table>
        </form>
        <?php 
        }
        }else {
        ?>
        <form action="login.php" method="post">
            <table bgcolor="white" align="center" border="1px" width="50%" style="height: 40%;">
                <tr>
                    <td colspan="2" align="center">Login for CC Chat</td>
                </tr>
                <tr>
                    <td>Username:</td>
                    <td>Password:</td>
                </tr>
                <tr>
                    <td><input type="text" name="username" maxlength="50"/></td>
                    <td><input type="password" name="password" maxlength="50"/></td>
                </tr>
                <tr>
                    <td><a href="index.php?page=contact_us">Forgot your password?</a></td>
                    <td><input type="submit" name="formLogin" value="Login"/></td>
                </tr>
                <?php 
                    if(isset($_SESSION['login_error'])) {
                        switch ($_SESSION['login_error']) {
                            case 1:
                                echo '<tr>';
                                echo '<td>';
                                echo '<font color="red">Password does not match</font>';
                                echo '</td>';
                                echo '</tr>';
                                $_SESSION['login_error']=0;
                            break;
                            case 2:
                                echo '<tr>';
                                echo '<td>';
                                echo '<font color="red">Password and/or Username cannot be empty</font>';
                                echo '</td>';
                                echo '</tr>';
                                $_SESSION['login_error']=0;
                            break;
                            default:
                            break;
                        }
                    }
                    ?>
                <tr>
                    <td colspan="2" align="center">&copy; CopyLeft David Kroukamp  11039662 2013 - 2015</td>
                </tr>
            </table>
        </form>
        <?php
        }
        ?>
    </body>

</html> 
```

我看到了警报，但像以前一样被重定向到空白 html（甚至比以前至少重新加载表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:58:00.480

听起来您可能希望首先评估索引页面中的所有数据，并通过将php 中的[标头](http://php.net/manual/en/function.header.php)设置为相同的索引页面来进行页面重定向，并将 get 查询更新为您想要的任何内容。

```
header("Location: http://www.example.com/index.php?page=profile");
exit(); 
```

在进行重定向之前，请确保您没有使用 echo 或任何其他方式输出任何 html。如果您的脚本在此之前大量使用回声，您可以查看[输出缓冲](http://php.net/manual/en/function.ob-start.php)回声。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T18:08:24.467

PHP 是一种服务器端语言，而不是动态的。您想使用 javascript（在我的示例中为 jQuery）。

```
$_GET = <?php echo json_encode($_GET); ?>;
if($_GET['val'] == some_value){
  $.get(index.php?getvar=getval, {
    complete: function(){
      $('#div').val("YOUR OUTPUT"); // *
    }
  });
} 
```

*这可以是您喜欢的任何代码，如果您愿意，可以将 div 替换为整个 php 文件

# javascript - 性能 - Object(obj) 做什么？

> ID：15955520
> 
> 赞同：4
> 
> 时间：2013-04-11T17:51:18.533
> 
> 标签：javascript, underscore.js

**underscore.js 中用于测试对象的片段**

```
_.isObject = function(obj) {
    return obj === Object(obj);
  }; 
```

究竟是什么让它检查类型？

jsperf 表明这比使用常规检查更快，这就是使用它的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:53:51.577

> Object 构造函数为给定值创建一个对象包装器。如果值为 null 或未定义，它将创建并返回一个空对象，否则，它将返回一个与给定值对应的类型的对象。

[**资源**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:06:26.167

我找不到相关文档，但似乎该`Object`函数要么返回一个包装传入值的新对象，要么返回参数（如果它已经是一个对象）；否则，`===`测试将始终返回 false。

```
Object(5) === 5         // false, Object(5) creates Number object
Object(null) === null   // false, Object(null) creates an empty object

var foo = { prop: 'value' };
Object(foo) === foo     // true!? Argument is not wrapped 
```

这种行为似乎可以测试一个值是否是一个对象。

**更新**

看来这是[在规范中](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.1.1)：

> 当没有参数或只有一个参数值调用 Object 函数时，将采取以下步骤：
> 1\. 如果 value 为 null、未定义或未提供，则创建并返回一个新的 Object 对象，就像标准的内置 Object 构造函数一样已使用相同的参数 (15.2.2.1) 调用。
> 2\. 返回对象（值）。

并且 ToObject 的“结果是输入对象”[也是在 spec 中定义的](http://www.ecma-international.org/ecma-262/5.1/#sec-9.9)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T14:53:14.813

> 对象（obj）做什么？

[阅读关于作为函数调用的`Object`构造函数](http://es5.github.io/#x15.2.1)和[抽象`ToObject`操作](http://es5.github.io/#x9.9)的 EcmaScript 规范。

> 究竟是什么让它检查类型？

`Object(obj)`仅当输入是非原始值（、布尔值、字符串、数字[）](http://es5.github.io/#x11.9.6)时，即[EcmaScript`===`](http://es5.github.io/#x11.9.6)[对象（包括](http://es5.github.io/#x8.6)[*String*](http://es5.github.io/#x8.6) /Boolean/数字/数组实例、函数、其他对象）。`obj``null``undefined`[](http://es5.github.io/#x8.6)

# eclipse - 来自 Eclipse 和 Team City 的 Ant 构建 xml

> ID：15955522
> 
> 赞同：0
> 
> 时间：2013-04-11T17:51:20.887
> 
> 标签：eclipse, ant, teamcity

我从 Eclipse 导出了一个 ANT build.xml 文件，我不想将它用于我的 TeamCity 构建。运行构建时出现以下错误。关于可能导致这种情况的任何想法。

`Process exited with code 1 [13:44:24]Ant output [13:44:24][Ant output] java.lang.NoClassDefFoundError: org/apache/tools/ant/launch/Launcher [13:44:24][Ant output] Caused by: java.lang.ClassNotFoundException: org.apache.tools.ant.launch.Launcher [13:44:24][Ant output] at java.net.URLClassLoader$1.run(URLClassLoader.java:202) [13:44:24][Ant output] at java.security.AccessController.doPrivileged(Native Method) [13:44:24][Ant output] at java.net.URLClassLoader.findClass(URLClassLoader.java:190) [13:44:24][Ant output] at java.lang.ClassLoader.loadClass(ClassLoader.java:307) [13:44:24][Ant output] at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) [13:44:24][Ant output] at java.lang.ClassLoader.loadClass(ClassLoader.java:248) [13:44:24][Ant output] Could not find the main class: org.apache.tools.ant.launch.Launcher. Program will exit. [13:44:24][Ant output] Exception in thread "main" [13:44:24]Publishing internal artifacts [13:44:24]Build finished`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:36:55.177

看起来类 org.apache.tools.ant.launch.Launcher 找不到。我猜您在启动 ant 构建文件时在类路径中没有 ant jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:07:06.973

我必须将 Android sdk 添加到构建服务器，并运行 SDK 管理器 exe 以下载所需的 google api。最重要的是，在我的 Android 项目中的 local.properties 文件中引用 SDK 的路径，之后一切正常。

# maven - Maven内部仓库，真的这么难吗？

> ID：15955526
> 
> 赞同：6
> 
> 时间：2013-04-11T17:51:39.110
> 
> 标签：maven, nexus, artifactory

我有几个使用 Maven 的项目，我想在我的工作网络上运行一个内部存储库。我有几个来自第三方的库，不能发布到野外，还有一些我们自己的库需要在网络内可用（包括我们的 TeamCity CI 服务器），但不能部署在网络外。经过一番研究，我发现了关于如何完成此任务的三个主要建议：Archiva、Artifactory 和 Nexus。我已经尝试了每一个，但都未能使用它们中的任何一个创建的内部存储库成功构建我的任何项目。

这使我相信我误解了某事或做错了什么。有谁知道一个教程，它将引导我完成设置和内部 Maven 存储库并将其与我的项目集成？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T18:40:32.207

我只使用过 Nexus，但我发现它很容易安装：

1.  去[http://www.sonatype.org/nexus/go](http://www.sonatype.org/nexus/go)下载OSS版本
2.  获取“战争”分布
3.  通过 Web 应用程序管理器在我的 Tomcat 安装中安装 servlet

那时，我可以访问`http://myserver:8080/nexus`以查看一切正常。

对于肤浅的设置，我将默认密码添加到我的`settings.xml`：

```
 <servers>
            <server>
                    <id>my-snapshots</id>
                    <username>admin</username>
                    <password>admin123</password>
            </server>
            <server>
                    <id>my-releases</id>
                    <username>admin</username>
                    <password>admin123</password>
            </server>
    </servers> 
```

在我的 POM 文件中：

```
 <distributionManagement>
            <snapshotRepository>
                    <id>my-snapshots</id>
                    <name>My internal repository</name>
                    <url>http://myserver:8080/nexus/content/repositories/snapshots</url>
            </snapshotRepository>
            <repository>
                    <id>my-releases</id>
                    <name>My internal repository</name>
                    <url>http://myserver:8080/nexus/content/repositories/releases</url>
            </repository>
    </distributionManagement> 
```

除此之外，学习曲线上升了很多，但我发现 Sonatype 的在线书籍非常好。 [使用 Nexus 进行存储库管理](http://www.sonatype.com/Support/Books/Repository-Management-with-Nexus)是一种了解您可以使用存储库服务器做什么的方法。我发现唯一棘手的是某些信息仅适用于他们的商业软件，他们不会太努力地宣传差异。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-11T19:40:15.407

Archiva 和 Nexus 等存储库管理器不仅仅是一个内部存储库。它们充当代理，避免访问 Maven 中央或其他外部存储库。

对于内部存储库，您只需要一个具有 Maven 存储库结构的网络或 HTTP 可访问位置。然后您将其称为[设置文件中的另一个存储库](http://maven.apache.org/settings.html#Repositories)。

```
<repository>
  <id>my-internal-repo</id>
  <url>http://myrepo.mycompany.com/</url>
</repository> 
```

[在http://maven.apache.org/guides/introduction/introduction-to-repositories.html](http://maven.apache.org/guides/introduction/introduction-to-repositories.html)的 Maven 文档中查看更多信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-12T05:06:54.483

我建议使用[Nexus Pro Installer](http://www.sonatype.com/Products/Nexus-Professional/Purchase/Free-Trial)附带的[Nexus 评估指南](http://www.sonatype.com/books/nexus-book/reference/eval.html)（最新可用版本是[2.13](http://books.sonatype.com/nexus-book/2.13/reference/eval.html) ） ，但也适用于[Nexus Open Source](http://www.sonatype.org/nexus/go)代理和部署组件的简单用例。

这些示例也可以在[github](https://github.com/sonatype/nexus-book-examples)上找到，包括 Maven、Ant/Ivy 和 Gradle 的设置。查看示例并阅读指南后，您将能够以相同的方式轻松设置项目。

当然，如果有任何问题，您可以随时[在邮件列表中询问或在 hipchat 上与开发人员聊天](http://www.sonatype.org/nexus/participate)

# c - 显式转换 C

> ID：15955528
> 
> 赞同：2
> 
> 时间：2013-04-11T17:51:40.590
> 
> 标签：c, type-conversion

如果我有以下情况：

```
char id[5]="1"; 
```

我想将 id 用作整数，我必须先转换它还是足以 `(int)id`使用该字符串中的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:52:55.383

不...您需要使用函数调用来转换它，例如`int n = atoi( id )`

一个 char 数组就是……一个 char 数组……它不是您所想的意义上的数字。您需要使用函数调用将其从值的字符串表示形式转换为您要查找的实际数字整数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:52:58.693

您可以使用[atoi](http://linux.die.net/man/3/atoi)将字符串转换为整数：

```
char id[5] = "1";
int n = atoi(id); // n = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T17:53:58.330

C 不提供字符串和数值数据之间的类型转换。

要将字符串转换为 int，您需要使用`atoi`or (better) `strtol`。 `strtol`更好，因为如果输入字符串不能转换为数字，它不会导致未定义的行为，并且它允许您检测类似的情况`"42xyz"`并做出正确的反应。

# java - CommPortIdentifier.getPortIdentifiers 为空

> ID：15955530
> 
> 赞同：6
> 
> 时间：2013-04-11T17:51:48.770
> 
> 标签：java, serial-port, javax.comm

我正在构建一个简单的应用程序，它使用 Java 通信 API javax.comm 通过串行端口进行通信。

这是我编写的 java main 方法中的一些代码：

```
CommPortIdentifier cpi = null;
        Enumeration e = CommPortIdentifier.getPortIdentifiers();
        while (e.hasMoreElements()) {
            try {
                cpi = (CommPortIdentifier) e.nextElement();
            } catch (NoSuchElementException n) {

            }
            System.out.println(cpi.getName());
        } 
```

枚举 e 始终为空，即使我在运行时连接到 COM 4 端口。

此外，运行此代码：

```
portRead = CommPortIdentifier.getPortIdentifier("COM8"); 
```

导致抛出`NoSuchPortException`

我想我已经正确完成了安装部分并将属性文件 win32com.dll 文件放在了正确的位置。

你知道问题可能是什么吗？

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-14T21:36:54.140

请始终记住，您需要将 javax.comm.zip 中的所有解压缩文件添加到**jre**

win32com.dll - jre/bin

comm.jar - jre/lib/ext

**java.comm.properties - jre/lib**（添加后我发现已解决的异常问题）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-20T20:27:47.213

确保 win32com.dll（与 javax.com 一起提供）位于 jre\bin 目录中。确保 javax.comm.properties（与 javax.com 一起提供）位于 jdk\lib 目录中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-01T10:03:38.857

这对我有用（我安装了 x86 jdk ）并按照步骤操作

您的问题是 Windows 无法将正确的端口传送到您的 JAVA 程序。

您必须按照此链接将正确的文件复制到正确的位置。

[http://kishor15389.blogspot.com/2011/05/how-to-install-java-communications.html](http://kishor15389.blogspot.com/2011/05/how-to-install-java-communications.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-31T09:33:01.170

查找您的设备正在工作的端口（尝试 power shell 或超级终端以查找所有 com 端口尝试 [链接](https://blogs.msdn.com/b/powershell/archive/2006/08/31/writing-and-reading-info-from-serial-ports.aspx?Redirected=true)）

# c# - 存储一个aspx复选框的值？

> ID：15955534
> 
> 赞同：0
> 
> 时间：2013-04-11T17:52:07.020
> 
> 标签：c#, asp.net

我有一个由 ListItem 列表填充的复选框列表，每个 ListItem 都有文本和“8”或“5”之类的值。

但是我意识到 CheckBox 没有值，它的值是否被选中。

```
var listType = SettingsManager.Get("CRMCaseTypes");
var listStatus = SettingsManager.Get("CRMStatusReasons");

var listTypeItems = ParseSettingList(listType);
var listStatusItems = ParseSettingList(listStatus);

cblCRMType.DataSource = listTypeItems;
cblCRMType.DataBind();
cblCRMStatus.DataSource = listStatusItems;
cblCRMStatus.DataBind();

foreach (Control c in cblCRMStatus.Controls)
{
   CheckBox cb = c as CheckBox;
   if(cb != null && cb.(value........)
} 
```

有什么方法可以在每个复选框中存储一个值，并在用户单击提交后在后面的代码中再次使用它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:04:55.450

是的你可以。您可以将自定义属性添加到`CheckBox`. 您可以使用 HTML5 数据属性，因此您的 HTML 将是 HTML5 有效的：

放

```
foreach (Control c in cblCRMStatus.Controls)
{
   CheckBox cb = c as CheckBox;
   if(cb != null)
   {
       cb.Attributes.Add("data-MyField", myFieldVal);
   }
} 
```

取回

```
foreach (Control c in cblCRMStatus.Controls)
{
   CheckBox cb = c as CheckBox;
   if(cb != null && cb.Attributes["data-MyField"].ToString())
   {
       // do something
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:56:10.743

你想多长时间重复使用它？如果要临时存储，可以使用 session. 如果要存储更长时间，请将其保存到数据库或文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:59:08.060

您可以从复选框绑定到的列表中提取值，根据复选框的索引引用相关列表项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:59:24.300

您可以将其添加为属性 -

放：

```
myCheckBox.Attributes.Add("myKey","myValue"); 
```

得到：

```
var myKey = myCheckBox.Attributes["myKey"] != null ?  myCheckBox.Attributes["myKey"].ToString() : ""; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T19:29:03.797

有什么方法可以在每个复选框中存储一个值，并在用户单击提交后在后面的代码中再次使用它？

您可以将其设置为会话

```
Session["CbxList"] = YourCheckBoxList; 
```

然后，当您想引用它时，只需添加以下内容：

```
if (Session["CbxList"] != null)
{
YourCheckBoxList = Session["CbxList"] as CheckBoxList;
} 
```

和使用。

如果您或其他任何人不熟悉它们，我已经包含了一个会话链接：http: [//msdn.microsoft.com/en-us/library/ms178581 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T20:31:12.377

您需要查看 Items 集合，而不是 Controls 集合：

```
 foreach (ListItem item in cblCRMStatus.Items)
    {
        string value = item.Value;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-09T13:41:36.647

尽管 OP 可能不再需要我的答案，但我会添加我的答案，因为该线程在 Google 中的排名仍然很高。如果这是一个，`ASPxCheckBox`您可以使用`JSProperties`字典来存储您的值，如下所示：

```
cb.JSProperties["cpMyValue"] = "MyValue"; 
```

然后，我通常会使用来自 a 的回调`ASPxGridView`或`CallbackPanel`将其返回到服务器端（这稍微超出了原始问题的范围）。

# graphics - 是否有任何工具可以可视化 RabbitMQ 绑定？

> ID：15955539
> 
> 赞同：1
> 
> 时间：2013-04-11T17:52:18.457
> 
> 标签：graphics, rabbitmq

拥有一个可以以编程方式生成队列和交换之间绑定的可视图像的工具会很有用。

这是我期待的视觉图像示例： [http ://www.rabbitmq.com/tutorials/tutorial-five-python.html](http://www.rabbitmq.com/tutorials/tutorial-five-python.html)

我已经搜索了一段时间，但找不到任何选项。或者，如果没有直接的解决方案，您有什么建议可能对我自己构建有用吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:54:52.607

有一个实验插件可以将其呈现为 HTML5 Canvas：

[http://www.rabbitmq.com/plugins.html](http://www.rabbitmq.com/plugins.html)

rabbitmq_management_visualiser

# wpf - 所有列的 WPF GridView 共享单元格模板

> ID：15955540
> 
> 赞同：7
> 
> 时间：2013-04-11T17:52:21.817
> 
> 标签：wpf, listview, gridview, binding

我正在尝试创建一个`DataTemplate`可以为 a 的所有列共享的`GridView`，它的列是动态创建的（通过代码隐藏）。

我想`DataTemplate`在 XAML 中创建资源，而不是完全在代码隐藏中创建，但我不知道如何让绑定正常工作。

以下是我能想到的最接近的（但不起作用）：

```
<DataTemplate x:Key="ListViewCellTemplate">
        <TextBlock Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type GridViewColumn}}}" />
    </DataTemplate> 
```

此模板分配为`CellTemplate`每列的，如下所示：

```
BindableDataTable table = this.DataContext as BindableDataTable;

            foreach (BindableDataColumn c in table.Columns)
            {
                GridViewColumn col = new GridViewColumn();
                col.Header = c.ColumnName;

                col.CellTemplate = this.FindResource("ListViewCellTemplate") as DataTemplate;
                v.Columns.Add(col);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-27T00:15:43.170

回答：

在资源中设置 DataTemplate

```
 <UserControl.Resources>
        <ResourceDictionary>
            <DataTemplate x:Key="GridViewCellTemplateStyle">
                <TextBlock Text="{Binding}">
                    <TextBlock.InputBindings>
                        <MouseBinding Gesture="LeftDoubleClick" Command="{Binding DataContext.CommandDoubleClick, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListView}}}"/>
                    </TextBlock.InputBindings>
                </TextBlock>
            </DataTemplate>
        </ResourceDictionary>
    </UserControl.Resources> 
```

创建您的网格视图并使列继承此数据模板

```
 <ListView>
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="Auto" Header="Column1" CellTemplate="{StaticResource GridViewCellTemplateStyle}"/>
                    <GridViewColumn Width="Auto" Header="Column2" CellTemplate="{StaticResource GridViewCellTemplateStyle}"/>
                    <GridViewColumn Width="Auto" Header="Column3" CellTemplate="{StaticResource GridViewCellTemplateStyle}"/>
                    <GridViewColumn Width="Auto" Header="Column4" CellTemplate="{StaticResource GridViewCellTemplateStyle}"/>
                </GridView>
            </ListView.View>
        </ListView> 
```

此示例向您展示如何在 GridViewColumn 中创建可双击的行。只需更改您认为合适的 DataTemplate

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:22:52.953

我有完全相同的问题。

我希望能够将数据模板应用于不同的列，但将每列绑定到单独的数据字段。

```
<ListView ItemsSource="{Binding}"  Name="listViewIMS" Grid.Row="1" Margin="0,0,0,4" FontSize="11" AlternationCount="2" SelectionMode="Extended">

        <ListView.Resources>
            <DataTemplate x:Key="Templ">
                <TextBlock TextAlignment="Left" Text="{Binding}"/>
            </DataTemplate>
            <DataTemplate x:Key="Tempr">
                <TextBlock Width="78" Margin="-6,0" TextAlignment="Right" Text="{Binding}" /> 
            </DataTemplate>
            <Style x:Key="HeaderStyleRight" TargetType="GridViewColumnHeader">
                <Setter Property="HorizontalContentAlignment" Value="Right"/>
            </Style>
            <Style x:Key="HeaderStyleLeft" TargetType="GridViewColumnHeader">
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
            </Style>                
        </ListView.Resources>

        <ListView.View>
            <GridView x:Name="gridViewInvoices">
                <GridViewColumn Width="80" DisplayMemberBinding="{Binding Document}">
                    <GridViewColumnHeader Tag="docNo" Content="Document" />
                </GridViewColumn>                   
                <GridViewColumn Width="220" DisplayMemberBinding="{Binding Customer}">
                    <GridViewColumnHeader Tag="customer" Content="Customer"/>
                </GridViewColumn>
                <GridViewColumn Width="100" DisplayMemberBinding="{Binding inv_date, StringFormat='dd/MM/yy'}" >
                    <GridViewColumnHeader Tag="date" Content="Date" />
                </GridViewColumn>
                <GridViewColumn Width="100" DisplayMemberBinding="{Binding inv_l_catalogue}" >
                    <GridViewColumnHeader Tag="catalogue" Content="Item" />
                </GridViewColumn>
                <GridViewColumn Width="60" DisplayMemberBinding="{Binding inv_l_qty}" >
                    <GridViewColumnHeader Tag="qty" Content="Qty" />
                </GridViewColumn>
                <GridViewColumn Width="80" DisplayMemberBinding="{Binding inv_l_price, StringFormat='0.00' }" >
                    <GridViewColumnHeader Tag="unitPrice" Content="Price" />
                </GridViewColumn>
                <GridViewColumn Width="50" DisplayMemberBinding="{Binding inv_l_per}" >
                    <GridViewColumnHeader Tag="per" Content="Per" />
                </GridViewColumn>
                <GridViewColumn Header="Goods" CellTemplate ="{StaticResource Tempr}" HeaderContainerStyle="{StaticResource HeaderStyleRight}" Width="80" >

                    <!--GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Width="78" Margin="-6,0" TextAlignment="Right" Text="{Binding inv_l_lgoods2, StringFormat='0.00'}"  />
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>-->
                </GridViewColumn>
            </GridView>
        </ListView.View>  

    </ListView> 
```

# xml - 树的 XML/XSD 图形表示

> ID：15955542
> 
> 赞同：1
> 
> 时间：2013-04-11T17:52:25.487
> 
> 标签：xml, xsd, visualization

我已经构建了一个 XML 文件并从中生成了一个 XSD 文件。XML 几乎是空的，因为有元素但没有值：

```
<parent>
   <child1/>
   <child2/>
</parent> 
```

我正在寻找的是一个可以将我的 XML（或其关联模式）转换为树的图形表示的软件：

```
 parent
                   |
                   |
     _______________________________
     |                             |
     |                             |
   child1                        child2 
```

有可爱的盒子，颜色等等。

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:01:35.753

一般来说，了解你为什么这样做会很有帮助；例如，创作/分析/验证源（XML 或 XSD）和/或用于文档目的？那你打算怎么做呢？交互的？您是否需要自动化来提取可视化？

许多开源和免费版本的商业产品提供了某种 XML 和 XSD 可视化：Eclipse、NetBeans、Visual Studio（开发工具）、HelpStudio（帮助创作）、Oxygen、XmlSpy（专业编辑器）等。

[QTAssistant](http://www.paschidev.com)（我与之相关）还提供了 XML 和 XSD 文件的图形表示；下面是一些例子。

XML 可视化为一棵树：

![在此处输入图像描述](https://i.stack.imgur.com/gvsdi.png)

关联的（推断的）XSD：

![在此处输入图像描述](https://i.stack.imgur.com/E6Dim.png)

这些工具带有一个自动化 API，允许人们在底层 XML/XSD 更改时不断更新这些图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T19:53:48.873

**XSDDiagram**是一个小型 .NET 2.0 开源应用程序，可以生成这些图表。

[http://regis.cosnier.free.fr/?page=XSDDiagram](http://regis.cosnier.free.fr/?page=XSDDiagram)

# javascript - 是否可以使用 REST API 将项目添加到 Sharepoint 2010 中的站点级别列表？

> ID：15955544
> 
> 赞同：4
> 
> 时间：2013-04-11T17:52:37.957
> 
> 标签：javascript, rest, sharepoint, post, sharepoint-2010

我有一个网站，我目前能够检索/添加/删除列表项：

```
http://portal/_vti_bin/listdata.svc/Announcements 
```

我可以从以下网址检索数据：

```
http://portal/site/_vti_bin/listdata.svc/HQAnnouncements 
```

但是当我尝试将数据发布到该列表时，我收到以下错误：

```
Error processing request stream. The request should be a valid top-level resource object. 
```

当我向第一个 URL 提供不正确的字段数据时，我收到一个错误，提到 Microsoft.SharePoint.DataService.AnnouncementsItem 项类型。这个对象模型是否可能不知何故不知道我的自定义站点级别公告项目列表？

我真的很希望能够将数据写入该站点级别的列表。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:18:02.123

这比我想象的要容易得多。

答案是注意字段名称。

我在“添加公告”表单上有一个“纪律”字段。由于它是一个下拉菜单，因此数据服务将字段名称显示为“DisciplineValue”。

课程：在尝试编写新项目之前，请注意到达您的数据。

此外，可能是错误的错误代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-22T04:31:33.557

浏览到您的 REST 网址：

在您的示例中： [http://portal/site/_vti_bin/listdata.svc/HQAnnouncements(2)](http://portal/site/_vti_bin/listdata.svc/HQAnnouncements(2))

选择一些**有效的 id**。直接从结果集中复制列。这可确保您拥有正确的名称和大小写。

# ios - 如何从父层绘制多个 CALayer 子层

> ID：15955545
> 
> 赞同：1
> 
> 时间：2013-04-11T17:52:42.707
> 
> 标签：ios, core-animation, core-graphics, calayer

我有一个带有两个包含半静态内容的子图层的 CALayer。在渲染顶层时，我偶尔会继续渲染子层，而不用 setNeedsDisplay 安排更新。

我知道一种选择是创建委托类并实现`drawLayer:inContext:`，但我想立即渲染子层，也许使用 renderInContext: 但我不想渲染到父层。

有没有办法可以切换或获取子层的上下文以立即绘制到它们中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:01:27.820

在保持“根”对象中的状态的同时进行绘制的机制是将根对象设置为它将为其进行渲染的任何层的委托。然后你应该在委托中实现 drawLayer:inContext:。

请注意，除非您使用 setNeedsDisplay 要求图层，否则不需要重绘图层。因此，在您的情况下，将遍历您的状态并仅调用`[layer setNeedsDisplay]`那些需要它的层，而反过来只有这些层会调用 drawLayer:inContext:。

# c# - SignalR - 客户端连接时循环

> ID：15955547
> 
> 赞同：0
> 
> 时间：2013-04-11T17:52:44.583
> 
> 标签：c#, .net, asp.net-mvc-4, signalr

最近我一直在玩 SignalR，发现它非常适合服务器/客户端通信。

然后我想到了一个与我目前正在从事的项目非常相关的场景。

基本思想是通过 ping 机器在网页上指示服务器当前是否在线。

该过程由第一个访问该页面的用户启动，并应在所有客户端断开连接时停止。

到目前为止，我的服务器代码是这样的：

```
public class PingHub : Hub
{
    private static readonly ConcurrentDictionary<string, DateTime> _users = new ConcurrentDictionary<string, DateTime>();
    private static bool _isPolling = false;

    public override Task OnConnected()
    {
        _users.TryAdd(Context.ConnectionId, DateTime.Now);

        return Clients.All.UserCountChanged(_users.Count);
    }

    public override Task OnReconnected()
    {
        _users.AddOrUpdate(Context.ConnectionId, DateTime.Now, (key, value) => value);

        return Clients.All.UserCountChanged(_users.Count);
    }

    public override Task OnDisconnected()
    {
        DateTime value;
        _users.TryRemove(Context.ConnectionId, out value);

        return Clients.All.UserCountChanged(_users.Count);
    }

    public void GetStatus()
    {
        if (_isPolling)
            return;

        _isPolling = true;

        var ping = new Ping();
        do
        {
            var reply = ping.Send("X.X.X.X");

            if (reply == null)
            {
                Clients.Caller.SetError(new { error = "No reply!" });
                break;
            }

            Clients.All.SetStatus(new { Status = reply.Status.ToString(), Time = reply.RoundtripTime });

            Thread.Sleep(500);
        } while (_users.Count > 0);

        _isPolling = false;
    }
} 
```

问题是启动进程的用户保持连接，即使浏览器已关闭（我通过记录每个 ping 请求对此进行了测试）。

那么任何人都可以帮助我按预期完成这项工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T20:17:16.967

我最近做了类似的事情。在我的 Global.asax.cs 我有：

```
private BackgroundProcess bp;
protected void Application_Start( object sender, EventArgs e )
{
    ...
    bp = new BackgroundProcess();
} 
```

然后我有一个BackgroundProcess.cs：

```
public class BackgroundProcess : IRegisteredObject
{
    private Timer TaskTimer;
    private IHubContext ClientHub;

    public BackgroundProcess()
    {
        HostingEnvironment.RegisterObject( this );

        ClientHub = GlobalHost.ConnectionManager.GetHubContext<webClientHub>();

        TaskTimer = new Timer( OnTimerElapsed, null, TimeSpan.FromSeconds( 0 ), TimeSpan.FromSeconds( 10 ) );
    }

    private void OnTimerElapsed( object sender )
    {
        if (...) //HasAnyClientsConnected, not sure what this would be, I had other criteria
        {
            ClientHub.Clients.All.ping(); //Do your own ping
        }
    }

    public void Stop( bool immediate )
    {
        TaskTimer.Dispose();
        HostingEnvironment.UnregisterObject( this );
    } 
```

这里的关键是 IRegisteredObject。您可以查看它，但 Web 应用程序会在它因任何原因关闭时通知它。

# android - 从微调器获取值并根据该值更改文本视图

> ID：15955557
> 
> 赞同：0
> 
> 时间：2013-04-11T17:53:11.630
> 
> 标签：android, sqlite, spinner

好的，这应该是直截了当的，但我遇到了困难。到目前为止，我已经得到了这个代码。

```
 public void onItemSelected(AdapterView<?> parent, View view, int position,
        long id) {
        // On selecting a spinner item

        SpinnerFAQ = parent.getItemAtPosition(position).toString();
        // Showing selected spinner item
        Toast.makeText(parent.getContext(), "You selected: " + SpinnerFAQ,
            Toast.LENGTH_LONG).show();

        TextView tv = (TextView) findViewById(R.id.faq_answer);
        ExerciseData question = new ExerciseData(this);
        question.open();
        String answer = question.getFaqAnswer();
        question.close();
        tv.setText(answer);

   } 
```

SpinnerFAQ 是一个全局变量，它将微调器的值存储为字符串。

```
 public String getFaqAnswer() {
        // TODO Auto-generated method stub
        String[] columns = new String[] { FAQ_ROWID, FAQ_QUESTION, FAQ_ANSWER};
        Cursor c = ourDatabase.query(DATABASE_TABLE2, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(FAQ_ROWID);
        int iQuestion = c.getColumnIndex(FAQ_QUESTION);
        int iAnswer = c.getColumnIndex(FAQ_ANSWER);

        //c.getString(iRow) + " " +

        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
        {
            if(FAQ.SpinnerFAQ == c.getString(iQuestion))
            {
                result = result + c.getString(iAnswer) + "\n";
                break;
            }
        }

        return result;
    } 
```

这是基于我已经使用过的代码，但基本上我想根据我的数据库中的问题检查微调器，如果它们匹配，我想将文本视图更改为答案。现在 FAQ.SpinnerFAQ 工作正常，但 c.getString(iQuestion) 总是显示为数据库中的最后一个值。此代码“结果 = 结果 + c.getString(iAnswer) + "\n";" 没有 if 语句就可以正常工作，所以我真的不明白为什么“c.getString(iQuestion)”有问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:58:33.137

```
if(FAQ.SpinnerFAQ == c.getString(iQuestion)) 
```

永远不要将字符串与`==`Java 中的字符串进行比较，始终使用`equals()`. 请阅读：[如何比较 Java 中的字符串？](https://stackoverflow.com/q/513832/1267661)并将每个字符串比较更改为：

```
if(FAQ.SpinnerFAQ.equals(c.getString(iQuestion))) 
```

# python - 检测无限递归

> ID：15955566
> 
> 赞同：4
> 
> 时间：2013-04-11T17:53:48.460
> 
> 标签：python, recursion, metaprogramming, trac

我正在为[Trac](http://trac.edgewall.org/)创建一个宏，它所做的一件事是渲染一些 wiki 文本，而这些文本又可以使用相同的宏。

如果使用相同的参数调用内部宏（即呈现相同的 wiki 文本位），这可能会导致无限递归。我想通过检查调用堆栈并在扩展宏的函数已经使用完全相同的参数集调用时中断递归来尝试阻止用户像这样射击自己的脚。

我一直在[查看检查模块](http://docs.python.org/2/library/inspect.html)，这绝对是要走的路，但仍然无法弄清楚如何发现堆栈上前一个函数的参数值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T18:02:18.960

捕获递归异常是更好的方法，但您也可以在要“保护”的函数上添加装饰器：

```
from functools import wraps
from threading import local

def recursion_detector(func):
    func._thread_locals = local()

    @wraps(func)
    def wrapper(*args, **kwargs):
        params = tuple(args) + tuple(kwargs.items())

        if not hasattr(func._thread_locals, 'seen'):
            func._thread_locals.seen = set()
        if params in func._thread_locals.seen:
            raise RuntimeError('Already called this function with the same arguments')

        func._thread_locals.seen.add(params)
        try:
            res = func(*args, **kwargs)
        finally:
            func._thread_locals.seen.remove(params)

        return res

    return wrapper 
```

然后将该装饰器应用于宏渲染函数。

一个简单的演示：

```
>>> @recursion_detector
... def foo(bar):
...     return foo(not bar)
... 
>>> foo(True)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 10, in wrapper
  File "<stdin>", line 3, in foo
  File "<stdin>", line 10, in wrapper
  File "<stdin>", line 3, in foo
  File "<stdin>", line 7, in wrapper
RuntimeError: Already called this function with the same arguments
>>> foo(False)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 10, in wrapper
  File "<stdin>", line 3, in foo
  File "<stdin>", line 10, in wrapper
  File "<stdin>", line 3, in foo
  File "<stdin>", line 7, in wrapper
RuntimeError: Already called this function with the same arguments 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T17:57:04.307

在递归错误发生时捕获它比在运行时尝试在它发生之前捕获它更容易。

如果这不是一个选项，那么在渲染之前分析模板也可能是一种前进的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:59:33.527

同样简单的是传递字典来跟踪使用的参数，并在开始时检查参数是否已经尝试过。

# mysql - 语法有什么问题？

> ID：15955579
> 
> 赞同：0
> 
> 时间：2013-04-11T17:54:22.170
> 
> 标签：mysql, create-table

```
CREATE TABLE Existing_medical_condition (
    condition VARCHAR(50) NOT NULL, 
    date_of_diagnosis DATE, treatment TEXT, 
    pssn INT NOT NULL, 
    CONSTRAINT emc_key PRIMARY KEY(condition, pssn), 
    FOREIGN KEY(pssn) REFERENCES Patient(ssn)
); 
```

给出错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“condition VARCHAR(50) NOT NULL, date_of_diagnosis DATE,treatment TEXT, pssn INT”附近使用正确的语法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T17:55:57.597

条件是[保留字](http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-5.html)。你必须用反引号括起来：

```
CREATE TABLE Existing_medical_condition (
    `condition` VARCHAR(50) NOT NULL,
    date_of_diagnosis DATE, 
    treatment TEXT, 
    pssn INT NOT NULL, 
    CONSTRAINT emc_key 
    PRIMARY KEY(condition, pssn), 
    FOREIGN KEY(pssn) REFERENCES Patient(ssn)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:58:45.553

尽量避免为列名保留关键字。如果你还想要，你可以在下面写。

```
CREATE TABLE Existing_medical_condition ([condition] VARCHAR(50) NOT NULL,     date_of_diagnosis DATE, treatment TEXT, 
pssn INT NOT NULL, CONSTRAINT emc_key PRIMARY KEY(condition, pssn), FOREIGN KEY(pssn)       REFERENCES Patient(ssn)); 
```

# java - 如何使用opencv（Android）实时从视频中获取数组或任何像素集合

> ID：15955580
> 
> 赞同：0
> 
> 时间：2013-04-11T17:54:27.470
> 
> 标签：java, android, opencv, video, pixels

就像在主题中一样，我想使用 opencv 分析来自 android 手机的视频。如何在录制视频时访问像素（rgb 或类似）（可能会有轻微的延迟）？

我已经下载了具有 Opencv 2.4.3.2 的 tegra 开发人员包

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:09:21.587

我建议查看 JAVACV，它使用 opencv 绑定来做任何事情，但来自 JAVA！一个简单的谷歌搜索将揭示一些 C++ 像素值如何

您提出的问题非常开放，我会问很多问题...所以您使用opencv ....哪个版本？你有没有尝试过任何东西并成功了？你是如何为 android 实现 opencv 的？这是一个学校项目吗？

更多信息是好的！:-)

# asynchronous - 无法加入 ev 循环线程，因为它挂在 epoll_wait()

> ID：15955594
> 
> 赞同：3
> 
> 时间：2013-04-11T17:55:39.190
> 
> 标签：asynchronous, redis, epoll, libev, hiredis

我正在将异步hiredis与libev一起使用。mLoopThread 在这里用于 ev 循环线程，基本上 mLoopThread 正在调用 ev_loop()。当主线程试图破坏异步hiredis实例时，它调用ev_unloop试图让ev_loop()退出。代码如下所示。但这不起作用。回溯显示 mLoopThread 在 epoll_wait() 中挂起，主线程在 mLoopThread->join() 中挂起。如何退出ev循环线程？谢谢。

```
~async_redis() {
    ev_unloop(mLoop, EVBREAK_ALL);
    if (mLoopThread && mLoopThread->joinable()) {
        mLoopThread->join();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:55:46.803

很难回答，因为您只提供了 4 行代码，但在我看来，您将 ev_unloop 从事件循环中调用，这几乎没用。

这里，你调用ev_unloop，然后尝试加入线程，所以我的理解是你在你的主线程，想通知事件循环停止，等待事件循环线程停止。IMO 正确的做法是：

*   将 ev_async 处理程序添加到事件循环。

*   与此异步处理程序关联的回调应调用 ev_unloop - 它将在事件循环内从事件循环线程执行。

*   在你的主线程中通知事件循环的 ev_async 处理程序（线程安全操作），然后你可以加入事件循环线程

这通常是我使用 ev_unloop 的方式。

# javascript - iframe 内的 JQuery UI 对话框

> ID：15955595
> 
> 赞同：4
> 
> 时间：2013-04-11T17:55:46.830
> 
> 标签：javascript, jquery, jquery-ui, iframe, jquery-dialog

我正在开发一个 sp2013 应用程序，这意味着它正在使用 iframe。具体来说，它是一个非常大的 iframe，占据了大部分屏幕。在很多时候，我正在打开 jquery ui 对话框窗口。它们被设置为出现在视口的中间，这很好，只是它显示在 iframe 的中间，而不是可见屏幕的中间。

有没有办法告诉 jquery ui 查看 window.top 的滚动属性，而不是 iframe？

编辑： iframe 和父级在同一个域上，所以跨域问题不是问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T18:23:21.747

好的，所以我找到了解决方案。在声明我的对话框时，我执行了以下操作：

```
$("selector").dialog({
    position: {my: "center", at: "center", of: window.top}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:10:24.763

HTML：

```
<div id="dialog">Hello, world!</div> 
```

jQuery：

```
alert('Window size: '+window.innerWidth);
var dialogWidth = 500;
var dialogHeight = 200;
var dialogX = (window.innerWidth - dialogWidth)/2;
var dialogY = (window.innerHeight - dialogHeight)/2;
$("#dialog").dialog({ position: [dialogX,dialogY], width: dialogWidth, height: dialogHeight }, 500);
alert('Dialog position: '+$("#dialog").dialog( "option", "position" )); 
```

小提琴： http: [//jsfiddle.net/3vjsa/3/](http://jsfiddle.net/3vjsa/3/)

在 iframe 中运行。水平和垂直居中。如果窗口的中心位置落在 iframe 之外，它将被移动到 iframe 的边缘。添加了警报消息以显示窗口宽度和对话框位置。

# ruby-on-rails - 使用独角兽初始化 OmniAuth

> ID：15955597
> 
> 赞同：1
> 
> 时间：2013-04-11T17:55:51.020
> 
> 标签：ruby-on-rails, ruby, omniauth, unicorn, production

我有一个使用 OminAuth 的 rails 3 应用程序。我正在使用文件“config/initializers/omniauth.rb”对其进行初始化：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, "...", "..."
  provider :identity, :on_failed_registration => lambda { |env| IdentitiesController.action(:new).call(env) }

  OmniAuth.config.on_failure = Proc.new { |env|
    OmniAuth::FailureEndpoint.new(env).redirect_to_failure
  }
end 
```

它在使用 WEBrick 的开发中正常工作，但在生产（nginx + unicorn）上，应用程序挂起并且 unicorn.log 显示以下内容：

```
E, [2013-04-11T14:45:41.485066 #3276] ERROR -- : reaped #<Process::Status: pid 18825 exit 1> worker=1
I, [2013-04-11T14:45:41.485439 #3276]  INFO -- : worker=1 spawning...
I, [2013-04-11T14:45:41.491241 #18831]  INFO -- : worker=1 spawned pid=18831
I, [2013-04-11T14:45:41.491662 #18831]  INFO -- : Refreshing Gem list
E, [2013-04-11T14:45:41.622456 #18828] ERROR -- : uninitialized constant OmniAuth (NameError)
/home/insidegui/apps/curtaavida/releases/20130411173917/config/initializers/omniauth.rb:1:in `<top (required)>'
/home/insidegui/apps/curtaavida/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
/home/insidegui/apps/curtaavida/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/engine.rb:587:in `each'
/home/insidegui/apps/curtaavida/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/engine.rb:587:in `block in <class:Engine>'
/home/insidegui/apps/curtaavida/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
/home/insidegui/apps/curtaavida/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'
/home/insidegui/apps/curtaavida/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/insidegui/apps/curtaavida/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'
/home/insidegui/apps/curtaavida/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'
/home/insidegui/apps/curtaavida/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'
/home/insidegui/apps/curtaavida/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/insidegui/apps/curtaavida/releases/20130411173917/config/environment.rb:5:in `<top (required)>'
config.ru:4:in `require'
config.ru:4:in `block in <main>' 
```

我的 production.log 保持干净。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:38:01.203

好吧，我停止了独角兽进程并再次启动它，现在它可以工作了。我做了一个新的上限：部署它现在似乎工作得很好......奇怪......

# c# - 在 MVC 日期时间？不工作

> ID：15955598
> 
> 赞同：2
> 
> 时间：2013-04-11T17:55:52.880
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在开发一个 ASP.Net MVC 4 应用程序。在 UI 中，我有一个字段使用时间选择器来选择开始和结束时间，格式为`HH:mm`. 但此刻我选择一个值 07:00 验证消息说`The field Start Time must be a date.`我正在使用 jQuery 验证插件：

```
class booking
{
DateTime? StartTime{get;set;}
} 
```

**看法**

```
 @model booking
 StartTime:  @Html.EditorFor(m => m.StartTime, "TimePicker") 
```

**共享/EditorTemplates/TimePicker.cshtml**

```
@model DateTime?
@{
String modelValue = "";
var dateFormat = System.Threading.Thread.CurrentThread.CurrentCulture.DateTimeFormat;

if (Model.HasValue)
{
    if (Model.Value != DateTime.MinValue)
    {
        modelValue = Model.Value.ToString("HH:mm", dateFormat);
    }
}
}
@Html.TextBox("", modelValue) 
```

***呈现的 HTML***

```
 <input type="text" value="" name="StartTime" id="StartTime" 
 data-val-date="The field Start time must be a date." data-val="true" 
 class="hasTimepicker input-validation-error" /> 
```

问题是什么？为什么 mvc 使用此编辑器模板触发验证？它在 mvc 3 中工作。为什么不在 mvc4 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:07:04.007

不是绑定到 DateTime，而是绑定到 TimeSpan。如果没有日期组件，DateTime 就不能存在。

# ms-access - DoCmd.RunSQL 不显示警告

> ID：15955601
> 
> 赞同：1
> 
> 时间：2013-04-11T17:56:08.650
> 
> 标签：ms-access, ms-access-2007

我选择`DoCmd.RunSQL`了一个特定的功能，而不是`CurrentDb.Execute`因为我想利用 Access 的内置警告来让用户选择回滚查询。但是，当我今天运行它时，我注意到它不再显示警告。当我编写程序时，我几乎可以肯定它确实如此。

我已经尝试过明确设置`DoCmd.SetWarnings True`，即使没有理由一开始就`SetWarnings`应该关闭，但这并不能解决问题。有谁知道问题可能是什么？

我的代码在下面（为了节省空间，稍微编辑了一下）。作为参考，这是上下文菜单上的一项功能，它记录当前记录的字段值，并将记录集中的所有记录更新为相同的值。它生成的查询是正确的，并且可以正确执行——但它不会首先显示警告消息。

```
Public Function FillFoundRecords()
    On Error GoTo ErrHandler

    Dim controlField As String, idName As String, _
        commandText As String, whereClause As String

    'First save the current record
    DoCmd.RunCommand acCmdSaveRecord

    controlField = Screen.ActiveControl.ControlSource

    With Screen.ActiveForm
        'Check for any where clauses or filters on the active form
        whereClause = GetWhereClause(.RecordSource)

        'Build the UPDATE command. This uses a few custom functions and properties, 
        'but it's not the problem -- it always produces the correct query statement.
        commandText = _
          "UPDATE " & .BaseTable & _
          " SET [" & controlField & "] = " & ActiveControlFilter & _
          " WHERE " & whereClause

        DoCmd.SetWarnings True
        DoCmd.RunSQL commandText
        .Refresh
    End With

ExitHandler:
    On Error Resume Next 'Ignore further errors
    Exit Function

ErrHandler:
    If Err.Number = 2501 Then 'RunSQL command was cancelled; ignore this
        Resume ExitHandler
    Else
        ErrorHandle
        Resume ExitHandler
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:02:59.763

也许您不久前对警告感到恼火并禁用了它们？在选项菜单中（我认为是在高级选项卡下），有 3 个切换：

确认记录更改
确认文档更改
确认操作查询

这些是否未经检查？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:51:19.037

在您报告的评论中，您现在收到了您想要的确认消息`DoCmd.RunSQL`。不幸的是，我们仍然不了解他们的暂时失踪。

但是，如果您依赖这些确认消息，请注意每个用户都可以根据自己的偏好 设置高级选项*“确认操作查询” ，您的应用程序将尊重她的偏好。*

因此，如果您想要这些确认消息，请修改您的应用程序以确保设置是您需要的。

```
Application.SetOption "Confirm Action Queries", True 
```

然后，该更改将在 Access 会话中持续存在。为避免惹恼您的用户，您可以在应用程序启动时检查设置...

```
? Application.GetOption("Confirm Action Queries") 
```

...保存它，并在关机时再次使用`Application.SetOption`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:17:10.933

我已经*很长时间*`DoCmd.SetWarnings`没有使用了，但是值得以下代码确实会引发警告，就像我双击操作查询时一样：

 *```
Sub queryTest()
Dim cdb As DAO.Database, qdf As QueryDef
Set cdb = CurrentDb
On Error Resume Next
DoCmd.DeleteObject acQuery, "zzzTempQuery"
On Error GoTo queryTest_Error
Set qdf = cdb.CreateQueryDef("zzzTempQuery", "UPDATE Clients SET LastName=""Thompson"" WHERE ID=25")
qdf.Close
Set qdf = Nothing
Set cdb = Nothing
DoCmd.SetWarnings True
DoCmd.OpenQuery "zzzTempQuery", acViewNormal
DoCmd.Close acQuery, "zzzTempQuery"
DoCmd.DeleteObject acQuery, "zzzTempQuery"
Exit Sub

queryTest_Error:
If Err.Number = 2501 Then
    '' user cancelled - just exit
Else
    Err.Raise Err.Number
End If
End Sub 
```

## 编辑

嗯，我认为它可能与`DoCmd.OpenQuery`，但这个变体也引发了一个警告：

```
DoCmd.SetWarnings True
DoCmd.RunSQL "UPDATE Clients SET LastName=""Thompson"" WHERE ID=25" 
```*

# sql-server-2008 - 创建一个会计年度表

> ID：15955605
> 
> 赞同：0
> 
> 时间：2013-04-11T17:56:16.087
> 
> 标签：sql-server-2008, stored-procedures

我刚刚创建了一个财政年表内容

```
- Week  (tinyint 1-53)
- Start date (date)
- End date (date)
- Year (int) 
```

我想制作一个 SP 以使用参数将日期插入此表中：

```
- Year: <2013>
- Start Year date: <12/30/2012>
- End Year date: <12/28/2013> 
```

然后它将根据下表中的下表生成 52 周：

```
- Week: 1
- Start date: 12/30/2012
- End date: 01/05/2013
- Year 2013 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:59:49.867

```
DECLARE @d DATE = '20121230';

;WITH x AS
(
  SELECT TOP (53) n = ROW_NUMBER() OVER (ORDER BY [object_id])-1
    FROM sys.all_objects 
    ORDER BY [object_id]
)
--INSERT dbo.fiscal_year([week],[start date],[end date],[year])
SELECT 
  [week] = n+1, 
  [start date] = DATEADD(WEEK, n, @d), 
  [end date] = DATEADD(DAY, n*7+6,@d), 
  [year] = 2013
FROM x
ORDER BY n; 
```

当您对输出感到满意时，取消注释`INSERT`.

# angularjs - $$broadcast 上的 angularjs 错误

> ID：15955606
> 
> 赞同：5
> 
> 时间：2013-04-11T17:56:27.747
> 
> 标签：angularjs

我有一个角度脚本，它在 $rootScope 上广播一个事件（使用 $$broadcast）。我使用的角度版本是 1.1.4

在某些情况下，这会在 Angular 代码中引发异常：

未捕获的类型错误：无法读取 null 的属性“$$nextSibling”。

有没有人知道可能导致此错误的原因？不幸的是，发生此错误的代码太大了，但也许有人可以指出我正确的方向？

它发生的角度代码是：

```
 // Insanity Warning: scope depth-first traversal
      // yes, this code is a bit crazy, but it works and we have tests to prove it!
      // this piece should be kept in sync with the traversal in $digest
      if (!(next = (current.$$childHead || (current !== target && current.$$nextSibling)))) {
        while(current !== target && !(next = current.$$nextSibling)) { 
```

在 while 语句上

更新：广播是从外部组件上的单击事件内部执行的，单击事件是外部组件的配置对象的属性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-19T15:44:20.070

```
$timeout(function(){
    //do stuff
}); 
```

`$timeout`没有等待时间也可以。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-14T17:45:13.077

问题在于在作用域上使用或不使用 $$apply。有时我需要在我已经处于申请阶段的其他场合使用 $$apply ...... Sp 我最终实现了 safeApply （在互联网上的某个地方找到）。想知道为什么这不是用 Angular 实现的标准，因为它实现起来非常简单，而且它简化了编码

# windows - 如何将程序安装到用户的桌面？

> ID：15955607
> 
> 赞同：0
> 
> 时间：2013-04-11T17:56:29.980
> 
> 标签：windows, delphi, delphi-7, uac

我正在尝试为我构建的应用程序创建安装程序。尝试将程序复制到用户桌面时遇到问题： 复制程序时，出现错误：

> 系统错误。代码：5\. 访问被拒绝。

我尝试以管理员身份运行，但似乎没有任何效果。当我将文件复制到 Program Files 时，它工作正常，但是当我尝试复制到用户的桌面时，我收到错误消息。我的目标平台是 Windows 7 和 Windows 8。

这是我的一些代码：

```
function GetCurrentUserName : String;
const
  cnMaxUserNameLen = 254;
var
  dwUserNameLen : DWORD;
begin
  dwUserNameLen := cnMaxUserNameLen-1;
  SetLength(sUserName, cnMaxUserNameLen);
  GetUserName(PChar(sUserName), dwUserNameLen);
  SetLength(sUserName, dwUserNameLen);
  Result := sUserName;
end;

procedure TForm1.BitBtn1Click(Sender: TObject);
var
  Source, Source2, Dest, Dest2: String;
begin
  Source := 'rusmar.bin';
  Dest := 'C:/Program Files/RusMarEstimatingModel.exe';
  if not CopyFile(PChar(Source), PChar(Dest), False)
    then RaiseLastOSError;
  GetCurrentUserName;
  Source := 'rusmar.bin';
  Dest := 'C:/Users/' + sUserName + '/Desktop/RusMarEstimatingModel.exe';
  if not CopyFile(PChar(Source), PChar(Dest), False)
    then RaiseLastOSError;
  label2.Show;
  timer1.Enabled := True;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:17:58.890

我不知道这是否是问题所在，但这不是您获取登录用户桌面路径的方式。路径很可能具有这种形式，但在很多情况下它不会。

例如：

1.  旧版本的 Windows，例如 XP。
2.  一些未来尚未发布的 Windows 版本会改变一些事情。
3.  用户移动他们的个人资料。
4.  机器使用英语以外的语言，并且 Desktop 已本地化。

正确的方法是使用接收一个`CSIDL`或已知文件夹 ID 的函数之一。例如通过传递`CSIDL_DESKTOP`给`SHGetSpecialFolderPath`.

程序文件文件夹也是如此`CSIDL_PROGRAM_FILES`。

一旦你得到这个排序，你可能仍然会得到`ERROR_ACCESS_DENIED`. 显然，由于您正在复制到登录用户的桌面，您应该有权访问该文件夹吗？该文件夹上的安全设置是否受到干扰？打开安全设置对话框并查看您在该文件夹中拥有的有效权限。该文件是否已经存在并且是否有一个禁止您覆盖该文件的 ACL？它是否已经存在并且是只读的？

# c++ - C++ 目录迭代器

> ID：15955609
> 
> 赞同：4
> 
> 时间：2013-04-11T17:56:41.400
> 
> 标签：c++, boost, boost-filesystem

自从我使用 C++ 以来已经有一段时间了，请原谅我的新手问题。

我编写了以下代码来获取目录内容的列表，它工作正常：

```
for (directory_iterator end, dir("./");
     dir != end; dir++) {
    std::cout << *dir << std::endl;
} 
```

“*dir”返回什么，一个“char array”指针，一个指向“string”对象的指针，还是一个指向“path”对象的指针？

我想将“*dir”（如果它以 .cpp 结尾）传递给另一个函数（），该函数将在稍后（异步）对其进行操作。我想我需要复制“*dir”。我写了以下代码：

```
path *_path;
for (directory_iterator end, dir("./");
     dir != end; dir++) {
    _path = new path(*dir);
    if (_path->extension() == ".cpp") {
        function1(_path);    // function1() will free _path
    } else
        free(_path);
} 
```

谢谢你，艾哈迈德。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:39:48.957

从[boost::directory_iterator 的文档中](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/reference.html#Class-directory_iterator)：

> 未定义结束迭代器上 operator* 的结果。对于任何其他迭代器值，都会返回 const directory_entry&。

关于函数调用，我认为最简单的方法是：

```
using namespace boost::filesystem;

for (directory_iterator end, dir("./"); dir != end; dir++) {
  const boost::filesystem::path &this_path = dir->path();
  if (this_path.extension() == ".cpp") {
    function1(this_path); // Nothing to free
  } 
} 
```

其中function1方法可以声明为：

```
void function1(const boost::filesystem::path this_path); 
```

# enthought - 如何在独立机器上安装 Enthought Canopy 包？

> ID：15955612
> 
> 赞同：1
> 
> 时间：2013-04-11T17:56:54.273
> 
> 标签：enthought

如果我在没有互联网连接的计算机上安装 Canopy 软件包？我应该在系统沙箱还是用户沙箱中使用 egginst.exe？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:27:25.890

没关系。文档中题为“我的用户 Python 环境中所有 Python 包在哪里”的文章很好地解释了这一点。Canopy 按以下顺序查找软件包用户 --> 系统 --> 冠层安装。

所以登录到您的 Enthought 帐户并转到存储库。下载您想要的所有鸡蛋并使用 USERNAME\AppData\Local\Enthought\Canopy32\User\Scripts\egginst.exe 安装

至少这似乎对我有用。

# java - 如何阅读使用未知随机所有者密码创建的 PDF？

> ID：15955620
> 
> 赞同：10
> 
> 时间：2013-04-11T17:57:07.183
> 
> 标签：java, pdf, passwords, itext, aspose

要求是一次处理一批PDF，并在成功时使用用户密码对它们中的每一个进行加密。

但是，这些 PDF 之前是使用随机生成的动态所有者密码*（任何人都不知道）*加密的，以防止任何编辑。

我使用[iText](http://itextpdf.com/)进行加密，如下所示：

```
byte[] userPass = "user".getBytes();
byte[] ownerPass = "owner".getBytes();
PdfReader reader = new PdfReader("Misc.pdf");

PdfStamper stamper = new PdfStamper(reader,
            new FileOutputStream("Processed_Encrypted.pdf"));
stamper.setEncryption(userPass, ownerPass,
PdfWriter.ALLOW_PRINTING, PdfWriter.ENCRYPTION_AES_128
        | PdfWriter.DO_NOT_ENCRYPT_METADATA);
stamper.close();
reader.close(); 
```

但是这段代码抛出了一个`com.itextpdf.text.exceptions.BadPasswordException: PdfReader not opened with owner password`

有人可以指导如何解决此错误/绕过所有者密码吗？

在这里，我想明确表示我们合法拥有这些 PDF，因此没有犯罪/黑客行为。

**PS**：解决方案不限于 iText，也可以使用任何其他 Java 库（*免费或许可*）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-12T10:16:58.893

`PdfReader`有一个未记录的`static boolean`变量，名为`unethicalreading`. 出于显而易见的原因，此变量`false`默认设置为。您可以像这样将此变量设置为 true：

```
PdfReader.unethicalreading = true; 
```

从现在开始，PdfReader 将忽略所有者密码的存在。如果用户密码到位，它只会抛出异常。

使用它需要您自担风险。

# python - 将列表中的特定项目一分为二

> ID：15955623
> 
> 赞同：0
> 
> 时间：2013-04-11T17:57:21.010
> 
> 标签：python, string, list, xml-parsing

我正在为 SVG 文件在 python 中构建 XML 解析器。它最终将成为步进电机的具体说明。

SVG 文件包含诸如“M”、“C”和“L”之类的命令。路径数据可能如下所示：

[M199.66, 0.50C199.6, 0.50...0.50Z]

当我提取路径数据时，它是一个项目的列表（这是一个字符串）。我将长字符串拆分为多个字符串：

[u'M199.6', u'0.50C199.66', u'0.50']

'M、C 和 L' 命令很重要 - 我很难将 '0.5C199.6' 拆分为 '0.5' 和 'C199.6' 因为它只存在于列表中的某些项目，我想要保留 C 而不是丢弃它。这是我到目前为止所拥有的：

```
for item in path_strings[0]:
    s=string.split(path_strings[0], ',')
    print s
    break
for i in range(len(s)):
    coordinates=string.split(s[i],'C')
    print coordinates
    break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:08:55.373

您可以尝试将其分解为如下子字符串：

```
whole = "0.5C199.66"
start = whole[0:whole.find("C")]
end = whole[whole.find("C"):] 
```

那应该给你`start == "0.5"`和`end == "C199.66"`

或者，您可以使用 index 函数而不是 find，它会在找不到子字符串时引发 ValueError。这将使您轻松确定当前字符串不存在“C”命令。

[http://docs.python.org/2/library/string.html#string-functions](http://docs.python.org/2/library/string.html#string-functions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:55:54.337

使用正则表达式搜索命令 ( `[MCL]`)。

```
import re

lst = [u'M199.6', u'0.50C199.66', u'0.50']

for i, j in enumerate(lst):
    m = re.search('(.+?)([MCL].+)', j)
    if m:
        print [m.group(1), m.group(2)] #  = coordinates from your example
        lst[i:i+1] = [m.group(1), m.group(2)] # replace the item in the lst with the splitted thing
        # or do something else with the coordinates, whatever you want.

print lst 
```

将您的列表拆分为：

```
[u'M199.6', u'0.50', u'C199.66', u'0.50'] 
```

# lwuit-form - LWUIT + Nokia SDK 2.0 表单在屏幕上滑动时变黑

> ID：15955624
> 
> 赞同：0
> 
> 时间：2013-04-11T17:57:22.260
> 
> 标签：lwuit-form

我对 LWUIT 的形式有一个奇怪的问题。我正在制作一个简单的游戏，您可以通过触摸屏进行控制。我只想使用简单的触摸事件，没有滑动。但是，当发生滑动事件时，屏幕会变成全黑。在一些正常的触摸事件之后，图片又回来了，但这真的很烦人。我必须设置表单的哪个属性才不会发生这种情况？手机本身也会出现问题，而不仅仅是模拟器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T11:19:30.703

解决方案：我必须在我的表单（空体）中覆盖public **void** **pointerDragged(int x, int y)方法。**

# asp.net - IIS6 上 ASP.NET 4.0 中的无扩展 URL

> ID：15955626
> 
> 赞同：1
> 
> 时间：2013-04-11T17:57:24.543
> 
> 标签：asp.net, url, iis

我有一个在 IIS6 网络服务器上运行的 ASP.NET 4.0 WebForms webapp。我不允许对网络服务器进行任何更改。我在这个文件中嵌入了一个 flex 应用程序，名为：

myapp.contoso.com/mysubapp/mysubapp.aspx

我只想要求用户使用 URL：

myapp.constoso.com/mysubapp

到达应用程序并基本上永久隐藏了 mysubapp.aspx。我一直在检查 URLRewrite 和 URLRewriting.net ......对于我需要它的这个实例来说，这一切看起来有点多（如果我将来需要添加更多重写，我将使用其中一个框架）。有没有一种简单的方法可以实现这一目标？我查过类似的帖子……看来我可能需要自己写一个简单的？

[使用 iis6 重写 URL，没有无扩展名 url](https://stackoverflow.com/questions/540596/httpmodule-url-rewriting-using-iis6-with-no-extensionless-urls)

[如何处理 ASP.Net 和 IIS6 中的无扩展 URL](https://stackoverflow.com/questions/10788985/how-to-deal-with-extensionless-url-in-asp-net-and-iis6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:07:57.943

我能想到的最简单的事情是将您的网页从 重命名`mysubapp.aspx`为`default.aspx`. 这将允许用户请求`myapp.constoso.com/mysubapp`并获取您的页面。如果您没有`default.aspx`从 IIS 的默认文档列表中删除，这应该可以工作。

或者，您可以添加`mysubapp.aspx`到 IIS 中的默认文档列表。

# php - 尝试将 $sendtoname 添加到消息

> ID：15955627
> 
> 赞同：0
> 
> 时间：2013-04-11T17:57:28.123
> 
> 标签：php, email, message

现在我有这个：

```
$sendtoname = "John";
$sendtoemail = "john@email.com"; 
```

还有这个：

```
$message = "Dear ".$sendtoname;
$message .= ",<br><br>A new volunteer has registered for your ".$_REQUEST['pickevent']; 
```

所以我收到一条消息说，

```
"Dear John,

A new volunteer has registered for your event..." 
```

但是“约翰”没有出现；它显示为空白。我该如何纠正？

**编辑 ：**

好的，这是我的完整代码：

```
<?php
if (get_magic_quotes_gpc()) {
    function stripslashes_deep($value)
    {
        $value = is_array($value) ?
                    array_map('stripslashes_deep', $value) :
                    stripslashes($value);

        return $value;
    }

    $_POST = array_map('stripslashes_deep', $_POST);
    $_GET = array_map('stripslashes_deep', $_GET);
    $_COOKIE = array_map('stripslashes_deep', $_COOKIE);
    $_REQUEST = array_map('stripslashes_deep', $_REQUEST);
}
//send an email from the server TO YOUR EMAIL

$fromname = $_REQUEST['firstname'];
$fromemail = $_REQUEST['email'];
$subject = "NMVN EVENT REGISTRATION";

$message = "Dear ".$sendtoname;
$message .= ",<br><br>A new volunteer has registered for your ".$_REQUEST['pickevent'];
$message .= " event. Below is a copy of their registration: ".$_REQUEST['blank'];
$message .= " <br><br><br> <b>First Name:</b> ".$_REQUEST['firstname'];
$message .= " <br> <b>Last Name:</b> ".$_REQUEST['lastname'];
$message .= " <br> <b>Cell Phone:</b> ".$_REQUEST['cellphone'];
$message .= " <br> <b>Alternative Phone:</b> ".$_REQUEST['altphone'];

//This is the person who is going to receive the email
switch ($_REQUEST["pickevent"])
{
    case 'Heart Walk 4/20/13':
        $sendtoname = "Bob";
        $sendtoemail = "bob@email.com";
        break;
    case 'Bowling Fundraiser 5/4/13':
        $sendtoname = "John";
        $sendtoemail = "john@email.com";
        break;
}

//Email header stuff
$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
$headers .= "From: $fromname <$fromemail>\r\n";
$headers .= "To: $sendtoname <$sendtoemail>\r\n";
$headers .= "Bcc: me@myemail.com" . "\r\n";
$headers .= "Reply-To: $fromname <$fromemail>\r\n";
$headers .= "X-Priority: 3\r\n";
$headers .= "X-MSMail-Priority: Normal\r\n";
$headers .= "X-Mailer: Created by Mike Gandy";

//this next line creates and sends the email
mail($sendtoemail, $subject, $message, $headers);

?> 
```

否则表格会正确响应，而它会发送给正确的人并密件抄送给我。所有其他消息也可以正常工作。唯一不起作用的是 $sendtoname 没有出现在消息中。它出现在标题中就好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:09:45.367

将您的开关移至 before `$message`，因为您在声明之前尝试使用`$sendtoname`它。

```
//This is the person who is going to receive the email
switch ($_REQUEST["pickevent"])
{
    case 'Heart Walk 4/20/13':
        $sendtoname = "Bob";
        $sendtoemail = "bob@email.com";
        break;
    case 'Bowling Fundraiser 5/4/13':
        $sendtoname = "John";
        $sendtoemail = "john@email.com";
        break;
}

$message = "Dear ".$sendtoname;
$message .= ",<br><br>A new volunteer has registered for your ".$_REQUEST['pickevent'];
$message .= " event. Below is a copy of their registration: ".$_REQUEST['blank'];
$message .= " <br><br><br> <b>First Name:</b> ".$_REQUEST['firstname'];
$message .= " <br> <b>Last Name:</b> ".$_REQUEST['lastname'];
$message .= " <br> <b>Cell Phone:</b> ".$_REQUEST['cellphone'];
$message .= " <br> <b>Alternative Phone:</b> ".$_REQUEST['altphone']; 
```

# jquery - 如何测试 jquery 是否正确加载？

> ID：15955628
> 
> 赞同：2
> 
> 时间：2013-04-11T17:57:28.470
> 
> 标签：jquery, css, carousel

我有一个包含 a 和 li 标签的 jquery/CSS 轮播。就 html 和样式而言，一切似乎都正确显示，但似乎 jquery 没有加载 b/c，轮播上没有任何功能。我试过查看 Firebug 中的脚本选项卡，只能从我正在调用的谷歌库中看到为 jquery js 库 v1.6.2 列出的未定义断点。我是一名试图学习更多开发的设计师，因此感谢您的帮助！谢谢，

这是我的代码

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>hiLounge</title>

    <link href="/css/reset.css" rel="stylesheet" type="text/css" />
    <link href="css/touchcarousel.css" rel="stylesheet" type="text/css"  />
    <link href="css/black-and-white-skin.css" rel="stylesheet" type="text/css"  />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script src="js/jquery.touchcarousel-1.2.min.js" type="text/javascript"></script>

    <script src="js/cufon.js" type="text/javascript"></script>
    <script src="js/League_Gothic_400.font.js" type="text/javascript"></script>

    <script type="text/javascript">
        Cufon.replace ('h1', 'h2', 'ul#nav li');
    </script>

    <script>
        jQuery(function($) {
        $("#carousel").touchcarousel({
                itemsPerMove: 4,      

                pagingNav: true,             // Enable paging nav. Overrides snapToItems.
                                              // Snap to first item of every group, based on itemsPerMove. 

                pagingNavControls: true,      // Paging controls (bullets).

                autoplay:true,               // Autoplay enabled.
                autoplayDelay:3000,           // Delay between transitions.
                autoplayStopAtAction:true,    // Stop autoplay forever when user clicks arrow or does any other action.

                scrollbar: true,              // Scrollbar enabled.
                scrollbarAutoHide: false,     // Scrollbar autohide.
                scrollbarTheme: "light",       // Scrollbar color. Can be "light" or "dark".    

                transitionSpeed: 600,         // Carousel transition speed (next/prev arrows, slideshow).       

                directionNav:true,            // Direction (arrow) navigation (true or false).
                directionNavAutoHide:false,   // Direction (arrow) navigation auto hide on hover. 
                                              // On touch devices arrows are always displayed.

                loopItems: false,             // Loop items (don't disable arrows on last slide and allow autoplay to loop).

                keyboardNav: false,           // Keyboard arrows navigation.
                dragUsingMouse:true,          // Enable drag using mouse.   

                scrollToLast: true,          // Last item ends at start of carousel wrapper.    

                itemFallbackWidth: 500,       // Default width of the item in pixels. (used if impossible to get item width).

                baseMouseFriction: 0.0012,    // Container friction on desktop (higher friction - slower speed).
                baseTouchFriction: 0.0008,    // Container friction on mobile.
                lockAxis: true,               // Allow dragging only on one direction.
                useWebkit3d: false,           // Enable WebKit 3d transform on desktop devices. 
                                              // (on touch devices this option is turned on).
                                              // Use it if you have only images, 3d transform makes text blurry.

                onAnimStart: null,            // Callback, triggers before deceleration or transition animation.
                onAnimComplete: null,         // Callback, triggers after deceleration or transition animation.

                onDragStart:null,             // Callback, triggers on drag start.
                onDragRelease: null           // Callback, triggers on drag complete.
        });
        });
    </script>

    <style rel="stylesheet" type="text/css">

    body {
            background: #ffffff;
            text-align: center;
            font-family: helvetica, arial, sans-serif;
            line-height: 25px;
            margin-top: 0px;
        }

    h1 {
        font-size: 34px;
        line-height: 24px;
        color: #007a3d;
        }

    a:link {
        color: #007a3d;
        text-decoration: none;
        }

    a:hover {
        text-decoration: underline;
        }

    a:visited {
        color: #007a3d;
        }
    #container {
        width: 960px;
        margin: auto;
        text-align: center;
        }

    #container #godbar {
        width: 960px;
        height: 32px;
        margin: auto;
        position: fixed;
        background: url(images/godbar_bg.jpg) repeat-x;
        border-left: 1px solid #dbc25e;
        border-bottom: 1px solid #dbc25e;
        border-right: 1px solid #dbc25e;
        }

    #container #godbar #godbarIcons {
        width: 100%;
        height: 32px;
        float: right;
        text-align: right;
        margin-top: 5px;
        margin-right: 5px;

        }

    #container #godbar #godbarIcons ul {
        display: inline;

        }
    #container #godbar #godbarIcons li {
        display: inline;
        padding-right:13px;
    }
    #container #header {
        width: 960px;
        height: 150px;
        margin-bottom: 0;
        padding-bottom: 0;
    }

    #container #logo {
        width: 233px;
        height: 94px;
        margin: 0;
        padding: 0;
        padding-top: 35px;
        }

    #container #header #logo h1{
        width: 233px;
        height: 94px;
        clear: both;
        display: block;
        margin: 0 0 0 15px;
        background: url(images/logo.jpg) no-repeat;
        text-indent: -9999px;
        }

    #container #header #logo h1 a {
        display: block;
        width: 233px;
        height: 94px;
        }

    #container ul#nav {
        width: 100%;
        height: 44px;
        text-align: center;
        margin: 0 auto;
        padding: 0;
        background: url(images/navigation_bg.jpg) repeat-x;
        list-style: none;
        display: block;
        }

    #container ul#nav a:hover {
        text-decoration: none;
        }

    #container ul#nav li {
        margin-top: 5px;
        display: inline-block;
        float: left;
        text-align: center;
        padding-top: 5px;
        padding-right: 0;
        padding-left: 15px;
        text-transform: uppercase;
        }

    #container ul#nav a {
        color: #FFF;

        }

    #container carousel {
        position: relative;
        width: 100%;
        margin: 0 auto; 
        }

    #container #carousel li {
        display: inline;
        list-style: none;
        margin: 0 auto;
        padding: 0;
        }

    </style>

</head>

<body>
<div id="container">
    <!--GODBAR-->
    <div id="godbar">
        <div id="godbarIcons">
        <ul>

            <li id="godbarFacebook"><a href="http://www.facebook.com/hilounge" target="_blank"><img src="images/godbar_fb.png" alt="hilounge on Facebook" /></a>

            </li>

            <li id="godbarTwitter"><a href="http://www.twitter.com/hilounge" target="_blank"><img src="images/godbar_twitter.png" alt="hilounge on Twitter"/></a>

            </li> 

            <li id="godbarInstagram"><a href="http://www.instagram.com/hilounge" target="_blank"><img src="images/godbar_instagram.png" alt="hilounge on Instagram" /></a>

            </li>
            <li id="godbarPinterest"><a href="http://www.pinterest.com/hilounge" target="_blank"><img src="images/godbar_pinterest.png" alt="hilounge on Pinterest" /></a>

            </li>
            <li id="godbarGplus"><a href="https://plus.google.com/b/108830451064104477365/108830451064104477365/posts" target="_blank"><img src="images/godbar_gplus.png" alt="hilounge on Goolge plus" /></a>

            </li>
            <li id="godbarRss"><a href="http://feeds.feedburner.com/hilounge" target="_blank"><img src="images/godbar_rss.png" alt="hilounge RSS feed" /></a>

            </li>
            <li id="godbarEmail"><a href="http://feedburner.google.com/fb/a/mailverify?uri=hilounge&amp;loc=en_US" target="_blank"><img src="images/godbar_email.png" alt="hilounge email" /></a>

            </li>
        </ul>
        </div>
        <!--END GODBARICONS-->
    </div>
     <!--END GODBAR-->

     <!--BEGIN HEADER-->
     <div id="header">

        <!--BEGIN LOGO-->
        <div id="logo">
            <h1><a href="index.html">hiLounge</a></h1>
        </div>
        <!--END LOGO-->
        <!--BEGIN NAVIGATION-->
        <ul id="nav">
            <h2 class="nav"><li><a href="#"> News </a></li>
            <li><a href="#"> Entertainment </a></li>
            <li><a href="#"> Fashion </a></li>
            <li><a href="#"> Munchies </a></li>
            <li><a href="#"> Design </a></li>
            <li><a href="#"> Reviews </a></li>
            <li><a href="#"> Contests </a></li>
            </h2>

        </ul>
        <!--END NAVIGATION-->
     </div>
     <!--END HEADER-->

     <!--BEGIN CAROUSEL-->
     <div id="carousel" class="touchcarousel black-and-white">
        <ul class="touchcarousel container">
         <!-- TouchCarousel items, place any HTML content inside them (img tag is inserted as an example) -->
            <li class="touchcarousel-previous">
            <img src="images/previous.jpg" width="20" height="184" />
        </li>            
            <li class="touchcarousel-item">
            <a href="#"><img src="images/carousel-image.png" width="184" height="184" /></a>
        </li>
        <li class="touchcarousel-item">
            <a href="#"><img src="images/carousel-image2.png" width="184" height="184" /></a>
        </li>
        <li class="touchcarousel-item">
            <img src="images/carousel-image.png" width="184" height="184" />
        </li>
        <li class="touchcarousel-item">
            <img src="images/carousel-image2.png" width="184" height="184" />
        </li>
        <li class="touchcarousel-item">
            <img src="images/carousel-image.png" width="184" height="184" />
        </li>
        <li class="touchcarousel-next">
            <img src="images/next.jpg" width="20" height="184" />
        </li> 
        <li class="touchcarousel-item">
            <img src="images/carousel-image2.png" width="184" height="184" />
        </li>
        <li class="touchcarousel-item">
            <img src="images/carousel-image.png" width="184" height="184" />
        </li>
        <li class="touchcarousel-next">
            <img src="images/next.jpg" width="20" height="184" />
        </li> 
        </ul>
     </div>     
     <!--END CAROUSEL-->

     <!--BEGIN MAIN-->
  <div id="primaryContent">
    <h1><a href="#"> 10 Best Bongs You Wish You Made</a></h1>
     <a href="#"><img src="images/featured-post-featured-image.png" alt="Post Title" /></a>

     <!--BEGIN POSTMETADATA-->
     <div id="postMetaData">
        <ul>
            <li><img src="images/date-icon.jpg" /> March 26, 2013</li>
            <li><a href="#"><img src="images/category-icon.jpg"  /> Entertainment</a></li>
            <li><a href="#"><img src="images/author-icon.jpg"  /> James Scaggs</a></li>
        </ul>
     </div>
     <!--END POSTMETADATA-->
     <p>
     In Half Baked, the MacGyver smoker stereotype really taught us that pot smokers can engineer some of the best bongs around when there’s nothing to smoke out of. There’s an art to taking shit from the kitchen, garage, and office and...
     <a href="#"> Read More</a>
     </p>
     <!--BEGIN POSTSHARINGBUTTONS-->
     <div id="postSharingButtons">
        <ul>
            <li>Like</li>
            <li>Tweet</li>
            <li>G+</li>
            <li>Pin it</li>
       </ul>
     </div>
     <!--END POSTSHARINGBUTTONS-->

     <a href="#"><img src="images/read-more.jpg" /> Read More </a>

    <!-- BEGIN RECENTPOSTS-->

     <h2>Recent Posts</h2>

    <div id="recentPosts">

     <h1><a href="#">5 MUST FOLLOW MARIJUANA FACEBOOK PAGES</a></h1>
     <img src="images/featured-image-1.png" alt="post-title" />

     <!--BEGIN RECENTPOSTMETADATA-->
     <div id="recentPostMetaData">
        <ul>
            <li><img src="images/date-icon.jpg" /> March 26, 2013</li>
            <li><a href="#"><img src="images/category-icon.jpg"  /> Entertainment</a></li>
            <li><a href="#"><img src="images/author-icon.jpg"  /> James Scaggs</a></li>
        </ul>
     </div>
     <!--END RECENTPOSTMETADATA-->
        <p>
     In Half Baked, the MacGyver smoker stereotype really taught us that pot smokers can engineer some of the best bongs around when there’s nothing to smoke out of. There’s an art to taking shit from the kitchen, garage, and office and...
     <a href="#"> Read More</a>
        </p>

        <!--BEGIN POST SHARING BUTTONS-->

        <div id="postSharingButtons">
            <ul>
                <li>Like</li>
                <li>Tweet</li>
                <li>G+</li>
                <li>Pin it</li>
            </ul>
        </div>

        <!--END POST SHARING BUTTONS-->

        <h1><a href="#">7 MARIJUANA INFOGRAPHICS YOU DON'T WANT TO MISS</a></h1>
     <img src="images/featured-image-1.png" alt="post-title" />

     <!--BEGIN RECENTPOSTMETADATA-->
     <div id="recentPostMetaData">
        <ul>
            <li><img src="images/date-icon.jpg" /> March 26, 2013</li>
            <li><a href="#"><img src="images/category-icon.jpg"  /> Entertainment</a></li>
            <li><a href="#"><img src="images/author-icon.jpg"  /> James Scaggs</a></li>
        </ul>
     </div>
     <!--END RECENTPOSTMETADATA-->
        <p>
     In Half Baked, the MacGyver smoker stereotype really taught us that pot smokers can engineer some of the best bongs around when there’s nothing to smoke out of. There’s an art to taking shit from the kitchen, garage, and office and...
     <a href="#"> Read More</a>
        </p>

        <!--BEGIN POST SHARING BUTTONS-->

        <div id="postSharingButtons">
            <ul>
                <li>Like</li>
                <li>Tweet</li>
                <li>G+</li>
                <li>Pin it</li>
            </ul>
        </div>

        <!--END POSTSHARINGBUTTONS-->

    </div>
    <!--END RECENTPOSTS-->

  </div>
     <!--END MAIN-->

</div>
<!--END CONTAINER-->

<div id="footerWrap">

  <div id="footer">

    <div id="footerLogo">
        <a href="index.html"><img src="images/footer-logo.jpg" alt="hiLounge" /></a>
      </div> <!--end footerLogo-->

    <p>
    <a href="#">About Us</a>
    <a href="#">Contact Us</a>
    <a href="#">Legal</a>
    <a href="#">Advertising</a>
    </p>

    <p id="footerInfo">copyright (c) 2013  <a href="http://www.hilounge.com">hiLounge</a>
    </p>

    </div>
    <!--END FOOTER-->

</div>
<!--END FOOTERWRAP-->

</body>
</html> 
```

这是为 jquery 轮播添加的 CSS：

```
 /******************************************************\
*
*  Base TouchCarousel stylesheet
*   
*  Contents:
*
*   1\. Main containers
*   2\. Carousel items
*   3\. Arrows(direction) navigation
*   4\. Paging navigation
*   5\. Scrollbar
*   6\. Cursors
*
\******************************************************/

/******************************************************\
*
*  1\. Main containers (carousel size, background)
*
\******************************************************/

.touchcarousel {
    position: relative;
    display: block;
    width: 100%;
    height: 200px;
    float: right;
    left: 0px;
    margin-bottom: 10px;

    /* style is removed after carousel is inited, use !important if you want to keep it*/
    overflow: hidden; 
}
.touchcarousel .touchcarousel-container {
    position: relative;    
    padding: 0;
    list-style: none;    
    margin-top: 5px;
    display: inline-block;
    float: left;
    text-align: center;
    padding-top: 5px;
    padding-right: 0;

}
.touchcarousel .touchcarousel-wrapper {
    position: relative;
    overflow:hidden;
    width: 100%;
    height: 100%;
}

/******************************************************\
*
*  2\. Carousel items (item styling, spacing between items)
*
\******************************************************/

.touchcarousel .touchcarousel-item {
    /* use margin-right for spacing between items */
    margin: 0 1 0 0;
    padding: 0; 
    float: left;
}

.touchcarousel .touchcarousel-previous {
    float: left;
    }

.touchcarousel .touchcarousel-next {
    position: relative;
    float: right;
    }

/* Last carousel item  */
.touchcarousel .touchcarousel-item.last {
    margin-right: 0 !important;     
}

/******************************************************\
*
*  3\. Arrows(direction) navigation
*
\******************************************************/

/* arrow hitstate and icon holder */
.touchcarousel .arrow-holder {
    height: 100%;
    width: 45px;
    position: absolute;
    top: 0;
    display: block;
    cursor: pointer;    
    z-index: 25;    
}
.touchcarousel .arrow-holder.left { 
    left: 0;    
}
.touchcarousel .arrow-holder.right {    
    right: 0;
}

/* arrow icons */
.touchcarousel .arrow-icon{     
    width: 45px;
    height: 90px;
    top:50%;
    margin-top:-45px;   
    position: absolute; 
    cursor: pointer;    
}
.touchcarousel .arrow-icon.left { }
.touchcarousel .arrow-icon.right { }
.touchcarousel .arrow-holder:hover .arrow-icon { }
.touchcarousel .arrow-holder.disabled { cursor: default; }
.touchcarousel .arrow-holder.disabled .arrow-icon { cursor: default; }

/******************************************************\
*
*  4\. Paging navigation
*
\******************************************************/

.touchcarousel .tc-paging-container {
    width:100%;
    overflow:hidden;
    position:absolute;
    margin-top:-20px;
    z-index:25;
}
.touchcarousel .tc-paging-centerer {    
    float: left;
    position: relative;
    left: 50%;      
}
.touchcarousel .tc-paging-centerer-inside {
    float: left;
    position: relative;
    left: -50%;
}

/* Paging items */
.touchcarousel .tc-paging-item {            
    float:left; 
    cursor:pointer;     
    position:relative;
    display:block;  
    text-indent: -9999px;   
}
.touchcarousel .tc-paging-item.current { }
.touchcarousel .tc-paging-item:hover { }

/******************************************************\
*
*  5\. Scrollbar
*
\******************************************************/
.touchcarousel .scrollbar-holder {
    position: absolute;
    z-index: 30;
    left: 6px;
    right: 6px; 
    bottom: 5px;
    height:4px;
    overflow: hidden;
}
.touchcarousel .scrollbar {
    position: absolute;
    left:0; 
    height:4px;
    bottom: 0px;
}
.touchcarousel .scrollbar.dark {
    background-color: rgb(130, 130, 130);   
    background-color: rgba(0, 0, 0, 0.5);
}
.touchcarousel .scrollbar.light {
    background-color: rgb(210, 210, 210);   
    background-color: rgba(255, 255, 255, 0.5); 
}

/******************************************************\
*
*  6\. Cursors
*
\******************************************************/

/* IE and Opera use "move", FF uses -moz-grab */
.touchcarousel .grab-cursor{ cursor:url(grab.png) 8 8, move; }
.touchcarousel .grabbing-cursor{ cursor:url(grabbing.png) 8 8, move; }

/* Cursor that used when mouse drag is disabled */
.touchcarousel .auto-cursor{ cursor:auto; }

/* Copyright 2011, Dmitry Semenov, http://dimsemenov.com */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:31:30.110

**第一的：**

测试 jQuery 的链接。您正在使用 Goole 的 CDN，因此您可以将该链接直接弹出到浏览器中。顺便说一句，它工作正常。

[https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js)

**第二：**

Firebug，只需打开控制台并输入`'$().jquery'`不带引号的内容...如果加载了 jQuery，它将吐出版本号，否则将吐出错误。

**第三**

在 HTML、CSS 和 JS 中检查您的 ID 和类。可以肯定的是，您的轮播容器上有一些损坏的 CSS，这可能会把事情搞砸。我从您的标记中获取了下面的 CSS，您可以看到“#container carousel”应该是“#container #carousel”。没有它，我认为任何事情都不会发生。

```
 #container carousel {
    position: relative;
    width: 100%;
    margin: 0 auto; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:08:31.673

检查路径是否ok，在jquery的src中使用查看页面源代码（ctrl-u）右键查看代码是否存在。我也使用 chrome 开发者工具……它会告诉你 javascript 中是否发生了一些错误，它是一个很棒的调试工具。要检查 jQuery 是否正常，只需执行 $.browser ，如果它响应，则使用 jQuery 导入一切正常...

# javascript - 如何从 IE/Safari 中的 URL 获取锚点？

> ID：15955630
> 
> 赞同：4
> 
> 时间：2013-04-11T17:57:37.397
> 
> 标签：javascript, html, internet-explorer, safari

我有一个使用锚来导航菜单类别的网页。基本上，当用户单击链接时，它会重定向到当前页面，我使用 Javascript 从 URL 解析锚点以确定要显示的页面。这在除 IE8（及更低版本）和 Safari 之外的所有浏览器中都能完美运行，其中锚点根本不显示在 URL 中，因此无法解析。

是否有某种方法可以链接到这些浏览器中的锚点？

这是代码：

HTML

```
<a href="../menu#page1">Page 1</a> 
```

Javascript：

```
var url = window.location.href;  
var loc = url.substring(url.indexOf("#")+1); 
```

编辑：添加代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:25:27.427

您可以使用与ancher标签的href类似的隐藏字段。

```
<a href="../blah-blah/my-page.html">
<input type="hidden" name="link-url" value="="../blah-blah/my-page.html"/> 
```

您的链接 url 的值将在查询字符串中显示为`www.some-site.html?link-url=../blah-blah/my-site.html`类似的内容。现在您可以使用您的 javascript 逻辑来提取该值。

# javascript - Android 浏览器 JavaScript 无法正确测量高度

> ID：15955632
> 
> 赞同：2
> 
> 时间：2013-04-11T17:57:48.727
> 
> 标签：javascript, jquery, html, android-browser

我正在使用 jQuery 脚本将元素放置在距屏幕底部给定距离的位置。（是的，要在此页面上获得动态的预期行为，JavaScript 是必需的。）

对于大多数浏览器，下图底部的灰色条表示的元素，此代码将很好地放置元素：

```
var container = $('section.explore');
var winHeight = $(window).height();

container.css('margin-top', winHeight - container.height()); 
```

但是，在 Android 浏览器上，我得到了这种行为（注意底部的灰色条）：

![在此处输入图像描述](https://i.stack.imgur.com/6LYoN.png)

为了使搜索栏与窗口底部有一定距离，我必须向上滚动整个方式以使地址栏可见，然后该栏已正确定位。

有没有一种方法可以更好地测量窗口高度，以便用户不必查看地址栏即可看到元素处于正确位置？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:09:02.217

尝试检查中的准确值

```
window.innerHeight or window.outerHeight 
```

还要检查窗口上的 resize 事件中的准确值。

```
$(window).bind('resize', function () {
   console.log(window.innerHeight);
   console.log(window.outerHeight);
}); 
```

我认为每次浏览器地址栏出现和消失时都会触发调整大小事件。

# jquery - jQuery GET 不读取 IE 中的 HTML 响应数据

> ID：15955638
> 
> 赞同：3
> 
> 时间：2013-04-11T17:58:27.380
> 
> 标签：jquery, ajax, internet-explorer

我正在使用 jQuery（在 Wordpress 中）进行非常简单的 ajax 调用 - 使用 GET 获取页面内容，然后将响应读取到 jQuery 对象中。这在除 IE8 之外的所有浏览器中都可以正常工作（不关心 IE6/7。相关代码与我在以前的站点中使用的相同，所有这些都在 IE8 中工作。代码如下：

```
var ajax_params = {
url: relative_url,
type: 'GET',
dataType: 'html',
data: {},

success: function(data, textStatus, xhr) {

     // create jquery element from html string
    data = $('<div/>').append(data);

    pre($(data).find('#content'));
    pre($('#content'));

    plugin.replace_content(data, relative_url);

},

};

plugin.ajax_call = $.ajax(ajax_params); 
```

pre() 函数只是对 console.log 的调用，我在 IE8 中使用 firebug lite 进行调试。我已经确定 ajax 调用正在工作，并且请求页面的 HTML 正在`data`变量中成功返回。它挂断了`data = $('<div/>').append(data)`，结果是一个空的 div。正如我所说，这个确切的代码适用于其他网站，所以我无法解释这一点。我已将 jQuery 版本降级为 1.8.3 以匹配其他网站上的内容，但无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:29:51.383

我们找到了问题所在：这是一个内存问题，是由于 ajax 响应太大而 IE 无法解析造成的。这可以解释为什么在其他网站上完全相同的方法有效。我们通过从响应 html 中尽可能多地删除它来修复它。另一种解决方案是将响应数据拆分成块并发出多个 ajax 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T09:10:26.867

是的，这是真的。在 IE8 中，如果响应太大，则 ajax 调用不起作用。要使用 IE8，我们必须减少从 ajax 调用中获得的内容。

# java - 如何计算 a^(1/n)？

> ID：15955639
> 
> 赞同：8
> 
> 时间：2013-04-11T17:58:27.963
> 
> 标签：java, floating-point, division, exponentiation

我正在尝试计算`a^(1/n)`，其中`^`表示取幂。

但是，以下内容：

```
Math.pow(8, 1/3) 
```

返回`1.0`而不是返回`2.0`。

这是为什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-11T18:00:22.757

问题是`1/3`使用[整数（截断）除法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)，其结果为零。将您的代码更改为

```
Math.pow(8, 1./3); 
```

（将`.`变成`1.`浮点文字。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T18:05:18.737

`1/3`变为`0`（因为`1`和`3`被视为`int`文字）。

所以你应该让这些文字浮动/双...

做：

`Math.pow(8, 1f/3)` 或者

`Math.pow(8, 1./3)` 或者

`Math.pow(8, 1.0/3)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-11T18:01:02.010

试试`Math.pow(8, (1.0f / 3.0f))`吧。

`1 / 3`会做一个整数除法，这会给你`8 ^ 0 = 1`

# windows - 如何解锁 Windows 锁屏？

> ID：15955642
> 
> 赞同：11
> 
> 时间：2013-04-11T17:58:37.097
> 
> 标签：windows, security, delphi, lockscreen

如何使用 Delphi 解锁 windows 锁屏？我没有在 Google 或 Stackoverflow 上找到任何东西。我已经尝试使用 keybd_event 输入我的密码，但似乎这些事件在锁屏上不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T18:08:35.833

您无法从用户空间以编程方式解锁锁定屏幕。这是设计使然。

* * *

好的，让我们澄清一下。使用记录在案的 API，您无法做到这一点。您需要像 @Remko 为他的 SasLibEx 产品所做的那样对未记录的 API 进行逆向工程。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-11T21:18:35.983

[Remko Weijnen](http://www.remkoweijnen.nl/blog/)在这个方向上有非常有趣的项目。他发布了一个命令行工具（[Winstation Locker](http://www.remkoweijnen.nl/blog/downloads/)），它能够解锁本地/**远程**Windows XP 站，而无需知道锁定计算机的用户的密码。

对于 Windows Vista 及更高版本，他开发了[SasLibEx](http://www.remkoweijnen.nl/blog/tag/saslibex/) ** 库，该库甚至可以解锁特定的终端服务会话，同样无需用户名/密码。

这两种方法都要求您在目标计算机上具有管理权限/帐户。

**请注意**，所有这些工具都使用了可能被视为非法、不适当、不宽容或犯罪（？）的讨厌的黑客行为。应与您的客户/雇主讨论并谨慎使用！

** SasLibEx 是一个商业产品

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-29T01:05:31.773

Steamlink（一种允许您将 Steam 游戏流式传输到大屏幕的硬件）目前存在一个问题，即如果您的屏幕位于房子的不同位置，为了玩游戏，您需要走到您的电脑前解锁它然后走回你的大屏幕。

为了减轻痛苦，社区中的人们[想出了这个脚本](https://steamcommunity.com/groups/homestream/discussions/0/617335934139051123/)：

```
@powershell -NoProfile -ExecutionPolicy unrestricted -Command "$sessionid=((quser $env:USERNAME | select -Skip 1) -split '\s+')[2]; tscon $sessionid /dest:console" 2> UnlockErrors.log 
```

它可以远程解锁你的电脑。你可以从 Delphi 调用 tscon.exe 来模拟它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-22T05:03:44.390

这实际上可以使用 powershell、psexec 和 windows 屏幕键盘来完成。虽然程序不能向 winlogon 发送输入，但 windows osk 可以，而且果然程序可以向 osk 发送输入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-10T19:12:01.893

注意：以下是远程解决方案。

据我所知，除非您从*默认*桌面切换到*Winlogon*桌面（桌面指的是所有活动的容器），否则键盘事件不会在锁定屏幕上起作用

[背景]

默认桌面是您阅读本文时使用的桌面。Winlogon 将是按**Ctrl+Alt+Del时设置为活动的那个**

[经验值]

您需要从默认切换到 WinLogon 桌面[检查参考]，然后您将能够通过获取**解锁计算机的窗口句柄来解锁机器**

```
IntPtr windowHandle = (IntPtr)FindWindow(null, "Unlock Computer");//Getting Window handle 
```

将用户名和密码发送到相应的编辑框。

参考 [http://www.codeproject.com/Articles/16197/Remotely-Unlock-a-Windows-Workstation](http://www.codeproject.com/Articles/16197/Remotely-Unlock-a-Windows-Workstation)

[Win7] 从远程运行 tsdiscon.exe。不确定这是如何工作的；但对我来说，它解锁了锁定屏幕。

# c# - 在 C# 中将 HTML 转义字符解码回普通字符串

> ID：15955646
> 
> 赞同：8
> 
> 时间：2013-04-11T17:58:46.840
> 
> 标签：c#, html, escaping

我的问题很简单。我在网上搜索了一下，但找不到一种快速的方法来对字符串中的 HTML 文本进行转义。

例如：
`"&lt; &gt; &amp;"`应该以字符串的形式返回“< > &”。

有没有一种快速的方法，还是我必须编写自己的 unescaper？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T18:02:07.047

使用`System.Web.HttpUtility.HtmlDecode`或`System.Net.WebUtility.HtmlDecode`

```
var decoded = HttpUtility.HtmlDecode("&lt; &gt; &amp;"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:04:00.030

如果您使用的是 .NET 4.5，那么您可以使用该`HttpUtility.HtmlDecode`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-18T15:32:33.847

```
HttpUtility.UrlDecode("Your escaped String", System.Text.Encoding.Default); 
```

# networking - 如何翻译以下代码（适用于 Windows）以便它也可以在 Linux 系统上使用？

> ID：15955647
> 
> 赞同：0
> 
> 时间：2013-04-11T17:58:48.383
> 
> 标签：networking, ubuntu, client-server

我在下面发布的代码基本上用于从软件获取（连续流数据）并在接收到数据时显示该数据。我面临的问题是，软件（已经有“服务器”）在 Windows 上，但我需要在运行 Linux（Ubuntu）的单独系统上获取数据。

谁能指导我我需要对代码进行哪些更改才能使其在 Linux 上运行？

此外，由于它们通过网络“通信”，代码中是否会有任何更改以***指向***Windows 机器上的服务器？（我很抱歉这样的术语，我对此有点陌生，所以如果我弄错了，请纠正我）

```
#include "vrpn_Connection.h" // Missing this file?  Get the latest VRPN distro at
#include "vrpn_Tracker.h"    //    ftp://ftp.cs.unc.edu/pub/packages/GRIP/vrpn

#include "conio.h"           // for kbhit()

//== Callback prototype ==--

void VRPN_CALLBACK handle_pos (void *, const vrpn_TRACKERCB t);

//== Main entry point ==--

int main(int argc, char* argv[])
{
vrpn_Connection *connection;

char connectionName[128];
int  port = 3883;

sprintf(connectionName,"localhost:%d", port);

connection = vrpn_get_connection_by_name(connectionName);

vrpn_Tracker_Remote *tracker = new vrpn_Tracker_Remote("Tracker", connection);

tracker->register_change_handler(NULL, handle_pos);

while(!kbhit())
{
    tracker->mainloop();
    connection->mainloop();
    Sleep(5);
}

return 0;
}

//== Position/Orientation Callback ==--

void VRPN_CALLBACK handle_pos (void *, const vrpn_TRACKERCB t)
{
printf("Tracker Position:(%.4f,%.4f,%.4f) Orientation:(%.2f,%.2f,%.2f,%.2f)\n",
    t.pos[0], t.pos[1], t.pos[2],
    t.quat[0], t.quat[1], t.quat[2], t.quat[3]);
} 
```

如果有人能提出一个“更简单”的替代方案，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T16:23:38.777

kbhit() 和 Sleep() 函数是 Windows 独有的。

在这里，您实际上并不需要 kbhit 功能。您可以改用无限循环。

对于睡眠方法，您可以使用此线程中的此代码： [C++ 中的睡眠函数](https://stackoverflow.com/questions/1658386/sleep-function-in-c)

```
#ifdef _WIN32
    #include <windows.h>

    void sleep(unsigned milliseconds)
    {
        Sleep(milliseconds);
    }
#else
    #include <unistd.h>

    void sleep(unsigned milliseconds)
    {
        usleep(milliseconds * 1000); // takes microseconds
    }
#endif

But a much simpler method is to use boost::this_thread::sleep. 
```

这段代码应该可以在 Linux 和 Windows 上运行。

```
//...
while(1)
{
    tracker->mainloop();
    connection->mainloop();
    sleep(5000);
}
//... 
```

# jquery - TextArea 元素 - 适合内容的默认大小

> ID：15955654
> 
> 赞同：5
> 
> 时间：2013-04-11T17:59:19.223
> 
> 标签：jquery, html, css

如果我在 textarea 元素上设置固定宽度，是否有一种优雅的方法可以将默认高度设置为允许其所有内容适合的大小？

我希望避免在 jquery 中对任何会比较 text.length 并尝试将值等同于高度的东西进行硬编码，但也许这是唯一的方法，如果可能的话，我希望看到一些本机 css 规则，但我可以我似乎没有想到任何事情。

我创建了一个小提琴来说明我想要完成的事情。 [http://jsfiddle.net/edZgm/](http://jsfiddle.net/edZgm/)

这是代码：

CSS：

```
textarea {
    overflow: hidden;
} 
```

查询：

```
$('document').ready(function () {
    $('textarea')
        .width(500);

    //I have a width set, but see how the height defaults to a rediculously small amount.
    //I'd like to have the height default to fit everything on load.

}); 
```

HTML：

```
<textarea> ... lots of text </textarea> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:14:39.433

有这个 jQuery 插件，Autosize。
[http://www.jacklmoore.com/autosize/](http://www.jacklmoore.com/autosize/)

这是您使用该插件更新的小提琴。
[http://jsfiddle.net/edZgm/3/](http://jsfiddle.net/edZgm/3/)

刚刚加载了插件并将其添加到您的代码中。

```
 $('textarea')
    .autosize(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:14:47.640

使评论成为将来参考的答案：

结帐[jquery-autogrow](https://github.com/akaihola/jquery-autogrow)

# sql-server - 在 Select 语句中加入另一个表会导致不正确的较高汇总总计

> ID：15955660
> 
> 赞同：0
> 
> 时间：2013-04-11T17:59:47.740
> 
> 标签：sql-server, join, aggregate-functions, multiple-tables

我遇到问题的直接聚合选择语句。

当我第一次运行这个查询时，没有问题：

```
SELECT distinct 

t2.primary_insurance [Primary Insurance]
,COUNT(t2.account_number) [Volume]  
,SUM(t2.los) [Total LOS] 
,AVG(t2.los) [Avg LOS]  
,AVG(t1.drg_cost_weight) [Avg CMI] 
,sum(t2.total_charges) [Total Charges]
,sum(-t2.insurance_receipts) [Total Receipts]   

FROM 
[table1] t1
LEFT OUTER join
[table2] t2
on t1.account_number = t2.account_number

GROUP BY
t2.primary_insurance

order by 
[Primary Insurance] 
```

但是，一旦我添加 Table3 来聚合它的数据，它就会返回一个不同的 [Volume] 总计，这使得所有其他总计都不正确。

```
SELECT distinct 

t2.primary_insurance [Primary Insurance]
,COUNT(t2.account_number) [Volume]  
,SUM(t2.los) [Total LOS] 
,AVG(t2.los) [Avg LOS]  
,AVG(t1.drg_cost_weight) [Avg CMI] 
,sum(t2.total_charges) [Total Charges]
,sum(-t2.insurance_receipts) [Total Receipts]
,sum(t3.[direct_cost]) [Direct Cost]
,sum(t3.[indirect_cost])[Indirect Cost]
,sum((t3.[direct_cost] + t3.[indirect_cost])) [Total Cost]
,sum((-t2.insurance_receipts - t3.[direct_cost])) [Contribution Margin] 
,sum((-t2.insurance_receipts - (t3.[direct_cost] + CR.[indirect_cost]))) [Profit]

from
[table1] t1
LEFT OUTER join
[table2] t2
on t1.account_number = t2.account_number
JOIN
[table3] t3
on t2.[account_number]  = t3.[account_number]

GROUP BY
t2.primary_insurance

order by 
[Primary Insurance] 
```

我尝试过加入不同的方式，但一直得到相同的膨胀总量，我无法从原始查询中获得总量（正确的总量）。需要明确的是，问题是第二个查询给我的总成交量高于第一次查询的总成交量。较高的总成交量给了我更高的总成交量。

我也尝试过对 table3 数据使用子查询，但也无法做到这一点。

这两个查询是相同的，只是添加了 table3 并对该表中的各种数据求和。查询不会出错，只是给出不正确的总数。

使用 SQL Server 2008

非常感谢任何输入或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:14:54.643

那么很明显，您正在复制 上的值`table3`，这意味着这`account_number`不是该表上的主键（也不是唯一的）。您可以使用键（或该表上唯一的列集）加入，或者您事先对该表进行聚合：

```
SELECT  t2.primary_insurance [Primary Insurance]
        ,COUNT(t2.account_number) [Volume]  
        ,SUM(t2.los) [Total LOS] 
        ,AVG(t2.los) [Avg LOS]  
        ,AVG(t1.drg_cost_weight) [Avg CMI] 
        ,SUM(t2.total_charges) [Total Charges]
        ,SUM(-t2.insurance_receipts) [Total Receipts]
        ,SUM(t3.[direct_cost]) [Direct Cost]
        ,SUM(t3.[indirect_cost])[Indirect Cost]
        ,SUM((t3.[direct_cost] + t3.[indirect_cost])) [Total Cost]
        ,SUM((-t2.insurance_receipts - t3.[direct_cost])) [Contribution Margin] 
        ,SUM((-t2.insurance_receipts - (t3.[direct_cost] + CR.[indirect_cost]))) [Profit]
FROM [table1] t1 
LEFT JOIN [table2] t2
    ON t1.account_number = t2.account_number
LEFT JOIN ( SELECT  [account_number], 
                    SUM([direct_cost]) [direct_cost],
                    SUM([indirect_cost]) [indirect_cost]
            FROM [table3]
            GROUP BY [account_number]) t3
    ON t2.[account_number]  = t3.[account_number]
GROUP BY t2.primary_insurance
ORDER BY [Primary Insurance] 
```

# c - 为什么最后我得到一个零，我怎样才能在不反转数组的情况下做同样的事情？

> ID：15955667
> 
> 赞同：0
> 
> 时间：2013-04-11T17:59:53.880
> 
> 标签：c

我是 C 新手，只是尝试理解问题的一小部分我有一个简单的程序 -1 代表数组的结尾：

```
#include <stdio.h>
#include <stdint.h>
#include <stdbool.h>
#include <stdlib.h>

typedef struct List list_t;
struct List {
    void * head;
    list_t * tail;
};

list_t * makelist(void * x, list_t * xs){
    list_t * ans = (list_t *) malloc(sizeof(list_t));
    ans->head =x;
    ans->tail = xs;
    return ans;
}

list_t * makeListFromIntArray(int list[]){
    list_t * ans = (list_t *) malloc(sizeof(list_t));
    int i = 0;
    while(list[i]!=-1){
        ans = makelist((void *)(intptr_t)list[i],ans);
        i++;
    }
    return ans;
}

void printList(list_t * xs){
    while(xs != NULL){
        printf("%lu\n",((intptr_t)xs->head));
        xs = xs->tail;
    }
}

int main() {
    int s[] = {1,2,3,4,5,-1};
    list_t * xs = makeListFromIntArray(s);
    printList(xs);
    return 0;
} 
```

主要问题是当 printList 执行时我最后得到一个零。

```
5
4
3
2
1
0

Process returned 0 (0x0)   execution time : 0.001 s
Press ENTER to continue. 
```

这是我的主要问题，次要问题是数组颠倒了，这是可以理解的。我可以通过在输入 makelistfromintarray 之前反转来克服这个问题。但是我开放了更优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:03:44.273

问题就在这里...

```
 list_t * ans = (list_t *) malloc(sizeof(list_t)); 
```

您正在在列表的头部创建一个空节点`MakeListFromArray`。那行应该是

```
 list_t * ans = NULL; 
```

PS：[你永远不应该`malloc()`在 C 中转换！](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)

# php - php array_multisort 不排序我的多维数组

> ID：15955673
> 
> 赞同：0
> 
> 时间：2013-04-11T18:00:19.283
> 
> 标签：php, arrays, web

```
Array
(
    [0] => Array
        (
            [id] => 7
            [workorder_id] => 27
            [truck_id] => 4
            [event_type] => 1
            [location_id] => 
            [location_name] => Billing Address
            [address_address] => 123 Main Street
            [address_city] => Montreal
            [address_state] => QC
            [address_zip] => A1A1A1
            [address_country_id] => 1
            [contact] => bob
            [phone] => 555-555-555
            [fax] => 555-555-555
            [po] => 123131
            [notes] => 
            [appointment_from] => 2013-03-30 12:30:00
            [appointment_to] => 2013-03-30 14:30:00
            [crossdock] => 0
            [status] => 1
        )

    [1] => Array
        (
            [id] => 8
            [workorder_id] => 27
            [truck_id] => 4
            [event_type] => -1
            [location_id] => 
            [location_name] => Billing Address
            [address_address] => 123 Main Street
            [address_city] => Montreal
            [address_state] => QC
            [address_zip] => A1A1A1
            [address_country_id] => 1
            [contact] => 
            [phone] => 555-555-555
            [fax] => 
            [po] => 
            [notes] => 
            [appointment_from] => 2013-04-04 06:00:00
            [appointment_to] => 2013-04-04 12:00:00
            [crossdock] => 0
            [status] => 1
        )

    [2] => Array
        (
            [id] => 9
            [workorder_id] => 27
            [truck_id] => 4
            [event_type] => 1
            [location_id] => 
            [location_name] => Billing Address
            [address_address] => 123 Main Street
            [address_city] => Montreal
            [address_state] => QC
            [address_zip] => A1A1A1
            [address_country_id] => 2
            [contact] => Jim Smith
            [phone] => 555-555-555
            [fax] => 555-555-555
            [po] => 
            [notes] => 
            [appointment_from] => 2013-04-16 10:00:00
            [appointment_to] => 2013-04-16 12:00:00
            [crossdock] => 0
            [status] => 1
        )

) 
```

好的，所以我有这个数组，我们称之为 $array。

我现在有一个功能可以通过多个键对多维数组进行排序。

```
function sort_multiple_keys($array,$key1,$key1_sort = SORT_DESC,$key2,$key2_sort = SORT_ASC){

    $sort = array(); 
    if(count($array) > 0){
        foreach($array as $k=>$v) {
            $first[$k] = $v[$key1];
            $second[$k] = $v[$key2];
        }

        array_multisort($first, $key1_sort, $second, $key2_sort, $array);

    }

    unset($sort);
} 
```

所以，我会按事件类型排序，然后是 APPOINTMENT_FROM 日期。所以我运行这个函数：

```
sort_multiple_keys($array,'event_type',SORT_DESC,'appointment_from',SORT_ASC); 
```

但是什么都没有？？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:12:02.817

您实际上并没有从排序函数返回值。

你可以`return $array`在最后; 或将其作为引用传递，因此该函数适用于原始实例而不是副本；为此，您需要将函数定义更改为：

```
function sort_multiple_keys(&$array,$key1,$key1_sort = SORT_DESC,$key2,$key2_sort = SORT_ASC){
                            ^ tells PHP that this variable is by reference 
```

# html - ng-model AngularJS 在 DOM 中清除值

> ID：15955674
> 
> 赞同：3
> 
> 时间：2013-04-11T18:00:19.823
> 
> 标签：html, css, asp.net-mvc, angularjs

我对 AngularJS 很陌生，并且遇到了一些我自己似乎无法弄清楚的事情。我正在开发发票应用程序，当我返回一个值和一个 ng-model 时，该值正在计算中，但从未在 DOM 中设置。然后它又永远不会更新我要计算的小计。

**行控制器.cshtml**

```
<tr id="row-{{$index+1}}" class="item-row" ng-repeat="item in itemRows">
    <td><input type="text" class="text-right" placeholder="$0.00" ng-model="hrsQty" /></td>
    <td><input type="text" class="text-right" placeholder="$0.00" ng-model="ratePrice" /></td>
    <td><input type="text" class="text-right" placeholder="$0.00" value="{{rowTotal(hrsQty, ratePrice) | currency}}" ng-model="amountSum[$index]" /></td>
</tr> 
```

这段代码采用 hrsQty * ratePrice 并将其值返回到最后一个输入文本中。返回的值将通过`for`循环发送

**控制器.js**

```
function InvoiceController($scope) {
$scope.itemRows = [0, 1, 2, 3, 4];
$scope.hrsQty;
$scope.ratePrice;
$scope.amountSum = [];
$scope.subTotal;

$scope.rowTotal = function (hrsQty, ratePrice) {
    return hrsQty * ratePrice;
};

$scope.subTotal = function () {
    var sum = 0;

    for (var i = 0, v; v = $scope.amountSum[i]; i++) {
        sum += +v;
    }
    return sum;
};
} 
```

如果我删除 ng-model，那么我的计算会完美返回，但如果我将 ng-model 放回并删除，`value="{{rowTotal(hrsQty, ratePrice) | currency}}"`那么我的小计计算效果很好。当这两者结合在一起时，`value="{{rowTotal(hrsQty, ratePrice) | currency}}"`它永远不会在 DOM 中设置或被删除。

![在此处输入图像描述](https://i.stack.imgur.com/qyHBI.png)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:31:36.340

我假设您不需要 ng-model 而只是显示一些价值。`ng-model`应该用于允许用户更改模型中的某些内容。

所以检查这个解决方案： [http ://plnkr.co/edit/eo37EXog0FWVr1lTn1Cw?p=preview](http://plnkr.co/edit/eo37EXog0FWVr1lTn1Cw?p=preview)

看起来像你需要的东西。

# asp.net - 使用表单检索下拉列表值

> ID：15955681
> 
> 赞同：0
> 
> 时间：2013-04-11T18:00:50.317
> 
> 标签：asp.net

我有一个包含文本和值的下拉列表。当我尝试从 Page.Request.Form["ID1"] 检索数据时，我得到的是值而不是文本..有没有办法我可以同时获得两者这些 。

```
<select id="ID1">
<option Value="1">
Test
</option>
<Option Value="2">
Test2
</Option>
</select> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T15:16:01.667

有一种方法可以做到这一点。

在 web 控件的初始化期间，在后面的代码中，将下拉列表存储在成员变量中，以便您保留对它的引用，并在初始化期间填充它的 Items 集合。

然后在初始化期间也使用 Request.Form(ddl.UniqueID) 获取回发的值（键）。

使用 键在下拉列表中查找项目，例如。

```
dim selectedValue as string = Request.Form(ddl.UniqueID)
dim theItem as ListItem = Nothing
If Not IsNothing(ddl.Items.FindByValue(selectedValue)) Then
  theItem = ddl.Items.FindByValue(selectedValue)
  dim strText as string = theItem.Text
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:05:24.553

**只有值回发到表单上**。

使用该值，您可以在列表中找到需要保存/保留的文本，或者在视图状态中，或者将其保留在下拉列表框中。如果您不能使用它们，那么另一种解决方案是将您希望获得的所有数据保留在该值上，然后再拆分它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:13:40.707

根据标准更改我的答案

我有点想把它写下来，所以如果有语法错误，我深表歉意——希望你能得到大致的想法

由于您可以控制客户端..您可以像这样传递表单文本/值

```
<select name="mySelect">
<option value="myName1:myValue1">myName1</option>
<option value="myName2:myValue2">myName2</option>
<option value="myName3:myValue3">myName3</option>
</select> 
```

然后......服务器端你可以做这样的事情......

```
var mySelect = Page.Request.Form["mySelect"].ToString();
var myText = mySelect.Split(":".ToCharArray()).First();
var myValue = mySelect.Split(":".ToCharArray()).Last(); 
```

# macos - 在 OS X 上的 Chrome 打包应用程序中使用 Webview 无法复制/粘贴

> ID：15955683
> 
> 赞同：1
> 
> 时间：2013-04-11T18:01:01.347
> 
> 标签：macos, copy-paste, google-chrome-app

在 Mac OSX 中，复制/粘贴在 Chrome 打包应用程序中不起作用。

我在 Windows XP Chrome 和 Chrome 操作系统上都安装了我的应用程序。我可以在 Windows 和 Chrome OS 环境中复制/粘贴，但不能使用相同的应用程序在 Mac OS X 中复制/粘贴。

Chrome 版本：27.0.1453.47 频道：beta 操作系统版本：OS X 10.7.5

我在 Chromium 问题上将其发布为[问题 230148](https://code.google.com/p/chromium/issues/detail?id=230148)。

应用程序代码托管在 github 上：[https ://github.com/damondouglas/chrome_drive_realtime_quickstart](https://github.com/damondouglas/chrome_drive_realtime_quickstart)

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:46:17.963

适用于我今天的 Chrome Canary 和我自己开发的打包应用程序。我正在运行 OSX 10.7.5

# random - 如何让 MapReduce 忽略输入文件以生成随机数

> ID：15955697
> 
> 赞同：1
> 
> 时间：2013-04-11T18:01:50.647
> 
> 标签：random, input, mapreduce

我正在尝试使用 MapReduce 和随机数生成来生成 pi 的估计值。我正在为我的进程提供 50 个小文件以启动 50 个地图作业。每个文件中只包含一个“hello”。我的 Mapper 阶段的输出显示 50 行，如下所示：

“你好” 1 “你好” 2 “你好” 3 ...

当然，这不是我的想法。我的程序显然没有像我希望的那样忽略输入。输入应该服务的唯一目的是为每个文件启动一个映射作业。

下面是我的 MapReduce 代码。现在，我在运行 jar 文件时使用 -D 命令行参数忽略了 reduce 阶段。

```
import java.util.Random;
import java.io.IOException;
import java.lang.InterruptedException;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.FloatWritable;
import org.apache.hadoop.io.DoubleWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Mapper.Context;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.lib.input.KeyValueTextInputFormat;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.output.TextOutputFormat;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;

    public class PiCalc extends Configured implements Tool {

        public static class MapClass extends Mapper<IntWritable, IntWritable, DoubleWritable, DoubleWritable> {
//          private FloatWritable insideCircle = new FloatWritable();
//          private FloatWritable insideSquare = new FloatWritable();
            public void map(IntWritable key, DoubleWritable value, Context context) throws IOException, InterruptedException {

            int ITERATIONS = 1000;                                            
            int inCircle = 0;
            int n = 0;

             double x, y;                                                 

             for (int i = 0; i < ITERATIONS ; i++)                         
             {                                                           
                x = Math.random();                       
                y = Math.random();                                               

                n++;                                                       

                if ( x*x + y*y <= 1 ){             
                   inCircle++;   
                }       
             }   

//           insideCircle.set(inCircle);
//           insideSquare.set(n);

//           insideCircle.set(99);
//           insideCircle.set(88);

             context.write(new DoubleWritable(inCircle), new DoubleWritable(n));
            }
        }   

        public static class Reduce extends Reducer<FloatWritable, FloatWritable, Text, FloatWritable> {

            public void reduce(Iterable<FloatWritable> key, Iterable<FloatWritable> values, Context context) 
                    throws IOException, InterruptedException {

                float pi = 0;
                float numerator = 0;
                float denominator = 0;

                for (FloatWritable k:key){   
                    numerator += k.get();      
                }

                for (FloatWritable val:values){  
                    denominator += val.get();        
                }

                pi = 4 * numerator / denominator;

                context.write(new Text("Pi: "), new FloatWritable(pi));
            }
        }   
        public int run(String[] args) throws Exception {
            Configuration conf = getConf();      
//          conf.set("key.value.separator.in.input.line", ",");
            Job job = new Job(conf, "PiCalc");        
            job.setJarByClass(PiCalc.class);            
            Path in = new Path(args[0]);
            Path out = new Path(args[1]);
            FileInputFormat.setInputPaths(job, in);
            FileOutputFormat.setOutputPath(job, out);
            job.setJobName("PiCalc");     
            job.setMapperClass(MapClass.class);
            job.setReducerClass(Reduce.class);   
            job.setInputFormatClass(KeyValueTextInputFormat.class);
            job.setOutputFormatClass(TextOutputFormat.class);
            job.setOutputKeyClass(Text.class);
            job.setOutputValueClass(Text.class);
//          job.setNumMapTasks(50);
            System.exit(job.waitForCompletion(true)?0:1);
            return 0;
        }  
        public static void main(String[] args) throws Exception { 
            int res = ToolRunner.run(new Configuration(), new PiCalc(), args);       
            System.exit(res);
        }
    } 
```

任何建议将不胜感激。谢谢！

# android - Android 开关未关闭

> ID：15955700
> 
> 赞同：0
> 
> 时间：2013-04-11T18:02:00.170
> 
> 标签：android

从 API 14 android 引入 Switch [http://developer.android.com/reference/android/widget/Switch.html](http://developer.android.com/reference/android/widget/Switch.html) 如果我尝试使用

```
_switchOnOff.setChecked(false); 
```

开关将其颜色正确地从蓝色更改为灰色，但不要返回关闭位置。

我也试过

```
_switchOnOff.toggle(); 
```

但还是一样，颜色修正了，但开关的位置保持不变。所以我不明白，这正常吗？有没有开关动作的方法？提前致谢

我创建了一个只有 Switch 的示例项目，它没有问题，但在我的项目中，开关不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T21:59:53.317

解决了：

我的 MainUI 没有响应，因为主线程处理了很长的任务。通过消除这个漫长的任务，_switchOnOff.setChecked(false) 命令恢复工作。

# r - 无法在我的指数衰减函数中输入“e”

> ID：15955704
> 
> 赞同：2
> 
> 时间：2013-04-11T18:02:11.010
> 
> 标签：r

我必须编写一个程序来模拟指数增长。我输入以下作为我的公式：

```
expDecay<-function(time,A=3,B=4,k=5){return(A*e^(-k*time)+B)} 
```

但是，R 不断返回以下消息：

> 错误：找不到对象“e”

有没有办法解决这个问题？我输入错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T18:03:03.260

使用`exp()`. 在你的情况下，`exp(-k*time)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:03:03.067

写`exp(x)`而不是`e^x`：

```
> exp(2)
[1] 7.389056 
```

因此，您的功能将变为：

```
expDecay <- function(time,A=3,B=4,k=5) {return(A*exp(-k*time)+B)} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T18:03:25.510

你这样做是为了得到 e：

```
e <- exp(1) 
```

# solr - 自定义查询组件 - 如何从文档 ID 中获取“分数”？

> ID：15955707
> 
> 赞同：0
> 
> 时间：2013-04-11T18:02:21.023
> 
> 标签：solr, lucene

我正在编写几个 Solr 自定义查询组件。每个组件运行不同类型的查询：

*   组件 A：按查询字段 A 进行分组
*   组件 B：在不同的字段 B 上进行分组

每个组件都会将它的文档从它的结果发送到下一个组件。

在我的“进程”函数中，在通过分组设置结果后，我将执行以下操作：

```
IndexSchema schema = searcher.getSchema();
DocListAndSet s = result.getDocListAndSet();
DocSet s3 = s.docSet;
DocIterator dit = s3.iterator()
while (dit.hasNext())
{
    SolrDocument doc = new SolrDocument();
    int docid = dit.nextDoc();
    //float score = dit.score();<--This does not get the score

    Document luceneDoc = searcher.doc(docid);//get the document using the doc id
    for( Fieldable field : luceneDoc.getFields())
    {
        SchemaField sf = schema.getField( field.name() );
        doc.addField( field.name(), sf.getType().toObject( field ) );
        ......

   } 
```

然后遍历 Set 并创建 SolrDocument。

SolrDocumentes 被输入到 SolDocumentList 中，最后我将它发送到下一个组件：

```
rb.req.getContext().put("TAG", list); 
```

我还想添加一个名为“score”的 SolrDocument 字段，该字段将包含实际分数。我尝试使用以下方法获得分数：

```
float score = dit.score() 
```

但是上面没有得到文档的分数。如何使用文档 ID 获取文档的“分数”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:53:55.873

你得到的`docSet`不是有什么特别的原因`docList`吗？

我会尝试（浓缩一点）得到`s.docList.iterator()`而不是`s.docSet.iterator()`. 后者在[此处的文档](http://lucene.apache.org/solr/4_1_0/solr-core/org/apache/solr/search/DocSet.html#iterator%28%29)中明确指出，您无法从中获得有意义的分数，其中`docList`可能包含有效分数的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T16:54:51.230

那么你必须在 getDocList(query,List,Lsort,offset,maxnoofdocs,1) 中设置 GET_Scores

这里`

```
 query is your query obj
 List<Query> your filters could be null
 lsort could be null
 offset 
 maxnoofdocs integer
 1 means get score with documents` 
```

# jquery - wdContextMenu 多选项

> ID：15955710
> 
> 赞同：0
> 
> 时间：2013-04-11T18:02:37.903
> 
> 标签：jquery, contextmenu

我正在尝试使用“jquery wdContextMenu”多选项并且我已经编写了这段代码，但它不起作用。有人能帮我吗？请参阅“警报（此选项）；” 它不起作用！$（函数（$）{

```
 function returnfalse() { return false; };
        $.fn.contextmenu = function(option) {
            var thiselement;
            var argumentCount = arguments.length,
                thisoption,
                elementType,
                menuoptions;
            $(this).each(function(e) {
                $(this).bind('contextmenu', function(e) {
                    elementType = $(this).prop('tagName').toLowerCase();
                    thisoption = parseInt($(elementType+"#"+this.id).attr("menu-option")-1);
                });
            }); 
            alert(thisoption);
            menuoptions = $.extend({alias: "cmroot", width: 'auto'}, arguments[thisoption]);
            var ruleName = null, target = null, 
```

* * *

好的..请看现场示例：Corectly Original DEMO：http: [//jsfiddle.net/a7sj4/](http://jsfiddle.net/a7sj4/) 它是通过这个调用工作的：

```
$("#target,#target2,#target3").contextmenu(option}); 
```

由我更改演示： http: [//jsfiddle.net/PxzRW/](http://jsfiddle.net/PxzRW/) 此调用不起作用：

```
$("#target,#target2,#target3").contextmenu(option1, option2}); 
```

* * *

1.  jquery 插件存在于我的页面中
2.  是的，这是我的代码的一部分......

我的代码通过一个选项（菜单选项字符串）正常工作......但是当我尝试加载多个（菜单选项）时，这不起作用......请参见例如：这是原始代码并且工作正常：

```
$("#thisrow).contextmenu(option1); 
```

这是我的代码，不能正常工作：

```
$("#thisrow,#pannelHome,#pannelFolders").contextmenu(option1, option2, option3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:31:56.577

好的。您已经发布了您尝试使用的插件的部分代码，我不知道这是否是您打算做的，或者您完全迷路了。我建议你下载[这个](http://www.web-delicious.com/jquery-plugins-demo/wdContextMenu/src/Plugins/jquery.contextmenu.js)文件。然后在 jquery 分发后包含它。像这样，在 HTML 文件中：

```
<script type="text/javascript" src="/path_to_jquery"></script>
<script type="text/javascript" src="/path_to_wdContextMenuPlugin"></script> 
```

之后，您可以像以下示例之一一样使用插件：

[例子](http://www.web-delicious.com/jquery-plugins-demo/wdContextMenu/sample.htm)

# php - 如何在android中定期调用PHP脚本1分钟并执行一些操作

> ID：15955711
> 
> 赞同：0
> 
> 时间：2013-04-11T18:02:38.330
> 
> 标签：php, android, android-asynctask

我是 android 开发的新手，我面临一个愚蠢的问题，我的应用程序崩溃了，因为我设置了一个 timetask 来使用 httphandler 调用 URL，将其设置为 1 分钟延迟。

有什么方法可以在后台处理它吗？

达到相同目的的任何其他方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:06:32.567

[使用AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在后台执行耗时的任务

**例子：**

```
private class LongOperation extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
        // Do background work here
        return "Executed";
    }      

    @Override
    protected void onPostExecute(String result) {               
        //Do something on finish of background work
    }

    @Override
    protected void onPreExecute() {
       // Do something before executing doInBackground
    }
} 
```

在您的活动中将此称为：

```
new LongOperation().execute(""); 
```

# php - Best way to debug an array using PHP

> ID：15955713
> 
> 赞同：11
> 
> 时间：2013-04-11T18:02:50.323
> 
> 标签：php, arrays, debugging

What is the best way to debug an array so that you can see what values are being stored and in what keys in the array they are being stored at? Also how do you make it so that it's easier to look at visually so that you don't have to keep looking through the array for the key and it's value in the one line `print_r()` function?

**EDIT:**

I now realize that `print_r()` is not the only solution to debugging arrays. So if you have alternate solutions that would be lovely as well to learn more about debugging.

**EDIT2:**

[Ayesh K](https://stackoverflow.com/users/784877/ayesh-k), [ITroubs](https://stackoverflow.com/users/463693/itroubs) and [Robert Rozas](https://stackoverflow.com/users/1987838/robert-rozas) have mentioned both [Krumo](http://sourceforge.net/projects/krumo/) and [Kint](http://raveren.github.io/kint/) this far, if you have others feel free to post them. Also thanks to [Raveren](https://stackoverflow.com/users/179104/raveren) for writing Kint!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T18:06:03.320

Every PHP developer should have a function for this. My function is below:

```
function r($var){
    echo '<pre>';
    print_r($var);
    echo '</pre>';
} 
```

To nicely print data, just call `r($data);`. If you want more detail, you could use this function:

```
function d($var){
    echo '<pre>';
    var_dump($var);
    echo '</pre>';
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T07:08:39.620

here's mine...

demo: [http://o-0.me/dump_r/](http://o-0.me/dump_r/)
repo: [https://github.com/leeoniya/dump_r.php](https://github.com/leeoniya/dump_r.php)
composer: [https://packagist.org/packages/leeoniya/dump-r](https://packagist.org/packages/leeoniya/dump-r)

you can restyle it via css if needed.

![enter image description here](https://i.stack.imgur.com/FXrrG.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-11T18:09:19.593

Everyone suggests `print_r` which is in core and works really well. But when it comes to view a large array, `print_r()` drives me nuts narrowing down the output.

Give a try to [krumo](http://sourceforge.net/projects/krumo/). It nicely prints the array with visual formatting, click-expand and it also gives you the exact array key call that you can simply copy and paste.

```
<?php
 krumo($my_array);
?> 
```

[Itroubs](https://stackoverflow.com/users/463693/itroubs) mentioned [Kint](https://github.com/kint-php/kint) as a better alternative to Krumo. (Thanks ITroubs!)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-11T18:06:37.050

I use var_dump....now if you want some more, check out this site:

[http://raveren.github.io/kint/](http://raveren.github.io/kint/)

and

[http://krumo.sourceforge.net/](http://krumo.sourceforge.net/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-11T18:06:26.073

The best practice to visually see the values/keys in an array is the following:

`echo "<pre>".print_r($array,TRUE)."</pre>";`

The true is required as it changes it into a string, the output will be:

```
array(
     key1 => value,
     key2 => value,
     ...
     ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T18:03:50.773

Quick solution: Open the source code of the page, and you'll see `print_r`'s output in several lines and perfectly indented.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-11T18:04:14.670

print_r is not one lined (it uses `\n` as new line, not `<br>`). Add a `<pre>...</pre>` around it to show the multiple lines.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-11T18:05:13.700

`print_r()` uses `\n` as its line delimiter. Use `<pre>` tags or view the page's source code to make it look right. (on Windows, Linux works with `\n`)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-11T18:05:24.880

You can either look source code or use `var_dump()` or `print_r()` with `<pre>...</pre>`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-21T21:52:31.603

I personally, never liked all this fancy stuff, i use `print_r()` because it's not overwhelming and it gives enough information.

Here is mine:

```
if(isset($_SERVER['HTTP_USER_AGENT']) && $_SERVER['HTTP_USER_AGENT'] == 'Debug')
{
    echo '<strong><i>FILE : </i></strong>'.__FILE__.'<strong> <i>LINE : </i></strong>'.__LINE__.'<pre>';
    print_r($var);
    echo '</pre>';
    die;
} 
```

This if statement is to ensure that other people don't see what you've printed. There is a good add-on for Mozila-Firefox and Google Chrome called "user agent switcher", where you can create your custom user agents. So I create a user agent called "Debug", and when I'm working, I change the user agent.

If I use default user agent nothing will happen and the page wont `die;`, only you and people who also change the user agent to "Debug" will see the printed variable. This is helpful if you want to debug a problem in a production environment, and you don't want the page to `die;` and it is also good if other people are also working on the project and you don't want to interrupt them by killing the page.

Then I echo out the current File and Line, this is helpful when you work in a framework or CMS or any other big project with thousands of files and folders, and while debugging, if you might forget where you've typed `die;` or `exit;` and you need to remember where you've been and which variables you have printed.

I use the NetBeans IDE for PHP development, I have a macro set up so when you select a variable and use it, it will paste this debugging tool to the text editor and put the selection inside a `print_r();` function. If you also use NetBeans, you can use this macro:

```
cut-to-clipboard
"if(isset($_SERVER['HTTP_USER_AGENT']) && $_SERVER['HTTP_USER_AGENT'] == 'Debug')"
insert-break
"{"
insert-break
"echo '<strong><i>FILE : </i></strong>'.__FILE__.'<strong> <i>LINE :</i></strong>'.__LINE__.'<pre>';"
insert-break
"print_r("
paste-from-clipboard
remove-line-begin 
");"
insert-break
"echo '</pre>';"
insert-break
"die;" 
```

You just need to select the `$variable` and use the macro.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-10T11:58:01.217

To be honest, I'm surprised that `print_r()` ([print human-readable](https://stackoverflow.com/q/22156264/2943403)). There are three native functions which each have their advantages and disadvantages in printing data to a document. As mentioned elsewhere on the page, wrapping your output in `<pre> ... </pre>` tags will be very beneficial in respecting newlines and tabbing when printing to an html document.

The truth is that ALL php developers, from newbie to hobbyist to professional to grand wizard level 999, need to have the following techniques in their toolbox.

Here is [a non-exhaustive demo which exposes *some* of the differences](https://3v4l.org/1sWp7).

1.  [var_export()](https://www.php.net/manual/en/function.var-export.php) is the format that I use most often. This function wraps strings in single quotes. This is important in identifying trailing whitespace characters and differentiating numeric types versus string types. To maintain the integrity of the output data and permit instant portability of the data into a runnable context, single quotes and backslashes are escaped -- don't let this trip you up.

2.  [print_r()](https://www.php.net/manual/en/function.print-r.php) is probably my least-used and the least-informative function when data needs to be inspect. It does not wrap strings in any kind of delimiting character so you will not be able to eyeball invisible characters. It will not escape backslashes, single quotes, or double quotes. It wraps keys in square braces which may cause confusion if your keys contain square braces originally.

3.  [var_dump()](https://www.php.net/manual/en/function.var-dump.php) is uniquely powerful in that it expresses data types AND the byte count for strings. This is hands-down the best tool when there is a risk that you might have unexpected multibyte characters interfering with the success/stability of your script.

Depending on your php version and which function you use, you may see differing values with same input data. Pay careful attention to float values.

[debug_zval_dump()](https://www.php.net/manual/en/function.debug-zval-dump.php) very much resembles the output of `var_dump()`, but also includes a `refcount`. This native function is not likely to provide any additional benefit relating to "debugging an array".

There are also non-native tools which may be of interest (most of which I've never bothered to use). If you are using a framework, Laravel for instance, offers `dd()` ([dump and die](https://laraveldaily.com/echoing-dd-vs-var_dump-vs-print_r/)) as a diagnostic helper method. Some devs love the collapsed/expandable styling of this tool, but other devs loudly voice their annoyance at the tedious clicking that is necessary to expose nested levels of data.

As a sideways approach to printing iterable data, you *could* entertain the idea of echoing a json-encoded string with the [JSON_PRETTY_PRINT](https://stackoverflow.com/q/6054033/2943403). This *may* reveal some things that could cause trouble like multibyte and whitespace characters, but don't forget that this is literally "encoding" the data. In other words, it is converting data from one form to another and it will mutate certain occurrences in the process. Like `var_export()`, a json encoded string is an excellent form to maintain data integrity when it needs to be tranferred from one place to another (like from your project to your Stack Overflow question!).

# python - 如何配置 Eclipse/PyDev 以正确允许对命令行工具的引用？

> ID：15955717
> 
> 赞同：0
> 
> 时间：2013-04-11T18:02:56.370
> 
> 标签：python, eclipse, pydev

我正在尝试在 Eclipse/PyDev 中调试 python 脚本，但是当从开发环境中运行时，我似乎无法让脚本正确执行。

Eclipse/PyDev 环境似乎限制了对正在调试的程序的命令行工具的访问。

我如何绕过这个限制？有没有办法在 Eclipse 项目中添加对相关命令行工具的引用？

*更新*：

这是尝试运行外部应用程序的代码块。这个问题可能与那里的子线程有关吗？

```
def call_command_in_dir_unix(app, args, targetdir):
    # this is the unix implementation
    (r,w) = os.pipe()
    pid = os.fork()
    if pid == -1:
      return 'could not fork'
    if pid == 0:
      # child
      print "child!"
      os.close(r)
      os.dup2(os.open("/dev/null", os.O_WRONLY), 0)
      os.dup2(w, 1)
      os.dup2(w, 2)
      os.chdir(targetdir)
      os.environ['openin_any'] = 'p'
      os.environ['openout_any'] = 'p'
      os.environ['shell_escape'] = 'f'
      import resource
      resource.setrlimit(resource.RLIMIT_CPU,
                         (MAX_RUN_TIME * 1000, MAX_RUN_TIME * 1000)) # docs say this is seconds, but it is msecs on my system.
      # os.execvp will raise an exception if the executable isn't
      # present. [[ try os.execvp("aoeu", ['aoeu'])  ]]
      # If we don't catch exceptions here, it will be caught at the
      # main body below, and then os.rmdir(tmpdir) will be called
      # twice, once for each fork.  The second one raises an exception
      # in the main code, which gets back to the user.  This is bad.
      try:
        os.execvp(app, [app] + list(args))
      finally:
        print "failed to exec()",app
        os._exit(2)
    else:
      # parent
      os.close(w)
      r = os.fdopen(r,"r")
      output = ''.join(r.readlines())
      (npid, exi) = os.waitpid(pid, 0)
      r.close()
      sig = exi & 0xFF
      stat = exi >> 8
      if stat != 0 or sig != 0:
        return ' error! exitcode was %d (signal %d), transscript follows:\n\n%s' % (stat,sig,output)
      return None
    # notreached 
```

# java - 从命令行启动时，Java 中 File 对象的绝对路径不同

> ID：15955718
> 
> 赞同：0
> 
> 时间：2013-04-11T18:02:58.013
> 
> 标签：java, file, ubuntu

我有一个带有以下代码的程序：

```
import java.io.File;
import javax.swing.JOptionPane;

public class Main {

    public static void main(String[] args) {
        File file = new File("config");
        JOptionPane.showMessageDialog(null, file.getAbsolutePath());
        System.out.println(file.getAbsolutePath());
    }
} 
```

我在 Eclipse 中将其导出为 Runnable Jar。然后我将文件复制到`/home/username/Desktop/`我的 Ubuntu 13.04 系统上并复制`cd`到该目录。当我运行命令`java -jar Main.jar`时，我得到以下输出：

```
/home/username/Desktop/config 
```

现在我运行 chmod 使 Jar 可执行，然后我去双击 Jar。我从对话框中得到以下输出：

```
/home/username/config 
```

为什么我得到不同的输出？将 Jar 移动到其他目录会产生类似的结果。谷歌搜索和搜索所以没有说明这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:11:25.297

`new File("config")`相对于运行 JVM 的进程的工作目录。当您在进入目录后从命令行运行时，`cd`那就是工作目录。

从 Ubuntu GUI 双击 jar 并没有将工作目录设置为包含 jar 文件的同一目录，因此存在差异。

尝试这个：

`cd into /home/username`从命令之类的，然后键入 `java -jar Desktop/Main.jar`. 这将打印出与双击 jar 时相同的内容。

如果您希望每次都获得相同的目录，请使用绝对目录名称。在 Linux 上，通过以 / 开头的目录来做到这一点。例如`new File("/home/username/config")`。如果要动态查找用户主目录，请使用`System.getProperty("user.home")`.

例如`new File( System.getProperty("user.home") + "/config" );`

# ios - 带标识符执行seague

> ID：15955719
> 
> 赞同：0
> 
> 时间：2013-04-11T18:02:59.543
> 
> 标签：ios, xcode

我正在构建一个带有登录屏幕的 iOS 应用程序。

我有一个带有“登录”按钮和“注册用户”按钮的初始场景。

一旦他们的凭据匹配，“登录”按钮会将用户转到他们的个人资料，并且“注册用户”按钮会下拉场景（通过模式海格）以注册用户。我正在使用 performseaguewithidentfier 方法进行“登录”按钮身份验证（在用户名和密码匹配之前，用户无法进入下一页）。问题是“创建用户”的按钮也不起作用。有没有办法只对其中一个按钮（“登录”按钮）使用 performseaguewithidentifier。

我一直在寻找相关的答案，但没有任何适用！任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:02:41.010

您可以使用按钮的 Tag 属性，即 button.tag = 0 或任何数字。然后，当您进行 segue 时，您只需使用 if - else 构造比较标记值。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:25:56.133

只需给故事板中的每个 Segue 一个标识符。然后在您的代码中，您可以像这样调用每个 segue：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"segueIdentifierName"]) { 
        //do something with seque 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:17:24.800

您可以为每个按钮设置不同的 segue，并在执行 segue 之前执行各种操作，具体取决于调用的 segue，其中：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

您可能应该阅读以下内容：

[UIStoryboardSegue 类参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboardSegue_Class/Reference/Reference.html)

[查看控制器编程指南](https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)

# amazon-s3 - 使用 Feed Exporter 将项目从 Scrapyd 保存到 Amazon S3

> ID：15955723
> 
> 赞同：5
> 
> 时间：2013-04-11T18:03:03.603
> 
> 标签：amazon-s3, scrapy, scrapyd

将 Scrapy 与 amazon S3 一起使用非常简单，您可以设置：

*   FEED_URI = 's3://MYBUCKET/feeds/%(name)s/%(time)s.jl'
*   FEED_FORMAT = 'jsonlines'
*   AWS_ACCESS_KEY_ID = [访问密钥]
*   AWS_SECRET_ACCESS_KEY = [密钥]

一切正常。

但 Scrapyd 似乎覆盖了该设置并将项目保存在服务器上（在网站上有链接）

添加“items_dir =”设置似乎并没有改变任何东西。

什么样的设置使它起作用？

编辑：可能相关的额外信息 - 我们正在使用 Scrapy-Heroku。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-16T06:06:07.860

我也面临同样的问题。从 scrapyd.conf 文件中删除 items_dir= 对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T20:32:33.173

您可以将`items_dir`属性设置为空值，如下所示：

```
[scrapyd]
items_dir= 
```

似乎在设置该属性时，优先于配置的导出。有关详细信息，请参阅[http://scrapyd.readthedocs.org/en/latest/config.html](http://scrapyd.readthedocs.org/en/latest/config.html)。

# c++ - OpenCV 使用 CodeBlocks 在 Linux 中编译 Eigenface.cpp

> ID：15955727
> 
> 赞同：1
> 
> 时间：2013-04-11T18:03:12.100
> 
> 标签：c++, linux, opencv, compiler-errors, codeblocks

我想用 CodeBlocks 或 Linux 终端编译以下 OpenCV 程序。

[http://plaza.ufl.edu/tyler727/imdl/src/eigenface.cpp](http://plaza.ufl.edu/tyler727/imdl/src/eigenface.cpp)

```
 line 57:   nTrainFaces = loadFaceImgArray("/home/hacker/data/Eigenfacecpp/train.txt");

    line 192: // load test images and ground truth for person number
             nTestFaces = loadFaceImgArray("/home/hacker/data/Eigenfacecpp/test.txt");

    // project the training images onto the PCA subspace
    projectedTrainFaceMat = cvCreateMat(nTrainFaces, nEigens, CV_32FC1);
    for(i=0; i<nTrainFaces; i++)
    {
        cvEigenDecomposite(faceImgArr[i],
                           nEigens,
                           eigenVectArr,
                           0, 0,
                           pAvgTrainImg,
line 78:                    projectedTrainFaceMat->data.fl + i*nEigens);
    }

     cvCalcEigenObjects(nTrainFaces,
                        (void*)faceImgArr,
                        (void*)eigenVectArr,
                        CV_EIGOBJ_NO_CALLBACK,
                        0,
                        0,
                        &calcLimit,
                        pAvgTrainImg,
line 154:                eigenValMat->data.fl);

        //project the test image onto the PCA subspace
        cvEigenDecomposite(faceImgArr[i],
                           nEigens,
                           eigenVectArr,
                           0, 0,
                           pAvgTrainImg,
line 211:                   projectedTestFace); 
```

我得到了这些错误：

```
Compiling: eigenface.cpp

In Function »void learn()«:
line 57:  deprecated conversion from string constant to ‘char*’ [Wwrite-strings]

In Function »double recognize()«:
line 192: deprecated conversion from string constant to ‘char*’ [Wwrite-strings]

/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/crt1.o: In function `_start':
(.text+0x18): undefined reference to `main'
obj/Debug/eigenface.o: In function `learn()':
/home/hacker/data/Eigenfacecpp/eigenface.cpp:78: undefined reference to `cvEigenDecomposite'

obj/Debug/eigenface.o: In function `doPCA()':
/home/hacker/data/Eigenfacecpp/eigenface.cpp:154: undefined reference to `cvCalcEigenObjects'

obj/Debug/eigenface.o: In function `recognize()':
/home/hacker/data/Eigenfacecpp/eigenface.cpp:211: undefined reference to `cvEigenDecomposite' 
```

我不明白我做错了什么。我认为这是愚蠢的，但我找不到它。

来自 CodeBlocks 的编译器和调试器设置：

链接器设置->其他选项：`-lopencv_core -lopencv_objdetect -lopencv_imgproc`-lopencv_highgui

搜索目录->编译器：`/usr/local/include/opencv` 搜索目录->链接器：`/usr/lib`

我在这里做错了什么？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:28:38.633

1.  您的源代码不包含`main()`函数，因此请从[http://plaza.ufl.edu/tyler727/imdl/src/main.cpp](http://plaza.ufl.edu/tyler727/imdl/src/main.cpp)`main.cpp`下载文件并将其放在您的项目目录中，或者取消注释eigenface.cpp 甚至可能编写自己的函数。`main()``main()`
2.  使用 opencv 的链接器选项的完整列表是：`-lopencv_calib3d -lopencv_contrib -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_highgui -lopencv_imgproc -lopencv_legacy -lopencv_ml -lopencv_objdetect -lopencv_photo -lopencv_stitching -lopencv_ts -lopencv_video -lopencv_videostab`当然，您可能不需要所有这些库，但它不会受到伤害，因为链接器足够智能并且只会包含您实际引用的库。
3.  从命令行，您可以使用包含 OpenCV 标头的目录和包含所有库文件的目录发出`g++ main.cpp eigenface.cpp -o eigenface -I/usr/include/opencv -L/usr/lib <all linker flags in "2">`替换。如果您使用发行版的包管理器（例如 apt-get 或 yum）来安装 OpenCV，这些可能是默认位置。 `/usr/inlude/opencv``/usr/lib`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T19:54:51.327

查找 /usr/lib -name 'libopencv*.so' | xargs readelf -s | egrep "FUNCTION_NAME|libop" find /usr/lib -name 'libopencv*.so' | xargs readelf -s | egrep "cvEigenDecomposite|libop"

文件：./libopencv_legacy.so 680: 00000000000936f0 1046 FUNC GLOBAL DEFAULT 11 cvEigenDecomposite 所以与'libopencv_legacy.so'链接
-lopencv_legacy

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T03:15:22.203

[从http://plaza.ufl.edu/tyler727/imdl/Lovelly_FCRAR12.pdf](http://plaza.ufl.edu/tyler727/imdl/Lovelly_FCRAR12.pdf)查看参考文献 [3] 和 [4]

# r - 从 R 中的表中仅选择 500 行

> ID：15955732
> 
> 赞同：2
> 
> 时间：2013-04-11T18:03:26.553
> 
> 标签：r, select, rsqlite

我正在使用 RSQLite 包进行数据库操作。为了从表中选择数据，我使用了以下代码，但我只有 500 行。实际上，该表包含该查询的 1200 多行。这个问题的原因是什么？

```
library('RSQLite')
lite <- dbDriver("SQLite", max.con = 25)
db <- dbConnect(lite, dbname = "pf.db")
res <- dbSendQuery(db, paste("SELECT ticker from RUS1000 where portDate='1995-12-29'  ",sep=""))
data <- fetch(res)
print(data) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:13:23.010

试试`data <- fetch(res,n=-1)`。这将获取所有行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:24:00.750

或尝试简单的方法

```
data <- dbGetQuery..... 
```

# matlab - MATLAB Plot：修改 y 平面上的点位置

> ID：15955734
> 
> 赞同：1
> 
> 时间：2013-04-11T18:03:34.970
> 
> 标签：matlab

我在 MATLAB 中有这行代码，它设置了这些向量：

```
x = [2 12 3 8 1 9 2; -3 -2 -1 0 1 2 3]
x =
 2  12  3  8  1  9  2
-3  -2 -1  0  1  2  3 
```

将第一行视为 y 平面中的点，将第二行视为 MATLAB 图中的 x 轴

现在 MATLAB 中的哪一行代码将在第一行中取最大数并设置在 x 轴的中间 (0) 点，这将使它看起来像这样

```
x =
 9   2  2  12 3  8  1
-3  -2 -1  0  1  2  3 
```

请任何想法表示赞赏，我不知道如何最好地提出这个问题，我实际上是在尝试在 MATLAB 中编辑一个绘图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:16:55.253

代码：

```
x = [2 12 3 8 1 9 2; -3 -2 -1 0 1 2 3];
[~,idx] = max(x(1,:));
x(1,:) = circshift(x(1,:),[0 (length(x)+1)/2-idx]); 
```

输出：

```
x =

     9     2     2    12     3     8     1
    -3    -2    -1     0     1     2     3 
```

# c# - 在 ASP.NET 中使用 HTML 包装自动插入的文本框

> ID：15955738
> 
> 赞同：0
> 
> 时间：2013-04-11T18:03:47.047
> 
> 标签：c#, asp.net

我想在我的 ASP.NET 网页中生成文本框。它工作正常

```
 foreach (var Field in db.A_Settings)
    {
        TextBox t = new TextBox();
        t.ID = Field.ID.ToString();
        t.CssClass = "smallinput";
        t.Text = Field.Text;
        LabelPlaceHolder.Controls.Add(t);
    } 
```

它很好地生成了这样的东西：

```
<input name="ctl00$ContentPlaceHolder1$1" type="text" value="ValueA" id="ContentPlaceHolder1_1" class="smallinput">
<input name="ctl00$ContentPlaceHolder1$2" type="text" value="ValueB" id="ContentPlaceHolder1_4" class="smallinput">
<input name="ctl00$ContentPlaceHolder1$3" type="text" value="ValueC" id="ContentPlaceHolder1_5" class="smallinput"> 
```

这是正确的，但实际上我想用一些 HTML 来包装它，比如

```
<p>
    <label>Label for the first TextBox obtained from database</label>
    <span class="field">
        <input name="ctl00$ContentPlaceHolder1$1" type="text" value="ValueA" id="ContentPlaceHolder1_1" class="smallinput">
    </span>
</p> 
```

我找不到如何做到这一点，所以我正在考虑将它放入`List<TextBox>`，但我也被困在这里（同样的问题 - 不知道如何用 HTML 包装对象）。

有没有办法做到这一点？

*对于诸如“为什么不手动添加这些文本框？”之类的任何帖子。我将发送一张我用键盘敲击头部的照片，而屏幕上会显示一个包含数十个需要处理的字段的 SQL 转储 :)
或狐猴的照片。狐猴也不错*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:07:05.820

不是最干净的解决方案，但应该可以...

```
foreach (var Field in db.A_Settings)
{
    TextBox t = new TextBox();
    t.ID = Field.ID.ToString();
    t.CssClass = "smallinput";
    t.Text = Field.Text;
    //add literal control containing html that should appear before textbox
    LabelPlaceHolder.Controls.Add(new LiteralControl("html before"));
    LabelPlaceHolder.Controls.Add(t);
    //add literal control containing html that should appear after textbox
    LabelPlaceHolder.Controls.Add(new LiteralControl("html after"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:20:03.093

我可能会使用中继器控件：

```
 <asp:Repeater ID="SettingsRepeater" runat="server">
        <ItemTemplate>
            <p>
                <asp:Label ID="ItemLabel" runat="server"></asp:Label>
                <span class="field">
                    <asp:TextBox ID="ItemTextbox" runat="server"></asp:TextBox>
                </span>
            </p>
        </ItemTemplate>
    </asp:Repeater> 
```

并将列表绑定到转发器：

```
SettingsRepeater.DataSource = db.A_Settings;
SettingsRepeater.DataBind(); 
```

然后编写您的 ItemDataBound 代码来设置现有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:15:45.063

你想要`HtmlGenericControl`控制。

```
foreach (var Field in db.A_Settings)
{
    TextBox t = new TextBox();
    t.ID = Field.ID.ToString();
    t.CssClass = "smallinput";
    t.Text = Field.Text;

    var label = new HtmlGenericControl("label");
    label.Controls.Add(new LiteralControl("LABEL TEXT"));

    var p = new HtmlGenericControl("p");
    p.Controls.Add(label);

    var span = new HtmlGenericControl("span");
    span.Attributes.Add("class", "field");
    span.Controls.Add(t);
    p.Controls.Add(span);

    LabelPlaceHolder.Controls.Add(p);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T20:23:52.917

您可以创建自定义 ASP.NET 控件来呈现您需要的任何 HTML。看看这个： [开发一个简单的 ASP.NET 服务器控件](http://msdn.microsoft.com/en-us/library/aa310915%28v=vs.71%29.aspx)。通过这种方式，您可以创建一个名为 CustomTextBox 的控件，该控件将在段落内呈现一个文本框。

# c - Linux定时器是一个进程吗

> ID：15955743
> 
> 赞同：1
> 
> 时间：2013-04-11T18:04:14.143
> 
> 标签：c, linux, multithreading, timer

我正在尝试了解 linux 中的计时器以在我的应用程序中使用它，我从多个来源收集了代码并制作了以下程序

```
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>
#include <signal.h>
#include <time.h>
#include <pthread.h>

pthread_mutex_t mutex1 = PTHREAD_MUTEX_INITIALIZER;
#define CLOCKID CLOCK_REALTIME
#define SIG SIGUSR1
timer_t timerid;

void *print_message_function( void *ptr );
static void handler(int sig, siginfo_t *si, void *uc)
{

  pthread_mutex_lock( &mutex1 );
  printf("Caught signal %d from timer\n", sig);
  //it will be working like this in real application
  // 1\. check the front of the queue, if timeout then detete it from queue 

  pthread_mutex_unlock( &mutex1 );

}

int main(int argc, char *argv[])
{
  struct sigevent sev;
  struct itimerspec its;
  long long freq_nanosecs;
  sigset_t mask;
  struct sigaction sa;

  printf("Establishing handler for signal %d\n", SIG);
  sa.sa_flags = SA_SIGINFO;
  sa.sa_sigaction = handler;
  sigemptyset(&sa.sa_mask);
  sigaction(SIG, &sa, NULL);

  sev.sigev_notify = SIGEV_SIGNAL;
  sev.sigev_signo = SIG;
  sev.sigev_value.sival_ptr = &timerid;
  timer_create(CLOCKID, &sev, &timerid);
  /* Start the timer */

  its.it_value.tv_sec = 1;
  its.it_value.tv_nsec = 0;
  its.it_interval.tv_sec = its.it_value.tv_sec;
  its.it_interval.tv_nsec = its.it_value.tv_nsec;

  timer_settime(timerid, 0, &its, NULL);

  pthread_t thread1, thread2;
  char *message1 = "Thread 1";
  int  iret1 ;

  /* Create independent threads each of which will execute function */

  iret1 = pthread_create( &thread1, NULL, print_message_function, (void*) message1);

  pthread_join( thread1, NULL);

  printf("Thread 1 returns: %d\n",iret1);
   exit(0);
}

void *print_message_function( void *ptr )
{
  char *message;
  message = (char *) ptr;
  int i;
  for(i=0;; i++){
    pthread_mutex_lock( &mutex1 );
    printf("%s \n", message);
      //it will be working like this in real application
      // 1\. check if a response received from the network 
      // 2\. if received then delete from queue 

    pthread_mutex_unlock( &mutex1 );
    usleep(50022);
  }
  pause();
} 
```

我正在尝试保护在这种情况下是 printf 的关键部分，这里的 printf 只是一个示例，在我的应用程序中它实际上是一个队列，因此线程将一直在 printf 上工作，并且当计时器准备好它必须锁定互斥锁然后打印，上面是正确的方法吗？在实际应用程序中，线程将等待响应，当其他应用程序收到响应时，我将访问队列，计时器将始终以一定的时间间隔（例如每 2 秒）检查队列是否超时如果发现任何消息并删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:13:12.250

不，这不是正确的做法。只允许从 singla 处理程序调用异步信号安全函数。否则行为未定义：

> «信号处理函数必须非常小心，因为其他地方的处理可能会在程序执行的某个任意点被中断。POSIX 有“安全函数”的概念。如果信号中断了不安全函数的执行，并且处理程序调用了不安全函数，则程序的行为是未定义的。»

有关更多详细信息，请参阅[`man 7 signal`](http://man7.org/linux/man-pages/man7/signal.7.html)。

如果您正在为 Linux 编写，请考虑使用[`signalfd`](http://man7.org/linux/man-pages/man2/signalfd.2.html). 其他操作系统也有类似的选择。长篇大论，请参阅《[如何不编写信号处理程序](http://lazarenko.me/2013/01/15/how-not-to-write-a-signal-handler/)》。

希望能帮助到你。祝你好运！

# excel - 动态更改工作表标题

> ID：15955745
> 
> 赞同：2
> 
> 时间：2013-04-11T18:04:19.680
> 
> 标签：excel, charts, excel-2003, vba

我有几个 .xls 文件，它们的工作表名称与其文件名相同。由于每个 .xls 文件都会更新工作表名称，因此我目前拥有的代码不会动态更新。

有没有办法动态更新工作表名称，以便可以在所有 .xls 文件中使用代码？

```
Range("A3:E4500").Select
Charts.Add
ActiveChart.ChartType = xlXYScatterSmoothNoMarkers
ActiveChart.SetSourceData Source:=Sheets("named").Range("A3:E4500"), _
PlotBy:=xlColumns 
```

其中“命名”将动态变化。我尝试将其添加到代码中，但如果给出错误消息。WBname 为每个工作表提供正确的名称，但“源”不喜欢该字符串。

```
Dim WBname As String
WBname = Replace(ActiveWorkbook.Name, ".xls", "")
Application.ScreenUpdating = False
Range("A3:E4500").Select
Charts.Add
ActiveChart.ChartType = xlXYScatterSmoothNoMarkers
ActiveChart.SetSourceData Source:=Sheets("WBname").Range("A3:E4500"), _
PlotBy:=xlColumns 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:10:33.270

`WBname`是一个变量。在双引号内，它变成了一个字符串。

尝试这个

改变

`ActiveChart.SetSourceData Source:=Sheets("WBname").Range("A3:E4500"), _ PlotBy:=xlColumns`

对此。

`ActiveChart.SetSourceData Source:=Sheets(WBname).Range("A3:E4500"), _ PlotBy:=xlColumns`

# qt - Qt场景项目组边界矩形没有跟随旋转

> ID：15955750
> 
> 赞同：0
> 
> 时间：2013-04-11T18:04:35.893
> 
> 标签：qt, pyqt, pyside

作为标题线索，我尝试通过旋转组本身或通过迭代子项来旋转组边界矩形。

我是否需要对组进行某种刷新才能按视图显示调整形状？

PySide 的片段：

```
R1 = scene.addRect(itemGroup.boundingRect())
R1.setPos(itemGroup.pos())

scene.addRect(itemGroup.boundingR())

# case 1 - Rotate group through iteration
for item in itemGroup.childItems() :
    item.rotate(90)

# case 2 - Rotete whole group
itemGroup.rotate(90)

R2 = scene.addRect(itemGroup.boundingRect())
R2.setPos(itemGroup.pos()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:30:39.573

这是因为您的情况下的边界矩形是项目的本地，所以旋转不会改变它。您应该将矩形映射到场景以获得全局坐标中的矩形位置

# java - 在地图中存储具有多个值的键

> ID：15955752
> 
> 赞同：0
> 
> 时间：2013-04-11T18:04:39.027
> 
> 标签：java, collections

我想存储在具有多个值的映射键中。例如：我正在从 ArrayList 读取字符串的键，从另一个 ArrayList 读取整数的值：

```
Keys                     Values
humans                   50
elfs                     20
dwarfs                   30
humans                   40
elfs                     10 
```

我想像这样存储这些信息： Map < String, ArrayList < Integer>>

```
[humans = {50,40}]
[elfs = {20,10}]
[dwarfs = {30}] 
```

有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:06:24.587

我推荐使用[Guava MultiMap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)。或者，您的

```
Map<String, ArrayList<Integer>> 
```

也会做到这一点。在做 a 时`put`，判断是否已经有一个与该键关联的列表；如果有，那么你的`put`将是 a `get(key).add(value)`，否则它将是 a `put(new List(value))`。同样， a`remove`将从关联列表中删除一个值，否则如果这将导致一个空列表，则将完全删除该列表。

此外， a`Map<String, HashSet<Integer>>`可能会导致比列表映射更好的性能；如果您想将重复值与键相关联，显然不要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:14:48.907

我这样做：

```
public class StringToListInt {
    private Map<String, List<Integer>> stringToListInt;

    public StringToListInt() {
        stringToListInt = new HashMap<String, List<Integer>>();
    }

    public void addInt( String string, Integer someValue ) {
        List<Integer> listInt = stringToListInt.get( string );
        if ( listInt == null ) {
            listInt = new ArrayList<String>();
            stringToListInt.put( string, listInt );
        }
        listInt.add( someValue );
    }

    public List<Integer> getInts( String string ) {
        return stringToListInt.get( string );
    }
} 
```

如果您添加一些泛型，我想您最终会得到与 Guava 的 MultiMap 非常相似的东西，而没有依赖关系。

# forms - 仅当没有其他组件的消息时才显示消息

> ID：15955756
> 
> 赞同：3
> 
> 时间：2013-04-11T18:04:51.253
> 
> 标签：forms, validation, jsf-2, user-interface, primefaces

验证表单时显示 3 条消息，如下所示：

```
<p:message id="msgCity1"  for="city1" styleClass="required" display="text" />
<p:message id="msgCity2"  for="city2" styleClass="required" display="text" />
<p:message id="msgCountry"  for="msgCountry" styleClass="required" display="text" /> 
```

第一条（msgCity1）和第二条（msgCity2）消息在事件（keyup）上验证最后一个在服务器端验证，我想显示最后一条消息（msgCountry），如果前2条消息的验证正常，我的意思是如果消息是空的，

为此，我想在最后一条消息上使用渲染，但我不知道如何在 xhtml 中获取前 2 条消息的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:07:58.783

而不是直接挂钩而[`UIInput#isValid()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#isValid%28%29)不是输入消息的存在。

例如

```
<h:inputText id="city1" binding="#{city1}" ... />
<h:inputText id="city2" binding="#{city2}" ... />
...
<p:message for="msgCountry" ... rendered="#{city1.valid and city2.valid}" /> 
```

# jquery - 复选框的错误放置

> ID：15955760
> 
> 赞同：0
> 
> 时间：2013-04-11T18:04:56.003
> 
> 标签：jquery, forms, checkbox

我在使用 jquery 验证的表单中有一个复选框。此处错误消息显示在复选框下方，复选框的标签显示在错误之后。

我需要在复选框标签之后显示错误消息。这是我的代码：

```
<li>
    <input type="checkbox" name="toc"><span name="toc"> &nbsp;&nbsp;I agree to the terms and conditions
                        </span>
    </input>
</li>
<br>
<li>
    <label style="margin-top:20px;display:none" name="toc" class="error">This field is required</label>
</li> 
```

表单的 jquery 是

```
$(document).ready(function () {
    $('#form').validate({
        rules: {
            toc: {
                required: true
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:08:54.973

您**不能**在输入标签中放置任何标签（元素）。

# asp.net-mvc-3 - 下拉列表中的选定值不起作用

> ID：15955763
> 
> 赞同：0
> 
> 时间：2013-04-11T18:05:03.717
> 
> 标签：asp.net-mvc-3

我正在尝试在视图中显示复杂的视图模型，除了一个下拉列表外，一切正常。我正在显示枚举列表，并将所选对象设置为应有的状态。但由于未知原因，它没有显示选定的值。我已经尝试了很多次但失败了——请帮助我。代码如下 -

枚举：

```
public enum CommentStatus
{
    NoStatus = 0,
    Resolved = 1,
    NotApplicable = 2
} 
```

模型：

```
public class CheckComments
{
    public string EntryId { get; set; }
    public int Serial { get; set; }
    public string Comment { get; set; }
    public DateTime CommentDate { get; set; }
    public CommentStatus CommentStatus { get; set; } 
}

public class CheckDataViewModel
{
  public string EntryId { get; set; }
  public string CheckId { get; set; }
  public decimal Value { get; set; }
  public List<CheckComments> CheckCommentsList { get; set; } 

  public List<string> CommentStatusList { get; set; } 
} 
```

控制器：

```
public class CheckDataController : Controller
{
   public ActionResult GetEnteredCheckData(string entryId)
   {
      var checkDataViewModel = new CheckDataViewModel();
      var checkData = new CheckDataManager().GetCheckData(entryId);

      checkDataViewModel.EntryId = checkData.EntryId;
      checkDataViewModel.CheckId = checkData.CheckId;
      checkDataViewModel.Value = checkData.Value;
      checkDataViewModel.CheckCommentsList = checkData.Comments;
      checkDataViewModel.CommentStatusList = Enum.GetNames(typeof (CommentStatus)).ToList();

            return View("EnteredCheckData", checkDataViewModel);
   }
} 
```

看法：

```
@model PDCA.Web.Models.CheckDataViewModel
@{
   ViewBag.Title = "EnteredCheckData";
   Layout = "~/Views/Shared/_Layout.cshtml";
 }
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
   <fieldset>
      <div class="row">
         <div class="span3">
            <div class="text-left">@Html.LabelFor(model => model.EntryId)</div>
         </div>
         <div class="span3">
            <div class="text-left">
                @Html.DisplayFor(model => model.EntryId)
                @Html.HiddenFor(model => model.EntryId)
            </div>
         </div>
      </div>
   </fieldset>
   <fieldset>
      <legend>Check Information</legend>
      <div class="row">
         <div class="span3">
            <div class="text-left">@Html.LabelFor(model => model.CheckId)</div>
         </div>
         <div class="span3">
            <div class="text-left">
                @Html.DisplayFor(model => model.Check.CheckId)
                @Html.HiddenFor(model => model.Check.CheckId)
            </div>
         </div>
       </div>
   </fieldset>
   <fieldset>
       <legend>Comments</legend>

       <div>
          <table class="table table-bordered">
            <tr>
                <th>
                    Serial
                </th>
                <th>
                    Comment
                </th>
                <th>
                    Date
                </th>
                <th>
                    Status
                </th>
                <th>
                </th>
            </tr>
            @for (int i = 0; i < Model.CheckCommentsList.Count; i++)
            {
              <tr>
                 <td>
                    @Html.DisplayFor(modelItem => Model.CheckCommentsList[i].Serial)
                    @Html.HiddenFor(modelItem => Model.CheckCommentsList[i].Serial)
                 </td>
                 <td>
                    @Html.DisplayFor(modelItem => Model.CheckCommentsList[i].Comment)
                    @Html.HiddenFor(modelItem => Model.CheckCommentsList[i].Comment)
                 </td>
                 <td>
                    @Html.DisplayFor(modelItem => Model.CheckCommentsList[i].CommentDate)
                        @Html.HiddenFor(modelItem => Model.CheckCommentsList[i].CommentDate)
                    </td>
                    <td>
                        @Html.DropDownListFor(modelItem => Model.CheckCommentsList[i].CommentStatus, new SelectList(Model.CommentStatusList, Model.CheckCommentsList[i].CommentStatus))
                        @Html.ValidationMessageFor(model => Model.CheckCommentsList[i].CommentStatus)
                    </td>
                    <td>
                        @Html.ActionLink("Update Status", "UpdateCommentStatus", new { Model.EntryId, Model.CheckCommentsList[i].Serial, Model.Check.CheckTitle, Model.Check.CheckId })|
                        @Html.ActionLink("Delete", "DeleteComment", new { Model.CheckCommentsList[i].Serial, Model.EntryId })
                    </td>
                </tr>
            }
         </table>
     </div>

  </fieldset>
}
<div>
   @Html.ActionLink("Back to List", "Index")
</div> 
```

代码太长了，但我认为这将帮助您理解我的错误。先谢谢朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:01:36.773

解决方案：

> @Html.DropDownListFor(modelItem => Model.CheckCommentsList[i].CommentStatus, new SelectList(Model.CommentStatusList, Model.CheckCommentsList[i].CommentStatus.ToString()))

# r - 解析要为 data.frame 读取的 .txt 文件

> ID：15955764
> 
> 赞同：2
> 
> 时间：2013-04-11T18:05:05.490
> 
> 标签：r

```
y<-readLines("output.txt") 
```

读取 txt 文件后，我需要将此数据格式化为具有一定列数的数据框。需要去掉没有 21 列的字母和行。我正在执行以下操作来解析 - 以及任何字母。

```
p<-gsub("-","",p)
p<-gsub("[aA-zZ]","",p) 
```

系统配置：lcpu=96 mem=196608MB ent=16.00

> ```
>  kthr            memory                         page                       faults                 cpu             time  
> ----------- --------------------- ------------------------------------ ------------------ ----------------------- --------
>   r   b   p        avm        fre    fi    fo    pi    po    fr     sr    in     sy    cs us sy id wa    pc    ec hr mi se
>  19   0   0   21337487    7123470     0   201     0     0     0      0  3576  66723 30304 19  4 77  0  5.97  37.3 00:02:30
>  27   0   0   21337431    7121069     0   123     0     0     0      0  4298  81526 36157 19  4 78  0  5.61  35.1 00:03:00
>  18   0   0   21333631    7122351     0   195     0     0     0      0  3696  65163 30794 23  4 74  0  6.49  40.6 00:03:30
>  19   0   0   21333590    7119082     0   194     0     0     0      0  5217 102823 47621 27  5 68  0  7.79  48.7 00:04:00
> 
>    kthr            memory                         page                       faults                 cpu             time  
>  ----------- --------------------- ------------------------------------ ------------------ ----------------------- --------
>    r   b   p        avm        fre    fi    fo    pi    po    fr     sr    in     sy    cs us sy id wa    pc    ec hr mi se
>   20   0   0   21347610    7204383     0   167     0     0     0      0  3645  73642 33333 21  3 75  0  6.21  38.8 00:12:30
>   16   0   0   21347576    7201448     0   110     0     0     0      0  4882  84287 40503 23  4 73  0  6.77  42.3 00:13:00 
> ```

一旦我解析出不需要的字符，我就会有一些空行。这还不是数据框，我将如何摆脱这里的空行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:04:33.267

您可以使用`readLines`和来完成此操作`count.fields`。

```
# path is the path to your data file
read.table(text=readLines(path)[count.fields(path, blank.lines.skip=FALSE) == 21])

#   V1 V2 V3       V4      V5 V6  V7 V8 V9 V10 V11  V12    V13   V14 V15 V16 V17 V18  V19  V20      V21
# 1 19  0  0 21337487 7123470  0 201  0  0   0   0 3576  66723 30304  19   4  77   0 5.97 37.3 00:02:30
# 2 27  0  0 21337431 7121069  0 123  0  0   0   0 4298  81526 36157  19   4  78   0 5.61 35.1 00:03:00
# 3 18  0  0 21333631 7122351  0 195  0  0   0   0 3696  65163 30794  23   4  74   0 6.49 40.6 00:03:30
# 4 19  0  0 21333590 7119082  0 194  0  0   0   0 5217 102823 47621  27   5  68   0 7.79 48.7 00:04:00
# 5 20  0  0 21347610 7204383  0 167  0  0   0   0 3645  73642 33333  21   3  75   0 6.21 38.8 00:12:30
# 6 16  0  0 21347576 7201448  0 110  0  0   0   0 4882  84287 40503  23   4  73   0 6.77 42.3 00:13:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:32:28.783

正则表达式可以提供帮助

```
### For each row in your object "text", search for lines where...
  # we start at the beginning of the line, search for a blank repeated
  # any number of times, then we get to the end of the line
index <- grep('^[[:blank:]]$', text)

### Now that we know which rows contain only blanks, we know which rows to remove
text <- text[-index] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:36:07.283

```
dat <- readLines(textConnection(' 
   kthr            memory                         page                       faults                 cpu             time  
----------- --------------------- ------------------------------------ ------------------ ----------------------- --------
  r   b   p        avm        fre    fi    fo    pi    po    fr     sr    in     sy    cs us sy id wa    pc    ec hr mi se
 19   0   0   21337487    7123470     0   201     0     0     0      0  3576  66723 30304 19  4 77  0  5.97  37.3 00:02:30
 27   0   0   21337431    7121069     0   123     0     0     0      0  4298  81526 36157 19  4 78  0  5.61  35.1 00:03:00
 18   0   0   21333631    7122351     0   195     0     0     0      0  3696  65163 30794 23  4 74  0  6.49  40.6 00:03:30
 19   0   0   21333590    7119082     0   194     0     0     0      0  5217 102823 47621 27  5 68  0  7.79  48.7 00:04:00

   kthr            memory                         page                       faults                 cpu             time  
 ----------- --------------------- ------------------------------------ ------------------ ----------------------- --------
   r   b   p        avm        fre    fi    fo    pi    po    fr     sr    in     sy    cs us sy id wa    pc    ec hr mi se
  20   0   0   21347610    7204383     0   167     0     0     0      0  3645  73642 33333 21  3 75  0  6.21  38.8 00:12:30
  16   0   0   21347576    7201448     0   110     0     0     0      0  4882  84287 40503 23  4 73  0  6.77  42.3 00:13:00'))

dat <- gsub('-','',dat)
dat <- gsub('[ ]{1,}','|',dat)
dat <- strsplit(dat,split='\\|')
dat[lapply(dat,length)==24]
col.names <- dat[lapply(dat,length)==24][[1]]
dat <- do.call(rbind,dat[lapply(dat,length)==22]) 
```

你得到这个 data.frame ：

```
 [,1] [,2] [,3] [,4] [,5]       [,6]      [,7] [,8]  [,9] [,10] [,11] [,12] [,13]  [,14]    [,15]   [,16] [,17] [,18] [,19] [,20]  [,21] 
[1,] ""   "19" "0"  "0"  "21337487" "7123470" "0"  "201" "0"  "0"   "0"   "0"   "3576" "66723"  "30304" "19"  "4"   "77"  "0"   "5.97" "37.3"
[2,] ""   "27" "0"  "0"  "21337431" "7121069" "0"  "123" "0"  "0"   "0"   "0"   "4298" "81526"  "36157" "19"  "4"   "78"  "0"   "5.61" "35.1"
[3,] ""   "18" "0"  "0"  "21333631" "7122351" "0"  "195" "0"  "0"   "0"   "0"   "3696" "65163"  "30794" "23"  "4"   "74"  "0"   "6.49" "40.6"
[4,] ""   "19" "0"  "0"  "21333590" "7119082" "0"  "194" "0"  "0"   "0"   "0"   "5217" "102823" "47621" "27"  "5"   "68"  "0"   "7.79" "48.7"
[5,] ""   "20" "0"  "0"  "21347610" "7204383" "0"  "167" "0"  "0"   "0"   "0"   "3645" "73642"  "33333" "21"  "3"   "75"  "0"   "6.21" "38.8"
[6,] ""   "16" "0"  "0"  "21347576" "7201448" "0"  "110" "0"  "0"   "0"   "0"   "4882" "84287"  "40503" "23"  "4"   "73"  "0"   "6.77" "42.3"
     [,22]     
[1,] "00:02:30"
[2,] "00:03:00"
[3,] "00:03:30"
[4,] "00:04:00"
[5,] "00:12:30"
[6,] "00:13:00" 
```

我认为您仍然需要将数据转换为数字...

# c++ - 从另一个类 c++ 访问 UI 元素

> ID：15955770
> 
> 赞同：0
> 
> 时间：2013-04-11T18:05:21.733
> 
> 标签：c++, qt, visual-c++

我在从另一个类（带有实例）访问 ui 元素时遇到问题。我的应用程序中有第二个 QMainWindow，我可以在 secondWindow.cxx 类中访问所有 ui 元素，但不能在 read.cxx 类中访问。我的代码如下所示。我的错误在哪里？谢谢您的帮助。

```
-------------------------------secondWindow.h------------------------------------

#ifndef __secondWindow_h
#define __secondWindow_h

#include "ui_secondwindow.h"

class secondWindow : public QMainWindow
{
    friend class read;
    igstkStandardClassBasicTraitsMacro(secondWindow, QMainWindow);
    Q_OBJECT

public:
    igstkStateMachineMacro();

    secondWindow();
    virtual ~secondWindow();
    void createSignalAndSlots();

public slots:
    void secondWindowTest();

protected:

private:
    Ui::secondMainWindow m_secondWindowUI;
};
#endif

-------------------------------secondWindow.cxx------------------------------------

#include "secondWindow.moc"
#include "secondWindow.h"
#include "read.h"

secondWindow::secondWindow() :m_StateMachine(this)
{
    m_secondWindowUI.setupUi(this);
    createSignalAndSlots();
}

void secondWindow::createSignalAndSlots()
{
    connect(m_secondWindowUI.pushButton1, SIGNAL(clicked()),this, SLOT(secondWindowTest()));

    connect(m_secondWindowUI.pushButton2, SIGNAL(clicked()), read::instance(), SLOT(readTest()));
}

void secondWindow::secondWindowTest()
{
    m_secondWindowUI.pushButton1->setEnabled(true); //OK
}

secondWindow::~secondWindow(){}

---------------------------------read.h--------------------------------------

#pragma once

#include "secondWindow.h"

class read : public QObject
{
    Q_OBJECT

public:
    static read *instance();
    read();
    virtual ~read() {}

public slots:
    void readTest();

protected:
    secondWindow    *m_readUI;
    static read     *m_read;

private:
};

---------------------------------read.cxx--------------------------------------
#include <read.moc>
#include "secondWindow.h"
#include "read.h"

read *read::m_read= NULL;

read::read()
{
    m_readUI = dynamic_cast<secondWindow*>( QApplication::instance() );
}

read *read::instance()
{
    if(m_read == NULL)
    m_read = new read();

    return m_read;
}

void read::readTest()
{
    m_readUI->m_secondWindowUI.qlabelTest->setText("test"); //segmentation fault
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:11:44.393

您正在铸造 a `QApplication::instance()`，这是`QApplication *`从`QCoreApplication *`派生 派生的`QObject *`。那是行不通的，它不是 a `secondWindow *`，甚至不是 a ，甚至`QMainWindow *`不是 a `QWidget *`。

除此之外，您的编码风格相当奇怪——在 Qt 中，习惯上`CamelCase`用于类，而不是`thisStuff`通常适用于函数和方法。包括`<read.moc>`是错误的。为什么是`read::m_read`静态的？最后，两个窗口类之间的耦合是以一种奇怪的方式建立的（访问全局的东西，比如`QApplication`只是为了获得对另一个窗口的引用，代码很难看）。一种更好更明显的方法是将所有窗口包装在父对象中或显式设置依赖关系，可能像这样：

```
MainWindow *mainWindow = new MainWindow();
SecondWindow *second = new SecondWindow(mainWindow);
UtilityWindow *utilityWin = new UtilityWindow(second); 
```

# function - 函数的返回值

> ID：15955771
> 
> 赞同：1
> 
> 时间：2013-04-11T18:05:22.287
> 
> 标签：function, powershell, return-value

我有两个功能：

```
Function1
{
    Function2
    return 1
}

Function2
{
    return 0
} 
```

执行后`Function1`它应该返回`1`，但它返回`0`。这是为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T18:34:49.313

PowerShell“返回值”实际上并不像您习惯使用其他语言的方式那样工作。要记住的重要一点是*所有输出*都被捕获并返回。该`return`语句基本上只是一个逻辑退出点。

例如：

```
Function Return-Zero {
    return 0
}

Function Return-One {
    Return-Zero
    return 1
}

Return-One 
```

由于 的返回值`Return-Zero`未存储在变量中，因此它是输出的一部分。运行上面将有输出：

```
0
1 
```

...这可能是你得到的。如果将返回值存储`Return-Zero`在变量中，则它不是输出的一部分。

```
Function Return-Zero {
    return 0
}

Function Return-One {
    $var = Return-Zero
    return $var
}

Return-One 
```

上面的输出是`0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:26:13.273

你确定它继续运行，并且它只返回 0 吗？它应该返回 0（函数 2 的返回值），然后返回 1，然后退出。

# ssh - rsync 和权限被拒绝

> ID：15955772
> 
> 赞同：1
> 
> 时间：2013-04-11T18:05:24.363
> 
> 标签：ssh, amazon-ec2, rsync

我只是尝试使用 将 tar 文件从我的笔记本电脑复制到我的 Amazon EC2 实例`rsync`，但出现此错误：

```
opening connection using: ssh -l root ec2-54-245-194-3.us-west-2.compute.amazonaws.com
rsync --server -vvve.Lsf . /Downloads
Permission denied (publickey,gssapi-keyex,gssapi-with-mic).
rsync: connection unexpectedly closed (0 bytes received so far) [sender]
rsync error: unexplained error (code 255) at io.c(605) [sender=3.0.9]
[sender] _exit_cleanup(code=12, file=io.c, line=605): about to call exit(255) 
```

这是我从笔记本电脑以**root**身份运行的命令：

```
rsync -az -vvv -e ssh /Downloads/employees_db-full-1.0.6.tar.bz2 root@ec2-54-245-194-
3.us-west-2.compute.amazonaws.com:/Downloads 
```

在实例上生成了一个安全密钥对，使用它我可以毫无问题地通过 ssh 连接到实例。

任何想法我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:14:09.503

改用 scp 并在复制命令中指定密钥对。终于奏效了。

# batch-file - 为每个 .H 文件创建骨架 .CPP 文件的快速方法

> ID：15955776
> 
> 赞同：0
> 
> 时间：2013-04-11T18:05:32.617
> 
> 标签：batch-file, automation

我有一个包含大量 .h 文件的仅标头库，我想通过为每个具有相同基本文件名的 .h 文件创建一个 .cpp 文件来测试每个文件是否有效，除了`#include`-ing 相关的 .h 文件外，该文件为空。 h 文件。

例如，我有 ah、bh、ch 并想创建 a.cpp：`include "a.h"`等

有没有一种巧妙的方法可以自动执行此操作，最好是在 Windows 设置中？命令`FOR`还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:12:48.867

用于`for`遍历所有`*.h`，并为每个具有相同基本名称`echo`的a 。`#include``.cpp`

您可以将其放入批处理文件并运行它：

```
for %%h in (*.h) do (
    echo #include "%%h" > "%%~nh.cpp"
) 
```

或者直接在命令行执行，如下所示：

```
for %h in (*.h) do echo #include "%h" > "%~nh.cpp" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:13:48.357

```
@ECHO OFF
SETLOCAL
FOR %%i IN (*.h) DO IF NOT EXIST %%~ni.cpp >%%~ni.cpp ECHO #include "%%i" 
```

应该做那个任务。如果您想要非纯字母文件名，则需要小型 mods。

从提示运行，仅使用 FOR 行，将每个减少`%%`到`%`

不会覆盖任何现有的 .CPP 文件

# jquery - MVC 3 在数据库中保存复选框状态

> ID：15955778
> 
> 赞同：1
> 
> 时间：2013-04-11T18:05:36.663
> 
> 标签：jquery, asp.net-mvc-3, checkbox

我有一个问题，我希望有人有时间看看。我在我的 mvc 3 测试项目中查看了表格。内表有复选框。我试图让这些复选框在我点击它们时被保存。我尝试了 java 脚本，尝试了很多来自互联网的示例，但对我来说仍然没有运气。有人可以帮忙吗？:)

这是我的看法：

```
@foreach (var item in Model)
{
    <tr>

        <td>
            @Html.DisplayFor(modelItem => item.date)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.section)
        </td>
        <td>

  @Html.CheckBoxFor(modelItem => item.check, new { onclick = "SomeMethod(this)" });

</td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id = item.idImovine }) 

           </td>
    </tr>
}

</table>

<script type="text/javascript">

   function SomeMethod(checkboxInput) {

        $.ajax({
            type: 'POST',
            url: 'Home/Action',
            data: { newValue: checkboxInput.checked },
            success: success,
            dataType: 'json'
        });
    }

</script> 
```

这是我的控制器

```
 public JsonResult Action(bool newValue)
        {

            var model = con.pro.Single(r => r.id == id);

            TryUpdateModel(model);
            con.SubmitChanges();

            return Json(true)

        } 
```

我正在使用 linq to sql 访问数据库。有人可以告诉我我做错了什么吗，我的目的是在单击时将复选框保存在 dv 中，但是在来自视图的表中单击了该复选框，并且需要将其保存到另一个表中，所以我我猜我也需要传递内部视图的 id 以及复选框值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:18:07.947

您可能需要传递由复选框表示的记录的 ID。所以让我们像这样更新你的剃刀代码。

```
@foreach (var item in Model)
{
  <tr>
    <td>
      @Html.CheckBoxFor(modelItem => item.check,
                                              new { @id=item.ID, @class="chks"});
   </td>
  </tr>
} 
```

现在我们将有一些普通的 javascript 来监听复选框的点击事件

```
<script type="text/javascript">
  $(function(){

       $(document).on("click","input.chks", function (e) {
           var _this=$(this);
           var isChecked = _this.is(':checked');
           $.post("@Url.Action("Update","Home")?id="+_this.attr("id")+
                                          "&newValue="+isChecked,function(data){
                 // do something with the response
           });

       });
  });

</script> 
```

现在确保您的`Update`方法接受 2 个参数

```
[HttpPost]
public ActionResult Update(int id,bool newValue)
{
   //do your saving here.
  return Json(true); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:08:15.123

如果您使用的是 POST，那么您的操作应相应标记

```
[HttpPost]
 public JsonResult Action(bool newValue) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:21:08.847

您需要`Id`在您的模型中有一个，然后在您的视图中执行此操作：

```
@Html.CheckBoxFor(modelItem => item.check, 
    new { @dataid = item.Id, onclick = "SomeMethod(this)" }); 
```

然后像这样做你的ajax帖子：

```
function SomeMethod(checkboxInput) {
    $.ajax({
        type: 'POST',
        url: 'Home/Action',
        data: { newValue: $(checkboxInput).is(':checked'), id: $(checkboxInput).attr('dataid') },
        success: success,
        dataType: 'json'
    });
} 
```

并像这样在您的控制器中接受它：

```
public JsonResult Action(bool newValue, int id)
{
    // do your saving here
} 
```

# android - 无法在 Android 中加载地图 (ClassDefNotFoundError)

> ID：15955779
> 
> 赞同：0
> 
> 时间：2013-04-11T18:05:51.743
> 
> 标签：android, maps

我正在尝试使用 Google Maps 制作一个简单的 Android 项目，但是，我似乎无法通过一个简单的错误

这是源代码：

```
package mapa.pack.mapamerodeador;
import android.support.v4.app.FragmentActivity;
import android.os.Bundle;

    public class ActividadPrincipal extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.seccion_1);
    }
} 
```

此外，这是布局：

```
 <?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:background="@color/fondo_pag1"
        android:orientation="vertical">

            <TextView 
                      android:id="@+id/titulo_pag1"
                      android:layout_height="wrap_content"
                      android:layout_width="fill_parent" 
                      android:layout_alignParentTop="true"
                      android:text="@string/pag1"
                      android:textSize="23sp"
                      android:gravity="center_horizontal"/>

            <fragment
                class="com.google.android.gms.maps.SupportMapFragment"
                android:id="@+id/mapa"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_below="@id/titulo_pag1"
                android:layout_marginBottom="4sp"
                android:layout_marginTop="2sp"
                android:layout_above="@+id/buttonUno" />

            <Button
                android:id="@+id/buttonUno"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:layout_marginRight="5dp"
                android:padding="5dp"
                android:background="@color/gris"
                android:layout_alignParentRight="true"
                android:layout_alignParentBottom="true"
                android:text="@string/link_pag_2" />

 </RelativeLayout> 
```

最后但并非最不重要的是，清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="mapa.pack.mapamerodeador"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission    android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<!-- The following two permissions are not required to use
 Google Maps Android API v2, but are recommended. -->
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<permission
    android:name="mapa.pack.merodeador.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
<uses-permission android:name="mapa.pack.merodeador.permission.MAPS_RECEIVE"/>

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >    

    <uses-library 
        android:required="true"
        android:name="com.google.android.maps" />

    <activity
        android:name="mapa.pack.mapamerodeador.ActividadPrincipal"
        android:theme="@android:style/Theme.NoTitleBar"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:theme="@android:style/Theme.NoTitleBar" 
        android:name="mapa.pack.mapamerodeador.Autores" />

    <activity 
        android:theme="@android:style/Theme.NoTitleBar"
        android:name="mapa.pack.mapamerodeador.Ajustes" />

    <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
        android:value="XXXXXXXXXXXXXXXXXXXXXXXXXXXXX"/>
</application>
</manifest> 
```

我知道清单中有一些我在代码中没有提到的活动，但这是因为即使是这两行似乎也不起作用，所以我评论了其余的。当我尝试执行它时，我得到一个**“java.lang.NoClasDefFoundError: com.google.android.gms.R$styleable at com.google.gms.maps.GoogleMapsOptions.createFromAttributes(UnknownSource)”**
有谁知道可能是什么问题？谢谢！！=)

编辑：如果我在 XML 中评论 <fragment> ，那么它不会显示任何东西，但至少它不会崩溃，所以我认为有什么问题，就在那里，有什么办法可以解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:58:31.540

您的清单文件中有一些问题：

**1.**当你的包名是：

```
package="mapa.pack.mapamerodeador" 
```

在您设置的谷歌地图权限中`mapa.pack.merodeador`：

```
<permission
android:name="mapa.pack.merodeador.permission.MAPS_RECEIVE"
android:protectionLevel="signature"/> 
```

必须相同。

**2.**删除此代码：

```
 <uses-library 
    android:required="true"
    android:name="com.google.android.maps" /> 
```

这是一个`Google Map API V1`许可，在`Google Map API V2`.

**3.**但是由于您的错误，我的猜测是您没有`google-play-services`正确引用该库。检查我写的这篇博文的前三个步骤，并确保所有步骤都正确：

[谷歌地图 API V2](http://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:40:02.147

模拟器不显示新的 Google Map api v2。你需要有一个真实的设备来测试它。

# angularjs - 如何使单击 ng-grid 表中的按钮从模型中删除一行？

> ID：15955788
> 
> 赞同：11
> 
> 时间：2013-04-11T18:06:28.510
> 
> 标签：angularjs, ng-grid

我用 ng-grid 设置了以下内容：

```
 var gridData = {};
    $scope.gridOptions = {
        data: 'gridData',
        enableCellEdit: true,
        multiSelect: false,
        columnDefs: [
            { field: 'testId', displayName: 'Test Id' },
            { field: 'name', displayName: 'Name', enableCellEdit: true, editableCellTemplate: cellEditableTemplate },
            { field: 'description', displayName: 'Description', enableCellEdit: true, editableCellTemplate: cellEditableTemplate },
            { field: '', cellTemplate: '<button ng-click="delete(row)">Delete</button>' }
        ]
    }; 
```

和：

```
 $scope.delete = function (row) {
      row.entity.$deleteData({ testId: row.entity.testId });
   } 
```

这会向删除该行的服务器发送一条 HTTP 消息。但是，该行仍保留在网格中。我怎样才能做到这一点，以便单击一行上的删除按钮也会从 gridData 对象中删除一行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T18:37:11.467

就像**Valentyn Shybanov**在他的评论中提到的那样，您应该检查服务器是否成功删除了数据库中的对象，然后将其从 gridData 数组中删除。

```
$scope.delete = function(row) {
    row.entity.$deleteData({testId:row.entity.testId})
        .then(function(response) {
            if (response.status === 'OK') {
                remove($scope.gridData, 'testId', row.entity.testId);
            }
        });
}

// parse the gridData array to find the object with testId
function remove(array, property, value) {
    $.each(array, function(index, result) {
        if (result[property] == value) {
            array.splice(index, 1);
        }
    });    
}); 
```

“删除功能”取自：[https ://stackoverflow.com/a/6310763/1036025](https://stackoverflow.com/a/6310763/1036025)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-09T23:22:33.467

这是 ui-grid 的最新版本 (3.0.0rc20) 的 Plunker，用于制作特定于行的按钮（即编辑、删除等）：

[http://plnkr.co/edit/l7oOIe4w3XzKOnMUGDdr?p=preview](http://plnkr.co/edit/l7oOIe4w3XzKOnMUGDdr?p=preview)

```
var app = angular.module('plunker', ['ui.grid']);

app.controller('MainCtrl', function($scope) {

  $scope.gridScope = $scope;

  $scope.gridOptions = {
    data: [{
      firstName: 'Frank',
      lastName: 'Zappa'
    }, {
      firstName: 'Giuseppe',
      lastName: 'Verdi'
    }, {
      firstName: 'Mos',
      lastName: 'Def'
    }],
    columnDefs: [{
      field: 'firstName',
      displayName: 'First'
    }, {
      field: 'lastName',
      displayName: 'Last'
    }, {
      field: 'edit',
      cellTemplate: '<button id="editBtn" type="button" class="btn-small glyphicon glyphicon-pencil" ng-click="grid.appScope.editUser(row.entity)" ></button> '
    }]
  };

  $scope.editUser = function(data) {
    alert('Edit ' + data.firstName + ' ' + data.lastName);
  }
}); 
```

它仅将 Bootstrap 用于字形按钮。否则，您可以将 Angular 与 ui-grid 一起使用。

这是基于 ui-grid 升级自述文件中的重要说明：

[https://github.com/angular-ui/ng-grid/blob/master/3.0_UPGRADE.md](https://github.com/angular-ui/ng-grid/blob/master/3.0_UPGRADE.md)

似乎他们已经改进了以前用于完成这项工作的非常令人困惑的（至少对我而言！）“getExternalScopes()”的东西。

# jsf - 在 JSF 视图中显示列表，并能够向其中添加元素

> ID：15955797
> 
> 赞同：-1
> 
> 时间：2013-04-11T18:06:55.683
> 
> 标签：jsf, jsf-2

我需要能够`ArrayList`在 JSF 视图中动态显示元素。我想查看列表中的所有项目，然后可以使用 commandButton 将其他元素添加到该列表中，以便更新 JSF 视图。

有没有可能实现我想要的？

我有一个 JSF 页面，我有一个`Message`类和一个`Conversation`包含消息列表的类。我想在 JSF 页面中显示几个对话对象及其各自的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:43:34.810

这是绝对可能的（并且易于开发）。只需查看`ArrayList`带有`h:dataTable`组件的项目。如果您添加具有`h:commandButton`将项目添加到此列表的操作的组件，则数据表会在重新呈现页面时在浏览器中自动更新。

# ios6 - iOS App Store Pass 参数在 Store 下载链接

> ID：15955798
> 
> 赞同：48
> 
> 时间：2013-04-11T18:07:00.327
> 
> 标签：ios6, app-store

类似于这个问题：[How to make ios App Store link with parameters?](https://stackoverflow.com/questions/13298848/how-to-make-ios-app-store-link-with-parameters)

我有兴趣将参数传递给 iOS 应用商店中的下载链接。从我读过的内容来看，参数似乎只有在已经安装的情况下才会传递给应用程序，并且用户点击了智能应用程序横幅。

我想要做的是将参数传递给下载链接，这样当用户下载时，他们第一次打开应用程序时，参数就会被传递。

主要是，我希望允许用户通过电子邮件或 Facebook 邀请他们的朋友玩我的应用程序，当朋友使用他们的链接下载时，它会向原始播放器发送推送，通知他们的朋友现在拥有该应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-08-10T04:56:46.877

即将到来的 iOS 9 现在更容易了，因为**cookie 可以在 Safari 和应用内 Safari 视图控制器之间共享！**只需在浏览器中保存一个 cookie 并跟踪点击的最后一个链接。然后当用户打开您的应用程序时，在显示微调器的同时在后台打开一个不可见的 Safari 视图控制器。只要您可以检查 cookie 并看到最后点击的链接，您就可以停止微调器——这应该是一个非常快速的操作。

[我们在Branch](http://branch.io?bmp=SO)免费提供此功能，一段时间以来我们一直在那里提供可定制的 Web 横幅。现在我们很高兴将 Safari 视图控制器整合到我们的开源 SDK 中！我们还有一个**数字指纹**版本，允许您在 iOS 9 之前的设备上执行相同的操作。我们使用**IP 地址、操作系统、操作系统版本等**来比较浏览器中的点击和应用程序中的打开。这种方法有利有弊。如果您有兴趣，很乐意进一步详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T03:55:50.153

安装应用后，您可以通过[智能应用横幅将参数传递给应用](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html) **。**

所以我建议提供一个链接来安装应用程序，然后提供第二个链接到带有智能应用程序横幅的页面以传递参数。

这是一个 kluge，但它是在 iOS 中做到这一点的唯一方法。（iTunes 商店是一个黑匣子，而 Play 商店通过 Android 参数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T23:28:05.020

请参阅以下解决方案： [如何使用参数制作 ios App Store 链接？](https://stackoverflow.com/questions/13298848/how-to-make-ios-app-store-link-with-parameters)

[本质上，这篇文章告诉您，您可以使用智能横幅（ http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)）将 url 参数传递给 iOS 6.0 及更高版本的 iOS App Store [/PromotingAppswithAppBanners.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)），并且此参数将传递给您的应用程序并在您的应用程序委托（您必须实现）中的 application:openURL:sourceApplication:annotation: 方法中接收。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-09-23T17:16:47.050

现在使用 iOS8，您可以将提供商 ID 和活动 ID 作为参数传递到应用商店链接：http: [//www.applift.com/blog/new-era-attribution-analytics.html](http://www.applift.com/blog/new-era-attribution-analytics.html)

# android - 递归调用getDatabase

> ID：15955799
> 
> 赞同：21
> 
> 时间：2013-04-11T18:07:02.590
> 
> 标签：android

我第一次在这里问问题，所以要温柔，大声笑。

反正。我一直在使用 Android，我的最新版本运行完美。直到昨天，当 IT 给我一个新工作站时。自从有了这个新工作站后，我不断收到以下错误：

`04-11 17:34:53.282: E/AndroidRuntime(789): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.blueharvest/com.example.blueharvest.SettingsActivity}: java.lang.IllegalStateException: getDatabase called recursively`

如果有帮助，我将在虚拟设备中运行它，使用平台 4.2.2 和 API 级别 17。

我真的希望有人能对这个错误有所了解，这样我就可以停止扯头发了，哈哈。

如果需要任何其他信息，请告诉我。

非常感谢，

布拉德。

编辑：添加了更多的 logcat

```
04-11 19:25:08.668: E/AndroidRuntime(2748): FATAL EXCEPTION: main
04-11 19:25:08.668: E/AndroidRuntime(2748): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.blueharvest/com.example.blueharvest.SettingsActivity}: java.lang.IllegalStateException: getDatabase called recursively
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.os.Looper.loop(Looper.java:137)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at java.lang.reflect.Method.invokeNative(Native Method)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at java.lang.reflect.Method.invoke(Method.java:511)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at dalvik.system.NativeStart.main(Native Method)
04-11 19:25:08.668: E/AndroidRuntime(2748): Caused by: java.lang.IllegalStateException: getDatabase called recursively
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:204)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at com.example.blueharvest.DatabaseHandler.setDefaultLabel(DatabaseHandler.java:90)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at com.example.blueharvest.DatabaseHandler.onCreate(DatabaseHandler.java:82)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:252)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:188)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at com.example.blueharvest.DatabaseHandler.populateFields(DatabaseHandler.java:196)
 04-11 19:25:08.668: E/AndroidRuntime(2748):    at com.example.blueharvest.SettingsActivity.onCreate(SettingsActivity.java:45)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.app.Activity.performCreate(Activity.java:5104)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-11 19:25:08.668: E/AndroidRuntime(2748):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-11 19:25:08.668: E/AndroidRuntime(2748):     ... 11 more 
```

编辑：添加了导致错误的代码。setDefaultLabel() 是罪魁祸首。

```
@Override
public void onCreate(SQLiteDatabase db) {
    // Create tables        
    db.execSQL(CREATE_CATEGORIES_TABLE);        
    db.execSQL(CREATE_CHRGDATA_TABLE);
    db.execSQL(CREATE_SETTINGS_TABLE);
    setDefaultLabel();
}

/**
 * 
 */

public void setDefaultLabel() {
    // create default label
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(KEY_NAME, "Default");
    db.insert(TABLE_LABELS, null, values);
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-11T20:12:38.877

尝试将您的`setDefaultLabel()`方法更改为...

```
public void setDefaultLabel(SQLiteDatabase db) 
```

...然后`onCreate(...)`只需将`db`参数传递给它并摆脱这一行...

```
SQLiteDatabase db = this.getWritableDatabase(); 
```

你的代码应该看起来像这样......

```
@Override
public void onCreate(SQLiteDatabase db) {
    // Create tables        
    db.execSQL(CREATE_CATEGORIES_TABLE);        
    db.execSQL(CREATE_CHRGDATA_TABLE);
    db.execSQL(CREATE_SETTINGS_TABLE);
    setDefaultLabel(db);
}

/**
 * 
 */

public void setDefaultLabel(SQLiteDatabase db) {
    // create default label
    ContentValues values = new ContentValues();
    values.put(KEY_NAME, "Default");
    db.insert(TABLE_LABELS, null, values);
} 
```

您现有代码中的问题`onCreate(...)`是正在传递对开放/可写数据库的引用，但它随后调用`setDefaultLabel(...)`它试图获取对数据库的另一个可写引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-31T06:01:42.377

这是我的解决方案： 在 Helper 中，我重写了 2 个方法 getWritableDatabase() 和 getReadableDatabase()，如下所示： 请注意，您不应该关闭数据库，它可能会崩溃。

```
 @Override
    public void onCreate(SQLiteDatabase db) {
        // All your code here .....

        // Add default value for all tables
        isCreating = true;
        currentDB = db;
        generateAllDefaultData();
        // release var
        isCreating = false;
        currentDB = null;
    }

    boolean isCreating = false;
    SQLiteDatabase currentDB = null;

    @Override
    public SQLiteDatabase getWritableDatabase() {
        // TODO Auto-generated method stub
        if(isCreating && currentDB != null){
            return currentDB;
        }
        return super.getWritableDatabase();
    }

    @Override
    public SQLiteDatabase getReadableDatabase() {
        // TODO Auto-generated method stub
        if(isCreating && currentDB != null){
            return currentDB;
        }
        return super.getReadableDatabase();
    } 
```

# jquery - 带有可排序列表的 JQuery UI 可排序部分（div）

> ID：15955803
> 
> 赞同：3
> 
> 时间：2013-04-11T18:07:08.700
> 
> 标签：jquery, jquery-ui

我希望有人能指出我的教程/示例。我确定它已经完成了我只是没有找到它。我需要一个“嵌套”排序功能，其中有代表部分或类别的可排序块（可能是 div）。

然后在部分区域内，我需要一个也可排序的列表。

因此，例如说我有以下部分：

```
Breakfast
  - Cereal
  - Coffee
  - Juice

Lunch 
  - Soup
  - Sandwich

Dinner
  - Stew 
```

我希望能够拖动并重新订购早餐、午餐和晚餐，并让子列表随之移动。然后我希望能够在任何地方对子列表进行排序。澄清一下，如果我愿意，我希望能够将咖啡从早餐区转移到晚餐区。

请并感谢您的帮助。

* * *

好的，我只是使用了错误的选择器，它没有按预期工作。默认情况下，JQuery UI 完全符合我的需要。这是我为任何偶然发现此问题的人提供的代码。

```
<div id='section-block'>
    <div>
        <span>Section 1</span>
        <ul id="sortable1" class="connectedSortable">
          <li class="ui-state-default">Item 1a</li>
          <li class="ui-state-default">Item 2a</li>
          <li class="ui-state-default">Item 3a</li>
          <li class="ui-state-default">Item 4a</li>
          <li class="ui-state-default">Item 5a</li>
        </ul>
    </div>
    <div>
        <span>Section 2</span>
        <ul id="sortable2" class="connectedSortable">
          <li class="ui-state-highlight">Item 1b</li>
          <li class="ui-state-highlight">Item 2b</li>
          <li class="ui-state-highlight">Item 3b</li>
          <li class="ui-state-highlight">Item 4b</li>
          <li class="ui-state-highlight">Item 5b</li>
        </ul>
    </div>
</div>

<script type="text/javascript">
    $(function() {
        $("#section-block").sortable().disableSelection();

        $("#sortable1, #sortable2").sortable({
            connectWith: ".connectedSortable"
        }).disableSelection();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T18:13:15.880

[http://jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)

这将帮助您将项目从一个列表转移到另一个列表。我会说你有正确的想法，制作一个“外部”可排序，它使用 div，其中包含另一个带有“可转移”项目的可排序列表。

# android - 如何更改 textView android.R.layout.simple_spinner_dropdown_item 的颜色？

> ID：15955804
> 
> 赞同：6
> 
> 时间：2013-04-11T18:07:20.500
> 
> 标签：android, textview, android-spinner, android-styles

我正在使用内置资源 ID android.R.layout.simple_spinner_dropdown_item 创建一个 SpinnerAdapter

```
SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(this, R.array.action_list, android.R.layout.simple_spinner_dropdown_item); 
```

但是该资源 ID 创建的 textView 具有 textColor Black，我需要不同的颜色。改变颜色但保持其他一切不变的最佳方法是什么？

当我尝试在 xml 文件中创建自己的 textView 布局资源时，例如

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/White"
    /> 
```

那么它的行为方式与 android.R.layout.simple_spinner_dropdown_item 不同，因为例如填充不同。所以

1.  有没有办法在继承 android.R.layout.simple_spinner_dropdown_item 的所有内容并允许我覆盖 textColor 的 xml 文件中创建我自己的布局资源？
2.  或者 android.R.layout.simple_spinner_dropdown_item 的完整定义在某处可用？
3.  或者也许有更简单的方法？

这个问题与我今天提出的另一个问题有关（[Can't change the text color with Android Action Bar drop-down navigation](https://stackoverflow.com/questions/15948026/cant-change-the-text-color-with-android-action-bar-drop-down-navigation/15955298#15955298)）。我已经意识到这个问题（以及这个问题）的一个答案是创建我自己的`ArrayAdapter`继承自的类，`ArrayAdapter<T>`这样我就可以在使用 ArrayAdapter 时始终在代码中设置颜色（请参阅我对该问题的回答）。但这似乎是一个非常麻烦的解决方案:-|。

更改文本颜色不应该是一项艰巨的任务！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-11T22:11:37.450

要扩展 Sam 的解决方案，您需要以非常具体的方式修改文件以覆盖 Android 的样式。

将 sdk 文件夹中的文件复制`simple_spinner_dropdown_item.xml`到您正在使用的正确布局文件夹中后，您将看到以下代码：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@android:id/text1"
style="?android:attr/spinnerDropDownItemStyle"
android:singleLine="true"
android:layout_width="match_parent"
android:layout_height="?android:attr/dropdownListPreferredItemHeight"
android:ellipsize="marquee" /> 
```

为了更改 TextView 的背景并避免此错误：

> .../res/layout/simple_spinner_dropdown_item.xml:20：错误：错误：属性不公开。（在 'layout_height' 处，值为 '?android:attr/dropdownListPreferredItemHeight'）。

您的代码需要如下所示：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/spinnerText"
style="@style/SpinnerTextViewItem"
android:singleLine="true"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:ellipsize="marquee" /> 
```

需要进行的另一个主要更改是创建自己的样式。您可能有一个 styles.xml 文件，因此添加一个类似于此的新样式：

```
<style name="SpinnerTextViewItem" parent="@android:style/Widget.TextView" >
    <item name="android:textStyle">normal</item>
    <item name="android:background">@color/green</item>
</style> 
```

假设您的 colors.xml 文件中有一些内容，您可以通过“@color/green”或您选择的任何颜色（当然您可以使用@android:color/...）设置颜色，更不用说所有其他项目了您可以添加以更改 TextView。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-11T18:11:36.063

> 有没有办法在继承 android.R.layout.simple_spinner_dropdown_item 的所有内容并允许我覆盖 textColor 的 xml 文件中创建我自己的布局资源？

不，但您可以将您喜欢的版本剪切并粘贴`simple_spinner_dropdown_item.xml`到新文件中，然后只需更改文本颜色。

> 或者 android.R.layout.simple_spinner_dropdown_item 的完整定义在某处可用？

是的，但有许多不同的版本。你喜欢哪个 API？此外，您的硬盘驱动器上可能已经有一个副本，请检查`<android-sdk>/platforms/android-xx/data/res/layout/`（`xx`特定的 API 在哪里。）

* * *

作为替代方法，您可以创建自定义适配器并在为每一行充气后更改文本颜色，但上述方法会稍微快一些，因为它不涉及任何运行时更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:36:54.773

不使用自定义适配器是不可能改变颜色的

```
 android.R.layout.simple_spinner_dropdown_item 
```

最好创建一个自定义适配器，然后您可以更改颜色、testSixe、textStyle 等。

# matplotlib - 无法在 Canopy IPython Notebook 的外部窗口中创建绘图

> ID：15955808
> 
> 赞同：3
> 
> 时间：2013-04-11T18:07:25.357
> 
> 标签：matplotlib, inline, ipython, enthought

我刚开始使用 Canopy，它非常好，但我无法在[iPython Notebook](http://en.wikipedia.org/wiki/IPython#Notebook)的外部窗口中创建图形。我希望

```
plot(rand(100)) 
```

在笔记本中创建一个新窗口，就像我使用通过“ipython notebook --pylab”启动的[HTML版本时所做的那样，但是在 Canopy 中创建该图时是内联的。](http://en.wikipedia.org/wiki/HTML)Canopy 中 qtconsole 中的相同命令*确实*在新窗口中创建了我想要的图形。查看 Canopy/IPython 源代码以查看“内联”和“pylab”的外观，内联数字似乎以某种方式被硬编码（评论提到了一些关于兼容性的内容）。

有没有办法解决这个问题，我仍然可以在 IPython 笔记本的新窗口中创建图形？内嵌的数字对我的工作不满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:02:08.130

首选项仅更改嵌入式 Python 窗格的[pylab](http://en.wikipedia.org/wiki/Matplotlib#Comparison_with_MATLAB)后端。要更改笔记本的后端，您必须手动为每个笔记本执行此操作，方法是评估：

```
%pylab qt 
```

由于 matplotlib 中可能存在问题，如果此操作失败并显示未安装 matplotlib 错误，则需要`QT_API=pyside`在您的环境中进行设置。

我不确定您的操作系统是什么，因此，一个全平台解决方案将是，在您的笔记本中运行类似的东西：

```
import os
os.environ['QT_API'] = 'pyside'
%pylab qt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:56:38.187

转到 Edit --> Preferences --> Python 并选择不同的 PyLab 后端

# javascript - 关于 Spring MVC + JSON + 自动完成

> ID：15955810
> 
> 赞同：0
> 
> 时间：2013-04-11T18:07:31.563
> 
> 标签：javascript, json, spring, spring-mvc, autocomplete

当用户从下拉菜单中单击一个项目时，Web 视图应该会弹出多个 HTML 组件。这是我需要在视图中添加的内容：

```
1\. A JSON object which include a large array of data for autocomplete dropdown menu
2\. Some other pojo collections for regular html component values. 
```

如果我使用以下 Spring MVC 控制器方法：

```
@RequestMapping(value="{name}", method = RequestMethod.GET)
public @ResponseBody Shop getShopInJSON(@PathVariable String hotelName) {

    List<Hotel> hotels = getHotelByNameLike(hotelName);

    return hotels;

} 
```

并将其他 pojo 对象添加为`ModelAttribute`

```
@ModelAttribute("someName")
public Collection<SomeObject> populateObject() {
    return Object.getAllObjects();
} 
```

以下是关于上述计划的一些问题：

```
1\. There are two solution regarding `autocomplete`
    a. Each time user type in inputbox, generate a new `Like`query to getch similar results
    b. Use JSON to load all data to the view and let javascript to filter out the data in the memory. 
Plan be is preferred, but how can above code implement plan b?

2\. Above code fails to mention `view` name which responds to the request from menu event.
3\. Can above solution work out to bring both JSON object and POJO object to the same view? 
```

# package - Grails 包命名约定

> ID：15955811
> 
> 赞同：1
> 
> 时间：2013-04-11T18:07:51.047
> 
> 标签：package, naming-conventions

我是新的 Groovy/Grails，我想确保我了解包背后的命名约定。

那么既然我在一个网站地址是 mssu.edu 的大学工作，我的班级名称需要是 edu.mssu.ClassName 吗？

另外，以这种方式命名包有什么好处？

# file - 从vbscript中的函数返回文件句柄

> ID：15955812
> 
> 赞同：1
> 
> 时间：2013-04-11T18:07:58.667
> 
> 标签：file, function, vbscript, procedure, filesystemobject

我有一个创建和打开文本文件的 vbscript 函数。我想将文件句柄从函数返回到代码的主体。不幸的是，我得到一个对象不支持此属性或方法错误。

最终，我将设置代码，在其中我将拥有一个调试脚本，该脚本将具有打开、写入、读取和关闭文件的功能。然后，我可以将此脚本导入另一个 vbscript 文件并将其用于调试目的。但是，首先，我需要让下面的代码工作。

先感谢您。

这是代码：

```
Function OpenFileWrite(sDirectory, sFile)
    Dim objFSO 'As FileSystemObject
    Dim objTextFile 'As Object

    Const ForReading = 1
    Const ForWriting = 2
    Const ForAppending = 8

    Set objFSO = CreateObject("Scripting.FileSystemObject")

    ' Check that the strDirectory folder exists
    If objFSO.FolderExists(sDirectory) Then
            Set objFolder = objFSO.GetFolder(sDirectory)
    Else
            Set objFolder = objFSO.CreateFolder(sDirectory)
            WScript.Echo "Just created " & sDirectory
    End If

    If objFSO.FileExists(sDirectory & "\" & sFile) Then
            Set objFile = objFSO.GetFile(sDirectory & "\" & sFile)
    Else
            Set objFile = objFSO.CreateTextFile(sDirectory & "\" & sFile)
            Wscript.Echo "Just created " & sDirectory & "\" & sFile
    End If

    Set objTextFile = objFSO.OpenTextFile(sDirectory & "\" & sFile, ForWriting, True)

    OpenFileWrite = objTextFile

End Function

sDirectory = "\"
sFile = "debug.txt"

Set ObjFile = OpenFileWrite(sDirectory, sFile) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:11:23.430

您需要`Set`将**对象**分配给变量**或**函数的返回值：

```
OpenFileWrite = objTextFile
==>
Set OpenFileWrite = objTextFile 
```

（在`Set OpenFileWrite = objTextFile`遵守`Set`规则“使用 Set 分配对象”；`OpenFileWrite =`“实现”规则“分配给函数名称以指定返回值”。）

# sql-server-2008-r2 - SQL 查询列出非活动记录并列出最后一个相关记录

> ID：15955814
> 
> 赞同：0
> 
> 时间：2013-04-11T18:07:59.143
> 
> 标签：sql-server-2008-r2

SQL Server 2008 R2 我之前发布并收到了我的问题的完美答案。但是现在我的客户想要在查询中添加其他内容。

我有两张桌子。我需要一个不活动报告（我已经能够创建），其中主表在 x 天的笔记表中没有相关记录。

现在我需要将最后一个注释的日期添加到此查询中。

这是我的表结构：

```
Main Table FIELDS > file_number, sysid

Notes Table FIELDS > note_date, main_id 
```

这是我当前的查询：

```
SELECT * 

FROM
  db.main m
  LEFT OUTER JOIN db.notes n
ON m.sysid = n.main_id 
AND CONVERT(VARCHAR(10),DATEADD (day, (n.[date]), '1800-12-28'), 101) > dateadd(dd, -14, getdate()) 
WHERE n.main_id is null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:01:04.570

这个怎么样：

```
SELECT
    *
FROM 
    db.main m
LEFT JOIN
    (
        SELECT 
            main_id
            , MAX(n.[DATE]) LastNote
        FROM
            db.notes 
        GROUP BY 
            main_id            
    ) n
    ON 
    n.main_id = m.sysid
WHERE 
    (
        n.main_id IS NULL
        OR 
        DATEDIFF(DAY, n.LastNote getdate()) > 14
    ); 
```

主记录和最后一个注释日期，其中最后一个注释超过 14 天，或者如果根本没有注释，则为空白 lastDate。

# multithreading - 在经典生产者消费者的不充分实施中更快的消费者

> ID：15955820
> 
> 赞同：0
> 
> 时间：2013-04-11T18:08:21.423
> 
> 标签：multithreading, synchronous, producer-consumer

Wikipedia对经典的生产者-消费者问题的[实现并不充分。](http://en.wikipedia.org/wiki/Producer-consumer_problem#Inadequate_implementation)在该实现中，消费者实现如下：

```
procedure consumer() 
{
    while (true) { 
        if (itemCount == 0) {
            sleep();
        }

        item = removeItemFromBuffer();
        itemCount = itemCount - 1;

        if (itemCount == BUFFER_SIZE - 1) {
            wakeup(producer);
        }

        consumeItem(item);
    }
} 
```

仅在`itemCount == BUFFER_SIZE - 1`. 如果消费者跑得更快（例如连续消费两次），这是否意味着生产者永远不会被唤醒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:24:06.843

如果您使用多个线程，那么是的，假设 itemCount == BUFFER_SIZE 对于这个例子如果有多个线程，那么一旦你到达该行

```
if (itemCount == BUFFER_SIZE - 1) 
```

可以有一个上下文切换到另一个删除另一个项目的线程，因此 itemCount 等于 BUFFER_SIZE - 2，并且只能减少。所以唤醒（生产者）永远不会被调用。

它可能应该是 itemCount <= BUFFER_SZIE-1。

# c# - NHibernate 认为我在使用 SaveOrUpdate 时有一个重复的对象

> ID：15955824
> 
> 赞同：0
> 
> 时间：2013-04-11T18:08:34.643
> 
> 标签：c#, asp.net-mvc, nhibernate

我有一个父类

```
public class Parent
{
    public Parent(DateTime? date) { Date = date; }

    public DateTime? Date { get; set; }

    public List<Child> Children { get; set; }

    public void Save()
    {
        foreach(var child in Children)
        {
            child.Save(Date ?? DateTime.Now);
        }
    }
} 
```

显然，我也有一个子班，我的问题的真正原因是：

```
public class Child
{
    public Child () {}

    public Decision FirstDecision { get; set;}

    public Decision SecondDecision { get; set; }

    public OtherProperty SomeOtherProperty { get; set; }

    public void Save(DateTime date)
    {
        SaveFirstDecision(date);
        SaveSecondDecision(date);
    }

    public void SaveFirstDecision(date)
    {
        var type = FactoryTools.Factory.CreateQueryable<DecisionType>()
                       .FirstOrDefault(x => x.Name = "First");

        if(FirstDecision == null) FirstDecision = new Decision { Type = type };

        FirstDecision.SomeOtherPropery = SomeOtherProperty;
        FirstDecision.SomeDate = date;

        FactoryTools.Factory.SaveOrUpdate(FirstDecision);
    }

    public void SaveSecondDecision(date)
    {
        var type = FactoryTools.Factory.CreateQueryable<DecisionType>()
                       .FirstOrDefault(x => x.Name = "Second");

        if(SecondDecision == null) SecondDecision = new Decision { Type = type };

        SecondDecision.SomeOtherPropery = SomeOtherProperty;
        SecondDecision.SomeDate = date;

        // This is where the Exception occurs
        FactoryTools.Factory.SaveOrUpdate(SecondDecision);
    }
} 
```

所以在第二次 SaveOrUpdate 中，NHibernate 抛出这个异常： `Cannot insert duplicate key row in object 'dbo.d_decision' with unique index 'd_decision_i1'.`

我不明白为什么 NHibernate 将这两个决定视为重复...我尝试了很多事情，包括覆盖`Equals`and`HashCode`但似乎无法避免这个问题。谢谢你的帮助。

顺便说一句，这里显示的类只是我认为是相关代码片段的抽象，这些类中还有其他属性，但我不认为它们是相关的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:09:26.660

正如 Darren Kopp 所指出的，这是数据库的问题。我们的一位 dba 在该表上创建了一个索引，该索引要求在特定的列组合中，至少有一个必须不同......

# jquery - 如何将自动完成功能连接到文本框？

> ID：15955828
> 
> 赞同：2
> 
> 时间：2013-04-11T18:08:49.530
> 
> 标签：jquery, asp.net, vb.net, .net-1.1

与此相关：[jquery 不会出错或成功](https://stackoverflow.com/questions/15957113/jquery-doesnt-go-to-error-or-success)

我有一个旧的 1.1 asp.net/vb.net 项目，我需要将自动完成添加到文本框。我这样写了一个 .asmx （网络服务文件）：

```
 <WebMethod()> _
    Public Function GetTags() As String()
        Dim arr() As String = BindTags()
        Return arr
    End Function
    Private Function BindTags() As String()
        Dim cmdSelect As SqlCommand
        Dim conMyData As SqlConnection
        Dim reader As SqlDataReader
        Dim myList As New ArrayList

        'try and make a connection   
        Try
            conMyData = New SqlConnection(ConfigurationSettings.AppSettings("strConn"))
            cmdSelect = New SqlCommand("select_tags_grid", conMyData)

            With cmdSelect
                .CommandType = CommandType.StoredProcedure
                'add parameters
                .Parameters.Add("@SortOrder", SqlDbType.TinyInt).Value = 1
                'check the clientid
                conMyData.Open()
                reader = cmdSelect.ExecuteReader(CommandBehavior.CloseConnection)
            End With

            While (reader.Read())
                myList.Add(CType(reader("Tag"), String))
            End While

            Dim arr() As String = CType(myList.ToArray(Type.GetType("System.String")), String())
            Return arr
        Catch e As Exception
            'clean up and close resources
            Throw e
        Finally
            cmdSelect = Nothing
            conMyData.Close()
            conMyData = Nothing
        End Try
    End Function 
```

这很好用，因为我在运行这个 .asmx 文件时可以看到数据。然后我阅读了有关 .net 1.1 不支持 json / jsonp 格式并使用 xml 的文章。因此，我继续着手在 jquery 方面将此自动完成 ui 附加到我的文本框。这是我尝试过的：

```
$("#txtTags").autocomplete({
    minLength: 0,
    source: function(request, response) {   
        $.ajax({
            type: "POST",
            url: "GetTags.asmx/GetTags",
            dataType: "xml",
            contentType: "text/xml; charset=utf-8",
      success: function(xml) {
           alert("hi");
           // Completion logic goes here
      },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });
    },    
}); 
```

现在，当我运行我的应用程序并使用例如 google chrome 时，当我在文本框中键入时，我没有看到开发人员工具控制台中弹出任何错误。所以我不确定这是否有效。我试图按照这个 stackoverflow 答案：[https](https://stackoverflow.com/a/7729147/168703) ://stackoverflow.com/a/7729147/168703 看看这个人是如何做到的，我很确定我正确地遵循了？谁能告诉我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:32:00.943

在 chrome 的工具上，转到“网络”选项卡。使用“清除”按钮删除所有条目，然后开始在文本框中输入。如果自动完成功能正常，您面前应该会出现一个条目（在网络选项卡上），单击它应该会为您提供有关正在发生的事情的详细信息。

![在此处输入图像描述](https://i.stack.imgur.com/HsRLi.png)

在上面的示例中，我正在调用用于自动完成的通用处理程序。由于您使用的是 1.1 并且您使用 Web 服务（如果我理解正确的话），您应该会看到 Web 服务调用或类似的东西。

# c# - 音乐数据库 c#

> ID：15955831
> 
> 赞同：0
> 
> 时间：2013-04-11T18:08:56.320
> 
> 标签：c#, id3

我正在尝试使用 ID3v1TagReader 创建一个链接，以便它可以将 ID3 标记转换为字符串并在我的程序中显示它们。

我用来执行此操作的代码是：

```
 private void button3_Click(object sender, EventArgs e)
    {
        //This is refrencing the Tag Reader
        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            ID3v1TagReader tr = new ID3v1TagReader();

            ID3v1TagReader.ID3v1Tag ti = new ID3v1TagReader.ID3v1Tag();

            //This is telling the tag reader in which field the information must go
            ti = tr.ReadID3v1Tag(openFileDialog1.FileName);
            trackTextBox.Text = ti.TrackName;
            artistTextBox.Text = ti.ArtistsName;
            albumTextBox.Text = ti.AlbumName;
            comboBox1.Text = ti.Genres;
            locationTextBox.Text = openFileDialog1.FileName;
            yearTextBox.Text = ti.Year;
        }
    } 
```

行“ID3v1TagReader.ID3v1Tag ti = new ID3v1TagReader.ID3v1Tag();” 给出错误：“类型名称 'ID3v1Tag' 不存在于类型 'ID3v1TagReader' 中”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:14:11.407

如果您使用的是我认为您正在使用的库（SharpTag，我在互联网上任意找到的），那么该类型似乎`ID3v1Tag`确实不在 inside `ID3v1TagReader`。试试这个：

```
//This is refrencing the Tag Reader
    if (openFileDialog1.ShowDialog() == DialogResult.OK)
    {
        ID3v1TagReader tr = new ID3v1TagReader();

        ID3v1Tag ti = new ID3v1Tag();

        //This is telling the tag reader in which field the information must go
        ti = tr.ReadID3v1Tag(openFileDialog1.FileName);
        trackTextBox.Text = ti.TrackName;
        artistTextBox.Text = ti.ArtistsName;
        albumTextBox.Text = ti.AlbumName;
        comboBox1.Text = ti.Genres;
        locationTextBox.Text = openFileDialog1.FileName;
        yearTextBox.Text = ti.Year;
    } 
```

# ruby-on-rails - 设置：路由集群的默认值

> ID：15955832
> 
> 赞同：2
> 
> 时间：2013-04-11T18:09:00.013
> 
> 标签：ruby-on-rails

我目前正在设置一些这样的路线：

```
 post '/create', :to => 'reports#create', :defaults => {:format => 'json'}
  get '/all', :to => 'reports#index', :defaults => {:format => 'json'}
  delete '/:id', :to => 'reports#destroy', :defaults => {:format => 'json'}
  get '/:id', :to => 'reports#show', :defaults => {:format => 'json'}
  root :to => 'reports#index', :defaults => {:format => 'json'} 
```

而且我想知道是否有任何方法可以`:defaults => {:format => 'json'}`为这个集群中的所有路由设置，而不必为每个路由都写出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-06T22:07:31.720

尝试这样的事情：

```
defaults { :format => :json } do
  post '/create', :to => 'reports#create'
  get '/all', :to => 'reports#index'
  delete '/:id', :to => 'reports#destroy'
  get '/:id', :to => 'reports#show'
  root :to => 'reports#index'
end 
```

资源： [http ://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-defaults](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-defaults)

# c# - C# 控件仅在调用 application.doevent 后出现

> ID：15955835
> 
> 赞同：0
> 
> 时间：2013-04-11T18:09:12.397
> 
> 标签：c#

昨天我有一个问题困扰了我好几个小时。在我的程序的某个时刻，另一个线程更改了表单上的控件（例如可见性和加载图像）。不抛出异常 ( `checkforillegalcrossthread...=false`)。`application.doevent()`但是，在调用之前，更改不适用。如果这还不够，如果`application.doevent()`没有调用，应用程序就会挂起！

我的第一个猜测（你可能也是）是 UI 线程（主线程）很忙，但事实并非如此。它没有任何代码要运行，它在调试期间不运行任何东西，它只是卡在了`Application.run(..)`线上，但是它是创建控件的线程。

任何想法是什么问题？

阅读答案后，我宁愿重新提出我的问题。我怎么知道我的主线程是否确实空闲？我通常做的是在调试期间暂停所有其他线程，切换到我的主线程并查看下一条指令。如果我移动一个步骤时没有任何反应，那么它是空闲的。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:20:48.580

这可能是由于试图从不同的线程更改控件造成的。

您可以通过使用[`Control.BeginInvoke()`](http://msdn.microsoft.com/en-GB/library/system.windows.forms.control.begininvoke.aspx)或[`Control.Invoke()`](http://msdn.microsoft.com/en-gb/library/zyzhdc6b.aspx)运行更新控件的代码来更正它。

例如，`SetLabel()`从单独的线程调用此方法是安全的。它检查[`Control.InvokeRequired`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx)这是否是从 UI 线程以外的线程调用的。如果是，它用于`BeginInvoke()`将委托传递给 UI 线程以执行。

委托采用 lambda 表达式的形式`() => label1.Text = text`，它只是设置标签的文本。它必须包装在[`Action()`](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)委托中才能与`BeginInvoke()`.

```
public void SetLabel(string text)
{
    if (this.InvokeRequired)
    {
        this.BeginInvoke(new Action(() => label1.Text = text));
    }
    else
    {
        label1.Text = text;
    }
} 
```

通常最好使用`BeginInvoke()`而不是`Invoke()` *尽可能*使用，因为它大大减少了死锁的机会。

有关这方面的有趣讨论，请参阅[此博客](http://philosopherdeveloper.wordpress.com/2011/02/20/a-concrete-example-of-how-control-invoke-can-cause-deadlock/)。

# c# - C# xml 文档错误

> ID：15955847
> 
> 赞同：2
> 
> 时间：2013-04-11T18:09:46.877
> 
> 标签：c#, documentation

我正在尝试将文档添加到我的 C# 代码中。但以下给了我一个格式错误的 xml 错误。我知道错误是因为“列表”显示“”。它试图找到“/Display”。但是不会有“/Display”，因为它是我的代码示例的一部分。有人可以帮我弄这个吗？谢谢你。

```
 /// <summary>
    ///   Retrieves a list of <c>Display</c>
    /// </summary>
    /// <example>
    ///   <code>
    ///     List<Display> templates = DisplayManager.GetDisplays();
    ///   </code>
    /// </example> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:11:22.833

将您的代码包装在一个[`CDATA`](http://www.w3schools.com/xml/xml_cdata.asp)块中：

```
///   <code>
///     <![CDATA[
///     List<Display> templates = DisplayManager.GetDisplays();
///     ]]>
///   </code> 
```

或编码尖括号：

```
///   <code>
///     List&lt;Display&gt; templates = DisplayManager.GetDisplays();
///   </code> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:13:27.437

`List{Display}`在 XML 文档中编写是很常见的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:11:33.790

尝试将您的代码内容包装在 CDATA 中

```
<![CDATA[List<Display> templates = DisplayManager.GetDisplays();]]> 
```

> XML 文档中的所有文本都将由解析器解析。
> 
> > 但是解析器将忽略 CDATA 部分中的文本。

# windows-runtime - 如何禁用richeditbox垂直滚动

> ID：15955853
> 
> 赞同：2
> 
> 时间：2013-04-11T18:10:05.837
> 
> 标签：windows-runtime, richedit

我正在使用 RichEditBox 允许用户输入文本（C# Windows 8） 我也允许在屏幕上重新定位 RichEditBox 但是使用触摸屏和手指滚动文本而不是重新定位控件 如果使用鼠标，RichEditBox 会得到在屏幕上重新定位

我试图禁用 RichEditBox 中的文本滚动以消除此问题。试过了

```
ScrollViewer.VerticalScrollModeProperty = ScrollBarVisibility.Disabled; 
```

给出错误：不能将属性或索引器“Windows.UI.Xaml.Controls.ScrollViewer.VerticalScrollModeProperty”分配给——它是只读的

有什么方法可以禁用 RichEditBox 中的文本滚动或任何其他方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T18:22:25.860

让它与禁用滚动查看器模式而不是属性一起工作：

```
<RichEditBox AcceptsReturn="True" IsSpellCheckEnabled="True" 
                         ScrollViewer.VerticalScrollMode="Disabled"
                         ScrollViewer.HorizontalScrollMode="Disabled"
                         TextWrapping="Wrap" IsTapEnabled="True" IsHoldingEnabled="True"
                         IsDoubleTapEnabled="True" IsRightTapEnabled="True"
                         IsReadOnly="False" Height="{Binding Height}" 
                         Width="{Binding Width}" TextAlignment="{Binding TextAlignment}"
                         FontFamily="{Binding FontFamily}" FontSize="{Binding FontSize}"
                         ManipulationMode="All" GotFocus="TextItem_GotFocus" KeyDown="TextItem_KeyDown"                             
                         ManipulationDelta="EditBox_ManipulationDelta"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T23:34:38.987

你有两个问题：

1.  您正在尝试将 VerticalScrollModeProperty 设置为不会更改滚动模式的内容-“ScrollBarVisibility.Disabled”会更改滚动条的可见性，但不会禁用滚动。相反，您需要使用“ScrollMode.Disabled”。

2.  VerticalScrollModeProperty 是一个只能使用 getter (element.getValue(...)) 检索并使用 setter (element.setValue(...)) 更改的属性。某些属性要求您这样做而不是直接访问它们（这是您尝试使用语法 ScrollViewer.VerticalScrollModeProperty = someValue 所做的）。将来，如果您收到上述错误，您的下一步可能是尝试使用 getValue() 和 setValue() 来代替该属性。

所以！如果您想在 C# 方面禁用垂直滚动（就像您在上面尝试做的那样），请使用：

```
editBoxName.setValue(VerticalScrollModeProperty, ScrollMode.Disabled); 
```

如果您在样式表中（如 StandardStyles.xaml）并希望在此处设置此属性而不是通过编程方式进行设置（假设您希望多个 RichEditBox 元素禁用滚动），请尝试以下操作：

```
<Style x:Key="styleName" TargetType="RichEditBox">
    <Setter Property="ScrollViewer.VerticalScrollMode" Value="Disabled" />
    <!-- your other RichEditBox properties can go here, if you'd like -->
</Style> 
```

最后一点 - 如果你走样式表路线，为了让你的 RichEditBox 正确使用该样式（“styleName”），你需要在你实例化你的 RichEditBox 的 XAML 中执行以下操作：

```
<RichEditBox x:Name="myEditBox" Style="{StaticResource ResourceKey=styleName}" /> 
```

# c - @登录C变量声明

> ID：15955856
> 
> 赞同：26
> 
> 时间：2013-04-11T18:10:30.257
> 
> 标签：c, embedded, header-files, pic

我通过 pic1250.h 的名称找到了 PIC 微控制器的头文件，但我无法掌握其中使用的某些语法。

该文件的来源是：

```
/*
 *  Header file for the Microchip 
 *  PIC 12c508 chip 
 *  PIC 12c509 chip
 *  Baseline Microcontrollers
 */

static volatile unsigned char   RTCC    @ 0x01;
static volatile unsigned char   TMR0    @ 0x01;
static volatile unsigned char   PCL @ 0x02;
static volatile unsigned char   STATUS  @ 0x03;
static          unsigned char   FSR @ 0x04;
static volatile unsigned char   OSCCAL  @ 0x05;
static volatile unsigned char   GPIO    @ 0x06;

static          unsigned char control   OPTION  @ 0x00;
static volatile unsigned char control   TRIS    @ 0x06;

/*  STATUS bits */
static bit  GPWUF   @ (unsigned)&STATUS*8+7;
static bit  PA0 @ (unsigned)&STATUS*8+5;
static bit  TO  @ (unsigned)&STATUS*8+4;
static bit  PD  @ (unsigned)&STATUS*8+3;
static bit  ZERO    @ (unsigned)&STATUS*8+2;
static bit  DC  @ (unsigned)&STATUS*8+1;
static bit  CARRY   @ (unsigned)&STATUS*8+0;

/*  OPTION bits */
#define     GPWU    (1<<7)
#define     GPPU    (1<<6)
#define     T0CS    (1<<5)
#define     T0SE    (1<<4)
#define     PSA (1<<3)
#define     PS2 (1<<2)
#define     PS1 (1<<1)
#define     PS0 (1<<0)

/*  OSCCAL bits */
static bit  CAL7    @ (unsigned)&OSCCAL*8+7;
static bit  CAL6    @ (unsigned)&OSCCAL*8+6;
static bit  CAL5    @ (unsigned)&OSCCAL*8+5;
static bit  CAL4    @ (unsigned)&OSCCAL*8+4;

/*  GPIO bits   */
static bit  GP5 @ (unsigned)&GPIO*8+5;
static bit  GP4 @ (unsigned)&GPIO*8+4;
static bit  GP3 @ (unsigned)&GPIO*8+3;
static bit  GP2 @ (unsigned)&GPIO*8+2;
static bit  GP1 @ (unsigned)&GPIO*8+1;
static bit  GP0 @ (unsigned)&GPIO*8+0;

#define CONFIG_ADDR 0xFFF
#define FOSC0       0x01
#define FOSC1       0x02
#define WDTE        0x04
#define CP      0x08
#define MCLRE       0x0F 
```

我无法理解整个 modifer-datatype @ declaration-something。有人可以帮我吗？我只是这方面的新手。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-11T18:22:24.997

这是一个编译器扩展。

来自 PIC [MPLAB XC8](http://pic-lab.com/cpu-reference/xc8_compiler_user_guide.pdf)编译器文档（重点是我的）：

> 5.5.4 绝对变量
> 
> **大多数变量可以通过在其声明之后使用构造 @address**来定位在绝对地址，其中 address 是要定位变量的内存位置。这样的变量称为绝对变量。
> 
> 5.5.4.1 数据存储器中的绝对变量
> 
> 绝对变量主要用于将 C 标识符的地址与特殊功能寄存器相等，但可用于将普通变量放置在数据存储器中的绝对地址处。
> 
> 例如：
> 
> **volatile unsigned char Portvar @ 0x06;**
> 
> 将在数据存储器的 06h 处声明一个名为 Portvar 的变量。编译器将为此对象保留存储空间（如果地址落入通用 RAM）并将变量的标识符等同于该地址。

请注意，MPLAB XC8 并不是唯一具有相同`@`结构来将对象放置在特定内存位置的编译器。

另一个著名的编译器是 Freescale CodeWarrior（至少对于 HCS08）。

另一个是 IAR C 编译器（至少对于 MSP430 和 AVR）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-11T18:13:59.603

它是 PIC 编译器中的扩展，用于将变量放置在特定的内存位置。我知道没有其他编译器具有该扩展名。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-12T06:57:46.630

除了已经说过的，请注意非标准`@`运算符是一个多余的功能。您可以使用标准 C 实现完全相同的行为：

```
#define RTCC (*(volatile uint8_t*)0x0001u) 
```

由于本例中的变量是硬件寄存器，因此您无需担心分配问题，它们已经存在于硬件中。如果您想在自定义地址分配变量，则应该有某种类型的链接器文件来解决该问题（因为 @ 运算符仅解决变量的特定分配，而不是代码）。

很多嵌入式编译器想出一些非标准的操作符之类`@`的主要原因是因为他们在设计调试器时不能跳出框框思考。他们希望在提供给调试器的目标文件中存在某种变量，但是如果您使用#define，则不会分配这样的“调试信息对象”。

如果调试器改为查看源代码，或者更好的是，内置了 MCU 感知，那么就不需要像这样的非标准代码。仅专注于调试器的公司提供的高质量工具总是带有用于查看寄存器映射的内置支持。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-26T06:10:10.843

一个简短的扩展：

自 xc8 2.0 及更高版本以来，这不再有效。你现在必须写：

```
unsigned char a __at(0x025); 
```

将变量 ( `a`) 放在绝对地址 ( `0x025`) 上。

对于 XC8 2.0，如果您将编译器设置设置为使用“C90”格式，则可以使用 @ 语法编译旧代码。设置看起来像这样，它在“XC8 Global Options”下，被称为“C标准”。

# java - Jaxb 给我 java.lang,IllegalArgumentException uri 可能不是 Tomcat 和 WebLogic 服务器中的空字符串

> ID：15955866
> 
> 赞同：0
> 
> 时间：2013-04-11T18:11:22.580
> 
> 标签：java, jaxb, axis2

我已经使用 jaxb 创建了 xsd，在 xsd 的帮助下创建了 wsdl。它在 Jboss 服务器中工作正常。但不适用于 WebLogic 和 Tomcat 服务器。在 soapui 中发送请求时，它会给出这样的响应

“java.lang.IllegalArgumentException uri 可能不是空字符串”

# java - 在android中显示区域字符

> ID：15955872
> 
> 赞同：1
> 
> 时间：2013-04-11T18:11:25.953
> 
> 标签：java, android, char, toast

我有方法：

```
public boolean dispatchKeyEvent(KeyEvent event) 
{
    Toast.makeText(getApplicationContext(),String.valueOf(event.getCharacters()), Toast.LENGTH_SHORT).show();
    ShowKeyboardSystem(false);
    Find(event.getCharacters());
    return true;
} 
```

不幸的是，吐司确实显示了区域字符。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:41:46.203

您可以显示自定义 toast，并为 toast 中的文本设置字体。我已经下载了 kn.ttf（kannada 的字体，这是我居住的本地语言），并将其放在 assests 文件夹中，如下图所示。

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
    >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

 </LinearLayout> 
```

定制烤面包

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/toast_layout_root"
          android:orientation="horizontal"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:padding="8dp"
          android:background="#DAAA"
          >
 <TextView android:id="@+id/text"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:textColor="#FFF"
          />
 </LinearLayout> 
```

编码：

```
public class MainActivity extends Activity {

private TextView myTextView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button b= (Button) findViewById(R.id.button1);
    b.setOnClickListener( new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            LayoutInflater inflater = getLayoutInflater();
            View layout = inflater.inflate(R.layout.custom,
                                           (ViewGroup) findViewById(R.id.toast_layout_root));

            TextView text = (TextView) layout.findViewById(R.id.text);
            text.setTextColor(Color.RED);
            text.setText("This is a custom toast");
            Typeface typeFace = Typeface.createFromAsset(getAssets(),"fonts/kn.ttf");
            text.setTypeface(typeFace);
            Toast toast = new Toast(getApplicationContext());
            toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
            toast.setDuration(Toast.LENGTH_LONG);
            toast.setView(layout);
            toast.show();
        }

    });

}
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/Afk8n.png)

# javascript - 分配给 JS 对象的 Javascript Dom 元素 ID？我是疯了还是……？

> ID：15955873
> 
> 赞同：3
> 
> 时间：2013-04-11T18:11:33.180
> 
> 标签：javascript, jquery, html, object, variable-assignment

好吧，所以我最近一直在调试我们的应用程序在一些移动浏览器上的 JS 问题，解决方案给我的启示似乎完全是疯狂的：

我的问题是，在普通的 android 浏览器和 iOS Safari（没有其他地方）上，当我在对象上调用函数时，它会返回一个错误，即该对象没有这样的函数。我想，标准错误......除了我之前明确定义了该对象和函数 - 作为一个伪命名空间，如

```
 var varname = varname || { ... } 
```

现在，'varname' 作为 JS 对象之前没有被创建，所以 || 只是为了安全，因为这些插件被称为一堆......但在某种程度上我无法解释，`<section>`来自页面前面的一个 id="varname" 已经在那个 js 对象中。

这怎么可能？也许只是太晚了，我忽略了一些东西，但看起来我的 HtmlElements 被分配给 id 作为 var 名称的 javascript 对象。

我只写了 3.5 年的 js 代码，但要么我发现了一些奇怪的错误，要么不得不认真重新评估我对 JS 的了解。

这是任何怀疑者的确切代码（JSTL 提供了部分 ID，但我认为这与它没有任何关系）：

```
 <section id="attr<c:out value="${thisFieldAndAttrs.id}" />" class="attr"> ... 
```

几百行之后（但没有提到任何 attr###），我去创建一个对象：

```
 var attr<c:out value="${thisFieldAndAttrs.id}"/> = attr<c:out value="${thisFieldAndAttrs.id}"/> || { ... 
```

`<section>`并且对象已经存在，作为HTMLElement的一个实例。这发生在所有浏览器上，但较新的浏览器似乎知道足以覆盖对象（？）。我拥有的唯一外部脚本是 JQuery，据我所知，如果您可以在 Javascript 中通过它们的 ID 引用 HTMLElements，那会不会首先消除使用 JQuery 的很多便利？我查看了他们的文档，找不到任何提到这一点的地方。

这是一个错误吗？或者只是非常意想不到的功能？或者我在这里错过了什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T18:16:35.140

在某些浏览器（全部？）中，具有 ID 的元素将自动在具有所述 ID 的窗口上生成属性。但是，如果您声明变量，它应该覆盖它，但这几乎破坏了您正在做的事情。如果它需要对其他脚本可用，我建议直接在窗口上声明它。

```
<div id="section"></div>
<script>
    console.log(section); // div element
    (function(){
        var section = section || {};
        console.log(section); // object

        window.section = section;
    })();
    console.log(section); // object
</script> 
```

[http://jsfiddle.net/8u8sn/3/](http://jsfiddle.net/8u8sn/3/)

# asp.net - 在运行时添加RequiredFieldValidator

> ID：15955876
> 
> 赞同：0
> 
> 时间：2013-04-11T18:11:34.287
> 
> 标签：asp.net, requiredfieldvalidator

我正在向页面以及控件添加`RequiredFieldValidator`控件，但是出了点问题。

```
 int i = 4; // for testing; for now
    // add surname textbox
    PlaceHolderResidents.Controls.Add(new LiteralControl("<div class=\"control-group\">"));

    TextBox tb1 = new TextBox();
    tb1.ID = "LastName" + i;
    tb1.CssClass = "input-xlarge";
    labelLastName.AssociatedControlID = tb1.ID;

    PlaceHolderResidents.Controls.Add(labelLastName);
    PlaceHolderResidents.Controls.Add(new LiteralControl("<div class=\"controls\">"));
    PlaceHolderResidents.Controls.Add(tb1);

    RequiredFieldValidator rfv1 = new RequiredFieldValidator();
    rfv1.ControlToValidate = tb1.ID; // ERROR HERE
    rfv1.ErrorMessage = GetLocalResourceObject("RequiredFieldValidator_LastNameResource.ErrorMessage").ToString();
    PlaceHolderResidents.Controls.Add(rfv1); 
```

我收到一个错误

`System.Web.HttpException: Unable to find control id 'LastName4' referenced by the 'ControlToValidate' property of ''.`

此代码放在 中`Page_Load()`，但我尝试将其放在其他`Page`事件中但没有成功。有任何想法吗？谢谢你。

编辑：本节的完整代码。

```
 PlaceHolderResidents.Controls.Add(new LiteralControl("\n\n<div class=\"control-group\">"));
    Label labelLastName = new Label();
    labelLastName.Text = GetLocalResourceObject("LastNameLabelResource.Text").ToString();
    labelLastName.CssClass = "control-label asterisk";
    TextBox tb1 = new TextBox();
    tb1.ID = "LastName" + i;
    tb1.CssClass = "input-xlarge";
    labelLastName.AssociatedControlID = tb1.ID;
    PlaceHolderResidents.Controls.Add(labelLastName);
    PlaceHolderResidents.Controls.Add(new LiteralControl("\n<div class=\"controls\">"));
    PlaceHolderResidents.Controls.Add(tb1);
    PlaceHolderResidents.Controls.Add(new LiteralControl("\n<p class=\"help-block\">"));
    RequiredFieldValidator rfv1 = new RequiredFieldValidator();
    rfv1.ControlToValidate = tb1.ID;
    rfv1.ErrorMessage = GetLocalResourceObject("RequiredFieldValidator_LastNameResource.ErrorMessage").ToString();
    rfv1.EnableClientScript = false;
    PlaceHolderResidents.Controls.Add(rfv1);
    PlaceHolderResidents.Controls.Add(new LiteralControl("\n</p></div></div>")); 
```

有趣的是，我在页面上有更多这些验证器，而且它们中的大多数都在工作。如果我注释掉页面上许多验证器上方的代码（由于`RequiredFieldValidator`某种原因，另一个验证器会给出相同的错误）。

编辑2：上面的代码有效。不知道出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:16:35.087

据我所知，您无法直接访问它。您可能必须使用“FindControl()”方法，如下所示。

```
RequiredFieldValidator rfv1 = new RequiredFieldValidator();
rfv1.ControlToValidate = PlaceHolderResidents.FindControl(tb1.ID); 
```

希望这可以帮助！！

# c# - Windows 窗体中简单的类似表格的视觉外观（c#）

> ID：15955878
> 
> 赞同：3
> 
> 时间：2013-04-11T18:11:41.950
> 
> 标签：c#, tablelayoutpanel

我目前正在开发一个应用程序，它读取一个包含一些字段的 XML 文件，这些字段告诉我什么样的控件等。我想（动态地）加载。然后它会创建这些控件并将它们添加到 TableLayoutPanel 中。

但是，由于我不需要 Columns （我很确定，这不会改变）并且由于动态删除/添加行到 TableLayoutPanel 很麻烦，我想知道是否有免费或付费的替代方案控制板。

另外：这让我很困扰，我无法设置整个面板的 BorderStyle（由于某种原因 BorderStyle 不可访问）。

那么有谁知道替代方案（适用于 Windows 窗体）？在 Java 中，我可能会使用 GridBagLayout（它也比 TableLayoutPanel 更简单），但似乎没有比 TableLayoutPanel 更好的替代品（或者我还没有找到）。

非常感谢您提前。如果您需要任何进一步的信息，请随时询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:14:16.723

那么你可以使用[DataGridView](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)。您可以更改边框样式和颜色。看看[这篇文章](http://msdn.microsoft.com/en-us/library/ehz9ksfa.aspx)。

此外，这是另一个看起来很简单的[网格控件，可以满足您的需求。](http://www.codeproject.com/Articles/5462/C-grid-control)

# c# - HasMorePages 不工作。设置该位会导致在同一页上打印所有项目

> ID：15955881
> 
> 赞同：2
> 
> 时间：2013-04-11T18:11:56.153
> 
> 标签：c#, winforms, printing

当我尝试使用下面的代码打印预览时，它会在之前打印的项目上打印项目。当我将`if`块放在`for`循环之外时，它开始生成一个无限页面。

```
private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
{    
    SolidBrush brush = new SolidBrush(Color.Black);
    Font font = new Font("Courier New", 12);

    float fontHeight = font.GetHeight();
    int startX = 40;
    int startY = 30;
    int lineperpage = 0;

    for (int i = 0; i < 100; i++)
    {
        e.Graphics.DrawString("Line: " + i, font, brush, startX, startY);
        startY += font.Height;
        lineperpage++;

        if (lineperpage > 50)
        {
            e.HasMorePages = true;
            startY = 30;
            lineperpage = 0;
            startX = 300;
        }
        else
        {
            e.HasMorePages = false;
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-03T12:08:41.583

您必须将要打印的*数据与单页的实际绘图分开。*您不能以相同的方法使用它们。将 HasMorePages 设置为 true 只会向 PrintMangager 发出`PrintPage`再次引发事件的信号。

`i`在您的情况下，您的变量看起来像是数据。您需要在 PrintPage 事件之外跟踪其进度。

```
int i = 0;  // keep track of data in an instance variable 

// this event is re-entrant. It will be called as long as HasMorePages = true;
private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
{    
    SolidBrush brush = new SolidBrush(Color.Black);
    Font font = new Font("Courier New", 12);

    float fontHeight = font.GetHeight();
    int startX = 40;
    int startY = 30;
    int lineperpage = 0;

    // removed
    //for (int i = 0; i < 100; i++)
    // print a page as long as their is space left AND data available
    while (lineperpage < 50 && i < 100)
    {
        e.Graphics.DrawString("Line: " + i, font, brush, startX, startY);
        startY += font.Height;
        lineperpage++;

        i++;  // next dataitem
    }

    e.HasMorePages = i < 100; // keep printing as long as there is date 
} 
```

# wpf - “'MainViewModel' 类型必须派生自 DependencyObject”

> ID：15955882
> 
> 赞同：1
> 
> 时间：2013-04-11T18:11:57.490
> 
> 标签：wpf, mvvm-light

我正在尝试为 MVVMLight WPF 重新配置我的 MVVMLight SL5 应用程序。
我想我已经连接了所有正确的 GalaSoft 库，但是在启动时我得到了标题中显示的异常。
在获取 MainPage 的 ViewModel 时，它会在 ViewModelLocator 中发生：

```
 public MainViewModel Main
    {
        get
        {
            MainViewModel mvm = null;
            try
            {
                mvm = ServiceLocator.Current.GetInstance<MainViewModel>();
            }
            catch (Exception xx)
            {
                System.Diagnostics.Debug.WriteLine(xx.Message);
            }
            return mvm;
        }
    } 
```

异常来自 GetInstance() 调用。
MainPage 派生自 Window；DataContext 在 xaml 中设置。

```
 DataContext="{Binding Main, Source={StaticResource Locator}}" 
```

任何关于出现问题的提示将不胜感激......（针对.Net 4.5，GalaSoft WPF4 libs v4.0.30319）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T14:20:15.933

注册依赖属性时，`ownerType`必须继承自`DependencyObject`，而 MainViewModel 不会。

但是，鉴于您使用的是 MVVM Light 并且该属性称为“用户名”，我建议您根本不使用依赖属性。而是使用带有 INotifyPropertyChanged 的​​常规属性。`ViewModelBase`MVVM 中的灯必须`RaisePropertyChanged`帮助您解决这个问题。

依赖属性通常用于用户控件。对于绑定到视图模型的数据，INPC 通常是要走的路。

# php - 线程对象和工作对象（php pthreads）有什么区别

> ID：15955886
> 
> 赞同：4
> 
> 时间：2013-04-11T18:12:09.817
> 
> 标签：php, multithreading, pthreads

到目前为止，我发现的唯一解释是：http: [//pthreads.org](http://pthreads.org)

但这在代码方面意味着什么？我应该什么时候使用 Worker(s)，我应该在哪里使用 Threads？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T18:41:50.613

它们都是线程，但是，线程旨在执行一项任务（在其运行方法中定义）然后退出。Worker 旨在等待任务，以 Stackable 派生对象的形式，实现它们自己的运行方法，并按照它们插入的顺序从堆栈中执行它们。

通过这种方式，Worker 允许您重用上下文，它们提供了一种在用户空间中很难编程的高效方法，但没有什么不可能的。

# c# - 有没有办法根据 WCF 请求获取用户的时区偏移量？

> ID：15955887
> 
> 赞同：0
> 
> 时间：2013-04-11T18:12:11.960
> 
> 标签：c#, wcf

我有一个 WCF 操作（我们称之为**GetItems**），响应是具有数据类型 DateTime的*TimeTaken属性的项目列表。*每个项目的*TimeTaken*都以 UTC 格式存储在我们的数据库中。我试图做的是将*TimeTaken*从 UTC 转换为请求者的时区。

向 WCF 发出的请求是否包含请求者的时区？

提前致谢。

# python - AS3 和 python 中的防火墙和套接字数据

> ID：15955888
> 
> 赞同：1
> 
> 时间：2013-04-11T18:12:18.303
> 
> 标签：python, actionscript-3, sockets

我正在构建一个服务，其中记录在 flash 客户端中的麦克风数据被发送到处理它的 python 服务器。我为此使用了自定义协议，并且一切正常。

但是，在企业网络中，防火墙通常会阻止从客户端到服务器的连接，即使它发生在标准的“网络”端口（如 80 和 443）上。我想这与这些防火墙检测到数据的事实有关不遵循 HTTP 协议。

我可以解决这个问题吗？

# c# - 在 C#.NET 中运行 SVN 更新的最快方法

> ID：15955894
> 
> 赞同：1
> 
> 时间：2013-04-11T18:12:46.920
> 
> 标签：c#, svn

我正在尝试使用 C# 运行 SVN 更新。我知道几种方法可以做到这一点，但我不知道哪种方法最好。

现在，我将从定义最佳开始：我正在寻找一种不关心 CPU 使用率、带宽或 RAM 使用率的方法（我将在 VPS 上运行它，所以这些通常都很关键，但在这种情况下，我将在我的游戏服务器关闭时运行该操作）。我基本上是在寻找最快的方法。IE 从开始到结束花费的时间最少。

我知道的方法是：

从我的控制台应用程序运行 .bat 文件作为进程。使用 StartParameters 运行命令以更改目录并更新存储库。创建或下载允许我在应用程序内部运行 SVN 查询的库。

现在，我不知道做第三个有多容易，而且我不是 C# 专家，只是一个有一点空闲时间的爱好者。到目前为止，我的代码如下所示：

```
class ServerLoader
{
    public static Process TFS = new Process();
    static void Main(string[] args)
    {
        Console.WriteLine("Welcome to XtrmJosh's control centre for TFS Console.");
        // Function generate processes
        Init();

        // Function begin process
        RunServer();

        string userInput = Console.ReadLine();
        if (userInput == "r,0")
        {
            StopServer();
            Init();
            RunServer();
        }
        else if (userInput == "s,0")
        {
            StopServer();
        }
        else if (userInput == "st,0")
        {
            Init();
            RunServer();
        }
        else if (userInput == "u,0")
        {
            StopServer();
            UpdateSVN();
            RunServer();
        }

    }

    static void UpdateSVN()
    {

    }

    static void Init()
    {
        //Initialise the TFS process
        Console.WriteLine("Initialising Process");
        TFS.StartInfo.FileName = "tfs.exe";
        Console.WriteLine("Preventing window creation");
        TFS.StartInfo.CreateNoWindow = true;
        Console.WriteLine("Redirecting Output");
        TFS.StartInfo.RedirectStandardOutput = true;
        Console.WriteLine("Stopping shell execution");
        TFS.StartInfo.UseShellExecute = false;
    }

    static void RunServer()
    {
        Console.WriteLine("Running Server");
        TFS.Start();
    }

    static void StopServer()
    {
        Console.WriteLine("Closing Process");
        TFS.Close();
        Console.WriteLine("Releasing Resources");
        TFS.Dispose();
    }
} 
```

再往下看，我认为很明显我打算在这段代码中添加一个 TCP 服务器，它将监听列出的命令并对其进行操作。我有很多编写 TCP 服务器应用程序的练习，所以我不应该为此而苦恼，但这确实引发了如何处理某些事情的问题，当然知道我无论如何都会联网可能很有用，所以如果我正在联网，则仅使用库来更新存储库可能会更简单。

我也会把它放在那里，你认为哪个 SVN 客户端对于这种工作最稳定，如果它们都同样稳定，那么哪个会最快地完成这个动作？仅供参考，我只更新 3 个文件，2 个是小型 XML 文档，1 个是基于图形的大型文档，大小约为 3MB，很快就会增长到 10MB 以上，所以速度有点关键，尤其是我运行游戏服务器，我希望尽可能减少停机时间......

谢谢

# sqlite - sqlite jdbc 结果集最后

> ID：15955906
> 
> 赞同：0
> 
> 时间：2013-04-11T18:13:22.143
> 
> 标签：sqlite, jdbc

我有一个使用 SQLite JDBC 的应用程序。我有个问题。我需要执行以下代码：

```
resultset.last();
int rows = resultset.getRow();
resultset.beforeFirst(); 
```

当我执行 beforeFirst 方法时，我得到一个错误，大意是我不能向后定位。我该如何解决这个问题？有什么方法可以更改我的查询，以便可以将位置移回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:12:49.213

SQLite 即时计算结果记录；结果集永远不会作为完整的数据结构存在。

`SELECT COUNT(...) FROM ...`您可以执行两次查询，或将所有记录读入临时列表，或事先执行单独的查询。

# iphone - 将英寸转换为厘米，反之亦然

> ID：15955914
> 
> 赞同：1
> 
> 时间：2013-04-11T18:13:35.897
> 
> 标签：iphone, objective-c, cocoa

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:31:25.497

The problem occurs because you use pointers in `NSInteger` and `float`. I have modified your method with the implementation for both cm and inches, as follows:

```
- (NSString *)returnRightMetric:(NSString *)theMeasure typeOfMetricUsed:(NSString *)metricType
{
    NSString *result = nil;

    if ([metricType isEqualToString:@"inches"]) {
        NSArray* theConvertion = [theMeasure componentsSeparatedByCharactersInSet:
                                  [NSCharacterSet characterSetWithCharactersInString:@"’”"]];
        NSInteger value1 = [theConvertion[0] intValue];
        NSInteger value2 = [theConvertion[1] intValue];

        float number = ((value1 * 12) + value2) * 2.54;
        result = [NSString stringWithFormat:@"%.02f cm", round(number * 100.0) / 100.0];

    } else if ([metricType isEqualToString:@"cm"]) {
        float value = [theMeasure floatValue];
        float number = value / 2.54;

        if (number > 12.0) {
            result = [NSString stringWithFormat:@"%i’%i”", (int)floor(number / 12.0), (int)number % 12];

        } else {
            result = [NSString stringWithFormat:@"0’%i”", (int)round(number)];
        }

    }

    NSLog(@"result: %@", result);
    return result;
} 
```

Some Test:

```
[self returnRightMetric:@"5’11”" typeOfMetricUsed:@"inches"];
[self returnRightMetric:@"180.34 cm" typeOfMetricUsed:@"cm"];
[self returnRightMetric:@"0’11”" typeOfMetricUsed:@"inches"];
[self returnRightMetric:@"27.94 cm" typeOfMetricUsed:@"cm"]; 
```

The output:

```
result: 180.34 cm
result: 5’11”
result: 27.94 cm
result: 0’11” 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:18:41.300

```
NSArray* theConvertion = [theMeasure componentsSeparatedByCharactersInSet:
                          [NSCharacterSet characterSetWithCharactersInString:@"’”"]];
int value1 = [theConvertion[0] intValue];
int value2 = [theConvertion[1] intValue];

float number = ((value1 * 12) + value2) * 2.54;
NSString *formattedNumber = [NSString stringWithFormat:@"%.02f", (number/100)]; 
```

So in short you need to know the difference between native/primitive type's and reference types (type that use pointers this character --> *. This might help [Link](http://bencoffman.com/blog/2010/06/12/WhenToUseTheStarWithObjectiveC.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-04T13:13:58.843

After some testings from the last answer(from tolgamorf) here is the final version. To me it works perfectly.

```
- (NSString *)returnRightMetric:(NSString *)theMeasure typeOfMetricUsed:(NSString *)metricType
{
    NSString *result = nil;

    if ([metricType isEqualToString:@"inches"]) {  
        if ([theMeasure isEqualToString:@""]) {
            return @"0";
        }
        NSArray* theConvertion = [theMeasure componentsSeparatedByCharactersInSet:
                                  [NSCharacterSet characterSetWithCharactersInString:@"’”"]];
        NSInteger value1 = [theConvertion[0] intValue];
        NSInteger value2 = [theConvertion[1] intValue];

        float number = ((value1 * 12) + value2) * 2.54;
        result = [NSString stringWithFormat:@"%.0f cm", round(number * 100.0) / 100.0];

    } else if ([metricType isEqualToString:@"cm"]) {
        float value = [theMeasure floatValue];
        float number = value / 2.54;

        if (roundf( number) >= 12.0) {
            if ((int)round( number) % 12==0) {
                result = [NSString stringWithFormat:@"%i’%i”", (int)roundf(number / 12.0), (int)round( number) % 12];
            }else{
                result = [NSString stringWithFormat:@"%i’%i”", (int)floorf(number / 12.0), (int)round( number) % 12];
            }
        } else {
            result = [NSString stringWithFormat:@"0’%i”", (int)round(number)];
        }
    }
    NSLog(@"result: %@", result);
    return result;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-28T14:07:31.510

For today we have useful API from HealthKit:

```
let cm_q = HKQuantity(unit: HKUnit(from: .centimeter), doubleValue: 180)
var inch_string = h_formatter.string(fromMeters: cm_q.doubleValue(for: HKUnit.meter()))

var inches_double = cm_q.doubleValue(for: HKUnit.inch())
let inch_q = HKQuantity(unit: HKUnit(from: .inch), doubleValue: inches_double)
var cm_d = inch_q.doubleValue(for: HKUnit(from: .centimeter))
var string = h_formatter.string(fromValue: cm_d, unit: .centimeter) 
```

Just copy to Playground and play converting of values from cm to inches and back. The formatter configuration:

```
let h_formatter = LengthFormatter()
h_formatter.isForPersonHeightUse = true
h_formatter.unitStyle = .short 
```

In the result we have:

180cm -> "5′ 10.866″" and back to 180cm

I hope it'll help.

# c - 语言 C，算法在 LINUX 上运行良好，而不是在 Windows 7 上运行良好？

> ID：15955920
> 
> 赞同：-3
> 
> 时间：2013-04-11T18:14:01.147
> 
> 标签：c, pointers, linked-list

所以，伙计们，我试图在 C 中实现一个链表算法，这是代码：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct lista{
int info;
struct lista *next;
} *aplinked, strulinked;

aplinked insereNoFim(aplinked inicio, aplinked novo)
{
aplinked temp;
if (inicio == NULL)
    inicio = novo;
else{
    temp = inicio;
    while (temp->next != NULL)
        temp=temp->next;
    temp->next = novo;
}
return inicio;

}

aplinked lenovo()
{
aplinked x;
x = (aplinked) malloc (sizeof(strulinked));
scanf ("%d", &x->info);
return x;
}

void exibe(aplinked inicio){
aplinked temp = inicio;
if (temp == NULL)
printf ("Não existe dados");
else
while (temp!=NULL){
printf ("\n info: %d \n", temp->info);
temp = temp->next;
}
}

aplinked remover(aplinked inicio, int x)
{
aplinked ant = NULL;
aplinked temp = inicio;
//procura o elemento na lista, guardando o anterior.
while (temp!=NULL && temp->info != x){
        ant = temp;
        temp = temp->next;
}
//verifica se achou
if (temp == NULL)
    return inicio; //no caso de não achar
if (ant == NULL)
    inicio = temp->next; //retirar o 1o elemento
else
    ant->next = temp->next;
free (temp);
return inicio;
}

int pesquisa (aplinked inicio, int x){
aplinked temp = inicio;
while (temp!=NULL){
    if (temp->info == x)
        return 1;
    temp = temp->next;
    }
return 0;
}

int main ()
{
int cont = 1;
aplinked inicio = NULL;
while (cont){
inicio = insereNoFim(inicio, lenovo());
scanf ("%d", &cont);
}
exibe(inicio);
printf ("Digite numero a ser pesquisado: \n");
scanf ("%d", &cont);
if (pesquisa (inicio, cont))
    printf ("achou o elemento buscado \n");
else
    printf ("não achou");

printf ("Digite elemento a ser removido: \n");
scanf ("%d", &cont);
inicio = remover (inicio, cont);
exibe (inicio);
} 
```

是的，代码不是英文的，但你可能知道它是关于什么的，所以，一个链表，删除/插入/搜索/打印功能，在 linux 上运行良好，但在 windows 上运行不正常！ ！

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:26:58.200

我强烈建议您学习如何使用调试器。这是你的问题：

```
aplinked temp;
if (inicio == NULL)
    inicio = novo;
else{
    temp = inicio;
    while (temp->next != NULL)  //  you never set this to NULL
        temp=temp->next; 
```

因为你从来没有明确设置`temp->next`它`NULL`可能有任何东西。显然在Linux上它是NULL（你很幸运）而在Windows上它只是垃圾......`junk != NULL`所以它试图设置和取消引用它然后你崩溃了。

您应该在函数中填写结构的*所有*元素`lenovo()`，而不仅仅是`info`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:26:28.040

当你分配一个新节点时，你不会初始化它的`next`指针。这意味着它将指向一个看似随机的位置，并且当您尝试查找列表的末尾时，它将继续在实际末尾循环。

# c# - 无法将对象绑定到 ListBox

> ID：15955921
> 
> 赞同：0
> 
> 时间：2013-04-11T18:14:09.273
> 
> 标签：c#, wpf, xaml, binding, listbox

无法将对象绑定到`ListBox`。数据在那里我猜它是关于`Binding`.

有什么线索吗？

**C＃**

```
 public sealed class Package
    {
        public Guid ID { get; set; }

        public string FileName { get; set; }

        public List<PackageItem> PackageItems { set; get; }
    }

    public sealed class PackageItem
    {
        public Guid ID { get; set; }

        public string FileName { get; set; }

        public PackageItemTypes PackageItemType { get; set; }
    }

private ObservableCollection<Package> availablePackages;

 lbPackageList.Dispatcher.BeginInvoke((Action)(() =>
                    {
                        lbPackageList.DataContext = availablePackages;
                    })); 
```

**XAML**

```
<ListBox Name="lbPackageList"
         VerticalAlignment="Stretch"
         HorizontalAlignment="Stretch"
         ScrollViewer.VerticalScrollBarVisibility="Visible">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Horizontal">
        <Label Content="{Binding Path=Package.FileName}" />
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

**错误**

> System.Windows.Data 错误：3：找不到提供 DataContext 的元素。BindingExpression：（无路径）；数据项=空；目标元素是 'Button' (Name=''); 目标属性是“NoTarget”（类型“对象”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:25:16.730

我找到了解决方案

```
 lbPackageList.ItemsSource = availablePackages;

 void engine_PackgesChanged(Models.Package newPackage)
        {
            Debug.WriteLine("There is a new package here " + newPackage.FileName);

            try
            {
                lbPackageList.Dispatcher.BeginInvoke((Action)(() =>
                   {
                       if (availablePackages.Contains(newPackage) == false)
                       {
                           availablePackages.Add(newPackage);
                       }
                   }));
            }
            catch (Exception)
            {
                // 
            }
        } 
```

# vba - 在 Excel 宏中指定工作表中的单元格

> ID：15955923
> 
> 赞同：1
> 
> 时间：2013-04-11T18:14:13.087
> 
> 标签：vba, excel

我正在编写一个 Excel 宏，并有一个如下所示的部分，其中我浏览了名为“daf”的工作表中的一列，并将其与另一个工作表中的单元格进行比较：

```
For i = 2 To 75
    If Range("the daf!C" + Trim(Str(i))) = Range("scratchpad!Q30") Then
        notes = notes + Range("scratchpad!P30")
        Exit For
    End If
Next 
```

问题是它会产生“#Value！”的结果。问题似乎是我在工作表名称中有一个空格，因为当我将“daf”替换为“scratchpad”时，它不会产生错误。如果我所说的是正确的，那么当工作表的名称包含空格时，如何引用工作表中的单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:18:55.687

采用

```
Sheets("the daf").Range("C" & i) 
```

代替

```
Range("the daf!C" + Trim(Str(i))) 
```

例子：

`If Sheets("the daf").Range("C" & i).Value = Sheets("scratchpad").Range("Q30").Value Then`

**编辑**

如果您仍然想使用您正在使用的方法，那么试试这个

```
Range("'the" & " " & "daf'!C" & i) 
```

# android - Android 制作简单的 BMI 应用程序崩溃

> ID：15955930
> 
> 赞同：0
> 
> 时间：2013-04-11T18:14:58.100
> 
> 标签：android, sdk, crash

我正在开发一个简单的 BMI 应用程序，但我不知道当我启动它崩溃的应用程序时发生了什么。

文件名：MainActivity.java

```
package com.achkars.myownbmi;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void calculate(View v){
        EditText number1text=(EditText)findViewById(R.id.num1text);
        EditText number2text=(EditText)findViewById(R.id.num2text);
        Integer num1=Integer.parseInt(number1text.getText().toString()),num2=Integer.parseInt(number2text.getText().toString());
        Integer ans=(num2/(num1*num1))*10000;

        TextView answer=(TextView)findViewById(R.id.answertxt);
        answer.setText("Your BMI is:"+ans.toString());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

文件名：activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@style/AppTheme"
    tools:context=".MainActivity" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@android:drawable/screen_background_light" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="32dp"
        android:layout_height="32dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@android:drawable/screen_background_dark_transparent"
         />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/wtw"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/imageView2"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/tocalc"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/num1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/yh"
            android:textColor="#000000" />

        <EditText
            android:id="@+id/num1text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/Here"
            android:text="@string/text1" >

            <requestFocus />
        </EditText>

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/ywer"
            android:textColor="#000000" />

        <EditText
            android:id="@+id/num2text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/Here" />

        <Button
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/calc"
            android:onClick="calculate" />

        <TextView
            android:id="@+id/answertxt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/aaa"
            android:textColor="#000000" />

    </LinearLayout>

</RelativeLayout> 
```

文件名：AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.achkars.myownbmi"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        >
        <activity
            android:name="com.achkars.myownbmi.MainActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
            android:noHistory="true"
            >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

感谢您的任何帮助。

日志猫：

```
04-11 18:28:16.713: W/Trace(799): Unexpected value from nativeGetEnabledTags: 0
04-11 18:28:16.733: W/Trace(799): Unexpected value from nativeGetEnabledTags: 0
04-11 18:28:16.943: D/AndroidRuntime(799): Shutting down VM
04-11 18:28:16.973: W/dalvikvm(799): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
04-11 18:28:17.023: E/AndroidRuntime(799): FATAL EXCEPTION: main
04-11 18:28:17.023: E/AndroidRuntime(799): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.achkars.myownbmi/com.achkars.myownbmi.MainActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.os.Looper.loop(Looper.java:137)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.app.ActivityThread.main(ActivityThread.java:5039)
04-11 18:28:17.023: E/AndroidRuntime(799):  at java.lang.reflect.Method.invokeNative(Native Method)
04-11 18:28:17.023: E/AndroidRuntime(799):  at java.lang.reflect.Method.invoke(Method.java:511)
04-11 18:28:17.023: E/AndroidRuntime(799):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-11 18:28:17.023: E/AndroidRuntime(799):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-11 18:28:17.023: E/AndroidRuntime(799):  at dalvik.system.NativeStart.main(Native Method)
04-11 18:28:17.023: E/AndroidRuntime(799): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.view.LayoutInflater.createView(LayoutInflater.java:613)
04-11 18:28:17.023: E/AndroidRuntime(799):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-11 18:28:17.023: E/AndroidRuntime(799):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.app.Activity.setContentView(Activity.java:1881)
04-11 18:28:17.023: E/AndroidRuntime(799):  at com.achkars.myownbmi.MainActivity.onCreate(MainActivity.java:15)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.app.Activity.performCreate(Activity.java:5104)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-11 18:28:17.023: E/AndroidRuntime(799):  ... 11 more
04-11 18:28:17.023: E/AndroidRuntime(799): Caused by: java.lang.reflect.InvocationTargetException
04-11 18:28:17.023: E/AndroidRuntime(799):  at java.lang.reflect.Constructor.constructNative(Native Method)
04-11 18:28:17.023: E/AndroidRuntime(799):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.view.LayoutInflater.createView(LayoutInflater.java:587)
04-11 18:28:17.023: E/AndroidRuntime(799):  ... 23 more
04-11 18:28:17.023: E/AndroidRuntime(799): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f050001 a=-1 r=0x7f050001}
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.content.res.Resources.loadDrawable(Resources.java:1927)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.view.View.<init>(View.java:3328)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.view.View.<init>(View.java:3257)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.view.ViewGroup.<init>(ViewGroup.java:425)
04-11 18:28:17.023: E/AndroidRuntime(799):  at android.widget.RelativeLayout.<init>(RelativeLayout.java:210)
04-11 18:28:17.023: E/AndroidRuntime(799):  ... 26 more 
```

添加了 LogCat。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:42:11.453

对于您的 ImageView，将 src 从

```
@android/drawable/... 
```

至

```
@drawable/... 
```

# sql - 加权平均死锁：值取决于值

> ID：15955931
> 
> 赞同：6
> 
> 时间：2013-04-11T18:15:01.223
> 
> 标签：sql, algorithm, sql-server-2008, math

一些背景可以帮助首先解释这个难题：

我有一个数据库，通过将用户提交的值与全球平均值进行比较来估计用户的可靠性。值介于 0 和 1 之间。因此，其中：

*   此特定用户的可靠性 =`r`
*   此特定用户提交值的平均值 =`a`
*   全球，“商定”平均值 =`g`

可靠性：

```
r = 1 - ABS(g - a) 
```

这就是计算每个用户的可靠性的方式。现在，“商定”的全局平均值`g`是使用加权平均值计算的，其中权重为`r`，值为`a`。如果总共有 3 个用户：

```
 g = ((r1 * a1) + (r2 * a2) + (r3 * a3)) / (r1 + r2 + r3) 
```

问题是，一旦用户有了高可靠性，他们就完全垄断了，任何新的价值观都无法改变这一点。举个例子：

```
g was initially 0.5
user1 r was initially 0.5
user2 r was initially 0.5
user3 r was initially 0.5 
```

现在，他们将一一提交值，并观察会发生什么：

```
user1 a is submitted, 1.0
user1 reliability goes slightly down because it differs from g (0.5)
user2 a is submitted, 1.0
user1 and user2 reliability go up to 100%, g is now 1.0.
user3 a is submitted, 0.0
user3 reliability goes down to 0%. g is still 1.0. 
```

由于 user3 的可靠性非常低，因此加权对 没有任何影响`g`。User3 的可靠性下降，因为提交的值与全局平均值完全不同。怎么做才能让 user3 的提交对最终值产生**一些**影响？也许我需要添加一些常数，以便可靠性永远不会完全为零（但接近）？

现在，对于 SQL 代码。我添加了一个演示问题的 SQL 小提琴： [http](http://sqlfiddle.com/#!3/d3fd1/21) ://sqlfiddle.com/#!3/d3fd1/21 我已经抽象了代码以使其保持简短，但它仍然很长。

表创建、存储过程和触发器：

```
-- Stores user info
CREATE TABLE dbo.Users(
    [UserID] [int] NOT NULL,
    [Reliability] [float] NOT NULL
  )

-- Contains global averages from all users who submitted data
CREATE TABLE dbo.GlobalSubmission(
    GlobalSubmissionID  [int] NOT NULL,
    Name [varchar](50) NULL,
    GlobalAverage [float] NOT NULL,
)

CREATE TABLE dbo.UserSubmission(
    SubValue float NOT NULL,
    GlobalSubmissionID int NOT NULL,
    UserID int NOT NULL,
)

GO

--Calculate the "ideal value", used for GlobalSubmission.
CREATE FUNCTION dbo.IdealValueCalc(@globalSubmissionID INT)
RETURNS int
AS
BEGIN

DECLARE @tmpReliability TABLE (SubValue float, Reliability float)

INSERT INTO @tmpReliability
    SELECT AVG(us.SubValue) as SubValue, usr.Reliability Reliability FROM UserSubmission us
    JOIN Users usr 
    ON us.UserID = usr.UserID
    WHERE GlobalSubmissionID = @GlobalSubmissionID
    GROUP BY us.UserID, usr.Reliability

--Perform weighted mean calculations.
Return (SELECT SUM(SubValue * Reliability) / SUM(Reliability) FROM @tmpReliability)
END
go

--Calculate the reliability of one user.
CREATE FUNCTION dbo.GetReliabilityForUser
(@userID int)
Returns Float
AS BEGIN
Return (SELECT 1 - AVG(ABS(db.userAvg - db.GlobalAverage))
    FROM (
      SELECT pmd.UserID,
            gs.GlobalAverage, 
            AVG(pmd.SubValue) as userAvg
      FROM UserSubmission pmd
      -- Joins average value for each user with "ideal" value from GlobalSubmission
      JOIN GlobalSubmission gs 
        ON gs.GlobalSubmissionID = pmd.GlobalSubmissionID
        WHERE pmd.UserID = 1
      GROUP BY pmd.UserID, gs.GlobalSubmissionID, gs.GlobalAverage
     ) db
     GROUP BY db.UserID)
End
go

CREATE TRIGGER trg_SubmissionComputation
ON UserSubmission 
AFTER INSERT, UPDATE
AS BEGIN
    --Calculate this uer's reliability
    DECLARE @userID int = (SELECT TOP(1) UserID FROM inserted)
    DECLARE @userReliability float = dbo.GetReliabilityForUser(@userID)

    UPDATE Users
    SET Reliability=@userReliability
    WHERE UserID = @userID

    --Recalculate globalSubmission values:
    DECLARE @globalSubmissionID int = (SELECT TOP(1) GlobalSubmissionID FROM inserted)
    DECLARE @globalAverage float = dbo.IdealValueCalc(@globalSubmissionID)
        --The global average for this set of submissions has been recalculated. Now inserting:

    UPDATE GlobalSubmission
    SET GlobalAverage = @globalAverage 
    WHERE GlobalSubmissionID = @globalSubmissionID
END
GO 
```

测试它：

```
--Creating 3 new users
INSERT INTO Users
(UserID, Reliability)
values 
(1, 0.5),
(2, 0.5),
(3, 0.5)
GO

--Creating a new GlobalSubmission
INSERT INTO GlobalSubmission
(GlobalSubmissionID, NAME, GlobalAverage)
values (1, 'BOILER2B' , 0.5)
GO

--First, we will submit values of 1 for two users:
INSERT INTO UserSubmission values (1.0, 1, 1); -- Value: 1.0, User 1, Submission 1
GO
INSERT INTO UserSubmission values (1.0, 1, 2); -- Value: 1.0, User 2, Submission 1
GO
INSERT INTO UserSubmission values (1.0, 1, 1); -- Value: 1.0, User 1, Submission 1
GO
INSERT INTO UserSubmission values (1.0, 1, 2); -- Value: 1.0, User 2, Submission 1
GO

--Now, we will submit values of 0 for the third user:
INSERT INTO UserSubmission values (0.0, 1, 3); -- Value: 0.0, User 3, Submission 1
GO
INSERT INTO UserSubmission values (0.0, 1, 3); -- Value: 0.0, User 3, Submission 1
GO

SELECT * FROM Users -- This results in 0% reliability for the last user.

--If we create new users and add them, the reliability won't budge:
INSERT INTO Users
(UserID, Reliability)
values 
(4, 0.5),
(5, 0.5),
(6, 0.5),
(7, 0.5),
(8, 0.5)
GO

INSERT INTO UserSubmission values (0, 1, 4); -- Value: 0, User 4, Submission 1
GO
INSERT INTO UserSubmission values (0, 1, 5); -- Value: 0, User 5, Submission 1
GO
INSERT INTO UserSubmission values (0, 1, 6); -- Value: 0, User 6, Submission 1
GO
INSERT INTO UserSubmission values (0, 1, 7); -- Value: 0, User 7, Submission 1
GO
INSERT INTO UserSubmission values (0, 1, 8); -- Value: 0, User 8, Submission 1
GO
INSERT INTO UserSubmission values (0, 1, 4); -- Value: 0, User 4, Submission 1
GO
INSERT INTO UserSubmission values (0, 1, 5); -- Value: 0, User 5, Submission 1
GO
INSERT INTO UserSubmission values (0, 1, 6); -- Value: 0, User 6, Submission 1
GO
INSERT INTO UserSubmission values (0, 1, 7); -- Value: 0, User 7, Submission 1
GO
INSERT INTO UserSubmission values (0, 1, 8); -- Value: 0, User 8, Submission 1
GO

SELECT * FROM Users -- Even though we've added loads of new users suggesting 0 as value, the final value
-- is remaining 1.0, because when a new value (0) is submitted, it varies too much from the global average
--(1), causing the reliability of that user to go down, and that user ends up making no influence on the
-- global average! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:35:05.527

这是一个替代估计，它仍然有点临时，但不会产生权重 0。

1）为每个用户产生一个指数衰减的平方误差估计。从一个可调的任意估计 K 开始。然后每次用户产生一个值 a 并且组均值为 g 产生一个平方误差 E = (a - g) * (a - g) 并将平方误差的估计从之前更改为after = before * x + E * (1 - x) 其中 x 是另一个介于 0 和 1 之间的可调常数，它调整旧估计值的衰减速度。这个估计值永远不会完全降到零，但由于下一步，最好阻止它降低到某个可调值以下。

2) 要获得新的全局估计值，请像以前一样使用加权平均值，但将权重设为该用户当前平方误差估计值的倒数。

如果所有用户都是无偏的，那么指数衰减的估计最终可能会成为每个用户的平均平方误差的不错估计，然后权重将是估计的线性组合，从而最小化全局估计的预期平方误差。检查：如果不同的用户我提交了来自同一来源的 Ni 估计的平均值，那么每个用户估计的均方误差将为 1/Ni，因此乘以这个的倒数会将他们的平均值变成每个用户产生的估计的原始总和用户和加权估计最终只会合并估计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:34:52.720

第一个建议，摆脱绝对差异。他们使数学变得比应有的困难。使用平方差来保持简单。

跟踪每个用户提交值的总和和计数。

g= (sum1*r1+sum2*r2+sum3*r3)/(count1*r1+count2*r2+count3*r3)

将 sum 初始化为 0.5，将 count 初始化为 1，将 r 初始化为 1.0。

每当您收到评分时，更新该用户的总和和计数、总体 g 和每个用户的可靠性，使用：

r = 1- (g - 总和/计数)^2。

从本质上讲，您正在跟踪一些“先前”的评级。如果将 count 初始化为较大的数字，则该算法可以抵抗错误的提交值，但需要更多时间来收敛。如果您减少初始计数（极端情况为 0），情况正好相反。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:49:04.237

在计算新的全局平均值之前不要更新用户的可靠性。

```
g was initially "don't care"
user1 r was initially 0.5
user2 r was initially 0.5
user3 r was initially 0.5 
```

然后

```
user1 a is submitted, 1.0
g = (0.5)*(1.0)/(0.5) = 1.0
user1 reliability = 1 - ABS (1 -1) = 1
user2 a is submitted, 1.0
g = ((1.0)*(1.0) + (0.5)*(1.0))/(1 + 0.5) = 1.0
user1 reliability = 1 - ABS (1 -1) = 1
user2 reliability = 1 - ABS (1 -1) = 1
user3 a is submitted, 0.0
g = ((1.0)*(1.0) + (1.0)*(1.0) + (0.5)*(0))/(1 + 1 + 0.5) = 0.8
user1 reliability = 1 - ABS (0.8 -1) = 0.8
user2 reliability = 1 - ABS (0.8 -1) = 0.8
user3 reliability = 1 - ABS (0.8 - 0.0) = 0.2 
```

# mysql - 无法使用 MySQL 后端运行 Django

> ID：15955932
> 
> 赞同：1
> 
> 时间：2013-04-11T18:15:08.033
> 
> 标签：mysql, django

我正在尝试使用 MySQL 后端设置 Django，以前我只使用过 sqlite，并且出现了一个相当奇怪的错误。`Error was: No module named mysql.base`

我正在运行带有 Nginx 和 uwsgi 的 Ubuntu，并且我安装了 python-mysqldb。在此之后，我已经开始获得 502，所以我希望这是相关的，因为我没有更改任何配置文件。

这是下面的堆栈跟踪`manage.py inspectdb`；

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 453, in execute_from_command_line
utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 392, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 272, in fetch_command
klass = load_command_class(app_name, subcommand)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 77, in load_command_class
module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/inspectdb.py", line 8, in <module>
from django.db import connections, DEFAULT_DB_ALIAS
  File "/usr/local/lib/python2.7/dist-packages/django/db/__init__.py", line 40, in <module>
backend = load_backend(connection.settings_dict['ENGINE'])
  File "/usr/local/lib/python2.7/dist-packages/django/db/__init__.py", line 34, in __getattr__
return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/usr/local/lib/python2.7/dist-packages/django/db/utils.py", line 93, in __getitem__
backend = load_backend(db['ENGINE'])
  File "/usr/local/lib/python2.7/dist-packages/django/db/utils.py", line 45, in load_backend
raise ImproperlyConfigured(error_msg)
django.core.exceptions.ImproperlyConfigured: 'django.db.backends.mysql' isn't an available database backend.
Try using 'django.db.backends.XXX', where XXX is one of:
u'oracle', u'postgresql_psycopg2', u'sqlite3'
Error was: No module named mysql.base 
```

数据库设置；

```
 DATABASES = {
      'default': {
            'ENGINE': 'django.db.backends.mysql',  # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
            'NAME': 'wdsdj',                      # Or path to database file if using sqlite3
            # The following settings are not used with sqlite3:
            'USER': 'mark',
            'PASSWORD': 'pass',
            'HOST': '',                      # Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP.
            'PORT': '',                      # Set to empty string for default.
      }
  } 
```

如果我更改为 sqlite3，那么我不会从 dj 那里得到任何问题；

```
# This is an auto-generated Django model module.
# You'll have to do the following manually to clean this up:
#     * Rearrange models' order
#     * Make sure each model has one field with primary_key=True
# Feel free to rename the models, but don't rename db_table values or field names.
#
# Also note: You'll have to insert the output of 'django-admin.py sqlcustom [appname]'
# into your database.
from __future__ import unicode_literals

from django.db import models 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:52:36.963

检查您的设置，确保 ENGINE 正确`django.db.backends.mysql`。

然后确保你已经安装了 python-mysqldb ...

```
sudo apt-get install python-mysqldb 
```

但是，在您的错误堆栈中，它指出“ `isn't an available database backend`”似乎您的 Django 安装可能有问题，也许？

# iphone - 析构函数运行时崩溃

> ID：15955934
> 
> 赞同：1
> 
> 时间：2013-04-11T18:15:13.687
> 
> 标签：iphone, objective-c, crash, destructor

我的应用程序在尝试重新加载之前加载的视图控制器时崩溃。

在 MySecondViewController 的界面中，我有一个属性是 MyCustomClass 的一个实例：

```
@interface MySecondViewController ()

@property (nonatomic, retain) MyCustomClass *myClassInstance;

@end 
```

当我在导航控制器中按 Back 并返回到 MyFirstViewController，然后尝试重新加载 MySecondViewController 时，我在 MyCustomClass 的 dealloc 方法中遇到了崩溃。该堆栈详细说明了以下内容：

```
0 objc_release
1 -[MyCustomClass .cxx_destruct]
2 object_cxxDestructFromClass(objc_object*, objc_class*)
4 object_dispose
5 -[MyCustomClass dealloc]
6 -[MySecondViewController .cxx_destruct] 
```

这似乎是因为在其他地方，我存储了一个指向 MySecondViewController 的指针，并且当该指针尝试重置为 MySecondViewController 的新实例时引发了错误。

MyCustomClass 看起来像这样：

```
@interface MyCustomClass () {

int _myInt;

}

@property (readwrite) AUGraph   processingGraph;
@property (readwrite) MusicPlayer player;

@end

@implementation MyCustomClass

@synthesize processingGraph     = _processingGraph; 
```

有什么明显的我做错了导致这次崩溃吗？

# unit-testing - 使用 ENTER 键进行 AngularJS e2e 测试

> ID：15955935
> 
> 赞同：1
> 
> 时间：2013-04-11T18:15:14.170
> 
> 标签：unit-testing, angularjs, angularjs-e2e

我正在尝试为 AngularJS TODO MVC 应用程序编写单元测试，但我在学习 e2e 测试语法时有点卡住了。

到目前为止，这就是我所拥有的：

```
describe('todomvc', function () {

    beforeEach(function () {
        browser().navigateTo('../app/index.html');
    });

    afterEach(function() {
        localStorage.clear();
    });

    describe('localstorage behavior', function() {
        it('should load with zero items in localstorage', function() {
            expect(repeater('#todo-list li').count()).toEqual(0);
            input('newTodo').enter('Foo Bar');
            expect(repeater('#todo-list li').count()).toEqual(1);
        });
    });

}); 
```

我的配置：

```
basePath = '../';

files = [
  ANGULAR_SCENARIO,
  ANGULAR_SCENARIO_ADAPTER,
  'test/e2e/**/*.js'
];

autoWatch = false;

browsers = ['Chrome'];

//singleRun = true;

proxies = {
  '/': 'http://localhost:8000/'
};

junitReporter = {
  outputFile: 'test_out/e2e.xml',
  suite: 'e2e'
}; 
```

简而言之，我需要一种模拟“输入”键的方法，因为这就是 TODO MVC 应用程序将项目添加到列表中的方式。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T11:47:01.170

您可以在表单中添加一个类属性，例如

```
<form class="myForm"> 
```

并将此步骤添加到您的测试文件中

```
element(':form.myForm').submit(); 
```

我认为这可能有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T07:16:34.120

您可以使用一些 jQuery 来触发“回车”键。请记住在您的配置文件中链接一个 jQuery 库以使其正常工作。

```
describe('localstorage behavior', function() {
    it('should load with zero items in localstorage', function() {
        var e = jQuery.Event("keydown", {
            keyCode: 13
        });

        expect(repeater('#todo-list li').count()).toEqual(0);
        input('newTodo').enter('Foo Bar');

        element = angular.element('<input name="mytext" type="text" ng-model="mytext">');
        element = compile(element)(scope);

        element.trigger(e);
        scope.$digest();

        expect(repeater('#todo-list li').count()).toEqual(1);
    });
}); 
```

# eclipse - 将 WindowBuilder 集成到现有的 Eclipse 项目中

> ID：15955936
> 
> 赞同：4
> 
> 时间：2013-04-11T18:15:17.930
> 
> 标签：eclipse, user-interface, interface, windowbuilder

我正在处理需要 UI 的作业。我使用 Eclipse 并且已经启动并运行了 WindowBuilder。几周前，我创建了一个 WindowBuilder SWT 项目来创建我的 GUI。我只是对元素进行布局以获得外观的视觉副本，但没有额外的代码来做任何事情。

从那时起，我在一个单独的 Eclipse 项目中编写了大部分代码，该项目没有设置为 WindowBuilder 项目，并且也与 Github 同步。我正在尝试将现有的 WindowBuilder UI 导入该项目，但遇到了一些问题。起初，我只是尝试复制 JAVA 文件，但我收到大量关于缺少依赖项的错误。看起来 WindowBuilder 项目有一堆普通项目没有的引用库。

无论如何，有没有一种简单的方法可以将 WindowBuilder 功能添加到现有项目中？这比试图将我现有的项目移动到我的 WindowBuilder 项目中要容易得多。对此的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-20T22:05:43.247

> 有没有一种简单的方法可以将 WindowBuilder 功能添加到现有项目中？

是的，

选择要使用 WindowBuilder 打开的类，然后

```
right click -> Open With -> WindowBuilder Editor 
```

在您的情况下，我会继续在您的第二个项目中创建一个新类，将旧 WindowBuilder 类中的所有代码复制粘贴到新类中，并使用上述步骤启用 WindowBuilder 编辑器。（粗糙但完成工作）。

为了快速组织现有项目中所有缺失的导入，您可以使用：

```
Ctrl+shift+o 
```

至于将来缺少的任何库，您提到使用 GIT。在您的项目中存在这些库的机器上：

```
right click (the libraries) -> Team -> add to index 
```

然后提交并推送。拉上你的另一台机器，你应该拥有它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:08:05.367

从[windowBuilder](http://www.eclipse.org/windowbuilder/)主页：

> ... 生成的代码不需要任何额外的自定义库来编译和运行：所有生成的代码都可以在没有安装 WindowBuilder Pro 的情况下使用。...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-17T22:55:25.507

我通过在 pom.xml 上添加特定于平台的 swt 依赖项来解决我的问题。这是列表：[https ://mvnrepository.com/search?q=org.eclipse.swt](https://mvnrepository.com/search?q=org.eclipse.swt)

就我而言（我正在为 MacOS 构建），我添加了

```
 <dependency>
     <groupId>org.eclipse.swt</groupId>
     <artifactId>org.eclipse.swt.cocoa.macosx.x86_64</artifactId>
     <version>4.3</version>
  </dependency> 
```

来自这里：[https](https://mvnrepository.com/artifact/org.eclipse.swt/org.eclipse.swt.cocoa.macosx.x86_64) ://mvnrepository.com/artifact/org.eclipse.swt/org.eclipse.swt.cocoa.macosx.x86_64 。

调整您对正在构建的平台的依赖。

# entity-framework - 如何获得干净的 IQueryable？

> ID：15955940
> 
> 赞同：0
> 
> 时间：2013-04-11T18:15:23.043
> 
> 标签：entity-framework, appfabric-cache

我遇到了实体框架和 appFabric 缓存的问题。我需要生成查询语句的键，但在 Where 子句中我得到的参数值等于 @ *p_linq_0*。如何替换为真实值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:26:13.150

因为 AppFabric Caching 以序列化的方式存储数据，所以不建议存储有状态的数据。您必须仅将物化项目放入缓存中。如果您不遵循此规则，则在使用上下文查询数据库时将遇到严重问题。

无论如何，将 AppFabric 缓存与 EF 一起使用的最佳方式是作为二级缓存。

Julie Lerman 几个月前在 MSDN 上发表了一篇很棒的文章。在[这里查看](http://msdn.microsoft.com/en-us/magazine/hh394143.aspx)。

# c# - DataBind 不生成控件？

> ID：15955944
> 
> 赞同：0
> 
> 时间：2013-04-11T18:15:32.187
> 
> 标签：c#, asp.net

我有需要添加属性的复选框列表，但我注意到当我迭代控件时，没有...

```
 var listType = SettingsManager.Get("CRMCaseTypes");
    var listStatus = SettingsManager.Get("CRMStatusReasons");

    var listTypeItems = ParseSettingList(listType);
    var listStatusItems = ParseSettingList(listStatus);

    cblCRMType.DataSource = listTypeItems;
    cblCRMType.DataBind();
    cblCRMStatus.DataSource = listStatusItems;
    cblCRMStatus.DataBind();

    int index = 0;
    foreach (Control c in cblCRMStatus.Controls)
    {
        CheckBox cb = c as CheckBox;
        if (cb != null)
        {
            cb.Attributes.Add("id", listStatusItems[index].Value);

            if (cb.Attributes["id"] == "5")
            {
                cb.Checked = true;
                cb.Enabled = false;
            }
        }

        index++;
    }

    index = 0;
    foreach (Control c in cblCRMType.Controls)
    {
        CheckBox cb = c as CheckBox;
        if (cb != null)
        {
            cb.Attributes.Add("id", listTypeItems[index].Value);
        }

        index++;
    }

} 
```

有没有办法强制生成复选框？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:18:55.387

当你调用`DataBind()`a`CheckBoxList`时，它会填充它的`Items`集合，而不是它的`Controls`集合。

```
foreach (ListItem item in cblCRMStatus.Items)
{
    if (item.Value == "5")
    {
        item.Selected = true;
        item.Enabled = false;
    }
} 
```

该`item.Attributes`属性允许您向复选框添加其他属性。但是，您不能设置`id`属性；ASP.NET 自动将其设置为递增整数。

# jquery - 带有 blur() 和 focus() 的输入字段

> ID：15955945
> 
> 赞同：1
> 
> 时间：2013-04-11T18:15:33.113
> 
> 标签：jquery, input, contact-form

我正在构建一个自定义联系表单。我所有的输入字段都有一个 mouseenter/mouseleave 和焦点/模糊动画（背景颜色）。我的问题在于模糊（）和焦点（）。这是名称字段的代码：

```
 $('#userName').on('mouseenter', function(){
    if($.trim($(this).val()) == ""){
     $('#userName').animate({'background-color':'#FECC00'}, 200);
    }
  });

  $('#userName').on('mouseleave', function(){
    if($.trim($(this).val()) == ""){
      $(this).stop(true).animate({'background-color':'#ffffff'}, 200);
    }
  });

  $('#userName').focus(function(){
    $(this).animate({'background-color':'#B0CB1F'}, 200);

  });

  $('#userName').blur(function(){
    $(this).animate({'background-color':'#ffffff'}, 200);
    if($.trim($(this).val()) == ""){
      nameInvalidation();
    }
    else{
      nameValidation();
    }
  }); 
```

nameInvalidation() 和 nameInvalidation() 是一些动画复选标记：

*   nameInvalidation()：灰色复选标记 - 需要填写输入字段 - 这是所有输入字段的默认值；
*   nameValidation()：绿色复选标记 - 字段数据已准备好发送；

当我输入输入字段并且什么都不做时， nameInvalidation() 运行；当我输入一些内容时，nameValidation() 运行 - 所以我知道该字段是否准备好。问题是这样的：

*   如果我输入输入字段并且它是空的
*   如果我把它留空
*   如果我写了一些东西但在离开输入字段之前将其删除

...比 nameInvalidation() 动画不应该运行，因为它已经是默认设置。

当字段作为一些数据并且我进入它，更改或离开时，同样的事情......绿色复选标记再次运行。

我尝试使用 keyup() 并且它在某种程度上起作用，但它在每次击键时运行复选标记动画 - 我只在离开现场时才想要它。

这是一个[小提琴](http://jsfiddle.net/RjU4k/)。

佩德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:22:33.670

创建一个保存被调用方法当前状态的变量

检查[修改后的 jsfiddle](http://jsfiddle.net/RjU4k/1/)

```
 var currentValidationMethodMane;
    function nameValidation(){
        if(currentValidationMethodMane == "nameValidation"){
            return;
        }
        currentValidationMethodMane = "nameValidation";
   .........

function nameInvalidation(){
        if(currentValidationMethodMane == "nameInvalidation"){
        return;
    }
    currentValidationMethodMane = "nameInvalidation";

..... 
```

# linq - 使用 vb.net 和 linq 获取数据表的不同元素

> ID：15955946
> 
> 赞同：0
> 
> 时间：2013-04-11T18:15:37.880
> 
> 标签：linq

我正在使用 vb.net 框架 3.5

我有一个`dsData`包含下一个信息的数据集名称

```
Page        User     Permission
Simulator   agarza   1
Buys        agarza   1
File loads  agarza   0
scenaries   agarza   0
Simulator   mjobs    1
Buys        mjobs    0
File loads  mjobs    1
scenaries   mjobs    1 
```

我想获得用户的不同名称，我正在尝试做这样的事情：

```
 Dim query= From row In dsData.Tables(0).AsEnumerable() _
               Select row.Field(Of String)("User") Distinct 
```

在前面的代码中，我收到此错误：在此上下文中无法访问方法“Distinct”的定义。

然后我想把结果放在一个数据表中，做这样的事情

```
 Dim dt As DataTable = query.CopyToDataTable() 
```

有人可以帮助我吗？...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-29T11:45:34.213

您可以为此使用 ToTable(distinct As Boolean, ParamArray columnNames As String()) 方法。

```
dsData.Tables(0).DefaultView.ToTable(True, "User") 
```

这将为您返回不同的用户。如果需要，您可以添加多个列名。

这是 msdn 文档。[https://msdn.microsoft.com/en-us/library/wec2b2e6(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/wec2b2e6(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:28:21.757

语法是

```
(From row In dsData.Tables(0).AsEnumerable() _
           Select row.Field(Of String)("User")).Distinct() 
```

至于复制到数据表，请查看[Exception using CopyToDataTable with "new {..}" LINQ query](https://stackoverflow.com/questions/1072120/exception-using-copytodatatable-with-new-linq-query)的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T18:22:44.167

尝试使用基于方法的查询语法：

```
Dim names As List(Of String) = dsData.Tables(0).AsEnumerable() _
                                               .Select(Function(r) r.Field(Of String)("User")) _
                                               .Distinct() _
                                               .ToList() 
```

# python - 这个 lambda/yield/generator 理解是如何工作的？

> ID：15955948
> 
> 赞同：56
> 
> 时间：2013-04-11T18:15:49.653
> 
> 标签：python, ssh, lambda, functional-programming, generator

我今天浏览了我的代码库，发现了这个：

```
def optionsToArgs(options, separator='='):
    kvs = [
        (
            "%(option)s%(separator)s%(value)s" %  
            {'option' : str(k), 'separator' : separator, 'value' : str(v)}
        ) for k, v in options.items()
    ]
    return list(
        reversed(
            list(
                    (lambda l, t: 
                        (lambda f: 
                            (f((yield x)) for x in l)
                        )(lambda _: t)
                    )(kvs, '-o')
                )
            )
        ) 
```

它似乎需要一个参数字典并将它们转换为 shell 命令的参数列表。看起来它在生成器理解中使用了 yield，我认为这是不可能的......？

```
>>> optionsToArgs({"x":1,"y":2,"z":3})
['-o', 'z=3', '-o', 'x=1', '-o', 'y=2'] 
```

它是如何工作的？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-11T18:28:15.580

由于 Python 2.5，`yield <value>`是一个表达式，而不是一个语句。参见[PEP 342](http://www.python.org/dev/peps/pep-0342/)。

该代码非常丑陋且不必要地丑陋，但它是合法的。它的核心技巧是`f((yield x))`在生成器表达式中使用。这是一个更简单的例子，说明它是如何工作的：

```
>>> def f(val):
...     return "Hi"
>>> x = [1, 2, 3]
>>> list(f((yield a)) for a in x)
[1, 'Hi', 2, 'Hi', 3, 'Hi'] 
```

基本上，`yield`在生成器表达式中使用会导致它为源迭代中的每个值生成两个值。当生成器表达式遍历字符串列表时，在每次迭代中，第`yield x`一次从列表中产生一个字符串。genexp 的目标表达式是`f((yield x))`，因此对于列表中的每个值，生成器表达式的“结果”是 的值`f((yield x))`。但`f`只是忽略其参数并始终返回选项 string `"-o"`。所以在生成器的每一步，它首先产生键值字符串（例如，`"x=1"`），然后是`"-o"`。外部`list(reversed(list(...)))`只是从这个生成器中创建一个列表，然后将其反转，以便`"-o"`s 将出现在每个选项之前而不是之后。

但是，没有理由这样做。有许多更具可读性的替代方案。也许最明确的是：

```
kvs = [...] # same list comprehension can be used for this part
result = []
for keyval in kvs:
   result.append("-o")
   result.append(keyval)
return result 
```

即使你喜欢简洁、“聪明”的代码，你仍然可以这样做

```
return sum([["-o", keyval] for keyval in kvs], []) 
```

`kvs`列表理解本身是可读性和不可读性的奇怪组合。它更简单地写成：

```
kvs = [str(optName) + separator + str(optValue) for optName, optValue in options.items()] 
```

您应该考虑为将其放入代码库的任何人安排“干预”。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-11T18:30:10.027

天啊。基本上，归结为：

```
def f(_):              # I'm the lambda _: t
    return '-o'

def thegenerator():   # I'm (f((yield x)) for x in l)
    for x in kvs:
        yield f((yield x)) 
```

因此，当迭代时，生成器产生`x`（ 的成员`kvs`），然后是 的返回值`f`，它始终是`-o`，所有这些都在一次迭代中完成`kvs`。无论`yield x`返回什么以及传递给什么都将`f`被忽略。

等价物：

```
def thegenerator():   # I'm (f((yield x)) for x in l)
    for x in kvs:
        whatever = (yield x)
        yield f(whatever)

def thegenerator():   # I'm (f((yield x)) for x in l)
    for x in kvs:
        yield x
        yield f(None)

def thegenerator():   # I'm (f((yield x)) for x in l)
    for x in kvs:
        yield x
        yield '-o' 
```

当然，有很多方法可以更简单地做到这一点。即使使用最初的双倍收益技巧，整个事情也可能是

```
return list(((lambda _: '-o')((yield x)) for x in kvs))[::-1] 
```

# symfony - 部署 Symfony2 应用程序后随机出现“无法导入资源”异常

> ID：15955950
> 
> 赞同：0
> 
> 时间：2013-04-11T18:15:58.227
> 
> 标签：symfony

在服务器上部署我的 Symfony 应用程序后，我使用以下命令删除缓存：

```
sudo rm -rf app/cache 
```

通常一切正常，但有时我会收到一条异常消息：

```
Cannot import resource
"/var/projectsssssss/src/Project/UserPanelBundle/Controller" from 
"/var/projectsssssss/src/Project/UserPanelBundle/Resources/config/routing.yml". 
```

然后，我再次删除缓存，它一直在工作，直到下一次随机部署。我为路线使用注释。使用 Controller`generateUrl`方法时抛出异常这里是堆栈跟踪：

```
#0 /var/project/vendor/symfony/symfony/src/Symfony/Component/Routing/Loader/YamlFileLoader.php(75): Symfony\\Component\\Config\\Loader\\FileLoader->import('@UserPanelBundl...', 'annotation', false, '/var/projectsss...')
#1 /var/project/vendor/symfony/symfony/src/Symfony/Component/Config/Loader/FileLoader.php(75): Symfony\\Component\\Routing\\Loader\\YamlFileLoader->load('/var/projectsss...', NULL)
#2 /var/project/vendor/symfony/symfony/src/Symfony/Component/Routing/Loader/YamlFileLoader.php(75): Symfony\\Component\\Config\\Loader\\FileLoader->import('@UserPanelBundl...', NULL, false, '/var/projectsss...')
#3 /var/project/vendor/symfony/symfony/src/Symfony/Component/Config/Loader/DelegatingLoader.php(52): Symfony\\Component\\Routing\\Loader\\YamlFileLoader->load('/var/projectsss...', NULL)
#4 /var/project/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Routing/DelegatingLoader.php(57): Symfony\\Component\\Config\\Loader\\DelegatingLoader->load('/var/projectsss...', NULL)
#5 /var/project/app/cache/main/classes.php(1742): Symfony\\Bundle\\FrameworkBundle\\Routing\\DelegatingLoader->load('/var/projectsss...', NULL)
#6 /var/project/app/cache/main/classes.php(1451): Symfony\\Bundle\\FrameworkBundle\\Routing\\Router->getRouteCollection()
#7 /var/project/app/cache/main/classes.php(1400): Symfony\\Component\\Routing\\Router->getGenerator()
#8 /var/project/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php(45): Symfony\\Component\\Routing\\Router->generate('userpanel_apps', Array, false)
#9 /var/project/src/Project/UserPanelBundle/Controller/AppsController.php(26): Symfony\\Bundle\\FrameworkBundle\\Controller\\Controller->generateUrl('userpanel_apps', Array)
#10 [internal function]: Project\\UserPanelBundle\\Controller\\AppsController->indexAction()
#11 /var/project/app/bootstrap.php.cache(1426): call_user_func_array(Array, Array)
#12 /var/project/app/bootstrap.php.cache(1390): Symfony\\Component\\HttpKernel\\HttpKernel->handleRaw(Object(Symfony\\Component\\HttpFoundation\\Request), 1)
#13 /var/project/app/bootstrap.php.cache(1566): Symfony\\Component\\HttpKernel\\HttpKernel->handle(Object(Symfony\\Component\\HttpFoundation\\Request), 1, true)
#14 /var/project/app/bootstrap.php.cache(617): Symfony\\Bundle\\FrameworkBundle\\HttpKernel->handle(Object(Symfony\\Component\\HttpFoundation\\Request), 1, true)
#15 /var/project/web/app.php(28): Symfony\\Component\\HttpKernel\\Kernel->handle(Object(Symfony\\Component\\HttpFoundation\\Request))
#16 {main} 
```

我想缓存生成存在一些问题，但如何避免呢？

**编辑**

我的`routing.yml`：

```
default:
    resource: "@UserPanelBundle/Controller"
    type:     annotation 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:02:24.377

好的，我找到了问题所在。控制器类名称之一没有`Controller`后缀。@catchamonkey 看起来你是对的:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:33:08.023

您实际上删除了缓存文件夹

sudo rm -rf 应用程序/缓存

它应该是

sudo rm -fr 应用程序/缓存/*

请尝试将 php 应用程序/控制台用于更好的事情。您甚至不必在其上使用 sudo

而另一个你需要重新创建文件夹并给出

sudo setfacl -R -mu:www-data:rwX -mu: `whoami`:rwX app/cache app/logs

sudo setfacl -dR -mu:www-data:rwx -mu: `whoami`:rwx app/cache app/logs

www 可能会根据您的 apache/nginx/其他网络服务器用户名而改变

# php - Silex 基本表单提交

> ID：15955956
> 
> 赞同：0
> 
> 时间：2013-04-11T18:16:27.830
> 
> 标签：php, forms, frameworks, routing, silex

我正在尝试向我的网站添加支付网关。我在 Silex 框架的基本实现方面遇到了很多麻烦。`app.php`永远找不到该页面。事实上，我目前正在使用测试服务器，而`signup.php`页面位于以下目录中：

`http://localhost/www/smafo/signup.php`,

提交表单最终会导致以下 url`http://localhost/create_transaction`导致页面未找到错误。

**注意：**将表单的 action 属性更改为`app.php`，路由到正确的`app.php`页面并导致 Symfony Page not found 错误。

有什么想法我在这里做错了吗？

这是示例表格：`signup.php`

```
<form action="/create_transaction" method="POST" id="braintree-payment-form">
     <p>
       <label>Card Number</label>
       <input type="text" size="20" autocomplete="off" data-encrypted-name="number" />
     </p>
     <p>
       <label>CVV</label>
       <input type="text" size="4" autocomplete="off" data-encrypted-name="cvv" />
     </p>
     <p>
      <label>Expiration (MM/YYYY)</label>
      <input type="text" size="2" data-encrypted-name="month" /> / <input type="text" size="4" data-encrypted-name="year" />
    </p>
    <input type="submit" id="submit" />
 </form> 
```

这是我的 app.php（与 signup.php 位于同一目录中）

```
$app = new Silex\Application();

$app->get('/', function () {
    include 'signup.php';
    return '';
});

$app->post('/create_transaction', function (Request $request) {
  echo 'YES';
  $result = Braintree_Transaction::sale(array(
    'amount' => '1000.00',
    'creditCard' => array(
      'number' => $request->get('number'),
      'cvv' => $request->get('cvv'),
      'expirationMonth' => $request->get('month'),
      'expirationYear' => $request->get('year')
    ),
    'options' => array(
      'submitForSettlement' => true
    )
  ));

  if ($result->success) {
    return new Response("<h1>Success! Transaction ID: " . $result->transaction->id . "</h1>", 200);
  } else {
    return new Response("<h1>Error: " . $result->message . "</h1>", 200);
  }
});

$app->run(); 
```

我非常感谢任何建议。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T00:42:47.043

我遇到了同样的问题，并最终通过进行以下替换来解决它：

```
<form action="app.php/create_transaction" method="POST" id="braintree-payment-form"> 
```

# android - Android AudioRecord 到服务器 over UDP 播放问题

> ID：15955958
> 
> 赞同：20
> 
> 时间：2013-04-11T18:16:32.580
> 
> 标签：android, audio, streaming, audiorecord

我正在尝试制作一个简单的 Android 应用程序，将实时麦克风音频流式传输到服务器进行播放。由此产生的播放听起来很奇怪，音频中有很大的间隙。有谁知道我做错了什么？

编辑：解决。事实证明，我假设每个传入的缓冲区都已满，这是我的错误假设。

这是我的活动：

```
public class MainActivity extends Activity {
    private static String TAG = "AudioClient";

    // the server information
    private static final String SERVER = "xx.xx.xx.xx";
    private static final int PORT = 50005;

    // the audio recording options
    private static final int RECORDING_RATE = 44100;
    private static final int CHANNEL = AudioFormat.CHANNEL_IN_MONO;
    private static final int FORMAT = AudioFormat.ENCODING_PCM_16BIT;

    // the button the user presses to send the audio stream to the server
    private Button sendAudioButton;

    // the audio recorder
    private AudioRecord recorder;

    // the minimum buffer size needed for audio recording
    private static int BUFFER_SIZE = AudioRecord.getMinBufferSize(
            RECORDING_RATE, CHANNEL, FORMAT);

    // are we currently sending audio data
    private boolean currentlySendingAudio = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.i(TAG, "Creating the Audio Client with minimum buffer of "
                + BUFFER_SIZE + " bytes");

        // set up the button
        sendAudioButton = (Button) findViewById(R.id.start_button);
        sendAudioButton.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN:
                    startStreamingAudio();
                    break;

                case MotionEvent.ACTION_UP:
                    stopStreamingAudio();
                    break;
                }

                return false;
            }
        });
    }

    private void startStreamingAudio() {

        Log.i(TAG, "Starting the audio stream");
        currentlySendingAudio = true;
        startStreaming();
    }

    private void stopStreamingAudio() {

        Log.i(TAG, "Stopping the audio stream");
        currentlySendingAudio = false;
        recorder.release();
    }

    private void startStreaming() {

        Log.i(TAG, "Starting the background thread to stream the audio data");

        Thread streamThread = new Thread(new Runnable() {

            @Override
            public void run() {
                try {

                    Log.d(TAG, "Creating the datagram socket");
                    DatagramSocket socket = new DatagramSocket();

                    Log.d(TAG, "Creating the buffer of size " + BUFFER_SIZE);
                    byte[] buffer = new byte[BUFFER_SIZE];

                    Log.d(TAG, "Connecting to " + SERVER + ":" + PORT);
                    final InetAddress serverAddress = InetAddress
                            .getByName(SERVER);
                    Log.d(TAG, "Connected to " + SERVER + ":" + PORT);

                    Log.d(TAG, "Creating the reuseable DatagramPacket");
                    DatagramPacket packet;

                    Log.d(TAG, "Creating the AudioRecord");
                    recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
                            RECORDING_RATE, CHANNEL, FORMAT, BUFFER_SIZE * 10);

                    Log.d(TAG, "AudioRecord recording...");
                    recorder.startRecording();

                    while (currentlySendingAudio == true) {

                        // read the data into the buffer
                        int read = recorder.read(buffer, 0, buffer.length);

                        // place contents of buffer into the packet
                        packet = new DatagramPacket(buffer, read,
                            serverAddress, PORT);

                        // send the packet
                        socket.send(packet);
                    }

                    Log.d(TAG, "AudioRecord finished recording");

                } catch (Exception e) {
                    Log.e(TAG, "Exception: " + e);
                }
            }
        });

        // start the thread
        streamThread.start();
    }
} 
```

这是我的服务器端代码：

```
class Server {

    AudioInputStream audioInputStream;
    static AudioInputStream ais;
    static AudioFormat format;
    static boolean status = true;
    static int port = 50005;
    static int sampleRate = 11025;
    static int bufferSize = 9728;

    static Long lastTime;
    static long totalBytesReceived = 0L;

    private static final int audioStreamBufferSize = bufferSize * 20;
    static byte[] audioStreamBuffer = new byte[audioStreamBufferSize];
    private static int audioStreamBufferIndex = 0;

    public static void main(String args[]) throws Exception {

        Log("Starting the AudioServer...");

        Log("Creating the datagram socket on port " + port + "...");
        DatagramSocket serverSocket = new DatagramSocket(null);
        serverSocket.setReuseAddress(true);
        serverSocket.bind(new InetSocketAddress(port));

        Log("Creating the buffer to hold the received data of size "
                + bufferSize + "...");
        byte[] receiveData = new byte[bufferSize];

        Log("Setting the audio rate to " + sampleRate + "hz...");
        format = new AudioFormat(sampleRate, 16, 1, true, false);

        Log("Ready to receive audio data");
        while (status == true) {

            DatagramPacket receivePacket = new DatagramPacket(receiveData,
                    receiveData.length);
            serverSocket.receive(receivePacket);
            bufferAudioForPlayback(receivePacket.getData(),
                    receivePacket.getOffset(), receivePacket.getLength());
        }

        serverSocket.close();
    }

    private static void bufferAudioForPlayback(byte[] buffer, int offset,
            int length) {

        byte[] actualBytes = new byte[length];

        for (int i = 0; i < length; i++) {
            actualBytes[i] = buffer[i];
        }

        for (byte sample : actualBytes) {

            int percentage = (int) (((double) audioStreamBufferIndex / (double) audioStreamBuffer.length) * 100.0);
            Log("buffer is " + percentage + "% full");

            audioStreamBuffer[audioStreamBufferIndex] = sample;
            audioStreamBufferIndex++;
            Log("Buffer " + audioStreamBufferIndex + " / "
                    + audioStreamBuffer.length + "    " + percentage);

            if (audioStreamBufferIndex == audioStreamBuffer.length - 1) {
                toSpeaker(audioStreamBuffer);
                audioStreamBufferIndex = 0;
                System.exit(0);
            }
        }
    }

    private static void Log(String log) {
        System.out.println(log);
    }

    public static void toSpeaker(byte soundbytes[]) {
        try {

            DataLine.Info dataLineInfo = new DataLine.Info(
                    SourceDataLine.class, format);
            SourceDataLine sourceDataLine = (SourceDataLine) AudioSystem
                    .getLine(dataLineInfo);

            sourceDataLine.open(format);

            FloatControl volumeControl = (FloatControl) sourceDataLine
                    .getControl(FloatControl.Type.MASTER_GAIN);
            volumeControl.setValue(100.0f);

            sourceDataLine.start();
            sourceDataLine.open(format);
            sourceDataLine.start();
            sourceDataLine.write(soundbytes, 0, soundbytes.length);
            sourceDataLine.drain();
            sourceDataLine.close();
        } catch (Exception e) {
            System.out.println("Error with audio playback: " + e);
            e.printStackTrace();
        }
    }
} 
```

最后，这里是主要活动的资源 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="20dip">

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher"
        android:scaleType="fitCenter"/>

        <TextView  
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/app_info"
        android:layout_weight="1.0"
        android:textSize="20dip"/>

    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

        <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/btnStart"
                android:text="@string/start_recording"
                android:layout_weight="1.0"/>

                <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/btnStop"
                android:text="@string/stop_recording"
                android:layout_weight="1.0"/>
    </LinearLayout>
</LinearLayout> 
```

编辑：播放音频 suh-suh-suh-suh-o-ou-ou-ou-nds-nds-ds 像这样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T18:22:58.980

您可以尝试以下方法，而不是：

```
// read the data into the buffer
recorder.read(buffer, 0, buffer.length);

// place contents of buffer into the packet
packet = new DatagramPacket(buffer, buffer.length, serverAddress, PORT); 
```

不要指望您收到完全读取缓冲区，`recorder`而是使用实际读取值

```
// read the data into the buffer
int read = recorder.read(buffer, 0, buffer.length);

// place contents of buffer into the packet
packet = new DatagramPacket(buffer, read, serverAddress, PORT); 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T05:38:12.330

感谢约书亚的帖子....对新蜜蜂有很大帮助:)

```
volumeControl.setValue(volumeControl.getMaximum());

removes illegalStateException at Server 
```

和 android 客户端中的权限

```
<uses-permission android:name="android.permission.RECORD_AUDIO"/> 
```

# sql - 基于prevoius行数据自动计算sql表中的列

> ID：15955962
> 
> 赞同：3
> 
> 时间：2013-04-11T18:16:41.807
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我使用 sql server 作为后端在 asp.net c# 中开发我的应用程序。现在我需要创建一个带有自动计算列（期末余额）的表，如下所示：

```
Date    in stock    out stock   closing balance
2/3/2013    0             0          0
3/3/2013    10            5          5
5/3/2013    10            52        -37
6/3/2013    52            7          8
7/3/2013    6             50        -36
8/3/2013    10            12        -38 
```

这里每天的期末余额取决于前一天的期末余额

例如，今天的期末余额=（前一天的期末余额+今天的库存）-（今天的库存）当我在表格中添加日期为 4/3/2013 的新条目时，表格必须如下所示

```
Date    in stock    out stock   closing balance
2/3/2013    0            0              0
3/3/2013    10           5              5
4/3/2013    20          15             10
5/3/2013    10          52            -32
6/3/2013    52           7             13
7/3/2013    6           50            -31
8/3/2013    10          12            -33 
```

我使用 microsoft excel（使用公式）制作了这个，但我需要为我的应用程序使用 sql server 表来实现它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:14:17.237

**假设**

1.你的表结构是这样的

```
Date | In Stock | Out Stock 
```

2.您将在计算之前插入一个**新列**`balance`。

3.日期是一个`Primary Column`（**唯一+非空**）

采取上述假设：

如果你想在**C#**中使用，你已经制作了一个**SP**

 **1.创建一个**临时表**`Row Number`并使用**Rank()**分配

 **```
select 
rank() OVER (ORDER BY [Date]) as [Rank],
t1.[Date],
t1.[in stock],
t1.[out stock]
--,t1.[in stock]-t1.[out stock] balance
into #temp1
from (your table name)
; 
```

2.现在你将使用上面`temp table`的来获得**余额**

```
WITH x AS
(
    SELECT 
        [Rank],
        [Date],
        [in stock],
        [out stock],
        bal=([in stock]-[out stock])
    FROM #temp1
    WHERE [Rank] = 1
    UNION ALL
    SELECT 
        y.[Rank],
        y.[Date],
        y.[in stock],
        y.[out stock],
        x.bal+(y.[in stock]-y.[out stock])
    FROM x INNER JOIN #temp1 AS y
    ON y.[Rank] = x.[Rank] + 1
)
SELECT 
    [Date],
    [in stock],
    [out stock],
    Balance = bal
FROM x
ORDER BY Date
OPTION (MAXRECURSION 10000); 
```

这是您可以验证的**[SQL Fiddle 。](http://www.sqlfiddle.com/#!3/3d839/6)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T11:21:34.080

在我看来，你不需要真的需要递归......

```
CREATE FUNCTION dbo.GetClosingBalance(@Date date) RETURNS int AS
BEGIN
    DECLARE @RetVal int
    SELECT
        @RetVal = SUM([in stock]) - SUM([out stock])
    FROM
        x
    WHERE
        [Date] <= @Date
    RETURN @RetVal
END

ALTER TABLE x ADD COLUMN [closing balance] AS (dbo.GetClosingBalance([Date])) 
```****

# node.js - 是否可以在 node.js 服务器端使用 google.maps api 库？

> ID：15955963
> 
> 赞同：11
> 
> 时间：2013-04-11T18:16:45.817
> 
> 标签：node.js, google-maps-api-3

我正在开发使用 google map version3 api 的 google map 应用程序，特别是 google.maps.geometry.encoding 中的实用程序方法，例如 decodePath、encodePath、computeDistanceBetween、interpolate，以便计算地点的位置

在第一个版本的网络应用程序中，大部分应用程序逻辑都在网络浏览器上，现在我想将一些逻辑移动到基于 node.js 的服务器上。但是，由于应用程序依赖于 google api，我想知道是否有一种方法可以让我仍然在 node.js 服务器上使用 google map api

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T21:59:38.350

您可以使用已经为您包装了 API 的**node-googlemaps** [https://github.com/moshen/node-googlemaps之类的模块。](https://github.com/moshen/node-googlemaps)或者，您可以使用任何可以帮助您发出 API 请求的节点模块：

**Mikeal 的请求**：[https ://github.com/mikeal/request](https://github.com/mikeal/request)

**休息者**：[https ://github.com/danwrong/restler](https://github.com/danwrong/restler)

虽然，我不确定具体的实用程序方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-05T08:50:59.470

我没有找到如何在 node.js 中从谷歌地图加载和使用几何库的方法，但我找到了一个小的 npm 模块[geolib](https://www.npmjs.com/package/geolib)，它可以进行一些计算。我比较了模块和谷歌地图几何库的结果，它们匹配。我希望你会发现它有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-07-26T08:32:20.790

**按照这些分步说明进行操作**

1.  在终端中运行此命令`npm install @google/maps --save`

2.  复制粘贴此代码

    ```
    var googleMapsClient = require('@google/maps').createClient({
      key: xxxxxxxxxx
    });

    function getDirections (req, callback)  {
      googleMapsClient.directions({
      origin: req.origin,
      destination: req.destination,
      mode: req.mode,

      }, function(err, response) {
        console.log(err);
        console.log(response);
        if (!err) { 
          callback(response);
        };
      });
    };

    var inputs = {
      origin: "1600 Amphitheatre Parkway, Mountain View, CA",
      destination: "1 Infinite Loop, Cupertino, CA 95014, USA",
      mode: "driving",
    };

    getDirections(inputs, function(result){
      console.log("Response: ", JSON.stringify(JSON.parse(JSON.stringify(result))))
    }); 
    ```

**进一步阅读** [https://github.com/googlemaps/google-maps-services-js](https://github.com/googlemaps/google-maps-services-js)

# jenkins - gcovr 不从远程位置生成覆盖文件

> ID：15955966
> 
> 赞同：1
> 
> 时间：2013-04-11T18:17:03.537
> 
> 标签：jenkins, xcode4.5, code-coverage, jenkins-plugins, gcov

当我从包含 .gcno 和 .gcda 文件的文件夹中执行 gcovr 文件时，会生成 coverage.xml 文件。

文件夹位置 - /Users//….. /x86_64/

Gcovr 位置 - /Users//….. /x86_64/gcovr

当前位置 - /Users//….. /x86_64/

命令 - python gcovr –x > coverage.xml

覆盖率文件包含代码覆盖率报告。

但是，如果我从远程位置调用相同的可执行文件 Ex。

当前位置 - /用户/

Gcovr 位置 - /Users//….. /x86_64/gcovr

命令 - python /Users//….. /x86_64/gcovr –r /Users//….. /x86_64/ –x > coverage.xml

此外，当我在远程位置有 gcovr 并将其调用为我的覆盖文件的根文件夹时，情况也是如此。

当前位置 - /用户/

Gcovr 位置 - /Users//gcovr

命令 - python /Users//gcovr –r /Users//….. /x86_64/ –x > coverage.xml

覆盖率文件不包含覆盖率报告。看起来像这样

```
<?xml version="1.0" ?>
<!DOCTYPE coverage
  SYSTEM 'http://cobertura.sourceforge.net/xml/coverage-03.dtd'>
<coverage branch-rate="0.0" line-rate="0.0" timestamp="1365619556" version="gcovr 2.5-      prerelease (r2823)">
    <sources>
        <source>
            /Users/<username>/….. /x86_64/<Code Coverage Files>
        </source>
    </sources>
    <packages/>
</coverage> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T10:27:04.150

Looking at my gcovr lines, which work both on master and slave, I'm always executing from the build directory and pointing at the coverage/object directory in the command line. This seemed to be necessary for the source lines to be found.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T12:38:14.977

可能这个问题将帮助您解决问题。

[GCOVR 在 MAC 中给出空结果的百分比为零](https://stackoverflow.com/questions/38875615/gcovr-giving-empty-results-zero-percent-in-mac/38917149)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T09:34:25.673

您是否使用以下选项编译？：`-ftest-coverage -fprofile-arcs`

您是否与以下选项链接？：`-fprofile-arcs`

这是我排除多余文件的方式：

```
gcovr --xml -e ".*unit-test.*\.cpp" -e ".*unit-test.*\.h" -e ".*usr/include/.*" -e ".*jenkins.*" -o coverage.xml 
```

尽管我无法从 Jenkins 打开远程文件，但始终发现它们是正确的。

# css - 在 WordPress 21 中制作下拉菜单下推内容

> ID：15955968
> 
> 赞同：0
> 
> 时间：2013-04-11T18:17:14.730
> 
> 标签：css, wordpress, navigation

我想修改 WordPress 二十十二主题的 CSS，使下拉子菜单链接将其余内容向下推。

我假设，我必须`position:absolute;`在子菜单 ul li 中删除 CSS，但是，由于某种原因，当我这样做时，子菜单仍然覆盖它下面的 div，而不是向下推。

我会感谢精通 WordPress 的人的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:56:39.917

我在网站上查看，我从头开始创建示例菜单。
我希望它对你有帮助。
这是一个[小提琴](http://jsfiddle.net/trajce/dpGDe/1/)。
这是一些 HTML（我省略了`<a>`标签，因此它更具可读性。

```
<div id="wrapper">
<ul id="nav">
    <li>link1
        <ul class="sub">
            <li>link1</li>
            <li>link2</li>
            <li>link3</li>
        </ul>
    </li>
    <li>link2
        <ul class="sub">
            <li>link1</li>
            <li>link2</li>
            <li>link3</li>
        </ul>
    </li>
    <li>link3
        <ul class="sub">
            <li>link1</li>
            <li>link2</li>
            <li>link3</li>
        </ul>
    </li>
</ul>
<div class="clear"></div>
</div> 
```

这是CSS：

```
body
{
margin:0;
}
#wrapper
{
    background:#ccc;
}
ul{
    margin:0;
    padding:0;
    list-style:none;
}
#nav > li
{
    float:left;
}
#nav > li:hover .sub
{
    display:block;
}
.sub
{
    display:none;
}
.clear
{
clear:both;
} 
```

我认为您应该能够根据自己的需要进行修改。

* * *

这是一步一步的指南，但请记住，您需要做更多的工作才能达到您想要的结果。这些是一些基本步骤。对于导航：

```
.main-navigation {
    float: right; <- remove this line
    } 
```

顶级UL：

```
.main-navigation ul.nav-menu, .main-navigation div.nav-menu > ul {
    display: inline-block !important;<- remove this line
}
.main-navigation ul.nav-menu, .main-navigation div.nav-menu > ul {
    display: none;<- remove this line
}
li:
.main-navigation li a, .main-navigation li {
    display: inline-block;<- remove this line  
}

.main-navigation li ul {
    display: none;
    position: absolute;<- remove this line
    top: 100%;
}

ul.nav-menu > li {<- add this rule
    float: left;
} 
```

html中的一些变化：

```
<div class="menu-main-menu-container">
<ul id="menu-main-menu" class="nav-menu">
...
</ul>
<div class="clear"></div> <- add this line and the folowing rule in the css
</div>

.clear
{
clear:both;
} 
```

从旧版本创建备份，然后尝试一下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T18:47:46.653

尝试`position : relative;`代替`position : absolute;`

# iphone - 如何在任何设备的 UIView 中间水平和垂直放置一个按钮？

> ID：15955969
> 
> 赞同：6
> 
> 时间：2013-04-11T18:17:23.567
> 
> 标签：iphone, objective-c, rubymotion

我有一个 UIButtonRoundedRectType 类型的 UIButton，我想将它水平和垂直放在屏幕中间。

我已经尝试通过硬编码数字来做到这一点，但是当在 iPhone 与 iphone（视网膜）上运行时，这会回头看。我想通过计算容器的宽度以编程方式将按钮保持在中心。

所以，我试过这个，但它不起作用。

```
container = view.frame.size
button = UIButton.buttonWithType(UIButtonTypeRoundedRect)
button.frame = [[container.width/2-button.frame.size.width/2,150], [280,50]] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-24T18:35:55.393

简单的方法：

```
button.center = view.center; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T18:21:08.337

怎么样：

```
button.center = [button.superview convertPoint:button.superview.center fromView:button.superview.superview]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-06T05:53:13.190

如果您在 XIB 中使用视图，则可以像我提到的那样使用。

转到 XIB -> 点击查看 -> 点击尺寸检查器 -> 排列（您可以在此处设置位置）。

![在此处输入图像描述](https://i.stack.imgur.com/qOFQ7.png)

`Position of Container`选择和的所有属性`Fill Container`。

如果您动态创建视图（不在 XIB 中），那么您可以根据 superview 的界限使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T05:07:26.467

你离得并不远。这有效（我试过了）：

```
container = view.frame.size
button = UIButton.buttonWithType(UIButtonTypeRoundedRect)
button_size = [ 280, 50 ]
left_margin = (container.width / 2) - (button_size[0] / 2)
top_margin = (container.height / 2) - (button_size[1] / 2)
button.frame = [[ left_margin, top_margin ], button_size ]
button.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin 
```

# jquery - jQuery将删除类onclick添加到div

> ID：15955971
> 
> 赞同：2
> 
> 时间：2013-04-11T18:17:30.920
> 
> 标签：jquery, html, onclick, addclass, removeclass

我创建了下面的代码，它在第一次单击时通过旋转类成功旋转了一个箭头。

但在第二次点击时，我希望箭头再次旋转回来。我已经尝试过，使用其他方法，并在点击时删除类。但这没有奏效。任何建议或帮助都会很棒！

```
 $(document).ready(function(){
        $('#first').click(function(event) {
          $(".content.firstArrow").addClass("rotate");
        }); 
        $('#second').click(function(event) {
          $(".content.secondArrow").addClass("rotate");
        }); 
        $('#third').click(function(event) {
          $(".content.thirdArrow").addClass("rotate");
        }); 
        $('#forth').click(function(event) {
          $(".content.forthArrow").addClass("rotate");
        });       
   }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T18:20:48.860

尝试使用[.toggleClass()](http://api.jquery.com/toggleClass/)

```
$(".content.firstArrow").toggleClass("rotate"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:25:12.247

您可以优化代码并仅保留一个处理程序：

```
$(document).ready(function(){
    $('#first, #second, #third, #forth').click(function(event) {
      $(".content." + $(this).attr('id') + "Arrow").toggleClass("rotate");
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:24:07.550

使用 .toggleClass() 而不是 addClass() 或 removeClass()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T18:19:56.520

```
$('#first :not(.rotate)').click(function(event) {
  $(".content.firstArrow").addClass("rotate");
}); 

$('#first .rotate').click(function(event) {
  $(".content.firstArrow").removeClass("rotate");
}); 
```

# c# - C#从特定文件夹获取嵌入资源或区分不同文件夹中的嵌入资源

> ID：15955973
> 
> 赞同：9
> 
> 时间：2013-04-11T18:17:44.483
> 
> 标签：c#, reflection, embedded-resource

标题总结得很好。我知道我可以使用以下方法获取嵌入式资源名称：

```
 var assembly = System.Reflection.Assembly.GetExecutingAssembly();
        string[] files = assembly.GetManifestResourceNames(); 
```

但我希望能够仅从特定文件夹中获取嵌入式资源。或者至少能够区分来自不同文件夹的嵌入资源。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T19:06:15.097

资源以下列格式返回。

```
[Namespace].[Folder].[Filename] 
```

请注意，路径中的所有文件夹都由`.`'s 分隔。因此，如果您有一个具有以下配置的嵌入式资源

```
myproject.csproj（命名空间 = com.mycompany.myproject）
- 资源
  - 图片
    - 图标
      - my_icon.ico

```

资源名称将是...

```
com.mycompany.myproject.Resources.Images.Icons.my_icon.ico 
```

如果要从特定文件夹中选择全部，可以使用以下 LINQ 表达式或根据需要进行修改。

```
string prefix = "your_namespace.your_folder."

var resourceNames = Assembly.GetExecutingAssembly()
    .GetManifestResourceNames()
    .Where(name => name.StartsWith(prefix)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T19:06:53.543

如果您创建一个名为 Images 的文件夹，并将文件放在那里，则资源的名称将变为 Assembly.Images.fileName。

因此，您可以尝试以下操作：

```
var assembly = System.Reflection.Assembly.GetExecutingAssembly();

var names = assembly.GetManifestResourceNames().Where (n => n.Contains(".Images.")); 
```

# javascript - 从 div 元素中检索具有特定类的所有子元素标签

> ID：15955976
> 
> 赞同：3
> 
> 时间：2013-04-11T18:17:56.493
> 
> 标签：javascript, jquery, html

我有以下 DOM 树：

```
<div class="myclass">
     <td>
           // lots of td and tr elementds...
      </td>
      <div>
           // lots of td and tr and div elementds...
           .....
           .....
           <span class="myspan">
              // lots of td and tr and div elementds...
              .....
              .....
           </span>           
      </div>
</div> 
```

我有几个主要的 div 元素 - class="myclass" 的 div

我有以下代码：

```
 $("div").each(function(i,e) {
    if ($(e).hasClass("myclass")) {

        // up to here i have all the div with myclass
             .....
             .....
           //code should be added here
    }
  }) 
```

如何使用 JQuery 检索主 div 元素内的 myspan 类的所有 span 元素？

我想更清楚一点：我需要的是一个具有 class = myspan 并且位于当前 div 元素下的元素列表，代码应该添加到我写的地方，因为每个 div 元素都会有一组不同的元素.

我希望我现在清楚自己。请帮忙，谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T18:24:45.147

这应该为您做到这一点。

```
$("div.myclass span.myspan").each(function() {
    console.log(this);
}); 
```

**编辑**

执行此操作的另一种方法是保留父上下文，如下面的代码所示。此更新基于对此答案的评论。我已经留下了原始答案（上图），因为原始问题的措辞方式可能对偶然发现此答案的其他人有用。

```
$("div.myclass").each(function(i) {
    console.log("spans within div index " + i);
    $(this).find(".myspan").each(function() {
        console.log(this);
    });
}); 
```

[http://jsfiddle.net/ryanbrill/Q4b4N](http://jsfiddle.net/ryanbrill/Q4b4N)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:26:01.983

您将代码缩短如下

```
 var myspan = $("div.myclass span.myspan "); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T18:24:06.140

如果我说对了，那么您需要[jquery find](http://api.jquery.com/find/)函数，例如以下代码：

```
var spans = $("div.myclass").find('span.myspan');//cache the span
spans.each(function(i,e) {//do what you need
    $(this).addClass('test');//just a sample action
}); 
```

同样可以用 1 行来实现，像这样

```
$("div.myclass").find('span.myspan').addClass('test'); 
```

但这取决于您想要实现的目标。这是一个小提琴

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T18:24:11.953

尝试这个：

```
$(document).ready(function() {
    $("div.myclass").find(".myspan");
}); 
```

如果您只有一个`div`元素，或者如果您想要同一集合中的所有`span.myspan`元素（甚至跨多个`div.myclass`元素），则不需要`.each`.

**更新**

虽然`$("div.myclass .myspan")`是有效的，但`$("div.myclass").find(".myspan")` 实际上速度明显更快！

查看这个[性能比较](http://jsperf.com/descend-from-id-vs-select-and-find)，它证明`.find`比简单地将类添加到选择器快 93%！

# jquery - attr() 不起作用但目标会调用其他命令？

> ID：15955980
> 
> 赞同：1
> 
> 时间：2013-04-11T18:18:04.443
> 
> 标签：jquery, text, target, attr

好的，所以这个人应该从目标标签中的 rel 属性中调用数字，但它返回为未定义：

```
$(this).closest('tr').prevAll('tr:has(td.country)').first().attr('rel') 
```

奇怪的是，这将调用该标签中的文本：

```
$(this).closest('tr').prevAll('tr:has(td.country)').first().text() 
```

...但是当我使用 attr('rel') 它是未定义的？这怎么可能？它正确调用 text() 的示例标签是：

```
<td colspan="6" class="country" rel="3">United States</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:21:21.960

```
$(this).closest('tr').prevAll('tr:has(td.country)').first() 
```

使用此代码，您访问的不是`<td>`，而是`<tr>`，因此您无法访问`rel`它的属性。

让我们把它分开：

```
$(this).closest('tr') 
```

不管`$(this)`是什么，你都在寻找它最亲近的父母`<tr>`

```
$(this).closest('tr').prevAll('tr:has(td.country)') 
```

您正在将所有以前的兄弟姐妹都带到`<tr>`具有`<td>`with 类的兄弟姐妹中`country`。

```
$(this).closest('tr').prevAll('tr:has(td.country)').first() 
```

您选择上一个s`<tr>`列表中的第一个`<tr>`

要获得`<td>`，您需要执行以下操作：

```
$(this).closest('tr').prevAll('tr:has(td.country)').first().find('td') 
```

编辑：正如@KevinB 在下面指出的那样，`text()`让您认为它有效的唯一原因是因为`text()`返回元素及其所有子元素的文本。所以你仍然得到了`<tr>`支持，但由于该元素本身没有任何文本，你只能看到它的 child 的文本`<td>`。

为了证明您选择的是`<tr>`而不是`<td>`，请执行以下操作：

```
alert($(this).closest('tr').prevAll('tr:has(td.country)').first().prop('tagName')); 
```

这将输出“TR”而不是“TD”。

# javascript - 了解 $scope 和 angularjs

> ID：15955984
> 
> 赞同：0
> 
> 时间：2013-04-11T18:18:19.033
> 
> 标签：javascript, angularjs, scope

我使用 html5 geolocation api 创建了这个片段。如果用户允许并显示 lat,lng`{{lat}}`

我不明白为什么 lat 只在第二次点击时显示。我以为 showPosition() 已经触发了？您可以在第一次单击时看到它显示在控制台中。

HTML：

```
<body ng-controller="MainCtrl">
{{lat}}
  <button ng-click="getLocation()">Click</button>
</body> 
```

JS：

```
app.controller('MainCtrl', function($scope) {
  $scope.getLocation = function() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition);
    } else {
      alert("Geolocation is not supported by this browser.");
    }
  }
  function showPosition(position) {
    $scope.lat = "Latitude: " + position.coords.latitude;
    $scope.lng = "Longitude: " + position.coords.longitude; 
    console.log($scope.lat);
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:47:11.523

回调函数`showPosition`被称为“外部”Angular，因此尽管您的`$scope`属性会更新，但视图不会更新，因为 Angular 不知道这些更改。

`$scope.$apply()`在函数底部调用`showPosition()`。这将导致一个[摘要循环](http://docs.angularjs.org/guide/concepts#runtime)运行，Angular 会注意到您对 $scope 所做的更改（因为 Angular 在您的 HTML 中使用 {{}} 设置了 $watches）并更新视图。

# javascript - AJAX 禁用后退按钮，直到回调执行

> ID：15955985
> 
> 赞同：-1
> 
> 时间：2013-04-11T18:18:19.367
> 
> 标签：javascript, jquery, ajax, browser, back

当有人在加载 ajax 调用时点击后退按钮时，我会弹出一个代码错误。有没有办法在呼叫成功返回之前禁用？

例子：

```
$.ajax({
// Disable back button
url: "test.html",
context: document.body

}).done(function() {
// Enable back button
$(this).addClass("done");
}); 
```

我知道劫持浏览器功能是不好的，我注意到这不是我的选择，我不是项目所有者。此外，它只是暂时的几秒钟，而 ajax 做它的事情。我已经搜索过，但没有想出任何对这种情况特别有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:28:00.427

您不能阻止用户使用 WebBrowser 中的后退按钮，但也许您可以使用此代码向用户发出等待的信号。（也许用户等待，左右）:)

例子：

```
window.onbeforeunload = function(){
     return "Please wait until page load is done?";
} 
```

*=> 在 Chrome 26+ 上测试的代码*

也许这有帮助

**编辑：**

为了反驳“跳跃”提到的内容，您可以在启动 ajax 调用时设置此事件函数，并在结束 ajax 调用后删除该函数，但这只是一些细节。

示例 2：

```
 ...
 function setPreventLeavingPage(){
    window.onbeforeunload = function(){
         return "Please wait until page load is done?";
    }
 }

 function removePreventLeavingPage(){
   window.onbeforeunload = null;
 }
 ...

 $.ajax({
    url: "test.html",
    beforeSend: function() {
      setPreventLeavingPage();
    },
    context: document.body
    }).done(function() {
       // do some stuff
       ...
       removePreventLeavingPage();
    }); 
```

*=> 在 Chrome 26+ 上测试的代码*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:33:02.180

您不能禁用浏览器中的后退（或任何其他）按钮。如果可以的话，你能想象吗？！垃圾邮件弹出窗口将有一个现场日！

无论如何，你能做的最好的就是使用`onbeforeunload`（它只适用于某些浏览器，就像我知道 Opera 不支持它一样）。如果有 AJAX 请求，您可以抛出“您确定要离开吗？” 信息。

例子：

```
$(document).ajaxStart(function(){
    $(document.body).addClass('running');
});
$(document).ajaxStop(function(){
    $(document.body).removeClass('running');
});

$(window).on('beforeunload', function(){
    if($(document.body).hasClass('running')){
        return "There is still a pending AJAX request.  Are you sure you want to leave?";
    }
});

$.ajax({
    url: "test.html",
    context: document.body
}).done(function() {
    $(this).addClass("done");
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T18:23:29.753

当您在完成函数中添加类时，您可能想要检查“this”变量所在的上下文。我的猜测是它指向你完成功能中的窗口，而不是你的按钮。

```
.done(function(){console.log(this);}); 
```

# ios - LED xCode 随机亮度的随机浮点数

> ID：15955986
> 
> 赞同：2
> 
> 时间：2013-04-11T18:18:20.133
> 
> 标签：ios, variables, random, led

我尝试使用随机浮点数来获得 iPhone LED 的随机亮度。

```
 float x = arc4random() % 11 * 0.1;
    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    if ([device hasTorch])
    {
        [device lockForConfiguration:nil];
        [device setTorchModeOnWithLevel:x error:NULL];
        [device unlockForConfiguration];
    } 
```

但不幸的是，它不起作用，因为亮度缺少 f。我想说的是：

```
 [device setTorchModeOnWithLevel:0.5f error:NULL]; 
```

在 0.5 之后是 af ，我认为这就是它不适用于 x 变量的原因。是否有任何方法可以将此 f 添加到变量中，或者以完全其他方式设置随机亮度？

谢谢！

# google-analytics - Google Analytics 跟踪横幅和表单

> ID：15955987
> 
> 赞同：0
> 
> 时间：2013-04-11T18:18:29.993
> 
> 标签：google-analytics, tracking, banner

我的网站上有 5 个横幅。所有这些横幅都链接到一个联系页面，带有另一个参数。根据单击的横幅，`<select>`设置下拉列表 ( ) 中的项目。

使用谷歌分析我想跟踪：

*   每个按钮被点击的次数
*   使用之前选择的横幅选项提交表单的用户数量

我可以，如果可以，我如何使用 Google Analytics 来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:22:51.030

你可能想看看这个，把它加为书签：[banner-clicks-monitoring-using-google-analytics](http://www.warriorforum.com/programming-talk/347517-banner-clicks-monitoring-using-google-analytics.html)

您可以使用 google 的自定义 url 来创建一个活动，然后您可以使用“自定义”url 参数，就像`&selecteditem=`您可以使用 php 或 javascript 来查找所需的值一样，您可以构建自定义 url+参数

链接：[创建自定义 URL - Google](http://support.google.com/analytics/answer/1037445?hl=en&ref_topic=1032998)

查找所选下拉项的可能 JavaScript 解决方案：使用元素的`value`属性。`<select>`例如：

```
// Set dropdown    
document.getElementById('your_select_id').value = '2';

// Get dropdown  
var value = document.getElementById('your_select_id').value;

alert(value);
// you would need to add or remove + add the new parameter
// once it is found you could make this into a function and
// call it on the selection change event. 
```

或者

您可以采用不同的方法，让您的 Google 跟踪代码完成工作。将此添加到您的链接属性中，对于表单帖子，您仍然需要在下面找到所选项目。为此，您需要启用“事件跟踪”，这必须在“个人资料”中设置。

```
onclick="_gaq.push(['_trackEvent', 'Link Sponsored', 'Clicked Sponsored']);" 
```

# ruby - 如何在 Ruby 中使用 Fog 列出 S3 文件夹中的所有文件

> ID：15955991
> 
> 赞同：23
> 
> 时间：2013-04-11T18:18:44.363
> 
> 标签：ruby, amazon-s3, fog

如何使用 Fog 列出特定 S3“目录”中的所有文件？

我知道 S3 不会将文件存储在文件夹中，但我需要一种方法将返回的文件限制在特定的“文件夹”中，而不是检索存储桶中的整个列表。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-11T18:18:44.363

使用`prefix`directory.get 方法上的选项。例子：

```
def get_files(path, options)
  connection = Fog::Storage.new(
    provider: 'AWS',
    aws_access_key_id: options[:key],
    aws_secret_access_key: options[:secret]
  )
  connection.directories.get(options[:bucket], prefix: path).files.map do |file|
    file.key
  end
end 
```

# iphone - Mac OS X Automator 中“Build Xcode Project”的输出是什么？

> ID：15955994
> 
> 赞同：1
> 
> 时间：2013-04-11T18:18:49.067
> 
> 标签：iphone, ios, xcode, automator

我正在尝试使用 Mac OS X Automator 来构建我的 iOS 应用程序 Xcode 项目。“开发人员 > 构建 Xcode 项目”下有一个 Automator 操作。

这个动作的输出是什么？

我可以将输出保存为文件，但我不知道它应该是什么扩展名。我也不确定应该如何处理输出。谢谢！

# mysql - 通过匹配记录查找mysql表

> ID：15955997
> 
> 赞同：2
> 
> 时间：2013-04-11T18:18:59.240
> 
> 标签：mysql, sql

我有四个表：`Couriers`、`Cars`和。`Planes``Boats`

Couriers 表有如下列：价格、目的地等。

最后三个表是不同类型的快递员，具有适合快递员类型的不同列（例如，汽车有圆柱柱）。但是，所有四个表都有列`IdCourier`，它将快递的类型（及其属性）与其价格、目的地等联系起来。

我知道`IdCourier`快递员，想知道它的价格，想知道它是汽车、飞机还是船。

我应该使用什么 Mysql 查询？

这种表结构有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:53:27.187

有很多方法可以做到这一点。如果您保留该表结构，则可以将其保留为 1 个查询：

```
SELECT `price`, 'car' as `mytype`
FROM Couriers 
JOIN Cars ON (Couriers.Id = Cars.IdCourier)
WHERE Cars.IdCourier = ?

UNION

SELECT `price`, 'plane' as `mytype`
FROM Couriers 
JOIN Planes ON (Couriers.Id = Planes.IdCourier)
WHERE Planes.IdCourier = ?

UNION

SELECT `price`, 'boat' as `mytype`
FROM Couriers 
JOIN Boats ON (Couriers.Id = Boats.IdCourier)
WHERE Boats.IdCourier = ?; 
```

但这相当昂贵。相反，我会亲自创建一个名为 CouriersTypes 的第五个表，其中包含**IdCourier**、**IdType**和**Type**字段。索引**IdCourier**以进行快速搜索。 **此示例假定 Courier 可以适合任何或所有类型（汽车、飞机、船）。** 现在您的查询变为：

```
SELECT `price`, `Type` 
FROM Couriers
JOIN CouriersTypes ON (Couriers.Id = CouriersTypes.IdCourier)
WHERE IdCourier = ?; 
```

对于大量数据，您的结果会快得多。 **如果**一个 courier 只能做一种类型，那么忘记那个例子，只需将**idType**和**Type**添加到 Couriers表中并直接查询即可。

```
SELECT `price`, `Type` 
FROM Couriers
WHERE Id = ?; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:40:39.713

结构是有道理的。查询的类型取决于您计划对数据执行的操作。

如果您想从 Cars 中检索特定的汽车，您可以使用以下内容：

```
SELECT * FROM Courier INNER JOIN Cars ON Cars.IdCourier = Courier.IdCourier WHERE Courier.IdCourier = ?
```

您总是可以给表起别名，以使语法更容易编写。此外，仅当您想要 SELECT 特定记录时才使用 WHERE 子句。

如果您可以发布创建表语句，它将有所帮助。

# php - php无法连接到mysql数据库

> ID：15955999
> 
> 赞同：0
> 
> 时间：2013-04-11T18:19:00.897
> 
> 标签：php, mysql

这是我的代码

```
 $db_handle = mysql_connect('127.0.0.1', 'root', '123456');
    if(!$db_handle)
        die(mysql_error()) 
```

当我调试代码时，刚刚得到一个页面“无法显示此页面”，并且来自 netbean 的弹出消息说“发生了套接字异常”，有人可以帮忙吗？谢谢

**编辑** 新代码：

```
$db_handle = new PDO('mysql:host=localhost;dbname=test','admin','123456');
    if($db_handle)
        echo 'connected'; 
```

它工作，但mysqli也没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:21:47.187

请停止使用`mysql_query`新项目，使用 mysqli 或 PDO

这是一个示例：

```
mysqli = new mysqli($host, $user, $dbpassword, $database);
if (mysqli_connect_errno()) 
{
    printf("Connection failed: %s\n", mysqli_connect_error());
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:45:18.350

$db_handle = new PDO('mysql:host=localhost;dbname=test','admin','123456'); if($db_handle) echo '已连接';