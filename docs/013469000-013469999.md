# StackOverflow 问答 13469000-13469999

# conflict - 如何使用 NSDocument 在 Mac App 中的 iCloud 冲突表中显示文档预览

> ID：13469000
> 
> 赞同：1
> 
> 时间：2012-11-20T08:15:01.513
> 
> 标签：conflict, icloud, nsdocument

我正在使用 NSDocument 创建一个 Mac 应用程序，它将自定义文档类存储到 iCloud。

只需对它进行代码签名、沙盒化和添加 iCloud 授权，我就可以很容易地让程序将文档存储到 iCloud；但是，我仍然遇到一个问题，当我触发 iCloud 冲突并且程序放下工作表允许用户解决冲突时，工作表中的行不显示文档的小图像（如 Preview 和 TextEdit ）。

此外，当我单击图像应该所在的区域（它是空白的）时，它会打开一个快速查看窗口，该窗口仅显示文档图标的图像以及一些其他信息，而不是像预览这样的实际文件的快照和 TextEdit 做。

我在 Apple 的文档中没有找到任何信息来解释我需要做些什么来实现与 Preview 和 TextEdit 相同的行为。

到目前为止，我对能够轻松获得自动保存和版本浏览器的所有功能以及保存到云的所有功能感到惊讶。NSDocument 似乎为开发人员完成了所有这些工作（解决 iCloud 冲突等），正如 Apple 的文档所说的那样，但我再次没有遇到这种其他行为，我不想通过编写代码来重新发明轮子不需要。

我认为答案可能在于实现快速查看缩略图（用于工作表中表格中的小图像）和快速查看预览，以便在单击工作表中的文档时实现较大的文档预览，但是这似乎需要做很多工作，如果我开始“捕获”食物链上的 NSDocument 例程，我担心会丢失 NSDocument 的其他一些内置功能。

有没有其他人遇到过这个问题并找到了最简单的解决方案？

更新：2012 年 12 月 25 日

我终于发现问题是我需要一个 QuickLook 生成器来显示 QL 缩略图（显示在冲突表的表格中）和 QL 预览（当用户单击缩略图时显示）

我最终创建了 QL 生成器项目，然后创建了一个工作区，我将我的主项目和 QL 生成器项目添加到其中。之后，我在主项目中添加了一个复制文件构建阶段，以将 QL 生成器复制到主应用程序包中。

# cocos2d-iphone - Cocos2dx 2.0 中的自定义动作更新方法

> ID：13469003
> 
> 赞同：1
> 
> 时间：2012-11-20T08:15:23.623
> 
> 标签：cocos2d-iphone, cocos2d-x

在我的 C++/Cocos2d-x 代码中，我有一些自定义的 Cocos2d 操作；在我的例子中，类继承`CCActionInterval`或`CCActionInstant`. 我注意到 Cocos2d-x 版本 1.0.1 和版本 2.0 之间的区别在于如何调用这些类的更新方法。在升级之前，更新方法总是至少调用一次时间=1.0。从我现在看到的情况来看，在 2.0 版本中，即时操作的更新方法仅在 time=0 时调用一次。总是这样吗？我可以假设，在 2.0 版中，在继承类`CCActionInstant`中，更新方法只会被调用一次，并且时间值总是为零吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:49:43.607

我先说这个，我认为你不应该担心这样的实现细节。当你创建子类时`CCActionInstant`，你总是可以假设你的子类是一个即时动作。如果将来实现细节发生变化，它们可能会使类变得更好，并且您的子类应该表现得更好。

话虽如此，您可能有理由担心此实现细节，因此，这是一个扩展的答案。

只要您不更新库，您就可以假设它总是在时间 0 被调用。Cocos2d-x 是非常动态的，并且根据 cocos2d-iphone 的版本而变化，所以变化是必然的。

* * *

在 cocos2d v2.0 中，所有的动作都由`CCActionManager`类来管理。因此，通过检查该类，您可以看到：

```
// main loop
void CCActionManager::update(float dt)
{
...
    if (m_pCurrentTarget->currentAction->isDone())
    {
        m_pCurrentTarget->currentAction->stop();

        CCAction *pAction = m_pCurrentTarget->currentAction;
        // Make currentAction nil to prevent removeAction from salvaging it.
        m_pCurrentTarget->currentAction = NULL;
        removeAction(pAction);
    }
} 
```

如您所见，`removeAction`当`isDone()`为真时调用。毫不奇怪，中的`isDone()`方法`CCActionInstant`总是返回 true，因此在执行一次后总是被删除:)。

# javascript - 通过ajax jquery调用向服务器发送参数

> ID：13469006
> 
> 赞同：1
> 
> 时间：2012-11-20T08:15:33.900
> 
> 标签：javascript, jquery, ajax, forms

> **可能重复：**
> [通过jquery一起提交表单和变量](https://stackoverflow.com/questions/8103374/submitting-form-and-variables-together-through-jquery)

我正在使用以下代码通过 ajax、jquery 将表单数据发送到服务器：

```
// this is the id of the submit button
$("#submitButtonId").click(function() {

    var url = "path/to/your/script.php"; // the script where you handle the form input.

    $.ajax({
           type: "POST",
           url: url,
           data: $("#idForm").serialize(), // serializes the form's elements.
           success: function(data)
           {
               alert(data); // show response from the php script.
           }
         });

    return false; // avoid to execute the actual submit of the form.
}); 
```

如果我必须发送我自己的参数/值而不是发布表单数据，我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:18:06.037

您可以简单地将表单数据与您自己的数据分开：

```
data : { 
  myData : 'foo',
  formData : $("#idForm").serialize()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:18:51.213

有几种方法可以做到。

您可以使用您需要发送的名称和值向表单添加一个隐藏字段。然后，当表单被序列化时，该字段也将被序列化。

另一种方法是在序列化表单数据的末尾添加您的内容

```
$("#idForm").serialize() + "&foo=bar" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:19:31.510

您可以通过附加附加字符串来序列化表单数据来做到这一点。像

$("#submitButtonId").click(function() {

```
var url = "path/to/your/script.php"; // the script where you handle the form input.
var data = $("#idForm").serialize() + "&mystring=" + someId
$.ajax({
       type: "POST",
       url: url,
       data: data, // serializes the form's elements.
       success: function(data)
       {
           alert(data); // show response from the php script.
       }
     });

return false; // avoid to execute the actual submit of the form. 
```

});

# svn - 如何与内部 svn 存储库共享自定义 Grails 插件？

> ID：13469011
> 
> 赞同：4
> 
> 时间：2012-11-20T08:15:42.690
> 
> 标签：svn, grails, plugins

我们希望使用 svn 与我们的开发人员共享一个自定义的内部插件。我想知道这是否可能以及我们如何实现这一目标。

我们不想只共享二进制文件，还要共享插件中的代码。

完美的解决方案是我们可以在 BuildConfig 中使用 svn 指示需要一个外部插件。

/马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:52:29.057

我建议您使用 Maven 存储库来共享内部插件，这是现在的首选方式。[请参阅http://grails.org/doc/latest/guide/plugins.html#repositories](http://grails.org/doc/latest/guide/plugins.html#repositories)上的“发布到 Maven 兼容存储库”部分。
[Nexus](http://www.sonatype.org/nexus/)或[Artifactory](http://www.jfrog.com/products.php)是两个不错的选择。您可以使用[发布](http://grails-plugins.github.com/grails-release/docs/index.html)插件发布您的插件。然后将您的 maven 存储库和插件添加到 BuildConfig.groovy：

```
repositories {
   ...
   mavenRepo "http://myserver:8081/nexus/content/repositories/releases/"
}
...
plugins {
   ...
   compile ":my-plugin:1.1"
} 
```

默认情况下，插件作为源发布，除非您使用 --binary 选项。

# android - 使用 ActionBar 和 Viewpager 实现选项卡导航

> ID：13469012
> 
> 赞同：0
> 
> 时间：2012-11-20T08:15:42.930
> 
> 标签：android, android-fragments, android-actionbar, android-viewpager

我有 3 个选项卡，其中第一个具有实际数据（列表视图），其余 2 个为空。我只是想实现标签导航。

在活动的 onCreate 我有：

```
mViewPager = new ViewPager(this);
mViewPager.setId(R.id.pager);
setContentView(mViewPager);
actionBar = getSupportActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
PagerAdapter adapter = new PagerAdapter((SlidingFragmentActivity) this,
            mViewPager);

adapter.addTab(actionBar.newTab().setText("Tab-1"),
            Fragment1.class, null);
adapter.addTab(actionBar.newTab().setText("Tab-2"),
            Fragment2.class, null);
adapter.addTab(actionBar.newTab().setText("Tab-3"),
            Fragment2.class, null); 
```

PagerAdapter**是**：

```
public static class PagerAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public PagerAdapter(SlidingFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    public int getCount() {
        return mTabs.size();
    }

    public SherlockFragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return (SherlockFragment) Fragment.instantiate(mContext,
                info.clss.getName(), info.args);
    }

    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    public void onPageScrollStateChanged(int state) {
    }

    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mViewPager.setCurrentItem(tab.getPosition());
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

这里 Fragment1 有一个列表视图，它使用 AsyncTask 从 Web 服务器获取数据。

Fragment2 只是一个空片段

```
public class Fragment2 extends SherlockFragment {

} 
```

**问题：**

当我选择**Tab-2**，然后选择 Tab **-3**并返回到**Tab-2**时，正在调用**Fragment1 的 onCreateView 。**虽然**Tab-2**显示白屏，但正在调用**Fragment1 的 onCreateView ，我使用 logcat 检查。**

我没有以正确的方式实现**PagerAdapter**吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:24:18.807

这种行为没有错。

ViewPager 试图最小化片段对内存的影响。如果你使用 FragmentPagerAdapter，你的 Fragment 的视图会在它离开屏幕后被销毁。

通常，ViewPager 会将视图保存在内存中当前视图的左侧和右侧，以启用快速选项卡切换。

如果您只有 5 个选项卡，并且您希望在内存中拥有此选项卡的所有视图，您可以修改使用[ViewPager.setOffscreenPageLimit](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)保留的视图数量。此方法允许您指定为每一侧保留多少视图。如果您只有 5 个选项卡，您可以将 4 设置为 offScreenPageLimit 以使每个视图都保存在内存中，即使用户位于外部选项卡之一。

请记住，视图被破坏是有原因的。这是一项性能优化，即使 offScreenPageLimit 为 10 可以在您的设备上运行，它也可能导致内存较少的设备崩溃。将限制设置为合理的数量并正确实现片段的[onDestroyView](http://developer.android.com/reference/android/app/Fragment.html#onDestroyView%28%29)和[oncreateView](http://developer.android.com/reference/android/app/Fragment.html#onCreateView%28android.view.LayoutInflater,%20android.view.ViewGroup,%20android.os.Bundle%29)方法。

# c - 使用自定义 ISR 通过 c 中的寄存器进行简单算术

> ID：13469021
> 
> 赞同：0
> 
> 时间：2012-11-20T08:16:11.497
> 
> 标签：c, assembly, cpu-registers, isr

我正在编写一个程序，我必须在其中制作自己的 ISR 并执行基本算术运算，例如当我将 AH 设置为 1 时，它应该添加 BX 和 CX 寄存器。当 AH 设置为 2 时，它应该对 BX 和 CX 寄存器进行减法运算。

我的问题是产生的结果不准确。我的代码如下：

```
#include<stdio.h>
#include<conio.h>
#include<fcntl.h>
#include<io.h>
#include<bios.h>
#include<dos.h>

void interrupt (*oldint65) ();
void interrupt newint65();

int result;
void main()
{
     clrscr();

    oldint65 = getvect(0x65);
    setvect(0x65, newint65);

    _AH = 1; _BX = 4; _CX = 4;
    geninterrupt (0x65);

    printf("\nResult of addition is: %d\n", result);

    setvect(0x65, oldint65);

     getch();
}
void interrupt newint65()
{
    switch (_AH){
    case 1:
        {
            result = _BX + _CX;
            break;
        }

    }

} 
```

# javascript - 可点击的图像嵌入代码

> ID：13469023
> 
> 赞同：0
> 
> 时间：2012-11-20T08:16:18.660
> 
> 标签：javascript, html

我想知道是否有人知道允许外部站点嵌入重定向回我的站点的可点击图像的最佳（或最安全）方法？

我知道我可以在 src 中使用纯 HTML 的绝对路径，但这比说 Javascript 解决方案更好吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:24:04.773

```
<a href="http://your-site.com">
  <img src="http://your-site.com/imgs/someimage.png" >
</a> 
```

# iphone - 需要在 iphone 中设置标签栏图像吗？

> ID：13469025
> 
> 赞同：0
> 
> 时间：2012-11-20T08:16:23.147
> 
> 标签：iphone, image, tabbar

我从模板中选择了基于标签栏的应用程序。因为我需要设置我尝试过的自定义图像，如下所示

```
 UIViewController *viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil] autorelease];
UINavigationController *view1=[[UINavigationController alloc]initWithRootViewController:viewController1];

UIViewController *viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];
UINavigationController *view2=[[UINavigationController alloc]initWithRootViewController:viewController2];

UIViewController *viewController3 = [[[SecondViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil] autorelease];
UINavigationController *view3=[[UINavigationController alloc]initWithRootViewController:viewController3];

UIViewController *viewController4 = [[[SecondViewController alloc] initWithNibName:@"MainViewController" bundle:nil] autorelease];
UINavigationController *view4=[[UINavigationController alloc]initWithRootViewController:viewController4];

self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.delegate=self;

self.tabBarController.viewControllers = [NSArray arrayWithObjects:view1,view2,view3,view4, nil];

[self.tabBarController.tabBarItem setImage:[UIImage imageNamed:@"h.png"]]; 
```

我尝试过的另一种方法

```
 [[_tabBarController tabBar] setBackgroundImage:[UIImage imageNamed:@"h.png"]]; 
```

在第二种方式中，应用了图像，但它是背景。

所以我需要像主页按钮这样的东西......

这个怎么设置。。。谢谢。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:21:38.257

你一个集`images`在`UIViewControllers's` `TabBarItems`喜欢..

```
viewcontroller1.tabBarItems.image = [UIImage imageNamed:@"your image1"];

viewController2.tabBarItems.image = [UIImage imageNamed:@"your image2"];

viewController3.tabBarItems.image = [UIImage imageNamed:@"your image3"];

viewController3.tabBarItems.image = [UIImage imageNamed:@"your image3"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:22:15.507

你可以这样做，

```
 NSArray *tabs =  tabBarController.viewControllers;
    UIViewController *tab1 = [tabs objectAtIndex:0];
    tab1.tabBarItem.image = [UIImage imageNamed:@"clockicon.png"];
    UIViewController *tab2 = [tabs objectAtIndex:1];
    tab2.tabBarItem.image = [UIImage imageNamed:@"nearest.png"]; 
```

# mysql - MySQL Stackbased 消息设计

> ID：13469026
> 
> 赞同：3
> 
> 时间：2012-11-20T08:16:41.417
> 
> 标签：mysql, database-design

假设您正在开发消息传递系统。一个非常基本的，你想保持简单，以便它易于备份，易于编码等。而且快速并允许随着时间的推移进行扩展。

您如何看待用于处理此问题的基于堆栈的系统？

例如，您有一条由 To、From、Timestamp 和 Message 组成的消息。您需要做的就是堆叠这些消息，当用户登录并想要检查他们的消息时，您需要做的就是遍历列表并找到 To == 当前登录用户的所有实例。

你认为这是处理这个问题的好方法吗？还是您认为有更好的方法？建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:35:35.227

I think it would be as simple as setting up like the images depict below and the poster described above... a users table and a messages table. Consider adding a flag to denote whether the message was read or not that is updated via an onClick.

![Messages table](../Images/488ba6db0db91751d25f56e9d901080b.png)

![Users table](../Images/a7ca2cc4105f8005fa18e711b80b4d08.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:22:24.043

您可以设计一个[域对象](http://en.wikipedia.org/wiki/Business_object)并使用[SPLObjectStorage](http://www.php.net/manual/de/class.splobjectstorage.php)来堆叠消息。

我会在 SQL 级别进行过滤（对 === 当前登录的用户），因此您只需加载用户需要阅读的消息。这减少了加载时间。

编辑：

所以你有一张桌子叫

## 消息

*   ID
*   发件人ID
*   收件人 ID
*   信息
*   发送日期

和一张名为

## 用户

*   ID
*   ...

与其他各种领域。这样，您可以通过`users.id = messages.senderId`和连接两个表`users.id = messages.recipientId`。您应该考虑在 senderId 和 recipientId 上放置两个索引。

# python - 连接到 Twitter 已经有令牌？

> ID：13469027
> 
> 赞同：0
> 
> 时间：2012-11-20T08:16:41.510
> 
> 标签：python, twitter, twitter-oauth, access-token, tweepy

我查看了可以在 Bitbucket、Github 和 PyPi 上找到的所有 Python Twitter API 包装器，但是**如果您已经拥有身份验证令牌，则无法找到一个允许您连接到 Twitter**的包装器。

我知道我可以使用 OAuth 令牌、OAuth 令牌机密、Twitter 令牌和 Twitter 机密生成身份验证令牌；但我想跳过那个处理+不提示已经有帐户的用户。

tweepy 库似乎很受欢迎。但缺少文档...

有人可以向我展示使用仅使用身份验证令牌的 Tweepy（或任何其他 Python Twitter 库）的推文邮资吗？

编辑：我最终开始与 Twython 合作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:22:37.877

您必须存储提供者在身份验证后返回的访问令牌和秘密，并在后续请求中使用它们进行读取或写入。我一直在使用 rauth ( [https://github.com/litl/rauth](https://github.com/litl/rauth) ) 并强烈推荐它。

* * *

**编辑**

假设您已经有一个有效的访问令牌和一个秘密，您可以创建一个服务对象并使用 twitter API 读取或写入数据（跳过身份验证步骤）。我在下面的[rauth](https://rauth.readthedocs.org/en/latest/)文档中包含了必要的步骤：

```
twitter = OAuth1Service(
    name='twitter',
    consumer_key='YOUR_CONSUMER_KEY',
    consumer_secret='YOUR_CONSUMER_SECRET',
    request_token_url='https://api.twitter.com/oauth/request_token',
    access_token_url='https://api.twitter.com/oauth/access_token',
    authorize_url='https://api.twitter.com/oauth/authorize',
    header_auth=True)

params = {'include_rts': 1,  # Include retweets
          'count': 10}       # 10 tweets

response = twitter.get('https://api.twitter.com/1/statuses/home_timeline.json',
                       params=params,
                       access_token=access_token,
                       access_token_secret=access_token_secret,
                       header_auth=True) 
```

# c - Postgresql C函数，不加载外部dll文件

> ID：13469028
> 
> 赞同：1
> 
> 时间：2012-11-20T08:16:45.067
> 
> 标签：c, database, visual-studio-2010, postgresql, dll

我在 Visual Studio 2010 中编写我的 dll 文件。

dll文件（名称fservice.dll），有一个外部函数，代码用c++编写（VS2010，我有dll和lib文件）

```
char * convert(char *) 
```

dll文件女巫具有c函数，可以导出和导入postgresql：

```
typedef char* (__cdecl *MYPROC)(char * value); 

PG_FUNCTION_INFO_V1(transform);

Datum
transform (PG_FUNCTION_ARGS)
{
  HINSTANCE hinstLib= LoadLibrary("fservice.dll"); 
  char * pointer;
  text *t = PG_GETARG_TEXT_P(0);

  if (hinstLib != NULL) 
  { 

      ProcAdd = (MYPROC) GetProcAddress(hinstLib, "convert");
      pointer=ProcAdd("text");
      FreeLibrary(hinstLib); 
  }

  /*
   * code 
   */

  PG_RETURN_TEXT_P(new_t);
} 
```

我有一个问题，因为 mod 不存在。我在写入之前检查的 dll 文件的路径。编译这个 c 函数，当我调试时我看到它 HINSTANCE hinstLib 它没有被创建。它不是 NULL 或任何值，它不存在。最后，我的 c 函数不使用外部 dll 形式的函数。

**如何加载 dll 并使用我的外部函数？**

我的外部函数形式 dll 和 LoadLibrary() 不是由 dll 程序调用的，而是由 Postgresql 调用的，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:02:50.707

这可能是一个简单的答案，但我没有看到创建函数调用。它会是这样的：

```
CREATE OR REPLACE FUNCTION transform(text) RETURNS text LANGUAGE C AS
'/path/to/dll', 'transform'; 
```

在您创建函数之前，PostgreSQL 不知道动态加载 dll....

# java - MultipartEntity 和 Json

> ID：13469031
> 
> 赞同：4
> 
> 时间：2012-11-20T08:16:57.360
> 
> 标签：java, android, json, upload, multipartentity

我想使用 MultipartEntity 将图像和 JsonObject 发送到 PHP 服务器。这是我的代码：

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(urlString);
File file = new File(imageend);
HttpResponse response = null;
MultipartEntity mpEntity = new MultipartEntity();
ContentBody cbFile = new FileBody(file, "image/jpeg");
StringBody sb;

try {
    sb = new StringBody(json.toString());

    mpEntity.addPart("foto", cbFile);
    mpEntity.addPart("json", sb);
    httppost.setEntity(mpEntity);
    response = httpClient.execute(httppost); 
```

我无法在 php 中阅读此内容，因为格式如下：

```
{\"test1\":\"Z\",\"test2\":\"1\"} 
```

由于反斜杠，我无法在 php 中阅读此内容。如果我通过 httppost 和 bytearrayentity 发布没有图像的 json，则没有任何反斜杠，我没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:27:13.637

使用以下 PHP：

```
string stripslashes ( string $str ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:27:28.643

也许您可以`\"`通过`\`在 PHP 端使用 preg_replace 来替换

# jquery - how to set background color of title bar of popup window in jquery

> ID：13469035
> 
> 赞同：0
> 
> 时间：2012-11-20T08:17:18.380
> 
> 标签：jquery, asp.net

Can any one please tel me that how to set background color of title bar of popup window in jquery.

Title text is "Email Options".

```
 function showEmailDlg() {

    var dlg = $('#dlgEmail').dialog(
           {
               draggable: true,
               position: 'center',
               modal: true,
               width: 1028,
               height: 568,
               title: 'Email Options',
               resizable: false

           }
       );

    dlg.parent().appendTo($("form:first"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:22:50.217

Assuming you're using jQuery UI (it looks like you are), as far as I'm aware there's no documented option for it, but jQuery UI uses CSS for styling and makes sure the classes are *fairly* clear.

In this case, the dialog title element (a `div`) has the class `ui-dialog-titlebar`. You can apply styling using a selector matching that (e.g., `#dlgEmail .ui-dialog-titlebar`). If you just want the bit containing the title and not the full title bar, that's a `span` with class `.ui-dialog-title`. But note that there's a lot of intricate styling done in the jQuery UI stuff, it's going to be a bit non-trivial.

Using any half-decent browser, you can discover this stuff at runtime. For instance, with Chrome, just left-click the title bar and choose "Inspect element".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:31:20.243

Try using,

```
$("#dlgEmail .ui-dialog-titlebar").css("background-color", "red"); 
```

# systemtime - 使用任何语言更改系统时间

> ID：13469036
> 
> 赞同：0
> 
> 时间：2012-11-20T08:17:22.130
> 
> 标签：systemtime

我想在窗口操作系统上更改系统时间，但我不想使用 kernel32.dll 因为我的操作系统会写一个日志条目@@

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:24:21.580

在 Python 中，您可以尝试使用[win32api.SetSystemTime](http://docs.activestate.com/activepython/2.5/pywin32/win32api__SetSystemTime_meth.html)。这是[pywin32的一部分](http://sourceforge.net/projects/pywin32/files/)

# cordova - 用新页面替换初始页面，包括新的 JS 调用。移动应用程序/phonegap 构建

> ID：13469037
> 
> 赞同：0
> 
> 时间：2012-11-20T08:17:24.960
> 
> 标签：cordova, jquery-mobile

Phonegap 构建有一个小故障，编译的应用程序加载一个启动页面，然后启动页面在 dom 完全加载之前关闭。他们目前正在解决这个问题，但我想如果我能弄清楚如何加载初始索引页面以向用户显示请等待消息等，那么当他们正在查看时，我可以加载真正的初始页面，包括加载所有 JS 文件等。可以这样做吗？因为现在看起来 JQuery mobile 将新页面加载到等待页面的 dom 中，因此没有加载 JS 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:15:29.320

首先，您能解决 AutoHideSplashScreen 的问题吗？否则，phonegap 往往会过早地隐藏启动画面。

添加加载页面有时会很有用 - 只需`$.mobile.changePage("start.html")`在加载完内容后调用。

但是，任何引用您的主页所需的脚本都必须位于加载页面的 head 部分 - ajax 加载页面的 head 部分总是被忽略。第二页正文中的脚本也可以使用，但使用这种方法可能会遇到一些副作用。

# c# - 电影院座位排c#

> ID：13469039
> 
> 赞同：2
> 
> 时间：2012-11-20T08:17:26.277
> 
> 标签：c#, winforms, web-services, webmethod

我最近完成了一个我一直在做的小项目，除了有一个小问题我正在努力解决。

该项目使用 C# Web 服务，使用 SOAP 客户端以及请求和响应类。该项目旨在保存输入的数据。它的作用是在电影院中保留一个座位，当我预订该座位并尝试再次选择该座位以在该行中（在表格内）找到另一个可用座位时，它将它们都显示为“0 ”。但是，当我在不同的行预订另一个座位时，它成功地将该数据保存在缓存中，但它不会在代码的“else if”语句中显示任何其他座位和行。

这是 Web 服务的 Web 方法

```
public string Name { get; set; } //gets and sets the Name from the ReserveSeatResponse
    public int Row { get; set; } //gets and sets the Row from the ReserveSeatResponse
    public int Seat { get; set; } //gets and sets the Seat from the ReserveSeatResponse

    private const int maxRows = 13; //sets the max amount of Rows in the Array tried setting the rows to 12, but since the array starts at 0, I had to set the Rows to 13)
    private const int maxSeats = 17; //sets the max amount of Seats in the Array (tried setting the seats at 16, but since the array starts at 0, I had to set it to 17)

    private bool[,]reservedSeats = new bool[13, 17]; //same description above, but this sets a boolean in the reserved seats, to check if its taken or no)
    private bool[,]reservedRows = new bool[13, 17]; //same description for the max row/seats.

    [WebMethod]
    public GetSeatResponse Booking (GetSeatRequest req)
    {

        GetSeatResponse resp = new GetSeatResponse();
      //  resp.Seat = req.SeatNumber;
      //  resp.Row = req.RowNumber;
        object abc = HttpContext.Current.Cache["CinemaReservation"];

        //if the cache does not exist
        if (abc == null)
        {
            //creates a blank multidimensional array
            reservedSeats = new bool[maxRows,maxSeats];

        }
        //if the cache exists
        else
        {
            //using the cache object as an array

            try
            {
                reservedSeats = (bool[,])abc;
            }
            catch
            {

            }
        }

        //if the seat is vacant
        if (reservedSeats[req.RowNumber, req.SeatNumber] != true)
        {
            resp.Name = req.Name;
            resp.Seat = req.SeatNumber;
            resp.Row = req.RowNumber;
            reservedSeats[req.RowNumber, req.SeatNumber] = true;
            HttpContext.Current.Cache["CinemaReservation"] = reservedSeats;
            return resp;
        }
        //if the seat is taken

        else if (reservedSeats[req.RowNumber, req.SeatNumber] != true)
        {
            bool breakTest = false;
            string Name = req.Name;
            int row = req.RowNumber;
            int seat = req.SeatNumber;
            for (int i = row; i < reservedSeats.GetLength(0); i++)
            {
                for (int j = seat; j < reservedSeats.GetLength(1); j++)
                {
                    if (reservedSeats[i, j] !=true )
                    {
                        resp.Name = Name;
                        resp.Row = i+1;
                        resp.Seat = j+1;
                        reservedSeats[i, j] = true;
                        breakTest = true;
                        break;
                    }

                }
                seat = 0;
                if (breakTest == true)
                {
                    break;
                }

            }

            //getNextSeat(req, resp, reservedSeats);
            HttpContext.Current.Cache["CinemaReservation"] = reservedSeats;

        }

        return resp; 
```

这是我被困在从 Web 服务调用的方法中的部分

```
if (resp.erroresp != true)
            {
                if ((resp.Row > 0) && (resp.Seat > 0))
                {
                    MessageBox.Show(String.Format("Hi there {0}!!, you have reserved a Seat at Row: {1} in Seat Number : {2}", resp.Name, resp.Row, resp.Seat));
                }

                else if (resp.erroresp != true)
                {
                    if ((resp.Row < 1) && (resp.Seat < 1))
                    {
                        MessageBox.Show(String.Format("Sorry, your selected Seat has been taken, however there is an available seat at row {0} in seat {1}", resp.Row, resp.Seat));
                    }
                }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:52:30.817

我发现您的代码存在一些问题。

**服务器端：**

*   `reservedRows`从未使用过。它的目的是什么？
*   您定义常量，即`maxRows`，但您不使用它们。写

    ```
    private bool[,]reservedSeats = new bool[maxRows, maxSeats] 
    ```

*   在这两项检查（无论是否坐下）中，您都使用相同的条件 - 这不会起作用。写吧：

    ```
    if (!reservedSeats[req.RowNumber, req.SeatNumber]) {
        // Seat is free
    } else {
        // Seat is taken
    } 
    ```

*   如果您想区分返回的座位是否是替代座位，您应该在您的回复中包含一个布尔标志，甚至更好的是这样的枚举：

    ```
    public enum ResultEnum {
      Ok,         // the requested seat is free
      Full,       // no seat is available
      Alternative // you got another seat
    } 
    ```

**客户端：**

*   您的检查有些多余（您检查了两次`resp.erroresp != true`）并且根本不清楚。

*   当使用带有枚举的方法时，您可以像这样检查：

    ```
    switch (resp.Result) {
       case ResultEnum.Ok:
         break;
       case ResultEnum.Full:
         break;
       case ResultEnum.Alternative:
         break;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:27:52.620

我在你的代码中发现了 2 个错误！首先，我看不到你的二维数组的初始化：

```
`if (abc == null)
    {
        //creates a blank multidimensional array
        reservedSeats = new bool[maxRows,maxSeats];

    }` 
```

其次，您的 if else 条件（reservedSeats[req.RowNumber, req.SeatNumber] != true）完全相同！

希望这可以帮助

# c# - 如何在给定路径 C# 中使用“SPACE”进行 mysql 备份或还原

> ID：13469040
> 
> 赞同：0
> 
> 时间：2012-11-20T08:17:35.023
> 
> 标签：c#, .net, mysql, mysqldump

当我尝试进行数据库备份或还原时，意味着它无法正常工作。因为我给出的路径包含“SPACE”

备份/恢复文件路径：“ *C:\Documents and Settings\prabhu\Desktop\Backup.sql* ”
（**Documents and Settings**包含“SPACE”）

我在 C# 中工作。

**代码：**

```
string directoryName = D:\\Shop Plan\\ERP Project\\Main Source\\OutPut\\Debug\\DBBackup;

string filePath = "C:\Documents and Settings\prabhu\Desktop\Backup.sql";

TextWriter textWriter = new StreamWriter(filePath);

textWriter.WriteLine("CD " + directoryName);

if (type == "Backup")
{
  textWriter.WriteLine("mysqldump -h " + "SERVERNAME"+ " -u " + "USERNAME" + " -p" + "PASSWORD" + " -P " + "PORT" + " --routines " + "DATABASE_NAME" + " -B> " + filePath);
}

else if (type == "Restore")
{
  textWriter.WriteLine("mysql -h " + "SERVERNAME" + " -u " + "USERNAME" + " -p" + "PASSWORD" +" -P " + "PORT" + " <" + filePath);
}

textWriter.Close();

Process processes = new Process();

processes.StartInfo.WorkingDirectory = directoryName ;

processes.StartInfo.FileName = "Backup.BAT";

processes.StartInfo.CreateNoWindow = true;

processes.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;

processes.Start();

processes.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:38:40.403

```
@"C:\Documents and Settings\prabhu\Desktop\Backup.sql" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:39:35.667

你确定是空格吗？也许你需要语法@ [http://www.dotnetperls.com/path](http://www.dotnetperls.com/path)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:00:24.353

线路：

```
string directoryName = D:\\Shop Plan\\ERP Project\\Main Source\\OutPut\\Debug\\DBBackup;

string filePath = "C:\Documents and Settings\prabhu\Desktop\Backup.sql"; 
```

改成：

```
string directoryName = "\"" + @"D:\Shop Plan\ERP Project\Main Source\OutPut\Debug\DBBackup" + "\"";

string filePath = "\"" + @"C:\Documents and Settings\prabhu\Desktop\Backup.sql" + "\""; 
```

# shell - CakePHP 2.1.1：从控制器执行外壳

> ID：13469048
> 
> 赞同：4
> 
> 时间：2012-11-20T08:18:15.973
> 
> 标签：shell, cakephp, controller, console

我正在尝试通过 AJAX 请求**从我的控制器执行 Shell 。**

在我的控制器中：

```
public function log_import() {
    $this->autoRender = false;

    App::import('Console/Command', 'AppShell');
    App::import('Console/Command', 'IzigetlogShell');

    $job = new IzigetlogShell();
    $job->dispatchMethod('main');

    echo "REPONSE";

  } 
```

还有我的外​​壳：

```
<?php
App::import('Core', 'Controller');
App::import('Controller', 'Suivis');

class IzilogShell extends AppShell {

    public $uses = array('Suivi');

        -- DU CODE --  

          $this->Suivi = new SuivisController();
          $this->Suivi->constructClasses();

          $exist_date = $this->Suivi->find('first',
              array(
                  'conditions' => array('Suivi.date' => $date_calcul)
              ));

      } 
```

但我总是收到相同的错误消息： **PHP Fatal error: Call to undefined method SuivisController::find() in C:\wamp\www\iziboxLogs\app\Console\Command\IzigetlogShell.php on line XX**

我试图从控制台执行 shell，我得到了同样的错误。

有任何想法吗 ？谢谢，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:03:24.347

简短的回答是：你没有！

它违反了蛋糕所代表的MVC。您需要将“共享”代码移动到模型中，并且仅在这两种情况下都使用此模型。不是控制器（这是模型和“webbrowser”的链接/逻辑，而不是你的外壳）。而不是控制器内部的外壳（因为外壳是模型和“CLI”的链接/逻辑）。

所以：

*   模型包含所有代码
*   Shell 使用 Model 及其方法
*   控制器使用模型及其方法

=> 干燥清洁

那么您也不需要单个 App::import（或更好的 App::uses）语句。

PS：如果你碰巧有很多非模型代码，你也可以在APP/Lib中做一个Lib作为你的常用类。

PPS：`public $uses = array('Suivi');`无论如何都适用于模型，而不适用于控制器（顺便说一下，文档很特别）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:50:53.950

通过做这个

```
$this->Suivi = new SuivisController(); 
```

`this->Suivi`变成 SuiviController 而不是 Suivi 模型了。

但是您随后将其用作模型：

```
$exist_date = $this->Suivi->find(...); 
```

该`find()`方法是模型方法，而不是控制器方法。因此，如果您确实需要调用该`find()`方法，则根本不需要实例化`SuivisController`。

# c++ - 在 C++ 中使用 UDP 开发用于文件传输的 RDP

> ID：13469050
> 
> 赞同：2
> 
> 时间：2012-11-20T08:18:27.190
> 
> 标签：c++, network-programming, udp, file-transfer

我需要有关如何为使用 UDP 的基本文件传输程序设计消息格式、窗口数据结构和确认以及错误检查的帮助。我正在寻找算法或一些基本的源代码来帮助我完成作业。

这是我之前做的 TCP 的服务器。我需要窗口结构和重传、要丢弃的数据包编号、损坏的数据包编号等配置。

```
#include "unp.h"
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int Read(int,void*,size_t,int,SA*,socklen_t);
void Write(int,void*,int,int,SA*,socklen_t);
int packetSend(int ,SA* ,socklen_t,int );
int recieveAck(int ,SA* ,socklen_t,int );

const long packetSize = 1024;

 struct Header
 {
  int seqNum,ackNum;
  char da[32];
  char sa[32];

 };

 struct Seg
  {
     Header head;
 char data[packetSize];
  };

    Seg *buffer;
    int nOfPackets;

int    main(int argc, char **argv)
{
int sockfd;
struct sockaddr_in  servaddr, cliaddr;

sockfd = socket(AF_INET, SOCK_DGRAM, 0);

bzero(&servaddr, sizeof(servaddr));
servaddr.sin_family      = AF_INET;
servaddr.sin_addr.s_addr = htonl(INADDR_ANY);
servaddr.sin_port        = htons(SERV_PORT);

bind(sockfd, (SA *) &servaddr, sizeof(servaddr));
    dg_echo(sockfd, (SA *) &cliaddr, sizeof(cliaddr));
}

void dg_echo(int sockfd, SA *pcliaddr, socklen_t clilen)
{
int n;
socklen_t   len;
char        *mesg;
    int size,bytesRead;

    while(1){
    len = clilen;
    mesg= new char [MAXLINE];

        n=Read(sockfd, mesg, MAXLINE, 0, pcliaddr, len);
        cout<<"File Name "<<mesg<<endl;

        int                 sockfd2;
    struct sockaddr_in  servaddr;

    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port = htons(9878);
    inet_pton(AF_INET,"127.0.0.1"/*argv[1]*/, &servaddr.sin_addr);

    sockfd2 = socket(AF_INET, SOCK_DGRAM, 0);
    //dg_echo(sockfd, (SA *) &cliaddr, sizeof(cliaddr));
       socklen_t servlen =  sizeof(servaddr);
    // pcliaddr= &cliaddr;

       ifstream infile (mesg,ifstream::binary);

infile.seekg(0,ifstream::end);
    size=infile.tellg();
    infile.seekg(0);

    nOfPackets = (size/packetSize)+1;
    cout<<"File Size: "<<size<<endl;

    cout<<"Number of Packets: "<<nOfPackets<<endl;
    Write(sockfd2,&size,4,0,(SA *)  &servaddr,servlen );

    buffer = new Seg [nOfPackets];

    bytesRead = 0;
    int count = 0;

     while(bytesRead!=size)
      {
     if(size-bytesRead<packetSize)
      {
          int remaining = size-bytesRead;
          buffer[count].head.seqNum = count;
          infile.read (buffer[count].data,remaining);
          bytesRead += remaining;
       }
     else
      {

          buffer[count].head.seqNum = count;
          infile.read (buffer[count].data,packetSize);
          bytesRead += packetSize;
          count++;
      }
     }

      packetSend (sockfd2,(SA*) &servaddr,servlen,0);

    delete[] mesg;
    infile.close();

}
}

void Write(int sockfd,void* sendline,int lent,int flg, SA* pcliaddr,socklen_t len)
{
sendto(sockfd,sendline, lent, 0, pcliaddr, len);

}

int Read(int sockfd,void* recvline,size_t lent,int flg,SA* pcliaddr,socklen_t len)
{
int n;
n = recvfrom(sockfd,recvline,lent,0, pcliaddr, &len);
return n;
}

int packetSend(int sockfd,SA* pcliaddr,socklen_t len,int i)
{
if(i==nOfPackets)
    return i;
else
{
Seg *seg = new Seg;
seg = &(buffer[i]);
Write(sockfd,seg,sizeof(*seg),0,pcliaddr, len);

if(recieveAck(sockfd,pcliaddr,len,i)==i)
packetSend (sockfd,pcliaddr,len,++i);

else
packetSend (sockfd,pcliaddr,len,i);

}

}

int recieveAck(int sockfd ,SA* pcliaddr,socklen_t len,int num)
{

Header ack;
Read(sockfd, &ack, sizeof(ack), 0, pcliaddr, len);
if(ack.ackNum == num)
{
    return ack.ackNum;
}

else return -1;

} 
```

# probability - 根据每个值的过去概率计算新概率

> ID：13469051
> 
> 赞同：1
> 
> 时间：2012-11-20T08:18:39.070
> 
> 标签：probability

我想根据过去发生的事件列表计算百分比概率。
数据看起来类似于此简化表，例如，当第一个值在过去为 8 时，事件发生的可能性为 72%。

```
1   76%
2   64%
4   80%
6   85%
7   83%
8   72%
11  70% 
```

完整表的范围从 0 到 1030，有 377 行，但每天都在变化。我想向函数传递一个值，例如 3，并返回事件发生的百分比概率。我不需要确切的代码，但希望能指出正确的方向。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:15:11.013

根据您在问题评论中的回答，我建议使用插值——线性插值是最简单的答案。根据电子表格中的系列，概率模型看起来并不合适（第 1 列和第 3 列之间似乎没有明确的关系）。

举一个例子来说明这是如何工作的：假设你想要某个点 p 的概率，这在数据中是未观察到的。您观察到的*小于*p 的最大值是 p_low（对应概率为 f(p_low)），大于 p 的最小值是 p_high（概率为 f(p_high)）。您对 p 的估计是：

```
interval = p_high - p_low
f_p_hat = ((p-p_low)/interval*f_p_low) + ((p_high-p)/interval*f_p_high) 
```

这将对 p_low 和 p_high 的值的 pa 加权平均值进行估计，权重由 p 和 p_low 以及 p 和 p_high 之间的距离给出。例如，如果 p 在 p_low 和 p_high 之间等距，则 f_p_hat（您对 f(p) 的估计）只是 p_low 和 p_high 的平均值。

现在，如果您有理由怀疑端点处的估计值不准确（可能是由于样本量小），线性插值可能不起作用。如果是这样，就有可能对 p 周围的点的邻域进行（可能加权的）最小二乘拟合，并将其用作预测。如果是这种情况，我可以更详细地介绍一下。

# c++ - 无法在 Visual Studio 2005 中构建 Qt 项目

> ID：13469064
> 
> 赞同：0
> 
> 时间：2012-11-20T08:19:31.533
> 
> 标签：c++, qt4

当我在 Visual Studio 2005 中构建我的项目时，最终出现以下错误致命错误 LNK1181：无法打开输入文件“QtCored.lib”。请让我知道我在哪里失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:16:20.110

当我们将 Qt 4.7.3 与 Visual Studio 2005 集成并尝试在 IDE 中创建一个 Qt 项目时，它给出了一个致命的错误，指出缺少 Qtcored.lib。实际上，如果你去 ..\Qt\4.7.3\lib 文件夹，没有什么叫做 Qtcored.lib ，但是有 Qtcored4.lib 。我认为他们已将其重命名（不确定）。现在转到 projproperties->linker->input->additionaldependency 并从那里删除 Qtcored.lib 并添加 Qtcored4.lib。现在，如果您构建项目，它将正常工作..

干杯.. :)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T08:25:20.740

Visual Studio 无法找到库文件 QtCored.lib。您必须在 Visual Studio 设置中指定它的库路径。

# java - Google Calendar API：更新事件提醒

> ID：13469066
> 
> 赞同：5
> 
> 时间：2012-11-20T08:19:38.320
> 
> 标签：java, android, google-calendar-api, android-calendar

我正在使用谷歌日历 API。我已通过此代码向事件添加提醒

```
ContentValues values1 = new ContentValues();

values1.put("event_id", eventId);

values1.put("method", 1);

values1.put( "minutes", reminderValue );

Uri reminder = Uri.parse("content://com.android.calendar/reminders");

this.getContentResolver().insert(reminder, values1); 
```

我的问题是我知道如何添加提醒。我需要查询以更新提醒。通过这段代码，它为一个事件添加了多个提醒。

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-29T04:50:13.410

我认为您不能直接更新已设置的提醒。首先您应该使用以下代码获取需要更新的提醒的 ID：

```
String[] projection = new String[] {
        CalendarContract.Reminders._ID,
        CalendarContract.Reminders.METHOD,
        CalendarContract.Reminders.MINUTES
};

Cursor cursor = CalendarContract.Reminders.query(
    contentResolver, eventId, projection);
while (cursor.moveToNext()) {
    long reminderId = cursor.getLong(0);
    int method = cursor.getInt(1);
    int minutes = cursor.getInt(2);

    // etc.

}
cursor.close(); 
```

然后使用此提醒ID，您必须使用以下代码删除已设置的提醒：

```
Uri reminderUri = ContentUris.withAppendedId(
CalendarContract.Reminders.CONTENT_URI, reminderId);
int rows = contentResolver.delete(reminderUri, null, null); 
```

然后使用您的代码再次插入提醒。希望这有助于...

# php - 以编程方式设置网页的默认缩放？

> ID：13469067
> 
> 赞同：10
> 
> 时间：2012-11-20T08:19:54.493
> 
> 标签：php, html, css

是否可以在网站上设置默认缩放级别？例如，我是否可以对[我的网站](http://www.fedri.com)进行编码，使其在用户打开时放大到 125%？

我的网站正文有此代码

```
<body ID="phpbb" class="section-{SCRIPT_NAME} {S_CONTENT_DIRECTION}"> 
```

如何将此缩放代码放入其中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T08:22:00.313

添加`zoom: 125%;`到车身样式

```
body {
color: #536482;
background-color: white;
zoom: 125%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:27:53.713

这并不能直接回答您的问题，但我建议您考虑另一种选择。

如果您对页面使用相对大小（例如`em`），那么您可以在一个位置设置站点的基本大小，整个页面将相应地放大和缩小。

例如，如果我想要默认大小的 125%：

```
body { font-size: 1.25em } 
```

然后，假设我想在标题周围留出合理的边距`<div>`：

```
#header { margin: 1em } 
```

如果我然后返回并将主体上的基本大小更改为其他内容，我的页眉上的边距将随之缩放。如果您以相对单位制作整个页面，这将变得非常容易。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T08:22:31.857

您可能需要检查`zoom`CSS 属性。但请记住，它是 CSS3 的一部分，因此，您可能会发现它在旧 IE 上的行为很奇怪。这也与界面缩放完全分开。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-09-10T09:11:16.093

```
webView.setInitialScale((int) getResources().getDimension(R.dimen._50sdp));
                            webView.getSettings().setLoadsImagesAutomatically(true);
                            webView.getSettings().setJavaScriptEnabled(true);
                            webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
                            webView.loadDataWithBaseURL(null,htmlContent,"text/html","UTF-8", null);
                            webView.getSettings().setBuiltInZoomControls(true);
                            webView.getSettings().setSupportZoom(true);
                            webView.getSettings().setDisplayZoomControls(true);
                            webView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR); 
```

# ruby - ruby 的 C 扩展中是否有任何用于线程安全的锁定机制？

> ID：13469074
> 
> 赞同：1
> 
> 时间：2012-11-20T08:20:30.783
> 
> 标签：ruby, ruby-c-extension

像 python 的 Py_BEGIN_ALLOW_THREADS 和 Py_END_ALLOW_THREADS 之类的东西？

# php - PHP & MySQL - 哪种变量类型最适合这个数组？

> ID：13469075
> 
> 赞同：2
> 
> 时间：2012-11-20T08:20:37.787
> 
> 标签：php, mysql, sql, arrays, int

问题：在标题中说明

项目：我的 PHP Mafia/Mobsters 策略游戏

提问的原因：我不确定如何将这个问题写进一个有点相关的谷歌搜索中。

我想知道我应该为数组使用哪种 MySql 变量类型。我会将这个数组分解成一个 ID 列表，其中包括该玩家暴民中的所有人。

下面的示例 MYSQL 数据：

```
PlayerId -------- Mob //Lables

134 ------------- '23','59','12','53','801' //Values 
```

然后，这将`explode()`在 PHP 中被分解成一堆包含该人暴徒中玩家 IDS 的整数。

我希望暴民字段具有无限的字符长度，以便玩家可以拥有 HUGEE 暴徒。

我想我可能可以简单地使用`longtext`or`set`类型，但我不完全确定。一旦我发布游戏，我不希望以后出现任何错误，我希望我的方法保持干净和正确。

非常感谢您花时间阅读本文，希望对您有所帮助。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T08:24:03.070

您应该创建一个将玩家与生物关联的表格：

```
 CREATE TABLE PlayerMobs (
   PlayerId INT UNSIGNED NOT NULL,
   MobId    INT UNSIGNED NOT NULL,
   FOREIGN KEY (PlayerID) REFERENCES Players (PlayerID),
   FOREIGN KEY (MobID)    REFERENCES Mobs    (MobID)
); 
```

然后根据需要[将](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)其与查询中的其他表连接起来。

我添加了[`FOREIGN KEY`约束](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)以确保表中仅存在有效值`PlayerID`和`MobID`值`PlayerMobs`，但请注意，这些约束目前仅适用于`InnoDB`存储引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:07:05.260

你可以试试

```
 CREATE TABLE PlayerMobs (
 PlayerId INT UNSIGNED NOT NULL,
 MobId   Text UNSIGNED NOT NULL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T01:09:23.160

我很久以前就这样做了，但是在浏览我的帐户时碰巧遇到了这个问题。

没有任何特定的“暴民”。你的“暴民”基本上就像一个朋友列表。它不是一个团体。这只是一群与你有关的人。

我相信我只是为“暴民成员”做了一行，然后把其他玩家的 id 用逗号分隔，然后在 PHP 中我用逗号作为分隔符爆炸了字符串。

# qt - 水平拉伸 QGraphicsView

> ID：13469078
> 
> 赞同：-1
> 
> 时间：2012-11-20T08:20:58.440
> 
> 标签：qt, qt4, qgraphicsview, qgraphicsscene

如何向 QGraphicsView 添加水平拉伸功能？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:07:16.483

我假设您想拉伸图形视图的内容：[`QGraphicsView::scale()`](http://qt-project.org/doc/qt-4.8/qgraphicsview.html#scale)

```
myGraphicsView->scale(stretch, 1); 
```

# android - 带有主题的Android中的DialogFragment

> ID：13469084
> 
> 赞同：18
> 
> 时间：2012-11-20T08:21:11.220
> 
> 标签：android, user-interface

我正在用 android 构建我的第一个应用程序。我制作了一个 dialogFragment，但它看起来不够好。为了有一个样式和一个主题，我使用了这个`setStyle(DialogFragment.STYLE_NORMAL,0)`。我想要的是片段的边缘像框架一样是黑色的，或者它的角是圆形的。我认为我必须在xml中编写自己的样式并将其放入样式中，但我不确定。有人可以指出我正确的方向吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-20T08:44:29.400

As you say you'll need to create the style that you want to apply, and then assign it to your `DialogFragment` as the second parameter in the `setStyle()` method call. You must remember to make this call before you call `show()`.

So, if you create a new style named "MyStyle" in res/values/styles.xml:

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    .
    .
    .
    <style name="MyStyle">
        .
        .
        .
    </style>
    .
    .
    .
</resources> 
```

Then use this in your setStyle call:

```
DialogFragment dial = (DialogFragment) Fragment.instantiate(this, MyDialogFragment.class.getCanonicalName());
dial.setStyle( DialogFragment.STYLE_NORMAL, R.style.MyStyle );
dial.show(); 
```

# android - 如何在 ActionBarSherlock 中更改选项卡背景

> ID：13469085
> 
> 赞同：0
> 
> 时间：2012-11-20T08:21:11.580
> 
> 标签：android, tabs, actionbarsherlock

我正在为选项卡视图使用 actionbarsherlock，我想更改选项卡的背景图像。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:32:50.447

是的，使用 setIcon()：

```
tab1.setIcon(R.drawable.tab_home_unselect); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:32:32.937

我不知道是否可以将可绘制对象设置为操作栏选项卡的背景。

但是当然可以更改操作栏的颜色。您可以使用[Android 操作栏样式生成器](http://jgilfelt.github.com/android-actionbarstylegenerator/)生成包含您喜欢的所有颜色的样式。

生成器应该为您的操作栏创建一个包含所有需要的样式和可绘制文件的 zip。您知道可以在应用程序主题或应该使用该样式的活动的主题中引用此样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:40:35.663

你有没有尝试过，

```
getSupportActionBar().setBackgroundDrawable(getResources().getDrawable(R.drawable.menu_head)); 
```

有关详细信息，请参阅这篇[文章](https://stackoverflow.com/q/12444781/1626878) 和这篇[文章](https://stackoverflow.com/q/11184999/1626878)

**编辑 -**如果有帮助， 请检查此[链接。](https://stackoverflow.com/a/12225575/1626878)

# delphi - NexusDB 中的 FullTextIndex，如何标记搜索字符串

> ID：13469086
> 
> 赞同：0
> 
> 时间：2012-11-20T08:21:16.133
> 
> 标签：delphi, full-text-indexing, nexusdb

我们将 NexusDB 用于小型数据库。我们有一个定义了 FulltextIndex 的表。索引配置有以下选项：

*   字符分隔符
*   ccPunctuationDash
*   cc标点符号其他

用户在编辑框中输入搜索文本，然后使用以下 WHERE 子句构造 SQL 语句（当然，%s 替换为 Editbox.text）：

```
WHERE CONTAINS(FullIdx, ''%s'') 
```

当用户在编辑框中输入多个单词时，这会出错，因为这两个单独的单词应该嵌入到 WHERE 子句中，如下所示：

```
WHERE CONTAINS(FullIdx, 'word1' and 'word2') 
```

所以我必须解析文本框的值，扫描它的空格并在这些点分割文本。这让我想知道是否可以解析全文索引的每个设置的搜索文本，使用全文索引的实际定义来创建正确的 where 子句。

因此，如果在 FulltextIndex 定义中启用了 ccPunctuationDash，则搜索文本也会在“-”上拆分。

如果您想到它，它与创建索引并标记所有字符串时的过程完全相同......

我的问题：根据 FUlltextIndex 的设置标记搜索字符串的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T03:07:36.363

最简单的方法是......创建一个带有字符串字段的空#temporary 表，其全文索引设置与您的真实表相同。设置`TnxTable.Options`为包括`dsoAddKeyAsVariantField`. 将要标记的字符串加载到字符串字段中，然后查看由全文索引索引的表。Presto，您会显示一个额外的字段，即已排序的标记。您现在可以遍历表以读取令牌。

# php - .NET 对 Rijndael 256 的 PHP 解密

> ID：13469089
> 
> 赞同：1
> 
> 时间：2012-11-20T08:21:36.087
> 
> 标签：php, encryption, rijndael

我从 .NET 网站获取 base64 编码的令牌，并希望在 PHP 中对其进行解码。我从程序员那里收到了密钥和 IV，但我无法解密。我阅读了很多关于填充问题的信息，但建议的解决方案似乎都不适用于我的问题 - 我只是无法解密文本。

```
function decryptToken($decoded, $key, $iv){

    $decrypted = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $decoded,
            MCRYPT_MODE_CBC, $iv);

    return $decrypted;
} 
```

参数是 base64_decode($token) 和解码的 Key 和 IV。

有什么建议么？

# python - Cron 作业错误：访问数据存储区和发送电子邮件

> ID：13469095
> 
> 赞同：2
> 
> 时间：2012-11-20T08:21:43.917
> 
> 标签：python, google-app-engine, cron

对于我的网络应用程序，我编写了这个 cron 作业，它应该访问 Google App Engine 的数据存储区中的数据，解析网站，然后通过电子邮件发送结果。

但是，`404`在请求 cron 作业时出现错误，并且不知道如何解决此问题。这是我访问数据库的方式吗？

谢谢

这是我的`update.py`：

```
from google.appengine.ext import db

import urllib2
import string

import myWebapp

## CRON 1:                                                                      
## Check all x in B.db if courses changed                                   
##  Yes:                                                                        
##    email x                                                                   
##    if x.things all != 'Closed':                                             
##        remove from db                                                        

boo = myWebapp.B.all()

if boo.count() >0:
    for b in boo.run(batch_size=1000):
        currentThings = b.mThings
        newThings = myWebapp.updateStatus(b.mThings)
        if currentThings != newThings:
            b.mThings = newThings
            myWebapp.sendTextAndEmail(b.mEmail, b.mPhoneNumMail,
                         b.mThings, "myWebapp Update")
        numClosed = 0
        for c in b.mThings:          
            if c[2] == 'Closed':
                numClosed += 1
        if numClosed == 0:
            b.delete() 
```

这是我的 cron.yaml：

```
cron:
- description: check things and email if change
  url: /.update.py
  schedule: every 5 minutes
  timezone: US/Pacific 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:43:20.287

文档说明：

> 要测试 cron 作业，请以管理员身份登录并在浏览器中访问处理程序的 URL。

[保护 CRON 的 URL](https://developers.google.com/appengine/docs/python/config/cron#Securing_URLs_for_Cron)

如果您仍然收到 404，建议您制作一个“普通”处理程序并从那里获取它。

您访问数据库的方式或其他方式与 404（未找到）错误无关。

# mysql - 错误代码：1452。无法添加或更新子行

> ID：13469099
> 
> 赞同：2
> 
> 时间：2012-11-20T08:21:52.367
> 
> 标签：mysql

我正在尝试将数据加载到下表：

```
-- -----------------------------------------------------
-- Table `mydb`.`Gener`
-- -----------------------------------------------------    
CREATE  TABLE IF NOT EXISTS `mydb`.`Gener` (
  `Movie_Name` VARCHAR(100) NOT NULL ,
  `Genres_Type` VARCHAR(100) NULL ,
  `Movie_Year` VARCHAR(100) NOT NULL ,
  PRIMARY KEY (`Movie_Name`, `Movie_Year`) ,
  CONSTRAINT `fk_Gener_Movie1`
    FOREIGN KEY (`Movie_Name` , `Movie_Year` )
    REFERENCES `mydb`.`Movie` (`Name` , `Year` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)

-- -----------------------------------------------------
-- Table `mydb`.`Movie`
-- -----------------------------------------------------    
CREATE  TABLE IF NOT EXISTS `mydb`.`Movie` (
  `Name` VARCHAR(100) NULL ,
  `Lenght` INT(20) NULL ,
  `Year` VARCHAR(100) NOT NULL ,
  `id` INT(5) NOT NULL AUTO_INCREMENT ,
  PRIMARY KEY (`id`, `Name`, `Year`) )

-- -----------------------------------------------------
-- Table `mydb`.`tempGener`
-- -----------------------------------------------------    
CREATE TABLE `mydb`.`tempGener' (
    `mGName` VARCHAR(100),
    `mGType` VARCHAR(100),
    `mGYear` VARCHAR(100)
) 
```

我成功地将数据上传到以下两个表。

*   `tempGener`,
*   `movie`.

现在我尝试`Gener`使用以下命令将数据加载到我的表中，

```
INSERT INTO gener (Movie_Name, Genres_Type, Movie_Year)
(SELECT movie.Name, tempgener.mGType , movie.Year
 FROM tempgener, movie) 
```

但我收到以下错误：

> 错误代码：1452。无法添加或更新子行：外键约束失败（`mydb3`. `gener`, CONSTRAINT `fk_Gener_Movie1` FOREIGN KEY ( `Movie_Name`, `Movie_Year`) REFERENCES `mydb`. `movie` ( `Name`, `Year`) ON DELETE NO ACTION ON UPDATE NO ACTION）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:22:11.500

我解决了我的问题，问题是，我缺少 WHERE 语句。感谢每个人给我快速响应。

# iphone - 如何在iphone中的按钮内创建id发件人按钮

> ID：13469102
> 
> 赞同：2
> 
> 时间：2012-11-20T08:22:02.433
> 
> 标签：iphone

我是 iPhone 编程新手。我在其中使用了一个按钮，我用 id sender 以编程方式创建了另一个按钮，我想使用标签在该 id sender 按钮内使用多个按钮。现在我做了一些编码，但它显示了一些异常.当我在`[self somemethodname:(id)sender];`这里给出问题时，实际上`[self playOrPause]`我已经在另一个按钮中使用了这个。如何解决这个问题请任何人告诉我。谢谢

```
- (void)playOrPause
{
    UIButton *aa = [UIButton buttonWithType:UIButtonTypeCustom]; 
    [aa addTarget:self action:@selector(play:)forControlEvents:UIControlEventTouchUpInside];
    NSLog(@"hi iam 2");
    [self play:(id)sender];
}
-(void)play:(id)sender
{
 UIButton *instanceButton = (UIButton*)sender;
        instanceButton.tag++;
        if (instanceButton.tag == 1) 
        {
            NSLog(@"hi");
        } else if (instanceButton.tag == 2) 
        {
            NSLog(@"hi2");
        } 

  } 
```

# ruby-on-rails - 当 WHERE 子句中有 OR 时如何编写复合索引？

> ID：13469103
> 
> 赞同：0
> 
> 时间：2012-11-20T08:22:02.927
> 
> 标签：ruby-on-rails, postgresql

我想添加一个复合索引来加速以下查询：

```
User.where("name = 'bob' AND (x IS TRUE OR y = 'foo' OR z = 'bar') AND image_url <> ''") 
```

**我如何解释`x`、`y`和`z`？**

我尝试像这样添加一个索引：

```
# rails migration file
add_index :users, [ :name, :x, :y, :z, :image_url ], name: "index_users_on_blah" 
```

但它似乎没有做任何事情......或者至少我在做`EXPLAIN`它时没有注意到任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:32:13.777

使用部分索引可能会更好，并且列应该有不同的顺序：

```
create index index_users_on_blah on users (name, x, y, z) where image_url <> '' 
```

不确定 Rails 是否支持“部分索引”，但您应该重新排列索引列：

```
create index index_users_on_blah on users (name, image_url, x, y, z) where image_url <> '' 
```

您应该阅读以下内容：

*   [11.3\. 多列索引](http://www.postgresql.org/docs/devel/static/indexes-multicolumn.html)
*   [11.5。组合多个索引](http://www.postgresql.org/docs/devel/static/indexes-bitmap-scans.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:32:15.800

如果这是您感兴趣的唯一一组条件，您可以尝试创建一个索引：

```
 create index index_name
 on table_name (
   name,
   case when x IS TRUE OR y = 'foo' OR z = 'bar'
        then true
        else false
   end) 
```

...并将您的查询重写为：

```
 name = 'Bob' and
 case when x IS TRUE OR y = 'foo' OR z = 'bar'
      then true
      else false
 end 
```

我不确定 PostgreSQL 查询优化器对空格有多敏感，但请先尝试一下。

缺点是如果您想要相同的查询但 x 为假，它不是很灵活。

# java - 如何使命令按钮在 JSF 2.0 中的表单之外工作

> ID：13469105
> 
> 赞同：3
> 
> 时间：2012-11-20T08:22:22.047
> 
> 标签：java, jsf

我是 JSF 编程的初学者，所以我有一个简单的问题。

我有以下 jsf 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
    <title>Insert Title Here</title>
</h:head>

<body>
    <h:form>
        <h:panelGrid columns="3">

            /* Here I take the username */

            <h:outputLabel for="username">Username</h:outputLabel>
            <h:inputText id="username" value="#{register.user.username}"  
                required="true" requiredMessage="Enter username">
                <f:ajax event="blur" render="usernameMessage" />
            </h:inputText>
            <h:message id="usernameMessage" for="username" />

            /* Here I take the password */

            <h:outputLabel for="password">Password</h:outputLabel>
            <h:inputSecret id="password" value="#{register.user.password}"
                required="true" redisplay="true" requiredMessage="Enter password">
                <f:ajax event="blur" render="passwordMessage" />
            </h:inputSecret>
            <h:message id="passwordMessage" for="password" />

            /* Here I take the email */

            <h:outputLabel for="email">Email</h:outputLabel>
            <h:inputText id="email" value="#{register.user.email}"
                required="true" requiredMessage="Enter email">
                <f:ajax event="blur" render="emailMessage" />
            </h:inputText>
            <h:message id="emailMessage" for="email" />

            /* And these are my 3 command buttons, and they are working only when the username, password and email are filled in. */

            <h:panelGroup>
                <h:commandButton value="Register" action="#{register.submit}">
                    <f:ajax execute="@form" render="@form" />
                </h:commandButton>
                <h:commandButton value="setDB" action="#{register.setDB}">
                    <f:ajax execute="@form" render="@form" />
                </h:commandButton>
                <h:commandButton value="getDB" action="#{register.getDB}">
                    <f:ajax execute="@form" render="@form" />
                </h:commandButton>
                <h:commandButton value="reset" action="#{register.reset}">
                    <f:ajax execute="@form" render="@form" />
                </h:commandButton>
            </h:panelGroup>

            <h:messages globalOnly="true" layout="table" />
        </h:panelGrid>
    </h:form>

    /* And this is the button that I want to work without the need to fill in the username, password and email */

    <h:panelGroup rendered="#{register.user.ini!=true}">
        <h3>Result</h3>
        <h:commandButton value="getDB" action="#{register.getDB}" />
    </h:panelGroup>

</body>
</html> 
```

所以我的问题是如何使以下命令按钮起作用：

```
<h:panelGroup rendered="#{register.user.ini!=true}">
    <h3>Result</h3>
    <h:commandButton value="getDB" action="#{register.getDB}" />
</h:panelGroup> 
```

当我启动应用程序时它不会出现。我只想获取数据库信息而不需要填写字段:) ...其他按钮在表单中，它们仅在字段的用户名、密码和电子邮件中有内容时才起作用。此代码既不会产生异常也不会产生错误，但按钮不起作用（表单外的那个）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:31:46.403

你**不能**使用`h:commandButton`，除非它在里面`h:form`

我不确定您要实现什么，但请看一下这个[PreRenderViewEvent](http://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/)

此外，如果您想在创建 bean 时运行一些逻辑，您可以`@PostConstruct`在 bean中使用

```
@PostConstruct
public void init() {
    retrieveDB();
} 
```

此外，为 bean 操作方法提供 get/set 前缀是一种非常糟糕的做法，get/set 最好仅用于 geters/setter

# jsf - ADF af:table 恢复表状态

> ID：13469113
> 
> 赞同：3
> 
> 时间：2012-11-20T08:22:43.773
> 
> 标签：jsf, oracle-adf

我对 ADF Faces 表和动态区域有疑问。

**前提条件：**
Oracle JDeveloper 11.1.1.6.0

我正在使用 ADF Faces 和 ADF 绑定层在 af:table 中显示 Java POJO 列表。ADF 表显示在有界任务流内的视图上。
此任务流用于另一个视图上的动态区域。
导航包含两个链接，用于通过 bean-property 选择要在动态区域中显示的有界任务流。
动态区域通过任务流绑定接收“输入参数映射”。
此映射包含要在表中显示的 POJO 和一个 state-Bean，它应该保存表状态和视图上可能的其他组件的状态（请参见下面的实现）。

**问题/要求：**

**1.预选：**

首次加载表时，根据 POJO 中包含的数据预选表中的单行。

**2.继续选择任务流开关：**

在切换到另一个有界任务流 B 并返回 A（表所在的位置）后，也应该选择表中的选定行（有界任务流 A）。

**3.没有MDS**

不使用保存点/MDS 功能。

**4.一致的表模型和绑定层**

在任务流之间切换和选择表格中的元素之后，应该可以询问表格组件和所选行的绑定。
切换任务流和选择表中元素后，绑定中的表行和选中行应保持一致。

**已经尝试过：**

在不使用 MDS/保存点的情况下预选一行并继续选择任务流切换。

我已经将一些表属性绑定到“状态”bean。bean 的实现附在下面。

**1.表格的属性：**

**选定的行键：**
selectedRowKeys="#{pageFlowScope.stateBean.tableStateBean.rowKeySet}"

**绑定 RichTable 的 Backing-Bean 属性：**
binding="#{pageFlowScope.stateBean.tableStateBean.richTable}"

**默认选择监听器**
selectionListener="#{bindings.postanschriften.collectionModel.makeCurrent}"

**我们在这里尝试的是：**
在表的初始加载和更改行 bean 方法时调用 getRowKeySet(..)。
在此方法中，要选择的行是在初始表加载时计算的（this.rowKeySet == null）。因为 table 属性 selectedRowKeys 绑定到`pageFlowScope.stateBean.tableStateBean.rowKeySet`bean 中的属性，如果在 table 中选择了另一行，则会更新。如果我们将任务流从 A 更改为 B，反之亦然，则调用支持 bean 属性richTable 的 getter。在 getter 方法中，选择状态被恢复。

**2.“状态”bean的实现：**

```
public class TableStateBean {
    private RichTable richTable;
    private RowKeySet rowKeySet;
    private String bindingIteratorName;
    private RowMatcher matcher;

public RowKeySet getRowKeySet() {
    if (this.rowKeySet == null) {
        preselectRow();
    }
    return rowKeySet;
}

public RichTable getRichTable() {
    if (richTable != null && rowKeySet != null) { 
        RowKeySet currentTableSelection = getCurrentTableSelection();
        RowKeySet tableSelectionToRestore = getTableSelectionToRestore();
        executeSelection(tableSelectionToRestore, currentTableSelection);
    }
    return richTable;
}

public void setRichTable(RichTable pRichTable) {
    richTable = pRichTable;
}

public void doTableSelection(){
    preselectRow();
}

private RowKeySet getCurrentTableSelection() {
    Row currentRow = (Row) JSFUtils.resolveExpression("#{bindings." + this.bindingIteratorName + ".currentRow}");
    Key currKey = currentRow.getKey();
    ArrayList<Key> lst = new ArrayList<Key>(1);
    lst.add(currKey);
    RowKeySet keySet = new RowKeySetImpl();
    keySet.add(lst);
    return keySet;
}

private RowKeySet getTableSelectionToRestore() {
    RowKeySet tableSelectionToRestoreRow = null;
    RowSetIterator rowSetIterator = extractRowSetIterator();
    int tableRowIndexOfCurrentSelectedKey = getSingleRowKeyIndexValue(this.rowKeySet);

    if (tableRowIndexOfCurrentSelectedKey != -1) {
        Row currentRow = rowSetIterator.first();
        for (int i = 0; rowSetIterator.hasNext() && i < tableRowIndexOfCurrentSelectedKey; i++) {
            currentRow = rowSetIterator.next();
        }
        if (currentRow != null) {
            Key newSelectionKey = currentRow.getKey();

            ArrayList<Key> keyList = new ArrayList<Key>(1);
            keyList.add(newSelectionKey);

            tableSelectionToRestoreRow = new RowKeySetImpl();
            tableSelectionToRestoreRow.add(keyList);
        }
    }

    return tableSelectionToRestoreRow;
}

private int getSingleRowKeyIndexValue(RowKeySet rowKeySet) {
    int tableRowIndexOfCurrentSelectedKey = -1;

    if (rowKeySet != null) {
        Object[] rowKeySetArray = rowKeySet.toArray();
        List<Key> selectedRowKeys = (rowKeySetArray.length > 0) ? (List<Key>) rowKeySetArray[0] : new ArrayList<Key>();
        if (selectedRowKeys.size() > 0) {
            Key currentSelectedKey = selectedRowKeys.get(0);
            Object[] attributeValues = currentSelectedKey.getAttributeValues();
            assert (attributeValues.length > 0);
            tableRowIndexOfCurrentSelectedKey = (Integer) attributeValues[0];
        }
    }
    return tableRowIndexOfCurrentSelectedKey;
}

private void executeSelection(RowKeySet newCurrentRow, RowKeySet oldCurrentRow) {
    SelectionEvent selectionEvent = new SelectionEvent(oldCurrentRow, newCurrentRow, richTable);
    selectionEvent.queue();
    AdfFacesContext.getCurrentInstance().addPartialTarget(richTable);
}

protected void preselectRow() {
    RowSetIterator rowSetIterator = extractRowSetIterator();

    RowKeySet oldSelection = getCurrentTableSelection();        
    Row currentRow = rowSetIterator.first();
    while (rowSetIterator.hasNext() 
           && (!matcher.match(currentRow))) // Matcher selects which row should be displayed according to the Object bound behind the binding-layer.
    {
        currentRow = rowSetIterator.next();
    }
    if (currentRow != null) {

        Key key = currentRow.getKey();
        RowKeySet newSelection = createRowKeySet(key);            
        setActiveRowKey(key);
        executeSelection(newSelection, oldSelection);
        setRowKeySet(newSelection);
    }
}

private void setActiveRowKey(Key pKey) {
    ArrayList<Key> lst = new ArrayList<Key>(1);
    lst.add(pKey);
    this.richTable.setActiveRowKey(lst);
}

private RowKeySet createRowKeySet(Key pKey) {
    ArrayList<Key> lst = new ArrayList<Key>(1);
    lst.add(pKey);
    RowKeySetImpl rowKeySetToCreate = new RowKeySetImpl();
    rowKeySetToCreate.add(lst);
    return rowKeySetToCreate;
}

private RowSetIterator extractRowSetIterator() {
    DCIteratorBinding iteratorBinding = ADFUtils.findIterator(this.bindingIteratorName);
    RowSetIterator rowSetIterator = iteratorBinding.getRowSetIterator();
    return rowSetIterator;
    }
} 
```

在某些情况下，绑定层似乎与在 RichTable 组件上选择的元素不同步。所以我猜上面提到的解决方案不是很健壮。

是否有另一种方法可以以稳健的方式归档上述功能？我认为根据绑定的POJO中的一些值来预选表中的一行并不是那么奇怪。并且在有界任务流（动态区域）之间切换后保持表格的选定行应该是可能的，不是吗？

感谢您期待您的帮助

问候，

最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:20:12.613

设置“选定”行相当容易。有几种解决方案。这只是其中之一：为您的表绑定到您的支持 bean。在 getter 中添加以下代码：

```
DCBindingContainer bindings = (DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
DCIteratorBinding dcItteratorBindings =
bindings.findIteratorBinding("yourViewObjectIterator");
RowSetIterator it = dcItteratorBindings.getRowSetIterator();
Rows[] rows = voTableData.getAllRowsInRange();
Row needsSelection = null;
for(Row r: rows)
{
   //just search for the row you want to set selected
  if(r.getAttribute("SomeAttribute").eqauls(..))
     needsSelection = r;
}

if(needsSelection != null)
it.setCurrentRow(needsSelection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:42:22.543

您可能想要查看您的应用程序设计。使用单个任务流在两个视图活动（页面片段）之间导航可能是更简单的解决方案，而不是使用动态区域并在两个任务流之间切换。此外，您编写了大量代码只是为了保持行选择。您只需要存储所选行的唯一列的数据，并使用上述帖子中使用 DCBinding 迭代器提供的逻辑将行选择设置为该行。

# command-line - 删除目录及其在 txt 文件中的路径，包括空格

> ID：13469118
> 
> 赞同：2
> 
> 时间：2012-11-20T08:22:54.380
> 
> 标签：command-line, batch-file

我想删除其路径在 txt 文件中列出的目录。其中一些路径包括空间。例如，这是我的 txt 文件内容，名为 rd.txt：

```
 D:\New folder\WOW
    D:\New folder (2)\here I am 
```

所以我不能在批处理文件中使用这个命令：

```
 for /d %%n in (rd.txt) do rd "%%n" /s /q 
```

我应该使用什么命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:04:27.807

```
for /F "delims=" %%n in (rd.txt) do rd "%%n" /s /q 
```

它完成了这项工作。

长话短说（您可以使用`for /?`查看参数），`delims`指示应该使用哪些分隔符，并且默认包含空格字符，因此设置`delims`为空值似乎是您需要的。

# android - debug.Keystore 格式文件我尝试使用记事本打开它？

> ID：13469120
> 
> 赞同：1
> 
> 时间：2012-11-20T08:22:58.220
> 
> 标签：android

我正在开发 gps 基础应用程序。为此我需要 md5，所以我尝试使用记事本打开文件 debug.keystore，因此文件格式更改为记事本，现在我使用 key-tool 菜单（安装插件 keytool）获得了 google-apiKey，但是问题是，当运行我的应用程序时，它给了我以下错误

生成最终存档时出错：`java.io.IOException: Invalid keystore format Unknown Android Packaging Problem`

我什至不确定从哪里开始寻找。我无法启动应用程序。有人可以告诉我我可以研究的领域吗？

A 我正在解决这个问题

在 Linux 和 Mac OS X 上删除 ~/.android/debug.keystore 下的调试证书；该目录类似于 Windows 上的 %USERPROFILE%/.android。

然后，当您下次尝试构建调试包时，Eclipse 插件应该会生成一个新证书。您可能需要清理然后构建以生成证书。您的调试密钥库是自动创建的

# python - python: dict 作为另一个 dict 的原型/模板 - std.lib 解决这个问题的方法？

> ID：13469121
> 
> 赞同：1
> 
> 时间：2012-11-20T08:23:15.150
> 
> 标签：python

我正在寻找一种方法来创建字典的多个临时副本以保存一些“进化状态”，只有轻微的代际偏差，并找到了这个小原型字典：

```
class ptdict(dict):
    def asprototype(self, arg=None, **kwargs):
        clone = self.__class__(self.copy())
        if isinstance(arg, (dict, ptdict)):
            clone.update(arg)
        clone.update(self.__class__(kwargs))        
        return clone 
```

基本上我想要smth。像：

```
generation0 = dict(propertyA="X", propertyB="Y")
generations = [generation0]

while not endofevolution():
    # prev. generation = template for next generation:
    nextgen = generations[-1].mutate(propertyB="Z", propertyC="NEW")  
    generations.append(nextgen) 
```

等等。

我想知道，如果这门课的作者和我遗漏了什么，因为我无法想象，没有标准库方法可以解决这个问题。但无论是集合还是 itertools 似乎都没有提供类似的简单方法。

像这样的事情可以用 itertools.tee 完成吗？

**更新**：这不是复制和更新的问题，因为这正是这个 ptdict 正在做的事情。但是使用 update 不会返回 dict，而 ptdict 会返回，因此我可以例如链接结果或进行就地测试，这将大大提高可读性。（我提供的示例可能有点微不足道，但我不想与大矩阵混淆。）

我为不够精确而道歉。也许下面的例子说明了为什么我有兴趣使用一个复制/更新步骤来获取字典：

```
nextgen = nextgen.mutate(inject_mutagen("A")) if nextgen.mutate(inject_mutagen("A")).get("alive") else nextgen.mutate(inject_mutagen("C")) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T08:35:51.793

我猜你正在寻找这样的东西：

```
first = {'x':1, 'y':100, 'foo':'bar'}
second = dict(first, x=2, y=200) # {'y': 200, 'x': 2, 'foo': 'bar'} 
```

看[`dict`](http://docs.python.org/library/stdtypes.html#dict)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:34:21.857

您可以立即执行此操作，无需自定义类型。只需使用`dict`and 而不是：

```
nextgen = generations[-1].mutate(propertyB="Z", propertyC="NEW") 
```

做这样的事情：

```
nextgen = generations[-1].copy()  # "clone" previous generation
nextgen.update(propertyB="Z", propertyC="NEW")  # update properties of this gen. 
```

这应该足够了，如果你没有嵌套字典并且不需要深拷贝而不是简单拷贝。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:34:38.133

复制模块包含浅复制和深复制的功能。

# iphone - RemoveAllObjects 等效于 NSArray

> ID：13469123
> 
> 赞同：0
> 
> 时间：2012-11-20T08:23:19.080
> 
> 标签：iphone, ios, nsarray

我知道如何使用 NSMutableArray 来实现这一点，但是清空整个类 NSArray 数组的正确方法是什么。我需要这样做，因为我需要重新加载 tableView。我正在使用 ARC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:25:13.703

NSArray 是不可变类型。创建后您无法更改其内容。

要么使用 NSMutableArray，要么用新的（空的）NSArray 替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:24:48.370

`NSArray`是一个不可变（不可更改）的类，因此无法从数组中删除元素。基本上，您将不得不扔掉数组并用新的`NSArray`. 或者，您可以只使用`NSMutableArray`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:38:21.080

```
NSArray *yourArray  = [ whatever objects you have ]

//to empty this array
yourArray = [NSArray array]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T08:26:26.370

您不能清空非可变 NSArray，最好的方法是获取数组的可变副本：

```
NSMutableArray *arr=[yourArr mutableCopy];
[arr removeAllObjects]; 
```

# eclipse - Eclipse 中的 Weka（用于我的 Google App Engine）

> ID：13469125
> 
> 赞同：1
> 
> 时间：2012-11-20T08:23:25.853
> 
> 标签：eclipse, google-app-engine, weka

我从未使用过 Weka，但对于我的 GAE 项目，我将需要它。我在 Weka 网站上检查了要在 Eclipse 中使用的 jar 文件，但我不确定应该下载哪一个。所以我检查了另一个网站，有很多关于 Weka 的 jar 文件。我正在寻找它的基本版本。你能告诉我哪一个最适合我吗？这里是下载链接：

[http://grepcode.com/snapshot/repo1.maven.org/maven2/nz.ac.waikato.cms.weka/weka-dev/3.7.5](http://grepcode.com/snapshot/repo1.maven.org/maven2/nz.ac.waikato.cms.weka/weka-dev/3.7.5)

[http://www.cms.waikato.ac.nz/ml/weka/](http://www.cms.waikato.ac.nz/ml/weka/)

Weka的所有文件：

[http://sourceforge.net/projects/weka/files/](http://sourceforge.net/projects/weka/files/)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:27:08.237

您应该下载所有项目，然后通过 maven 构建它。您可以使用 SVN 从此链接签出代码： [https ://svn.cms.waikato.ac.nz/svn/weka/trunk/weka](https://svn.cms.waikato.ac.nz/svn/weka/trunk/weka)

# c# - 在 C# 中实现 Oracle 的 RAWTOHEX 函数

> ID：13469126
> 
> 赞同：0
> 
> 时间：2012-11-20T08:23:32.133
> 
> 标签：c#, oracle, sql-function

我希望在 C# 中编写 Oracle 函数 rawtohex。我正在查看已编写的现有代码，并希望确认它是否准确。

```
public static string AsHexString1(this char[] chars)
{
    StringBuilder sb = new StringBuilder();

    foreach (var ch in chars)
    {
        int lowNibble = (int)ch % 16;
        int highNibble = (int)ch / 16;

        sb.Append(highNibble <= 9 ? highNibble.ToString() : ((char)('A' + (highNibble - 10))).ToString());
        sb.Append(lowNibble <= 9 ? lowNibble.ToString() : ((char)('A' + (lowNibble - 10))).ToString());
    }

    return sb.ToString();
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:45:57.440

据我所知，*RawToHex*应该是这样的：

```
public static string RawToHex(byte[] data)
{
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < data.Length; i++)
        sb.AppendFormat("{0:X2}", data[i]);
    return sb.ToString();
} 
```

我不确定你为什么使用**char**数组作为输入，因为它是 RAW 数据......

# regex - IE 6 中的正则表达式问题

> ID：13469127
> 
> 赞同：3
> 
> 时间：2012-11-20T08:23:34.600
> 
> 标签：regex, internet-explorer-6

我在 IE 6 中使用正则表达式验证字符串时遇到问题。链接的模式如下：

```
(?=^\S*$)(?=((http|https):\/\/.+)) 
```

它在 IE 8、FF、Chrome 中正常工作，但在 IE 6 中失败。

例如，字符串“http://google.com”仅与 IE 6 中的模式不匹配。寻找答案时，我发现了与使用前瞻相关的 IE6 正则表达式错误的文章，但没有抓住我的情况是否也适合。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:28:53.727

如果它不匹配，那么是的，这是一个错误。但是，正则表达式本身很奇怪。你会得到相同的结果

```
(?=^https?:\/\/\S+$) 
```

或者，因为您在这里根本不需要前瞻：

```
^https?:\/\/\S+$ 
```

# php - 用于在 php 中显示菜单项的函数

> ID：13469128
> 
> 赞同：0
> 
> 时间：2012-11-20T08:23:40.540
> 
> 标签：php, menu

我自己自定义的一个php函数遇到了一些麻烦。

事实上，我想将 html 代码与 php 处理分开，因此我决定将菜单放入一个数组中，而不是一个接一个地显示每个元素。

所以这是我的数组：

```
function getAccess($var){
   $data=mysql_fetch_array(mysql_query("SELECT * FROM `acces` WHERE `id`='.$var.'")); 
   return $data;
}
getAccess($_SESSION['id']);

    $paramAcces = array(
    'comptesfinanciers' => array(
        'libelle'   => 'COMPTES FINANCIERS',
        'acces'     => $data['comptesfinanciers'],
        'lien'      => 'financier',
        'image'     => 'images/finances.png'
    ),
     'journaux' => array(
        'libelle'   => 'JOURNAUX',
        'acces'     => $data['journaux'],
        'lien'      => 'journaux',
        'image'     => 'images/newspaper.png'
    )
    );

/**
 * AFFICHAGE DE LA SECTION PARAMETRES SUR LA PAGE D'ACCUEIL
 */
 function affichParam($paramAccees){
foreach ($paramAcces as &$parametres) {   
    echo '<ul class="getcash-vmenu"><li><a href="index.php?p='.$parametres['lien'].'" class="active"><span class="t"><img src="'.$parametres['image'].'"> '.$parametres['libelle'].'</span></a></li></ul>';
 }
 } 
```

问题是当我在主页 index.php 中调用这个函数时

```
affichParam($paramAccees) 
```

除了这样的分号，它不显示任何内容；

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:34:14.970

您在此代码块中有错字

```
function affichParam($paramAccees){
  foreach ($paramAcces as &$parametres) {   
    echo '<ul class="getcash-vmenu"><li><a href="index.php?p='.$parametres['lien'].'" class="active"><span class="t"><img src="'.$parametres['image'].'"> '.$parametres['libelle'].'</span></a></li></ul>';
  }
} 
```

将第一行更改为：

```
function affichParam($paramAcces){ 
```

**编辑：**

还有@GBD 评论的内容，`affichParam($paramAcces)`正确调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:47:25.693

我想您的代码必须满足所有这些先决条件： - SELECT 语句的结果不为空 - 函数调用 getAccess($_SESSION['id']) 的返回值存储到 $data 中，如下所示：

```
$data = getAccess(...); 
```

*   为什么在 affichParam() 中使用引用 &$parameters。只需使用： foreach($paramAccess as $parameters)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T08:38:11.837

您在 $paramAccess 中犯了错误。尝试这个：

```
function affichParam($paramAccess){
  foreach ($paramAccess as $parametres) {   
    echo '<ul class="getcash-vmenu"><li><a href="index.php?p='.$parametres['lien'].'" class="active"><span class="t"><img src="'.$parametres['image'].'"> '.$parametres['libelle'].'</span></a></li></ul>';
}
} 
```

# search - 哪个nodejs索引方法更好

> ID：13469136
> 
> 赞同：0
> 
> 时间：2012-11-20T08:24:25.163
> 
> 标签：search, indexing, neo4j

根据 neo4j 文档，索引可以通过 2 种方式完成”

> Neo4j 中的索引可以通过两种不同的方式完成： 1\. 数据库本身是一个自然索引，由节点之间不同类型的关系组成。例如，树结构可以分层在数据之上并用于由遍历器执行的索引查找。2\. 可以使用单独的索引引擎，Apache Lucene 是 Neo4j 包含的默认后端。

但是没有比较哪种情况更好，哪种情况更好。

哪个更好，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:47:58.020

这是数据仓库/市场还是报告数据库？如果您的交易和搜索都针对数据库，它可能会带来有趣的优点或缺点。

Lucene 存在的原因之一是搜索，它做得非常好。如果你有一个包含多个服务的大型系统，为了最终的可扩展性，它总是将服务拆分并让它们履行各自的职责。如果有必要，这将使您可以灵活地使用该 Lucene 索引来对抗其他服务……而且如果您摆脱了 Neo4j，那么您的索引/搜索工件仍然没有与 Neo4j 耦合。

我会从整体系统架构来看待它，而不仅仅是特定的功能。

# r - 将 as.numeric 应用于 R 中的树状图有什么作用？

> ID：13469137
> 
> 赞同：1
> 
> 时间：2012-11-19T23:58:26.127
> 
> 标签：r, cluster-analysis

当我切割树状图树时：

```
## 4\. 3-cluster solution
cl.hw3 <- cutree(cl.ward, k=3) 
```

然后尝试对其进行逻辑回归：

```
## 7\. Logistic regression
cl1 <- as.numeric(cl.hw3==2)
logreg1 <- glm(cl1 ~ sex + birthyr + plingu02, family=binomial, data=biofam)
summary(logreg1) 
```

第一步发生了什么（cl1 <- as.numeric(cl.hw3==1)？赋值运算符 == 是否用我给出的数字重新切割树状图树簇（在这种情况下为 2 而不是 3） ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:03:13.083

在您的示例中，`cl.hw3==2`返回具有值`TRUE`和的逻辑`FALSE`。

通过用 1 和0`as.numeric(cl.hw3==2)`替换 's 将逻辑转换为数字变量。`TRUE``FALSE`

设置`as.numeric(cl.hw3==3)`不会以不同的方式砍树。它只是定义了属于第三组而不是第二组的结果指示变量。然后，逻辑回归将是属于第三个集群的概率。

希望这可以帮助。

# c# - 我如何在 Windows 应用商店应用程序中聚焦 UI 元素？

> ID：13469142
> 
> 赞同：1
> 
> 时间：2012-11-20T08:24:37.143
> 
> 标签：c#, xaml, windows-8, winrt-xaml

我正在创建一个 Windows 应用商店应用程序，我想关注我的 PopDialog 的文本框。

```
 GroupName = new TextBox();
 GroupName.Width = 400;
 GroupName.Height =35;
 GroupName.VerticalAlignment = VerticalAlignment.Center;
 GroupName.HorizontalAlignment = HorizontalAlignment.Left;
 GroupName.Focus(Windows.UI.Xaml.FocusState.Programmatic);
 Content.Children.Add(GroupName); 
```

我还需要关注按钮，所以如果用户按下输入按钮就会被激活。

```
 Button create = new Button();
 create.Content = "Erstellen";
 create.Focus(FocusState.Pointer);
 create.Click += AddGroup;
 Btnpanel.Children.Add(create); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:30:02.453

如果您的意思是要手动调出“软”键盘，那么我认为这是不可能的。有一个键盘系统可以管理该用户体验并且不能手动启动，但是如果您想注册以在用户调出键盘时收到通知，这是可能的。

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.inputpane.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.inputpane.aspx)

在这种情况下，您可以附加到 onHiding 函数并使用它来启动提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:31:11.560

1.  将焦点放在文本字段将显示键盘
2.  如果您将文本框放在带有提交按钮的表单中，则 enter 将自动触发提交按钮，无需任何额外代码。

所以诀窍是，将焦点强制放在带有提交按钮的表单中的文本框中，一切都应该很好。

# jquery - 将 requirejs 与 JQuery、jQuery Mobile、Knockout 和 Sammy 一起使用以构建具有外部模板的结构化应用程序时的性能/模板问题

> ID：13469143
> 
> 赞同：1
> 
> 时间：2012-11-20T08:24:41.897
> 
> 标签：jquery, jquery-mobile, knockout.js, require, sammy.js

我有一个测试应用程序的设置，其中包括 require.js、jQuery、jQueryMobile (jqm)、knockout 和 sammy

require.js 在 jqm、knockout 和 sammy 中加载

在应用程序主页上，我使用 sammy 加载淘汰赛视图模型。这些视图模型加载到模板中..

所以要显示代码...

要求页面：

```
require.config({
    jquery:     'vendor/jqm/jquery_1.7_min',
    jqm:     'vendor/jqm/jquery.mobile-1.1.0', 
    knockout: 'vendor/knockout/knockout-2.2.0',
    sammy : 'vendor/sammy/sammy',
    text:       'vendor/require/text',
views:    '../views',
templates:  '../templates'
}

});

define(['app','jqm-config'], function(app) {
   $(document).ready(function() {
  console.log("DOM IS READY");
});    

}); 
```

应用程序.js

```
define(['jquery','knockout', 'sammy','views/home/home', 'views/products/products', 'jqm'],
function($, ko, sammy, appViewModel, productsViewModel) {

var self = this;
self.goHome = function() {
    ko.applyBindings(new appViewModel());
};

self.goProducts = function() {
    ko.applyBindings(new productsViewModel());
};

 Sammy(function() {
    this.get('#home', function() {
       self.goHome(); 
    });

    this.get('#products', function() {
        self.goProducts();
    });

    this.get('', function() {
       self.goHome(); 
    });

 }).run(); 

}); 
```

产品页面

```
define(['jquery', 'knockout','text!templates/test2.html', 'jqm'], 
function($, ko, productsViewTemplate){

function ProductType(id, name) {
var self = this;
self.id = id;
self.name = name;
}

return function productsViewModel() {

  $('body').append(productsViewTemplate); 
  var self = this;
  self.products = ko.observableArray(); 

    var jqxhr = $.getJSON("data/product.json")
    .success(function(data, status, xhr) { 
            self.products.removeAll();    
        $.each(data.data.productTypeList, function(i,item){
           self.products.push(new ProductType(i, item.longName));

        })        
      })
     .error(function() { alert("error"); })
     .complete(function() {

         $.mobile.changePage( '#products', { transition: "pop"});

     });

}
}); 
```

产品 html (text2.html)

```
<div data-role="page" data-theme="c" class="ui-page" id="products">

<div data-role="header" data-position="fixed">
    <h1>Products</h1>
    <a href="#home" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
</div>

<div data-role="content">   
        <ul data-role="listview" data-inset="true"  data-bind="foreach: products" >

          <li>
            <a data-bind="attr:{href:'#products/list/' + id}, text: name"></a>
          </li>

        </ul>

</div> 
```

有几个问题

1.  sammy 是否应该按该顺序加载，因为当我刷新时它会时不时地抛出一个错误，即由于加载速度太慢而未定义 sammy 或 jquery 我猜

2.  在产品页面上，如果有人从主页打开它，它加载正常，因为 jQueryMobile changePage 已被调用，但如果用户随后刷新该页面，来自 JSON 的列表将失去其所有样式..

我认为这是由于我从模板渲染页面然后必须制作列表的方式，但我想不出另一种方法。

所以我在想（可能不是最好的解决方案）但是有没有办法强制刷新页面更改？或者有没有人有更好的解决方案？

3.

这是调用外部模板的最佳方法/是否有更好的方法将模板附加到正文。我真的认为这样做所花费的时间是导致样式问题的原因，而且当我添加下一级产品时，它开始在此页面上呈现它们，然后再转到下一个..

我正在努力寻找使用敲除和 requirejs 加载外部模板的最佳方法。我想将模板保留在 HTML 中，以便团队中的其他人可以轻松地对其进行编辑并提供结构。

这个演示可以在这里看到

[http://demo.stg.brightonconsulting.net.au/templates/tests/knockoutJQMProducts/](http://demo.stg.brightonconsulting.net.au/templates/tests/knockoutJQMProducts/)

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:33:42.760

看看你的演示，我可以建议一些尝试的事情。

1.  在`main.js`删除依赖`jqm-config`并将其添加到`app.js`. 这样，您将始终保证在`app.js`运行任何内容之前设置您的 jquery 移动配置。
2.  确保您的`ko.applyBindings()`调用包含在`.ready()`构造中。
3.  每次切换页面时，都会将淘汰赛重新绑定到同一个节点。这不是最佳做法，可能会导致一些奇怪的行为。如果您要这样做，请确保先取消应用绑定。看看[这里](http://www.mberkompas.com/2012/11/knockoutjs-unapply-bindings/)如何。

即使所有这些项目都修复了，我也不确定你处理事情的方式是否会奏效。您最好预先加载所有 HTML 并将所有页面绑定到一个带有子视图模型的父视图模型。

# android - 在不安装 apk 的情况下获取 Android .apk 文件 VersionName 或 VersionCode

> ID：13469147
> 
> 赞同：211
> 
> 时间：2012-11-20T08:25:03.107
> 
> 标签：android, android-manifest, apk

下载 AndroidManifest.xml 文件后，如何以编程方式获取我的 apk 的版本代码或版本名称，而无需安装它。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="xxx.xx.xxx"
    android:versionCode="1"
    android:versionName="1.1" > 
```

例如，我想检查我的 IIS 服务上是否上传了新版本，在设备上安装后，如果它不是新版本，我不想安装它。

* * *

## 回答 #1

> 赞同：466
> 
> 时间：2014-08-12T23:38:18.727

以下从命令行为我工作：

```
aapt dump badging myapp.apk 
```

* * *

注意：aapt.exe 位于`build-tools`SDK 的子文件夹中。例如：

```
<sdk_path>/build-tools/23.0.2/aapt.exe 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2013-06-15T00:02:47.887

```
final PackageManager pm = getPackageManager();
String apkName = "example.apk";
String fullPath = Environment.getExternalStorageDirectory() + "/" + apkName;        
PackageInfo info = pm.getPackageArchiveInfo(fullPath, 0);
Toast.makeText(this, "VersionCode : " + info.versionCode + ", VersionName : " + info.versionName , Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2016-06-27T10:06:39.797

如果您使用的是**Android Studio** *2.2 及更高版本，*则在 Android Studio 中使用→然后选择 AndroidManifest.xml 文件。**`Build` `Analyze APK`**

 *** * *

## 回答 #4

> 赞同：19
> 
> 时间：2019-03-05T20:04:29.490

```
aapt dump badging test.apk | grep "versionName" | sed -e "s/.*versionName='//" -e "s/' .*//" 
```

这通过仅返回版本号作为结果来回答问题。然而......

如前所述，目标应该是确定服务器上的 apk 是否比在尝试下载或安装之前安装的 apk 更新。最简单的方法是在服务器上托管的 apk 的文件名中包含版本号，例如`myapp_1.01.apk`

您需要确定已安装的应用程序的名称和版本号（如果已安装），以便进行比较。如果 rom 中尚未包含 aapt 二进制文件和 busybox，您将需要一个 root 设备或安装方法。

此脚本将从您的服务器获取应用程序列表并与任何已安装的应用程序进行比较。结果是一个标记为升级/安装的列表。

```
#/system/bin/sh
SERVER_LIST=$(wget -qO- "http://demo.server.com/apk/" | grep 'href' | grep '\.apk' | sed 's/.*href="//' | \
              sed 's/".*//' | grep -v '\/' | sed -E "s/%/\\\\x/g" | sed -e "s/x20/ /g" -e "s/\\\\//g")
LOCAL_LIST=$(for APP in $(pm list packages -f | sed -e 's/package://' -e 's/=.*//' | sort -u); do \
              INFO=$(echo -n $(aapt dump badging $APP | grep -e 'package: name=' -e 'application: label=')) 2>/dev/null; \
              PACKAGE=$(echo $INFO | sed "s/.*package: name='//" | sed "s/'.*$//"); \
              LABEL=$(echo $INFO | sed "s/.*application: label='//" | sed "s/'.*$//"); if [ -z "$LABEL" ]; then LABEL="$PACKAGE"; fi; \
              VERSION=$(echo $INFO | sed -e "s/.*versionName='//" -e "s/' .*//"); \
              NAME=$LABEL"_"$VERSION".apk"; echo "$NAME"; \
              done;)
OFS=$IFS; IFS=$'\t\n'
for REMOTE in $SERVER_LIST; do
    INSTALLED=0
    REMOTE_NAME=$(echo $REMOTE | sed 's/_.*//'); REMOTE_VER=$(echo $REMOTE | sed 's/^[^_]*_//g' | sed 's/[^0-9]*//g')
    for LOCAL in $LOCAL_LIST; do
        LOCAL_NAME=$(echo $LOCAL | sed 's/_.*//'); LOCAL_VER=$(echo $LOCAL | sed 's/^[^_]*_//g' | sed 's/[^0-9]*//g')
        if [ "$REMOTE_NAME" == "$LOCAL_NAME" ]; then INSTALLED=1; fi
        if [ "$REMOTE_NAME" == "$LOCAL_NAME" ] && [ ! "$REMOTE_VER" == "$LOCAL_VER" ]; then echo remote=$REMOTE ver=$REMOTE_VER local=$LOCAL ver=$LOCAL_VER; fi
    done
    if [ "$INSTALLED" == "0" ]; then echo "$REMOTE"; fi
done
IFS=$OFS 
```

正如有人问如何在不使用 aapt 的情况下做到这一点。也可以使用 apktool 和一些脚本来提取 apk 信息。这种方式在 android 中速度较慢且不简单，但只要您有工作的 apktool 设置，就可以在 windows/mac 或 linux 上运行。

```
#!/bin/sh
APK=/path/to/your.apk
TMPDIR=/tmp/apktool
rm -f -R $TMPDIR
apktool d -q -f -s --force-manifest -o $TMPDIR $APK
APK=$(basename $APK)
VERSION=$(cat $TMPDIR/apktool.yml | grep "versionName" | sed -e "s/versionName: //")
LABEL=$(cat $TMPDIR/res/values/strings.xml | grep 'string name="title"' | sed -e 's/.*">//' -e 's/<.*//')
rm -f -R $TMPDIR
echo ${LABEL}_$(echo $V).apk 
```

还要考虑在您的服务器上放置一个文件夹。将 apk 上传到它，然后一个 cron 任务重命名并将它们移动到您的更新文件夹。

```
#!/bin/sh
# Drop Folder script for renaming APKs
# Read apk file from SRC folder and move it to TGT folder while changing filename to APKLABEL_APKVERSION.apk
# If an existing version of the APK exists in the target folder then script will remove it
# Define METHOD as "aapt" or "apktool" depending upon what is available on server 

# Variables
METHOD="aapt"
SRC="/home/user/public_html/dropfolders/apk"
TGT="/home/user/public_html/apk"
if [ -d "$SRC" ];then mkdir -p $SRC
if [ -d "$TGT" ]then mkdir -p $TGT

# Functions
get_apk_filename () {
    if [ "$1" = "" ]; then return 1; fi
    local A="$1"
    case $METHOD in
        "apktool")
            local D=/tmp/apktool
            rm -f -R $D
            apktool d -q -f -s --force-manifest -o $D $A
            local A=$(basename $A)
            local V=$(cat $D/apktool.yml | grep "versionName" | sed -e "s/versionName: //")
            local T=$(cat $D/res/values/strings.xml | grep 'string name="title"' | sed -e 's/.*">//' -e 's/<.*//')
            rm -f -R $D<commands>
            ;;
        "aapt")
            local A=$(aapt dump badging $A | grep -e "application-label:" -e "VersionName")
            local V=$(echo $A | sed -e "s/.*versionName='//" -e "s/' .*//")
            local T=$(echo $A | sed -e "s/.*application-label:'//" -e "s/'.*//")
            ;;
        esac
    echo ${T}_$(echo $V).apk
}

# Begin script
for APK in $(ls "$SRC"/*.apk); do
    APKNAME=$(get_apk_filename "$APK")
    rm -f $TGT/$(echo APKNAME | sed "s/_.*//")_*.apk
    mv "$APK" "$TGT"/$APKNAME
done 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-03-05T07:40:57.583

目前，可以按如下方式完成

```
$ANDROID_HOME/build-tools/28.0.3/aapt dump badging /<path to>/<app name>.apk 
```

一般来说，它将是：

```
$ANDROID_HOME/build-tools/<version_of_build_tools>/aapt dump badging /<path to>/<app name>.apk 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-11T14:46:12.223

我现在可以从二进制 XML 数据中成功检索 APK 文件的版本。

这个主题是我得到答案的关键（我还添加了我的 Ribo 代码版本）： [How to parse the AndroidManifest.xml file inside an .apk package](https://stackoverflow.com/questions/2097813/how-to-parse-the-androidmanifest-xml-file-inside-an-apk-package/14814245#14814245)

此外，这是我编写的 XML 解析代码，专门用于获取版本：

XML 解析

```
/**
 * Verifies at Conductor APK path if package version if newer 
 * 
 * @return True if package found is newer, false otherwise
 */
public static boolean checkIsNewVersion(String conductorApkPath) {

    boolean newVersionExists = false;

    // Decompress found APK's Manifest XML
    // Source: https://stackoverflow.com/questions/2097813/how-to-parse-the-androidmanifest-xml-file-inside-an-apk-package/4761689#4761689
    try {

        if ((new File(conductorApkPath).exists())) {

            JarFile jf = new JarFile(conductorApkPath);
            InputStream is = jf.getInputStream(jf.getEntry("AndroidManifest.xml"));
            byte[] xml = new byte[is.available()];
            int br = is.read(xml);

            //Tree tr = TrunkFactory.newTree();
            String xmlResult = SystemPackageTools.decompressXML(xml);
            //prt("XML\n"+tr.list());

            if (!xmlResult.isEmpty()) {

                InputStream in = new ByteArrayInputStream(xmlResult.getBytes());

                // Source: http://developer.android.com/training/basics/network-ops/xml.html
                XmlPullParser parser = Xml.newPullParser();
                parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);

                parser.setInput(in, null);
                parser.nextTag();

                String name = parser.getName();
                if (name.equalsIgnoreCase("Manifest")) {

                    String pakVersion = parser.getAttributeValue(null, "versionName");
                            //NOTE: This is specific to my project. Replace with whatever is relevant on your side to fetch your project's version
                    String curVersion = SharedData.getPlayerVersion();

                    int isNewer = SystemPackageTools.compareVersions(pakVersion, curVersion); 

                    newVersionExists = (isNewer == 1); 
                }

            }
        }

    } catch (Exception ex) {
        android.util.Log.e(TAG, "getIntents, ex: "+ex);
        ex.printStackTrace();
    }

    return newVersionExists;
} 
```

版本比较（在前面的代码片段中显示为 SystemPackageTools.compareVersions） 注意：此代码的灵感来自以下主题： [Efficient way to compare version strings in Java](https://stackoverflow.com/questions/6701948/efficient-way-to-compare-version-strings-in-java)

```
/**
 * Compare 2 version strings and tell if the first is higher, equal or lower
 * Source: https://stackoverflow.com/questions/6701948/efficient-way-to-compare-version-strings-in-java
 * 
 * @param ver1 Reference version
 * @param ver2 Comparison version
 * 
 * @return 1 if ver1 is higher, 0 if equal, -1 if ver1 is lower
 */
public static final int compareVersions(String ver1, String ver2) {

    String[] vals1 = ver1.split("\\.");
    String[] vals2 = ver2.split("\\.");
    int i=0;
    while(i<vals1.length&&i<vals2.length&&vals1[i].equals(vals2[i])) {
      i++;
    }

    if (i<vals1.length&&i<vals2.length) {
        int diff = Integer.valueOf(vals1[i]).compareTo(Integer.valueOf(vals2[i]));
        return diff<0?-1:diff==0?0:1;
    }

    return vals1.length<vals2.length?-1:vals1.length==vals2.length?0:1;
} 
```

我希望这有帮助。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-01-05T23:10:53.160

对于升级场景，另一种方法可能是使用提供当前版本号的 Web 服务并检查它，而不是下载整个 apk 来检查其版本。它将节省一些带宽，性能更高一些（如果大部分时间不需要整个 apk，则下载速度比 apk 快得多）并且实现起来更简单。

以最简单的形式，您的服务器上可以有一个简单的文本文件......`http://some-place.com/current-app-version.txt`

在那个文本文件里面有类似的东西

```
3.1.4 
```

然后下载该文件并检查当前安装的版本。

构建一个更高级的解决方案是实现一个适当的 Web 服务，并在启动时调用一个 api 调用，它可以返回一些 json，即`http://api.some-place.com/versionCheck`：

```
{
    "current_version": "3.1.4"
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-02-10T20:04:44.143

现在使用[`apkanalyzer`](https://developer.android.com/studio/command-line/apkanalyzer)它是以下内容的一部分`cmdline-tools`：

```
$ apkanalyzer manifest version-code my_app.apk
1
$ apkanalyzer manifest version-name my_app.apk
1.2.3.4 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-15T02:40:29.727

```
 EditText ET1 = (EditText) findViewById(R.id.editText1);

    PackageInfo pinfo;
    try {
        pinfo = getPackageManager().getPackageInfo(getPackageName(), 0);
        String versionName = pinfo.versionName;
        ET1.setText(versionName);
        //ET2.setText(versionNumber);
    } catch (NameNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-05T18:51:16.773

1.  将 .apk 文件拖入 Android Studio

2.  然后双击 AndroidManifest.xml 文件。

3.  查看版本代码和版本名称

[![在此处输入图像描述](../Images/cb19f87471d7caf6aa38ceb42560b28d.png)](https://i.stack.imgur.com/H2I1a.png)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-11-26T17:18:11.427

科特林：

```
var ver: String = packageManager.getPackageInfo(packageName, 0).versionName 
```**

# foursquare - 一些特价商品没有与之关联的广告系列详细信息

> ID：13469149
> 
> 赞同：0
> 
> 时间：2012-11-20T08:25:07.627
> 
> 标签：foursquare

我的一些特价商品没有与之相关的广告系列详细信息。但是，为了能够在 Foursquare 中发布页面更新，它需要一个活动 ID，因此我不再能够发布带有特殊附件的页面更新。

我的特殊 ID 是 50ab336490e745590ae17e57，我可以通过 API 调用获取其详细信息。但是在检索所有广告系列的列表时，该特价商品不存在/不与任何广告系列相关联。

添加页面更新需要 CampaignID [https://developer.foursquare.com/docs/pageupdates/add](https://developer.foursquare.com/docs/pageupdates/add)

Foursquare API 有变化吗？谢谢，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:31:34.537

确保您使用创建活动和特殊的同一用户向活动/列表和特价/详细信息端点发出请求。此信息仅对特价经理可用。

# mysql - 如何最好地在 MySql 中存储日期/时间？

> ID：13469154
> 
> 赞同：3
> 
> 时间：2012-11-20T08:25:22.783
> 
> 标签：mysql, delphi, datetime

我应该存储一个 Delphi TDateTIme，还是先转换为 Unix 时间戳？或者 mayeb eeven 作为字符串？

我应该如何在 MySql 中声明该列？作为 Double 或 DateTime（如果我使用 Unix 时间戳，则为 Integer）？

Whta 是“正确的”，或者如果我希望能够显示带有“yyyy mm dd hh:mm:ss”（或类似）的字符串并且还能够通过比较两个值来获得经过的时间，那么什么是最简单的？

顺便说一句，该程序只会在一个 tiemzone 中使用 - 它没有夏令时。

我很困惑，似乎在任何地方都找不到这个讨论。有什么有用的网址吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T08:38:39.387

1.  > 我应该存储一个 Delphi TDateTIme，还是先转换为 Unix 时间戳？

    通常，您都不应该这样做：数据库层中的数据类型应该（尽可能）本身有意义，而不是依赖于您的应用程序来解释它们。正如[@Jim DeLaHunt 所说](https://stackoverflow.com/a/13469237)，这使数据库能够根据需要轻松地从 SQL 操作/解释它们（并且还使您将来能够轻松地从另一个应用程序代码库访问相同的数据）。

    MySQL 有[五种时间类型](http://dev.mysql.com/doc/en/date-and-time-types.html)，其中只有两种同时存储日期和时间：`DATETIME`和`TIMESTAMP`.

    正如其他人所暗示的那样，不同之处在于您是否希望存储时区 - 尽管我发现这是一种非常令人困惑的看待它的方式：

    *   `TIMESTAMP`使用会话的[`time_zone`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_time_zone)变量将输入转换为 UTC 时间戳，然后再返回输出：这对于指定准确的时间非常有用；

    *   `DATETIME`简单地存储日期和时间而不考虑时区，就像拍摄日历和时钟的照片：它对于指定在全球同一本地时间发生的事件很有用。

2.  > 我应该如何在 MySql 中声明该列？作为 Double 或 DateTime（如果我使用 Unix 时间戳，则为 Integer）？

    就像声明任何其他列一样，在列名之后指定相关数据类型。

    请注意`TIMESTAMP`具有附加功能，例如[自动更新](http://dev.mysql.com/doc/en/timestamp-initialization.html)，如果需要，您可能希望在列声明中禁用这些功能。

3.  > Whta 是“正确的”，或者如果我希望能够显示带有“yyyy mm dd hh:mm:ss”（或类似）的字符串并且还能够通过比较两个值来获得经过的时间，那么什么是最简单的？

    使用上述时间类型之一，您将能够完成所有这些（根据需要使用[日期函数](http://dev.mysql.com/doc/en/date-and-time-functions.html)）。`TIMESTAMP`和类型的默认输出是格式`DATETIME`的字符串。`'YYYY-MM-DD HH:MM:SS'`

    特别是，比较两个值的“经过时间”可以通过 MySQL 的[`TIMEDIFF()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_timediff)函数获得：

    ```
    SELECT TIMEDIFF(end, start) AS elapsed
    FROM   my_table
    WHERE  ... 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T08:31:30.907

MySQL 应该有一种首选的本机日期格式，因为这允许人们使用 SQL 日期函数（年、月等）。

我在我的一个数据库表中有一个定义为 Delphi 日期时间的字段 - 回想起来这是一个错误，因为很难过滤该字段或显示值。这两种操作都需要在调用程序中进行特殊处理，而不是在数据库中进行处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T08:31:07.190

我会让 MySQL 随心所欲地处理日期/时间，即作为日期时间字段。它的范围很广（不受时代限制）。

见这里：[http ://dev.mysql.com/doc/refman/5.0/en/datetime.html](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T08:29:32.960

此[链接](http://www.tizag.com/mysqlTutorial/mysql-date.php)可能对您有用。这取决于您是否要使用时区，但即使您现在不需要它们，也要重新考虑将来是否无法使用它们。

我会使用日期时间。人类更容易阅读。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T08:33:02.907

[**您可以在MySQL 参考手册**11.3](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-types.html)*中阅读有关 MySQL 日期和时间类型的所有信息。[*日期和时间类型*](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-types.html)以及关于[12.7 中的函数。*日期和时间函数*](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html)。*

 *我对 MySQL 和 SQL Server 的体验（虽然不是 Delphi 本身）是，您可以很好地以数据库的日期和时间格式存储日期和时间值。这使您可以使用数据库的日期和时间功能，并利用其优化的日期和时间功能实现。如果您将日期时间值存储为诸如 Double 或 Integer Unix 时间戳之类的通用值，您将缺乏优化，并且必须实现您自己的等效日期和时间函数。

**根据 OP 的编辑问题进行**更新：****

 **该[`DateFormat()`函数](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format)可以使用格式字符串（如`"%Y %m %d %k:%i:%s"`.

该[`TimeDiff()`函数](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_timediff)将为您提供一个时间间隔类型，给出两个日期时间值之间的差异。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-22T15:55:29.097

有许多帖子描述了在 mysql 中保存日期时间的最佳方法，例如

[MySQL Integer vs DateTime 索引](https://stackoverflow.com/questions/4594229/mysql-integer-vs-datetime-index) 和 [MySQL DATETIME vs TIMESTAMP vs INT 性能和 MyISAM 基准测试](http://gpshumano.blogs.dri.pt/2009/07/06/mysql-datetime-vs-timestamp-vs-int-performance-and-benchmarking-with-myisam/)

如果您决定将日期时间转换为 Unix 时间戳并将其保存为整数

请注意以下事项：

*   Delphi 函数 **DateTimeToUnix** ( StrToDateTime('2013-11-22 16:34:45'));
    使用**本地时区**进行对话

*   MYSQL 函数 **UNIX_TIMESTAMP** ('2013-11-22 16:34:45') 使用**GMT TIME ZONE**进行对话***

# asp.net-ajax - pagr 重定向后展开可折叠面板

> ID：13469157
> 
> 赞同：2
> 
> 时间：2012-11-20T08:25:43.227
> 
> 标签：asp.net-ajax

我在名为 Home.aspx 的页面中使用 CollapsiblePanelExtender 拥有三个面板（即关于我们、联系人和反馈表单）。这些面板在页面中工作正常（显示和隐藏面板）。我有一个母版页，它由三个带有面板名称的 LinkBut​​tons 组成。当我从任何其他页面单击“关于我们”时，我被重定向到主页..

但我也希望现在扩展“关于我们”面板。

从任何其他页面重定向时如何使面板展开？我知道像这样的代码

> panel1_CollapsiblePanelExtender.collapsed = true：

我目前正在做的是，因为链接在母版页中，我创建查询字符串，如

> Response.Redirect("Home.aspx?pg=1")

用于“关于我们”，2 和 3 分别用于联系人和反馈面板。在 Home.aspx 的 Page_Load() 中，我检查查询字符串中的值，然后设置它

> Panel1_CollapsiblePanelExtender.Collapsed = false;

对于关于我们和分别.. 但是当我第一次重定向到这个页面时，面板没有展开。但是当我再次单击链接时，相应的面板会展开。我在这里想念什么。也想了解一下

> Panle1_CollapsiblePanelExtender_ClientState

# java - J2ME MulticastSocket 替代方案

> ID：13469161
> 
> 赞同：3
> 
> 时间：2012-11-20T08:26:09.503
> 
> 标签：java, sockets, java-me, multicastsocket

我在 Android 中有一个使用 MulticastSocket 通信的应用程序。我想在 J2ME 中编写类似的应用程序，使用 MulticastSocket 通过 WiFi 与 Android <-> J2ME 通信。问题是在 J2ME 中没有退出 MulticastSocket。只有DatagramSocket。我可以使用 DatagramSocket 解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:37:09.667

不，你不能。您不能使用 DatagramSocket 加入多播组。因此，您可以发送到多播组，但不能从其中接收。

# spine.js - Spine.js 渲染视图

> ID：13469163
> 
> 赞同：1
> 
> 时间：2012-11-20T08:26:17.180
> 
> 标签：spine.js

我刚开始使用脊柱，我无法理解一些事情......

```
class Spk.Register extends Spine.Controller
  render: ->
    @html("<h1>Registration!</h1>") 
```

...

```
Zepto(function($) {
  new Spk.Register({
    el: $("#data")
  });
}); 
```

...我希望这会在实例化控制器时将 #data 元素中的任何 html 替换为传递给 @html 的 html，但事实并非如此，根本没有任何反应。

我也尝试将渲染方法放在构造函数中，但再次没有任何反应。

实例化控制器时，如何用给定的 html 替换正文中的 html？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:50:15.410

问题是`render()`没有调用该方法。

您必须在控制器实例化后显式调用它。

无论如何，我认为您不应该在构造函数中进行任何渲染。更好的选择是：

*   拥有一个模型（MVC 架构），在从服务器加载数据后触发特定事件，
*   控制器应该为该事件定义事件处理程序，它将呈现视图。

**编辑** 只是非常简单的代码片段（CoffeeScript，使用 jQuery）：

`Task`模型类：

```
class Task extends Spine.Model

  @configure 'Task', 'name', 'deadline'

  @fetch () ->
    Task.deleteAll()
    # ... load data from the server ...
    Task.create name: 'foo', deadline: '2012-11-22' # create local instance(s)
    Task.trigger 'data-loaded'
    return 
```

控制器：

```
class Tasks extends Spine.Controller

  constructor: ->
    super

  init: () ->
    @routes
        'list': (params) ->
            Task.fetch()
            return
    Task.bind 'data-loaded', () => 
        @render()
        return
    return

render: () ->
    @el.render Task.all()
    return 
```

初始化代码（另一种可能是 Spine.js 控制器堆栈）：

```
tasksCtrl = new Tasks el: $('.task-list')
tasksCtrl.navigate 'list' 
```

请注意，它还需要`route.js`（包含在 Spine.js 中）并且我使用了[Transparency](https://github.com/leonidas/transparency)模板引擎（它是`@el.render()`meth）。然后模板看起来像：

```
<div class="task-list">
    <div class="task">
        <span data-bind="name"></span>
        <span data-bind="deadline"></span>
    </div>
 </div> 
```

# datatables - 如何向 dataTables.js 创建的 gridview 添加水平滚动？

> ID：13469167
> 
> 赞同：1
> 
> 时间：2012-11-20T08:26:34.877
> 
> 标签：datatables

我在 asp:Gridciew 中使用 GridviewFix.js 和 jquery.dataTables.columnFilter.js 进行搜索。它工作正常。现在我需要添加水平滚动。当我添加时，行的对齐方式与页眉和页脚不同.

我正在使用这个。

```
 var oTable = $('#GridView1').dataTable({
             "sScrollX": "100%",
             "sScrollXInner": "110%",
             "bScrollCollapse": false,}); 
```

# visual-studio - 在 Visual Studio 和 tfs 构建中触发构建任务

> ID：13469175
> 
> 赞同：0
> 
> 时间：2012-11-20T08:27:30.610
> 
> 标签：visual-studio, tfs, msbuild, tfsbuild

我有多个项目的 ac# 解决方案。我有一个在 VS2012 中构建解决方案的 .sln 文件。

我正在寻找设置 TFS 构建并希望包含一些自定义 msbuild 操作，例如运行 stylecop 和 fxcop 规则。我希望在本地和 tfs build 中构建解决方案时触发这些任务。

我已经研究过为解决方案创建一个 .proj 文件。但是，我不确定如何在本地设置并在本地运行任务。

在 tfs build 和 Visual Studio 中运行的任务的正确设置是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:26:10.373

我最好的猜测是在项目设置“代码分析”中设置标志“在构建时启用代码分析”。更多关于[这里](http://msdn.microsoft.com/en-us/library/bb668977.aspx)。

我想在提交时运行 StyleCop 更适合 IDE（检查[R#](http://www.jetbrains.com/resharper/)）或 VCS（检查[SVNStyleCop](https://svnstylecop.codeplex.com/)）。我不确定 GIT 或其他存储库是否存在相同的情况。

# api - 在 C# 的 RESTful API 中更改/附加请求标头

> ID：13469178
> 
> 赞同：0
> 
> 时间：2012-11-20T08:27:37.213
> 
> 标签：api, restful-architecture

我有一个非常奇怪的情况（可能只对我来说）。我开发了一个 RESTful API。默认情况下，它根据客户端在标头中发送的内容类型以 JSON/XML/TEXT 的形式返回结果。

现在客户说他只想将响应设置为默认的 XML。我的意思是客户端不会在标头中发送任何内容类型，默认情况下它将以 XML 格式发送请求。

当我从浏览器访问这个 API 时，它以 XML 形式返回，但是当客户端的应用程序请求它时，它默认返回 JSON 结果。他们通过将内容类型放入标头中以 XML 形式获得结果，但他们不想这样做，并且希望在默认情况下获得 XML 结果。

我希望我对此很清楚。如果没有，请告诉我。

任何帮助，将不胜感激。谢谢

[更改] 我很想知道当我在服务器上收到请求时是否可以通过某种方式修改请求标头。

它在 MVC3、C# 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:52:06.343

您无法更改请求标头，只需查询它们。

我猜你在你的控制器中将你的结果作为一个简单的字符串返回，不是吗？

而且，您正在根据从请求中读取的内容类型在结果之间切换，不是吗？

客户端调用附带的内容类型是什么？

更新：

看看这个页面：

[http://aleembawany.com/2009/03/27/aspnet-mvc-create-easy-rest-api-with-json-and-xml/](http://aleembawany.com/2009/03/27/aspnet-mvc-create-easy-rest-api-with-json-and-xml/)

这是 MVC 先前版本的解决方案，但它会让您了解所需的解决方案：

根据请求内容类型调整动作结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:34:37.680

我在这里找到答案并发布。我刚刚删除了除 xml 类型之外的其他返回类型，如下所示：

```
void ConfigureApi(HttpConfiguration config)
{
    // Remove the JSON formatter
    config.Formatters.Remove(config.Formatters.JsonFormatter);

    // or

    // Remove the XML formatter
    config.Formatters.Remove(config.Formatters.XmlFormatter);
} 
```

有关更多详细信息，请按照以下链接 [http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)

谢谢

# grid - 具有多选功能的 VFP 网格

> ID：13469179
> 
> 赞同：1
> 
> 时间：2012-11-20T08:27:40.967
> 
> 标签：grid, multi-select, foxpro, visual-foxpro

我正在尝试在网格上实现多记录选择功能。[它与http://www.tek-tips.com/faqs.cfm?fid=3831](http://www.tek-tips.com/faqs.cfm?fid=3831)
非常相似， 它添加了一个带有复选框的额外列。我想要那些复选框！

但这取决于基础表中的额外逻辑字段。它需要创建一个继承CHECKBOX 的类clscheck。我不确定为什么复选框需要这个 CLICK 过程。

```
 PROCEDURE CLICK
    IF DODEFAULT()
        KEYBOARD '{DNARROW}'
    ENDIF
 ENDPROC 
```

当我删除它时，行选择没有按预期正常工作。为什么这个？

这是我的要求：
1）我不想在基础表中添加额外的逻辑字段。
2）要使用网格中的控件，我认为 AllowCellSelection 必须是 .T。我想要**AllowCellSelection = .F。**因为除了复选框，我不需要使用网格中的任何控件。我只需要使用复选框。其他列将是只读的。
3) 我可以选择基础表中没有逻辑字段的列表吗？
4) 我可以删除 KEYBOARD '{DNARROW}' 的使用吗？

事实上，我有一个网格是**AllowCellSelection = .F。**，但它只提供单一选择。
我需要通过多项选择来增强它，因此，我只想添加一个带有复选框的额外列，以便用户知道他可以选择多条记录。
不需要傻瓜用户不熟悉的 Shift+Click 或 Ctrl+Click。

我发现了这个 - [http://www.tek-tips.com/faqs.cfm?fid=433](http://www.tek-tips.com/faqs.cfm?fid=433)
它还取决于一个额外的逻辑字段，它取决于 Shift+Click 和 Ctrl+Click。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:40:27.947

您所看到的对于多选网格来说很常见。我过去曾使用过与此类似的方法。但是，您害怕基础表中的额外列。这可能/不是真的。您不必总是更新 ORIGINAL 表，而是您要呈现给用户的临时 CURSOR。例如：如果您想在表格中显示员工列表。不，您不想继续将此列添加到原始员工表中，因为其他任何尝试进行多选的人都可能错误地获得您的选择。但是，如果您拉入自己的本地光标并呈现给用户，那么没问题。例子...

```
Thisform.YourGrid.RecordSource = "Employees"
(bound directly to your employee table -- not necessarily the right thing) 
```

对比

```
use in select( "C_MultiPickEmployees" )
select ;
      .F. as IsChosen, ;
      E.* ;
   from ;
      Employees E;
   into ;
      cursor C_MultiPickEmployees READWRITE

Thisform.YourGrid.RecordSource = "C_MultiPickEmployees" 
```

现在，您有了额外的列，而无需处理基础表的问题。如果您想进一步过滤您显示的内容 - 例如某个部门/部门的员工，那么只需将其添加到 WHERE 子句中，如果需要，添加一个 Order By 就可以了。

至于“允许单元格选择”，我从来没有处理过。我只是在第一列添加一个“复选框”并设置

Thisform.YourGrid.Column[1].CurrentControl = "CheckBoxControl"
（基于添加到列的名称）。

然后，设置第 1 列的“ControlSource”=“C_MultiPickEmployees.IsChosen”，你应该已经完成​​了。

至于试图强制向下箭头的“CLICK”事件。这更适用于自动滚动到下一条记录，因此您只需单击、单击、单击多个条目。

希望这有助于为您澄清事情。

# jquery - Jquery：使用可调整大小的 UI 插件增加或减少文本的字体大小

> ID：13469184
> 
> 赞同：4
> 
> 时间：2012-11-20T08:28:28.547
> 
> 标签：jquery, jquery-ui

我正在使用[可调整大小的 Jquery](http://api.jqueryui.com/resizable) UI 插件。我在可调整大小的元素中有一个 contenteditable div。

我希望 contenteditable div 的字体大小在我增加调整大小时增加，并在我减少调整大小时减小字体大小。基本上我希望文本在调整大小时最适合 contenteditable div。

检查[这个](http://jsfiddle.net/LyWuG/) jsfiddle

代码 ：

```
$(".resizeable").resizable({
                containment: "#background",
                minHeight:   120,
                maxHeight:   350,
                maxWidth:    550,
                minWidth:    220,
                resize: function(event, ui) {
                    resizeText(1);
                }
            });

            function resizeText(multiplier) {
                var textarea = $("#message"); 
                var fs = (parseFloat(textarea.css('font-size')) + multiplier).toString() + 'px';    // Increment fontsize
                var text = textarea.val();                                                          // Firefox won't clone val() content (wierd..)
                textarea.css({'font-size':fs}).replaceWith( textarea.clone().val(text) );           // Replace textarea w/ clone of itself to overcome line-height bug in IE
            } 
```

当我增加大小时，“输入消息”字体大小正在增加。但是当我减少它并没有减少。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:44:14.737

这个小部件有一个名为[resize](http://api.jqueryui.com/resizable/#event-resize)的事件。您可以收听此事件并实现您想要的。

例如：

```
$("#contenteditable").resizable({
  resize: function(event, ui) {
    // handle fontsize here
    console.log(ui.size); // gives you the current size of the div
    var size = ui.size;
    // something like this change the values according to your requirements
    $(this).css("font-size", (size.width * size.height)/1000 + "px"); 
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:48:20.107

试试这个：

$( ".selector" ).resizable({ alsoResize: "#text" });

# cordova - 使用 Phonegap/Cordova 2.2.0 的多页

> ID：13469186
> 
> 赞同：3
> 
> 时间：2012-11-20T08:28:33.813
> 
> 标签：cordova

我正在尝试跨平台框架phonegap，但多页存在一些问题。

我想要的只是以下内容：

*   第 1 页：静态内容
*   第 2 页：列表视图

我使用的代码：

第 1 页：index.html

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/default.css" />

    <title>Page 1</title>

    <link rel="stylesheet" href="js/jquery.mobile-1.2.0.min.css" />
    <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>

</head>
<body>
    <div id="static" data-role="page">

        <div data-role="header" data-position="fixed">
            <h1 id="header-text">Page 1</h1>
        </div><!-- /header -->

        <div data-role="content">
            <div id="static-content"></div>
        </div><!-- /content -->

        <div data-role="footer">
            <div data-role="navbar">
                <ul class="navbar">
                    <li><a href="index.html" class="ui-btn-active" data-transition="none">Static</a></li>
                    <li><a href="list.html" data-transition="none">Listview</a></li>
                </ul>
            </div><!-- /navbar -->
        </div><!-- /footer -->
    </div><!-- /page -->

    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript">
        document.addEventListener('deviceready', onDeviceReady, false);

        function onDeviceReady() {

            $('static-content').html('Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.');

        }
    </script>
</body> 
```

对于第 2 页：list.html

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/default.css" />

    <title>Page 2</title>

    <link rel="stylesheet" href="js/jquery.mobile-1.2.0.min.css" />
    <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>

</head>
<body>
    <div id="listview" data-role="page">

        <div data-role="header" data-position="fixed">
            <h1 id="header-text">Page 2</h1>
        </div><!-- /header -->

        <div data-role="content">
            <div id="list-container">
                <ul>
                    <li>item 1</li>
                    <li>item 2</li>
                    <li>item 3</li>
                </ul>
            </div>
        </div><!-- /content -->

        <div data-role="footer">
            <div data-role="navbar">
                <ul class="navbar">
                    <li><a href="index.html" data-transition="none">Static</a></li>
                    <li><a href="list.html" class="ui-btn-active" data-transition="none">Listview</a></li>
                </ul>
            </div><!-- /navbar -->
        </div><!-- /footer -->
    </div><!-- /page -->

    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript">
        document.addEventListener('deviceready', onDeviceReady, false);

        function onDeviceReady() {
            console.log('deviceready');

        }
    </script>
</body> 
```

我想将不同文件中的内容分开只是为了更好的结构。jquery mobile 处理页面的方式就像使用一个索引一样有效，但不是首选... ;)

我为导航栏链接尝试了以下解决方案：

*   带有以下内容的href：rel =“外部”
*   带有：data-ajax="false" 的 href
*   带有：rel="external" 和 data-ajax="false" 的 href

每次我使用外部链接执行此操作时，都会收到以下错误：

```
Exception building cordova JS globals: TypeError: Cannot redefine property: connection for key "connection" 
```

似乎cordova/phonegap框架被加载了两次，但我认为使用这个链接会触发页面的完全重新加载，那么应该加载两次呢？

还是我对多页的使用有一个普遍的误解？应该可以将不同文件中的内容分开，或者？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:44:13.383

您需要将脚本放在 head 部分，jquery mobile 在 ajax 加载的页面上会忽略该部分。

当第二个页面加载时，正文中的任何内容都会插入到 DOM 中，这就是 Cordova 尝试运行两次的原因。

# c - 反转链接列表

> ID：13469188
> 
> 赞同：0
> 
> 时间：2012-11-20T08:28:42.260
> 
> 标签：c, linked-list

> **可能重复：**
> [反转单链表](https://stackoverflow.com/questions/1801549/reverse-a-singly-linked-list)

我已经查找了链接[Reverse a singlelinked list](https://stackoverflow.com/questions/1801549/reverse-a-singly-linked-list)，但我真的没有得到答案。所以我重新打开这个问题。

我正在尝试反转链接列表，功能在这里：

```
void reverse (SLINK list)
{
  NODE *p_tmp_node;
  SLINK p_tmp_list;
  p_tmp_list = list->next;
  list->next = NULL;

  while (NULL != p_tmp_list)
  {
    p_tmp_node = p_tmp_list;
    p_tmp_list = p_tmp_list->next; // A
    p_tmp_node->next = list->next;
    list->next = p_tmp_node;
    //p_tmp_list = p_tmp_list->next; // B
  }
} 
```

我的问题是： **语句 A 与语句 B 相同，但如果 B 执行而不是 A，则无法得到预期的结果。A和B有什么不同？**

节点结构就像这样：

```
typedef struct tag_node
{
  int elem;
  struct tag_node *next;
} NODE, *SLINK; 
```

# xml - AS3 URLStream 切断响应的前 4 个字符

> ID：13469189
> 
> 赞同：0
> 
> 时间：2012-11-20T08:28:43.360
> 
> 标签：xml, actionscript-3, flash, urlstream

我有一个接受 XML 格式响应的 URLStream 对象，但不幸的是，响应的前 4 个字符被截断，导致 xml 格式错误。

如果我使用 URLLoader 对象，则从服务器返回的 xml 格式正确。

有人知道如何解决这个问题吗？

```
private var _stream:URLStream;

_myVariables = new URLVariables();

_myVariables.email = _un;
_urlRqSend = new URLRequest(_loginURL);

var encoder:Base64Encoder = new Base64Encoder();        
encoder.encode("password:"+_pw);

var credsHeader:URLRequestHeader = new URLRequestHeader("Authorization", "Basic " + encoder.toString());
_urlRqSend.requestHeaders.push(credsHeader);

_urlRqSend.data = _myVariables;         
_urlRqSend.method = URLRequestMethod.POST;      

_stream = new URLStream();          
_stream.addEventListener(flash.events.Event.COMPLETE, handleResponse);
_stream.load(_urlRqSend);

private function handleResponse(ev:flash.events.Event):void{    

trace("returned data: ",_stream.readUTFBytes(_stream.bytesAvailable));

} 
```

输出

//返回数据：`l version="1.0"...etc`

正确的反应应该是

//返回数据：`<?xml version="1.0"...etc`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:00:09.090

这是一个简单的解决方法：

```
var xml:String = _stream.readUTFBytes(_stream.bytesAvailable)
if(xml.search("<?xml version="1.0" != 0)){ //you may have to mix the "-s to compile.
  var start:int=xml.search("?>") + 3 //this will give you the character of the first element after the xml declaration (like <root> ...)  
  xml =  '<?xml version="1.0"...etc' + xml.Splice(start); //splice will return <root> ..., and we'll add the declaration before it.
} 
```

我在某处错误编码，请使用跟踪/调试来工作，但接近此的东西将解决问题。你应该在市长浏览器中检查它，以确保它在任何地方都能正常工作。

# java - 在字符串中查找 JSON 对象

> ID：13469190
> 
> 赞同：1
> 
> 时间：2012-11-20T08:28:52.343
> 
> 标签：java, android, regex, json

在我的问题是[我不得不处理一个实施不善的聊天服务器](https://stackoverflow.com/questions/13453233/android-reading-from-socket-hangs-on-second-read-loop)之后，我得出的结论是我应该尝试从其他服务器响应中获取聊天消息。

基本上，我收到一个如下所示的字符串：

```
13{"ts":2135646,"msg":"{\"ts\":123156,\"msg\":\"this is my chat {message 1\"}","sender":123,"recipient":321}45{"ts":2135646,"msg":"{\"ts\":123156,\"msg\":\"this is my chat} message 2\"}","sender":123,"recipient":321}1 
```

我想要的结果是两个子字符串：

```
{"ts":2135646,"msg":"{\"ts\":123156,\"msg\":\"this is my chat {message 1\"}","sender":123,"recipient":321}
{"ts":2135646,"msg":"{\"ts\":123156,\"msg\":\"this is my chat} message 2\"}","sender":123,"recipient":321} 
```

我可以接收到的输出是 JSON 对象（可能包含其他 JSON 对象）和一些数字数据之间的混合。

我需要从该字符串中提取 JSON 对象。

我考虑过计算花括号来选择第一个开头的括号和相应的结尾括号之间的内容。但是，消息可能包含大括号。

我已经考虑过正则表达式，但我找不到一个可以工作的（我不擅长正则表达式）

关于如何进行的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:40:04.883

这应该有效：

```
List<String> matchList = new ArrayList<String>();
Pattern regex = Pattern.compile(
    "\\{           # Match an opening brace.                              \n" +
    "(?:           # Match either...                                      \n" +
    " \"           #  a quoted string,                                    \n" +
    " (?:          #  which may contain either...                         \n" +
    "  \\\\.       #   escaped characters                                 \n" +
    " |            #  or                                                  \n" +
    "  [^\"\\\\]   #   any other characters except quotes and backslashes \n" +
    " )*           #  any number of times,                                \n" +
    " \"           #  and ends with a quote.                              \n" +
    "|             # Or match...                                          \n" +
    " [^\"{}]*     #  any number of characters besides quotes and braces. \n" +
    ")*            # Repeat as needed.                                    \n" +
    "\\}           # Then match a closing brace.", 
    Pattern.COMMENTS);
Matcher regexMatcher = regex.matcher(subjectString);
while (regexMatcher.find()) {
    matchList.add(regexMatcher.group());
} 
```

# vim - 我不能和 NERD 评论员一起工作

> ID：13469194
> 
> 赞同：3
> 
> 时间：2012-11-20T08:29:04.503
> 
> 标签：vim

我安装了 NerdCommenter 就像它应该如何安装一样。我阅读了帮助文件。所以，为了评论我需要做的一行`<leader>c$`。

我还读到领导密钥是`\`默认的。但这对我不起作用。我从未使用过领导者密钥，所以我认为我做错了什么。

任何人都可以帮助我使用 nerdcommenter 使用基本注释和取消注释选定的行吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-08T21:25:27.210

# 问题

在许多非英语键盘上，反斜杠`\`只能通过`AltGr`组合键访问。这使得`<Leader>`角色的默认设置对于这些用户来说相当不切实际。此外，`<Leader>`按键组合的默认超时时间为 1000 毫秒。这可以通过`<Leader>`命令行右边缘的键消失来观察。因此，非英语键盘用户需要是真正的快速打字员`\``c``c`才能工作。否则，会导致不希望的`cc`线路更改。

这是德语键盘布局的示例，其中反斜杠键位于顶行，右三： ![德语键盘布局](../Images/b17cc73b7a36aad51c66a1795f7cc722.png)

# 解决方案

建议非英语键盘用户将`<Leader>`键从`\`字符更改为更易于访问的`,`键。Vim 初学者也应该考虑稍微长一点的 1500 毫秒超时。这是需要添加的内容`~/.vimrc`

```
let mapleader=","
set timeout timeoutlen=1500 
```

最后一个警告；这些**更改只有在完全退出 Vim 后才会生效。**资源与`:source $MYVIMRC`将不起作用！

现在，可以使用`,``c``c`NERD Commenter 进行评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T12:36:53.587

我遇到了同样的问题，我注意到它不会完全拒绝命令，而是会说“没有错误”并且什么都不做。我非常仔细地阅读了 NERDCommenter 的安装说明并注意到了这一点：

> 'Classic' 或 'Pathogen' 安装后，确保你启用了文件类型插件，因为脚本使用了 |'commentstring'| 在可能的情况下（通常在文件类型插件中设置）。见 |filetype-plugin-on| 有关详细信息，但基本上，将其粘贴在您的 vimrc 中：
> 
> 文件类型插件

即使我使用的是 NeoBundle 而不是 Pathogen，我也尝试过，重启后，瞧。希望能帮助到你。

# yii - 常见 YII 函数的基类？

> ID：13469200
> 
> 赞同：0
> 
> 时间：2012-11-20T08:29:35.033
> 
> 标签：yii

我知道如何创建一个允许我实例化它并在我的项目中使用的类。我想要做的是在没有实例化类的情况下拥有函数。例如，我知道如何做到这一点：

```
$core = new core();
$val = $core->convertToMyNotation($anotherval); 
```

但我想要的是能够在任何地方在任何地方做这件事，不管是什么类别：

```
$val = convertToMyNotation($anotherval); 
```

为了能够做到这一点，我会将这些功能放在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:56:49.527

最好的方法是在 components/Controller.php 中创建一个公共函数

```
public function globalFunction(){
 // do something here.
} 
```

并通过

```
$this->globalFunction(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:40:28.647

您可以将静态方法定义为选项。

```
class core{
    public static function convertToMyNotation($value){
        //do whatever here
        return $value;
    }
} 
```

然后像这样调用它：

```
$val = core::convertToMyNotation($anotherval); 
```

这不需要实例化要使用的对象。唯一的限制是您不能`$this`在静态方法中使用该属性。

或者，只需定义一个包含您的函数的文件，并在早期包含该文件，例如在您的 public_html/index.php 文件中的 boostrap 脚本中。

编辑：darkheir 提出了一些很好的建议。在你的 protected/components 文件夹中包含这样一个类，并让它扩展`CComponent`以获得一些潜在有用的增强。

通过将类包含在 protected/components 文件夹中，您可以获得默认情况下自动加载类的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:51:13.473

您的答案没有明确的问题，这在很大程度上取决于该功能将做什么！

如果该函数正在执行特定于模型的某些操作（获取最后一个用户，...），这必须在用户模型中，如 Willem Renzema 所述：

```
class theModelClass {
    public static function convertToMyNotation($value){
        //do whatever here
        return $value;
    }
} 
```

你会这样称呼它

```
$val = theModelClass::convertToMyNotation($anotherval); 
```

如果该函数正在处理用户输入（清理他的输入，检查值，...），那么它必须转到控制器，您将使用 Hemc 解决方案：

在 components/Controller.php 中创建一个公共函数

```
public function globalFunction(){
 // do something here.
} 
```

并通过

```
$this->globalFunction(); 
```

如果该函数是一个 Helper：执行一些不依赖于模型或用户输入的操作，那么您可以创建一个新类，您将把它放在您的组件目录中：

```
class core extends CComponent{
    public static function convertToMyNotation($value){
        //do whatever here
        return $value;
    }
} 
```

和

```
$val = core::convertToMyNotation($anotherval); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T21:31:35.923

实际上，我认为您正在寻找这个答案： [http ://www.yiiframework.com/wiki/31/use-shortcut-functions-to-reduce-typing/](http://www.yiiframework.com/wiki/31/use-shortcut-functions-to-reduce-typing/)

本质上，在你的入口脚本中，在你加载 Yii 之前，包含一个全局函数文件：

```
require('path/to/globals.php'); 
```

然后，该文件中定义的任何函数都可以用作快捷方式。小心，但享受力量！:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T19:51:45.553

创建类似的东西

```
Class Core extends CApplicationComponent{

    public function doSomething(){}
} 
```

并在配置 main.php

```
'components'=>array(
    'core'=>array(
        'class' => 'Core'
    ),
), 
```

现在你可以随时打电话

```
Yii::app()->core->doSomething(); 
```

# c# - C#通过反射检索属性

> ID：13469202
> 
> 赞同：2
> 
> 时间：2012-11-20T08:29:48.093
> 
> 标签：c#, reflection, instantiation

> **可能重复：**
> [使用 C# 中的反射从字符串中获取属性值](https://stackoverflow.com/questions/1196991/get-property-value-from-string-using-reflection-in-c-sharp)

我有一个将数据库中的字段合并到电子邮件和信件中的应用程序。由于有不同的用户，他们要求合并不同的字段，并且当我创建一个新的合并字段时，文档也必须重新编写。这会带来问题，所以我想自动化文档。

我想出了以下代码（在这个例子中，我只定义了 2 个合并字段，称为 stringField，但目前它几乎是 100 个）：

```
namespace ReflectionTest
{

    public class clReflection
    {
        private System.Data.DataTable dtClient = new System.Data.DataTable();

        public int ClientNumber { get; set; }
        public int AdressNumber { get; set; }

        public stringField ClientName
        {
            get
            {
                stringField _ClientName = new stringField();
                _ClientName.FieldContent = "Obama";
                _ClientName.FieldNote = "Last name of client";
                //Available email and available letter should be default true
                return _ClientName; 
            }
            set { }
        }

        public stringField ClientEmail
        {
            get
            {
                stringField _ClientEmail = new stringField();
                _ClientEmail.FieldContent = "obama@whitehouse.gov";
                _ClientEmail.FieldNote = "use only tested email adresses";
                _ClientEmail.AvailableLetter = false;
                return _ClientEmail; 
            }
            set
            { }
        }

    }

    public static class FindStringFields
    {
        public static System.Data.DataTable stringFields()
        {
            System.Data.DataTable dtStringFields = new System.Data.DataTable();
            dtStringFields.Columns.Add(new System.Data.DataColumn("FieldName", typeof(string)));
            dtStringFields.Columns.Add(new System.Data.DataColumn("FieldNote", typeof(string)));
            dtStringFields.Columns.Add(new System.Data.DataColumn("AvailableEmail", typeof(bool))); 

            clReflection test = new clReflection();
            System.Reflection.PropertyInfo[] props = test.GetType().GetProperties(System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance);
            for (int i = 0; i < props.Length; i++)
            {
                if (props[i].PropertyType == typeof(stringField))
                {
                    dtStringFields.Rows.Add(new object[] { props[i].Name , "FieldNote", true });

                }
            }
            return dtStringFields;
        }
    }

    public class stringField
    {
        private bool _AvailableEmail = true;
        private bool _AvailableLetter = true;

        public string FieldContent { get; set; }
        public string FieldNote { get; set; }
        public bool AvailableEmail
        {
            get { return _AvailableEmail; }
            set { AvailableEmail = value; }

        }

        public bool AvailableLetter
        {
            get { return _AvailableLetter; }
            set { _AvailableLetter  = value; }
        }

    }
} 
```

如果触发指令： System.Data.DataTable dtTest = FindStringFields.stringFields(); 您将获得一个包含所有已定义字符串字段的数据表。但是，除了字符串字段的名称之外，我无法检索字符串字段的属性。如何实例化找到的 stringField 以便检索其他属性？

谢谢，

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:34:44.000

如果您有字符串字段名称，请尝试以下操作：

```
public static object GetPropValue( object src, string propName )
 {
     return src.GetType( ).GetProperty( propName ).GetValue( src, null );
 } 
```

摘自此 SO 帖子：

[在 C# 中使用反射从字符串中获取属性值](https://stackoverflow.com/questions/1196991/get-property-value-from-string-using-reflection-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:33:23.207

使用[Type.GetProperties](http://msdn.microsoft.com/en-us/library/aky14axb.aspx)方法获取类型的所有公共属性

```
Type type = typeof(stringField);
PropertyInfo[] properties = type.GetProperties(); 
```

还有可以指定 BindingFlags 的重载。

然后你可以得到属性的值：

```
object value = property.GetValue(_ClientEmail); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:40:21.240

你可以这样做：

```
 //its better to use a property than get it from the array every time!
   PropertyInfo pi = prop[i]; 

    //get the underlying value
    stringField underlyingStringField = prop.GetValue(test, null) as stringField; 

    //use the underlying value now
    Debug.Write(underlyingStringField.AvalilableEmail);

    ... 
```

# php - 删除网格中的行时出现奇怪的 JSON (Ext-JS 4)

> ID：13469206
> 
> 赞同：0
> 
> 时间：2012-11-20T08:30:11.540
> 
> 标签：php, javascript, extjs, extjs4

为了在网格中获取选定的行，我使用这个：

```
'#deleteWorkerButton': {
                click: function(me, e, eOpts){
                    var grid = Ext.ComponentQuery.query('Worker')[0];
                    var selected = grid.getSelectionModel().getSelection()[0];

                    grid.getStore().remove(selected);
                }
            } 
```

在我的商店中，我有发布此 JSON 的 url，但是当我使用 json_decode 时，我得到了这个：

```
object(stdClass) {
    id => "5";
    name => "tets";
    email => "era@sdfsa.com";
    phone => "test";
} 
```

但我需要`array()`，不需要`stdClass`。

这是我的商店：

```
Ext.define('Sabrina.store.Workers', {
    extend: 'Ext.data.Store',
    fields:['id', 'name', 'email', 'phone'],
    proxy: {
        type: 'ajax',
        api: {
            create  : 'php/usuarios.php?action=insert',
            read    : '../mega_sabrina_cake/workers/index',
            update  : 'php/usuarios.php?action=update',
            destroy : '../mega_sabrina_cake/workers/delete'
        },
        actionMethods: {
            create  : 'POST',
            read    : 'POST',
            update  : 'POST',
            destroy : 'POST'
        },
        reader: {
            type: 'json',
            root: 'Worker',
            rootProperty: 'Worker',
            successProperty: 'success',
            messageProperty: 'message'
        },
        writer: {
            type: 'json',
            writeAllFields: true,
            root: 'data',
            encode: true
        },
    },
    autoLoad: true,
    autoSync: true
}); 
```

所以，我用它来删除数据。当 json_decode() 时，我可以用我的商店做些什么来获得一个“NORMAL”数组？

我认为问题出在：

```
grid.getStore().remove(selected); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:47:53.493

只需阅读[文档](http://es1.php.net/json_decode)：

> 混合 json_decode ( string $json [, **bool $assoc = false** [, int $depth = 512 [, int $options = 0 ]]] )
> [...]
> **assoc** 当为 TRUE 时，返回的对象将被转换为关联数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:50:41.570

尝试添加`allowSingle: false`到编写器配置。默认情况下，它设置为 true，这意味着在没有数组包装的情况下发送单个记录更改。

# java - 动态更改 JNDI 提供程序

> ID：13469208
> 
> 赞同：4
> 
> 时间：2012-11-20T08:30:25.157
> 
> 标签：java, spring, jms, jndi, hornetq

我在同一台机器上有两台 HornetQ (2.2.14) 独立服务器（实时备份服务器）；考虑这种情况：

1.  *实时服务器*崩溃，*备份服务器*现已启动。
2.  *客户端 A*（不知道 Live 服务器已崩溃）想要连接到 Live 服务器（它应该使用*Live 服务器 JNDI 提供程序查找其**连接工厂*）。
**   客户端 A 找不到实时服务器 JNDI 提供程序，因此它应该连接到备份服务器（它应该使用***备份服务器 JNDI 提供程序*****查找其连接工厂）。***

 ****如何为客户端 A*动态*更改 JNDI 提供程序（更改 URL） ？JNDI故障转移有什么办法吗？**

我有一个 spring 集成应用程序，它是我的 applicationContext.xml：

```
<!-- Default JndiTemplate -->
        <bean id="defaultJndiTemplate" class="org.springframework.jndi.JndiTemplate">
            <property name="environment">
                <props>
                    <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory</prop>
                    <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces</prop>
                    <prop key="java.naming.provider.url">jnp://localhost:1099</prop>
                </props>
            </property>
        </bean>

 <!-- Backup JndiTemplate -->
        <bean id="backupJndiTemplate" class="org.springframework.jndi.JndiTemplate">
            <property name="environment">
                <props>
                    <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory</prop>
                    <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces</prop>
                    <prop key="java.naming.provider.url">jnp://localhost:2099</prop>
                </props>
            </property>
        </bean>

    <!-- Destinations -->
    <bean id="defaultDestination" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiTemplate" ref="defaultJndiTemplate" />
        <property name="jndiName" value="/queue/exampleQueue" />
    </bean>

    <!-- ConnectionFactories -->
    <bean id="defaultConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiTemplate" ref="defaultJndiTemplate" />
        <property name="jndiName" value="/ConnectionFactory" />
    </bean>

    <!-- JMS Template -->
    <bean name="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
        <property name="connectionFactory" ref="defaultConnectionFactory" />
        <property name="sessionTransacted" value="true" />
    </bean>

    <!-- Message Producer -->
    <bean name="messageSender" class="messaging.producer.MessageSender">
        <property name="jmsTemplate" ref="jmsTemplate" />
        <property name="destination" ref="defaultDestination" />
    </bean> 
```

**更新：** 我可以通过这种方式从我的应用程序中的当前实时服务器查找连接工厂：对于每条消息，

1.  检查可用的 JNDI 提供程序（来自当前的实时服务器）
2.  查找连接工厂
3.  发信息

像这样的东西（它来自我的*MessageSender*类）：

```
 //init initialContexts for live and backup servers
    public init() throws NamingException, CommunicationException
        {
            Hashtable<String, String> environment = new Hashtable<String, String>();
            environment.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
            environment.put(Context.URL_PKG_PREFIXES, "org.jboss.naming:org.jnp.interfaces");
            environment.put(Context.PROVIDER_URL, "jnp://localhost:1099");
            initialContext_live = new InitialContext(environment);

            environment = new Hashtable<String, String>();
            environment.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
            environment.put(Context.URL_PKG_PREFIXES, "org.jboss.naming:org.jnp.interfaces");
            environment.put(Context.PROVIDER_URL, "jnp://localhost:2099");
            initialContext_backup = new InitialContext(environment);

            jmsTemplate = new JmsTemplate();

        }
        //Sending message to toQueue
        public void send(final AbstractMessage message, String toQueue) throws NamingException 
        {
            Destination destination;
            try
            {
                connectionFactory = (ConnectionFactory)initialContext_live.lookup("/ConnectionFactory");
                jmsTemplate.setConnectionFactory(connectionFactory);
                destination = (Destination) initialContext_live.lookup(toQueue);
                System.out.print("[to-live]-");
            }
            catch(Exception e) //live server is down
            {
                connectionFactory = (ConnectionFactory)initialContext_backup.lookup("/ConnectionFactory");
                jmsTemplate.setConnectionFactory(connectionFactory);
                destination = (Destination) initialContext_backup.lookup(toQueue);
                System.out.print("[to-backup]-");
            }
            jmsTemplate.send(destination, new MessageCreator() 
            {
                @Override
                public Message createMessage(Session session) throws JMSException 
                {
                    ObjectMessage objMessage = session.createObjectMessage(message);
                    return objMessage;
                }
            });
            System.out.println("[MessageSender] Message sent.");
        } 
```

但这**非常**耗时（大约两秒钟内一条消息）！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:40:35.333

我在这里发现的是两件事

首先，您设置一个全局标志并放置 if else 条件

```
flag=true;
if(flag){
 try
        {
            connectionFactory =      (ConnectionFactory)initialContext_live.lookup("/ConnectionFactory");
            jmsTemplate.setConnectionFactory(connectionFactory);
            destination = (Destination) initialContext_live.lookup(toQueue);
            System.out.print("[to-live]-");
        }
}else{
connectionFactory = (ConnectionFactory)initialContext_backup.lookup("/ConnectionFactory");
            jmsTemplate.setConnectionFactory(connectionFactory);
            destination = (Destination) initialContext_backup.lookup(toQueue);
            System.out.print("[to-backup]-");
}
        catch(Exception e) //live server is down
        {
flag=false;
            connectionFactory = (ConnectionFactory)initialContext_backup.lookup("/ConnectionFactory");
            jmsTemplate.setConnectionFactory(connectionFactory);
            destination = (Destination) initialContext_backup.lookup(toQueue);
            System.out.print("[to-backup]-");
        } 
```

所以在这里它不会检查实时服务器的代码，如果它之间的某种连接丢失将直接连接到备份服务器

如果您的实时服务器已启动，您可以将 flag 设置为 true。

第二件事在 catch 块而不是异常中为特定异常声明它。它也会影响性能。**

# r - 使用 cbind 时出现 R 错误

> ID：13469209
> 
> 赞同：-1
> 
> 时间：2012-11-20T08:30:38.413
> 
> 标签：r

我尝试使用 cbind 组合 2 个向量，两个向量的大小相同，运行代码时出现错误，向量很大，长度 = 57605。

```
 final=cbind (counts1,tx_by_gene)

> > Error: cannot allocate vector of size 225 Kb R(473,0xa0cb8540) malloc: *** mmap(size=233472) failed (error code=12)
> *** error: can't allocate region
> *** set a breakpoint in malloc_error_break to debug R(473,0xa0cb8540) malloc: *** mmap(size=233472) failed (error code=12)
> *** error: can't allocate region
> *** set a breakpoint in malloc_error_break to debug 
```

谁能帮助我为什么会出现此错误？或其他组合这两个向量的方式？

谢谢你

```
> str(counts1) =  int [1:57605] 0 0 0 0 0 0 0 0 0 0 ... 

>str(tx_by_gene)
> Formal class 'GRangesList' [package "GenomicRanges"] with 5 slots   ..@ partitioning   :Formal class 'PartitioningByEnd' [package
> "IRanges"] with 5 slots   .. .. ..@ end            : int [1:57605] 3 5
> 12 17 27 36 42 46 58 60 ...   .. .. ..@ NAMES          : chr [1:57605]
> "ENSG00000000003" "ENSG00000000005" "ENSG00000000419"
> "ENSG00000000457" ...   .. .. ..@ elementMetadata: NULL   .. .. ..@
> elementType    : chr "integer"   .. .. ..@ metadata       : list()  
> ..@ unlistData     :Formal class 'GRanges' [package "GenomicRanges"]
> with 7 slots   .. .. ..@ seqnames       :Formal class 'Rle' [package
> "IRanges"] with 5 slots   .. .. .. .. ..@ values         : Factor w/
> 93 levels "chr1","chr2",..: 8 20 1 6 1 8 6 3 7 13 ...   .. .. .. ..
> ..@ lengths        : int [1:41694] 5 7 30 18 21 6 2 9 43 23 ...   ..
> .. .. .. ..@ elementMetadata: NULL   .. .. .. .. ..@ elementType    :
> chr "ANY"   .. .. .. .. ..@ metadata       : list()   .. .. ..@ ranges
> :Formal class 'IRanges' [package "IRanges"] with 6 slots   .. .. .. ..
> ..@ start          : int [1:191891] 99883667 99887538 99888439
> 99839799 99848621 49551404 49551404 49551404 49551433 49551482 ...  
> .. .. .. .. ..@ width          : int [1:191891] 8137 4149 6550 15084
> 3908 23684 23684 23689 10966 23577 ...   .. .. .. .. ..@ NAMES        
> : NULL   .. .. .. .. ..@ elementMetadata: NULL   .. .. .. .. ..@
> elementType    : chr "integer"   .. .. .. .. ..@ metadata       :
> list()   .. .. ..@ strand         :Formal class 'Rle' [package
> "IRanges"] with 5 slots   .. .. .. .. ..@ values         : Factor w/ 3
> levels "+","-","*": 2 1 2 1 2 1 2 1 2 1 ...   .. .. .. .. ..@ lengths 
> : int [1:28670] 3 2 12 10 9 6 16 2 13 8 ...   .. .. .. .. ..@
> elementMetadata: NULL   .. .. .. .. ..@ elementType    : chr "ANY"  
> .. .. .. .. ..@ metadata       : list()   .. .. ..@ seqlengths     :
> Named int [1:93] 249250621 243199373 198022430 191154276 180915260
> 171115067 159138663 155270560 146364022 141213431 ...   .. .. .. ..-
> attr(*, "names")= chr [1:93] "chr1" "chr2" "chr3" "chr4" ...   .. ..
> ..@ elementMetadata:Formal class 'DataFrame' [package "IRanges"] with
> 6 slots   .. .. .. .. ..@ rownames       : NULL   .. .. .. .. ..@
> nrows          : int 191891   .. .. .. .. ..@ elementMetadata: NULL  
> .. .. .. .. ..@ elementType    : chr "ANY"   .. .. .. .. ..@ metadata 
> : list()   .. .. .. .. ..@ listData       :List of 2   .. .. .. .. ..
> ..$ tx_id  : int [1:191891] 93738 93739 93740 93736 93737 175481
> 175482 175480 175483 175484 ...   .. .. .. .. .. ..$ tx_name: chr
> [1:191891] "ENST00000373020" "ENST00000496771" "ENST00000494424"
> "ENST00000373031" ...   .. .. ..@ elementType    : chr "ANY"   .. ..
> ..@ metadata       : list()   ..@ elementMetadata:Formal class
> 'DataFrame' [package "IRanges"] with 6 slots   .. .. ..@ rownames     
> : NULL   .. .. ..@ nrows          : int 57605   .. .. ..@
> elementMetadata: NULL   .. .. ..@ elementType    : chr "ANY"   .. ..
> ..@ metadata       : list()   .. .. ..@ listData       : list()   ..@
> elementType    : chr "GRanges"   ..@ metadata       : list() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:45:35.730

该对象`tx_by_gene`不是向量。您可以使用该`is.vector`功能进行检查

```
is.vector(counts1) 
is.vector(tx_by_gene) 
```

当然，也可以定义一个方法，这样两个对象就可以组合起来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:08:50.640

这些向量对于 R 来说不应该太大。你可能在`cbind()`操作之前用掉了很多内存。查看您当前拥有的对象，`ls()`并使用 删除不再需要的对象`rm()`。

# c++ - 如何检测 W2A 转换是否完全成功

> ID：13469211
> 
> 赞同：1
> 
> 时间：2012-11-20T08:30:51.037
> 
> 标签：c++, visual-c++, unicode, mfc, atl

[在这里](https://stackoverflow.com/questions/1525456/converting-unicode-to-multibyte)您可以看到，当您从 Wide 转换为 Narrow 时，某些符号可能会被替换为`?`. 当 W2A 转换应用于字符串时如何检测这些情况。往返转换是一种方式，但速度不快。我想在转换 W2A 函数时应该以某种方式标记转换不是完全可能的。如何获得这些信息？

编辑：例如，如果

```
int WideCharToMultiByte(
  UINT CodePage, 
  DWORD dwFlags, 
  LPCWSTR lpWideCharStr, 
  int cchWideChar, 
  LPSTR lpMultiByteStr, 
  int cbMultiByte, 
  LPCSTR lpDefaultChar, 
  LPBOOL lpUsedDefaultChar 
); 
```

最后一个论点是告诉我需要什么。W2A呢？如何侦破案件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:35:53.200

要检查这一点，请直接使用[WideCharToMultiByte](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)。您有迹象表明那里使用了默认字符，并且您有影响转换过程的标志。

`W2A`使用与`dwFlags`零和`lpUsedDefaultChar`NULL 相同的 API，因此您需要的信息根本不会被查询。

# ios - connectionDidFinishLoading 后 SocketRocket 崩溃

> ID：13469215
> 
> 赞同：1
> 
> 时间：2012-11-20T08:31:21.630
> 
> 标签：ios, xcode, delegates, socket.io

所以我想使用socket.io开发一个基本的聊天应用程序。我正在使用[这个](https://github.com/pkyeck/socket.IO-objc)框架，它本质上只是 SocketRocket 的一个包装器。

现在我创建了一个 connectToHost:onPort，我在 didReceiveResponse 中收到了 200。connectionDidFinishLoading 也被调用。它最终在 openSocket 方法中打印 Opening URL_NAME，然后我在此方法中获得 EXC_BAD_ACCESS：

```
[self _performDelegateBlock:^{
    if ([self.delegate respondsToSelector:@selector(webSocketDidOpen:)]) {  // <- EXC_BAD_ACESSS error here
        [self.delegate webSocketDidOpen:self];
    };
}]; 
```

知道它可能是什么吗？据我了解，我使用的框架应该实现 Socket Rocket 的这个委托方法。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:56:27.593

终于发现了错误，这很愚蠢。我应该已经创建了 SocketIO 实例的类变量。这就是为什么生命周期结束并且 delagate 为零的原因。呃，好吧！

# c++ - 如何将重载运算符应用于此？

> ID：13469221
> 
> 赞同：0
> 
> 时间：2012-11-20T08:31:36.117
> 
> 标签：c++, operator-overloading, this-pointer

如何在 C++ 类的另一个成员函数中调用重载运算符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T08:37:04.650

假设它作为成员重载，您通常使用`(*this)operator<parameter(s)>`，所以如果一个类有一个重载`operator[]`，例如，一个 int 参数（例如，`T &operator[](int index);`），另一个成员函数可以使用 调用它`(*this)[2]`。

如果它作为一个自由函数被重载，你会做几乎同样的事情。例如，假设您有一个免费功能，例如：

```
my_string operator+(my_string const &a, my_string const &b); 
```

您可以从成员函数中调用它，例如：

```
my_string operator+(my_string const &other) { 
   return (*this) + other;
} 
```

在这种非常简单的情况下可能没有用，但仍然显示了总体思路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:40:05.650

您的问题很模棱两可，但是这三个子答案之一应该有效：

每当您想`this`在任何（非静态）成员函数中使用时，都可以这样做：

```
class A {
    int b;

    void foo() {
        this->b;
    }

    void bar() {
        foo(); // Those calls are the same
        this->foo();

        this->b;
    }
} 
```

C++ 关心`this`成为同一个对象。

* * *

当你想调用重载运算符`operator+=`时，你可以这样做：

```
void foo()
{
    *this += bar;
    (*this)[bar]; // for operator[]
} 
```

* * *

如果您需要调用父类的运算符：

```
class A, public Base {

    void foo() 
    {
        this->Base::operator+= bar; // Equivalent syntax again
        ((Base)*this) += bar;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:54:12.200

重载的操作符会被自动调用，不需要显式调用。下面是一个运算符重载的简单示例：

```
class MyNumber
{
private:
    int number_;

public:
    MyNumber() : number_(0) { }

    MyNumber& operator++() // prefix
    {
        ++number_;
        return *this;
    }

    MyNumber operator++(int) // postfix
    {
        MyNumber result = *this;
        ++number_; // Calls this->operator++(void);
        return result;
    }
};

int main(void)
{
    MyNumber number;
    number++;
    ++number;
    return 0;
} 
```

# android - android获取屏幕上edittext的当前坐标

> ID：13469224
> 
> 赞同：0
> 
> 时间：2012-11-20T08:31:44.140
> 
> 标签：android, android-layout, android-edittext

我需要在屏幕上获取edittext的当前坐标。我正在使用`OnGlobalLayoutListener` ，但它被调用了两次而不是一次，另一个缺点是它调用得太晚了。如果有任何方法如何在创建时立即获取 editText 的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:33:55.933

使用 View.getLocationOnScreen() 和/或 getLocationInWindow()。**您可以在 onWindowFocusChanged 中使用**

```
@Override
    public void onWindowFocusChanged(boolean hasFocus) {
        // TODO Auto-generated method stub
        super.onWindowFocusChanged(hasFocus);

        int[] locationInWindow = new int[2];
        object.getLocationInWindow(locationInWindow);

        Log.v("TAG","getLocationInWindow() - "+ locationInWindow[0] + " : " + locationInWindow[1]);
    } 
```

# extjs - 如何在 ExtJS 的嵌套函数中使用作用域

> ID：13469234
> 
> 赞同：1
> 
> 时间：2012-11-20T08:32:36.983
> 
> 标签：extjs, scope, nested-function

`scope`我在嵌套函数中使用时遇到问题。我的代码在下面，并且代码中也说明了错误。如何传递`scope`给嵌套函数？

```
this.store_1.load({
    params  :{start:0, limit:20},
    callback: function(records, operation, success)
    {
        this.store_2.load({
            params      : {argID: argID},
            callback    : function(records, operation, success) {

                var my_data = this.store_2.data.items[0].data;  

                this.my_rowExpander = new Ext.ux.grid.RowExpander({
                    tpl : new Ext.Template(template_str)
                });

                this.MyDetailGraph = this.getMyGraph(graphDataArr);

                this.MyDetailSummaryPanel = new Ext.Panel({ 
                        html    : this.getMyDetailSummary_Template(arg1, arg2, arg3),
                        title   : 'Title'
                });

                this.myPagingBBar = new Ext.PagingToolbar({
                      pageSize      : 20,
                      buttonAlign   : 'center',
                      store         : this.store_1,
                      doRefresh     : function(){
                            this.store.load({ // if I use this.store_1.load gives error this.store_1 is undefined
                                params  :{start:0, limit:20},
                                callback: function(records, operation, success)
                                {   
                                    // here gives error -->  this.updateDetailGraphValue is not a function
                                    this.updateDetailGraphValue(arg1, this.MyDetailGraph, arg2);
                                    // here must be an error like above
                                    this.updateDetailSummaryPanelValue(this.MyDetailSummaryPanel, arg1, arg2, arg3);
                                }
                            });
                      }
                });

                this.MyDetailGrid = new Ext.grid.GridPanel({
                    store       : this.store_1,
                    bbar        : this.myPagingBBar,
                    plugins     : this.my_rowExpander,
                    columns     :[
                                    this.my_rowExpander,
                                    {header: 'header1'},
                                    {header: 'header2'},
                                    {header: 'header3'},
                                    {header: 'header4'}
                                 ]
                });

                argPanel.items.insert(0, this.MyDetailGraph);

                argPanel.items.insert(1, this.MyDetailSummaryPanel);

                argPanel.items.insert(2, this.MyDetailGrid);

                argPanel.doLayout();
            },
            scope       : this
        });
    }, 
    scope : this
});

this.updateDetailGraphValue = function(argMainPanel, argGraph, argDataArray)
{
        this.graph = this.getDetailGraph(argDataArray);
        argMainPanel.remove(argGraph, true);
        argMainPanel.items.insert(0, this.graph);
        argMainPanel.doLayout();
};

this.updateDetailSummaryPanelValue = function(argPanel, arg1, arg2, arg3)
{
        argPanel.update(this.getDetailSummary_Template(arg1, arg2, arg3));
        argPanel.doLayout();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:51:15.490

试试下面的代码。但我不知道它会起作用。您尚未在回调~~中为最后一个回调定义~~~~任何~~范围，并且您一直在使用。最终遇到范围问题只是时间问题。考虑映射到局部变量，例如.~~`this``this``me`~~

 ~~```
this.store_1.load({
    params  :{start:0, limit:20},
    scope: this,
    callback: function(records, operation, success)
    {
        this.store_2.load({
            params      : {argID: argID},
            scope: this,
            callback    : function(records, operation, success) {

                var my_data = this.store_2.data.items[0].data;  

                this.my_rowExpander = new Ext.ux.grid.RowExpander({
                    tpl : new Ext.Template(template_str)
                });

                this.MyDetailGraph = this.getMyGraph(graphDataArr);

                this.MyDetailSummaryPanel = new Ext.Panel({ 
                        html    : this.getMyDetailSummary_Template(arg1, arg2, arg3),
                        title   : 'Title'
                });

                function innerCB(records, operation, success) {   
                    // here gives error -->  this.updateDetailGraphValue is not a function
                    this.updateDetailGraphValue(arg1, this.MyDetailGraph, arg2);
                    // here must be an error like above
                    this.updateDetailSummaryPanelValue(this.MyDetailSummaryPanel, arg1, arg2, arg3);
                }

                this.myPagingBBar = new Ext.PagingToolbar({
                      pageSize      : 20,
                      buttonAlign   : 'center',
                      store         : this.store_1,
                      doRefresh     : function(){
                            this.store.load({ // if I use this.store_1.load gives error this.store_1 is undefined
                                params  :{start:0, limit:20},
                                scope: this,
                                callback: innerCB
                            });
                      }
                });

                this.MyDetailGrid = new Ext.grid.GridPanel({
                    store       : this.store_1,
                    bbar        : this.myPagingBBar,
                    plugins     : this.my_rowExpander,
                    columns     :[
                                    this.my_rowExpander,
                                    {header: 'header1'},
                                    {header: 'header2'},
                                    {header: 'header3'},
                                    {header: 'header4'}
                                 ]
                });

                argPanel.items.insert(0, this.MyDetailGraph);

                argPanel.items.insert(1, this.MyDetailSummaryPanel);

                argPanel.items.insert(2, this.MyDetailGrid);

                argPanel.doLayout();
            }
        });
    }
});

this.updateDetailGraphValue = function(argMainPanel, argGraph, argDataArray)
{
        this.graph = this.getDetailGraph(argDataArray);
        argMainPanel.remove(argGraph, true);
        argMainPanel.items.insert(0, this.graph);
        argMainPanel.doLayout();
};

this.updateDetailSummaryPanelValue = function(argPanel, arg1, arg2, arg3)
{
        argPanel.update(this.getDetailSummary_Template(arg1, arg2, arg3));
        argPanel.doLayout();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:39:15.687

我`this`在第一次加载时使用了，我已经定义了一个全局范围，`myGlobalScope`然后我`myGlobalScope`在其他地方使用：

```
this.store_1.load({
    params  :{start:0, limit:20},
    scope: this,
    callback: function(records, operation, success)
    {

    var myGlobalScope = this; // I have defined this global scope

        this.store_2.load({
            params      : {argID: argID},
            scope   : myGlobalScope, // use myGlobalScope instead of this
            callback    : function(records, operation, success) {

                var my_data = this.store_2.data.items[0].data;  

                this.my_rowExpander = new Ext.ux.grid.RowExpander({
                    tpl : new Ext.Template(template_str)
                });

                this.MyDetailGraph = this.getMyGraph(graphDataArr);

                this.MyDetailSummaryPanel = new Ext.Panel({ 
                        html    : myGlobalScope.getMyDetailSummary_Template(arg1, arg2, arg3), // use myGlobalScope instead of this
                        title   : 'Title'
                });

                this.myPagingBBar = new Ext.PagingToolbar({
                      pageSize      : 20,
                      buttonAlign   : 'center',
                      store         : this.store_1,
                      doRefresh     : function(){
                            this.store.load({ // if I use this.store_1.load gives error this.store_1 is undefined
                                params  :{start:0, limit:20},
                                scope   : this,
                                callback:  function innerCB(records, operation, success) {   
                    myGlobalScope.updateDetailGraphValue(arg1, this.MyDetailGraph, arg2); // use myGlobalScope instead of this
                        myGlobalScope.updateDetailSummaryPanelValue(this.MyDetailSummaryPanel, arg1, arg2, arg3); // use myGlobalScope instead of this
                }
                            });
                      }
                });

                this.MyDetailGrid = new Ext.grid.GridPanel({
                    store       : this.store_1,
                    bbar        : this.myPagingBBar,
                    plugins     : this.my_rowExpander,
                    columns     :[
                                    this.my_rowExpander,
                                    {header: 'header1'},
                                    {header: 'header2'},
                                    {header: 'header3'},
                                    {header: 'header4'}
                                 ]
                });

                argPanel.items.insert(0, this.MyDetailGraph);

                argPanel.items.insert(1, this.MyDetailSummaryPanel);

                argPanel.items.insert(2, this.MyDetailGrid);

                argPanel.doLayout();
            }
        });
    }
});

this.updateDetailGraphValue = function(argMainPanel, argGraph, argDataArray)
{
        this.graph = this.getDetailGraph(argDataArray);
        argMainPanel.remove(argGraph, true);
        argMainPanel.items.insert(0, this.graph);
        argMainPanel.doLayout();
};

this.updateDetailSummaryPanelValue = function(argPanel, arg1, arg2, arg3)
{
        argPanel.update(this.getDetailSummary_Template(arg1, arg2, arg3));
        argPanel.doLayout();
}; 
```~~

# regex - grep 选择包含某些单词的字符串

> ID：13469240
> 
> 赞同：1
> 
> 时间：2012-11-20T08:33:22.950
> 
> 标签：regex, grep

我有一个清单：

```
/device1/element1/CmdDiscovery
/device1/element1/CmdReaction
/device1/element1/Direction
/device1/element1/MS-E2E003-COM14/Field2
/device1/element1/MS-E2E003-COM14/Field3
/device1/element1/MS-E2E003-COM14/NRepeatLeft 
```

我怎样才能`grep`使返回的字符串仅包含`"Field" followed by digits`或仅包含`NRepeatLeft`在字符串的末尾*（在我的示例中，它将是最后三个字符串）*？

预期输出：

```
/device1/element1/MS-E2E003-COM14/Field2
/device1/element1/MS-E2E003-COM14/Field3
/device1/element1/MS-E2E003-COM14/NRepeatLeft 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:34:06.053

尝试这样做：

```
grep -E "(Field[0-9]*|NRepeatLeft$)" file.txt
      |  |           |           ||
      |  |          OR   end_line |
      | opening_choice   closing_choice
 extented_grep 
```

如果您没有`-E`开关（代表**ERE** : *Extented Regex Expression*）：

```
grep "\(Field[0-9]*\|NRepeatLeft$\)" file.txt 
```

**输出**

```
/device1/element1/MS-E2E003-COM14/Field2
/device1/element1/MS-E2E003-COM14/Field3
/device1/element1/MS-E2E003-COM14/NRepeatLeft 
```

这将`grep`用于匹配行`Field[0-9]`或最后匹配`RepeatLeft`的行。这是你所期望的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:09:15.290

我不太确定如何将 grep 用于您的目的。可能您希望 perl 用于此目的：

```
perl -lne 'if(/Field[\d]+/ or /NRepeatLeft/){print}' your_file 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T08:35:52.140

```
$ grep -E '(Field[0-9]*|NRepeatLeft)$' file.txt 
```

输出：

```
/device1/element1/MS-E2E003-COM14/Field2
/device1/element1/MS-E2E003-COM14/Field3
/device1/element1/MS-E2E003-COM14/NRepeatLeft 
```

解释：

```
Field       # Match the literal word
[0-9]*      # Followed by any number of digits
|           # Or
NRepeatLeft # Match the literal word
$           # Match the end of the string 
```

[您可以在此处](http://rubular.com/r/K0NgOJU2L5)查看这如何与您的示例一起使用。

# java - ActiveMQ 中 JMX 的默认端口是什么？

> ID：13469242
> 
> 赞同：5
> 
> 时间：2012-11-20T08:33:24.980
> 
> 标签：java, activemq, jmx

我正在使用 ActiveMQ 5.3.2 和 5.6.0。在 ActiveMQ 5.3.2 中，JMX 的默认设置是

```
SUNJMX="-Dcom.sun.management.jmxremote" 
```

在 ActiveMQ 5.6.0 中，JMX 的默认设置是

```
ACTIVEMQ_SUNJMX_START="$ACTIVEMQ_SUNJMX_START -Dcom.sun.management.jmxremote" 
```

因此，这些设置没有端口定义。你能告诉我 ActiveMQ 真的用这些设置启动 JMX 连接吗？如果是这样，默认连接的端口是什么，因为我无法连接到 1099。如果端口是随机选择的，如何找到 ActiveMQ 正在使用的端口？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T14:14:48.590

默认端口是 1099。这可以通过在 activeMQ 启动脚本（activemq.bat 或 .sh 文件）中将 jmx 参数作为参数传递给 activeMQ 来覆盖。使用属性

***Dcom.sun.management.jmxremote.port***用于设置 JMX 端口

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-25T17:07:51.543

如果您在 Spring Boot 中运行 ActiveMQ Broker，这是将 JMX 端口配置为值 11099 的简单方法：

```
 BrokerService broker = new BrokerService();

    broker.getManagementContext().setConnectorPort(11099);
    broker.getSystemUsage().getStoreUsage().setLimit(100_000_000L);
    broker.getSystemUsage().getTempUsage().setLimit(100_000_000L);

    TransportConnector connector = new TransportConnector();
    connector.setUri(new URI("tcp://localhost:61616?wireFormat.maxInactivityDuration=3000000&wireFormat.maxInactivityDurationInitalDelay=1000000"));

    broker.addConnector(connector);
    broker.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-07T18:00:46.077

默认情况下，它似乎没有绑定到“默认 activemq jmx 端口”，但是您可以修改 activemq 文件（或添加环境变量）。如果您不指定端口，JMX 不会通过[明确声明 one](https://stackoverflow.com/a/10368260/32453)来打开一个。

例如取消注释[此行](https://github.com/apache/activemq/blob/master/assembly/src/release/bin/env#L69)（或旧版本的 activemq 文件中的等效项）

```
 # ACTIVEMQ_SUNJMX_START="$ACTIVEMQ_SUNJMX_START -Dcom.sun.management.jmxremote.port=11099 " 
```

因此，我想您可以将其视为“取消注释其配置行的默认设置”。

此外，当您发出“停止”命令并且它没有通过（默认是我运行的 activemq 版本中的端口 11099）时，即使默认配置未在未修改配置的情况下侦听该端口，`--jmxurl`它也会默认尝试联系`service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi`第一的。诡异的。

# php - Math.random() 和 "hexChars" PHP 等价物

> ID：13469243
> 
> 赞同：-3
> 
> 时间：2012-11-20T08:33:27.710
> 
> 标签：php, javascript

我正在尝试将 JavaScript 转换为 php，但我不确定如何将JavaScript 函数下面`Math.random()`的`hexChars`方法转换为 PHP，感谢您的帮助

**JavaScript 函数：**

```
 function generateId(){
        var a=[],b;
        a[8]=a[13]=a[18]=a[23]="-";
        a[14]="4";

        for(i=0;i<36;i++)
        if(!a[i]){
            b=0|Math.random()*16;
            a[i]=hexChars[i==19?b&3|8:b]
        }
        return a.join("")       
    } 
```

**到目前为止我转换的**PHP 函数：****

 **```
function generateId(){
    $a = array();
    $a[8]=$a[13]=$a[18]=$a[23]="-";
    $a[14]="4";
    for($i=0;$i<36;$i++){
        if(!$a[$i]){
        // not sure what to do here 
        }
    }
} 
```

编辑：它将创建一个这样的字符串：902EA4DD-5445-4435-93F2-2A5203818255

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:42:12.217

### 我假设这`hexChars`是一个十六进制字符数组。

```
<?php
    function generateId(){
        $hexChars = array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'A', 'B', 'C', 'D', 'E', 'F');
        $a = array();
        $a[8] = $a[13] = $a[18] = $a[23] = "-";
        $a[14] = "4";
        for ($i=0; $i < 36; $i++)
            if (!isset($a[$i]))
                $a[$i] = $hexChars[mt_rand(0,15)];
        ksort($a);
        return implode($a);
    }
    echo generateId();
?> 
```

### 演示： http: [//phpfiddle.org/main/code/je3-6zc](http://phpfiddle.org/main/code/je3-6zc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:42:14.473

我会重做整个事情：

```
function generateId() {
    $id = md5(mt_rand());
    return substr($id, 0, 8) . '-' . substr($id, 9, 4) . '-' 
        . substr($id, 13, 4) . '-' . substr($id, 17, 4) . '-'
        . substr($id, 21, 4) . '-' . substr($id, 25);
} 
```

[如果您需要更多熵，您可以](http://codepad.org/G8kNedyf)使用用于`md5()`函数的数据，但这应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T08:44:02.663

```
b = 0|Math.random()*16; 
```

返回一个从 0 到 15 的随机整数。等效的 PHP 代码是

```
$b = rand(0,15); 
```

[http://php.net/manual/en/function.rand.php](http://php.net/manual/en/function.rand.php)

* * *

```
a[i]=hexChars[i==19?b&3|8:b] 
```

hexChars 是一个数组。在 PHP 中，您可以使用数组表示法来索引字符串中的字符：

```
$hexChars = "0123456789ABCDEF" 
```**

# android - 使用 Activity 启动服务

> ID：13469252
> 
> 赞同：0
> 
> 时间：2012-11-20T08:34:08.327
> 
> 标签：android, android-intent, android-activity, android-service

我想启动一个服务使用一个活动。具体来说就是IntentService。但是我有两个问题：

开始我的代码时

```
private void switchService(boolean isEnable, String serviceName){
        Intent intent = new Intent();
        intent.setClassName(TestPhoneServiceActivity.this, serviceName);
        if(isEnable){
            startService(intent);
        }
        else{
            if(isServiceRunning(serviceName)){
                stopService(intent);
                while(isServiceRunning(serviceName)){

                }
                Toast.makeText(this, "Service stopped Successfully!", Toast.LENGTH_LONG).show();
            } 
        }
    } 
```

DDMS 有错误：`Unable to start service Intent { cmp=com.xx.android/.AndroidPhoneService }: not found`

但路径是对的。那么问题出在哪里呢？而且我还想调用系统服务。我应该将它写入配置文件吗？

然后我使用intent.setClass 启动IntentService。

```
ActivityManager manager = (ActivityManager)getSystemService(ACTIVITY_SERVICE) 
```

我找不到这个服务对象。IntentService 是否自动完成并销毁？并且 IntentService 的生命周期与其他 Service 不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:40:06.230

您应该像这样传递服务的类而不是服务类的名称

```
 Intent intent = new Intent();
    intent.setClassName(TestPhoneServiceActivity.this, MyIntentService.class);
    if(isEnable){
        startService(intent);
    } 
```

如果您启动多个相同的 Intent 服务，则 Intent 服务会在工作完成后自行停止，它将在后面排队并按顺序执行，因此 else 块在您的情况下有点多余。

并确保您已在清单中声明了该服务。

# javascript - 通过jQuery改变HTML元素的顺序？

> ID：13469257
> 
> 赞同：2
> 
> 时间：2012-11-20T08:34:17.660
> 
> 标签：javascript, jquery

我很想改变 HTML 元素的顺序：

```
<div id="d1">
    <div id="dd1"></div>
    <table id="t1"></table>
    <div id="be_top"></div>    
</div> 
```

到：

```
<div id="d1">
    <div id="dd1"></div>
    <div id="be_top"></div>    
    <table id="t1"></table>
</div> 
```

有没有人知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T08:35:31.793

如果你参考 API 文档，你会发现这个[`insertBefore`](http://api.jquery.com/insertBefore/)函数：

```
$("#be_top").insertBefore("#t1"); 
```

[实例](http://jsbin.com/epalun/1)| [来源](http://jsbin.com/epalun/1/edit)

或者，当然，您也可以反过来[`insertAfter`](http://api.jquery.com/insertAfter/)：

```
$("#t1").insertAfter("#be_top"); 
```

[实例](http://jsbin.com/epalun/2)| [来源](http://jsbin.com/epalun/2/edit)

从头到尾花一个小时阅读 API 文档（实际上只需要这么长时间）是非常有益的，即使只是很短的时间也可以为您节省大量时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:35:43.493

```
// select thing you want to move #be_top -> insert it before #t1
$("#be_top").insertBefore("#t1") 
```

# file-upload - Box V2.0 API 文件上传未上传或返回错误

> ID：13469260
> 
> 赞同：0
> 
> 时间：2012-11-20T08:34:35.180
> 
> 标签：file-upload, box-api

我已经搜索并没有找到任何可以回答我遇到的问题的东西。如果我错过了这一点，我深表歉意。

使用 curl，我一直在尝试将一个小图像文件上传到现有的 Box 文件夹，但没有成功。它不会返回我可以调试的错误消息。我使用的 folder_id 是有效的，我可以使用相关的 API 调用列出它的内容。

下面是 POST 请求的详细结果。如果有人能阐明我哪里出错了，我将不胜感激

```
curl -k -v https://www.box.com/api/2.0/files/content/ -H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" -F filename="c:\alarms.gif" -F folder_id=FOLDER_ID

* About to connect() to www.box.com port 443 (#0)
*   Trying 74.112.184.70...
* connected
* Connected to www.box.com (74.112.184.70) port 443 (#0)
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using RC4-SHA
* Server certificate:
*        subject: serialNumber=ts5jamwzcjWP0oTyh2m74yh0zsB2zyOR; C=US; ST=California; L=Palo    Alto; O=Box.net, Inc.; CN=*.box.com
*        start date: 2011-09
*        expire date: 2013-09
*        subjectAltName: www.box.com matched
*        issuer: C=US; O
*        SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
> POST /api/2.0/files/content/ HTTP/1.1
> User-Agent: curl/7.28.0
> Host: www.box.com
> Accept: */*
> Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN
> Content-Length: 263
> Expect: 100-continue
> Content-Type: multipart/form-data; boundary=----------------------------704f2d9b4096
>
* Done waiting for 100-continue
< HTTP/1.1 100 Continue
< HTTP/1.1 200 OK
< Server: nginx
< Date: Tue, 20 Nov 2012 08:14:13 GMT
< Content-Type: application/json
< Connection: keep-alive
< Cache-control: private
< Content-Length: 30
<
{"total_count":0,"entries":[]}* Connection #0 to host www.box.com left intact
* Closing connection #0
* SSLv3, TLS alert, Client hello (1): 
```

源文件 c:\alarms.gif 是有效文件并且存在。这是从 Windows 主机运行的。

任何帮助或指导将不胜感激

Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T23:47:10.733

使用 cURL 上传本地文件时，需要`@`在文件路径前添加符号；这告诉 cURL 在该路径上传文件，而不是仅仅读取字符串。在您的情况下，您想要：

```
curl -k -v https://www.box.com/api/2.0/files/content/ -H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" -F filename=@"c:\alarms.gif" -F folder_id=FOLDER_ID 
```

# ios - 检索带有非英文字符的 URL

> ID：13469264
> 
> 赞同：1
> 
> 时间：2012-11-20T08:34:47.970
> 
> 标签：ios, utf-8, nsstring, nsurl, url-scheme

我想从 SMS（url 方案）打开应用程序。例如，如果有人给我发短信“myapp://abcd”，我可以用 safari 打开这个 url 并通过 [url host] 打开带有 abcd 值的应用程序。但是，问题是如果它不是英语？例如“myapp://สวัสดี”（泰语）或“myapp://おはよう”（日语），我用 xn--l3c1bib8a0a 打开应用程序，而不是“สวัสดี”。

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Test" 
                                                    message:[url host] 
                                                   delegate:self 
                                          cancelButtonTitle:@"OK" 
                                          otherButtonTitles:nil];
    [alert show];
    [alert release];
    return YES;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:37:50.577

SMS 字符集是 7 位的，有点特殊，所以看起来您的服务提供商正在将国际 url 翻译成他们的 punycode ( [http://en.wikipedia.org/wiki/Punycode](http://en.wikipedia.org/wiki/Punycode) ) 等效...

# iphone - 不要使用核心图在条形图中显示轴线

> ID：13469267
> 
> 赞同：0
> 
> 时间：2012-11-20T08:35:03.767
> 
> 标签：iphone, core-plot, bar-chart

我不想在条形图视图中显示轴线。我只想显示条形图如何删除该轴线？

那就是每当我运行应用程序时，它会显示 XY 轴，但我可以删除的地方不会显示该轴线。我无法添加图像，所以我在这里添加了代码

在这里查看我的代码：

```
 - (void)generateData
  {
  NSMutableDictionary *dataTemp = [[NSMutableDictionary alloc] init];

   //Array containing all the dates that will be displayed on the X axis
   dates = [NSArray arrayWithObjects:@"A", @"B", @"C", 
         @"D", @"E", nil];

//Dictionary containing the name of the two sets and their associated color
//used for the demo
sets = [NSDictionary dictionaryWithObjectsAndKeys:[UIColor redColor], @"Plot 1", nil];

//Generate random data for each set of data that will be displayed for each day
//Numbers between 1 and 10
for (NSString *date in dates) {
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    for (NSString *set in sets) {

        NSNumber *num = [NSNumber numberWithInt:arc4random_uniform(8)+1];

        [dict setObject:num forKey:set];
    }
    [dataTemp setObject:dict forKey:date];
}

data = [dataTemp copy];

NSLog(@"%@", data);
 }
- (void)generateLayout
{
//Create graph from theme
graph                               = [[CPTXYGraph alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];
self.hostedGraph                    = graph;
/*graph.paddingLeft                   = 25.0;
graph.paddingTop                    = 10.0;
graph.paddingRight                  = 10.0;
graph.paddingBottom                 = 50.0;
*/

//Add plot space
CPTXYPlotSpace *plotSpace       = (CPTXYPlotSpace *)graph.defaultPlotSpace;
plotSpace.delegate              = self;
plotSpace.yRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0) 
                                                               length:CPTDecimalFromFloat(10.0f)];
plotSpace.xRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(-1.0f) 
                                                               length:CPTDecimalFromFloat(8.0f)];

//Create a bar line style
CPTMutableLineStyle *barLineStyle   = [[CPTMutableLineStyle alloc] init];
barLineStyle.lineWidth              = 1.0;
barLineStyle.lineColor              = [CPTColor whiteColor];
CPTMutableTextStyle *whiteTextStyle = [CPTMutableTextStyle textStyle];
whiteTextStyle.color                = [CPTColor whiteColor];

 //Plot
 BOOL firstPlot = YES;

for (NSString *set in [[sets allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]) {

    CPTBarPlot *plot        = [CPTBarPlot tubularBarPlotWithColor:[CPTColor blueColor] horizontalBars:NO];
   plot.lineStyle          = barLineStyle;
    CGColorRef color        = ((UIColor *)[sets objectForKey:set]).CGColor;
    plot.fill               = [CPTFill fillWithColor:[CPTColor colorWithCGColor:color]];
    if (firstPlot) {
        plot.barBasesVary   = NO;
        firstPlot           = NO;
    } else {
        plot.barBasesVary   = YES;
    }
    plot.barWidth           = CPTDecimalFromFloat(0.5f);
    plot.barOffset=CPTDecimalFromFloat(0.5f);
    plot.barsAreHorizontal  = NO;
    plot.dataSource         = self;
    plot.identifier         = set;
    [graph addPlot:plot toPlotSpace:plotSpace];

    [plotSpace scaleToFitPlots:[graph allPlots]];
}

//Add legend
CPTLegend *theLegend      = [CPTLegend legendWithGraph:graph];
theLegend.numberOfRows    = sets.count;
theLegend.fill            = [CPTFill fillWithColor:[CPTColor colorWithGenericGray:0.15]];
theLegend.borderLineStyle = barLineStyle;
theLegend.cornerRadius    = 10.0;
theLegend.swatchSize      = CGSizeMake(15.0, 15.0);
whiteTextStyle.fontSize   = 13.0;
theLegend.textStyle       = whiteTextStyle;
theLegend.rowMargin       = 5.0;
theLegend.paddingLeft     = 10.0;
theLegend.paddingTop      = 10.0;
theLegend.paddingRight    = 10.0;
theLegend.paddingBottom   = 10.0;
graph.legend              = theLegend;
graph.legendAnchor        = CPTRectAnchorTopLeft;
graph.legendDisplacement  = CGPointMake(80.0, -10.0);

}

 - (void)createGraph
{
//Generate data
[self generateData];

//Generate layout
[self generateLayout];
}

   #pragma mark - CPTPlotDataSource methods

  - (NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
return dates.count;
}

   - (double)doubleForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:  (NSUInteger)index
{

 double num = NAN;

//X Value
if (fieldEnum == 0) {
    num = index;
}

else {
    double offset =0;

    if (((CPTBarPlot *)plot).barBasesVary) {

        for (NSString *set in [[sets allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]) {

            if ([plot.identifier isEqual:set]) {

                break;
            }
            offset += [[[data objectForKey:[dates objectAtIndex:index]]  objectForKey:set] doubleValue];
        }
    }

    //Y Value
    if (fieldEnum == 1) {
        num = [[[data objectForKey:[dates objectAtIndex:index]]     objectForKey:plot.identifier] doubleValue] + offset;
    }

    //Offset for stacked bar
    else {
        num = offset;
    }
}

//NSLog(@"%@ - %d - %d - %f", plot.identifier, index, fieldEnum, num);

return num;
  }

  @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:48:08.763

使用`[CPTLineStyle lineStyle]`会给出一条细黑线。您还可以创建`CPTMutableLineStyle`和修改样式属性，包括颜色、宽度、线连接和虚线图案以自定义外观

也试试这条波纹管

将`minorTickLineStyle`属性设置为`nil`

有关更多详细信息，请参阅此链接

[高级设计概述](http://code.google.com/p/core-plot/wiki/HighLevelDesignOverview)

对于`CPTLineStyle`，您可以从此链接获取信息..

[CPTLineStyle](http://code.google.com/p/core-plot/source/browse/framework/Source/CPTLineStyle.m)

# json - 使用 Restkit 和错误映射 JSON 数组：没有从“__NSArrayI”转换为“NSString”的策略

> ID：13469273
> 
> 赞同：3
> 
> 时间：2012-11-20T08:35:30.270
> 
> 标签：json, mapping, restkit

我在使用 RestKit 映射 JSON 数组时遇到了一些麻烦。

这是 JSON 文件：

```
 "result": {"cities": [
                {"city": {"id": 2, "name": "Madrid"}, 
                 "cityImages": [{"image": {"url": "", 
                                           "image": "", 
                                           "blob": "", 
                                           "title":"Madrid"}
                                }]
                  }, 

                  {"city": {"id": 11001, "name": "Seville"}, 
                   "cityImages": [{"image": {"url": "", 
                                             "image": "", 
                                              "blob": "", 
                                              "title": "Seville Foto"}}, 
                                  {"image": {"url": "", 
                                             "image": "", 
                                             "blob": "", 
                                             "title": "Otra"}
                                   }]
                    }]
            } 
```

问题出在 CityImage 数组中。这是我的班级 CityImage

```
@interface CityImage : NSObject 
@property (nonatomic, strong) NSString *imageURL;
@property (nonatomic, strong) NSString *image; 
@property (nonatomic, strong) NSString *imageBase64; 
@property (nonatomic, strong) NSString *title; 
@end 
```

这是City类（包含一个CityImages数组）

```
@interface City : NSObject
@property (nonatomic, strong) NSString *cityid;
@property (nonatomic, strong) NSString *name;
@property (nonatomic, strong) NSArray *cityImages; 
```

现在，这是我对 cityImages 的映射：

```
RKObjectMapping* cityImageMapping = [RKObjectMapping mappingForClass:[CityImage class] ];
[cityImageMapping mapKeyPath:@"image.url" toAttribute:@"imageURL"];
[cityImageMapping mapKeyPath:@"image.image" toAttribute:@"image"];
[cityImageMapping mapKeyPath:@"image.blob" toAttribute:@"imageBase64"];
[objectManager.mappingProvider setMapping:cityImageMapping forKeyPath:@"result.cities.cityImages"]; 
```

对于城市：

```
RKObjectMapping *cityMapping = [RKObjectMapping mappingForClass:[City class]];
[cityMapping mapKeyPathsToAttributes:@"city.id", @"cityid", @"city.name", @"name", nil];
[cityMapping mapKeyPath:@"cityImages.image" toAttribute:@"cityImages"];
[objectManager.mappingProvider setMapping:cityMapping forKeyPath:@"result.cities"]; 
```

当 JSON 被解析时，它给了我这个错误：

```
W restkit.object_mapping:RKObjectMappingOperation.m:244 Failed transformation of value at keyPath 'image.url'. No strategy for transforming from '__NSArrayI' to 'NSString'
W restkit.object_mapping:RKObjectMappingOperation.m:244 Failed transformation of value at keyPath 'image.blob'. No strategy for transforming from '__NSArrayI' to 'NSString'
W restkit.object_mapping:RKObjectMappingOperation.m:244 Failed transformation of value at keyPath 'image.url'. No strategy for transforming from '__NSArrayI' to 'NSString'
W restkit.object_mapping:RKObjectMappingOperation.m:244 Failed transformation of value at keyPath 'image.blob'. No strategy for transforming from '__NSArrayI' to 'NSString' 
```

我想我忘记了一些东西，但是尽管我已经尝试了几乎所有我发现的东西，但问题仍然存在。任何想法？。谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:56:08.470

尝试将此设置为 cityImageMapping:`cityImageMapping.rootKeyPath = @"image"`并将您的属性映射为`url`而不是`image.url`

另外，我相信您想要整个图像数组而不是一个图像，因此将 cityImages 数组映射如下： `[cityMapping mapKeyPath:@"cityImages" toAttribute:@"cityImages"];`

# asp.net-mvc-3 - 从实体框架或 SQL 查询填充 JQuery Accordion

> ID：13469275
> 
> 赞同：0
> 
> 时间：2012-11-20T08:35:32.030
> 
> 标签：asp.net-mvc-3, entity-framework, jquery-ui, jquery-ui-accordion

我是 JQuery 的新手，我想知道是否有可能从实体框架（最好）或 SQL 查询中填充 JQuery Accordion。结果集将用于过滤出 XML 文件中列出的哪些项目将为登录用户显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:50:01.130

你不能直接这样做。您将需要构建一个控制器操作，该操作将从实体框架中检索过滤后的项目。然后，您可以在将手风琴标记呈现并初始化为 jquery UI 手风琴的视图中返回它们。

例如，您可以编写一个控制器操作，根据登录用户的名称过滤页面列表：

```
 public ActionResult Index()
    {
        //retrieve the pages filtered by user
        string userName = HttpContext.Current.User.Identity.Name;
        IEnumerable<Page> pages = _pageService.FindByUserName(userName);

        if(Request.IsAjaxRequest())
            return PartialView(pages);
        else
            return View(pages);
    } 
```

然后将从控制器返回的视图将以 jquery ui 手风琴所需的结构呈现过滤后的项目。它还将包含一段用于初始化手风琴的 javascript 代码（假设您已经在全局布局中引用了 jquery 和 jqueryUI 脚本）：

```
@model IEnumerable<Page>

<div id="accordion">
@foreach (var page in Model.Pages)
{
    <h3>@page.Name</h3>
    <div>
        <p>
            Enter any accordion content here
        </p>
    </div>
}
</div>

<script type="text/javascript">
    $(function () {
        $("#accordion").accordion();
    });
</script> 
```

如果您想使用 jquery 从视图手动执行 AJAX 请求，另一种选择是将控制器的结果作为 JSON 返回。然后，您将处理返回的 JSON 数据，以便将手风琴的 HTML 添加到 DOM，最后您将其初始化为 jquery 手风琴。

控制器看起来像：

```
 public ActionResult Index()
    {
        //retrieve the pages filtered by user
        string userName = HttpContext.Current.User.Identity.Name;
        IEnumerable<Page> pages = _pageService.FindByUserName(userName);

        return Json(pages, JsonRequestBehavior.AllowGet);
    } 
```

视图将与此类似：

```
<div id="accordion">
</div>

<script type="text/javascript">
    $(function () {
        $.ajax({
           url: '@Url.Action("YourController", "Index")',
           dataType: 'json', 
           success: function(data) {
               var accordionDiv = $("#accordion");
               accordionDiv .empty();
               $.each(data, function(k, v){
                   accordionDiv .append('<h3>' +
                             v.Name + 
                          '</h3>' +
                          '<div><p>' +
                              'Accordion content goes here' +
                          '</p></div>'
                        );
               });                                         
               accordionDiv.accordion(); 
           }              
        });
    });
</script> 
```

# c++ - 使用 procf/ 了解进程状态 /地位

> ID：13469276
> 
> 赞同：1
> 
> 时间：2012-11-20T08:35:32.510
> 
> 标签：c++, c, solaris, procfs

我正在开发 Solaris。

我知道，如果有一个进程正在运行，就会有一个名为 的文件`/proc/<PID>/status`，其中`<PID>`是进程 ID，并且它包含一个名为`state`.

例如，我使用了我的 shell 进程：

```
> ps
   PID TTY         TIME CMD
 18671             0:01 tcsh 
```

其进程 ID 为 18671。

我编写了一个简单的 C 程序来提取该信息：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/procfs.h>
#include <sys/fcntl.h>

static void get_status (pid_t pid)
{
  char procpath[100];
  char buf[100];
  int pfd;
  char State[100];
  char Name[100];
  prstatus_t * pms;
  FILE *proc;

    sprintf(procpath, "/proc/%d/status", pid);

    proc = fopen(procpath,"r");
    if (proc) {
        printf("Open Successful\n");
        fgets(buf,256,proc); sscanf(buf,"Name:\t%s",Name);
        fgets(buf,256,proc); sscanf(buf,"State:\t%c",State);
       }
    printf("%s",Name);
    printf("%s",State);
}

int main(int argc, char **argv)
{
    get_status(18671);

} 
```

它不会产生任何输出：

```
> ./a.out
Open Successful
> 
```

procfs 的在线资料说我们可以简单地做一个 cat on`proc/<pid>/status`并检查进程的状态。

**但就我而言，它是一个二进制文件**。我从来没有在任何地方看到它是二进制的。

有没有办法可以使用简单的 C 程序来获取当前进程的状态？

C++ 解决方案也是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:40:26.703

`pid`这是您应该从 /proc/ /status中读取的结构：

```
typedef struct pstatus {
        int     pr_flags;       /* flags (see below) */
        int     pr_nlwp;        /* number of active lwps in the process */
        pid_t   pr_pid;         /* process id */
        pid_t   pr_ppid;        /* parent process id */
        pid_t   pr_pgid;        /* process group id */
        pid_t   pr_sid;         /* session id */
        id_t    pr_aslwpid;     /* historical; now always zero */
        id_t    pr_agentid;     /* lwp id of the /proc agent lwp, if any */
        sigset_t pr_sigpend;    /* set of process pending signals */
        uintptr_t pr_brkbase;   /* address of the process heap */
        size_t  pr_brksize;     /* size of the process heap, in bytes */
        uintptr_t pr_stkbase;   /* address of the process stack */
        size_t  pr_stksize;     /* size of the process stack, in bytes */
        timestruc_t pr_utime;   /* process user cpu time */
        timestruc_t pr_stime;   /* process system cpu time */
        timestruc_t pr_cutime;  /* sum of children's user times */
        timestruc_t pr_cstime;  /* sum of children's system times */
        sigset_t pr_sigtrace;   /* set of traced signals */
        fltset_t pr_flttrace;   /* set of traced faults */
        sysset_t pr_sysentry;   /* set of system calls traced on entry */
        sysset_t pr_sysexit;    /* set of system calls traced on exit */
        char    pr_dmodel;      /* data model of the process (see below) */
        char    pr_pad[3];
        taskid_t pr_taskid;     /* task id */
        projid_t pr_projid;     /* project id */
        int     pr_nzomb;       /* number of zombie lwps in the process */
        zoneid_t pr_zoneid;     /* zone id */
        int     pr_filler[15];  /* reserved for future use */
        lwpstatus_t pr_lwp;     /* status of the representative lwp */
} pstatus_t; 
```

请注意，它在头文件 procfs.h 中定义。声明一个`pstatus_t`变量并将`sizeof(pstatus_t)`字节读入该变量。

提示：也不能通过`ls`，您也可以使用`/proc/self/psinfo`读取自身进程的 psinfo。

# python - 我如何使用 scrappy python 登录到 Ajax 表单

> ID：13469282
> 
> 赞同：0
> 
> 时间：2012-11-20T08:35:57.773
> 
> 标签：python, scrapy

我可以登录到我获得登录 URL 的网站，例如

`www.abc.com/login.html`

现在在所有现代网站中都没有像 login.html 这样的页面，但是当我点击 login 时，会出现一个带有登录表单的弹出窗口。

我不知道如何使用 scrappy 登录该表单

# c - 矩阵-矩阵乘法

> ID：13469287
> 
> 赞同：1
> 
> 时间：2012-11-20T08:36:32.587
> 
> 标签：c

我正在编写一个包含矩阵乘法的 C 代码，并且我正在为该操作使用 3 个嵌套循环。那么，有谁知道我们如何通过删除其中一个嵌套循环来改进该代码？

```
for (i = 0; i < SIZE; ++i)
    for (j = 0; j < SIZE; ++j)
        for (k = 0; k < SIZE; ++k)
            c[i][j] += a[i][k] * b[k][j]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:38:50.333

稠密矩阵的矩阵乘法有 O(n^3)。这可以通过使用[Strassen 算法](http://en.wikipedia.org/wiki/Strassen_algorithm)到 O(n^(2.8)) 或[使用 Coppersmith-Winogar](http://en.wikipedia.org/wiki/Coppersmith%E2%80%93Winograd_algorithm)到 O(n^(2.37)) 来加速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:41:38.867

Strassen algorithm is a classic one to try.

[http://en.wikipedia.org/wiki/Strassen_algorithm](http://en.wikipedia.org/wiki/Strassen_algorithm)

It is more complicated than writing three loops and the overall speed gain might not show through if the matrix size is small.

As far as I know, Mathematica and Matlab use the three nested loop multiplication for small matrices and switch to Strassen for larger ones.

There are other algorithms that theoretically perform better asymptotically, but unless you are doing very very large matrix multiplication, I don't think it will help that much.

# ruby-on-rails - 清单 3.9 的 Michael Hartl rails 教程不加载

> ID：13469290
> 
> 赞同：1
> 
> 时间：2012-11-20T08:36:36.110
> 
> 标签：ruby-on-rails, railstutorial.org

# 我的问题/问题

我无法在清单[3.9](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#code-home_page_content_spec)中运行非常基本的 rspec 测试，我觉得我缺少一些非常基本的东西，导致 static_pages_spec 返回 LoadError。有谁知道出了什么问题？

# 错误

> E:\CSProj\RailsTutorial\sample_app>bundle exec rspec spec/request/static_pages_s pec.rb C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib /rspec /core/configuration.rb:780:in `load': cannot load such file -- E:/CSProj/RailsTu torial/sample_app/spec/request/static_pages_spec.rb (LoadError) from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1 1.1/lib/rspec/core/configuration.rb:780:in`block in load_spec_files' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1 1.1/lib/rspec/core /configuration.rb:780:in `map' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1 1.1/lib/rspec/core/configuration.rb:780:in`load_spec_files' 来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1 1.1/lib/rspec/core/command_line.rb:22 :in `run' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1 1.1/lib/rspec/core/runner.rb:69:in`run' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1 1.1/lib/rspec/core/runner.rb:8:in `block in autorun '

# 编码

我正在使用以下代码：[https ://github.com/adoliver/sample_app/blob/static-pages/spec/requests/static_pages_spec.rb](https://github.com/adoliver/sample_app/blob/static-pages/spec/requests/static_pages_spec.rb)

```
require 'spec_helper'

describe "Static pages" do

  describe "Home page" do

    it "should have the content 'Sample App'" do
      visit '/static_pages/home'
      page.should have_content('Sample App')
    end
  end
end 
```

# 关于我的开发环境的一些信息

Windows 7 使用 railsInstaller 使用 windows 本机命令行 本教程中的前面步骤有效。

E:\CSProj\RailsTutorial\sample_app>ruby -v ruby​​ 1.9.3p125 (2012-02-16) [i386-mingw32]

E:\CSProj\RailsTutorial\sample_app>rails -v Rails 3.2.9

## 我的捆绑包：

E:\CSProj\RailsTutorial\sample_app>bundle list 包中包含的 Gems：

*   actionmailer (3.2.9)
*   动作包 (3.2.9)
*   活动模型（3.2.9）
*   活动记录（3.2.9）
*   活动资​​源（3.2.9）
*   积极支持 (3.2.9)
*   雷尔 (3.0.2)
*   建设者（3.0.4）
*   捆绑器 (1.0.22)
*   水豚 (1.1.2)
*   子进程（0.3.6）
*   咖啡轨 (3.2.2)
*   咖啡脚本（2.2.0）
*   咖啡脚本源 (1.4.0)
*   diff-lcs (1.1.3)
*   厄鲁比斯 (2.7.0)
*   执行js (1.4.0)
*   菲（1.2.0）
*   远足 (1.2.1)
*   i18n (0.6.1)
*   旅程 (1.0.4)
*   jquery-rails (2.0.2)
*   json (1.7.5)
*   libwebsocket (0.1.6.1)
*   邮件 (2.4.4)
*   哑剧类型 (1.19)
*   multi_json (1.3.7)
*   nokogiri (1.5.5)
*   多语言（0.3.3）
*   机架 (1.4.1)
*   机架缓存 (1.2)
*   机架 SSL (1.3.2)
*   机架测试（0.6.2）
*   导轨 (3.2.9)
*   铁路（3.2.9）
*   耙子 (10.0.2)
*   rdoc (3.12)
*   rspec (2.11.0)
*   rspec 核心 (2.11.1)
*   rspec-expectations (2.11.3)
*   rspec 模拟 (2.11.3)
*   rspec-rails (2.11.0)
*   rubyzip (0.9.9)
*   萨斯（3.2.3）
*   sass-rails (3.2.5)
*   硒网络驱动程序（2.26.0）
*   链轮 (2.2.1)
*   sqlite3 (1.3.5)
*   雷神 (0.16.0)
*   倾斜 (1.3.3)
*   树顶 (1.4.12)
*   tzinfo (0.3.35)
*   丑化者 (1.2.3)
*   网络套接字（1.0.3）
*   xpath (0.1.4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:16:37.530

您报告：

```
load': cannot load such file -- E:/CSProj/RailsTu torial/sample_app/spec/request/static_pages_spec.rb (LoadError) 
```

我不知道这是否愚蠢，但我的目录树中的规范在`/app/spec/requests`，而不是`app/spec/request`.

# c# - 如何使用派生类中的值填充文本框？C＃

> ID：13469293
> 
> 赞同：2
> 
> 时间：2012-11-20T08:36:56.587
> 
> 标签：c#

在我的表格中，我有以下...

```
if (productNo == this.product1.ProductNumber)  //ProductNumber comes from Product class
                {
                    //if so, set the other values of the text boxes to that of the 
                    //product in memory
                    tbDescription.Text = product1.ProductDescription; //Works - from Product class
                    tbOnHand.Text = product1.NumberOnHand.ToString(); //Works - from Product class
                    tbUnitOfMeasure.Text = product1.UnitOfMeasure;    //Works - from Product class

                    tbVendorID.Text = product1.VendorID; // Doesn't work - from derived ManufacturedProduct class 
                } 
```

其中 VendorID 来自 ManufacturedProduct 类，该类是来自 Product 的派生类。最后一行代码是行不通的。我希望能够使用 product1.VendorID 中的值填充 tbVendorID（顺便说一下，它是一个 int）

我收到以下错误...Objects.Product 不包含“VendorID”的定义，并且找不到接受“Objects.Product”类型的第一个参数的扩展方法“VendorID”（您是否缺少 using 指令或装配参考？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:40:59.990

`ManufacturedProduct`如果要访问子类的属性，则需要将其转换为：

```
ManufacturedProduct mfgProduct = (ManufacturedProduct) product1;
if (productNo == mfgProduct.ProductNumber)  
{
    tbDescription.Text = mfgProduct.ProductDescription;  
    tbOnHand.Text = mfgProduct.NumberOnHand.ToString();  
    tbUnitOfMeasure.Text = mfgProduct.UnitOfMeasure;    
    tbVendorID.Text = mfgProduct.VendorID;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:57:14.367

您可以执行以下操作：

```
if (productNo == this.product1.ProductNumber)  //ProductNumber comes from Product class
{
        tbDescription.Text = product1.ProductDescription; 
        tbOnHand.Text = product1.NumberOnHand.ToString(); 
        tbUnitOfMeasure.Text = product1.UnitOfMeasure;    
        if(priduct1 is ManufacturedProduct)
               tbVendorID.Text = ((ManufacturedProduct)product1).VendorID.ToString(); 
} 
```

# jquery-mobile - android 设备上 phonegap + jquery mobile 上的 touchstart

> ID：13469294
> 
> 赞同：0
> 
> 时间：2012-11-20T08:37:01.353
> 
> 标签：jquery-mobile

我有这个

```
<a href="A.html" data-ajax="false" class="btn">A</a>

<a href="B.html" data-ajax="false">B</a>

<script>
$('a, button').bind('touchstart', function(e) {
    $(this).trigger('click');
    e.preventDefault();
});
</script> 
```

该代码在 phonegap + jquery mobile 上编译并在 Nexus S 上进行测试。

我的问题是当我同时接触 A 和 BI 时没有看到性能提升，这是怎么回事？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:32:12.363

彼得这段代码不会给你速度提升。

您不需要在标签上绑定 touchstart。可以在按钮上使用它。用 touchstart 事件触发元素的点击是没有意义的，touchstart 是用于替换移动设备上的点击事件的事件。但是在 android 用户点击事件的情况下可以获得更好的性能。Touchstart 用于在 iPhone/iPad 设备上执行的 JQM。

这是我用来确定点击事件类型的代码：

```
var userAgent = navigator.userAgent;
touchEvent = (userAgent.match(/iPad|iPhone/i)) ? "touchstart" : "tap"; 
```

无论您选择什么事件，您都将在移动设备上拥有 300 毫秒延迟。一些插件声称他们可以解决这个问题，但我从来没有找到成功的。

我希望这可以帮助你。

# ubuntu - 在amazon ec2的ubuntu ami上配置ejabberd

> ID：13469299
> 
> 赞同：0
> 
> 时间：2012-11-20T08:37:47.003
> 
> 标签：ubuntu, amazon-ec2, xmpp, ejabberd

这是我第一次使用`ejabberd`. 如果我错过了什么，请饶了我。

我已经安装了`ejabberd`服务器`ubuntu 12.04 AMI on Amazon EC2`。

我已经成功安装了服务器，在配置文件中添加了管理员用户和主机并打开了所需的端口`5222, 5223, 5269, 5280`。

现在我尝试使用管理员用户 ID 和密码登录 Web 管理界面。我可以登录，但我只能看到一个部分，即虚拟主机。左侧没有控制列表、访问规则、节点和统计菜单项。此外，当我单击虚拟主机菜单项时，出现的页面不显示任何内容。

这是屏幕截图的链接

[https://www.dropbox.com/s/gtbq8c1863yni1x/1.png](https://www.dropbox.com/s/gtbq8c1863yni1x/1.png)

[https://www.dropbox.com/s/gyt8b24hvfieegn/2.png](https://www.dropbox.com/s/gyt8b24hvfieegn/2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:05:45.953

检查您的配置并确保您已设置管理员 acl 即`{acl, admin, {user, "admin", "localhost"}}.`并以管理员用户身份登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:46:17.573

我不确定是什么问题。我可以在本地机器上成功安装相同版本的 Ejabberd。

然后意识到这可能是 EC2 实例的问题。因此，在新的 EC2 实例上进行了全新安装，而不是 Ubuntu，而是 Amazon Linux。

安装完美。

# php - php mail() 不发送样式

> ID：13469300
> 
> 赞同：0
> 
> 时间：2012-11-20T08:37:46.863
> 
> 标签：php, css, email, styles

我正在尝试通过 PHP mail() 函数将样式信息与电子邮件一起发送。不幸的是，即使我的邮件客户端设置为接受样式化的电子邮件，它仍然只是呈现为纯 html 文本。

```
$to = $email;
    $subject = "Subject Details";
    $message='<html><body><table width="600" height="840" border="0" cellpadding="5" cellspacing="5">';
    $message.='<tr><td height="110"><img src="https://user.co.uk/images/logo.jpg" alt="SignDox" width="300" height="100" /></td></tr>';
    $message.='<tr><td height="29" bgcolor="#5C1561">&nbsp;</td></tr>';
    $message.='<tr><td height="537" valign="top">';
    $message.="Message Goes Here\n\n";
    $message.="Username: ".$new_agent_id."\n";
    $message.="Password: ".$pass1."\n\n";
    $message.="To sign in to your user panel follow this link: \n";
    $message.="Inside your admin section you will be able to change your username and password.\n";
    $message.='</td></tr>';
    $message.='<tr><td height="140" bgcolor="#5C1561">&nbsp;</td></tr></table></body></html>';
    $from = "no-reply@sender.co.uk";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:39:38.880

要发送 HTML 邮件，必须设置 Content-type 标头

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

**笔记：**

1) 如果打算发送 HTML 或其他复杂邮件，建议使用 PEAR 包 » PEAR::Mail_Mime。

2) 值得注意的是，mail() 函数不适合循环处理大量电子邮件。此函数为每封电子邮件打开和关闭一个 SMTP 套接字，效率不高。

请阅读更多：[PHP手册](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:40:17.307

根据需要设置内容类型和字符集。您还应该使用`\r\n`.

```
$headers = "From:" . $from . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T08:44:20.943

尝试类似的东西

```
<?php
$headers   = array();
$headers[] = "MIME-Version: 1.0";
$headers[] = "Content-type: text/plain; charset=iso-8859-1";
$headers[] = "From:" . $from;
/*
$headers[] = "Bcc: JJ Chong <bcc@domain2.com>";
$headers[] = "Subject: {$subject}";  */ optional

mail($to, $subject, $message, implode("\r\n", $headers)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T08:44:37.403

您需要定义正确的标题才能发送 HTML 格式的电子邮件。这可以非常简单地使用：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

但是，我会敦促您使用`PHPMailer`该类。此类将处理所有标题和您可能需要的任何其他内容。您可以轻松添加附件、嵌入图像、通过 SMTP 发送等...

这是一门很棒的课程，更不用说您将学习对象和类的数量，特别是如果您是 PHP 新手 :-)

[有关PHPMailer 类](http://phpmailer.worxware.com/)，请参见此处

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T08:48:25.333

```
function send_mail($from,$fromName,$to,$object,$bodyText,$bodyHtml){
    $site = "mywebsite.ca";
    $from = $fromName." <".$from.">";
    $limite = "_----------=_parties_".md5(uniqid (rand()));

    $header  = "Reply-to: ".$from."\n";
    $header .= "From: ".$from."\n";
    $header .= "X-Sender: <".$site.">\n";
    $header .= "X-Mailer: PHP\n";
    $header .= "X-auth-smtp-user: ".$from." \n";    
    $header .= "X-abuse-contact: ".$from." \n"; 
    $header .= "Date: ".date("D, j M Y G:i:s O")."\n";
    $header .= "MIME-Version: 1.0\n";
    $header .= "Content-Type: multipart/alternative; boundary=\"".$limite."\"";

    $message = "";
    $message .= "--".$limite."\n";
    $message .= "Content-Type: text/plain\n";
    $message .= "charset=\"iso-8859-1\"\n";
    $message .= "Content-Transfer-Encoding: 8bit\n\n";
    $message .= $bodyText;

    $message .= "\n\n--".$limite."\n";
    $message .= "Content-Type: text/html; ";
    $message .= "charset=\"iso-8859-1\"; ";
    $message .= "Content-Transfer-Encoding: 8bit;\n\n";
    $message .= $bodyHtml;

    $message .= "\n--".$limite."--";
    if(mail($to,$object,$message,$header)){
      //echo all
    }
    else{
      //echo mssage not submit
    }
} 
```

希望这个功能可以帮到你。尝试将此函数用作您的发送邮件，然后在底部尝试编写条件以查看您的邮件是否已提交。您只需要在其中输入即可

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T09:09:15.470

```
//your header should be like this
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

# javascript - 在 HTML / Javascript 中运行表单

> ID：13469304
> 
> 赞同：-1
> 
> 时间：2012-11-20T08:37:55.723
> 
> 标签：javascript, html

我有一个关于基于当前输入生成表单的查询，例如在应用程序中，文本输入会根据我们的选择出现。

我正在尝试使用 JavaScript 使其工作，但我的代码没有做任何事情：

```
 <html>
                       <head>
                      <script>
                           function addInput() {
                                          if (fields != 10) {
                          document.getElementById('d_div').innerHTML += "<input type='text' value='' /><br />";
                                            fields += 1;
                                           } else {
                                            document.getElementById('d_div').innerHTML += "<br />Only 10 upload fields allowed.";
                                            document.form.add.disabled=true;
                                            }}
                     </script>
                </head>
                        <body>
                             <div align = "center">
                             <form method = "post" action = "<?php echo $_SERVER['PHP_SELF']; ?>">
                             Select a Template<br />
                             <select name = "template" id = "rawquery">
                             <option>Select</option>
                             <option value = "Alpha query">Alpha</option>
                             <option value = "Betaquery">Beta</option>
                             <option value = "Gamma query">Gamma</option>
                             <option value = "Epsilon query">Epsilon</option>
                             </select>
                             <br/> 
                           <input type = "submit" name = "submit"><br /><br />
                       </form>
                    </div>
                              <textarea name = "raw" rows = "10" cols = "50" id = "Raw">raw template</textarea>
                              <br /><br />
                        <form id="d_form">
                       <input type="submit" onclick="addInput()" name="newform" value="Click to enter values">
                       </form>
                         <div id="d_div">  </div>
                         </div> 
                         <br> <br> <br> <br> 
                                 </body>
                                 </html> 
```

此处不使用代码制作下拉菜单。

当我单击按钮输入值时，它不会给我一个新的文本区域；你能帮忙吗，我对这个和学习很陌生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:09:46.070

*   “字段”初始化在哪里？
*   不要忘记返回false，如果真的不需要提交表单#d_form点击按钮#newform

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:13:05.733

你的标签有很多问题。首先把那些做对。我举了一个创建动态标签的例子。我认为你可以使用 it.copy 看看它是如何工作的

```
 <script type="text/javascript">
fields=0;

    function addInput() {
        textvalue=document.getElementById("raw").value;
        var opt = document.createElement("option");

        if (fields != 10) {
            opt.text=textvalue;
            document.getElementById('rawquery').options.add(opt);
            fields += 1;
        } else {
            document.getElementById('d_div').innerHTML += "<br />Only 10 upload fields allowed.";
            document.form.add.disabled = true;
        }
    }
</script> 
```

# qt - 没有安装 qmlviewer

> ID：13469306
> 
> 赞同：13
> 
> 时间：2012-11-20T08:38:01.550
> 
> 标签：qt, qt-creator, qml, qt5

我已经安装了 Qt SDK 5.0.0 beta 2 和 Qt Creator 2.6.0。它会检测到该软件包，但会发出“未安装 qmlviewer”的警告。我已经找到它，它位于 SDK bin 文件夹中。我能做些什么？我使用的是 ubuntu 12.04，并且已将 SDK 二进制文件添加到 PATH 中。我可以通过终端查看 QML 文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T10:42:53.827

这不是一个解决方案，但也许会有所帮助。

我也可以看到这个警告，但我认为这不是一个大问题。我已经开始将我现有的 Quick1 代码移动到新的 Qt 版本，并且我没有在下拉列表中看到 Qt5 Kit。但是当我创建新的 Quick2 应用程序时，我发现了它。如果没有 QMLviewer，一切似乎都可以正常工作。

顺便说一句，我找到了关于 Qt5 和 qmlveiwer的论坛[帖子。](https://qt-project.org/forums/viewthread/19787)Guy 说，在实际状态下支持查看器非常困难，因为声明性模块的 API 变化非常快。所以他们从 Qt5 中删除了 qmlviewer。

# c# - 我如何在不使用 ASPNETDB.MDF 的情况下使用角色管理 - asp.net/c#

> ID：13469310
> 
> 赞同：0
> 
> 时间：2012-11-20T08:38:25.020
> 
> 标签：c#, asp.net, sql, roles

我想使用角色管理asp.net，但是Visual Studio一直在创建`ASPNETDB.MDF`文件，我不需要这个。我已经有一个现有的数据库文件，我想使用它来代替`ASPNETDB.MDF`. 这主要是为了拒绝不需要的用户列出不必要的目录。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:47:28.127

您可以摆脱 ASPNETDB.MDF - 一个无关的附加数据库文件，并且可以将您的所有安全信息（用户、角色）存储在您的自定义 SQL 数据库中。

按照这些简单的步骤

**步骤 01 - 在您的 SQL 数据库中创建安全表**

首先，您需要创建将在 SQL 数据库中保存 ASP.NET 安全信息的表。有一个向导。

ASP.NET SQL Server 安装向导位于（Windows XP 和 Windows 2008 Server）：

> %WinDir%\Microsoft.NET\Framework\v2.0.50727\aspnet_regsql.exe

ASP.NET SQL Server 安装向导位于（Windows 7 x64）其中之一：

> %WinDir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regsql.exe %WinDir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regsql.exe %WinDir%\Microsoft.NET\Framework64\v2.0.50727\aspnet_regsql。 exe %WinDir%\Microsoft.NET\Framework\v2.0.50727\aspnet_regsql.exe

这个自助向导非常简单。您选择您的 SQL Server（通常是 .\SQLExpress）和所需的数据库，该向导将创建所有必需的表和对象来处理您的自定义 SQL 数据库中的 ASP.NET 安全性。

**步骤 02 - 生成机器密钥**

安全表中的密码存储加密。您需要在 web.config 文件中生成并记录您唯一的机器密钥。

访问[http://aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey)并获得一个现成的唯一机器密钥，整齐地包装在几行代码中，为您的 web.config 做好准备。生成行并将它们放在 XML 元素中：

```
... <machineKey
      validationKey="6B6DC7FF0657AEE33FEB36189072D99551F27E281EAEEC8B0516B188A85CF2E4C
                     4A988429765C625979A232B5BE78D6E52CB59C3675B44FCA032C24B2C49DC5"
      decryptionKey="CFED70360D049F182EA009258C34ED698A799774A2687AAE94098C71C6BF38C8"
      validation="SHA1"
      decryption="AES" />
</system.web> 
```

**Step03 - 修改你的 web.config**

修改您的 web.config 以包括成员资格、角色和个人资料提供者。

在 XML 元素中放置类似于下面这些行的代码。将单词“Your”替换为适当的名称，与您的命名约定相匹配。

...

```
<membership defaultProvider="YourMembershipProvider">
  <providers>
    <add connectionStringName="YourConnectionString" applicationName="/"
       enablePasswordRetrieval="true" enablePasswordReset="true" requiresQuestionAndAnswer="false"
       requiresUniqueEmail="true" passwordFormat="Encrypted"     maxInvalidPasswordAttempts="5"
       passwordAttemptWindow="10" minRequiredPasswordLength="5" minRequiredNonalphanumericCharacters="0"
       name="YourMembershipProvider" type="System.Web.Security.SqlMembershipProvider" />
  </providers>
</membership>

<roleManager enabled="true" cacheRolesInCookie="true" cookieName="YOUR_ROLES" defaultProvider="YourRoleProvider">
  <providers>
    <add connectionStringName="YourConnectionString" applicationName="/" name="YourRoleProvider"
      type="System.Web.Security.SqlRoleProvider" />
   </providers>
 </roleManager>

 <profile defaultProvider="YourProfileProvider">
    <providers>
       <add name="YourProfileProvider" connectionStringName="YourConnectionString"
      applicationName="/" type="System.Web.Profile.SqlProfileProvider" />
     </providers>
 </profile> 
```

现在您可以在 Web Developer 或 Visual Studio 中运行 ASP.NET 配置，并确保所有新用户都是在您的自定义数据库中创建的，而不是在 /App_Data/ASPNETDB.MDF 中

# python - 我的 Python 中的空字符串检测？

> ID：13469312
> 
> 赞同：1
> 
> 时间：2012-11-20T08:38:31.283
> 
> 标签：python, string

这让我大吃一惊。我错过了什么？

我正在尝试检测 Excel 工作表中的单元格是否为空。但似乎没有一个测试以我期望的方式工作。我希望简单的“not idkt”测试会同时检测到空字符串和无，但是没有......事实上，似乎没有 - 好吧 - 任何测试都没有检测到 None ，因为在第三行中，那就是正在打印什么。

代码：

```
def getFromExcelSheet():
    wb = load_workbook("input.xlsx")
    idkts = [];
    idktRows = get_worksheet_as_list(wb.get_sheet_by_name('Inputs'))
    # print "Got these idkts" 
    for row in idktRows:
        # print row[0]
        idkt = str(row[2]).strip()
        filename = str(row[3]).strip()
        if idkt == None:
            print "Idkt == none"

        if idkt is None:
            print "Idkt is none"

        if idkt == u"":
            print "Idkt is ''"

        if idkt != u"":
            print "Idkt is !=''"

        if not idkt:
            print "not IDKT"

        if idkt:
            print "idkt"

        print idkt 
```

输出

```
Idkt is !=''
idkt
3398041577

Idkt is !=''
idkt
3498100937

Idkt is !=''
idkt
None 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:44:20.053

`idkt` isn't empty, it's a string containing the word `'None'`. Here's your issue:

```
idkt = str(row[2]).strip() 
```

`row[2]` is a `None`, which becomes `'None'` when you call `str` on it. Try this:

```
if idkt == 'None': print 'yay!' 
```

You'd be better off testing for emptiness *before* the string conversion:

```
idkt = str(row[2]).strip() if row[2] else None 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:45:29.193

问题是您将单元格转换为字符串，然后将结果与 Python 的`None`（不是字符串）进行比较。

我假设您正在使用[openpyxl](http://packages.python.org/openpyxl/tutorial.html)在这种情况下您应该通过 访问单元格的值`.value`，例如

```
idkt = row[2].value 
```

然后，您将拥有一个标准 Python 对象 ( `str`/ `int`/ `None`etc)，它表示单元格中的数据。您应该将此值用于非空检查，它将按照您最初预期的方式运行：

```
if idkt not in ('', None):  # remember bool(0) == False
    ... 
```

# c# - 在不同的类上捕获按钮单击事件

> ID：13469316
> 
> 赞同：1
> 
> 时间：2012-11-20T08:38:42.580
> 
> 标签：c#, winforms

我有一个应该能够与自定义设备通信的 winforms 应用程序。我有一个主窗口，其中有一个“断开连接”按钮。我有一个处理日志记录的用户控件和一个处理所有通信的类（SerialCom）。

当我加载用户控件时，我还在 SerialCom 类中设置了 com 端口。此类接收数据，并通过 INotifyPropertyChanged 将其发送到用户控件，有关更多详细信息，请参见此[问题](https://stackoverflow.com/questions/13381160/monitoring-tool-splitting-gui-and-backend-code-in-c-sharp)。

我想从 MainForm 访问 SerialCom 类，而不必访问`new`SerialCom 类。但首先在用户控件上创建 SerialCom 类。（所以，如果我`new`是 MainForm 中的 SerialCom 类，串口将不会打开，所以我无法关闭它。）

关于如何从 B 类和 C 类进入 A 类而无需再次进入新 A 类的任何提示？我正在考虑在表单之间传递事件，这是最好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:03:04.787

将您的`SerialCom`班级变成单身人士。这样你就有了一个许多类都可以访问的实例。但请确保此线程安全！

看到[这个制作线程安全的单例](http://msdn.microsoft.com/en-us/library/ff650316.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:03:30.913

也许您正在寻找单身人士。基本上，single 是一个只允许初始化单个实例的对象，并提供一种机制（通过静态方法/属性）从任何地方访问该实例。

这是我在以下链接[http://msdn.microsoft.com/en-us/library/ff650316.aspx中找到的一个简单实现](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

```
using System;

public class Singleton
{
   private static Singleton instance;

   private Singleton() {}

   public static Singleton Instance
   {
      get 
      {
         if (instance == null)
         {
            instance = new Singleton();
         }
         return instance;
      }
   }
} 
```

# dependencies - CMake Debian 对 Boost Regex 的依赖

> ID：13469318
> 
> 赞同：1
> 
> 时间：2012-11-20T08:38:49.163
> 
> 标签：dependencies, cmake, debian, boost-regex, cpack

我目前正在尝试从我的项目中构建一个使用 Boost-Regex 的 debian 包。除了通过定义依赖项外，一切正常`CPACK_DEBIAN_PACKAGE_DEPENDS`。我似乎无法找出正确的模块名称放在这里。到目前为止，我尝试了以下方法：

```
SET (CPACK_DEBIAN_PACKAGE_DEPENDS "boost_regex")
SET (CPACK_DEBIAN_PACKAGE_DEPENDS "boost-regex")
SET (CPACK_DEBIAN_PACKAGE_DEPENDS "libboost-regex") 
SET (CPACK_DEBIAN_PACKAGE_DEPENDS "libboost_regex") 
```

但是对于每个版本，Ubuntu 软件中心都告诉我，在尝试安装生成的 *.deb 时无法解决依赖关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:28:31.007

发现我的错误。将答案留给可能有同样问题的其他人：我错过了版本号，即`libbost-regex1.46.1`.

# python - 当您可以直接插入时，Scrapy 为什么还要打扰 Items？

> ID：13469321
> 
> 赞同：1
> 
> 时间：2012-11-20T08:38:55.347
> 
> 标签：python, scrapy

我将使用scrapy来抓取一个域。我计划使用 sqlalchemy 将所有这些信息存储到我的数据库中。每页非常简单的 xpath 选择器，我打算使用 HttpCacheMiddleware。

理论上，只要我有来自蜘蛛的数据，我就可以将数据插入到我的数据库中（这至少需要实例化 hxs）。这将允许我绕过实例化任何 Item 子类，因此不会有任何项目通过我的管道。

我认为这样做的好处是：

1.  更少的 CPU 密集型，因为管道不会有任何 CPU 处理
2.  防止内存泄漏。

磁盘 I/O 比网络 I/O 快很多，所以我认为这不会对蜘蛛产生太大影响。

我有理由要使用 Scrapy 的 Item 类吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T08:55:22.600

如果您直接在蜘蛛内部插入，那么您的蜘蛛将阻塞直到数据被插入。如果您创建一个 Item 并将其传递给 Pipeline，则蜘蛛可以在插入数据的同时继续爬行。此外，如果多个蜘蛛尝试同时插入数据，可能会出现竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T01:00:23.720

这是一个老问题，但我觉得赞成的答案并不正确。

> 我有理由想使用 Scrapy 的`Item`课程吗？

网页抓取的 Scrapy 模型本质上是：

1.  用蜘蛛收集数据。
2.  将该数据捆绑到项目中。
3.  使用项目管道处理这些项目。
4.  将这些项目存储在另一个项目管道的某个地方。

第 3 步和第 4 步组成了“大”项目管道。如果您不 subclass `Item`，则无法将对象输入到项目管道中，因此您必须规范化字段并将项目插入到您的数据库中，所有这些都在您的蜘蛛中。

如果你*做*subclass `Item`，你可以使你的项目处理代码更易于维护：

```
from scrapy.item import Item, Field
from scrapy.contrib.loader import XPathItemLoader
from scrapy.contrib.loader.processor import MapCompose, Identity

class Product(Item):
    name = Field()
    price = Field()

    aisle = Field()
    categories = Field()

class ProductLoader(XPathItemLoader):
    default_item_class = Product

    price_in = MapCompose(parse_price)
    categories_out = Identity() 
```

# android - Android，如何通过 ksoap2 将大量数据传输到 Web 服务？

> ID：13469324
> 
> 赞同：0
> 
> 时间：2012-11-20T08:39:13.733
> 
> 标签：android, web-services, ksoap2, android-ksoap2

当我尝试将大量数据发送到 Web 服务时，我遇到了一个大问题。我需要向网络服务发送大约 20-30 张照片。我将所有照片转换为 base64 字符串并发送到网络服务。问题是当我发送 1 张照片时可以，但是当我尝试发送 2 张或更多照片时，我出现内存不足异常。我的代码：

```
 public boolean TransferAccidentFromGisToRarParameters(List<String> photos) {
    String METHOD_NAME = "TransferAccidentFromGisToRarParameters";
    String SOAP_ACTION = NAMESPACE + METHOD_NAME;
    request = new SoapObject(NAMESPACE, METHOD_NAME);
    envelope.setOutputSoapObject(request);

    SoapObject arr = new SoapObject(NAMESPACE, "accidentPhotos");

    for (String string : photos) {
        arr.addProperty("string", string);
    }
    request.addSoapObject(arr);
    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
        return Boolean.parseBoolean(response.toString());
    } catch (Exception e) {
        e.printStackTrace();
        return false;
    }
} 
```

其中：照片 - base64 字符串列表我的网络服务代码块（asmx 网络服务）：

```
 [WebMethod]
    public bool TransferAccidentFromGisToRarParameters(string[] accidentPhotos)
    {
        try
        {
            foreach (var photo in accidentPhotos)
            {
                var item = Convert.FromBase64String(photo);
                var accidentMedia = new AccidentMedia { Content = item };
                entities.media_accidents.AddObject(accidentMedia);
            }
            entities.SaveChanges();
            return true;
        }
        catch (Exception exc)
        {
            return false;
        }
    } 
```

这是 Android 日志中的异常： ![错误堆栈跟踪](../Images/5ae0798b720e050eb6af30915aaa79f5.png)

我会很高兴你的回答。此致！

# hibernate - EntityManager null JBoss 7.1 JTA Spring Hibernate

> ID：13469326
> 
> 赞同：2
> 
> 时间：2012-11-20T08:39:22.973
> 
> 标签：hibernate, spring-mvc, jboss7.x, jta

我在服务类中的 EntityManager 上遇到了 NullPointerException。从 JSBOSS 战争部署日志中可以看出，我的 spring 单例完全实例化，我的持久性单元也是如此。

这是我的代码：persistence.xml：

```
<persistence-unit name="sisweb-edi" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:/jdbc/sisweb-edi</jta-data-source>

    <class>com.sis.web.edi.domain.Codification</class>
    <class>com.sis.web.edi.domain.Dossier</class>
    <exclude-unlisted-classes/>

    <properties>
        <property name="hibernate.hbm2ddl.auto" value="validate"/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
        <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>
    </properties>
</persistence-unit> 
```

JBOSS DS定义：

```
<datasource jta="true" jndi-name="java:/jdbc/sisweb-edi" pool-name="sisweb-edi" enabled="true" use-ccm="false">
  <connection-url>jdbc:oracle:thin:@xxx:1521:xxx</connection-url>
  <driver-class>oracle.jdbc.OracleDriver</driver-class>
  <driver>oracle.jdbc</driver>
  <security>
    <user-name>xxx</user-name>
    <password>xxx</password>
  </security>
  <validation>
    <validate-on-match>false</validate-on-match>
    <background-validation>false</background-validation>
  </validation>
  <statement>
   <share-prepared-statements>false</share-prepared-statements>
  </statement>
</datasource> 
```

编码服务.java：

```
@Named
public class CodificationService {

/**
 * EntityManager
 */
@PersistenceContext(unitName = "sisweb-edi")
private EntityManager em;

/**
 * Get the Codification by the typeVoie
 * 
 * @param typeVoie String
 * @return Codification
 */
public Codification getCodificationByTypeVoie(String typeVoie) {
    Query query = em.createNamedQuery(Codification.Q_FIND_BY_TYPE_VOIE);
    query.setParameter(Codification.P_TYPE_VOIE, typeVoie);
    return (Codification) query.getSingleResult();
}
} 
```

最后从服务器引导程序获取日志，直到出现 NullPointerException：

```
19:32:12,316 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
19:32:12,623 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
19:32:12,700 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
19:32:13,782 INFO  [org.xnio] XNIO Version 3.0.3.GA
19:32:13,783 INFO  [org.jboss.as.server] JBAS015888: Creating http management service     using socket-binding (management-http)
19:32:13,794 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
19:32:13,802 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.3.GA
19:32:13,827 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
19:32:13,835 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
19:32:13,848 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
19:32:13,853 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
19:32:13,855 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
19:32:13,891 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
19:32:13,900 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
19:32:13,907 INFO  [org.jboss.as.security] (MSC service thread 1-5) JBAS013100: Current PicketBox version=4.0.7.Final
19:32:14,004 INFO  [org.jboss.as.connector] (MSC service thread 1-7) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
19:32:14,006 INFO  [org.jboss.as.naming] (MSC service thread 1-7) JBAS011802: Starting Naming Service
19:32:14,053 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-1) JBAS015400: Bound mail session [java:jboss/mail/Default]
19:32:14,160 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
19:32:14,182 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-8) JBoss Web Services - Stack CXF Server 4.0.2.GA
19:32:14,281 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class oracle.jdbc.OracleDriver (version 11.2)
19:32:14,641 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "sisweb-edi.war"
19:32:14,647 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-5) JBAS015012: Started FileSystemDeploymentService for directory D:\tools\jboss-as-7.1.1.Final\standalone\deployments
19:32:14,936 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-7) JBAS010400: Bound data source [java:/jdbc/sisweb-edi]
19:32:14,936 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-2) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
19:32:16,795 INFO  [org.jboss.as.jpa] (MSC service thread 1-2) JBAS011401: Read persistence.xml for sisweb-edi
19:32:17,268 INFO  [org.jboss.as.jpa] (MSC service thread 1-6) JBAS011402: Starting Persistence Unit Service 'sisweb-edi.war#sisweb-edi'
19:32:17,479 INFO  [org.hibernate.annotations.common.Version] (MSC service thread 1-6) HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
19:32:17,487 INFO  [org.hibernate.Version] (MSC service thread 1-6) HHH000412: Hibernate Core {4.0.1.Final}
19:32:17,490 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-6) HHH000206: hibernate.properties not found
19:32:17,493 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-6) HHH000021: Bytecode provider name : javassist
19:32:17,521 INFO  [org.hibernate.ejb.Ejb3Configuration] (MSC service thread 1-6) HHH000204: Processing PersistenceUnitInfo [name: sisweb-edi...]
19:32:17,846 WARN  [org.hibernate.mapping.RootClass] (MSC service thread 1-6) HHH000038: Composite-id class does not override equals(): com.sis.web.edi.domain.CodificationPK
19:32:17,847 WARN  [org.hibernate.mapping.RootClass] (MSC service thread 1-6) HHH000039: Composite-id class does not override hashCode(): com.sis.web.edi.domain.CodificationPK
19:32:17,852 INFO  [org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator] (MSC service thread 1-6) HHH000130: Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider
19:32:18,172 INFO  [org.hibernate.dialect.Dialect] (MSC service thread 1-6) HHH000400: Using dialect: org.hibernate.dialect.Oracle10gDialect
19:32:18,191 INFO  [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (MSC service thread 1-6) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jta.CMTTransactionFactory
19:32:18,195 INFO  [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (MSC service thread 1-6) HHH000397: Using ASTQueryTranslatorFactory
19:32:18,241 INFO  [org.hibernate.validator.util.Version] (MSC service thread 1-6) Hibernate Validator 4.2.0.Final
19:32:18,656 INFO  [org.hibernate.tool.hbm2ddl.SchemaValidator] (MSC service thread 1-6) HHH000229: Running schema validator
19:32:18,657 INFO  [org.hibernate.tool.hbm2ddl.SchemaValidator] (MSC service thread 1-6) HHH000102: Fetching database metadata
19:32:18,777 INFO  [org.hibernate.tool.hbm2ddl.TableMetadata] (MSC service thread 1-6) HHH000261: Table found: SARAXO.CODIFICATION
19:32:18,778 INFO  [org.hibernate.tool.hbm2ddl.TableMetadata] (MSC service thread 1-6) HHH000037: Columns: [cod_valide, ns_class, cod_itineraire_type, cod_palette_ordre_aff, cod_temps_armement, cod_libelle_court, cod_moyen_type, cod_scenario, cod_facturation, cod_libelle, cod_icone_nom, cod_code_fiche, cod_profil, cod_dec_t_moy, cod_action, cod_type, cod_ordre_aff, cod_rayon_base, cod_exec_ok, cod_rayon_palier, cod_zoom_max, cod_code, cod_libelle_google, cod_ordre_sta, cod_code_famille]
19:32:18,862 INFO  [org.hibernate.tool.hbm2ddl.TableMetadata] (MSC service thread 1-6) HHH000261: Table found: SARAXO.DOSSIER
19:32:18,864 INFO  [org.hibernate.tool.hbm2ddl.TableMetadata] (MSC service thread 1-6) HHH000037: Columns: [dos_int_type_voie, dos_raison, dos_date_sys, dos_nb_victime, dos_provenance, dos_poste_tel, dos_dec_sid, dos_incarcere, dos_int_etg, dos_devenir, dos_raison_lib, dos_t2_service, doss_proprietaire, dos_ope2, dos_ope1, dos_t2, dos_circonstance, dos_int_nom_voie, dos_sismap_gps_x, dos_r_moy_pai, dos_sismap_gps_y, dos_repe_num, dos_app_num_voie, dos_profil, dos_int_pays, dos_int_itineraire, dos_app_code_postal, dos_voie_id, dos_date_maj, dos_int_compl_etare, dos_iter_num, dos_classe, dos_num, dos_r_corresd, dos_t2_fax, dos_int_compl_quartier, dos_date_creation, dos_num_distant, dos_com_ass, dos_r_correso, dos_app_prenom, dos_r_evs, dos_application_smur, dos_med_lib, dos_niveau_gravite, dos_circ_lib, dos_app_type_voie, dos_quartier_id, dos_google_precision, dos_sismap_precision, dos_int_part_voie, dos_action, dos_app_part_voie, dos_digicode, dos_cd_billet, dos_int_departement, dos_int_compl_voie, dos_app_telealarme, dos_victime_nom, dos_app_dem_lib, dos_app_quartier, dos_cd_certif, dos_int_com, dos_victime_prenom, dos_delest_dosnum, dos_app_nom_voie, dos_med_hos, dos_com_id, dos_etare_id, dos_app_demande, dos_observation, dos_t2_date, dos_gps_x, dos_gps_y, dos_app_com, dos_devenir_lib, dos_app_type_lib, dos_etat, dos_t2_nom_co, dos_app_type, dos_t2_poste, dos_int_code_postal, dos_dos_assist, dos_int_quartier, dos_app_nom, dos_bil_rqs, ns_class, dos_int_num_tel, dos_int_type_lieu, dos_val_ope, dos_provenance_lib, dos_r_servo, dos_t2_tel_co, dos_int_etare, dos_r_servd, dos_int_ty_l_lib, dos_app_num_tel, doss_couplage_type, dos_login_upd, dos_app_etare, dos_int_appart, dos_int_region, dos_cd_ass_prv, dos_adresse_google, dos_bt, dos_sid, dos_r_per_ass, dos_int_compl_commune, dos_int_adresse_libre, dos_val_date, dos_r_etabd, dos_delest_dept, dos_con, dos_int_num_voie, dos_delest_etat, dos_r_etabo]
19:32:19,048 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/sisweb-edi]] (MSC service thread 1-4) No Spring WebApplicationInitializer types detected on classpath
19:32:19,076 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/sisweb-edi]] (MSC service thread 1-4) Initializing Spring root WebApplicationContext
19:32:19,077 INFO  [org.springframework.web.context.ContextLoader] (MSC service thread 1-4) Root WebApplicationContext: initialization started
19:32:19,157 INFO  [org.springframework.web.context.support.AnnotationConfigWebApplicationContext] (MSC service thread 1-4) Refreshing Root WebApplicationContext: startup date [Mon Nov 19 19:32:19 CET 2012]; root of context hierarchy
19:32:19,196 INFO  [org.springframework.context.annotation.ClassPathBeanDefinitionScanner] (MSC service thread 1-4) JSR-250 'javax.annotation.ManagedBean' found and supported for component scanning
19:32:19,199 INFO  [org.springframework.context.annotation.ClassPathBeanDefinitionScanner] (MSC service thread 1-4) JSR-330 'javax.inject.Named' annotation found and supported for component scanning
19:32:19,200 INFO  [org.springframework.web.context.support.AnnotationConfigWebApplicationContext] (MSC service thread 1-4) Successfully resolved class for [com.sis.web.edi.config.ServiceEDIConfig]
 19:32:19,260 INFO [org.springframework.context.annotation.ClassPathBeanDefinitionScanner] (MSC service thread 1-4) JSR-250 'javax.annotation.ManagedBean' found and supported for component scanning
 19:32:19,260 INFO  [org.springframework.context.annotation.ClassPathBeanDefinitionScanner] (MSC service thread 1-4) JSR-330 'javax.inject.Named' annotation found and supported for component scanning
19:32:19,392 INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] (MSC service thread 1-4) JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
19:32:19,439 INFO  [org.springframework.beans.factory.support.DefaultListableBeanFactory] (MSC service thread 1-4) Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@42e28221: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,serviceEDIConfig,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0,dossierService,codificationService,org.springframework.aop.config.internalAutoProxyCreator,proxyTransactionManagementConfiguration,org.springframework.transaction.config.internalTransactionAdvisor,transactionAttributeSource,transactionInterceptor,sisweb-edi,jtaTransactionManager]; root of factory hierarchy
19:32:19,569 INFO  [org.springframework.transaction.jta.JtaTransactionManager] (MSC service thread 1-4) Using JTA UserTransaction: org.jboss.tm.usertx.client.ServerVMClientUserTransaction@7b884e45
19:32:19,570 INFO  [org.springframework.transaction.jta.JtaTransactionManager] (MSC service thread 1-4) Using JTA TransactionManager: com.arjuna.ats.jbossatx.jta.TransactionManagerDelegate@4fdf5bae
19:32:19,574 INFO  [org.springframework.transaction.jta.JtaTransactionManager] (MSC service thread 1-4) Using JTA TransactionSynchronizationRegistry: com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionSynchronizationRegistryImple@5a005478
19:32:19,580 INFO  [org.springframework.web.context.ContextLoader] (MSC service thread 1-4) Root WebApplicationContext: initialization completed in 502 ms
19:32:19,656 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/sisweb-edi]] (MSC service thread 1-4) Initializing Spring FrameworkServlet 'webmvc'
19:32:19,656 INFO  [org.springframework.web.servlet.DispatcherServlet] (MSC service thread 1-4) FrameworkServlet 'webmvc': initialization started
19:32:19,661 INFO  [org.springframework.web.context.support.AnnotationConfigWebApplicationContext] (MSC service thread 1-4) Refreshing WebApplicationContext for namespace 'webmvc-servlet': startup date [Mon Nov 19 19:32:19 CET 2012]; parent: Root WebApplicationContext
19:32:19,663 INFO  [org.springframework.context.annotation.ClassPathBeanDefinitionScanner] (MSC service thread 1-4) JSR-250 'javax.annotation.ManagedBean' found and supported for component scanning
19:32:19,664 INFO  [org.springframework.context.annotation.ClassPathBeanDefinitionScanner] (MSC service thread 1-4) JSR-330 'javax.inject.Named' annotation found and supported for component scanning
19:32:19,665 INFO  [org.springframework.web.context.support.AnnotationConfigWebApplicationContext] (MSC service thread 1-4) Successfully resolved class for [com.sis.web.edi.config.WebEDIAppConfig]
19:32:19,676 INFO  [org.springframework.context.annotation.ClassPathBeanDefinitionScanner] (MSC service thread 1-4) JSR-250 'javax.annotation.ManagedBean' found and supported for component scanning
19:32:19,677 INFO  [org.springframework.context.annotation.ClassPathBeanDefinitionScanner] (MSC service thread 1-4) JSR-330 'javax.inject.Named' annotation found and supported for component scanning
19:32:19,743 INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] (MSC service thread 1-4) JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
19:32:19,770 INFO  [org.springframework.beans.factory.support.DefaultListableBeanFactory] (MSC service thread 1-4) Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@29d63b21: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,webEDIAppConfig,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0,dossierController,delegatingWebMvcConfiguration,requestMappingHandlerMapping,viewControllerHandlerMapping,beanNameHandlerMapping,resourceHandlerMapping,defaultServletHandlerMapping,requestMappingHandlerAdapter,mvcConversionService,mvcValidator,httpRequestHandlerAdapter,simpleControllerHandlerAdapter,handlerExceptionResolver,messageSource,propertySourcesPlaceholderConfigurer]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@42e28221
19:32:19,883 INFO  [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping] (MSC service thread 1-4) Mapped "{[/dossier/{id}/context],methods=[GET],params=[],headers=[],consumes=[],produces=[application/json],custom=[]}" onto public com.sis.web.edi.dto.DossierDTO com.sis.web.edi.web.DossierController.getDossier(java.lang.Integer)
19:32:20,304 INFO  [org.springframework.web.servlet.DispatcherServlet] (MSC service thread 1-4) FrameworkServlet 'webmvc': initialization completed in 647 ms
19:32:20,314 INFO  [org.jboss.web] (MSC service thread 1-4) JBAS018210: Registering web context: /sisweb-edi
19:32:20,328 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed "sisweb-edi.war"
19:32:20,522 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 8582ms - Started 234 of 312 services (76 services are passive or on-demand)
19:32:32,385 ERROR [com.sis.web.edi.web.DossierController] HTTP 500: java.lang.NullPointerException
at com.sis.web.edi.service.DossierService.getDossier(DossierService.java:33) [edi-service-0.1-SNAPSHOT.jar:]
at com.sis.web.edi.web.DossierController.getDossier(DossierController.java:61) [classes:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_07]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_07]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_07]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_07]
at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213) [spring-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126) [spring-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07] 
```

有什么可能出错的提示吗？

编辑：如果我查找 EntityManagerFactory 并从中创建一个 EntityManager，则 EntityManager 是正确的 EntityManagerFactory emf = new JndiTemplate().lookup("java:comp/env/persistence/sisweb- edi", EntityManagerFactory.class); em = emf.createEntityManager();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:10:30.650

我只是缺少一个从 web 容器 EntityManagerFactory 实现中注入 EntityManager 的 spring 依赖项。

我添加了

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-orm</artifactId>
  <version>${spring.version}</version>
  <scope>runtime</scope>
</dependency> 
```

现在它正在工作（我发现在实施我的单元测试时：单元测试再次证明了它的效率！）

# c - 字符串连接的实现

> ID：13469327
> 
> 赞同：1
> 
> 时间：2012-11-20T08:39:26.243
> 
> 标签：c

这是我已经实现的 strcat 函数，但是当我转到 line 时出现分段错误`*dst++ = *src++;`。我已经递增`src`，直到`'\0'`我想从那里开始附加下一个字符串。你能告诉我为什么它会出现分段错误吗？我这样做有什么逻辑错误`*dst++ = *src++;`吗？

```
char *strconcat(char *dst, char *src)
{
    char *fdst;
    fdst = dst;
    if (dst == '\0' || src == '\0')
    return fdst;

    while (*dst != '\0')
        dst++;
    while (*src != '\0')
        *dst++ = *src++;

    return fdst;
} 
```

嘿，我经历了下面给出的许多解决方案，并进行了以下更改，但是当我开始连接两个字符串时仍然遇到分段问题，这是我的整个代码

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

char *strconcat(char *dst, const char *src);
void main()
{
    char *str1 = "Stack";
    char *str2 = "overflow";
    printf("MY CONCAT:%s\n",strconcat(str1, str2));
    printf("INBUILT CONCAT:%s\n",strcat(str1, str2));
}

char *strconcat(char *dst, const char *src)
{
    char *fdst;
    int dst_len = 0, src_len = 0;

    dst_len = strlen(dst);
    src_len = strlen(src);
    fdst = (char *) malloc(dst_len + src_len + 1);

    fdst = dst;
    if (src == NULL)
        return fdst;

    while(*dst)
    {
       dst++;
       fdst++;
    }
    while(*src)
       *fdst++ = *src++;
       *fdst = '\0';

    return fdst;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:41:46.713

The idiomatic way is

```
while (*dst++ = *src++); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:42:08.097

Some observations:

1.  You're not copying the termination, leaving a non-terminated string in `dst`. This is the cause of the actual problems.
2.  This: `if(dst == '\0'||src == '\0')` is weird, if the intent was comparing against `NULL` you should do so more directly and not use character literals.
3.  The `src` argument should be `const char *` since it's read-only. Using `const` for pointers that are "input" arguments is a very good idea, since it communicates intent right there in the prototype. It also helps avoid mistakingly writing to the wrong string.
4.  You can't have a function beginning with `str`, that "namespace" is reserved for the standard library.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T06:01:41.850

这里有多个问题：

**问题 - 我**

malloc 分配的内存

```
 fdst = (char *) malloc(dst_len + src_len + 1); 
```

丢失，因为稍后您正在执行以下操作：

```
 fdst = dst; 
```

将'fdst'中malloc返回的地址替换为目标字符串的地址..!! 希望你自己解决它，它很简单。

**问题-二**

解决上述问题后，您必须解决此问题：

```
while(*dst)
{
   dst++;
   fdst++;
} 
```

不仅要增加，您还必须将字符从`dst`to复制，`fdst`因为这将是您的连接字符串。

**问题 - III**

最后，你到底这样做了..!!

```
return fdst; 
```

你意识到那里的错误吧？希望你能照顾好[提示：保存起始地址并在最后返回它，而不是递增的指针；）]

注意：不是优化的解决方案，而是修复您的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T08:57:09.780

可能的崩溃原因：

1）可能是你的长度`dst`不足以支持`src`和的连接`dst`。

2）可能是你用输入字符指针调用了你的函数，它们没有指向分配的内存（静态或动态）

3) 可能是您输入的 dst char 指针指向一个常量字符串。

另一句话你必须在第二个之后完成你的`dst`字符串`'\0'``while`

```
 while (*src != '\0')
        *dst++ = *src++;
 *dst='\0'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T09:06:31.843

尝试这个：

```
while(*original)
  original++;
while(*add)
{
  *original = *add;
  add++;
  original++;
}
*original = '\0'; 
```

这可能会有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-20T09:11:02.903

您的代码中有很多错误：

1.  `if (dst == '\0' || src == '\0')`通过检查您正在尝试什么。首先，这不是明确的条件 - 您应该使用`if (dst == NULL || src == NULL)`or`if (*dst == '\0' || *src == '\0')`来更准确并使其更清楚。其次，即使这个条件是正确的（`if (*dst == '\0' || *src == '\0')`），你也没有达到连接应该达到的效果。至少如果`*src == '\0'`您应该返回原始字符串 - dst。
2.  您可能应该检查 dst 是否足够长以存储新字符串，或者您应该在函数内分配足够大的新缓冲区以容纳 dst 和 src ( `malloc (strlen(dst) + strlen(src) + 1`) - 请注意额外`+1`保存终止 '/0' 字符)
3.  您没有终止结果字符串。

您的问题的答案：分段错误可能是因为您的 dst 不够长，无法同时保存 src 和 dst。您可以使用第 2 点中的提示来修改您的代码，或者您可以在函数外部声明更大的缓冲区，其大小至少为`(strlen(dst) + strlen(src) + 1`. 另一个原因可能是使用常量字符串调用此函数，例如 char `*str = "string";`。在这种情况下，字符串很可能是常量，您不能修改它（在大多数操作系统中，它位于程序的不可修改部分，您只有指向该位置的指针）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-20T10:16:10.770

您的代码是正确的，请参阅下面的解释！

我认为您在调用者中使用 char * 作为 src 和 dst 字符串。

在那里使用数组声明会有所帮助，因为您的程序在

```
*dst++ = *src++; 
```

因为 dst 和 src 指向的字符串是常量，不能修改。

在下面的代码中我刚刚添加了main，你的函数没有改变！

```
#include<stdio.h>

char *strconcat(char *dst, char *src)
{
    char *fdst;
    fdst = dst;
    if (dst == '\0' || src == '\0')
        return fdst;

    while (*dst != '\0')
        dst++;
    while (*src != '\0')
        *dst++ = *src++;

    return fdst;
}

void main()
{
 char dest[10] = "one" ;
 char src[10] = "two" ;

printf("\n%s " , strconcat( dest , src ) ) ;
} 
```

虽然您需要将 if 语句更改为

```
 if (*dst == '\0' || *src == '\0')
            return fdst; 
```

# java - 使用服务下载文件

> ID：13469332
> 
> 赞同：3
> 
> 时间：2012-11-20T08:39:45.063
> 
> 标签：java, android

我正在尝试将下载管理器设置为 android，所以当我尝试启动服务时，它给了我错误

在我的清单中，我声明了服务名称，并获得了互联网许可并写了外部存储许可

这是主要活动：

```
public class DownloadLabMyClassActivity extends Activity {
    Button downloadButton;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        downloadButton = (Button) findViewById(R.id.button1);
        downloadButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent serviceIntent = new Intent(DownloadLabMyClassActivity.this,DownloadService.class);
                startService(serviceIntent);
            }
        });
}
} 
```

这是服务

```
public class DownloadService extends IntentService {

    public DownloadService(String name) {
        super("");
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onHandleIntent(Intent arg0) {
        // TODO Auto-generated method stub
        Log.d("service", "onHandleIntent()");
    /*          try {
            URL fileUrl = new URL("http://goo.gl/Mfyya");

            HttpURLConnection urlConnection = (HttpURLConnection)fileUrl.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);
            urlConnection.connect();

            File sdcard = Environment.getExternalStorageDirectory();
            File file = new File (sdcard, "filename.ext");

            FileOutputStream fileoutput = new FileOutputStream (file);
            InputStream inputstream = urlConnection.getInputStream();

            int totalSize = urlConnection.getContentLength();
            int downloadedSize = 0;
            byte[] buffer = new byte[1024];
            int bufferlength =0;

            while ((bufferlength = inputstream.read(buffer)) > 0)
            {   
                fileoutput.write(buffer, 0, bufferlength);
                downloadedSize += bufferlength;
                //updateProgress(downloadedSize, totalSize);
            }
            fileoutput.close();
        } catch (IOException e) {
            Log.d("service", "error");
            //e.printStackTrace();
        }*/
    }
} 
```

这是错误：

```
11-20 09:38:21.107: E/AndroidRuntime(1627): FATAL EXCEPTION: main
11-20 09:38:21.107: E/AndroidRuntime(1627): java.lang.RuntimeException: Unable to instantiate service com.test2.lab.DownloadService: java.lang.InstantiationException: can't instantiate class com.test2.lab.DownloadService; no empty constructor
11-20 09:38:21.107: E/AndroidRuntime(1627):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2237)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at android.app.ActivityThread.access$1600(ActivityThread.java:123)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at android.os.Looper.loop(Looper.java:137)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at android.app.ActivityThread.main(ActivityThread.java:4424)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at java.lang.reflect.Method.invokeNative(Native Method)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at java.lang.reflect.Method.invoke(Method.java:511)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at dalvik.system.NativeStart.main(Native Method)
11-20 09:38:21.107: E/AndroidRuntime(1627): Caused by: java.lang.InstantiationException: can't instantiate class com.test2.lab.DownloadService; no empty constructor
11-20 09:38:21.107: E/AndroidRuntime(1627):     at java.lang.Class.newInstanceImpl(Native Method)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at java.lang.Class.newInstance(Class.java:1319)
11-20 09:38:21.107: E/AndroidRuntime(1627):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2234)
11-20 09:38:21.107: E/AndroidRuntime(1627):     ... 10 more 
```

我的问题：

*   如何正确启动此服务？
*   所需的许可以及是否缺少任何东西？
*   如何使用此服务下载多个文件？
*   我可以为每个文件实例化此服务并将其添加到它们的列表中，以便将来我可以暂停或恢复整个列表或特定服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:41:25.337

您需要使用服务的空构造函数，系统会为您实例化它..

```
public DownloadService() {
    super("DownloadService");
    // TODO Auto-generated constructor stub
} 
```

要将数据传递到服务，请检查[使用 Intent 将数据从 Activity 传递到服务](https://stackoverflow.com/questions/3293243/android-pass-data-from-activity-to-service-using-an-intent)

# windows-8 - Windows 8 Metro 风格应用安装

> ID：13469334
> 
> 赞同：1
> 
> 时间：2012-11-20T08:39:52.723
> 
> 标签：windows-8, windows-runtime, .net-4.5

我有运行 Windows 8 Pro 的 x86 平板电脑，我正在尝试在其上安装在 RTM 中创建的 appx 包，我以管理员身份运行所有内容，但未安装应用程序，并且出现错误“术语“Add-AppxPackage”未被识别为cmdlet、功能脚本文件或可运行程序的名称”是否有解决上述问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:49:40.910

您是否在目标计算机上安装了 Windows 应用商店开发人员许可证？请参阅此链接： http: [//msdn.microsoft.com/en-us/library/windows/apps/hh696646 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh696646(v=vs.110).aspx)

之后，您应该能够安装您的软件包。我从来没有使用 appx 二进制文件进行过安装。当您构建您的应用程序时，输出应包含一个 appx 文件和一个带有您的应用程序名称的文件夹。我进行安装的方式是将文件夹复制到目标机器。文件夹内是一个 powershell 脚本，您可以运行它来安装应用程序。该脚本称为“Add-AppDevPackage.ps1”，我相信您需要从提升的（管理员）Powershell 控制台运行它。

编辑：您是否正在运行这样的命令：

.\add-appdevpackage.ps1

（或使用您的脚本名称，并注意前面的点斜线）

# c++ - 使用 C++ 访问 iOS 上的 Documents 文件夹

> ID：13469342
> 
> 赞同：2
> 
> 时间：2012-11-20T08:40:25.383
> 
> 标签：c++, ios

我想知道是否有一种方法可以仅使用 C++ 获取对 iOS 上 Documents 文件夹的引用（即不使用 Objective-C 中的任何代码；这是因为它是一个仅在 C++ 中实现的框架，可以作为库添加在 iOS 项目中）。

如果可能，请在您的答案中提供代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-24T20:48:10.400

使用下面的代码，我可以访问我的应用程序中的缓存文件夹。我认为，“/Library/Documents”中的文档文件夹或其他文件夹。

```
char *home = getenv("HOME");
char *subdir = "/Library/Caches/subdir"; 
```

`home`+ `subdir`= 完整路径

接下来，使用完整路径，您可以在 C++ 中执行通常的读取/写入操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:56:40.587

是的，您可以访问普通的 Unix API。在此处查看 Apple的[iOS 联机帮助页](https://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T09:11:13.443

获取路径（使用 Cocoa API），然后使用 API 将其转换为与 C++ 字符串兼容的表示，例如：`CFStringGetFileSystemRepresentation`、、 `CFURLGetFileSystemRepresentation`或`-[NSString fileSystemRepresentation]`。

就像是：

```
// you may need to wrap this in an autorelease pool
NSArray * paths(NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES));
const char* const path([[paths objectAtIndex:0] fileSystemRepresentation]);
if (0 == fsrep) {
  uh-oh
}
const std::string result(path); 
```

然后你可以简单地把它放在它自己的 ObjC++ 翻译中并`result`从函数中返回（这对你的 C++ 源代码的其余部分是可见的）。

# php - 产品统计

> ID：13469345
> 
> 赞同：1
> 
> 时间：2012-11-20T08:40:27.933
> 
> 标签：php, mysql, sql, report

我为我的项目做统计功能。我有一些字段的订单表：

*   `prouct_id`,
*   `amount`,
*   `order_date`.

客户要求我进行自动缩放统计：我得到`MIN(order_date)`a`produc_id`和当前日期来计算**天数**：

*   如果大约〜1个月**的天数==>按周显示产品的统计信息**

*   如果大约〜1年**的日子**==>按月显示产品的统计信息

*   如果**天数**>= 2 年 ==> 按年份显示产品的统计信息

我希望能收到大家关于如上统计的想法、例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:58:28.623

~~You didn't specify what RDBMS is this. So let me assume that it is SQL Server, and you can do this:~~

 ~~```
;WITH MinDates AS
(
    SELECT 
      produc_id,
      MIN(order_date) order_date
    FROM products
    GROUP BY produc_id
), DatesWithIntervals AS
(
    SELECT 
      product_id,
      order_date,
      CASE 
        WHEN ABS(DATEDIFF(dd, order_date, GETDATE())) < 31      THEN 1
        WHEN ABS(DATEDIFF(dd, order_date, GETDATE())) < 365     THEN 2
        WHEN ABS(DATEDIFF(dd, order_date, GETDATE())) < 365 * 2 THEN 3 
        ELSE 4
      END "Interval"
    FROM MinDates
)
SELECT
  product_id,
  order_date
  ...
FROM DatesWithIntervals 
--Do your statics here 
```~~ 

~~You didn't specify what statistics do you want to compute. But you should be able to do whatever statistics you want to do using the last cte: `DatesWithIntervals` depending on the field `Interval` and I will leave it as a practice for you.~~

**Edit:** For MySQL, just replace all these `CTE`s with subqueries like so:

```
SELECT
  product_id,
  order_date
      ...
FROM
(
    SELECT 
      product_id,
      order_date,
      CASE 
        WHEN ABS(DATEDIFF(dd, order_date, GETDATE())) < 31      THEN 1
        WHEN ABS(DATEDIFF(dd, order_date, GETDATE())) < 365     THEN 2
        WHEN ABS(DATEDIFF(dd, order_date, GETDATE())) < 365 * 2 THEN 3 
        ELSE 4
      END "Interval"
    FROM
    (
         SELECT 
          produc_id,
          MIN(order_date) order_date
         FROM products
         GROUP BY produc_id  
    ) MinDates
) DatesWithIntervals 
--Do your statics here 
```

# marklogic - 无效输入：SVC-DIROPEN: xdmp:filesystem-directory("D:\Application\xml")

> ID：13469350
> 
> 赞同：3
> 
> 时间：2012-11-20T08:40:47.540
> 
> 标签：marklogic

我的本地系统驱动器中有一些`xml`文件，我想将这些文件加载​​到我通过 IP 地址和密码访问的`xml`远程服务器 4.2 中。`Marklogic`但是，我尝试通过使用`database`或通过`xquery`代码直接上传，它显示在错误下方，所以有没有没有服务器的解决方案来在远程 marklogic 数据库`WebDAV`中加载文件？`xml`

错误：-

```
Invalid input: SVC-DIROPEN: xdmp:filesystem-directory("D:\Application\xml") -- Directory open error: FindFirstFile 'D:\Application\xml\*': The system cannot find the path specified.

[1.0-ml] SVC-FILOPN: xdmp:document-get("file://D:/Application/xml/ch001s001.xml", <options xmlns="xdmp:document-get"><encoding>UTF-8</encoding><repair>full</repair></options>) -- File open error: open '/Application/xml/ch001s001.xml': No such file or directory 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T10:01:03.317

我认为问题在于提到的目录仅存在于您的本地计算机上，而不存在于远程服务器上。xdmp:filesystem-* 以及诸如 xdmp:document-get 之类的函数查看相对于服务器的文件系统。因此，'c:\' 将指向服务器上的 c:\ 路径，而不是您的本地计算机。

您可以使用`HTTP` `PUT`or `POST`requests 将文件发送到 MarkLogic，但这需要能够处理此类请求的 XQuery 文件。其他可能更简单的选择包括设置`XDBC`服务器，以及使用 RecordLoader、xmlsh 等工具将文档推送到 MarkLogic。[您可以在http://developer.marklogic.com/](http://developer.marklogic.com/)找到这些。

！

PS：你反对使用`WebDAV`什么？周围有很多库可以使用`WebDAV`. 甚至还有 MarkLogic Ant 任务。

# c# - WCF 配置文件

> ID：13469356
> 
> 赞同：2
> 
> 时间：2012-11-20T08:41:25.197
> 
> 标签：c#, wcf, app-config

我创建了一个 WCF 服务，基本上它与我的数据库进行了一些交互。该服务在一个项目中，它从我在另一个项目中创建的库中调用函数。在我将调用 WCFSerivceLibrary 的库中，我还有一个 app.config，我想在 AppSettings 部分中提取一些存储的值。

问题是，当我从某个客户端调用我的 WCF 服务，并且在 WCFServiceLibrary 中执行一个函数时，每当我调用 AppSettings 时，它都会检查**调用客户端**的配置文件！

进一步说明：假设我们有一个 Windows 窗体应用程序，它以这种方式调用我的 WCF 服务：

```
MyWCFService.DoWork(); 
```

在我的 WCF 服务的 DoWork 函数中，我有以下代码：

```
Type DoWork ()
{
  //MyWCFServiceLibrary is a library in the same solution of the WCF Service.
  MyWCFServiceLibrary.DoWorkOne(); 
  MyWCFServiceLibrary.DoWorkTwo();
} 
```

在函数`DoWorkOne`或`DoWorkTwo`...我调用 AppSettings 以获取存储在 MyWCFServiceLibrary 项目的 app.config 中的一些值，但是，在执行时，AppSettings 是从调用 WCF 服务的 Windows 窗体客户端的 app.cofing 加载的.

1.  如何避免上述问题？
2.  我可以为我的 WCF 服务和服务库提供一个配置文件吗？
3.  如何在两者之间共享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:43:25.593

我在下面写下我关于复制配置的意思。但我不认为这是问题所在。问题可能是您甚至没有进行 WCF 通信。我怀疑您在服务项目和客户端项目中都包含了 DLL，并且您很简单地从客户端调用类上的方法。

做 WCF 通信，您需要让 WCF 服务运行（例如，创建`ServiceHost`带有端点的 EXE）。然后在客户端中，使用 Visual Studio 的“添加服务引用”菜单项添加服务引用。

无需在客户端中包含 DLL，因为将自动生成类以通过 WCF 访问服务。

**现在正确使用应用程序设置：**

`app.config`将 DLL文件的应用程序设置复制到使用 DLL 的`app.config`可执行项目的文件中。例如，这可能看起来像这样：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="Executable.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
            <section name="DLL.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />        
        </sectionGroup>
    </configSections>

  <applicationSettings>
      <Executable.Properties.Settings>
          <setting name="Test" serializeAs="String">
              <value>Testvalue EXE</value>
          </setting>
      </Executable.Properties.Settings>
      <DLL.Properties.Settings>
          <setting name="Test" serializeAs="String">
              <value>Testvalue DLL</value>
          </setting>
      </DLL.Properties.Settings>
    </applicationSettings>
</configuration> 
```

之后，应用程序可以通过`Properties.Settings.Default.Test`（返回`Testvalue EXE`）访问其设置，DLL 可以通过`Properties.Settings.Default.Test`（返回`Testvalue DLL`）访问其设置。

I don't understand why people need to use things like `ConfigurationManager` when it is actually that simple...

# ssis - Best practice to organize a 200+ tables import project

> ID：13469357
> 
> 赞同：1
> 
> 时间：2012-11-20T08:41:28.547
> 
> 标签：ssis, project-organization, ssis-data-flow

This question is going to be a purely organizational question about SSIS project best practice for medium sized imports.

So I have source database which is continuously being enriched with new data. Then I have a staging database in which I sometimes load the data from the source database so I can work on a copy of the source database and migrate the current system. I am actually using a SSIS Visual Studio project to import this data.

My issue is that I realised the actual design of my project is not really optimal and now I would like to move this project to SQL Server so I can schedule the import instead of running manually the Visual Studio project. That means the actual project needs to be cleaned and optimized.

So basically, for each table, the process is simple: truncate table, extract from source and load into destination. And I have about 200 tables. Extractions cannot be parallelized as the source database only accepts one connection at a time. So how would you design such a project?

I read from Microsoft documentation that they recommend to use one Data Flow per package, but managing 200 different package seems quite impossible, especially that I will have to chain for scheduling import. On the other hand a single package with 200 Data Flows seems unamangeable too...

* * *

Edit 21/11:

The first apporach I wanted to use when starting this project was to extract my table automatically by iterating on a list of table names. This could have worked out well if my source and destination tables had all the same schema object names, but the source and destination database being from different vendor (BTrieve and Oracle) they also have different naming restrictions. For example BTrieve does not reserve names and allow more than 30 characters names, which Oracle does not. So that is how I ended up manually creating 200 data flows with a semi-automatic column mapping (most were automatic).

When generating the CREATE TABLE query for the destination database, I created a reusable C# library containing the methods to generate the new schema object names, just in case the methodology could automated. If there was any custom tool to generate the package that could use an external .NET library, then this might do the trick.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T22:33:18.127

您是否研究过[BIDS Helper](http://bidshelper.codeplex.com/)的 BIML（商业智能标记语言）作为包生成工具？我用它来创建多个包，它们都遵循相同的基本截断-提取-加载模式。如果您需要比 BIML 内置的更聪明的东西，可以使用[BimlScript](http://bimlscript.com/GetStarted/AboutBimlScript)，它增加了将 C# 代码嵌入到处理中的能力。

根据您的问题描述，我相信您可以编写一个 BIML 文件并生成两百个单独的包。您可能可以使用它来生成一个包含两百个数据流任务的包，但我从未尝试过如此努力地推动 SSIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:00:58.647

You can basically create 10 child packages each having 20 data flow tasks and create a master package which triggers these child pkgs.Using [parent to child configuration](http://www.bidn.com/blogs/mikedavis/ssis/155/passing-variable-values-from-parent-package-to-child-ssis) create a single [XML file](http://www.simple-talk.com/sql/ssis/xml-configuration-files-in-sql-server-integration-services/) configuration file .Define the precedence constraint for executing the package in serial fashion in master pkg. In this way maintainability will be better compared to having 200 packages or single package with 200 data flow tasks.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:54:32.180

以下链接可能对您有用。

[用于暂存过程的单个 SSIS 包](http://sqlserverselect.blogspot.in/2011/03/single-ssis-package-staging-process.html)

希望这可以帮助！

# actionscript-3 - Add and Remove Item in list Binded Index focus incorrect

> ID：13469363
> 
> 赞同：0
> 
> 时间：2012-11-20T08:42:01.690
> 
> 标签：actionscript-3, apache-flex, flex3

I have a dataProvider from a list. The list has the selecteIndex Binded from a var -selectedDamageIdx. I am changing the selectedDamageIdx and more or less and at the same I move items arround in the list. When everything is over the index is not correct but the value on the selectedDamageIdx is correct. Any suggestions? I made sure the selectedDamageIdx is public and bindable. The Binding is done in mxml.

My list is a damage list. It uses a damage itemRenderer and a damage Object. Basically, what I am doing is: I have a thumbail with the same information as the list. When I drag something around in the thumbnail to move items, I want the list to update the item positions. I have a function called onChangePosition as following where I have access to the _from and _to positions. So I do the following:

```
if(_to > _from)     
{
    (damages.dataProvider as ArrayCollection).addItemAt(damage,_to);
    (damages.dataProvider as ArrayCollection).removeItemAt(_from);
     selectedDamageIdx = _to-1;//because of shift all the items between the _from and _to will move back one position. And the moved item will actually get the index to-1
}

else if (_from > _to)
{
    (damages.dataProvider as ArrayCollection).removeItemAt(_from);
    (damages.dataProvider as ArrayCollection).addItemAt(damage,_to);
    selectedDamageIdx = _to;
} 
```

This works fine on the thumbnail and the selectedDamageIdx gets the expected value. But, I think because of my add and remove operation the list selects the wrong item, and the selectedIndex is wrong. On the first case where _to > _from the selectedIndex on the list is one less than it should be. On the second case where _to < _from the selectedIndex is one more than it should be.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:47:56.933

好的，我找到的解决方案如下：

```
if(_to > _from)     
{
    (damages.dataProvider as ArrayCollection).addItemAt(damage,_to);
    damages.addEventListener(FlexEvent.UPDATE_COMPLETE,updateIndex);
    (damages.dataProvider as ArrayCollection).removeItemAt(_from);    
}
else if (_from > _to)
{
    (damages.dataProvider as ArrayCollection).removeItemAt(_from);
    damages.addEventListener(FlexEvent.UPDATE_COMPLETE,updateIndex);
    (damages.dataProvider as ArrayCollection).addItemAt(damage,_to);
} 
```

然后在更新索引上：

```
 damages.removeEventListener(FlexEvent.UPDATE_COMPLETE,updateIndex);
    if(_to > _from)     
        selectedDamageIdx = _to-1;    
    else if (_from > _to)
        selectedDamageIdx = _to; 
```

由于不仅列表已被刷新，而且组件也已经看到并更新了它的显示列表，因此绑定工作。希望这会帮助某人。

# android - save video using ffmpegframerecorder android

> ID：13469372
> 
> 赞同：2
> 
> 时间：2012-11-20T08:42:31.620
> 
> 标签：android, opencv

I am trying to save this video and getting this error.

**i have added two jar file** 1) javacv 2) javacpp

and for **camera preview** i have used **opencv**.

here i am adding code.

` public void run() {

```
 while (true) {
                Bitmap bmp = null;

                synchronized (this) {
                    if (mCamera == null)
                        break;

                    if (!mCamera.grab()) {
                        Log.e(TAG, "mCamera.grab() failed");
                        break;
                    }

                    bmp = processFrame(mCamera);

                    if(isRecording)
                    {
                        ByteBuffer buffer = ByteBuffer.allocate(bmp.getRowBytes()*bmp.getHeight());
                        bmp.copyPixelsFromBuffer(buffer);
                        try {
                            recorder.record(buffer);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                    }
                }

                if (bmp != null) {
                    Canvas canvas = mHolder.lockCanvas();
                    if (canvas != null) 
                    {
                        Matrix matrix = new Matrix();

                        matrix.preTranslate((canvas.getWidth() - getFrameWidth())/2, (canvas.getHeight() - getFrameHeight())/2);

                        if(getResources().getConfiguration().orientation ==  Configuration.ORIENTATION_PORTRAIT)
                        matrix.postRotate(90f,(canvas.getWidth()) / 2,(canvas.getHeight()) / 2);
                        canvas.drawBitmap(bmp, matrix, new Paint());
                        mHolder.unlockCanvasAndPost(canvas);
                    }
                    bmp.recycle();
                }
            }

            Log.i(TAG, "Finishing processing thread");
        }

     // For Recording File
        public boolean prepareVideoRecorder() 
        {

            recorder = new FFmpegFrameRecorder(getOutputMediaFile(MEDIA_TYPE_VIDEO).toString(), getFrameWidth(), getFrameHeight());

            recorder.setVideoCodec(avcodec.AV_CODEC_ID_MJPEG);
            recorder.setPixelFormat(avutil.PIX_FMT_YUV420P);
            recorder.setAudioCodec(avcodec.AV_CODEC_ID_PCM_S16LE); 
            try {
                recorder.start();
            } catch (Exception e) 
            {
                return false;
            } 
            return true;
        }` 
```

and i am getting this error..

11-20 13:47:09.349: ERROR/AndroidRuntime(4954): FATAL EXCEPTION: main 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): java.lang.ExceptionInInitializerError 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.googlecode.javacv.FFmpegFrameRecorder.(FFmpegFrameRecorder.java:119) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.googlecode.javacv.FFmpegFrameRecorder.(FFmpegFrameRecorder.java:112) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.boomalaya.moovix.CameraPreview$Preview.prepareVideoRecorder(CameraPreview.java:454) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.boomalaya.moovix.CameraPreview$2.onClick(CameraPreview.java:172) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at android.view.View.performClick(View.java:2485) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at android.view.View$PerformClick.run(View.java:9080) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at android.os.Handler.handleCallback(Handler.java:587) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at android.os.Handler.dispatchMessage(Handler.java:92) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at android.os.Looper.loop(Looper.java:130) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at android.app.ActivityThread.main(ActivityThread.java:3687) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at java.lang.reflect.Method.invokeNative(Native Method) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at java.lang.reflect.Method.invoke(Method.java:507) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at dalvik.system.NativeStart.main(Native Method) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): Caused by: java.lang.ExceptionInInitializerError 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at java.lang.Class.classForName(Native Method) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at java.lang.Class.forName(Class.java:234) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.googlecode.javacpp.Loader.load(Loader.java:338) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.googlecode.javacv.cpp.avformat.(avformat.java:76) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): ... 15 more 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): Caused by: java.lang.ExceptionInInitializerError 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at java.lang.Class.classForName(Native Method) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at java.lang.Class.forName(Class.java:234) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.googlecode.javacpp.Loader.load(Loader.java:338) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.googlecode.javacv.cpp.avcodec.(avcodec.java:86) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): ... 19 more 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load jniavutil: findLibrary returned null 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at java.lang.Runtime.loadLibrary(Runtime.java:429) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at java.lang.System.loadLibrary(System.java:554) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:448) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.googlecode.javacpp.Loader.load(Loader.java:372) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.googlecode.javacpp.Loader.load(Loader.java:319) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): at com.googlecode.javacv.cpp.avutil.(avutil.java:75) 11-20 13:47:09.349: ERROR/AndroidRuntime(4954): ... 23 more

can anyone help me out on this..

# java - 如何在 java ee 应用程序的 web.xml 文件中的安全约束中指定端口设置

> ID：13469373
> 
> 赞同：-2
> 
> 时间：2012-11-20T08:42:31.807
> 
> 标签：java, jakarta-ee, https, web.xml

出于某种原因，我想在此处指定端口设置，所以请告诉我是否有任何标记可用于在此处提及端口

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>securedapp</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:35:25.703

我认为没有机会。

向端口添加监听器是容器的职责。容器配置可以更改，那么您的 Web 应用程序应该做什么？例如，如果容器将端口从 8443 更改为 9443，您的应用程序就会被破坏。

因此，在您的 Web 应用程序中，无法定义端口（它超出了 Web 应用程序的范围）。

顺便说一句，您为什么要修复 Web 应用程序中的端口？

# java - Solr查询如何读取分组值？

> ID：13469375
> 
> 赞同：1
> 
> 时间：2012-11-20T08:42:41.547
> 
> 标签：java, solr, solrj

我正在尝试对我的文档进行分组，但我不明白如何进行组合查询。例子：

```
<doc1>
<id>1</id>
<myid>1</myid>
<name>test</name>
</doc1>

<doc2>
<id>2</id>
<myid>1</myid>
<name>test2</name>
</doc2> 
```

当我在 myid 上分组时，我只得到 1 个例外的组结果。但我想知道如何获得该组的名称列表。

就像是：

```
<Response>
<doc>
<id>1,2</id>
<myid>1</myid>
<name>test1,test2</name>   //this
</doc> 
```

我正在使用的查询：

```
 SolrQuery sq = new SolrQuery();
        sq.setQuery("*:*");
        sq.setStart(0);
        sq.setRows(100);
        sq.setParam("group", true);
        sq.setParam("group.field","myid"); 
```

**我不知道如何阅读 groupresponse 以获取该分组项目的名称值？**

我注意到有一个设置 group.limit 和 group.offset 的选项可以让我获得多个结果。但我仍然想知道是否有可能获得“名称”字段的列表。我想我需要在小组结果中显示名称，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:58:42.413

如果你有 Solr 源代码 参考`QueryResponseTest.java`JUnit 和`testGroupResponse()`方法

[SOLR-2637](https://issues.apache.org/jira/browse/SOLR-2637)从 3.4 开始应用。

还请查看补丁[SOLR-2637.patch](https://issues.apache.org/jira/secure/attachment/12488314/SOLR-2637.patch)。

# java - How far to move an object by distance and angle in Android

> ID：13469376
> 
> 赞同：3
> 
> 时间：2012-11-20T08:42:43.473
> 
> 标签：java, android, math, game-physics

I'm making a simple Android tablet game and am stuck at a seemingly simple math problem.

I have a touchpad that generates the angle your finger is touching from the center. This is based on 0 degrees is at 3-oclock and is working fine.

![Touchpoint](../Images/c36d8a434c05224193e4029857ae728e.png)

With my finger on 45 degrees, I want to fire an object off from a given point at that angle, knowing the item can travel 150 pixels in range. My math son tells me the formula but I believe it figures coordinates based on 0,0 being the bottom left where as 0,0 is top left.

His math is this:

```
xDirection = range(hypotenuse) * Math.cos(angle);
yDirection = range(hypotenuse) * Math.sin(angle); 
```

This math however returns some very abnormal results. If I'm at a perfect 0 degrees the math is right, it tells me the xDirection is 100 which is my range and yDirection is 0\. If I am at 90 degrees it gives me an xDirection of -44 and a yDirection of 89.

My xDirection and yDirection represent how many pixels on the x and y axis my bullet will need to travel to fulfill its range at the angle my touch pad is at.

This is probably simple math for others but I'm lost! Any help would be SUPERB!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:04:55.263

我确定了我的问题！

最重要的是，我不知道的是，Y 因子必须颠倒。

另外，因为 Math.cos 和 Math.sin 正在寻找弧度，所以它失败了，因为我正在输入从 Math.toDegrees(); 返回的文字度数值；

因此，在将数学更改为以下内容后：

```
xDirection = range(hypotenuse) * Math.cos(Math.toRadians(angle));
yDirection = -range(hypotenuse) * Math.sin(Math.toRadians(angle)); 
```

一切都很好。再次注意 y 坐标是颠倒的，因为一般数学将 0,0 放在左下角。我们的屏幕坐标 0,0 作为左上角。

# c# - 代码合同：如何表达这些条件？

> ID：13469379
> 
> 赞同：4
> 
> 时间：2012-11-20T08:43:04.940
> 
> 标签：c#, code-contracts, specifications

我目前正在玩代码合同，我不完全确定合同类的静态方法是否强大到足以与条件的数学符号竞争。

假设我们有一个简单的阶乘方法

```
int Factorial(int n); 
```

我将表达以下条件：

```
Precondition:
n >= 0

Postconditions:
Factorial(n) = 1, in case n = 0
Factorial(n) = n*(n-1)*...*1, in case n > 0 
```

这些条件以简洁明了的方式清楚地指定了 Factorial 的行为。我的问题是，它们是否可以通过代码合同来表达。

前提是微不足道的：

```
Contract.Requires(n >= 0) 
```

条件后置条件可以用

```
if(n==0)
    Contract.Ensures(Contract.Result<int>() == 1);
if(n > 0)
    ... 
```

但我不喜欢这里需要“if”语句的方式，因为它使前置条件和后置条件的简单列表更难阅读。我希望我们会有类似的东西

```
Contract.Ensures(...).InCase(...); 
```

最后但并非最不重要的一点是，我不知道如何表达这一点，这是关于数学的常见符号：

```
n*(n-1)*...*1 
```

我猜我需要某种循环，但这会复制整个实现。有什么聪明的方法来表达这样的符号吗？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:50:17.137

您正在寻找的是单元测试，而不是代码合同。

通常，检查类似于`if n=0, then f(n) = 1`并且`if n=3, then f(n) = 6`是应该表示为单元测试的测试用例。

在您的情况下，我认为合适的后置条件类似于“*结果始终 >= 1* ”。仅此而已。

假设您的阶乘类看起来像这样：

```
public class Factorial
{
    public int Compute(int n)
    {
        if (n == 0)
            return 1;

        return n * Compute(n - 1);
    }
} 
```

[使用NUnit 框架](http://www.nunit.org/)编写的合适的单元测试将是：

```
[TestFixture]
public class FactorialTests
{
    [TestCase(0, 1)]
    [TestCase(1, 1)]
    [TestCase(2, 2)]
    [TestCase(7, 5040)]
    [TestCase(10, 3628800)]
    public void Compute_ReturnsCorrectResult(int n, int expectedResult)
    {
        var sut = new Factorial();

        Assert.AreEqual(expectedResult, sut.Compute(n));
    }
} 
```

**更新（评论后）**

> 陈述结果 >= 1 并没有完全指定算法。

我不认为 Code Contract 的工作是详细指定算法。算法由方法指定。

如果代码契约是一个复杂的逻辑，就像方法本身一样，那么我想我们需要一个代码契约契约来验证代码契约是否执行了正确的检查。这显然会导致无限递归。

> 没想到`n*(n-1)*...*1`会被编译器接受。但是一些 LINQ 风格的通用范围运算符肯定会是一个很好的补充，例如 From(n).To(1).Product() 或 From(n).To(m).Sum()

如果有这种表达阶乘的形式（可能有），你当然可以在你的代码中使用它，而不是代码契约。

**更新 2**

只是为了好玩，我发现了一种计算阶乘的 LINQ 方法：

```
Enumerable.Range(1, n == 0 ? 1 : n).Aggregate((a, i) => a * i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:37:16.170

您可以尝试以下操作：

```
Contract.Ensures(Contract.Result<int>() == AlternativeFactorial(n)); 
```

哪里`AlternativeFactorial`是：

```
[Pure]
public static int AlternativeFactorial(int n)
{
    if(n==0)
        return 1;
    if(n > 0)
    {
        //Alternative implementation.
    }
} 
```

当然，您在合同中使用的任何东西都应该是无副作用的（纯的）。

现在就阶乘实现而言，我想不出比 w0lf 更紧凑的“替代”实现。您应该考虑的是将方法的返回值从 int 更改为[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)。阶乘可以很快变得非常大。另请注意，通过在阶乘值上添加后置条件，您的方法返回结果所需的时间几乎会增加一倍。这可以通过`CodeContracts`仅在调试配置上构建来解决。

# c - How to make generic function using void * in c?

> ID：13469381
> 
> 赞同：18
> 
> 时间：2012-11-20T08:43:11.727
> 
> 标签：c, void-pointers

I have an `incr` function to increment the value by `1` I want to make it generic,because I don't want to make different functions for the same functionality.

Suppose I want to increment `int`,`float`,`char` by `1`

```
void incr(void *vp)
{
        (*vp)++;
} 
```

But the problem I know is `Dereferencing a void pointer is undefined behaviour`. Sometimes It may give error :`Invalid use of void expression`.

My `main` funciton is :

```
int main()
{

int i=5;
float f=5.6f;
char c='a';

incr(&i);
incr(&f);
incr(&c);

return 0;
} 
```

The problem is how to solve this ? Is there a way to solve it in `C`only

or

will I have to define `incr()` for each datatypes ? if yes, then what's the use of `void *`

Same problem with the `swap()` and `sort()` .I want to swap and sort all kinds of data types with same function.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T09:03:06.130

您可以将第一个实现为宏：

```
#define incr(x) (++(x)) 
```

当然，如果您不小心，这可能会产生令人不快的副作用。这是关于 C 提供的唯一一种方法，用于将相同的操作应用于各种类型中的任何一种。特别是，由于宏是使用文本替换实现的，所以当编译器看到它时，您只有文字代码`++whatever;`，它可以`++`正确地应用于您提供的项目类型。使用指向 void 的指针，您对实际类型知之甚少（如果有的话），因此您无法对该数据进行太多直接操作）。

`void *`通常在所讨论的函数不需要知道所涉及数据的确切类型时使用。在某些情况下（例如，`qsort`），它使用回调函数来避免必须知道数据的任何细节。

由于它同时进行排序和交换，让我们更详细地看一下 qsort。它的签名是：

```
void qsort(void *base, size_t nmemb, size_t size,
           int(*cmp)(void const *, void const *)); 
```

所以，第一个是`void *`你问的——一个指向要排序的数据的指针。第二个告诉 qsort 数组中元素的数量。第三，数组中每个元素的大小。最后一个是指向可以比较单个项目的函数的指针，因此`qsort`不需要知道如何执行此操作。例如，在 qsort 内部的某处将有一些类似的代码：

```
// if (base[j] < base[i]) ...
if (cmp((char *)base+i, (char *)base+j) == -1) 
```

同样，要交换两个项目，它通常会有一个本地数组用于临时存储。然后它将字节从复制`array[i]`到它的临时，然后从`array[j]`到`array[i]`，最后从`temp`到`array[j]`：

```
char temp[size];

memcpy(temp, (char *)base+i, size);              // temp = base[i]
memcpy((char *)base+i, (char *)base+j, size);    // base[i] = base[j]
memcpy((char *)base+j, temp, size);              // base[j] = temp 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-20T08:54:44.070

使用`void *`不会给你多态行为，这是我认为你正在寻找的。 `void *`只是允许您绕过堆变量的类型检查。为了实现实际的多态行为，您必须将类型信息作为另一个变量传递并在`incr`函数中检查它，然后将指针转换为所需的类型，或者通过将数据上的任何操作作为函数指针传递（其他人提到`qsort`举个例子）。C 语言没有内置的自动多态性，因此您可以模拟它。在幕后，内置多态性的语言正在幕后做类似的事情。

详细地说，`void *`是一个指向通用内存块的指针，它可以是任何东西：int、float、string 等。内存块的长度甚至不存储在指针中，更不用说数据的类型了. 请记住，在内部，所有数据都是位和字节，而类型实际上只是逻辑数据如何物理编码的标记，因为本质上，位和字节是无类型的。在 C 中，这些信息不与变量一起存储，因此您必须自己将其提供给编译器，以便它知道是否应用操作将位序列视为 2 的补码整数、IEEE 754 双精度浮点数、ASCII 字符数据、功能等；这些都是针对不同类型数据的格式和操作的特定标准。当你施放一个`void *`指向特定类型的指针，作为程序员，*您*断言指向的数据实际上是您将其转换为的类型。否则，您可能会出现奇怪的行为。

那么有什么`void *`好处呢？它适用于处理不考虑类型的数据块。这对于诸如内存分配、复制、文件操作和传递指向函数的指针之类的事情是必要的。然而，在几乎所有情况下，C 程序员通过使用具有内置操作的类型来构造数据，尽可能地从这种低级表示中抽象出来；或使用结构，对这些结构的操作由程序员定义为函数。

您可能需要[查看 Wikipedia 解释](http://en.wikipedia.org/wiki/Void_pointer#C_and_C.2B.2B)以获取更多信息。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-20T09:01:21.760

你不能完全按照你的要求去做——像增量这样的运算符需要使用特定的类型。所以，你*可以*这样做：

```
enum type { 
    TYPE_CHAR,
    TYPE_INT,
    TYPE_FLOAT
};

void incr(enum type t, void *vp)
{
    switch (t) {
        case TYPE_CHAR:
        (*(char *)vp)++;
        break;

        case TYPE_INT:
        (*(int *)vp)++;
        break;

        case TYPE_FLOAT:
        (*(float *)vp)++;
        break;
    }
} 
```

然后你会这样称呼它：

```
int i=5;
float f=5.6f;
char c='a';

incr(TYPE_INT, &i);
incr(TYPE_FLOAT, &f);
incr(TYPE_CHAR, &c); 
```

当然，除了定义单独`incr_int()`的 ,`incr_float()`和`incr_char()`函数之外，这并没有真正给你任何东西——这不是`void *`.

`void *`当您编写的算法不关心对象的真实类型时，目的就实现了。一个很好的例子是标准的排序函数`qsort()`，它被声明为：

```
void qsort(void *base, size_t nmemb, size_t size, int(*compar)(const void *, const void *)); 
```

这可用于对任何类型对象的数组进行排序——调用者只需要提供一个可以比较两个对象的比较函数。

你的`swap()`和`sort()`函数都属于这一类。 `swap()`甚至更容易 - 该算法不需要知道除了对象的大小之外的任何东西来交换它们：

```
void swap(void *a, void *b, size_t size)
{
    unsigned char *ap = a;
    unsigned char *bp = b;
    size_t i;

    for (i = 0; i < size; i++) {
        unsigned char tmp = ap[i];

        ap[i] = bp[i];
        bp[i] = tmp;
    }
} 
```

现在给定任何数组，您可以交换该数组中的两个项目：

```
int ai[];
double ad[];

swap(&ai[x], &ai[y], sizeof(int));
swap(&di[x], &di[y], sizeof(double)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T08:51:14.117

*使用“通用”交换的示例。*

此代码交换两个内存块。

```
void memswap_arr(void* p1, void* p2, size_t size)
{      
      size_t         i;
      char* pc1= (char*)p1;
      char* pc2= (char*)p2;
      char  ch;

      for (i= 0; i<size; ++i) {
        ch=     pc1[i];
        pc1[i]= pc2[i];
        pc2[i]= ch;
      }
} 
```

你这样称呼它：

```
int main() {
     int i1,i2;
     double d1,d2;
     i1= 10; i2= 20;
     d1= 1.12; d2= 2.23;
     memswap_arr(&i1,&i2,sizeof(int));     //I use memswap_arr to swap two integers
     printf("i1==%d i2==%d \n",i1,i2);     //I use the SAME function to swap two doubles
     memswap_arr(&d1,&d2,sizeof(double));      
     printf("d1==%f d2==%f \n",d1,d2);
     return 0;
} 
```

我认为这应该让您了解如何将一个函数用于不同的数据类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-05T08:52:22.660

抱歉，如果这可能无法回答广泛的问题“**如何在 c 中使用 void * 制作通用函数？** ”.. 但您似乎遇到的问题（增加任意类型的变量，并交换 2 个变量未知类型）使用宏比函数和指向 void 的指针更容易完成。

增量很简单：

```
#define increment(x) ((x)++) 
```

对于交换，我会做这样的事情：

```
#define swap(x, y)                  \
({                                  \
        typeof(x) tmp = (x);        \
        (x) = (y);                  \
        (y) = tmp;                  \
}) 
```

...根据我的测试，它适用于整数、双精度和字符指针（字符串）。

虽然递增宏应该非常安全，但交换宏依赖于`typeof()`运算符，它是 GCC/clang 扩展，不是标准 C 的一部分（如果你真的只使用 gcc 或 clang 编译，这不应该太多的一个问题）。

我知道那种回避了原来的问题；但希望它仍然可以解决您最初的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-23T14:16:20.940

您可以使用类型通用工具（C11 标准）。如果您打算使用更高级的数学函数（比`++`运算符更高级），您可以转到`<tgmath.h>`，这是 和 中函数的类型泛型`<math.h>`定义`<complex.h>`。

您还可以使用`_Generic`关键字将类型泛型函数定义为宏。下面是一个例子：

```
#include <stdio.h>

#define add1(x) _Generic((x), int: ++(x), float: ++(x), char: ++(x), default: ++(x))

int main(){
  int i = 0;
  float f = 0;
  char c = 0;

  add1(i);
  add1(f);
  add1(c);

  printf("i = %d\tf = %g\tc = %d", i, f, c);
} 
```

[您可以在Rob 的编程博客](http://www.robertgamble.net/2012/01/c11-generic-selections.html)中的这篇文章中找到有关[语言标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)的更多信息和更复杂的示例。

至于`* void`, swap 和 sort 问题，最好参考[Jerry Coffin](https://stackoverflow.com/a/13469686/9256892)的回答。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-20T08:54:28.023

您应该在取消引用之前将指针转换为具体类型。所以你还应该添加代码来传递指针变量的类型。

# html - center table in HTML

> ID：13469383
> 
> 赞同：8
> 
> 时间：2012-11-20T08:43:50.760
> 
> 标签：html, alignment, html-table

How can I center the `table` within a `div` using html?

I have placed my content within a `div` tag and set the `text-align` attribute to `center` like the following.

```
text-align: center; 
```

This has not worked.

Below is my html.

```
<html>
    <body>
        <div style="text-align:center">
            <p>
    text test
            </p>
            <table border="1">
                <tr>
                    <td>100</td>
                    <td>200</td>
                    <td>300</td>
                </tr>
                <tr>
                    <td>400</td>
                    <td>500</td>
                    <td>600</td>
                </tr>
            </table>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-20T08:46:21.813

为表格指定宽度，并水平设置边距自动。

```
table {
  width:500px;
  margin: 10px auto;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T08:46:19.520

试试下面

```
<table style="margin:0px auto; width:500px"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-02T20:37:12.457

```
<div style="text-align:center">    
   <table style="display: inline-table;">    
   </table>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T08:48:58.513

编辑表格标签，如下所示

```
 <table border="1" align="center"> 
```

然后检查。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T08:53:14.750

```
<html>
<body>
<div style="text-align:center">
<p>
    text test
</p>
<table border="1" style="margin: 0 auto;">
<tr>
    <td>100</td>
    <td>200</td>
    <td>300</td>
</tr>
<tr>
    <td>400</td>
    <td>500</td>
    <td>600</td>
</tr>
</table>
</div>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T08:47:03.900

而不是`<div style="text-align:center">`你可以写`<div style="width:600px;margin:0 auto">`
which 给你一个宽度为 600 像素的 div 并将 div 居中在父元素中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-20T08:47:38.127

添加`margin: 0px auto`到您的`table`标签

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-20T08:48:28.117

您可以将样式放在表格中

```
<table border="1" style="margin:0 auto;"> 
```

但是我建议您使用样式表而不是内联样式

# grails - How do I know if Grails domain POJO was changed since its retrieval?

> ID：13469384
> 
> 赞同：1
> 
> 时间：2012-11-20T08:43:56.420
> 
> 标签：grails, grails-orm

I am patching a domain object in my code. At the end, I need to save the object but only if it has been actually changed. Is it possible to avoid custom boolean flags having code like that?

```
User user = User.find(...)
if(maybe)
  user.name = "John"
if(user.changed())
  user.save() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:35:08.827

您可以使用[isDirty](http://grails.org/doc/2.1.1/ref/Domain%20Classes/isDirty.html)进行此检查。

```
if(user.isDirty() && user.save()) {
  // user saved successfully
} 
```

# sql - Many to Many and Composite Primary Key and Foreign Key

> ID：13469385
> 
> 赞同：0
> 
> 时间：2012-11-20T08:44:00.680
> 
> 标签：sql, sql-server, foreign-keys, composite-primary-key, sql-server-2012-express

I am building a system where there are properties and prospects, I have a table for both, but as I see this as a many to many relationship, I have created a table called prospect_property with two columns prospect_id and property_id, these are both/composite primary key(s).

What I am having problems with is setting the foreign keys and binding it all together. I figure the composite key should be the foreign key on the other two tables (or is it the other way around), but when trying to create that relationship in Management Studio, I have to reference one to one field, but I have one vs. two...

How am I supposed to set the relationship between these tables so that I for a prospect can see all properties and for a property can see all prospects?

SQL SERVER 2012 (Express)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:27:14.647

1 Property --> 几个prospect_property（两边ProspectId上的链接）
1 Prospect --> 几个prospect_property（两边ProspectId上的链接）

属性：ProspectId 是 PK
Prospect：ProspectId 是 PK前景 _property
：由 PropertyId 和 ProspectId 组成的复合 PK

仅此而已。其余的将通过构建一些将所有这些链接在一起的视图来完成。

# roles - Roles and Permission on dashboard enterprise edition

> ID：13469387
> 
> 赞同：3
> 
> 时间：2012-11-20T08:44:04.970
> 
> 标签：roles, pentaho

Development Tool: Pentaho 4.5 enterprise edition

I have one issue regarding roles and permission.

I have one dashboard(enterprise one), i have added three prompts say p1, p2 and p3\. Data in p1 and p3 is coming directly from DB (i.e. they are not dependent on any other parameter) whereas p2 have dependency in p1\. In short we are trying to achieve cascading thing in our prompt section.

1.  firstly i signed in as joe having roles(Admin, Authenticated and ceo). I can do cascading easily.

2.  Then i signed in as suzy (Authenticated and cto). I can see data in p1 and p3\. However I am not able to see anything on p2.

As i am able to do cascading thing as joe (in short any user with Role Admin) not as suzy..

So suggest me any possible solution.. coz as per our requirement there will be some user those will have only Authenticated / cto role.. so the cascading should work for all user, not just for user with role Admin.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:55:58.787

尝试验证 p2 中每个内容的共享选项或权限。您能在 p2 中找到并查看原始报告（内容）吗？您可以在以 joe 身份登录时找到它。

# c++ - 调试 OpenGL：是否有用于矩阵和向量（mat3、mat4、vec3 和 c）的 toString() 功能

> ID：13469391
> 
> 赞同：0
> 
> 时间：2012-11-20T08:44:19.847
> 
> 标签：c++, opengl, glut, opengl-3

我正在调试一个 OpenGL 程序：

矩阵和向量（mat3、mat4、vec3 和 c）是否有某种 toString() 功能？

我试图避免使用 cout 或 printf 构建嵌套的 for 循环。

但如果这是唯一的方法，我很想听听有关最佳实践的建议。我对 C++ 很陌生，很想听听。

真正酷的是输出到 laTeX / ConTeXt 日志文件。

这导致了问题的更扩展版本：这些对象是否有一些反射功能？我想知道我感兴趣的特定矩阵是指定列优先还是行优先，它的父类是什么/在哪里，&c。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:05:36.383

为您的矩阵/向量类重载 ofstream << 运算符，然后按照您想要的方式对其进行格式化，即输出 << "(" << vector.x << " "、" << vector.y << 等。然后在你的主程序你可以简单地做 std::cout << myVector << std::endl;

[http://www.learncpp.com/cpp-tutorial/93-overloading-the-io-operators/](http://www.learncpp.com/cpp-tutorial/93-overloading-the-io-operators/)

该链接显示了如何实现它

# c++ - C++ linking shared object lib including static boost lib and dynamic boost lib together

> ID：13469395
> 
> 赞同：0
> 
> 时间：2012-11-20T08:44:24.330
> 
> 标签：c++, segmentation-fault, shared-libraries, static-libraries, boost-thread

I am currently writing an application in C++ using an API to grab images from a camera. This API is a shared object and was build using the static boost thread lib (v1.40).

In my application I also want to use the boost threads, but when I link boost thread (v1.51) dynamically into my application, the API calls the boost thread function from the dynamically linked version and I get a segmentation fault.

Is there a way, maybe a linker option, where I can fix this problem so that the API will use the included static linked version anyway or is the only way to solve this using the same versions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:50:56.200

如果图像共享库中的 boost 符号被导出，当您在链接步骤中省略 boost 库时，它*可能会起作用。*

但最有可能 1\. 符号未导出 2\. 图像库仅包含 boost 的一部分，这是他们的任务所需要的。

如果可能的话，使用 boost 的动态版本重新编译图像库是最简单的。

# c++ - 用泛型类型替换模板化函数指针

> ID：13469401
> 
> 赞同：2
> 
> 时间：2012-11-20T08:45:05.487
> 
> 标签：c++, templates, pointers

我为 and 编写了以下包装`std::bind`器`std::queue`：

```
#include "Queue.h"

template<class T>
Queue<T>::Queue(T* input)
{
    instance = input;
}

template<class T> template<typename... Args>
int Queue<T>::push(int (T::*func)(Args... args), Args... args)
{
    queue.push(std::bind(func, instance, args...));
    return queue.size();
}

template<class T>
int Queue<T>::pop()
{
    if(!queue.empty())
    {
        queue.front()();
        queue.pop();
        return queue.size();
    }
    return 0;
}

template<class T>
bool Queue<T>::empty()
{
    return queue.empty();
}

template<class T>
size_t Queue<T>::size()
{
    return queue.size();
} 
```

带有以下标题：

```
#ifndef QUEUE_H_
#define QUEUE_H_

#include <functional>
#include <queue>

template <class T>
class Queue
{
    private:
        std::queue<std::function<void()>> queue;    /**< the messaging queue, appended to using enqueue(), popped from using dequeue() */
        T* instance;

    public:

        Queue(T*);

        template<typename... Args>
        int enqueue(int (T::*f)(Args... args), Args... args);

        int dequeue();

        bool empty();

        size_t size();
};

#endif 
```

它允许我将绑定函数表达式添加到队列中，然后将它们弹出（`queue->push<int>(&Object::jumpAround, 10);`和`queue->pop()`）。问题是，我找不到一个通用的对象和函数指针，使我能够在没有`<class T>`模板的情况下实现它。

我知道使用模板可能是这里最安全和最好的方法，但由于实现此队列的代码设计，我需要摆脱它。有任何想法吗？

我想这一定是可能的，因为`std::bind`' 的第一个参数可以是任何函数，第二个参数可以是任何对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:12:26.557

如果我理解，以下是您需要的：

```
class Queue
{
private:
  std::queue<std::function<void()>> queue;    /**< the messaging queue, appended to using enqueue(), popped from using dequeue() */
public:

  // pass in the instance of the object and simply allow the compiler to deduce the function pointer nastiness...
  template<typename T, typename F, typename... Args>
  void enqueue(T instance, F func, Args... args)
  {
    queue.push(std::bind(func, instance, args...));
  }

  int dequeue()
  {
    if(!queue.empty())
    {
      queue.front()();
      queue.pop();
    }
  }
}; 
```

哦以及如何使用它：

```
struct foo
{
  void bar(int a)
  {
    std::cout << "foo::bar: " << a << std::endl;
  }
};

struct bar
{
  void foo(int a, int c)
  {
    std::cout << "bar::foo: " << (a  + c)<< std::endl;
  }
};

int main(void)
{
  Queue q;
  foo f;
  bar b;
  q.enqueue(&f, &foo::bar, 10);
  q.enqueue(&b, &bar::foo, 10, 11);

  q.dequeue();
  q.dequeue();
} 
```

应该输出：

```
foo::bar: 10
bar::foo: 21 
```

或者，更好的是，更改您的函数签名并允许用户将`std::function`! 这是“正常”的方式（例如，参见`boost::asio::io_service::post`.）

编辑：这是一个简单的例子：

```
// Let the compiler do all the hard work for you..
template<typename T>
void enqueue(T f)
{
  queue.push(f);
} 
```

现在将任何功能发布到此队列...

```
// Here you are posting the functor itself...
q.enqueue(std::bind(&bar::foo, &b, 15, 12)); 
```

# java - Trying to save SQLite db to sdcard

> ID：13469402
> 
> 赞同：0
> 
> 时间：2012-11-20T08:45:08.467
> 
> 标签：java, android, sqlite

> **Possible Duplicate:**
> [Moving my db to sd card not working](https://stackoverflow.com/questions/13361377/moving-my-db-to-sd-card-not-working)

I'm trying to save a sqlite file to my sdcard. I'm using the code from this [question](https://stackoverflow.com/questions/1995320/how-to-backup-database-file-to-sdcard-on-android)

```
 try {
    File sd = Environment.getExternalStorageDirectory();
    File data = Environment.getDataDirectory();

    if (sd.canWrite()) {
        String currentDBPath = "\\data\\com.test.mytest\\databases\\test_db";
        String backupDBPath = "test_db";
        File currentDB = new File(data, currentDBPath);
        File backupDB = new File(sd, backupDBPath);

        if (currentDB.exists()) {
            FileChannel src = new FileInputStream(currentDB).getChannel();
            FileChannel dst = new FileOutputStream(backupDB).getChannel();
            dst.transferFrom(src, 0, src.size());
            src.close();
            dst.close();
        }
    }
} catch (Exception e) {
} 
```

This is a very highly rated answer, so I would think it should work pretty simply. I get no errors in logcat. I don't see any created directory/created files. I also have the "write to external" permission in my manifest.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:31:42.927

文件 sd = Environment.getExternalStorageDirectory(); 文件数据 = Environment.getDataDirectory();

```
 if (sd.canWrite()) {
             String currentDBPath = "/data/packagename/databases/DATABASENAME";
             String backupDBPath = "/backup/"+"main.db";
             File currentDB = new File(data, currentDBPath);
             File backupDB = new File(sd, backupDBPath);

             if (currentDB.exists()) {
                 FileChannel src = new FileInputStream(currentDB).getChannel();
                 FileChannel dst = new FileOutputStream(backupDB).getChannel();
                 dst.transferFrom(src, 0, src.size());
                 src.close();
                 dst.close();
             } else {
                 Log.e(TAG, "File does not exist: " + currentDBPath);
             } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:27:20.223

不要忘记在 amnifest 文件中声明权限

使用权限 android:name="android.permission.WRITE_EXTERNAL_STORAGE"

# php - 定期更新状态

> ID：13469403
> 
> 赞同：-3
> 
> 时间：2012-11-20T08:45:08.733
> 
> 标签：php, mysql, ajax, updates

如何定期更新状态？例如当用户发表评论时，时间显示在评论下方；

```
 Some comment
     1 minute ago 
```

1小时后，我想喜欢它；

```
 Some comment
    1 hour ago 
```

我可以用 PHP 和 MySQL 做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:58:35.917

你所追求的是“人性化”时差

如果您想使用 javascript 执行此操作，因此您不需要执行 ajax 来一遍又一遍地重新加载值：http: [//momentjs.com/docs/](http://momentjs.com/docs/)

如果您想使用 PHP 执行此操作，请查看以下代码段： [https ://gist.github.com/1053741](https://gist.github.com/1053741)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:54:06.840

当用户写评论时，您可以将 current_timestamp 保存在您的 mysql-db 中。稍后您可以显示该查询并使用 php-time 函数对其进行操作（您获得了用户发布命令的时间，并且您获得了当前时间，进行数学运算）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:57:48.890

您可以查看这个轻量级 jquery 库来进行时间操作。

[http://momentjs.com/](http://momentjs.com/)

# jquery - JQuery/JQuery-ui 和 Internet Explorer 9：change、isvisible、datepicker 和 timepicker 不起作用

> ID：13469405
> 
> 赞同：1
> 
> 时间：2012-11-20T08:45:16.463
> 
> 标签：jquery, jquery-ui, internet-explorer-9

我有：

*   根据单选按钮选择显示/隐藏的一些 div；
*   如果标签可见，则显示一些输入字段；
*   触发日期选择器的输入字段；
*   触发时间选择器的输入字段。

对于所有这些，我使用 JQuery 和 JQuery UI，并且都适用于 Firefox 和 Chrome，但不适用于 IE 9。

我使用这个库：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script type="text/javascript" src="js/jquery.ui.datepicker-it.js"></script>
<script type="text/javascript" src="js/jquery-ui-timepicker-addon.js"></script> 
```

**编辑** 这有效：

```
 <meta http-equiv="X-UA-Compatible" content="IE=7,IE=8" /> 
```

如果它改变了我的布局。

有没有办法只将它用于 IE9？

# css - 为什么增加margin-top后box c不会下移

> ID：13469406
> 
> 赞同：0
> 
> 时间：2012-11-20T08:45:25.253
> 
> 标签：css

[您可以在http://jsfiddle.net/ryamx/2/](http://jsfiddle.net/ryamx/2/)找到示例代码

```
#c {
    width:110px;
    height:57px;
    border:1px solid blue;
    margin-top:250px;
    clear:right;

} 
```

我的目的是通过更改边距顶部的值来移动框 c。它具有明确的属性，然后它不起作用。为什么？

简单地说，如何“明确”影响元素行为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:48:25.423

尝试`clear:both;`

```
<div id="b"> b</div>
<div style="width:100%;clear:both;"></div>
<div id="c">c </div> 
```

[**提琴手**](http://jsfiddle.net/8Nj37/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:00:38.880

**Actually its margin-collapsing basically see the attached image**

![enter image description here](../Images/0ec7909a287e8b8b11403e2238dc09d0.png)

so we can remove that `margin-collapsing` through `float` Give the `float:left;` to your id **#C**

**CSS**

```
#c {
    width:110px;
    height:57px;
    border:1px solid blue;
    margin-top:250px;
    clear:both;
    float:left;

} 
```

[DEMO](http://jsfiddle.net/ryamx/9/)

Now see the updated image its taking `margin` after **#b**

![enter image description here](../Images/4a333caae72332cf0136b0e1203e280d.png)

# ruby-on-rails - How to delete and backup model in rails?

> ID：13469412
> 
> 赞同：0
> 
> 时间：2012-11-20T08:45:47.263
> 
> 标签：ruby-on-rails, backup

Sometimes I need delete some data in rails:

```
Post.where(id: [123, 321]).delete_all 
```

And I need backup the data in case something went wrong.

Is there any Gems or Code help me to do this? It should export to YAML file, backup all the data destroyed, and easy revert(import data again).

I already done the database level backup. what I need is model/object level backup.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:49:31.727

You can always use this:

[https://github.com/goncalossilva/rails3_acts_as_paranoid](https://github.com/goncalossilva/rails3_acts_as_paranoid)

It will mark your records and delete them, but not really delete them, and gives you the possibility of recovering them.

# apache - 通过 mod_rewrite 的目标 URL 的模糊程度

> ID：13469415
> 
> 赞同：0
> 
> 时间：2012-11-20T08:45:58.537
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, url-routing

为了实现单层内容交付安全性，我正在研究通过 .htaccess RewriteRule 隐藏资源 URL 的可能性：

```
RewriteEngine on
RewriteBase /js/
RewriteRule obscure-alias\.js http://example.com/sensitive.js 
```

它当然会被实现为：

```
<script type="text/javascript" src="obscure-alias.js"></script> 
```

因为这不是 301 重定向，而是类似于我们今天使用的许多框架的路由场景，所以可以肯定地说，这个 RewriteRule 充分混淆了这个资源所在的实际 URL，或者：

1.  仍然可以通过一些 HTTP 标头嗅探实用程序找到目标 URL
2.  网络浏览器是否能够显示“下载 URL”

我将通过对两者都说不来预先回答我自己的问题，因为如果我理解正确的话，“内部代理”发生在服务器端而不是客户端：[http://httpd.apache。 org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。我只是想确认，当 Apache 提供目标 URL 时，它也没有将信息传递给用户代理，它重写了原始请求的 URL 是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:51:05.317

这取决于您如何指定重定向目标。

如果您`http://example.com/`在同一台服务器上运行，则会有一个对客户端不可见的内部重定向。从[手册](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)：

> **绝对网址**
> 
> 如果指定了绝对 URL，mod_rewrite 会检查主机名是否与当前主机匹配。如果是这样，则方案和主机名将被删除，并且生成的路径将被视为 URL 路径。否则，将对给定 URL 执行外部重定向。要强制将外部重定向回当前主机，请参见下面的 [R] 标志。

如果绝对 URL 指向远程域，则将执行标头重定向。*客户端可以*看到标头重定向，并将显示敏感位置。

为确保不会发生外部重定向，请指定一个相对 URL，例如

```
RewriteRule obscure-alias\.js sensitive.js 
```

请注意，仍然可以猜到敏感 JS 文件的 URL。

要确定请求是否导致标头重定向，请登录到终端（例如，在 Linux 服务器上）并执行

```
wget --server-response http://www.example.com 
```

如果第一`HTTP/....`行（可能不止一个）是以 a 开头的`3xx`，比如

```
HTTP request sent, awaiting response... 
  HTTP/1.1 302 Moved Temporarily 
```

您正在查看标头重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:08:51.477

可以使用代理吞吐量。

见[http://httpd.apache.org/docs/2.4/rewrite/proxy.html](http://httpd.apache.org/docs/2.4/rewrite/proxy.html)

这里也提到了：[mod_rewrite not working as internal proxy](https://stackoverflow.com/questions/1173571/mod-rewrite-not-working-as-internal-proxy)

# javascript - 使用 jsgauge 创建仪表

> ID：13469427
> 
> 赞同：1
> 
> 时间：2012-11-20T08:46:56.350
> 
> 标签：javascript, jquery, jsgauge

我使用`jsgauge`插件创建了一个仪表

我不能做的是控制针的速度。它应该移动到比默认速度慢一点的分配值。针也应该从 0 开始。

这个的小提琴是[http://jsfiddle.net/aryan7987/h45Tr/2/](http://jsfiddle.net/aryan7987/h45Tr/2/)

```
Query(document).ready(function(){
        jQuery("#example")
          .gauge({
             min: 0,
             max: 100,
             label: 'EMPLOYEE',
             startangle: 0,
             bands: [{color: "#ff0000", from: 90, to: 100}]
           })
          .gauge('setValue', 59);
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:00:10.033

One of solutions is to use `setInterval` function and increase gauge value step by step with needed delay like this:

```
 jQuery(document).ready(function(){
            var g = jQuery("#example")
              .gauge({
                 min: 0,
                 max: 100,
                 label: 'RPM',
                 bands: [{color: "#ff0000", from: 90, to: 100}]
               });
              var m = 0;
              var timer = window.setInterval(function()
              {
                m++;
                g.gauge('setValue', m);
                if (m==58)
                {
                    clearInterval(timer);
                }
              }, 200);                   
}); 
```

The code is quite dirty but you should get a point. Also here working [fiddle](http://jsfiddle.net/x6AsB/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:03:48.603

不幸的是，看起来速度是通过为每一帧定义增量来硬编码的。这是一个猴子补丁版本来改变速度[看到这个jsfiddle](http://jsfiddle.net/h45Tr/3/)

问题线是：

```
increment = Math.max(Math.abs( that.settings.pointerValue - pointerValue ) / 8, 3); 
```

# jquery - 对子 div 应用与父 div 相同的宽度

> ID：13469429
> 
> 赞同：3
> 
> 时间：2012-11-20T08:47:16.513
> 
> 标签：jquery, css, sharepoint

我有一个包含多个 div 的 div。我改变了父 div 的宽度。但是由于 div 是父 div 的子元素，因此宽度正在增加。我这样写了css类。

```
$('#s4-workspace').css({
    'width': '900px'
}); 
```

这`s4-workspace`是父 div。应用上述属性后，当我在 IE 中看到时，宽度增加到 1600px。我想将此宽度应用于所有子 div。有什么方法可以在 jquery 中实现这样的功能吗？

我在共享点设计师工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:48:29.560

您可以使用[**width() jquery 函数通过使用**](http://api.jquery.com/width/)**[children()](http://api.jquery.com/children/)**函数获取孩子来设置宽度。

```
$('#s4-workspace').children().width($('#s4-workspace').width()); 
```

最好用样式表而不是 jquery/javascript 来处理它。以百分比设置孩子的宽度可以做到这一点，比如 100%。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T08:51:30.357

当然，如果这些孩子中的任何一个有边框，或填充，或浮动在其他浮动旁边，这种方法将不起作用。您是否确定*了为什么*这些子元素的大小为 1600？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:50:14.560

会`width:100%;`正常工作

# iphone - iOS 中带有活动指示器的异步图像加载器

> ID：13469433
> 
> 赞同：0
> 
> 时间：2012-11-20T08:47:25.430
> 
> 标签：iphone, objective-c, ios, ios5

我想使用`AsynchronousImage`Loader`ActivityIndicator`从 URL 下载图像并设置在`UITableviewCell`. 我使用了`sdwebimage`我想设置的但是而不是占位符图像，`Activity Indicator`所以请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:58:28.443

You could do it this way :

Add an indicator to your view, place it at the center of your imageview

```
 UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [indicator startAnimating];
    [indicator setCenter:self.imageView.center];
    [self.contentView addSubview:indicator]; 
```

Remove the indicator from the superview in the block's succes method.

```
 [_imageView setImageWithURL:[NSURL URLWithString:anURL]
                       success:^(UIImage *image) {
                           [indicator removeFromSuperview];
                       }
                       failure:^(NSError *error) {

                       }];
} 
```

Of course you could make a nice subclass for this

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:53:31.817

活动指示器是一个视图，我想您的占位符图像只是一个图像。

如果 sdwebimage 不能让您添加视图而不是占位符图像，那么最好的方法是使用[活动指示器的动画图像](https://www.google.fr/search?q=animated%20activity%20indicator&hl=fr&safe=off&prmd=imvns&tbm=isch&tbo=u&source=univ&sa=X&ei=KEWrUNPQGonM0QX_zoHYCg&ved=0CCwQsAQ&biw=1064&bih=879)。

# c# - Protobuf-net 中的 OverFlowException 和 EndOfStreamException

> ID：13469452
> 
> 赞同：1
> 
> 时间：2012-11-20T08:48:38.483
> 
> 标签：c#, protocol-buffers, protobuf-net

我一直在阅读有关 protobuf-net 的内容，这太棒了！

一般来说，它工作得很好。但是我遇到了一些问题。

我正在尝试使用 protobuf 在 Python 和 C# 之间编写通信代码。

.proto 如下：

```
message GetAllCalculate{
    required string agentID=1;
}

message CalculateInfo{
    required string CalStarttime=1;
    optional string CalEndtime=2;
    required string Smiles=3;
    optional string CAS=4;
    optional string ChName=5;
    optional string EnName=6;
    required string Param=7;
    required string Result=8;
    required bool IsFinished=9;
}

message GetAllCalulateResponse{
    required bool  isSuccessful = 1;
    required int32 Count=2;
    repeated CalculateInfo History=3;

} 
```

在 Python 客户端中，代码如下：

```
msg_resp = GetAllCalulateResponse()
  calculateInfo = [None] * 2
    cnt = 0
    for result in resultSets:   #resultSets can read from other place,like database
        calculateInfo[cnt] = msg_resp.History.add()
        calculateInfo[cnt].CalStarttime = str(result.calculateStartTime)
        calculateInfo[cnt].CalEndtime = result.calculateEndTime.strftime('%Y-%m-%d %X')
        calculateInfo[cnt].IsFinished = result.isFinished
        calculateInfo[cnt].Param = result.paramInfo
        **calculateInfo[cnt].Result = str('ff'*50) #result.result**

        calculateInfo[cnt].Smiles = result.smilesInfo.smilesInfo
        calculateInfo[cnt].CAS = result.smilesInfo.casInfo

        nameSets = CompoundName.objects.filter(simlesInfo=result.smilesInfo.pk,isDefault=True)
        for nameSet in nameSets:
            if nameSet.languageID.languageStr == Chinese_Name_Label:
                calculateInfo[cnt].ChName = nameSet.nameStr 
            elif nameSet.languageID.languageStr == English_Name_Label:
                calculateInfo[cnt].EnName = nameSet.nameStr

        cnt = cnt +1 
```

C# 代码（使用 Protobuf-net）：

```
string retString = HTTPPost2UTF8(bytes, GetAllCalculateHandlerAPI); //Get from Python Clint
bytesOut = System.Text.Encoding.UTF8.GetBytes(retString);
MemoryStream streamOut = new MemoryStream(bytesOut);
GetAllCalulateResponse response = Serializer.Deserialize <GetAllCalulateResponse>(streamOut); 
```

但是当我`**calculateInfo[cnt].Result = str('ff'*50) #result.result**`做大时，比如 str('ff') * 5000，C# 客户端会抛出 OverFlowException。当我设置它 str('ff') * 100 时，它会抛出 EndOfStreamException。

如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:35:07.227

这让我很担心：

```
string retString = HTTPPost2UTF8(bytes, GetAllCalculateHandlerAPI); //Get from Python
bytesOut = System.Text.Encoding.UTF8.GetBytes(retString);
MemoryStream streamOut = new MemoryStream(bytesOut); 
```

protobuf 数据**不是 text**，而且肯定不是 UTF8。没有有效的方法可以将 protobuf 二进制文件作为 UTF8 传递而不破坏它。选项：

1.  将其完全交换为原始二进制文件；**没有文字**
2.  使用 base-64 之类的东西，它可以安全地将任意二进制编码为 ASCII

# wso2 - 无法使用 Developer Studio 2.1.0 将 Web 应用程序导出到 WSO2 应用程序服务器

> ID：13469456
> 
> 赞同：1
> 
> 时间：2012-11-20T08:49:04.027
> 
> 标签：wso2, wso2carbon, wso2developerstudio

我下载了最新版本的 WSO2 Developer Studio：

```
developer-studio-eclipse-jee-helios-linux-gtk-x86_64-2.1.0.zip 
```

和基于 WSO2 Carbon 4 的应用服务器版本：

```
wso2as-5.0.1.zip 
```

解压两者并启动 Developer Studio。因为我想部署一个 Maven webapp 项目，所以我在 WSO2 Developer Studio 之上安装了 m2e。

然后我关注了这篇文章：

[http://wso2.org/library/articles/2012/09/develop-deploy-web-applications-using-wso2-developer-studio#section3](http://wso2.org/library/articles/2012/09/develop-deploy-web-applications-using-wso2-developer-studio#section3)

除了 WSO2 Carbon 和 WSO2 AS 版本不同之外，我已经有一个 maven war 项目导入到我的工作区中。

在为我的 web 应用项目创建分发项目后，我将 webapp 项目添加到其中。之后，我将该分发项目添加到 Carbon 服务器（使用“添加/删除”）。

WSO2 Carbon 服务器已启动，但随后显示一条消息“找不到战争的导出处理程序”。

我们多次重复这些步骤，有时控制台上会出现此堆栈跟踪：

```
java.lang.Exception: Can't find export handler for war
 at org.wso2.developerstudio.eclipse.platform.core.project.export.util.ExportUtil.buildProject(ExportUtil.java:84)
 at org.wso2.developerstudio.eclipse.distribution.project.export.CarExportHandler.exportArtifact(CarExportHandler.java:184)
 at org.wso2.developerstudio.eclipse.platform.core.project.export.util.ExportUtil.buildProject(ExportUtil.java:81)
 at org.wso2.developerstudio.eclipse.platform.core.project.export.util.ExportUtil.BuildCAppProject(ExportUtil.java:105)
 at org.wso2.developerstudio.eclipse.distribution.project.ui.wizard.DistributionProjectExportWizard.performFinish(DistributionProjectExportWizard.java:181)
 at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:811)
 at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:430)
 at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:624)
 at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:234)
 at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
 at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1258)
 at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3540)
 at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3161)
 at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
 at org.eclipse.jface.window.Window.open(Window.java:801)
 at org.wso2.developerstudio.eclipse.distribution.project.ui.action.ExportDistributionAction.run(ExportDistributionAction.java:36)
 at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
 at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
 at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
 at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
 at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
 at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1258)
 at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3540)
 at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3161)
 at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2640) 
```

从 WSO2 Developer Studio 将 mavenized Web 应用程序部署到 WSO2 Carbon 应用程序服务器的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:14:34.243

您可以在此处粘贴 Eclipse 错误日志的内容以进行更多检查吗？虽然它说它找不到 WebApp 的处理程序，但我怀疑真正的错误是别的东西。

您可以在 /.metadata/.log 文件中找到 Eclipse 错误日志。

关于从 WSO2 Developer Stidio 将 Web-App 部署到 WSO2AS 的正确方法，您提到的这篇文章解释了正确的方法。

/哈莎娜

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:59:51.370

也许 WSO2 Developer Studio 之上的 m2e 是问题所在。因为我可以将 WAR 部署到 WSO2AS 中而不会遇到任何异常，但我没有在我的 WSO2 Developer Studio 中安装 m2e。

您是否将现有的 POM 与 WSO2 Developer Studio 为 Web 项目生成的 POM 进行了比较？

# android - 使用 Adob e Reader 在 Android 中打开 PDF

> ID：13469457
> 
> 赞同：1
> 
> 时间：2012-11-20T08:49:13.800
> 
> 标签：android, pdf, file-io

> **可能重复：**
> [在 Android 中打开 PDF](https://stackoverflow.com/questions/13468710/open-pdf-in-android)

我想从我的 android 应用程序中用 Adob​​e Reader 打开一个 PDF 文件。

我在 /mnt/sdcard 中有一个名为 test.pdf 的 PDF 文件，我正在使用下一个代码：

```
file = new File ("/mnt/sdcard/test.pdf");

if (file.exists())
{
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.fromFile(file));
    intent.setType("application/pdf");
    intent.setPackage("com.adobe.reader");          
    startActivity(intent);              
} 
```

执行此代码时打开 Adob​​e Reader，但未打开文件。该文件有效。

问题是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T08:55:19.823

试试这个。

```
Uri path = Uri.fromFile(file);
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(path, "application/pdf");
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:51:58.477

试试这个代码

```
File file=new File("/mnt/sdcard/test.pdf");
if(file.exists())
{
    Uri path=Uri.fromFile(file);
    Intent intent=new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(path, "application/pdf");

    try
    {
        startActivity(intent);
    }
    catch(ActivityNotFoundException e)
    {
        Toast.makeText(TestActivity.this, "No software for PDF", Toast.LENGTH_SHORT).show();
    }
} 
```

# hibernate - 单元测试 JPA/Hibernate：EntityManager 没有持久性提供程序

> ID：13469458
> 
> 赞同：4
> 
> 时间：2012-11-20T08:49:26.860
> 
> 标签：hibernate, jpa-2.0, java-ee-6

我想为我的项目启用单元测试。我创建了如下结构。

目录结构

```
.
├── pom.xml
├── src
│   ├── main
│   │   ├── java
│   │   └── resources
│   │       ├── META-INF
│   │       │   ├── beans.xml        <-- Works fine in live
│   │       │   └── persistence.xml  <-- Works fine in live
│   └── test
│       ├── java
│       │   ├── com
│       │   │   └── test
│       │   │       └── model
│       │   │           ├── TestEntityManagerUtil.java
│       │   │           └── TestHibernate.java
│       └── resources
│           ├── META-INF
│           │   ├── beans.xml
│           │   └── persistence.xml 
```

**代码**

**持久性.xml**

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="test" transaction-type="RESOURCE_LOCAL">

        <description>TEST Persistence Unit</description>
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <properties>

            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver" />
            <property name="hibernate.connection.url" value="jdbc:mysql://XXX:3306/X" />
            <property name="hibernate.connection.username" value="X" />
            <property name="hibernate.connection.password" value="X" />

            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.format_sql" value="true" />
            <property name="hibernate.transaction.flush_before_completion" value="true" />
        </properties>
    </persistence-unit>
</persistence> 
```

**TestEntityManagerUtil.java**

```
public class TestEntityManagerUtil {
    public static EntityManagerFactory getEntityManagerFactory(){
        return Persistence.createEntityManagerFactory("test");
    }
} 
```

**TestHibernate.java**

```
public class TestHibernate {

    private EntityManager em;

    @Before
    public void beforeEach(){
        // Exception occurs here
        em = TestEntityManagerUtil.getEntityManagerFactory().createEntityManager();
    }

    @After
    ....

    @Test
    ....
} 
```

**例外**

```
javax.persistence.PersistenceException: No Persistence provider for EntityManager named test
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:69)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)
    at com.wellclub.model.TestEntityManagerUtil.getEntityManagerFactory(TestEntityManagerUtil.java:12)
    at com.wellclub.model.TestHibernate.beforeEach(TestHibernate.java:24) 
```

测试 persistence.xml`target/test-clases`按原样在目录中展开。

任何人都可以帮助我做错什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T03:07:54.820

请在您的 Maven POM 中查看您的 JPA 实现库（Hibernate）依赖项。

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-entitymanager</artifactId>
  <version>${hibernate-core-version}</version>
</dependency>' 
```

否则在非 Maven 项目中添加 hibernate-entityManager.jar

### 编辑：

请注意，您使用的 JBoss 示例是一个使用 CDI 注入来获取 EntityManager 的 EE 应用程序。一个主要的误解是假设 JUnit 测试在 EE 应用程序中是可操作的……不，JUnit 测试既不能运行 JBoss 容器也不能部署您的项目。但是您可以参考[http://arquillian.org/invasion/](http://arquillian.org/invasion/)并注意[arquillian 测试的 JBoss 示例](https://github.com/jboss-jdf/jboss-as-quickstart/tree/master/bean-validation)

换句话说，您的 JUnit 是测试 EntityManager 的 SE 方式，它在 JBoss 等应用程序服务器中无法运行。

# memcached - 决定合适的键值存储：Voldemort vs Cassandra vs Memcached vs Redis

> ID：13469459
> 
> 赞同：3
> 
> 时间：2012-11-20T08:49:28.967
> 
> 标签：memcached, redis, cassandra, hbase, voldemort

我正在为我的一个项目（医疗保健语义搜索引擎）使用三重存储数据库，它工作得很好。我正在考虑通过在三重存储之上使用一层键值存储来提高性能。三重存储查询速度较慢，因为我们进行了深度语义处理。

这就是我计划提高性能的方式：

1) 每天通过查询三重存储为所有查询词运行 Hadoop 作业。2) 将这些结果缓存在集群中的键值存储中。3）当用户搜索查询词时，将首先搜索键值存储，而不是搜索三重存储。只有在键值存储中找不到查询词时才会搜索三重存储。

我计划保存的键值对是“字符串”到“POJO 映射列表”。我可以将其保存为 BLOB。

我对使用哪个键值存储感到困惑。我主要寻找故障转移和负载平衡支持。我所需要的只是一个提供上述功能的简单键值存储。我不需要在值或任何其他功能中进行排序/搜索。

如果我错了，请纠正我。我假设 memcached 和 Redis 会更快，因为它在内存中。但是我不知道 Redis(Jredis) 或 memchaced(Spymemcached) 的 Java 客户端是否支持故障转移。我不确定是使用内存还是持久存储。我也在考虑 Voldemort、Cassandra 和 HBase。总体密钥值将在 2GB 到 4GB 左右。对此的任何指示都会非常有帮助。

我对 nosql 和键值存储非常陌生。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:39:13.153

您是否阅读过 memcached 教程文章（他们在那里解释了负载平衡方面，因为 memcached 实例根据您的密钥哈希平衡负载，还讨论了 spymemcached 它如何处理连接故障）：

使用 Memcached 提高 Java 企业性能，第 1 部分：架构和设置[http://www.javaworld.com/javaworld/jw-04-2012/120418-memcached-for-java-enterprise-performance.html](http://www.javaworld.com/javaworld/jw-04-2012/120418-memcached-for-java-enterprise-performance.html)

使用 Memcached 提高 Java 企业性能，第 2 部分：数据库驱动的 Web 应用程序[http://www.javaworld.com/javaworld/jw-05-2012/120515-memcached-for-java-enterprise-performance-2.html](http://www.javaworld.com/javaworld/jw-05-2012/120515-memcached-for-java-enterprise-performance-2.html)

对于 memcached 中的企业级故障转移/跨数据中心复制支持，您应该使用提供这些功能的[Couchbase 。](http://www.couchbase.com/)该产品是从 memcached 基础演变而来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:40:30.517

只有 cassandra 会提到功能和 CQL 完全支持，这有助于维护，否则您应该换个方向看：

[编写重的、复制的、大于内存的键值存储](https://stackoverflow.com/questions/13444320/write-heavy-key-value-store/13483045#13483045)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T22:27:47.503

在构建基础架构以加载缓存之前，您可能只是尝试在现有系统之上添加 memcached。首先，很好地衡量你目前的表现。我建议使用 JMeter 或类似工具。这是您的应用程序中的工作流程： 检查 memcached，如果它在那里，您就完成了。如果没有，请针对三重存储运行查询并将结果保存在 memcached 中。如果您有重复的查询，这将提高性能。Memcached 将有效地使用你给它的内存，丢弃不经常使用的东西。故障转移由您的应用程序处理（如果它不在 memcached 中，则使用现有的基础架构）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T14:12:44.190

**我们在谷歌应用引擎**提供的**memcache**中使用三重存储和缓存数据，它工作正常。它减少了 sparql 查询超过三重存储的开销。

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-08T16:25:55.227

由于您只想在三重存储前*缓存*数据，因此使用基于磁盘或复制/分布式键值存储似乎毫无意义。本质上，您所需要的只是将查询前的数据缓存在完成这些查询的机器上。没有“键值存储”，只有普通的 Java 缓存解决方案。

2016 年最好的 Java 缓存是[Caffeine](https://github.com/ben-manes/caffeine)。**

# angularjs - 检测AngularJS是否加载到当前页面的方法

> ID：13469466
> 
> 赞同：3
> 
> 时间：2012-11-20T08:49:43.153
> 
> 标签：angularjs

如何检测当前页面中是否加载了 AngularJS。我想从 CDN 加载 AngularJS，如果失败，我想从 LocalServer 加载。以下脚本为 JQuery 执行此操作

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="libs/jquery-1.8.2.min.js"><\/script>')</script> 
```

AngularJS 有没有类似的方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T09:05:46.800

您可以尝试测试`window.angular`.

# php - 为什么我的 JS 的位置会改变我的 html 代码？

> ID：13469467
> 
> 赞同：2
> 
> 时间：2012-11-20T08:49:43.457
> 
> 标签：php, javascript, html

直到今天我才知道 JS 的位置会改变我的 html 页面的结果。我希望图像 src 在两个不同的 url 的“点击”之间切换。为什么这第一个代码像我想要的那样工作，而第二个却没有？？？第二个代码的源 html 为 var not_a_bad_word 生成一个空白字符串。

第一个代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <title>'Murica!'</title>
    </head>
    <body>
        <?php
        $dbhost = 'databasePlace';
        $dbname = 'mine';
        $dbuser = 'me';
        $dbpass = '*****';

        $link = mysqli_connect($dbhost, $dbuser, $dbpass, $dbname);
        mysqli_select_db($link, $dbname);
        $name = $_GET["fname"];

        $query = sprintf(
            "SELECT image_url, Type
             FROM Pokemon c
             WHERE c.name = '%s'", 
             mysqli_real_escape_string($link, $name));

        $result = mysqli_fetch_assoc(mysqli_query($link, $query));

        echo '<img id="pokemon_card" onclick="changeImage()" height="450" 
                  width="330" src="' . $result['image_url'] . '"/>';

        mysqli_close($link);
        ?>
        <script>
            function changeImage() {
                element = document.getElementById('pokemon_card');
                var not_a_bad_word = "<?php echo $result['image_url']; ?>";

                if (element.src == "http://dmisasi.files.wordpress.com/2010/12/david-pokemon-card-back.jpg") {
                    element.src = not_a_bad_word;
                }
                else {
                    element.src="http://dmisasi.files.wordpress.com/2010/12/david-pokemon-card-back.jpg";
                }
            }
        </script>
    </body>
</html> 
```

第二个代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <title>'Murica!</title>
        <script>
            function changeImage() {
                element = document.getElementById('pokemon_card');
                var not_a_bad_word = "<?php echo $result['image_url']; ?>";

                if (element.src == "http://dmisasi.files.wordpress.com/2010/12/david-pokemon-card-back.jpg") {
                    element.src = not_a_bad_word;
                }
                else {
                    element.src="http://dmisasi.files.wordpress.com/2010/12/david-pokemon-card-back.jpg";
                }
            }
        </script>
    </head>
    <body>
        <?php
        $dbhost = 'databasePlace';
        $dbname = 'mine';
        $dbuser = 'me';
        $dbpass = '*****';

        $link = mysqli_connect($dbhost, $dbuser, $dbpass, $dbname);
        mysqli_select_db($link, $dbname);
        $name = $_GET["fname"];

        $query = sprintf(
            "SELECT image_url, Type
             FROM Pokemon c
             WHERE c.name = '%s'", 
             mysqli_real_escape_string($link, $name));

        $result = mysqli_fetch_assoc(mysqli_query($link, $query));

        echo '<img id="pokemon_card" onclick="changeImage()" height="450" 
                  width="330" src="' . $result['image_url'] . '"/>';

        mysqli_close($link);
        ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T08:55:28.023

在您的第一个示例中，创建变量的 PHP 代码在变量被回显*之前*`$result['image_url']`运行。

 *如果您查看生成空白的第二个示例，`$result['image_url']`则实际上仅*在*它被回显后才定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:52:28.287

那是因为在第二个示例中插入 JS 代码时，元素“pokemon_card”还没有出现。因此，选择器没有定义，不能在代码中使用。始终建议将使用 DOM 元素的 js 代码放在文档末尾。*

# wcf - 从针对迁移（从 asmx 到 wcf）服务的 asmx 客户端获取空值

> ID：13469468
> 
> 赞同：0
> 
> 时间：2012-11-20T08:49:59.377
> 
> 标签：wcf, asmx

我有一个迁移到 wcf 的 ASMX 服务（使用 basicHttpBinding），现在我使用旧客户端（其中使用 wsdl.exe 生成代理）来访问该服务。我可以看到调用到达服务并且服务返回一个非空对象，但是 asmx 客户端收到的返回值为空。

任何线索为什么会发生这种情况以及如何进一步调试？

```
 // This is my webservice 

   [ServiceContract(Namespace = "http://tempuri.org/ManagementWebService")]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
    public class ManagementService
    {
        [OperationContractAttribute(Action = "http://tempuri.org/ManagementWebService/GetViewSummaryForCurrentUser", ReplyAction = "*")]
        [OperationBehavior(Impersonation = ImpersonationOption.Allowed)]
        [XmlSerializerFormatAttribute()]
        [CLSCompliant(false)]
        [WebMethod]
        public virtual ViewSummaryList GetViewSummaryForCurrentUser()
        {
            return new ViewSummaryList();
        }
}

// This is the client side code which receives a null value.
    [System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://tempuri.org/ManagementWebService/GetVi" +
            "ewSummaryForCurrentUser", RequestNamespace="http://tempuri.org/ManagementWebService", ResponseNamespace="http://tempuri.org/ManagementWebService", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
        [return: System.Xml.Serialization.XmlElementAttribute("Views")]
        public ViewSummaryList GetViewSummaryForCurrentUser() {
            object[] results = this.Invoke("GetViewSummaryForCurrentUser", new object[0]);
            return ((ViewSummaryList)(results[0]));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:26:45.470

想通了，基本上肥皂响应生成错误

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><GetViewSummaryForCurrentUserResponse xmlns="http://tempuri.org/ManagementWebService"><GetViewSummaryForCurrentUserResult/></GetViewSummaryForCurrentUserResponse></s:Body></s:Envelope> 
```

代替

```
<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><GetViewSummaryForCurrentUserResponse xmlns="http://tempuri.org/ManagementWebService"><Views /></GetViewSummaryForCurrentUserResponse></soap:Body></soap:Envelope> 
```

注意区别是一个额外的 GetViewSummaryForCurrentUserResult 元素而不是 Views 为了修复它我必须添加属性

```
 [return: System.ServiceModel.MessageParameterAttribute(Name = "Views")]
public virtual ViewSummaryList GetViewSummaryForCurrentUser() 
```

....微不足道的解决方案真的，不知道为什么我错过了我

# sql - SQL 视图属性

> ID：13469473
> 
> 赞同：0
> 
> 时间：2012-11-20T08:50:19.547
> 
> 标签：sql

数据库中已经创建了一个视图，引用了同一数据库中其他表的列。如何在视图中找到列的来源？

例如，有`Info_View`4 列：`Name`、`Surname`和。这些列从不同的表绑定。我怎么知道哪一列来自哪里？`Job``Hobby`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:56:24.790

```
SELECT view_name, Table_Name
FROM INFORMATION_SCHEMA.VIEW_TABLE_USAGE
WHERE View_Name = '<giveViewName>'
ORDER BY view_name, table_name 
```

从[这里得到它](http://www.mssqltips.com/sqlservertip/1638/using-sql-server-meta-data-to-list-tables-that-make-up-views/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:56:15.690

对于 sql 服务器

[http://www.codeproject.com/Articles/38560/Overview-of-View-in-SQL-Server-2005](http://www.codeproject.com/Articles/38560/Overview-of-View-in-SQL-Server-2005)

对于PostgreSQL

[http://www.postgresql.org/docs/8.2/static/sql-createview.html](http://www.postgresql.org/docs/8.2/static/sql-createview.html)

对于 mysql

[http://www.mysqltutorial.org/mysql-views-tutorial.aspx](http://www.mysqltutorial.org/mysql-views-tutorial.aspx)

# c# - 从 API REST .NET 中的 NLog 读取 NLog.config

> ID：13469474
> 
> 赞同：3
> 
> 时间：2012-11-20T08:50:26.113
> 
> 标签：c#, asp.net, .net, asp.net-mvc-4, nlog

当我从我的 ASP.NET MVC4 项目中调用它时，我从我的类库项目中读取配置文件 (NLog.config) 时遇到问题。

我使用单元测试项目测试了我的代码，并正确读取了配置文件并正确记录了我在 NLog.config 上指定的文件，因此正确定义了 NLog.config。

正如教程所说，我还在“复制到输出目录”设置中设置了“始终复制”。

问题是，当我从我的 ASP 项目中调用类库项目时，我意识到它没有生成任何类型的日志，当我调试时，我看到它没有从 NLog.config 中选择配置，并且出于这个原因，我的项目不知道何时何地记录。

当我查看“ASP项目文件夹”/bin时，有来自NLog的文件：NLog.dll、NLog.config和NLog.xml，所以理论上，ASP项目可以毫无问题地访问NLog文件。

我从 NLog 阅读了教程，但我无法找到解决方案。只是无法理解为什么我的测试项目可以正常工作，但是当我从我的 ASP 项目中进行相同的调用时却无法正常工作。

这是我的 NLog 配置文件。

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog throwExceptions="true" 
  xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<targets>
  <target name="logfile" xsi:type="File" fileName="C:\logfile.txt" layout="${callsite:fileName=true} - ${longdate} - ${level:uppercase=true} - ${logger} - ${message}"/>
</targets>

<rules>
  <logger name="*" minlevel="Info" writeTo="logfile" />
</rules>
</nlog> 
```

在我的课程中，我以这种方式创建记录器：

```
private static Logger logger = LogManager.GetCurrentClassLogger(); 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:43:09.997

我想出了解决方案。

似乎与复制到输出目录设置一样，对于 asp.net-mvc4 来说还不够。

[![复制到输出目录](../Images/9de79a45fc054d066659a1d4fa64d7b5.png)](https://i.stack.imgur.com/tazE8.png)

我不得不手动将 NLog.config 复制到解决方案资源管理器中的 asp 项目本身。

[项目浏览器 http://imageshack.us/a/img849/2460/sol1o.png](http://imageshack.us/a/img849/2460/sol1o.png)

在此示例中，我将 NLog.config 从 LoggingLibrary 复制到 LogWebApp 项目中，它运行良好。

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:58:40.387

尝试打开 nlog 本身的[内部日志记录](http://nlog-project.org/wiki/Internal_logging)，看看它会告诉你什么。

```
<nlog internalLogFile="c:\log.txt" internalLogLevel="Trace"> 
```

你可能会发现这是一个权利问题。

# ios5 - 关于上下文的核心图形问题。CGContextFillRects：无效的上下文 0xa88a500

> ID：13469475
> 
> 赞同：1
> 
> 时间：2012-11-20T08:50:29.260
> 
> 标签：ios5, core-graphics, quartz-graphics, cgcontext

通常，当您在无效上下文中绘制时，您会看到类似于无效上下文 0x00 的内容，但事实并非如此，因为我看到了一个地址。我所有的核心图形代码都在视图的 drawRect 内。有时，并非总是如此，我会看到：“：CGContextFillRects：无效上下文0xa88a500” 有时我的代码似乎有效，但其他代码却失败了。我想画的是面具之类的东西。

如果您在这里发现任何问题，您能告诉我吗？：

UIGraphicsBeginImageContext(rect.size); CGContextRef 上下文 = UIGraphicsGetCurrentContext(); CGContextSetFillColorWithColor(context, [[UIColor blackColor] CGColor]); CGContextFillRect(context, rect);

```
switch (shape) {
    case SHAPE_ELIPSE:
        //
        CGContextAddEllipseInRect(context, maskBox);
        CGContextSetFillColorWithColor(context, [[UIColor whiteColor] CGColor]);
        CGContextFillEllipseInRect(context, maskBox);
        break;
    case SHAPE_SQUARE:
        //
        CGContextAddRect(context, maskBox);
        CGContextSetFillColorWithColor(context, [[UIColor whiteColor] CGColor]);
        CGContextFillRect(context, maskBox);
        break;
    default:
        break;
}
CGContextStrokePath(context);
UIImage *backGroundImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

CGImageRef maskRef = backGroundImage.CGImage;

CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                    CGImageGetHeight(maskRef),
                                    CGImageGetBitsPerComponent(maskRef),
                                    CGImageGetBitsPerPixel(maskRef),
                                    CGImageGetBytesPerRow(maskRef),
                                    CGImageGetDataProvider(maskRef), NULL, false);

UIGraphicsBeginImageContext(rect.size);
CGContextRef contextBlack = UIGraphicsGetCurrentContext();
CGContextSetFillColorWithColor(contextBlack, [[UIColor blackColor] CGColor]);
CGContextFillRect(context, rect);
UIImage *blackImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

CGImageRef masked = CGImageCreateWithMask([blackImage CGImage], mask);
CGImageRelease(mask);
[self setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageWithCGImage:masked]]];
CGImageRelease(masked); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:58:21.400

调用`UIGraphicsEndImageContext()`会使上下文无效`context`。但是，您的程序继续使用该变量。IOW，您应该在第二次`context`调用后重新分配：`UIGraphicsBeginImageContext()`

```
context = UIGraphicsGetCurrentContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:48:41.513

除了贾斯汀回答：无需将您的代码放在drawRect中。它将被多次调用，您只需要在“形状”更改时重新绘制图案背景。

调用 setShape 中的代码。

# html - Chrome 上的特殊字符渲染

> ID：13469476
> 
> 赞同：2
> 
> 时间：2012-11-20T08:50:36.973
> 
> 标签：html, google-chrome, rendering

最近一位客户通知我一些特殊字符无法正确呈现。如果总是这样，我不确定，我想不是。

问题出在这里： [http ://waterforum.net/](http://waterforum.net/)

在 IE/Opera/FireFox 上，它可以正确显示特殊字符。

但是，例如在 Chrome 和我的 SGS3 上，它没有。

1.  我试过的，
2.  由于 htaccess 强制使用 UTF8
3.  文档类型
4.  字符集声明
5.  检查数据库表

你们有线索吗？或者它只是一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:42:31.070

我尝试将 UA 字符串从 Chrome 默认更改为 Firefox Windows。

默认情况下，在 Chrome 中这是`Content-type`：

```
Content-Type: text/html; charset=iso-8859-1 
```

然后字符显示不正确。

当我切换到 Firefox UA 时，`Content-type`更改为：

```
Content-Type: text/html; charset=utf-8 
```

这个问题可能隐藏在 Chrome 发送的事实中，`Accept-encoding`但由于 Chrome 使用另一个 UA 正确显示它，所以很可能不是这种情况。

尝试看看使用不同的 UA 字符串会发生什么，由于这些问题，非常不鼓励使用 UA 字符串来传递不同的内容。

# c# - ASP.NET MVC 4 部分视图不起作用

> ID：13469485
> 
> 赞同：5
> 
> 时间：2012-11-20T08:51:01.020
> 
> 标签：c#, asp.net, asp.net-mvc-4, partial-views

我写了一个这样的部分方法：

```
public ActionResult _StatePartial()
        {
            ViewBag.MyData = new string[] { "110", "24500" };
            return View();
        } 
```

并在页面中渲染`_StatePartial`视图：`_Layout`

```
@Html.Partial("_StatePartial") 
```

这是我的部分视图代码：

```
@{
    string[] Data = (string[])ViewBag.MyData;
}
<div id="UserState">
        Reputation: @Html.ActionLink(Data[0], "Reputation", "Profile") | 
        Cash: @Html.ActionLink(Data[1], "Index", "FinancialAccount")
</div> 
```

但是当我运行这个项目时，_`StatePartial`方法不会调用并且`ViewBag`始终为空。

```
Server Error in '/' Application.
Object reference not set to an instance of an object. 
```

请注意，这些参数不是我的模型字段，而是通过调用 Web 服务方法来计算的。但我不断在我的问题中设置这些值。

我能为此做些什么？将参数传递给局部视图的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T08:57:45.793

你的来电：

```
@Html.Partial("_StatePartial") 
```

将呈现视图，但不会调用操作。仅当您在父页面操作中查看所有视图数据时才使用此选项。在你的情况下，你需要使用这个：

```
@Html.Action("_StatePartial") 
```

这将首先调用该操作来检索和执行视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:03:16.250

还：

```
return View(); 
```

用于返回带有布局的视图。你需要：

```
return PartialView(); 
```

我建议使用这个：

```
public ActionResult StatePartial()
{
    ViewBag.MyData = new string[] { "110", "24500" };
    return View("_StatePartial");
} 
```

but better to use strongly typed models, not `ViewBag`

# iphone - Core Data 无法删除从未插入的对象错误

> ID：13469486
> 
> 赞同：1
> 
> 时间：2012-11-20T08:51:01.350
> 
> 标签：iphone, objective-c, ios, core-data, nsmanagedobject

免责声明：我是一个完整的 CoreData 菜鸟。我在装有 iOS 6.0.1 的 iPhone 4S 上运行我的应用程序。

## 背景

我的应用程序的一部分使用 a 获取图像`UIImagePicker`并使用 CoreData 将它们保存到磁盘。所述图像与模型中的活动相关联。活动与图像具有一对多的关系。

我需要在捕获后立即将图像保存到磁盘，然后将它们排除在内存之外，保留缩略图以供显示。如果我不这样做，iOS 将在捕获相对较少数量的图像后杀死我的应用程序使用太多内存。

我将缩略图作为一个单独的实体，以避免在我只需要缩略图的情况下将整个图像放入内存。缩略图与图像具有一对一的关系。此外，由于各种原因，我没有使用 Core Data 来存储缩略图数据；相反，我存储文件名，并自己管理磁盘上的文件。

所有这一切意味着，如果用户在添加了至少一个 Image 之后取消添加 Activity，那么用户添加的 Images 和 Thumbnails 都需要删除。

## 问题

当我尝试删除添加的图像对象时，会发生两件事。首先，Core Data 抱怨我的删除规则：

```
Core Data: annotation: repairing missing delete propagation for to-one relationship image on object <Thumbnail: 0x1dd4d9e0> (entity: Thumbnail; id: 0x1dd4d410 <x-coredata:///Thumbnail/tE7E99D89-C986-4287-ABBD-C6BA7006E9264> ; data: {
    activity = nil;
    fileName = "ECD70C72-745A-4959-BF41-586E9521F1D6";
    image = "0x1dd9f960 <x-coredata:///Image/tE7E99D89-C986-4287-ABBD-C6BA7006E9263>";
}) with bad fault 0x1dd9f960 <x-coredata:///Image/tE7E99D89-C986-4287-ABBD-C6BA7006E9263> 
```

其次，当我尝试保存托管对象上下文时，保存失败，Core Data 抛出异常。这是 NSError 对象的输出：

```
Error Domain=NSCocoaErrorDomain Code=134030 "The operation couldn’t be completed. (Cocoa error 134030.)"
 UserInfo=0x1f0ca270 {NSAffectedObjectsErrorKey=(
    "<Image: 0x1dd9f910> (entity: Image; id: 0x1dd9f960 <x-coredata:///Image/tE7E99D89-C986-4287-ABBD-C6BA7006E9263> ;
         data: {
             activity = nil;
             image = nil;
             thumbnail = nil;
         })"
), NSUnderlyingException=Cannot delete object that was never inserted.} 
```

所以。显然我正在尝试删除我从未插入的对象？只有我很确定我做到了。

## 关系详情

活动 <1-*> 图像；删除规则：cascade
--> Inverse：Image <1-1> Activity；删除规则：无效

图像 <1-1> 缩略图；删除规则：级联
-->逆：缩略图<1-1>图片；删除规则：无效

## 相关代码

图像采集：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage* acquiredImage = (UIImage*)info[UIImagePickerControllerEditedImage];
    if (!acquiredImage)  {
        acquiredImage = (UIImage*)info[UIImagePickerControllerOriginalImage];
    }

    // Save the image to disk so we can fault it and free up its memory
    NSManagedObjectContext* moc = [(ATAppDelegate*)[[UIApplication sharedApplication] delegate] managedObjectContext];
    Image* imageToSave = [NSEntityDescription insertNewObjectForEntityForName:@"Image" inManagedObjectContext:moc];
    Thumbnail* thumbToSave = [NSEntityDescription insertNewObjectForEntityForName:@"Thumbnail" inManagedObjectContext:moc];
    [addedImageManagedObjects addObject:imageToSave];
    [addedThumbnailManagedObjects addObject:thumbToSave];

    [thumbToSave setThumbnailImage:acquiredImage];
    imageToSave.thumbnail = thumbToSave;

    NSError* error;
    [moc save:&error];
    // TODO: error handling

    // I know it doesn't look it, but this call will turn the imageToSave into a fault, thus freeing up its memory
    [moc refreshObject:imageToSave mergeChanges:NO];

    // NOW, we can add the thumbnail image to our collection view
    // NOTE, -thumbnailImage is a method on my Thumbnail NSManagedObject subclass
    [self addImage:[thumbToSave thumbnailImage] toCollectionView:imageDisplayView];

    [self dismissModalViewControllerAnimated:YES];
} 
```

取消处理程序：

```
- (IBAction)cancel:(id)sender {
    NSManagedObjectContext* moc = [(ATAppDelegate*)[[UIApplication sharedApplication] delegate] managedObjectContext];

    // Delete any images we saved to disk
    // Note that the activity object's changes get discarded b/c they were made on the child managed object context
    // (We couldn't do that for images b/c we needed them to be written to disk and then faulted out of memory)
    for (Thumbnail* thumb in addedThumbnailManagedObjects)  {
        // This method deletes the thumbnail image file whose storage I am managing myself
        [thumb deleteThumbnailFile];
        // I shouldn't have to explicitly delete the thumbnail since the delete of its image should cascade down...right?
    }
    for (Image* image in addedImageManagedObjects)  {
        [moc deleteObject:image];
    }

    NSError* error;
    if (![moc save:&error])  {
        NSLog(@"%@", error);
    }
    // TODO: error handling

    [self resetToPristineState];
    [self.presentingViewController dismissModalViewControllerAnimated:YES];
} 
```

## 概括

我看不出哪里出错了，我收到的错误消息也没有帮助。更糟糕的是，谷歌搜索错误消息并没有给我任何有用的结果。因此，我向各位经验丰富的优秀人士寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:17:04.620

哦。天啊。这个错误太愚蠢了。我很惭愧。

好的。请注意，在我的图像采集处理程序中，我从未设置 Image 托管对象的图像数据？是的。事实证明你需要这样做。:)

无论如何，我已经解决了我自己的问题。

# php - PHP重定向，如何？

> ID：13469491
> 
> 赞同：1
> 
> 时间：2012-11-20T08:51:17.003
> 
> 标签：php, apache, magento, redirect

出于某种原因，一个 magento 网址在我的网站上无法正常工作。请参见此处： [违反完整性约束：1052 列“位置”在顺序子句中不明确](https://stackoverflow.com/questions/13298533/integrity-constraint-violation-1052-column-position-in-order-clause-is-ambigu)

所以，我决定我可以为这个失败的 url 做一个重定向：我尝试使用 apache，但它不起作用，请参见此处： [Apache simple redirect from one page to a second one](https://stackoverflow.com/questions/13463282/apache-simple-redirect-from-one-page-to-a-second-one)

他们建议用php来做

有人可以向我解释如何用 php 做到这一点吗？

就像是

```
if url = 'myfaliingurl' then
  redirect to new url 
```

就是这样

这是我在 apache 中尝试过的

```
Redirect 301 http://www.theprinterdepo.com/catalogsearch/result/index/?cat=100&q=1022&x=0&y=0 http://www.theprinterdepo.com/catalogsearch/advanced/result/?name=1022&sku=&price%5Bfrom%5D=&price%5Bto%5D=&free_shipping=&category=100 
```

**更新1：**

它不起作用，我把它放在最后的 index.php 上。

```
if($url == 'http://www.theprinterdepo.com/catalogsearch/result/index/?cat=100&q=1022&x=0&y=0')
  {
          header('location:http://www.theprinterdepo.com/catalogsearch/result/index/?cat=100&q=1022&x=0&y=0 http://www.theprinterdepo.com/catalogsearch/advanced/result/?name=1022&sku=&price%5Bfrom%5D=&price%5Bto%5D=&free_shipping=&category=100');
          exit();
  }
else
{
Mage::run('printerdepo','website');
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T08:53:39.163

如果您只想使用 PHP，您可以使用`header()`

```
header("Location: http://www.example.com/"); /* Redirect browser */ 
```

所以：

```
if (/*whatever you're checking*/){
    header("Location: http://www.example.com/"); /* Redirect browser */
    exit();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:55:42.523

使用此代码，您将获得

```
 <?php
  if($url == 'myfaliingurl')
  {
          header('location:http://www.theprinterdepo.com/catalogsearch/result/index/?cat=100&q=1022&x=0&y=0 http://www.theprinterdepo.com/catalogsearch/advanced/result/?name=1022&sku=&price%5Bfrom%5D=&price%5Bto%5D=&free_shipping=&category=100');
  }
  else{
          header('location:otherposition');
  }
  ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:53:50.197

在 PHP 中，您可以使用该`header()`函数来重定向请求：

```
header('Location: http://www.example.com/'); 
```

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T08:58:55.987

你需要的东西是这样写的：记住不要在php`header()`函数之前输出任何东西。

```
$url = "myfailingurl";
$newurl = "http://www.mynewurl.com/blabla";

if ($url == "myfailingurl"){
     header("Location: $newurl"); die();
} 
```

`header()`关于这里函数的更多细节：http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T09:01:29.833

用 PHP 是这样的：

```
<?php
header('Location: http://www.example.com/');
// if you get a header error, which is really frequent, try with javascript like this:
echo '<script type="text/javascript">window.location ="http://www.example.com";</script>';
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T09:03:06.590

```
if(url == 'myfaliingurl')
   redirect('newUrl');

function redirect($url)
{
   header("Location: $url");
} 
```

# jquery - 使用 jQuery 和 AJAX 将参数从控制器传递到 javascript 以在 Ruby on Rails 中呈现视图

> ID：13469494
> 
> 赞同：2
> 
> 时间：2012-11-20T08:51:24.977
> 
> 标签：jquery, ruby-on-rails, ajax

我正在尝试 Ajaxify Ruby on Rails 应用程序，以避免在用户交互后重新加载每个页面。

我现在设法在幕后创建了一个新想法，但一旦创建就不会显示它。

这是我的代码：

**意见中的形式：**

```
<div id="new_proposition_form" style="display:none">
    <%= form_for(@new_proposition, :remote => true) do |f| %>
        <%= f.text_field :title, :class => "proposition_input", :id => "new_proposition_input"  %>
        <%= f.hidden_field :created_by %>
        <%= f.hidden_field :father_id %>
        <%= f.hidden_field :procontra %>
        <%= f.hidden_field :created_at %>
    <% end %>
</div> 
```

**在想法控制器中创建操作：**

```
 def create
    @idea = Idea.new(params[:idea])
    @idea.created_at = Time.now

    respond_to do |format|
      if @idea.save
        format.html { redirect_to play_path, :notice => 'Idea was successfully created.' }
        format.json { render :json => @idea, :status => :created, :location => @idea }
        format.js 
      else
        format.html { render :action => "new" }
        format.json { render :json => @idea.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

**在想法视图中创建.js.erb：**

```
$("<%= escape_javascript render(:file => 'ideas/new_proposition.html.erb') %>").insertBefore('#end_of_propositions_list'); 
```

其中“end_of_propositions_list”是显示的想法列表的唯一标识符。

我正在努力解决的问题如下：

如果想法视图中的**new_proposition.html.erb**视图类似于：

```
<div>
  New proposition added
</div> 
```

使用不引用任何对象或变量的代码，它可以工作，即用户可以看到发生的事情的确认。因此，我知道在浏览器中发起的远程操作命中了控制器，该控制器命中了命中局部视图的 javascript 模板。

现在我希望新创建的想法出现，使用检索其属性并处理格式的部分。我觉得我需要将新创建的想法的 id 从想法控制器中的创建操作传递给由 format.js 调用的 create.js 脚本，然后再传递给部分，以便它知道从数据库中提取什么想法.

我不知道如何处理从创建控制器操作传递到 create.js 和局部视图的参数，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:42:43.603

在我看来很好……？因此，您接下来要做的是将实例变量 @idea 从控制器传递给部分：

```
$("<%= escape_javascript render(
    :file => 'ideas/new_proposition.html.erb', 
    :idea => @idea) %>")
.insertBefore('#end_of_propositions_list'); 
```

然后在您的视图中访问@idea：

```
<div>New proposition added</div>
<div>Title: <%= @idea.title => </div> 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:29:02.053

在该控制器呈现的视图中，您可以使用 @ 访问变量，因此在 create.js 中您可以直接访问 @idea.id

# ios - 制作一个 UIView Canvas 可以用来用手指画线

> ID：13469496
> 
> 赞同：2
> 
> 时间：2012-11-20T08:51:52.080
> 
> 标签：ios, canvas, touch, draw

我正在尝试编写一个 UIView ，它的工作方式类似于我们可以用手指在其上绘制的画布。我实现了一个 CanvasView，当手指移动时，它首先绘制已经存在的图像，然后绘制一条连接前一点和当前点的细线。当我移动手指时它会绘制图像，但是，当我绘制时图像会消失。我不明白为什么会出现这种情况。我知道还有其他一些方法可以用 UIView 实现画布，但我想知道为什么我的实现是错误的。下面是我的完整代码。而且我希望任何人都可以复制这段代码并运行它，这样我的问题就可以更直观了。

```
#import <UIKit/UIKit.h>

@interface CanvasView : UIView

@end

#import "CanvasView.h"
#import <QuartzCore/QuartzCore.h>

@interface CanvasView()
@property (nonatomic) CGPoint startPoint;
@property (nonatomic) CGPoint endPoint;
@property (nonatomic, strong) UIImage* oldImage;
@end

@implementation CanvasView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        self.backgroundColor = [UIColor whiteColor];
    }
    return self;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch* touch = [touches anyObject];
    self.startPoint = [touch locationInView:self];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch* touch = [touches anyObject];
    self.endPoint = [touch locationInView:self];

    UIGraphicsBeginImageContext(self.bounds.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    self.oldImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    [self setNeedsDisplay];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch* touch = [touches anyObject];
    self.endPoint = [touch locationInView:self];

    UIGraphicsBeginImageContext(self.bounds.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    self.oldImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    [self setNeedsDisplay];
}

-(void)drawRect:(CGRect)rect{
    CGContextRef context = UIGraphicsGetCurrentContext();

    //draw image already exists
    [self.oldImage drawInRect:self.bounds];

    //draw new tiny line
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, self.startPoint.x, self.startPoint.y);
    CGContextAddLineToPoint(context, self.endPoint.x, self.endPoint.y);
    CGContextSetStrokeColorWithColor(context, [UIColor greenColor].CGColor);
    CGContextSetLineWidth(context, 5.);
    CGContextStrokePath(context);

    self.startPoint = self.endPoint;
}

@end 
```

# android - 跟踪 android listview 运行时错误

> ID：13469500
> 
> 赞同：0
> 
> 时间：2012-11-20T08:52:01.767
> 
> 标签：android, listview

从适配器填充列表视图时，有什么方法可以跟踪错误？我的意思是如果一项无法加载到列表视图，有什么办法可以找到它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:54:13.383

如果您的适配器是自定义的，您可以在 getView 方法中设置 Log，该方法将根据您在对象为 null 的某些情况下的要求为您提供日志。

# ios - CoreBluetooth 上的最大外围设备数量？

> ID：13469502
> 
> 赞同：13
> 
> 时间：2012-11-20T08:52:05.290
> 
> 标签：ios, max, proximity, core-bluetooth, slave

我对在 iOS 上使用 BLE 接近传感器很感兴趣，并且一直在寻找我的查询的一些答案，但找不到任何可靠的答案。

1) CoreBluetooth 可以处理的 BLE 从机的最大数量是多少？

2）slave（大约10个设备）是否能够同时操作，即如果任何slave断开连接，master会在不影响其他设备的情况下发出警报？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-30T22:22:51.233

从理论上讲，可以连接到单个 iOS 设备的蓝牙 LE 设备的数量没有限制（如果 iOS 设备充当中央设备，而 LE 设备充当外围设备）。

然而，在实践中，这个限制似乎是超过 20 个 LE 设备同时连接到 iOS 主设备。这个数字来自与我交谈过的蓝牙 LE 发射器制造商和配件开发商。确切的数字可能会根据所涉及的特定 iOS 设备和蓝牙 LE 配件的传输特性而有所不同。

# c# - 基于字符序列的换行符

> ID：13469505
> 
> 赞同：0
> 
> 时间：2012-11-20T08:52:13.197
> 
> 标签：c#, .net, regex

我在一个文本文件中有几行参数，可以分布在几行上。它们由一系列字符终止（实际的换行符），这些字符也可以分布在多行或包含空格，如以下三个（非详尽）示例：

```
< x >

< x 
  > 

<   x > 
```

我想整理这个文本文件，以便我可以真正解析它。输出应该是这样的（P1 ... P3 是参数）：

```
P1 P2 P3 < x >
P1 P2 P3 < x >
P1 P2 P3 < x > 
```

原来的：

```
P1 P2 P3 < x   >

P1 P2    P3 < x 

>
P1 P2 

P3 < 
x > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:01:20.030

你应该用一个简单的[词法分析器](http://en.wikipedia.org/wiki/Lexical_analysis)就可以了。

请参阅以前的一些 SO 问题：

*   [推荐一个好的基于 C#/.NET 的词法分析器](https://stackoverflow.com/questions/131920/recommendations-for-a-good-c-net-based-lexical-analyser)

*   [C#/.NET 词法分析器生成器](https://stackoverflow.com/questions/172189/c-net-lexer-generators?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:08:28.123

好吧，一个非常转储的方法会遍历它，一个字符一个字符，如下所示：

```
 var output = new List<string>(); // this holds the parameter lines
  var line = string.Empty;
  foreach (var c in str) // str holds the input string
  {
    if (c == '\n' || c == '\r') continue;

    line += c;
    if (c == '>')
    {
      output.Add(line);
      line = string.Empty;
    }
  } 
```

你仍然需要进行格式化等，但我希望你明白......

# python - 从谷歌应用引擎下载源代码时出错

> ID：13469506
> 
> 赞同：0
> 
> 时间：2012-11-20T08:52:16.807
> 
> 标签：python, google-app-engine, download

我正在使用以下命令：

```
appcfg.py download_app -A <application-id> -V <application-version> <output-dir> 
```

然后它要求我输入`googleusername`and `password`。

但在那之后它说

```
Unable to create directory /templates/<file name>: permission denied 
```

它对所有需要下载的文件都这么说。

我也获得了该应用程序的所有权。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:27:54.893

检查运行`appcfg.py`.

当您下载应用程序时，它将创建`templates`目录来存储该应用程序的所有模板。此错误表明用户无权在这些目录上创建文件。

# c++ - 选择安装的网络浏览器

> ID：13469508
> 
> 赞同：2
> 
> 时间：2012-11-20T08:52:22.280
> 
> 标签：c++, firefox, cross-platform, wxwidgets

我想做以下事情：

使用 ANSI C++ 代码

如果找到默认浏览器，我想检查安装的浏览器（最好是基于 Windows 的机器上的默认浏览器）

我将使用 wxlaunchdefaultwebbrowser - wxWidgets 2.8.12；否则我只想找到 Internet Explorer（Windows XP、Windows Server 2003、Windows Server 2008 上相同的默认版本）并将其与 wxlaunchDefaultwebbrowser 一起使用，我使用的是 wxWidgets 2.8.12。

我在没有安装 mozilla 的情况下在 Win XP SP3 上进行了测试，当我安装了 mozilla firefox 并将其手动设置为默认浏览器时，他的链接打开了。之前我可能安装了 IE 6.0 并安装了 Chrome，但是它提示无法使用默认浏览器打开（错误 5：访问被拒绝）。

所以我正在寻找大多数自动设置（没有手动设置）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:56:25.127

如果您可以使用 Windows API，请使用带有 URL 的“ShellExecute”API，它将在默认浏览器中打开它。顺便说一句，wxlaunchDefaultwebbrowser 会启动默认浏览器吗？您还想知道默认浏览器的详细信息吗？

# android - ViewPager 在第二次调用 setAdapter() 后不刷新视图

> ID：13469511
> 
> 赞同：2
> 
> 时间：2012-11-20T08:52:24.403
> 
> 标签：android, android-viewpager, viewpagerindicator

我对 ViewPager 有疑问。当 Activity 启动时，我运行 AsyncTask 从服务器下载数据，我调用的是带有[ViewPageIndicator.TabPageIndicator](http://viewpagerindicator.com/)`pager.setAdapter(currentPager)` `currentPager`标签的空 Fragment

```
pager = (ViewPager) findViewById(R.id.pager);
        pager.setAdapter(currentPager);

indicator = (TabPageIndicator) findViewById(R.id.indicator);
        indicator.setViewPager(pager); 
```

当 AsyncTask 完成我调用的下载数据`pager.setAdapter(currentPager);`并且前 2 页为空时，其他页面都可以。如何首先刷新到具有适当数据的页面？我不能调用 setContentView`pager.setAdapter(currentPager);`因为我有一个 NULL 指针

```
E/AndroidRuntime(23263): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.windmobile.rbt.android/com.windmobile.rbt.android.category.CategoryActivity}: java.lang.IllegalStateException: ViewPage
r does not have adapter instance.
E/AndroidRuntime(23263):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
E/AndroidRuntime(23263):        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
E/AndroidRuntime(23263):        at android.app.ActivityThread.access$2200(ActivityThread.java:119)
E/AndroidRuntime(23263):        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
E/AndroidRuntime(23263):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(23263):        at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(23263):        at android.app.ActivityThread.main(ActivityThread.java:4363)
E/AndroidRuntime(23263):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(23263):        at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(23263):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
E/AndroidRuntime(23263):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
E/AndroidRuntime(23263):        at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(23263): Caused by: java.lang.IllegalStateException: ViewPager does not have adapter instance.
E/AndroidRuntime(23263):        at com.viewpagerindicator.TabPageIndicator.setViewPager(TabPageIndicator.java:205)
E/AndroidRuntime(23263):        at com.windmobile.rbt.android.category.CategoryActivity.onCreate(CategoryActivity.java:115)
E/AndroidRuntime(23263):        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime(23263):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
E/AndroidRuntime(23263):        ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:56:14.980

不要重置您的适配器。而不是这样，当您的异步任务完成时更新适配器中的数据源，然后调用`notifyDataSetChanged()`适配器。

# tomcat - Tomcat：从 JavaScript 调用时，Java Servlet 响应奇怪的字符

> ID：13469512
> 
> 赞同：0
> 
> 时间：2012-11-20T08:52:26.447
> 
> 标签：tomcat, servlets

在TestAjax.java（位置：webapps/servlets/，已编译）中：

```
public void doGet(HttpServletRequest request,
                      HttpServletResponse response)
        throws IOException, ServletException
{ 
        String data = "Hello World";
        response.setContentType("text/plain");
        response.setCharacterEncoding("UTF-8");
        response.getWriter().write(data);
} 
```

在 HTML(JavaScript) 中：</p>

```
function showHelloWorld(inputForm) {
                var xhr = new XMLHttpRequest();
                    xhr.onreadystatechange = function() {
                        if (xhr.readyState == 4) {
                            var data = xhr.responseText;
                            alert(data);
                        }
                    }
                 xhr.open('GET', '../../examples/servlets/TestAjax.class', true);
                 xhr.send(null);
} 
```

在 web.xml 中：

```
<servlet> 
<servlet-name>TestAjax</servlet-name> 
<display-name>TestAjax</display-name> 
<servlet-class>TestAjax</servlet-class> 
</servlet>  
<servlet-mapping> 
<servlet-name>TestAjax</servlet-name> 
<url-pattern>/servlet/TestAjax</url-pattern> 
</servlet-mapping> 
```

症状：

## 执行 showHelloWorld() 时，警告框显示如下：

����2,

!()VCodeLineNumberTabledoGetR(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V Exceptions"# SourceFile TestAjax.java* *Hello World* * text/plain$%&UTF-8'&()*+&TestAjaxjavax/ servlet/http/HttpServletjava/io/IOExceptionjavax/servlet/ServletException&javax/servlet/http/HttpServletResponsesetContentType(Ljava/lang/String;)VsetCharacterEncoding getWriter()Ljava/io/PrintWriter;java/io/PrintWriterwrite!

*�� FN,�,�,�-��?@ABC

* * *

请注意其中有“Hello World”，但正确的响应应该只有“Hello World”，响应中不应该有所有这些废话。

我检查了代码和部署一百万次，仍然没有发现任何线索。

请对这个问题有所了解，我将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:30:39.440

您正在尝试加载已编译的 Java 类客户端，这很正常，您会得到奇怪的字符。您可能想要的是调用 servlet 路径：

```
xhr.open('GET', '<%=request.getContextPath()%>/servlet/TestAjax', true); 
```

请记住`<url-pattern>/servlet/TestAjax</url-pattern>`，这是到您的 Servlet 类的外部映射。Application 容器通过此路径将请求转发给它。

# ruby-on-rails - 带有关联的 js 响应

> ID：13469513
> 
> 赞同：0
> 
> 时间：2012-11-20T08:52:28.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, associations

我正在进行跨域 ajax 调用以从我的 rails 应用程序中获取一些数据。为此，我使用了一种我发现的很棒的方法，它就像一个魅力。然而，Rails 并没有呈现与它相关的关联。因为我确实想要这些信息，所以我尝试更改我的 format.js，但在格式化正确的输出时失败了。

这就是我现在的旅行展示方法（效果很好）：

```
respond_to do |format|
  format.html # show.html.erb
  format.js { render_json @trip.to_json }  
end 
```

但我也想渲染@trip.triplocations。但我不知道怎么做。有没有人知道这个？

以防万一，这是我发现的很棒的方法：

```
def render_json(json, options={})
  callback, variable = params[:callback], params[:variable]
  response = begin
    if callback && variable
      "var #{variable} = #{json};\n#{callback}(#{variable});"
    elsif variable
      "var #{variable} = #{json};"
    elsif callback
      "#{callback}(#{json});"
    else
      json
    end
  end
  render({:content_type => :js, :text => response}.merge(options))
end 
```

（道具去：[http](http://www.sitepoint.com/json-p-output-with-rails/) ://www.sitepoint.com/json-p-output-with-rails/ ）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:17:36.427

（顺便说一句：你真的需要这个 render_json 方法吗？）

```
format.js {render :json=> @trip.as_json(:include => :triplocations)} 
```

:include 方法将包含关联。也适用于更高的水平。 [http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json)

# html - 引导跨度问题

> ID：13469518
> 
> 赞同：1
> 
> 时间：2012-11-20T08:52:30.967
> 
> 标签：html, css, twitter-bootstrap

我正在使用 twitter 作为引导程序制作一个小 vCard，我遇到了一个小问题，我无法跟踪它的来源:)

如果您点击此链接：[演示](http://labs.rolandgroza.me/roland/)；你会看到元素有点混乱:) 在 vCard 的标题中，联系信息应该在姓名和拇指的右侧，但它被推到了下面。小描述也是如此:)

使用`row-fluid`而不是仅仅`row`可以解决这个问题，但是因为我的移动版本不需要是流体的，所以我不能使用流体网格。我希望有人以前遇到过这个问题并且知道它的来源是什么:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:43:33.817

如果你真的想让它在移动设备上运行良好，你应该真正考虑类的 css 属性`content-view-container`：当你想为“任何”屏幕尺寸设计时，你有绝对定位和固定值宽度不能很好地发挥作用...

代码中有一些问题：

*   首先`span2`and`span12`不应该是“pulled-left”（类名中还有一个拼写错误）和“pulled-right”（它使“grid”的含义变得毫无用处......）

*   的所有样式`info-button-container`都是多余的（只保留`margin-top`）

*   在`info-button-inner`你为什么使用`border-box`财产？`line-height`用属性固定图标在中间的位置

*   为什么将所有`div`s 设置为`position:relative; display: block;`？在这里没用...

*   `row`不需要该类`clearfix`，因为它已经“clearfixed”

# facebook - 我的网站运行良好，但是当我将链接复制到 Facebook 时，它显示 Index of:?

> ID：13469520
> 
> 赞同：3
> 
> 时间：2012-11-20T08:52:38.267
> 
> 标签：facebook, wordpress

我有一个wordpress网站。该网站本身运行良好。（有 www 和没有 www）当我将链接发布到 Facebook 时，它不会显示网站标题等。Just Index of: 就像我贴了一个 FTP 链接。

网站链接是[http://www.kastamonuelsanaltari.com/](http://www.kastamonuelsanatlari.com/)。

HTML 头标签似乎没问题。什么都没有。

我应该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:56:56.490

通过在您的主页中指定所需的标签，尝试指定您希望 facebook 显示的标题和其他信息。例如：

```
 <meta property="og:image" content="" />
 <meta property="og:type" content="" />
 <meta property="og:title" content="" />
 <meta property="og:url" content="" />
 <meta property="og:site_name" content="" />
 <meta property="og:description" content="" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:01:37.830

希望这可以帮助你：

您必须将主页发布为索引（全部小写，无扩展名）。之后，该页面的所有链接都应该没问题。因为浏览器会自动找到您的站点 index.php 或登录页面。

# mongodb - Mongodb SaaS 单数据库与多数据库

> ID：13469522
> 
> 赞同：2
> 
> 时间：2012-11-20T08:52:44.480
> 
> 标签：mongodb, database-design, saas, database

我知道这个问题之前已经发布过，但没有得到彻底的回答。另外我认为它仍然取决于问题参数。假设您有一个拥有**大量**客户的 SaaS 服务，但每个客户的数据量相对较少，因此拥有一个数据库可能是有意义的。

如果您的客户长期不在数千个范围内（例如，在非常好的场景中为 100 个）并且从 5 到 6 个开始，但这次您**每个客户有大量数据**（例如，商业智能服务），会发生什么情况它聚合和处理大量数据）。给你一个提示，最初每个客户需要处理 25-50GB 的数据（分析和其他东西），然后每个客户每年增加大约 10GB。

如果您沿着**单个 db**的路径前进，那么您将数据标记给具有特定字段（当然是索引）的客户，然后*依赖复制和分片*多亏了mongo，这个系统非常简单。我假设（尚未测试，如果您有这种情况，请分享一些见解）在针对索引字段的分片集合中查询查找时间应该很快。但是，假设您现在添加了另一个客户，另外 50 GB（分布在 8-10 个集合中，因此有数百万个项目/集合）。您要么必须：1）删除索引并重建它们（我想这是最糟糕的，因为系统实际上变得不可用）2）不要删除并插入索引（这将永远需要），系统将响应 3）我会认为副本集删除一个节点，删除索引，更新新客户，带回索引，然后让它加入副本集，以便他们可以开始同步。

另一方面，如果**每个客户有一个数据库**，则添加或删除可以相对快速地完成，因为系统实际上隔离了它的客户，行仍然在数百万但不接近十亿的范围内，这很好并且查找时间显然很快。无论您在这种情况下做什么，它在实现方面都更加容易和快捷，因为您将始终使用比单个 db 的情况相对较小的数量。但是，在*维护*方面（复制和分片，因为您将不断为每个客户添加更多数据），这将是一个*摩擦*当然，在这种情况下，我可能会假设您必须在单独的机器/实例中物理隔离数据库，因为操作系统对打开文件的数量有限制，当然，由于多个数据库中的多个同时连接会产生额外的开销.

如果我错过了什么，请做一些说明，但我最感兴趣的是听到关于此的其他意见......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:05:08.203

如果您停留在数百名客户中，我建议每个客户使用 DB，如果您期望更多客户，则建议按客户收集。（您不希望为数千个数据库带来一些每个数据库的开销。）

请注意您的想法，“我认为在副本集中删除一个节点，删除索引，使用新客户进行更新，带回索引，然后让它加入副本集，以便他们可以开始同步。” 将**不起作用**，因为在副本集中只有主节点可以写入。

# css - 与父容器重叠的容器

> ID：13469527
> 
> 赞同：3
> 
> 时间：2012-11-20T08:53:22.623
> 
> 标签：css, html

我有两个`divs`在彼此里面。一个**`#outside`**有一个`5px border`，第二个**`#inside`**有内容。我想在顶部和底部**`#inside`**重叠**`#outside`**，以便它有效地打破边界并看起来是 2 个括号，如果这有意义的话。

**HTML**

```
 <div id='outside'>
      <div id='inside'>
           <h1>Sample header</h1>
           <p>Sample copy</p>
      </div> <!-- inside -->
 </div> <!-- outside --> 
```

**CSS**

```
 #outside {
      border: 5px solid #000;
      padding: 5px;
 } 
```

我不太清楚如何将#inside div 移到外部 div 上，任何建议都会有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:07:10.170

在里面添加负边距..

概念：

```
#inside {
    width:   110%;
    height:  110%;
    margin-top: -10%;
    margin-left: -10%;
} 
```

或者在外面`position: relative;`制作并在里面`position: absolute;`制作`top: -10px; left: -10px;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:12:57.927

[http://jsbin.com/enabeb/1/edit](http://jsbin.com/enabeb/1/edit)

* * *

```
<div class="outer"> 
    <div class="inner"></div>
  </div> 
```

* * *

```
.outer{
  height:400px;
  width:400px;
  background:#DDD;
  border:8px solid #333;
}
.inner{
  height:416px;
  margin:-8px auto 0 auto;
  width:380px;
  background:#DDD;
} 
```

虽然这是您所要求的，但我认为这不是做您想做的事情的最佳方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T09:19:20.033

现在你可以习惯`position`这个设计了

**像这样**

```
#outside {
      border: 5px solid #000;
      padding: 5px;
  position:relative;
 }

#inside{
background:red;
  position:absolute;
  top:-10px;
    left:10px;
  right:10px;
} 
```

***[演示1](http://tinkerbin.com/siCmzU5Y)***

[演示2](http://tinkerbin.com/9bzp1zmF)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-02T22:17:27.177

我的手机（和几个朋友的）没有正确处理负边距。position: absolute 在内部 div 上，适当的大小/填充/边框在我签入的每个浏览器的桌面、手机和平板电脑上都能正常工作。

# ipad - jvectormap 在 Ipad 上切换标记大小

> ID：13469532
> 
> 赞同：2
> 
> 时间：2012-11-20T08:53:42.713
> 
> 标签：ipad, jvectormap

我想知道，是否可以更改标记的大小，仅适用于 iPad 用户？我尝试了以下方法：

```
if ((navigator.userAgent.indexOf('iPhone') != -1) ||
    (navigator.userAgent.indexOf('iPod') != -1)) {

    markerStyle: {
      initial: {
        fill: '#ff3300',
        stroke: '#383f47',
        r: 22
      }
    }

} else {

} 
```

但不起作用：S 有没有办法为 iPad 用户更改标记的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:22:12.290

您可以使用诸如[Modernizr](http://modernizr.com/)之类的特征检测库。他们在[这里有例子](https://gist.github.com/855078)。然后根据用户设备，您可以加载不同的，更适合`jvm.WorldMap`更大标记的，而不是法线贴图。

看看[这个其他问题](https://stackoverflow.com/questions/12566914/use-of-modernizr-load)，如果浏览器支持触摸，它会告诉你如何加载其他资源。

希望这可以帮助！

# windows-8 - 为非 Window 8 应用程序创建自定义 Windows 8 Start Tile

> ID：13469533
> 
> 赞同：0
> 
> 时间：2012-11-20T08:53:47.113
> 
> 标签：windows-8

在我的 Win8 机器上安装 Google Chrome 浏览器后，我有点惊讶地看到了 Windows 8 开始菜单上的自定义磁贴。与任何其他“标准”应用程序不同，Chrome 有一个深灰色的磁贴，图标稍大一些。仍然似乎没有 Windows 8 应用程序。如果我启动 Chrome，我会发现自己回到了桌面，一切都像过去几年一样工作。

如何将这种自定义添加到我自己的应用程序中？我有一个 .NET 3.51 WPF 应用程序，到目前为止，我只有一个具有默认颜色和一个小图标的普通磁贴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:16:56.017

动态磁贴仅适用于 Windows 应用商店应用。普通桌面应用程序不支持它们。谷歌浏览器具有特殊行为，因为它是默认浏览器，并且默认浏览​​器可以[充当 Windows 应用商店应用程序](https://stackoverflow.com/a/12643228/1656796)。

# visual-studio-2010 - 在 Visual Studio 中观察 C++ 矩阵的每个单元格？

> ID：13469545
> 
> 赞同：0
> 
> 时间：2012-11-20T08:54:51.060
> 
> 标签：visual-studio-2010, matrix, watch, eigen

当我尝试查看雅可比矩阵的列和行中的值时，我收到类似**CXX0059 的错误：错误：左操作数是 VS2010 中的类而不是函数名。**

例如; 我有一个矩阵

```
MatrixXf j = MatrixXf::Zero(2,mList.size());
...
...
   for(...)
   {
     j(0, col) += (-mList[i]->mLength*sin(angle));
     j(1, col) += ( mList[i]->mLength*cos(angle));
   } 
```

当我调试这部分时，它无法观察变量 j(0,col)。我知道，也许它不是一个函数名，但它有一些价值。我的意思是，矩阵由 10 个单元组成，但我从 Visual Studio 得到的只是一个浮点值。

这是调试的sc：

![调试屏幕](../Images/ed36bbde61004a714b72b19a1023f1d7.png)

感谢您对观察每个单元格的值的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:50:31.220

类上重载的`j(0, col)`构造调用，调试器不会在本机代码中评估此类构造。要查看矩阵的内容，您应该在 的实例中找到指向数据的指针。最有可能的是，它将有一个指向数据数组的类型。默认情况下，它在调试器中显示为单个浮点值。[但是您可以按照此处](https://stackoverflow.com/questions/972511/view-array-in-visual-studio-debugger)所述手动指定其大小以扩展数组，如下所示：`operator()()``MatrixXf``MatrixXf``float*``j.ptr,10`

`autoexp.dat`您可以通过在文件中编写特殊的显示规则来进一步增强此方法。[在此处](http://www.idigitalhouse.com/Blog/?p=83)查看综合教程。

# c# - WPF：什么时候真正加载、呈现和完全准备好 TabItem？

> ID：13469552
> 
> 赞同：2
> 
> 时间：2012-11-20T08:55:14.440
> 
> 标签：c#, wpf, winforms-interop, windowsformshost

在我的 WPF 应用程序中，我有一个类用作 QuickTime 的包装器。它提供了我需要的所有特定或简化的功能。为了运行，它需要创建一个 QuickTime 的 ActiveX 控件的实例并将其放置在一个有效的 Windows 窗体窗口中。我的应用程序是 WPF，构造函数的工作方式如下：

```
public VideoPlayerQT(WindowsFormsHost wfHost) {
    AxQTControl qtControl = new AxQTControl();
    wfHost.Child = qtControl;
} 
```

现在在主窗口中，我像这样使用播放器：

```
private VideoPlayerQT videoPlayer;    

private void MainWindow_Loaded(object sender, RoutedEventArgs e) {
    this.videoPlayer = new VideoPlayerQT(myWinFormsHost);
} 
```

这一直有效，直到我将 WindowsFormsHost 放入 TabControl 中。我想把它放在一个从一开始就没有显示的选项卡上。

这导致了一个奇怪的行为：我的`VideoPlayerQT`对象的构造函数试图将`AxQTControl`提供`WindowsFormsHost`的 .hwever 放在一个尚未显示的选项卡上，QuickTime 控件会抛出`InvalidActiveXStateException`. 我认为任何 ActiveX / COM 控件都会抛出它；我猜在`WindowsFormsHost`单击并显示其父选项卡之前，它处于某种“无效的 ActiveX 状态”。

我的问题是：应该在哪个事件处理程序（在哪个对象上）构建播放器？**最初处于非活动状态的 TabItem 内的 WindowsFormsHost 何时准备好并加载，就像 Window_Loaded 触发时一样？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:58:28.807

The first solution I came up with is creating the player in the method handling the **TabItem_GotFocus** event. Works fine for now, but if there is any catch to this solution, I'd like to know :)

Also, since GotFocus is such a general event I have trouble understanding why exactly is THIS okay for the WinForms host. Is the answer simply something like "tabitem's content is rendered when it receives focus, just as window's is rendered when it's loaded"?

# asp.net - 企业图书馆验证应用程序块。如何验证模型类？

> ID：13469555
> 
> 赞同：1
> 
> 时间：2012-11-20T08:55:22.110
> 
> 标签：asp.net, validation, enterprise-library

我在我的项目中使用[Enterprise Library 5.0 - Validation Application Block 5.0.505.0](http://nuget.org/packages/EnterpriseLibrary.Validation)。我已经使用验证注释（如 NotNullValidator）修改了我的模型类属性。但是当我运行我的项目并用数据填充特定的模型类时，它不会自动验证模型。我必须如下手动测试模型吗？

```
USAddress testaddress = new USAddress(); //this is the Model instance which I am validating

        //Create a new validator using the ValidationFactory method
        Validator validator = ValidationFactory.CreateValidator<USAddress>();
        ValidationResults results = new ValidationResults();
        validator.Validate(testaddress, results); 
```

我每次都必须像这样验证模型类吗？当我将数据填充到此类的属性时，它不会自动验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:39:43.000

模型验证应使用：

```
using System.ComponentModel;
using System.ComponentModel.DataAnnotations; 
```

您需要参考：

```
System.ComponentModel.DataAnnotations 
```

然后，您将可以访问以下属性：

```
[Required]
[StringLength]
[RegularExpression]
[Compare] 
```

[必需] 类似于 [NotNullValidator]。

！

# sql-server - 在 Where 子句中的情况

> ID：13469558
> 
> 赞同：0
> 
> 时间：2012-11-20T08:55:33.853
> 
> 标签：sql-server, sql-server-2008, ssrs-2008, reporting-services

我正在构建 SSRS 中的报告之一，其中参数值可以是 NULL 也可以包含 NON-NULL 值。

现在，如果用户选择的值为 NULL（来自下拉列表），那么 SQL 查询将是

```
field-Name IS NULL 
```

如果用户选择的值是 NULL 以外的任何值，则 SQL 查询将是

```
field-Name IN (@parameter-values) 
```

我需要使用 Case-When 将此条件放在 WHERE 子句中，以便用户给出的任何输入都由 SQL 查询处理并返回适当的结果。用户可能会从下拉列表中同时选择 NULL 和 Non-NULL 值。

请指导如何将“案例”条件放在 where 子句中或是否存在任何其他解决方案

**更新**：

```
WHERE @IR_Project_Type = 
    (
        CASE WHEN ([IR Project Type] = NULL) THEN ([IR Project Type] IS NULL)
        END 
    ) 
```

// 'IS NULL' 条件会引发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:20:04.703

```
WHERE ((@IR_Project_Type IS NULL AND [IR Project Type] IS NULL) OR [IR Project Type] = @IR_Project_Type) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:09:44.293

您是否承认空字符串作为字段名称中的值？如果不：

```
declare @val varchar(20) = null

select *
from something
where
  ISNULL(@val,'') = ISNULL(fieldName,'');

declare @val varchar(20) = 'aaa'

select *
from something
where
  ISNULL(@val,'') = ISNULL(fieldName,''); 
```

[SQLFiddle](http://sqlfiddle.com/#!6/b0b6f/5)

编辑：或只是：

```
declare @val varchar(20) = 'aaa'

select * 
from something
where
  (case when @val is null 
     then 
       (case when fieldName is null then 1 else 0 end)
     else
       (case when fieldName = @val then 1 else 0 end) end) = 1 
```

[SQLFiddle](http://sqlfiddle.com/#!6/b0b6f/10)

***请找到我的查询。***

```
WHERE (case when @IR_Project_Type is null 
         then 
           (case when [IR Project Type]  is null then 1 else 0 end)
         else
           (case when [IR Project Type]  = @IR_Project_Type then 1 else 0 end) end) = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:40:52.630

尝试这个：

```
WHERE  [IR_Project_Type] = 
    (
        CASE WHEN Isnull(@IR_Project_Type, '') = '' THEN NULL ELSE @IR_Project_Type
        END 
    ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T09:08:39.720

你能用厚脸皮的OR吗？

```
WHERE (Field-Name IS NULL OR Field-Name = @parameter) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T19:37:27.330

SSRS 多值参数很难（如果可能的话）包含`null`值。

我通常的解决方法是使用标准替换字符串作为替换`NULL`，例如`"<No Value>"`

然后你的 SQL 查询可以写成

```
WHERE
  [IR_Project_Type] in ( @IR_Project_Type )
  OR (
     '<No Value>' in ( @IR_Project_Type )
     AND [IR_Project_Type] is NULL
     ) 
```

这在尝试处理 true `NULL`s 时省去了很多麻烦。

# events - Magento 股票变动事件？

> ID：13469560
> 
> 赞同：7
> 
> 时间：2012-11-20T08:55:37.423
> 
> 标签：events, magento, inventory, stock

每当产品的库存数量发生变化时，是否会发生事件？

**我试过了：**

```
cataloginventory_stock_item_save_after
_after and _before. 
```

但是这个事件只有在产品被保存时才会被触发，而不是在销售或订单取消时触发。

那么有没有一个方便的事件呢？

谢谢和欢呼，马蒂亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:10:09.730

`cataloginventory_stock_item_save_commit_after`在销售时触发。

# javascript - 在codeigniter中自动显示js

> ID：13469561
> 
> 赞同：0
> 
> 时间：2012-11-20T08:55:39.330
> 
> 标签：javascript, codeigniter

我正在使用我使用的登录脚本`ajax`，需要知道此代码可能来自哪里，因为无法在我的核心文件中找到任何地方。在检查站点的视图源时能够看到下面的 js。平台是`codeigniter`

```
<!-- Begin Attracta Include 2012-10-08 04:51 -->

<script type='text/javascript'> 
function attracta_loadjs(url) {
   (function() {
       var s = document.createElement('script');
       s.type = 'text/javascript';
       s.async = true;
       s.src = url;
       var x = document.getElementsByTagName('script')[0];
       x.parentNode.insertBefore(s, x);
   })();
}
function attracta_shouldrun() {
   var v = ["/admin/","/adm/","/wp-admin/","/administrator/"];
   for (x in v) if(window.location.pathname.indexOf(v[x]) == 0) return false;
   return true;
}
function attracta_window_width() {
   if (document.body && document.body.offsetWidth) return document.body.offsetWidth;
   if (document.compatMode=='CSS1Compat' && document.documentElement && document.documentElement.offsetWidth ) return document.documentElement.offsetWidth;
   if (window.innerWidth) return window.innerWidth;
   return 0;
}
function attracta_window_height() {
   if (document.body && document.body.offsetHeight) return document.body.offsetHeight;
   if (document.compatMode=='CSS1Compat' && document.documentElement && document.documentElement.offsetHeight ) return document.documentElement.offsetHeight;
   if (window.innerHeight) return window.innerHeight;
   return 0;
}
</script>

<!-- End Attracta Include 2012-10-08 04:51 --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:34:31.607

删除一个。`fastinclude`public_html 文件中的文件，并删除托管服务中的 seo 打包工具，并要求您的托管服务禁用任何`seo`功能并需要通过 cpanel 取消吸引

# xcode - XCode 子项目预处理器覆盖

> ID：13469562
> 
> 赞同：2
> 
> 时间：2012-11-20T08:55:42.377
> 
> 标签：xcode

我的项目有一个使用 FMDB 的外部 Mapbox-ios-sdk 子项目（复制为 Mapbox-ios-sdk 中的引用，而不是子项目）。我打算让 FMDB 与 SpatiaLite 而不是库存 SQLite 链接。SpatiaLite 有一个新的 sqlite3.h 定义，其中包括一些用于重命名 C 函数定义的宏（例如`#define sqlite3_bind_double SPLite3_bind_double`）。我希望 FMDB 的东西包括这个版本的 sqlite3.h。Mapbox-ios-sdk 不包含 sqlite3.h，我怀疑它只是使用了框架`libsqlite3.dylib`，但我不知道动态框架是怎么回事。

我可以通过将 sqlite3.h 复制到 Mapbox-ios-sdk 并使其包含它来做到这一点。但是我真的不喜欢这样做，因为 Mapbox-ios-sdk 是一个外部项目。我有什么选择？

# r - 多边形在不同的缩放级别很好地裁剪 ggplot2/ggmap

> ID：13469566
> 
> 赞同：20
> 
> 时间：2012-11-20T08:55:52.647
> 
> 标签：r, ggplot2, polygon, ggmap

我正在使用空间数据集（主要是城市区域上的多边形），我想根据不同的缩放级别生成不同的视图。当我的绘图边界框大于包含多边形的区域时，一切都很好。但是在放大时，一些多边形会得到边界框之外的部分，并且这些多边形的输出是有问题的：边界框之外的多边形的点不显示，导致多边形没有在边界框限制处裁剪（正如预期的那样），但不考虑。多边形是不完整的，并且多边形仅连接图上剩余的点（正常行为，但不想要）。

一个值得讨论的好例子，这里有一个问题的演示：

```
#initialisation
library(ggmap)
require(MASS)

data(zips)

# overview
ggmap(get_map(maptype = "satellite", zoom = 8), extent = "device") +
        geom_polygon(aes(x = lon, y = lat, group = plotOrder),
                data = zips, colour = NA, fill = "red", alpha = .5) +
        geom_path(aes(x = lon, y = lat, group = plotOrder),
                data = zips, colour = "white", alpha = .7, size = .4)

# problematic view    
x11()
ggmap(get_map(maptype = "satellite", zoom = 12), extent = "device") +
        geom_polygon(aes(x = lon, y = lat, group = plotOrder),
                data = zips, colour = NA, fill = "red", alpha = .5) +
        geom_path(aes(x = lon, y = lat, group = plotOrder),
                data = zips, colour = "white", alpha = .7, size = .4) 
```

您知道在绘图边界框限制处正确裁剪多边形的好方法吗？感谢您的帮助

帕斯卡

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-20T17:16:04.770

通常，这种剪裁是由于使用比例限制（将点落在范围之外）与使用坐标限制（这是一个真正的缩放，只是在内部绘制部分而范围之外的部分仍然存在）进行缩放。 `ggmap`没有直接的方法来指示应该使用第二种缩放，但看功能，可以将相关部分拉出并重新组合在一起：

```
s12 <- get_map(maptype = "satellite", zoom = 12) 
ggmap(s12, base_layer=ggplot(aes(x=lon,y=lat), data=zips),
      extent = "normal", maprange=FALSE) +
    geom_polygon(aes(x = lon, y = lat, group = plotOrder),
                 data = zips, colour = NA, fill = "red", alpha = .5) +
    geom_path(aes(x = lon, y = lat, group = plotOrder),
              data = zips, colour = "white", alpha = .7, size = .4) +
    coord_map(projection="mercator", 
              xlim=c(attr(s12, "bb")$ll.lon, attr(s12, "bb")$ur.lon),
              ylim=c(attr(s12, "bb")$ll.lat, attr(s12, "bb")$ur.lat)) +
    theme_nothing() 
```

![在此处输入图像描述](../Images/4491581a963328c9103586b5e742e9e1.png)

# nhibernate - 将 HQL 查询结果绑定到 DevExpress GridControl

> ID：13469567
> 
> 赞同：0
> 
> 时间：2012-11-20T08:55:56.267
> 
> 标签：nhibernate, data-binding, devexpress, hql

我想将`HQL`查询结果与`DevExpress` `GridControl`.

无法在编译时预测查询定义。它是基于用户定义的配置设置构建的。

```
var queryResults = GetSession().CreateQuery(PrepereHQLQuery()).List();
gridControl1.DataSource = queryResults; 
```

假设`PrepareHQLQuery`返回`select col1, col2 from MyTable`我想得到这样的东西：

![在此处输入图像描述](../Images/089353aaf1052941c0ff1d253c835eed.png)

而不是这个：

![我不知道如何强制 DataGrid 显示对象数组中的数据](../Images/737f8527dc278055dfb45b1e88a432c4.png)

是否存在任何方式来配置 GridView 列以直接显示来自`List`的数据`Object[]`？

我还想避免中间对象，例如`DTO`由于我的 HQL 查询的不可预测性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:16:38.747

您可以创建一个包装类来封装实现 IList 和 ITypedList 接口的 HQL 查询结果。这种方法允许您使用 HQL 查询结果作为 XtraGrid 的数据源。
这是一个您可以调整的小样本：

```
IList<object[]> queryResult = new List<object[]>{
    new object[]{ "a", 11 },
    new object[]{ "b", 22 }
};
gridControl1.DataSource = new QueryWrapper(queryResult);
//...
public class QueryWrapper : IList, ITypedList {
    class ColumnDescriptor : PropertyDescriptor {
        int index;
        Type elementType;
        public ColumnDescriptor(string name, int index, Type elementType)
            : base(name, null) {
            this.index = index;
            this.elementType = elementType;
        }
        public override Type ComponentType {
            get { return typeof(RowDescriptor); }
        }
        public override bool IsReadOnly {
            get { return false; }
        }
        public override Type PropertyType {
            get { return elementType; }
        }
        public override object GetValue(object component) {
            return ((RowDescriptor)component).GetValue(index);
        }
        public override void SetValue(object component, object value) {
            ((RowDescriptor)component).SetValue(index, value);
        }
        public override bool CanResetValue(object component) { return false; }
        public override void ResetValue(object component) { }
        public override bool ShouldSerializeValue(object component) { return false; }
    }
    class RowDescriptor : CustomTypeDescriptor {
        QueryWrapper owner;
        object[] rowObjects;
        public RowDescriptor(QueryWrapper owner, object[] rowObjects) {
            this.rowObjects = rowObjects;
            this.owner = owner;
        }
        public object GetValue(int index) {
            return rowObjects[index];
        }
        public void SetValue(int index, object value) {
            rowObjects[index] = value;
        }
        public override PropertyDescriptorCollection GetProperties(Attribute[] attributes) {
            return owner.pdc;
        }
    }
    IList<object[]> query;
    List<RowDescriptor> list;
    public QueryWrapper(IList<object[]> query) {
        this.query = query;
        list = new List<RowDescriptor>(query.Count);
        for(int i = 0; i < query.Count; i++)
            list.Add(new RowDescriptor(this, query[i]));
    }
    #region IList Members
    int IList.Add(object value) {
        throw new NotSupportedException();
    }
    void IList.Clear() {
        throw new NotSupportedException();
    }
    bool IList.Contains(object value) {
        return value is RowDescriptor && list.Contains((RowDescriptor)value);
    }
    int IList.IndexOf(object value) {
        return (value is RowDescriptor) ? list.IndexOf((RowDescriptor)value) : -1;
    }
    void IList.Insert(int index, object value) {
        throw new NotSupportedException();
    }
    bool IList.IsFixedSize {
        get { return true; }
    }
    bool IList.IsReadOnly {
        get { return true; }
    }
    void IList.Remove(object value) {
        throw new NotSupportedException();
    }
    void IList.RemoveAt(int index) {
        throw new NotSupportedException();
    }
    object IList.this[int index] {
        get { return list[index]; }
        set { throw new NotSupportedException(); }
    }
    #endregion
    #region ICollection Members
    void ICollection.CopyTo(Array array, int index) {
        if(array is RowDescriptor[]) list.CopyTo((RowDescriptor[])array, index);
    }
    int ICollection.Count {
        get { return list.Count; }
    }
    bool ICollection.IsSynchronized {
        get { return false; }
    }
    object ICollection.SyncRoot {
        get { return this; }
    }
    #endregion
    #region IEnumerable Members
    IEnumerator IEnumerable.GetEnumerator() {
        return list.GetEnumerator();
    }
    #endregion
    #region ITypedList Members
    PropertyDescriptorCollection pdc;
    PropertyDescriptorCollection ITypedList.GetItemProperties(PropertyDescriptor[] listAccessors) {
        if(pdc == null) {
            if(query.Count > 0) {
                PropertyDescriptor[] pd = new PropertyDescriptor[query[0].Length];
                for(int i = 0; i < pd.Length; i++)
                    pd[i] = new ColumnDescriptor("Column" + i, i, query[0][i].GetType());
                pdc = new PropertyDescriptorCollection(pd);
            }
            else pdc = new PropertyDescriptorCollection(new PropertyDescriptor[] { });
        }
        return pdc;
    }
    string ITypedList.GetListName(PropertyDescriptor[] listAccessors) { return string.Empty; }
    #endregion
} 
```

# javascript - JS内容不显示

> ID：13469580
> 
> 赞同：0
> 
> 时间：2012-11-20T08:56:48.950
> 
> 标签：javascript, tabs, show

我有几个用 jquery 函数 tabs(); 制作的标签。

```
<div class="vtabs">
  <a href="#tab1">Tab1</a>
  <a href="#tab2">Tab2</a>
</div>

<div id="tab1" class="vtabs-content">
  Any html content
</div>

<div id="tab2" class="vtabs-content" style="display:none">
  <div id="map" style="width: 400px; height: 200px"></div>
</div>

  <script type="text/javascript"><!--
  $('.vtabs a').tabs();
  //--></script> 

<script type="text/javascript">
        ymaps.ready(init);

        function init () {
            ymaps.geocode('', { results: 1 }).then(function (res) {
                var firstGeoObject = res.geoObjects.get(0);
                window.myMap = new ymaps.Map("map", {
                    center: firstGeoObject.geometry.getCoordinates(),
                    zoom: 17
                });
            .
            .
            .
    </script> 
```

因此，当我单击第二个选项卡时，会显示第一个选项卡，其中 id 的 js 内容 - 地图未显示。虽然如果我按下萤火虫这个 div 一切都会出现！

如何使此内容显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:19:31.927

确保您有唯一的 id 并将所有内容放在 div 中

```
<div id="vtabs">
 <a href="#tab1">Tab1</a>
 <a href="#tab2">Tab2</a>

 <div id="tab1" class="vtabs-content">
    Any html content
 </div>

<div id="tab2" class="vtabs-content" >
  <div id="map" style="width: 400px; height: 200px"></div>
 </div>
</div>

<script>
    $(function() {
       $( "#vtabs" ).tabs();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:02:35.203

首先 - 不要为不同的 div 使用相同的 id ('tab1')

# android - listview里面有webview，webview里面有edittext，当它有焦点时，它不会丢失

> ID：13469584
> 
> 赞同：1
> 
> 时间：2012-11-20T08:56:56.630
> 
> 标签：android, listview, webview, android-edittext

我正在尝试在里面创建一个带有 WebView 的 ListView，然后每个 webview 加载 url，例如 www.baidu.com 哪个网页有“输入”元素，它有问题。当我触摸edittext时，它聚焦并弹出输入法，然后触摸edittext之外的任何区域，它没有响应。（在webview中，它没有响应，但listview中的其他webview项目有）这是我的代码：

主要活动

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    BAdapter adapter = new BAdapter(getApplicationContext(), getLayoutInflater());
    listview = (ListView)findViewById(R.id.listview);
    listview.setDivider(new ColorDrawable(Color.BLACK) );
    listview.setDividerHeight(2);
    listview.setAdapter(adapter);
} 
```

BAdapter 扩展 BaseAdapter

```
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub  
    convertView = mInflater.inflate(R.layout.listitem, parent,false);
    webview = (WebView)convertView.findViewById(R.id.webview);
    webview.loadUrl("http://www.baidu.com");
    return convertView;
} 
```

main_layout.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" > 
   <ListView
       android:id="@+id/listview"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       />
</RelativeLayout> 
```

认为！

# java - 显示 void 类型的返回值

> ID：13469585
> 
> 赞同：1
> 
> 时间：2012-11-20T08:56:57.870
> 
> 标签：java, void

```
package email;

public class Test {
  public static void main(String[] args) {
    Email email = new Email("833","388","How are you?");
    someMethod(email);
  }

  private static void someMethod(Email email) {
    System.out.println(email.trimLines());
  }
} 
```

我有一个关于显示 void 类型的返回值的问题。所以 trimLines 是一个 void 类型的方法。我看不出如何显示 void 类型的方法，因为该方法不返回任何内容，因此没有任何内容可显示。由于`println`采用字符串类型，这将导致错误。

我找不到任何`System.out`可以显示 void 类型的方法。这是在我的作业中指定的，以显示 void 方法的返回值。我认为我的老师犯了一个错误，但可能有一些适用于 void 类型的东西。

任何人都可以确认我的老师是否犯了错误或者有没有可以显示空类型的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:58:02.790

*void*表示该方法不返回*任何内容*，甚至不返回 null。所以也许你的作业真的有错误。

我们不知道您的`EMail`课程的实施情况。因此`trimlines()`可能会影响您的电子邮件实例的内部状态（“邮件正文”）。也许您必须首先调用对象并在第二步中`trimlines()`打印*电子邮件。*

# jquery - 我的 jquery 选择器有什么问题？

> ID：13469586
> 
> 赞同：-1
> 
> 时间：2012-11-20T08:57:02.473
> 
> 标签：jquery, jquery-selectors

```
<script type="text/javascript" language="javascript">

   $(document).ready(function() {

      $("a.g").click(function(event){
         event.preventDefault();
      });

   });
   </script>

<a class="g" href="http://www.google.com/"></a> 
```

仍然可以点击，我认为我在选择器中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:59:41.613

its possible because you haven't include jquery

include

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:02:21.073

它没有什么问题，您需要[包含 jquery library](http://jquery.com/download/)。你在事件中什么也不做，你也没有锚标签的文本

[**现场演示**](http://jsfiddle.net/MeXvL/)

```
<a class="g" href="http://www.google.com/">aaa</a>​

$(document).ready(function() {

      $("a.g").click(function(event){
          alert("");
         event.preventDefault();
      });

});​ 
```

# visual-studio - Visual Studio 2012 可移植类库引用错误

> ID：13469589
> 
> 赞同：1
> 
> 时间：2012-11-20T08:57:13.487
> 
> 标签：visual-studio

我正在使用 Visual Studio Ultimate 2012 RC 创建 Silverlight LOB 应用程序。每次添加对可移植类库的引用时，都会出现构建错误。

“ResolveAssemblyReference”任务意外失败。System.TypeLoadException：无法从程序集“Microsoft.Build.Utilities.v4.0，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”加载类型“Microsoft.Build.Utilities.WinMDFoldersExInfo”。

我说 Silverlight 项目可以引用 PCL 并且一切都按预期工作，但是任何 .NET 项目（类库、Web 应用程序等）对象。我尝试将目标平台从 .NET 4.5 更改为 4，没有区别。一旦我删除对 PCL 的引用，错误就会消失。

PCL 的目标框架是： 适用于 Metro 风格应用程序的 .NET .NET Framework 4.5 Silverlight 4 及更高版本 Windows Phone 7 及更高版本

我试过改变目标框架，但似乎没有帮助。任何帮助将不胜感激。

# .net - VS 2010 .NET 应用程序发布在 XP 或 Server 2003 上编译崩溃

> ID：13469590
> 
> 赞同：0
> 
> 时间：2012-11-20T08:57:25.403
> 
> 标签：.net, visual-studio-2010, crash, windows-xp, visual-studio-2012

我正在考虑将我的一个应用程序从 VS2010 移动到 VS2012。该解决方案由相当多的项目组成，因此我将尝试概述主要部分。

入口点是一个基于 .NET 3.5 SP1 的 WPF 应用程序。本项目引用了一个 .NET 2.0 类库和一个使用 VS2008 的 VC90 库编译的 .NET 2.0 C++/CLR 库。.NET 2.0 类库也使用 C++ 库。

我不使用很多外部二进制文件。事实上，除了 WiX 之外，唯一的就是 WPF 工具包 (http://wpf.codeplex.com/releases/view/29117)。

那么会发生什么？我在 Win8 上使用 VS2010 编译应用程序（为 VC90 库安装了 VS2008），一切都在每个平台上运行良好。现在，当我将解决方案移植到 VS2012（当然，再次为 VC90 库安装 VS2008 和 VS2010）并创建构建时，它在 Win7、Win8 和 Server 2008R2 上运行良好。然而，VS2012 创建的二进制文件在 XP 和 Server 2003 上启动时崩溃。我检查了安装的 .NET 3.5 SP1 并使用 VS2010 创建的二进制文件进行了验证。他们工作。

该错误是简单的崩溃报告窗口和一个事件日志条目，其中包含以下详细信息：.NET Runtime 2.0 Error Reporting Faulting application application.exe, version 1.0.0.0, stamp 50a39d24, faulting module kernel32.dll, version 5.2.3790.4480, stamping 49c51e7e ，调试？0，故障地址0x0000bef7。

这对我一点帮助都没有。关于如何解决这个问题或在哪里进一步寻找的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:22:07.137

感谢您的输入。它为我指明了正确的方向。我进行了故障转储分析，导致我重新检查了事件日志条目。事实上，我发现了另一个我之前错过的条目。有一个并行错误源于新机器上错误版本的 VC90 DLL。缺少 VS2008 SP1 安全更新。安装并重新编译解决方案后，它现在可以按预期工作。

谢谢你。

# python - Python 3：揭开编码和解码方法的神秘面纱

> ID：13469591
> 
> 赞同：12
> 
> 时间：2012-11-20T08:57:26.153
> 
> 标签：python, unicode, encoding, python-3.x

假设我在 Python 中有一个字符串：

```
>>> s = 'python'
>>> len(s)
6 
```

现在我`encode`这个字符串是这样的：

```
>>> b = s.encode('utf-8')
>>> b16 = s.encode('utf-16')
>>> b32 = s.encode('utf-32') 
```

我从上面的操作中得到的是一个字节数组——即`b`,`b16`并且`b32`只是字节数组（每个字节当然是 8 位长）。

但是我们对字符串进行了**编码**。那么这是什么意思？我们如何将“编码”的概念与原始字节数组联系起来？

答案在于这些字节数组中的每一个都是以特定方式生成的。让我们看看这些数组：

```
>>> [hex(x) for x in b]
['0x70', '0x79', '0x74', '0x68', '0x6f', '0x6e']

>>> len(b)
6 
```

这个数组表示对于每个字符我们都有一个字节（因为所有字符都低于 127）。因此，我们可以说将字符串“编码”为 'utf-8' 会收集每个字符对应的代码点并将其放入数组中。如果代码点不能容纳在一个字节中，则 utf-8 会占用两个字节。因此 utf-8 消耗尽可能少的字节数。

```
>>> [hex(x) for x in b16]
['0xff', '0xfe', '0x70', '0x0', '0x79', '0x0', '0x74', '0x0', '0x68', '0x0', '0x6f', '0x0', '0x6e',  '0x0']

>>> len(b16)
14     # (2 + 6*2) 
```

在这里我们可以看到“编码为 utf-16”首先将两个字节的 BOM ( `FF FE`) 放入字节数组中，然后对于每个字符将两个字节放入数组中。（在我们的例子中，第二个字节总是零）

```
>>> [hex(x) for x in b32]
['0xff', '0xfe', '0x0', '0x0', '0x70', '0x0', '0x0', '0x0', '0x79', '0x0', '0x0', '0x0', '0x74', '0x0', '0x0', '0x0', '0x68', '0x0', '0x0', '0x0', '0x6f', '0x0', '0x0', '0x0', '0x6e', '0x0', '0x0', '0x0']

>>> len(b32)
28     # (2+ 6*4 + 2) 
```

在“以 utf-32 编码”的情况下，我们首先放入 BOM，然后为每个字符放入四个字节，最后将两个零字节放入数组中。

因此，我们可以说“编码过程”为字符串中的每个字符收集 1 2 或 4 个字节（取决于编码名称），并在它们前面添加和附加更多字节以创建最终的字节结果数组。

现在，我的问题：

*   我对编码过程的理解是正确的还是我遗漏了什么？
*   我们可以看到变量的内存表示，实际上`b`是一个字节列表。字符串的内存表示是什么？究竟是什么存储在内存中的字符串？`b16``b32`
*   我们知道，当我们做一个 时`encode()`，会收集每个字符对应的代码点（与编码名称对应的代码点）并放入一个数组或字节中。当我们执行 a 时究竟会发生什么`decode()`？
*   我们可以看到在 utf-16 和 utf-32 中都附加了一个 BOM，但是为什么在 utf-32 编码中附加了两个零字节呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-20T09:17:07.933

首先，[UTF-32](https://en.wikipedia.org/wiki/UTF-32)是一个 4 字节的编码，所以它的 BOM 也是一个 4 字节的序列：

```
>>> import codecs
>>> codecs.BOM_UTF32
b'\xff\xfe\x00\x00' 
```

而且由于不同的计算机体系结构以不同的方式处理字节顺序（称为[Endianess](http://en.wikipedia.org/wiki/Endianness)），因此 BOM 有两种变体，小端和大端：

```
>>> codecs.BOM_UTF32_LE
b'\xff\xfe\x00\x00'
>>> codecs.BOM_UTF32_BE
b'\x00\x00\xfe\xff' 
```

BOM 的目的是将该命令传达给解码器；阅读 BOM，您就*知道*它是大端还是小端。因此，UTF-32 字符串中的最后两个空字节是最后一个编码字符的一部分。

因此，[UTF-16](https://en.wikipedia.org/wiki/UTF-16) BOM 是相似的，因为有两种变体：

```
>>> codecs.BOM_UTF16
b'\xff\xfe'
>>> codecs.BOM_UTF16_LE
b'\xff\xfe'
>>> codecs.BOM_UTF16_BE
b'\xfe\xff' 
```

这取决于您的计算机体系结构，默认情况下使用哪一种。

[UTF-8](https://en.wikipedia.org/wiki/UTF-8)根本不需要 BOM；UTF-8 每个字符使用 1 个或更多字节（根据需要添加字节以编码更复杂的值），但这些字节的顺序在标准中定义。Microsoft 认为无论如何都需要引入 UTF-8 BOM（因此其记事本应用程序可以检测 UTF-8），但由于 BOM 的顺序永远不会改变，因此不鼓励使用。

至于 Python 为 unicode 字符串存储了什么；这实际上在 Python 3.3 中发生了变化。在 3.3 之前，在 C 级别内部，Python 存储 UTF16 或 UTF32 字节组合，具体取决于 Python 是否使用宽字符支持进行编译（请参阅[如何确定 Python 是使用 UCS-2 还是 UCS-4 编译？](https://stackoverflow.com/questions/1446347/how-to-find-out-if-python-is-compiled-with-ucs-2-or-ucs-4)， UCS-2*本质上是*UTF-16，而 UCS-4 是 UTF-32）。因此，每个字符要么占用 2 个字节或 4 个字节的内存。

从 Python 3.3 开始，内部表示使用表示字符串中所有字符所需的*最少字节数。*对于纯 ASCII 和 Latin1 可编码文本，使用 1 个字节，对于[BMP](https://en.wikipedia.org/wiki/Basic_Multilingual_Plane#Basic_Multilingual_Plane)的其余部分，使用2 个字节，并且使用包含超过 4 个字节的字符的文本。Python 根据需要在格式之间切换。因此，在大多数情况下，存储变得更加高效。有关更多详细信息，请参阅[Python 3.3 中的新增功能](http://docs.python.org/3/whatsnew/3.3.html#pep-393)。

我*强烈*建议您阅读 Unicode 和 Python：

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)
*   Python [Unicode HOWTO](http://docs.python.org/3/howto/unicode.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T09:14:48.337

1.  就目前而言，您的理解基本上是正确的，尽管它并不是真正的“1、2 或 4 字节”。对于 UTF-32，它将是 4 个字节。对于 UTF-16 和 UTF-8，字节数取决于被编码的字符。对于 UTF-16，它将是 2 或 4 个字节。对于 UTF-8，它可能是 1、2、3 或 4 个字节。但是，是的，基本上编码采用 unicode 代码点并将其映射到字节序列。这种映射是如何完成的取决于编码。对于 UTF-32，它只是代码点编号的直接十六进制表示。对于 UTF-16，通常是这样，但对于不寻常的字符（在基本多语言平面之外）会有所不同。对于 UTF-8，编码更复杂（参见[Wikipedia](https://en.wikipedia.org/wiki/UTF-8).) 至于开头的额外字节，它们是字节顺序标记，用于确定代码点片段的顺序是 UTF-16 还是 UTF-32。
2.  我想你可以看看内部结构，但是字符串类型（或 Python 2 中的 unicode 类型）的目的是保护你免受这些信息的影响，就像 Python 列表的目的是保护你不必操纵原始数据一样该列表的内存结构。存在字符串数据类型，因此您可以使用 unicode 代码点而不必担心内存表示。如果要使用原始字节，请对字符串进行编码。
3.  当您进行解码时，它基本上会扫描字符串，寻找字节块。编码方案本质上提供了“线索”，使解码器可以看到一个字符何时结束而另一个字符何时开始。所以解码器扫描并使用这些线索来找到字符之间的边界，然后查找每个片段以查看它在该编码中代表什么字符。如果您想了解每种编码如何将代码点与字节来回映射的详细信息，您可以在 Wikipedia 等上查找各个编码。
4.  两个零字节是 UTF-32 字节顺序标记的一部分。因为 UTF-32 始终使用每个代码点 4 个字节，所以 BOM 也是 4 个字节。基本上，您在 UTF-16 中看到的 FFFE 标记是用两个额外的零字节补零的。这些字节顺序标记指示组成代码点的数字是按从大到小还是从小到大的顺序排列的。基本上就像选择将“一千二百三十四”这个数字写成1234还是4321一样。不同的计算机体系结构在这件事上做出了不同的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T09:11:47.650

我将假设您使用的是 Python 3（在 Python 2 中，“字符串”实际上是一个字节数组，这会导致 Unicode 痛苦）。

（Unicode）字符串在概念上是一系列 Unicode 代码点，它们是对应于“字符”的抽象实体。[您可以在Python 存储库](http://hg.python.org/cpython/file/bd8afb90ebf2/Objects/unicodeobject.c)中查看实际的 C++ 实现。由于计算机没有代码点的固有概念，因此“编码”指定了代码点和字节序列之间的部分双射。

设置了编码，因此在可变宽度编码中没有歧义——如果你看到一个字节，你总是知道它是否完成了当前的代码点，或者你是否需要读取另一个。从技术上讲，这称为[无前缀。](http://en.wikipedia.org/wiki/Prefix_code)因此，当您执行 a 时`.decode()`，Python 会遍历字节数组，一次构建一个编码字符并输出它们。

两个零字节是 utf32 BOM 的一部分：大端 UTF32 将具有`0x0 0x0 0xff 0xfe`.

# java - 当数据通过有意图的活动传递时，android如何工作？

> ID：13469593
> 
> 赞同：-2
> 
> 时间：2012-11-20T08:57:30.990
> 
> 标签：java, android, android-intent, android-activity, operating-system

嗨我想知道android平台的基本机制。我们知道当我们想要将数据传递给另一个活动时，通常的方法是创建一个意图并使用方法调用`putExtras`为数据创建一个标签并通过意图传递数据。`getExtras`被调用的活动将通过或类似的方法检索数据。我的问题是这是否像剪贴板一样工作，即将信息放在共享位置然后检索它？如果是这样的话，那么这件事是如何运作的呢？背后的夹板式机制是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:06:37.993

好吧，如果你看到你会在 onCreate(bundle) 之类的 onCreate 方法中找到 Bundle。您将在每个活动中捆绑。捆绑就像一个公文包，你在一个活动中做什么你打开那个公文包并在里面放一些值关闭它，当你去另一个课程（活动）时假设两个。你拿那个公文包打开它，拿出那个价值并使用它。它不像剪贴板那样工作，你不能复制或粘贴它。我希望这会有所帮助。

# html - 如何使用变量设置 div 的背景颜色？

> ID：13469594
> 
> 赞同：2
> 
> 时间：2012-11-20T08:57:33.057
> 
> 标签：html, rgb

我想根据变量的值在 a`div-box`上着色 a`red`以进行缩放。变量来自- 。`green``box.benefit``box.benefit``0``255`

问题是`green`我试图通过减法得到逆的部分。没有减法，它正在工作。

```
<div class= "draggable" id={{box.id}} 
  style="background-color:rgb({{ box.benefit }}, (255 - {{ box.benefit }}), 0); 
     width:{{box.cost}}px"></div> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T22:46:14.440

考虑到我在您的帖子中不清楚何时或如何触发颜色变化以及如何获得`box.benefit`值的事实，我制作了这个示例[小提琴](http://jsfiddle.net/RsBx9/)来解释如何使用 jQuery 轻松完成此操作。现在`div`单击目标时会模拟触发器。该`'red'`值现在是硬编码的，但如果您解释它的设置位置，则可以动态获取。

html和初始css如下

```
<div class="draggable" id="box.id">Target</div>​

.draggable {
    width: 100px;
    height: 100px;
    background-color: rgb(255,0,0);
}​ 
```

和 javascript

```
$('.draggable').click(function(){
    var boxcost = "200px";
    var boxbenefit = 25;
    var green = 255-boxbenefit;
    var rgb = "rgb("+boxbenefit+", "+green+", 0)";
    var cssObj = {
      'background-color' : rgb,
      'width' : boxcost
    }
    $(this).css(cssObj);   
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:17:15.600

该`style`属性不能采用等式。您需要计算变量本身的最终值，然后将其输入到您的`rgb`.

我不太熟悉 Ember.js，但看起来你可能正在使用它。如果你是，你可以尝试这样的事情：

**余烬**

```
box = Ember.Object.create({
  benefit: 0,
  inverseColor: function() {
    return 255 - this.get('benefit');
  // Call this flag to mark the function as a property
  }.property()
}); 
```

**HTML**

```
<div class= "draggable" id={{box.id}} 
  style="background-color:rgb({{ box.benefit }}, ({{ box.inverseColor }}), 0); 
     width:{{box.cost}}px"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:13:06.747

有一种方法可以使用[SCSS](http://sass-lang.com/)（也称为“Sassy CSS”）在 CSS 中进行计算和使用变量。

这是他们网页上的一个示例：

```
$blue: #3bbfce;
$margin: 16px;

.content-navigation {
  border-color: $blue;
  color:
    darken($blue, 9%);
}

.border {
  padding: $margin / 2;
  margin: $margin / 2;
  border-color: $blue;
} 
```

还有其他一些特性使它非常好用。此外，它自动嵌入到“Ruby on Rails”中。

# c# - 使用字符串如何在 c# 中获取 html 中的图像标签？

> ID：13469595
> 
> 赞同：0
> 
> 时间：2012-11-20T08:57:34.860
> 
> 标签：c#, c#-4.0, c#-3.0

我正在 C#.net 中制作一个项目，我必须在其中获取网页的源代码并识别一些特定的标签。

例如，我必须找到所有

```
 <img> 
```

代码中的标记。我必须将它存储在一个变量中。

通过我的 c#.net 应用程序获取网页的源代码，我成功迈出了第一步。我不知道如何获取标签并将其位置存储在变量中？

给我一个建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:10:13.127

[要解析 HTML，请使用HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)等专用库，但要[避免使用正则表达式](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

这是[从 HTML 片段中提取链接的示例](http://runtingsproper.blogspot.co.uk/2009/11/easily-extracting-links-from-snippet-of.html)，您可以对其进行调整以获取 img 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:12:10.637

我建议使用 HtmlAgitityPack 来完成这项工作，它非常灵活地使用原始 html 标记来获取标记的内容，例如：

```
 HtmlDocument htmlDocument = new HtmlDocument();
 htmlDocument.LoadHtml("<html><head></head><body><div><img /><div><img /><img/></div></div><img/></body></html>");

 var nodes = htmlDocument.DocumentNode.SelectNodes("//img");
 // 4 nodes found
 foreach (var node in nodes)
 {
     // do stuff
 } 
```

# php - 使用 ZendGuard 加密代码时找不到 Zend_Log 类

> ID：13469598
> 
> 赞同：2
> 
> 时间：2012-11-20T08:57:40.490
> 
> 标签：php, magento

我正在尝试使用 ZendGuard 5.5 for PHP5.3 锁定一些 PHP，并且在 PHP 5.2 下运行良好，没有任何问题。我可以在未加密的情况下很好地运行代码，但是当我添加加密时，它会引发以下错误：

**致命错误：在第 0 行的 ../app/code/local/MyModule/TestModule/Model/Mysql4/Setup.php 中找不到类“Zend_Log”**

如果我开始用未加密的版本替换有问题的文件，则错误会移动到模块中的其他加密文件。

以下是放置在每个 PHP 文件顶部以启用许可证支持的代码。*此代码实际上适用于最近编程的另一个新模块。*

```
if(zend_loader_file_encoded()) {

    if(!zend_loader_enabled() || !zend_get_id()) {

        exit('<strong>Error:</strong> The Zend Optimizer loader is not enabled! <br /><br />To enable it, please modify the following in your php.ini:  zend_optimizer.enable_loader = on.');
                                                }

            else if(!zend_loader_file_licensed()){
                $licensePath = Mage::getModuleDir('etc', 'MyModule_TestModule'). DS . 'license' . DS . 'license.zl';
                    if(!file_exists($licensePath)) {
                        exit("<strong>Error:</strong> No license file was found. Your license file should be located in: $licensePath. <br /><br />If you do not have a license, you need to obtain one from the Dev Team by contacting: <a href=\"mailto:devteam@site.com\">devteam@site.com</a>.");
                                               } 

if(!zend_loader_install_license($licensePath)) {
exit('<strong>Error:</strong> An error occurred while loading your license file. Please contact support at <a href="mailto:devteam@site.com">devteam@site.com</a>.');
                       }
                    }
                } 
```

我已经搜索了低和高，无法为我的生活弄清楚这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T03:13:35.753

在使用 ZendGuard 编码一些代码后，我遇到了类似的“找不到类”错误。

禁用变量、函数和类名的混淆重新编码为我解决了这个问题。

ZendGuard 编码器似乎无法处理某些类型的不寻常但合法的 PHP 语法。

# javascript - 在 Ext.FormPanel 中使用 getValues()

> ID：13469600
> 
> 赞同：2
> 
> 时间：2012-11-20T08:57:45.093
> 
> 标签：javascript, extjs

我的 ExtJs 3.4 项目中的 getValues() 有问题。
我想获取字段值以将其发送到服务器。
我说：

```
alert(searchform.getForm().getValues()); 
```

并得到：`[object Object]`。好吧，我说：

```
alert(searchform.getForm().getValues(true)); 
```

并得到：`cadastr_search=fd&address_search=fgdsg&cadastr_origin_search=gfdg&area_search=gdf&area_origin_search=fdgdf`。

有可能得到对`fieldName: value`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:10:10.217

尝试

```
console.log(searchform.getForm().getValues()); 
```

`alert()`无法打印 JavaScript 对象。

获取 JSON 字符串调用

```
Ext.util.encode(searchform.getForm().getValues()) 
```

[API 参考](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.util.JSON-method-encode)

**编辑**

像这样

```
var obj = searchform.getForm().getValues();
for (var prop in obj) {
    alert(prop + " : " + obj[prop]);
} 
```

# codemirror - 检测代码镜像中的新行

> ID：13469605
> 
> 赞同：1
> 
> 时间：2012-11-20T08:57:55.217
> 
> 标签：codemirror

有没有办法在代码镜像编辑器中检测换行符，无论是当用户点击输入还是一行代码换行时？

ps：在所附的屏幕截图中，用户按回车键（228、229、230）创建了 3 行新行，并且由于换行而创建了一行（229 和 300 之间）。

截图在这里：[http ://s9.postimage.org/gsroinedp/Scr​​een_Shot_2012_11_19_at_11_30_09_PM.png](http://s9.postimage.org/gsroinedp/Screen_Shot_2012_11_19_at_11_30_09_PM.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T04:33:52.010

捕捉回车键内置在 api 中。

```
 var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
    lineNumbers: true,
    lineWrapping:'true',
      extraKeys:{
        Enter: function(){
            alert('enter pressed');
        }
    }
  }); 
```

我目前不知道任何允许您捕获“包装”事件的 api。

您可以获得 CodeMirror-scrollbar-inner 高度，并且如果它的大小增加，并且它不是 onpaste 事件，您知道换行或输入被按下:)

# visual-studio-2010 - TableLayoutPanel 列排序和 Windows 8

> ID：13469607
> 
> 赞同：0
> 
> 时间：2012-11-20T08:58:02.010
> 
> 标签：visual-studio-2010, windows-8, tablelayoutpanel

我们的应用程序面向 .net4.0，代码是 vb.net 和 c# 项目的混合。这个特定的项目是 vb.net。我的开发机器是带有 vs 2010 sp1 的 windows 7x64 pro 和 VS2010 + Windows 8x64 VMWare 机器。

在 Windows 7 中，我们的 tablelayoutpanel 在设计时正确显示以及生成的可执行 winforms 应用程序。然而，在 Wondows 8 中运行我们的应用程序，我们看到 TableLayoutPanels 中的列顺序是混淆的。

我附上了一个截图，现在起初我们只是认为它与 Windows 8 的工作方式有关，并希望在 Windows 8 中重新编译可以修复它。没有！在 Windows 8 中打开相同的源文件显示按照附加的屏幕截图，混合列。所以我们修复了排序，编译并且在 Windows 8 中它显示得很好，但是在 Windows 7 中，我们再次得到了混合的列顺序。

那么在 Windows 7 或 8 中修复它而其他显示不正确？

任何人都可以提供任何建议吗？它不像我们可以通过电子邮件向 Microsoft 寻求答案并期望很快得到修复。

![截屏](../Images/c94ccb1a154f5b026d0982e772812ffa.png)

编辑：我们真的坚持这一点，有什么想法/建议吗？

Edit2：MSDN 社区支持告诉我通过 connect.microsoft.com 提出它，我已经这样做了，但我不希望它永远得到解决。所以我将不得不用其他东西替换这个用户控件，并希望我找不到其他有类似问题的用户控件，否则 Windows 8 支持将被永久搁置。将在它被接受为错误并且不会很快修复的基础上关闭它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:03:21.017

对于其他有此问题的人。
我收到了来自 connect.microsoft 的回复，它已在 2013 年 1 月 8 日的 4.5 补丁版本中修复。

* * *

Microsoft 于 2013 年 1 月 17 日 17:52 发表 感谢您的反馈。我们能够重现此问题，并确认它已在最近发布的 .Net Framework 4.5 更新中得到修复，该更新于 1 月 8 日开始在 Windows 更新中可用。

许多客户发现在论坛 (http://www.microsoft.com/communities/forums/default.mspx) 中讨论此类问题很有用，Microsoft 和社区的其他成员可以在这些论坛中建议解决方法。请保持反馈。

谢谢， Windows 窗体团队

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:12:26.670

– 我的蹩脚建议是尝试“滚动你自己的”——也许 ide 的两个版本正在打乱顺序。

您在上面显示的所有表格布局都可以使用代码完成，这可能会避免您在 windows 8 和 windows 7 上看到的问题我在 [http://social.msdn.microsoft.com/Forums/en/找到了这个vbgeneral/线程/4e6bc84b-b465-4bee-9316-c0ee68d9fa20](http://social.msdn.microsoft.com/Forums/en/vbgeneral/thread/4e6bc84b-b465-4bee-9316-c0ee68d9fa20)

暗淡 tlp 作为新的 TableLayoutPanel
tlp.ColumnCount = 3
tlp.RowCount = 5
tlp.AutoSize = True

```
 Dim labels(4) As Label  
    For i As Byte = 0 To 4  
        labels(i) = New Label  
        labels(i).Text = "Label number " & i  
        tlp.Controls.Add(labels(i), 0, i)  
    Next i  

    Dim comboboxes(4) As ComboBox  
    For i As Byte = 0 To 4  
        comboboxes(i) = New ComboBox  
        comboboxes(i).Items.AddRange _  
        (New String() {"first item", "second item", "item number 3"})  
        tlp.Controls.Add(comboboxes(i), 1, i)  
    Next i  

    Dim firstRowButton As New Button  
    firstRowButton.Text = "New button!" 

    tlp.Controls.Add(firstRowButton, 2, 0)  

    Dim thirdRowTextBox As New TextBox  
    tlp.Controls.Add(thirdRowTextBox, 2, 2)  

    Me.Controls.Add(tlp) 
```

祝你好运

# c# - Why order by year is not working?

> ID：13469610
> 
> 赞同：1
> 
> 时间：2012-11-20T08:58:11.713
> 
> 标签：c#, linq

I have a table called Events and these are example of `EndDate` columns:

![enter image description here](../Images/64b84fcf22d925c2f62ff38189621a7a.png)

I am trying to extract months from these events, but I want them to be like: `11, 12, 1` (11 and 12 from current year, and 1 is from next year - 2013).

```
var ev = db.Events.Select(d => new { Month = d.StartDate.Value.Month, 
                                     EndDate = d.EndDate })
                  .Where(d => (d.EndDate >= DateTime.Now
                           || (   d.EndDate.Value.Day == DateTime.Now.Day 
                               && d.EndDate.Value.Month >= DateTime.Now.Month) ))
                  .OrderBy(d => d.EndDate.Value.Year)
                  .Select(d => new { Month = d.Month }).Distinct(); 
```

Well, I don't understand why this query does not work. It extracts months as: `1, 11, 12` which of course, is not what I want...

Ps: You can ignore `where` clause, that is only filtering the events from `now on`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:10:39.613

您仅按年份排序，`.OrderBy(d => d.EndDate.Value.Year)`但您可能希望按`d.EndDate.Value`

仅年份将忽略日期的任何天/月部分......因此列表中的“第一个”2012 是第一项。

```
 var events = new List<DateTime>
    {
        new DateTime(2013,11,1),
        new DateTime(2013,5,1),
        new DateTime(2013,4,1),
        new DateTime(2012,12,29),
        new DateTime(2012,12,28)
    };

    var ev = events.Select(d => new { Month = d.Month, Date = d })
        .Where(d => (d.Date >= DateTime.Now || (d.Date.Day == DateTime.Now.Day && d.Date.Month >= DateTime.Now.Month)))
        .OrderBy(d => d.Date.Year)
        .Select(d => new { Month = d.Month })
        .Distinct(); 
```

将返回`12,11,5,4`

```
var ev = events.Select(d => new { Month = d.Month, Date = d })
                .Where(d => (d.Date >= DateTime.Now || (d.Date.Day == DateTime.Now.Day && d.Date.Month >= DateTime.Now.Month)))
                .OrderBy(d => d.Date)
                .Select(d => new { Month = d.Month })
                .Distinct(); 
```

将返回`12,4,5,11`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:05:38.037

这可能不是它，但我在文档中看不到任何`Enumerable.Distinct()`保证结果的任何给定顺序。您可能想重新调整您的查询以检查是否是这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T09:12:05.257

将 Order 语句更改为：

> .OrderBy(d => d.EndDate.Value.Year).ThenBy(d => d.EndDate.Value.Month)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T09:12:46.747

如果您有日期枚举并且只想获取月份数字，则可以按顺序执行以下操作：

```
var months = dates
    .Select(d => new { Month = d.Month, Year = d.Year })
    .Distinct()
    .OrderBy(a => 12 * d.Year + d.Month)
    // or .OrderBy(a => a.Year).ThenBy(a => a.Month)
    .Select(a => a.Month); 
```

请注意在您摆脱年份*之前*`Distinct`的电话意味着例如将返回，我认为这是您想要的。*`1/1/2011, 5/5/2011, 1/1/2012``1, 5, 1`*

 *您可以将此查询附加到过滤日期列表中；不过，您需要给它一个*日期*列表，而不是您目前正在构建的任何匿名对象的列表。*

# php - 这个 PHP/MySQL 脚本有什么问题？它不能正常工作

> ID：13469618
> 
> 赞同：0
> 
> 时间：2012-11-20T08:58:30.270
> 
> 标签：php, html, mysql

请关闭这个我已经弄清楚了------------我的问题---------------------------- ------------ mysql_select_db("members") or die(mysql_error()); echo "找到数据库！
";

- - - - - - - - 解决方案 - - - - - - - - - - - - - - - - - ---------------------------------

mysql_select_db("a2670376_Pass") 或死(mysql_error()); echo "找到数据库！
";

* * *

这是我的脚本

```
 <?php 
$ud_ID = $_REQUEST["ID"];
$ud_firstname = $_POST["ud_firstname"];
$ud_surname = $_POST["ud_surname"];
$ud_FBID = $_POST["ud_FBID"];
$ud_IMG = $_POST["ud_IMG"];

mysql_connect('mysql13.000webhost.com'… 'a2670376_Users', 'Password') or die(mysql_error());
echo "MySQL Connection Established! <br>";

mysql_select_db("members") or die(mysql_error());
echo "Database Found! <br>";

$query = "UPDATE stokesley_members SET firstname = '$ud_firstname', surname =    '$ud_surname', 
FBID = '$ud_FBID' WHERE ID = '$ud_ID'";

$res = mysql_query($query);

if ($res)
echo "<p>Record Updated<p>";
else
echo "Problem updating record. MySQL Error: " . mysql_error();
?>

<form action="update.php" method="post">
<input type="hidden" name="ID" value="<?=$UID;?>">
IMGNU: <input type="text" name="ud_img" value="<?=$IMGNU;?>"><br>
First Name: <input type="text" name="ud_firstname" value="<?=$firstname?>"><br>
Last Name: <input type="text" name="ud_surname" value="<?=$surname?>"><br>
FB: <input type="text" name="ud_FBID" value="<?=$FBID?>"><br>
<input type="Submit">
</form> 
```

这是我的错误 MySQL 连接已建立！用户 'a2670376_Users'@'10.1.1.40' 对数据库 'members' 的访问被拒绝我不知道 10.1.1.40 是关于什么的，尽管我尝试将其更改为 ("mysql13.000webhost.com", "a2670376_Users", “密码”），现在仍然是同样的事情，这让我很困惑，所以我什至不确定是否有错误，但我认为如果脚本没有错误会显示这个错误，因为我没有t 制作文件 update.php 了吗？我已经解决了很多错误，但似乎无法解决这个问题，请帮助我，你将成为救星，并感谢我的 noobish 脚本我只有 13 岁

我不需要授予权限，因为我已经拥有权限我有一个名为 connect.php 的文件，它连接了我拥有的注册和登录脚本，它可以正常工作，但这不会..

[http://fni.site11.com/edit.php](http://fni.site11.com/edit.php)是我正在处理的页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:48:21.493

请检查数据库位置并为用户设置权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:04:02.130

首先确保上面指定的用户有足够的权限从给定的db中选择数据。您可以登录到数据库托管帐户并检查用户“a2670376_Users”的权限。10.1.1.40 可能是您托管的服务器 IP 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:04:18.763

如果您的数据库托管在其他服务器上，那么您需要授予来自 * 的访问权限，而不仅仅是本地主机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T09:04:35.560

创建 MySQL 数据库和用户时，您需要授予用户对数据库的权限。这允许您创建具有不同访问级别的多个用户，例如一个可以做任何事情的用户，另一个可能只有读取 ( `SELECT`) 访问权限的用户，因此他们不能`INSERT`//`UPDATE`或数据库和表`DELETE`。`DROP`

如果您使用 cPanel 之类的东西，您可以从那里将用户添加到您的数据库中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T09:05:33.293

首先从 mysql_ 切换到 mysqli_ 或 PDO，它们更可靠。然后，检查拼写（主机、用户和密码）和大小写！密码和用户名区分大小写。

确保用户 a2670376_Users 具有选择、更新和插入的权限

# sql - 非规范化并将多个 id 添加到一行

> ID：13469619
> 
> 赞同：1
> 
> 时间：2012-11-20T08:58:32.773
> 
> 标签：sql, database, database-design, relational-database

我目前正在研究将通过实体框架访问的 SQL Server 关系数据库。我有几个问题似乎无法找到正确的答案。

请看我的数据库模型图：

![在此处输入图像描述](../Images/512aaca747f004961db9e9f11d300f7f.png)

**1.** 我不太确定`ProblemType`实施是否正确。正如现在已经设置的那样，两列都允许输入空值，`ProblemType`因为它将包含 a`ProblemTypeRoadID`或 a `ProblemTypeVandalismID`。所以问题真的是是否可以通过删除`ProblemType`表格和在表格中关联和关联`ProblemTypeRoad`来`ProblemTypeVandalism`对模型进行反规范化`ProblemDesc`？

**2.** 查看`Problem`表格，您会发现一列名为`HistoryIDs`。此列应包含一个以逗号分隔的字符串，其中包含`HistoryIDs`与 a 相关的所有内容`Problem`。A`HistoryID`本质上是 a `ProblemDescID`（因为 a在更新时`ProblemDesc`将其`IsHistory`列设置为 true），因为`ProblemDesc`在更改时会复制 a。我的问题是：`ProblemDescIDs`向`HistoryIDs`列添加多个的最佳方法是什么？如果它是“1,5,7”之类的东西，那么很容易找到给定的所有历史记录`ProblemDesc`。

**3.** 对图表的任何其他建议也非常欢迎:)

提前致谢！

**编辑：请考虑修改后的图表：**

![在此处输入图像描述](../Images/ca2b7c7d96789ae7d7c075106b5d2ca0.png)

既然您给了我一些很好的改进建议，我已经尝试实施您的大部分建议。`ProblemType`已被删除并`ProblemHistory`添加。还对其父表的方式`WorkerComment`和关系进行了更改。`Media`这种实施会奏效吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:05:21.453

1.  您可以删除问题类型表，只需将问题类型道路和问题类型破坏与问题类型 ID 关联到问题类型表

2.  不，不应该。您应该有一个表 ProblemHistory，其中包含 ProblemID 和 HistoryID 列，其中每个 History 都有一行。

3.  看来您可以有与多个问题相关的工人评论。应该反过来吗？对于媒体和问题描述也是如此。一个问题可以只有一个工人工作吗？此外，MSSQL 有一个可以用来代替 CoordinateLat 和 CoordinateLng 的地理类型。

# xml - 如何在magento管理面板的主菜单中显示交易电子邮件？

> ID：13469628
> 
> 赞同：1
> 
> 时间：2012-11-20T08:58:57.070
> 
> 标签：xml, magento

我这里有一个简单的问题。我想在主标题菜单中将事务性电子邮件选项卡显示为新菜单选项卡。默认情况下，它显示为 System > Transactional Emails

我想将它包含在系统选项卡旁边的主菜单中。

我在 local/Mage/Adminhtml/etc/adminhtml.xml 中改变了

```
<config>
    <menu>
    <system translate="title" module="adminhtml">
            <title>Manage Emails</title>
            <sort_order>80</sort_order>
<!--             <action>adminhtml/system</action> -->
            <children>
            <email_template translate="title">
                    <title>Transactional Emails</title>
                    <action>adminhtml/system_email_template</action>
                    <sort_order>60</sort_order>
                </email_template>
            <config translate="title">
                    <title>Configuration</title>
                    <action>adminhtml/system_config</action>
                    <sort_order>110</sort_order>
                </config>
            </children>

     </system>
     </menu>
</config> 
```

如您所见，我必须将配置选项卡与 Transactional Emails 选项卡一起放置才能使它们工作。如果我从中删除配置选项卡，则整个跨国电子邮件模块将不起作用。我无法在管理面板中加载任何模板。

我不想要带有事务性电子邮件选项卡的配置选项卡。请帮我解决这个问题。我正在使用 Magento 1.5。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:40:07.743

在你提到的同一个文件中添加

```
<email_template translate="title">
    <title>Transactional Emails</title>
    <action>adminhtml/system_email_template</action>
    <sort_order>100</sort_order>
</email_template> 
```

`</system>`在中间的标签之后
（可能大约是第 115 行）

```
</children>
        </system>   <!--after this add-->

        <email_template translate="title">  <--
            <title>Transactional Emails</title>  <--
            <action>adminhtml/system_email_template</action>  <--
            <sort_order>100</sort_order>  <--
        </email_template>  <--

    </menu>
    <acl>
        <resources>
            <all> 
```

**PS：**不要忘记删除/评论

```
<email_template translate="title">
        <title>Transactional Emails</title>
        <action>adminhtml/system_email_template</action>
        <sort_order>100</sort_order>
</email_template> 
```

`(line : 75 -79)`
否则会看到两个交易电子邮件

希望这对你有帮助

# .net - System.Drawing.Bitmap to JPEG XR

> ID：13469631
> 
> 赞同：2
> 
> 时间：2012-11-20T08:59:33.037
> 
> 标签：.net, jpeg-xr

How can I encode a `System.Drawing.Bitmap` (v4.0) to the JPEG XR stream?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:57:26.290

这可以通过[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx "扩展方法")解决：

```
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Windows.Media.Imaging;

/// <remarks>
/// Requires reference to <c>System.Drawing</c>, <c>PresentationCore</c> and <c>WindowsBase</c>.
/// </remarks>
public static class JpegXr {

    public static MemoryStream SaveJpegXr(this Bitmap bitmap, float quality) {
        var stream = new MemoryStream();
        SaveJpegXr(bitmap, quality, stream);
        stream.Seek(0, SeekOrigin.Begin);
        return stream;
    }

    public static void SaveJpegXr(this Bitmap bitmap, float quality, Stream output) {
        var bitmapSource = bitmap.ToWpfBitmap();
        var bitmapFrame = BitmapFrame.Create(bitmapSource);
        var jpegXrEncoder = new WmpBitmapEncoder();
        jpegXrEncoder.Frames.Add(bitmapFrame);
        jpegXrEncoder.ImageQualityLevel = quality / 100f;
        jpegXrEncoder.Save(output);
    }

    /// <seealso cref="http://stackoverflow.com/questions/94456/load-a-wpf-bitmapimage-from-a-system-drawing-bitmap"/>
    public static BitmapSource ToWpfBitmap(this Bitmap bitmap) {
        using (var stream = new MemoryStream()) {
            bitmap.Save(stream, ImageFormat.Bmp);
            stream.Position = 0;
            var result = new BitmapImage();
            result.BeginInit();
            // According to MSDN, "The default OnDemand cache option retains access to the stream until the image is needed."
            // Force the bitmap to load right now so we can dispose the stream.
            result.CacheOption = BitmapCacheOption.OnLoad;
            result.StreamSource = stream;
            result.EndInit();
            result.Freeze();
            return result;
        }
    }

} 
```

# gyp - Can't get node-gyp to create windows solution with /MD

> ID：13469632
> 
> 赞同：4
> 
> 时间：2012-11-20T08:59:34.793
> 
> 标签：gyp, node-gyp

I want to compile a node.js module with the /MD flag (multi-threaded DLL). Having '/MD' in the cflags options in binding.gyp does not work.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-13T14:20:38.090

在玩了 binding.gyp 之后 -*很多*- 似乎问题不是由于 node-gyp 而是与 gyp 本身以及它对特定设置所需的非常具体的嵌套顺序有关。也就是说，为了设置运行时库（在发行版中），运行时库选项必须嵌套在 gyp 文件中，如下所示：

```
configurations
  - Release
    - msvs_settings
      - VCCLCompilerTool
        - RuntimeLibrary 
```

尝试在没有任何这些嵌套元素的情况下设置运行时库会阻止设置运行时库。（令人讨厌的是，没有任何警告该选项被忽略。）

因此，要将模块的调试和发布版本设置为使用调试运行时 DLL（编译器选项 /MDd）和发布运行时 DLL（编译器选项 /MD），binding.gyp 将如下所示：

```
{
    'targets': [
    {
        # Usual target name/sources, etc.

        'configurations': {
            'Debug': {
                'msvs_settings': {
                            'VCCLCompilerTool': {
                                'RuntimeLibrary': '3' # /MDd
                    },
                },
            },
            'Release': {
                'msvs_settings': {
                            'VCCLCompilerTool': {
                                'RuntimeLibrary': '2' # /MD
                    },
                },
            },
        },
    },],
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T02:07:20.580

你需要设置`RuntimeLibrary`为`2`. 像这样的东西：

```
'msvs_settings': {
  'VCCLCompilerTool': {
    'RuntimeLibrary': 2, # multi threaded DLL
  },
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-08T10:51:03.033

对于我的项目，唯一的解决方案是创建一个新配置并从原始配置继承：

```
 'target_defaults': {
    'configurations': {
      'ChirpDebug' : {
        'inherit_from': ['Debug'],
        'msvs_settings': {
          'VCCLCompilerTool': {
            'RuntimeLibrary': '3'
          },
        },
      },
      'ChirpRelease' : {
        'inherit_from': ['Release'],
        'msvs_settings': {
          'VCCLCompilerTool': {
            'RuntimeLibrary': '2'
          },
        },
      },
    }, 
```

然后使用

```
msbuild /p:Configuration=ChirpDebug .... 
```

我用 libuv 尝试了这个解决方案，效果很好。我不知道 node-gyp，但类似的方法应该可以工作。

# java - HashSet getting sorted

> ID：13469633
> 
> 赞同：2
> 
> 时间：2012-11-20T08:59:39.237
> 
> 标签：java, hashset

I am getting the unique elements from a arraylist into a hashset but it is being sorted by itself.But i need the data not to be in sorted order.How can it be done?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:32:29.297

> *HashSet 得到排序*

a 的项目[`HashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)根本没有特定的顺序，正如其[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)中明确指出的那样：

> 它不保证集合的迭代顺序；特别是，它不保证订单会随着时间的推移保持不变。

也许您的意思是说这些项目的“重新排列”顺序与您添加项目的顺序不同，这是不可取的。

在这种情况下，只需使用[`LinkedHashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)而不是`HashSet`. 它以插入顺序维护元素。

```
Set<T> unique = new LinkedHashSet<T>(arrayList); 
```

或者，也许，如果您更喜欢基于元素`Comparable#compareTo()`实现的自动排序，或者想要提供一个 custom `Comparator`，那么使用 a[`TreeSet`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)代替。

```
Set<T> uniqueAndSorted = new TreeSet<T>(arrayList); 
```

### 也可以看看：

*   [Java 教程 - 集合 - 实现](http://docs.oracle.com/javase/tutorial/collections/implementations/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:46:05.043

'我想要不按排序顺序的数据'是什么意思？你的意思是说你想要它在列表中出现的相同顺序吗？如果是这样，您可以创建一个 LinkedHashSet 并添加来自 arraylist 的条目。

例如：ArrayList list = new ArrayList(); LinkedHashSet set = new LinkedHashSet(); for (String temp: list) { set.add(temp);
}

这将确保元素在 arraylist 中出现的顺序相同。

# mongodb - Mongo response time monitor

> ID：13469636
> 
> 赞同：0
> 
> 时间：2012-11-20T08:59:51.547
> 
> 标签：mongodb

Is there a way to monitor the response time since mongo got a command to execute till the returned an answer? I couldn't find any in MMS nor in Server Density? Is there other service that can give me that information?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:22:54.373

MongoDB 分析：[http](http://www.mongodb.org/display/DOCS/Database+Profiler) ://www.mongodb.org/display/DOCS/Database+Profiler应该能够为您分析您的查询并告诉您响应时间是多少。

默认设置是`2`这样的：

```
db.setProfilingLevel(2); 
```

它将所有操作写入`db.system.profile`. 您还需要`1`对慢速查询进行更精确的测试。

# postgresql - Linux Page Cache Replacement

> ID：13469638
> 
> 赞同：3
> 
> 时间：2012-11-20T09:00:00.583
> 
> 标签：postgresql, memory-management, amazon-ec2, linux-kernel, page-caching

I have two PostgreSQL databases named data-1 and data-2 that sit on the same machine. Both databases keep 40 GB of data, and the total memory available on the machine is 68GB.

I started data-1 and data-2, and ran several queries to go over all their data. Then, I shut down data-1 and kept issuing queries against data-2\. For some reason, the OS still holds on to large parts of data-1's pages in its page cache, and reserves about 35 GB of RAM to data-2's files. As a result, my queries on data-2 keep hitting disk.

I'm checking page cache usage with [fincore](http://code.google.com/p/linux-ftools/). When I run a table scan query against data-2, I see that data-2's pages get evicted and put back into the cache in a round-robin manner. Nothing happens to data-1's pages, although they haven't been touched for days.

Does anybody know why data-1's pages aren't evicted from the page cache? I'm open to all kind of suggestions you think it might relate to problem.

This is an EC2 m2.4xlarge instance on Amazon with 68 GB of RAM and no swap space. The kernel version is:

```
$ uname -r
3.2.28-45.62.amzn1.x86_64 
```

Edit-1:

It seems that there is no NUMA configuration:

```
$ dmesg | grep -i numa
[    0.000000] No NUMA configuration found 
```

Edit-2:

I used [page-types](https://github.com/torvalds/linux/blob/master/tools/vm/page-types.c) tool in Linux kernel source tree to monitor page cache statuses. From the results I conclude that:

```
data-1 pages are in state : referenced,uptodate,lru,active,private
data-2 pages are in state : referenced,uptodate,lru,mappedtodisk 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:30:12.323

看看您在 中配置的 cpusets `/dev/cpusets`。如果您在这里有多个目录，那么您就有多个 cpuset，并且可能有多个内存节点。

此处详细记录了 cpusets 机制：http: [//www.kernel.org/doc/man-pages/online/pages/man7/cpuset.7.html](http://www.kernel.org/doc/man-pages/online/pages/man7/cpuset.7.html)

# php - 如何从 SHA256 哈希中创建随机数？

> ID：13469641
> 
> 赞同：4
> 
> 时间：2012-11-20T09:00:11.280
> 
> 标签：php

早上好，

我必须使用密钥从给定的 256HASH 创建一个随机数。一切都很好，直到我必须将哈希“转换”为 0 到 15.000.000 之间的整数（这是随机数）。我一直在玩 ord() 和字节，但我没有得到任何适合我的东西。

我最初的想法是将 SHA256 字符串转换为整数，然后应用除数来获得模数。但我需要一个很大范围之间的随机数。0 到 15.000.000（一千五百万）。你会怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T09:12:00.580

哈希 i 基本上是一个数字，以 16 为基数。话虽如此，您只需将其转换为 int。

问题是，当您将哈希转换为 int 时，如下所示：

```
echo intval(hash('sha256','asdf'),16); 
```

对于 32 位系统，您将始终得到 2147483647，这是 intval 的最大值。

我的建议是将散列的值减少到几个第一个字符，像这样

```
 echo intval(substr(hash('sha256','bsbaf'),0,6),16); 
```

现在这是随机数的种子，您可以通过以下方式获得随机数：

```
 $hash = hash('sha256','bsbaf');
 $seed = intval(substr($hash,0,6),16);
 mt_srand($seed);
 echo mt_rand(0,15000000); 
```

请注意，在某些情况下，您可能会发生冲突，因为您只使用了哈希的前 6 个字符，但对于大多数用途来说，这不是问题。由于我不知道您的具体用例，因此由您决定这是否可以接受。

更新：另一种方法是从生成的种子中取模 - 像这样：

```
 $hash = hash('sha256','bsbaf');
 $seed = intval(substr($hash,0,6),16);
 echo $seed % 15000000; 
```

# jquery - No Show of bigger picture (prev() click()attr())

> ID：13469644
> 
> 赞同：2
> 
> 时间：2012-11-20T09:00:26.307
> 
> 标签：jquery, html

I use the following code to show the bigger pic.

```
<body>
<div id="Rand">
<a href="#" alt="img/groot/img1.jpg" id="unique name of picture" class="BiggerPic">
<img src="img/thumb/img1.jpg" />
</a>
<a href="#" alt="img/groot/img2.jpg" id="unique name of picture" class="BiggerPic">
<img src="img/thumb/img2.jpg" />
</a>
<a href="#" alt="img/groot/img2.jpg" id="unique name of picture" class="BiggerPic">
<img src="img/thumb/img2.jpg" />
</a>
</div>
<div id="ShowBiggerDivIMG" style="display: none;">
<img id=ShowBiggerIMG src="" />
</div>
</body>

$(document).ready(function(){
var imgScr = $('.BiggerPic').prev('a').attr('alt');
$('.ImageMagnifier').click(function(){
$('#ShowBiggerDivIMG').fadeIn(600);
$('#ShowBiggerIMG').attr('src', imgScr);
})
}); 
```

The only thing he return is the last link of the last picture. How do i get the alt (link) of the activ clicked Thumbnail to replace with the src of img(#ShowBiggerIMG)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:07:15.973

因为你想获得点击图像的 alt

```
$(document).ready(function(){
       var imgScr;
    $('.BiggerPic').click(function(){
       imgScr =$(this).attr('alt');           
     });

        $('.ImageMagnifier').click(function(){
           $('#ShowBiggerDivIMG').fadeIn(600);
           $('#ShowBiggerIMG').attr('src', imgScr);
        });
    }); 
```

# android - Android Image to View in Full Screen

> ID：13469645
> 
> 赞同：1
> 
> 时间：2012-11-20T09:00:28.353
> 
> 标签：android, gridview, fullscreen, bitmapimage

I'm new to Android and Java. I have been working on my task i.e, Image Downloader. Where I have to download images with progress bar and display them in grid View. I have created two classes 1\. URLImageAdapter 2\. CacheActivity. **Everything works fine but now I want these images to open in full screen when clicked** Any help? thank You. Any Simple Method.

```
public class URLImageAdapter extends BaseAdapter {
private File sdImageMainDirectory;
private Context myContext;
private class Image {
    String url;
    Bitmap thumb;
}

private Image[] images;
private LoadThumbsTask thumbnailGen;
private Object previousList;

public URLImageAdapter(Context c) {
    myContext = c;
    thumbnailGen = new LoadThumbsTask();

    if (previousList != null) {
        images = (Image[]) previousList;
        thumbnailGen.execute(images);
        return;
    }

    images = new Image[imageURLs.length];

    for (int i = 0, j = imageURLs.length; i < j; i++) {
        images[i] = new Image();
        images[i].url = imageURLs[i];

    }

    thumbnailGen.execute(images);

}

private void saveDataInSdCard(Bitmap bt,int i) {
    OutputStream fOut = null;
    Uri outputFileUri;
    try {
        File root = new File(Environment.getExternalStorageDirectory()
                + File.separator + "urFlodername" + File.separator);
        root.mkdirs();
        sdImageMainDirectory = new File(root,i+"myPicName.jpg");
        outputFileUri = Uri.fromFile(sdImageMainDirectory);
        fOut = new FileOutputStream(sdImageMainDirectory);
    } catch (Exception e) {

    }

    Bitmap bm =bt;
    try {
        bm.compress(Bitmap.CompressFormat.PNG, 100, fOut);
        fOut.flush();
        fOut.close();
    } catch (Exception e) {
    }       

}

public int getCount() {
    return images.length;
}

public Object getItem(int position) {
    return images[position].url;
}

public long getItemId(int position) {
    return position;
}

public Object getData() {
    if (thumbnailGen != null
            && thumbnailGen.getStatus() != AsyncTask.Status.FINISHED) {
        thumbnailGen.cancel(true);
    }

    return images;
}

public View getView(int position, View convertView, ViewGroup parent) {

    ImageView imgView;

    Image cached = images[position];

    if (convertView == null) {

        imgView = new ImageView(myContext);
        imgView.setLayoutParams(new GridView.LayoutParams(100, 100));

    } else {

        imgView = (ImageView) convertView;

    }

    if (cached.thumb == null) {

        imgView.setImageResource(R.drawable.ic_action_search);
        imgView.setScaleType(ScaleType.CENTER);

    } else {

        imgView.setScaleType(ScaleType.FIT_CENTER);
        imgView.setImageBitmap(cached.thumb);
        saveDataInSdCard(cached.thumb,position);

    }

    return imgView;
}

private void cacheUpdated() {
    this.notifyDataSetChanged();
}

private Bitmap loadThumb(String url) {

    Bitmap thumb = null;

    BitmapFactory.Options opts = new BitmapFactory.Options();
    opts.inSampleSize = 4;

    try {

        URL u = new URL(url);
        URLConnection c = u.openConnection();
        c.connect();

        BufferedInputStream stream = new BufferedInputStream(
                c.getInputStream());

        thumb = BitmapFactory.decodeStream(stream, null, opts);

        stream.close();

    } catch (MalformedURLException e) {
        Log.e("ERROR", "malformed url: " + url);
    } catch (IOException e) {
        Log.e("ERROR", "An error has occurred downloading the image: "
                + url);
    }

    return thumb;
}

private class LoadThumbsTask extends AsyncTask<Image, Void, Void> {

    /*private ProgressDialog dialog;
      @Override
        protected void onPreExecute() {
        this.dialog = ProgressDialog.show(myContext, "Please wait",
            "Downloading.....", true);
                }

            @Override
            protected void onPostExecute(Void unused) {
    //Intent for next activity
     this.dialog.dismiss();
    }*/

    @Override
    protected Void doInBackground(Image... cache) {

        BitmapFactory.Options opts = new BitmapFactory.Options();
        opts.inSampleSize = 4;

        for (Image i : cache) {

            if (isCancelled())
                return null;

            if (i.thumb != null)
                continue;

            SystemClock.sleep(500);

            i.thumb = loadThumb(i.url);

            publishProgress();
        }

        return null;

    }

    @Override
    protected void onProgressUpdate(Void... param) {
        cacheUpdated();
    }
}

private String[] imageURLs = {
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_2851.jpg",
                   "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_2944.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_2989.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3005.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3012.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3034.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3047.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3092.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3110.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3113.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3128.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3160.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3226.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3228.jpg",};
 } 
```

> CacheActivity

```
public class CacheActivity extends Activity {

Button btnStartProgress;
ProgressDialog progressBar;
private int progressBarStatus = 0;
private Handler progressBarHandler = new Handler();
private GridView gridview;
private long fileSize = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_cache);
     gridview = (GridView) findViewById(R.id.grid_view);
     addListenerOnButton();
}

public void addListenerOnButton() {

    btnStartProgress = (Button) findViewById(R.id.btnStartProgress);
    btnStartProgress.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            progressBar = new ProgressDialog(v.getContext());
            progressBar.setCancelable(true);
            progressBar.setMessage("File downloading ...");
            progressBar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            progressBar.setProgress(0);
            progressBar.setMax(100);
            progressBar.show();

            progressBarStatus = 0;

            fileSize = 0;

            new Thread(new Runnable() {
                public void run() {
                    while (progressBarStatus < 100) {

                        progressBarStatus = doInBackground();

                        try {
                            Thread.sleep(7500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                        progressBarHandler.post(new Runnable() {
                            public void run() {
                                progressBar.setProgress(progressBarStatus);
                            }
                        });
                    }

                    if (progressBarStatus >= 100) {

                        try {
                            Thread.sleep(450);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                        progressBar.dismiss();

                    }
                }
            }).start();
            try {
                gridview.setAdapter(new URLImageAdapter(CacheActivity.this));
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

    });

}

public int doInBackground() {

    while (fileSize <= 1000000) {

        fileSize++;

        if (fileSize == 100000) {
            return 10;
        } else if (fileSize == 200000) {
            return 20;
        } else if (fileSize == 300000) {
            return 30;
        }else if (fileSize == 400000) {
            return 40;
        }else if (fileSize == 500000) {
            return 50;
        }else if (fileSize == 600000) {
            return 60;
        }else if (fileSize == 700000) {
            return 70;
        }else if (fileSize == 800000) {
            return 80;
        }else if (fileSize == 900000) {
            return 90;
        }

    }

    return 100;

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:23:42.360

您可以使用全尺寸 imageview 创建自定义警报对话框 imageview。从网格视图中获取图像并将其显示在警报对话框中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:12:02.390

获取拇指图像时，在 getView 中将 onClickListener 设置为您的 imageView。

```
 else {

            imgView.setScaleType(ScaleType.FIT_CENTER);
            imgView.setImageBitmap(cached.thumb);
            saveDataInSdCard(cached.thumb,position);

           //somewhat here

           // and start a new activity and put file path , and your next activity there is       

            imgView.setOnClickListener(new OnClickListener())
              {

                @Override
             public void onClick(View v) {
                  Intent intent =new Intent(context,FullScreenActivity.class)
                  intent.putExtra("file_path",PATH);
                  context.startActivity(intent);
                 } 

               });

        } 
```

在您的下一个活动中，有一个全屏 imageView

在 onCreate

```
Bundle bundle=getIntent().getExtras();

if(bundle!=null)
{
String path=bundle.getString("file_path");
imageView.setImageURI(Uri.parse(path));
} 
```

# asp.net-mvc - ASP.NET MVC - view model, domain model and data model

> ID：13469648
> 
> 赞同：7
> 
> 时间：2012-11-20T09:00:49.630
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, viewmodel, domain-model

I am using entity framework in my latest ASP.NET MVC 3 project. As it is DB first, the entity framework generates **Database models**. In my service (business) layer I Scaffold (MvcScaffolding) to generate service methods, views and controllers. Scaffolding also generates the **domain models**. When binding these models to the Views, I use **view models**.

In short, I ended up in using three types of models. Is this Ok? The view models are kept in the Presentation layer, domain models are kept in the business layer and data models are kept in the repository layer.

Please let me know your thoughts.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T09:06:38.260

这听起来不错，确实有几个好处。

1.  您可以从头开始重新创建数据库模型，而不会影响域模型，当然它们的映射方式除外。有些人会争辩说这两个可以合并为一个，但这在很大程度上取决于您的设置。

2.  单独的视图模型将允许您更自由地更改和创建新的视图模型以适应您的视图。它还有助于[防止延迟加载代理等](http://ayende.com/blog/4807/refactoring-toward-frictionless-odorless-code-the-case-for-the-view-model)。

许多人也会有一个 Dto 对象集。这些作为一组缓存对象很有用，如果您有多个 UI，也可以说是 Windows 服务。

[Automapper](http://automapper.codeplex.com/)非常流行，可以缓解有这么多模型要映射的痛苦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T09:07:58.593

当您在各个级别的模型之间存在差异时，这很好。如果你对这个模型所做的只是将数据从一个层模型放到另一个层模型而不进行任何转换和处理，你可以删除冗余模型。在常见情况下，域模型变得多余。

您应该创建分离的视图模型和数据库模型，因为有必要在不更改视图的情况下从数据库重新创建数据库模型。

# php - mysqli_query 和 mysqli_real_query 之间的区别

> ID：13469653
> 
> 赞同：33
> 
> 时间：2012-11-20T09:01:14.450
> 
> 标签：php, mysqli

`mysqli::query`和 和有什么不一样`mysqli::real_query`？

或者

`mysqli_query`和 和有什么不一样`mysqli_real_query`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-20T09:06:08.333

`mysqli::query`如果有任何结果，将返回结果。

`mysql::real_query`成功时返回 true，否则返回 false

您可能已经在 php 文档中看到了这一点：

*   [查询](http://www.php.net/manual/en/mysqli.query.php)，
*   [真实查询](http://php.net/manual/en/mysqli.real-query.php)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-20T09:04:35.280

查看[mysqli_query](http://uk1.php.net/manual/en/mysqli.query.php) ()的文档：

> 从功能上讲，使用此函数与调用 mysqli_real_query() 后跟 mysqli_use_result() 或 mysqli_store_result() 相同。

据我了解 real_query 实际上执行查询，并且 use/store_result 启动检索查询结果集的过程。query() 两者都做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-09-19T10:35:31.813

有点晚了，但对我来说最大的进步是使用默认设置调用这些函数时的 RAM 使用情况：`mysqli_real_query()`您不会将整个结果复制到 RAM 中，`mysqli_query()`默认情况下会这样做（尽管可以使用`$resultmode`参数进行更改）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-01T05:51:08.720

在实践中，我在其他答案中看不到另一个区别。**您可能需要使用`mysqli_real_query()`for`CALL`语句**。

如果您正在调用存储过程，则它可以返回多个结果。`mysqli_query()`将获取第一个结果，但可能需要获取更多结果，这会导致错误。您需要使用`mysqli_real_query`(或`mysqli_multi_query()`) 来获取这些结果集。

遗憾的是，该解释位于[PHP 文档的存储过程部分](https://www.php.net/manual/en/mysqli.quickstart.stored-procedures.php)，因此很难找到。

我给你一个代码示例，以防万一，调用一个假设返回多个结果集的过程`mysqli::real_query`：

```
$query="CALL storedProcedure()";
if($conn->real_query($query)){              
    do{
        if($result=$conn->store_result()) {
            while($row=$result->fetch_assoc()) {
                print_r($row);
            }
            $result->free();
        }
    }while($conn->more_results() && $conn->next_result());          
} 
```

# scrollbar - 滚动JavaFX后TableView中的TextField

> ID：13469661
> 
> 赞同：0
> 
> 时间：2012-11-20T09:01:40.590
> 
> 标签：scrollbar, tableview, javafx, textfield

我有一个表格视图，其中有一列填充了 TextField。

当我的数据很少并且我的表格没有滚动条时没有问题，所有 TextFields 都会出现。

问题是，当我向下滚动表格然后再次向上滚动时，缺少一些 TextFields。

这是我的用 TextField 填充的列的代码：

```
purchaseQtyCol.setCellFactory(
                new Callback<TableColumn< TransactionModel, TextField>, TableCell< TransactionModel, TextField>>() {
                    @Override
                    public TableCell< TransactionModel, TextField> call(final TableColumn< TransactionModel, TextField> p) {
                        TableCell<TransactionModel, TextField> cell = new TableCell<TransactionModel, TextField>() {

                            @Override
                            public void updateItem(TextField item, boolean empty) {
                                super.updateItem(item, empty);
                                if (item != null) {
                                    /**
                                     * for(CheckBox cbb : canceledCB) {
                                     * if(item.equals(cbb))
                                     * System.out.println("aa" +
                                     * this.indexProperty().getValue() + " " +
                                     * item.isSelected() ); }*
                                     */
                                    this.setGraphic(item);
                                }

                            }

                        };

                        cell.setAlignment(Pos.CENTER);
                        return cell;
                    }
                });

        purchaseQtyCol.setCellValueFactory(new Callback<CellDataFeatures<TransactionModel, TextField>, ObservableValue<TextField>>() {
            @Override
            public ObservableValue<TextField> call(final CellDataFeatures<TransactionModel, TextField> p) {

                    System.out.println("new textfield");
                    final TextField qtyField = new TextField() {
                        @Override
                        public void replaceText(int start, int end, String text) {

                            if (text.matches("[0-9]") || text.equals("")) {
                                super.replaceText(start, end, text);
                                if (this.getText().isEmpty()) {
                                    p.getValue().setPurchaseQty(0);
                                    p.getValue().setTotalPrice(0);
                                } else {
                                    p.getValue().setPurchaseQty(Integer.parseInt(this.getText()));
                                    p.getValue().setTotalPrice(p.getValue().purchaseQtyProperty().intValue() * p.getValue().basePriceProperty().intValue());
                                }
                                recountTotals();
                            }
                        }

                        @Override
                        public void replaceSelection(String text) {

                            if (text.matches("[0-9]") || text.equals("")) {
                                super.replaceSelection(text);
                                if (this.getText().isEmpty()) {
                                    p.getValue().setPurchaseQty(0);
                                    p.getValue().setTotalPrice(0);
                                } else {
                                    p.getValue().setPurchaseQty(Integer.parseInt(this.getText()));
                                    p.getValue().setTotalPrice(p.getValue().purchaseQtyProperty().intValue() * p.getValue().basePriceProperty().intValue());
                                }
                                recountTotals();
                            }
                        }
                    };

                    qtyField.setText("" + p.getValue().purchaseQtyProperty().getValue());
                    qtyField.setAlignment(Pos.CENTER_RIGHT);

                return new SimpleObjectProperty(qtyField);
            }
        }); 
```

我真的很感谢你们的帮助。

问候，

克里斯玛·安迪卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:06:48.123

圣诞！您面临的问题是 JavaFX 的一个著名问题，即更新 tableview 中的项目。已经有一些解决方法，例如[这里](https://stackoverflow.com/questions/11065140/javafx-2-1-tableview-refresh-items)。解决方案是通过以下方式触发 tableview 的内部更新机制

```
tableview.getColumns().get(0).setVisible(false);
tableview.getColumns().get(0).setVisible(true); 
```

但据我了解，此解决方案仅影响数据的更改，而不影响 tableview 节点的样式。

我也用过

```
@Override
public void updateItem(Object item, boolean empty) 
```

用我的实现，但这还不够，因为当表格中的行太多并且出现滚动条时，行的更新变得一团糟。

我需要的是通过使用 css 突出显示所有满足某些条件的**可见行。**我通过以下方式实现了这一点：

```
Callback<TableView<Person>, TableRow<Person>> callBack = 
    new Callback<TableView<Person>, TableRow<Person>>() {
        @Override
        public TableRow<Person> call(TableView<Person> tableView) {
              final TableRow<Person> row = new TableRow<Person>() {
                     @Override
                     public void updateItem(Person item, boolean empty) {
                          super.updateItem(item, empty);
                          if(!empty && item.getFirstName() == "John") {
                              getStyleClass().add("john");
                          }
                     }
               };
               row.visibleProperty().addListener(new ChangeListener() {
                     @Override
                     public void changed(ObservableValue observableValue, Object t, Object t1) {
                         Boolean oldValue = (Boolean)t;
                         Boolean newValue = (Boolean)t1;
                         if(oldValue && !newValue) {
                             row.getStyleClass().remove("john");
                         }
                         if(!oldValue && newValue) {
                             if(row.getItem().getFirstName() == "John")
                                 row.getStyleClass().add("john");
                         }
                     }
               });
               return row;
        }
};
tableview.setRowFactory(callBack); 
```

css 文件应包含以下几行：

```
.john {
-fx-background-color: forestgreen;
-fx-text-fill: white;
-fx-border-style: solid;
} 
```

当然，您可以选择不同的行样式。

Person 类应该包含

```
public SimpleStringProperty firstNameProperty() {
    return firstName;
} 
```

如您所见，我将侦听器添加到`VisibleProperty`一行中，在这里我控制每一行的 css 行为。在某些情况下，这个想法可能有助于解决 tableview 中的数据更新，而不仅仅是行样式。

我还应该补充一点，我开始接收上面代码`NullPointerException`中的`public void changed`方法，尽管它不会影响我的程序的结果。

我希望它会帮助你，克里斯玛！还有其他人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T06:30:29.283

嗯，我也有同样的问题，显然只绘制可见文本字段，当我们使用滚动时不会出现，因为只绘制场景而不是 textinputcontrol ，所以我的解决方案是捕获滚动事件并在使用时调整文本字段的大小并将其恢复为原始大小，从而强制您重新绘制对象，现在出现与 textinputcontrol.forcing 重新绘制对象，现在出现与 textinputcontrol。

```
 tableview.addEventFilter(ScrollEvent.ANY, new EventHandler<ScrollEvent>() {
        @Override
        public void handle(ScrollEvent scrollEvent) {
           System.out.println("Scrolled.");
            for(ObservableList<TextField> i:data)
                   {
                     for(TextField j: i)
                     {
                   j.setPrefSize(141, 31);
                   j.setPrefSize(140, 30);
                     }
                   }
        }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T14:32:49.913

我只是有复选框的问题。当我快速滚动我的大桌子时，它们随机消失了。我只是通过在我的 cellFactory 中删除这一行来解决它：

```
 @Override
    public void updateItem(Boolean item, boolean empty) {
        super.updateItem(item, empty);
       if (empty) {
           setText(null);
           // setGraphic(null); (This line causes weird behaviour in scrolling, delete it)
        } else {
            checkBox.setSelected(item);
        }
    } 
```

# c - 为什么 `my_do_fork` 和 `post_handler` 被执行但 `pre_handler` 没有被执行？

> ID：13469662
> 
> 赞同：2
> 
> 时间：2012-11-20T09:01:45.113
> 
> 标签：c, linux-kernel, jprobe, kprobe

我`jprobe`在内核模块中使用过，一切正常。`pre_handler`除了没有执行的事实。

```
static struct jprobe my_jprobe = {
         .entry               = my_do_fork,
         .kp = {
                 .symbol_name = "do_fork",
                 .pre_handler = pre_handler,
                 .post_handler = post_handler,
         },
 }; 
```

为什么`my_do_fork`和`post_handler`被执行但`pre_handler`不是？

# xml - 更改主机后 Flash 不加载 XML

> ID：13469663
> 
> 赞同：0
> 
> 时间：2012-11-20T09:01:49.453
> 
> 标签：xml, flash, load

我已经搜索了几个小时。

我有一个以 XML 文件形式加载内容的 Flash 测验的网站。这在我以前的主机上工作得更早。更换主机后，闪存测验加载到 100%，但之后停止。没有更多的事情发生。

我有完全相同的文件结构（三重检查）。我在所有文件和目录上都有与前一个主机相同的 CHMOD。

有什么问题？

# asp.net - 调用 java 轴 webservice 时无法生成故障类型

> ID：13469665
> 
> 赞同：2
> 
> 时间：2012-11-20T09:02:00.627
> 
> 标签：asp.net, webservices-client

嗨，我真诚地感谢技术人员，

让我解释一下我面临的问题。

iam 从 vs 2010 调用axis java webservice

如果我试图使用 [.wsdl] 链接使用soap ui 直接调用服务，并且在.net 中添加参考我得到错误。

现在我从 java 工具生成了 wsdl 文件和 type1.xsd 和 fault.xsd。

如果我使用这些 .wsdl 物理文件，我无法获取**fault.xsd**或故障类型

并且在代理中未创建故障类。

你能在我做错的地方帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:06:26.040

如果要从 .net 客户端调用 Axis 服务，请使用`wsdl.exe`Visual Studio 命令提示符生成代理或使用`Service Reference`. 这将使您的任务变得容易

# c# - 如何使用 Litjson 解析 json 数组？

> ID：13469666
> 
> 赞同：3
> 
> 时间：2012-11-20T09:02:01.180
> 
> 标签：c#, json, arrays, litjson

我正在开发一个应用程序，其中我使用来自服务器的 json 格式的数据。但是我能够解析普通的 json 数据，但无法用数组解析 json 数据，

json响应如下，

```
[{"id_user":"80","services":
    [{"idservice":"3","title":"dni-e","message":"Texto para el dni-e"},
     {"idservice":"4","title":"Tarjeta azul","message":"Texto para la tarjeta azul"}]
}] 
```

我怎样才能读取这个 json 数组？

**注意**：我使用 Litjson 进行解析。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T09:44:34.920

您应该按照 POCO 对象创建自己：

```
public class Service
{
    public int idservice { get; set; }

    public string title { get; set; }

    public string message { get; set; }
}

public class UserServices
{
    public int id_user { get; set; }

    public List<Service> services { get; set; }
} 
```

LitJSON 将反序列化这个开箱即用：

```
UserServices services = JsonMapper.ToObject<UserServices>(rawJson); 
```

作为替代方案，您可以使用非通用变体（以下示例会将所有数据写入控制台）：

```
JsonData data = JsonMapper.ToObject(rawJson);
Console.WriteLine("User id: {0}", data["id_user"]);
Console.WriteLine("Services:");
for (int i = 0; i < data["services"].length; i++)
{
    Console.WriteLine ("    Id: {0}; Title: {1}; Message {2}", data["services"][i]["idservice"], data["services"][i]["title"], data["services"][i]["message"]);
} 
```

# objective-c - 根据对另一个 NSArray 字符串的排序，对自定义对象的 NSArray 进行排序

> ID：13469667
> 
> 赞同：7
> 
> 时间：2012-11-20T09:02:04.197
> 
> 标签：objective-c, ios, nsmutablearray, nsarray

我有两个`NSArray`对象，我想对它们进行相同的排序。一个包含`NSString`对象，另一个包含自定义`Attribute`对象。这是我的“关键” NSArray 的样子：

```
// The master order
NSArray *stringOrder = [NSArray arrayWithObjects:@"12", @"10", @"2", nil]; 
```

带有自定义对象的 NSArray：

```
// The array of custom Attribute objects that I want sorted by the stringOrder array
NSMutableArray *items = [[NSMutableArray alloc] init];
Attribute *attribute = nil;

attribute = [[Attribute alloc] init];
attribute.assetID = @"10";
[items addObject:attribute];

attribute = [[Attribute alloc] init];
attribute.assetID = @"12";
[items addObject:attribute];

attribute = [[Attribute alloc] init];
attribute.assetID = @"2";
[items addObject:attribute]; 
```

**所以，我想做的是使用数组来确定自定义对象数组`stringOrder`的排序。`items`我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T16:56:32.787

因此，我直接比较 stringOrder 中 obj1.assetID 的索引和 stringOrder 中 obj2.assetID 的索引（使用 @() 的 Objective-C 文字来转换 NSString => NSNumber）

```
[items sortUsingComparator:^NSComparisonResult(Attribute *obj1, Attribute *obj2) {
    return [@([stringOrder indexOfObject:obj1.assetID]) compare:@([stringOrder indexOfObject:obj2.assetID])]
}]; 
```

或者没有 ObjC 文字：

```
[items sortUsingComparator:^NSComparisonResult(Attribute *obj1, Attribute *obj2) {
    return [[NSNumber numberWithInt:[stringOrder indexOfObject:obj1.assetID]] compare:[NSNumber numberWithInt:[stringOrder indexOfObject:obj2.assetID]]]
}]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-31T16:26:40.237

虽然 cwehrungs 的回答可以完成工作，但在相对较小的阵列上性能并不是很好。

这是另一种执行相同类型排序的方法，该方法更快一些（尽管仍远非完美）：

```
NSMutableArray *sorted = [NSMutableArray array];

// pre-populate with objects
for (int i = 0; i < stringOrder.count; i++)
{
    [sorted addObject:[NSNull null]];
}
// place the items at the correct position
for (Attribute *a in items)
{
    NSUInteger idx = [stringOrder indexOfObject:a.assetID];
    if (idx != NSNotFound)
    {
        [sorted setObject:a atIndexedSubscript:idx];
    }
}
// finally remove all the unecesarry placeholders if one array was smaller
[sorted removeObject:[NSNull null]]; 
```

# 比较

以下是在 iPhone 5 上运行这两种方法的结果：

*排序使用比较器：*

```
100  - 0.012 s
1000 - 1.116 s
2000 - 4.405 s
3000 - 9.028 s 
```

*预填充数组*

```
100 -  0.003 s
1000 - 0.236 s
2000 - 0.917 s
3000 - 2.063 s 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T09:09:45.937

您可以采取几种方法。

您可以将 Attribute 对象存储在 NSDictionary 中，键是您的 stringOrder 数组中的字符串。然后，您可以获得一个排序的键数组，并使用它来填充您用来显示它们的任何视图：

```
NSArray* sortedKeys = [dict keysSortedByValueUsingComparator:^(id obj1, id obj2) {
    return [obj1 compareTo:obj2];
} 
```

另一个是您将排序顺序设置为 Attribute 对象的内在属性，因此可以直接对 Attributes 数组进行排序。如果排序顺序实际上是 Attributes 对象的内在属性，我只会建议采用这种方法。如果不是，而您这样做，您最终会将演示信息存储在不属于它的位置。

这是一个例子：

```
NSArray* sortedAttrs = [attributes sortedArrayUsingComparator:^(id obj1, id obj2) {
    // Perform comparison of Attribute's, ahem, attributes
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T16:49:39.440

这是我想出的解决方案，效果非常好。有人看到这方面的性能问题吗？

```
for (Attribute *a in items) {
    int index = [stringOrder indexOfObject:a.assetID];
    a.sortOrder = index;
}

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"sortOrder" ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
NSArray *sortedArray = [items sortedArrayUsingDescriptors:sortDescriptors]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-05T17:22:45.803

并行处理：

结果（四核）：

```
 1\. sortme:95    sortby:852345 sorted:95    time:0.052576
 2\. sortme:54248 sortby:852345 sorted:54243 time:0.264660

-(NSArray *)sortArray:(NSArray *)sortme sortBy:(NSArray *)sortBy{

CFAbsoluteTime time = CFAbsoluteTimeGetCurrent();

NSSet *sortmeSet = [NSSet setWithArray:sortme];

NSMutableDictionary *sortDictionary = [NSMutableDictionary dictionary];
dispatch_queue_t sortDictionaryThread = dispatch_queue_create("my.sortDictionaryThread", DISPATCH_QUEUE_CONCURRENT);

[sortBy enumerateObjectsWithOptions:NSEnumerationConcurrent usingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {

    if ([sortmeSet containsObject:obj]){
        dispatch_barrier_async(sortDictionaryThread, ^{
            sortDictionary[obj] = @(idx);
        });
    }
}];

__block NSArray *sortedArray = nil;
dispatch_barrier_sync(sortDictionaryThread, ^{
    sortedArray = [sortDictionary keysSortedByValueUsingSelector:@selector(compare:)];
});

NSLog(@"sortme:%li sortby:%li sorted:%li time:%f",sortme.count,sortBy.count,sortedArray.count, CFAbsoluteTimeGetCurrent() - time);

return sortedArray;
} 
```

# java - 小程序EDT中运行I/O的问题

> ID：13469668
> 
> 赞同：0
> 
> 时间：2012-11-20T09:02:06.677
> 
> 标签：java, swing, io, applet, event-dispatch-thread

我们的小程序源代码有点像意大利面条（写于 2000 年，当时是 Java 1.3），我们希望将其重新编译为 Java 1.6 或 1.7。

当我测试它时，大部分 Swing 都可以，但过了一段时间，`Exception`发生了一个 EDT 异常。具体来说，当拖动事件完成时，会出现一系列 EDT 异常。

这是否与对 I/O 部分进行编码有关，`ActionListeners`因为我已经读过在动作侦听器中编写 I/O 操作是不好的，EDT 在执行动作时执行。

编辑：

这是反复出现的异常

```
Exception in thread "AWT-EventQueue-3" java.lang.NullPointerException
    at javax.swing.BufferStrategyPaintManager.flushAccumulatedRegion(Unknown Source)
    at javax.swing.BufferStrategyPaintManager.copyArea(Unknown Source)
    at javax.swing.RepaintManager.copyArea(Unknown Source)
    at javax.swing.JViewport.blitDoubleBuffered(Unknown Source)
    at javax.swing.JViewport.windowBlitPaint(Unknown Source)
    at javax.swing.JViewport.setViewPosition(Unknown Source)
    at javax.swing.plaf.basic.BasicScrollPaneUI$Handler.vsbStateChanged(Unknown Source)
    at javax.swing.plaf.basic.BasicScrollPaneUI$Handler.stateChanged(Unknown Source)
    at javax.swing.DefaultBoundedRangeModel.fireStateChanged(Unknown Source)
    at javax.swing.DefaultBoundedRangeModel.setRangeProperties(Unknown Source)
    at javax.swing.DefaultBoundedRangeModel.setValue(Unknown Source)
    at javax.swing.JScrollBar.setValue(Unknown Source)
    at javax.swing.plaf.basic.BasicScrollBarUI$TrackListener.setValueFrom(Unknown Source)
    at javax.swing.plaf.basic.BasicScrollBarUI$TrackListener.mouseDragged(Unknown Source)
    at java.awt.Component.processMouseMotionEvent(Unknown Source)
    at javax.swing.JComponent.processMouseMotionEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:19:11.980

I guess it has something to do with the version of java plugin. In java 1.6_10, a new version of this plugin is release, i just disabled the option in java found in control panel Advance->Java Plug In ->Enable the next generation Java Plug in

When i disable this, this recurring error with no distinct behavior no longer appears.

I guess also it has something to do with our code written in the days of Java 1.3.

# c# - Visual Studio 成功编译 MVC 4 项目，但控制器显示一些错误

> ID：13469675
> 
> 赞同：3
> 
> 时间：2012-11-20T09:02:42.417
> 
> 标签：c#, asp.net, asp.net-mvc, visual-studio-2010, visual-studio

我最初在 Visual Studio 2008 中使用 .net 3.5 和 mvc 2 构建了一个项目。我将它迁移到使用 .net 4 和 mvc 4 的 Visual Studio 2010。我的项目成功运行，没有任何错误。但是当我打开一个控制器时，它显示错误。例如，它无法检测控制器中的 Request 或 HttpContext 对象属性，当我说 Request.IsAuthenticated 或任何 Request 或 HttpContent 属性时，它会变为红色。错误说 IsAuthenticated 未定义。有趣的部分是它可以完美地编译和运行。有点奇怪，因为当我在 MVC 4 中创建一个新项目时，它确实显示了这样的错误。这绝对是需要更改的项目级别设置。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:15:55.247

你使用 Resharper 吗？我们也遇到过同样的问题，v7 的第一个版本没有这个错误，但直到 7.1.1 的所有其他版本都存在这个问题。如果是这样，请尝试升级以查看是否有帮助。

否则 Jetbrains 声称点击 Resharper | 选项 | 清除缓存应该会有所帮助（尽管对我们没有帮助）。

# linux - bash中的目录路径难题？

> ID：13469676
> 
> 赞同：2
> 
> 时间：2012-11-20T09:02:46.113
> 
> 标签：linux, bash, path, find

在 bash 中使用`/home/zzz`和使用时有什么区别？`/home/zzz/`

我刚刚发现当`/home/zzz`是指向另一个目录的链接时，`find /home/zzz -type f`什么都不会得到，但`find /home/zzz/ -type f`会返回该目录下的所有文件。我认为 bash 处理`/home/zzz`一个链接类型的文件，但`/home/zzz/`在这种情况下是一个目录。

还有其他区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:15:52.990

大多数 Unix 实用程序（在这种情况下）将尾部斜杠解释`find`为“跟随符号链接”。

从[POSIX 符号链接规范](http://pubs.opengroup.org/onlinepubs/9699919799/xrat/V4_xbd_chap03.html#tag_21_03_00_59)：

> When the final component of a pathname is a symbolic link, the standard requires that a trailing slash causes the link to be followed. This is the behavior of historical implementations. For example, for **/a/b** and **/a/b/**, if **/a/b** is a symbolic link to a directory, then **/a/b** refers to the symbolic link, and **/a/b/** refers to the directory to which the symbolic link points.

Also see [GNU Coreutils: Trailing slashes](http://www.gnu.org/software/coreutils/manual/html_node/Trailing-slashes.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:10:34.140

它不是 bash，它**找到**将符号链接视为符号链接并从自身读取属性的查找，而不是从它指向的文件中读取属性。看看[find(1)](http://linux.die.net/man/1/find)怎么说，

> 永远不要遵循符号链接。**这是默认行为**。当 find 检查或打印文件信息时，该文件是符号链接，**所使用的信息应取自符号链接本身的属性**。

要将其视为目录，您需要使用`-L`选项。

> 当 -L 选项生效时，-type 谓词将始终与符号链接指向的文件类型而不是链接本身匹配（除非符号链接被破坏）。使用 -L 会导致 -lname 和 -ilname 谓词始终返回 false。

我的猜测是，当你传递一个尾部斜杠时，`/`bash 会尝试解析它并 find 将其视为一个目录。如果您确定目录树中没有递归符号链接，您可以`find`使用`-L`选项调用。所以下面的命令应该可以工作。

```
find -L /home/zzz -type f 
```

# c# - 用多个条件搜索一个条件 C#

> ID：13469677
> 
> 赞同：2
> 
> 时间：2012-11-20T09:02:47.100
> 
> 标签：c#, search, conditional-statements

> **可能重复：**
> [忽略字符串比较中的重音字母](https://stackoverflow.com/questions/359827/ignoring-accented-letters-in-string-comparison)

我正在使用一个特殊的框架来完成这项工作（NHibernate，Castle）。我的问题是；有一个网站，人们可以在其中搜索公寓、房间等。这些网站的大多数用户都是土耳其人。所以我的问题从这里开始。

例如，如果人们搜索这个词：Beşiktaş（这是一个地区名称），他们可以像这样搜索 Besiktas。如您所见，土耳其语中有一些特殊字符（S、Ş Ö O、Ğ G、Ç C、İ I、Ü U），人们可能会同时使用它们。我必须像这样搜索所有条件。例如，如果他们尝试搜索 Beşiktaş，我必须搜索所有变体，例如：“Besiktaş、Beşiktaş、Besiktas Beşiktas”，并且在此操作之后，我必须从列表中删除重复的对象。我怎样才能让这个梦想成真:)

我只需要这个操作的算法。

对不起，我的英语水平很差。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:08:15.940

您需要查看可以用来执行此操作的名为 CultureInfo 的东西。这是其他人[就忽略重音字母](https://stackoverflow.com/questions/359827/ignoring-accented-letters-in-string-comparison)提出的类似问题，这与您希望做的几乎相同。这是一种已发布并被接受为答案的方法，它将比较忽略重音字符的字符串

```
string s1 = "hello";
string s2 = "héllo";

if (String.Compare(s1, s2, CultureInfo.CurrentCulture, CompareOptions.IgnoreNonSpace) == 0)
{
    // both strings are equal
} 
```

如果您使用它，我会将地区存储为不带重音字母的英文名称，并在对数据库执行查询之前比较字符串。这样，您将允许用户使用重音字符以及他们的英文名称。

这是有关[CultureInfo的 MSDN 文章的链接](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.71%29.aspx)

# grails - 使用 DSL 而不是 resource.xml 在 resources.groovy 中配置 CXF 服务

> ID：13469678
> 
> 赞同：1
> 
> 时间：2012-11-20T09:02:48.517
> 
> 标签：grails, cxf

我在 grails 中成功创建了 cxf wsdl web-services。现在我想配置 cxf 简单的前端端点。

我在 grails 项目的 resource.xml 文件中成功配置了 cxf 端点。

喜欢..

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:simple="http://cxf.apache.org/simple"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:jaxws="http://cxf.apache.org/jaxws"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.0.xsd
http://cxf.apache.org/simple http://cxf.apache.org/schemas/simple.xsd
http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">

    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

    <!--create CXF service-->
<simple:server serviceClass="com.j2.signup.FaxSignupService" address="/FaxSignupService">

</simple:server>
</beans> 
```

但我希望在 resource.groovy DSL 文件中使用相同的 cxf 端点配置，而不是创建新的 resource.xml。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:31:29.553

You can use `importBeans` in place of the `<import>` elements

```
importBeans('classpath:META-INF/cxf/cxf.xml') 
```

and for the `<simple:server>` you can duplicate this directly in the DSL (see "using Spring namespaces" at the end of [this section of the user guide](http://grails.org/doc/2.1.1/guide/spring.html#theBeanBuilderDSLExplained))

```
xmlns simple:'http://cxf.apache.org/simple'
simple.server(serviceClass:"com.j2.signup.FaxSignupService",
              address:"/FaxSignupService") 
```

If your `FaxSignupService` class itself needs dependencies injecting by Spring then you need to declare it as a top-level bean too

```
faxSignupService(com.j2.signup.FaxSignupService) { bean ->
  bean.autowire = "byName"
}
xmlns simple:'http://cxf.apache.org/simple'
simple.server(serviceClass:"com.j2.signup.FaxSignupService",
              serviceBean:"#faxSignupService",
              address:"/FaxSignupService") 
```

(NB if `FaxSignupService` is a genuine Grails service under `grails-app/services` then it is already registered as a bean by default and the extra bean definition is not required, just adding the `serviceBean:'#faxSignupService'` to the `simple.server` is enough.)

# wix - 同时运行 2 个自定义操作会出错

> ID：13469680
> 
> 赞同：1
> 
> 时间：2012-11-20T09:02:53.260
> 
> 标签：wix, windows-installer, custom-action

我有 2 个自定义操作同时运行。我如何安排它们在第一个完成后运行。这是我的代码：

```
<CustomAction Id="StartAppOnExit1" FileKey="InterUMIEXE" ExeCommand="" Execute="deferred" Return="asyncNoWait" Impersonate="no" />
<InstallExecuteSequence>
   <Custom Action="StartAppOnExit1" Before="InstallFinalize">$InterUMIEXE=3</Custom>
</InstallExecuteSequence>

<CustomAction Id="StartAppOnExit2" FileKey="Python" ExeCommand="" Execute="immediate" Return="asyncNoWait" Impersonate="no" />
<InstallExecuteSequence>
   <Custom Action ="StartAppOnExit2" Before="InstallFinalize">$Python=3</Custom>     
</InstallExecuteSequence> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:37:14.473

```
<InstallExecuteSequence>
 <Custom Action="StartAppOnExit1" Before="InstallFinalize">$InterUMIEXE=3</Custom>
 <Custom Action ="StartAppOnExit2" After="StartAppOnExit1">$Python=3</Custom>     
</InstallExecuteSequence> 
```

试试看它是否有效..:)

# java - 如何在java中将4字节数组转换为浮点数

> ID：13469681
> 
> 赞同：35
> 
> 时间：2012-11-20T09:02:54.253
> 
> 标签：java, char, type-conversion

我有一个代表浮点值的 4 字节数组。从网络读取字节，例如 3e 3f e3 a0。如何将它从 byte[] 转换为 java 中的浮点数？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-11-20T09:08:05.900

在 Java 中，a`char`是 16 位的。如果您的意思是您有 4`byte`个小端字节顺序的值，您需要将其转换为`float`您可以使用的`ByteBuffer`.

```
byte[] bytes = { }
float f = ByteBuffer.wrap(bytes).order(ByteOrder.LITTLE_ENDIAN).getFloat(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-11T01:20:13.933

尝试这个：

`float foo = Float.intBitsToFloat( buffer[n] ^ buffer[n+1]<<8 ^ buffer[n+2]<<16 ^ buffer[n+3]<<24 );`

# ms-access - 将 Access 2010 转换为旧版本

> ID：13469683
> 
> 赞同：3
> 
> 时间：2012-11-20T09:02:59.443
> 
> 标签：ms-access, converter, ms-access-2010, backwards-compatibility

我希望能够使用脚本将 Access 2010 数据库转换为多个不同的旧版本

因此，如果我提供 2010 对脚本的访问权限，我希望它吐出以下版本之一：2000、2002、2003 或 2007。

这怎么可能？

我不是在寻找完整的脚本，而是在寻找正确方向的指针，或者可能是如何完成的示例。

*** 编辑 ***

```
TmpName = Destination & "\" & dbDisname & "_2002.mdb"
If Dir(TmpName) <> "" Then
   FS.deletefile TmpName
End If
objAccess.ConvertAccessProject strSourcePath & dbCurrent, TmpName, acFileFormatAccess2002
TextName = dbDisname & "_2002.mdb"
objAccess.Quit 
```

问题是我收到“运行时错误'52'：错误的文件名或编号”

但是路径是正确的吗？

*   strSourcePath & dbCurrent = "C:\new.accdb"
*   TmpName = "C:\new_2002.mdb"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:18:21.800

您可以使用：

```
ConvertAccessProject "z:\docs\test.accdb", _
         "z:\docs\test.mdb", acFileFormatAccess2000 
```

您可能会收到各种错误消息，我没有尝试对其进行整理，但您最终会得到一个 Access 2000 mdb。其他格式可通过智能感知获得。

微软参考：
[文件格式](http://msdn.microsoft.com/en-us/library/office/aa195879%28v=office.11%29.aspx)
[ConvertAccessProject](http://msdn.microsoft.com/en-us/library/office/aa221163%28v=office.11%29.aspx)
[一些可能的问题](http://office.microsoft.com/en-ie/access-help/convert-an-access-2007-database-to-an-earlier-file-format-HA010230822.aspx#BM1)

# javascript - 单击“下一步”按钮时的 JavaScript 无限循环

> ID：13469687
> 
> 赞同：0
> 
> 时间：2012-11-20T09:03:11.900
> 
> 标签：javascript, arrays, button, firebug

自从我上次做 JavaScript 以来已经有一段时间了，但是学校强迫我们进入一个 JavaScript 项目。所以我在这里，做一个简单的问答游戏。相处得很好，但我遇到的问题可能非常简单。

```
var useranswers = new Array();
var imgArray = new Array();
var answered = 0;
var currentQuestion = 0;

function renderQuizViaArray() 
{
    document.writeln('<h1>' + questions[currentQuestion] + '</h1>');

    for(i=0; i < choices[currentQuestion].length; i++)
    {
        document.writeln('<input type="radio" name="answer_' + currentQuestion + '" value="1" id="answer_' + currentQuestion + '_' + i + '" class="question_' + currentQuestion + '" onclick="submitAnswer(' + currentQuestion + ', this, \'question_' + currentQuestion + '\', \'label_' + currentQuestion + '_' + i + '\')" /><label id="label_' + currentQuestion + '_' + i + '" for="answer_' + currentQuestion + '_' + i + '"> ' + choices[currentQuestion][i] + '</label><br />');
    }

    document.write('<input type="submit" value="NEXT" onclick="nextQuestion()" />');
}

function nextQuestion()
{
    currentQuestion++;
    renderQuizViaArray();
} 
```

每当我单击“NEXT”按钮时，它都会从一个数组中加载第二个问题（元素 [1]）以及另一个数组的答案到屏幕上。但页面仍处于无限加载状态，Firebug 给出消息：“重新加载以激活窗口控制台”

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:32:36.323

我可能已经找到了问题，但不知道如何解决它。

一旦我单击“NEXT”按钮，它就会执行函数 renderQuizViaArray();。这就是它完全搞砸的地方..我错过了什么吗？

我基本上想要的是，当前显示的文本会使用下一个问题的数据（包括答案​​）进行更新。

这些是它包含的文件： quiz.html：[http](http://rapidimg.org/server/files/50ab9c326115cKAUf6S.png) ://rapidimg.org/server/files/50ab9c326115cKAUf6S.png ........ quiz_questions.js：[http ://rapidimg.org/server/files/ 50ab9c536ed44UWhV54.png](http://rapidimg.org/server/files/50ab9c536ed44UWhV54.png) ......... quiz_functions.js：显示在主帖中

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T09:07:59.203

不要使用

```
for(i=0; i < choices[currentQuestion].length; i++) 
```

利用

```
for(i=0, j=choices[currentQuestion].length; i < j; i++) 
```

# moodle - 将 Moodle 2.3 中的博客公开，对全世界可见

> ID：13469691
> 
> 赞同：0
> 
> 时间：2012-11-20T09:03:23.427
> 
> 标签：moodle

我正在使用 Moodle 2.3 并希望让全世界或公众都可以查看博客文章，即无需登录或参加特定课程。我认为在以前的 moodle 版本中，您可以选择让您自己、网站用户或全世界都可以查看博客文章。创建博客文章时，我似乎没有“整个世界”选项。这是在 2.3 中删除还是需要在其他地方启用？

是否可以在左侧/右侧或主页内显示最近的博客文章列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:30:26.003

是的。您必须将站点管理员中的博客可见性选项更改为“世界可以看到设置为世界可访问的条目”。默认情况下，它设置为“所有站点用户都可以看到所有博客条目”

设置在`http://your-moodle.com/admin/settings.php?section=blog`

# mysql - MySQL IP 转换 IF 语句不起作用：排序规则的非法混合

> ID：13469693
> 
> 赞同：1
> 
> 时间：2012-11-20T09:03:23.970
> 
> 标签：mysql, mysql-error-1267

我正在尝试这样做：[http](http://sqlfiddle.com/#!2/a13fc/2) ://sqlfiddle.com/#!2/a13fc/2 。

我得到了错误`Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8_general_ci,COERCIBLE) for operation 'if': SELECT dr.fqdn, IF(dr.type="CNAME",dr.value, INET_NTOA(dr.value) ) as dnsval FROM dns_record dr`

它不起作用，因为我的桌子是 latin1。

我可以在不将表格转换为 utf8 的情况下完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:09:42.973

尝试：

```
SELECT 
dr.fqdn, 

IF(dr.type="CNAME",dr.value, CONVERT(INET_NTOA(dr.value) USING latin1) ) as dnsval

FROM dns_record dr

; 
```

因为您不能在 IF(..., utf8, latin1) 之类的 IF 语句中混合字符集编码。

SQL 小提琴：[http ://sqlfiddle.com/#!2/a13fc/9](http://sqlfiddle.com/#!2/a13fc/9)

# android - 打电话后重启应用

> ID：13469697
> 
> 赞同：0
> 
> 时间：2012-11-20T09:03:36.797
> 
> 标签：android, call, restart

我在通话后返回我的应用程序时遇到问题，因为通话结束后它会将我发送到主屏幕而不是我的应用程序。

```
public class ButtonView extends FrameLayout  {
private static final String TAG = ButtonView.class.getSimpleName();
private final View mButtonView;

private Server mServer;
final Context context = getContext();

public ButtonView(Context context, AttributeSet attrs) {
    super(context, attrs);

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    mButtonView = inflater.inflate(R.layout.input, this);
}

.
    .
    . 
    . 
    .
    .
public void call()  {
    PhoneCallListener phoneListener = new PhoneCallListener();
    TelephonyManager telephonyManager = (TelephonyManager) getContext()
            .getSystemService(Context.TELEPHONY_SERVICE);
    telephonyManager.listen(phoneListener,
            PhoneStateListener.LISTEN_CALL_STATE);

        Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("tel:048598077"));
        getContext().startActivity(callIntent); 

}

private class PhoneCallListener extends PhoneStateListener  {

    private boolean isPhoneCalling = false;
    String LOG_TAG = "LOGGING 123";

    @Override
    public void onCallStateChanged(int state, String incomingNumber) {

        if (TelephonyManager.CALL_STATE_RINGING == state) {
            // phone ringing
            Log.i(LOG_TAG, "RINGING, number: " + incomingNumber);
        }

        if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
            // active
            Log.i(LOG_TAG, "OFFHOOK");

            isPhoneCalling = true;
        }

        if (TelephonyManager.CALL_STATE_IDLE == state) {
            // run when class initial and phone call ended, 
            // need detect flag from CALL_STATE_OFFHOOK
            Log.i(LOG_TAG, "IDLE");

            if (isPhoneCalling) {

                Log.i(LOG_TAG, "restart app");

                // restart app
                Context appContext = context.getApplicationContext();
                Intent i = appContext.getPackageManager().getLaunchIntentForPackage(appContext.getPackageName());
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                context.startActivity(i);

                isPhoneCalling = false;
            }
        }
    }
} 
```

有人知道问题是什么吗？或任何其他方式在通话后重新启动应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:17:57.477

如果您使用的是模拟器，请在真实设备而不是模拟器上测试您的应用程序。您不需要 PhoneStateListener 并手动启动您的应用程序。只需在真实设备上测试，它将自动启动您的应用程序。

# vb6 - From 子句中的语法错误 - VB6

> ID：13469698
> 
> 赞同：1
> 
> 时间：2012-11-20T09:03:37.670
> 
> 标签：vb6

获取上述错误消息时遇到问题。有人可以帮忙吗？

```
Dim cn As New ADODB.Connection 
Dim cmd As New ADODB.Command 
Dim RS As New ADODB.Recordset 
Dim RS2 As New ADODB.Recordset

Set cn = New ADODB.Connection
Call cn.Open("Provider=Microsoft.Jet.OLEDB.4.0;" & "Data Source=" & TheServer &   
          FileTypeOld & ";" & "Jet OLEDB:Database Password=12345678;")

If cn.State = 0 Then cn.Open
Set cmd.ActiveConnection = cn
cmd.CommandText = "SELECT * FROM mov"
cmd.CommandType = adCmdTable
Set RS = cmd.Execute 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:52:55.867

问题是您正在使用具有 Command 类型的 SQL 语句`adCmdTable`。使用该命令类型时，ADO 将在内部生成选择查询，在这种情况下，您应该只指定表的名称。

或者，只需删除`cmd.CommandType = adCmdTable`所有行并保留`select * syntax`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:46:46.780

您需要`_`在此行末尾添加下划线字符

只需替换为：

```
Call cn.Open("Provider=Microsoft.Jet.OLEDB.4.0;" & "Data Source=" & TheServer & _
FileTypeOld & ";" & "Jet OLEDB:Database Password=12345678;") 
```

或者您可以将两行合并为一行而无需下划线，就像这样

```
Call cn.Open("Provider=Microsoft.Jet.OLEDB.4.0;" & "Data Source=" & TheServer & ileTypeOld & ";" & "Jet OLEDB:Database Password=12345678;") 
```

# php - md5 的替代品，也可用于 javascript

> ID：13469703
> 
> 赞同：2
> 
> 时间：2012-11-20T09:04:00.773
> 
> 标签：php, javascript, encryption, hash, md5

正如 php.net[在这里](http://php.net/manual/en/function.md5.php)所说：

> 由于此散列算法的快速特性，不建议使用此功能来保护密码。

自从我开始使用 PHP 编程以来，我一直使用该`md5`功能，但经过研究，很明显`md5`不鼓励使用该功能，应该使用替代方案。

我知道一个可能的替代方案，`sha1`. **还有其他人吗？**

**这些其他的有什么好处，以及`sha1`（不包括更高的安全性）？**

**最重要的是，可以`sha1`在 javascript 中复制散列或任何其他散列算法吗？**

我有一个`md5`javascript 插件，它是我的一些安全应用程序的关键。因此，拥有一个带有 javascript 插件的哈希算法是绝对必要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:00:14.627

SHA1 和 MD5 具有几乎相同的弱点：它们的抗碰撞能力被破坏。所以当MD5错了，SHA1也错了。他们的输出也有点短。如果需要抗碰撞性，我建议至少 256 位哈希。很少需要超过 256 位。

对于普通的散列应用程序，SHA-256（SHA-2 系列的一部分）是一个不错的选择。虽然它的性能不算太好，但到目前为止还没有人打破它的抗碰撞能力。您也可以使用 SHA-3-256，但库支持还不是很好。

对于密码散列，您需要专门的构造，例如 scrypt、bcrypt 或 PBKDF2。使用唯一的盐和足够的迭代次数。不要使用普通的哈希，它们太快了。

对于 MAC（消息身份验证），使用专门的结构，例如 HMAC-SHA-256 而不是普通的 SHA-256。

* * *

即将推出的[WebCryptoAPI](http://www.w3.org/TR/WebCryptoAPI)将包含大多数这些操作的功能。

在部署之前，您可以使用同时提供 PBKDF2 和 SHA-256 的[crypto-js 。](http://code.google.com/p/crypto-js)

* * *

但我对你的架构有点怀疑。在 javascript 中散列密码很少是正确的选择。标准程序是使用 SSL/TLS 并通过它发送明文密码。除非您使用 TLS，否则您无法在浏览器 javascript 中实现安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:51:56.707

是的，还有很多其他的散列算法，比`SHA1`. 检查`SHA512`，例如：它有 512 位，例如 128 位`MD5`。无论如何，如果您正在寻找真正的安全，您应该应用以下方法之一：

1）“固定盐”：代替`md5($pass)`，您使用：

```
$salt="NaCl";
$hash=md5($salt); 
```

2）“随机盐”：而不是md5（$ pass）'，您生成一个随机盐（使用函数`rand($minValue, $maxValue)`），范围很大（比如说`rand(0, pow(10, 100))`并使用`md5($pass, $salt)`。**不要忘记存储哈希和盐！**

3）加密：您使用固定或随机密钥（参见前面的方法），并使用它来加密密码。我真的建议使用 Blowfish 算法。从PHP.net 上的[页面：](http://www.php.net/manual/en/function.mcrypt-encrypt.php)

```
<?php
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $key = "This is a very secret key";
    $text = "Meet me at 11 o'clock behind the monument.";
    echo strlen($text) . "\n";

    $crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $text, MCRYPT_MODE_ECB, $iv);
    echo strlen($crypttext) . "\n";
?> 
```

在 JavaScript 中实现 SHA512（不生成盐）（来自[CryptoJS 库](http://code.google.com/p/crypto-js/)）：

```
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/sha512.js"></s‌​cript>
<script> var hash = CryptoJS.SHA512("Message"); </script> 
```

在 JavaScript 中实现 bcrypt：见[这个例子](http://javascript-bcrypt.googlecode.com/hg/example.html)。

# sql - 带有 RESTful Web 服务的报告服务

> ID：13469711
> 
> 赞同：1
> 
> 时间：2012-11-20T09:04:28.023
> 
> 标签：sql, rest, service, web, reporting

我有非常简单的 asp.net restful (web api) web 服务；让我们说 HelloWord

```
public string GetHelloWorld(string name)
{
    return "Hello, " + name;
} 
```

该方法在 HomeController 下。

当我通过 firefox (http://localhost/api/Home/?name=John) 调用时，结果是你好，John

如何将 XML 输出消耗到报告服务中？

我还浏览了数据动态报告 (www.datadynamics.com)。在看到演练之后，在我看来它是客户端报告而不是服务器端报告（即：SQL Server Reporting Services）。无论如何我可以在服务器端使用数据动态（在报告服务之上）？

谢谢你。

科龙克斯

# c++ - C++细粒度时间

> ID：13469715
> 
> 赞同：0
> 
> 时间：2012-11-20T09:04:48.047
> 
> 标签：c++, c, timer

以下代码将 0 作为函数的运行时。任何人都可以指出错误吗？

```
struct timeval start,end;
long seconds,useconds;
gettimeofday(&start, NULL);
int optimalpfs=optimal(n,ref,count);
gettimeofday(&end, NULL);
seconds  = end.tv_sec  - start.tv_sec;
useconds = end.tv_usec - start.tv_usec;
long opt_runtime = ((seconds) * 1000 + useconds/1000.0) + 0.5;
cout<<"\nOptimal Runtime is "<<opt_runtime<<"\n"; 
```

我得到相同的开始和结束时间。我得到以下输出

```
Optimal Runtime is 0 
```

请告诉我错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:24:23.527

`clock_gettime()`POSIX 1003.1b-1993 为(and )指定接口`clock_getres()`，并通过 MON 选项提供了一种时钟类型，其`clockid_t`值为`CLOCK_MONOTONIC`（以便您的计时器不受系统时间调整的影响）。如果在您的系统上可用，那么这些函数会返回一个潜在分辨率低至 1 纳秒的结构，尽管后一个函数会准确地告诉您时钟的分辨率。

```
 struct timespec {
         time_t  tv_sec;         /* seconds */
         long    tv_nsec;        /* and nanoseconds */
 }; 
```

您可能仍需要在循环中多次运行测试函数，以使时钟记录超出其分辨率的任何时间，并且您可能希望循环运行足够多的时间以至少比时钟的分辨率。

请注意，显然 Linux 人员误读了 POSIX.1b 规范和/或不理解单调递增时钟的定义，并且他们的`CLOCK_MONOTONIC`时钟受系统时间调整的影响，因此您必须使用他们发明的非标准`CLOCK_MONOTONIC_RAW`时钟以获得*真正的*单调时钟。

或者，可以使用相关的 POSIX.1`timer_settime()`调用来设置一个正在运行的计时器，一个信号处理程序来捕获计时器传递的信号，并`timer_getoverrun()`找出在信号排队和最终传递之间经过了多长时间，然后设置您的循环运行直到计时器关闭，计算设置的时间间隔内的迭代次数，加上溢出。

当然，在抢占式多任务系统上，即使您的进程没有运行，这些时钟和计时器也会运行，因此它们对于基准测试并不是很有用。

稍微少见的是可选的 POSIX.1-1999`clockid_t`值，由from`CLOCK_PROCESS_CPUTIME_ID`的存在表示，它表示调用进程的 CPU 时间时钟，给出的值表示调用进程的执行时间量。（更罕见的是 的 TCT 选项，由宏指示，它表示 CPU 时钟，给出的值表示调用线程的执行时间量。）`_POSIX_CPUTIME``<time.h>``clockid_t``CLOCK_THREAD_CPUTIME_ID``_POSIX_THREAD_CPUTIME`

不幸的是，POSIX 没有提到这些所谓的 CPUTIME 时钟是只计算用户时间，还是计算用户和系统（以及中断）时间，由进程或线程累积，所以如果你的代码在分析中进行任何系统调用，那么在内核模式下花费的时间可能会或可能不会被表示。

更糟糕的是，在多处理器系统上，如果您的进程在执行期间碰巧从一个 CPU 迁移到另一个 CPU，那么 CPUTIME 时钟的值可能完全是虚假的。实现这些 CPUTIME 时钟的计时器也可能在不同的 CPU 内核上以不同的速度运行，并且在不同的时间运行，这使它们的含义进一步复杂化。即它们可能并不意味着与实际挂钟时间相关的任何内容，而只是表明 CPU 周期数（只要始终使用相对时间并且用户知道执行时间可能因外部因素而异）。更糟糕的是，据报道，在 Linux CPU TimeStampCounter 上，基于 CPUTIME 时钟甚至可以报告进程已休眠的时间。

如果您的系统具有良好的工作`getrusage()`系统调用，那么它有望能够为您的进程在运行时*分别*`struct timeval`消耗的每个实际用户和系统时间提供一个。但是，由于这最多会使您回到微秒时钟，因此您需要重复运行测试代码足够多次以获得更准确的时间，调用*`getrusage()`在循环之前一次，然后再一次，并计算给定时间之间的差异。对于简单的算法，这可能意味着运行它们数百万次，甚至更多。另请注意，在许多系统上，用户时间和系统时间之间的划分有些随意，如果在重复循环中单独检查，其中一个甚至可能出现倒退。但是，如果您的算法没有进行系统调用，那么对时间增量求和仍然应该是您的代码执行的合理总时间。*

 *顺便说一句，在比较时间值时要小心，以免在字段中溢出或以负值结尾，正如@Nim 所建议的那样，或者可能像这样（来自 NetBSD's `<sys/time.h>`）：

```
 #define timersub(tvp, uvp, vvp)                             \
        do {                                                    \
            (vvp)->tv_sec = (tvp)->tv_sec - (uvp)->tv_sec;      \
            (vvp)->tv_usec = (tvp)->tv_usec - (uvp)->tv_usec;   \
            if ((vvp)->tv_usec < 0) {                           \
                (vvp)->tv_sec--;                                \
                (vvp)->tv_usec += 1000000;                      \
            }                                                   \
        } while (0) 
```

（您甚至可能想要`tv_usec`在范围内更加偏执）

关于基准测试的另一重要注意事项：确保您的函数实际被调用，理想情况下是通过检查编译器的程序集输出。在驱动程序循环的单独源模块中编译您的函数通常会说服优化器保留调用。另一个技巧是让它返回一个你在循环内分配给定义为的变量的值`volatile`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:46:55.550

我通常会做这样的计算：

```
long long ss = start.tv_sec * 1000000LL + start.tv_usec;
long long es = end.tv_sec * 1000000LL + end.tv_usec; 
```

然后做点不一样的

```
long long microsec_diff = es - ss; 
```

现在根据需要进行转换：

```
double seconds = microsec_diff / 1000000.; 
```

通常，我不会为最后一步而烦恼，以微秒为单位进行所有计时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:08:54.747

你在这里有浮点数和整数的奇怪组合：

```
long opt_runtime = ((seconds) * 1000 + useconds/1000.0) + 0.5; 
```

尝试使用：

```
long opt_runtime = (long)(seconds * 1000 + (float)useconds/1000); 
```

这样，您将在几毫秒内获得结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T10:42:19.387

的执行时间`optimal(...)`小于 的粒度`gettimeofday(...)`。这可能发生在 Windows 上。在 Windows 上，典型的粒度高达 20 毫秒。我在这里回答了一个相关的 gettimeofday(...)[问题](https://stackoverflow.com/a/13176304/1504523)。对于 Linux，我问[linux gettimeofday() 的微秒时间是如何获得的，它的精度是多少？](https://stackoverflow.com/questions/13230719/how-is-the-microsecond-time-of-linux-gettimeofday-obtained-and-what-is-its-acc)并取得了不错的成绩。

[此](https://stackoverflow.com/questions/7685762/windows-7-timing-functions-how-to-use-getsystemtimeadjustment-correctly)SO 答案中描述了有关如何获得准确时间的更多信息。*

# matlab - 提取除向量的每个第 n 个元素之外的每个元素

> ID：13469718
> 
> 赞同：8
> 
> 时间：2012-11-20T09:05:00.183
> 
> 标签：matlab, indexing

给定一个向量

```
A = [1,2,3,...,100] 
```

我想提取所有元素，除了每个 n 次。所以，对于 n=5，我的输出应该是

```
B = [1,2,3,4,6,7,8,9,11,...] 
```

我知道您可以通过以下方式访问每个第 n 个元素

```
A(5:5:end) 
```

但我需要类似逆命令的东西。如果这不存在，我将遍历元素并跳过每个第 n 个条目，但这将是肮脏的方式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T09:13:58.533

您可以消除这样的元素：

```
A = 1:100;
removalList = 1:5:100;
A(removalList) = []; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T09:11:27.467

使用口罩。假设你有

```
A = 1 : 100; 
```

然后

```
m = mod(0 : length(A) - 1, 5); 
```

`A`将是一个与包含重复序列的长度相同的向量`0 1 2 3 4`。您想要 A 中的所有内容，除了 where 的元素`m == 4`，即

```
B = A(m ~= 4); 
```

将导致

```
B == [1 2 3 4 6 7 8 9 11 12 13 14 16 ...] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T09:28:37.623

或者您可以使用逻辑索引：

```
n = 5; % remove the fifth
idx = logical(zeroes(size(A))); % creates a blank mask
idx(n) = 1; % makes the nth element 1
A(idx) = []; % ta-da! 
```

关于您引用的“反转”命令，可以使用逻辑索引来实现该行为。您可以否定向量以将每 1 转换为 0，反之亦然。

因此，此代码将删除除第五个元素之外的任何元素：

```
negatedIdx = ~idx;
A(negatedIdx) = []; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-05T08:57:23.130

为什么不这样使用呢？

说 A 是你的向量

```
A = 1:100
n = 5
B = A([1:n-1,n+1:end]) 
```

然后

```
B=[1 2 3 4 6 7 8 9 10 ...] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-25T23:34:54.207

解决您的问题的一种可能方法是 function [`setdiff()`](http://www.mathworks.com/help/matlab/ref/setdiff.html)。

在您的具体情况下，解决方案是：

```
lenA = length(A);
index = setdiff(1:lenA,n:n:lenA);
B = A(index) 
```

如果您一次完成所有操作，则可以避免两个额外的变量：

```
B = A( setdiff(1:end,n:n:end) ) 
```

但是，[逻辑索引](http://www.mathworks.com/help/matlab/math/matrix-indexing.html#bq7egb6-1)是一个更快的选项，经[测试](http://www.mathworks.com/matlabcentral/answers/41762-delete-row-from-matrix#answer_51471)：

```
lenA = length(A);
index = true(1, lenA);
index(n:n:lenA) = false;
B = A(index) 
```

所有这些代码都假定您已经指定了变量`n`，并且可以适应不同的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-24T09:30:54.560

对于最少的代码，您几乎已经准备就绪。如果要调整现有阵列，请使用：

```
A(n:n:end)=[]; 
```

或者，如果您想要一个名为 B 的新数组：

```
B=A;
B(n:n:end)=[]; 
```

# mysql - Windows Server 2008 R2 上 MySQL 5.5 的错误 1067

> ID：13469721
> 
> 赞同：3
> 
> 时间：2012-11-20T09:05:17.477
> 
> 标签：mysql, innodb, windows-server-2008-r2, logfile, mysql-error-1067

我在 2 个月前在 Windows Server 2008 R2 上安装了 MySQL Server 5.5，它一直工作到现在。但是突然 MySQL 服务出现故障，我无法重新启动该服务。错误信息：

```
121120 14:33:31 [Note] Plugin 'FEDERATED' is disabled.
121120 14:33:31 InnoDB: The InnoDB memory heap is disabled
121120 14:33:31 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121120 14:33:31 InnoDB: Compressed tables use zlib 1.2.3
121120 14:33:31 InnoDB: Initializing buffer pool, size = 2.0G
121120 14:33:31 InnoDB: Completed initialization of buffer pool
InnoDB: Error: log file .\ib_logfile0 is of different size 0 95420416 bytes
InnoDB: than specified in the .cnf file 0 224395264 bytes!
121120 14:33:31 [ERROR] Plugin 'InnoDB' init function returned error.
121120 14:33:31 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
121120 14:33:31 [ERROR] Unknown/unsupported storage engine: INNODB
121120 14:33:31 [ERROR] Aborting

121120 14:33:31 [Note] C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld: Shutdown complete 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:14:21.400

这是错误：

```
InnoDB: Error: log file .\ib_logfile0 is of different size 0 95420416 bytes
InnoDB: than specified in the .cnf file 0 224395264 bytes! 
```

您可以做的是搜索该 .cnf 文件并将字节从更改`224395264`为`95420416`

梅比这有帮助....

**此处提到的**更新：**[更改 InnoDB 日志文件大小](https://dba.stackexchange.com/questions/1261/how-to-safely-change-mysql-innodb-variable-innodb-log-file-size)**

 **当服务器未运行时，您能否删除日志文件（ .\ib_logfile0 ），然后问题不再存在...**

# c# - 奇怪的 C# 泛型约束

> ID：13469723
> 
> 赞同：7
> 
> 时间：2012-11-20T09:05:25.017
> 
> 标签：c#, generics, recursion

> **可能重复：**
> [不可能的递归泛型类定义？](https://stackoverflow.com/questions/9663189/impossible-recursive-generic-class-definition)

我刚刚发现

```
public class Foo<T> where T : Foo<T>
{

} 
```

是合法的。它到底是什么意思？它似乎是递归的，是否可以实例化这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:33:21.217

我不会说这是没用的。让我们观察下面的示例如何支持*流畅*的语法。在某些情况下，您正在**父级**`base`中创建一些实现并希望提供流畅的声明......您可以通过这种方式使用此约束

 **```
public class Parent<TChild>
    where TChild : Parent<TChild>
{
    public string Code { get; protected set; }

    public TChild SetCode(string code)
    {
        Code = code;
        return this as TChild; // here we go, we profit from a constraint
    }
}

public class Child : Parent<Child>
{
    public string Name { get; protected set; }

    public Child SetName(string name)
    {
        Name = name;
        return this // is Child;
    }
}

[TestClass]
public class TestFluent
{
    [TestMethod]
    public void SetProperties()
    {
        var child = new Child();
        child
            .SetCode("myCode") // now still Child is returned
            .SetName("myName");

        Assert.IsTrue(child.Code.Equals("myCode"));
        Assert.IsTrue(child.Name.Equals("myName"));
    }
} 
```

请举个例子，说明如何使用此约束**

# javascript - 选择框两列

> ID：13469728
> 
> 赞同：1
> 
> 时间：2012-11-20T09:05:45.640
> 
> 标签：javascript, jquery, html-select

> **可能重复：**
> [如何显示两列下拉菜单？](https://stackoverflow.com/questions/2027711/how-to-show-a-two-column-dropdown)

我需要在我的选择框中有“2 列”，以便第一个值正确对齐。图片说明了问题：

![在此处输入图像描述](../Images/14769b9f8956c717fda8e61c52438e33.png)

国家代码未对齐，但由于我无法在 'si 中设置 html 元素，因此需要某种模仿选择功能的插件，让我决定每个选项的结构及其值。

我更喜欢一个 jQuery 插件。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:12:30.360

我不确定你会为此找到一个插件。

您可以尝试将字体更改为 Courier，并为代码分配最大字符数 3-4 ？

然后在 (4 - code.length) 的代码后放置空格。然后将值输出到选择框。

基本上，伪代码：

```
var lstOfSelectOptionTexts = ...

iterate list

split into codes and country names

str = code + (4-code.length)*spaces + countryName

generateOption(str) 
```

# android - Android：将文本样式设置为 TextView 文本的一部分

> ID：13469731
> 
> 赞同：2
> 
> 时间：2012-11-20T09:05:55.033
> 
> 标签：android, textview

[在 Android 中，为整个 TextView 设置样式](https://stackoverflow.com/questions/6200533/set-textview-style-bold-or-italic)很容易：

```
textView.setTypeface(null, Typeface.BOLD_ITALIC);
textView.setTypeface(null, Typeface.BOLD);
textView.setTypeface(null, Typeface.ITALIC); 
```

有没有办法为视图中的特定单词（或字符）设置样式？我想生成如下一行：

> **年份**：2012，**语言**：亚美尼亚语，**字幕**：英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:09:55.637

是的，您可以使用[Html.fromHtml](http://developer.android.com/reference/android/text/Html.html)将特定单词的样式更改为：

```
textview.setText(Html.fromHtml("<b>" + Year: + "</b>"+"2012,
                  "+"<b>" + Language: + "</b>"+":Armenian,"
                  "+"<b>" + Subtitles: + "</b>"+":English")); 
```

**编辑 ：**

如果您有任何问题要使用，`Html.fromHtml(...)`那么您可以使用[SpannableString](http://developer.android.com/reference/android/text/SpannableString.html)来创建具有不同字体、颜色或样式的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:09:36.833

```
textView.setText(Html.fromHtml(
    "<b> Year </b>2012<br> <b> Language </b>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:10:54.357

为此，您可以使用 HTML 格式的文本，如下所示。

```
 textView.setText(Html.fromHtml("<b>Year:</b>2012,<b>Language</b>")); 
```

# android - 我可以以某种方式结合 SDL 和 Android Java UI 元素吗？

> ID：13469733
> 
> 赞同：1
> 
> 时间：2012-11-20T09:06:01.063
> 
> 标签：android, sdl

我有一个应用程序可以在屏幕的 3 个区域呈现视频。在每个区域中，它呈现不同的视频。

我正在做的是：我正在使用 NDK 解码所有 3 个视频的帧，然后将帧作为位图传递给 Java，并在屏幕上的 3 个不同的 SurfaceView 中呈现这些位图。

它可以工作，但我听说应该能够使用 SDL 进行更快的渲染。

现在，所有适用于 Android 的 SDL 示例似乎都在一个窗口中呈现 - 整个屏幕。但是我需要在屏幕上的特定位置进行渲染，因为屏幕上还有一些 Java UI 元素。

那么，我能否以某种方式使用 SDL，但在特定屏幕区域进行渲染，保留 Java UI 控件和其他内容的其他区域？

# php - php mysql图像无法正确显示

> ID：13469735
> 
> 赞同：1
> 
> 时间：2012-11-20T09:06:10.347
> 
> 标签：php, mysql, sql, file-upload, blob

我有以下代码用于从我的数据库表字段中获取图像。

```
public function getStudentses() {
    $students_data = array();       

    $query = $this->db->query(
        "SELECT * FROM " . DB_PREFIX . "students 
        WHERE customer_id = '" . (int)$this->customer->getId() . "'");   

    foreach ($query->rows as $result) {             
        $students_data[$result['students_id']] = array(
            'students_id'        => $result['students_id'],
            'firstname'          => $result['firstname'],
            'filename'           => $result['filename'],
            'image'              => $result['image'],
        );
    }       
    return $students_data;
} 
```

这是我用于显示图像的 HTML 代码：

```
<img src="<?php echo $result['image']; ?>" /> 
```

但是当我渲染我的页面时，图像无法正确显示，就像一些符号一样

```
s4�.���N����萗�p�A@4pbr��]�����F�G�&gt;�v��W 
```

为什么会这样？如何修复我的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T09:09:36.590

现代浏览器支持使用原始图像数据作为源。

您可以尝试使用类似的东西：

```
<img src="data:image/png;<?php echo $result['image']; ?>" /> 
```

[您应该使用base64](http://php.net/base64_encode)对图像进行编码，然后输出如下内容：

```
<img src="data:image/png;base64,<?php echo base64_encode($result['image']); ?>" /> 
```

例如，我有使用`image/png`。如果你的图像是别的东西，你应该使用相应的 encType。

请务必阅读[this](http://msdn.microsoft.com/en-us/library/cc848897%28v=vs.85%29.aspx)和[this](http://php.net/base64_encode)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T09:17:25.967

最常见的做法（我所见）是构建 html：

```
<img src="image.png.php?student_id=<?php echo $result['students_id']; ?>" /> 
```

然后`image.png.php`：

```
$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "students "
            "WHERE students_id = '" .(int)$request->getRequestParam('sudent_id') . "'"); 

// And now display raw content as image
$student = reset( $query->rows);
if( !$student){
   header('HTTP/1.0 404 Not Found');
   die( 'Blah blah... Blah blah blah');
}

header( 'Content-Type: image/jpeg');
echo $student['image']; 
```

通过这种方式，您将能够从您想要的任何位置创建指向可用图像的链接（无需远程站点上的任何数据库访问）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T09:09:07.513

您很可能需要将标题更改为图像

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

```
header('Content-Type: image/jpeg'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T09:10:58.027

假设您正在存储图像的原始二进制文件，您可以这样做：

```
'image'              => base64_encode($result['image']), 
```

然后在html中：

```
<img src="data:image/png;base64,<?php echo $result['image']; ?>" /> 
```

这假设图像是png。如果没有，请相应地更改 mime 类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T09:18:49.370

如果图像是由此代码存储的

```
 s4�.���N����萗�p�A@4pbr��]�����F�G�&gt;�v��W 
```

这是因为您只是从数据库中复制和粘贴此代码。确保它存储图像的名称/id 和图像的路径，并通过其路径和 id/名称获取图像，或者按照 Prasanth 对您说的内容。这是我的帮助 [如何从 MySQL 数据库中检索图像并显示在 html 标记中](https://stackoverflow.com/questions/7793009/retrieving-images-from-database-and-display-under-html-tag)

# c# - MVC 中的倒数计时器

> ID：13469746
> 
> 赞同：5
> 
> 时间：2012-11-20T09:07:06.210
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我正在使用此[代码](http://jsfiddle.net/hHD4w/28/)在 _Layout.cshtml 页面中显示倒数计时器。
但是当我从一个页面移动到另一个页面时，计时器会在新页面加载时再次启动。1.导航到新页面时如何在不重新启动的情况下显示计时器。
2.如何停止用户刷新页面，使计时器不再启动。

我的布局代码：

```
 <table width="100%">
   <tr>
   <td width="2%">
   <img src="~/Images/philips_new.png" alt="" height="45" width="155" />
   </td>
   <td width="79%" align="right" class="Text_nocolor">
   <span class="Text_nocolor">
  @{ Html.RenderAction("GetUserName", "Login");}
   </span>
  </td>
  <td width="4%">
<div id="counter">
 </div>
 </td>
 <td width="4%" class="Text_nocolor" valign="middle">
    <a href="@Url.Action("Index", "Login", new { controller = "Login" })">
 <img src="~/Images/nome-logout.png" alt="" height="24" width="30" style="border-style: none; cursor: pointer;" /></a>
  </td>
  </tr>
 </table> 
```

我尝试使用 jquery 插件倒数计时器，但它显示对象在 IE 中不支持此属性错误。
任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-20T11:28:46.473

您可以在每次回发或页面刷新时使用与服务器端代码同步的 javascript 时间。

使用以下代码

```
 var dt = '@ViewBag.EndDate';
var dateAr = dt.split('-');
var newDate = dateAr[1] + '/' + dateAr[0] + '/' + dateAr[2];

var end = new Date(dateAr[1] + '/' + dateAr[0] + '/' + dateAr[2]);

var _second = 1000;
var _minute = _second * 60;
var _hour = _minute * 60;
var _day = _hour * 24;
var timer;

function showRemaining() {
   var now = new Date();
   var distance = end - now;
   if (distance &lt; 0) {
       clearInterval(timer);
       document.getElementById('countdown').innerHTML = 'EXPIRED!';
       window.location.href = '/Home/Index';

       return;
   }
var days = Math.floor(distance / _day);
var hours = Math.floor((distance % _day) / _hour);
var minutes = Math.floor((distance % _hour) / _minute);
var seconds = Math.floor((distance % _minute) / _second);

document.getElementById('countdown').innerHTML = hours + 'hrs ';
document.getElementById('countdown').innerHTML += minutes + 'mins ';
document.getElementById('countdown').innerHTML += seconds + 'secs'; 
```

}

```
timer = setInterval(showRemaining, 1000); 
```

你可以关注这个链接

[http://www.cshaptrick.com/2014/09/count-timer-asp-net-mvc-exams/](http://www.csharptrick.com/2014/09/count-timer-asp-net-mvc-exams/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:49:18.537

> 1.导航到新页面时如何在不重新启动的情况下显示计时器。您可以将计数器值存储在 cookie 中。这是

简单的方法，您可以在页面之间传递值。

> 2.如何停止用户刷新页面，使计时器不再启动。

如果您使用cookie来存储值，我认为这可以解决。不知道你说的这个问题是什么意思。

你的确切目标是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:19:57.603

使用 ajax 函数调用将在会话中存储计时器值的操作。因此，即使用户刷新页面，您仍然拥有当前值。

希望这可以帮助

# linux - linux内核内存管理：ZONE_DMA ,ZONE_NORMAL 大小变化

> ID：13469751
> 
> 赞同：0
> 
> 时间：2012-11-20T09:07:19.750
> 
> 标签：linux, kernel, driver, device

在Linux内核中分配内存区域的任何固定比率（如ZONE_DMA）应该在0-16MB之间，ZONE_NORMAL在16-896 MB之间，或者我们可以根据我们的需求进行更改，如果是的话，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:27:48.590

Those memory zones are defined based on hardware limitations. Even if recompile the kernel with a larger ZONE_DMA then devices which do 16-bit DMA will just fail. Same for DMA32 on 64bit.

In theory perhaps you could shrink some of the zones, but I'm not sure you have a reason for it. AFAIK normal allocations can automatically overflow into the DMA zone.

If you want more than 1G kernel memory then you need to change some top-level config options, not sure which.

# java - onActivityResult 中的多个请求代码

> ID：13469752
> 
> 赞同：1
> 
> 时间：2012-11-20T09:07:26.743
> 
> 标签：java, android, android-intent, switch-statement, onactivityresult

我有两个单独`startActivityForResult`的 s，它们利用不同的活动。我希望能够在我的主要活动中处理这些活动的结果。

然而，当返回主活动时，该功能被执行（例如，在 requestCodeText 的情况下，btn3 上的文本被设置为正确的值）但随后应用程序冻结。

这是我的代码：

```
 final int request_CodeNumber = 1;
final int request_CodeText = 2;

    public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);

    switch(requestCode) {
    case request_CodeText:
        Uri uri = data.getData();
        final Button btn3 = (Button)findViewById(R.id.btnMessage);
        if(resultCode == RESULT_OK) {
            btn3.setText((String) uri.toString());
        }
        break;

    case request_CodeNumber:
        Uri uri2 = data.getData();
        Cursor c = null;
        try {
            c = getContentResolver().query(uri2, new String[]{
                    ContactsContract.CommonDataKinds.Phone.NUMBER,
                    ContactsContract.CommonDataKinds.Phone.TYPE,
                    ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME},
                    null, null, null);
            if (c!= null && c.moveToFirst()) {
                String number = c.getString(0);
                int type = c.getInt(1);
                String contactName = c.getString(2);
                showSelectedNumber(type, number, contactName);
            }
        } finally {
            if (c != null) {
                c.close();
            }
        }
    break;
    }
} 
```

我在 logcat 中得到以下信息：

```
11-20 21:52:45.155: D/dalvikvm(655): GC_FOR_ALLOC freed 66K, 4% free 8004K/8259K, paused 85ms, total 97ms
11-20 21:52:45.215: I/dalvikvm-heap(655): Grow heap (frag case) to 10.633MB for 2903056-byte allocation
11-20 21:52:45.485: D/dalvikvm(655): GC_CONCURRENT freed <1K, 3% free 10838K/11143K, paused 122ms+20ms, total 273ms
11-20 21:52:47.055: D/libEGL(655): loaded /system/lib/egl/libEGL_emulation.so
11-20 21:52:47.076: D/(655): HostConnection::get() New Host Connection established 0x2a0d7d68, tid 655
11-20 21:52:47.218: D/libEGL(655): loaded /system/lib/egl/libGLESv1_CM_emulation.so
11-20 21:52:47.236: D/libEGL(655): loaded /system/lib/egl/libGLESv2_emulation.so
11-20 21:52:47.425: W/EGL_emulation(655): eglSurfaceAttrib not implemented
11-20 21:52:47.476: D/OpenGLRenderer(655): Enabling debug mode 0
11-20 21:52:54.076: W/EGL_emulation(655): eglSurfaceAttrib not implemented
11-20 21:52:59.646: W/EGL_emulation(655): eglSurfaceAttrib not implemented 
```

# c# - Quartz.NET 只执行一次作业

> ID：13469754
> 
> 赞同：2
> 
> 时间：2012-11-20T09:07:36.627
> 
> 标签：c#, .net, wcf, quartz.net-2.0

我正在尝试在 Quartz.NET 2.0 中进行简单的计划作业

我读过一个类似的问题，但对我没有用。

问题是作业在 StartAt 触发器后只执行一次。

这是我的代码：

```
public EntityMappingSvc()
{
    IJobDetail job = JobBuilder.Create<EntityMappingJob>().WithIdentity("QueueJob").Build();
    TriggerBuilder tb = TriggerBuilder.Create();
    tb.WithIdentity("StdTrigger");
    tb.WithSimpleSchedule(a => a.WithIntervalInMinutes(1));
    tb.StartAt(new DateTimeOffset(new DateTime(2012, 11, 20, 10, 55, 0)));
    tb.ForJob(job);
    ITrigger trigger = tb.Build();
    Global.sched.ScheduleJob(job, trigger);
}

protected void Application_Start(object sender, EventArgs e)
{
    Global.factory = new StdSchedulerFactory();
    Global.sched = Global.factory.GetScheduler();
    Global.sched.Start();

    GC.KeepAlive(factory);
    GC.KeepAlive(sched);
} 
```

这项工作很简单......但为了测试它，我不得不提出一个错误，该错误被单独捕获和处理，并且不影响实际工作。

在它第一次运行作业后，它被阻塞了

```
while (runnable == null && run)
{
     Monitor.Wait(this, 500);
}
if (runnable != null)
{
     ran = true;
     runnable.Run();
} 
```

在 SimpleThreadPool 的 Run 方法中。

有什么建议么？

PS：该应用程序是 WCF IIS 托管服务。

编辑：

```
TriggerBuilder tb = TriggerBuilder.Create();
tb.WithIdentity("StdTrigger");
tb.WithCronSchedule("0 1 * * * ?");
tb.StartAt(new DateTimeOffset(new DateTime(2012, 11, 20, 10, 45, 0)));
tb.ForJob(job);
ICronTrigger trigger = tb.Build() as ICronTrigger;
Global.sched.ScheduleJob(job, trigger); 
```

还是行不通。

同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T10:11:52.400

我刚刚遇到了同样的问题，你原来的工作只是第一次用简单的时间表运行的原因是你需要指定 .RepeatForever()

```
tb.WithSimpleSchedule(a => a.WithIntervalInMinutes(1).RepeatForever()); 
```

With the cronschedule you don't need to specify reapeatforever but personally I prefer using the simple schedule where possible as it is a lot more readable.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:16:08.830

我有一个类似的问题。替换符号：

```
GC.KeepAlive(factory);
GC.KeepAlive(sched); 
```

使用指向调度程序的简单静态指针：

```
private static scheduler _scheduler;
...
_scheduler.Start(); 
```

# delphi - 构建 HTTP 服务器应用程序

> ID：13469756
> 
> 赞同：3
> 
> 时间：2012-11-20T09:07:41.507
> 
> 标签：delphi, indy, tadodataset

我有一个做财务报告的项目，我想让用户能够通过互联网获得这些报告

我尝试使用 TIdHTTPServer 这是一个 Indy 组件来使我的应用程序作为 HTTP 服务器工作并让它能够

接收请求 -> 处理请求 -> 发回请求处理的结果

使用特殊端口。

现在我的问题是我收到很多访问冲突错误和随机异常，这看起来像是线程问题，或者我不知道，因为如果我在不使用 TIdHTTPServer 的情况下处理相同的请求，我不会遇到任何问题

我正在使用 OnCommandGet 事件来处理请求并将结果发送回上下文流中的用户。

我需要的是演示如何将它与 TADODataSet 和 TADOConnection 一起使用

例如，我需要用户能够发送请求并且 TIdHTTPServer 接受请求（例如，使用 ADODataSet 调用存储过程并将结果作为 XML 文件并将其发送回用户）

请帮忙....谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:18:46.363

服务器如何工作的一种可能性......

```
unit Unit3;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs,IDContext, IdBaseComponent, IdComponent, IdCustomTCPServer, IdTCPServer, StdCtrls, DB, ADODB;

type
  TForm3 = class(TForm)
    IdTCPServer1: TIdTCPServer;
    Memo1: TMemo;
    Button1: TButton;
    DummyConnection: TADOConnection;
    procedure Button1Click(Sender: TObject);
    procedure IdTCPServer1Execute(AContext: TIdContext);
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form3: TForm3;

implementation
uses ComObj,AdoInt,ActiveX;
{$R *.dfm}
function SendStream(AContext: TIdContext; AStream: TStream): Boolean;
begin
   Result := False;
   try
     AContext.Connection.IOHandler.Write(AStream.Size);  // sending length of Stream first
     AContext.Connection.IOHandler.WriteBufferOpen;
     AContext.Connection.IOHandler.Write(AStream, AStream.Size);
     AContext.Connection.IOHandler.WriteBufferFlush;
   finally
     AContext.Connection.IOHandler.WriteBufferClose;
   end;
   Result := True;
end;

procedure TForm3.Button1Click(Sender: TObject);
begin
  IdTCPServer1.Active := true;
end;

{ Clientside function
Function RecordsetFromXMLStream(Stream:TStream): _Recordset;
var
  RS: Variant;
begin
    RS := CreateOleObject('ADODB.Recordset');
    RS.Open(TStreamAdapter.Create(Stream) as IUnknown);
    Result := IUnknown(RS) as _Recordset;
end;
}

Procedure RecordsetToXMLStream(const Recordset: _Recordset;Stream:TStream);
var
  RS: Variant;
begin
    if Recordset = nil then Exit;
    RS := CreateOleObject('ADODB.Recordset');
    RS := Recordset;
    RS.Save(TStreamAdapter.Create(stream) as IUnknown, adPersistXML);
    Stream.Position := 0;
end;

Procedure GetQueryStream(Const s,ConStr:String;ms:TMemoryStream);
var
 AC:TAdoConnection;
 ads:TAdodataset;
begin
 AC:=TAdoConnection.Create(nil);
 try
 ads:=TAdodataset.Create(nil);
   try
     ads.Connection := AC;
     AC.ConnectionString := ConStr;
     ads.CommandText := s;
     ads.Open;
     RecordsetToXMLStream(ads.Recordset,ms);
   finally
     ads.Free
   end;
 finally
   AC.Free
 end;

end;

procedure TForm3.IdTCPServer1Execute(AContext: TIdContext);
var
 cmd:String;
 ms:TMemoryStream;
begin
     CoInitialize(nil);
     AContext.Connection.IOHandler.Readln(cmd);
     ms:=TMemoryStream.Create;
     try
     GetQueryStream('Select * from Adressen',DummyConnection.ConnectionString,ms);
     ms.Position := 0;
     SendStream(AContext,ms);
     AContext.Connection.Socket.CloseGracefully;
     finally
        ms.Free;
        CoUninitialize;
     end;

end;
end. 
```

# vb.net - 使用过的 IWorkspace 上的 IDatabaseCompact.Compact()

> ID：13469757
> 
> 赞同：0
> 
> 时间：2012-11-20T09:07:39.100
> 
> 标签：vb.net, workspace, arcmap, arcobjects, compact-database

我正在用 vb.net 编写 ArcMap-AddIn。尝试使用`compact`IWorkspace(mdb) 时出现错误，错误是：

> 异常
> 
> 您试图打开一个数据库，该数据库已由计算机“XXXXXX”上的用户“ADMIN”打开。当数据库可用时再试一次。
> 
> 在 ESRI.ArcGIS.Geodatabase.IDatabaseCompact.Compact() 上 MyProject.MyClass.CompactGDB(IWorkspace pWS)

如何压缩使用过的工作空间？还有 8 个其他功能也使用了我的工作区。

有什么建议么？

编码：

```
' CompactGDB
    Public Sub CompactGDB(ByVal pWS As IWorkspace)

        Dim pDatabaseCompact As IDatabaseCompact
        If (TypeOf pWS Is IDatabaseCompact) Then
            pDatabaseCompact = CType(pWS, IDatabaseCompact)
            If (pDatabaseCompact.CanCompact) Then
                Try
                    pDatabaseCompact.Compact()
                Catch ex As Exception
                    MessageBox.Show(ex.type & ex.Message & ex.StackTrace, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
                End Try    
            End If
        End If    
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:36:29.340

找到了解决方案：

在调用 Compact() 方法之前，请确保数据库上没有**任何现有的锁**。

如果是**文件地理数据库**，则在 Windows 资源管理器中打开**gdb目录并查找****LOCK**类型的文件，它们以 .lock 结尾。

对于**个人地理数据库**，目录中将有一个与**.mdb**同名的**.ldb**文件。

 ***   如果您在地图中加载了地理数据库中的图层或表，则您将无法移除所有锁定。
*   如果其他用户正在访问地理数据库，那么您将无法移除所有锁定。
*   如果您使用 arcobjects 临时访问地理数据库，那么您需要使用良好的做法并在调用过程结束时关闭所有地理数据库资源。 *这包括在您完成所有 COM 对象后释放它们。*

使用**ESRI.ArcGIS.ADF.Connection.Local**命名空间中的**[ComReleaser 类](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#/Overview/000500000004000000/)****

# android - 服务调用多次结束

> ID：13469760
> 
> 赞同：1
> 
> 时间：2012-11-20T09:07:54.053
> 
> 标签：android, android-intent, service

我正在通过单击按钮启动服务：

```
Intent intent = new Intent(getActivity(), UploadService.class);                     
getActivity().startService(intent); 
```

我的应用程序可以启动多项服务。我知道第一次调用 onCreate() ，然后如果服务正在运行，则调用 onStartCommand() 。

onStartCommand 返回`START_STICKY`.

但我面临一个奇怪的行为：在第一次单击时，调用服务，onCreate() 然后 onStartCommand()... 等。在第二次单击时，当服务仍在运行时，onStartCommand()...等.

但是当第一个完成时， onDestroy() 被调用，而第二个仍在进行中......？

如何避免这种情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:16:24.850

如果您启动已经在运行`onDestroy()`的服务，则不会调用服务，并且已经运行的服务实例将被带到前面，但如果您的服务已明确完成/停止，则只会`onDestroy()`调用它。

# ios - JUCE ios 音频处理

> ID：13469764
> 
> 赞同：1
> 
> 时间：2012-11-20T09:08:05.130
> 
> 标签：ios, audio, juce

您能否指出任何在 iOS 中使用 JUCE 库处理音频的示例。提前致谢。

问候，瓦鲁纳。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:39:55.170

查看 JUCE 附带的 JUCE 演示。这在 iOS 上运行得很好。只需编辑该代码并`AudioIODeviceCallback`使用您的`AudioDeviceManager`对象注册一个即可进行一些自定义音频处理。

# c# - 如何反序列化包含多维数组的 json 对象？

> ID：13469765
> 
> 赞同：6
> 
> 时间：2012-11-20T09:08:06.773
> 
> 标签：c#, javascript, .net, json

我需要一些关于将包含多维数组的 JSON 对象转换为我的类的帮助。我试图反序列化 json 对象但失败了。JsonMaclar 类对象为空。请帮忙。

脚本代码；

```
var allFields = new Array();
allFields.push({
                        BirinciKatilimciId: birinciKatilimciId.val(),
                        IkinciKatilimciId: ikinciKatilimciId.val(),
                        BirincininSkoru: birincininSkoru.val(),
                        IkincininSkoru: ikincininSkoru.val(),
                        MacSayisi: macSayisi.val(),
                        MacSuresi: macinSuresi.val(),
                        MacinOynanmaSaati: macinOynanmaSaati.val(),
                        Hukmen: hukmen.is(':checked'),
                        RatingeDahil: ratingeDahil.is(':checked'),
                        MaclarTablosundaGoster: maclarTablosundaGoster.is(':checked'),
                        MacinTarihi: macinTarihi.val()
                    });

$("#<%=btnMaclariKaydet.ClientID %>").click(function () {

            var jsonText = JSON.stringify({
                arrayAllMaclar: allFields
            });
            $('#<%= hfMaclar.ClientID %>').val(jsonText);

        }); 
```

c#代码；

```
protected void btnMaclariKaydet_Click(object sender, EventArgs e)
    {
        JavaScriptSerializer ser = new JavaScriptSerializer();
        JsonMaclar turnuvaMaclar = ser.Deserialize<JsonMaclar>(hfMaclar.Value);
    }
public class JsonMaclar {
    List<JsonMac> arrayAllMaclar { get; set; }    
}

public class JsonMac {
    String BirinciKatilimciId { get; set; }
    String IkinciKatilimciId { get; set; }
    String BirincininSkoru { get; set; }
    String IkincininSkoru { get; set; }
    String MacSayisi { get; set; }
    String MacSuresi { get; set; }
    String MacinOynanmaSaati { get; set; }
    String Hukmen { get; set; }
    String RatingeDahil { get; set; }
    String MaclarTablosundaGoster { get; set; }
    String MacinTarihi { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T09:13:02.153

我建议您使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)。它是一个开源库，可将您的 c# 对象序列化和反序列化为 json 和 Json 对象为 .net 对象...

**序列化示例：**

```
Product product = new Product();
product.Name = "Apple";
product.Expiry = new DateTime(2008, 12, 28);
product.Price = 3.99M;
product.Sizes = new string[] { "Small", "Medium", "Large" };

string json = JsonConvert.SerializeObject(product);
//{
//  "Name": "Apple",
//  "Expiry": new Date(1230422400000),
//  "Price": 3.99,
//  "Sizes": [
//    "Small",
//    "Medium",
//    "Large"
//  ]
//}

Product deserializedProduct = JsonConvert.DeserializeObject<Product>(json); 
```

**[Json.NET 4.5 第 8 版](http://james.newtonking.com/archive/2012/08/06/json-net-4-5-release-8-multidimensional-array-support-unicode-improvements.aspx)**- 多维数组支持，Unicode 改进 Json.NET 现在支持序列化和反序列化多维数组。如果您的一种类型具有多维数组属性 It Just Works™，则您无需做任何事情。

```
string[,] famousCouples = new string[,]
  {
    { "Adam", "Eve" },
    { "Bonnie", "Clyde" },
    { "Donald", "Daisy" },
    { "Han", "Leia" }
  };

string json = JsonConvert.SerializeObject(famousCouples, Formatting.Indented);
// [
//   ["Adam", "Eve"],
//   ["Bonnie", "Clyde"],
//   ["Donald", "Daisy"],
//   ["Han", "Leia"]
// ]

string[,] deserialized = JsonConvert.DeserializeObject<string[,]>(json);

Console.WriteLine(deserialized[3, 0] + ", " + deserialized[3, 1]);
// Han, Leia 
```

# android - 在android中控制onActivityresult()

> ID：13469768
> 
> 赞同：0
> 
> 时间：2012-11-20T09:08:14.710
> 
> 标签：android, android-intent, android-activity

如果用户启用了位置服务，我必须启动设置屏幕以启用位置服务（如果它被禁用）并在返回我的活动后刷新我的视图。

启动设置 Onclick 菜单项，

```
startActivityForResult(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS ), 1234); 
```

和

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {   
    super.onActivityResult(requestCode, resultCode, data);

     if(requestCode == 1234 && (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER ) || locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER ))){

        refreshViews(); // making a server call and getting new data and assigning to views
    }

} 
```

问题是：如果我启用一次并返回应用程序，它会根据我的需要刷新我的视图。但是，如果我再次单击菜单项并返回应用程序，它会再次刷新。每当它从禁用状态变为启用状态时，我想刷新我的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:11:48.927

首先检查提供程序是否启用。如果它被禁用，那么只开始活动。

# ios - 旧 iOS 设备的蓝牙框架

> ID：13469773
> 
> 赞同：3
> 
> 时间：2012-11-20T09:08:29.513
> 
> 标签：ios, bluetooth, compatibility, core-bluetooth

我的问题与 iOS 周围的蓝牙技术有关。我看过 WWDC 关于低功耗蓝牙 101、新增功能、基础知识等，以及关于使用 iOS 5 及更高版本中可用的 CoreBluetooth 框架的内容。我浏览了不同的站点和文档，试图找到有关蓝牙 2.1 和 4 的更多信息，但很少。GameKIt 不是答案，我正在开发一个可与非 iOS 设备配合使用的应用程序。我经历过的一些主题：

[从 iOS 连接到蓝牙设备，没有 MFi](https://stackoverflow.com/questions/11955278/connecting-to-a-bluetooth-device-from-ios-no-mfi)

[iOS - 如何在我的应用程序中集成蓝牙设备](https://stackoverflow.com/questions/8090298/ios-how-to-integrate-bluetooth-devices-in-my-app)

[http://www.bluegiga.com/files/bluegiga/Presentations/BT4_0_for_Apple.pdf](http://www.bluegiga.com/files/bluegiga/Presentations/BT4_0_for_Apple.pdf)

[带有较旧蓝牙的蓝牙 4.0](https://stackoverflow.com/questions/12004171/bluetooth-4-0-with-older-bluetooth)

[与非 IOS 设备的 iPhone 蓝牙连接](https://stackoverflow.com/questions/6071516/iphone-bluetooth-connectivity-to-non-ios-devices)

但支持的设备只有 4S 及以上和最新的 iPad...

1) 最新的 CoreBluetooth 框架会在旧设备上失败吗？

2）苹果有没有BT 2.1或什么的框架？怎么办呢，ipad2和iphone4的用户还这么多，我也不能无视他们。。那么到底该用什么框架呢？

任何帮助、建议、想法、链接将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T13:11:58.897

嗯...您需要了解一件事：***CoreBluetooth 框架***用于*低功耗蓝牙*，而***ExternalAccessory 框架***用于*“经典”蓝牙*。它实际上是我们通常所说的蓝牙（作为简单的用户/消费者）的两种不同的方法。只有最近的 iDevices 支持*低功耗蓝牙*（4S 的 iPhone、2011 年的 MacBook Air 等）。这就是为什么它不支持*iOS4*例如。供您参考，低功耗蓝牙是蓝牙的一种分支，仅出现在蓝牙 4.0 中。即使拥有蓝牙 4.0 设备也不能确保它支持蓝牙低功耗（正如我所说，它是一个分支，并不总是包含在内）。作为一个简单的愿景，Bluetooth Low Energy 就像一个带有 NSDictionnary 的 NSDictionnary。您将获得一个*外围设备*，它作为具有一个或多个*特征的多个**服务*之一。与普通设备完全不同，对吧？

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T10:47:31.773

> 苹果有 BT 2.1 的框架吗？怎么办呢，ipad2和iphone4的用户还这么多，我也不能无视他们。。那么到底该用什么框架呢？

要与蓝牙 2.1 设备通话，您需要加入 Made for iPhone 配件程序。它的细节在保密协议下，但你应该期待苹果审查你的制造过程和审计你的账户，并将定制芯片放入配件中。如果您不自己制作配件，那么您可能不走运。

唯一的例外是 iOS 原生支持的设备类别：键盘、音频输出、汽车音响、其他 iPhone 等。但是，您仍然无法发送和接收任意数据，您只能使用针对特定设备存在的任何 API功能（例如，对于音频输出，Core Audio 允许您为蓝牙设备的行为设置一些属性）。*

# youtube-api - 如何使用 API v3 更新 YouTube 上的视频

> ID：13469782
> 
> 赞同：6
> 
> 时间：2012-11-20T09:09:02.430
> 
> 标签：youtube-api

我正在尝试使用“试试看！” 在此页面上： [https ://developers.google.com/youtube/v3/docs/videos/update](https://developers.google.com/youtube/v3/docs/videos/update)

但我收到错误的请求错误。我应该在哪里设置要更新的视频的 ID？更新视频标题或描述的请求格式是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T21:00:21.940

请求格式是发送一个“视频资源”JSON数据包，看起来像这样：

```
{
"id": "GS9h8M3ep-M",
"kind": "youtube#video",
"etag": "\"MhkxP1IuK4vYJ-nhM3d9E49-2oU/HUmayeWdVX19XyvhE5c2RnbZjgA\"",
"snippet": {
    "publishedAt": "2012-11-10T09:36:49.000Z",
    "channelId": "UC070UP0rK7rShCW1x4B4bgg",
    "title": "Finding Ourselves: The Humanities as a Discipline",
    "description": "Lecture delivered by Geoffrey Harpham, of the National Humanities Center, at the inaugural event of the Brigham Young University Humanities Center.",
    "thumbnails": {
     "default": {
      "url": "https://i.ytimg.com/vi/GS9h8M3ep-M/default.jpg"
     },
     "medium": {
      "url": "https://i.ytimg.com/vi/GS9h8M3ep-M/mqdefault.jpg"
     },
     "high": {
      "url": "https://i.ytimg.com/vi/GS9h8M3ep-M/hqdefault.jpg"
     }
    },
    "categoryId": "27",
    "tags": [
      "humanities",
      "Harpham",
      "BYU"
    ]
  }
} 
```

进行更新时，您只需要发送“id”和“kind”值，在这种情况下，还需要发送部分“snippet”。但是请注意，对于可写属性——snippet.title、snippet.description、snippet.tags、snippet.categoryId 和 status.privacyStatus——省略它们将使它们恢复为默认值（privacyStatus 为“public”，空白对于其他 4)。如果您要省略 categoryId，那么它会导致错误的请求，因为就好像您将其设置为没有类别，并且 Youtube 不允许视频没有类别（这是，然后，使 categoryId 成为事实上的必需元素）。您还必须重新包含标签、描述和隐私状态（除非您希望它默认为公开），这样它们就不会被清除。因此，要修改标题，您'

```
{
 "id": "GS9h8M3ep-M",
 "kind": "youtube#video",
 "snippet": {
    "title": "I'm being changed.",
    "categoryId": "27",
    "tags": [
      "humanities",
      "Harpham",
      "BYU"
    ],
    "description": " can be changed, too, but if I'm not to be I still have to be included as I was before. I will be emptied out if omitted."
  }
 } 
```

# javascript - 选择可放置区域

> ID：13469785
> 
> 赞同：0
> 
> 时间：2012-11-20T09:09:08.513
> 
> 标签：javascript, jquery, drag-and-drop

我想将我的小部件拖放到我的 div 中。我将我的小部件拖到我的 div 上，但它并没有丢弃真正的位置。

这是我的例子：jsfiddle.net/Mg6V3/15

我的目标是当我将小部件放在“1”上时，小部件必须放在其中。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:38:37.070

这比我最初想象的要容易。

首先，初始化 droppable 时可以设置[贪婪选项。](http://api.jqueryui.com/droppable/#option-greedy)它的目的是在使用嵌套的可放置对象时阻止放置事件传播到所有可放置的父对象。

其次，将可放置行为绑定到匹配的选择器不是一个恒定的过程。这意味着，当使用类似的东西时，`$('.test').droppable()`它只会将 droppable 绑定到 DOM 中已经存在的适用元素。如果您创建新的，您应该自己初始化它们的 droppable。

这是基于您的代码的工作示例。我试图最小化这些变化——它可以做得更好、更干净，但这只是一个插图，所以我想没关系。[http://jsfiddle.net/vM3dU/](http://jsfiddle.net/vM3dU/)

# yii - 如何在 yii 视图中动态指定页面大小？

> ID：13469787
> 
> 赞同：0
> 
> 时间：2012-11-20T09:09:11.743
> 
> 标签：yii

如何在 yii 视图中动态指定**页面大小**？（不是网格视图）在我的自定义视图页面中有一个搜索选项可以在 2 个日期之间查找用户列表我需要 2 知道如何动态指定页面大小？如果行数少于 10 如何隐藏[分页](http://www.yiiframework.com/doc/api/1.1/CPagination)？![在此处输入图像描述](../Images/87bfbe3da40125d4bc738fb0706434b9.png)

请检查屏幕截图

**我不希望搜索后的页面导航让用户感到困惑..**

我的控制器代码

```
 $criteria=new CDbCriteria();
        $count=CustomerPayments::model()->count($criteria);
        $pages=new CPagination($count);
        // results per page
        $pages->pageSize=10;
        $pages->applyLimit($criteria);
        $paymnt_details=CustomerPayments::model()->findAll($criteria);
   $this->render('renewal',array('paymnt_details'=>$paymnt_details,'report'=>$report,'branch'=>$branch,'model'=>$model,'pages' => $pages,));    
    } 
```

我的观点 [链接](http://pastebin.com/mpR3uWA3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:57:57.880

我假设您希望整个搜索结果列表显示在一个页面上，不管它有多长？

如果是这样，这很容易实现。

正如我在您的代码中看到的那样，您现在将 pageSize 定义为大小为 10。您可以将其更新为动态执行此操作：

```
$pages->pageSize = $count; 
```

要删除页面大小，您可以更改视图文件的 css，但为此我们需要您的视图文件来查看您是如何定义它的。

# iphone - 在 Xcode 中将 iPhone 目标应用程序覆盖到 Universal

> ID：13469792
> 
> 赞同：1
> 
> 时间：2012-11-20T09:09:34.133
> 
> 标签：iphone, ios, xcode, ios-universal-app

我有一个最初打算成为 iPhone 应用程序的项目，但现在我希望它也支持 iPad。我已将项目的目标从 iPhone 更改为 Universal，但我不知道如何管理我现在需要的两个 nib 版本，已经有为 iPhone 设计的 nib。我尝试根据设备加载具有不同笔尖的相同视图控制器，但我不允许将多个界面控件设置到相同的插座。有什么帮助吗？我有 Xcode 4.4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:15:37.163

这很容易。对于您的故事板文件，只需包含`_iPad`和`_iPhone`后缀。例如，如果原始情节提要名称是`MyStoryboard.storyboard`，那么您现在将拥有`MyStoryboard_iPad.storyboard`和`MyStoryboard_iPhone.storyboard`。您还可以在项目的摘要视图下为每个设备设置故事板文件。

然后，对于 .xib 文件，包括`~iPhone`和`~iPad`后缀。 `ViewController.xib`变成`ViewController~iPad.xib`和`ViewController~iPhone.xib`

首先，如果您现有的 .xib 文件，您可以创建一个副本并将它们重命名为具有 iPad 和 iPhone 后缀。然后根据需要更改每个 .xib 的内容。

至于 .m 代码，您可以检查设备类型并分支您的代码。我的方法是定义识别设备类型的宏，如下所示：

```
#define isDeviceIPad (UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
#define isDeviceIPhone (UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPhone) 
```

然后我只使用这些宏（返回布尔值）来编写特定于设备类型的代码（例如特定视图的位置或尺寸等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:18:14.253

您只能将目标设备更改为 iPhone / iPad，您可以使用`.xib`iPad 的文件：

```
 if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
{
    //For navigate to iphone view 
}
else{
     //For navigate to ipad view
} 
```

[参考](http://iphonedevelopment.blogspot.in/2010/04/converting-iphone-apps-to-universal.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:16:12.073

为每个文件添加 1 个针对 iPad 的 XiB，在导航期间，使用上面显示的代码检查设备类型后选择 Xib

# javascript - 同一元素的多个点击事件？

> ID：13469800
> 
> 赞同：1
> 
> 时间：2012-11-20T09:09:45.803
> 
> 标签：javascript, jquery

同一个元素可以有多个点击事件吗？我试图像这样简单地拥有它：

```
$('#templates').click(function(e) {
            do something..
        });

$('#templates').click(function(e) {
            do something else also..
        }); 
```

然而只有第二个事件触发。我找不到任何体面的答案来解释如何在单击时为单个元素执行此操作？

**注意**：第一次点击事件调用服务器端并加载一个新的 PHP 模板（这可能会影响我在第二次调用中可以使用的内容，因为单独两个点击都有效，但如果我尝试第二次单击相同的元素）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T09:14:09.163

```
$('#templates').click(function(e) {
        functionOne();
        functionTwo();
});

function functionOne(){

}

function functionTwo(){

} 
```

也许？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:42:07.517

请检查这个小提琴：

[http://jsfiddle.net/DqSSd/](http://jsfiddle.net/DqSSd/)

如您所见，它应该可以正常工作。

因此，请提供更多信息，如果您也提供 JS fiddle 会更好。

因为到目前为止，问题可能出在：

*   在第一个事件返回结果之前触发第二个事件
*   第一个事件从服务器返回错误
*   某些事件包含语法错误
*   ETC

您可以通过调查对服务器的 NET 调用（使用 Firebug 或 Chrome 开发人员工具栏）检查其中的一些内容。

同样出于测试目的，您可以输入 console `$('#templates').data("events")`，这样您就可以看到特定元素的所有事件和处理程序。

# php - PHP - 将两个数组合并为一个数组（也删除重复项）

> ID：13469803
> 
> 赞同：123
> 
> 时间：2012-11-20T09:10:01.660
> 
> 标签：php, arrays, wordpress, multidimensional-array

您好我正在尝试合并两个数组，并且还想从最终数组中删除重复值。

这是我的数组 1：

```
Array
    (
    [0] => stdClass Object
    (
    [ID] => 749
    [post_author] => 1
    [post_date] => 2012-11-20 06:26:07
    [post_date_gmt] => 2012-11-20 06:26:07
) 
```

这是我的数组 2：

```
Array
(
[0] => stdClass Object
(
[ID] => 749
[post_author] => 1
[post_date] => 2012-11-20 06:26:07
[post_date_gmt] => 2012-11-20 06:26:07

) 
```

我正在使用`array_merge`将两个数组合并为一个数组。它给出这样的输出

```
Array
(
[0] => stdClass Object
(
[ID] => 749
[post_author] => 1
[post_date] => 2012-11-20 06:26:07
[post_date_gmt] => 2012-11-20 06:26:07

[1] => stdClass Object
(
[ID] => 749
[post_author] => 1
[post_date] => 2012-11-20 06:26:07
[post_date_gmt] => 2012-11-20 06:26:07

) 
```

我想删除这些重复的条目，或者我可以在合并之前删除它们...请帮助..谢谢！！！！！！！！！

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2012-11-20T09:14:09.203

```
array_unique(array_merge($array1,$array2), SORT_REGULAR); 
```

[http://se2.php.net/manual/en/function.array-unique.php](http://se2.php.net/manual/en/function.array-unique.php)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-20T09:20:37.803

如前所述，可以使用[array_unique()](http://php.net/manual/en/function.array-unique.php)，但仅限于处理简单数据时。对象不是那么容易处理。

当 php 尝试合并数组时，它会尝试比较数组成员的值。如果成员是对象，则它无法获取其值并使用 spl 散列代替。[在此处阅读有关 spl_object_hash 的更多信息。](http://php.net/manual/en/function.spl-object-hash.php)

简单地说，如果你有两个对象，同一个类的实例，如果其中一个不是对另一个的引用 - 你最终将拥有两个对象，无论它们的属性值如何。

为确保合并数组中没有任何重复项，恕我直言，您应该自行处理此案。

此外，如果您要合并多维数组，请考虑使用[array_merge_recursive()](http://php.net/manual/en/function.array-merge-recursive.php)而不是[array_merge()](http://php.net/manual/en/function.array-merge.php)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-20T09:16:25.453

它将合并两个数组并删除重复项

```
<?php
 $first = 'your first array';
 $second = 'your second array';
 $result = array_merge($first,$second);
 print_r($result);
 $result1= array_unique($result);
 print_r($result1);
 ?> 
```

试试这个链接 [link1](http://php.net/manual/en/function.array-unique.php)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-20T09:15:23.460

尝试使用`array_unique()`

这消除了数组列表中的重复数据..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-29T13:21:28.197

您可以使用此代码来获得所需的结果。它将删除重复项。

```
$a1=array("a"=>"red","b"=>"green","c"=>"blue","d"=>"yellow");
$a2=array("e"=>"red","f"=>"green","g"=>"blue");

$result=array_unique(array_merge($a1,$a2));

print_r($result); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-14T08:11:46.007

上面的最佳解决方案在使用相同的关联键时会遇到一个问题，array_merge() 会在数组元素具有相同的 NON-NUMBER 键时将它们合并在一起，因此不适合以下情况

```
$a1=array("a"=>"red","b"=>"green","c"=>"blue","d"=>"yellow");
$a2=array("c"=>"red","d"=>"black","e"=>"green"); 
```

如果您能够将值输出到数组的键中（例如 Eloquent 中的 ->pluck('name', 'id')->toArray()），则可以改用以下合并方法

```
array_keys(array_merge($a1, $a2)) 
```

基本上代码所做的是它利用 array_merge() 的行为来摆脱重复的键并返回一个带有键作为数组元素的新数组，希望它有所帮助

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-01T09:12:23.867

就我而言，我不得不使用[`->toArray()`](https://laravel.com/docs/8.x/collections#method-toarray)

```
array_unique(array_merge($array1->toArray(),$array2->toArray()), SORT_REGULAR); 
```

结合这两个答案的结果

*   [https://stackoverflow.com/a/13469882/5675325](https://stackoverflow.com/a/13469882/5675325)

*   [https://stackoverflow.com/a/40020800/5675325](https://stackoverflow.com/a/40020800/5675325)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-06T09:28:50.297

合并两个数组不会删除重复项，您可以尝试以下示例从两个数组中获取唯一性

```
$a1=array("a"=>"red","b"=>"green","c"=>"blue","d"=>"yellow");
$a2=array("e"=>"red","f"=>"green","g"=>"blue");

$result=array_diff($a1,$a2);
print_r($result); 
```

# linux - Linux 错误 - 物理内存损坏？

> ID：13469804
> 
> 赞同：1
> 
> 时间：2012-11-20T09:10:02.993
> 
> 标签：linux, memory, corruption

早上好，我在 opensuse 11.3 上遇到问题。

我开发了一个运行 24 小时 /24 小时 360 天 /360 天的程序。我已经在大约 60 / 70 台计算机上安装了这个程序。在这台电脑的四个我有一个问题。

在随机时间（10 分钟/1 小时/1 天）之后，我的程序崩溃并且我无法再次启动它。该错误始终与一个或多个文件损坏有关。损坏的文件是随机的，有时是我的库，有时是我的可执行文件，有时是内核库，有时是系统文件，apache 服务器，ssh 服务器等......

我以为是硬盘问题，我想换掉，但问题又出现了。现在我认为这可能是内存问题，实际上，如果我重新启动计算机或清理缓存的内存（[http://www.hosting.com/support/linux/clear-memory-cache-on-linux- server](http://www.hosting.com/support/linux/clear-memory-cache-on-linux-server)）我的程序成功重新启动（但是，在随机时间后问题再次出现）。

你怎么看？我该怎么做才能更确定这是内存问题？我不能直接访问这台电脑，我可以通过 ssh 客户端（putty）连接到这台电脑。

我尝试使用 memtester 程序（[http://www.linuxarticles.org/2010/12/test-memory-using-memtester-in-linux/](http://www.linuxarticles.org/2010/12/test-memory-using-memtester-in-linux/)）但内存似乎还可以。

谢谢

# jquery - servlet 3.0 jquery 彗星

> ID：13469809
> 
> 赞同：0
> 
> 时间：2012-11-20T09:10:13.503
> 
> 标签：jquery, comet, servlet-3.0

嗨，我正在尝试从 [http://code.google.com/p/jquery-stream/wiki/ChatExample][1] 实现 java servlet 3.0 聊天示例。它在本地主机上运行正常，但是当上传到远程服务器时，流不会打开/启动或发送消息。我错过了什么？请帮忙。

```
<!--client side-->
<html>
    <head>
        <title>Chat - Servlet 3</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <script type="text/javascript" src="jquery-1.8.2.js"></script>
        <script type="text/javascript" src="jquery.stream-1.2.js"></script>
        <script type="text/javascript">
            $.stream.setup({enableXDR: true});

            var chat = {
                lastUsername: "Donghwan Kim",
                username: $.trim(window.prompt("Username?")) || "Anonymous" + $(window).width()
            };

            $(function() {
                $.stream("chat", {
                    type: "http",
                    dataType: "json",
                    context: $("#content")[0],
                    open: function(event, stream) {
                        stream.send({username: chat.username, message: "Hello"});
                    },
                    message: function(event) {
                        if (chat.lastUsername !== event.data.username) {
                            $("<p />").addClass("user").text(chat.lastUsername = event.data.username).appendTo(this);
                        }

                        $("<p />").addClass("message").text(event.data.message).appendTo(this);
                        this.scrollTop = this.scrollHeight;
                    }
                });

                $("#editor .user").text(chat.username);
                $("#editor .message").keyup(function(event) {
                    if (event.which === 13 && $.trim(this.value)) {
                        $.stream().send({username: chat.username, message: this.value});
                        this.value = "";
                    }
                });
            });
        </script>
    </head>
    <body>
        <div id="content" class="content">
            <p class="user"></p>
            <p class="message"></p>
        </div>
        <div id="editor" class="editor">
            <p class="user"></p>
            <form action="#" onsubmit="return false;">
                <input class="message" type="text" />
            </form>
        </div>
    </body>
</html>

//server side
package com.chatty;

import com.google.gson.Gson;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.UUID;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.LinkedBlockingQueue;
import javax.servlet.AsyncContext;
import javax.servlet.AsyncEvent;
import javax.servlet.AsyncListener;
import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(urlPatterns = "/chat", asyncSupported = true)
public class ChatServlet extends HttpServlet {

    private static final long serialVersionUID = -277914015930424042L;

    private Map<String, AsyncContext> asyncContexts = new ConcurrentHashMap<String, AsyncContext>();
    private BlockingQueue<String> messages = new LinkedBlockingQueue<String>();
    private Thread notifier = new Thread(new Runnable() {
        public void run() {
            while (true) {
                try {
                    // Waits until a message arrives
                    String message = messages.take();

                    // Sends the message to all the AsyncContext's response
                    for (AsyncContext asyncContext : asyncContexts.values()) {
                        try {
                            sendMessage(asyncContext.getResponse().getWriter(), message);
                        } catch (Exception e) {
                            asyncContexts.values().remove(asyncContext);
                        }
                    }
                } catch (InterruptedException e) {
                    break;
                }
            }
        }
    });

    private void sendMessage(PrintWriter writer, String message) throws IOException {
        // default message format is message-size ; message-data ;
        writer.print(message.length());
        writer.print(";");
        writer.print(message);
        writer.print(";");
        writer.flush();
    }

    @Override
    public void init(ServletConfig config) throws ServletException {
        super.init(config);
        notifier.start();
    }

    // GET method is used to establish a stream connection
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        // Content-Type header
        response.setContentType("text/plain");
        response.setCharacterEncoding("utf-8");

        // Access-Control-Allow-Origin header
        response.setHeader("Access-Control-Allow-Origin", "*");

        PrintWriter writer = response.getWriter();

        // Id
        final String id = UUID.randomUUID().toString();
        writer.print(id);
        writer.print(';');

        // Padding
        for (int i = 0; i < 1024; i++) {
            writer.print(' ');
        }
        writer.print(';');
        writer.flush();

        final AsyncContext ac = request.startAsync();
        ac.addListener(new AsyncListener() {
            public void onComplete(AsyncEvent event) throws IOException {
                asyncContexts.remove(id);
            }

            public void onTimeout(AsyncEvent event) throws IOException {
                asyncContexts.remove(id);
            }

            public void onError(AsyncEvent event) throws IOException {
                asyncContexts.remove(id);
            }

            public void onStartAsync(AsyncEvent event) throws IOException {

            }
        });
        asyncContexts.put(id, ac);
    }

    // POST method is used to communicate with the server
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        request.setCharacterEncoding("utf-8");

        AsyncContext ac = asyncContexts.get(request.getParameter("metadata.id"));
        if (ac == null) {
            return;
        }

        // close-request
        if ("close".equals(request.getParameter("metadata.type"))) {
            ac.complete();
            return;
        }

        // send-request
        Map<String, String> data = new LinkedHashMap<String, String>();
        data.put("username", request.getParameter("username"));
        data.put("message", request.getParameter("message"));

        try {
            messages.put(new Gson().toJson(data));
        } catch (InterruptedException e) {
            throw new IOException(e);
        }
    }

    @Override
    public void destroy() {
        messages.clear();
        asyncContexts.clear();
        notifier.interrupt();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:59:26.323

似乎指定了错误的 URL（例如“聊天”）。

Fe 如果在本地环境中它可以很好地解析*http://localhost:8080/chat*，但它似乎与远程服务器有问题。如果您的索引页面位于“聊天”servlet 之外的其他位置，则可能是这样。

*http://example.com/pages/index.html*调用*http://example.com/pages/chat*

同时servlet的实际位置在 *http://example.com/chat*

您可以通过调查 Firebug 的 NET 选项卡或 Chrome 开发人员工具栏来检查它：检查正在调用哪个 URL。

# iphone - 如何通过 XML 文件动态更改 iphone 应用程序中的图像

> ID：13469810
> 
> 赞同：1
> 
> 时间：2012-11-20T09:10:12.667
> 
> 标签：iphone, ios

我的应用程序包含一些需要通过 XML 文件从 Web 服务器动态加载的图像。每次在 Web 服务器的管理控制台中完成更改时，它也应该通过 XML 文件反映在 iPhone 应用程序中。我编写了 XML 文件，但不知道如何在 iPhone 代码中使用。我参考了以下链接，

[如何通过 xml-in-iphone-locally-file 检索数据](https://stackoverflow.com/questions/6596451/how-to-retrieve-data-through-xml-in-iphone-locally-file)

[动态从 xml-for-iphone-app 拉取图像](https://stackoverflow.com/questions/2465975/dynamically-pulling-images-from-xml-for-iphone-app)

[如何更改-tabbaritem-images-dynamically-in-iphone-app](https://stackoverflow.com/questions/3193929/how-to-change-the-tabbaritem-images-dynamically-in-iphone-app)

[检索图像到 iphone-app-through-xml](https://stackoverflow.com/questions/1397649/retrieving-images-to-iphone-app-through-xml)

但是所有这些链接对我来说都不清楚。请建议我一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:38:22.173

所以我假设你的网络服务器可以提供一个 XML，其中包含一些编码格式的图像，比如 base64。然后你需要：

1.  加载文件。为此，您应该使用`NSURLConnection`，例如，如[how-to-make-http-request-from-iphone-and-parse-json-result 中所述](http://agilewarrior.wordpress.com/2012/02/01/how-to-make-http-request-from-iphone-and-parse-json-result/)
2.  解析 XML。您需要解析 XML，而不是解析 JSON，因此首先，您需要一个 XML 解析器。[这是 XML 解析器的比较](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)。然后您应该访问代表您的图像的 XML 中的元素。此步骤取决于您选择的解析器。
3.  解码图像。您的元素可能是 an`NSString`并且您希望将其二进制表示为`NSData`. `NSData`为此有一些便利功能。例如对于base64，有`dataFromBase64String:`构造函数。
4.  创建图像。也就是说， `UIImage`使用`imageWithData:`构造函数。
5.  显示图像。你需要一个`UIImageView`并分配给它你的`UIImage`. 设置视图的框架并将其添加到您喜欢的子视图中。

XML 也可能提供获取图像数据的 URL。然后你必须做一个新的请求。现在应该清楚了，该怎么做。

祝你好运。

# php - 本地服务器上的php magento安装错误

> ID：13469811
> 
> 赞同：1
> 
> 时间：2012-11-20T09:10:20.577
> 
> 标签：php, magento-1.7

在本地服务器上安装 Magento 时，我收到错误“此网页有重定向循环”..

我尝试了在某些论坛上讨论的选项，但无法解决问题...

请帮我找到解决方案

# ruby-on-rails - 在 Rails 中使用 unicorn、nginx 和 capistrano 设置虚拟主机

> ID：13469812
> 
> 赞同：4
> 
> 时间：2012-11-20T09:10:27.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, ruby-on-rails-3.2, capistrano

我已经能够使用 nginx、unicorn 和 capistrano 将我的 rias 应用程序部署到 vps 系统中，没有任何错误。现在，我想在同一个 vps 服务器中使用相同的 nginx 配置（下面是两个脚本）部署另一个 rails 应用程序，并在运行 cap deploy:setup 和 cap deploy:cold 后正确设置并将 rails 应用程序发送到服务器。我得到的问题是这个。当我输入时，`service nginx restart`我收到以下错误

```
nginx: [emerg] duplicate upstream "unicorn" in /etc/nginx/sites-enabled/cf:1
nginx: configuration file /etc/nginx/nginx.conf test failed 
```

我当前正在运行的第一个应用程序的 nginx 脚本是

```
upstream unicorn {
  server unix:/tmp/unicorn.cf.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  server_name cfmagazineonline.com;
  root /home/deployer/apps/cf/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

我的第二个 rails 应用程序的 nginx 配置无法运行，而是为第一个 rails 应用程序引发错误并使其崩溃是

```
upstream unicorn {
  server unix:/tmp/unicorn.gutrees.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  server_name gutrees.com;
  root /home/deployer/apps/gutrees/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

任何想法如何解决此问题并正确设置虚拟主机。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T10:13:11.803

以不同的方式命名您的第二个应用程序上游（上游名称需要是唯一的）。因此，不要`unicorn`使用 ie 名称`@my_shiny_app_server`。然后使用这个名称 proxy_pass 指令`http://my_shiny_app_server`。将`my_shiny`字符串替换为您的应用程序名称，`gutrees`例如`cf`.

# ssas - SSAS - MSBI - 解决方案 - 建议

> ID：13469813
> 
> 赞同：2
> 
> 时间：2012-11-20T09:10:31.630
> 
> 标签：ssas, startup, solution

根据我的理解，我们可以构建从事务系统采购的 SSAS 多维数据集是否正确？我的意思不是现场，而是现场的副本。

我正在尝试查看是否有任何范围来解决少数报告需求，而无需构建传统的数据仓库，然后在数据仓库之上构建多维数据集，而不是构建多维数据集来执行从备份副本中获取的财务每月汇总报告需求的交易系统。

或者，如果您有更好的方法进行，请提出建议。

问候， KK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:29:49.130

You can create a set of views on top of you transactional system tables and then build your SSAS cubes ontop of those views. This would be less effort than creating a fully fledged datawarehouse.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:24:17.783

我是一名数据仓库开发人员（因此相信多维数据集），但并非每个报告解决方案都保证构建多维数据集的成本。如果您的中短期报告要求是固定的，并且您没有用户要求每周对数据进行不同的切片，那么一系列固定报告可能就足够了。

您可以直接针对复制的事务数据或针对定期创建的一系列汇总表创建一系列 SQL Server Reporting Services 报告（或提取到 Excel）。如果您决定使用一系列预先格式化的报告表格，请尝试创建涵盖多个类似报告的表格（而不是 1 个月度报告表格 = 1 个报告），以便于持续维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T07:19:10.497

您可能需要首先考虑许多其他重要方面。比如事务系统的繁忙程度、数据的大小、并发性和可用性问题等。

拥有实时数据的副本，然后在其上构建报告绝对没问题。请记住，您在报告中看到的数据不会是最新的，并且会存在延迟因素，具体取决于数据提取的频率。

# facebook - Facebook 页面选项卡 FB.Canvas 不工作

> ID：13469818
> 
> 赞同：0
> 
> 时间：2012-11-20T09:10:40.877
> 
> 标签：facebook, scroll

我正在使用静态 html 来使用 iframe 嵌入我的网站。

```
<iframe frameborder="0" width="810px" height="2200px" src="http://domain" style="overflow-x:hidden;overflow-y:scroll;" ></iframe> 
```

类似的东西。在我的代码中，我正在使用

> FB.init({appId: "00000000", status: true, cookie: true}); FB.Canvas.scrollTo(0,300)

但是，它不起作用。似乎没有任何效果。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:24:34.560

您需要异步调用 FB.init，如下所示：

```
window.fbAsyncInit = function() {
  FB.init({
     appId: param('facebook_app_id'),
     frictionlessRequests: true,
     oauth: true,
     channelUrl: site_url('/channel.html')
   })
} 
```

此外，为了改善画布中的滚动，请使用以下内容：

```
 FB.Canvas.setAutoGrow(10); 
```

# android - Android：用自定义布局替换软键盘（日期选择的轮子）

> ID：13469819
> 
> 赞同：1
> 
> 时间：2012-11-20T09:10:42.733
> 
> 标签：android, android-widget

我有一个`EditText`用户需要输入日期的地方。对于日期选择，我有一个自定义轮视图（如 iOS）。现在点击`date EditText`，我想从底部打开一个像抽屉一样的软键盘并将那个轮子视图放在里面。

那么我可以用我的滚轮视图替换软键盘吗？我的意思是，`container`持有键盘的那个现在应该持有我的自定义`wheel view`。

有没有办法做到这一点？还是出于我的目的还有其他更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:44:32.453

1）如果你必须使用`EditText`，你可以通过正确设置它的输入类型来防止键盘出现。其他答案已经提到了。

2）但是为什么`EditText`在这里使用，特别是因为你没有在这里使用键盘输入任何值。您可以使用 a `TextView`，并且您可以向上为 a （包含日期选择器）`onClickListener`设置动画。`LinearLayout`

```
yourTextView.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v){
        //Animate a LinearLayout containing a DatePicker
        animateDatePickerView();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:45:46.460

取决于您的要求以及您希望它的可重用程度。

对于简单的方法，您可以创建一个视图来托管该轮选择器，将其对齐根布局的底部，并使用一些动画隐藏/显示它。

首先，您需要覆盖编辑文本的 onTouchListener，使用该事件并在那里做您想做的事情。

```
editText.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch (View v, MotionEvent event) {
        //Show the wheely wheel.
        return true; //Consume the event.
    }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:39:44.980

我的个人想法（未测试）

*   防止在edittext获得焦点时显示键盘。例如，`setInputType(InputType.TYPE_NULL);`
*   使用包含您的轮子的自定义活动并将其显示为对话框（将主题设置为对话框）。

# ruby - 红宝石继承

> ID：13469821
> 
> 赞同：1
> 
> 时间：2012-11-20T09:10:51.017
> 
> 标签：ruby, inheritance

如何在 ruby​​ 中为以下实现继承？

```
class Land
  attr_accessor :name, :area
  def initialize(name, area)
    @name = name
    @area = area
  end
end

class Forest < Land
  attr_accessor :rain_level
  attr_reader :name

  def name=(_name)
    begin
      raise "could not set name"
    rescue  Exception => e
            puts e.message  
        end
  end

  def initialize(land, rain_level)
    @name = land.name
    @rain_level = rain_level
  end
end

l = Land.new("land", 2300)
f = Forest.new(l, 400)
puts f.name # => "land" 
```

假设当我更改土地 l 的名称时，它也应该更改为子类

```
l.name ="new land"
puts f.name # => "land" 
```

预期的是 puts f.name # => "new land"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:50:21.003

在我看来，这实际上不是 OO 意义上的继承。如果您进行更改`Forest`以使其包含对的引用，`Land`那么您将获得您想要的行为。

```
class Forest
  attr_accessor :rain_level

  def name
    @land.name
  end

  def initialize(land, rain_level)
    @land = land
    @rain_level = rain_level
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:37:13.047

这是您想要构建的一种有趣的东西。

总结一下，您希望两个对象共享一个值，但只允许一个对象编辑该值，另一个对象只允许读取它。

我认为实现这一点的最简单方法是在您的情况下在 Forest 中实现一个新的 getter 返回`land.name`。通过写入`l.name = 'meow'`也将`f.name`返回`moew`，因为它包含对 的引用`l`。

希望这可以帮助。

# ruby-on-rails - 在 ActiveRecord 中覆盖保存方法是否安全？

> ID：13469823
> 
> 赞同：2
> 
> 时间：2012-11-20T09:10:53.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, active-record-query

在扩展的特定类中`ActiveRecord::Base`，每当创建这个对象时，我都需要更新一个不同的 ActiveRecord 对象。覆盖该`save`方法并在保存中执行以下操作是否安全？

```
def save
  super
  other = self.other
  other.name = self.name
  other.save!
end 
```

我担心潜在的交易相关问题。我假设这将是 1 笔交易，如果任何部分失败，一切都会回滚？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T09:15:05.783

是否有特殊原因为什么您不使用为此目的提供的挂钩？

你有`after_create`, `after_save`, `after_update`, `before_create`, `before_save`, `before_update`- 和其他一堆。其中一个不合适吗？

实际上，鉴于您所说的，这听起来`before_save`就是您想要的，因为您可以捕获在保存第二个模型时发生的任何错误并防止第一个模型被保存（通过从`before_save`调用中返回 false ）。

# java - 为什么字符串没有写入文件？

> ID：13469826
> 
> 赞同：0
> 
> 时间：2012-11-20T09:11:07.790
> 
> 标签：java, file, fileoutputstream

将快速调用函数“writeToFile()”将字符串写入文本文件。但我没有在文件中看到任何文本。

代码：

```
 public class MyClass {
        private File data_file = new File("data_from_java.txt");
        public void writeToFile(String str){
        try {
            FileOutputStream fos= new FileOutputStream(this.data_file, true);
            System.out.print(str);  // there is text shown in terminal 
            fos.write(str.getBytes());
            fos.flush();
            fos.close();   // why file donesn't have text 
        }catch(Exception ex) {
            System.out.println(ex.getMessage());
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:20:39.333

写入原始字节可能会导致字符编码出现问题。正如乔恩斯基特所说，使用作家......

```
try {
    FileWriter writer = new FileWriter(data_file, true);
    writer.write(str);
} catch(IOException e) {
    // oh no!
} finally {
    writer.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:23:57.980

尝试使用这段代码：

```
final BufferedWriter fos = new BufferedWriter(new FileWriter(data_file, true));
System.out.print(str);
fos.write(str);
fos.flush();
fos.close(); 
```

它对我有用，尽管我确实在与我预期不同的地方找到了我的文本文件。也许稍微搜索一下就可以了？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:27:22.570

在你的代码`fos.write(str.getBytes());`中，这一行似乎导致了问题...... write() 方法将一个字节作为参数.. 你给出字节数组.. 所以将该行更改为

```
buf = str.getBytes();
for (int i=0; i < buf.length; i += 2) { 
f0.write(buf[i]);
} 
```

# actionscript-3 - AS3：Tweener 类 (Tweenlite) 中的舍入值

> ID：13469831
> 
> 赞同：1
> 
> 时间：2012-11-20T09:11:22.190
> 
> 标签：actionscript-3, gsap

我有一个小问题，我正在旋转一个物体。我想要四舍五入的值来旋转对象以提高效率。

```
TweenLite.to(this, 1, { rotation:rotation+100 });
//Output rotation values
//83.02559999999998, 85.55999999999999, 88.02839999999999, 90.1404, 92.16, 93.8496 
```

所以我尝试了这个

```
TweenLite.to(this, 1, { rotation:rotation+100, onUpdate:function()
{
    rotation = Math.round(rotation);
}
}); 
```

但无济于事。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:26:22.627

您可以尝试使用代理对象，例如

```
var obj:Object = {};
obj.rotation = this.rotation;
TweenLite.to(obj, 1, { rotation:rotation+100, onUpdate:function()
{
    if (this.rotation != Math.round(obj.rotation))
        this.rotation = Math.round(obj.rotation);
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:16:02.663

怎么样

```
TweenLite.to(this, 1, { rotation:Math.round(rotation+100) }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:48:26.813

如果渲染有问题；TweenMax 有一个内置功能，可以使用 TransformMatrixPlugin 更快地渲染旋转，请参阅[http://greensock.com/tweening-tips](http://greensock.com/tweening-tips)

# java - 在队列中录制语音 并将其发送到服务器

> ID：13469835
> 
> 赞同：3
> 
> 时间：2012-11-20T09:11:32.657
> 
> 标签：java, android, linked-list, bytearray, bytebuffer

我正在开发语音应用程序。

我需要某种类型的缓冲区队列，以便我在线程中连续记录，将充满字节的缓冲区放入队列并传输到服务器，然后从队列中取出下一个缓冲区。

下面是录制代码：

```
 Queue<byte[]> qArray = new LinkedList<byte[]>();
     recordingThread = new Thread(new Runnable() {

        @Override
        public void run() {

            bData = new byte[BufferElements];

            while (isRecording) {
                recorder.read(bData, 0, BufferElements);
                qArray.add(bData);
                if (AudioRecord.ERROR_INVALID_OPERATION != 0) {
                    SendAudio();

                }

            }
        }
    }, "AudioRecorder Thread");
    recordingThread.start(); 
```

**但是在将其发送到服务器时仍然缺少一些 byte[] 数据**

这是向服务器发送语音的代码：

```
 try {
            HttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost(ServerUrl.url_audio);

            // Json Format
            JSONObject holder = new JSONObject();
            JSONArray jArray = new JSONArray();
            try {

                byte[] tmparr = qArray.poll();
                for (int i = 0; i < tmparr.length; i++) {
                    jArray.put(i, tmparr[i]);
                }

                holder.put("Voice", jArray); 
```

我不想错过任何正在记录的数据。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:30:18.970

当您将 byte[] 放入队列时，您需要创建一个新缓冲区。否则下一次录制将覆盖相同的缓冲区。只需将初始化移动`bData`到循环中：

```
Queue<byte[]> qArray = new LinkedList<byte[]>();
recordingThread = new Thread(new Runnable() {

    @Override
    public void run() {
        while (isRecording) {
            bData = new byte[BufferElements];
            recorder.read(bData, 0, BufferElements);
            qArray.add(bData);
            if (AudioRecord.ERROR_INVALID_OPERATION != 0) {
                SendAudio();
            }
        }
    }
}, "AudioRecorder Thread");
recordingThread.start(); 
```

您还应该添加逻辑来限制队列的大小。如果队列溢出，您仍然会丢失数据，但至少您不会因内存不足错误而崩溃。

**编辑**这是一个修改过的录音循环版本，可以进行正确的错误检查。它使用 a`Queue<ByteBuffer>`而不是 a `Queue<byte[]>`：

```
public void run() {
    bData = ByteBuffer.allocate(BufferElements);
    while (isRecording && !isInterrupted()) {
        int result = recorder.read(bData, 0, BufferElements);
        if (result > 0) {
            qArray.add(bData);
            SendAudio();
            bData = ByteBuffer.allocate(BufferElements);
        } else if (result == AudioRecord.ERROR_INVALID_OPERATION) {
            Log.e("Recording", "Invalid operation error");
            break;
        } else if (result == AudioRecord.ERROR_BAD_VALUE) {
            Log.e("Recording", "Bad value error");
            break;
        } else if (result == AudioRecord.ERROR) {
            Log.e("Recording", "Unknown error");
            break;
        }
        try {
            Thread.sleep(50);
        } catch (InterruptedException e) {
            break;
        }
    }
} 
```

当然，您需要在某个地方打电话`recorder.startRecording()`，否则您将无法获得任何数据。

# magento - Magento 将鼠标悬停在“我的购物车”上，当购物车中有 1 件或多件商品时，应显示迷你购物车

> ID：13469840
> 
> 赞同：0
> 
> 时间：2012-11-20T09:11:44.897
> 
> 标签：magento

我必须在 Magento 中实现以下目标。任何人都可以在这方面帮助我吗？

1.  将鼠标悬停在“我的购物车”上时，当购物车中有 1 件或多件商品时，应该显示迷你购物车 -- 将鼠标移开会导致迷你购物车隐藏

2.  将商品添加到购物车时，迷你购物车应显示 10 秒，然后隐藏

3.  点击“我的购物车”会将用户带到购物车页面。

如果我能在这方面得到一些帮助，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:15:48.750

看看负责购物车侧边栏的块。这几乎包含了渲染购物车项目所需的一切。

块类位于`/Mage/Checkout/Block/Cart/Sidebar.php`

您可以在“checkout/cart_sidebar”类型的标题中创建一个新块，并使用基于购物车侧边栏模板的自定义模板。您还需要更新标题模板以调用迷你购物车的新子块。

```
<reference name="header">
    <block type="checkout/cart_sidebar" 
           name="mini_cart" as="mini_cart"
           template="my_theme/checkout/cart/mini.cart.phtml"/>
</reference> 
```

然后`/page/html/header.phtml`确保你打电话`echo $this->getChildHtml('mini_cart');`

这应该让你开始。要在添加产品时自动触发弹出窗口，您需要在会话中存储一个标志，然后在重新加载页面并触发您的 JavaScript 等时检查它。我建议使用事件观察器来执行此操作，例如`checkout_cart_add_product_complete`

# mysql - Mysql 查询仅选择 GROUP_CONCAT 中具有唯一结果的行

> ID：13469842
> 
> 赞同：5
> 
> 时间：2012-11-20T09:11:46.383
> 
> 标签：mysql, sql, group-concat

有没有办法只选择与先前选择的行不同的行？在我的一张表中，我存储广告数据，即每个广告一行。我还将每天、每周、每月的租金价格存储在另一个表中，该表包含每个广告多行。我想在与数据选择相同的查询中选择表 2 中价格之一发生变化的所有行（在表 2 中的示例行 1 和 3 中）。我知道在这种情况下我必须使用 GROUP_CONCAT 来获取一行而不是 2 行结果，但是如何从表 2 中获取 2 个结果行和总共 1 个结果行？

查询的结果必须类似于：tre,234,” 12345678911,12,45, 32555678911,12,67”</p>

```
Table 1 (advertisements)
ID_adv      data1       data2   
1       tre     234
2       ghj     34
3       jk      098 
4       jfjk        12

Table 2 (dates)
ID_dates    ID_adv      timestamp_day   price1      price2
1       1       12345678911     12      45
2       1       22345677771     12      45
3       1       32555678911     12      67
4       2       42345671231     34      34 
```

我试过

```
SELECT 
t1.*, 
GROUP_CONCAT(t2.date) AS dates 
FROM Table1 t1 
LEFT JOIN Table2 t2 ON t2.ID_adv = t1.ID_adv 
WHERE t1.ID_adv = 3 GROUP BY t1.ID_adv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:04:34.737

你可以试试这个：

```
SELECT T3.ID_adv
    , T3.data1
    , T3.data2
    , CAST(GROUP_CONCAT(CONCAT(T3.timestamp_day, ',', T3.price1, ',', T3.price2)) AS CHAR) AS DatePrice
    FROM (
        SELECT T1.*
            , MIN(T2.timestamp_day) AS timestamp_day
            , T2.price1
            , T2.price2
            FROM Table1 T1
            LEFT JOIN Table2 T2 ON T2.ID_adv = T1.ID_adv
            GROUP BY T1.ID_adv, T2.price1, T2.price2
    ) T3
    GROUP BY T3.ID_adv; 
```

[我已经在SQL Fiddle](http://sqlfiddle.com/#!2/ea3bf/1)上试过了。

# android - 在eclipse中设置标签背景

> ID：13469848
> 
> 赞同：1
> 
> 时间：2012-11-20T09:12:00.020
> 
> 标签：android, eclipse, tabs

我正在制作一个 android 应用程序，并且我的 xml 中有一个 tabhost 和两个选项卡。我打电话给他们，他们工作得很好。但我想摆脱标签上丑陋的灰色/橙色。我尝试使用图像设置背景。我使用了这段代码：

```
th.getTabWidget().setBackgroundResource(R.drawable.tab_normal); 
```

但它显示如下：

![错误的背景](../Images/d036b38b0093f075ac8ba9758eb0fc18.png)

我怎样才能得到它来代替灰色和橙色？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:43:52.820

完全自定义 tabwidget 的步骤：

1.  为 tabwidget 创建自定义布局：此布局类似于默认布局，由 one`Icon`和 one组成`TextView`。你可以选择任何你想要的布局。请注意，父布局具有状态背景`tabwidget_selector`。这个drawable是替换默认橙色焦点颜色的关键。您可以选择自己的焦点颜色。

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:background="@drawable/tabwidget_selector"
    android:gravity="center"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/tabIndicatorIcon"
        android:layout_width="28dp"
        android:layout_height="28dp"
        android:layout_marginTop="2dp" />

    <TextView
        android:id="@+id/tabIndicatorText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="2dp"
        android:textColor="@color/white" /> 
    ```

2.  编写返回视图的函数`tabwidget`。为您的 tabwidget 设置文本、可绘制图标

    ```
    private View getTabIndicatorView(Context context, String tag, int drawable) {
        View view = LayoutInflater.from(context).inflate(
                R.layout.tab_widget_custom, null);
        TextView tv = (TextView) view.findViewById(R.id.tabIndicatorText);
        tv.setText(tag);
        ImageView tabIndicatorIcon = (ImageView) view
                .findViewById(R.id.tabIndicatorIcon);
        tabIndicatorIcon.setBackgroundResource(drawable);
        return view;

    } 
    ```

3.  在您的活动中使用此功能：

> TabHost.TabSpec setIndicator(View view) 指定一个视图作为标签指示器。

```
 Intent intent;
        TabHost.TabSpec spec;

        spec = tabHost.newTabSpec("Inbox").setIndicator(
                getTabIndicatorView(MainTabActivity.this, "Hộp thư",
                        R.drawable.tin_nhan_tab_selector));
        intent = new Intent(this, xxxx.InboxActivity.class);

        spec.setContent(intent);
        tabHost.addTab(spec); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:23:48.460

您可以拥有 tabwidget 的背景：

```
 <TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<RelativeLayout
        android:layout_height="fill_parent"
        android:layout_width="fill_parent">

        <TabWidget
        android:id="@android:id/tabs"
        android:layout_alignParentBottom="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/tabbackground"
        android:layout_margin="7dp"

        />

        <FrameLayout
            android:id="@android:id/tabcontent" 
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent" 
            android:layout_above="@android:id/tabs" 
            android:layout_alignParentLeft="true" 
            android:layout_alignParentTop="true" 
            android:layout_margin="5dp" 
            android:background="@drawable/list_shape">
         </FrameLayout>
</RelativeLayout> 
```

# c++ - 在可变参数模板中使用 lambda 调用 std::make_tuple - 这应该在 C++11 中工作吗？

> ID：13469851
> 
> 赞同：3
> 
> 时间：2012-11-20T09:12:02.547
> 
> 标签：c++, c++11, tuples, variadic-templates, lambda

在 C++11 中，lambda 函数是一个对象，应该可以用它调用 make_tuple ，对吗？

```
void foobar() {
    auto t = std::make_tuple([](){ std::make_shared<int>(); });
} 
```

这段代码对我有用。

现在如果我们添加一个可变参数模板会发生什么：

```
#include <tuple>
#include <memory>

template <class... T>
void foobar() {
    auto t = std::make_tuple([](){ std::make_shared<T>(); }...);
}

int main(int, char**)
{
    foobar<int, float, double>();
    return 0;
} 
```

这个无法在 GCC 4.7.2 中编译

```
main.cpp: In lambda function:
main.cpp:6:54: error: parameter packs not expanded with '...':
main.cpp:6:54: note:         'T'
main.cpp: In function 'void foobar()':
main.cpp:6:57: error: expansion pattern '#'lambda_expr' not supported by dump_expr#<expression error>' contains no argument packs
main.cpp: In instantiation of 'void foobar() [with T = {int, float, double}]':
main.cpp:11:29:   required from here 
```

我想知道，此代码是否符合标准？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T09:23:26.907

这是 gcc 中的一个已知错误：[http](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=41933) ://gcc.gnu.org/bugzilla/show_bug.cgi?id=41933 （初始示例是涵盖参数包捕获的不同模式，但其基础问题和合并错误是gcc根本没有实现lambdas和variadics的交集）。

就标准而言，它是完全可以接受的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T09:22:35.510

### 方法#1：

解决它的简单方法似乎是`std::function`：

```
#include <tuple>
#include <memory>

template <class T>
std::function<std::shared_ptr<T>()> make_shared_lambda() {
    return [](){ return std::make_shared<T>(); };
}

template <class... T>
void foobar() {
    auto factories = std::make_tuple(make_shared_lambda<T>()...); 
    auto tracer = std::get<2>(factories)();
}

// demonstration 
#include <cstdio>
struct Tracer { 
    Tracer() { puts("Tracer()");   }
   ~Tracer() { puts("~Tracer()");  } 
};

int main()
{
    foobar<int, float, Tracer>();
} 
```

印刷

```
Tracer()
~Tracer() 
```

### 方法#2：

`std::function`显然，在's 类型擦除中存在性能开销。[您可以轻松利用无状态 lambda 可转换为函数指针](https://stackoverflow.com/a/4730655/85371)的事实（标准 5.1.2/6）：

```
#include <tuple>
#include <memory>

template <class T> auto make_shared_f() -> std::shared_ptr<T>(*)() 
{
    return []() { return std::make_shared<T>(); };
}

template <class... T> std::tuple<std::shared_ptr<T>(*)()...> foobar() {
    return std::make_tuple(make_shared_f<T>()...);
}

// demonstration 
int main()
{
    auto factories = foobar<int, float, double>();
    auto double_ptr = std::get<2>(factories)();
} 
```

如果你的编译器支持*模板别名*，你可以让它不那么神秘：

```
template <typename T> using shared_factory = std::shared_ptr<T>(*)();

template <class T> shared_factory<T> make_shared_f() {
    return []() { return std::make_shared<T>(); };
} 
```

# c# - C#/WPF 中的 TreeView 数据绑定

> ID：13469853
> 
> 赞同：0
> 
> 时间：2012-11-20T09:12:08.737
> 
> 标签：c#, wpf, xaml, treeview

有人可以帮助我理解为 TreeView 组件和模型创建 xaml 代码的方法，如下所示：

```
class Task: ObservableObject
{
    private string _title;

    public string Title {
        get { return _title; }
        set { 
            if (value != _title) {
                _title = value;
                OnPropertyChanged("Title");
            } 
        }
    }

    public override string ToString() {
        return Title;
    }
}

class Tasks:ObservableCollection<Task>
{

}

class Group:ObservableObject
{
    private Tasks _tasksList;

    public Group() {
        _tasksList = new Tasks();
    }

    public Tasks TasksList {
        get{
            return _tasksList;
        }

        set {
            if (value != _tasksList) {
                _tasksList = value;
                OnPropertyChanged("TasksList");
            }
        }
    }
}

class Groups:ObservableCollection<Group>
{

} 
```

我想要的只是使用 TreeView 组件和数据查看

```
Group1
   Task 1
   Task 2
Group2
   Task 3
   Task 4 
```

使用 InputSource 和 DataContext ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:16:12.443

您必须使用[分层数据模板](http://blogs.msdn.com/b/mikehillberg/archive/2009/10/30/treeview-and-hierarchicaldatatemplate-step-by-step.aspx)。

# apache - 优化 Apache SOLR

> ID：13469855
> 
> 赞同：0
> 
> 时间：2012-11-20T09:12:11.757
> 
> 标签：apache, solr

我使用了 Apache SOLR 4.0 (http://lucene.apache.org/solr/4_0_0/tutorial.html) 教程中的示例，并在大约 800 万个文档上实现了相同的示例。该文档包含三个字段，即标题、ID 和特征。有 800 万个文档基本上是转换为 XML 文件的 html 文件，其中 title 包含 html 页面的标题， features 包含 html 文件正文部分中的文本。

现在，搜索很容易，但需要时间。如果我搜索某个术语，搜索速度很快，但如果查询类似于“美国和加拿大的汉堡”，那么查询需要很长时间 ~ 5 秒。

如何优化相同以使搜索更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:48:55.657

你读过关于性能的[Wiki吗？](http://wiki.apache.org/solr/SolrPerformanceFactors)也看看[这个](http://h3x.no/2011/05/10/guide-solr-performance-tuning)文件。

# android - 获取位置（纬度和经度）

> ID：13469856
> 
> 赞同：2
> 
> 时间：2012-11-20T09:12:13.433
> 
> 标签：android, location, latitude-longitude

我是安卓新手。我写了一个代码。我的目的是当我收到短信时，将我的位置发送到传入的短信号码。

我可以接收和发送短信，但我不能发送我的位置（如纬度和经度）。我怎样才能做到这一点。相信我，我不知道我是怎么做到的。我在 onlocationChange() 方法中写了一些代码。但它没有给我位置。

请给我一个建议。

谢谢你的帮助。

这是我的代码：

```
package com.example.smsmessaging; 

import android.annotation.SuppressLint;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.location.Address;
import android.location.Criteria;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.telephony.SmsMessage;
import android.telephony.TelephonyManager;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

@SuppressLint("UnlocalizedSms")
public class SmsReceiver extends BroadcastReceiver implements LocationListener
{
    @SuppressLint({ "NewApi", "NewApi", "NewApi" })  
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        Bundle bundle = intent.getExtras(); 
        SmsMessage[] mesaj = null;  
        String str = "";  
        String sender = ""; 
        if (bundle != null) 
        {           

            Object[] obj = (Object[]) bundle.get("pdus");
            mesaj = new SmsMessage[obj.length]; 

            for (int i=0; i<mesaj.length; i++){ 
                mesaj[i] = SmsMessage.createFromPdu((byte[])obj[i]);                 
                sender = mesaj[i].getOriginatingAddress();                    
                str += mesaj[i].getMessageBody().toString();
            }

            Toast.makeText(context,"SMS," + sender + " tarafından gönderildi\n\nSMS in içeriği : " + 
            str, Toast.LENGTH_LONG).show(); 

            TelephonyManager tMgr =(TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
            String mPhoneNumber = tMgr.getLine1Number();
            String mIMEINumber = tMgr.getDeviceId();
            Toast.makeText(context,"My Phone no : " + mPhoneNumber, Toast.LENGTH_LONG).show();
            Toast.makeText(context,"My IMEI no : " + mIMEINumber, Toast.LENGTH_LONG).show();

            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(sender.toString(), null, str, null, null); 

            Toast.makeText(context,"SMS sent ...", Toast.LENGTH_LONG).show();   

        }                         
    }

    public void onLocationChanged(Location location) {
        int lat = Integer.parseInt(location.getLatitude()+" ");
        int lon = Integer.parseInt(location.getLongitude()+" ");

        String efe = "Location  " + " Longitude : " + lon  + "\n Latitude : "  + lat;
        Context context = null;

        try {
              SmsManager sms = SmsManager.getDefault();
              sms.sendTextMessage("1555215554", null, efe, null, null);

              Toast.makeText(context,"location sent. Details : " + efe, Toast.LENGTH_LONG).show();                    
        } catch (Exception e) {
                    e.printStackTrace();
        }

    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:39:29.610

最后我找到了解决方案。我编辑的代码如下：

```
package com.example.donemprojesi;

import java.io.IOException;
import java.util.*;
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.view.Menu;
import android.widget.Toast;
import android.location.*;
import android.content.*;

public class AnaActivity extends Activity {
    Location currentLocation;
    public static double currentLatitude=0.0;
    public static double currentLongitude=0.0;  
    public static String currentAddress=" ";
    public static String str = "efe";
    public static final int NOTIFICATION_ID = 1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ana);
        finish();
        LocationManager locationManager = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);

            LocationListener locationListener = new LocationListener() {
                public void onLocationChanged(Location location) {
                    updateLocation(location);
                    SmsManager sms = SmsManager.getDefault();

                    if("efe".equals(str) && SmsReceiver.flag == true){
                        try{
                            sms.sendTextMessage(SmsReceiver.sender.toString(), null,"Koordinatlar : Enlem = " +currentLatitude + 
                                    ", Boylam = " +currentLongitude, null, null);

                            sms.sendTextMessage(SmsReceiver.sender.toString(), null,"Adres : " + currentAddress + 
                                    " Haritadaki Konum : " + "https://maps.google.com/maps?q=" + currentLatitude + 
                                    "," + currentLongitude, null, null);
                        }catch(Exception ex){
                            Toast.makeText(getApplicationContext(), "Mesaj gönderiminde bir hata ile karşılaşıldı...", Toast.LENGTH_SHORT).show();
                            sms.sendTextMessage(SmsReceiver.sender.toString(), null,"Konum gönderiminde bir hata ile karşılaşıldı...", null, null);
                        }
                        finally{
                            SmsReceiver.flag =false;
                            finish();
                        }
                    }
                }
                public void onStatusChanged(
                        String provider, int status, Bundle extras) {}
                public void onProviderEnabled(String provider) {/*Toast.makeText(getApplicationContext(), "GPS Enabled", Toast.LENGTH_SHORT).show();*/}
                public void onProviderDisabled(String provider) {/*Toast.makeText(getApplicationContext(), "GPS Disabled", Toast.LENGTH_SHORT).show();*/}
            };

            locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
            bildirim();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_ana, menu);
        return true;
    }

    public void bildirim(){

        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

        int icon = android.R.drawable.ic_menu_view;
        CharSequence ticketText = "GPSMS Started";
        long when = System.currentTimeMillis();

        Notification notification = new Notification(icon, ticketText, when);

        Context context = getApplicationContext();
        CharSequence contentTitle = "GPSMS";
        CharSequence contentText = "GPSMS Enabled";
        Intent notificationIntent = new Intent(this, AnaActivity.class);
        notificationIntent.addFlags(Notification.FLAG_ONGOING_EVENT);
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
        mNotificationManager.notify(NOTIFICATION_ID, notification);
        mNotificationManager.notify(BIND_AUTO_CREATE, notification);    
    }

    public String getAddress(){
        try{
            Geocoder gcd = new Geocoder(this, Locale.getDefault());
            List<Address> addresses = gcd.getFromLocation(currentLatitude, currentLongitude,100);
            if (addresses.size() > 0) {
                StringBuilder result = new StringBuilder();

                    Address address =  (Address) addresses.get(0);
                    int maxIndex = address.getMaxAddressLineIndex();
                    for (int x = 0; x <= maxIndex; x++ ){
                        if(address.getAddressLine(x) != null){
                            result.append(address.getAddressLine(x)).append("\n");
                        }
                    }               
                    if(address.getLocality() !=null){
                        result.append(address.getLocality()).append("\n");
                    }
                    if(address.getPostalCode() !=null){
                        result.append(address.getPostalCode()).append("\n");
                    }

                    if(address.getCountryName() !=null){
                        result.append(address.getCountryName()).append("\n");
                    }
                return result.toString();
            }
        }
        catch(IOException ex){
            return ex.getMessage().toString();
        }
        return "Location not found";
    }

    void updateLocation(Location location){
        currentLocation = location;
        currentLatitude = currentLocation.getLatitude();
        currentLongitude = currentLocation.getLongitude();
        currentAddress = getAddress();
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:14:55.193

```
String myLocation = "My current location is: " + "Latitude = "
                + loc.getLatitude() + "Longitude = " + loc.getLongitude(); 
```

这段代码对我有用。

# python - Eclipse 上的 python 解释器出现问题

> ID：13469859
> 
> 赞同：0
> 
> 时间：2012-11-20T09:12:33.767
> 
> 标签：python, eclipse, pydev

我正在使用 win7-64 位。

我正在尝试让 python 插件在 eclipse 上工作。

我安装了 PyDev 2.7.1 插件，并下载了 Python 2.7.1 [http://www.python.org/download/releases/2.7.1/](http://www.python.org/download/releases/2.7.1/)

在 Eclipse 中，我转到 window->preferences->PyDev->Interpreter-Python，并将路径添加到`C:\Python27\python.exe`

然后我得到一个错误

有关详细信息，请参阅错误日志。

```
com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 3-byte UTF-8 sequence. 
```

有谁知道这意味着什么以及如何解决它？

谢谢

# jquery - 在fancybox里面的cloudzoom

> ID：13469860
> 
> 赞同：0
> 
> 时间：2012-11-20T09:12:41.437
> 
> 标签：jquery, fancybox

嗨，我正在尝试使 cloudzoom (innerzoom) 与 fancybox 一起工作。我跟着这个[链接](http://blog.codestars.eu/2010/cloud-zoom-in-der-fancybox/)

但是当我将光标移到缩放图像上时，我在控制台中不断收到此错误：

```
TypeError: opts.itemArray[opts.itemCurrent] is undefined 
```

这是我的脚本：

```
<script type="text/javascript">
    $(document).ready(function() {

        $(".fancybox").fancybox({
'onComplete'    :   function(arg) {
    // Here does the magic starts
    $('#fancybox-img').wrap(
        $('<a>')
        .attr('href', $(arg[0]).attr('href'))
        .addClass('cloud-zoom')
        .attr('rel', "position: 'inside'")
    );
    // That's it
    $('.cloud-zoom').CloudZoom();
}
 });
    });
</script> 
```

锚标签是这样的：

```
 <a href="images/usr/scarvezoom1.jpg" class="fancybox">
                    <img src="images/usr/scalf1.png" alt="" />

                    </a> 
```

我在做什么错？

# jsf - 如何从 Servlet 访问 @ViewScoped 托管 bean？

> ID：13469862
> 
> 赞同：9
> 
> 时间：2012-11-20T09:12:51.357
> 
> 标签：jsf, servlets, view-scope

我想访问 Servlet 中的视图范围托管 bean。

我搜索了类似的问题并得到了这些问题：

[如何从](https://stackoverflow.com/questions/9172737/how-to-get-beans-from-view-scope)使用的视图范围获取bean `FacesContext.getCurrentInstance()`，在Servlet中不适用，因为它应该给出空结果

[JSF - 按名称获取托管 bean，](https://stackoverflow.com/questions/2633112/jsf-get-managed-bean-by-name)它处理所有其他范围但不处理视图范围

我会认为这是不可能的，是吗？

有一个简单的解决方案可以将该 bean 范围更改为会话范围，但这是最后一次机会，因为我担心内存消耗。

我的最终需求如下：managebean 包含一些显示在 dataTable 中的数据。同一页面应包含这些数据的图表表示形式的图像（强制性）。图像可以由 Servlet 生成，但它需要访问数据或从数据库重新加载它们。

我也尝试过`<p:graphicImage>`PrimeFaces 2.X，但它与 viewscope bean 不兼容。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T12:05:14.567

这是不可能的，不。视图范围与特定的 JSF 视图相关联，这在普通的 HTTP servlet 请求中是无法实现的。请注意，您也无法在普通 HTTP servlet 请求期间访问具体的请求范围 bean，它们总是会返回`null`.

会话范围是你能得到的最好的。在 servlet 中完成该属性后，您可以从会话范围中删除该属性。

```
session.removeAttribute("somename"); 
```

# .net - 原子性：数据库事务和 Windows Azure

> ID：13469870
> 
> 赞同：3
> 
> 时间：2012-11-20T09:13:17.900
> 
> 标签：.net, azure, distributed-transactions, c#-5.0

# 背景

有一个消息队列域。该域可能与某些消息队列技术一起使用。在这种特殊情况下，它绑定到*Windows Azure Service Bus*。

某些项目具有注册*Windows Azure 服务总线*主题（基本上是消息队列）的操作。

注册一个新的消息队列意味着：

1.  *启动域事务（即数据库事务）。*
2.  *添加一个带有一些相关信息的消息队列域对象（例如哪个用户注册它或属于哪个应用程序属于整个消息队列）。*
3.  *使用控制反转来处理消息队列服务器中的实际队列注册（在这种情况下，它将针对 Windows Azure 服务总线发生）。*
4.  如果没有任何问题，域事务就会被提交，并且相关的域对象会被持久化或更新。

如果**域事务成功结束并且*Windows Azure 服务总线*主题注册工作正常**，它应该可以正常工作。

# 问题

但是，如果**域事务成功结束但*Windows Azure 服务总线*无法注册主题 - 即消息队列 - 会发生什么？**

**是的，您有一个损坏的域**。

如果在域事务开始之前进行*Windows Azure 服务总线主题注册，会发生什么情况？*好吧，如果一切顺利，没问题。但是现在问题已经倒转过来了：**如果*Windows Azure 服务总线*主题被正确注册但后来域事务失败了怎么办？**

是的，第二种情况比第一种情况要好，因为该操作注册了一个*无用的消息队列*，但域不会知道它。现在的主要问题是不确定数量的事务可能会失败，并且未知数量的消息队列将毫无用处。

试想一下，如果这是一个严肃的大型业务服务：*大量无用的消息队列和一个系统管理员（一个人）每月删除无用的消息队列*。

# 那么——现在的问题是——？

由于我发现使用无用的消息队列比使用损坏的域更好，因此我选择继续使用这种方式，但是... **Windows Azure 具有任何类型的分布式事务机制以包含任何远程对象在原子事务中创建包括其他特定于域的操作？**,**如果不是 - 遗憾的是我相信这是实际情况 - 你将如何解决这种情况？**

### 笔记：

*我正在寻找这样的东西，因为我真的不喜欢有一个根本无法处理其用例的域。我宁愿避免这种情况，让域正常工作并控制一切*。

### 一些有趣的链接...

*我发现了一些关于这个主题的有趣链接：*

[http://blogs.msdn.com/b/clemensv/archive/2012/07/30/transactions-in-windows-azure-with-service-bus-an-email-discussion.aspx](http://blogs.msdn.com/b/clemensv/archive/2012/07/30/transactions-in-windows-azure-with-service-bus-an-email-discussion.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T10:21:32.727

你可以通过使用**states**来解决这个问题。想象一下以下工作流程：

1.  注册域并将其状态设置为**待处理**
2.  创建服务总线主题
3.  将域的状态设置为**活动**

然后你可以有一个检查**待处理**域的小过程：

*   如果域处于待处理状态但主题存在，则将状态设置为**活动**（在这种情况下，步骤 3 可能失败）。
*   如果域处于待处理状态但主题不存在，请尝试重新创建主题或向可以手动检查正在发生的事情的人发送警报

有了重试策略（如 TOPAZ），99% 的请求都不会出现任何问题。但每当出现问题时，它会自动修复，如果无法修复，则会升级为人工干预。

替代方案类似于 Clemens 的博客文章，您在 SQL Azure 中使用发件箱表，并在注册域的同一事务中写入该发件箱表。

# c#-4.0 - 获取纬度和经度 [Google Api 和 Yahoo Api]

> ID：13469871
> 
> 赞同：0
> 
> 时间：2012-11-20T09:13:18.370
> 
> 标签：c#-4.0, google-maps-api-3, yahoo-api

我在 c#.Net 中工作。我的要求是根据作为参数给出的地址、城市、州和邮编从 api 获取纬度和经度。

我在 Excel 表中有 350 个商店的详细信息。最初我使用的是 google api。

```
if (strAdd != "" && strCity != "" && strState != "" && strZip != "" && strStoreNo != "")
                {
                    Address = strAdd.Trim() + "," + strCity.Trim() + "," + strState.Trim() + "," + strZip.Trim();
                    string routeReqUrl = "http://maps.google.com/maps/geo?q={0}&output=xml&oe=utf8&sensor=true_or_false&key={1}";
                    string url = string.Format(routeReqUrl, Address.Replace(' ', '+'), "ABQIAAAA5rV-auhZekuhPKBTkuTC3hSAmVUytQSqQDODadyYeWY4ZYaVyRRv4thyrzzOQ7AMUl_hIjoG8LomGA");
                    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
                    req.Method = "GET";
                    HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
                    Stream respStream = resp.GetResponseStream();
                    XmlDocument xDoc = new XmlDocument();
                    xDoc.Load(respStream);
                    if (xDoc.GetElementsByTagName("coordinates")[0].InnerText.Contains(","))
                    {
                        string[] coordinates = xDoc.GetElementsByTagName("coordinates")[0].InnerText.Split(',');
                        string Latitude = coordinates[1];
                        string Longtitude = coordinates[0];

                        Logger.Log.Debug("[Latitude and Longitude] " + " Store - No " + strStoreNo + " Addr Line 1 " + strAdd + " Latitude " + Latitude + " Longitude " + Longtitude);
                    }
                } 
```

在上面的代码中，只有大约 10 到 15 家商店，我才能获得纬度和经度的详细信息。之后，我在“（xDoc.GetElementsByTagName（“坐标”）[0] ......”中收到对象引用错误。

在那之后，我尝试了 yahoo api，我使用的是拥有 350 家商店的同一张 excel 表。

```
dsxml.ReadXml("http://where.yahooapis.com/geocode?appid=capelinks&location=" + Address + "&Geocode=Geocode");
                    if (dsxml.Tables[0].Rows.Count > 0)
                    {
                        if (dsxml.Tables[1].TableName == "Result")
                        {
                            string Latitude = dsxml.Tables[1].Rows[0]["Latitude"].ToString();
                            string Longtitude = dsxml.Tables[1].Rows[0]["Longitude"].ToString();
                            Logger.Log.Debug("[Latitude and Longitude] " + " Store - No " + strStoreNo + " Addr Line 1 " + strAdd + " Latitude " + Latitude + " Longitude " + Longtitude);
                        }
                    } 
```

在这里，它处理所有 350 存储正确，没有任何错误。

google api会出现什么问题。大量店铺取经纬度明细是否有限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:12:26.987

我不确定这是否是您的示例问题，但[Google Geocoding API V2 文档](https://developers.google.com/maps/documentation/geocoding/v2/index)提到 V2 版本现在已弃用：

> 注意：Google Maps Geocoding API 第 2 版已于 2010 年 3 月 8 日正式弃用。V2 API 将继续工作到 2013 年 3 月 8 日。我们鼓励您将代码迁移到新的 Geocoding API。

您可以尝试切换到最新的[Geocoding API V3](https://developers.google.com/maps/documentation/geocoding/)。要记住的一件事是，当您在 Google 地图的上下文中显示结果时，Google 条款仅允许使用此服务。

如果雅虎服务提供你需要的数据，我会坚持下去。

# cakephp - CakePhp Cron Mailer - 如何密件抄送

> ID：13469878
> 
> 赞同：1
> 
> 时间：2012-11-20T09:13:55.420
> 
> 标签：cakephp

我搜索了高低。我不是很技术，真的很努力。Cron 邮件程序，没有关于 CC 和 BCC 的详细信息。我尝试了代码变体，将硬编码的密件抄送添加到外发电子邮件中。有人建议使用数组，但无法正常工作。我相信这很简单，但任何帮助将不胜感激。我无法进行的行已被注释掉。

代码

* * *

```
 $this->EmailQueue->to = $booking['Guest']['email'];

        //$this->EmailQueue->bcc = 'james@domain.com';

            $this->EmailQueue->from = $email;
            $this->EmailQueue->headers = array(
                'booking_token' => $booking['Booking']['token'],
            );
            $this->EmailQueue->additionalParams = '-f ' . $bounce_options['bounce_email'];
            $this->EmailQueue->return = $bounce_options['bounce_email'];
            $this->EmailQueue->subject = $template['EmailTemplate']['subject'];
            $this->EmailQueue->template = 'mailman_invitation';
            $this->EmailQueue->sendAs = 'both';
            $this->EmailQueue->delivery = 'db';
            $this->set('body', $template['EmailTemplate']['html']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:13:04.470

将密件抄送包含在 EmailQueue 变量的 headers 变量中。

您必须将代码修改为此

```
$this->EmailQueue->headers = array(
                'booking_token' => $booking['Booking']['token'],
                'bcc' => 'email@tobebcced.com'
            ); 
```

# .net - 如何为多个上下文启用 EF 迁移到单独的数据库？

> ID：13469881
> 
> 赞同：125
> 
> 时间：2012-11-20T09:14:07.237
> 
> 标签：.net, entity-framework, entity-framework-5, database-migration

如何为同一项目中的多个 DB 上下文启用 Entity Framework 5（版本 5.0.0）迁移，其中每个上下文对应于自己的数据库？当我`Enable-Migrations`在 PM 控制台（Visual Studio 2012）中运行时，由于存在多个上下文而出现错误：

```
PM> Enable-Migrations
More than one context type was found in the assembly 'DatabaseService'.
To enable migrations for DatabaseService.Models.Product1DbContext, use Enable-Migrations -ContextTypeName DatabaseService.Models.Product1DbContext.
To enable migrations for DatabaseService.Models.Product2DbContext, use Enable-Migrations -ContextTypeName DatabaseService.Models.Product2DbContext. 
```

如果我运行，则`Enable-Migrations -ContextTypeName DatabaseService.Models.Product1DbContext`不允许运行`Enable-Migrations -ContextTypeName DatabaseService.Models.Product2DbContext`，因为迁移已经存在：`Migrations have already been enabled in project 'DatabaseService'. To overwrite the existing migrations configuration, use the -Force parameter.`

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-11-20T16:08:39.077

对 Enable-Migrations 的第二次调用失败，因为 Configuration.cs 文件已经存在。如果重命名该类和文件，您应该能够运行第二个 Enable-Migrations，这将创建另一个 Configuration.cs。

然后，您需要指定在更新数据库时要使用的配置。

```
Update-Database -ConfigurationTypeName MyRenamedConfiguration 
```

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2014-01-28T06:58:05.637

除了@ckal 的建议之外，为每个重命名的 Configuration.cs 提供自己的命名空间也很**重要。**如果不这样做，EF 将尝试将迁移应用到错误的上下文。

以下是适合我的具体步骤。

如果迁移搞砸了，并且您想创建一个新的“基线”：

1.  删除 Migrations 文件夹中的所有现有 .cs 文件
2.  在 SSMS 中，删除 __MigrationHistory 系统表。

创建初始迁移：

1.  在包管理器控制台中：

    ```
    Enable-Migrations -EnableAutomaticMigrations -ContextTypeName
    NamespaceOfContext.ContextA -ProjectName ProjectContextIsInIfNotMainOne
    -StartupProjectName NameOfMainProject  -ConnectionStringName ContextA 
    ```

2.  在解决方案资源管理器中：将 Migrations.Configuration.cs 重命名为 Migrations.ConfigurationA.cs。如果使用 Visual Studio，这应该会自动重命名构造函数。确保确实如此。编辑 ConfigurationA.cs：将命名空间更改为 NamespaceOfContext.Migrations.MigrationsA

3.  ```
    Enable-Migrations -EnableAutomaticMigrations -ContextTypeName
    NamespaceOfContext.ContextB -ProjectName ProjectContextIsInIfNotMainOne
    -StartupProjectName NameOfMainProject  -ConnectionStringName ContextB 
    ```

4.  在解决方案资源管理器中：将 Migrations.Configuration.cs 重命名为 Migrations.ConfigurationB.cs。同样，确保构造函数也被适当地重命名。编辑 ConfigurationB.cs：将命名空间更改为 NamespaceOfContext.Migrations.MigrationsB

5.  ```
    add-migration InitialBSchema -IgnoreChanges -ConfigurationTypeName
    ConfigurationB -ProjectName ProjectContextIsInIfNotMainOne
    -StartupProjectName NameOfMainProject  -ConnectionStringName ContextB 
    ```

6.  ```
    Update-Database -ConfigurationTypeName ConfigurationB -ProjectName
    ProjectContextIsInIfNotMainOne -StartupProjectName NameOfMainProject
    -ConnectionStringName ContextB 
    ```

7.  ```
    add-migration InitialSurveySchema -IgnoreChanges -ConfigurationTypeName
    ConfigurationA -ProjectName ProjectContextIsInIfNotMainOne -StartupProjectName
    NameOfMainProject  -ConnectionStringName ContextA 
    ```

8.  ```
    Update-Database -ConfigurationTypeName ConfigurationA -ProjectName
    ProjectContextIsInIfNotMainOne -StartupProjectName NameOfMainProject
    -ConnectionStringName ContextA 
    ```

在包管理器控制台中创建迁移脚本的步骤：

1.  运行命令

    ```
    Add-Migration MYMIGRATION -ConfigurationTypeName ConfigurationA -ProjectName
    ProjectContextIsInIfNotMainOne -StartupProjectName NameOfMainProject
    -ConnectionStringName ContextA 
    ```

    或者 -

    ```
    Add-Migration MYMIGRATION -ConfigurationTypeName ConfigurationB -ProjectName
    ProjectContextIsInIfNotMainOne -StartupProjectName NameOfMainProject
    -ConnectionStringName ContextB 
    ```

    可以重新运行此命令，直到将更改应用于数据库。

2.  对所需的本地数据库运行脚本，或者运行不带 -Script 的 Update-Database 以在本地应用：

    ```
    Update-Database -ConfigurationTypeName ConfigurationA -ProjectName
    ProjectContextIsInIfNotMainOne -StartupProjectName NameOfMainProject
    -ConnectionStringName ContextA 
    ```

    或者 -

    ```
    Update-Database -ConfigurationTypeName ConfigurationB -ProjectName
    ProjectContextIsInIfNotMainOne -StartupProjectName NameOfMainProject
    -ConnectionStringName ContextB 
    ```

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2015-10-07T13:16:51.340

我刚刚遇到了同样的问题，我使用了以下解决方案（全部来自包管理器控制台）

```
PM> Enable-Migrations -MigrationsDirectory "Migrations\ContextA" -ContextTypeName MyProject.Models.ContextA
PM> Enable-Migrations -MigrationsDirectory "Migrations\ContextB" -ContextTypeName MyProject.Models.ContextB 
```

这将在 Migrations 文件夹中创建 2 个单独的文件夹。每个都将包含生成的`Configuration.cs`文件。不幸的是，您仍然必须重命名这些`Configuration.cs`文件，否则会抱怨有两个文件。我将文件重命名为`ConfigA.cs`和`ConfigB.cs`

**编辑**：（由 Kevin McPheat 提供）记住重命名 Configuration.cs 文件时，还要重命名类名和构造函数**/EDIT**

有了这个结构，你可以简单地做

```
PM> Add-Migration -ConfigurationTypeName ConfigA
PM> Add-Migration -ConfigurationTypeName ConfigB 
```

这将在配置文件旁边的文件夹中创建用于迁移的代码文件（将这些文件放在一起很好）

```
PM> Update-Database -ConfigurationTypeName ConfigA
PM> Update-Database -ConfigurationTypeName ConfigB 
```

最后但并非最不重要的一点是，这两个命令会将正确的迁移应用到它们对应的数据库中。

**编辑 2016 年 2 月 8 日：** 我对 EF7 版本 7.0.0-rc1-16348 做了一些测试

我无法使 -o|--outputDir 选项起作用。它继续给予`Microsoft.Dnx.Runtime.Common.Commandline.CommandParsingException: Unrecognized command or argument`

但是，看起来第一次添加迁移时，它会被添加到 Migrations 文件夹中，而随后针对另一个上下文的迁移会自动放入迁移的子文件夹中。

原始名称`ContextA`似乎违反了一些命名约定，所以我现在使用`ContextAContext`and `ContextBContext`。使用这些名称，您可以使用以下命令：（请注意，我的 dnx 仍然可以在包管理器控制台中工作，我不喜欢打开单独的 CMD 窗口进行迁移）

```
PM> dnx ef migrations add Initial -c "ContextAContext"
PM> dnx ef migrations add Initial -c "ContextBContext" 
```

`Migrations`这将在文件夹中创建模型快照和初始迁移`ContextAContext`。它将创建一个名为`ContextB`包含这些文件的文件夹`ContextBContext`

我手动添加了一个`ContextA`文件夹并将迁移文件从该文件夹移到该文件`ContextAContext`夹​​中。然后我重命名了这些文件中的命名空间（快照文件、初始迁移，并注意在初始迁移文件...designer.cs 下还有第三个文件）。我必须添加`.ContextA`到命名空间，然后框架从那里再次自动处理它。

使用以下命令将为每个上下文创建一个新的迁移

```
PM>  dnx ef migrations add Update1 -c "ContextAContext"
PM>  dnx ef migrations add Update1 -c "ContextBContext" 
```

并将生成的文件放在正确的文件夹中。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-05-24T14:33:15.970

如果您已经有一个包含许多迁移的“配置”并希望保持原样，您可以随时创建一个新的“配置”类，给它另一个名称，例如

```
class MyNewContextConfiguration : DbMigrationsConfiguration<MyNewDbContext>
{
   ...
} 
```

然后只需发出命令

```
Add-Migration -ConfigurationTypeName MyNewContextConfiguration InitialMigrationName 
```

EF 将毫无问题地支持迁移。最后更新你的数据库，从现在开始，如果你不告诉他你要更新哪个配置，EF 会抱怨：

```
Update-Database -ConfigurationTypeName MyNewContextConfiguration 
```

完毕。

您不需要处理 Enable-Migrations，因为它会抱怨“配置”已经存在，并且重命名现有的配置类会给迁移历史带来问题。

您可以针对不同的数据库，也可以针对同一个数据库，所有配置都将很好地共享 __MigrationHistory 表。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-12T06:41:51.337

如果存在更多数据库，请在 PowerShell 中使用以下代码

```
Add-Migration Starter -context EnrollmentAppContext 
```

*   'Starter' 是迁移名称

*   “EnrollmentAppContext”是我的应用上下文的名称

您可以通过执行以下操作在 VS 中打开 PowerShell： `Tools->NuGet Package Manager->Package Manager Console`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-03-12T06:45:26.470

要在 PowerShell 中更新数据库类型以下代码...

```
Update-Database -context EnrollmentAppContext 
```

*如果存在多个数据库仅使用此代码，否则不需要..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-06T13:37:13.550

当您在多个上下文中运行 Enable-migrations 时，EF 4.7 实际上会给出提示。

在程序集“Service.Domain”中发现了一种以上的上下文类型。

```
To enable migrations for 'Service.Domain.DatabaseContext.Context1', 
use Enable-Migrations -ContextTypeName Service.Domain.DatabaseContext.Context1.
To enable migrations for 'Service.Domain.DatabaseContext.Context2',
use Enable-Migrations -ContextTypeName Service.Domain.DatabaseContext.Context2. 
```

# java - Java字节数组多线程

> ID：13469886
> 
> 赞同：6
> 
> 时间：2012-11-20T09:14:14.163
> 
> 标签：java, multithreading, concurrency, thread-safety, race-condition

如果我有多个线程访问 getter 和 setter，这段代码会遇到任何竞争条件吗？我不介意 getter 在 set 操作期间获取旧数据，但只要它不会导致异常或为 null。

```
ConcurrentHashMap<String, Object> hashMap =
    new ConcurrentHashMap<String, Object> ();

void setByteArray(String string, byte[] byteArray) {
    hashMap.put(string, byteArray.clone());
}

byte[] getByteArray(String string) {
    return ((byte[]) hashMap.get(string)).clone();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T09:20:21.907

这*几乎*是线程安全的（如果有的话）。唯一缺少的是声明`hashMap`字段`final`。这保证了地图的[安全发布](https://stackoverflow.com/q/801993/1374678)。

除此之外，我没有看到任何问题（关于线程安全）。[ConcurrentHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html)是线程安全的，因此存储和检索字节数组也应该如此。

此外，由于您总是复制字节数组，因此它们永远不会在线程之间共享，除了存储在 Map 中的那些。将`ConcurrentHashMap`安全地将这些发布到所有线程，并且由于它们从未被修改（意味着它们实际上是不可变的），因此可以保证线程安全。

最后，根据评论，这里是关于其他一些方面的改进版本：

```
private final ConcurrentHashMap<String, Object> hashMap =
    new ConcurrentHashMap<String, Object> ();

void setByteArray(String string, byte[] byteArray) {
    hashMap.put(string, byteArray.clone());
}

byte[] getByteArray(String string) {
    Object result = hashMap.get(string);
    if(result == null)
        return null;
    else
        return ((byte[]) result).clone();
} 
```

首先是`private`修饰符 for `hashMap`，因此子类不能存储任何其他对象，例如共享字节数组。

第二件事是 getter 中的 null 检查。根据您的要求，您可能希望替换`return null;`为或其他内容。`throw new IllegalArgumentException();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:21:22.873

`ConcurrentHashMap`已准备好处理它，所以我的结论是，您应该可以满足您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:25:40.237

It seems to be ok, as `ConcurrentHashMap` deals with thread safety, according to the spec [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-11T22:02:23.797

Your code isn't threadsafe, not because of byte stuff but because of the way you use ConcurrentHashMap.

For adding items in the map, you should use putIfAbsent() over put(). PutIfAbsent() is equivalent to

```
 if (!map.containsKey(key)){
      return map.put(key, value);
   }
   else {
       return map.get(key);
   } 
```

(probably with proper synchronized block or keyword)

If you just use put(), there are chance that you'll override existing value with new value in multi-thread environment.

# c# - 如何在 iframe 内显示本地文件夹中的 html 文件？

> ID：13469888
> 
> 赞同：0
> 
> 时间：2012-11-20T09:14:20.437
> 
> 标签：c#, javascript, jquery, asp.net, iframe

我尝试在 iframe 中显示 html 文件。

该 html 文件位于我服务器上的本地文件夹中，具有相关权限（例如：）`c:\temp`。

我试过：

```
iframe = document.createElement("iframe");
iframe.src = "file:///c:\temp\a.html";
iframe.style.display = "block";
document.body.appendChild(iframe); 
```

但内容不会显示在 iframe 内。

我尝试的另一个解决方案是用于`ajax`在 a 中显示 html `div`：

```
$("#DIV").html( *READ HTML TEXT FROM FILE *) 
```

但是这里的问题是我的html页面中包含图片和css文件，它们无法显示，因为当前位置是我的网站（它们包含在`c:\temp`html文件夹中）。

有谁知道如何在 html 页面中显示带有图像的 html 页面`iframe`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:57:32.220

问题是浏览器将其`file:///c:\temp\a.html`视为浏览器本地的文件，因此它指向访问者的 C: 驱动器。

您可以将该本地文件夹设置为您网站的虚拟目录（在 IIS 中），并使用正确的 Web 路径 (http://...) 引用该文件。这样您就不会移动文件夹，但它仍然可以通过网络服务器使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:46:59.910

假设当您从根而不是 temp 加载 html 文件时它可以正常工作（因此，排除了除了文件位置问题之外的所有内容），只要您有权访问，您就可以加载相对于您的网站的文件。它确实需要了解您的路径 - 本地和服务器（如果适用）。例如，我在与我的网站 **对等的托管服务器上有一个名为“temp”的文件夹。**

使用 Request.PhysicalApplicationPath，我发现我的站点位于我的主机上：“c:\inetpub\wwwroot\mydomain.com\index.htm”。因此我的临时文件夹和文件必须位于“c:\inetpub\wwwroot” \temp\myfile.txt"（同样，temp 是我站点的对等点）。

粗略的例子：

```
string _filePath, _uriServerName = "";

_filePath = Request.PhysicalApplicationPath;
_uriServerName = Request.ServerVariables["SERVER_NAME"].ToLower();

if (_uriServerName != "localhost")
{
int rootPos = _filePath.IndexOf("wwwroot"); //get position wwwroot 
_filePath = _filePath.Substring(0, rootPos) + "temp\\myfile.txt";
} 
```

我使用上面的方法在网站之外加载文件。为此，它运作良好。但是，iframe 可能会带来一些其他挑战。我不认为这会带来任何跨域问题，但我不太确定。

# php - 想要从两个日期之间减去小时到小时、分钟到分钟、秒到秒

> ID：13469889
> 
> 赞同：1
> 
> 时间：2012-11-20T09:14:23.273
> 
> 标签：php, date

```
<?php
    $ts='2011-04-13 23:00:00';
    $ts1='2011-04-14 15:45:00';
    echo $addtime = date("h:i:s", mktime(date("h", $ts1)- date("h", $ts),date("i", $ts1)- date("i", $ts),date("s", $ts1)- date("s", $ts),0,0,0));
?> 
```

它给出了一个结果，但在许多情况下它是不正确的。我如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:47:00.030

对于给定的示例，您的预期结果是 16:45:00，对吧？因此，您需要以小时：分钟：秒为单位的两个给定日期之间的差异。

```
<?php
    //initial strings
    $ts='2011-04-13 23:00:00'; 
    $ts1='2011-04-14 15:45:00';

    //converting to time
    $start = strtotime($ts);
    $end = strtotime($ts1);

    //calculating the difference
    $difference = $end - $start;

    //calculating hours, minutes and seconds (as floating point values)
    $hours = $difference / 3600; //one hour has 3600 seconds
    $minutes = ($hours - floor($hours)) * 60;
    $seconds = ($minutes - floor($minutes)) * 60;

    //formatting hours, minutes and seconds
    $final_hours = floor($hours);
    $final_minutes = floor($minutes);
    $final_seconds = floor($seconds);

    //output
    echo $final_hours . ":" . $final_minutes . ":" . $final_seconds;
?> 
```

这给了我正确的结果。希望我能解决你的问题！

# php - 从数据库显示数据意味着 php smarty mysql

> ID：13469890
> 
> 赞同：0
> 
> 时间：2012-11-20T09:14:25.287
> 
> 标签：php, mysql, smarty

帮助我理解：数据库中有一个表：

```
 id  f_gdpec  w_gdpec    url_gdpec   p_gdspec
        1   Москва  Красноярск  www.test.ru 450
        2   Москва  Красноярск  www.test.ru 900
        3   Москва  Красноярск  www.test.ru 600 
```

需要从数据库中提取数据并显示意味着 php 意味着 smarty。这就是我所做的：module.php：

```
<?php
function mod_gdspec($module_id){

    $inCore = cmsCore::getInstance(); 
    $inDB   = cmsDatabase::getInstance();
    $cfg    = $inCore->loadModuleConfig($module_id);

    $sql = "SELECT f_gdpec,
                   w_gdpec,
                   url_gdpec,
                   p_gdspec
            FROM cms_gdspec";

    $result = $inDB->query($sql) ;

    if ($inDB->num_rows($result)){
    $items = array();

        while ($item=$inDB->fetch_assoc($result)){
        $items[]=$item;
        }
    }

    $smarty = $inCore->initSmarty('modules', 'mod_gdspec.tpl');         
    $smarty->assign('items', $items);
    $smarty->display('mod_gdspec.tpl');

    return true;        
}
?> 
```

模板 mod_gdspec.tpl：

```
{foreach item=item from=$items}

<div class="mod_latest_entry">

<div class="mod_latest_f_gdpec">

 {$item.f_gdpec}

</div>

<div class="mod_latest_w_gdpec" >

             {$item.w_gdpec}

  </div>

 </div>
{/foreach} 
```

来自 tabditsy 的数据没有出现，我无法理解有多少。问你的能力。感谢您的关注。

**更正的脚本 - module.php!!!!!!!!!!!!!**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:40:05.167

您在分配值之前返回值，删除不必要的返回值

```
<?php
    function mod_gdspec($module_id){

        $inCore = cmsCore::getInstance(); 
        $inDB   = cmsDatabase::getInstance();
        $cfg    = $inCore->loadModuleConfig($module_id);

        $sql = "SELECT f_gdpec,
                       w_gdpec,
                       url_gdpec,
                       p_gdspec
                FROM cms_gdspec";

        $result = $inDB->query($sql) ;

        if ($inDB->num_rows($result)){
        $items = array();

            while ($item=$inDB->fetch_assoc($result)){
            $items[]=$item;
            }
        }
       // return true;------------>remove this

        $smarty = $inCore->initSmarty('modules', 'mod_gdspec.tpl');         
        $smarty->assign('items', $items);
        $smarty->display('mod_tags.tpl');

        return true;        
    }
    ?> 
```

# php - Codeigniter 2.1.3 的 SMTP Gmail 错误

> ID：13469891
> 
> 赞同：2
> 
> 时间：2012-11-20T09:14:35.600
> 
> 标签：php, codeigniter, email, smtp

我看过很多与这个问题相关的帖子，我已经完成了给出的说明，但总是得到同样的错误..

我想使用 Code Igniter 2.1.3 发送 smtp gmail，代码如下：

```
class Email extends CI_Controller{

function index(){

$config = Array(
'protocol'      => 'smtp',
'smtp_crypto'   => 'ssl',
'smtp_host'     => 'smtp.gmail.com',
'smtp_user'     => 'myEmail@gmail.com',
'smtp_pass'     => '***********',
'smtp_port'     => 25,
'mailtype'      => 'text',
'smtp_timeout'  =>  15, 
'charset'       => 'iso-8859-1'
);
$this->load->library('email', $config);

$this->email->set_crlf("\r\n");
$this->email->set_newline("\r\n");
$this->email->from("myEmail@gmail.com", "myName");
$this->email->to("myEmail@gmail.com");
$this->email->subject("Email Test");
$this->email->message("This is email test");

if($this->email->send()){
    echo 'Email Send';
    }   else{
        show_error($this->email->print_debugger());
    }
} 
```

错误总是这样，

```
Message: fsockopen(): unable to connect to ssl://smtp.gmail.com:25 (A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. ) 
```

请帮我解决这个错误，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:20:09.453

您需要在服务器配置中的 php.ini 文件中启用您的 ssl，如果您使用的是 Xampp 服务器，您可以检查它是否已启用。在那去 PHP 信息搜索 ssl ......

您需要删除 ; php.ini 文件中的 extension=php_openssl.dll 这一行之前。

您需要启用 OpenSSL........

我最近遇到了这个错误。你的代码中有一个小错误............

```
function sendMail()
{
    $config = Array(
  'protocol' => 'smtp',
  'smtp_host' => 'ssl://smtp.googlemail.com',
  'smtp_port' => 465,
  'smtp_user' => 'xxx@gmail.com', // change it to yours
  'smtp_pass' => 'xxx', // change it to yours
  'mailtype' => 'html',
  'charset' => 'iso-8859-1',
  'wordwrap' => TRUE
);

        $message = $this->load->view('upload_success','',TRUE);
        $this->load->library('email', $config);
      $this->email->set_newline("\r\n");
      $this->email->from('xxx@gmail.com'); // change it to yours
      $this->email->to('yyy@gmail.com');// change it to yours
      $this->email->subject('Resume from JobsBuddy for your Job posting');
      $this->email->message($message);
      if($this->email->send())
     {
      echo 'Email sent.';
     }
     else
    {
     show_error($this->email->print_debugger());
    }

} 
```

这是我在解决您面临的问题后使用的工作代码.....

# java - 休眠 4/Spring 3.2 NonUniqueObjectException

> ID：13469892
> 
> 赞同：1
> 
> 时间：2012-11-20T09:14:41.453
> 
> 标签：java, spring, hibernate

好的，我对 Hibernate/Spring非常*非常陌生。*我不得不从 Hibernate 2 - Hibernate 4 和 Spring 1 - Spring 3 升级现有代码。

在向数据库传递多条消息时尝试调用 saveOrUpdate 时，我不断收到此异常（当我只发送一条消息时它工作正常）：

```
 org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session
  at org.hibernate.engine.internal.StatefulPersistenceContext.checkUniqueness(StatefulPersistenceContext.java:686)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.performUpdate(DefaultSaveOrUpdateEventListener.java:293)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsDetached(DefaultSaveOrUpdateEventListener.java:239)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:109)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    at org.hibernate.internal.SessionImpl.fireSaveOrUpdate(SessionImpl.java:728)
    at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:720)
    at org.hibernate.engine.spi.CascadingAction$5.cascade(CascadingAction.java:258)
    at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
    at org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:423)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:264)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:114)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    at org.hibernate.internal.SessionImpl.fireSaveOrUpdate(SessionImpl.java:728)
    at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:720)
    at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:716)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:352)
    at $Proxy9.saveOrUpdate(Unknown Source) 
```

我用谷歌搜索，直到我脸色发青！我曾尝试使用合并（）。这不会给出异常，但合并会将 NULL 值插入到数据库中。

我曾尝试使用 evict()、flush()，同样的错误。

这是导致错误的方法：

```
public void saveOrUpdate(Object obj)  {
  Session session = null;
  SessionFactory sf = getSessionFactory();

  try {
        try {
            session = sf.getCurrentSession();
        } catch (Exception e) {
            session = sf.openSession();
        }

        System.out.println("Object: " + obj);

        session.beginTransaction();
        session.saveOrUpdate(obj);
        session.getTransaction().commit();

        System.out.println("DONE");

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:23:25.257

您能否提供调用 saveOrUpdate 方法的映射和代码。看起来错误出现在调用 saveOrUpdate 的代码中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:01:45.997

我解决了:)

我不知道它是否是最好的解决方案，但它对我有用，经过 2 天的努力，我很高兴！

我从父对象中删除了 Cascade，并在父对象和子对象上显式调用 saveOrUpdate。

谢谢大家的帮助:)

# iphone - 如何将按钮操作连接到标签栏视图控制器

> ID：13469897
> 
> 赞同：5
> 
> 时间：2012-11-20T09:14:58.337
> 
> 标签：iphone, objective-c, ios, ipad

我是 iPhone 开发的新手。我正在开发一个`TabBarViewcontroller`应用程序（iPhone 和 iPad），并在其中创建了一个`LoginViewController`和一个按钮操作。我的期望是单击该按钮后，控件将从 移动`LoginViewController`到`TabBarViewController`. 在这`TabBarViewcontroller`我有 5 个标签栏（项目）视图控制器。是否可以？

如果可以，请分享您的想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T09:28:12.593

首先，`UINavigationController`在`UITabbarController`你的`MainWindow.xib`和绑定`IBOutlet`到各自的领域.. ans设置`LoginViewController`为你的`UINavigationController`..的rootViewController

然后在`didFinishLaunchingWithOptions`方法中写这个..

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{
    [self.window setRootViewController:navController];
    [self.window makeKeyAndVisible];    
    return YES;
} 
```

现在`AppDelegate.m`像这样创建其他方法..

```
-(void)loadApplication
{
    [navController pushViewController:tabbarController animated:NO];
} 
```

在您的登录按钮操作.. 调用此方法如下..

```
-(IBAction)btnLoginTapped:(id)sender
{
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate];
    [appDelegate loadApplication];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T09:20:01.030

所以在按钮操作中尝试以下代码

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate]; 
appDelegate.window.rootViewController = tabBarController; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-20T09:37:08.517

使用此方法从任何其他视图添加标签栏..

```
 -(void)addTabBarControllerInwindow 
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:1.0];
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.window cache:YES];

        [self.navigationController.view removeFromSuperview];
        [self.window addSubview:tabBarController.view];
        [UIView commitAnimations];
    } 
```

将此方法放在`AppDelegate.m`文件和任何 viewController 中，例如在 LoginView 控制器中，当您想添加标签栏时，然后声明委托对象并调用此方法，如下所示。

```
 AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
 [appDelegate addTabBarControllerInwindow]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T11:30:13.947

我想你可能会在一个项目中寻找多个 VC。因此，在 appDelegate 中为 loginVC 和其他 VC（用于 tabbar）声明并初始化一个 VC，登录成功后调用以下函数。

在启动时将 LoginVC 设为 RootViewController

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{// declare LoginVC and make it rootViewController
 self.window.rootViewController = self._loginVCObj;
    [self.window makeKeyAndVisible];
} 
```

`#pragma mark- Continue to next screen after successful Login`

```
-(void) continueToNextView
{   // Handle UI after Login like.
 [_loginVCObj._indicator stopAnimating];
    [_loginVCObj._loginButton setEnabled:YES];
//add the VC to the tabbar 
    self._tabBarController.viewControllers = [NSArray arrayWithObjects:self.navigationControllerList,_favItemListNavObj, _toDoHereVC, _settingNavObj, nil]; 
// make tabbar as rootViewController
     self.window.rootViewController = self._tabBarController;
} 
```

# php - php strtotime 某天未完成

> ID：13469898
> 
> 赞同：0
> 
> 时间：2012-11-20T09:15:05.607
> 
> 标签：php, strtotime

我有一些约会，比如：

```
20 November 06:10
12 November 08:12
10 October 13:23 
```

过去6个月都有，现在我想要`strtotime()`它们，但它们都不完整（缺少年份），如何制作一些流程以便我可以`strtotime()`它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:23:29.617

您应该使用[DateTime](http://uk1.php.net/manual/fr/book.datetime.php)类及其[createFromFormat](http://uk1.php.net/manual/fr/datetime.createfromformat.php)和[getTimeStamp](http://uk1.php.net/manual/fr/datetime.gettimestamp.php)方法，而不是 strtotime。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:36:36.713

试试这个：

```
$dates = array("10 October 13:23", "12 November 08:12", "10 October 13:23");

    foreach($dates as $d){
        $exploded = explode(" ", $d);
        $newDate = array_slice($exploded, 0,2,true)+array(2=>"2012")+array(3 => $exploded[2]);

        //print_r($newDate);
        $time = strtotime(implode($newDate));
        echo $time."<br/>";
    } 
```

我得到的输出是：

```
1349868180
1352704320
1349868180 
```

逻辑是：

你缺少年份，所以我将日期分解成一个数组来分割它们，插入年份（`+array(2=>"2012")`部分）并用 implode 再次粘合它们，然后运行 ​​strtotime。

这仅适用于今年，因此您可以使用此逻辑将年份添加到所有日期，或者将来绝对无法过滤来自不同年份的日期。

*   我将日期添加到一个数组中循环遍历所有这些，您可以使用其他方式循环，具体取决于您存储所有日期的位置。例如，如果它们在数据库中，您可以将脚本包含在其中的部分`while($row = mysqli_fetch_assoc($result))`中。`$d``$row['date']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:40:11.463

```
print_r(date_parse_from_format("d F H:i", '20 November 06:10')); 
```

给你：

```
Array
(
    [year] => 
    [month] => 11
    [day] => 20
    [hour] => 6
    [minute] => 10
    [second] => 0
    [fraction] => 
    [warning_count] => 0
    [warnings] => Array
        (
        )

    [error_count] => 0
    [errors] => Array
        (
        )

    [is_localtime] => 
) 
```

# objective-c - Objective-c：在 addSubview 之后递归调用 viewDidLoad

> ID：13469900
> 
> 赞同：2
> 
> 时间：2012-11-20T09:15:12.540
> 
> 标签：objective-c, xcode

我在 Xcode 4.5.2 中工作。
我有以下问题：
当我从非空项目制作项目时 - 即视图是从情节提要初始化的，有时当我添加代码时

```
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
UIButton *b = [UIButton buttonWithType:UIButtonTypeRoundedRect];
b.frame = CGRectMake(20, 20, 100, 100);
[self.view addSubview:b]; 
```

对于 viewDidLoad 方法，它在 addSubview 方法调用之后再次递归调用，有时（祝福天空）它不会。
谁能告诉我问题是什么以及如何解决？
我的感激之情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:30:13.133

**编辑：**正如@WDUK 正确指出的那样，以下答案是错误的。它会解释递归`loadView`，而不是`viewDidLoad`。

旧的，错误的答案：

> 递归调用发生在`-[super viewDidLoad]` 未设置对视图属性的调用之后，然后调用`self.view`.
> 
> 您可能只是忘记将视图连接到文件所有者的视图出口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:23:47.977

当设备用完可用内存时，如果当前不可见，它可以释放视图。您应始终确保正确处理此行为。

例如，当您在使用导航或标签栏控制器时切换到另一个视图时，我可能会发生这种情况。

# html - 将 webarchive 转换为 html

> ID：13469903
> 
> 赞同：10
> 
> 时间：2012-11-20T09:15:19.980
> 
> 标签：html, extract, webarchive

我设法将一个复杂网站的行为收集到一个网络档案中。此后，我想将该 webarchive 变成一组 html 嵌套目录。然而，当我使用 Waf 和在 Apple 商店购买的商业软件进行操作时，我得到的只是嵌套目录，底部有 html 页面，没有图像，也没有 css 和工作链接。如果您有兴趣，网络存档文档位于：

[http://www.miafoto.it/it/GiroMilano.webarchive](http://www.miafoto.it/it/GiroMilano.webarchive)

而提取的弱乘积在：

[http://www.miafoto.it/it/Giromilano/Pagine/default.aspx](http://www.miafoto.it/it/Giromilano/Pagine/default.aspx)

和上面的空目录。In addition to the different look, the webarchive displays the same behavior as the official web site - when a listbox vales is selected and then the button pushed - while the extracted version produces a page with no contents by loading itself rather than the official page. 如您所见，网络存档超过 1MB，而提取文件仅略高于 1 KB。

它有什么问题，我如何才能以可用的结果执行如此看似微不足道的业务？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-24T20:34:31.573

```
textutil -convert html example.webarchive 
```

*   小心——带有文件的 html 是在与 webarchive 相同的文件夹中创建的！
*   此外，我必须使用文本编辑器打开 .html 并替换“file:///image.tiff”链接（将“file:///”替换为“”），以便它们指向相对路径。
*   此外，并非所有浏览器都显示 .tiff 图像。

*谁知道我们有[Stack Overflow wiki](http://stackoverflow.org/wiki/Convert_webarchive_to_html)？*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:51:57.020

我通过查找页面中提交的所有参数并将它们也提交到我的脚本中来解决这个问题，而忽略了 webarchive。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-13T20:08:15.337

为了在 mac 上保存 HTML 页面，我使用 chrome。下载并安装它并将您的页面保存为 HTML。Safari 将使用 webarchiveformat 保存网页，对我来说，处理它非常困难。

# jsp - JSP中的Struts 2数组复制

> ID：13469904
> 
> 赞同：0
> 
> 时间：2012-11-20T09:15:21.500
> 
> 标签：jsp, struts2

将值复制到下一个操作，使用以下语法

```
<s:hidden name="formRow.value" value="%{formRow.value}" /> 
```

我应该使用什么语法来复制带有字段的整个对象数组？我试过这样的方法：

```
<s:iterator var="entry" value="%{formRow.myArray}" status="stat">
    <s:hidden name="formRow.myArray[#stat.index].val1" value="%{entry.val1}"/>
    <s:hidden name="formRow.myArray[#stat.index].val2" value="%{entry.val2}"/>
</s:iterator> 
```

但是在提交表单时，**formRow.myArray**仍然为空..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:23:15.513

在您的情况下`value`，实际上并不需要属性，`name`就足够了。尝试这个：

```
<s:iterator value="formRow.myArray" status="stat">
   <s:hidden name="formRow.myArray[%{#stat.index}].val1"/>
   <s:hidden name="formRow.myArray[%{#stat.index}].val2"/>
</s:iterator> 
```

# python - 我应该如何在 Google App Engine 项目中导入 django.middleware 类？

> ID：13469906
> 
> 赞同：7
> 
> 时间：2012-11-20T09:15:23.250
> 
> 标签：python, django, google-app-engine, memcached, middleware

我正在尝试将我的 django 项目部署到 GAE。使用 appcfg.py 部署后，我在 GAE 中收到此错误。有谁知道如何解决这个问题？

```
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime 
  /wsgi.py", line 223, in Handle
  result = handler(dict(self._environ), self._StartResponse)
  File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django
  /core/handlers/wsgi.py", line 219, in __call__
  self.load_middleware()
  File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django
  /core/handlers/base.py", line 47, in load_middleware
  raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % 
  (mw_module, e))

  ImproperlyConfigured: Error importing middleware django.middleware.cache: "No module 
  named memcache" 
```

下一个代码显示了如何在我的 project.settings 中导入中间件类：

```
from djangoappengine.settings_base import *

....

MIDDLEWARE_CLASSES = (
'django.middleware.cache.UpdateCacheMiddleware',
'django.middleware.common.CommonMiddleware',
'django.middleware.cache.FetchFromCacheMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
) 
```

感谢您查看这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T09:21:58.143

安装内存缓存

```
pip install python-memcached 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:02:07.223

您的缓存后端可能已配置为使用 memcache。Memcache 现在可以在 google-appengine 上使用。您需要使用来自 appengine api [google.appengine.api.memcache](https://developers.google.com/appengine/docs/python/memcache/functions)的 memcache 包装器。

您将需要使用django的[自定义缓存后端。](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#using-a-custom-cache-backend)您可能需要实现自己的 django 缓存后端，它使用 appengine 的 memcache api。实现一个 django 后端应该是微不足道的，因为来自 appengine api 的函数很容易映射到 django 缓存后端。在编写后端作为参考时，您可以使用[django.core.cache.backends.MemcachedCache](https://github.com/django/django/blob/master/django/core/cache/backends/memcached.py#L158)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:32:41.440

你有一个奇怪的配置，我怀疑你会遇到很多问题。

您正在使用 GAE 为 django 1.4 提供的库但是，您还导入了 djangoappengine，它是为 django-nonrel 设计的。

我认为 GAE 提供的库和 django-nonrel 不能很好地协同工作。我怀疑你可能会遇到很多奇怪的错误。

如果您使用的是纯 django-nonrel，我认为您的中间件设置正常。

这是否在本地工作，并且仅在您部署时中断？在这种情况下，您很可能在本地使用 django-nonrel，但您没有部署它 - 因此在部署时，它使用的是 GAE 提供的版本。

确保 django-nonrel 在您的项目文件夹中。并且不要在你的 app.yaml 中启用 django 1.4。

# android - android小部件中的TextView不更新

> ID：13469907
> 
> 赞同：6
> 
> 时间：2012-11-20T09:15:24.503
> 
> 标签：android, widget

当我的小部件中的 TextView 被放置在主屏幕上时，它使用正确的信息正确设置。但是当我在主应用程序中更新信息时，小部件仍然显示旧信息。

显现：

```
<receiver android:name=".WidgetProvider" android:label="@string/app_name" android:exported="false">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    </intent-filter>

    <meta-data android:name="android.appwidget.provider" android:resource="@xml/widget" />
</receiver> 
```

WidgetProvider.java：

```
package com.example.huskeliste;

import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.Context;
import android.content.Intent;
import android.widget.RemoteViews;

public class WidgetProvider extends AppWidgetProvider {

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        final int N = appWidgetIds.length;

        for (int i = 0; i < N; i++) {
            int widgetId = appWidgetIds[i];

            DBAdapter info = new DBAdapter(context);

            info.open();
            String data = info.getTextViewData();
            info.close();

            Intent intent = new Intent(context, Main.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);

            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);
            views.setOnClickPendingIntent(R.id.loWidget, pendingIntent);
            views.setTextViewText(R.id.txtView, data);
            appWidgetManager.updateAppWidget(widgetId, views);
        }
    }
} 
```

res-widget.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget"
    android:minWidth="294dp"
    android:minHeight="72dp"
    android:updatePeriodMillis="1800000">
</appwidget-provider> 
```

布局 - widget.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/loWidget"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:gravity="center"
    android:layout_margin="1dp"
    android:background="@drawable/background">

    <TextView
        android:id="@+id/txtView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="22dp"
        android:textColor="#ffffff"
        android:text="" />
</LinearLayout> 
```

背景.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient android:startColor="#CC111111" android:endColor="#CC111111" android:angle="0" />
    <padding android:left="4dp" android:top="1dp" android:right="4dp" android:bottom="1dp" />
    <corners android:radius="3dp" />
</shape> 
```

来自 DBAdapter.java 的 getTextViewData()：

```
public String getTextViewData() {
    String[] columns = new String[] { KEY_NAME };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

    String result = "";

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {           
        if (result.length() > 0) {
            result += ", ";
        }

        result += c.getString(0);
    }

    return result;
} 
```

有人知道我的代码中缺少什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T09:29:06.730

您需要在 Widget 提供程序 XML 中设置更新间隔（以毫秒为单位）。[示例代码](http://developer.android.com/guide/topics/appwidgets/index.html#MetaData)：

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="294dp"
    android:minHeight="72dp"
    android:updatePeriodMillis="86400000"
    android:previewImage="@drawable/preview"
    android:initialLayout="@layout/example_appwidget"
    android:configure="com.example.android.ExampleAppWidgetConfigure" 
    android:resizeMode="horizontal|vertical"
    android:widgetCategory="home_screen|keyguard"
    android:initialKeyguardLayout="@layout/example_keyguard">
</appwidget-provider> 
```

但是，您应该知道系统不保证小部件会经常更新。此外，如果您希望小部件更频繁地更新（例如，在配置更改之后，就像您的问题一样），您需要手动进行。这是我如何进行的：

在本例中，我的 Widget 类简称为 Widget.class：

```
public class Widget extends AppWidgetProvider {

    // TODO: Don't forget to override the onUpdate method also

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals("update_widget")) {
            // Manual or automatic widget update started

            RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
                    R.layout.widget);

            // Update text, images, whatever - here
            remoteViews.setTextViewText(R.id.yourTextID, "My updated text");

            // Trigger widget layout update
            AppWidgetManager.getInstance(context).updateAppWidget(
                    new ComponentName(context, Widget.class), remoteViews);
        }
    }

} 
```

确保将布局和 替换为`TextView`对您的小部件布局的引用。

然后，无论何时您想要更新您的小部件（例如，在`onPause`您的主要活动的方法中或每当单击保存按钮时），您都会调用`PendingIntent`：

```
Intent updateWidget = new Intent(context, Widget.class); // Widget.class is your widget class
updateWidget.setAction("update_widget");
PendingIntent pending = PendingIntent.getBroadcast(context, 0, updateWidget, PendingIntent.FLAG_CANCEL_CURRENT);
pending.send(); 
```

# c# - 将 SQL 语句转换为 NHibernate 查询

> ID：13469908
> 
> 赞同：1
> 
> 时间：2012-11-20T09:15:34.770
> 
> 标签：c#, nhibernate, asp.net-mvc-4

我昨天试图问这个问题，但我认为我的措辞不是很清楚。

因此，我试图改写下面的问题。

我们有一个在 MVC4 中重写的现有系统，我们在新系统中使用 NHibernate 3.2。

在旧系统中，我们构建一个类似这样的 SQL 语句：

```
SELECT myField as series, 
    pstatus, 
    Year(acc_date) AS year, 
    Month(acc_date) AS month, 
    COUNT(CAST(reportable AS INT)) AS totalreportable, 
    SUM(CAST(reportable AS INT)) AS riddorreportable, 
    SUM(CAST(lt_acc AS INT)) AS losttime, 
    SUM(CAST(acc_losttime AS INT)) AS totaldayslost, 
    SUM(CAST(nearmiss AS INT)) AS nearmiss 
    FROM incident 
    WHERE 1=1 
```

在上面，我们将用 nHibernate 标准（我们已经在系统中过滤数据）替换“WHERE 1=1”。

上述 SQL 语句中的 myField 是用户可选择的字段，例如他可以选择部门、城市等。

因此，我需要的是有关如何使用 nHibernate 来实现与上述 SQL 语句相同的结果的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T16:49:48.007

由于您已经在使用 ICriteria API 来构建 WHERE 子句，因此您需要使用 ICriteria 的 SetProjection() 方法来构建动态 SELECT 子句。

这将允许您通过使用字符串以动态方式使用用户选择的字段。

我打算写一个代码示例，但我觉得有人已经在另一个 StackOverflow 问题上做得很好：[https ://stackoverflow.com/a/696020/670028](https://stackoverflow.com/a/696020/670028)

关于 ICriteria Projections 的官方 NHibernate 文档：http: [//nhibernate.info/doc/nh/en/index.html#querycriteria-projection](http://nhibernate.info/doc/nh/en/index.html#querycriteria-projection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:19:40.453

文档中关于不同查询 API 的第 14、15、16 和 17 章：http: [//nhibernate.info/doc/nh/en/index.html](http://nhibernate.info/doc/nh/en/index.html)

除了这些之外，还支持 LINQ，除非您遇到它的限制，否则它现在可能应该是您首选的查询 API。如果您正在构建一个新系统，您应该从 NH 3.3.2 开始，以访问最新的 LINQ 改进。

所有查询 API 都可以根据一些用户输入来选择（项目）不同的属性。我认为您可能需要更具体地说明您尝试过的内容或遇到的问题，以获得更详细的回复。

# yii - Yii中上传文件的访问控制

> ID：13469911
> 
> 赞同：1
> 
> 时间：2012-11-20T09:15:47.287
> 
> 标签：yii, acl

处理文件访问限制的最佳方法是什么？目标是只允许其作者访问某些上传的文件。

我决定将文件保存在 /protected/files 文件夹中，我想知道返回这些文件的最佳方式是什么。

1.  一种可能的方法是创建数据库，如： `id, user_id, name, path`.

    因此具有特定 user_id 的用户可以通过 /resource/name.jpg 之类的请求访问他的文件（具有名为 ResourceController 的公共控制器）

2.  第二种方法是在`id, name, path`没有 ResourcesController 的情况下只存储。在每个其他控制器（需要访问用户文件）中创建一个将执行访问控制的操作。

    ```
    function actionMessageImage()
    {
      $message_id = $_GET['message_id'];
      $model = Message::model()->find( ... check user_id for access control)

      $file = File::model()->findByPk($model->file_id)

      // then make request such as $file->get(); that performs readFile()
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:46:07.730

在这种情况下，最好用图像保存 user_id，对数据库的命中率最低。

# php - 使用 PDO 在 mysql 中插入数据

> ID：13469922
> 
> 赞同：0
> 
> 时间：2012-11-20T09:16:24.143
> 
> 标签：php, pdo

大家好，我有一个“名称”字段的表“项目”。我正在尝试插入数据，但出现错误。请参阅我的以下代码以获取更多信息。

项目.php

```
class Item {

public function create(){
  $attributes = $this->attributes();
  $pair = array();

  foreach($attributes as $key => $value){
    $pair[] = "'{$key}'=>{$value}";
  }

  $bind = ":" . implode(", :",array_keys($attributes));
  $sql = "INSERT INTO " . static::$table_name
       . " (" . join(",",array_keys($attributes)) . " ) VALUES "
       . " ( " . $bind . " )";

  $stmt = $this->database->prepare($sql);
  $result = $stmt->execute($pair);
  if($result){
    return $result;
  } else {
    $error = $this->database->errorInfo();
  return $error;
  }
}

} 
```

索引.php

```
<?php
   $item->name = "Sample Name";
   $item->create();
?> 
```

错误：

```
Warning: PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: parameter was not defined in PATH on line 62 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:24:50.883

您的`$pair`数组如下所示：

```
array(
    0 => "'foo'=>bar"
    1 => ...
) 
```

这是胡说八道。该`execute()`方法需要一个带有命名键的数组，而不是带有垃圾值的数字键。完全摆脱`$pair`事物并`$attributes`转而代`execute()`之。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:25:22.043

`$pair`部分错误...您应该查看[PDOStatement::execute](http://lv1.php.net/manual/en/pdostatement.execute.php)和[Arrays](http://lv1.php.net/manual/en/language.types.array.php)手册。

您的`$pair`数组如下所示：

```
array(1) {
  [0]=>
  string(12) "'key'=>value"
} 
```

但应该是：

```
array(1) {
  [":key"]=>
  string(5) "value"
} 
```

自己找到解决方案:)

# php - PHp excel阅读器：数据库表显示具有空值的多行

> ID：13469925
> 
> 赞同：-3
> 
> 时间：2012-11-20T09:16:39.950
> 
> 标签：php, excel, import, excel-2007

我编写了一个 php 脚本来将 excel 工作表数据导入 mysql 数据库..代码是 80% 正确..没有错误显示..所有 excel 工作表数据都已添加到表中...但问题是数据库表显示了一些空单元格值为 0..许多行数出现.... * 这是 phpmyadmin 表图像：[访问此] [http://i.imgur.com/P1tn3.png](http://i.imgur.com/P1tn3.png) * 这是我的 excel 表只有 4 行数据.. * 这是我的 php 代码：从此 mediafire 链接下载：[http ://www.mediafire.com/?civnwaiolevl7yj](http://www.mediafire.com/?civnwaiolevl7yj)

**这段代码是有效的..没有问题...这个代码出了问题.... **我想你们都可以理解我的问题...我怎样才能停止在我的数据库中保存那些空行表...请帮我解决这个问题.....**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:24:01.957

测试 $arr[$i][1] 的值，只有在它不为空时才插入

# wcf - java客户端和wcf服务之间数据类型的兼容性

> ID：13469927
> 
> 赞同：-1
> 
> 时间：2012-11-20T09:16:48.697
> 
> 标签：wcf, types, java-client

我正在开发一个`WCF Service`带有`basicHttpBinding`选项的应用程序。我选择`basicHttpBinding`是因为我的客户端可以是 Java 客户端、Visual Basic 客户端等。
现在我想确保我在应用程序中使用的数据类型与 Java 客户端或其他平台语言兼容和使用。
例如，以下哪些 .NET 数据类型可以在不影响互操作性的情况下使用？

*   约会时间
*   整数
*   双倍的
*   双倍的？
*   漂浮
*   漂浮？
*   细绳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:34:20.887

我回答我自己的问题。
我找到了一个资源，它说明了 .Net 服务器和 Java 客户端之间数据类型的互操作性。

[文档化](http://java.interoperabilitybridges.com/articles/data-types-interoperability-between-net-and-java#h5Section0)

文档说，使用可为空的数据类型不会让开发人员头疼。但是，我不会使用诸如此类的可为空的数据类型`double?` `int?`。我将在其中设置默认值。

# php - 通过 http 请求从名称服务器获得响应？

> ID：13469930
> 
> 赞同：3
> 
> 时间：2012-11-20T09:16:55.077
> 
> 标签：php, httprequest, nameservers

在您输入域名后，我正在创建一个 dns-overview。我通过以下方式获取我的信息：

```
 $dnsinfo = (dns_get_record($_POST['txtdomein'], DNS_ANY)); 
```

获得信息后，我想检查名称服务器和邮件服务器等是否响应。所以我必须要求回应。我如何用 php 做到这一点？

格雷茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:43:02.170

问题解决了。

我现在正在使用：

```
`$fp = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP)or die('Error: socket_create');

//connect to the socket
socket_connect($fp, $nameserver, 53) or die('Error: socket_connect');

if($fp)
{
    //write the package to socket $fp
    socket_write($fp, $package);
    $output = '';

    //get the response from the socket
        $output = socket_read($fp, 1024, PHP_BINARY_READ)or die('Error: socket_read');
      echo $output."<br />";` 
```

感谢支持 sberry:)

# php - 将 MAMP 更新到 PHP 5.4.8

> ID：13469931
> 
> 赞同：4
> 
> 时间：2012-11-20T09:17:03.227
> 
> 标签：php, mamp

我使用了本指南[如何将 MAMP 的 PHP 升级到 PHP 5.3？](https://stackoverflow.com/questions/1746719/how-do-you-upgrade-mamps-php-to-php-5-3)在 MAMP 上更新我的 PHP 版本，但它不起作用。

我不确定我是否做对了一切。我下载了 php 5.4.8 并将文件夹放入 MAMP -> conf 并将其重命名为 php5.4.8 以使其与其中的其他 PHP 文件夹相同。比我遵循指南，但收到以下错误：

```
Binarys-MacBook-Air:~ BinaryCoder$ cd /Applications/MAMP/conf/php5.4.8 
Binarys-MacBook-Air:php5.4.8 BinaryCoder$ ./configure --with-mysql=/Applications/MAMP/Library --with-apxs2=/Applications/MAMP/Library/bin/apxs --with-gd --with-jpeg-dir=/Applications/MAMP/Library --with-png-dir=/Applications/MAMP/Library --with-zlib --with-freetype-dir=/Applications/MAMP/Library --prefix=/Applications/MAMP/bin/php/php5.4.4 --exec-prefix=/Applications/MAMP/bin/php/php5.4.4 --sysconfdir=/Applications/MAMP/bin/php/php5.4.4/conf --with-config-file-path=/Applications/MAMP/bin/php/php5.4.4/conf --enable-ftp --enable-gd-native-ttf --with-bz2=/usr --with-ldap --with-mysqli=/Applications/MAMP/Library/bin/mysql_config --with-t1lib=/Applications/MAMP/Library --enable-mbstring=all --with-curl=/Applications/MAMP/Library --enable-sockets --enable-bcmath --with-imap=shared,/Applications/MAMP/Library/lib/imap-2007f --enable-soap --with-kerberos --enable-calendar --with-pgsql=shared,/Applications/MAMP/Library/pg --enable-exif --with-libxml-dir=/Applications/MAMP/Library --with-gettext=shared,/Applications/MAMP/Library --with-xsl=/Applications/MAMP/Library --with-pdo-mysql=/Applications/MAMP/Library --with-pdo-pgsql=shared,/Applications/MAMP/Library/pg --with-mcrypt=shared,/Applications/MAMP/Library --with-openssl --enable-zip --with-iconv=/Applications/MAMP/Library --without-iconv
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for a sed that does not truncate output... /usr/bin/sed
checking build system type... i386-apple-darwin12.2.0
checking host system type... i386-apple-darwin12.2.0
checking target system type... i386-apple-darwin12.2.0
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking how to run the C preprocessor... cc -E
checking for icc... no
checking for suncc... no
checking whether cc understands -c and -o together... yes
checking how to run the C preprocessor... cc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking whether ln -s works... yes
checking for system library directory... lib
checking whether to enable runpaths... yes
checking if compiler supports -R... no
checking if compiler supports -Wl,-rpath,... yes
checking for gawk... no
checking for nawk... no
checking for awk... awk
checking if awk is broken... no
checking for bison... bison -y
checking for bison version... 2.3 (ok)
checking for re2c... no
configure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.
checking whether to enable computed goto gcc extension with re2c... no
checking whether cc supports -no-cpp-precomp... yes
checking whether to force non-PIC code in shared modules... no
checking whether /dev/urandom exists... yes
checking for pthreads_cflags... 
checking for pthreads_lib... 

Configuring SAPI modules
checking for AOLserver support... no
checking for Apache 1.x module support via DSO through APXS... no
checking for Apache 1.x module support... no
checking whether to enable Apache charset compatibility option... no
checking for Apache 2.0 filter-module support via DSO through APXS... no
checking for Apache 2.0 handler-module support via DSO through APXS... 

Sorry, I cannot run apxs.  Possible reasons follow:

1\. Perl is not installed
2\. apxs was not found. Try to pass the path using --with-apxs2=/path/to/apxs
3\. Apache was not built using --enable-so (the apxs usage page is displayed)

The output of /Applications/MAMP/Library/bin/apxs follows:
cannot open /Applications/MAMP/Library/build/config_vars.mk: No such file or directory at /Applications/MAMP/Library/bin/apxs line 217.
configure: error: Aborting
Binarys-MacBook-Air:php5.4.8 BinaryCoder$ 
```

我的错误是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T04:02:12.407

MAMP 仅支持以下程序和库：

*   Apache HTTP 服务器 2.2.22
*   PHP 5.2.17
*   PHP 5.3.14（仅限 MAMP PRO）
*   PHP 5.4.4
*   MySQL 5.5.25
*   phpMyAdmin 3.5.1
*   SQLiteManager 1.2.4
*   替代 PHP 缓存 (APC) 3.1.9
*   卷曲 7.24.0
*   eAccelerator 0.9.6.1
*   外籍 XML 解析器 2.0.1
*   自由类型 2.4.8
*   获取文本 0.18.1.1
*   JPEG 8D
*   libiconv 1.14
*   利比登 1.17
*   libmcrypt 2.6.8
*   libpng 1.5.7
*   libxml2 2.7.8
*   libxslt 1.1.26
*   Sablotron XML 处理器 1.0.3
*   t1lib 5.1.2
*   XCache 1.2.2
*   XCache 1.3.2
*   Xdebug 2.2.0
*   PHP/YAZ 1.0.14
*   亚兹 4.0.1

此更新已在下载页面可用，此处 php 5.4.8 不可用

# php - 使用时间戳对数组进行排序？

> ID：13469932
> 
> 赞同：6
> 
> 时间：2012-11-20T09:17:06.177
> 
> 标签：php, arrays, date, sorting, timestamp

我有一组看起来像这样的时间戳：

```
2012-11-19 19:45 
```

我需要按日期对它们进行排序。如果我可以获得日期的 unix 时间戳，我可以进行冒泡排序或其他操作，但我不知道是什么函数给了我这个。我查看了 strtotime 但它不会让我通过日期格式。我也不确定冒泡排序是最好的方法。

有什么建议么？

数组示例：

另外，对不起，我应该提到它在“show_date”中。

```
Array
(
    [15] => Array
        (
            [show_date] => 2012-11-19 10:40
        )

    [16] => Array
        (
            [show_date] => 2012-11-20 10:40
        )

    [17] => Array
        (
            [show_date] => 2012-11-21 10:40
        )

    [18] => Array
        (
            [show_date] => 2012-11-22 10:40
        )

) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T09:19:02.030

无需过于复杂。只需使用内置`sort`函数：

```
sort($timestamp_array); 
```

**您不需要转换为 UNIX 时间戳，因为字符串采用标准的“ISO 可排序日期”格式。**这意味着如果您对字符串进行排序，日期将按正确的顺序排列。

这是一个`php -a`展示其工作原理的会话：

```
php > $ts = array('1986-01-31 12:11', '2012-01-01 13:12', '1980-10-10 12:00');
php > sort($ts);
php > echo var_export($ts);
array (
  0 => '1980-10-10 12:00',
  1 => '1986-01-31 12:11',
  2 => '2012-01-01 13:12',
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:19:55.850

您可以使用 PHP 标准排序对其进行排序。请参阅[排序数组](http://php.net/manual/en/array.sorting.php)

```
asort($timestamps); 
```

对于您的示例，您可以定义一个比较函数

```
function cmp_show_date($a, $b)
{
    if ($a['show_date'] == $b['show_date']) {
        return 0;
    }

    return ($a['show_date'] < $b['show_date']) ? -1 : 1;
} 
```

并在[usort中使用它](http://www.php.net/manual/en/function.usort.php)

```
usort($timestamps, 'cmp_show_date'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:20:51.947

您可以使用[usort](http://uk1.php.net/manual/fr/function.usort.php) () 和[strtotime](http://uk1.php.net/manual/fr/function.strtotime.php)的组合，但我宁愿使用[DateTime](http://uk1.php.net/manual/fr/book.datetime.php)类及其[getTimestamp](http://uk1.php.net/manual/fr/datetime.gettimestamp.php)方法，因为它可以处理时区和多种格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T09:18:54.953

您不需要日期格式来传递该特定日期。当您通过`strtotime('2012-11-19 19:45');`时，它将返回 UNIX 时间戳。

**编辑：**

```
$arr = array();
foreach ($dates as $k => $v) {
    $arr[$k]  = strtotime($v['date']);//or $k if your date is the index
}

array_multisort($arr, SORT_ASC, $dates); 
```

# javascript - 使用多个参数动态调用 javascript 函数

> ID：13469937
> 
> 赞同：-1
> 
> 时间：2012-11-20T09:17:19.747
> 
> 标签：javascript, jquery, ajax, javascript-events

如何动态调用此函数？如何在此动态调用的大括号内动态传递参数？

```
function a(b,c,d){
}

var functionName = 'a';
window [functionName](); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:21:56.177

嗯，它比你想象的要简单得多

```
var f = function (a, b, c) {...};

var a = ...,
    b = ...,
    c = ...;
//to call a function do
f(a,b,c); 
//or
f.call(null, a, b, c);
//or
f.apply(null, [a,b,c]); 
```

# java - 在java中散列json

> ID：13469938
> 
> 赞同：1
> 
> 时间：2012-11-20T09:17:21.443
> 
> 标签：java, hash, cryptography, hmac, grooveshark

我正在尝试连接到 Grooveshark api。这是签署请求的 Grooveshark 指南：http: [//developers.grooveshark.com/tuts/public_api](http://developers.grooveshark.com/tuts/public_api)

这就是我签署数据的方式。但我得到错误：“签名无效”。我应该形成 JsonObject 还是数据可以是字符串？

```
String data = "{\"method\":\"getArtistSearchResults\",\"parameters\":{\"query\":\"adele\"},\"header\":{\"wsKey\":\"concertboom\"}}";

String key = "XXXXX";

SecretKeySpec keySpec = new SecretKeySpec(key.getBytes(), "HmacSHA1");
Mac mac = Mac.getInstance("HmacMD5");
mac.init(keySpec);
byte[] result = mac.doFinal(data.getBytes());

BASE64Encoder encoder = new BASE64Encoder();

signature = encoder.encode(result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:25:37.130

如果我们要查看[http://developers.grooveshark.com/docs/public_api/v3/](http://developers.grooveshark.com/docs/public_api/v3/)，以下代码应该可以工作：

```
 private static final String EXPECTED_SIGNATURE = "cd3ccc949251e0ece014d620bbf306e7";

    @Test
    public void testEnc() throws NoSuchAlgorithmException, InvalidKeyException {
        String key = "key";
        String secret = "secret";
        String payload = "{'method': 'addUserFavoriteSong', 'parameters': {'songID': 0}, 'header': {'wsKey': 'key', 'sessionID': 'sessionID'}}";

        String signature = getHmacMD5(payload, secret);
        assertEquals(EXPECTED_SIGNATURE, signature);

    }

    public static String getHmacMD5(String payload, String secret) {
        String sEncodedString = null;
        try {
            SecretKeySpec key = new SecretKeySpec((secret).getBytes("UTF-8"), "HmacMD5");
            Mac mac = Mac.getInstance("HmacMD5");
            mac.init(key);

            byte[] bytes = mac.doFinal(payload.getBytes("UTF-8"));

            StringBuffer hash = new StringBuffer();

            for (int i=0; i<bytes.length; i++) {
                String hex = Integer.toHexString(0xFF &  bytes[i]);
                if (hex.length() == 1) {
                    hash.append('0');
                }
                hash.append(hex);
            }
            sEncodedString = hash.toString();
        }
        catch (UnsupportedEncodingException e) {}
        catch(InvalidKeyException e){}
        catch (NoSuchAlgorithmException e) {}
        return sEncodedString ;
    } 
```

# string - 替换字符串中的字符

> ID：13469939
> 
> 赞同：25
> 
> 时间：2012-11-20T09:17:22.167
> 
> 标签：string, windows, batch-file, character

我正在尝试用另一个字符替换文本字符串中一个字符的所有实例，但我没有成功。

假设文本是

```
cat rat mat fat 
```

我希望脚本替换所有`t's to p's`

```
cap rap map fap 
```

我所拥有的是以下内容，但它似乎对我没什么用。

```
SET /P MY_TEXT=ENTER TEXT:

SET T2P=P

SET NEW_TEXT=%TEXT=:T!T2P!%

MSG * %NEW_TEXT% 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-07-20T06:50:55.263

Try this

```
setlocal 
set string=cat rat mat fat
set string=%string:t=p% 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-20T09:28:35.980

你把`=`标志放错地方了。尝试：

```
setlocal enabledelayedexpansion
set /P MY_TEXT=ENTER TEXT:
SET T2P=P
set NEW_TEXT=%MY_TEXT:T=!T2P!%
MSG * %NEW_TEXT% 
```

您也可以反过来进行扩展，即

```
set NEW_TEXT=!MY_TEXT:T=%T2P%! 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-20T09:27:19.560

你可以像这样使用'sed'：

```
echo "cat rat mat fat" | sed 's/t/p/g'  # outputs "cap rap map fap" 
```

# javascript - 在页面选项卡中发送请求

> ID：13469940
> 
> 赞同：0
> 
> 时间：2012-11-20T09:17:24.607
> 
> 标签：javascript, facebook-javascript-sdk

我正在尝试在**页面选项卡应用程序**中发送请求。

我发送的请求是一条简单的消息，本质上应该允许用户访问我的页面并最终访问应用程序页面。

该请求应显示一条消息，但正在发送我不想发送的“立即尝试”消息。

例如

[http://cl.ly/image/0F202a2r2Z1r](http://cl.ly/image/0F202a2r2Z1r)

此外，用户被重定向到的 URL 如下所示

[http://cl.ly/image/2M1s0f1h1J1S](http://cl.ly/image/2M1s0f1h1J1S)

正确的网址应该是：facebook.com/pages/xxxxx/472145392820013?sk=app_492093050813464

到目前为止，这是我的代码

```
<script src="http://connect.facebook.net/en_US/all.js"></script>

<script>

  FB.init({
    appId  : 'xxxxxxx',cookie:true, 
        status:true, xfbml:true ,
    frictionlessRequests: true
  });

  function sendRequestViaMultiFriendSelector() {
    FB.ui({
      message: 'My Great Request',
      method: 'apprequests',
      redirect_uri: 'http://google.com',
    }, requestCallback);
  }

  function requestCallback(response) {
    alert(response);
  }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:37:45.917

你不能那样做。方法`apprequests`将始终将客户端重定向到您的应用程序画布页面。解决方案。您可以检查客户端是否正在查看您的画布页面（由 facebook 重定向），然后将客户端重定向到您的页面选项卡：

```
<script>
  (function(w){
    w.open("//url_to_your_page_tab", "_top");
  })(window);
</script> 
```

# wordpress - 文本编辑器 wordpress 网站

> ID：13469945
> 
> 赞同：0
> 
> 时间：2012-11-20T09:17:44.467
> 
> 标签：wordpress, phpmyadmin, text-editor

我有一个关于文本编辑器的问题。如果您想在您的 wordpress 网站上添加帖子。您可以使用 wordpress-admin-page 上的文本编辑器来执行此操作。我已经建立了自己的系统来将帖子（新闻文章）添加到网站（没有 wordpress）。此时我必须将它们手动添加到数据库（phpmyadmin）中，但我想知道是否可以创建一个编辑器（带有一些代码）。对于我和不理解这一点的人来说，用斜体/粗体设置东西会容易得多。我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:26:45.293

尝试使用 CKEditor。[在此处](http://ckeditor.com/)下载（不适用于 WP）并将其用作 Wordpress 之外的文本编辑器。

# jquery - jQuery：使用 AJAX 调用更改按钮类

> ID：13469947
> 
> 赞同：1
> 
> 时间：2012-11-20T09:17:49.137
> 
> 标签：jquery, ajax

我正在建立一个 Like/Unlike 系统，我有一个按钮，它有一个类，如果我单击它，数据将插入数据库中，并且类更改为不同。

与假设拉另一个 ajax 调用不同，它删除了实际的喜欢但它不工作，当类改变它时，它会执行类似的类假设做的事情，并且它只有在我刷新页面时才有效。

php代码

```
<div class="btn-group pull-right">
<?php
    $like = '<button class="btn btn-primary btn-small like" data-like="'.$user->id.'">
        <i class="icon-thumbs-up icon-white"></i> Like
    </button>';  
    foreach ($user->likes as $likes) {
        if($likes['liked_by'] == Session::get('sentry_user')) {
          $like = '<button class="btn btn-primary btn-small unlike" data-like="'.$user->id.'">
            <i class="icon-thumbs-down icon-white"></i> Unlike
            </button>'; 
            break 1;
         }
    }
    echo $like; 
 ?>
</div> 
```

jQuery

```
$('button.like').bind('click', function(){
    var likeId = $(this).data('like');
    $.ajax({
        url: siteUrl + 'profile/like',
        type: "post",
        data: {user_id: likeId},
        dataType: "json",
        context: this,
        beforeSend: function()
        {
            $(this).addClass('disabled');
        },
        success: function(data)
        {
            if(data.status == "like") {
                $(this).removeClass('like')
                .addClass('unlike')
                .append()
                .html('<i class="icon-thumbs-down icon-white"></i> Unlike');
            }
        },
        complete: function()
        {
            $(this).removeClass('disabled');
        }
    });

});

$('button.unlike').bind('click', function(){
    var likeId = $(this).data('like');
    alert('you are about to unlike');

}) 
```

只是在我用它进行ajax调用之前对一个例子进行了不同的警报来测试它。

所以云有人给我提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:45:12.827

你也可以`$(selector).toggleClass();`像这样使用：

jQuery：

```
$('button.like,button.unlike').on('click',function(){
    $.ajax(
        ...
        $(this).toggleClass('like unlike');
    );
}) 
```

这是一个[jsbin](http://jsbin.com/oluzik/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:27:15.320

我在我的应用程序上做了类似的事情，我使用了这个逻辑：

html:

```
<a class="like" onclick="like($(this))"></a> 
```

js：

```
 function like(_element){

    if($(_element).hasClass('unlike')){

$.ajax(); //do unlike
    $(_element).removeClass('unlike'); // this goes inside the success:function(){} of the ajax call

}else{

     $.ajax(); //do like    
     $(_element).addClass('unlike'); // this goes inside the success:function(){} of the ajax call

}

    } 
```

您也可以重构此示例以仅使用 1 个 ajax 调用，您将拥有更少的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T03:28:09.780

您可以使用像[http://phery-php-ajax.net](http://phery-php-ajax.net)这样的库，它可以让您的代码保持干燥，并且您可以重用代码而无需重新绑定单击事件：这适用于通过添加的所有按钮ajax 并且可以在任何地方重用

`data-remote`是远程函数的名称，在本例中为 action。它使用事件委托工作，因此无需手动将点击事件绑定到按钮

```
<div class="btn-group pull-right">
<?php
$like = '<button data-remote="action" class="btn btn-primary btn-small like" data-args="'.Phery::args(array('id' => $user->id, 'perform' => 'like')).'">
    <i class="icon-thumbs-up icon-white"></i> Like
</button>';  
    foreach ($user->likes as $likes) {
       if($likes['liked_by'] == Session::get('sentry_user')) {
         $like = '<button data-remote="action" class="btn btn-primary btn-small unlike" data-args="'.Phery::args(array('id' => $user->id, 'perform' => 'unlike')).'">
         <i class="icon-thumbs-down icon-white"></i> Unlike
         </button>'; 
         break 1;
      }
    }
    echo $like; 
  ?>
</div> 
```

你喜欢/不喜欢的回调

```
// in your profile/like

function action($data){
  $r = new PheryResponse;
  // $data['id'] got the ID of the like
  if ($data['perform'] === 'like'){
    $r
    ->this()
    ->removeClass('like')
    ->addClass('unlike')
    ->phery('set_args', array('id' => $data['id'], 'perform' => 'unlike'))
    ->html('<i class="icon-thumbs-down icon-white"></i> Unlike'); // exchange the data
  } elseif ($data['perform'] === 'unlike'){
    $r
    ->this()
    ->removeClass('unlike')
    ->addClass('like')
    ->phery('set_args', array('id' => $data['id'], 'perform' => 'like'))
    ->html('<i class="icon-thumbs-up icon-white"></i> Like'); // exchange the data
  }
  return $r;
}

Phery::instance()->set(array(
  'action' => 'action'
))->process(); 
```

# java - 设置 Linux 桌面/GUI 环境

> ID：13469949
> 
> 赞同：3
> 
> 时间：2012-11-20T09:17:59.700
> 
> 标签：java, linux-kernel, desktop, embedded-linux

`Android`建立在 a 之上`Linux kernel`，大多数 Linux 系统都使用桌面环境，如,`GNOME`等。`KDE``LXDE`

我已经编译了 Linux 内核和最小的根文件系统构建`busybox`，`arm cross compiler`工具链和`arm-J2SE`. 目前我有基本的`Command Line Interface`. 现在我想使用桌面环境（**启用鼠标并处理鼠标或触摸屏输入/事件**）。因为我的 java 命令行代码运行良好，但是当我使用`swing`或`awt`应用程序时，它会显示此异常。

```
Exception in thread "main" java.awt.HeadlessException at
         java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:207)
at java.awt.Window.<init>(Window.java:535)
at java.awt.Frame.<init>(Frame.java:420)
at javax.swing.JFrame.<init>(JFrame.java:224)
at Gui.main(Gui.java:7) 
```

只是我看看[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/HeadlessException.html)，它显示，

```
public class HeadlessException
        extends UnsupportedOperationException 
```

`Thrown when code that is dependent on a keyboard, display, or mouse is called in an environment that does not support a keyboard, display, or mouse.`

基本上它需要一些窗口管理或类似 GUI 的环境。我发现很少有用于构建 GUI 环境的库`XLIB/X11,SDL`，可以管理这些鼠标和触摸屏事件。谁能告诉我从哪里开始实现我的目标。很少有 Linux 系统使用`startx`命令来启用 GUI 环境，然后带来桌面、窗口、鼠标等。我需要这样的东西来运行我的 java gui 应用程序。谁能带我一条路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:56:35.047

`I know every Linux system should have a desktop environment like GNOME, KDE, LXDE etc.`

那是错误的。考虑服务器或嵌入式系统（不是智能手机），为什么它需要 UI？操作系统内核不必提供 GUI。

下面是Android架构/层库，还有`Surface Manager`++是Android的`Window Manager`桌面*环境*。`View System`

 *![在此处输入图像描述](../Images/d74c4a141479dded00bbe4e18c611da2.png)

有关 Linux 和图形系统的更多信息，请查看这个[SO question](https://stackoverflow.com/questions/12717138/what-is-linuxs-native-gui-api)。

对于您的 Java 异常，您使用的是无头 Java 环境，并且不支持根据无头 Java 环境的定义尝试使用 Swing/AWT。

`How can I setup a GUI environment that supports mouse,keyboard or other inputs?`

您正在尝试将Android*移植*到您的设备，如果您的设备没有正在进行的 Android 移植工作，则需要深入了解它所拥有的外围设备以及一般的 Android 系统。这些信息可以在网上大量获得，但这并不是一项简单的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:58:10.703

首先，Linux 发行版不需要 GUI。或者正如你必须说的 - X Window System。

> > 谁能告诉我Android使用的是哪个桌面环境？

没有任何。Android 不使用 X。

> > 我是否必须实施桌面环境来支持键盘和鼠标？

我不知道。我不知道你想要达到什么目的。如果您想查看您的程序是否适用于 Android，请查看 Android SDK。您可能想查看 Android 模拟器并在编写代码时牢记 SDK。*

# sql-server - Linq左外连接查询

> ID：13469955
> 
> 赞同：0
> 
> 时间：2012-11-20T09:18:19.250
> 
> 标签：sql-server, linq

如何将此 sql 查询转换为 Linq 查询？

```
select * 
from setupUOMs as su 
LEFT OUTER JOIN scmSKUUoMs as ssu
   on su.UoMID != ssu.UoMID
where ssu.SKUID = 446 and su.UMTypeID = 5 
```

以下是 linq 查询。

```
from c in setupUOMs
        join o in scmSKUUoMs
           on c.UOMID equals o.UoMID into sr
        from x in sr.DefaultIfEmpty()
        where x.SKUID == 446 
        select x 
```

在上面的查询中，到目前为止我只提取了连接号，但我想要的是选择左表的不相等记录，但我能够显示连接记录。它只返回左表的记录，而我的结果基于两列。在 where 子句中，我可以访问来自左表的 x.SKUID，但无法访问来自右表的 x.UMTypesID（意味着没有返回右表中的列，我可以在其上创建条件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:16:46.990

看看这个 LEFT JOIN LINQTOSQL 示例。

[http://www.devcurry.com/2011/01/linq-left-join-example-in-c.html](http://www.devcurry.com/2011/01/linq-left-join-example-in-c.html)

也许会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:37:22.027

具有不等于条件的联接不是联接，而是不包括内部联接记录的笛卡尔积。像您一样进行查询可能有正当的理由，但总是存在导致结果集因记录数量而爆炸的风险。

所以让我们假设条件确保结果是有意义的，那么你可以这样做：

```
from su in setupUOMs
from ssu in scmSKUUoMs // from .. from is a Cartesian product
where su.UOMID != ssu.UoMID
                && ssu.SKUID == 446 
                && su.UMTypeID == 5
select new { su.Prop1, ssu.Prop2, ... } 
```

# c# - 从子表单更改父表单的标签文本

> ID：13469957
> 
> 赞同：3
> 
> 时间：2012-11-20T09:18:21.117
> 
> 标签：c#, .net

> **可能重复：**
> [从子窗体访问父窗体上的控件](https://stackoverflow.com/questions/4585234/accessing-controls-on-parentform-from-childform)

我有父表单form1和子表单test1我想从父表单中的子表单更改父表单的标签文本我有showresult（）的方法

`public void ShowResult() { label1.Text="hello"; }`

我想`label.Text="Bye";`在按钮单击事件上更改我的子表单 test1 。请提出任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T09:22:34.130

调用子窗体时，`Parent`像这样设置子窗体对象的属性..

```
Test1Form test1 = new Test1Form();
test1.Show(this); 
```

在您的父表单上，将标签文本的属性设置为 as..

```
public string LabelText
{
  get
  {
    return  Label1.Text;
  }
  set
  {
    Label1.Text = value;
  }
} 
```

从您的子表单中，您可以获得这样的标签文本..

```
((Form1)this.Owner).LabelText = "Your Text"; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T09:24:04.077

毫无疑问，有很多捷径可以做到这一点，但在我看来，一个好的方法是从子表单中引发一个事件，请求父表单更改显示的文本。父窗体应在创建子窗体时注册此事件，然后可以通过实际设置文本来响应它。

所以在代码中，这看起来像这样：

```
public delegate void RequestLabelTextChangeDelegate(string newText);

public partial class Form2 : Form
{
    public event RequestLabelTextChangeDelegate RequestLabelTextChange;

    private void button1_Click(object sender, EventArgs e)
    {
        if (RequestLabelTextChange != null)
        {
            RequestLabelTextChange("Bye");
        }
    }        

    public Form2()
    {
        InitializeComponent();
    }
}

public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Form2 f2 = new Form2();
        f2.RequestLabelTextChange += f2_RequestLabelTextChange;
    }

    void f2_RequestLabelTextChange(string newText)
    {
        label1.Text = newText;
    }
} 
```

它有点冗长，但它使您的孩子形式与对其父母的任何知识脱钩。这是一个很好的可重用模式，因为这意味着子表单可以在另一个主机（没有标签）中再次使用而不会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:22:46.240

尝试这样的事情：

```
Test1Form test1 = new Test1Form();
test1.Show(form1);

((Form1)test1.Owner).label.Text = "Bye"; 
```

# jquery - PhoneGap (Cordova.js) 和 JQuery.Ajax 不能一起工作

> ID：13469959
> 
> 赞同：3
> 
> 时间：2012-11-20T09:18:25.813
> 
> 标签：jquery, cordova

我已经使用针对 Andriod 4.12 的 Phonegap+Jquery 构建了一个 html 页面。

我的业务需求是使用 cordova.js 的相机 API 拍摄一张照片，然后将此拍摄的照片发布到 ASMX Web 服务。

问题：当我添加对 Cordova.js 的引用并运行应用程序时，我在 LogCat “未捕获的 ReferenceError：$ 未定义”中收到错误，但如果我删除对 cordova.js 的引用，一切正常，我可以发布数据到 Web 服务。

我附上我的代码以供参考。

```
<!DOCTYPE html>
<html>  
<head>    
<title>Capture Photo</title>   
<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery.js"></script> 

<script type="text/javascript">

 var varType;
 var varUrl;
 var varData;
 var varContentType;
 var varDataType;
 var varProcessData;

  function InsertDetails() {
        alert('Inserting Details');
        varType = "POST";
        varUrl = "http://mobile.comp.com/service/userservice.asmx/InsertDetails";
        varContentType = "application/json; charset=utf-8";
        varDataType = "json";
        varProcessData = true;

        var uname = document.getElementById('txtname');
        var pwd = document.getElementById('txtpwd');
        CallService(uname.value, pwd.value);

        return true;
    }

    //Generic function to call AXMX/WCF  Service        
    function CallService(u, p) {
        $.ajax({ type: varType, url: varUrl, data: '{"username":"' + u + '","password":"' + p + '"}', contentType: varContentType, dataType: varDataType, processdata: varProcessData, success: function (msg) { ServiceSucceeded(msg); }, error: ServiceFailed });
    }

    function ServiceSucceeded(result) {

        var myObject = eval('(' + result.d + ')');
        alert(myObject);
    }
    function ServiceFailed(result) {
        alert('Service call failed: ' + result.status + '' + result.statusText);
        varType = null; varUrl = null; varData = null; varContentType = null; varDataType = null; varProcessData = null;
    } 
</script>
</head>
<body>
<input type=text id=txtname value=John />
<input type=text id=txtpwd value=Doe /> 
<input type="button" id="btnSearch" onclick="InsertDetails();" style="cursor: pointer;
    margin-top: 8px; vertical-align: top" value="Insert Details" />

     <button id=btn1>Capture Photo</button> 

</body>
</html> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:38:48.393

对类似问题进行一些搜索会显示一些可能的答案。

1) 在本地而不是从 CDN 加载 jQuery。您似乎已经这样做了，但我会为其他有类似问题的人提及它。

[在装有 android 3.2 的华硕平板电脑上找不到 jQuery 的 $](https://stackoverflow.com/questions/8487657/cant-find-jquerys-on-asus-tablet-with-android-3-2)

2) 告诉 jQuery 允许跨域请求。查看下面链接中的“$.support.cors”和“$.mobile.allowCrossDomainPages”部分。

[https://demos.jquerymobile.com/1.2.0/docs/pages/phonegap.html](https://demos.jquerymobile.com/1.2.0/docs/pages/phonegap.html)

3) 告诉 jQuery 玩得好。可能是 cordova.js 正在使用另一个想要使用 $ 的 JS 库。由于您首先加载cordova，因此其他JS库在jQuery可以之前要求g $。

[http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:41:39.590

感谢尼克的帮助。第三个链接有帮助

最后我的代码工作了

我添加了以下代码行，这对我来说很神奇。

```
jQuery.noConflict(); 
```

之后 JQuery 得到了认可。确保遵循 javascripts 的正确顺序，否则代码将不起作用。

我引用 js 文件的顺序：

1.  对 JQuery.js 的引用（本地添加到项目中）
2.  jQuery.noConflict();
3.  服务调用的 Javascript 代码
4.  参考 Cordova.js
5.  Cordova 相机交互代码

# magento - Magento 产品树定制

> ID：13469961
> 
> 赞同：0
> 
> 时间：2012-11-20T09:18:48.130
> 
> 标签：magento, tree, customization, product, cart

在添加到购物车之前，我需要对 Magento 产品进行定制。我知道 Magento 可以做到这一点，但是我需要以树的方式进行自定义。让我解释。

我有一个产品，有几组按类型分隔的选项。选择选项后，应显示其他配置选项。这意味着我有以下配置树：

*   第 1 组
    *   自定义属性 1
        *   选项1
            *   如果选择了选项 1，则显示自定义属性 A 及其自己的选项
            *   如果选择了选项 1，则显示自定义属性 B 及其自己的选项
        *   选项 2
        *   选项 3
            *   如果选择了选项 3，则显示自定义属性 C 及其自己的选项
            *   如果选择了选项 3，则显示自定义属性 D 及其自己的选项
    *   自定义属性 2
*   第 2 组
    *   自定义属性 3
    *   自定义属性 4
    *   自定义属性 5

在添加到购物车之前，所有内容都必须是可配置和可选择的。更改这些选项时，产品值将发生变化。

这是我想要的一个例子：[http](http://www.1001opticiens.fr/lunettes-de-vue/48-ralph-lauren-rl6017-en-plastique-noir-rose.html) : //www.1001opticiens.fr/lunettes-de-vue/48-ralph-lauren-rl6017-en-plastique-noir-rose.html 只需点击“Choisir ce modele”并配置列表将打开。抱歉，该网站是法语的，但您应该了解大致情况。

这样的事情存在吗？还是我应该从头开始？我在 Prestashop 中发现了类似的东西。是否可以“导入”这样的扩展？（我真的怀疑）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T05:08:49.730

这是可能的，但它需要扩展核心类和相当多的前端 JS 和 phtml 工作。有一个扩展可以做到这一点：http: [//www.magentocommerce.com/magento-connect/advanced-product-options.html](http://www.magentocommerce.com/magento-connect/advanced-product-options.html)

# algorithm - 为什么 Cohen-Sutherland 算法不适用于凹多边形？

> ID：13469965
> 
> 赞同：0
> 
> 时间：2012-11-20T09:19:02.037
> 
> 标签：algorithm, graphics, concave

我的老师说 Cohen Sutherland 算法[http://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland_algorithm](http://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland_algorithm)不能与凹多边形一起使用。我问他为什么，他不能给我答案（我不知道为什么 hew 在这里工作）。

**所以我问你：为什么 Cohen-Sutherland 算法不适用于凹多边形？会出什么问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:35:46.040

来自维基百科的文章：

> 该算法包括、排除或部分包括基于 where 的行：
> 
> *   两个端点都在视口区域中（端点的按位或 == 0）：平凡接受。
> *   ...

看一下[凸性的（非正式）定义](http://en.wikipedia.org/wiki/Convex_set)：

> 如果对于对象内的每一对点，连接它们的直线段上的每个点也在对象内，则该对象是凸的。

您的老师可能正在谈论从凸多边形生成的扫描线，或者将线作为凸多边形的特例。

如果多边形不是凸面，则可以根据端点将凹面区域绘制为填充，因为沿线的任何点都被假定为多边形的一部分。类似的假设适用于文章中的其他要点。

# plone - /var/plone 所有权

> ID：13469970
> 
> 赞同：0
> 
> 时间：2012-11-20T09:19:14.650
> 
> 标签：plone

谁能帮我解决我的问题，我的 /var/plone 文件夹的所有权被意外更改了。谁能告诉我这个文件夹的所有者是谁？可以是 www:root 还是 www-data:root 或 root:root？

顺便说一句，我将其更改为 www:root 并且无法在我的网站上加载某些图像和样式。

每次有人打开该站点时，它都会不断加载和加载，几分钟后它会停止，并且某些图像未加载并且样式未按应有的方式显示。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:57:52.160

查看您的 /etc/passwd 文件以查看您是否有“plone”或“zope”用户 ID。如果是这样，那很可能是您的所有者。如果您使用 sudo 进行安装，“plone”是统一安装程序创建的用户 ID。

另一个需要检查的地方：你的初始化脚本。它应该以拥有大部分 plone 目录的用户身份启动 zope 守护程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:33:53.180

执行 ps auxw 并查看运行 plone 的用户。然后让他读书写字。下次你将运行 buildout 时，权限应该是固定的，至少是在 parts 目录中的那个。

# jquery - 重构一个 jquery 调用

> ID：13469973
> 
> 赞同：0
> 
> 时间：2012-11-20T09:19:20.880
> 
> 标签：jquery, refactoring

我已经为输入按钮的延迟编写了一些代码，并且对此有一些疑问..

编码：

```
$('.button-delay').click(function(){
    var delay = $(this);
    delay.prop('disabled', true).parent().removeClass()
        .addClass('button-inactive');
    setTimeout(function() {
    delay.prop('disabled', false).parent()
            .removeClass('button-inactive').addClass('button-blue');
    }, 8000);
}); 
```

1.  是否有必要声明变量“延迟”？
2.  有没有更好的方法来设置状态“禁用”？
3.  'removeClass' 和 'addClass' 方法是否有更短的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:22:05.220

1：不，你不必。但这是可取的，因为您正在使用 jQuery 对象。

2：没有

3：没有

# ruby - 如何在 Rhomobile 应用程序中添加 ruby 库

> ID：13469981
> 
> 赞同：0
> 
> 时间：2012-11-20T09:19:44.280
> 
> 标签：ruby, pdf, rhomobile

我想使用 Prawn 或 PDFkit 库将 PDF 生成到我的 Rhomobile 应用程序中。请提出流程。

我使用的是 Rhomobile 支持的 pdf_writer，但是在生成的 pdf 中存在包括图像在内的问题。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:39:58.773

使用 pdf_writer 添加图像是可能的，但使用棘手的方法。首先，您需要将该图像作为 blob 数据存储在数据库中，然后通过查询，您需要从该表中获取 blob 数据并需要在 PDF 上打印该 blob 数据。
**注意：**这仅适用于原始 RGB 格式的图像。

# php - 如何在一个请求中为每种类型选择 MAX

> ID：13469990
> 
> 赞同：0
> 
> 时间：2012-11-20T09:20:20.853
> 
> 标签：php, sql

我使用 mysql 5.1。

这是我的数据库架构：

```
id     user_id     type     created_at
1       32          X       2012-11-19
2       32          Y       2012-11-18
3       30          X       2012-11-16
4       32          Z       2012-11-17
5       31          Y       2012-11-13
6       32          Z       2012-11-9 
```

我希望我的 SQL 查询返回每种类型的`user_id`、`type`和最新 的。`created_at`我试图提出这个请求： `SELECT max(type) FROM notification WHERE user_id=34 ORDER BY type`但它只返回最新的`created_at`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:26:02.920

```
select n.id, n.user_id, n.type, m.max_created_at
from notification n
     inner join
     (
         select   type, max(created_at) as max_created_at
         from     notification
         group by type
     ) m  on n.type = m.type and 
             m.max_created_at = n.created_at 
```

请注意，这确实假设没有两条具有相同类型和 created_at 日期的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:26:53.183

您不能在非常简单的查询中执行此操作，因为`GROUP BY`（顺便说一下您在查询中遗漏了）不能保证它不会返回来自多行的混合值。

```
SELECT * FROM notifications AS t1
INNER JOIN (
    SELECT type, MAX(`created_at`) AS max_created_at
    FROM notification
    WHERE user_id=34
    GROUP BY `type`
) AS t2
    ON t1.type = t2.type
        AND t1.created_at = t2.max_created_at 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:24:14.513

以下查询`created_at`为每种类型选择最高的：

```
SELECT type, MAX(created_at) FROM notification GROUP BY type ORDER BY type 
```

不知道你想如何将它与用户结合起来，你的问题不够精确。

以下查询`created_at`为特定用户的每种类型选择最高值：

```
SELECT user, type, MAX(created_at) 
  FROM notification 
 WHERE user = 34
 GROUP BY type, user 
 ORDER BY type, user 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T09:25:17.163

```
SELECT user_id, type, max(created_at) FROM notification WHERE user_id=34 GROUP BY user_id,type ORDER BY type 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T09:25:18.413

```
SELECT max(type) FROM notification WHERE user_id=34 ORDER BY type 
```

试着像这样修改

```
SELECT user_id, type,created_at FROM notification WHERE user_id=34 ORDER BY type 
```

那么如果你想从最新到最旧或从最旧到最新

添加`ASC`或`DESC`订购

# iphone - 图像的 Xml 提要解析器

> ID：13469992
> 
> 赞同：0
> 
> 时间：2012-11-20T09:20:22.187
> 
> 标签：iphone, objective-c, ios, xml, xcode

在我的应用程序中，我使用 XML 提要解析器来获取所有内容。但是我得到了 解析器中包含**的图像的空数组。**

我的解析代码如下：

```
#pragma mark MWFeedParserDelegate

- (void)feedParserDidStart:(MWFeedParser *)parser {

    NSLog(@"Started Parsing: %@", parser.url);

}

- (void)feedParser:(MWFeedParser *)parser didParseFeedItem:(MWFeedItem *)item {
    NSLog(@"Parsed Feed Item: “%@”", item.title);

    if (item) 
    {

 [arr_itemIdentifier addObject:item.identifier];
        [arr_itemTitle addObject:[item.title gtm_stringByUnescapingFromHTML]];
        [arr_itemLink addObject:item.link];
        [arr_itemdate addObject:item.date];

        if( nil != item.updated )
        {
        [arr_itemupdated addObject:item.updated];
        }
        [arr_itemsummery addObject:item.summary];
        NSString *renderedSummary = [item.summary stringByReplacingOccurrencesOfRegex:@"<[^>]*?>"
                                                                           withString:@""];
        [arr_itemRenderedSummary addObject:renderedSummary];
        if( nil != item.content )
        {
            [arr_itemContent addObject:item.content];
        }

    }

    NSLog(@"%@",item.description);
    NSLog(@"item.enclosurs = %@",item.enclosures); // here i got null array so the for loop is not executed
    for( NSDictionary *itemEnclosure in item.enclosures )
    {
        NSString *mimeType = [itemEnclosure objectForKey:@"type"];
        if( [@"video/example" isEqualToString:mimeType] )
        {

        } else if( [@"image/example" isEqualToString:mimeType] )
        {
            NSString *itemAnchor = [itemEnclosure objectForKey:@"url"];
            NSArray *captures = [itemAnchor arrayOfCaptureComponentsMatchedByRegex:DWFeedHTMLImageElementSrcValueRegex];
            if( 0 < captures )
            {
                [arr_imageURL addObject:[itemEnclosure objectForKey:@"url"]];
            }
            [arr_thumbImage addObject:[itemEnclosure objectForKey:@"url"]];

            //feedItem.thumbnailURL = feedItem.imageURL;

        } 

    }

    int k=0;

    NSLog(@"arr_itemContent = %@",item.content);
    NSLog(@"arr_itemdate = %@",item.date);
    NSLog(@"arr_itemIdentifier = %@",item.identifier);
    NSLog(@"arr_itemLink = %@",item.link);
    NSLog(@"arr_itemRenderedSummary = %@",[arr_itemRenderedSummary objectAtIndex:k]);
    NSLog(@"arr_itemsummery = %@",item.summary);
    NSLog(@"arr_itemTitle = %@",item.title);
    NSLog(@"arr_itemupdated = %@",item.updated);

    k++;
}

- (void)viewDidLoad
{
    NSURL *feedURL = [NSURL URLWithString:str_url];
    feedParser = [[MWFeedParser alloc] initWithFeedURL:feedURL];
    feedParser.delegate = self;
    feedParser.feedParseType = ParseTypeFull; // Parse feed info and all items
    feedParser.connectionType = ConnectionTypeAsynchronously;
    [feedParser parse];

} 
```

我得到了除图像之外的所有阵列信息。我还获得了包含以下内容的图片网址：`<p><a href="http://wpcore.mpf.s3.amazonaws.com/wp-content/uploads/2012/11/DDD-2121.jpg">`CONTENTS

通过日志输出`item.content`

# jquery - 带有图像转换的 Jquery 幻灯片

> ID：13469993
> 
> 赞同：2
> 
> 时间：2012-11-20T09:20:31.963
> 
> 标签：jquery, slider, slideshow

我正在寻找一个使用 jquery 的图像幻灯片，类似于[http://sliderjs.org/](http://sliderjs.org/)那里的演示。但不是圈子，而是使用我自己的形象（这将是一匹马）的能力。是否有任何已知的 jquery 滑块允许我这样做？

# java - 并行更新不同的实体属性

> ID：13469999
> 
> 赞同：1
> 
> 时间：2012-11-20T09:21:09.170
> 
> 标签：java, google-app-engine, jdo, objectify

我正在使用 JDO 访问 Datastore 实体。我目前遇到问题，因为不同的进程并行访问相同的实体，我不确定如何解决这个问题。

我有包含值和计算值的实体：（key，value1，value2，value3，计算）

计算发生在单独的任务队列中。用户可以随时编辑这些值。如果更新了这些值，则会将一个新任务推送到覆盖旧计算值的队列中。

我目前遇到的问题是在以下情况下：

1.  用户创建实体
2.  任务开始
3.  用户在其初始条目中发现错误并快速更新实体
4.  任务基于旧数据（来自步骤 1）完成并覆盖整个实体，同时删除新输入的值（来自步骤 3）
5.  用户不高兴

所以我的问题：

*   我可以在步骤 4 中使任务在更新时失败吗？由于最终的一致性，将任务包装在事务中似乎并不能解决所有情况下的这个问题（或者，很可能，我对数据存储事务的理解是错误的）
*   使用低级 setProperty 方法是更新实体的单个字段的唯一方法，这会解决我的问题吗？
*   如果以上都不是，那么处理这样的用例的最佳方法是什么

* * *

背景：

目前，我不介意为了一致性而交易表现。我以后会关心性能。

这是我的第一个 AppEngine 应用程序，因为它是一个学习过程，它没有使用一些最佳实践。我很清楚，事后看来，我应该对我的数据模式进行更长时间和更努力的思考。例如，我的所有实体都没有在合适的地方使用祖先关系。我来自关系背景，这表明。

我正在计划进行一次重大的重构，可能会转向 Objectify，但与此同时，我有一些紧迫的问题需要尽快解决。我想首先完全了解数据存储区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:19:50.667

显然，JDO 为事务提供了乐观并发检查（如果用户启用它），这将防止/减少此类事情的机会。乐观并发同样适用于关系数据存储，因此您可能知道它的作用。

Google 的 JDO 插件显然使用了低级 API setProperty() 方法。日志甚至会告诉您进行了哪些低级别调用（根据 PUT 和 GET）。迁移到其他一些 API 本身并不能解决此类问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:56:16.577

每当您需要在 GAE 中处理写入冲突时，您几乎总是需要事务。然而，它不仅仅是“使用事务”那么简单：

1.  首先，确保可以在事务中定义每个逻辑工作单元。交易有限制；没有祖先就没有查询，只能访问一定数量的实体组。您可能会发现在事务开始之前需要做一些额外的工作（即，查找将参与事务的实体的键）。
2.  确保每个工作单元都是*幂等*的。这很关键。某些工作单元是自动幂等的，例如“将我的电子邮件地址设置为 xyz”。某些工作单元不是自动幂等的，例如“将 5 美元从账户 A 转移到账户 B”。*您可以通过在事务开始之前*创建实体，然后删除事务内的实体来使事务具有幂等性。在交易开始时检查实体是否存在，如果它被删除，只需返回（完成 txn）。
3.  当您运行事务时，`ConcurrentModificationException`在循环中捕获并重试该过程。现在，当任何 txn 发生冲突时，它只会重试直到成功。

这里关于冲突的唯一坏处是它会减慢系统速度并在重试期间浪费精力。但是，您将每秒至少获得一个已完成的事务（如果您有 XG 事务，可能会少一些）吞吐量。

Objectify4 为您处理重试；只需将您的工作单元定义为 run() 方法并使用 ofy().transact() 运行它。只要确保你的工作是幂等的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T21:16:02.000

在我看来，您可以阻止第一个任务更新对象，因为某些值从任务首次启动时发生了变化。

或者您可以在任务请求中嵌入对象的值，以便第二个计算任务将恢复具有一致值和计算成员的对象状态。