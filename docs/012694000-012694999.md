# StackOverflow 问答 12694000-12694999

# selenium - Selenium 服务器错误：无法获取浏览器

> ID：12694001
> 
> 赞同：10
> 
> 时间：2012-10-02T16:03:39.157
> 
> 标签：selenium, internet-explorer-9

我在 Windows 7 上运行 Selenium Standalone Server 2.25，使用 Internet Explorer 9 作为浏览器，每次需要打开浏览器的测试都会出现此错误：

```
Selenium::WebDriver::Error::UnknownError:
       Unable to get browser (WARNING: The server did not provide any stacktrace information)
       Command duration or timeout: 10 milliseconds
       Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:08:56'
       System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0_07'
       Driver info: driver.version: EventFiringWebDriver
       Session ID: 356e9fc8-2d2b-4808-964c-4a1fea7415f9 (org.openqa.selenium.WebDriverException) 
```

我究竟做错了什么？完全相同的信息出现在 Selenium Server 控制台上。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-02T16:03:39.157

为 Internet Explorer 中的所有区域启用保护模式设置后，该错误消失（工具 > Internet 选项 > 安全选项卡）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-06-18T08:30:39.060

**仅对于 IE 11**，您需要在目标计算机上设置一个注册表项，以便驱动程序可以保持与它创建的 Internet Explorer 实例的连接。

对于**32 位**Windows 安装，您必须在注册表编辑器中检查的键是

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BFCACHE 
```

对于**64 位**Windows 安装，密钥是

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BFCACHE 
```

请注意，`FEATURE_BFCACHE`子项可能存在也可能不存在，如果不存在，则应创建子项。重要提示：在此键中，创建一个`DWORD`名为`iexplore.exe`0 的值

[从http://heliumhq.com/docs/internet_explorer](http://heliumhq.com/docs/internet_explorer)下载注册表文件 。

有关此和更多必要的 IE 配置步骤，请参阅[https://code.google.com/p/selenium/wiki/InternetExplorerDriver](https://code.google.com/p/selenium/wiki/InternetExplorerDriver)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T15:54:35.350

我通常的策略是将需要自动化测试的站点单独添加到 IE 中的“受信任站点”。

转到工具 > Internet 选项 > 安全性，然后单击受信任的站点和站点按钮并单独添加所需的网站。

如果您被锁定，可能更容易通过这种方式绕过您的 IT 经理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-07T01:53:06.400

我在 Eclipse 中使用 Selenium，我的解决方案是以管理员身份运行 IDE

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-08T08:29:16.320

我已经添加了我试图在可信站点中访问的 url，它在尝试了所有周转后对我有用

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-09-01T06:40:09.920

你必须试试这个...

```
DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();

capabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, true);
System.setProperty("webdriver.ie.driver",IE_DRIVER_PATH);
driver = new InternetExplorerDriver(capabilities); 
```

# javascript - $('#parent .childclass1, #parent .childclass2').css(something) 或 $('#parent').children().css(something) 哪个更快？

> ID：12694002
> 
> 赞同：-3
> 
> 时间：2012-10-02T16:03:40.610
> 
> 标签：javascript, jquery

我认为标题是解释性的。由于以前的问题，我变得痴迷于性能，并试图让一切都达到最高速度。当我发现 $('#parent').find('li') 比 $('#parent li') 快时，我觉得我什么都不知道了......所以我的问题是：

什么更快

```
$('#parent .childclass1, #parent .childclass2').css(something) 
```

或者

```
$('#parent').children().css(something)? 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:27:13.807

第二个，因为它只做一个非常快的 dom 查询，然后只引用一个 NodeList。而不是打两个`document.getElementById`电话，然后检查所有孩子是否有课。第二个会快得多。第一个比第二个[慢大约 60%](http://jsperf.com/comparing)。

# java - 来自多台服务器上的许多用户的 Javamail

> ID：12694007
> 
> 赞同：0
> 
> 时间：2012-10-02T16:03:49.093
> 
> 标签：java, smtp, jakarta-mail

我希望在许多用户使用他们各自的 SMTP 服务器发送许多电子邮件的情况下使用 Javamail。（是的，它类似于垃圾邮件框架，但它是合法的商业产品）。我想知道 Javamail 是否支持这种情况，因为看起来我必须为每个用户创建一个单独的会话。所以我的问题是：

1.  我是否正确，每个用户都需要一个 Javamail 会话？
2.  会话是否足够轻，可以创建和清理，因为它们在我的应用程序中每个用户都是短暂的？
3.  这种设计是否有效，或者 javamail 在负载下会严重崩溃吗？在这种情况下会签出许多会话等？
4.  如果对 3 表示“是”，是否有一个明显的库我应该使用它来代替在这种情况下效果更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:20:29.247

1.  是的，每个用户使用一个会话是最简单的。
2.  会话主要包含配置信息，因此它们比连接更轻，例如。
3.  这在很大程度上取决于您的环境和性能要求。
4.  如果您发现为每个用户创建一个 Session 成本太高，您可以使用单个 Session 并自己管理传输对象，在每个 SMTPTransport 对象上设置您需要的配置。在任何一种情况下，主要成本都可能是连接（由传输对象表示）。您可能需要随时限制活动连接的数量。

# moq - Moq 引发异常以进行验证

> ID：12694009
> 
> 赞同：0
> 
> 时间：2012-10-02T16:03:54.773
> 
> 标签：moq

我是 Mocking 的新手，但这一定是我所缺少的非常基本的东西：

下面的测试代码产生一个异常：

> 预期在模拟上至少调用一次，但从未执行过：x => x.DeleteProducts(._products)\r\n\r\n配置设置：\r\nx => x.DeleteProducts(._products), Times。从不\r\n\r\n执行的调用：\r\nIProductRepository.DeleteProducts(System.Collections.Generic.List`1[WebApiDemo.DataAccessLayer.Product])

我逐步执行了控制器方法，它似乎确实调用了 DeleteProducts 方法......

```
 // Arrange
  IEnumerable<Product> _products = Helpers.ProductHelpers.CreateProducts(_numberProducts);

  Mock<IProductRepository> _productRepository = new Mock<IProductRepository>();

  _productRepository.Setup(x => x.DeleteProducts(_products));

  ProductsController controller = new ProductsController(_productRepository.Object);

  // Act
  controller.Destroy(_productViewModels);  // Destroy calls DeleteProducts

  // Assert
  _productRepository.Verify(x => x.DeleteProducts(_products)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:07:57.187

`DeleteProducts(_products);`退货无效吗？我认为它确实如此，所以你需要把它放在它`.Verifiable()`的末尾`.Setup()`。

有了这个，它应该可以正常运行，虽然我不确定你为什么有`Times.Never()`而不是`Times.Once()`??

我还主张在 Setup 调用中使用`It.IsAny<T>`而不是特定的集合，例如：

```
MyMock.Setup(x => x.MyMethod(It.IsAny<IEnumerable<Widget>>)).Verifiable() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:00:24.620

除非您将模拟行为设置为**严格**，否则不需要设置。您不会从 Delete 中返回任何内容。调用验证就足够了。

有些事情从代码中并不完全明显。

存储库删除**产品**，但控制器销毁**productviewmodels**。

在最小起订量 4 中，测试应该有效，如果

*   _products 中的每个产品都有一个产品视图模型
*   Controller.Destroy 方法以与 _products 相同的顺序从视图模型中获取产品

我会检查 _productViewModels 是否与 _products 1:1 匹配，并在调用 Delete() 之前检查 Destroy() 如何从视图模型中提取产品

我不会使用 IsAny>() 因为您想检查这些特定产品是否被删除而不是任何其他产品。

```
[TestClass]
public class Verifying {

    public interface IProductRepository {
        void Delete(IEnumerable<Product> products);
    }

    public class ProductController {
        private IProductRepository _repository;
        public ProductController(IProductRepository repository) {
            _repository = repository;
        }
        public void Destroy(IEnumerable<Product> products) {
            _repository.Delete(products);
        }
        public void Destroy(IEnumerable<ProductViewModel> productViewModels) {
            _repository.Delete(productViewModels.Select(vm => vm.Product));
        }
    }

    public class Product {
    }

    public class ProductViewModel {
        public Product Product { get; set;}
    }

    static Verifying() {
        sProducts = new List<Product> { new Product(), new Product(), new Product() };
        sProductViewModels = new List<ProductViewModel>(sProducts.Select(p => new ProductViewModel { Product = p }));
    }

    private static List<Product> sProducts;
    private static List<ProductViewModel> sProductViewModels;

    private Mock<IProductRepository> _mockRepository;
    private ProductController CreateController() {
        _mockRepository = new Mock<IProductRepository>();
        return new ProductController(_mockRepository.Object);
    }

    [TestMethod]
    public void DestroyingProducts() {
        var controller = CreateController();
        controller.Destroy(sProducts);
        _mockRepository.Verify(mk => mk.Delete(sProducts));
    }

    [TestMethod]
    public void DestroyingProductViewModels() {
        var controller = CreateController();
        controller.Destroy(sProductViewModels);
        _mockRepository.Verify(mk => mk.Delete(sProducts));
    }

} 
```

# javascript - jQuery printElement 不打印整个图像

> ID：12694014
> 
> 赞同：0
> 
> 时间：2012-10-02T16:04:05.117
> 
> 标签：javascript, jquery, printing, base64

我正在使用[printElement](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/)打印 base64 编码图像 (1000 x 5883)。

一切都很好，除了当图像本身大约 4/5 页长时只会打印一页。

不确定是不是因为我的图像是 base64 编码的，或者我使用的[printElement](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/)函数不正确。

任何帮助，将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T05:41:30.623

使用此代码

```
<a id="print" style="cursor:pointer">Print</a>
<img src="bluemoon.jpg" id="tes" align="middle"  class="b" width="100%"/>
<script type="text/javascript">
$(document).ready(function(){
$('#print').click(function(){
    $('#tes').printElement(
        {
            printBodyOptions:
            {
                styleToAdd:'padding:10px;margin:10px;color:#FFFFFF !important;width:100%!important;',
                classNameToAdd : 'b',
                leaveOpen:true
            }
        });
    })

})
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T07:48:29.380

我找到了使用此代码的解决方案。

```
$('#result').css('display', 'block');
$('#result').printElement({ printMode: 'popup' });
$('#result').css('display', 'none'); 
```

切换可见性使打印正常工作！现在它正在打印整个图片。享受 ：）

# c# - OleDbException 未处理 - Int-Field 类型的数据类型不匹配

> ID：12694015
> 
> 赞同：1
> 
> 时间：2012-10-02T16:04:06.597
> 
> 标签：c#, oledb, dbf, visual-foxpro

我有一个空闲表 My_Table1。My_Table1 ia 具有以下字段

```
Field-Name  ->  sl_no Integer - Width 4 
```

因此，当我通过 OleDb 插入时，从 c# 中，它给出了类似的错误

```
"Data Type Mismatch" 
```

我的 OleDbCommand 是

```
int a1 = 3;

OleDbCommand OleCmd1 = new System.Data.OleDb.OleDbCommand("Insert into My_Table1 values('"+a1+"')", OleCon1) 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:08:23.100

INSERT 语句正在插入一个字符值`'a1'`。这不能存储在整数字段中。如果`a1`是代码中的一个变量，那么也许你正在寻找这个：

```
System.Data.OleDb.OleDbCommand("Insert into My_Table1 values("+a1.ToString()+")", OleCon1) 
```

从“最佳实践”的角度来看，最好使用参数化查询来养成避免 SQL 注入攻击问题的习惯。对于整数值，上面的语句可能还可以，但通常不太适合使用简单的连接构建 SQL 语句。

# c# - 使用正确的编码将字节数组转换为字符串

> ID：12694018
> 
> 赞同：3
> 
> 时间：2012-10-02T16:04:13.340
> 
> 标签：c#, vb.net, migration

[我使用http://www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)将这段 C# 代码翻译成 VB

```
private string DecodeToken (string token, string key)
{           
    byte [] buffer = new byte[0];
    string decoded = "";
    int i;
        if (Scramble (Convert.FromBase64String(token), key, ref buffer))
    {
        for (i=0;i<buffer.Length;i++)
        {
            decoded += Convert.ToString((char)buffer[i]);
        }
    }
    return(decoded);
} 
```

经过一点修改，它给出了这个：

```
Private Function DecodeToken(token As String, key As String) As String
    Dim buffer As Byte()
    Dim decoded As String = ""
    Dim index As Integer
    If Scramble(Convert.FromBase64String(token), key, buffer) Then
        For index = 0 To buffer.Length - 1
            decoded += Convert.ToString(ChrW(buffer(index)))
        Next
        'decoded = UTF8Encoding.ASCII.GetString(pbyBuffer)
        'decoded = UnicodeEncoding.ASCII.GetString(pbyBuffer)
        'decoded = ASCIIEncoding.ASCII.GetString(pbyBuffer)
    End If
    Return decoded
End Function 
```

Scramble 只是以特定方式重新排列数组，我已经检查了 VB 和 C# 输出，因此可以忽略它。它的输入和输出是字节数组，所以它不应该影响编码。

问题在于这个函数的结果被输入到一个散列算法中，然后与散列签名进行比较。VB 版本的结果在散列后与签名不匹配。

您可以从评论中看到，我尝试使用不同的编码将字节缓冲区作为字符串取出，但这些都没有奏效。

问题似乎在于`decoded += Convert.ToString((char)buffer[i]);`to的翻译`decoded += Convert.ToString(ChrW(buffer(index)))`。

ChrW 是否产生与转换为 char 相同的结果，哪种编码将正确复制字节数组的读取？

编辑：我总是有 Option Strict On 但原始 C# 可能没有，因此它可能会受到隐式转换的影响。在这种情况下编译器会做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:30:17.153

快速回答

```
decoded += Convert.ToString((char)buffer[i]); 
```

相当于

```
decoded &= Convert.ToString(Chr(buffer[i])); 
```

VB.Net 阻止您采用 c# 代码中使用的 hacky 方法，a`Char`是 Unicode，因此由两个字节组成。

* * *

这看起来像是你所拥有的更好的实现。

```
Private Function DecodeToken(encodedToken As String, key As String) As String
    Dim scrambled = Convert.FromBase64String(encodedToken)
    Dim buffer As Byte()
    Dim index As Integer

    If Not Scramble(scrambled, key, buffer) Then
        Return Nothing
    End If

    Dim descrambled = new StringBuilder(buffer.Length);

    For index = 0 To buffer.Length - 1
        descrambled.Append(Chr(buffer(index)))
    Next

    Return descrambled.ToString()
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:09:19.387

试一试：

```
decoded += Convert.ToChar(foo) 
```

它会起作用（不像我上次尝试假设隐式转换是特定于框架而不是特定于语言的），但我不能保证它与.NET 相同。

鉴于您在评论中说您希望使用`Encoding.xxx.GetString`，那么您为什么不使用它呢？你知道原始字符串到字节数组中的编码是什么吗？如果是这样，那么就使用它。无论如何，这是将字节数组转换为字符串的正确方法，因为逐字节进行操作肯定会因任何多字节字符而中断（显然）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:10:55.850

有没有试过最直接的代码翻译：

```
decoded += Convert.ToString(CType(buffer[i], char)) 
```

在将字节数组转换为字符串时，您确实应该首先确保您知道编码。如果这是在提供字节数组的任何内容中设置的，那么您应该使用它来解码字符串。

有关 ChrW（和 Chr）函数的更多详细信息，请查看[http://msdn.microsoft.com/en-us/library/613dxh46%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/613dxh46%28v=vs.80%29.aspx)。本质上，ChrW 假定传递的 int 是一个 unicode 代码点，这可能不是一个有效的假设（我相信从 0 到 127 这无关紧要，但字节的上半部分可能不同）。如果这是问题所在，那么它很可能是重音和其他导致问题的“特殊”字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T00:06:17.043

一个小小的改进

```
Private Function DecodeToken(encodedToken As String, key As String) As String
    Dim scrambled = Convert.FromBase64String(encodedToken)
    Dim buffer As Byte()
    Dim index As Integer

    If Not Scramble(scrambled, key, buffer) Then
        Return Nothing
    End If

    Dim descrambled = System.Text.Encoding.Unicode.GetString(buffer, 0, buffer.Length);

    Return descrambled
End Function 
```

# c - OpenGL凹凸贴图不起作用

> ID：12694021
> 
> 赞同：0
> 
> 时间：2012-10-02T16:04:25.320
> 
> 标签：c, visual-studio-2010, opengl, windows-7

我正在尝试根据我在本教程中看到的代码将凹凸贴图应用于 2D 纹理：http: [//www.paulsprojects.net/tutorials/simplebump/simplebump.html](http://www.paulsprojects.net/tutorials/simplebump/simplebump.html)

我已经更改了代码以使用我的设置（不使用客户端状态，使用 glVertex 而不是 glDrawElements 绘制顶点等......）但是当我运行程序时，我得到这个输出：

[http://www.tiikoni.com/tis/view/?id=cf02ea7](http://www.tiikoni.com/tis/view/?id=cf02ea7)

这是代码：（x、y、z、w、h、st 都是有效值）

```
//Bind normal map to texture unit 0
glBindTexture(GL_TEXTURE_2D, bump->texnum);
glEnable(GL_TEXTURE_2D);

//Bind normalisation cube map to texture unit 1
glActiveTextureARB(GL_TEXTURE1_ARB);
glBindTexture(GL_TEXTURE_CUBE_MAP_ARB, draw_ncm);
glEnable(GL_TEXTURE_CUBE_MAP_ARB);
glActiveTextureARB(GL_TEXTURE0_ARB);

//Set up texture environment to do (tex0 dot tex1)*color
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_COMBINE_ARB);
glTexEnvi(GL_TEXTURE_ENV, GL_SOURCE0_RGB_ARB, GL_TEXTURE);
glTexEnvi(GL_TEXTURE_ENV, GL_COMBINE_RGB_ARB, GL_REPLACE);

glActiveTextureARB(GL_TEXTURE1_ARB);

glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_COMBINE_ARB);
glTexEnvi(GL_TEXTURE_ENV, GL_SOURCE0_RGB_ARB, GL_TEXTURE);
glTexEnvi(GL_TEXTURE_ENV, GL_COMBINE_RGB_ARB, GL_DOT3_RGB_ARB);
glTexEnvi(GL_TEXTURE_ENV, GL_SOURCE1_RGB_ARB, GL_PREVIOUS_ARB);

glActiveTextureARB(GL_TEXTURE0_ARB);

glBegin( GL_QUADS );
glTexCoord2f( st[0], st[1] );
glVertex3f( x, y, z );
glTexCoord2f( st[0], st[3] );
glVertex3f( x, y+h, z );
glTexCoord2f( st[2], st[3] );
glVertex3f( x+w, y+h, z );
glTexCoord2f( st[2], st[1] );
glVertex3f( x+w, y, z );
glEnd();

// texture pass
glBindTexture (GL_TEXTURE_2D, pic->texnum);
glBegin( GL_QUADS );
glTexCoord2f( st[0], st[1] );
glVertex3f( x, y, z );
glTexCoord2f( st[0], st[3] );
glVertex3f( x, y+h, z );
glTexCoord2f( st[2], st[3] );
glVertex3f( x+w, y+h, z );
glTexCoord2f( st[2], st[1] );
glVertex3f( x+w, y, z );
glEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:00:50.737

您是否为正在使用的着色器提供切线向量？您需要为着色器提供对**切线矢量属性**的访问权限才能使其正常工作。您还需要**为法线贴图定义一个制服**。当我回到家时，我可以完整地回答这个问题，但它比你在这里发布的内容更复杂。另外，您希望遵守什么 OpenGL 核心？1.x？2.x？3.x/4.x？

# ruby-on-rails - My Cucumber test is failing, not filling in form

> ID：12694025
> 
> 赞同：1
> 
> 时间：2012-10-02T16:04:51.077
> 
> 标签：ruby-on-rails, cucumber, factory-bot

i am very new to rails, and even newer to BDD. I have attempted to stick to DRY methodology but somethings not right here..

## FEATURE

```
 Scenario: Add a new vehicle with valid data
    Given I exist as a user
      And I am logged in
      And I am on the Create New Vehicle page
    When I fill out the form with the following attributes:
      | vehicle_make    | DODGE       |
      | vehicle_model   | RAM 1500    |
      | vehicle_year    | 2005        |
      | vehicle_engine  | 5.7L        |
      | vehicle_color   | Black       |
      And I click the Create Vehicle button
    Then I should see Vehicle was successfully created. 
```

## STEP DEFINITION

```
 ## this is in common_steps.rb

    When /^I fill out the form with the following attributes:$/ do |table|
      puts table.rows_hash
      criteria = table.rows_hash.each do |field, value|
        fill_in field.to_sym, :with => value
      end
    end
    When /^I click the (.*?) button$/ do |button|
      click_button button
    end 
```

## TEST RESULTS

```
## seems that its not filling the form out as im getting
## "cannot be blank" validation errors

  Scenario: Add a new vehicle with valid data               # features/vehicles/vehicle_new.feature:12
    Given I exist as a user                                 # features/step_definitions/user_steps.rb:42
    And I am logged in                                      # features/step_definitions/common_steps.rb:18
    And I am on the Create New Vehicle page                 # features/step_definitions/common_steps.rb:22
    When I fill out the form with the following attributes: # features/step_definitions/common_steps.rb:33
      {"vehicle_make"=>"DODGE", "vehicle_model"=>"RAM 1500", "vehicle_year"=>"2005", "vehicle_engine"=>"5.7L", "vehicle_color"=>"Black"}
      | vehicle_make   | DODGE    |
      | vehicle_model  | RAM 1500 |
      | vehicle_year   | 2005     |
      | vehicle_engine | 5.7L     |
      | vehicle_color  | Black    |
    And I click the Create Vehicle button                   # features/step_definitions/common_steps.rb:39
    Then I should see Vehicle was successfully created.     # features/step_definitions/common_steps.rb:47
      expected there to be content "Vehicle was successfully created." in "GasLoggr | Create New Vehicle\n  \n      \n          Gasloggr\n          \n            \n            \n            \n          \n              Welcome Back Test User\n              \n            Home\n    About\n\n        \n      \n    \n  \n    Vehicles\n        Fillups\n        Edit Profile\n    Logout\n        \n\n  \n    \n      \n        \n          Create New Vehicle\n      \n      \n        \n          \n    NAVIGATION\n            Vehicles\n            Fillups\n            Edit Profile\n    \n        \n        \n          \n          \n\t\n\t\t\n\t\t\t\n    \n      4 errors prohibited this vehicle from being saved:\n\n      Color can't be blank\n        Engine can't be blank\n        Model can't be blank\n        Year can't be blank\n      \n  \n      Make\n      \n        \n    \n    \n      Model\n      \n        \n      \n    \n    \n      Year\n      \n        \n      \n    \n    \n      Engine\n      \n        \n      \n    \n    \n      Color\n      \n        \n      \n    \n    \n      Image\n      \n        \n    \n    \n      Description\n      \n        \n    \n    \n      Cancel\n    \n  \n\t\t\n\t\t\n\t\t\tLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\n\t\t\ttempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,\n\t\t\tquis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo\n\t\t\tconsequat. Duis aute irure dolor in reprehenderit in voluptate velit esse\n\t\t\tcillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non\n\t\t\tproident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\n\t\n\n        \n      " (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/common_steps.rb:48:in `/^I should see (.*?)$/'
      features/vehicles/vehicle_new.feature:23:in `Then I should see Vehicle was successfully created.' 
```

From everything i can tell, the step definition isnt filling out the form, but the form values do exist properly according to this line from the results.. `{"vehicle_make"=>"DODGE", "vehicle_model"=>"RAM 1500", "vehicle_year"=>"2005", "vehicle_engine"=>"5.7L", "vehicle_color"=>"Black"}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:24:36.503

The problem was the following line:

```
fill_in field.to_sym, :with => value 
```

specifically the `.to_sym` was causing it to not pass the proper value into the form fields. Removing the `.to_sym` and making it:

```
fill_in field, :with => value 
```

Fixed the problem and my tests are now passing while sticking to DRY methodology

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:37:32.977

```
Scenario: Add a new vehicle with valid data
    Given I exist as a user
    And I am logged in
    And I am on the Create New Vehicle page
    When I fill out the form with the following attributes:
      | attribute_name  | attribute_name | // write attribute name here 
      | vehicle_make    | DODGE          |
      | vehicle_model   | RAM 1500       |
      | vehicle_year    | 2005           |
      | vehicle_engine  | 5.7L           |
      | vehicle_color   | Black          |
    And I click the Create Vehicle button
    Then I should see Vehicle was successfully created. 
```

for example

```
| name      | display_name | // name and display_name it's a attribute name
| Ollie     | ollie        |
| David     | player       |
| Victoria  | Victoria     | 
```

# objective-c - initWith... 方法的接收者是否拥有所有权 - 内存管理

> ID：12694030
> 
> 赞同：-1
> 
> 时间：2012-10-02T16:05:03.807
> 
> 标签：objective-c, memory-management

toNewbie 问题：有人可以帮助我了解 initWith.... 方法的接收者是否拥有返回对象的所有权并应该管理它。例如：

```
NSString *msg; //could be used to hold some data, then
[msg initWithFormat: @"some text"]; //do I need to do a retain or is the method returning an auto-released string object 
```

只是试图让我的头脑围绕不明确使用 alloc 的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:26:28.630

名称中带有 的方法`init`通常与 一起调用`alloc`，如下所示：

```
MyObject *obj = [[MyObject alloc] init]; 
```

`alloc`返回一个具有 +1 保留计数的对象，因此您不需要保留它。

# javascript - 如果我调用一个 JS 方法的参数比它定义的要多，会发生什么？

> ID：12694031
> 
> 赞同：25
> 
> 时间：2012-10-02T16:05:10.500
> 
> 标签：javascript, function, arguments, attachevent

我想知道常规的全家族 JS 开发人员（我）定义的函数，以及预定义的 DOM 方法。就像如果我尝试`attachEvent`使用 WHATWG 的签名调用 IE 会发生什么`addEventListener`？例如，

`elem.attachEvent('onbillgates\'mom', function(e){ this.mount(); }, false);`

具体来说，请注意*`false`*. 即使`attachEvent`方法的签名只需要两个参数，这会不会出错？

谢谢。

```
function foo(FirstOf2, SecondOf2) {
  console.log(FirstOf2 + SecondOf2);
}

foo(1, 2, true); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-02T16:12:15.563

JavaScript 没有固定参数列表的概念。对于您自己的函数，您始终可以指定任意数量的参数，并传入任意数量的参数。

对于与本机代码相关的内置函数，*它取决于*.

你问这取决于什么：

# 让我们看看[ECMA-262](http://www.ecma-international.org/publications/standards/Ecma-262.htm)

第 15 节关于一般*内置*（不要与*host*混淆）函数

> 除非在特定函数的描述中另有规定，如果本节中描述的函数或构造函数的参数少于指定的函数所需的参数，则函数或构造函数的行为应与已给予足够的附加参数完全相同，每个这样的论点是未定义的值。

好吧。如果我传入的参数比需要的少，*这取决于*函数本身的规范（向下滚动第 15 节以查找每个内置函数的规范）。

> 除非在特定函数的描述中另有说明，否则如果此子句中描述的函数或构造函数的参数多于函数指定允许的参数，则调用会评估额外的参数，然后函数将其忽略。但是，实现可以定义与此类参数相关的实现特定行为，只要该行为不是简单地基于额外参数的存在而引发的 TypeError 异常。

传入太多参数永远不应该引发 TypeError。但它仍然可能引发其他错误。同样，*这取决于*您谈论的功能。

**您明确谈论的是 DOM 而不是内置函数。老实说，我找不到规范的相应部分。ECMA 规范比 w3 网站更容易阅读。**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-02T16:23:03.777

不会伤害。您甚至可以调用参数少于所需参数的函数，只要函数代码可以使用一些未定义的值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-07-24T09:39:16.397

我遇到了这个重要但古老的问题；我希望与它分享我的实验对后代有益：

1.  无论函数签名中的参数数量如何，都可以使用该`arguments`对象来访问函数的参数。
    值得一提的是，这不适用于箭头函数：

```
function singleArg(x) {
  console.log(arguments);
}

singleArg(1, 2); // Called with 2 arguments
singleArg();     // Called with 0 arguments

// Results in an error, as 'arguments' isn't defined for arrow functions
((arg) => console.log(arguments))(1);
```

2.  它在[文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments)中说明`arguments`不*完全*是`Array`：

> “类数组”意味着参数具有长度属性和从零开始索引的属性，但它没有像 forEach() 和 map() 这样的 Array 内置方法。

因此，以下代码会导致错误：

```
(function singleArg(x) {
  console.log(arguments); // This line works
  arguments.forEach(x => console.log(x)); // This causes an error
})(1, 2);
```

3.  在调用参数少于其签名的函数时，它们被分配`undefined`：

```
(function twoArgs(a, b) {
  console.log(`a: ${a}\nb: ${b}`);
})(1);
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T16:14:25.627

试着看看这篇[文章](https://stackoverflow.com/questions/2141520/javascript-variable-number-of-arguments-to-function)，也许看看[这个](https://stackoverflow.com/questions/2525568/javascript-is-it-bad-to-pass-more-arguments-than-the-function-declares)。

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)：

> 该`arguments`对象是**所有函数**中可用的局部变量；`arguments`作为 Function 的属性不能再使用。
> 
> `arguments`您可以通过使用`arguments`对象来引用函数内的函数。该对象包含**传递给函数的每个参数**的条目，第一个条目的索引从 0 开始。
> 
> `arguments`如果您调用的函数 `arguments`超出了正式声明接受的范围，则可以使用该对象。这种技术对于可以传递可变数量参数的函数很有用。

```
function myConcat(separator) {
  var result = "";

  // iterate through non-separator arguments
  for (var i = 1; i < arguments.length; i++) {
    result += arguments[i] + separator;
  }

  return result;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-02T16:09:29.663

除非您明确处理隐式参数数组，否则我认为它不会搞砸任何事情。你为什么要这样做？

# c# - 并发跳过列表读取锁定

> ID：12694037
> 
> 赞同：2
> 
> 时间：2012-10-02T16:05:29.903
> 
> 标签：c#, multithreading, algorithm, .net-4.0

我会尽量让这个问题尽可能笼统，但我会简要介绍一下我的实际问题——

我正在尝试为优先级队列实现并发跳过列表。每个“节点”都有一个值和一个“前向”节点数组，其中 node.forward[i] 表示跳过列表第 i 级上的下一个节点。对于写访问（即插入和删除），我使用自旋锁（仍然要确定这是否是最好的锁）

我的问题本质上是，当我需要读取访问权限进行遍历时，

```
node = node.forward[i] 
```

围绕这样的事情我需要什么样的线程安全？如果另一个线程在我读取的同时修改 node.forward[i]（没有当前的读取锁定机制），这里会发生什么？

我最初的想法是在 Forward 索引器的 getter 和 setter 上有一个 ReaderWriterLockSLim。在这种情况下会不会有太多不必要的锁定？

编辑：或者最好改为使用 Interlocked.Exchange 来读取我的所有内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:14:56.403

> 如果另一个线程在我读取的同时修改 node.forward[i]（没有当前的读取锁定机制），这里会发生什么？

这真的取决于实施。可以在设置“转发”时使用[Interlocked.Exchange](http://msdn.microsoft.com/en-us/library/bb337971.aspx)以防止引用无效（因为它可以使“设置”原子），但不能保证您会阅读哪个引用。但是，如果使用幼稚的实现，任何事情都可能发生，包括获取不良数据。

> 我最初的想法是在 Forward 索引器的 getter 和 setter 上有一个 ReaderWriterLockSLim。

这可能是一个很好的起点。使用 来制作正确同步的集合相当容易`ReaderWriterLockSlim`，并且功能始终是第一要务。

这可能是一个很好的起点。

> 在这种情况下会不会有太多不必要的锁定？

没有看到你是如何实现它的，就没有办法知道它，更重要的是，它是如何被使用的。*根据您的使用情况，您可以在必要*时分析并寻找优化机会。

附带说明 - 您可能需要重新考虑使用`node.Forward[i]`此处而不是更多的“链接列表”方法。任何访问`Forward[i]`都可能需要相当多的同步来迭代跳过列表步骤，如果在和之间的任何地方`i`存在并发写入，所有这些都需要一些同步来防止错误。如果您只向前看一步，则可以（可能）减少所需的同步量。 `node``i``node`

# javascript - Jquery 循环 - 在不破坏缩略图分页器的情况下将图像包装在 div 标签中

> ID：12694041
> 
> 赞同：1
> 
> 时间：2012-10-02T16:05:36.147
> 
> 标签：javascript, jquery, css, cycle, pager

我正在使用 jquery 循环插件并将每个图像包装在一个 div 标签中以使每张幻灯片居中，所有这些都是不同的宽度：

```
<div><img src="img1.jpg" width="522" height="347"  alt=""/></div>
<div><img src="img2.jpg" width="420" height="347"  alt=""/></div>
<div><img src="img3.jpg" width="231" height="347"  alt=""/></div> 
```

这工作正常，但它破坏了 pagerAnchorBuilder 脚本。

从此页面：[Jquery 循环 - 如何在不破坏缩略图寻呼机的情况下将图像包装在跨度标签中？](https://stackoverflow.com/questions/11647378/jquery-cycle-how-can-i-wrap-my-images-in-span-tags-without-breaking-the-thumbn)，我有这个：

```
pagerAnchorBuilder: function(idx, slide) {

    var src = $("img", slide).attr("rel");

        return '<a href="#"><img src="' + src + '" width="60" height="40" style="position:absolute; top:540px;"/></a></li>'; 
```

但这似乎不起作用。

我确定我不需要指出我对 javascript 很陌生！我将不胜感激任何提示！

有问题的页面在这里：[http ://wildwood-design.org/twagons.html](http://wildwood-design.org/twagons.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:24:05.567

嘿，我找到了在这个线程上发生的任何人的答案（希望在 6 个月内不是我）。将上述函数中的返回行替换为：

```
return '<li><a href="#"><img src="' + jQuery(slide).find('img').attr('src') + '" width="60" height="40" style="position:absolute; top:540px;"/></a></li>'; 
```

# oracle - PLSQL 触发器可能导致 INSERT INTO 静默失败？

> ID：12694042
> 
> 赞同：0
> 
> 时间：2012-10-02T16:05:37.670
> 
> 标签：oracle, triggers, plsql

我有一个表，我试图根据给定的值进行插入/更新。但是插入不适用于这个特定的表，但它适用于脚本运行的以前的表。

为了测试这个问题，我在 oracle 的 sqldeveloper 中放入了一些匿名块，它根据是否存在密钥进行插入或更新。更新似乎工作正常，但在插入新行时，没有插入任何内容。

如果我有这张桌子：

```
COFFEE_ID       TEA_ID        NAME      
    11             100        combo 1
    12             101        combo 2
    13             102        combo 3 
```

这样做不会插入任何内容，而是会转到下一个匿名块：

```
 begin
      insert into COFFEE_TEA(COFFEE_ID, TEA_ID, NAME) values (14, 103, 'combo 4');
   exception when dup_val_on_index then 
      update ....
   end;

    .... 
```

我怀疑这与这张桌子上的触发器有关。它是一种`BEFORE EACH ROW`触发器类型，它会将数据插入到其他表中。触发器中没有异常处理，所以我猜它一定会失败但不报告（运行脚本时不会出现在 sqldeveloper 中）。

我的两个问题是，

当触发器运行时，如果它试图插入到另一个表的 ID 已经存在会发生什么？看起来它默默地失败了？

我应该如何最好地解决这个问题？我不确定我是否可以更改触发器代码本身，但是否有可能在我的匿名块中捕获错误（假设它实际上是导致问题的触发器）。如果是这样，如果它静默失败，我怎么知道要捕获什么异常？

* * *

我删除了 sqldeveloper 中的异常，它告诉我违反了唯一约束。即通过触发器插入另一个表的数据是原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:46:53.877

您的附加信息告诉我们您的触发器正在抛出 ORA-00001，这是一个唯一密钥违规。这是 DUP_VAL_ON_INDEX 异常处理的错误。所以看起来你的异常处理程序应该处理 COFFEE_TEA 上的关键违规行为，它也在吞噬你的触发器中的异常。凌乱。

有两种可能的解决方案。一种是在触发代码中进行适当的错误处理。另一种是使用 MERGE 进行数据加载例程。

我总是更喜欢 MERGE 作为执行 upserts 的机制，因为我不喜欢使用异常来处理合法的预期状态。 [了解更多](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm#i2081218)。

理想情况下，您应该两者都做。触发器应该是独立的代码：在与其表交互的例程上施加未处理的异常会破坏封装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:15:52.060

触发器不会修改表上的 DML 进程。`COFFEE_TEA`删除异常块，如果是表，则插入将成功或失败并出现错误。

换句话说，如果`COFFEE_TEA`是表，以下脚本将永远不会输出 0：

```
BEGIN
   INSERT INTO coffee_tea(COFFEE_ID, TEA_ID, NAME) values (14, 103, 'combo 4');
   dbms_output.put_line(sql%rowcount);
END; 
```

# styles - JavaFX HTML 样式（或等效）标签

> ID：12694043
> 
> 赞同：15
> 
> 时间：2012-10-02T16:05:38.467
> 
> 标签：styles, javafx-2, javafx

在 Swing 中，使用 HTML 为 JLabel 设置样式非常容易 - 您只需使用所需的 HTML 作为标签的文本，然后适当地呈现它。

`setStyle()`在 JavaFX 中这是不可用的，但我们可以使用该方法设置特定标签（或一般节点）的样式。

但是，使用这种方法，如何将标签的一部分设置为某种样式并不明显，例如相当于：

```
JLabel label = new JLabel("<html>Part of this <b>text is b</b>old and part isn't.</html>"); 
```

实现上述目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-12-11T18:58:55.833

您可以尝试使用 TextFlow 组合不同样式的文本节点，例如

```
TextFlow textFlow = new TextFlow();

Text first=new Text("Part of this ");
first.setStyle("-fx-font-weight: regular");

Text second=new Text("text is b");
second.setStyle("-fx-font-weight: bold");

Text third=new Text("old and part isn't.");
third.setStyle("-fx-font-weight: regular");

textFlow.getChildren().addAll(first, second, third); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-02T18:32:26.020

伪选择器可能是一种解决方法，但不幸的是，它们中的大多数还不支持 - [http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#introlimitations](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#introlimitations)。至于控件中的富文本支持，它们将由 JavaFX8 - [https://bugs.openjdk.java.net/browse/JDK-8091709](https://bugs.openjdk.java.net/browse/JDK-8091709)提供。

# svg - svg动画可以暂停而不丢失累积信息吗？

> ID：12694045
> 
> 赞同：4
> 
> 时间：2012-10-02T16:05:52.257
> 
> 标签：svg, svg-animate

您可以无限制地停止和重复动画，但如果您重新启动一个不确定的动画，它将失去其累积值并从初始值开始。

也许我应该举个例子来澄清一下；看这个动画：

```
 <animate id="main"
    attributeName="transform" attributeType="XML"
    begin="startbox.click" dur="1s" end="endbox.click"
    from="rotate(0)" to="rotate(360)"
    additive="sum"
    accumulate="sum"
    fill="freeze"
    repeatCount="indefinite"
  /> 
```

如果我停止这个动画，并开始一个不同的（比如`id="second"`）影响同一个对象的旋转，`second`将从停止的点完美地继续`main`。但是，如果我通过单击`startbox`（或实际上通过任何其他事件）开始这个，它将减去所有差异`main`并在开始之前重置旋转。

我想要的是一个适当的“暂停”，我可以在动画之前停止的地方继续。当然，我可以添加固定数量的相同动画和相同数量的相同开始/停止按钮来模拟效果，但这不是一个好的解决方案。特别是因为暂停的次数是有限的。

* * *

整个例子（似乎只在 Opera 中工作）

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg
     xmlns="http://www.w3.org/2000/svg" version="1.1"
     xmlns:xlink="http://www.w3.org/1999/xlink">
  <desc>Click example</desc>
  <g>
    <rect id="startbox"
      x="10" y="10"
      width="20" height="20"
      stroke="none" fill="green"
    />
    <rect id="endbox"
      x="10" y="40"
      width="20" height="20"
      stroke="none" fill="red"
    />
    <g transform="translate(200,200)">
    <rect
      x="0" y="0"
      width="50" height="5"
      stroke="#10e9f3" fill="#30ffd0"
    >
      <animate
        attributeName="transform" attributeType="XML"
        begin="startbox.click" dur="1s" end="endbox.click"
        from="rotate(0)" to="rotate(360)"
        additive="sum"
        accumulate="sum"
        fill="freeze"
        repeatCount="indefinite"
      />
    </rect>
    </g>
  </g>
</svg>
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-10-13T21:38:36.223

它内置在 SVG 中

```
 SVGRoot.pauseAnimations(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T16:34:50.820

使用 animate 元素对变换进行动画处理是无效的，您必须使用 animateTransform。见[http://www.w3.org/TR/SVG/animate.html#AnimationAttributesAndProperties](http://www.w3.org/TR/SVG/animate.html#AnimationAttributesAndProperties)

如果您的测试用例使用该 UA 进行动画处理，您应该向 Opera 报告您的测试用例。

```
 <animateTransform
    attributeName="transform" attributeType="XML"
    type="rotate"
    begin="startbox.click" dur="1s" end="endbox.click"
    from="0" to="360"
    additive="sum"
    accumulate="sum"
    fill="freeze"
    repeatCount="indefinite"
  /> 
```

至于提出的问题，您可以[使用 javascript 暂停动画，](http://svg-whiz.com/svg/PausePlay.svg)但据我所知，使用 SVG 1.1 您不能以声明方式执行此操作。

# ruby-on-rails - 更新/编辑有 Active_admin 问题的站点用户

> ID：12694046
> 
> 赞同：0
> 
> 时间：2012-10-02T16:05:53.073
> 
> 标签：ruby-on-rails, activeadmin

我从头开始进行身份验证（没有设计，oauth gem）用户有电子邮件，登录名和密码摘要（模型中的 has_secure_password）所以，我只想从 active_admin 面板更新用户，但它需要所有 BD 列来编辑表单，我有“可以” t 批量分配受保护的属性：password_digest" 如何从 active_admin 的用户编辑表单中排除某些字段（作为密码），而只更新不受保护的 attrs？

```
error text:
ActiveModel::MassAssignmentSecurity::Error in Admin::UsersController#update
Can't mass-assign protected attributes: password_digest 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:07:32.467

我通过在 /admin 目录中向用户模型添加一个简单的块来解决这个问题：

```
form do |f|
  f.inputs "Details" do
    f.input :login
    f.input :email
    f.input :password
  end
  f.buttons
end 
```

现在我可以编辑我的用户并输入未加密的密码。

# java - Java Mac如何创建一个类似finder的关于窗口

> ID：12694048
> 
> 赞同：1
> 
> 时间：2012-10-02T16:05:54.780
> 
> 标签：java, macos, menuitem, menubar

我是一个适用于 mac 的应用程序，我想有一个关于窗口向用户显示一些信息，比如 Finder。

实际上我正在使用这段代码：

```
System.setProperty("apple.laf.useScreenMenuBar", "true");
// SET NAME IN THE MACMENUBAR
System.setProperty("com.apple.mrj.application.apple.menu.about.name", Constants.APP_NAME);  
Application application = Application.getApplication();
Image image = Toolkit.getDefaultToolkit().getImage("res/logo.png");
application.setDockIconImage(image);
application.setAboutHandler(new AboutHandler() {
public void handleAbout(AboutEvent arg0) {

JOptionPane.showMessageDialog(null, "Some infos.");
}
});; 
```

但我得到的不是我想要的，因为是一个对话框，左边是“logo.png”图像，右边是文本。还有一个可怕的“确定”按钮，您必须按下它才能关闭窗口。

如何制作一个简单的关于 Finder 的窗口？

你能帮助我吗？我在网上找到了很多教程，但都在 Application 类中使用了不推荐使用的方法。

（对不起我的英语不好，我是意大利人）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:11:55.827

你至少有两个选择：

1.  创建一个`JPanel`（可能是您自己的子类）并根据需要在其中布局组件。然后`JOptionPane.showMessageDialog()`通过将它作为第一个参数传递来显示它，而不是`null`像你一样传递。

2.  自己创建`JDialog`和布局组件。同样，您可能希望创建一个子类`JDialog`来执行此操作。

# stored-procedures - Dapper (connection.Query 或 connection.Execute)

> ID：12694051
> 
> 赞同：8
> 
> 时间：2012-10-02T16:06:05.107
> 
> 标签：stored-procedures, execute, dapper

我看到了使用 Dapper 执行带有动态参数的存储过程并返回过程结果的示例。通常，示例使用 .Execute，但其中一些使用 .Query。我在使用 .Execute 时遇到困难。在上述情况下我应该使用哪个——查询或执行 AND 在什么情况下我会使用每个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T18:20:54.887

如果需要返回值，则使用 Query()。如果您需要执行不返回任何内容的查询（例如更新），则使用 E​​xecute()。

查询示例：

```
var myList = connection.Query("select * from myTable") 
```

执行示例：

```
connection.Execute("update myTable set columnA = @value", new {value = "ABC"}) 
```

# git - Jenkins Git Publisher 标签没有拾取环境变量

> ID：12694052
> 
> 赞同：6
> 
> 时间：2012-10-02T16:06:11.340
> 
> 标签：git, jenkins

我一直在设置我的 jenkins windows 服务来构建我的所有项目，现在已经到了我希望 jenkins 创建一个标记以指示成功构建的阶段。

我正在尝试将此作为使用 Git Publisher 模块的后期构建步骤。

我的设置如下：

*   仅在构建成功时推送 - 是
*   合并结果：否
*   要推送的标签：%BUILD_NUMBER%
*   创建新标签：是
*   目标远程名称：origin/master

日志文件告诉我它是

```
Pushing tag %BUILD_NUMBER% to repo origin/master 
```

这就是我在我的 git 存储库中看到的。我尝试了其他环境变量无济于事。帮助说：

```
Environment variables may be used in the tag name - they will be replaced at build time. 
```

这不是我所看到的。我想要实现的是我推送一个以成功的内部版本号命名的标签。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T09:54:36.070

如果我使用 $BUILD_NUMBER 而不是 %BUILD_NUMBER% 它会起作用

# javascript - JavaScript 模块模式，新是个好主意吗？

> ID：12694053
> 
> 赞同：2
> 
> 时间：2012-10-02T16:06:18.360
> 
> 标签：javascript

我正在尝试学习[此处](http://www.yuiblog.com/blog/2007/06/12/module-pattern/)引用的 JavaScript 模块模式。一切看起来都很棒，但我不断看到创建模块的不同方法。

在上面引用的文章中，他通过使用`YAHOO.myProject.myModule.init();`而不调用来访问模块的公共方法`new`。但后来我看到一些人做类似的事情`var module = new YAHOO.myProject.myModule();`。应该`new`使用，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:39:28.833

对此没有正确或错误的答案。

有时一个模块会包含一个不需要 new 关键字的对象。

```
define( [], function() {
   return {
      foo: "bar"
   };
}; 
```

有时一个模块会包含一个对象的构造函数，其中需要一个新的关键字。

```
define( [], function() {
   return function() {
      this.foo = "bar";
   };
}; 
```

有时一个模块将包含一个返回新对象的函数，其中不需要 new 关键字。

```
define( [], function() {
   var SomeConstructor = function() {
      this.foo = "bar";
   };
   return function() {
      return new SomeConstructor();
   };
}; 
```

使用部分取决于您要完成的工作，部分取决于您的团队编码偏好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:21:00.283

这一切都归结为`myModule`.

如果 的目的`myModule`是返回一个 100% 的新对象，并且里面`myModule`有很多使用 的赋值`this.<X> = <Y>`，那么是的，`new`这将是预期的操作过程。

...如果它不打算创建一个新对象，那么`this`将引用`myProject`并且任何`this.<X> = <Y>;`分配都将被反映为`YAHOO.myProject.<X> = <Y>;`并且使用`new`将是一个坏主意，如果您期望然后使用`YAHOO.myProject.<X>`来做某事...

所以这真的完全取决于发生了什么。

许多精通 JavaScript 的程序员（那些习惯于以不同于编写 C++、Java 或 C# 的方式思考 JS 的人）会尽量避免`new`在此类情况下使用需要的模式，因为它对于什么`myModule` ***是***模棱两可的，并且有一个许多其他合适的模式在 JS 中实现起来非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:14:50.350

由于模块通常是单例而不是构造函数，因此不应使用`new`. 另请参阅[此答案](https://stackoverflow.com/a/12132454/1048572)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T16:15:59.293

Javascript 中的`new`关键字分配一个新对象，然后将其设置为`this`在构造函数调用中。如果您只是将模块用作将返回在函数本身中分配的对象的函数，`new`则没有必要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T16:16:51.863

因为，至少在声明时，javascript 不区分对象和函数，所以在创建对象时必须使用 new。但是，发生这样的模式通常会很好。

```
function myObject() {
    if (!(this instanceof myObject)) {
        return new myObject();
    }
} 
```

这样做是为了确保它始终是`myObject`.

# c++ - c++类与OpenCV矩阵运算之间的转换

> ID：12694055
> 
> 赞同：0
> 
> 时间：2012-10-02T16:06:23.837
> 
> 标签：c++, opencv, for-loop, matrix, type-conversion

我正在尝试将以下 c++ 行转换为 OpenCV 矩阵运算（也是 c++）：

```
double myCode::calculate ( int i, int au )
{
    double k;
    for ( int j = 0; i < N; i ++ );
    {
         k += fabs(data[i][j] - means[au][j]);            
    }
} 
```

我想将“数据”和“手段”定义为 openCV 矩阵类型，例如：

```
cv::Mat data ( NUMBER_OF_OBSERVATIONS, N, CV_8UC3 );
cv::Mat means = cv::Mat.zeros ( 5, N, CV_8UC3 ); 
```

然后为这个 cvMat 类型“数据”和“手段”重复上面的类。我怎样才能做到这一点？特别是我不知道该怎么做：

```
k += fabs(data[i][j] - means[au][j]); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:20:43.407

访问 OpenCV`Mat`对象中的像素的一种简单方法是使用`at()`操作符。如果您的数据类型是 1 通道 unsigned char ( `CV_8UC1`)，您可以简单地执行以下操作：

```
k += fabs(data.at<uchar>(i,j) - means.at<uchar>(i,j)); //works for CV_8UC1 type 
```

但是，您有 3 个通道（R、G、B），由`C3`您的`CV_8UC3`数据类型决定。因此，以下是您`k += fabs(...)`在每个频道上的单独操作：

```
//for CV_8UC3 type
k += fabs(data.at<cv::Vec3b>(i,j)[0] - means.at<cv::Vec3b>(i,j)[0]); // Blue Channel
k += fabs(data.at<cv::Vec3b>(i,j)[1] - means.at<cv::Vec3b>(i,j)[1]); // Green Channel
k += fabs(data.at<cv::Vec3b>(i,j)[2] - means.at<cv::Vec3b>(i,j)[2]); // Red Channel 
```

[这篇文章](https://stackoverflow.com/questions/12463677/bug-with-pixel-access-in-opencv-2-x)提供了关于像素访问的进一步解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:59:59.707

你可以简单地写

```
double myCode::calculate ( int i, int au )
{
    cv::Scalar res = sum(avg(data(RowRange(i)) - means(RowRange(au))));
    return res[0] + res[1] + res[2]; // sum all the channels together
} 
```

请注意，这`RowRange()`实际上不是正确的语法 - 查看 OpenCV 文档以了解 的正确用法`Range()`，但这就是想法。

# python - 引用一个按钮然后配置它

> ID：12694058
> 
> 赞同：0
> 
> 时间：2012-10-02T16:06:27.877
> 
> 标签：python, button, tkinter

好的，我遇到的问题是我不明白如何引用被按下的特定按钮。我在做一个游戏，如果用户点击一个按钮，我想知道它有哪个 X 和 Y 坐标。所以，如果你有一个按钮网格并且你点击一个我想要坐标然后我会改变那个按钮的颜色。:)

问题：知道在网格中按下了哪个按钮。

提前致谢！

```
def matris():
    for i in range(5):
            newButton = Button(app, width = 4, height = 2, bg = "blue",command = lambda i=i: function(i))
            newButton.grid(row = i, column = 0)

    for i in range(5):
            newButton = Button(app, width = 4, height = 2, bg = "blue",command = lambda i=i + 5: function(i))
            newButton.grid(row = i, column = 1)

    for i in range(5):
            newButton = Button(app, width = 4, height = 2, bg = "blue",command = lambda i=i + 10: function(i))
            newButton.grid(row = i, column = 2)

    for i in range(5):
            newButton = Button(app, width = 4, height = 2, bg = "blue",command = lambda i=i + 15: function(i))
            newButton.grid(row = i, column = 3)

    for i in range(5):
            newButton = Button(app, width = 4, height = 2, bg = "blue",command = lambda i=i + 20: function(i))
            newButton.grid(row = i, column = 4)

def function(i):
    if button 23 was clicked.changeColor to e.g "blue" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:12:29.343

在阅读了所有的评论和编辑之后，看起来你真正想知道的是“点击了哪个按钮？” 当对多个按钮使用相同的命令时。

最简单的方法是将某种唯一标识符传递给与小部件关联的命令。最直接的方法是传递对小部件本身的引用，尽管这需要两步过程。

例如：

```
this_button = Button(...)
this_button.configure(command=lambda button=this_button: do_something(button))

def do_something(button):
    print "you clicked this button:", button 
```

`functools.partial`如果您发现 lambda 难以理解，您也可以使用它来获得相同的结果：

```
this_button.configure(command=functools.partial(do_something, this_button) 
```

如果您更喜欢一步而不是两步来创建按钮，则需要一些方法来识别它。对我来说，最简单的方法是使用字典。例如，如果您正在创建按钮的行和列，您可以这样做：

```
button = {}
for r in range(10):
    for c in range(10):
        button[r,c] = Button(..., command=lambda row=r, column=c: do_something(row, ccolumn))

def do_something(row, column):
    print "you clicked button", button[row,column] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:27:30.607

如果您想稍后修改该按钮，则需要保留对每个按钮的引用。由于您的编号方案是顺序的，您可以使用列表：

```
newButton = Button(...)
buttons.append(newButton)
...
def function(i):
    widget = buttons[i-1] # -1, because list indexes are zero-based
    if i == 23:
        widget.configure(background="blue") 
```

如果您正在创建一个按钮网格并且按钮在其他方面是相同的，您可能需要考虑一个更简单的结构，例如：

```
for row in range(5):
    for column in range(5):
        ... 
```

很明显，您正在创建五行五列，而使用您的原始代码需要几秒钟的研究才能得出相同的结论。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T16:34:58.220

不使用`command`参数，而是使用该`bind`方法为`<Button-1>`. 当 Tkinter 调用你的回调时，它会传入一个事件对象，其中包含引发事件的小部件。

```
from Tkinter import *

def buttonClicked(e):
    e.widget["bg"] = "red"

root = Tk()

for x in range(5):
    for y in range(5):
        newButton = Button(root, width=10, height=2, bg="blue")
        newButton.bind("<Button-1>", buttonClicked)
        newButton.grid(row=y, column=x)

root.mainloop() 
```

编辑：假设您想根据它们在网格中的位置来区别对待按钮。最简单的方法是使用全局字典将每个按钮与其坐标相关联。

```
from Tkinter import *

coords = {}

def buttonClicked(e):
    x,y = coords[e.widget]
    print "{},{} clicked".format(x,y)
    if x == 4 and y == 3:
        e.widget["bg"] = "red"

root = Tk()

for x in range(5):
    for y in range(5):
        newButton = Button(root, width=10, height=2, bg="blue")
        newButton.bind("<Button-1>", buttonClicked)
        newButton.grid(row=y, column=x)
        coords[newButton] = (x,y)

root.mainloop() 
```

然而，一般来说，在全局范围内拥有一个变量并不是一个好主意。将所有基于网格的代码分组到一个类中可能是值得的，因此它的任何细节都不会泄露给程序的其余部分。

```
from Tkinter import *

class ButtonGrid:
    def __init__(self, root):
        self.coords = {}
        for x in range(5):
            for y in range(5):
                newButton = Button(root, width=10, height=2, bg="blue")
                newButton.bind("<Button-1>", self.buttonClicked)
                newButton.grid(row=y, column=x)
                self.coords[newButton] = (x,y)

    def buttonClicked(self, e):
        x,y = self.coords[e.widget]
        print "{},{} clicked".format(x,y)
        if x == 4 and y == 3:
            e.widget["bg"] = "red"

root = Tk()
b = ButtonGrid(root)
root.mainloop() 
```

如果您更喜欢函数式而不是面向对象，这里有一个替代方案。像在原始代码中一样使用该`command`选项，但使用[`functools.partial`](http://docs.python.org/library/functools.html#functools.partial)函数提前指定应该将哪些变量传递给函数。

```
from Tkinter import *
import functools

def buttonClicked(widget, x, y):
    print "{},{} clicked".format(x,y)
    if x == 4 and y == 3:
        widget["bg"] = "red"

root = Tk()

for x in range(5):
    for y in range(5):
        newButton = Button(root, width=10, height=2, bg="blue")
        newButton["command"] = functools.partial(buttonClicked, newButton, x, y) 
        newButton.grid(row=y, column=x)

root.mainloop() 
```

# google-app-engine - App-engine 上的电子商务：成本估算

> ID：12694059
> 
> 赞同：1
> 
> 时间：2012-10-02T16:06:33.603
> 
> 标签：google-app-engine, e-commerce

考虑到在 GAE 上开设在线商店的想法。如果编码正确，具有适当的缓存和并发请求，我应该对“新”定价模型中的成本有什么期望？

我没有在 GAE 上找到任何涉及电子商务的成功案例（应该是暗示吗？）。从技术上讲，不再有任何问题，他们现在允许在自定义域上使用 HTTPS，我不想存储信用卡信息。

假设我每天有 500 名访客，分布在大约 10 小时内。比如说，这会产生大约 10k 的网页浏览量。这大约需要多少个前端实例？1、2、5、10、50 还是更多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:11:36.947

One instance can do 5-10 requests a second, if you enable [concurrent requests](https://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests). So you should be able to handle your load with one instance.

The other factor is datastore usage, which is highly app specific.

All-in-all we find AppEngine fairly priced. The biggest saving comes from the fact that you don't need admin and operations staff, which you would if you handled your own infrastructure and/or software stack.

# google-drive-api - 更高效的分享给我查询

> ID：12694061
> 
> 赞同：1
> 
> 时间：2012-10-02T16:06:40.140
> 
> 标签：google-drive-api

我正在使用查询：不是所有者中的“我”

获取与我共享的文件列表。但是查询需要很长时间并且经常因此而失败。我也想列出根文件夹中的东西。有没有更好的方法让我得到一个像[https://drive.google.com/#shared-with-me](https://drive.google.com/#shared-with-me)这样的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T01:36:42.867

您可以使用新`sharedWithMe`字段列出已与授权用户共享的文件：

[https://developers.google.com/drive/release-notes#sharedwithme_search_field_added](https://developers.google.com/drive/release-notes#sharedwithme_search_field_added)

# rss - WebSphere Portal 7：使用 rss/atom 提要作为 portlet 的内容提供者。可能吗？

> ID：12694068
> 
> 赞同：2
> 
> 时间：2012-10-02T16:07:34.740
> 
> 标签：rss, websphere-portal, atom-feed

有没有办法在 WebSphere Portal 7 中使用 atom feed 作为内容提供者？

假设我在一个页面上有 2 个 portlet，分别代表主要部分和页脚。我有一个带有 2 个条目的原子提要。我需要在主要部分中将第一个条目显示为 html，在页脚中将第二个条目显示为 html。请根据您的经验提出任何解决方案，或确认只能通过编写您自己的自定义 portlet 来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:12:22.740

我不确定我是否完全理解提要在一个 portlet 中显示第一个链接和在不同 portlet 中显示下一个链接的要求，但您可以尝试使用 Syndicated Feed Portlet。这是一个解释：[http](http://www.ibm.com/developerworks/websphere/zones/portal/catalog/doc/1wp1001p3/index.html) ://www.ibm.com/developerworks/websphere/zones/portal/catalog/doc/1wp1001p3/index.html 这是从 Lotus Greenhouse 下载的：[https ://greenhouse.lotus.com/ plugins/plugincatalog.nsf/assetDetails.xsp?action=editDocument&documentId=AAC7B8951F4C69CA8525771C004993D7](https://greenhouse.lotus.com/plugins/plugincatalog.nsf/assetDetails.xsp?action=editDocument&documentId=AAC7B8951F4C69CA8525771C004993D7) 这允许您以最少的 portlet 定制来集成提要。

# c# - 将 .net 更改为 4.0 后，ValidateRequest 停止工作

> ID：12694076
> 
> 赞同：2
> 
> 时间：2012-10-02T16:08:04.023
> 
> 标签：c#, asp.net, .net-4.0, .net-4.5, validate-request

从 .Net 4.5 更改为 4 后出现此错误

错误说：“从客户端检测到潜在危险的 Request.Form 值”

在我的 4.5 解决方案中，我的 aspx 页面顶部有“ValidateRequest="false"”。但这似乎不再起作用了。

我知道为什么会出现错误，但不知道如何使它消失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T16:14:16.060

您可以将其添加到您的配置文件中

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime requestValidationMode="2.0" />
</system.web> 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.requestvalidationmode%28VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.requestvalidationmode%28VS.100%29.aspx)

# c++ - 将 boost::bind 对象转换为函数指针 - 实现消息映射

> ID：12694077
> 
> 赞同：0
> 
> 时间：2012-10-02T16:08:06.360
> 
> 标签：c++, winapi, boost, signals

我正在考虑创建一个使用 Win32 API 和 C++ 标准库的 Window 类库
并且我想添加处理窗口消息的信号/插槽功能。

```
using namespace std;
using namespace boost::signals2;
typedef signal<void (Window*, EventArgs*)> WndEvent; 

class EventArgs { public: HWND hWnd; WPARAM wParam; LPARAM lParam; };

class Window {
    protected: unordered_map<UINT, WndMsg*> msgMap;
    public: void addMsgHandler(UINT msg, void (*handler)(Window*, EventArgs*)) {
        auto iter=msgMap.find(msg);
        if(iter==msgMap.end()) {
            WndEvent* newEvent = new WndEvent();
            newEvent->connect(handler);
            msgMap.insert(make_pair(msg, newEvent));
        }
        else iter->second->connect(handler);
    }

    private: LRESULT wndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lparam) {
        for(auto iter=msgMap.begin(); iter!=msgMap.end(); iter++)
            iter->second->();
    }
}; 
```

在使用该库时：

```
class Form : public Window {
    void initialize() {// add here pair of 'message' and 'corresponding handler'
        addMsgHandler(WM_LBUTTONUP, boost::bind(&Form::onLButtonUp, this, _1, _2));
        ...
    }
    void onLButtonUp(Window* sender, EventArgs* e) { // event handler
        wchar_t buf[1000]; 
        wsprintf(buf, L"(%d, %d) clicked", GET_X_LPARAM(e->lParam), GET_Y_LPARAM(e->lParam));
        MessageBox(0, buf, L"", MB_OK);
    }
} 
```

这里的问题是 onLButtonUp 的签名不匹配，因为它是一个类成员函数。
所以我尝试使用 boost::bind 并得到如下编译错误：

```
 Window::addMsgHandler': cannot convert parameter 2 'boost::_bi::bind_t<R,F,L>' to 'void (__cdecl *)(Window *,EventArgs *)' 
```

这意味着我必须更改（从简单的函数指针到提升函数对象？） addMsgHandler() 的签名但是

我无法确定要传递的数据类型（带有很长的模板参数）。

编译错误消息说

```
R=void,            
F=boost::_mfi::mf2<void,Form,Window *,EventArgs *>,1>                           
L=boost::_bi::list3<boost::_bi::value<Form*>,boost::arg<1>,boost::arg<2>> 
```

此外，由于许多其他类将从类 Window 派生，因此在定义类*Window*时我无法知道模板类型。

是否有适当的方法将 boost.bind 对象作为函数参数传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:06:42.413

像这样定义它：

```
void addMsgHandler(UINT msg, const function<void(Window* , EventArgs*)>& slot); 
```

甚至像这样：

```
void addMsgHandler(UINT msg, const WndEvent::slot_type &slot); 
```

现在，当调用这个函数时，`slot`参数应该是一个“可调用的”，接受 2 个类型的参数`Window *`和，您可以使用、、或仅传递适当的原始函数 ptr`EventArgs *`创建这样的插槽。`mem_fn``boost::bind``std::bind`

# model-view-controller - 在 MVC 应用程序中，控制器或模型应该处理数据访问吗？

> ID：12694078
> 
> 赞同：46
> 
> 时间：2012-10-02T16:08:17.623
> 
> 标签：model-view-controller

我们公司正在进行一些哲学辩论，关于调用业务逻辑应该在哪里执行 CRUD 操作。

我相信模型应该包含您的数据结构，并且控制器应该负责填充数据。

我的同事认为所有填充都应该在模型类本身中完成，并由控制器简单地调用。这使控制器保持整洁（但在我看来，会使模型混乱）。

他还认为，任何返回 Json 对象的调用都应该发生在模型中，而不是控制器中。该模型将向控制器返回一个数组，然后控制器将其作为 Json 对象返回。

每个有哪些不同的优点/缺点，是否有正确或错误的方法来做到这一点？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-02T16:10:46.217

所有业务逻辑都应该在*MODEL*中。

请记住，每一层的职责是：

*   控制器 - 模型和视图之间的桥梁。决定*下一步去哪里*。
*   查看 - 显示数据，收集用户输入
*   模型 - 业务逻辑，数据存储接口。

最大的收获之一是维护和（后来的）扩展。一般来说：

*   如果您需要更改业务逻辑，则不需要修改控制器或视图。
*   如果您更改视觉显示，则不需要修改模型或控制器。
*   如果您更改工作流程，则不需要修改视图或模型。

为此，每一层都应该不知道其他层才能正常工作。例如，*视图*应该接收它的数据，并且不需要知道它来自哪里以正确显示它。*控制器*不需要了解模型的底层结构就可以与之交互。*模型*不应该知道如何显示数据（例如，格式化）或工作流。

> “他还认为，任何返回 Json 对象的调用都应该发生在模型中，而不是控制器中。模型会向控制器返回一个数组，然后控制器会将其作为 Json 对象返回。”

不。模型不应该格式化数据。它也不应该读取格式化的数据。那就是污染模型，进入地狱所在的层次`business logic = display logic`。

JSON（进来或出去）只是另一种观点。于是出门：

```
Data Store -> Model -> Controller -> View 
```

进来：

```
View -> Controller -> Model -> Data Store 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-02T17:13:03.190

> [仅供参考，我的主要语言是 PHP，所以你可以对这一切持保留态度。]

MVC 和受 MVC 启发的模式中的业务业务逻辑必须在**模型**层中。是的，模型应该是一个层，而不是一个类或对象。

大多数所说的逻辑将驻留在[域对象](http://c2.com/cgi/wiki?DomainObject)中，但其中一些最终会出现在[服务](https://en.wikipedia.org/wiki/Service_%28systems_architecture%29)中，服务应该类似于模型层中的“顶级”结构，表示层（视图和控制器）通过它与模型层交互。

服务还应该促进存储抽象（[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)、[数据访问对象](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)、[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)和/或[存储库](http://martinfowler.com/eaaCatalog/repository.html)）与域对象之间的交互。这些结构将处理持久和临时存储并处理数据完整性。

这种分离简化了代码库的维护和测试。您无需接触数据库（或任何其他形式的存储）即可轻松测试域逻辑。

**控制器**（以及来自其他 MVVM 和 MVP 模式的等效结构）应该从用户请求中提取信息并更改模型层（通过使用服务）和视图的状态。

如果您实现 MVP 或 MVVM，那么类似控制器的组件将有额外的职责，包括从模型层到视图的数据传输，但在经典和 Model2 MVC 模式中，**视图**应该是一个活动结构，它从模型请求数据层。

至于 JSON 的生成，这实际上应该发生在视图中。**视图**应该包含所有（或大部分，取决于您使用模板的方式）表示逻辑。它应该从模型层（直接或通过中介）获取信息，并基于该信息生成响应（有时从多个模板创建它）。JSON 只是一种不同的响应格式。

* * *

> [2005 年发布的 Rails 框架产生了巨大的影响（而且大部分是负面的）。它的最初目的是成为原型设计的框架——快速创建一次性代码。为了实现这一点，他们将模式简化到了关注点分离被破坏的程度。]
> 
> [他们用活动记录结构的集合替换了模型层，这很容易在控制器中生成和合并视图功能，留下模板作为完整视图的替代品。它是最初目标的完美解决方案，但是当它开始在其他领域传播时，引入了大量对 MVC 和 MVC 启发的设计模式的误解，例如*“视图只是一个模板”*和*“模型是 ORM”*。]

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-02T16:13:44.857

你的控制器方法应该尽可能的精简，这意味着*数据访问属于模型*（或者更具体地说，一个 Repository 对象）。

将您的控制器方法视为一个开关场......它们只负责将任务委派给其他方法执行。

如果您在控制器中编写任何 Linq 代码，则您正在创建一个依赖项，如果您的站点结构发生更改，则必须修改该依赖项，并且您可能会复制数据访问代码。但是`GetCustomer`在模型中仍然是`GetCustomer`，无论您从控制器中的何处调用它。那有意义吗？

比简单地访问数据更广泛的业务逻辑可以放入它自己的业务逻辑层，这被认为是模型的一部分。

我不太确定JSON。JSON 只是一种替代数据表示；如果您有一个实用方法可以将您的数据类转换为 JSON，请`GetCustomer`从模型中调用，并在您的控制器方法中执行到 JSON 的转换。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-02T16:09:51.727

模型应该处理数据访问。

来自[MSDN](http://msdn.microsoft.com/en-us/library/dd381412%28VS.98%29.aspx)：

> 楷模。模型对象是应用程序中实现应用程序数据域逻辑的部分。通常，**模型对象检索模型状态并将其存储在数据库**中。例如，Product 对象可能会从数据库中检索信息，对其进行操作，然后将更新的信息写回 SQL Server 数据库中的 Products 表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-02T16:11:43.173

在 MVC 中，模型负责处理数据访问。优点是所有数据访问代码都由模型逻辑封装。如果您在控制器中包含数据访问代码，您将膨胀控制器并破坏 MVC 模式。

# iphone - 首先按“最近距离”对两个 NSMutableArrays 进行排序

> ID：12694079
> 
> 赞同：1
> 
> 时间：2012-10-02T16:08:22.043
> 
> 标签：iphone, objective-c, ios, xcode, nssortdescriptor

我有两个数组，都充满了这样的 NSString 对象：

```
NSMutableArray *titles = [[NSMutableArray alloc] initWithObjects:@"Title1", @"Title2", @"Title3", @"Title4", @"Title5", nil];

NSMutableArray *distances = [[NSMutableArray alloc] initWithObjects:@"139.45", @"23.78", @"347.82", @"10.29", @"8.29", nil]; 
```

如何首先按最近的距离对两个数组进行排序？

所以结果会是这样的：

```
titles = @"Title5", @"Title4", @"Title2", @"Title1", @"Title3"
distances = @"8.29", @"10.29", @"23.78", @"139.45", @"347.82" 
```

我知道 NSSortDescriptor 可以在这些情况下使用，但是在查看文档后，我仍然不确定如何使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:16:26.450

您可以使用 NSComparator 块并使用 NSArray 的 sortedArrayUsingComparator 方法。在该块上，您将收到两个要比较的对象，根据比较结果，您可以使用 NSMutableArray exchangeObjectAtIndex:withObjectAtIndex: 方法更改标题的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:27:09.503

我会以这种方式对距离进行排序......

```
NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];

NSArray *sortedDistances = [listItem sortedArrayUsingComparator: ^(id a, id b) {
    NSNumber *aNum = [f numberFromString:a];
    NSNumber *bNum = [f numberFromString:b];
    return [aNum compare:bNum];
}]; 
```

我想不出一种特别快速的方法来对相关标题进行排序，但这应该可以......

```
NSMutableArray *sortedTitles = [NSMutableArray array];
NSDictionary *distanceTitle = [NSDictionary dictionaryWithObjects:titles forKeys:distances];

for (NSString *distance in sortedDistances) {
    NSString *associatedTitle = [distanceTitle valueForKey:distance];
    [sortedTitles addObject:associatedTitle];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:16:00.317

这是我如何按距离值对字典数组进行排序的示例：

```
 -(void)reorderByDistance {
    NSSortDescriptor *sortByName = [NSSortDescriptor sortDescriptorWithKey:@"distance" ascending:YES];
    NSArray *sortDescriptors = [NSArray arrayWithObject:sortByName];
    self.contentArray = [self.contentArray sortedArrayUsingDescriptors:sortDescriptors];
} 
```

我的字典是这样的：

```
 NSDictionary *dict1 = [[NSDictionary alloc] initWithObjectsAndKeys:@"1", @"id", @"Business #1", @"name", @"This business does some pretty remarkable things", @"description", @"Alley Bar", @"category", @"1.2", @"distance", nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T16:56:56.523

一种方法是创建一个字典，将标题映射到距离，对距离进行排序，然后遍历距离以重新创建标题：

```
NSMutableArray *titles = [[NSMutableArray alloc] initWithObjects:@"Title1", @"Title2", @"Title3", @"Title4", @"Title5", nil];

NSMutableArray *distances = [[NSMutableArray alloc] initWithObjects:@"139.45", @"23.78", @"347.82", @"10.29", @"8.29", nil];

//Create a map of current titles to distances
NSDictionary *titleDistanceMap = [NSDictionary dictionaryWithObjects:titles forKeys:distances];

//Need to sort the strings as numerical values
[distances sortUsingComparator:^(NSString *obj1, NSString *obj2) {

    return [obj1 compare:obj2 options:NSNumericSearch];
}];

//Now re-populate the titles array
[titles removeAllObjects];

for (NSString *distance in distances){
    [titles addObject:[titleDistanceMap objectForKey:distance]];
} 
```

# php - 带有 Ajax 和 PHP 的登录表单

> ID：12694087
> 
> 赞同：0
> 
> 时间：2012-10-02T16:09:04.130
> 
> 标签：php, jquery, ajax, json, login

我需要使用 jSON 和 Ajax 登录到数据库以将其刷新到自身。这是执行此操作的固定代码：

< auth.php >`

```
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"
    type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript">
        $(document).ready(function() {

$("#login").click(function() {

    var action = $("#form1").attr('action');
    var form_data = {
        email: $("#email2").val(),
        password: $("#password").val(),
    };
$.getJSON("login.php",form_data,function(data){
    switch(data.retval){
      case 0: $("#form").html("You have logged in successfully,"+ data.data.displayName+"!");
      break;
      case 1: $("#status").html("Invalid Username/Password, please try again.");
      break;
      default: $("#status").html("Database error, please try again.");
      break;
   }
});
});
});
    </script>
</head>

<body>
    <div id="fullBG">
        <div id="formBG">
            <div id="form">
                <div id="status">
                    <br />
                    <br />
                </div>
                <form id="form1" name="form1" action="login.php" method="post">
                    <input type="email" placeholder="Email" name="email" id="email2" size="30">
                    <br>
                    <input type="password" placeholder="Password" name="password" id="password"
                    size="30">
                    <br>
                    <input type="button" value="Login" class="sub" id="login">
                </form>
                <br />
                <br />
                <form method="link" action="register.php">
                    <input type="submit" value="Register" class="register">
                </form>
            </div>
        </div>
    </div>
</body>

</html>` 
```

<登录.php >`

```
<?php
ob_start();
session_start();
mysql_connect('', '', '') or 
die('Could not connect: ' . mysql_error());
mysql_select_db('phppro2') or
die ('Can\'t use database: ' . mysql_error());

// retval: 0 - login ok, 1 - login failed, 2 - internal error
$json = array("retval" => 2, "data" => NULL, "debug" => "");

$email = mysql_real_escape_string($_REQUEST['email']);
$password = mysql_real_escape_string($_REQUEST['password']);

$sql="SELECT * FROM users WHERE email='$email' and password='$password'";

$json['debug'] .= "SQL query was: ".$sql."\n";
$result=mysql_query($sql);
if (!$result) {
$json['debug'] .= "SQL query failed\n";
$json['debug'] .= "Other output: ". ob_get_contents();
ob_end_clean();
die(json_encode($json));
}
$count=mysql_num_rows($result);

if($count==1){
$json['retval'] = 0;
$json['data'] = mysql_fetch_assoc($result);
} else {
$json['retval'] = 1;
}
$json['debug'] .= "Other output: ". ob_get_contents();
ob_end_clean();
echo json_encode($json);` 
```

// 老问题：

我需要从我的数据库中检索信息并使用 Ajax 加载它。我一切正常，但我的 auth.php 文件被覆盖，我丢失了它。我试图追溯我的脚步，但我迷路了。页面不再自行刷新，也不再检索数据。（我删除了我的数据库信息，但它已连接）

我的 login.php 我没有改变，所以我认为它是准确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:26:49.533

1）您不应该保留两个按钮的相同 ID（注册和登录按钮）

2）如下更改您的javascript函数

```
 $.getJSON("login.php",form_data,function(data){
        switch(data.retval){
          case 0: $("#form").html("You have logged in successfully,"+ data.data.displayName+"!");
          break;
          case 1: $("#status").html("Invalid Username/Password, please try again.");
          break;
          default: $("#status").html("Database error, please try again.");
          break;
       }
    } 
```

3）你的状态 div 也应该是空白的

```
<div id="status"></div> 
```

[4) http://samaradionne.com/phppro2/auth.php](http://samaradionne.com/phppro2/auth.php)上的语法错误

```
$(document).ready(function() {

    $("#login").click(function() {

        var action = $("#form1").attr('action');
        var form_data = {
            email: $("#email").val(),
            password: $("#password").val(),
        };
 $.getJSON("login.php",form_data,function(data){
        switch(data.retval){
          case 0: $("#form").html("You have logged in successfully,"+ data.data.displayName+"!");
          break;
          case 1: $("#status").html("Invalid Username/Password, please try again.");
          break;
          default: $("#status").html("Database error, please try again.");
          break;
       }
    });
  });
}); 
```

# android - Android Gallery可见ImageView为空？

> ID：12694089
> 
> 赞同：1
> 
> 时间：2012-10-02T16:09:07.910
> 
> 标签：android, imageview, gallery, android-gallery

我想为单击的图像视图画一个复选标记，并在使用以下代码片段之前取消选中我单击的图像视图。我将最后检查的位置存储在 mDeviceAdapter 中。当我尝试取消选中旧位置时，即使对于部分可见的图像视图，图像视图也总是给出 null。我真的很困惑，因为我认为只有不可见的被回收...... Android 新手，任何评论都值得赞赏。

```
 public void CheckableImageView#setChecked(boolean checked) {
    if (mChecked != checked) {
        mChecked = checked;
        invalidate();
    }
}

    mDeviceGallery.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {

                    CheckableImageView viewToCheck = (CheckableImageView) view;
                    if (!viewToCheck.isChecked()) {
                        int oldCheckedPosition = mDeviceAdapter
                                .getCheckedPosition();
                        mDeviceAdapter.setCheckedPosition(position);
                        View checkedView = mDeviceGallery
                                .getChildAt(oldCheckedPosition);
                        Log.d(TAG, "old position="+oldCheckedPosition + "old view="+checkedView);
                        if (checkedView != null) {
                            ((CheckableImageView) checkedView)
                                    .setChecked(false);
                            Log.d(TAG, "uncheck position="
                                    + oldCheckedPosition);
                        }
                        viewToCheck.setChecked(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:50:03.190

这不是正确的做法。您需要在数据类型中添加一个布尔字段（即 mIsChecked）。在`onItemClick`方法上将该变量的值设置为 true 并将其 INDEX 保留为适配器的成员。单击另一个项目时，将该项目的值设置为 true，并将保存的项目的值设置为 false（更改您`ArrayList`在上次单击中存储的 INDEX 中的数据类型的值）。

现在，在`getView()`方法中，您必须有 if/else 语句。就像是：

```
if (item.isChecked())
{
    checkedView.setChecked(true);
}
else
{
    checkedView.setChecked(false);
} 
```

方法示例`onClick`：（只是一个大方向）

```
if (item.isChecked())
    {
        checkedView.setChecked(false);
        yourList.get(position).setChecked(true);
        yourList.get(mLastCheckedIndex).setChecked(false);
        mLastCheckedIndex = position;
        notifyDataSetChanged();
    }
    else
    {
        //same but opposite.
    } 
```

希望这可以帮助！

# python - Python lxml - 如何删除空的重复标签

> ID：12694091
> 
> 赞同：7
> 
> 时间：2012-10-02T16:09:15.360
> 
> 标签：python, xml, lxml

我有一些由可能有也可能没有空元素的脚本生成的 XML。有人告诉我，现在 XML 中不能有空元素。这是一个例子：

```
<customer>  
    <govId>
       <id>@</id>
       <idType>SSN</idType>
           <issueDate/>
           <expireDate/>
           <dob/>
           <state/>
           <county/>
           <country/>
    </govId>
    <govId>
        <id/>
        <idType/>
        <issueDate/>
        <expireDate/>
        <dob/>
        <state/>
        <county/>
        <country/>
    </govId>
</customer> 
```

输出应如下所示：

```
<customer>  
    <govId>
       <id>@</id>
       <idType>SSN</idType>        
    </govId>        
</customer> 
```

我需要删除所有空元素。您会注意到，我的代码取出了“govId”子元素中的空白内容，但第二次没有取出任何内容。我目前正在使用 lxml.objectify。

这基本上是我正在做的事情：

```
root = objectify.fromstring(xml)
for customer in root.customers.iterchildren():
    for e in customer.govId.iterchildren():
        if not e.text:
            customer.govId.remove(e) 
```

有谁知道用 lxml objectify 做到这一点的方法，还是有更简单的方法？如果它的所有元素都是空的，我还想完全删除第二个“govId”元素。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T16:52:15.637

首先，您的代码的问题是您正在迭代`customers`，但没有结束`govIds`。在第三行，您为每个客户获取*第* `govId`一个，并迭代其子代。因此，您需要另一个`for`循环才能使代码按预期工作。

问题末尾的这个小句子使问题变得更加复杂：*如果第二个“govId”元素的所有元素都是空的，我还想将其全部删除。*

这意味着，除非你想硬编码只检查一层嵌套，否则你需要**递归地**检查一个元素及其子元素是否为空。像这样的例子：

```
def recursively_empty(e):
   if e.text:
       return False
   return all((recursively_empty(c) for c in e.iterchildren())) 
```

**注意**：Python 2.5+ 因为使用了[`all()`内置](http://docs.python.org/library/functions.html#all)的.

然后，您可以将代码更改为类似这样的内容，以删除文档中一直为空的所有元素。

```
# Walk over all elements in the tree and remove all
# nodes that are recursively empty
context = etree.iterwalk(root)
for action, elem in context:
    parent = elem.getparent()
    if recursively_empty(elem):
        parent.remove(elem) 
```

样本输出：

```
<customer>
  <govId>
    <id>@</id>
    <idType>SSN</idType>
  </govId>
</customer> 
```

您可能想要做的一件事是细化`if e.text:`递归函数中的条件。目前这将考虑`None`空字符串为空，但不考虑空格和换行符之类的空格。[`str.strip()`](http://docs.python.org/library/string.html#string.strip)如果这是您对“空”的定义的一部分，请使用。

* * *

**编辑**：正如@Dave 所指出的，递归函数可以通过使用[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)来改进：

```
return all((recursively_empty(c) for c in e.getchildren())) 
```

这不会`recursively_empty(c)`一次评估所有孩子，而是懒惰地评估每个孩子。由于`all()`将在第一个`False`元素上停止迭代，这可能意味着显着的性能改进。

**编辑 2**：可以通过使用`e.iterchildren()`而不是进一步优化表达式`e.getchildren()`。这适用于[lxml etree API](http://lxml.de/api.html)和[objectify API](http://lxml.de/objectify.html)。

# permissions - 为什么我不能在另一个用户的可执行文件上运行 Valgrind？

> ID：12694092
> 
> 赞同：1
> 
> 时间：2012-10-02T16:09:16.530
> 
> 标签：permissions, valgrind

我想在同一系统上另一个用户构建的可执行文件上运行 Valgrind。当我这样做时，我没有收到错误的行号，这几乎违背了目的。相反，我得到的错误看起来好像可执行文件是在没有符号表的情况下构建的，或者我无法读取文件。

我检查过的事情：

*   正在运行的用户对所有源文件以及它们在文件中的目录具有读取权限。
*   使用 sudo -u running_user 运行不起作用，但是，如果不重新编译，使用 root 权限运行确实可以。

Valgrind 需要什么权限才能运行？此错误是由权限以外的原因引起的吗？

# c# - 在 MVC3 的表单身份验证中将协议 https 更改为 GetRedirectUrl 的 http

> ID：12694095
> 
> 赞同：0
> 
> 时间：2012-10-02T16:09:35.953
> 
> 标签：c#, asp.net-mvc, ssl, https

使用带有 requireSSL = true 的表单。

在成功登录时，我正在做

```
FormsAuthentication.GetRedirectUrl(username, rememberMe); 
```

GetRedirectUrl 返回例如：'/www.domainname.com/' 并使其以[https://www.domainname.com/](https://www.domainname.com/)结尾，而我想以[http://www.domainname.com/结尾](http://www.domainname.com/)

这是一个变量 ReturnUrl。

我希望这明确地将其更改为 http 而不是 https。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:36:06.537

```
var redirectUrl = new Uri(FormsAuthentication.GetRedirectUrl(username, rememberMe), UriKind.RelativeOrAbsolute);
var parts = redirectUrl.Split('?');
var builder = new UriBuilder(Request.Url);
builder.Scheme = "http";
builder.Path = parts[0];
if (parts.Length > 1)
{
    builder.Query = parts[1];
}
string url = builder.ToString(); 
```

# java - 奇怪的问题：jsp里面的jsf不工作

> ID：12694099
> 
> 赞同：2
> 
> 时间：2012-10-02T16:10:09.323
> 
> 标签：java, jsp, jsf, web-applications, jsf-2

我已经使用 JSF 2.0 & JSP 创建了 Web 应用程序，但遇到了一些奇怪的问题。

我在 JSF 中有页面，其中包含 JSP 页面。代码如下。

```
<o:resourceInclude path="detailedReports.jsp" /> 
```

其中 o 是全脸。`xmlns:o="http://omnifaces.org/ui"`

现在在 JSP (detailedReports.jsp) 我有如下代码。

```
<h:form id="myForm" prependId="false">
    <h:commandLink value="Take Me To Some Page" action="#{PersonalInformationDataBean.moveToApplicantRegisterPage()}" />
</h:form> 
```

`moveToApplicantRegisterPage()`有以下代码

```
public String moveToApplicantRegisterPage() {
    editedData = 1;
    return takeMeToAnotherPage("registerForPatentss");
} 
```

当我点击`Take Me To Some Page`链接时，我被定向到`detailedReports.jsp`而不是`registerForPatentss.xhtml`.

为什么会发生这种情况？我应该怎么做才能重定向到`registerForPatentss.xhtml`.

**注意：**在重定向到 时`registerForPatentss.xhtml`，我还需要将 的数据设置`int editedData`为`1`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:16:18.543

这可能是与混合两种不同的视图技术（JSP 和 facelets）相关的渲染问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:38:55.940

我不认为有任何解决方案。所以我所做的是，在 JSF 中采用 JSP，即我以 JSF 格式重新编写 JSP 内容。所以现在我没有任何 JSP 页面。

一切正常！！！

# wso2esb - wso2 ESB xslt 转换问题

> ID：12694101
> 
> 赞同：0
> 
> 时间：2012-10-02T16:10:35.780
> 
> 标签：wso2esb

我希望有人可以就我遇到的 xslt 问题提供一些指导。我将通用 XML 消息接收到代理服务中，然后我需要将 xml 包装在肥皂消息中并将其转发到axis2 jms 服务。

我已经使用 saxon 和 xalan 引擎针对我的 xml 测试了 stylehseet，它们都按预期工作，但 wso2 不会接受它我收到错误 WstxParsingException: String ']]>' not allowed in text content if I have the CDATA section （我需要）。

任何建议将不胜感激谢谢保罗

样式表如下

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"     xmlns:klr="http://klr.com">
    <xsl:output method="xml" indent="yes" encoding="UTF-8" cdata-section-elements="klr:legaldocument"/>
    <xsl:template match="/">
        <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:klr="http://klr.com">
            <SOAP-ENV:Body>
                <klr:Hypertext>
                    <klr:legaldocument>
                        <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
                        <xsl:apply-templates select="*"/>
                        <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
                    </klr:legaldocument> 
                 </klr:Hypertext>
            </SOAP-ENV:Body>
        </SOAP-ENV:Envelope>
    </xsl:template>
    <xsl:template match="node()">
        <xsl:element name="{local-name(.)}">
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates select="node()|*"/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:36:25.550

只是您的第二个模板不起作用。这是工作完整的样式表：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:klr="http://klr.com">
    <xsl:output method="xml" indent="yes" encoding="UTF-8" cdata-section-elements="klr:legaldocument"/>
    <xsl:template match="/">
        <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:klr="http://klr.com">
            <SOAP-ENV:Body>
                <klr:Hypertext>
                    <klr:legaldocument>
                        <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
                        <xsl:apply-templates select="*"/>
                        <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
                    </klr:legaldocument> 
                </klr:Hypertext>
            </SOAP-ENV:Body>
        </SOAP-ENV:Envelope>
    </xsl:template>
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

[有关更多信息，请参阅此处的此条目。](https://stackoverflow.com/questions/1650356/cdata-in-xslt-for-html)

# c# - DoExpressCheckoutPayment 处理付款然后超时

> ID：12694105
> 
> 赞同：0
> 
> 时间：2012-10-02T16:10:48.433
> 
> 标签：c#, asp.net, paypal, paypal-sandbox

在从 SetExpressCheckOut 获得令牌和 payerID 之后，我现在希望从用户那里真正获得资金。

使用 paypal 函数向导生成的代码，我正在调用 ConfirmPayment 函数。

问题是该函数被成功调用并处理了用户的付款，但随后我收到了超时错误。所以我得到了他们的钱，而用户得到了一个超时页面。不是留住客户的最佳方式。

```
The operation has timed out

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Net.WebException: The operation has timed out

Source Error: 

Line 313:
Line 314:        //Retrieve the Response returned from the NVP API call to PayPal
**Line 315:        HttpWebResponse objResponse = (HttpWebResponse)objRequest.GetResponse();**
Line 316:        string result;
Line 317:        using (StreamReader sr = new StreamReader(objResponse.GetResponseStream())) 
```

我在第 315 行得到了一个超时，它源自 paypal 函数的 HTTPCall 函数。

public string HttpCall(string NvpRequest) //CallNvpServer { string url = pendpointurl;

```
 //To Add the credentials from the profile
    string strPost = NvpRequest + "&" + buildCredentialsNVPString();
    strPost = strPost + "&BUTTONSOURCE=" + HttpUtility.UrlEncode( BNCode );

    HttpWebRequest objRequest = (HttpWebRequest)WebRequest.Create(url);
    objRequest.Timeout = Timeout;
    objRequest.Method = "POST";
    objRequest.ContentLength = strPost.Length;
    //Retrieve the Response returned from the NVP API call to PayPal
    **HttpWebResponse objResponse = (HttpWebResponse)objRequest.GetResponse();** (Line 315)
    string result;
    using (StreamReader sr = new StreamReader(objResponse.GetResponseStream()))
    {
        result = sr.ReadToEnd();
    }

    return result;
} 
```

我觉得这可能与 Paypal 的服务器有关，但无论哪种方式，它都不起作用，并且如果它上线会惹恼用户。你们知道为什么会突然超时吗？之前在 SetExpressCheckOut 中使用了相同的 HTTPCall，并且工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:14:12.007

似乎 paypalfunctions.cs 中有一个变量指示页面的超时。它设置为 5000，我只是将其提高到 50000，因为页面加载时间超过 5 秒并且超时。

# math - 收集数学中的常用术语

> ID：12694106
> 
> 赞同：0
> 
> 时间：2012-10-02T16:10:51.180
> 
> 标签：math, wolfram-mathematica, mathematical-optimization

我有一个复杂**的 x1, x2, x3,...,x10 表达式**。**它们包括 4 个操作（+、-、*、/）和平方根**

我想收集每个变量的常用术语。

例如我有

**F = x1 + 2*x2 + 5x3 -Sqrt(x4 + x5) + x7 +...一些又长又复杂的东西**

我想改成下面的形式：

**F = A*x1 + B*x2 + C*x3 + D*x4 +...+（某物）*xn**

如果在mathematica中有什么方法可以做到这一点，请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:04:46.020

尝试使用 CoefficientList，然后使用 Total 和 Table。像这样的东西：

`cef = CoefficientList[a + b x + c x + Sin[c] x^2 + x^2 + x^3, x]; Total[Table[cef[[i]] x^i, {i, 1, 4}]]`

还可以尝试使用即使使用 sqrt(x) 也应该工作的 Collect[]。但是，如果你有像 Sqrt(x4 + x5) 这样的东西，我真的认为你不能把它拆开，可以吗？

# javascript - 从单个点拉伸/扭曲背景图像

> ID：12694108
> 
> 赞同：1
> 
> 时间：2012-10-02T16:11:06.263
> 
> 标签：javascript, jquery, css

通常，当在 javascript 或 css3（使用背景大小）中调整图像大小时，它会从中心点拉伸图像。我需要从可以在任何地方的单个点拉伸和扭曲图像。它将是动态的，所以我不想诉诸使用单独的图像。

这是一张图片，说明了我的意思：
![在此处输入图像描述](../Images/7bd4a8a9ba74005c08ba01ed13565d88.png)

希望那里有答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:36:07.097

您有几个选项可以实现此效果。

“正确”的方法是使用画布绘制图像：[使用画布单独倾斜图像](https://stackoverflow.com/questions/9253091/skewing-images-individually-using-canvas)

另一种方法是使用 CSS 变换倾斜来伪造效果。 [http://developerdrive.com/demo/skewing_elements/skewing_elements.html](http://developerdrive.com/demo/skewing_elements/skewing_elements.html)

您可以在具有“溢出：隐藏”的元素内执行此操作，使其看起来像背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:37:44.090

我什至不清楚你想要从你链接的图像中得到什么。你想要它扭曲还是不扭曲？失真是否均匀？

我猜你正在做的任何事情都可以通过从某个图像的中心绘制一组不断减少的（或者可能是矩形）并将它们绘制到“画布”上来近似（认为通用术语不是 html5 术语）给定每个剪辑中心的新坐标。可能有一种比多次重绘图像部分更快的方法来绘制它，这就是我想象它可能工作的方式......至少在某种数学意义上可能是这样。

# html - 在转义的 html 中呈现换行符

> ID：12694110
> 
> 赞同：6
> 
> 时间：2012-10-02T16:11:22.277
> 
> 标签：html, newline, line-breaks

我们有一个默认自动生成的显示消息，但可能会被来自 url 的 GET vars 覆盖。由于我们需要将消息视为用户输入，因此必须对其进行转义以进行显示。但是，我们希望保留包含换行符的能力。

**Newlines as`<br>`**
这不起作用，因为转义 HTML 会破坏`<br>`标签。

**换行符，因为`\n`**
我不知道如何`\n`渲染为换行符。我认为把它放在标签中会正确呈现，但没有运气：http: [//jsfiddle.net/7L932/](http://jsfiddle.net/7L932/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T16:13:44.873

转义 HTML，**然后**替换`\n`为`<br>`.

如果您想使用 \n，我会为您修复您的小提琴[http://jsfiddle.net/hr3bg/](http://jsfiddle.net/hr3bg/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T16:14:24.047

你所做的或多或少都很好，除了你应该`\n`在你的 html 中放置字符（换行符），而不是转义序列（Prinzhorn 所说的也很有意义，所以我会支持他）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-07-09T15:25:17.200

将包装器 html css 设置`white-space: pre-line`为对我有用。它启用了 \n 字符的换行功能

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T16:18:27.967

您的理论听起来不错，但`\n`不是 HTML 认可的插入新行的方式。它要么显式出现（因为我已插入新`.linebreaks`元素）作为标记中的文字返回，要么，如果您使用一些可以识别的中间脚本语言*（*如`\n`JS），那么就这样做（就像我已经`.linebreaks`使用我插入的 jQuery 代码完成您的第一个操作。

请参阅我对您的示例的调整：http: [//jsfiddle.net/barney/7L932/2/](http://jsfiddle.net/barney/7L932/2/)

# mysql - 如果一个值连接到多个不想要的值，我如何确保它不会返回？

> ID：12694113
> 
> 赞同：3
> 
> 时间：2012-10-02T16:11:28.930
> 
> 标签：mysql

我的问题的措辞并不完美，但基本上这就是问题所在。

我在“作品”表中有两列。一列是姓氏列表，另一列是人们居住的城市列表。

我不希望我的查询返回任何住在芝加哥的人。

我目前的代码是：

```
select lives.last_name 
from lives  
where lives.city <> "Chicago"; 
```

但是有些人住在芝加哥和其他地方，比如迈阿密，他们仍然出现。我如何只返回不住在芝加哥而不使用组或计数功能的人（还没有那么远）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:17:15.387

你可以使用这样的东西`NOT EXISTS`：

```
select a.last_name
from lives a
where not exists (select last_name
                   from lives b
                   where a.last_name = b.last_name
                       and city = 'chicago') 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b633d/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:16:52.143

尝试使用`NOT IN`

```
SELECT last_name
FROM lives
WHERE last_name NOT IN
   (
     SELECT last_Name
     FROM lives
     WHERE city = 'Chicago'
   ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:10:49.093

您可以按姓氏分组选择所有城市，然后过滤不包含芝加哥的记录：

```
Select Last_name, City
from lives
group by Last_name
having group_concat(city) not Regexp 'Chicago' 
```

# wordpress - 在 Wordpress 中突出显示当前页面/内容类型

> ID：12694114
> 
> 赞同：0
> 
> 时间：2012-10-02T16:11:40.780
> 
> 标签：wordpress

我从自定义帖子类型“服务”创建菜单，我想突出显示我所在的页面。我怎么做？

除了我需要帮助的这部分之外，一切都在下面的代码中（在此代码下方）中工作：

```
if ( current_page_on == this_menu_item_from_loop ) {
    // This is the current page - highlight the <li>
} 
```

...

```
<?php
$type = 'services';
$args=array('post_type' => $type);

$my_query = null;
$my_query = new WP_Query($args);
if( $my_query->have_posts() ) {
    while ($my_query->have_posts()) : $my_query->the_post();
        if ( current_page_on == this_menu_item_from_loop ) {
            // This is the current page - highlight the <li>
        }
    ?>
        <li><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></li>
    <?php
  endwhile;
}
wp_reset_query();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:16:48.563

我自己解决了:)

```
<?php
    $page_ID = get_the_ID();

    $type = 'services';
    $args=array(
      'post_type' => $type);

    $my_query = null;
    $my_query = new WP_Query($args);
    if( $my_query->have_posts() ) {
        while ($my_query->have_posts()) : $my_query->the_post();
            if ( get_the_ID() == $page_ID ) {
                $current = ' class="current"';
            }
        ?>
            <li><a href="<?php the_permalink() ?>"<?php echo $current; ?>><?php the_title(); ?></a></li>
        <?php
            $current = '';
      endwhile;
    }
    wp_reset_query();
    ?> 
```

# jquery - 使用 jquery 禁用单选按钮

> ID：12694116
> 
> 赞同：0
> 
> 时间：2012-10-02T16:11:43.020
> 
> 标签：jquery, primefaces, radio-button

我知道围绕这个主题还有其他问题，但没有一个答案对我有用。也许我错过了一些东西，但我已经用尽了所有方法。如果已经选中，我需要禁用“是”单选按钮。我的逻辑是在选中“是”时启动。我不希望它再次被解雇。下面是我的代码。希望第二双眼睛会有所帮助。

```
function startDetection(checkbox) {

 if(checkbox.value == "true") {
  //other logic here that works just fine.
 $j(PrimeFaces.escapeClientId('wizard-form:sec:rememberMyDevice:0')).attr('disabled',              true); 
```

我知道“PrimeFaces.escapeClientId”有点奇怪，但这似乎是我能够调用 UI 元素的唯一工作方式。我已经尝试了所有正常的 jQuery 调用，但均无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:38:00.650

要禁用：

```
$('#elementId').attr('disabled', 'disabled'); 
```

要重新启用它：

```
$('#elementId').removeAttr('disabled'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:25:32.030

要禁用元素，您应该使用：

```
$('#id').attr('disabled', 'disabled'); 
```

并重新启用：

```
$('#id').attr('disabled', ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:32:56.220

您还可以使用全新的道具功能：

```
$('#id').prop('disabled', true);
$('#id').prop('disabled', false); 
```

# hadoop - 这是一个可行的 MapReduce 用例，甚至可以执行吗？

> ID：12694119
> 
> 赞同：0
> 
> 时间：2012-10-02T16:11:48.247
> 
> 标签：hadoop, mapreduce, bigdata

我是 Hadoop、MapReduce、大数据的新手，我正在尝试评估它对于我正在从事的项目非常有趣的特定用例的可行性。但是，我不确定我想要完成的是 A) 可能还是 B) 建议使用 MapReduce 模型。

我们基本上有大量的小部件（已知的数据结构）和定价模型（编码在 JAR 文件中），我们希望能够执行小部件和定价模型的每个组合，以确定定价的结果。模型的排列。定价模型本身将检查每个小部件并根据模型中的决策树确定定价。

在我看来，从商品基础架构的并行处理角度来看，这是有道理的，但从技术角度来看，我不知道是否可以在 MR 作业中执行外部模型，从实际角度来看，我是否试图强制使用用例进入技术。

因此问题变成了是否可能；以这种方式实施是否有意义？如果不是，还有哪些其他选项/模式更适合这种情况？

编辑数量和种类将随着时间的推移而增长。为了便于讨论，假设我们目前有 1TB 的小部件和 10 种定价模型。然后，我们期望进入数 TB 和数百个定价模型，并且随着小部件的更改和/或添加以及引入新类别的定价模型，排列的执行将频繁发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:23:58.700

您当然需要一个可扩展的、可并行化的解决方案，而 hadoop 就是这样。您只需稍微调整一下您的解决方案，使其适合 hadoop 世界。

首先，您需要使模型和小部件实现通用接口（这里说得很抽象），以便您可以将任意模型应用于任意小部件，而无需了解任何有关实际实现或表示的信息。

其次，您必须能够通过 id 引用模型和小部件。这将允许您构建包含模型 id 和小部件 id 的对象（可写），因此将代表小部件和模型的交叉产品中的一个“单元”。您将这些实例分布在多个服务器上，并在此过程中将模型的应用程序分布到多个服务器上的小部件。这些对象（称为 ModelApply 类）将保存特定模型到小部件应用程序的结果，并且可以使用 hadoop 以通常的方式处理以重新发布到最佳应用程序上。

第三，这是棘手的部分，您需要计算模型与小部件的实际叉积。您说模型的数量（以及模型 ID）最多为数百个。这意味着您可以将该 id 列表加载到映射器中的内存中，并将该列表映射到小部件 id。对映射器的 map() 方法的每次调用都会传入一个小部件 id，并会为每个模型写出一个 ModelApply 实例。

我暂时就这样吧。

# unix - Unix 写命令向另一个用户发送消息

> ID：12694125
> 
> 赞同：0
> 
> 时间：2012-10-02T16:12:21.550
> 
> 标签：unix, message-queue

我有一些手持式扫描仪，我想向（运行 Unix）发送消息，在使用 write 命令将消息发送到手持式扫描仪（计算机）给仓库地板上的某人后，消息保留在屏幕上（我们是使用 AML M7220 扫描仪）。有谁知道在消息会话结束后清除屏幕或刷新屏幕的方法。我曾尝试通过电子邮件向 AML 发送电子邮件并致电 AML 技术支持，但他们对回复电子邮件并没有给出废话，而且在致电时，它甚至不是有效的电话号码。AML 需要更新他们的网站！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:18:33.880

有许多命令可用于将消息发送给同一网络中的另一个用户

1.mesg 2.talk 3.write 4.wall 这些命令用于将消息发送给其他用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:01:57.987

`write`是一个相当低级的实用程序。它不知道远程终端末端的屏幕内容，并且碰巧在该终端上运行的任何其他东西都不知道它的屏幕刚刚被`write`会话污染了。实际上 UNIX tty 通常不知道它们上显示的是什么（它们或多或少只是字符流）。

您无法在`write`会话结束时清除屏幕，因为您可能这样做的唯一方法是通过`write`会话传递终端清除终端仿真序列，并且（现代）`write`不会让您这样做（它会逃避它）。

如果某种全屏应用程序碰巧正在运行，则无法重新绘制远程终端的屏幕，因为无法要求该应用程序执行此操作。

# javascript - 使用正则表达式将 $(5.20) 转换为 -5.20

> ID：12694127
> 
> 赞同：1
> 
> 时间：2012-10-02T16:12:26.303
> 
> 标签：javascript, jquery, regex

我正在尝试转换`$(5.20)`为`-5.20`使用正则表达式，但似乎无法弄清楚如何使用正则表达式。有人可以帮我解决这个问题吗？我需要删除美元符号，只接受最多 1 个小数点的数字，即不接受`5.2.0`，但只接受`5.20`。此外，`$`开头的 是可选的，也可以有多个`$`。

我开始的例子：

```
^\((\d)*\)$ - does not work

-$1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T16:18:23.907

试试这个正则表达式

```
^\$\((\d+\.\d+)\)$ 
```

你的替换应该已经没问题了。此正则表达式要求小数点前后至少有一位数字。

您的正则表达式的问题是，它只有在根本没有小数点的情况下才会匹配。你也不检查`$`字符。最后，如果这`$(5.20)`不是您的完整字符串，那么您应该在开头和结尾省略锚点：

```
\$\((\d+\.\d+)\) 
```

如果您也想匹配没有小数点的数字，那么您可以将点和第二次重复设为可选：

```
\$*?\((\d+\.?\d*)\) 
```

# eclipse - 豆茎与 wordpress

> ID：12694128
> 
> 赞同：1
> 
> 时间：2012-10-02T16:12:32.213
> 
> 标签：eclipse, wordpress, amazon-elastic-beanstalk

谁能告诉我如何开始在 eclipse 上使用 wordpress 并使用 AWS Elastic beanstalk 对其进行部署？

谢谢， Shripad D

# java - 循环列表

> ID：12694130
> 
> 赞同：1
> 
> 时间：2012-10-02T16:12:36.293
> 
> 标签：java, list, arraylist

我有一个包含字段 is 和 is_searchable 数据的列表

```
field_id i_searchable
1234     1
2344     0
4553     1 
```

我正在遍历列表以检查数据是否可搜索然后返回 true 否则返回 false

```
 public boolean validate() {
        LOGGER.info("in validate");
        boolean isSearchValue = false;
        LOGGER.info("is isSearchable" + fieldList.size());
        for (Field formFieldValMap : fieldList) {
            if (formFieldValMap.getIsSearchableField().equals("0")) {

                isSearchValue = false;
            } else {
                isSearchValue = true;
            }
        }

        return isSearchValue;
    } 
```

上面的函数返回真，我应该返回假。如果列表中 is_searchable 中的所有数据都为 1，那么只有它应该返回真。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:14:11.333

可能是另一种方式是假设列表全是 1。一看到 0 就将其设置为 false 并从循环中返回。

```
 boolean isSearchValue = true;

    for (Field formFieldValMap : fieldList) {
                if (formFieldValMap.getIsSearchableField().equals("0")) {

                    isSearchValue = false;
                    return;
                } 
            } 
```

注意：您可能需要注意其他条件，例如如果列表为空等该怎么办，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:16:51.247

如果要完成循环：

```
boolean isSearchValue = true;
for (Field formFieldValMap : fieldList) {
   isSearchValue &= formFieldValMap.getIsSearchableField().equals("1");
}
return isSearchValue; 
```

除此以外：

```
for (Field formFieldValMap : fieldList) {
   if (formFieldValMap.getIsSearchableField().equals("0")) {
       return false;
   }
}
return true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:15:08.357

您的代码只是告诉最后一个元素是否不等于“0”。用这个：

```
 public boolean validate() {
        LOGGER.info("in validate");
        boolean isSearchValue = false;
        LOGGER.info("is isSearchable" + fieldList.size());
        for (Field formFieldValMap : fieldList) {
            if (formFieldValMap.getIsSearchableField().equals("0")) {

                return false; //if any
            } 
        }

        return true;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-17T14:02:57.777

我参加聚会有点晚了，但对于使用 Java 8 的未来读者来说，这可以使用流 API 来解决。

```
public boolean validate() {
    return fieldList.stream().map(Field::getIsSearchableField).allMatch("1"::equals);
} 
```

# r - R中黄土的标准误

> ID：12694134
> 
> 赞同：5
> 
> 时间：2012-10-02T16:12:46.840
> 
> 标签：r, regression, lm, loess

我试图找到一个参考来解释如何计算局部多项式回归的标准误差？具体来说，在 R 中，可以使用 loess 函数获取模型对象，然后使用 predict 函数检索标准误差。在某处是否有实际发生的事情的参考？在残差中可能存在序列相关的情况下，必须使用 Newey-West 类型的方法对此进行调整，有没有一种方法可以像使用 lm 的常规 OLS 一样使用三明治包来做到这一点？

我尝试查看源代码，但标准错误计算调用了 C 函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T17:19:47.267

的“源代码”部分`?loess`告诉您底层 C 代码来自 Cleveland 等人的 cloess 包，并指向[它的 web 主页](http://www.netlib.org/a)：

> 资料来源：Cleveland、Grosse 和 Shyu 的 1998 年版 'cloess' 包。更高版本在 http://www.netlib.org/a> 上以“dloess”的形式提供。

去那里，你会发现一个[50 页的文档的链接（警告：postscript doc）](http://www.netlib.org/a/cloess.ps)，它应该告诉你关于这个黄土的实现你需要知道的一切。用克利夫兰的话来说：

> 本指南描述了使用黄土正确分析数据的关键步骤。请阅读。

特别感兴趣的是“第 4 节：统计和计算方法”的前几页。

# jquery - 如何将json数组数据附加到html表tbody

> ID：12694135
> 
> 赞同：1
> 
> 时间：2012-10-02T16:12:49.523
> 
> 标签：jquery, json

我对 jQuery 和 JSON 很陌生。我需要解析以下格式的 JSON 以填充 html 表格 tbody：

```
{"response":[["name0","id0","amt0"],["name1","id1","amt1"]]} 
```

但我不确定如何访问它们，所以通过以下方式获取 html 表：

```
header1 header2 header3
name0   id0     amt0
name1   id1     amt1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T16:17:17.100

未经测试，但可能类似于：

```
var jsondata=$.parseJSON('{"response":[["name0","id0","amt0"],["name1","id1","amt1"]]}');

$.each(jsondata.response, function(i, d) {
   var row='<tr>';
   $.each(d, function(j, e) {
      row+='<td>'+e+'</td>';
   });
   row+='</tr>';
   $('#table tbody').append(row);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T13:12:41.593

`jsonToHtmlTable(jsonObj, '#records');`在 HTML 之后调用（例如，在文档准备好的时候）

html

```
<table id="records">
    <thead>
        <tr></tr>
    </thead>
    <tbody></tbody>
</table> 
```

JavaScript

```
//Sample JSON Object (array of json objects)
var jsonObj = [{"a":1,"b":3,"ds":4},{"a":2,"b":5,"ds":4}];

//Use
$(document).ready(function(){
     jsonToHtmlTable(jsonObj, '#records');
});

//implementation
function jsonToHtmlTable(jsonObj, selector) {
    addColumns(jsonObj, selector);
    addRows(jsonObj, selector);
}

function addColumns(jsonObj, selector) {
    if (!$.isArray(jsonObj) || jsonObj.length < 1)
        return;
    var object = jsonObj[0];
    var theadHtml = "";
    for (var property in object) {
        if (object.hasOwnProperty(property))
            theadHtml += "<th>" + property + "</th>";
    }
    $(selector + ' thead tr').html(theadHtml);
}

function addRows(jsonObj, selector) {
    var tbody = $(selector + ' tbody');
    $.each(jsonObj, function (i, d) {
        var row = '<tr>';
        $.each(d, function (j, e) {
            row += '<td>' + e + '</td>';
        });
        row += '</tr>';
        tbody.append(row);
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:17:10.047

您可以使用以下 Javascript 表达式访问 JSON 结构：

```
var matrix = {"response":[["name0","id0","amt0"],["name1","id1","amt1"]]}; 
```

第 i 个元素的第 j 列可通过以下方式访问：

```
matrix.response[i][j] 
```

# c# - Windows Phone - 运行时的 Storyboard TargetName

> ID：12694136
> 
> 赞同：0
> 
> 时间：2012-10-02T16:12:52.130
> 
> 标签：c#, windows-phone-7, xaml, storyboard

如何在运行时为 DoubleAnimationUsingKeyFrames 设置 TargetName？

```
<Storyboard x:Name="sr">
    <DoubleAnimationUsingKeyFrames x:Name="keyFrameDA" Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationX)"  Storyboard.TargetName="cardBack">
        <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
        <EasingDoubleKeyFrame KeyTime="0:0:1" Value="0"/>
    </DoubleAnimationUsingKeyFrames>
</Storyboard> 
```

我试过了

```
Storyboard.SetTargetName(keyFrameDA, "cardBack"); 
```

但是 DoubleAnimationUsingKeyFrames 没有这样的属性。谢谢。

**更新**：当我使用此代码时会抛出此错误：

```
Storyboard.SetTargetProperty(keyFrameDa, new PropertyPath(PlaneProjection.RotationXProperty));
Storyboard.SetTarget(keyFrameDa, cardBack.Projection); 
```

错误：KeyFramesProperty - 无法获取字段“KeyFramesProperty”的值，因为有关包含类的信息不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:18:56.260

好吧，这个怎么样...

```
Storyboard.SetTargetProperty(keyFrameDa, new PropertyPath(PlaneProjection.RotationXProperty));
Storyboard.SetTarget(keyFrameDa, cardBack.Projection); 
```

# objective-c - 在 UITextView 上的 NSAttributedString 上设置字体忽略行距

> ID：12694137
> 
> 赞同：75
> 
> 时间：2012-10-02T16:12:56.403
> 
> 标签：objective-c, ios6

我正在尝试将属性字符串设置为 iOS 6 中的 UITextView。问题是，如果我尝试在属性字符串上设置字体属性，则会忽略行间距。但是，如果我不设置字体，并且使用默认字体，那么行距就可以了。

```
NSString *string = @" Hello \n world";
attrString = [[NSMutableAttributedString alloc] initWithString:string];
NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle defaultParagraphStyle] mutableCopy];

paragraphStyle.minimumLineHeight = 50;
// setting the font below makes line spacing become ignored
[attrString addAttribute:NSFontAttributeName value:[UIFont boldSystemFontOfSize:20] range:NSMakeRange(0, string.length)];
[attrString addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0, string.length)];

mainTextView.attributedText = attrString; 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-11-09T04:13:23.860

[属性字符串编程指南：](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/AttributedStrings/Tasks/CreatingAttributedStrings.html)

```
UIFont *font = [UIFont fontWithName:@"Palatino-Roman" size:14.0];
NSDictionary *attrsDictionary = [NSDictionary dictionaryWithObject:font
                                forKey:NSFontAttributeName];
NSAttributedString *attrString = [[NSAttributedString alloc] initWithString:@"strigil" attributes:attrsDictionary]; 
```

更新：我尝试`addAttribute:`在自己的应用程序中使用方法，但它似乎不适用于 iOS 6 模拟器：

`NSLog(@"%@", textView.attributedText);`

日志似乎显示正确添加的属性，但 iOS 模拟器上的视图未显示属性。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-04-28T11:38:11.503

我找到了你的问题，因为我也在和 NSAttributedString 打架。对我来说，`beginEditing`and`endEditing`方法起到了作用，就像在[改变属性字符串](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/AttributedStrings/Tasks/ChangingAttrStrings.html#//apple_ref/doc/uid/20000162-176048)中所说的那样。除此之外，lineSpacing`setLineSpacing`在段落样式中设置。

因此，您可能想尝试将代码更改为：

```
NSString *string = @" Hello \n world";
attrString = [[NSMutableAttributedString alloc] initWithString:string];
NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle defaultParagraphStyle] mutableCopy];

[paragraphStyle setLineSpacing:20]  // Or whatever (positive) value you like...    
[attrSting beginEditing];

[attrString addAttribute:NSFontAttributeName value:[UIFont boldSystemFontOfSize:20] range:NSMakeRange(0, string.length)];
[attrString addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0, string.length)];

[attrString endEditing];

mainTextView.attributedText = attrString; 
```

顺便说一句，虽然没有测试这个确切的代码，但我的看起来几乎一样。

### 编辑：

同时，我已经对其进行了测试，如果我错了，请纠正我，`- beginEditing`and`- endEditing`调用似乎非常重要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-10T06:54:43.347

```
//For proper line spacing

NSString *text1 = @"Hello";
NSString *text2 = @"\nWorld";
UIFont *text1Font = [UIFont fontWithName:@"HelveticaNeue-Medium" size:10];
NSMutableAttributedString *attributedString1 =
[[NSMutableAttributedString alloc] initWithString:text1 attributes:@{ NSFontAttributeName : text1Font }];
NSMutableParagraphStyle *paragraphStyle1 = [[NSMutableParagraphStyle alloc] init];
[paragraphStyle1 setAlignment:NSTextAlignmentCenter];
[paragraphStyle1 setLineSpacing:4];
[attributedString1 addAttribute:NSParagraphStyleAttributeName value:paragraphStyle1 range:NSMakeRange(0, [attributedString1 length])];

UIFont *text2Font = [UIFont fontWithName:@"HelveticaNeue-Medium" size:16];
NSMutableAttributedString *attributedString2 =
[[NSMutableAttributedString alloc] initWithString:text2 attributes:@{NSFontAttributeName : text2Font }];
NSMutableParagraphStyle *paragraphStyle2 = [[NSMutableParagraphStyle alloc] init];
[paragraphStyle2 setLineSpacing:4];
[paragraphStyle2 setAlignment:NSTextAlignmentCenter];
[attributedString2 addAttribute:NSParagraphStyleAttributeName value:paragraphStyle2 range:NSMakeRange(0, [attributedString2 length])];

[attributedString1 appendAttributedString:attributedString2]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-10T15:32:22.333

iOS 6 中存在一个错误，导致设置字体时忽略行高。请参阅 Radar 中对[NSParagraphStyle 行间距忽略](https://stackoverflow.com/questions/12562506/nsparagraphstyle-line-spacing-ignored)和更长的错误分析的回答[： UITextView Ignores Minimum/Maximum Line Height in Attributed String](http://www.cocoanetics.com/2012/12/radar-uitextview-ignores-minimummaximum-line-height-in-attributed-string/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-17T08:41:14.063

您可以使用[此示例](https://stackoverflow.com/a/51376546/1010644)并更改它的实现，如下所示：

```
[self enumerateAttribute:NSParagraphStyleAttributeName
                 inRange:NSMakeRange(0, self.length)
                 options:0
              usingBlock:^(id  _Nullable value, NSRange range, BOOL * _Nonnull stop) {
                  NSMutableParagraphStyle *paragraphStyle = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];

                  //add your specific settings for paragraph
                  //...
                  //...

                  [self removeAttribute:NSParagraphStyleAttributeName range:range];
                  [self addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:range];
              }]; 
```

# jquery - Jquery插件：如何从外部调用内部函数

> ID：12694138
> 
> 赞同：1
> 
> 时间：2012-10-02T16:13:04.257
> 
> 标签：jquery, jquery-plugins

```
(function ($) {
    $.fn.extend({
        leanModal : function (options) {
            var defaults = {
                top : 100,
                overlay : 0.5,
                closeButton : null
            };
            var overlay = $("<div id='lean_overlay'></div>");
            $("body").append(overlay);
            options = $.extend(defaults, options);
            return this.each(function () {
                var o = options;
                $(this).click(function (e) {
                    var modal_id = $(this).attr("href");
                    //$("#lean_overlay").click(function () {
                    //  close_modal(modal_id)
                    //});
                    $(o.closeButton).click(function () {
                        close_modal(modal_id)
                    });
                    var modal_height = $(modal_id).outerHeight();
                    var modal_width = $(modal_id).outerWidth();
                    $("#lean_overlay").css({
                        "display" : "block",
                        opacity : 0
                    });
                    $("#lean_overlay").fadeTo(200, o.overlay);
                    $(modal_id).css({
                        "display" : "block",
                        "position" : "fixed",
                        "opacity" : 0,
                        "z-index" : 11000,
                        "left" : 50 + "%",
                        "margin-left" :  - (modal_width / 2) + "px",
                        "top" : o.top + "px"
                    });
                    $(modal_id).fadeTo(200, 1);
                    e.preventDefault()
                })
            });
            function close_modal(modal_id) {
                $("#lean_overlay").fadeOut(200);
                $(modal_id).css({
                    "display" : "none"
                })
            }
        }
    })
})(jQuery); 
```

这是来自leanModal插件 - [http://leanmodal.finelysliced.com.au/](http://leanmodal.finelysliced.com.au/)

我应该如何在上述插件之外调用这个 close_modal() 函数？我想从 ajax 调用的成功回调中关闭弹出对话框。ajax 调用在外部 js 函数中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:47:59.820

只要您不介意更改供应商提供的源代码（如您在最初的问题中给出的那样），以下更改应该可以工作（请注意，这还没有经过全面测试，但它应该可以帮助您完成大部分工作） ：

```
(function ($) {
$.fn.extend({
    leanModal: function (method) {
        var methods = {
            init: function (options) {
                return this.each(function () {
                    var o = options;
                    $(this).click(function (e) {
                        var modal_id = $(this).attr("href");
                        //$("#lean_overlay").click(function () {
                        //  close_modal(modal_id)
                        //});
                        $(o.closeButton).click(function () {
                            close_modal(modal_id)
                        });
                        var modal_height = $(modal_id).outerHeight();
                        var modal_width = $(modal_id).outerWidth();
                        $("#lean_overlay").css({
                            "display": "block",
                            opacity: 0
                        });
                        $("#lean_overlay").fadeTo(200, o.overlay);
                        $(modal_id).css({
                            "display": "block",
                            "position": "fixed",
                            "opacity": 0,
                            "z-index": 11000,
                            "left": 50 + "%",
                            "margin-left": -(modal_width / 2) + "px",
                            "top": o.top + "px"
                        });
                        $(modal_id).fadeTo(200, 1);
                        e.preventDefault()
                    })
                });
            },
            close: function (modal_id) {
                close_modal(modal_id);
            }
        };

        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery.leanModal');
        }  

        var defaults = {
            top: 100,
            overlay: 0.5,
            closeButton: null
        };            
        var overlay = $("<div id='lean_overlay'></div>");
        $("body").append(overlay);
        options = $.extend(defaults, options);

        function close_modal(modal_id) {
            $("#lean_overlay").fadeOut(200);
                $(modal_id).css({
                    "display": "none"
                })
            }
        }
    })
})(jQuery); 
```

然后，您将能够像这样调用您的代码：

```
 $('#foo').leanModal(); //Initialise

...

     $('#foo').leanModal('close'); //Close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:17:13.640

这个模块构造的要点是避免发布一些变量（包括函数）。

因此，您无法访问返回对象中未引用的内容。

阅读有关[此](http://www.yuiblog.com/blog/2007/06/12/module-pattern/)构造的内容。

在您的情况下，如果您不想更改插件以在返回的对象中移动函数，最简单的可能是

```
$("#lean_overlay").fadeOut(200);
$(modal_id).css({
    "display" : "none"
}) 
```

其中 modal_id 是`href`元素的属性。

# yesod - 将 Yesod 网站建立在具有非空路径的 url 上

> ID：12694140
> 
> 赞同：2
> 
> 时间：2012-10-02T16:13:09.900
> 
> 标签：yesod

如果我将基本路径附加到*settings.yml中的**approot*属性，例如

 *approot="http://localhost:3000/base"

在浏览器中调用此 URL 会显示“未找到”作为消息，而不是正确提供主页。

我找不到任何方法来解决它。

...

我明白了，在将 URL 提交到 yesod 任务之前，我必须重写没有基本前缀的 URL，并且 approot 仅用于添加到所有页面链接的前面。

是否有适当的方法来处理这些基于非空路径的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:11:06.360

有两种相对简单的方法：

1.  创建一个中间件，该中间件将从 pathInfo 中去除前导“基础”值。
2.  覆盖 cleanPath（在 Yesod 类型类中）以执行相同的操作。

通常，带有前导路径片段的 approot 在有一些前端服务器正在调用您的 Yesod 应用程序（通过反向代理或 FastCGI）时最有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:01:20.343

按照 M.Snoyman 的提示，这里是一个解决问题的[cleanPath](http://hackage.haskell.org/packages/archive/yesod-core/latest/doc/html/Yesod-Core.html#v%3acleanPath)版本，仅针对 ApprootMaster 构造函数的 approot 案例，由 生成`yesod init`，作为生成的模块 Foundation.hs 的补充：

```
{-# LANGUAGE PackageImports #-}
import qualified Data.Text as Txt
import qualified "url" Network.URL as Url
import qualified Network.HTTP.Types as H
import qualified Data.Text.Encoding as TE
import qualified Data.List as L
import qualified "utf8-string" Data.ByteString.UTF8 as UTF8BS

-- instance Yesod App where

    -- cleanPath - A function used to clean up path segments. 
    -- It returns Right with a clean path or Left with a new set of pieces the user should be redirected to

    -- cleanPath :: Yesod a => a -> [Text] -> Either [Text] [Text]
    cleanPath master s =
        if corrected == s'
            then Right $ cutoffBasePrefix s'
            else Left $ cutoffBasePrefix corrected   -- to be redirected
      where
        -- avoid redirection on slash ended urls by junking the last piece if it's null

        s' = if not (L.null s) && Txt.null (last s) then init s else s

        corrected = filter (not . Txt.null) s'

        -- strToUtf8BS = TE.encodeUtf8 . Txt.pack  -- packs to UTF16 then encodes to UTF8
        strToUtf8BS = UTF8BS.fromString

        -- cut off "base prefix" or leave as it is

        cutoffBasePrefix segmts =
                case approot of
                     ApprootMaster f ->
                         case Url.importURL $ Txt.unpack $ f master of
                              Nothing -> segmts   -- not expected, incorrect url in settings.yml approot
                              Just url -> let basePrefixSegmts = H.decodePathSegments $ strToUtf8BS $ Url.url_path url in
                                          case basePrefixSegmts of
                                               [] -> segmts
                                               _ -> if basePrefixSegmts `L.isPrefixOf` segmts
                                                       then drop (length basePrefixSegmts) segmts
                                                       else segmts

                     _ -> segmts 
```

使用这些额外的包依赖项：

```
, url                           >= 2.1.2
, network
, http-types
, utf8-string 
```*

# android - Listview内的滚动视图

> ID：12694142
> 
> 赞同：2
> 
> 时间：2012-10-02T16:13:15.600
> 
> 标签：android

我有一个包含多行的列表视图，其中一行必须是包含多行的列表视图，但只需要显示其中的 2 个，其余的仅在滚动时显示。我在布局文件的列表视图中添加了一个带有 LinearLayout 的 ScrollView，并且我在 java 文件中添加了行的内容。ScrollView 似乎不能很好地滚动。有没有更好的方法来实现这一目标？这是我的布局文件。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/listLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="1px"
    android:layout_height="1px"
    android:layout_weight="1"
    android:cacheColorHint="#00000000"
    android:scrollbars="vertical" >
</ListView>

<RelativeLayout
    android:id="@+id/listItem"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/formImage"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:scaleType="fitXY" />

    <include layout="@layout/vertical_list_item_title_area" />
</RelativeLayout>

    <ScrollView
    android:id="@+id/scrollView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:fillViewport="true"
    android:layout_weight="1">

    <LinearLayout
        android:id="@+id/childListLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

    </LinearLayout>
</ScrollView>

<com.illumemobile.testapp.Classes.SCClasses.SCActivities.SCCustomActivities.SCCustomGallery
    android:id="@+id/horizontallistview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scaleType="fitXY"
    android:spacing="33dip" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:15:31.630

ListViews 内部的 ScrollViews 是一个非常非常糟糕的主意。它不仅让用户感到困惑，而且系统在确定哪个 View 应该获取触摸事件方面也存在问题。

我建议重新考虑您的布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:21:25.413

我建议制作一个 ScrollView，然后在滚动视图中制作一个 LinearLayout。在该 LinearLayout 中，您可以将更多 LinearLayouts 一个或多个项目作为子项。我认为这会接近你想要做的事情......我更喜欢使用 ScrollViews 和 LinearLayouts 而不是尝试处理 ListViews。根据我的经验，LinearLayouts 比 ListViews 动态得多。-希望这可以帮助

# android - android中图像的伽玛校正

> ID：12694143
> 
> 赞同：3
> 
> 时间：2012-10-02T16:13:20.880
> 
> 标签：android, image-processing, gamma

我正在构建一个 android 应用程序，它为用户提供一些图像处理功能。但在应用任何图像转换功能之前，我想进行伽马校正以改善图像。我知道如何执行伽玛校正，但我不知道要使用什么伽玛值，因为图像本身没有创建图像的伽玛值。有关如何为特定图像选择伽马值的任何信息都将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:42:09.763

看来您真正想要的是使图像的平均亮度变亮或变暗以匹配某个最佳值。是的，伽玛函数可以做到这一点。这可能不是最佳选择，事实上，对于曝光不足或过度曝光，简单的线性乘法可能会更好。但现在让我们坚持使用伽玛。

测量图像的平均亮度并将其命名为`a`，取值范围为 0-255。你有一个最佳亮度的目标，我们称之为`t`. 如果未知 gamma 是，`g`那么你会得到：

```
t/255 = (a/255)^g 
```

求解`g`给出：

```
g = log(t/255) / log(a/255) 
```

# database - Oracle 数据库截断表（或类似的东西，但不删除）部分基于条件

> ID：12694148
> 
> 赞同：1
> 
> 时间：2012-10-02T16:13:42.833
> 
> 标签：database, oracle, truncate

我不确定这个问题是否显而易见。我需要删除大量数据。删除是昂贵的。我需要截断表格但不完全截断，以便释放内存并更改水印。

是否有任何功能可以让我根据选择行的条件截断表格？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T16:24:21.940

取决于你的餐桌是如何组织的。

1）如果您的（大）表是基于类似条件进行分区的（例如，您要删除上个月的数据并且您的表按月分区），您可以只截断该分区，而不是整个表。

2) 如果您有一些停机时间，另一种选择是将要保留的数据插入到临时表中，截断原始表，然后将数据加载回来。

```
insert into <table1>
select * from <my_table>
where <condition>;

commit;

truncate table my_table;

insert into my_table
select * from <table1>;

commit;

--since the amount of data might change considerably, 
--you might want to collect statistics again

exec dbms_stats.gather_table_stats
     (ownname=>'SCHEMA_NAME', 
      tabname => 'MY_TABLE'); 
```

# c - 在 C 中将 CSV 转换为二维数组

> ID：12694151
> 
> 赞同：2
> 
> 时间：2012-10-02T16:13:47.840
> 
> 标签：c

这对我来说是一个非常有趣的错误，因为实际上一小时前这段代码运行良好，但现在不行了。

基本上发生的事情是下一行的第一个“块”的第一个字符被附加为最后一个“块”的最后一个字符

其中“块”是指该行/列中保存的字符串。

例如，假设数组应该是

```
1,2,3,Hello
4,5,6,Wonder 
```

它被读为

```
1,2,3,Hello4,
6,Wonder, , 
```

这是我一直在使用的逻辑。我真的不知道发生了什么变化，所以任何建议都会很好。

```
tableFile = fopen(argv[4], "r");

//pulling the table data from the file
char tableArray[30][50][256];
char c;
int i=0, j=0, k=0;
while(c != EOF){

    c = fgetc(tableFile);

    switch(c)
    {
        case ',':
            tableArray[i][j++][k]='\0';
            k=0;
            break;
        case '\n':
            tableArray[i++][j][k]='\0';
            j=0;
            k=0;
            break;
        case '\r':
            break;
        case EOF:
            break;
        default:
            tableArray[i][j][k++] = c;
            break;
    }

} //end file transfer

//Just to display, ignore magic numbers as (mostly) irrelevant
int a, b;

for (a = 0; a < 20; a++)
{
    for (b = 0; b < 47; b++)
    {
        printf ("%s", tableArray[a][b]);
        if (b<46)
            printf (", ");

    }
    printf ("\n");
}

fclose(tableFile); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:39:31.773

1.  你没有初始化你的数组。不保证零填充。添加

    `memset(tableArray, 0, sizeof(tableArray))`

2.  `case EOF:``NULL`必须在最近的字符串中添加一个终止符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:08:07.577

这真的是由于我原来的帖子下面的评论。但是，尽管它是令人作呕和糟糕的编码形式......这就是始终如一地解决它的原因，而不是我为此感到自豪......并且仍然对想法持开放态度：

```
tableFile = fopen(argv[4], "r");

//pulling the table data from the file, lazy magic numbers here... 
char tableArray[30][50][256];
char c;
int i=0, j=0, k=0;

memset(tableArray, 0, sizeof(tableArray));
while(c != EOF){

    c = fgetc(tableFile);

    switch(c)
    {
        case ',':
            tableArray[i][j++][k]='\0';
            k=0;
            break;
        case '\n':
            tableArray[i++][j][k]='\0';
            j=0;
            k=0;
            break;
        case '\r':
            tableArray[i++][j][k]='\0';
            j=0;
            k=0;
            break;
        case EOF:
            tableArray[i][j][k] = '\0';
            break;
        default:
            tableArray[i][j][k++] = c;
            break;
    }

} //end file transfer

/* //Only relevant for displaying the tableArray
int a, b;

for (a = 0; a < 20; a++)
{
    for (b = 0; b < 47; b++)
    {
        printf ("%s", tableArray[a][b]);
        if (b<46)
            printf (", ");

    }
    printf ("\n");
}
 */

fclose(tableFile); 
```

# perl - 从文件中读取单词并返回下一个单词

> ID：12694157
> 
> 赞同：0
> 
> 时间：2012-10-02T16:13:56.077
> 
> 标签：perl, unix, awk, grep, sh

使用 shell 脚本我想从文本文件中读取一个单词并返回下一列单词。

例如，我的输入文件会像

```
AGE1 PERSON1
AGE2 PERSON2
AGE3 PERSON3
AGE4 PERSON4 
```

我在具有人名的 Sh 文件中有变量。我想读取输入文本文件并获取人的年龄值。

请帮忙，我是Shell脚本的初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:16:38.880

一个稍微简单的解决方案是：

```
age=$( awk '$2==name { print $1 }' name="$name" input-file ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:20:45.433

```
age=`
   perl -nle'
      BEGIN { $n = shift(@ARGV); }
      print $1 if /^(\S+)\s+\Q$n\E$/;
   ' "$name" file
` 
```

`bash`在`sh`模式下测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:33:17.673

基于*shellter*的评论：

```
age=$(grep "$person_name" people_file.txt | cut -f1 -d' ') 
```

我会尽力解释一切。首先，我假设一些事情（但您可以在脚本上更改它们）：

1.  包含您输入的数据的文件称为`people_file.txt`.
2.  您要查找的人的姓名在变量中`$person_name`。
3.  您要存储结果的变量是`$age`.

首先，因为我们需要使用命令来生成`$age`变量的值，所以我们必须使用`$(`and`)`运行一个命令（或一系列命令），并用它从执行命令（或多个命令）中捕获的文本替换自身。

我们首先需要找到包含人名的行。为此，我们使用 grep: `grep regex file`。Grep 将`file`逐行搜索，直到找到与正则表达式匹配的行`regex`。在我们的例子中，我们可以简单地直接搜索人名（假设它不包含特殊字符，如句点或星号）。请注意，我们必须将变量放在双引号之间，否则在命令行中可能会拆分包含空格的人名，以便将其名字用作正则表达式，将姓氏用作文件。如果您想以不区分大小写的方式进行搜索（例如：John 将找到带有 JOHN 或 john 的行），您可以使用以下`-i`标志：`grep -i regex file`. 选定的行将由 grep 打印到其输出中，但我们将使用管道运算符将这些行泵入下一个命令的输入`|`。

最后，我们有一行（或多行）的结果。现在我们必须提取年龄。cut 命令将从输入中读取的每一行拆分为字段，并仅打印您要求的字段。在这种情况下，我们要求第一个字段带有`-f1`选项。此外，我们指定将空格字符用作命令的分隔符（即分隔字段的字符）`-d1`。

如果您有多行同一个人的名字，我们需要将 grep 的输出通过管道传输到 head 命令中，这样我们就可以只拥有我们想要的行数。`-n N`我们可以通过该选项告诉 head 我们想要多少行。所以如果你只想要第一场比赛：

```
age=$(grep "$person_name" people_file.txt | head -n 1 | cut -f1 -d' ') 
```

希望这会有所帮助=)

# android - 安卓导航

> ID：12694158
> 
> 赞同：0
> 
> 时间：2012-10-02T16:13:56.403
> 
> 标签：android

我有一个关于android导航的问题。

A有一个frm1（活动）和一个frm2（活动）。

当我在 frm1 时，我按下列表中的某个项目，然后出现一个弹出窗口，然后 android 将我发送到 frm2。当我按下返回按钮时，android 将我发送到显示弹出窗口的 frm1。=（。我怎样才能避免这种情况（让android在没有弹出窗口的情况下向我展示frm1）。也许你在说，“所以，你为什么不做一个意图”。问题是我不想错过frm1的状态

谢谢

这是我使用从frm1到frm2的意图的代码，

*frm1中列表的onclick功能

```
 lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int pos,long arg3){

            AddDebtToTransaction(pos);
        }
    }); 

   @SuppressLint("ShowToast")
public void AddDebtToTransaction(final int pos)
    {  
    final CharSequence[] items = {"Ver Detalle", "Agregar a la Transacción"};
    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setTitle("¿Qué desea hacer?");
    builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int item) {
    Intent i2 = new Intent(Frmpayment_searchdebts.this,Frmpayment_transactiondebt.class);
                startActivity(i2);
    });
    builder.create();
    builder.show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:27:22.650

你可以`startActivityForResult`在去 frm2 和在 frm1 覆盖 onActivityResult 并`dismissDialog()`在那里使用时使用。更多信息可以在这里找到：[developer.android.com](http://developer.android.com/training/basics/intents/result.html)

# iis-7 - IIS 7.5 中的 Windows 身份验证失败

> ID：12694162
> 
> 赞同：25
> 
> 时间：2012-10-02T16:14:11.630
> 
> 标签：iis-7, windows-server-2008, windows-authentication

我正在为我的公司构建一个简单的内部应用程序，它需要 Windows 身份验证以确保安全。所有其他身份验证模式均被禁用。我陷入了 Internet Explorer 提示输入凭据 3 次的情况，然后失败并出现以下错误：

> 未经授权
> 
> HTTP 错误 401。请求的资源需要用户身份验证。

然后我创建了一个简单的网站来测试这一点。我在 IIS 中创建了一个新站点，将其放在自己的端口（：8111，随机选择）上，在其中放置一个静态“default.htm”文件，禁用匿名身份验证，然后启用 Windows 身份验证。其他一切都保持默认设置。分配端口号是因为我们在这台机器上有多个站点都共享相同的 IP。

这里有几个场景：

*   从 Web 服务器本身浏览到 http:// **localhost** :8111/ 工作正常

*   从另一台计算机浏览到 http:// **ServerIPaddress** :8111/ 工作正常

*   从另一台计算机浏览到 http:// **ServerName** :8111/ FAILS（要求凭据 3 次，然后给出 401 错误）

到目前为止，我一直在网上搜索并试图找到一个没有运气的解决方案。要么我没有找到它，要么我对我正在阅读的内容不够了解。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-02T18:09:01.723

在与此问题斗争 2 天后，刚刚在同事的帮助下制定了解决方案。这是他写的：

> Windows 身份验证有 2 个提供程序（协商和 NTLM）。将网站身份验证设置为 Windows 身份验证时，在突出显示 Windows 身份验证时，单击右侧窗格或 IIS 管理器上的提供程序链接，然后将 NTLM 移动到顶部。默认情况下，协商位于顶部，这就是您收到身份验证提示的原因。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-22T16:03:53.767

浏览使用集成身份验证的网站时出现错误 401.1。

解决方案

禁用环回检查

```
* In Registry Editor, locate and then click the following registry key: 
```

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa

```
* Right-click Lsa, point to New, and then click DWORD Value.
* Type DisableLoopbackCheck, and then press ENTER.
* Right-click DisableLoopbackCheck, and then click Modify.
* In the Value data box, type 1, and then click OK. 
```

[http://support.microsoft.com/kb/896861](http://support.microsoft.com/kb/896861)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-15T18:55:47.077

> 如果在将 NTML 移到提供程序列表的顶部后它仍然不起作用，请尝试完全删除 Negotiate，以便只剩下 NTML。

这为我解决了问题 - 将 NTML 移到顶部对 Windows Server 2012 和 IIS 8.5 没有帮助。我在以下 stackoverflow 问题中找到了解决方案：[IIS 7.5 Windows Authentication Not Working in Chrome](https://stackoverflow.com/questions/11847718/iis-7-5-windows-authentication-not-working-in-chrome)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-21T17:29:02.910

我个人建议不要在您的服务器上全局禁用环回检查（IE：不要**在**您的注册表中设置`DisableLoopbackCheck`为值）。`1`这是一个安全漏洞。请仅对已知主机禁用。

这是一个 Powershell 函数，可帮助您指明正确的方向。

```
function Add-LoopbackFix
{
    param(
        [parameter(Mandatory=$true,position=0)] [string] $siteHostName
    )

    $ErrorActionPreference = "Stop"

    Write-Host "Adding loopback fix for $siteHostName" -NoNewLine

    $str = Get-ItemProperty -Name "BackConnectionHostNames" -path 'HKLM:\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0' -erroraction silentlycontinue

    if ($str) { 
        if($($str.BackConnectionHostNames) -like "*$siteHostName*")
        {
            Write-Host "`tAlready in place" -f Cyan
        } else{
            $str.BackConnectionHostNames += "`n$siteHostName"
            Set-ItemProperty "HKLM:\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0" -Name "BackConnectionHostNames" -Value $str.BackConnectionHostNames 
            Write-Host "`tDone" -f Green
        }
    } else {
        New-ItemProperty "HKLM:\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0" -Name "BackConnectionHostNames" -Value $siteHostName -PropertyType "MultiString" 
        Write-Host "`tDone" -f Green
    }

    Write-Host "`tnote: we are not disabling the loopback check all together, we are simply adding $siteHostName to an allowed list." -f DarkGray
} 
```

```
> Add-LoopbackFix "ServerName" 
```

[来源](https://github.com/FutureStateMobile/poshBAR/blob/a10968532c3e43eee81909ca62a76ac3c45123c8/src/poshBAR/Add-LoopbackFix.ps1)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-30T18:18:28.183

自从提出这个问题以来已经有一段时间了，但我知道很多人经常遇到这个问题。此处描述了一个更合适的解决方法：[内核模式身份验证](http://blogs.msdn.com/b/autz_auth_stuff/archive/2011/05/06/kernel-mode-authentication.aspx)。我们在几个月前实施了这个，它运行良好。

另一个很好的解释：[MORE 2008 AND KERBEROS: AUTHENTICATION DENIED, APP POOL ACCOUNT BEINGNRED](http://suguk.org/blogs/sharepointhack/archive/2009/10/19/21000.aspx)

应用于单个站点：

```
cd %windir%\system32\inetsrv
set SiteName=TheSiteName
appcmd.exe set config "%SiteName%" -section:system.webServer/security/authentication/windowsAuthentication /useKernelMode:"True" /useAppPoolCredentials:"True" /commit:apphost 
```

或适用于所有网站：

```
%windir%\system32\inetsrv\appcmd.exe set config -section:windowsAuthentication /useAppPoolCredentials:"True" /commit:apphost 
```

# c# - 创建一个具有任意行数的表作为我的模型？

> ID：12694163
> 
> 赞同：0
> 
> 时间：2012-10-02T16:14:12.567
> 
> 标签：c#, asp.net-mvc, model-view-controller

我正在创建一个用于放置桌子的模型。该表将保存在运行时定义的任意数量的行。我想知道是否有一种简单的方法可以在 MVC 中定义它？

目前我只有：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<CableSolve.Web.Models.Orders.ActivityDetailsModel>" %>

<div id="ActivityDisplay">
    <table id="ActivitiesGrid">
    </table>
    <div id="ActivitiesGridPager"></div>
</div> 
```

在另一个模型中，我创建了一个具有静态行数的表。这很容易：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<CableSolve.Web.Models.Orders.OrderDetailsModel>" %>

<fieldset class="collapsible">
    <legend>
        <%= Html.DisplayFor(model => model.OrderDetailsLegendName)%>
    </legend>
    <table id="OrderDetailsContentTable" class="ContentTable">
        <tr>
            <td><%= Html.DisplayFor(model => model.OrderID.Name)%></td>
            <td><%= Html.DisplayFor(model => model.OrderID.Value)%></td>

            <td><%= Html.DisplayFor(model => model.Comment.Name)%></td>
            <td><%= Html.DisplayFor(model => model.Comment.Value)%></td>
        </tr>
        ... 
```

那么，关于我如何在ActivitiesGrid中拥有任意数量的行的任何想法？

基本上，我的控制器将在运行时获取一些信息，我想在表格中显示检索到的信息，但我不知道我将收到多少行信息。

作为不引入第三方东西的轻量级解决方案（现在，如果证明有必要，我会这样做）：

```
public class ActivityDetailsModel
{
    public List<ActivityRow> ActivityRows = new List<ActivityRow>();

    public struct ActivityRow
    {
        public DateTime? Date;
        public string Person;
        public string OrderOrTaskID;
        public string Activity;

        public ActivityRow(DateTime? date, string person, string orderOrTaskID, string activity)
        {
            Date = date;
            Person = person;
            OrderOrTaskID = orderOrTaskID;
            Activity = activity;
        }
    }

    public ActivityDetailsModel(IEnumerable<Activity> activities)
    {
        foreach(Activity activity in activities)
        {
            string orderOrTaskID = activity.TaskID != 0
                                     ? activity.OrderID + "-" + activity.TaskID
                                     : activity.OrderID.ToString();

            string activityDescription = string.Format("OldValue: {0}, NewValue: {1}", activity.OldValue,
                                                       activity.NewValue);

            ActivityRows.Add(new ActivityRow(activity.UpdateDateTime, activity.UpdateUsername, orderOrTaskID, activityDescription));
        }
    }
}

<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<CableSolve.Web.Models.Orders.ActivityDetailsModel>" %>

<div id="ActivityDisplay">
    <table id="ActivitiesGrid">
        <%foreach (var activityRow in Model.ActivityRows)
          {%>
            <tr>
                <td><%= Html.DisplayForModel(activityRow.Date)%></td>
                <td><%= Html.DisplayForModel(activityRow.Person)%></td>
                <td><%= Html.DisplayForModel(activityRow.OrderOrTaskID)%></td>
                <td><%= Html.DisplayForModel(activityRow.Activity)%></td>
            </tr>
          <%}%>
    </table>
    <div id="ActivitiesGridPager"></div>
</div> 
```

这是比较容易理解的吗？我讨厌所有尖括号和百分号的标记，但该项目还没有开发人员使用替代语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:19:44.320

由于您追求动态，您可以利用现有的帮助程序，如[MVC WebGrid 帮助](http://www.codeproject.com/Articles/464198/MVC-WebGrid-Helper)程序甚至[MvcContrib Grid](http://mvccontrib.codeplex.com/wikipage?title=Grid&referringTitle=Documentation)。这些助手将负责生成包含所需列的表。无需手动编写表格，因为它将在运行时根据数据源中存在的对象数量动态生成。

# unicode - 使用 PowerBuilder 12.1 处理 Unicode 字符串操作的函数

> ID：12694165
> 
> 赞同：1
> 
> 时间：2012-10-02T16:14:15.467
> 
> 标签：unicode, powerbuilder

我目前正在将目前不支持 Unicode 的 PowerBuilder 12.1 应用程序转换为支持 Unicode 的应用程序。

我进行了一些修改以将 Unicode 数据保存到我们的数据库以及文件中，但是在处理字符串时遇到了一些小问题。

例如，字符是代理对，PowerBuilder 将其解释为 2 个字符（类似于 .NET 的操作方式）。因此：

```
LEN("") = 2 
```

对我来说，这部分很有意义，因为它将每个代码单元都算作一个字符。

目前我们已经提出了两种解决方案来处理使用 Unicode 字符的字符串函数：

*   用 C# .NET 编写的可调用 OLEObjects
*   使用 PBNI 接口调用 C# .NET（**如果可能，希望远离此解决方案**）

我们正在考虑用于确定字符串长度的 .NET 代码示例是：

```
StringInfo.ParseCombiningCharacters("").Length = 1 
```

我们只是担心不断调用 OLEObjects/PBNI 来完成我们所有的字符串处理对性能的影响。这里有没有其他 PowerBuilder 开发人员做过 Unicode 字符串操作（LEN、MID、POS 等），你是怎么做的？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:58:51.683

自 10 版以来，PB 支持 unicode (utf-16le)。所以遗留`Len()`是隐式的`LenW()`（与其他字符串函数一样，处理遗留数据可能意味着使用显式`LenA()`）。

你确定你得到了一些 utf-16le 编码吗？给定以下函数，如果您使用 调用它，它会在包含您的数据的字符串上返回什么`hexdump_blob(blob(your_string))`？

将此代码粘贴到名为`hexdump_blob`具有十六进制显示（类似于十六进制编辑器）的 blob 内容的新全局函数的源代码中。

```
global type hexdump_blob from function_object
end type

forward prototypes
global function string hexdump_blob (blob abl_data, boolean ab_fill_lastline)
end prototypes

global function string hexdump_blob (blob abl_data, boolean ab_fill_lastline);//hexify a blob content
string ls_tohex = "0123456789ABCDEF"
string ls_msg = "", ls_line, ls_binary
long i, j, length
byte b
string ls_fill

if isnull( abl_data ) then return ""

if ab_fill_lastline then
    ls_fill = " __"
else
    ls_fill = "   "
end if

length = len( abl_data )
for i = 1 to length
    GetByte( abl_data, i, b )
    ls_line += mid( ls_tohex, 1+ mod(int(b/16),16), 1)
    ls_line += mid( ls_tohex, 1+ mod(b,16), 1)
    ls_line += " "
    ls_binary += string( iif(b>31 and b<128,char(b)," "))
    if mod(i,16) = 0 and i > 0 then
        ls_binary = replaceall( ls_binary, "~r", "·")   //no cr/lf
        ls_binary = replaceall( ls_binary, "~n", "·")
        ls_binary = replaceall( ls_binary, "~t", "·")
        ls_msg += "[" + string( i - 16, "0000") + "] " + ls_line + "~t" + ls_binary + "~r~n"
        ls_line = ""
        ls_binary = ""
    end if
next
i -- // i - 1 due to the last loop in for
ls_line += fill(ls_fill, 3 * ( 16 - mod(i, 16) ) )
ls_msg += "[" + string( i - mod(i,16), "0000") + "] " + ls_line + "~t" + ls_binary

return ls_msg

end function 
```

此外，这是`replaceall()`使用的功能`hexdump_blob()`

```
global type replaceall from function_object
end type

forward prototypes
global function string replaceall (string as_source, string as_pattern, string as_replace)
end prototypes

global function string replaceall (string as_source, string as_pattern, string as_replace);//remplace toute les occurences de as_pattern de as_source par as_replace 
string ls_target
long i, j

ls_target=""
i = 1
j = 1
do
    i = pos( as_source, as_pattern, j )
    if i>0 then
        ls_target += mid( as_source, j, i - j )
        ls_target += as_replace
        j = i + len( as_pattern )
    else
        ls_target += mid( as_source, j )
    end if
loop while i>0

return ls_target
end function 
```

以及`iif()`模拟 C 三元运算符或 Visual Basic iif() 的

```
global type iif from function_object
end type

forward prototypes
global function any iif (boolean ab_cond, any aa_true, any aa_false)
end prototypes

global function any iif (boolean ab_cond, any aa_true, any aa_false);
// simulates the VB iif or C ternary operator

if ab_cond then
    return aa_true
else
    return aa_false
end if

end function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:41:59.297

这是为了响应 Seki 的十六进制转换功能。我将其发布为答案，以便我可以包含源代码。我使用 Microsoft 加密函数在我的调试工具中显示 blob。这是我的 blob 窗口的简化版本。我使用的是基于 PFC 的，并且使用了一个包装了 MS Crypto 库的对象。它来自 PB 12.5，但应该导入任何 Unicode 版本的 PB。

```
HA$PBExportHeader$w_show_blob.srw
forward
global type w_show_blob from window
end type
type sle_1 from singlelineedit within w_show_blob
end type
type mle_1 from multilineedit within w_show_blob
end type
end forward

global type w_show_blob from window
integer width = 3081
integer height = 1988
boolean titlebar = true
boolean controlmenu = true
boolean minbox = true
boolean maxbox = true
boolean resizable = true
boolean center = true
sle_1 sle_1
mle_1 mle_1
end type
global w_show_blob w_show_blob

type prototypes
FUNCTION boolean CryptBinaryToString ( &
    Blob pbBinary, &
    ulong cbBinary, &
    ulong dwFlags, &
    Ref string pszString, &
    Ref ulong pcchString ) &
LIBRARY "crypt32.dll" ALIAS FOR "CryptBinaryToStringW"

end prototypes

type variables
CONSTANT Ulong CRYPT_STRING_HEXASCIIADDR = 11   

end variables

forward prototypes
public subroutine of_showblob (ref blob abl_data)
end prototypes

public subroutine of_showblob (ref blob abl_data);unsignedlong lul_size, lul_bufsize
string ls_hex
try
    lul_size = len(abl_data)
    sle_1.text = string(lul_size)

    setnull(ls_hex)
    cryptbinarytostring( abl_data, lul_size, CRYPT_STRING_HEXASCIIADDR, ls_hex, lul_bufsize)
    ls_hex = space(lul_bufsize)
    if not cryptbinarytostring( abl_data, lul_size, CRYPT_STRING_HEXASCIIADDR , ls_hex, lul_bufsize) then
        mle_1.text = "error converting blob data"
    else
        mle_1.text = ls_hex
    end if
catch(runtimeerror re)
    messagebox("oops", re.text)

end try

end subroutine

on w_show_blob.create
this.sle_1=create sle_1
this.mle_1=create mle_1
this.Control[]={this.sle_1,&
this.mle_1}
end on

on w_show_blob.destroy
destroy(this.sle_1)
destroy(this.mle_1)
end on

type sle_1 from singlelineedit within w_show_blob
integer x = 73
integer width = 517
integer height = 88
integer taborder = 10
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
string text = "none"
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type mle_1 from multilineedit within w_show_blob
integer x = 64
integer y = 96
integer width = 2898
integer height = 1716
integer taborder = 10
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = fixed!
fontfamily fontfamily = modern!
string facename = "Courier New"
long textcolor = 33554432
string text = "none"
boolean hscrollbar = true
boolean vscrollbar = true
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type 
```

要使用它，假设您的 blob 是 lbl_myBlob：

```
open(w_show_blob)
w_show_blob.of_showblob(lbl_myBlob) 
```

MLE 中的输出如下所示：

```
0000    42 4d ee 00 00 00 00 00  00 00 76 00 00 00 28 00   BM........v...(.
0010    00 00 10 00 00 00 0f 00  00 00 01 00 04 00 00 00   ................
0020    00 00 78 00 00 00 00 00  00 00 00 00 00 00 00 00   ..x.............
0030    00 00 00 00 00 00 00 00  00 00 00 00 80 00 00 80   ................
0040    00 00 00 80 80 00 80 00  00 00 80 00 80 00 80 80   ................
0050    00 00 80 80 80 00 c0 c0  c0 00 00 00 ff 00 00 ff   ................
0060    00 00 00 ff ff 00 ff 00  00 00 ff 00 ff 00 ff ff   ................
0070    00 00 ff ff ff 00 88 88  88 88 88 88 88 88 88 88   ................
0080    80 88 88 88 88 88 88 88  80 08 88 88 88 88 88 88   ................
0090    80 00 88 88 88 88 88 88  80 00 08 88 88 88 88 88   ................
00a0    80 00 00 88 88 88 88 88  80 00 00 08 88 88 88 88   ................
00b0    80 00 00 00 88 88 88 88  80 00 00 08 88 88 88 88   ................
00c0    80 00 00 88 88 88 88 88  80 00 08 88 88 88 88 88   ................
00d0    80 00 88 88 88 88 88 88  80 08 88 88 88 88 88 88   ................
00e0    80 88 88 88 88 88 88 88  88 88 88 88 88 88         .............. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:23:04.177

您不想使用 LenA() 方法吗？

[http://www.techno-kitten.com/Changes_to_PowerBuilder/New_in_PowerBuilder_10/PB10New_-_Unicode_Support/PB10New_-_Unicode_Related_Chan/PB10New_-_String-Related_Funct/pb10new__-_modified_processing_.html](http://www.techno-kitten.com/Changes_to_PowerBuilder/New_in_PowerBuilder_10/PB10New_-_Unicode_Support/PB10New_-_Unicode_Related_Chan/PB10New_-_String-Related_Funct/pb10new_-_modified_processing_.html)

# scala - 使用 Akka 1.3 的演员时，我是否需要注意生产者-消费者比率匹配？

> ID：12694167
> 
> 赞同：2
> 
> 时间：2012-10-02T16:14:17.113
> 
> 标签：scala, concurrency, akka, actor

使用 Akka 1.3 时，我是否需要担心当生成消息的参与者的生成速度超过使用它们的参与者的处理速度时会发生什么？

如果没有任何机制，在长时间运行的过程中，队列大小会增长到消耗所有可用内存。

[文档](http://doc.akka.io/docs/akka/1.3.1/java/dispatchers.html#Default_dispatcher)说默认调度程序是 ExecutorBasedEventDrivenDispatcher。

这个调度器有五个队列配置：

*   有界 LinkedBlockingQueue
*   无界 LinkedBlockingQueue
*   有界数组阻塞队列
*   无界数组阻塞队列
*   同步队列

和四个过载策略：

*   来电者运行
*   中止
*   丢弃
*   最老的

这是正确的机制吗？如果是这样，这个调度程序的默认设置是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:46:16.040

调度程序有一个任务队列。这与你的问题无关。实际上，您希望将尽可能多的邮箱排入队列。

您可能正在寻找的是：[http ://doc.akka.io/docs/akka/1.3.1/scala/dispatchers.html#Making_the_Actor_mailbox_bounded](http://doc.akka.io/docs/akka/1.3.1/scala/dispatchers.html#Making_the_Actor_mailbox_bounded)

# tapestry - Tapestry 文本字段在网格中更新服务器数据

> ID：12694169
> 
> 赞同：1
> 
> 时间：2012-10-02T16:14:23.970
> 
> 标签：tapestry

我在 web ui 上有一个挂毯网格，列上包含文本字段以使用户能够为特定行输入值，我需要在用户输入值时处理事件，并在更新后立即将其值保存到服务器端的数据库中，我不需要任何 ajax 功能

谢谢

# c# - 编译成可执行文件的 C# 报告工具

> ID：12694170
> 
> 赞同：0
> 
> 时间：2012-10-02T16:14:24.907
> 
> 标签：c#, winforms, .net-3.5, crystal-reports, reportviewer

我有一个使用 .Net 框架 3.5 的 Winforms C# 应用程序。该应用程序目前`Crystal Reports`用于各种报告功能。此应用程序通常作为联网应用程序安装；换句话说，应用程序安装在服务器上，然后通过快捷方式从各个工作站启动。但是，要正确运行，需要在**每个**工作站上安装 Crystal Reports 运行时，这是我想消除的依赖项。我的目标是能够在服务器上安装应用程序，然后只要在客户端上安装了 .Net framework 3.5，应用程序（包括报告）就会正确启动和执行。

那么有谁知道是否可以将 Crystal Reports 编译成可执行文件，从而消除对运行时的依赖，或者，如果不知道，是否知道可以不依赖于客户端上安装的运行时的 Crystal Reports 替代方案?

更新：

我目前正在考虑使用`Visual Studio 2008` `ReportViewer`控件作为`Crystal Reports`. 我以前从未使用过此控件（或“报告服务”），但根据我的阅读，可以设置此控件以使用内置报告引擎运行（所谓的“本地模式”） . 如果确实如此，那么我应该能够在其中定义报告`Visual Studio 2008`并将它们编译到应用程序可执行文件中，这样既不`Reporting Services`需要在服务器上安装，也不需要在客户端安装报告运行时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:50:41.937

Crystal Reports 确实总是需要独立安装，我已经处理了一段时间了，我的是 ClickOnce 应用程序，实际上我正在使用 Report Viewer 制作一些报告，但我应该警告你它也需要在客户端机器上安装所以您在新安装时需要管理员权限。

我现在正在做的是更改为纯 dll 生成报告解决方案，如 Telerik 或 DevExpress，现在我正在使用 DevExpress 之一。

免责声明：我不为任何一家公司工作。

问候，

# teamcity - 为什么在 TeamCity 上运行 MSpec 时会收到 NotSupportedException？

> ID：12694172
> 
> 赞同：6
> 
> 时间：2012-10-02T16:14:26.890
> 
> 标签：teamcity, mspec

在 TeamCity 中运行 MSpec 构建步骤时，我在团队城市日志中收到以下错误：

```
[Step 7/7] Starting: C:\TeamCity\buildAgent\plugins\dotnetPlugin\bin\JetBrains.BuildServer.NUnitLauncher.exe #TeamCityImplicit
[17:07:13][Step 7/7] in directory: C:\TeamCity\buildAgent\work\726e90173bc65483
[17:07:14][Step 7/7] 2012-10-02 17:07:14,471 [4332] ERROR JetBrains.TeamCity.Utils.Runtime.ParseUtil - Failed to load assembly from file c:\mspec\mspec.exe: An attempt was made to load an assembly from a network location which would have caused the assembly to be sandboxed in previous versions of the .NET Framework. This release of the .NET Framework does not enable CAS policy by default, so this load may be dangerous. If this load is not intended to sandbox the assembly, please enable the loadFromRemoteSources switch. See http://go.microsoft.com/fwlink/?LinkId=155569 for more information.
[17:07:14][Step 7/7] System.NotSupportedException: An attempt was made to load an assembly from a network location which would have caused the assembly to be sandboxed in previous versions of the .NET Framework. This release of the .NET Framework does not enable CAS policy by default, so this load may be dangerous. If this load is not intended to sandbox the assembly, please enable the loadFromRemoteSources switch. See http://go.microsoft.com/fwlink/?LinkId=155569 for more information.
[17:07:14][Step 7/7]    at System.Reflection.RuntimeAssembly.nLoadFile(String path, Evidence evidence)
[17:07:14][Step 7/7]    at System.Reflection.Assembly.LoadFile(String path)
[17:07:14][Step 7/7]    at JetBrains.TeamCity.Utils.Runtime.ParseUtil.LoadAssembly(String value) in c:\BuildAgent\work\e6509710c0972c73\src\Utils\src\Runtime\ParseUtil.cs:line 110 
```

我已对 MSpec 配置文件进行了建议的修改`machine.config`，但似乎没有帮助。

```
<runtime>         
  <loadFromRemoteSources enabled="true"/>
</runtime> 
```

MSpec 运行程序在本地在 Visual Studio 中正确运行的构建代理上引用已编译的 DLL。谁能解释这个错误的含义以及我如何解决它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T16:41:29.140

你能检查一下`mspec.exe`“编译的DLL”的属性，看看是否有一个[安全**解除阻止**按钮](http://allen-conway-dotnet.blogspot.com/2012/01/fixing-systemiofileloadexception-upon.htm)。我有同样的错误，Unblock 修复了它。启用`loadFromRemoteSources`没有帮助。

# ios - 有什么方法可以优化单个对象的简单 NSFetchRequest 吗？

> ID：12694175
> 
> 赞同：1
> 
> 时间：2012-10-02T16:14:45.653
> 
> 标签：ios, core-data, nsfetchrequest

我正在后台队列中的子 moc 中进行数据处理。我需要按 ID 查询数据库，以便区分更新现有对象和创建新对象。我发现大部分时间（50 个项目的总处理时间约为 2 秒）被`executeFetchRequest:error:`. is 是最`NSPredicate`简单的形式——只匹配单个 ID 属性（ID 属性已被索引），并且`NSFetchRequest`应该返回一个或无（ID 是唯一的）。有没有办法优化这种`NSFetchRequest`？

这是我当前的代码：

```
+ (User *)userWithID:(NSNumber *)ID inManagedObjectContext:(NSManagedObjectContext *)context {
    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"User"];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ID == %@", ID];
    [fetchRequest setPredicate:predicate];
    [fetchRequest setFetchBatchSize:1];

    NSError *error = nil;
    NSArray *users = [context executeFetchRequest:fetchRequest error:&error];
    if (error) {
        abort();
    }

    if ([users count] == 1) {
        return [users objectAtIndex:0];
    } else if ([users count] > 1) {
        // Sanity check.
        …
    } else {
        return nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:17:30.787

正如@ChrisH 在问题下的评论中指出的那样，为每个 ID 进行提取是不好的。因此，我将处理流程更改为：

1.  第一次枚举数据以提取 ID。
2.  执行一次 fetch 以获取所有与 ID 匹配的现有用户，并将它们放入以 ID 为键的字典中（命名为`existingUsers`）。
3.  第二次枚举数据进行真正的处理：在每次迭代中，要么更新在其中找到的一个现有用户，`existingUsers`要么创建一个新用户，`existingUsers`如果是新用户，则将其添加。

代码几乎翻了一番，但性能也是如此。真的很好的权衡！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:53:07.203

为了扩展我对原始问题的评论，在导入数据时重复使用 Core Data 执行获取请求效率不高。

正如@an0 所指出的，最简单的方法是对您将要检查的所有现有对象执行一次提取，然后构造一个 NSDictionary，其中包含您将要检查的属性作为键的对象。所以坚持原来的 User 和 userID 例子：

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"User"];

NSError *error = nil;

NSArray *users = [context executeFetchRequest:fetchRequest error:&error];

if (error) {
  //handle appropriately
}

NSMutableDictionary *userToIdMap = [NSMutableDictionary dictionary];

for (User *user in users){

  [userToIdMap setObject:user forKey:user.ID];

} 
```

现在在处理新数据的方法中，您可以检查`userToIdMap`字典而不是发出获取请求。

[Core Data Programming Guide 的Efficently Importing Data](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html)中概述了一种更复杂的方法，适用于更大的数据集。查看名为“高效实施查找或创建”的部分。Apple 在此处建议的方法遗漏了一些有关如何遍历您创建的数组的代码，我对该问题的解决方案是在这个 SO 问题中：[Basic array comparison algorithm](https://stackoverflow.com/a/12591745/228981)

# android - MapView 顶部的动画菜单按钮

> ID：12694176
> 
> 赞同：0
> 
> 时间：2012-10-02T16:14:48.930
> 
> 标签：android, android-mapview, android-animation

我有一个 MapView，我希望有一个动画菜单选项，当用户单击顶部导航栏上的图标时，它会从屏幕左侧滑入并覆盖 MapView。

所需的行为是： 1\. 用户单击顶部导航栏上的图标 2\. 菜单从左侧滑入，显示具有不同选项的按钮。3\. 如果用户选择取消或返回 Mapview，菜单会向右滑出并消失。

在 MapView 之上实现此行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:19:02.713

首先，您需要在您拥有地图视图的相同 XML 布局中添加按钮：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <view
        android:id="@+id/mv"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        class="com.google.android.maps.MapView"
        android:apiKey="your key"
        android:clickable="true" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linear_layout_buttons"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:orientation="vertical"
    android:paddingRight="5dp" >

    <Button
        android:id="@+id/button_overlay_show_zoom_all"
        android:layout_width="64dp"
        android:layout_height="64dp"
        android:paddingBottom="10dp" />

    <Button
        android:id="@+id/button_overlay_previous"
        android:layout_width="64dp"
        android:layout_height="64dp"
        android:paddingBottom="10dp" />

    <Button
        android:id="@+id/button_overlay_next"
        android:layout_width="64dp"
        android:layout_height="64dp"
        android:paddingBottom="10dp" />
</LinearLayout>
</RelativeLayout> 
```

然后你需要初始化按钮（我假设你知道这部分）

然后定义动画的方法：

```
//Buttons Fadein / Fadeout-------------------------------------------------------------------------------

private void buttonFadeOut() {
        linear_layout_buttons.startAnimation(AnimationUtils.loadAnimation(MyMapActivity.this, android.R.anim.slide_out_right));
        linear_layout_buttons.setVisibility(View.GONE);
}

private void buttonFadeIn() {
    if(linear_layout_buttons.getVisibility() == View.GONE){
        linear_layout_buttons.startAnimation(AnimationUtils.loadAnimation(MyMapActivity.this, android.R.anim.slide_out_left));
        linear_layout_buttons.setVisibility(View.VISIBLE);
} 
```

最后，您只需要在需要的地方调用 buttonFadeIn() 和 ButtonFadeOut() 即可。

祝你好运。

# c# - C#：取消注册事件在 WPF 用户控件中不起作用

> ID：12694179
> 
> 赞同：1
> 
> 时间：2012-10-02T16:14:50.403
> 
> 标签：c#, wpf, events

我在 winForms 中有一个可用的用户控件，并决定将其移植到 WPF。该控件是 kinect 传感器的预览控件，支持所有 3 个流（颜色、深度、骨架）。当我更改 ViewMode（我的控件的一个属性）时，它应该从事件中注销处理程序。

看一下代码：

```
switch (viewMode)
{
    case KinectViewMode.Color:
        Kinect.ColorFrameReady -= new EventHandler<ColorImageFrameReadyEventArgs>(kinect_ColorFrameReady);
        if (!DoesEventHeveListeners("_colorFrameReadyContextHandler"))
            Kinect.ColorStream.Disable();
        break;
    case KinectViewMode.Depth:
        Kinect.DepthFrameReady -= kinect_DepthFrameReady;
        if (!DoesEventHeveListeners("_depthFrameReadyContextHandler"))
            Kinect.DepthStream.Disable();
        break;
    case KinectViewMode.Skeleton:
        Kinect.SkeletonFrameReady -= kinect_SkeletonFrameReady;
        if (!DoesEventHeveListeners("_skeletonFrameReadyContextHandler"))
        {
            Kinect.SkeletonStream.Disable();
        }
        break;
    case KinectViewMode.None:
        Kinect.SkeletonFrameReady -= kinect_SkeletonFrameReady;
        if (!DoesEventHeveListeners("_skeletonFrameReadyContextHandler"))
        {
            Kinect.SkeletonStream.Disable();
        }
        Kinect.DepthFrameReady -= kinect_DepthFrameReady;
        if (!DoesEventHeveListeners("_depthFrameReadyContextHandler"))
            Kinect.DepthStream.Disable();
        Kinect.ColorFrameReady -= kinect_ColorFrameReady;
        if (!DoesEventHeveListeners("_colorFrameReadyContextHandler"))
            Kinect.ColorStream.Disable();
        registeredToEvent = false;
        break;
    }
}

viewMode = value;

switch (viewMode)
{
    case KinectViewMode.Color:
        Kinect.ColorFrameReady += new EventHandler<ColorImageFrameReadyEventArgs>(kinect_ColorFrameReady);
        if (!Kinect.ColorStream.IsEnabled)
            Kinect.ColorStream.Enable();
        break;
    case KinectViewMode.Depth:
        Kinect.DepthFrameReady += new EventHandler<DepthImageFrameReadyEventArgs>(kinect_DepthFrameReady);
        if (!Kinect.DepthStream.IsEnabled)
        {
            depthPixels = new short[Kinect.DepthStream.FramePixelDataLength];
            colorPixels = new byte[sizeof(int) * Kinect.DepthStream.FramePixelDataLength];
            Kinect.DepthStream.Enable();
        }
        break;
    case KinectViewMode.Skeleton:
        Kinect.SkeletonFrameReady += new EventHandler<SkeletonFrameReadyEventArgs>(kinect_SkeletonFrameReady);
        if (!Kinect.SkeletonStream.IsEnabled)
            Kinect.SkeletonStream.Enable();
        break;
    case KinectViewMode.None:
        break;
}

if (ViewMode != KinectViewMode.None)
    registeredToEvent = true; 
```

为什么此代码在 winForms 中有效，而在 WPF 中无效？

# android - 使用robotium测试动态android ui

> ID：12694181
> 
> 赞同：0
> 
> 时间：2012-10-02T16:14:59.833
> 
> 标签：android, robotium

我将有一个带有动态添加按钮的用户界面。为了测试这一点，我想使用robotum。关于如何构建用户界面，我有两种选择，使用活动或使用片段。对于我的情况，后者似乎是一个更好的选择，但我读到 Robotium 不支持片段。有没有我可以考虑的其他选择，或者我说机器人不支持片段是不正确的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:26:06.047

Robotium 确实支持片段。在 3.4.1 中，甚至还有片段特定的方法，例如 waitForFragmentById() 等。

# php - 高效循环

> ID：12694184
> 
> 赞同：-2
> 
> 时间：2012-10-02T16:15:16.620
> 
> 标签：php, html-table

我有一张桌子：

```
| header_row | cell_usr_a | cell_usr_b | cell_fixed_a | cell_fixed_b |
| second_row |...
| usr_row_a  |...
| usr_row_b  |...
| usr_row_c  |... 
```

此示例中的前两**列**(cell_usr*) 来自一个动态对象（一个 x 条目数组）；可能有 0 个或多个；最后两列始终存在。

前两行始终存在（元素名称和其他常规属性）。usr_row* 取决于动态对象中的元素：如果数组的元素之一具有对应的属性集，则显示该行，否则不显示。

如何有效地迭代对象而不必为每一行重新迭代？

目前我做

```
foreach ($array as $element) 
```

对于每一行，根据 $array 的大小添加。然后我需要首先再次遍历所有 $element 以查看是否设置了 usr_row 属性，如果是，则构造该行...

关于如何有效地（并且可能优雅地）做到这一点的任何想法？顺便说一下，它不一定是一张桌子。

编辑：更多代码来帮助说明我的问题 $packages 是对象，它基本上是一个元素数量未知的数组

```
 <table>
    <tr><!-- header row -->
             <td>Package name</td>
            <?php foreach($packages as $pkg) {
               echo '<td>'.$pkg->package_name . '</td>';
            } ?>
            <td>fixed value</td><!-- cell_fixed_a -->
            <td>no value</td><!-- cell_fixed_b -->
          </tr>
          <tr><!-- second row -->
            <td>Count</td>
            <?php foreach($packages as $pkg) {
               echo '<td>'.$pkg->count . '</td>';
            } ?>
            <td>fixed value</td><!-- cell_fixed_a -->
            <td>fixed value</td><!-- cell_fixed_b -->
          </tr>
          <tr><!-- usr_row_a 
               HERE I ONLY NEED TO HAVE THIS ROW IF any one of $pkg has prop set
               -->
            <?php foreach($packages as $pkg) {
              if ($pkg->prop) {
                echo '<tr><td>Property name</td>';
                echo '<td>'. $pkg->prop . '</td>';
            }
         </tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:18:48.220

你不需要循环`$packages`3次..你可以将结果保存在变量中

```
$name = "";
$count = "";
$property = "";

foreach ( $packages as $pkg ) {
    $name .= '<td>' . $pkg->package_name . '</td>';
    $count .= '<td>' . $pkg->count . '</td>';

    if ($pkg->prop) {
        $property .= '<tr><td>Property name</td>';
        $property .= '<td>' . $pkg->prop . '</td>';
    }
} 
```

你可以`echo`他们是各自的地方......

# ios - Apple IOs 更新，旧版本会保留吗？

> ID：12694190
> 
> 赞同：1
> 
> 时间：2012-10-02T16:15:43.563
> 
> 标签：ios, updates

我有个问题，

如果我将我的应用程序更新到较新版本并且更新不会被接受，那么旧版本是否仍然可用？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:16:58.567

是的，如果您的更新被拒绝，您的旧版本将继续有效。所以别担心！

# java - 语言环境货币符号

> ID：12694192
> 
> 赞同：11
> 
> 时间：2012-10-02T16:15:56.777
> 
> 标签：java, android, localization, internationalization, currency

我在获取系统的默认货币符号时遇到了一些问题。我以这种方式获取货币符号：

```
Currency currency = Currency.getInstance(Locale.getDefault());
Log.v("TAG",currency.getSymbol()); 
```

当系统语言在`English (United States)`右侧时，符号显示 ( `$`)。但是当我选择语言时`Portuguese (Portugal)`，它会返回这个符号`¤`。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T11:09:52.383

这似乎是一个已知问题（[http://code.google.com/p/android/issues/detail?id=38622](http://code.google.com/p/android/issues/detail?id=38622)。我通过这种方式找到了一个可能的解决方案：

由于问题出在 Symbol 而不是 Currency 代码中，我解决了这个问题，创建了一个静态`Map`，其中 key 是*CurrencyCode*而 value 是*Symbol*。

```
public static final Map<String, String> MYCURRENCIES = new HashMap<String, String>(){
        {
            put("EUR","€");
            put("USD","$");
            (..)
        }
}; 
```

为了获得语言环境信息中可用的所有（或几乎）货币代码，您可以执行以下操作：

```
for (Locale ll: Locale.getAvailableLocales()){
    try {
       Currency a = Currency.getInstance(ll);
       Log.v("MyCurrency",a.getCurrencyCode()+"#"+a.getSymbol());
    }catch (Exception e){
       // when the locale is not supported
  }
} 
```

*使用CurrencyCode*和*Symbol*创建 Map 后，您只需执行以下操作：

```
Currency currency = Currency.getInstance(Locale.getDefault());
String curSymbol = MYCURRENCIES.get(currency.getCurrencyCode()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T23:41:16.503

一些想法；

1.  可能是您获得了正确的 (Euro) 符号，但您的字体/日志没有它，它看起来只是那个符号？

2.  Locale 是一个非常活泼的类，它的构造函数没有错误检查。您可以轻松查看标准中不支持或实际上不存在的语言环境（例如“de_US”表示“美国所说的德语”）。

3.  请注意，语言环境数据不一定适用于此类中预定义为常量的任何语言环境，但 en_US 除外，这是 Java 保证始终可用的唯一语言环境，并且在不同的 Android 版本中有所不同，并且还可以通过以下方式进行限制操作员或自定义构建。[pt_PT 是在 2.3 中添加的](http://colincooper.net/blog/2011/02/17/android-supported-language-and-locales/)。

4.  关于您提供的选项，如果您查看[Unicode 标准](http://cldr.unicode.org/index/downloads/cldr-1-7)，因为它们已在 API8 及更高版本中实施，葡萄牙仅作为一个领土存在（而不是组合）。

5.  因此，如果您仅从国家代码创建部分区域设置实例，然后获取葡萄牙的货币符号，则可能会更好。您将无法遵守[Locale 类的预定义静态，](http://developer.android.com/reference/java/util/Locale.html)因为它非常严格地支持不同的语言环境（这是一个简短的列表），但它应该可以工作，因为该语言环境具有您在系统中寻找的数据。

6.  我还会尝试查看 currency.toString() 是否返回 EUR（货币的 ISO 4217 代码，通常是三个字母的首字母缩写词）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-29T00:25:49.657

```
NumberFormat currencyFormatter = NumberFormat.getCurrencyInstance();
    String cur = currencyFormatter.format(yourValue); 
```

这会将您的 int/double 格式化为基于设备语言的货币

```
 String currency = cur.replaceAll("[0-9.,]",""); 
```

这就是如何通过替换所有数字、点和逗号来获得货币符号

# ms-access - Dlookup 检索到错误的日期

> ID：12694197
> 
> 赞同：1
> 
> 时间：2012-10-02T16:16:02.173
> 
> 标签：ms-access, ms-access-2010, sql-server-2012

我正在尝试在我的数据库中获取日期，但是当日期小于 12 时，月份和日期会被切换

示例：在数据库 2012-02-10（2012 年 10 月 2 日）中，我这样做时得到的值：

`lastDateMill = Nz(DLookup("LastContactDate", "Mills", "MillID = " & lstMills.Column(0, i)), 0)`

是

```
lastDateMill = "10/02/2012" 
```

所以我认为这只是格式问题，但当我这样做时

```
Format(lastDateMill, "Long Date") 
```

它等于“February-10-12”

这就是我更新日期的方式

```
DoCmd.RunSQL "UPDATE Mills SET LastContactDate = #" & SalesCallDate & "# WHERE MillID = " & lstMills.Column(0, i) 
```

所以`SalesCallDate = "2/10/2012"`美好的约会

那么为什么要切换日期和月份呢？

前端是`ms-access-2010`，后端是on`SQL SERVER 2012`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:37:19.390

您的`SalesCallDate`变量包含一个日期作为文本：

SalesCallDate = "2012 年 2 月 10 日"

显然您希望该字符串的日期格式为`m/d/yyyy`，但它被解释为`d/m/yyyy`格式。

以格式存储字符串值`yyyy/mm/dd`以消除由于语言环境问题引起的混淆......`2012/02/10`

由于事实证明它`SalesCallDate`实际上是一个包含日期值的文本框，因此请更改您的`UPDATE`方法以避免由于语言环境导致的日期问题。

```
Dim strUpdate As String
Dim db As DAO.Database
strUpdate = "UPDATE Mills SET LastContactDate = " & _
    Format(Me.SalesCallDate, "\#yyyy-m-d\#") & vbCrLf & _
    "WHERE MillID = " & Me.lstMills.Column(0, i)
Debug.Print strUpdate
Set db = CurrentDb
db.Execute strUpdate, dbFailonerror
Set db = Nothing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:22:24.193

试试这个，通过明确指定格式

```
DoCmd.RunSQL "UPDATE Mills SET LastContactDate = #" & _
    Format$(SalesCallDate,"yyyy/mm/dd") & "# WHERE MillID = " & _
    lstMills.Column(0, i) 
```

* * *

**更新**：

也许有更好的方法来做到这一点，它独立于任何格式。这个想法是将日期从一个表转移到另一个表，中间没有任何组合、列表或文本。因此，避免了从日期类型到字符串然后返回到日期字段的任何转换。

如果表可以连接（假设 MillID 是列表框的绑定字段）：

```
DoCmd.RunSQL "UPDATE Mills " & _
  "INNER JOIN sourceTable ON Mills.MillID = sourceTable.MillID " & _
  "SET LastContactDate = sourceTable.SalesCallDate " & _
   "WHERE Mills.MillID = " & lstMills 
```

否则

```
DoCmd.RunSQL "UPDATE Mills SET LastContactDate = " & _
  "(SELECT SalesCallDate FROM sourceTable WHERE ID = " & sourceID & ")" _
  "WHERE Mills.MillID = " & lstMills 
```

# cocoa-touch - Cocoa：为什么将框架分配给框架不起作用，但分配边界却可以

> ID：12694200
> 
> 赞同：0
> 
> 时间：2012-10-02T16:16:17.637
> 
> 标签：cocoa-touch

我一直在阅读与[框架和边界之间的区别相关的不同问题（可可：框架和边界之间有什么区别？](https://stackoverflow.com/questions/1210047/cocoa-whats-the-difference-between-the-frame-and-the-bounds)，[UIView框架，边界和中心](https://stackoverflow.com/questions/5361369/ios-programming-frame-bounds-and-center)），但我仍然不明白为什么这样的事情：

```
UILabel *newMark = [[UILabel alloc] initWithFrame:self.frame];
newMark.text = @"|A3";
[self addSubview:newMark]; 
```

或这个：

```
UILabel *newMark = [[UILabel alloc] init];
newMark.text = @"|A3";
newMark.frame = self.frame;
[self addSubview:newMark]; 
```

不显示标签，但在使用边界进行等效操作时，如下所示：

```
UILabel *newMark = [[UILabel alloc] initWithFrame:self.bounds];
newMark.text = @"|A3";
[self addSubview:newMark]; 
```

或这个

```
UILabel *newMark = [[UILabel alloc] init];
newMark.text = @"|A3";
newMark.frame = self.bounds;
[self addSubview:newMark]; 
```

它被显示。使用边界我不会有问题，但我认为没有将标签放在正确的位置，如以下屏幕截图所示：

![标签](../Images/6792a0f8e67376e30bbfe466f9844cef.png)

如您所见，其中“|”，“A”和“3”被剪切，因为它们显示在底部而不是ipad的屏幕上。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:21:18.303

是相对于它的`frame`superview的。因此，如果您的框架的原点位于您的超级视图中的 (100,200)，并且您将子视图的框架设置为与您的框架相同，那么您的子视图将位于您的 (100,200) 处。

通常（假设不涉及转换），当您想告诉子视图与父视图大小相同时，您会说：

```
subview.frame = superview.bounds; 
```

# c - 在 C 中输出字符串的三元运算

> ID：12694202
> 
> 赞同：7
> 
> 时间：2012-10-02T16:16:25.473
> 
> 标签：c, ternary-operator, string-literals

有人可以解释为什么这个简单的三元运算在 C 中甚至无法编译吗？

```
void main(int argc, char *argv[]){
    int a = atoi(argv[1]);
    char foo[] = (a == 1) ? "bar1" : "bar2";
} 
```

特别是字符串似乎是一个问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T16:18:36.110

字符串文字`"bar"`，*当在表达式中使用时*（在这种情况下，在三元运算符内），是指向预分配内存的指针。您不能使用指向数据的指针来初始化数组，只能使用文字（`"..."`或`{...}`）。

相反，您可以将其分配给`char *`：

```
const char *foo = (a == 1) ? "bar1" : "bar2"; 
```

这*不会*复制文字而是指向它，所以你不应该修改`foo`. 如果您需要一个副本，您可以使用`memcpy`，前提是您知道声明数组的大小：

```
char foo[5];
memcpy(foo, (a == 1) ? "bar1" : "bar2", sizeof foo); 
```

如果您特别希望能够*分配*内容，那么有一个技巧可以做到这一点；无论包含什么内容，都可以隐式复制*`struct`*using 赋值的内容（以及从函数中返回它等等），`struct`并且您可以将字符数组放在 a 中`struct`：

```
typedef struct { 
  char contents[5];
} mystring;

mystring foo = (a == 1) ? (mystring){"bar1"} : (mystring){"bar2"};
// You can also use assignments.
foo = (mystring){"baz"}; 
```

就像第二个选项一样，当你这样做时，你必须在`struct`声明中为数组选择一个固定大小。如果你有无限长度的字符串，那么你必须使用指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:29:38.963

您的三元运算很好，但是您无法使用“bar1”和“bar2”所在的预分配内存来初始化数组。

```
int a = atoi(argv[1]);
char foo[5];
memcpy(foo,((a == 1) ? "bar1" : "bar2"), 5); 
```

将是一种可能的方式来继续做你正在做的事情。

# ajax - jquery live 与零剪贴板

> ID：12694205
> 
> 赞同：1
> 
> 时间：2012-10-02T16:16:35.377
> 
> 标签：ajax, jquery, zeroclipboard

我正在使用 Jquery 和 Zeroclipboard。

我已将 $.post 用于 ajax 调用，之后零剪贴板事件不再起作用。

我试过玩 $("#id").live..

如何将零剪贴板包装在实时查询周围或实施即使在 ajax 调用之后也能保留事件的解决方案？

在 PHP 页面上调用以加载零剪贴板元素的函数：

```
function LiveZeroClipboard(copyText)
{   
var i = clips.length;

clips[i] = Array();
clips[i]['client'] = new ZeroClipboard.Client();
clips[i]['client'].setHandCursor(true);
clips[i]['client'].setText(copyText);

clips[i]['client'].addEventListener('onMouseOver', function(client){
    rollOverCSS(2);
});

clips[i]['client'].addEventListener('onMouseOut', function(client){
    rollOverCSS(1);
});

clips[i]['client'].addEventListener( 'onMouseUp', function(client) {
    //fades in a popup and fades out after 1000 miliseconds
    $('#'+AddressPopupBoxID).fadeIn("fast");
    setTimeout(function(){$('#'+AddressPopupBoxID).fadeOut();},1000);
}); 
```

}

加载 Ajax 文件的 onClick 函数：

```
function AjaxCall(postURL, JSONData, UpdateID){
$.post (postURL, { data_to_send:JSONData }, function (data_back){
        $(UpdateID).html(data_back);
    }) 
```

}

因此，在将 ajax 文件加载到网页后，零剪贴板事件不再起作用。

我猜文档范围现在只在 ajax 文件中，它只是一个更新按钮并触发一些数据库任务的 PHP 文件。

保持零剪贴板事件持续存在的解决方案是什么？

谢谢

# java - Java中的switch语句

> ID：12694210
> 
> 赞同：4
> 
> 时间：2012-10-02T16:16:50.753
> 
> 标签：java

基本上我需要一个字母 AZ 并将其转换为韭菜（符号、#、字母的组合，看起来像 AZ 字符。我只允许使用 switch 语句（switch、case、breaks）我也必须使用.next().charAt(0) 方法。

当我尝试编译我的程序时，它会出现多个错误，所有错误都是指向我在 case 语句中使用的 az 字符的“找不到符号”。

```
import java.util.Scanner;

public class dlin_Leet
{
    public static void main(String args[])
    {
        Scanner input = new Scanner(System.in);

        char character;//input by user
        String Leet;

        System.out.print("Enter character to convert:");
        String Leet = input.next();
        char character = Leet.charAt(0);

        switch (character)
        {
            case a: Leet = "4";
                break;
            case b: Leet = "I3";
                break;
            case c: Leet = "[";
                break;
            case d: Leet = ")";
                break;
            case e: Leet = "3";
                break;
            case f: Leet = "|=";
                break;
            case g: Leet = "&";
                break;
            case h: Leet = "#";
                break;
            case i: Leet = "1";
                break;
            case j: Leet = "J";
                break;
            case k: Leet = "|<";
                break;
            case l: Leet = "1";

             }
        System.out.println(Leet);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T16:19:13.017

字符常量必须在撇号中：

`case 'a':` 代替`case a:`

修复你的代码，我希望这是你唯一的语法错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T16:23:19.403

另外 - 您在同一块中两次声明变量“Leet”和“字符”（重复的局部变量）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:19:41.470

case 语句使用`char`（这意味着单引号），它应该是这样的

```
 switch (character)
            {
                case 'a': Leet = "4";
                    break;
                case 'b': Leet = "I3";
                    break;
             .........
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T16:20:23.453

你的情况应该是一个类似 case 'a' 的字符

```
 switch(character) 

 {
    case 'a':
       //do your stuff
    } 
```

而且您还声明了leet（两次字符串变量）。当您从扫描仪获得输入时，只需声明一个并使用相同的变量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T16:28:32.903

只有在使用 JDK7 时才能在 switch case 中使用字符串，即便如此，您也必须将值放在引号中。像

```
case "a": 
```

# c++ - 在构造时初始化浮点数组

> ID：12694214
> 
> 赞同：11
> 
> 时间：2012-10-02T16:16:58.867
> 
> 标签：c++

C++ 中有没有办法构造一个浮点数组来初始化它的值？

例如，我这样做：

```
float* new_arr = new float[dimension];
for(unsigned int i = 0; i < dimension; ++i) new_arr[i] = 0; 
```

施工期间可以做任务吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-02T16:19:25.543

```
float* new_arr = new float[dimension](); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-02T16:20:56.707

在这种特殊情况下（全为零），您可以使用值初始化：

```
float* new_arr = new float[dimension](); 
```

`new[]`您可以使用 a而不是显式使用[`std::vector<float>`](http://en.cppreference.com/w/cpp/container/vector)：

```
std::vector<float> new_vec(dimension, 0); 
```

# regex - 在两个可能的分隔符之一之前查找一个单词

> ID：12694220
> 
> 赞同：5
> 
> 时间：2012-10-02T16:17:14.467
> 
> 标签：regex, r

```
word:12335
anotherword:2323434
totallydifferentword/455
word/32 
```

`:`我需要在或`/`仅使用基本 R 函数之前获取字符串。我可以使用`stringr`但不想在我的包中添加另一个依赖项来做到这一点。单词可以有可变数量的字符，但总是以分隔符（之一）结束。我不需要保留后面的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:22:49.997

也许尝试：

```
x <- c("word:12335", "anotherword:2323434", "totallydifferentword/455", "word/32")
lapply(strsplit(x, ":|/"), function(z) z[[1]]) #as a list
sapply(strsplit(x, ":|/"), function(z) z[[1]]) #as a string 
```

有一些正则表达式解决方案也可以使用`gsub`，但根据我遇到类似问题的经验，它`strsplit`会不那么雄辩，但速度更快。

我想这个正则表达式也可以工作：

```
gsub("([a-z]+)([/|:])([0-9]+)", "\\1", x) 
```

在这种情况下 gsub 更快：

```
Unit: microseconds
        expr    min     lq median     uq     max
1     GSUB() 19.127 21.460 22.392 23.792 106.362
2 STRSPLIT() 46.650 50.849 53.182 54.581 854.162 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:22:52.857

像这样的东西可以在 Ruby [http://rubular.com/r/PzVQVIpKPq](http://rubular.com/r/PzVQVIpKPq)

```
^(\w+)(?:[:\/]) 
```

从字符串的前面开始，抓取任何单词字符并捕获它们，直到到达非捕获`/`或`:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:21:10.813

[这个正则表达式似乎工作](http://rubular.com/r/Prp6NgnToB)。你可以在R中使用它吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-08T21:32:57.337

您可以使用软件包*unglie*：

```
library(unglue)
x <- c("word:12335", "anotherword:2323434", "totallydifferentword/455", "word/32")
unglue_vec(x, "{res}{=[:/].*?}")
#> [1] "word"                 "anotherword"          "totallydifferentword"
#> [4] "word" 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2019 年 10 月 8 日创建)

*   `{res}`匹配任何东西并将被返回，它相当于`{res=.*?}`
*   `{=[:/].*?}``:`匹配以or开头的任何内容，`/`并且不会返回，因为我们没有 lhs`=`

# python - Python PIL 从 STDIN 读取 PNG

> ID：12694230
> 
> 赞同：1
> 
> 时间：2012-10-02T16:17:46.353
> 
> 标签：python, png, python-imaging-library

我在使用 PIL 从 STDIN 读取 png 图像时遇到问题。当图像由 PIL 写入时，它全部被[打乱](http://cl.ly/image/3z1k2B1J3F0t)，但如果我使用简单的文件打开写入文件，写入和关闭文件将[完美](http://cl.ly/image/3i1w2C0I1o30)保存。

我有一个程序可以将 png 文件按顺序转储到标准输出，没有压缩，我使用 python 脚本读取该流，该脚本应该读取数据并在几乎每个 png 上执行一些例程。转储数据的程序写入某个字符串来分隔PNGs文件，该字符串是`"{fim:FILE_NAME.png}"`

脚本类似于：

```
import sys
import re
from PIL import Image

png = None

for linha in sys.stdin: 
    if re.search('{fim:', linha):
        fname = linha.replace('{fim:','')[:-2]

        # writes data directly to file, works fine
        #f = open("/tmp/%s" % fname  , 'w')
        #f.write(png)
        #f.close()

        # create a PIL Image from data and writes to disk, fails fine
        im = Image.frombuffer("RGB",(640,480),png, "raw", "RGB", 0, 1)
        #im = Image.fromstring("RGB",(640,480),png)
        im.save("/tmp/%s" % fname)

        png = None

    else:
        if png is None:
            png = linha
        else:
            png+= linha 
```

imagemagick 从错误的图像中识别：

> /tmp/1349194042-24.png PNG 640x480 640x480+0+0 8 位 DirectClass 361KiB 0.010u 0:00.019

imagemagick 从工作图像中识别：

> /tmp/1349194586-01.png PNG 640x480 640x480+0+0 8 位 DirectClass 903KiB 0.010u 0:00.010

有没有人知道发生了什么？是关于小/大端的吗？我尝试过`Image.frombuffer`，，`Image.fromstring`不同的模式，但没有。似乎有更多关于 PIL 期望的缓冲区的信息。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:35:25.520

如果`png`变量包含 PNG 文件中的二进制数据，则无法使用`frombuffer`;读取它。用于读取原始像素数据。相反，使用[`io.StringIO`](https://docs.python.org/3/library/io.html#io.StringIO)and [`Image.open`](https://pillow.readthedocs.io/en/stable/reference/Image.html#PIL.Image.open)，即：

```
import io
from PIL import Image

img = Image.open(io.StringIO(png)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:26:39.623

`png`变量在第一次调用 Image.frombuffer() 时未初始化。您需要将其初始化为标准输入中的某些内容。

我不确定您使用`for linha in sys.stdin:`. 这为您提供了行缓冲输入。您可能想要使用大小为 N 的块缓冲输入，例如 sys.stdin.read(N)。这将读取特定数量的字节，然后您可以解析数据，例如删除文件名分隔符并填充 Image.frombuffer() 的输入缓冲区。

# facebook - 致谢：错误发生*有时*

> ID：12694231
> 
> 赞同：1
> 
> 时间：2012-10-02T16:18:03.277
> 
> 标签：facebook, api, facebook-php-sdk, facebook-credits, credits

我创建了一个 Facebook 应用程序并集成了 Credits。但是，大约每两次调用 credits API 时，我都会收到以下错误：

*处理您的付款时出现问题/抱歉，我们无法处理您的付款。您没有为此交易支付任何费用。请稍后再试。*

我这边的一切看起来都很好。成功时，回调被调用 3 次：

1.  Payments_get_items
2.  付款状态更新，状态“已放置”
3.  付款状态更新，状态“已解决”

当它失败并显示上述错误对话框时，我可以看到只执行了第一个调用（payments_get_items）。

我可以看到在这两种情况下对 Facebook 的响应是相同的：

```
{ "content":[ { "item_id":"1", "title":"[title]", "description":"[description]", "image_url":"[url]", "product_url":"[url]", "price":30 } ], "method":"payments_get_items" } 
```

有没有人经历过这种情况或可以想象这种行为的原因是什么？

谢谢！

体重

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:45:43.260

我只是有类似的问题。错误消息是通用的，它不会为您提供问题的确切原因。

就我而言，问题是我的图片网址拼写错误，因此请仔细检查您的 payment_get_items 回复。

除了检查图片 url 的有效性外，还要检查标题和描述的长度是否正常。检查此网址上的“开发人员响应”部分以获取有关边界的信息： [https ://developers.facebook.com/docs/payments/callback/#payments_get_items](https://developers.facebook.com/docs/payments/callback/#payments_get_items)

顺便说一句，我认为他们错误地将产品 url 标记为必需的，但是您可以将与图像 url 相同的值作为确定。

# php - 通过 OAuth2 从 Gmail 中获取电子邮件

> ID：12694235
> 
> 赞同：2
> 
> 时间：2012-10-02T16:18:24.883
> 
> 标签：php, codeigniter, gmail, google-api, oauth-2.0

我正在尝试使用 PHP 和 CodeIgniter 以及 OAuth2 库从 gmail 获取电子邮件。我已经设置了 OAuth2 来获取用户访问令牌等。我可以通过这样做来获取用户信息

```
public function get_user_info(OAuth2_Token_Access $token)
{
    $url = 'https://www.googleapis.com/oauth2/v1/userinfo?alt=json&'.http_build_query(array(
        'access_token' => $token->access_token,
    ));

    $user = json_decode(file_get_contents($url), true);
    return array(
        'uid' => $user['id'],
        'nickname' => url_title($user['name'], '_', true),
        'name' => $user['name'],
        'first_name' => $user['given_name'],
        'last_name' => $user['family_name'],
        'email' => $user['email'],
        'location' => null,
        'image' => (isset($user['picture'])) ? $user['picture'] : null,
        'description' => null,
        'urls' => array(),
    );
} 
```

我现在想做的是获取一些电子邮件。我已经用谷歌搜索了一些关于如何获取电子邮件的代码，但我唯一能看到的是`https://mail.google.com/mail/feed/atom/`. 我在 Google OAuth2 Playground 上找到了这个，但除了直接导航到它之外，我不知道如何使用它。

谁能给我一些建议？理想情况下，我想获取不仅仅是新的电子邮件（这似乎是上面的链接所做的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:28:52.433

使用基于 REST 的界面，您目前只能获取[未读消息提要](https://developers.google.com/google-apps/gmail/gmail_inbox_feed)。如果要访问用户的所有电子邮件，则必须使用 IMAP。Google 开发了一种[使用 OAuth2 进行 IMAP/SMTP 身份验证](https://developers.google.com/google-apps/gmail/oauth_overview)的方法，您可以使用该方法。

# iphone - 返回 ViewController 后动画不起作用

> ID：12694236
> 
> 赞同：0
> 
> 时间：2012-10-02T16:18:26.620
> 
> 标签：iphone, xcode, animation, uiview, viewcontroller

如果满足特定条件，我有以下代码为徽章设置动画。它工作正常，除非在查找后重新加载 ViewController 后立即调用它（在另一个 VC 中）

```
if ((-MY CONDITION HERE-) {
        NSLog(@"am going to animate!");

      [UIView animateWithDuration:1.0
                            delay:0
                          options:(UIViewAnimationOptionAutoreverse|UIViewAnimationOptionRepeat)
                       animations:^{
                                  selectedInfoButton.alpha = 0.4;
                                 }
                       completion:nil];
   } 
```

我可以看到在重新加载 VC 时调用了该方法，但是动画在与调用查找时相同的状态下被“冻结”。可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:33:48.067

可能性：

*   有一次在 `viewController`

    该代码在`viewDidLoad` 方法中调用。然后将其添加到`viewWillAppear`

*   检查条件是否满足，（即块中的代码命中） ViewController 第二次重新执行

# java - 当您需要/拥有数据作为本机 java 数组时，carrays.i 与 arrays_java.i 的 SWIG 效率

> ID：12694238
> 
> 赞同：2
> 
> 时间：2012-10-02T16:18:30.623
> 
> 标签：java, swig

我很好奇 swig[文档](http://www.swig.org/Doc2.0/SWIGDocumentation.html#Java_c_arrays)中关于在 swig/java 中处理数组的两种基本方法的效率。特别是，我想知道如果您最终需要复制到本机 java 数组或从本机 java 数组复制，那么 carrays.i 方式是否真的更有效？例如，假设我有一个 C func void populate(int x[]) 要调用，然后我需要将结果传递给一个采用本机 java int[] 的 Java func。要做到这一点，我需要：

```
%include "carrays.i"
%array_class(int, intArray);

intArray array = new intArray(10000000);
populate(array); 
```

然后复制到本机 java 数组：

```
int[] nativeArray = new int[10000000];
for(int i = 0; i < 10000000; ++i)
{
    nativeArray[i] = array.getitem(i);
} 
```

然后调用我的本机 java 函数，它采用本机 int[]

```
f(nativeArray); 
```

真的比这更有效吗

```
%include "arrays_java.i"
int[] nativeArray = new int[10000000];
populate(nativeArray);
f(nativeArray); 
```

因为在前一种情况下，无论如何你都必须做副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T10:27:51.057

假设是，如果您使用的是 carrays.i，那么您也不会在 Java 数组之间来回复制 - 您希望在任何地方都使用 carrays.i 类型而不是那样。

您仍然可以期望测量两种类型的开销 - JNI 调用会产生一定的惩罚并复制另一种惩罚。使用 carray.i，后者在您正确识别的更多 JNI 调用的价格下保持较低。此外，调用`Get<PrimitiveType>ArrayElements`还可能会根据 JVM 引入副本。

然而，令人惊讶的是，arrays_java.i 的实现比您预期的要多，例如类型映射使用的 SWIG_JavaArrayIn 函数包含以下内容：

> ```
>  for (i=0; i<sz; i++)
>     JAVA_TYPEMAP_ARRAY_ELEMENT_ASSIGN(CTYPE) 
> ```

并且在输出类型图中也发生了类似的相应副本（通过分配）：

> ```
>  for (i=0; i<sz; i++)
>     arr[i] = (JNITYPE)result[i]; 
> ```

（这是对 JVM 可能制作副本的补充！）

然而，这一切的原因是合理的——这些类型映射必须支持“奇怪”的情况，即所使用的 JNITYPE 并不完全映射到 C 类型。可能发生这种情况的一个例子是数组`unsigned char`- Java 中最接近的类型是`byte`，但是`byte`为了表示值的范围，C 中的s 数组将在 Java 端`unsigned char`公开为数组`short`. 由于`sizeof(jshort) != sizeof(unsigned char)`内存布局不兼容，需要填写并返回副本。

如果这让您感到困扰（我强烈建议进行基准测试），那么仍然可以编写您自己的高效类型映射，它使用您似乎希望的 JNI 调用，例如：

```
%module test

%typemap(jtype) int arr[ANY] "int[]"
%typemap(jstype) int arr[ANY] "int[]"
%typemap(jni) int arr[ANY] "jintArray"
%typemap(javain) int arr[ANY] "$javainput"
%typemap(in) int arr[ANY] {
  // check the size is compatible here also
  $1 = JCALL2(GetIntArrayElements, jenv, $input, 0);
}
%typemap(freearg) int arr[ANY] {
  if ($1) {
    JCALL3(ReleaseIntArrayElements, jenv, $input, $1, JNI_ABORT);
  }
}
%typemap(argout) int arr[ANY] {
  JCALL3(ReleaseIntArrayElements, jenv, $input, $1, 0);
  $1 = NULL;
}

%inline %{
void populate(int arr[100000]) {
  for (unsigned i = 0; i < 100000; ++i) {
    arr[i] = -i;
  }
}
%} 
```

将指针传递给从 VM 获得的 Java 数组（它可能仍然是副本，也可能不是副本，您可以使用可选的第三个参数进行检查，该参数`GetIntArrayElements`是一个布尔值，指示 JVM 是否在进程中制作了副本）。

这些类型映射按“原样”传递 Java 数组，然后从 JVM 获取指针以在 C 函数中使用。如果函数成功，则`ReleaseIntArrayElements`调用第三个参数为 0 - 这确保任何修改在 Java 中也是可见的。如果调用不成功，则将调用该函数`JNI_ABORT`，在返回的指针是副本的情况下，该函数不会使任何更改可见。

我们可以称之为：

```
public class run {
  public static void main(String[] argv) {
    System.loadLibrary("test");
    int[] arr = new int[100000];
    test.populate(arr);
    // Only print 40 to avoid spamming my screen!
    for (int i = 0; i < 40; ++i) {
      System.out.println(arr[i]);
    }
  }
} 
```

它可能有 0 个副本，但只能在 Java 中的类型与 C 中的相应类型完全匹配的情况下使用。

# php - 检查变量不为空或为空的最安全的方法是什么？

> ID：12694242
> 
> 赞同：0
> 
> 时间：2012-10-02T16:18:48.680
> 
> 标签：php

在 PHP 中，检查字符串变量是否为空或 null 的最佳方法是什么？

我目前有以下内容：

```
if($variable == null || $variable == "")
    exit; 
```

并想知道是否有更简约的方式来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:20:11.457

使用 empty() 见[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

```
if(empty($myvariable)) 
   exit(); 
```

如果变量为**空**或**null** ，则 Empty 返回 true ，详细信息如下

从文档

> 确定一个变量是否被认为是空的。如果变量不存在或其值等于 FALSE，则认为该变量为空。如果变量不存在，empty() 不会生成警告。
> 
> 如果 var 存在并且具有非空、非零值，则返回 FALSE。否则返回 TRUE。

以下内容被认为是**空**的（返回 true）：

*   ""（一个空字符串）
*   0（0 为整数）
*   0.0（0 作为浮点数）
*   "0" (0 作为字符串)
*   **无效的**
*   错误的
*   array() （一个空数组）
*   $var; （声明的变量，但没有值）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T16:20:35.893

```
if (empty($variable))
    exit; 
```

`is_null()`如果您想明确测试变量是否设置为 value ，也可以使用`null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:19:43.893

[http://www.php.net/manual/en/function.empty.php](http://www.php.net/manual/en/function.empty.php)

以下内容被认为是空的：

```
"" (an empty string)
0 (0 as an integer)
0.0 (0 as a float)
"0" (0 as a string)
NULL
FALSE
array() (an empty array)
$var; (a variable declared, but without a value) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T17:25:04.627

要检查变量是否为空或为空，请参阅以下代码片段

```
 if(is_null($variable) || empty($variable))
    {
      exit;
    } 
```

有关 is_null 和空函数的文档，请参阅以下网址 [http://php.net/manual/en/function.is-null.php](http://php.net/manual/en/function.is-null.php) http://www.php.net/manual/en/function.empty.php

# wordpress - BackupBuddy 不允许我从我的 Wordpress MultiSite 安装中导出子站点。虽然应该

> ID：12694247
> 
> 赞同：1
> 
> 时间：2012-10-02T16:19:19.333
> 
> 标签：wordpress, export, backup

我一直在使用backupbuddy，并且已经这样做了很多次。然后我休息了一两个月，现在它不允许我从我的 Wordpress 多站点安装中导出子站点！？？我试过停用插件，卸载并重新安装 BB，更新所有内容，当我尝试导出子站点时，它总是给我同样的信息：

"**主站点无法导出**

主网络站点无法导出，因为它与网络绑定。它只能从主网络管理员备份。可以导出所有其他子站点以导入同一网络（又名重复）、另一个网络或作为独立站点。有关其他信息，请参阅 BackupBuddy 多站点知识库。”

为什么它认为这是“主网站”……它不是。我可以设置哪个站点应该是主网络站点吗？

我已经走到了尽头。

欢迎任何有用的建议......〜eric

# lucene - Elastic Search 中的唯一标签查询

> ID：12694256
> 
> 赞同：1
> 
> 时间：2012-10-02T16:19:45.740
> 
> 标签：lucene, elasticsearch

我有可以有很多**TAGS的****POSTS**。我只希望我的查询返回带有唯一标签的**POSTS ，而不是其他标签。**例如。

 ****```
posts: [
  {  id: 1
     tags: [hello, world]
     ...
  }
  {  id: 2
     tags: [hello]
  }
] 
```

**以下：**

*搜索？q=标签：你好*

**应该只返回：**

```
posts: [
  {  id: 2
     tags: [hello]
  }
] 
```

**我将如何使用*弹性搜索*来完成此任务？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:12:22.523

Elasticsearch 在底层使用了 lucene，它是一个倒排索引。粗略地说，它索引术语并允许您根据术语查询文档。如果您搜索一个术语，它当然会返回包含该术语的文档。标签也是术语，所以逻辑是一样的。我不知道您如何告诉 lucene 返回**仅**包含该术语的文档，或者相反，以排除包含任何其他术语的所有文档。

您可以实现您希望在单个值中完全发送标签的内容，并将该字段的映射设置为`"index" : "not_analyzed"`. 这样，您将为每个文档索引一个标签术语，其中包含与其相关的所有标签。如果您搜索特定标签，则将返回仅包含该特定标签的文档。另一方面，如果一个文档有多个标签，您需要一起搜索所有标签才能取回该文档。您的要求对我来说看起来很奇怪，但如果这是您想要的，那么您应该可以做到。****

# teamcity - 在其他人正在执行时暂停 TeamCity 项目

> ID：12694260
> 
> 赞同：4
> 
> 时间：2012-10-02T16:19:53.027
> 
> 标签：teamcity

我希望能够指定一个构建项目应该在另一个指定项目正在运行时暂停。

在我的例子中，有一个项目 #1 构建并部署编译的代码到我们的服务器，还有一个项目 #2 对部署的代码执行 Selenium 测试。测试可能需要几分钟，我想确保构建和部署不会在测试过程中发生。

所以，我想在#2（测试）运行时暂停#1（构建）。

据我所知，依赖项或触发器不提供此选项。这个可以配置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:46:04.510

[TeamCity 问题跟踪器TW-3798](http://youtrack.jetbrains.com/issue/TW-3798)上有一个请求。欢迎您投票和观看。

目前正在开发此功能。现在，您可以使用[GroovyPlugin](http://confluence.jetbrains.net/display/TW/Groovy+plug)提供的功能之一，称为 StartBuildPrecondition。为确保只执行一个构建，为两个构建添加相同的写锁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T16:28:37.977

我们这样做的方法是将它们限制为一个构建代理。他们为您投保一次只能运行一个。

# c# - 如何在 C# MVC 中获取 URL 值并将其放入 Html.ActionLink

> ID：12694264
> 
> 赞同：0
> 
> 时间：2012-10-02T16:20:14.467
> 
> 标签：c#, asp.net-mvc, url, html.actionlink

所以我有这个页面，它将显示数据库中的单个记录。所以我的网址看起来像：

`mysite.com/Vehicle/Edit/1`

或者它可能会以 2、3、4、5 等结束。取决于它的记录。基本上我需要这个页面中的一个链接，它将带我到另一个页面，但在 url 中具有相同的值，所以它可能看起来像：

`mysite.com/Owner/Add/1`

或者它可能以 2、3、4、5 等结尾。取决于链接所在的记录。

我如何使用 C# MVC 执行此操作，如果有任何区别，我使用 Razor。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:31:47.347

您将需要使用其中一个[`Html.ActionLink`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink%28v=vs.108%29.aspx)助手。

假设您将 a 传递`Model`给具有名为 的属性的视图`Id`。你可以这样使用`Html.ActionLink`：

`@Html.ActionLink("Add Owner", "Add", "Owner", new { id = Model.Id }, null)`

第一个参数是链接将显示的文本。第二个参数是`Action`要调用的名称。第三个参数是所在的名称`Controller`。`Action`第四个参数是 的路由值`Action`。第五个参数用于 html 属性。假设您想在`class`链接中添加一个。而不是 null，您可以使用`new { @class = "my-link-class" }`. 注意`@`课前。那是因为`class`是保留字。如果您正在设置`style`，您只需执行以下操作：`new { style = "background-color: #ffffff;" }`.

所有这一切都假设您的 Add`Action`接受一个`int id`. 所以是这样的：

```
public ActionResult Add(int id)
{
   // Do stuff.
} 
```

Here are the docs for the specific `Html.ActionLink` overload I used in my example: [http://msdn.microsoft.com/en-us/library/dd504972(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/dd504972(v=vs.108).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:26:09.487

请参阅此帖子以获取 URL。[如何在 MVC 3 中获取当前页面 URL](https://stackoverflow.com/questions/5304782/how-to-get-current-page-url-in-mvc-3)

一旦你有了 url，你就可以在最后的 '/' 之后挑选尾随字符

# c# - 在 ASP.NET MVC 4 应用程序中打印版本号

> ID：12694267
> 
> 赞同：68
> 
> 时间：2012-10-02T16:20:26.067
> 
> 标签：c#, asp.net-mvc

我有一个 ASP.NET MVC 4 应用程序。目前，我正在“应用程序”选项卡下的项目属性中设置应用程序的版本。从这里，我单击“程序集信息...”按钮。在那里，我在“程序集版本”字段中输入了“1 0 0 *”。

我的问题是，如何在我的网页上显示这个值？目前，我正在尝试以下

```
@System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString() 
```

不幸的是，它总是打印“0.0.0.0”。实际上，我想让它打印 1.0.0.xyz。我还想打印最后一次构建发生的日期/时间。但是，我不知道该怎么做。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-10-02T16:26:36.267

要打印定义呈现此视图的控制器的程序集的版本号：

```
@ViewContext.Controller.GetType().Assembly.GetName().Version 
```

以及组装日期：

```
@File.GetCreationTime(ViewContext.Controller.GetType().Assembly.Location) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-02T19:54:56.273

我通常`HtmlHelper`为此目的进行扩展。像这样的东西：

```
public static class HtmlHelperExtensions
{
    public static IHtmlString AssemblyVersion(this HtmlHelper helper)
    {
        var version = Assembly.GetExecutingAssembly().GetName().Version.ToString();
        return MvcHtmlString.Create(version);
    }
} 
```

而不是内部视图，您只需调用：

```
@Html.AssemblyVersion() 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-05-07T07:44:12.600

如果您在生产服务器上发布应用程序，我建议您使用类似的东西

```
@String.Format(
    "{0:dddd, MMMM d, yyyy HH:mm:ss}", 
    File.GetLastWriteTime(ViewContext.Controller.GetType().Assembly.Location)) 
```

用于检索日期。

这将打印实际的发布日期，因为这`File.GetCreationTime()`将为您提供实际程序集 dll**第一次**在服务器上复制的日期。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-04-07T10:57:14.270

部署后正确修改日期的工作解决方案：

```
@File.GetLastWriteTime(@System.Reflection.Assembly.GetExecutingAssembly().Location) 
```

也可以在 MVC5 中使用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-02T16:27:41.137

这将打印文件中概述的当前版本号，`AssemblyInfo.cs`以便在 ASP.NET MVC 视图中打印：

```
@(typeof(MyController).Assembly.GetName().Version.ToString()) 
```

当然替换`MyController`为您适当的 MVC 控制器名称。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-19T18:58:18.400

如果您在 Razor 视图中需要它，这对我有用。它需要`System.IO.*`前缀才能为我工作

```
<!--
Version @System.Diagnostics.FileVersionInfo.GetVersionInfo(typeof(YourNamespace.Program).Assembly.Location).ProductVersion
Last deployed on @System.IO.File.GetCreationTime(typeof(YourNamespace.Program).Assembly.Location)
--> 
```

输出以下内容：

```
<!--
Version 1.0.0
Last deployed on 04/19/2019 1:36:24 PM
--> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-02T16:25:44.723

您的程序集版本可以使用 设置`AssemblyFileVersionAttribute`，必须专门访问。

```
AssemblyFileVersionAttribute attr = typeof(MyController).Assembly.GetCustomAttributes(typeof(AssemblyFileVersionAttribute), true).OfType<AssemblyFileVersionAttribute>().FirstOrDefault();

if (attr != null)
{
    return attr.Version;
} 
```

MvcDiagnostics [Nuget 包](http://nuget.org/packages/MvcDiagnostics)使这变得简单。

# java - 找到幂集和集合列表的交集

> ID：12694268
> 
> 赞同：2
> 
> 时间：2012-10-02T16:20:27.427
> 
> 标签：java

给定一个大的任意集合 S 和一个集合列表 S_n，找到 S_n 中作为 S 子集的所有集合。

换句话说，PowerSet(S) 和 S_n 的交集。

是否有任何 Java 库可以快速完成这种数学运算？集合 S_n 的列表相对较小，最多几百个，而这些集合最多包含 10 个项目。但是，任意集合（在运行时确定）可能有多达 20 个项目（在 1000 个集合中），因此具有巨大的幂集。

我正在寻找一种方法，也许是进行某种类型的离线计算，以非常快速地（50 毫秒或更短）进行这种确定。

示例：S = { 1, 2, 3 }

S_n = [ { 1 }, { 1, 2 }, { 5, 4, 6 } ]

结果 = [ { 1 }, { 1, 2 } ]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:25:52.387

伪代码

```
for each subset s_n
    if (s.containsAll(s_n)) {
        add it to the result list
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:26:54.540

我认为您可以使用`retainAll(Collection<?> c)` 接口中声明的标准方法`java.util.Set`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:30:38.097

您可能想看看 Google 的 Guava 库。

[https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Sets](https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Sets)

这可以为您计算 powerset 以及对 Collections 的任何其他操作，还可以确保良好的性能（考虑到您正在计算 powerset .....）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T16:31:06.490

尝试使用[番石榴套装](http://docs.guava-libraries.googlecode.com/git/javadoc/index.html)。

它具有许多您需要的实用程序，例如 powerSet 和交集。

# eclipse - Eclipse 调试器冻结但没有给出错误

> ID：12694279
> 
> 赞同：1
> 
> 时间：2012-10-02T16:21:14.353
> 
> 标签：eclipse, debugging

我正在调试某人的代码，当我执行某些特定操作时它会冻结，但 Eclipse 不会因错误而停止（我可能不小心将其关闭）。当我在调试器中按下暂停时，Eclipse 向我显示了一堆挂起的线程，其中两个是红色的。我想知道是否有错误，或者某处是否只有一个无限循环（这似乎不太可能，因为在这种情况下 Eclipse 应该在循环中中断）。如果有人可以帮助我，我会很好提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:31:08.130

也许你有一个僵局？

您可以使用 jconsole（与 java jdk 一起使用）来找出这一点。启动 jconsole，附加到您的进程，转到 Threads 选项卡。按“检测死锁”...查看所有线程状态也很有用，例如，您可以在一个线程中有无限循环，而另一个线程被阻塞等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:27:50.113

我以前也遇到过这种情况，尝试每隔几行代码插入断点，然后逐步执行这些断点，直到它中断，删除它们之间没有任何错误的断点。记住导致它崩溃的代码行并进行任何必要的更改来修复它。

# selenium - 无法使用 googlechrome 运行 selenium

> ID：12694282
> 
> 赞同：-1
> 
> 时间：2012-10-02T16:21:24.523
> 
> 标签：selenium

1.启动硒服务器：

```
sudo java -jar selenium-server-standalone-2.25.0.jar -trustAllSSLCertificates -port 4444 <br>
........
09:02:06.523 INFO - Version Jetty/5.1.x <br>
09:02:06.526 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver] <br>
09:02:06.533 INFO - Started HttpContext[/selenium-server,/selenium-server]<br>
09:02:06.537 INFO - Started HttpContext[/,/]<br>
09:02:06.571 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@7df17e77<br>
09:02:06.571 INFO - Started HttpContext[/wd,/wd]<br>
09:02:06.574 INFO - Started SocketListener on 0.0.0.0:4444<br>
09:02:06.577 INFO - Started org.openqa.jetty.jetty.Server@798fd984<br> 
```

2.在perl中运行测试用例：

```
my $sel = Test::WWW::Selenium->new( host => "localhost", <br>
                                port => 4444, <br>
                                browser => "*googlechrome", <br>
                                browser_url => "http://>fns-IP/" );<br>

$sel->start;
$sel->open_ok("http://>fns-IP/login"); 
```

3.测试日志：

```
09:09:25.146 INFO - Command request: getNewBrowserSession[*googlechrome, http://>fns-IP/] on session null<br>
09:09:25.146 INFO - creating new remote session<br>
09:09:25.147 INFO - Allocated session 553a1b30a1dd4f8a889fa4dfb7a6ae8a for http://>fns-IP/, launching...<br>
09:09:25.147 INFO - Launching Google Chrome...<br>
09:09:30.336 INFO - Got result: OK,553a1b30a1dd4f8a889fa4dfb7a6ae8a on session 553a1b30a1dd4f8a889fa4dfb7a6ae8a<br>
09:09:30.340 INFO - Command request: open[http://>fns-IP/login, ] on session 553a1b30a1dd4f8a889fa4dfb7a6ae8a<br>
09:09:30.610 INFO - Got result: OK on session 553a1b30a1dd4f8a889fa4dfb7a6ae8a<br>
09:09:30.623 INFO - Command request: isElementPresent[id=id_username, ] on session 553a1b30a1dd4f8a889fa4dfb7a6ae8a<br>
09:09:32.393 INFO - Couldn't proxy to http://>qlriakmdkm/ because host not found<br>
09:09:32.395 INFO - Couldn't proxy to http://>wkdujqsymi/ because host not found<br>
09:09:32.393 INFO - Couldn't proxy to http://>rkjzjvpsbx/ because host not found<br> 
```

4\. googlechrome浏览器中的网址：

```
http://>fns-IP/selenium-server/core/RemoteRunner.html?sessionId=324f251e0de64cfeafa157de0c33ed41&multiWindow=true&baseUrl=http%3A%2F%2Ffns-4%2F&debugMode=false 
```

和

```
http://>fns-IP/selenium-server/core/Blank.html?start=true 
```

5.我在网站“ca.msn.com”上试过，效果很好。

任何反馈表示赞赏。

在 'http' 中引用的所有 url 中，添加了字符 '>' 用于块引用。否则，它不允许我发帖。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:04:20.097

我之前也遇到过这个问题，但就我而言，trustAllSSLCertificates 就足够了。我建议你也转向对谷歌浏览器有很好的支持的 selenium webdriver。

# android - Android：图像不出现

> ID：12694287
> 
> 赞同：0
> 
> 时间：2012-10-02T16:21:47.070
> 
> 标签：android, imageview

我的 ImageView 有问题，我无法查看我的图像，我想让我的应用程序完美运行。所以有人可以帮助我:)

代码：

```
...
ImageView myimage = (ImageView)findViewById(R.id.imageView1);     
myimage.setImageDrawable(getResources().getDrawable(R.drawable.img01));
Thread.sleep(500);
myimage.setImageDrawable(null);
Thread.sleep(700);
Button button2 = (Button) (findViewById(R.id.button2));
button2.setEnabled(true);
... 
```

PS：对不起我的英语不好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:42:18.290

不要习惯`Thread.sleep`拖延。这将使 UI 线程休眠并挂起您的应用程序。尝试[`View.postDelayed`](http://developer.android.com/reference/android/view/View.html#postDelayed%28java.lang.Runnable,%20long%29)：

```
ImageView myimage = (ImageView)findViewById(R.id.imageView1);
myimage.setImageDrawable(getResources().getDrawable(R.drawable.img01));
myImage.postDelayed(new Runnable() {
    public void run() {
        myimage.setImageDrawable(null);
        myImage.postDelayed(new Runnable() {
            public void run() {
                Button button2 = (Button) (findViewById(R.id.button2));
                button2.setEnabled(true);
            }
        }, 700);
    }
}, 500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:25:37.603

您无法看到图像，因为您将可绘制对象设置为空。删除那行代码，它将起作用。作为建议，您不应使用 get drawable，因为该方法存在内存泄漏，因此您应该改用 setImageResource 方法

# javafx-2 - javafx - 更新在按钮单击时动态加载的 fxml 对象中的值

> ID：12694288
> 
> 赞同：2
> 
> 时间：2012-10-02T16:21:48.177
> 
> 标签：javafx-2

我正在创建一个简单的天气应用程序

这是我的问题的详细信息：-

我有一个主控制器（GeoWeatherMain.java）。当 Appl 运行时，这个类（GeoWeatherMain.class）被加载，它加载一个 fxml 文件。下面是它的代码：-

```
Parent root = FXMLLoader.load(getClass().getResource("GeoWeatherMainUI.fxml"));
Scene scene = new Scene(root);
stage.setScene(scene);
stage.show(); 
```

现在，GeoWeatherMainUI.fxml 具有 BorderPane 对象实现。它由一个按钮（在左侧窗格中）组成，该按钮在单击时会在中心窗格内加载另一个 fxml 文件。GeoWeatherMainUI.fxml 的骨架如下所示：-

```
<BorderPane fx:id="MainBody" prefHeight="736.0" prefWidth="1140.0" xmlns:fx="http://javafx.com/fxml" fx:controller="geoweather.GeoWeatherUIActionHandlers">
    .
    .
    <Button layoutX="91.0" layoutY="67.0" mnemonicParsing="false" onAction="#getCurrAndForecastWeatherCond" text="Get Weather Details" />
    .
    .
<BorderPane> 
```

现在 GeoWeatherUIActionHandlers.java 是另一个处理不同按钮动作事件的控制器。下面是它的完整代码

```
public class GeoWeatherUIActionHandlers implements Initializable{
    @FXML
    BorderPane MainBody;
    @FXML
    Label LocName;/*LocName is fx id for a label*/

    @FXML
    private void getCurrAndForecastWeatherCond(ActionEvent event){
        try{
            Pane centerPane = FXMLLoader.load(getClass().getResource("WeatherDetails.fxml"));
            MainBody.setCenter(centerPane);
            /*LocName.setText("xyz");*/
        }catch (IOException ex){
            TextArea excep = new TextArea(ex.toString());
            MainBody.setCenter(excep);
        }catch(Exception e){
            TextArea excep = new TextArea("Inside Exception : \n" + e.toString());
            MainBody.setCenter(excep);
        }
    }

    @Override
    public void initialize(URL url, ResourceBundle rb){}
} 
```

现在，如果我想用新值更新加载的 WeatherDetails.fxml 文件，该怎么做？我在上面注释的代码中尝试过。（LocName.setText（“xyz”））。但是，它不起作用（给出 NullPointerException）。

我浏览了 javafx @ docs.oracle.com 的完整文档。没运气。在这里我也没有得到答案。请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:36:50.197

如果 LocName 位于 WeatherDetails.fxml 中，则 LocName 将为空是例外行为。因为`@FXML Label LocName;`在 GeoWeatherUIActionHandlers.java 中定义，它是 GeoWeatherMainUI.fxml 的控制器。将 LocName 从 WeatherDetails 移动到 GeoWeatherMainUI FXML 文件，看看您仍然在哪里收到错误。

如果您的目标是设置 WeatherDetails.fxml 中的标签文本，请执行此工作

1.  在类似于当前 GeoWeatherUIActionHandlers 的 WeatherDetails 控制器中，或

2.  在 GeoWeatherUIActionHandlers 中，加载 WeatherDetails.fxml 后

    *   通过 id（不是 fx:id）从 centerPane 获取标签`((Label)centerPane.lookup("#myLabel")).setText("xyz")`，或者
    *   获取 WeatherDetails 的控制器并调用 getLocName().setText("xyz")。假设 getter 方法存在于控制器类中。

# jquery - Mottie jQuery Tablesorter fork 自定义排序只排序一个方向

> ID：12694291
> 
> 赞同：1
> 
> 时间：2012-10-02T16:22:11.030
> 
> 标签：jquery, parsing, sorting, fork, tablesorter

我看到另一个有同样问题的人（[jquery tablesorter ajax table 只排序一个方向](https://stackoverflow.com/questions/10825462/jquery-tablesorter-ajax-table-only-sorting-one-direction)），但这不是同一个原因。

我使用 jQuery Tablesorter 的一个分支（[https://github.com/Mottie/tablesorter](https://github.com/Mottie/tablesorter)）通过自定义解析器（法国日期/时间）使用数据属性对列进行排序：

```
<td data-since="28-09-2012 15:41:10">
    <strong>4 jours, 16 minutes</strong> (28-09-2012 15:41:10)
</td> 
```

我可以成功地对列进行升序排序，但是当我尝试再次单击列标题时，插件不会降序排序。

具有基本数据格式的其他列在两个方向上都正确排序。

这是基于文档和其他 stackoverflow 帖子的自定义解析器：

```
$(document).ready(function() {
    //https://stackoverflow.com/questions/9550354/jquery-tablesorter-plugin-secondary-hidden-sorting
    $.tablesorter.addParser({
        // set a unique id
        id: 'parseSinceColumn',
        is: function(s) {
            return /\d{1,2}-\d{1,2}-\d{1,4} \d{1,2}:\d{1,2}:\d{1,2}/.test(s);
        },
        format: function(s, table, cell, cellIndex) {
            // get data attributes from $(cell).attr('data-something');
            var cellDate = $(cell).attr('data-since');

            s = s.replace(/\-/g," ");
            s = s.replace(/:/g," ");
            s = s.split(" ");

            return new Date(s[2], s[1]-1, s[0], s[3], s[4], s[5]).getTime();
        },
        // set type, either numeric or text
        type: 'numeric'
    });
    $("#pr-table").tablesorter({
        headers : {
            3 : { sorter: 'parseSinceColumn' }
        }
    });
}); 
```

您对解决该问题的方法有任何想法吗？

非常感谢。

编辑 ：

我觉得插件确实尝试排序，但结果是一样的。

这是插件的调试：

*   第一类，成功：

按 3,1 和 dir 1 次排序（8ms）

重建表（3ms）

完成应用小部件 (0ms)

*   第二排序，排序没有变化：

在 3,0 和 dir 0 时间（7ms）上排序

重建表（3ms）

完成应用小部件 (0ms)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:04:09.933

我终于找到了解决方案。

有两个粗略的错误：

*   我告诉插件索引列 3 具有解析器“parseSinceColumn”，因此“is”函数应该返回 false。事实上，单元格的内容无法与正则表达式匹配，因为“s”不是数据属性的内容，因此插件无法检测到该列的解析器是否合适

    *   格式函数使用 's' 参数来解析日期。好的变量是 cellDate...

这是最终的功能片段：

```
$(document).ready(function() {
    //http://stackoverflow.com/questions/9550354/jquery-tablesorter-plugin-secondary-hidden-sorting
    $.tablesorter.addParser({
        // set a unique id
        id: 'parseSinceColumn',
        is: function(s) {
            return false;
        },
        format: function(s, table, cell, cellIndex) {
            var cellDate = $(cell).attr('data-since');
            // get data attributes from $(cell).attr('data-something');
            // check specific column using cellIndex
            cellDate = cellDate.replace(/\-/g," ");
            cellDate = cellDate.replace(/:/g," ");
            cellDate = cellDate.split(" ");

            return new Date(cellDate[2], cellDate[1]-1, cellDate[0], cellDate[3], cellDate[4], cellDate[5]).getTime();
        },
        // set type, either numeric or text
        type: 'numeric'
    });
    $("#pr-table").tablesorter({
        headers : {
            3 : { sorter: 'parseSinceColumn' }
        }
  });
}); 
```

# ruby-on-rails - 如果参数存在，Rails 不同的路线

> ID：12694292
> 
> 赞同：0
> 
> 时间：2012-10-02T16:22:21.960
> 
> 标签：ruby-on-rails, routes

小路由问题：

我想

*   `myapp.com/my_controller`-> 导致**控制器 A**
*   `myapp.com/my_controller?uid=123`-> 导致**控制器 B**

任何想法如何更改 routs 文件（在 rails 2.3 中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:17:21.310

**导轨 2.3.1：**

```
map.route_a 'my_controller', :controller => "A", :action => "a"
map.route_b 'my_controller/uid/:uid', :controller => "B", :action => "b" 
```

您应该获取`route_a_url`和`route_b_url(:uid => uid)`帮助方法来生成 url。它不完全是查询参数，而是它的使用`uid`和值。

**导轨 3.2.1：**

```
match 'my_controller' => 'A#a', :as => 'route_a'
match 'my_controller/uid/:uid' => 'B#b', :as => 'route_b' 
```

`route_a_url`并且辅助功能`route_b_url(:uid=>10)`很容易获得。

**解释：**

* * *

在您看来，使用辅助函数来生成 url

**辅助函数：** `route_a_url()`
**生成的 URL：** `http://localhost:3000/my_controller`
**映射到：** `Controller A, Action a`

**辅助函数：** `route_b_url(:uid => 10))`
**生成的 URL：** `http://localhost:3000/my_controller/uid/10`
**映射到：** `Controller B, Action b`

# javascript - 使用格式化日期填充文本框

> ID：12694293
> 
> 赞同：0
> 
> 时间：2012-10-02T16:22:25.167
> 
> 标签：javascript, jquery, telerik

我有两个日期选择器字段（telerik，不是 jquery UI），还有一个单选按钮列表，其中包含周、月、年等按钮。

用户可以使用两个日期选择器选择一个日期范围，或者，他们可以单击其中一个单选按钮，并且应根据他们的选择填充字段。

所以如果用户选择星期，结束日期应该是今天，开始日期应该是 7 天前。

我目前拥有的是这样的：

```
 $(function () {
        $("#dateRange_week").click(function () {
            var now = new Date();
            var startDate = now;
            $("#StartDate").val(startDate);
            $("#EndDate").val(now);
        });
    }); 
```

目前 jQuery 插入的日期是格式如下的字符串

```
Tue Oct 02 2012 12:08:01 GMT-0400 (Eastern Daylight Time) 
```

*   如何将 startDate 计算为现在 - 7 天？
*   如何将日期格式化为 mm/dd/yyyy？

编辑***_* _ _**

修复：按照下面接受的答案使用 Date.js，jQuery 变为

```
 $("#dateRange_week").click(function () {
            var startDate = (7).days().ago();
            var start = startDate.toString("M/d/yyyy");
            var endDate = new Date();
            var end = endDate.toString("M/d/yyyy");
            $("#StartDate").val(start);
            $("#EndDate").val(end);
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:44:40.477

很遗憾，但是 JS 没有很好的日期时间操作能力。
好消息 - 你可以为此使用一些插件。
例如：

*   [Moment - 来自 SO 用户](http://momentjs.com/docs/)[timrwood](https://stackoverflow.com/users/272034/timrwood)的非常好的插件
*   [date.js](http://www.datejs.com/) - 另一个很好的日期和时间操作插件

它们（和许多其他）都具有添加/减去日期和日期格式的功能。以及许多其他有用的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:25:50.330

这是格式化 jQuery 日期的良好开端[jQuery 日期格式化](https://stackoverflow.com/questions/5250244/jquery-date-formatting)

这可能有助于减去天 [数从日期中添加/减去天数不会正确更改年/月](https://stackoverflow.com/questions/4320019/adding-subtracting-days-from-a-date-doesnt-change-the-year-month-correctly)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:27:24.630

尝试类似：

```
DateTime dtNow = DateTime.Now;
DateTime dtBegin = DateTime.MinValue;
DateTime dtEnd = DateTime.MinValue;
dtBegin = dtNow.AddDays(1 - Convert.ToDouble(dtNow.DayOfWeek));
dtEnd = dtNow.AddDays(7 - Convert.ToDouble(dtNow.DayOfWeek)); 
```

要格式化 mm/DD/yyyy，请使用 .ToShortDateString()

# azure-virtual-machine - 如何在 Azure 上为虚拟机创建子域

> ID：12694294
> 
> 赞同：3
> 
> 时间：2012-10-02T16:22:26.757
> 
> 标签：azure-virtual-machine

我在 myvmname.cloudapp.net 上有虚拟机。我想要的是为这个 subdomain.myvmname.cloudapp.net 创建子域。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-08T14:55:39.147

好吧，无论如何，最好的选择是转到您的域实体，并创建一个 CNAME 指向 yourname.cloudapp.net，然后在该 VM 上将子域路由到一个文件夹.. 就这么简单。所以你可以配置： subdomain.youdomain.com 到 yourname.cloudapp.net 然后在内部路由到你想要的文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T05:55:47.143

抱歉，目前不允许使用 x.cloudapp.net 上的子域。

# r - 统计效率低下（块平均）

> ID：12694295
> 
> 赞同：3
> 
> 时间：2012-10-02T16:22:32.530
> 
> 标签：r, statistics

我有一系列数据，这些数据是通过分子动力学模拟得到的，因此在时间上是连续的，并且具有一定的相关性。我可以将平均值计算为数据的平均值，我想估计与以这种方式计算的平均值相关的误差。

根据[这本书](http://books.google.es/books?id=kB7jsbV-uhkC&pg=PA345&lpg=PA345)，我需要计算“统计效率低下”，或者大致是系列中数据的相关时间。为此，我必须将系列划分为不同长度的块，并且对于每个块长度 (t_b)，块平均值的方差 (v_b)。那么，如果整个序列的方差为v_a（即t_b=1时的v_b），我必须得到（t_b*v_b/v_a）的极限，因为t_b趋于无穷大，这就是低效率s .

那么均值的误差是 sqrt(v_a*s/N)，其中 N 是点的总数。因此，这意味着每 s 个点中只有一个是不相关的。

我认为这可以用 R 完成，也许已经有一些包可以做到，但我是 R 新手。谁能告诉我该怎么做？我已经了解了如何读取数据系列并计算均值和方差。

数据样本，根据要求：

```
# t(ps) dH/dl(kJ/mol)
0.0000 582.228
0.0100 564.735
0.0200 569.055
0.0300 549.917
0.0400 546.697
0.0500 548.909
0.0600 567.297
0.0700 638.917
0.0800 707.283
0.0900 703.356
0.1000 685.474
0.1100 678.07
0.1200 687.718
0.1300 656.729
0.1400 628.763
0.1500 660.771
0.1600 663.446
0.1700 637.967
0.1800 615.503
0.1900 605.887
0.2000 618.627
0.2100 587.309
0.2200 458.355
0.2300 459.002
0.2400 577.784
0.2500 545.657
0.2600 478.857
0.2700 533.303
0.2800 576.064
0.2900 558.402
0.3000 548.072 
```

...这种情况一直持续到 500 ps。当然，我需要分析的数据是第二列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:21:25.180

假设`x`正在保存数据序列（例如，第二列中的数据）。

```
v = var(x)
m = mean(x)
n = length(x)

si = c()
for (t in seq(2, 1000)) {
    nblocks = floor(n/t)
    xg = split(x[1:(nblocks*t)], factor(rep(1:nblocks, rep(t, nblocks))))
    v2 = sum((sapply(xg, mean) - m)**2)/nblocks
    #v rather than v1
    si = c(si, t*v2/v)
}
plot(si) 
```

下图是我从一些时间序列数据中得到的。`si`当曲线变得近似平坦（斜率 = 0）时，您就有了 t_b 的下限。另见[http://dx.doi.org/10.1063/1.1638996](http://dx.doi.org/10.1063/1.1638996)。

![时间序列的统计效率低下](../Images/b9f8171ad3ba1955955dc70939e0470a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-23T09:03:21.397

有几种不同的方法可以计算统计效率低下或积分自相关时间。在 R 中，最简单的方法是使用 CODA 包。它们有一个函数 ，`effectiveSize`它为您提供有效样本量，即样本总数除以统计无效率。均值标准差的渐近估计量是`sd(x)/sqrt(effectiveSize(x))`。

```
require('coda')
n_eff = effectiveSize(x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-29T09:09:27.163

好吧，提出问题永远不会太晚，不是吗？当我自己做一些分子模拟时，我确实解决了这个问题，但还没有看到这个线程。我发现 Allen & Tildesley 实际提出的方法与现代错误分析方法相比似乎有些过时。本书的其余部分足够好，值得一看。

虽然 Sunhwan Jo 对块平均方法的回答是正确的，但关于错误分析，您可以在此处找到其他方法，例如 jacknife 和 bootstrap 方法（彼此密切相关）：[http ://www.helsinki.fi/~rummukai/lectures/montecarlo_oulu /讲座/mc_notes5.pdf](http://www.helsinki.fi/~rummukai/lectures/montecarlo_oulu/lectures/mc_notes5.pdf)

简而言之，使用 bootstrap 方法，您可以从数据中制作一系列随机人工样本，并在新样本上计算您想要的值。我写了一小段 Python 代码来处理一些数据（不要忘记导入 numpy 或我使用的函数）：

```
def Bootstrap(data):
    B  = 100 # arbitraty number of artificial samplings
    es = 0.
    means = numpy.zeros(B)
    sizeB = data.shape[0]/4 # (assuming you pass a numpy array)
                            # arbitrary bin-size proportional to the one of your
                            # sampling.
    for n in range(B):
        for i in range(sizeB):
        # if data is multi-column array you may have to add the one you use
        # specifically in randint, else it will give you a one dimension array.
        # Check the doc.
            means[n] = means[n] + data[numpy.random.randint(0,high=data.shape[0])] # Assuming your desired value is the mean of the values
                                             # Any calculation is ok.
            means[n] = means[n]/sizeB
    es = numpy.std(means,ddof = 1)
    return es 
```

我知道它可以升级，但这是第一次尝试。使用您的数据，我得到以下信息：

```
Mean              =  594.84368
Std               =   66.48475
Statistical error =    9.99105 
```

我希望这可以帮助任何在数据统计分析中遇到这个问题的人。如果我错了或其他任何事情（第一篇文章，我不是数学家），欢迎任何更正。

# android - 声明样式有什么意义？

> ID：12694297
> 
> 赞同：8
> 
> 时间：2012-10-02T16:22:37.740
> 
> 标签：android, attr, android-custom-view, android-resources, declare-styleable

假设我正在制作一些带有样式属性的新视图。我因此声明它们（这就是[文档所说的这样做](http://developer.android.com/training/custom-views/create-view.html#customattr)：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <declare-styleable name="TriangleView">
        <attr name="direction">
            <enum name="NE" value="0" />
            <enum name="NW" value="1" />
            <enum name="SW" value="2" />
            <enum name="SE" value="3" />
        </attr>
    </declare-styleable>

    <declare-styleable name="BannerView">
        <attr name="direction">
            <enum name="NE" value="0" />
            <enum name="NW" value="1" />
            <enum name="SW" value="2" />
            <enum name="SE" value="3" />
        </attr>
        <attr name="thickness" format="dimension" />
    </declare-styleable>
</resources> 
```

但是，这不起作用，因为所有属性显然都在同一个命名空间中，并且我得到了错误`Error: Attribute "direction" has already been defined`。

所以显然我必须将明显重复的属性移到这样的外部`<declare-styleable>`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <attr name="direction">
        <enum name="NE" value="0" />
        <enum name="NW" value="1" />
        <enum name="SW" value="2" />
        <enum name="SE" value="3" />
    </attr>

    <declare-styleable name="BannerView">
        <attr name="thickness" format="dimension" />
    </declare-styleable>
</resources> 
```

但这提出了两个问题：

1.  如果这行得通，那到底有什么意义`<declare-styleable>`？
2.  如果我希望属性在不同视图中表现不同怎么办？例如 if`BannerView`的方向只能是`up`or `down`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-20T23:41:40.183

> 究竟有什么意义`<declare-styleable>`？

`<declare-stylable>`标签允许您为自定义视图声明属性，然后您可以在 xml 中为这些视图设置这些属性。使用该属性实际上有 3 个部分：

1.  声明标签的`<attr>`内部。`<declare-stylable>`
2.  在您的 xml 布局中定义一个自定义命名空间，指向您的应用程序包名称（例如`app`）。在布局中使用自定义属性（例如`app:direction="NW"`）。
3.  在您的自定义视图中，使用参数覆盖构造`AttributeSet`函数，获取 a`TypedArray`并从中读取自定义属性（如果有），然后在构造函数中告诉视图如何正确使用这些属性。

> 如果我希望属性在不同视图中表现不同怎么办？例如，如果 BannerView 的方向只能向上或向下。

尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <attr name="direction">
        <enum name="NE" value="0" />
        <enum name="NW" value="1" />
        <enum name="SW" value="2" />
        <enum name="SE" value="3" />
    </attr>

    <declare-styleable name="TriangleView">
        <attr name="direction" />
    </declare-styleable>

    <declare-styleable name="BannerView">
        <attr name="direction" />
        <attr name="thickness" format="dimension" />
    </declare-styleable>
</resources> 
```

当您为`TriangleView`or构建 xml 布局时`BannerView`，您可以同时使用该`app:direction="NW"`示例。在带有`AttributeSet`in`TriangleView`或的构造函数中`BannerView`，属性将具有与原始格式相同的格式，但您***对该***值的处理取决于您在每个视图中对构造函数的实现（两者可以相同或不同）。

如果您希望为不同的视图***定义***不同的属性（即不同的“格式”或“枚举”），那么您必须创建具有不同名称的不同属性。

# sql - 使用顺序值更新列

> ID：12694298
> 
> 赞同：0
> 
> 时间：2012-10-02T16:22:42.843
> 
> 标签：sql, oracle10g

嗨，伙计们，我有一个包含多列和多行的表，我的第一列 B2kID 是空白的，我需要它更新值，例如：

```
VC1
VC2
VC3
VC4
 .
 . 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:27:04.040

您可以使用`ROWNUM`获取记录的唯一编号：

```
UPDATE tableName
SET columnName = 'VC' || ROWNUM
WHERE columnName IS NULL
; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T16:30:01.310

您可以使用[`rownum`伪列为](http://docs.oracle.com/cd/B19306_01/server.102/b14200/pseudocolumns009.htm)每个受影响的行获取唯一标识符，并在常规句子中将其与[`||`连接运算符一起使用：](http://docs.oracle.com/cd/B19306_01/server.102/b14200/operators003.htm)`UPDATE`

```
UPDATE myTable SET B2kID = 'VC' || rownum; 
```

这是一个示例[SQLFiddle](http://sqlfiddle.com/#!4/74596/1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:31:38.453

以下链接中提供的 PL/SQL 块可能很有用。 [http://searchoracle.techtarget.com/answer/Creating-a-sequence-for-a-varchar-in-PL/SQL](http://searchoracle.techtarget.com/answer/Creating-a-sequence-for-a-varchar-in-PL/SQL)

# collections - 闭包的集合。不同的调用方法。

> ID：12694300
> 
> 赞同：2
> 
> 时间：2012-10-02T16:22:52.693
> 
> 标签：collections, groovy, closures

在工作中，我们正在讨论一个简单（或不那么简单）的问题。¿ 以下调用方法之间有什么区别吗？

```
class Obj {
    def num
    def prtn = {
        print this.num
    }
}  
def listObj = [new Obj(num:1), new Obj(num:2), new Obj(num:3), new Obj(num:4)]  
// End Common code  

// Method #1  
def lst = listObj.collect{ obj-> obj.prtn() }  

// Method #2  
def lst = listObj.collect{ obj-> { -> obj.prtn()} }.each{ it() }  
// Common code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:45:59.223

两个语句的副作用是相同的：它们打印“1234”。但返回值不同。

该`prtn`方法总是返回`null`，所以 的`listObj.collect{ obj-> obj.prtn() }`值为`[null, null, null, null]`。

在 的情况下`listObj.collect{ obj-> { -> obj.prtn()} }.each{ it() }`， as[`each`](http://groovy.codehaus.org/groovy-jdk/java/lang/Object.html#each%28groovy.lang.Closure%29)返回调用它的集合，结果将是 Closure 对象的列表（因为这就是`listObj.collect{ obj-> { -> obj.prtn()} }`返回的内容）。

一般来说，如果您只想迭代一个集合以获得一些副作用，请使用`each`; 如果要将其转换为不同的集合，请使用`collect`. 并尽量不要混合副作用迭代和转换:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:28:34.413

你也可以这样做：

```
listObj*.prtn() 
```

这给出了与您的方法＃1相同的结果

# c++ - 使用 C++ 上传草图

> ID：12694302
> 
> 赞同：2
> 
> 时间：2012-10-02T16:22:54.450
> 
> 标签：c++, arduino

我想用 Arduino IDE 编译[草图](http://www.arduino.cc/en/Tutorial/Sketch)，然后找到 bin 文件并使用另一个程序上传它。

如何为 Arduino 设计自定义上传器（规格等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:41:33.737

您已经可以使用`avrdude`. 如果您绝对不需要开发另一个程序，请尝试使用它。

如果您绝对必须实现自己的程序员，请查看 stk500 协议。

*   可通过[此论坛帖子获得大量信息](http://arduino.cc/forum/index.php/topic,36774.0.html)
*   直接链接到规格：
    *   [http://www.atmel.com/Images/doc2525.pdf](http://www.atmel.com/Images/doc2525.pdf)

**示例用法：**

```
/usr/local/bin/avrdude -V -F -C /etc/avrdude.conf -p atmega328p -P /dev/ttyACM0 
    -c stk500v1 -b 57600 -U flash:w:applet/helloworld.hex 
```

**多平台教程：**

*   [http://www.ladyada.net/learn/avr/avrdude.html](http://www.ladyada.net/learn/avr/avrdude.html)

**这是一个依赖于 avrdude 的类似程序（用 c# 编写）：**

*   [http://arduino.cc/playground/Code/ArduinoUpload](http://arduino.cc/playground/Code/ArduinoUpload)

**命令行示例：**

*   [http://www.neuraladvance.com/2010/04/08/using-avrdude-with-the-arduino-duemilanove/](http://www.neuraladvance.com/2010/04/08/using-avrdude-with-the-arduino-duemilanove/)

> 以下是用于将程序上传到 Arduino Duemilanove（带有 ATmega168 芯片）的命令。
> 
> `avrdude -c arduino -p m168 -P usb -U flash:w:FILENAME`
> 
> 将 FILENAME 替换为您希望上传到开发板的十六进制文件。这假设您要将文件写入闪存。您当然可以根据您的芯片验证或读取内存的不同部分，但我会让您从 AVRdude 手册中弄清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:26:32.680

您需要开发一些可以说 Arduino 引导加载程序协议的东西。我建议查阅[http://arduino.cc](http://arduino.cc)上的 Arduino 文档和代码以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:31:58.937

查看 makefile - 将二进制文件上传到 Arduino 有一个单独的任务。通过这种方式，您将找到执行此操作的工具和参数（我不记得从头顶开始），并且您将能够手动（使用该工具）而不是从 IDE 执行此操作。编写这样的工具似乎正在重新发明 wjeel。

# wordpress - 移动 Wordpress 网站，不能再以管理员身份登录

> ID：12694307
> 
> 赞同：0
> 
> 时间：2012-10-02T16:23:20.967
> 
> 标签：wordpress, login, admin

我已经将我的本地 wp 副本移动到我的生产站点，并且在移动 WP 时做了所有你必须做的烦人的事情。

我现在唯一的问题是我无法再以管理员身份登录我的 WP。用户已登录，但显然没有管理员权限。

我已经检查了该用户的序列化权限数组，它似乎是正确的，但我的用户仍然没有被识别为管理员类型的用户。

任何想法这个问题的原因可能是什么？

编辑：已解决，请参阅我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:43:35.320

确保您将数据库完全迁移到新位置，如果管理员缺少其角色的权限，请在数据库表中手动编辑它们`wp_usermeta`，字段`wp_user_level`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:45:46.377

解决了这个问题：

我在文档中没有看到 WP 显然将 db 前缀用于它的表 wp2_usermeta 及其 meta_key 字段。

所以不知何故，我最终得到了 wp2_capabilities 和 wp_capabilities。wp2_ 是错误的。它没有正确迁移或更改它。

如果 wordpress 能够通过回滚和更改日志进行单元测试和适当的迁移......

# .net - 从 Windows .net 应用程序访问基于 Web 的 mysql 数据库/服务器

> ID：12694309
> 
> 赞同：0
> 
> 时间：2012-10-02T16:23:49.533
> 
> 标签：.net, mysql, web

我想连接我保存在我网站上的 mySql 服务器的数据库。我尝试使用提供的信息来连接它以制作动态网站。例如，我的网站的 MySQL 服务器是；

> examplebiz1.ipagemysql.com;Uid='user';Pwd='pass'

但我正处于异常之下；**

> 无法连接到任何指定的 MYSQL 主机。

**

可能吗？如果是，那么我想知道如何？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:33:43.917

我一般用web.config文件中的连接，不知道你是怎么用的，完整的句子应该是

```
 <configuration>
   <connectionStrings>
    <add name="DataConnectionString" connectionString="server=XXX.XXX.XXX.XXX;User Id=XXX;password=XXXX;Persist Security Info=True;database=XXXXX" providerName="MySql.Data.MySqlClient"/>
   </connectionStrings>
 </configuration 
```

如果您使用 web.config 作为系统配置的存储，这应该可以解决它

编辑：请记住，您需要在您的机器上安装一个 MySql 连接器 dll 进行测试，并在您网站的 bin 文件夹中

# ios - iOS 6 (iPhone/iPad) 使用 NTLM/Windows 身份验证的图像上传“请求正文流已用尽”

> ID：12694310
> 
> 赞同：7
> 
> 时间：2012-10-02T16:23:52.640
> 
> 标签：ios, xmlhttprequest, ios-simulator, ios6, xmlhttprequest-level2

我正在尝试让 iOS 6 使用 XMLHttpRequest POST 上传图像。这适用于桌面和 Android 网络浏览器，但在 iOS 6 上，我在发布到的页面上收到错误：“请求正文流已用尽”。（使用带有 Safari Web Inspector 的 iOS 模拟器）。

这是页面的基本代码：

```
function fileSelected() {
    var file = document.getElementById('fileToUpload').files[0];
    if (file) {
        var fileSize = 0;
        if (file.size > 1024 * 1024)
            fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
        else
            fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';
        document.getElementById('fileName').innerHTML = 'Name: ' + file.name;
        document.getElementById('fileSize').innerHTML = 'Size: ' + fileSize;
        document.getElementById('fileType').innerHTML = 'Type: ' + file.type;
    }
}
function uploadFile() {
    var fd = new FormData();
    fd.append("fileToUpload", document.getElementById('fileToUpload').files[0]);
    var xhr = new XMLHttpRequest();
    xhr.upload.addEventListener("progress", uploadProgress, false);
    xhr.addEventListener("load", uploadComplete, false);
    xhr.addEventListener("error", uploadFailed, false);
    xhr.addEventListener("abort", uploadCanceled, false);
    xhr.open("POST", "/UploadHandler.ashx");
    xhr.send(fd);
}
function uploadProgress(evt) {
    if (evt.lengthComputable) {
        var percentComplete = Math.round(evt.loaded * 100 / evt.total);
        document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';
        document.getElementById('prog').value = percentComplete;
    }
    else {
        document.getElementById('progressNumber').innerHTML = 'unable to compute';
    }
}
function uploadComplete(evt) {
    /* This event is raised when the server send back a response */
    alert(evt.target.responseText);
}
function uploadFailed(evt) {
    alert("There was an error attempting to upload the file.");
}
function uploadCanceled(evt) {
    alert("The upload has been canceled by the user or the browser dropped the connection.");
} 
```

在任何其他浏览器上执行此操作时，处理程序会正确返回并上传文件。但是，对于 iOS，ashx 页面出现错误“请求正文流已用尽”。

这是检查器的屏幕截图：

![Request Body Stream Exhausted](../Images/75229a64728b158925a43884c3b4ed4a.png)

有任何想法吗？

**UPDATE:** This issue only occurs when NTLM/Windows authentication is enabled for the application in IIS. With forms or anonymous authentication, the upload works fine.

Thanks,

John

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T18:25:18.610

In iOS 6, Safari sends the file with the initial post, including the file. That means the file stream is at the end, or "exhausted."

However, with NTLM, it will get a 401 challenge in response, and then have to resend the post with the authentication information. Since it does not reset the file stream, it is unable to send the file again with the second post. You can see this in the IIS logs.

As far as I know, there is no particularly good way around it. I am changing my mobile app, so that it uses form authentication. I direct the mobile app to a separate login app on the same server, which is set to use Windows Authentication. The login app can then redirect back to the main app with a form authentication cookie, and all is well again.

You have to set the machine key on both apps in the web.config file, so that both are using the same keys for encryption and validation.

The code on the login app is as simple as

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) _ 
Handles Me.Load
    With HttpContext.Current.User.Identity
        If .IsAuthenticated Then
            Dim sUser As String = .Name.ToLower.Trim
            FormsAuthentication.RedirectFromLoginPage(s, False)
        End If
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T06:52:14.060

I solved the issue by not setting the self-defined HTTP Authenticate Head on iOS 7 and iOS 8\. (At first, our service use the self-defined value for the Authenticate Head). And after the challenge being handled by the delegate, the request will have the "Authenticate: NTLMxxx automatically" header automatically. And the Put and POST works again.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-23T06:31:10.343

This error Comes on IOS but you can use different approach like change your code line in formdata where you appending the file

```
var fd = new FormData();

fd.append("fileToUpload", document.getElementById('fileToUpload').files[0]); 
```

to the below line basically don't append the file control but use the base64 image data

```
var reader = new FileReader();

reader.readAsDataURL(opmlFile.files[0]);

reader.onload = function () {

    var base64DataImg = reader.result;            

    base64DataImg = base64DataImg.replace('data:'imagetype';base64,', '');      

} 
```

# android - Android - 灰色背景而不是白色

> ID：12694312
> 
> 赞同：3
> 
> 时间：2012-10-02T16:24:03.523
> 
> 标签：android, android-manifest

每个“布局”我设置一个白色背景和“清单”我设置 Theme.Light。仍然接收灰色背景而不是白色。为什么？

**编辑：**

清单.xml

```
android:theme="@android:style/Theme.Light.NoTitleBar"> 
```

布局

```
android:background="@android:color/white" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:20:34.087

Theme.Light 并不意味着它将是白色的。这只是意味着它将是浅色的，而不是深色的：P 这不是 theme.white。

每个设备制造商都可以在他的手机上自定义 Android 操作系统，例如偏好颜色和外观。特别是，他可以为他的 Android 实现定义样式 - 浅色和深色。由于您的应用程序在各种设备上的外观可能有所不同，但它始终适合此设备上使用的样式（样式 Theme.Light 中的每个应用程序在此设备上都将具有灰色背景，除非您设置 android:background="@android:白颜色” ）

您的设备制造商将样式 Theme.Light 定义为带有灰色背景的样式。

希望我很清楚-否则请不要犹豫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:04:12.213

`@android:color/white`在更改为 explicit之前，我遇到了同样的问题`android:background="#FFFFFF"`。虽然很奇怪...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-09T00:46:36.807

由于这是一个老问题，这可能已经有另一种解决方案，但无论如何都可以在 styles.xml 中输入 AppTheme 样式标签，您可以通过按 ⌘cmd 键并单击清单中的主题声明来做到这一点。

在那里用你喜欢的颜色添加这条线 -

```
<item name="android:windowBackground">@color/white</item> 
```

这一行基本上覆盖了主题的默认背景值。

例子 -

```
<!-- Base application theme. -->
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
    <!-- Customize your theme here. -->
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
    <item name="android:colorControlActivated">@color/black</item>
    <item name="android:windowBackground">@color/white</item>
</style> 
```

# c# - WFA 窗口在前面

> ID：12694313
> 
> 赞同：0
> 
> 时间：2012-10-02T16:24:10.710
> 
> 标签：c#, wpf, event-handling, topmost

我得到了一个带有 TreeView 的 WFA，`MouseDoubleClick`并向 treeviewItem 添加了一个事件。在代码中，事件处理程序会打开一个新窗口。

当我尝试这个和`doubleClick`TreeViewItem 时，它会打开窗口，但它不会停留在前面（它移动到 TreeView 所在的页面后面）

我尝试在事件处理程序中添加一个`Topmost = true`，但这不起作用。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:27:05.523

您可以尝试使用`Owner property`以设置焦点

```
var newWindow = new NewWindow();
newWindow.Owner = this;
newWindow.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:27:28.127

尝试将子窗口的所有者设置为主窗口 -

```
Window childWindow = new Window();
childWindow.Owner = mainWindow; 
```

如果这不能解决问题，请发布一些我们可以查看的代码。

# php - 使用php发送邮件

> ID：12694315
> 
> 赞同：0
> 
> 时间：2012-10-02T16:24:16.957
> 
> 标签：php, smtp

我在这里看到了类似的问题，但是我无法解决我的问题。我正在尝试使用 php 发送邮件...但这不起作用。

```
<?php
$email_from="admin@crorebook.com";
ini_set("sendmail_from", $email_from);
$headers = "From: $email_from";
mail('gitudrebel94@gmail.com','Registration confirmation','Hihihihihihih','$headers');
?> 
```

它在 Windows 服务器上给了我以下错误：“SMTP 服务器响应：550 No such user here in”

并在 nginx 服务器上出现以下错误：

“服务器遇到内部错误或配置错误，无法完成您的请求。

请联系服务器管理员、网站管理员并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。

服务器错误日志中可能提供有关此错误的更多信息。

此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:37:25.830

你有你的外发邮件服务器设置吗？如果您在 Windows 中运行，则需要`SMTP`服务器，如果需要 linux，则需要`sendmail`或类似的配置并在本地运行。

SMTP 错误消息表明它**不是**一个开放的转发器——因为它不会让任何人要求它向其他人/其他地方发送电子邮件......这很好，因为垃圾邮件发送者会使用它。它可能需要某种身份验证（您的用户名/密码），然后才能将电子邮件发送给机器本地以外的任何人（如机器上托管的域的电子邮件地址）。

不幸的是，PHP`mail()`方法不能处理这个问题，因此您需要查看第三方包 - [PEAR mail](http://pear.php.net/package/Mail)或[PHPMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)是不错的选择。

**使用 PHPMailer 完成任务：**

```
require_once /*lib location*/"phpmailer/class.phpmailer.php";
require_once /*lib location*/"phpmailer/class.smtp.php";

$mail=new PHPMailer();
$mail->IsSMTP();
$mail->Host=/*Your host*/;
$mail->Port=465;//For SSL - use this if you can
$mail->SMTPAuth=true;
$mail->SMTPSecure="ssl";
$mail->SMTPDebug=2;//Comment once it works, but the debug info is invaluable
$mail->Username=/*Your username*/;
$mail->Password=/*Your password*/;
$mail->setFrom("admin@crorebook.com");
$mail->Subject='Registration confirmation';
$mail->Body='Hihihihihihih';
$mail->AddAddress('gitudrebel94@gmail.com');
$mail->Send(); 
```

# wso2esb - WSO2 ESB 存储和转发处理器不遵守端点消息格式

> ID：12694316
> 
> 赞同：0
> 
> 时间：2012-10-02T16:24:21.000
> 
> 标签：wso2esb

我们一直在测试 wso2 esb 上的消息处理器和队列。我们一直在非常成功地使用采样处理器将数据记录到数据库中。这个 POX 端到端。采样处理器正确地将消息出列并将其发送到端点。端点被定义为 POX 和非分块，这一切都很好。

我们决定尝试存储转发处理器，因为我们想测试有保证的交付机制。所以我们创建了一个新的处理器并将其定义为存储和转发。在存储消息的主序列中，我们在存储消息之前添加了 target.endpoint 属性。该属性设置为采样场景中使用的同一端点。

但是 - 发现在这种模式下，消息转换不会正确发生。内容类型设置为 text/html 并且输出是分块的。这会导致我们的服务返回 415 错误。

我们已经尝试将 messageType、contentType 等添加到多个位置、轴 http 发送方传输等，但似乎根本没有区别。

对此的任何指导将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:22:55.300

下面的 JS 代码只是将 messageID 插入到调用者的返回负载中。将其与仅发送到同一端点的采样处理器和序列一起使用可以正常工作。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <definitions xmlns="http://ws.apache.org/ns/synapse">
        <registry provider="org.wso2.carbon.mediation.registry.WSO2Registry">
            <parameter name="cachableDuration">15000</parameter>
        </registry>

        <endpoint name="test_e">
            <address uri="http://192.168.45.168:8080/cgi-bin/esbcgi.pl" format="pox"/>
            <property name="DISABLE_CHUNKING" value="true" scope="axis2"/>
        </endpoint>

        <sequence name="fault" trace="enable">
            <log level="full">
                <property name="MESSAGE" value="Executing default 'fault' sequence"/>
                <property name="ERROR_CODE" expression="get-property('ERROR_CODE')"/>
                <property name="ERROR_MESSAGE" expression="get-property('ERROR_MESSAGE')"/>
            </log>
            <drop/>
        </sequence>

        <sequence name="main" onError="fault" trace="enable">
            <in>
                <log level="full"/>
                <property name="OUT_ONLY" value="true"/>
                <property name="FORCE_HTTP_1.0" value="true" scope="axis2"/>
                <script language="js">
                var message = mc.getMessageID(); 
                var messageId = message.substring(9,45); 
                var payload = mc.getPayloadXML().*; 
                mc.setPayloadXML(                                                                                                                                                               
                &lt;payload&gt;                                                                                                                                                          &lt;messageId&gt;{messageId}&lt;/messageId&gt;{payload}                                                                                                                  
                &lt;/payload&gt;);
                </script>

                <switch xmlns:ns="http://org.apache.synapse/xsd" xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:ns3="http://org.apache.synapse/xsd" source="get-property('To')">

                    <case regex=".*/TEST/.*">
                        <property name="target.endpoint" value="test_e" scope="default"/>
                        <store messageStore="TEST"/>
                    </case>
                    <default/>
                </switch>

                <property name="OUT_ONLY" value="false"/>
                <script language="js">var serviceMessageId = mc.getMessageID();
                mc.setPayloadXML(                                                                                                                                                        
                   &lt;tag xmlns="http://tagcmd.com"&gt;        
                   &lt;messageId&gt;{serviceMessageId}&lt;/messageId&gt;                                                                                                                 &lt;/tag&gt;);
                </script>

                <send>
                    <endpoint key="MessageService"/>
                </send>
            </in>

            <out>
                <script language="js">
                var messagePayload= mc.getPayloadXML().*.*;         
                mc.setPayloadXML(                                                                                                                                                        
                &lt;eventResponse&gt;                                                                                                                                                    &lt;messageId&gt;{messagePayload}&lt;/messageId&gt;                                                                                                                      &lt;/eventResponse&gt;);
                </script>
                <send/>
            </out>

            <description>The main sequence for the message mediation</description>
        </sequence>

        <messageStore class="org.wso2.carbon.message.store.persistence.jms.JMSMessageStore" name="TEST">
            <parameter name="java.naming.factory.initial">org.apache.qpid.jndi.PropertiesFileInitialContextFactory</parameter>
            <parameter name="java.naming.provider.url">repository/conf/jndi.properties</parameter>
            <parameter name="store.jms.destination">APP8</parameter>
        </messageStore>

        <messageProcessor class="org.apache.synapse.message.processors.forward.ScheduledMessageForwardingProcessor" name="test_p2" messageStore="TEST">
            <parameter name="max.deliver.attempts">1</parameter>
        </messageProcessor>

    </definitions> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:02:36.750

在发送到端点之前，在序列中定义以下属性

```
<property name="DISABLE_CHUNKING" value="true" scope="axis2"/> 
```

# excel - 如何通过多个字符解析一列？

> ID：12694321
> 
> 赞同：1
> 
> 时间：2012-10-02T16:24:49.517
> 
> 标签：excel

我想提取在最后一个时期两侧找到的最后两个文本术语，但我不确定如何轻松地将其从我的 excel 表中解析出来。如果我能找到一个公式来从右边开始找到第二个周期的所有内容，那就太好了——但我还没有找到任何方法来做到这一点。如果有更多Excel经验的人可以提供帮助，我将不胜感激！

*   我所拥有的示例：（x 20000 条记录）

104.526.737.me.com

102.sub-62649-42.httm.com

26.4.326.sub-ip-static.something.net

*   我要从中得到：（对于所有记录）

我的.com

httm.com

某事网

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:34:04.440

基于[如何在不使用 VBA 的情况下在 Excel 中执行反向字符串搜索的答案？](https://stackoverflow.com/questions/350264/how-can-i-perform-a-reverse-string-search-in-excel-without-using-vba)，我修改了公式以替换句点而不是空格，并在第二行添加**-1 。**

```
=RIGHT(A1,LEN(A1)-FIND("|",SUBSTITUTE(A1,".","|",
 LEN(A1)-LEN(SUBSTITUTE(A1,".","")) - 1))) 
```

只需复制并粘贴您需要的每一行。

# xamarin - Problems running MWC application for WP7

> ID：12694327
> 
> 赞同：4
> 
> 时间：2012-10-02T16:25:03.637
> 
> 标签：xamarin

I started with Xamarin just a couple weeks ago and downloaded the sample applications from the official site and start looking for some cross-platform examples, especially in the database field. But I can´t get the MWC application to work on WP7 (VS2010). It shows me the following errors:

```
The best overloaded method match for 'Community.CsharpSqlite.Sqlite3.sqlite3_open(string, ref Community.CsharpSqlite.Sqlite3.sqlite3)' has some invalid arguments   
File: SQLite.cs 
Line: 2497  
Project:MWC.Core.WP7

```

```
The best overloaded method match for 'Community.CsharpSqlite.Sqlite3.sqlite3_open_v2(string, ref Community.CsharpSqlite.Sqlite3.sqlite3, int, string)' has some invalid arguments
File:    SQLite.cs  
Line:    2502
Project: MWC.Core.WP7

```

Among others...

我已经安装了 Xamarin 试用版和 Windows Phone SDK。我在这里错过了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T15:04:08.377

也许您需要来自[SqlLite.net 项目网站的最新代码。](https://github.com/praeclarum/sqlite-net)?

# html - css3 内容溢出的页面转换

> ID：12694329
> 
> 赞同：1
> 
> 时间：2012-10-02T16:25:09.670
> 
> 标签：html, css, transition

我正在尝试使用 CSS3 实现页面转换。我已经实现了这一点，但出于某种奇怪的原因，[主](http://engineer.org.in/events/chem-events/the_portal.php#home)面板中的内容也出现在其他所有面板上。它的溢出。我怎样才能解决这个问题？这是[链接](http://engineer.org.in/events/chem-events/the_portal.php#home)

（例如 - 当您点击[回合](http://engineer.org.in/events/chem-events/the_portal.php#rounds)时，您也可以在回合面板上看到家中的内容）

# azure - ACS - 管理用户的有效选项

> ID：12694330
> 
> 赞同：0
> 
> 时间：2012-10-02T16:25:17.530
> 
> 标签：azure, azure-acs

我正在开发一个 Windows Azure Web 应用程序，我想了解是否应该在我的体系结构中使用 Windows Azure 控制服务 (ACS)。所以，我的问题是：

1.  Windows Azure 控制服务 (ACS) 是管理用户的有效选项吗？
2.  我的意思是，我是否应该将其视为我的应用程序的“身份验证系统”，而不是实现我自己的数据库（例如使用会员资格）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:41:39.237

好吧，“有效”，因为它有效并受到支持，是的！但我想说的是，该值更多地是一种将其他身份提供者（如 Live、Google 等）提供的身份和声明映射到声明以供您的应用程序响应的方式。

您当然可以通过 ACS 门户设置您自己的用户，但对于真正的会员系统，您希望用户能够更改密码、个人资料信息等。其中大部分可以通过[ACS 管理 REST API](http://msdn.microsoft.com/en-us/library/windowsazure/ee706703.aspx)完成，但我不这样做不知道您可能能够利用的任何更高级别的抽象或框架。看起来这将是很多工作，而不是您的应用程序的核心部分。

# jquery - 向可放置项目添加唯一 ID

> ID：12694339
> 
> 赞同：2
> 
> 时间：2012-10-02T16:26:07.613
> 
> 标签：jquery, draggable, unique, droppable, unique-id

我有一个小部件，我可以在其中将物品放入垃圾桶。我希望能够在 drop 事件中为丢弃在垃圾桶中的每个项目添加一个唯一的 ID。我该怎么做？有没有办法让输出值成为列表项的实际名称？谢谢！下面是我的代码：

```
 $(function() {
    var $gallery = $( "#gallery" ),
        $trash = $( "#trash" );

    $( "li", $gallery ).draggable({
        cancel: "a.ui-icon", 
        revert: "invalid", 
        containment: $( "#demo-frame" ).length ? "#demo-frame" : "document", // stick to demo-frame if present
        helper: "clone",
        cursor: "move"
    });

    $trash.droppable({
        accept: "#gallery > li",
        activeClass: "ui-state-highlight",
        drop: function( event, ui ) {
            deleteImage( ui.draggable );
        }
    });

    $gallery.droppable({
        accept: "#trash li",
        activeClass: "custom-state-active",
        drop: function( event, ui ) {
            recycleImage( ui.draggable );
        }
    }); 
```

HTML

```
 <div class="demo ui-widget ui-helper-clearfix">

<ul id="gallery" class="gallery ui-helper-reset ui-helper-clearfix">
    <li class="ui-widget-content ui-corner-tr" a href="link/to/trash/script/when/we/have/js/off">
        <h5 class="fpheader">Red</h5>   

    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheader">Orange</h5>

    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheader"Yellow</h5>
    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheader">Green</h5>
    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheaderr">Blue</h5>
    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheader">Purple</h5>
    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheader">White</h5>

    </li>
</ul>

</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T17:18:36.020

您可以使用这样的日期对象创建唯一 ID

```
var uniqueId = new Date().getTime(); 
```

要获取列表项的名称，可以在 drop 事件中访问

```
var listNameId = ui.draggable.children('.fpheader').text().toLowerCase(); 
```

您可以从 UI 对象访问克隆的项目

```
ui.helper 
```

您可以从 UI 对象访问原始项目

```
ui.draggable 
```

下面的示例为克隆的项目添加一个唯一 ID

```
$trash.droppable({
    accept: "#gallery > li",
    activeClass: "ui-state-highlight",
    drop: function( event, ui ) {
        // unique ID based on ID
        var uniqueId = new Date().getTime();
        // set unique ID to cloned list item
        ui.helper.attr('id', uniqueId);
        deleteImage( ui.draggable );
    }
}); 
```

下面的示例将列表名称添加到原始项目

```
$trash.droppable({
    accept: "#gallery > li",
    activeClass: "ui-state-highlight",
    drop: function( event, ui ) {
        // list item text, i.e "white"
        var listNameId = ui.draggable.children('.fpheader').text().toLowerCase();
        // set list name ID to orriginal list item
        ui.draggable.attr('id', listNameId);
        deleteImage( ui.draggable );
    }
}); 
```

# javascript - 调整窗口大小时是否可以监听 keydown 和 keyup

> ID：12694342
> 
> 赞同：2
> 
> 时间：2012-10-02T16:26:29.823
> 
> 标签：javascript, jquery, keypress, jquery-events, window-resize

我正在尝试检测`keydown`and `keyup`，同时调整窗口大小。到目前为止我尝试过的只是在调整大小完成*后*触发关键事件。

```
$(window).resize(function(){
    console.log("resizing");    
});

$(window).keydown(function(e){
    $("#key").css("background","green");
});

$(window).keyup(function(e){
    $("#key").css("background","red");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:14:41.630

好的，所以您可能在这里遇到的部分问题是 keydown 不是一个`on`或`off`东西，它是一个不断火的东西。
也是如此`onresize`。

当您调整窗口大小时，事件会被一遍又一遍地调用。
此外，由于 JS 不是多线程的，因此一次只会发生其中一个事件。另一个事件将在另一个事件完成后立即排队运行。

所以你真正想要的是一个状态机，一个事件设置，另一个事件检查。

快速示例：

```
var BrowserWindow = { width : 0, height : 0, prevWidth : 0, prevHeight : 0 };

window.onresize = function (e) {
   /* set prevWidth/prevHeight, get new width/height */
};

window.onkeydown = function (e) {
    if (BrowserWindow.prevWidth !== BrowserWindow.width) { /*...*/ }
}; 
```

这会起作用（除了它只会在屏幕被主动拉伸时起作用......所以它不会发生在键被按下并且窗口边缘被按住但没有被拖动的情况下（这可能会导致如果浏览器比调整大小更频繁地触发 keydown 事件，则闪烁）。

更合适的答案可能是另一种方式：

```
var Keyboard = {
    currentKeys : {},
    previousKeys : {}
};

window.onkeydown = function (e) { Keyboard.currentKeys[e.keyCode] = true; };
window.onkeyup   = function (e) { delete Keyboard.currentKeys[e.keyCode]; };

window.onresize = function (e) {
    var key = <X>,
        state = "";

    state = Keyboard.currentKeys[key] && !Keyboard.previousKeys[key]
          ?    "pressed"
          : !Keyboard.currentKeys[key] && Keyboard.previousKeys[key]
          ?    "released"
          : Keyboard.currentKeys[key] && Keyboard.previousKeys[key]
          ?    "held"
          :    "off";

    Keyboard.previousKeys = Keyboard.currentKeys;
    doSomething(state);
}; 
```

从架构的角度来看，这并不完美，但更符合您在另一个环境中必须做的事情的想法。

# android - 实现轮形界面导航工具

> ID：12694343
> 
> 赞同：2
> 
> 时间：2012-10-02T16:26:30.433
> 
> 标签：android, android-layout, user-interface

我有兴趣在我的 Android 应用程序中实现基于轮形设备（或饼图形或圆形）的用户界面导航控制机制。

我希望在任何时候都只看到一半的轮子。也就是说，只有滚轮的上半部分应该是可见的，因为下半部分应该在屏幕边框的下方。然后，用户可以转动“半轮”来显示被屏幕边框隐藏的选项。可见的上半部分应该像饼图一样分为三个部分，因此用户可以按下其中任何一个来调用某些操作。下面的图片应该解释（它是一个有七个（AG）选项的例子）。

[http://imgur.com/lNu1F](http://imgur.com/lNu1F)

旋转本身应该不难，但我很难理解如何定位轮子，使其一半在实际屏幕之外。我认为加载整个轮子（但隐藏其中的一半）是最好的，因为那是我拥有的图形，并且当用户滑动以显示其他选项时，它还可以实现流畅的动画。我怎样才能让Android以这种方式显示轮子？

还。任何关于如何实现“沿车轮形状滑动”的评论将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:51:19.490

所以对于轮子 - 你很难知道如何定位轮子，因为你正在使用 XML 来对齐你的对象并且想要使用像“对齐对象中心到底部”这样不存在的东西。这是一种可能会正常工作的方法：掩盖车轮视图。

[是否可以在android中屏蔽视图？](https://stackoverflow.com/questions/7559171/is-it-possible-to-mask-a-view-in-android)

至于滑动轮子，我会注册轮子以获取触摸事件，并仅使用移动事件的水平组件来应用轮子的旋转。这种设置在使用旋钮的音频软件中很常见。

但是，如果您想让它以更真实的方式粘在用户的手指上，您需要执行以下操作：

1.  当用户第一次触摸滚轮时，计算从滚轮中心到手指的角度。

2.  每次手指移动时，检查滚轮中心到手指的角度 - 并旋转滚轮角度与上次触摸事件相比的变化量。

得到两点之间角度的公式是这样的：

```
Float angleInRadians = Math.atan2(point1.y-point2.y, point1.x-point2.x); 
```

# c++ - libxml2 2.7.8 / libxml++ 2.35 和 DTD 验证的变化

> ID：12694348
> 
> 赞同：0
> 
> 时间：2012-10-02T16:26:46.237
> 
> 标签：c++, fedora, libxml2, fedora16

最近我的 Fedora 16 将 libxml2 从以前的版本自动升级到最新的 rpm libxml2-2.7.8-8.fc16.i686，突然 dtd 验证开始抱怨 DTD 文件中缺少声明。在此升级之前，一切正常。当然，当我禁用验证时，它也可以正常工作，但这不是想法。我不直接使用 libxml2，我实际上使用 libxml++，它是 libxml2 的包装器。

我试图搜索可能导致此问题的 libxml2 代码中的一些更改，但是 libxml2 站点上的最新更改以及 Fedora 站点上针对此软件包的更改并未提及 DTD 代码中的任何更改（在最近的版本中）

下面的 xml 消息突然不再有效：

```
<?xml version="1.0"?><!DOCTYPE MYAPP SYSTEM "myapp.dtd"><MYAPP><Command type="Connect"/></MYAPP> 
```

它给出以下错误消息：

```
No declaration for attribute type of element Command
No declaration for element Command
No declaration for element MYAPP 
```

这是我使用的 myapp.dtd 中的（剥离的）片段：

```
<!ELEMENT MYAPP (Command|Result)>
<!ELEMENT Command (Parameters?)>
<!ELEMENT Parameters (..a lot of other types and records..)>
<!ATTLIST Command type (None|
                    Connect|
                    Disconnect
                    ) "None"> 
```

任何人都对可能突然导致这种情况的原因有一些指示，是否有人有此版本中更改的一些指示/链接。这是一个已知的错误，任何线索？

正如建议的那样，我重新编译了（最新版本）libxml2 并且没有任何更改，我还重新编译了最新版本的 libxml++（2.35-3），它​​现在可以很好地打印错误的行号和列，但这就是所有已经改变的. 解析器仍然不接受我的（以前接受的）xml 文件/消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:03:45.283

但是我使用的 libxml 2.7.8（在 Windows 上）可以正确验证您的文件。没有消息。首先它在您的 dtd 文件的第三行抱怨`..`，所以我需要删除该行。现在它给出了一个干净的输出。

所以也许你的自动升级实际上搞砸了图书馆。如果您从源代码编译 2.7.8，它将被放入`/usr/local`并覆盖您当前的安装。那你可以再试一次。我不知道您如何尝试修复现有安装。无论如何，2.7.8 版本不对您遇到的错误负责。

我的测试命令行：`xmllint ikku.xml -dtdvalid`

`catalog`快速思考：由于某些问题，您的解析器可能会考虑另一个 dtd 文件。尝试更改 dtd 文件名。

# macos - NSScrollView 子视图的缩放

> ID：12694351
> 
> 赞同：3
> 
> 时间：2012-10-02T16:26:59.967
> 
> 标签：macos, zooming, nsview, nsscrollview

为这个菜鸟问题道歉 - 来自 iOS 背景，我在 OSX 上有点挣扎。

好消息 - 我有一个带有大 NSView 的 NSScrollView，因为它是 documentView。我一直在调整 contentView 的边界以有效放大 documentView - 并且对于我在 drawRect （documentView）中所做的任何事情都运行良好

不太好的消息 - 我现在添加了另一个 NSView 作为大型 documentView 的子视图，并希望它可以像在 iOS 领域一样简单地缩放 - 但事实并非如此。如果有人能帮助填补我对这一切的理解中相当大的空白，我将不胜感激

谢谢。

[更新]我自己修复了它-“问题”是启用了自动布局（布局约束）。一旦我禁用它们并适当地设置自动调整大小，那么一切都很好。我想我应该了解布局约束......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-26T23:40:25.227

我知道这已经很老了，但是我花了几天时间尝试使用其他人发布的各种解决方案来解决问题后，才使用以下方法实现了鼠标滚动缩放，所有这些解决方案都存在基本问题。作为背景，我在 NSView 子类中使用 CALayers，在后台使用大型 PDF 建筑布局，并在其上叠加了 100 多个可拖动的 CALayer 对象。

缩放是即时且平滑的，并且一切都可以完美缩放，没有我所期望的“放大”的像素化。我为此浪费了很多天。

```
 override func scrollWheel(with event: NSEvent) {

        guard event.modifierFlags.contains(.option) else {
            super.scrollWheel(with: event)
            return
        }

        let dy = event.deltaY
        if dy != 0.0 {

            let magnification = self.scrollView.magnification + dy/30
            let point = self.scrollView.contentView.convert(event.locationInWindow, from: nil)

            self.scrollView.setMagnification(magnification, centeredAt: point)
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:16:39.697

大声笑，我有完全相同的问题。我失去了两天左右的自动布局。在我阅读了您的更新后，我进入并在视图中添加了另一个 NSBox，它被正确绘制并缩放。

不过，它是否也适用于 NSImageViews 作为子视图？

# facebook - 如何删除将 url 共享在 codeigniter 链接中的 url 的 facebook 参数

> ID：12694357
> 
> 赞同：2
> 
> 时间：2012-10-02T16:27:09.393
> 
> 标签：facebook, codeigniter

当我在我的 Facebook 墙上分享链接[http://www.totalrunning.com/results/misFotos/TTRCAR1346364033/283 （Codeigniter Url's）时看起来很好，但是当单击生成的 URL 时是：](http://www.totalrunning.com/results/misFotos/TTRCAR1346364033/283) [http ://www.totalrunning.com/结果/misFotos/TTRCAR1346364033/283?fb_action_ids=441641579216005&fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=288381481237582](http://www.totalrunning.com/results/misFotos/TTRCAR1346364033/283?fb_action_ids=441641579216005&fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=288381481237582)

fb_action_ids 添加在其他参数中，这会导致 url 无法正确解析

我可以做的是让 facebook 不把这些参数放在我的 url 中，或者像使用 Codeigniter 处理一样？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:33:45.660

## 启用查询字符串

在某些情况下，您可能更喜欢使用查询字符串 URL：

```
index.php?c=products&m=view&id=345 
```

CodeIgniter 可选地支持此功能，可以在您的 application/config.php 文件中启用。如果你打开你的配置文件，你会看到这些项目：

```
$config['enable_query_strings'] = FALSE;
$config['controller_trigger'] = 'c';
$config['function_trigger'] = 'm'; 
```

如果更改`enable_query_strings`为此`TRUE`功能将变为活动状态。然后，您的控制器和函数将可以使用您设置为调用控制器和方法的“触发器”字词访问：

```
index.php?c=controller&m=method 
```

您可以在此处的 Code Ignitor 用户指南中阅读更多信息：http: [//codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:20:04.443

我找到的解决方案是通过使用 Codeigniter .htaccess 的同一个文件来隐藏 index.php

在此 htaccess 上方放置以下内容：

```
# -----------------
RewriteCond% {QUERY_STRING} ^ fb_action_ids = (. *) $ [NC]
RewriteRule ^ (. *) $ / $ 1? [R = 301, L]
# ----------------- 
```

使用此代码，您可以告诉服务器删除 url 的查询字符串，但只有当他出现 fb_action_ids 或您选择的任何参数时，才不会阻止 CodeIgniter 中查询字符串的正常运行

有了这个，您可以保留正确解析的漂亮 codeigniter url 和 facebook 链接！

重要提示：将其放置以避免文件覆盖功能隐藏 index.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:53:52.183

我不会推荐这种方法。只需在最终参数后添加一个斜杠，它就可以正常工作。它将忽略所有这些 facebook 额外内容

# perl - 我一直在 BEGIN { plan tests => 5 } 安装模块失败。我需要什么来克服这个问题？

> ID：12694359
> 
> 赞同：0
> 
> 时间：2012-10-02T16:27:14.120
> 
> 标签：perl, cpan

它无法安装的模块是 JSON::XS。实际上，它无法安装具有以下代码的任何内容：

```
BEGIN { plan tests => 5 }; 
```

从 build.log 中：

```
syntax error at t/04_dwiw_encode.t line 13, near "plan tests" 
```

违规行：

```
 13     BEGIN { plan tests => 5 } 
```

我读到 Test.pm 有问题，但是有很多模块在使用它，而且最近才开始发生这种情况。

我刚刚尝试重新安装 perlbrew 并尝试更新过时的模块，但我一直遇到同样的失败。

任何人都知道可能导致此问题的原因以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:37:28.450

我怀疑您的模块版本比预期的要旧[`Test`](http://search.cpan.org/perldoc?Test)，或者您创建了自己的名为的模块`Test.pm`并且它被拾取而不是预期的模块。

您可以通过升级 Test 来解决第一个问题。

```
cpan Test 
```

您应该通过将您的重命名`Test.pm`为其他名称来解决第二个问题，但您也可以通过更改目录并临时清除`PERL5LIB`env var 来解决它。

```
pushd / ; PERL5LIB= cpan JSON::XS ; popd 
```

# javascript - Javascript替换功能不适用于正则表达式

> ID：12694368
> 
> 赞同：1
> 
> 时间：2012-10-02T16:27:36.617
> 
> 标签：javascript, regex, replace

为什么这段代码不能正常工作？

```
var temp = "@TEMP (A1)"
var text = "1st Oct @TEMP (A1)"
text = text.replace(new RegExp(temp, "gi"), "");
console.log(text); //I get same text even though I used replace instead of 1st Oct?? 
```

谁能解释这里出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T16:29:33.147

您需要引用`temp`直接用作正则表达式的特殊字符。`(`和字符将`)`字符分组到模式中，实际上并不匹配 '(' 和 ')'。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T16:29:10.667

正则表达式中的括号具有特殊含义，除非转义：

```
var temp = "@TEMP \\(A1\\)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:31:16.193

括号在正则表达式中是一种特殊情况。用反斜杠转义它们。您也可以使用正斜杠符号来创建 RegExp 对象。

```
var loRegExp = /@TEMP \(A1\)/gi; 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T16:37:22.767

```
var temp = "@TEMP \\(A1\\)";
var text = "1st Oct @TEMP (A1)";
text = text.replace(new RegExp(temp, "gi"), "");
console.log(text); 
```

大括号是正则表达式中的一个特殊字符，你应该使用反斜杠来转义它。

# php - Google API v3 PHP 会话丢失数据

> ID：12694369
> 
> 赞同：0
> 
> 时间：2012-10-02T16:27:36.537
> 
> 标签：php, cookies, google-api, session-variables

我正在构建一个使用 Google API PHP 客户端库的 Web 应用程序。该应用程序允许用户从 Google Analytic Accounts 检索分析数据。除了我将要解释的以下内容之外，一切都按其应有的方式工作。

第1步

用户在表单中选择一个帐户名称并从 accounts.php 页面提交表单。然后将该帐户的帐户 ID 保存在 SESSION 变量中。完成此操作后，accounts.php 页面使用位置标头重定向到 simple.php 页面。

第2步

simple.php 页面显示一个 Connect me 链接，然后用户按下该链接将其登录到 Google，以便从分析中检索数据。此数据检索所有帐户。然后，这些帐户通过一个针对帐户 id 会话变量的循环运行（以便检索用户在 accounts.php 页面中选择的正确帐户的结果）。

问题

问题是，当 Google 重定向回 simple.php 页面时，我之前存储在 accounts.php 中的所有会话数据都丢失了。即使我将帐户 ID 存储在 cookie 中。我认为 Google PHP 客户端库正在以某种方式在后端擦除我的会话数据。我尝试了很多想法，但似乎都不起作用。奇怪的是，如果我注销或返回 accounts.php 并重试，Session 变量会在 Google 重定向后保存其帐户 ID 数据。如此迷茫！

我希望我已经尽可能清楚地说明了这一点

```
<?php
session_start();

 /*
if ($_SESSION['test'] != "logged" || $_SESSION['test'] == null) {

header('Location: http://www.xxxx.co.uk/');
die("Redirecting to home page");

}*/

header("Accept-Encoding: gzip");
header("User-Agent: gzip");
require_once 'src/apiClient.php';
require_once 'src/contrib/apiAnalyticsService.php';
$client = new apiClient();
$client -> setApplicationName("Google Analytics PHP Starter Application");

$client -> setClientId('xxxx');
$client -> setClientSecret('xxxx');
$client -> setRedirectUri('http://www.xxxx.co.uk/simple.php');
$client -> setDeveloperKey('xxxx');
$client -> setUseObjects(true);

$service = new apiAnalyticsService($client);

$table = array();

if (isset($_GET['logout'])) {
unset($_SESSION['token']);
}

if (isset($_GET['code'])) {
$client -> authenticate();
$_SESSION['token'] = $client -> getAccessToken();
header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}

if (isset($_SESSION['token'])) {
$client -> setAccessToken($_SESSION['token']);
}

if ($client -> getAccessToken()) {

$accounts = $service -> management_accounts -> listManagementAccounts(array("fields" => "items(id,name)"));
print "<a class='login' href='index.php?logout=true'>Logout</a>";
//$accounts = $service -> management_accounts -> listManagementAccounts();

foreach ($accounts->getItems() as $account) {
    //var_dump($_SESSION['account_number']);
    if ($account -> getId() == $_COOKIE["test"]) {

        echo "</br>" . $account -> getName() . "</br>";
        $props = $service -> management_webproperties -> listManagementWebproperties($account -> getId());

        //foreach ($props->getItems() as $property) {

        $profiles = $service -> management_profiles -> listManagementProfiles($account -> getId(), "~all");

        foreach ($profiles -> getItems() as $profile) {
            $counter++;
            $table[$counter]['name'] = $profile -> getName();

            echo "</br>" . $profile -> getName() . "</br>";

            /*
             echo "<h1>Profiles</h1>";
             echo "<pre>";
             var_dump($profile);
             echo "</pre>";*/

            // Direct
            $data = $service -> data_ga -> get("ga:" . $profile -> getId(), $_SESSION['startdate'], $_SESSION['enddate'], 'ga:visits', array("segment" => "gaid::-7"));
            // Non Paid
            $data2 = $service -> data_ga -> get("ga:" . $profile -> getId(), $_SESSION['startdate'], $_SESSION['enddate'], 'ga:visits', array("segment" => "gaid::-5"));
            // Paid
            $data3 = $service -> data_ga -> get("ga:" . $profile -> getId(), $_SESSION['startdate'], $_SESSION['enddate'], 'ga:visits', array("segment" => "gaid::-4"));
            // Refferal
            $data4 = $service -> data_ga -> get("ga:" . $profile -> getId(), $_SESSION['startdate'], $_SESSION['enddate'], 'ga:visits', array("segment" => "gaid::-8"));

            /*
             echo "<h1>Non Paid Data</h1>";
             echo "<pre>";

             //var_dump($data);
             echo "<pre>";
             echo "<h1>Paid Data</h1>";
             echo "</pre>";

             //var_dump($data2);
             echo "<pre>";
             echo "<h1>Search Data</h1>";
             echo "<pre>";

             //var_dump($data3);
             echo "</pre>";
             echo "<h1>Referral Data</h1>";
             echo "<pre>";

             //var_dump($data4);
             echo "</pre>";*/

            $results1 = $data -> getTotalsForAllResults();
            $results2 = $data2 -> getTotalsForAllResults();
            $results3 = $data3 -> getTotalsForAllResults();
            $results4 = $data4 -> getTotalsForAllResults();

            foreach ($results1 as $result) {

                echo "Direct Traffic " . $result . "<br/>";
            }
            foreach ($results2 as $result) {
                $table[$counter]['nonpaid'] = $result;
                echo "Non Paid Traffic " . $result . "<br/>";
            }
            foreach ($results3 as $result) {
                echo "Paid Traffic " . $result . "<br/>";
            }
            foreach ($results4 as $result) {
                $table[$counter]['refferal'] = $result;
                echo "Refferal Traffic " . $result . "<br/>";
            }

        }

    } else {

        echo "This is not working";
        var_dump($_COOKIE["test"]);
    }

    $_SESSION['token'] = $client -> getAccessToken();

}

echo "<table class='data'>";

        foreach($table as $data)    {

            $total = $data['nonpaid'] + $data['refferal'];

            echo "<tr><td>".$data['name']."</td><td>".$total."</td></tr>";

    }

    echo "</table>";
} else {
$authUrl = $client -> createAuthUrl();
    var_dump($_COOKIE["test"]);
            print "<a class='login' href='$authUrl'>Connect Me!</a>";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:38:07.307

检查您提供的重定向 URI 是否在会话 cookie 的范围内。

例如，您指定`'http://www.xxxx.co.uk/simple.php'`，但如果您最初通过`'http://xxxx.co.uk/simple.php'`(no `www.`) 访问该页面，则 cookie 可能超出范围。

这不仅适用于会话，也适用于一般的 cookie - 您可能会发现[这](http://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path)值得一读。您可以使用该函数控制 PHP 会话 cookie 的各种属性[`session_set_cookie_params()`](http://php.net/manual/en/function.session-set-cookie-params.php)。可以将域设置为`.xxxx.co.uk`(leading `.`)，以便它在根域及其所有子域上可用。

# visual-studio-2012 - 在 Visual Studio 2012 中使用 Microsoft Moles

> ID：12694381
> 
> 赞同：3
> 
> 时间：2012-10-02T16:28:13.867
> 
> 标签：visual-studio-2012, moles, pex-and-moles

我有一个使用 Microsoft Moles 进行测试的 Visual Studio 2010 解决方案 (.Net3.5)，我在 Visual Studio 2012 中打开它并且能够构建它，但是我无法从 Visual Studio 运行测试。原因是Moles主机适配器没有在vs2012中注册。因此，所有带有 [HostType("Moles")] 的测试方法都无法运行，但出现以下异常：

消息：UTA034：CreateSite_MockProperties_Passes 具有无效的 HostType 属性。必须指定有效的已注册主机类型。

有谁知道如何在 Visual Studio 2012 中注册主机适配器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:01:01.307

对于 Moles 框架的粉丝来说，它看起来更加乐观。众所周知，它的继任者“Fakes and Stubs”仅在 VS2012 Ultimate SKU 中可用。

然而微软刚刚宣布，从 VS2012 Update 2 开始，Premium SKU 用户将能够使用 Fakes 和 Stubs。我对此很满意！！

[http://blogs.msdn.com/b/bharry/archive/2013/01/30/announcing-visual-studio-2012-update-2-vs2012-2.aspx](http://blogs.msdn.com/b/bharry/archive/2013/01/30/announcing-visual-studio-2012-update-2-vs2012-2.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:09:15.743

我们必须弄清楚如何在 Visual Studio 2012 中安装主机适配器！

# android - 尝试查询 sqlite 时出现异常

> ID：12694385
> 
> 赞同：0
> 
> 时间：2012-10-02T16:28:25.540
> 
> 标签：android, sqlite, spinner, simplecursoradapter

我正在尝试从 sqlite 数据库中填充微调器。数据库为 +400mb，我手动放入我的 sdcard 中的 /data/data/myapplicationpackage/databases 目录。

我还有一个 ContentProvider 来访问数据。这是代码的一些相关部分：

```
private static final String DATABASE_NAME = "mydb.db";
private static final int DATABASE_VERSION = 1;
private static final String DOSIS_PA_TABLE = "mytable";

public static final String KEY_ID_PA = "_id";
public static final String KEY_DESCRIPTION = "description";

public static final String CONTENT_AUTHORITY = "com.mypackage.myappname";
public static final Uri BASE_CONTENT_URI = Uri.parse("content://"
        + CONTENT_AUTHORITY);

private static final String PATH_DOSISPED_PA = "mytable";

public static final Uri CONTENT_URI = BASE_CONTENT_URI.buildUpon()
        .appendPath(PATH_DOSISPED_PA).build();

public static final String CONTENT_TYPE = "vnd.android.cursor.dir/vnd.myappname.mytable";
public static final String CONTENT_ITEM_TYPE = "vnd.android.cursor.item/vnd.myappname.mytable";

private static final int DOSISPAS = 1;
private static final int DOSISPA_ID = 2;

private static final UriMatcher uriMatcher;
static {
    uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
    uriMatcher.addURI("CONTENT_AUTHORITY", "mytable", DOSISPAS);
    uriMatcher.addURI("CONTENT_AUTHORITY", "mytable/*", DOSISPA_ID);
} 
```

这是我触发查询的活动的一部分：

```
contentResolver = getContentResolver();
    Uri uri = MyContentProvider.CONTENT_URI;
    Cursor cursor = contentResolver.query(uri, null, null, null, null);

    // create an array to specify which fields we want to display
    String[] from = new String[] { MyContentProvider.KEY_DESCRIPTION };
    // create an array of the display item we want to bind our data to
    int[] to = new int[] { android.R.id.text1 };
    // create simple cursor adapter
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_spinner_item, cursor, from, to);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // get reference to our spinner
    Spinner spinner = (Spinner) findViewById(R.id.spinner_pas);
    spinner.setAdapter(adapter);//THIS IS WHERE THE EXCEPTION IS THRWON 
```

在这行代码中会抛出 NullPointerException：

```
 spinner.setAdapter(adapter); 
```

这是logcat：

```
10-02 18:41:32.109: E/AndroidRuntime(2783): FATAL EXCEPTION: main
10-02 18:41:32.109: E/AndroidRuntime(2783): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.edoctores.android.apps.idoctus/com.edoctores.android.apps.idoctus.ui.PediatricDosisActivity}: java.lang.NullPointerException
10-02 18:41:32.109: E/AndroidRuntime(2783):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at android.os.Looper.loop(Looper.java:137)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at java.lang.reflect.Method.invokeNative(Native Method)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at java.lang.reflect.Method.invoke(Method.java:511)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at dalvik.system.NativeStart.main(Native Method)
10-02 18:41:32.109: E/AndroidRuntime(2783): Caused by: java.lang.NullPointerException
10-02 18:41:32.109: E/AndroidRuntime(2783):     at com.edoctores.android.apps.idoctus.ui.PediatricDosisActivity.onCreate(PediatricDosisActivity.java:72)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at android.app.Activity.performCreate(Activity.java:5008)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-02 18:41:32.109: E/AndroidRuntime(2783):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-02 18:41:32.109: E/AndroidRuntime(2783):     ... 11 more 
```

我一整天都在尝试修复它，但没有任何运气。有人可以帮助我并指出正确的方向吗？非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:01:46.097

`findViewById()`仅在*当前*显示时返回 View ，否则返回`null`。您**必须**`spinner_pas`在您传递给的布局中`setContentView()`（或在已经膨胀的布局中）有一个带有 id 的 Spinner 。

# asp.net - 如何确定 iTextSharp Basefont 默认样式

> ID：12694387
> 
> 赞同：1
> 
> 时间：2012-10-02T16:28:31.373
> 
> 标签：asp.net, itextsharp

我正在使用 iTextSharp 创建 PDF。

该过程的一部分向 PDF 添加简单的文本，另一部分创建相同文本的轮廓。

对于直截了当的文本方面，我在 iTextSharp 中使用 ShowTextAligned 方法；这需要 Basefont 并且无法设置样式。

对于大纲，我正在创建一个 GDI GraphicsPath 来获取点，然后将其转换为 PDF 曲线/线条等。 AddString 方法需要 Drawing.FontStyle

现在我的问题是我需要将 AddString 的样式设置为 BaseFont 使用的样式。IE 如果 Basefont 呈现常规，我需要将 AddString 字体样式设置为常规

如何确定 ShowTextAligned 中 BaseFont 使用的样式？

更多信息：

我也尝试过使用 ColumnText；它允许您设置 iTextSharp 字体及其样式。尽管使用此方法会导致以近似样式呈现的字体；IE 字体通常为常规字体并设置为粗体，会产生略微畸形的粗体字体。

**编辑**

当我说我需要将 BaseFont 传递给 ShowTextAligned 时，我的意思是，为了使用此方法，您必须首先使用 PdfContentByte 的 SetFontAndSize 设置字体和大小 - 正是这种方法需要 BaseFont。

我知道我一定遗漏了一些明显的东西..我只是看不到树木的树木:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:36:23.803

您可以尝试预先定义您的基本字体并在整个 PDF 文档中使用它。

请参阅[iTextSharp - 使用字体](http://www.mikesdotnetting.com/Article/81/iTextSharp-Working-with-Fonts)

示例代码：

```
BaseFont bfTimes = BaseFont.CreateFont(BaseFont.TIMES_ROMAN, BaseFont.CP1252, false);

Font times = new Font(bfTimes, 12, Font.ITALIC, Color.RED); 
```

上面的行创建了一个 BaseFont 对象并使用内置的常量值来设置字体系列和编码。它还为在 PDF 文档中嵌入字体指定 false。使用 BaseFont 对象创建一个新的 Font 对象，并进一步设置以磅为单位的字体大小、样式和颜色 - 再次使用 iTextSharp 的这些值的常量。

有关 BaseFont 的更多信息，请参阅其[类定义](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/BaseFont.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T13:07:18.503

您可以使用 SetColorFill 方法。像这样

```
content.BeginText();
BaseFont baseFont = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252,BaseFont.NOT_EMBEDDED);
content.SetFontAndSizebaseFont, 12);
BaseColor baseColor = new BaseColor(255, 0, 0);
content.SetColorFill(baseColor);
//or use predefined colors 
content.SetColorFill(BaseColor.RED);
// use ShowTextAligned method
content.EndText(); 
```

# java - intellij 没有在 JSP 代码检查或自动完成中解析 el 变量

> ID：12694392
> 
> 赞同：17
> 
> 时间：2012-10-02T16:28:44.213
> 
> 标签：java, jsp, intellij-idea, el

总结此处显示的答案[Eclipse 中 Spring MVC 模型对象的代码辅助（jsp /jstl）视图对](https://stackoverflow.com/questions/2461855/code-assist-in-jsp-jstl-view-for-spring-mvc-model-objects-in-eclipse?lq=1) 我根本不起作用，是否有需要更改的设置？

我刚刚在 github 上下载了示例[spring-mvc-showcase](https://github.com/SpringSource/spring-mvc-showcase)，它在该项目中无法开箱即用（无论是 11.1.3 还是 EAP 12 版本都是完整的企业版），见下文（我不知道它从哪里获取formBean）：

![fruit 和 foo 都可以，但不能作为自动完成选项使用](../Images/53c33209564e32ae6dca866198d869e6.png)

这是我自己项目中的一个示例，下面的屏幕截图（底部框架）显示了我的控制器向模型添加字符串属性并返回正确的视图名称。然后，我希望在编辑该视图时将 shopString 作为自动完成选项提供，但事实并非如此： ![上面显示的 JSP 控制器，提供的自动完成功能](../Images/3bf407fb039731786c054914c99c4a80.png)

sg 是一个 javascript 变量——它应该在那里，但“shopString”在哪里？是否有我需要更改的设置或其他我缺少的东西来获得此功能（使用带有所有 spring 插件的 11.1.3 企业版）。

它在弹簧特定变量上也失败了： ![在此处输入图像描述](../Images/f483bfa7766041bad6439990607e703c.png)

他们是开源的（春季教程项目之一？），这绝对有效......或者我的 Intellij 安装中是否需要更改设置（我已经使用版本 12 EAP 的全新下载进行了测试）？

下面的另一个屏幕截图显示了我通过自动检测正确设置的所有 spring coifg 文件，但代码检查失败......这是[spring-mvc-showcase](https://github.com/SpringSource/spring-mvc-showcase)项目： ![代码检查和弹簧配置](../Images/b283fd371d42800d937591d40d8f046e.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-06T08:31:12.717

有一种标准方法可以做到这一点，这不是 IntelliJ 特定的。

```
<jsp:useBean id="someModel" scope="request" type="foo.bar.SomeModelClass"/> 
```

这里的*type*属性不需要是具体的类，也可以是接口类型。通常，您会将这些声明放在 JSP/JSPX 文件的开头，以提供类似于“模型输入声明”的内容。

以这种声明方式使用 JSP 是在 Spring 的原著中推荐的，事实上（*Expert One-on-One J2EE Design and Development.*）。至少 7 年以来，IntelliJ 一直为此类页面提供完整的代码完成。

请注意，IntelliJ 中还有其他相关的便利功能：如果一个 EL 变量引用被标记为未定义，您可以按*Alt-Enter*选择一个 QuickFix，它将插入一个像上面一样的声明。它甚至会根据您正在访问的属性尝试找出实际类型。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-05T12:05:08.993

据我了解 Spring，没有声明可以放入模型中的变量定义。该调用`model.addAttribute()`可以将对象添加到模型中，该对象可以由参数标识，也可以由对象的类名自动生成。

因此，想象以下情况，您有多个方法：

```
@RequestMapping("foo") public String foo(Model model) { 
    model.addAttribute("model", new Foo());
    return new Random().nextBoolean() ? "page" : "someOtherPage";
}
@RequestMapping("bar") public String bar(Model model) { 
    model.addAttribute("model", new Bar());
    model.addAttribute("model", new Foo());
    model.addAttribute("model", new Bar());
    return new Random().nextBoolean() ? "page" : "someOtherPage";
} 
```

并且 JSP 将类似于

```
<c:out ${model.value} /> 
```

由于没有正确映射哪些控制器在某些情况下可以转发到哪些视图，也没有正确映射模型中的内容，因此您的 IDE 没有真正的机会为您提供正确的信息。

但是为了支持 IDE 向您建议一些有用的信息，您可以使用类型提示。因此，您必须复制对象的整个引用，例如**foo**并添加 JSP 注释，例如：

```
<%--@elvariable id="foo" type="com.mycompany.SomeObject"--%> 
```

警告将消失，完整的 IDE 支持就在您身边，允许您**遍历**. `foo`最好的事情之一是**未使用的 getter 警告**也会消失。您可以直接从 JSP 或 POJO中直接调用**show usages操作。**

这也适用于 JSF，尤其是在 JSF 组件中。具有这种代码完成功能的非常简洁的功能，显示警告和错误。

希望对您切换到 Intellij Idea 有所帮助。

**编辑：**我还向一位朋友报告了这一发现，我将整个事情包装成一个不错的博客条目。也许你有兴趣阅读它：[打开链接](https://blog.notadomain.com/posts/2012-04-16-type-hints/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:14:14.373

这已在最新版本的[intellij 122.694中得到](http://confluence.jetbrains.net/display/IDEADEV/Leda+122.694+Release+Notes)*修复*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-23T12:35:15.773

开始编写自己的拦截器时，我遇到了类似的问题。问题是我开始在我的视图解析器配置中使用引用 [![xml 问题](../Images/a2dbe85c7d1d819f927f7a150812bd35.png)](https://i.stack.imgur.com/2dbdi.png)

不要使用这样的构造

```
<bean id="internalResourceViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" ref="prefix"/>
    <property name="suffix" ref="suffix"/>
</bean>- 
```

# android - Phonegap for android 在本地存储用户凭据并传入 json 以获取通知

> ID：12694397
> 
> 赞同：0
> 
> 时间：2012-10-02T16:28:59.093
> 
> 标签：android, json, cordova, notifications, local-storage

我之前使用 phonegap for android 构建了一些非常简单的应用程序。

现在我正在构建一个需要来自每个用户的后台服务的状态栏通知。使用 phonegaps backgroundservice 插件，我能够通过示例 twitter 提要获取通知。

> getMethod = new HttpGet("http://search.twitter.com/search.json?q=phonegap&rpp=1&page1");

它按预期工作，但我遇到了很大的麻烦。
1 - 我不擅长 json
2 - 我还没有弄清楚如何在手机上存储用户凭据（用户 id f.example）。

因此，假设我想构建自己的 json 文件 myjson.php。在我的 java 类中，我无法传递用户 ID，因为它没有存储在本地，并且我无法获取它。我的 httpget 将是：

> getMethod = new HttpGet("http://domain.com/myjson.php");

Myjson.php 将为我提供任何新消息，因此我必须有一种方法来指定哪个用户正在请求该文件。考虑到它都是通过sql，它必须是相同的值。php 会话不会削减它，因为手机经常清除缓存并忘记用户凭据。

我怎样才能做到这一点？本地sql？xml？如果我设法在本地存储用户凭据，我如何将这些添加到我的 httpget 请求中？

非常感谢任何帮助和指针，因为我阅读和阅读和阅读现在=卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:58:01.853

您可以使用 LocalStorage 在本地存储数据。这很简单。（链接：[https](https://developer.mozilla.org/en-US/docs/DOM/Storage) ://developer.mozilla.org/en-US/docs/DOM/Storage ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:21:13.777

你的第一个问题是你并没有真正做 json。你只需要一个用 Jason 编码的内容。查看[此处](http://code.Google.com/p/android-json-rpc)包含的本机代码。

# objective-c - 如何将 JSValueRef 从 Objective-C 传输到 JavaScript var

> ID：12694402
> 
> 赞同：0
> 
> 时间：2012-10-02T16:29:10.513
> 
> 标签：objective-c, ios, cocoa-touch, javascriptcore

使用 JavaScriptCore，如果我在 Objective-C 中有这样的 NSString：

```
NSString *objcName = @"Kristof"; 
```

和一个名为*jsContextRef*的 JSGlobalContextRef 上下文。

如何将 objcName 的 Objective-C 值转移到 jsContextRef 中的命名 JavaScript 变量中？我的思路是：

```
JSStringRef jsNameRef = JSStringCreateWithUTF8CString([objcName UTF8String]);
JSValueRef jsValueRef = JSValueMakeString(jsContextRef, jsNameRef); 
```

假设变量名是“jsName”。我需要再打几个电话（甚至可能打一个电话），例如：

```
// This part is pseudo-code for which I would like to have proper code:
JSValueStoreInVarWithName(jsContextRef,"jsName",jsValueRef); 
```

这样最终这个 JavaScript 在 Objective-C 中这样调用时会正确评估：

```
NSString *lJavaScriptScript = @"var jsUppercaseName = jsName.toUpperCase();";
JSStringRef scriptJS = JSStringCreateWithUTF8CString([lJavaScriptScript UTF8String]);
JSValueRef exception = NULL;
JSValueRef result = JSEvaluateScript(jsContextRef, scriptJS, NULL, NULL, 0, &exception); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:05:56.557

[我在JavaScriptCoreHeadstart 的示例代码中](http://developer.apple.com/library/mac/#samplecode/JavaScriptCoreHeadstart/Introduction/Intro.html)找到了答案，更具体地说是 JSWrappers.m 文件。它有这个方法：

```
/* -addGlobalStringProperty:withValue: adds a string with the given name to the
 global object of the JavaScriptContext.  After this call, scripts running in
 the context will be able to access the string using the name. */
- (void)addGlobalStringProperty:(NSString *)name withValue:(NSString *)theValue {
    /* convert the name to a JavaScript string */
    JSStringRef propertyName = [name jsStringValue];
    if ( propertyName != NULL ) {
        /* convert the property value into a JavaScript string */
        JSStringRef propertyValue = [theValue jsStringValue];
        if ( propertyValue != NULL ) {            
            /* copy the property value into the JavaScript context */
            JSValueRef valueInContext = JSValueMakeString( [self JSContext], propertyValue );
            if ( valueInContext != NULL ) {                
                /* add the property into the context's global object */
                JSObjectSetProperty( [self JSContext], JSContextGetGlobalObject( [self JSContext] ),
                                propertyName, valueInContext, kJSPropertyAttributeReadOnly, NULL );
            }
            /* done with our reference to the property value */
            JSStringRelease( propertyValue );
        }
        /* done with our reference to the property name */
        JSStringRelease( propertyName );
    }
} 
```

这正是我所需要的。jsStringValue 方法的代码在同一个项目的 NSStringWrappers.m 中，并且是：

```
/* return a new JavaScriptCore string value for the string */
- (JSStringRef)jsStringValue {
    return JSStringCreateWithCFString( (__bridge CFStringRef) self );
} 
```

这似乎有效。

# git - 项目的部分变基

> ID：12694409
> 
> 赞同：0
> 
> 时间：2012-10-02T16:29:42.037
> 
> 标签：git, rebase

我在一个巨大的项目上工作，实际上只需要它的某些目录。所以我的项目看起来像：

```
project
 |- a/
 |- b/
 \- foo 
```

但是，上游项目看起来像：

```
project
 |- a/
 |- b/
 |- c/
 |- foo
 \- bar 
```

所以我在我的 .gitignore 中有：

```
c/
bar 
```

但是，我现在正在尝试将上游重新定位到 master 上，并且我希望能够告诉 git 应该自动跳过应用于 bar、c/* 或 .gitignore 中的任何内容的补丁/块。但是，应该小心，更改 foo 和 bar 中的块的单个补丁仅应用于 foo 并在 bar 中忽略（不要只忽略整个补丁）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:34:12.763

Git operates on "commit objects", not files / directories. Each commit object has an unique commit ID which is a [hash](http://en.wikipedia.org/wiki/Cryptographic_hash_function) of its previous commit id and the changes of that commit.

Which means that ignoring some files / directories would create a different commit ID - so it's basically equivalent to rebasing all the upstream changes, then creating a new commit which deletes all the files that you don't like.

You could probably do that locally with some scripts, but if you do that, every single commit in your local repository will be different from the version on the server, so you'd have to merge each time you pull new upstream changes / push something upstream.

Maybe you could convince the maintainers of the upstream project to split it into smaller submodules ?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:54:41.840

对不起，我想你必须自己过滤。对此没有 git 命令。

通过导出来试试运气`git format-patch`，`difffilter`然后`git am`再做一次。

# javascript - 推特引导模式不显示远程图像

> ID：12694410
> 
> 赞同：6
> 
> 时间：2012-10-02T16:29:44.380
> 
> 标签：javascript, ajax, twitter-bootstrap, modal-dialog

我正在使用 twitter bootstrap 的模态窗口来加载远程图像

```
<a href="assets/500x300.gif" data-target="#image-preview" data-toggle="modal"><img alt="250x150" src="/assets/250x150.gif"></a> 
```

我正在[关注这些文档](http://twitter.github.com/bootstrap/javascript.html#modals)

图像在模态中未正确呈现。

相反，我得到了一堆混乱的数据-

![推特引导程序不是很好](../Images/8b49e37405c892df0fdd4025b4fc4571.png)

发生了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:04:30.903

是的，我也有这个。我找到的答案在[这里](https://stackoverflow.com/questions/10363451/twitter-bootstrap-modal-for-images)。

我创建了一个这样的链接：

```
<a href="gallery/blue.jpg" class="thumbnail img_modal">

//handler for link
$('.img_modal').on('click', function(e) {
    e.preventDefault();
    $("#modal_img_target").attr("src", this);
    $('#modal').modal('show');
});

//and modal code here

<div id="modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Title to go here</h3>
    </div>
    <div class="modal-body">
        <img id="modal_img_target">
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T21:54:49.770

当使用 href 为 modal 指定远程内容时，Bootstrap 使用 jQuery 的 load 方法来获取内容，然后将检索到的内容粘贴到 modal 的 body 元素中。简而言之，只有在远程内容（href 值）加载 HTML 或文本时才有意义。

您所看到的是预期的，因为如果您在文本编辑器中打开 gif 文件并将其粘贴到 HTML 标记中，就会发生同样的事情。

要让它按照您想要的方式工作，href 需要指向一个 HTML 文档，该文档包含一个 <img> 标记，该标记引用您想要在模式中使用的图像。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-25T21:28:22.030

在 Mark Robson 的帖子中 - 将“this”更改为“this.href”：

```
$("#modal_img_target").attr("src", this);
```

=>

```
$("#modal_img_target").attr("src", this.href); 
```

（我没有评论的声誉）

# xcode - 在 Xcode 上构建项目的 sqlite 数据库创建

> ID：12694411
> 
> 赞同：1
> 
> 时间：2012-10-02T16:29:44.227
> 
> 标签：xcode, build, sqlite

我正在做一个应用程序，在客户端将数据（从 sqlite 文件）加载到 sqlite db 后，将其安装在他的 iphone 上。

在 Xcode 中，我选择我的目标，然后进入 Build Phases -> Add build phase -> Add run script

然后这是我的脚本：

```
echo "Begin script ${TARGET_NAME}"
cd /Users/toto/Documents
cd SQliteDB
sqlite3> db.sql
sqlite3> .read dbfile.sqlite
sqlite3> .exit
echo "end script" 
```

文件 db.sql 已创建但是：当我转到我的目录并使用 SQlite 数据库浏览器打开文件 db.sql 时，它说它是空白的......它是 0ko。

那么怎么了？当我在终端上尝试这个脚本时，它工作得很好...... dbfile.sqlite 位于同一目录中。当我运行应用程序后转到构建日志时，没有错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:46:07.313

`>`用于输出重定向；您的脚本不仅会创建一个文件`db.sql`，还会创建两个文件`.read`和`.exit`.

调用应如下所示：

```
sqlite3 db.sql < dbfile.sqlite 
```

# c# - 调用正确的 dll 实例

> ID：12694412
> 
> 赞同：0
> 
> 时间：2012-10-02T16:29:45.680
> 
> 标签：c#, silverlight, pinvoke

我有两个调用 dll 的程序。我想让他们都确保调用 dll 的同一个实例，以便它可以用来来回传递信息。

我怎样才能正确地调用同一个实例，以便两个程序都与同一个 dll 对话，并且可以使用 dll 作为中间人来回传递信息，并使用反向 pinvokes 和回调。

pinvoke不是这样做的方法吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:17:19.417

它被称为“DLL 中的共享部分”，它可以让您以某种方式在加载该 DLL 的所有进程之间共享数据。

由于代码在不同的进程中运行，您将无法共享回调。您需要某种 IPC（进程间通信）机制来做到这一点。

总的来说，我建议不要这样做，因为这是在应用程序之间共享数据的不寻常方法。您不太可能找到如何做到这一点的帮助和示例，并且需要阅读这本书（Windows Internals，无论如何都很有用）才能自行正确完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:26:39.700

使用[WCF 进行进程间通信](http://www.drdobbs.com/windows/interprocess-communication-with-wcf/196802111)

DLL 用于共享代码，而不是共享数据。

# c++ - C++ 向量初始化

> ID：12694413
> 
> 赞同：-2
> 
> 时间：2012-10-02T16:29:57.777
> 
> 标签：c++, vector

我有一个简单的自定义类，`Foo`我想制作一个`Foo`对象向量。在我的 .h 文件中，我像这样声明向量：

```
std::vector<Foo> bar; 
```

然后我尝试将其初始化为在 .cpp 文件中具有如下容量：

```
vector<Foo> bar;
bar.resize(10); 
```

Foo 有一个自定义构造函数：

```
Foo(string name, int number) 
```

这给了我一个编译错误：

```
a.cpp:20:6: error: request for member 'resize' in 'bar', 
which is of non-class type 'std::vector<Foo>()' 
```

如何初始化自定义对象的向量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:33:44.180

编译器认为`bar`是一个函数（不带参数并返回`vector<Foo>`），而不是类型的变量`vector<Foo>`。所以你在某处放了一些错误的括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:37:33.787

首先，您正在各自的本地范围内创建一个新对象，我猜您不想这样做。

要回答这个问题，请输入：

```
std::vector<Foo> bar;
bar.resize(10); 
```

或访问成员对象：

```
bar.resize(10); 
```

// 确保包含 <vector> 标头或使用正确的命名空间/

# java - Android 虚拟设备配置

> ID：12694415
> 
> 赞同：1
> 
> 时间：2012-10-02T16:30:07.050
> 
> 标签：java, android, mobile, android-emulator

我刚刚开始使用 Android Dev。

我应该将哪些 Android 手机添加为虚拟设备，以确保我的应用程序适用于大多数人？

我从谷歌找到的唯一文章是两年前写的，我认为现在市场份额已经发生了很大变化，因此那里列出的手机可能不再使用了。

具体来说，我想知道我应该为手机提供哪些屏幕尺寸+ Ram/内存进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:40:46.720

如果您的问题是关于您想要支持哪些 Android 版本，您应该查看[此链接](http://developer.android.com/about/dashboards/index.html)。

所以基本上你可以使用具有最低支持版本的 eclair (2.1)。我强烈建议您针对最后一个版本（目前是 Jelly Bean）。这是一个很好的做法，这样当 JB 变得更受欢迎时，您就不必更新您的应用程序来适应它。

对于我的测试，我通常有一个带有 eclair 或姜饼的虚拟机和带有 Jelly Bean 的手机。

编辑：一个非常重要的说明，在您的应用清单中。您必须使用 android:minSdkVersion="XXX" 声明您支持的最低 android 版本。标签 android:targetSdkVersion="XXX" 不是在这里告诉您关注哪个版本，而是告诉系统您是否考虑过最新版本。所以你应该始终以最后一个为目标（目前为 16 个）。例如，如果您针对姜饼（我认为 api 级别 9），那么终端将假定您没有调整菜单按钮的差异并显示一个，即使您甚至不使用它！这是一个非常糟糕的用户体验。

至于要支持的屏幕尺寸，[这个链接](http://developer.android.com/guide/practices/screens_support.html)非常有帮助（无论何时你有关于 android 开发的问题，官方网站都应该是你的第一个目的地）。我认为问题不在于屏幕尺寸，让我们为它们中的每一个进行布局，但相反：这是我想在标准尺寸手机上显示我的应用程序的方式（我会说大约 4.2 英寸） )，在 dp 方面，我需要另一个布局，因为我的布局要么太狭窄，要么有太多空白？

如果您真的想知道要考虑什么尺寸，那么 4 到 4.5 英寸之间的某个位置是您可以找到 2012 年大多数高端智能手机的地方。您可能需要另一种布局来配置 3.5 英寸或更小的屏幕。在更大的尺寸方面，我会关注在 7 英寸（Nexus 7、kindle、galaxy tab 7）和 10 英寸上。

# .net - .net 抽象类的多重继承

> ID：12694417
> 
> 赞同：11
> 
> 时间：2012-10-02T16:30:16.473
> 
> 标签：.net, abstract-class, multiple-inheritance

有可能实现这个功能吗？我有两个抽象类，我想强制第三个类实现这两个类中的所有抽象方法

```
public abstract class A
{
    private void MethodA()
    {
        var fool = Prop*2;
    }
    public abstract int Prop { get; }
}
public abstract class B
{
    private void MethodB()
    {
        //.... 
        SomeMethod();
        //....
    }
    public abstract void SomeMethod();
}

public class C: A, B
{
    public int Prop { .... }
    public void SomeMethod { .... }
} 
```

这里的主要问题是实现的最终类方法然后在基本抽象类中使用，而这不能通过接口来实现。所以没有解决方法吗？

我已经阅读了许多类似的 q/a 但没有回应我的问题。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T16:31:29.663

不，C# 不支持多重继承。您可以实现多个接口，但这显然不一样，因为接口不能实现任何具体行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:46:18.327

您可以通过 Mixins 在 C# 中执行此操作，它的实现方式与多重继承不同，但最终您确实获得了一个包含多个类的所有方法的对象。

它不是该语言的特性，但可以在第三方中找到。

[你可以在我对这个其他问题的回答](https://stackoverflow.com/a/9684888/677014)中阅读它，或者直接在[re-mix 的 codeplex上阅读](http://remix.codeplex.com/)

一些兴趣点：
- 您可以覆盖 Mixin 中的方法，从而在外部修改新创建的类的行为。
- 您可以在范围内创建类不同的范围。
- 您需要通过工厂创建混合对象（谢天谢地，new MyObject() 不会考虑混合）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-19T07:19:22.007

从 .NET Core 3.0 上的 C# 8.0 开始，C# 支持[接口成员的默认实现](https://docs.microsoft.com/en-us/dotnet/csharp/tutorials/mixins-with-default-interface-methods)。

```
public interface ILight
{
    void SwitchOn();
    void SwitchOff();
    bool IsOn();
}

// Basic Implementation
public class OverheadLight : ILight
{
    private bool isOn;
    public bool IsOn() => isOn;
    public void SwitchOff() => isOn = false;
    public void SwitchOn() => isOn = true;

    public override string ToString() => $"The light is {(isOn ? "on" : "off")}";
}

// Interface with default implementation
public interface ITimerLight : ILight
{
    // defines default implementation
    public async Task TurnOnFor(int duration)
    {
        Console.WriteLine("Using the default interface method for the ITimerLight.TurnOnFor.");
        SwitchOn();
        await Task.Delay(duration);
        SwitchOff();
        Console.WriteLine("Completed ITimerLight.TurnOnFor sequence.");
    }
}

// Implementation with interface
public class OverheadLight : ITimerLight
{
    private bool isOn;
    public bool IsOn() => isOn;
    public void SwitchOff() => isOn = false;
    public void SwitchOn() => isOn = true;

    public override string ToString() => $"The light is {(isOn ? "on" : "off")}";

    // Automatically gets the interface implementation
    //
    // To provide your own implementation: (no use of override)
    // public async Task TurnOnFor(int duration)
    // {
    // }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T16:33:22.667

您是否尝试过使用多个接口？这可能是类似的情况： [多个派生抽象类？](https://stackoverflow.com/questions/6531041/multiple-derived-abstract-classes)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T16:34:11.913

那个具体？不，因为 C# 不支持多重继承。

您可以获得的最接近的方法是使用结合了其他两个接口的接口：

```
public interface ISomeInterfaceA
{
    int Prop { get; }
}

public interface ISomeInterfaceB
{
    void SomeMethod();
}

public interface ICombined : ISomeInterfaceA, ISomeInterfaceB
{

} 
```

然后你可能需要 type 的参数`ICombined`，但这并不能完全得到你想要的。例如，如果我要这样做：

```
public class A : ISomeInterfaceA, ISomeInterfaceB
{
  ...
} 
```

这不符合条件，因为我没有明确实现组合接口，只是它组成的两个接口。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T16:34:16.080

如果您愿意在最终类中实现功能，则可以创建接口并实现任意数量的...

# javascript - 为什么javascript日期落后一个小时？

> ID：12694420
> 
> 赞同：4
> 
> 时间：2012-10-02T16:30:25.973
> 
> 标签：javascript

嗨，我正在尝试创建一个 unix 时间戳来表示当天的最新时间（23:59:59），如下所示：

```
current_date = new Date();
end = new Date(current_date.getFullYear(), current_date.getMonth(), current_date.getDate(),23,59,59);
end = end.getTime() / 1000; 
```

当我提醒 unix 时间戳并将其转换回日期时间时，尽管它晚了一个小时并且代表 22:59:59 而不是 23:59:59。

如果我想要晚上 11 点，我必须将 24 传递给小时参数的日期函数，而不是 23，对吗？

我位于英格兰，所以我的时间应该是格林威治标准时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T16:34:09.123

`new Date()`将在您的时区创建日期，而时间戳采用 UTC。您似乎处于 BST (GMT+1) 中，因此出现非一错误。

相反，创建一个日期，然后使用`setUTCHours(23)`,`setUTCMinutes(59)`和`setUTCSeconds(59)`来获取正确的时间戳。

# iphone - 仅在 5 次左右按钮按下后触发委托方法？

> ID：12694423
> 
> 赞同：0
> 
> 时间：2012-10-02T16:30:41.623
> 
> 标签：iphone, ios, cocoa-touch, debugging, delegates

我遇到了最奇怪的问题，我什至还没有弄清楚。我有一个触发委托方法的按钮。曾几何时它工作正常，但是在对我的代码进行了一些更改之后，现在委托方法仅在我按下按钮 x 次后触发（我对代码所做的更改与连接的基础设施无关代表一起）。它因人而异，可以是 5 倍到 10 倍。我使用分析器检查内存泄漏，但没有。

我在这里粘贴的代码太多（我什至不知道从哪里开始或问题可能出在哪里），但我想知道是否有人以前遇到过这个问题，或者可能是什么原因造成的？这很奇怪，不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:35:56.943

听起来像其他一些视图正在通过按钮获取触摸事件。当触摸区域太小时（因为按钮太小或因为它被另一个视图剪辑）时，我也看到过这种类型的行为

# c# - 如何在我的网络浏览器应用程序中打开链接？

> ID：12694425
> 
> 赞同：-1
> 
> 时间：2012-10-02T16:30:57.410
> 
> 标签：c#, visual-studio-2010

![b](../Images/a0125b097bcf6c49197e0b66827a7dbe.png) ![在此处输入图像描述](../Images/75766aa7383b7acee796bf4cadda3cac.png) 嗨，我想这样做。我正在用 c# 编写一个 webbrowser 应用程序，我将设置为默认浏览器。但我有一个问题，如果我设置它不会打开来自其他程序或 html 文件的单击链接在桌面上。我怎样才能做到这一点 ？应该是这样的照片。我希望你能理解我的英语。对不起我的英语。:)

```
 private void Form1_Load(object sender, EventArgs e)
    {
        panel3.BackColor = Doga_Rhodonit.Properties.Settings.Default.themebg;

        ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(what should i write or what event should i write??); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:34:43.303

如果您的浏览器在按下链接时设置为默认值，则操作系统会将 URL 作为参数发送

```
 string URL = null;

   public static void Main(string[] args)
        {
            Console.WriteLine(args[0]);
            URL = args[0];
        }

private void Form1_Load(object sender, EventArgs e)
    {
        panel3.BackColor = Doga_Rhodonit.Properties.Settings.Default.themebg;

        ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(URL); 
```

# data-binding - 将相同的 viewModel 绑定到不同的区域但具有不同的值 Knockout Js

> ID：12694429
> 
> 赞同：0
> 
> 时间：2012-10-02T16:31:20.007
> 
> 标签：data-binding, knockout.js

我想将相同**ViewModel**的绑定应用到显示相同信息但包含不同值的不同模态框，我尝试向模态添加一个 Id 以应用这样的绑定。

`ko.applyBindings(viewModel, document.getElementById("firstModal"));` `ko.applyBindings(viewModel, document.getElementById("secondModal"));`

它绑定好，但是当我在任何一个模态中更改一个值时，它会在另一个中更改，

我的 jsFiddle [http://jsfiddle.net/SgkbD/1/](http://jsfiddle.net/SgkbD/1/)有一些我想要的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:04:56.927

为什么你不能这样做[http://jsfiddle.net/pmarshallandrew/SgkbD/19/](http://jsfiddle.net/pmarshallandrew/SgkbD/19/) 并使用相同 viemodel 的不同实例？

...这非常有效，因为您将同一视图模型的不同实例绑定到 DOM 的两个不同部分。编辑 - 更新了更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:25:40.837

首先，您的示例没有显示您所描述的内容。

要回答您的问题，这是预期的行为。这是因为您将同一个可观察对象绑定到两个不同的位置。但是因为它是同一个 observable，以任何方式更新它，那么所有引用它的绑定都会被更新。

我已经更新了您的示例以在[http://jsfiddle.net/SgkbD/8/上显示此内容](http://jsfiddle.net/SgkbD/8/)

* * *

**编辑** 在你下面的答案之后，显而易见的答案是你不能。相同的属性 那将违背淘汰赛的设计。

但是，您可以执行我在此[http://jsfiddle.net/photo_tom/SgkbD/9/](http://jsfiddle.net/photo_tom/SgkbD/9/)中所做的操作。您可以在不同的部分绑定视图模型的不同属性。

如果您想要两个不同的视图模型副本，每个副本都绑定到不同的部分，那也可以。

# java - 以 JSON 格式存储数组

> ID：12694439
> 
> 赞同：11
> 
> 时间：2012-10-02T16:32:00.637
> 
> 标签：java, json

我正在从事一个需要存储大量外部数据的研究项目。我已经选择了我从未使用过的 JSON 格式作为存储格式。我真正需要存储的是大量数据，但是我可以找到的每个 JSON 示例都嵌套在一个对象内部。例如：

```
{ "NumberList" : {
    "array" : [ 1, 2, 3, 4, 5, 6] }} 
```

是否可以只有一个数组？如：

```
"array" : [1,2,3,4,5,6] 
```

没有打开和关闭括号或周围的对象？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-08-15T16:26:59.390

接受的答案是错误的。JSON 可以以数组开头和结尾。[JSON](http://json.org)官方文档说

> JSON 建立在两种结构之上：
> 
> 1.  名称/值对的集合。在各种语言中，这被实现为对象、记录、结构、字典、哈希表、键控列表或关联数组。
> 2.  值的有序列表。在大多数语言中，这被实现为数组、向量、列表或序列。

您也可以通过[JSON 验证器](http://jsonlint.com/)看到它。

简而言之，虽然您仍然无法做到`"array" : [1,2,3,4,5,6]`，但您可以将其存储为`[1,2,3,4,5,6]`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-02T16:33:43.180

不，这就是 JSON 的格式

开/关`{ }`说这是在 json 中（我猜有点像`<html></html>`）

没有理由你不能做

```
{ "array" : [1,2,3,4,5,6] } 
```

这是说有一个称为数组的字段，其中包含一组数字

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T16:34:23.523

一个有效的 JSON 对象总是以 开头`{`和结尾`}`，并且一个数组包含在`[`和`]`中。查看[http://json.org](http://json.org)。

如果它只是您要存储的数组而不是为其存储名称属性。您可以将其存储为`[1,2,3,4,5,6]`. 例如，如果您将其存储在 RDBMS 中，您可以将列命名为`array`并将值存储为 JSON 数组。

如果您想保留属性的名称，或者可能想要拥有更多属性，则必须使用以下格式：`{"array" : [1,2,3,4,5,6]}`

# sql - 如何将值添加到现有表列

> ID：12694442
> 
> 赞同：0
> 
> 时间：2012-10-02T16:32:27.550
> 
> 标签：sql, sql-server

我有一个表，其中有一个名为 student id 的列，并且在该列中我想像 SN + userid 一样插入。但是我知道如何创建一个新列并执行此操作，但我想在用户时将其添加到现有列中被插入。

```
ALTER TABLE [dbo].[Profile_Master]
Add [new] as ('SN'+CONVERT([varchar] (10),[UserId],(0))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:37:37.583

在 SQL Server 中，您可以使用触发器来执行此操作：

[http://msdn.microsoft.com/en-us/library/aa258254%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa258254%28v=sql.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:42:08.340

您的解决方案已经符合您的要求：您正在创建一个计算列。

因此，它将适用于现有记录和未来创建的新记录。

# java - 是否有 Ant 的 Maven 模拟 任务？

> ID：12694443
> 
> 赞同：0
> 
> 时间：2012-10-02T16:32:29.857
> 
> 标签：java, maven, ant

需要 jar 一个特定的目录并将其放置到指定的文件夹中。以前它是由 ant 的任务执行的：

```
<jar destfile="${dir}/mainlib.jar" basedir="${lib}" excludes="**/*.java" /> 
```

maven有类似的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:34:14.040

是的，您可以使用 jar 插件，请参阅： http: [//maven.apache.org/plugins/maven-jar-plugin/](http://maven.apache.org/plugins/maven-jar-plugin/)和[http://maven.apache.org/plugins/maven-jar-plugin/usage.html](http://maven.apache.org/plugins/maven-jar-plugin/usage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:35:02.120

您可以通过将具有自定义配置的执行绑定到阶段来使用[, 的`jar`目标。`maven-jar-plugin`](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html)`package`

或者，您可以只使用 maven-antrun-plugin 在您的 Maven 构建中运行任意 Ant 命令。

# c# - 动态 LINQ 嵌套选择

> ID：12694444
> 
> 赞同：1
> 
> 时间：2012-10-02T16:32:37.813
> 
> 标签：c#, linq, entity-framework, dynamic-linq

我正在尝试提出一个动态 LINQ 查询，它可以让我从嵌套实体集合中选择属性。我想获取一个角色列表，其中包含每个角色的一些相关用户信息。当然，我实际上会返回角色信息，但我没有在这个示例中使用它，因为它是微不足道的。

此 LINQ 查询为我提供了所需的信息：

```
ROLES.Select(r => new { ID = r.ID, USER_ROLES = r.USER_ROLES.Select(ur => new { ID = ur.ID, USER = new { ID = ur.USER.ID, USERNAME = ur.USER.USERNAME } } ) }) 
```

结果将被序列化为 JSON 并应包含：

```
[
  {ID: 1, USER_ROLES: [
    {ID: 100, USER: {ID: 3, USERNAME: 'code0100fun'} }
  ] },
  {ID: 2, USER_ROLES: [
    {ID: 100, USER: {ID: 3, USERNAME: 'code0100fun'} },
    {ID: 101, USER: {ID: 4, USERNAME: 'somedude'   } }
  ] }
] 
```

对此的动态 LINQ (System.Linq.Dynamic) 查询是什么样的？

# xml - 从 XSLT 中的父节点获取值

> ID：12694446
> 
> 赞同：1
> 
> 时间：2012-10-02T16:32:42.713
> 
> 标签：xml, xslt, parent-child

我正在尝试获取父母的社会保障。我尝试了此代码，但它返回空，但我知道该值不为空。

```
<xsl:call-template name="render-Employee">
    <xsl:with-param name="ssno" select="normalize-space(SocialSecurityNumber)"></xsl:with-param>
    <xsl:with-param name="firstName" select="normalize-space(FirstName)"></xsl:with-param>
    <xsl:with-param name="middleName" select="normalize-space(MiddleName)"></xsl:with-param>
    <xsl:with-param name="lastName" select="normalize-space(LastName)"></xsl:with-param>
    <xsl:with-param name="creationDate" select="ChangeDate"></xsl:with-param>
  </xsl:call-template>
  <xsl:for-each select="Dependents">
    <xsl:for-each select="Dependent">
      <xsl:call-template name="render-Dependent">
        <xsl:with-param name="recordType" select="'BN'" />
        <xsl:with-param name="employeeSsno" select="normalize-space(ancestor::Employee[1]/@SocialSecurityNumber)"/> 
```

示例 xml

```
<Employee>
    <EntityKey>
      <EntitySetName>Employees</EntitySetName>
      <EntityContainerName>...</EntityContainerName>
      <EntityKeyValues>
        <EntityKeyMember>
          <Key>EmployeeId</Key>
          <Value xsi:type="xsd:int">873</Value>
        </EntityKeyMember>
        <EntityKeyMember>
          <Key>CompanyId</Key>
          <Value xsi:type="xsd:int">33</Value>
        </EntityKeyMember>
      </EntityKeyValues>
    </EntityKey>
    <Dependents>
      <Dependent>
        <EntityKey>
          ....
        </EntityKeyValues>
        </EntityKey>
        ...
        <SocialSecurityNumber>123456789</SocialSecurityNumber>
        ...
      </Dependent>
    </Dependents>
    <EmployeeId>873</EmployeeId>
    ...
    <SocialSecurityNumber>000000000</SocialSecurityNumber>
    ...
  </Employee> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:46:06.720

你的 XPath 表达式说

```
ancestor::Employee[1]/@SocialSecurityNumber 
```

但在您的示例中，XML`SocialSecurityNumber`是一个元素，而不是一个属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:48:02.337

就目前而言，Employees SSN 是一个元素，而不是一个属性，因此您需要将 xpath 更改为

```
select="normalize-space(ancestor::Employee[1]/SocialSecurityNumber/text())" 
```

# openssl - openssl中rsa加密的校验和验证？

> ID：12694447
> 
> 赞同：0
> 
> 时间：2012-10-02T16:32:46.980
> 
> 标签：openssl, rsa

OpenSSL 中的 rsa 加密方法是否提供某种校验和验证？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:45:19.110

我认为您的问题最好发布在 crypto.stackexchange.com 上。

也就是说，答案是......有点。OpenSSL 符合 PKCS#1 并且 PKCS#1 填充不使用校验和，但是校验和确实需要符合某些标准，我会说它具有简单的奇偶校验位样式校验和的效果。

OAEP 填充实际上在其中使用加密哈希，以提供更精细的验证。

# google-chrome - Chrome、tabindex 和单选按钮的问题

> ID：12694450
> 
> 赞同：4
> 
> 时间：2012-10-02T16:33:02.647
> 
> 标签：google-chrome, radio-button, tabindex

默认情况下[，Chrome 似乎没有在单选按钮上注册 tabindex 。](http://jsfiddle.net/y2pke/1/)

如果您单击其中一个单选按钮，然后按*tab*，则 chrome 将聚焦页面中的第*一个链接*。
如果单击*另一种类型的*输入元素，他将按*预期*继续在表单中。

[如果您将 tabindex 放在任何地方](http://jsfiddle.net/y2pke/3/)，表单将按预期工作，除非您选择（*单击*）单选按钮，然后*制表符*将选择第**一个**表单元素。

如何重现与 IE/FF 相同的体验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T16:38:11.730

我也遇到过这个问题。
我发现如果你给每个单选按钮它自己的
~ name=unique
~ name=unique2
~ name=unique3
，tabindex 就可以工作。
查看此网站： [表单技巧：设置跳位顺序](http://www.boogiejack.com/form_trick2.html)
您可以看到他如何为所有单选按钮设置不同的名称值。

希望有帮助，戴安娜

# javascript - 不同文化中的 JavaScript parseFloat

> ID：12694455
> 
> 赞同：62
> 
> 时间：2012-10-02T16:33:24.067
> 
> 标签：javascript, culture

我对 JavaScript 的 parseFloat 函数在世界不同地区的默认行为有疑问。

在美国，如果你在字符串“123.34”上调用 parseFloat，你会得到一个浮点数 123.34。

如果我在瑞典或巴西开发代码并且他们使用逗号而不是句点作为小数分隔符，则 parseFloat 函数是否需要“123,34”或“123.34”。

请注意，我不是在问如何在美国解析不同文化的数字格式。我在问瑞典或巴西的 parseFloat 的行为是否与美国内部的行为相同，或者它是否期望本地格式的数字？或者为了更好地考虑这一点，巴西/瑞典的开发人员是否必须在从文本框中提取文本后使用 parseFloat 之前将字符串转换为英文格式？

如果这没有意义，请告诉我。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-02T16:36:59.057

`parseFloat`不使用您的语言环境的定义，而是使用十进制文字的定义。

它只解析`.`不`,`

我是巴西人，在解析十进制数字之前，我必须用点替换逗号。

[parseFloat 规范](http://es5.github.com/#x15.1.2.3)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-02T16:38:51.633

不，[`parseFloat`指定](http://ecma-international.org/ecma-262/5.1/#sec-15.1.2.3)为 parse [`DecimalLiterals`](http://ecma-international.org/ecma-262/5.1/#sec-A.2)，它使用点作为小数分隔符。它不依赖于当前环境的区域设置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T16:43:50.557

不仅仅是瑞典/巴西。F.ex 在美国，他们经常添加大量逗号，例如`$5,762,325.25`.

该`parseFloat`函数本质上处理小数，而不是语言环境字符串。

一般来说，JavaScript 有时可以将通用字符串/数字/日期转换为区域设置友好的格式，但反之则不行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-04T17:19:27.683

如果您确定它是巴西格式，只需在解析之前将数字转换为美国格式。

```
function parseItalianNumber(stringNum) {
    return parseFloat(stringNum.replace(".","").replace(",","."));
} 
```

在意大利，我们也使用 . 作为千位分隔符。这会删除任何千位分隔符，以防万一（您不希望周围有很多点），然后在调用 parseFloat 之前将逗号转换为点。

# javascript - 在 javascript 中使用带换行符的字符串

> ID：12694461
> 
> 赞同：2
> 
> 时间：2012-10-02T16:33:46.097
> 
> 标签：javascript, jinja2

我正在使用模板引擎并具有以下 JavaScript 代码

```
 <script>
    alert('{{entity.body}}');
 </script> 
```

不幸的是，正文有换行符，因此脚本会引发语法错误，因为它正在寻找`\`多行字符串中的 a。处理这个问题的标准方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:36:15.630

根据您的模板语言，您可以将值传递给“过滤器”。默认情况下，他们期望 HTML 环境。

我从未听说过“Jinja”，但它有过滤器。

```
alert('{{entity.body | replace("\n", "\\n")}}'); 
```

或者编写一个自定义过滤器来满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:39:46.580

你可以

```
<script id="entity_body" type="text/pain">{{entity.body}}</script> 
```

接着：

```
alert( document.getElementById('entity_body').innerHTML ); 
```

因此，您将输出放在非执行脚本博客中，然后使用 JavaScript 检索该文本。

# ruby-on-rails - 循环数组创建 HTML 元素

> ID：12694464
> 
> 赞同：0
> 
> 时间：2012-10-02T16:34:02.010
> 
> 标签：ruby-on-rails

使用 Ruby on Rails 3.2。我正在尝试基于定义的数组创建多个隐藏字段标记。下面是我的代码：

```
# shop.rb
...
ADDRESS_COMPONENTS = ['lat', 'lng', 'name']
...

# shops_helper.rb
module ShopsHelper
  def address_components_hidden_fields
    Shop::ADDRESS_COMPONENTS.each do |address_component|
      hidden_field_tag(address_component, "")
    end
  end
end

# _form.html.erb
<%= address_components_hidden_fields %> 
```

输出是：

```
['lat', 'lng', 'name'] 
```

我期望输出是：

```
<input type='hidden' name='lat' id='lat' value='' />
<input type='hidden' name='lng' id='lng' value='' />
<input type='hidden' name='name' id='name' value='' /> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:42:19.937

您需要将`hidden_field_tag`助手连接在一起。

```
module ShopsHelper
  def address_components_hidden_fields
    Shop::ADDRESS_COMPONENTS.map do |address_component|
      hidden_field_tag(address_component, "")
    end.join("\n")
  end
end 
```

`map`注意和的用法`join`。

# python - 在 pyqt4 qobject 类中连接 pyqt4 信号

> ID：12694474
> 
> 赞同：0
> 
> 时间：2012-10-02T16:34:21.293
> 
> 标签：python, signals, pyqt4, slot

我有两节课；一个用于我的窗口，一个用于我的控制对象

```
class window(baseClass, testForm):
    scanStarted = QtCore.pyqtSignal(str)
    def __init__(self,parent=None):
        super(window, self).__init__(parent)
        self.setupUi(self)

        #other window setup
        self._scanner.pushScan.clicked.connect(self._scanClicked)

    def _scanClicked(self):
        self.scanStarted.emit( self._scanner.getTextData() ) 
```

和我的控制对象

```
class vis(QtCore.QObject):
    def __init__(self):
        self._oreList = []

        self._w = window()
        self._w.scanStarted.connect(self._scanOre)

    def _scanOre(self, rawText):
        print "main ->", rawText 
```

当使用 QtCore.QObject 作为我的参考时，这个信号不会连接到 _scanOre。当我切换对 python 'object' 的引用时，它会正常工作。我一直在试图弄清楚为什么它不能使用 QtCore.QObject 类型进行连接。

无论如何，信号也将在窗口类中连接得很好。

我尝试为 _scanOre 提供 @QtCore.pyqtSlot(str, name='scanGo') 并将 name 参数也添加到信号创建中。我不确定我在这里缺少什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:42:01.600

您忘记初始化`QObject`：

```
class vis(QtCore.QObject):
    def __init__(self, parent=None):
        super(vis, self).__init__(parent) # you are missing this line
                                          # also the `parent` arg
        self._oreList = []

        self._w = window.window()
        self._w.scanStarted.connect(self._scanOre)

    def _scanOre(self, rawText):
        print "main ->", rawText 
```

# c - C程序无法创建输出文本文件

> ID：12694476
> 
> 赞同：0
> 
> 时间：2012-10-02T16:34:30.107
> 
> 标签：c, file, file-io, stdio

我的一个朋友需要在他的一个课程中使用 MATLAB，所以他打电话给我（计算机科学专业的）并问我是否可以教他 C。我熟悉 C++，所以我也熟悉一般语法，但必须阅读 C 的 IO 库。

我正在创建一些简单的 IO 程序给我的朋友看，但是我的第三个程序给我带来了麻烦。当我使用 Eclipse（使用 CDT）在我的机器上运行程序时，Eclipse 的控制台会产生一个有问题的输出，而不是提示我输入数据，它会获取输入，然后使用 FAILURE 一次打印所有内容。

该程序应该从用户那里获取文件名，创建文件并写入文件，直到用户输入一个空行。

当我通过控制台（g++ files2.c）在我的机器上编译/运行它时，系统会提示我正确输入数据，但出现故障，并且没有输出文件。

我认为错误在于我如何使用 char 数组，因为使用 scanf 获取文件名将创建一个功能文件（可能是因为它忽略了空格），但不会进入 while 循环。

```
#include <stdio.h>

#define name_length 20
#define line_size 80

int main() {
  FILE * write_file;                    // pointer to file you will write to
  char filename[name_length];           // variable to hold the name of file
  char string_buffer[line_size];        // buffer to hold your text

  printf("Filename: ");                 // prompt for filename

  fgets(filename, name_length, stdin);  // get filename from user

  if (filename[name_length-1] == '\n')  // if last char in stream is newline,
    {filename[name_length-1] = '\0';}   // remove it

  write_file = fopen(filename, "w");    // create/overwrite file user named

  if (!write_file) {printf("FAILURE");} // failed to create FILE *

  // inform user how to exit
  printf("To exit, enter a blank line (no spaces)\n");

  // while getting input, print to file
  while (fgets(string_buffer, line_size, stdin) != NULL) {
    fputs(string_buffer, write_file);
    if (string_buffer[0] == '\n') {break;}
  }

  fclose(write_file);
  return 0;
} 
```

我应该如何着手修复程序？我几乎没有发现用户终止的输入被写入文件。

现在，请原谅我，我有几个文件要从我大学的 UNIX 服务器上删除，我不能按名称指定它们，因为它们是用复杂的文件名创建的......

编辑 - - -

就像我说的，我能够使用

```
scanf("%s", filename); 
```

获得一个工作文件名（没有换行符）。但是，无论我是否在 while 循环中使用 scanf 或 fgets，如果我将它们与 scanf 一起用于文件名，我都无法将任何内容写入文件，因为它不会进入 while 循环。

我应该如何重组我对文件的写入和我的 while 循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:56:03.217

您对换行符的检查是错误的；您正在查看文件名中的最后一个字符，但如果用户输入的文件名小于最大值，则可能在此之前。然后，您尝试打开名称中包含换行符的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:06:51.913

这些行似乎不正确：

```
if (filename[name_length-1] == '\n')    // if last char in stream is newline,
    {filename[name_length-1] = '\0';}   // remove it 
```

您验证 name_length - 1 个字符，在您的情况下为 19，而不考虑引入的文件名的长度。因此，如果您的文件名长度小于 18，您将不会替换字符串末尾的 '\n' 字符。显然文件名不能包含 '\n' 字符。

您需要先以 strlen() 为例获取文件名的大小。

```
if (filename[strlen(filename) - 1] == '\n')
{
    filename[strlen(filename) - 1] = '\0';
} 
```

（不要忘记包含 string.h 标头）

我希望我能够帮助我薄弱的英语。

# wso2 - 如何升级 WSO2 ESB

> ID：12694477
> 
> 赞同：1
> 
> 时间：2012-10-02T16:34:31.043
> 
> 标签：wso2, wso2esb

我正在运行 WSO2 ESB 4.0.3 并注意到 4.5 出来了。我试过搜索，但找不到任何关于如何在不破坏我更改的文件的情况下升级到新版本的信息。任何人有任何想法或指导我查看有关如何执行此操作的文件？

谢谢，贾里德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T07:17:22.110

不幸的是，没有可用的“升级”方案。我们安装了 ESB 4.5 的新副本，然后从以下目录复制了我们的配置：

*   lib/log4j.properties
*   库/核心
*   存储库/conf
*   存储库/组件/库
*   存储库/资源
*   存储库/部署/服务器/synapse-configs/default

但这些是我们知道我们进行自定义的目录。如果您不再知道您对原始 4.0.3 所做的更改，请下载一个新副本并与您当前的 ESB 实现进行比较。

注意：重要的axis2.xml 的结构发生了一些变化——因此无法按原样复制文件。只需复制其中更改的配置行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T07:22:50.413

特别是对于 ESB，如果您进行了任何更改，您需要注意以下几点。

passthru-http.properties synapse.properties nhttp.properties

在 lib/core/WEB-INF/classes 下可用的内容需要移动到 repository/conf

# php - 随机文件上的 SonataAdmin 内存

> ID：12694483
> 
> 赞同：1
> 
> 时间：2012-10-02T16:34:54.757
> 
> 标签：php, memory, symfony, symfony-sonata

我已经配置了 SonataAdmin 捆绑包，但是当我打算加载 admin/dashboard 时遇到了随机内存问题，

这是我的 2 个包含 Sonata CRUD 的实体：

```
namespace Jade\ReveBundle\Admin;

use Doctrine\Common\Collections\Collection;

use Jade\ReveBundle\Entity\Thematique;

use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Validator\ErrorElement;
use Sonata\AdminBundle\Form\FormMapper;

class ProduitAdmin extends Admin
{
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->add('titre')
            ->add('description')
        ;
    }

    protected function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper
            ->add('titre')
            ->add('description')
        ;
    }

    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper
            ->addIdentifier('id')
            ->add('titre')
            ->add('description')
        ;
    }

    public function validate(ErrorElement $errorElement, $object)
    {
        $errorElement
            ->with('titre')
                ->assertMaxLength(array('limit' => 32))
            ->end()
        ;
    }
}

namespace Jade\ReveBundle\Admin;

use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Validator\ErrorElement;
use Sonata\AdminBundle\Form\FormMapper;

class ThematiqueAdmin extends Admin
{
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->add('titre')
            ->add('description')
        ;
    }

    protected function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper
            ->add('titre')
            ->add('description')
        ;
    }

    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper
            ->addIdentifier('id')
            ->add('titre')
            ->add('description')
        ;
    }

    public function validate(ErrorElement $errorElement, $object)
    {
        $errorElement
            ->with('titre')
                ->assertMaxLength(array('limit' => 32))
            ->end()
        ;
    }
} 
```

有人知道我的问题吗？谢谢你的回答

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-07T17:00:13.807

如果错误是“ *PHP Fatal Error: Allowed memory size of xxxx bytes exhausted...* ”，则尝试增加 PHP 内存限制。Sonata 使用 Doctrine ORM，实体可能会消耗大量内存。许多信息也以开发模式存储在分析器的内存中。

文件 web/app_dev.php 和 web/app.php：

```
<?php 
ini_set('memory_limit','128M'); //or some other reasonable value
... 
```

或在 php.ini 中：

```
memory_limit = 128M 
```

# sql - 根据结果 计数拆分查询结果

> ID：12694484
> 
> 赞同：3
> 
> 时间：2012-10-02T16:34:55.897
> 
> 标签：sql, oracle, oracle10g, oracle11g

我有一个基于基本条件的查询，它将在任何一天返回 X 条记录。

我正在尝试检查基本查询的结果，然后根据 X 的总数对其应用百分比拆分并将其拆分为 2 个存储桶。每个桶将是 X 中返回的总查询结果的百分比。

例如：

*   查询 A 返回 3500 条记录。

*   如果从查询 A 返回的记录数 <= 3000，则将 3500 条记录拆分为 40% / 60% 拆分 (1,400 / 2,100)。

*   如果从查询 A 返回的记录数 >=3001 且 <=50,000，则将记录拆分为 10% / 90% 拆分等。等等。

*   我希望返回实际记录，而不仅仅是对返回一行的记录进行的数学运算，其中包含一个数字（在列中）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:13:57.253

我不确定你想如何显示结果行集的不同部分，所以我刚刚`part`在结果行集中添加了额外的 column()，其中包含`1`指示该行属于第一部分的值和`2`- 第二部分.

```
select z.*
     , case 
         when  cnt_all <= 3000 and cnt <= 40 
         then 1
         when  (cnt_all between 3001 and 50000) and (cnt <= 10) 
         then 1  
         else 2
       end part
  from (select t.*
             , 100*(count(col1) over(order by col1) / count(col1) over() )cnt 
             , count(col1) over() cnt_all
         from split_rowset t
         order by col1
        ) z 
```

[演示 #1](http://www.sqlfiddle.com/#!4/1f881/1) 行数 3000。 [演示 #2](http://www.sqlfiddle.com/#!4/31c59/1)行数 3500。

为了更好的可用性，您可以使用上面的查询创建一个视图，然后按`part`列查询该视图过滤。

[演示#3](http://www.sqlfiddle.com/#!4/d23ea/8)使用视图。

# php - 如何确定一个数组中不存在于另一个数组中的元素？

> ID：12694485
> 
> 赞同：0
> 
> 时间：2012-10-02T16:34:54.630
> 
> 标签：php, arrays

在 Ruby 中，我可以这样做：

```
fruit = ['banana','apple','tangerine','orange','lemon','lime','kiwi','mango','guava']
citrus = ['orange','lemon','lime','tangerine']
others = fruit - citrus 
```

并将`others`包含一系列非柑橘类水果。

我怎样才能在 PHP 中做到这一点？

```
$fruit = array('banana','apple','tangerine','orange','lemon','lime','kiwi','mango','guava');
$citrus = array('orange','lemon','lime','tangerine');
$others = # NOW WHAT ????? 
```

我是否需要遍历每个项目`$citrus`并找到它的偏移量`$fruit`（如果它存在于该数组中）然后取消设置它，然后使用 array_values() 来修复数组的索引？还是有更简单、更不容易出错的方法？

**请注意：**我*不是*在寻找数组的[交集](http://en.wikipedia.org/wiki/Intersection_%28set_theory%29)。我正在寻找一个[补充](http://en.wikipedia.org/wiki/Complement_%28set_theory%29)。这最初是作为询问前者的问题的副本而关闭的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T16:35:55.023

是的，有[`array_diff()`](http://php.net/array_diff)一个正是这样做的：

```
 $others = array_diff($fruit, $citrus); 
```

这会给你留下：

```
Array
(
    [0] => banana
    [1] => apple
    [6] => kiwi
    [7] => mango
    [8] => guava
) 
```

这似乎是从其他水果中减去柑橘类水果后的预期余数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T16:35:56.330

你可以使用`array_diff`

```
$fruit = array('banana','apple','tangerine','orange','lemon','lime','kiwi','mango','guava');
$citrus = array('orange','lemon','lime','tangerine');
$others = array_diff($fruit, $citrus);
var_dump($others); 
```

输出

```
array
  0 => string 'banana' (length=6)
  1 => string 'apple' (length=5)
  6 => string 'kiwi' (length=4)
  7 => string 'mango' (length=5)
  8 => string 'guava' (length=5) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:37:48.590

你可以使用[`array_diff()`](http://php.net/array_diff)：

```
 $others = array_merge(array_diff($fruit, $citrus)); 
```

您需要使用[array_merge](http://php.net/manual/en/function.array-merge.php)来排列索引。[在此处](http://codepad.org/CyWD5zqF)查看实际操作

`$others`将包含以下值：

```
Array
(
    [0] => banana
    [1] => apple
    [6] => kiwi
    [7] => mango
    [8] => guava
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T16:40:14.477

这可以通过 [array_intersect](http://www.php.net/manual/en/function.array-intersect.php)和[array_diff来完成](http://php.net/manual/en/function.array-diff.php)

```
$filter1 = "red,green,blue,yellow";         
$parts1 = explode(',', $filter1);

$filter2 = "red,green,blue";        
$parts2 = explode(',', $filter2);

$result = array_intersect($parts1 , $parts2 );
print_r($result); 
```

[**现场示例**](http://codepad.org/DXNBHuZY)

> ![在此处输入图像描述](../Images/4362b3644bdd04a64e242e87082136fb.png)

和

```
$result = array_diff($parts1 , $parts2 );

print_r($result); 
```

[**现场示例**](http://codepad.org/DFsPMcCj)

> ![在此处输入图像描述](../Images/844510ae9c6448eef889864b3c40da1b.png)

# mongodb - 如何在 MongoDB 的 $match 中使用聚合运算符（例如 $year 或 $dayOfMonth）？

> ID：12694490
> 
> 赞同：20
> 
> 时间：2012-10-02T16:35:10.183
> 
> 标签：mongodb, aggregation-framework

我有一个包含 created_date 属性的文档集合。我想通过聚合管道发送这些文档以对它们进行一些工作。理想情况下，我想在对它们进行任何其他工作之前使用 $match 过滤它们，以便我可以利用索引但是我无法弄清楚如何在我的$匹配表达式。

有一些关于如何在 $project 操作中使用运算符的示例，但我担心通过将 $project 作为我管道中的第一步，我将无法访问我的索引（MongoDB 文档表明第一个表达式必须是 $match 才能利用索引）。

样本数据：

```
{
    post_body: 'This is the body of test post 1',
    created_date: ISODate('2012-09-29T05:23:41Z')
    comments: 48
}
{
    post_body: 'This is the body of test post 2',
    created_date: ISODate('2012-09-24T12:34:13Z')
    comments: 10
}
{
    post_body: 'This is the body of test post 3',
    created_date: ISODate('2012-08-16T12:34:13Z')
    comments: 10
} 
```

我想通过一个聚合管道运行它，以获取 9 月发布的所有帖子的总评论数

```
{
    aggregate: 'posts',
    pipeline: [
         {$match:
             /*Can I use the $year/$month operators here to match Sept 2012?
             $year:created_date : 2012,
             $month:created_date : 9
             */
             /*or does this have to be 
             created_date : 
                  {$gte:{$date:'2012-09-01T04:00:00Z'}, 
                  $lt: {$date:'2012-10-01T04:00:00Z'} }
             */
         },
         {$group:
             {_id: '0',
              totalComments:{$sum:'$comments'}
             }
          }
    ]
 } 
```

这有效，但匹配失去了对更复杂查询的任何索引的访问权限：

```
{
    aggregate: 'posts',
    pipeline: [
         {$project:
              {
                   month : {$month:'$created_date'},
                   year : {$year:'$created_date'}
              }
         },
         {$match:
              {
                   month:9,
                   year: 2012
               }
         },
         {$group:
             {_id: '0',
              totalComments:{$sum:'$comments'}
             }
          }
    ]
 } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-02T18:04:07.410

正如您已经发现的那样，您不能对文档中没有的字段进行 $match （它的工作方式与 find 的工作方式完全相同），如果您首先使用 $project 那么您将失去使用索引的能力。

您可以做的是将您的努力组合起来，如下所示：

```
{
    aggregate: 'posts',
    pipeline: [
         {$match: {
             created_date : 
                  {$gte:{$date:'2012-09-01T04:00:00Z'}, 
                  $lt:  {date:'2012-10-01T04:00:00Z'} 
                  }}
             }
         },
         {$group:
             {_id: '0',
              totalComments:{$sum:'$comments'}
             }
          }
    ]
 } 
```

上面只给你九月份的聚合，如果你想聚合多个月，你可以例如：

```
{
    aggregate: 'posts',
    pipeline: [
         {$match: {
             created_date : 
                  { $gte:'2012-07-01T04:00:00Z', 
                    $lt: '2012-10-01T04:00:00Z'
                  }
         },
         {$project: {
              comments: 1,
              new_created: {
                        "yr" : {"$year" : "$created_date"},
                        "mo" : {"$month" : "$created_date"}
                     }
              }
         },
         {$group:
             {_id: "$new_created",
              totalComments:{$sum:'$comments'}
             }
          }
    ]
 } 
```

你会得到类似的东西：

```
{
    "result" : [
        {
            "_id" : {
                "yr" : 2012,
                "mo" : 7
            },
            "totalComments" : 5
        },
        {
            "_id" : {
                "yr" : 2012,
                "mo" : 8
            },
            "totalComments" : 19
        },
        {
            "_id" : {
                "yr" : 2012,
                "mo" : 9
            },
            "totalComments" : 21
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-16T06:35:39.913

让我们看一下构建一些涉及我们已经熟悉的操作的管道。因此，我们将研究以下阶段：

*   `match`- 这是过滤阶段，类似于`find`.
*   `project`
*   `sort`
*   `skip`
*   `limit`

我们可能会问自己为什么这些阶段是必要的，因为查询语言已经提供了这个功能`MongoDB`，原因是我们需要这些阶段来支持聚合框架中包含的更复杂的面向分析的功能。下面的查询简单地等于 a `find`：

```
 db.companies.aggregate([{
  $match: {
    founded_year: 2004
  }
}, ]) 

```

让我们介绍一下这个聚合管道中的一个项目阶段：

```
 db.companies.aggregate([{
  $match: {
    founded_year: 2004
  }
}, {
  $project: {
    _id: 0,
    name: 1,
    founded_year: 1
  }
}]) 

```

我们使用`aggregate`方法来实现聚合框架。聚合管道只是一个文档数组。每个文件都应规定一个特定的阶段操作员。因此，在上述情况下，我们有一个具有**两个**阶段的聚合管道。`$match`阶段是一次将文件传递到阶段`$project`。

让我们扩展到`limit`阶段：

```
 db.companies.aggregate([{
  $match: {
    founded_year: 2004
  }
}, {
  $limit: 5
}, {
  $project: {
    _id: 0,
    name: 1
  }
}]) 

```

这会在投影字段之前获得**匹配**的文档并限制为**五个。**因此，投影仅适用于**5 个**文档。假设，如果我们要做这样的事情：

```
 db.companies.aggregate([{
  $match: {
    founded_year: 2004
  }
}, {
  $project: {
    _id: 0,
    name: 1
  }
}, {
  $limit: 5
}]) 

```

这会得到**匹配**的文档并投射那些大量的文档，最终限制为**五个**。因此，投影正在处理大量文档，最终限制为**5**。这给了我们一个教训，即我们应该**将文件限制在那些绝对需要**传递到下一阶段的文件中。现在，让我们看一下`sort`阶段：

```
 db.companies.aggregate([{
  $match: {
    founded_year: 2004
  }
}, {
  $sort: {
    name: 1
  }
}, {
  $limit: 5
}, {
  $project: {
    _id: 0,
    name: 1
  }
}]) 

```

这将按名称对所有文档进行排序，并且只给出其中的**5**个。假设，如果我们要做这样的事情：

```
 db.companies.aggregate([{
  $match: {
    founded_year: 2004
  }
}, {
  $limit: 5
}, {
  $sort: {
    name: 1
  }
}, {
  $project: {
    _id: 0,
    name: 1
  }
}]) 

```

这将获取前**5 个**文档并对它们进行排序。让我们添加`skip`舞台：

```
 db.companies.aggregate([{
  $match: {
    founded_year: 2004
  }
}, {
  $sort: {
    name: 1
  }
}, {
  $skip: 10
}, {
  $limit: 5
}, {
  $project: {
    _id: 0,
    name: 1
  }
}, ]) 

```

**这将对所有**文档进行排序并跳过最初的**10 个**文档并返回给我们。我们应该尽可能`$match`早地在管道中包含阶段。要使用`$match`阶段过滤文档，我们使用与构建查询文档（过滤器）相同的语法`find()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:29:19.770

尝试这个;

```
db.createCollection("so");
db.so.remove();
db.so.insert([
{
    post_body: 'This is the body of test post 1',
    created_date: ISODate('2012-09-29T05:23:41Z'),
    comments: 48
},
{
    post_body: 'This is the body of test post 2',
    created_date: ISODate('2012-09-24T12:34:13Z'),
    comments: 10
},
{
    post_body: 'This is the body of test post 3',
    created_date: ISODate('2012-08-16T12:34:13Z'),
    comments: 10
}
]);
//db.so.find();

db.so.ensureIndex({"created_date":1});
db.runCommand({
    aggregate:"so",
    pipeline:[
        {
            $match: { // filter only those posts in september
                created_date: { $gte: ISODate('2012-09-01'), $lt: ISODate('2012-10-01') }
            }
        },
        {
            $group: {
                _id: null, // no shared key
                comments: { $sum: "$comments" } // total comments for all the posts in the pipeline
            }
        },
]
//,explain:true
}); 
```

结果是；

```
{ "result" : [ { "_id" : null, "comments" : 58 } ], "ok" : 1 } 
```

因此，您也可以修改之前的示例来执行此操作，尽管我不确定您为什么要这样做，除非您计划在管道中使用月份和年份做其他事情；

```
{
    aggregate: 'posts',
    pipeline: [
     {$match: { created_date: { $gte: ISODate('2012-09-01'), $lt: ISODate('2012-10-01') } } },
     {$project:
          {
               month : {$month:'$created_date'},
               year : {$year:'$created_date'}
          }
     },
     {$match:
          {
               month:9,
               year: 2012
           }
     },
     {$group:
         {_id: '0',
          totalComments:{$sum:'$comments'}
         }
      }
    ]
 } 
```

# c# - 数据网格不填充过去的标题

> ID：12694496
> 
> 赞同：0
> 
> 时间：2012-10-02T16:35:52.977
> 
> 标签：c#, database, silverlight, datagrid

提前感谢您的帮助。我一直在使用[此处](http://msdn.microsoft.com/en-us/library/ee707362%28v=vs.91%29.aspx)列出的教程，但遇到了问题。我正在尝试在 Silverlight 中填充数据网格，但是当我提交按钮单击时，它将返回列的标题但没有数据。我知道数据在系统中，所以我很困惑为什么它会获取标题而不是要填充的实际数据。我的 MainPage.xaml.cs 和我的数据域中的代码如下。

MainPage.xaml.cs

```
namespace SandCherryDemo
{
    public partial class MainPage : UserControl
    {
        private SandCherryViewContext _sandCherryContext = new SandCherryViewContext();

        public MainPage()
        {
            InitializeComponent();
        }

        private void StatusButton_Click(object sender, RoutedEventArgs e)
        {
            StatusButton.IsEnabled = false;
            LoadOperation<SandCherryView> loadOp = this._sandCherryContext.Load(this._sandCherryContext.GetEQPByStatusQuery(StatusValue.Text), DataLoadedCallback, null);
            SandCherryGrid.ItemsSource = loadOp.Entities;
        }

        void DataLoadedCallback(LoadOperation<SandCherryView> loadOperation)
        {
            StatusButton.IsEnabled = true;
        }
    }
} 
```

SandCherryViewService.cs

```
 [EnableClientAccess()]
    public class SandCherryViewService : LinqToEntitiesDomainService<Charter_SandCherryEntities>
    {
        [Query(IsComposable=false)]
        public IQueryable<SandCherryView> GetEQPByStatus(string status)
        {
            return this.ObjectContext.SandCherryViews.Where(e => e.StatusDescr.StartsWith(status) == true);
        }

        // TODO:
        // Consider constraining the results of your query method.  If you need additional input you can
        // add parameters to this method or create additional query methods with different names.
        // To support paging you will need to add ordering to the 'SandCherryViews' query.
        public IQueryable<SandCherryView> GetSandCherryViews()
        {
            return this.ObjectContext.SandCherryViews;
        }

        public void InsertSandCherryView(SandCherryView sandCherryView)
        {
            if ((sandCherryView.EntityState != EntityState.Detached))
            {
                this.ObjectContext.ObjectStateManager.ChangeObjectState(sandCherryView, EntityState.Added);
            }
            else
            {
                this.ObjectContext.SandCherryViews.AddObject(sandCherryView);
            }
        }

        public void UpdateSandCherryView(SandCherryView currentSandCherryView)
        {
            this.ObjectContext.SandCherryViews.AttachAsModified(currentSandCherryView, this.ChangeSet.GetOriginal(currentSandCherryView));
        }

        public void DeleteSandCherryView(SandCherryView sandCherryView)
        {
            if ((sandCherryView.EntityState != EntityState.Detached))
            {
                this.ObjectContext.ObjectStateManager.ChangeObjectState(sandCherryView, EntityState.Deleted);
            }
            else
            {
                this.ObjectContext.SandCherryViews.Attach(sandCherryView);
                this.ObjectContext.SandCherryViews.DeleteObject(sandCherryView);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:47:11.913

由于您的数据尚未加载。尝试在事件中设置`ItemsSource`您的网格-`DataLoadedCallBack`

```
void DataLoadedCallback(LoadOperation<SandCherryView> loadOperation)
{
   StatusButton.IsEnabled = true;
   SandCherryGrid.ItemsSource = loadOp.Entities;
} 
```

# java - Java - 通过带有 JSch 的 SSH 隧道执行 FTP 命令

> ID：12694499
> 
> 赞同：3
> 
> 时间：2012-10-02T16:36:05.610
> 
> 标签：java, ssh, ftp, jsch

我正在开发一个 Java 工具，它可以将文件从一个远程服务器上传到另一个服务器。

该程序将在笔记本电脑上运行。该软件需要通过 SSH 协议连接到 serverA，然后一旦连接到 serverA，它必须通过 FTP 将文件传输到 serverB。要传输的文件托管在服务器 A 上。

由于防火墙，我无法直接连接到 serverB。

这是一个摘要：

![网络架构](../Images/25726d667f1196755c51f2f7bf0b295c.png)

JSch可以做到这一点吗？类似于以下内容：

```
JSch client = new JSch();
Session session = client.getSession("login", "serverA", 22);
// test purpose
session.setConfig("StrictHostKeyChecking", "no");
session.setPassword("password");
session.connect();
channel = (ChannelExec) session.openChannel("exec");
channel.setCommand("ftp -i ftp://username:password@serverB; put file.txt; close; quit;"); 
```

**编辑**

编写脚本并将其上传到 serverA 上怎么样？

```
#!/bin/sh
ftp -n -i <<ENDOFINPUT
open serverB
user root password
cd /home/root
put xxx
close
bye
ENDOFINPUT 
```

# installation - GNU 科学图书馆链接

> ID：12694501
> 
> 赞同：1
> 
> 时间：2012-10-02T16:36:09.217
> 
> 标签：installation, makefile

我的 GNU 科学库 ( [http://www.gnu.org/software/gsl/](http://www.gnu.org/software/gsl/) ) 安装在以下路径中：/home/myname/gsl-1.6 My mlRho 1.7-stat prog ( [http://guanine.evolbio.mpg。 de/mlRho/mlRho_1.7.tgz](http://guanine.evolbio.mpg.de/mlRho/mlRho_1.7.tgz)）使用 GNU 科学库安装在：`/home/myname/MlRho_1.7`

我的操作系统：Fedora 16

mlRho 中的原始制作文件

```
cd  /home/myname/MlRho_1.7/

vim make

CC=gcc
CFLAGS= -O3 -Wall -Wshadow -pedantic -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -DVER32 \
    -I/opt/local/include/ -L/opt/local/lib/ 
```

我在 mlRho 中更改了路径

```
CC=gcc
CFLAGS= -O3 -Wall -Wshadow -pedantic -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -DVER32 \
    -I/home/myname/gsl-1.6 -L/home/myname/gsl-1.6 
```

进行更改后，我尝试运行 make，它给出了错误

```
make
gcc -O3 -Wall -Wshadow -pedantic -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -DVER32 -I/home/myname/gsl-1.6/include/ -L/home/myname/gsl-1.6/lib/     -c -o mlRho.o mlRho.c
In file included from mlRho.c:16:0:
mlComp.h:7:30: fatal error: gsl/gsl_sf_gamma.h: No such file or directory
compilation terminated.
make: *** [mlRho.o] Error 1 
```

当我进行测试时-它给了我下面的错误

```
make test

make[1]: Entering directory `/home/myname/MlRho_1.7/TestMlPi'
gcc -O3 -Wall -Wshadow -pedantic -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -DVER32 -I/opt/local/include/ -L/opt/local/lib/   -c -o testMlPi.o testMlPi.c
testMlPi.c: In function ‘main’:
testMlPi.c:62:67: warning: variable ‘sderr’ set but not used [-Wunused-but-set-variable]
testMlPi.c:62:60: warning: variable ‘sdhet’ set but not used [-Wunused-but-set-variable]
gcc -O3 -Wall -Wshadow -pedantic -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -DVER32 -I/opt/local/include/ -L/opt/local/lib/   -c -o interface.o interface.c
gcc -O3 -Wall -Wshadow -pedantic -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -DVER32 -I/opt/local/include/ -L/opt/local/lib/   -c -o eprintf.o eprintf.c
gcc -O3 -Wall -Wshadow -pedantic -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -DVER32 -I/opt/local/include/ -L/opt/local/lib/   -c -o ranNum.o ranNum.c
gcc -O3 -Wall -Wshadow -pedantic -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -DVER32 -I/opt/local/include/ -L/opt/local/lib/ -o testMlPi testMlPi.o interface.o eprintf.o ranNum.o -lm 
make[1]: Leaving directory `/home/myname/MlRho_1.7/TestMlPi'
Output from testMlPi:
pi:             5.00e-05             epsilon:             4.90e-04             -log(L): 1.40e+05
Output from mlRho:
make: ./mlRho: Command not found
make: *** [testPi] Error 127
Output from mlRho:
make: ./mlRho: Command not found
make: *** [testPi] Error 127 
```

它不知何故 GNU 库没有链接到 mlRho 程序。如何解决？

# c++ - C++ 中的 try/throw/catch：我的代码有什么问题？

> ID：12694504
> 
> 赞同：0
> 
> 时间：2012-10-02T16:36:14.880
> 
> 标签：c++, try-catch

请问你能检查这个代码吗？try/catch/throw 有什么问题？

```
#include<iostream>
using namespace std;

int get_input();

int main() {

    int number, base_in, base_out;
    bool pass = 1;

    while(pass) {

        double number, base_in, base_out;

        try {

            cout << "What's your number? ";
            number = get_input();

            pass = 0;

        }
        catch(problem_type()) {
            cout << "Please, write inputs should be integer" << endl;
        }

    }

    return 0;
}

int get_input(bool target = 1) {

    double n;
    cin >> n;

    if(n != (int)n) throw problem_type();

    if(target) {
        if(n<1) throw problem_type();
    }

    return (int)n;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:38:10.143

你按类型捕捉。喜欢

```
catch(const problem_type&){ } 
```

也就是说，如果`problem_type`是类型。我在任何地方都看不到定义……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:09:47.217

当抛出异常时，您将获得一个包含异常信息的内存对象......所以有必要将其视为`catch( const Type& error )`

为什么作为参考？想想在某些情况下可能存在的混乱状态，因此制作副本会增加复杂性和处理时间，您可能会丢失重要信息。所以这就是为什么我们把它作为参考。

只需“指向”原始数据。

# git - 如何模拟 git log --decorate 每个分支类型的不同颜色

> ID：12694510
> 
> 赞同：66
> 
> 时间：2012-10-02T16:36:53.237
> 
> 标签：git, git-config

在制作我最喜欢的 git log 视图时，我创建了这个别名：

`graph = log --pretty=format:'%Cgreen%ad%Creset %C(yellow)%h%Creset%C(yellow)%d%Creset %s %C(cyan)[%an]%Creset %Cgreen(%ar)%Creset' --date=short --graph`

这将创建一个输出，如：

![带有自己颜色的 Git 日志结果](../Images/2a2dc143064836102afa8f696a561e69.png)

我在这里缺少的是分支类型的不同颜色，例如`log --oneline --decorate --graph`.

![带有 --decorate(=short) 的 Git 日志结果](../Images/3b85f1261b0a2cc9cb6ae77f089affd1.png)

--decorate（默认使用 =short）为不同的识别分支赋予不同的颜色。分支类型`(HEAD, origin/master, origin/HEAD, master)`为青色、红色、红色、绿色。然而，我的是无色的；只用整个树枝部分的黄色着色。

***有没有办法用自己的别名为不同种类*的分支赋予不同的颜色？**

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-06-15T14:09:52.463

根据[https://stackoverflow.com/a/16844346/55948](https://stackoverflow.com/a/16844346/55948)

> 从git `%C(auto)`1.8.3 （2013 年 5 月 24 日）开始，您可以使用.`%d``git log`
> 
> 从[发行说明](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.3.txt)：
> 
> ```
>  * "git log --format" specifier learned %C(auto) token that tells Git
>    to use color when interpolating %d (decoration), %h (short commit
>    object name), etc. for terminal output.) 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:24:26.950

我不相信这是可能的。查看[git-log(1)](http://git-scm.com/docs/git-log)手册页，唯一相关的格式`--pretty`似乎是`%d`，它为您提供了所有参考名称。由于没有任何选项可以区分参考类型，因此您不能为每种类型赋予不同的颜色。

另请参阅[此问题](https://stackoverflow.com/questions/5889878/color-in-git-log)。

# mysql - 用于 node.js 的 MySQL 驱动程序与 Sphinx 一起使用

> ID：12694512
> 
> 赞同：1
> 
> 时间：2012-10-02T16:37:07.423
> 
> 标签：mysql, node.js, sphinx, npm

有哪些司机...

*   支持 MySQL 的全部或大部分特性；
*   得到积极维护；
*   是异步和支持管道；
*   **可以与[狮身人面像](http://sphinxsearch.com)**接口吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:06:53.540

我用过几个，但这是我的选择：

节点-mysql [https://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql)

维护良好并记录在案。作者是 node.js 的贡献者，也是 transloadit 的创始人之一，我相信。以及node-formidable的作者。

# iphone - cocos2d removeAllChildrenWithCleanup 崩溃

> ID：12694513
> 
> 赞同：0
> 
> 时间：2012-10-02T16:37:11.400
> 
> 标签：iphone, cocos2d-iphone

我正在开发一个 iphone 应用程序，从 CCMenu 中删除所有项目时遇到问题。问题是当调用 CCMenuItem 的选择器时，我删除了触发选择器的项目并且应用程序崩溃了。

代码（在 CCLayer 中）：

```
 -(void) clearAll
 {
    [popupMenu removeAllChildrenWithCleanup:YES];
 }
 -(void) onButtonClick:(id) sender
 {
    [self clearAll];
 }
 -(void) createButtons
 {
      CCMenuItemImage * menuItem = [CCMenuItemImage itemFromNormalImage:@"back_button.png" selectedImage:@"back_button.png" target:self selector:@selector(onButtonClick:)]; 
      [popupMenu addChild: menuItem];
 } 
```

有谁知道为什么应用程序崩溃，我该如何解决这个问题？

谢谢

更新：

崩溃消息堆栈跟踪：

```
 0x01abaabc in __NSI3 ()
 0x01a9f495 in -[NSInvocation invoke] ()
 0x0006852f in -[CCMenuItem activate] at /***/cocos2d/CCMenuItem.m:128
 0x00068d80 in -[CCMenuItemLabel activate] at /***/cocos2d/CCMenuItem.m:222
 0x00065c24 in -[CCMenu ccTouchEnded:withEvent:] at /***/cocos2d/CCMenu.m:196
 0x01b3ae99 in -[NSObject performSelector:withObject:withObject:] ()
 0x000bb44d in -[CCTouchDispatcher touches:withEvent:withTouchType:] at /***/cocos2d/Platforms/iOS/CCTouchDispatcher.m:268
 0x000bbfa3 in -[CCTouchDispatcher touchesEnded:withEvent:] at /***/cocos2d/Platforms/iOS/CCTouchDispatcher.m:337
 0x000bdd5e in -[EAGLView touchesEnded:withEvent:] at /***/cocos2d/Platforms/iOS/EAGLView.m:330
 0x009d63c0 in -[UIWindow _sendTouchesForEvent:] ()
 0x009d65e6 in -[UIWindow sendEvent:] ()
 0x009bcdc4 in -[UIApplication sendEvent:] ()
 0x009b0634 in _UIApplicationHandleEvent ()
 0x03589ef5 in PurpleEventCallback () 
```

# sql - 仅当不存在时才插入 Oracle PLSQL。

> ID：12694524
> 
> 赞同：0
> 
> 时间：2012-10-02T16:37:39.700
> 
> 标签：sql, oracle, plsql, insert

> **可能重复：**
> [如果行不存在，则 oracle 插入](https://stackoverflow.com/questions/3147874/oracle-insert-if-row-not-exists)

我正在使用下面的查询来计算某些数据的总数，但是，我希望只有在 EL_CLIENT_REC_UNITS 中首先不存在 ID 时才执行插入。谁能看到这样做的方法？

```
 INSERT INTO EL_CLIENT_REC_UNITS 
     (ID,
     EL_CLIENT_ID,
     RECORDING_ID,
     UNIT_TYPE,
     PHY_DIG_OR_TOTAL,
     CONTROLLED_PERCENTAGE,
     PERC_ADJ_UNITS_RECEIVED,
     SUM_UNITS_RECEIVED) (       
      (SELECT 
        EL_CLIENT_ID||RECORDING_ID||'CT'   AS ID,
        EL_CLIENT_ID                 AS EL_CLIENT_ID, 
        RECORDING_ID                 AS RECORDING_ID, 
        UNIT_TYPE                    AS UNIT_TYPE, 
        'Total'                      AS PHY_DIG_OR_TOTAL, 
        NULL AS CONTROLLED_PERCENTAGE,
        SUM(PERC_ADJ_UNITS_RECEIVED) AS PERC_ADJ_UNITS_RECEIVED,
        SUM(SUM_UNITS_RECEIVED)      AS SUM_UNITS_RECEIVED
    FROM EL_CLIENT_REC_UNITS
    WHERE EL_CLIENT_ID = pRow.ID
    AND UNIT_TYPE = 'Cleared'
    GROUP BY UNIT_TYPE, EL_CLIENT_ID, RECORDING_ID)
    WHERE NOT EXISTS (SELECT ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:42:01.780

试试这个

```
INSERT INTO EL_CLIENT_REC_UNITS 
     (ID,
     EL_CLIENT_ID,
     RECORDING_ID,
     UNIT_TYPE,
     PHY_DIG_OR_TOTAL,
     CONTROLLED_PERCENTAGE,
     PERC_ADJ_UNITS_RECEIVED,
     SUM_UNITS_RECEIVED)       
    SELECT * FROM
    (SELECT 
        EL_CLIENT_ID||RECORDING_ID||'CT'   AS ID,
        EL_CLIENT_ID                 AS EL_CLIENT_ID, 
        RECORDING_ID                 AS RECORDING_ID, 
        UNIT_TYPE                    AS UNIT_TYPE, 
        'Total'                      AS PHY_DIG_OR_TOTAL, 
        NULL AS CONTROLLED_PERCENTAGE,
        SUM(PERC_ADJ_UNITS_RECEIVED) AS PERC_ADJ_UNITS_RECEIVED,
        SUM(SUM_UNITS_RECEIVED)      AS SUM_UNITS_RECEIVED
    FROM EL_CLIENT_REC_UNITS
    WHERE EL_CLIENT_ID = pRow.ID
    AND UNIT_TYPE = 'Cleared'
    GROUP BY UNIT_TYPE, EL_CLIENT_ID, RECORDING_ID) INS_VALS
    WHERE NOT EXISTS (SELECT 1 FROM EL_CLIENT_REC_UNITS ELC WHERE ELC.ID =  INS_VALS.ID ); 
```

# silverlight - Sketchflow 构建但未在 IE 中显示

> ID：12694525
> 
> 赞同：0
> 
> 时间：2012-10-02T16:37:44.363
> 
> 标签：silverlight, sketchflow

我有一个构建良好的草图流应用程序。我再次运行它并在 IE 中查看它。它显示了消失的silverlight加载标志。

我究竟做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:56:14.073

这通常意味着您的应用程序中引发了异常。状态栏中有时会出现一个黄色警告图标，可以显示发生了什么。否则，您可以在 VS 中打开并运行该应用程序以找出异常是什么。

# sql - 如何从两个表中选择平衡的随机样本记录？

> ID：12694526
> 
> 赞同：0
> 
> 时间：2012-10-02T16:37:44.020
> 
> 标签：sql, postgresql

为了训练机器学习模型，我必须检索一个用户样本，其中包括平衡数量的当前用户和以前的用户。Tha 数据库由表 all_users 和 front_users 组成。

如果样本不平衡（100 条记录），以下查询将返回具有所需列的记录：

```
SELECT t1.user_property1, t2.user_property2, t3.valid_to FROM additional_info t1 LEFT JOIN all_users t2 ON t1.user_ID = t2.user_ID LEFT JOIN former_users t3 ON t1.user_ID = t3.user_ID ORDER BY random() LIMIT 100 
```

为了获得平衡的样本，应该有一半的用户记录存储在表former_users中，一半来自表all_users，同时不在表former_users中（否则样本不会平衡）。

有谁知道，从表all_users和former_users以及表additional_info的附加属性中检索平衡随机样本的最方便方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:52:24.060

您可能会考虑做的一件事是：

```
Query 1 - SELECTS random non-former users joined to additional_info with a LIMIT of 50
Query 2 - SELECTS random former users joined to additional_info with a LIMIT of 50 
```

然后将结果与 UNION 结合起来

```
(Query 1) UNION (Query 2) 
```

这将为您提供两个标准的随机结果，总共有 100 个用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:52:29.857

做了以下事情：

```
(SELECT t1.user_property1, t2.user_property2, t3.valid_to FROM additional_info t1 LEFT JOIN all_users t2 ON t1.user_ID = t2.user_ID INNER JOIN former_users t3 ON t1.user_ID = t3.user_ID ORDER BY random() LIMIT 50)
UNION
(SELECT t1.user_property1, t2.user_property2, NULL FROM additional_info t1 LEFT JOIN all_users t2 ON t1.user_ID = t2.user_ID WHERE t1.user NOT IN (SELECT user_ID FROM former_users) ORDER BY random() LIMIT 50) 
```

但正在寻找更好的解决方案。

# playframework-2.0 - 在表单约束中访问当前请求

> ID：12694529
> 
> 赞同：2
> 
> 时间：2012-10-02T16:37:49.560
> 
> 标签：playframework-2.0

我想使用有关当前用户的数据来验证 Play 2 Scala 密码更新表单。想象一个表单，它再次收集当前密码、新密码和新密码。在验证此表单时，应该检查“当前密码”的值是否实际与当前用户的实际密码匹配。在验证中，我需要访问当前用户——这需要访问当前请求。显然，当我定义表单时，请求不在范围内：

```
val updatePasswordForm = Form(mapping(
"currPassword" -> password,
"newPassword" -> password,
"newPasswordAgain" -> password)(PasswordUpdate.apply)(PasswordUpdate.unapply)
verifying ("passwordsMustMatch", update => update.newPassword == update.newPasswordAgain)
verifying ("incorrectCurrentPassword", pws => authenticate(GAH NEED CURRENT USERS EMAIL, update.currPassword))) 
```

我完全理解在表单验证中具有请求访问权限会为表单引入不需要的依赖项。我只是好奇人们是否有聪明的方法来解决这个问题。到目前为止，我唯一的方法是这样的：

```
def updatePassword = Action { implicit req =>
  validateCurrentPasswordMatches(updatePasswordForm).bindFromRequest.fold(
  .... 
```

我想要一种将这个依赖于请求的验证打包在共享表单声明中的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:12:53.110

您可以使用具有隐式定义参数的**函数获取更新密码表单，如下所示：**`Request`

```
def updatePasswordForm(implicit request: Request[_]) = Form(
    // define form here
).verifying(...) 
```

请求参数是从函数隐式传递的`bindFromRequest`。

该`authenticate`函数现在可以访问（再次隐式定义的）请求参数。您需要将其重新定义为

```
def authenticate( /* old parameters */ )(implicit request: Request[_]): Boolean = {
    // implementation with access to the Request
} 
```

# javascript - 什么是 TypeScript，我为什么要用它来代替 JavaScript？

> ID：12694530
> 
> 赞同：1850
> 
> 时间：2012-10-02T16:37:58.910
> 
> 标签：javascript, typescript

你能描述一下 TypeScript 语言是什么吗？

JavaScript 或可用库不能做什么，这让我有理由考虑它？

* * *

## 回答 #1

> 赞同：1397
> 
> 时间：2012-10-02T16:41:28.717

> 我最初在 TypeScript 还很热门的时候写了这个答案。五年后，这是一个不错的概述，但请查看下面[Lodewijk 的答案](https://stackoverflow.com/a/35048303/6521)以获得更深入的了解

## 1000英尺的视野...

[TypeScript](http://www.typescriptlang.org)是 JavaScript 的超集，主要提供可选的静态类型、类和接口。一大好处是使 IDE 能够提供更丰富的环境，以便*在您键入代码*时发现常见错误。

要了解我的意思，请观看[Microsoft 的](http://channel9.msdn.com/posts/Anders-Hejlsberg-Introducing-TypeScript)语言介绍视频。

对于大型 JavaScript 项目，采用 TypeScript 可能会产生更强大的软件，同时仍可部署在运行常规 JavaScript 应用程序的地方。

它是开源的，但如果您使用受支持的 IDE，您只能在键入时获得智能 Intellisense。最初，这只是微软的 Visual Studio（在[Miguel de Icaza](http://tirania.org/blog/archive/2012/Oct-01.html)的博客文章中也有提及）。如今，[其他 IDE 也提供 TypeScript 支持](https://github.com/Microsoft/TypeScript/wiki/TypeScript-Editor-Support)。

## 还有其他类似的技术吗？

有[CoffeeScript](http://coffeescript.org/)，但这确实有不同的目的。恕我直言，CoffeeScript 为人类提供了可读性，但 TypeScript 还通过其可选的静态类型为*工具提供了深度可读性（请参阅这篇*[最近的博客文章](http://www.hanselman.com/blog/WhyDoesTypeScriptHaveToBeTheAnswerToAnything.aspx)以获得更多评论）。还有[Dart](http://en.wikipedia.org/wiki/Dart_%28programming_language%29)，但它完全替代了 JavaScript（尽管它[可以生成 JavaScript 代码](http://www.dartlang.org/docs/dart-up-and-running/contents/ch04-tools-dart2js.html)）

## 例子

例如，这里有一些 TypeScript（你可以在[TypeScript Playground](http://www.typescriptlang.org/Playground/)中使用它）

```
class Greeter {
    greeting: string;
    constructor (message: string) {
        this.greeting = message;
    }
    greet() {
        return "Hello, " + this.greeting;
    }
} 
```

这是它会生成的 JavaScript

```
var Greeter = (function () {
    function Greeter(message) {
        this.greeting = message;
    }
    Greeter.prototype.greet = function () {
        return "Hello, " + this.greeting;
    };
    return Greeter;
})(); 
```

Notice how the TypeScript defines the type of member variables and class method parameters. This is removed when translating to JavaScript, but used by the IDE and compiler to spot errors, like passing a numeric type to the constructor.

It's also capable of inferring types which aren't explicitly declared, for example, it would determine the `greet()` method returns a string.

## Debugging TypeScript

Many browsers and IDEs offer direct debugging support through sourcemaps. See this Stack Overflow question for more details: [Debugging TypeScript code with Visual Studio](https://stackoverflow.com/questions/12711826/debugging-typescript-code-with-visual-studio)

## Want to know more?

I originally wrote this answer when TypeScript was still hot-off-the-presses. Check out [Lodewijk's answer](https://stackoverflow.com/a/35048303/6521) to this question for some more current detail.

* * *

## 回答 #2

> 赞同：1154
> 
> 时间：2016-01-27T21:23:25.860

# TypeScript's relation to JavaScript

> TypeScript is a typed superset of JavaScript that compiles to plain JavaScript - [typescriptlang.org](https://www.typescriptlang.org).

JavaScript is a programming language that is developed by [ECMA's Technical Committee 39](https://tc39.es), which is a group of people composed of many different stakeholders. TC39 is a committee hosted by [ECMA](https://www.ecma-international.org): an internal standards organization. JavaScript has many different implementations by many different vendors (e.g. Google, Microsoft, Oracle, etc.). The goal of JavaScript is to be the lingua franca of the web.

TypeScript is a superset of the JavaScript language that has a single open-source compiler and is developed mainly by a single vendor: Microsoft. The goal of TypeScript is to help catch mistakes early through a type system and to make JavaScript development more efficient.

Essentially TypeScript achieves its goals in three ways:

1.  **Support for modern JavaScript features** - The JavaScript language (not the runtime) is standardized through the [ECMAScript](https://en.wikipedia.org/wiki/ECMAScript) standards. Not all browsers and JavaScript runtimes support all features of all ECMAScript standards (see this [overview](https://kangax.github.io/compat-table/es6/)). TypeScript allows for the use of many of the latest ECMAScript features and translates them to older ECMAScript targets of your choosing (see the list of [compile targets](https://www.typescriptlang.org/docs/handbook/compiler-options.html) under the `--target` compiler option). This means that you can safely use new features, like modules, lambda functions, classes, the spread operator and destructuring, while remaining backwards compatible with older browsers and JavaScript runtimes.

2.  **Advanced type system** - The type support is not part of the ECMAScript standard and will likely never be due to the interpreted nature instead of compiled nature of JavaScript. The type system of TypeScript is incredibly rich and includes: interfaces, enums, hybrid types, generics, union/intersection types, access modifiers and much more. The [official website](https://www.typescriptlang.org) of TypeScript gives an overview of these features. Typescript's type system is on-par with most other typed languages and in some cases arguably more powerful.

3.  **Developer tooling support** - TypeScript's compiler can run as a background process to support both incremental compilation and IDE integration such that you can more easily navigate, identify problems, inspect possibilities and refactor your codebase.

# TypeScript's relation to other JavaScript targeting languages

TypeScript has a unique philosophy compared to other languages that compile to JavaScript. JavaScript code is valid TypeScript code; TypeScript is a superset of JavaScript. You can almost rename your `.js` files to `.ts` files and start using TypeScript (see "JavaScript interoperability" below). TypeScript files are compiled to readable JavaScript, so that migration back is possible and understanding the compiled TypeScript is not hard at all. TypeScript builds on the successes of JavaScript while improving on its weaknesses.

On the one hand, you have future proof tools that take modern ECMAScript standards and compile it down to older JavaScript versions with Babel being the most popular one. On the other hand, you have languages that may totally differ from JavaScript which target JavaScript, like CoffeeScript, Clojure, Dart, Elm, Haxe, Scala.js, and a whole host more (see this [list](https://github.com/jashkenas/coffeescript/wiki/List-of-languages-that-compile-to-JS)). These languages, though they might be better than where JavaScript's future might ever lead, run a greater risk of not finding enough adoption for their futures to be guaranteed. You might also have more trouble finding experienced developers for some of these languages, though the ones you will find can often be more enthusiastic. Interoperability with JavaScript can also be a bit more involved, since they are farther removed from what JavaScript actually is.

TypeScript sits in between these two extremes, thus balancing the risk. TypeScript is not a risky choice by any standard. It takes very little effort to get used to if you are familiar with JavaScript, since it is not a completely different language, has excellent JavaScript interoperability support and it has seen a lot of adoption recently.

# Optionally static typing and type inference

JavaScript is dynamically typed. This means JavaScript does not know what type a variable is until it is actually instantiated at run-time. This also means that it may be too late. TypeScript adds type support to JavaScript and catches type errors during compilation to JavaScript. Bugs that are caused by false assumptions of some variable being of a certain type can be completely eradicated if you play your cards right (how strict you type your code or if you type your code at all is up to you).

TypeScript makes typing a bit easier and a lot less explicit by the usage of type inference. For example: `var x = "hello"` in TypeScript is the same as `var x : string = "hello"`. The type is simply inferred from its use. Even it you don't explicitly type the types, they are still there to save you from doing something which otherwise would result in a run-time error.

TypeScript is optionally typed by default. For example `function divideByTwo(x) { return x / 2 }` is a valid function in TypeScript which can be called with *any* kind of parameter, even though calling it with a string will obviously result in a *runtime* error. Just like you are used to in JavaScript. This works, because when no type was explicitly assigned and the type could not be inferred, like in the divideByTwo example, TypeScript will implicitly assign the type `any`. This means the divideByTwo function's type signature automatically becomes `function divideByTwo(x : any) : any`. There is a compiler flag to disallow this behavior: `--noImplicitAny`. Enabling this flag gives you a greater degree of safety, but also means you will have to do more typing.

Types have a cost associated with them. First of all, there is a learning curve, and second of all, of course, it will cost you a bit more time to set up a codebase using proper strict typing too. In my experience, these costs are totally worth it on any serious codebase you are sharing with others. [A Large Scale Study of Programming Languages and Code Quality in Github](https://cs.uwaterloo.ca/%7Em2nagapp/courses/CS846/1171/papers/ray_fse14.pdf) suggests that *"statically typed languages, in general, are less defect prone than the dynamic types, and that strong typing is better than weak typing in the same regard".*

It is interesting to note that this very same paper finds that TypeScript is less error-prone than JavaScript:

> For those with positive coefficients we can expect that the language is associated with, ceteris paribus, a greater number of defect fixes. These languages include C, C++, *JavaScript*, Objective-C, Php, and Python. The languages Clojure, Haskell, Ruby, Scala, and *TypeScript*, all have negative coefficients implying that these languages are less likely than the average to result in defect fixing commits.

# Enhanced IDE support

The development experience with TypeScript is a great improvement over JavaScript. The IDE is informed in real-time by the TypeScript compiler on its rich type information. This gives a couple of major advantages. For example, with TypeScript, you can safely do refactorings like renames across your entire codebase. Through code completion, you can get inline help on whatever functions a library might offer. No more need to remember them or look them up in online references. Compilation errors are reported directly in the IDE with a red squiggly line while you are busy coding. All in all, this allows for a significant gain in productivity compared to working with JavaScript. One can spend more time coding and less time debugging.

There is a wide range of IDEs that have excellent support for TypeScript, like Visual Studio Code, WebStorm, Atom and Sublime.

# Strict null checks

Runtime errors of the form `cannot read property 'x' of undefined` or `undefined is not a function` are very commonly caused by bugs in JavaScript code. Out of the box TypeScript already reduces the probability of these kinds of errors occurring, since one cannot use a variable that is not known to the TypeScript compiler (with the exception of properties of `any` typed variables). It is still possible though to mistakenly utilize a variable that is set to `undefined`. However, with the 2.0 version of TypeScript you can eliminate these kinds of errors all together through the usage of non-nullable types. This works as follows:

With strict null checks enabled (`--strictNullChecks` compiler flag) the TypeScript compiler will not allow `undefined` to be assigned to a variable unless you explicitly declare it to be of nullable type. For example, `let x : number = undefined` will result in a compile error. This fits perfectly with type theory since `undefined` is not a number. One can define `x` to be a sum type of `number` and `undefined` to correct this: `let x : number | undefined = undefined`.

Once a type is known to be nullable, meaning it is of a type that can also be of the value `null` or `undefined`, the TypeScript compiler can determine through control flow based type analysis whether or not your code can safely use a variable or not. In other words when you check a variable is `undefined` through for example an `if` statement the TypeScript compiler will infer that the type in that branch of your code's control flow is not anymore nullable and therefore can safely be used. Here is a simple example:

```
let x: number | undefined;
if (x !== undefined) x += 1; // this line will compile, because x is checked.
x += 1; // this line will fail compilation, because x might be undefined. 
```

During the build, 2016 conference co-designer of TypeScript Anders Hejlsberg gave a detailed explanation and demonstration of this feature: [video](https://channel9.msdn.com/Events/Build/2016/B881) (from 44:30 to 56:30).

# Compilation

To use TypeScript you need a build process to compile to JavaScript code. The build process generally takes only a couple of seconds depending of course on the size of your project. The TypeScript compiler supports incremental compilation (`--watch` compiler flag) so that all subsequent changes can be compiled at greater speed.

The TypeScript compiler can inline source map information in the generated .js files or create separate .map files. Source map information can be used by debugging utilities like the Chrome DevTools and other IDE's to relate the lines in the JavaScript to the ones that generated them in the TypeScript. This makes it possible for you to set breakpoints and inspect variables during runtime directly on your TypeScript code. Source map information works pretty well, it was around long before TypeScript, but debugging TypeScript is generally not as great as when using JavaScript directly. Take the `this` keyword for example. Due to the changed semantics of the `this` keyword around closures since ES2015, `this` may actually exists during runtime as a variable called `_this` (see [this answer](https://stackoverflow.com/questions/30056593/visual-studio-shows-wrong-value-for-this-in-typescript/30070859#30070859)). This may confuse you during debugging but generally is not a problem if you know about it or inspect the JavaScript code. It should be noted that Babel suffers the exact same kind of issue.

There are a few other tricks the TypeScript compiler can do, like generating intercepting code based on [decorators](https://stackoverflow.com/q/29775830/1860591), generating module loading code for different module systems and parsing [JSX](https://github.com/Microsoft/TypeScript/wiki/JSX). However, you will likely require a build tool besides the Typescript compiler. For example, if you want to compress your code you will have to add other tools to your build process to do so.

There are TypeScript compilation plugins available for [Webpack](https://github.com/TypeStrong/ts-loader), [Gulp](https://www.npmjs.com/package/gulp-typescript), [Grunt](https://www.npmjs.com/package/grunt-typescript) and pretty much any other JavaScript build tool out there. The TypeScript documentation has a section on [integrating with build tools](https://www.typescriptlang.org/docs/handbook/integrating-with-build-tools.html) covering them all. A [linter](https://www.npmjs.com/package/tslint) is also available in case you would like even more build time checking. There are also a great number of seed projects out there that will get you started with TypeScript in combination with a bunch of other technologies like Angular 2, React, Ember, SystemJS, Webpack, Gulp, etc.

# JavaScript interoperability

Since TypeScript is so closely related to JavaScript it has great interoperability capabilities, but some extra work is required to work with JavaScript libraries in TypeScript. [TypeScript definitions](https://www.typescriptlang.org/docs/handbook/namespaces.html) are needed so that the TypeScript compiler understands that function calls like `_.groupBy` or `angular.copy` or `$.fadeOut` are not in fact illegal statements. The definitions for these functions are placed in `.d.ts` files.

The simplest form a definition can take is to allow an identifier to be used in any way. For example, when using [Lodash](https://lodash.com/), a single line definition file `declare var _ : any` will allow you to call any function you want on `_`, but then, of course, you are also still able to make mistakes: `_.foobar()` would be a legal TypeScript call, but is, of course, an illegal call at run-time. If you want proper type support and code completion your definition file needs to to be more exact (see [lodash definitions](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/lodash) for an example).

[Npm modules](https://www.npmjs.com/) that come pre-packaged with their own type definitions are automatically understood by the TypeScript compiler (see [documentation](https://www.typescriptlang.org/docs/handbook/typings-for-npm-packages.html)). For pretty much any other semi-popular JavaScript library that does not include its own definitions somebody out there has already made type definitions available through another npm module. These modules are prefixed with "@types/" and come from a Github repository called [DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped#how-do-i-get-them).

There is one caveat: the type definitions must match the version of the library you are using at run-time. If they do not, TypeScript might disallow you from calling a function or dereferencing a variable that exists or allow you to call a function or dereference a variable that does not exist, simply because the types do not match the run-time at compile-time. So make sure you load the right version of the type definitions for the right version of the library you are using.

To be honest, there is a slight hassle to this and it may be one of the reasons you do not choose TypeScript, but instead go for something like Babel that does not suffer from having to get type definitions at all. On the other hand, if you know what you are doing you can easily overcome any kind of issues caused by incorrect or missing definition files.

# Converting from JavaScript to TypeScript

Any `.js` file can be renamed to a `.ts` file and ran through the TypeScript compiler to get syntactically the same JavaScript code as an output (if it was syntactically correct in the first place). Even when the TypeScript compiler gets compilation errors it will still produce a `.js` file. It can even accept `.js` files as input with the `--allowJs` flag. This allows you to start with TypeScript right away. Unfortunately, compilation errors are likely to occur in the beginning. One does need to remember that these are not show-stopping errors like you may be used to with other compilers.

The compilation errors one gets in the beginning when converting a JavaScript project to a TypeScript project are unavoidable by TypeScript's nature. TypeScript checks *all* code for validity and thus it needs to know about all functions and variables that are used. Thus type definitions need to be in place for all of them otherwise compilation errors are bound to occur. As mentioned in the chapter above, for pretty much any JavaScript framework there are `.d.ts` files that can easily be acquired with the installation of [DefinitelyTyped packages](https://github.com/DefinitelyTyped/DefinitelyTyped#how-do-i-get-them). It might, however, be that you've used some obscure library for which no TypeScript definitions are available or that you've polyfilled some JavaScript primitives. In that case, you must supply type definitions for these bits for the compilation errors to disappear. Just create a `.d.ts` file and include it in the tsconfig.json's `files` array, so that it is always considered by the TypeScript compiler. In it declare those bits that TypeScript does not know about as type `any`. Once you've eliminated all errors you can gradually introduce typing to those parts according to your needs.

Some work on (re)configuring your build pipeline will also be needed to get TypeScript into the build pipeline. As mentioned in the chapter on compilation there are plenty of good resources out there and I encourage you to look for seed projects that use the combination of tools you want to be working with.

The biggest hurdle is the learning curve. I encourage you to play around with a small project at first. Look how it works, how it builds, which files it uses, how it is configured, how it functions in your IDE, how it is structured, which tools it uses, etc. Converting a large JavaScript codebase to TypeScript is doable when you know what you are doing. Read this blog for example on [converting 600k lines to typescript in 72 hours](https://www.lucidchart.com/techblog/2017/11/16/converting-600k-lines-to-typescript-in-72-hours/)). Just make sure you have a good grasp of the language before you make the jump.

# Adoption

TypeScript is open-source (Apache 2 licensed, see [GitHub](https://github.com/Microsoft/TypeScript)) and backed by Microsoft. [Anders Hejlsberg](https://en.wikipedia.org/wiki/Anders_Hejlsberg), the lead architect of C# is spearheading the project. It's a very active project; the TypeScript team has been releasing a lot of new features in the last few years and a lot of great ones are still planned to come (see the [roadmap](https://github.com/Microsoft/TypeScript/wiki/Roadmap)).

Some facts about adoption and popularity:

*   In the [2017 StackOverflow developer survey](https://insights.stackoverflow.com/survey/2017#technology) TypeScript was the most popular JavaScript transpiler (9th place overall) and won third place in the most loved programming language category.
*   In the [2018 state of js survey](https://2018.stateofjs.com/javascript-flavors/conclusion/) TypeScript was declared as one of the two big winners in the JavaScript flavors category (with ES6 being the other).
*   In the [2019 StackOverlow developer survey](https://insights.stackoverflow.com/survey/2019) TypeScript rose to the 9th place of most popular languages amongst professional developers, overtaking both C and C++. It again took third place amongst most the most loved languages.
*   In the [2020 StackOverflow developer survey](https://insights.stackoverflow.com/survey/2020#most-loved-dreaded-and-wanted) TypeScript was the second most loved technology.

* * *

## 回答 #3

> 赞同：90
> 
> 时间：2016-02-11T20:32:33.277

TypeScript does something similar to what less or sass does for CSS. They are super sets of it, which means that every JS code you write is valid TypeScript code. Plus you can use the other goodies that it adds to the language, and the transpiled code will be valid js. You can even set the JS version that you want your resulting code on.

Currently TypeScript is a super set of ES2015, so might be a good choice to start learning the new js features and transpile to the needed standard for your project.

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2015-12-27T04:18:29.533

"**[TypeScript Fundamentals](https://www.pluralsight.com/courses/typescript)**" -- a Pluralsight video-course by **[Dan Wahlin](https://www.pluralsight.com/authors/dan-wahlin)** and **[John Papa](https://www.pluralsight.com/authors/john-papa)** is a really good, presently (March 25, 2016) updated to reflect TypeScript 1.8, introduction to Typescript.

For me the really good features, beside the nice possibilities for intellisense, are the *classes*, *interfaces*, *modules*, the ease of implementing AMD, and the possibility to use the Visual Studio Typescript debugger when invoked with IE.

**To summarize**: If used as intended, Typescript can make JavaScript programming more reliable, and easier. It can increase the productivity of the JavaScript programmer significantly over the full SDLC.

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-06-06T12:14:00.927

Ecma script 5 (ES5) which all browser support and precompiled. ES6/ES2015 and ES/2016 came this year with lots of changes so to pop up these changes there is something in between which should take cares about so TypeScript.

• TypeScript is Types -> Means we have to define datatype of each property and methods. If you know C# then Typescript is easy to understand.

• Big advantage of TypeScript is we identify Type related issues early before going to production. This allows unit tests to fail if there is any type mismatch.

# c# - 事件查看器 — 登录到子文件夹？

> ID：12694536
> 
> 赞同：2
> 
> 时间：2012-10-02T16:38:32.820
> 
> 标签：c#, windows-services, event-log

我已经搜索和搜索，但找不到答案。我们有一个自定义服务运行并登录到事件查看器。在 Windows 7 中，有一个名为“应用程序和服务日志”的文件夹。如何在其中记录事件？甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:54:56.570

当您使用以下内容创建新的事件日志时，它会自动发生：

```
EventLog.CreateEventSource("Our Source", "Our Log"); 
```

**该调用需要提升权限，**但只需执行一次。之后，您可以使用普通权限进行引用。

```
EventLog _eventLog = new EventLog("Our Log"); // Writes to OUR event log--NOT the system created "Application" 
```

注意：如果您要将源从`Application`自定义日志移动，可能需要进行一些调整和/或重新启动，因为将源从一个日志移动到另一个日志是不正常的。

如果您使用的是 InstalUtil，您还可以使用`System.Diagnostics.EventLogInstaller`

# javascript - 我如何声明它并稍后设置值？(javascript)

> ID：12694537
> 
> 赞同：0
> 
> 时间：2012-10-02T16:38:42.343
> 
> 标签：javascript, jquery

这是我拥有的代码，但它不起作用。我不知道如何声明

```
 var input = {
        container: '.slide_container',
        container_all: '.slide_show',
        slides: []
    };

    var $slides = $('.slide_show .slide');
    var l = $slides.length;

    for( var i = 0; i < l; i++ ) {
        input.slides[i].el = '#' + $slides.eq(i).attr('id');
        if( i === 0 ) {
            input.slides[i].weight = 1;
        } else {
            input.slides[i].weight = 0;
        }
    } 
```

当它到达

```
input.slides[i].el = '#' + $slides.eq(i).attr('id'); 
```

它说 input.slides[i].el 是未定义的。有人可以让我知道声明空幻灯片的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:41:43.323

`input.slides[i]`您应该在将某些内容分配给其属性之前进行初始化。

```
for( var i = 0; i < l; i++ ) {
    input.slides[i] = {};
    input.slides[i].el = '#' + $slides.eq(i).attr('id');
    if( i === 0 ) {
        input.slides[i].weight = 1;
    } else {
        input.slides[i].weight = 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:42:29.390

您需要先创建对象。就像是：

```
input.slides[i] = { el: '#' + $slides.eq(i).attr('id'), weight: 0 }; 
```

您可能还想考虑使用`push`来添加到您的阵列中。

```
input.slides.push({ el: '#' + $slides.eq(i).attr('id'), weight: 0 }); //Add new object to the array 
```

# javascript - 我如何获取源代码并将其保存在文本文件中

> ID：12694542
> 
> 赞同：-4
> 
> 时间：2012-10-02T16:39:05.377
> 
> 标签：javascript, jquery

我需要您的帮助来获取页面的源代码并可以将其保存在文本文件中。

**我到底想要什么！！** 与其做大量工作，不如右键单击页面，然后单击查看源代码，然后将其复制并粘贴到文本文件中...

我想做一个简短的，我想在页面上放一个链接，我需要在其中获取源代码，所以当我单击该链接时说“下载代码”它会获取当前页面源代码并保存.txt 格式。

请帮助我我该怎么做？如果我可以通过使用 java 脚本来实现这一点，那就太好了，我不想使用服务器端编程语言。

我尝试了数据 URI，但没有得到我需要的确切信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:00:48.643

我在下面的链接中找到了一些东西：

[http://css-tricks.com/examples/ViewSourceButton/#](http://css-tricks.com/examples/ViewSourceButton/#)

# jquery - 具有可配置开始时间的 JQuery 倒数计时器

> ID：12694543
> 
> 赞同：0
> 
> 时间：2012-10-02T16:39:08.653
> 
> 标签：jquery, timer, countdown, configure

我想要一个计时器，允许（我的网站的）用户输入他们想要倒计时的时间（以分钟和秒为单位），并具有启动/停止功能。

我已经搜索过类似的东西，但我似乎只能找到倒计时到特定日期的倒计时计时器，或者似乎没有任何计时器功能的日期选择器。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:50:57.290

这是一个有趣的插件。

[http://jchavannes.com/jquery-timer/demo](http://jchavannes.com/jquery-timer/demo)

看第二个例子。

来源[http://code.google.com/p/jquery-timer/](http://code.google.com/p/jquery-timer/)

# javascript - jQuery“按属性”选择器

> ID：12694544
> 
> 赞同：4
> 
> 时间：2012-10-02T16:39:26.740
> 
> 标签：javascript, jquery, jquery-selectors

我有一个非常简单的例子[jsfiddle](http://jsfiddle.net/kjdbE/2/)：

HTML：

```
<input type="text"/>
<input type="text" value="aaa"/> 
```

JS：

```
$("input:first").val("aaa");
alert($("input[value='aaa']").length);​ 
```

为什么 Chrome 和 IE 返回不同的结果？为什么 Chrome 中的 jQuery 在使用 jQuery 设置时无法识别“值”？
我该如何解决？我需要 Chrome 将返回与 IE 完全相同的结果。

**编辑：**我不接受我的回答，因为稍微考虑了一下，我还是不明白一些事情（也许我在几个部分上错了）：

1）据我所知，浏览器在文本框中显示的文本应始终在“值”属性中，因为如果我提交表单，则文本框和其他输入字段中显示的“值”将提交给服务器（如果不是禁用）。

2）因此，如果文本框中显示的文本应该存储在“value”中以便提交，那么`$("input[type='text']").val("aaa")`将文本“aaa”分配给“value”属性对我来说很自然，因为它可能会在以后提交。如果是这样，为什么`$("input[value='aaa']")`不把它捡起来？

3）其他一些事情......当我不使用jQuery的“val”方法，而是直接将文本输入到文本框时，它不会转到“value”属性吗？我做了另一个例子，我不使用“val”将文本分配给文本框。我直接在文本框中输入它，然后`$("input[value='aaa']")`不再拿起它。

这对我来说非常奇怪......我理解属性和属性之间的区别，但由于 HTML 表单的性质，我不明白为什么“val”不将值分配给属性，直接输入时，它不会给“价值”属性。

[更新了 jsfiddle](http://jsfiddle.net/kjdbE/5/)

**顺便说一句**：在[http://blog.jquery.com/2011/05/12/jquery-1-6-1-released/](http://blog.jquery.com/2011/05/12/jquery-1-6-1-released/)我发现以下内容：

> .attr() 和 .prop() 都不应该用于获取/设置值。改用 .val() 方法（尽管使用 .attr(“value”, “somevalue”) 将继续工作，就像它在 1.6 之前所做的那样）。

他们说“val”应该设置属性......或者我的英语不允许我理解它吗？

请解释我:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T16:46:17.217

我*认为*这是因为`.val`将*属性*设置在`input`. 然后使用`[value="aaa"]`是查看 的属性，`input`实际上并没有改变。如果您更改`jQuery`用于将输入值设置为的方式：

`$("input:first").attr("value", "aaa");`

然后检查长度，你*会*得到你期望的结果。

小提琴：http: [//jsfiddle.net/gromer/ZnbpE/](http://jsfiddle.net/gromer/ZnbpE/)

属性和属性的区别：http: [//blog.jquery.com/2011/05/12/jquery-1-6-1-released](http://blog.jquery.com/2011/05/12/jquery-1-6-1-released)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T11:16:39.530

由于问题很长，所以这个答案也会更长一点：第一件事：正如我用[这个](http://jsfiddle.net/KV2VH/19)小提琴弄明白的那样，属性选择器 input[anyAttribute] 的行为有点不一致：而 input[value] 只匹配真实属性，input[maxlength] 也匹配属性（在最近的 FF、最近的 Chrome、IE 9 中测试）。

要了解属性和属性之间的区别，请阅读： [http ://blog.jquery.com/2011/05/12/jquery-1-6-1-released](http://blog.jquery.com/2011/05/12/jquery-1-6-1-released)

这意味着：要在输入内容后获取具有特定值的所有元素，通常**不能**使用 input[value='anything']。由于 jQuery.val() 也使用了 hook 下的 .value 属性，所以在使用 jQuery 时也是如此。另一个[小提琴](http://jsfiddle.net/HN9eq/57/)来证明这一点。（输入某些内容后，单击状态可用于获取信息）。

您提到的另一点是建议仅使用 .val() 来设置元素的值。这是完全正确的，因为它处理了最多的错误和不同的实现。所以 .attr('value') 或 .prop('value') 可能会在极少数情况下导致一些问题。

某些 IE 实际上匹配 .value 属性的 input[value='aaa'] 可能是 IE .querySelectorAll 实现中的错误（或功能）或 Sizzle 的错误（或功能），用于解决问题的 jquery 选择器引擎缺少属性选择器。要检查这一点，只需在您拥有的 IE 版本中运行[选择器小提琴](http://jsfiddle.net/KV2VH/19)，如果您在 .querySelectorAll 中遇到一些异常，则它是导致问题的嘶嘶声，否则是 IE。我没有安装比 9 更旧的 IE 版本（因为 Windows 7 升级了 IE 的版本），所以如果有人能检查一下就好了。

最后一件事：如果您确实需要所有具有特定值的输入字段，请使用带有过滤功能的[jQuery.filter来检查正确的 .val](http://api.jquery.com/filter/)

# php - 面向对象编程继承

> ID：12694548
> 
> 赞同：0
> 
> 时间：2012-10-02T16:39:41.627
> 
> 标签：php, class, visibility

我已经创建了这个父类

```
class DBMysqli {
    private $mysqli;

    function __construct($Mysqli) {
        $this->mysqli = $Mysqli;
    }

     public function GET($queryArr){

        $query = "SELECT ";

       ...

        $result = $this->mysqli->query($query); //Here I get a run time error!!
        echo $this->mysqli->error;

        return $result;
   }
} 
```

和一个儿童班

```
class FolderComment extends DBMysqli{

    protected $data;

    public function __construct() {
        $this->mysqli = DB::Simulator(); //works, initiliaze $mysqli
        $table = array(
            'tables' => 'folder_comments',
            'conditions' => '1'
        );

        $this->data = $this->GET($table);
    }
} 
```

我收到运行时错误，指出 $this->mysqli 为空。但我已将其设置在子类中。我想这是一个 OOP 轻描淡写的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:43:17.077

我相信，由于您已将 mysqli 设为私有变量，因此不会像您假设的那样在孩子的构造函数中设置它。如果您希望孩子能够访问它，它应该受到保护。

因此，正在发生的事情是您在子类中创建了一个名为 的新变量`mysqli`，因为它从一开始就从未从父类继承私有字段。

您的另一个选择是隐式调用父级的构造函数并将`mysqli`变量发送给它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:44:12.520

改变

```
private $mysqli; 
```

至

```
protected $mysqli; 
```

在当前班

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:44:51.147

您需要将 mysqli 对象传递给您的父类

```
 public function __construct() {
        parent::__construct(DB::Simulator());
        $table = array(
            'tables' => 'folder_comments',
            'conditions' => '1'
        );

        $this->data = $this->GET($table);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T16:43:55.767

在`DBMysqli`你需要`$mysqli`，`protected`不是`private`

```
class DBMysqli {
    protected $mysqli;
    //... 
```

**Private**表示任何访问 - 无论是外部访问还是继承都被阻止，而**protected**表示外部访问被阻止，但继承的对象可以访问该属性。

# spring - Hibernate/Spring - AnnotationSessionFactoryBean - 如何解决重复导入？

> ID：12694549
> 
> 赞同：1
> 
> 时间：2012-10-02T16:39:41.870
> 
> 标签：spring, hibernate, entity, duplicates

我在创建扩展 AnnotationSessionFactoryBean 的 bean 的 Spring 配置中遇到问题。

这是类的定义：

```
public class ExtendedAnnotationSessionFactoryBean extends AnnotationSessionFactoryBean {

    private String[] basePackages;
    private ClassLoader beanClassLoader;

    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println("ExtendedAnnotationSessionFactoryBean, in afterPropertiesSet");
        Collection<Class<?>> entities = new ArrayList<Class<?>>();
        ClassPathScanningCandidateComponentProvider scanner = this.createScanner();
        for (String basePackage : this.basePackages) {
            this.findEntities(scanner, entities, basePackage);
        }
        this.setAnnotatedClasses(entities.toArray(new Class<?>[entities.size()]));

        super.afterPropertiesSet();
    }

    private ClassPathScanningCandidateComponentProvider createScanner() {
        System.out.println("ExtendedAnnotationSessionFactoryBean, in createScanner");
        ClassPathScanningCandidateComponentProvider scanner = new ClassPathScanningCandidateComponentProvider(false);
        scanner.addIncludeFilter(new AnnotationTypeFilter(Entity.class));
        return scanner;
    }

    private void findEntities(ClassPathScanningCandidateComponentProvider scanner,
            Collection<Class<?>> entities, String basePackage) {
        System.out.println("ExtendedAnnotationSessionFactoryBean, in findEntities");
        Set<BeanDefinition> annotatedClasses = scanner.findCandidateComponents(basePackage);
        for (BeanDefinition bd : annotatedClasses) {
            String className = bd.getBeanClassName();
            System.out.println("ExtendedAnnotationSessionFactoryBean, className: " + className);
            Class<?> type = ClassUtils.resolveClassName(className, this.beanClassLoader);
            entities.add(type);
        }

    }

    public void setBasePackage(String basePackage) {
        this.basePackages = new String[]{basePackage};
    }

    public void setBasePackages(String[] basePackages) {
        this.basePackages = basePackages;
    }

    @Override
    public void setBeanClassLoader(ClassLoader beanClassLoader) {
        this.beanClassLoader = beanClassLoader;
    }
} 
```

以下是它的配置方式：

```
<b:bean id="sessionFactory" class="com.mycompany.spring.ExtendedAnnotationSessionFactoryBean">
        <b:property name="dataSource" ref="dataSource" />
        <b:property name="configurationClass" value="org.hibernate.cfg.AnnotationConfiguration" />
        <b:property name="hibernateProperties" ref="hibernateProperties" />
        <b:property name="entityInterceptor" ref="baseEntityInterceptor" />
        <b:property name="basePackages">
            <b:list>
                <b:value>com.mycompany.entities</b:value>
                <b:value>com.mycompany.entities1_1</b:value>
            </b:list>
        </b:property>
    </b:bean> 
```

每个包（com.mycompany.entities、com.mycompany.entities1_1）中的源代码都是相同的，只是目录在第二个中定义：

```
@Table(catalog="myDatabase1_1", name = "mytablename1") 
```

当我运行一个测试时，我遇到了一个堆栈跟踪崩溃，它指出相同的实体名称被使用了两次（尽管它们位于不同的包中）。在堆栈跟踪的末尾，它建议将“自动导入”设置为 false：

```
Caused by: org.hibernate.DuplicateMappingException: duplicate import: MyTableName1 refers to both com.mycompany.entities1_1.MyTableName1 and com.mycompany.entities.MyTableName1 (try using auto-import="false") 
```

问题：自动导入是什么意思，为什么会起作用，我应该在哪里指定它？

这是整个堆栈跟踪：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in URL [file:WEB-INF/myconfiguration.xml]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: Use of the same entity name twice: MyTableName1
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in URL [file:WEB-INF/myconfiguration.xml]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: Use of the same entity name twice: MyTablenNme1
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1337)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:221)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:423)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:729)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:381)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
    at com.nuval.infrastructure.test.BaseTest.init(BaseTest.java:44)
    at com.nuval.infrastructure.test.BaseTest.setUp(BaseTest.java:62)
    at com.nuval.test.CloneTest.setUp(CloneTest.java:104)
    at junit.framework.TestCase.runBare(TestCase.java:125)
    at junit.framework.TestResult$1.protect(TestResult.java:106)
    at junit.framework.TestResult.runProtected(TestResult.java:124)
    at junit.framework.TestResult.run(TestResult.java:109)
    at junit.framework.TestCase.run(TestCase.java:118)
    at junit.framework.TestSuite.runTest(TestSuite.java:208)
    at junit.framework.TestSuite.run(TestSuite.java:203)
    at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.hibernate.AnnotationException: Use of the same entity name twice: MyTableName1
    at org.hibernate.cfg.annotations.EntityBinder.bindEntity(EntityBinder.java:347)
    at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:613)
    at org.hibernate.cfg.AnnotationConfiguration.processArtifactsOfType(AnnotationConfiguration.java:636)
    at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:359)
    at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1206)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:673)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at com.zeer.onqi.spring.ExtendedAnnotationSessionFactoryBean.afterPropertiesSet(ExtendedAnnotationSessionFactoryBean.java:36)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1368)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1334)
    ... 30 more
Caused by: org.hibernate.DuplicateMappingException: duplicate import: MyTableName1 refers to both com.mycompany.entities1_1.MyTableName1 and com.mycompany.entities.MyTableName1 (try using auto-import="false")
    at org.hibernate.cfg.Configuration$MappingsImpl.addImport(Configuration.java:2418)
    at org.hibernate.cfg.annotations.EntityBinder.bindEntity(EntityBinder.java:340)
    ... 39 more 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T16:53:06.120

您的问题与您的 bean 无关，是由于您的`SessionFactory`. 这意味着 Hibernate 将无法理解它应该在查询中使用哪个实体，例如`from MyTableName1`.

如果确实需要同时拥有这些实体`SessionFactory`，则应为它们指定不同的逻辑名称，如下所示：

```
@Entity(name = "MyTableName1")
@Table(...)
public class MyTableName1 { ... }

@Entity(name = "MyTableName1_1")
@Table(...)
public class MyTableName1 { ... } 
```

并在 HQL 查询中使用这些名称。

如果您不需要同时使用它们，也许您可​​以将它们放入不同`SessionFactories`的模式中。

另请注意，据我了解，您不需要创建自己的子类`AnnotationSessionFactoryBean`，因为默认的子类支持与您尝试实现的功能相同的功能，请参阅`packagesToScan`属性。

# javascript - Android Tap Highlight Jelly Bean

> ID：12694556
> 
> 赞同：1
> 
> 时间：2012-10-02T16:40:02.560
> 
> 标签：javascript, android, html, css, cordova

我在 android 4.1.1 上的应用程序有问题。我创建了一个带有 html/javascript 和 phonegap 的应用程序。我的问题是，当点击链接时，它们会显示橙色突出显示。我可以用**-webkit-tap-highlight-color: rgba(255, 255, 255, 0)** 或**-webkit-tap-highlight-color: rgba(0, 0, 0, 0)**解决这个问题，但现在我安装了果冻豆，它不再工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T04:48:11.993

我遇到了同样的问题。我通过使用这个摆脱了果冻豆上的橙色亮点：

```
* {-webkit-tap-highlight-color: transparent;} 
```

# css - 垂直拉伸背景图像

> ID：12694559
> 
> 赞同：29
> 
> 时间：2012-10-02T16:40:19.980
> 
> 标签：css

我想弄清楚如何垂直拉伸背景图像。我通过以下方式使用带有 3 个图像的 CSS3：

```
background-image: url("left.png"), url("right.png"), url("center.png")
background-repeat: no-repeat, no-repeat, repeat-x
background-position: top left, top right, top 
```

现在我想将这些图像垂直拉伸到它们一直延伸到底部。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-11-18T19:48:28.410

我在这里聚会迟到了，但这对我有用：

```
background-size: auto 100%; 
```

这将垂直适合图像并让宽度做它需要做的任何事情（我认为它默认重复）。您还可以设置：

```
background-repeat: no-repeat; 
```

它不会在水平方向上重复图像。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-02T16:45:52.490

尝试：

```
background-size: 100% 100%; 
```

第一个`100%`是宽度，第二个是高度。在您的情况下，您需要第二组`100%`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-08T04:34:16.620

谢谢你提出这个问题。以下是对我有用的

```
background-size: cover;
background-color: #a8dadc;
background-repeat: no-repeat;
background-size: 100vw 100vh; 
```

# sed - 如何使用与号 (&) 替换匹配模式中的字符

> ID：12694562
> 
> 赞同：18
> 
> 时间：2012-10-02T16:40:28.520
> 
> 标签：sed, match, ampersand

当我们使用 sed 匹配一个模式时，匹配的模式存储在“&”变量中。有没有办法使用＆符号本身替换此匹配模式中的字符？

例如，如果 & 包含字符串“apple1”，我如何使用 & 将字符串变为“apple2”（即用 2 替换 1）？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-02T17:13:33.333

如果我猜对了，您要做的是在匹配的模式中应用替换。您不能使用`&`. 你想这样做：

```
echo apple1 apple3 apple1 apple2 botemo1 | sed '/apple./ { s/apple1/apple2/g; }' 
```

这意味着您只想在与模式匹配的行上执行命令替换`/apple./`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-02T17:38:58.930

您还可以使用捕获组。捕获用于抓取匹配的一部分并将其保存到辅助变量中，该变量按照捕获出现的顺序以数字形式命名。

```
echo apple1 | sed -e 's/\(a\)\(p*\)\(le\)1/\1\2\32/g' 
```

我们使用了三个捕获：

1.  第一个，存储在 中`\1`，包含一个“a”
2.  第二个，存储在 中`\2`，包含一系列“p”（在示例中它包含“pp”）
3.  第三个，存储在 中`\3`，包含序列“le”

现在我们可以使用我们捕获的匹配来打印替换`\1\2\32`：请注意，我们使用 3 个捕获值来生成“apple”，然后我们附加一个 2。这不会被解释为变量`\32`，因为我们总共只能有 9 个捕获。

希望这会有所帮助=)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-02T16:45:15.750

您可以先匹配一个模式，然后在匹配时更改文本：

```
echo "apple1" | sed '/apple/s/1/2/'    # gives you "apple2" 
```

此代码在包含的所有行中更改`1`为`2``apple`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T19:40:31.227

这可能对您有用（GNU sed 和 Bash）：

```
sed 's/apple1/sed "s|1|2|" <<<"&"/e' file 
```

# php - 使用表单中的服务调用类

> ID：12694563
> 
> 赞同：0
> 
> 时间：2012-10-02T16:40:33.433
> 
> 标签：php, symfony, symfony-forms, symfony-2.1

我对 Symfony2 中的服务和表单有疑问，所以我创建了我的 cals 表单，我希望添加一个多选城市列表，然后我想从另一个类“城市”中获取城市列表，所以我如何调用我的类“ city”在我的表单中使用“服务”来获取函数“getcities”来返回我的城市列表？（我在这里不使用 Doctrine）...

**编辑**

```
 namespace Acme\DemoBundle\Form\Type;

 use Symfony\Component\Form\AbstractType;
 use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class CityType extends AbstractType
{ 
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'choices' => array( /**
                     * Here I will call function getcities(return list of cities)
                      */

        )
    ));
}

public function getParent()
{
    return 'choice';
}

public function getName()
{
    return 'gender';
}
} 
```

类 City.php ：

```
Class City {

  /**
   * here i will get list of cities 
   */

  public function getcities()
  {
     .....
    return $Listcities;
  }

  } 
```

所以我想用“服务”在表单中调用函数“getcities”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:01:17.940

表单对象不是容器感知的……至少，它们不应该是。也就是说，您的控制器应该使用该服务来获取城市，然后它应该通过构造函数或方法将该列表传递给表单对象。

控制器：

```
class SomethingController
{
    public function someAction()
    {
        ...
        $cities = $this->get("citiesService")->getCities();
        $form = $this->createForm(new SomeType($cities), $someEntity);
        ...
    }
} 
```

形式：

```
class SomeType extends AbstractType
{
    private $cities;

    public function __construct($cities)
    {
        $this->cities = $cities;
    }

    public function buildForm(FormBuilder $builder, array $options)
    {
        // Now you have access to $this->cities, so you can use it to build the form
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:48:42.080

您可以将 City 对象设置为表单数据对象吗？

所以它看起来像这样......

`$form = $this->createForm(new SomeType(), new City());`

```
class SomeType extends AbstractType
{ 
    public buildForm(FormBuilderInterface $builder, array $options)
    {
        $formFactory = $builder->getFormFactory();

        $builder->addEventListener(
            FormsEvents::PRE_SET_DATA,
            function (FormEvent $event) use ($formFactory) {
                $event->getForm()->add(
                    $formFactory->createNamed(
                        'gender',
                        'choice',
                        null,
                        array(
                            'choices' => $event->getData()->getCites()
                        )
                    )
                );
            }
        );
    }
} 
```

# php - 在 MySQL + PHP 中使用 SELECT 插入？

> ID：12694566
> 
> 赞同：0
> 
> 时间：2012-10-02T16:40:37.797
> 
> 标签：php, mysql, sql

> **可能重复：**
> [如何获取我刚刚插入 php/mysql 的行的 id](https://stackoverflow.com/questions/4360555/how-to-get-the-id-of-a-row-ive-just-inserted-php-mysql)

我想知道插入东西并同时选择它的 ID 属性的最有效方法是什么？

例如，我有一个带有自动递增主 ID 列的表。我将一个项目插入到该表中，并且我需要知道自动递增的 ID 以用于另一个表。

现在，我要做的是：

1.  INSERT INTO table1 数据
2.  从表 1 中选择 ID
3.  INSERT INTO table2 的另一组数据连同 ID。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T16:42:22.077

你可以这样做

```
INSERT INTO foo (auto,text)
    VALUES(NULL,'text');         --generate ID by inserting NULL
INSERT INTO foo2 (id,text)
    VALUES(LAST_INSERT_ID(),'text');  --use ID in second table 
```

源代码：http : [//dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:42:26.953

你可以试试 mysql_insert_id();

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

# jquery - JQuery Flot 图表在 AngularJS 模式窗口中不起作用

> ID：12694567
> 
> 赞同：-1
> 
> 时间：2012-10-02T16:40:45.070
> 
> 标签：jquery, charts, real-time, angularjs, flot

我正在构建一个带有模态窗口的 AngularJS Web 应用程序。在模态窗口中，我喜欢显示一个 JQuery Flot 实时图表，类似于： [http ://people.iola.dk/olau/flot/examples/realtime.html](http://people.iola.dk/olau/flot/examples/realtime.html)

[我从http://people.iola.dk/olau/flot/examples/realtime.html](http://people.iola.dk/olau/flot/examples/realtime.html)复制了代码，并将其放在我的服务器上的一个名为 flot2.html 的文件中。有用。

但是，当我将代码放入包含模式窗口代码的模板 (index.html) 文件中时，图表不起作用。文本显示，但不显示移动线曲线或网格。

有人对如何使这项工作有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:51:23.897

我们使用 flot 和 angular 创建了一个非常复杂的实时分析应用程序。（从角度 0.9.19 和向前开始）。提供您的代码会有所帮助。我同意 Roy 的观点，使用带角度的模态不是问题。如果您想要一个随角度范围数据变化而变化的实时图表，您可能希望在数据变化时使用角度[rootScope](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24on "根范围")进行广播，并在侦听该数据变化事件的方法中进行广播。然后你会调用 flot $.plot 来更新你的情节。

希望这可以帮助。

- 担

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:24:24.630

我很抱歉。我发现图表不显示的原因是因为 DIV ID 在 ng-repeat 中，这意味着使用相同的 ID 创建了多个 DIV。

这让我想到了下一个问题：“如何将 AngularJS 变量传递给 Javascript？” 发布在[如何将 AngularJS 变量传递给 Javascript？](https://stackoverflow.com/questions/12861222/how-to-pass-angularjs-variable-to-javascript). 我需要能够这样做才能在 ng-repeat 中绘制多个图表。

# python - 如何干净地删除 ndb 属性

> ID：12694569
> 
> 赞同：15
> 
> 时间：2012-10-02T16:40:50.383
> 
> 标签：python, google-app-engine, app-engine-ndb, polymodel

在我的应用程序中，我需要删除一些模型属性。
我检查了[这个链接](https://developers.google.com/appengine/articles/update_schema)，但第一个问题是属性在 a 上`polymodel`，我暂时无法切换到 an`expando`来删除属性，我什至不知道如果我将 a 更改`polymodel`为 an会发生什么`expando`。

那么如何从现有实体中删除属性？

我正在考虑将所有设置`StringProperty`为`None`然后从模型架构中删除并重新部署。其中一个属性是 a `BooleanProperty`，我无法将其设置为`None`正确的？！或`ndb.PickleProperty`...我应该如何删除它？

有人知道如何正确完成这项工作吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-03T02:32:46.257

如果要更新所有实体，推荐的方法是读取和重写所有实体的 map/reduce 作业；但是它可能不值得，这取决于你有多少数据——map/reduce 也不是免费的。

还要确保在一小部分数据上测试 map/reduce 作业。真正从实体中删除属性是非常微妙的，即使它不再在模型类中！最好的方法可能是：

```
if 'propname' in ent._properties:
  del ent._properties['propname']
  ent.put() 
```

# css - 在 ASP.NET MVC 的视图中显示格式化的 JSON

> ID：12694571
> 
> 赞同：10
> 
> 时间：2012-10-02T16:40:52.417
> 
> 标签：css, xml, asp.net-mvc, json, razor

有没有办法格式化 JSON 以显示在视图中？这样，当我添加新属性时，我的 API 文档会自动更新吗？额外的功劳是用 CSS 包围某些元素来设置它的样式。我也想为 XML 做这个。

```
class Student 
{
      static CreateEmpty()
      {
           return new Student() {
                 FirstName: 'Mike',
                 LastName: 'Flynn',
                 Classes: new List<Class>(),
                 School: new School() {
                      Name: 'High School'
                 }
           }
      }
}

<code>
@(Student.CreateEmpty().ToJSON())
</code> 
```

到

```
<code>

{
     FirstName: 'Mike',
     LastName: 'Flynn',
     Classes: [],
     School: {
          Name: 'High School'
     }
}

</code> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-02T16:50:05.417

您可以使用支持控制 JSON 格式并缩进的[JSON.NET ：](http://json.codeplex.com/)

```
<pre>
    @Html.Raw(JsonConvert.SerializeObject(Student.CreateEmpty(), Formatting.Indented))
</pre> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-20T20:49:14.077

使用 Newtonsoft 的另一种方式。注意 pre html 标记对于保持格式很重要。

```
<pre>
@Html.Raw(Newtonsoft.Json.Linq.JValue.Parse(Student.CreateEmpty()).ToString(Newtonsoft.Json.Formatting.Indented)
</pre> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T19:50:34.153

我的解决方案只是直接格式化 HTML（出于调试目的）你可以做得更漂亮。

```
 public static void FormatJSONObject(object o, StringBuilder sb, int indent)
    {
        if(o.GetType() == typeof(System.Object[]))
        {
            sb.AppendLine("[<br>");
            int idx = 0;
            foreach(object obj in (object[])o)
            {
                sb.Append("<b><i>" + idx + "</i></b><br><div style='padding-left: " + indent + "em;'>");
                FormatJSONObject(obj, sb, indent + 2);
                sb.AppendLine("</div>");
                idx++;
            }
            sb.AppendLine("]<br>");
        }
        else if(o.GetType() == typeof(Dictionary<string, object>))
        {
            sb.AppendLine("{<br><div style='padding-left: " + indent + "em;'>");
            foreach (var v in (Dictionary<string, object>)o)
            {
                sb.Append("<b>");
                sb.Append(v.Key);
                sb.Append("</b>&nbsp;:&nbsp;");
                FormatJSONObject(v.Value, sb, indent + 2);
            }
            sb.AppendLine("</div>}<br>");
        }
        else
        {
            sb.Append(o.ToString());
            sb.AppendLine("<br>");
        }
    } 
```

然后在我的 ASP 服务器端按钮单击处理程序中调用...

```
 protected  void GoButton_Click(object sender, EventArgs e)
    {
        RegisterAsyncTask(new PageAsyncTask(LoadTestData));
    }

    public async Task LoadTestData()
    {
        using (HttpClient client = new HttpClient())
        {
            // Like "http://jsonplaceholder.typicode.com"
            client.BaseAddress = new Uri(APIURLBase.Text);
            client.DefaultRequestHeaders.Accept.Clear();
            client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
            client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("text/html"));
            // Like "posts/1"
            HttpResponseMessage response = await client.GetAsync(APIURLRequest.Text);
            if (response.IsSuccessStatusCode)
            {
                StringBuilder sb = new StringBuilder();
                sb.AppendLine("<H1>Return Status:</H1>&nbsp;" + response.StatusCode.ToString() + "<br>");

                sb.AppendLine("<H1>Headers</H1><br>");
                foreach (var h in response.Headers)
                {
                    foreach (var v in h.Value)
                    {
                        sb.AppendLine("<label>" + h.Key + "</label>&nbsp;" + v + "<br>");
                    }
                }

                sb.AppendLine("<H1>Content</H1><br>");
                sb.AppendLine("<label>Content Type: </label>" + Response.ContentType + "<br>");
                Stream memStream = new MemoryStream();
                Stream bodyStream = await response.Content.ReadAsStreamAsync();
                bodyStream.CopyTo(memStream);
                memStream.Position = 0;
                using (StreamReader reader = new StreamReader(memStream))
                {
                    string body = reader.ReadToEnd();
                    if (ShowRawContentCB.Checked)
                    {
                        sb.AppendLine(body + "<br>");
                    }
                    else
                    {
                        JavaScriptSerializer ser = new JavaScriptSerializer();
                        object o = ser.Deserialize(body, typeof(object));
                        FormatJSONObject(o, sb);
                    }
                }

                this.results.InnerHtml = sb.ToString();
            }
            else
            {
                this.results.InnerHtml = "<label>Error:</label>&nbsp;" + response.StatusCode.ToString();
            }

        }
    } 
```

# ruby-on-rails - 使用 GUI 为 Linux VPS 服务器设置 FTP

> ID：12694573
> 
> 赞同：0
> 
> 时间：2012-10-02T16:40:54.550
> 
> 标签：ruby-on-rails, linux, ftp, vps

我有一个安装了 ubuntu 10.4 的 1and1 Linux VPS 服务器。我们需要能够使用 GUI 将文件 FTP 到它，因为不是每个人都在 IT 部门或对命令行的东西感到满意。

我需要先安装 vsftpd 吗？

是否有适用于 Linux 服务器的 GUI？我的老板喜欢 Cyber​​duck。

如果是这样，设置 FTP 连接是否与使用 Windows 服务器相同？即输入IP，然后输入用户名。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:26:17.663

您无需在 VPS 上执行任何操作即可使用 GUI FTP 客户端。

以下是在 ubuntu 上设置 FTP 服务器的说明：[https ://help.ubuntu.com/10.04/serverguide/ftp-server.html](https://help.ubuntu.com/10.04/serverguide/ftp-server.html)

一旦在 VPS 上安装了 FTP 服务器软件，您应该能够从命令行或您希望使用的任何 GUI 工具进行 FTP。GUI 客户端不应该关心服务器有什么样的操作系统。

是的，FTP 在 Ubuntu 上的工作方式与在 Windows PC 上的工作方式相同。您输入 IP 地址和用户名（如果您设置了密码，则输入密码），然后连接到服务器。

# php - 使用 PHP 从 AWS SQS 获取消息，无需轮询

> ID：12694582
> 
> 赞同：1
> 
> 时间：2012-10-02T16:41:36.413
> 
> 标签：php, amazon-sqs

有没有办法为 SQS 编写一个不必定期轮询新消息的 Php 消费者？

到目前为止，我发现使用消息的唯一方法是使用`receive_message()`api 调用来获取它们，这需要使用定期轮询来完成。

虽然它应该可以工作，但它似乎仍然是错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T03:52:11.450

**我知道这是一个非常古老的问题，但只是想为未来的读者指出这一点。**

SQS 用于轮询，但如果您想要推送解决方案，您实际上可以在 AWS SQS 面板上选择“队列选项”，然后选择“订阅 SNS 主题”。

显然，在执行此操作之前先创建一个 SNS 主题。您可以将主题设置为在每次事件发生时自动向 URL 发送请求，本质上将其转变为推送。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:20:48.557

让 SQS 如此出色地扩展的神奇之处在于，与其他消息传递系统相比，它提供的功能非常少。用户必须： 轮询消息；处理乱序传递的消息；处理多次传递的消息；处理偶尔非常大的消息传递延迟（如 50 秒）。

它对某些任务非常有用，但对其他任务绝对不可用。我花了太长时间试图让它不是它，我真的认为亚马逊应该在他们的文档中更清楚地警告你它不仅是什么，而且不是什么。我最终使用了 RabbitMQ，并且再高兴不过了——但是，是的，有一点我需要处理扩展它。

# objective-c - 带有垂直平移手势的水平滚动 UIScrollView

> ID：12694584
> 
> 赞同：9
> 
> 时间：2012-10-02T16:41:40.633
> 
> 标签：objective-c, ios, uiscrollview, uipangesturerecognizer

我正在尝试实现一个 UIScrollView，其中水平平移滚动滚动视图中的图片，但垂直平移执行我拥有的另一个操作。现在，我有一个 UIScrollView，它在禁用垂直滚动的情况下分页，可以很好地滚动浏览图片，但是我疯狂地试图找到一种方法来拦截垂直平底锅并调用我自己的方法，而不是垂直平底锅被吃掉滚动视图。我能够做到

```
 UIPanGestureRecognizer *panUp = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)];
[self.scrollView addGestureRecognizer:panUp];
[scrollView.panGestureRecognizer setEnabled:NO]; 
```

这让我可以完全控制我的 handlePanGesture: 方法中的平移，但这并不是特别有用，因为我觉得我基本上要重写我试图避免的所有滚动逻辑。任何有关如何实现这一目标的帮助或指导将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T00:23:17.040

从 iOS 5 开始，`UIScrollView` [公开其`UIPanGestureRecognizer`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/panGestureRecognizer). 将您的自定义滑动设置`delegate`为`self`并将gestureRecognizer 设置为属性或ivar，并使您的类符合`<UIGestureRecognizerDelegate>`协议。然后，`UIGestureRecognizerDelegate`像`– gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`这样实现：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    if ([gestureRecognizer isEqual:self.swipe] && [otherGestureRecognizer isEqual:self.scrollView.panGestureRecognizer])
    {
         return NO;
    }
    return YES; // the default for this method
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-13T05:21:24.677

我添加了一个`UIPanGestureRecognizer`这样的设置`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    if ([gestureRecognizer isEqual:self.panGesture] && [otherGestureRecognizer isEqual:self.collectionView.panGestureRecognizer]){
        return YES;
    }
    return NO;
} 
```

我还添加了签到`gestureRecognizerShouldBegin:`

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
    if ([gestureRecognizer isEqual:self.panGesture]) {
        if (gestureRecognizer.numberOfTouches > 0) {
            CGPoint point = [gestureRecognizer locationOfTouch:0 inView:gestureRecognizer.view];
            CGFloat distX = abs(self.collectionView.lastTouchPos.x - point.x);
            CGFloat distY = abs(self.collectionView.lastTouchPos.y - point.y);
            if (distX > distY) {
                return NO;
            }
        } else {
            return NO;
        }
    }
    return YES;
} 
```

仅`self.panGesture`在向上或向下平移时使用。

**更新**

[https://stackoverflow.com/a/8603839/667834](https://stackoverflow.com/a/8603839/667834)似乎有更好的方法`gestureRecognizerShouldBegin`

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
    if ([gestureRecognizer isEqual:self.panGesture]) {
        if (gestureRecognizer.numberOfTouches > 0) {
            CGPoint translation = [self.panGesture velocityInView:self.collectionView];
            return fabs(translation.y) > fabs(translation.x);
        } else {
            return NO;
        }
    }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T23:59:08.733

如果您想使用平移手势，我认为这将很困难，因为滚动视图使用了这些手势。但是，如果您可以使用滑动，则很容易实现。

```
 UISwipeGestureRecognizer *swipe = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)];
    swipe.direction = UISwipeGestureRecognizerDirectionDown | UISwipeGestureRecognizerDirectionUp;
    [self.scrollView addGestureRecognizer:swipe]; 
```

我对此进行了测试，调用处理程序效果很好，并且您不需要禁用滚动视图的平移手势识别器（在我的测试中，滚动视图足够高并且内容足够短以至于没有垂直滚动 - - 我不知道这是否有必要）。

# javascript - Javascript中的方法重载

> ID：12694588
> 
> 赞同：26
> 
> 时间：2012-10-02T16:42:02.660
> 
> 标签：javascript, jquery, overloading

我在我的 Javascript 代码中使用如下方法重载。

```
function somefunction()
{
    //1st function
}

function somefunction(a)
{
   //2nd function
}

function somefunction(a,b)
{
   //3rd function
}

somefunction(); // function call goes here 
```

我不明白的是，如果我调用`somefunction()`javascript 应该调用第**一个函数，但问题是 javascript 实际上调用了第三个函数**。这是为什么？如何调用第一个和第二个函数？这是什么原因？是否有适当的方法在 Javascript 中实现方法重载？行业标准是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-02T16:43:04.440

JavaScript 不支持方法重载（如在 Java 中或类似的），您的第三个函数会覆盖之前的声明。

相反，它通过[`arguments`object](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)支持可变参数。你可以做

```
function somefunction(a, b) {
    if (arguments.length == 0) { // a, b are undefined
        // 1st body
    } else if (arguments.length == 1) { // b is undefined
        // 2nd body
    } else if (arguments.length == 2) { // both have values
        // 3rd body
    } // else throw new SyntaxError?
} 
```

您也可以只检查`typeof a == "undefined"`等，这将允许调用`somefunction(undefined)`, where `arguments.length`is `1`。这可能允许使用各种参数更轻松地调用，例如当您有可能为空的变量时。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T16:45:25.983

JS 将传递`undefined`给任何未提供的参数。如果您想要重载之类的东西，则需要执行类似于以下代码的操作：

```
function someFunction(a, b) {
    if (typeof a === 'undefined') {
        // Do the 0-parameter logic
    } else if (typeof b === 'undefined') {
        // Do the 1-parameter logic
    } else {
        // Do the 2-parameter logic
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-02T16:42:59.667

您只是`somefunction`用每个新声明擦除变量。

这相当于

```
 window.somefunction = function(...
   window.somefunction = function(...
   window.somefunction = function(... 
```

Javascript 不提供方法重载。

正确的方法是：

*   定义第三个函数并测试定义了哪些参数
*   只传递一个包含参数的对象（实际上并没有什么不同，但更干净）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-02T16:47:31.113

你不能在 JavaScript 中重载方法。在 javascript 中，函数存储在变量中。全局变量存储在窗口对象上。每个对象只能有一个具有相同名称的属性（独占键哈希）。

您可以做的是定义具有最多参数的定义并检查传入了多少。

```
function Test(a, b, c)
{
    if(typeof a == 'undefined') 
    {
        a = 1;
    }

    if(typeof b == 'undefined') 
    {
        b = "hi";
    }

    if(typeof c == 'undefined') 
    {
        c = Date.Now;
    }
} 
```

现在，如果我调用 Test()，它会表现得好像我调用了`Test(1, "hi", Date.Now)`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-02T16:48:34.490

JavaScript 中没有真正的函数重载，因为它允许传递任意数量的任意类型的参数。最好的做法是制作一个类似的函数： myfunc(opt)

```
{
// with opt = {'arg1':'a1','arg2':2, etc}, then check your opt inside of the function
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-10T01:17:36.837

我试图为[这里](http://stamat.wordpress.com/2013/04/10/javascript-function-overloading/)描述的这个问题开发一个优雅的解决方案。你可以在[这里](http://jsfiddle.net/stamat/Geh5r/)找到演示。用法如下所示：

```
var out = def({
    'int': function(a) {
        alert('Here is int '+a);
    },

    'float': function(a) {
        alert('Here is float '+a);
    },

    'string': function(a) {
        alert('Here is string '+a);
    },

    'int,string': function(a, b) {
        alert('Here is an int '+a+' and a string '+b);
    },
    'default': function(obj) {
        alert('Here is some other value '+ obj);
    }

});

out('ten');
out(1);
out(2, 'robot');
out(2.5);
out(true); 
```

用于实现此目的的方法：

```
var def = function(functions, parent) {
 return function() {
    var types = [];
    var args = [];
    eachArg(arguments, function(i, elem) {
        args.push(elem);
        types.push(whatis(elem));
    });
    if(functions.hasOwnProperty(types.join())) {
        return functions[types.join()].apply(parent, args);
    } else {
        if (typeof functions === 'function')
            return functions.apply(parent, args);
        if (functions.hasOwnProperty('default'))
            return functions['default'].apply(parent, args);        
    }
  };
};

var eachArg = function(args, fn) {
 var i = 0;
 while (args.hasOwnProperty(i)) {
    if(fn !== undefined)
        fn(i, args[i]);
    i++;
 }
 return i-1;
};

var whatis = function(val) {

 if(val === undefined)
    return 'undefined';
 if(val === null)
    return 'null';

 var type = typeof val;

 if(type === 'object') {
    if(val.hasOwnProperty('length') && val.hasOwnProperty('push'))
        return 'array';
    if(val.hasOwnProperty('getDate') && val.hasOwnProperty('toLocaleTimeString'))
        return 'date';
    if(val.hasOwnProperty('toExponential'))
        type = 'number';
    if(val.hasOwnProperty('substring') && val.hasOwnProperty('length'))
        return 'string';
 }

 if(type === 'number') {
    if(val.toString().indexOf('.') > 0)
        return 'float';
    else
        return 'int';
 }

 return type;
}; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-09-13T06:51:55.267

> 我不明白的是，如果我调用 somefunction() javascript 应该调用第一个函数，但问题是 javascript 实际上调用了第三个函数。

这是预期的行为。

> 这是为什么 ？

问题是 JavaScript 本身并不支持方法重载。因此，如果它看到/解析两个或多个具有相同名称的函数，它只会考虑最后定义的函数并覆盖以前的函数。

> 这是为什么 ？如何调用第一个和第二个函数？这是什么原因？

我认为适合大多数情况的一种方式如下 -

假设你有方法

```
function foo(x)
{
} 
```

您可以定义一个新方法**，而不是在 javascript 中不可能**的重载方法

```
fooNew(x,y,z)
{
} 
```

然后修改第一个函数如下 -

```
function foo(x)
{
  if(arguments.length==2)
  {
     return fooNew(arguments[0],  arguments[1]);
  }
} 
```

如果您有许多这样的重载方法，请考虑使用`switch`不仅仅是`if-else`语句。

> 是否有适当的方法来进行方法重载？行业标准是什么？

没有这样的标准或更成熟的方法来在 javascript 中进行方法重载。应该做最适合他们的编程设计的事情。**我想说简单地打开参数长度并检查类型是否未定义就足够了。**

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-10-04T17:30:15.343

**arguments**对象用于创建类似概念的方法重载。

**arguments**是一种特殊类型的对象，仅在函数执行上下文中可用。

**arguments.length**属性用于标识传递给函数的参数数量。

您可以更好地利用第一类函数来创建假方法重载。完整的概念在我自己的网站上进行了解释：[JavaScript 中的重载函数](http://bearnithi.com/2017/10/04/how-to-overload-functions-using-javascript/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-12T08:17:56.120

JavaScript 不直接支持方法重载。这是一个示例，您可以如何实现非常相似的目标，如下所示：

```
function overloadMethod(object, name, fn){

            if(!object._overload){
            object._overload = {};
            }

            if(!object._overload[name]){
            object._overload[name] = {};
            }

            if(!object._overload[name][fn.length]){
            object._overload[name][fn.length] = fn;
            }

              object[name] = function() {
                        if(this._overload[name][arguments.length])
                        return this._overload[name][arguments.length].apply(this, arguments);
              };
}

function Students(){
  overloadMethod(this, "find", function(){
            // Find a student by name
  });

  overloadMethod(this, "find", function(first, last){
            // Find a student by first and last name
  });

}

var students = new Students();
students.find(); // Finds all
students.find("Rahul"); // Finds students by name
students.find("Rahul", "Mhatre"); // Finds users by first and last name 
```

来源：[来源](http://www.infoworld.com/article/3196070/application-development/10-javascript-concepts-nodejs-programmers-must-master.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-02T18:18:48.557

如果您使用类，您将创建两个不同的类，它们具有相同的方法和不同的参数。然后，您可以使用扩展运算符和依赖注入来模拟重载行为。

```
class Foo{
  method(){
    console.log('hello from method foo')
  }
}

class Bar{
  method(name){
    console.log(`hello from method bar. Name is ${name}`) 
  }
}

function MimicOverload(obj, options){
    obj.method(...options)  
}

const obj1 = new Foo()
const obj2 = new Bar()

MimicOverload(obj1,[])
MimicOverload(obj2,['overloaded'])
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-01T14:32:19.077

[我对此](https://fragiledeveloper.com/2021/09/30/dttah-function-overloading-in-js.html)进行了修补，并且能够轻松地针对自定义类进行这项工作。

```
let overloadTest = overload(
    [String], function(value) {
        console.log('we got a string', value);
    },
    [Number], function(value) {
        console.log('we got a number', value);
    },
    [String, Number], function(s, n) {
        console.log('we got a string AND a number', s, n);
    }
    [MyCustomClass], function(value) {
        console.log('we got a MyCustomClass instance', value);
    }
); 
```

有了这个`overload`实现：

```
function overload(...overloads) {
    const f = function(...args) {
        let constructorArray = args.map(arg => arg.constructor);
        let implIndex = f.overloads.findIndex(sig => {
            return constructorArray.length === sig.length &&
                constructorArray.every((o,i) => o === sig[i])
            ;
        }) + 1;
        if (implIndex > 0 && typeof(f.overloads[implIndex]) === 'function') {
            return f.overloads[implIndex].apply({}, args);
        } else {
            const message = "There is no implementation that matches the provided arguments.";
            console.error(message, constructorArray);
            throw Error(message);
        }
    };
    f.overloads = overloads;
    return f;
}; 
```

这还不适用于实例方法。但是，它可以延长。

此外，参数列表直接引用构造函数（而不是字符串），这意味着您可以根据需要扩展额外的验证 - 例如，确保每个参数类型实际上是一个函数/构造函数`overload()`。您还*可以想象*创建一个`overload()`执行 DI 的版本。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-24T00:46:18.617

我认为这不能被认为是方法重载，但它是使用一个函数来不同参数组合的一种替代方法。函数的参数需要是一个对象。

```
function something(obj){
   if(obj.a != undefined){
      return a*a;
   }
   if((obj.b != undefined)&&(obj.c != undefined)){
      return b*c;
   }
} 
```

# html - jEditable TextArea，我需要在保存时保持格式，但在编辑时显示用户友好的文本（MVC3）

> ID：12694589
> 
> 赞同：2
> 
> 时间：2012-10-02T16:42:07.483
> 
> 标签：html, asp.net-mvc-3, razor, view, jeditable

我在我的程序中的 textarea 上使用 jEditable 插件。我想做的是，当我点击文本区域时，我想输入类似的内容：首先执行此操作，执行此操作，然后执行此操作，然后执行此操作。

当我提交时，我希望 jEditable 保留我现有的格式，这是我当前的 textarea 所做的，但是当我单击 textarea 再次编辑时，它会显示以下内容：首先
执行此操作，执行此操作，执行此操作，执行此操作，执行此操作，执行此操作，执行此操作
。

我希望能够再次单击文本区域进行编辑，然后让它显示用户友好的文本，而不是它所做的 html，但我需要保持格式不变。

下面是我的 javascript、视图和控制器。任何帮助都会很棒！

Javascript：

```
$(".textarea").editable("/ShoppingList/UpdateNotesReminders",
{
     type      : 'textarea',
     rows      : 7,
     columns   : 15,
     cancel    : 'Cancel',
     submit    : 'Save',
     method: 'POST',
     placeholder     : 'No Notes have been entered',
     callback: function(value, settings) { 
    var retval = value.replace(/\n/gi, "<br>"); 
    $(this).html(retval);
}
}); 
```

行动：

```
//This action is called when save button is clicked after editing notes and reminders.
        [ValidateInput(false)]
        public string UpdateNotesReminders(string id, string value)
        {
            HttpCookie notesRemindersCookie = new HttpCookie("notesRemindersCookie");
            notesRemindersCookie.Value = value.Replace("<br>", "%0a");
            notesRemindersCookie.Expires = DateTime.Now.AddDays(1);

            this.ControllerContext.HttpContext.Response.Cookies.Add(notesRemindersCookie);
            return value;
        } 
```

看法：

```
<div class="textarea dynform" id="NotesReminders">@Html.Raw(Model.NotesReminders)</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:29:52.037

我认为您的帖子已从您尝试显示的一些 HTML 中删除...

但我认为您的问题的解决方案是 HTMLEncode/Decode 用户内容。

# javascript - Galaxy S3 - 用户代理检测

> ID：12694599
> 
> 赞同：0
> 
> 时间：2012-10-02T16:42:40.263
> 
> 标签：javascript, android, jquery, html, user-agent

以下脚本主要用于检测 Android 设备：

```
var ua = navigator.userAgent.toLowerCase();
var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
if(isAndroid) {
//do stuff

} 
```

但是，在 Galaxy S3 上，isAndroid 是错误的。我怎样才能说明这个设备？

# ruby-on-rails - 如何发送删除请求并检查 Capybara::Session 而不是 Rack::Response？

> ID：12694602
> 
> 赞同：1
> 
> 时间：2012-10-02T16:42:44.783
> 
> 标签：ruby-on-rails, cucumber, capybara, rack-test

我正在用黄瓜、水豚和机架测试进行测试。

我想发送一个删除请求，然后检查响应。

我发现该方法`visit(url)`将响应存储在`page`一个`Capybara::Session`.

现在我正在使用该方法发送删除请求，`delete url`然后`follow_redirect!`. 这里的问题是这些方法将响应存储在对象`last_response`中，即`Rack::MockResponse`.

我的 web 步骤是使用该`page`对象构建的，但我找不到发送删除请求并将响应存储在`page`.

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:25:58.453

我认为您可以通过以下方式使用 Capybara 驱动程序：

```
page.driver.delete 
```

# c# - 为什么 10 亿 * 100 == 12 亿？

> ID：12694603
> 
> 赞同：3
> 
> 时间：2012-10-02T16:42:54.130
> 
> 标签：c#, math

我有代码将单元格的默认值设置为上述单元格的值乘以 100：

```
const int DUCKBILL_MULTIPLIER = 100;
. . .
cellValue = dataGridViewPlatypi.Rows[args.RowIndex - 1].Cells[0].Value;
if (Convert.ToInt32(cellValue) > 0)
{
    int nextDefaultVal = Convert.ToInt32(cellValue) * DUCKBILL_MULTIPLIER;
    cellValue = nextDefaultVal;
}
prevVal = cellValue == null ? string.Empty : cellValue.ToString();
. . .
dataGridViewPlatypi.Rows[args.RowIndex].Cells[args.ColumnIndex].Value = prevVal; 
```

但是一旦上面的值变成 1000000000（10 亿），下一个值是 1215752192（1,215,752,192 或大约 12 亿）而不是 1000 亿。

我了解最大 int 值为 2,147,483,647（约 21 亿）；那么为什么下一个值是 1,215,752,192 而不是 2,147,483,647？

顺便说一句，这些 val 比应用程序需要的更大，但我在测试“极端”案例时发现了这一点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T16:46:51.287

因为发生了多次溢出。每次达到 2,147,483,647 时，计数重新开始。现在，您必须记住它溢出到 -2,147,483,648。`(Int64)Int32.MaxValue + 1 - Int32.MinValue`所以我们必须考虑整个 Int32 范围，即4,294,967,296（可以从`2^32`.

数学：

```
(1 billion * 100) % (4,294,967,296) = 1215752192 
```

C# 代码中的概念证明：

```
var range = (Int64)Int32.MaxValue + 1 - Int32.MinValue;
Int64 val = 100000000000 % range;
Console.WriteLine(range);
Console.WriteLine(val); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T16:47:48.383

[(1,000,000,000 * 100) mod ((2,147,483,647 + 1) * 2) = 1,215,752,192](http://www.wolframalpha.com/input/?i=%281%2C000%2C000%2C000+%2a+100%29+mod+%28%282%2C147%2C483%2C647+%2B+1%29+%2a+2%29)

这是由于[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)。

# java - Java - 使用 JScrollPane

> ID：12694606
> 
> 赞同：4
> 
> 时间：2012-10-02T16:43:06.923
> 
> 标签：java, swing, jframe, jscrollpane, jtextarea

我第一次尝试使用带有 JTextArea 的 JScrollPane 不会计划 -

```
JFrame window = new JFrame("Scroll test");       
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
window.setResizable(false);
window.setLayout(null);
window.setVisible(true);
window.setBounds(500, 200, 700, 700);

JTextArea textArea = new JTextArea(5,30);
textArea.setBounds(18, 0, 682, 500);
textArea.setEditable(false);

JScrollPane textScroll = new JScrollPane(textArea,    JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
            JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

textScroll.setBounds(0, 0, 18, 500);
window.add(textScroll); 
```

基本上就是这样，我在左侧得到一个滚动窗格，但它没有你可以拖动的那些块状东西之一，即使我用废话填充文本区域所以它扩展到超出范围....谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T16:54:43.573

建议：

*   不要设置 JTextArea 的边界或 preferredSize，因为它们都会限制它的增长，从而阻止功能性滚动条的出现。
*   最好给 JTextArea 一个有意义的列和行计数。
*   不要使用空布局或绝对定位。使用嵌套容器要好得多，每个容器都使用合理且易于使用的布局管理器。
*   不要像这里的其他人建议的那样设置 JScrollPane 的 preferredSize。同样，所需要的只是对 JTextArea 的列和行属性使用合理的数字。
*   而是让组件自己的首选大小和布局管理器为您完成繁重的工作。

**编辑**：你说，

> 我需要使用绝对，因为我的 JFrame 中最终会有更多，布局管理器不会给我自由，我需要正确定位所有内容

我的回答：您之所以这么说，是因为您不熟悉布局管理器的全部用途和功能，以及它们如何使创建复杂的 GUI 比绝对定位简单得多。作为一个 Swing 用户，相信我，你对那句话的看法是错误的。询问任何 Swing 专家，他们都会告诉你同样的情况。例如，想象一下创建一个具有绝对定位的复杂布局，然后意识到您必须在集合中再添加一个 JRadioButton。如果您正在执行绝对定位，则必须调整 GUI 的大小，重置所有位置会受到添加影响的组件的位置。使用布局管理器，特别是嵌套布局及其容器，您可能需要做的就是更改一行代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T16:58:24.613

问题是您将滚动窗格的大小设置为 18 的宽度。考虑到通常的垂直滚动条大约需要 20 像素，您看不到太多。

1.  `null`除非绝对必要，否则不要使用布局
2.  不要强制边界/大小等...
3.  呼叫`JFrame.setVisible(boolean)`应该是最后一次呼叫

这是一个可以帮助您入门的示例：

```
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class TestScrollPane {

    protected void initUI() {
        JFrame window = new JFrame(TestScrollPane.class.getSimpleName());
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setResizable(false);
        JTextArea textArea = new JTextArea(25, 30);

        JScrollPane textScroll = new JScrollPane(textArea, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

        window.add(textScroll);
        window.pack();
        window.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestScrollPane().initUI();
            }
        });
    }
} 
```

# xaml - 鼠标悬停在 GridView 上时启用滚动

> ID：12694607
> 
> 赞同：1
> 
> 时间：2012-10-02T16:43:10.667
> 
> 标签：xaml, microsoft-metro, windows-runtime, winrt-xaml

我有以下 XAML 布局：

```
<ScrollViewer>
    <Grid>
         <GridView/>
         // several gridviews with other data and other controls
    </Grid>
</ScrollViewer> 
```

当鼠标在 GridView 之外时，布局是水平的并且可以滚动。就在鼠标悬停在 GridView 的那一刻，滚动停止并仅在鼠标离开 GridView 时继续。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T01:41:25.873

鼠标滚动事件被网格视图中使用的滚动查看器吃掉了。为了避免这种情况，只需将网格视图的模板修改为如下所示（从网格视图中删除内置的滚动查看器）。

```
 <Style TargetType="GridView" x:Key="GridViewStyle">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <ItemsPresenter Margin="{TemplateBinding Padding}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:08:35.537

你不能将 GridViews 放在 ScrollViewer 中！那会有所帮助。使用带有组的单个 GridView 或带有 WrapGrids 的水平方向的 StackPanel 的 ScrollViewer。

# c# - 使用 async/await 锁定资源

> ID：12694613
> 
> 赞同：32
> 
> 时间：2012-10-02T16:43:41.047
> 
> 标签：c#, .net, synchronization, locking, async-await

我有一个应用程序，其中有一个共享资源（运动系统），可以由多个客户端访问。我有个别操作需要在移动期间访问系统，如果同时请求冲突操作，则应该抛出“忙碌”异常。我也有 Sequencer，需要获得对 Motion 系统的独占访问权限以执行多个操作，并穿插其他操作；在整个序列中，没有其他客户端应该能够运行操作。

我传统上使用线程关联来解决这个问题，以便线程可以请求独占访问并运行与操作相对应的阻塞调用。虽然线程具有访问权限，但没有其他线程可以使用该资源。我现在遇到的问题是我已经转向使用 async/await 模式来实现我的系统，以允许更清晰的序列器实现。问题是现在我的定序器并不总是在同一个线程上运行；活动线程可以在回调过程中发生变化，因此不再容易确定我是否处于有效的上下文中以继续运行操作。需要注意的一点是，一些操作本身是由等待组成的，这意味着序列和单个操作都可以跨越多个线程。

我的问题：有没有人知道一个很好的模式来处理由于异步/等待而在线程切换的情况下获取独占访问？

作为参考，我考虑了一些事情：

1.  我可以创建一个自定义 SynchronizationContext，它将序列持续时间内的所有定序器调用编组回单个线程。这样做的好处是允许我重用现有的线程关联访问管理代码。不利的一面是，每当我执行序列或操作时，这都需要专用线程（因为操作也可以跨越多个线程。）

2.  创建一个可获取的访问令牌以传递给 Operation 方法，以证明您已获得访问权限。这具有使用令牌参数使方法膨胀的缺点。

3.  使用 (2) 中的访问令牌方法，但为操作接口创建一个重复的接口实现，以便可以使用令牌“烘焙”来实例化包装器。这会创建一些丑陋的胶水代码，但它会清理序列器代码，以便不再需要将令牌传递给每个方法。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-02T17:05:29.607

> 我的问题：有没有人知道一个很好的模式来处理由于异步/等待而在线程切换的情况下获取独占访问？

是的，您可以使用[`AsyncLock`](http://blogs.msdn.com/b/pfxteam/archive/2012/02/12/10266988.aspx)，它也作为我的[AsyncEx 库](https://github.com/StephenCleary/AsyncEx)的一部分提供。如果您想进行“TryLock”类型的操作，那么您可能必须创建自己的原语。

您确实失去了一些进行安全检查的能力：无法检查当前执行的线程是否具有特定的`AsyncLock`.

其他选项包括（我在[这里](http://nitoprograms.blogspot.com/2012/08/async-and-scheduled-concurrency.html)`ConcurrentExclusiveSchedulerPair`写博客）或 TPL 数据流。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-11-16T13:02:10.690

有[`SemaphoreSlim.WaitAsync`](https://msdn.microsoft.com/en-us/library/hh462723.aspx?f=255&MSPPError=-2147217396)一个非常适合这里的。（我在[一个类似的问题](https://stackoverflow.com/a/18257065/58768)中找到了它）。

# c# - 带有动态列的 GridView - 显示 html

> ID：12694616
> 
> 赞同：2
> 
> 时间：2012-10-02T16:44:00.997
> 
> 标签：c#, gridview, datatable

我正在尝试显示列是动态的表格数据。我目前正在使用将 AutoGenerateColumns 设置为 true 的 GridView。

一切都“有效”，但我的值中的任何 html 都显示为 html 字符串 - 而不是呈现的 html。IE：显示创建链接的 html 而不是显示链接。

或者也许有更好的方法来完成这项任务。

更多细节：我正在显示基于月份的“销售预测”。“列”适用于各种产品 - 这些产品是动态的。

因此，对于 2012 年 11 月的预测，我正在执行以下操作；

我正在动态创建一个 DataTable，其中包含 UserId、Name、3MonthProjection 的列。然后也为每个产品添加一列（通过循环）。因此，如果下个月 - 有新产品可用 - 它将被添加到列表中。

然后我用每个销售代表的各自值填充数据表。如果销售代表没有为月/年或产品创建预测 - 只显示零。

现在 - 因为我的列是动态的 - 除了 w/ AutoGenerateColumns=true 之外，我想不出一种“漂亮”渲染网格的方法

为了减少不重要的列 - 我正在制作名称列，包括一个编辑链接，该链接格式化一个带有 UserId、ForecastId（可能为空）、Month、Year 值的链接。仅当用户具有编辑权限时才会生成此链接（管理员可以编辑所有 - 用户可以编辑自己的）

列数据显示：

```
Dennis Welker <a href="javascript:dnnModal.show('http://mysite.com/SalesReps/tabid/83/ctl/forecast/mid/425/uid/8/fid/601/mo/9/yr/2012/Default.aspx?popUp=true',/*showReturn*/false,550,950,true,'')">Edit</a> 
```

而不是像这样渲染它：Dennis Welker Edit
（其中 Edit 是一个链接）

如果我没有让您感到困惑-您对如何将数据显示为链接有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:56:42.450

您可以使用`Server.HtmlEncode`方法来编码您的链接

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/w3te6wfz.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/w3te6wfz.aspx)

注意：您将此功能应用于您的数据

# php - 如何将 Zend 生成的 XML 文件加载到 PHP 脚本中？

> ID：12694617
> 
> 赞同：1
> 
> 时间：2012-10-02T16:44:00.767
> 
> 标签：php, xml, zend-framework, simplexml

我有一个基于 Zend 框架的内容管理系统 (Omeka)。网站上的页面具有不同的输出选项，例如 XML 和 JSON。

我能够验证该站点的输出。当我将 XML 文件保存为服务器上的 .xml 文件时，我的代码能够加载它。但是当我引用脚本生成的 XML 文件的 URL 时，PHP 会返回错误。虽然它返回 404，但我可以将尝试加载的 URL 放入浏览器中，然后我会看到正确的 XML 页面。

我正在加载的脚本： http: [//lw4.gc.cuny.edu/_dev_push/archive/items/show/1](http://lw4.gc.cuny.edu/_dev_push/archive/items/show/1?output=omeka-xml) ?output=omeka-xml 。

这是我用来尝试加载文件的代码。我只是在尝试一系列方法，看看它们中的任何一个是否有效。如果可以的话，我更喜欢使用 SimpleXML 方法：

```
 $xml = simplexml_load_file('http://lw4.gc.cuny.edu/_dev_push/archive/items/show/id/1?output=omeka-xml');
    $doc = new DOMDocument();
    $doc->loadXML('http://lw4.gc.cuny.edu/_dev_push/archive/items/show/id/1?output=omeka-xml');
    echo $doc->saveXML();

    $str = file_get_contents('http://lw4.gc.cuny.edu/_dev_push/archive/items/show/id/1?output=omeka-xml');
    echo $str; 
```

以下是我输入动态生成的 XML 页面的确切 URL 时脚本返回的错误。

> 警告：simplexml_load_file（http://lw4.gc.cuny.edu/_dev_push/archive/items/show/id/1?output=omeka-xml）：打开流失败：HTTP 请求失败！HTTP/1.1 404 Not Found in /var/www/html/_dev_push/wp-content/plugins/omekafeed/omekafeed.php 第 122 行警告：simplexml_load_file()：I/O 警告：未能加载外部实体“http:// /lw4.gc.cuny.edu/_dev_push/archive/items/show/id/1?output=omeka-xml” 在 /var/www/html/_dev_push/wp-content/plugins/omekafeed/omekafeed.php 上线122 警告：DOMDocument::loadXML()：需要开始标记，在实体中找不到“<”，行：1 在 /var/www/html/_dev_push/wp-content/plugins/omekafeed/omekafeed.php 中的第 124 行警告：file_get_contents（http://lw4.gc.cuny.edu/_dev_push/archive/items/show/id/1?output=omeka-xml）：打开流失败：HTTP请求失败！HTTP/1。

当我以这种方式指定 URL 时，脚本会加载。请注意，在这种情况下 text3.xml 不是使用脚本动态生成的，但它与前面示例中调用的 xml 文件相同。

```
 $xml = simplexml_load_file('http://lw4.gc.cuny.edu/_dev_push/archive/test3.xml');
    $doc = new DOMDocument();
    $doc->loadXML('http://lw4.gc.cuny.edu/_dev_push/archive/test3.xml');
    echo $doc->saveXML();

    $str = file_get_contents('http://lw4.gc.cuny.edu/_dev_push/archive/test3.xml');
    echo $str; 
```

没有密码保护我正在使用的网站部分。我在同一个域上工作，但值得指出的是，我正试图将 XML 内容从一个单独的内容管理系统拉到另一个 [即在第一个的子目录中]。

当我指定一个硬编码但相同的 XML 文件时，我可以让这些脚本工作，我怀疑动态 XML 文件是由 Zend 生成的，这是问题所在，但我找不到任何参考此功能，或如何更改它。

你怎么看，我能做些什么来加载这个内容，以便我可以用我的 PHP 脚本解析它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:30:39.007

> 我有一个基于 Zend 框架的内容管理系统 (Omeka)。网站上的页面具有不同的输出选项，例如 XML 和 JSON。

阅读文档，看看您是否可以了解如何使用[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)请求访问这些资源。如果你能做到这一点，你就可以将返回的 XML 或 JSON 放入你需要的任何形式。

否则，您可能需要使用[cURL()](http://www.php.net/manual/en/intro.curl.php)之类的内容来抓取页面，然后将结果放入您需要的表单中。

# android - FragmentActivity、ViewPager 和 MapActivity

> ID：12694619
> 
> 赞同：1
> 
> 时间：2012-10-02T16:44:16.887
> 
> 标签：android, android-mapview, fragment

我目前正在使用预定义的导航类型“Tabs + swipe”（最初是在我创建项目时选择的）。

我有三个选项卡，我需要两个列表视图和一个 MapActivity。感谢 FragmentList，我成功地显示了列表视图，但现在我正在尝试显示 MapActivity，但我的代码根本不起作用：/

这是我添加的内容：

```
public static class MyFragment extends Fragment {
        int idList;

        private MapView map=null;
        private MyLocationOverlay me=null;

        static MyFragment newInstance(int num) {
            MyFragment f = new MyFragment();

            Bundle args = new Bundle();
            args.putInt("num", num);
            f.setArguments(args);

            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            return(new FrameLayout(getActivity()));
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            map = new MapView(getActivity(), "xxxxxxxxxx");
            map.setClickable(true);

            Drawable marker=getResources().getDrawable(R.drawable.ic_action_search);
            marker.setBounds(0, 0, marker.getIntrinsicWidth(), marker.getIntrinsicHeight());

            map.getOverlays().add(new ItemizedOverlay(marker, getActivity()));

            me = new MyLocationOverlay(getActivity(), map);
            map.getOverlays().add(me);

            ((ViewGroup)getView()).addView(map);
        }
    } 
```

在我的 FragmentPagerAdapter 中进入 getItem(int) 我这样做：

```
public Fragment getItem(int position) {
    if(position == 0)
       return MyFragment.newInstance(0);
} 
```

然后我得到了这个错误：

```
10-02 18:28:41.618: E/AndroidRuntime(23677): FATAL EXCEPTION: main
10-02 18:28:41.618: E/AndroidRuntime(23677): java.lang.IllegalArgumentException: MapViews can only be created inside instances of MapActivity.
10-02 18:28:41.618: E/AndroidRuntime(23677):    at com.google.android.maps.MapView.<init>(MapView.java:291)
10-02 18:28:41.618: E/AndroidRuntime(23677):    at com.google.android.maps.MapView.<init>(MapView.java:235) 
```

关于我应该做什么的任何想法？

# c# - 在 ASP.NET MVC 中的根目录中查看的路由

> ID：12694623
> 
> 赞同：3
> 
> 时间：2012-10-02T16:44:37.343
> 
> 标签：c#, asp.net-mvc-3

我有一个 ASP.NET MVC 3 应用程序。我有点了解路线，但有时我会卡在某些东西上。目前，我的文件结构如下：

```
/Controllers
  Child1Controller.cs
  Child2Controller.cs
  RootController.cs
/Views
  Index.cshtml
  Test.cshtml
  Child1
    Index.cshtml
    Item.cshtml
  Child2
    Index.cshtml
    Item.cshtml 
```

我可以从 Child1 和 Child2 的视图中成功获取 html。通过在我的浏览器中访问 /Child1/Index 或 /Child2/Index。但是，我不知道如何仅使用 /Index 来查看 /Views 目录中的 Index.cshtml 的内容。我该如何接线？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T02:41:01.690

为了访问视图，它们需要与 MVC 中的控制器/动作相关联。对于您的 Child1/Index 和 Child2/Index，您的 Child1 和 Child2 控制器中有类似于以下内容的代码：

```
public ActionResult Index(){
    return View();
} 
```

对于您所询问的观点，您可以做以下两件事之一。

1: You can create a Root folder and move those views into that folder. When returning a view from an ActionMethod, MVC will first look in the Views folder for a folder that is the same name as the controller ("Root") and in there, look for a View that corresponds to the ActionName. If it cannot find one there, MVC will then look in the Views/Shared folder. If it cannot find it there, an error is thrown. So, in your rootcontroller.cs file, create the following action methods:

```
public ActionResult Index(){
        return View();
    }

public ActionResult Test(){
        return View();
    } 
```

2: If you really really want to keep your folder structure the way that it is, you can specify exactly where the view is that you want the action to return (can be used to return a view that is not the same name as your action method as well). Change those action methods in your rootcontroller.cs file to specify where the view is that you want to return for that action:

```
public ActionResult Index(){
        return View("~/Views/Index.cshtml");
    }

public ActionResult Test(){
        return View("~/Views/Test.cshtml);
    } 
```

Note that both of these methods assume that you have modified the default route to use "Root" as the default controller as out of the box, it is the "Home" controller. Now, with either of these two methods, you can use the following:

```
www.yoursite.com -> Returns Root/Index
www.yoursite.com/Root/Test -> Returns Root/Test
www.yoursite.com/Root/Index -> Returns Root/Index 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:53:27.437

只会`/Index`路由到默认控制器，它是路由配置中指定的索引操作（通常在 Global.asax.cs 中）。但是，此默认控制器的适当操作将返回 ViewResult，它将尝试在“控制器”文件夹中查找视图。因此，如果您的默认控制器是 RootController，则视图必须位于`Root/Index`. 也在共享文件夹中搜索视图，但无论如何都不是根目录。如果您想更改此订单，请尝试[此链接](https://stackoverflow.com/questions/4198566/can-i-change-the-search-order-for-the-physical-views-of-an-asp-net-mvc-3-applica)

# catalog - 有趣：如何实现这个产品目录效果

> ID：12694624
> 
> 赞同：0
> 
> 时间：2012-10-02T16:44:38.510
> 
> 标签：catalog, layered-navigation

任何人都可以让我知道如何使用 Magento 实现这种效果。

这种效果基于产品的目录或文件夹结构。主目录或文件夹显示图像本身以及其中的产品总数。

单击任何文件夹后，可以看到与该文件夹相关的所有产品。这甚至是基于分层导航的。客户浏览收藏非常方便。一旦他们再次回来，他们甚至可以找到他们的产品。

这些产品的独立链接也在网站上，通过该链接可以从它们的主要类别下直接浏览这些产品。

我提供了两种方式的链接。1. [http://www.utsavfashion.in/store/variety.aspx?cat=salwar](http://www.utsavfashion.in/store/variety.aspx?cat=salwar)

下面是主要类别 Salwar kameez 下的链接（可以看到所有产品，并且可以使用左侧的多个复选框分层导航过滤器进行过滤） 2\. [http://www.utsavfashion.in/store/items.aspx？猫=萨尔瓦](http://www.utsavfashion.in/store/items.aspx?cat=salwar)

我相信每个人都会喜欢这个并希望在他们自己的网站上看到这个。甚至开发人员和程序员都希望在他们的主题和 Magento 默认功能中使用和合并此功能。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:33:27.170

经过一番浏览，我发现市场上很少有可用于点数 2 的多选复选框分层导航过滤器的扩展但是，我还没有找到点数 1 的选项

# javascript - 数据表中的页面事件示例？

> ID：12694633
> 
> 赞同：3
> 
> 时间：2012-10-02T16:45:13.877
> 
> 标签：javascript, jquery, datatables

奇怪的问题——我正在寻找一个示例，说明如何在我正在处理的 DataTables 项目中将“页面”事件付诸实践。

文档在这里 - [http://datatables.net/docs/DataTables/1.9.4/#page](http://datatables.net/docs/DataTables/1.9.4/#page)。我只是无法将其转化为可使用的工作示例。

更具体地说，我正在尝试运行一个读取每一行的函数，如果其中任何一个具有特定的类（由用户交互创建），则将其删除——并在每个页面更改事件中发生这种情况。我已经编写了这个函数，如果我修改 API，它就可以工作，但如果我能以某种方式将它应用于上述页面事件，那将是理想的。

提前感谢您的帮助，任何信息都非常感谢！

此外，如果有帮助，我正在使用 Datatables 1.7.6！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:56:39.353

对表格进行分页时会触发 page 事件。

```
$(document).ready(function(){
    var tab = $('#example').dataTable();
    tab.on('page', function( e, o) {
        // Do something when you paginate the table
   } );
}); 
```

是什么阻碍了你？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:22:21.657

我发现（从他们论坛上的 Datatables 的创建者那里），下面的代码有效：

```
$('#myTable').on('page', function () {...} ); 
```

它仅在您使用 1.8 或更高版本时才有效，并且就我的目的而言，它运行良好。

此外，如果您需要在每次表加载时运行一个函数，而不是页面事件，您可以使用 fnDrawCallback。我分享这个是因为我希望我在几天前就澄清了这个问题，因为它可以为我节省几个小时！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-27T13:35:00.603

您可以使用它来获取触发事件，包括平滑滚动：

```
// Datatables scroll to top when next button is clicked
var oldStart = 0;
oTable = $('#table').dataTable({
    fnDrawCallback": function (o) {
        // This function scrolls the anchor point to the top when the user clicks next. also known as 'Go to Top'
        if ( o._iDisplayStart != oldStart ) {
            alert ("Next button click");
            var targetOffset = $('#table').offset().top;
            $('html,body').animate({scrollTop: targetOffset}, 1000);
            oldStart = o._iDisplayStart;
        }
    }
}); 
```

# css - div的CSS3弯曲切口？

> ID：12694635
> 
> 赞同：3
> 
> 时间：2012-10-02T16:45:20.430
> 
> 标签：css

`div`有没有办法在下面的示例中创建一个切口`CSS3`？

![在此处输入图像描述](../Images/1c3a6f4a9b9cc476249042c36a7a9b4e.png)

我想要做的是在 2 之间创建一个切口`divs`作为图像。`div`被切掉的实际是`div`底部的，它有 a `background-color`， a`drop shadow`和`inset shadow`a `border style`。

然后我想做的是`CSS3`在`div`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T09:34:45.543

**编辑 - 新解决方案**

使用`radial-gradient`，可以在抠图 div 中达到新的质量水平：`[**Running Demo**](http://jsfiddle.net/AndreaLigios/tUHZW/)`

[在https://stackoverflow.com/a/18853833/1654265](https://stackoverflow.com/a/18853833/1654265)上阅读更多信息

* * *

**旧解决方案**

你可以在同质的背景下做到这一点，而不是像你这样的艺术背景。有些事情是 CSS 永远不会做的，例如变成 Photoshop。

但是，您可以使用边框、负边距和 z-index 来解决问题；

演示：http: [//jsfiddle.net/cB8Qq/](http://jsfiddle.net/cB8Qq/)

HTML

```
<body>
    <div class="container">
        <div class="rounded">bla bla bla</div>
        <div class="digged"> <br/><br/>or yada yada yada </div>
    </div>
</body> 
```

CSS

```
.container{
    text-align: center;
    background: #ddd;    
}

.rounded{
    margin: 0 auto;
    border-radius: 50px;
    width: 200px;
    height: 30px;
    background: silver;    
    padding: 10px;    
    border: 10px solid #ddd;    
    z-index: 1;
    position: relative;
}

.digged{    
    margin: 0 auto;
    background: silver;
    width: 400px;
    height: 100px;
    margin-top: -30px
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:02:38.443

您可能必须简化您的设计，但使用渐变和伪元素可能会产生类似的效果。

[演示](http://codepen.io/anon/pen/ouKCq)

```
body{background: salmon;}
.main {background:gray; width:300px; height:200px; position: relative; margin-top:20px;}
.main:after, .main:before{content:''; width: 50px; height: 20px; background: inherit; position: absolute; }
.main:after{ top:-20px; left:0;}
.main:before{ top:-20px; right:0;}

.phone{width:175px; height:40px; background: gray; margin-left:62.5px; border-radius: 50px; text-align: center; line-height: 40px; position: relative;}

.phone:after,.phone:before{content:''; width:20px; height:20px; background:red; position: absolute;}

.phone:before{bottom:-20px; left:-12px; background: -webkit-radial-gradient(100% 0, circle, rgba(204,0,0,0) 20px, gray 15px);}
.phone:after{bottom:-20px; left:168px; background: -webkit-radial-gradient(0 0, circle, rgba(204,0,0,0) 20px, gray 15px);} 
```

# php - 使用 PHP 检索 Exchange 附件不适用于 ipm.task（但适用于 ipm.appointment）

> ID：12694636
> 
> 赞同：2
> 
> 时间：2012-10-02T16:45:22.520
> 
> 标签：php, outlook, exchange-server, exchangewebservices

我在使用 PHP/EWS 获取 Exchange 任务的附件时遇到问题。对于 ipm.appointment，一切正常，我可以获取附件。对于 ipm.task，该属性为空。

经过数小时的尝试和错误，我不知道。

对于调试，我使用的是 EWSEditor。在这里我看到该项目非常大，附件不是一个空集合。但是属性 HasAttachments 是假的，但是为什么呢？

PHP脚本的结果是

```
object(stdClass)#39 (9) {
["ItemId"]=>
  object(stdClass)#40 (2) {
    ["Id"]=>
    string(164) "AAIARgAAAAAAGkRzkKpmEc2byACqAC/EWgkAEWYmayPoi0CgP855Sgd6HgAAAPLGlgAAEWYmayPoi0CgP855Sgd6HgAAATeKvQAALgAAAAAAGkRzkKpmEc2byACqAC/EWgMAEWYmayPoi0CgP855Sgd6HgAAAPLGlgAA"
    ["ChangeKey"]=>
    string(40) "EwAAABYAAAARZiZrI+iLQKA/znlKB3oeAAABNFP4"
  }
  ["Subject"]=>
  string(13) "auch ein test"
  ["Body"]=> ...
  ["Attachments"]=>
  array(0) {
  }
  ["Categories"]=>
  object(stdClass)#45 (1) {
    ["String"]=>
    string(3) "WWW"
  }
  ["HasAttachments"]=>
  bool(false)
} 
```

我知道它就像一个水晶球，但我不知道提供更多细节。有什么建议么？非常感谢。

好的，我已经查看了原始 XML 请求和 XML 响应，并且附件在响应中。问题是属性“HasAttachments”，因为这仍然是错误的。我的 PHP 脚本只检查这个属性，尽管结果是 PHP 中的一个空数组。

![EWS编辑](../Images/76bb3d726426ac6e113ef0cb0283b913.png)

更改我的 PHP 脚本不是问题。但是为什么属性 HasAttachments 是假的，虽然对象有附件？奇怪的行为...

# sdk - 在 Rally 中查询用户故事修订

> ID：12694644
> 
> 赞同：3
> 
> 时间：2012-10-02T16:45:48.840
> 
> 标签：sdk, rally

我想使用与用户故事关联的 URL 检索修订日志的 JSON 对象。我已经使用以下代码使用 jQuery 完成了此操作，尽管我更愿意使用 Rally SDK 中的内置工具来完成此操作。我对 Ext.Ajax 或 Ext.data.JsonP 请求没有任何运气，尽管我觉得这是正确的方法。任何帮助，将不胜感激。

```
$.ajax({
    url: URL,
    dataType: 'jsonp',
    jsonp: 'jsonp',
    success: function(response) {
        $.each(response.RevisionHistory.Revisions, function(key, rev) {
            //Parse Revision Log
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:30:32.453

这对于 App SDK 2.0 来说相对简单。文档中的以下示例应该对您有所帮助：

[http://developer.rallydev.com/apps/2.0p4/doc/#!/guide/appsdk_20_data_models](http://developer.rallydev.com/apps/2.0p4/doc/#!/guide/appsdk_20_data_models)

[http://developer.rallydev.com/apps/2.0p4/doc/#!/guide/appsdk_20_data_stores](http://developer.rallydev.com/apps/2.0p4/doc/#!/guide/appsdk_20_data_stores)

这是一个快速的小代码片段，用于获取特定故事的修订历史：

```
Rally.data.ModelFactory.getModel({
    type: 'UserStory',
    success: function(storyModel) {
        var storyRef = 'https://rally1.rallydev.com/slm/webservice/1.37/hierarchicalrequirement/12345.js';
        var storyID = Rally.util.Ref.getOidFromRef(storyRef);
        storyModel.load(storyID, {
            fetch: ['Name', 'FormattedID', 'Description', 'RevisionHistory', 'Revisions'],
            callback: function(story, operation) {
                if(story && story.get('RevisionHistory') && story.get('RevisionHistory').Revisions) {
                    Ext.Array.each(story.get('RevisionHistory').Revisions, function(revision) {
                        //Parse revision log
                    });
                }
            }
        });
    }
}); 
```

使用 SDK 的好处是它会根据您运行应用程序的方式自动执行 ajax 与 jsonp 请求。上面的示例非常适合单个故事。如果您想解析多个故事，您需要使用 store 而不是 model.load：

```
Ext.create('Rally.data.WsapiDataStore', {
    model: 'UserStory',
    autoLoad: true,
    fetch: ['Name', 'FormattedID', 'Description', 'RevisionHistory', 'Revisions'],    
    listeners: {
        load: function(store, stories) {
            Ext.Array.each(stories, function(story) { 
                if(story && story.get('RevisionHistory') && story.get('RevisionHistory').Revisions) {
                    Ext.Array.each(story.get('RevisionHistory').Revisions, function(revision) {
                        //Parse revision log
                    });
                }
            });
        }
    } 
}); 
```

# c# - WinForms：在设计器中将自定义 ToolStripMenuItem 添加到 MenuStrip

> ID：12694646
> 
> 赞同：2
> 
> 时间：2012-10-02T16:45:51.873
> 
> 标签：c#, winforms

在 Windows 窗体中如果我制作了一个继承自的自定义控件，`ToolStripMenuItem`有没有办法从设计器中添加它`CustomToolStripMenuItem`，`MenuStrip`还是我必须通过代码来完成？（因为`ToolStripMenuItem`它们是在没有从工具箱中拖动的情况下添加的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:02:14.757

尝试用这个属性装饰它：

```
[ToolStripItemDesignerAvailability(ToolStripItemDesignerAvailability.MenuStrip)]
public class MyToolStrip : ToolStripMenuItem {

} 
```

# linq - 您如何针对 CRM 2011 编译 LINQ 查询？

> ID：12694658
> 
> 赞同：2
> 
> 时间：2012-10-02T16:46:36.730
> 
> 标签：linq, compilation, crm

您如何针对 CRM 2011 编译 LINQ 查询？

我正在使用 Microsoft.Xrm.Client.dll 连接到 CRM 2011，并使用从 app.config 文件中的连接字符串生成的 Microsoft.Xrm.Client.CrmOrganizationServiceContext _SvcContext。我有以下 LINQ 查询，效果很好：

```
var vdiConfigDataSet = 
   (from SvrToPubProfSet in _SvcContext.vdi_publicationprofile_vdi_serverSet
    join PubProfSet in _SvcContext.vdi_publicationprofileSet
    on SvrToPubProfSet.vdi_publicationprofileid equals PubProfSet.Id
    join SvrSet in _SvcContext.vdi_serverSet
    on SvrToPubProfSet.vdi_serverid equals SvrSet.Id
    where SvrSet.vdi_address == System.Environment.MachineName // This will ignore case

    select new
      {
        // Data from Server record
        RootPath = SvrSet.vdi_rootpath, // This is the same for all Publication Profiles
        SvrAddr = SvrSet.vdi_address,

        // Data from N:N relationship record(s) vdi_publicationprofile_vdi_serverSet
        SvrId = SvrToPubProfSet.vdi_serverid,
        PubProfId = SvrToPubProfSet.vdi_publicationprofileid,

        // Data from Publication Profile record(s)
        PubProfName = PubProfSet.vdi_name,
        RelativePath = PubProfSet.vdi_relativepath,
        ReportRelativePath = PubProfSet.vdi_reportrelativepath,
        ReportFilenameSeed = PubProfSet.vdi_reportfilenameseed,
        SubSystemType = PubProfSet.vdi_subsystemtype,
        ModifiedOn = PubProfSet.ModifiedOn
      }).ToList(); 
```

这是一个相当大的查询，会重复执行。我想把它编译下来。我尝试了以下方法：

```
public static readonly Func<DataContext, Object> s_compiledQuery =
  CompiledQuery.Compile<DataContext, Object>
  (ctx  =>
  (from SvrToPubProfSet in ctx.GetTable<vdi_publicationprofile_vdi_server>()
   join PubProfSet in ctx.GetTable<vdi_publicationprofile>()
   on SvrToPubProfSet.vdi_publicationprofileid equals PubProfSet.Id
   join SvrSet in ctx.GetTable<vdi_server>()
   on SvrToPubProfSet.vdi_serverid equals SvrSet.Id
   where SvrSet.vdi_address == System.Environment.MachineName // This will ignore case

   select new
   {
     // Data from Server record
     RootPath = SvrSet.vdi_rootpath, // This is the same for all Publication Profiles
     SvrAddr = SvrSet.vdi_address,

     // Data from N:N relationship record(s) vdi_publicationprofile_vdi_serverSet
     SvrId = SvrToPubProfSet.vdi_serverid,
     PubProfId = SvrToPubProfSet.vdi_publicationprofileid,

     // Data from Publication Profile record(s)
     PubProfName = PubProfSet.vdi_name,
     RelativePath = PubProfSet.vdi_relativepath,
     ReportRelativePath = PubProfSet.vdi_reportrelativepath,
     ReportFilenameSeed = PubProfSet.vdi_reportfilenameseed,
     SubSystemType = PubProfSet.vdi_subsystemtype,
     ModifiedOn = PubProfSet.ModifiedOn
   }).ToList());
...

var vdiConfigDataSet2 = s_compiledQuery(_SvcContext); //ERROR _SvcContext is not DataContext type 
```

但我需要一个`DataContext`类型对象，但我不知道如何从`Microsoft.Xrm.Client.CrmOrganizationServiceContext`类型对象中获取它。

任何人都知道如何在`DataContext`为 CRM 2011 编译 LINQ 查询时获得或者更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:57:59.757

CRM 服务上下文代理不是基于实体框架的数据上下文，而是“在幕后”是 ODATA / SOAP。您无法编译 CRM 查询，因为`CompileQuery`Class generic arg 必须继承自`ObjectContext`.

您可能想要查看的一件事是使用此参数：/codeCustomization:"Microsoft.Xrm.Client.CodeGeneration.CodeCustomization, Microsoft.Xrm.Client.CodeGeneration" 使用 SDK 的代码生成工具 (crmsvcutil.exe)，因为这将启用在 CRM linq 查询中遍历“导航属性”，从而减轻您的连接。

# networking - 带有 ACK 的滑动窗口协议

> ID：12694667
> 
> 赞同：1
> 
> 时间：2012-10-02T16:47:02.957
> 
> 标签：networking

我正在解决这个问题并且有点卡在一个部分。为了设置它，我基本上有两个节点节点 1 和节点 2，它们使用 3 位序列的滑动窗口协议。Go-back-n ARQ 用于窗口大小为 4。节点 1 是发送者，节点 2 是接收者。

如果节点 1 发送帧 0、1、2，节点 2 接收到它们并将 ACK 1 发送回节点 1，节点 1 接收到 ACK。

这意味着节点 2 只接收到帧 0 吗？

所以节点 1 看起来像这样？ [http://i.imgur.com/x2mQO.png](http://i.imgur.com/x2mQO.png)

节点 2 看起来像这样？ [http://i.imgur.com/tSh15.png](http://i.imgur.com/tSh15.png)

# spring-security - spring-security spnego/kerberos NoClassDefFoundError SpringSecurityCoreVersion

> ID：12694671
> 
> 赞同：0
> 
> 时间：2012-10-02T16:47:24.267
> 
> 标签：spring-security

我正在尝试 spnego/kerberos 的 spring-security 并且出现如下错误。我正在粘贴我的 pom.xml 依赖项、mvn 依赖项：树和错误。请看看你能不能帮我解决这个问题。

pom.xml 片段：

```
<properties>
<jsf-mojarra.version>2.2.0-m05</jsf-mojarra.version>
<tomcat.manager.url>http://pinkydebian:8080/manager/html</tomcat.manager.url>
<maven.tomcat.exec.war.serverXml>server.xml</maven.tomcat.exec.war.serverXml>
</properties>

<dependencies>
<dependency>
<groupId>junit</groupId>
<artifactId>junit</artifactId>
<version>3.8.1</version>
<scope>test</scope>
</dependency>
<dependency>
<groupId>org.springframework.security.extensions </groupId>
<artifactId>spring-security-kerberos-core</artifactId>
<version>1.0.0.M1</version>
</dependency>

<!-- jsf dependencies -->
<dependency>
<groupId>com.sun.faces</groupId>
<artifactId>jsf-api</artifactId>
<version>${jsf-mojarra.version}</version>
</dependency>
<dependency>
<groupId>com.sun.faces</groupId>
<artifactId>jsf-impl</artifactId>
<version>${jsf-mojarra.version}</version>
</dependency>
<dependency>
<groupId>javax.servlet</groupId>
<artifactId>jstl</artifactId>
<version>1.2</version>
</dependency>

<dependency>
<groupId>javax.servlet</groupId>
<artifactId>servlet-api</artifactId>
<version>2.5</version>
</dependency>

<dependency>
<groupId>javax.servlet.jsp</groupId>
<artifactId>jsp-api</artifactId>
<version>2.1</version>
</dependency>

<dependency>
<groupId>com.sun.el</groupId>
<artifactId>el-ri</artifactId>
<version>1.0</version>
</dependency>

<dependency>
<groupId>org.springframework.security</groupId>
<artifactId>spring-security-config</artifactId>
<version>3.1.2.RELEASE</version>
</dependency>
</dependencies> 
```

mvn 依赖：树输出：

```
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ jsf-sso ---
[INFO] com.primesystems.sso:jsf-sso:war:1.0-SNAPSHOT
[INFO] +- junit:junit:jar:3.8.1:test
[INFO] +- org.springframework.security.extensions:spring-security-kerberos-core:jar:1.0.0.M1:compile
[INFO] | +- org.springframework.security:spring-security-core:jar:3.0.0.M2:compile
[INFO] | | +- org.springframework:spring-expression:jar:3.0.0.M4:compile
[INFO] | | +- org.springframework:spring-tx:jar:3.0.0.M4:compile
[INFO] | | +- org.aspectj:aspectjrt:jar:1.6.4:compile
[INFO] | | +- org.aspectj:aspectjweaver:jar:1.6.4:compile
[INFO] | | +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] | | +- commons-codec:commons-codec:jar:1.3:compile
[INFO] | | \- commons-collections:commons-collections:jar:3.2:compile
[INFO] | \- org.springframework.security:spring-security-web:jar:3.0.0.M2:compile
[INFO] | \- org.springframework:spring-web:jar:3.0.0.M4:compile
[INFO] +- com.sun.faces:jsf-api:jar:2.2.0-m05:compile
[INFO] +- com.sun.faces:jsf-impl:jar:2.2.0-m05:compile
[INFO] +- javax.servlet:jstl:jar:1.2:compile
[INFO] +- javax.servlet:servlet-api:jar:2.5:compile
[INFO] +- javax.servlet.jsp:jsp-api:jar:2.1:compile
[INFO] +- com.sun.el:el-ri:jar:1.0:compile
[INFO] \- org.springframework.security:spring-security-config:jar:3.1.2.RELEASE:compile
[INFO] +- org.springframework:spring-core:jar:3.0.7.RELEASE:compile
[INFO] | \- org.springframework:spring-asm:jar:3.0.7.RELEASE:compile
[INFO] +- org.springframework:spring-aop:jar:3.0.7.RELEASE:compile
[INFO] +- org.springframework:spring-context:jar:3.0.7.RELEASE:compile
[INFO] +- aopalliance:aopalliance:jar:1.0:compile
[INFO] \- org.springframework:spring-beans:jar:3.0.7.RELEASE:compile 
```

catalina 日志错误：

```
Caused by: org.springframework.beans.BeanInstantiationExcepti on: Could not instantiate bean class [org.springframework.security.config.SecurityNamesp aceHandler]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/core/SpringSecurityCoreVersion
at org.springframework.beans.BeanUtils.instantiateCla ss(BeanUtils.java:143)
at org.springframework.beans.BeanUtils.instantiateCla ss(BeanUtils.java:106)
at org.springframework.beans.factory.xml.DefaultNames paceHandlerResolver.resolve(DefaultNamespaceHandle rResolver.java:129)
at org.springframework.beans.factory.xml.BeanDefiniti onParserDelegate.parseCustomElement(BeanDefinition ParserDelegate.java:1322)
at org.springframework.beans.factory.xml.BeanDefiniti onParserDelegate.parseCustomElement(BeanDefinition ParserDelegate.java:1317)
at org.springframework.beans.factory.xml.DefaultBeanD efinitionDocumentReader.parseBeanDefinitions(Defau ltBeanDefinitionDocumentReader.java:135)
at org.springframework.beans.factory.xml.DefaultBeanD efinitionDocumentReader.registerBeanDefinitions(De faultBeanDefinitionDocumentReader.java:92)
at org.springframework.beans.factory.xml.XmlBeanDefin itionReader.registerBeanDefinitions(XmlBeanDefinit ionReader.java:475) 
```

问候，

米腾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:19:10.590

你必须在你的 pom 文件中包含 spring-security-core、spring-security-web 和 spring-security-config，从你的 pom 文件中我可以看到只添加了配置。

```
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-core</artifactId>
    <version>3.1.2.RELEASE</version>
 </dependency> 
 <dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-web</artifactId>
    <version>3.1.2.RELEASE</version>
  </dependency> 
  <dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-config</artifactId>
    <version>3.1.2.RELEASE</version>
  </dependency> 
```

这也已[在此处列出](http://www.springsource.org/spring-security)

# c++ - 使用 mfc 子窗口进行 2d 碰撞检测

> ID：12694675
> 
> 赞同：0
> 
> 时间：2012-10-02T16:47:47.823
> 
> 标签：c++, algorithm, mfc

我想用 MFC 在 C++ 中做一个布局管理器。此布局将包含一个窗口矩阵。布局初始形式将由矩阵选择器定义（如在 MS Word 中）。之后，用户可以通过拉动它的边缘来调整每个窗口的大小。我正在考虑使用 2d 碰撞检测算法，但我不知道这将如何在实时调整大小时执行（或如何使用 mfc 进行）

如果违反此限制，我想对每个元素施加最小尺寸并阻止元素的收缩（当另一个元素正在扩展时）。等待任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:30:16.450

我不得不在 C++ 和 MFC 中做一个类似的布局管理器。我实现了一个包含矩形的 N 叉树（称为 CDisplayObject），树中的每个叶子都可以有一个 CFrame。为了构建这样的树，需要执行简单的文本解析。每个矩形都介于 0 和 1 之间，并且每个矩形都有大小总和为 1 的子级。

我不调整窗口的大小，但它可能很容易实现，因为您只需调整 CDisplayObject 的大小，然后再调整窗口的大小。

这是处理根据“显示”矩形调整自身大小的显示对象的代码，在我们的程序中是主视图。

要创建一个“显示树”，左侧有一个大矩形，右侧有三个小矩形：

```
CDisplayObject* tmp;
    CString szCurrentName = "Big + three"
tmp = new CDisplayObject(szCurrentName);
tmp->Add(szCurrentName + "|Column1",0.75);
tmp->Add(szCurrentName + "|Column2",0.25);
tmp->Add(szCurrentName + "|Column2-Row1",0.3333333);
tmp->Add(szCurrentName + "|Column2-Row2",0.3333333);
tmp->Add(szCurrentName + "|Column2-Row3",0.3333333); 
```

“|” 表示它是一列，“-”表示这是一行。

使用 SwitchFrameWnd 将叶子设置为包含子窗口，并使用 SetPos(CRect) 调整树中所有显示对象的大小。您可以通过实现更改整个树的行/列/叶权重的函数来重新调整窗口大小。

```
#pragma once

#ifndef __AFXWIN_H__
#error include 'stdafx.h' before including this file for PCH
#endif

class CDisplayObject : public CObject
{
    friend class CMainView;
    typedef std::list<CDisplayObject*> Childrens;
public:
    typedef std::list<CDisplayObject*> Leafs;

    typedef enum 
    {
        LEAF,
        ROW,
        COLUMN
    } ITEM_TYPE;

    CDisplayObject(LPCTSTR name,CDisplayObject* Parent = NULL, CoordinateType weight = 1.0);

    virtual             ~CDisplayObject();
    bool                HasViewOrFrame(const CWnd* wnd) const;              
    void                TRACE_IT();
    void                Draw(CDC* pDC, const CRect& drawRect,BOOL isIconMode);
    CView*          GetView() const;
    void                Add(LPCSTR layoutItemDesc, CoordinateType weigth);
    //returns all the leafs in the tree
    virtual Leafs       GetLeafs() ;
    //this removes the framewnd from any other object in same layout-tree 
    //and sets the view in this object 
    virtual BOOL        SwitchFrameWnd(CFrameWnd* view);
    CFrameWnd*          GetFrameWnd() const                 {return m_pFrameWnd;}
    void                SetPos(const RECT& rect);
    CString             GetName() const             { return m_Name;}
    CString             GetUniqueName() const {return m_UUID;}

    //returns the complete name for this leaf i.e: main|column-row
    CString             GetCompleteName() const;
    CRect               GetDisplayRect() const      { return m_DisplayRect; }
    CDisplayObject*     GetFirstEmptyLeaf();
    CDisplayObject*     GetFirstEmptyLeafAfterLastFrame();
    //removes the wnd in the subtree
    void                RemoveWnd(CFrameWnd* view);
    //calls updateSlaveWindows for each view
    void                UpdateSlaveWindows();
    //returns the CDisplayObject that has the wnd as framewnd or view
    //can return null!
    CDisplayObject*     GetObjectWithWnd(const CWnd* wnd) ;

    CDisplayObject*     GetLeafViewFromPoint(const CPoint& point);
protected:
    CDisplayObject(){};

    BOOL                IsLeaf() const          { return m_type == LEAF && m_Childrens.size() == 0;}    
    CRect               CalculateChildrenRect(CDisplayObject* children, const CRect& mainRect,Vector2d &topLeft);
    void                SetDisplayRect(CRect val) ;
    CFrameWnd*          GetLastView() const         { return m_pLastView; }
    void                HideViews();
    void                ShowViews();
    CDisplayObject::ITEM_TYPE           GetType() const { return m_type; }
private:
    static CString      translateString(LPCTSTR str);
    static CString      GetPrefix( LPCSTR str);
    static CString      GetSuffix( LPCTSTR str );
    static ITEM_TYPE    GetDividerType( LPCTSTR str );
    void                RepositionView();
    void                SetWeight( CoordinateType weight );
    CoordinateType      GetWeight() const;
    CoordinateType      GetChildrenWeight() const;
    CDisplayObject*     GetRootObject();

    CFrameWnd           *m_pFrameWnd;
    //used for distributing documents correctly (=last place used) when changing layouts
    CFrameWnd           *m_pLastView;
    Childrens           m_Childrens;
    CoordinateType      m_Weight;
    CString             m_Name;
    CString             m_UUID;
    ITEM_TYPE           m_type;
    //this is the client rect for this window
    CRect               m_DisplayRect;
    //the parent for this CDisplayObject. if m_parent == NULL => root-object
    CDisplayObject*     m_Parent;
    //used for draw the name of the object
#ifdef _DEBUG
    CFont *m_Font;
#endif // _DEBUG
    DECLARE_DYNCREATE(CDisplayObject)
}; 
```

cpp实现

```
#include "stdafx.h"
#include "DisplayObject.h"
#ifdef _DEBUG
#define new DEBUG_NEW
#undef THIS_FILE
static char THIS_FILE[] = __FILE__;
#endif

IMPLEMENT_DYNCREATE(CDisplayObject, CObject )

//////////////////////////////////////////////////////////////////////////
///CDisplayObject
//////////////////////////////////////////////////////////////////////////
CDisplayObject::CDisplayObject(LPCTSTR name, CDisplayObject* Parent /*= NULL*/, CoordinateType weight /*= 1.0*/)
:CObject()
{
    m_UUID = CreateUUID();
    m_Name = GetPrefix(name);
    m_type = LEAF;
    ASSERT(!m_Name.IsEmpty());
    if( !GetSuffix(name).IsEmpty() )
    {
        this->Add(name, weight);
    }
    else
    {
        m_Weight = weight;
    }
    m_Parent = Parent;
    m_pFrameWnd = NULL;
    m_pLastView = NULL;
    CViewSettings viewSettings;
    viewSettings = AfxGetProperties()->m_ViewSettings;
    m_DisplayRect = CRect(0,0,0,0);
#ifdef _DEBUG
    m_Font = new CFont;     
    m_Font->CreateFont( 
        12, // nHeight
        0,                      // nWidth
        0,                      // nEscapement
        0,                      // nOrientation
        FW_NORMAL,              // nWeight,
        FALSE,                  // bItalic
        FALSE,                  // bUnderline
        FALSE,                  // cStrikeOut
        DEFAULT_CHARSET,        // CharSet
        OUT_CHARACTER_PRECIS,
        CLIP_DEFAULT_PRECIS,
        PROOF_QUALITY,
        FF_DONTCARE,
        "Arial" );
#endif // _DEBUG
}

CDisplayObject::~CDisplayObject()
{
    // TRACE_LINE;
    for(Childrens::iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
        delete *it;
    m_Childrens.clear();
#ifdef _DEBUG
    if( m_Font )
    {
        m_Font->DeleteObject();
        SAFE_DELETE(m_Font);
    }
#endif // _DEBUG

}

void CDisplayObject::Add( LPCSTR layoutItemDesc, CoordinateType weigth )
{
    CString prefix = GetPrefix(layoutItemDesc);
    CString suffix = GetSuffix(layoutItemDesc);
    if(prefix == m_Name )
    {
        if(!suffix.IsEmpty())
        {
            m_type = (m_type == LEAF) ? GetDividerType(layoutItemDesc) : m_type;
            CString prefixSuffix = GetPrefix(suffix);
            CDisplayObject* tmp = NULL;
            if( !prefixSuffix.IsEmpty() )
            {
                for(Childrens::iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
                {
                    if( (*it)->GetName() == prefixSuffix )
                    {
                        tmp = *it;
                        break;
                    }
                }
                if( tmp == NULL)
                {
                    tmp = new CDisplayObject(prefixSuffix, this);
                    m_Childrens.push_back(tmp);
                }
            }
            tmp->Add(suffix, weigth);
        }
        else
        {
            SetWeight(weigth);
        }
    }
}

void CDisplayObject::TRACE_IT()
{
    TRACE( m_Name );
    TRACE( " %.2f", m_Weight );
    if( m_Childrens.size() > 0)
    {
        TRACE(" ( ");
        CString divider;
        for(Childrens::const_iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
        {
            TRACE(divider);
            (*it)->TRACE_IT();
            divider = (m_type == ROW) ? " - " : " | ";
        }
        TRACE( " ) ");
    }
}

CString CDisplayObject::translateString( LPCTSTR str )
{
    CString retValue = str;
    retValue.MakeLower();
    retValue.Trim();
    return str;
}

CString CDisplayObject::GetPrefix( LPCSTR str )
{
    CString tmpStr = translateString(str);
    int index = tmpStr.FindOneOf("|-");
    if( index == -1 )
    {
        return tmpStr;
    }
    else
    {
        return tmpStr.Left(index);
    }
}

CString CDisplayObject::GetSuffix( LPCTSTR str )
{
    CString tmpStr = translateString(str);
    int index = tmpStr.FindOneOf("|-");
    if( index == -1 )
    {
        return "";
    }
    else
    {
        return tmpStr.Mid(index + 1);
    }
}

CDisplayObject::ITEM_TYPE CDisplayObject::GetDividerType( LPCTSTR str )
{
    CString tmpStr = translateString(str);
    int index = tmpStr.Find("-");
    if(index != -1) //horizontal
    {
        return ROW;
    }
    index = tmpStr.Find("|");
    if(index != -1) //vertical
    {
        return COLUMN;
    }
    return LEAF;
}

CoordinateType CDisplayObject::GetWeight() const 
{ 
    return m_Weight;
}

CoordinateType CDisplayObject::GetChildrenWeight() const 
{ 
    CoordinateType sum = 0;
    for(Childrens::const_iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
    {
        sum += (*it)->GetWeight( );
    }
    return sum;
}

static bool IsRectEqual(const CRect &obj1, const CRect &obj2)
{
    return obj1.left == obj2.left && obj1.right == obj2.right && obj1.top == obj2.top && obj1.bottom == obj2.bottom;
}

void CDisplayObject::SetWeight( CoordinateType weight )
{
    m_Weight = weight;
}

void CDisplayObject::SetPos(const RECT& rect)
{
    SetDisplayRect(rect);
    if(IsLeaf())
    {
        SetDisplayRect(rect);
    }
    else
    {
        Vector2d topLeft;
        for(Childrens::iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
        {
            CRect newDrawRect = CalculateChildrenRect(*it,rect,topLeft);
            (*it)->SetPos(newDrawRect);
        }
    }
}

CRect CDisplayObject::CalculateChildrenRect( CDisplayObject* children, const CRect& mainRect, Vector2d& topLeft )
{
    ASSERT(m_Childrens.size() > 0);
    ASSERT(m_type == COLUMN || m_type == ROW);
    CRect drawRectangle;
    if(m_type == COLUMN)
    {
        CoordinateType weight = children->GetWeight();
        Vector2d BottomRight(topLeft.X() + weight, 1.0);
        CLayoutRectangle childrenRectangle(topLeft, BottomRight);
        drawRectangle = childrenRectangle.ToCRect(mainRect);
        topLeft = childrenRectangle.TopRight();
    }
    else if( m_type == ROW)
    {
        CoordinateType weight = children->GetWeight();
        Vector2d BottomRight(1.0,topLeft.Y() + weight);
        CLayoutRectangle childrenRectangle(topLeft, BottomRight);
        drawRectangle = childrenRectangle.ToCRect(mainRect);
        topLeft = childrenRectangle.BottomLeft();
    }
    return drawRectangle;
}

void CDisplayObject::Draw( CDC* pDC, const CRect& drawRect,BOOL isIconMode )
{
    if(IsLeaf())
    {
        if(!isIconMode)
        {
            SetDisplayRect(drawRect);
        }
        pDC->FillRect(drawRect,&CBrush( m_ViewSettings.m_BackgroundColor ) );

/*
#ifdef _DEBUG
        if( !isIconMode )
        {
            pDC->SetTextAlign( TA_CENTER );
            CFont* pOldFont = pDC->SelectObject( m_Font );
            pDC->SetBkMode( TRANSPARENT );
            pDC->SetTextColor( RGB( 255, 255, 255 ) );
            pDC->TextOut(drawRect.left + drawRect.Width() / 2,
                drawRect.top + drawRect.Height() / 2, 
                GetCompleteName() );
            pDC->SelectObject( pOldFont);   
        }
#endif // _DEBUG
*/

        CPen FramePen(PS_SOLID, m_ViewSettings.m_FrameWidth, m_ViewSettings.m_FrameColor);
        CPen* oldPen;
        oldPen = pDC->SelectObject(&FramePen);
        CLayoutRectangle(drawRect).DoPaint(pDC);
        pDC->SelectObject(oldPen);
    }
    else
    {   
        Vector2d topLeft;
        for(Childrens::iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
        {
            CRect newDrawRect = CalculateChildrenRect(*it,drawRect,topLeft);
            (*it)->Draw(pDC,newDrawRect,isIconMode);
        }
    }
}

CDisplayObject* CDisplayObject::GetFirstEmptyLeaf() 
{
    if(IsLeaf() && m_pFrameWnd == NULL)
    {
        return this;
    }
    else
    {
        for(Childrens::const_iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
        {
            CDisplayObject* tmpDisplayObject = (*it)->GetFirstEmptyLeaf();
            if( tmpDisplayObject != NULL )
            {
                return tmpDisplayObject;
            }
        }
    }

    return NULL;
}

CDisplayObject* CDisplayObject::GetFirstEmptyLeafAfterLastFrame()
{
    Leafs leafs = GetLeafs();
    Leafs::reverse_iterator it = leafs.rbegin(); 
    while(1)
    {
        Leafs::reverse_iterator tmpIt = it;
        if((*tmpIt)->GetFrameWnd() != NULL)
        {
            return NULL;
        }
        it++;
        if(it != leafs.rend())
        {
            if( (*it)->GetFrameWnd() != NULL)
                return *tmpIt;
        }
        else
        {
            //no frameWnd present
            return (*leafs.begin());
        }
    }
    return NULL;
}

CDisplayObject* CDisplayObject::GetLeafViewFromPoint( const CPoint& point ) 
{
    if(IsLeaf() && m_DisplayRect.PtInRect(point))
    {
        return this;
    }
    else
    {
        for(Childrens::const_iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
        {
            CDisplayObject* tmpDisplayObject = (*it)->GetLeafViewFromPoint( point );
            if( tmpDisplayObject != NULL )
            {
                return tmpDisplayObject;
            }
        }
    }
    return NULL;
}

BOOL CDisplayObject::SwitchFrameWnd( CFrameWnd* View )
{
    //walk through whole tree and remove the view
    GetRootObject()->RemoveWnd(View);
    if(!IsLeaf())
        return FALSE;
    if(m_pFrameWnd && ::IsWindow(m_pFrameWnd->GetSafeHwnd()))
        RemoveWindow(m_pFrameWnd); //hide the window
    m_pLastView = m_pFrameWnd;
    m_pFrameWnd = View;
    if(m_pFrameWnd)
    {
        RepositionView();
        if(m_pFrameWnd && ::IsWindow(m_pFrameWnd->GetSafeHwnd()))
            AddWindow(m_pFrameWnd);

        if(m_pFrameWnd && ::IsWindow(m_pFrameWnd->GetSafeHwnd()))
        {
            if(m_pFrameWnd->GetActiveView())
            {
                CImageView* pImageView = (CImageView*)m_pFrameWnd->GetActiveView();
                pImageView->ResetOrigoPanPos();
                pImageView->ResetPanPos(FALSE);
                pImageView->UpdateShownImage();
            }
            m_pFrameWnd->Invalidate();
            m_pFrameWnd->RedrawWindow();
        }
    }
    return TRUE;
}

CDisplayObject::Leafs CDisplayObject::GetLeafs( ) 
{
    Leafs retValue;
    if(IsLeaf())
    {
        retValue.push_back(this);
    }
    else
    {
        for(Childrens::const_iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
        {
            Leafs tmpLeafs = (*it)->GetLeafs( );
            retValue.merge(tmpLeafs);
        }
    }
    return retValue;
}

void CDisplayObject::SetDisplayRect( CRect val )
{
    if( IsRectEqual( val , m_DisplayRect) )
        return;
    //TRACE_LINE;
    int frameWidth = m_ViewSettings.m_FrameWidth;
    m_DisplayRect = val; 
    //deflate the rect for accomodate the own frame.
    if(IsLeaf())
        m_DisplayRect.DeflateRect(frameWidth,frameWidth,frameWidth,frameWidth);
    //m_DisplayRect.OffsetRect(CPoint(0,-100));
    RepositionView();
}

void CDisplayObject::RepositionView()
{
    if(m_pFrameWnd && ::IsWindow(m_pFrameWnd->GetSafeHwnd()))
    {
        m_pFrameWnd->SetWindowPos(NULL,m_DisplayRect.left,m_DisplayRect.top,m_DisplayRect.Width(),m_DisplayRect.Height(),SWP_NOZORDER);
    }
}

void CDisplayObject::HideViews()
{
    if(GetFrameWnd() && ::IsWindow(GetFrameWnd()->GetSafeHwnd()))
        RemoveWindow(GetFrameWnd());
    if(!IsLeaf())
    {
        for(Childrens::iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
        {
            (*it)->HideViews( );
        }
    }
}

void CDisplayObject::ShowViews()
{
    if(GetFrameWnd() && ::IsWindow(GetFrameWnd()->GetSafeHwnd()))
        AddWindow(GetFrameWnd());
    if(!IsLeaf())
    {
        for(Childrens::iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
        {
            (*it)->ShowViews( );
        }
    }
}

void CDisplayObject::RemoveWnd( CFrameWnd* view )
{
    if(m_pFrameWnd == view)
    {
        m_pFrameWnd = NULL;
    }
    if(!IsLeaf())
    {
        for(Childrens::iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
        {
            (*it)->RemoveWnd( view );
        }
    }

}

CDisplayObject* CDisplayObject::GetRootObject()
{
    //get the root display object
    CDisplayObject* rootParent = m_Parent;
    CDisplayObject* currentObject = this;
    while(rootParent)
    {
        CDisplayObject* tmp = rootParent;
        currentObject = rootParent;
        rootParent = tmp->m_Parent;
    }
    ASSERT(currentObject);
    return currentObject;
}

    CView* CDisplayObject::GetView() const
{
    if( m_pFrameWnd && m_pFrameWnd->IsKindOf(RUNTIME_CLASS(CImageFrameWnd)))
    {
        CView* view = m_pFrameWnd->GetActiveView();
        if(view && view->IsKindOf(RUNTIME_CLASS(CImageView)))
        {
            return (CImageView*)view;
        }
    }

    return NULL;
}

bool CDisplayObject::HasViewOrFrame( const CWnd* wnd ) const
{
    if( this->m_pFrameWnd == wnd)
        return true;
    if(this->GetFrameWnd() && this->GetView() == wnd)
    {
        return true;
    }
    return false;
}

CDisplayObject* CDisplayObject::GetObjectWithWnd(const CWnd* wnd)  
{
    if(this->HasViewOrFrame( wnd ))
    {
        return this;
    }
    if(!IsLeaf())
    {
        for(Childrens::iterator it = m_Childrens.begin(); it != m_Childrens.end(); ++it)
        {
            CDisplayObject* retValue;
            if( (retValue = (*it)->GetObjectWithWnd( wnd )) != NULL )
            {
                return retValue;
            }
        }
    }
    return NULL;
}

CString CDisplayObject::GetCompleteName() const
{
    CString name = GetName();
    const CDisplayObject* rootParent = m_Parent;
    const CDisplayObject* currentObject = this;
    while(rootParent)
    {
        if( rootParent->GetType() == COLUMN )
        {
            name = rootParent->GetName() + CString("|") + name;
        }
        else if( rootParent->GetType() == ROW )
        {
            name = rootParent->GetName() + CString("-") + name;
        }
        else
        {
            name = rootParent->GetName() + CString(" ERROR! ") + name;
        }
        const CDisplayObject* tmp = rootParent;
        currentObject = rootParent;
        rootParent = tmp->m_Parent;
    }
    return name;
} 
```

# html - SVG 中的 HTML 作为 SVG

> ID：12694677
> 
> 赞同：1
> 
> 时间：2012-10-02T16:47:53.147
> 
> 标签：html, svg, symbols

最近开始在 SVG 中使用 html。该代码工作正常 FireFox 但 Chrome 不显示 div 内容。

你能帮我解决这个问题吗？这是一个示例代码，应该将 div 内容显示为“MY DIV”和一个机场符号。

代码保存为 my_div.svg

提前致谢。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="full"   viewport-fill="red">
        <defs>  
            <!-- My div -->
            <symbol id="my_div" viewBox="0 0 50 50" >
                <foreignObject x="0" y="0" width="50" height="50" fill="red">
                    <body xmlns="http://www.w3.org/1999/xhtml" style="background:none transparent;" width="50" height="50">
                        <div>MY DIV</div>
                    </body>
                </foreignObject>
            </symbol>

            <!-- Airport Symbol -->
            <symbol id="airport" viewBox="0 0 10 10">
                <path d="M 9.2,5 C 9.2,4.5 9.8,3.2 10,3 L 9,3 L 8,4 L 5.5,4 L 8,0 L 6,0 L 3,4 C 2,4 1,4.2 0.5,4.5 C 0,5 0,5 0.5,5.5 C 1,5.8 2,6 3,6 L 6,10 L 8,10 L 5.5,6 L 7.8,6 L 9,7 L 10,7 C 9.8,6.8 9.2,5.5 9.2,5 z "/>
            </symbol>

        </defs>

      <g fill="red"  transform="scale(18)"  >

          <g transform="translate(0, 0)">
            <use xlink:href="#my_div" width="5" height="5"/>
          </g>

          <g id="demo" transform="translate(0, 0)">
          <use xlink:href="#airport" x="10" y="0" width="5" height="5"/>
        </g>

     </g>
    </svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-07T16:12:56.867

SVG 规范不允许`<foreignObject>`内容直接与`<use>`元素一起使用。浏览器在是否允许您访问`<use>`包含`<foreignObject>`孩子的内容方面存在不同 - 规范并未明确禁止，但它在某种程度上规避了意图。

Firefox 的实现`<use>`基本上是所有 DOM 元素的隐藏克隆，因此它们在克隆任何类型的内容时都没有任何问题。然而，其他浏览器更紧密地链接源和复制图形，并且没有任何外部对象的复制机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T19:03:30.560

我知道它不能解决该错误，但我建议使用 SVG，而不通过 foreignObject 将 HTML 混合到其中。滞后于 IE 的支持，也可以使用 svg 元素来解决。您可以使用 css 设置样式，就像您在 div 框中的文本一样。

示例：[http ://www.w3schools.com/svg/svg_text.asp](http://www.w3schools.com/svg/svg_text.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:01:15.007

将您放在这里的代码保存为 SVG，我收到了这个：

> 此页面包含以下错误：
> 
> 第 1 行第 6 列的错误：仅在文档开头允许 XML 声明 下面是页面的呈现直到第一个错误。

我通过简单地删除您提供的第一行代码来修复它。

```
 <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="full"   viewport-fill="red">
        <defs>  
            <!-- My div -->
            <symbol id="my_div" viewBox="0 0 50 50" >
                <foreignObject x="0" y="0" width="50" height="50" fill="red">
                    <body xmlns="http://www.w3.org/1999/xhtml" style="background:none transparent;" width="50" height="50">
                        <div>MY DIV</div>
                    </body>
                </foreignObject>
            </symbol>

            <!-- Airport Symbol -->
            <symbol id="airport" viewBox="0 0 10 10">
                <path d="M 9.2,5 C 9.2,4.5 9.8,3.2 10,3 L 9,3 L 8,4 L 5.5,4 L 8,0 L 6,0 L 3,4 C 2,4 1,4.2 0.5,4.5 C 0,5 0,5 0.5,5.5 C 1,5.8 2,6 3,6 L 6,10 L 8,10 L 5.5,6 L 7.8,6 L 9,7 L 10,7 C 9.8,6.8 9.2,5.5 9.2,5 z "/>
            </symbol>

        </defs>

      <g fill="red"  transform="scale(18)"  >

          <g transform="translate(0, 0)">
            <use xlink:href="#my_div" width="5" height="5"/>
          </g>

          <g id="demo" transform="translate(0, 0)">
          <use xlink:href="#airport" x="10" y="0" width="5" height="5"/>
        </g>

     </g>
    </svg> 
```

这对我来说在 Chrome 中有效，（mac）

# typescript - TypeScript：引用 resig 的扩展

> ID：12694678
> 
> 赞同：2
> 
> 时间：2012-10-02T16:47:59.050
> 
> 标签：typescript

我正在尝试引用使用 Resig 的“扩展”的现有代码，但我遇到了一堆错误

------ test.ts --------

```
/// <reference path="myclass.js" />
var m = new MyClass (3); 
```

------ myclass.js --------

```
/// <reference path="class.js" />

var MyClass = Class.extend({

    init: function (i)
    {
        this.i = i;
    },
}) 
```

------ 类.js --------

```
(copied from http://ejohn.org/blog/simple-javascript-inheritance/) 
```

错误：

```
Supplied parameters do not match any signature of call target
The name 'Class' does not exist in the current scope
The property 'extend' does not exist on value of type '() => void'
The name 'Class' does not exist in the current scope 
```

我意识到最终我想将基于扩展的代码重写为 TypeScript，但在那之前，我如何从新代码中引用它？

我想这引出了更深层次的问题——为什么它抱怨现有 javascript 代码中的类型错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:23:55.267

TypeScript 通常无法从外部 JavaScript 代码推断类型。

您需要声明要调用的“扩展”代码的形状，以便 TypeScript 知道该类型的形状是什么：

```
declare class Class {
    static extend(body: any);
} 
```

您可以将其直接放入源文件（如果您只有一个单文件项目），或者更准确地说，放入您从源文件引用的“.d.ts”文件中。

# python - 我的算法是线性时间吗

> ID：12694681
> 
> 赞同：0
> 
> 时间：2012-10-02T16:48:03.087
> 
> 标签：python, algorithm, complexity-theory, big-o, time-complexity

```
# given an array, it solves sum of elements in it, 
# args: array, initial and final indices
# Returns: sum of elements
def ArrayTot (arr, low, high):
    return sum( arr[low : high+1] )

# Is this linear time?
# args: array, initial and final indices
# returns: Max possible value in sub-array.
def MaxSubArray (arr, low, high):
    # max value of sub-array
    TotalArray = 0
    # starts iterating arr from left - right i.e., arr[low, j]
    for j in xrange(low, high+1):
        # finds sum of sub array arr[low,j]
        tot = ArrayTot (arr, low, j)
        # Iterates the sub-array arr[low,j] so as to find any other possible arr[i,j] which results max value
        for i in xrange(low, j+1):
            SubArrTot = ArrayTot(arr, i, j)
            if SubArrTot >= tot:
                tot = SubArrTot
        if tot >= TotalArray:
            TotalArray = tot
    return TotalArray

arr = [13,-3,-25,20,-3,-16,-23,18,20,-7,12,-5,-22,15,-4,7]
low = 0
high = 15

print MaxSubArray(arr, low, high) 
```

我正在学习算法（书：算法简介）。所以，我应该在给定数组中找到一个构成最大和的子数组。是的，一个非递归的线性时间算法。

这就是我所做的（如上所示）。但是在我的解决方案中，`for`循环中有一个`for`循环，并且都迭代了“n”项。

如果我没记错的话，应该是`O(n^2)`哪个不是线性的！在那种情况下，我应该如何解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T16:54:25.777

这当然不是线性解决方案。解决这个问题的线性时间算法之一被称为[Kadane 算法](http://en.wikipedia.org/wiki/Maximum_subarray_problem)。

哪怕只是这一段代码

```
for j in xrange(low, high+1):
    tot = ArrayTot (arr, low, j) 
```

已经有`Theta(n^2)`时间复杂度了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:06:07.450

恐怕它甚至不是 0(n^2).. 它是 O(n^3)。`ArrayTot(arr, i, j)`是 O(n)，并且它在 i-loop 中，它在 j-loop 内部。

但是你可以`ArrayTot(arr, i, j)`使用求和数组优化到 O(1)，即 range_sum[1..n]，其中`range_sum[1] = arr[1]`, `range_sum[i+1] = range_sum[i] + arr[i+1], i>0`，那么我们可以`ArrayTot(arr, i, j)`在 O(1) 时间内计算，只需使用`range_sum[j]-range_sum[i-1]`.

但是你的方法仍然无法得到 O(n)，这是一个非常经典的 DP 问题，只需 google 即可。

# java - JSTL - 哪个 jstl 元素用于多行文本？

> ID：12694692
> 
> 赞同：0
> 
> 时间：2012-10-02T16:49:01.817
> 
> 标签：java, jstl

我正在创建一个电子邮件客户端。我可以将哪个元素用于电子邮件的正文？它将包含特殊字符、换行符等。

是否适合使用`form:input`，或者是否有任何其他元素专门用于此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:10:15.097

假设您使用的是 Spring 表单标签，您可以使用`form:textarea`.

```
<form:textarea path="notes" rows="3" cols="20" /> 
```

# search - 在vim中用另一行代码替换一行代码？

> ID：12694694
> 
> 赞同：2
> 
> 时间：2012-10-02T16:49:10.960
> 
> 标签：search, vim, replace, line

我有一行代码需要在 Vim 中替换。我需要替换一行代码`errors += 1;`来`errors++;`简化它。

当我这样做时，`:%s/errors += 1;/errors++;/a`我得到`E488:Trailing Characters`.

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T16:54:48.850

最后你有`/a`一个*标志*：`a`不是替代标志。没有`a`这应该适合你。

`c`如果您想手动确认每次更换，请使用。

如果`g`要替换一行中的所有匹配项，请使用此选项。

# php - cURL 似乎不起作用

> ID：12694699
> 
> 赞同：0
> 
> 时间：2012-10-02T16:49:28.243
> 
> 标签：php

我试图找出使用 cURL 将我的 xml 文件作为 PARAM 发送时我完成的 URL 的样子。但是，我没有看到 cURL 正在为我创建什么以发送到我的 apache tomcat 服务器上的 java servlet。

任何帮助/方向将不胜感激。谢谢你。

这是我的规格：

我的$数据：

```
 object(SimpleXMLElement)#1 (5) {
  ["version"]=>
  string(3) "2.0"
  ["orderNo"]=>
  string(37) "sfly.000020513524-7001536_28935-tb.33"
  ["orderDate"]=>
  string(23) "2012-09-21 09:52:53 PDT"
  ["processing"]=>
  object(SimpleXMLElement)#2 (1) {
    ["statusCallback"]=>
    string(79) "http://orderfulfillment.shutterfly.com/ogateway-test/status/sfly/xpressdocs/
        "
  }
  ["suborders"]=>
  object(SimpleXMLElement)#3 (1) {
    ["suborder"]=>
    object(SimpleXMLElement)#4 (7) {
      ["suborderNo"]=>
      string(5) "51917"
      ["deliveryEstimate"]=>
      object(SimpleXMLElement)#5 (2) {
        ["earliest"]=>
        string(23) "2012-10-01 00:00:00 PDT"
        ["latest"]=>
        string(23) "2012-10-05 00:00:00 PDT"
      }
      ["greeting"]=>
      object(SimpleXMLElement)#6 (2) {
        ["line1"]=>
        string(45) "Ordered for you by Andrew Mullen on 09/21/12."
        ["line2"]=>
        string(61) "Save 20% on Holiday Cards November 20 - 30 at Shutterfly
                "
      }
      ["shipAddr"]=>
      object(SimpleXMLElement)#7 (8) {
        ["name"]=>
        string(12) "burkina faso"
        ["address1"]=>
        string(17) "1234 burkina road"
        ["address2"]=>
        object(SimpleXMLElement)#9 (0) {
        }
        ["city"]=>
        string(4) "yako"
        ["region"]=>
        string(3) "R21"
        ["postCode"]=>
        object(SimpleXMLElement)#10 (0) {
        }
        ["countryCode"]=>
        string(2) "BF"
        ["countryName"]=>
        string(12) "Burkina Faso"
      }
      ["shipMethod"]=>
      string(7) "INTLSTD"
      ["additionalFulfillers"]=>
      string(5) "false"
      ["items"]=>
      object(SimpleXMLElement)#8 (1) {
        ["item"]=>
        object(SimpleXMLElement)#11 (6) {
          ["itemNo"]=>
          string(2) "36"
          ["sku"]=>
          string(13) "6X8FLATCARD06"
          ["description"]=>
          string(39) "6x8 Stationery Card - Stacy Claire Boyd"
          ["quantity"]=>
          string(1) "1"
          ["product"]=>
          object(SimpleXMLElement)#12 (1) {
            ["stationery"]=>
            object(SimpleXMLElement)#14 (6) {
              ["formFactor"]=>
              string(3) "6x8"
              ["paperFinish"]=>
              string(5) "MATTE"
              ["orientation"]=>
              string(9) "LANDSCAPE"
              ["image"]=>
              object(SimpleXMLElement)#15 (1) {
                ["location"]=>
                string(130) "http://orderfulfillment.shutterfly.com/fulfillment-test/image/1200/000020513524-7001536_28935--164044--315625--canvas.jpg
                                "
              }
              ["boc"]=>
              object(SimpleXMLElement)#16 (1) {
                ["location"]=>
                string(130) "http://orderfulfillment.shutterfly.com/fulfillment-test/image/1200/000020513524-7001536_28935--164044--315626--canvas.jpg
                                "
              }
              ["copyright"]=>
              object(SimpleXMLElement)#17 (1) {
                ["text"]=>
                string(13) "6X8FLATCARD06"
              }
            }
          }
          ["envelopes"]=>
          object(SimpleXMLElement)#13 (1) {
            ["envelope"]=>
            object(SimpleXMLElement)#18 (2) {
              ["toAddress"]=>
              object(SimpleXMLElement)#19 (10) {
                ["font"]=>
                object(SimpleXMLElement)#21 (2) {
                  ["fontName"]=>
                  string(5) "Arial"
                  ["fontSize"]=>
                  string(2) "12"
                }
                ["name"]=>
                string(10) "FPO Tester"
                ["companyTitle"]=>
                object(SimpleXMLElement)#22 (0) {
                }
                ["address1"]=>
                string(16) "PSC 812 Box 2640"
                ["address2"]=>
                object(SimpleXMLElement)#23 (0) {
                }
                ["city"]=>
                string(3) "FPO"
                ["region"]=>
                string(2) "AE"
                ["postCode"]=>
                string(5) "09627"
                ["countryCode"]=>
                string(3) "USA"
                ["countryName"]=>
                string(24) "United States of America"
              }
              ["fromAddress"]=>
              object(SimpleXMLElement)#20 (10) {
                ["font"]=>
                object(SimpleXMLElement)#24 (2) {
                  ["fontName"]=>
                  string(5) "Arial"
                  ["fontSize"]=>
                  string(2) "12"
                }
                ["name"]=>
                string(13) "Andrew Mullen"
                ["companyTitle"]=>
                object(SimpleXMLElement)#25 (0) {
                }
                ["address1"]=>
                string(22) "2333 W. El Moro Circle"
                ["address2"]=>
                object(SimpleXMLElement)#26 (0) {
                }
                ["city"]=>
                string(4) "Mesa"
                ["region"]=>
                string(2) "AZ"
                ["postCode"]=>
                string(5) "85202"
                ["countryCode"]=>
                string(3) "USA"
                ["countryName"]=>
                string(24) "United States of America"
              }
            }
          }
        }
      }
    }
  }
} 
```

我的 $url = 'http://melinda.xpressdocs.com/PostHandler';

这是我的代码：

```
 function postToUrl($url, $data) {

    $post = curl_init();

    curl_setopt($post, CURLOPT_URL, $url);
    curl_setopt($post, CURLOPT_POST, 1);
    curl_setopt($post, CURLOPT_POSTFIELDS, $data);
    curl_setopt($post, CURLOPT_RETURNTRANSFER, 1);

    $value = curl_getinfo($post);
    var_dump($value);
    exit;

    $result = curl_exec($post);

    curl_close($post);
} 
```

var_dump 的结果：

```
 array(20) {
  ["url"]=>
  string(42) "http://melinda.xpressdocs.com/PostHandler/"
  ["content_type"]=>
  NULL
  ["http_code"]=>
  int(0)
  ["header_size"]=>
  int(0)
  ["request_size"]=>
  int(0)
  ["filetime"]=>
  int(0)
  ["ssl_verify_result"]=>
  int(0)
  ["redirect_count"]=>
  int(0)
  ["total_time"]=>
  float(0)
  ["namelookup_time"]=>
  float(0)
  ["connect_time"]=>
  float(0)
  ["pretransfer_time"]=>
  float(0)
  ["size_upload"]=>
  float(0)
  ["size_download"]=>
  float(0)
  ["speed_download"]=>
  float(0)
  ["speed_upload"]=>
  float(0)
  ["download_content_length"]=>
  float(-1)
  ["upload_content_length"]=>
  float(-1)
  ["starttransfer_time"]=>
  float(0)
  ["redirect_time"]=>
  float(0)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:54:13.297

将**CURLOPT_VERBOSE 设置**为 true 以查看 cURL 正在做什么

# c# - 将数据从用户控件移动到列表框

> ID：12694700
> 
> 赞同：0
> 
> 时间：2012-10-02T16:49:38.010
> 
> 标签：c#, .net, windows-phone-7

我正在开发 Window Phone 7.5。我必须从用户控件中获取值并将它们显示在多列的 ListBox 中。每当用户提交数据时，所有控件的值都将显示在一个列表框中，每个列表框位于不同的列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:05:15.210

您应该使用数据绑定。

阅读并在此处执行所有示例：

[http://msdn.microsoft.com/en-us/library/ms750612.aspx](http://msdn.microsoft.com/en-us/library/ms750612.aspx)

你会做好充分的准备去做你想做的事。

# c# - 如何解析这种类型的 XML（带有数据类型）并读入 C 语言中的数据表

> ID：12694701
> 
> 赞同：0
> 
> 时间：2012-10-02T16:49:39.020
> 
> 标签：c#, datatable, xml-parsing

> **可能重复：**
> [将 XML 字符串加载到数据表中](https://stackoverflow.com/questions/12682848/loading-xml-string-into-datatable)

```
string parseXML = "<TEST xmlns:dt=\"urn:schemas-microsoft-com:datatypes\">
                      <A dt:dt=\"string\">10</A>
                      <B dt:dt=\"string\">20</B>
                   </TEST>" 
```

我了解到我可以使用 ReadXml 命令解析常见的 XML，如[我上一个问题的答案所示。](https://stackoverflow.com/questions/12682848/loading-xml-string-into-datatable/12683162#12683162)

# jquery - jQuery比较运算符

> ID：12694706
> 
> 赞同：0
> 
> 时间：2012-10-02T16:49:57.743
> 
> 标签：jquery

以下部分有效：

```
($(".call_1") || $("#call_1")).click(function(evt) 
      {
        evt.preventDefault();
        $("#championSlideshow, #pourSlideshow, #skimSlideshow").fadeOut(0,function()
        {
         $("#prepareSlideshow").fadeIn();
             console.log(prepare);
        });
   }); 
```

它拿起`#call_1`但没有当我点击`.call_1`

可能是语法错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T16:51:17.650

我认为您打算使用“[多重选择器](http://api.jquery.com/multiple-selector/)”：

```
$("#call_1, .call_1").click(function(evt) {

}); 
```

在您当前的代码中，对的评估`($(".call_1") || $("#call_1"))`将简单地返回`$(".call_1")`，因为两个调用都将返回一个 jQuery 对象，该对象始终是真实的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T16:51:25.760

请看这里：[http ://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

`$(".call_1") || $("#call_1")`应该是`$(".call_1, #call_1")`。

> 您可以指定任意数量的选择器组合成一个结果。这种多表达式组合器是选择不同元素的有效方法。返回的 jQuery 对象中的 DOM 元素的顺序可能不相同，因为它们将按文档顺序排列。

这是一个简单的[jsFiddle 示例](http://jsfiddle.net/uhS5C/1/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T16:54:08.850

试试看

```
$('.call_1, #call_1') 
```

`.call_1`它适用于两者`#call_1`

# racket - 在 Racket 中编写出队函数

> ID：12694709
> 
> 赞同：1
> 
> 时间：2012-10-02T16:50:43.407
> 
> 标签：racket

我试图做一个队列练习，我打算为给定的队列编写入队、出队、顶部和大小函数。出队功能目前给我带来了麻烦。dequeue 函数的期望结果如下所示。

```
(define q (make-queue))
(enqueue q 10)
(enqueue q 20)
(enqueue q 30)
(dequeue q)
10
(dequeue q)
20
(dequeue q) 
```

我的代码目前看起来像这样

```
(module queue racket
  (provide make-queue enqueue dequeue top size) ;queue-tests)
  (struct queue (front back size) #:mutable #:transparent)

    (define (make-queue) (queue null null 0))

(define (enqueue q elt)
    (set-queue-size! q (+ (queue-size q) 1))
    (set-queue-back! q (cons elt (queue-back q)))
    )

(define (dequeue q)
    (cond  ((eq? (queue-size q) 0) null)
           ((null? (queue-front q))
           (begin
           (set-queue-front! q (cdr (reverse (queue-back q))))
           (set-queue-back! q null)
           (set-queue-size! q (- (queue-size q) 1))))
           (#t 
           (begin
           (set-queue-front! q (cdr (queue-front q)))
           (set-queue-size! q (- (queue-size q) 1))))))

  (define (top q)
    (cond ((eq? (queue-size q) 0) null)
          ((null? (queue-front q)) (last (queue-back q)))
          (#t (car (queue-front q)))))

  (define (size q)
    (queue-size q)) 
```

请问dequeue函数有什么问题？我对球拍相当陌生，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:04:47.783

做一个小得多的测试用例。

```
(define q (make-queue))
(enqueue q "hi")
(dequeue q) 
```

不仅如此，不要将测试用例仅仅视为*printf*语句。您真正想要做的是写出您知道队列状态需要在特定时间点处于的状态。[并且您想用带有check-equal](http://docs.racket-lang.org/rackunit/api.html#%28def._%28%28lib._rackunit/main..rkt%29._check-equal~3f%29%29)的真实代码来表达这些期望吗？. 在每一步之后写出队列应该是什么，然后使用*check-equal?* 准确捕捉您的期望和代码的不同之处。

否则，除了没有崩溃之外，您的测试用例实际上并没有“测试”任何东西。你想从你的测试用例中得到更多：你想让它们测试**行为**。

下面是两个测试用例的例子：

```
(require rackunit)
;; ..  after your definitions
(let ()
   (define q (make-queue))
   (check-equal? q (queue null null 0)))

(let ()
   (define q (make-queue))
   (enqueue q 42)
   (check-equal? q (queue null '(42) 0))) 
```

注意，我在第二个测试用例中犯了一个故意的错误！请注意，它错误地认为队列大小为零。所以修复它。:)

*对出队*也做同样的测试。

其他低级细节：

我不明白第三种情况。我希望在那里看到一个*else*，但我没有，所以我不知道那里发生了什么。

*cond*已经内置了一个隐式*开始*，所以最好说：

```
 (cond [<test>
        <body-1>
        <...>
        <body-n>] ...) 
```

代替：

```
(cond [<test>
       (begin
         <body-1>
         <...>
         <body-n>)] ...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:52:53.830

你的问题表明你有点在海上；尤其是，您并没有感觉到您理解构成程序的各个部分。我想我会引导您在模块*内*编写测试入队和出队功能的测试用例。

对不起，如果我误解了你的情况！

# assembly - GAS：_cfi 后缀的解释

> ID：12694714
> 
> 赞同：2
> 
> 时间：2012-10-02T16:51:15.933
> 
> 标签：assembly, linux-kernel, gnu-assembler

`_cfi`某些 GAS 命令中的后缀是什么意思，例如`{pushl,popl}_cfi`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:44:30.447

CFI 代表“呼叫帧信息”。您看到的宏在[asm/dwarf2.h](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/arch/x86/include/asm/dwarf2.h)中定义，并发出处理器指令和相应的汇编程序指令，以生成用于调试器和异常处理程序的额外元信息。有关没有宏的示例，请参见[此处。](http://www.logix.cz/michal/devel/gas-cfi/)

# c# - Asp.Net Web Api - 为 IEnumerable 返回 404 获取时为空

> ID：12694719
> 
> 赞同：14
> 
> 时间：2012-10-02T16:51:28.117
> 
> 标签：c#, asp.net, asp.net-web-api

我正在使用 Asp.Net Web Api 的发布版本创建一个 API。如果没有找到结果，我正在尝试传回正确的响应代码 (404)。

**First Get Version（抛出多个枚举错误）：**

```
public IEnumerable<MyObjectType> Get(int id, string format)
{
    var db = new DbEntities();

    var result = db.pr_ApiSelectMyObjectType(store, id, format).AsEnumerable();
    if (result.Any())
    {
        return result;
    }
    var response = new HttpResponseMessage(HttpStatusCode.NotFound) 
        { Content = new StringContent("Unable to find any results") };
    throw new HttpResponseException(response);
} 
```

**第二个获取版本（结果永远不会为空，所以它总是返回 200）：**

```
public IEnumerable<MyObject> Get(int id, string format)
{
    var db = new DbEntities();

    var result = db.pr_ApiSelectMyObjectType(store, id, format);
    if (result == null)
    {
        var response = new HttpResponseMessage(HttpStatusCode.NoContent) 
            { Content = new StringContent("Unable to find any results") };
        throw new HttpResponseException(response);
    }
    return result.AsEnumerable();
} 
```

如果没有找到结果，我如何传回 404？我知道我可以使用一个列表，但我有一个自定义 csv 媒体类型格式化程序，它只适用于 IEnumerable 类型，所以我更愿意坚持使用它。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-02T17:42:46.360

`null`更好的方法是在*动作过滤器级别*捕获，定义一个具有全局范围的动作过滤器，并从中抛出异常 404：

```
public class NullFilter : ActionFilterAttribute
{
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        var response = actionExecutedContext.Response;

        object responseValue;
        bool hasContent = response.TryGetContentValue(out responseValue);

        if (!hasContent)
            throw new HttpResponseException(HttpStatusCode.NotFound);
    }
} 
```

通过这种方式，您不需要`Any`在您的操作中使用，代码会更简单：

```
public IEnumerable<MyObjectType> Get(int id, string format)
{
    using (db = new DbEntities())
    {
       return db.pr_ApiSelectMyObjectType(store, id, format)
                .AsEnumerable();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T16:55:25.700

将结果转换为列表可能是最简单的，显然可以多次枚举：

```
var result = db.pr_ApiSelectMyObjectType(store, id, format).ToList();
if (!result.Any())
{
    ...
} 
```

当然，这意味着实现整个查询......但大概你最终会在某个时候这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-02T01:54:59.687

在你的情况下，而不是返回：

```
return result.AsEnumerable(); 
```

你可以返回空值：

```
return null; 
```

从调用函数中，您可以检查返回的结果，例如：

```
var myObject = Get(id, format);
if (myObject == null)
    return NotFound(myObject);
else
    return Ok(myObject); 
```

这样，如果 Get 函数找不到记录，您将得到 404 not found。

# javascript - 图像模糊？Chrome 上没有模糊图像，仅在 IE/FF 上......为什么？

> ID：12694722
> 
> 赞同：0
> 
> 时间：2012-10-02T16:51:49.850
> 
> 标签：javascript, html, preload, preloading

我一直在做一个网站，我已经广泛使用文本图片来实现我不希望原生于 html/css 的样式和外观。如您所见...很容易检测图像中的文本是否有任何一点模糊。

一切都超级清晰，在 Chrome 上运行良好。但是，在 IE 或 FF 上完成页面加载后会出现问题。我所有的图像都变得永远模糊，即使它们来回缩放等等。当时，在我的大脑中，放入比必要更大的图片是有道理的，因为它会更清晰......但我想我完全错误的。希望一些大师能尽快解决这个问题。提前致谢！

***上下文的一些示例代码：***

```
 <div id="whiteBg">
            <img id="birdMain" src="Pictures/bird.png" alt="title"/>
            <img id="flowerMain1" src="Pictures/flower.png" alt="title"/>
            <img id="flowerMain2" src="Pictures/flower.png" alt="title"/>
            <img id="flowerMain3" src="Pictures/flower.png" alt="title"/>
            <img id="titleMain" src="Pictures/csaname.png" alt="title"/>
            <img id="csalogoMain" src="Pictures/csalogo.png" alt="asdf"/>
            </div> 
```

我尝试预加载图像以拼命尝试修复解决方案，但这也没有做任何事情。我什至不知道预加载的代码行是否正常工作。

***预加载代码：***

```
 var images = new Array("Pictures/1greatwall.jpg", "Pictures/2spring-scrolls.jpg", "Pictures/3lily.jpg", "Pictures/4heavy-snow.jpg", "Pictures/5sunrise.jpg", "Pictures/6crane.jpg", "Pictures/7winding-road.jpg", "Pictures/8guqin.jpg", "Pictures/9sealflower.jpg", "Pictures/10pine.jpg", "Pictures/11huangshan.jpg", "Pictures/12dragon.jpg", "Pictures/13otters.jpg", "Pictures/1greatwall.jpg", "Pictures/14emei.jpg");
var imgNumber = 1;
var numberOfImg = images.length;
if (document.images) {

//loads slideshow picures
var image1 = new Image();
image1.src = "Pictures/1greatwall.jpg";
var image2 = new Image();
image2.src = "Pictures/2spring-scrolls.jpg";
var image3 = new Image();
image3.src = "Pictures/3lily.jpg";
var image4 = new Image();
image4.src = "Pictures/4heavy-snow.jpg";
var image5 = new Image();
image5.src = "Pictures/5sunrise.jpg";
var image6 = new Image();
image6.src = "Pictures/6crane.jpg";
var image7 = new Image();
image7.src = "Pictures/7winding-road.jpg";
var image8 = new Image();
image8.src = "Pictures/8guqin.jpg";
var image9 = new Image();
image9.src = "Pictures/9sealflower.jpg";
var image10 = new Image();
image10.src = "Pictures/10pine.jpg";
var image11 = new Image();
image11.src = "Pictures/11huangshan.jpg";
var image12 = new Image();
image12.src = "Pictures/12dragon.jpg";
var image13 = new Image();
image13.src = "Pictures/13otters.jpg";
var image14 = new Image();
image14.src = "Pictures/14emei.jpg";

//loads other essential background pictures...
var image15 = new Image();
image15.src = "Pictures/csalogo.jpg";
var image16 = new Image();
image16.src = "Pictures/bird.jpg";
var image17 = new Image();
image17.src = "Pictures/flower.jpg";
var image18 = new Image();
image18.src = "Pictures/csaname.jpg";
var image19 = new Image();
image19.src = "Pictures/seemorename.jpg";
var image20 = new Image();
image20.src = "Pictures/seemore.jpg";
var image21 = new Image();
image21.src = "Pictures/leftarrow.jpg";
var image22 = new Image();
image22.src = "Pictures/slideshowbutton.jpg";
var image23 = new Image();
image23.src = "Pictures/rightarrow.jpg";
var image24 = new Image();
image24.src = "Pictures/logo.jpg";
var image25 = new Image();
image25.src = "Pictures/menu.jpg";
var image26 = new Image();
image26.src = "Pictures/csa.jpg";
} 
```

新笔记：

我发现在调整窗口大小/缩放窗口后刷新图像本身将在 Chrome 上自动工作，但是在 Firefox 中并非如此。刚测试过。造成这种情况的根本原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T22:25:23.603

此问题应在较新的浏览器版本中修复。

# objective-c - Objective C 中的初学者控制流问题

> ID：12694726
> 
> 赞同：2
> 
> 时间：2012-10-02T16:52:10.543
> 
> 标签：objective-c, ios, asynchronous, uilocalnotification

在一个基本的 Reminder 应用程序中，我有委托方法，我调用一个方法`scheduleNotification`来安排 UILocalNotification 并调用一个附加方法`addReminderToDataModel`来将 Reminder 数据保存到 NSUserDefaults。这是我的代码...

```
- (void)detailViewControllerDidSave:(DetailViewController *)controller
{
    [self dismissViewControllerAnimated:YES completion:^{
        [self scheduleNotification: controller.reminderData];
        [self addReminderToDataModel: controller.reminderData];
    }];
} 
```

这两种方法根本不相互依赖，因此它们触发的顺序无关紧要。我可能想太多了，但是只有在另一种方法完成时、使用块或仅在第一种方法的实现结束时才触发其中一种方法有什么好处？我问这个的部分原因是因为我需要在调用这些方法中的任何一个之前分配一个`reminderId`to 。`reminderData`

# java - 使用 Java 绘制基于输入实时更新的图形？

> ID：12694729
> 
> 赞同：3
> 
> 时间：2012-10-02T16:52:12.593
> 
> 标签：java, graphics, graph

所以我对java中的图形绘制经验很少，所以我的第一个问题本质上是：为了在java中绘制图形，我应该查看哪些教程？

第二个问题是我的主要任务。我希望能够使用从文件中获取的新数据实时（或每 10 秒）更新 java 中的图形，即：我将通过管道将文件传输到程序，并且每隔一段时间它会检查文件新数据，并用新数据更新可视图形，但这必须是实时的，这意味着图形保留所有先前已绘制的数据，并且可以看到从左到右移动（到达屏幕边缘时然后，X 轴将开始以更高的数字向左移动。

是否有任何已经编写好的算法可以做到这一点？或者如果我必须自己完成这项工作，谁能给我一个关于从哪里开始的指针？

谢谢，

欧登

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:57:05.987

为什么不使用[JFreeChart](http://www.jfree.org/jfreechart/)？它是一个广泛使用的图表库。它声称不适合实时使用，但对于您正在谈论的频率（每 10 秒），它应该非常适合。

[这个答案](https://stackoverflow.com/a/1304522/12960)链接到一些示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:31:26.627

如果您可以使用 Java 7，请查看 JavaFX API。Oracle 的 Ensemble 示例附带了一个股票代码（图表 -> 线条 -> 高级股票）。这是您想要实现的目标的良好开端。下面是Oracle提供的代码：

```
import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.stage.Stage;
import javafx.animation.Animation;
import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.util.Duration;

/**
 * A simulated stock line chart.
 *
 * @see javafx.scene.chart.Chart
 * @see javafx.scene.chart.LineChart
 * @see javafx.scene.chart.NumberAxis
 * @see javafx.scene.chart.XYChart
 */
public class AdvancedStockLineChartSample extends Application {

    private XYChart.Series<Number,Number> hourDataSeries;
    private XYChart.Series<Number,Number> minuteDataSeries;
    private NumberAxis xAxis;
    private Timeline animation;

    private double hours = 0;
    private double minutes = 0;
    private double timeInHours = 0;
    private double prevY = 10;
    private double y = 10;

    private void init(Stage primaryStage) {
        Group root = new Group();
        primaryStage.setScene(new Scene(root));
        root.getChildren().add(createChart());
        // create timeline to add new data every 60th of second
        animation = new Timeline();
        animation.getKeyFrames().add(new KeyFrame(Duration.millis(1000/60), new EventHandler<ActionEvent>() {
            @Override public void handle(ActionEvent actionEvent) {
                // 6 minutes data per frame
                for(int count=0; count < 6; count++) {
                    nextTime();
                    plotTime();
                }
            }
        }));
        animation.setCycleCount(Animation.INDEFINITE);
    }

    protected LineChart<Number, Number> createChart() {
        xAxis = new NumberAxis(0,24,3);
        final NumberAxis yAxis = new NumberAxis(0,100,10);
        final LineChart<Number,Number> lc = new LineChart<Number,Number>(xAxis,yAxis);
        // setup chart
        lc.setId("lineStockDemo");
        lc.setCreateSymbols(false);
        lc.setAnimated(false);
        lc.setLegendVisible(false);
        lc.setTitle("ACME Company Stock");
        xAxis.setLabel("Time");
        xAxis.setForceZeroInRange(false);
        yAxis.setLabel("Share Price");
        yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis,"$",null));
        // add starting data
        hourDataSeries = new XYChart.Series<Number,Number>();
        hourDataSeries.setName("Hourly Data");
        minuteDataSeries = new XYChart.Series<Number,Number>();
        minuteDataSeries.setName("Minute Data");
        // create some starting data
        hourDataSeries.getData().add(new XYChart.Data<Number,Number>(timeInHours,prevY));
        minuteDataSeries.getData().add(new XYChart.Data<Number,Number>(timeInHours,prevY));
        for (double m=0; m<(60); m++) {
            nextTime();
            plotTime();
        }
        lc.getData().add(minuteDataSeries);
        lc.getData().add(hourDataSeries);
        return lc;
    }

    private void nextTime() {
        if (minutes == 59) {
            hours ++;
            minutes = 0;
        } else {
            minutes ++;
        }
        timeInHours = hours + ((1d/60d)*minutes);
    }

    private void plotTime() {
        if ((timeInHours % 1) == 0) {
            // change of hour
            double oldY = y;
            y = prevY - 10 + (Math.random()*20);
            prevY = oldY;
            while (y < 10 || y > 90) y = y - 10 + (Math.random()*20);
            hourDataSeries.getData().add(new XYChart.Data<Number, Number>(timeInHours, prevY));
            // after 25hours delete old data
            if (timeInHours > 25) hourDataSeries.getData().remove(0);
            // every hour after 24 move range 1 hour
            if (timeInHours > 24) {
                xAxis.setLowerBound(xAxis.getLowerBound()+1);
                xAxis.setUpperBound(xAxis.getUpperBound()+1);
            }
        }
        double min = (timeInHours % 1);
        double randomPickVariance = Math.random();
        if (randomPickVariance < 0.3) {
            double minY = prevY + ((y-prevY) * min) - 4 + (Math.random()*8);
            minuteDataSeries.getData().add(new XYChart.Data<Number,Number>(timeInHours,minY));
        } else if (randomPickVariance < 0.7) {
            double minY = prevY + ((y-prevY) * min) - 6 + (Math.random()*12);
            minuteDataSeries.getData().add(new XYChart.Data<Number,Number>(timeInHours,minY));
        } else if (randomPickVariance < 0.95) {
            double minY = prevY + ((y-prevY) * min) - 10 + (Math.random()*20);
            minuteDataSeries.getData().add(new XYChart.Data<Number,Number>(timeInHours,minY));
        } else {
            double minY = prevY + ((y-prevY) * min) - 15 + (Math.random()*30);
            minuteDataSeries.getData().add(new XYChart.Data<Number,Number>(timeInHours,minY));
        }
        // after 25hours delete old data
        if (timeInHours > 25) minuteDataSeries.getData().remove(0);
    }

   public void play() {
        animation.play();
    }

    @Override public void stop() {
        animation.pause();
    }    

    @Override public void start(Stage primaryStage) throws Exception {
        init(primaryStage);
        primaryStage.show();
        play();
    }
    public static void main(String[] args) { launch(args); }
} 
```

截屏： ![在此处输入图像描述](../Images/975b64b71fc5552bf1fe08262a2dd1e6.png)

# jquery - 隐藏\显示内容会覆盖其他扰流板按钮

> ID：12694735
> 
> 赞同：0
> 
> 时间：2012-10-02T16:52:42.813
> 
> 标签：jquery, css, position

我做了一些剧透，当你点击它们时，它会滑动一些信息

所以我点击了扰流板1，它确实滑动了它，但奇怪的是在其他扰流板下面..

像这样：

[http://gyazo.com/4571423534e2442dc960d119c668dfa8](http://gyazo.com/4571423534e2442dc960d119c668dfa8)

为什么会这样做，我该如何解决它，以便当前剧透下方的剧透会在内容下方滑落？

我的代码：

```
 <div id="container">
    <div class="spoiler1"><span id="title1">This is Test</div>
        <span class="hide1">testttttttttttttttttttttt</span><!-- This is what opens after clicking on spoiler -->
        <br /><br />
    <div class="spoiler2"><span id="title1">This is Test</div>
        <br /><br />
    <div class="spoiler3"><span id="title1">This is Test</div>
        <br /><br />
    <div class="spoiler4"><span id="title1">This is Test</div>
        <br /><br />
        <br /><br />
        </div>

<script type="text/javascript">

$(document).ready(function(){

        $(".hide1").hide();
        $(".spoiler1").show();

    $('.spoiler1').click(function(){
    $(".hide1").slideToggle();
    });

});

</script> 
```

CSS：

```
#title1 {
    color: #1794c8;
    position: relative;
    top: 10px;
    left: 10px;
    }

.spoiler1{
    font-size: 16px;
    background-color: #c0e6d2;
    border: 1px solid #a7c8b7;
    height: 45px;
    width: 530px;
    position: absolute;
        text-shadow: 0px 1px 0px #f4f4f4;
        filter: dropshadow(color=#fff, offx=0, offy=1);
        z-index:1;

}
.spoiler2{
    font-size: 16px;
    background-color: #c0e6d2;
    border: 1px solid #a7c8b7;
    height: 45px;
    width: 530px;
    position: absolute;
        text-shadow: 0px 1px 0px #f4f4f4;
        filter: dropshadow(color=#fff, offx=0, offy=1);
}
.spoiler3{
    font-size: 16px;
    background-color: #c0e6d2;
    border: 1px solid #a7c8b7;
    height: 45px;
    width: 530px;
    position: absolute;
        text-shadow: 0px 1px 0px #f4f4f4;
        filter: dropshadow(color=#fff, offx=0, offy=1);
}
.spoiler4{
    font-size: 16px;
    background-color: #c0e6d2;
    border: 1px solid #a7c8b7;
    height: 45px;
    width: 530px;
    position: absolute;
        text-shadow: 0px 1px 0px #f4f4f4;
        filter: dropshadow(color=#fff, offx=0, offy=1);
} 
```

我该如何解决？：/

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T06:29:10.397

新访客尝试此作为剧透

HTML

```
 <p>In the movie Citizen Kane, Charles Foster Kane's last word "Rosebud" 
turns out to <span class="spoiler">be a sled.</span></p> 
```

CSS

```
<style>
.reveal { cursor:pointer; }
.spoiler{ display:none; }
</style> 
```

查询

```
$(document).ready(function() { 

    $('<a class="reveal">&gt;&gt;</a> ').insertBefore('.spoiler');

    $("body").on("click",".reveal" ,function(){
        $(this).parents("p").children("span.spoiler").fadeIn(2500);
        $(this).parents("p").children("a.reveal").fadeOut(600);
    });

}); 
```

取自 [http://css-tricks.com/fade-in-spoiler-revealer/](http://css-tricks.com/fade-in-spoiler-revealer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:54:37.723

`z-index=1`在扰流板 1 上使用css 属性。

[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:57:22.920

您的 HTML 已损坏，您应该在此处设置和结束标记`span`：

```
<div class="spoiler1"><span id="title1">This is Test</div> 
```

这可能会混淆 DOM 并成为问题的原因。您在所有 4 个扰流器 div 上都有相同的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:37:54.697

我相信[这个小提琴](http://jsfiddle.net/kKz8y/)就是你要找的。

问题在于您的 HTML 和 CSS。

使用容器来划分内容并设置这些容器的样式。

我已经简化了类，等等它更容易理解。

HTML

```
<div id="featurelist_2_wrap">
    <div class="spoiler">
        <span class="feature">Networks</span>
        <div class="hide"><span class="featurelist_3-text-margin">We have a very secure system, including secure logging in,<br>
            management, balance management and more.<br>
            We do a SQL backup every hour to protect us from our<br>
            data being lost.</span></div>
    </div>
     <div class="spoiler"><span class="feature">Networks</span>
        <div class="hide"><span class="featurelist_3-text-margin">We have a very secure system, including secure logging in,<br>
            management, balance management and more.<br>
            We do a SQL backup every hour to protect us from our<br>
            data being lost.</span></div>
    </div>
    <div class="spoiler"><span class="feature">Networks</span>
        <div class="hide"><span class="featurelist_3-text-margin">We have a very secure system, including secure logging in,<br>
            management, balance management and more.<br>
            We do a SQL backup every hour to protect us from our<br>
            data being lost.</span></div>
    </div>    

</div> 
```

CSS

```
.spoiler {
    position:relative;
    float:left;
}

.feature {
    display:block;
    background-color: #C0E6D2;
    border: 1px solid #A7C8B7;
    font-size: 16px;
    line-height:45px;
    text-shadow: 0 1px 0 #F4F4F4;
    width: 530px;
}

.hide { display:none; } 
```

Javascript

```
$('.spoiler').click(function() {
    $(this).find('.hide').slideToggle();
}) 
```

# wix - wix 3.6 刻录功能树选择 MSI 安装

> ID：12694737
> 
> 赞同：5
> 
> 时间：2012-10-02T16:52:54.793
> 
> 标签：wix, windows-installer, wix3.6, burn

我需要从一个统一的 UI 安装多个 MSI。我还需要一个“功能”树来让用户选择要安装的产品。

看过类似的问题后，似乎 Burn 是要走的路。

看[这个](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/How-to-create-a-feature-tree-with-burn-td7579948.html)，看来我必须编写一个自定义 BA 并实现我自己的特征树。它是否正确？

看来我最终会得到一个看起来不像 MSI 的标准 UI 的自定义 UI。这似乎很遗憾，恕我直言，MSI 的一大优点是它们总是向用户呈现相同的 UI，并且多年来一直这样做。

如果这是要走的路，有没有一个简单的例子可以开始？

wix3.6 真的不原生支持特征树吗？......似乎是一个非常基本和有用的功能，恕我直言......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:34:00.050

功能树是 MSI 上的自定义控件，不可用于一般用途。可以使用标准的树控件，但没有人将该功能添加到 wixstdba。当然，您可以添加该功能（在 wix-devs@lists.sourceforge.net 上开始讨论）或实现您自己的 BA。wixstdba 代码位于 src\ext\BalExtension\wixstdba 或托管示例中有 src\Setup\WixBA。两者都是合理的起点。

# javascript - 如何在 IE8 中调试 eval_code？

> ID：12694739
> 
> 赞同：0
> 
> 时间：2012-10-02T16:52:56.650
> 
> 标签：javascript, internet-explorer, debugging, internet-explorer-8, eval

所以我遇到了一个奇怪的问题，即 Firefox 中的 Javascript 变量范围没有遍历 Internet Explorer 中文件中的父/子关系。在尝试调试它时，我需要查看发生问题的文件的源代码。不幸的是，这个文件只是以“eval_code”的形式出现，而且有几十个。第一次找到的时候，我设置了一个断点，但是每次的eval_code文件都不一样，所以我刷新的时候断点是在第一个eval_code加载的，完全随机的。我该如何调试呢？

# javascript - 使用 IE6 时 JQGrid POST 不包含 postData

> ID：12694742
> 
> 赞同：0
> 
> 时间：2012-10-02T16:53:13.390
> 
> 标签：javascript, wcf, jqgrid, internet-explorer-6

使用 Fiddler2，在使用 IE6 时，我看到 POST 请求不包含下面指定的 postData。我已经验证路径是在 JQGrid 初始化时定义的。它适用于 IE9 和 Chrome。我正在调用 WCF POST 服务。在没有参数的情况下进行调用，并挂起 IE6 且没有响应。

任何想法表示赞赏！编辑：

最新更新：已解决

问题是我的动态调整大小代码的副作用；我在窗口调整大小事件上调整网格包装器 div 的大小，不幸的是，在 IE6 中，内容调整大小会冒泡到窗口导致递归。这就像在谈论我的日记，但也许这会帮助其他人。

好的，我可以通过单独的 AJAX 调用取回数据（通过 Fiddler 验证），并使用 AddJSONData() 方法绑定到网格。调试器在数据类型的末尾弹出：回调函数...但是如果我让它继续执行，IE6 会在此时挂起。我仍然坚持这一点！

```
 grid.jqGrid({
                datatype: function ()
                {
                    var ts = this,      // - cache 'this' to use later in the complete callback
                    parameters = this.p;         // - cache the grid parameters

                    $("#list")[0].addJSONData(_gridData);

                    if ($.isFunction(parameters.loadComplete))
                        parameters.loadComplete.call(ts, _gridData);

                    if (parameters.loadonce || parameters.treeGrid)
                        parameters.datatype = "local";

                    debugger;
                }, 
```

当我可以的时候，我会努力解决这个问题。我为 GetData 服务方法编写了一个测试 ajax 调用，它在正文中很好地填充了 POST 数据，并返回了所有网格数据。好的，所以 JQGrid 没有在请求正文中设置参数，我的 JQGrid 是否配置错误？请指教！

* * *

好吧，肯定不会很喜欢。在 serializeGridData 函数中，事实证明 JSON2 stringify 将 postData 视为字符串？键名周围的引号被转义：

```
IE6: "{\"path\":\"c:\\Source\\TestUpload\\Uploads\\5ec33030-ab7b-4480-9deb-3153726c1ede.xls\",\"_search\":true,\"nd\":1349365262553,\"rows\":15,\"page\":1,\"sidx\":\"IDNumber\",\"sord\":\"desc\"}"

IE9:  {"path":"c:\\Source\\TestUpload\\Uploads\\3228b61e-4f1b-4ce4-813e-10f58b1b4285.xls","_search":true,"nd":1349365395840,"rows":15,"page":1,"sidx":"IDNumber","sord":"desc"} 
```

* * *

好的，所以我使用 Fiddler 的 compose 功能来修改 IE6 JQGrid 请求，使用有效的会话 cookie，并添加 POST 数据：

```
{"path":"c:\\Source\\TestUpload\\Uploads\\cb238b83-3c6e-42c2-92be-0e8d08dd905e.xls","_search":true,"nd":1349284471504,"rows":15,"page":1,"sidx":"IDNumber","sord":"desc"} 
```

......它工作得很好。所以出于某种原因，JQGrid 没有填充 IE6 的 POST 数据？有任何想法吗？

* * *

值得注意的是，请求标头中的内容长度是正确的，只是没有关联的 POST 数据。我尝试在 Fiddler 中的 XMLHttpRequests 上设置断点，但它没有在 JQGrid 请求上中断；然而，它确实在之前的 AJAX 请求中按预期中断了。

这是 IE9 中成功的 jqgrid POST 请求的原始标头：

```
POST http://localhost/Loader.svc/GetData?_=1349274977838 HTTP/1.1
Accept: application/json, text/javascript, */*; q=0.01
Content-Type: application/json
X-Requested-With: XMLHttpRequest
Referer: http://localhost/BulkOrderPersonalized.aspx
Accept-Language: en-US,fr;q=0.5
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host: localhost
Content-Length: 169
Connection: Keep-Alive
Pragma: no-cache
Cookie: ASP.NET_SessionId=qlj50u45mk4f5q55izyj23us;    MerchantV2=BAEE474A47A5264EF3B3C1977173019C569F51792BEA95C1F129634F6B5E8C8475631791B382D7159E78364979FE541B9337D3C5D2B1B0563A653E6DFD738D0D291A9CFADB3555FA4E3D891BD8912D6E0F315A51E61F240F69A6CA061B6CEA17868F9D7E33C36415DEAB3EC9178A9A2748CF002B

{"path":"c:\\Source\\TestUpload\\Uploads\\b7f0ba08-c9f5-46b3-a856-dfa33410be75.xls","_search":true,"nd":1349274977961,"rows":15,"page":1,"sidx":"IDNumber","sord":"desc"} 
```

这是挂起 IE6 的 POST 请求的原始标头：

```
POST http://10.8.8.72/Loader.svc/GetData?_=1349271720318 HTTP/1.1
x-requested-with: XMLHttpRequest
Accept-Language: en-us
Referer: http://10.8.8.72/BulkOrderPersonalized.aspx
Accept: application/json, text/javascript, */*; q=0.01
Content-Type: application/json
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727;     NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)
Host: 10.8.8.72
Content-Length: 169
Proxy-Connection: Keep-Alive
Pragma: no-cache
Cookie: ASP.NET_SessionId=5fvcrn55mrcjw145ari0h2a1;         MerchantV2=C1EB658057878B9D526DA8216B181011CA53F98BFA7A794AFFFEF7FD855E64C63244EA741FA984FDBB8699787EC387D195474B1D08F1C784E79ECC5C8F16206CE477C91891DC26673015908CBE3C012E10CB8A3DCABDC1762DD10C3D8D15ABC403C454F4231BD16F63787D6E387683F5E99634B5 
```

唯一相关的区别似乎是 JQGrid 在使用 IE6 时不填充 POST 数据。

以前的 jQuery AJAX 调用与发布数据在 JQGrid 绑定之前执行得很好：

```
function GetRequestConfigs(type, issuingBank) // - get configuration objects for user; (load initially)
{
if (_configurations == null) {

    $.ajax({
        async: false,
        type: 'POST',
        url: 'Loader.svc/GetRequestConfigurations',
        data: '{"type":"' + type + '","issuingBank":"' + issuingBank + '"}',
        dataType: 'json',
        contentType: 'application/json',
        success: function(response, textStatus, xhr) {
            _configurations = JSON.parse(response.d);
        },
        error: function(xhr, textStatus, errorThrown) {
            alert(textStatus);
        }
    });
}
return _configurations; 
```

}

此 JQGrid POST 请求失败：

```
grid.jqGrid({
            url: 'Loader.svc/GetData',                  // - webinvoke post method
            postData: { path: path },

            search: true,
            datatype: 'json',
            mtype: 'POST',
            loadonce: true,                             // - load data once on server side, then switch to local data handling
            ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },

            serializeGridData: function (postData)      // - process returned object from web-invoke to json
            {
                return JSON.stringify(postData);
            },

            jsonReader: {                                       // - map json to grid elements ( this is how the grid expects the data from the server )
                root: function (obj) { return obj.d.rows; },
                page: function (obj) { return obj.d.page; },
                total: function (obj) { return obj.d.total; },
                records: function (obj) { return obj.d.records; }
            }, ... 
```

# java - 如果你使用 Scala 作为命令式语言，你做错了吗？

> ID：12694746
> 
> 赞同：1
> 
> 时间：2012-10-02T16:53:31.250
> 
> 标签：java, scala, coding-style, functional-programming

例如，在上一个问题中：[Scala 编码风格和约定？](https://stackoverflow.com/questions/3718674/scala-coding-styles-and-conventions)

有人抱怨“**如果方法增长，阅读代码会变得非常痛苦**”..

Martin Odersky 博士回答“ **.. 函数式编程风格是有很多小方法..** ”

那么是不是说你在使用Scala的时候，应该尽可能的用FP风格写，不要把Scala当作Java的替代品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:57:09.403

Scala 的美妙之处在于它对不同的人来说是不同的东西。鼓励以实用的方式写作。但是，您也可以以命令式风格编写 Scala。

即使以命令式风格编写，我们也鼓励您编写小方法。这使代码更易于阅读并因此更易于维护。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T18:27:22.153

只是给你一个小例子，为什么鼓励函数式风格，假设你有 2 个不保证相同大小的整数列表，你必须创建一个新的整数列表，其中所有的总和等于较短列表的长度。在命令式风格中，您将执行以下操作：

```
val list1 = List(1,2,3,4,5)
val list2 = List(1,2,3,4,5,6,7)

// imperative way
val newList = collection.mutable.ListBuffer[Int]()

val length = math.min(list1.size, list2.size)

for(i <- 0 until length) {
  newList += list1(i) + list2(i)
}

// functional way
list1.zip(list2).map { case (x,y) => x+y } 
```

看，第二个例子更小，更关注“做什么”而不是“如何”做。每个人都必须从某个点开始，一开始你可以编写普通的命令式代码，但迟早你会采用越来越多的函数式范例，只是因为它们会让你的代码更好、更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:07:06.143

我喜欢 Scala 的地方在于它是一种多范式语言。你可以用最适合手头问题的方式编写代码。

我强烈怀疑，随着时间的推移，您将在某些代码中转向更具功能性的风格。但不一定全部（确实存在一些问题，命令式方法更简洁地描述了问题）。

肯定有人会用“对”和“错”来表达这种东西，但我怀疑他们没有抓住重点。如果您想编写纯函数式代码，请使用纯函数式语言。

# c# - 无效的关键字端口

> ID：12694747
> 
> 赞同：1
> 
> 时间：2012-10-02T16:53:33.210
> 
> 标签：c#, mysql, connection-string, remote-server

**连接字符串**：

```
 <add name="connectionstringname" connectionString="server=XX.XX.XXX.XXX; port=XXXX; Database=databaseName; user id=UserID; password=password;"
    providerName="MySql.Data.MySqlClient" /> 
```

在我的机器上工作正常，但是当我提交对实时服务器的更改时，它给出的错误是 **“无效的关键字端口”**

**注意**数据库在不同的服务器上，我在本地和实时服务器上使用相同的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:56:05.520

尝试使用这样的符号：

```
server=XX.XX.XXX.XXX:YYYY ..... 
```

其中 YYYY 是您的端口号。

# c++ - 关于 C++ 中公式的括号和括号

> ID：12694749
> 
> 赞同：-1
> 
> 时间：2012-10-02T16:53:58.957
> 
> 标签：c++

感谢您查看我的 C++ 问题。

我遇到了一个问题。

我得到了这种格式的公式

```
Data  = [ (percentage / 15) – (var1 + var2)  / 20]  *  [ var3 +  var4]; 
```

如果我将上面的语句放入，它将编译为

```
sample.cpp:131:1: error: stray ‘\342’ in program
sample.cpp:131:1: error: stray ‘\200’ in program
sample.cpp:131:1: error: stray ‘\223’ in program
sample.cpp:131:81: error: ‘(percentage/ 15)’ cannot be used as a function 
```

如何更改数据语句以使公式在 C++ 中工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:03:48.337

这里有两个问题：

1.  您不能使用`[`and`]`对表达式进行分组。将它们更改为`(`和`)`。
2.  您使用的减号实际上是一个短划线（unicode 字符 U+2013），而不是您应该使用的正常连字符减号（U+002D）。从源文件字符到*基本源字符集*的映射是实现定义的，并且您的编译器不会将短划线映射到减号字符（我想像大多数编译器一样）。

这里的提示：不要只是将文本从文档复制到您的代码中，尤其是当其他文档*不是*代码时。

这是正确的表达方式：

```
Data  = ((percentage / 15) - (var1 + var2) / 20) * (var3 + var4); 
```

您收到的错误表明出现了三个不应该存在的字节。它们是（八进制）：`342 200 223`。在二进制中，即`11100010 10000000 10010011`. 快速谷歌搜索会告诉你这是 U+2013 的二进制表示。

# c# - 发布 Facebook 分数 400 错误请求

> ID：12694750
> 
> 赞同：1
> 
> 时间：2012-10-02T16:53:59.503
> 
> 标签：c#, facebook-graph-api

我正在尝试使用以下代码更新 Facebook 排行榜上的用户分数：

```
string _url = "https://graph.facebook.com/MY_APP_ID/scores";
var _parameters="score=100&access_token=MY_APP_TOKEN_WITH_PUBLISH_ACTION";
WebRequest _request = WebRequest.Create(_url);
_request.Method = "POST";                 
var _dataArray = Encoding.ASCII.GetBytes(_parameters.ToString());                
_request.ContentLength = _dataArray.Length;

using (Stream _dataStream = _request.GetRequestStream())
{
    _dataStream.Write(_dataArray, 0, _dataArray.Length);
}
WebResponse _response = _request.GetResponse(); 
```

当我尝试获取响应时，应用程序会引发异常：

> 远程服务器返回错误：(400) 错误请求。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:04:26.380

实际上，我正处于与 LinkedIn 类似的事情中。将其包装在 try 块中并尝试此异常处理程序：

```
catch (WebException webEx) {
    StringBuilder sb = new StringBuilder();

    sb.AppendLine(webEx.Message);

    sb.AppendLine();
    sb.AppendLine("REQUEST: ");
    sb.AppendLine();

    sb.AppendLine(string.Format("Request URL: {0} {1}", webRequest.Method, webRequest.Address));
    sb.AppendLine("Headers:");
    foreach (string header in webRequest.Headers) {
        sb.AppendLine(header + ": " + webRequest.Headers[header]);
    }

    sb.AppendLine();
    sb.AppendLine("RESPONSE: ");
    sb.AppendLine();

    sb.AppendLine(string.Format("Status: {0}", webEx.Status));

    if (null != webEx.Response) {
        HttpWebResponse response = (HttpWebResponse) webEx.Response;

        sb.AppendLine(string.Format("Status Code: {0} {1}", (int) response.StatusCode, response.StatusDescription));
        if (0 != webEx.Response.ContentLength) {
            using (var stream = webEx.Response.GetResponseStream()) {
                if (null != stream) {
                    using (var reader = new StreamReader(stream)) {
                        sb.AppendLine(string.Format("Response: {0}", reader.ReadToEnd()));
                    }
                }
            }
        }
    }

    _log.Warn(sb.ToString(), webEx);

    throw new Exception(webEx.Message, webEx);
} 
```

这至少会记录他们返回的内容。就我而言，我无法在我的系统上重现该问题，但 QA 的服务器收到了大量的 400 个错误请求。结果发现它们是无效的时间戳，因为系统时钟慢了 7 分钟，LinkedIn 拒绝了时间戳。

# excel - MS Excel VBA 宏动态范围

> ID：12694753
> 
> 赞同：0
> 
> 时间：2012-10-02T16:54:09.770
> 
> 标签：excel, vba, dynamic, range

这是表格的示例（带有令人毛骨悚然的示例数据）

```
|Col A |Col B |Col C |Col D |Col E
+------------+----------+--------+----------+-----
|数字 |值 |X |日期 |十进制
|1 | AA|X |2012/01/01|.1
|2 | BB|X |2012/02/01|.2
|3 | 抄送|X |2012/03/01|.3
|4 | DD|X |2012/04/01|.4
|5 | EE|X |2012/05/01|.5
```

需要做什么：

*   根据宏中的“值”（在本例中为 Col B）对表格进行排序

条件：

*   标头值不会改变
*   我必须搜索包含单词“Value”的标题，因为它从 Col C 更改为 Col D 或 Col A...B...E...
*   列标题总是留在第一行

到目前为止我做了什么：

*   蛮力值...（坏！）
*   搜索标题以查找包含标题“值”的列
*   获取列字母/数字并存储在变量中

问题：

*   使用列字母或数字作为排序的基础。(即范围 (colLetter & ":" & colLetter))

任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:39:05.717

```
Sub Tester()

Const SORT_HEADER As String = "Value"
Dim sht As Worksheet, f As Range

    Set sht = Worksheets("Sheet1")

    Set f = sht.Rows(1).Find(SORT_HEADER, LookIn:=xlValues, lookat:=xlWhole)

    If Not f Is Nothing Then

        sht.Range("A1").CurrentRegion.Sort _
            Key1:=sht.Columns(f.Column), Order1:=xlAscending, Header:=xlYes

    Else
        MsgBox "'" & SORT_HEADER & "' column not found!"
    End If

End Sub 
```

# c# - 为什么我不能设置循环算法的索引值？

> ID：12694756
> 
> 赞同：2
> 
> 时间：2012-10-02T16:54:27.990
> 
> 标签：c#, algorithm, loops

所以，基本上我在练习一些算法。我试图弄清楚为什么当我尝试设置 number[i] 的值时下面的代码会给我一个错误？我知道这可能很简单，但我不知道“为什么”它不起作用。

```
public int SumOfRandomNumbersWithStrings(string randomness)
{
    //Get the value of each index in the array
    string number = "";
    for (int i = 0; i < randomness.Length; i++)
    {
        number[i] = randomness[i];
    }
    //temporarily one until I finish the algorithm
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T16:57:19.377

> 为什么当我尝试设置 number[i] 的值时以下代码给我一个错误

因为 C# 中的字符串是不可变的。

但是，字符数组是可变的，因此您可以这样做：

```
char number[] = new char[randomness.Length];
for (int i = 0; i < randomness.Length; i++)
{
     number[i] = randomness[i];
}
string numStr = new string(number);
//temporarily one until I finish the algorithm
return 1; 
```

在 C# 中构建字符串的最常见方法是使用[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder%28v=vs.100%29.aspx)类。它允许您通过在字符串中追加、删除或替换字符来更改字符串的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:55:46.550

因为`number`是空字符串。改用连接运算符：

```
number = number + randomness[i]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:59:16.663

好的，如果您尝试执行字符串连接，让我们将其更改为：

```
public int SumOfRandomNumbersWithStrings(string randomness) 
{ 
    StringBuilder sb = new StringBuilder();

    //Get the value of each index in the array 
    for (int i = 0; i < randomness.Length; i++) 
    { 
        sb.Append(randomness[i]);
    } 

    //temporarily one until I finish the algorithm 
    return 1; 
} 
```

但是，如果您尝试构建一个数组，`number`那么让我们将其更改为：

```
public int SumOfRandomNumbersWithStrings(string randomness) 
{ 
    //Get the value of each index in the array 
    char[] number = new char[randomness.Length]; 
    for (int i = 0; i < randomness.Length; i++) 
    { 
        number[i] = randomness[i]; 
    } 

    //temporarily one until I finish the algorithm 
    return 1; 
} 
```

# javascript - 将 jquery 自动完成添加到页面加载后添加的字段

> ID：12694764
> 
> 赞同：0
> 
> 时间：2012-10-02T16:55:01.853
> 
> 标签：javascript, jquery

我正在使用 jQuery UI 自动完成来调用数据库的链接来填充表单下拉列表。这工作正常，但我还有一个功能可以向表单添加更多表单字段（具有相同的名称/类），我想将自动完成功能应用于这些。

这可能吗，我怎样才能重新调用新表单字段的自动完成功能。

我的javascript代码如下...

```
var count = 0;

$(function(){

$('input.books').each(function() {
var autoCompelteElement = this;
var formElementName = $(this).attr('name');
var hiddenElementID  = formElementName + '_autocomplete_hidden';
/* change name of orig input */
$(this).attr('name', formElementName + '_autocomplete_label');
/* create new hidden input with name of orig input */
$(this).after("<input type=\"hidden\" name=\"" + formElementName + "\" id=\"" + hiddenElementID + "\" />");
$(this).autocomplete({source:'search.php', minLength: 3,
    select: function(event, ui) {
        var selectedObj = ui.item;
        $(autoCompelteElement).val(selectedObj.label);
        $('#'+hiddenElementID).val(selectedObj.value);
        return false;
    }
});
});

$('p#add_field').click(function(){
        count += 1;
            $('#books').append(
            '<tr>'
            + '<td><input type="text" name="BookName_' + count + '" id="BookName" class="books" /> </td>'
            + '<td><input type="text" name="Length_' + count + '" id="Length_' + count + '" /> </td> '
            + '<td><input type="text" name="ISBN_' + count + '" id="ISBN_' + count + '" /> </td> '
            + '<td><input type="text" name="Year_' + count + '" id="Year_' + count + '" /> </td>'
            + '</tr>'
            + '<strong>Link #' + count + '</strong><br />' );
        });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:01:33.863

在这些新字段上调用自动完成方法？

```
var newRow = '<tr>'
        + '<td><input type="text" name="BookName_' + count + '" id="BookName" class="books" /> </td>'
        + '<td><input type="text" name="Length_' + count + '" id="Length_' + count + '" /> </td> '
        + '<td><input type="text" name="ISBN_' + count + '" id="ISBN_' + count + '" /> </td> '
        + '<td><input type="text" name="Year_' + count + '" id="Year_' + count + '" /> </td>'
        + '</tr>';
        //+ '<strong>Link #' + count + '</strong><br />';  <--this line can not be added to a table like this! 
$('#books tbody').append(newRow);
newRow.autocomplete( ..options..); 
```

您不能像那样将那个强元素行附加到表格中。浏览器正在修复它，但这是非常糟糕的做法。如果这是您想要的，请将其附加在元素之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:03:18.220

您可以使用 jQuery 来构建它并同时附加自动完成功能，而不是使用字符串构建 HTML：

```
$('p#add_field').click(function(){
    count += 1;
    var tr = $(document.createElement('tr'));
    $.forEach(['BookName_', 'Length_', 'ISBN_', 'Year_'], function(key){
        var td = $(document.createElement('td'));
        var input = $(document.createElement('input')).attr('type', 'text')
                                                      .attr('name', key+count)
                                                      .attr('id', key+count)
                                                      .autocomplete(// AUTOCOMPLETE HERE);
        var strong = $(document.createElement('strong')).html('Link #'+count);
        td.append(input, strong, $(document.createElement('br'));
        tr.append(td);
    });
    $('#books').append(tr);
}); 
```

这样您就可以使用包含在 jQuery 函数中的 document.createElement，这样您就可以链接其余的 jQuery 方法来构建这些元素，同时附加自动完成功能，然后只需使用 append 来构建元素并根据需要附加它们。

# c# - 如何使用 MVC3 制作带有内联评论发布的新闻页面？

> ID：12694772
> 
> 赞同：1
> 
> 时间：2012-10-02T16:55:40.113
> 
> 标签：c#, asp.net-mvc-3, entity-framework

过去几周我一直在学习 MVC3，我正在尝试编写我认为应该是一个足够简单的功能，但我在让它正常工作时遇到了真正的问题。

**场景**

我的网站将包含新闻帖子，在主页上进行了总结，并带有链接以在其自己的页面中查看每篇文章的完整详细信息。

可以对每篇文章进行评论，这些评论显示在每篇文章的详细信息页面的末尾。经过身份验证的用户应该能够从显示文章本身的页面向文章发表他们自己的评论。我想避免用户被带到一个单独的页面（虽然我理解从代码的角度来看这更容易，但我不同意这是一个很好的用户体验！）。

举一个我希望这个样子的例子，Scott Hanselman 的博客 ( [http://www.hanselman.com](http://www.hanselman.com) ) 是一个完美的例子（尽管他的主页显示了整篇文章而不仅仅是一个摘要！） - 它链接到到评论页面，“添加评论”表格整齐地位于底部，与文章内联。

**到目前为止我在哪里**

我已经成功地为我的新闻部分编写了控制器，使用 Index 方法（检索 X 个最近的帖子）和一个“Comments”方法来显示完整的文章和评论。我还使用自己的 Controller 方法创建了一个名为“CommentForm”的局部视图。来自以下控制器的代码片段：

```
//
// GET: /News/ 
public ActionResult Index()
{
    using (var nm = new NewsManager())
    {
        var news = nm.GetLatestActiveNewsArticles(50, "System");
        return View(news);
    }
}
//
// GET: /News/Comments/20
public ActionResult Comments(int id)
{
    using (var nm = new Rapallo.Core.Managers.NewsManager())
    {
        var article = nm.GetArticle(id);
        return View(article);
    }
}
// GET: /News/CommentForm/20
[HttpGet()]
public ActionResult CommentForm(int newsId)
{
    return View(new Rapallo.DataAccess.Comment() { NewsId = newsId });
}
// 
// POST: /News/Comments/20
[Authorize()]
[HttpPost()]
public ActionResult Comments(Comment comment)
{
    using (var nm = new NewsManager())
    {
        var article = nm.GetArticle(comment.NewsId.Value);
        if (null == article) HttpNotFound();
    }
    using (var cm = new CommentManager())
    {
        if (cm.AddCommentToNews(comment.NewsId.Value, CurrentUser.RapalloUser.Id, comment.Body))
        return RedirectToAction("Comments", "News", new { id = comment.NewsId.Value });
    }
    return HttpNotFound();
} 
```

从评论视图中，代码片段显示我想要添加评论表单的位置：

```
@if (User.Identity.IsAuthenticated)
{
    @Html.Partial("Comment", new Rapallo.DataAccess.Comment() { NewsId = Model.Id });
} 
```

此视图指定：

```
@model Rapallo.DataAccess.News 
```

最后，评论表单本身：

```
@model Rapallo.DataAccess.Comment
@using (Html.BeginForm())
{ 
    @Html.TextAreaFor(m => m.Body);
    <input type="submit" value="Send Comment" />
} 
```

**问题**

简而言之，当我提交评论表单（正确呈现）时，评论模型上的 NewsId 未填充，因此控制器无法将新评论与正确的新闻帖子相关联。

如果有人能指出我哪里出错了，我将不胜感激！我尝试修改来自 NerdDinner 的一些代码来完成这项工作，并在火车上花费无数小时尝试局部视图、不同模型的各种组合，甚至在我的控制器中重命名方法以试图让它工作。

我非常热衷于将“添加评论”功能封装到它自己的单独表单中，并且能够使用它来添加评论，而不仅仅是新闻文章。数据库模式和域模型已经支持这一点，我只是无法让 UI 工作。

任何帮助都将受到欢迎并感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:31:07.037

我们不得不解决一个类似的问题，但我们没有使用 HTML 表单，而是选择了基于 JavaScript 的解决方案，该解决方案将消息发布到 API 控制器。

详细信息.aspx

```
<!-- Display the Content (i.e. News Story, Product, etc -->
<%= Html.DisplayFor(n => Model.Content[Model.Content.PageIndex], "ReleaseFull")%>
<!-- Display the comments and form.  Pass in the type of content and the Id -->
<% Html.RenderAction("Commenting", "Home", new { area = "Reviews",
    contentTypeName = "product",
    contentTypeId = ContentType.Product,
    contentId = Model.Content[Model.Content.PageIndex].Id }); %> 
```

评论控制器

```
[ChildActionOnly]
public ActionResult Commenting(string contentTypeName, int contentTypeId, int contentId)
{
    //psuedo-code to get comments
    var comments = CommentingAPI.GetCommentsForContentType(contentTypeId, contentId);

    var viewModel = new CommentsListing
    {
        Comments = comments,
        ContentId = contentId,
        ContentTypeId = contentTypeId,
        ContentTypeName = contentTypeName
    };
    return View(viewModel);
} 
```

评论.aspx

```
<%@ Page Title="" Language="C#" Inherits="System.Web.Mvc.ViewPage<Website.ViewModels.CommentsListing>" %>

<div id="commenting" class="commenting">
        <h3 class="h2">Comment and then share on Facebook &amp; Twitter</h3>
        <div class="arrow"></div>
        <textarea placeholder="Type your comment here..." class="w100 p10 tMrg10" cols="40" rows="4" id="commentText></textarea>
        <div class="textarea-support">
            <span class="post-action">
                <span id="commentButton"><a class="btn l-btn-lg">Post Comment</a></span>
            </span>
        </div>

    <!-- Insert new comments here so they show up at the top of the listing --> 
    <div id="newComments"></div>

    <% foreach (var comment in Model.Comments) { %>
        <!-- Display the comments here -->
        <% var memberComment = comment; %><%= Html.DisplayFor(c => memberComment)%>
    <% } %>
</div>

<script type="text/javascript">
    //using a custom jQuery plugin we hook up the commenting section
    //when the user clicks "Post Comment" the message is posted to
    //another Controller using $.ajax({ type:POST }); 
    //The controller stores the comment in the database and returns an instance of the comment
    $(function () {
        $('#commenting').commenting( {
            contentTypeTypeId: <%: Model.ContentTypeId %>,
            contentId: <%: Model.ContentId %>,
            isAuthenticated: <%= Html.IsMember() %>
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:12:29.313

简单的答案是，您需要`NewsId`在表单上显示 ，以便模型绑定器找到它。因此，将您的评论表单更改为：

```
@model Rapallo.DataAccess.Comment
@using (Html.BeginForm())
{ 
    @Html.HiddenForm(m => m.NewsId);
    @Html.TextAreaFor(m => m.Body);
    <input type="submit" value="Send Comment" />
} 
```

# c# - 需要帮助将 Kendo TreeView 绑定到本地数据源

> ID：12694773
> 
> 赞同：1
> 
> 时间：2012-10-02T16:55:42.727
> 
> 标签：c#, javascript, asp.net, html, kendo-ui

我正在尝试使用 Kendo TreeView，但我绝对没有运气绑定到本地数据源。我有一个简单的 asp.net Web 表单页面，我从在线演示中复制并粘贴了代码，但我所做的一切都无法使其正常工作。有任何想法吗？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Kendo TreeView Demo</title>
    <link href="styles/kendo/kendo.common.min.css" rel="stylesheet" />
    <link href="styles/kendo/kendo.default.min.css" rel="stylesheet" />
    <style type="text/css">
        * { font-family: "Segoe UI", Arial, Helvetica, Sans-Serif; font-size: 12px; }
    </style>
    <script type="text/javascript" src="scripts/jquery.min.js"></script>
    <script type="text/javascript" src="scripts/kendo/kendo.all.min.js"></script>
    <script type="text/javascript" src="scripts/kendo/kendo.data.min.js"></script>  
    <script type="text/javascript">
        $(document).ready(function ()
        {
            var inlineDefault = new kendo.data.HierarchicalDataSource(
            {
                data:
                [
                    {
                        text: "Furniture",
                        items:
                        [
                            { text: "Tables & Chairs" },
                            { text: "Sofas" },
                            { text: "Occasional Furniture" }
                        ]
                    },
                    {
                        text: "Decor", 
                        items:
                        [
                            { text: "Bed Linen" },
                            { text: "Curtains & Blinds" },
                            { text: "Carpets" }
                        ]
                    }
                ]
            });

            $("#treeview-left").kendoTreeView(
            {
                dataSource: inlineDefault
            });
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <div id="treeview-left"></div>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:15:32.640

您在 kendo.all.min.js 之后包含了 kendo.data.min.js，应该将其删除，因为后者包含前者的内容。

这是一个工作示例：http: [//jsbin.com/icojuv/1/edit](http://jsbin.com/icojuv/1/edit)

# python - 在python中组合多个计数项目？

> ID：12694779
> 
> 赞同：0
> 
> 时间：2012-10-02T16:56:04.757
> 
> 标签：python

```
return function.count('1') + given.count('2') + given.count('3') 
```

有什么办法可以简化这条线？我也试过 return function.count('1', '2', '3') 但运行错误目标是计算字符串中包含的所有数字 lol

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:58:31.530

假设`function`与 相同`given`，

```
sum(function.count(x) for x in '1 2 3'.split()) 
```

变量名`function`(and `given`) 有点令人困惑，因为问题还说

> *目标是计算字符串中包含的所有数字*。

因此，如果`function`是一个字符串，并且您希望将计数扩展到您可以使用的所有数字

```
import string
sum(function.count(x) for x in string.digits) 
```

如果`function`是一个短字符串就足够了。但请注意，每次调用都`count`需要完整地通过字符串`function`。如果`function`是一个非常大的字符串，执行 10 次可能效率低下。

在这种情况下，最好*一次性丢弃不是数字的*字符：

```
def onepass(x):
    return sum(1 for c in x if c in string.digits) 
```

或者，您可以从字符串中删除所有非数字（使用[translate 方法](http://docs.python.org/library/string.html#string.translate)），然后使用`len`. 例如：

```
def drop_nondigits(x):
    # The essential idea comes from the translator recipe in Python Cookbook;
    # It can also be found here
    # http://code.activestate.com/recipes/303342-simple-wrapper-for-stringtranslate/
    keep = string.digits
    allchars = string.maketrans('', '')
    delete = allchars.translate(allchars, keep)
    return len(x.translate(allchars, delete)) 
```

出于好奇，让我们将其与使用[collections.Counter](http://docs.python.org/library/collections.html#collections.Counter)进行比较：

```
import collections
def using_counter(x):
    counter = collections.Counter(x)
    return sum(counter[d] for d in string.digits) 
```

事实证明这**`drop_nondigits`是最快的**：

```
In [26]: x = 'some very large string 123456' * 1000

In [38]: %timeit using_counter(x)
100 loops, best of 3: 7.26 ms per loop

In [29]: %timeit onepass(x)
100 loops, best of 3: 2.52 ms per loop

In [32]: %timeit drop_nondigits(x)
10000 loops, best of 3: 34.9 us per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:02:16.517

用于`Counter()`计算字符串中包含的所有数字：

```
>>> from collections import Counter
>>> count= Counter("abcd12341134..09--01abc")
>>> [x for x in count.items() if x[0] in "0123456789"]
[('1', 4), ('0', 2), ('3', 2), ('2', 1), ('4', 2), ('9', 1)] 
```

或`Counter()`使用`filter()`：

```
>>> strs="abcd12341134..09--01abc"
>>> Counter(filter(lambda x:x in "0123456789",strs))
Counter({'1': 4, '0': 2, '3': 2, '4': 2, '2': 1, '9': 1}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-07T17:04:19.807

这会足够快吗？

```
count = Counter(strings) 
sum(v for k, v in count.items() if k in "0123456789") 
```

# height - 增加gnuplot输出的宽度和高度

> ID：12694782
> 
> 赞同：5
> 
> 时间：2012-10-02T16:56:16.507
> 
> 标签：height, width, gnuplot

我必须将 180000 个点绘制到一个 EPS 文件中。使用标准 gnuplot 输出尺寸点彼此太接近，这使得它们无法区分。有没有办法增加图像的宽度和高度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T17:15:45.907

是的。

```
set terminal epscairo enhanced color size 100in,100in font "Arial,100" 
```

这将制作（例如）一个 .eps 100 英寸 x 100 英寸的大字体。你可以输入

```
help terminal pdfcairo 
```

在 gnuplot 命令行获取更多信息。

# sql-server - 获取存储过程中两个日期时间之间的时间差

> ID：12694785
> 
> 赞同：3
> 
> 时间：2012-10-02T16:56:25.433
> 
> 标签：sql-server, stored-procedures

我想在 stroed 过程中获取两个日期时间之间的时差。然后我需要将该答案转换为 varchar。我不知道如何获得该值。我是 stroed 程序的新人。我正在使用 sql server 2008

```
declare @tdate1 datetime
declare @date2 datetime
declare @finaltime varchar

set @enddate = '2004-10-18 07:53:35.000'
set @startdate = '2004-10-18 15:28:57.000'

if @startdate >= @enddate
// This is what i want to do..

else 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-02T17:05:11.117

```
SELECT DATEDIFF(year, @startdate, @enddate) 
```

试试这个，让你朝着正确的方向前进。

`year`表示您要返回的测量周期

[这](https://msdn.microsoft.com/en-us/library/ms189794.aspx)是指向可能有帮助的 MSDN 文章的链接

`DATEDIFF`（事务处理 SQL）

其他版本

*更新日期：2015 年 12 月 2 日*

**本主题适用于：**

是SQL Server（从 2008 年开始） 是Azure SQL 数据库 是Azure SQL 数据仓库 是并行数据仓库 返回指定开始日期和结束日期之间跨越的指定日期部分边界的计数（有符号整数）。有关更大的差异，请参阅 DATEDIFF_BIG (Transact-SQL)。有关所有 Transact-SQL 日期和时间数据类型和函数的概述，请参阅日期和时间数据类型和函数 (Transact-SQL)。主题链接图标 Transact-SQL 语法约定 语法

```
DATEDIFF ( datepart , startdate , enddate ) 
```

-- Azure SQL 数据仓库和并行数据仓库

```
DATEDIFF (datepart ,startdate ,enddate ) 
```

**论据**

*日期部分*

是 startdate 和 enddate 的一部分，用于指定跨越边界的类型。下表列出了所有有效的 datepart 参数。用户定义的等效变量无效。

**日期部分**

*缩写*

```
year
yy, yyyy
quarter
qq, q
month
mm, m
dayofyear
dy, y
day
dd, d
week
wk, ww
hour
hh
minute
mi, n
second
ss, s
millisecond
ms
microsecond
mcs
nanosecond
ns
startdate 
```

是一个可以解析为`time, date, smalldatetime, datetime, datetime2`、 或 datetimeoffset 值的表达式。date 可以是表达式、列表达式、用户定义的变量或字符串文字。从 enddate 中减去 startdate。

为避免歧义，请使用四位数年份。有关两位数年份的信息，请参阅配置两位数年份截止服务器配置选项。结束日期

请参阅**开始日期**。 *返回类型 int* 返回值 每个日期部分及其缩写返回相同的值。如果返回值超出 int 的范围（-2,147,483,648 到 +2,147,483,647），则返回错误。对于毫秒，startdate 和 enddate 之间的最大差异是 24 天 20 小时 31 分钟和 23.647 秒。其次，最大差异是 68 岁。如果 startdate 和 enddate 都只分配了一个时间值，并且 datepart 不是时间 datepart，则返回 0。startdate 或 endate 的时区偏移分量不用于计算返回值。因为 smalldatetime 仅精确到分钟，所以当 smalldatetime 值用于 startdate 或 enddate 时，返回值中的秒和毫秒始终设置为 0。如果仅将时间值分配给日期数据类型的变量，缺失日期部分的值设置为默认值：1900-01-01。如果仅将日期值分配给时间或日期数据类型的变量，则将缺失时间部分的值设置为默认值：00:00:00。如果 startdate 或 enddate 中只有一个时间部分而另一个只有一个日期部分，则缺少的时间和日期部分将设置为默认值。如果 startdate 和 enddate 是不同的日期数据类型，并且其中一个的时间部分或小数秒精度比另一个多，则另一个的缺失部分设置为 0。 datepart 边界 以下语句具有相同的 startdate 和相同的 endate。这些日期是相邻的，时间相差 0.0000001 秒。每个语句中的 startdate 和 endate 之间的差异跨越其日期部分的一个日历或时间边界。每个语句返回 1。

```
SELECT DATEDIFF(year, '2005-12-31 23:59:59.9999999'
, '2006-01-01 00:00:00.0000000');
SELECT DATEDIFF(quarter, '2005-12-31 23:59:59.9999999'
, '2006-01-01 00:00:00.0000000');
SELECT DATEDIFF(month, '2005-12-31 23:59:59.9999999'
, '2006-01-01 00:00:00.0000000');
SELECT DATEDIFF(dayofyear, '2005-12-31 23:59:59.9999999'
, '2006-01-01 00:00:00.0000000');
SELECT DATEDIFF(day, '2005-12-31 23:59:59.9999999'
, '2006-01-01 00:00:00.0000000');
SELECT DATEDIFF(week, '2005-12-31 23:59:59.9999999'
, '2006-01-01 00:00:00.0000000');
SELECT DATEDIFF(hour, '2005-12-31 23:59:59.9999999'
, '2006-01-01 00:00:00.0000000');
SELECT DATEDIFF(minute, '2005-12-31 23:59:59.9999999'
, '2006-01-01 00:00:00.0000000');
SELECT DATEDIFF(second, '2005-12-31 23:59:59.9999999'
, '2006-01-01 00:00:00.0000000');
SELECT DATEDIFF(millisecond, '2005-12-31 23:59:59.9999999'
, '2006-01-01 00:00:00.0000000'); 
```

备注 DATEDIFF 可用于选择列表、WHERE、HAVING、GROUP BY 和 ORDER BY 子句。DATEDIFF 将字符串文字隐式转换为 datetime2 类型。这意味着当日期作为字符串传递时，DATEDIFF 不支持格式 YDM。您必须将字符串显式转换为 datetime 或 smalldatetime 类型才能使用 YDM 格式。指定 SET DATEFIRST 对 DATEDIFF 没有影响。DATEDIFF 始终使用星期日作为一周的第一天，以确保函数具有确定性。示例 下面的示例使用不同类型的表达式作为 startdate 和 enddate 参数的参数。A. 为 startdate 和 enddate 指定列 下面的示例计算表中两列中日期之间跨越的天数。

```
CREATE TABLE dbo.Duration
    (
    startDate datetime2
    ,endDate datetime2
    );
INSERT INTO dbo.Duration(startDate,endDate)
    VALUES('2007-05-06 12:10:09','2007-05-07 12:10:09');
SELECT DATEDIFF(day,startDate,endDate) AS 'Duration'
FROM dbo.Duration; 
```

-- 返回： 1 B. 为 startdate 和 enddate 指定用户定义的变量 下面的示例使用用户定义的变量作为 startdate 和 enddate 的参数。

```
DECLARE @startdate datetime2 = '2007-05-05 12:10:09.3312722';
DECLARE @enddate datetime2 = '2007-05-04 12:10:09.3312722'; 
SELECT DATEDIFF(day, @startdate, @enddate); 
```

C. 为 startdate 和 enddate 指定标量系统函数 下面的示例使用标量系统函数作为 startdate 和 enddate 的参数。

```
SELECT DATEDIFF(millisecond, GETDATE(), SYSDATETIME()); 
```

D. 为 startdate 和 enddate 指定标量子查询和标量函数 下面的示例使用标量子查询和标量函数作为 startdate 和 enddate 的参数。使用 AdventureWorks2012；去

```
SELECT DATEDIFF(day,(SELECT MIN(OrderDate) FROM Sales.SalesOrderHeader),
    (SELECT MAX(OrderDate) FROM Sales.SalesOrderHeader)); 
```

E. 为 startdate 和 enddate 指定常量 下面的示例使用字符常量作为 startdate 和 enddate 的参数。

```
SELECT DATEDIFF(day, '2007-05-07 09:53:01.0376635'
    , '2007-05-08 09:53:01.0376635'); 
```

F. 为 enddate 指定数值表达式和标量系统函数 以下示例使用数值表达式 (GETDATE ()+ 1) 和标量系统函数 GETDATE 和 SYSDATETIME 作为 enddate 的参数。

```
USE AdventureWorks2012;
GO
SELECT DATEDIFF(day, '2007-05-07 09:53:01.0376635', GETDATE()+ 1) 
    AS NumberOfDays
FROM Sales.SalesOrderHeader;
GO
USE AdventureWorks2012;
GO
SELECT DATEDIFF(day, '2007-05-07 09:53:01.0376635', DATEADD(day,1,SYSDATETIME())) AS NumberOfDays
FROM Sales.SalesOrderHeader;
GO
G. Specifying ranking functions for startdate
The following example uses a ranking function as an argument for startdate.
USE AdventureWorks2012;
GO
SELECT p.FirstName, p.LastName
    ,DATEDIFF(day,ROW_NUMBER() OVER (ORDER BY 
        a.PostalCode),SYSDATETIME()) AS 'Row Number'
FROM Sales.SalesPerson s 
    INNER JOIN Person.Person p 
        ON s.BusinessEntityID = p.BusinessEntityID
    INNER JOIN Person.Address a 
        ON a.AddressID = p.BusinessEntityID
WHERE TerritoryID IS NOT NULL 
    AND SalesYTD <> 0; 
```

H. 为 startdate 指定聚合窗口函数 下面的示例使用聚合窗口函数作为 startdate 的参数。

```
USE AdventureWorks2012;
GO
SELECT soh.SalesOrderID, sod.ProductID, sod.OrderQty,soh.OrderDate
    ,DATEDIFF(day,MIN(soh.OrderDate) 
        OVER(PARTITION BY soh.SalesOrderID),SYSDATETIME() ) AS 'Total'
FROM Sales.SalesOrderDetail sod
    INNER JOIN Sales.SalesOrderHeader soh
        ON sod.SalesOrderID = soh.SalesOrderID
WHERE soh.SalesOrderID IN(43659,58918);
GO 
```

示例：Azure SQL 数据仓库公共预览版和并行数据仓库 以下示例使用不同类型的表达式作为 startdate 和 enddate 参数的参数。I. 为 startdate 和 enddate 指定列 下面的示例计算表中两列中日期之间跨越的天数。

```
CREATE TABLE dbo.Duration (
    startDate datetime2
    ,endDate datetime2
    );
INSERT INTO dbo.Duration(startDate,endDate)
    VALUES('2007-05-06 12:10:09','2007-05-07 12:10:09');
SELECT TOP(1) DATEDIFF(day,startDate,endDate) AS Duration
FROM dbo.Duration; 
```

-- 返回： 1 J. 为 startdate 和 enddate 指定标量子查询和标量函数 下面的示例使用标量子查询和标量函数作为 startdate 和 enddate 的参数。-- 使用 AdventureWorks

```
SELECT TOP(1) DATEDIFF(day,(SELECT MIN(HireDate) FROM dbo.DimEmployee),
    (SELECT MAX(HireDate) FROM dbo.DimEmployee)) 
FROM dbo.DimEmployee; 
```

K. 为 startdate 和 enddate 指定常量 下面的示例使用字符常量作为 startdate 和 enddate 的参数。

```
-- Uses AdventureWorks

SELECT TOP(1) DATEDIFF(day, '2007-05-07 09:53:01.0376635'
    , '2007-05-08 09:53:01.0376635') FROM DimCustomer; 
```

L. 为 startdate 指定排名函数 下面的示例使用排名函数作为 startdate 的参数。-- 使用 AdventureWorks

```
SELECT FirstName, LastName
,DATEDIFF(day,ROW_NUMBER() OVER (ORDER BY 
        DepartmentName),SYSDATETIME()) AS RowNumber
FROM dbo.DimEmployee; 
```

M. 为 startdate 指定聚合窗口函数 下面的示例使用聚合窗口函数作为 startdate 的参数。-- 使用 AdventureWorks

```
SELECT FirstName, LastName, DepartmentName
    ,DATEDIFF(year,MAX(HireDate)
             OVER (PARTITION BY DepartmentName),SYSDATETIME()) AS SomeValue
FROM dbo.DimEmployee 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T17:04:23.947

结帐[日期](http://msdn.microsoft.com/en-us/library/ms189794.aspx)。这是[如何使用它的演示](http://sqlfiddle.com/#!6/d8e52/3/0)：

```
SELECT DATEDIFF(day, [Start], [End]) AS [Days],
   DATEDIFF(minute, [Start], [End]) AS [Minutes],
   DATEDIFF(second, [Start], [End]) AS [Seconds] FROM Dates; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:19:15.957

假设您想以天计算两个日期之间的差异，这是我的建议：

```
DECLARE @start DATETIME = '01-01-2000', 
      @end DATETIME = GETDATE() 

SELECT CAST(ABS(DATEDIFF(day, @end, @start)) AS VARCHAR(100)) 
```

我假设你总是想要一个肯定的答案，所以 ABS 允许你忽略日期的顺序。您在帖子中提到您想要最终答案为 Varchar，所以我加入了一个演员表。

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-08T05:13:10.087

使用 DATEDIFF() 你可以得到秒差、分钟差、小时差……等等。但是如果你想以清晰的方式得到日期/时间差，你可以做这样的事情。.

```
declare @StartDate datetime, @EndDate datetime

select @StartDate = '04/07/2015 05:01:23.000',@EndDate='04/08/2015 10:32:30.000'

select convert(varchar(5),DateDiff(s, @startDate, @EndDate)/3600)+':'+convert(varchar(5),DateDiff(s, @startDate, @EndDate)%3600/60)+':'+convert(varchar(5),(DateDiff(s, @startDate, @EndDate)%60)) as [HH:MM:SS] 
```

**输出格式为 [HH:MM:SS] : 05:31:07**

我认为这是在 SQL 中获取两个日期时间之间时差的最佳方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-03T16:34:08.700

这是我以前使用过的，非常短的代码：

选择 CAST((@EndDateTime-@StartDateTime) as time(0)) '[hh:mm:ss]'

# javascript - 在 Windows 8 Metro-Style App Development 中，如何使用来自外部 JS 文件/库的对象？

> ID：12694787
> 
> 赞同：0
> 
> 时间：2012-10-02T16:56:38.780
> 
> 标签：javascript, windows-8, microsoft-metro

我在 .js 文件中有一个 JavaScript 日历，我在 html 页面中使用了它，我正在尝试在 Metro 应用程序上使用它。如何在 data.js 默认文件中导入并从中调用？（data.js 文件以“（”）开头然后我如何创建一个日历元素以在磁贴项目的“元素”字段上使用？如果我设法导入 data.js 文件，并创建一个使用 Microsoft 建议的 createElement 函数的元素，它是否可以正常工作，因为它需要外部 JavaScript 文件？如果没有，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:04:34.677

将文件添加到 Visual Studio 中的项目中，在应用程序的 default.html 中包含 JS 文件脚本标记。然后，您可以像使用任何其他 JS 库一样使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:12:11.917

另外，要记住两件大事。如果可能，请尝试在您的项目中包含 .js 源文件（就像您正在做的那样）。呼叫 CDN 或外部托管位置会标记您进行一些您通常不必通过的安全检查。

也不能保证 JavaScript 库会随着时间的推移继续工作。出于这个原因，我保留了旧版本的 SoundJS 和 jQuery。我已经看到应用程序在新版本执行诸如标记一些安全违规的 DOM 操作之类的操作时会抛出一些错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T01:43:14.787

除了在 HTML 页面中引用脚本之外，如下所示：

```
<script src="/js/calendar.js"></script> 
```

您可以将文件从解决方案资源管理器中拖放到您要使用的 .js 文件顶部，它会为您提供如下所示的参考：

```
/// <reference path="calendar.js" />
(function () {
    "use strict"; 
```

获得该引用后，Visual Studio 将在您引用其函数时为 .js 文件提供很好的 Intellisense。

# visual-studio - Visual Studio 的 Debug 能否将您指向正在调试的代码？

> ID：12694789
> 
> 赞同：1
> 
> 时间：2012-10-02T16:56:47.193
> 
> 标签：visual-studio, debugging

所以，奇怪的问题。我正在使用 Debug.WriteLine() 来写出我的输出，但对于我的任何错误，我都希望看到代码和行值的引用或链接。VS能做到吗？

我知道 Firebug/WebDev 控制台是如何做到的。

谢谢，

![调试](../Images/1e82cc64dd2cd50caa9cbef68514d93e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:20:51.600

您可以使用 StackTrace 类来获取此信息。像这样：

```
 public class Utils {
        public static string MyCaller {
            get {
#if DEBUG
                var trace = new StackTrace(true);
                var frame = trace.GetFrame(1);
                return frame.GetFileName() + "#" + frame.GetFileLineNumber().ToString();
#else
            return "N/A";
#endif
            }
        }
    } 
```

示例用法：

```
class Program {
    static void Main(string[] args) {
        Debug.Print("Hello world from {0}", Utils.MyCaller);
    }
} 
```

输出：

> 来自 C:\Users\hpassant\AppData\Local\Temporary Projects\ConsoleApplication1\Program.cs#10 的你好世界

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:09:50.027

Visual Studio 2012 可以使用调用者信息来执行此操作。

请参阅[http://msdn.microsoft.com/en-us/library/hh534540.aspx](http://msdn.microsoft.com/en-us/library/hh534540.aspx)

（虽然不是链接，但至少你得到了信息。）

# java - 在 JFrame 中拖动 JPanel

> ID：12694790
> 
> 赞同：3
> 
> 时间：2012-10-02T16:56:53.310
> 
> 标签：java, swing, jframe, jpanel, drag

我正在点击`JPanel`添加。它添加到框架。该按钮将继续添加到点击事件。没有限制。单击按钮时，我也将其添加到 a中。我这样做是因为添加了使用 for 循环来处理 JPanel 的拖动。`JFrame``JButton``JPanel``JPanel``JFrame``JPanels``List``MouseMotionListener`

我现在面临的问题是阻力。当我通过单击添加第`JPanel`一个并且如果我拖动它时，它会正确地跟随鼠标光标坐标。当我添加第二个`JPanel`时，它也完美地跟随鼠标。添加第二个之后，如果尝试拖动第一个 JPanel，第一个 JPanel 似乎跟随不同的坐标，初始位置将更改为其他位置。我不知道我在哪里做错了。请帮我解决这个问题。请通过下面的代码。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class MyFrame extends JFrame {

    JButton jb;
    List<JPanel> mypanels = new ArrayList<JPanel>();
    public MyFrame() {
        jb = new JButton("Add Panel");
        jb.setBounds(10, 10, 100, 50);
        setSize(new Dimension(1000, 600));
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(null);
        add(jb);
        setVisible(true);
        initialize();
    }

    public void initialize() {

        jb.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                // TODO Auto-generated method stub
                JPanel panel = new JPanel();
                panel.setBounds(150,150,200,200);
                panel.setBackground(Color.black);
                mypanels.add(panel);
                add(panel);
                repaint();
                handleDrag();
            }
        });

    }

    public void handleDrag(){
        for(int i=0;i<mypanels.size();i++) {
            final int j = i;
            mypanels.get(i).addMouseMotionListener(new MouseMotionAdapter() {

                @Override
                public void mouseDragged(MouseEvent me) {
                    me.translatePoint(me.getComponent().getLocation().x, me.getComponent().getLocation().y);
                    mypanels.get(j).setLocation(me.getX(), me.getY());
                }

            });
        }
    }

    public static void main(String args[]) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                new MyFrame();
            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T17:50:56.387

当仅将一个 JPanel 添加到 List 时，看起来您的 handleDrag 方法正在向每个 JPanel 添加一个新的匿名侦听器。监听器只需要添加一次，如果添加了多个监听器，行为会变得很奇怪。

这是一个更新的 handleDrag 方法

```
 public void handleDrag(JPanel panel){
    final JPanel p = panel;
        panel.addMouseMotionListener(new MouseMotionAdapter() {

            @Override
            public void mouseDragged(MouseEvent me) {
                me.translatePoint(me.getComponent().getLocation().x, me.getComponent().getLocation().y);
                p.setLocation(me.getX(), me.getY());
            }

        });
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-16T15:52:36.957

Joe 是对的，这就是我在项目中对 handleDrag 方法所做的：

```
public void handleDrag(final JPanel panel){
    panel.addMouseListener(new MouseAdapter() {
        @Override
        public void mousePressed(MouseEvent me) {
             x = me.getX();
             y = me.getY();
        }
    });
    panel.addMouseMotionListener(new MouseMotionAdapter() {
        @Override
        public void mouseDragged(MouseEvent me) {
            me.translatePoint(me.getComponent().getLocation().x-x, me.getComponent().getLocation().y-y);
            panel.setLocation(me.getX(), me.getY());
        }
    });
} 
```

这样，面板在单击时不会进行初始“跳跃”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T18:38:21.030

*   也许看看[@camickr 的 Moving Windows](http://tips4java.wordpress.com/2009/06/14/moving-windows/)

*   不要同时`ComponentMover`结合`ComponentResizer`

# c# - 加载常量的 MSIL 指令

> ID：12694793
> 
> 赞同：1
> 
> 时间：2012-10-02T16:57:03.990
> 
> 标签：c#, .net, .net-assembly, cil, il

我刚读[了一篇文章](http://www.codeproject.com/Articles/32308/Using-Reflection-Emit-to-Precompile-Expressions-to)，看到了只有一个加载常量的 MSIL 指令。那就是 `ldc.r8` 负载`double`恒定。

现在我对此很好奇。我做了谷歌搜索，但几乎没有找到任何东西。你能告诉我，.NET 中有什么样的恒定加载指令？我在哪里读到它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:01:15.160

指令集的一个来源在这里：[http](http://en.wikipedia.org/wiki/List_of_CIL_instructions) ://en.wikipedia.org/wiki/List_of_CIL_instructions ；你会在`ldc`那里看到 16 条指令。

如果您想要更全面的信息来源，请尝试规范： http: [//www.ecma-international.org/publications/standards/Ecma-335.htm](http://www.ecma-international.org/publications/standards/Ecma-335.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:02:09.390

将类型的值作为类型 F（浮点数）加载`float64`到评估堆栈上。

链接：http: [//msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldc_r8.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldc_r8.aspx)

# excel - 创建一个 Excel 命名范围，直到满足条件

> ID：12694799
> 
> 赞同：0
> 
> 时间：2012-10-02T16:57:14.877
> 
> 标签：excel, named-ranges

我想在 Excel 中创建几个命名范围，收集每列中的值，直到不同行中的单元格为空白。例如，我有一个名为 Weeks 的命名范围，范围是从 DB3 到 FA3。我会动态获取所有值，直到在第 4 行找到空白。因此，如果在 EO4 找到空白，我的 Weeks 范围会将值从 DB3 提取到 EO3。那有意义吗？顺便说一句，我正在使用 Excel 2010。谢谢迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:02:55.820

将名称定义为`=OFFSET($DB$3,0,0,1,COUNTA($DB$3:$FA$3))`

这是使用来自[ozgrid的信息](http://www.ozgrid.com/Excel/DynamicRanges.htm)

# ios5 - 在没有 SHSH Blob 的情况下将 iOS6 降级到 5

> ID：12694802
> 
> 赞同：-2
> 
> 时间：2012-10-02T16:57:27.133
> 
> 标签：ios5, ios6, jailbreak, downgrade

我以前没有越狱或降级iOS。我的 iPhone 和 iPad 在 iOS6 上的 Unicode 语言（Burmese Zawgyi Unicode 字体）存在很大问题。iOS 5 很好，所以我想降级。我信任 Apple，所以我在它可用时立即升级。这是我的巨大错误。现在我的 iPhone 和 iPad 都是垃圾，除非它被修好。你有办法从 6 降级到 5.1.1 或 5 吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:59:57.050

有关最终信息，请查看 iPhone 开发团队的[博客](http://blog.iphone-dev.org/)

# express - Jade 语法错误未捕获

> ID：12694805
> 
> 赞同：2
> 
> 时间：2012-10-02T16:57:45.270
> 
> 标签：express, pug

最近我在一个网站上使用`expressJS`和添加谷歌地图`jade`。
我有一个“拼写”错误，`jade`不允许谷歌地图正确加载（无显示）。

任何地方都没有抛出任何错误，并且花了很多时间才弄清楚原因是缺少字母“s”，导致地图无法呈现。

有没有办法捕捉所说的错误`jade`？
我必须修改`express`吗？

以下是`jade`我正在使用的文件。

**布局.jade**

```
!!! 5
html(lang='en')
  include includes/head
  body
    .wrapper
      include includes/header
      block content
      include includes/footer 
```

**包括/head.jade**

```
head
  meta(charset='UTF-8')
  title= title
  block stylesheets
    link(href='/site.css', rel='stylesheet', )
  block scripts 
```

**Gmap.jade**

```
extends ../layout

append stylesheets
  style
    #Gmap{
      height: 400px;
      width: 760px;
    }
    etc...

append scripts
  script(src='http://maps.google.com/maps/api/js?sensor=false')
  etc ... 
```

里面`includes/head.jade`有一个`block stylesheets`。
在`Gmap.jade`中`append stylesheets`被称为。
`stylesheets`拼写错误，`stylesheet`我花了很长时间才找到这个。
没有抛出任何错误，网页在没有谷歌地图的情况下呈现“正常”。

是否可以自定义`jade`/`express`以在不匹配时抛出错误？
（除了在写东西时更加小心）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T01:40:29.330

我有点困惑，你是说根本没有抛出错误？所以屏幕是完全空白的？

您是否`express.errorHandler()`在服务器代码中的某个位置使用？您可以设置类似这样的错误消息。

```
app.use( express.errorHandler({ dumpExceptions: true , showStack: true }) )) 
```

这可能会解决您没有错误消息的问题。如果您想了解有关 Express.js 错误处理程序的更多信息，可以查看[此页面](http://www.senchalabs.org/connect/errorHandler.html)。Express 只是 Connect.js 的一个包装器；这是底层代码。

# javascript - 如何使用javascript在字符串中获取'@'之后的下两个单词

> ID：12694808
> 
> 赞同：1
> 
> 时间：2012-10-02T16:58:15.657
> 
> 标签：javascript, regex

我正在实现类似于在 Facebook 上看到的“提前输入”朋友/关注者功能。

当用户在评论框中键入“@”键时，需要根据 json 用户名数组检查下两个单词，从而呈现自动完成列表。

当用户按下'@'时，我已经有一个当前触发的事件，然后将全文字符串发送到一个单独的函数中，我打算在其中执行匹配。我现在只需要解析此文本并检索“@”后面的文本。

因此，实际的问题是如何检索字符串中直接跟在“@”之后的文本。

必须从字符串中**最后一次**出现的“@”中提取匹配项。（以允许在用户键入的同一字符串中进行多个自动完成。）

希望对正则表达式/JS字符串操作有更好理解的人可以提供帮助。

提前致谢。

**编辑：**

只是添加一些示例：

```
@John Smith says hello 
```

应该返回：

```
John smith says hello    OR  simply 'John Smith' - Either is okay for this purpose 
```

但是这个字符串：

```
I was talking to @John Smith and he told me all about @Sarah Smith 
```

应该只返回：

```
 Sarah Smith 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:02:23.213

那样可以么 ？

```
txt.substring(txt.lastIndexOf('@')+1).split(' ').slice(0, 2).join(' ') 
```

[演示](http://jsfiddle.net/dHHq2/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:02:20.540

我不会使用正则表达式，而是使用[lastIndexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf)

从我的控制台：

```
var a = "@tony @stark"
> undefined
var b = a.lastIndexOf('@')
> undefined
a.substr(b, a.length)
> "@stark" 
```

或者，如果您愿意

```
a.substr(b+1, a.length)
> "stark" 
```

**更新*

```
function getRest(a) {
  var b = a.lastIndexOf('@'); 
  return a.substr(b+1, a.length);
}
getRest('@John Smith says hello')
> "John Smith says hello"
getRest('I was talking to @John Smith and he told me all about @Sarah Smith')
> "Sarah Smith" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:02:54.560

正则表达式将是`/@(\w+ \w+)[^@]*$/`（@ 符号，两个单词，后跟非 @ 字符，直到字符串末尾）。我不确定这是否比 substring/split 方法更快。

```
var regex = /@(\w+ \w+)[^@]*$/,
    myString = "@spork and @abe lincoln spam spam spam",
    match = myString.match(regex)[1];
// match == "abe lincoln" 
```

# html - 创建巨大的 html 列表结构的最简单的方法是什么？

> ID：12694810
> 
> 赞同：1
> 
> 时间：2012-10-02T16:58:20.827
> 
> 标签：html, html-lists

我必须以列表的方式在网页的一侧显示很多元素。所以用户可以查看它，动态添加更多，删除它们等等。

但重要的是结构本身。我被告知它可能是成千上万的元素。撇开设计不谈，我想知道哪个是我可以使用的 HTML 解析器最轻的结构。TR 吗？LI? 阻止 DIV？浮动DIV？

我想知道答案，我不是要求分页之类的解决方案。

非常感谢大家;）

* * *

由于似乎没有人知道具体的测试、参考或具有证据价值的东西，我将此问题标记为已回答以感谢积极参与，但如果有人得出进一步的结论，他们将受到欢迎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:01:12.817

这是一个清单，不是吗？这给了你三个之一`ol`：`ul`或`dl`。

*   如果是**有序列表**，即元素的顺序有意义，则使用`<ol>`.
*   如果它是**无序列表**，即元素的顺序没有意义，请使用`<ul>`.
*   如果它是一个定义列表，即它在整个`<article>`,`<section>`或文档中列出定义，请使用`<dl>`.

哪个更语义化。HTML 与效率无关，它与语义有关。从语义上写，然后你根据定义高效地写。

* * *

关于这些元素的显示，更多的是取决于你的 CSS。

不管你选择哪种方式，你不可能一次在页面上显示数千个项目，并希望用户全部接受。某种形式的分页可能是强制性的。

# php - 403 错误 - 发出 curl 请求时出现禁止错误

> ID：12694813
> 
> 赞同：0
> 
> 时间：2012-10-02T16:58:33.490
> 
> 标签：php, apache, curl, http-status-code-403

我有两个虚拟主机，xyz.com 和 abc.com。从 xyz.com 我正在向[http://abc.com/test](http://abc.com/test)进行 curl 后调用（使用 PHP） 这将返回“403 错误 - 禁止”（http://abc.com/test 在浏览器中工作正常）

我知道这个问题听起来很重复。对此感到抱歉，因为我已经完成了之前答案中给出的所有解决方案，但没有任何效果:-(

1.  我在 Apache 中的根文件夹（doc root）有 775 个权限。
2.  在 httpd.conf 我的控件如下

    ```
    Options FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all 
    ```

3.  我还尝试在代码中添加 USERAGENT (of firefox) 来模拟浏览器。

我没有得到 Apache 的确切问题。我正在使用 Apache 2.4

有人可以帮忙解决这个问题吗？

**更新** 以下是我用于发送请求的代码。

```
$curl = curl_init();
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.0.3705; .NET CLR 1.1.4322)');
curl_setopt($curl, CURLOPT_TIMEOUT, 20);
curl_setopt($curl, CURLOPT_URL, 'http://abc.com/test');
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, 'a=b&c=d&e=f');
$headers[] = 'Content-Type:application/x-www-form-urlencoded';
curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
$response = curl_exec($curl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:05:53.823

啊，解决了。刚改：

```
Options FollowSymLinks 
```

到：

```
Options +FollowSymLinks 
```

# .net - 从 MVC3 升级到 MVC4 后出现“元素未关闭”错误

> ID：12694814
> 
> 赞同：6
> 
> 时间：2012-10-02T16:58:35.150
> 
> 标签：.net, asp.net-mvc, razor, asp.net-mvc-4

Razor 2（随 MVC4 提供）似乎并不完全向后兼容 Razor 1（来自 MVC3）。

升级后发现一个错误：

> "td@Html.Raw(count" 元素未关闭。所有元素必须是自关闭的或具有匹配的结束标记。

导致这种情况的代码是：

```
<td@Html.Raw(count == null ? null : " class='has-item'")> 
```

解决方案是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T16:58:35.150

Razor 解析器是为 MVC 4 重写的，[大概是因为](http://www.sebnilsson.com/blog/2012/5/21/aspnet-mvc-4-razor-v2-new-features.html)：

> HTML5 规范明确指出支持未封闭的 HTML 标记，但 Razor v1 没有足够先进的解析器来支持这一点。Razor v2 现在通过 W3C 规范中列出的元素支持这一点。

`@`这里最简单的解决方案是在符号前添加一个空格：

```
<td @Html.Raw(count == null ? null : " class='has-item'")> 
```

但是，带有 MVC 4 的 Razor 中的条件属性具有更优雅的语法。

```
<td class="@(count == null ? null : "has-item")"> 
```

当属性值解析为 时`null`，该属性会从元素中省略。所以这个标记的输出是：

```
<td> 
```

...或者...

```
<td class="has-item"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:22:16.417

MVC4 的 Razor 解析器与 MVC3 不同。Razor v3 具有高级解析器功能，另一方面，与 MVC3 相比，它的解析更为严格。

如果您没有以正确的方式使用 razor 语法，则在将 MVC3 转换为 MVC4 时可能会遇到语法错误。

Razor v2 中不允许的一些常见 Razor 代码错误的解决方案是：

--> 除非有变量声明部分，否则避免在视图中使用服务器块。

```
Don’t : @{if(check){body}}
Recommended : @if(check){body} 
```

--> 当你已经在服务器范围内时避免使用@。

```
Don’t : @if(@variable)
Recommended : @if(variable)

Don't : @{int a = @Model.Property }
Recommended : @{int a = Model.Property } 
```

# ruby - 如何解决哈希比较问题

> ID：12694817
> 
> 赞同：0
> 
> 时间：2012-10-02T16:59:09.700
> 
> 标签：ruby, hash

我正在尝试创建一个我可以在 Twitter 上直接发送消息的所有人的哈希数组。正确的数组看起来像`[{id:12345,name:"john", profile_pic:"some_url"},{id:67890,name:"jim", profile_pic:"some_url"}]`

我正在获取 all_followers 和 all_friends 并比较两者的内容。返回的每个对象都是一个哈希数组。我正在遍历一个数组并获取 ID，然后遍历第二个数组并检查哈希是否包含该 id 值。如果是这样，我会从原始哈希中获取一些详细信息，并将其发送到最终用于我的浏览器的较小哈希中。

执行此操作的代码是：

```
 def get_direct_message_list(friend_list,follower_list)
    names_and_pics = []
    friend_list.each do |base|
      follower_list.each do |compare|
        if compare.has_value?(base["id"])
          block_hash = {}
          block_hash["id"] = base["id"]
          block_hash["name"] = base["name"]
          block_hash["profile_background_image_url"] = base["profile_background_image_url"]
          names_and_pics << block_hash
        end

      end
    end
    names_and_pics
  end 
```

它基本上正在工作。我的测试套件如下所示，并且测试通过了。

```
 context "get_direct_message_list" do

    it "should take friends and followers and return name, pic and twitter_id in one list"  do
      followers = [{"id"=>1, "name" => "john", "profile_background_image_url" => "http://somewhere.com"}, {"id"=>2},{"id"=>3, "name" => "mike", "profile_background_image_url" => "http://somewhere.com"}]
      friends = [{"id"=>1, "name" => "john", "profile_background_image_url" => "http://somewhere.com"},{"id"=>5, "name"=>"someoneelse", "profile_background_image_url"=> "http://somewhere"},{"id"=>4},{"id"=>3, "name" => "mike", "profile_background_image_url" => "http://somewhere.com"}]

      get_direct_message_list(friends, followers).should == [{"id"=>1, "name" => "john", "profile_background_image_url" => "http://somewhere.com"},{"id"=>3, "name" => "mike", "profile_background_image_url" => "http://somewhere.com"}]
    end
  end 
```

我的问题是返回的数组有一些奇怪的重复，即特别是 12 和 13 的 Twitter ID，bizstone 和 jack dorsey，这两个人都不关注我。它们每个都在最终阵列中被复制 3 次和 7 次。我不太确定要解决什么问题。我的第一个想法是，当.has_value`hashx.has_value?(13)`的 twitter id表示匹配是准确的时，类似的东西正在返回 true。`134567' was being encountered but further experimentation with`我可以看什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:26:12.517

如果在equals内有*任何内容*，则该行将`compare.has_value?(base["id"])`返回。`true`*`compare.values``base["id"]`*

 *例如：

```
{:id => 12345, :foo => 2}.has_value?(2)
# => true 
```

这可能会给您带来误报。很难判断这是否是问题的根本原因，但您可能希望比`compare.has_value?(base["id"])`.

更像的东西怎么样`compare["id"] == base["id"]`？*

# c# - 骰子游戏无法正确显示奖金

> ID：12694823
> 
> 赞同：0
> 
> 时间：2012-10-02T16:59:31.770
> 
> 标签：c#

我正在编写一个简单的骰子游戏。该表单由 3 个文本框和一些标签组成（稍后我会将 1 个文本框更改为标签）。
在左上角将出现 3 个骰子值。
从赌博文本框左侧将显示总金额。

*   在赌博文本框中输入您的猜测
*   在 inzet 文本框中输入您要下注的金额
*   在 Winnings 文本框中，应显示您赢得的金额

标准，

*   当您掷出 3 个 6 时，您将获得 20 的奖金
*   当您扔出一组低于 6 的任何东西时，您将获得 10 的奖励
*   当你投掷任何东西时，你会得到 5 的奖金
*   当您的赌注正确时，您的 inzet 会翻倍（inzet = 1 您赢 2）
*   奖金必须显示红利 + inzet

问题是只有当您的赌注等于总金额并且似乎只适用于 +5 奖金时，才会更新奖金。

这是代码：

```
{
public partial class Form1 : Form
{
    private Random throwDice = new Random();
    private int total;
    private int inzet;
    private int gamble;
    private int prize;
    private int bonus;
    public Form1()
    {
        InitializeComponent();

    }

    private void button1_Click(object sender, EventArgs e)
    {
        int die1, die2, die3;

        die1 = throwDice.Next(1, 7);
        die2 = throwDice.Next(1, 7);
        die3 = throwDice.Next(1, 7);

        label1.Text = die1.ToString();
        label2.Text = die2.ToString();
        label3.Text = die3.ToString();
        label4.Text = Convert.ToString(die1 + die2 + die3);

        total = Convert.ToInt32(label4.Text);
        inzet = Convert.ToInt32(textBox1.Text);
        gamble = Convert.ToInt32(textBox2.Text);

        if (gamble == total)
        {
            if (die1 == 6 && die1 == die2 && die1 == die3)
            {
                bonus = 20;
            }
            else if (die1 == die2 && die1 == die3)
            {
                bonus = 10;
            }
            else if (die1 == die2)
            {
                bonus = 5;
            }
            else if (die2 == die3)
            {
                bonus = 5;
            }
            else if (die1 == die3)
            {
                bonus = 5;
            }
            prize = inzet * 2 + bonus;
            textBox3.Text = prize.ToString();

        }
        else if (gamble < total && gamble > total)
        {
            if (die1 == 6 && die1 == die2 && die1 == die3)
            {
                bonus = 20;
            }
            else if (die1 == die2 && die1 == die3 )
            {
                bonus = 10;
            }
            else if (die1 == die2)
            {
                bonus = 5;
            }
            else if (die2 == die3)
            {
                bonus = 5;
            }
            else if (die1 == die3)
            {
                bonus = 5;
            }
            prize = (inzet - inzet) + bonus;
            textBox3.Text = prize.ToString();
        }
    }

} 
```

我需要获得 6 6 6 奖金才能工作（以及其他套装奖金）。当您的赌注不等于骰子总数时，我还需要申请奖金。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T17:03:52.237

这个条件：

```
 else if (gamble < total && gamble > total) 
```

永远不会实现！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T17:05:02.240

这是你的问题：

```
else if (gamble < total && gamble > total) 
```

这总是错误的。gamble 不能同时小于和大于总数。

我认为你在这里需要的只是`else`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T18:05:45.170

其他答案将解决您的根本原因（在同一比较中同时具有 < 和 >）。

```
else if (gamble < total && gamble > total) 
```

必须是：

```
else 
```

这个错误是[单元测试](http://en.wikipedia.org/wiki/Unit_testing)的一个很好的广告。只需将结果提取到一个类 (DiceResults) 中，就可以轻松地在运行的应用程序的上下文之外测试所有可能的结果。现在您有重复的逻辑来计算奖金，如果您在更改奖金逻辑时忘记更新两者，这本身很容易导致错误。

我并不是说我的解决方案是最好的代码（随着更多奖励规则的添加，`if`/`else if`列表将变得笨拙 -[设计模式](http://en.wikipedia.org/wiki/Software_design_pattern)可以帮助解决这个问题），但是作为对代码的快速重构，它使遵循变得更加简单最终，测试。

我添加了一些测试作为示例；然后很容易添加额外的以测试所有结果。当您添加代码并进行更改时，您可以重新运行测试以检查您没有破坏任何东西。如果您使用的是 Visual Studio，那么您可以[轻松地运行单元测试](http://msdn.microsoft.com/en-us/library/ms182532.aspx)。

这是您的新事件处理程序：

```
private void button1_Click(object sender, EventArgs e)
{
    int die1 = throwDice.Next(1, 7);
    int die2 = throwDice.Next(1, 7);
    int die3 = throwDice.Next(1, 7);

    var results = new DiceResults(die1, die2, die3);

    label1.Text = results.Dice1;
    label2.Text = results.Dice2;
    label3.Text = results.Dice3;
    label4.Text = results.GetDiceTotal();

    inzet = Convert.ToInt32(textBox1.Text);
    gamble = Convert.ToInt32(textBox2.Text);

    int prize = results.GetPrize(gamble, inzet);
    textBox3.Text = prize;
} 
```

* * *

以及支持它的新代码：

```
public class DiceResults
{
    public DiceResults(int dice1, int dice2, int dice3)
    {
        Dice1 = dice1;
        Dice2 = dice2;
        Dice3 = dice3;
    }

    public int Dice1 { get; private set; }
    public int Dice2 { get; private set; }
    public int Dice3 { get; private set; }

    public int GetBonus()
    {
        int bonus = 0;

        if (AllSixes())
        {
            bonus = 20;
        }
        else if (SetLessThanSix())
        {
            bonus = 10;
        }
        else if (AnyDouble())
        {
            bonus = 5;
        }
        return bonus;
    }

    public bool AllSixes()
    {
        return Dice1 == 6 &&
               Dice1 == Dice2 &&
               Dice2 == Dice3;
    }

    public bool SetLessThanSix()
    {
        return Dice1 < 6 &&
               Dice1 == Dice2 &&
               Dice2 == Dice3;
    }

    public bool AnyDouble()
    {
        return Dice1 == Dice2 ||
               Dice2 == Dice3 ||
               Dice1 == Dice3;
    }

    public int GetDiceTotal()
    {
        return Dice1 + Dice2 + Dice3;
    }

    public int GetPrize(int gamble, int inzet)
    {
        int prize = GetBonus();
        if (gamble == GetDiceTotal())
        {
            prize += inzet * 2;
        }
        return prize;
    }
} 
```

* * *

和单元测试：

```
[TestClass]
public class DiceResultsTest
{
    [TestMethod]
    public void TestDiceTotal()
    {
        //Arrange
        var results = new DiceResults(1, 2, 3);

        //Act
        int diceTotal = results.GetDiceTotal();

        //Assert
        Assert.AreEqual(6, diceTotal);
    }

    [TestMethod]
    public void TestForAllSixes()
    {
        //Arrange
        var results = new DiceResults(6, 6, 6);

        //Assert
        Assert.IsTrue(results.AllSixes());
    }

    [TestMethod]
    public void TestForAllFives()
    {
        //Arrange
        var results = new DiceResults(5, 5, 5);

        //Assert
        Assert.IsTrue(results.SetLessThanSix());
    }

    [TestMethod]
    public void TestForDoubleTwo()
    {
        //Arrange
        var results = new DiceResults(2, 5, 2);

        //Assert
        Assert.IsTrue(results.AnyDouble());
    }

    [TestMethod]
    public void TestBonusForAllSixes()
    {
        //Arrange
        var results = new DiceResults(6, 6, 6);

        //Act
        int bonus = results.GetBonus();

        //Assert
        Assert.AreEqual(20, bonus);
    }

    [TestMethod]
    public void TestBonusForAllFives()
    {
        //Arrange
        var results = new DiceResults(5, 5, 5);

        //Act
        int bonus = results.GetBonus();

        //Assert
        Assert.AreEqual(10, bonus);
    }

    [TestMethod]
    public void TestBonusForDoubleTwo()
    {
        //Arrange
        var results = new DiceResults(2, 5, 2);

        //Act
        int bonus = results.GetBonus();

        //Assert
        Assert.AreEqual(5, bonus);
    }

    [TestMethod]
    public void TestBonusWhenNoBonus()
    {
        //Arrange
        var results = new DiceResults(1, 2, 3);

        //Act
        int bonus = results.GetBonus();

        //Assert
        Assert.AreEqual(0, bonus);
    }

    [TestMethod]
    public void TestPrizeForAllSixesAndCorrectGamble()
    {
        //Arrange
        var results = new DiceResults(6, 6, 6);

        //Act
        var prize = results.GetPrize(18, 50);

        //Assert
        Assert.AreEqual(120, prize);
    }

    [TestMethod]
    public void TestPrizeForAllSixesAndIncorrectGamble()
    {
        //Arrange
        var results = new DiceResults(6, 6, 6);

        //Act
        var prize = results.GetPrize(15, 50);

        //Assert
        Assert.AreEqual(20, prize);
    }

    //add more tests to cover all cases.....
} 
```

# wordpress - 创建页面的 Wordpress 表单

> ID：12694828
> 
> 赞同：1
> 
> 时间：2012-10-02T17:00:28.637
> 
> 标签：wordpress

基本上，我正在为我的站点管理员寻找一种方法，让他们可以在其中输入有关某人的数据。例如，输入有关运动员的图像、视频和统计数据。此表格将包含名称、身体特征、不同运动的球员统计数据等。

我想获取这些信息并将其放入预先格式化的页面或在 WordPress 中发布。

这将完全消除用户了解 HTML 的需要，并允许我使用 CSS 进行创意。有谁知道插件或任何可以做到这一点的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:02:49.637

我建议使用以下两个插件之一：[Pods](http://wordpress.org/extend/plugins/pods/)或[Advanced Custom Fields](http://www.advancedcustomfields.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:19:21.663

[就个人而言，我真的很喜欢Types Plugin](http://wordpress.org/extend/plugins/types/)的布局

我要做的是设置一个自定义帖子类型并将其命名为“特殊页面”。从那里，您可以确保页面的布局主要由自定义字段确定。如果您甚至不想授予作者编写任何实际内容的能力，我相当肯定您可以在创建自定义帖子类型时禁用内容编辑器。

# php - 无法使用 PHP PDO 查询 MS Access 数据库中保存的查询

> ID：12694829
> 
> 赞同：3
> 
> 时间：2012-10-02T17:00:31.293
> 
> 标签：php, sql, ms-access, pdo

我有一个带有一堆已保存查询的 Microsoft Access 数据库。我想使用 PHP 来运行并获取这些查询的结果。我可以很好地查询同一个数据库中的表。我的理解是，我可以将查询视为表格。

这将从“新种植者字段”表中返回数据就好了：

```
$db = new PDO("odbc:DRIVER={Microsoft Access Driver (*.mdb)};DBQ=$connString; SystemDB=$mdw; Uid=$username; Pwd=$password");
$sth = $db->prepare("SELECT * FROM [New Grower Fields]");
$sth->execute();
$results = $sth->fetchALL(PDO::FETCH_ASSOC);
print_r($results); 
```

但是，如果我想使用保存的查询，我*认为*它的行为就像查询表一样，我什么也得不到。

```
$db = new PDO("odbc:DRIVER={Microsoft Access Driver (*.mdb)};DBQ=$connString; SystemDB=$mdw; Uid=$username; Pwd=$password");
$sth = $db->prepare("SELECT * FROM [Daily Tonnage by Plant]");
$sth->execute();
$results = $sth->fetchALL(PDO::FETCH_ASSOC);
print_r($results); 
```

有什么方法可以让我在 MS Access 中使用 PHP 获取已保存查询的结果？我对此很陌生。我感谢任何和所有的帮助！我很乐意提供所需的任何其他信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-22T20:03:39.597

这似乎为我解决了这个问题：

```
$db = new PDO("odbc:DRIVER={Microsoft Access Driver (*.mdb)};DBQ=$connString; SystemDB=$mdw; Uid=$username; Pwd=$password");
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$sth = $db->prepare("SELECT [Grade Date], NetWt FROM [Daily Tonnage by Plant]");
$sth->execute();

while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
  print_r($row);
} 
```

我添加 `$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);`并更改

`$results = $sth->fetchALL(PDO::FETCH_ASSOC);`到`$row = $sth->fetch(PDO::FETCH_ASSOC)`

# javascript - 这个事件处理程序在做什么？

> ID：12694830
> 
> 赞同：2
> 
> 时间：2012-10-02T17:00:40.977
> 
> 标签：javascript, d3.js, event-handling, dom-events

我尝试过检查 DOM 等等，但不确定为什么将 '.tooltip' 附加到处理程序中。如果删除它不会影响任何东西，并且似乎没有重要价值：

```
 g.selectAll("circle")
        //
        //why is .tooltip appended here?
        //
        .on("mouseover.tooltip", function(d) {
        d3.select("text#" + d.line_id).remove();
        d3.select("#chart")
            .append("text")
            .text(d.late_percent + "%")
                .attr("x", time_scale(d.time) + 10)
                .attr("y", percent_scale(d.late_percent) - 10)
                .attr("id", d.line_id);
    }); 
```

任何澄清都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:12:15.643

这是一个命名空间

[http://api.jquery.com/on/](http://api.jquery.com/on/)

[http://docs.jquery.com/Namespaced_Events](http://docs.jquery.com/Namespaced_Events)

> “jQuery 提供了一个名为命名空间事件的概念：只需在声明事件时为其添加一个类名。然后您可以通过取消绑定和触发器引用该命名空间事件。”

```
$('.class').bind('click.namespace', function(){}); 
$('.class').trigger('click.namespace');
$('.class').unbind('click.namespace'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:17:56.733

在这种情况下，如[selection.on 的 D3 文档中](https://github.com/mbostock/d3/wiki/Selections#wiki-on)所述，它只是为同一事件注册多个侦听器的一种方式。例如，如果要注册两个侦听器，则`mouseover`需要使用`.on("mouseover.foo",...`和`.on("mouseover.bar",...`。

否则，如果您只使用`.on("mouseover",..`两次，您将替换已注册的侦听器`mouseover`而不是添加新侦听器。该`tooltip`部分没有特殊含义，它只是一个标识符。

# javascript - JavaScript json 拆分对象并更新

> ID：12694833
> 
> 赞同：0
> 
> 时间：2012-10-02T17:00:48.437
> 
> 标签：javascript, jquery, json, stringify

如何拆分 json 对象并根据 ID 更新它们。我听说要使用 stringify！以及如何实现更新对象的功能？

```
<input type="text" value="{"id":"1","price":"30.00","edit":0},
{"id":"2","price":"8.00","edit":0}" id="json" />

**code:**
var json = $('#json').val().split(',');

for (var i = 0; i < json.length; i++){
  alert(json);
}
//(seems its splitting every comma it finds). 
```

我正在尝试存档：

*   拆分对象 {"id":"1","price":"30.00","edit":0}, {"id":"2","price":"8.00","edit":0}
*   更新取决于所选 ID。
*   然后保存并返回相同的对象格式但具有更新的值。

希望我的问题足够清楚:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:04:55.990

而不是字符串拆分和解析..尝试使用`$.parseJSON`如下所示，

```
$.parseJSON("[" + $('#json').val() + "]"); 
```

**演示：http:** [//jsfiddle.net/QUTu9/](http://jsfiddle.net/QUTu9/)

还修复了 html 中的引号，如下所示，

```
<input type="text" value='{"id":"1","price":"30.00","edit":0},
{"id":"2","price":"8.00","edit":0}' id="json" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:04:44.613

这将不起作用，因为您有报价问题。最简单的解决方案是用单引号括起来。

```
<input type="text" value='{"id":"1","price":"30.00","edit":0},{"id":"2","price":"8.00","edit":0}' id="json" /> 
```

不要拆分它，使用[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:04:49.700

首先你的语法看起来有点乱，用单引号包围你的价值

```
value='{"id":"1","price":"30.00","edit":0}, {"id":"2","price":"8.00","edit":0}' 
```

# c - 在多行上定义一个字符串

> ID：12694838
> 
> 赞同：15
> 
> 时间：2012-10-02T17:01:15.063
> 
> 标签：c, syntax

请采取以下措施：

```
char buffer[512];

memset(buffer, 0, sizeof(buffer));
sprintf(&buffer[0],"This Is The Longest String In the World that in text goes on and..");

printf("Buffer:%s\r\n",buffer); 
```

我希望能够在多行上创建此字符串，以便于故障排除和编辑。但是，当我使用该`\`命令时，我的输出由似乎是标签的内容分隔？

例子：

```
sprintf(&buffer[0],"This Is The\
    Longest String In the World\
    that in text goes on and.."); 
```

产生以下输出：

```
Buffer:This Is The        Longest String In the World       that in text goes on and.. 
```

有任何想法吗？这只是尝试在多行代码中分解字符串的错误方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-02T17:02:48.017

换行符延续会考虑代码中的任何空格。

您可以利用字符串文字连接以获得更好的可读性：

```
sprintf(buffer, "This Is The "
                "Longest String In the World "
                "that in text goes on and.."); 
```

使用`\`您需要在第 0 列开始继续您的字符串：

```
sprintf(buffer, "This Is The \
Longest String In the World \
that in text goes on and.."); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-02T17:49:46.793

尽管这可能看起来很迂腐，但在现实世界中，我已经被咬了足够多的时间，以至于与其他两个发布的答案存在以下问题。

*   两个发布的答案忽略了在连接单独字符串文字的单词之间留出空格（很明显，在第一次测试之后）。

*   如果您的字符串真的很长，请改用`snprintf()`它 - 它稍微笨拙，但它告诉任何审查您的代码的人您知道代码维护中的常见危险。

*   如果您的字符串恰好包含`%`，您将收到编译器警告（好）或随机分段错误（坏）。所以使用`"%s"`，或者，也许在这种情况下，只是`strcpy().`（在两个月的时间内，同事可以轻松地添加`99.9%`到消息中。）

*   我经常看到的使用`memset(),`只是货物崇拜编程。是的，在特殊情况下需要它，但一直使用它会发送错误信息。

*   最后，为什么有人会使用`&buffer[0]`when just `buffer` would do？

总而言之，您的代码可能应该是：

```
char buffer[512];
snprintf(buffer, sizeof buffer, "%s", 
   "This is The Longest String "
   "In the World that in text "
   "goes on and on and on and on ....");
printf("Buffer:%s\r\n", buffer); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T17:04:19.477

这也可以正常工作：

```
char buffer[512];
sprintf(&buffer[0], "This is the longest string"
        "in the world that in text"
        "goes on and on and on and on ....");
printf("%s\n", buffer); 
```

# sql - MS Access：如何实现 ON DUPLICATE KEY UPDATE？

> ID：12694841
> 
> 赞同：0
> 
> 时间：2012-10-02T17:01:24.307
> 
> 标签：sql, ms-access, on-duplicate-key

尽量避免单独查询以检查密钥是否存在，然后相应地插入或更新。从谷歌搜索看来，Access 也不支持 SQL 服务器的 MERGE。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:27:55.573

实际上，Access 确实支持“Upserting”，因为它有时被称为。我在Arvin Meyer 和 Douglas J. Steele 编写的名为*Microsoft Access Solutions - Tips, Tricks and Secrets from Microsoft Access MVPs的书中找到了这个解决方案。*

这是一个从 Contacts1 表中获取新数据并将其应用于 Contacts2 表的查询：

```
UPDATE Contacts2 LEFT JOIN Contacts1
ON Contacts2.ContactID = Contacts1.ContactID
SET Contacts2.ContactID = [Contacts1].[ContactID],
Contacts2.FirstName = [Contacts1].[FirstName],
Contacts2.LastName = [Contacts1].[LastName],
Contacts2.MobilePhone = [Contacts1].[MobilePhone] 
```

自然，我认为您可以使用表别名和 where 条件。而且我不确定是否需要如图所示的括号，但我将它们放在那里，因为书中的示例显示了它们（即使表名和字段名不包含空格或符号）。

这是直接取自书中的另一条注释：

*很明显，这仅在您为每个表定义了唯一索引时才有效。通常这将是表的主键，但实际上并不需要它，只要候选键存在于两个表中。（这使您可以使用自动编号作为主键，而不必担心数字不同。）索引是包含单个字段还是复合键索引都没有关系，只要它在两张桌子。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:18:39.233

一个简单的更新查询就可以解决问题。
创建一个简单的*Select*查询。
然后在查询生成器的设计视图中单击*更新*。
看看*网格*的变化。
现在输入要用来更新字段的表达式或值。
运行查询

# sql - Crystal Reports：布尔问题

> ID：12694842
> 
> 赞同：2
> 
> 时间：2012-10-02T17:01:26.730
> 
> 标签：sql, postgresql, crystal-reports, odbc

在使用 Crystal Reports 通过 PostgreSQL ODBC 源提取数据时，我遇到了一个相当麻烦的问题。看来我有一个布尔字段，它在数据库专家中显示为布尔值，在 Crystal 报表中几乎无处不在。我有一个我正在尝试使用的 if 语句，它要么不起作用，要么在使用时出错。当我浏览数据时，它要么是 1 要么是 0，并且是一个长度为 5 的字符串。试图解决这个问题至少可以说是有问题的。

这个不起作用（总是从客户端而不是 client_contact 中提取名称）

```
if ({client_contact.bill_to_contact} = "1") Then
trim({client_contact.given_name} + ' ' + {client_contact.initial}) + ' ' + UpperCase({client_contact.surname})
else
trim({client.given_name} + ' ' + {client.initial}) + ' ' + UpperCase({client.surname}) 
```

这个错误说它需要 bill_to_contact 处的布尔值（这是一个布尔值）。

```
if {client_contact.bill_to_contact} Then
trim({client_contact.given_name} + ' ' + {client_contact.initial}) + ' ' + UpperCase({client_contact.surname})
else
trim({client.given_name} + ' ' + {client.initial}) + ' ' + UpperCase({client.surname}) 
```

我尝试了 eqv 函数，我的 CR 版本为 12.0.0.683。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:04:12.983

尝试将第二个函数更改为：

```
if CBool(CDbl({client_contact.bill_to_contact})) Then 
```

强制进行数字转换，然后进行布尔转换。在此过程中，Crystal Reports 并不认为它是布尔值或数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:31:20.883

事实证明这是我用于数据库的 ODBC 驱动程序的问题。它有一个“Booleans as Chars”设置已打开。修复它，就像一个魅力。

无论如何，非常感谢类型转换提示！我敢肯定，它们将来会很有用。

# mysql - 如何从表中选择所有数据但如果它等于其他表的数据则删除值

> ID：12694844
> 
> 赞同：3
> 
> 时间：2012-10-02T17:01:35.960
> 
> 标签：mysql, sql, select

如何编写SQL语句从一个表中选择第二个表中没有对应记录的记录。

示例：有两个表`a`和`b`.

```
a (id, first, second, third)
b (id, whatever) 
```

我应该从表中选择所有数据`a`，没有记录在哪里`a.id = b.id`。不应选择该记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:03:23.000

```
SELECT * FROM a WHERE id NOT IN (SELECT id FROM b) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:03:40.367

带有 EXISTS 子查询：

```
SELECT *
FROM a
WHERE NOT EXISTS (SELECT 1 FROM b WHERE b.id=a.id) 
```

没有子查询：

```
SELECT *
FROM a
LEFT JOIN b ON b.id=a.id
WHERE b.id is null
GROUP BY a.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:04:52.600

```
select * from a where a.id not in (select distinct id from b) 
```

# jquery - 访问 JQuery 插件类的对象

> ID：12694847
> 
> 赞同：1
> 
> 时间：2012-10-02T17:01:45.813
> 
> 标签：jquery, jquery-plugins

我正在编写一个面向对象的 jquery 插件。我有一个类，我正在访问这个类，在插件中创建一个对象。我想在不使用元素数据的情况下访问这个对象，因为我需要学习调用插件时指定的元素的“大小”选项。

有些人将他们的对象放在元素数据上，如下所示：

> element.data('myplugin', myplugin);

并像这样访问这个对象：

> $(element).data('myplugin').get_size();

但是我想使用这样的东西：

> $(element).get_myplugin_obj().get_size();

是否有可能做到这一点？我找不到任何这样做的例子。

可以说以下代码是我的插件。某些输入区域调用此插件。当用户在输入区域写信时，插件会使文本“hello”的“font-size”变大。因此，“你好”的信息越来越大。giveerror.js 中的另一个函数查找第一个给定大小并计算最大大小。所以这个插件需要通过使用它的 MyPluginClass 对象来访问每个元素的给定“大小”选项。

**myplugin.js：**

```
 (function($) {

var MyPluginClass = function(element, customOptions)
{
    var elem = $(element);
    var obj = this;
    var options = $.extend({
        size: 1
    }, customOptions || {});

   /** public method **/
    this.addMyPlugin = function() {
        elem.after('<br /><span class="hello" style="font-size:'+options.size+'px">hello</span>');

        calculate(elem);
        elem.change(function() {
            calculate(this);
        });
        elem.keyup(function(){
            calculate(this);
        });
    };

    /** private method */
    var calculate = function(obj){
        var length = $(obj).val().length;
        var newsize = options.size + length;
        $(obj).nextAll('.hello:first').css('font-size',newsize);
        return;
    };

    /** public method to get max size value **/
    this.get_size = function() {
        return options.size;
    };

    /** public method to get object of this class for specific element **/
    this.get_myplugin_obj = function() {
        return obj;
    };

};

$.fn.myPlugin = function(customOptions)
{
    return this.each(function()
    {
        var element = $(this);

        /** create an object for MyPluginClass **/
        var MyPluginClassObj = new MyPluginClass(this, customOptions);

        MyPluginClassObj.addMyPlugin();
    });
};
})(jQuery); 
```

**给错误.js：**

```
 function validate_hello_size_func (element, error_message)
{
        var first_given_size = $(element).get_myplugin_obj().get_size();
        var threshold = first_given_size * 3;
        //var threshold = 10;
        var current_size_px = $(element).nextAll('.hello:first').css('font-size');
        var current_size = parseInt(current_size_px.substr(0,current_size_px.length-2), 10);
        if(current_size > threshold){
            if(!$(element).next().hasClass('error'))
                $(element).after('<span class="error" style="color:red">'+error_message+'</span>');
        } else {
            if($(element).next().hasClass('error'))
                $(element).next().remove();
        }
} 
```

**索引.php：**

```
<html>
<head>
<title>Hello</title>
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="myplugin.js"></script>
<script type="text/javascript" src="giveerror.js"></script>
<script type="text/javascript">
$(document).ready ( function ( ) {
    $('#input1').myPlugin({
            size: 5
    });
    $('#input2').myPlugin();

    $('#input1').bind ( 'change', function() {
        validate_hello_size_func (this, 'You exceeded the limit');
    });
    $('#input2').bind ( 'change', function() {
        validate_hello_size_func (this, 'You exceeded the limit');
    });
});

</script>
</head>
<body>
    <div id="div1">
        <input id="input1" type="text" name="input1" value="">
    </div>
    <div id="div2">
        <input id="input2" type="text" name="input2" value="">
    </div>
    <br />
    <input type="submit" name="submit" value="OK">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:58:33.210

我解决了这个问题，我在这里添加我的评论来帮助想要使用相同结构的人，这里是答案：

通过return语句：

*   在 $.fn.myPlugin 中，您执行以下操作： return this.each(function() .....
*   在这个返回函数中，需要定义 this.get_myplugin_obj = function() { return MyPluginClassObj; };
*   如果已在其上调用了 myPlugin，这将允许所有有权访问 get_myplugin_obj 函数的元素。get_myplugin_obj 将返回 MyPluginClass 对象，该对象具有 get_size 等功能

这是新的**myplugin.js**：

```
(function($) {

    var MyPluginClass = function(element, customOptions)
    {
        var elem = $(element);
        var obj = this;
        var options = $.extend({
            size: 1
        }, customOptions || {});

       /** public method **/
        this.addMyPlugin = function() {
            elem.after('<br /><span class="hello" style="font-size:'+options.size+'px">hello</span>');

            calculate(elem);
            elem.change(function() {
                calculate(this);
            });
            elem.keyup(function(){
                calculate(this);
            });
        };

        /** private method */
        var calculate = function(obj){
            var length = $(obj).val().length;
            var newsize = options.size + length;
            $(obj).nextAll('.hello:first').css('font-size',newsize);
            return;
        };

        /** public method to get max size value **/
        this.get_size = function() {
            return options.size;
        };

    };

    $.fn.myPlugin = function(customOptions)
    {
        return this.each(function()
        {
            var element = $(this);

            /** create an object for MyPluginClass **/
            var MyPluginClassObj = new MyPluginClass(this, customOptions);

            MyPluginClassObj.addMyPlugin();

            this.get_myplugin_obj = function() {
                return MyPluginClassObj;
            };
        });
    };
})(jQuery); 
```

并通过以下函数获取尺寸。**给错误.js：**

```
function validate_hello_size_func (element, error_message)
{
        var first_given_size = $(element)[0].get_myplugin_obj().get_size();
        var threshold = first_given_size * 3;
        //var threshold = 10;
        var current_size_px = $(element).nextAll('.hello:first').css('font-size');
        var current_size = parseInt(current_size_px.substr(0,current_size_px.length-2), 10);
        if(current_size > threshold){
            if(!$(element).next().hasClass('error'))
                $(element).after('<span class="error" style="color:red">'+error_message+'</span>');
        } else {
            if($(element).next().hasClass('error'))
                $(element).next().remove();
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:17:57.577

您可以在初始化插件时将插件对象存储在元素数据中。在此之后，您在插件中创建一个返回 $(element).data('aaaa') 的方法。

换句话说，您只会“屏蔽”访问插件实例的方式。

# bash - 在 unix bash 脚本中将文件系统重新挂载为 rw

> ID：12694848
> 
> 赞同：0
> 
> 时间：2012-10-02T17:02:00.030
> 
> 标签：bash, unix, cron, mount

大家好，我需要在 bash 脚本中以读/写方式重新挂载文件系统

我查看了几个示例，我的代码看起来正确..实际上它可以工作。但是，当我以 root 身份执行 bash 文件时，它仍然要求输入密码。我不能这样做，因为当我不在办公室时，它将作为 CRON 工作运行。我尝试了几种变体，但都没有奏效。你们有什么建议吗？

```
$MOUNT -o remount,rw $BACKUPDIR ;
if (( $? )); then
{
$ECHO "snapshot: could not remount $BACKUPDIR readwrite";
exit;
} 
```

菲;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:07:36.800

您可以在命令行中指定密码：

```
-o remount,rw,pass=password 
```

# jquery - 如何将 jquery 重写为无冲突模式？

> ID：12694860
> 
> 赞同：0
> 
> 时间：2012-10-02T17:02:21.153
> 
> 标签：jquery

我正在研究 wordpress 模板。在 xhtml 文件上，我对 jquery 没有任何问题，但现在在 wordpress 无冲突模式下，我的代码会出错。

如何将其重写为无冲突？

```
//Fade in and out animation on hove buttons - meteo, and slide pagination balls
$(window).load(function() {
    $("ul.slidebtns li a").hover(function() {
        divW = ($(this).next("div").width() / 2) - ($(this).outerWidth() / 2);
        $(this).next("div").css({marginLeft: -divW }).animate({ opacity: "show" }, "fast");
    }, function() {
        $(this).next("div").animate({opacity: "hide"}, "fast");
    });

    $("#tempicon img").hover(function() {
            var $img = $(this);
            var $labelDiv = $img.next("div");

            var halfOfLabelDivsWidth = $labelDiv.width() / 2;
            var imgMiddle = $img.position().left + ($img.width() / 2);

            $labelDiv
                .css({
                    left: imgMiddle - halfOfLabelDivsWidth
                })
                .animate({ opacity: "show" }, "fast");
        }, function() {
            $(this).next("div").animate({opacity: "hide"}, "fast");
    });
}); 
```

我是否必须将所有 $ 符号更改为 jQuery？我试图只重写以下部分：

```
$(window).load(function() {
jQuery(window).load(function() { 
```

和

```
$("ul.slidebtns li a").hover(function() {
jQuery("ul.slidebtns li a").hover(function() { 
```

但它仍然会在 $(this) 上出错，例如...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:04:05.910

将代码包装在别名闭包中：

```
(function ($) {
    ...all your code here...
}(jQuery)); 
```

这将允许您`$`在闭包内使用作为对`jQuery`工厂函数的引用。

如果您不愿意将所有内容包装在一个闭包中（`var`例如，您必须注意语句，因为它们可能需要属于不同的上下文），您需要更改 to的*每个*用法。`$``jQuery`

此外，您正在使用`$(window).load`，这通常是不必要的（除非您实际上需要加载图像）。相反，您应该收听该`document.ready`事件。长格式是：

```
jQuery(document).ready(function ($) {
    ...code...
}); 
```

但它通常以别名简写形式使用：

```
jQuery(function ($) {
   ...code...
}); 
```

# javascript - 在 AngularJS 中使用 templateURL 从外部资源加载

> ID：12694866
> 
> 赞同：1
> 
> 时间：2012-10-02T17:02:41.877
> 
> 标签：javascript, javascript-framework, angularjs, directive

我正在 AngularJS 中创建一个利用 templateUrl 键的自定义指令。我遇到的问题是我们将这些模板文件托管在外部 CDN 上，因此出现 Access-Control-Allow-Origin 错误。

```
XMLHttpRequest cannot load http://path_to_cdn/template_file.html. Origin http://xx.xx.xx.xx is not allowed by Access-Control-Allow-Origin. 
```

我在某处读到我可以做这样的事情......

```
<script type="text/ng-template" src="http://path_to_cdn/template_file.html"></script> 
```

...但这并不是很理想，无论如何我都无法让它正常工作。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:08:41.820

问题出在服务器端。这是解决它的一种方法

假设您可以访问这两个服务器，请执行以下操作：

首先是术语

域 1：加载发出 templateURL 请求的 javascript 的域

域 2：您尝试从中获取模板的域

***您必须在域 2 的响应***头中设置 Access-Control-Allow-Origin 选项。它的值应该是域 1 的 url。

# php - HTML/PHP 文件上传未接收

> ID：12694871
> 
> 赞同：1
> 
> 时间：2012-10-02T17:02:50.047
> 
> 标签：php, html, iframe, file-upload, upload

所以我在这里发布了一个较早的问题：[上传](https://stackoverflow.com/questions/12691842/html-php-file-upload)

我尝试了解决方案，但现在无论它是否是正确的文件类型，它都只是说“无效文件”。这是我的html：

```
<form action="upload_file.php" method="post" enctype="multipart/form-data" target="my_iframe">
    Select a file: <input type="file" name="upload">
    <input type="submit">
</form> 
```

这是我的upload_file.php：

```
$allowedExts = array("doc", "docx");
    $extension = end(explode(".", $_FILES["file"]["upload"]));

    if (($_FILES["file"]["size"] < 200000)
    && in_array($extension, $allowedExts)) {
        if ($_FILES["file"]["error"] > 0)
        {
            echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
        }
        else
        {
            echo "Upload: " . $_FILES["file"]["upload"] . "<br />";
            echo "Type: " . $_FILES["file"]["type"] . "<br />";
            echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
            echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

            if (file_exists("Proposals/" . $_FILES["file"]["upload"]))
            {
                echo $_FILES["file"]["upload"] . " already exists. ";
            }
            else
            {
                move_uploaded_file($_FILES["file"]["tmp_name"],
                "Proposals/" . $_FILES["file"]["upload"]);
                echo "Stored in: " . "Proposals/" . $_FILES["file"]["upload"];
            }
        }
    } else {
        echo "Invalid file";
    } 
```

我也试过：

```
$extension = pathinfo( $_FILES["file"]["upload"], PATHINFO_EXTENSION); 
```

并做了一个

```
die($extension); 
```

在他们两个上，但*什么*都没有打印出来。所以我有两个问题
1）我上面的代码有什么问题
2）如何隐藏 iframe，直到收到回复？然后在用户阅读回复后有一个好的按钮让它消失？如果有帮助，这是 iframe 代码：

```
<iframe name="my_iframe" src="upload_file.php"></iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:05:59.157

改变

```
$_FILES["file"]["upload"] 
```

到

```
$_FILES["upload"]["name"] 
```

无处不在，与其他参考文献相同。所以；

```
$_FILES["file"]["size"] **To** $_FILES["upload"]["size"] 
```

和

```
$_FILES["file"]["type"] **To** $_FILES["upload"]["type"] 
```

和

```
$_FILES["file"]["tmp_name"] **To** $_FILES["upload"]["tmp_name"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:06:33.863

你有：

```
if (($_FILES["file"]["size"] < 200000) && in_array($extension, $allowedExts)) { 
```

它应该是 $_FILES["upload"]["size"] 因为你有

```
<input type="file" name="upload"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T17:07:06.067

改变

```
$_FILES["file"]["size"] 
```

到

```
$_FILES["upload"]["size"] 
```

并对所有其他变量执行相同操作，根据您的 HTML ，您的输入文件的 name 属性是**upload**，而不是**file ：**

```
<input type="file" name="upload">
                  HERE ----^ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T17:08:37.077

检查本教程： [http ://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

应该是 $_FILES["upload"] 你犯的一个错误

# database - Xcode Sqlite 序列写入错误

> ID：12694875
> 
> 赞同：0
> 
> 时间：2012-10-02T17:03:16.377
> 
> 标签：database, xcode, ipad, sqlite

我创建了一个目前只有一个表的 SQLite 数据库。我将它连接到 Xcode，完成了所有必需的步骤，并在编写文件时发现了问题。

我的表有 5 个项目（主键、姓名、出生日期、大学名称、课程名称）。

在保存我的数据时，它说：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“创建添加语句时出错。'乱序调用的库例程''

我设置了断点并找到了问题所在，但我无法解决它。

```
-(void)saveStudentInfo{

sqlite3_stmt *statement = NULL;

    const char *sql = "insert into studentInfo (name,collegeName,courseName) Values (?, ?, ?)";

    if (sqlite3_open("my_db_filename.db", &database) == SQLITE_OK)
    {
        //sqlite3_stmt *addStmt;

        if(sqlite3_prepare_v2(database, sql, -1, &addStmt, NULL) != SQLITE_OK)
        {
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
        } else {
            // do things with addStmt, call sqlite3_step
            sqlite3_bind_text(addStmt, 1, [studentName UTF8String], -1, SQLITE_TRANSIENT);
            sqlite3_bind_text(addStmt, 3, [studentCollegeName UTF8String], -1, SQLITE_TRANSIENT);
            sqlite3_bind_text(addStmt, 4, [studentCourseName UTF8String], -1, SQLITE_TRANSIENT);

            if(SQLITE_DONE != sqlite3_step(addStmt))
                NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
            else
                studentID = sqlite3_last_insert_rowid(database);

            sqlite3_finalize(statement);
        }
        sqlite3_close(database);     
    }

if (sqlite3_step(statement)==SQLITE_DONE){
    UIAlertView *error = [[UIAlertView alloc]initWithTitle:@"Done" message:@"Files were added to database" delegate:self cancelButtonTitle:@"Close" otherButtonTitles:nil, nil];
    [error show];
}
else {
    UIAlertView *error = [[UIAlertView alloc]initWithTitle:@"Error" message:@"StudentOrganizer could not add database" delegate:self cancelButtonTitle:@"Close" otherButtonTitles:nil, nil];
    [error show];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:45:05.873

我想你在调用 sqlite3_prepare_v2 之前忘记打开数据库了。

一个很好的方法是这样的：

```
sqlite3* database;
if (sqlite3_open("my_db_filename.db", &database) == SQLITE_OK)
{
    sqlite3_stmt *addStmt;

    if(sqlite3_prepare_v2(database, sql, -1, &addStmt, NULL) != SQLITE_OK)
    {
        NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
    } else {
        // do things with addStmt, call sqlite3_step
        sqlite3_finalize(sqlStatement);
    }
    sqlite3_close(database);     
} 
```

# javascript - 在 String.prototype 中使用“this”

> ID：12694876
> 
> 赞同：3
> 
> 时间：2012-10-02T17:03:17.317
> 
> 标签：javascript

对于各种 javascript 应用程序，我经常使用我编写的一个名为 isBlank() 的小函数：

```
isBlank = function(text) {
    while(text[0] == ' ') text = text.substr(1);
    return (text === '');
} 
```

该函数所做的只是删除输入字符串开头的所有空格，然后如果结果为空或不为空，则返回 true 或 false。所以我试着把这个函数做成一个String原型，如下：

```
String.prototype.isBlank = function() {
    while(this[0] == ' ') this = this.substr(1);
    return (this === '');       
} 
```

但是，当您尝试以下操作时，原型版本会给出“无效的左手赋值”错误：

```
"      ".isBlank();

ReferenceError: Invalid left-hand side in assignment 
```

我想这个问题源于我在while循环中重新分配'this'对象的事实，但由于我仍在学习java脚本，我想知道是否有人能够更详细地解释为什么这个原型没有'不工作。我对这个问题的理论方面更感兴趣，而不是对如何将 isBlank() 函数变成一个字符串原型来做我想要的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:09:18.527

您不能重新分配它。这就是错误所说的。

[ECMAScript 规范](http://interglacial.com/javascript_spec/a-10.html)。

> **10.1.7 这个**
> 
> 每个活动的执行上下文都有一个 this 值。this 值取决于调用者和正在执行的代码类型，并在控制进入执行上下文时确定。与执行上下文关联的 this 值是不可变的。

另一个[解释这个的链接](http://dmitrysoshnikov.com/ecmascript/chapter-3-this/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:09:53.960

您永远不能分配给[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)。如果要分配，则需要创建一个额外的变量，如下所示：

```
String.prototype.isBlank = function() {
    var text = this;
    while(text[0] == ' ') text = text.substr(1);
    return (text === '');       
} 
```

顺便说一句：并非所有浏览器都支持通过括号表示法访问单个字符，您应该使用[`.charAt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charAt). 此外，[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)有时会使生活更轻松：

```
String.prototype.isBlank = function() {
    return /^ *$/.test(this);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T17:11:27.000

```
String.prototype.isBlank = function() {
    return (this.trim() === '');       
} 
```

# c# - 如何使用 Linq-to-xml 提取属于两种类型节点之一的所有 xml 节点？

> ID：12694879
> 
> 赞同：0
> 
> 时间：2012-10-02T17:03:19.090
> 
> 标签：c#, linq-to-xml

我正在使用 Linq-to-sql 解析 HTML。现在要获取特定的段落标签，我正在使用以下代码：

```
 var paragraphs = contentDiv.Parent.Parent.Parent.Parent.Parent.Elements("p").ToList(); 
```

但是，我正在解析的网站之一有 P 标签，后面有标签。所以标记就像：

```
<p>...</p>
<ul><li>...</li></ul>
<p>...</p>
<ul><li>...</li></ul>
<p>...</p>
<ul><li>...</li></ul>
<p>...</p>
<ul><li>...</li></ul> 
```

我需要获取所有`p`标签内和所有`ul`标签内的所有文本，但我需要内容按照它在 HTML 中出现的顺序。基本上我想要类似的东西：

```
 var paragraphs = contentDiv.Parent.Parent.Parent.Parent.Parent.Elements("p" || "ul").ToList(); 
```

我该怎么做呢？

不，这些 P 和 UL 标记本身并没有分开，所以我不能只获取该父 XElement 中的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:05:41.070

听起来像你想要的

```
contentDiv.Parent.Parent.Parent.Parent.Parent.Elements()
          .Where(x => x.Name.LocalName == "p" || x.Name.LocalName == "ul")
          .ToList(); 
```

# java - 是否有任何库/API 可用于将 SVG 字体转换为 TTF（或其他格式）？

> ID：12694883
> 
> 赞同：3
> 
> 时间：2012-10-02T17:03:29.537
> 
> 标签：java, php, ruby, fonts, web

我有一个 Web 应用程序的想法，其中一部分涉及用户上传 SVG 字体和应用程序将其转换为 TTF 并最终转换为其他格式。

有没有图书馆可以做到这一点？我发现了一些从 TTF 转换为 SVG 的东西，比如 Batik，但我想反过来做。

我对任何语言都持开放态度：PHP、Ruby、Java 等，只是在这一点上真的想看看这是否可能。

# php - 带空值的数组映射

> ID：12694896
> 
> 赞同：1
> 
> 时间：2012-10-02T17:04:26.770
> 
> 标签：php, arrays

我使用以下方法获取一个名为的数组`$list`并将其转换为 URL：

```
function genIMG($sValue) {
return 'http://asite.com/'.$sValue.'?&fmt=jpg';
}
$IMGurls = array_map("genIMG", array_unique($list));
foreach($IMGurls as $imgLink) {
echo "<a href='". $imgLink ."'>". $imgLink ."</a><br />";
} 
```

`null`这可行，但我在数组中也有一些值。如何让数组映射忽略任何 null 值？否则它只会创建类似这样 `http://asite.com/?&fmt=jpg`的东西：没有文件名，因为它是空的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T17:06:48.870

您`$list`必须包含空值使用`array_filter`

```
 $IMGurls = array_map("genIMG", array_unique(array_filter($list))); 
```

例子

```
$list = array(1,2,3,4,5,"","",7);

function genIMG($sValue) {
    return 'http://asite.com/' . $sValue . '?&fmt=jpg';
}

$IMGurls = array_map("genIMG", array_unique(array_filter($list)));
foreach ( $IMGurls as $imgLink ) {
    echo "<a href='" . $imgLink . "'>" . $imgLink . "</a><br />";
} 
```

输出

```
http://asite.com/1?&fmt=jpg
http://asite.com/2?&fmt=jpg
http://asite.com/3?&fmt=jpg
http://asite.com/4?&fmt=jpg
http://asite.com/5?&fmt=jpg
http://asite.com/7?&fmt=jpg 
```

# php - PHP 似乎无法识别这个“if then”语句

> ID：12694897
> 
> 赞同：0
> 
> 时间：2012-10-02T17:04:28.903
> 
> 标签：php, wordpress, if-statement

我有 2 个 wordpress 模板，每个模板都使用不同的标题。在每个标题中，我为我的 $pagekids 元素赋予了一个值。例如：

```
<?php $pagekids = 'yes'; ?> 
```

然后每个模板调用一个插件，其中我有以下语句：

```
if ($pagekids == 'yes' ) {$imageSubPath = 'bg-images';}
else {$imageSubPath = 'bg-kidimages';} 
```

这允许标题选择不同目录中的图像（bg-images 或 bg-kidimages）。但是，这不起作用，两个模板总是在同一目录中选择图像。但是，如果我在页面上显示 $pagekids 的值，它会根据模板显示正确的值。

知道为什么这不起作用吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:33:16.230

至少问题不在于您提供的 php，因为它是正确的。

# c - 嵌套结构和指针

> ID：12694902
> 
> 赞同：5
> 
> 时间：2012-10-02T17:04:44.507
> 
> 标签：c, pointers, structure

几乎每次我跳回 C 项目时，我都会把它搞砸。尝试访问结构中的结构时出现段错误。假设我有以下（简化的）游戏结构：

```
struct vector {
    float x;
    float y;
};

struct ship {
    struct vector *position;
};

struct game {
    struct ship *ship;
} game; 
```

还有一个初始化船的函数：

```
static void
create_ship(struct ship *ship)
{
    ship = malloc(sizeof(struct ship));
    ship->position = malloc(sizeof(struct vector));
    ship->position->x = 10.0;
} 
```

然后在 main() 中：

```
int main() {
    create_ship(game.ship);
    printf("%f\n", game.ship->position->x); // <-- SEGFAULT
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T17:07:41.957

您是`game.ship`按值传递的，因此`create_ship`变量内部`ship`只是该指针的副本，它只是更改了副本。当函数返回时，指向你`malloc`ed 的指针丢失并且函数的效果在它之外不可见，除了内存泄漏。

您需要将指针传递给指针并`game.ship`通过它进行修改：

```
static void
create_ship(struct ship **ship)
{
    *ship = malloc(sizeof(struct ship));
    (*ship)->position = malloc(sizeof(struct vector));
    (*ship)->position->x = 10.0;
} 
```

和

```
create_ship(&game.ship); 
```

或者，也许更好的方法是按照 Johnny Mopp 在评论中建议的那样，从函数返回指针，而不是修改它之外的指针：

```
static struct ship* create_ship()
{
    struct ship* s = malloc(sizeof(struct ship));
    s->position = malloc(sizeof(struct vector));
    s->position->x = 10.0;

    return s;
} 
```

和

```
game.ship = create_ship(); 
```

当然，你所`malloc`编辑的，不要忘记`free`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:07:52.130

您应该通过引用传递：

```
static void create_ship(struct ship **ship); 
```

和

```
create_ship(&game.ship); 
```

否则分配的结构将被丢弃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T17:07:50.443

您的`create_ship`函数实际上并没有改变`game.ship`，因为参数是*按值传递的*。在该`create_ship`函数中，仅更改了一个*副本。*所以在调用之后，`game.ship`保持未初始化（或者`NULL`，或者调用之前的任何值）。因此，您也会丢失对新分配的船的引用，并泄漏内存。

您需要将指针传递给指针才能更改它：

```
static void create_ship(struct ship **ship)
{
    *ship = malloc(sizeof(struct ship));
    // ... 
```

在通话中：`create_ship(&game.ship);`

您还可以选择将新船作为函数返回值传递：

```
static ship *create_ship()
{
    struct ship *ship = malloc(sizeof(struct ship));
    // ...

    return ship;
}

// ...

game.ship = create_ship(); 
```

# javascript - Joomla 中的简单确认弹出窗口

> ID：12694907
> 
> 赞同：1
> 
> 时间：2012-10-02T17:05:05.007
> 
> 标签：javascript, forms, joomla, content-management-system, joomla2.5

我将以下代码添加到我的 Joomla 网站上的删除按钮中：

```
$doTask = "if (document.adminForm.boxchecked.value==0){
    alert('$message');
}                                  
 else { 
      Joomla.submitbutton('$task')
 }";

$i18n_text = JText::_($text);
$class = JButton::fetchIconClass($name);

$html = "<a href=\"javascript: void();\" onclick=\"$doTask\" class=\"toolbar\">\n";
$html .= "<span class=\"$class\">\n";
$html .= "</span>\n";
$html .= "$i18n_text\n";
$html .= "</a>\n"; 
```

该按钮工作正常，我可以删除记录。我遇到的问题是，在删除记录之前，我想显示一个弹出窗口，询问用户是否确定要删除。应该有一个“确认”按钮和一个“取消”按钮。如果单击确认按钮，则删除记录，如果单击取消按钮，则不会发生删除。

我不确定如何让这个功能发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:29:59.957

用此代码替换您的 else 部分：

```
else { 
   if(confirm('Are you sure you want to delete ?'))      
      Joomla.submitbutton('$task');
} 
```

# javascript - 在文档加载时触发 Fancy Box

> ID：12694908
> 
> 赞同：0
> 
> 时间：2012-10-02T17:05:07.733
> 
> 标签：javascript, jquery, jquery-plugins, fancybox

我正在尝试做一些相对简单的事情，那就是在文档加载期间触发 Facnybox jQuery 插件弹出。我正在使用 ASP，但这应该无关紧要。我有以下标签：

```
<a id = "lnkGId" href = "" name = "lnkGId" runat = "server"  ></a> 
```

在 JavaScript 中，我执行以下操作：

```
//check to ensure the link has an href

$(document).ready(function () {
    if($("a[id *= 'lnkGId']").length > 0 && $("a[id *= 'lnkGId']").attr("href") !="" ){
    console.log($("a[id *= 'lnkGId']").attr("href"));
    }
}); 
```

锚在服务器端动态设置它的href。id 有点混乱，这就是我使用 *= 选择器的原因。这部分有效，如果我在锚点有一个 href 时运行上述内容，我会看到正确的 href 登录到控制台中。

现在我要做的就是在页面加载并且锚点 href 有值时触发 Faccybox。我在上面发布的 if 条件中尝试了很多不同的方法：

# 1

```
$("a[id *= 'lnkGId']").fancybox().trigger("click"); 
```

# 2

```
 var url = $("a[id *= 'lnkGId']").attr("href");
        $.fancybox({
            href: url, 
            modal: true,
            'fitToView'     : false,
            'width'         : '600px',
            'height'        : '560px',
            'autoSize'      : false,
            'closeClick'    : true              
        }); 
```

# 3

```
 $("a[id *= 'lnkGId']").fancybox({
                'fitToView'     : false,
                'width'         : '600px',
                'height'        : '560px',
                'autoSize'      : false,
                'closeClick'    : true

            });
$("a[id *= 'lnkGId']").trigger("click") 
```

我没有收到任何错误。我正在做一个 console.log("complete"); 在我应用了上面的代码以确保它不会在很长一段时间内被破坏之后。一切似乎都处于工作状态，我只是无法触发它！有人对我可以在这里做什么有任何建议吗？任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:11:20.493

如果使用 Fancybox v1.3.4，请查看[http://fancybox.net/blog](http://fancybox.net/blog) No.6

对于 v2.x，请查看[http://fancyapps.com/fancybox/#useful](http://fancyapps.com/fancybox/#useful) No. 12

此外，如果您只想在第一次访问期间（而不是每次重新加载页面时）启动 fancybox，那么您可以使用 cookie。

在此处检查该方法：[https ://stackoverflow.com/a/8305703/1055987](https://stackoverflow.com/a/8305703/1055987)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:19:43.407

href 的 url 是图像还是文本内容？如果它返回一个网页，您可以使用 iframe，例如

```
 $.fancybox('<iframe width="600" height="560" src="' + url + '"></iframe>',
    {
      'width': 600,
      'height': 560
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:59:14.483

感谢您的回复。

我的特殊情况的问题最终是我的锚标签上没有类`fancybox.iframe`。一旦我添加它，事情就开始按预期工作。

# php - 在 PHP 中重新定义图像高度

> ID：12694909
> 
> 赞同：0
> 
> 时间：2012-10-02T17:05:10.027
> 
> 标签：php, image

我有动态加载的图像，不能大于 115px。我从外部来源获得它们，所以我无法控制它。

我可以通过以下方式获得图像尺寸：

```
$list = getimagesize($imagePath);
$width = $list[0];
$height = $list[1]; 
```

但现在如果它们大于 115px，我需要调整大小。试过这个，但它没有保持比例：

```
$height = round(($height * $width) / $width); 
```

有人可以帮我弄这个吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:09:39.930

您应该考虑使用[imagecopyresampled](http://www.php.net/manual/en/function.imagecopyresampled.php)或[imagecopyresized](http://php.net/manual/en/function.imagecopyresized.php)。

如果您希望保持图像正确缩放，您将不得不投入更多的算术，但这应该不会太糟糕。

这是一些用于缩放图像的伪代码：

```
$max_height = 115;
if ($height > $max_height)
{
    $scale = $max_height / $height;
    $height = intval($height * $scale);
    $width  = intval($width  * $scale);
} 
```

*如果高度和*宽度必须小于 115 ，以下是更通用的形式：

```
$max_size = 115;
if (max($height, $width) > $max_size)
{
    $scale = $max_size / max($height, $width);
    $height = intval($height * $scale);
    $width  = intval($width  * $scale);
} 
```

这保证了图像的最大尺寸（高度或宽度）不会大于 115。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:12:27.140

If you mean they can't be larger than 115x115\. The process you'd have to go by is something like:

If wider than 115, set width to be 115px and height = height/original_width * 115;

I have some code from an image uploader script which does this

```
 list($Width, $Height) = getimagesize($row["img_file"]);

    if(($Width > $Height) && ($Width > 115))
    {
        $Height = ceil(($Height / $Width) * 115) ;
        $Width = 115;
    }
    elseif(($Height > $Width) && ($Height > 115))
    {
        $Width = ceil(($Width / $Height)* 115);
        $Height = 115;
    }
    elseif(($Height > 115) && ($Height == $Width))
    {
        $Height = 115;
        $Width = 115;
    } 
```

After you have the correct dimensions you can resize the image using imagecreatefromjpeg/png/gif and then imagecopyresampled.

Another section of code from the image upload script which resized images from URLs using the calculated dimensions

```
 if ($extension == "png")
        {
            $image = imagecreatefrompng($URLofImage)or die("Width Of Image: ".$widthofImage." Height Of Image: ".$heightofImage." Height: ".$height." Width: ".$width);
            $image_p = imagecreatetruecolor($widthofImage, $heightofImage)or die("Width Of Image: ".$widthofImage." Height Of Image: ".$heightofImage." Height: ".$height." Width: ".$width);
            imagealphablending($image_p, false);
            $color = imagecolorallocatealpha($image_p, 0, 0, 0, 0);
            imagesavealpha($image_p, true);
            list($width, $height) = getimagesize($URLofImage);

            imagecopyresampled($image_p, $image, 0, 0, 0, 0, $widthofImage, $heightofImage, $width, $height);
            imagepng($image_p, "./images/thumbs/".$name, 9);

            return ("./images/thumbs/".$name);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:45:09.897

根据您的最低浏览器要求，并且这确实适用于 HTML 输出，您可以在 html 中处理它，并为自己节省一些处理。

```
<img alt='image alt' src='imagesrc' style='max-width:115px; max-height:115px; height:auto; width:auto;' /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T17:12:57.700

你应该直接看[http://www.php.net/manual/en/function.getimagesize.php#97564](http://www.php.net/manual/en/function.getimagesize.php#97564)

```
$max_width = 115; 
$max_height = 115;

list($width, $height) = getimagesize($imagePath);
$ratioh = $max_height/$height;
$ratiow = $max_width/$width;
$ratio = min($ratioh, $ratiow);

// New dimensions
$width = intval($ratio * $width);
$height = intval($ratio * $height); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T17:17:38.947

你的比例可以说是高/宽比，所以把它放到一个变量中：

> $比率= $宽度/$高度；

如果你有这样的图像：100x200 像素，你的比例是**1/2**。如果您想要一个高度为 20 像素的图像，则宽度应为 10 像素。

> $newHeight = 20;
> 
> $newWidth = round($newHeight * $ratio); //给你10

还可以说您想将宽度设为 10px，只需使用它来查找新宽度：

> $newWidth = 10;
> 
> $newHeight = round($newWidth / $ratio);

因此，您应该至少指定一个边长，然后 ratio 将帮助您找到另一边。

# c# - Metro 应用程序中的屏幕变黑

> ID：12694915
> 
> 赞同：1
> 
> 时间：2012-10-02T17:05:37.140
> 
> 标签：c#, xaml, microsoft-metro

当我从横向切换到填充视图并第一次从一个页面导航到另一个页面时，我的应用程序变黑了。后来它工作正常，但第一次它变黑了。当我第一次从填充切换到横向视图并从一个页面导航到另一个页面时，它甚至会变黑。后来它工作正常，但第一次它变黑了。我的代码是用 C# 和 XAML 编写的。当我从横向切换到填充时，我没有改变任何东西，反之亦然。仅当视图从捕捉更改为填充/横向或反之亦然时，我才更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:57:10.037

与其调整现有内容的大小，不如让一组单独的内容更容易隐藏起来，直到用户移动到快照模式。

使用 VisualStateGroups 为给定的全屏/快照视图隐藏/显示适当的内容集。

因此，不要调整现有字段的大小：

```
<Page>
    <Grid>
        <Grid x:Name="FullScreenLayout">...
        </Grid>
        <Grid x:Name="SnappedScreenLayout">...
        </Grid>
        <VisualStateManager.VisualStateGroups>

            <!-- Visual states reflect the application's view state -->
            <VisualStateGroup x:Name="ApplicationViewStates">  
                <VisualState x:Name="Snapped">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="FullScreenLayout" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SnappedScreenLayout" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                        </ObjectAnimationUsingKeyFrames>     
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</Page> 
```

当我们处于捕捉模式并显示我们的捕捉模式布局时，这里只是隐藏全屏布局。还有更多的 Xaml，但它包含在内，并允许您提供特定于视图的布局，这使 Xaml 更简洁、更易于阅读。

# css - 在引导响应网格中裁剪图像的纵横比

> ID：12694919
> 
> 赞同：17
> 
> 时间：2012-10-02T17:05:57.653
> 
> 标签：css, twitter-bootstrap

**问题：**我正在尝试将图像放置在 Twitter 的 Bootstrap 的[响应式网格系统](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)中，因此它们将被缩放到给定的空间中（对于不同的设备，列的响应式 CSS 大小会有所不同）。我希望它们适合纵横比——假设它是一个正方形。

[如果我希望 Bootstrap 重新调整图像以适应网格设计，则标准 CSS 裁剪技术](http://cssglobe.com/3-easy-and-fast-css-techniques-for-faux-image/)不起作用。负边距仅适用于切割顶部和底部 - 当必须切割图像的高度并且宽度保持不变时（例如，将纵向图像放入正方形）。

我发现[这种](http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio)指定纵横比以减少宽度而保持高度不变（将横向图像放入正方形）的技术适用于 Bootstrap 的缩放。

[尺寸为 1600x400 和 400x1600 的裁剪图像的示例（jsfiddle）](http://jsfiddle.net/EZLA5/6/)。到目前为止，我在当前的 Chrome 和 Safari 中检查了它。**编辑：**固定也可以在 Firefox 中使用。

**问题：**我怎样才能以一种方式同时做到这一点：切割宽度和高度。如何对图像进行任意裁剪，选择矩形，以便由 Bootstrap 正确重新缩放？在不知道图像大小的情况下，如何裁剪到某个纵横比？

谢谢你的任何想法！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-12T12:39:40.040

如果您的解决方案只需要在现代浏览器中工作并且 img-tag 不是强制性的，那么使用图像作为背景在响应式设计中经常帮助我。您可以轻松地将背景放置在中心并使其适合其容器。

[http://jsfiddle.net/willemvb/wAqSV/2/](http://jsfiddle.net/willemvb/wAqSV/2/)

# https - 通过代理对子域的 Https 请求失败，单声道 404 响应

> ID：12694922
> 
> 赞同：0
> 
> 时间：2012-10-02T17:06:26.997
> 
> 标签：https, proxy, mono, httpwebrequest, http-status-code-404

我有以下问题，我使用 HttpWebRequest 从使用单声道的应用程序内部的 web 获取一些数据。应用程序还使用代理（未经身份验证的鱿鱼）。大多数请求都转到[https://service.domain.com](https://service.domain.com)并且效果很好，但是当我尝试访问[https://data.domain.com](https://data.domain.com)时，我得到 404 响应。

如果我交换请求并且第一个请求转到[https://data.domain.com](https://data.domain.com) - 它可以工作，但是对[https://service.domain.com](https://service.domain.com)的下一个请求将失败。

我只在带有 https 和代理的单声道上遇到这个问题。

有什么建议或解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:51:13.550

如果这是我上周（实际上是星期五）注意到的相同错误，我认为您会发现相同的 HttpWebRequest 对象（或支持连接对象 - 我从未检查过）正在被重用，但连接仍然存在打开旧服务器（在您的情况下为[https://service.domain.com](https://service.domain.com)）并且新的 GET/POST 调用重新使用该连接，而不是像它应该的那样强制它连接到 data.domain.com 。

我解决它的方法是将第一台服务器的 KeepAlive 设置为 false（无论如何我只发出了 1 个请求），这样当我切换到第二台服务器时，它会强制重新连接（此时我将 KeepAlive 设置回 true） .

另一种方法可能是同时创建 2 个 Web 请求（每个服务器一个），这样它们就不会被重用。

我应该在星期五提交这个，但没有解决它，因为忘记了。你只是提醒了我，所以我只是提交了它：

[https://bugzilla.xamarin.com/show_bug.cgi?id=7599](https://bugzilla.xamarin.com/show_bug.cgi?id=7599)

随意将自己添加到抄送列表中，并提供您认为我可能错过的任何其他信息。

# c# - 在 Windows Phone 7 中制作按钮闪烁

> ID：12694923
> 
> 赞同：0
> 
> 时间：2012-10-02T17:06:28.137
> 
> 标签：c#, windows-phone-7, xaml, button

嗨，在我的应用程序中，我希望我的按钮闪烁片刻，以提示按哪个按钮按哪个顺序。任何人都知道如何做到这一点，我在想也许隐藏按钮然后暂停一段时间然后再次启用它，但不确定这是一个好主意。

```
private void display_combination()
    {
        for (int i = 0; i < MAX_INPUT; i++)
        {
            switch(combination[i])
            {
                case 0: button_flash(this.Up_Button); break;
                case 1: button_flash(this.Down_Button); break;
                case 2: button_flash(this.Left_Button); break;
                case 3: button_flash(this.Right_Button); break;                    
            }
        }
    }

void button_flash(Button b)
    {
        b.IsEnabled.Equals(0);
        //perhaps a pause her and then enable the button again?

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:23:03.333

这里最好的方法是使用一个故事板，在完成时切换目标。这里有一些资源可以帮助您开始：

*   [故事板动画简介](http://msdn.microsoft.com/en-us/library/cc189019%28v=vs.95%29.aspx)
*   [这是在运行时设置 Storyboard 目标的方法](https://stackoverflow.com/questions/12694136/windows-phone-storyboard-targetname-in-runtime)

# java - 在 ArrayList 中查找可被 3 整除的数字

> ID：12694937
> 
> 赞同：5
> 
> 时间：2012-10-02T17:07:07.207
> 
> 标签：java, arraylist, iteration

因为我正在探索 ArrayLists，所以我这样做纯粹是为了好玩。我知道如何使用模运算符来检查它是否可以被 3 整除。但是，知道如何将它与 arrayList 一起使用。

```
public static void main(String[] args) {

    //Print out only a set of numbers divisible by 3 from an array.

    ArrayList<Integer> division = new ArrayList<Integer>();

    //Add a set of numbers.
    Division.add(10);
    Division.add(3);
    Division.add(34);
    Division.add(36);
    Division.add(435);
    Division.add(457);
    Division.add(223);
    Division.add(45);
    Division.add(4353);
    Division.add(99);

    //How can I fix the logic below?
    if(Division.get() % 3 == 0)

} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T17:08:45.313

您需要遍历列表中的项目，例如，使用增强的 for 循环语法：

```
for (int i : Division) {
    if (i % 3 == 0) {
        System.out.println(i + " is divisible by 3");
    }
} 
```

笔记：

*   您应该应用 java 命名约定。特别是，变量名以小写开头（常量除外）：`Division`=> `division`。
*   你的`division`对象实际上是一个数字列表，所以`numbers`可能是一个更好的名字。

[有关Java 教程](http://docs.oracle.com/javase/tutorial/collections/interfaces/list.html)中的列表的更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T17:09:33.490

```
for(Integer number: division){
  if(number % 3 == 0){
    System.out.println(number);
  }
} 
```

作为 Java 命名约定：只有类以大写字母开头。变量以小写字母开头，所以这样更好：`ArrayList<Integer> division = new ArrayList<Integer>();`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T17:14:58.200

或者，您也可以使用“正常” for 循环：

```
for (int i = 0; i < Division.size(); i++)
     {
       if(Division.get(i) % 3 == 0)
       {
        System.out.println(Division.get(i));
       }
     } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T17:11:24.847

First of all, you should declare your variable starting with lowercase alphabet or underscore..

Second you need to iterate over your ArrayList to fetch it's element, and your ArrayList should be of `Wrapper Type` Integer not of `Primitive type` int..

```
ArrayList<Integer> division = new ArrayList<Integer>();
// Initialize your arraylist here
for (Integer i : division) {
    if (i % 3 == 0) {
        System.out.println("Number : " + i + "is divisible by 3");
    }
} 
```

Take a look at this [blog](http://javarevisited.blogspot.in/2012/03/how-to-loop-arraylist-in-java-code.html).. It has wide examples covering how to iterate over `List`..

# authentication - 如何验证来自文件操作的用户

> ID：12694938
> 
> 赞同：0
> 
> 时间：2012-10-02T17:07:06.800
> 
> 标签：authentication, box-api

有没有一种方法可以验证来自**文件操作**的用户而不需要票证-> 重定向-> 令牌？

这是场景：

1.  用户将我们的网络应用程序添加到他们在 Box.com 网站上的帐户
2.  用户选择文件点击“使用我们的应用程序打开”（文件操作 - 弹出窗口）
3.  我们的应用程序接收文件 URL、文件身份验证令牌等参数。
4.  用户希望从我们的应用程序向文件添加评论

我们如何进行 API 调用以向文件添加评论？在上面的整个流程中，我们没有 API 调用所需的用户身份验证令牌，即使用户添加了应用程序并与之交互。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:33:32.460

您从文件操作调用中收到的文件身份验证令牌参数可用于对我们发送给您的文件进行 set_comment 调用。

# css - 自动换行 CSS 属性不影响表格单元格

> ID：12694941
> 
> 赞同：17
> 
> 时间：2012-10-02T17:07:14.580
> 
> 标签：css, css-tables, word-wrap

我有一个长字...

`p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCx+wnDhlr7GqHiH6lAaPPuN5F7RjUrtvGyxxZkClJsLaTDeqg/FuJXU7RYdPQ2Ka++tfw0Z9+SRKatLUQQeCqLK8z1/V4p7BaJKPkegMzXgWGnFVmz1tdLFiYUGq0MvVgqWiepcTFmwgSd9g1pGRiCSDHJUDwcc+NidiW4/ixw4QIDAQAB"`

...我正在尝试放入表格单元`<td>`格`word-wrap: break-word;`（

## （**[这是活生生的例子](http://aahank.com/jots/2012/10/setting-up-google-apps-for-your-domain-with-amazon-route-53.html)**）

[![截图 - 点击放大！](../Images/3753cd1deda8736d2d8866acd84c9e29.png)](https://i.stack.imgur.com/GdVbE.png)
**点击图片放大！**

文本在水平方向上继续，并且不换行。我应该在这里使用哪个 CSS 属性？

* * *

## 编码

```
<table>
     <thead>
          <tr>
                <th>Name
                </th><th>Type
                </th><th>Value
                </th><th>TTL
          </th></tr>
     </thead>
     <tbody>
          <tr>
                <td>wtnmail._domainkey.whatthenerd.com.</td>
                <td>TXT</td>
                <td>"v=DKIM1; k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCx+wnDhlr7GqHiH6lAaPPuN5F7RjUrtvGyxxZkClJsLaTDeqg/FuJXU7RYdPQ2Ka++tfw0Z9+SRKatLUQQeCqLK8z1/V4p7BaJKPkegMzXgWGnFVmz1tdLFiYUGq0MvVgqWiepcTFmwgSd9g1pGRiCSDHJUDwcc+NidiW4/ixw4QIDAQAB"</td>
                <td>300</td>
          </tr>
     </tbody>
</table> 
```

## CSS

根据 j08691 的回答，我现在正在使用它：

```
table {
   table-layout: fixed;
   word-break: break-all;
   word-wrap: break-word;
} 
```

结果是这样的：

[![截图 - 点击放大！](../Images/54388ff023f28c8799a6d29a92ed8b99.png)](https://i.stack.imgur.com/c1MMQ.png)
**点击图片放大！**

是的，表格不像以前那样超级时尚，但现在我至少可以确定数据显示（即使浏览器调整大小，即更小的分辨率）。

*仍在寻找一个优雅的解决方案，如果有的话。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T17:12:28.107

除了您`word-wrap`对单元格的规则之外，将 CSS 规则添加`table-layout:fixed`到您的表格（可能还有宽度）。

**[jsFiddle 示例](http://jsfiddle.net/j08691/FcVSc/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T17:13:16.337

`word-break: break-word;``.entry-content table td`在 Chrome 的检查器中编辑时为我工作。

要将其仅应用于有问题的`td`单元格，您可以创建一个特定的类并将其添加到 td 的 HTML 中：

```
.break-word {
    word-break: break-word; 
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-23T12:51:28.220

对于仍然遇到断词问题的人来说，也许是一个提示：我必须添加`white-space: normal`，因为它设置为“nowrap”

特别是如果您使用引导程序，一些元素，如标签有 `white-space: nowrap`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T17:22:31.957

您的文本**已**换行 - 请注意它是如何中断的，`k=rsa;`因为您在那里有一个空格。但是价值没有空间`p=`可以突破。

但是，您可以`word-break: break-all;`向该元素添加规范，这可能更接近您正在寻找的内容。请参阅[http://jsfiddle.net/zu6Eh/](http://jsfiddle.net/zu6Eh/)。

# php - preg_match 不匹配重音字符

> ID：12694946
> 
> 赞同：2
> 
> 时间：2012-10-02T17:07:51.757
> 
> 标签：php, regex

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:08:01.493

我不太确定你想在这里实现什么。

```
preg_match('/[[:^print:]]/u', '$n, $m); 
```

准确匹配重音字符（您可以使用`[[:^print:]]`以及在`[^[:print:]]`此处产生相同的结果）。

如果你`(.*)`在你的模式中使用它通常使用`U`修饰符（不贪婪）很有用。在您的第一个示例中，这将产生以下结果：

```
$n = "Baden-Württemberg";
preg_match ("/(.*)([^[:print:]])(.*)/uU", $n, $m);
print_r ($m);

Array 
( 
[0] => Baden-Wü 
[1] => Baden-W 
[2] => ü 
[3] => 
) 
```

# apache-flex - Drag drop data between 2 advancedDataGrid and clone instance

> ID：12694948
> 
> 赞同：1
> 
> 时间：2012-10-02T17:07:51.490
> 
> 标签：apache-flex, drag-and-drop, advanceddatagrid, arraycollection

I have 2 advanceddatagrid with dataprovider based on an arraycollection of an instanciated actionscript class.

I want to copy and duplicate data from the datagrid1 to the datagrid2... For duplicate data it works fine, no problems .... but when I want to copy, in fact I want to clone the object from the grid1 to the grid2 ...

How can I do that ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:31:05.300

您需要 dragMoveEnabled 属性。如果值为 false，则只能将项目复制到放置目标。对于副本，拖动启动器中的项目不受放置的影响。（参见[http://livedocs.adobe.com/flex/3/html/help.html?content=dragdrop_4.html](http://livedocs.adobe.com/flex/3/html/help.html?content=dragdrop_4.html)）

# css - CSS - 将 div 推到右浮动内容下方

> ID：12694951
> 
> 赞同：1
> 
> 时间：2012-10-02T17:08:15.567
> 
> 标签：css, layout, html, css-float, margin

我在使用浮点数时遇到了困难。现在我正在尝试让一些内容浮动到屏幕的右侧，我希望非浮动内容在它下方。然而事实证明，非浮动占据了屏幕的左侧。然后我为非浮动添加了上边距，以便将其向下推，但奇怪的是它不起作用。[这](http://jsfiddle.net/BCJ6C/86/)是我在 Fiddle 中的示例代码。

我现在该怎么办？有什么方法可以解决这个问题而不必使用绝对位置？我试图避免它，因为它在使用不同的浏览器时会导致问题。每一个建议都值得赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:14:56.407

也许我误解了您的问题，但是为了将非浮动内容推送到浮动内容下方，您应该设置`CLEAR:BOTH;`为非浮动元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T17:09:38.670

`<div style="clear:both"></div>`在所有浮动元素之后使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:16:58.440

添加`clear: right;`到`#preamble, #explanation`CSS 规则。

[小提琴。](http://jsfiddle.net/BCJ6C/88/)

# git - git-bisect 创建修改后的文件

> ID：12694952
> 
> 赞同：3
> 
> 时间：2012-10-02T17:08:21.867
> 
> 标签：git, bisect

我在尝试使用`git-bisect`来查找 jquery git 存储库中的特定更改时遇到了一个奇怪的问题： bisect 命令似乎创建了阻止 bisect 进程继续进行的修改文件。这些是我首先运行的命令：

```
git clone https://github.com/jquery/jquery.git
cd jquery
git bisect start
git bisect bad
git bisect good 2aa67026ebe6bea90fd137fc99b4c9422977e3f0 
```

此时我得到输出：

```
Bisecting: 1977 revisions left to test after this (roughly 11 steps)
[3e5520fbdc7231b3f38e145020b40524c1e6654d] Tagging the 1.4.3rc2 release. 
```

但是现在，当我运行时`git status`，输出是：

```
# Not currently on any branch.
# You are currently bisecting.
#    (use "git bisect reset" to get back to the original branch)
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   build/google-compiler-20091218.jar
#   modified:   build/js.jar
#   modified:   test/data/text.php
#   modified:   test/delegatetest.html
# 
```

四个文件显示为已修改。如果我然后运行`git bisect bad`，我会收到一条错误消息，指出我的本地更改将被结帐覆盖。

我做错了什么或误解了它的`git-bisect`工作原理吗？此问题的任何解决方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:41:36.433

您可能应该输入`git bisect reset HEAD`命令来清理二分状态并返回原始 HEAD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:16:52.097

我希望您的 gitignore 文件在两个修订版之间发生了变化，因此 git 现在认为这 4 个文件与预期的不同。

Try a `git diff' [(man page)](http://www.kernel.org/pub/software/scm/git/docs/git-diff.html) with the appropriate option such as --cached for your gitignore, exclude files and those modified files.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T23:26:56.410

除了 .gitignore 更改之外，如果您有一些其他进程正在运行并不断生成这些文件，您也可以得到这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-13T17:04:35.647

在我看来，当父文件更改时，这些文件似乎是由某种描述的观察者自动生成的。

因此，只要 git 签出一个更改其父级的提交，就会生成新文件。当您尝试进行下一个等分时，它们将被新提交覆盖。默认情况下，Git 不允许这种情况发生，因此取消了对分。

解决方案是删除生成的文件。大多数时候我发现以下工作：

```
git stash
git stash drop 
```

但是，在我目前正在处理的回购中，这似乎没有做生意。相反，我必须将它们添加到 repo 的分阶段更改区域，然后将分阶段更改区域重置为 HEAD 以通过以下方式摆脱它们

```
git add .
git reset --hard HEAD 
```

之后 bisect 正常工作 - 至少在提交更改创建它们的任何文件并且它们再次重新生成之前。

# jquery - jQuery - this.text() 的问题

> ID：12694953
> 
> 赞同：1
> 
> 时间：2012-10-02T17:08:32.057
> 
> 标签：jquery, if-statement, this

我不知道如何正确描述我的问题，但我认为我只需要朝着正确的方向努力。我做了一个[小提琴](http://jsfiddle.net/vhKA9/1/)，希望能解释我的问题。我有一个带有 onClick 事件处理程序的链接列表。相应的函数应该将列表项的文本传递给一个新函数，该函数将字符串与另一个字符串进行比较。据我了解，第一个列表项（测试）应该提醒“酷”（因为字符串完全匹配），但它不会。

有任何想法吗？

我知道如果我使用`e.target.name`而不是，这会起作用`$(this).text()`，但我需要传递链接文本而不是属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:12:42.180

您可以使用`$.trim`实用程序功能：

```
clickFunc($.trim($(this).text())); 
```

[http://jsfiddle.net/cncfA/](http://jsfiddle.net/cncfA/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:11:20.213

Filter down to the anchor tag.

```
$('a', this).text(); 
```

Otherwise you may get empty text nodes from the li.

[http://jsfiddle.net/vhKA9/2/](http://jsfiddle.net/vhKA9/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:13:38.217

你的 li 没有文本..它们包含有文本的 <a> .. 尝试：

```
$(this).find('a').text() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T17:14:03.537

我注意到您将`click`事件绑定到`li`列表中的元素，而不是`a`元素。当您将其更改为绑定到 时`a`，它会按预期工作：

[http://jsfiddle.net/gromer/WdVbk/](http://jsfiddle.net/gromer/WdVbk/)

如果您真的想要元素`click`上的事件`li`，请更改获取文本以发送到函数的方式：

`clickFunc($(this).find('a').text());`

[http://jsfiddle.net/gromer/FVSuz/](http://jsfiddle.net/gromer/FVSuz/)

编辑：是的，我的 Fiddles 中有一些`console.log`语句，如果你在 IE 中，它可能会中断。

# actionscript-3 - 仅限 Windows 上的 AS3 错误 2038

> ID：12694957
> 
> 赞同：0
> 
> 时间：2012-10-02T17:08:40.387
> 
> 标签：actionscript-3, flash, upload, filereference, ioerror

希望有人可以帮助我！

我在 Flash 中编写了一个简单的在线 3d 编辑器——它即将发布给一些客户，但文件上传器有一点小故障，它刚刚抬起了丑陋的脑袋。使用 FileReference 将媒体上传到 https 页面，它在 OSX 上就像它所构建的梦想一样工作，但在 Windows 上，它在每个浏览器上都返回错误 2038。有没有人遇到过这个？

非常感谢任何帮助！

```
public class CustomFileReferenceList extends FileReferenceList {

    private var uploadURL:URLRequest;
    private var pendingFiles:Array;

    public static var length:int = 0;
    public static var arrLen:int = 0;

    public function CustomFileReferenceList() {
        uploadURL = new URLRequest();
        uploadURL.url = "https://___";
        var rqd:URLVariables = new URLVariables();
        uploadURL.method = URLRequestMethod.POST;
        rqd.sessionId = Main.sessionId;
        uploadURL.data = rqd;
        initializeListListeners();
    }

    private function initializeListListeners():void {
        addEventListener(Event.SELECT, selectHandler);
        addEventListener(Event.CANCEL, cancelHandler);
    }

    private function doOnComplete():void {
        //var event:Event = new Event(Uploader.LIST_COMPLETE);
        //dispatchEvent(event);
enter code here
    }

    private function addPendingFile(file:FileReference):void {
        pendingFiles.push(file);
        file.addEventListener(Event.OPEN, openHandler,false,0,true);
        file.addEventListener(Event.COMPLETE, completeHandler,false,0,true);
        file.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler,false,0,true);
        file.addEventListener(ProgressEvent.PROGRESS, progressHandler,false,0,true);
        file.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler,false,0,true);
        file.upload(uploadURL);
    }

    private function removePendingFile(file:FileReference):void {
        for (var i:uint; i < pendingFiles.length; i++) {
            if (pendingFiles[i].name == file.name) {
                pendingFiles.splice(i, 1);
                if (pendingFiles.length == 0) {
                    doOnComplete();
                }
                return;
            }
        }
    }

    private function selectHandler(event:Event):void {

        arrLen = length = fileList.length;
        pendingFiles = new Array();
        var file:FileReference;
        for (var i:uint = 0; i < fileList.length; i++) {
            file = FileReference(fileList[i]);
            addPendingFile(file);
        }
    }

    private function cancelHandler(event:Event):void {
        //var file:FileReference = FileReference(event.target);
    }

    private function openHandler(event:Event):void {
        var file:FileReference = FileReference(event.target);
    }

    private function progressHandler(event:ProgressEvent):void {
        var file:FileReference = FileReference(event.target);
    }

    private function completeHandler(event:Event):void {
        var file:FileReference = FileReference(event.target);
        length--;
        removePendingFile(file);
    }

    private function httpErrorHandler(event:Event):void {
        var file:FileReference = FileReference(event.target);
    }

    private function ioErrorHandler(event:Event):void {
        var file:FileReference = FileReference(event.target);
    }

    private function securityErrorHandler(event:Event):void {
        var file:FileReference = FileReference(event.target);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:28:16.013

在尝试了几乎所有解决方案之后，其他 Web 开发人员发现它可以正常工作，减去花哨的 url 名称，即引用 ourserver/thepage.php 而不是 ourserver/service。绝对疯了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T18:35:39.013

我今天有这个问题，就我而言，我是跟踪源（url / nativePath）的长度和destin的长度；我发现destin url的长度最多为256个字符。

为了解决这个问题，我被更改了目的地点（使用符号链接或网络驱动器）

例子：

```
// MAC remote path
var mSt:String  = "file:////MacBook-Pro-de-Jaime.local/Seagate/netShared/transport-machines/SoftDepot/";

// Windows Remote Drive (\\MacBook-Pro-...\transport-machines)
// Remote MAC as Windows Drive N
var mSt:String  = "file:///N:/SoftDepot/"; 
```

瞧，新名称减少了几个字符。

# ios - UIBezierPath 不会在屏幕上绘制

> ID：12694959
> 
> 赞同：0
> 
> 时间：2012-10-02T17:08:42.573
> 
> 标签：ios, drawing

我正在开发一个 iOS 应用程序，屏幕上有一些绘图，我只是在学习如何做。

[我从Showing UIBezierPath on view](https://stackoverflow.com/questions/3352256/showing-uibezierpath-on-view)复制了代码。这都放在了我的 FirstViewController 类的 viewDidLoad 函数中。

```
UIBezierPath *circle = [UIBezierPath
                    bezierPathWithOvalInRect:CGRectMake(75, 100, 200, 200)];  

//you have to account for the x and y values of your UIBezierPath rect 
//add the x to the width (75 + 200)
//add the y to the height (100 + 200)
UIGraphicsBeginImageContext(CGSizeMake(275, 300));

//this gets the graphic context
CGContextRef context = UIGraphicsGetCurrentContext();

//you can stroke and/or fill
CGContextSetStrokeColorWithColor(context, [UIColor blueColor].CGColor);
CGContextSetFillColorWithColor(context, [UIColor lightGrayColor].CGColor);
[circle fill];
[circle stroke];

//now get the image from the context
UIImage *bezierImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

UIImageView *bezierImageView = [[UIImageView alloc]initWithImage:bezierImage];
[self.view addSubview:circle]; 
```

现在这可行，并且在我看来完美地绘制了圆圈。我遇到的问题不是声明

```
UIBezierPath *circle = [UIBezierPath
                bezierPathWithOvalInRect:CGRectMake(75, 100, 200, 200)]; 
```

在一个单独的类中，我有一个 UIBezierPath 类型的变量。我在我的 FirstViewController.h 中包含了该类的实例变量，如下所示：

```
@property MyClass myClass; 
```

在那个班级：

```
@interface MyClass: UIView
@property UIBezierPath *shapeToBeDrawn; 
```

因此，与其在 viewDidLoad 中声明 UIBezierPath，不如说它只是我的类的一个实例变量。但是当我这样做时：

```
self.myClass.shapeToBeDrawn = [UIBezierPath
                    bezierPathWithOvalInRect:CGRectMake(75, 100, 200, 200)]; 
```

它不会在屏幕上绘制。

在 viewDidLoad 中声明它和让 UIBezier 变量成为另一个类的一部分有什么区别？

# php - PHP SimpleXML 用法的语法说明

> ID：12694960
> 
> 赞同：0
> 
> 时间：2012-10-02T17:08:44.473
> 
> 标签：php, syntax

我引用了 PHP 手册，但由于提前关闭 php 标记而出现语法错误 - 显然我是 php 的新手，但我只是试图将 xml 分配为 php 字符串。这里有什么问题？

```
<?php
$xmlstr = <<<XML //Need a clarification on '<<<XML' if possible 
<?xml version='1.0' standalone='yes'?> //This is closing my php script and causing error
<details>
<detail>
    <user>mcgraw</user>
    <dateA>09/11/1973</dateA>
    <inTime>9:00am</inTime>
    <outTime>6:00pm</outTime>
    <hours>9</hours>
    <notes>Monday</notes>
</detail>
<detail>
    <user>simpson</user>
    <dateA>08/23/1983</dateA>
    <inTime>9:00am</inTime>
    <outTime>5:30pm</outTime>
    <hours>8.5</hours>
    <notes>Thursday</notes>
</detail>
</details>
XML;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:11:20.777

That is called PHP's Heredoc syntax. It's there to help you mark up strings without worrying about quotes.

A simpler example would be:

```
$string = <<<STR_END_DELIMITER
This is some string, I can use ' and " freely, and it wouldn't break the string.
I can also use $variables inside, and they'll evaluate.
When I'm done with the string, I'll need to type STR_END_DELIMITER; on a fresh line, without anything else (not even spaces!)
STR_END_DELIMITER;
do_stuff_with_string($string); 
```

See the **[PHP Manual Entry on Strings](http://php.net/manual/en/language.types.string.php)** for more information.

# asp.net-mvc - 拒绝用户访问文件夹

> ID：12694964
> 
> 赞同：1
> 
> 时间：2012-10-02T17:09:01.060
> 
> 标签：asp.net-mvc, web-config

我有这个上传文件结构链接 localhost:58707/uploads/interaction/5/Chrysanthemum.jpg

我想拒绝所有用户直接访问“~/uploads”..

所以，我把它放在我的 web.config 中，就像我在其他问题中看到的那样：

```
 <location path="~/uploads"> //I've tried '/upload' and 'upload' too.
    <system.webServer>
      <directoryBrowse enabled="false" />
    </system.webServer>
  </location> 
```

但它不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T02:17:43.220

此解决方案适用于我的项目： [使用 App_Data](http://www.mikesdotnetting.com/Article/122/Simple-File-Download-Protection-with-ASP.NET)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:15:56.717

检查这个答案..

[拒绝访问 web.config 中的“admin”文件夹](https://stackoverflow.com/questions/4824494/deny-access-to-admin-folder-in-web-config)

还

[http://www.sitefinity.com/devnet/kb/sitefinity-3-x/how-to-restrict-the-access-to-a-given-folder-for-a-specific-role.aspx](http://www.sitefinity.com/devnet/kb/sitefinity-3-x/how-to-restrict-the-access-to-a-given-folder-for-a-specific-role.aspx)

# java - Java 邮件到 MIME

> ID：12694972
> 
> 赞同：1
> 
> 时间：2012-10-02T17:09:51.510
> 
> 标签：java, jakarta-mail, mime, mailto, rfc2368

寻找一个 Java 库来将 mailto 链接转换为 MIME 消息，或者至少填写 mailto 链接中包含的部分。我发现的唯一解决方案（一个 SO 问题）涉及使用`Desktop`我很确定我的应用程序不能依赖的解决方案（高度并发，在 Web 服务器上运行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:36:09.457

据我所知，简单的东西不存在。以下代码使用 Android 中的`Uri`类工作，从 Android 库中删除它并不复杂：

```
MailTo mailTo = MailTo.parse(unsubscribeUrl);

        Map<String, String> headers = mailTo.getHeaders();
        Set<Map.Entry<String, String>> values = headers.entrySet();

        for (Map.Entry<String, String> header : values) {
            message.addHeader(header.getKey(), header.getValue());
        } 
```

# php - 如何在一个视图上分隔两个验证表单？

> ID：12694973
> 
> 赞同：0
> 
> 时间：2012-10-02T17:09:52.133
> 
> 标签：php, forms, codeigniter

我在 CodeIgniter 的网站上的 ONE 视图中有一个登录表单和一个创建成员表单。

问题是，当我提交错误的表单时（在登录表单上按密码和电子邮件的空字段提交），它会触发创建成员表单中的电子邮件和密码字段，反之亦然。

我给了他们不同的提交按钮名称，但仍然无法将它们分开。

我已经尝试重命名字段，但是我对要重命名哪些值感到困惑，因为我必须将特定值提交到我的数据库。

这是创建成员表单和控制器：

```
<?php

            echo form_open('auth/create_member');

            echo form_label('',  'email', array('type'=>'text'));
            $data = array( 'name' => 'first_name', 'class' => 'input', 'placeholder' => 'First Name' );
            echo form_input($data, set_value('first_name'));
            echo "<span class='errors'>";
            echo form_error('first_name');
            echo "</span>";

            echo form_label('',  'last_name', array('type'=>'text'));
            $data = array( 'name' => 'last_name', 'class' => 'input', 'placeholder' => 'Last Name' );
            echo form_input($data, set_value('last_name'));
            echo "<span class='errors'>";
            echo form_error('last_name');
            echo "</span>";

            echo form_label('',  'email', array('type'=>'text'));
            $data = array( 'name' => 'email', 'class' => 'input', 'placeholder' => 'Email' );
            echo form_input($data, set_value('email'));
            echo "<span class='errors'>";
            echo form_error('email');
            echo "</span>";

            echo form_label('',  'password', array('type'=>'password'));
            $data = array( 'name' => 'password', 'class' => 'password', 'size' => 30, 'placeholder' => 'Password'  );
            echo form_password($data, set_value('sha1(password)'));
            echo "<span class='errors'>";
            echo form_error('password');
            echo "</span";

            echo form_label('',  'password2', array('type'=>'password'));
            $data = array( 'name' => 'password2', 'class' => 'input', 'size' => 30, 'placeholder' => 'Confirm Password'  );
            echo form_password($data, set_value('sha1(password2)'));
            echo "<span class='errors'>";
            echo form_error('password2');
            echo "</span>";

            echo form_submit('submit', 'Submit');
            echo form_close();
            ?>

function create_member() 
    {
        $this->load->library('form_validation');
        $this->form_validation->set_rules('first_name', 'First Name', 'trim|required');
        $this->form_validation->set_rules('last_name', 'Last Name', 'trim|required');
        $this->form_validation->set_rules('email', 'Email', 'trim|required|valid_email|is_unique[users.email]');
        $this->form_validation->set_rules('password', 'Password', 'trim|required'); 
        $this->form_validation->set_rules('password2', 'Confirm Password', 'trim|required|matches[password]');

        if($this->form_validation->run() == FALSE)
        {
            $data['main_content'] = 'home/home_page';
            $this->load->view('includes/templates/home_page_template', $data);
        }
        else 
        {
            $this->load->model('user_model');
            if($query = $this->user_model->create_member())
            {
                $this->load->model('user_model');
                $this->varification_email();
                $data['main_content'] = 'account/welcome';
                $this->load->view('includes/templates/main_page_template', $data);

            }
            else
            {
                $this->load->view('home/home_page');
            }
        }
    } 
```

这是登录表单和控制器：

```
<?php

                echo form_open('auth/validate_credentials_login');

                echo "<span class='errors_login'>";
                echo form_error('email');
                echo "</span>";

                echo form_label('',  'email',  array('type'=>'text'));
                $data = array( 'name' => 'email', 'class' => 'input', 'placeholder' => 'Email');
                echo form_input($data, set_value('email'));

                echo "<span class='errors_login'>";
                echo form_error('password');
                echo "</span>";

                echo form_label('',  'password', array('type'=>'password'));
                $data = array( 'name' => 'password', 'class' => 'input', 'placeholder' => 'Password');
                echo form_password($data, set_value('sha1(password)'));

                echo form_submit('submit_login', 'Login');
                echo form_close();

                ?>      

function validate_credentials_login()
   {
        // WHEN THE VIEW IS LOADED THIS FUNCTION IS CALLED AND LOADS MODEL AS WELL AS DEFINES THE SALT VARIABLE AND LOADS THE ENCRYPTING HELPER LIBRARY

        $this->load->library('encrypt');
        $this->load->helper('url');
        $this->load->library('form_validation');
        $this->form_validation->set_rules('email', 'Email', 'trim|required|valid_email');
        $this->form_validation->set_rules('password', 'Password', 'trim|required');
        $this->load->library('session');
        $this->load->model('user_model', 'um');
        $login = $this->input->post('submit_login');

   if($login) {
                $user = $this->um->validate_home_login(array('email' => $this->input->post('email')));
                if( $user ) {

                    // CHECK THE USER'S PASSWORD AGAINST THE ONE FROM THE LOGIN FORM
                    if($user->password == $this->encrypt->sha1( $user->salt . $this->encrypt->sha1($this->input->post('password')))) {
                        $this->session->set_userdata(array(
                            'email' => $this->input->post('email')
                        ));
                        redirect('account/dashboard');
                        exit;
                    }
                }
            }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T05:41:47.207

首先，您只是`if`块内的所有验证规则

这意味着单击提交时..

# mysql - .where 中的 RoR 直接 sql 条件

> ID：12694980
> 
> 赞同：0
> 
> 时间：2012-10-02T17:10:19.950
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

**是）我有的：**

有条件的 sql 请求`.where`

```
.where(:users => {:articles => {...}, :settings => {...}, ...}) 
```

**我需要的：**

一个附加条件，所以`id`of`:users`不等于`@user.id`

**我尝试了什么：**

```
.where(:users => {['id != ?', @user.id], :articles => {...}, :settings => {...}, ...}) 
```

**问题是什么：**

句法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:16:23.253

**你可以尝试什么：**

```
.where(:users => {:articles => {...}, :settings => {...}, ...}).where('users.id != ?', @user.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:15:22.577

我有一个属于_to Place 的 Fact 模型，这很有效：

```
Fact.includes(:place).where("places.id != 5") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T17:47:02.673

整个语法可以做得更好

```
@users = User.scoped
if you_have_conditions_on_articles
  @users = @users.join(:articles).where(...conditions_on_article...)
end
if you_have_conditions_on_settings
  @users = @users.join(:settings).where(...conditions_on_settings...)
end
if you_need_to_exclude_user
  @users = @users.where('id != ?', @user.id)
end

@users 
```

这将创建一个正确的查询，并且您可以避免在不需要时添加条件。

在您循环之前不会执行查询（因此，如果查询未在任何视图中使用，则根本不会执行）。

# javascript - 让表单运行一个javascript函数？

> ID：12694984
> 
> 赞同：3
> 
> 时间：2012-10-02T17:10:36.627
> 
> 标签：javascript, html, forms

单击提交时，如何使我的表单运行一个功能？

```
<form id="commentForm" name="comment">
    <fieldset>
        <label for="name">Name <span>(required)</span></label>
        <input type="text" class="text" id="name" value="" />
        <label for="email">Email <span>(will not be published) (required)</span></label>
        <input type="text" class="text" id="email" value="" />
        <label for="website">Website</label>
        <input type="text" class="text" id="website" value="" />
        <label for="message">Message <span>(required)</span></label>
        <textarea id="message" class="textarea" rows="10"></textarea>
        <input type="submit" name="submit" class="submit" id="submit_btn" value="Submit Comment" action="JavaScript: ajax_add_comment();">
    </fieldset>
    ... 
```

我正在尝试运行以下功能：

```
function ajax_add_comment () {
    alert ("testing");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T17:12:27.827

使用`onclick`属性而不是`action`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:16:09.977

您可以使用[jQuery](http://jquery.com/)并使用[.submit()](http://api.jquery.com/submit/)函数。您可以给表单一个`id`，然后将提交功能附加到它。

例子：

```
<form id="execute"....

</form>

<script type="javascript">
$("#execute").submit(function(){
 alert("i've submitted this form");
});
</script> 
```

确保您已包含 jquery js 文件。

```
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T17:18:39.837

您可以在`onsubmit`提交表单时使用该事件来执行 JavaScript 代码。例如：

```
<script>
function ajax_add_comment () {
  alert ("testing");
}
</script>

<form id="commentForm" name="comment">
                            <fieldset>
                                <label for="name">Name <span>(required)</span></label>
                                <input type="text" class="text" id="name" value="" />
                                <label for="email">Email <span>(will not be published) (required)</span></label>
                                <input type="text" class="text" id="email" value="" />
                                <label for="website">Website</label>
                                <input type="text" class="text" id="website" value="" />                                                                
                                <label for="message">Message <span>(required)</span></label>
                                <textarea id="message" class="textarea" rows="10"></textarea>
                                <input type="submit" name="submit" class="submit" id="submit_btn" value="Submit Comment" onsubmit="ajax_add_comment();">
                            </fieldset> 
```

谢谢！

# mysql - Mysql Self Join在同一张表中查找父子关系

> ID：12694986
> 
> 赞同：4
> 
> 时间：2012-10-02T17:11:01.087
> 
> 标签：mysql, sql, self-join

我试图计算一段时间内雄性赛马（Sire）的所有后代赢得的金额。由陛下列出赢得最多的钱。我运行查询并在遇到一个问题后得到结果，我无法显示公牛姓名，只能显示他们的 ID。

```
SELECT  `horses`.`SireID` AS  `SireID` , `horses`.`HorseName` AS  `Sire Name`, 
                  COUNT(  `runs`.`HorsesID` ) AS  `Runs` , 
                  COUNT( 
                           CASE WHEN  `runs`.`Finish` =1
                                THEN 1 
                                ELSE NULL 
                                END ) AS  `Wins` , 
                  CONCAT( FORMAT( (
                                COUNT( 
                                       CASE WHEN  `runs`.`Finish` =1
                                            THEN 1 
                                            ELSE NULL 
                                            END ) / COUNT
                                    (  `runs`.`TrainersID` ) ) *100, 0 ) ,  '%'
                  ) AS  `Percent` , 
           FORMAT( SUM(  `runs`.`StakeWon` ) , 0 ) AS  `Stakes` 
FROM runs
INNER JOIN horses ON runs.HorsesID = horses.HorsesID
INNER JOIN races ON runs.RacesID = races.RacesID
WHERE  `races`.`RaceDate` >= STR_TO_DATE(  '2012,07,01',  '%Y,%m,%d' ) 
AND  `races`.`RaceDate` < STR_TO_DATE(  '2012,07,01',  '%Y,%m,%d' ) + INTERVAL 1 
MONTH 
AND `horses`.`SireID`  <> `horses`.`HorsesID`
GROUP BY  `horses`.`SireID`, `horses`.`HorseName`
ORDER BY SUM(  `runs`.`StakeWon` ) DESC 
```

以 horse 表中的记录为例，一匹马有一个 horsesID，它们也有一个 SireID（它们的父亲）。SireID 在同一张表的另一条记录中具有等效的 horsesID，因为它也是一匹马

基本上我需要将 horseName 映射到sireID。

我认为自我加入会起作用。

```
 `AND `horses`.`SireID`  <> `horses`.`HorsesID`` 
```

但它不会返回与 SireID 对应的正确 Sire 名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T22:07:01.237

您可以在表本身上执行 JOIN。这是一个更简单的例子：

```
SELECT Horses.HorseID, Horses.HorseName, Horses.SireID, b.HorseName as SireName
FROM Horses
LEFT JOIN Horses b ON (Horses.SireID = b.HorseID) 
```

您可能可以弄清楚如何从这里添加条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:19:13.960

```
join horses sires on sires.HorsesID = horses.SireID 
```

# php - js 使用 xmlhttp 访问非公共文件

> ID：12694987
> 
> 赞同：0
> 
> 时间：2012-10-02T17:11:01.223
> 
> 标签：php, javascript, xmlhttprequest

要访问公共网络空间之外的文件，您需要公共网络空间中的一个脚本，该脚本可以从私人文件夹中获取内容，例如

```
$allowedFiles = array(
    1 => '/path/to/private/space/on/server/file1.txt',
    2 => '/path/to/private/space/on/server/file2.txt',
    3 => '/path/to/private/space/on/server/file3.txt',
    4 => '/path/to/private/space/on/server/file4.txt',
);

$id = filter_var($_GET['id'], FILTER_VALIDATE_INT);

if (isset($allowedFiles[$id])) {
    readfile($allowedFiles[$id]);
} 
```

现在当你做

xmlhttp.open("GET","file.php?id=4",false); <==注意最后一个参数为假（同步）脚本将发送的内容

/path/to/private/space/on/server/file4.txt 到客户端。

这段代码适用于小文件，但是当文件更大时，即 5 mgbytes，这段代码会失败。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:22:19.120

检查您的 php.ini 并尝试将`upload_max_filesize`and`post_max_size`值修改为更高的值。

> 将您想要强制下载的所有文件放在一个目录中，并将其设置在该目录的 .htaccess 中。

```
<Files *.*>
ForceType applicaton/octet-stream
</Files> 
```

在这个线程中找到：[http](http://www.sitepoint.com/forums/showthread.php?700250-PHP-File-%28Size%29-Download-Limit) ://www.sitepoint.com/forums/showthread.php?700250-PHP-File-%28Size%29-Download-Limit 还有一些其他的解决方案。

# git - git diff 中的 -u9999999 到底是什么意思？

> ID：12694988
> 
> 赞同：1
> 
> 时间：2012-10-02T17:11:12.850
> 
> 标签：git, diff

我想知道如何让 git 始终向您显示完整的文件，`git diff`而不是只显示帅哥。

所以我首先选择了这个`-W`选项，但我读到这实际上试图变得聪明，并试图找到更改的函数上下文。我不希望 git 聪明。我希望 git 变得简单，只向我显示包含更改的完整文件。

所以我终于想通了，你可以添加`-U9999999`，现在我就像 WTF！？想知道这是什么疯狂的黑客攻击，为什么没有在任何地方记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:13:48.307

从手册：

```
-U<n>
--unified=<n>
Generate diffs with <n> lines of context instead of the usual three. Implies -p. 
```

所以你告诉它用 9999999 行上下文显示差异，这实际上意味着整个文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:13:58.667

`git diff -U9999999`意思是“做一个统一的差异并为每个大块显示 9,999,999 行上下文。” 已记录在案；`git help diff`显示：

```
       -U<n>, --unified=<n>
           使用 <n> 行上下文而不是通常的生成差异
           三。暗示-p。

```

当然，如果您的文件在不同区域之间的行数超过 9,999,999 行，这实际上不会显示整个文件，但出于所有实际目的，它将始终显示整个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:14:11.430

您是在告诉 git 生成带有额外上下文行的差异。上下文是围绕每个更改的代码行。

如果你说

```
git diff -u9999999 
```

您告诉 git 在每次更改周围放置 9999999 行未更改的代码，这对于您创建的任何代码文件都应该足够了。

# ruby-on-rails - record age based on :dob date field after creating, saving and updating a profile object?

> ID：12694990
> 
> 赞同：0
> 
> 时间：2012-10-02T17:11:15.610
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, calculated-field

In rails how could I calculate the age based on :dob date field after creating, saving and updating a profile object?

I have this method in my model:

```
 def set_age
    bd = self.dob
    d = Date.today
    age = d.year - bd.year
    age = age - 1 if (
    bd.month > d.month or
        (bd.month >= d.month and bd.day > d.day)
    )
    self.age = age.to_i
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:15:46.623

您可以像这样使用 after_save 回调

```
after_save: set_age

def set_age
    bd = self.dob
    d = Date.today
    age = d.year - bd.year
    age = age - 1 if (
    bd.month > d.month or
        (bd.month >= d.month and bd.day > d.day)
    )
    self.age = age.to_i
    self.save
  end 
```

或 before_save 回调

```
before_save: set_age

def set_age
    bd = self.dob
    d = Date.today
    age = d.year - bd.year
    age = age - 1 if (
    bd.month > d.month or
        (bd.month >= d.month and bd.day > d.day)
    )
    self.age = age.to_i
  end 
```

before_save 比 after_save 更好，因为它会提交一次更改。

我也认为你不需要列年龄，因为年龄应该总是在飞行中得出。

谢谢

# file - ftp batch file log data to txt

> ID：12694996
> 
> 赞同：0
> 
> 时间：2012-10-02T17:11:24.580
> 
> 标签：file, batch-file, ftp, logfile

me again :P I have some problems with some bat file, that bat file , connects to and ftp and download all files from a remote folder, then delete it, but my problem/question is: i need a txt(log) of every file before download it from the remote server, here is my file

bat file:

```
ftp -i -s:ftpfile.txt site.com 
```

txt file

```
user-name
user-pass
lcd c:\localfolder\some\folder
cd remotefolder-name
mget . 
mdelete \\remotefolder-name\ .
quit 
```

If i use the >>mylog.txt on this line:

```
ftp -i -s:ftpfile.txt site.com>>mylog.txt 
```

I get some extra data that i dont want to. I just need the file names before download it, something like this:

log.txt

```
file001x.xml
filedfx.xml
file023x.xml
filed33x.xml 
```

Ps:sorry for my english ;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:16:35.303

您可以将`ls`输出重定向到本地文件。语法是：`ls pattern local_file`. 一个例子是：`ls * ftplist.txt`或`ls . ftplist.txt`。两者都将生成一个文件`ftplist.txt`（如果您未指定路径，则在本地当前目录中），其中包含远程服务器当前目录中的文件列表（可能还有子目录）（格式略有不同）

# systemc - Code example for a TLM fifo

> ID：12694999
> 
> 赞同：0
> 
> 时间：2012-10-02T17:11:36.827
> 
> 标签：systemc

I am new to TLM. Someone can give me an example code for connecting two processes by a TLM fifo?

Thank you

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:04:26.847

我在 doulos 中进行了搜索，但只看到了套接字的示例。有人帮助了我，我在这里留下了一个 tlm fifo 的代码示例

```
#include "systemc"
#include "tlm.h"

// PRODUCER 1

SC_MODULE(producer)
{
sc_core::sc_port< tlm::tlm_fifo_put_if<int> > out;  //FIFO OUT

SC_CTOR(producer)
    : out("out")
{
    SC_THREAD(run);  //função
}

void run()
{
    int i = 42;
    std::cout << name() << ": " << i << std::endl;
    out->put(i);
}
}; // producer

// CONSUMER

SC_MODULE(consumer)
{
    sc_core::sc_port< tlm::tlm_fifo_get_if<int> > in;

    SC_CTOR(consumer)
    : in("in")
    {
        SC_THREAD(run);  //função
    }

    void run()
    {
       int i = in->get();
       std::cout << name() << ": " << i << std::endl;
    }
}; // consumer

 // MAIN
 int sc_main(int, char*[] )
 {
     tlm::tlm_fifo<int> fifo("fifo");

     producer prod("producer");
     prod.out(fifo);
     consumer cons("consumer");
     cons.in(fifo);

     sc_core::sc_start();
     char myLine[100];
     cin.getline(myLine, 100);
     return 0;
} 
```

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:16:09.010

[doulos 网站上](http://www.doulos.com/knowhow/systemc/tlm2/)有一些很好的例子。