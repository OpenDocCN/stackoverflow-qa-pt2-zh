# StackOverflow 问答 15808000-15808999

# google-app-engine - 为什么 OnPostLoad 在 AppEngine (JPA 1.0) 中不触发

> ID：15808001
> 
> 赞同：0
> 
> 时间：2013-04-04T09:55:51.473
> 
> 标签：google-app-engine, jpa

我已使用 JPA 1.0 在我的 Google AppEngine 项目中使用注释的类中将`javax.persistence.PostLoad`注释附加到我的方法中（出于兼容性原因，我已在 Eclipse 项目的 Google AppEngine 属性中检查了*Use Datanucleus JDO/JPA 版本“v1”* ） . 在我使用该方法执行 SELECT 查询后，该方法不会触发。为什么不？`private void onPostLoad()``javax.persistence.Entity`*`javax.persistence.Query.getSingleResult()`*

 *它的对应物`@OnPrePersist`工作得很好。我也尝试使用加载对象`entityManager.find()`，但无济于事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:24:16.147

使用古老的东西（谷歌插件的 v1）是你自己的选择，即使它在一年前被 v2 取代（具有向后兼容性升级路径）。简单查看他们的问题跟踪器会显示 [http://code.google.com/p/datanucleus-appengine/issues/detail?id=210&can=1&q=postload&colspec=ID%20Stars%20Type%20Status%20Priority%20FoundIn%20TargetRelease%20Owner %20总结](http://code.google.com/p/datanucleus-appengine/issues/detail?id=210&can=1&q=postload&colspec=ID%20Stars%20Type%20Status%20Priority%20FoundIn%20TargetRelease%20Owner%20Summary)*

# php - 使用 PHP 显示从数据库中检索到的图像

> ID：15808002
> 
> 赞同：0
> 
> 时间：2013-04-04T09:56:06.320
> 
> 标签：php

我想知道如何`div`使用 PHP 代码显示存储在特定数据库中的图像？

我使用的代码如下所示：

```
<form method="post">
<input type="button" name="show" value="show"/><br/>
<input type="image" id="image_show" name="img" value="img"/>
</post>

if(@$_POST['show'])
    {
        $sql="select imageData form images ORDER BY DESC";
        $result=mysql_query($sql) or die('invalid query'.mysql_error());
        //set header
        header("Content-type:image/png");
        echo mysql_result($result,0);
        while( $row = mysql_fetch_row( $result ) )
        {
            echo "<img src='".$row[0]."'/>";
            }
        } 
```

但它不起作用。我该如何解决这个任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:00:22.397

您需要指定要从返回的数组中检索的**列**`imageData`的名称（在这种情况下）

```
echo '<img src="'.$row['imageData'].'"/>"; 
```

此外，如果您只想显示图像并现在强制下载，则不需要此行：

```
//set header
header("Content-type:image/png"); 
```

无论如何，当您使用该表格打印信息之前，它都会给您一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:59:21.173

```
 echo "<img src='".$row['imageData']."'/>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:03:41.450

如果数据作为 blob 嵌入到数据库中，请使用：

```
<img src="data:image/png;base64,ABC"/> 
```

带有'ABC'的是base64中的图像。

有关数据 URL 的更多信息，请参见[此处](http://dataurl.net/#about)。

# javascript - Mootools Unity3D 导入

> ID：15808003
> 
> 赞同：0
> 
> 时间：2013-04-04T09:56:07.010
> 
> 标签：javascript, jquery, mootools

我在使用 mootools 导入和显示 Unity3D Web 应用程序时遇到问题。

使用 jQuery 我能够做到这一点，但似乎不使用 jQuery 就无法创建 UnityObject2？

有人对此有解决方案吗？

这里有一些代码：

```
alert($('content'));
        $('content').set("html",'<div id="unityPlayer">\
            <div class="missing">\
                <a href="http://unity3d.com/webplayer/" title="Unity Web Player. Install now!">\
                    <img alt="Unity Web Player. Install now!" src="http://webplayer.unity3d.com/installation/getunity.png" width="193" height="63" />\
                </a>\
            </div>\
            <div class="broken">\
                <a href="http://unity3d.com/webplayer/" title="Unity Web Player. Install now! Restart your browser after install.">\
                    <img alt="Unity Web Player. Install now! Restart your browser after install." src="http://webplayer.unity3d.com/installation/getunityrestart.png" width="193" height="63" />\
                </a>\
            </div>\
        </div>');
        var config = {
            width: croppedWidth, 
            height: croppedHeight,
            params: { enableDebugging:"0" }
        };
        var u = new UnityObject2(config);
        u.initPlugin($('unityPlayer'), "3D/login.unity3d"); 
```

亲切的问候！

# mysql - 如何在 MYSQL 中创建记录

> ID：15808004
> 
> 赞同：0
> 
> 时间：2013-04-04T09:56:14.730
> 
> 标签：mysql, records, counting

如何在 MySQL 中创建计数记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:11:36.493

如果您需要计算 MySQL 中的行数，您只需使用`COUNT(*)`. [在这里](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)查看官方文档。

查询看起来像这样。

```
SELECT COUNT(*) FROM your_table; 
```

# python - 如何解析输入的字符串以提取单个数字

> ID：15808009
> 
> 赞同：0
> 
> 时间：2013-04-04T09:56:20.590
> 
> 标签：python, string, parsing

一旦我弄清楚这一点，就会感到愚蠢。

我正在编写的程序提示操作（例如 9+3），然后打印结果。

示例运行：

```
>>>Enter an operation: 9+3
>>>Result: 12 
```

我将为运算符 +、-、* 和 / 提供四个单独的函数，另一个函数用于接收用户输入并在适当的函数返回后打印结果。

到目前为止，这是我的代码（我只包括一个操作员函数）：

```
def add(n, y):
    result = ""
    result = n + y
    return result

def main():
    op = input("Enter an operation: ")
    for i in range(1,len(op)):
        n = n[0]
        y = y[2]
        if (i == "+"):
            result = add(n, y)
    print("Result: ", result)
    print("Bye") 
```

我在 shell 状态中的错误 n 和 y 没有被分配，所以我没有正确地从输入中解析它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:02:44.427

因为它们没有在函数体中分配，并且在全局范围内不可用：

```
def main():
    op = input("Enter an operation: ")
    for i in range(1,len(op)):
        n = n[0]  # no n here yet so n[0] won't work
        y = y[2]  # no y here yet so y[2] won't work 
```

我认为您的目标是解析输入，然后使用这些值执行加法，如下所示：

```
def main():
    op = input("Enter an operation: ")
    i = op[1]
    n = int(op[0])
    y = int(op[2])

    if i == "+":
        result = add(n, y)
    print("Result: ", result)
    print("Bye") 
```

但它仅适用于一位数字参数，因此您可能会考虑使用正则表达式进行一些适当的解析，但这是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:34:37.640

你的代码有问题：

在`main`, 在`n = n[0]`, 你没有任何`n`定义。所以你会得到一个错误。对`y = y[2]`. 在`add`你添加字符串。所以你会得到`'93'`答案。

对于正确的解析使用正则表达式
或者如果你想快速工作，更少的编码版本（如果你正在学习，不推荐）
试试这个：

```
def main():
    while True:
        # just a variable used to check for errors.
        not_ok = False

        inp = input("Enter an operation: ")
        inp = inp.replace('\t',' ')

        for char in inp:
            if char not in '\n1234567890/\\+-*().': # for eval, check if the 
                print 'invalid input'
                not_ok = True # there is a problem
                break
        if not_ok: # the problem is caught
            continue # Go back to start

        # the eval
        try:
            print 'Result: {}'.format(eval(inp)) # prints output for correct input.
        except Exception:
            print 'invalid input'
        else:
            break # end loop 
```

一些正则表达式链接：[1](http://en.wikipedia.org/wiki/Regular_expression) [2](http://docs.python.org/2/library/re.html)

# xaml - W8/XAML GridView -> 将标题元素向右对齐

> ID：15808013
> 
> 赞同：0
> 
> 时间：2013-04-04T09:56:28.227
> 
> 标签：xaml, gridview, windows-8

我希望我的 GridView 的标题包含左侧的组名称和右侧的符号并执行此操作。：

```
 <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <Grid>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition
                                        Width="*"></ColumnDefinition>
                                    <ColumnDefinition
                                        Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>

                                <Button
                                    Grid.Column="0"
                                    AutomationProperties.Name="Group Title"
                                    Style="{StaticResource TextPrimaryButtonStyle}" />

                                    <Button
                                        Grid.Column="1"
                                        Content="&#xE0A1;"></Button>
                            </Grid>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate> 
```

不幸的是，符号总是在组标题的左右两侧。：

![在此处输入图像描述](https://i.stack.imgur.com/U015c.png)

**如何右对齐组标题中的元素？**

*编辑：固定大小的网格列不起作用，因为组的宽度可能因屏幕和单个组中的项目数量而异。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:34:24.797

可能有很多方法可以做到这一点。最简单的方法是在数据模板网格中设置列宽。在上面的代码中，将其更改`width="*"`为以下内容：

```
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="200"></ColumnDefinition>
    <ColumnDefinition Width="50"></ColumnDefinition>
</Grid.ColumnDefinitions> 
```

宽度的总和等于 250，这是标准网格单元大小。

您可能需要根据实际需要调整这些数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:48:31.673

我在 msdn 论坛上得到了一个非常好的解决方案。这里是：

**首先编写一个转换器**来计算Datatemplate中Container的宽度，在我的例子中是网格：

```
class WidthConverter : IValueConverter
{
    #region IValueConverter Member

    public object Convert(object value, Type targetType, object parameter, string language)
    {
        int x;
        if (parameter != null)
            x = int.Parse(parameter.ToString());
        else
            x = 1;
        if ((int)value % x == 0)
            return (int)value / x * 260 - 5;
        else
            return ((int)value / x + 1) * 260 - 5;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

现在**在您的页面资源中声明它：**

```
<local:WidthConverter x:Key="WidthConverter"/> 
```

最后使用绑定来使用它并计算 Grid 的宽度：

```
<Grid Width="{Binding Items.Count, Converter={StaticResource WidthConverter}, ConverterParameter=2}"> 
```

**将转换器参数设置为显示的行数，**如果您不限制它，则取决于屏幕分辨率。

**将转换器中的 260 替换为与您的项目模板大小和边距匹配的数字。**

# java - py4j：字典到 JAVA 映射

> ID：15808017
> 
> 赞同：1
> 
> 时间：2013-04-04T09:56:38.153
> 
> 标签：java, python, python-3.x, py4j

我目前正在使用 python3 访问 HBase。我正在做的方式是使用 py4j 调用我正在编写的访问 HBase 的 JAVA API。

我有一个与创建带有限定符和值的 Put 对象有关的问题。

我想将字典传递给需要哈希图的 JAVA 类。是否可以通过py4j。

我不想为每个列限定符迭代地调用 Put。我想将 dict 传递给 py4j，它应该在 JAVA 端作为 HashMap 接收。

您能否请一些提示/指示如何做到这一点...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:03:52.170

有两种方法可以做你想做的事：

1.  您可以[创建一个 java.util.HashMap() 并将其用作](http://py4j.sourceforge.net/advanced_topics.html#map)python 端的字典。如果你通过字典很多，这很好，但你不经常在 python 端修改它。如果在 java 端修改了字典并且您想在 python 端查看修改，这也很好。
2.  Py4J 可以在调用 Java 方法时[自动将 python dict 转换为 HashMap 。](http://py4j.sourceforge.net/advanced_topics.html#converting-python-collections-to-java-collections)请注意，字典将被复制，并且在 Java 端执行的任何更改都不会反映在 Python 端。

我相信最简单的解决方案是#1：

```
>>> m = gateway.jvm.java.util.HashMap()
>>> m["a"] = 0
>>> m.put("b",1)
>>> m
{u'a': 0, u'b': 1}
>>> u"b" in m
True
>>> del(m["a"])
>>> m
{u'b': 1}
>>> m["c"] = 2 
```

# php - 模拟库可以用来创建多个日志文件吗？

> ID：15808018
> 
> 赞同：3
> 
> 时间：2013-04-04T09:56:38.747
> 
> 标签：php, logging, logfiles, php-analog-package

我正在寻找一个体面的、易于使用的日志记录助手类集/框架。

我发现了[Analog](https://github.com/jbroadway/analog)并发现它正是我所需要的，尽管它似乎一次只能用于一个日志文件。

我错了吗 ？！

您是否知道一些允许写入多个日志的类似（大小/功能）项目？也许是模拟分支？我已经看过 log4php、KLogger 和 Monolog。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:04:52.293

从源代码来看

*   [https://github.com/jbroadway/analog/blob/master/examples/file.php](https://github.com/jbroadway/analog/blob/master/examples/file.php)和
*   [https://github.com/jbroadway/analog/blob/master/examples/multi.php](https://github.com/jbroadway/analog/blob/master/examples/multi.php)和
*   [https://github.com/jbroadway/analog/blob/master/lib/Analog/Handler/Multi.php](https://github.com/jbroadway/analog/blob/master/lib/Analog/Handler/Multi.php)

您应该能够同时使用多个文件处理程序。尝试这样的事情：

```
Analog::handler(Analog\Handler\Multi::init(array(
    Analog::ERROR   => Analog\Handler\File::init('/path/to/logs/errors.log'),
    Analog::WARNING => Analog\Handler\File::init('/path/to/logs/warnings.log'),
    Analog::DEBUG   => Analog\Handler\File::init('/path/to/logs/debug.log')
))); 
```

* * *

如果你不能让它工作`Analog\Handler\Multi`，你仍然可以编写自己的[复合](http://sourcemaking.com/design_patterns/composite)记录器，适应模拟文件处理程序。为此，首先创建一个接口，定义您希望如何在应用程序中使用 Logger：

```
interface Logger
{
    const ERROR = 'error';
    const WARNING = 'warning';
    const DEBUG = 'debug';

    public function log($message, $level);
} 
```

然后为模拟创建适配器，使其满足接口：

```
class AnalogAdapter implements Logger
{
    private $adaptee;

    public function __construct(Analog $analog)
    {
        $this->adaptee = $analog;
    }

    public function log($message, $level)
    {
        $adaptee = $this->adaptee;
        $adaptee::log($message, $adaptee::$level);
    }
} 
```

最后，编写 Composite Logger：

```
class CompositeLogger implements Logger
{
    private $loggers = array;

    public function registerLogger(Logger $logger)
    {
        $this->loggers[] = $logger;
    }

    public function log($message, $level)
    {
        foreach ($this->loggers as $logger)
        {
            $logger->log($message, $level);
        }
    }
} 
```

然后创建模拟文件处理程序并将它们注册到 Composite：

```
$logger = new CompositeLogger;
$logger->registerLogger(
    new AnalogAdapter(
        Analog\Handler\File::init('/path/to/logs/errors.log')
    )
);

// … add more Loggers in the same way

$logger->log('This is a warning', Logger::WARNING); 
```

然后警告将被写入所有已注册的 Logger。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T23:10:57.553

是的，它确实很好用。并且您可以为不同的日志类型创建不同的日志函数。

例如。这将通过电子邮件发送错误。但是将警告写入日志。

```
Analog::handler(Analog\Handler\Multi::init(array(
    Analog::ERROR   => Analog\Handler\Buffer::init (
    Analog\Handler\Mail::init (
        'you@example.com',
        'Log messages',
        'noreply@example.com'
    )
)
    ,Analog::WARNING => Analog\Handler\File::init(__DIR__.'/log/warning.log')
    //Analog::DEBUG   => Analog\Handler\File::init('/path/to/logs/debug.log')
))); 
```

# wpf - 在 wpf 网络浏览器上操作选定的文本

> ID：15808019
> 
> 赞同：0
> 
> 时间：2013-04-04T09:56:39.137
> 
> 标签：wpf, browser

我正在创建一个 epub 图书阅读器。展示这本书后，我想允许用户在书中添加一些注释。

为了显示这本书，我使用了一个加载本地 html 文件的 wpf webbrowser 控件

我想通过创建上下文菜单或显示弹出窗口来操作此控件上的选定文本

我试图更改控件的上下文菜单，但通过搜索我发现这是不可能的

这是我想要对选定文本执行的操作的示例：

```
IHTMLDocument2 htmlDocument = (IHTMLDocument2)webBrowser1.Document;

            IHTMLSelectionObject currentSelection = htmlDocument.selection;

            if (currentSelection != null)
            {
                IHTMLTxtRange range = currentSelection.createRange() as IHTMLTxtRange;

                if (range != null)
                {
                    MessageBox.Show(range.text);
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:38:05.610

WPF 的本机浏览器控件不允许您设置自定义上下文菜单。

情况变得更糟；当您的鼠标在浏览器组件上时，或者如果它有焦点，它也不会捕获您的输入生成的事件。

解决此问题的一种方法是在 WindowsFormsHost 中使用 Windows 窗体浏览器控件。

首先，添加`Windows.Forms`到您的项目引用中。

然后，执行以下操作：

**XAML：**

```
<Window x:Class="blarb.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <WindowsFormsHost Name="windowsFormsHost" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>
    </Grid>
</Window> 
```

**C#代码：**

```
public partial class MainWindow : Window
{
    private System.Windows.Forms.WebBrowser Browser;

    public MainWindow()
    {
        InitializeComponent();

        //initialise the windows.forms browser component
        Browser = new System.Windows.Forms.WebBrowser
        {
            //disable the default context menu
            IsWebBrowserContextMenuEnabled = false
        };

        //make a custom context menu with items
        System.Windows.Forms.ContextMenu BrowserContextMenu = new System.Windows.Forms.ContextMenu();
        System.Windows.Forms.MenuItem MenuItem = new System.Windows.Forms.MenuItem {Text = "Take Action"};
        MenuItem.Click += MenuItemOnClick;
        BrowserContextMenu.MenuItems.Add(MenuItem);
        Browser.ContextMenu = BrowserContextMenu;

        //put the browser control in the windows forms host
        windowsFormsHost.Child = Browser;

        //navigate the browser like this:
        Browser.Navigate("http://www.google.com");

    }

    private void MenuItemOnClick(object sender, EventArgs eventArgs)
    {
        //will be called when you click the context menu item
    }
} 
```

不过，这还没有解释如何突出显示。

您可以在完成加载时侦听浏览器组件触发的事件，然后替换它加载的文档部分，注入 html 代码来进行突出显示。

请记住，在某些情况下这可能会很棘手（例如，在选择文本`divs`时）`spans``paragraphs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T18:31:38.963

```
using mshtml;

private mshtml.HTMLDocumentEvents2_Event documentEvents; 
```

在构造函数或 xaml 中设置您的 LoadComplete 事件：

```
webBrowser.LoadCompleted += webBrowser_LoadCompleted; 
```

然后在该方法中创建新的 webbrowser 文档对象并查看可用属性并创建新事件，如下所示：

```
private void webBrowser_LoadCompleted(object sender, NavigationEventArgs e)
{
    documentEvents = (HTMLDocumentEvents2_Event)webBrowserChat.Document; // this will access the events properties as needed
    documentEvents.oncontextmenu += webBrowserChat_ContextMenuOpening;
}

private bool webBrowserChat_ContextMenuOpening(IHTMLEventObj pEvtObj)
{
    return false; // ContextMenu wont open
    // return true;  ContextMenu will open
    // Here you can create your custom contextmenu or whatever you want
} 
```

# python-2.7 - 如何使用 pycollada 在模型上实现纹理？

> ID：15808020
> 
> 赞同：4
> 
> 时间：2013-04-04T09:56:46.763
> 
> 标签：python-2.7, texture-mapping, collada

我正在开发一个 python 脚本，它能够生成 .DAE (COLLADA) 文件以及相关的 KML 文件，用于开发建筑物的 3D 模型。我有建筑物的街道图像。我所说的街道图像是指每座建筑物的正面图像。我需要将这些图像作为纹理放在它们各自的建筑模型上。我找不到合适的方法来使用 python 做到这一点。到现在为止，我已经成功地生成了可以放置在代表建筑物的地图上的空白立方体或长方体。我需要将图像作为纹理放在这些模型的前平面上，并将图像作为输入。请帮忙。

# android - Robotium 拖动不起作用

> ID：15808021
> 
> 赞同：2
> 
> 时间：2013-04-04T09:56:46.963
> 
> 标签：android, testing, drag-and-drop, andengine, robotium

我使用 AndEngine 编写了一个游戏，我想使用 Robotium 进行测试。问题是robotium的拖动功能不起作用。我将robotum 4.0 jar 添加到构建路径并导出，我的清单文件似乎是正确的。第二个测试（操纵杆）失败，因为运动永远不会发生。这是测试类：

```
package cs428.uiuc.robotswarms.test;

    import junit.framework.Assert;

    import org.andengine.entity.sprite.AnimatedSprite;

    import com.jayway.android.robotium.solo.Solo;

    import cs428.uiuc.robotswarms.RobotSwarms;

    import android.test.ActivityInstrumentationTestCase2;

    public class testMotion extends ActivityInstrumentationTestCase2<RobotSwarms> {

public testMotion() {
    super(RobotSwarms.class);
}

private Solo solo;

protected void setUp() throws Exception {
    super.setUp();
    setActivityInitialTouchMode(true);
    solo = new Solo(getInstrumentation(), getActivity());
}

protected void tearDown() throws Exception {
    solo.finishOpenedActivities();
    super.tearDown();
}

private void waitForSpriteInitialisation(RobotSwarms ActivityData) {
    while (ActivityData.getPlayerSprite() == null) {

    }
}

public void testJoystickMovement() {
    RobotSwarms ActivityData = getActivity();
    final float fromX = 400.0f;
    float toX = 380.0f;
    final float fromY = 208.0f;
    float toY = 208.0f;
    AnimatedSprite playerSprite;
    waitForSpriteInitialisation(ActivityData);
    playerSprite = ActivityData.getPlayerSprite();
    float initialPlayerXPosition = playerSprite.getX();
    solo.sleep(2000);
    solo.drag(fromX, toX, fromY, toY, 5);
    solo.sleep(2000);

    playerSprite = ActivityData.getPlayerSprite();

    float playerMovedX = playerSprite.getX();
    Assert.assertTrue(playerMovedX != initialPlayerXPosition);

}

} 
```

目标应用程序清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="cs428.uiuc.robotswarms"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" android:debuggable="true">
    <activity
        android:name="cs428.uiuc.robotswarms.RobotSwarms"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

测试项目清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="cs428.uiuc.robotswarms.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<instrumentation
    android:name="android.test.InstrumentationTestRunner"
    android:targetPackage="cs428.uiuc.robotswarms" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <uses-library android:name="android.test.runner" />
</application> 
```

我曾尝试使用 TouchUtils 而不是 Robotium，但这似乎也不起作用。编辑：撞

# java - 相当于目录使用上下文中的 ZipEntry

> ID：15808027
> 
> 赞同：0
> 
> 时间：2013-04-04T09:56:59.323
> 
> 标签：java, directory, zip, fuse

目录使用上下文中的 ZipEntry 等价物是什么？我正在尝试替换为 zipfiles 编写的代码，以将其转换为为目录编写的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:13:44.487

作为 a`ZipEntry`代表一个文件，我猜你正在寻找[`java.io.File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html).

# android - Android - JAVA 文件中的布局

> ID：15808035
> 
> 赞同：0
> 
> 时间：2013-04-04T09:57:24.990
> 
> 标签：android

根据我的要求，我应该只在水平方向给出方向，如果我在 3 个文本视图中给出 3 个句子，如果第三个句子没有空格，那么它应该在第一个位置的下一行......

公共类 MainActivity 扩展 Activity {

```
private LinearLayout layout;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    findViewById();

    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

    layoutParams.setMargins(10, 15, 10, 10);
    layout.setOrientation(LinearLayout.HORIZONTAL);
    android.view.ViewGroup.LayoutParams params;     

    TextView tvTextsecond = new TextView(this);
    tvTextsecond.setText("Heywhatrudoingtoday");
    tvTextsecond.setLayoutParams(layoutParams);
    tvTextsecond.setBackgroundColor(Color.RED);
    tvTextsecond.setTextColor(Color.WHITE);

    TextView tvTextthird = new TextView(this);
    tvTextthird.setText("Haiitssundaytowork");
    tvTextthird.setLayoutParams(layoutParams);
    tvTextthird.setBackgroundColor(Color.BLUE);
    tvTextthird.setTextColor(Color.WHITE);

    TextView tvTextfourth = new TextView(this);
    tvTextfourth.setText("Owebullshitruuselessfellow");
    tvTextfourth.setLayoutParams(layoutParams);
    tvTextfourth.setBackgroundColor(Color.YELLOW);
    tvTextfourth.setTextColor(Color.WHITE);

    layout.addView(tvTextsecond);
    layout.addView(tvTextthird);
    layout.addView(tvTextfourth);

}

private void findViewById() {

    layout = (LinearLayout) findViewById(R.id.flowLayout);

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:30:35.397

线性布局不会那样做。如果没有空间，它将超出您的显示区域。因此，根据您的要求，您不能在此处使用线性布局。

# html - 宽度：自动不适用于下拉导航

> ID：15808036
> 
> 赞同：0
> 
> 时间：2013-04-04T09:57:32.407
> 
> 标签：html, css

这将很难解释，所以我创建了一个[JS-Fiddle](http://jsfiddle.net/Relborg/Kpxpf/4/)，所以你们可以明白我的意思......

如果您在“产品”选项卡下查看我制作的列表中的第二个链接，结果是它溢出了列表的边界。如果链接很长，我怎样才能使包含 ul 的宽度延伸到包含链接？

再次查看 JSfiddle 将使事情更清楚地了解正在发生的事情和需要做的事情。

PS - 需要让它在不编辑 HTML 的情况下工作！

```
//Ignore this 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:00:15.707

只需删除列表的固定宽度：

```
ul li {
    display: block;
    position: relative;
    float: left;
    width: 140px; // <-- Remove this
    height: 25px;    
} 
```

它将使您的列表的默认宽度变为自动，您就完成了。

演示：http: [//jsfiddle.net/Kpxpf/5/](http://jsfiddle.net/Kpxpf/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:01:34.343

只需更改`width:140px;`为`min-width:140px;``ul li`

演示：

[http://jsfiddle.net/Kpxpf/6/](http://jsfiddle.net/Kpxpf/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:01:04.470

您正在`<li>`从顶级菜单的样式中限制 s 的宽度。这将使您的预期保持`width: 140px;`在顶级菜单上，并允许子菜单根据其内容调整大小。

[jsFiddle](http://jsfiddle.net/Tyriar/EdFc8/)

```
ul#menu li ul li {
    width:auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:06:29.877

您正在嵌套列表上设置固定宽度。

`ul li`将样式更改为：

```
#menu > li {
    display: block;
    position: relative;
    float: left;
    width: 140px;
    height: 25px;
} 
```

这将从嵌套`ul`的 s 中删除固定宽度，允许它们根据需要占用尽可能多的空间。

## [jsFiddle](http://jsfiddle.net/Kpxpf/7/)

# java - Http 标头范围（HTML + Java 示例）

> ID：15808037
> 
> 赞同：0
> 
> 时间：2013-04-04T09:57:35.093
> 
> 标签：java, html, range

我需要将大图像从服务器加载到 chrome 浏览器中，并在它完全下载完文件后，如果用户想再次查看文件，那么浏览器应该从其缓存中加载它。

我做了以下工作来实现这一点：

1.  我已经编写了一个 HTML 文件，我将使用“ **img** ”标签显示大图像。
2.  每当用户请求图像文件时，我都会向服务器发出 HEAD 请求，询问内容长度和最后修改日期。
3.  服务器根据请求回复信息，我将文件大小分成 10 份，然后发出 10 次连续请求以获取图像文件。（使用 for 循环）。
4.  在 chrome 下载整个文件并且下次用户想要查看该文件时，我正在制作 chrome 以将 If-Modified-Since 查询发送到服务器。
5.  如果服务器返回代码 304，则 chrome 将理解它必须从其缓存中获取文件。

我面临以下问题： 1\. 每个响应我得到大约 100 个字节。我应该将它存储在哪里以及我应该如何让我的 img 标签了解客户端仍在下载文件。3 2\. 我应该如何从 chrome 缓存中存在的文件池中识别该文件？3\. 下次有人来看同一张图片时，我应该从哪里显示内容？

请帮忙。任何人都可以向我提供一些示例代码或一些示例代码的链接。

谢谢和问候， 阿克沙伊萨胡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:21:59.243

我得到了执行此操作的方法。

1.  我正在下载范围内文件的所有字节并使用 HTML 5 的文件 API 我正在用户 HDD 中创建一个文件。因此，体验了完整的简历下载体验。

谢谢和问候，阿克沙伊萨胡。

# codeigniter - 在 CodeIgniter 中查询多对多表时，如何保持模型松散耦合？

> ID：15808042
> 
> 赞同：0
> 
> 时间：2013-04-04T09:57:45.183
> 
> 标签：codeigniter, join, model, many-to-many, loose-coupling

我正在使用 CodeIgniter 并有三个表和一个模型：

*   用户 - 用户表
*   产品 - 产品表
*   UserProduct - 显示哪些用户拥有哪些产品的表（两个外键列和一些其他列，例如日期）

在我的代码中，我想为特定用户显示一个列表，显示他们拥有哪些产品。因此，我在 UserProduct 类中有一个方法，它对与 userId 匹配的 UserProduct 表进行选择，并通过一个连接来引入我需要的关于每个产品的所有数据。

这很好用，但我现在担心我正在走紧耦合的道路。例如，假设我想找出产品图片的 URL。我在产品模型中有一个方法来返回它，我不想在 UserProduct 模型中使用重复的方法，并且我不想通过让 UserProduct 模型尝试访问其他模型中的方法来创建耦合（我不要认为 CodeIgniter 喜欢你这样做）。

此问题似乎可能发生在访问具有外键的数据库表的任何模型中，其中该模型可能需要来自父表的数据并希望对其进行操作。

是否有一个优雅的解决方案，或者我是否需要接受外键必然会在模型中创建耦合或需要跨模型的类似方法？

TIA，菲尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:16:23.763

我个人的标准是始终创建 1 个控制器 + 1 个模型。

例如`site.com/users`将使用`model_users.php` 或 `site.com/products`将使用`model_products.php`

精简您的代码和重用方法使用方法参数，例如要重用的模型方法可以是：

```
function getUsers($data){
 foreach($data as $key=>$value){
  $this->db->where($key,$value);
}
$query = $this->db->get('users');
return $query->result();
} 
```

您扩展此方法的次数越多，您可以重复使用的次数越多，这只是扩展的另一个示例：

```
 function getUsers($data,$order_by = false){
     foreach($data as $key=>$value){
      $this->db->where($key,$value);
    }
 if($order_by){
  foreach($order_by as $key=>$value){
  $this->db->order_by($key,$value);
  }
  }
    $query = $this->db->get('users');
    return $query->result();
    }

//then you call results with this in your controller
   $results =  $this->model->getUsers(
      $data = array('id'=>'12','country'=>'USA'),
       $order_by = array('username'=>'DESC')
     ); 
```

所以现在你也得到了`order_by`，等等，你可以添加`joins, limit,offset,like`等等。所有这些都以相同或完全相同的方式，你越准确，你就越可以重复使用相同的方法

# c - 当我们可以以相同的成本获得全局变量时，静态局部变量有什么用？

> ID：15808049
> 
> 赞同：10
> 
> 时间：2013-04-04T09:58:09.317
> 
> 标签：c, static, extern, storage-class-specifier

在 C 中，当外部变量可以以相同的成本达到其目的时，静态存储类的用途是什么，即。两者都占用可执行文件数据段中的存储空间。

我对外部变量有更好的范围。如果我希望外部变量的范围是特定文件，我不会在其他地方声明这个变量。我看到全局变量比静态局部变量有很大的灵活性

如果我们有变量的地址，我们可以在函数外部引用局部静态变量。局部静态变量的内存将在数据段中，而不是在函数的堆栈帧中。所以静态存储类带来了独特的功能.

我只想知道静态是否有任何我不知道的微妙目的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-04T10:38:29.247

你写了一个全局变量有一个“更好”的范围。这是不正确的。它的范围更大。越大越好。

**如果您需要**标识符在更多地方可见，则可能需要更大，但通常情况并非如此。但是更大的范围意味着更多的错误风险。全局变量混淆了例程的语义，使查看它们使用和更改的程序状态变得更加困难，并且增加了由于未能声明局部标识符和其他错误而导致错误的可能性。

特别是，具有外部链接的标识符将与其他库中的标识符发生冲突。考虑一下当您编写一个物理应用程序时会发生什么，有一个名为 的外部标识符`acceleration`，并与一个也有一个名为 的外部标识符的物理库链接`acceleration`。该程序将失败。因此，外部标识符通常是糟糕的设计。

我们开发和维护复杂软件的能力的一个重大限制是人为错误。许多编程语言语义**限制**了语言以防止错误。使用原始计算机，您可以添加两个指针，丢弃堆栈指针，意外地将 a 的字节加载`float`到整数寄存器中，等等。好的编程语言使这些错误很难被错误地处理。

在范围规则帮助控制它们之前，全局变量是错误的更大来源。优秀的程序员会限制其标识符的范围。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T10:04:38.670

全局变量很好，是全局的，它可以从任何地方访问。

静态局部变量具有局部作用域。它是静态的，因此它的生命周期贯穿应用程序的生命周期，但是它只能从本地范围访问（无论该范围是函数、块还是文件）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:08:34.527

基本区别在于变量的范围。

1）全局变量对整个项目都是全局的。假设您的项目有 10 个不同的文件，那么所有 10 个文件都可以访问全局变量（请参阅如何使用 extern）。

2) 静态变量/函数可由定义它的函数/文件使用。它不能被项目中的任何其他文件使用。

但是，您可以通过传递变量的引用来修改 func2() 中的静态变量（在 func1() 中定义）。请看下面的例子，

```
void func2(int *i)
{
    (*i)++;
}

void func1()
{
    static int i;

    i=1;
    printf("%d\n", i);
    func2(&i);
    printf("%d\n", i);  
}

int main()
{
    func1();
    return 0;
} 
```

正如你在上面看到的，func1()`static int i`不能直接被 func2() 操作，但是如果你传递变量的引用，你仍然可以像普通变量一样操作变量。

希望能帮助到你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:05:00.387

*本地*和*全局*之间的区别首先是范围：您只能从定义它们的块内访问局部变量，而可以从任何地方访问全局变量。因此，在全局范围内只能有一个具有给定名称的变量，但在不同的函数中可以有多个局部静态变量。

与静态全局变量与外部变量相比：是的，静态全局变量是翻译单元的本地变量（即定义它们的 .c 源文件）。

所以这里主要关注的是范围的概念，存储自然来自那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T10:05:13.160

您应该使用局部静态变量的原因是作用域，因此避免了一些容易出现错误的情况，因为使用局部静态变量您将无法在定义它的函数之外引用它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-06-19T14:14:16.533

这是一个演示差异的简短程序：

```
#include <stdio.h>

static int a=20;
void local()
{
   printf("%d,addr:%d \n", a, (void*)&a);
   a = 100;
}

int main()
{

      {
         static int a = 10;
         printf("%d,addr:%d \n", a, (void*)&a);
         local();
      }
      printf("%d addr:%d \n", a, (void*)&a);
} 
```

输出：

```
10,addr:134518604   -- local static inside the braces
20,addr:134518600   -- this is referring the global static variable
100 addr:134518600  -- This is referring the global static variable which is outside of 
                       the braces. 
```

这里大括号也很重要：如果`main()`函数中没有大括号，那么它只引用局部静态变量。

# c# - Ext.Net 100% 宽度布局

> ID：15808054
> 
> 赞同：1
> 
> 时间：2013-04-04T09:58:27.613
> 
> 标签：c#, extjs, asp.net-mvc-4, ext.net

几天前我开始使用 Ext.NET（在 MVC4 站点上），并使用 Ext.NET 创建了一些表单，但我无法为容器设置 100% 的宽度。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:01:53.130

默认情况下，an 的 Width 将填充其父 Container 宽度的 100%。

如果父 Container 是 Ext.NET Container 类型（例如 Panel、Window 等），您也可以尝试在父 Container 上设置 .Layout="fit"。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T09:16:31.160

Layout="fit" dosent 一直有效，没有响应组件，您也可以使用 c# 代码获取 ScreenWidth 并更新页面加载时的宽度和高度参数，以便您的页面适合任何地方。

# mdx - Microsoft Adventure Work DW 2012 的 MDX 查询

> ID：15808055
> 
> 赞同：1
> 
> 时间：2013-04-04T09:58:29.290
> 
> 标签：mdx

这是我第一次接触MDX，我想得到查询

*   获取2007和**2008**两个**财政年度**不同**城市**和不同**产品类别的****平均互联网销售额**。

 ******以下是我的 MDX 查询，但编译失败。

```
SELECT
{ [Geography].[City].CHILDREN } ON COLUMNS,
{ [Product].[Category].CHILDREN } ON ROWS
FROM [Adventure Works]
WHERE ( 
    [Measures].[Measures].[Internet Average Sales Amount], 
    [Date].[Fiscal Year].&[2007], 
    [Date].[Fiscal Year].&[2008]
) 
```

上面的查询带有一个错误

> 查询 (7, 1) 会计年度层次结构在 Crossjoin 函数中多次使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:55:47.383

试试下面的。`:`是范围运算符。欲了解更多信息，[请单击](http://msdn.microsoft.com/en-us/library/ms146001.aspx)。

```
SELECT
{ [Geography].[City].CHILDREN } ON COLUMNS,
{ [Product].[Category].CHILDREN } ON ROWS
FROM [Adventure Works]
WHERE ( 
    [Measures].[Measures].[Internet Average Sales Amount], 
    [Date].[Fiscal Year].&[2007] : [Date].[Fiscal Year].&[2008]
) 
```

自从我使用 MDX 以来已经有一段时间了，但我认为您必须进行更多更改才能获得所需的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:23:26.503

这是我第一次接触MDX，我仍然对SQL查询感到困惑。

例如，如果我们正在寻找不同城市和不同产品类别的互联网销售额。

根据所需的要求，以下 MDX 查询是否可以满足要求。

```
SELECT
    { [Geography].[City].CHILDREN } ON COLUMNS,
    { [Product].[Category].CHILDREN } ON ROWS
FROM [Adventure Works]
WHERE [Measures].[Internet Sales Amount] 
```

我对 SELECT 和 WHERE 子句有点困惑

我期望上面的陈述是这样的，一个轴显示所有可能的**城市**，另一个显示所有可能的**产品类别**，每个单元格是**聚合的 Internet Sales Amount**。

例如。

```
 New York | Tokyo | ...
Car       $123  |  $50  | ...
Toys      $456  |  $100 | ... 
```

即纽约有 123 美元的汽车互联网销售额

MDX 查询是否符合我的期望？******

# java - 如何停止“JavaFX 应用程序线程”

> ID：15808063
> 
> 赞同：17
> 
> 时间：2013-04-04T09:58:51.340
> 
> 标签：java, javafx-2, javafx

我有一个简单的控制台应用程序，有时需要执行图形操作，对于那些我正在使用 JavaFx 框架的应用程序（我需要一些功能，例如文本的 css 样式）我只是将一些形状和文本生成到一个隐藏的场景中然后保存档案中的那些，仅此而已，

我知道要使用 JavaFx，我必须将图形操作传递给 JavaFx 线程，但是当一切都完成并且我必须关闭应用程序（几个小时后）这个 JavaFx 线程仍然保持打开状态......我真的不想用 System.exit() 强制退出，因为如果有东西被阻止，我可能想知道/等待（另外我不想将所有东西都作为 JavaFx 应用程序执行（因为 JavaFx 组件不到我的主应用程序的 1%）

代码非常简单，谷歌搜索我发现只能使用

```
Platform.exit(); 
```

这似乎不起作用，我也尝试过使用平台参数，如

```
Platform.setImplicitExit(false); 
```

这是我可以运行的测试应用程序：

```
import javafx.application.Platform;
import javafx.embed.swing.JFXPanel;
import javafx.geometry.Pos;
import javafx.scene.layout.VBox;

public class SOTestFX {
    public static void main(String[] args) {
        SOTestFX t = new SOTestFX();
        t.runFxThread();
    }

    public  void runFxThread(){
        //Application.launch(args);
        final JFXPanel jfxPanel = new JFXPanel(); 
        Platform.runLater(new Runnable() {
            @Override
            public void run() {

                System.err.println("CREATING IMAGE");
                simpleFXoperations();
                System.err.println("NOW CALL EXIT");
                System.err.println("JAVA FX THREAD SHOULD BE EXITED NOW");
                Platform.exit();
            }
        });

        try {
            Thread.sleep(3000); // just wait a bit if something should happen, let it happen..
        } catch (InterruptedException e) {
            e.printStackTrace();  
        }
        //jfxPanel.removeNotify(); // return ->  java.lang.NullPointerException
        //Platform.exit(); // -> does nothing

        System.err.println("i will never die!");
    }
    public void simpleFXoperations(){

        VBox vbox1 = new VBox();
        vbox1.setAlignment(Pos.BOTTOM_CENTER);
        vbox1.setStyle("-fx-border-style: solid;"
                + "-fx-border-width: 1;"
                + "-fx-border-color: white");
        System.err.println("simpleFXoperations() _DONE");
    }
} 
```

这是永远不会关闭的线程

> “附加监听器” - 线程 t@17 java.lang.Thread.State: RUNNABLE
> 
> 锁定的可拥有同步器： - 无
> 
> “JavaFX 应用程序线程” - 线程 t@13 java.lang.Thread.State：在 com.sun.glass.ui.gtk.GtkApplication._runLoop（本机方法）在 com.sun.glass.ui.gtk.GtkApplication$3 处可运行$1.run(GtkApplication.java:82) 在 java.lang.Thread.run(Thread.java:722)
> 
> 锁定的可拥有同步器： - 无

**更新：**我在 Linux Fedora 16 64 位上使用最新的 Oracle JDK 7u17 64 位。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-04-10T19:53:07.470

## 使固定：

我能够通过`com.sun.javafx.application.PlatformImpl.tkExit()`在之前立即调用来解决这个问题`Platform.exit()`。我不太了解 JavaFX 源代码，但它似乎在工作；YMMV。

**更新：**在 Java 8 中执行此操作会产生警告，您可以使用`@SuppressWarnings("restriction")`. 这不应该是一个问题。

## 解释：

我通过挖掘源代码发现了这一点；`JFXPanel`有这个小片段（来自 JavaFX 2.2.25）

```
finishListener = new PlatformImpl.FinishListener() {
  public void idle(boolean paramAnonymousBoolean) {
    if (!JFXPanel.firstPanelShown) {
      return;
    }
    PlatformImpl.removeListener(JFXPanel.finishListener);
    JFXPanel.access$102(null);
    if (paramAnonymousBoolean)
      Platform.exit();
  }

  public void exitCalled()
  {
  } 
```

问题是，如果您在应用程序中只使用了一点点 JavaFX，那么该`idle(boolean)`方法永远不会做任何事情（因为`firstPanelShown == false`），这会阻止侦听器被移除，从而阻止 JavaFX`Toolkit`关闭......这意味着您有手动关闭它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T11:39:30.560

这是一个棘手的情况，因为（据我所知）JavaFX 线程的目的是透明地利用各种硬件管道。我可以建议将您的 JavaFX 请求放在一个单独的、引用的项目中吗？并将其他所有内容（包括您的主要方法）保存在另一个中？这一直对我有用。

基本上，业务逻辑和模型放在一个项目中，视图和控制（通常基于 JavaFX）放在另一个项目中。这允许独立终止 JavaFX 线程。希望这适用于您正在尝试做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T06:47:52.203

您的 main 函数不属于 JavaFx Application 对象，我认为您的程序永远不会进入应用程序线程循环。

看来你应该这样做：

```
public class SOTestFX extends Application {
    public static void main(String[] args) {
        launch(args);
    }
    @Override
    public void start(Stage stage) throws Exception {
        // Do stuff here to show your stage or whatever you want;
        // This will be called on the JavaFX thread
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-27T07:50:58.893

我对此进行了很多尝试，因为上述答案都不适合我。对我来说最好的事情就是使用关闭整个 JVM

```
System.exit(1); 
```

因为我的整个应用程序只是一个 JavaFX 应用程序，因此可以在关闭舞台时关闭。在我的情况下 1 只是一个随机整数。

# php - 'where 子句'中的未知列'member1'

> ID：15808065
> 
> 赞同：0
> 
> 时间：2013-04-04T09:58:56.840
> 
> 标签：php, mysql

在谷歌和 SO 中搜索后，我决定把它放在这里.. 我尝试将单引号和反引号更改为列，但它也没有帮助.. 任何帮助表示赞赏！

```
$a=mysql_query("UPDATE exercisemember SET reps='$reps' WHERE memid='$memid1'")       or die(mysql_error());

    $b=mysql_query("UPDATE exercisemember SET sets1='$sets1' WHERE memid='$memid1'")       or die(mysql_error()); 
```

在此先感谢.. 更新 1 member1 实际上是 $memid1 的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:08:50.137

正如你的标题所说，没有colimn member1。问题可能是您在 $memid 中有 qoute。

请在 $memid 上回显以查看变量中的内容。

你也可以更好地使用 pdo 或 mysqli

使用 pdo 将是这样的：

```
//database connection
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);

$sql = 'UPDATE exercisemember SET reps=:reps WHERE memid=:memid';
$update = $dbh->prepare($sql);
$update->bindParam(':reps', $reps, PDO::PARAM_STR); //if it is a integer use PDO::PARAM_INT
$update->bindParam(':memid', $memid, PDO::PARAM_STR);
$update->execute(); 
```

这将防止它进行 sql 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:36:53.490

```
 $a=mysql_query("UPDATE exercisemember SET reps='".$reps."' WHERE memid='".$memid1."'") 
```

`echo`您可以使用查询找到差异

# ios - 将 UILabel 直接定位在另一个 UILabel 下方

> ID：15808069
> 
> 赞同：4
> 
> 时间：2013-04-04T09:59:05.337
> 
> 标签：ios, objective-c, nsstring, uilabel, sizetofit

我有一个附加功能，`NSString`它会根据正在读入的文本自动调整 a的大小`UILabel`（我有一个简单的应用程序显示引文，所以有些是几个词，有些是几个句子）。在该标签下方`quote`，我还有一个`author`标签，其中（奇怪的是）其中包含引用的作者。

我试图将该`author`标签直接放置在标签下方`quote`（如，它的`y`坐标将是`quote`标签的`y`坐标加上`quote`标签的`height`。我看到的是两个标签之间放置了一些空间，这取决于报价的长度, 改变大小。较小的引号有更多的空间，而较长的引号有更少的空间。这是我所看到的快速图表：

![在此处输入图像描述](https://i.stack.imgur.com/ywcY7.png) ![在此处输入图像描述](https://i.stack.imgur.com/0jKRA.png)

请注意红色和蓝色框之间的差距（我已经使用它设置，`layer.borderColor/borderWidth`以便我可以在应用程序中看到它们），报价越短越大。

如果有人可以筛选下面的代码并帮助我指出导致差异的确切原因，我将不胜感激。据我所知，`author`标签应始终比`quote`标签`y + height`值低 35 像素。

只是为了确认：一切都在 Interface Builder 中正确连接，等等。引用的内容很好，其他一切正常，所以它已经连接，这不是问题。

澄清一下，我的问题是：**为什么标签之间的间隙会根据引用的长度而变化，我怎样才能正确获得稳定的、可设置的 35 像素间隙？**

这是我用来定位标签的代码：

```
// Fill and format Quote Details
_quoteLabel.text = [NSString stringWithFormat:@"\"%@\"", _selectedQuote.quote];
_authorLabel.text = _selectedQuote.author;
[_quoteLabel setFont: [UIFont fontWithName: kScriptFont size: 28.0f]];
[_authorLabel setFont: [UIFont fontWithName: kScriptFontAuthor size: 30.0f]];

// Automatically resize the label, then center it again.
[_quoteLabel sizeToFitMultipleLines];
[_quoteLabel setFrame: CGRectMake(11, 11, 298, _quoteLabel.frame.size.height)];

// Position the author label below the quote label, however high it is.
[_authorLabel setFrame: CGRectMake(11, 11 + _quoteLabel.frame.size.height + 35, _authorLabel.frame.size.width, _authorLabel.frame.size.height)]; 
```

这是我的自定义方法`sizeToFitMultipleLines`：

```
- (void) sizeToFitMultipleLines
{
    if (self.adjustsFontSizeToFitWidth) {
        CGFloat adjustedFontSize = [self.text fontSizeWithFont: self.font constrainedToSize: self.frame.size minimumFontSize: self.minimumScaleFactor];
        self.font = [self.font fontWithSize: adjustedFontSize];
    }
    [self sizeToFit];
} 
```

这是我的`fontSizeWithFont:constrainedToSize:minimumFontSize:`方法：

```
- (CGFloat) fontSizeWithFont: (UIFont *) font constrainedToSize: (CGSize) size minimumFontSize: (CGFloat) minimumFontSize
{
    CGFloat fontSize = [font pointSize];
    CGFloat height = [self sizeWithFont: font constrainedToSize: CGSizeMake(size.width, FLT_MAX) lineBreakMode: NSLineBreakByWordWrapping].height;
    UIFont *newFont = font;

    // Reduce font size while too large, break if no height (empty string)
    while (height > size.height && height != 0 && fontSize > minimumFontSize) {
        fontSize--;
        newFont = [UIFont fontWithName: font.fontName size: fontSize];
        height = [self sizeWithFont: newFont constrainedToSize: CGSizeMake(size.width, FLT_MAX) lineBreakMode: NSLineBreakByWordWrapping].height;
    };

    // Loop through words in string and resize to fit
    for (NSString *word in [self componentsSeparatedByCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]]) {
        CGFloat width = [word sizeWithFont: newFont].width;
        while (width > size.width && width != 0 && fontSize > minimumFontSize) {
            fontSize--;
            newFont = [UIFont fontWithName: font.fontName size: fontSize];
            width = [word sizeWithFont: newFont].width;
        }
    }
    return fontSize;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:42:19.017

在调用 size 以适应两个标签后，计算它们的框架之间的距离并相应地更改它们：

```
[quoteLabel sizeToFit];
[authorLabel sizeToFit];

float distance = authorLabel.frame.origin.y - quoteLabel.frame.size.height;
float difference = distance - 35;

authorLabel.frame = CGRectMake(authorLabel.frame.origin.x,(authorLabel.frame.origin.y - difference),authorLabel.frame.size.width,authorLabel.frame.size.height); 
```

间隙发生变化的原因是报价标签框架在调用 sizeToFit 时根据其内容改变其高度。

**更新**

鉴于评论的最新发展，我认为您有 3 种可能性：

*   调整空格而不是单词的大小，以便字符串实际上正确地适合框架
*   以某种方式访问​​ UILabel 的 CTFramesetter 以查看实际框架，当一切都说完之后，相当于
*   创建自己的 UIView 子类，在其 draw rect 方法中处理核心文本绘图（在你的情况下应该很容易），因为毕竟你试图给 UILabel 一个它不适合的行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:54:04.717

它可能正在移动到您想要的位置，但随后自动布局约束或弹簧/支柱正在移动它。

**编辑：**
我的**第一个**想法（我排除了，因为你说单词周围的框是标签框。在后来的评论中，你说这不是实际的屏幕截图，而只是它的表示，所以它仍然可以是正确的）是你做错了：

```
[_quoteLabel sizeToFitMultipleLines];
[_quoteLabel setFrame: CGRectMake(11, 11, 298, _quoteLabel.frame.size.height)]; 
```

在第一行中，您正在调整文本的大小以适应标签的当前宽度，然后在第二行中转身并更改标签的宽度。所以最有可能发生的事情是您正在调整标签的宽度以使其变高。然后，您使标签比以前更宽，文本扩展以适应更宽的标签，在实际文本下方留下一个空白区域，尽管框架没有改变。这使得标签之间的空间正好为您想要的 35，但是顶部标签的文本并没有一直到其框架的底部，因此空白空间比您想要的要多。基本上，你有这个：

```
*************
* text text *
* text text *
*           *
*           *
*           *
*************

*************
* text text *
************* 
```

如果是这种情况，那么您可以通过首先设置宽度来修复它，如下所示：

```
// You could put anything for the 200 height since you will be changing it in the next line anyway.
[_quoteLabel setFrame: CGRectMake(11, 11, 298, 200];  
[_quoteLabel sizeToFitMultipleLines]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:29:08.190

我最终通过使用单个`UILabel`, 和 CoreText 和`NSAttributedString`. 有点逃避，但它有效。

# mysql - 通过在单个查询中使用多个组

> ID：15808073
> 
> 赞同：0
> 
> 时间：2013-04-04T09:59:12.157
> 
> 标签：mysql, sql, group-by

我有 2 个查询来获取 count = 1 和 count = 2 的家庭数。

```
SELECT Name, count(*) as c FROM Tablename GROUP BY HOUSE_NO HAVING c<=1;

 SELECT Name, count(*) as c FROM Tablename GROUP BY  HOUSE_NO HAVING c>=2 and c<=4; 
```

但我需要将这些查询组合成单个查询。就像

```
 count1                          count2
  nooffamiliesHavingcount = 1        nooffamiliesHavingcount = 2 
```

请帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:02:44.573

```
SELECT CASE WHEN c <= 1 THEN "<=1"
            WHEN c BETWEEN 2 and 4 THEN "2-4"
       END familysize,
       COUNT(*) nooffamilies
FROM (SELECT Name, count(*) c
      FROM Tablename
      GROUP BY Name) x
GROUP BY familysize
HAVING familysize IS NOT NULL 
```

[小提琴](http://www.sqlfiddle.com/#!2/4e0f1/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:03:43.957

您需要将第一个计数放入子查询中：

```
SELECT  COUNT(CASE WHEN C = 1 THEN 1 END) AS nooffamiliesHavingcount1,
        COUNT(CASE WHEN C = 2 THEN 1 END) AS nooffamiliesHavingcount2
FROM    (   SELECT  COUNT(*) AS C
            FROM    TableName
            GROUP BY House_No
        ) t
WHERE   c IN (1, 2); 
```

**编辑**

如果您需要在您的计数中执行范围，您可以使用这个：

```
SELECT  COUNT(CASE WHEN C <= 1 THEN 1 END) AS nooffamiliesHavingcount1,
        COUNT(CASE WHEN C BETWEEN 2 AND 4 THEN 1 END) AS nooffamiliesHavingcount2,
        COUNT(CASE WHEN C > 4 THEN 1 END) AS nooffamiliesHavingcount3
FROM    (   SELECT  COUNT(*) AS C
            FROM    TableName
            GROUP BY House_No
        ) t 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!2/bd7ad/1)**

# sql-server-2005 - 如何在sql server 2005中获得n个最高工资

> ID：15808077
> 
> 赞同：1
> 
> 时间：2013-04-04T09:59:16.993
> 
> 标签：sql-server-2005, stored-procedures

我在谷歌搜索中找到了以下解决方案，但我无法理解。谁能解释这个查询是如何处理的。

```
SELECT *
FROM   employee_test e1
WHERE  3 = (SELECT DISTINCT count(*)
            FROM   employee_test e2
            WHERE  e2.emp_sal > e1.emp_sal) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:17:17.853

It's a very inefficient correlated query to return the employee with the 4th highest salary.

```
SELECT *
FROM   employee_test e1
WHERE  3 = (SELECT DISTINCT count(*)
            FROM   employee_test e2
            WHERE  e2.emp_sal > e1.emp_sal); 
```

Assuming salaries (emp_sal) are unique, the subquery counts how many employees have a higher salary than the employee in 'e1'. If the count is 3, then this is the employee with the 4th highest salary.

If there is a tie for 4th (e.g. through 6th or 10th), all the ties will be shown in the result. If there is a tie that involves the 4th and one higher slot, e.g. 2nd to 4th or 3rd and 4th, then there will be no results, since NO value of emp_sal has EXACTLY 3 records with higher emp_sal values.

The better form would be

```
select top(1) with ties * 
from (
    select *, rn=rank() over (order by emp_sal desc)
    from employee_test
    ) x
where rn <= 4
order by rn desc; 
```

This shows the outright 4th highest salary (and ties if any), or if there is a tie across persons 3rd through 6th (covering spot #4), it will show 3rd through 6th.

# javascript - 禁用 webapp 滚动而不杀死 javascript 中的单击（点击）事件

> ID：15808080
> 
> 赞同：1
> 
> 时间：2013-04-04T09:59:27.000
> 
> 标签：javascript, ios, web-applications, scroll, touch

这是我的第一篇文章，所以我试图解释清楚：

我正在开发一个 Web 应用程序，但重点是，我想让我的用户感觉它是一个原生应用程序。在本机应用程序中，您无法像在 iOS Safari 中那样滚动，所以我尝试使用 event.preventDefault 禁用滚动。这很好用，除了表单元素和链接不再可点击。我的解决方案是这个小脚本，但是如果您开始触摸其中一个转义元素，它无论如何都会滚动。没什么大不了的，但它让我发疯......

脚本注释：
isTouch 如果是可触摸设备
则返回 true/false 如果数组包含字符串，.contains 方法返回 true/false

```
if (isTouch) {
    window.addEventListener("touchstart", function (evt) {
        var target = evt.touches[0].target;
        var tags = 'a input textarea button'.split(' ');

        if ( tags.contains(target.tagName) === false ) {
            evt.preventDefault();
        }       
    }, false);
} 
```

**编辑** 我的主要问题是，是否有一种解决方案可以在没有 touchmove 事件的情况下触发点击事件以允许滚动

**编辑 2**
我解决了这个问题。我的解决方案是模拟交互式元素上的事件：

```
var eventFire = function (el, etype) {
    if (el.fireEvent) {
        (el.fireEvent('on' + etype));
    }
    else {
        var evObj = document.createEvent('Events');
        evObj.initEvent(etype, true, false);
        el.dispatchEvent(evObj);
    }
}

if (isTouch) {
    window.addEventListener("touchstart", function (evt) {
        var target = evt.touches[0].target;
        var foc = 'input textarea'.split(' ');
        var clck = 'a button'.split(' ');

        if ( foc.contains(target.tagName) ) {
            target.focus();
            eventFire(target,'click');
            evt.preventDefault();
        }
        else {
            evt.preventDefault();
        }

    }, false);
} 
```

# c# - 使用 linq 在其他结果查询中查询

> ID：15808083
> 
> 赞同：1
> 
> 时间：2013-04-04T09:59:31.663
> 
> 标签：c#, linq

我在 EF 中使用 linq 进行查询时遇到问题。

基本上，我想做的是这样，用简单的 SQL：

```
SELECT
    t2.*
FROM
    [SHP_Console2].[dbo].[Domain] t1
INNER JOIN
    [SHP_Console2].[dbo].[Domain] t2
    ON t2.[left] >=t1.[left] AND t2.[right]<=t1.[right]
WHERE
    t1.ID =1 
```

我无法用 linq 做到这一点。

我正在尝试这个：

```
 from a in DomainRep.Where(c => c.ID == domainID).Select(c => new { c.left, c.right })
 from b in DomainRep.Where(x => x.left >= a.left && x.right <= a.right)
 select a; 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:07:21.873

您将查询与匿名类型混合在一起。你不能这样做。

您也不能使用`JOIN`with`>=`条件 - LINQ 不支持这种语句。但是，可以使用[替代语法](https://stackoverflow.com/questions/3725032/greater-than-condition-in-linq-join)来完成。

```
from a in DomainRep
from b in DomainRep
where b.left >= 1.left && b.right <= a.right && a.ID = 1
select b; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T10:03:22.300

**编辑：** 参考：[http ://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/428c9db2-29f6-45d8-ab97-f00282397368/](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/428c9db2-29f6-45d8-ab97-f00282397368/)

```
 var query = (from a in DomainRep
             from b in DomainRep 
             where a.left >= b.left
             select b)
            .ToList(); 
```

# tfs - TFS 2010 对 WIT 的不同看法

> ID：15808084
> 
> 赞同：0
> 
> 时间：2013-04-04T09:59:35.050
> 
> 标签：tfs

是否有可能“教”TFS

1.  显示\不显示特定用户的 WIT 字段？
2.  为特定用户禁用\启用 WIT 字段？

例如：

*   管理员 \ 贡献者 - 一切
*   开发人员 - 禁用“分配给”
*   外包 - 隐藏区域路径

ETC...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:23:06.490

您不能根据查看工作项的人员来使字段可见；但是，您可以使字段只读依赖于组。为此，请参阅下面的屏幕截图：

（注意：我使用的是[TFS 电动工具](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f)。请注意您正在安装的版本）

![导出WITD并打开，或者直接从服务器打开。](https://i.stack.imgur.com/3SiZG.png)

导出WITD并打开，或者直接从服务器打开。

![将 <code>READONLY</code> 规则添加到字段，然后将其表示为只读的特定组](https://i.stack.imgur.com/1ntiT.png)

将`READONLY`规则添加到字段，然后将其表示为只读的特定组

# javascript - tinyMCE ssl/https 文件未加载

> ID：15808085
> 
> 赞同：2
> 
> 时间：2013-04-04T09:59:41.617
> 
> 标签：javascript, ssl, https, tinymce

微型 MCE 配置：

```
script_url: '/_js/tinyMCE/tiny_mce.js', // Location of TinyMCE script 
```

当在页面上加载 tinyMce 编辑器时，它会请求几个文件（语言、插件）。当没有 https 时，一切都是完美的。当 https 开启时，问题就开始了。请求路径错误，我不知道如何解决这个问题。

无 SSL（示例）：

```
http://{domain}/_js/tinyMCE/langs/en.js?=201304041141 
```

使用 SSL：

```
https://{domain}//langs/en.js?=201304041141 
```

任何想法如何解决这个问题？一个应用程序的域很少，因此提供绝对 URL 不是解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:48:09.697

这不是 SSL/NoSSL 问题。这是开发/产品问题。在生产服务器上，.js 被编译为一个文件并被缓存。

问题 - 缓存文件位于 TinyMce 附加文件之外的其他目录中。

我没有删除我的问题，因为也许有一天有人会像我们一样被这种愚蠢的事情阻止一整天。

# custom-controls - Win32工具提示在底部熄灭时出现在屏幕顶部

> ID：15808094
> 
> 赞同：0
> 
> 时间：2013-04-04T09:59:56.737
> 
> 标签：custom-controls, tooltip, wtl

我正在使用我自己的工具提示在我的编辑器中使用的自动完成列表框中显示有关当前选定项目的快速帮助。就像 VS 对源代码编辑器所做的那样，当发生新的选择时，工具提示会永久并立即弹出当前选择的旁边，并一直保留在那里，直到自动完成列表框的新选择消失。如果重要的话，这是一个 WTL 项目。

我创建 amd 的方式显示我的工具提示：

```
 m_hwndTooltip = CreateWindowEx(WS_EX_TOPMOST,
                            TOOLTIPS_CLASS,
                            NULL,
                            TTS_NOPREFIX | TTS_ALWAYSTIP,       
                            CW_USEDEFAULT,
                            CW_USEDEFAULT,
                            CW_USEDEFAULT,
                            CW_USEDEFAULT,
                            NULL,
                            NULL,
                            NULL,
                            NULL
                           );

    // INITIALIZE MEMBERS OF THE TOOLINFO STRUCTURE
    m_toolTipInfo.cbSize = TTTOOLINFOA_V2_SIZE;
    m_toolTipInfo.uFlags = TTF_TRACK;
    m_toolTipInfo.hwnd = NULL;
    m_toolTipInfo.hinst = NULL;
    m_toolTipInfo.uId = 0;  // ??
    m_toolTipInfo.lpszText = (LPTSTR) messsssssssage.c_str();       
    // Tool_tip control will cover the whole window
    m_toolTipInfo.rect.left = 0;
    m_toolTipInfo.rect.top = 0;
    m_toolTipInfo.rect.right = 0;
    m_toolTipInfo.rect.bottom = 0;

    ::SendMessage(m_hwndTooltip, TTM_SETMAXTIPWIDTH, 0, MAX_TOOLTIP_WIDTH); //set max width in pixels, AND(!!) enable multi-line support

    // SEND AN ADDTOOL MESSAGE TO THE TOOLTIP CONTROL WINDOW
    ::SendMessage(m_hwndTooltip, TTM_ADDTOOL, 0, (LPARAM) (LPTOOLINFO) &m_toolTipInfo);

    ::SendMessage(m_hwndTooltip, TTM_TRACKPOSITION, 0, (LPARAM)(DWORD) MAKELONG(x, y));
    ::SendMessage(m_hwndTooltip, TTM_TRACKACTIVATE, true, (LPARAM)(LPTOOLINFO) &m_toolTipInfo); 
```

这一切都很好，就像一个魅力。

但是，当我传递太高的 Y 坐标，这会使工具提示在底部的屏幕之外（例如：屏幕高度：1000，我传递 Y：950，工具提示将是 100 高度），然后工具提示出现在Y=0，所以屏幕顶部位置，而不是重新定位到 900。但是，这是水平工作的，所以如果它在右侧（通过的 X 太高），它会向左移动工具提示，直到它可以适合屏幕上。

这很奇怪很奇怪？！

谁能给我提示这里有什么问题？更不用说，Tooltip的大小是由win tooltip自动确定的，根据要显示的消息+最大宽度+使用的字体+行号，所以在显示之前我无法计算出正确的X，Y位置，所以我需要依赖在工具提示控件上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:24:40.367

由于没有回复，我找到了解决方案，我将其分享给其他人：

当工具提示无法适应屏幕时，最初的 0,0 似乎是一种后备。

所以我做什么，而不是

```
 m_toolTipInfo.rect.top = 0;
 m_toolTipInfo.rect.buttom = 0;
   --->
 m_toolTipInfo.rect.top = rcWorkingArea.bottom - 5;
 m_toolTipInfo.rect.bottom = rcWorkingArea.bottom - 5; 
```

如果工具提示不能适合屏幕底部，则将使用此值。

仍然很奇怪为什么它会自动与 X 坐标一起工作......但没关系。

# php - 如何使用用户凭据签署 HTTP 请求以进行移动应用程序和后端服务器通信？

> ID：15808099
> 
> 赞同：2
> 
> 时间：2013-04-04T10:00:10.397
> 
> 标签：php, android, ios, http, oauth-2.0

我们有一个非常标准的场景——移动应用程序通过 HTTP POST 和 GET 与后端 PHP 服务器 API 通信。用户必须登录移动应用程序才能执行任何操作，因此从移动应用程序到我们服务器的每个请求都需要使用用户凭据进行签名。登录成功后，用户名和密码保存在移动应用内部设置中，用户无需重新输入。

以前，后端的 PHP Web 服务是由其他人开发的，但现在我们需要自己实现。在查看以前的项目时，他们需要为每个请求传递用户凭据。我在下面发布了几个请求示例。所有数据插入/更新 Web 服务都使用 POST，但用户 ID 和密码在正文中与其他数据一起传递（保存汽车）。所有数据选择服务都通过 GET 参数传递用户 ID 及其密码。

这是最好和安全的方式吗？也许我们应该将 sha1(userid+password=salt) 放入 HTTP 授权标头并将 userid 留在正文中（因为我们需要从服务器中的数据库中选择用户密码）？或者，也许我们可以在移动应用程序中使用 OAuth 2 来签署 HTTP 请求（生成 userid+pass+... 到授权标头）并在后端使用 OAuth 2 来生成相同的哈希并检查它是否相同？我找不到任何直接的方法如何将 OAuth 2 用于 PHP 仅用于签名请求，所以任何帮助将不胜感激:) 此外，有关用于 iOS/Android 开发的库的相关信息也将不胜感激。

**登录**

```
HTTP method: POST
URL: http://mybackend.com/login
BODY:

 { "uid" : 123,
   "pwd" : "3CB3E2E6AECA48C41000119767B561F5E9E66229" // contains sha1(pass+salt)
 } 
```

**获取汽车清单**

```
HTTP method: GET
URL: http://mybackend.com/getCars?uid=123&pwd=3CB3E2E6AECA48C41000119767B561F5E9E66229 
```

**保存汽车**

```
HTTP method: POST
URL: http://mybackend.com/saveCar
BODY:

  { "uid" : 123,
    "pwd" : "3CB3E2E6AECA48C41000119767B561F5E9E66229",
    "car" : 
    { "id" : 111,
      "name": "My car"
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:52:10.613

我可能会问用户是否可以在应用程序中更改密码，那么是否使用应用程序代码中保存的密码更新该密码？

将数据发布为创建 access_token 目录并在其中使用用户名和密码的更好方法。如示例：{ **“access_token”：{“uid”：123，“pwd”：“3CB3E2E6AECA48C41000119767B561F5E9E66229”}**，“saveCar”：{“id”：111，“名称”：“我的车”}}

并且在服务器端 php 代码很容易通过检查数据库并允许您访问数据库中的 saveCar 来使用此 accesstoken 访问您的所有 url。否则从服务器端，您将收到错误消息，因为访问失败登录尝试再次登录。并在所有请求的 post 方法中使用它。将有利于安全类型。POST 方法是一种用于 PHP 数据安全的方法。您不需要其他任何东西。

您可以将访问令牌发布到您的网址，而不是对汽车列表使用 GET HTTP 请求

{ **"access_token":{ "uid" : 123, "pwd" : "3CB3E2E6AECA48C41000119767B561F5E9E66229", }** } 到您的 Carlist 网址。 *[http://mybackend.com/getCars](http://mybackend.com/getCars)？* 从那个 post 方法中，执行这个 post 方法的结果的代码返回汽车列表。

谢谢，希望这个描述可以帮助到你。

# ruby-on-rails - RoR中的ActiveRecord如何选择日期小于的数据

> ID：15808102
> 
> 赞同：5
> 
> 时间：2013-04-04T10:00:12.177
> 
> 标签：ruby-on-rails, activerecord

请可以解决这个选择：

```
@d_repeats = Event.where(:repeat => 'daily', :shedule < date.end_of_month ) 
```

这里`:shedule < date.end_of_month`不正确。应该如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T10:13:56.720

你可以做

```
@d_repeats = Event.where(:repeat => 'daily').where("schedule < ?", date.end_of_month ) 
```

# android - Android - 在保持选择器时更改组件的背景？

> ID：15808111
> 
> 赞同：0
> 
> 时间：2013-04-04T10:00:35.400
> 
> 标签：android, background, selector

这可能吗？例如，我有带有选择器的简单线性布局来创建“点击效果”：

```
<LinearLayout
        android:id="@+id/clickToChangeColor"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="@color/click_effect" /> 
```

这是选择器 click_effect：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/pressed" android:state_enabled="true" android:state_pressed="true"/>
    <item android:drawable="@drawable/unpressed" android:state_enabled="false"/>
</selector> 
```

一切正常，但是当我按下此布局时，我想启动活动（如颜色选择器 - 但没关系），然后将线性布局的颜色更改为蓝色。但是：**保持选择器“点击效果”**。尝试这样做几乎 2 小时，但没有任何效果......

PS：我知道它可以用这个布局内的另一个布局来完成，应用一些填充并将选择器应用到外部布局，然后我可以更改内部布局的背景等 - 但它只是丑陋的解决方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:08:38.083

```
 <ImageView
                     android:id="@+id/imageViewSelectedColor"
                        android:layout_width="50dp"
                        android:layout_height="50dp"

                        android:background="@color/click_effect"
                        android:src="@color/picked color" /> 
```

现在，您可以使用图像视图来根据拾取的颜色更改 src。

# c++ - 抽象基类 C++ 中的静态回调

> ID：15808115
> 
> 赞同：1
> 
> 时间：2013-04-04T10:00:51.860
> 
> 标签：c++, oop, templates, callback, c++builder

我遇到了一个 OOP / 设计问题，我非常希望有人可以引导我朝着不需要完全重写的方向前进。

该系统是必不可少的 Windows 服务，它有大约 9 个辅助线程负责特定任务。所有线程共享一些共同的功能（例如，在内部发送和接收消息的能力等）。因此，我定义了一个抽象基类，所有线程都从该类继承。

但是，其中四个线程还使用了基于第 3 方 IPC 系统（madshi 的 CreateIpcQueue）的进程间通信系统。为了避免在这四个线程中复制所有相同的代码，我定义了一个额外的类来支持这一点：

```
TThread <-TBaseThread<-TIPCBaseThread<- Four IPC threads
               ^- All other threads. 
```

IPC 系统的机制是您定义一个回调函数，然后调用 CreateIpcQueue 并将此回调传递给它。在我的 TIPCBaseThread 我松散地做了这样的事情：

```
// TIPCBaseThread.h
class TIPCBaseThread : public TBaseThread
{
 private:
   static TIPCBaseThrd *pThis; 
   // defines the callback to use with the IPC queue 
   static void CALLBACK IPCQueue(char *cName, void *pMsgBuf, unsigned int iMsgLen, 
                                 void *pRtnBuf, unsigned int iRtnLen);
 protected:
   // virtual method, to be defined in derived classes, to handle IPC message
   virtual void ProcessIPCMsg(char *cName, void *pMsgBuf, unsigned int iMsgLen, void *pRtnBuf, 
                              unsigned int iRtnLen) = 0;
 public:
   CRITICAL_SECTION csIPCCritSect;
 …

// TIPCBaseThread.cpp
TIPCBaseThrd* TIPCBaseThrd::pThis = 0;

__fastcall TIPCBaseThread::TIPCBaseThread(…) : TBaseThread(…)
{
  pThis = this;
  InitializeCriticalSectionAndSpinCount(&csIPCCritSect, 1000);
  CreateIpcQueueEx(“SomeQueueName”, IPCQueue, 1, 0x1000);
                                     //^Callback Queue
  …
}

void CALLBACK TIPCBaseThread::IPCQueue(char *cName, void *pMsgBuf, unsigned int iMsgLen, 
                                       void *pRtnBuf, unsigned int iRtnLen)
{
  EnterCriticalSection(&pThis->csIPCCritSect);
  pThis->ProcessIPCMsg(cName, pMsgBuf, iMsgLen, pRtnBuf, iRtnLen);
  LeaveCriticalSection(&pThis->csIPCCritSect);
} 
```

我的一般想法是 TIPCBaseThread 将有效地负责创建和管理 IPC 通道，然后在各种派生类中调用 ProcessIPCMsg()。

现在，当我测试系统并向任何 IPC 通道发送消息时，该消息在 TIPCBaseThread 回调中被接收，但被传递到最后一个派生类（要创建），而不是应该接收它的类。我假设这与

```
[static TIPCBaseThrd *pThis] 
```

实例化每个派生类时会覆盖属性（但我承认我不是 100% 确定）？

谁能在这里引导我朝着正确的方向前进？显然我想知道究竟是什么导致了这个问题，但理想情况下我想知道是否有一种解决方法可以避免完全重写整个对象继承——显然还有更多事情要做比我展示的要多，如果我必须完全放弃这个设计，我会遇到严重的问题。

提前谢谢了，

迈克·柯林斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:28:47.733

我认为您应该更改回调以将实例作为参数

```
static void CALLBACK IPCQueue(TIPCBaseThread *instance, 
                              char *cName, void *pMsgBuf, unsigned int iMsgLen, 
                              void *pRtnBuf, unsigned int iRtnLen); 
```

...

```
void CALLBACK TIPCBaseThread::IPCQueue(char *cName, void *pMsgBuf, unsigned int iMsgLen, 
                                       void *pRtnBuf, unsigned int iRtnLen)

{
  ...
  instance->ProcessIPCMsg(cName, pMsgBuf, iMsgLen, pRtnBuf, iRtnLen);
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:09:05.873

有一件很奇怪的事：`pThis = this;`与`static TIPCBaseThrd *pThis;`

这意味着在任何时间点，只有最新的实例`TIPCBaseThrd`可以通过`pThis`（所有以前的实例都已被覆盖）访问；当然还有一个问题是这个全局值不受任何同步（互斥锁，原子，......）的保护

这很不幸，但这`static TIPCBaseThrd *pThis;`只是一个不可能奏效的可怕想法。

# php - 使用 foreach 设置元素值未按预期工作

> ID：15808121
> 
> 赞同：0
> 
> 时间：2013-04-04T10:01:01.857
> 
> 标签：php

我有一个像这样的多维数组：

```
$arrayTest = array(0=>array("label"=>"test","category"=>"test","content"=>array(0=>array("label"=>"test","category"=>"test"),1=>array("label"=>"test","category"=>"test")))); 
```

然后我想像这样设置内容数组中的所有标签：

```
foreach($arrayTest as $obj) {
    foreach($obj["content"] as $anobj){
        $anobj["label"] = "hello";
    }
} 
```

之后我打印出数组

```
echo json_encode($arrayTest); 
```

在我看到的浏览器上：

```
[{"label":"test","category":"test","content":[{"label":"test","category":"test"},{"label":"test","category":"test"}]}] 
```

没有任何改变，但如果我尝试

```
$arrayTest[0]["content"][0]["label"] = "hello";
$arrayTest[0]["content"][1]["label"] = "hello"; 
```

然后它似乎工作。我想知道为什么第一种方法不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:03:33.753

您需要通过引用来迭代数组以使更改保持不变：

```
foreach($arrayTest as &$obj) { // by reference
    foreach($obj["content"] as &$anobj){ // by reference
        $anobj["label"] = "hello";
    }
}

// Whenever you iterate by reference it's a good idea to unset the variables
// when finished, because assigning to them again will have unexpected results.
unset($obj);
unset($anobj); 
```

或者，您可以使用键索引到数组中，从根开始：

```
foreach($arrayTest as $key1 => $obj) {
    foreach($obj["content"] as $key2 => $anobj){
        $arrayTest[$key1]["content"][$key2]["label"] = "hello";
    }
} 
```

# python - 处理多级列表 (2)

> ID：15808123
> 
> 赞同：2
> 
> 时间：2013-04-04T10:01:05.713
> 
> 标签：python, list

假设我有一个类似的列表：

```
li = ['0', ['1', '2'], ['3', ['4', '5'], '6', ['7'], '8'], '9'] 
```

如何实现以以下形式生成元组的函数`(elem, indexes)`：

*   `elem`是元素
*   `indexes`是达到该元素所需的索引。

例子：

```
>>> for x in my_func(li):
    print x
('0', [0])
('1', [1, 0])
('2', [1, 1])
('3', [2, 0])
('4', [2, 1, 0])
('5', [2, 1, 1])
('6', [2, 2])
('7', [2, 3, 0])
('8', [2, 4])
('9', [3]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T10:02:34.080

这是一个嵌套版本

```
li = ['0', ['1', '2'], ['3', ['4', '5'], '6', ['7'], '8'], '9']
def to_int(lst, path=[]):
    for i, j in enumerate(lst):
        if isinstance(j, list):
            yield list(to_int(j, path+[i]))
        else:
            yield int(j), path+[i]

print(list(to_int(li))) 
```

还有一个扁平化版本（Python3.3+）

```
li = ['0', ['1', '2'], ['3', ['4', '5'], '6', ['7'], '8'], '9']
def to_int(lst, path=[]):
    for i, j in enumerate(lst):
        if isinstance(j, list):
            yield from to_int(j, path+[i])
        else:
            yield int(j), path+[i]

for item in to_int(li):
    print (item) 
```

如果不能使用`yield from`(< Python3.3)，就得写这种繁琐的方式

```
li = ['0', ['1', '2'], ['3', ['4', '5'], '6', ['7'], '8'], '9']
def to_int(lst, path=[]):
    for i, j in enumerate(lst):
        if isinstance(j, list):
            for item in to_int(j, path+[i]): yield item
        else:
            yield int(j), path+[i]

for item in to_int(li):
    print (item) 
```

请注意，将空列表作为默认参数*通常是*一个坏主意，但在这里我们注意不要对其进行变异，所以没关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:05:48.220

```
def nextedindex(lst, indice=tuple()):
    for index, data in enumerate(lst):
        if isinstance(data, collections.Sequence):
            for next in nestedindex(data, indice + (index,)): yield next
        else:
            yield indice + (index,), data 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:13:20.923

一个简单的递归版本。

这个循环遍历列表的每一级，跟踪索引路径以到达当前循环`currentIndex`。

```
def indexRecursive(alist, currentIndex, tuples):
    i = 0
    for item in alist:
        if type(item) != list:
           tuples.append((item, currentIndex + [i]))
        else:
            indexRecursive(alist[i], currentIndex + [i], tuples)
        i += 1

li = ['0', ['1', '2'], ['3', ['4', '5'], '6', ['7'], '8'], '9']
tuplesList = []
indexRecursive(li, [], tuplesList)
print tuplesList 
```

# php - 如何使用 codeigniter 创建日志文件

> ID：15808125
> 
> 赞同：2
> 
> 时间：2013-04-04T10:01:07.110
> 
> 标签：php, codeigniter, logging

我的项目正在使用 codeigniter。我是 codigniter 的新手，我想将日志模块带入我的项目中。我想将包括错误在内的所有活动捕获到日志文件中。我是否需要在所有页面中进行更改以将更改存储在日志文件中。我应该在哪里为此编写函数，无论是在控制器还是库中。codeigniter 中是否存在日志模块功能？谁能给我这个解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:03:06.743

创建`library`或`helper`使用[Autoload](http://ellislab.com/codeigniter/user-guide/general/autoloader.html)。AFAIK codeigniter 没有这样的默认库或助手，您需要创建自己的库或为外部库进行研究。

**编辑 ：**

我的坏，试着`$config['log_threshold'] = 0;`在`$config['log_path'] = '';`你的`config.php`

# php - 如何防止在同一个表单中重复输入文本字段。

> ID：15808126
> 
> 赞同：0
> 
> 时间：2013-04-04T10:01:09.340
> 
> 标签：php, javascript

我正在创建一个电子商务网站。在我的网站上，人们可以注册并分享他们的食谱。在那个食谱表格中，我有多个文本字段。例如食谱名称，成分，烹饪时间，烹饪工具等。现在任何人都可以更改食谱名称并一遍又一遍地发送相同的内容来淹没数据库。我现在的问题是：如何防止重复的文本文件输入相同的形式？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:06:41.190

首先，您可以使用像 Rails 这样的 MVC 框架，它为您提供了多种选择，包括验证。

其次，您可以实现一个散列，检查您需要的条件，您可以将其作为隐藏字段插入表单中。

然后，您可以在提交表单后检查哈希。如果只更改配方名称，那么您的哈希值将与表单中的相同。

# php - 在对表字段的连接查询中具有相同的名称意味着如何获取两个字段的值？

> ID：15808133
> 
> 赞同：0
> 
> 时间：2013-04-04T10:01:24.860
> 
> 标签：php, mysql, phpmyadmin

我使用连接查询从两个具有相同字段名称的表中检索值。我怎样才能得到这两个字段的值？

```
mysql_query("SELECT table1.Name, table2.Name 
FROM table1
INNER JOIN table2
ON table1.Id=table2.userid
ORDER BY table1.Id DECS LIMIT 5") 
```

通过上面的查询，我需要来自 table1.Name 和 table2.Name 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:03:20.787

给[别名](http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html)，

```
SELECT table1.Name as table1Name, table2.Name as table2Name
FROM table1
INNER JOIN table2
ON table1.Id=table2.userid
ORDER BY table1.Id DECS LIMIT 5 
```

**注意**：[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:03:35.663

使用别名：

```
mysql_query("SELECT table1.Name as table1_name, table2.Name as table2_name 
FROM table1
INNER JOIN table2
ON table1.Id=table2.userid
ORDER BY table1.Id DECS LIMIT 5") 
```

# zurb-foundation - zurb 基础 4：项目符号不会在 Chrome 和 IE9/IE10 中居中对齐

> ID：15808134
> 
> 赞同：4
> 
> 时间：2013-04-04T10:01:26.503
> 
> 标签：zurb-foundation

好的..所以我在问题列表中检查了（尽我所能），但没有发现任何类似的东西..如果那里有答案，抱歉添加重复...

我正在使用最新版本的 Foundation 4 框架。

我在很多地方都有子弹（主要是UL）。但是，当我使用`text-align: center`带有项目符号列表的任何文本时，普通文本和列表文本居中对齐，但项目符号本身（方形、圆盘等）不是。

现在奇怪的部分......这个问题**只**发生在 Chrome 和 IE9/IE10 中。它在 Firefox / Safari 上按预期工作。我也尝试过使用`.text-center`基本上做同样事情的类（foundation.css 的一部分），即`text-align: center`.

这是测试链接[http://www.crevolve.com/testing/](http://www.crevolve.com/testing/) ....

非常感谢任何帮助...谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T02:16:54.940

> 我在很多地方都有子弹（主要是UL）。但是，当我对带有项目符号列表的任何文本使用 text-align: center 时，普通文本和列表文本是居中对齐的，但项目符号本身（方形、圆盘等）不是。

您需要设置 的`list-style-position`，`ul`默认情况下其值为`outside`。这意味着项目符号将在内容流之外（[在此处阅读更多信息](http://www.w3.org/wiki/CSS/Properties/list-style-position)）。

要解决您的问题，您可以这样做：

```
ul.square {
    list-style-position: inside;
    list-style-type: square;          
    text-align:center;
} 
```

但是坚持下去**并不能完全解决你的问题**，我认为，因为如果你的文本长度不同，`ul`那么一切都会集中。这意味着它们不会对齐并且看起来不会很好。[看看这个小提琴的第一张幻灯片，](http://jsfiddle.net/CHq7Z/)看看我的意思。

要使其居中并使其看起来不错，您可以执行以下操作：

```
.container {
    float:right;
    position:relative;
    right:50%;
    background-color:lightgreen;
}
.inner-container {
    float:left;
    position:relative;
    left:50%;
    background-color:lightyellow;
}
ul.square {  
    list-style-type: square;              
    width:300px;
}

<div> /* the wrapper div */
    <div class="container"> /* outer container to offset by 50% */
        <div class="inner-container"> /* inner container to make it center */
            <ul class="square">
                <li>First Item</li>
                <li>Second Item, this is a longer text</li>
            </ul>
        </div>
    </div>
</div> 
```

工作示例位于采样 jsfiddle 的幻灯片 2 上。我添加了背景颜色，以便您更好地了解它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T10:36:04.073

如果您想保留 list-style-position: 的显示，同时能够在 Chrome 上居中显示项目符号并列出内容：

```
ul {
    list-style-position: inside;
}
ul {
    padding-left: 11px;
    text-indent: -11px;
}
li {
    margin-left: -11px;
} 
```

缺点：11px 是项目符号开头和 li 文本开头之间的空间宽度。这是一个丑陋的幻数，可能因浏览器而异。不幸的是，我还没有找到任何合理化的方法......

# mysql - Mysql Err:1248 每个派生表都必须有自己的别名

> ID：15808136
> 
> 赞同：-2
> 
> 时间：2013-04-04T10:01:32.673
> 
> 标签：mysql

我知道我必须为子查询添加别名，但我不确定在哪里添加它

询问：

```
UPDATE RETRY_MESSAGE_%d SET NEXT_RETRY_TIME = NOW() 
   WHERE NEW_SCMSGREF = 
     (SELECT NEW_SCMSGREF FROM 
     (SELECT NEW_SCMSGREF FROM RETRY_MESSAGE_%d 
         where DESTADDR = :destAddr ORDER BY PRIORITY, SCTS) 
     WHERE rownum < 2) AS TEMP 
```

我可以尝试什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:54:48.807

彻底研究以下内容……看不到子查询……

```
 DROP TABLE IF EXISTS my_table;

 CREATE TABLE my_table
 (rownum INT NOT NULL AUTO_INCREMENT PRIMARY KEY
 ,my_column INT NOT NULL
 ,next_retry_time DATETIME NOT NULL
 ,destaddr VARCHAR(20) NOT NULL
 );

 INSERT INTO my_table (my_column,next_retry_time,destaddr)
 VALUES
 (101,NOW(),'my_string'),
 (102,NOW(),'not_my_string'),
 (101,NOW(),'not_my_string'),
 (102,NOW(),'not_my_string'),
 (102,NOW(),'my_string'),
 (103,NOW(),'my_string');

 SELECT * FROM my_table;
 +--------+-----------+---------------------+---------------+
 | rownum | my_column | next_retry_time     | destaddr      |
 +--------+-----------+---------------------+---------------+
 |      1 |       101 | 2013-04-04 12:50:51 | my_string     |
 |      2 |       102 | 2013-04-04 12:50:51 | not_my_string |
 |      3 |       101 | 2013-04-04 12:50:51 | not_my_string |
 |      4 |       102 | 2013-04-04 12:50:51 | not_my_string |
 |      5 |       102 | 2013-04-04 12:50:51 | my_string     |
 |      6 |       103 | 2013-04-04 12:50:51 | my_string     |
 +--------+-----------+---------------------+---------------+

 SELECT *
   FROM my_table x
   JOIN my_table y
     ON y.my_column = x.my_column
  WHERE y.destaddr = 'my_string'
    AND y.rownum < 3;

 +--------+-----------+---------------------+---------------+--------+-----------+---------------------+-----------+
 | rownum | my_column | next_retry_time     | destaddr      | rownum | my_column | next_retry_time     | destaddr  |
 +--------+-----------+---------------------+---------------+--------+-----------+---------------------+-----------+
 |      1 |       101 | 2013-04-04 12:50:51 | my_string     |      1 |       101 | 2013-04-04 12:50:51 | my_string |
 |      3 |       101 | 2013-04-04 12:50:51 | not_my_string |      1 |       101 | 2013-04-04 12:50:51 | my_string |
 +--------+-----------+---------------------+---------------+--------+-----------+---------------------+-----------+

 UPDATE my_table x
   JOIN my_table y
     ON y.my_column = x.my_column
    SET x.next_retry_time = NOW()
  WHERE y.destaddr = 'my_string'
    AND y.rownum < 3;

 SELECT * FROM my_table;
 +--------+-----------+---------------------+---------------+
 | rownum | my_column | next_retry_time     | destaddr      |
 +--------+-----------+---------------------+---------------+
 |      1 |       101 | 2013-04-04 12:52:28 | my_string     |
 |      2 |       102 | 2013-04-04 12:50:51 | not_my_string |
 |      3 |       101 | 2013-04-04 12:52:28 | not_my_string |
 |      4 |       102 | 2013-04-04 12:50:51 | not_my_string |
 |      5 |       102 | 2013-04-04 12:50:51 | my_string     |
 |      6 |       103 | 2013-04-04 12:50:51 | my_string     |
 +--------+-----------+---------------------+---------------+ 
```

# android - 解释 iso-8859-1

> ID：15808139
> 
> 赞同：0
> 
> 时间：2013-04-04T10:01:38.050
> 
> 标签：android, character-encoding

早上好，我遇到了一个我不明白的问题，让我解释一下：

我正在开发一个基于微控制器 Arduino 和 Android 应用程序的项目。arduino 从 pop3 命令中恢复邮件并将它们发送到 Android 应用程序。两人只通过短信交流。

问题是：我通过 SMS Broadcaster 在 Android 上获取消息，然后恢复一个字符串（String）。

以下是邮件恢复对象的示例：

> Re: [阶段] 技术=?iso-8859-1?Q?vari?= =?iso-8859-1?B?6WVz?=de 通讯

这给出了以下结果：

> 回复：[Stage] 各种技术交流

可能需要注意的是，在 ISO 中只有一些文本以两种不同的方式编码。

我的问题是：我如何解析文本？问题是使用短信传输我没有选择返回类型。这是我用来阅读短信的代码：

```
Bundle bundle = intent.getExtras();
    if (bundle != null) {
        Object[] pdus = (Object[])bundle.get("pdus");
        SmsMessage[] message = new SmsMessage[pdus.length];
        String messageBody = null;
        String phoneNumber = null;
        for (int i=0; i< message.length;i++) {

            message[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
        }
        messageBody = message[0].getMessageBody();
        phoneNumber = message[0].getDisplayOriginatingAddress();
        if (message.length > -1) {
            if (phoneNumber.equals(arduino)) {
                Toast.makeText(context, "New Data",Toast.LENGTH_SHORT ).show();
                //this.abortBroadcast();
                Log.d("BroadcastSMS", "***************phoneNumber:"+phoneNumber+" messageBody:"+messageBody);
                //TODO : ici, que faire du message "messageBody" pour l'interpréter.
            }
        }
    } 
```

我发现自己已经将消息作为字符串。我的直觉是尝试将自己编码为“shell”，但我不明白在此示例中如何编码“ed”。澄清我的问题是：

*   标签 ISO 中的“Q”和“B”有什么区别？

*   在我的例子中，第二个标签应该是 ISO 代码“ed”（注意空格，如果单词是粘的）。但是我不是在一个十六进制代码[0-F] [0-F]之间对应的情况下，文字是：6WVz

但是我可能走错路了，如果您对这些问题有答案或其他方法可以帮助我吗？

无论如何提前谢谢你。

杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:29:21.520

它是[RFC 2047](https://www.rfc-editor.org/rfc/rfc2047)编码字。`Q`指定引用可打印编码，而`B`用于 base64。

# matlab - 如何在 MATLAB 的子图中对齐图/图形？

> ID：15808143
> 
> 赞同：8
> 
> 时间：2013-04-04T10:01:46.450
> 
> 标签：matlab, subplot

我有 3 个对象（一张照片和 2 个图）放入一个图的子图中。它应该如下所示：

![图片](https://i.stack.imgur.com/7So29.jpg)

但正如人们注意到的那样，照片不应该是方形的，而是矩形的。我试图这样做（在这里找到[Matlab: How to align the axes of subplots when one contains a colorbar?](https://stackoverflow.com/questions/5259853/matlab-how-to-align-the-axes-of-subplots-when-one-of-them-contains-a-colorbar)）：

```
main=subplot(4,4,[5,6,7,9,10,11,13,14,15])  %photo
imagesc(im); 
axis('image')  
pion=subplot(4,4,[8,12,16]); %right plot (rotated)
view(90, 90)
plot(ypion,Ppion,'.k');
poz=subplot(4,4,1:3); %upper plot
plot(xpoz,Ppoz,'.k');

pos1=get(poz,'Position')
pos2=get(main,'Position')
pos3=get(pion,'Position')

pos1(3) = pos2(3); %width for the upper plot
set(poz,'Position',pos1)
pos3(4) = pos2(4); %height for the right plot
set(pion,'Position',pos3) 
```

我得到的只是这样： ![图片](https://i.stack.imgur.com/BBUB1.jpg)

如何强制上部图的宽度作为照片本身（而不是照片子图）？设置子图的相等宽度不起作用，因为照片没有填满子图区域。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:38:46.383

该命令`axis image`调整图像轴比。因此，原则上，如果您将两个地块的容积率调整为相同的比率，它就会为所欲为。

有一个警告；由于您已将其绘制在 3x3 子图中，而顶部为 1x3，右侧图为 3x1，因此该图像本质上比图宽或高 3 倍。因此，您必须将绘图的`x`或`y`比率除以 3。

一些示例代码：

```
clc, clf

% generate some bogus data

ypion = rand(500,1);
Ppion = 450*rand(500,1);

xpoz  = rand(500,1);
Ppoz  = 450*rand(500,1);

% Load photo
photoSub = subplot(4,4,[5,6,7,9,10,11,13,14,15]);
load mandrill
photo = imagesc([X,X]);
colormap(map)

axis image 

photoAxs = gca;
photoAxsRatio = get(photoAxs,'PlotBoxAspectRatio')

% right plot 
subplot(4,4,[8,12,16]); 
plot(Ppion,ypion,'k.');
rightAxs = gca;
axis tight

% upper plot
subplot(4,4,[1 2 3]);
plot(xpoz,Ppoz,'k.');
topAxs = gca;
axis tight

% adjust ratios
topAxsRatio = photoAxsRatio;
topAxsRatio(2) = photoAxsRatio(2)/3.8;    % NOTE: not exactly 3...
set(topAxs,'PlotBoxAspectRatio', topAxsRatio)

rightAxsRatio = photoAxsRatio;
rightAxsRatio(1) = photoAxsRatio(1)/3.6;  % NOTE: not exactly 3...
set(rightAxs,'PlotBoxAspectRatio', rightAxsRatio) 
```

这给出了以下结果：

![并排](https://i.stack.imgur.com/6lJ8E.jpg)

只是为了测试，更改`photo = imagesc([X,X]);`为`photo = imagesc([X;X]);`：

![过低](https://i.stack.imgur.com/BpO1C.jpg)

请注意，我没有将比率*完全*除以 3 ；只有当我使用接近 4 的因子时它才会出现。我不知道为什么会这样；AFAIK，一个 3 的因素应该可以解决问题......

哦，好吧，至少你现在有一些工作要做:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-04T00:30:38.687

这是一个解决方案，可以消除已接受答案中的猜测。[此解决方案改编自此处](https://stackoverflow.com/a/43771332/1786137)发布的原始解决方案。

```
% adjust ratios
photoAxsratio = photoAxs.PlotBoxAspectRatio(1)/photoAxs.PlotBoxAspectRatio(2);
topAxsratio = photoAxsratio * photoAxs.Position(4)/topAxs.Position(4);
topAxs.PlotBoxAspectRatio = [topAxsratio, 1, 1];

rightAxsratio = rightAxs.Position(3) / (photoAxs.Position(3) / photoAxsratio);
rightAxs.PlotBoxAspectRatio = [rightAxsratio, 1, 1]; 
```

预览：

[![在此处输入图像描述](https://i.stack.imgur.com/NZu2a.png)](https://i.stack.imgur.com/NZu2a.png)

* * *

**一点解释**

部分解释已在原帖中发表，此处不再赘述。

这个想法是为需要调整大小的图形计算正确的纵横比。

我们有以下等式：

```
Photo.width = Photo.height * Photo.ratio
TopAxis.width = TopAxis.height * TopAxis.ratio 
RightAxis.width = RightAxis.height * RightAxis.ratio 
```

让

```
TopAxis.width = Photo.width 
RightAxis.height = Photo.height 
```

我们有

```
TopAxis.height * TopAxis.ratio = Photo.height * Photo.ratio
TopAixs.ratio = Photo.ratio * Photo.height / TopAxis.height

RightAxis.width / RightAxis.ratio  = Photo.width / Photo.ratio
RightAxis.ratio = RightAxis.width / (Photo.width / Photo.ratio) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-26T13:42:56.837

自 matlab R2019b 发布以来，您现在可以使用：[`tiledlayout`](https://mathworks.com/help/matlab/ref/tiledlayout.html)和[`nexttile`](https://mathworks.com/help/matlab/ref/nexttile.html).

现在很容易做到：

```
% Load a random scary image
I = im2gray(imread('https://unwinnable.com/wp-content/uploads/2011/10/The-Ring-well.jpg'));
% Some computation...
Sx = sum(I)/max(sum(I));
Sy = sum(I,2)/max(sum(I,2));

% We create an empty 3x3 tiled layout:
%  1 2 3
%  4 5 6
%  7 8 9
tiledlayout(3, 3);

% Starting from the tile 1, we plot a 1x2 tile:
%  1 2 x
%  x x x
%  x x x
nexttile(1,[1 2])
plot(Sx,'k.')
% Starting from the tile 4, we plot a 2x2 tile:
%  x x x
%  4 5 x
%  7 8 x
nexttile(4,[2 2])
imagesc(I)
colormap(gray(256))
% Starting from the tile 6, we plot a 2x1 tile:
%  x x x
%  x x 6
%  x x 9
nexttile(6,[2 1])
plot(Sy,1:numel(Sy),'k.') 
```

Matlab 自动调整绘图的大小。

我们得到：

[![在此处输入图像描述](https://i.stack.imgur.com/fyq1Tm.png)](https://i.stack.imgur.com/fyq1Tm.png)

在引擎盖下，平铺布局如下所示：

[![在此处输入图像描述](https://i.stack.imgur.com/kqFP1m.png)](https://i.stack.imgur.com/kqFP1m.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:26:10.410

对于这种特殊情况，我建议`axes`直接使用 low-level 而不是 high-level `subplot`。
使用您创建`'OuterPosition'`的三个对象的属性`axes`以适当的大小将它们放置在正确的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T10:46:01.517

如果您希望**图像**与**轴**对齐（扭曲的图像）：

更改`axis('image')`为`axis('tight')` .

如果您希望图像纵横比保持不变，并将轴与图像对齐：

好吧，这又快又脏，但是在应用之后`axis('tight')`，将图形调整到适当的比例......

# php - VB.net 中的哪些库可以在网页中提交（PHP）？

> ID：15808145
> 
> 赞同：-3
> 
> 时间：2013-04-04T10:02:01.757
> 
> 标签：php, vb.net, webpage

我正在为 VB.net 寻找 PHP 中的 cURL 之类的东西。
我想在 vb.net 中使用应用程序对网站进行编辑，而无需前往真实网站进行编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:11:28.090

一个快速的谷歌想出了[System.Net.WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)

# java - Play框架2.1集成Spring和Hibernate？

> ID：15808147
> 
> 赞同：5
> 
> 时间：2013-04-04T10:02:13.303
> 
> 标签：java, spring, hibernate, playframework

我必须在 Play Framework 2.1 中构建一个集成 Spring 和 Hibernate 的 Web 应用程序。我成功集成了 Hibernate，但是如何使用 Spring 来实现呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T12:34:43.563

现在在 Play 2.1 中使用`getControllerInstance`拦截器非常容易。这是一个具有 Play 2.1、Spring（带有 Java Config）和 JPA 的示例应用程序： [https ://github.com/jamesward/play2bars/tree/java-spring](https://github.com/jamesward/play2bars/tree/java-spring)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T08:40:40.457

I integrated spring (with Hibernate) within Play 2, you can see an example (full working source) and explanation here: [http://serverbabyblog.wordpress.com/2014/03/26/activiti-on-play-2-with-spring-and-hibernate-jpa-example/](http://serverbabyblog.wordpress.com/2014/03/26/activiti-on-play-2-with-spring-and-hibernate-jpa-example/)

Just skip all stuff, relative to "Activiti" framework.

Basically, I was forced to throw out jpa and jdbc plugins of Play!. Replacing their functionality by known open-source 3-d parties. It's OK. Play JPA plugin is too narrow-scoped for my case.

As result transaction managed by Spring transaction manager and entire example works with spring JPA annotations(using Hibernate JPA). It is really cross-platform example, because you can take all the spring stuff and move from play to other framework.

Good luck!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:36:37.340

我推荐詹姆斯沃德的答案。以下是从 Spring Java 2.0 play 应用程序升级到 2.1 的一些信息。

在 2.0.4 中，我使用了 Spring4Play2 依赖项，请参阅[https://github.com/scott-phillips/Spring4Play2/blob/master/README.markdown](https://github.com/scott-phillips/Spring4Play2/blob/master/README.markdown)但即使在升级到玩 2.1.1 时我也无法使用它虽然在[https://maven.library.tamu.edu/content/repositories/snapshots/play/spring_2.9.1/2.1-SNAPSHOT/有这个模块的 2.1-SNAPSHOT jar](https://maven.library.tamu.edu/content/repositories/snapshots/play/spring_2.9.1/2.1-SNAPSHOT/)

我得到的错误是“无法实例化插件 [play.api.db.BoneCPPlugin]。” 和“java.lang.IncompatibleClassChangeError: Found interface play.api.Application, but class is expected”和谷歌搜索没有带来任何答案。

所以我继续看詹姆斯沃德的好例子，放弃了那个插件，然后添加了

“org.springframework”%“spring-context”%“3.2.1.RELEASE”，

到我的 Build.scala，你可以在这里看到[https://github.com/jamesward/play2bars/blob/java-spring/project/Build.scala](https://github.com/jamesward/play2bars/blob/java-spring/project/Build.scala)

然后创建类似于示例的 Global.java 类，仅此而已。

我已经为遇到相同情况的人添加了这个答案，以便谷歌搜索错误消息可以找到解决方案。

# javascript - 如何使用javascript逐字节读取二进制文件？

> ID：15808151
> 
> 赞同：6
> 
> 时间：2013-04-04T10:02:16.467
> 
> 标签：javascript, node.js

我需要使用 javascript 逐字节读取二进制文件。我在这个站点中有以下代码，但它不起作用。我想我必须添加一些额外的 src 文件作为对它的引用。请帮我做。这里的代码...

```
var fs = require('fs');
var Buffer = require('buffer').Buffer;
var constants = require('constants');

fs.open("file.txt", 'r', function(status, fd) {
    if (status) {
        console.log(status.message);
        return;
    }
    var buffer = new Buffer(100);
    fs.read(fd, buffer, 0, 100, 0, function(err, num) {
        console.log(buffer.toString('utf-8', 0, num));
    });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T10:43:02.977

您可以逐字节同步读取文件：

```
fs.open('file.txt', 'r', function(err, fd) {
  if (err)
    throw err;
  var buffer = Buffer.alloc(1);
  while (true)
  {   
    var num = fs.readSync(fd, buffer, 0, 1, null);
    if (num === 0)
      break;
    console.log('byte read', buffer[0]);
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-26T14:33:10.230

您可以使用以下代码：

```
var blob = file.slice(startingByte, endindByte);
reader.readAsBinaryString(blob); 
```

以下是它的工作原理：

*   `file.slice`将文件切成字节并以二进制形式保存到变量中。您可以通过给出起始字节和结束字节来进行切片。

*   `reader.readAsBinaryString`将该字节打印为二进制文件。文件有多大并不重要。

有关详细信息，请参阅[此链接](http://www.html5rocks.com/en/tutorials/file/dndfiles/)。

# android - 读取使用 Box 启动的自定义文件

> ID：15808152
> 
> 赞同：1
> 
> 时间：2013-04-04T10:02:17.803
> 
> 标签：android, file, box-api

我们开发了一个 Android 应用程序，用于呈现我们自定义文件类型 ( `.vds`) 的文件。我能够为`.vds`存储在本地存储中的所有文件（文件）启动我的应用程序，但是如果文件存储在 Box 上并且我尝试使用 Box Android 应用程序访问它们，那么我将面临问题。我创建了以下意图过滤器：

```
 <intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:scheme="file" />
    <data android:host="*" />
    <data android:pathPattern=".*\\.vds" /> 
```

问题是在相应的活动中我能够获得意图，但是如果我尝试读取 URI（因为我们的渲染逻辑基于文件位置），它会给我一个 SD 卡上不存在的路径。如果我们尝试使用 Box Android Native App 打开文件会发生什么？文件在哪里下载，应该如何访问下载的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T06:18:31.237

这可能会解决你的问题。添加波纹管意图过滤器。

```
<activity android:name=".Activity"
          android:screenOrientation="portrait"
          android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
    <intent-filter>
       <action android:name="android.intent.action.VIEW"/>
        <action android:name="android.intent.action.EDIT"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <data android:pathPattern="*.snowdragon"/>
        <data android:mimeType="text/snowdragon"/>
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T17:04:36.150

如上所述，我遇到了同样的问题。虽然我还没有找到我认为是正确的解决方案（TM）的东西，但我确实有一些可能对其他人有用的东西要添加：

首先，我发现如果我在 Box 中下载文件（与脱机标记不同），然后在下载结果对话框或出现在应用程序底部的后续通知中单击该项目即可。但是，一旦您取消了该通知，似乎没有办法从 Box 中返回下载的文件。

其次，让我通过说我还没有仔细研究它来限定这一点，但我认为可以使用意图中的文件名信息来获取不存在的文件，以通过 Box API 检索文件，或者直接从云或可能通过 API 调用来检索离线项目。我想知道这是否真的是 Box 试图让我们处理这些虚假文件路径的原因，因为它们是如此公然虚假：

```
12-04 10:09:29.318: INFO/ActivityManager(607): START u0
{act=android.intent.action.VIEW dat=file:///non_existent_dummy_folder/foo.abcdef typ=application/abcdef cmp=com.foo.bar/.app.FooViewer} 
```

# php - 替换多维数组中的值

> ID：15808153
> 
> 赞同：4
> 
> 时间：2013-04-04T10:02:19.080
> 
> 标签：php, arrays

我的数组格式如下：

```
Array
(
    [Australia] => Array
        (
            [0] => [1990,0.01],
            [1] => [1991,0.02],
            [2] => [1992,0.02],
            [3] => [1993,0.02],
            [4] => [1994,0.02],
            [5] => [1995,0.02],
            [6] => [1996,0.02],
            [7] => [1997,0.02],
            [8] => [1998,0.02],
            [9] => [1999,0.02],
            [10] => [2000,0.02],
            [11] => [2001,0.02],
            [12] => [2002,0.02],
            [13] => [2003,0.02],
            [14] => [2004,0.02],
            [15] => [2005,0.02],
            [16] => [2006,0.02],
            [17] => [2007,0.02],
            [18] => [2008,0.02],
            [19] => [2009,empty],
            [20] => [2010,empty],
            [21] => [2011,empty],
            [22] => [2012,empty],
            [23] => [2013,empty],
            [24] => [2014,empty],
            [25] => [2015,empty]
        )

    [Pakistan] => Array
        (
            [0] => [1990,0.00],
            [1] => [1991,0.00],
            [2] => [1992,0.00],
            [3] => [1993,0.00],
            [4] => [1994,0.00],
            [5] => [1995,0.00],
            [6] => [1996,0.00],
            [7] => [1997,0.00],
            [8] => [1998,0.00],
            [9] => [1999,0.00],
            [10] => [2000,0.00],
            [11] => [2001,0.00],
            [12] => [2002,0.00],
            [13] => [2003,0.00],
            [14] => [2004,0.01],
            [15] => [2005,0.01],
            [16] => [2006,0.00],
            [17] => [2007,0.00],
            [18] => [2008,0.00],
            [19] => [2009,empty],
            [20] => [2010,empty],
            [21] => [2011,empty],
            [22] => [2012,empty],
            [23] => [2013,empty],
            [24] => [2014,empty],
            [25] => [2015,empty]
        )
) 
```

我想用**0替换****“空”**而不更改数组结构和元素位置。我卡住了怎么办。。

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T10:13:44.923

您可以使用[array_walk_recursive](http://www.php.net/manual/en/function.array-walk-recursive.php)函数：

```
function replace_empty(&$item, $key) {
    $item = str_replace('empty', '0', $item);
}

array_walk_recursive($your_array, 'replace_empty'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:20:04.050

您可以使用该[**`array_walk_recursive`**](http://fr2.php.net/manual/en/function.array-walk-recursive.php)函数，其回调函数将替换`empty`为`0`.

例如，考虑到您的数组是这样声明的：

```
$myArray[0] = array(23, empty, 43, 12);
$myArray[1] = array(empty, empty, 53, 19); 
```

*注意：我想你打错了，你的数组不仅包含一个字符串，还包含几个子元素。*

您可以使用这种代码：

```
array_walk_recursive($myArray, 'replacer');
var_dump($myArray); 
```

使用以下回调函数：

```
function replacer(& $item, $key) {
    if ($item === empty) {
        $item = 0;
    }
} 
```

注意 ：

*   第一个参数通过引用传递！
    *   这意味着修改它将修改数组中的相应值
*   我正在使用`===`运算符进行比较

你会得到以下输出：

```
array(
  0 => 
    array
      0 => int 23
      1 => int 0
      2 => int 43
      3 => int 12
  1 => 
    array
      0 => int 0
      1 => int 0
      2 => int 53
      3 => int 19) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:07:44.823

我会`foreach`在两个指数中（未测试）：

```
foreach($array as $country){
  foreach($country as &$field){
    if($field[1] == 'empty'){
      $field[1] = 0;
    }
  }
} 
```

（我假设`empty`是一个字符串）

**编辑：**

如果这`[1990,0.00]`不是数组而是字符串，则可以使用 str_replace

```
foreach($array as $country){
  foreach($country as &$field){
    $field = str_replace('empty', '0.00', $field);
    }
  }
} 
```**

# java - 访问 Birt Cell

> ID：15808154
> 
> 赞同：1
> 
> 时间：2013-04-04T10:02:19.320
> 
> 标签：java, birt

我在从另一个单元格访问 Birt Cell 值时遇到问题。

单元格 #1 具有动态文本及其表达式。它绑定到 DataSet#1。单元格 #2 具有动态文本及其表达式。它绑定到 DataSet#2。

单元格 #3 必须使用单元格 1 和单元格 2，并根据它们的值计算表达式。假设 cell#1.value()+cell#2.value()

问题是，我找不到获取 cell#1 值的方法。我试过了：

```
this.setDisplayValue(reportContext.getDesignHandle().getElementByID(997).text()); 
```

但处理时出错

```
Cannot find function text in object org.eclipse.birt.report.model.api.TextDataHandle@edc8ca 
```

它也没有 getValue、getDisplayValue 等功能

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:57:01.757

这里没有很多关于您的报告设计的信息。但是做出一些有根据的猜测。动态文本不是对结果进行任何操作的最佳选择。两种更简单的解决方案是 -

1 - 如果可行，将您的数据源连接到一个数据源中，并在单元格 1、2 和 3 中为您的值计算列

*   在大纲中，鼠标右键单击“数据集”并选择“新联合数据集”

2 - 对单元格 1 和 2 使用“数据”项，这将允许您使用“聚合”项来求和（*或以其他方式使用*）“数据”项中的值

*   在带有“动态文本”的报告项目的调色板中

# lua - 如何按字符串长度和分隔符拆分字符串？

> ID：15808159
> 
> 赞同：0
> 
> 时间：2013-04-04T10:02:38.777
> 
> 标签：lua, split

当主字符串超过 30 个字符并且我想使用的分隔符是字符之间的简单空格（主字符串中单词之间的最后一个空格）时，我试图将一个字符串拆分为 2 个字符串，因此它不会剪切单词。我正在向你们寻求帮助，因为我对 Lua 中的模式不是很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T11:00:01.423

```
local function split(str, max_line_length)
   local lines = {}
   local line
   str:gsub('(%s*)(%S+)', 
      function(spc, word) 
         if not line or #line + #spc + #word > max_line_length then
            table.insert(lines, line)
            line = word
         else
            line = line..spc..word
         end
      end
   )
   table.insert(lines, line)
   return lines
end

local main_string = 'This is very very very very very very long string'
for _, line in ipairs(split(main_string, 20)) do
   print(line)
end

-- Output
This is very very
very very very very
long string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:51:10.513

如果您只想在单词之间的最后一个空格处拆分字符串，试试这个

```
s="How to split string by string length and a separator"
a,b=s:match("(.+) (.+)")
print(s)
print(a)
print(b) 
```

# facebook - 我们可以将 facebook 的 javascript sdk 与 salesforce 集成吗？

> ID：15808160
> 
> 赞同：0
> 
> 时间：2013-04-04T10:02:39.860
> 
> 标签：facebook, facebook-graph-api, salesforce, facebook-javascript-sdk

我正在尝试将 facebook 的 javascript sdk 与 salesforce 集成。我遵循了链接上给出的所有说明：http: [//developers.facebook.com/docs/howtos/login/getting-started/](http://developers.facebook.com/docs/howtos/login/getting-started/) 但我无法登录。我在 facebook 开发人员控制台中复制粘贴的相同代码，它工作正常。现在我很困惑，在与 salesforce 集成时我是否遗漏了一些东西，或者 salesforce 不支持 facebook 的 javascript sdk？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:43:14.883

使用以下代码创建一个 VF 页面。在下面的页面中插入您的应用程序 ID，您应该一切顺利。我已经在静态资源中添加了 sdk。

```
 <apex:page >
 <div id="fb-root"></div>
 <script type="text/javascript" src="/resource/jQueryLatest"></script>
<script>
var j$ = jQuery.noConflict();
 window.fbAsyncInit = function() {
// init the FB JS SDK
FB.init({
  appId      : 'yourappId', // App ID from the App Dashboard
  channelUrl : '/resource/alljs', // Channel File for x-domain communication--- added the sdk in static resource.
  status     : true, // check the login status upon init?
  cookie     : true, // set sessions cookies to allow your server to access the session?
  xfbml      : true  // parse XFBML tags on this page?
});

// Additional initialization code such as adding Event Listeners goes here

};

// Load the SDK's source Asynchronously
// Note that the debug version is being actively developed and might 
// contain some type checks that are overly strict. 
// Please report such bugs using the bugs tool.
(function(d, debug){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
 ref.parentNode.insertBefore(js, ref);
 }(document, /*debug*/ false));
 j$(document).ready(function(){
 j$("#loginButton").click(function(){
   FB.login(function(response) {
   if (response.authResponse) {
     console.log('Welcome!  Fetching your information.... ');
     FB.api('/me', function(response) {
       console.log('Good to see you, ' + response.name+ '.');
     });
   } else {
     console.log('User cancelled login or did not fully authorize.');
   }
 });
 });
 j$("#getAllFriends").click(function(){
    FB.api('me/friends', function(response){
       // console.log('the response ' + response.data[]);
        for(var i =0; i< response.data.length;i++){
              try{
               var html = '<div>'+ response.data[i].name +' </div>';
               j$("#jsonDiv").append(html);
               }catch(e){
                   console.log('error name ' +response.data[i-1].name);
                   console.log('error ---' + e);
               }
        }
       });
 });

 });
</script>
<input type="button" id="loginButton" value="login to FB"></input>
<input type="button" id="getAllFriends" value="Get Friends"></input>
<div id="jsonDiv"></div>
</apex:page> 
```

# java - 引用转推 Twitter4j

> ID：15808161
> 
> 赞同：0
> 
> 时间：2013-04-04T10:02:40.350
> 
> 标签：java, android, twitter, twitter4j

我在使用 twitter4j 时遇到问题，当我使用以下代码获取时间线时：

```
try {
    ResponseList<Status> tweets = twitter.getHomeTimeline();
    for(Status s : tweets){
        Tweet temp = new Tweet(new URL(s.getUser().getProfileImageURL()),s.getUser().getName(),"@"+s.getUser().getScreenName() , s.getText());
        tweetsPanel.add(temp);
    }
} catch (TwitterException | MalformedURLException e) {
    e.printStackTrace();
} 
```

（Tweet 是本地类）除了时间轴中的转推显示为“Quote Retweet”外，一切正常：

```
RT @SOMEONE : the tweet. 
```

我希望它像网站一样，只是普通的转发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T11:07:20.323

在 twitter4j 上，转推以格式显示

> 转发@用户：推文

因为是 rt 在文本中采用的实际形式。如果你在 twitter 上发布一条具有相同格式的推文，它将被解析为来自 twitter 本身的正常转发。

您可以编辑它的唯一方法是解析文本并手动消除第一部分。尝试类似：

```
String tweetText = "";
String [] splitted=s.getText().split(":");
if(splitted.lenght>2)
for (int i=1;i<splitted.lenght-1;i++)
{
  tweetText+=splitted[i]+":";
}
tweetText+=splitted[splitted.lenght-1];
return tweetText; 
```

通过在 i=1 上开始 for 您将避免添加包含 RT @user 的第一个拆分，通过添加 splitted[i]+":" 您将放回推文中存在的最终其他 ":" 否则拆分将排除。当然你不想引入一个不存在的“：”，所以最后一段 splitted 在 for 之外，没有 +“：”

# hadoop - 多节点集群 Hadoop 设置

> ID：15808162
> 
> 赞同：4
> 
> 时间：2013-04-04T10:02:43.637
> 
> 标签：hadoop, cygwin

**伪分布式单节点集群实现**

我正在使用**带有 CYGWIN 的窗口 7 并**成功安装了 hadoop-1.0.3。我仍然在端口（localhost:50030、localhost:50060 和 localhost:50070）上启动服务作业跟踪器、任务跟踪器和名称节点。我已经完成了单节点实现。

现在我想实现伪分布式多节点集群。我不明白如何通过网络ips划分主从系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T19:07:32.343

对于您的 ssh 问题，只需点击单节点集群的链接：

[http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

是的，您需要在 conf 文件中指定主机和从机的 IP，您可以参考以下网址： http: [//www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-节点集群/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:00:34.793

尝试创建要在集群中添加的 VM 数量。确保这些 VM 具有相同的 hadoop 版本。找出每个 VM 的 IP。您将在 $HADOOP_HOME/conf 中找到名为 master 和 slaves 的文件，将 VM 的 IP 提到要视为 master 的 conf/master 文件，并对带有从节点 IP 的 conf/slaves 执行相同操作。

确保这些节点具有无密码 ssh 连接。格式化你的namenode，然后运行start-all.sh。

谢谢，

# java - 识别java堆栈跟踪中最旧的线程

> ID：15808167
> 
> 赞同：4
> 
> 时间：2013-04-04T10:02:55.890
> 
> 标签：java, jboss, stack-trace

我正在检查 Java 线程转储，从我的应用程序的一部分（部署在 JBoss 4.2.3 上）由于阻塞数据库查询而锁定时开始。有 6 个线程都在执行各种查询，我想确定哪个是第一个执行的，因为这将是最初原因的候选者。

我可以比较每个线程上的总 CPU 时间和用户时间，并将时间最长的线程视为最旧的（第一个运行的）吗？或者可能为不同的线程分配不同的时间？

例如（简单示例）

```
Thread ajp-0.0.0.0-8009-19 (Id = 21) RUNNABLE 
  Total CPU time 100000 ms, User time 100000 ms 

  stack here...

 Thread ajp-0.0.0.0-8009-19 (Id = 200) RUNNABLE 
  Total CPU time 200000 ms, User time 200000 ms 

  stack here...

Thread ajp-0.0.0.0-8009-19 (Id = 2590) RUNNABLE 
  Total CPU time 300000 ms, User time 300000 ms  < --- THIS THREAD MUST HAVE STARTED BEFORE OTHERS

  stack here... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:31:39.697

总 CPU 时间或总用户时间不会为您提供有关线程年龄的任何信息。只能说最小的线程年龄就是这个值。

您可以考虑使用线程转储分析器，例如[Mchr3k - Java Thread Dump Analyzer](http://mchr3k.github.com/javathreaddumpanalyser)或[Samurai](http://yusuke.homeip.net/samurai/en/index.html)

# android - 用于 OpenGL 代码的 Android JUnit 测试获得 NoClassDefFound：android/opengl/Matrix

> ID：15808168
> 
> 赞同：1
> 
> 时间：2013-04-04T10:03:01.947
> 
> 标签：android, opengl-es, junit

我有一个使用 OpenGL 的小 Android 应用程序。这个项目运行良好。

然后，我创建了一个新的 JUnit 项目来测试第一个。如果没有达到 OpenGL 代码，测试工作正常……但如果我使用一些 OpenGL 类（例如，android/opengl/Matrix），测试会抛出 NoClassDefFoundError。我多次重新制作了 JUnit 项目（在 JUnit3、JUnit4 中......），我一直都有这个错误。

我查看了两个项目中的类路径等...，我没有发现任何区别。我也查看清单文件，并搜索互联网......似乎没有人对 opengl 和 JUnit 有任何问题：P

有什么建议么？谢谢！

# sql-server-2008 - Hibernate 映射抛出类未找到异常

> ID：15808181
> 
> 赞同：1
> 
> 时间：2013-04-04T10:03:35.573
> 
> 标签：sql-server-2008, hibernate-mapping, tapestry

我一直在尝试通过 SQL Server 2008 使用 Hibernate 启动 Tapestry。我一开始就遵循了 Tapestry 和 Hibernate 指南，但是当我进入映射部分时，我得到了这个类未找到异常，进一步的抛出无法解析从资源异常映射文档，到目前为止我找不到解决方案。这是映射文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
 "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
 <hibernate-mapping>
 <class name="com.example.tutorial.entities.Address.java" table="address">

        <id name="id">          
            <column name="id"/>
            <generator class="increment"/>
        </id>
    <property name="honorific" type="java.lang.String"/>
    <property name="firstName" type="java.lang.String"/>
    <property name="lastName" type="java.lang.String"/>
    <property name="street1" type="java.lang.String"/>
    <property name="street2" type="java.lang.String"/>
    <property name="city" type="java.lang.String"/>
    <property name="state" type="java.lang.String"/>
    <property name="zip" type="java.lang.String"/>
    <property name="email" type="java.lang.String"/>
    <property name="phone" type="java.lang.Integer"/>       
</class> 
```

这是hibernate.cfg.xml：

```
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory>
    <property name="hibernate.connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
    <property name="hibernate.connection.url">jdbc:sqlserver://localhost/testdb;integratedSecurity=true</property>
    <property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
    <property name="hibernate.connection.username">not required</property>
    <property name="hibernate.connection.password"></property>
    <property name="hbm2ddl.auto">update</property>
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.format_sql">true</property>
    <mapping resource="mappings/hibernate.hbm.xml" />
</session-factory> 
```

这是完整的错误跟踪： [https ://docs.google.com/file/d/0B0_KI_Lyv76_b05WTkZxVG1XLTA/edit?usp=sharing](https://docs.google.com/file/d/0B0_KI_Lyv76_b05WTkZxVG1XLTA/edit?usp=sharing)

欢迎任何建议。

# php - jQuery 使用选定的值

> ID：15808184
> 
> 赞同：0
> 
> 时间：2013-04-04T10:03:36.817
> 
> 标签：php, jquery

我有一个用 PHP 创建的选择框，例如：

```
echo " <option value=\"".$row['CatId']."\">".$row['CatNaam']."</option>"; 
```

其中 catid 是需要发送的 id。

在选择框下，我有一个 jQuery 可点击 div，例如：

```
 <div id="addtag" style="cursor: pointer;" onclick="clicktag();"> 
```

在我的脚本中，我有一个函数 clicktag，例如：

```
function clicktag()
{
$('#addtag').hide();
alert("Tag added ");
}
</script> 
```

我想要做的是提醒选定的值（catid），所以函数必须像：

```
function clicktag()
{
$('#addtag').hide();
alert("Tag added "+tagid);
}
</script> 
```

但是我怎样才能得到tagid？我尝试了很多示例，但无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:06:34.707

您需要对该`<select>`元素的引用才能获取其值。你如何获得这种取决于 HTML 的外观，但最简单的方法是给它一个 ID（如果它还没有 ID）并使用它来选择它：

```
<select name="yourSelect" id="yourSelect">
    // option tags here
</select> 
```

然后代码：

```
function clicktag() {
    var tagId = document.getElementById('yourSelect').value;
    // the rest of your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:05:45.160

尝试`val()`

```
function clicktag()
{
 $('#addtag').hide();
 alert("Tag added "+ $('#yourSelectID').val());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:06:08.037

使用`change`选择框的事件：

```
//where #selectBox is id of your select box
$('#selectBox').change(function() {
    var currentValue = $('#selectBox :selected').val();
    alert(selectVal);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:06:47.907

用于`.val()`获取`<select>`元素的当前值。

例子：

```
<select name="mySelectElement" id="selectElement">
    <option value="0">First element</option>
    <option value="1">Second element</option>
    ...
</select>

<script type="text/javascript">
function onClick() {
    alert('The selected value is ' + $('#selectElement').val());
}
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T10:08:12.760

```
 $('#selectBox').live('change',function(){
   var currentValue = $('#selectBox :selected').val();
   alert(selectVal);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T10:13:18.807

选择的值是你说的 catid 把它放在一个 var 中，它就会起作用。您可以尝试将其放入您的代码中

```
function clicktag()
{
$('#addtag').hide();
 var currentValue = $('#selectBox :selected').val();
   alert(selectVal);

}
</script> 
```

# css - 使用 css 'column-count' 时嵌入 youtube 的错误

> ID：15808185
> 
> 赞同：11
> 
> 时间：2013-04-04T10:03:37.180
> 
> 标签：css, google-chrome, youtube

我在网页中插入了一个 youtube 嵌入代码（iframe 代码），并使用 css column-count 自动将页面中的文本分为两列。

```
.newspaper
{
-moz-column-count:2; /* Firefox */
-webkit-column-count:2; /* Safari and Chrome */
column-count:2;
} 
```

问题是当我在初始视口之后嵌入 youtube 视频时，它显示为黑色图像。这是一个示例：http: [//jsfiddle.net/KTvCV/689/](http://jsfiddle.net/KTvCV/689/)。似乎这是 youtube 和 chrome 的错误。这个问题有什么解决方案/修复吗？尝试了不同的东西，但没有工作，所以想用 jQuery columnizer 而不是 CSS 列数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:51:32.360

## 难以复制这个问题 - 观察

我看到 Chrome 尝试以多列格式显示 iframe 嵌入视频的行为非常不一致。

以下似乎并没有始终如一地解决问题：

1.  我尝试`<p>`在文本周围放置标签，认为这可能是与行长相关的怪癖。

2.  我尝试清除缓存。

3.  更改列的宽度

4.  更改 iframe 的尺寸

此外，首屏下方的视频似乎没有被渲染（绘制？）。

## 一次成功的案例

似乎渲染良好的唯一情况是有一个视频出现在第一列中。

我不知道为什么会这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-25T18:15:11.867

我遇到了这个问题，对我来说，解决方法是给出`<iframe>`一个明确`width`的像素，, `position: relative`,`z-index`和一个 3d 变换，例如`transform: translate3d(0, 0, 0)`.

熟悉 OS X Yosemite 10.10.3 的 Chrome 43.0.2357.130（64 位）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-09T02:24:46.743

对我来说，只有添加`transform: translate3d(0, 0, 0)`我的`<video>`标签才有效。

注意：我使用的是`<video>`标签，而不是嵌入的`<iframe>`YouTube 视频。但是我对列有同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-26T16:30:07.207

我可以通过将 YouTube 视频与列数相结合来确认问题。[http://codepen.io/djschoone/pen/VYdaOv](http://codepen.io/djschoone/pen/VYdaOv)显示正在发生的事情。视频移动到另一个位置。

HTML

```
<html>
 <body>
   <article class="display-2col">
   <p>Text</p>
   <p><iframe src="http://www.youtube.com/embed/GUstB3VS4KY?rel=0&amp;autoplay=0&amp;wmode=opaque&amp;controls=0&amp;showinfo=0" width="614"     height="370" class="video-filter video-youtube vf-gustb3vs4ky" frameborder="0">    </iframe></p>
    </article>
  </body>
</html> 
```

CSS

```
.display-2col{
  -moz-column-count:2;
  -moz-column-gap:20px;
  -webkit-column-count:2;
  -webkit-column-gap:20px;
  column-count:2;
  column-gap:20px;
} 
```

与 IE 和 FF 的区别在于，视频在 Chrome 上放置了标签，而其他视频则获得了标签。

我想这与定位有关。调查它！

# javascript - 延迟标志淡入网站？

> ID：15808186
> 
> 赞同：-3
> 
> 时间：2013-04-04T10:03:40.527
> 
> 标签：javascript, jquery, html, css

只是想知道在用户进入页面约 5 秒后让左上角的徽标淡入的最佳方法是什么？

这是[http://jsfiddle.net/elroyz/sjD8X/](http://jsfiddle.net/elroyz/sjD8X/)角落里的标志

```
body {
background-color:#000;} 
```

我只放这个是因为它不会让我在没有代码的情况下发布

我读了一些关于 jquery 延迟的东西，但我对此几乎一无所知，所以认为可能还有另一种选择

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:09:44.933

```
$('img').delay(5000).fadeOut(250); 
```

这将在 5 秒后淡出 img。代码中的时间以毫秒为单位。

有关此的更多信息，请参阅

*   [api.jquery.com/delay/](http://api.jquery.com/delay/)
*   [api.jquery.com/fadeout/](http://api.jquery.com/fadeout/)
*   [api.jquery.com/fadein/](http://api.jquery.com/fadein/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:21:59.140

尝试使用这种转换。

[http://www.problogdesign.com/coding/get-started-with-css3-transitions-today/](http://www.problogdesign.com/coding/get-started-with-css3-transitions-today/)

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:18:53.860

HTML

```
<img onload="this.style.opacity='1';" src="image path" /> 
```

CSS

```
img {opacity:0;-moz-transition: opacity 2s;-webkit-transition: opacity 2s;-o-transition: opacity 2s;transition: opacity 2s;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T10:19:35.547

CSS 3 动画。（使用供应商前缀，因为它仍然是新的和实验性的）：

```
@-webkit-keyframes fadein {
  0%   { opacity: 0; }
  100% { opacity: 1; }
}
@-moz-keyframes fadein {
  0%   { opacity: 0; }
  100% { opacity: 1; }
}
@-o-keyframes fadein {
  0%   { opacity: 0; }
  100% { opacity: 1; }
}
@keyframes fadein {
  0%   { opacity: 0; }
  100% { opacity: 1; }
}

#logo {
  -webkit-animation: fadein 5s infinite;
  -moz-animation:    fadein 5s infinite;
  -o-animation:      fadein 5s infinite;
  animation:         fadein 5s infinite;
} 
```

# c++ - C++ 我的函数调用有什么问题

> ID：15808194
> 
> 赞同：-2
> 
> 时间：2013-04-04T10:04:03.790
> 
> 标签：c++, visual-c++

在我的主要方法中有以下代码：

```
int main(int argc, char* argv[])
{

    Color c1(10,1,2); 
    HSL h=convertToHSL(c1);
    return 0;
} 
```

使用以下 convertToHSL 方法：

```
HSL convertToHSL(Color const& c) {

   return HSL(0,0,0);
} 
```

我的项目中出现构建错误。颜色是一个定义如下的类：

```
Color::Color(){}
Color::Color(float r,float g,float b){
    this->r=r;
    this->g=g;
    this->b=b;
}

Color::~Color(void){} 
```

HSL 定义如下：

```
 HSL::HSL() {}
HSL::HSL(float h,float s,float l) {
    this->h=h;
    this->s=s;
    this->l=l;
}

HSL::~HSL(void){} 
```

使用我已经提到的 convertToHSL 方法。

什么可能是错的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:05:49.123

`c1`没有声明。你的意思是

```
Color c1(10,1,2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:06:35.273

`Color c1(10,1,2);`? 缺少对象名称 c1

# php - 使用ajax加载内容

> ID：15808196
> 
> 赞同：0
> 
> 时间：2013-04-04T10:04:08.553
> 
> 标签：php, jquery

我是ajax的新手。

我有**index.html**

```
<script>
$(document).ready(function(){
  $("button").click(function(){
    $.ajax({url:"n.php",success:function(result){
      $("#div1").html(result);
    }});
  });
});
</script>

<div id="div1" style="margin-left: 25;"></div>
<button>Add Author</button> 
```

**php**

```
Name:<input type="text" name="txtname">
age:<input type="text" name="txtage"> 
```

只是我想在“添加作者”按钮单击而不刷新页面时在 index.html 页面上添加名称和年龄文本框。但是上面的代码只加载名称和年龄文本框一次。每次单击按钮时我都想要它。

**编辑：**

现在，如果我想放置另一个按钮“删除作者”，并且想要执行完全相反的操作（即）删除两个文本框。我该怎么办？你能帮忙吗？

并想知道如何检查验证服务器端？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:07:35.687

改变这个

```
$("#div1").html(result); 
```

到

```
$("#div1").append(result); 
```

因此，每次单击按钮时，它都会附加文本框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:09:11.147

尝试以下操作：

```
<script>
$(document).ready(function(){
  $("button").click(function(){
    $.ajax({url:"n.php",success:function(result){
      $("#div1").append(result);
    }});
  });
});
</script> 
```

使用`append`而不是`html`. `append`将在 div 中存在的任何内容的末尾添加响应，而`html`将替换当前内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:15:20.320

```
 <script>
   $(document).ready(function(){
   $("button").click(function(){
    $.ajax({url:"n.php",success:function(result){
  $("#div1").append(result);
   }});
   });
  });
  </script>

    <div id="div1" style="margin-left: 25;"></div>
    <button>Add Author</button> 
```

# c# - javascript中的日期解析问题

> ID：15808200
> 
> 赞同：3
> 
> 时间：2013-04-04T10:04:27.983
> 
> 标签：c#, javascript, sql-server, json, json.net

我在具有日期时间类型的列的数据表中获取值。之后，我使用`Json.Net`.

```
jsonData = JsonConvert.SerializeObject(datatable); 
```

数据表中的日期为：`2013-04-03 04:01:24.623` 序列化后存储`jsonData`为：`2013-04-03T04:01:24.623`

在我的页面上，我将其用作：

```
timeStamp = new Date(jsonRow.TimeStamp).toLocaleString(); // Here jsonRow.TimeStamp is extracted from the received json response. 
```

在`Safari`，浏览器中，它给出了错误：`Invalid Date`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:10:47.227

Here you can find a similar Problem with an accepted Solution [Date parsing in javascript is different between safari and chrome](https://stackoverflow.com/questions/6427204/date-parsing-in-javascript-is-different-between-safari-and-chrome)

我希望这有帮助 ：）

# xamarin.ios - 在 TableView 的行中插入 SubView

> ID：15808201
> 
> 赞同：1
> 
> 时间：2013-04-04T10:04:29.383
> 
> 标签：xamarin.ios, xamarin, xamarin-studio

我通过 C# 制作了我的 UI，而不是使用 xcode。我在我的视图（主屏幕）中添加了一个 UITableview，并希望在表格的每个单元格中插入一个子视图。问题是我不能单独访问这些行？如何获取行索引号并向该行添加子视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:01:08.460

使用 UICollectionView 和自定义单元格子视图。如果操作正确，最接近流式布局。

或者为 CellForRowAtIndexPath 委托调用返回自定义 UITableViewCell 单元格。（C# 是 Tableview 数据源上的 GetCell()）

您需要尝试在 xcode 中设计视图，并了解 iOS 中使用的 springs 和 struts 或自动布局策略。

# mysql - MySQL INSERT 如果 SELECT COUNT(*) 大于 1

> ID：15808202
> 
> 赞同：0
> 
> 时间：2013-04-04T10:04:29.993
> 
> 标签：mysql, if-statement

我正在尝试使用 MySQL 语句，我需要在其中检查用户凭据是否正确；只有当它们是正确的——我插入数据

```
IF (SELECT COUNT(*) FROM users WHERE uid = 1 AND password = "67^8ax%!") > 0
THEN
INSERT INTO messages (uid, text, time)
VALUES (1, "Hello", CURRENT_TIMESTAMP)
END IF 
```

由于平台的限制，我必须在单个 MySQL 查询中执行这两项操作。

有什么办法让这个工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:19:55.753

试试这个查询

在 MYSQL 中工作，认为不应该在 MYSQL 中工作：P

```
INSERT INTO messages (uid, text, time)
(SELECT 1, "Hello", CURRENT_TIMESTAMP FROM users WHERE uid = 1 AND password = "67^8ax%!") 
```

如果只有 1 个不同的用户具有给定的用户名和密码，则将起作用..

## **[小提琴](http://sqlfiddle.com/#!2/8fe76/1)**

# java - Java 阶乘输出

> ID：15808205
> 
> 赞同：3
> 
> 时间：2013-04-04T10:04:38.290
> 
> 标签：java, output, factorial

我应该创建一个程序，询问用户一个数字并获取该数字的阶乘，然后询问他们是否想做另一个阶乘（Y，N）。

它应该像这样工作：

*   输入一个数字以乘以：4
*   4！= 24
*   做另一个阶乘（Y，N）？是
*   重复直到输入 N

我的输出是这样的：

*   输入一个数字以求阶乘：
*   “做另一个阶乘？（Y，N）？”
*   4！= 1，无论我输入 Y 还是 N。

    这是我的代码：

    ```
    import java.util.Scanner;
    public class factorial
    {
         public static void main ( String [] args )
         {
         Scanner input = new Scanner(System.in);
         System.out.print("Enter a number you want to take the factorial of: ");
         int num = input.nextInt();
         int fact = 1;
         System.out.printf("%d! = %d\n ", num, fact, Factorial(num, fact));
     } 
         public static int Factorial(int num, int fact)
         {
             Scanner input = new Scanner(System.in);
             char foo;

              System.out.print("Do another factorial (Y,N)?");
              foo = input.next().charAt(0);

                 for (int i = 1; i >= num; i++)
                 {   
                     fact *= i;
                     if (foo == 'Y')
                     {
                         System.out.print("Do another factorial (Y,N)?");
                         foo = input.next().charAt(0);
                         continue;
                     }
                     else
                     {
                         break;
                     }
                 }
                 return fact;  

         }

    } 
    ```

更改后：

```
import java.util.Scanner;
public class factorial
{
    public static void main ( String [] args )
    {
      Scanner input = new Scanner(System.in);

        System.out.print("Enter a number you want to take the factorial of: ");
        int num = input.nextInt();

        int fact = 1;

        System.out.printf("%d! = %d\n ", num, Factorial(num, fact));

        System.out.print("Do another factorial (Y,N)? ");
        char  foo = input.next().charAt(0);

        while (foo != 'N')
        {
            System.out.print("Do another factorial (Y,N)? ");
            foo = input.next().charAt(0);

        System.out.print("Enter a number you want to take the factorial of: ");
        num = input.nextInt();

        System.out.printf("%d! = %d\n", num, Factorial(num, fact));
    }
}
    public static int Factorial(int num, int fact)
    {
        for (int i = 1; i <= num; i++)
            {   
                fact *= i;
            }
            return fact; 
    } 
```

}

输出还是有一些问题：

*   输入一个数字以乘以：4
*   4！= 24
*   做另一个阶乘（Y，N）？是
*   做另一个阶乘（Y，N）？是
*   输入一个数字以乘以：4
*   4！= 24
*   做另一个阶乘（Y，N）？ñ
*   输入一个数字以求阶乘：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:08:40.003

您计算阶乘，但从不打印它：

```
System.out.printf("%d! = %d\n ", num, fact, Factorial(num, fact)); 
```

应该

```
System.out.printf("%d! = %d\n ", num, Factorial(num, fact)); 
```

此外，您的`Factorial`函数不使用`fact`参数，因此您应该删除它，并在函数内声明一个局部变量。

最后，询问“你想要另一个阶乘”应该在顶层完成，而不是在`Factorial`函数内部。您的代码也没有使用用户输入的字符：您需要一个循环来检查用户的输入，并在输入时继续`Y`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:08:22.770

这是错误：

```
System.out.printf("%d! = %d\n ", num, fact, Factorial(num, fact)) 
```

你的输出不是真的`Factorial(num, fact)`但是`fact`，这应该是：

```
System.out.printf("%d! = %d\n ", num, Factorial(num, fact)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:08:53.263

删除以下代码行：

扫描仪输入 = 新扫描仪（System.in）；System.out.print("做另一个阶乘 (Y,N)？");

从阶乘法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:11:27.450

你应该重构你的代码如下：

*   应该有一个方法接受`int`并返回它的阶乘，并且什么也不做。

*   所有的输入/输出，以及“做另一个阶乘？” 循环，应该在`main()`.

这将使逻辑更容易正确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T10:44:05.727

这将对您有所帮助。

```
public static void main ( String [] args )
     {
     String yesno ="Y";
     while(yesno.equalsIgnoreCase("y"))
     {
         Scanner input = new Scanner(System.in);
         System.out.print("Enter a number you want to take the factorial of: ");
         int num = input.nextInt();
         System.out.printf("%d! = %d\n ",num,fact(num));
         System.out.print("Do another factorial (Y,N)?");
         Scanner inputKey = new Scanner(System.in);
         yesno = inputKey.nextLine();

     }
     } 
```

这是阶乘函数：

```
public static int fact(int num)
    {
        if(num<=1)
        {
            return 1;

        }else{
            return (num*(fact(num-1))); 
        }
    } 
```

# c# - DialogViewController 上的样式标题

> ID：15808212
> 
> 赞同：1
> 
> 时间：2013-04-04T10:05:03.467
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我想在我的 DialogViewController 上设置标题的样式。控制器的内容是从 JSON 响应中加载的。

如何使用背景颜色等设置标题元素的样式？

```
string responseString = string.Empty;
        Uri uri = new Uri ("http://loca!host.com/sample.json");
        HttpWebRequest request = new HttpWebRequest (uri);
        request.Method = "GET";

        HttpWebResponse response = request.GetResponse () as HttpWebResponse;
        var obj = JsonValue.Load (new StreamReader (response.GetResponseStream())) as JsonObject;
        if (obj != null) {

            var root = JsonElement.FromJson (obj);
            _rootVC = new DialogViewController (root);

            var jsonSection = root["section-1"] as Section; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:34:24.023

一个 Section，有一个 HeaderView 和 FooterView 属性，你可以在那里设置它们。

```
var section = new Section () { 
                HeaderView = new UIImageView (UIImage.FromFile     ("caltemplate.png")),
                FooterView = new UISwitch (new RectangleF (0, 0, 80, 30)),
            }; 
```

# jquery - 悬停元素时触发另一个元素上的悬停效果

> ID：15808213
> 
> 赞同：5
> 
> 时间：2013-04-04T10:05:07.997
> 
> 标签：jquery

我遇到了这个问题：当实际上将鼠标悬停在 h3 元素上时，我想在图像上强制悬停功能

html:

```
<p><a><img class="size-full wp-image-1236 alignleft" alt="phone-icon-red" src="..." width="50" height="50" /></a></p>
<h3>Contact Us</h3> 
```

CSS：

```
img:hover{
    margin-left: 10px;
} 
```

js：

```
$('h3').hover(function(e){
                e.preventDefault();
                $(this).prev('p').find('img').trigger('mouseover');
            }); 
```

看我的**[小提琴](http://jsfiddle.net/7L4WZ/166/)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:33:19.400

我有解决您的问题的方法。

添加与 hover 伪类相同的 img 类：

```
img:hover, img.hover{
    margin-left: 10px;
} 
```

将 mouseover 和 mouseout 事件绑定到 h3 元素：

```
$('h3').on({
    'mouseover': function() {
        $(this).prev('p').find('img').addClass('hover');
    },
    'mouseout': function() {
        $(this).prev('p').find('img').removeClass('hover');
    }
}); 
```

[小提琴](http://jsfiddle.net/7L4WZ/167/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:46:19.623

您可以使用多个 jQuery 事件处理程序：

```
$("h3").on({
    mouseenter: function(){
        $('img').addClass('imgHoverClass');
    },
    mouseout: function(){
        $('img').removeClass('imgHoverClass');    
    }
}); 
```

工作示例：http: [//jsfiddle.net/7L4WZ/169/](http://jsfiddle.net/7L4WZ/169/)

请享用 ：）

# css - 跨屏幕分辨率拟合图像大小

> ID：15808215
> 
> 赞同：0
> 
> 时间：2013-04-04T10:05:10.213
> 
> 标签：css, html, background, width

我有一个 div 标签

```
<div id="MainMenu1" dojotype="dijit.layout.ContentPane"></div> 
```

此 div 与类似的 css 相关联

```
#MainMenu1 
{
height:53px;
background: url(../images/top_banner.png) no-repeat;
background-position:center;
margin:auto;
width:100%;
border:0;
} 
```

我看到背景图像在较小的屏幕上很好，但在较宽的屏幕上，它只占据中心位置。我希望图像即使在更宽的屏幕上也能占据整个屏幕，并且我不希望图像“重复”。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:31:12.427

```
#MainMenu1 
{
height:53px;
margin:auto;
width:100%;
border:0;
background: url(../images/top_banner.png) no-repeat center center fixed;
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
} 
```

尝试这个。它非常适合我。它应该在中心完美地适合背景，并合理地将其拉伸到正在查看网站的任何屏幕尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:13:42.690

您可以让图像重复意味着它覆盖整个空间，或者使用`background-size: cover`它来缩放它以覆盖整个区域，同时保持图像的原始纵横比。

# javascript - 使用 .next() 查找 div 和 .append() 追加回第一个？

> ID：15808237
> 
> 赞同：3
> 
> 时间：2013-04-04T10:06:17.110
> 
> 标签：javascript, jquery, css

我设置了一个简单的 JSfiddle ..

[http://jsfiddle.net/DbetR/](http://jsfiddle.net/DbetR/)

`$("div.postdata").next(".content").appendTo(".postdata");`

这可能不起作用，因为它试图将它的自我附加到它的自我或其他东西上。关于如何解决这个问题的任何想法？

我希望内容 1 附加到第一个 div，内容 2 附加到第二个。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:08:36.410

每个的下一个兄弟`.postdata`是`<p>`元素，而不是`.content`。你可以使用类似的东西来使事情变得可行：

```
$("div.postdata").each(function() {
    $(this).nextAll(".content:first").appendTo(this);
}); 
```

**演示：http:** [//jsfiddle.net/DbetR/2/](http://jsfiddle.net/DbetR/2/)

# sql - 如何选择主表数据并选择参考表顶部一数据sql查询

> ID：15808243
> 
> 赞同：3
> 
> 时间：2013-04-04T10:06:34.197
> 
> 标签：sql, stored-procedures, inner-join

我需要一个 sql 查询，它应该返回主表条目及其子表条目（**仅最新的一个条目**）。我为此使用了内部连接。但我它不能正常工作。谁能给我一个适当的查询

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:24:56.993

在 SQLServer2005+ 中使用带有[OUTER APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)运算符的选项

```
SELECT *
FROM master t1 OUTER APPLY (
                            SELECT TOP 1 t2.Col1, t2.Col2 ...
                            FROM child t2
                            WHERE t1.Id = t2.Id
                            ORDER BY t2.CreatedDate DESC
                            ) o 
```

[具有CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)和[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)排名函数的 OR 选项

```
;WITH cte AS
 (                            
  SELECT *, 
         ROW_NUMBER() OVER(PARTITION BY t1.Id ORDER BY t2.CreatedDate DESC) AS rn
  FROM master t1 JOIN child t2 ON t1.Id = t2.Id
  )
  SELECT *
  FROM cte
  WHERE rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:30:59.597

试试这个，

```
SELECT ID, DATE
(
SELECT M.ID, C.DATE, ROW_NUMBER() OVER(PARTITION BY M.ID ORDER BY C.DATE DESC) RN
FROM MASTER M
JOIN CHILD C
ON C.ID = M.ID
) A
WHERE RN = 1 
```

# java - 节点数组 toString Java

> ID：15808247
> 
> 赞同：0
> 
> 时间：2013-04-04T10:06:39.057
> 
> 标签：java, arrays, list, tostring

我有一个返回给定节点的子节点的方法。Node （实例变量）中的所有内容都是 char 字符。

```
 public Node[] children(){

    return (Node[]) children.toArray(new Node [children.size()]);
 } 
```

我想稍后输出那些孩子。但它只输出参考 [Lie.gmit.Node;@7d487b8b]。我将如何覆盖 toString 方法？或者我应该创建一个输出子节点的新方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:33:31.157

您需要覆盖`toString`Node 类的方法。例如

```
public class MyNode extends Node {

@Override
public String toString() {
    //your code here
}

} 
```

您可能需要实现更多代码（我不知道 Node 是您的自定义实现还是某个库）。

之后，您可以使用[Arrays.deepToString](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object%5b%5d%29)方法打印它：

```
MyNode[] children = someNode.children();
System.out.println(Arrays.deepToString(children)); 
```

更新：

如果您实现了`Node`该类，则无需扩展它，只需将`toString`方法添加到您的`Node`类中即可。

# java - 如何打印模式不匹配的列号和行号

> ID：15808251
> 
> 赞同：1
> 
> 时间：2013-04-04T10:06:48.590
> 
> 标签：java, regex, expression

如何打印不匹配正则表达式模式的列号和行号。

我当前的代码：

```
 reader = new BufferedReader(new FileReader(credentialPath));

 Pattern pattern = Pattern
                .compile(ApplicationLiterals.CREDENTIALS_URL_REG_EX);
 String line;
 while ((line = reader.readLine()) != null) {
      Matcher matcher = pattern.matcher(line.trim());
      if (matcher.find()) {
            // System.out.println(matcher.group());
            // System.out.println("**" + matcher.start());
            // System.out.println("***" + matcher.end());
            result = true;
            count1++;
       } else {
            // count1++;
            result = false;
            // System.out.println(matcher.group());
            // System.out.println(matcher.start());
            System.out.println("****problem at line number" + count1);
            break;
       }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:28:06.830

你得到 a 的原因`IllegalStateException`是`matcher.group()`or `matcher.start()`。

很明显，如果控件进入`else`块，则意味着`line`不匹配`Pattern`. 当没有找到匹配项时，如何尝试打印匹配项的 the`start`或 the `group`？

异常堆栈跟踪会清楚地说明：- **No match found**。

如果您看到[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#group%28%29)：-

> 抛出： IllegalStateException - 如果尚未尝试匹配，或者之前的匹配操作失败

在你的情况下，由于匹配失败，它会抛出`IllegalStateException`.

正如您已经完成的那样，保留`matcher.group()`&`matcher.start()`注释，取消注释`count1++`并打印`count1`. 它会给你行号。

**更新：-**

把它作为你的`else`块。

```
else {
    count1++;
    result = false;
    System.out.println("**This line doesn't match the pattern*** "+line);
    System.out.println("****problem at line number" + count1);
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:48:42.893

如果您想显示不匹配的模式，那么您可以做两件事。

1.创建正则表达式的相反模式，并在 else 块中匹配它并显示确切的单词。例如，如果你有一个像`[aeiou]*`then 相反的正则表达式`[^aeiou]*`。

2.保持`matcher.start() and matcher.end()`相同的变量，并在 else 块中使用这些变量来查找发生不匹配的行的其余部分。假设如果你结束 20 并且在循环的下一次迭代中它来到 else 块，这意味着 20 之后有不匹配的，所以在 20 之后显示行的内容。

编辑：

从流动的代码中获得帮助

```
public static void main(String[] args) {
    String source = "Java is best \n Test Java is good \n  Java Hello";
    Pattern pattern = Pattern.compile("Java");
    Matcher matcher = null;
    Scanner scanner = new Scanner(source);
    String line = null;
    int end = 0;
    int lineNumber = 0;
    while (scanner.hasNextLine()) {
        line = scanner.nextLine();
        matcher = pattern.matcher(line);
        ++lineNumber;
        while (matcher.find()) {
            System.out.println(matcher.group());
            end = matcher.end();
        }
        if (end < line.length() - 1) {
            System.out.println("NOt matched Line :" + lineNumber + " Words:-"
                    + line.substring(end));
        }
    }
} 
```

# javascript - 试图在我的网站中加载 js 文件

> ID：15808252
> 
> 赞同：0
> 
> 时间：2013-04-04T10:06:48.930
> 
> 标签：javascript, web, assets

我正在尝试加载`js`目录中的文件，`/public_html/javascript/`但它给出了 404 错误，我检查了目录和文件的权限，它似乎没问题。我`css/`里面有另一个具有相同权限的目录，我在加载文件时没有问题，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:21:54.547

404 表示找不到文件。403 将与权限更相关。

我将从使用 Web 开发人员工具（例如 Firebug 等）开始，它应该为您提供浏览器请求的 javascript 文件的 url，这应该可以更容易地验证路径并进行相应的修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:53:57.453

我检查了`conf.d`apache 中的文件夹，其中有一个名为`javascript-common.conf`Inside`javascript`的文件，其中有一个`/usr/share/javascript/`. 我评论了它，我重新启动了 apache，现在不再禁止 javascript 文件夹。

# android - 如何在android中为布局（顶部和底部）绘制两条水平线

> ID：15808254
> 
> 赞同：1
> 
> 时间：2013-04-04T10:06:57.607
> 
> 标签：android, android-layout

我需要在布局中绘制两条水平线。一条线想要在顶部，第二条线应该在底部。

如何做到这一点？

谢谢你宝贵的时间。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:19:09.047

我想，它会对你有所帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:background="@android:color/white" >

   <View  
       android:layout_width="match_parent"
       android:layout_alignParentTop="true"
       android:layout_height="2dp"
       android:background="@android:color/black" />
   <View  
       android:layout_width="match_parent"
       android:layout_height="2dp"
       android:layout_alignParentBottom="true"
       android:background="@android:color/black" />

</RelativeLayout 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:21:39.963

使用此代码

```
<View
android:id="@+id/line_top" 
android:layout_width="fill_parent"
android:layout_height="1dip"
android:background="#FF0000" 
android:layout_alignParentTop="true"/>
<View
android:id="@+id/line_bottom" 
android:layout_width="fill_parent"
android:layout_height="1dip"
android:background="#FF0000" 
android:layout_alignParentBottom="true"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:27:59.750

方法1

使用相对布局。您也可以定义其他 ui 元素。具有指定高度的 View 并将其放置在顶部和底部。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<View
    android:layout_width="fill_parent"
    android:layout_height="20dp" // specify a number in dp to increase or decrease height
    android:layout_alignParentBottom="true" 
    android:layout_alignParentLeft="true"
    android:background="#FF2824" change do your desired color
    android:orientation="vertical" 
   />

<View
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="20dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="#FF2824"//change do your desired color
    android:orientation="vertical"/>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/linearLayout1"
    android:layout_marginLeft="102dp"
    android:layout_marginTop="106dp"
    android:text="Button" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:layout_marginTop="66dp"
    android:text="Button" />

</RelativeLayout> 
```

结果快照。

![在此处输入图像描述](https://i.stack.imgur.com/xoGIf.png)

方法二

在这里，您没有使用任何新视图。只需将自定义背景添加到现有布局即可。这将比上述占用更少的内存，因为您没有创建任何新视图。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/bkg" //add custom background
tools:context=".MainActivity" > 
```

在resources下创建一个drawable文件夹，在其下定义bkg.xml。

```
 <?xml version="1.0" encoding="utf-8"?>
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android">
   <item> 
    <shape android:shape="rectangle">
    <solid android:color="#FF0000" /> 
    </shape>
   </item>   
   <item android:top="20dp" android:bottom="20dp"   >  
    <shape android:shape="rectangle"> 
    <solid android:color="#ffffff" />
   </shape>
  </item>    
 </layer-list> 
```

# laravel - 在模型中使用 Laravel 包

> ID：15808255
> 
> 赞同：0
> 
> 时间：2013-04-04T10:06:58.193
> 
> 标签：laravel, laravel-3

我正在使用 Laravel 3 并想在我的一个模型中使用 Sentry::user 作为 $include ，但它不会让我这样做。到目前为止，我已经在 $include 中尝试了“Sentry::user”，结果是“ap$iw{u[]”。我也尝试过“sentry.user”，但这意味着哨兵模型（我没有）和用户关系。

因此，为了让这个问题对其他人也有价值：如何将捆绑包中的模型包含在您自己的 Laravel 3 模型中？

```
<?php
public $includes = array('company', '??');

public function company() {
    return $this->belongs_to('Company');
}

public function user() {
    return $this->belongs_to('Sentry::user');
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:52:36.807

我以前没有使用过 Sentry，但如果此模型在 Sentry 命名空间下命名空间，那么您需要为模型提供完全限定的命名空间。例如：

```
return $this->belongs_to('Sentry\User'); 
```

# sql-server - Sqoop：在从 Hadoop 导出数据之前截断 SQL Server 表

> ID：15808257
> 
> 赞同：3
> 
> 时间：2013-04-04T10:07:07.817
> 
> 标签：sql-server, hadoop, sqoop

我们正在使用 Sqoop 将数据从配置单元导出到 SQL Server。新数据始终附加到 SQL Server 中的现有数据。

是否可以在开始导出之前通过 Sqoop 截断 SQL Server 表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T18:01:12.957

您可以使用[sqoop eval](http://sqoop.apache.org/docs/1.4.0-incubating/SqoopUserGuide.html#id1772462)在数据库上执行任意 SQL。这将允许您在不“离开” Sqoop 的情况下截断表格。例如：

```
sqoop eval --connect 'jdbc:sqlserver://1.1.1.1;database=SomeDatabase;username=someUser;password=somePassword' --query "TRUNCATE TABLE some_table"

sqoop export --connect 'jdbc:sqlserver://1.1.1.1;database=SomeDatabase;username=someUser;password=somePassword' --export-dir /path/to/someTable/on/HDFS --table some_table --fields-terminated-by \001 
```

`--fields-terminated-by \001`假定 Hive 表使用默认分隔符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T02:33:05.303

Sqoop 不是通用查询工具，“eval”功能仅用于评估目的，不应在生产模式下使用。您始终可以将简单的 Java 代码放在一起，这些代码将以最适合您的用例的方式执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T16:44:52.767

有实现 sqoop --truncate 选项的功能请求 [https://issues.apache.org/jira/browse/SQOOP-1313](https://issues.apache.org/jira/browse/SQOOP-1313)

如果您有兴趣，请在该 JIRA 页面上投票。

# java - 在android中减去2个不同列表中的值

> ID：15808259
> 
> 赞同：0
> 
> 时间：2013-04-04T10:07:15.973
> 
> 标签：java, android, arrays

我有一个整数年数组及其对应的值，它看起来像下面的代码

```
int[] earningYear = {2012,2013,2014};
int[] earningAmount = {100,150,120};
int[] expenseYear = {2012,2014};
int[] expenseAmount = {50,30}; 
```

我想从与年份对应的收入金额中减去费用金额，输出列表应如下所示

```
int[] savingsYear = {2012,2013,2014};
int[] savingsamount = {50,150,90}; 
```

请帮助我这样做。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:09:14.657

如果 EarningYear 始终包含所有年份，并且 EarningYear 和费用年均已排序，那么这将是一个可能的解决方案

```
int[] earningYear = {2012,2013,2014};
int[] earningAmount = {100,150,120};
int[] expenseYear = {2012,2014};
int[] expenseAmount = {50,30};

int[] savingsYear = new int[earningYear.length()];
int[] savingsAmount = new int[earningYear.length()];

int expenseYearIndex = 0;

for(int i = 0; i < earningYear.length(); i++) {
    savingsYear[i] = earningYear[i];
    savingsAmount[i] = earningsAmount[i];
    if(expenseYear.length() > 0 && expenseYear[expenseYearIndex] == earningYear[i]) {
        savingsAmount[i] -= expenseYear[expenseYearIndex];
        expenseYearIndex++;
    }
} 
```

这应该这样做。

然而，更好的解决方案是使用已经建议的列表，以及一些保存年份和年份金额的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:52:26.607

@umair.ali 和 @Casper 给出的答案很好，将您的数组转换为 Maps 是要走的路。
我建议使用`TreeMap`（或其他`SortMap`接口实现）。TreeMap 默认按升序对其键进行排序。这样一来，如果您**真的**想要节省大量的费用，您就不必在处理后进行任何尴尬的地图排序。

这是完整的示例：

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.TreeMap;

public class SavingsApp {

    public Map<Integer, Integer> arraysToMap(int[] years, int[] money) {
        Map<Integer, Integer> newMap = new HashMap<Integer, Integer>();
        if (years == null || money == null || years.length != money.length) {
            throw new IllegalArgumentException();
        }
        for (int i=0; i< years.length; i++ ) {
            newMap.put(years[i], money[i]);
        }

        return newMap;
    }

    public Map<Integer, Integer> calculateSavings(Map<Integer, Integer> earningsMap, Map<Integer, Integer>expensesMap) {
        Map<Integer, Integer> savingsMap = new TreeMap<Integer, Integer>();
        savingsMap.putAll(earningsMap);

        for (Entry<Integer, Integer> expensePerYear : expensesMap.entrySet()) {
            Integer year = expensePerYear.getKey();
            Integer expense = expensePerYear.getValue();

            Integer earning = savingsMap.get(year);
            if (earning == null) {
                earning = 0;
            }
            savingsMap.put(year, earning-expense);
        }
        return savingsMap;
    }

    public static void main(String[] args) {
        int[] earningYear = {2012,2013,2014};
        int[] earningAmount = {100,150,120};
        int[] expenseYear = {2012,2014};
        int[] expenseAmount = {50,30};

        SavingsApp app = new SavingsApp();

        // convert arrays to maps
        Map<Integer, Integer> earningsMap = app.arraysToMap(earningYear, earningAmount);
        Map<Integer, Integer> expensesMap = app.arraysToMap(expenseYear, expenseAmount);

        // compute savings per year
        Map<Integer, Integer> savingsMap = app.calculateSavings(earningsMap, expensesMap);

        // convert result map to array
        List<Integer> savingsList = new ArrayList<Integer>(savingsMap.values());
        Integer[] savingsArray = new Integer[savingsList.size()];
        savingsList.toArray(savingsArray);
    }
} 
```

需要注意的一件事是，`savingsArray`它将是`Integer[]`type 而不是`int[]`.

# ios - iOS UTF-8 标签字符串

> ID：15808260
> 
> 赞同：5
> 
> 时间：2013-04-04T10:07:16.037
> 
> 标签：ios, objective-c, utf-8

我有一个要在标签中显示的 UTF-8 编码字符串。

当我设置断点并检查保存字符串的变量时，一切看起来都很好。但是，当我尝试输出到日志或标签时，我得到了拉丁编码。

![Xcode 截图](https://i.stack.imgur.com/cTtCX.png)

我已经尝试了几乎所有关于 SO 及其他方面的建议，但我就是无法让字符串正确显示。

这是我的代码：

```
NSString *rawString = [NSString stringWithFormat:@"%@",m_value];

const char *utf8String = [rawString UTF8String];
NSLog (@"%@", [NSString stringWithUTF8String:utf8String]);
NSLog (@"%s", utf8String);
NSLog (@"%@", rawString);

self.resultText.text = [NSString stringWithUTF8String:utf8String]; 
```

m_value 是一个 NSString，并且在调试窗口中，它也显示了正确的编码。

```
m_value NSString *  0x006797b0 @"鄧樂愚..."
    NSObject    NSObject    
    isa Class   0x3bddd8f4
    [0] Class 
```

我正在使用 iOS 6.1 SDK。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:25:56.153

好的，如果`m_value`是 const char 包含 UTF-8 字符串，则必须使用此方法：

`- (id)initWithUTF8String:(const char *)bytes`

```
NSString *correctString = [[NSString alloc] initWithUTF8String: m_value]; 
```

传递`const char*`给`@`格式化程序是不正确的，因为`@`意味着`NSObject`, 所以它总是不正确的并且可能导致应用程序崩溃

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T03:43:28.447

当我想在标签上显示高棉时，我使用字体“Hanuman.ttf”。这是我使用的代码：

```
`UIFont *font = [UIFont fontWithName:@"Hanuman" size:20.0f];

self.nameLabel.text = [NSString stringWithFormat:@"%@",itemName];
self.nameLabel.font = font;` 
```

![设置字体](https://i.stack.imgur.com/rPa0f.png)

![结果](https://i.stack.imgur.com/NGzxl.png)

我不知道这对你有没有帮助，但这是我以前做过的！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T15:44:03.183

所以我终于设法弄清了这个问题。

这`m_value` `NSString`是由我无法访问源代码的第三方库设置的。即使这个变量的值在调试面板（即显示汉字）中被正确解码，字符串实际上是用`NSMacOSRomanStringEncoding`.

我能够通过将输出复制到[TextWrangler](http://www.barebones.com/products/textwrangler/)并翻转编码来确定这一点，直到找到正确转换为 UTF-8 的编码。

然后在 Objective-C 中修复，我首先将其翻译`NSString`为`const char`：

```
const char *macString = [bxr.m_value cStringUsingEncoding:NSMacOSRomanStringEncoding]; 
```

然后转换回`NSString`：

```
NSString *utf8String = [[NSString alloc]initWithCString:macString encoding:NSUTF8StringEncoding]; 
```

+1 给@Vitaly_S 和@iphonic，他们的回答最终让我找到了这个解决方案。对于其他偶然发现这一点的人；似乎从 Xcode 4.6.1 开始，不能信任调试窗口来正确呈现字符串，但您可以依赖`NSLog`输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T10:21:14.933

考虑到您的变量**m_value** NSData，您可以尝试以下操作

```
self.resultText.text = [[NSString alloc] initWithData:m_value encoding:NSISOLatin1StringEncoding]; 
```

有很多可用的编码，你也可以试试

```
NSASCIIStringEncoding       /* 0..127 only */
NSNEXTSTEPStringEncoding
NSJapaneseEUCStringEncoding
NSUTF8StringEncoding
NSISOLatin1StringEncoding
NSSymbolStringEncoding
NSNonLossyASCIIStringEncoding
NSShiftJISStringEncoding          /* kCFStringEncodingDOSJapanese */
NSISOLatin2StringEncoding
NSUnicodeStringEncoding
NSWindowsCP1251StringEncoding    /* Cyrillic; same as AdobeStandardCyrillic */
NSWindowsCP1252StringEncoding    /* WinLatin1 */
NSWindowsCP1253StringEncoding    /* Greek */
NSWindowsCP1254StringEncoding    /* Turkish */
NSWindowsCP1250StringEncoding   /* WinLatin2 */
NSISO2022JPStringEncoding        /* ISO 2022 Japanese encoding for e-mail */
NSMacOSRomanStringEncoding

NSUTF16StringEncoding      /* An alias for NSUnicodeStringEncoding */

NSUTF16BigEndianStringEncoding          /* NSUTF16StringEncoding encoding with explicit endianness specified */
NSUTF16LittleEndianStringEncoding      /* NSUTF16StringEncoding encoding with explicit endianness specified */

NSUTF32StringEncoding                  
NSUTF32BigEndianStringEncoding          /* NSUTF32StringEncoding encoding with explicit endianness specified */
NSUTF32LittleEndianStringEncoding        /* NSUTF32StringEncoding encoding with explicit endianness specified */ 
```

# java - 计时器不更新方法无法正常工作

> ID：15808261
> 
> 赞同：0
> 
> 时间：2013-04-04T10:07:17.043
> 
> 标签：java, timer

我想将 data() 方法更新为每 500 毫秒，但我下面的计时器更新 data() 方法超过 4 或 5 秒。谢谢..

```
class RemindTask extends TimerTask {
    public void run() {
            try {

                data();

            } catch (UnsupportedCommOperationException ex) {
                Logger.getLogger(test2.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(test2.class.getName()).log(Level.SEVERE, null, ex);
            } catch (TooManyListenersException ex) {
                Logger.getLogger(test2.class.getName()).log(Level.SEVERE, null, ex);
            }

    } 
```

和定时器触发方法是..

```
 private void okActionPerformed(java.awt.event.ActionEvent evt) {                                   

if(evt.getSource()==ok)
{
    bul=true;
    if(new communication().bul1==false)
    {
    JOptionPane.showMessageDialog(test2,"GPS CONNECTE");

    }
    //System.out.print(bd.get);
   timer = new Timer();
    timer.schedule(new RemindTask(), 500); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:53:54.640

您使用了错误版本的`schedule`方法。第二个参数是**延迟**，而不是间隔。您可以参考[JavaDoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html)了解详细信息。

`ScheduledExecutorService`优于`Timer`，以下是代码示例：

```
ScheduledExecutorService ses = Executors.newScheduledThreadPool(1);
ses.scheduleAtFixedRate(new RemindTask(), 0, 500, TimeUnit.MILLISECONDS); 
```

你`RemindTask`应该实现`Runnable`接口：

```
class RemindTask implements Runnable {
  public void run() {
  // ...
  }
} 
```

另请阅读[JavaDoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)。

# java - 对 jar 文件执行主要调用时发生错误

> ID：15808262
> 
> 赞同：0
> 
> 时间：2013-04-04T10:07:18.910
> 
> 标签：java

当我运行与 Jar 文件相关的 Main 类时，出现以下错误。有人请帮助我。谢谢。

```
D:\data\Gateway\dist>java -jar Gateway.jar com.Application
Exception in thread "main" java.lang.NoClassDefFoundError: org/springframework/context/support/AbstractApplicationContext
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getMethod0(Unknown Source)
        at java.lang.Class.getMethod(Unknown Source)
        at sun.launcher.LauncherHelper.getMainMethod(Unknown Source)
        at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.springframework.context.support.AbstractApplicationContext
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 6 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:09:30.530

讯息

```
java.lang.NoClassDefFoundError: 
    org/springframework/context/support/AbstractApplicationContext 
```

表示`org.springframework.context`必须将 jar 添加到类路径中。

# php - 用户在 set_time_limit PHP 时定义函数调用

> ID：15808265
> 
> 赞同：0
> 
> 时间：2013-04-04T10:07:21.227
> 
> 标签：php, function, user-defined-functions, termination

我想在一段时间内运行一个文件。我可以为此使用 set_time_limit 函数。但我想在终止时调用一个函数。这个函数是必须调用的。否则我将无法再次运行此文件。

当 set_time_limit 限制满足时，有什么方法可以在终止时调用函数。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:23:08.323

当脚本执行完成或函数被调用时，您可以使用[`register_shutdown_function`](http://php.net/manual/en/function.register-shutdown-function.php)设置回调函数。`exit`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:23:52.500

你可以使用`register_shutdown_function`：

```
<?php
function shutdown() {
    // 3 seconds are over
    set_time_limit(0); // now we want no limit anymore
    echo "Shutdown!\n";
    while(true); // some other long action
}
error_reporting(0);
set_time_limit(3);
register_shutdown_function('shutdown');
while(true); // some long action 
```

`error_reporting`调用是为了避免超过时间限制时出现错误消息。

# php - 使用减号时PHP日期格式减去

> ID：15808270
> 
> 赞同：2
> 
> 时间：2013-04-04T10:07:45.477
> 
> 标签：php, variables, date

在 php 中，当我使用此功能时：

```
$today = date("dmY"); 
```

它给了我想要的日期，但没有空格或像这样的分隔符：

```
02042013 
```

当我添加分隔符时，它会减去数字

```
$today = date("d-m-Y");
outputs: -2013 because it does day minus month minus year 
```

为什么？通常这可以正常工作。谢谢，洛朗

注意：我正在使用安装在我的本地主机 Mac os X 10.8 上的 apache 和 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:14:45.060

利用

```
 $today  = mktime(0, 0, 0, date("m")  , date("d"), date("Y"));
 echo date('d-m-Y', $today); //04-04-2013 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:45:50.437

尝试这样的事情：

```
$today = date("yyyy-mm-dd"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:15:51.757

Might be an issue with the date function in your particular version of PHP... until it's fixed you can use this:

```
<?php

$t = date('d.m.Y');
$today = preg_replace('!\.!','-',$t);

echo $today;

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:20:21.910

Try it as `$today = date("Y-m-d");`

For More refer [http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T10:36:01.443

如果没有人给你正确的答案，请尝试通常的肮脏方式：

```
$dt = date("d")."-".date("m")."-".date("Y"); 
```

这不是一个很好的方式，我认为 bt 可以完成工作。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-04T10:15:08.020

```
 $today = date("dmY");   //04042013
 $today = date("d-m-Y"); //04-04-2013 
```

# mysql - 使用 mysql 中的单个更新查询更新具有多条记录的表

> ID：15808275
> 
> 赞同：1
> 
> 时间：2013-04-04T10:07:51.987
> 
> 标签：mysql, sql

我正在检索一组记录以更新表。

结果集如下所示，

```
MemId          username             memberName
 -----         -----------          -------------
1              James                James cam                
2              Peter                Peter Parker
3              Allen                Allen Martin
4
.
.
.
n rows 
```

我正在使用选择查询获得以上结果集。我想通过单个更新查询使用 memberName 列更新用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:14:07.823

试试这个

```
 UPDATE table SET username = memberName 
```

[**在这里演示**](http://sqlfiddle.com/#!2/5cc0e/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:10:41.653

更新是这样的（*如果您确定自己在做什么，请不要使用 WHERE 子句*

```
UPDATE table SET username = memberName WHERE MemId > 4 
```

# android - android灰色网格中的谷歌地图

> ID：15808280
> 
> 赞同：0
> 
> 时间：2013-04-04T10:08:10.690
> 
> 标签：android, google-maps

我正在尝试在应用程序中使用地图视图，因此我一一执行了这些步骤。但我只有一个灰色网格。我生成了四次 API 密钥，但每次都得到相同的结果。

请你帮助我好吗？

这些是我得到的错误：

```
failed to find provider info for com.google.settings
couldn't get connection factory client 
```

我的清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.me.test.g_maps"
    android:versionCode="1"
    android:versionName="1.0" >

        <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="17" />

       <uses-permission android:name="android.permission.INTERNET" />
         <uses-permission     android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
         <uses-permission     android:name="com.me.test.g_maps.permission.MAPS_RECEIVE"/>
         <uses-permission     android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
         <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

        <permission
        android:name="com.me.test.g_maps.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>

        <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
            <activity
            android:name="com.me.test.g_maps.MainActivity"
            android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyCEgLQ7HgXiKTP8grZRmpIPAeWoSfAjrBM"/>

            <uses-library android:name="com.google.android.maps" />

        </application>

        </manifest> 
```

我的活动

```
 package com.me.test.g_maps;

    import android.os.Bundle;

   import com.google.android.maps.MapActivity;

    public class MainActivity extends MapActivity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
        }

        @Override
        protected boolean isRouteDisplayed() {
            // TODO Auto-generated method stub
            return false;
        }

    } 
```

我的 xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent">

        <com.google.android.maps.MapView 
            android:id="@+id/mapView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:enabled="true"
            android:clickable="true"
            android:apiKey="AIzaSyCEgLQ7HgXiKTP8grZRmpIPAeWoSfAjrBM"
            />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:11:57.990

看起来您几乎没有问题（如果您的目标是 Google Map API V2 技术）

**1.**首先去掉这个权限：

```
<uses-library android:name="com.google.android.maps" /> 
```

它是 Google Maps API V1 的一部分，在 Google Maps API V2 中不需要。

**2.** Google Maps API V2 需要 OpenGL-v2 支持，因此您必须在清单文件中添加以下内容：

```
<uses-feature
  android:glEsVersion="0x00020000"
  android:required="true"/> 
```

**3.**检查您是否在 Google API 控制台中打开了正确的 API： ![在此处输入图像描述](https://i.stack.imgur.com/9MEUe.jpg)

**4.**尝试通过删除`debug.keystore`，编译项目再次重新生成密钥，这将产生新的`SHA1`签名。

**5.** 如果您在模拟器中运行您的应用程序，请查看我写的关于如何在模拟器中启用 Google Map API V2 的博客文章：

[模拟器中的 Google Map API V2](http://blog-emildesign.rhcloud.com/?p=527)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:41:53.133

替换`com.google.android.maps.MapView`为`com.google.android.gms.maps.MapView`。您仍在使用 Maps API V1 的一部分。使用 SupportMapFragment 而不是 MapView 会更好（更容易）。

也不要使用`MapActivity`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:33:15.913

如果您使用的是 Google api V1，则必须[创建一个调试密钥](https://developers.google.com/maps/documentation/android/v1/mapkey?hl=es#getdebugfingerprint)才能在调试应用程序时正确加载地图而不签名。
否则，你必须看看[这里](https://developers.google.com/maps/documentation/android/start#obtaining_an_api_key)。需要在清单上进行新配置才能使用谷歌地图 api V2。

# c# - 演员表问题 其中A类：通用 列出 >

> ID：15808285
> 
> 赞同：2
> 
> 时间：2013-04-04T10:08:26.943
> 
> 标签：c#, generics, covariance

我有下一节课：

```
public class EntityBase<T>
{
    public T Id { get; set; }

} 
```

它的实施者：

```
public class ClassA : EntityBase<Int32>
{
     ...
}

public class ClassB : EntityBase<Int64>
{
     ...
} 
```

`ClassA`在代码中，它不知道类 -`ClassB`它只知道 EntityBase<...> 的存在，我做了这样的事情：

```
 // Here for sure I get the list of `ClassA`
     object obj = GetSomeHowListOfClassA();
     List<EntityBase<Int32>> listOfEntityBases = (List<EntityBase<Int32>>)obj; 
```

我得到了错误：

```
Unable to cast object of type 'System.Collections.Generic.List`1[...ClassA]' to type 'System.Collections.Generic.List`1[...EntityBase`1[System.Int32]]'. 
```

我这样修复它：

```
var listOfEntityBases = new List<EntityBase<Int32>>(obj); 
```

但我不喜欢这种方式，因为我正在创建新的 List<>。有没有办法投呢？感谢任何预付款。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:43:47.710

您不能出于明确的原因这样做。让我们假设这行代码**可以**工作：

```
 List<EntityBase<Int32>> listOfEntityBases = (List<EntityBase<Int32>>)obj; 
```

这意味着在该行之后，您可以说以下

```
listOfEntityBases.Add(new EntityBase<Int32>()); 
```

但实际上这一行同时会将`EntityBase<Int32>`对象添加到您`obj`的类型中`List<ClassA>`- 这绝对是**InvalidCast**。

因此，您不能同时声明与和**相同**的变量。`List<ClassA>``List<EntityBase<Int32>>`

虽然，它很容易被允许，`IEnumerable<T>`因为您**不能**为此类集合添加新值。

这就是为什么他们有`in`和`out`在泛型声明中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:43:38.037

你不能这样做，因为：

*   C# 中的协方差不适用于类；
*   接口`IList<T>`并且`ICollection<T>`不是协变的。

您可以在此处执行的唯一选项（制作列表副本除外）是转换为`IEnumerabe<T>`：

```
var listOfEntityBases = (IEnumerable<EntityBase<Int32>>)obj; 
```

# logging - SFL4J 和 JDK 日志记录之间的不同日志记录级别

> ID：15808298
> 
> 赞同：15
> 
> 时间：2013-04-04T10:08:57.740
> 
> 标签：logging, slf4j, java.util.logging

我使用 JDK 日志作为日志框架，使用 SLF4J 作为简单的外观。当我记录不同级别的日志时，我有一些疑问。

**SLF4J 具有以下日志级别**

```
trace (the least serious)<br>
debug<br>
info<br>
warn<br>
error<br>
fatal (the most serious)<br> 
```

**JDK 日志记录具有以下日志级别**

```
SEVERE (highest value)<br>
WARNING<br>
INFO<br>
CONFIG<br>
FINE<br>
FINER<br>
FINEST (lowest value)<br> 
```

如果我想将日志级别设置为 DEBUG，那么该级别在 JDK 日志记录中不可用。谁能解释一下在这种情况下我们如何获得调试级别的日志记录。对于这种情况，我们是否需要做任何额外的配置？

**更新**

这是我的属性文件配置

```
handlers = com.amc.logging.handlers.DebugLogHandler

com.amc.logging.handlers.DebugLogHandler.pattern=c:/logs/debug_log.log
com.amc.logging.handlers.DebugLogHandler.level=FINE
com.amc.logging.handlers.DebugLogHandler.formatter=java.util.logging.SimpleFormatter
com.amc.logging.handlers.DebugLogHandler.append=true 
```

请让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T12:54:15.400

我在下面的帖子的帮助下解决了这个问题。

[使用 jdk 进行 slf4j 日志记录 – 如何启用调试？](https://stackoverflow.com/questions/4278438/slf4j-logging-with-jdk-how-to-enable-debug)

对于 SLF4J 中的 DEBUG 级别日志记录，我们必须在 java.util.logging 中映射 FINE 级别。

我们必须将默认日志记录级别设置为 FINE 或 FINE 的更低级别。这可以通过将波纹管放在日志配置文件中来实现。

.level= 精细

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-07T19:48:53.423

您遇到的另一个问题是，尽管您已经定义了一个处理程序，但您还没有将它分配给任何记录器。

要将其分配给根记录器，请使用

```
.handlers=com.amc.logging.handlers.DebugLogHandler 
```

要将其分配给应用程序中的记录器，请定义记录器

```
com.company.application.package.level=FINE 
```

并将您的处理程序分配给它： `com.company.application.package.handlers=com.amc.logging.handlers.DebugLogHandler`

另外，com.amc.logging.handlers.DebugLogHandler 是您自己定义的类吗？它在你的类路径中吗？因为否则我认为 java.util.logging (JUL) 不会识别它。

尝试 JUL 附带的处理程序之一：

```
handlers=java.util.logging.FileHandler, java.util.logging.ConsoleHandler 
```

并使用您想要的级别、日志位置和格式配置它们。

这是一个示例 logging.properties 文件：[https://tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_java.util.logging_(default)](https://tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_java.util.logging_(default))

它使用 apache 的 juli 实现中的处理程序，但只是用 JUL 中的类替换：[https ://docs.oracle.com/javase/7/docs/api/java/util/logging/package-summary.html](https://docs.oracle.com/javase/7/docs/api/java/util/logging/package-summary.html)

# linux - Linux open(path, O_NONBLOCK | O_RDONLY | O_DIRECT) 块预先在文件中

> ID：15808310
> 
> 赞同：2
> 
> 时间：2013-04-04T10:09:28.743
> 
> 标签：linux, file, asynchronous, posix, aio

我想在我的程序中读取异步磁盘。

服务器上有很多硬盘，如果一个硬盘很慢，则程序阻塞。我想使呼叫异步。

如果我打电话：

打开（路径，O_NONBLOCK | O_RDONLY | O_DIRECT）

然后预读，然后预读最多使用 8000 微秒，但会阻止我的程序。

是否可以在没有线程池的情况下启用异步磁盘读取？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T10:27:54.060

该`O_NONBLOCK`标志对普通文件没有任何影响（至少在大多数情况下），因为它们不被认为是 I/O 可以阻塞的东西 - 是的，它会阻塞从磁盘读取数据所花费的时间长度但它不会像套接字或管道那样无限期地阻塞。

一个例外是启用强制锁定时 - 锁定区域的读取或写入可能会无限期阻塞（直到锁定被释放），并且`O_NONBLOCK`会影响此类调用的行为方式。

至于在没有线程的情况下是否可以实现异步 I/O，答案是肯定的（请参阅`aio(7)`or`io_setup(2)`和`io_submit(2)`朋友），但如果您从中受益匪浅，我会感到惊讶。

# javascript - ASP.Net：在页面上呈现链接的 javascript 文件

> ID：15808312
> 
> 赞同：0
> 
> 时间：2013-04-04T10:09:42.610
> 
> 标签：javascript, asp.net, render

我正在使用 CSS StyleManager，它让我将所有 CSS 文件合并并呈现为页面上的一个字符串。所以我没有更多的外部 CSS 文件。

我想对我的 javascript 库做同样的事情。有没有一种聪明的方法来实现这一点，而无需阅读 page_load 中的文件并将文本自己添加到页面中？

背景信息：我想将网站保存为单个文件以进行分发。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:32:21.200

为了提高性能，您应该使用外部（css 和 javascript 文件），以便它们可以被浏览器缓存，并且您的页面将加载得更快。此外，为了减少 http 请求，您可以使用[Bundling 和 Minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)将外部 css 和 javascript 文件合二为一。

# android - 防止Android软键盘在片段中向上移动视图？

> ID：15808314
> 
> 赞同：6
> 
> 时间：2013-04-04T10:09:49.427
> 
> 标签：android, view, keyboard, android-fragments

我有一个包含四个选项卡的活动，每个选项卡都作为一个片段实现。在其中一个选项卡中，我想防止软键盘向上推视图，而键盘仍应将其他片段中的视图向上推。有谁知道如何实现这一目标？

我不能使用活动的 windowSoftInputMode 标志，因为这会阻止它用于具有所有四个片段的整个活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-19T08:40:24.023

尝试动态更改[标志](http://developer.android.com/intl/ru/guide/topics/manifest/activity-element.html#wsoft)

使用以下内容更改选项卡单击侦听器中 Activity 的 softInputMode。

`getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);`

# architecture - 这是广义化用例吗？

> ID：15808315
> 
> 赞同：1
> 
> 时间：2013-04-04T10:09:51.157
> 
> 标签：architecture, uml, use-case

我有一个主要用例`Manage foods`，我想做`more specific usecase diagram`哪个有这些用例`Add food`，那么这三个用例`Delete food`和用例`Edit food`之间的关系类型是什么`Manage foods`？不是泛化吗？ ![在此处输入图像描述](https://i.stack.imgur.com/4zkaL.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:00:41.817

目前尚不清楚`Manage offers`用例的目的是什么。它究竟概括了什么？

最好摆脱`Manage offers`用例并拥有`Delete offer`和`Edit offer`用例包含`Select offer`用例。

当信誉低的用户使用需要批准的扩展用例时，扩展在类似于 Stack Overflow 帖子编辑的情况下很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T08:45:36.857

我认为，您应该从模型中删除用例“管理报价”，只留下删除、编辑和添加报价用例。这三个用例应该代表您应用程序的“报价管理”中包含的服务。

# c++ - 使用 Visual Studios 自定义模板向导设置项目配置

> ID：15808317
> 
> 赞同：1
> 
> 时间：2013-04-04T10:09:56.237
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++

我正在尝试使用自定义项目向导创建 C++ 项目模板。我只需要一个用于使用外部库的空 C++ CLI 应用程序的简单模板，即我需要向导来设置以下设置`Project -> Properties`：

```
Configaration Setting -> VC++ Directories -> Executable Directories 
Configaration Setting -> VC++ Directories -> Include Directories 
Configaration Setting -> VC++ Directories -> Library Directories 
Configaration Setting -> Linker -> Input -> Additional Dependencies 
```

看来我需要`default.js`更具体地修改`AddConfig`包含以下内容的函数：

```
function AddConfig(proj, strProjectName)
{
    var config = proj.Object.Configurations('Debug');

    var CLTool = config.Tools('VCCLCompilerTool');
    // TODO: Add compiler settings

    var LinkTool = config.Tools('VCLinkerTool');
    // TODO: Add linker settings
} 
```

我需要帮助来设置项目设置。

# scala - 使用 spark 访问 HDFS 失败

> ID：15808322
> 
> 赞同：3
> 
> 时间：2013-04-04T10:10:10.573
> 
> 标签：scala, apache-spark, hdfs, cloudera

我正在使用 Cloudera 4.2.0 和 Spark。

我只是想试试 Spark 给出的一些例子。

```
// HdfsTest.scala
package spark.examples

import spark._

object HdfsTest {
  def main(args: Array[String]) {
    val sc = new SparkContext(args(0), "HdfsTest",
      System.getenv("SPARK_HOME"), Seq(System.getenv("SPARK_EXAMPLES_JAR")))

    val file = sc.textFile("hdfs://n1.example.com/user/cloudera/data/navi_test.csv")
    val mapped = file.map(s => s.length).cache()
    for (iter <- 1 to 10) {
      val start = System.currentTimeMillis()
      for (x <- mapped) { x + 2 }
      //  println("Processing: " + x)
      val end = System.currentTimeMillis()
      println("Iteration " + iter + " took " + (end-start) + " ms")
    }
    System.exit(0)
  }
} 
```

编译没问题，但是总有一些运行时问题：

```
Exception in thread "main" java.util.ServiceConfigurationError: org.apache.hadoop.fs.FileSystem: Provider org.apache.hadoop.hdfs.HftpFileSystem could not be instantiated: java.lang.IllegalAccessError: tried to access method org.apache.hadoop.fs.DelegationTokenRenewer.<init>(Ljava/lang/Class;)V from class org.apache.hadoop.hdfs.HftpFileSystem
    at java.util.ServiceLoader.fail(ServiceLoader.java:224)
    at java.util.ServiceLoader.access$100(ServiceLoader.java:181)
    at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:377)
    at java.util.ServiceLoader$1.next(ServiceLoader.java:445)
    at org.apache.hadoop.fs.FileSystem.loadFileSystems(FileSystem.java:2229)
    at org.apache.hadoop.fs.FileSystem.getFileSystemClass(FileSystem.java:2240)
    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:2257)
    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:86)
    at org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:2296)
    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2278)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:316)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:162)
    at org.apache.hadoop.mapred.JobConf.getWorkingDirectory(JobConf.java:587)
    at org.apache.hadoop.mapred.FileInputFormat.setInputPaths(FileInputFormat.java:315)
    at org.apache.hadoop.mapred.FileInputFormat.setInputPaths(FileInputFormat.java:288)
    at spark.SparkContext.hadoopFile(SparkContext.scala:263)
    at spark.SparkContext.textFile(SparkContext.scala:235)
    at spark.examples.HdfsTest$.main(HdfsTest.scala:9)
    at spark.examples.HdfsTest.main(HdfsTest.scala)
Caused by: java.lang.IllegalAccessError: tried to access method org.apache.hadoop.fs.DelegationTokenRenewer.<init>(Ljava/lang/Class;)V from class org.apache.hadoop.hdfs.HftpFileSystem
    at org.apache.hadoop.hdfs.HftpFileSystem.<clinit>(HftpFileSystem.java:84)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at java.lang.Class.newInstance0(Class.java:374)
    at java.lang.Class.newInstance(Class.java:327)
    at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:373)
... 16 more 
```

我在谷歌上搜索过，不知道 Spark 和 HDFS 的这种异常。

`val file = sc.textFile("hdfs://n1.example.com/user/cloudera/data/navi_test.csv")`是问题发生的地方。

```
13/04/04 12:20:51 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable 
```

我得到了这个警告。也许我应该在 CLASS_PATH 中添加一些 hadoop 路径。

随时提供任何线索。=)

谢谢你们。

任豪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T03:33:33.387

（这个问题也在[spark-users 邮件列表中](https://groups.google.com/d/msg/spark-users/DO-HncHnXOs/rBlwXLeXpSIJ)被询问/回答）。

您需要针对集群上运行的特定版本的 Hadoop/HDFS 编译 Spark。来自[Spark 文档](http://spark-project.org/docs/latest/#a-note-about-hadoop-versions)：

> Spark 使用 Hadoop 核心库与 HDFS 和其他 Hadoop 支持的存储系统通信。由于 HDFS 协议在不同版本的 Hadoop 中发生了变化，因此您必须针对集群运行的相同版本构建 Spark。`HADOOP_VERSION`您可以通过在 顶部设置变量来更改版本`project/SparkBuild.scala`，然后重新构建 Spark ( `sbt/sbt clean compile`)。

[spark-users](http://groups.google.com/group/spark-users)邮件列表存档包含一些关于针对特定 Hadoop 版本进行编译的问题，因此如果您在构建 Spark 时遇到任何问题，我会在那里搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T16:32:17.973

您可以在构建 Spark 时使用环境变量设置 Coudera 的 Hadoop 版本，在 Cloudera 的 maven repo 上查找您的确切工件版本，应该是这样的：

```
SPARK_HADOOP_VERSION=2.0.0-cdh4.2.0 sbt/sbt assembly publish-local 
```

确保您使用用于构建 Spark 的相同 Java 引擎运行您运行的任何程序。此外，还有针对不同 Cloudera Hadoop 发行版的预构建 Spark 包，例如[http://spark-project.org/download/spark-0.8.0-incubating-bin-cdh4.tgz](http://spark-project.org/download/spark-0.8.0-incubating-bin-cdh4.tgz)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T04:56:52.927

这可能是与系统中安装的 Java 有关的问题。Hadoop 需要 (Sun) Java 1.6+。确保你有：

> JAVA_HOME="/usr/lib/jvm/java-6-sun

# ruby-on-rails - rails 2中的ajax请求不起作用

> ID：15808324
> 
> 赞同：0
> 
> 时间：2013-04-04T10:10:28.570
> 
> 标签：ruby-on-rails

```
function ajaxRequest(){

    $.ajax({
        type: 'GET',
        url: 'client/orders/send_mail_to_notaries',
        data: { subject: "hi" }
    });
    return false;

  } 
```

它不会在控制器中传递任何参数。任何人都可以触发它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:43:59.037

根据您今天早上[在 rails 2 中提出的 page.replace_html 方法](https://stackoverflow.com/questions/15803749/page-replace-html-method-in-rails-2/15804232#15804232)的问题，我猜您正在使用原型。

您可以检查是否包含 jQuery 吗？除非包含 jQuery，否则此 ajax 请求将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:19:02.233

我刚刚尝试了您使用的方法，它对我有用。也许路由器/控制器有问题？

在调试 ajax 时，使用 Chrome 开发人员工具栏非常方便。启动它，运行 javascript 看看会发生什么。

要查看来自服务器的响应，您可以翻转到“网络”选项卡以查看响应是什么。

# html - HGROUP 元素已从 HTML5 规范中移除。可以使用什么替代技术？

> ID：15808330
> 
> 赞同：11
> 
> 时间：2013-04-04T10:10:42.237
> 
> 标签：html, w3c, semantic-markup, web-standards

正如你们中的一些人听说的那样，该`hgroup`元素正在从[HTML5 规范](https://www.w3.org/TR/html5/)中删除。（有关更多信息，请参阅W3C HTML 工作组关于从W3C 的公共邮件列表档案中删除[HTML5](http://lists.w3.org/Archives/Public/public-html-admin/2013Apr/0003.html)[的请求的决定。）`hgroup`](http://lists.w3.org/Archives/Public/public-html-admin/2013Apr/0003.html)

现在我正在使用这个标签重新设计一个网站，它创建了一种添加子标题的方法。

我目前的想法是`hX`在主标题下添加另一个标签，但我不确定这是否足够语义化。

```
 <h1>Darren Reay</h1>
 <h2>A developing web developer</h2>
 <p>Hello World</p> 
```

任何人都可以提出使用子标题的替代方法，或者至少为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-01T06:24:41.387

HTML5 规范现在包括关于如何标记[副标题、副标题、替代标题和标语的建议](http://w3c.github.io/html/common-idioms-without-dedicated-elements.html#subheadings-subtitles-alternative-titles-and-taglines#sub-head)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-04T14:36:00.427

我会采用 W3C 在 Lars Gunther 提出的[drop hgroup 更改提案](http://www.w3.org/html/wg/wiki/ChangeProposals/dropHgroup)中建议的替代方案，并使用标题和段落。

你的例子看起来像这样

```
<header>
    <h1>Darren Reay</h1>
    <p>A developing web developer</p>
</header> 
```

我觉得这在语义上是正确的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-04T10:25:05.357

需要考虑的几点：

1.  即使标签从 HTML5 规范中删除，也不意味着它会在一夜之间停止工作。浏览器保持向后兼容性很长一段时间（AFAIK，如果不是所有浏览器仍然`<font>`正确呈现！）

2.  即使浏览器会在一夜之间放弃支持，它们仍然会正确呈现页面，因为我认为 hgroup 标签不会添加任何固有样式，并且（现代）浏览器在允许他们无法识别的标签方面非常宽松。

3.  我可能读错了这个问题，但在字里行间听起来你一直在滥用 hgroup 标签。（不允许包含除标题元素以外的任何内容。）

我认为完全删除标签或用 div 替换它们没有任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-18T15:00:10.137

这是我目前在我的个人网站上使用的技术，以实现标题带有副标题的效果：

```
<header>
  <h1>
    <a href="http://www.jdclark.org/">Jordan Clark</a>
    <small>Personal and Professional Website</small>
  </h1>
</header> 
```

（然后，当然，我只是简单地使用 CSS 来重新设置`<small>`元素的样式。我个人也相信我的技术在语义上比仅使用段落更准确——虽然我不是 SEO 专家，但我确信通过保持中的副标题文本`h1`将赋予它比基本段落更高的价值。）

# php - Zend Framework 2 对 Oracle 的查询格式不正确

> ID：15808332
> 
> 赞同：1
> 
> 时间：2013-04-04T10:10:59.430
> 
> 标签：php, oracle, zend-framework2

我猜想 Zend 用来构建 sql 语句的方式不适用于 Oracle。

我在本地 Windows PC 中使用 Oracle。我的 PHP 已经与 oci8 扩展的 Oracle 一起正常工作，我按照以下链接进行了配置：

[http://www.oracle.com/technetwork/articles/technote-php-instant-084410.html](http://www.oracle.com/technetwork/articles/technote-php-instant-084410.html)

我正在尝试将 ZF2 与 Oracle 连接。我正在使用 Zend 网站上的教程代码：

[http://zf2.readthedocs.org/en/latest/index.html#userguide](http://zf2.readthedocs.org/en/latest/index.html#userguide)

此代码与 mySQL 完美配合。我正在更改数据库配置以改用 Oracle。

下面是我的配置：

*   全局.php

> < ?php
> 
> 返回数组（'db' => 数组（
> 
> ```
>  'driver'         => 'Oci8',
>     'host'         => 'localhost/orcl',
> ),
> 
> 'service_manager' => array(
>     'factories' => array(
>         'Zend\Db\Adapter\Adapter'
>                 => 'Zend\Db\Adapter\AdapterServiceFactory',
>     ),
> ), 
> ```
> 
> );
> 
> ?>

*   local.php（这项工作是因为我创建了一个具有 Oracle 权限的用户“测试”，我使用 PHP 和 SQL 脚本测试了这个用户）

> < ?php
> 
> 返回数组（
> 
> ```
> 'db' => array(
>   'username' => 'test',
>   'password' => 'test',
> ), 
> ```
> 
> );

配置后，我尝试浏览 url，出现错误说“表或视图不存在”。这是 Oracle 错误，这意味着 Zend 连接到 Oracle 但 SQL 语句有问题。

经过一些调试，我看到 sql 语句是：

```
SELECT "album".* FROM "album" 
```

这是错误的，因为 Oracle 不想接收双引号。

我在文件 /Zend/Db/Adapter/Driver/Oci8/Statement.php 中尝试了一些硬代码，函数 setSql 第 112 行，更改为：

```
public function setSql($sql)
    {
        $this->sql = $sql;
        $this->sql = "SELECT album.* FROM album";
        return $this;
    } 
```

（删除查询中的双引号）

这是工作！！！

我认为还有一些其他配置，所以让 Zend 正常工作。

请帮我！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T03:21:18.017

同样的问题在这里：[ZF2 IBM](https://stackoverflow.com/questions/16853035/zend-framework-2-double-quotes-in-queries "ZF2 IBM")

解决方案：quote_identifiers == false：

```
 'db' => array(
    'driver' => $dbParams['driver'],
    'connection_string' => $dbParams['database'],
    'username' => $dbParams['username'],
    'password' => $dbParams['password'],
    'character_set' => $dbParams['character_set'],
    'platform_options' => array('quote_identifiers' => false)      
), 
```

# android - 获取实时 - 不是设备在 android 中设置时间

> ID：15808333
> 
> 赞同：30
> 
> 时间：2013-04-04T10:11:01.447
> 
> 标签：android, datetime, real-time, time-format

如何找出*Real Geographical Time*，就像在我的应用程序中一样，我想将实时时间附加到我的应用程序中。

因此，如果用户更改其设备中的时间，那么我应该只获得真正的盛行时间 - 而不是设备时间

我的问题很混乱，但尝试用一种简单的语言来理解 -

**我不想要 DEVICE TIME，我想要随时都有 REAL PREVAILING TIME**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T10:39:23.493

**您需要使用 NTP（网络时间协议）协议：**

这是我在其他地方找到的一些代码......我正在使用它。这使用 Apache Commons 库，可以使用 Gradle 安装（添加对 的依赖`commons-net:commons-net:3.6`）

如果您需要时间服务器列表，请查看：[http ://tf.nist.gov/service/time-servers.html](http://tf.nist.gov/service/time-servers.html)

下面是一些 Java 代码供您使用：

```
public class TimeLookup {
    public static final String TIME_SERVER = "time-a.nist.gov";

    public static void main(String[] args) throws Exception {
        NTPUDPClient timeClient = new NTPUDPClient();
        InetAddress inetAddress = InetAddress.getByName(TIME_SERVER);
        TimeInfo timeInfo = timeClient.getTime(inetAddress);
        long returnTime = timeInfo.getReturnTime();
        Date time = new Date(returnTime);
        System.out.println("Time from " + TIME_SERVER + ": " + time);
    }

} 
```

请注意，Android 代码必须在后台线程上运行并包含 gradle 依赖项：

```
implementation 'commons-net:commons-net:3.6' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T10:13:29.637

没有 Android API 可以为您提供这样的时间。用户可以随时更改设备时间，对此您无能为力。

你最好的选择是运行一个带有 web 服务的服务器，你可以从中获得时间。由于您控制服务器，因此您可以尝试确保它返回正确的时间。

# jsp - 禁用 JSP 中的选项卡

> ID：15808334
> 
> 赞同：1
> 
> 时间：2013-04-04T10:11:03.553
> 
> 标签：jsp

无论如何要禁用使用引导程序创建的 JSP 中的选项卡吗？我的意思是我不想禁用 JavaScript 或 Jquery。我想在创建页面本身时禁用选项卡，稍后我将启用。这是我创建标签的代码：

```
<div class="navbar btn-navbar">
            <div id="tabs" class="tabbable">
                <ul id="myTab" class="nav nav-tabs">
                    <li class="active"><a href="#datacollector" target="main"
                        data-toggle="tab">Data Collector</a></li>
                    <li id="fromDB" class="selectDataloadType"><a
                        href="#fromDatabase" target="main" data-toggle="tab">Data Load
                            Database</a></li>
                    <li id="fromFile" class="selectDataloadType"><a
                        href="#fromFiles" target="main" data-toggle="tab">Data Load
                            File</a></li>
                    <li id="email" class="selectDataloadType"><a
                        href="#fromEmail" target="main" data-toggle="tab">Data Load
                            Email</a></li>
                    <li id="webServices" class="selectDataloadType"><a href="#fromWebServices"
                        target="main" data-toggle="tab">Data Load Web</a></li>
                    <li><a href="#datamap" target="main" data-toggle="tab">Data
                            Map</a></li>
                    <li><a href="#schedule" target="main" data-toggle="tab">Schedule</a></li>
                </ul> 
```

假设我想禁用第二个选项卡（ID*为 fromDB的***LI**），是否有将其指定为禁用？像

 *```
<li id="fromDB" class="selectDataloadType disabled"><a.......</a></li> 
```

或者

```
<li id="fromDB" class="selectDataloadType" style="disabled"><a.......</a></li> 
```

两者都不起作用。但是类似的还有吗？我不想为此使用任何脚本，否则我知道在窗口加载时我可以禁用它。但我想在这里指定它......那还有吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:23:06.427

当您的超链接将被禁用时，您是否使用任何状态？当您显示从数据库中获取的数据时，您应该获得禁用超链接的状态。并检查状态如下：-

例子 ：-

```
<%
//Set this status in servlet/action servlet
String  sts=(String)session.getAttributes("tabsts");

%> 
```

在 JSP 中使用

```
<li id="fromDB" class="selectDataloadType">
    <a <%if(sts!=null && sts.equals("yes")){) %> href="Your link"  <%}%> > 
        Your Data from Data Base 
    </a>

</li> 
```

如果您的 href 标签没有写在标签上，那么它本质上是禁用的。*

# php - Gnuplot 中某些特定值的不同颜色的颜色条

> ID：15808335
> 
> 赞同：2
> 
> 时间：2013-04-04T10:11:03.957
> 
> 标签：php, graph, gnuplot

我正在使用 Gnuplot 生成直方图，但如果值超过/低于特定值，我需要用另一种颜色对其中的一些进行着色。例如，如果值 < 10，则将特定直方图着色为绿色。如果值 > 10，值 < 20，则将特定直方图着色为黄色。如果值 > 20，则将直方图着色为红色。

所以我希望图表是这样的：

**x**。 **是** 的。 **颜色**

1\. 4\. 绿色

2\. 15 . 黄色的

3\. 40 . 红色的

值（x 和 y）来自数据库，因此我无法告诉 Gnuplot 我想要着色哪些 x 值，因为这些值会不时变化。

我可以用 Gnuplot（和 php）完成这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T11:15:44.220

您可以使用以下 gnuplot 脚本：

```
set style fill transparent solid 0.5 noborder
set boxwidth 0.95 relative
set palette model RGB defined (0 "green", 1 "yellow", 2 "red")
plot 'path\to\your\file' using 1:2:($2<=10 ? 0 : $2<=20 ? 1 : 2) with boxes palette 
```

* * *

我的测试文件的内容是

```
1 4
2 15
3 40 
```

我得到的结果是

![在此处输入图像描述](https://i.stack.imgur.com/TkgXs.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:07:05.760

鉴于此数据文件：

```
1 4  green
2 15 yellow
3 40 red 
```

以下行有效：

```
plot for [color in "green red yellow"] 'test.dat' using 1:(strcol(3) eq color ? $2:NaN):(0.95) with boxes lc rgb color 
```

# database - 在 Visual Studio 中，如何将数据提交到数据库表而不关闭它？

> ID：15808341
> 
> 赞同：3
> 
> 时间：2013-04-04T10:11:27.953
> 
> 标签：database, visual-studio-2012, commit

在编写我的 ORM 代码之前，我正在使用一些测试数据手动填充数据库表。对于 1:N 关系的两个表，可以先在一个表中填充一行，然后在下一个表中填充所有相关行。例如，如果我有一个包含多篇文章的杂志，我会在杂志表中输入一行，在文章表中输入其所有文章，然后才从下一本杂志开始。

问题是我的自动递增 ID 仅在关闭表时在数据库中创建。所以，当我在 Magazine 表中填完该行之后，我可以猜出它的 ID，但是如果我尝试在 Articles 中输入一行，我无法将猜到的 ID 作为外键，因为数据库注意到它还不存在. 在我可以输入文章之前，我必须在每本杂志之后关闭 Magazine 表，然后为下一本杂志重新打开它。

有没有更简单的方法，可能是我找不到的某种提交按钮？

请注意，这与[如何在 Visual Studio 2012 Web Express 中提交数据库表更改？](https://stackoverflow.com/questions/14843481/how-do-i-commit-database-table-changes-in-visual-studio-2012-web-express). 我正在尝试保存表格数据，而不是表格设计。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-31T16:13:24.317

我参加聚会有点晚了，但我通过谷歌找到了这个，因为我也在 Visual Studio 中寻找一个提交按钮（对我来说是 2013 年）。环顾一番后，我发现只需输入该行的所有数据，然后按 Enter 即可提交该行（必须选择行或行中的某些字段）。

# android - 在视图寻呼机内的视频视图中实时流式传输导致空白屏幕

> ID：15808343
> 
> 赞同：0
> 
> 时间：2013-04-04T10:11:30.707
> 
> 标签：android, video-streaming, android-viewpager, android-videoview, viewpagerindicator

我有一组 mp4 视频，这些视频流式传输到 VideoView。查看寻呼机用于在视频之间滑动。

问题 ：

滑动查看寻呼机时，完美显示第一页和第二页视频。但是，当滑动到第三页时，设备屏幕变为空白，我似乎无法再滑动页面了。

工作代码：

```
public class VideoActivity extends Activity implements OnClickListener {
private ViewPager videoViewPager;
private CirclePageIndicator videoViewPagerIndicator;
private VideoViewPagerAdapter videoViewPagerAdapter;
private VideoView videoView;
private Context context;
private ArrayList<VideoItem> videoList = new ArrayList<VideoItem>(8);
private int pageIndicatorRadius = 5;
private ProgressBar progressBar = null;
private MediaController mediaController = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    /* Flag to set hide the status bar */
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
    setContentView(R.layout.activity_main);
    context = this;
    /* Get the video item object list */
    videoList = getVideoList();
    /* Adapter for the view pager */
    videoViewPagerAdapter = new videoViewPagerAdapter();
    videoViewPager = (ViewPager) findViewById(R.id.video_viewpager);
    videoViewPager.setCurrentItem(0);
    videoViewPager.setAdapter(videoViewPagerAdapter);

    // videoViewPager.setOffscreenPageLimit(3);
    /*
     * Page view indicator . Using the external page view indicator library
     */
    videoViewPagerIndicator = (CirclePageIndicator) findViewById(R.id.video_pageindicator);
    videoViewPagerIndicator.setViewPager(videoViewPager);
    videoViewPagerIndicator.setFillColor(getResources().getColor(
            R.color.translucent_blue));
    videoViewPagerIndicator.setRadius(pageIndicatorRadius);

}

private class videoViewPagerAdapter extends PagerAdapter {
    /* Method which returns the number of page viewers */
    @Override
    public int getCount() {
        return videoList.size();
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {

        return (view == object);
    }

    @Override
    public Object instantiateItem(ViewGroup collection, int position) {

        View view = null;
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        // Inflater the xml layout which should be added to the page viewer
        view = inflater.inflate(R.layout.video, null);

        // Create an object of Video Item from the video list
        VideoItem videoItemObject = videoList.get(position);

        /* Initialize video player */
        videoView = (VideoView) view
                .findViewById(R.id.video_view);
        progressBar = (ProgressBar) view
                .findViewById(R.id.video_progressbar);
        Uri video = Uri.parse(videoItemObject.getUrl());
        mediaController = new MediaController(context);
        mediaController.setAnchorView(videoView);
        videoView.setMediaController(mediaController);
        videoView.setVideoURI(video);
        videoView.setKeepScreenOn(true);
        videoView.requestFocus();

        videoView.setOnErrorListener(new OnErrorListener() {

            @Override
            public boolean onError(MediaPlayer mp, int what, int extra) {
                Toast.makeText(context, "Error occured", Toast.LENGTH_SHORT)
                        .show();
                return false;
            }
        });

        videoView.setOnPreparedListener(new OnPreparedListener() {

            public void onPrepared(MediaPlayer arg0) {
                progressBar.setVisibility(View.GONE);
                videoView.start();
            }
        });

        videoView
                .setOnCompletionListener(new OnCompletionListener() {

                    @Override
                    public void onCompletion(MediaPlayer mp) {
                        videoView.stopPlayback();

                    }
                });

        videoView.setSoundEffectsEnabled(true);

        ((ViewPager) collection).addView(view, 0);

        return view;
    }

    @Override
    public void destroyItem(ViewGroup collection, int position, Object view) {
        /** Stop playing the video on activity destroyed */
        try {
            videoView.stopPlayback();
        } catch (Exception e) {
            Log.i("Error :", "Closing video");
        }

        ((ViewPager) collection).removeView((View) view);
    }

}

@Override
protected void onDestroy() {
    try {
        videoView.stopPlayback();
    } catch (Exception e) {
        Log.i("Error :", "Closing application");
    }
    super.onDestroy();
}

@Override
protected void onPause() {
    try {
        videoView.pause();
    } catch (Exception e) {
        Log.i("Error :", "Closing application");
    }
    super.onPause();
}

/* Function to create a video item object */
public VideoItem createVideoItem(String title, String url) {
    VideoItem videoItem = new VideoItem();
    videoItem.setTitle(title);
    videoItem.setUrl(url);
    return videoItem;
}

/* Function that returns a list of video item objects */
public ArrayList<VideoItem> getvideoList() {
    ArrayList<VideoItem> video = new ArrayList<VideoItem>(8);
    video.add(createVideoItem("A",
            "http://10.0.1.15:8081/media/big_buck.mp4"));
    video.add(createVideoItem("B",
            "http://10.0.1.15:8081/media/big_buck_bunny.mp4"));
    video.add(createVideoItem("C",
            "http://10.0.1.15:8081/media/big_buck.mp4"));
    video.add(createVideoItem("D",
            "http://10.0.1.15:8081/media/big_buck_bunny.mp4"));
    video.add(createVideoItem("E",
            "http://10.0.1.15:8081/media/big_buck_bunny.mp4"));
    video.add(createVideoItem("F",
            "http://10.0.1.15:8081/media/big_buck_bunny.mp4"));
    video.add(createVideoItem("G",
            "http://10.0.1.15:8081/media/big_buck_bunny.mp4"));
    video.add(createVideoItem("H",
            "http://10.0.1.15:8081/media/big_buck_bunny.mp4"));
    return video;
}
   } 
```

日志猫：

```
 04-05 12:45:27.139: W/SurfaceView(10963): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
04-05 12:45:27.826: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:30.873: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:30.873: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:32.787: I/MediaPlayer(10963): path is null
04-05 12:45:32.787: D/MediaPlayer(10963): Couldn't open file on client side, trying server side
04-05 12:45:32.826: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:32.826: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:33.444: D/MediaPlayer(10963): getMetadata
04-05 12:45:33.444: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:33.490: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:33.584: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:34.514: W/SurfaceView(10963): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
04-05 12:45:36.662: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:36.662: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:39.248: I/MediaPlayer(10963): path is null
04-05 12:45:39.248: D/MediaPlayer(10963): Couldn't open file on client side, trying server side
04-05 12:45:39.295: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:39.303: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:39.944: D/MediaPlayer(10963): getMetadata
04-05 12:45:39.951: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:39.959: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:40.139: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:42.701: W/SurfaceView(10963): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
04-05 12:45:42.709: E/libEGL(10963): call to OpenGL ES API with no current context (logged once per thread)
04-05 12:45:42.709: W/HardwareRenderer(10963): EGL error: EGL_BAD_SURFACE
04-05 12:45:42.733: W/HardwareRenderer(10963): Mountain View, we've had a problem here. Switching back to software rendering.
04-05 12:45:44.701: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:44.701: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:45.444: D/dalvikvm(10963): GC_CONCURRENT freed 318K, 12% free 7922K/8967K, paused 3ms+6ms, total 53ms
04-05 12:45:45.740: I/MediaPlayer(10963): path is null
04-05 12:45:45.740: D/MediaPlayer(10963): Couldn't open file on client side, trying server side
04-05 12:45:45.834: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:45.834: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:46.420: D/MediaPlayer(10963): getMetadata
04-05 12:45:46.428: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:46.436: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:46.592: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:49.006: W/SurfaceView(10963): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
04-05 12:45:49.061: I/MediaPlayer(10963): path is null
04-05 12:45:49.061: D/MediaPlayer(10963): Couldn't open file on client side, trying server side
04-05 12:45:49.162: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:49.162: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:49.772: D/MediaPlayer(10963): getMetadata
04-05 12:45:49.772: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:49.795: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:49.990: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:50.514: W/SurfaceView(10963): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
04-05 12:45:50.592: I/MediaPlayer(10963): path is null
04-05 12:45:50.592: D/MediaPlayer(10963): Couldn't open file on client side, trying server side
04-05 12:45:51.076: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:51.076: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:51.311: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:51.311: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:51.381: D/MediaPlayer(10963): getMetadata
04-05 12:45:51.381: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:51.436: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:51.709: I/MediaPlayer(10963): sendBroadcast android.media.IMediaPlayer.videoexist
04-05 12:45:51.834: W/SurfaceView(10963): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
04-05 12:45:51.912: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:51.912: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:45:59.506: I/MediaPlayer(10963): path is null
04-05 12:45:59.506: D/MediaPlayer(10963): Couldn't open file on client side, trying server side
04-05 12:45:59.561: I/MediaPlayer(10963): path is null
04-05 12:45:59.561: D/MediaPlayer(10963): Couldn't open file on client side, trying server side
04-05 12:45:59.662: D/dalvikvm(10963): GC_CONCURRENT freed 338K, 12% free 8045K/9095K, paused 13ms+9ms, total 77ms
04-05 12:45:59.678: I/MediaPlayer(10963): path is null
04-05 12:45:59.678: D/MediaPlayer(10963): Couldn't open file on client side, trying server side
04-05 12:46:00.311: E/MediaPlayer(10963): stop called in state 4
04-05 12:46:00.311: E/MediaPlayer(10963): error (-38, 0)
04-05 12:46:00.444: W/SurfaceView(10963): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
04-05 12:46:00.451: W/SurfaceView(10963): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
04-05 12:46:00.475: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:46:00.475: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:46:00.483: D/MediaPlayer(10963): getMetadata
04-05 12:46:00.483: D/MediaPlayer(10963): getMetadata
04-05 12:46:00.483: W/MediaPlayer(10963): mediaplayer went away with unhandled events
04-05 12:46:01.467: I/MediaPlayer(10963): path is null
04-05 12:46:01.467: D/MediaPlayer(10963): Couldn't open file on client side, trying server side
04-05 12:46:01.498: I/MediaPlayer(10963): path is null
04-05 12:46:01.498: D/MediaPlayer(10963): Couldn't open file on client side, trying server side
04-05 12:46:01.756: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:46:01.756: E/SpannableStringBuilder(10963): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-05 12:46:02.061: E/MediaPlayer(10963): stop called in state 4
04-05 12:46:02.061: E/MediaPlayer(10963): error (-38, 0)
04-05 12:46:02.123: W/SurfaceView(10963): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
04-05 12:46:02.186: W/SurfaceView(10963): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
04-05 12:46:02.201: W/SurfaceView(10963): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
04-05 12:46:02.389: W/MediaPlayer(10963): mediaplayer went away with unhandled events
04-05 12:46:02.389: D/MediaPlayer(10963): getMetadata 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T13:02:46.710

默认情况下，您的**ViewPager**在其内存中有两个页面。

当它试图删除第一个视图以加载第三页时，它会崩溃。

您可以通过使用设置 ViewPager 在其内存中保留的页数

`.setOffscreenPageLimit(X)`.

这会影响您的应用程序内存消耗，因此请注意。

# android - 学习 MEAP 概念的建议

> ID：15808344
> 
> 赞同：2
> 
> 时间：2013-04-04T10:11:31.507
> 
> 标签：android, jquery-mobile, mobile, mobile-application

我需要一些帮助来理解 MEAP 概念。谷歌搜索，我可以得到一些东西，比如企业移动应用程序等。

我不需要理论，我需要一个工作示例或 IDE 来开发跨平台的移动应用程序。那么有没有什么好的平台可以帮助实现呢？

我现在正在学习在 Phonegap 应用程序中工作。很好，但我不知道为移动开发跨平台应用程序的任何其他此类事情。

也欢迎任何关于 Convertigo 和其他此类平台的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T10:52:05.823

嘿，跨平台移动应用平台的一些很好的入门实用示例是：

1.  [Telerik 的Icenium](http://app.icenium.com)：此工具可帮助您使用 jQuery Mobile/KendoUI 框架构建 HTML5 应用程序，并通过创建临时构建轻松地在其在线模拟器或您的设备上测试该应用程序。

IMP：你需要在这个平台上进行编码，因此它更灵活。

1.  [Tiggzi](http://tiggzi.com/home)：为 Android、iOS 和 Windows Phone（使用 Apache Cordova/PhoneGap）构建真正的 HTML5、jQuery Mobile 移动应用程序和混合应用程序。由于构建器在云中运行，因此无需安装或下载任何内容，因此构建您的应用程序非常容易。

IMP：您可以使用它的拖放功能来创建快速原型。

MEAP - 移动企业应用平台是端到端解决方案，还提供应用管理、设备管理功能。一些顶级 MEAP 是：

Kony
IBM Worklight
SAP Unqired 平台
天线 AmpChroma

所有这些都以 Eclipse 插件的形式出现，但具有许多内置工具来构建和管理移动应用程序。

其中只有 IBM Worklight 有试用版： [https ://www14.software.ibm.com/webapp/iwm/web/signup.do?source=swg-worklight&S_TACT=109KA6TW&S_CMP=web_ibm_ws_mobile_bd_worklight](https://www14.software.ibm.com/webapp/iwm/web/signup.do?source=swg-worklight&S_TACT=109KA6TW&S_CMP=web_ibm_ws_mobile_bd_worklight)

# ms-access - Access 2007 使用外键按表单上的文本过滤

> ID：15808346
> 
> 赞同：0
> 
> 时间：2013-04-04T10:11:37.243
> 
> 标签：ms-access

我在 Microsoft Access 2007 中创建了一个表格表单。表单上有一个文本框，我希望过滤表单中的项目。

问题是表单中的一个字段是一个外键，它引用了一个包含公司名称的链接表。

当我运行下面的代码，并在文本框中键入公司名称 + 按回车键时，我只能搜索与公司名称相对应的数值：

```
Private Sub Text22_AfterUpdate()
Dim mFilter As String
Dim mQuery1 As String

If IsNull(Me.Text22) Then
    mQuery1 = ""
Else
    mQuery1 = Me.Text22
End If

mFilter = "[ID] Like ""*" & mQuery1 & "*"""
mFilter = (mFilter + " OR ") & "[Supplier] Like ""*" & mQuery1 & "*"""

temp = MsgBox(mFilter, vbOKOnly)

Me.Filter = mFilter
Me.FilterOn = True
Me.Requery
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:41:46.663

解决此问题的最简单方法是在链接到表格形式的查询中包含要过滤的公司名称。就像是：

```
SELECT Invoice.ID, 
       Invoice.Amount, 
       Invoice.SupplierID,
       Supplier.CompanyName
FROM   Invoice
  INNER JOIN Supplier ON Supplier.ID = Invoice.SupplierID 
```

然后，如果您不想显示该字段`CompanyName`，您可以随时在数据表表单中隐藏该列。
我通常隐藏`ID`报表，因为我只使用它们来识别数据库内部的记录并建立外部关系，`ID`每个表的 永远不会显示给我的用户。

如果您的表单连接方式不同，请使用更多信息和屏幕截图修改您的问题，以便我们更准确地回答您。

关于您提供的代码的一点说明：
您应该像您一样小心地构建过滤器：如果用户键入 a `"`，您的过滤器查询将中断。您应该转义用户的输入并对其进行一些清理。
至少做一个`mQuery1 = Replace(Text22, """", "")`。
同样，如果用户使用 a 开始/结束他的过滤器`*`，则查询可能无法正常工作。

# javascript - 在不刷新页面的情况下更改 HTML 代码

> ID：15808348
> 
> 赞同：4
> 
> 时间：2013-04-04T10:11:43.733
> 
> 标签：javascript, html, web-applications, frontend

有没有可能`how to change HTML`（.jsp）页面`without refreshing`呢？

用例是用户向 textarea 写入内容然后点击某个按钮，然后我需要添加一些对象，即图片到我页面中先前定义的位置~~~> 我需要更改 HTML 代码而不刷新页面（不丢失文本在文本框中）。我真的需要更改 HTML 代码，所以请不要在不更改 HTML 代码的情况下建议任何解决方案。

我不太喜欢前端技术，所以我不知道这是否可能，如果这是一个愚蠢的问题，请原谅。

我只能使用前端技术。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:17:07.883

使用`jQuery`（一个 JavaScript 库），您可以利用该`load()`功能在您的服务器上加载另一个 HTML 文件的内容，并将其放置在当前页面上您想要的任何位置而无需刷新（因此您甚至可以根据需要替换当前的 HTML）。

**jQuery：http:**
[//jquery.com/](http://jquery.com/)

**jQuery 加载（）：**
[http ://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

**替代建议：**
但是，我知道您说您不能刷新页面，**但是**，如果唯一的原因是因为您需要将文本保留在文本框中，您可以使用表单`POST`将该文本发送到另一个`.jsp`页面（甚至相同`.jsp`的页面，具体取决于您的操作方式）您可以自行决定在哪里使用它（例如，将其放在另一个文本框中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:16:16.617

也许这对你有用。

```
<div id="mydiv"></div>
<a id="refresh">click</a>

<script>
$(function() {
  $("#refresh").click(function() {
     $("#mydiv").load("yourdomain.com/file.php")
  })
}) 
```

还看到这个：

[http://woork.blogspot.nl/2007/10/how-to-change-text-using-javascript.html](http://woork.blogspot.nl/2007/10/how-to-change-text-using-javascript.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:15:59.753

使用[JavaScript](http://www.echoecho.com/javascript.htm)可以对[文档对象模型](http://www.brainjar.com/dhtml/intro/default.asp)进行更改 它非常容易学习并且非常强大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-31T23:12:16.940

您应该使用 javascript 函数 document.getElementById (DIV THAT YOU WOULD LIKE TO PLACE IN).innerHTML = YOUR_TEXT;。

如果您需要服务器的响应而不重新加载页面（您仍然需要加载，但客户端不会注意到），请尝试使用 AJAX。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T10:15:50.673

是的，这是可能的。您应该使用 JavaScript 更改用于显示页面的 HTML。

您可能会发现使用 JQuery 之类的库很有用。

# actionscript-3 - 无法在 Mac OS 上的 AIR 应用程序中打开 PDF 文件。但是相同的代码在 Windows 中工作

> ID：15808349
> 
> 赞同：0
> 
> 时间：2013-04-04T10:11:45.607
> 
> 标签：actionscript-3, air, adobe

此代码无法在 Mac OS 上的 AIR 应用程序中打开 PDF 文件。但是相同的代码在 Windows 中也能正常工作。我安装了adobe acrobat reader。但我仍然在 MAC os 中遇到错误

受保护的功能 button2_clickHandler(event:MouseEvent):void

```
 {

            if (HTMLLoader.pdfCapability == HTMLPDFCapability.STATUS_OK){

            var FileDir:File =new  File();

            var FilePath:String = "";               

            try

            {

                // Open browser for choose pdf file for open

                FileDir.browseForOpen("Open As [Only supports .PDF extension with file name.]");

                FileDir.addEventListener(Event.SELECT, readFromDirectory);

                //htmlLoader.parent.removeChild(htmlLoader);

            }

            catch (error:Error)

            {

                trace("Failed:", error.message);

            }

            //***** Browse event complete *****

            function readFromDirectory(event:Event):void

            {   

                try

                {           

                    var newFile:File = event.target as File;

                    FilePath =  newFile.nativePath;

                    var url:URLRequest = new URLRequest(FilePath); //URL to the file                      

                    htmlLoader.width = 700; //width of the content area

                    htmlLoader.height = 450; //height of the content area

                    htmlLoader.load(url);

                    //wrapping into UIComponent                   

                    holder = new UIComponent();                       

                    holder.addChild(htmlLoader);

                    addElement(holder);              

                }

                catch(err:Error)

                {

                    trace("file not in correct format");

                }

            }   

            }               

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T12:40:09.663

尝试在您的 Mac 上安装 Acrobat Reader。

# android - Android Beam - NFC - 使用 Beam 发送的消息不正确

> ID：15808350
> 
> 赞同：1
> 
> 时间：2013-04-04T10:11:45.987
> 
> 标签：android, nfc, ndef, android-beam

我正在尝试在 Android 手机（Galaxy S2 plus NFC）和 PN532 之间建立通信。这种通信工作正常，我可以在两个方向上传输数据。

我最近遇到了一个问题，可能是由于在 Play 商店上发布了该应用程序。几天前，我可以创建我的 NDEF 消息，它是通过调用发送的`nfcAdapter.setNdefPushMessage(message, this)`。

但是现在，发送的消息是我在 Play 商店中的应用程序的地址......我在 NDEF 消息中收到两条 NDEF 记录：

*   第一条 NDEF 记录：TNF = NFC RTD Well-Known "play.google.com/store/..."
*   第二个：TNF = Absolute URI type = "android.com:pkg", payload = "mypackagename"

我真的不明白为什么我收到这些数据而不是我自己的 NDEF 消息...自从应用程序运行良好（只是在 Play 商店中发布）以来，我没有更改应用程序中的任何重要内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:12:22.087

这只是一个 Android Beam 错误...如果您有同样的问题，您只需重新启动智能手机。

# android - Android不同形状的绘画应用

> ID：15808351
> 
> 赞同：0
> 
> 时间：2013-04-04T10:11:49.473
> 
> 标签：android, canvas, paint

我想制作一个绘画应用程序，我想为用户提供选项以选择类似于Google-play 中“ **Infinite Painter APP ”的绘画模式。**你能帮我在android应用程序中设计不同的绘画模式吗？我在谷歌搜索了很多，我发现了以下链接 [http://www.edumobile.org/android/android-tutorial/shape-drawing-example-in-android/](http://www.edumobile.org/android/android-tutorial/shape-drawing-example-in-android/) 我不知道如何把这些模式作为用户在屏幕上移动手指时可以在视图上绘画的选项。

任何人都可以建议我如何在android中做到这一点。以及绘画应用程序或任何开源项目链接学习的好教程。

**截图供参考：**

![在此处输入图像描述](https://i.stack.imgur.com/FToHR.jpg)

帮助我找到更好的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-28T21:25:34.073

我知道初学者 android 开发人员希望制作高级 android 应用程序，例如“MS Paint”，但由于缺乏编码知识，有些任务可能需要时间才能完成。我可以帮你做你需要的：

1.  在项目的 src 文件中创建一个新类，将其命名为 List.java
2.  创建一个新的 xml 文件，名称为 listactivty.xml
3.  在 OnCreate 方法中的 List.java 类中键入 setContentView(R.layout.listactivity);
4.  转到您的 xml 文件，然后将 Scroll View frm Composite 拖到您的布局上。
5.  无论您的画笔列表（选项）包含什么，都将其放在 xml 文件中的 scrool 视图下

例子：

```
 <ScrollView....>

      <ImageButton1.../>

       <ImageButton2.../>

       <ImageButton3.../>

       </ScrollView> 
```

6.为 List.java 类创建一个 Intent 以打开 在上一个类中，并借助该意图激活 On Click of a Button of an named Options 您可以打开 listactivity.xml 布局，您将在中看到 ImageButtons 1,2 和 3 的选项垂直并垂直滚动它们并选择选项。

滚动视图的一些帮助转到本教程：[http ://www.youtube.com/watch?v=kNX996ZZ2CI](http://www.youtube.com/watch?v=kNX996ZZ2CI)

# installation - 将外部文件复制到安装目录 WiX

> ID：15808355
> 
> 赞同：3
> 
> 时间：2013-04-04T10:11:57.170
> 
> 标签：installation, wix, windows-installer, wix3.5

[我有和这里](https://stackoverflow.com/questions/465788/wix-copyfile-attributes)一样的问题。我有一个`.config`文件，我想从源目录（我的`.msi`文件所在的位置）复制到我的安装目录。

我尝试了几件事：

**我尝试的第一件事：**

```
<DirectoryRef Id="ProgramFilesFolder">
  <Component Id="$(var.productFamily)$(var.productSummary).config" Guid="$(var.GUID_CMP_DemoConfig)" KeyPath="yes">
    <CopyFile Id="$(var.productFamily)$(var.productSummary).config"
          SourceName="$(var.productFamily)$(var.productSummary).exe.config"
          SourceProperty="SOURCEDIR"
          DestinationDirectory="$(var.productFamily)$(var.productType)"
          DestinationName="$(var.productFamily)$(var.productSummary).exe.config"
           >
    </CopyFile>
  </Component>
</DirectoryRef> 
```

但是这种方法失败了，因为它试图在安装应用程序**之前**复制文件，所以我的目录仍然不存在。

**我尝试的第二件事：**

将其添加为安装程序的另一个组件。

```
 <Component Id="$(var.productFamily)$(var.productSummary).config" Guid="$(var.GUID_CMP_DemoConfig)">
        <File Id="$(var.productFamily)$(var.productSummary).config"
              Name="$(var.productFamily)$(var.productSummary).exe.config"
              DiskId="1" KeyPath="yes"
              Source="$(var.productFamily)$(var.productSummary).exe.config" >
        </File>
      </Component> 
```

有了这个，我应该能够从我`Release`的安装程序文件夹复制到我的`INSTALLDIR`，但是当我在 上构建项目时`VS 2010`，它找不到文件...

**我尝试的第三件事：**

我试图将`SOURCEDIR`var 更改为我自己的变量，所以我可以将它用作常规组件，这样[做](https://stackoverflow.com/questions/8492073/heat-generated-files-are-not-able-to-find-sourcedir-directory/8590298#). 但它不允许我更改变量名。它在尝试更改时说：

`heat.exe : error HEAT0319 : The '-out' or '-o' parameter must specify a file path.`

所以我只想从我所在的位置复制一个文件`.msi`，但我仍然无法做到......

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:35:54.373

您可以使用 File 元素上的 Compressed 属性来排除文件在构建时被压缩到 MSI 中。然后，您可以根据具体情况替换此文件的内容。像平常一样创作并像平常一样安装，一切都会好起来的，而无需做任何花哨的事情。

例如，以下添加`Compressed`属性以覆盖`Package`元素设置的默认压缩：

```
<Component>
  <File Source="$(var.productFamily)$(var.productSummary).exe.config"
        Compressed='no' />
  </File>
</Component> 
```

# r - 忽略/删除 read.csv 中的 NA 值

> ID：15808356
> 
> 赞同：11
> 
> 时间：2013-04-04T10:12:03.457
> 
> 标签：r, na, read.csv

我有一个 csv 文件，如下所示，我使用 read.csv 读入 R，其中 C 列有 12/30 个空值。我想计算出每列的最大值，但是在列 C 上使用 R 函数“max”时返回“NA”。如何让 R 忽略空/NA 值，我看不到“rm.na”在 read.csv 中？

```
data<-data.frame(read.csv("test.csv"))

data

A   B   C   
1   5   6
15  2   3
8   3   3
7   5   4
5   3   8
4   1   4
5   3   4
2   2   10
4   3   8
6   5   2
1   4   4
10  8   4
0   6   0
7   3   8
5   3   3
13  12  13
6   0   0
0   0   2
5   2   NA
7   3   NA
1   8   NA
11  1   NA
1   4   NA
0   7   NA
4   5   NA
3   10  NA
2   0   NA
6   4   NA
0   19  NA
1   5   NA

> max(C)
[1] NA 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-12T09:06:01.240

```
 data<-na.omit(data) 
```

然后

```
 max(data) 
```

如果您不想更改数据框，那么

```
 max(na.omit(data)) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-04T10:48:08.930

你有两个我能想到的选择

```
 apply(data,2,max,na.rm=TRUE); # this will remove the NA's from columns that contain them 
```

或者

```
apply(na.omit(data),2,max); ## this will remove the NA rows from the data frame and then calculate the max values 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:50:48.203

我建议像其他人建议的那样在阅读后删除 NA 。但是，如果您坚持只读取非 NA 行，您可以使用 bash 工具 linux 删除它们并创建一个新文件：

```
grep -Ev file_with_NA.csv NA > file_without_NA.csv 
```

如果你运行 linux 或 mac，你已经有了这个工具。在 Windows 上，您必须安装 MinGW 或 Cygwin 才能获得这些工具。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-21T14:23:41.677

你应该可以使用

```
max(x,na.rm=TRUE) 
```

# java - 将项目转换为可执行 jar 时，序列化文件不起作用？

> ID：15808360
> 
> 赞同：3
> 
> 时间：2013-04-04T10:12:26.813
> 
> 标签：java, eclipse, jar

我使用 eclipse 中的 export to jar 选项将我的 java 项目变成了一个可执行的 jar。jar 按预期运行，只是它不使用任何序列化文件。我可以从 GUI 清楚地看到这一点。这个问题可能是什么原因，我该如何解决？

我看到了这个相关的问题 -[为什么我的 JAR 文件没有创建序列化？](https://stackoverflow.com/questions/11350212/why-does-my-jar-file-not-create-a-serialization)

但它并没有确切地告诉我如何解决这个问题。看起来您无法将文件夹打包到 jar 中。为什么 ？因为代码可能会意外/故意继续将数据添加到该文件夹​​中并使整个 jar 占用硬盘？

如何创建某种结构来打包我的可执行 jar 及其序列化文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:05:50.027

回答这个问题：

> 如何创建某种结构来打包我的可执行 jar 及其序列化文件夹？

一种常见的方法是有一个明确定义的位置来存储序列化文件、设置等，而不依赖于程序从哪里执行。通常它是用户的主目录，或者在 windows 的情况下是应用程序数据。我使用此代码来存储我的应用程序设置：

```
 String home = System.getenv("APPDATA");
    if (StringUtils.isEmpty(home)) {
        home = System.getProperty("user.home");
    }
    CONFIG_HOME = new File(home, ".myProgram").getAbsoluteFile();
    CONFIG_HOME.mkdirs(); 
```

所以在windows上它将使用AppData，而在*nix系统上它将使用用户的家。myProgram 前面的点是让它隐藏在 *nix 平台上，这是一种常见的做法。

**编辑**对于您在评论中的问题：

在我的 linux 机器上没有 APPDATA 环境变量，所以这段代码将创建一个目录`/home/myUser/.myProgram`。在 Windows 上，它将类似于`c:/Users/myUser/AppData/Local/.myProgram`. 在 MacOSX 上，不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:20:06.280

您需要您的 JAR 使用与 eclipse 中的代码相同的路径来读取序列化文件。

因此，您制作了一个包含带有序列化对象的目录的属性文件。然后，这对于您的 JAR 和我们的项目都是一样的。

另见：[http ://www.mkyong.com/java/java-properties-file-examples/](http://www.mkyong.com/java/java-properties-file-examples/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:36:49.423

您可以使用

```
AClass.class.getResource(String str);
//or
AClass.class.getResourceAsStream(String str); 
```

AClass：你的一门课。

str：要读取的文件位置。

例如;

如果您的类层次结构如下所示：

```
+src
    +-com
         +-test
             |-AClass.java
             +-util
                 +-PrintUtil.java
             +-resources
                 |-Bouble.png
                 |-Mouse.png
                 +-Ocean.png 
```

对于阅读“Mouse.png”图像，您可以通过多种方式进行操作：

```
AClass.class.getResource("/resources/Mouse.png");
//or
PrintUtil.class.getResource("../resources/Mouse.png");
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:04:42.563

使用/运行 jar 文件时，不能在 jar 文件中写入内容。当您将 jar 文件放在类路径中或直接从 jar 运行程序时，该 jar 将被您的 jvm 锁定，因此它不允许您更新当前使用的同一 jar 文件。

如果您的类位于文件夹中，而不是存档（您正在使用）中，那么人们给出的解决方案将资源用作流将起作用。

作为存档，您无法直接更新它，您需要执行以下步骤（由您自己或通过 3rd 方 api），
在临时位置提取
更新文件
重新存档

现在由于 jar 文件被锁定，您将无法做第三次手术，这甚至不安全。例如，当您运行 jar 文件时，尝试重命名它，它不会发生，如果发生，jar 文件尚未被 jvm 锁定，只要您调用 jar 内的类，它就会被锁定文件。
为了更好和安全的序列化和文件保存，请查看：[`java.util.prefs.Preferences`](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html).

# jquery - JQuery .Ajax 作为对象返回数据而不是 HTML

> ID：15808363
> 
> 赞同：2
> 
> 时间：2013-04-04T10:12:31.433
> 
> 标签：jquery, html, ajax, object, return

我正在尝试从 .ajax 函数返回一些信息，但在从请求的页面中提取所需的数据时遇到问题 .ajax 函数如下所示：

```
$.ajax({
          type: 'get',
          async:   false,
          url: "www.site.com",
          success: function(Data) {
            return Result = $(Data).filter('#ReturnedInfo');
          },
          error: function(Data) { 
            return Result = "no"; 
          }

        });
      $('#ShowReturned').append("Start"+Result+"end"); 
```

然而，根据我选择的方法，在页面上附加的所有内容都是`Start[object Object]end`or 。`null`（返回 Data 本身成功附加了整个页面）

我查看了网站上的其他一些问题，这些问题似乎有类似的问题，但似乎没有一个解决方案有效。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:42:53.390

试试这个

```
Result = $(Data).find('#ReturnedInfo').get(0);
var container = document.createElement("div");
container.appendChild(Result.cloneNode(true));

$('#ShowReturned').append("Start"+container.innerHTML+"end"); 
```

这是一种解决方法，但这应该可以解决您的目的。

# ivy - Ivy 可以下载同一个依赖项的多个版本吗？

> ID：15808365
> 
> 赞同：1
> 
> 时间：2013-04-04T10:12:33.833
> 
> 标签：ivy

我很清楚这不是一个好主意，但我需要定义具有多个版本的依赖项。我还想知道是否可以解决此类菱形依赖项的所有传递依赖项。例如，如果项目的两个依赖项都依赖于`commons-lang`(`2.1`和`3.0`) 并且项目本身定义了 version `2.5`，我希望能够下载所有三个版本及其传递依赖项。这完全有可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:39:27.823

要回答我自己的问题，“是”，如下所示：

```
<ivy-module version="2.0">
    <info organisation="com.foo"
          module="diamond-dependency"
          revision="1.0-SNAPSHOT"/>

    <dependencies>
        <dependency org="javax.activation" name="activation" rev="1.1-rev-1"/>
        <dependency org="org.apache.commons" name="commons-email" rev="1.3.1"/>
        <conflict manager="all"/>
    </dependencies>

</ivy-module> 
```

关键位在冲突管理器部分，在这种情况下，它被告知解决所有冲突的依赖关系。

上面将有一个看起来像这样的依赖树（包含三个不同的版本`javax.activation:activation`：

```
+- javax.activation:activation:jar:1.1-rev-1:compile 
\- org.apache.commons:commons-email:jar:1.3.1:compile 
   +- javax.mail:mail:jar:1.4.5:compile 
   |  \- (javax.activation:activation:jar:1.1:compile - omitted for conflict with 1.1-rev-1) 
   \- (javax.activation:activation:jar:1.1.1:compile - omitted for conflict with 1.1-rev-1) 
```

# javascript - 如何在 cookie 中存储 window.open 的 JS 数组

> ID：15808367
> 
> 赞同：2
> 
> 时间：2013-04-04T10:12:42.060
> 
> 标签：javascript, jquery, json

我制作了一个 Web 应用程序，当用户单击某个 nenu 时，它会在新窗口中打开，并且如果用户已经在某个窗口中打开了该菜单以专注于它。这是任务的简单部分。我为任何菜单选项创建了一个带有一些键的 window.open 对象数组。

```
function menuWindows(index, URL){
    if (openedWindows.length < index){
        openedWindows.length = index;
    }
    if ((openedWindows[index] == undefined) || openedWindows[index].closed){
        openedWindows[index]= window.open(URL, index);
        setOpenedWindows();
    } else {
        openedWindows[index].focus();
    }
} 
```

我的想法是将这个数组存储在 cookie 中，并且在检查之前已经有一个打开的窗口可以从 cookie 中加载一个数组。问题是当我尝试将该数组存储在 cookie 中时。我在 cookie 中存储数组 opensWindows 的函数的第一个版本是：

```
function setOpenedWindows(){
    $.cookie('openedWindows', JSON.stringify(openedWindows));
} 
```

在浏览器控制台中的错误是：“将循环结构转换为 JSON”。经过镜头搜索后，我找到了这篇[文章](https://stackoverflow.com/a/11616993/1980295)，我的第二个版本的商店功能是：

```
function setOpenedWindows(){
    var cache = [];
    var ow = JSON.stringify(openedWindows, function(key, value) {
        if (typeof value === 'object' && value !== null) {
            if (cache.indexOf(value) !== -1) {
                // Circular reference found, discard key
                return;
            }
            // Store value in our collection
            cache.push(value);
        }
        return value;
    });
    cache = null; // Enable garbage collection
    $.cookie("openedWindows", ow);
} 
```

现在我有这个错误：“未捕获的 RangeError：超出了最大调用堆栈大小”，我不知道该怎么办。

# android - 如何在 Android 中将 Edittext 的值从一个活动传递给其他活动？

> ID：15808368
> 
> 赞同：0
> 
> 时间：2013-04-04T10:12:46.020
> 
> 标签：android, android-activity

我想`EditText`在按钮按下时将一个活动的值传递给另一个活动，并在我的代码中使用该值。但是，在我不想使用该值的那些活动之间还有一个活动

我的 Activity1 有：

```
textOut = (EditText)findViewById(R.id.ipadd);
Button ip = (Button) findViewById(R.id.ipad);
ip.setOnClickListener(new View.OnClickListener() {

@Override
public void onClick(View v) {
    startActivity(new Intent("com.shaz.hello"));
}}); 
```

用户从 Activity1 转到 Activity2

活动2

```
if ( x ==10 ) {
    startActivity(new Intent("com.shaz.hello2"));
} 
```

用户从 Activity2 转到 Activity3

活动3

在这里，我想将该值用作字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:29:53.467

这是另一种解决方案；像这样创建一个`Bean`类，

```
public class Bean {
    public static String value;

    public static String getValue() {
        return value;
    }

    public static void setValue(String value) {
        Bean.value = value;
    }
} 
```

在`first Activity`设置`variable`中`Bean`。

```
Bean bean = new Bean();
bean.setValue("your value"); 
```

并获得`variable value`最后一个或任何`Activity`

```
Bean bean = new Bean();
String yourValue=bean.getValue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:14:49.893

您可以使用`putExtra()`and `getExtra()`，将其添加到您当前的活动中：

```
ip.setOnClickListener(new View.OnClickListener() 
{
    @Override
    public void onClick(View v)
    {
        Intent mIntent = new Intent(currentActivity.this, hello.class);
        mIntent.putExtra("valuename", Integer.valueOf(textOut.getText.toString));
        startActivity(mIntent);
    }
} 
```

要从最后一个活动中获取结果，请将此行放在后面`onCreate()`：

```
int myValue = getIntent().getIntExtra("valuename", 0);
if (myValue == 10) 
{  
    Intent mIntent = new Intent(currentActivity.this, hello2.class);
    startActivity(mIntent);
} 
```

***已编辑***

您需要在 android manifest 文件中添加您的活动，例如：

```
<activity android:name=".hello2"></activity> 
```

# .net - 当参数没有这些约束时，如何调用具有类型约束的泛型方法？

> ID：15808370
> 
> 赞同：2
> 
> 时间：2013-04-04T10:12:56.393
> 
> 标签：.net, generics, type-constraints

```
class A { }
interface I { }
void GenericStuff<T>(T x) { }
void SpecificStuff<T>(T x) where T : A, I { }

void Start<T>(T x)
{
    if (x is A && x is I)
        SpecificStuff(x); // <---- Wrong type
    else
        GenericStuff(x);
} 
```

我有上面说明的情况。在方法中`Start()`，我得到一个参数`x`，根据它的类型，我想调用`GenericStuff()`或`SpecificStuff()`方法。自然，类型约束阻止了我这样做，并且由于它们有两个，我无法通过强制转换来绕过它们。

有没有办法（缺乏反思）来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T10:16:50.210

您可以使用`dynamic`. 虽然这或多或少是美化的反射，但它看起来要好得多：

```
void Start<T>(T x)
{
    if (x is A && x is I)
        SpecificStuff((dynamic)x);
    else
        GenericStuff(x);
} 
```

请注意：
如果稍后您将类型约束更改`SpecificStuff`为包含第三个接口并且您忘记相应地更新您的接口`if`，您将得到运行时异常而不是编译时错误。

# java - 数组中数字的条件总和（JAVA）

> ID：15808376
> 
> 赞同：-4
> 
> 时间：2013-04-04T10:13:26.000
> 
> 标签：java, arrays

所以问题是：返回数组中数字的总和，除了忽略以 6 开头并延伸到下一个 7 的数字部分（每个 6 后面至少有一个 7）。如果没有数字，则返回 0。例如：

```
sum67({1, 2, 2}) → 5
sum67({1, 2, 2, 6, 99, 99, 7}) → 5
sum67({1, 1, 6, 7, 2}) → 4 
```

我的尝试：

```
public int sum67(int[] nums) {
  int sum = 0;
  for(int i=0;i<nums.length;i++){
    if(nums[i] == 6){
      while(nums[i] == 7){
        i++;
      }
    }
    else{
      sum = sum + nums[i];
    }
  }
  return sum;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:14:54.357

我给你一个提示。以下内容不太正确：

```
 while(nums[i] == 7){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:14:59.170

这个循环永远不会运行，因为`n[i]`是六个：

```
while(nums[i] == 7){
    i++;
} 
```

它应该是

```
while(nums[i] != 7){
    i++;
} 
```

有一种方法可以避免内部循环，并使用单个循环解决问题，如下所示：

```
boolean seenSix = false;
for(int i=0;i<nums.length;i++){
    if (!seenSix) {
        if(nums[i] != 6) {
            sum[i] += n[i];
        } else {
            seenSix = true;
        }
    } else {
        seenSix = (n[i] != 7);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:15:10.093

尝试

```
while(nums[i] != 7){
    i++;
} 
```

# assembly - 汇编 x86 命令行参数

> ID：15808379
> 
> 赞同：0
> 
> 时间：2013-04-04T10:13:30.237
> 
> 标签：assembly, x86, command-line-arguments, masm

我正在尝试在 x86 中编写一个简单的程序（使用 MASM 编译）。它的目的是将命令行参数写入输出（每个都在一个新行中）。到目前为止，这是我想出的：

```
data1 segment
   input db 40 dup (?)   ;input                   
data1 ends

code1   segment

START:                           
   mov ax,seg input
   mov ds,ax
   mov dx,offset input
   mov di, dx 

   mov si, 82h
   mov cl,es:[80h]    

word:   
      mov al,es:[si]
      mov ds:[di],al   
      inc si   
      inc di   

      cmp al,0Dh   ;out of arguments? (if YES goto finish)
      jz finish

      cmp al,20h   ;end of word? (if NO goto word)
      jnz word

   mov al, '$'  ;line terminate
   mov ds:[di], al

   mov ah,09h      ;write string
   int 21h 

   xor di,di    ;prepare registry for new word

   call new_line

   loop word

finish: 

   mov al, '$'
   mov ds:[di], al

   mov ah,09h      ;write last argument
   int 21h  

   mov ax,4ch   ;end program
   int 21h

new_line:
   push ax
   push bp
   mov ax,0e0ah ;ah=0e-write char,al=0a-go to new line
   int 10h
   mov al,13     ;carriage return
   int 10h 
   pop bp
   pop ax
ret

code1 ends  
end START 
```

在 emu8086 下测试时它似乎工作正常，但在使用 MASM 编译后，它仅在 10% 的执行中给出正确的结果。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:40:35.787

我已经很久没有看过任何汇编程序了......大提示而不是`here's your answer`

你确定 ES 加载了适当的段，因为你没有初始化它？

请注意，通过使用 80H 的内容加载 CL，您可以将 CL 设置为命令行的 LENGTH。

当您循环回到 WORD （不是一个好名称的标签，顺便说一句 - 因为它是一个关键字），您正在传输下一个字节。一切都很好 - 但你没有减少 CL，命令行中的字符数。如果未达到 0，您应该跳转到递减 CX 并返回目标标签的 LOOP 指令。

在执行`INT 10h`保存这两个寄存器是否足够？也许其他寄存器也被修改了......

同样，`INT 21H`- 是否有任何寄存器可以通过执行此中断后面的例程而改变？如果是这样，您应该`PUSH`先`POP`处理它们，然后在例程完成后将它们返回。

依靠 CR=0DH=13 结束行时要非常小心。如果参数的可用空间被完全填满，这将丢失。CL 中的字符数更为重要。如果您使用该`LOOP`指令正确递减 CL，您将不会遇到 CR (IIRC)，因为它不构成计数的一部分。当然，这假设`CX`所有文件夹都没有更改检查空格或**写出行**...

哦，顺便说一句 - 按照惯例，新行是`CR`,`LF`或 0DH,0AH - 按此顺序。在机械终端上，这实际上是将打印头移回左侧，然后将纸张向上滚动一行。打印头非常坚固，当它们靠着弹簧加载的挡块返回时聚集了大量的动力。结果是它们经常跳动，并且随着打印头的稳定，下一行的开始字符会喷到打印输出的前几列上，每条新行都会无情地使机制越来越无法调整。事实上，换行是 CR LF CR 并不罕见，只是为了让机制有时间解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:23:54.873

在开始复制参数字符串之前，您需要执行以下操作：

```
mov dx,offset input
mov di, dx 
```

但是，如果有多个参数，则在打印第一个参数后执行此操作：

```
xor di,di    ;prepare registry for new word 
```

`mov di, dx`除非您绝对、肯定地 100% 确定`input`always 的偏移量为 0 ，否则这可能应该是这样。

# sftp - 如何在 UNIX 中使用 sftp 传输文件

> ID：15808381
> 
> 赞同：5
> 
> 时间：2013-04-04T10:13:35.523
> 
> 标签：sftp

我想将 .png 文件从我计算机上的目录传输到远程服务器上的目录。

我必须使用 SFTP 来保护文件和传输模式。而且我已经有一个 UNIX 脚本 (.ksh) 文件以正常模式复制文件。如何在 SFTP 模式下实现传输？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T10:25:07.147

使用`sftp`而不是您在*.ksh*脚本中使用的任何命令。请参阅[sftp man](http://linux.die.net/man/1/sftp)以供参考。

您可能还想查看`scp`secure copy- [scp man](http://linux.die.net/man/1/scp)。

### 编辑

`sftp`多用于交互操作，需要指定要连接的主机：

```
sftp example.com 
```

系统将提示您输入用户名和密码，交互式会话将开始..

虽然它可以在脚本中使用，但它`scp`更易于使用：

```
scp /path/to/localfile user@host:/path/to/dest 
```

将提示您输入密码..

### 编辑 2

两者都`scp`用作`sftp`底层`ssh`协议，请参阅[this](https://superuser.com/questions/134901/whats-the-difference-between-scp-and-sftp)和[this](https://serverfault.com/questions/74164/difference-between-scp-and-sftp)

将它们设置为从脚本运行的最佳方法是使用*密钥*设置无密码身份验证。看到[这个](https://help.ubuntu.com/community/SSH/OpenSSH/Keys)和[这个](http://www.csua.berkeley.edu/~ranga/notes/ssh_nopass.html)。我在我的服务器上广泛使用它..设置密钥后，您可以运行

```
scp -i private-key-file /path/to/local/file user@host:/path/to/remote

sftp -oIdentityFile=private-key-file -b batch-file user@host 
```

如果你想用密码验证，你可以试试这个`expect`包。最简单的脚本可能如下所示：

```
#!/usr/bin/expect
spawn sftp -b batch-file user@host
expect "*?assword:*"
send "pasword\n"
interact 
```

有关更多信息，请参阅[此](http://fixunix.com/ssh/530359-how-supply-sftp-password.html#post1719551)、[此](http://www.unix.com/shell-programming-scripting/198125-sftp-scp-using-password.html)和[此](http://www.unix.com/shell-programming-scripting/21466-automating-sftp-expect.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-11T19:36:07.760

## 通过 sftp 在一行上发送命令：

**创建一个文件并将其保存为 my_batch_file：**

```
cd /root
get blah.txt
bye 
```

**运行它来执行你的批处理文件：**

```
eric@dev /home/el $ sftp root@10.30.25.15 < my_batch_file
Connecting to 10.30.25.15...
Password:
sftp> cd /root
sftp> get blah.txt
Fetching /root/blah.txt to blah.txt
sftp> bye 
```

**文件已传输**

这将`blah.txt`远程计算机移动到本地计算机。

**如果您不想指定密码，请执行以下操作：**

[如何使用 Bash 脚本中的密码运行 sftp 命令？](https://stackoverflow.com/questions/5386482/how-to-run-the-sftp-command-with-a-password-from-bash-script)

**或者，如果您想以骇人听闻的不安全方式进行操作，请使用 bash 并期望：**

```
#!/bin/bash
expect -c "
spawn sftp username@your_host
expect \"Password\"
send \"your_password_here\r\"
interact " 
```

您可能需要安装期望，将“密码”的措辞更改为小写“p”以匹配您收到的提示。这里的问题是它在文件以及命令历史记录中以纯文本形式公开您的密码。这几乎违背了首先拥有密码的目的。

# entity-framework - 是否可以实现EF添加的插入行的Id

> ID：15808382
> 
> 赞同：0
> 
> 时间：2013-04-04T10:13:38.190
> 
> 标签：entity-framework

我在 EF 中有一个表，其中`Id`列是 PK 和`Auto_Increment`. 我使用此代码向表中插入一行：

```
 Cut newCut = new Cut()
        {
            Name = name,
            Comments = comments
        };

 context.Cuts.AddObject(newCut);
 context.SaveChanges(); 
```

`Id`是否可以在没有其他查询 的情况下实现添加行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:16:32.083

*以后*试试`newCut.Id` *`SaveChanges()`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:16:27.157

当您保存更改时，您的`Cut`实例会自动填充 new `Id`by entity 框架。这样以后`SaveChanges()`就可以调用了`newCut.Id`。*

# slickgrid - slickgrid 无法滚动到底部

> ID：15808384
> 
> 赞同：0
> 
> 时间：2013-04-04T10:13:41.163
> 
> 标签：slickgrid

我不知道会发生什么。我只是用 json 加载我的数据并用 dataView 应用分页。数据显示良好，但我无法滚动到底部。所以当我点击“25”显示 25 行时，表格只显示 24 行。如果我单击“50”、“100”或所有行，则相同。我用萤火虫检查，JSON 响应是完整的。我试图检查浏览器中的元素，将我的与文件“examples/example-optimizing-dataview.html”进行比较。我得到了这个：
**.slick-viewport** has **height: 452px;**
并且在示例文件
**中 .slick-viewport**的**高度为：473px；**

如果我使用检查元素功能更改 Firefox 中的高度。我可以看到数据的底部。我该如何解决这个问题？这是我的代码[http://pastebin.com/vqYEW1Zg](http://pastebin.com/vqYEW1Zg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:10:09.080

首先，您不需要使用 dataView 对象循环遍历您的数据，只需将 getJSON 结果数据与之绑定即可`dataView.setItems(data)`。只有在不使用数据视图时才需要循环。所以删除你的 getJSON 中的那个循环，并在你的 getJSON 函数的末尾有这个代码：

```
$.getJSON(ajaxFileURL,ajaxUpdateURL,function(data){
    // all your previous code...        

    // initialize the model after all the events have been hooked up
    dataView.beginUpdate();
    dataView.setItems(data);
    dataView.endUpdate();
}); // end of getJSON 
```

至于其余的，你也应该看看你之前的问题，我也回复了你并修改了那里的代码示例......

# javascript - HTML 编码字符串

> ID：15808395
> 
> 赞同：0
> 
> 时间：2013-04-04T10:14:25.307
> 
> 标签：javascript, jquery, encoding

我正在尝试使用 jQuery 对字符串进行 HTML 编码，但我似乎找不到正确的编码格式。

我得到的是一个像 Ütest.docx 这样的字符串。服务器不能很好地处理特殊字符，因此我从 Java 获得 FileNotFoundException（我无法编辑服务器本身）。

现在，我尝试了一下，发现当我将 Ü 替换为 %DC 时，该 URL 有效。现在我认为这被称为 HTML 编码，谷歌搜索了一下，但我总是得到一些关于 URL 编码的结果。我检查了一下，这似乎不是正确的编码，因为 Ü 被编码为 %C3%9C，这对服务器不起作用。

现在，将 Ü 编码为 %DC 的编码是什么？javascript 或 jQuery 中是否有一个函数可以为我编码？

感谢您的帮助，我一直试图找出我需要一个小时的编码，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:18:34.163

# spring-mvc - 与浏览器区域设置无关地动态更新 JSTL 区域设置

> ID：15808404
> 
> 赞同：2
> 
> 时间：2013-04-04T10:14:55.353
> 
> 标签：spring-mvc, jstl, locale

我正在使用`spring mvc`框架开发 Web 应用程序，在我的一个 jsp 页面中`<fmt:formatNumber> JSTL formatting tag`。通常，此格式标记将采用`locale information from client's browser locale setting`. 但我不想`specific locale`从浏览器区域设置中使用。我该怎么做。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:27:54.173

只需放置

```
<fmt:setLocale value="Your_Local"/> 
```

在你之前

```
<fmt:formatNumber> 
```

并切换回浏览器区域设置

```
<fmt:setLocale value="${request.getLocale}"/> 
```

# jquery - 用于锚标记的 Jquery 绑定和解除绑定事件

> ID：15808406
> 
> 赞同：0
> 
> 时间：2013-04-04T10:14:59.047
> 
> 标签：jquery

我的页面中有锚标记。并且为某些功能编写了 .click() 事件，我想禁用页面加载上的操作并启用某些按钮单击时的操作。

为了防止动作，我可以使用 unbind("click")。但无法绑定，因为 .Bind("click") 需要函数名。

请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:33:43.280

无需担心分离和重新附加事件，您可以将 存储`href`在`data-`属性中，然后设置`href`为`#`. 单击启用按钮后，我们可以恢复`href`.

[jsFiddle](http://jsfiddle.net/Tyriar/zhnx4/)

**HTML**

```
<a href="http://www.google.com">Google</a>
<button id="enable">Enable</button> 
```

**JS**

```
$(document).ready(function () {
    $('a').each(function () {
        disableAnchor($(this));
    });
    $('#enable').click(function () {
        $('a').each(function () {
            enableAnchor($(this));
        });
    });
});
function disableAnchor(a) {
    a.attr('data-href', a.attr('href'));
    a.attr('href', '#');
}
function enableAnchor(a) {
    a.attr('href', a.attr('data-href'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:08:53.400

在页面加载时使用

```
$(function(){
    $("a").removeAttr('onclick');
}); 
```

# algorithm - 这个排序算法叫什么？

> ID：15808412
> 
> 赞同：0
> 
> 时间：2013-04-04T10:15:11.233
> 
> 标签：algorithm, sorting

我正在考虑一种非比较排序算法，我想我自己找到了一个。

```
Input: A[0...n] ranged from 0...n //ideally, I think it can be expanded to more general case later

Non-comparison-sort(A,n):
let B = [0...n] = [0]
for i in A:
    B[A[i]]=i 
```

在这个算法之后，数组 B 中的每个元素都会有一个对数组 A 的引用，如果我们想访问值为 m 的 A[k]，我们可以使用 A[B[m]]

我确定我不是第一个遇到这个想法的人，所以我的问题是这个算法叫什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:45:38.953

实际上，您的算法**不是**排序算法。这是一种[计算 上排列的逆的](http://en.wikipedia.org/wiki/Permutation#Product_and_inverse)算法`0..n`。换句话说，它将告诉您如何重新排列 A 以使所有数字都到位。

**为什么不是排序算法？** 如果 A 包含 0..n 范围内的所有数字，则排序后的数组将始终为 B = [0, 1, 2, ..., n]。另一方面，如果 A 有重复项，则此算法将不起作用。我认为您要做的是[对 sort 进行计数](http://en.wikipedia.org/wiki/Counting_sort)。该算法适用于 A 是一个大小为数组`k`且包含范围内的数字的情况`0..n`。该算法有一个大小为 B 的数组`n+1`，它计算每个数字在 A 上迭代一次时出现的次数。

计数排序的示例（在您的伪代码语法中）：

```
Counting-sort(A, n):
  let B = [0...n] = [0]
  for x in A:
    B[x] = B[x] + 1
  let C = [] // an empty list
  for i in 0...n:
    for j in 0...B[i]: // add each number 0..n the number of times it appeared in A
      C.append(i)
  return C 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:47:58.493

I think you've got a [pigeon hole sort](http://en.wikipedia.org/wiki/Pigeonhole_sort) there

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:36:16.183

[在这里](http://en.wikipedia.org/wiki/Bucket_sort)阅读桶排序后，它看起来像桶大小为 1 的桶排序。

在桶排序中，将元素放入桶中后，对每个桶进行排序。

但是，在您的情况下，由于存储桶大小为 1，因此不需要此步骤。也不需要合并存储桶，因为存储桶大小为 1 并且已经合并到数组中。

# filter - 用于输入多选的角度js过滤器

> ID：15808417
> 
> 赞同：0
> 
> 时间：2013-04-04T10:15:30.080
> 
> 标签：filter, angularjs, html-select

我有以下日期选择下拉菜单。

```
<input type="text" ng-modle="byNameFilter"/>
<select ng-model="byDateFilter" multiple="multiple">
 <option ng-repeat="date in dates" value="{{date}}">{{date}}</option>
</select>
<div>
<repeater ng:repeat="program in programNames | filter:byNameFilter | filter:byDateFilter">
   <a href="#/client/{{client}}/program/{{program.name}}" class="span2 btn">{{program.name}}</a>
</repeater> 
```

程序结构是：

```
[{'name':'program1','dates':['date1', 'date2']},{'name':'program2','dates':['date3', 'date2']}] 
```

现在，当我在 ng-model:byNameFilter 中放置一些文本时，过滤器正在工作，但是当我从选择下拉列表中选择日期时它不起作用（如果我删除多个属性，它工作正常）。

我们如何在 angular.js 中为多个选择选项实现过滤器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:17:21.633

我使用自定义函数解决了它（提供过滤）

```
$scope.dateFilter = function (item)
{
    //debugger;

    if ($scope.byDateFilter === undefined || $scope.byDateFilter.length == 0)
    {
        return true;
    }   

    for (var i in $scope.byDateFilter){         

        for (var j in item.dates)
        {
            if (item.dates[j] == $scope.byDateFilter[i])
            {
                return true;
            }
        }
    }

    return false;
} 
```

html中的变化：

```
<repeater ng:repeat="program in programNames | filter:byNameFilter | filter:dateFilter"> 
```

还有其他简单的解决方案吗？

# android - 为地理编码器类启用后端服务

> ID：15808418
> 
> 赞同：2
> 
> 时间：2013-04-04T10:15:32.337
> 
> 标签：android, google-maps-api-3, geocoding

我正在创建一个 android 应用程序，它接受经度和纬度作为输入，并使用`Reverse Geocoding`. 当我检查`Geocoder.isPresent()`它返回 false 时，这意味着地理编码类的后端服务被禁用。

如何启用此服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T12:06:15.453

请查看以下 2 个帖子以获取可能的解决方案：

1、[why-is-android-geocoder-throwing-a-service-not-available-exception](https://stackoverflow.com/questions/7109240/service-not-available-geocoder-android)

2、[service-not-available-geocoder-android](https://stackoverflow.com/questions/7109240/service-not-available-geocoder-android)

# extjs - 如何在 extjs 4.1 Grid 中为特定列设置动态数据

> ID：15808419
> 
> 赞同：0
> 
> 时间：2013-04-04T10:15:32.850
> 
> 标签：extjs, extjs4, extjs4.1

我正在为 Grid 显示 2 列让我们说

“1 年数据”和“2 年数据”

Grid 有一个带有组合框的工具栏，带有选项 [1Yr. 2年]

现在，当我要更改组合时，想要更改该列的值而不重新加载 GRID 并且不点击任何服务。

那么是否有任何选项可以通过从商店读取来更改列数据？

在此先感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:33:51.070

就像 Izhaki 说的那样，网格绑定到一个商店。所以如果你想刷新Grid，只需要修改Store的数据，Grid就会自动刷新。

我想这就是你想要做的。我希望它可以帮助你。

```
/* MODEL */
Ext.define('YrModel', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'yearOne',
        type: 'int'
    }, {
        name: 'yearTwo',
        type: 'int'
    }],
});

/* STORE */
Ext.create('Ext.data.Store', {
    storeId: 'YrStore',
    model: "YrModel",
    data: data,
    autoLoad: true,
    proxy: {
        type: 'memory',
        reader: {
            type: 'json'
        }
    }
});

/* COMBOBOX STORE */
var comboboxStore = Ext.create('Ext.data.Store', {
    fields: ['abbr', 'name'],
    data: [{
        "abbr": "yearOne",
        "name": "Year One"
    }, {
        "abbr": "yearTwo",
        "name": "Year Two"
    }]
});

/* COMBOBOX */
var combobox = Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose a year',
    store: comboboxStore,
    queryMode: 'local',
    editable: false,
    displayField: 'name',
    valueField: 'abbr'
});

/* LISTENER TO COMBOBOX SELECT EVENT */
combobox.on({
    select: onComboboxSelect
});

/* METHOD THAT HANDLE THE COMBOBOX SELECT EVENT */
function onComboboxSelect(combo, records) {
    var yearSelectValue = null;
    var yearSelected = (records.length > 0) ? records[0].get('abbr') : null;

    Ext.getStore('YrStore').each(function (record, index, count) {
        yearSelectValue = record.get(yearSelected);
        record.set(yearSelected, yearSelectValue + 1);
    });
}

/* GRID */
Ext.create('Ext.grid.Panel', {
    title: 'Year Data',
    renderTo: Ext.getBody(),
    store: Ext.getStore('YrStore'),
    viewConfig: {
        markDirty: false
    },
    columns: [{
        text: 'Year One',
        dataIndex: 'yearOne',
        flex: 1,
        sortable: true
    }, {
        text: 'Year Two',
        dataIndex: 'yearTwo',
        flex: 1,
        sortable: true
    }

             ],
    dockedItems: [{
        xtype: 'toolbar',
        dock: 'bottom',
        items: [combobox]
    }]
}); 
```

[http://jsfiddle.net/alexrom7/kUeU9/](http://jsfiddle.net/alexrom7/kUeU9/)

# variables - 在规则中指定 make 变量

> ID：15808420
> 
> 赞同：0
> 
> 时间：2013-04-04T10:15:41.623
> 
> 标签：variables, makefile, gnu

我想设置一个变量 $(CFLAGS2) 来根据我制作的目标保存不同的值。具体来说，我想要一个使用“-g -Wall”编译我的项目的目标，以及另一个使用“-O3”编译的目标

我试过这样：

```
CC=gcc
COPT=-c $<  -o $@ $(CADD) $(CFLAGS) $(CFLAGS2)

.PHONY: opti
.PHONY: debi

opti: seto
    make hammingtest
debi: setd 
    make hammingtest

.PHONY: seto
seto: 
    $(eval CFLAGS2 := -O3)

.PHONY: setd
setd: 
    $(eval CFLAGS2 :=-g -Wall)

hamming.o: hamming.cpp hamming.h
    $(CC) $(COPT) $(DEFS) $(CFLAGS2)

hammingtest.o: hammingtest.cpp hamming.h
    $(CC) $(COPT) $(DEFS) $(CFLAGS2)

hammingtest: hammingtest.o hamming.o
    $(CC)  -o hammingtest hammingtest.o hamming.o 
```

但是当我执行“make debi”时，它的行为就好像根本没有设置 $(CFLAGS")（与“make opti”相同）我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:32:52.277

不要`$(eval ...)`在 shell 行中使用。这通常是完全错误的。

有很多方法可以做你想做的事。由于您已经设置了递归 make，您可以使用命令行变量：

```
opti:
    ${MAKE} COPTS2='-O3' hammingtest

debi:
    ${MAKE} COPTS2='-g -Wall' hammingtest 
```

更好的风格是避免递归 make，可能有利于目标特定变量：

```
CC=gcc
COPT=-c $<  -o $@ $(CADD) $(CFLAGS) $(CFLAGS2)

CFLAGS2 = $(error Someone tried to deref CFLAGS2!)
opti: CFLAGS2 := -O3
debi: CFLAGS2 := -g -Wall

.PHONY: all
all:
    @echo 'What do you want to make?'

.PHONY: opti debi
opti debi: hammingtest
opti debi: ; @echo $@ Success

.
.
. 
```

这看起来很可能一目了然。

但是，这种设置方式是有问题的。例如，以下 shell 命令序列将为您提供优化的构建，没有警告。

```
$ make opti
$ make debi 
```

# c++ - where should I declare a database object

> ID：15808430
> 
> 赞同：2
> 
> 时间：2013-04-04T10:16:10.190
> 
> 标签：c++, database, qt

I am using the Qt libraries in a C++ project but I have a design question: where should a database be declared? I would prefer not to declare global variables.

Currently I am dealing with this problem in this way. I have a mainwindow and I have declared the DB in there so I perform the queries in the main window and pass the results to the dialogs using different signals and slots.

I start the DB when the main window starts and close it when the window has been closed. I don't know if this is ok Now I need the DB connection in another class as well so I can pass a reference to the DB or make the DB global

I don't like these solutions.. is there a standard pattern to deal with this situation?

edit:

My class now looks like:

```
class Database
{
  public:
    bool open(void);
    bool close(void);
    static Database* getDatabase(void);
    // various methods like loadThisTable(), saveThisTable() etc

  private:
    Database();                                // disable constructor
    ~Database();                               // disable destructor
    Database(const Database&);                 // disable copy constructor
    Database& operator=(const Database&);      // disable assignment

    static Database* instance_;                // database instance
    QSqlDatabase qtDB;                         // qt db database
} 
```

If I want I can add the add and remove methods but I have a single DB instance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T16:09:59.360

如果您正在使用`QSqlDatabase`，则实际上不需要将其设为全局变量。只需在首次启动应用程序时设置连接，然后`static QSqlDatabase`在不同模块中需要时使用这些方法访问连接。

**例子**

```
QSqlDatabase db;  // set up the default connection
// alternative:  set up a named connection
// QSqlDatabase db("conn-name");

// set the connection params and open the connection

// ... later on
QSqlDatabase db = QSqlDatabase::database();  // retrieve the default connection
// alternative:  retrieve the named connection
// QSqlDatabase db = QSqlDatabase::database("conn-name"); 
```

从[文档](http://qt-project.org/doc/qt-4.8/qsqldatabase.html#details)：

> `QSqlDatabase`是一个值类。通过一个实例对数据库连接所做的更改`QSqlDatabase`将影响`QSqlDatabase`代表同一连接的其他实例。用于`cloneDatabase()`在现有数据库的基础上创建独立的数据库连接。

注意：如果您的应用程序是多线程的，则必须小心只在创建它的线程中使用连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:45:38.780

你需要一个`singleton`模式。这是一个只有一个实例的全局类。有人称它为反模式（有时确实如此），但它是处理数据库连接等资源的最佳方式。

并且不要忘记您可以使用`QSqlDatabase QSqlDatabase::database ( const QString & connectionName = QLatin1String( defaultConnection ), bool open = true ) [static]`方法按名称获取`QSqlDatabase`实例（名称可以通过`QSqlDatabase QSqlDatabase::addDatabase ( QSqlDriver * driver, const QString & connectionName = QLatin1String( defaultConnection ) ) [static]`方法设置）以避免创建单例仅用于存储`QSqlDatabase`实例。

# mysql - mysql query to average values every hour

> ID：15808438
> 
> 赞同：0
> 
> 时间：2013-04-04T10:16:37.083
> 
> 标签：mysql, database, union, average

The following query grabs the temperature, outside temperature, ph and total suspended solids from my aquarium database and displays it in 1 table shown below. each of the values is stored in its own table and is being logged every minute.

I would like to change the query below to be able to get the average value for each hour instead of displaying the value stored in the database at x hour:00:00.

Please help

```
SELECT DATE_FORMAT(timeTable.minuteTime, '%Y-%m-%d %k:%i') time,
oT2.temperature temperature,
T2.temperature temp,
S2.solids solids,
P2.Ph Ph
FROM
(
    SELECT minuteTime.minuteTime minuteTime,
    ( SELECT MAX(time) FROM outside_temperature WHERE time <= minuteTime.minuteTime AND time >= NOW() - INTERVAL 1 DAY) otempTime, 
    ( SELECT MAX(time) FROM temperature1 WHERE time <= minuteTime.minuteTime AND time >= NOW() - INTERVAL 1 DAY) tempTime, 
    ( SELECT MAX(time) FROM Ph WHERE time <= minuteTime.minuteTime AND time >= NOW() - INTERVAL 1 DAY) phTime,  
    ( SELECT MAX(time) FROM solids WHERE time <= minuteTime.minuteTime AND time >= NOW() - INTERVAL 1 DAY) solidsTime

    FROM  
    (
        SELECT DATE(time) + INTERVAL (HOUR(time) DIV 2 * 2) HOUR minuteTime
        FROM Ph
        WHERE time >= NOW() - INTERVAL 1 DAY AND time <= NOW()
        UNION SELECT DATE(time) + INTERVAL (HOUR(time) DIV 2 * 2) HOUR
        FROM solids
        WHERE time >= NOW() - INTERVAL 1 DAY AND time <= NOW()
        UNION SELECT DATE(time) + INTERVAL (HOUR(time) DIV 2 * 2) HOUR
        FROM outside_temperature
        WHERE time >= NOW() - INTERVAL 1 DAY AND time <= NOW()
        UNION SELECT DATE(time) + INTERVAL (HOUR(time) DIV 2 * 2) HOUR
        FROM temperature1
        WHERE time >= NOW() - INTERVAL 1 DAY AND time <= NOW()
        GROUP BY 1
    ) minuteTime
) timeTable
LEFT JOIN outside_temperature oT2 ON oT2.time = timeTable.otempTime
LEFT JOIN temperature1 T2 ON T2.time = timeTable.tempTime
LEFT JOIN solids S2 ON S2.time = timeTable.solidsTime
LEFT JOIN Ph P2 ON P2.time = timeTable.phTime
ORDER BY minuteTime ASC 
```

This is the result of the query

```
2013-04-03 22:00    27.12   26.06   139 7.54
2013-04-04 0:00     27.06   26      142 7.54
2013-04-04 2:00     26.94   26      142 7.5
2013-04-04 4:00     26.87   25.94   142 7.5
2013-04-04 6:00     26.75   25.87   141 7.58
2013-04-04 8:00     26.87   25.87   141 7.58
2013-04-04 10:00    26.87   25.87   141 7.58
2013-04-04 12:00    26.87   25.87   141 7.58
2013-04-04 14:00    26.69   25.87   144 7.54
2013-04-04 16:00    26.56   25.81   144 7.58
2013-04-04 18:00    26.5    25.75   144 7.61
2013-04-04 20:00    26.81   25.75   144 7.43 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:36:19.260

利用

```
SELECT DATE_FORMAT(timeTable.minuteTime, '%Y-%m-%d %k:%i') time,
AVG(oT2.temperature) temperature,
AVG(T2.temperature) temp,
AVG(S2.solids) solids,
AVG(P2.Ph) Ph
......./*YOUR QUERY
--AT THE LAST
GROUP BY DATE_FORMAT(timeTable.minuteTime, '%Y-%m-%d %k:%i') 
```

# android - performClick() 不激活选择器

> ID：15808440
> 
> 赞同：0
> 
> 时间：2013-04-04T10:16:42.600
> 
> 标签：android, button, radio-button, css-selectors

我创建了一个包含两个按钮的无线电组的布局。然后我得到了一个可绘制的选择器。

我应用了选择器 with`android:background`和 with`android:button`来删除小圆圈。

在 onCreate 方法中，我按下一个按钮，`button.performClick()`但按钮的布局没有改变。即使我打电话`button.setChecked(true)`也不会改变。实际上它在第一次创建片段时起作用。但是如果我按下第二个按钮，加载另一个片段并返回后退按钮，第二个按钮仍然被按下。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    final View f = inflater.inflate(R.layout.fragment_season, container,
            false);

    final RadioButton bt = (RadioButton) f.findViewById(R.id.bu_season_tabelle);
    final RadioButton bs = (RadioButton) f.findViewById(R.id.bu_season_spielplan);

    bt.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            setTabelle(f);
            v.setClickable(false);
            bs.setClickable(true);
        }
    });

    bs.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            setSpielplan(f);
            v.setClickable(false);
            bt.setClickable(true);
        }
    });

    bt.performClick();

    return f;
} 
```

如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:09:47.703

我找到了解决方案：

而不是打电话给我`button.performClick()`，`onCreateView()`我必须打电话给它`onStart()`

# c# - 如何为 GroupBox 标题使用样式？

> ID：15808446
> 
> 赞同：30
> 
> 时间：2013-04-04T10:17:20.237
> 
> 标签：c#, wpf, combobox, styles

我`GroupBox`在我的表单中丢失了他们的标题文本必须是**Bold**。我知道如何为单人做到这一点`GroupBox`：

```
<GroupBox>
     <GroupBox.Header>
         <TextBlock Text="HEADER TEXT" FontWeight="Bold"/>
     </GroupBox.Header>
</GroupBox> 
```

但我很想知道如何使用`Styles`. 这是我尝试过的：

```
<Style TargetType="GroupBox">
    <Setter Property="BorderBrush" Value="{StaticResource lightBlueBrush}"/>
    <Setter Property="Margin" Value="25,1,5,5"/>
    //<Setter ??
</Style> 
```

我试过`<Setter Property="HeaderTemplate" Value={StaticResource myTemp}>`哪个`myTemp`简单`DataTemplate`但是VS突然关闭了！我不确定我是否以正确的方式这样做，所以有人可以帮助我吗？

**编辑：**请先测试您的想法，然后再将其发布为答案！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-04T10:33:22.917

您是否尝试过以下操作？

```
<Style TargetType="GroupBox">
    <Setter Property="BorderBrush" Value="{StaticResource lightBlueBrush}"/>
    <Setter Property="Margin" Value="25,1,5,5"/>
    <Setter Property="HeaderTemplate">
        <Setter.Value>
            <DataTemplate>
                <TextBlock Text="{Binding}" FontWeight="Bold"/>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

用法：

```
<GroupBox Header="Title" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:12:11.520

组框 headerTemplate 是 DataTemplate 的一种。所以你应该提供一个 datatemplate 对象而不是样式或模板。

试试下面的一个。

```
 <Window.Resources>

        <DataTemplate x:Key="DataTemplate1">
            <TextBlock Text="Test Templated Header"/>
        </DataTemplate>

    </Window.Resources>
    <Grid>
        <GroupBox  Header="Test Header" HeaderTemplate="{StaticResource DataTemplate1}">
            <Border BorderBrush="Red" Margin="10">
                <TextBlock Text="Hello"/>
            </Border>
        </GroupBox>
    </Grid> 
```

# asp.net-mvc-3 - NHibernate HasManyToMany automapping not populating list on load

> ID：15808450
> 
> 赞同：1
> 
> 时间：2013-04-04T10:17:32.090
> 
> 标签：asp.net-mvc-3, nhibernate, fluent-nhibernate, automapping

I've got a many-to-many relationship set up via AutoMapping. Now, the save and updates work fine as expected, however the DiscountGroups are not being loaded in DiscountDay when I get the entities afterwards. I cannot for the life of me work out why the _discountGroups list is always empty, even though it's all correct in the database.

I've seen suggestions about using ISet rather than IList however it doesn't seem to make any difference in my case, neiter does using .Not.LazyLoad() in the mapping. Removing AsBag() and AsSet() also makes no difference.

**The Entities**

```
public class DiscountDay
{
    public virtual DayOfWeek DayOfWeek { get; set; }

    public virtual Discount Discount { get; set; }

    private readonly IList<DiscountGroup> _discountGroups = new List<DiscountGroup>();

    public virtual IEnumerable<DiscountGroup> DiscountGroups
    {
        get { return _discountGroups; }
        set { }
    }
}

public class DiscountGroup
{
    public virtual string Name { get; set; }

    private readonly IList<DiscountDay> _discountDay = new List<DiscountDay>();

    public virtual IEnumerable<DiscountDay> DiscountDay 
    {
        get { return _discountDay; }
    }
} 
```

**The Mappings**

```
public class DiscountDayOverride : IAutoMappingOverride<DiscountDay>
{
    public void Override(AutoMapping<DiscountDay> mapping)
    {
        mapping.HasManyToMany( x => x.DiscountGroups )
            .AsSet()
            .Cascade
            .SaveUpdate();
        mapping.Cache.ReadWrite();
    }
}

public class DiscountGroupOverride : IAutoMappingOverride<DiscountGroup>
{
    public void Override(AutoMapping<DiscountGroup> mapping)
    {
        mapping.HasManyToMany( x => x.DiscountDay )
            .AsBag()
            .Inverse();
        mapping.Cache.ReadWrite();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:49:52.457

好吧，我是个十足的笨蛋。DiscountDay 实体上的 DiscountGroups 上的空集导致了问题。出于某种原因，我掩盖了它，只是不认为一个空集合会做任何事情。

更新代码：

```
public virtual IEnumerable<DiscountGroup> DiscountGroups
{
    get { return _discountGroups; }
} 
```

# post - How to check key submission Asp classic

> ID：15808452
> 
> 赞同：0
> 
> 时间：2013-04-04T10:17:35.203
> 
> 标签：post

I'm trying to pass a key to my web service , for more security , Like in PHP :

```
if $_POST['Key']="sdcksl":
show content 
end if 
```

how can i pass a hiden key to my function ??

# amazon-web-services - EC2 can an IP assigned to an instance while it was launched be made static(ElasticIP)

> ID：15808455
> 
> 赞同：-1
> 
> 时间：2013-04-04T10:17:44.933
> 
> 标签：amazon-web-services, amazon-ec2

I launched a micro instance on Amazon EC2, it was assigned a public IP which was picked up from a pool of available IP basically DHCP.

Now I want to assign a static IP to this instance.

EC2 to has a way of doing this but with that approach I will loose the current IP address and I will be given a new one, the problem is I have used the current IP address in all my code.

So is there a way in which the IP address assigned to the instance be made static IP?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:22:06.723

不，你不能。据亚马逊称：

> .. 一个实例只能有一个 Internet 可路由 IP 地址。如果弹性 IP 映射到实例，则其现有的公共 IP 地址映射将被删除。

[http://aws.amazon.com/articles/1346](http://aws.amazon.com/articles/1346)

顺便说一句，在您的代码中硬编码 IP 是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:34:34.533

What Brennan said is right you cant do it. Its a bad idea to hard code to ip address, what we do is we assign a domain or a subdomain or even hard code it some times. Though my IP address changes, I just to change my A record.

# wicket - Apache Wicket redirect POST data to external website

> ID：15808458
> 
> 赞同：2
> 
> 时间：2013-04-04T10:18:01.493
> 
> 标签：wicket, wicket-1.6

I have a apache wicket form where the contents of the form should be sent to other external website. Is that possible in wicket, If possible, please post some code. I tried with new RedirectPage(url); . But, its sending a GET request instead of POST.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T22:56:44.363

在您的检票口表单上覆盖 getActionUrl() 以返回您需要提交的网址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-12T04:40:25.510

Java代码：

```
Form<?> form = new Form<Void>("myform") {
    private static final long serialVersionUID = 1L;

    @Override
    protected String getActionUrl() {
        return "https://www.stackoverflow.com";
    }
}

add(form); 
```

html代码：

```
<form wicket:id="myform">
    <input type="submit"/>
</form> 
```

# sql - 查询调优 - 建议

> ID：15808461
> 
> 赞同：3
> 
> 时间：2013-04-04T10:18:12.183
> 
> 标签：sql, oracle, database-performance, sql-tuning

我需要有关附加查询的建议。该查询执行了一个多小时，并按照解释计划进行了全表扫描。我对查询调整相当陌生，并且会提出一些建议。首先，即使我使用的所有列都创建了索引，为什么还要进行全表扫描。其次，有没有可能我可以减少执行时间，所有访问的表都很大并且包含数百万条记录，即使这样我也想排除一些选项。感谢您的帮助。

**询问：**

```
select 
    distinct rtrim(a.cod_acct_no)||'|'||
    a.cod_prod||'|'||
    to_char(a.dat_acct_open,'Mon DD YYYY HH:MMAM')||'|'||
    a.cod_acct_title||'|'||
    a.cod_acct_stat||'|'||
    ltrim(to_char(a.amt_od_limit,'99999999999999999990.999999'))||'|'||
    ltrim(to_char(a.bal_book,'99999999999999999990.999999'))||'|'||
    a.flg_idd_auth||'|'||
    a.flg_mnt_status||'|'||
    rtrim(c.cod_acct_no)||'|'||
    c.cod_10||'|'||
    d.nam_branch||'|'||
    d.nam_cc_city||'|'||
    d.nam_cc_state||'|'||
    c.cod_1||'|'||
    c.cod_14||'|'||
    num_14||'|'||
    a.cod_cust||'|'||
    c.cod_last_mnt_chkrid||'|'||
    c.dat_last_mnt||'|'||
    c.ctr_updat_srlno||'|'||       
    c.cod_20||'|'||            
    c.num_16||'|'||
    c.cod_14||'|'||                
    c.num_10  ||'|'||
    a.flg_classif_reqd||'|'||

    (select g.cod_classif_plan_id||'|'||
     g.cod_classif_plan_id
     from
     ac_acct_preferences g 
     where 
     a.cod_acct_no=g.cod_acct_no AND g.FLG_MNT_STATUS = 'A' )||'|'||
    (select e.dat_cam_expiry from  flexprod_host.AC_ACCT_PLAN_CRITERIA e where  a.cod_acct_no=e.cod_acct_no   and e.FLG_MNT_STATUS ='A')||'|'||
    c.cod_23||'|'||
    lpad(trim(a.cod_cc_brn),4,0)||'|'||

    (select min( o.dat_eff)  from ch_acct_od_hist o where a.cod_acct_no=o.cod_acct_no )
from    
    ch_acct_mast a,

    ch_acct_cbr_codes c,
    ba_cc_brn_mast d

where 
    a.flg_mnt_status ='A'

    and c.flg_mnt_status ='A'
    and a.cod_acct_no= c.cod_acct_no(+)
    and a.cod_cc_brn=d.cod_cc_brn 

    and a.cod_prod in (
    299,200,804,863,202,256,814,232,182,844,279,830,802,833,864,
    813,862,178,205,801,235,897,231,187,229,847,164,868,805,207,
    250,837,274,253,831,893,201,809,846,819,820,845,811,843,285,
    894,284,817,832,278,818,810,181,826,867,825,848,871,866,895,
    770,806,827,835,838,881,853,188,816,293,298) 
```

**查询计划：**

```
PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Plan hash value: 4253465430

------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                           | Name                       | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | Pstart| Pstop |
------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                    |                            |   733K|   125M|       |   468K  (1)|999:59:59 |       |       |
|   1 |  TABLE ACCESS BY INDEX ROWID        | AC_ACCT_PREFERENCES        |     1 |    26 |       |     3   (0)| 00:01:05 |       |       |
|*  2 |   INDEX UNIQUE SCAN                 | IN_AC_ACCT_PREFERENCES_1   |     1 |       |       |     2   (0)| 00:00:43 |       |       |
|   3 |   PARTITION HASH SINGLE             |                            |     1 |    31 |       |     3   (0)| 00:01:05 |   KEY |   KEY |
|   4 |    TABLE ACCESS BY LOCAL INDEX ROWID| AC_ACCT_PLAN_CRITERIA      |     1 |    31 |       |     3   (0)| 00:01:05 |   KEY |   KEY |
|*  5 |     INDEX UNIQUE SCAN               | IN_AC_ACCT_PLAN_CRITERIA_1 |     1 |       |       |     2   (0)| 00:00:43 |   KEY |   KEY |
|   6 |     SORT AGGREGATE                  |                            |     1 |    29 |       |            |          |       |       |
|   7 |      FIRST ROW                      |                            |     1 |    29 |       |     3   (0)| 00:01:05 |       |       |
|*  8 |       INDEX RANGE SCAN (MIN/MAX)    | IN_CH_ACCT_OD_HIST_1       |     1 |    29 |       |     3   (0)| 00:01:05 |       |       |
|   9 |  HASH UNIQUE                        |                            |   733K|   125M|   139M|   468K  (1)|999:59:59 |       |       |
|* 10 |   HASH JOIN                         |                            |   733K|   125M|       |   439K  (1)|999:59:59 |       |       |
|* 11 |    TABLE ACCESS FULL                | BA_CC_BRN_MAST             |  3259 |   136K|       |    31   (0)| 00:11:04 |       |       |
|* 12 |    HASH JOIN                        |                            |   747K|    97M|    61M|   439K  (1)|999:59:59 |       |       |
|  13 |     PARTITION HASH ALL              |                            |   740K|    52M|       |   286K  (1)|999:59:59 |     1 |    64 |
|* 14 |      TABLE ACCESS FULL              | CH_ACCT_MAST               |   740K|    52M|       |   286K  (1)|999:59:59 |     1 |    64 |
|* 15 |     TABLE ACCESS FULL               | CH_ACCT_CBR_CODES          |  9154K|   541M|       |   117K  (1)|699:41:01 |       |       |
------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - access("COD_ACCT_NO"=:B1 AND "FLG_MNT_STATUS"='A' AND "COD_ENTITY_VPD"=TO_NUMBER(NVL(SYS_CONTEXT('CLIENTCONTEXT','entity_co
              de'),'0')))
   5 - access("COD_ACCT_NO"=:B1 AND "FLG_MNT_STATUS"='A' AND "COD_ENTITY_VPD"=TO_NUMBER(NVL(SYS_CONTEXT('CLIENTCONTEXT','entity_co
              de'),'0')))
   8 - access("COD_ACCT_NO"=:B1)
       filter("COD_ENTITY_VPD"=TO_NUMBER(NVL(SYS_CONTEXT('CLIENTCONTEXT','entity_code'),'0')))
  10 - access("COD_CC_BRN"="COD_CC_BRN")
  11 - filter("COD_ENTITY_VPD"=TO_NUMBER(NVL(SYS_CONTEXT('CLIENTCONTEXT','entity_code'),'0')))
  12 - access("COD_ACCT_NO"="COD_ACCT_NO")
  14 - filter(("COD_PROD"=164 OR "COD_PROD"=178 OR "COD_PROD"=181 OR "COD_PROD"=182 OR "COD_PROD"=187 OR "COD_PROD"=188 OR
              "COD_PROD"=200 OR "COD_PROD"=201 OR "COD_PROD"=202 OR "COD_PROD"=205 OR "COD_PROD"=207 OR "COD_PROD"=229 OR "COD_PROD"=231 OR
              "COD_PROD"=232 OR "COD_PROD"=235 OR "COD_PROD"=250 OR "COD_PROD"=253 OR "COD_PROD"=256 OR "COD_PROD"=274 OR "COD_PROD"=278 OR
              "COD_PROD"=279 OR "COD_PROD"=284 OR "COD_PROD"=285 OR "COD_PROD"=293 OR "COD_PROD"=298 OR "COD_PROD"=299 OR "COD_PROD"=770 OR
              "COD_PROD"=801 OR "COD_PROD"=802 OR "COD_PROD"=804 OR "COD_PROD"=805 OR "COD_PROD"=806 OR "COD_PROD"=809 OR "COD_PROD"=810 OR
              "COD_PROD"=811 OR "COD_PROD"=813 OR "COD_PROD"=814 OR "COD_PROD"=816 OR "COD_PROD"=817 OR "COD_PROD"=818 OR "COD_PROD"=819 OR
              "COD_PROD"=820 OR "COD_PROD"=825 OR "COD_PROD"=826 OR "COD_PROD"=827 OR "COD_PROD"=830 OR "COD_PROD"=831 OR "COD_PROD"=832 OR
              "COD_PROD"=833 OR "COD_PROD"=835 OR "COD_PROD"=837 OR "COD_PROD"=838 OR "COD_PROD"=843 OR "COD_PROD"=844 OR "COD_PROD"=845 OR
              "COD_PROD"=846 OR "COD_PROD"=847 OR "COD_PROD"=848 OR "COD_PROD"=853 OR "COD_PROD"=862 OR "COD_PROD"=863 OR "COD_PROD"=864 OR
              "COD_PROD"=866 OR "COD_PROD"=867 OR "COD_PROD"=868 OR "COD_PROD"=871 OR "COD_PROD"=881 OR "COD_PROD"=893 OR "COD_PROD"=894 OR
              "COD_PROD"=895 OR "COD_PROD"=897) AND "FLG_MNT_STATUS"='A' AND "COD_ENTITY_VPD"=TO_NUMBER(NVL(SYS_CONTEXT('CLIENTCONTEXT','entity_
              code'),'0')))
  15 - filter("FLG_MNT_STATUS"='A' AND "COD_ENTITY_VPD"=TO_NUMBER(NVL(SYS_CONTEXT('CLIENTCONTEXT','entity_code'),'0'))) 
```

考虑到每个表包含超过 100 列，我在上传整个表定义时受到限制。但是，请找到在 where 子句中访问的列的以下详细信息。希望这可以帮助。

```
Columns     Type    Nullable
cod_acct_no CHAR(16)    N
FLG_MNT_STATUS  CHAR(1)     N 
cod_23          VARCHAR2(360)   Y
cod_cc_brn  NUMBER(5)   N
cod_prod    NUMBER          N 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:53:47.047

我希望这可以降低成本。

```
select 
distinct rtrim(a.cod_acct_no)||'|'||
a.cod_prod||'|'||
to_char(a.dat_acct_open,'Mon DD YYYY HH:MMAM')||'|'||
a.cod_acct_title||'|'||
a.cod_acct_stat||'|'||
ltrim(to_char(a.amt_od_limit,'99999999999999999990.999999'))||'|'||
ltrim(to_char(a.bal_book,'99999999999999999990.999999'))||'|'||
a.flg_idd_auth||'|'||
a.flg_mnt_status||'|'||
rtrim(c.cod_acct_no)||'|'||
c.cod_10||'|'||
d.nam_branch||'|'||
d.nam_cc_city||'|'||
d.nam_cc_state||'|'||
c.cod_1||'|'||
c.cod_14||'|'||
num_14||'|'||
a.cod_cust||'|'||
c.cod_last_mnt_chkrid||'|'||
c.dat_last_mnt||'|'||
c.ctr_updat_srlno||'|'||       
c.cod_20||'|'||            
c.num_16||'|'||
c.cod_14||'|'||                
c.num_10  ||'|'||
a.flg_classif_reqd||'|'||

g.cod_classif_plan_id||'|'||g.cod_classif_plan_id
 ||'|'||
 e.dat_cam_expiry ||'|'||
c.cod_23||'|'||
lpad(trim(a.cod_cc_brn),4,0)||'|'||
(select min( o.dat_eff)  from ch_acct_od_hist o where a.cod_acct_no=o.cod_acct_no )
from    
ch_acct_mast a
JOIN ch_acct_cbr_codes c
ON a.flg_mnt_status ='A'
 and c.flg_mnt_status ='A'
 and a.cod_acct_no= c.cod_acct_no(+)
JOIN    ba_cc_brn_mast d
a.cod_cc_brn=d.cod_cc_brn 
JOIN ac_acct_preferences g 
ON a.cod_acct_no=g.cod_acct_no AND g.FLG_MNT_STATUS = 'A'
INNER JOIN flexprod_host.AC_ACCT_PLAN_CRITERIA e
ON a.cod_acct_no=e.cod_acct_no   and e.FLG_MNT_STATUS ='A'

WHERE a.cod_prod in (
299,200,804,863,202,256,814,232,182,844,279,830,802,833,864,
813,862,178,205,801,235,897,231,187,229,847,164,868,805,207,
250,837,274,253,831,893,201,809,846,819,820,845,811,843,285,
894,284,817,832,278,818,810,181,826,867,825,848,871,866,895,
770,806,827,835,838,881,853,188,816,293,298) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T05:50:40.367

**1\. 不要害怕全表扫描。** 如果表中的大部分行正在被访问，则使用散列连接/全表扫描比嵌套循环/索引扫描更有效。

**2.修复统计并重新分析对象。** 999小时读一张表？这可能是一个优化器错误，让 dba 查看`select * from sys.aux_stats$;`一些荒谬的值。时间不是很有用，但是如果您的预测值之一如此显着偏离，那么您需要检查所有这些值。您可能应该重新收集所有相关表格的统计信息。除非有充分的理由，否则请使用默认设置。例如，`exec dbms_stats.gather_table_stats('your_schema_name','CH_ACCT_MAST');`。

**3\. 看基数。**`Rows`估计值在球场上吗 ？它们几乎永远不会是完美的，但如果它们偏离一个或两个数量级以上，就会导致问题。寻找第一个显着差异并尝试纠正它。

**4.代码更改。** @Santhosh 有一个好主意，即使用 ANSI 连接重新编写并手动取消嵌套子查询。尽管我认为您应该尝试取消嵌套其他子查询。Oracle 可以自动取消嵌套子查询，但如果子查询[“包含聚合函数”](http://docs.oracle.com/cd/E11882_01/server.112/e16638/optimops.htm#i55054)则不能。

**5\. 禁用 VPD** 看起来这个查询正在被转换。确保您确切了解它在做什么以及为什么。在调试此问题时，您可能希望自己暂时禁用 VPD。

**6.并行性**。由于其中一些表很大，您可能需要添加并行提示。但是要小心，很容易用完很多资源。尝试在执行此操作之前制定正确的计划。

# android - Flash Cs5.5 Android AIR - Convert code from Keyboard to Accelerometer

> ID：15808462
> 
> 赞同：0
> 
> 时间：2013-04-04T10:18:12.530
> 
> 标签：android, actionscript-3, flash, actionscript, flash-cs5

I'd like someone to help me convert this code from using a keyboard to using an android device accelerometer. So if the device is tilted to Y axis the application should respond back making the object move forward and if the device is tilted to X axis or -X axis the application should rotate the object to left or right.

Can anyone help?

My code:

```
package com.asgamer.directionalmovement
{

import flash.display.MovieClip;
import flash.display.Stage;
import flash.events.Event;
import com.senocular.utils.KeyObject;
import flash.ui.Keyboard;

public class Ship extends MovieClip
{

    private var key:KeyObject;
    private var speed:Number = 0.3;
    private var rotateSpeed:Number = 5;
    private var vx:Number = 0;
    private var vy:Number = 0;
    private var friction:Number = 0.95;

    public function Ship () : void
    {
        key = new KeyObject(stage);
        addEventListener(Event.ENTER_FRAME, loop, false, 0, true);
    }

    public function loop(e:Event) : void
    {

        if (key.isDown(Keyboard.UP))
        {
            vy += Math.sin(degreesToRadians(rotation)) * speed;
            vx += Math.cos(degreesToRadians(rotation)) * speed;
        } else {
            vy *= friction;
            vx *= friction;
        }

        if (key.isDown(Keyboard.RIGHT))
            rotation += rotateSpeed;
        else if (key.isDown(Keyboard.LEFT))
            rotation -= rotateSpeed;

        if (key.isDown(Keyboard.SPACE))
            stage.addChild(new Laser(x, y, rotation));

        y += vy;
        x += vx;

        if (x > stage.stageWidth)
            x = 0;
        else if (x < 0)
            x = stage.stageWidth;

        if (y > stage.stageHeight)
            y = 0;
        else if (y < 0)
            y = stage.stageHeight;
    }

    public function degreesToRadians(degrees:Number) : Number
    {
        return degrees * Math.PI / 180;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:17:48.863

您可以使用 e.accelerationX,e.accelerationY 和 e.accelerationX ：

```
import flash.sensors.Accelerometer; 
import flash.events.AccelerometerEvent;
var my_acc:Accelerometer
if(Accelerometer.isSupported)
  initAcc();
else
trace("Accelerometer is not Supported")

function initAcc():void
{
var my_acc:Accelerometer = new Accelerometer();
//setting the update interval
my_acc.setRequestedUpdateInterval(50);

//catch the update event
my_acc.addEventListener(AccelerometerEvent.UPDATE, onAccUpdate);

}
function onAccUpdate(e:AccelerometerEvent):void{
//you can use the e.accelerationX,e.accelerationY AND e.accelerationX

myObject.x -= (e.accelerationX*10);
myObject.y += (e.accelerationY*10); 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:25:57.207

您可以使用 dispatchEvent 方法，编辑 Event 的属性，例如类型和加速度。我没有安卓设备，所以不能说下面的代码会 100% 工作。

```
var ev:AccelerometerEvent = new AccelerometerEvent(AccelerometerEvent.UPDATE);
ev.accelerationX = yourKeyboardAccelerationX;
ev.accelerationX = yourKeyboardAccelerationY;
dispatchEvent(ev); 
```

# jquery - 附加到 appendTo

> ID：15808464
> 
> 赞同：0
> 
> 时间：2013-04-04T10:18:18.840
> 
> 标签：jquery, ajax

我正在接收一个 JSON 对象，将此信息插入到模板中，然后将其附加到 DIV。我要插入的元素之一的 id 设置为 device_id。

插入模板 html 后，我想选择 ID=device_id 的 DIV 并在其中插入一些进一步的信息。

我假设这目前不起作用的原因是因为当我尝试使用 device_id 选择 div 时 DOM 尚未更新，但我不知道如何处理这个问题。

```
var obj = $.parseJSON(msg);
$("#myTemplate").tmpl(obj).appendTo("#message");

jQuery.each(obj, function () {
    $('#' + this.device_id).append('<p>Hello</p>');
}); 
```

上面的代码在一个点击事件中。DOM 看起来像这样：

```
<div id="message">
   <div class="item">
     <div id="#156846"></div>
     <div id="name"></div>
   </div>
</div> 
```

接收到的 JSON (msg) 如下所示：

```
[{"name":"Person A","device_type":"one", "device_id":"156846"}] 
```

如何将“Hello”插入 id=this.device_id 的 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:07:16.377

原来 appendTo() 不是问题。如果你能看到上面，有一个错字。id 中不应该有 #。

另外，我需要使用 $('#1234').find('#item').appendTo(); 为了获得在层次结构中更靠下的子元素。

# asp.net-mvc - Mvc3下拉列表错误

> ID：15808471
> 
> 赞同：0
> 
> 时间：2013-04-04T10:18:46.050
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, asp.net-mvc-4

我有一个包含组织列表的 mvc3 下拉列表。我可以使用下面的代码填写它。但是当我提交表单时，我得到的是 ID 而不是名称，并且相应的 ID 为空。

控制器

```
 ViewBag.DropDownList =organizationModelList.Select(x => new SelectListItem { Text = x.Name, Value = x.Id.ToString() });
return view(); 
```

模型

```
public class SubscriberModel
    {
        public OrgnizationList Organization { get; set; }
        public RegisterModel RegisterModel { get; set; }
        public SubscriberDetails SubscriberDetails { get; set; }
    }
    public class OrgnizationList
    {
        [Required]
        public ObjectId Id { get; set; }
        [Required]
        [DataType(DataType.Text)]
        [Display(Name = "Name")]
        public string Name { get; set; }
    } 
```

看法 @

```
model FleetTracker.WebUI.Models.SubscriberModel
@using (Html.BeginForm((string)ViewBag.FormAction, "Account")) {
<div>
@Html.DropDownListFor(m => m.Organization.Name, (IEnumerable<SelectListItem>)ViewBag.DropDownList, "---Select a value---")
</div>
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/QuhZP.jpg)

当我将其更改为 tom => m.Organization.Id 时，模型状态将更改为无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:23:38.570

您真的需要返回名称而不是 Id 吗？如果是，那么代替这个：

> ViewBag.DropDownList =organizationModelList.Select(x => new SelectListItem { Text = x.Name, Value = x.Id.ToString() });

做这个：

```
ViewBag.DropDownList =organizationModelList.Select(x => new SelectListItem { Text = x.Name, Value = x.Name }); 
```

然后删除`Required`. `OrgnizationList.Id`如果`OrgnizationList`是一个实体，我认为它是，那么你会遇到麻烦。我建议你有一个代表你输入的视图模型。因此，您不必处理**不必要的必填字段**。

但是如果`Name`不是唯一的呢？为什么您不能只接受`Id`并将其保存在您的数据存储中？`OrgnizationList`我假设您没有修改 的名称。

**更新：** 如果您真的需要两者，则将 Id 放在隐藏字段中：

**你的控制器方法**

```
ViewBag.DropDownList =organizationModelList.Select(x => new SelectListItem { Text = x.Name, Value = x.Id }); 
```

**你的模型**

```
public class SubscriberModel
{
    public int OrganizationId { get; set; }
    // your other properties goeshere
} 
```

**你的看法**

```
<div>
    @Html.HiddenFor(m=>m.OrganizationId)
    @Html.DropDownListFor(m => m.Organization.Name, (IEnumerable<SelectListItem>)ViewBag.DropDownList, "---Select a value---")
</div> 
```

还需要一点js...

```
$("Organization_Name").change(function(){
    $("#OrganizationId").val($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:59:32.260

我是用

```
 $(document).ready(function () {
                $("#DropDownList").change(function () {
                    $("#Organization_Id").val($(this).val());
                    $("#Organization_Name").val($("#DropDownList option:selected").text());

                });
            }); 
    @Html.HiddenFor(m=>m.Organization.Id)
    @Html.HiddenFor(m=>m.Organization.Name)
    @Html.DropDownList("DropDownList", string.Empty) 
```

控制器

```
ViewBag.DropDownList = new SelectList(organizationModelList, "Id", "Name"); 
```

# java - 字节类型转换

> ID：15808474
> 
> 赞同：4
> 
> 时间：2013-04-04T10:18:59.890
> 
> 标签：java

这是一个基本问题，但我无法得到正确的答案。我认为这是因为原始类型自动类型转换

为什么下面的语句会调用 print(int x) 方法而不是 print(char x) 方法。

```
public class Overloading {

    public static void main(String args[])
    {
        byte b='x';
        print(b);
    }

    public static void print(int x)
    {
        System.out.println("Inside int Print "+x);
    }

    public static void print(char x)
    {
        System.out.println("Inside char Print "+x);
    }

    public static void print(float x)
    {
        System.out.println("Inside float Print "+x);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T10:21:52.223

可用于此[方法调用转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.3)的转换是[扩大的原始转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2)：

> 字节到 short、int、long、float 或 double
> 
> 短到 int、long、float 或 double
> 
> char 到 int、long、float 或 double
> 
> int 到 long、float 或 double
> 
> 长时间浮动或加倍
> 
> 浮动加倍

`byte`你看没有`char`路径。这不是优先事项：如果您删除带有`int`as 参数的函数，您的代码将无法编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:22:27.470

`byte`将自动转换为`int`不`char`

```
 primitive types are called the widening primitive conversions:    

    byte to short, int, long, float, or double 
```

参考[链接](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html)第 5.1.2 节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:24:14.667

编译器以这种方式选择重载方法

```
byte->short->int->long 
```

有趣的是，如果你只留下`print(char x)`你会得到编译器错误

对于 char 它是

```
char->int->long 
```

# java - XML to RDF : using JENA GRDDL

> ID：15808478
> 
> 赞同：1
> 
> 时间：2013-04-04T10:19:08.300
> 
> 标签：java, xml, rdf, jena

I want to transform xml files to RDF. I think that JENA GRDDL can be used ,but I don't know how it works ! and I did not found any examples ! can you help me please to start using this API or show me any possible solutions !

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:27:06.200

您可以使用 XSLT 将 XML 文件转换为 RDF，通常以 RDF/XML 为目标（参见，例如，[使用 jena 从 XMl 文件创建 RDF](https://stackoverflow.com/questions/10499281/using-jena-for-creating-rdf-from-xml-file)）。Jena 然后可以读取生成的文件。

您甚至可以简化此过程并直接使用 a`SAXResult`和解析 XSLT 转换的结果[`SAX2Model`](http://jena.apache.org/documentation/io/arp_sax.html)。

GRDDL（参见[优秀的入门](http://www.w3.org/TR/grddl-primer/)）使这个过程标准化。它提供了一种为给定 XML 文档发现 XSLT 转换的方法：直接使用`grddl:transformation`，或间接使用 xml 命名空间模式或 html 配置文件来发现一类文档。（有关详细信息，请参阅[GRDDL 规范](http://www.w3.org/TR/grddl/)）

所以 GRDDL 并不能真正帮助你：你仍然需要为你的文件编写转换。

# c# - C#，使用 DateTime.ParseExact 的数据解析错误

> ID：15808480
> 
> 赞同：2
> 
> 时间：2013-04-04T10:19:10.077
> 
> 标签：c#, parsing, exception, datetime, string-formatting

我有一个字符串`Value = "12/11/2013"`并尝试使用

```
DateTime.ParseExact(Value, "dd/MM/yyyy", null); 
```

但是有一个例外`FormatException`，无法理解为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T10:20:49.563

改变：

```
DateTime.ParseExact(Value, "dd/MM/yyyy", null); 
```

到：

```
DateTime.ParseExact(Value, "dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T10:26:51.073

从您的个人资料来看，您似乎处于`be-By` [文化](http://www.csharp-examples.net/culture-names/)之下，这就是您获得例外的原因。以下代码将产生相同的异常。

```
System.Threading.Thread.CurrentThread.CurrentCulture = new CultureInfo("be-BY");
string Value = "12/11/2013";
DateTime dt = DateTime.ParseExact(Value, "dd/MM/yyyy", null); 
```

要克服异常，请使用`CultureInfo.InvariantCulture`：

```
DateTime dt = DateTime.ParseExact(Value, "dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T10:40:48.540

你可以试试这个：

```
DateTime.ParseExact(Value, "dd'/'MM'/'yyyy", null); 
```

# lotus-domino - Lotus Domino 数据库 FTSearch 方法和括号

> ID：15808482
> 
> 赞同：1
> 
> 时间：2013-04-04T10:19:15.487
> 
> 标签：lotus-domino

我需要使用类似这样的 FTSearch 进行搜索 - `MS004790(419411/10)`。但它会引发`NotesException: Notes error: Query is not understandable (MS004790(419411/10))`

所以也许有一些技巧可以搜索这样的字符串，或者我需要以某种方式解析它？

求救！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:31:19.950

**TL;DR：**用引号括住您的搜索。

全文搜索有两种模式。网络搜索和笔记搜索。在您的笔记首选项中，您可以设置此项。

![优先](https://i.stack.imgur.com/nZaJ9.jpg)

网络搜索就像文本搜索一样。Notes 搜索尝试解析搜索词。

但是，如果客户端看到第一个字符是大写字母（或大写保留关键字，如“FIELD”），它可以回退到 Notes 搜索词。因此，为了防止它解析，您需要将其用引号括起来。

例如

(莲花脚本)

```
searchString = |"MS004790(419411/10)"| 
```

（爪哇）

```
searchString = "\"MS004790(419411/10)\"" 
```

如果之后仍然失败，请手动尝试在 FT 搜索栏中进行搜索。一旦你开始工作，代码应该以同样的方式工作。

如果此时仍然失败，则可能与 UNK 表有关。如果是这样，请参阅以下内容：

[Lotus Domino：更改字段的类型后，全文搜索不适用于该字段](https://stackoverflow.com/questions/9151448/lotus-domino-after-changing-type-of-a-field-full-text-search-wont-work-for-th/9151751#9151751)

# jquery - 按钮单击事件中的文件上传窗口

> ID：15808483
> 
> 赞同：0
> 
> 时间：2013-04-04T10:19:20.160
> 
> 标签：jquery, asp.net, button, file-upload

在我的 ASP.NET 网站中，我必须从文件上传窗口添加浏览文件，但出于某些设计原因，页面中使用了 Textbox 和 Button 控件。

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click1" 
            Text="Button" />
     <input type="file"  runat="server" id="myfile"/> 
```

这个文件上传控件的显示是none..

我在标题标签中使用了 Jquery 插件，如下所示，

```
<head>
--
     <script src="../Scripts/jquery-1.4.1-vsdoc.js" type="text/javascript">
            </script><script src="../Scripts/jquery-1.4.1.js" type="text/javascript"></script>
            <script src="../Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
    </head> 
```

在我的服务器端代码中，在按钮单击事件中，我的代码如下，

```
 protected void Button1_Click1(object sender, EventArgs e)
    {
         StringBuilder strScript = new StringBuilder();
       strScript.Append("$(document).ready(function(){");
         strScript.Append("('myfile').click();");
         strScript.Append("});");
       Page.ClientScript.RegisterStartupScript(this.GetType(), "Script",
         strScript.ToString(), true);
    } 
```

上面的代码没有打开文件上传窗口。请给一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:23:27.300

您没有在 jquery 选择器中包含 # 例如

```
 strScript.Append("('#myfile').click();"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:29:34.610

我认为调用服务器打开文件上传对话框不是一个好主意。

您可以通过 javascript 或 jQuery 来实现它。

您可以将 onclientClick 事件添加到按钮并执行可能需要的 javascript..

SO中已经提出了类似的问题..点击[打开文件上传对话框检查它](https://stackoverflow.com/questions/6292825/open-file-upload-dialog-on-click)

# reload - 通过 javascript (Android / iOS) 关闭 Trigger.io forge 移动应用程序 - 以应用 Reload

> ID：15808488
> 
> 赞同：1
> 
> 时间：2013-04-04T10:19:26.650
> 
> 标签：reload, trigger.io, forge

是否可以通过 forge JS api 要求 Trigger.io Forge 移动应用程序自行关闭？

我们看到用户在重新加载时遇到问题：当重新加载可用时，我们会弹出一条消息，但我们很难解释他们必须这样做

1.  从应用程序中出来
2.  等待未知的时间（重新加载更新以下载）
3.  再次启动应用程序

人们要么不理解，要么强制退出应用程序意味着重新加载不会下载，或者他们出来并在下载之前直接返回 - 然后立即再次看到我们的“重新加载”弹出消息。

我想知道我们是否可以为他们关闭应用程序，如果这能让事情变得更顺利一些。除非人们对这个用户流有更好的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:31:40.640

您是否正在收听[updateReady](http://docs.trigger.io/en/v1.4/modules/reload.html#updateready-addlistener)事件以弹出您的消息？如果是这样，则 Reload 更新实际上已经下载并准备就绪：用户此时需要做的就是从应用程序切换并再次返回；无需延迟。

以编程方式关闭 Trigger.io 的唯一方法是在[backPressed](http://docs.trigger.io/en/v1.4/modules/event.html#backpressed-addlistener)事件侦听器中，在这种情况下它对您没有用处。

# java - 哪里可以找到设计模式，Eclipse 插件开发的最佳实践

> ID：15808490
> 
> 赞同：11
> 
> 时间：2013-04-04T10:19:30.760
> 
> 标签：java, eclipse, eclipse-plugin

我们的团队正在开发一个基于 Eclipse 的 IDE（通常是一个插件），目前我们进展顺利，但我觉得不知何故我们感觉到了代码中的不良做法。我可以在这里举的例子是`eventListeners`：

考虑我们有一个名为按钮的按钮`button1`，并且在同一个 java 文件中（就在按钮下方）我们正在向它添加选择侦听器，如下所示：

```
button1.addSelectionListener(new SelectionListener() {
    //Remaining code here
} 
```

我觉得这完全是个坏主意，我的问题是，是否有任何设计模式、最佳实践等可用于 Eclipse 插件开发？或者你有什么小技巧/建议吗？我知道有诸如`Code Complete 2`等之类的书籍，但我需要一些关于 eclipse 插件开发的建议。

我在 Google 中尝试过，但没有得到太多关于相同的好信息，我得到了这篇 IBM 的[文章](http://www.ibm.com/developerworks/opensource/tutorials/os-eclipse-plugin-guide/section2.html)。但我觉得它不是很有用，任何建议或提示都表示赞赏。

**注意：**如果这里不合适或者对任何其他 stackexchange 网络（如程序员）有好处，请告诉我，我可以把它移到那里。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T11:13:52.013

经过几年的插件开发，当我发现自己正在为如何实现新功能而苦苦挣扎时，我发现这些资源对我最有用：

1.  **Eclipse 源代码**。没有什么能比得上这个。尝试找到一些已经存在的与您正在做的事情类似的部分，并看看 Eclipse 开发人员是如何做到的——他们使用了哪些模式和扩展等等。有助于使您的插件与 Eclipse 的其他部分保持一致。Eclipse Plugin Spy 是您的朋友 ( `Alt`+ `Shift`+ `F1`/ `F2`)。

2.  [**Platform Plug-in Developer Guide**](http://help.eclipse.org/indigo/index.jsp?nav=/2) - 将引导您了解 Eclipse 的基本概念，例如如何正确创建菜单、实现编辑器或保存用户首选项。

3.  [**Eclipse Plug-ins (4th Edition)**](https://rads.stackoverflow.com/amzn/click/com/0321774159) - 众所周知的插件开发者必备。

而且，当然，堆栈溢出:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T22:13:25.650

我想添加一些我发现对 dreo 的答案有用的资源。如果您想详细了解某些内容，则 Eclipse 资源非常宝贵。然而，为了理解全局概念，我建议尽可能多地阅读教程。我可以推荐以下网站：

**[Eclipse Corner Articles](http://www.eclipse.org/articles/)**有很多教程，从基本概念到插件特定主题。

**[Vogella Eclipse Tutorials](http://www.vogella.com/eclipse.html)**也是一个很好的教程网站。它涉及许多对 Eclipse RCP 开发很重要的主题。

**[SWT Snippets](http://www.eclipse.org/swt/snippets/)**超过 100 个代码片段。如果您想了解有关 SWT 及其功能的更多信息，它真的很有用。

**[官方 Eclipse 常见问题](http://wiki.eclipse.org/The_Official_Eclipse_FAQs)**最后但并非最不重要的一点是，我可以推荐官方 Eclipse 常见问题。它们为各种主题提供紧凑的解决方案。

# php - php/mysql 数组或查询一些值

> ID：15808492
> 
> 赞同：0
> 
> 时间：2013-04-04T10:19:34.927
> 
> 标签：php, mysql, while-loop, return-value

你好我有这个查询

```
$upit = "SELECT id from usluga";
$rezultat = mysql_query($upit);
while($red = mysql_fetch_object($rezultat))
{
    echo "<li>{$red->id}</li>";
} 
```

我想在退出时得到这个：

```
<li>1,2,3,4,5,6</li>
<li>7,8,9,10,11,12</li>
<li>13,14,15,16,17,18</li>
<li>19,20,21,22,23,24</li> 
```

等等..

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T10:23:59.290

您可以使用 mod operator(%) 或使用数组函数来实现这一点

```
$upit = "SELECT id from usluga";
$rezultat = mysql_query($upit);

while ($red=mysql_fetch_object ($rezultat)) {
    $t[] = $red->id;
}

$chunks = array_chunk($t, 6);
foreach ($chunks as $chunk) {
    echo "<li>" . join(",", $chunk) . "</li>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:44:19.653

试试这个..

```
$upit="SELECT id from usluga";
$rezultat=mysql_query($upit);
$i=0;
$liflag=0;
while ($red=mysql_fetch_assoc($rezultat))
{
    if($i<6)
    {
        $liflag=1;
        if($i==0)
        {
            echo "<li>$red->id";
            $i++;
            continue;
        }
        else 
        {
            echo ",$red->id";
            $i++;
            continue;
        }
    }
    else
    {
        echo ",$red->id</li>";
        $i=0;
        $liflag=0;
        continue;
    }
}
if($liflag==1)
{
    echo "</li>";
} 
```

# c++ - C++ High frequency loop/thread timing

> ID：15808494
> 
> 赞同：1
> 
> 时间：2013-04-04T10:19:37.410
> 
> 标签：c++

For a bit of context, I am writing a simple CPU emulator. The emulator process boils down to calling a 'step' function to read and execute the next operation in the program. Currently this is just done as fast as possible in a `while` loop.

I would like the code to be cross-platform but (unfortunately) windows is the primary target.

I need to be able to execute my `Emulator->step()` function at *regular* intervals in the range of 1,000Hz to 100,000Hz.

*   For a slower loop I would simply use `sleep()` but (on windows at least) it doesn't have the resolution for such a high frequency.

*   I have also toyed with spinning a loop checking a Boost microsecond timer. Ignoring the inaccuracy of this method, it uses up real CPU time whilst it is meant to be 'idle'. I am running several emulated CPUs concurrently in threads so the `while` loop causes a noticeable impact on performance.

Surely there is a method of doing what I want to do with C++?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:27:02.733

您不能在 Windows 下精确睡眠（也许 Windows 性能计数器功能有帮助，请参阅[Is there a Windows equivalent of nanosleep?](https://stackoverflow.com/questions/7827062/is-there-a-windows-equivalent-of-nanosleep)）。

您说您在线程中同时运行许多模拟 CPU，因此一种可能的解决方案是丢弃线程并自己为不同的 CPU 进行调度（循环）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:30:35.723

您不需要任何特殊的睡眠解决方案。在每个循环结束时，只需计算您是否需要睡眠。如果没有，运行下一个循环。如果是这样，请按计算的数量睡觉。如果您在一个循环中多睡一点也没关系，因为这种逻辑会让您在下一个循环中睡得更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:21:13.393

如果您使用的是 C++11 编译器，请查看`<chrono>`. 在那里你可以找到高精度计时器。但请注意，在 Windows 环境中，这些仍然具有较低的准确性，微软有望在下一个版本中修复。

# c# - 使用 $.ajax() 从 .ashx 重定向到 .aspx

> ID：15808495
> 
> 赞同：0
> 
> 时间：2013-04-04T10:19:40.707
> 
> 标签：c#, asp.net, ajax

如果我使用[此处](https://stackoverflow.com/questions/2048974/response-redirect-from-ashx-file)发布的解决方案，我将不会被转移到新页面。但是，如果我`$.ajax()`在控制台中检查调用，实际的 .aspx 页面似乎在响应正文中。所以我的猜测是.ashx 被重定向到.aspx。

```
void ProcessRequest(HttpContext context)
{
     context.Response.Redirect(newUrl);
} 
```

如何从发送 ajax 请求的 .aspx 页面重定向用户？我需要从我的 handler.ashx 调用那个 .aspx 的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:53:07.657

该`Response.Redirect`命令只不过是指示浏览器移动到其他页面。该命令首先是浏览器的标题指令。还有一个javascript小脚本写在页面上，以防标题失败。

现在，当您使用 Ajax（无论是其处理程序还是页面）进行调用时，结果返回到页面但在 ajax 缓冲区内，重定向标头被“吃掉”，而不是转到浏览器本身来运行它们。所以不能通过ajax调用直接完成重定向。

您应该做的是向您的 ajax 调用返回一个信号，并查看该信号/标志并使用 javascript 调用进行重定向`window.location.replace("redirectPage.aspx")`

例如，类似：

```
$.ajax({
    url: "action.ashx",
    type: "GET",
    dataType: 'json',
    success: function(data)     
    {
        if(data.NeedRedirect)
            window.location.replace("WhereToMove.aspx");
    },
    error: function(responseText, textStatus, XMLHttpRequest) 
    {
        window.location.replace("WhereToMove.aspx");
    }
}); 
```

# c++ - Compiling/Using Google Test

> ID：15808500
> 
> 赞同：1
> 
> 时间：2013-04-04T10:19:58.413
> 
> 标签：c++, visual-studio-2010, compiler-errors, googletest

I am trying to compile and use Google test for my project. I have created .sln and .vcproj files successfully using CMake. Compilation was also successful of the .sln file. But, when I try to follow steps as pointed out in the "nonsensical101"-s answer as below: [How to setup Google C++ Testing Framework (gtest) on Visual Studio 2005](https://stackoverflow.com/questions/531941/how-to-setup-google-c-testing-framework-gtest-on-visual-studio-2005/4222169#4222169) I see that there is no **"gtestd.lib"** on my computer at all. Why??? That is also the error I get then when I try to compile a sample program.

Error:

> Error 1 error LNK1104: cannot open file 'gtestd.lib' C:\Documents and Settings\User\my documents\visual studio 2010\Projects\String_GTest\String_GTest\LINK

ps. I am using Visual Studio 10.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:36:49.700

Google 的 C++ 测试框架有两个输出库：一个是 gtest.lib，另一个是 gtest_main.lib。根据 Nik Reiman 关于[如何在 Visual Studio 2005 上设置 Google C++ 测试框架 (gtest)](https://stackoverflow.com/questions/531941/how-to-setup-google-c-testing-framework-gtest-on-visual-studio-2005/4222169#)的回答，如果您没有这些，则意味着您没有成功编译它...

# ios - Can we create custom map application having turn by turn navigation feature like google map app and Apple's native Maps application?

> ID：15808504
> 
> 赞同：1
> 
> 时间：2013-04-04T10:20:04.893
> 
> 标签：ios, objective-c, apple-maps

I need to create a Map Navigation application with turn by turn navigation features like Apple's map.

I know we can open the Maps application to show address and route between source and destination location which provides direction for routing.

Here is code i have used.

```
-(void)openMaps
{

 MKPlacemark *place1 = [[MKPlacemark alloc] 
initWithCoordinate:CLLocationCoordinate2DMake(38.40904,-121.36562)  
   addressDictionary:nil];

MKMapItem *mapItem1 = [[MKMapItem alloc]initWithPlacemark:place1];

MKPlacemark *place2 = [[MKPlacemark alloc]
   initWithCoordinate:CLLocationCoordinate2DMake(38.41406,-121.36305)
   addressDictionary:nil];
MKMapItem *mapItem2 = [[MKMapItem alloc]initWithPlacemark:place2];

NSArray *mapItems = @[mapItem1, mapItem2];

NSDictionary *options = @{
   MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving,
   MKLaunchOptionsMapTypeKey:[NSNumber numberWithInteger:MKMapTypeSatellite],
   MKLaunchOptionsShowsTrafficKey:@YES 
   };

[MKMapItem openMapsWithItems:mapItems launchOptions:options];

} 
```

But it opens Maps application to show turn by turn navigation.

Is it possible to show this feature without opening maps i.e. inside custom application?

Thanks

# sql-server-2008 - 作业失败时发送电子邮件通知不起作用

> ID：15808506
> 
> 赞同：1
> 
> 时间：2013-04-04T10:20:08.070
> 
> 标签：sql-server-2008, database-mail

1.  我为系统管理员准备了脚本，用于创建和配置数据库邮件配置文件、帐户和操作员。他运行脚本，所以我创建了临时工作，但失败了。然后我在作业失败时设置电子邮件通知。我运行作业，但未发送任何电子邮件。然后我尝试运行`msdb.dbo.sp_send_dbmail` 程序，使用相同的操作员，我收到了电子邮件。作业失败时不发送电子邮件的原因是什么？在作业失败时使用电子邮件通知的情况下正在运行哪个过程 - 它不同于`sp_send_dbmail`？

2.  另一件事是在数据库邮件日志中没有关于发送电子邮件状态的信息（它是空的） - 也许我没有权限查看日志？

3.  我将配置文件设置为 public, running `dbo.sysmail_add_principalprofile_sp procedure`，但是当我尝试发送运行记录为 dbowner 的电子邮件时`msdb.dbo.sp_send_dbmail`，我收到一个错误：*EXECUTE 权限被拒绝。*为什么它只在我以用户身份登录时才有效？

我正在使用 SQL Server 2008。

这是一个 T-SQL 代码，我将它传递给 sysadmin 用于创建和配置数据库邮件。

```
-- Create a Database Mail account

EXECUTE msdb.dbo.sysmail_add_account_sp
    @account_name = 'Mail Account',
    @description = 'Mail account for administrative e-mail.',
    @email_address = 'xx@xx.pl',
    @display_name = 'Job failure notification',
    @mailserver_name = 'xx.xx.xxx' ,
    @username = 'aaa',
    @password = 'xxx'

-- Create a Database Mail profile

 EXECUTE msdb.dbo.sysmail_add_profile_sp
    @profile_name = 'Database Mail Profile',
    @description = 'Profile used for job failure notifications.' ;

-- Add the account to the profile

EXECUTE msdb.dbo.sysmail_add_profileaccount_sp
    @profile_name = 'Database Mail Profile',
    @account_name = 'Mail Account',
    @sequence_number =1 ;

-- Enable Mail profile in SQL Agent

EXEC master.dbo.xp_instance_regwrite 
      N'HKEY_LOCAL_MACHINE', 
      N'SOFTWARE\Microsoft\MSSQLServer\SQLServerAgent', 
      N'DatabaseMailProfile', 
      N'REG_SZ', 
      N'Database Mail Profile'
GO

-- Create new operator

EXEC msdb.dbo.sp_add_operator @name=N'SQL Job Failure', 
            @enabled=1, 
            @weekday_pager_start_time=90000, 
            @weekday_pager_end_time=180000, 
            @saturday_pager_start_time=90000, 
            @saturday_pager_end_time=180000, 
            @sunday_pager_start_time=90000, 
            @sunday_pager_end_time=180000, 
            @pager_days=0, 
            @email_address=N'xx@xx.pl', 
            @category_name=N'[Uncategorized]'
GO

-- Setting profile as public

EXECUTE msdb.dbo.sysmail_add_principalprofile_sp
    @profile_name = 'Database Mail Profile',
    @principal_name = 'public',
    @is_default = 0 ; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T11:04:58.017

我认为您必须在执行这些脚本后重新启动 SQL 代理。查看

*   工作通知页面中的设置 - 必须选中电子邮件复选框并且必须定义操作员
*   右键单击 Sql Agent -> 属性 - 警报设置 - 必须提供电子邮件设置

查看这篇[文章](http://www.mssqltips.com/sqlservertip/1523/how-to-setup-sql-server-alerts-and-email-operator-notifications/)以确保您没有错过任何内容。

# android - android在linearlayout上设置ontouchlistener不起作用

> ID：15808515
> 
> 赞同：3
> 
> 时间：2013-04-04T10:21:06.593
> 
> 标签：android, android-linearlayout, ontouchlistener

我是 android 新手，我正在尝试检测滑动事件。如果我将我的侦听器添加到 webview 或 textview 它工作得很好：

```
WebView myWebView = (WebView) findViewById(R.id.myWebview);        
myWebView.setOnTouchListener(myListener); 
```

但是，如果我创建一个包含一些项目的线性布局，然后尝试添加我的侦听器，则不会发生：

```
LinearLayout ll = (LinearLayout)findViewById(R.id.myLinearLayout);
ll.setOnTouchListener(myListener); 
```

据我所知，WebView 和 LinearLayout 都扩展了 View 类，因此 setOnTouchListener 应该可以很好地处理它们。我的问题是如何让它在我的线性布局视图上工作？我试图为布局的所有子级分别设置监听器，但这不是我想要的。例如，如果这是我的 xml：

```
<LinearLayout
        android:id="@+id/myLinearLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:orientation="vertical">

        <RadioButton
            android:id="@+id/radioButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="RadioButton" />

        <RadioButton
            android:id="@+id/radioButton2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="RadioButton" />

        <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

            <Spinner
                android:id="@+id/spinner1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

            <Spinner
                android:id="@+id/spinner2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

        </LinearLayout>

</LinearLayout> 
```

如果我滑动布局的实际儿童，即我的单选按钮或微调器，则将检测到滑动事件。但是，如果我在布局的空白处滑动，什么也不会发生

任何帮助和指示将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:39:21.447

试试这个监听器

```
LinearLayout l=(LinearLayout)findViewById(R.id.myLinearLayout);

            l.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View arg0, MotionEvent arg1) {
                    // TODO Auto-generated method stub
                    Log.i("Touch","Sample x"+arg1.getX());
                    Log.i("Touch","Sample x"+arg1.getY());
                    return true;
                }
            }); 
```

# asp.net - 单选按钮在 asp.net 中不起作用

> ID：15808519
> 
> 赞同：-1
> 
> 时间：2013-04-04T10:21:11.720
> 
> 标签：asp.net

我是初学者。单选按钮无法正常工作。我不知道有什么问题

```
protected void RadioButton1_CheckedChanged1(object sender, EventArgs e)
{
    if (RadioButton1.Checked == true)
    {
        Label1.Text = "Upload our video file";
        RadioButton2.Checked = false;
    }
    else
    {
        Label1.Text = "Upload our image file";
        RadioButton1.Checked = false;
    }
}
public void upload()
{
    SqlCommand cmd = new SqlCommand("insert into video_info(Name,path,user_name,email,comment)values(@Name,@path,@user_name,@email,@comment)", con);
    cmd.Parameters.AddWithValue("@Name", txt_file.Text);
    cmd.Parameters.AddWithValue("@path", "video/" + fileuplod.FileName);
    cmd.Parameters.AddWithValue("@user_name", use_name.Text);
    cmd.Parameters.AddWithValue("@email", email.Text);
    cmd.Parameters.AddWithValue("@comment", comment.Text);
    fileuplod.SaveAs(Server.MapPath("~/video/" + fileuplod.FileName));
    cmd.ExecuteNonQuery();
}
protected void submit_Click(object sender, EventArgs e)
{
    upload();
} 
```

}

我想要做什么。我有两个单选按钮。图像和视频。假设用户选择图像。然后所有细节都将保存在图像表上，或者如果用户单击视频。所有细节都转到 image_database。

可能是我的逻辑错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:23:55.780

在单选按钮属性中将自动回发设置为 true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:28:23.290

```
Try this 
public void upload(string query)
{
    SqlCommand cmd = new SqlCommand(query, con);
    cmd.Parameters.AddWithValue("@Name", txt_file.Text);
    cmd.Parameters.AddWithValue("@path", "video/" + fileuplod.FileName);
    cmd.Parameters.AddWithValue("@user_name", use_name.Text);
    cmd.Parameters.AddWithValue("@email", email.Text);
    cmd.Parameters.AddWithValue("@comment", comment.Text);
    fileuplod.SaveAs(Server.MapPath("~/video/" + fileuplod.FileName));
    cmd.ExecuteNonQuery();
}
protected void submit_Click(object sender, EventArgs e)
{
 string query;
if (RadioButton1.Checked == true)
    {

       query="insert into video_info(Name,path,user_name,email,comment)values(@Name,@path,@user_name,@email,@comment)";
       Label1.Text = "Upload our video file";
        RadioButton2.Checked = false;
    }
    else
    {

       query="insert into Image_info(Name,path,user_name,email,comment)values(@Name,@path,@user_name,@email,@comment)";
       Label1.Text = "Upload our image file";
        RadioButton1.Checked = false;
    }
  if(query!="")
    {
       upload(query);
    }

} 
```

# google-apps-script - 在第一个计数实例上方添加一行 - Google 电子表格

> ID：15808524
> 
> 赞同：2
> 
> 时间：2013-04-04T10:21:20.520
> 
> 标签：google-apps-script, google-sheets

我正在尝试编写一个脚本，使我能够在唯一值的第一个计数实例之上添加一行。

例如。

```
 A
    German
    German
    German
    Italian
    Italian
    French
    French 
```

运行脚本后，它应该类似于：

```
 A
    DE
    German
    German
    German
    IT
    Italian
    Italian
    FR
    French
    French 
```

我所写的只是确定存在多少值：

```
function insertRowAbove() 
 {
 var report = SpreadsheetApp.getActive().getSheetByName('REPORT');

 var lang = report.getRange('A10:A').getValues();
 var positions = report.getRange('A10:A').getA1Notation();
 var DE = [];

 for (var i = 0; i < lang.length; i++)
 {
  if (lang[i] == 'German') 
  {
    DE++
    report.getRange('A1').setValue(DE);//now I know there are 3 German entries
  }
 }
} 
```

我的问题：脚本是否有可能知道第一次出现的值的 A1notation 并在其上方添加一行？我感谢你任何明智的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:27:49.523

以下作品（参见[示例](https://docs.google.com/spreadsheet/ccc?key=0AmR0r1Y14zgydG03QS1Dd0dLRDA3SWgtLXp6TzV3d3c#gid=2)）：

```
function insertRowAbove() {
 var report = SpreadsheetApp.getActive().getSheetByName('Insert Row Above');
 var values = report.getRange('B2:B').getValues();

 var prevVal = "null"; 
 var index = 1;
 while (index < values.length) {
   if (values[index].toString() != prevVal.toString()) {

     var header = 'unknown';
     if (values[index] == 'German')
       header = 'DE';
     else if (values[index] == 'Italian')
       header = 'IT';
     else if (values[index] == 'French')
       header = 'FR';

     report.insertRowBefore(index+1);
     report.getRange(index+1, 2).setValue(header);
     values = report.getRange('B2:B').getValues();
     index++;
   }
   prevVal = values[index];
   index++;
 }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:33:23.760

您的具体问题是：

> 我的问题：脚本是否有可能知道第一次出现的值的 A1notation 并在其上方添加一行？

通过结合使用布尔值来指示您是否找到了您正在寻找的*任何*`Range`项目，以及几种方法，您可以获得第一次出现的 A1 表示法。

```
var column = 1; // this example is only using column A
var foundGerman = false;
var firstGerman = '';
...
if (lang[i] == 'German') {
  if (!foundGerman) {
    foundGerman = true;
    firstGerman = range.getCell(i, column).getA1Notation();
  }
  ...
} 
```

之后，您将拥有包含“德语”的第一个单元格的 A1Notation。

但是，该函数`insertRowsBefore()`是一个`Sheet`方法，并且需要一个行号作为参数，而不是 A1Notation。因此，弄清楚第一个德国牢房的地址是什么是不必要的。

## 脚本

这是我的参赛作品！为了速度，明智的做法是使用尽可能少的应用程序脚本服务调用。在这个脚本中，所有的数据操作都是使用数组完成的，最终结果只写一次。

预计您将拥有超过三种您关心的语言，并且为了可维护性，语言查找由 Object 处理，`iso639`. （假设您使用的是[ISO 639-1 语言代码](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)。）因此，实际工作只需要 10 行代码！

```
function insertViaArray() {
  var sheet = SpreadsheetApp.getActive().getSheetByName('REPORT');
  var values = sheet.getDataRange().getValues();
  var newValues = [];

  var iso639 = 
    {
      "German" : "DE",
      "Italian" : "IT",
      "French" : "FR"
    }

  var curLang = '';
  for (var i in values) {
    if (values[i][0] !== curLang) {
      curLang = values[i][0];
      newValues.push([iso639[curLang]]);
    }
    newValues.push([values[i][0]]);
  }
  sheet.getRange(1, 1, newValues.length, 1).setValues(newValues)
}; 
```

**编辑**脚本 V2

通过使用`Array.splice()`插入语言标签，我们可以进一步将代码减少到 8 行工作，并消除对并行`newValues`数组的需要。

```
function insertViaArrayV2() {
  var sheet = SpreadsheetApp.getActive().getSheetByName('REPORT');
  var values = sheet.getDataRange().getValues();

  var iso639 = 
    {
      "German" : "DE",
      "Italian" : "IT",
      "French" : "FR"
    }

  var curLang = '';
  for (var i = 0; i < values.length; i++) {
    if (values[i][0] !== curLang) {
      curLang = values[i][0];
      values.splice(i, 0, [iso639[curLang]]);
    }
  }
  sheet.getRange(1, 1, values.length, 1).setValues(values)
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:06:28.017

这是一种有趣的练习，像往常一样，可能有很多方法可以让它发挥作用。

我不是假装我的方法更好，它只是不同，因此它可能值得在这里展示它;-)

```
function testFunction() {
  var sh = SpreadsheetApp.getActiveSheet();
  var data = sh.getRange('A10:A').getValues();
  var rowNum = 11;
  var previous = data[0][0];
  Logger.log(data)
 sh.insertRowBefore(10);
 sh.getRange(2,1).setValue(firstLetters(data[0][0]));
  for(n=1;n<data.length;++n){
  if(data[n][0].replace(/ /g,'')==previous.replace(/ /g,'')){
     previous = data[n][0] ; 
     ++rowNum ; 
     continue ; 
     }else if(firstLetters(data[n][0])){
     sh.insertRowBefore(rowNum+1);
     sh.getRange(rowNum+1,1).setValue(firstLetters(data[n][0]));
     ++rowNum
     previous = data[n][0]
     ++rowNum
     Logger.log(rowNum+'  '+firstLetters(data[n][0]))
     }else{
     break
     }
}
}

function firstLetters(name){
if (name==''){return false}
var str = name.toString().replace(/ /g,'').toUpperCase().substring(0,2);
if (str=='GE') {str='DE'};// handle german exception
if (str=='PO'){ str='PT'} ;//handle portuguese exception
return str;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/jd8jo.jpg)

# java - 什么更有效 - 方法或块上的同步

> ID：15808531
> 
> 赞同：-3
> 
> 时间：2013-04-04T10:21:29.467
> 
> 标签：java, multithreading, synchronization, synchronized

有人可以告诉我`synchronize`对Java中的方法或块更有效吗？

想想这个，当你`synchronize`做某事时它会影响性能，所以我会假设在一个块上同步优先于在一个方法上同步，因为它占用更少的代码 - 总是这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:24:30.317

如果你同步方法，那么整个方法都是同步的，因此一次只有一个线程可以执行该方法。如果您在该方法中同步代码块，则可以有多个线程同时执行该方法，但一次只能有一个线程进入同步块。

由此我们可以得出结论，在所需的最小代码块上进行同步是最有效的方法。然而，同步方法与代码块之间的实际差异实际上取决于方法以及同步块中遗漏了哪些代码。

# iphone - 如何允许特定的视图控制器同时支持横向和纵向

> ID：15808532
> 
> 赞同：2
> 
> 时间：2013-04-04T10:21:29.660
> 
> 标签：iphone, ios, objective-c, orientation, uiinterfaceorientation

我的应用程序是基于导航的应用程序，它支持 iOS 6。除了视图控制器之外，所有其他应用程序都只支持纵向模式。单独的特定视图控制器必须同时支持横向和纵向。

我搜索了很多关于这个的问题，但没有一个答案适合我。如果有人知道，请指导我

我在 Project -> Targets -> Summary -> Supportedorientation中将方向设置为**Portait**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T10:33:55.903

首先，如果您正在为 iOS6 制作应用程序，您应该使用[UIViewController 文档中介绍的 iOS6 方法。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)类似的方向方法`shouldAutorotateToInterfaceOrientation`在 iOS6 中已弃用，iOS6 的替代方法是`shouldAutoRotate`. 如果您的应用也支持 iOS5，您应该只使用旧方法。

其次，如果您`UINavigationcontroller`在应用程序中使用并且需要具有不同的界面方向，那么 navigationController 可能会弄乱应用程序中的界面方向。可能的解决方案（对我有用）是实现自定义`UINavigationController`并覆盖该自定义`UINavigationController`类中的界面方向方法，这将使您的 viewControllers 根据您设置的方向旋转，因为您的控制器是从`UINavigationController`. 不要忘记在您的特定视图控制器中添加这些方法。

**自定义导航控制器.h**

```
@interface CustomNavigationController : UINavigationController
@end 
```

**自定义导航控制器.m**

```
@implementation CustomNavigationController

//overriding shouldRotate method for working in navController
-(BOOL)shouldAutorotate
{  
  return   [self.topViewController shouldAutorotate];   
}

-(NSUInteger)supportedInterfaceOrientations
{
   return [self.topViewController supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
   return [self.topViewController preferredInterfaceOrientationForPresentation];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:27:34.180

我真的认为正确的方法是将横向和纵向设置为支持的方向，并且不允许更改您不想旋转的 VC 上的方向，方法是在

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

如果不应该支持传递给该方法的方向。

正如评论中提到的，这种方法不能再使用了。你应该使用：

```
-(BOOL) shouldAutorotate 
```

并找出此函数中的当前方向，如果您不想旋转，则返回 NO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T15:35:56.380

不要忘记让您的应用程序有不同的方向！

否则上面的任何东西都不会起作用

将其设置在部署信息部分下 General 的项目目标中：

![在此处输入图像描述](https://i.stack.imgur.com/jkCAJ.png)

# c# - Lucene.NET 2.9 自定义过滤器添加授权

> ID：15808533
> 
> 赞同：4
> 
> 时间：2013-04-04T10:21:33.213
> 
> 标签：c#, search, filter, lucene, lucene.net

朋友们，

我是 Lucene 的新手......
我成功地创建了一个索引，添加了字段，我可以搜索等它可以工作。

现在，我在我的数据库中有一个视图，它告诉哪些用户可以看到哪个文档。这个视图是使用几个复杂的规则创建的，所以我想重用这个视图。所以我需要在 Lucene 搜索中添加一个过滤器，以删除与查询匹配但用户无权访问的文档。
我现在尝试做的是：
- 将数据库文档 ID 存储在一个字段中。这是一个 Guid，我将它存储为一个字符串。
- 创建一个自定义过滤器，获取当前用户可以访问的所有文档 ID，然后使用 lucene 中的字段进行过滤

我觉得它效率不高...用户可以访问数十万个文档，因此我可能会检索需要过滤的 200 000 个文档 ID。我想我必须缓存一些东西......
这是我编写的代码，但它不起作用：使用过滤器时不返回任何文档（它应该返回 3 个文档）

```
public class LuceneAuthorisationFilter : Filter
{
    public override DocIdSet GetDocIdSet(Lucene.Net.Index.IndexReader reader)
    {
        List<Guid> ids = this.load(); // Load list of ID from database
        OpenBitSet result = new OpenBitSet(reader.MaxDoc);

        int[] docs = new int[1];
        int[] freq = new int[1];

        for (int i = 0; i < ids.Count; i++)
        {
            Lucene.Net.Index.TermDocs termDocs = reader.TermDocs(new Lucene.Net.Index.Term("EmId", ids.ElementAt(i).ToString()));

            int count = termDocs.Read(docs, freq);
            if (count == 1)
            {
                result.FastSet(docs[0]);
            }
        }
        return result;
    }
} 
```

你有什么想法吗？以及如何提高性能？

谢谢

编辑：
上面的代码有效，问题只是 EmId 字段没有被索引。现在我已经改变并且它有效。
**现在我想有任何提示来提高性能**

* * *

***第二次编辑添加反馈***

注意：测试环境包含25000个文档，文档访问列表包含50000个id（因为所有文档还没有

索引）

*   使用上面的自定义过滤器：第一次〜2600ms，下一次过滤器缓存为2100ms
*   使用布尔查询过滤器：~4700ms 然后~4000ms

这些都是糟糕的表现......所以我再次搜索了一个找到的“FieldCacheTermsFilter”过滤器。

*   使用 FieldCacheTermsFilter: ~600ms 然后 ~60ms

这是可以接受的表现

PS：我还发现了另一个类似[的问题](https://stackoverflow.com/questions/795532/how-do-i-pass-a-list-of-allowed-ids-to-filter-a-lucene-search)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:00:29.810

当没有给出数字/测量值时，谈论表演总是很棘手。

话虽这么说，你在表演方面有什么表现？您的瓶颈是什么（IO/CPU/等），您是否将其与其他方法进行了比较？

你真的需要提高性能吗？关于性能改进的讨论不是关于“感觉”，而是围绕基于证据的确凿事实和改进的需要。

现在对于您的`Filter`，除非我没有从问题中得到什么，否则我不明白为什么您不能使用已经内置在 Lucene 中的东西来完成艰苦的工作。

以下是我通常在 Lucene 中处理权限内容的方式，它总是与包含数十亿文档的索引一起工作。我通常使用具有最小年龄的 LRU 类型缓存来清除缓存中的项目。

IE：缓存 100 个项目，但如果最近最少使用不超过 15 分钟，则缓存更多。

如果您尝试这样的事情，如果您将其与您的方法进行比较并返回发布一些性能数据，这可能会很有趣。

**免责声明**：直接在 SO 的 textarea 中编写的代码，将其视为伪代码，而不是已经工作的复制粘贴解决方案：

```
// todo: probably some thread safety
public class AccessFilterFactory
{
    private static AccessFilterFactory _instance = new AccessFilterFactory();;
    private AccessFilterFactory()
    {
    }

    public AccessFilterFactory Instance
    {
        get
        {
            return _instance;
        }
    }

    private Cache<int, Filter> someKindaCache = new Cache<int, Filter> ();

    // gets a cached filter if already built, if not it creates one
    // caches it and returns it
    public Filter GetFilterForUser(int userId)
    {
        // return from cache if you got it
        if(someKindaCache.Exists(userId))
            return someKindaCache.Get(userId);

        // if not, build and cache it
        BooleanQuery filterQuery = new BooleanQuery();
        foreach(string id in ids)
        {
            filterQuery.Add(new TermQuery(new Term("EmId", id)),  BooleanClause.Occur.SHOULD);
        }
        Filter cachingFilter = new CachingWrapperFilter(new QueryWrapperFilter(filterQuery));
        someKindaCache.Put(userId, cachingFilter);
        return cachingFilter;
    }

    // removes a new invalid filter from cache (permissions changed)
    public void InvalidateFilter(int userId)
    {
        someKindaCache.Remove(userId);
    }   
} 
```

# android - 如何在android的类文件中加粗文本？

> ID：15808535
> 
> 赞同：0
> 
> 时间：2013-04-04T10:21:45.127
> 
> 标签：android

```
 String  _body = "sq Home : "+HomeScreen.edt_sqft_home.getText().toString() +"\n"
                        +"Age of Home years : "+HomeScreen.edt_age.getText().toString() +"\n"
                        +"Additional service : "+HomeScreen.output +"\n\n"
                        +"Street Name : "+HomeScreen.edt_streetname.getText().toString() +"\n"
                        +"City : "+HomeScreen.edt_city.getText().toString() +"\n"
                        +"State : "+HomeScreen.edt_state.getText().toString(); 
```

hiii 我想将“”中的文本加粗。比如“Sq Home”、“Age of Home Years”。怎么可能？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:26:51.727

```
String source = "This is example text";
Spannable out = new SpannedString(source);
StyleSpan boldSpan = new StyleSpan(Typeface.BOLD);
StyleSpan boldSpan2 = new StyleSpan(Typeface.BOLD);
out.setSpan(boldSpan, 1, 3, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
out.setSpan(boldSpan2, 9, 12, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:56:44.947

如果您的字符串将显示在 TextView 中，您可以使用 HTML 标记。在你的情况下，你只需要这样做：

```
String _body = "<b>sq Home</b>: " + HomeScreen.edt_sqft_home.getText().toString() + "<br/>"
       + "<b>Age of Home years</b>: " + HomeScreen.edt_age.getText().toString() + "<br/>"
       + "<b>Additional service</b>: " + HomeScreen.output + "<br/><br/>"
       + "<b>Street Name</b>: " + HomeScreen.edt_streetname.getText().toString() + "<br/>"
       + "<b>City</b>: " + HomeScreen.edt_city.getText().toString() + "<br/>"
       + "<b>State</b>: " + HomeScreen.edt_state.getText().toString();

TextView yourTextView = findViewById(R.id.yourTextViewId);
yourTextView.setText(Html.fromHtml(_body)); 
```

`yourTextView`显示 HTML 字符串的 Activity 视图在哪里。

Mark Murphy[用 TextView 支持的 HTML 标签](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)写了一篇文章。

# iphone - UIDocumentInteractionController：使用本机应用程序打开文件

> ID：15808536
> 
> 赞同：3
> 
> 时间：2013-04-04T10:21:47.377
> 
> 标签：iphone, ios

文档说 UIDocumentInteractionController 允许使用已安装的应用程序而不是本机的应用程序隐式打开文件（UTI 属性为 nil）。

```
UIDocumentInteractionController *controller = [UIDocumentInteractionController  interactionControllerWithURL:fileURL];
[controller retain];
controller.delegate = self;
//controller.UTI = uti;

CDVViewController* cont = (CDVViewController*)[ super viewController ];
CGRect rect = CGRectMake(0, 0, cont.view.bounds.size.width, cont.view.bounds.size.height);
[controller presentOpenInMenuFromRect:rect inView:cont.view animated:YES]; 
```

是否可以在 Safari 中打开例如 pdf 文件或在图库中打开图像？

PS我是Objective C的新手:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:37:20.587

无法说明设备必须使用什么应用程序打开您的文件。

例如，您可以使用 [UIApplication 的 OpenUrl 方法](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007899)来打电话，或者使用一些 url 启动 Safari。例如：

```
[[UIApplication sharedApplication] openURL:@"tel://%i", someNumber]; 
```

但是如果你想打开一个特定的文件，你必须使用`UIDocumentInteractionController`.

还有[`QLPreviewController`](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/QLPreviewController_Class/Reference/Reference.html)用于预览文档的 API。**[这](http://iosdevelopertips.com/data-file-management/preview-documents-with-qlpreviewcontroller.html)**是教程如何使用它并查看它的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:20:46.530

我曾经使用而不是`presentPreviewAnimated`预览文件。`UIDocumentInteractionController``presentOpenInMenuFromRect`

# objective-c - Objective-C OS X 系统命令

> ID：15808537
> 
> 赞同：0
> 
> 时间：2013-04-04T10:21:47.370
> 
> 标签：objective-c, macos, cocoa

有谁知道可以使用 Objective-C 执行的任何有用的系统命令，下面是一些有用的列表：

*   启动屏幕保护程序
*   睡觉
*   关闭
*   清空垃圾桶
*   弹出量
*   打开应用程序
*   锁
*   重新开始
*   登出

本质上，我想在用户单击 NSButton 时启动其中一个命令，因此这将是一种通过这种方式实现的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:41:50.310

对于屏幕保护程序：

```
- (IBAction)screensaver:(id)sender {
    NSString *script=@"tell application \"ScreenSaverEngine\" \
                             \nactivate \
                             \nend tell";
    NSAppleScript *appleScript = [[NSAppleScript alloc] initWithSource:script];
    [appleScript executeAndReturnError:nil];

} 
```

对于空垃圾箱：

```
- (IBAction)emptyTrash:(id)sender {
    NSString *script=@"tell application \"Finder\" \
                             \nempty the trash \
                             \nend tell";
    NSAppleScript *appleScript = [[NSAppleScript alloc] initWithSource:script];
    [appleScript executeAndReturnError:nil];
} 
```

公开申请

用这个

```
NSString *script=@"tell application \
                   \n\"Name of application\" \
                    \nto activate"; 
```

要卸载卷，您需要放置大量 AppleScript。以下是这些：将其设为字符串并传递给 NSAppleScript，如上所述：

```
set diskName to "YourDiskNameHere"
tell application "Finder"
 if disk diskName exists then
  eject disk diskName
 else
  tell current application
   set deviceLine to (do shell script "diskutil list | grep \"" & diskName & "\" | awk '{ print $NF }' }'")
   if deviceLine = "" then
    display dialog "The disk \"" & diskName & "\" cannot be found." buttons {"OK"} default button 1 with title "Error" with icon caution
   end if
   set foundDisks to paragraphs of deviceLine
   repeat with i from 1 to number of items in foundDisks
    set this_item to item i of foundDisks
    if this_item contains "disk" then
     do shell script "diskutil mountDisk /dev/" & this_item
    end if
   end repeat
  end tell
 end if
end tell 
```

* * *

用于[重启、关机、睡眠、注销](https://stackoverflow.com/questions/4505632/shutdown-mac-objective-c)

```
NSString *scriptAction = @"restart"; // @"restart"/@"shut down"/@"sleep"/@"log out"
NSString *scriptSource = [NSString stringWithFormat:@"tell application \"Finder\" to %@", scriptAction];
NSAppleScript *appleScript = [[[NSAppleScript alloc] initWithSource:scriptSource] autorelease];
NSDictionary *errDict = nil;
if (![appleScript executeAndReturnError:&errDict]) {
    NSLog([scriptError description]); 
} 
```

# php - PHP 包含 - 在第一次完成之前不要运行下一个

> ID：15808542
> 
> 赞同：-3
> 
> 时间：2013-04-04T10:21:58.637
> 
> 标签：php

我有一个包含三个内容的页面。

```
include 'ukt/extractor/ukt_email_extract.php';
include 'ukt/extractor/cron_bet_detail.php';
include 'ukt/extractor/cron_daily_statement.php'; 
```

然而，后两个在第一个完全完成之前运行，这是个坏消息，因为它们依赖第一个来完成它的任务。

我能对此做些什么吗？

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:30:59.303

如果他们相互依赖，可以尝试这样的事情：

```
include 'ukt/extractor/ukt_email_extract.php'; 
```

然后在这个（ukt/extractor/ukt_email_extract.php）文件的末尾（或者在它完成后更好）放：

```
include 'ukt/extractor/cron_bet_detail.php'; 
```

然后在这个（ukt/extractor/cron_bet_detail.php）文件的末尾（或者在它完成后更好）放：

```
include 'ukt/extractor/cron_daily_statement.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:17:34.533

```
include 'ukt/extractor/ukt_email_extract.php';
include 'ukt/extractor/cron_bet_detail.php';
include 'ukt/extractor/cron_daily_statement.php';` 
```

php按顺序执行文件...它不会转到下一个，直到前一个完成。

# mobile - 如何使用在 Kendo UI 中开发的 HTML 调用 Web 服务？

> ID：15808544
> 
> 赞同：0
> 
> 时间：2013-04-04T10:22:02.270
> 
> 标签：mobile, kendo-ui

我正在使用 Kendo UI 进行移动应用程序开发，想知道我是否可以使用 Kendo UI 界面访问 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:58:19.743

是的！您可以使用 Kendo UI Mobile 访问 Web 服务。

好的，好的......我会给你链接...... [http ://docs.kendoui.c​​om/tutorials/Mobile/Kendo%20Mobile%20Music%20Store/kendo-mobile-music-store-data](http://docs.kendoui.com/tutorials/Mobile/Kendo%20Mobile%20Music%20Store/kendo-mobile-music-store-data)

# c# - 以编程方式获取 Win32 旧版控件的工具提示文本

> ID：15808546
> 
> 赞同：21
> 
> 时间：2013-04-04T10:22:08.723
> 
> 标签：c#, winapi, automation, tooltip

我想获取 win32 旧版控件的工具提示文本（不是固有地支持[UI 自动化](https://msdn.microsoft.com/en-us/library/ms747327.aspx)的 WPF 控件）。

![按钮的屏幕截图](https://i.stack.imgur.com/JaSNo.png)

我做了什么：

*   给定一个感兴趣的按钮，我有它的`AutomationElement`, 和它的边界矩形
*   我将鼠标移到这个按钮上（在代码中）；
*   `Thread.Sleep(1500)`等待工具提示控件弹出；
*   枚举Desktop的所有子窗口，得到子窗口`tooltipAutomationElement`，其类型为`"Tooltip"`;
*   从`tooltipAutomationElement`中，获取此工具提示的名称属性，该属性对应于工具提示字符串。

这实际上可行，但代价是：我必须`sleep(1500)`手动等待工具提示出现（要扫描 5-20 个按钮以查找工具提示字符串），这不符合性能要求。

预期什么（不确定是否可行）

*   以编程方式获取按钮的工具提示字符串，而无需显示工具提示
*   无需将鼠标一个一个地放在每个按钮上。

**更新 1**：对于`TTN_NEEDTEXT`，MSDN 文档似乎不是很清楚，我不知道如何使用 C# 进行编程。[可以在此处](https://msdn.microsoft.com/en-us/library/windows/desktop/bb760250%28v=vs.85%29.aspx)找到与工具提示控件相关的低级结构/消息的相关链接之一。

**更新 2**：那些相信这可以通过 ... 来完成的人，我想说，说起来容易做起来难。我欢迎那些尝试过的人对此发表评论，如果您*能提供一些证据*来证明其适用性和有效性，也欢迎一些表面上可行的解决方案。

**更新 3**：如果我们尝试最小化以便`TTM_SETDELAYTIME`可以最小化，经过一些实验后这不起作用。我们只能在工具提示窗口句柄存在时进行调整。例如`N``sleep(N)`

```
SendMessage(_tooltipCtrl.Handle, TTM_SETDELAYTIME, _TTDT_INITIAL, 10); //10 ms 
```

**更新 4**：使用`TTM_GETTEXTA`消息似乎是一个解决方案，但是，它类似于更新 3，我们需要的句柄，`tooltipCtrl`只有在创建工具提示后才可用，因为要创建此工具提示，我们别无选择将鼠标光标悬停在工具上方，这似乎存在如上所述的性能问题 ( `Thread.Sleep`)。

```
SendMessage(_tooltipCtrl.Handle, TTM_GETTEXTA, 0, ti); 
```

**更新 5**：“如何获取工具提示文本”使用 InterOp (PInvoke) 或使用传统方法的自动化 UI（鼠标悬停在工具窗口上，找到 Hwnd 句柄，然后获取其文本......）不是这篇文章的关注点. 预期内容：**我们可以在不需要悬停在控件上的情况下提取控件（比如按钮）的工具提示字符串**吗？如果是，如何？

**更新 6**：使用 WM_MOUSEHOVER 激活工具提示窗口似乎不起作用，我已经使用 SendMessage(...) 进行了测试，并填充了正确的 wparam 和 lparam，但在静脉中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T08:50:35.757

只是一个想法，但尝试使用消息而不是利用实际的鼠标。

与 WM_HOVER、WM_MOUSEHOVER、WM_MOUSEENTER 一起玩

```
 SendMessage(_buttonCtrl.Handle, WM_MOUSEHOVER, ..., ...) 
```

等等

您的屏幕截图看起来像一个自定义控件，因此要弄清楚是什么触发了工具提示，这将是一个黑客问题。

潜在地，您可以同时发送多个 WM_MOUSEENTER 或 WM_MOUSEHOVER。这实际上取决于底层代码。

如果这导致了太长的延迟，（并且建议的解决方案都不起作用），请考虑将工具提示测试拉入一个执行频率较低或仅在特定请求时执行的辅助测试池。

另外...而且我确定您已经尝试过...但如果没有，请查看[UI Spy](http://msdn.microsoft.com/en-us/library/ms727247%28v=vs.85%29.aspx)并查看它是否在实际生成工具提示之前报告有关工具提示的任何信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T08:36:47.330

从 UI 自动化的角度来看，我们可以做的最好的事情是订阅 ToolTip Opened Event，并且在事件处理程序过程中也是如此。此链接有一个示例[http://msdn.microsoft.com/en-us/library/ms752286.aspx](http://msdn.microsoft.com/en-us/library/ms752286.aspx)。UI 自动化事件列表可在此处找到[http://msdn.microsoft.com/en-us/library/ms748252.aspx](http://msdn.microsoft.com/en-us/library/ms748252.aspx)。可以在此处找到有关 AutomationElement.ToolTipOpenedEvent 的详细信息[http://msdn.microsoft.com/en-us/library/system.windows.automation.automationelement.tooltipopenedevent.aspx](http://msdn.microsoft.com/en-us/library/system.windows.automation.automationelement.tooltipopenedevent.aspx)。

至少使用 UI 自动化，我们应该让事情发生，无论是单击按钮还是打开窗口或显示工具提示。因此，订阅 ToolTip 事件会比硬 Sleep() 延迟具有更好的性能。否则，很少有人提到的 hacky 方式（尽管不是端到端）是预先获取工具提示字符串的资源字符串 ID，并在执行自动化测试期间验证资源字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-21T17:46:02.417

子类化工具提示的父级，即用你的替换按钮的windproc并过滤`WM_NOTIFY`for `TTN_GETDISPINFO`case，也许像这样..

```
case TTN_GETDISPINFO:
{
 // do this first
 NMTTDISPINFO pttdi = (LPNMTTDISPINFO)lparam;

 // next let the system do the default, ie fill the 
 //   relevant structures with the 
 // text that will appear on the tooltip. 
 // so

 CallWindowProc(OldListViewProc, hwnd, message, wparam, lparam);

 // then the text you seek will be in the 
 // NMTTDISPINFO pttdi structure. You can even alter 
 // the text to suit your needs if you want.     
} 
```

显然，Visual Studio 2008 的 MSDN 库显示，对于 _WIN32_WINNT >= 0x0600，即在 Vista 之后，这个结构的额外成员 HBITMAP hbmp 有点隐藏，但代表“要显示的大型预览位图的句柄工具提示”。

# android - Android 中异步任务上的 java.lang.NullPointerException

> ID：15808549
> 
> 赞同：0
> 
> 时间：2013-04-04T10:22:34.233
> 
> 标签：android, email, android-asynctask

我想在不使用电子邮件客户端选项的情况下发送电子邮件。我有自己的自定义电子邮件视图。[我从这里](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)下载这个想法 。它给 os Network 异常。所以为此我使用 asynctask 并运行它，但我在 Logcat 中收到错误

电子邮件发送.java：

```
public class EmailSend extends Activity{

Mail m ;

@Override 
public void onCreate(Bundle icicle) { 
    super.onCreate(icicle); 
    setContentView(R.layout.activity_main); 

    Button addImage = (Button) findViewById(R.id.send_email); 

    addImage.setOnClickListener(new View.OnClickListener() { 
        public void onClick(View view) { 

            new ListViewContactsLoader().execute();

        } 
    }); 
} 

/** An AsyncTask class to retrieve and load listview with contacts */
private class ListViewContactsLoader extends AsyncTask<Void, Void, Boolean>{    

    public ListViewContactsLoader() {

    }

    @Override
    protected Boolean doInBackground(Void... params) {

        try { 
            // m.addAttachment("/sdcard/filelocation"); 

            if(m.send()) { 
                Toast.makeText(EmailSend .this, "Email was sent successfully.", Toast.LENGTH_LONG).show(); 
                return true;
            } else { 
                Toast.makeText(EmailSend .this, "Email was not sent.", Toast.LENGTH_LONG).show(); 

                return false;
            } 
        } catch(Exception e) { 
            //Toast.makeText(MailApp.this, "There was a problem sending the email.", Toast.LENGTH_LONG).show(); 
            Log.e("MailApp", "Could not send email", e); 

            return false;
        }
    }

    @Override
    protected void onPostExecute(Boolean result) {          
        // Setting the cursor containing contacts to listview

    }   

    public void onPreExecute() {

        Mail m = new Mail("user@gmail.com", ""); 

        String[] toArr = {"bla@bla.com", "lala@lala.com"}; 
        m.setTo(toArr); 
        m.setFrom("wooo@wooo.com"); 
        m.setSubject("This is an email sent using my Mail JavaMail wrapper from an Android device."); 
        m.setBody("Email body.");
    }

} 
```

}

清单文件：

```
 <uses-permission android:name="android.permission.WAKE_LOCK" />

  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

  <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

日志猫：

```
 Could not send email

           java.lang.NullPointerException

at com.example.emailer.EmailSend$ListViewContactsLoader.doInBackground(EmailSend.java:54)

at com.example.emailer.EmailSend$ListViewContactsLoader.doInBackground(EmailSend.java:1)

at android.os.AsyncTask$2.call(AsyncTask.java:252)

at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)

at java.util.concurrent.FutureTask.run(FutureTask.java:137)

at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)

at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)

at java.lang.Thread.run(Thread.java:1020) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:24:52.840

> 它给 os Network 异常

因为目前您正在尝试显示`Toast`来自`doInBackground`（来自 UI 线程）方法的消息。使用`onPostExecute`显示 Toast 消息的方法，因为此方法在 UI 线程上调用。试试看：

```
@Override
    protected void onPostExecute(Boolean result) {          
        // Setting the cursor containing contacts to listview
         if(result){
           // show Toast Message here
          }else{
           // show Toast Message here
           }
         //.....your code here...
    } 
```

**编辑：**你`NullPointerException`可能会忘记在使用它之前初始化类`m`的对象。`Mail`在内部初始化`m`对象`onPreExecute`，而不是再次创建新实例：

```
public void onPreExecute() {

    m = new Mail("user@gmail.com", ""); 
  ...... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:29:25.720

```
public void onPreExecute() {

    this.m = new Mail("user@gmail.com", ""); 

    String[] toArr = {"bla@bla.com", "lala@lala.com"}; 
    m.setTo(toArr); 
    m.setFrom("wooo@wooo.com"); 
    m.setSubject("This is an email sent using my Mail JavaMail wrapper from an Android device."); 
    m.setBody("Email body.");
}

} 
```

你不能再制造一个实例！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:27:16.750

您已经实例化了局部变量 Mail m = new Mail("user@gmail.com", ""); 在里面`onPreExecute`，然后你`if(m.send()) {`在里面使用`doInBackground`

`Mail m`应该是类的属性`ListViewContactsLoader`

就像是：

```
public void onPreExecute() {
        m = new Mail("user@gmail.com", ""); 
```

和

```
 private class ListViewContactsLoader extends AsyncTask<Void, Void, Boolean>{  
       private Mail m; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:27:44.123

> 它给 os Network 异常

因为您正在尝试在 UI 上更新/显示，`doInBackground()`而无法直接从中进行。

要解决此问题，您可以执行以下任一操作：

1.  显示来自 onPostExecute() 的 Toast 消息
2.  或实施`runOnUiThread()`如果您想从`doInBackground()`任何方式更新 UI。

例如：

```
 runOnUiThread(new Runnable() {

        @Override
        public void run() {
            Toast.makeText(EmailSend .this, "Email was sent successfully.", Toast.LENGTH_LONG).show(); 
        }
    }); 
```

# android - 像电子邮件一样放大和缩小

> ID：15808552
> 
> 赞同：1
> 
> 时间：2013-04-04T10:22:37.227
> 
> 标签：android

我试图研究大约 1/2 小时但没有成功。我在**java**方面有经验，但对**Android 开发**很陌生。

我正在尝试制作一个包含可以放大和缩小的图片和文本的活动。电子邮件应用程序可以做到这一点，但我的搜索不断显示那些电子邮件有问题的人。

我的问题是“请指出 SDK 附带的 android 开发人员帮助的正确部分”。或者，如果这是非常先进的，那么请告知这一点。

感谢您的任何回复，因为这是我的第一篇文章

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:26:22.230

如果你想放大和缩小使用 WebView

[看到这个](http://developer.android.com/reference/android/webkit/WebView.html)

您可以轻松启用缩放[参考this](http://developer.android.com/reference/android/webkit/WebSettings.html#setBuiltInZoomControls%28boolean%29)

# ruby-on-rails-3.2 - 谷歌加不能分享？

> ID：15808564
> 
> 赞同：1
> 
> 时间：2013-04-04T10:23:32.933
> 
> 标签：ruby-on-rails-3.2, google-plus

目前我的网站正在登台，即作为 IP 地址[http://example.com](http://example.com)工作。我添加了谷歌分享按钮以在 g+ 中分享网页。当我尝试分享类似[http://example.com/index/](http://example.com/index/)的链接时，它会显示类似“保存您的帖子时出现问题。请重试”之类的错误。我可以在 g+ 中共享 IP 地址吗？

请帮忙。--

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T09:40:46.920

将真实域添加到 url 选项...这解决了我的问题！！！

# c++ - 尝试在 SSE 编程中使用和掩码添加 __m128

> ID：15808565
> 
> 赞同：2
> 
> 时间：2013-04-04T10:23:36.090
> 
> 标签：c++, x86, sse, simd

我正在尝试使用比较操作的结果添加到 SSE 变量。我刚刚意识到，`_mm_cmplt_ps`如果结果为真，则在使用该操作时，它会返回一个 NAN，因为 0xffffffff 无法表示，这对我没有用：

```
__m128 va;
__m128 vb;
__m128 result =_mm_set1_ps(0.0f);
vb = _mm_cmplt_ps(va,vb);
result = _mm_add_ps(result,vb);  // problem is that I would like to convert vb to 1.0's and 0.0's 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T10:59:59.257

您可以将比较掩码应用于 1.0 值的向量，例如

```
__m128  va, vb;
__m128  vcmp = _mm_cmplt_ps(va, vb);
__m128  vresult = _mm_and_ps(_mm_set1_ps(1.0f), vcmp); 
```

# knockout.js - KnockoutJS - 在 beforeRemove 之后过早触发单击事件

> ID：15808569
> 
> 赞同：0
> 
> 时间：2013-04-04T10:23:51.257
> 
> 标签：knockout.js

我有一个看起来像这样的视图模型：

```
self.selectedItems = ko.observableArray();

self.onBeforeUnselectItem = function (elem) {
    if (elem.nodeType === 1)
        $(elem).fadeOut(function() {
            $(elem).remove();
        });
};

self.unselectItem = function (item) {
    self.selectedItems.remove(item);
    self.unSelectedItems.push(item);
}; 
```

我的观点是这样的：

```
<div data-bind="foreach: {data: selectedItems, beforeRemove: onBeforeUnselectItem}">
    <span data-bind="text: Name"></span> - <a href="#" data-bind="">Remove</a>
</div> 
```

`unSelectedItems`我的问题是该项目在淡出动画完成之前被推入。

有没有办法让调用`unselectItem`等到动画完成？
我意识到这是因为点击事件绑定到的方式`unselectItem`

**编辑**

暂时，我在我的`unselectItem`函数中放了一个延迟：（
这显然不理想！）

```
self.unselectItem = function (item) {
        self.selectedItems.remove(item);
        setTimeout(function () {
            self.unSelectedItems.push(item);
        }, 350);
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:29:08.740

当然。您已经在为移除元素而这样做了。jQuery 效果和类似的长时间运行的进程是异步运行的，即它们不会阻止其他 JS 继续运行。这就是为什么`fadeOut`有一个回调：在淡入淡出完成后运行东西。如果您的要求是淡入淡出必须在项目添加到之前完成`unSelectedItems`，那么您必须*在*该回调中执行此操作。

# .htaccess - htaccess 重定向规则而不影响现有目录

> ID：15808571
> 
> 赞同：0
> 
> 时间：2013-04-04T10:23:55.297
> 
> 标签：.htaccess

我需要一个重定向的 .htaccess 规则：[http](http://www.mysite.com/) ://www.mysite.com/ {username}/{id}

到：[http](http://www.mysite.com/video.php?username=) ://www.mysite.com/video.php? username= {username}&id={id}

难点是不应该影响images/script/admin/js/music/等现有目录...

（[http://www.mysite.com/images/logo.jpeg](http://www.mysite.com/images/logo.jpeg) 不应受此规则影响）

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:31:38.450

试一试，将此代码用于`.htaccess`您网站的文件中：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)/([a-z0-9-_]+)/?$
RewriteRule ^(.*) /video.php?username=%1&id=%2 [R] 
```

* * *

现在，如果你想重写而不是重定向？简单地说，只需删除`[R]`标志：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)/([a-z0-9-_]+)/?$
RewriteRule ^(.*) /video.php?username=%1&id=%2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:52:23.980

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^([^/]+)/([^/]+)/?$ /video.php?username=$1&id=$2 [L,QSA] 
```

# ruby - xml 到 ruby on rails 中的活动记录

> ID：15808574
> 
> 赞同：1
> 
> 时间：2013-04-04T10:24:01.843
> 
> 标签：ruby, xml, ruby-on-rails-3, activerecord

我有这个代码：

```
<user> <first_name>Bob</first_name> <last_name>Smith</last_name></user> 
```

这段代码如何转换为用户类？

```
class User 
  attr_accessor :first_name, :last_name  
end 
```

我尝试了以下方法：

```
@user = User.new
@user.from_xml(xml_data) 
```

但它向我显示了一个错误：该`from_xml`方法不存在。

**如何将xml转换为ruby on rails中的类对象？**

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:34:51.293

您的班级没有使用`ActiveRecord`; 这只是一个裸班。如果要使用模块`from_xml`中定义的 ，则`ActiveModel`需要继承自`ActiveRecord::Base`：

```
class User < ActiveRecord::Base
  attr_accessor :first_name, :last_name  
end 
```

如果你不想使用 ActiveRecord::Base，你可以只包含`ActiveModel::Serializers::Xml`在你的类中；但是，这依赖`attributes=`于 AR::Base 中定义的 ，因此我们需要自己定义它。以下似乎有效，但我还没有彻底测试过。

```
class User
  include ActiveModel::Serializers::Xml

  def attributes=(attrs)
    attrs.each {|name, val| instance_variable_set("@#{name}", val) }
  end
end

user = User.new
user.from_xml('<user> <first_name>Bob</first_name> <last_name>Smith</last_name></user>')
# => #<User:0x3bcc760 @first_name="Bob", @last_name="Smith"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T07:43:52.943

Hash.from_xml("some xml") 将 xml 转换为哈希

```
hash = Hash.from_xml(xml) 
```

并且从哈希中您可以对其执行活动记录功能。

# xml - 通过 XML 消息添加 CSV 文件

> ID：15808575
> 
> 赞同：0
> 
> 时间：2013-04-04T10:24:02.623
> 
> 标签：xml, csv, xsd

我想通过 XSD 构建的 XML 消息发送 CSV 文件，有没有办法做到这一点？如果是，如何。

# jquery - 为什么我在返回 200 ok 时看不到 json 响应

> ID：15808578
> 
> 赞同：0
> 
> 时间：2013-04-04T10:24:18.947
> 
> 标签：jquery, ajax, json, getjson

我正在发出一个有效的 json 请求，但是在使用时我无法在日志中看到响应：

```
console.log(data); 
```

第一个请求有效，但第二个请求无效。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:00:57.910

[http://maps.googleapis.com](http://maps.googleapis.com)支持[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，但[https://api.forecast.io](https://api.forecast.io)不支持。对于 forecast.io，您应该使用[JSONP](http://en.wikipedia.org/wiki/JSONP)，在 jQuery 中最简单的方法是添加`"?callback=?"`到请求 URL：

```
$.getJSON('https://api.forecast.io/forecast/<API KEY>/' + lat + ',' + lon + "?callback=?", function(data1) {
            console.log(data1.currently.summary);
        }); 
```

但是，您应该避免暴露您的 api 密钥，如[forecast.io api docs](https://developer.forecast.io/docs/v2#options)中所述。为该服务创建反向代理可能是个好主意。

# linux - 从 ioremap 返回的虚拟地址上的 DMA

> ID：15808579
> 
> 赞同：0
> 
> 时间：2013-04-04T10:24:21.113
> 
> 标签：linux, linux-kernel, linux-device-driver

有没有办法对 ioremap 返回的虚拟地址进行 DMA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:42:46.900

仅当系统具有[IOMMU](http://en.wikipedia.org/wiki/IOMMU)时，这是一个仅用于 I/O 的内存管理单元（这并不常见）。

由于驱动程序提供了物理内存地址来执行该`ioremap()`调用，因此确实没有理由坚持使用虚拟地址或调用`virt2phys()`.

# matlab - Matlab - 在 3d 矩阵中查找 2d 矩阵值

> ID：15808580
> 
> 赞同：1
> 
> 时间：2013-04-04T10:24:21.493
> 
> 标签：matlab, matrix, compare

我有以下问题。我有两个矩阵，一个大小为 X,Y 的 2d 矩阵具有一组从 DEM 文件中获取的地形高度，以及一个大小为 X,Y,Z 的 3d 矩阵，每个矩阵的 Z 高度值从 0 到 5000 米（X,Y ） 观点。

我想将每个 (X,Y) 点的 DEM 高度与 Z 高度值列进行比较，并取最接近的一个。例如：

```
dem(1,1) = 1850 %actual height of the terrain at point (1,1)
heights(1,1,:) = 0, 1000, 2000, 3000, 4000, 5000 %column of heights at point (1,1) 
```

如果我使用“查找”功能，我会收到以下错误：

```
find(heights > dem, 1)
Error using  > 
Number of array dimensions must match for binary array op. 
```

有没有不需要两个for循环的解决方案？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:00:37.927

您可以使用以下方法将其减少为单个维度上的循环`bsxfun`：

```
heights = rand(10, 10, 10);
dem = rand(5, 1);
bsxfun(@gt, heights(1, :, :), dem)

    [returns a 5x10x10 matrix] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:34:21.083

您只需将数据定义为：

```
dem(1,1) = 1850;
heights(1,1,:) = [0; 1000; 2000; 3000; 4000; 5000]; 
```

现在，`find(heights > dem, 1)`收成

```
ans =

     3 
```

这是预期的结果， 的索引`2000`。

# xml - xpath 没有从 xml 文件中获得完美的输出

> ID：15808581
> 
> 赞同：1
> 
> 时间：2013-04-04T10:24:28.073
> 
> 标签：xml, arrays, xpath

这是我的 xml 文件：-

```
<products>
  <product_id value="1">
    <tab_id value="351">
    <dist_activity value="10068"/>
    <dist_activity value="10070"/>
    <individual_strdt value="2013-01-14 20:35:00"/>
    </tab_id>
  </product_id>
  <product_id value="2">
    <tab_id value="352">
    <dist_activity value="10069"/>
    <dist_activity value="10070"/>
    <individual_strdt value="2013-02-14 20:39:00"/>
    </tab_id>
  </product_id>
</products> 
```

这是我的代码：-

```
<?php
$abc="10068 in 2013-02-14 20:39:00";
list($one,$two)=explode(' in ',$abc);
$text1[]=$one;
$text2[]=$two;

foreach($text1 as $activity)
{
$actvitiy;
}
foreach($text2 as $date)
{
$date;
}

$p = file_get_contents('product.xml');

$product = simplexml_load_string($p);

list($activity_id) = $product->xpath("//dist_activity['$actvitiy'] | //individual_strdt['$date']/ancestor::product_id/@value");
$activity_id = (string) $activity_id;
?>
<script language="javascript">
alert('<?= $activity_id ?>')
</script>
<?php
if (strlen(trim($activity_id))==0)
{
echo $activity.'&'.$date.' Region Not Match';
exit;
} //check the $entity in product.xml
echo "id:- $activity_id";
?> 
```

在这里，我有一个字符串，`$abc`
我尝试将它们分解`in`
并存储到两个差异`var`
中返回如下内容：
`$one = 10068`
`$two = 2013-02-14 20:39:00`
尝试检查`product.xml`文件
$one 值和`<dist_activity>`
$two 值，`<individual_strdt>`
两者都匹配，然后返回父元素属性值，如`<product_id>`值`1`（一个是输出）
**查询：-** 现在问题是在 $abc 字符串中，两个值都是差异的。element child value`10068`是`<product_id>` `1`子元素，`2013-02-14 20:39:00`是`<product_id>` `2`子元素。
现在在这种情况下，消息会被打印出来，两个值都不匹配
，但它不能显示 product_id 值`1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:57:31.797

可能你需要：

```
list($activity_id) = $product->xpath("//dist_activity[@value = '$actvitiy' ] | //individual_strdt[ @value = '$date']/ancestor::product_id/@value"); 
```

# android - 为 IntentService 调用 Thread.interrupt()

> ID：15808585
> 
> 赞同：1
> 
> 时间：2013-04-04T10:24:35.770
> 
> 标签：android

我在 IntentService 中编写了一些等待通知代码。我想从外部中断此服务，但我看不到将 IntentService 引用为线程的方法来调用中断（）。

# html - 如何避免在剑道数字文本框中输入负值？

> ID：15808588
> 
> 赞同：0
> 
> 时间：2013-04-04T10:24:40.153
> 
> 标签：html, kendo-ui

如何避免在剑道数字文本框中输入负值？通过给出“Min：0”，它不允许输入负值，但通过上下移动箭头，它允许输入负值。请建议我如何避免这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T11:58:23.730

遵循[此处](http://demos.kendoui.com/web/numerictextbox/index.html)的 Web Demos ，仅将**min**设置为 0 即可完美运行。

注意：kendoUI 中的设置**区分大小写**。**Min:0**不起作用，您必须设置**min:0**

代码：

```
$("#ntb").kendoNumericTextBox({
    min: 0
}); 
```

演示：

[点击我 - jsFiddle](http://jsfiddle.net/xJ8Xd/)

# java - 无法将选择框值附加到公共文件上传中的文件名

> ID：15808593
> 
> 赞同：0
> 
> 时间：2013-04-04T10:24:59.503
> 
> 标签：java, jsp

在这里我想避免基于使用选择控件选择的作者姓名的重复文件名..但是在这里我没有在文件保存部分获得作者姓名为空..

```
FileItemFactory factory = new DiskFileItemFactory();
        ServletFileUpload upload = new ServletFileUpload(factory);

          try {

            List items = upload.parseRequest(request);
            Iterator iterator = items.iterator();
            while (iterator.hasNext()) {
             String author=null;
                FileItem item = (FileItem) iterator.next();
                  //form fileds
                  if(item.isFormField()){
                      String fieldName = item.getFieldName();
                      if(fieldName!=null&&fieldName.equals("author"){
                       author=item.getString();

                 }
             //files
                if (!item.isFormField()) {

                    String fileName = item.getName();
                    File path = new File("D:/uploads");
                    if (!path.exists()) {
                          boolean status = path.mkdirs();
      } 
                    File uploadedFile = new File(path + "/"+author+"_"+ fileName);
                    System.out.println(uploadedFile.getAbsolutePath());
                    item.write(uploadedFile);
                }                          

            }
        } catch (FileUploadException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

# java - Java -> C++ 通信使用 SWIG over JNI。防止 C++ 错误和内存泄漏

> ID：15808597
> 
> 赞同：2
> 
> 时间：2013-04-04T10:25:13.050
> 
> 标签：java, c++, jboss, java-native-interface, nailgun

我们愿意与另一个 Java 团队开发的 C++ 库进行交流。

我们见过的最自然和最优化的方法是使用 JNI，但在开发期间为了简单起见使用 SWIG。

我们实际上已经开发了原型并且运行良好。在使用 SWIG Director 进行第一次 Java->c++ 通信之后，还有一个 C++->Java 通信。

我们看到的主要问题是暴露于 C++ 库中可能出现的错误，例如内存损坏和内存泄漏。

似乎没有办法有效地防止这些错误。例如，在 C++ 中执行中止（模拟一些不正确的内存操作）将杀死 JVM

我们想到的解决方案是从父 JVM 中启动几个 Java 进程，这些进程将在 JBoss 中运行，这也是我们愿意保护的。

启动java进程很难，主要是因为需要先启动JVM。

在这种情况下，我们想到的解决方案是使用多个 Nailgun 服务器。每个都将加载一个 JVM 广告，将有权访问（在类路径中）我们要启动的程序。

每个 Nailgun 服务器中的每个 JVM（关系为 1-1）都能够在同一个 JVM 中同时运行我们的程序的多个执行。如果发生错误，此 Nailgun JVM 中的所有执行都将崩溃（但 JBoss JVM 将处于活动状态）。出于这个原因，我们安排了几个执行次数有限的 Nailgun 服务器，并使用某种负载平衡将执行分派到任何服务器。此外，Nailgun 服务器将定期重新启动以防止内存泄漏。

我们认为这是防止 C++ 崩溃的好方法。

但是，我们想询问社区是否有更好的方法。

我忘了提到我们正在考虑的另一个解决方案是让集群 JBoss 与我们的战争出于故障转移原因。然后可能会合并 Nailgun 服务器，这取决于 C++ 程序的可靠性。纯 JBoss 集群应用程序（没有 Nailgun 进程）的好处是我们不需要任何类型的进程间通信，整个操作将在具有线程的进程中执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:46:43.120

有时，保护 Java 进程免受第三方本机代码风险的最简单方法是在单独的进程中运行有风险的代码。

但是，这可能需要进程间通信，这会增加成本和复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:56:42.330

我最喜欢集群方法，您将免受 Java 崩溃的影响（即使使用纯 Java，JVM 也可能崩溃。无限循环或全内存吞噬错误也会使 JVM 停滞），并且能够使用您的 SWIG 解决方案。

另一方面，如果你害怕崩溃，你也应该害怕内存损坏改变你的业务数据。

# java - 枚举中的 Java NoSuchMethodError

> ID：15808598
> 
> 赞同：0
> 
> 时间：2013-04-04T10:25:13.493
> 
> 标签：java, netbeans, compilation, enums, nosuchmethoderror

我刚刚向枚举添加了一个方法。每当我调用该方法时，我都会得到一个 NoSuchMethodError：

```
public enum PHASE {
  PHASE1,
  PHASE2(false),
  PHASE3;

  private boolean present = true;

  PHASE() {
  }

  PHASE(boolean present) {
    this.present = present;
  }

  public boolean isPresent() {
    return this.present;
  }
}

public void foo(PHASE phase) {
  if (phase.isPresent()) {
... 
```

这里 phase.isPresent 在清理/构建后抛出 NoSuchMethodError 。我错过了什么？

--

更新：Netbeans 有两个缓存文件夹。一个是空的，另一个是空的。那是我的错，显然我没有在缓存问题上投入足够的精力。不幸的是，我不能对自己的问题投反对票……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:29:06.290

这可能是您的编译时类路径和运行时类路径之间的问题。您在运行时的类/jars 文件与您在编译时使用的不同。

确保清理并重建您的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:47:28.303

这可能是 Netbeans 特有的问题。特别是如果您使用“保存时编译选项”并且有一个具有很多依赖项的大项目。有关详细信息，请参见[此处](https://stackoverflow.com/questions/4386076/uncompilable-source-code-runtimeexception-in-netbeans)。

我几乎每天都会遇到与此类（基于 maven 的）项目非常相似的问题，并使用上述链接找到了解决方案。最好说解决方案的变化。试试这样：

*   [禁用保存时编译](https://stackoverflow.com/questions/1304149/disabling-automatic-build-in-netbeans)
*   关闭有问题的项目
*   关闭 netbeans
*   [清除缓存](https://stackoverflow.com/questions/8689780/clearing-cache-in-netbeans)
*   打开 netbeans 并清理和构建

请反馈。

# jquery - 使用 jquery 在页面加载时激活选项卡

> ID：15808599
> 
> 赞同：0
> 
> 时间：2013-04-04T10:25:15.397
> 
> 标签：jquery, html, html-lists, selector

如何在页面加载中激活网页的第一个选项卡？
我使用 jquery 和*ul*标签做标签。

＆单击单个选项卡后，它们应该处于活动状态。

HTML 代码：

```
<div id="sociallink">
    <ul>
        <li><a href="javascript:void(0);" class="tab1"><img class="sa_image" src="images/facebook.png" border="0" /></a></li>
        <li><a href="javascript:void(0);" class="tab2" ><img class="sa_image" src="images/tweeter.png" border="0" /></a></li>
        <li><a href="javascript:void(0);" class="tab3" ><img class="sa_image" src="images/message.png" border="0" /></a></li>
        <li><a href="javascript:void(0);" class="tab4" ><img class="sa_image" src="images/persnal.png" border="0" /></a></li>
    </ul>
</div> 
```

jQuery代码：

```
$(document).ready(function() {

    $('#sociallink ul li:first').addClass('active');

    $('#sociallink ul li a').click(function(){
        var currentTab = $(this).attr('href');
        return false;
    });
}); 
```

运行此代码不会激活第一个选项卡，也不会单击其他未激活的选项卡。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:34:37.797

您应该在单击的选项卡之间切换“活动”类。见下文：

```
$('#sociallink ul li a').click(function(){
    $(this).parent('li').siblings('li.active').removeClass('active');
    $(this).parent('li').addClass('active');
    var currentTab = $(this).attr('class');
    return false;
}); 
```

最好将属性分配`class='tabx'`给它的父级`li`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:36:08.697

您激活了第一个选项卡，您需要调用 li 的单击并添加活动类，然后从其他人中删除活动类：

假设这是您的活动标签 css 类：

```
.active a{
    border:solid 1px red;
} 
```

然后使用这个脚本：

```
$(document).ready(function() {          
    $('#sociallink ul li:first').addClass('active');

    $('#sociallink ul li a').click(function(){
        $(this).parent().siblings().removeClass('active');
        $(this).parent().addClass('active');
        return false;
    });
}); 
```

需要您的 css 类`.active{}`来查看这将如何影响活动选项卡。

甚至你也可以试试这个：

```
 $('#sociallink ul li').click(function(){
        $(this).siblings().removeClass('active');
        $(this).addClass('active');
        return false;
    }); 
```

# javascript - Android：将图像 URI 从 webview 网站发送到应用程序

> ID：15808602
> 
> 赞同：1
> 
> 时间：2013-04-04T10:25:30.167
> 
> 标签：javascript, android, webview, uri

我正在尝试使用 Javascript 将图像 URI 从网站画布发送到应用程序。在网站中，我使用了以下依赖于 html2canvas 插件的函数：

```
$("div.imagecapture").click(function()
{
    html2canvas(document.getElementById('paper_trolley_center'), 
    {
                onrendered: function(canvas) 
        {
            var strDataURI = canvas.toDataURL("image/jpeg");
            console.log('La imagen: '+strDataURI);
            jsNativeInterface.metodoDemo1(strDataURI);
                }
             });
}); 
```

console.log 输出 URI，但应用程序接收到一个空值：

```
 public void metodoDemo1(Uri imageUri) 
    {  
             Log.d(TAG, "IMAGEURI: "+imageUri);
             senddatatodevice(imageUri);
    } 
```

应用程序和 webview 网站之间的数据传输工作正常，因为我可以接收一个字符串（更改metodoDemo1 的转换）并正确记录日志......它会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:28:30.197

尝试将其传递为`String`. `Uri`in`JavaScript`和 in 一样`Android`。

```
public void metodoDemo1(String imageUri) 
```

# eclipse - Eclipse 和外部 jar

> ID：15808606
> 
> 赞同：0
> 
> 时间：2013-04-04T10:25:49.743
> 
> 标签：eclipse, jar

我一直在做一个关于 Eclipse 的项目，我正在尝试添加一个外部 jar，但是当我使用这个 jar 中的类时，它无法识别它们并且无法构建任何东西。我之前在以前的项目中使用过相同的 jar 文件，它运行良好，但现在，在这个新项目上它不起作用，这是在 Mac 上。我尝试在 Windows 上创建一个新项目并添加了外部 jar 并且工作正常。为了让它工作，我从上一个项目中删除了对外部 jar 的引用，但仍然没有工作。我在这里阅读了与我有关的问题，其中大多数人说要按顺序检查复选框并导出并将我的 jar 文件添加到库中，但它们都不起作用。为什么它不适用于我的第二个项目？

编辑：我尝试以下添加jar文件，从项目的构建路径添加外部档案，我尝试添加用户库并将jar文件添加到其中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:45:01.353

您可以尝试检查是否添加了正确的 jar 路径，以及 jar 是否可读。

# html - 我很难容纳比平常更大的屏幕。非常感谢一些建议

> ID：15808608
> 
> 赞同：1
> 
> 时间：2013-04-04T10:25:53.753
> 
> 标签：html, css, responsive-design

应用背景尺寸时：100%；对于标题图像，当在较大的屏幕上查看时，图像会被截断。我想知道如何适应我什至无法测试的屏幕尺寸。我正在使用媒体查询与其他技术相结合的某些断点，以尝试制作一个完全响应的站点。一个屏幕更大的朋友分享了一个屏幕截图，事情就坏了。那么我怎么能适应我什至没有可用的屏幕呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:04:37.770

我有同样的问题，我有一个旧的 1280x1024 分辨率的屏幕，有时我的设计在大屏幕上会变得很糟糕。有许多应用程序可以测试不同的分辨率，但我推荐[Screenfly](http://quirktools.com/screenfly/)。如果您的桌面不支持更高的分辨率，这是您的选择；）您可以按像素自定义大小或以常用分辨率进行测试。

# javascript - 无法覆盖显示：JavaScript 中的无

> ID：15808614
> 
> 赞同：3
> 
> 时间：2013-04-04T10:26:14.253
> 
> 标签：javascript, html, css

在这种情况下，我无法将元素状态设置为可见：

```
<html>
<head>
  <style type="text/css">
    #elem {display:none}
  </style>
</head>
<body>
  <div id="elem">.......</div>
  <script type="text/javascript">
    document.getElementById("elem").style.display="";
  </script>
</body>
</html> 
```

它仅在我将显示设置为“阻止”时才有效。

在这种情况下，它可以工作：

```
<html>
<head>
</head>
<body>
  <div id="elem" style="display:none">.......</div>
  <script type="text/javascript">
    document.getElementById("elem").style.display="";
  </script>
</body>
</html> 
```

我的兴趣是让它在第一种情况下工作而不设置“块”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:29:36.457

为什么要使用内联样式而不是 css 类？

```
<html>
<head>
  <style type="text/css">
    #elem.hidden {display:none}
  </style>
</head>
<body>
  <div id="elem" class="hidden">.......</div>
  <script type="text/javascript">
    document.getElementById("elem").className = '';
  </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T10:29:16.723

将`.style.display`属性设置为`""`将从元素中删除任何内联样式。然后将应用级联中的先前值。

在这种情况下，开始时没有内联样式，并且`"none"`已经从级联中接收到值。

您可以将值设置[为`"initial"`关键字](http://www.w3.org/TR/css3-cascade/#initial)，但您可能会发现缺少浏览器支持。

* * *

您已经抽象出您试图通过修改`display`属性来解决的任何潜在问题，但很有可能您会做得更好：

```
#elem.JSOnly {display:none} 
```

和：

```
<div id="elem" class="JSOnly"> 
```

和

```
document.getElementById('elem').className = "" 
```

或类似的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T10:38:09.387

试试这个：

```
document.getElementById("elem").style.display="block"; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-04T10:46:13.160

您还可以像这样使用 jQuery。

```
<script type="text/javascript">
 jQuery('#elem').css('display','');
</script> 
```

您还想添加 jquery 库。

# java - Java JTable 多单元格选择

> ID：15808617
> 
> 赞同：0
> 
> 时间：2013-04-04T10:26:30.663
> 
> 标签：java, swing, jtable, row, cell

在 JTable 中，我知道三种选择模式：SINGLE_SELECTION、SINGLE_INTERVAL_SELECTION 和 MULTIPLE_INTERVAL_SELECTION。有没有办法允许选择任何所需数量的 CELLS，类似于在 Excel 中进行选择的方式？这将允许选择表格的部分。这里提到的三种方法只允许选择ROWS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:30:38.367

您可以使用 columnModel 的 columnSelectionAllowed 属性。

# sql - 逐行循环并计算天数和金额-SQL Server 2008

> ID：15808618
> 
> 赞同：1
> 
> 时间：2013-04-04T10:26:32.713
> 
> 标签：sql, sql-server, sql-server-2008

请帮助解决以下问题：

在下表（示例）中，Dayscount 字段应该具有当前行中的 Txndate 和下一行中的 Txndate 之间的差异，前提是两行中的 Acctno 相同。如果 AcctNo 不同，则 Dayscount 应从给定的固定日期派生 - （示例中使用了 2012 年 3 月 31 日）。Product 列将包含 Amount1 和 DaysCount 的乘积

```
+--------+------------------+----------------------+---------+-------------+----------+
|  P_ID  |      AcctNo      |              TxnDate | Amount1 |   DAYSCOUNT |  Product |
+--------+------------------+----------------------+---------+-------------+----------+
| 108161 | 0019061_A0100501 | 30/01/2012           |     250 |             |          |
| 108162 | 0019061_A0100501 | 03/02/2012           |  -23000 |             |          |
| 108163 | 0019061_A0100502 | 09/02/2012           |    -215 |             |          |
| 108164 | 0019061_A0100502 | 24/02/2012           |   -1103 |             |          |
+--------+------------------+----------------------+---------+-------------+----------+ 
```

预期输出如下所示：

```
+--------+------------------+--------------------------+----------+-----------+---------------+
|  P_ID  |      AcctNo      |              TxnDate     | Amount1  | DAYSCOUNT |    Product    |
+--------+------------------+--------------------------+----------+-----------+---------------+
| 108161 | 0019061_A0100501 | 30/01/2012               |      250 |         4 |          1000 |
| 108162 | 0019061_A0100501 | 03/02/2012               |   -23000 |        57 |      -1311000 |
| 108163 | 0019061_A0100502 | 09/02/2012               |     -215 |        15 |         -3225 |
| 108164 | 0019061_A0100502 | 24/02/2012               |    -1103 |        36 |        -39708 |
|        |                  |                          |          |           |               |
+--------+------------------+--------------------------+----------+-----------+---------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:06:47.457

将选项与[OUTER APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)运算符一起使用。

每次对左表表达式中的每一行处理右表表达式。最终结果集包含从左表表达式中选择的所有列，然后是右表表达式的所有列。OUTER APLLY 对于右表表达式中没有对应匹配的那些行，它在右表表达式的列中包含 NULL 值。

```
SELECT t.P_ID, t.AcctNo, t.TxnDate, Amount1, 
       DATEDIFF(day, t.TxnDate, CASE WHEN t.AcctNo = o.AcctNo THEN o.TxnDate ELSE '20120331' END) AS DAYSCOUNT,
       DATEDIFF(day, t.TxnDate, CASE WHEN t.AcctNo = o.AcctNo THEN o.TxnDate ELSE '20120331' END) * Amount1 AS Product
FROM dbo.test76 t OUTER APPLY (
                               SELECT TOP 1 t2.TxnDate, t2.AcctNo
                               FROM dbo.test76 t2
                               WHERE t.P_ID < t2.P_ID
                               ORDER BY P_ID ASC
                               ) o 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/80b36/3)上的演示[](http://sqlfiddle.com/#!3/80b36/3)

 **为了提高性能，请使用此索引

```
CREATE INDEX x ON dbo.test76(P_ID) INCLUDE(AcctNo, TxnDate, Amount1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:08:52.587

如果它需要一次又一次地循环表，请考虑使用递归与类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:21:49.060

```
WITH CTE AS (
    SELECT ROW_NUMBER() OVER(ORDER BY P_ID) AS RowNumber, *
    FROM TableName)

SELECT CTE1.P_ID,
       CTE1.AcctNo,
       CTE1.TxnDate,
       CTE1.Amount1, 
       DATEDIFF (DD, 
          CTE1.TxnDate,
          CASE WHEN CTE1.AcctNo = ISNULL(CTE2.AcctNo,'')
               THEN CTE2.TxnDate
               ELSE '20120331'
          END) AS DAYSCOUNT,
       DATEDIFF (DD,
          CTE1.TxnDate,
          CASE WHEN CTE1.AcctNo = ISNULL(CTE2.AcctNo,'')
               THEN CTE2.TxnDate
               ELSE '20120331'
          END) * CTE1.Amount1 AS Product
       FROM CTE AS CTE1
LEFT JOIN CTE AS CTE2 ON (CTE1.RowNumber + 1 = CTE2.RowNumber) 
```**

# javascript - jqplot：如果我有两个饼图，我可以让每个具有相同标签的楔形具有相同的颜色吗？

> ID：15808619
> 
> 赞同：1
> 
> 时间：2013-04-04T10:26:46.610
> 
> 标签：javascript, jquery, jqplot

如果我有两个饼图，是否可以让具有相同标签的每个楔形具有相同的颜色？我以前可以用 JFreeChart 来做到这一点（我可以为每个标签指定颜色，所以我把`<label, color>`它放在一个地图中，当我遍历每个标签时，我可以确定那个标签的颜色），但是当我切换到 JQPlot ，对我来说如何做到这一点并不明显。是否有可能在 JQPlot 中实现这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:46:42.697

每个系列都可以有一个`label`并`color`与之关联：

> 单个数据系列对象。不能直接实例化，而是由 Plot 对象创建。系列属性可以由用户传入的选项设置或覆盖。
> 
> 属性将从选项顶层的系列数组中分配。如果您有两个系列并且想要更改第一个的颜色和线宽并将第二个设置为使用没有阴影的辅助 y 轴并为每个系列提供自定义标签：

```
{
   series:[
       {color: '#ff4466', lineWidth: 5, label:'good line'},
       {yaxis: 'y2axis', shadow: false, label:'bad line'}
   ]
} 
```

这是[系列属性](http://www.jqplot.com/docs/files/jqplot-core-js.html#Series)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:32:40.723

我想你需要的是`seriesColors: [ "#95268D", "#F5F5F5"]`

您可以根据自己的喜好定义颜色，只需将系列匹配起来，以便 pie1 series1 与 pie2 series1 的颜色相同。

[系列颜色](http://www.jqplot.com/docs/files/jqplot-core-js.html#jqPlot.seriesColors)

# c# - C# GDI+如何旋转单个图像

> ID：15808621
> 
> 赞同：0
> 
> 时间：2013-04-04T10:26:51.430
> 
> 标签：c#, gdi+, image-rotation, 2d-games

我一直在尝试用 C# GDI+ 制作游戏。为此，我希望图像沿其移动方向旋转。

```
public Point PlayerPosition = new Point(320, 240);
public int PlayerDirection = 90;

public Bitmap PlayerImage;
PlayerImage = new Bitmap(Application.StartupPath + "\\Drake.png");

public void DrawPlayer(Graphics g)
    {

        Matrix rotMatrix = new Matrix();
        rotMatrix.RotateAt((float)PlayerDirection, new PointF(PlayerPosition.X-17, (float)PlayerPosition.Y-27), MatrixOrder.Prepend);
        g.Transform = rotMatrix;            
        g.DrawImage(PlayerImage , new Point(PlayerPosition.X-33,PlayerPosition.Y-70)); 

    } 
```

但是每个对象都在屏幕上旋转。我只需要将我绘制的这张图片旋转到图片框。

# java - 在android中加载单个图像

> ID：15808624
> 
> 赞同：0
> 
> 时间：2013-04-04T10:26:58.213
> 
> 标签：java, android, json, android-imageview

我想在我的布局上加载来自`web services`.

但是每次我都无法从网络服务中获取图像。

当网络服务是这样时，请提供代码：-

```
 {
        "data": {
            "Success": "1",
            "Message": "Successful",
            "userid": "145",
            "username": "rahul",
            "password": "*****",
            "firstname": "jaydeep",
            "lastname": "darji",
            "mobile": "232312221",
            "email": "jaydeepdajri65@yahoo.in",
            "countryid": "1",
            "countryname": "India",
            "userphoto": "http:\/\/www.sevenstarinfotech.com\/projects\/demo\/okaz\/uploads\/profile\/1681692778Mar2120131938_145.png"
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:32:14.233

```
http:\/\/www.sevenstarinfotech.com\/projects\/demo\/okaz\/uploads\/profile\/1681692778Mar2120131938_145.png

```

这是图像的 URL。您应该解析出这个 URL，然后下载图像并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:44:17.483

解析json如下：

```
try {
            JSONObject json = new JSONObject();
            JSONObject data = json.getJSONObject("data");
            userphoto = data.getString("userphoto");
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        } 
```

下载图片使用下面的方法。调用它：`getBitmapFromURL(userphoto);`它让你`bitmap`在 imageview 中使用它。喜欢 ： `imagev.setImageBitmap(bitmap);`

```
public static Bitmap getBitmapFromURL(String src) {
        try {
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            return myBitmap;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    } 
```

# android - Android中的视图控制器

> ID：15808626
> 
> 赞同：0
> 
> 时间：2013-04-04T10:27:08.883
> 
> 标签：android, view, viewcontroller

如果我有三个视图控制器类 A、B 和 C，我在 A 类中有两个按钮，一个将我导航到 B 类，第二个将我导航到 C 类。但是当我从 B 类或 C 类回来时……我有给出我要从哪个班级回来的警报视图（不使用 NSNotification 中心）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:33:54.793

您可以使用 startActivityForResult(intent, requestCode) 调用 B 和 C。然后在 onActivityResult() 中，您必须检查 requestCode 以显示警报对话框。

请查看此链接：[http ://www.mybringback.com/tutorial-series/12204/onactivityresult-android-tutorial/](http://www.mybringback.com/tutorial-series/12204/onactivityresult-android-tutorial/)

# model - Ember（没有 ember-data）缓存数据和延迟

> ID：15808627
> 
> 赞同：1
> 
> 时间：2013-04-04T10:27:09.057
> 
> 标签：model, ember.js, jquery-deferred

我一直在尝试在没有 ember-data 的情况下使用 Emberjs。我正在尝试连接到现有的 JSON *（但不是 REST）* API。

我正在尝试加载缩略图网格，并通过单击它来显示选择的任何图像的高分辨率预览。

API 有单独的调用来获取文件集合以获取单个文件的详细信息。显然，我想避免为了获取预览高分辨率图像 URL 而拨打 100 次电话。因此我的 App.File.find 和 App.File.findAll 使用不同的 API 调用。

`IMS.api.call`是一个简单的包装器，`jQuery.ajax`它返回一个承诺。

**问题：**网格加载正常（`/#/files/`）但是，如果我单击单个图像，预览将使用缩略图而不是预览图像（`/#/files/11659315501`）。但是，如果我刷新浏览器，我会得到一个高分辨率版本。

添加一些日志记录我看到在第一个版本`App.File.find`中永远不会被调用。刷新时，它会被调用一次。

*我尝试过的事情：*

我添加了一个计算属性，该属性单独调用以获取高分辨率 url：

```
bigUrl: function(){
    var id = this.get('content.id');
    preview = App.File.find(id);
    return preview.url;         
}.property('id') 
```

但是 jQuery 调用返回的延迟在视图呈现时尚未加载，因此 bigUrl 未定义。所以我尝试将它包装在一个承诺中，但 Ember 抱怨计算属性不能返回一个承诺。

我到处寻找如何鼓励 ember 打电话`App.File.find`但无济于事。

有任何想法吗？

```
window.App = Ember.Application.create();

App.Router.map(function() {
  this.resource('files',function(){
    this.resource('file',{path:':file_id'});
  });
});

App.IndexRoute = Ember.Route.extend({
    redirect: function(){
        this.transitionTo('files');
    }
});

App.FilesRoute = Ember.Route.extend({
  model: function() {
    return App.File.findAll();
  }
});

App.FileRoute = Ember.Route.extend({
    model: function(args) {
        return App.File.find(args.file_id);
    }
});

App.File = Ember.Object.extend({});
App.File.reopenClass({
    find: function(id){
        return IMS.api.call("Files.GetAssetDetails",{"assetId":id}).then(
            function(response) {
                file = response.outParams;
                return App.File.create({'id':file.id,'filename':file.filename,"url":file.panoramicUrl});
            }
        );
    },  

    findAll: function() {
        return IMS.api.call("Files.GetAssetsForParent",{"containerId":11659314773}).then(
            function(response) {
                var files = [];
                response.outParams.forEach(function (file) {
                    files.push(App.File.create({'id':file.id,'filename':file.filename,"url":file.thumbUrl}));
                });
                return files;
            }
        );
    },
}); 
```

[更新]

视图如下所示：

应用：

```
<script type="text/x-handlebars" data-template-name="application">
  <div class="row">
    <div class="twelve columns">
      <h1>/pics/</h1>
      <hr>
      {{outlet}}
    </div>
  </div>
</script> 
```

文件：

```
<script type="text/x-handlebars" data-template-name="files">
    <div class="row">

      <div class="six columns">
        {{outlet}}
      </div>

      <div class="six columns" id='chooser'>
        {{#each file in model}}
        <div style='float:left'>
          <div>
            {{#linkTo file file}}
              <img {{bindAttr src="file.url"}} style='width:100px;height:100px;'>
            {{/linkTo}}
          </div>
        </div>
        {{/each}}
      </div>
    </div>
</script> 
```

文件

```
<script type="text/x-handlebars" data-template-name="file">
{{log id}}{{log url}}
  <div>
  <img {{bindAttr src="url"}} style='width:400px;height:400px;'>
  </div>
  <div>
    {{id}}
  </div>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:38:07.930

要在每次路由更改时强制重新加载模型，您需要从`setupController`.

`setupController`每次路由更改时都会调用A。我选择将模型作为函数调用，而不是重复`App.File.find`调用。

```
App.FileRoute = Ember.Route.extend({
    setupController: function(controller,model){
        console.log("setupController",controller,model);
        controller.set('model',this.model({file_id:model.id}));
    },
    model: function(params) {
        return App.File.find(params.file_id);
    }
}); 
```

不幸的是，如果您要返回承诺，这将不起作用。为了让它工作，你必须返回一个对象并承诺稍后填写。

```
find: function(id){
    file = App.File.create({});
    IMS.api.call("Files.GetAssetDetails",{"assetId":id,"fields":{"metadata":true}}).then(function(response) {
        file.setProperties({'id':response.outParams.id,'filename':response.outParams.filename,"url":response.outParams.panoramicUrl,"metadata":response.outParams.metadata});
        }
    );
    return file;
}, 
```

这确实会留下一个偶然的错误：

> TypeError：“未定义”不是对象（评估“response.outParams.id”）

这是由于`setupController`没有从模型中获取有效的 id，然后在第一次调用它时将 undefined 交给它。

必须有更好的方法从路线中获取 id ......有人吗？

**[更新]**

这是我停止错误的方法：

```
setupController: function(controller,model){
    if(model.isLoaded == false){
        controller.set('model',model);
    } else {
        controller.set('model',this.model({file_id:model.id}));
    }
}, 
```

我在我的查找功能中添加了一个“.isLoaded”标志：

```
find: function(id){
    file = App.File.create({isLoaded: false});
    IMS.api.call("Files.GetAssetDetails",{"assetId":id,"fields":{"metadata":true}}).then(function(response) {
        file.setProperties({'id':response.outParams.id,'filename':response.outParams.filename,"url":response.outParams.panoramicUrl,"metadata":response.outParams.metadata});
        file.set('isLoaded', true);
    });
    return file;
}, 
```

# ruby-on-rails-3 - Rails 将 request.subdomain 传递到自定义的 Devise 邮件布局

> ID：15808630
> 
> 赞同：8
> 
> 时间：2013-04-04T10:27:21.603
> 
> 标签：ruby-on-rails-3, devise

我需要调整忘记密码的说明来处理子域。我已按照设计站点上的说明覆盖邮件程序、控制器并添加子域帮助程序等，如下所示：

控制器/password_controller.rb

```
class PasswordsController < Devise::PasswordsController
  def create
    @subdomain = request.subdomain
    super
  end
end 
```

路线.rb

```
devise_for :users, controllers: { passwords: 'passwords' } 
```

设计.rb

```
config.mailer = "UserMailer" 
```

邮件程序/user_mailer.rb

```
class UserMailer < Devise::Mailer
  helper :application # gives access to all helpers defined within `application_helper`.

  def confirmation_instructions(record, opts={})
    devise_mail(record, :confirmation_instructions, opts)
  end

  def reset_password_instructions(record, opts={})
    devise_mail(record, :reset_password_instructions, opts)
  end

  def unlock_instructions(record, opts={})
    devise_mail(record, :unlock_instructions, opts)
  end

end 
```

意见/user_mailer/reset_password_instructions.html.erb

```
<p>Hello <%= @resource.email %>!</p>

<p>Someone has requested a link to change your password. You can do this through the link below.</p>
<p><%= link_to 'Change my password', edit_password_url(@resource, :reset_password_token => @resource.reset_password_token, :subdomain => @subdomain) %></p>

<p>If you didn't request this, please ignore this email.</p>
<p>Your password won't change until you access the link above and create a new one.</p> 
```

助手/subdomain_helper.rb

```
module SubdomainHelper
  def with_subdomain(subdomain)
    subdomain = (subdomain || "")
    subdomain += "." unless subdomain.empty?
    host = Rails.application.config.action_mailer.default_url_options[:host]
    [subdomain, host].join
  end

  def url_for(options = nil)
    if options.kind_of?(Hash) && options.has_key?(:subdomain)
      options[:host] = with_subdomain(options.delete(:subdomain))
    end
    super
  end
end 
```

应用程序.rb

```
config.to_prepare do
  Devise::Mailer.class_eval do 
    helper :subdomain
  end
end 
```

现在，这段代码一切正常，但它无法在邮件视图中获取@subdomain 的值。如果我用硬编码字符串替换@subdomain，那么正确的 url 会在电子邮件中传递，所以我知道代码都是正确的。

如何将控制器中定义的实例变量@subdomain 放入邮件程序视图中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T01:08:55.587

我找到了办法。我会想如果我能找到一个更好的方法，而不必修补东西并且不必将它链接到子域。

基本上，我覆盖控制器这样做：

```
class PasswordsController < Devise::PasswordsController
  def create
    subdomain = request.subdomain
    @user = User.send_reset_password_instructions(params[:user].merge(subdomain: subdomain))

    if successfully_sent?(@user)
      respond_with({}, :location => after_sending_reset_password_instructions_path_for(:user))
    else
      respond_with(@user)
    end
  end
end 
```

另外，我不得不在我的用户模型上修改这个方法：

```
def send_reset_password_instructions(subdomain)
  generate_reset_password_token! if should_generate_reset_token?
  send_devise_notification(:reset_password_instructions, subdomain: subdomain)
end

def self.send_reset_password_instructions(attributes={})
  recoverable = find_or_initialize_with_errors(reset_password_keys, attributes, :not_found)
  recoverable.send_reset_password_instructions(attributes[:subdomain]) if recoverable.persisted?
  recoverable
end 
```

最后，我不得不`devise_mail`修改位于 Devise 内部的修补方法。

```
 Devise::Mailer.class_eval do
    def devise_mail(record, action, opts={})
      initialize_from_record(record)
      initialize_subdomain(opts.delete(:subdomain)) # do this only if the action is to recover a password.
      mail headers_for(action, opts)
    end

    def initialize_subdomain(subdomain)
      @subdomain = instance_variable_set("@subdomain", subdomain)
    end
  end 
```

这样做，`@subdomain`变量出现在邮件模板上。我对这个解决方案不满意，但这是一个起点。我会考虑对其进行任何改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T04:16:21.987

这是一个更新的答案，我认为可以很好地解决您的问题 - [https://github.com/plataformatec/devise/wiki/How-To:-Send-emails-from-subdomains](https://github.com/plataformatec/devise/wiki/How-To:-Send-emails-from-subdomains)

在我的情况下，我的子域存储在我的 Accounts 表中，这就是我允许我`@resource.subdomain`在我的设计邮件视图中使用的操作

```
class User < ActiveRecord::Base  
  belongs_to :account

  # This allows me to do something like @user.subdomain
  def subdomain
    account.subdomain
  end
end

class Account < ActiveRecord::Base
  has_many :users
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-18T06:35:34.570

对于设计 3.1，用户模型中的上述猴子补丁可以如下所示。如果您的子域存储在一个单独的模型（比如租户）中，该模型与帐户、用户等其他模型无关。

```
def send_reset_password_instructions(subdomain)
  raw, enc = Devise.token_generator.generate(self.class, :reset_password_token)

  self.reset_password_token   = enc
  self.reset_password_sent_at = Time.now.utc
  self.save(:validate => false)

  send_devise_notification(:reset_password_instructions, raw, {subdomain: subdomain})
  raw
end

def self.send_reset_password_instructions(attributes={})
  recoverable = find_or_initialize_with_errors(reset_password_keys, attributes, :not_found)
  recoverable.send_reset_password_instructions(attributes[:subdomain]) if recoverable.persisted?
  recoverable
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T12:28:08.163

如果您也想将子域传递给“确认电子邮件”，则上述解决方案将无法使用，因为它完全在模型中处理。

我已经解决了这两种情况（忘记密码和确认电子邮件），方法是使用[request_store](https://github.com/steveklabnik/request_store) gem 存储子域（或任何其他上下文），然后设置我自己的邮件程序以使用此值。

```
class DeviseMailer < Devise::Mailer
  include Devise::Controllers::UrlHelpers
  default template_path: "devise/mailer"

  protected
  def devise_mail(record, action, opts={})
    @subdomain = opts.delete(:subdomain)
    super
  end
end 
```

`User`在类中唯一需要重写的是`send_devise_notification`包含存储在请求存储中的 intel 的方法。

```
class User < ActiveRecord::Base
  # ...
  protected
  def send_devise_notification(notification, *args)
    opts = args.extract_options!
    opts[:subdomain] = RequestStore.store[:subdomain]
    super(notification, *args, opts)
  end
end 
```

当然，您必须配置设计以在`config/initializers/devise.rb`.

```
Devise.setup do |config|
  # ...
  config.mailer = 'DeviseMailer'
  # ...
end 
```

# c++ - 是什么导致我的错误？我正在尝试创建一个播放器类并将播放器名称存储为变量

> ID：15808632
> 
> 赞同：1
> 
> 时间：2013-04-04T10:27:25.640
> 
> 标签：c++, string, class, visual-c++, build-error

这里又是一个菜鸟，所以我希望有一点理智的人可以帮助我！正如我的问题所述，我只是想创建一个玩家类（它用于 RPG 游戏）。但是，我尝试了多种方法来执行此操作，显示的代码是最新的，但是我不断遇到不同的错误。我正在使用 Microsoft Visual C++ 2010 Express，我目前面临的错误是：

> 1>player.obj：错误 LNK2001：未解析的外部符号“私有：静态类 std::basic_string，类 std::allocator > Player::m_playerName”（?m_playerName@Player@@0V?$basic_string@DU?$char_traits@ D@std@@V?$allocator@D@2@@std@@A)

我希望这是足够的细节！我创建的其余代码/文件如下：

游戏.cpp

```
#include <iostream>
#include "player.h"

using namespace std;

int main() 
{

    Player main;

   main.setStats(); 
   main.showStats();

    int stopper;
   cin >> stopper;

    return 0;

} 
```

播放器.h

```
#include <string>

class Player
    {
    public:

        Player();
        void showStats();
        void setStats();        

    private: 

         int m_playerLVL;
         static std::string m_playerName;
    }; 
```

播放器.cpp

```
#include "player.h"
#include <iostream>
#include <string>

using namespace std; 

Player::Player()
{
    cout << "Please enter your name: ";
    string playerName;
    getline (cin, playerName);
    m_playerName = playerName;
}

    void Player::showStats()
    {
        cout << "Hello, i am " << m_playerName << "and i am lvl " << m_playerLVL; 
    }

    void Player::setStats()
    {
        m_playerLVL = 1;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:29:04.767

您将播放器的名称声明为`static`：

```
static std::string m_playerName; // DON'T MAKE IT STATIC! 
```

这在语义上是不正确的，删除`static`​​恰好可以解决您的问题。每个实例都`Player`应该关联一个不同的值`m_playerName`（因为每个玩家都有自己的名字）。声明一个数据成员`static`使得它对整个`Player`类都是全局的（即它没有被赋予每个实例的值，而是一个对所有`Player`对象都相同的全局值）。这听起来不像你想要的。

* * *

现在，如果出于某种原因您*真的*打算将其声明为数据成员，那么您应该在全局命名空间范围内`static`为其提供*定义：*

```
std::string Player::m_playerName; 
```

链接器抱怨缺少这样的定义。

# java - 交换空间不足

> ID：15808635
> 
> 赞同：0
> 
> 时间：2013-04-04T10:27:41.683
> 
> 标签：java, out-of-memory, jvm-crash, g1gc

我们正面临以下异常。请注意我们正在关注 JVM（32 位）的配置

```
-Xms1024m -Xmx3076m -Xmn1024m -XX:+HeapDumpOnOutOfMemoryError -XX:+UseG1GC -XX:+UnlockExperimentalVMOptions -XX:+AggressiveOpts -XX:+DoEscapeAnalysis -XX:MaxGCPauseMillis=400 -XX:GCPauseIntervalMillis=8000 
-XX:PermSize=256m 
-XX:MaxPermSize=512m 
```

我们使用的是 32 位的 solaris 机器。

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
# java.lang.OutOfMemoryError: requested 98304 bytes for char in /BUILD_AREA/jdk6_23/hotspot/src/share/vm/gc_implementation/g1/sparsePRT.cpp. Out of swap space?
#
#  Internal Error (allocation.inline.hpp:39), pid=7285, tid=32
#  Error: char in /BUILD_AREA/jdk6_23/hotspot/src/share/vm/gc_implementation/g1/sparsePRT.cpp 
```

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:58:24.240

这意味着操作系统拒绝了 JVM 分配更多内存的请求。JVM 提出了最可能的原因……操作系统已经耗尽了“制造”虚拟内存所需的资源；即在需要换出物理内存页面时存储物理内存页面的磁盘空间。

对此的修复是特定于操作系统的，但它需要增加为保存“换出”内存页面而保留的磁盘空间量；即“交换空间”。

# silverlight - 如果鼠标指针位于浏览器内，则组合框不会在 IE8 中加载 openlayers 和 silverlight

> ID：15808637
> 
> 赞同：1
> 
> 时间：2013-04-04T10:27:48.417
> 
> 标签：silverlight, extjs, internet-explorer-8, openlayers

[https://dl.dropbox.com/u/70687768/issue.png](https://dl.dropbox.com/u/70687768/issue.png)

在我的解决方案中，我使用 OpenLayers（用于显示地图）和 Silverlight 用于拖放文件（用于文件上传功能）。在这种情况下，如果我的鼠标指针在浏览器内，组合框组件将不会检索数据，一旦我的指针移出浏览器（或拖放区域，即 Silver Light 控件），数据将被检索到组合框.

注意：这种情况仅适用于具有solverlight 和开放层的IE8 浏览器。如果我检查 Esri 的 Map 而不是 OpenLayer，那么它工作正常。

我不知道 Open Layers 或 Silverlight 控件有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:55:23.680

> 1.Check if you have overriding any events of ExtJS like Ext.Override of

```
onMouseMove : function (e) { } 
```

Handle this event properly if you done above.

> 2.Same MoveMove event can be used in both the libraries(Openlayers and ExtJS) there may be a Conflict in that case.

# c# - 如何检索发布的数据（字节 [] 格式）？

> ID：15808639
> 
> 赞同：1
> 
> 时间：2013-04-04T10:27:51.757
> 
> 标签：c#, web-applications, http-post, bytearray

我有一个 C# .net Web 应用程序。我正在尝试使用此代码将二进制数据从一个应用程序发布到另一个应用程序

```
 string url = "path to send the data";

    string result=null;
    string postData = "This is a test that posts this string to a Web server.";
    byte[] fileData = Encoding.UTF8.GetBytes (postData);

    // Create a request using a URL that can receive a post. 
    WebRequest request = WebRequest.Create (url);
    // Set the Method property of the request to POST.
    request.Method = "POST";
    // Create POST data and convert it to a byte array.    

    // Set the ContentType property of the WebRequest.
    request.ContentType = "multipart/form-data";
    // Set the ContentLength property of the WebRequest.
    request.ContentLength = fileData.Length;
    // Get the request stream.
    Stream dataStream = request.GetRequestStream ();
    // Write the data to the request stream.
    dataStream.Write (fileData, 0, fileData.Length);
    // Close the Stream object.
    dataStream.Close ();
    // Get the response.
    WebResponse response = request.GetResponse();
    // Display the status.

    result = ((HttpWebResponse)response).StatusDescription;
    // Get the stream containing content returned by the server.
    dataStream = response.GetResponseStream ();
    // Open the stream using a StreamReader for easy access.
    StreamReader reader = new StreamReader (dataStream);
    // Read the content.
    string responseFromServer = reader.ReadToEnd ();
    // Display the content.

    result = result + responseFromServer;
    // Clean up the streams.
    reader.Close ();
    dataStream.Close ();
    response.Close(); 
```

通过上面的代码，我发送`byte[]`到第二个应用程序。如何`byte[]`在第二个应用程序中检索发布的数据（格式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:21:09.497

编辑：更新的答案包括请求和服务器端。服务器端将 Base64 字符串转换为`byte[]`.

如果您要发布读入字节 [] 的二进制数据，则必须在请求端将其转换为 Base64 字符串才能发布。

客户端/请求方：

```
byte[] byteData = ReadSomeData();

string postData = Convert.ToBase64String(byteData); 
```

然后在服务器端，使用`HttpContext`从 Request 属性中获取 InputStream。然后，您可以使用 a`StreamReader`及其 ReadToEnd() 方法来读取数据。然后将发布的 Base64 字符串转换为`byte[]`.

像这样的东西：

```
string postData = string.Empty;

using (StreamReader reader = new StreamReader(context.Request.InputStream))
{
    postData = inputStreamReader.ReadToEnd();
}

byte[] data = Convert.FromBase64String(postData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:34:09.693

**注意：**我假设您正在询问如何在第二个应用程序中检索发布的数据，并且您可以访问第二个应用程序的代码。

然后，如果它是一个网络表单应用程序，那么只需在 page_load 事件上，您就可以获得文件名和文件本身：

```
string strFileName = Request.Files[0].FileName;
HttpPostedFileBase filesToSave = Request.Files[0]; 
```

如果这不是要求，请编辑您的问题并添加更多详细信息。

# xna-4.0 - XNA 4.0 InvalidOperationException 未处理

> ID：15808646
> 
> 赞同：0
> 
> 时间：2013-04-04T10:28:12.833
> 
> 标签：xna-4.0, invalidoperationexception

我正在使用[本教程](http://www.xnadevelopment.com/tutorials/theroadnottaken/theroadnottaken.shtml)来学习一点 XNA，但我一直遇到问题。我不得不转换很多代码，因为本教程似乎不使用 XNA 4.0。

但是让我们切入正题！

```
float aXPosition = (float)(-mCarWidth / 2 + mCarPosition.X + aMove * Math.Cos(mCarRotation));
            float aYPosition = (float)(-mCarHeight / 2 + mCarPosition.Y + aMove * Math.Sin(mCarRotation));
            Texture2D aCollisionCheck = CreateCollisionTexture(aXPosition, aYPosition);

            //Bruke GetData til å fylle en array med fargen på pixlene ved collisons texturen
            int aPixels = mCarWidth * mCarHeight;
            Color[] myColors = new Color[aPixels];
            aCollisionCheck.GetData<Color>(0, new Rectangle((int)(aCollisionCheck.Width / 2 - mCarWidth / 2),
                (int)(aCollisionCheck.Height / 2 - mCarHeight / 2), mCarWidth, mCarHeight), myColors, 0, aPixels); 
```

当我尝试调试代码时出现的错误说： InvalidOperationException 未处理，当它用作纹理时，不得在设备上设置渲染目标。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:43:48.527

这基本上意味着它所说的。

您必须通过调用`GraphicsDevice.SetRenderTarget(null)`（或将其设置为不同的渲染目标）从设备取消设置渲染目标。因为您不能同时将其用作源纹理和目标缓冲区。

请记住，在这个版本的 XNA 中，没有`ResolveRenderTarget`. 渲染目标只是*纹理*。

* * *

请注意，您使用的教程非常糟糕。从像这样的渲染目标中读回非常慢。特别是看到它使用渲染目标的操作（选择变换区域中的像素）可以很容易地在 CPU 上高效地完成。考虑使用[这个更好的官方示例](http://xbox.create.msdn.com/en-US/education/catalog/tutorial/collision_2d_perpixel)。

# javascript - chrome 中的 JS 文件永远不会被缓存

> ID：15808648
> 
> 赞同：2
> 
> 时间：2013-04-04T10:28:18.937
> 
> 标签：javascript, asp.net-mvc, http, google-chrome, caching

我在服务器上动态创建包含翻译字符串的 javascript 文件。 **当我查看 chrome 检查器时，这个文件永远不会被缓存，（Scripts 文件夹中的其他实际 JS 文件会被缓存）** **为什么不是？**

```
<script src="somepath/Scripts/translate-nl-BE.js"></script>
or
<script src="somepath/Scripts/translate-en-GB.js"></script> 
```

这映射到以下 MVC 操作：

```
[HttpGet]        
public ActionResult TranslateJS(string culturecode) {
     ViewBag.JSCulture = culturecode;
     Response.ContentType = "text/javascript";
     return PartialView("TranslateJS");
} 
```

这是视图：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<dynamic>" %>
<%
    string culturecode = ViewBag.JSCulture;
%>
var translations = <%=new System.Web.Script.Serialization.JavaScriptSerializer().Serialize((ViewBag.Translate as List<ERPManager.TranslationService.FlatTranslation>).Where(x=>x.CultureCode==culturecode).ToDictionary(t=>t.Key,f=>f.Value)) %>; 
```

这基本上只是序列化一个 json 数组（我知道这看起来比只返回一个 jsonresult 更脏，但我不能 ajax 调用这个文件，它需要链接到一个脚本标签

这是我从服务器得到的响应：

```
Cache-Control:private
Content-Length:10987
Content-Type:text/javascript; charset=utf-8
Date:Thu, 04 Apr 2013 10:15:11 GMT
Server:Microsoft-IIS/7.5
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0
X-Powered-By:ASP.NET 
```

这是返回的文件的预览：它基本上只是翻译的键值字典。

```
var translations = {"vertaald":"Vertaald","gerelateerd":"Gerelateerd","details":"Details"}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:01:09.460

听起来你想要的是一个`expires` [HTTP 标头](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)

您可以在 MVC 代码中进行设置：

```
[HttpGet]        
public ActionResult TranslateJS(string culturecode) {
   ViewBag.JSCulture = culturecode;
   Response.ContentType = "text/javascript";
   Response.Expires = (60*24);//24 hours
   return PartialView("TranslateJS");
} 
```

请记住，如果您设置了 expires 标头，***浏览器*将不会再次请求文件，**直到缓存内容*“过期”*。谨慎使用！

# android - 如何使用 SmsManager 发送很长的消息

> ID：15808654
> 
> 赞同：2
> 
> 时间：2013-04-04T10:28:30.063
> 
> 标签：android, smsmanager

基本上我有一个聊天应用程序，我使用 SmsManager 在客户端之间发送短信，但我能够发送比它更长的消息。我读到它只能发送大约 40-60 封信，但我想发送 200-400 封邮件之类的消息 那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T11:14:13.250

我为您创建了一个演示.. 我认为它可能对您有所帮助..

它会将您的消息分成几部分并一一发送...

```
public class Home extends Activity
{
    Context ctx;

    private static final String SMS_SEND_ACTION = "CTS_SMS_SEND_ACTION";
    private static final String SMS_DELIVERY_ACTION = "CTS_SMS_DELIVERY_ACTION";

    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    String ph_no;
    String str;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);

        ctx = this;

        ph_no = "set destination mob. no here..";
        str = "Your message here....";

        SmsManager sm = SmsManager.getDefault();

        IntentFilter sendIntentFilter = new IntentFilter(SMS_SEND_ACTION);
        IntentFilter receiveIntentFilter = new IntentFilter(SMS_DELIVERY_ACTION);

        PendingIntent sentPI = PendingIntent.getBroadcast(ctx, 0,new Intent(SMS_SEND_ACTION), 0);
        PendingIntent deliveredPI = PendingIntent.getBroadcast(ctx, 0,new Intent(SMS_DELIVERY_ACTION), 0);

        BroadcastReceiver messageSentReceiver = new BroadcastReceiver()
        {      
            @Override
            public void onReceive(Context context, Intent intent)
            {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(context, "SMS sent", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(context, "Generic failure", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(context, "No service", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(context, "Null PDU", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(context, "Radio off", Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        };

        registerReceiver(messageSentReceiver, sendIntentFilter);

        BroadcastReceiver messageReceiveReceiver = new BroadcastReceiver()
        {      
            @Override
            public void onReceive(Context arg0, Intent arg1)
            {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS Delivered",Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS Not Delivered", Toast.LENGTH_SHORT).show();
                    break;                        
                }
            }
        };

        registerReceiver(messageReceiveReceiver, receiveIntentFilter);

        ArrayList<String> parts =sm.divideMessage(str);

        ArrayList<PendingIntent> sentIntents = new ArrayList<PendingIntent>();
        ArrayList<PendingIntent> deliveryIntents = new ArrayList<PendingIntent>(); 

        for (int i = 0; i < parts.size(); i++)
        {
            sentIntents.add(PendingIntent.getBroadcast(ctx, 0, new Intent(SMS_SEND_ACTION), 0));
            deliveryIntents.add(PendingIntent.getBroadcast(ctx, 0, new Intent(SMS_DELIVERY_ACTION), 0));
        }

        sm.sendMultipartTextMessage(ph_no,null, parts, sentIntents, deliveryIntents);
    }
} 
```

*此代码还将为您提供发送和交付通知。（此发送和交付通知是附加代码，但在某处它已为您使用完整）*

# jquery - jQuery UI：滑块位置更改时的操作

> ID：15808656
> 
> 赞同：0
> 
> 时间：2013-04-04T10:28:40.640
> 
> 标签：jquery, user-interface, uislider

我正在使用来自[http://jqueryui.com/slider/#steps](http://jqueryui.com/slider/#steps)的这个 jQuery UI 滑块 它是一个简单的滑块，有 3 个步骤（1、2 和 3）和一个显示图片的 div 元素（“id_1”）。所以我现在真正想要的是图片根据滑块的位置而变化。所以在位置“1”它显示一张图片，只要我将滑块移动到位置 2 或 3，这张图片就会改变。我该怎么做？

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Slider - Snap to increments</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
    $(function () {
        $("#slider").slider({
            value: 100,
            min: 1,
            max: 3,
            step: 1,
            slide: function (event, ui) {
                $("#amount").val("$" + ui.value);
            }
        });
        $("#amount").val("$" + $("#slider").slider("value"));
    });
</script>
</head>
<body>
<p>
<label for="amount">Donation amount ($50 increments):</label>
<input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" />
</p>

<div id="slider"></div>
<div id="id_1" class="class_1"></div>

</body>
</html> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:37:59.043

您只需要查看滑块的值，然后显示相应的图像。尝试这样的事情：

```
slide: function (event, ui) {
            if (ui.value == 1) {
                $("#id_1")).attr("src", "image1.png");
            } else  if (ui.value == 2) {
                $("#id_1")).attr("src", "image2.png");
            } else  if (ui.value == 3) {
                $("#id_1")).attr("src", "image3.png");
            }
        } 
```

并将 id_1 div 改为 img 标签：

```
<img id="id_1" class="class_1"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:44:18.077

你的意思是这样[的](http://jsfiddle.net/Wx2MT/)吗（这是一个小提琴）。

我创建了一个数组，其中包含您需要的图像，如下所示

```
var images = [
"http://cvcl.mit.edu/hybrid/cat2.jpg",
"http://www.helpinghomelesscats.com/images/cat1.jpg",
"http://oddanimals.com/images/lime-cat.jpg"
]; // replace these links with the ones pointing to your images 
```

然后，当滑块移动时

```
slide: function (event, ui) {
            $("#amount").val("$" + ui.value);
            $("#id_1").html("<img src=\"" + images[ui.value-1] + "\" />"); // subtracting 1 as the arrays first index is 0
        } 
```

并通过在页面加载时加载数组的第一个图像来完成它

```
 $("#id_1").html("<img src=\"" + images[0] + "\" />"); // Load the first image on page load 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:46:06.223

您只能在幻灯片事件中执行此操作。

```
 <script>
        $(function () {
            $("#slider").slider({
                value: 100,
                min: 1,
                max: 3,
                step: 1,
                slide: function (event, ui) {
                    $("#amount").val("$" + ui.value);
if(ui.value == 1)
{
    $('#imgSource').attr('src','1.png');
}
else if(ui.value == 2)
    {
        $('#imgSource').attr('src','2.png');
    }

                }
            });
            $("#amount").val("$" + $("#slider").slider("value"));
        });
    </script> 
```

# iphone - 手势识别器无法识别通过 UIImageView 创建的视图

> ID：15808657
> 
> 赞同：1
> 
> 时间：2013-04-04T10:28:41.937
> 
> 标签：iphone, objective-c, uigesturerecognizer, redaction

我有一个带有点击手势的 UIImageview，这样任何点击它都会创建一个白色背景的矩形视图。我可以在 imageview 上移动任何位置。像这样，我可以在该图像视图上创建无限视图。

现在我的问题是我想向新创建的视图添加双击手势，但是当我单击任何这些视图时，会在该视图上创建一个新视图。

但我想要的是，如果我点击一个视图，则不必在该视图上创建新视图。目前，即使我在 UIImageView 上创建了一个新视图，gestureRecognizer 也能识别 UIImageView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:06:35.133

图像视图，

```
UIImageView  *imageView = [[UIImageView alloc]init];
UITapGestureRecognizer * tapRecognizer = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(createNewView)];
[tapRecognizer setNumberOfTapsRequired:1]; // allow to create new view

UITapGestureRecognizer * tapRecognizerToFail = [[UITapGestureRecognizer alloc]init];
[tapRecognizer setNumberOfTapsRequired:2]; // to disallow more than 1 tap.

[tapRecognizer requireGestureRecognizerToFail:tapRecognizerToFail];
 [imageView setGestureRecognizers:[NSArray arrayWithObjects:tapRecognizer,tapRecognizerToFail,nil]]; 
```

// 在 ImageView 上创建新视图

```
-(void)createNewView
{
    UIView  * view = [[UIView alloc]init];
    UITapGestureRecognizer * tapRecognizer = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(newViewAction)];
    [tapRecognizer setNumberOfTapsRequired:2];
    [view addGestureRecognizer:tapRecognizer];

    [imageView addSubview:view];
} 
```

// 在新创建的视图上双击操作

```
-(void)newViewAction
{
 // goes here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:07:11.520

您可以使用 requireGestureRecognizerToFail: 声明两个识别器之间的依赖关系。

```
[secondaryGesture requireGestureRecognizerToFail:primaryGesture]; 
```

# datetime - ElasticSearch 按日期时间字段搜索

> ID：15808660
> 
> 赞同：0
> 
> 时间：2013-04-04T10:29:01.080
> 
> 标签：datetime, elasticsearch

我需要通过包括日期时间字段在内的多个字段进行搜索。

搜索查询可能包含也可能不包含以不同格式指定的日期值：

*   4月4日
*   2013 年 4 月 4 日
*   2013-04-04

查询字符串可能包含一些无法转换为日期时间的术语。

有什么方法可以使用弹性搜索来支持这种类型的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T17:32:25.873

这是我在调查期间挖掘的内容：

我使用弹性搜索的[multi_field](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type/)功能。我为日期类型功能添加了字符串可搜索文本字段。

这是我用于日期类型字段的映射：

```
 "TransactionDate":{
      "type":"multi_field",
      "fields":{
         "TransactionDate":{
            "type":"date",
            "format":"YYYY-MM-dd HH:mm:ss||MM/dd/yyyy||yyyy/MM/dd",
            "index":"not_analyzed"
         },
         "formatted":{
            "type":"string",
            "index":"analyzed"
         }
      }
   } 
```

然后我可以包含`TransactionDate.formatted`使用文本字段来搜索查询的字段。

希望对其他人有所帮助。

# c - 对标准输入、标准输出和标准错误如何工作感到困惑

> ID：15808664
> 
> 赞同：0
> 
> 时间：2013-04-04T10:29:12.990
> 
> 标签：c, file, stdout, stdin, stderr

我有以下程序，

```
void Print()
{
    printf("\nCall from Print\n");
}

int main()
{
    FILE * pFile;
    char mystring [100];

    pFile = freopen ("myfile.txt" , "r", stdin);
    if (pFile == NULL)
    {
        perror ("Error opening file");
    }
    else 
    {
        if ( fgets (mystring , 100 , pFile) != NULL )
        {
            freopen("myfile.txt" , "a", stdout);
            Print();
            printf("Here it is\n");
            //puts (mystring);
        }
        fclose(stdout);
        fclose (pFile);

    }
    printf("Hello World\n");
    return 0;
} 
```

现在，当我执行程序时，我无法在控制台窗口中看到输出。所有输出都重定向到`myfile.txt`文件中。我希望输出也应该同时`console`出现`myfile.txt`。

毕竟，为什么`printf("Hello World\n")`没有在控制台中打印出来。如何让它也打印在控制台中？

我在 windows-7、visual studio-2010 中工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:32:11.707

最简单的方法是更明确地说明它，通过手动打印到 `stdout`（原始的，以将输出到控制台）和您的文件。

通过重新打开`stdout`指向文件，您删除了与控制台窗口的连接，这就是没有输出出现的原因。

您也可以*只*使用`stdout`, 并使用外部工具，例如[`tee`](http://unixhelp.ed.ac.uk/CGI/man-cgi?tee)将输出复制到文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T10:32:46.563

这

```
freopen("myfile.txt" , "a", stdout); 
```

将使您的`stdout`输出到文件`myfile.txt` 此功能会将输出从控制台重定向到文件`myfile.txt`

即使您使用`fclose(stdout);`，这也不会将 stdout 的输出返回到控制台，它只会关闭`myfile.txt`

有关更多详细信息，请参阅以下链接[在 C 中重定向标准输出时的奇怪行为](https://stackoverflow.com/questions/8779356/strange-behaviour-when-redirecting-stdout-in-c)

为了在控制台和文件中获得输出，您必须保持标准输出不接触，不要重新打开它，`freaopen()`也不要关闭它。并且您必须在文件和标准输出中两次打印您的消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:27:08.210

我也曾经遇到过这样的要求。

我为这样的打印日志制作了一个宏。该打印宏扩展为一个函数，该函数根据某些控制变量设置在我的日志文件和 stdout 或 stderr 中打印该消息。

# vb6 - VB6：如何使inet异步？

> ID：15808665
> 
> 赞同：0
> 
> 时间：2013-04-04T10:29:13.507
> 
> 标签：vb6

我的 vb6 代码目前使用下面的代码来`inet`控制检索数据。但它使我的程序变慢，因为`loop`它使它同步。锄头我可以`inet`异步吗？

> ```
>  HTML = Inet(Index).GetChunk(1024)
>     Do Until Buffer = Empty
>       Buffer = Inet(Index).GetChunk(1024)
>       HTML = HTML & HTML
>     Loop 
> ```

# javascript - 在javascript中计算两个日历日期之间的差异

> ID：15808670
> 
> 赞同：-1
> 
> 时间：2013-04-04T10:29:29.843
> 
> 标签：javascript, html, jsp

我需要计算两个日历日期之间的差异。我浏览了各种帖子，但返回的值不正确。这是我的代码：-

```
 function getTotalDays()
{
    var date11 = document.getElementById("departure_date").value;
    var date22 = document.getElementById("arrival_date").value;

    var one_day=1000*60*60*24;

    var date1 = new Date(date11);
    var date2 = new Date(date22);

      // Convert both dates to milliseconds
      var date1_ms = date1.getTime();
      var date2_ms = date2.getTime();

      // Calculate the difference in milliseconds
      var difference_ms = date2_ms - date1_ms;

      // Convert back to days and return
      var diffDays =  Math.round(difference_ms/one_day); 
    alert(diffDays);

} 
```

假设差异是 2 天，它显示为 59。怎么了..？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:51:42.507

您传递给日期对象的值可能是错误的。你可能更容易做这样的事情：

```
var date1 = getDate(date11);
var date2 = getDate(date22); 
```

getDate 是：

```
function getDate(date) {
    //date format dd/mm/yyyy
    var dateArr = date.split('/');
    var date = new Date(dateArr[2], dateArr[1], dateArr[0]);
    return date;
} 
```

# java - 如何将时间同步到android

> ID：15808673
> 
> 赞同：2
> 
> 时间：2013-04-04T10:29:34.330
> 
> 标签：java, android, url, sync

我有一个 url 用于将服务器时间同步到我的应用程序，问题是如何做到这一点？任何人都可以向我解释在这里做什么，谢谢，我真的很感激。

这是 URL = [http://server10.instaforex.com:2012/TimeService/TimeService.svc/CurrentTime](http://server10.instaforex.com:2012/TimeService/TimeService.svc/CurrentTime)

这是我的主要活动代码。

```
public class MainActivity extends Activity {

    Timer timeoutTimer;
    final Random myRandom = new Random();
    GenerateTask genTask = new GenerateTask();
    static String RAN_TEXT = "text";

    class GenerateTask extends TimerTask {
        boolean started = false;
        public void run() {
            if (started) {
                System.out.println("generating");
                final TextView textGenerateNumber = (TextView)findViewById(R.id.generatenumber);
                RAN_TEXT = "";

                for(int k=0;k<7;k++){
                    RAN_TEXT += myRandom.nextInt(10) + " ";
                }
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        textGenerateNumber.setText(RAN_TEXT);
                    }
                });
            }
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button buttonGenerate = (Button)findViewById(R.id.generateme);

        buttonGenerate.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                System.out.println("click");
                if (!genTask.started) {
                    genTask.started=true;
                    timeoutTimer = new Timer();
                    timeoutTimer.scheduleAtFixedRate(genTask, 0, 30000);
                } else {
                    genTask.started=false;
                    timeoutTimer.cancel();
                }
            }
       });  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:21:43.460

从您发布的代码中不清楚您的主要活动是什么。它只是连接一些随机数并将它们设置在文本区域中。

如果您希望解析 HTTP 客户端返回的 XML 输出，那么有很多示例向您展示如何执行此操作。看看这个问题 - [Android: parse XML from string questions](https://stackoverflow.com/questions/5752268/android-parse-xml-from-string-problems)

如果 NTP 时间是你真正感兴趣的，有[NTP 客户端可以帮助你正确地同步时间](https://stackoverflow.com/questions/7677674/use-of-ntp-service)。

使用其中一种解决方案，您就可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:24:12.530

尝试这个..

**首先尝试使用 SO**[解决方案 1](https://stackoverflow.com/questions/2376471/how-do-i-get-the-web-page-contents-from-a-webview?answertab=votes#tab-top)或[解决方案 2](https://stackoverflow.com/questions/9966760/how-i-get-page-source-from-webview)的链接中的任一解决方案来获取该 html 链接的来源

**其次，您可以使用**[解析器](http://jericho.htmlparser.net/docs/index.html)解析其内容。

**第三**，将解析后的内容显示为所需的时间格式。

如果您遇到任何困难，请告诉我。

# c++ - 链表的复制构造函数

> ID：15808682
> 
> 赞同：-2
> 
> 时间：2013-04-04T10:29:55.163
> 
> 标签：c++

我正在制作一个双向链表，它只存储一个数据类型（通用），我需要一个复制构造函数。我以为我做对了，但是当我使用导师提供的文件对其进行测试时，它不起作用.当我尝试调试它时，问题似乎出在我刚刚设置head = NULL的链表类的构造函数中。这是一个正确的构造函数

```
//this is the struct i am using
struct ListItem 
{
    T value;
    ListItem<T> *next;
    ListItem<T> *prev;

    ListItem(T theVal)
    {
       this->value = theVal;
       this->next = NULL;
       this->prev = NULL;
    }
};

template <class T>
List<T>::List()
{
    head=NULL;
}

template <class T>
List<T>::List(const List<T>& otherList)
{
     ListItem<T> *Headold=otherList.getHead();              
     if (Headold==NULL)
     {
        head=NULL;    //if otherlist head is NULL,new list head=0
     }
     else
     {           
         head=new ListItem<T>(Headold->value);    //initializing head to the string value

       //storing in temporary pointers
         ListItem<T> *oldnode=Headold;     
         ListItem<T> *newnode=head;
         while (temp->next!=NULL)
         {
            oldhead=oldhead->next;
            //making new node every instance 
            newnode->next=new ListItem<T>(oldhead->next->value); 
            ListItem<T> *newnodenext=newnode->next;
            newnodenext->prev=newnode;   //setting the previous pointer of the new node
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:02:24.230

您没有更新 temp1，它一直指向 Head。这是解决方法。

```
 while (temp->next!=NULL)
     {
        temp=temp->next;
        //making new node every instance 
        temp1->next=new ListItem<T>(temp->next->value); 
        ListItem<T> *temp2=temp1->next;
        temp2->prev=temp1;   //setting the previous pointer of the new node
        temp1 = temp2;
     } 
```

# python - 在异常上下文中获取函数的堆栈帧

> ID：15808683
> 
> 赞同：1
> 
> 时间：2013-04-04T10:29:55.633
> 
> 标签：python, python-2.7

在下面的示例代码中，我打算获取装饰函数的被调用者的堆栈帧。假设，装饰函数，power（下面），调用 pwr 函数并且有一个例外，我想获取 pwr 的堆栈帧（打印函数参数）。对于在 api 中公开的函数，它的参数和响应被打印，但是模块内部的函数和 api 调用的函数，我想得到那些堆栈帧。

```
import inspect
def api(func):
    def decor(*args, **kwargs):
        try:
            print "Request %s %s %s" % ( func.__name__, args, kwargs)
            response = func(*args,**kwargs)
            print "response %s", response
            return response
        except Exception, e:
            print "exception in %s", func.__name__
            for frame in inspect.stack():
                print frame[3]
            raise e
    return decor

@api
def power(a,b):
    return pwr(a,b)

def pwr():
   ...
   ... 
```

当我运行代码时，在异常期间，我从 decor 和 up 获取堆栈帧，但不是 func 或更低。任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:34:48.443

If you want to look at the context in which the exception occurred, you need to look at the third value (the "traceback object") returned from [`sys.exc_info()`](http://docs.python.org/3/library/sys.html#sys.exc_info). The [`traceback` module](http://docs.python.org/3/library/traceback.html) has some useful functions for handling these objects: you might be able to make use of [`traceback.print_tb`](http://docs.python.org/3/library/traceback.html#traceback.print_tb).

For example:

```
>>> import sys, traceback
>>> try: raise Exception()
... except: traceback.print_tb(sys.exc_info()[2])
... 
  File "<stdin>", line 1, in <module> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:35:36.163

在函数返回或引发异常之后，您无法访问框架，因为框架根本不再存在。如果您确实想出于某些调试/分析目的访问函数框架并且无法修改该函数，请考虑使用[`sys.setprofile`](http://docs.python.org/2/library/sys.html#sys.setprofile)or [`sys.settrace`](http://docs.python.org/2/library/sys.html#sys.settrace)。回调将作为参数传递给框架。

# python - Django模型错误摘要或未安装？

> ID：15808685
> 
> 赞同：0
> 
> 时间：2013-04-04T10:30:09.117
> 
> 标签：python, django, django-models

尝试运行`python manage.py syncdb`命令时出现以下错误

**CommandError: 一个或多个模型未验证：sms.message: 'originator' 与模型有关系`<class 'sms.models.message.Originator'>`，该模型要么未安装，要么是抽象的。**

**模型.py**

```
class Originator(models.Model):
    originator_name = models.CharField(max_length=11)
    user = models.ForeignKey(User, related_name='originators')

class Message(models.Model):
    content = models.TextField(help_text=_(u'The body of the message.'))
    recipient_number = models.CharField(max_length=32)
    sender = models.ForeignKey('auth.User', related_name='sent_sms_messages')
    originator = models.ForeignKey(Originator,
                                   related_name='Messages') 
```

我没有看到问题！其他人可以吗？

我注意到的是，当我在 Message to Originator 中删除 FK 时，表格会创建 bar Originator，它永远不会被创建！

这是我要添加的模型....

[https://bitbucket.org/schinckel/django-sms-gateway/src/13b68d23f3a28c7d147c4a501965e2ad07f89cf7/sms/models/message.py?at=default](https://bitbucket.org/schinckel/django-sms-gateway/src/13b68d23f3a28c7d147c4a501965e2ad07f89cf7/sms/models/message.py?at=default)

也许这里发生了其他事情？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:51:21.363

它在我添加时安装....

```
class Meta:
        app_label = 'sms' 
```

到 Originator 类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:33:42.163

你确定`User`那里有 auth.User 模型吗？好像指的是Originator模型本身，很奇怪。

您可能应该像在 中那样做`Message`，只使用字符串`auth.User`作为`Originator.user`FK 的目标。

# php - PhalconPHP 的 IDE 自动完成功能

> ID：15808688
> 
> 赞同：8
> 
> 时间：2013-04-04T10:30:18.680
> 
> 标签：php, netbeans, ide, phalcon

PhalconPHP 框架是否存在任何类型的骨架，我可以在我的 Netbeans IDE 中用于自动完成目的？

我只需要一堆带有类/接口声明的文件，如下所示：

```
namespace \Phalcon;

class Tag {

    /**
     * bla bla bla
     * ...
     */
    public static function setTitle( $title ) {}

    ...

} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-04T13:29:58.043

也许你正在寻找这个？Phalcon 开发工具 [https://github.com/phalcon/phalcon-devtools/tree/master/ide](https://github.com/phalcon/phalcon-devtools/tree/master/ide)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T11:03:28.587

[您可以使用我的InterfaceDistiller](https://github.com/gooh/InterfaceDistiller)提取接口：

```
namespace com\github\gooh\InterfaceDistiller;
include __DIR__ . '/../src/autoload.php';

var_dump( extension_loaded('phalcon') ); // should be true

$phalconClasses = new \RegexIterator(
    new \ArrayIterator(get_declared_classes()),
    '/^Phalcon/'
);

foreach ($phalconClasses as $phalconClass)
{
    $reflector = new \ReflectionClass($phalconClass);
    $methodIterator = new \ArrayIterator($reflector->getMethods());

    $distillate = new Distillate;
    $distillate->setInterfaceName($reflector->getNamespaceName());
    $distillate->setExtendingInterfaces(
        implode(',', $reflector->getInterfaceNames())
    );

    foreach ($methodIterator as $method) {
        $distillate->addMethod($method);
    }

    $file = new \SplTempFileObject(-1);
    $writer = new Distillate\Writer($file);
    $writer->writeToFile($distillate);
    $file->rewind();
    $file->fpassthru();
} 
```

这将产生以下输出：

```
<?php
interface Phalcon
{
    public function __clone();
    public function __construct($message /* = unresolvable */, $code /* = unresolvable */, $previous /* = unresolvable */);
    public function getMessage();
    public function getCode();
    public function getFile();
    public function getLine();
    public function getTrace();
    public function getPrevious();
    public function getTraceAsString();
    public function __toString();
}

// this continues for all classes in the extension 
```

查看[包含 Phalcon 的所有蒸馏接口的完整文件](http://pastebin.com/nCAAKYJi)

请注意，InterfaceDistiller 只能产生接口。所以你不会得到类骨架和接口的混合，而只是接口。

另一个问题是接口方法都是公共的，因为接口方法应该是公共的。您可以[调整作者](https://github.com/gooh/InterfaceDistiller/blob/master/src/Distillate/Writer.php#L88)以使用真正的可见性。或者您可以限制 Distiller 将蒸馏的方法。

如您所见，API 的某些部分无法解析。这是因为 InterfaceDistiller 使用反射从类中提取接口，并且某些值不仅可以通过这种方式获得。考虑手动填写无法解析的值。

虽然不适合您的用例，但它应该给您一个很好的开端。

如果您决定调整并完成文件以使其完全可用，请考虑将包含整个文件的拉取请求发送给 Phalcon 人员

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-04T13:33:36.553

我不确定 Netbeans 及其与在其他 IDE 中提供自动完成功能的文件的兼容性，但已经支持 PHPStorm

[如何在 phpstorm 中使用 phalcon-devtools\ide\phpstorm？](https://stackoverflow.com/questions/12284141/how-do-i-use-phalcon-devtools-ide-phpstorm-in-phpstorm/12285007)

Sublime Text 中也支持 Volt

[https://github.com/phalcon/volt-sublime-textmate](https://github.com/phalcon/volt-sublime-textmate)

# python - 在 Python 中创建同级文件名

> ID：15808689
> 
> 赞同：1
> 
> 时间：2013-04-04T10:30:27.467
> 
> 标签：python, filenames, idioms

在 Python 2.7 中获取同级文件（名称）的 idomatic/canoncial/best 方法是什么？

也就是说，如果有类似`'C:\\path\\file.bin'`or的文件`'/path/file.bin'`，
如何获取`'C:\\path\\anothername.anotherext'`or `'/path/anothername.anotherext'`。

字符串操作，搜索最后一个路径分隔符并替换之后的部分，当然会起作用，但这看起来非常粗糙。

换句话说，这些 Java 片段的惯用 Python 等价物是什么：

```
File sibling = new File(file.getParent(), siblingName); 
```

或者路径名字符串更长一点：

```
String siblingPathName = new File(new File(filePathName).getParent(), siblingName).toString(); 
```

注意：上面使用的 Java 与问题无关。

注意 2：如果 Python 3 有新的方式，我也很高兴知道这一点，即使我使用的是 Python 2.7 atm。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:41:51.393

用于[`os.path.dirname`](http://docs.python.org/2/library/os.path.html#os.path.dirname)获取文件的目录，然后[`os.path.join`](http://docs.python.org/2/library/os.path.html#os.path.join)添加兄弟姐妹的名称。

```
os.path.join(os.path.dirname(f), siblingname) 
```

# jquery - 克隆 html 元素不继承它的属性

> ID：15808694
> 
> 赞同：0
> 
> 时间：2013-04-04T10:30:44.147
> 
> 标签：jquery, html, combobox, clone

我正在克隆一个选择/组合框，但我不想克隆它的值或属性或行为，只是一个具有相同选项的空组合框。

正在发生的事情是它也在克隆价值。

你能给我看一个小例子吗？

我正在使用 jQuery。

我知道您可能会询问我的代码，但在这里展示它有点长，因为我使用的是一个适用于表格和克隆行的 3rd 方插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:38:04.997

您可以将克隆的选定值设置为`select`原始值`select`：

```
var selected = $(this).find(':selected').val(),
    clone = $(this).clone().appendTo('body');
$(clone).val(selected); 
```

这是一个粗略的[JSFiddle 示例](http://jsfiddle.net/BrhCP/)。

但是，您可能希望在设置所选值`.appendTo()` *后*`$(clone).appendTo(...);`调用 ( )。

**编辑：**似乎我可能误读了您的问题。Chrome[*不会*复制](http://jsfiddle.net/BrhCP/2/)`clone`. _ 要取消设置值，您只需：

```
$(clone).val(null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:33:57.027

您可以使用`$(element).clone();`

小例子可能是：

```
<div id="lol">lol</div>

$(function(){
$('#lol').append($('#lol').clone());
}); 
```

如果您只想克隆 html 标签，请执行以下操作：

```
<div id="lol">lol</div>

    $(function(){
    $('#lol').append($('#lol').clone().html("").text(""));
    }); 
```

# android - 在android中的两个或多个编辑文本之间切换

> ID：15808696
> 
> 赞同：0
> 
> 时间：2013-04-04T10:30:48.563
> 
> 标签：android, android-layout, android-widget, android-edittext

假设我`EditText`的布局中有两个或更多视图，并且在运行时错误地选择了第二个视图并用文本填充它；现在我想转到以前`EditText`的视图并在触摸增益上重点在其中写一些文本。

但我无法做到这一点。我无法获得视图焦点并在单击该特定视图时将其写入。

请看下面的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@drawable/wall">

<EditText
    android:id="@+id/title"
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:textSize="30dp"
    android:focusable="true"
    android:hint="@string/Title" />

<EditText
    android:id="@+id/body"
    android:layout_width="fill_parent"
    android:layout_height="350dp"
    android:textSize="25dp"
    android:paddingTop="45dp"
    android:gravity="top"
    android:inputType="textMultiLine|textNoSuggestions"
    android:ems="10"
    android:focusable="true"
    android:hint="@string/program" />

<TextView
    android:id="@+id/CalDisplay"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
   android:textSize="20dp"
    android:layout_below="@+id/save" />

<Button
    android:id="@+id/Calculate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/body"
    android:layout_toRightOf="@+id/RunProgram"
    android:background="@drawable/custom_button"
    android:textColor="#ffffff"
    android:text="@string/Calculate" />

<Button
    android:id="@+id/save"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/Calculate"
    android:layout_alignBottom="@+id/Calculate"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/RunProgram"
    android:background="@drawable/custom_button"
    android:textColor="#ffffff"
    android:text="@string/Save"
     />

<Button
    android:id="@+id/RunProgram"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/body"
    android:layout_centerHorizontal="true"
    android:background="@drawable/custom_button"
    android:textColor="#ffffff"
    android:text="@string/Run" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:34:44.320

替换`RelativeLayout`为`LinearLayout`。因为看起来您`EditText`彼此重叠（导致焦点问题），或者至少添加一些各自的对齐方式。

例如，将以下内容添加到您的第二个`EditText`：

```
android:layout_below="@id/title" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:50:26.563

```
Try this...

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:id="@+id/title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:hint="Title"
        android:textSize="15dp" />

    <EditText
        android:id="@+id/body"
        android:layout_width="fill_parent"
        android:layout_height="350dp"
        android:layout_below="@+id/title"
        android:layout_marginTop="5dp"
        android:gravity="left"
        android:hint="program"
        android:inputType="textMultiLine|textNoSuggestions"
        android:textSize="15dp" />

    <TextView
        android:id="@+id/CalDisplay"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/save"
        android:textSize="20dp" />

    <LinearLayout
        android:id="@+id/linearButtons"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/body" >

        <Button
            android:id="@+id/Calculate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Calculate"
            android:textColor="#ffffff" />

        <Button
            android:id="@+id/save"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Save"
            android:textColor="#ffffff" />

        <Button
            android:id="@+id/RunProgram"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Run"
            android:textColor="#ffffff" />
    </LinearLayout>

    </RelativeLayout> 
```

# python - utc 替换对 utc 时间戳有什么作用？

> ID：15808699
> 
> 赞同：1
> 
> 时间：2013-04-04T10:31:10.150
> 
> 标签：python, datetime, timezone

我遇到了以下代码：

```
datetime.datetime.utcnow().replace(tzinfo=tzutc()) 
```

我看不到 replace() 调用在做什么，从阅读文档看来它似乎将其转换为 UTC 时间戳 - 但肯定 utcnow() 会返回一个 UTC 时间戳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:38:28.143

```
datetime.datetime.utcnow()
# returns datetime.datetime(2013, 4, 4, 10, 39, 1, 303329) 
```

在没有信息的情况下为您提供 UTC 的当前日期时间`tzinfo`：

```
.replace(tzinfo=tzutc())
# returns datetime.datetime(2013, 4, 4, 10, 39, 1, 303329, tzinfo=<UTC>) 
```

将此 tzinfo 信息添加到 datetime 对象。

您可以使用以下方法获得相同的（UTC 中的当前日期时间和 UTC tzinfo）：

```
datetime.datetime.now(pytz.utc)
# returns datetime.datetime(2013, 4, 4, 10, 39, 1, 303329, tzinfo=<UTC>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:37:07.823

这只是调用[`datetime.replace()`](http://docs.python.org/2/library/datetime.html#datetime.datetime.replace)，该文档页面上经常提到这种特殊用法。

它很有用，因为`datetime.datetime.utcnow()`返回 `datetime`没有时区信息（`tzinfo`will be `None`）：`replace()`调用用于更改它。

# php - wordpress metaWeblog.newPost xmlrpc 如果不存在则创建类别，并防止 codeigniter 重复标题

> ID：15808700
> 
> 赞同：3
> 
> 时间：2013-04-04T10:31:18.713
> 
> 标签：php, wordpress, codeigniter, xml-rpc

我正在使用 codeigniter 发布到我的 wordpress 博客。

**代码**

模型

```
function doPost($title='new post',$content='hi',$categories=array('new'),$keys='new, none')
    {
        $this->load->library('xmlrpc');

        $thePost= array(
            array(
                'title' => array($title,'string'),
                'date_created_gmt'=>array($datetime,'dateTime.iso8601'),
                'description' => array($content,'string'),
                'categories' => array($categories,'struct'),
                'mt_keywords'    => array($keys,'string'),
                'post_type' => array('post','string'),
            ),
            'struct'
        );
        $this->xmlrpc->server('http://demo.com/xmlrpc.php', 80);
        $this->xmlrpc->method('metaWeblog.newPost');
        $request = array('1',$user,$pass,$thePost,TRUE);
        $this->xmlrpc->request($request);
        $result = $this->xmlrpc->send_request();

        if (!$result) {
            echo $this->xmlrpc->display_error();
        } else {
            print_r($this->xmlrpc->display_response());
        }
    } 
```

但我有一个问题。

**第一个。**我可以检查是否已经存在具有相同标题的帖子吗？

**第二。**目前，如果我发布一个不存在的类别，则帖子提交为未分类，如果不存在，我该如何更改它以创建类别？

**第三。**我可以在一个 xmlrpc 请求中发布多个帖子吗？

谢谢，我正在使用最新版本的 wordpress（今天是我使用 wordpress 的第 0 天！），它位于远程服务器上。

谢谢，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:30:56.040

*重新第一/第二。*

您可以使用[`wp.getTerms`](http://codex.wordpress.org/XML-RPC_WordPress_API/Taxonomies#wp.getTerms)来检查类别是否存在。

使用添加类别[`wp.newTerm`](http://codex.wordpress.org/XML-RPC_WordPress_API/Taxonomies#wp.newTerm)

使用创建帖子[`wp.newPost`](http://codex.wordpress.org/XML-RPC_WordPress_API/Posts#wp.newPost)

*重新第三。*

> 我可以在一个 xmlrpc 请求中发布多个帖子吗？

不，不要推送内容。

尽管如此，如果您确实可以访问 WP 安装，您可以创建一个小插件，该插件可以`insert_posts`在从您的 CI 应用程序远程触发后从提要中提取内容。

# validation - 淘汰赛自定义验证问题

> ID：15808702
> 
> 赞同：1
> 
> 时间：2013-04-04T10:31:20.013
> 
> 标签：validation, knockout.js

假设我有一个具有以下属性的模型：

```
function ViewModel() {
     this.SetupTime = ko.observable();
     this.CloseTime = ko.observable();
     this.MinHrs = ko.observable();
} 
```

我需要添加一个验证规则，以便 MinHrs > (SetupTime + CloseTime)。每当更改三个字段之一时，都会触发此验证。我知道我必须为此编写自定义验证，例如：

```
 ko.validation.rules['ValidWorkRange'] = {
    validator: function (val, setuptime, closetime, minhrs) {
        return minhrs > (setuptime+closetime);
    },
    message: '(Shift End - Shift Start) >= Shortest Work Segment'
}; 
```

我不确定我在那里所做的是否正确，也不确定如何在 observable 中调用此验证。

有人可以帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:48:17.430

是的，你是对的，你应该创建一个[自定义验证](https://github.com/ericmbarnard/Knockout-Validation#custom-validation-rules)来实现你的目标。而且您无需调用验证函数，只要其关联的依赖项（可观察对象）发生变化，就会自动调用它。

[**工作小提琴**](http://jsbin.com/udojob/28/edit)

**注意**：请应用其他必要的验证，如数字等。因为如果您在小提琴代码的任何输入字段中输入文本，则结果可能是错误的。

这是自定义验证代码：

```
var ValidWorkRange = function(val, param)
{
  if(val && param){
  var minHrs = parseInt(val, 10);
  var setupTime = parseInt(param[0](), 10);
  var closeTime = parseInt(param[1](), 10);
  return minHrs > (setupTime+closeTime);
  }
}; 
```

像这样你可以将它应用到你的 observable 上：

```
function ViewModel() {
     var self = this;

     self.SetupTime = ko.observable();
     self.CloseTime = ko.observable();
     self.MinHrs = ko.observable().extend
     ({
       validation: { 
         validator: ValidWorkRange, 
         message: 'Not valid.', 
         params: [self.SetupTime, self.CloseTime] 
       }
     });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:08:53.480

我不太了解 ko 验证，但它可能对你有用

[https://github.com/ericmbarnard/Knockout-Validation](https://github.com/ericmbarnard/Knockout-Validation)

# android - 单击列表视图上的项目时如何刷新列表视图

> ID：15808703
> 
> 赞同：1
> 
> 时间：2013-04-04T10:31:36.747
> 
> 标签：android, android-layout, android-listview

我有一个从 arrayadapter 扩展的自定义适配器：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    final ViewHolder holder;

    if (convertView == null) {
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        convertView = vi.inflate(R.layout.list_item, null);

        holder = new ViewHolder();
        holder.tvName = (TextView) convertView.findViewById(R.id.tvName);
        holder.tvPrice = (TextView) convertView.findViewById(R.id.tvPrice);
        holder.ivItem = (ImageView) convertView.findViewById(R.id.ivItem);
        holder.ivIcon = (ImageView) convertView.findViewById(R.id.ivIcon);
        holder.ivArrow = (ImageView) convertView.findViewById(R.id.ivArrow);

        convertView.setTag(holder);

    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.tvName.setText(item.get(position).getName());
    holder.tvPrice.setText(item.get(position).getPrice());
    holder.ivItem.setImageBitmap(item.get(position).getAvatar());
    holder.ivArrow.setImageDrawable(item.get(position).getArrow());
    holder.ivIcon.setImageDrawable(item.get(position).getIcon());

            holder.ivIcon.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

        /*...My code...*/
    }
    });

    return convertView;
} 
```

我尝试单击 item `ivIcon`，`listview`将删除一行并`listview`刷新，但我无法刷新 listview。我需要帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:34:54.673

您的选择是：

*   使用ArrayAdapter的功能修改底层List（添加、插入、删除、清除等）
*   使用新的 List 数据重新创建 ArrayAdapter。（使用大量资源和垃圾收集。）
*   创建您自己的从 BaseAdapter 和 ListAdapter 派生的类，该类允许更改基础 List 数据结构。
*   每次更新列表时使用 notifyDataSetChanged。要在 UI 线程上调用它，请使用 Activity 的 runOnUiThread 方法。然后 notifyDataSetChanged 将起作用。

例子

```
final ArrayAdapter adapter = ((ArrayAdapter)getListAdapter());
runOnUiThread(new Runnable() {

    public void run() {
        adapter.notifyDataSetChanged();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:44:40.310

此代码将为您提供帮助。

假设您有类似的适配器

```
 ListView = listview;
 customListView mcustomListView = new customListView(this); 
```

当您单击 getView 中的列表项时

```
 holder.ivIcon.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

         customListView  mcustomListView = (customListView ) mlvItem.getAdapter();
mcustomListView .notifyDataSetChanged();

      }
  } 
```

# gwt - 如何取消选择 CellList Gwt 中的单元格

> ID：15808711
> 
> 赞同：2
> 
> 时间：2013-04-04T10:32:18.750
> 
> 标签：gwt, gwt2

我在 GWT 中有一个 CellList，我需要在不使用 selectionchange 处理程序的情况下单击一个链接时取消选择单元格。在这种情况下有人可以帮忙吗？

```
CellList<MyClass> cellList;    
SingleSelectionModel<MyClass> lSelectionModel;

final SingleSelectionModel<MyClass> lSelectionModel = 
    new SingleSelectionModel<MyClass>();
this.cellList.setSelectionModel(lSelectionModel);

public void setSelected(final MyClass pClass) {

        Anchor lLink = new Anchor();
        lLink.addClickHandler(new ClickHandler() {
            @Override
            public void onClick(ClickEvent pEvent) {
        //Here i need to deselect the cell(Myclass)

            }
        }); 
```

}

提前致谢，

拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:15:47.067

使用`SingleSelectionModel`, 就像这样简单：

```
lLink.addClickHandler(new ClickHandler() {
  @Override
  public void onClick(ClickEvent pEvent) {
    MyClass selected = lSelectionModel.getSelectedObject();
    if (selected != null) {
      lSelectionModel.setSelected(selected, false); 
    }
}); 
```

# java - 根据拆分排序列表

> ID：15808715
> 
> 赞同：2
> 
> 时间：2013-04-04T10:32:24.333
> 
> 标签：java, android, string, sorting, split

我有一个`List`很长的`Strings`：

```
test:test:test:test:test:test:test:ABC:test:test:test:test:test:test:  
test:test:test:test:test:test:test:DEF:test:test:test:test:test:test:  
test:test:test:test:test:test:test:GHI:test:test:test:test:test:test:  
test:test:test:test:test:test:test:JKL:test:test:test:test:test:test:  
test:test:test:test:test:test:test:MNO:test:test:test:test:test:test: 
```

假设所有测试彼此不同。我想根据大写字母所在的特定位置对这些字符串进行排序。

```
 for (int i = 0; i < aList.size(); i++) {
        System.out.println(list.get(i).toString().split(":")[7]);
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T10:35:17.603

使用[`Collections.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort(java.util.List,%20java.util.Comparator))并提供自定义[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)来强加您想要的订购标准。

这是一个示例（检查空值和省略的意外格式）：

```
List<String> myList;
Collections.sort(myList, new Comparator<String>(){
    @Override
    public int compare(String o1, String o2) {
        String text1 = o1.split(":")[7];
        String text2 = o2.split(":")[7];
        return text1.compareTo(text2);
    }
}); 
```

# jquery - 如何在 MVC 中使用 Jquery 更改标签的标题？

> ID：15808716
> 
> 赞同：0
> 
> 时间：2013-04-04T10:32:24.783
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, razor

我正在开发 MVC 应用程序。

我想在更改下拉项时更改标签的标题。我在列表中有 Cheque、DD 和 RTGS 选项，下面的代码用于显示这些项目。

```
@Html.LabelFor(model => model.PaymentMode, "Payment Mode")          
@Html.DropDownList("PaymentMode", new SelectList(ViewBag.PaymentModes, Model)) 
```

当用户更改付款方式时让我们说检查到 DD 那么下面的项目标签实体应该改变，比如从检查号 -> DD 号。

```
 @Html.LabelFor(model => model.ChequeNo,"Cheque No.")
   @Html.EditorFor(model => model.ChequeNo, new { style = "width:138px;" }) 
```

我写了下面的jquery，但它没有用。它改变了字段标题而不是标签标题，如何做到这一点？

```
 $(document).ready(function () 
    {
        $('#PaymentMode').change(function () {

            $('#ChequeNo').prop('ChequeNo', 'DD No');
            var elementTitle = document.getElementById('ChequeNo').title;
            alert(elementTitle);
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:44:34.143

我认为您正在尝试**更改与 input 关联的标签的文本**，如果我是正确的，那么它就像这样简单：

```
$("#ChequeNo").prev("label").html('DD No'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:43:59.923

实际上你试图访问的标签没有'id'属性，所以你需要寻找标签的'for'属性，即

```
$('label[for="ChequeNo"]').html('DD No.'); 
```

希望这可以帮助..：）

# python - 从 python 连接独立的 hbase

> ID：15808717
> 
> 赞同：2
> 
> 时间：2013-04-04T10:32:33.563
> 
> 标签：python, hadoop, hbase, thrift

我正在开发一个以 hbase 作为后端的 python 应用程序。我已经安装了 hbase，它的 shell 运行良好。请注意，我还没有安装 hadoop，因为我没有节点。但是因为令人印象深刻的架构决定使用 hbase。

现在的问题是，我无法从诸如happybase之类的库或直接使用thrift的python连接到hbase。我也试过这个 - [http://binesh.in/hbase/connecting-to-a-remote-standalone-hbase/](http://binesh.in/hbase/connecting-to-a-remote-standalone-hbase/)，但没用。请帮助我。

更新 -

```
> >>> import happybase
> >>> con =happybase.Connection('localhost') Traceback (most recent call last):   File "<stdin>", line 1, in <module>   File
> "/usr/local/lib/python2.7/dist-packages/happybase/api.py", line 121,
> in __init__
>     self.open()   File "/usr/local/lib/python2.7/dist-packages/happybase/api.py", line 138,
> in open
>     self.transport.open()   File "build/bdist.linux-i686/egg/thrift/transport/TTransport.py", line 149,
> in open   File
> "build/bdist.linux-i686/egg/thrift/transport/TSocket.py", line 99, in
> open thrift.transport.TTransport.TTransportException: Could not
> connect to localhost:9090
> >>> 
```

与直接调用几乎相同的prbm。总之，我只想在我的 python 应用程序中使用 hbase 数据库而不是 mongodb。没有hadoop，没有hdfs等。这是可行的还是我试图实现一些不可能的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T07:00:07.287

Trift 服务器必须启动并运行。您的连接也必须打开：

```
nohup hbase thrift start & 
```

使用前在python中打开连接。例子：

```
import happybase
connection = happybase.Connection('localhost', autoconnect=False)
connection.open() 
```

# android - 控制相机以纵向拍照不会旋转最终图像

> ID：15808719
> 
> 赞同：60
> 
> 时间：2013-04-04T10:32:39.333
> 
> 标签：android, android-camera, android-orientation

我正在尝试控制 Android 相机在纵向应用程序中拍照，但是当我保存图片时，它是横向的。我已经用 [`setCameraDisplayOrientation()`](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)方法将图像旋转了 90 级，但不起作用。

然后我找到了这篇[文章](https://stackoverflow.com/questions/11023696/setrotation90-to-take-picture-in-portrait-mode-does-not-work-on-samsung-device)，但是`TAG_ORIENTATION`是`0`（未定义）。如果我抓住这个值并应用一个旋转值，也不起作用。

如何拍摄纵向照片并以良好的方向保存？

```
 /** Initializes the back/front camera */
private boolean initPhotoCamera() {
    try {
        camera = getCameraInstance(selected_camera);

        Camera.Parameters parameters = camera.getParameters();
   //           parameters.setPreviewSize(width_video, height_video);
   //           parameters.set("orientation", "portrait");
   //           parameters.set("rotation", 1);
   //           camera.setParameters(parameters);

        checkCameraFlash(parameters);

   //            camera.setDisplayOrientation( 0);
        setCameraDisplayOrientation(selected_camera, camera);

        surface_view.getHolder().setFixedSize(width_video, height_video);

        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(width_video, height_video);
        surface_view.setLayoutParams(lp);

        camera.lock();

        surface_holder = surface_view.getHolder();
        surface_holder.addCallback(this);
        surface_holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        setPreviewCamera();

    } catch (Exception e) {
        Log.v("RecordVideo", "Could not initialize the Camera");
        return false;
    }
    return true;
}

public void setCameraDisplayOrientation(int cameraId, Camera camera) {
     Camera.CameraInfo info = new Camera.CameraInfo();
     Camera.getCameraInfo(cameraId, info);
     int rotation = getWindowManager().getDefaultDisplay().getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);
 }

     public static Bitmap rotate(Bitmap bitmap, int degree) {
    int w = bitmap.getWidth();
    int h = bitmap.getHeight();

    Matrix mtx = new Matrix();
   //       mtx.postRotate(degree);
    mtx.setRotate(degree);

    return Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, true);
}

@Override
public void onPictureTaken(byte[] data, Camera camera) {

    String timeStamp = Calendar.getInstance().getTime().toString();
    output_file_name = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM) + File.separator + timeStamp + ".jpeg";

    File pictureFile = new File(output_file_name);
    if (pictureFile.exists()) {
        pictureFile.delete();
    }

    try {
        FileOutputStream fos = new FileOutputStream(pictureFile);
        fos.write(data);

        Bitmap realImage = BitmapFactory.decodeFile(output_file_name);

        ExifInterface exif=new ExifInterface(pictureFile.toString());

        Log.d("EXIF value", exif.getAttribute(ExifInterface.TAG_ORIENTATION));
        if(exif.getAttribute(ExifInterface.TAG_ORIENTATION).equalsIgnoreCase("6")){
            realImage= rotate(realImage, 90);
        } else if(exif.getAttribute(ExifInterface.TAG_ORIENTATION).equalsIgnoreCase("8")){
            realImage= rotate(realImage, 270);
        } else if(exif.getAttribute(ExifInterface.TAG_ORIENTATION).equalsIgnoreCase("3")){
            realImage= rotate(realImage, 180);
        } else if(exif.getAttribute(ExifInterface.TAG_ORIENTATION).equalsIgnoreCase("0")){
            realImage= rotate(realImage, 45);
        }

        boolean bo = realImage.compress(Bitmap.CompressFormat.JPEG, 100, fos);

        fos.close();

        Log.d("Info", bo + "");

    } catch (FileNotFoundException e) {
        Log.d("Info", "File not found: " + e.getMessage());
    } catch (IOException e) {
        Log.d("TAG", "Error accessing file: " + e.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-04T13:29:48.953

问题是当我保存图像时我做得不好。

```
@Override
public void onPictureTaken(byte[] data, Camera camera) {

    String timeStamp = new SimpleDateFormat( "yyyyMMdd_HHmmss").format( new Date( ));
    output_file_name = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM) + File.separator + timeStamp + ".jpeg";

    File pictureFile = new File(output_file_name);
    if (pictureFile.exists()) {
        pictureFile.delete();
    }

    try {
        FileOutputStream fos = new FileOutputStream(pictureFile);

        Bitmap realImage = BitmapFactory.decodeByteArray(data, 0, data.length);

        ExifInterface exif=new ExifInterface(pictureFile.toString());

        Log.d("EXIF value", exif.getAttribute(ExifInterface.TAG_ORIENTATION));
        if(exif.getAttribute(ExifInterface.TAG_ORIENTATION).equalsIgnoreCase("6")){
            realImage= rotate(realImage, 90);
        } else if(exif.getAttribute(ExifInterface.TAG_ORIENTATION).equalsIgnoreCase("8")){
            realImage= rotate(realImage, 270);
        } else if(exif.getAttribute(ExifInterface.TAG_ORIENTATION).equalsIgnoreCase("3")){
            realImage= rotate(realImage, 180);
        } else if(exif.getAttribute(ExifInterface.TAG_ORIENTATION).equalsIgnoreCase("0")){
            realImage= rotate(realImage, 90);
        }

        boolean bo = realImage.compress(Bitmap.CompressFormat.JPEG, 100, fos);

        fos.close();

        ((ImageView) findViewById(R.id.imageview)).setImageBitmap(realImage);

        Log.d("Info", bo + "");

    } catch (FileNotFoundException e) {
        Log.d("Info", "File not found: " + e.getMessage());
    } catch (IOException e) {
        Log.d("TAG", "Error accessing file: " + e.getMessage());
    }
}

public static Bitmap rotate(Bitmap bitmap, int degree) {
    int w = bitmap.getWidth();
    int h = bitmap.getHeight();

    Matrix mtx = new Matrix();
   //       mtx.postRotate(degree);
    mtx.setRotate(degree);

    return Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, true);
} 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-09-18T14:04:36.800

*setCameraDisplayOrientation()*方法允许您更改**预览**的显示方式，而**不会影响**图像的记录方式 ( [source](http://developer.android.com/training/camera/cameradirect.html#TaskOrientation) )。

为了改变实际记录的图像，您需要设置*Camera的**旋转*参数。你这样做：

 *```
//STEP #1: Get rotation degrees
Camera.CameraInfo info = new Camera.CameraInfo();
Camera.getCameraInfo(Camera.CameraInfo.CAMERA_FACING_BACK, info);
int rotation = mActivity.getWindowManager().getDefaultDisplay().getRotation();
int degrees = 0;
switch (rotation) {
    case Surface.ROTATION_0: degrees = 0; break; //Natural orientation
        case Surface.ROTATION_90: degrees = 90; break; //Landscape left
        case Surface.ROTATION_180: degrees = 180; break;//Upside down
        case Surface.ROTATION_270: degrees = 270; break;//Landscape right
    }
int rotate = (info.orientation - degrees + 360) % 360;

//STEP #2: Set the 'rotation' parameter
Camera.Parameters params = mCamera.getParameters();
params.setRotation(rotate); 
mCamera.setParameters(params); 
```

您的解决方案是一种解决方法，因为您在已记录图像之后对其进行了修改。此解决方案更简洁，并且在保存图像之前不需要所有这些“if”语句。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-10-01T12:21:20.313

使用前置摄像头时，您可以使用以下方法正确生成预览。

**此代码进入相机预览的 surfaceChanged 方法**

```
@Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
     int angleToRotate=CommonMethods.getRoatationAngle(mActivity, Camera.CameraInfo.CAMERA_FACING_FRONT);
     mCamera.setDisplayOrientation(angleToRotate);
} 
```

**这段代码可以放到静态类中**

```
 /**
     * Get Rotation Angle
     * 
     * @param mContext
     * @param cameraId
     *            probably front cam
     * @return angel to rotate
     */
    public static int getRoatationAngle(Activity mContext, int cameraId) {
        android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
        android.hardware.Camera.getCameraInfo(cameraId, info);
        int rotation = mContext.getWindowManager().getDefaultDisplay().getRotation();
        int degrees = 0;
        switch (rotation) {
        case Surface.ROTATION_0:
            degrees = 0;
            break;
        case Surface.ROTATION_90:
            degrees = 90;
            break;
        case Surface.ROTATION_180:
            degrees = 180;
            break;
        case Surface.ROTATION_270:
            degrees = 270;
            break;
        }
        int result;
        if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
            result = (info.orientation + degrees) % 360;
            result = (360 - result) % 360; // compensate the mirror
        } else { // back-facing
            result = (info.orientation - degrees + 360) % 360;
        }
        return result;
    } 
```

**您可以通过这种方式旋转图像。这仅在拍摄图像并且我们即将保存图像时使用**

```
public static Bitmap rotate(Bitmap bitmap, int degree) {
        int w = bitmap.getWidth();
        int h = bitmap.getHeight();

        Matrix mtx = new Matrix();
        mtx.postRotate(degree);

        return Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, true);
    } 
```

**将用于拍照的方法**

```
 @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        int angleToRotate = getRoatationAngle(MainActivity.this, Camera.CameraInfo.CAMERA_FACING_FRONT);
        // Solve image inverting problem
        angleToRotate = angleToRotate + 180;
        Bitmap orignalImage = BitmapFactory.decodeByteArray(data, 0, data.length);
        Bitmap bitmapImage = rotate(orignalImage, angleToRotate);
    } 
```

`bitmapImage`包含正确的图像。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-09-20T11:17:36.670

这个应该可以，ExifInterface 不适用于所有制造商，因此请改用 CameraInfo，只需让相机以其默认旋转捕获图像，然后在 PictureCallback 上旋转结果数据

```
private PictureCallback mPicture = new PictureCallback() {
    @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        File dir = new File(Constant.SDCARD_CACHE_PREFIX);
        if (!dir.exists()) {
            dir.mkdirs();
        }
        File pictureFile = new File(Constant.SDCARD_TAKE_PHOTO_CACHE_PREFIX);                       
        try {
            Bitmap realImage = BitmapFactory.decodeByteArray(data, 0, data.length);
            android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
            android.hardware.Camera.getCameraInfo(mCurrentCameraId, info);
            Bitmap bitmap = rotate(realImage, info.orientation);

            FileOutputStream fos = new FileOutputStream(pictureFile);               
            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos);
            fos.close();                
        } catch (FileNotFoundException e) {
            Log.d(TAG, "File not found: " + e.getMessage());
        } catch (IOException e) {
            Log.d(TAG, "Error accessing file: " + e.getMessage());
        }

        resultFileUri = Uri.fromFile(pictureFile);
        startEffectFragment();
    }
};

public static Bitmap rotate(Bitmap bitmap, int degree) {
    int w = bitmap.getWidth();
    int h = bitmap.getHeight();

    Matrix mtx = new Matrix();
    mtx.postRotate(degree);

    return Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, true);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-13T14:23:03.810

当您的布局固定为纵向模式时，这是最好的方法（下面提到）。

```
@Override
protected void onResume() {
    super.onResume();
    if (!openCamera(CameraInfo.CAMERA_FACING_BACK)) {
        alertCameraDialog();
    }
    if (cOrientationEventListener == null) {
        cOrientationEventListener = new OrientationEventListener(this, SensorManager.SENSOR_DELAY_NORMAL) {

            public void onOrientationChanged(int orientation) {

                // determine our orientation based on sensor response
                int lastOrientation = mOrientation;

                    if (orientation == ORIENTATION_UNKNOWN) return;
                    Camera.CameraInfo info =
                            new android.hardware.Camera.CameraInfo();
                    android.hardware.Camera.getCameraInfo(cameraId, info);
                    orientation = (orientation + 45) / 90 * 90;
                    int rotation = 0;
                    if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
                        rotation = (info.orientation - orientation + 360) % 360;
                    } else {  // back-facing camera
                        rotation = (info.orientation + orientation) % 360;
                    }
                        Parameters params = camera.getParameters();
                        params.setRotation(rotation);
                        camera.setParameters(params);

            }

            };

        }

    if (cOrientationEventListener.canDetectOrientation()) {
        cOrientationEventListener.enable();
    }
    } 
```

您将使用 OrientEventListener 并实现此回调方法。每当方向发生变化时都会调用 onOrientationChanged，因此您的相机旋转将被设置，并且图片将在您保存时旋转。

```
 private PictureCallback myPictureCallback_JPG = new PictureCallback() 

       { 

   @Override
   public void onPictureTaken(byte[] arg0, Camera arg1) {
    try {  
               File pictureFile = getOutputMediaFile();
           if (pictureFile == null) {
               return;
           }
               FileOutputStream fos = new FileOutputStream(pictureFile);
               fos.write(arg0);
               fos.close();     
              camera.startPreview();
       } catch (Exception e) {
           e.printStackTrace();
       }
   } 
 }; 
```

获取输出媒体文件

```
 private static File getOutputMediaFile() {
            File mediaStorageDir = new File(
               Environment

         .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
            "MyCameraApp");
         if (!mediaStorageDir.exists()) {
        if (!mediaStorageDir.mkdirs()) {
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }
    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
            .format(new Date());
    File mediaFile;
    mediaFile = new File(mediaStorageDir.getPath() + File.separator
            + "IMG_" + timeStamp + ".jpg");

    return mediaFile;
  } 
```

来源 [这里](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRotation%28int%29)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-30T03:37:15.470

我没有代表发表评论，所以我不得不留下另一个答案，尽管 Nvhausid 的答案很棒并且值得称赞。简单、优雅，它适用于三星设备上的前置和后置摄像头，而 Exif 和 Media Cursor 不适用。

对我来说，唯一缺少的答案是处理来自面向用户的相机的镜像。

这是代码更改：

```
Bitmap bitmap = rotate(realImage, info.orientation, info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT); 
```

以及新的旋转方法：

```
public static Bitmap rotate(Bitmap bitmap, int degree, boolean mirror) {
    int w = bitmap.getWidth();
    int h = bitmap.getHeight();

    Matrix mtx = new Matrix();
    if(mirror)mtx.setScale(1,-1);
    mtx.postRotate(degree);

    return Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, true);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-02T08:16:25.023

我为您找到了有力的答案，我只是遇到了同样的问题并在不保存文件的情况下解决了它。解决方案是注册一个 OrientationEventListener 以在它发生变化时获取方向。[http://www.androidzeitgeist.com/2013/01/fixing-rotation-camera-picture.html](http://www.androidzeitgeist.com/2013/01/fixing-rotation-camera-picture.html)这里给出细节。我的代码如下：

```
private CameraOrientationListener myOrientationListener;
private int rotation;    

protected void onCreate(Bundle savedInstanceState) {
  setListeners();
  rotation = setCameraDisplayOrientation(CameraActivity.this, Camera.getNumberOfCameras()-1, mCamera);
}

public void setListeners(){
    myOrientationListener = new CameraOrientationListener(this);
    if(myOrientationListener.canDetectOrientation())
        myOrientationListener.enable();
}

public static int setCameraDisplayOrientation(Activity activity, int cameraId, Camera camera) {
     CameraInfo info = new CameraInfo();
     Camera.getCameraInfo(cameraId, info);
     int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);

     return result;
 }

/*
 * record the rotation when take photo
 */
public void takePhoto(){
    myOrientationListener.rememberOrientation();
    rotation += myOrientationListener.getRememberedOrientation();
    rotation = rotation % 360;

    mCamera.takePicture(null, null, mPicture);
}    

class CameraOrientationListener extends OrientationEventListener {
    private int currentNormalizedOrientation;
    private int rememberedNormalizedOrientation;

    public CameraOrientationListener(Context context) {
        super(context, SensorManager.SENSOR_DELAY_NORMAL);
    }

    @Override
    public void onOrientationChanged(int orientation) {
        // TODO Auto-generated method stub
        if (orientation != ORIENTATION_UNKNOWN) {
            currentNormalizedOrientation = normalize(orientation);
        }
    }

    private int normalize(int degrees) {
         if (degrees > 315 || degrees <= 45) {
            return 0;
        }

        if (degrees > 45 && degrees <= 135) {
            return 90;
        }

        if (degrees > 135 && degrees <= 225) {
            return 180;
        }

        if (degrees > 225 && degrees <= 315) {
            return 270;
        }

        throw new RuntimeException("The physics as we know them are no more. Watch out for anomalies.");
    }

    public void rememberOrientation() {
        rememberedNormalizedOrientation = currentNormalizedOrientation;
    }

    public int getRememberedOrientation() {
        return rememberedNormalizedOrientation;
    }
} 
```

希望能帮助到你：）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-23T09:22:24.070

我使用新的 camera2 api 来获取传感器方向，然后相应地旋转它：

```
 private void detectSensorOrientation()
  {
    CameraManager manager = (CameraManager) getSystemService(CAMERA_SERVICE);
    try
    {
      for (String cameraId : manager.getCameraIdList())
      {
        CameraCharacteristics characteristics = manager.getCameraCharacteristics(cameraId);

        // We don't use a front facing camera in this sample.
        Integer facing = characteristics.get(CameraCharacteristics.LENS_FACING);
        if (facing != null && facing == CameraCharacteristics.LENS_FACING_FRONT)
        {
          continue;
        }

        cameraOrientaion = characteristics.get(CameraCharacteristics.SENSOR_ORIENTATION);
      }
    } catch (CameraAccessException e)
    {
      e.printStackTrace();
    }
  } 
```

然后在 cameraOrientation 参数的帮助下，我旋转了我的 cameraPhoto：

```
 private void generateRotatedBitmap()
  {
    if (cameraOrientaion != 0)
    {
      Matrix matrix = new Matrix();
      matrix.postRotate(cameraOrientaion);
      rotatedPhoto =
          Bitmap.createBitmap(cameraPhoto, 0, 0, cameraPhoto.getWidth(), cameraPhoto.getHeight(),
              matrix, true);
      cameraPhoto.recycle();
    }
  } 
```*

# r - R中的2因子因子设计需要立方图

> ID：15808723
> 
> 赞同：2
> 
> 时间：2013-04-04T10:32:59.097
> 
> 标签：r, factorial, anova

是否有任何 R 包可以生成 2 个因子的立方图？我想要类似于本页末尾第一个情节的东西 [http://www.processma.com/resource/factorial_plots.htm](http://www.processma.com/resource/factorial_plots.htm)

可以在 Minitab 中获得此类图。

在包 FrF2 中有命令 cubeplot 但仅适用于 3 个因素。

当然，我可以使用 2 个相同的因子，但想要具有漂亮正方形（而不是立方体）的图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:59:15.123

您可以`cubePlot`从`FrF2`包中使用。它为三个因素的组合效应生成立方图。这里有一个例子：

```
data(BM93.e3.data)  #from BsMD
iMdat <- BM93.e3.data[1:16,2:10]  #only original experiment
colnames(iMdat) <- c("MoldTemp","Moisture","HoldPress","CavityThick","BoostPress",
                     "CycleTime","GateSize","ScrewSpeed", "y")
iM.lm <- lm(y ~ (.)^2, data = iMdat)
cubePlot(iM.lm, "MoldTemp", "HoldPress", "BoostPress") 
```

![在此处输入图像描述](https://i.stack.imgur.com/UnDXa.png)

# ios - 如何删除 UITableView 上的“仅选择颜色”

> ID：15808724
> 
> 赞同：0
> 
> 时间：2013-04-04T10:33:04.033
> 
> 标签：ios, uitableview

我知道如何从`UITableViewCell`with中删除选择颜色

`cell.selectionStyle = UITableViewCellSelectionStyleNone`

但它禁用了它内部视图中的所有“按下时”响应......有没有办法只删除选择颜色？

最好的祝福，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:52:15.323

我根据 Pratik 的评论得到了答案。使用此代码仅删除选择颜色。

```
cell.selectedBackgroundView = [[UIView alloc] init]; 
```

# dotnetnuke - 是否可以仅在 dnn 模块中重置 css

> ID：15808726
> 
> 赞同：1
> 
> 时间：2013-04-04T10:33:13.973
> 
> 标签：dotnetnuke

我制作了一个自定义的 dnn 模块。但是我模块中的元素从 dnn 获取所有样式。是否有可能仅在模块中进行 css 重置以删除所有 dnn 样式并仅应用我的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:38:09.343

这是加载时 DotNetNuke 的 CSS 优先级。

```
DefaultCss: 5
ModuleCss: 10
SkinCss: 15
SpecificSkinCss: 20
ContainerCss: 25
SpecificContainerCss: 30
PortalCss: 35 
```

以上信息取自[**DotNetNuke Wiki - 客户端资源管理 API**](http://www.dotnetnuke.com/Resources/Wiki/Page/Client-Resource-Management-API.aspx#Relative_Order_10)

数字是加载 css 的顺序（5 然后 10 等，默认值为 100，因此这意味着它应该最后加载。

您可以轻松地将自己的 css 文件添加到模块中，或者如果合适，您可以将它们添加到模块中的 module.css 文件中。如果您要使用自己的 CSS/JS 文件，请使用以下代码

```
<%@ Register TagPrefix="dnn" Namespace="DotNetNuke.Web.Client.ClientResourceManagement" Assembly="DotNetNuke.Web.Client" %>    
<dnn:DnnJsInclude runat="server" ID="jsBootstrap" FilePath="~/DesktopModules/MyModuleFolder/js/bootstrap.min.js" />
<dnn:DnnCssInclude runat="server" ID="cssBootstrap" FilePath="~/DesktopModules/MyModuleFolder/css/bootstrap.min.css" /> 
```

如果您是 DotNetNuke 模块开发的新手，我建议您查看 Chris Hammond 的这个模块开发模板（[**Christoc 的 DotNetNuke 模块开发模板**](http://christoctemplate.codeplex.com/)）

阅读他的博客以了解如何使用和安装模板（[**使用 DotNetNuke 7 的新模块开发模板**](http://www.chrishammond.com/blog/itemid/2616/using-the-new-module-development-templates-for-dot.aspx)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T03:55:58.243

我能给你的最好的建议是“css specificity”。使用第一个答案提供的 DNN Wiki 链接，您可以了解 DNN 如何/何时加载每个 .css 文件，但要克服样式渗入您的模块，您需要了解“css 特异性”。

遵循 DNN 使用的加载顺序是一个好主意，因为这样做有好处，例如当您想从皮肤中覆盖模块中的样式时。

您可以最后加载您的自定义模块 css 文件，这可能会有所帮助，但您还应该考虑以更具体的方式实现您的样式，以防止其他 DNN 样式渗入。

例如，您可以将模块 html 包装在 div 标记中，并给它一个 my-foo-module 类。

```
<div class="my-foo-module">
Module content here
</div> 
```

在 html 结构中使用诸如命名空间之类的 css 类将导致您的模块样式优先于加载的任何其他更通用的样式。我不建议使用重置 css 文件，除非您将其限定为仅影响元素在你的 my-foo-module 包装器中。

这里有一些很好的信息，应该可以帮助你..

[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

[https://www.google.com/#bav=on.2,or.r_cp.r_qf.&fp=4977db6ad6ac1fe8&q=%22css+specificity%22](https://www.google.com/#bav=on.2,or.r_cp.r_qf.&fp=4977db6ad6ac1fe8&q=%22css+specificity%22)

最后我要说的是，如果您尝试为您的模块加载第三方 css 库，例如 twitter bootstrap，并且您的皮肤正在使用另一个库，或者根本不使用，这至少可以说是非常具有挑战性的。您不想编辑整个引导库以便为您的模块获得更多“Css 特异性”，因此在这种情况下，我无法提供解决方案，因为我自己正在寻找一个解决方案。

# ember.js - 为不同的对象重用模型

> ID：15808728
> 
> 赞同：3
> 
> 时间：2013-04-04T10:33:17.077
> 
> 标签：ember.js, ember-data

我定义了以下模型：

```
App.Node = DS.Model.extend({
    type: DS.attr('string'),
    name: DS.attr('string')
}); 
```

可以通过`REST`in检索此模型的数据`api/nodes`。

现在我有类似的数据，可以在`api/phonenumbers`. 数据的结构是一样的，所以我想重用模型。我已经定义：

```
App.Phonenumber = App.Node; 
```

但这不起作用。该模型仍在发送请求`api/nodes`。为什么？如何重用模型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:55:41.880

我想`App.Phonenumber = App.Node.extend({});`可能会成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T21:15:56.630

你能问“电话号码是一个节点吗？” 在你的情况下？

如果是，那么扩展是您的解决方案。

如果不是，那么您可能会问“电话号码是否类似于节点？”。

在这种情况下，我会执行以下操作：

```
var genericNameConfig = {
  type : DS.attr('string'),
  name : DS.attr('string')
};

App.Node        = DS.Model.extend(genericNameConfig);
App.Phonenumber = DS.Model.extend(genericNameConfig); 
```

# c++ - 找不到标识符 convertToHSL

> ID：15808731
> 
> 赞同：0
> 
> 时间：2013-04-04T10:33:22.603
> 
> 标签：c++, visual-c++

当我在 main 方法中调用 convertToHSL(c1) 时，我得到一个错误标识符。我不明白我的代码有什么问题。请帮忙。我的代码如下：

```
#include "stdafx.h"
#include "q3.h"
#include <cmath>
#include <iostream>
#include <math.h>

using namespace std; 

int main(int argc, char* argv[])
{
    Color c1(1,1,1);
    HSL h=convertToHSL(c1);

    getchar();
    getchar();
    return 0;
}

Color::Color(){}
Color::Color(float r,float g,float b){
    this->r=r;
    this->g=g;
    this->b=b;
}

Color::~Color(void){}

Color Color::operator+(Color c) {
    return Color(r*c.r,g*c.g,b*c.b);
}

Color Color::operator*(float s) {
    return Color(s*r,s*g,s*b);
}

HSL::HSL() {}
HSL::HSL(float h,float s,float l) {
    this->h=h;
    this->s=s;
    this->l=l;
}

HSL::~HSL(void){}

HSL convertToHSL(Color const& c) {
    return HSL(0,0,0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:38:13.177

如果`convertToHSL`未声明它在 main() 上是未知的：在所有其他函数下方的文件末尾替换 main()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:38:37.170

在您调用`convertToHSL`(in `main`) 时，您的编译器根本不知道它存在，因为它还没有*“看到”*它（它还没有被声明）。

所以为了能够从 调用这个函数`main`，要么移动`convertHSL`上面 main 的定义，或者至少在 main 上面预先声明它（不定义它）。或者，如果要从其他文件中使用它，也将其声明放入头文件中（其定义可能放入单独的源文件中，或者`inline`直接在头文件中使用说明符）。

但是，如果这一切并不能告诉您太多，您应该更深入地研究 C++ 的基础知识。

# django - 管理表单中的自定义 django 字段

> ID：15808739
> 
> 赞同：1
> 
> 时间：2013-04-04T10:33:35.920
> 
> 标签：django, django-forms, django-admin, django-widget, django-models

我正在尝试为 Django 管理后端创建表单字段在数据库中它应该是 CharField 字段，包含长度为 24*7 的“0”和“1”值。在管理面板中，我希望将它们视为 7 个字段，每个字段有 24 个复选框。编码：

模型.py：

```
from django.db import models
from places.widgets import *
from places.fields import *

class Place(models.Model):
    …
    time =          HoursWorkByWeekField()
    … 
```

字段.py

```
from django.forms import fields
from django.db import models

from places.widgets import HoursWorkByWeekWidget

class HoursWorkByWeekField(models.CharField):
    widget = HoursWorkByWeekWidget

    def __init__(self):
        super(HoursWorkByWeekField, self).__init__(max_length=24*7, min_length=24*7)

    def to_python(self, value):
        return list(value)

    def get_db_prep_value(self, value):
        result = []
        for i in range(24*7):
            if value[i] :
                result += ['1']
            else :
                result += ['0']
        return ''.join(result) 
```

小部件.py

```
from django.forms import widgets

class HoursWorkByDayWidget(widgets.CheckboxSelectMultiple):
    def render(self, name, attrs=None):
        choices = range(0,24,1)
        return widgets.CheckboxSelectMultiple.render(self, name, attrs, choices)

class HoursWorkByWeekWidget(widgets.MultiWidget):
    def __init__(self, attrs=None):
        widgets = (
            HoursWorkByDayWidget(),
            HoursWorkByDayWidget(),
            HoursWorkByDayWidget(),
            HoursWorkByDayWidget(),
            HoursWorkByDayWidget(),
            HoursWorkByDayWidget(),
            HoursWorkByDayWidget(),
        )
        super(HoursWorkByWeekWidget, self).__init__(widgets, attrs) 
```

当我尝试同步数据库时出现错误：

```
TypeError: Error when calling the metaclass bases unhashable type: 'dict' 
```

# css - div下可平铺背景的奇怪行为

> ID：15808741
> 
> 赞同：0
> 
> 时间：2013-04-04T10:33:44.473
> 
> 标签：css, background, behavior

我在 html 页面中有一个可平铺的木纹作为背景。在 Photoshop 或任何其他软件中查看时，背景看起来非常无缝，但在 html 页面上，它在我的主要 div 元素开始和结束的位置看起来不连续。

这是一个预览：http: [//i.imgur.com/eTQthA2.png](http://i.imgur.com/eTQthA2.png)

这种异常在不同的浏览器中持续存在。（我已经在最新版本的 Firefox、Chrome 和 IE 中进行了测试。）这背后的原因可能是什么？

如果您想查看代码的特定部分，请告诉我。

**编辑：**

解决了这个问题。当被要求发布 CSS 时，我注意到我使用了选择器主体、html 来应用背景图像。从选择器中删除 html 确实有点作用。

CSS：

```
body, html {
  margin: 0;
  padding: 0;
  font-size: 13px;
  font-family: 'Open Sans', sans-serif;
  color: #455d76;
  background-image: url("images/bg.png");
  background-repeat: repeat-x repeat-y;
  text-shadow: 0 1px rgba(255, 255, 255, 0.8);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:37:46.917

首先，无论何时提出问题，您都应该在此处发布您的代码，而不是提供指向预览图像或您的网站的链接，因为这让我们很难解决您的问题。

来到你的问题，从图像看起来你正在使用`background-image`不同元素的属性，例如`div`for ，所以改为在你的 CSS 中为标签`header, main, and footer`声明该属性`body`

```
body {
   background-image: url('whatever.png');
   background-repeat: repeat;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:01:35.037

修复了问题。我在指定背景属性时使用了“body，html”作为选择器。从选择器中删除“html”（即只留下正文）起到了作用。

（感谢 Alien 先生，您对不同元素（即本例中的 body 和 html）声明的 background-image 属性是正确的。）

感谢所有回答/评论的人。:)

# c++ - 检查游戏是否结束的功能

> ID：15808743
> 
> 赞同：0
> 
> 时间：2013-04-04T10:33:52.650
> 
> 标签：c++

通过查看以下解决方案，有人可以告诉我如何实现检查游戏是否结束的功能吗？我通过创建“int checkEndGame”来尝试此操作，该“int checkEndGame”循环通过棋盘并返回 1 或 0，但它不起作用。

标题：

```
#include <iostream>
#include <string>
#include <time.h>

int generations;
int boardWidth;
int boardHeight;

char** board;
char** boardTmp;

char deadOrAlive[] = {' ', 'x'};
char dead = deadOrAlive[0];
char alive = deadOrAlive[1];

char lookLeft(int i, int j)
{
    if ( i == 0)
    {
        return dead;
    }

    return board[i - 1][j];
}

char lookRight(int i, int j)
{
    if (i == boardWidth - 1)
    {
        return dead;
    }

    return board[i + 1][j];
}

char lookUp(int i, int j)
{
    if (j == 0)
    {
        return dead;
    }

    return board[i][j - 1];
}

char lookDown(int i, int j)
{
    if (j == boardHeight - 1)
    {
        return dead;
    }

    return board[i][j + 1];
}

char lookUpLeft(int i, int j)
{
    if (i == 0 || j == 0)
    {
        return dead;
    }

    return board[i - 1][j - 1];
}

char lookUpRight(int i, int j)
{
    if(i == boardWidth - 1 || j == 0)
    {
        return dead;
    }

    return board[i + 1][j + 1];
}

char lookDownLeft(int i, int j)
{
    if (j == boardHeight - 1 || i == 0)
    {
        return dead;
    }

    return board[i - 1][j + 1];
}

char lookDownRight(int i, int j)
{
    if (j == boardHeight - 1 || i == boardWidth - 1)
    {
        return dead;
    }

    return board[i + 1][j + 1];
}

char ans;

void init();
void setBoard();
void showBoard();
void verifyDeadOrAlive();
int getNeighbors(int i, int j);
void swap();
void sleep(unsigned int mseconds);
int checkEndGame();
void playGame(); 
```

C++：

```
#include "stdafx.h"
#include "gameoflife.h"

using namespace std;

void init()
{
    cout << "How many generations would you like to cycle through? ";
    cin >> generations;

    cout << "Specify a width for the board: ";
    cin >> boardWidth;

    cout << "Specify a height for the board: ";
    cin >> boardHeight;
}

void setBoard()
{
    srand(time(0));

    board = new char*[boardWidth];
    boardTmp = new char*[boardWidth];

    for (int i = 0; i < boardWidth; ++i)
    {
        board[i] = new char[boardHeight];
        boardTmp[i] = new char[boardHeight];

        for (int j = 0; j < boardHeight; ++j)
        {
            board[i][j] = deadOrAlive[rand() % generations];
            boardTmp[i][j] = ' ';
        }
    }
}

void showBoard()
{
    system("cls");

    for (int j = 0; j < boardHeight; ++j)
    {
        for (int i = 0; i < boardWidth; ++i)
        {
            cout << board[i][j];
        }

        cout << endl;
    }
}

void verifyDeadOrAlive()
{
    for (int j = 0; j < boardHeight; ++j)
    {
        for (int i = 0; i < boardWidth; ++i)
        {
            int neighbors = getNeighbors(i, j);

            if (board[i][j] == alive)
            {
                if (neighbors < 2 || neighbors > 3)
                {
                    boardTmp[i][j] = dead;
                }
                else
                {
                    boardTmp[i][j] = alive;
                }
            }
            else
            {
                if (neighbors == 3)
                {
                    boardTmp[i][j] = alive;
                }
                else
                {
                    boardTmp[i][j] = dead;
                }
            }
        }
    }

    swap();
}

int getNeighbors(int i, int j)
{
    int x = 0;

    if (lookLeft(i, j) == alive)
    {
        x++;
    }
    if (lookRight(i, j) == alive)
    {
        x++;
    }
    if (lookUp(i, j) == alive)
    {
        x++;
    }
    if (lookDown(i, j) == alive)
    {
        x++;
    }
    if (lookUpLeft(i, j) == alive)
    {
        x++;
    }
    if (lookUpRight(i, j) == alive)
    {
        x++;
    }
    if (lookDownLeft(i, j) == alive)
    {
        x++;
    }
    if (lookDownRight(i, j) == alive)
    {
        x++;
    }

    return x;
}

void swap()
{
    char** tmp = board;
    board = boardTmp;
    boardTmp = tmp;
}

void sleep(unsigned int mseconds)
{
    clock_t goal = mseconds + clock();
    while (goal > clock());
}

int checkEndGame()
{
    for (int j = 0; j < boardHeight; ++j)
    {
        for (int i = 0; i < boardWidth; ++i)
        {
            if (board[i][j] == dead)
            {
                return 1;
            }
            else
            {
                return 0;
            }
        }
    }
}

void playGame()
{
    init();

    setBoard();

    do
    {
        showBoard();

        sleep(500);

        verifyDeadOrAlive();

        checkEndGame();
    }
    while (checkEndGame == 0);
}

int main()
{
    do
    {
        playGame();

        cout << "Would you like to play again? y/n: ";
        cin >> ans;

        system("cls");
    }
    while (ans == 'Y' || ans == 'y');

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:37:50.547

你要这个：

```
int checkEndGame()
{
    for (int j = 0; j < boardHeight; ++j)
    {
        for (int i = 0; i < boardWidth; ++i)
        {
            if (board[i][j] == alive)
                return 0;
        }
    }
    return 1;
} 
```

您的函数在看到一个*死*单元格的那一刻返回，这是不正确的。如果您看到一个活细胞，您可以中止。但除此之外，您需要检查每个单元格。

还：

```
 checkEndGame();
    }
    while (checkEndGame == 0); 
```

被打破。`checkEndGame`永远不会为零，因为它是指向函数的指针。你要：

```
}
while (checkEndGame() == 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:40:03.730

a 你的功能应该是这样的：

```
int checkEndGame()
 {
 for (int j = 0; j < boardHeight; ++j)
  {
    for (int i = 0; i < boardWidth; ++i)
    {
        if (board[i][j] == alive){return 0; }
    }
  }

 return 1;
} 
```

因为你要么找到“活着”并说游戏还没有结束，要么必须穿过洞板然后说游戏已经结束，因为你还没有找到“活着”。

如前所述：

```
while(checkEndGame==0) 
```

不运行函数来查看返回值是什么，这样做只是检查函数的内存地址是否为 0（除非您分配它，否则它肯定永远不会是）。

要运行该函数并查看您必须编写的返回值：

```
while(checkEndGame()==0) 
```

（注意末尾的“（）”）

# silverlight - Silverlight RIA 服务输出缓存

> ID：15808752
> 
> 赞同：0
> 
> 时间：2013-04-04T10:34:16.730
> 
> 标签：silverlight, caching, wcf-ria-services

我们有一个基于 WCF RIA 服务的项目。想象一下，我们有一个传入多个参数的方法，并根据参数生成不同的项目集，例如：

```
 IQueryable<PresentationEntity> GetEntities(DateTime startDate, DateTime endDate, int maxCount)
{
...
} 
```

问题是为该方法设置缓存以根据参数值缓存所有输出的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:19:38.433

我之前通过简单地将所有参数连接在一起形成一个字符串来完成此操作，该字符串将用作您的缓存键。

需要注意的一些事项，请考虑：

1.  对于您可能传入的任何对象，您都需要覆盖 ToString() 以便将对象唯一地表示为字符串。可能只是将属性连接在一起或使用类似 Java 的哈希码属性。

2.  顺序可能会引入错误，因此请确保每次都以相同的顺序将它们连接在一起。

3.  您可以探索一些允许您编写横切代码的 AOP 框架。这只是意味着您不必在每个 WCF 调用的顶部使用大量“if (!InCache(key)) { ... }”语句来乱扔代码。

# excel - 根据从用户获取的日期和数据库从 Excel 中的 Sql Db 复制数据

> ID：15808761
> 
> 赞同：1
> 
> 时间：2013-04-04T10:34:46.660
> 
> 标签：excel, vba

我正在制作一些宏并从用户那里获取 datea 和 db。在此基础上，我正在从 db 获取数据。这是我的代码，如果您对此有任何解决方案，请查看并分享。

```
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset
Function GetConnectionString() As String
Dim strCn As String
strCn = "Provider=sqloledb;"
strCn = strCn & "Data Source=" & Range("Server") & ";"
strCn = strCn & "Initial Catalog=" & Range("Database") & ";"
If (Range("UserID") <> "") Then
strCn = strCn & "User ID=" & Range("UserID") & ";"
strCn = strCn & "password=" & Range("Pass")
Else
   strCn = strCn & "Integrated Security = SSPI"
End If
    GetConnectionString = strCn
End Function
  Sub Test()
   ActiveWorkbook.Sheets("Sheet1").Activate
Dim ws As Worksheet
Dim Sql As String
Dim d As String
d = Range("A2").Value
d = Format(d, "yyyy-mm-dd")
    cn.ConnectionTimeout = 100
    cn.Open GetConnectionString()
    Sql = "select * from config where convert(date,logadate,103)='"& d &"'"
    ExecInsert (Sql)
        Set rs.ActiveConnection = cn
        rs.Open Sql
        ActiveWorkbook.Sheets("Sheet2").Activate
        Dim ws1 As Worksheet
        **Range("A2").CopyFromRecordset (rs)**
        cn.Close

End Sub

Sub ExecInsert(selectquery As String)
'End Sub

   Dim cmd As New ADODB.Command
   cmd.CommandText = selectquery
    cmd.CommandType = adCmdText
    cmd.ActiveConnection = cn
    cmd.Execute

End Sub 
```

**Range("A2").CopyFromRecordset (rs)**这是我遇到错误的地方

运行类型错误“430”类不支持自动化或不支持预期的接口我拥有所有的 dll 并注册了它们。我什至没有参考资料。

如果有人遇到这个问题，请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:12:57.870

SQL Server 没有调用函数`Format`（MS Access 和 VB 有）。

在 SQL Server 中，您将使用`Convert`（首先验证 SQL Server 数据类型是 datetime，而不是 varchar 或 char）

或者，如果您的日期选择器以正确的格式返回数据，您可以直接将其添加：

```
q = q & " where logdate='" & d & "'" 
```

请注意，如果您有时间组件，则需要将其剥离。

所以...

1.  试试上面的代码
2.  验证数据库是 SQL Server 并且数据类型是 DATETIME
3.  检查日期选择器的内容作为字符串并验证其格式

# javascript - Javascript - 无排序排序

> ID：15808765
> 
> 赞同：0
> 
> 时间：2013-04-04T10:34:56.117
> 
> 标签：javascript, sorting, multidimensional-array

Javascript中的问题

我之前曾问过这个问题[Javascript 2D array sorting - by numeric value](https://stackoverflow.com/questions/15612111/javascript-2d-array-sorting-by-numerical-value) with a solution 使用 sort 函数提供的解决方案，我曾尝试在没有成功的情况下使用该解决方案。结果发现排序功能在我使用的工具中不正确，它对 5 个值进行排序，然后停止工作 - 并且使用负值等不工作。与他们的开发团队交谈并被告知升级 - 不是一个选项。

Tl:dr - 我需要使用内置的排序功能进行排序。

我有两个数组

```
values = [1000, 2356, 3456778, 7645748, -2324, 348845.45, -2345666]

labels = ["ValA", "ValB", "ValC", "ValD", "ValE", "ValF", "ValG", "ValH"] 
```

这些需要结合起来显示 [1000,ValA, etc]，其中最大值首先出现。

**如果没有内置的排序功能**，我不知道如何继续。我尝试使用 Math.Max 循环遍历数组，但是当我组合这两个数组时，函数停止工作。

我不确定是将这两个单独的数组组合起来，还是将它们分开以便排序更简单，记住原始索引和标签的链接。

欢迎任何想法或问题，我真的很难过，而不是贸易开发人员，所以肯定有一些善良的灵魂可以支持我。

谢谢

预期产出

```
[7645748, ValD]
[3456778, ValC]
[348845.45, ValF]
[2356, ValB]
[2324, ValE]
[1000, ValA]
[-2345666, ValG] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:39:35.707

创建一个自定义对象数组并使用数据填充

```
for (var i = 0; i < values.length; i++) {
    myArray[i].value = values[i];
    myArray[i].label = labels[i];
} 
```

然后实现你自己的冒泡排序算法：

```
for (var j = 0; j < myArray.length - 1; j++) {
    for (var i = 0, swapping; i < myArray.length - 1; i++) {
      if (myArray[i].value > myArray[i + 1].value) {
        swapping = myArray[i + 1];
        myArray[i + 1] = myArray[i];
        myArray[i] = swapping;
        };
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-20T05:19:22.970

var list = ['z','b', 'a', 'y'];

```
for (var j = 0; j < list.length - 1; j++) {
    for (var i = 0, swapping; i < list.length - 1; i++) {
      if (list[i]> list[i + 1]) {
        swapping = list[i + 1];
        list[i + 1] = list[i];
        list[i] = swapping;
        }; 
    }; 
}; 
```

输出将是 = ["a", "b", "y", "z"]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-19T08:09:00.653

此方法是一种非常简单易行的方法，无需 sort() 方法即可解决数组中的排序问题。

```
function sortArray(arr) {
        var temp = [];
        if (Array.isArray(arr)) {
            for (let i = 0; i < arr.length; i++) {
                for (let j = 0; j < arr.length; j++) {
                    if (arr[i] < arr[j]) {
                        temp = arr[j];
                        arr[j] = arr[i];
                        arr[i] = temp;
                    }
                }
            }
            return arr;
        }
    }

console.log(sortArray([2, 6, 0, 4, 3, 4, 3, 5, 9, 6, 12, 43, 6])); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-23T12:26:53.450

```
 // It will work for both Python or JS code
 let b =  ["ValA", "ValB", "ValC", "ValD", "ValE", "ValF", "ValG", "ValH"]
    for(let i=0;i<b.length-1;i++){
       for(let j=i+1;j<b.length;j++)
            {
                if(b[j]<b[i])
                {
                    temp = b[j]
                    b[j]=b[i]
                    b[i] = temp
                }
            }
        }
    console.log(b) 
```

# regex - vimrc 检测远程连接

> ID：15808767
> 
> 赞同：2
> 
> 时间：2013-04-04T10:35:00.190
> 
> 标签：regex, vim, ssh, remote-access

目前我必须在我的 vimrc 上硬编码服务器的名称，以使其在远程机器上有所不同。这是通过使用`hostname()`vim 中的函数的条件语句来完成的。我想让条件基于远程连接的状态而不是主机名。所以...

我发现的第一个可能的解决方案是使用以下 bash 命令`system()`：

```
cat /proc/$PPID/status | head -1 | cut -f2 
```

这不起作用，因为我使用 GNU `screen`，这将无法正确检测我的连接状态。

我现在正在探索的第二种可能的解决方案是使用`who am i`This 可靠地显示远程连接是否已从哪个客户端进行，但我无法使用它`system()`

```
if substitute(system('who am i'), "theclient", ????, "") == ""
     ... 
```

我怎么能`????`以某种方式提取我的客户名称？

即使第二种解决方案有效，允许我将 .vimrc 用于许多不同的远程机器，它仍然绑定到一个客户端。无论客户端名称如何，我都希望条件在所有远程会话中都有效。所以我想知道，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:14:50.440

以下行允许我创建一个检测远程连接状态的变量：

```
let g:remoteSession = ($STY == "") 
```

现在，您可以通过以下方式将要在远程连接中忽略的行包围起来：

```
if g:remoteSession
    ...
endif 
```

附带说明一下，与全局变量相比，我不知道查找环境变量的成本有多高，但我猜测差异可以忽略不计。像cygwin这样低效的环境中的系统调用，`fork()`值得做优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:58:40.337

除了将条件逻辑添加到 shared 之外`~/.vimrc`，您还可以选择源系统本地设置。我使用以下内容：

```
" Source system-specific .vimrc first.
if filereadable(expand('~/local/.vimrc'))
    source ~/local/.vimrc
endif
" Stop sourcing if inclusion guard exists.
if exists('g:loaded_vimrc')
    finish
endif

" Common settings of .vimrc here... 
```

我发现这比试图在中心位置维护不断变化的主机名列表更具可扩展性。

# yii - 在列表视图中显示相关表列名称

> ID：15808768
> 
> 赞同：0
> 
> 时间：2013-04-04T10:35:01.890
> 
> 标签：yii, dataprovider

我有一个带有 2 个表的简单数据库：tbl_code 和 tbl_user

```
**tbl_code**
id(PK)
accesscode
createdby(FK references tbl_user.id)
accesstime

**tbl_user**
id (PK)
username
password 
```

我正在尝试在列表视图中显示以下内容

*   id (tbl_code.id)
*   访问代码
*   createdby - （显示用户表中的用户名）
*   访问时间

电流控制器：

```
$dataProvider=new CActiveDataProvider('Code');
    $this->render('index',array(
        'dataProvider'=>$dataProvider,
    )); 
```

索引视图

```
<?php $this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_view',
)); ?> 
```

最后是_view

```
<div class="view">

    <b><?php echo CHtml::encode($data->getAttributeLabel('id')); ?>:</b>
    <?php echo CHtml::link(CHtml::encode($data->id), array('view', 'id'=>$data->id)); ?>
    <br />

    <b><?php echo CHtml::encode($data->getAttributeLabel('accesscode')); ?>:</b>
    <?php echo CHtml::encode($data->accesscode); ?>
    <br />

    <b><?php echo CHtml::encode($data->getAttributeLabel('createdby')); ?>:</b>
    <?php echo CHtml::encode($data->createdby); ?>
    <br />

    <b><?php echo CHtml::encode($data->getAttributeLabel('accesstime')); ?>:</b>
    <?php echo CHtml::encode($data->accesstime); ?>
    <br />

    <b><?php echo CHtml::encode($data->getAttributeLabel('messagecount')); ?>:</b>
    <?php echo CHtml::encode($data->messagecount); ?>
    <br />

</div> 
```

我应该在 $dataprovider 标准中加入这两个表还是有更好的方法来实现这一点？仍然掌握 Yii，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:58:33.967

您可能会在代码中错过很多想法，因此我将展示您需要的一些内容：

**在模型中**

在您的模型中，您需要指出存在的关系。

`User`您需要定义将此模型链接到代码的关系

```
public function relations(){
    return array(
        'codes'=>array(self::HAS_MANY, 'Code', 'createdby'),
    );
} 
```

你`Code`会有

```
public function relations(){
    return array(
        'author'=>array(self::BELONGS_TO, 'User', 'createdby'),
    );
} 
```

现在可以在控制器或视图中调用模型时链接模型

**数据提供者**

在数据提供者中，我们将在加载代码时指出需要加载的相关模型：

```
$dataProvider=new CActiveDataProvider('Code', array(
    'criteria'=>array(
        'with'=>array('author'),
    ),
)); 
```

**风景**

现在在视图中 yiou 可以显示作者：

```
<?php echo CHtml::encode($data->author->getAttributeLabel('username')); ?>:</b>
<?php echo CHtml::encode($data->author->username); ?> 
```

# java - 枚举和枚举之间的区别

> ID：15808770
> 
> 赞同：5
> 
> 时间：2013-04-04T10:35:04.593
> 
> 标签：java, enums

enum 具有`valueOf(string)`获取枚举常量的方法，并且`java.lang.Enum`类中存在的相同类型的方法具有`valueOf(enumClassName, string)` 我发现的名称，两者都给出相同的输出。那么还有哪些不同之处。如果没有区别，那么为什么要添加 JSL `Enum.valueOf()`？

```
enum Season {
    WINTER,SUMMER
}

class Test {
    public static void main(String[] args) {
        String season = "WINTER";

        //switch (Season.valueOf(colObject))  // following line achieves same thing
        switch (Enum.valueOf(Season.class, season)) // any other difference between both approach
        {
            case WINTER: {
                System.out.println("Got it in switch case= VENDOR");
                break;
            }
            default:
                System.out.println("Fell thru.");
                break;
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T10:38:46.577

包含该`Enum.valueof()`方法的原因是它适用于任何`enum`. 相比之下，`enum` `valueof`特定方法的方法仅适用于该特定方法`enum`......因为`enum`类不能以多态方式使用。

显然，该方法仅在您实现*需要*适用于多种类型`Enum.valueOf(...)`的代码时才真正有用......并且泛型不会削减它。*`enum`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T00:38:01.540

`Enum.valueOf(Class<T>, String)`用于*实现*`valueOf(String)`生成到每个特定枚举类中的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:53:33.847

Enum 中的方法是通用的，可以与任何枚举一起使用，而枚举中的方法仅特定于该枚举。*

# html - Internet Explorer 屏幕中的可链接部分失败

> ID：15808771
> 
> 赞同：0
> 
> 时间：2013-04-04T10:35:05.960
> 
> 标签：html, css, internet-explorer

我必须在两个轴上集中图像，然后将可链接区域添加到该图像的左上角区域。这对 webkit 和 ff 非常有效，但失败了。我的html代码是这样的：

```
<body>
<div class="content">
    <img src="images/main_image.jpg" />
    <a href="#somelinkhere">Logo</a>
</div>
</body> 
```

我的CSS代码是这样的：

```
body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    background-color: #000;
    overflow: hidden;
}
div.content {
    position: relative;
    width: 1001px; 
    height: 626px;
    top: 50%;
    margin: 0 auto;
    padding: 0;
}
div.content img {
    margin: 0;
    padding: 0;
    display: block;
    position: relative;
    top: -50%;
}
div.content a {
    width: 14%;
    height: 9%;
    display: inline-block;
    position: absolute;
    top: -42%;
    left: 7%;
    text-decoration: none;
    margin: 0;
    padding: 0;
    text-indent: -9999px;
} 
```

这对 ie 不起作用，因为我使用显示为相应定位的内联块的 a 标记。我们的朋友 ie 根本没有在屏幕上显示可链接部分，因为文本缩进。有人可以帮忙吗？谢谢。我认为这个[演示会](http://www.mitilini-trans.gr/demo/project.html)帮助你更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:05:36.067

看看[这个演示](http://jsfiddle.net/eugqD/4/)（或结果只[在这里](http://jsfiddle.net/eugqD/4/show/)）

HTML 没有改变。我假设图像具有与内容 div 相同的高度/宽度

CSS：

```
body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    background-color: #000;
    overflow: hidden;
}
div.content {
    position: relative;
    padding: 0;
    border:solid 1px blue;
    width: 1001px; 
    height: 626px;
    /*below will center div on screen */
    top: 50%;    
    margin: -313px auto 0;

}
div.content img {
    margin: 0;
    padding: 0;
    display: block;    
    border:solid 1px white;
   /*top:-50% removed. Assuming that image has the same height/width as content div*/
}
div.content a {        
    width: 14%;
    height: 9%;    
    position: absolute;
    /* top: -something changed. Remember that absolutely positioned div is always positioned from closest parent relative div*/
    top: 10%;
    left: 7%;
    text-decoration: none;
    margin: 0;
    padding: 0;
    text-indent: -9999px;
    border:solid 1px green;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:19:33.810

看起来就像您正在创建一个容器，将其移动到屏幕底部，然后将其外部的图像移动到屏幕的左上角。这最后一步正是在许多情况下会失败的地方。离开父容器时，子元素通常会被隐藏或切除。在这种情况下，IE 更具限制性但正确。

当您将图像放在容器外时，您可以更轻松地实现目标。请记住，body 本身就是一个容器，它总是 100% 宽和高（不能更改为 50% 或任何值）。

这是[js-fiddle上的结果](http://jsfiddle.net/b2Awm/1/)

的HTML：

```
<body>
this is the body
<img class="my_image" src="images/main_image.jpg" />
<div class="content">   
    This is the container
    <a href="#" >Logo</a>
</div>
</body> 
```

CSS：

```
body, html {
margin: 0;
padding: 0;
height: 100%;
width: 100%;
background-color: #000;
overflow: hidden;
color:silver;
}
div.content {
color:black;
background-color: silver;
position: relative;
width: 1001px; 
height: 626px;
top: 50%;
margin: 0 auto;
padding: 0;
}
.my_image {
width:160px;
height:60px;
border:1px solid red;
margin: 0;
padding: 0;
display: block;
position: absolute;
top: 0;
left:0;
}
div.content a {
    color:red;
font-size:14px;
display: inline-block;
position: absolute;
top: 20%;
left: 7%;
text-decoration: none;
margin: 0;
padding: 0;
} 
```

一般来说，最好避免负值。它们在许多浏览器中被误解并产生问题。

# javascript - 将逗号分隔符添加到值变量

> ID：15808773
> 
> 赞同：1
> 
> 时间：2013-04-04T10:35:17.180
> 
> 标签：javascript

我已经阅读了数千个逗号分隔符 JavaScript 问题/答案，但发现很难在实践中应用它。例如我有变量

```
x = 10023871234981029898198264897123897.231241235 
```

我将如何用逗号将其分隔为数千？我想要一个不仅适用于该位数而且更多的功能。无论我需要的功能有多少位数，我都必须用逗号分隔数字并保留小数点后的数字，有人可以帮忙吗？它必须处理数字并将其转换为字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:38:58.053

首先，对于如此庞大的数字，您应该使用字符串格式：

```
var x = "10023871234981029898198264897123897.231241235"; 
```

否则，JavaScript 会自动将其转换为指数符号，即`1.002387123498103e+34`.

然后，根据[有关货币格式的问题](https://stackoverflow.com/a/14428340/1249581)，可以使用以下代码：

```
x.replace(/(\d)(?=(\d{3})+\.)/g, "$1,"); 
```

这将导致：`"10,023,871,234,981,029,898,198,264,897,123,897.231241235"`。

# php - javascript 验证未激活可能是由于 HTML 表单上的 php 邮件程序

> ID：15808777
> 
> 赞同：1
> 
> 时间：2013-04-04T10:35:23.483
> 
> 标签：php, javascript, forms, validation, mailer

我的 Javascript 验证没有激活有问题。我在这个 HTML 表单上也有一个 PHP 邮件程序，一旦按下提交，它就会提交表单并且没有进行验证。

这是 HTML 表单的代码：

```
 <form name="contact" action="mailer.php" onsubmit="return ValidateForm()" method="post"><fieldset>

<tr><td><label for="name">Name:</label></td>
<td><input type="text" name="name" id="name" placeholder="Enter your full name" />
</td></tr>

<tr><td><label for="email">Email:</label></td>
<td><input type="email" name="email" id="email" placeholder="Enter your email address" />
</td></tr>

<tr><td><label for="tel">Phone:</label></td>
<td><input type="tel" name="tel" id="tel" placeholder="Enter your phone number" />
</td></tr>

<tr><td><label for="message">Message:</label></td>
<td><textarea id="message" name="message" placeholder=""></textarea>
</td></tr>

<tr><td><input type="submit" value="Submit" name="submit" />
</form> 
```

这是 PHP 邮件程序的代码：

```
<?php
if(isset($_POST['submit'])) {
$to = "email@address.com.au";
$subject = "Subject";
$name_field = $_POST['name'];
$email_field = $_POST['email'];
$tel_field = $_POST ['tel'];
$message = $_POST['message'];

$body = "From: $name_field\n E-Mail: $email_field\n Phone: $tel_field\n Message:\n $message";

mail($to, $subject, $body, "From: $email_field");
echo "Data has been submitted to $to!";
echo "<a href='index.html'>Go back to Home Page</a>";
} else {
echo "error";
}
?> 
```

这是验证器的代码：

```
<script type="text/javascript">

{function validateForm()
{
var x=document.forms["contact"]["name"].value;
if (x==null || x=="")
  {
  alert("Name field must be filled out");
  return false;
  }

   var x=document.forms["contact"]["email"].value;
var atpos=x.indexOf("@");
var dotpos=x.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
  {
  alert("Not a valid e-mail address");
  return false;
  }

 var x=document.forms["contact"]["tel"].value;
if (y==null || y=="")
  {
  alert("Phone number must be provided");
  return false;
  }

  var x=document.forms["contact"]["message"].value;
if (x==null || x=="")
  {
  alert("You have not entered a message");
  return false;
  }

  </script> 
```

我曾尝试将 javascript 验证器作为服务器上的单独文件或脚本本身以 html 文档的形式放入，但似乎都不起作用。我做了很多搜索并检查了代码，我很确定它是正确的，但是找不到任何东西来说明这两个功能是否可以一起使用。如果有人可以请确认它会很棒！

任何意见，将不胜感激！

提前致谢！

卡兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:07:27.210

在您应该使用小写“v”时，`onSubmit`您正在调用。还有一些其他的：`return ValidateForm()``return validateForm()`

`{function validateForm()`应该`function validateForm()`

你永远不会在 if 语句之后关闭函数左大括号。

```
<form name="contact" action="mailer.php" onsubmit="return validateForm()" method="post"> 
```

进而：

```
function validateForm() {
    var x = document.forms["contact"]["name"].value;
    if (x == null || x == "") {
        alert("Name field must be filled out");
        return false;
    }

    var x = document.forms["contact"]["email"].value;
    var atpos = x.indexOf("@");
    var dotpos = x.lastIndexOf(".");
    if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {
        alert("Not a valid e-mail address");
        return false;
    }

    var x = document.forms["contact"]["tel"].value;
    if (y == null || y == "") {
        alert("Phone number must be provided");
        return false;
    }

   var x = document.forms["contact"]["message"].value;
    if (x == null || x == "") {
        alert("You have not entered a message");
        return false;
    }
} 
```

# perl - 使用 select 轮询连接 - TCP 服务器

> ID：15808781
> 
> 赞同：2
> 
> 时间：2013-04-04T10:35:33.593
> 
> 标签：perl, sockets

```
use strict; use warnings;
use IO::Socket;
use IO::Select;
my $read_select  = IO::Select->new();
my $write_select = IO::Select->new();

my $socket = IO::Socket::INET->new(
            LocalHost => '127.0.0.1',
            LocalPort => '5556',
            Proto => 'tcp',
            Listen => 50,
            Reuse => 1,
 ) or die "Could not create socket: $!";

 print "Socket Created . Waiting for connection ...\n";

 ## poll to accept new connection or to receive data from a connection

 $read_select->add($socket);

 print "Added socket to read list ";
 my $reade;
 my $newconn;
 my @read;
 my @write;
 while(1) {
    @read = $read_select->can_read();

    foreach my $reade(@read) {
            if($reade == $socket) {
                    print "New conn received";
                    my $newconn = $reade->accept();
                    $write_select->add($newconn);

            }
            else {
                    print "data received";
            }
    }
 }
 @write = $write_select->can_write();

 foreach my $write(@write) {
    $write->send("got ur data");
 } 
```

我正在尝试使用 select 语句轮询连接。为什么如果我使用无限循环，则不接受任何连接。没有 while(1) 也能正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:01:29.837

我认为您在这里被 I/O 缓冲所困扰。Perl 缓冲所有输入和输出。它通常在收到整行之前不会打印到终端。

您的代码可能正在使用`while(1)`，但您看不到调试打印语句的输出，因为终端的输出正在被缓冲。一旦你通过循环进入第二次，就会永远`$read_select->can_read()`阻塞，所以你*永远*看不到 print 语句的输出。

您可以通过添加`\n`到每个打印语句的末尾来解决这个问题。另一个选项是设置`$| = 1;`。这将禁用缓冲。有关缓冲的更多信息，请参阅[perlvar 的讨论。`$|`](http://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles)

# android - onHandleIntent() 中的 Intent 怎么可能为空？

> ID：15808793
> 
> 赞同：20
> 
> 时间：2013-04-04T10:36:21.237
> 
> 标签：android, google-cloud-messaging

我的 android 应用程序崩溃了，这是 logcat :-

```
java.lang.NullPointerException
    at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:194)
    at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我查看了 android gcm r3 源代码，发现 onHandleIntent() 中的参数意图为空。

这甚至可能吗？如何解决？

`Service.onStartCopmmand`（我知道返回时可以看到空意图，`START_STICKY` 但`IntentService.onStartCommand`不使用`START_STICKY`。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-15T06:06:15.243

我认为应用程序在安装期间仅在某些设备中崩溃。这是因为在安装过程中，GCM 服务还会`Intent`从其他 Google 来源接收一些内容，而您的广播接收器还没有准备好处理这种类型的`Intent`.

如果您只想通过推送通知接收您想从服务器中提取的 GCM Intent，那么只需在您的句柄 Intent 调用中使用它。

```
protected void onHandleIntent(Intent intent) {
Bundle extras = intent.getExtras();
        //String msg = intent.getStringExtra("message");
        String from=extras.getString("from");
        GoogleCloudMessaging gcm = GoogleCloudMessaging.getInstance(this);
        String messageType = gcm.getMessageType(intent);

        if (!extras.isEmpty()) {

            if (GoogleCloudMessaging.MESSAGE_TYPE_SEND_ERROR.equals(messageType)) {
                sendErrorNotification("Send error: " + extras.toString());
            } else if (GoogleCloudMessaging.MESSAGE_TYPE_DELETED.equals(messageType)) {
                sendErrorNotification("Deleted messages on server: " + extras.toString());
                // If it's a regular GCM message, do some work.
            } else if (GoogleCloudMessaging.MESSAGE_TYPE_MESSAGE.equals(messageType)) {
                // This loop represents the service doing some work.
                for (int i = 0; i < 5; i++) {
                    Log.i(TAG, "Working... " + (i + 1) + "/5 @ " + SystemClock.elapsedRealtime());
                    try {
                        Thread.sleep(500);
                    } catch (InterruptedException e) {
                    }
                }
                Log.i(TAG, "Completed work @ " + SystemClock.elapsedRealtime());
                // Post notification of received message.
                // sendNotification("Received: " + extras.toString());
                /*********ERROR IN SOME DEVICES*****************/

                 if(from.equals("google.com/iid"))
                 {
                     //related to google ... DO NOT PERFORM ANY ACTION
                 }
                 else { 
                   //HANDLE THE RECEIVED NOTIFICATION
                     String msg = intent.getStringExtra("message");
                     sendNotification(msg);
                    Log.i(TAG, "Received: " + extras.toString());
                     }
                 /**************************/
            }
        }
        GcmBroadcastReceiver.completeWakefulIntent(intent);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-06T17:49:37.930

曾经发生在我身上，我传递了错误的 URI。参考你想要传递的意图的文档。

[意图文档在这里。](https://developer.android.com/reference/android/content/Intent.html)

# android - 谷歌在应用程序中购买是否收费？

> ID：15808794
> 
> 赞同：19
> 
> 时间：2013-04-04T10:36:27.253
> 
> 标签：android, in-app-purchase

我正在构建一个免费的 android 应用程序，其中应该有一个“商店”，您可以在其中购买一些物品。该计划是用户可以使用贝宝或其他东西支付它。现在我的问题是，Playstore 是否会为此类交易收取一定比例的费用？如果是这样，需要多少钱？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-03-03T08:31:19.933

公认的答案是正确的，但我们应该考虑通过智能手机/平板电脑购买的另一个方面。这让人想起了@JaranJhanjee 投反对票的答案，这个答案是错误的，但**包含一些重要的事实**

Google 根据其[条款对应用内购买收取 30% 的费用](https://play.google.com/intl/en/about/developer-content-policy.html)

* * *

*   付费和免费应用程序

    *   应用程序购买：从 Google Play 对应用程序和下载收费的开发者必须使用 Google Play 的支付系统这样做。
    *   应用内购买：
        *   在从 Google Play 下载的游戏中提供虚拟商品或货币的开发者必须使用 Google Play 的应用内结算服务作为付款方式。
        *   在从 Google Play 下载的另一类应用中提供额外内容、服务或功能的开发者必须使用 Google Play 的应用内结算服务作为付款方式，但以下情况除外：或购买价格还包括纸质订阅的出版物）；或者支付可能在应用程序本身之外消费的数字内容或商品（例如，购买可以在其他音乐播放器上播放的歌曲）。

* * *

Google 总是通过其应用内计费 API 收取 30% 的费用。但在某些情况下**，应避免使用此类 API**以免导致过度收费

*   如果导航器地图可用于更多设备（尤其是 iPhone 或 MS 手机等非 Android 设备）
*   如果地图将在客户的家庭地址以 SD 卡的形式打包交付

在这种情况下，卖家**可以**实施不同的支付网关，如[Google Wallet API](https://developers.google.com/wallet/instant-buy/android/tutorial)或 PayPal

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-04T19:02:51.087

Google 对每笔交易收取 30% 的费用。详情可以在[这里查看](http://support.google.com/googleplay/android-developer/answer/1153481?hl=en)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-01-13T10:14:35.307

请参阅以下链接了解 Google 费用。

```
You receive 70% of the payment. The remaining 30% goes to the distribution partner and operating fees. 
```

[https://support.google.com/googleplay/android-developer/answer/112622?hl=en](https://support.google.com/googleplay/android-developer/answer/112622?hl=en)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-22T14:20:16.110

> 对于通过 Google Play 提供的应用和应用内产品，交易费用相当于价格的 30%。您收到 70% 的付款。剩下的 30% 用于分销合作伙伴和运营费用。
> 
> 自 2018 年 1 月 1 日起，对于您在 12 个付费月后保留的任何订阅者，订阅产品的交易费用将降至 15%。如果订阅者在此日期之前一直处于活动状态，则将计算该时间。例如，如果订阅者已经活跃了 4 个月，则在另外 8 个月付费后，交易费用将降低至 15%。

[参考](https://support.google.com/googleplay/android-developer/answer/112622?hl=en)

# haskell - 替换所选文本并选择新文本

> ID：15808798
> 
> 赞同：0
> 
> 时间：2013-04-04T10:36:40.310
> 
> 标签：haskell, gtk, gtk2hs

我正在使用 Gtk2Hs，所有这些 GTK 的东西对我来说都是新的。我正在使用`TextView`. 我想用一些新文本替换当前选择的文本，并选择新文本。我能想到的最接近的是：

```
-- Create marks so I can "remember" where the selection was
(startIter, stopIter) <- textBufferGetSelectionBounds buffer
startMark <- textBufferCreateMark buffer (Just "start") startIter True
stopMark <- textBufferCreateMark buffer (Just "stop") stopIter True

-- Delete the currently selected text
textBufferDeleteSelection buffer True True
-- now startIter and stopIter are no longer valid

-- Insert the new text
somehow convert startMark to startIter2 ???
textBufferInsert buffer startIter2 text
-- now startIter2 is no longer valid

-- Select the new text
somehow convert startMark to startIter3 ???
somehow convert stopMark to stopIter3 ???
textBufferSelectRange buffer startIter3 stopIter3 
```

我发现设置选择的唯一功能需要`TextIter`s，而不是`TextMark`s。但是我还没有找到任何函数来从 TextMark 中获取 TextIter。这是正确的程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:30:41.087

我有这个解决方案。即使使用我测试的非 ASCII 字符，它也可以工作。但是，我仍然想知道是否有办法使用`TextMark`s.

```
textBufferReplaceSelection buffer text = do
  textBufferDeleteSelection buffer True True
  textBufferInsertAtCursor buffer text
  (_, end) <- textBufferGetSelectionBounds buffer
  start <- textIterCopy end
  textIterBackwardChars start (length text)
  textBufferMoveMarkByName buffer "selection_bound" start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:43:40.567

好的，我找到了一种使用`TextMarks`. 我正在寻找的功能是`textBufferGetIterAtMark`.

```
textBufferReplaceSelection 
  ∷ TextBufferClass self ⇒ self → String → IO ()
textBufferReplaceSelection buffer text = do
  -- Create marks so I can "remember" where the selection was
  (startIter, stopIter) <- textBufferGetSelectionBounds buffer
  startMark <- textBufferCreateMark buffer (Just "start") startIter False
  stopMark <- textBufferCreateMark buffer (Just "stop") stopIter True

  -- Delete the currently selected text
  textBufferDeleteSelection buffer True True
  -- now startIter and stopIter are no longer valid

  -- Insert the new text
  startIter2 <- textBufferGetIterAtMark buffer startMark
  textBufferInsert buffer startIter2 text
  -- now startIter2 is no longer valid

  -- Select the new text
  startIter3 <- textBufferGetIterAtMark buffer startMark
  stopIter3 <- textBufferGetIterAtMark buffer stopMark
  textBufferSelectRange buffer startIter3 stopIter3 
```

# asp.net-mvc - Kendo UI Grid RowTemplate with Action Razor View 引擎上的参数

> ID：15808799
> 
> 赞同：1
> 
> 时间：2013-04-04T10:36:41.040
> 
> 标签：asp.net-mvc, razor, delegates, kendo-ui, kendo-grid

我正在尝试使用 Kendo UI Grid 组件并且需要创建我的自定义行模板。实际上，网格真的很棒，使用起来也很酷。但是有些我无法显示我的自定义行模板。

我需要整个模型（我的意思是整个实体对象来显示附加数据，但不在列标题上显示它们的标题，比如子项目的图像），所以我试图使用`RowTemplate(System.Action<T>)`为每一行传递每个实体的方法。对于 aspx 页面，他们的网站上有一个示例，如下所示：

```
<%= Html.Kendo().Grid(Model)
    .RowTemplate(o =>
    {
%>
    <%= o.Name %>
    <%= o.Age %>
    <%
    })
    %> 
```

但是如何用剃须刀做到这一点？我无法得到它。我应该使用 WriteLiteral 还是什么？如何使用`Action<T>`显示剃须刀模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:54:52.420

在 razor 中，您必须使用[模板委托](http://haacked.com/archive/2011/02/27/templated-razor-delegates.aspx)：

```
.RowTemplate(@<text>
   <strong>@item.Name</strong>
   <span>@item.Age</span>
</text>); 
```

# asp.net - asp.net 页面不滚动

> ID：15808800
> 
> 赞同：0
> 
> 时间：2013-04-04T10:36:42.167
> 
> 标签：asp.net, scroll, modal-dialog

这是我的问题：

![验证](https://i.stack.imgur.com/vZQGM.png)

```
<asp:Panel ID="pnlMyAddressBook" runat="server" BackColor="White"  CssClass="roundcorner">
    TEST<table style="width: 100%;"> 
```

我是否需要解释页面不会滚动以显示所有验证错误的列表？它是在模式弹出窗口上显示的面板...我尝试设置面板的高度属性...没有用...此外，在 HTML 中包含此（必需）Jquery 函数会导致面板移动到角落...我现在已经从我的 HTML 中删除了它...

```
 <script type="text/javascript">
    $(function () {
        $("#tabs").tabs();
    }); 
```

打开模式的按钮的 C# 代码：

```
 protected void btnEdit_Click(object sender, EventArgs e)
        {
            ClientScript.RegisterStartupScript(this.GetType(), "key", "launchModalV2();", true);
        //ClearTextBoxes();
        PopUpAddressInLightBox();

        mpeTest.Show();
        hdnfld.Value = "Edit";
    } 
```

HTML

```
 <asp:Button ID="btnEdit" runat="server" Text="Edit Address pb" OnClick="btnEdit_Click" CssClass="btn"  />
 <asp:Button ID="btnAddNew" runat="server" Text="Add New Address pb" OnClick="btnAddNew_Click" /> 
```

我正在使用这两个按钮来调用模态......

```
.modalBackground
{
background-color: Black;
-filter: alpha(opacity=80);
-opacity: 0.6;
z-index: 10000;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:39:06.833

在模态弹出窗口的 css 中，设置模态弹出窗口的宽度，然后设置溢出：自动。这会给你垂直滚动条。例子：

```
.ModalPopupPanel
{
  height:700px;
  overflow:auto;
} 
```

因此，当内容高度超过 700px 时，会出现水平滚动条。对于需要设置modalpop宽度的水平滚动条也是如此。

# jquery - 渲染表上的 jQuery 回调

> ID：15808801
> 
> 赞同：0
> 
> 时间：2013-04-04T10:36:44.243
> 
> 标签：jquery

我试图在使用 table-layout:auto 最终渲染多个大型 html 表时触发回调函数。浏览器（尤其是移动版 Safari）需要一段时间来根据其内容调整和呈现所有表格单元格。在呈现所有单元格并且表格已完全调整之前，不应触发我的回调函数。

```
function myCallback()
{
    // do something
} 
```

有这样的事件或回调吗？我试过触发回调

```
$(window).load(myCallback) 
```

和

```
$('table').on('load', myCallback) 
```

不幸的是，两者都没有工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:42:08.643

问题是`$(...).load()`只有在加载此元素之前调用它**才**有效，并且不能保证这一点。

我建议使用

```
$(document).ready(callback); 
```

这确保了 DOM 树已准备好，只有图像等可能尚未加载。

（或者您可以尝试将其包含在 html 中：`<table onload="javascript:myCallback()"></table>`。）

# sql-server - 通过使用 isnull 将值转换为常量来与 null 进行比较

> ID：15808803
> 
> 赞同：1
> 
> 时间：2013-04-04T10:36:52.657
> 
> 标签：sql-server, null, isnull

我们的一位程序员倾向于在 MS SQL 中使用 isnull 来与 NULL 进行比较。`Where ColumnName Is Null`那是他写的而不是写作`Where IsNull(ColumnName,0)=0`

我认为优化器无论如何都会将后者转换为前者，但如果它没有 - 有没有办法证明后者效率较低，因为它 1.Compares with null, 2.Converts to integer, 3.Compares 2 个整数，而不是仅与 null 比较。

这两种方式对我来说都非常快，可以使用执行计划（而且我认为优化器发挥了它的作用）。有没有办法证明他只与没有 IsNull 的 Null 进行比较更有效（除非不是）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:54:37.707

另一个明显的问题是`ISNULL`排除了索引的使用。

运行此设置：

```
create table T1 (
    ID int not null primary key,
    Column1 int null
)
go
create index IX_T1 on T1(Column1)
go
declare @i int
set @i = 10000
while @i > 0
begin
    insert into T1 (ID,Column1) values (@i,CASE WHEN @i%1000=0 THEN NULL ELSE @i%1000 END)
    set @i = @i - 1
end
go 
```

然后打开执行计划并运行以下命令：

```
select * from T1 where Column1 is null
select * from T1 where ISNULL(Column1,0)=0 
```

第一个使用索引*搜索*（使用`IX_T1`）并且非常有效。第二个对聚集索引使用索引*扫描*——它必须查看表中的*每一*行。

在我的机器上，第二个查询占用了 90% 的时间，前 10%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:40:54.273

IsNull 不好用，如果你在where子句中使用它并与0比较，isnull的使用是替换值null

[http://msdn.microsoft.com/en-us/library/ms184325.aspx](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

例如：

```
SELECT Description, DiscountPct, MinQty, ISNULL(MaxQty, 0.00) AS 'Max Quantity'
FROM Sales.SpecialOffer; 
```

# android - sencha touch 中的应用程序更新功能

> ID：15808804
> 
> 赞同：1
> 
> 时间：2013-04-04T10:36:53.250
> 
> 标签：android, web-applications, sencha-touch-2

我是煎茶触摸的新手。我正在做一个项目，我需要检查是否有可用的更新。如果更新可用，那么我们应该提供更新应用程序的方法，这将是应用程序的完整新版本。我的问题是我们如何检查更新，如果更新可用，那么我们需要在用户接受的情况下更新应用程序。

注意：- 这里我们使用的是自己的服务器，而不是市场或应用商店。所以通过api调用我们可以检查更新。`But after getting the update information how to allow user to update the application without any extra glitches not able to get an idea. Please help me out to overcome with this problem`.

谢谢。

# xml - SSIS XML日期转换错误

> ID：15808806
> 
> 赞同：0
> 
> 时间：2013-04-04T10:36:54.757
> 
> 标签：xml, date, ssis

我有一个具有以下日期格式的 XML 文档：2012-11-12T00:00:00-05:00

在数据转换任务中将此列设置为 DateType 'Date[DT_DATE]'（或数据库日期或数据库时间）时 - 任务失败并出现常见错误：“由于可能丢失数据，无法转换值。”

所以我知道我需要先使用“派生列”任务来转换这个值......

...但是我要把它投射到什么地方？

我在 DB 表中的目标字段是 DATETIME 类型。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:00:05.503

原来我必须对格式进行子串化并且它可以工作......有点讨厌。

# .net - Windows 8 64 位上的 CRM 3.0 Outlook 笔记本电脑客户端和 .net 2.0

> ID：15808808
> 
> 赞同：1
> 
> 时间：2013-04-04T10:37:01.780
> 
> 标签：.net, windows-8, dynamics-crm, outlook-addin, dynamics-crm-3

我正在尝试在 Windows 8 机器上强制安装适用于 CRM 3.0 的 Outlook 笔记本电脑客户端。我到目前为止，但它不会识别.Net 2 已安装。我认为因为它希望它由用户安装，并且由于它是 .Net 3.5 Windows 功能的一部分，所以它无法在已安装程序列表中找到它。

我曾尝试单独安装 .Net 2.0，但无论我是关闭还是打开这些功能，它都不起作用。如果我在关闭 .Net 3.5 功能并使用兼容性设置时尝试安装，它会失败。如果打开它会告诉我它已经作为操作系统的一部分安装。我还关闭了组策略中的兼容性检查。

问题可能是因为 C:/ 中有一个 .Net V4 文件夹和它的注册表项吗？

有没有办法在运行时停止 Windows 安装程序搜索已安装的程序？

我设法在 Windows 7 上绕过了这些问题，但直接安装了 .Net 1.1 和 2.0 - 我已经直接安装了 .Net 1.1，效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T13:34:31.647

我在 Dynamics 社区站点中找到了答案。此解决方案适用于我的 Windows 8.1 64 位：

问题是这个注册表项（在 64 位 Windows 8 中）：

HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft.NETFramework\policy\v2.0

出于某种原因，安装程序希望以读/写模式打开它并获得拒绝访问，这使安装程序认为 .NET 2 不存在。为了解决这个问题，我必须获得密钥的所有权并将完全控制权设置为我的用户。

原帖如下：

[https://community.dynamics.com/crm/f/117/p/105669/213813.aspx](https://community.dynamics.com/crm/f/117/p/105669/213813.aspx)

# sql - 去除单词中的空格

> ID：15808812
> 
> 赞同：2
> 
> 时间：2013-04-04T10:37:14.573
> 
> 标签：sql, parsing, postgresql, text-parsing

我的数据库（PostgreSQL）中有很多字符串，例如：

```
with mystrings as (
    select 'H e l l o, how are you'::varchar string union all
    select 'I am fine, t h a n k you'::varchar string union all
    select 'This is s t r a n g e text'::varchar string union all
    select 'With c r a z y space b e t w e e n characters'::varchar string 
)
select * from mystrings 
```

有没有办法可以删除单词中字符之间的空格？对于我的示例，结果应该是：

```
Hello, how are you
I am fine, thank you
This is strange text
With crazy space between characters 
```

我从 开始`replace`，但是有很多这样的单词，字符之间有空格，我什至找不到它们。

因为可能难以有意义地连接字符，所以最好只获取连接候选者的列表。使用示例数据，结果应该是：

```
H e l l o
t h a n k
s t r a n g e
c r a z y
b e t w e e n 
```

当至少有三个由两个空格分隔的单独字符时，此类查询应查找并返回字符串中的所有子字符串（并继续直到`[space] individual character`出现模式）：

```
He l l o how are you --> llo
H e l l o how are you --> Hello
C r a z y space b e t w e e n --> {crazy, between} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:38:56.197

根据您***编辑***的问题，以下获得了所有可能的候选人`least three individual characters separated by two spaces`

```
SELECT 
    data || ' --> {' || replace_candidates || '}'
FROM(
SELECT 
    data,
    ( SELECT 
            array_to_string( array_agg( data ),',' )  
        FROM (
            SELECT 
                data,
                length( data ) 
            FROM ( 
                SELECT 
                    replace( data, ' ', '' ) AS data 
                FROM 
                    regexp_split_to_table( data, '\S{2,}' ) AS data 
                ) t
            WHERE length( data ) > 2
        ) t ) AS replace_candidates
    FROM
        mystrings
) T
WHERE 
  replace_candidates IS NOT NULL 
```

**在职的**

首先开始查看最里面的查询（带有 的查询`regexp_split_to_table`）

1.  `regexg`获取所有具有`2 characters in a sequence`（不是`separated`空格）的字符串
2.  `regexp_split_to_table`得到匹配的逆，更多信息在[**这里**](http://www.postgresql.org/docs/9.0/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP)
3.  用 a 替换空格`empty char`并过滤`records`具有 a`length greater than 2`

铰孔是`array aggregate`要照顾的功能`formatting`，根据您的要求，[**这里有更多**](http://www.postgresql.org/docs/9.0/static/functions-aggregate.html)

**结果**

```
H e l l o how are you --> {Hello}
I am fine, t h a n k you --> {thank}
This is s t r a n g e text --> {strange}
With c r a z y space b e t w e e n characters --> {crazy,between}
SOME MORE TEST T E X T --> {TEXT} 
```

[**SQLFIDDLE**](http://sqlfiddle.com/#!1/5c038/5)

**注意：**它认为属于 的字符`[space][char][space]`，但是，您可以将其修改为适合您的需要`[space][space][char][space]`或`[space][char][special_char][space]`...

希望这会有所帮助；p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:44:26.493

如果单词存在，您可以使用诸如在线词典之类的资源，那么您不必删除空格，否则删除空格，或者您可以使用一个表格，您必须在其中放置所有存在的字符串，然后您必须检查该表格。希望你明白了我的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:21:09.390

下面找到可能的连接候选：

```
 with mystrings as (
    select 'H e l l o, how are you'::varchar string union all
    select 'I am fine, t h a n k you'::varchar string union all
    select 'This is s t r a n g e text'::varchar string union all
    select 'With c r a z y space b e t w e e n characters'::varchar string 
)

, u as (
select string, strpart[rn] as strpart, rn
from  (
   select *, generate_subscripts(strpart, 1) as rn
   from  (
      select string, string_to_array(replace(string,',',''), ' ') as strpart
      from   mystrings
      ) x
   ) y
)

,w as (
select 
   string,strpart,rn, 
   case when length(strpart) = 1 then 1 else 0 end as indchar ,
   case when coalesce(length(lag(strpart) over()),0) <> 1 and length(strpart) = 1 then 1 else 0 end as strstart,
   case when coalesce(length(lead(strpart) over()),0) <> 1 and length(strpart) = 1 then 1 else 0 end as strend   
from u
) 

,x as (
   select 
      string,rn,strpart,indchar,strstart,
      sum(strstart) over (order by string, rn) as strid 
   from w 
   where indchar = 1 and not (strstart = 1 and strend = 1)
    )

select string, array_to_string(array_agg(strpart),'') as candidate from x group by string, strid 
```

# javascript - 带有两个提交按钮的表单重定向到两个不同的 url

> ID：15808813
> 
> 赞同：-1
> 
> 时间：2013-04-04T10:37:16.853
> 
> 标签：javascript, html

我必须创建一个带有两个提交按钮的 html 表单

他们都必须捕获数据，然后重定向到不同的页面

我用了这段代码

```
<input type="button" name="submit1" value= "submit" onclick="first();">
 <input type="button" name="Submit2" value= "submit and refill "onclick="second();"> 
```

在头部我定义了函数

`

```
**<script type="text/javascript">
function sub() {
new name.target = 'https://www.google.com';
new name.submit();
}
function subr() {
new name.target = 'https://www.gmail.com';
new name.submit();
}
</script>** 
```

但它不起作用..我只需要使用 javascript 和 html

plzzz 求救！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:39:12.250

你有错误的功能名称。

```
<script type="text/javascript">
function first() {
new name.target = 'https://www.google.com';
new name.submit();
}
function second() {
new name.target = 'https://www.gmail.com';
new name.submit();
}
</script> 
```

# android - Android 帐户设置崩溃

> ID：15808816
> 
> 赞同：2
> 
> 时间：2013-04-04T10:37:23.390
> 
> 标签：android

我已经为我的应用程序 (PSM) 创建了一个自定义帐户和一个同步适配器，一切正常当我向我的帐户添加自定义首选项时，问题就出现了

这是我的帐户图片 ![坑](https://i73.servimg.com/u/f73/11/33/95/63/device13.png)

这是我的具有自定义设置类别的帐户 ![t](https://i73.servimg.com/u/f73/11/33/95/63/device11.png)

当我单击此帐户设置（设置崩溃）时，我无法获得堆栈跟踪或任何东西

这些链接上的图片，声誉的事情 ![wef3](https://i73.servimg.com/u/f73/11/33/95/63/device12.png)

这是我的preference.xml的代码片段

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen
  xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory
            android:title="General Settings" >
        <PreferenceScreen
            android:key="account_settings"
            android:title="@string/pref_account_settings_title"
            android:summary="@string/pref_account_settings_summary">
            <intent 
                android:action="android.intent.action.VIEW"
                android:targetPackage="com.example.activities"
                android:targetClass="com.example.activities.OldPSMPreferences" />
        </PreferenceScreen>
    </PreferenceCategory>
</PreferenceScreen> 
```

这是 AndroidManifest.xml 的片段

```
 <activity android:name="com.example.activities.OldPSMPreferences">
        <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

authenticationator.xml 片段

```
<account-authenticator xmlns:android="http://schemas.android.com/apk/res/android"
    android:accountType="com.certifix.psm.account"
    android:icon="@drawable/ic_launcher"
    android:smallIcon="@drawable/ic_launcher"
    android:label="@string/ACCOUNT_NAME"
    android:accountPreferences="@xml/preference"/> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:15:02.540

终于明白了preferences.xml的问题：我把它改成了：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

    <PreferenceCategory android:title="General Settings" />
        <PreferenceScreen
            android:key="account_settings"
            android:title="@string/pref_account_settings_title"
            android:summary="@string/pref_account_settings_summary">
            <intent 
                android:targetPackage="com.example.psm"
                android:targetClass="com.example.psm.activities.OldPSMPreferences"
                />
        </PreferenceScreen>

</PreferenceScreen> 
```

首选项类别不能包含首选项屏幕。另外我必须删除父无用的首选项屏幕

感谢您尝试帮助我：）

# elasticsearch - 在 ElasticSearch 中对字符串数组进行排序

> ID：15808818
> 
> 赞同：5
> 
> 时间：2013-04-04T10:37:36.323
> 
> 标签：elasticsearch

我正在使用以下内容对 Elasticsearch 中具有“usernamesAssigned”属性的文档进行排序。usernamesAssigned 是一个字符串数组：

```
"sort": [
    {
        "_script": {
            "script": "doc["usernamesAssigned"].values.sort().join()",
            "type": "string",
            "lang": "js",
            "order": "asc"
        }
    }
] 
```

我想知道是否有更有效的方法可以在不使用基于脚本的排序的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-29T23:40:28.390

This is an old question, but I recently wandered across it while trying to solve the same problem...

According to the [documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-sort.html):

> Elasticsearch supports sorting by array or multi-valued fields. The mode option controls what array value is picked for sorting the document it belongs to.

So, you should be able to sort like this:

`"sort" : [ {"usernamesAssigned" : {"order" : "asc", "mode" : "min"}} ]`

This has been available since version 0.90.0.Beta1.

# objective-c - 两个类的属性

> ID：15808824
> 
> 赞同：-1
> 
> 时间：2013-04-04T10:37:51.793
> 
> 标签：objective-c

我想要一个看起来像这个 player.type.property 的结果，一个例子是 UILabel，self.label.text。.text 是两个类的属性。

我有一个建议是做这样的事情：

```
player.type = [[MyCustomObject alloc] init];
player.type.property = @"value"; 
```

尽管我不太确定如何正确执行此操作，但我尝试过的每种方法都行不通。

这是我尝试过的：

```
Marketplace.h
#import "Item.h"
@interface Marketplace : NSObject
@property (nonatomic, assign) Item *market;

Item.h
@interface Item : NSObject
@property (nonatomic, assign) int price;

Starter.m
#import "Marketplace.h"
#import "Item.h"
@implementation MainGameDisplay
{
    Marketplace *market;
    Item *itemName;
}

-(void) executedMethod {
    market.itemName = [[market alloc] init];
    //2 errors: "Property 'itemName not found on object of type 'MarketPlace'" and "No visible @interface for 'MarketPlace' declares the selector alloc"
    market.itemName.price = 5; //"Property 'itemName' not found on object of type 'Marketplace*'"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:11:03.387

每个指向类对象的指针都必须是 alloc init，因此您需要覆盖其类中的 -(id)init。

```
Item.h
@interface Item : NSObject
@property (nonatomic) NSInteger price;

Marketplace.h
#import "Item.h"
@interface Marketplace : NSObject
@property (nonatomic, strong) Item *item;//Item is a class, must use strong or retain
Marketplace.m
-(id)init{
if (self = [super init]) {
  self.item = [[Item alloc] init];//Item must alloc together when MarcketPlace init
}
return self;
} 
```

*然后您只需启动 Marketplace

```
@implementation MainGameDisplay
{
    Marketplace *market;
    Item *itemName;
}

-(void) executedMethod {
    market = [Marketplace alloc] init];
//Now you can access
    market.item.price = 5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:15:06.503

1\. 制作一个名为 PlayerType 的接口 将一些属性放在那里并合成它们。2\. 现在创建一个名为 Player 的接口并在那里导入 PlayerType 接口。3\. 创建一个PlayerType 接口的属性，如@property(nonatomic, strong) PlayerType *type。

1.  现在将 Player 设为变量，它将允许您访问属性的属性。

# liferay - 是否可以在 Liferay 6.1 中覆盖 Social Office 主题？

> ID：15808826
> 
> 赞同：0
> 
> 时间：2013-04-04T10:37:54.103
> 
> 标签：liferay, liferay-6, liferay-theme

我想在 Liferay 6.1.20 EE 中覆盖 Social Office 主题（so-theme），因为我想使用它的布局和社交办公体验，但是在 css、页面模板等方面有一些变化。

我已经看过[这个问题](https://stackoverflow.com/questions/13063373/how-to-enhance-social-office-theme-for-liferay) ，但得出的结论是没有办法做到这一点，除了编辑实际的so-theme，这在开发方面和升级方面显然是有问题的。

我已经尝试将整个 so-theme 及其 jar 复制到一个新的主题项目中，这样我就可以拥有一个包含我的更改的 diff 文件夹，但我没有设法让它工作。

我已经在属性文件中进行了适当的更改（插件名称等），在我部署它之后，我可以看到我的新主题（虽然没有图标）但是当我选择它时，会引发以下异常：

```
09:37:23,043 INFO  [com.liferay.portal.plugin.PluginPackageUtil][PluginPackageUtil:1465] Finished checking for available updates in 1125 ms
Exception in thread "http-bio-9091-exec-4" java.lang.StackOverflowError
    at java.util.HashMap.getEntry(HashMap.java:344)
    at java.util.HashMap.containsKey(HashMap.java:335)
    at org.apache.catalina.connector.Request.setAttribute(Request.java:1512)
    at org.apache.catalina.connector.RequestFacade.setAttribute(RequestFacade.java:542)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:62)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206) 
```

有可能以某种方式管理它吗？也许在我的主题的属性文件中有一些额外的配置？如果需要，我可以提供更多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:39:34.930

以开发友好的方式访问 so-theme 的最简单方法是仅[使用 source](https://github.com/liferay/liferay-plugins/tree/master/themes/so-theme)。（选择正确的标签/分支）。应该比手动创建 _diffs 文件夹更容易。如果没有帮助，请尝试并报告

# c# - 如何禁用矩形控件内的按钮？

> ID：15808839
> 
> 赞同：0
> 
> 时间：2013-04-04T10:38:18.043
> 
> 标签：c#, winforms

我想禁用矩形控件内的按钮。我尝试了以下代码来禁用此功能：

```
btn.Enabled=false; 
```

但它对我不起作用，因为我是 Windows 编程新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:40:55.063

尝试这个：

```
 btn.Enabled = false; 
```

# wpf - 如何使用加密的 xml 文件作为 xaml 数据绑定的应用程序资源？

> ID：15808851
> 
> 赞同：1
> 
> 时间：2013-04-04T10:38:55.000
> 
> 标签：wpf, xml, encryption, resources, xmldataprovider

我想使用加密的 xml 文件作为应用程序资源，以便轻松绑定 xaml 数据。Xml 文件在不同的应用程序中被加密。我可以使用未加密的 xml 进行数据绑定。我不能对加密的 xml 使用相同的方法，因为文件在加载时是加密的。我必须先解密它才能使用它。问题是，我在哪里放解密算法？

在这里我如何创建加密文件（省略了解密和验证解密数据的代码）

```
 RijndaelManaged algorithm = null;

            algorithm = new RijndaelManaged();
            string passwordBytes = "password"; //password here
            byte[] saltBytes = Encoding.UTF8.GetBytes("salt"); // salt here (another string)
            var p = new Rfc2898DeriveBytes(passwordBytes, saltBytes);
            algorithm.IV = p.GetBytes(algorithm.BlockSize / 8);
            algorithm.Key = p.GetBytes(algorithm.KeySize / 8);

            var xmlDoc = new XmlDocument();
            xmlDoc.PreserveWhitespace = true;
            xmlDoc.Load("Bands.xml");

            // Encrypt the "Bands" element.
            Encrypt(xmlDoc, "Bands", algorithm);
            xmlDoc.Save("encryptedBands.xml"); 
```

要解密，我只是调用这些（假设 xmlDoc 和算法与上面相同。

```
Decrypt(xmlDoc, algorithm); 
```

下面是基于msdn的加解密算法（没什么特别的）。

```
 public static void Encrypt(XmlDocument Doc, string ElementName, SymmetricAlgorithm Key)
    {
        // Check the arguments.   
        if (Doc == null)
            throw new ArgumentNullException("Doc");
        if (ElementName == null)
            throw new ArgumentNullException("ElementToEncrypt");
        if (Key == null)
            throw new ArgumentNullException("Alg");

        var elementToEncrypt = Doc.GetElementsByTagName(ElementName)[0] as XmlElement;
        // Throw an XmlException if the element was not found. 
        if (elementToEncrypt == null)
        {
            throw new XmlException("The specified element was not found");

        }

        var eXml = new EncryptedXml();

        byte[] encryptedElement = eXml.EncryptData(elementToEncrypt, Key, false);

        var edElement = new EncryptedData();
        edElement.Type = EncryptedXml.XmlEncElementUrl;

        string encryptionMethod = null;

        if (Key is TripleDES)
        {
            encryptionMethod = EncryptedXml.XmlEncTripleDESUrl;
        }
        else if (Key is DES)
        {
            encryptionMethod = EncryptedXml.XmlEncDESUrl;
        }
        if (Key is Rijndael)
        {
            switch (Key.KeySize)
            {
                case 128:
                    encryptionMethod = EncryptedXml.XmlEncAES128Url;
                    break;
                case 192:
                    encryptionMethod = EncryptedXml.XmlEncAES192Url;
                    break;
                case 256:
                    encryptionMethod = EncryptedXml.XmlEncAES256Url;
                    break;
            }
        }
        else
        {
            // Throw an exception if the transform is not in the previous categories 
            throw new CryptographicException("The specified algorithm is not supported for XML Encryption.");
        }

        edElement.EncryptionMethod = new EncryptionMethod(encryptionMethod);

        // Add the encrypted element data to the  
        // EncryptedData object.
        edElement.CipherData.CipherValue = encryptedElement;
        EncryptedXml.ReplaceElement(elementToEncrypt, edElement, false);
    }

    public static void Decrypt(XmlDocument Doc, SymmetricAlgorithm Alg)
    {
        // Check the arguments.   
        if (Doc == null)
            throw new ArgumentNullException("Doc");
        if (Alg == null)
            throw new ArgumentNullException("Alg");

        // Find the EncryptedData element in the XmlDocument.
        var encryptedElement = Doc.GetElementsByTagName("EncryptedData")[0] as XmlElement;

        // If the EncryptedData element was not found, throw an exception. 
        if (encryptedElement == null)
        {
            throw new XmlException("The EncryptedData element was not found.");
        }

        // Create an EncryptedData object and populate it.
        var edElement = new EncryptedData();
        edElement.LoadXml(encryptedElement);

        // Create a new EncryptedXml object.
        var exml = new EncryptedXml();

        // Decrypt the element using the symmetric key. 
        byte[] rgbOutput = exml.DecryptData(edElement, Alg);

        // Replace the encryptedData element with the plaintext XML element.
        exml.ReplaceData(encryptedElement, rgbOutput);

    } 
```

我想使用加密的 xml 数据作为数据源，以便在 xaml 中轻松进行数据绑定。我在应用程序级别声明 xml 数据以进行应用程序范围的访问。这是我在 App.xaml 中声明它的方式。

```
 <Application.Resources>
    <ResourceDictionary>
        <XmlDataProvider x:Key="encryptedBandsDataSource" Source="/RemoteConfigurator;component/encryptedBands.xml" d:IsDataSource="True"/>
    </ResourceDictionary>
</Application.Resources> 
```

问题是，我需要在加载 App.xaml 之前解密 xml 文件。有没有可能做到这一点。我怎么做。我在哪里解密xml文件？

简而言之，如何使用加密的 xml 文件作为应用程序资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:15:59.353

两种选择，一种是快速的，一种是干净的……

**选项 1（快速）：在加载应用程序之前解密文件**

如果你解密你的文件，在 app.xaml.cs 中调用 base.OnStartup(e) 之前，它应该可以工作......

```
using System.Windows;

namespace MainApplication
{
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App
    {
        protected override void OnStartup(StartupEventArgs e)
        {
            DecryptXml();
            base.OnStartup(e);

            MainBootstrapper bootstrapper = new MainBootstrapper();
            bootstrapper.Run();
        }
    } 
```

}

**选项 2（干净）：自定义 XmlDataProvider 来处理加密的 XML 文件**

另一种选择是编写一个自定义 XmlDataProvider，比如`EncryptedXmlDataProvider`，它包含一个`EncryptedSource`属性和一些其他属性来指定如何解密文件。设置属性`EncryptedXmlDataProvider`时可以解密文件。`EncryptedSource`这样，数据是可混合的，并且您拥有可重用的类型。比上面提出的解决方案多一点工作但更清洁。

# c# - 如何在 WCF 服务响应中正确实现自定义 soap 1.2 标头和 WS-Addressing

> ID：15808852
> 
> 赞同：2
> 
> 时间：2013-04-04T10:38:57.313
> 
> 标签：c#, wcf, soap

我是 WCF 新手。我正在托管由第三方应用程序 (TPA) 调用的 WCF 服务。TPA 要求 wcf 服务响应具有自定义标头，并且响应肥皂信封应如下所示：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"
               xmlns:stan="http://client/schema/framework/header/standardheaderresponse"
               xmlns:sys="http://client/schema/framework/common/systemidentifier"  >

  <soap:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <stan:StandardHeaderResponse>
      <stan:From>
        <sys:Identifier>BUS</sys:Identifier>
        <sys:Name>BuildingEvent</sys:Name>
        <sys:Version>1</sys:Version>
      </stan:From>
      <stan:Timestamp>2013-03-15T03:05:41.000</stan:Timestamp>
      <stan:CorrelationID>uuid:c12c9e48-8164-4074-9c8c-2b979804dbd2</stan:CorrelationID>
    </stan:StandardHeaderResponse>

    <wsa:Action> 
      http://client/service.buildingloc.event.BuildingEvent.SendEvent
    </wsa:Action>
    <wsa:MessageID>uuid:ab4c4001-f089-721c-aae6-f51ec37d3501</wsa:MessageID>
    <wsa:To>http://www.w3.org/2005/08/addressing/anonymous</wsa:To>
    <wsa:RelatesTo>uuid:de9a7007-f056-431c-aae6-f51ec37d3488</wsa:RelatesTo>
  </soap:Header>

  <soap:Body>
    …
  </soap:Body>

</soap:Envelope> 
```

我的服务使用自定义 wcf 绑定，如下所示：

```
var binding     = new CustomBinding();   
binding.Elements.Add( new TextMessageEncodingBindingElement() { MessageVersion = MessageVersion.Soap12WSAddressing10 } );
binding.Elements.Add( new HttpTransportBindingElement() ); 
```

要在我的响应中添加自定义肥皂标题，我正在使用 IDispatchMessageInspector，它看起来如下所示：

```
 public void BeforeSendReply(ref Message reply, object correlationState)
        {
            reply.Headers.Add(new StandardHeaderResponse());
        } 
```

和 MessageHeader 如下：

```
[MessageContract]
    public class StandardHeaderResponse : MessageHeader
    {
        #region Overrides of MessageHeaderInfo

        public override string Name
        {
            get { return GetType().Name; }
        }

        public override string Namespace
        {
            get { return "client/schema/framework/header/standardheaderresponse"; }
        }

        #endregion

        #region Overrides of MessageHeader

        protected override void OnWriteHeaderContents(XmlDictionaryWriter writer, MessageVersion messageVersion)
        {
            writer.WriteElementString("Key", "Value");
        }

        #endregion
    } 
```

但是当我运行服务并从我的测试客户端发出请求时，我在 Fiddler 中得到以下输出

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
  <s:Header>
    <a:RelatesTo>urn:uuid:953e0b5b-44c6-4994-aae2-7710c31cb8f0</a:RelatesTo>
    <StandardHeaderResponse>
      <Key>Value</Key>
    </StandardHeaderResponse>
  </s:Header>
  <s:Body> 
   ...   
  </s:Body>
</s:Envelope> 
```

这与 TPA 的预期完全不同。我需要做什么才能使提琴手输出看起来更像 TPA 所期望的。为什么不是所有的 WS-Address 元素都像`<wsa:Action>`, `<wsa:MessageID>`并被`<wsa:RelatesTo>`呈现为标题的一部分。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T22:36:26.000

这是一个例子。我已经使用适当的命名空间和 DataMembers 制作了 DataContract 类。然后我将根类的实例添加到消息头。为了填充 WSA 元素，我使用了 Message.Headers 集合上的属性。

```
 class Program
{
    [DataContract( Namespace = "http://client/schema/framework/header/standardheaderresponse" )]
    public class StandardHeaderResponse
    {
        [DataMember( Order = 1 )]
        public FromHeaderResponse From { get; set; }

        [DataMember( Order = 2 )]
        public DateTime Timestamp { get; set; }

        [DataMember( Order = 3 )]
        public Guid CorrelationID { get; set; }
    }

    [DataContract( Namespace = "http://client/schema/framework/common/systemidentifier" )]
    public class FromHeaderResponse
    {
        [DataMember( Order = 1 )]
        public string Identifier { get; set; }

        [DataMember( Order = 2 )]
        public string Name { get; set; }

        [DataMember( Order = 3 )]
        public int Version { get; set; }
    }

    static void Main( string[] args )
    {
        Message message = Message.CreateMessage( MessageVersion.Default, "http://client/service.buildingloc.event.BuildingEvent.SendEvent", "Message body" );

        var header = new StandardHeaderResponse()
        {
            CorrelationID = Guid.NewGuid(),
            Timestamp = DateTime.Now,
            From = new FromHeaderResponse()
            {
                Identifier = "BUS",
                Name = "BuildingEvent",
                Version = 1
            }
        };

        message.Headers.Add( MessageHeader.CreateHeader( "StandardHeaderResponse", "http://client/schema/framework/header/standardheaderresponse", header ) );
        message.Headers.Action = @"http://client/service.buildingloc.event.BuildingEvent.SendEvent";
        message.Headers.To = new Uri( @"http://www.w3.org/2005/08/addressing/anonymous" );
        message.Headers.MessageId = new System.Xml.UniqueId( Guid.NewGuid() );
        message.Headers.RelatesTo = new System.Xml.UniqueId( Guid.NewGuid() );

        Console.WriteLine( message.ToString() );
        Console.WriteLine( "Press any key to exit..." );
        Console.ReadKey();
    }
} 
```

结果消息如下所示：

```
<s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:s="http://www.w3.org/2003/05/soap-envelope">
  <s:Header>
    <a:Action s:mustUnderstand="1">http://client/service.buildingloc.event.BuildingEvent.SendEvent</a:Action>
    <StandardHeaderResponse xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://client/schema/framework/header/standardheaderresponse">
      <From xmlns:d4p1="http://client/schema/framework/common/systemidentifier">
        <d4p1:Identifier>BUS</d4p1:Identifier>
        <d4p1:Name>BuildingEvent</d4p1:Name>
        <d4p1:Version>1</d4p1:Version>
      </From>
      <Timestamp>2013-04-10T00:17:13.8001086+02:00</Timestamp>
      <CorrelationID>6fa83bf3-95f2-4101-aa78-b271a9e96aae</CorrelationID>
    </StandardHeaderResponse>
    <a:To s:mustUnderstand="1">http://www.w3.org/2005/08/addressing/anonymous</a:To>
    <a:MessageID>urn:uuid:88bc7f91-1de6-4c08-84bc-de75e029337d</a:MessageID>
    <a:RelatesTo>urn:uuid:6dd90731-5ca3-4c83-949b-194ee9da4b6c</a:RelatesTo>
  </s:Header>
  <s:Body>
    <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">Message  body</string>
  </s:Body>
</s:Envelope> 
```

它的格式不完全相同，但它是相同的消息。

希望这可以帮助。

# android - 列表视图中的动态视图

> ID：15808855
> 
> 赞同：0
> 
> 时间：2013-04-04T10:39:07.813
> 
> 标签：android, android-listview

我正在创建一种具有歌曲列表视图的音乐播放器（在当前播放歌曲附近有进度条）

重要的是我有一个带有可以从外部更改的视图的项目（在某些处理程序中）

```
 public View getView(int i, View convertView, ViewGroup viewGroup) {
   RelativeLayout result;

        if (convertView == null) {
            result = (RelativeLayout) inflater.inflate(R.layout.list_item, viewGroup, false);
        } else {
            result = (RelativeLayout) convertView;
        }

        ...
        ProgressBar progressBar = result.findViewById(R.id.progressBar)
        ...

        if (i == currentSong) {
           // saving to instance variable
           this.currentlyPlayingProgressBar = progressBar;
        } else {
           progressBar.setVisibility(View.GONE);
        }
        ...       
        return result;
} 
```

（代码已更改以关注我的问题）

顺便说一句 currentSong 可以从外部更改，在这种情况下正在调用 adapter.notifyDataSetChanged() 。

似乎我使用 listView 不正确，但我不知道更好的方法。

主要问题是我需要链接到视图来更改它们。我能得到它们的唯一方法是在 getView 方法中，它以只有谷歌开发人员可以解释的方式重用这些视图=（

* * *

## 第一个问题

这一切都发生在 Fragment 中，它只是 viewPager 的一部分。当用户滚动此片段然后回滚时，将调用 getView 方法，其中包含一些奇怪的对象。我用这个无效值覆盖 currentPlayingProgressBar。这导致我的状态栏冻结。（它开始更新错误的视图）

而且我不知道它是哪种观点..

* * *

## 第二个问题

我正在重用列表项，这意味着当用户向下滚动列表视图时-有时他实际上会得到具有相同进度条的相同列表项。这个 progressBar 必须是不可见的，但它不是（我认为这完全是因为我从外部使用了 currentPlayingProgressBar）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:58:28.723

您可以通过两种方式做到这一点：

1) notifyDataSetChanged，它只是重置整个 ListView 并将所有可见的列表项再次分配给视图。notifyDataSetChanged 非常昂贵，因为它会重新创建整个列表和视图层次结构，测量布局等，这很慢。对于单个列表项的频繁更新，例如进度条的变化，这是矫枉过正的。

2) 查找特定列表视图项目的视图，并仅更新该项目。我们将专注于这种方法。

首先，您需要以某种方式确定哪个列表视图包含哪个列表项。常见的方法是在 Adapter.getView 中使用[View.setTag](http://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)，[其中](http://developer.android.com/reference/android/view/View.html#setTag%28int,%20java.lang.Object%29)setTag 参数是您选择的对象，可能与您为[Adapter.getItem](http://developer.android.com/reference/android/widget/Adapter.html#getItem%28int%29)返回的项目相同。所以后来你知道哪个 ListView 子视图分配了哪个项目。

假设您要更新 ListView 中显示的特定项目，您必须遍历 ListView 子视图以查找显示您的项目的视图：

```
Object myItem = ...;
for(int i = list.getChildCount(); --i>=0; ){
     View v = list.getChildAt(i);
     Object tag = v.getTag();
     if(tag==myItem) {
        // found, rebind this item
        bindItemToView(myItem, v);
        break;
     }
  } 
```

您必须期望 ListView 当前可能不会显示您的列表项（已滚动）。

从上面的代码中，您可以看到它调用了 bindItemToView，这是您将项目绑定到列表视图的函数。您可能会调用相同的函数来在 Adapter.getView 中设置项目视图。

您还可以进一步优化它，假设您只想更新 ProgressBar，然后不要调用 bindItemToView，而是只更新列表项视图中的 ProgressBar（findViewById，设置值）。

[提示：您可以使用ViewHolder 方法](http://developer.android.com/training/improving-layouts/smooth-scrolling.html#ViewHolder)使其更加优化。然后 setTag 将不包含您的项目对象，而是您的 ViewHolder 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T14:36:38.423

@Pointer null 也提供了非常有用的方法，但是在您的情况下，我认为您正在更新不可见的列表，在这种情况下，您必须像列表索引一样从适配器设置标签，并相应地检查列表项是否存在于最后一个可见项目或第一个可见项目之间，然后更新它，否则不更新..

# android - 在Android上正确使用Sqlite（SQLiteOpenHelper、连接、主线程等...）

> ID：15808861
> 
> 赞同：14
> 
> 时间：2013-04-04T10:39:25.523
> 
> 标签：android, sqlite

我正在搜索有关 Android 上的 SQLite 的信息，并阅读了一些有关 Android 编程的书籍的一些章节，但我不知道如何真正在 Android 上正确使用 SQLite。

我正在开发一个具有活动、服务和广播接收器的应用程序，它们都必须在数据库中读取和写入数据。所以我有一些问题：

*   创建`SQLiteOpenHelper`实例的最佳位置在哪里？我读到了这个，似乎最好的方法是只`SQLiteOpenHelper`为所有应用程序。
*   我需要在何时何地`SQLiteDatabase`通过调用`dbHelper.getReadableDatabase()`（或`getWritableDatabase`）来获取对象？我需要在每个查询上执行它，在每个查询后关闭它？
*   我读到我不应该在主线程中执行数据库操作，所以我为我在 Activity 中执行的每个数据库操作创建了一个异步任务，这是最好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T11:00:29.160

大多数问题都是相当主观的。但让我试一试

> 创建 SQLiteOpenHelper 实例的最佳位置在哪里？我读到了这个，似乎最好的方法是对所有应用程序只使用 SQLiteOpenHelper。

您可以在项目中创建一个*扩展*`SQLiteOpenHelper`. 当您要在应用程序中访问多个相同的*数据库时，这很有帮助。*`Activities`

> 我需要在何时何地通过调用 dbHelper.getReadableDatabase()（或 getWritableDatabase）来获取 SQLiteDatabase 对象？我需要在每个查询上执行它，在每个查询后关闭它？

这将在扩展*SQLiteOpenHelper的**类*中完成。例如：（*这是本文末尾提供的 Vogella 文章的摘录*）

 **```
public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
} 
```

在将使用该类的活动中：

```
CommentsDataSource datasource = new CommentsDataSource(this);
datasource.open(); 
```

当您*使用*. _ `Cursor`_`Database` *`Activity``Database`*

 **当您阅读稍后链接的网页时，上面的代码将有意义。*

> 我读到我不应该在主线程中执行数据库操作，所以我为我在 Activity 中执行的每个数据库操作创建了一个异步任务，这是最好的方法吗？

理想情况下，是的。我个人建议使用*Asynctask*，尤其是在处理大型记录集时。

最后，我建议您阅读 Lars Vogella 的本教程：[http](http://www.vogella.com/articles/AndroidSQLite/article.html) ://www.vogella.com/articles/AndroidSQLite/article.html 。它将解决您的大部分顾虑和疑问。祝你好运。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:53:47.187

**1.创建 SQLiteOpenHelper 实例的最佳位置在哪里？**

SQLiteOpenHelper 帮助您连接使用它定义的表。因此您可以在一个 SQLiteOpenHelper 类中定义所有表。

**2.何时、何地需要调用dbHelper.getReadableDatabase()（或getWritableDatabase）来获取SQLiteDatabase对象？**

每当您想在定义的表中写入数据时，您都需要调用**getWritableDatabase**并且要从中读取数据，您将需要**getReadableDatabase**

您可以为此目的创建 CRUD（创建、检索、更新、删除）函数。

3 **、千万不要在主线程中做数据库操作！**

我不确定这个。

那么这里有一个链接让你开始使用 SQLite- [http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)***

# javascript - 从 div 生成图像 (JSF, Javascript)

> ID：15808873
> 
> 赞同：0
> 
> 时间：2013-04-04T10:40:06.897
> 
> 标签：javascript, image, jsf, html

我正在寻找一种工具，我可以用它渲染一个包含所有内部元素的 div 并将其保存为图像。服务器上没有运行 PHP，只有 Java Server Faces 和一些 Javascript 代码。是否有任何工具可以使用给定的资源来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:51:10.640

先将html转成canvas，然后从bitmapdata中获取canvas的图片，然后保存到服务器端

这可以通过 html2canvas [http://html2canvas.hertzen.com/来实现](http://html2canvas.hertzen.com/)

# amazon-web-services - 通过移动应用上传到 S3 的最安全解决方案

> ID：15808874
> 
> 赞同：2
> 
> 时间：2013-04-04T10:40:10.043
> 
> 标签：amazon-web-services, amazon-s3

我需要通过移动应用程序在 AWS S3 上上传文件。我找到了 2 个解决方案来处理它。两种解决方案都有效，但我没有足够的能力来确定最安全的解决方案。

1.  使用Secure Token Service (STS) Amazon Web Services 提供的**临时凭证。**

    1.  我的服务器使用 AWS 账户 access_key_id 和 secret_access_key 请求 STS 的临时凭证（具有受限权限）
    2.  然后我的服务器将临时凭证（access_key_id、secret_access_key 和 session_token）发送到移动应用程序
    3.  移动应用使用具有特定请求签名（在移动端计算）的临时凭证在 S3 上发送文件
2.  使用**永久凭证**（AWS 账户 access_key_id 和 secret_access_key）

    1.  我的服务器直接创建请求签名（使用 AWS 账户 access_key_id 和 secret_access_key）并将请求“元素/结构”（包括生成的签名、所需的标头...）发送到移动应用程序
    2.  移动应用程序使用带有服务器提供的签名的“元素”在 S3 上发送文件

第二种解决方案更简单。但该解决方案似乎不太安全：帐户 access_key_id 被公开，并且直接使用帐户 secret_access_key 生成签名。用于生成签名的摘要算法是 HMAC-SHA1。是否足够安全？

第二种解决方案公开具有过期时间的临时凭证：公开有限的凭证更加安全。如果 HMAC-SHA1 算法足够安全以使 secret_access_key 无法检索，我不明白我为什么会选择这个解决方案。

感谢您的投入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:46:08.577

您的临时解决方案本质上是一个[Token Vending Machine](http://aws.amazon.com/articles/4611615499399490)。这是我们推荐的将凭证获取到设备上以与我们的 AWS 移动开发工具包一起使用的方法。发送临时凭证的内在好处是它们可以用于访问 S3 之外的其他服务。

# javascript - 如何在谷歌地图多边形内绘制直线

> ID：15808875
> 
> 赞同：5
> 
> 时间：2013-04-04T10:40:12.113
> 
> 标签：javascript, google-maps, google-maps-api-3, polygon

我已经使用`google map javascript API V3`. 我正在绘制邮政编码多边形的数量。根据某些条件，多边形具有不同的颜色。现在我想根据某些标准在一些多边形内绘制直线/哈希标记。我们该怎么做。下面是我为绘制多边形而编写的代码。

```
{% if zip.zip_info.zip_polygon %}
    var path = [
        {% for polycoord in zip.zip_info.zip_polygon %}
            new google.maps.LatLng({{polycoord.1}}, {{polycoord.0}}),
        {% endfor %}
        ];

    var polygon_{{ forloop.counter }} = new google.maps.Polygon(
    {
        path:path, 
        clickable:true,
        strokeColor: '#000000',
        strokeOpacity: 0.15,
        strokeWeight: 2,
        fillColor: fillColor,
        fillOpacity: 1,
        zipcode: '{{zip.zip_info.zipcode}}'
    });

    polygon_{{ forloop.counter }}.setMap(map);

{% endif %} 
```

我还提供了我的要求的图片链接。

![在此处输入图像描述](https://i.stack.imgur.com/g0xeA.jpg)

您可以在图像中看到一些多边形用直线着色，而另一些则只用颜色着色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T17:37:56.663

我一直在研究同样的问题。这就是我到目前为止所拥有的：[**jsFiddle of Example**](http://jsfiddle.net/bryan_weaver/7YLtY/)

该`BW.PolyLineFill`函数创建一个[自定义叠加层](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)。它需要 4 个参数，最后两个是可选的。

```
 1\. path: an array of Google LatLng objects   
 2\. map: the map to attach theoverlay to 
 3\. fillColor: (optional) the color of the fill, default is red. 
 4\. strokeColor: (optional) the stroke color, default is black 
```

我还没有测试过性能，它可能还需要更多的调整，但它应该能让你开始。

相关代码：

```
PolyLineFill.prototype = new google.maps.OverlayView();
function PolyLineFill(poly, map, fill, stroke) {
    var bounds = new google.maps.LatLngBounds();
    for (var i = 0; i < poly.length; i++) {
        bounds.extend(poly[i]);
    }

    //initialize all properties.
    this.bounds_ = bounds;
    this.map_ = map;
    this.div_ = null;
    this.poly_ = poly;
    this.polysvg_ = null;
    this.fill_ = fill;
    this.stroke_ = stroke;

    // Explicitly call setMap on this overlay
    this.setMap(map);
}

PolyLineFill.prototype.onAdd = function () {
    // Create the DIV and set some basic attributes.
    var div = document.createElement('div');
    div.style.borderStyle = 'none';
    div.style.borderWidth = '0px';
    div.style.position = 'absolute';

    //createthe svg element
    var svgns = "http://www.w3.org/2000/svg";
    var svg = document.createElementNS(svgns, "svg");
    svg.setAttributeNS(null, "preserveAspectRatio", "xMidYMid meet");

    var def = document.createElementNS(svgns, "defs");

    //create the pattern fill 
    var pattern = document.createElementNS(svgns, "pattern");
    pattern.setAttributeNS(null, "id", "lineFill");
    pattern.setAttributeNS(null, "patternUnits", "userSpaceOnUse");
    pattern.setAttributeNS(null, "patternTransform", "rotate(-45)");
    pattern.setAttributeNS(null, "height", "7");
    pattern.setAttributeNS(null, "width", "7");
    def.appendChild(pattern);

    var rect = document.createElementNS(svgns, "rect");
    rect.setAttributeNS(null, "id", "rectFill");
    rect.setAttributeNS(null, "fill", this.fill_ || "red");
    rect.setAttributeNS(null, "fill-opacity", "0.3");
    rect.setAttributeNS(null, "stroke", this.stroke_ || "#000");
    rect.setAttributeNS(null, "stroke-dasharray", "7,7");
    rect.setAttributeNS(null, "height", "7");
    rect.setAttributeNS(null, "width", "7");
    pattern.appendChild(rect);

    svg.appendChild(def);

    //add polygon to the div
    var p = document.createElementNS(svgns, "polygon");
    p.setAttributeNS(null, "fill", "url(#lineFill)");
    p.setAttributeNS(null, "stroke", "#000");
    p.setAttributeNS(null, "stroke-width", "1");
    //set a reference to this element;
    this.polysvg_ = p;
    svg.appendChild(p);

    div.appendChild(svg);

    // Set the overlay's div_ property to this DIV
    this.div_ = div;

    // We add an overlay to a map via one of the map's panes.
    // We'll add this overlay to the overlayLayer pane.
    var panes = this.getPanes();
    panes.overlayLayer.appendChild(div);
}

PolyLineFill.prototype.AdjustPoints = function () {
    //adjust the polygon points based on the projection.
    var proj = this.getProjection();
    var sw = proj.fromLatLngToDivPixel(this.bounds_.getSouthWest());
    var ne = proj.fromLatLngToDivPixel(this.bounds_.getNorthEast());

    var points = "";
    for (var i = 0; i < this.poly_.length; i++) {
        var point = proj.fromLatLngToDivPixel(this.poly_[i]);
        if (i == 0) {
            points += (point.x - sw.x) + ", " + (point.y - ne.y);
        } else {
            points += " " + (point.x - sw.x) + ", " + (point.y - ne.y);
        }
    }
    return points;
}

PolyLineFill.prototype.draw = function () {
    // Size and position the overlay. We use a southwest and northeast
    // position of the overlay to peg it to the correct position and size.
    // We need to retrieve the projection from this overlay to do this.
    var overlayProjection = this.getProjection();

    // Retrieve the southwest and northeast coordinates of this overlay
    // in latlngs and convert them to pixels coordinates.
    // We'll use these coordinates to resize the DIV.
    var sw = overlayProjection
                .fromLatLngToDivPixel(this.bounds_.getSouthWest());
    var ne = overlayProjection
                .fromLatLngToDivPixel(this.bounds_.getNorthEast());

    // Resize the image's DIV to fit the indicated dimensions.
    var div = this.div_;
    div.style.left = sw.x + 'px';
    div.style.top = ne.y + 'px';
    div.style.width = (ne.x - sw.x) + 'px';
    div.style.height = (sw.y - ne.y) + 'px';

    this.polysvg_.setAttributeNS(null, "points", this.AdjustPoints());
}

PolyLineFill.prototype.onRemove = function () {
    this.div_.parentNode.removeChild(this.div_);
    this.div_ = null;
}
window.BW = {};
window.BW.PolyLineFill = PolyLineFill; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-13T15:17:02.183

我已经研究过 Bryan Weaver 的解决方案，以便使用绘图管理器使其适用于可编辑的多边形。这是我的[jsfiddle示例](https://jsfiddle.net/HeitorZ/tgu6brdq/5/)

```
function initialize() {
   var map = new google.maps.Map(document.getElementById('map-canvas'), {
     zoom: 5,
     center: {
       lat: 24.886,
       lng: -70.268
     },
     mapTypeId: 'terrain'
   });

   var drawingManager = new google.maps.drawing.DrawingManager({
     drawingControl: true,
     drawingControlOptions: {
       position: google.maps.ControlPosition.TOP_CENTER,
       drawingModes: [google.maps.drawing.OverlayType.POLYGON]
     },

     polygonOptions: {
       fillOpacity: 0,
       strokeWeight: 1,
       strokeColor: '#ff0000',
       clickable: true,
       editable: true,
       draggable: true,
     }
   });

   drawingManager.setMap(map);
   google.maps.event.addListener(drawingManager, 'overlaycomplete', function(event) {
     var poly = event.overlay;
     poly.bk = new BW.PolyLineFill(poly.getPath(), this.map, "red", "#000");

     google.maps.event.addListener(poly, 'dragstart', function(event) {
       if (poly.bk != null) {
         poly.bk.setMap(null);
         poly.bk = null
       }
       poly.isBeingDragged = true;
     });

     google.maps.event.addListener(poly, 'dragend', function(event) {
       if (poly.bk != null) {
         poly.bk.setMap(null);
         poly.bk = null
       }
       poly.bk = new BW.PolyLineFill(poly.getPath(), poly.map, "red", "#000");
       poly.isBeingDragged = false;
     });

     google.maps.event.addListener(poly.getPath(), 'set_at', function(event) {
       if (poly.isBeingDragged) return;
       console.log('set_at');
       if (poly.bk != null) {
         poly.bk.setMap(null);
         poly.bk = null
       }
       poly.bk = new BW.PolyLineFill(poly.getPath(), poly.map, "red", "#000");
     });

     google.maps.event.addListener(poly.getPath(), 'insert_at', function(event) {
       if (poly.bk != null) {
         poly.bk.setMap(null);
         poly.bk = null
       }
       poly.bk = new BW.PolyLineFill(poly.getPath().b, poly.map, "red", "#000");
     });

     drawingManager.setDrawingMode(null);
   });

 }

 ///Start custom poly fill code
 PolyLineFill.prototype = new google.maps.OverlayView();

 function PolyLineFill(poly, map, fill, stroke) {
   var bounds = new google.maps.LatLngBounds();
   for (var i = 0; i < poly.length; i++) {
     bounds.extend(poly.getAt(i));
   }

   //initialize all properties.
   this.bounds_ = bounds;
   this.map_ = map;
   this.div_ = null;
   this.poly_ = poly;
   this.polysvg_ = null;
   this.fill_ = fill;
   this.stroke_ = stroke;

   // Explicitly call setMap on this overlay
   this.setMap(map);
 }

 PolyLineFill.prototype.onAdd = function() {
   // Create the DIV and set some basic attributes.
   var div = document.createElement('div');
   div.style.borderStyle = 'none';
   div.style.borderWidth = '0px';
   div.style.position = 'absolute';

   //https://www.w3schools.com/graphics/svg_reference.asp
   //createthe svg element
   var svgns = "http://www.w3.org/2000/svg";
   var svg = document.createElementNS(svgns, "svg");
   svg.setAttributeNS(null, "height", "100%");
   svg.setAttributeNS(null, "width", "100%");
   svg.setAttributeNS(null, "preserveAspectRatio", "xMidYMid meet");

   //A container for referenced elements
   var def = document.createElementNS(svgns, "defs");

   //create the pattern fill 
   var pattern = document.createElementNS(svgns, "pattern");
   //***************************CHANGE PATTERN HERE**********************************     
   pattern.setAttributeNS(null, "id", "lineFill");
   pattern.setAttributeNS(null, "patternUnits", "userSpaceOnUse");
   //pattern.setAttributeNS(null, "patternTransform", "rotate(-33)");

   pattern.setAttributeNS(null, "height", "60");
   pattern.setAttributeNS(null, "width", "60");
   def.appendChild(pattern);

   var rect = document.createElementNS(svgns, "rect");
   rect.setAttributeNS(null, "id", "rectFill");
   rect.setAttributeNS(null, "fill", "green");
   rect.setAttributeNS(null, "fill-opacity", "0.25");
   rect.setAttributeNS(null, "stroke", "#0000FF");
   rect.setAttributeNS(null, "stroke-width", "8");
   rect.setAttributeNS(null, "stroke-opacity", "0.25");
   rect.setAttributeNS(null, "stroke-dasharray", "10 10");
   rect.setAttributeNS(null, "x", "5");
   rect.setAttributeNS(null, "y", "5");
   rect.setAttributeNS(null, "height", "50");
   rect.setAttributeNS(null, "width", "50");
   rect.setAttributeNS(null, "rx", "25");
   rect.setAttributeNS(null, "ry", "25");
   pattern.appendChild(rect);

   svg.appendChild(def);

   //add polygon to the div
   var p = document.createElementNS(svgns, "polygon");
   p.setAttributeNS(null, "fill", "url(#lineFill)");
   //set a reference to this element;
   this.polysvg_ = p;
   svg.appendChild(p);

   div.appendChild(svg);

   // Set the overlay's div_ property to this DIV
   this.div_ = div;

   // We add an overlay to a map via one of the map's panes.
   // We'll add this overlay to the overlayLayer pane.
   var panes = this.getPanes();
   panes.overlayLayer.appendChild(div);
 }

 PolyLineFill.prototype.AdjustPoints = function() {
   //adjust the polygon points based on the projection.
   var proj = this.getProjection();
   var sw = proj.fromLatLngToDivPixel(this.bounds_.getSouthWest());
   var ne = proj.fromLatLngToDivPixel(this.bounds_.getNorthEast());

   var points = "";
   for (var i = 0; i < this.poly_.length; i++) {
     var point = proj.fromLatLngToDivPixel(this.poly_.getAt(i));
     if (i == 0) {
       points += (point.x - sw.x) + ", " + (point.y - ne.y);
     } else {
       points += " " + (point.x - sw.x) + ", " + (point.y - ne.y);
     }
   }
   return points;
 }

 PolyLineFill.prototype.draw = function() {
   // Size and position the overlay. We use a southwest and northeast
   // position of the overlay to peg it to the correct position and size.
   // We need to retrieve the projection from this overlay to do this.
   var overlayProjection = this.getProjection();

   // Retrieve the southwest and northeast coordinates of this overlay
   // in latlngs and convert them to pixels coordinates.
   // We'll use these coordinates to resize the DIV.
   var sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());
   var ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());

   // Resize the image's DIV to fit the indicated dimensions.
   var div = this.div_;
   div.style.left = sw.x + 'px';
   div.style.top = ne.y + 'px';
   div.style.width = (ne.x - sw.x) + 'px';
   div.style.height = (sw.y - ne.y) + 'px';

   this.polysvg_.setAttributeNS(null, "points", this.AdjustPoints());
 }

 PolyLineFill.prototype.onRemove = function() {
   this.div_.parentNode.removeChild(this.div_);
   this.div_ = null;
 }
 window.BW = {};
 window.BW.PolyLineFill = PolyLineFill;
 ///end poly fill code

 google.maps.event.addDomListener(window, 'load', initialize);

 //**************************velho
 function showArrays(event) {
   if (this.overlay)
     this.overlay.setMap(null)
   this.overlay = new BW.PolyLineFill(this.getPath().b, this.map, "red", "#000");
 }
```

```
 html,
     body {
       height: 100%;
       margin: 0;
       padding: 0;
     }

     #map-canvas,
     #map_canvas {
       height: 100%;
     }

     @media print {
       html,
       body {
         height: auto;
       }
       #map_canvas {
         height: 650px;
       }
     }
```

```
<script src="https://maps.google.com/maps/api/js?sensor=false&libraries=drawing&.js"></script>
<div id="map-canvas"></div>
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T17:55:01.393

可以在 CANVAS 中完成：

```
http://home.provide.net/~bratliff/hawaii/ 
```

单击“样式”单选选项以查看其他可选模式。

# python - 方法执行命令的延迟

> ID：15808883
> 
> 赞同：1
> 
> 时间：2013-04-04T10:40:48.357
> 
> 标签：python, tkinter

我对以下代码部分有疑问：

```
my_var = tk.StringVar(value="start")
my_label = tk.Label(self.root, textvariable=my_var)
def my_method(input):
  my_var.set("working")
  #make a method call to an external Python API; can take a few mins to finish
  my_var.set("complete")

tk.Button(self.root, text="GO!", command=lambda: my_method(input)) 
```

我有一个按钮，单击该按钮时应执行`my_method`该按钮，该按钮最初应将文本更改`my_label`为`working`，在外部 API 中处理一些操作，然后将标签更新为`complete`。实际发生的是`my_method`被调用，标签的文本不会改变，API 调用需要几分钟，然后我的标签更新为`complete`. 我假设它可以快速处理两个设置命令，但我只看到最终的设置值。

发生这种情况是否有原因（我做错了什么）并且有解决方案吗？如果这是预期的行为，有人可以解释为什么会这样吗？

在写这篇文章的时候，我想可能会启动一个线程来执行初始的 set 调用，看看这是否可行。不过，我更喜欢更简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:49:42.393

Tkinter 需要你从回调中迅速返回，以便它可以回到它需要在 Tk.mainloop 中进行的处理。如果无法进行此处理，则无法更新标签的文本。（它也不能处理像拖动窗口等正常的处理事件。）

因此，回调不应长时间挂在主线程上。如果要为它们做一些耗时的处理，则应该在单独的线程中完成。

# c# - 正确的方法比较泛型中的类型

> ID：15808887
> 
> 赞同：0
> 
> 时间：2013-04-04T10:40:54.373
> 
> 标签：c#, generics

在通用方法中，我必须为每种类型执行不同的操作。我这样做：

```
public static T Foo<T>(string parameter)
    {
            switch (typeof(T).Name)
            {
                case "Int32":
                    ...
                    break;

                case "String":
                    ...
                    break;

                case "Guid":
                    ...
                    break;

                case "Decimal":
                    ...
                    break;
            }
    } 
```

有更好的方法来了解 T 型吗？**if (T is int)**不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:44:47.497

`if`结合使用会更好`typeof(<the type to test for>)`：

```
if(typeof(T) == typeof(int))
{
    // Foo has been called with int as parameter: Foo<int>(...)
}
else if(typeof(T) == typeof(string))
{
    // Foo has been called with string as parameter: Foo<string>(...)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:46:32.470

这个怎么样：

```
switch (Type.GetTypeCode(typeof(T))) {
    case TypeCode.Int32: 
        break;
    case TypeCode.String:
        break;
} 
```

这仅适用于[`TypeCode`](http://msdn.microsoft.com/en-us/library/system.typecode.aspx)枚举中定义的基本类型（不包括`Guid`）。对于其他情况，`if (typeof(T) == typeof(whatever)`) 是检查类型的另一种好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:47:07.270

创建一个`Dictionary<Type, Action<object>`：

```
class TypeDispatcher
{
    private Dictionary<Type, Action<object>> _TypeDispatchers;

    public TypeDispatcher()
    {
        _TypeDispatchers = new Dictionary<Type, Action<object>>();
        // Add a method as lambda.
        _TypeDispatchers.Add(typeof(String), obj => Console.WriteLine((String)obj));
        // Add a method within the class.
        _TypeDispatchers.Add(typeof(int), MyInt32Action);
    }

    private void MyInt32Action(object value)
    {
        // We can safely cast it, cause the dictionary
        // ensures that we only get integers.
        var integer = (int)value;
        Console.WriteLine("Multiply by two: " + (integer * 2));
    }

    public void BringTheAction(object value)
    {
        Action<object> action;
        var valueType = value.GetType();

        // Check if we have something for this type to do.
        if (!_TypeDispatchers.TryGetValue(valueType, out action))
        {
            Console.WriteLine("Unknown type: " + valueType.FullName);
        }
        else
        {
            action(value);
        }
    } 
```

然后可以通过以下方式调用：

```
var typeDispatcher = new TypeDispatcher();

typeDispatcher.BringTheAction("Hello World");
typeDispatcher.BringTheAction(42);
typeDispatcher.BringTheAction(DateTime.Now); 
```

# javascript - jQuery Slider localScroll 和 Cycle 功能一起 - 不工作

> ID：15808890
> 
> 赞同：1
> 
> 时间：2013-04-04T10:41:00.483
> 
> 标签：javascript, jquery, html, css

我目前正在“尝试”同时实现 localscroll 和循环功能以创建滑块。滑块应该有两个按钮（左和右），具有自动旋转循环。localscroll 和 click 功能的底部应该有小按钮，用户可以在其中导航到旋转滑块中的某个图像。

循环功能起作用。但是 localscroll 功能不起作用。[请查看 JSFiddle](http://jsfiddle.net/Xanxr/)

[错误图片](http://i49.tinypic.com/66x7ur.jpg)

jQuery：

```
 $(document).ready(function() {
        $("#slideshow").css("overflow", "hidden");
        $("#slideshow-nav").css("visibility", "visible");
    $("#slideshow-nav a[href=#lambo1]").addClass("active");

    $("#slideshow-nav").localScroll({
            target:'#slideshow', axis: 'x'
    });

$("#slideshow-nav a").click(function(){
            $("#slideshow-nav a").removeClass("active");
            $(this).addClass("active");
    });

    $("ul#slides").cycle({
            fx: 'fade',
            pause: 1,
            prev: '#prev',
            next: '#next'
    });

    $("#slideshow").hover(function() {
    $("ul#nav").fadeIn();
    },
            function() {
    $("ul#nav").fadeOut();
    }); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:53:40.573

您可能想尝试[Nivo Slider](http://demo.dev7studios.com/nivo-slider/)。开箱即用，它具有您正在寻找的功能，以及许多选项，如果您需要自定义。

```
<script type="text/javascript">
jQuery(window).load(function(){
jQuery("#nivoslider-4").nivoSlider({
    effect:"random",
    slices:15,
    boxCols:8,
    boxRows:4,
    animSpeed:500,
    pauseTime:3000,
    startSlide:0,
    directionNav:true,
    controlNav:true,
    controlNavThumbs:false,
    pauseOnHover:true,
    manualAdvance:false
});
});
</script> 
```

# java - 如何验证 CharSequence 的实例是否是 Unicode 标量值序列？

> ID：15808892
> 
> 赞同：4
> 
> 时间：2013-04-04T10:41:17.120
> 
> 标签：java, unicode, utf-16, charsequence, surrogate-pairs

我有一个`java.lang.CharSequence`. 我需要确定这个实例是否是一个[Unicode 标量值](http://www.unicode.org/glossary/#unicode_scalar_value)序列（即该实例是否为 UTF-16 编码形式）。尽管保证`java.lang.String`，Java 字符串不一定是 UTF-16 编码形式（至少不是根据最新的[Unicode 规范](http://www.unicode.org/versions/Unicode6.2.0)，目前是 6.2），因为它可能包含孤立的[代理代码单元](http://www.unicode.org/glossary/#surrogate_code_point)。（然而，Java 字符串是[Unicode 16 位字符串](http://www.unicode.org/glossary/#unicode_string)。）

有几种明显的方法可以解决这个问题，包括：

1.  迭代序列的[代码点](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#codePointAt%28java.lang.CharSequence,%20int%29)，将每个代码点显式验证为 Unicode 标量值。
2.  使用正则表达式搜索孤立的代理代码点。
3.  [通过报告编码错误的](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/CodingErrorAction.html#REPORT)[字符集编码器](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/CharsetEncoder.html)管道传输字符序列。

然而，似乎这样的东西应该已经作为库函数存在。我只是在标准 API 中找不到它。我错过了它，还是我需要实施它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:05:57.047

试试这个功能

```
static boolean isValidUTF16(String s) {
    for (int i = 0; i < s.length(); i++) {
        if (Character.isLowSurrogate(s.charAt(i)) && (i == 0 || !Character.isHighSurrogate(s.charAt(i - 1)))
                || Character.isHighSurrogate(s.charAt(i)) && (i == s.length() -1 || !Character.isLowSurrogate(s.charAt(i + 1)))) {
            return false;
        }
    }
    return true;
} 
```

这是一个测试

```
public static void main(String args[]) {
    System.out.println(isValidUTF16("\uDC00\uDBFF"));
    System.out.println(isValidUTF16("\uDBFF\uDC00"));
} 
```

# c# - 将日期时间从 iPhone 应用程序发送到网络服务

> ID：15808893
> 
> 赞同：4
> 
> 时间：2013-04-04T10:41:19.907
> 
> 标签：c#, ios, json, nsdate, nsdateformatter

从 iPhone 应用程序中，我必须将日期作为参数发送到使用 C#、.NET 和 JSON 实现服务器解析逻辑的 web 服务方法。

在我的 iPhone 应用程序中，我将日期格式化为：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
[dateFormatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'"];
NSString *myDateString = [dateFormatter stringFromDate:SentOn]; 
```

我收到错误消息：

> 反序列化 DashboardDataContract.Contracts.DashboardInputParams 类型的对象时出错。DateTime 内容 '2013-04-04T12:00:00Z' 不以 JSON 所需的 '/Date(' 开头并以 ')/' 结尾。'。

我尝试了不同的日期格式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T11:39:31.437

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:05:29.510

Most efficient way to send NSDate to server is to get the [timestamp](http://en.wikipedia.org/wiki/Timestamp). You can basically get it with

```
NSTimeInterval timestamp = [[NSDate date] timeInvervalSince1970]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:11:39.557

You can create a category method in `NSDate`

```
- (NSString *)jsonDateString
{
    NSTimeInterval seconds = [self timeIntervalSince1970];
    return [NSString stringWithFormat:@"/Date(%.0f+0000)/",seconds*1000];

} 
```

# sharepoint - 使用客户端对象模型识别用户是否是组

> ID：15808898
> 
> 赞同：1
> 
> 时间：2013-04-04T10:41:35.703
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-clientobject

我在列表中有一个共享点字段，可以是用户或组。使用服务器对象模型，我可以轻松识别用户是否是一个组。

但是，我找不到使用托管客户端对象模型来实现此目的的方法。有没有办法知道。

我只能通过循环组列表并检查是否存在具有该名称的组来使其工作。然而，这并不完全正确或有效。也许有一种方法可以使用用户的 ListItem 进行查找。但我没有看到任何显示该用户是管理员的字段。我也尝试过 EnsureUser。如果用户不是组，则会崩溃。所以我可以通过使用 try/catch 来解决，但这将是非常糟糕的编程。

谢谢，

约瑟夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:26:00.453

为此，请从中获取用户列表，`ClientContext.Current.Web.SiteUserInfoList`然后检查`ContentType`返回的每个项目以确定它是什么。

但是检查内容类型并不是很直接，因为您实际上从每个项目中得到的只是一个`ContentTypeID`，然后您必须在 中查找用户列表的内容类型`ClientContext.Current.Web.SiteUserInfoList.ContentTypes`。该查找将返回一个 ContentType 对象，您可以从该`Name`对象的属性中读取以查看列表项是什么。

因此，执行此操作的过度简化的代码块将是：

```
using Microsoft.SharePoint.Client; 
```

...

```
ClientContext context = ClientContext.Current;

var q = from i in context.Web.SiteUserInfoList.GetItems(new CamlQuery()) select i;
IEnumerable<ListItem> Items = context.LoadQuery(q);
context.ExecuteQueryAsync((s, e) => {
    foreach (ListItem i in Items) {
        //This is the important bit:
        ContentType contenttype = context.Web.SiteUserInfoList.ContentTypes.GetById(i["ContentTypeId"].ToString());
        context.Load(contenttype); //It's another query so we have to load it too
        switch (contenttype.Name) {
            case "SharePointGroup":
                //It's a SharePoint group
                break;
            case "Person":
                //It's a user
                break;
            case "DomainGroup":
                //It's an Active Directory Group or Membership Role
                break;
            default:
                //It's a mystery;
                break;
        }
    }
},
    (s, e) => { /* Query failed */ }
); 
```

您没有指定您的平台，但我在 Silverlight 中使用 SharePoint 客户端对象模型完成了所有这些工作。理所当然地，在 JavaScript 中也是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T15:48:53.013

尝试`Microsoft.SharePoint.Client.Utilities.Utility.SearchPrincipals(...)`：

```
var resultPrincipals = Utility.SearchPrincipals(clientContext, clientContext.Web, searchString, PrincipalType.All, PrincipalSource.All, null, maxResults); 
```

返回类型`PrincipalInfo`具有方便的 PrincipalType 属性，您可以检查该属性是否为 Group。

# c# - 为避免重新运行代码，请单击刷新页面

> ID：15808899
> 
> 赞同：0
> 
> 时间：2013-04-04T10:41:36.017
> 
> 标签：c#, asp.net, listview

我在 aspx 页面中有 ListView 控件，在 ListView 控件中有这个控件：

```
<asp:LinkButton ID="addToCart" runat="server" CommandArgument='<%# Eval("ProductID") %>' OnCommand="addToCart_Click">Add Cart</asp:LinkButton> 
```

并使用此代码母版页：

```
 <%@ Page  EnableViewState="true" ViewStateMode="Disabled" ... 
```

此外，ListView ViewStateMode 已启用。这个代码：

```
protected void addToCart_Click(object sender, CommandEventArgs e)
    {
        //insert product into cart table
    } 
```

首先，我将单击 addToCart 并执行代码。（这可以）但是，当我点击刷新页面时，代码重新运行（将产品插入购物车表）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:44:43.883

您可以从 addToCart_Click 回调重定向回页面。

```
Response.Redirect("PageUrl.aspx"); 
```

你可以参考这个模式：[http ://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

# c# - 如何获取嵌入资源的资源 Uri？

> ID：15808906
> 
> 赞同：2
> 
> 时间：2013-04-04T10:42:01.810
> 
> 标签：c#, .net, resources, xsd, mstest

如何获取嵌入资源的资源 Uri？

我有一个方法如下，它根据 xsd 文件验证 xml。此方法在 MSTest 中使用：

```
 public static string Validate(string xml, string relativeXsdFilePath)
            {
                var schemas = new XmlSchemaSet();

// relativeXsdFilePath like 'TestData.Xsd.XsdFile1.xsd'
                var schemaUri = ResourceHelper.GetPath(relativeXsdFilePath);

                schemas.Add("", schemaUri);

                XDocument doc = XDocument.Load(new StringReader(xml));
                string msg = null;
                doc.Validate(schemas, (o, e) =>
                {
                    msg = e.Message;
                });
                return msg;
            } 
```

到目前为止，我正在实施以下方法，但没有成功！：

```
 public static string GetPath(string relativeFileName)
    {
        var assemblyName = new AssemblyName(Assembly.GetExecutingAssembly().FullName).Name;

         var resourceName = GetResourceName(relativeFileName);

// resource name would be like 'ProjectName.UnitTests.TestData.Xsd.profile.xsd'
        var result = string.Format("/{0};component/{1}", assemblyName, resourceName);

        return result;
    } 
```

我的 XSD 位于此处：

```
ProjectRoot
---TestData
------Xsd
---------XsdFile1.xsd 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:18:20.977

我意识到它也接受 XmlReader 所以如果有人遇到同样的问题，这是我的解决方案：

```
 public static XmlReader LoadAsXmlReader(string relativeFileName)
        {
            var result = LoadAsStream(relativeFileName);

            var xmlReader = new XmlTextReader(result);

            return xmlReader;
        }

        private static Stream LoadAsStream(string relativeFileName)
        {
            var resourceFileName = Assembly
                .GetExecutingAssembly()
                .GetManifestResourceNames()
                .FirstOrDefault(p => p.EndsWith(relativeFileName));

            return Assembly
                .GetExecutingAssembly()
                .GetManifestResourceStream(resourceFileName);
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:58:53.740

作为一个快速简单的解决方案：

```
public static string GetPath(string relativeFileName)
{
    return Assembly.GetExecutingAssembly().GetManifestResourceNames().FirstOrDefault(x => x.EndsWith(relativeFileName));
} 
```

# amazon-mws - 在亚马逊 MWS 中获取货件承运人？

> ID：15808909
> 
> 赞同：2
> 
> 时间：2013-04-04T10:42:08.183
> 
> 标签：amazon-mws

如何在亚马逊 MWS 的订单 API 中为已发货的 MFN 账户获取运营商名称？是否可以使用 Order API 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-26T18:31:45.483

我认为目前没有任何 API 可以通过 MWS 检索跟踪信息（甚至只是运营商名称）。

为了完整起见：要*提交*包括承运人名称和跟踪号在内的运输信息，您可以使用`SubmitFeed`API 与 FeedType= `_POST_ORDER_FULFILLMENT_DATA_`。对应的 XSD (OrderFulfillment.xsd) 将以下值定义为有效`CarrierCode`s：USPS、UPS、FedEx、DHL、Fastway、GLS、GO!、Hermes Logistik Gruppe、Royal Mail、Parcelforce、City Link、TNT、Target、SagawaExpress、NipponExpress ，大和运输。所有其他运营商必须使用该`CarrierName`字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:27:22.800

虽然我确信它在 MWS 中可用，但使用承运人运输编号结构来确定承运人会容易得多。

IE...

Fedex 可以有 12 位或 15 位数字的跟踪号码，条形码可以是 22 位数字。

UPS 在其跟踪前有 1Z。

USPS 格式为 20 位数字（例如 9999 9999 9999 9999 9999），或 13 个字母和数字字符的组合，通常以 2 个字母开头，后跟 9 位数字，以“US”结尾（例如 EA 999 999 999 US

构建正则表达式来轻松处理这些。

# c++ - 谁能解释这个有效的 C++ 程序如何返回 null？

> ID：15808920
> 
> 赞同：1
> 
> 时间：2013-04-04T10:42:43.977
> 
> 标签：c++

我偶然发现了这个[粘贴](http://paste.lisp.org/display/135584)：

```
int main() {
return!!!~!!!!!~!!!1??!??!1?

"^_^"  <:3

]:     "^.-"

<:      0.0 

<3  :>  ;} 
```

一组可爱的表情符号，据称返回 null。有谁的 C-fu 比我更好的解释它是如何工作的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T10:47:31.957

`<:`手段`[`，`:>`手段`]`（它们是有向图）。

`??!`意思是`|`（它是一个三元组），所以`??!??!`是合乎逻辑的`||`

`?`第一行的最后一个是条件运算符。

其余的从两个表情符号字符串之一中选择一个字符。它将从第一个中选择，因为无论有多少`!`，`~`一开始就乱七八糟，`anything || 1`都是真的。

所以它实际上选择`"^_^"[3]`了 ，它是字符串末尾的 nul 终止符，即 0。

基本上代码读取`return ((some mess) || 1) ? "^_^"[3] : "^.-"[1];`，因为`0.0 < 3`是真的。

[编辑：我刚刚意识到（并在下面评论），可以编写一个`~(expression equal to 0)`具有未定义行为的符合实现。所以要知道这段代码是否严格符合，你必须检查两者都没有`~`应用于零。事实上`!!!1`是`0`，所以代码并不严格符合。不过，它适用于您可以命名的任何实现，因为几乎所有内容都使用 2 的补码。]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T10:54:19.333

首先，用它们的规范形式替换三元组和替代标记：`??!`become `|`、`<:`become`[`和`:>`become `]`：

```
!!!~!!!!!~!!!1 || 1 ? "^_^"[3] : "^.-"[0.0<3] 
```

第一部分`<something> || 1`评估为真。如果您愿意，您可以计算出`!!!~!!!!!~!!!1`评估结果，但这并不重要（只要定义了行为，如评论中所述）。所以条件运算符的结果是第一个分支，

```
"_^_"[3] 
```

字符串文字有四个字符，最后一个是零终止符；所以整个表达式的值为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:54:26.490

通过删除三元组和二元组（连同空格，并在三元运算符上添加括号），我们得到：

int main() { return !!!~!!!!!~!!!1||1?("^_^" [3]):"^.-"[0.0 <3]; }

现在我们需要做的就是删除不必要的额外内容......

# c# - Win 8 / WP 8：MMVM 框架？

> ID：15808921
> 
> 赞同：0
> 
> 时间：2013-04-04T10:42:48.227
> 
> 标签：c#, mvvm, windows-8, windows-phone-8

过去，我通过 wpf 使用 mvvmlight 并取得了一定程度的成功。我最近看到了 Caliburn Micro，但我想知道是否有人对此有任何经验。

我看到了 Caliburn Micro 的网站，它说它适用于 WP7 和 WPF，那么 win8 和 wp8 呢？

据我了解，Caliburn Micro 带走了很多配置并符合惯例，这听起来不错，类似于 asp.net mvc 的方法

任何人都可以确认 INavigationService 可以与 CM 一起使用吗？CM中不存在绑定是否真的因为这些项目只是因为约定而起作用？

还是我应该继续使用 MVVM Light 路线？

MVVM Light 发布时间表有点延迟，有谁知道 CM 的发布时间表是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:47:41.613

是的，Caliburn.Micro 支持 WinRT 和 WP8 - 有关 WinRT 文档，请参阅[http://caliburnmicro.codeplex.com/wikipage?title=Working%20with%20WinRT&referringTitle=Documentation](http://caliburnmicro.codeplex.com/wikipage?title=Working%20with%20WinRT&referringTitle=Documentation)。

Caliburn.Micro 有一个配置方法的约定，因此它会根据控件的名称自动将视图上的控件与视图模型上的动词绑定。您可以配置这些约定，或者如果您想覆盖它，则只使用显式绑定。

它支持 INavigationService，Caliburn.Micro 的最后一个版本是 3 月 22 日的 1.5.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:47:01.600

我建议您看一下[CaliburnMicroWinRT](http://caliburnmicro.codeplex.com/SourceControl/network/forks/marker_metro/CaliburnMicroWinRT)。它包括一些适用于 Windows 8 的新功能：

*   属性绑定约定
*   方法绑定约定
*   协程
*   屏幕和导体
*   导航包括参数注入
*   Windows 8 Share 魅力整合
*   Windows 8 搜索魅力集成

您可以在此处阅读有关新更改的更多信息[。](http://www.markermetro.com/2012/08/technical/caliburn-micro-for-winrt-mvvm-magic-pixie-dust-for-everyone/)

其中许多更改也应该与官方版本合并。[在此处](http://nuget.org/packages/Caliburn.Micro)查看官方 NuGet 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:47:15.190

你真的应该阅读 CM codeplex 网站[http://caliburnmicro.codeplex.com](http://caliburnmicro.codeplex.com)

它支持`INavigationService`，它支持按约定绑定或显式绑定（尽管按约定绑定非常强大）。它有一个很好的发布时间表（在过去的 6-8 个月内有两个或更多版本，包括一个主要版本）。您可以完全自定义约定等

我经常使用它——虽然我没有使用过 MVVM Light，所以我无法评论它是如何叠加的。

然而，我可以说，CM 的学习曲线非常浅，而且因为它非常轻量级，所以很容易记住大部分代码库。

它也是非常可插拔的——如果有你不喜欢的东西，你可以换掉一个`Func<>`地方并用你的实现替换它。

# architecture - 用例包括

> ID：15808924
> 
> 赞同：0
> 
> 时间：2013-04-04T10:42:53.517
> 
> 标签：architecture, uml, use-case

我有用例`order book`，当用户订购一本书时，他必须浏览该书（用例`browse books`），然后他必须设置取书地址（用例`set address`），这两个用例与用例有什么关系`order book`？

```
Include ?
Extend?
Something Else? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:59:20.263

依靠。

不要对用例进行高分辨率处理，它们应该是高级项目（例如，考虑`set address`通过将其功能添加到另一个用例来删除用例，可能`order book`）。**must**情况下的关系将是`include`. 如果它是可选的，则关系将为`extend`.

# c++ - 从向量中读回数据时出错

> ID：15808928
> 
> 赞同：0
> 
> 时间：2013-04-04T10:43:08.907
> 
> 标签：c++, loops, vector, count

这是我从文本文件中读取数据并将其存储到向量中的程序，我在编译时遇到了麻烦，任何建议都会很棒。我喜欢在这个例子中调用年和月的所有数据。我希望它是我错过的一些简单的东西。

```
#include <iostream>
#include <libscat.h>
#include <fstream>
#include <sstream>
#include <vector>
#include <string>

struct Weather
{
  int year;
  int month;
  double tempmax;
  double tempmin;

};

int main()
{
  vector<Weather> data_weather;
  string line;
  std::ifstream myfile ("weatherdata.txt");
  if (myfile.is_open())
  {
    while ( getline(myfile, line) )
    {   int count = 0;
        if (count > 8) 
        {
            std::istringstream buffer(line);
            int year, mm;
            double tmax, tmin;
            if (buffer >> year >> mm >> tmax >> tmin) 
            {
            Weather objName = {year, mm, tmax, tmin};
            data_weather.push_back(objName);
            count++;
            }
        }

        for (auto it = data_weather.begin(); it != data_weather.end(); it++){ 
        std::cout << it->year << " " << it->month << std::endl;}
        myfile.close();
    }
    else
    {
    cout << "unable to open file";
    }
    scat::pause("\nPress <ENTER> to end the program.");

    return 0;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:23:10.497

这是一个带有解释的固定版本，因为仍然没有任何真正的答案。

```
#include <iostream>
#include <libscat.h>
#include <fstream>
#include <sstream>
#include <vector>
#include <string>

struct Weather
{
    int year;
    int month;
    double tempmax;
    double tempmin;
};

int main()
{
    std::vector<Weather> data_weather;
    std::string line;
    std::ifstream myfile("weatherdata.txt");
    if (myfile.is_open())
    {
        int count = 0;  // you gotta put it in front of the while loop or you'll
                // create a new variable and initialize it to 0 every time
                // you enter the loop
        while ( getline(myfile, line) )
        {
            // int count = 0; // placed it just before the loop
            if ( count > 8)
            {
                std::istringstream buffer(line);
                int year, mm;
                double tmax, tmin;
                if (buffer >> year >> mm >> tmax >> tmin)
                {
                    Weather objName = {year, mm, tmax, tmin};
                    data_weather.push_back(objName);
                    // count++; // you're still inside the if (count > 8)
                    // you'd probably want to have it outsided the if statement
                    // instead.
                }
            }
            ++count;    //the count from inside. it'll probably do what you wanted
                    //it to do here.

            // you'll probably want to run the for loop AFTER the while loop
            // when the data_weather vector got fully filled
        }
        // the for loop from inside the while now outside
        for (auto it = data_weather.begin(); it != data_weather.end(); ++it)
        {
            std::cout << it->year << " " << it->month << std::endl;
            myfile.close();
        }
    }
    else
    {
        std::cout << "unable to open file";
    }
    scat::pause("\nPress <Enter> to end the program.");
    return 0;
} 
```

# java - 如何像在 C++ 中一样在 Java 中实现 Pair 类

> ID：15808932
> 
> 赞同：-4
> 
> 时间：2013-04-04T10:43:30.787
> 
> 标签：java, c++, class, std-pair

如何像在 C++ 中一样在 Java 中实现类对，以便像在 C++ 中一样使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:48:39.050

当我这样做时，我做了一些类似于`Map.Entry<K, V>`标准库中的接口的事情。您可能应该重写`Object.equals(Object)`，`Object.hashCode()`以便键和值在逻辑上彼此相等的两对在逻辑上相等并且散列相同 - 请参阅 Bloch 的 Effective Java 的第 9 项以获取有关如何进行良好实现的一些指示。

这是我所做的：

```
@Override
public String toString() {
    //same convention as AbstractMap.SimpleEntry
    return key + "=" + value;
}

@Override
public boolean equals(Object o) {
    if(o == this) return true;
    if(!(o instanceof Pair)) return false;

    Object otherKey = ((Pair<?, ?>)o).getKey();
    Object otherValue = ((Pair<?, ?>)o).getValue();
    return (key == null ? otherKey == null : key.equals(otherKey))
            && (value == null ? otherValue == null
                    : value.equals(otherValue));
}

@Override
public int hashCode() {
    return 17 + 55555 * (key == null ? 72 : key.hashCode())
            + 232323 * (value == null ? 73 : value.hashCode());
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T10:47:05.013

```
class Pair<F,S> {
    private F first;
    private S second;

    public Pair(F first, S second) { 
        this.first = first;
        this.second = second;
    }

    public F getFirst() { return first }
    public S getSecond() { return second }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T11:13:23.887

您只需要包含正确的标题

```
#include <utility>
#include <string>

using std::string;
using std::makepair;
using std::pair;

void foo()
{
    string hello("Hello");
    float  value(42);

    auto p = makepair(hello, value); // or: pair<string, float> = ...
} 
```

# c# - 从系统禁用在后台光标工作（不是应用程序）

> ID：15808933
> 
> 赞同：0
> 
> 时间：2013-04-04T10:43:34.887
> 
> 标签：c#, vb.net, windows, cursor

我有一个在后台工作的应用程序，当我的应用程序启动时，appstarting 光标闪烁一次（每次），看到光标图标如何从普通箭头多次切换到 appstart 或“在后台工作”带箭头的沙漏，这很烦人.

如何使应用程序光标禁用，运行我的应用程序，然后重新启用它，这样用户就不会感到任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:26:21.903

默认情况下光标不会改变，所以我认为这一定是你的代码中的一些东西。要将光标设置回“正常”，请使用以下命令：

`Cursor.Current = Cursors.Default`

或者首先找到您设置它的位置并删除该行

# ios - UITableViewCell 中的 UITextField：didSelectRowAtIndexPath 中的成为FirstResponder

> ID：15808936
> 
> 赞同：6
> 
> 时间：2013-04-04T10:43:41.810
> 
> 标签：ios, objective-c, uitableview, uitextfield

我目前正试图让这个工作。任何帮助表示赞赏。

我有一个`UITableViewCell`有`UITextField`内在的习惯。当我选择表格单元格时，我想做第`UITextField`一个响应者。
但是 `[textField becomeFirstResponder];`返回**false**。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
  UITableViewCell *cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];
  UITextField *textField;
  for (UIView *view in [cell subviews]) {
    if ([view isMemberOfClass:[UITextField class]]) {
      textField = ((UITextField *)view);
    }
  }

  [textField becomeFirstResponder];
} 
```

根据要求，文本字段的初始化。这是在`UITableViewCell`子类中完成的：

```
- (id) initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
  self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];

  if (self) {
    // Init Textfield
    _textField = [[UITextField alloc] init];
    _textField.backgroundColor = [UIColor clearColor];
    _textField.delegate = self;
    [self addSubview:_textField];
  }

return self;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-08-13T01:50:05.373

如果您有自定义单元格，则可以执行以下操作：

```
@implementation CustomCell

#pragma mark - UIResponder

- (BOOL)canBecomeFirstResponder
{
    return YES;
}

- (BOOL)becomeFirstResponder
{
    return [self.textField becomeFirstResponder];
}

@end 
```

然后在表视图委托内：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if ([cell canBecomeFirstResponder]) {
        [cell becomeFirstResponder];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T10:49:02.993

Give `tag` for each `UITextField` and and use Following code:

```
UITableViewCell* cell = (UITableViewCell*)sender.superview.superview;
UITextField *txtField = (UITextField*)[cell viewWithTag:tag];
[txtField becomeFirstResponder]; 
```

In `didSelectRowAtIndexPath` method.

Its working very good.. :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T11:09:26.933

我相信你需要设置你`textField`的`delegate`财产。

在调用之前添加`textField.delegate = self;`到您的方法中`[textField becomeFirstResponder]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-02T14:41:12.430

我认为您应该在创建单元格时在文本字段中包含一个标记值：

```
- (id) initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
      self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];

      if (self) {
        // Init Textfield
        _textField = [[UITextField alloc] init];
        _textField.backgroundColor = [UIColor clearColor];
        _textField.delegate = self;
        _textField.tag = 999;
        [self addSubview:_textField];
      }

    return self;
} 
```

并且在 didSelectRowAtIndexPath 方法上使用标签值来恢复对象：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
  UITableViewCell *cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];
  UITextField *textField = (UITextField*)[cell viewWithTag:999];

  if (![textField isFirstResponder]){
     [textField becomeFirstResponder];
  }

} 
```

我已经包含一个验证来控制文本字段是否已经是第一响应者。

希望它按您的预期工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T11:01:33.700

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
  UITableViewCell *cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];
  UITextField *textField;
  for (id subV in [cell subviews]) {
    if ([subV isKindOfClass:[UITextField class]]) {
      textField = (UITextField *)subV;
      [textField becomeFirstResponder];
      break;
    }
  }

} 
```

我想这会对你有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-10T16:03:59.523

更新了@josh-fuggle 的答案以使用 Swift 2.2。

```
import Foundation
import UIKit

class CustomTableCell:UITableViewCell {

    @IBOutlet var textValue: UITextField!

    override func canBecomeFirstResponder() -> Bool {
        return true
    }

    override func becomeFirstResponder() -> Bool {
        return self.textValue.becomeFirstResponder()
    }
} 
```

这是在您的表视图委托中：

```
func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) {

        let cell = tableView.cellForRowAtIndexPath(indexPath)
        if ((cell?.canBecomeFirstResponder()) != nil) {
            cell?.becomeFirstResponder()
        }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-24T06:29:24.997

你可以这样做：

```
class CustomCell: UITableViewCell {
    @IBOutlet weak var textField: UITextField!

    override func awakeFromNib() {
        super.awakeFromNib()
        let tapGesture = UITapGestureRecognizer(target: self, action: #selector(contentViewTapped))
        self.contentView.addGestureRecognizer(tapGesture)
    }
    @objc func contentViewTapped() {
        _ = self.textField.becomeFirstResponder()
    }
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2018-05-09T03:51:53.743

[self.titleLab performSelector:@selector(becomeFirstResponder) withObject:nil afterDelay:0.2];

# c++ - 枚举数据和向量错误：表达式必须是可修改的左值

> ID：15808941
> 
> 赞同：1
> 
> 时间：2013-04-04T10:43:54.677
> 
> 标签：c++, vector, lvalue, enumerated-types

我在输入“标题”和“作者”的行中遇到错误。我不太确定该怎么做才能解决这个问题。

```
struct bookStruct
 {
    char title[40];
    char author[40];
    int pages;
    int year;
  };

  enum menu { display=1, add, end} ;

  void displayOptions();
  void displayBooks();

int main(){

    vector<bookStruct> book(11);
    string option;

    book[0].title = "a";
    book[0].author = "b";
    book[0].pages = 23;
    book[0].year = 21;

    displayOptions();
    cin >> option;

    displayBooks(book);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:45:58.800

您不能分配给数组，您必须复制到它：

```
std::strcpy(book[0].title, "a"); 
```

* * *

但由于您使用的是 C++，我建议您使用[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)而不是字符数组：

```
struct bookStruct
{
    std::string title;
    std::string author;
    int pages;
    int year;
}; 
```

然后你可以像现在尝试做的那样使用正常的分配。

# regex - 将 lvremove 与正则表达式一起使用

> ID：15808950
> 
> 赞同：0
> 
> 时间：2013-04-04T10:44:19.267
> 
> 标签：regex, lvm

我想使用 lvremove 通过匹配正则表达式来删除多个卷。

例如，我有一个卷组：

```
lv-1-8a
lv-1-846a
lv-1-5a
... 
```

我试过了：

```
lvremove volgroup/lv-1-* 
```

但似乎这不被接受，我收到错误：

```
One or more specified logical volumes(s) not found. 
```

但是，我可以一一删除卷，

```
lvremove volgroup/lv-1-846a
Logical volume "lv-1-846a" successfully removed 
```

谷歌搜索没有抛出任何相关结果，是否可以使用正则表达式来做到这一点？有很多卷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T21:00:43.657

我猜你在输入时会收到一条错误消息

```
lvremove volgroup/lv-1-* 
```

因为 shell 会尝试`volgroup/lv-1-*`在当前目录中扩展名称，也就是说，如果您从`/tmp`（例如）运行该命令，shell 将尝试在子目录中查找`/tmp/volgroup`名称以 . 开头的现有文件`lv-1-`。由于 shell 找不到这样的文件，因此它会启动`lvremove`带有参数的命令`volgroup/lv-1-*`......我猜你的 LV 都没有被命名`lv-1-*`。

请记住，文件名扩展是由外壳程序执行的，而不是由命令（在您的情况下为 lvremove）。星号元字符对于大多数命令（如 lvremove）没有意义，并且与任何其他字符一样处理。

以下示例将执行您正在尝试的操作：

```
lvremove /dev/volgroup/lv-1-* 
```

或者

```
cd /etc
lvremove volgroup/lv-1-* 
```

在这两种情况下，shell 都将扩展为所有匹配的文件名 --- 从上面的示例中，在 shell 扩展之后，我建议的命令行实际上将运行为：

```
lvremove /dev/volgroup/lv-1-8a /dev/volgroup/lv-1-846a /dev/volgroup/lv-1-5a 
```

或者

```
cd /etc
lvremove volgroup/lv-1-8a volgroup/lv-1-846a volgroup/lv-1-5a 
```

当参数数量很大时，可能会达到命令行大小的限制。在这种情况下，该`find`命令很有用：

```
find /dev/volgroup -type l -exec lvremove -f '{}' ';' 
```

最好的祝福。

# c# - 从组合框中删除选定的项目

> ID：15808952
> 
> 赞同：-1
> 
> 时间：2013-04-04T10:44:21.330
> 
> 标签：c#

我希望从组合框中删除选定的项目组合框中的选定项目显示在数据网格视图中，我不希望从同一个组合框中重新选择相同的项目。如何才能做到这一点 ？，请帮忙

```
combobox1InHouseStatus.Items.RemoveAt(combobox1InHouseStatus.SelectedIndex); 
```

我试过这个，但它不工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-29T17:29:06.620

我需要做同样的事情，但在我的情况下，可以选择多个项目。这是我使用的代码：

```
int x = this.aComboBox.SelectedItems.Count;
while (x >= 1) {
    this.aComboBox.Items.Remove(this.aComboBox.SelectedItems(x - 1));
    x -= 1;
} 
```

# android - $.css() 不适用于 android 2.3 但适用于 android 4.0 + 浏览器

> ID：15808953
> 
> 赞同：0
> 
> 时间：2013-04-04T10:44:23.430
> 
> 标签：android, jquery, css, cordova

您好我正在使用 Phonegap 框架开发一个 Android 应用程序。我正在使用 css 中的“内容”设置图像。下面是我的代码。

HTML：

```
<img id="templateImg" class="templateImg" /> 
```

CSS：

```
.templateImg {
    width: 100%;
    height: 92%;
    content:url('../images/CLASSY_Car_Main.png');
} 
```

JS：

```
imgSrc = $("#templateImg").css('content'); 
```

它正在返回

`imgSrc = url('../images/CLASSY_Car_Main.png')` 在 Android 4.0 + 但它返回

`imgSrc=' '`在安卓 2.3 中。

如何在运行时为 android 2.3 获取 css 内容？

# mysql - 避免在存储过程中多次执行相同的计算

> ID：15808954
> 
> 赞同：0
> 
> 时间：2013-04-04T10:44:25.870
> 
> 标签：mysql, stored-procedures

我有一个存储过程，我在其中重复计算，例如

```
DROP PROCEDURE sp_alters;
DELIMITER $$

CREATE
    /*[DEFINER = { user | CURRENT_USER }]*/
    PROCEDURE `sp_alters`()
    /*LANGUAGE SQL
    | [NOT] DETERMINISTIC
    | { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }
    | SQL SECURITY { DEFINER | INVOKER }
    | COMMENT 'string'*/
    BEGIN
SELECT  
   `fn_getDiscount`(`t_orderitem`.`a_orderitemid`,`t_orderitem`.`a_quantity`)  AS `discount`,

    fn_getnewvalues(`fn_getDiscount`(`t_orderitem`.`a_orderitemid`,`t_orderitem`.`a_quantity`),a_orderitemid) as newvalue

FROM t_orderitem;
    END$$

DELIMITER ; 
```

在这里你看到我在同一个存储过程中调用了 fn_getDiscount 2 次。所以我想避免它。我可以存储到变量中并使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:48:23.010

Yes, you can.

You have to *prepare* the sentence and then reuse it.

```
SET @your_variable = "this is some text you can repeat";
SET @your_query=CONCAT("
INSERT INTO something
", @some_variable,"
WHERE other_things");

PREPARE stmt FROM @your_query;
EXECUTE stmt; 
```

This is the basic structure from which you can work and reuse the way you prefer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:00:58.210

如果您显示了完整的语句和至少过程的标题，那将会有所帮助，但是查看您*作为*代码呈现的内容似乎是代码片段 - 而 fn_getDiscount 似乎是一个函数而不是过程。

准备语句只是避免了每次引用时都必须解析语句——它并不能避免执行语句的开销。

虽然，IIRC，MySQL 目前没有实现这一点，但任何声明为 DETERMINISTIC 的函数（即总是为给定的一组输入产生相同的输出而没有副作用）是可缓存的——这将来可能会改变，因此这将是一个好主意添加它。

如果函数是确定性的，那么您可以避免使用子查询多次调用它：

```
SELECT func_result
FROM (SELECT expensive_function(your_columns...) AS func_result
      FROM your_table
      WHERE your_column_a BETWEEN 1 AND 100) AS ilv
WHERE func_result > 50; 
```

在函数过程中，您可以调用其他函数并将结果存储在变量中——这是使用存储函数/过程的主要原因。

# ajax - 如何以编程方式将 AjaxBehavior 添加到具有 primefaces 的 UIComponent

> ID：15808956
> 
> 赞同：6
> 
> 时间：2013-04-04T10:44:28.467
> 
> 标签：ajax, jsf-2, primefaces

自从我问[了我的最后一个问题](https://stackoverflow.com/questions/15769371/a-programmatically-added-ajaxbehaviour-into-a-commandlink-doesnt-work)（仍然没有回答）我继续寻找解决方案，最后我找到[了这个](http://forum.primefaces.org/viewtopic.php?f=3&t=5344&hilit=ajaxbehavior)我认为可以帮助实现我想要的主题。

所以，我尝试了那个解决方案（它本身就是一种解决方法），但它仍然对我不起作用。

这是代码，这只是对这个问题的测试：

index.xhtml ：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>dyn add comps test </title>
</h:head>
<body>
<h:form id="form1">
<!-- once this first commandLink is clisked it will generate another commandlink below it  -->
<h:commandLink value="cliick me">
<f:ajax event="click" listener="#{myBean.firstcmdLinkListenerHandler}"/>
</h:commandLink>

</h:form>
</body>
</html> 
```

托管 Bean：MyBean.java

```
package mybeans;

import javax.el.ExpressionFactory;
import javax.el.MethodExpression;
import javax.faces.application.Application;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.component.UIComponent;
import javax.faces.component.html.HtmlCommandLink;
import javax.faces.context.FacesContext;
import javax.faces.event.AjaxBehaviorEvent;
import javax.faces.event.BehaviorEvent;

import org.primefaces.component.behavior.ajax.AjaxBehaviorListenerImpl;
import org.primefaces.context.RequestContext;

@ManagedBean
@SessionScoped
public class MyBean {

    public void handleClose(AjaxBehaviorEvent abe){

        System.out.println("!!!-->>>>>  the Ajax Behaviour Works !!!!! ");

    }

    public void reLoadCityList( BehaviorEvent event ){
        System.out.println("!!!-->>>>>  the reLoadCityList method Works !!!!! ");
    }

    public void firstcmdLinkListenerHandler(AjaxBehaviorEvent abe){

        System.out.println("firstcmdLinkListenerHandleris running ! ");

        FacesContext fc = FacesContext.getCurrentInstance();
        Application application = fc.getApplication();
        ExpressionFactory ef = fc.getApplication().getExpressionFactory();      

        UIComponent form1 = fc.getViewRoot().findComponent("form1");

        if(form1!=null){

       //Creating the commandLink
       HtmlCommandLink mynewcmdlink = (HtmlCommandLink)application.createComponent(HtmlCommandLink.COMPONENT_TYPE);
       mynewcmdlink.setId("mynewcmdlink");
       mynewcmdlink.setValue("clickme2!!");
       MyAjaxBehavior pajax = new MyAjaxBehavior();
       Class[] par = new Class[1];

        par[0] = BehaviorEvent.class;
        //par[0] = AjaxBehaviorEvent.class; (*)
        //pajax.setListener( myCreateMetExpression( "reLoadCityList", true,   //void.class, par ) );

        //i tried with both AjaxBehaviorEvent and BehaviorEvent as in (*)
            //MethodExpression me = ef.createMethodExpression(                   //fc.getELContext(), "#{myBean.handleClose}", void.class, par);

         MethodExpression me = ef.createMethodExpression( fc.getELContext(), "#{myBean.reLoadCityList}", void.class, par);

         //pajax.setListener(me); //i've tried with this too but it wasn't sucesseful
         pajax.addAjaxBehaviorListener( new AjaxBehaviorListenerImpl( me ) );

            pajax.setProcess( "@this" );
            mynewcmdlink.addClientBehavior( "change", pajax );

        //adding thecommanLink to the form
        form1.getChildren().add(mynewcmdlink);

        //Refreshing the form to see the added commandLink :
        RequestContext context = RequestContext.getCurrentInstance();           
            context.update("form1");
            context.update("form1:foo"); 

        }else
            System.out.println("form1 is null!!");

} 
```

以及在 primefaces 论坛文章中用作解决方法的 MyAjaxBehavior.java：

```
package mybeans;

import java.util.HashMap;

import javax.el.ELContext;
import javax.el.MethodExpression;
import javax.faces.component.UIComponentBase;
import javax.faces.context.FacesContext;
import javax.faces.event.AbortProcessingException;
import javax.faces.event.BehaviorEvent;

import org.primefaces.component.behavior.ajax.AjaxBehavior;

public class MyAjaxBehavior extends AjaxBehavior {

    @Override
    public Object saveState(FacesContext context) {
        HashMap<String, Object> map;
        map = new HashMap<String, Object>();
        map.put("update", getUpdate());
        map.put("process", getProcess());
        map.put("oncomplete", getOncomplete());
        map.put("onerror", getOnerror());
        map.put("onsuccess", getOnsuccess());
        map.put("onstart", getOnstart());
        map.put("listener", getListener());

        if (initialStateMarked())
            return null;
        return UIComponentBase.saveAttachedState(context, map);

    }

    @SuppressWarnings("unchecked")
    @Override
    public void restoreState(FacesContext context, Object state) {
        if (state != null) {
            HashMap<String, Object> map;
            map = (HashMap<String, Object>) UIComponentBase
                    .restoreAttachedState(context, state);

            setUpdate((String) map.get("update"));
            setProcess((String) map.get("process"));
            setOncomplete((String) map.get("oncomplete"));
            setOnerror((String) map.get("onerror"));
            setOnsuccess((String) map.get("onsuccess"));
            setOnstart((String) map.get("onstart"));
            setListener((MethodExpression) map.get("listener"));
        }

    }

    @Override
    public void broadcast(BehaviorEvent event) throws AbortProcessingException {
        ELContext eLContext = FacesContext.getCurrentInstance().getELContext();

        // Backward compatible implementation of listener invocation
        if (getListener() != null) {
            try {
                getListener().invoke(eLContext, new Object[] { event });
            } catch (IllegalArgumentException exception) {
                getListener().invoke(eLContext, new Object[0]);
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-22T06:39:37.040

做这样的事情

```
Panel tp = new Panel();
FacesContext fc = FacesContext.getCurrentInstance();
ExpressionFactory ef = fc.getApplication().getExpressionFactory();

MethodExpression me = ef.createMethodExpression(fc.getELContext(), "#{myView.closeIt}", null, new Class<?>[]{BehaviorEvent.class});
AjaxBehavior ajaxBehavior = (AjaxBehavior) fc.getApplication().createBehavior(AjaxBehavior.BEHAVIOR_ID);
ajaxBehavior.setProcess("@this");
ajaxBehavior.addAjaxBehaviorListener(new AjaxBehaviorListenerImpl(me, me));
tp.addClientBehavior("close", ajaxBehavior);

component.getChildren().add(tp); 
```

***myView.closeIt()***

```
public void closeIt(CloseEvent ce){
    Panel p = (Panel) ce.getComponent();
    System.out.println("Do what ever you want");
} 
```

# git - Netbeans 中的 Git Switch 与 Checkout

> ID：15808959
> 
> 赞同：6
> 
> 时间：2013-04-04T10:44:39.213
> 
> 标签：git

我还在为 Git 苦苦挣扎。

事情是：

我们是两个人在做一个项目。

我从 master 创建了一个新的分支，称为关系。

现在我的朋友已经更新了大师，但需要我修复一些错误。

当我在 Netbeans 中切换到分支时，它给了我所有的“关系”变化，并希望我提交它们。

这不是我要找的！

Netbeans 网站告诉我这个[切换到分支]：

```
Switch to Branch
Actor: User

Action: User wants to switch to a branch (see also Checkout)

"Priority:" 1

Scenario:

User selects a versioned context and invokes 'switch branch' from the main menu
User specifies the branch and additional options - keep local changes etc.
The working tree is switched to the specified branch 
```

和 [结帐]：

查看

```
Actor: User

Action: User wants to checkout a specific revision/tag/branch

"Priority:" 1

Scenario:

User selects a a versioned context and invokes 'chekout' from the main menu
User specifies the revision/tag/branch to checkout
The working tree will be switched to the specified revision 
```

GIT 让我头疼！

那么这两者有什么区别呢？

我需要有人能够切换到 [Master] 分支然后更新错误，然后切换回我的 [Relation] 分支，而 git 不会告诉我在 [Master] 上时从 [Relation] 提交更改分支

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T11:54:41.623

“Swtich Branch”和“Checkout”之间的区别在于您可以结帐的性质：

*   “切换分支”：你只签出一个分支
*   “ [Checkout](http://git-scm.com/docs/git-checkout) ”：您签出任何`<tree-ish>`引用（即提交、标记或树）

在仍处于打开状态时`relation`，您需要：

*   [添加](https://netbeans.org/projects/versioncontrol/pages/Git_uc#Add)然后[提交](https://netbeans.org/projects/versioncontrol/pages/Git_uc#Commit)您当前的修改
*   或[隐藏](https://netbeans.org/projects/versioncontrol/pages/Git_func#Stash)您当前未提交的修改

然后，有了清晰的工作树，就可以[切换 branch](https://netbeans.org/projects/versioncontrol/pages/Git_uc#Switch_to_Branch)。

请参阅[结帐时的 Netbeans 用户指南](https://netbeans.org/kb/docs/ide/git.html#branchCheckOut)

> **注意**：如果您想将文件切换到已经存在的分支（例如，切换到不在某个分支顶部的提交），您可以：
> 
> *   使用`Team > Git > Branch > Switch To Branch`命令，
> *   `Switch to Selected Branch`在对话框中指定分支，
> *   将其作为新分支检查（可选），
> *   并按开关。

# visual-studio-2010 - 默认情况下在 Windows Vista 上下文中运行的应用程序

> ID：15808967
> 
> 赞同：5
> 
> 时间：2013-04-04T10:45:02.853
> 
> 标签：visual-studio-2010, visual-c++, windows-8, operating-system

我正在 Windows 8 机器上测试我的桌面应用程序，我注意到任务管理器详细信息视图中有一个名为“操作系统上下文”的新列。这显示了我的应用程序在“Windows Vista”上下文中运行。

我没有在应用程序清单中指定任何内容来强制应用程序在 Visual Studio 中的此上下文下运行。该应用程序是一个 Visual C++ 应用程序，在 Visual Studio 2010 中构建。

不要误会我的意思，该应用程序在 Windows 8 上运行顺畅，所以我不想解决崩溃或错误。看到这样的事情让我很恼火，我想解决它。

所以我的问题是如何让我的应用程序在 Windows 8 下的“Windows 8”上下文中运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T12:40:37.973

好的，我想[我在这里找到了答案](http://msdn.microsoft.com/en-us/library/dd371711%28VS.85%29.aspx)。它说：

> 默认情况下，清单中没有兼容性部分的应用程序将在 Windows 7 和未来的 Windows 版本上接收 Windows Vista 行为

因此，如果您的清单中没有*任何内容*，Vista 就是您所得到的。阅读本文的其余部分，似乎您能做的最好的事情是获得 Windows 7 而不是 Windows 8，所以也许这是商店应用程序特有的东西？

**编辑**

好的，我终于找到了 Windows 8 所需的条目：

```
<supportedOS Id="{4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}"/> 
```

所以试着把它放在清单的兼容性部分。

我知道您使用的是 VS2010，所以这可能会有所不同，但是使用 VS2012，我做了以下操作：

1.  创建了一个新的 WPF 应用程序
2.  在解决方案资源管理器中右键单击项目并选择添加新项目
3.  从列表中选择应用程序清单

一个新的清单被添加到项目中，兼容性设置被注释掉了。未注释所有内容的精简示例如下：

```
<?xml version="1.0" encoding="utf-8"?>
<asmv1:assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<assemblyIdentity version="1.0.0.0" name="MyApplication.app"/>
<compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
  <application>
    <!-- A list of all Windows versions that this application is designed to work with. 
    Windows will automatically select the most compatible environment.-->

    <!-- If your application is designed to work with Windows Vista, uncomment the following supportedOS node-->
    <supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}"></supportedOS>

    <!-- If your application is designed to work with Windows 7, uncomment the following supportedOS node-->
    <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>

    <!-- If your application is designed to work with Windows 8, uncomment the following supportedOS node-->
    <supportedOS Id="{4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}"></supportedOS>

  </application>
</compatibility>
</asmv1:assembly> 
```

重建后，应用程序在任务管理器中按预期显示：

![在此处输入图像描述](https://i.stack.imgur.com/6cL6U.png)

# xml - 如何将 XML 转换为 Xelement？

> ID：15808968
> 
> 赞同：0
> 
> 时间：2013-04-04T10:45:06.113
> 
> 标签：xml, sharepoint-2007, windows-phone-8, xelement, xattribute

```
string queryText = string.Format(@"<Where>
                <And>    
                <Neq><FieldRef Name='EventType' /><Value Type='recurrence'>3</Value> </Neq> 

                <And>  
                    <Eq><FieldRef Name='fRecurrence'/><Value Type='Recurrance'>True</Value></Eq>
                    <And>  
                      <Geq><FieldRef Name='EndDate' /><Value Type='DateTime'>{0}</Value></Geq>
                      <Leq><FieldRef Name='StartDate' /><Value Type='DateTime'>{0}</Value></Leq> 
                    </And>     
                </And>

            </And>
           </Where> ", new DateTime(selectedDate.Year, selectedDate.Month, selectedDate.Day).ToString("yyyy-MM-dd")); 
```

这是共享点中用于过滤 Windows 中的 GetListItem 的 XmlNode 类型的 ndQuery。想在 WP8 中做同样的事情，但它不支持使用 XElement 的 Xml，所以请将此 xml 转换为 XElement。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:14:15.733

只需使用：

```
var element = XElement.Parse(queryText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:10:45.400

我的问题得到了解决。感谢所有有价值的回复。出现上述错误是由于sharepoint中的数据不足。

# asp.net-mvc-4 - 在暂存 azure web 角色中创建子域

> ID：15808973
> 
> 赞同：1
> 
> 时间：2013-04-04T10:45:18.120
> 
> 标签：asp.net-mvc-4, azure, asp.net-web-api, azure-web-roles

我有两个项目的解决方案： - Project1 是一个 asp.net mvc 4 项目 - Project2 是一个 asp.net webapi 项目

我想让它们都在同一个 webrole 上，在生产中我似乎可以执行以下操作：

*   所有发往 mydomain.com 的请求都将发往 MVC 项目
*   对 api.mydomain.com 的所有请求都将转到 webapi 项目

在暂存基本网址时，类似于 ec3abfacbfb27a1800f6bc0f2b168121.cloudapp.net，有没有办法做到这一点：

*   所有发往 ec3abfacbfb27a1800f6bc0f2b168121.cloudapp.net 的请求都将发往 MVC 项目
*   所有对 api.ec3abfacbfb27a1800f6bc0f2b168121.cloudapp.net 的请求都将转到 webapi 项目

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:18:22.943

不。在您的特定场景（以及更多场景）中，我建议根本不要使用登台环境。请改用其他生产环境。并以它`[myapp-stating].cloudapp.net`的名字为例。

比使用您自己的自定义域创建映射（比如说它`myapp.com`）：

*   `staging.web.myapp.com`-> CNAME ->`myapp-staging.cloudapp.net`
*   `staging.api.myapp.com`-> CNAME ->`myapp-staging.cloudapp.net`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T05:48:30.557

首先，在您的网络应用程序中设置路由（如果您还没有）。它应该`api`在主机名上查找前缀，否则与 URL 无关。

然后使用浏览器进行手动测试，使用您的登台服务器的 IP 地址编辑`%SystemRoot%\System32\drivers\etc\hosts`并添加一行。`api.abcdefghijklmnopqrstuvwxyz.cloudapp.net`

`api`对于自动化测试，让测试客户端使用其常规主机名（不带前缀）连接到登台服务器，但将`Host`标头设置为根据需要包含`api`前缀。

# magento - 更改 Magento 域会中断 URL 重写

> ID：15808974
> 
> 赞同：0
> 
> 时间：2013-04-04T10:45:18.200
> 
> 标签：magento, url-rewriting, subdomain

我刚刚启动了我的第一个 Magento 商店（在 CentOS 和 Apache 上），我已经从我的设置子域 - [http://prelive.mydomain.com](http://prelive.mydomain.com)（一切正常，启用 url 重写并正常工作）切换到实时子域[http://www.mydomain.com](http://www.mydomain.com)，基本上只需执行以下操作：

1.  通过管理界面清除缓存
2.  更新数据库中的安全和不安全的基本 URL
    *   更新 core_config_data 设置值 = '[http://www.mydomain.co.uk/](http://www.mydomain.co.uk/) ' WHERE 路径 = 'web/unsecure/base_url';
    *   更新 core_config_data 设置值 = '[https://www.mydomain.co.uk/](https://www.mydomain.co.uk/) ' WHERE 路径 = 'web/secure/base_url';
3.  将整个站点文件系统从 /var/www/html/prelive 移动到 /var/www/html/www （我尝试复制，但它导致了各种权限问题，我稍后会解决！）
4.  手动编辑 var/resource_config.json 中的媒体基本路径
5.  像这样更新我的虚拟主机：

    ```
    <VirtualHost *:80>
        DocumentRoot /var/www/html/www
        ServerName www.mydomain.co.uk
        ServerAlias www.mydomain.co.uk
        ErrorLog logs/www.mydomain.co.uk-error_log
    </VirtualHost> 
    ```

6.  像这样编辑基础 .htaccess 文件 ()

    ```
    SetEnvIf Host www\.mydomain.co.uk MAGE_RUN_CODE=angling_r_en
    SetEnvIf Host www\.mydomain.co.uk MAGE_RUN_TYPE=store
    SetEnvIf Host ^mydomain.co.uk MAGE_RUN_CODE=angling_r_en
    SetEnvIf Host ^.mydomain.co.uk MAGE_RUN_TYPE=store 
    ```

它几乎可以工作......但是url重写被破坏了。[我可以在http://www.mydomain.com](http://www.mydomain.com)上看到该站点，但导航到子页面会得到 404（例如[http://www.mydomain.com/path/to/product.html](http://www.mydomain.com/path/to/product.html)），除非我专门将 URL 更改为通过 index.php 指向[http://www.mydomain.com/index.php/path/to/product.html](http://www.mydomain.com/index.php/path/to/product.html)或[http://www.mydomain.com/index.php/admin](http://www.mydomain.com/index.php/admin)

作为参考，在 .htaccess 我也有（在子域切换期间保持不变）：

```
RewriteBase / 
```

和

```
RewriteRule .* index.php [L] 
```

对我忘记的有什么想法吗？

非常感谢本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:47:37.277

好的 - 所以问题一直在服务器上，而不是 Magento ......

基本上重写不起作用，因为我在 httpd.conf 和 ssl.conf 的 VirtualHost 容器中都需要这个：

```
<Directory /var/www/html/www>
        AllowOverride All
</Directory> 
```

我仍然不明白它是如何在旧位置（肯定没有这个）而不是新位置上工作的......但它现在和以前一样工作，“使用 Web 服务器重写”打开在 System > Configuration > Web 中打开，创建“干净”的 url，这些 url 由 mod_rewrite 通过 index.php 重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:16:35.210

您很可能需要重新索引目录 URL 重写以合并您的新 URL 更改！查看`System > Index Management`目录 URL 重写并重新编制索引。

# java - Scala 的 TreeSet 与 Java 的 TreeSet - 民意调查？

> ID：15808976
> 
> 赞同：8
> 
> 时间：2013-04-04T10:45:25.937
> 
> 标签：java, scala, priority-queue, scala-collections, treeset

如果我想及时删除`log(n)`Java中的最高条目`TreeSet`，我使用`treeSet.pollFirst()`- Scala`mutable.TreeSet`类的等价物是什么？

无论如何，我真正想要的是一个类似于堆的优先队列数据结构，它可以让我在`removeMax`对数时间内。我查看了 Scala 集合库，我很困惑 - 虽然让我（即）在对数时间内 - 它没有提供更新日志时间优先级的方法（我将不得不粗暴地扫描和删除项目并在线性时间内重新添加） . 同样可以让我在对数时间内更新优先级（通过删除和重新添加），但它没有（即）操作。我应该使用什么收藏容器？请不要向我介绍外部依赖项。`add``updatePriority``mutable.PriorityQueue``deque``removeMax``mutable.TreeSet``removeMax``pollFirst`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:26:02.227

您可以使用 中的`head`和`last`方法`immutable.TreeSet`，它们是`O(log n)`。相同的方法存在于 中`mutable.TreeSet`，但没有被覆盖以提供更好的效率和摊销时间（在 Scala 2.10 中）。该`head`方法将是对数的，但这样做时可能会实例化一个迭代器。该`last`方法实际上会遍历它，具有线性复杂度。好消息是，您可以通过自定义来控制最小或最大的内容- 并通过调用`Ordering`轻松从现有的获取它。`Ordering``Ordering.reverse`

如果您需要删除该元素，只需使用`-=`. 您可以创建自己的隐式值类来搭载`pollFirst`树集上的方法。

```
implicit class MyExtensions[T](ts: mutable.TreeSet[T]) extends AnyVal {
  def pollFirst(): T = {
    val elem = ts.head
    ts -= elem
    elem
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:55:16.867

不是答案，只是建议:) 请记住，您可以从 scala 访问 Java 库（好吧，如果您编译到 JVM :) 所以如果 Java 的 TreeSet 适合您，请使用它 :)

您还可以阐明您的要求；您的 updatePriority 方法的参数是什么？您尝试更新谁的优先级？

# php - codeigniter 转义值错误

> ID：15808982
> 
> 赞同：1
> 
> 时间：2013-04-04T10:45:42.070
> 
> 标签：php, codeigniter, escaping

我正在使用 codeigiter 2.1.3，我有简单的查询绑定，但是当我运行它时，我得到以下错误。我什至对活动记录使用了同样的东西，但我仍然得到同样的错误。使用 ODBC 连接从 MsSql 查询数据。

```
$searchTerm = $this->db->escape_like_str("st'm");

$sql = "SELECT * FROM arcus WHERE id LIKE ? OR name = ?";

$query = $this->db->query($sql, array($searchTerm, $searchTerm));

Error Number: 37000

[Microsoft][ODBC SQL Server Driver][SQL Server]Incorrect syntax near 'm'.

SELECT * FROM arcus WHERE id LIKE '%st\'m%' {escape '!'}
OR name LIKE '%st\'m%' {escape '!'}

Filename: C:\xampp\htdocs\XX\system\database\DB_driver.php

Line Number: 330 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:16:09.137

问题解决了，codeigniter 没有像 MsSql 想要的那样转义值。像 MsSql 一样，单引号是像 ('st''m') 一样的转义，对于 mysql ('st\'m')。Codeigniter 的做法是错误的。这个帖子[链接](https://stackoverflow.com/questions/574805/how-to-escape-strings-in-sql-server-using-php)帮助我使用以下函数来转义 MsSql 的引号。它现在工作。感谢您的建议。

```
 function ms_escape_string($data) {
    if ( !isset($data) or empty($data) ) return '';
    if ( is_numeric($data) ) return $data;

    $non_displayables = array(
        '/%0[0-8bcef]/',            // url encoded 00-08, 11, 12, 14, 15
        '/%1[0-9a-f]/',             // url encoded 16-31
        '/[\x00-\x08]/',            // 00-08
        '/\x0b/',                   // 11
        '/\x0c/',                   // 12
        '/[\x0e-\x1f]/'             // 14-31
    );
    foreach ( $non_displayables as $regex )
        $data = preg_replace( $regex, '', $data );
    $data = str_replace("'", "''", $data );
    return $data;
} 
```

# android - 模拟器没有启动

> ID：15808986
> 
> 赞同：0
> 
> 时间：2013-04-04T10:45:55.257
> 
> 标签：android

当我启动模拟器时收到警告请帮助我

```
Data partition already in use. Changes will not persist!
Cache partition already in use. Changes will not persist! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:53:15.137

删除该模拟器并创建另一个新模拟器。确保 AVD SDK 管理器中只有 1 个模拟器。试试看，也许它可以解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:47:56.147

在 Windows 中打开命令提示符 (cmd.exe)。在 Linux 中打开终端。在 SDK 文件夹中找到 adb.exe

```
..\android-sdk\platform-tools\abd.exe
cd <sdk directory> (move to the folder listed above)
dir (to make sure abd.exe is in that directory)
adb kill-server (stop the abd service, won't return anything)
adb start-server (start the abd service back up, should give a couple of readings) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T10:44:33.360

尝试模拟不同的模型。例如，在我的情况下，我使用的是 nexus 4 并且每次都发生错误。之后我尝试更改模型（4.0“，1024 RAM）并且它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T08:17:43.543

此警告表示您的数据分区 (userdata-qemu.img) 和缓存分区 (cache.img) 正在被使用。可能有其他模拟器正在运行。或者，您的模拟器图像可能存在一些不一致的状态。

如果您确定没有其他模拟器在运行，则删除 avd 目录中的“文件锁”。目录应该是 ~/.android/avd/[您的 AVD 名称]/。而“文件锁”应该是userdata-qemu.img.lock和cache.img.lock。

# python - Reportlab 电子表格表格公式

> ID：15808994
> 
> 赞同：1
> 
> 时间：2013-04-04T10:46:10.413
> 
> 标签：python, reportlab, formulas

我是 python 和 Reportlab 的新手。目前我正在尝试使用 Reportlab 电子表格创建发票。我发现了公式：PreviousPagesColSum、CurrentPageColSum 和 TotalPagesColSum，我可以在以下页面上重复这些公式（repeatRowsB = 3）。但是，现在我想计算 TotalPagesColSum 的增值税，为此我需要获取 TotalPagesColSum 的值并将其乘以 0.21，但我似乎找不到如何做到这一点的示例。我可以通过在发票上添加增值税列并在该列上执行 ColSum 来解决它，但由于出现舍入差异，这并不可取。

有人可以给我建议吗？先感谢您。海尔加

# excel - 禁用 VBA 用户窗体“x”，但仍允许卸载我

> ID：15808997
> 
> 赞同：1
> 
> 时间：2013-04-04T10:46:13.593
> 
> 标签：excel, vba, userform

我有一个用户表单，在关闭时需要运行清理步骤。我希望`X`按钮被禁用和/或不可见，但我仍然需要能够卸载表单。我使用了像下面这样的代码，但它也阻止了`Unload Me`.

```
'Disables closing via x button
Sub UserForm_QueryClose(Cancel As Integer, ClsoeMode As Integer)
    If CloseMode = vbFormControlMenu Then
        MsgBox ("BLOCKED")
        Cancel = True
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T10:51:40.193

`UserForm_QueryClose`在这种情况下不要使用。使用API`RemoveMenu`和`GetSystemMenu``FindWindow`

[这](http://allapi.mentalis.org/apilist/apilist.php)是我最喜欢的 API 站点

**[删除菜单： http](http://allapi.mentalis.org/apilist/RemoveMenu.shtml) : **//allapi.mentalis.org/apilist/RemoveMenu.shtml****

 ****[获取系统菜单： http](http://allapi.mentalis.org/apilist/GetSystemMenu.shtml) : **//allapi.mentalis.org/apilist/GetSystemMenu.shtml****

 ****[查找窗口： http](http://allapi.mentalis.org/apilist/FindWindow.shtml) : **//allapi.mentalis.org/apilist/FindWindow.shtml****

 **看这个例子

```
Option Explicit

Private Declare Function RemoveMenu Lib "user32" (ByVal hMenu As Long, ByVal nPosition As Long, _
ByVal wFlags As Long) As Long

Private Declare Function GetSystemMenu Lib "user32" (ByVal hwnd As Long, ByVal bRevert As Long) As Long

Private Declare Function FindWindow Lib "user32.dll" Alias "FindWindowA" (ByVal lpClassName As String, _
ByVal lpWindowName As String) As Long

Private Const MF_BYPOSITION = &H400&

Private Sub UserForm_Initialize()
    Dim Ret As Long

    '~~> Change UserForm1 to match your userform's caption
    Ret = FindWindow("ThunderDFrame", "UserForm1")

    Do While Ret = 0
        '~~> Change UserForm1 to match your userform's caption
        Ret = FindWindow("ThunderDFrame", "UserForm1")
        DoEvents
    Loop

    RemoveMenu GetSystemMenu(Ret, 0), 6, MF_BYPOSITION
End Sub

Private Sub CommandButton1_Click()
    Unload Me
End Sub 
```

**截图**：

![在此处输入图像描述](https://i.stack.imgur.com/VIQBV.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T15:09:52.350

与其给用户一条消息说他不能点击红色的 x，不如按照你的方式捕获它，并在卸载表单之前进行清理：

```
Sub UserForm_QueryClose(Cancel As Integer, ClsoeMode As Integer)
    If CloseMode = vbFormControlMenu Then
        ' run cleanup code here
    End If
End Sub 
```

如果表单有一个关闭按钮来进行清理，那么使用这样的东西：

```
Sub UserForm_QueryClose(Cancel As Integer, ClsoeMode As Integer)
    If CloseMode = vbFormControlMenu Then
        ' click event code for Close button:
        btnClose_Click 
        Cancel = True
    End If
End Sub 
```

无需过度使用 Windows API，因为这都是内置的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-12T14:42:31.370

我知道这是一个旧的提要，但你拼写`ClsoeMode`错误。只需将其更改为`CloseMode`，这应该可以解决您的问题。******

# servlets - Servlet 从 URL 中检索 XML 并返回 XML 响应

> ID：15808998
> 
> 赞同：0
> 
> 时间：2013-04-04T10:46:14.010
> 
> 标签：servlets, get, output

在我正在做的一个项目中，由于浏览器中“同源策略”的限制，我被迫开发服务器端部分，这会阻止 AJAX 向页面域之外的任何内容发出请求。

因此，我正在构建一个 Java Servlet，它将充当页面的处理程序，并将从外部站点检索 XML 并使用 AJAX 将其返回到客户端页面

我将使用 GET 参数来指示 servlet 从哪个 URL 获取 XML。

我是 Java 的初学者，我可以在 PHP 中轻松做到这一点，但遗憾的是没有可用的环境来托管 PHP 或 Apache

**骨架代码**

```
public void doGet(HttpServletRequest agentRequest, HttpServletResponse agentResponse) 
throws ServletException, IOException
{

    agentResponse.setContentType("text/xml");

    //determine if agentRequest is for templateList or templateDetails

        //build URL for specific request

    //if no parameters sent or invalid send error response

    //fetch XML from URL 

    //output response XML to client  

} 
```

我不想要一个完整的代码解决方案，只是参考和想法让我朝着正确的方向前进！

例如，为此使用什么 Java 功能等。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:28:40.977

根据要求，一些高级想法可以帮助您入门：首先，从请求参数中获取外部 URL：

```
//equivalent of PHP $_GET["url"]
String externalUrl = agentRequest.getParameter("url"); 
```

然后您需要从外部 URL 检索响应。关于该主题已经有各种 Q'a 和 A's，包括[How do I do a HTTP GET in Java?](https://stackoverflow.com/questions/1485708/how-do-i-do-a-http-get-in-java)

最后，您需要使用提供的 OutputStream 将响应写入响应：

```
agentResponse.getOutputStream(); 
```