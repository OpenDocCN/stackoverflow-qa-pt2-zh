# StackOverflow 问答 13551000-13551999

# java - 如何使用 Spring MVC 处理未知数量的参数

> ID：13551000
> 
> 赞同：12
> 
> 时间：2012-11-25T12:27:35.467
> 
> 标签：java, javascript, jquery, spring, spring-mvc

我想使用 JQuery 的 Sortable (http://jqueryui.com/sortable/#connect-lists)，所以我的左侧列表将以这样的方式结束

```
<ul>
    <li>
        Some txt1 
        <input type="hidden" name="li1" value="1"/>
    </li>
    <li>
        Some txt2 
        <input type="hidden" name="li2" value="2"/>
    </li>
</ul> 
```

`<li>`每次的数量都会不同。我的想法是让所有隐藏的输入值和名称将它们放入数组中并将数组作为 JSON 数据发布，但我的控制器应该是什么样子？有没有办法“等待”控制器中的某些内容列表。例如：

```
@RequestMapping(value = "/listItems")
    public @ResponseBody GridModel getUsersForGrid(@RequestParam(value = "items") List<NameIdPair> items){...} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-25T12:31:48.393

您可以注入一个`Map`保存所有参数的实例。

```
@RequestMapping("/listItems")
public @ResponseBody GridModel getUsersForGrid(@RequestParam Map<String, String> params) {
    params.get("parametername");
    // ...
} 
```

# typescript - 导出函数的打字稿多重调用签名

> ID：13551001
> 
> 赞同：5
> 
> 时间：2012-11-25T12:28:08.227
> 
> 标签：typescript

我有以下代码：

```
module array {
  export function contains(arr: Array, item: any): bool { // implementation }
} 
```

我希望能够拥有的是联合类型（在上面的示例中 Array、NodeList 和 IArguments 应该是可能的）或导出函数的多个签名。我似乎也做不到。

我尝试使用不同类型的参数多次声明该函数，但编译器抱怨缺少 return 语句 - 没有必要证明仅用于参数类型检查的声明的实现（并使代码冗长）。我认为拥有联合类型会更好，不是吗？

所以问题是：我如何实现类型检查允许的参数是不同类型的函数（在这种情况下 - 类似对象的数组），但实现是相同的，而无需复制/粘贴实现（基本上是一个简单的'return false' 可能会在最后一个声明之前的声明中使用，但似乎仍然是个坏主意）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T15:52:09.337

您可以使用`any`关键字来获得动态参数：

```
export function contains(arr: any[], item: any): bool { // implementation } 
```

或者，如果您知道要允许的类型，则可以重载该函数：

```
export function contains(arr: string[], item: string): bool;
export function contains(arr: number[], item: number): bool;
export function contains(arr: any[], item: any): bool { // implementation } 
```

我用`string`and`number`作为例子 - 但你可以使用任何你喜欢的类型。我还假设如果你有一个字符串列表，你会寻找一个字符串项，但如果不是这样，你可以更改它。

最后一个函数是不可调用的——你只能通过重载来访问它。

# python - 打印文件的某个部分

> ID：13551004
> 
> 赞同：0
> 
> 时间：2012-11-25T12:28:34.910
> 
> 标签：python, python-2.7

所以，我可能会以错误的方式解决这个问题，如果是这样，我会很感激以不同的方式来解决问题，但这就是我正在尝试做的事情，以及我正在尝试做的事情。

我正在根据我发现的一些初学者项目建议制作一个简单的地址簿，我正在慢慢实现它，但我不知道如何让它搜索文件的某个部分。我希望它打印姓名、地址、电话和手机。所有这些都在一个单独的行上，总共 4 行。

我正在使用以下代码来完成此操作：

```
def search_entries():
    found = 0
    search = raw_input("Please enter the person's name: ")
    for line in open('addbook.txt', 'r').readlines():
        if search in line:
            found = 1
        if found >= 1:
            print line
            if found == 4: break 
```

但是，不是只打印人名中的这 4 行，而是打印文件的其余部分。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:32:37.350

`found`设置为 1 后永远不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:32:38.847

意识到我忘了在代码中添加一个计数器：

```
def search_entries():
    found = 0
    search = raw_input("Please enter the person's name: ")
    for line in open('addbook.txt', 'r').readlines():
        if search in line:
            found = 1
        if found >= 1:
            print line
            found = found + 1
            if found == 4: break 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:35:51.410

有一个稍微好一点的写法（未经测试）：

```
from itertools import islice

with open('input.txt') as fin:
    for line in fin:
        if 'bob' in line:
            next_3 = list(islice(fin, 3))
            print line, next_3
            break 
```

# asp.net - 可以写入只读文件夹

> ID：13551005
> 
> 赞同：2
> 
> 时间：2012-11-25T12:28:36.657
> 
> 标签：asp.net, windows, iis

环境是Windows 2008 R2，ASP.NET 4，IIS 7。我有一个场景，用户向服务器提交一些设置，服务器根据设置生成文件（位图或SVG文件）并保存文件到一个文件夹中。通过写入位图生成图像，使用 File.WriteAllText 生成 SVG 文件。然后将用户重定向到该文件。

我没想到的是，服务器能够在我不授予文件夹写权限的情况下创建文件。我检查的事情：

*   w3wp.exe 在 IIS AppPool/MyUser 下运行，正确的应用程序池标识
*   IIS AppPool/MyUser 具有对该文件夹的读取权限——如果我转到 Security/Advanced/Effective Persmissions 并检查 MyUser 对该文件夹的权限，我将获得 List Folder/Read Data、Read attributes、Read extended attributes 和 Read permissions
*   如果我在写入文件之前抓取 System.Security.Principal.WindowsIdentity.GetCurrent().Name，它会正确设置为应用程序池标识。
*   创建的文件的所有者是 MyUser

我不明白的是为什么 ASP.NET 可以在应用程序池具有只读访问权限的文件夹中创建文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:10:41.320

原来用户组对文件夹具有创建文件的特殊权限。不知道为什么在 Windows 2008 中默认添加它——在我所有的服务器盒子上，新文件夹都是由具有创建文件和其他一些特殊权限的用户创建的。Windows 7 上的行为有所不同——没有向用户组添加特殊权限。

无论如何，删除该权限解决了这个问题。

谢谢。

# mysql - 无法执行联合，得到 #1248 - 每个派生表都必须有自己的别名错误

> ID：13551007
> 
> 赞同：0
> 
> 时间：2012-11-25T12:29:09.697
> 
> 标签：mysql, mysql-error-1248

我有这两个查询

```
select 
    t . *, events.event_time as last_time
from
    events,
(
    (
        select 
            bonding.type,
                bonding.global_id2 as target_post,
                bonding.target_id as on_whose_post,
                GROUP_CONCAT(bonding.shooter_id) as shooter_ids,
                GROUP_CONCAT(bonding.what_global_id) as shooted_what,
                MAX(bonding.what_global_id) as last,
                'bonding' as flag
        from
            bonding
        where
            bonding.type = 1
                and bonding.shooter_id in (select 
                    `user2`
                from
                    relation_table
                where
                    `user1` = 192)
        group by bonding.global_id2
    ) 
    union 
    (
    select 
            bonding.type,
                bonding.global_id2 as target_post,
                bonding.target_id as on_whose_post,
                GROUP_CONCAT(bonding.shooter_id) as shooter_ids,
                GROUP_CONCAT(bonding.what_global_id) as shooted_what,
                MAX(bonding.what_global_id) as last,
                'bonding' as flag
        from
            bonding
        where
            bonding.type = 2
                and bonding.shooter_id in (select 
                    `user2`
                from
                    relation_table
                where
                    `user1` = 192)
        group by bonding.global_id2
    ) 
    union 
    (
    select 
            bonding.type,
                bonding.global_id2 as target_post,
                bonding.target_id as on_whose_post,
                GROUP_CONCAT(bonding.shooter_id) as shooter_ids,
                GROUP_CONCAT(bonding.what_global_id) as shooted_what,
                MAX(bonding.what_global_id) as last,
                'bonding' as flag
        from
            bonding
        where
            bonding.type = 5
                and bonding.shooter_id in (select 
                    `user2`
                from
                    relation_table
                where
                    `user1` = 192)
        group by bonding.global_id2
    ) 
    union 
    (
    select 
            bonding.type,
                bonding.global_id2 as target_post,
                bonding.target_id as on_whose_post,
                GROUP_CONCAT(bonding.shooter_id) as shooter_ids,
                GROUP_CONCAT(bonding.what_global_id) as shooted_what,
                MAX(bonding.what_global_id) as last,
                'bonding' as flag
        from
            bonding
        where
            bonding.type = 9
                and bonding.shooter_id in (select 
                    `user2`
                from
                    relation_table
                where
                    `user1` = 192)
        group by bonding.global_id2
    ) 
    union 
    (
    select 
            bonding.type,
                bonding.global_id2 as target_post,
                bonding.target_id as on_whose_post,
                GROUP_CONCAT(bonding.shooter_id) as shooter_ids,
                GROUP_CONCAT(bonding.what_global_id) as shooted_what,
                MAX(bonding.what_global_id) as last,
                'bonding' as flag
        from
            bonding
        where
            bonding.type = 10
                and bonding.shooter_id in (select 
                    `user2`
                from
                    relation_table
                where
                    `user1` = 192)
        group by bonding.global_id2
    )

)as t where events.global_id = t1.last 
```

还有一个：-

```
SELECT 
    post_stream.type,
    post_stream.ref_global_id as target_post,
    post_stream.user_id as on_whose_post,
    post_stream.user_id as shooter_ids,
    post_stream.ref_global_id as shooted_what,
    post_stream.ref_global_id as last,
    'stream' as flag,
    events.event_time as last_time
FROM
    post_stream,
    events,
    relation_table
WHERE
    events.global_id = post_stream.ref_global_id
        and post_stream.type IN (2 , 3, 7, 8)
        AND post_stream.user_id = relation_table.user2
        AND relation_table.user1 = 192 
```

现在我需要对两个查询执行连接以获得组合结果，但是它给出了每个派生表都必须有自己的别名错误，我应该为派生表放置一个别名，这两个查询在单独运行时运行时没有错误.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:12:49.427

第一个查询的格式大约有 116 行，并且包含一个 5 路 UNION 子查询。除了 WHERE 子句中的一个值之外，这 5 个子查询似乎是相同的。这种重写极大地简化了 SQL：

```
SELECT t.type, t.target_post, t.on_whose_post, t.shooter_ids, t.shooted_what,
       t.last, t.flag, events.event_time AS last_time
  FROM events JOIN
       (SELECT bonding.type,
               bonding.global_id2 AS target_post,
               bonding.target_id AS on_whose_post,
               GROUP_CONCAT(bonding.shooter_id) AS shooter_ids,
               GROUP_CONCAT(bonding.what_global_id) AS shooted_what,
               MAX(bonding.what_global_id) AS last,
               'bonding' AS flag
          FROM bonding
         WHERE bonding.TYPE IN (1, 2, 5, 9, 10)
           AND bonding.shooter_id IN (SELECT user2 FROM relation_table WHERE user1 = 192)
         GROUP BY bonding.global_id2
        ) AS t
     ON events.global_id = t1.last 
```

这将更容易与第二个查询结合使用。随着进一步的修订，我可能会删除`bonding.`前缀，因为主子查询中唯一的表是`bonding`.

第二个查询也应该使用 JOIN 表示法重写：

```
SELECT p.type          AS type,
       p.ref_global_id AS target_post,
       p.user_id       AS on_whose_post,
       p.user_id       AS shooter_ids,
       p.ref_global_id AS shooted_what,
       p.ref_global_id AS last,
       'stream'        AS flag,
       e.event_time    AS last_time
  FROM post_stream    AS p
  JOIN events         AS e ON e.global_id = p.ref_global_id
  JOIN relation_table AS r ON p.user_id = r.user2
 WHERE r.user1 = 192
   AND post_stream.type IN (2 , 3, 7, 8) 
```

问题：

1.  您确定`on_whose_post`并且`shooter_ids`应该来自同一列吗？
2.  您确定`shooted_what`并且`last`应该来自同一列吗？

这样做可能有正当的（而且不是太牵强）的理由——但这并不是立即显而易见的。

不幸的是，我们还没有被告知如何将上面第一个查询中的数据与第二个查询连接起来。似乎有很多相同的列；只有 OP 才能确定需要什么。

# opengl - 我的代码无法将图片正确加载到 opengl

> ID：13551011
> 
> 赞同：0
> 
> 时间：2012-11-25T12:29:42.447
> 
> 标签：opengl, textures, skybox

我尝试将六张图片加载为纹理并绘制一个天空盒，但结果很奇怪，每张图片在其对应的灰色矩形上映射了三次。问题是什么？

```
#include <stdlib.h>
#include <stdio.h>

#include <glut.h>
#include <gl.h>
#include <glu.h>

#include <math.h>
#include <windows.h>

GLuint texture [6]; //the array for our texture

void init(void)
{

glClearColor (0.0, 0.0, 0.0, 1.0);
glShadeModel (GL_SMOOTH);
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glEnable(GL_DEPTH_TEST);
glEnable(GL_NORMALIZE);
glEnable(GL_TEXTURE_2D);
}

GLuint LoadTexture( const char * filename, int width, int height) {
GLuint texture;
unsigned char * data;
FILE* file;

file = fopen( filename, "r" );
if ( file == NULL ) return 0;
data = (unsigned char *)malloc( width * height * 3 );
fread( data, width * height * 3, 1, file );
fclose( file );

glGenTextures( 1, &texture ); 
glBindTexture( GL_TEXTURE_2D, texture ); 
glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE ); 

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_DECAL);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_DECAL);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST); 
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); 
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT); // texture should tile
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
gluBuild2DMipmaps( GL_TEXTURE_2D, 3, width, height, GL_RGB, GL_UNSIGNED_BYTE,data);    
free(data);
return texture; 
}     

void FreeTexture( GLuint texture )
{
glDeleteTextures( 1, &texture );
}

void skybox (void) {
float x = 0;
float y = 0;
float z = 0;
float width  = 100;
float height = 100;
float length = 100;
glPushAttrib(GL_ENABLE_BIT);
glEnable(GL_TEXTURE_2D);
glDisable(GL_DEPTH_TEST);
glDisable(GL_LIGHTING);
glDisable(GL_BLEND);
// Bind the BACK texture of the sky map to the BACK side of the cube
glBindTexture(GL_TEXTURE_2D, texture[0]);
// Center the skybox
x = x - width  / 2;
y = y - height / 2;
z = z - length / 2;
glBegin(GL_QUADS);      
glTexCoord2f(1.0f, 0.0f); glVertex3f(x + width, y,  z);
glTexCoord2f(1.0f, 1.0f); glVertex3f(x + width, y + height, z); 
glTexCoord2f(0.0f, 1.0f); glVertex3f(x, y + height, z);
glTexCoord2f(0.0f, 0.0f); glVertex3f(x, y,  z);
glEnd();
glBindTexture(GL_TEXTURE_2D, texture[1]);
glBegin(GL_QUADS);  
glTexCoord2f(1.0f, 0.0f); glVertex3f(x, y,  z + length);
glTexCoord2f(1.0f, 1.0f); glVertex3f(x, y + height, z + length);
glTexCoord2f(0.0f, 1.0f); glVertex3f(x + width, y + height, z + length); 
glTexCoord2f(0.0f, 0.0f); glVertex3f(x + width, y,  z + length);
glEnd();

glBindTexture(GL_TEXTURE_2D, texture[4]);
glBegin(GL_QUADS);      

glTexCoord2f(1.0f, 0.0f); glVertex3f(x, y,  z);
glTexCoord2f(1.0f, 1.0f); glVertex3f(x, y,  z + length);
glTexCoord2f(0.0f, 1.0f); glVertex3f(x + width, y,  z + length); 
glTexCoord2f(0.0f, 0.0f); glVertex3f(x + width, y,  z);
glEnd();
glBindTexture(GL_TEXTURE_2D, texture[5]);
glBegin(GL_QUADS);      
glTexCoord2f(0.0f, 0.0f); glVertex3f(x + width, y + height, z);
glTexCoord2f(1.0f, 0.0f); glVertex3f(x + width, y + height, z + length); 
glTexCoord2f(1.0f, 1.0f); glVertex3f(x, y + height, z + length);
glTexCoord2f(0.0f, 1.0f); glVertex3f(x, y + height, z);
glEnd();
glBindTexture(GL_TEXTURE_2D, texture[2]);
glBegin(GL_QUADS);      
glTexCoord2f(1.0f, 1.0f); glVertex3f(x, y + height, z); 
glTexCoord2f(0.0f, 1.0f); glVertex3f(x, y + height, z + length); 
glTexCoord2f(0.0f, 0.0f); glVertex3f(x, y,  z + length);
glTexCoord2f(1.0f, 0.0f); glVertex3f(x, y,  z);     

glEnd();
glBindTexture(GL_TEXTURE_2D, texture[3]);
glBegin(GL_QUADS);  
glTexCoord2f(0.0f, 0.0f); glVertex3f(x + width, y,  z);
glTexCoord2f(1.0f, 0.0f); glVertex3f(x + width, y,  z + length);
glTexCoord2f(1.0f, 1.0f); glVertex3f(x + width, y + height, z + length); 
glTexCoord2f(0.0f, 1.0f); glVertex3f(x + width, y + height, z);
glEnd();
//glBindTexture( GL_TEXTURE_CUBE_MAP, texture[0] ); //bind the texture
//glRotatef( angle, 1.0f, 1.0f, 1.0f );
//glutSolidSphere(2, 40, 40);
}

void display (void) {
glClearColor (0.0,0.0,0.0,1.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
GLfloat light_ambient[] = { 1.0, 1.0, 1.0, 1.0 };
GLfloat light_diffuse[] = { 1.0, 1.0, 1.0, 1.0 };
GLfloat light_specular[] = { 1.0, 1.0, 1.0, 1.0 };
GLfloat light_position[] = { 0.0, 0.0, 30.0, 0.0 };

glLightfv(GL_LIGHT0, GL_AMBIENT, light_ambient);
glLightfv(GL_LIGHT0, GL_DIFFUSE, light_diffuse);
glLightfv(GL_LIGHT0, GL_SPECULAR, light_specular);
glLightfv(GL_LIGHT0, GL_POSITION, light_position);

glLoadIdentity();
glPushMatrix();
gluLookAt (20.0, 20.0, 20.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
glPushMatrix();
texture[0] = LoadTexture( "back.bmp", 256, 256 ); //load the texture
texture[1] = LoadTexture( "front.bmp", 256, 256 ); //load the texture
texture[2] = LoadTexture( "left.bmp", 256, 256 ); //load the texture
texture[3] = LoadTexture( "right.bmp", 256, 256 ); //load the texture
texture[4] = LoadTexture( "bottom.bmp", 256, 256 ); //load the texture
texture[5] = LoadTexture( "top.bmp", 256, 256 ); //load the texture
glPopMatrix();
glPopMatrix();

//glEnable(GL_TEXTURE_GEN_S); //enable texture coordinate generation
//glEnable(GL_TEXTURE_GEN_T);
skybox();
for (int i = 0; i < 6; i++) {
  FreeTexture( texture[i] );
}
glutSwapBuffers();

}

void reshape (int w, int h)
{
glViewport (0, 0, (GLsizei) w, (GLsizei) h);
glMatrixMode (GL_PROJECTION);
glLoadIdentity();
glOrtho(-100.0, 100.0, -100.0, 100.0,-100.0,100.0);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

}

int main (int argc, char **argv) {
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_DOUBLE);
glutInitWindowSize(500, 500);
glutInitWindowPosition(100, 100);
glutCreateWindow("A basic OpenGL Window");
init();
glutDisplayFunc(display);
glutIdleFunc(display);
glutReshapeFunc(reshape);

glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:55:27.947

因此，您正在尝试加载 DIB/BMP 图像文件：

```
>     texture[0] = LoadTexture( "back.bmp", 256, 256 ); //load the texture
>                                    ^^^^
> 
```

读取文件内容

```
> GLuint LoadTexture( const char * filename, int width, int height) {
> GLuint texture; unsigned char * data; FILE* file;
> 
> file = fopen( filename, "r" );
> if ( file == NULL ) return 0;
> data = (unsigned char *)malloc( width * height * 3 );
> fread( data, width * height * 3, 1, file ); 
```

这对于 BMP 来说太短了，顺便说一句。

```
> fclose( file ); 
```

那么你的 DIB 解析器代码在哪里呢？

> ```
> glGenTextures( 1, &texture ); 
> glBindTexture( GL_TEXTURE_2D, texture ); 
> glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE ); 
> 
> glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_DECAL);
> glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_DECAL);
> glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST); 
> glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); 
> glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT); // texture should tile
> glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
> gluBuild2DMipmaps( GL_TEXTURE_2D, 3, width, height, GL_RGB, GL_UNSIGNED_BYTE,data);    
> free(data);
> return texture; 
> } 
> ```

您只需将未解析的 DIB/BMP 文件内容传递给 OpenGL。您希望 OpenGL 对此做什么？OpenGL 不知道文件格式，更不知道如何处理 DIB 文件。你需要一个 DIB 解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:34:55.790

由于您正在加载 RGB 数据，请确保[`GL_UNPACK_ALIGNMENT`设置为`1`](http://www.opengl.org/wiki/Common_Mistakes#Texture_upload_and_pixel_reads)：

```
glPixelStorei(GL_UNPACK_ALIGNMENT, 1)​.
gluBuild2DMipmaps( GL_TEXTURE_2D, 3, width, height, GL_RGB, GL_UNSIGNED_BYTE,data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T18:11:06.870

我使用[ImageMagick](http://www.imagemagick.org/script/index.php)开放库轻松加载任何用于 OpenGL 的图像。

# javascript - Backbone：以增量方式获取模型

> ID：13551015
> 
> 赞同：5
> 
> 时间：2012-11-25T12:30:09.090
> 
> 标签：javascript, jquery, backbone.js

目前，我正在获取一个包含 1000 多个模型的集合，这些模型具有相当大的延迟。我怎么一次能拿到50个？此外，是否可以点击“更多”按钮来获取另一个当前不存在的 50 个？

试图避免一次抓取整个集合，并有更多的“延迟加载”类型的方案。

这是我当前的渲染方法

```
render: function(){
        var self = this
        var collection = this.collection

        collection.each(function(tenant){ 
            var view = new TenantView({
                model: tenant, 
                collection: collection 
            })
            self.$el.append(view.render().el) 
        })
        return this
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T15:15:28.523

您必须在[collection.fetch](http://backbonejs.org/#Collection-fetch)调用中指定 {add: true} 和您的分页参数。它将追加到集合而不是重置其内容。

```
collection.fetch({data: {page: 3}, add: true}) 
```

然后只需收听集合的`add`事件并将项目附加到您的视图。

更新：在当前版本的骨干网中，您需要调用：

```
collection.fetch({data: {page: 3}, remove: false}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:56:49.857

从收集方法获取下的骨干网网站。

```
Backbone.sync = function(method, model) {
  alert(method + ": " + model.url);
};

var Accounts = new Backbone.Collection;
Accounts.url = '/accounts';

Accounts.fetch(); 
```

您可以在 url 的查询字符串中设置一个限制，例如 /accountants?offset=0&limit=50。

使用这些变量（偏移量、限制）限制数据库中的查询结果。

在获取请求的模型后修改查询字符串变量，以便当用户按下按钮或在您的页面上向下滚动时，对下一批模型的请求将是 /accountants?offset=50&limit=50

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:00:20.627

我会在视图本身上执行此操作，而不是覆盖`sync`或`fetch`本身。

就像是：

```
// when extending your view

initialize: function(options) {
  //... 
  this.collection.on('add', this.renderTenant, this);
},

events: {
  // change the selector to match your "more" button
  'click button.more': 'uiMore'
},

// Just tacking this on the view.  You could make it an option, or whatever.
perPage: 50,

// this would produce a query with `offset` and `length`.  Change it to 
// however your request should paginate: page/perPage, just page, etc.
uiMore: function() {
  var $more = this.$('.more');
  var data = {};
  data.offset = this.collection.length;
  data.length = this.perPage;
  $more.prop('disabled', true);
  this.collection.fetch({data: data, add: true, success: function() {
    $more.prop('disabled', false);
  });
},

renderTenant: function(tenant) {
  var view = new TenantView({
    model: tenant, 
    collection: this.collection 
  })
  this.$el.append(view.render().el);
},

render: function(){
  this.collection.each(this.renderTenant.bind(this));
  return this;
} 
```

# javascript - 使用javascript创建悬停在文本区域光标周围的html元素

> ID：13551016
> 
> 赞同：0
> 
> 时间：2012-11-25T12:30:22.993
> 
> 标签：javascript, html

我不知道 jquery 。我可以使用来自 w3c 的示例来使用 javascript。到目前为止，我已经分配了一个单独的空间，我觉得既不方便又浪费宝贵的网页空间。我无法找到一种方法让文本在 textbox 中的光标周围浮动。我希望浮动跟随文本区域的键盘光标。我见过很多鼠标悬停显示某些东西的例子。稍后我希望在光标从一个单词移动到另一个单词时动态更改浮动文本。我想模仿[http://google.com/transliterate/](http://google.com/transliterate/)之类的东西。你看，他们在光标下方提供建议。

你能建议吗？

谢谢你的聆听。

# c - 查找指针指向的字符串的大小

> ID：13551017
> 
> 赞同：28
> 
> 时间：2012-11-25T12:30:27.543
> 
> 标签：c

```
#include <stdio.h>

int main ()
{
    char *ptr = "stackoverflow"

} 
```

有没有办法找到ptr指向的stackoverflow的长度，因为sizeof ptr总是给出4

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-25T12:31:34.567

使用[strlen](http://linux.die.net/man/3/strlen)查找字符串的长度（字符数）

```
const char *ptr = "stackoverflow";
size_t length = strlen(ptr); 
```

另一个小问题，请注意这`ptr`是一个字符串文字（指向无法修改的 const 内存的指针）。将其声明为 const 以显示这一点是更好的做法。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-25T12:41:55.603

1.  `sizeof()`返回类型所需的大小。由于在这种情况下传递给 sizeof 的类型是指针，因此它将返回指针的大小。

    如果您需要指针指向的数据的大小，则必须通过[**显式存储**](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string/9631091#9631091)来记住它。

2.  `sizeof()`在编译时工作。所以，通常`sizeof(ptr)`会`return 4 or 8 bytes`。而是使用`strlen`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-25T12:35:42.760

提供的[`strlen()`](http://www.cplusplus.com/reference/cstring/strlen/)函数`string.h`为您提供参数指向的字符串包含多少个“真实字符”。但是，此长度不包括终止空字符`'\0'`；如果您需要分配内存的长度，则必须考虑它。

这 4 个字节是您平台上指向 char 的指针的大小。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-26T20:41:49.527

```
#include<stdio.h>
main()
{
    int mystrlen(char *);
    char str[100];
    char *p;
    p=str;
    printf("Enter the string..?\n");
    scanf("%s",p);
    int x=mystrlen(p);
    printf("Length of string is=%d\n",x);

}
int mystrlen(char *p)
{
    int c=0;
    while(*p!='\0')
    {
        c++;
        *p++;
    }
    return(c);
} 
```

**简单易懂的代码**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-25T12:31:40.733

您正在寻找该[`strlen()`](http://www.cplusplus.com/reference/cstring/strlen/)功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-25T12:33:16.340

您可以尝试使用：

```
char *ptr = "stackoverflow"
size_t len = strlen(ptr); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-04T07:32:37.277

如果 ptr length 是函数的参数，则将指针用作字符串是合理的。我们可以通过以下代码获取字符串长度：

```
char *ptr = "stackoverflow";
length=strlen((const char *)ptr); 
```

为了进一步解释，如果字符串是用户输入的可变长度字符串，我们可以使用以下代码：

```
unsigned char *ptr;
ptr=(unsigned char *)calloc(50, sizeof(unsigned char));
scanf("%s",ptr );
length=strlen((const char *)ptr); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-30T13:11:15.137

纯粹使用指针，您可以使用指针算术：

```
int strLen(char *s)
{
    int *p = s;
    while(*p !=’\0’)
    {
        p++;  /* increase the address until the end */
    }
    Return p – s; /* Subtract the two addresses, end - start */
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-10-03T02:46:03.030

尽管这是一个通用的 C 问题，但在为 C++ 查找此问题时，它的命中率很高。我不仅在 C/C++ 领域，我还必须注意 Microsoft对特定项目的[安全开发生命周期 (SDL) 禁止函数调用](https://msdn.microsoft.com/en-us/library/bb288454.aspx)`strlen`，该项目因以下原因而被禁止：

> *对于关键应用程序，例如接受匿名 Internet 连接的应用程序，* `strlen` *也必须更换*......

无论如何，这个答案基本上只是对其他答案的一个转折，但是对于[C99 更新](https://stackoverflow.com/a/5351964/3543437)的 65,535 字节限制，已获得批准的 Microsoft C++ 替代函数调用和宽字符处理的注意事项。

```
#include <iostream>
#include <Windows.h>
int wmain()
{
    //  1 byte per char, 65535 byte limit per C99 updated standard
    //  https://stackoverflow.com/a/5351964/3543437
    const size_t ASCII_ARRAY_SAFE_SIZE_LIMIT = 65535; 

    //  Theoretical UTF-8 upper byte limit of 6; can typically use 16383 for 4 bytes per char instead:
    //  https://stijndewitt.com/2014/08/09/max-bytes-in-a-utf-8-char/
    const size_t UNICODE_ARRAY_SAFE_SIZE_LIMIT = 10922;

    char ascii_array[] = "ACSCII stuff like ABCD1234.";
    wchar_t unicode_array[] = L"Unicode stuff like → ∞ ∑ Σὲ γνωρίζω τὴν ደሀ ᚦᚫᛏ.";

    char * ascii_array_ptr = &ascii_array[0];
    wchar_t * unicode_array_ptr = &unicode_array[0];

    std::cout << "The string length of the char array is: " << strnlen_s(ascii_array_ptr, ASCII_ARRAY_SAFE_SIZE_LIMIT) << std::endl;
    std::wcout << L"The string length of the wchar_t array is: " << wcsnlen_s(unicode_array_ptr, UNICODE_ARRAY_SAFE_SIZE_LIMIT) << std::endl;

    return 0;
} 
```

输出：

```
The string length of the char array is: 27
The string length of the wchar_t array is: 47 
```

# java - Java表输出到文件

> ID：13551021
> 
> 赞同：1
> 
> 时间：2012-11-25T12:31:30.303
> 
> 标签：java

我对将一些对象输出到表格的方式感兴趣，就像对象一样。具体的例子是这样的：

```
-------------------------------------------
|  Name      |     foo     |      bar     |
-------------------------------------------
| asdas      | dsfsd       |1233.23       |
| adasdasd   | fsdfs       |3.23          |
| sdasjd     | knsdfsd     |13.23         |
| lkkkj      | dsfsd       |2343.23       |
------------------------------------------- 
```

或者一个 ms office / open office excel 文件。（在特定的编辑器中是否有这种类型的输出数据的 api 文档？比如如何在 OpenPffice 中定义一个表）？

我问这个是因为我想知道这样做的最佳方法。PS：不需要反序列化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:35:29.117

[docx4j](http://www.docx4java.org/trac/docx4j)是一个用于创建和操作 .docx、pptx 和 excel 文件的库。

如果您不想使用 docx4java 或者它不符合您的需求，您可以尝试这些

*   [阿帕奇](http://www.openoffice.org/api/)

*   [开放式办公 API](http://www.openoffice.org/api/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:40:21.187

最简单的方法是导出为可以在 Excel 中打开的逗号分隔值。

您可以使用[数据导出器库](http://code.google.com/p/data-exporter/)。

# ubuntu - `iconv` 转换并且没有错误但 `file -i` 显示它仍然是 *us-ascii* 而不是 *utf-8*

> ID：13551023
> 
> 赞同：1
> 
> 时间：2012-11-25T12:31:34.103
> 
> 标签：ubuntu, encoding, command-line, iconv

看，它一直是*us-ascii*。`iconv`成功没有警告，但`file -bi`显示它没有转换：

```
$ file -bi tmpaaa 
    text/html; charset=us-ascii
$ iconv -f us-ascii -t utf-8 tmpaaa -o tmpb
$ cp tmpb tmpaaa
$ file -bi tmpaaa 
    text/html; charset=us-ascii
$ 
```

我的另一个脚本一直抱怨它不是*utf-8*。谁知道发生了什么？机器是*Ubuntu/Linux* , LANG=en_US-UTF-8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T12:35:23.773

也许您的文件不包含任何特殊字符（只有英文字母、数字和标点符号）？

# php - 如何在 mysql_fetch_array 中查找 while 和 foreach 循环变量？

> ID：13551035
> 
> 赞同：0
> 
> 时间：2012-11-25T12:33:04.493
> 
> 标签：php

我需要在每个 $row2 变量中进行搜索，所以我可以找到是否有不等于 $row1 列的列。

这是我试过的，

```
$result1 = mysql_query('SELECT gpu FROM ng2s3_content');
$result2 = mysql_query("SELECT gpu FROM bigc3_gpu");

while ($row1 = mysql_fetch_array($result1)) {
while ($row2 = mysql_fetch_array($result2)) {
foreach ($row2 as $ar) {
if ($ar == $row1[0]) {      
            }
            else {
                echo $ar;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:12:10.073

看起来您想要数据库中的不同值，使用 mysql 查询，这将返回具有不同值的资源，

```
$result = mysql_query('SELECT gpu FROM ng2s3_content UNION SELECT gpu FROM bigc3_gpu');

while ($row = mysql_fetch_array($result)) {
    echo $row['gpu'];
} 
```

# sql - MIN 和 COUNT Oracle SQL 查询

> ID：13551038
> 
> 赞同：0
> 
> 时间：2012-11-25T12:33:34.870
> 
> 标签：sql, oracle, oracle-sqldeveloper

我试过这个查询：每个国家的医生人数较少的医院是什么。（第 1 栏：国家名称；第 2 栏：医院名称。如果有多家医院且医生人数较少，则必须出现在结果中）。但结果不是我所期望的，并且有语法错误。

我有这些表：

```
CREATE TABLE Hospital (
    hid INT PRIMARY KEY,
    name VARCHAR(127) UNIQUE,
    country VARCHAR(127),
    area INT
);
CREATE TABLE Doctor (
    ic INT PRIMARY KEY,
    name VARCHAR(127),
    date_of_birth INT,
);
CREATE TABLE Work (
    hid INT,
    ic INT,
    since INT,
    FOREIGN KEY (hid) REFERENCES Hospital (hid),
    FOREIGN KEY (ic) REFERENCES Doctor (ic),
    PRIMARY KEY (hid,ic)
); 
```

我试过这个：

```
SELECT DISTINCT H.country, H.name, MIN(*) 
FROM Hospital H
WHERE H.hid IN (
               SELECT COUNT(*)
               FROM Work W, Doctor D
               WHERE W.hid = H.hid AND W.ic = D.ic
               GROUP BY H.country
               )
GROUP BY H.country
; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:02:19.527

```
SELECT country, name
FROM
    (
        SELECT  hid, country, name, MIN(doctorCount)
        FROM
            (
                SELECT  a.hid, a.country, a.name, COUNT(b.hid) doctorCount
                FROM    Hospital a
                        LEFT JOIN Work b
                            ON a.hid = b.hid
                GROUP BY    a.hid, a.country, a.name
            ) x
        GROUP BY hid, country, name
    ) y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:21:48.493

尝试这个：

```
WITH doctorCount AS
  (SELECT H.country country, H.hid hid, COUNT(*) dCount
   FROM Work W, Doctor D, Hospital H
   WHERE W.ic = D.ic
   AND   H.hid = W.hid
   GROUP BY H.country, H.hid),
   minCount AS
  (SELECT D.country, MIN (D.dCount) lowCount
   FROM doctorCount D
   GROUP BY D.country)
SELECT D.country, H.name
FROM doctorCount D, Hospital H, minCount M
WHERE D.hid = H.hid
AND   M.country = D.country
AND   D.dCount = M.lowCount; 
```

# java - J2me 代码中的错误，与内存、性能有关

> ID：13551040
> 
> 赞同：0
> 
> 时间：2012-11-25T12:33:39.680
> 
> 标签：java, java-me

```
13068727 byte-codes executed
1886 thread switches
1682 classes in the system (including system classes)
22937 dynamic objects allocated (2043812 bytes)
86 garbage collections (1917296 bytes collected) 
```

它也给出了内存不足的错误，`byte-code exceeded maximum limit 32byte-code`

这些错误消息是在我运行我的项目时生成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:39:58.450

> 执行了 13068727 个字节码 1886 个线程切换 1682 个系统中的类（包括系统类） 22937 个分配的动态对象（204381​​2 个字节） 86 个垃圾回收（收集了 1917296 个字节）

这些不是错误消息。它们只是提供信息 - 告诉您设备/应用程序的性能。

> 它也给出内存不足错误，字节码超过最大限制32字节码

这看起来有点奇怪。可能会说您的程序对于设备来说太大了，但很难说，因为您（显然！）没有准确地转录它。如果您想要正确的诊断，请将**准确**的错误消息和任何堆栈跟踪剪切并粘贴到问题中。

* * *

我认为“超过最大字节码长度（32kb）”消息意味着您有一个太大的类或方法。如果您有一个名为“Elements”的类或方法，那很可能是罪魁祸首。也可能是实例太大...

# mysql - 将字符串连接到 SELECT * MySql

> ID：13551041
> 
> 赞同：31
> 
> 时间：2012-11-25T12:33:42.147
> 
> 标签：mysql, sql, string, concat

以下查询适用于 MySQL：

```
SELECT concat(title,'/') FROM `socials` WHERE 1 
```

它将**/**连接到选定的标题字段。

但是，当我尝试执行以下操作时：

```
SELECT concat(*,'/') FROM `socials` WHERE 1 
```

它返回以下错误：

```
 #1064 - You have an error in your SQL syntax;
check the manual that corresponds to your MySQL server version for the right syntax to use near '*,'/') FROM `socials` WHERE 1 LIMIT 0, 30' at line 1 
```

**那么有什么方法可以使这样的 sql 查询与 MySql 一起使用**

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-25T12:37:56.557

您根本无法在 SQL 中做到这一点。您必须明确列出字段并连接每个字段：

```
SELECT CONCAT(field1, '/'), CONCAT(field2, '/'), ... FROM `socials` WHERE 1 
```

如果您使用的是应用程序，则可以使用 SQL 读取列名，然后使用您的应用程序构造一个类似上面的查询。请参阅此 stackoverflow 问题以查找列名：[Get table column names in mysql?](https://stackoverflow.com/questions/1526688/get-table-column-names-in-mysql)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-25T12:49:34.400

如果要使用 / 作为分隔符连接字段，可以使用`concat_ws`：

```
select concat_ws('/', col1, col2, col3) from mytable 
```

但是，您无法逃避列出查询中的列。*-syntax 仅适用于“select * from”。您可以列出列并动态构建查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T12:36:24.810

您不能使用字符串连接多个字段。您需要选择所有字段 ( `*`)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T12:38:11.363

您不能在多个字段上执行此操作。你也可以找[这个](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。

# objective-c - UIActivityViewController 中共享提供者的不同数据

> ID：13551042
> 
> 赞同：24
> 
> 时间：2012-11-25T12:33:59.977
> 
> 标签：objective-c, ios, ios6, uiactivityviewcontroller

我正在尝试使用`UIActivityViewController`一个 long`NSString`作为数据。如果我输入的字符串 > 140 个字符，则其中的推文表不会显示该字符串。如果我在将字符串提供给控制器之前将其`UIActivities`截断，那么所有字符串都会被截断。我不希望 Facebook 或消息被截断。

有没有办法给不同的字符串不同的`UIActivities`？

谢谢！

（例如，Marco Arment 的 The Magazine 应用程序通过在 @TheMagazineApp 中添加一个截断的字符串`UIActivityPostToTwitter`以及在 other 中的其他内容来做到这一点`UIActivities`。）

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-25T12:43:12.423

我认为这就是您要寻找的内容：[自定义 UIActivityViewController 图标和文本](https://www.albertopasca.it/whiletrue/objective-c-custom-uiactivityviewcontroller-icons-and-text/)。

您应该能够为每种活动类型提供不同的数据。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-05T17:37:03.780

希望这可以帮助某人。如果您将其子类化，这非常简单`UIActivityItemProvider`：

```
@interface MyActivityItemProvider : UIActivityItemProvider
@end

@implementation MyActivityItemProvider

- (id)item
{
    // Return nil, if you don't want this provider to apply 
    // to a particular activity type (say, if you provide 
    // print data as a separate item for UIActivityViewController).
    if ([self.activityType isEqualToString:UIActivityTypePrint]) 
        return nil;

    // The data you passed while initialising your provider 
    // is in placeholderItem now.
    if ([self.activityType isEqualToString:UIActivityTypeMail] ||
        [self.activityType isEqualToString:UIActivityTypeCopyToPasteboard])
    {
        return self.placeholderItem;
    }

    // Return something else for other activities. Obviously, 
    // you can as well reuse the data in placeholderItem here.
    return @"Something else";
}

@end 
```

然后将其带有活动项数组的实例传递给 UIActivityViewController：

```
MyActivityItemProvider *activityItem = 
    [[MyActivityItemProvider alloc] initWithPlaceholderItem:@"Your data"];
NSArray *sharingItems = [NSArray arrayWithObjects:
    activityItem, _myUITextView.viewPrintFormatter, nil];

UIActivityViewController *activityController = 
    [[UIActivityViewController alloc] 
        initWithActivityItems:sharingItems applicationActivities:nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-20T10:01:26.993

这可以通过使用对象的可选`activityType`属性轻松完成[`UIActivityItemProvider`](https://developer.apple.com/documentation/uikit/uiactivityitemprovider)。该属性返回 a `UIActivityType`，因此您可以执行以下操作：

```
class PhotoActivityItemProvider: UIActivityItemProvider {  
    ...

    override var item: Any {
        guard let activityType = self.activityType else {
            return photoURL.absoluteString
        }
        if activityType == .mail || activityType == .message {
            return "The photo link is \(photoURL.absoluteString)."
        }

        ...
    } 
```

我的博文中的更多信息：[https ://www.whitesmith.co/blog/control-what-youre-sharing/](https://www.whitesmith.co/blog/control-what-youre-sharing/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-22T10:17:02.943

您可以创建一个符合的类，`UIActivityItemSource`然后将其带有活动项数组的实例传递给 UIActivityViewController:，正如@Mu-Sonic 建议的那样。

如果您想知道用户在哪个平台上共享并返回依赖于所点击平台的任何特定数据，请覆盖`public func activityViewController(_ activityViewController: UIActivityViewController, itemForActivityType activityType: UIActivity.ActivityType?) -> Any?`

# matlab - Matlab：如何消除不存在字段的错误

> ID：13551048
> 
> 赞同：1
> 
> 时间：2012-11-25T12:34:46.640
> 
> 标签：matlab

运行 matlab 代码时出现错误。在这里，我尝试使用以前代码的输出之一作为新代码的输入。

```
??? Reference to non-existent field 'y1'. 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T13:31:47.537

一个好的做法可能是在访问之前检查该字段是否存在：

```
if isfield( s, 'y1' )
    % s.y1 exists - you may access it
    s.y1
else
    % s.y1 does not exist - what are you going to do about it?
end 
```

考虑到 Edric 的评论，另一种可能的方式是

```
try 
    % access y1
    s.y1
catch em
    % verify that the error indeed stems from non-existant field
    if strcmp(em.identifier, 'MATLAB:nonExistentField')
         fprintf(1, 'field y1 does not exist...\n');
    else
         throw( em ); % different error - handle by caller?
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-11T22:48:18.220

您是否使用命令**load**从文件中加载数据？如果是，则此函数会覆盖您当前的变量，因此，它们将不存在，因此当您调用时，它而不是使用：

```
load ('filename'); 
```

利用：

```
f=load ('filename'); 
```

现在，要引用加载文件中的任何变量，请使用 f.varname，例如，如果在加载的数据中保存了一个名为 net 的网络，您可以像这样使用它：

```
a = f.net(fv); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-29T05:36:17.017

我会先说明我的情况，然后给出解决方案。

*   我先保存一个变量`op`，它是一个**struct**，它的名字是`coef.mat`；
*   `coef = load( file_path, '-mat')`我使用;加载这个变量
*   在一个新函数中，我将变量`coef`作为参数传递给它，在这里，弹出错误**引用不存在的字段。**

我的解决方案：

*   只需替换`coef`为`coef.op`，然后将其传递给函数，它将起作用。

所以，我认为背后的原因是：**struct**被保存为变量，当你使用`load`并想要**访问**origin变量时，你需要直接使用操作指出它`dot(.)`，你可以直接在Matlab工作区打开变量并找出它包含在变量中的内容。

在您的情况下，如果您*之前代码的输出*是一个结构（这是我的猜测，但您没有指出）并且您将其保存为`MyStruct`，则将其加载为`MyInput = load(MyStruct)`，**然后将其用作函数的参数时，它应该是** `MyInput.y1`。

啤酒花它会工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-03T05:23:25.373

首先将其加载到命令窗口并观察工作区窗口。您可以看到结构名称。它将通过访问**结构名称**来工作。例子：

```
lm=load('data.mat');
disp(lm.SAMPLE.X); 
```

这里 SAMPLE 是结构名称，X 是结构的成员

# android - 强制关闭我的程序

> ID：13551049
> 
> 赞同：0
> 
> 时间：2012-11-25T12:34:57.680
> 
> 标签：android

我开发了一个录制视频的应用程序，然后将其保存在自定义文件夹中，代码正常，没有语法错误......但是当我在手机中运行应用程序时，在我完成录制后然后强制关闭进程，为什么会发生? 这是我的代码...

```
public class MainActivity extends Activity {

    private static final int CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE = 200;
    private Uri fileUri;
    public static final int MEDIA_TYPE_VIDEO = 2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //create new Intent
        Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

        fileUri = getOutputMediaFileUri(MEDIA_TYPE_VIDEO);  // create a file to save the video
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);  // set the image file name

        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1); // set the video image quality to high*/

        // start the Video Capture Intent
        startActivityForResult(intent, CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE);

    }

    @Override 
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (requestCode == CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE) {
            if (resultCode == RESULT_OK) {
                // Video captured and saved to fileUri specified in the Intent
                Toast.makeText(this, "Video saved to :\n" +
                         fileUri, Toast.LENGTH_LONG).show();
            } else if (resultCode == RESULT_CANCELED) {
                // User cancelled the video capture
            } else {
                // Video capture failed, advise user
            }
        }
    }

    /** Create a file Uri for saving an image or video */
    private static Uri getOutputMediaFileUri(int type){
          return Uri.fromFile(getOutputMediaFile(type));
    }

    public void inputFileName(){

    }

    /** Create a File for saving an image or video */
    private static File getOutputMediaFile(int type){
        // To be safe, you should check that the SDCard is mounted
        // using Environment.getExternalStorageState() before doing this.

         File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                  Environment.DIRECTORY_PICTURES), "MyCameraApp");
        // This location works best if you want the created images to be shared
        // between applications and persist after your app has been uninstalled.

        // Create the storage directory if it does not exist
        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }

     // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File mediaFile;
        if(type == MEDIA_TYPE_VIDEO) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "VID_"+ timeStamp + ".mp4");
        } else {
            return null;
        }

        return mediaFile;
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

我的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.cameratesting"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="10"/>
<uses-feature android:name="android.hardware.camera" />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.READ_OWNER_DATA" />
<uses-permission android:name="android.permission.WRITE_OWNER_DATA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我的日志猫（com.example.cameratesting）

```
11-25 21:14:19.799: I/ActivityManager(160): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.example.cameratesting/.MainActivity bnds=[62,153][118,218] } from pid 234
11-25 21:14:35.719: I/ActivityManager(160): Start proc com.example.cameratesting for activity com.example.cameratesting/.MainActivity: pid=14732 uid=10052 gids={1006, 1015}
11-25 21:14:38.409: I/ActivityManager(160): Displayed com.example.cameratesting/.MainActivity: +1m10s22ms (total +2s710ms)
11-25 21:14:52.359: I/InputDispatcher(160): Delivering key to current input target: action: 0, channel '408c2d78 com.example.cameratesting/com.example.cameratesting.MainActivity (server)'
11-25 21:14:52.540: I/InputDispatcher(160): Delivering key to current input target: action: 1, channel '408c2d78 com.example.cameratesting/com.example.cameratesting.MainActivity (server)'
11-25 21:21:14.450: I/ActivityManager(160): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.example.cameratesting/.MainActivity bnds=[62,153][118,218] } from pid 234
11-25 21:21:14.500: W/ActivityManager(160): Trying to launch com.example.cameratesting/.MainActivity
11-25 21:21:35.159: I/ActivityManager(160): Displayed com.example.cameratesting/.MainActivity: +20s664ms
11-25 21:21:59.180: I/ActivityManager(160): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.example.cameratesting/.MainActivity bnds=[62,153][118,218] } from pid 234
11-25 21:22:07.600: I/InputDispatcher(160): Delivering key to current input target: action: 0, channel '40916378 com.example.cameratesting/com.example.cameratesting.MainActivity (server)'
11-25 21:22:07.779: I/InputDispatcher(160): Delivering key to current input target: action: 1, channel '40916378 com.example.cameratesting/com.example.cameratesting.MainActivity (server)'
11-25 21:22:08.879: E/ATK(13151): com.example.cameratesting
11-25 21:22:12.579: I/PackageManager(160): Removing non-system package:com.example.cameratesting
11-25 21:22:12.579: I/ActivityManager(160): Force stopping package com.example.cameratesting uid=10052
11-25 21:22:12.759: D/PackageManager(160): Scanning package com.example.cameratesting
11-25 21:22:12.769: I/PackageManager(160): Package com.example.cameratesting codePath changed from /data/app/com.example.cameratesting-1.apk to /data/app/com.example.cameratesting-2.apk; Retaining data and using new
11-25 21:22:12.769: I/PackageManager(160): Unpacking native libraries for /data/app/com.example.cameratesting-2.apk
11-25 21:22:13.709: D/PackageManager(160):   Activities: com.example.cameratesting.MainActivity
11-25 21:22:13.709: I/ActivityManager(160): Force stopping package com.example.cameratesting uid=10052
11-25 21:22:13.709: W/PackageManager(160): Code path for pkg : com.example.cameratesting changing from /data/app/com.example.cameratesting-1.apk to /data/app/com.example.cameratesting-2.apk
11-25 21:22:13.709: W/PackageManager(160): Resource path for pkg : com.example.cameratesting changing from /data/app/com.example.cameratesting-1.apk to /data/app/com.example.cameratesting-2.apk
11-25 21:22:13.959: D/PackageManager(160): New package installed in /data/app/com.example.cameratesting-2.apk
11-25 21:22:13.959: W/PackageManager(160): Unknown permission android.permission.READ_OWNER_DATA in package com.example.cameratesting
11-25 21:22:13.959: W/PackageManager(160): Unknown permission android.permission.WRITE_OWNER_DATA in package com.example.cameratesting
11-25 21:22:13.959: W/PackageManager(160): Unknown permission android.permission.READ_EXTERNAL_STORAGE in package com.example.cameratesting
11-25 21:22:14.209: I/ActivityManager(160): Force stopping package com.example.cameratesting uid=10052
11-25 21:22:15.619: I/UinboxLogger(15063): [UinboxReceiver] onReceive() >>   intent.getData() : com.example.cameratesting
11-25 21:22:15.639: V/PackageIntentReceiver(13466): onReceive() intent:Intent { act=android.intent.action.PACKAGE_REMOVED dat=package:com.example.cameratesting flg=0x10000000 cmp=com.sec.android.app.controlpanel/.PackageIntentReceiver (has extras) } pkg:com.example.cameratesting action:android.intent.action.PACKAGE_REMOVED
11-25 21:22:17.499: I/ActivityManager(160): Force stopping package com.example.cameratesting uid=10052
11-25 21:22:17.499: I/ActivityManager(160): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.cameratesting/.MainActivity } from pid 15065
11-25 21:22:17.549: I/ActivityManager(160): Start proc com.example.cameratesting for activity com.example.cameratesting/.MainActivity: pid=15085 uid=10052 gids={1006, 1015}
11-25 21:22:17.789: W/ActivityThread(15085): Application com.example.cameratesting is waiting for the debugger on port 8100...
11-25 21:22:22.879: V/PackageIntentReceiver(13466): onReceive() intent:Intent { act=android.intent.action.PACKAGE_ADDED dat=package:com.example.cameratesting flg=0x10000000 cmp=com.sec.android.app.controlpanel/.PackageIntentReceiver (has extras) } pkg:com.example.cameratesting action:android.intent.action.PACKAGE_ADDED
11-25 21:22:30.319: I/ActivityManager(160): No longer want com.example.cameratesting (pid 15085): hidden #16
11-25 21:22:50.849: I/ActivityManager(160): Start proc com.example.cameratesting for activity com.example.cameratesting/.MainActivity: pid=15285 uid=10052 gids={1006, 1015}
11-25 21:22:53.029: I/ActivityManager(160): Displayed com.example.cameratesting/.MainActivity: +35s490ms (total +2s192ms)
11-25 21:22:53.979: I/InputDispatcher(160): Delivering key to current input target: action: 0, channel '408b9c80 com.example.cameratesting/com.example.cameratesting.MainActivity (server)'
11-25 21:22:54.119: I/InputDispatcher(160): Delivering key to current input target: action: 1, channel '408b9c80 com.example.cameratesting/com.example.cameratesting.MainActivity (server)'
11-25 21:22:55.299: E/ATK(13151): com.example.cameratesting
11-25 21:25:42.270: I/ActivityManager(160): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.example.cameratesting/.MainActivity bnds=[62,153][118,218] } from pid 234
11-25 21:25:42.349: I/ActivityManager(160): Start proc com.example.cameratesting for activity com.example.cameratesting/.MainActivity: pid=15542 uid=10052 gids={1006, 1015}
11-25 21:26:00.489: I/ActivityManager(160): Displayed com.example.cameratesting/.MainActivity: +18s151ms
11-25 21:26:03.149: I/InputDispatcher(160): Delivering key to current input target: action: 0, channel '407d0678 com.example.cameratesting/com.example.cameratesting.MainActivity (server)'
11-25 21:26:03.209: I/InputDispatcher(160): Delivering key to current input target: action: 1, channel '407d0678 com.example.cameratesting/com.example.cameratesting.MainActivity (server)' 
```

logcat（摄像机）

```
11-25 21:14:19.829: I/ActivityManager(160): Start proc com.sec.android.app.camera for activity com.sec.android.app.camera/.Camcorder: pid=14663 uid=10040 gids={1006, 1015}
11-25 21:14:20.669: E/Camcorder(14663): Initialize Camcorder Sound
11-25 21:14:20.959: I/ActivityManager(160): Displayed com.sec.android.app.camera/.Camcorder: +1s149ms
11-25 21:14:21.899: I/QualcommCameraHardware(95): <=PCAM=>NOW CAMCORDER MODE~~~~~~ 
11-25 21:14:25.019: I/InputDispatcher(160): Delivering touch to current input target: action: 0, channel '40974370 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:14:25.129: I/InputDispatcher(160): Delivering touch to current input target: action: 1, channel '40974370 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:14:25.479: E/VENC_ENC(95): VENC_MSG_HIGH venci_process_command_init::3105 initializing camcorder application...
11-25 21:14:25.499: E/VENC_ENC(95): VENC_MSG_HIGH venci_init_encoder::2391 set camcorder rate control config...
11-25 21:14:25.529: E/VENC_DRV(95): VENC_MSG_HIGH venc_drv_start::614 camcorder pass for DSP
11-25 21:14:28.609: I/InputDispatcher(160): Delivering touch to current input target: action: 0, channel '40974370 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:14:28.639: I/InputDispatcher(160): Delivering touch to current input target: action: 1, channel '40974370 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:14:29.099: E/AndroidRuntime(14663):    at com.sec.android.app.camera.CamcorderEngine.renameTempFile(CamcorderEngine.java:1151)
11-25 21:14:29.099: E/AndroidRuntime(14663):    at com.sec.android.app.camera.CamcorderEngine.doStopVideoRecordingSync(CamcorderEngine.java:780)
11-25 21:14:29.119: W/ActivityManager(160):   Force finishing activity com.sec.android.app.camera/.Camcorder
11-25 21:14:29.619: W/ActivityManager(160): Activity pause timeout for HistoryRecord{40545450 com.sec.android.app.camera/.Camcorder}
11-25 21:14:36.399: I/ActivityManager(160): Starting: Intent { act=android.media.action.VIDEO_CAPTURE cmp=com.sec.android.app.camera/.Camcorder (has extras) } from pid 14732
11-25 21:14:36.469: W/ActivityManager(160): Trying to launch com.sec.android.app.camera/.Camcorder
11-25 21:14:37.989: I/WindowManager(160): WIN DEATH: Window{40974370 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder paused=false}
11-25 21:14:45.769: W/ActivityManager(160): Activity destroy timeout for HistoryRecord{40545450 com.sec.android.app.camera/.Camcorder}
11-25 21:21:14.600: I/ActivityManager(160): Starting: Intent { act=android.media.action.VIDEO_CAPTURE cmp=com.sec.android.app.camera/.Camcorder (has extras) } from pid 14732
11-25 21:21:14.620: I/ActivityManager(160): Start proc com.sec.android.app.camera for activity com.sec.android.app.camera/.Camcorder: pid=14960 uid=10040 gids={1006, 1015}
11-25 21:21:15.750: E/Camcorder(14960): Initialize Camcorder Sound
11-25 21:21:15.960: I/ActivityManager(160): Displayed com.sec.android.app.camera/.Camcorder: +1s340ms (total +1s458ms)
11-25 21:21:16.920: I/QualcommCameraHardware(95): <=PCAM=>NOW CAMCORDER MODE~~~~~~ 
11-25 21:21:22.989: I/InputDispatcher(160): Delivering touch to current input target: action: 0, channel '40c36608 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:21:23.079: I/InputDispatcher(160): Delivering touch to current input target: action: 1, channel '40c36608 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:21:23.349: E/VENC_ENC(95): VENC_MSG_HIGH venci_process_command_init::3105 initializing camcorder application...
11-25 21:21:23.349: E/VENC_ENC(95): VENC_MSG_HIGH venci_init_encoder::2391 set camcorder rate control config...
11-25 21:21:23.369: E/VENC_DRV(95): VENC_MSG_HIGH venc_drv_start::614 camcorder pass for DSP
11-25 21:21:27.329: I/InputDispatcher(160): Delivering touch to current input target: action: 0, channel '40c36608 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:21:27.439: I/InputDispatcher(160): Delivering touch to current input target: action: 1, channel '40c36608 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:21:27.709: E/AndroidRuntime(14960):    at com.sec.android.app.camera.CamcorderEngine.renameTempFile(CamcorderEngine.java:1151)
11-25 21:21:27.709: E/AndroidRuntime(14960):    at com.sec.android.app.camera.CamcorderEngine.doStopVideoRecordingSync(CamcorderEngine.java:780)
11-25 21:21:27.739: W/ActivityManager(160):   Force finishing activity com.sec.android.app.camera/.Camcorder
11-25 21:21:28.249: W/ActivityManager(160): Activity pause timeout for HistoryRecord{40d17e40 com.sec.android.app.camera/.Camcorder}
11-25 21:21:36.739: I/WindowManager(160): WIN DEATH: Window{40c36608 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder paused=false}
11-25 21:21:45.170: W/ActivityManager(160): Activity destroy timeout for HistoryRecord{40d17e40 com.sec.android.app.camera/.Camcorder}
11-25 21:22:20.139: I/ActivityManager(160): Starting: Intent { act=android.media.action.VIDEO_CAPTURE cmp=com.sec.android.app.camera/.Camcorder (has extras) } from pid 15085
11-25 21:22:20.189: I/ActivityManager(160): Start proc com.sec.android.app.camera for activity com.sec.android.app.camera/.Camcorder: pid=15105 uid=10040 gids={1006, 1015}
11-25 21:22:22.099: E/Camcorder(15105): Initialize Camcorder Sound
11-25 21:22:22.369: I/ActivityManager(160): Displayed com.sec.android.app.camera/.Camcorder: +2s184ms (total +4s829ms)
11-25 21:22:23.489: I/QualcommCameraHardware(95): <=PCAM=>NOW CAMCORDER MODE~~~~~~ 
11-25 21:22:34.229: I/InputDispatcher(160): Delivering touch to current input target: action: 0, channel '409d4988 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:22:34.329: I/InputDispatcher(160): Delivering touch to current input target: action: 1, channel '409d4988 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:22:34.639: E/VENC_ENC(95): VENC_MSG_HIGH venci_process_command_init::3105 initializing camcorder application...
11-25 21:22:34.679: E/VENC_ENC(95): VENC_MSG_HIGH venci_init_encoder::2391 set camcorder rate control config...
11-25 21:22:34.699: E/VENC_DRV(95): VENC_MSG_HIGH venc_drv_start::614 camcorder pass for DSP
11-25 21:22:44.099: I/InputDispatcher(160): Delivering touch to current input target: action: 0, channel '409d4988 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:22:44.159: I/InputDispatcher(160): Delivering touch to current input target: action: 1, channel '409d4988 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:22:44.439: E/AndroidRuntime(15105):    at com.sec.android.app.camera.CamcorderEngine.renameTempFile(CamcorderEngine.java:1151)
11-25 21:22:44.439: E/AndroidRuntime(15105):    at com.sec.android.app.camera.CamcorderEngine.doStopVideoRecordingSync(CamcorderEngine.java:780)
11-25 21:22:44.439: W/ActivityManager(160):   Force finishing activity com.sec.android.app.camera/.Camcorder
11-25 21:22:44.949: W/ActivityManager(160): Activity pause timeout for HistoryRecord{4096e880 com.sec.android.app.camera/.Camcorder}
11-25 21:22:51.329: I/ActivityManager(160): Starting: Intent { act=android.media.action.VIDEO_CAPTURE cmp=com.sec.android.app.camera/.Camcorder (has extras) } from pid 15285
11-25 21:22:51.389: W/ActivityManager(160): Trying to launch com.sec.android.app.camera/.Camcorder
11-25 21:22:52.669: I/WindowManager(160): WIN DEATH: Window{409d4988 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder paused=false}
11-25 21:23:00.939: W/ActivityManager(160): Activity destroy timeout for HistoryRecord{4096e880 com.sec.android.app.camera/.Camcorder}
11-25 21:25:42.509: I/ActivityManager(160): Starting: Intent { act=android.media.action.VIDEO_CAPTURE cmp=com.sec.android.app.camera/.Camcorder (has extras) } from pid 15542
11-25 21:25:42.529: I/ActivityManager(160): Start proc com.sec.android.app.camera for activity com.sec.android.app.camera/.Camcorder: pid=15550 uid=10040 gids={1006, 1015}
11-25 21:25:43.379: E/Camcorder(15550): Initialize Camcorder Sound
11-25 21:25:43.599: I/ActivityManager(160): Displayed com.sec.android.app.camera/.Camcorder: +1s81ms (total +1s257ms)
11-25 21:25:44.609: I/QualcommCameraHardware(95): <=PCAM=>NOW CAMCORDER MODE~~~~~~ 
11-25 21:25:47.169: I/InputDispatcher(160): Delivering touch to current input target: action: 0, channel '40a5e5a8 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:25:47.299: I/InputDispatcher(160): Delivering touch to current input target: action: 1, channel '40a5e5a8 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:25:47.559: E/VENC_ENC(95): VENC_MSG_HIGH venci_process_command_init::3105 initializing camcorder application...
11-25 21:25:47.599: E/VENC_ENC(95): VENC_MSG_HIGH venci_init_encoder::2391 set camcorder rate control config...
11-25 21:25:47.609: E/VENC_DRV(95): VENC_MSG_HIGH venc_drv_start::614 camcorder pass for DSP
11-25 21:25:52.289: I/InputDispatcher(160): Delivering touch to current input target: action: 0, channel '40a5e5a8 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:25:52.409: I/InputDispatcher(160): Delivering touch to current input target: action: 1, channel '40a5e5a8 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder (server)'
11-25 21:25:52.689: E/AndroidRuntime(15550):    at com.sec.android.app.camera.CamcorderEngine.renameTempFile(CamcorderEngine.java:1151)
11-25 21:25:52.689: E/AndroidRuntime(15550):    at com.sec.android.app.camera.CamcorderEngine.doStopVideoRecordingSync(CamcorderEngine.java:780)
11-25 21:25:52.699: W/ActivityManager(160):   Force finishing activity com.sec.android.app.camera/.Camcorder
11-25 21:25:53.209: W/ActivityManager(160): Activity pause timeout for HistoryRecord{40a6f418 com.sec.android.app.camera/.Camcorder}
11-25 21:26:01.899: I/WindowManager(160): WIN DEATH: Window{40a5e5a8 com.sec.android.app.camera/com.sec.android.app.camera.Camcorder paused=false}
11-25 21:26:10.360: W/ActivityManager(160): Activity destroy timeout for HistoryRecord{40a6f418 com.sec.android.app.camera/.Camcorder} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:04:24.067

您没有发布您的清单文件或堆栈跟踪（LogCat 输出），但很可能您的应用程序由于没有正确的访问 SD 卡的权限而崩溃。将此添加到`<manifest>`清单文件中的块中：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

我还要补充

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

根据 API16 的要求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:39:31.973

我怀疑方法“File getOutputMediaFile(int type)(){}”返回 null。

# socket.io - gevent-socketio + Flask + Gunicorn

> ID：13551050
> 
> 赞同：11
> 
> 时间：2012-11-25T12:35:01.303
> 
> 标签：socket.io, flask, gevent, gunicorn

我可以将 gevent-socketio 与 Flask 一起使用，在 Gunicorn 下运行，并且仍然享受 Flask 提供的出色的异常打印、调试器和重新加载功能吗？我的 gunicorn worker 和 WSGI 应用程序类会是什么样子？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T10:37:37.743

我有完全相同的问题，所以我通过使用看门狗解决了它。

```
pip install watchdog 
```

连同这个命令：

```
watchmedo shell-command --patterns="*.py*;;*.less;*.css;*.js;*.txt;*.html" --recursive --command='kill -HUP `cat /tmp/gunicorn.pid` && echo "Reloading code" >> /tmp/gunicorn.log' ~/projectfolder 
```

它需要（嗯，不是真的，但我将“重新加载代码”指向同一个日志文件，所以这是一件好事）你守护着 gunicorn 进程，我喜欢这样：

**gunicorn_config.py**

```
workers = 2
worker_class = 'socketio.sgunicorn.GeventSocketIOWorker'
bind = '0.0.0.0:5000'
pidfile = '/tmp/gunicorn.pid'
debug = True
loglevel = 'debug'
errorlog = '/tmp/gunicorn.log'
daemon = True 
```

启动应用程序：

```
gunicorn run:app -c gunicorn-config.py 
```

查看日志：

```
tail -f /tmp/gunicorn.log 
```

从这一点开始，项目中的每次更改都应该重新加载所有内容。这有点复杂，但由于带有工作人员（或内置 socketio-server）的 gunicorn 没有任何重新加载功能，我不得不这样做。

与其他答案中的装饰器解决方案相比，这是一种不同的方法，但我喜欢保持实际代码与开发特定解决方案无关。两者都完成了同样的事情，所以我想你只需要选择你喜欢的解决方案。:)

哦，作为额外的奖励，您可以在开发中使用生产服务器，这意味着两个环境相互匹配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T10:30:42.747

我最近一直在研究这个主题。我不认为你可以轻松地使用 Flask + gevent-socket.io + Gunicorn 的自动重载功能。Gunicorn 是一个生产服务器，本机不允许此类功能。

但是，我为我的开发服务器找到了一个不错的解决方案：用户 SocketIOServer 提供了该库和一个用于自动重载的 Flask 片段。这是启动脚本（runserver.py）：

```
from myapp import app
from gevent import monkey
from socketio.server import SocketIOServer
import werkzeug.serving

# necessary for autoreload (at least)
monkey.patch_all()

PORT = 5000

@werkzeug.serving.run_with_reloader
def runServer():
    print 'Listening on %s...' % PORT
    ws = SocketIOServer(('0.0.0.0', PORT), app, resource="socket.io", policy_server=False)
    ws.serve_forever()

runServer() 
```

该解决方案的灵感来自： http: [//flask.pocoo.org/snippets/34/](http://flask.pocoo.org/snippets/34/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-29T14:59:12.880

我已经对 Werkzeug 调试器进行了一些调整，因此它现在可以与 socket.io 命名空间一起使用，请参见下文并享受 :)

[https://github.com/aldanor/SocketIO-Flask-Debug](https://github.com/aldanor/SocketIO-Flask-Debug)

# android - 如果有的话，什么情况会导致 TextView.setText("") 阻塞？

> ID：13551055
> 
> 赞同：3
> 
> 时间：2012-11-25T12:35:24.653
> 
> 标签：android, textview

我一直在追查我的代码块停止工作的问题。终于，我确定了这条线，如下所示：

```
Log.v(TAG,"Here");
tv.setText("");
Log.v(TAG,"There"); 
```

在阻塞期间，第一个语句被调用，第二个则没有。知道是什么原因造成的吗？

如果有任何疑问，tv 是一个 TextView。没有打印出错误，事实上，这条线以前工作过一次......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:20:27.593

我弄清楚了我的问题是什么，我在这里发布答案以帮助将来的任何人。这可能是一个 Android 错误，或者一些奇怪的东西......从未发布过错误。底线是，不要在`ScheduledThreadPoolExecutor`.

```
ScheduledThreadPoolExecutor masterExecutor;

masterExecutor=new ScheduledThreadPoolExecutor(1);

masterExecutor.schedule(new Runnable(){
    @Override
    public void run() {
        //Formerly, I ran the block of code here, that blocked.
        runOnUiThread ( new Runnable()
        {
            @Override
            public void run() {
                //Now I moved the code inside of a runOnUiThread
            }
        });

    }
},1000,TimeUnit.MILLISECONDS); 
```

# android - 如何将线性布局放置在屏幕的随机位置？

> ID：13551057
> 
> 赞同：2
> 
> 时间：2012-11-25T12:35:29.960
> 
> 标签：android, layout

我的要求很简单：我只想在屏幕的任意位置显示一些文本。

我期待，因为我使用：

```
int x = r.nextInt(width - layout.getWidth()); 
```

和

```
int y = r.nextInt(height - layout.getHeight()); 
```

我的布局将完全适合屏幕。

不幸的是，我的文字有时会出现在屏幕右侧并出现多行！

这是我的代码

```
 LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(LinearLayout.VERTICAL);

    Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    int width = size.x;
    int height = size.y;

    layout.addView(clock);
    layout.addView(txtView);

    Random r = new Random();    
    int x = r.nextInt(width - layout.getWidth());
    int y = r.nextInt(height - layout.getHeight());

    layout.setPadding(x, y, 0, 0);
    setContentView(layout); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:39:33.987

用作`RelativeLayout`您的容器，而不是`LinearLayout`因为这是设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:15:30.127

我遇到的最大问题是

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size); 
```

返回一个值，包括顶部的状态栏（或通知，不知道如何调用）和底部的软件按钮。

解决方案是在后台创建一个虚拟布局并对其进行测量。

# c - 在标准 C 中的时限内输入

> ID：13551058
> 
> 赞同：5
> 
> 时间：2012-11-25T12:35:40.663
> 
> 标签：c

我目前正在做我的任务，必须使用 C-Free 5.0。只需要你的帮助来解决这个难题。我想为用户在到期前输入答案实施时间限制。我已经尝试过这段代码，但它在 scanf() 函数中被阻塞了。是否有任何其他方法，例如解锁输入或其他方法。我试图实现' `#include <sys/select.h>`'但这个程序没有那个库。

```
#include <stdio.h> 
#include <string.h>
#include <time.h>
#include <stdlib.h>

int main()
{
    char st[10];
    printf ("Please enter a line of text : ");
    time_t end = time(0) + 5; //5 seconds time limit.
    while(time(0) < end)
    {
        scanf("%s", &st);
        if(st != NULL)
        {
            printf ("Thank you, you entered >%s<\n", st);
            exit(0);
        }
    }
    main();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:43:21.627

这是一个示例程序，展示了如何在文件描述符上使用`O_NONBLOCK`标志。`stdin`

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>

#define INPUT_LEN 10

int main()
{
    printf ("Please enter a line of text : ");
    fflush(stdout);
    time_t end = time(0) + 5; //5 seconds time limit.

    int flags = fcntl(STDIN_FILENO, F_GETFL, 0);
    fcntl(STDIN_FILENO, F_SETFL, flags | O_NONBLOCK);

    char answer[INPUT_LEN];
    int pos = 0;
    while(time(0) < end)
    {
        int c = getchar();

        /* 10 is new line */
        if (c != EOF && c != 10 && pos < INPUT_LEN - 1)
            answer[pos++] = c;

        /* if new line entered we are ready */
        if (c == 10)
            break;
    }

    answer[pos] = '\0';

    if(pos > 0)
        printf("%s\n", answer);
    else
        puts("\nSorry, I got tired waiting for your input. Good bye!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:41:08.167

由于您`fcntl.h`尝试将标准输入设置为非阻塞。它并不漂亮（主动等待），但如果你没有，`select`那么这是最简单的方法：

```
#include <stdio.h> 
#include <string.h>
#include <time.h>
#include <stdlib.h>
#include <fcntl.h>
#include <errno.h>

int main()
{
    // get stdin flags
    int flags = fcntl(0, F_GETFL, 0);
    if (flags == -1) {
        // fcntl unsupported
        perror("fcntl");
        return -1;
    }

    // set stdin to non-blocking
    flags |= O_NONBLOCK;
    if(fcntl(0, F_SETFL, flags) == -1) {
        // fcntl unsupported
        perror("fcntl");
        return -1;
    }

    char st[1024] = {0}; // initialize the first character in the buffer, this is generally good practice
    printf ("Please enter a line of text : ");
    time_t end = time(0) + 5; //5 seconds time limit.

    // while
    while(time(0) < end  // not timed out
        && scanf("%s", st) < 1 // not read a word
        && errno == EAGAIN); // no error, but would block

    if (st[0]) // if the buffer contains something
        printf ("Thank you, you entered >%s<\n", st);

    return 0;
} 
```

对您的代码的注释：`if (st != NULL)`将始终满足，因为`st`是堆栈指针。

# spring - 关于类或方法的注释建议

> ID：13551063
> 
> 赞同：0
> 
> 时间：2012-11-25T12:36:13.040
> 
> 标签：spring, annotations, aop, spring-aop

我有以下问题：

我为安全性创建了注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.METHOD, ElementType.TYPE})
@Inherited
@Documented
public @interface Security {
     Role[] roles();
} 
```

我现在用这个注解来注解类和方法。在某些情况下，该类使用此注解进行注解，并且该类中的特定方法也使用具有不同角色的@Security 进行注解。

如何创建@Before 通知，以捕获用@Security 注释的类中的任何一个方法或用@Security 注释的方法，以及在类和方法上都有注释的情况下获得更具体的定义。

我显然也需要注释的内容（角色）。

是否可以？

如果我在类之间有继承性，它们都具有@Security 注释以获得最具体的定义，是否也有可能？

约西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:08:40.123

这应该可以工作（本机 AspectJ 代码，但如果您愿意，可以转换为 @Aspect）：

```
pointcut secureMethods() : execution(@Security * *(..));

pointcut secureTypes() : execution(* (@Security *).*(..));

Object around(Security security) : secureMethods() && @annotation(security) {
    apply(security);
    return proceed(security);
}

Object around(Security security) : secureTypes() && !secureMethods() && @target(security) {
    apply(security);
    return proceed(security);
} 
```

# mongodb - MongoDB字段选择包括没有字段的文档

> ID：13551064
> 
> 赞同：0
> 
> 时间：2012-11-25T12:36:23.003
> 
> 标签：mongodb, mongodb-query

假设我有一个包含两个文档的集合......

```
{"_id": ..., "msg": "hello world"}
{"_id": ..., "name": "bob dylan"} 
```

和一个查询...

```
db.collection.find({}, {"text": 1}) 
```

为什么这会返回两个文件？有没有办法只在 msg 字段存在时才返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:50:10.437

您的查询返回两个文档，因为您的条件为空 ( `{}`)：

```
db.collection.find({}, {"text": 1}) 
```

如果您只想查找该`msg`字段存在的文档，您可以使用[`$exists`](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24exists)：

```
db.collection.find({ msg: { $exists: true}}, { "text" : 1 }) 
```

请注意，对于 to 的第二个参数`find()`，您只是请求`text`显示该字段的值。

# c# - 在指向某处时保持移动鼠标光标

> ID：13551066
> 
> 赞同：1
> 
> 时间：2012-11-25T12:36:33.907
> 
> 标签：c#, wpf, mouse, kinect

所以，我正在尝试创建一个 Kinect 应用程序，其中鼠标由头部的运动控制。

```
 if (faceFrame.TrackSuccessful)
        {               
            var xBase = System.Windows.Forms.Screen.AllScreens[0].Bounds.Width;
            var yBase = System.Windows.Forms.Screen.AllScreens[0].Bounds.Height;
            var xCentroTela = xBase / 2;
            var yCentroTela = yBase / 2;
            var xInicial = Convert.ToInt32(pontosFace[41].X);
            var yInicial = Convert.ToInt32(pontosFace[41].Y);

            if (flagPosicao == 0)
            {
                SetCursorPos(xCentroTela, yCentroTela);

                flagPosicao = 1;
            }

            //Works
            int topofscreen = ((100 * yBase) * yInicial) / (50 * yCentroTela);
            int leftofscreen = ((100 * xBase) * xInicial) / (50 * xCentroTela);

            leftofscreen = leftofscreen - xCentroTela;
            topofscreen = topofscreen - yCentroTela;

            SetCursorPos(leftofscreen, topofscreen);

            Thread.Sleep(1);

            txty.Text = Convert.ToString(topofscreen);
            txtx.Text = Convert.ToString(leftofscreen);
        } 
```

我已经设法根据 Kinect 跟踪的面部给定点的确切位置来控制它，但是如果人坐着，这会将鼠标的移动限制在一个非常小的区域内。这仅在人们不断在房间周围移动他的头时才有效。

我的问题是：有没有办法动态设置鼠标光标的位置？换句话说，我不想将它设置为我的确切位置。我想将其设置为跟踪点指向的位置。例如，如果我将头移到左上角并停止，鼠标应该继续朝那个方向移动。

或者有没有办法将跟踪点范围扩大到更大的区域？

**更新** 我已经更新了代码并进行了一些改进。现在，我将鼠标光标设置到屏幕中心并获取面部的初始跟踪点。现在我正试图发现从那里去哪里。

**更新#2** 现在我已经设法跟踪屏幕的中心点（`xCentroTela`和`yCentroTela`）并确定了点（`xInicial`和`yInicial`）的第一个跟踪位置。有了这个，我将第一个跟踪位置设置为屏幕的中心并尝试从那里开始。但是即使使用像屏幕中心点这样的比较，仍然无法将鼠标指向面部指向的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:51:50.977

你可以实现这样的事情：

如果用户将你的头向右移动一点，你会这样做`nothing`，但如果他再移动一点，你就会开始向右移动鼠标并加速它（将位移乘以一个因子），并且只有在以下情况下才会停止用户将头部转到原始位置。换句话说，您需要考虑光标周围的区域，如果用户查看该区域，则不会发生任何事情，如果用户走出该区域，则鼠标开始移动。请记住使用光标移动区域，使光标保持在中心。

# r - ggplot2 错误：找不到对象“比率”

> ID：13551073
> 
> 赞同：3
> 
> 时间：2012-11-25T12:37:36.427
> 
> 标签：r, ggplot2

我在网上找到了一个代码，它必须（将）生成一个代表美国劳工部的一些数据的图形：劳工统计局：

```
library(ggplot2)
df <- as.data.frame(read.csv("unemp.csv", colClasses = c("Date", "numeric")))
p <- ggplot(df,aes(x=date,y=ratio))
p + geom_point() + geom_smooth() + xlab("Year") + 
ylab("Civilian Employment Population Ratio (%)") + 
labs(title="Bureau of Labor Statistics Series EMRATIO 
            (seasonally adjusted) to 2012-10-01") 
```

但它不起作用并产生此错误：

```
Don't know how to automatically pick scale for object of type function. Defaulting to continuous
Error in eval(expr, envir, enclos) : object 'ratio' not found 
```

这段代码缺少什么？

'unemp.csv' 包含来自[此处](http://research.stlouisfed.org/fred2/data/EMRATIO.txt)的数据，生成的图形必须如下[所示](http://qph.is.quoracdn.net/main-qimg-138609a199fdeae521241db869a38850)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T12:53:00.560

出现错误是因为没有任何名为“日期”和“比率”的变量。这工作正常：

```
 library(ggplot2)
df <- as.data.frame(read.table("unemp.txt", header = TRUE, colClasses = c("Date", "numeric")))
names(df) <- c("date", "ratio")
p <- ggplot(df,aes(x=date,y=ratio))
p + geom_point() + geom_smooth() + xlab("Year") + 
  ylab("Civilian Employment Population Ratio (%)") +
  labs(title="Bureau of Labor Statistics Series EMRATIO (seasonally adjusted) to 2012-10-01") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T01:34:48.740

像这样的[https://stackoverflow.com/questions/16201906/how-can-i-get-the-value-of-a-kernel-density-estimate-at-specific-points](https://stackoverflow.com/questions/16201906/how-can-i-get-the-value-of-a-kernel-density-estimate-at-specific-points/%22this%22)可能对其他人有用周围的热图。

# javascript - 在 javascript 中使用 jQuery 移动 CSS

> ID：13551085
> 
> 赞同：0
> 
> 时间：2012-11-25T12:39:10.597
> 
> 标签：javascript, android, css, jquery-mobile

我正在使用电话间隙检索电话的联系人，并希望使用 jquery mobile 在列表视图中显示姓名。但是在执行此代码时未应用 css

这是代码

```
<!doctype html>
   <html>
      <head>

      <meta charset="UTF-8" />

      <link rel="stylesheet" href="jquery.mobile-1.0.1.min.css" />

      <script src="cordova-1.5.0.js" type="text/javascript"></script> 
      <script src="jquery.js" type="text/javascript"></script>

      <script src="contact.js" type="text/javascript"></script> 
      <script src="jquery.mobile-1.0.1.min.js" type="text/javascript"></script>

      <script >
      document.addEventListener("deviceready", onDeviceReady, false);
      function onDeviceReady() {

         var contactList = new ContactFindOptions(); 
         contactList.filter=""; 
         contactList.multiple=true;
         var fields = ["*"];  //"*" will return all contact fields
         navigator.contacts.find(fields,  getContactFields, onError, contactList );
         }

      function getContactFields(contacts) {
          //displaying contacts in list view
          for (var i=0; i<contacts.length; i++)
          {
              document.getElementById("temp").innerHTML+='<ul id="get" data-role="listview"><li><a href="#contact">'+contacts[i].displayName+'</a></li></ul>'
          }

          $('get').listview();
       }

       function onError(contactError) {
           alert('onError!');
       }
      </script> 
```

这是我用于显示未应用 css 的联系人的功能

```
 //displaying contacts in list view 
```

```
 for (var i=0; i<contacts.length; i++)
 {
     document.getElementById("temp").innerHTML+='<ul id="get" data-role="listview"><li><a href="#contact">'+contacts[i].displayName+'</a></li></ul>'
 }

 $('get').listview(); 
```

要显示的联系人姓名的 HTML 正文代码

```
<div data-role="content" id="temp"></div> 
```

它的显示如下图所示。css 仅应用于名字

![在此处输入图像描述](../Images/08f9e464d90273fcedd43d2cd4110f04.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:09:42.067

首先，您的代码中几乎没有错误。

1.  您添加列表元素的方式不正确。您正在为每个元素联系元素添加列表视图。所以首先创建 ul 元素，然后通过循环将 li 元素添加到其中。此外，如果您使用的是 JQM，请使用适当的 jQuery sintax。

反而：

```
document.getElementById("temp").innerHTML+='<ul id="get" data-role="listview"><li><a href="#contact">'+contacts[i].displayName+'</a></li></ul>' 
```

利用：

```
$('#temp').append(<ul id="get" data-role="listview"></ul>);
$('#temp ul#get').append('<li><a href="#contact">'+contacts[i].displayName+'</a</li>'); 
```

这还不够。

1.  填充列表视图时，您必须像这样刷新它的 css：

    $('ul#get').listview('refresh');

您可以在 JQM[文档](http://jquerymobile.com/test/docs/lists/docs-lists.html)中找到有关此的更多信息。

1.  这个声明不会做任何事情：

    $('get').listview();

您需要将其寻址到真正的 ul 元素，并且因为 get 是它的 id 它应该如下所示：

```
 $('#get').listview(); 
```

# spring - 未能执行目标 org.codehaus.mojo exec-maven-plugin

> ID：13551087
> 
> 赞同：2
> 
> 时间：2012-11-25T12:39:27.507
> 
> 标签：spring, maven, dependency-injection, exec-maven-plugin

我有一个问题，我花了 5 天没有解决它：执行`mvn exec:java`时无法正确解析配置参数，抛出以下错误：

```
"Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.1:java (default-cli) on project poll-translator: An exception occured while executing the Java class. null: InvocationTargetException: Error creating bean with name 'serviceLocator' defined in class path resource [META-INF/dsol/dsol.xml]: Cannot resolve reference to bean 'dsol-service-proxy' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dsol-service-proxy' defined in class path resource [META-INF/dsol/dsol.xml]: Instantiation of bean failed; nested exception is net.sf.cglib.core.CodeGenerationException: java.lang.NullPointerException-->null -> [Help 1]" 
```

这是使用的 POM 配置文件（使用**Apache Maven 3.0.4）**：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<parent>
    <groupId>org.dsol</groupId>
    <artifactId>dsol-parent</artifactId>
    <version>1-SNAPSHOT</version>
    <relativePath>../dsol/dsol-parent/pom.xml</relativePath>
</parent>

<groupId>org.dsol.project</groupId>
<artifactId>poll-translator</artifactId>
<version>0.1-SNAPSHOT</version>

<properties>
    <dsol.version>0.1-SNAPSHOT</dsol.version>
</properties>

<repositories>
    <repository>
        <id>dsol.internal</id>
        <url>http://maven.dsol-lang.net:8080/archiva/repository/internal/</url>
    </repository>
    <repository>
        <id>dsol.snapshots</id>
        <url>http://maven.dsol-lang.net:8080/archiva/repository/snapshots/</url>
    </repository>
</repositories>

<dependencies>
    <dependency>
        <groupId>org.dsol</groupId>
        <artifactId>dsol-interpreter</artifactId>
        <version>${dsol.version}</version>
    </dependency>
    <dependency>
        <groupId>org.dsol</groupId>
        <artifactId>dsol-default-planner-plugin-impl</artifactId>
        <version>${dsol.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http-jetty</artifactId>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>java</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <mainClass>org.dsol.engine.DSOLServer</mainClass>
            </configuration>
        </plugin>
        <plugin>
            <groupId>com.thoughtworks.paranamer</groupId>
            <artifactId>paranamer-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>run</id>  <!-- id is optional -->
                    <configuration>
                        <sourceDirectory>${project.build.sourceDirectory}</sourceDirectory>
                        <outputDirectory>${project.build.outputDirectory}</outputDirectory>
                    </configuration>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings 
                only. It has no influence on the Maven build itself. -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>
                                        com.thoughtworks.paranamer
                                    </groupId>
                                    <artifactId>
                                        paranamer-maven-plugin
                                    </artifactId>
                                    <versionRange>
                                        [2.3,)
                                    </versionRange>
                                    <goals>
                                        <goal>generate</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute />
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

我不知道问题出在哪里，我该如何解决！你能帮我吗？

问候，萨娜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:59:10.583

问题在于您的弹簧配置，而不是您的 Maven 配置。在您的情况下，当 spring 尝试创建`dsol-service-proxy`对象时，它的构造函数需要 `serviceLocator`它反过来创建`serviceLocator`并且 spring 在创建您的`serviceLocator`. 检查您的`dsol.xml`并确保`serviceLocator`配置正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T11:47:07.000

Another possible solution is that if you have something like this `<argument>${env.ANDROID_HOME}/build-tools/android-4.2.2/lib/dx.jar</argument>` , consider adding ANDROID_HOME to environment path variables.

# c# - 哪个本地数据库适合 Windows 8 应用商店应用？

> ID：13551091
> 
> 赞同：21
> 
> 时间：2012-11-25T12:39:39.197
> 
> 标签：c#, database, sqlite, visual-studio-2012, windows-store-apps

我正在`Windows 8 Store App`使用`C#`和`XAML`使用`Visual Studio 2012`.

不需要具有多用户支持等的数据库服务器。

我想将我的数据存储在本地数据库中，但不知道哪个数据库适合我的需求。也许`SQLite`？或者是否有更适合 Windows 应用商店应用程序并更好地集成到 Visual Studio 中的解决方案？

该应用程序是一种日历，数据库应存储由日期、任务等组成的用户数据。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-05T08:35:42.530

WinRT 支持 SQLite。

[http://visualstudiogallery.msdn.microsoft.com/23f6c55a-4909-4b1f-80b1-25792b11639e](http://visualstudiogallery.msdn.microsoft.com/23f6c55a-4909-4b1f-80b1-25792b11639e)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-12T09:28:07.840

**SQLite**是推荐用于 Win 8 应用程序的数据库。实现相同的链接

[http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)

[http://code.msdn.microsoft.com/windowsapps/Using-SQLite-Asynchronously-b8372137](http://code.msdn.microsoft.com/windowsapps/Using-SQLite-Asynchronously-b8372137)

[https://visualstudiogallery.msdn.microsoft.com/23f6c55a-4909-4b1f-80b1-25792b11639e](https://visualstudiogallery.msdn.microsoft.com/23f6c55a-4909-4b1f-80b1-25792b11639e)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-25T14:00:14.100

好的，这是一个很好的问题，我必须努力学习。默认情况下，WinRT 应用程序至少不能直接访问任何类型的数据库结构。这意味着没有 Express、Compact、CE、SQLite 等。

有三种方法可以解决这个问题。不要使用数据库，而是使用存储和检索数据的本地文件结构。XML 可以很好地处理这个问题，因为您可以维护数据库提供给您的许多相同功能。

第二个选项是使用 IndexedDB。它类似于 cookie 样式的本地存储模型，其中文件保存在您的应用程序本地应用程序文件夹中。

第三个也是最后一个选项是使用 Web 服务。WinRT 确实可以访问 Internet，这意味着您可以编写可以调用的 API 和 WebServices。这确实意味着您需要运行一个连接到主数据库的服务器。当您的应用需要数据时，它会调用您的 Web 服务并获取所需的数据。

总体而言，对于您描述的应用程序，第一个选项可能最适合您的需求。在您的应用程序文件夹中保留一个本地 XML 文件并从中读取/写入。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-29T17:19:11.840

我的[问题](https://stackoverflow.com/questions/18500763/using-a-database-for-a-windows-8-store-app-using-c)被标记为这个问题的重复（尽管它是关于 C++ 而不是 C#）。我想我仍然应该在这里发布我的发现。C++ 应用程序还有另一种选择：

[可扩展存储引擎 (ESE)](http://msdn.microsoft.com/en-us/library/gg269259%28v=exchg.10%29.aspx)

可在 Jet 部分下的[此链接](http://msdn.microsoft.com/en-us/library/windows/apps/br205753.aspx)上找到所有此类可用于商店应用程序的 API 的列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-11T20:34:38.903

As one of variant:

Devart LinqConnect for Metro – a fully-functional high-performance ORM solution for developing Windows Store applications using either of LINQ or ADO.NET to access data.

[http://code.msdn.microsoft.com/windowsapps/A-Simple-Windows-Store-85f29843#content](http://code.msdn.microsoft.com/windowsapps/A-Simple-Windows-Store-85f29843#content)

or next link can be usefull to

[http://social.technet.microsoft.com/wiki/contents/articles/18417.windows-store-app-with-a-sqlite-database.aspx](http://social.technet.microsoft.com/wiki/contents/articles/18417.windows-store-app-with-a-sqlite-database.aspx)

# javascript - 数字的动态输入屏蔽？

> ID：13551092
> 
> 赞同：0
> 
> 时间：2012-11-25T12:39:51.133
> 
> 标签：javascript, jquery, jsf

如何创建一个掩码，它最初显示为一个整数，但如果用户输入一个“。” 它显示为带有 2 个小数的十进制？

这将创建一个具有 2 个固定分数的掩码：

```
<script>
    jQuery(function($){
       $("#digit").mask("99999.99");
   });
</script> 
```

如何计算“。”之前的数字？无限制，并且仅在输入时才显示点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:18:39.480

我发现了一个非常简洁的插件，它可以进行各种十进制格式： http: [//www.decorplanit.com/plugin/](http://www.decorplanit.com/plugin/)

# bash - tar 命令 - 不带文件夹压缩

> ID：13551095
> 
> 赞同：0
> 
> 时间：2012-11-25T12:40:02.403
> 
> 标签：bash, tar

我使用这样的 tar 命令：

```
tar -cf backupdb/db/2012/11/database.2012-11-25.tar.gz backupdb/db/2012/11/25/*.sql 
```

但是当我打开 tar 文件时，我看到一个目录 backupdb/db/2012/11/25 :/ How to modify the command to compress files backupdb/db/2012/11/25/*.sql 但没有父目录。

我知道 tar 命令中的 -C 切换器，但我不知道如何使用它来压缩具有指定扩展名的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:51:08.363

您正在寻找`-C`标志：

```
tar -C backupdb/db/2012/11/25/ -cf backupdb/db/2012/11/database.2012-11-25.tar.gz *.sql 
```

# ruby - Ruby eventmachine 和 WIN32OLE

> ID：13551097
> 
> 赞同：0
> 
> 时间：2012-11-25T12:40:09.457
> 
> 标签：ruby, eventmachine, win32ole

我正在尝试将 WIN32OLE 类与 eventmachine 库结合使用。OLE 库与程序通信良好，但我将 WIN32OLE_Event 挂钩添加到程序的那一刻，它没有。事件在不可预测的时间触发（或通常永远不会触发）。删除由 eventmachine 实现的侦听服务器似乎可以使事件正确触发。

有谁知道为什么会发生这种情况以及我该如何解决？还有哪些其他连接/套接字管理库可以取代 eventmachine？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:59:05.317

事实证明 WIN32OLE 不是线程安全的，由用户来确保它只被初始化它的线程访问。

# jquery - Jquery 结果消息未定义

> ID：13551098
> 
> 赞同：-1
> 
> 时间：2012-11-25T12:40:14.243
> 
> 标签：jquery, ajax

这曾经有效，但不知何故它不再有效。我得到一个 Uncaught ReferenceError: msg is not defined (它指的是成功函数) 奇怪的是，它不应该成功，因为服务器已关闭。即使服务器已启动，它也会给我同样的错误。

```
function login(user, pass){

    $.ajax({
        type: "GET",
        url: "http://XX.XX.XXX.XX:8080/wcf/Service1.svc/HentBruger",
        data: '{"username":"'+user+'", "password":"'+pass+'"}',
         processData: true,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: loginsuccess(msg),
        error: loginfailed(msg),

    });

} 
```

我更喜欢使用这段代码，因为它给了我超时的可能性。而且..同样的错误，在完成部分中没有定义味精

```
 $.ajax({
    type: "GET",
    url: "http://XX.XX.XXX.XX:8080/wcf/Service1.svc/HentBruger",
    data: '{"username":"someuser", "password":"somepass"}',
    timeout:5000
}).done(function( msg ){
   alert( msg );
}).fail(function(jqXHR, textStatus){
    if(textStatus == 'timeout')
    {     
        alert('Failed from timeout'); 
        //do something. Try again perhaps?
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:41:51.183

改变

```
 success: loginsuccess(msg),
    error: loginfailed(msg), 
```

至

```
 success: loginsuccess,
    error: loginfailed, 
```

`loginsuccess`您没有设置为回调，而是设置了 , 的返回`loginsuccess(msg)`，`msg`但仍未定义。

* * *

在这两种情况下，您都可能受制于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)：只有在远程站点设置了[CORS 标头](https://developer.mozilla.org/en/docs/HTTP_access_control)时，您才能在 javascript 中读取发送到另一个源的 JSON 请求的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:31:59.953

感谢您的所有回复。问题已解决。我不知道如何，在这次经历之后我知道 wamps 允许来源策略仅设置为 localhost。并且 phonegaps 允许来源策略设置为 *

这是什么工作：

```
 $.ajax({
    type: "POST", //This was set to GET
    url: "http://XX.XX.XXX.XX:8080/wcf/Service1.svc/HentBruger",
    data: '{"username":"something", "password":"somepass"}',
    contentType: "application/json; charset=utf-8", //I've forgot those
    dataType: "json", //I've forgot those
    timeout:5000 
}).success(function( msg ){
   document.write(msg);
}).fail(function(jqXHR, textStatus){
alert(textStatus); //returns an error, not timeout. But i am recieving something on failure..
    if(textStatus == 'timeout')
    {     
        alert('Failed from timeout'); 
        //do something. Try again perhaps?
    }
}); 
```

此外，我已将允许来源策略 * 添加到我的 IIS 服务器。不知道这是否做了什么。

# c# - 我什么时候应该创建一个新的 DbContext()

> ID：13551100
> 
> 赞同：87
> 
> 时间：2012-11-25T12:40:22.480
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

我目前正在使用`DbContext`与此类似的：

```
namespace Models
{
    public class ContextDB: DbContext
    {

        public DbSet<User> Users { get; set; }
        public DbSet<UserRole> UserRoles { get; set; }

        public ContextDB()
        {

        }
    }
} 
```

然后，我在需要访问数据库的**所有**控制器的顶部使用以下行。我还在我的 UserRepository 类中使​​用它，其中包含与用户相关的所有方法（例如获取活动用户，检查他拥有的角色等）：

```
ContextDB _db = new ContextDB(); 
```

考虑到这一点，有时一个访问者可以激活多个 DbContext，例如，如果它正在访问使用 UserRepository 的控制器，这可能不是最好的想法。

我应该什么时候创建一个新的 DbContext？或者，我是否应该有一个在所有地方传递和重用的全局上下文？这会导致性能下降吗？也欢迎提出替代方法的建议。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-25T12:47:03.547

我使用了一个基本控制器，它公开了`DataBase`派生控制器可以访问的属性。

```
public abstract class BaseController : Controller
{
    public BaseController()
    {
        Database = new DatabaseContext();
    }

    protected DatabaseContext Database { get; set; }

    protected override void Dispose(bool disposing)
    {
        Database.Dispose();
        base.Dispose(disposing);
    }
} 
```

我的应用程序中的所有控制器都源自`BaseController`并使用如下：

```
public class UserController : BaseController
{
    [HttpGet]
    public ActionResult Index()
    {
        return View(Database.Users.OrderBy(p => p.Name).ToList());
    }
} 
```

现在回答你的问题：

> 我应该什么时候创建一个新的 DbContext / 我应该有一个可以传递的全局上下文？

应根据请求创建上下文。创建上下文，做你需要做的事情然后摆脱它。使用我使用的基类解决方案，您只需担心使用上下文。

不要尝试拥有全局上下文（这不是 Web 应用程序的工作方式）。

> 我可以拥有一个可以在所有地方重复使用的全局上下文吗？

不，如果你在它周围保留一个上下文，它将跟踪所有更新、添加、删除等，这会减慢你的应用程序速度，甚至可能导致一些非常微妙的错误出现在你的应用程序中。

您可能应该选择将存储库**或**上下文公开给控制器，但不能同时公开。如果两个上下文对应用程序的当前状态有不同的想法，那么从同一个方法访问两个上下文将导致错误。

就个人而言，我更喜欢直接公开`DbContext`，因为我见过的大多数存储库示例最终都只是简单的包装`DbContext`。

> 这会导致性能下降吗？

第一次`DbContext`创建 a 非常昂贵，但是一旦完成，就会缓存很多信息，以便后续实例化更快。与每次需要访问数据库时实例化一个上下文相比，您更有可能看到保持上下文的性能问题。

> 其他人是怎么做到的？

这取决于。

有些人喜欢使用依赖注入框架在创建时将其上下文的具体实例传递给他们的控制器。两种选择都很好。我的更适合小型应用程序，您知道正在使用的特定数据库不会改变。

有些人可能会争辩说您*不*知道这一点，这就是依赖注入方法更好的原因，因为它使您的应用程序对更改更具弹性。我对此的看法是它可能不会改变（SQL 服务器和实体框架几乎不模糊），而且我的时间最好花在编写特定于我的应用程序的代码上。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-05-17T13:03:43.207

我试着根据自己的经验来回答。

**1\. 我应该什么时候创建一个新的 DbContext / 我应该有一个可以传递的全局上下文？**

Context 应该由依赖注入来注入，而不应该由你自己实例化。最佳实践是通过依赖注入将其创建为范围服务。（见我对问题 4 的回答）

还请考虑使用适当的分层应用程序结构，例如 Controller > BusinessLogic > Repository。在这种情况下，您的控制器不会接收 db-context 而是接收存储库。在控制器中注入/实例化 db-context 告诉我，您的应用程序架构在一个地方混合了许多职责，在任何情况下，我都不推荐。

**2\. 我可以拥有一个可以在所有地方重复使用的全局上下文吗？**

是的，您可以*拥有*，但问题应该是“我**应该**拥有……”-> 否。Context 旨在用于每个请求以更改您的存储库，然后再次离开。

**3\. 这会导致性能下降吗？**

是的，因为 DBContext 根本不是为了全局而设计的。它存储所有已输入或查询到的数据，直到它被销毁。这意味着全局上下文将变得越来越大，对其的操作将变得越来越慢，直到您遇到内存不足的异常或您因年龄增长而死亡，因为这一切都变慢了。

当多个线程同时访问同一个上下文时，您还会遇到异常和许多错误。

**4\. 其他人是怎么做到的？**

工厂通过依赖注入注入的DBContext；范围：

```
services.AddDbContext<UserDbContext>(o => o.UseSqlServer(this.settings.DatabaseOptions.UserDBConnectionString)); 
```

我希望我的回答对哪里有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-13T14:18:12.023

从性能的角度来看，`DbContext`应该在`just`实际需要时创建，例如，当您需要在业务层内拥有用户列表时，您可以从 DbContext 创建一个实例，**`immediately dispose`**并在您的工作完成时创建它

```
using(var context=new DbContex())
{
var users=context.Users.Where(x=>x.ClassId==4).ToList();

} 
```

`context`实例将在离开`Using`Block 后被释放。

但是如果你不立即处理它会发生什么？
`DbContext`本质上是缓存，查询越多，占用的内存块就越多。
在向您的应用程序泛滥的情况下，它会更加明显**`concurrent requests`**，在这种情况下，您占用内存块的每一毫秒都至关重要，更不用说一秒钟了。
您越推迟处理不必要的对象，您的应用程序就越容易崩溃！

当然，在某些情况下，您需要保留您的`DbContext`实例并在代码的另一部分使用它，但在同一**`Request Context`**.

我向您推荐以下链接以获取有关管理的更多信息`DbContext`：
[dbcontext Scope](https://mehdi.me/ambient-dbcontext-in-ef6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-05T21:00:44.397

现在我正在尝试这种方法，它可以避免在调用不使用它的操作时实例化上下文。

```
public abstract class BaseController : Controller
{
    public BaseController() { }

    private DatabaseContext _database;
    protected DatabaseContext Database
    {
        get
        {
            if (_database == null)
                _database = new DatabaseContext();
            return _database;
        }
    }

    protected override void Dispose(bool disposing)
    {
        if (_database != null)
            _database.Dispose();
        base.Dispose(disposing);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-26T14:59:16.597

您应该在每次 Save() 操作后立即处理上下文。否则每次后续保存都需要更长的时间。我有一个项目在一个循环中创建和保存复杂的数据库实体。令我惊讶的是，在循环中移动“using (var ctx = new MyContext()){...}”后，操作速度提高了三倍。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-07-23T23:26:03.953

这显然是一个较老的问题，但如果您使用 DI，您可以执行类似的操作并将所有对象的范围限定为请求的生命周期

```
 public class UnitOfWorkAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(HttpActionContext actionContext)
        {
            var context = IoC.CurrentNestedContainer.GetInstance<DatabaseContext>();
            context.BeginTransaction();
        }

        public override void OnActionExecuted(HttpActionExecutedContext actionContext)
        {
            var context = IoC.CurrentNestedContainer.GetInstance<DatabaseContext>();
            context.CloseTransaction(actionContext.Exception);
        }
    } 
```

# actionscript-3 - 将 MovieClip 强制转换为 CustomClass

> ID：13551101
> 
> 赞同：0
> 
> 时间：2012-11-25T12:40:35.023
> 
> 标签：actionscript-3

我有一个 McContainer 类，如下所示：

```
package  
{
import flash.display.MovieClip;
public class McContainer extends MovieClip
{
     public var body_Mc:MovieClip; 

    public function McContainer()
    {

    }

} 
```

}

现在我想将一个 MovieClip 强制转换为 McContainer ：

```
var a:MovieClip 

var b:AppContainer 

b= AppContainer(a) ;

trace(a); 
```

但我得到运行时错误：

```
TypeError: Error #1034: Type Coercion failed: cannot convert    
flash.display::MovieClip@2bdbe041 to McContainer.
at Untitled_fla::MainTimeline/frame1() 
```

如何将 MovieClip 强制转换为 McContainer ？

# symfony - Symfony2.1 循环引用

> ID：13551103
> 
> 赞同：0
> 
> 时间：2012-11-25T12:40:47.883
> 
> 标签：symfony, doctrine, circular-reference

我想知道如何避免在我的 symfony2.1 应用程序中出现循环引用。我有一个像

```
customer (
  name
  addresses -- OneToMany
  currentAddress -- OneToOne ) 
```

和

```
address (
  street
  customer -- ManyToOne ) 
```

现在我的固定装置不会加载，因为它不能因为外键而删除客户。

为了性能，我想避免必须在客户上添加一个 getCurrentAddress() 方法，该方法将在地址表中进行选择。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:25:32.183

添加 getCurrentAddress() 不是这样的性能问题。

这样，我将避免循环引用以及随之而来的所有问题。

在我的情况下，在教义注释中使用按日期排序就足够了：

```
// on customer entity : 
/** @ORM\OrderBy({"datemodified" = "DESC"}) */
private $addresses

public function getCurrentAddress()
{
    return $this->addresses[0];
} 
```

# css - 奇怪的响应式布局

> ID：13551105
> 
> 赞同：-1
> 
> 时间：2012-11-25T12:40:51.320
> 
> 标签：css

在手机中以纵向模式查看时，图像每行显示两列，每个图像容器的宽度为 50%。

但有时，每行只能获得一张图像。这似乎完全随机！如果将手机翻转到横向模式，图像每行显示 3 列，一切正常。

这是一张图片，因此您可以了解我的意思：

![在此处输入图像描述](../Images/899f0f757d684483ce4a84723364be12.png)

如您所见，眼镜蛇手套是完全独立的！如果您调整窗口大小以使每行仅获得 2 张图像，则该问题可以在 Firefox 中重现。

如果您访问[http://www.snowrepublic.co.uk/](http://www.snowrepublic.co.uk/)并点击页面底部的“切换到手机”按钮（黑色手机外观图标），然后选择您自己可以看到的“手套”类别. 奇怪的是，如果您点击“防弹衣”类别，完全相同的布局可以完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:51:42.033

您的问题是由于您的`.centeredContent`元素没有高度，并且当其中一个框中的内容较少时，它下面的框会向上跳一点（这是浮动元素的正常行为）。

要修复它，请给出`.centeredContent`一个可以容纳最多内容的高度。在你的情况下 `260px`似乎就足够了：

```
.centeredContent {
    ...
    height: 260px;
} 
```

# php - 使用 else{} 或使用 return 的最佳做法？

> ID：13551116
> 
> 赞同：-5
> 
> 时间：2012-11-25T12:42:06.897
> 
> 标签：php, methods, return

嘿，我已经编程了几年了，就在最近，我想知道在一个总是会返回一些东西的方法中最好做什么：

```
if($age < 18) {
    return 'Under 18';
}
else {
    return 'Adult';
} 
```

还是更好地使用：

```
if($age < 18) {
    return 'Under 18';
}
return 'Adult'; 
```

在后者中，如果他们未满 18 岁，程序将返回“未满 18 岁”并终止函数的其余部分，那么在第一个示例中是否需要 else{}？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:58:40.837

两者在编程上是相同的（第二个可能更多的操作，但在计算方面，完全一样）。因此，唯一的变化将是审美。如果您的代码不会更改，我会建议第二个选项。但是，如果它要增长，您可能会对第一个选项感兴趣。

如果代码不会增长，我个人会这样设置：

```
return ($age < 18) ? 'Under 18' : 'Adult'; 
```

或者，根据您的要求，甚至这也可能很有趣：

```
return ($age >= 18); 
```

它消除了不必要的代码，使其不那么臃肿，同时保持功能性和可读性。如果您可以保持简单且完全可以理解，请不要使自己复杂化。我很想在这里引用爱因斯坦的话 (;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:46:13.563

我认为这两个例子都没有正确或错误的方法。两者都有效 - 个人编码风格确实是主要因素。我自己会使用后一种风格，因为这样，即使 if 语句被破坏（在更复杂的情况下），函数/方法也总是有返回的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:48:15.973

有人说这是个人品味的问题，但我认为最好在方法/函数中设置一个入口点和**一个出口点**`return`，因为这通常有助于调试和控制函数流（所以你不会在中间突然“感到惊讶”代码 所以任何代码宁愿是：

```
$result = 'Adult';
if($age < 18) {
    $result = 'Under 18';
}

return $result; 
```

除了示例代码不是很幸运，因为它应该写成：

```
return ($age < 18) ? 'Under 18' : 'Adult'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T12:48:46.693

至于我 - 第一个更具可读性。但是没有太大区别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T13:02:17.747

最好早点回来。嵌套 if else 使条件更糟！

**简化（无其他）示例**

```
//nested (without return)
if ($a == 1) {
    if ($a == 2) {
        if ($a > 2) {

        }
    }
}

//return early
if ($a == 1) {
    return 1;
}

if ($a == 2) {
    return 2;
}

if ($a > 3) {
    return $a;
} 
```

**解释**

需要早点返回的原因是（在我看来）大脑如何处理嵌套的 ifs。在阅读嵌套 if 结构时，您会注意到自己似乎总是跟踪先前的 if 条件。如果你像我一样把它弄平，你的大脑会更容易处理（奇怪的是考虑到它做同样的事情）。

一般来说，尽早返回会更好，因为您不必在返回语句之前阅读所有代码 - 它执行起来也更快，但速度快多少取决于代码本身。

**延伸阅读**

[https://softwareengineering.stackexchange.com/questions/118703/where-did-the-notion-of-one-return-only-come-from](https://softwareengineering.stackexchange.com/questions/118703/where-did-the-notion-of-one-return-only-come-from)

# java - 查找城市的平均温度（元素可以出现多次）

> ID：13551117
> 
> 赞同：-2
> 
> 时间：2012-11-25T12:42:08.100
> 
> 标签：java, average

我在 Java 中遇到了这个特定问题。我被困住了！我们要求用户输入数据数量，然后分别输入温度和城市名称。据说用户可能会为特定城市输入多个温度，例如： Vienna 23 (in C) Berlin 12 Paris 15 Berlin 9 Berlin 10 Paris 10

没有特定的顺序。我已经用两个一维数组完成了这部分，但是程序要求我们计算每个城市的平均温度，最高和最低温度（显然，如果我们只有一个温度，则 min/max/avg 将是相同的一座城市）。

考虑到我必须通过城市数组并检查特定城市在此处列出的次数，然后找到相应的温度以找到平均值/最小值/最大值，我不知道我应该如何做这部分。我有这个概念，但我无法用 Java 实现。有什么想法/建议吗？非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:47:12.827

你需要改变你的`Data Structure`. 对相关的属性使用两个不同的数组不是一个好主意。

相反，维护城市及其所有温度之间的映射。你需要创建一个`Map`这样的： -

```
Map<String, List<Double>> temperatureMap = new HashMap<String, List<Double>>(); 
```

然后对于每个城市，您可以使用每个城市轻松计算平均值`List<Double>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:52:40.397

您可以使用：

```
 Map<City,List<Temprature>>(); 
```

这是一个例子：

```
public class Temp {
Map<String,List<Double>> temp;

public Temp() {
    this.temp = new HashMap<String, List<Double>>();
}

private void insertTemperature(String city, double t) {

    if (temp.containsKey(city)) {
        List<Double> list = temp.get(city);
        list.add(t);
    } else {
        List<Double> list = new ArrayList<Double>();
        list.add(t);
        temp.put(city,list);
    }
}

private double calcAVG(String city) {
    List<Double> t = temp.get(city);
    double ttSum = 0;
    for (Double tt : t) {
        ttSum += tt;
    }

    return ttSum/t.size();
} 
```

}

# python - 实现正确性的图形测试

> ID：13551121
> 
> 赞同：2
> 
> 时间：2012-11-25T12:42:41.993
> 
> 标签：python

我正在测试计算两个省略号重叠区域的[算法的实现。](http://arxiv.org/abs/1106.3787)

测试的想法是**目视**检查椭圆的交点（如果有的话）是否计算正确。如果不是这种情况，那么计算的面积就不能正确。

**编辑**：我的实现的输出是一个带有交叉点的文件。我绘制了椭圆和交点以及`savefig`它们。我在视觉上检查结果并说服自己交叉点是否正确。

这是一个例子：

![在此处输入图像描述](../Images/eda72061399b96343b8ddf151e0c2ce2.png)

我的问题只是这种视觉方法不会随着测试数量的增加而扩展（比如说 1000 个案例）。

任何想法如何自动化这个测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:38:14.987

所以我做了一些研究，这是我推荐的。你可以做的是使用另一个 python 库来计算两个椭圆的交点，然后比较你的实现返回的两个。如果不是，这两者应该是相同的，你可以让测试失败并调查哪一个是错误的。sympy库可以计算[多个](http://docs.sympy.org/dev/modules/geometry.html)支持的实体 Ellipse、Circle、Polygon、RegularPolygon、Triangle 之间的交点。我建议使用标准库的[unittest](http://docs.python.org/2/library/unittest.html)来执行实际测试。然后你可以运行一个测试运行，创建几千个随机椭圆并检查每个椭圆的交点。

您可以[在他们的文档](http://docs.sympy.org/dev/modules/geometry.html#example-usage)中查看包含交叉计算的示例代码。他们在他们的文档中有这个惊人的功能，您可以单击示例旁边的在 SymPy Live 中运行代码块链接，它将在您的浏览器中打开一个 python 会话并在他们的谷歌应用引擎服务器上运行该示例。这使您可以将他们的库用于试驾，而无需将其安装在您的机器上。查看他们[基于网络的交互式 python shell](http://live.sympy.org/)，它真的很整洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:24:06.880

**方法**

由于我采用了全新的方法，因此决定将其发布为另一个答案。我使用了[Python 图像库](http://www.pythonware.com/library/pil/handbook/index.htm)在不同的图像上绘制两个椭圆，颜色为红色和绿色。然后我将两张图像混合在一起，计算了图像中黄色像素的数量，黄色是绿色和红色的合成，将成为交叉区域的颜色。第一个椭圆将被着色为红色，第二个为绿色，它们的交点为黄色。出于演示目的，我将第二个椭圆做成了一个圆圈，并将其完全包含在第一个椭圆中，以便可以显示它的面积应该是那个大小的圆圈的面积。由于像素被计数，因此无法得到准确的答案，但在此示例中，分辨率为 500x500，像素计数区域与正确值相差 0.42%。当然，如果您提高分辨率，您可以获得更高的精度，但出于测试目的，我只接受 +/- 1% 的容差。

**表现**

我运行了一个调用函数 1000 次的测试运行，它在 13.4 秒内完成。因此，创建三个图像并进行像素计数大约需要 13 毫秒，这对于手头的任务来说性能还不错。

**代码**

```
from PIL import Image, ImageDraw
from math import pi

RED, GREEN, YELLOW = (255, 0, 0), (0, 255, 0), (127, 127, 0)
SIZE = (500, 500)

def overlap(ellipse1, ellipse2):
    im1 = Image.new("RGB", SIZE)
    ImageDraw.Draw(im1).ellipse(ellipse1, fill=RED)
    im2 = Image.new("RGB", SIZE)
    ImageDraw.Draw(im2).ellipse(ellipse2, fill=GREEN)
    im3 = Image.blend(im1, im2, 0.5)
    im3.show()
    im3.save('test.png', "png")
    return [count for count, color in im3.getcolors() if color == YELLOW][0]

area1 = overlap((0, 50, 500, 450), (50, 50, 450, 450))
area2 = pi * (200**2)
print "overlap calc:" , area1
print "exact area:  " , area2
print "percent diff:" , ((area1 - area2)/area2)*100 
```

**输出**

```
overlap calc: 126196
exact area:   125663.706144
percent diff: 0.423585992124 
```

**图片**

![有交点的椭圆](../Images/e7280490bd742a79079e95680592317c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:47:10.987

**编辑：**对不起，我想我误解了这个问题。为此，您需要找到 2 个椭圆函数之间的交集或者您可以使用 sympy [http://docs.sympy.org/dev/modules/geometry.html](http://docs.sympy.org/dev/modules/geometry.html)

# clojure - 为什么 leiningen 制作目录层次结构？我可以免除它吗？

> ID：13551123
> 
> 赞同：6
> 
> 时间：2012-11-25T12:43:00.143
> 
> 标签：clojure, leiningen

如果我用 leiningen 创建一个新的 clojure 项目，它会生成一个像这样的目录树：

```
.
|-- doc
|   `-- intro.md
|-- project.clj
|-- README.md
|-- src
|   `-- hello_friend
|       `-- core.clj
`-- test
    `-- hello_friend
        `-- core_test.clj 
```

通常，我想要的只是一个 clojure 文件，我想使用 leiningen 来处理库并启动一个 repl。

我有两个问题：

(1) 是否有可能让 leiningen 使用这种结构正常工作

```
.
|-- project.clj
`-- hello.clj 
```

我非常喜欢。（事实上​​，将 project.clj 作为 hello.clj 文件的一部分会更好）

(2) 深层目录结构有什么好的理由吗？或者这只是java-land的一种习惯？

* * *

请注意，据我所知，这很好用：

**项目.clj**

```
(defproject generic "0.0.0"
  :dependencies 
  [[org.clojure/clojure "1.4.0"]
   [hiccup "1.0.2"]]
  :source-paths ["."]
  :main two

  :repl-options { :port 4001 :init (println "(-main) to run") }
) 
```

**一.clj**

```
(ns one
  (:use hiccup.core))

(def doom (html [:h1 "doom"])) 
```

**二.clj**

```
(ns two 
  (:require one))

(defn -main [] 
  (println one/doom)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T13:07:39.787

(1) 你可以`:source-paths ["."]`在你的project.clj中指定。有关所有可能的选项，请参见 lein[示例项目](https://github.com/technomancy/leiningen/blob/master/sample.project.clj)

(2) 一旦你有 2 个命名空间和另一个命名空间，你就需要“深度”结构`require`。有关名称空间如何映射到文件的说明，请参见[此处。](http://clojure.org/libs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-06T16:26:00.350

默认`src`路径（深层结构）将源代码与配置分开。对于大型应用程序，您还可以按目录组织多个命名空间以便于导航。

如果一切都在根目录中，即使这个最初的 REST API 也会变得笨拙：

![谢菲](../Images/325d2267a1b58603afe567e621b281f3.png)

# c++ - 在 C++ 中返回和访问多维数组

> ID：13551124
> 
> 赞同：0
> 
> 时间：2012-11-25T12:43:04.053
> 
> 标签：c++, multidimensional-array, getter

函数 getSalon() 返回一个二维布尔数组。

```
bool** getSalon()
{
    return salon;
} 
```

当我尝试访问它的值时，它似乎不起作用。

```
someObject.getSalon()[i][k]; 
```

但是如果我这样写，我会得到第一个元素。

```
someObject.getSalon(); 
```

如何正确访问此数组的所有元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:49:59.553

`operator[]`优先级高于 .`operator.`试试这个：

```
(someObject.getSalon())[i][k]; 
```

# php - 使用PHP从mysql中爆炸数据

> ID：13551131
> 
> 赞同：0
> 
> 时间：2012-11-25T12:44:25.353
> 
> 标签：php, mysql

我有一个数据库表，我在其中存储来自外部 xml 文件的所有值。由于我的项目要求要求我处理这些非标准化数据。我需要帮助以适当的方式提取数据。

我有两个网页（一个用于类别）和一个用于产品。我的数据库表如下所示：

```
**product_id       Code        Name                   ProductRange         ProductSubRange         WebCategory**

   1               1002        Lid 30l                  Crystal;Uni         LIDs                    Household products

   2               10433       Casa Basket Silver       Casa                Casa Hipster BASKET      Kitchenware

   3               17443       Casa Basket Ice White    Casa;Laundry         LAUNDRY BASKET         Laundry products

   4               13443       Garden tub               Eden                Eden Garden Pots        Household products

   5               199990       Black Lid 201          Crystal             Crystal Lids            Household products 
```

属于多个 productRange 的产品用我的分号 (;) 表示。例如，名称为“Lid 301”的 product_id 1 上方属于“Crystal”和“Uni”两个产品范围。product_id 3 也是如此。但是产品 2 属于单个 ProductRange。

我的问题：

**1)**如何构造一个查询，以便它可以根据我的“Webcategory”的 query_string 值返回“ProductRange”？例如：如果我从查询字符串中获得“家居产品”作为我的 WebCategory，它可能会给我这样的不同：

```
 Household Products
                       |-Crystal
                       |-Uni 
                       |-Eden

      Laundry Products
                       |-Casa
                       |-Laundry 

            Kitchenware
                       |-Casa 
```

**2）**基于提取的ProductRanges，我想根据产品范围和网络类别在我的网页中单独显示产品。例如，如果我从上面选择“Crystal”，它可以分别给我 Product_id 为“1”和“5”的产品，如下所示：

```
 Household Products|
                    |-Crystal
                             |-Lid 301 (product_id=1)
                             |-Balck Lid 201 (product_id=5)

                    |-Uni
                             |-Lid 301 (product_id=1)

                    |-Eden
                             |-Garden Tub

         Kitchenware|
                    |-Casa
                          |-Casa Basket silver

    Laundry Products|
                    |-Casa
                            |-Casa Basket Ice White
                    |  
                    |-Laundry
                            |-Casa Basket Ice White 
```

谁能指导我如何从数据库中检索记录以及我是编程新手需要做什么？如果有人能在这方面帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:23:06.397

为了根据给定的 WebCategory 输入 = 'XYZ' 获得不同的产品范围，您可以使用以下命令 - 不要被 numberstable 吓倒，它只是一个有用的表，其中包含每行从 1 开始的整数值递增的行。 . 最多 N，其中 N 是 ProductRange 列中的最大字符数。这些可以手工制作，也可以使用特殊的插入/选择查询，如此处找到的查询： [http ://www.experts-exchange.com/Database/MySQL/A_3573-A-MySQL-Tidbit-Quick-Numbers-Table-生成.html](http://www.experts-exchange.com/Database/MySQL/A_3573-A-MySQL-Tidbit-Quick-Numbers-Table-Generation.html)

```
SELECT DISTINCT  
SUBSTRING(ProductRange FROM number FOR LOCATE(';', ProductRange, number) - number) AS ProductRange  
FROM (  
    SELECT ProductRange, CASE number WHEN 1 THEN 1 ELSE number + 1 END number  
    FROM (  
        SELECT mydatabasetable.ProductRange, numberstable.number  
        FROM mydatabasetable  
        INNER JOIN numberstable  
        ON numberstable.number >= 1  
        AND numberstable.number <= CHAR_LENGTH(mydatabasetable.ProductRange)  
        WHERE WebCategory = 'XYZ'  
    ) TT  
    WHERE number = 1 OR (number + 1) <= CHAR_LENGTH(ProductRange)  
) TT  
WHERE SUBSTRING(ProductRange FROM number FOR 1) = ';'  
OR numberstable.number = 1; 
```

为了为您的网站检索包含所有值 WebCategory、ProductRange 和 Product 的结果集，您可以使用从上述查询派生的以下稍作修改的版本。为了让结果一开始看起来更有意义，我添加了一个 ORDER BY 子句，以使所有相同类别、相同产品范围的产品一个接一个地保持顺序。这可能需要也可能不需要，因为您可能更喜欢在应用程序/服务器脚本代码中这样做。在这种情况下，您可以删除 ORDER BY 子句而不会造成任何伤害。

```
SELECT WebCategory,  
SUBSTRING(  
    ProductRange  
    FROM number  
    FOR LOCATE(';', ProductRange, number) - number  
) AS ProductRange,  
Product  
FROM (  
    SELECT WebCategory, ProductRange, Product,  
    CASE number  
    WHEN 1 THEN 1  
    ELSE number + 1  
    END number  
    FROM (  
        SELECT WebCategory, ProductRange, Product, numberstable.number  
        FROM mydatabasetable  
        INNER JOIN numberstable  
        ON numberstable.number >= 1  
        AND numberstable.number <= CHAR_LENGTH(ProductRange)  
    ) TT  
    WHERE number = 1 OR (number + 1) <= CHAR_LENGTH(ProductRange)  
) TT  
WHERE SUBSTRING(ProductRange FROM number FOR 1) = ';'  
OR numberstable.number = 1  
ORDER BY WebCategory, ProductRange, Product 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:45:02.580

您可能想要在查询中执行 GROUP BY 子句，如果详细数据位于不同的表中，则可能执行 JOIN。如果我理解正确，它看起来像这样。

```
SELECT T.WebCategory, T.ProductRange, T2.Product FROM table T 
INNER JOIN table2 T2 ON T2.ProductRange = T.ProductRange
WHERE T.WebCategory = 'Household products'
GROUP BY T.WebCategory, T.ProductRange, T2.Product 
```

如果没有要测试的数据库设置，很难测试我的查询，但类似上面的内容应该返回您正在寻找的内容。您当然需要根据第二个表中的实际名称重命名列。总的来说，如果我正确理解了这个问题，这应该会让你开始。

# java - if-else 在 for-each 循环中

> ID：13551132
> 
> 赞同：1
> 
> 时间：2012-11-25T12:44:32.397
> 
> 标签：java, loops, if-statement, foreach

我是编程新手。我有这段代码：

```
public void findFilm ( String nameofFilm ) {  
   int index = -1;
   int i = 0;
   for( Film aFilm : list ) {  
      if( aFilm.gettitle().equals( nameofFilm )) {
         index = i;
         i++;
         break ;
      } 
   }
   if( index >= 0 ) {
      aFilm.print();
   }
   else {
      System.out.println(
         "The film " + nameofFilm + " does not belong to the collection" );
      } 
   } 
```

更具体地说，我想搜索列表并查找它是否包含与我插入的名称相同的电影。有任何想法吗 ？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:50:23.687

`aFilm`仅在 for 循环中是本地的，您需要在 for 循环中打印它。

```
public void findFilm ( String nameofFilm ) {  
   for( Film aFilm : list ) {  
      if( aFilm.gettitle().equals(nameofFilm) ) {
         aFilm.print();
         return;
      } 
   }
   System.out.println(
      "The film " + nameofFilm + " does not belong to the collection");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T12:52:15.817

该`aFilm`变量在 for 循环中定义。因此，它的范围仅限于循环，并且变量不能在循环之外使用。你可以这样重写循环：

```
Film foundFilm = null;
for (Film aFilm : films) {
    if (aFilm.getTitle().equals(nameOfFilm)) {
        foundFilm = aFilm;
        break;
    }
}
if (foundFilm == null) {
    ...
}
else {
    ...
} 
```

不需要任何索引或递增计数器。

而且，为了使代码更简洁，您可以将第一部分提取到它自己的方法中，然后像这样重写它：

```
Film foundFilm = findFilmByTitle(films, filmTitle);
if (foundFilm == null) {
    ...
}
else {
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T13:13:51.560

您可以选择一种功能方法，例如通过[Guava](http://code.google.com/p/guava-libraries/)：

```
public boolean containsFilm(List<Film> list, final String nameOfFilm) {
    Film film = Iterables.find(list, new Predicate<Film>() {
        @Override
        public boolean apply(Film film) {
            return film.getTitle().equals(nameOfFilm);
        }
    }, null);
    return film != null;
} 
```

此外，我建议防御性地检查`null`（电影、标题等）。我已经离开检查以保持示例简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T12:53:15.343

使用像地图这样的数据索引：

```
SortedMap< String, Film > filmsByTitle = new TreeMap<>();
...
if( ! filmsByTitle.contains( newFilm.getTitle()) {
   filmsByTitle.put( newFilm.getTitle(), newFilm );
} 
```

# windows-phone-7 - Windows Phone 上的 RestSharp 没有响应设置 cookie

> ID：13551133
> 
> 赞同：3
> 
> 时间：2012-11-25T12:44:36.057
> 
> 标签：windows-phone-7, cookies, asp.net-web-api, restsharp

我在 Windows Phone 设备上使用 RestSharp 客户端时遇到问题。从一开始，我就在线托管了 ASP.NET Web Api 服务。我有一个请求用户地址：POST：[http](http://my-service-url.com/token) ://my-service-url.com/token ，我在其中发送电子邮件和密码作为正文参数，并在响应中获得 201 状态代码和 cookie。当我在提琴手中这样做时，一切正常。我还对使用 RestSharp 的 API 进行了功能测试，该测试也正常工作：

```
[Given(@"I fill email and password with correct data and I click log in button")]
public void GivenIFillEmailAndPasswordWithCorrectDataAndIClickLogInButton()
{
        //Delete user if he exists
        _testUserHelper.DeleteTestUser(TestEmail);

        //Create new activated user
        Assert.IsTrue(_testUserHelper.CreateTestUser(TestEmail, TestPassword));

        //Prepare client
        var client = new RestClient(CarRentalsConstants.HostAddress);
        var restRequest = new RestRequest("api/token", Method.POST) { RequestFormat = DataFormat.Json };

        //Add parameters to request
        restRequest.AddBody(new { Email = TestEmail, Password = TestPassword });

        //Perform request
        _response = client.Execute(restRequest);
    }

    [When(@"the log in login process finishes")]
    public void WhenTheLogInLoginProcessFinishes()
    {
        Assert.AreEqual(HttpStatusCode.Created, _response.StatusCode, _response.Content);
        Assert.IsNotNull(_response.Cookies.SingleOrDefault(q => q.Name == ".ASPXAUTH"););
    } 
```

上面的一个可以正常工作，并且 cookie 在响应对象中。

现在我尝试在 Windows Phone 上执行的操作如下所示：

```
var restRequest = new RestRequest("token", Method.POST) {RequestFormat = DataFormat.Json};
restRequest.AddBody(new {Email = email, Password = password});
myWebClient.ExecuteAsync(restRequest, (restResponse, handle) =>
{
    switch (restResponse.StatusCode)
    {
        case HttpStatusCode.Created:
        {
            var cookie = restResponse.Cookies.SingleOrDefault(q => q.Name == ".ASPXAUTH");
            successLogicDelegate(cookie);
        }
        break;
        case HttpStatusCode.BadRequest:
        {
            HandleBadRequest(restResponse.Content, failureLogicDelegate);
        }
        break;
        default:
        msgBox.Show(StringResources.ServerConnectionError);
        failureLogicDelegate(null);
        break;
   }
}); 
```

在这种情况下，响应返回“已创建”状态代码，但 cookie 随后设置为 null。我不知道这里发生了什么，但我相当肯定服务器正在发送这个 cookie，那么它在哪里丢失了？

任何帮助将不胜感激。

# git - 在 nodester 上部署应用程序

> ID：13551135
> 
> 赞同：1
> 
> 时间：2012-11-25T12:44:57.663
> 
> 标签：git, node.js, nodester

我快疯了 :( 我想用 windows7 为 nodester 设置一个应用程序。我按照[http://nodester.com/help上的说明进行操作](http://nodester.com/help)

起初我设置了 git，安装了 git，生成了一个 ssh-key 并将其设置到我的个人资料中。一切都按照描述中的说明进行。ssh -T git@github.com 也可以正常工作。我已经用 git shell 完成了所有这些步骤。

现在我想使用 powershell 将我的应用程序推送到 nodester。

```
npm install nodester-cli -g - worked
nodester user setup <> <>   - worked
 nodester info verifying credentials
 nodester info user verified..
 nodester warn No key file found, encrypt is not going to be strong.
 nodester info writing user data to config
  and a file was .nodester was created in my directory

nodester user setkey        - does not work
 nodester ERROR sshkey was not found: .ssh\id_rsa.pub
 nodester not ok! 
```

也许原因是，密钥在 C:\Users\ME\ .ssh\id_rsa.pub ？我怎样才能改变路径？

现在我做了以下事情：

```
nodester app create <>
nodester app info <>
git init                 - worked
git add .                - worked
git commit -m "init"     - worked
git remote add nodester <key from nodester app info>
 everything went fine until now
git push nodester master - does not work
 Nodester!
 Connection closed by 50.16.203.53
 fatal: Could not read from remote repository.

 Please make sure you have the correct access rights
 and the repository exists. 
```

有人可以帮我找到解决方案吗？

# java - Log4j2 保存文件（使用 RollingFile appender）

> ID：13551137
> 
> 赞同：6
> 
> 时间：2012-11-25T12:45:32.193
> 
> 标签：java, rollingfileappender, log4j2

我正在尝试 log4j2 为我正在开发的系统创建日志文件，我已按照他们[网站](http://logging.apache.org/log4j/2.x/manual/configuration.html)上的说明进行操作，运行它时没有发生错误，但日志没有保存在我设置的位置（例如。“ D:\logs\app.log")。

**这是我的 log4j.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration status="OFF">
  <appenders>
    <RollingFile name="MyRollingFile" fileName="D:/logs/app.log"
                 filePattern="logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz">
      <PatternLayout>
        <pattern>%d %p %C{1.} [%t] %m%n</pattern>
      </PatternLayout>
      <Policies>
        <TimeBasedTriggeringPolicy />
        <SizeBasedTriggeringPolicy size="250 MB"/>
      </Policies>
      <DefaultRolloverStrategy max="20"/>
    </RollingFile>
    <Console name="Console" target="SYSTEM_OUT">
      <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </Console>
  </appenders>
  <loggers>
    <logger name="Log_RollingFile" level="TRACE" additivity="false">
      <appender-ref ref="MyRollingFile"/>
    </logger>
    <root level="ERROR">
      <appender-ref ref="Console"/>
    </root>
  </loggers>
</configuration> 
```

**我试过了 ：**

*   删除 app.log 以查看我的配置 (D:\logs\app.log) 是否有效。当我运行应用程序时，它会创建 app.log，所以我认为这意味着它可以看到配置，唯一的事情是它没有保存我在 java 应用程序中所做的 log.info
*   将根级别更改为“TRACE”，它会打印 log.info。

***[编辑：]***

**我的类路径中也有这些库**

*   log4j-api-2.0-beta3.jar
*   log4j-core-2.0-beta3.jar

Am I missing something on RollingFile configuration or a library (maybe)?

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T13:00:07.930

Your logger name is incorrect.

As explained in the configuration instructions you linked to, the logger should be named according to the package/classes you wish to capture logging for.

In their example the logger named `com.foo.Bar` would log everything from the `Bar` class in package `com.foo` with `TRACE` level.

# jquery - 尽管我设置正确，但 Jcarousel 根本不工作

> ID：13551138
> 
> 赞同：0
> 
> 时间：2012-11-25T12:46:09.313
> 
> 标签：jquery, jcarousel

我按照说明使 jcarousel 工作！但它根本不起作用。我希望能够单击这两张图片并让它们滑动......顺便说一下，我正在我的桌面上本地离线测试它。

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="css/madscore.css">
<link rel="stylesheet" type="text/css" href="css/skins/tango/skin.css" />
<script type="text/javascript" src="javascript/jquery.jcarousel.js"></script>
<script type="text/javascript" src="javascript/jquery.jcarousel.min.js"></script>
<script type="text/javascript" src="javascript/jquery-1.4.2.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery('#carousel').jcarousel({
        // Configuration goes here
    });
});
</script>
</head>
<body>

<div class="sliding-panel">
<div id="carousel">
<ul>
<li> <img src="cube.jpg" /> </li>
<li> <img src="cube.jpg" /></li>
</ul>
</div>
</div>
</body>
</html> 
```

下面是文件 madscore.css 中 id carousel 的 CSS

```
sliding-panel
{
position:absolute;
top:290;
left:300;
}

#carousel
 {
 width:5000;
 }

 #carousel ul
 {
 list-style:none;
 width:5000;
 margin:0;
 padding:0;
 position:relative;
 }

 #carousel li
 {
 display:inline;
 float:left;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:47:39.997

您必须先加载 jQuery，然后再加载任何需要 jQuery 的插件。您还引用了 jcarousel 两次（缩小和正常）。话虽如此，我们最终会得到这个

```
<script type="text/javascript" src="javascript/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="javascript/jquery.jcarousel.min.js"></script> 
```

# websocket - 如何让 websocket 客户端等待服务器正在运行？

> ID：13551140
> 
> 赞同：3
> 
> 时间：2012-11-25T12:46:28.677
> 
> 标签：websocket, go

我想创建一个等待服务器运行的 websocket 客户端。如果连接被服务器关闭，它应该重新连接。

我尝试的方法不起作用，我的代码退出并出现运行时错误：

`panic: runtime error: invalid memory address or nil pointer dereference`

```
func run() {
  origin := "http://localhost:8080/"
  url := "ws://localhost:8080/ws"

  ws, err := websocket.Dial(url, "", origin)

  if err != nil {
      fmt.Println("Connection fails, is being re-connection")
      main()
  }

  if _, err := ws.Write([]byte("something")); err != nil {
    log.Fatal(err)
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T16:56:29.297

您的示例看起来像一个代码片段。在没有看到所有代码的情况下，很难说出为什么会出现该错误。正如您在帖子的评论中指出的那样，您不能从代码中再次调用 main() ，并且包括恐慌报告中的行号也会有所帮助。

通常将您的程序最小化到任何人都可以运行并重现错误的最小情况是获得帮助的最快方法。我以这种方式为你重建了你的。希望您可以使用它来修复您自己的代码。

```
package main

import (
    "websocket"
    "fmt"
    "log"
    "time"
    )

func main() {
    origin := "http://localhost:8080/"
    url := "ws://localhost:8080/ws"

    var err error
    var ws *websocket.Conn
    for {
        ws, err = websocket.Dial(url, "", origin)
        if err != nil {
            fmt.Println("Connection fails, is being re-connection")
            time.Sleep(1*time.Second)
            continue
        }
        break
    }
    if _, err := ws.Write([]byte("something")); err != nil {
        log.Fatal(err)
    }

} 
```

要运行它，只需将其复制到系统上名为 main.go 的文件中，然后运行：

```
go run main.go 
```

# php - 警告：为 foreach() php 提供的参数无效

> ID：13551149
> 
> 赞同：2
> 
> 时间：2012-11-25T12:47:18.197
> 
> 标签：php

我在第 5 行有这个警告，警告：为 foreach() 提供的参数无效

```
if (!function_exists('get_user_online_count')) {
    function get_user_online_count($type=false,$full=true) {
        global $counter_matrix;
        $user_types=array();
        foreach($counter_matrix as $key=>$val){
            if(!isset($user_types[$val['user_type']])){
                $user_types[$val['user_type']] = 0;
            }
            $user_types[$val['user_type']] ++;
        }
        if($full){
            $print = '';
            while(count($user_types)){
                $user_type = key($user_types);
                $user_count = array_shift($user_types);
                if($type && $user_type != $type)continue;
                if($print!=''){
                    if(count($user_types))$print .= ', ';
                    else $print .= ' and ';
                }else{

                }
                $print .= $user_count . ' ' . $user_type . (($user_count>1)?'s':'');
            }
            if(!$print){
                if($type){
                    $print = '0 '.$type.'s online';
                }else{
                    $print = '0 Users online';
                }
            }else{
                $print .= ' online';
            }
            return $print;
        }else{
            if($type){
                return (isset($user_types[$type])) ? $user_types[$type] : 0;
            }else{
                return count($counter_matrix);
            }
        }
    }
} 
```

我在这一行有警告'foreach($counter_matrix as $key=>$val){'

这里怎么了？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:49:57.770

原因是您的全局变量`$counter_matrix`不是数组。

您可以检查将其放置在您的 foreach 之前：

```
echo gettype($counter_matrix); 
```

这将告诉您变量的类型，或者您也可以使用`var_dump($counter_matrix)`which 也将打印内容。

# php - 从mysql数据库中的列创建无序列表

> ID：13551150
> 
> 赞同：0
> 
> 时间：2012-11-25T12:47:35.863
> 
> 标签：php, mysql

我有两张桌子。

表 A 列出了 playerID(PK)、名称等。

表 B 列出了 AwardID(PK)、playerID(FK)、playerOfWeek、allStar 等。

由于某些玩家可以拥有多个奖项（例如两次获得本周最佳球员 - 他们将拥有不同的 AwardID #），我如何创建一个有序列表以在相应的球员奖励列中显示值？

我首先使用函数调用

```
 function create_unordered_list($listitems) {
  echo "<ul>";
  foreach($listitems as $value) {
  echo "<li>".$value."</li>";
  }

   echo "</ul>";
  } 
```

我将列的结果存储在：

```
 $All_Star = $row['award_AllStar']; 
```

然后，我试图呼应列表：

```
 echo create_unordered_list ($All_Star); 
```

任何帮助，非常感谢。

谢谢，

肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:40:58.723

尝试`print_r($listitems)`进入函数内部并向我们展示它正在打印什么。

# mysql - 在rails或sql中检索开始日期和结束日期之间的日期在今天和十天之后的数据

> ID：13551156
> 
> 赞同：0
> 
> 时间：2012-11-25T12:48:04.607
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

我想检索开始日期和结束日期之间的日期在今天和十天之后的数据。我在 rails 中执行此操作，但即使我在 MySQL 中获取查询，我也可以将其转换为 rails 活动记录。

像这样的东西：

```
select * from users where( between users.from and users.to =  between '2012-11-25 11:52:33' and '2012-12-05 11:52:33') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:58:16.657

当 a < d 且 b > c 时，区间 (a, b) 与 (c, d) 重叠。此外，该`curdate()`函数返回当前日期（“今天”）。要计算未来十天的日期，您可以使用`+ interval 10 day`.

结合你得到的这些信息：

```
select ... where users.to > curdate() 
and users.from < curdate() + interval 10 day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:00:55.050

以下是逻辑片段而不是确切的代码。请试试。

```
select * from users 
where users.fromDate between '2012-11-25 11:52:33' and '2012-12-05 11:52:33'
and users.toDate between '2012-11-25 11:52:33' and '2012-12-05 11:52:33'; 
```

[还要检查 * SQLFIDDLE](http://sqlfiddle.com/#!2/85433/1)中的以下示例代码

**根据您的问题的改写进行编辑..**

猜你会更好，

```
where users.from between users.from and users.from + interval 10day
and users.to <= user.from + interval 10 day 
```

这意味着，你`from date`可以是任何东西（今天、昨天、一个月前、两年后……）。因此，您`to-date`将根据上述任何 10 天间隔的日期进行验证`from-date`

希望这是有道理的......但再次，Joni 的回答填补了你今天的情况。:)

# vim - Vim：如何创建没有超时的自定义复合命令？

> ID：13551160
> 
> 赞同：0
> 
> 时间：2012-11-25T12:48:22.963
> 
> 标签：vim, binding, timeout, mapping, command

在 Vim 中有一些没有超时的内置复合命令，例如：`g`永远等待下一次击键。我想创建我的自定义复合绑定以使其行为类似。但是，最好不要影响其他绑定（我暗示在`set notimeout`这里使用设置的可能性）。如果对于特定绑定无法实现，那么我想我必须回到`set notimeout`设置。那么有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T13:06:54.873

如果您`showcmd`在等待下一个字符时不工作并且光标位于右下角并没有问题，请使用`getchar()`：

```
nnoremap <Plug>PluginAction-a do-something-here-for-key-a
function s:Getchar()
    let char=getchar()
    if type(char)==type(0)
        return nr2char(char)
    endif
    return char
endfunction
nmap <expr> \g "<Plug>PluginAction-".<SID>Getchar() 
```

.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T13:11:19.593

只要与内置命令没有重叠，您就可以只创建到复合映射的第一个键的映射，并使用复合映射的所有后续键`getchar()`（无限期等待键），然后调度到基于输入键的完整序列的相应处理程序。

这当然不如直接映射那么舒服，但应该可以解决问题。虽然我真的会认真思考一个好的价值是否`'timeoutlen'`还没有解决你的问题；至少我从来没有认为这是一个问题。

# c++ - 我怎样才能创建这个 int 值并处理它？

> ID：13551168
> 
> 赞同：0
> 
> 时间：2012-11-25T12:49:43.437
> 
> 标签：c++, objective-c, c

例如，我有这些`int`s 值。

```
int map1[10][10] = //;
int map2[10][10] = //;
int map3[10][10] = //;
int map4[10][10] = //;
int map5[10][10] = //;

for (int i = 1 ; i < 6 ; i++)
map{i}[2][2] = 3; 
```

上面的代码只是为了说明/理解，我知道这是错误的。如何选择/访问我`int`的 s ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T12:51:26.833

您正在声明一个二维数组或一个用整数填充的数组数组`int map5[10][10]`，因此要访问这些值，您需要使用此语法，例如`map5[0][1]`引用第一行中的第二个元素。

__________________________________![在此处输入图像描述](../Images/78db57fee69d16e6012cb587aec023e8.png)

________________________________________![在此处输入图像描述](../Images/db8222ea9f02d5aa93c9fb7f5aa99203.png)

如果您想轻松使用不同的数组，请使用多下标数组或 3D 数组，但还有很多其他方法。

```
int map[5][10][10] = //;

for ( int i = 0; i < 5; i++ )
    map[ i ][ 2 ][ 2 ] = 3; 
```

# c# - 战斗的数学方程式

> ID：13551172
> 
> 赞同：3
> 
> 时间：2012-11-25T12:49:59.440
> 
> 标签：c#, algorithm, equation

我有以下战斗代码，但用户将赢得大约 99.9% 的时间（用 5000 个随机循环测试）

我有以下影响战斗的变量

实力 | 防御| 灵巧| 损坏 | 传送门难度（总是 + 1 停止 * 0）| 危急

这是我到目前为止所拥有的

```
//player variable 
//(int) player.itemDamage = 20
//(int) player.itemStr = 2
//(int) player.itemDex = 4

            int defense = (int)Math.Round((((portal + 1) * ((rand.NextDouble() + 0.5))) + 5) / 2, 0);
            int damage = (int)Math.Round((((portal + 1) * ((rand.NextDouble() + 0.5))) + player.itemDamage), 0);
            int str = (int)Math.Round((((portal + 1) * ((rand.NextDouble() + 0.5))) + player.itemStr), 0);
            int dex = (int)Math.Round((((portal + 1) * ((rand.NextDouble() + 0.5))) + player.itemDex), 0);
while(true)
{
for (int i = 0; i < 10; i++)
                {
                    critical += rand.NextDouble();
                }
                eHP -= (int)Math.Round((((player.itemDamage + player.itemStr) - defense) * critical) / 2, 0);
                critical = 1;

                for (int i = 0; i < 10; i++)
                {
                    critical += rand.NextDouble();
                }
                HP -= (int)Math.Round((((damage + str) - 5) * critical) / 2, 0);

                if (eHP <= 0)
                {
                    return;
                }
else if (HP <= 0)
                {
                    return;
                }
                } 
```

我可以在以下代码中进行哪些更改以让用户（HP）赢得 70% 的时间，我可以得到一些建议吗？我的算法很糟糕非常有趣的战斗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:10:32.310

```
if (rand.next(10) > 7) {
    //user wins
} else {
    //user loses
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T13:42:40.377

严肃地说，根据您使用代码处理它的方式，您为什么会遇到麻烦是可以理解的。您应该将其视为数学函数。

从一组输入到输出创建一个[纯函数。](http://en.wikipedia.org/wiki/Pure_function) 在这个函数中不应该有任何用法。如果您需要随机输入，请将 then 传递给函数。在不覆盖现有变量的情况下先尝试这样做（不要使用/ ）。对于每个,应该总是产生相同的输出。如果你这样做，使用数学来解决缺失值应该很容易。`f``(x, y, ..., z)``boolean``rand``+=``-=``(x, y, z)``f(x, y, z)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T16:42:37.850

正如 drstevens 所说，您的实现最好拆分成更小的纯函数。

特别是，损失的生命值数量似乎与 的值成正比`critical`。您提供的代码没有显示`critical`循环开始时的值，但在第一次迭代后，减少“敌人”生命值时的值将比在前一次迭代中减少“用户”生命值时高约 5，因为在向其添加十个随机数之前，您不会将其设置为 1。至于`critical`用户一般在11左右，敌人在6左右，则需要强敌才能获胜（例如，`defence`大于用户力量和物品伤害的敌人，因此击中他们会获得生命值！）。

如果您编写了一个纯函数来计算其中一个`critical`或要减去的命中点数，则不会发生此错误。

# jquery - jQuery 元素在 dblclick/blur 上跳跃

> ID：13551176
> 
> 赞同：1
> 
> 时间：2012-11-25T12:50:13.603
> 
> 标签：jquery, element

我制作了以下代码：

[http://jsfiddle.net/3Zxx9/](http://jsfiddle.net/3Zxx9/)

HTML：

```
<div class="question">
    <div class="questionLabel">
        <span class="questionTitle">How old are you?</span>
        <span class="hideCollapseQuestion">x</span>
    </div>
    <div class="questionChoices">
        <div class="questionChoice">
            <div class="questionLetter">A</div>
            <div class="questionText">Over 3</div>
        </div>
        <div class="questionChoice">
            <div class="questionLetter">A</div>
            <div class="questionText">Under 69</div>
        </div>
    </div>
</div>
<div class="question">
    <div class="questionLabel">
        <span class="questionTitle">Wat is your name?</span>
        <span class="hideCollapseQuestion">x</span>
    </div>
    <div class="questionChoices">
        <div class="questionChoice">
            <div class="questionLetter">A</div>
            <div class="questionText">Ahmed</div>
        </div>
        <div class="questionChoice">
            <div class="questionLetter">A</div>
            <div class="questionText">John</div>
        </div>
    </div>
</div>​ 
```

CSS：

```
.question {
    background: #ccc;
    width: 100%;
    display: block;
}

.questionTitle {
    font-size: 20px;
    padding: 2px;
}

.questionChoices {
    padding-left: 20px;
}

.questionChoice {
    display: table;
    padding: 2px;
}

.questionChoice > div {
    display: table-cell;
}

.questionLetter {
    font-size: 18px;
    font-weight: bold;
    color: white;
    padding: 5px;
    background: #1b5e30;
    -webkit-border-radius: 8px;
    border-radius: 8px;
}

.questionText {
    padding-left: 10px;
}

.hideCollapseQuestion {
    float: right;
}​ 
```

JS：

```
$(".hideCollapseQuestion").each(function()
{
    $span = $(this);
    $(this).click(function()
    {
        var $questionChoices = $(this).parent().parent().children(".questionChoices");

        if ($questionChoices.css("display") === "none")
            $questionChoices.fadeIn();
        else
            $questionChoices.fadeOut();
    });
});

$(".questionTitle").each(function()
{
    $(this).dblclick(function()
    {
        onQuestionTitleChange($(this));
    });
});

function onQuestionTitleChange($title)
{
    $currentTitle = $title.text();
    $newInputField = $('<input type="text" value="' + $currentTitle + '" />');
    $title.replaceWith($newInputField);
    $newInputField.focus();

    $newInputField.blur(function()
    {
        $oldSpan = $('<span class="questionTitle">' + $newInputField.val() + '</span>');
        $newInputField.replaceWith($oldSpan);

        $oldSpan.dblclick(function()
        {
            onQuestionTitleChange($oldSpan);    
        });
    });
}​ 
```

我的目标是在双击时使问题标题可编辑。一开始一切都很好，但是例如。如果您编辑第一个问题，然后编辑第二个问题，如果您想再次编辑第一个问题，它将用输入替换第二个跨度[不是预期的第一个]。

请注意，我不想为此使用现成的插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:12:32.493

只需在最后几行执行以下操作：

代替

```
$oldSpan.dblclick(function()
        {
            onQuestionTitleChange($oldSpan);    
        }); 
```

和

```
$oldSpan.dblclick(function()
                        {
                            onQuestionTitleChange($(this));    
                        }); 
```

查看工作示例：http: [//jsfiddle.net/saidbakr/3Zxx9/4/](http://jsfiddle.net/saidbakr/3Zxx9/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T13:08:05.480

您正在替换已设置 dbl-click 事件的 Question-Title。没关系，但最好是正确使用 jQuery 的 '.on' 函数：

```
$(".question").on('dblclick', '.questionTitle', function()
{
    onQuestionTitleChange($(this));
}); 
```

然后您不必再向下重置事件处理程序。
**[工作示例](http://jsfiddle.net/h8PkF/1/)**

我还建议您只更改字段的可见性，而不是一遍又一遍地重新创建它们...

# c# - 文本框无法从 findControl 中获取文本属性

> ID：13551177
> 
> 赞同：0
> 
> 时间：2012-11-25T12:50:15.257
> 
> 标签：c#, asp.net, textbox

我在 ASP 中使用 CreateUserWizardControl，并希望将注册表单中的一些数据写入我自己的表中。我想在创建用户的那一刻这样做。

当我调试时，这个问题似乎是在这一行中，我在之前的行中声明的文本框 t 没有获取 UserName 文本框。它确实找到了一些东西，因为它不为空，但 t 的文本属性是一个空字符串：

```
t = (TextBox)(this.CreateUserWizard1.FindControl("UserName")); 
```

在下一行抛出异常：“对象引用未设置为对象的实例。”

```
o.organisation_name = t.Text; 
```

以下是我的完整代码隐藏文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Security;

public partial class registreer : System.Web.UI.Page
{

protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
{
    try
    {
        BLLorganisation BLLo = new BLLorganisation();
        Organisation o = new Organisation();
        TextBox t = new TextBox();
        t = (TextBox)(this.CreateUserWizard1.FindControl("UserName"));
        o.organisation_name = t.Text;
        o.fk_user_id = (Guid)(Membership.GetUser(CreateUserWizard1.UserName).ProviderUserKey);
        BLLo.insertOneOrganisation(o);
    }
    catch (Exception ex)
    {
        feedback.InnerHtml = ex.Message;
        feedback.Style.Add("display", "block");
    }
}
} 
```

这是我对标记的控制：

```
<asp:CreateUserWizard ID="CreateUserWizard1" runat="server" 
            oncreateduser="CreateUserWizard1_CreatedUser">
            <WizardSteps>
                <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server" 
                    Title="Registreer uw organisatie">
                    <ContentTemplate>
                        <table>
                            <tr>
                                <td align="center" colspan="2">
                                    <h1>Registreer uw organisatie</h1></td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">Naam van de organisatie:</asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox ID="UserName" runat="server"></asp:TextBox>
                                    <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" 
                                        ControlToValidate="UserName" ErrorMessage="Vul de naam van uw organisatie in." 
                                        ToolTip="Vul de naam van uw organisatie in." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                                </td>
                            </tr> 
```

有谁知道出了什么问题？如果您需要查看更多代码，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:14:15.023

```
TextBox t = (TextBox)  CreateUserWizard1.ContentTemplateContainer.FindControl("UserName");
if(t!=null)
   o.organisation_name = t.Text; 
```

# css - CSS垂直对齐DIV到中间

> ID：13551185
> 
> 赞同：1
> 
> 时间：2012-11-25T12:51:38.867
> 
> 标签：css, css-position, vertical-alignment

当我们不知道容器的高度时，我试图将 div 元素水平和垂直放置在容器 div 的中心。

我已经通过绝对定位设置了容器元素以适应文档的整个高度和宽度，但无法获得垂直对齐。

```
.ui .chv {
  text-align: center; 
  position: absolute; 
  top: 60px;
  bottom: 50px; 
  left: 20px;
  right: 20px; 
  display: block;
  margin: 0; 
  height: auto;
  background: green; 
  text-align: center;
  vertical-align: middle;
} 
```

**[现场演示](http://jsfiddle.net/WLAtk/)**

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:10:44.783

**如果 div 具有display:table-cell**样式，则垂直对齐：中间将起作用。带有“display:table-cell”的 div 应该有一个带有**display:table的父 div**

将以下html放入`<div class="chv"></div>`

```
<div class="table full-width full-height">        
            <div class="table-cell align-middle">
                TEST
            </div>
 </div> 
```

**所以最终的标记将是这样的**

```
<div align="center" class="ui">
    <div class="chv">

        <div class="table full-width full-height">        
            <div class="table-cell align-middle">
                TEST
            </div>
        </div>    

    </div>    
</div>​ 
```

在[jsfiddle中看到这个](http://jsfiddle.net/WLAtk/32/)

我添加了 .full-width、.full-height 类来设置宽度和高度 100%。

# html - 尝试在 VB.NET 中使用 iMsg 将 HTML 文件用作我的电子邮件正文

> ID：13551187
> 
> 赞同：1
> 
> 时间：2012-11-25T12:51:42.060
> 
> 标签：html, vb.net, html-email

我已经编写了一个脚本来创建一个基于 SQL 查询的 HTML 文件……有必要通过电子邮件发送该 HTML。我们的大多数高管都使用黑莓，我想将 HTML 文件作为正文发送。我找到了一种完成这项工作的方法，方法是添加一个 WebBrowser，然后让 Web 浏览器加载文件，然后使用下面的代码发送。我面临的问题是，如果我完全自动化代码，它只会通过电子邮件发送 HTML 文档的一部分，现在如果我添加一个按钮，并使其执行电子邮件功能，它会正确发送。我在几个不同的位置添加了一个等待功能，认为这可能是在发送电子邮件之前没有完全创建 HTML 的问题。我必须让这个 100% 自动化。有没有办法可以使用 .HTMLBody 链接到存储在 C:(实际路径是 C:\Turnover.html) 上的实际 HTML 文件。

Public Sub Email() Dim strdate Dim iCfg As Object Dim iMsg As Object

```
 strdate = Date.Today.TimeOfDay

    iCfg = CreateObject("CDO.Configuration")
    iMsg = CreateObject("CDO.Message")

    With iCfg.Fields
        .Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 1
        .Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
        .Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "xxxxx.com"
        .Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
        .Item("http://schemas.microsoft.com/cdo/configuration/sendemailaddress") = """Turnover Report"" <TurnoverReports@xxxxx.com>"
        .Update()
    End With

    With iMsg
        .Configuration = iCfg
        .Subject = "Turnover Report"
        .To = "xxxxx@xxxxx.com"
        '.Cc = ""

        .HTMLBody = WebBrowserReportView.DocumentText

        .Send()
    End With

    iMsg = Nothing
    iCfg = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:41:27.977

使用以下函数读取本地 html 文件。然后设置

`TextBox2.Text = getHTML("C:\Turnover2.html")`

并且

`.HTMLBody = TextBox2.Text`

```
Private Function getHTML(ByVal address As String) As String
    Dim rt As String = ""

    Dim wRequest As WebRequest
    Dim wResponse As WebResponse

    Dim SR As StreamReader

    wrequest = WebRequest.Create(address)
    wResponse = wrequest.GetResponse
    SR = New StreamReader(wResponse.GetResponseStream)

    rt = SR.ReadToEnd
    SR.Close()

    Return rt

End Function 
```

# java - 用户定义的异常，重新调整大小

> ID：13551190
> 
> 赞同：0
> 
> 时间：2012-11-25T12:52:17.387
> 
> 标签：java, exception, event-handling, jframe, jpanel

我目前正在尝试编写使用 JFrame 和 JPanel 的程序，以便如果用户尝试将 Frame 重新调整为小于 Panel 的大小，则程序将不允许这种情况发生。我已经研究了一段时间，现在使用并让它与 ComponentListener 一起工作一点，但是我需要使用用户定义的异常对其进行编码。下面是我用于 ComponentListener 的代码。任何人都可以通过用户定义的异常给我建议吗？

```
Frame.addComponentListener(new ComponentAdapter() 
{
    public void componentResized(ComponentEvent e) 
    {
        Frame.setSize(Math.min(800,
        Frame.getWidth()),
        Math.min(350,
        Frame.getHeight()));
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:54:38.183

Swing 支持防止用户在打开 的`setMinimumSize`功能时调整大小`JFrame`。

请参阅[在 java swing 中设置窗口的最小大小限制](https://stackoverflow.com/questions/2781939/setting-minimum-size-limit-for-a-window-in-java-swing)

# c - fscanf 如何将像 20.20.2012 这样的日期导入一个变量？

> ID：13551193
> 
> 赞同：2
> 
> 时间：2012-11-25T12:52:25.583
> 
> 标签：c, decimal, scanf

```
 while (fscanf(ifp, " %d %d kl. %d %s - %s %d - %d %d\n", &round, &date, &clock, teeam,  &goals, &attendance) 
```

我可能应该知道这一点，但是第二个 %d 应该将日期导入到我的变量中，例如 20.20.2012 但我只得到前 20 个而不是其余的。

谢谢你 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T13:01:26.453

在内部，只要字符串代表一个有效的整数，它就会被读取（所以它会在遇到“.”时停止）。

您如何将日期表示为一个整数？您可以有 3 个变量并像这样读取它们：

```
fscanf(ifp, "%d.%d.%d", &day, &month, &year); 
```

顺便说一句，20/20 是一个奇怪的日期 :-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T13:06:38.800

格式说明`%d`符允许您扫描单个数值，而不是三个数字的序列。

您可以按照您期望的格式读取日期，如下所示：

```
char date_buf[11];
scanf("%10[0-9.]", date_buf); 
```

文本不会被解析为三个整数，而是存储为文本。你可以像这样把它分成一个月、一天和一年：

```
int month = atoi(&date_buf[0]);
int day = atoi(&date_buf[3]);
int year = atoi(&date_buf[6]); 
```

# android - Android源代码下载损坏？

> ID：13551194
> 
> 赞同：1
> 
> 时间：2012-11-25T12:52:32.627
> 
> 标签：android

我有一个关于 Android 源代码下载的问题。我从 Google 下载了 Android 源代码，它说源代码大小为 8.5 GB。但据我估计，我一定只下载了大约 2-3 GB 大小（大约）。我下载源代码的目录显示大小为 15 GB！并且做 repo sync 显示下载完成。

以下是更多信息：我使用命令
$ repo init -u [https://android.googlesource.com/platform/manifest下载](https://android.googlesource.com/platform/manifest)

我做错什么了？有时在下载过程中，我使用 ctrl z 暂停并使用 fg 恢复。有时网络断开连接，我不得不再次进行回购同步。那会损坏下载吗？如何检查我的下载是否正常？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:18:23.093

Git 存储库**极**不可能有损坏的文件，因为它会检查它们。所以就像@zapl 所说，如果这是您唯一的“问题”，那么您就没有问题。

Git 下载的存储库的大小与源使用的最终磁盘空间无关。

作为一种好的做法，Git 压缩文件并使用“deltas”和其他对象在本地构建文件：**因此文件不会以二进制方式传输**。

# java - 路由器中没有转发端口的Java程序

> ID：13551195
> 
> 赞同：3
> 
> 时间：2012-11-25T12:52:38.713
> 
> 标签：java, sockets

我使用套接字用java制作了应用程序。我的电脑是服务器，我的手机（安卓）是客户端。只有我想做的是将字符串从手机转发到客户端 PC。

当我配置我的路由器并打开我使用的端口时，一切正常。我不希望每次客户安装我的应用程序时都需要在路由器中打开端口。

我考虑过使用远程服务器来运行我的服务器代码。但我没有找到可以做到这一点的服务器。我不想让我的电脑成为所有客户的服务器。

所有聊天公司在没有开放端口的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T14:15:22.770

您必须研究 UPnP。这是 /most/ if not /all/ torrent 客户端用来允许外部连接的内容，而无需转发端口。聊天客户端如何做到这一点是一个不同的场景。他们使用诸如使用 UDP（带有外部服务器）的防火墙打孔之类的**黑客攻击**[http://www.h-online.com/security/features/How-Skype-Co-get-round-firewalls-747197.html](http://www.h-online.com/security/features/How-Skype-Co-get-round-firewalls-747197.html)看到这个有关 UDP 打孔的详细信息的链接。

另请参阅这篇文章[http://www.codeproject.com/Articles/13285/Using-UPnP-for-Programmatic-Port-Forwardings-and-N](http://www.codeproject.com/Articles/13285/Using-UPnP-for-Programmatic-Port-Forwardings-and-N)了解 UPnP 的用法。但这是在 C++ 中，但我想你会明白的。

编辑：http: [//4thline.org/projects/cling/](http://4thline.org/projects/cling/)我找到了这个。我认为它可以帮助你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T12:57:55.543

您必须打开端口可能是因为您的路由器防火墙:)。如果您已经打开让我们说端口 9090，那么每个客户端应用程序（Android 手机）都可以连接到它:)。当然，如果有人想在自己的电脑上安装服务器，他们可能会转发一些端口并禁用一些防火墙。如果您想要没有特殊要求的服务器，请查找 VPS。:)

# vba - 为什么下面的代码不会触发 CMD 窗口中的 dir 调用？

> ID：13551200
> 
> 赞同：0
> 
> 时间：2012-11-25T12:53:11.357
> 
> 标签：vba, excel

我正在尝试打开一个`CMD`窗口并在其中调用 dir 。

```
r = Shell("cmd.exe", vbNormalFocus)
AppActivate r
SendKeys "dir", True 'put your exe path/name here instead of dir
SendKeys "{ENTER}" 
```

它会打开`cmd.exe`，但根本不会打印`dir`或执行`dir`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:55:13.410

你为什么不简单地打电话：

```
r = Shell("cmd.exe /k dir", vbNormalFocus) 
```

此调用将为您执行 cmd 中的 dir 命令，而无需使用 SendKeys。

# c - libconfig：@include 指令的语法错误

> ID：13551203
> 
> 赞同：1
> 
> 时间：2012-11-25T12:53:16.013
> 
> 标签：c, include, libconfig

我正在尝试编写可与 libconfig 一起使用的应用程序。所以我有下一部分代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <libconfig.h>

int main(int argc, char **argv)
{
    if(argc > 1)
    {
        char *config_file_path = argv[1];
        config_t cfg;

        config_init(&cfg);
        printf("loading config: %s...\n", config_file_path);

        if (!config_read_file(&cfg, config_file_path))
        {
            fprintf(stderr, "%s:%d - %s\n", config_file_path,
                config_error_line(&cfg), config_error_text(&cfg));
            config_destroy(&cfg);
            exit(EXIT_FAILURE);
        }

        long int port_number;
        config_lookup_int(&cfg, "server_app.port", &port_number); 

        printf("port: %ld\n", port_number);

        config_destroy(&cfg);
    }
    else
    {
        fprintf(stderr, "Wrong number of arguments. Usage: %s <cfg_file>\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    return EXIT_SUCCESS;
} 
```

并为其配置文件：

服务器配置文件

```
server_app:
{
    port = 9034;
    mail_queue_dir = "mail_queue";

@include "quote.cfg"

    logs:
    {
        error_log = "logs/error.log";
    };

    connection_address = "127.0.0.1";
    max_worker_number = 10;
    number_of_pending_connections = 10;
}; 
```

报价单.cfg

```
# file: quote.cfg
quote = "dsf"; 
```

编译后，我尝试在参数中使用 server.cfg 运行 main()，但我总是在 @include 的行上收到“语法错误”。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:29:19.060

我尝试了您的配置`libconfig-1.4.9`并且它有效：

```
./cfg server.cfg 
loading config: server.cfg...
port: 9034 
```

您似乎使用的是旧版本，在解析中有错误`@include`，根据此[更改日志](http://upstream-tracker.org/changelogs/libconfig/1.4.7/changelog.html)判断，您应该升级到 libconfig-1.4.3 或更高版本：

> ----- 版本 1.4.3 ------
> 
> 2010-02-13 Mark Lindner * lib/scanner.l -**将 @include 与前面的空格匹配的错误修复**

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:28:33.230

```
@include "quote.cfg" 
```

应该

```
#include "quote.cfg" 
```

`@include`不是 C 语法的一部分。

# database - 这种访问数据库的方法是不是太浪费了？

> ID：13551205
> 
> 赞同：0
> 
> 时间：2012-11-25T12:53:28.687
> 
> 标签：database, ruby-on-rails-3, performance

我有一个用户和相关用户的关系表。

如果我这样做，`@user.related_users`我会得到一个指向用户的 user_id 列表。

在我看来，我想列出他们的名字

```
<% current_user.related_users.each do |u| %>
<%= User.find(u).name %>
<% end %> 
```

我担心它可能会使数据库过载太多，因为每次有人访问该视图时它都会从数据库中获取每个相关用户。

有没有更好的方法来做到这一点？或者就是这样，我无能为力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:58:10.550

这就是[急切加载](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)的目的。理想情况下，在您的模型中，`related_users`应该是一个关联：

```
has_many :related_users # add conditions to find the related users if necessary 
```

然后在您的控制器中，获取`@user`如下内容：

```
@user = User.includes(:related_users) 
```

这将只对所有相关用户执行 1 次查询，而不是为每个相关用户执行一次查询（所谓的 1+N 问题）。

或者，如果您不想重写模型代码，只需将所有相关用户加载到控制器中的变量中：

```
@related_user = User.where(id: current_user.related_users) 
```

并在您的视图中对其进行迭代。这将使用带有`WHERE id IN (...)`子句的单个查询获取所有相关用户。

# autotools - 通过 Makefile.am 安装预构建的第三方二进制文件

> ID：13551206
> 
> 赞同：1
> 
> 时间：2012-11-25T12:53:30.040
> 
> 标签：autotools, automake

我正在使用自动工具，并且我有一个预构建的二进制文件，我想安装它以及从源代码构建的所有其他东西。我试图将它包含在我的 Makefile.am 中

```
libexec_PROGRAMS = thirdparty/feever 
```

这里的问题是它总是想编译文件 thirdparty/feever.c - 它不存在。我还有其他文件应该以相同的方式安装，所以我更喜欢一个干净的解决方案。这样做的标准方法是什么？我被卡住了，虽然我确信一定有一个简单的技巧...... :-) 我已经尝试使用 _DATA 主，但它没有设置我需要的 exec 标志。

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:56:11.123

这听起来很违反直觉，但是您是否尝试过将其安装为脚本？

```
libexec_SCRIPTS = thirdparty/feever 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:41:36.597

你可以使用`install-exec-local`：

```
install-exec-local:
    @$(NORMAL_INSTALL)
    $(INSTALL_PROGRAM) -m 755 thirdparty/feever "$(DESTDIR)$(libexecdir)" 
```

# php - 从用户定义的开始时间到结束时间运行一行 PHP 代码，而不使用 CRON 作业

> ID：13551208
> 
> 赞同：1
> 
> 时间：2012-11-25T12:53:52.193
> 
> 标签：php, timer-jobs

我有一行代码需要从用户定义的开始时间到用户定义的结束时间执行。
问题是从头到尾的正常循环不起作用，因为 PHP 给了我一个“超出执行时间限制”的错误。
我如何在不使用 CRON 作业的情况下完成这项工作？（我需要在 Windows PC 上运行我的服务器）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:56:53.437

Windows 与否不是借口。任何平台都具有可让您执行计划任务的工具。Windows 也是如此。这是[有关在 Windows 上设置计划任务](http://www.imranulhoque.com/miscellaneous/install-php-scripts-as-cron-in-windows/)以实现与使用 cron 相同的结果的教程。

**编辑**

> 我需要在网络浏览器上执行此操作。它需要独立于平台。

你真的不能。在没有 cron 的情况下做一些**接近**cron 的唯一技巧是检查用户对您的脚本提出的**每个请求**的日期，如果时间合适，请执行一些工作。但是，如果没有人访问您的网站，那么您什么也不会开始。

其他选项是设置 cron 来向您的页面发出请求（即使用 wget、lynx、HEAD 等）。但它仍然需要像 cron 或等效的“驱动力”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:21:31.070

我解决了这个问题。使用 javascript 和 setTimeout() 函数，我向必要的 php 脚本发送了一个 GET 请求，并在延迟之后执行了该行代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T13:03:19.793

尝试更改 PHP.ini 中的“执行时间限制”

# google-chrome-extension - Chrome 扩展后台脚本总是被缓存，我该如何避免这种情况？

> ID：13551211
> 
> 赞同：4
> 
> 时间：2012-11-25T12:54:48.060
> 
> 标签：google-chrome-extension

我是 Chrome 扩展程序的新手，但我非常喜欢它。特别是调试方法：刷新扩展页面，它会重新加载我的更新。

但我最近注意到我的 background.html 中的脚本内容没有更新。

我正在使用清单 V2 并使用这种方式加载我的脚本

```
<script src="assets/js/script.js"></script> 
```

但是在我刷新扩展页面后脚本没有重新加载。我必须像这样更改我的 background.html 中的代码才能使其工作：

```
<script src="assets/js/script.js?1"></script> 
```

对此有什么建议吗？这是调试 Chrome 扩展程序的错误吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:14:38.987

您是否![在此处输入图像描述](../Images/836b0eeed47783af96620d4e2ee087ae.png)在这里使用过重新加载链接，它会刷新所有不需要使用`src="assets/js/script.js?1"`的东西。如果仍然失败，请告诉我。

# android - 如何将 android 应用程序与 ac# 桌面应用程序连接起来？

> ID：13551214
> 
> 赞同：0
> 
> 时间：2012-11-25T12:55:06.000
> 
> 标签：android, c#-4.0, networking

所以事情就是这样......我正在尝试使用android和一个远程桌面应用程序制作一个订单管理/订单接收应用程序，该应用程序将接收订单并将其发送到厨房的终端，以便厨师和厨师能够处理一张桌子的订单..

它会像这样..

每张桌子上都固定有安卓平板电脑，上面有菜单，这样它就可以像任何给顾客的菜单书一样工作，然后当他们浏览时，他们可以“发送到购物车”订单。一旦他们完成了他们的订单，他们可以点击一个按钮，然后将其发送到远程桌面服务器，该服务器将保存一份订单副本进行收据处理，然后将订单显示到厨房的终端屏幕上。

这里的问题是，我如何实际将订单发送到远程桌面应用程序以及它将如何接收？

# java - Java 并发 - 可运行 vs 线程

> ID：13551217
> 
> 赞同：0
> 
> 时间：2012-11-25T12:55:36.933
> 
> 标签：java, thread-safety

我决定面对这个叫做并发的怪物并拓宽我的线程知识，所以在我阅读 Joshua Bloch 的书之前，我决定随机编写一些代码来帮助我理解我在阅读这本书之前可能遇到的问题，希望我能来我的代码并进行更正，但后来我陷入了这个坑，我希望有人能解释一下。

我有以下内容：

```
public class Arithmetic implements Runnable {
    int number;    
    public  Arithmetic(int x){      
      this.number = number + x;
    }
    @Override
    public void run() {         
        Thread.currentThread().setName("thread-"+number +" > " + "number = "+getNumber());
        System.out.println(Thread.currentThread().getName());        
    }    
        public  int getNumber() {
        return number;
    }
    public  void setNumber(int number) {
        this.number = getNumber() + number;
    }
} 
```

然后是一个主类：

```
public class Main {  
    public static void main(String[] args) {    
      System.out.println(Thread.currentThread().getName());     
      for (int x=0; x<=5; x++){    
           Thread thread = new Thread(new Arithmetic(x));           
           thread.start();       
      }
    }
} 
```

有了这个，我得到以下输出：

```
run:
main
thread-0 > number = 0
thread-1 > number = 1
thread-2 > number = 2
thread-3 > number = 3
thread-5 > number = 5
thread-4 > number = 4 
```

**注意：5 在 4 之前**

但是后来我将我的主要课程更改为：

```
public class Main {  
    public static void main(String[] args) {    
      System.out.println(Thread.currentThread().getName());     
      for (int x=0; x<=5; x++){    
           Runnable runnable  = new Arithmetic(x);           
          runnable.run();      
      }
    }
} 
```

我得到下面的输出：

```
run:
main
thread-0 > number = 0
thread-1 > number = 1
thread-2 > number = 2
thread-3 > number = 3
thread-4 > number = 4
thread-5 > number = 5 
```

**注意：正确的顺序**

我希望两个 main(s) 都会产生不稳定的结果（如线程实现），然后我会使用一些线程安全措施，如同步访问等，但为什么 Runnable 调用就像`Arithmetic`线程安全一样？

IMO，扩展 Thread 类和实现 Runnable 之间的区别是出于解耦目的。抱歉，如果这是一个重复的问题，我似乎找不到答案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:58:20.237

`Runnables`不要启动新线程它只是和接口，所以这意味着你的第二段代码同步运行。

`Threads`是新线程，因此您可以并行运行，这就是输出乱序的原因 - 第 4 个线程的执行速度比第 5 个慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T12:58:36.917

问题是当你做

```
Thread t = new Thread(new Arithemetic())
 t.start(); 
```

线程`t`启动并执行`Arithmetic`。

在您的情况下，您正在调用`runnable.run();`，这意味着当前线程将调用您的`run()`. 它类似于调用任何其他方法。

最终，您当前的线程本身正在执行该`run`方法 5 次

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T13:03:24.900

您的 Runnables 都在主线程中执行（并且在该代码中只有一个“主”线程）。

您的线程都单独执行，java 不保证一旦启动线程将以任何特定顺序执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T12:59:54.137

因为`Runnable`它本身不在单独的线程上运行。它只是一个用于传递方法实现的接口。其中一个示例是将其传递给`Thread`构造函数（正如您在第一个示例中所做的那样）。因此，在您的第二个示例中，没有同时执行任何操作；它只是`run()`一个接一个地执行方法。

# android - 处理 CursorLoader 异常

> ID：13551219
> 
> 赞同：6
> 
> 时间：2012-11-25T12:55:49.903
> 
> 标签：android, exception-handling, android-loadermanager, android-cursorloader

我有一个 Fragment 实现 LoaderManager 并使用 CursorLoader （没什么花哨的）。我想捕获查询期间抛出的异常，但我不知道怎么做！！！有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:54:48.790

我尝试继承并实现一个监听器，然后我尝试继承并实现一个回调。就我而言，最简单且侵入性较小的解决方案似乎如下

```
public class CursorLoaderGraceful extends CursorLoader {
    public Throwable error; // holder
    public CursorLoaderGraceful(Context context) {
        super(context);
    }
    public CursorLoaderGraceful(Context context, Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {
        super(context, uri, projection, selection, selectionArgs, sortOrder);
    }
    public void OnQueryException(RuntimeException throwable) {
        throw throwable;
    }

    @Override
    public Cursor loadInBackground() {
        try {
            return (super.loadInBackground());
        } catch (Throwable t) {
            error = t; // keep it
        }
        return (null);
    }
} 
```

在片段/活动中

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    CursorLoaderGraceful loader = new CursorLoaderGraceful(this., other, params, go , here);
    // ...
    return loader;
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    //trivial code
    mAdapter.swapCursor(data);
    if (this.isResumed()) {
        this.setListShown(true);
    } else {
        this.setListShownNoAnimation(true);
    }

    //check and use
    Throwable loaderError = ((CursorLoaderGraceful)loader).error;
    if (loaderError != null) {
        //all these just to show it?!?!? :/
        Toast.makeText(this, loaderError.getMessage(), Toast.LENGTH_SHORT)
                .show();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:39:10.173

您需要从 CursorLoader 派生来执行此操作。像这样的东西：

```
class MyCursorLoader extends CursorLoader {

    public MyCursorLoader(Context context) {
         super(context)
      }

    public CursorLoader(Context context, Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {
        super(context, uri, projection, selection, selectionArgs, sortOrder);
    }

    @Override
    public Cursor loadInBackground() {

        try {
            return (super.loadInBackground);
        } catch (YourException e) {
            // Do your thing.
        }

        return (null);
    }

} 
```

您可以对其进行调整以实现错误处理。

# php - 修剪似乎不适用于 PHP

> ID：13551222
> 
> 赞同：3
> 
> 时间：2012-11-25T12:55:56.127
> 
> 标签：php

我是`trim`PHP 函数的粉丝。但是，我想我遇到了一个奇怪的障碍。我有一个名为 keys 的字符串，其中包含：“mavrick, ball, bouncing, food, easy mac”并执行这个函数

```
// note the double space before "bouncing"
$keys = "mavrick, ball,  bouncing, food,  easy mac, ";
$theKeywords = explode(", ", $keys);
foreach($theKeywords as $key){
  $key = trim($key);
}
echo $theKeywords[2]; 
```

然而在这里，输出是“弹跳”而不是“弹跳”。在这里使用的功能不`trim`正确吗？

编辑：
我的原始字符串在“反弹”之前有两个空格，由于某种原因它不想显示。我尝试用 foreach($theKeywords as &$key) 引用它，但它抛出了一个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T12:58:35.213

问题是您使用的是副本而不是原始值。改用引用：

```
$theKeywords = explode(", ", $keys);
foreach($theKeywords as &$key){
  $key = trim($key);
}
echo $theKeywords[2]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T13:04:08.687

您不会在循环中重写原始数组中的值，您可以使用 将其简化为一行`array_map`，就像这样

```
$theKeywords = array_map('trim', explode(',', $keys)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T12:59:59.533

`$key`获取值的副本，而不是实际值。要更新实际值，请在数组本身中修改它（例如，通过使用`for`循环）：

```
$theKeywords = explode(", ", $keys);
for($i = 0; $i < count($theKeywords); $i++) {
    $theKeywords[$i] = trim($theKeywords[$i]);
}
echo $theKeywords[2]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T13:18:47.063

另一种使用闭包的方法：

```
$keys = "mavrick, ball,  bouncing, food,  easy mac, ";
$theKeywords = explode(", ", $keys);
array_walk($theKeywords, function (&$item, $key) {
    $item = trim($item);
});
print $theKeywords[2]; 
```

但是，它只适用于 PHP 5.3+

# iphone - JSONKit：如何保持 JSON 字典键的顺序

> ID：13551224
> 
> 赞同：0
> 
> 时间：2012-11-25T12:56:40.327
> 
> 标签：iphone, objective-c, ios, jsonkit

我有一些 JSON 字符串，它代表来自服务器的地图（字典）。

我需要绘制这张地图，因为它是@我的 iPhone 应用程序。

我正在使用 JSONKit，它似乎使用散列函数将键插入其内部 JKDictionary....

**那么我应该发送一个优先级号码来订购钥匙吗？或者有什么方法可以让 JSONKit 保留服务器 JSON 数据的键顺序？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:20:39.143

您可以选择将`order`属性添加到字典中。并使用该属性对您的密钥进行排序。然后，您可以使用排序键枚举您的字典。[枚举KeysAndObjectsUsingBlock：](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/enumerateKeysAndObjectsWithOptions%3ausingBlock%3a)

```
// Here I suppose you have added another number property `order` for your dictionary's values
NSArray *sortedKeys = [dic keysSortedByValueUsingComparator:^(id obj1, id obj2){
    return [obj1 order] < [obj2 order];
}];

// for in will give your an ordered travel for your sortedKeys
for (id key in sortedKeys) {
    // handle your dic
    [dic objectForKey:key];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:58:11.800

字典不是有序的，但数组是有序的，因此如果您可以将 JSON 数据结构更改为数组，您应该会得到有序的结果。

```
[{'key1':'value1'},{'key2':'value2'},{'key3':'value3'}] 
```

你的数据是什么样的？

# javascript - 特定区域数据库中的 Google 地图 api 搜索标记

> ID：13551228
> 
> 赞同：4
> 
> 时间：2012-11-25T12:56:59.860
> 
> 标签：javascript, google-maps, google-maps-api-3

我已经设置了从 mysql 数据库加载数据并显示标记的谷歌地图 API。我面临的问题是，无论我在搜索位置字段中输入什么内容，所有标记都会立即显示出来...... **我只想显示搜索区域和该区域中的标记. 它不应该一次显示所有标记，而只显示搜索区域中的标记。**

我的意思是我想将地图缩放到搜索区域。目前，如果我只有一个标记地图会放大以显示这一点，但如果我有许多标记，则地图会缩小以显示所有标记。这是我正在处理的地图“http://funfeat.com/clients/gmap/gmap3.html”现在我已经将标记设置得很远，地图仍然通过缩小显示所有标记。

gmap.php 是提供来自 mysql 数据库的 xml 结果的文件。下面的代码是我用来显示地图的

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>Google Maps AJAX + mySQL/PHP Example</title>
    <script src="http://maps.googleapis.com/maps/api/js?sensor=false"
            type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[
    var map;
    var markers = [];
    var infoWindow;
    var locationSelect;

    function load() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(40, -100),
        zoom: 10,
        mapTypeId: 'roadmap',
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}
      });
      infoWindow = new google.maps.InfoWindow();

      locationSelect = document.getElementById("locationSelect");
      locationSelect.onchange = function() {
        var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
        if (markerNum != "none"){
          google.maps.event.trigger(markers[markerNum], 'click');
        }
      };
   }

   function searchLocations() {
     var address = document.getElementById("addressInput").value;
     var geocoder = new google.maps.Geocoder();
     geocoder.geocode({address: address}, function(results, status) {
       if (status == google.maps.GeocoderStatus.OK) {
        searchLocationsNear(results[0].geometry.location);
       } else {
         alert(address + ' not found');
       }
     });
   }

   function clearLocations() {
     infoWindow.close();
     for (var i = 0; i < markers.length; i++) {
       markers[i].setMap(null);
     }
     markers.length = 0;

     locationSelect.innerHTML = "";
     var option = document.createElement("option");
     option.value = "none";
     option.innerHTML = "See all results:";
     locationSelect.appendChild(option);
   }

   function searchLocationsNear(center) {
     clearLocations();

     var radius = document.getElementById('radiusSelect').value;
     var searchUrl = 'gmap.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
     downloadUrl(searchUrl, function(data) {
       var xml = parseXml(data);
       var markerNodes = xml.documentElement.getElementsByTagName("marker");
       var bounds = new google.maps.LatLngBounds();
       for (var i = 0; i < markerNodes.length; i++) {
         var name = markerNodes[i].getAttribute("name");
         var address = markerNodes[i].getAttribute("address");
         var distance = parseFloat(markerNodes[i].getAttribute("distance"));
         var latlng = new google.maps.LatLng(
              parseFloat(markerNodes[i].getAttribute("lat")),
              parseFloat(markerNodes[i].getAttribute("lng")));

         createOption(name, distance, i);
         createMarker(latlng, name, address);
         bounds.extend(latlng);
       }
       map.fitBounds(bounds);
       locationSelect.style.visibility = "visible";
       locationSelect.onchange = function() {
         var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
         google.maps.event.trigger(markers[markerNum], 'click');
       };
      });
    }

    function createMarker(latlng, name, address) {
      var html = "<b>" + name + "</b> <br/>" + address;
      var marker = new google.maps.Marker({
        map: map,
        position: latlng
      });
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
      markers.push(marker);
    }

    function createOption(name, distance, num) {
      var option = document.createElement("option");
      option.value = num;
      option.innerHTML = name + "(" + distance.toFixed(1) + ")";
      locationSelect.appendChild(option);
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request.responseText, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function parseXml(str) {
      if (window.ActiveXObject) {
        var doc = new ActiveXObject('Microsoft.XMLDOM');
        doc.loadXML(str);
        return doc;
      } else if (window.DOMParser) {
        return (new DOMParser).parseFromString(str, 'text/xml');
      }
    }

    function doNothing() {}

    //]]>
  </script>
  </head>

  <body style="margin:0px; padding:0px;" onLoad="load()">
    <div>
     <input type="text" id="addressInput" size="10"/>
    <select id="radiusSelect">
      <option value="25" selected>25mi</option>
      <option value="100">100mi</option>
      <option value="200">200mi</option>
    </select>

    <input type="button" onClick="searchLocations()" value="Search"/>
    </div>
    <div><select id="locationSelect" style="width:100%;visibility:hidden"></select></div>
    <div id="map" style="width: 100%; height: 80%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T13:46:05.827

`http://funfeat.com/clients/gmap/gmap.php?lat=47&lng=-122&radius=2`生成有效的 XML，但您的查询一定是错误的。它提取了 10 个标记，其中 9 个是正确的，但第 10 个生成`<marker name="Pakistan" address="Chowk Azam, Layyah" lat="31.008364" lng="71.224342" type="cITY"/>`的肯定不在坐标的 2 英里范围内。您的查询不应从数据库中获取最后一个标记。

由于不鼓励使用 mysql_ 函数，下面的代码使用 PDO 可以使用

```
//dependant on your setup
$host= "WWW";
$username="XXX";
$password="YYY";
$database="ZZZ";
// Get parameters from URL
$center_lat = $_GET["lat"];
$center_lng = $_GET["lng"];
$radius = $_GET["radius"];

// Start XML file, create parent node
$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node);
//Connect to database
$dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
try {
    // Prepare statement
    $stmt = $dbh->prepare("SELECT  name, lat, lng, ( 3959 * acos( cos( radians(?) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(?) ) + sin( radians(?) ) * sin( radians( lat ) ) ) ) AS distance FROM gbstn HAVING distance < ? ORDER BY distance ASC LIMIT 0 , 20");
    // Assign parameters
    $stmt->bindParam(1,$center_lat);
    $stmt->bindParam(2,$center_lng);
    $stmt->bindParam(3,$center_lat);
    $stmt->bindParam(4,$radius);
    //Execute query
    $stmt->setFetchMode(PDO::FETCH_ASSOC);
    $stmt->execute(); 
```

**编辑**添加以在未找到记录时捕获错误

```
 if ($stmt->rowCount()==0) {
    $node = $dom->createElement("marker");
    $newnode = $parnode->appendChild($node);
    $newnode->setAttribute("name", "No Records Found");
    $newnode->setAttribute("lat", $center_lat);//Sends marker to search location 
    $newnode->setAttribute("lng", $center_lng);
    $newnode->setAttribute("distance", 0);
            } 
   else { 
```

**编辑结束**

```
 // Iterate through the rows, adding XML nodes for each
    while($row = $stmt->fetch()) {
        $node = $dom->createElement("marker");
        $newnode = $parnode->appendChild($node);
        $newnode->setAttribute("name", $row['name']);
        $newnode->setAttribute("address", $row['address']);
        $newnode->setAttribute("lat", $row['lat']);
        $newnode->setAttribute("lng", $row['lng']);
        $newnode->setAttribute("distance", $row['distance']);
        }
    }
echo $dom->saveXML();

}

catch(PDOException $e) {
    echo "I'm sorry I'm afraid you can't do that.". $e->getMessage() ;// Remove or modify after testing 
    file_put_contents('PDOErrors.txt',date('[Y-m-d H:i:s]').", gmap.php, ". $e->getMessage()."\r\n", FILE_APPEND);  
 }
//Close the connection
$dbh = null; 
```

上面的查询 `HAVING distance < '%s'`部分是应该清除最后一个标记的部分。

如果在搜索中未找到任何记录并将地图发送到 lat/lng 0,0，我添加了错误捕获。在这里查看[**我的实现**](http://daviestrachan.co.uk/maps/stationmap8a.php)

# entity-framework - 实体框架 - 在多个 edmx 中拥有同一张表

> ID：13551231
> 
> 赞同：1
> 
> 时间：2012-11-25T12:57:38.840
> 
> 标签：entity-framework, entity-framework-4

我有两个 edmx 文件。
两者都包含表“applicationType”。
这意味着我有两个具有不同命名空间的对象 applicationType。当我尝试从一个查询时，
我收到以下错误 -

```
 "Schema specified is not valid. Errors: \r\nMultiple types with the name 
 'ApplicationType' exist in the EdmItemCollection in different namespaces.  
  Convention based mapping requires unique names without regard to namespace 
  in the EdmItemCollection.\r\nThe relationship   
  'myModel.FK_ApplicationAttribute_ApplicationType' was not loaded because the type 
  'myModel.ApplicationType' is not available.\r\n"} 
   System.Data.EntityException {System.Data.MetadataException} 
```

谁能建议如何查询它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:47:39.133

如果两个模型在同一个命名空间中，则这些对象必须具有不同的名称。例如：

模型 1 - 命名空间：myApp - 表：applicationType - entityName：applicationType

在您的第二个模型中，您必须使用另一个命名空间，或者另一个 entityName。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T15:34:36.513

1.  打开您的 edmx 图表之一

2.  右键单击复制的实体并重命名它

3.  保存它，构建项目

4.  使用您刚刚重命名的实体的代码可能会出现调整错误（仅更新实体名称）。

# android - 安卓网页视图；不显示具有相对路径的图像

> ID：13551234
> 
> 赞同：3
> 
> 时间：2012-11-25T12:58:06.730
> 
> 标签：android, webview

在尝试使用 webView 的 loadUrl(String url, Map additionalHttpHeaders) 方法时，我收到的响应无法显示图像。代替图像，使用问号替代。

因此，我尝试使用 Java 代码访问相同的 URL。在此过程中收到的 HTML 代码显示该标记的 src 属性使用的是相对位置。

在将相同的 HTML 代码传递给 webView 的 loadData() 方法时，我得到了与第一种情况中提到的相同的输出。

无论如何要解决这个问题？（在附加的HttpHeaders 中，我传递了授权标头）

# ios - UIPopoverController 在屏幕截图中缺少侧面图像

> ID：13551243
> 
> 赞同：3
> 
> 时间：2012-11-25T12:59:02.053
> 
> 标签：ios, core-graphics, screenshot, draw, popover

我正在尝试截取界面的屏幕截图，而我正在使用的代码缺少状态栏和 UIPopoverController 的侧面。我听说可能无法包含状态栏（这是真的吗？）但 UIPopoverController 的侧面才是我真正关心的问题。这是截图代码：

```
// Create a graphics context with the target size
// On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
// On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
CGSize imageSize = [[UIScreen mainScreen] bounds].size;
if (NULL != UIGraphicsBeginImageContextWithOptions)
    UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
else
    UIGraphicsBeginImageContext(imageSize);

CGContextRef context = UIGraphicsGetCurrentContext();

// Iterate over every window from back to front
for (UIWindow *window in [[UIApplication sharedApplication] windows]) {
    if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen]) {
        // -renderInContext: renders in the coordinate space of the layer,
        // so we must first apply the layer's geometry to the graphics context
        CGContextSaveGState(context);
        // Center the context around the window's anchor point
        CGContextTranslateCTM(context, [window center].x, [window center].y);
        // Apply the window's transform about the anchor point
        CGContextConcatCTM(context, [window transform]);
        // Offset by the portion of the bounds left of and above the anchor point
        CGContextTranslateCTM(context,
                              -[window bounds].size.width * [[window layer] anchorPoint].x,
                              -[window bounds].size.height * [[window layer] anchorPoint].y);

        // Render the layer hierarchy to the current context
        [[window layer] renderInContext:context];

        // Restore the context
        CGContextRestoreGState(context);
    }
}

// Retrieve the screenshot image
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

// rotate the image
double rotation = 0;
// rotate image based on orientation
switch ([UIApplication sharedApplication].statusBarOrientation) {
    case UIInterfaceOrientationLandscapeLeft:
        rotation = M_PI/2;
        break;
    case UIInterfaceOrientationLandscapeRight:
        rotation = -M_PI/2;
        break;
    case UIInterfaceOrientationPortraitUpsideDown:
        rotation = M_PI;
        break;
    default:
        break;
}

//  [[UIApplication sharedApplication] statusBarOrientation]
// calculate the size of the rotated view's containing box for our drawing space
UIView *rotatedViewBox = [[UIView alloc] initWithFrame:CGRectMake(0,0,image.size.width, image.size.height)];
CGAffineTransform t = CGAffineTransformMakeRotation(rotation);
rotatedViewBox.transform = t;
CGSize rotatedSize = rotatedViewBox.frame.size;

// Create the bitmap context
UIGraphicsBeginImageContext(rotatedSize);
CGContextRef bitmap = UIGraphicsGetCurrentContext();

// Move the origin to the middle of the image so we will rotate and scale around the center.
CGContextTranslateCTM(bitmap, rotatedSize.width/2, rotatedSize.height/2);

//   // Rotate the image context
CGContextRotateCTM(bitmap, rotation);

// Now, draw the rotated/scaled image into the context
CGContextScaleCTM(bitmap, 1.0, -1.0);
CGContextDrawImage(bitmap, CGRectMake(-image.size.width / 2, -image.size.height / 2, image.size.width, image.size.height), [image CGImage]);

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return newImage; 
```

我还创建了一个[示例项目](http://www.filedropper.com/popovertest)来演示这一点。![模拟器截图](../Images/fc5d7bdebe57fd07a9f902819eab1fae.png) ![代码生成的截图](../Images/0a9f1bd785860138c5f2f1dcebc97ca3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:14:55.003

该问题与 UIPopoverController 的呈现方式有关。它实际上不是 UIViewController，而是在它自己的窗口中。您需要将绘图代码更新为更像：

```
 CGContextRef context = UIGraphicsGetCurrentContext();

    // Iterate over every window from back to front
    for (UIWindow *window in [[UIApplication sharedApplication] windows])
    {
        if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
        {
            // -renderInContext: renders in the coordinate space of the layer,
            // so we must first apply the layer's geometry to the graphics context
            CGContextSaveGState(context);
            // Center the context around the window's anchor point
            CGContextTranslateCTM(context, [window center].x, [window center].y);
            // Apply the window's transform about the anchor point
            CGContextConcatCTM(context, [window transform]);
            // Offset by the portion of the bounds left of and above the anchor point
            CGContextTranslateCTM(context,
                                  -[window bounds].size.width * [[window layer] anchorPoint].x,
                                  -[window bounds].size.height * [[window layer] anchorPoint].y);

            // Render the layer hierarchy to the current context
            [[window layer] renderInContext:context];

            // Restore the context
            CGContextRestoreGState(context);
        }
    } 
```

我还没有测试过这个，所以试一试，让我知道它是怎么回事。:)

# c++ - 在 C++ 中限制向量的增长

> ID：13551247
> 
> 赞同：3
> 
> 时间：2012-11-25T12:59:16.803
> 
> 标签：c++, vector

是否可以限制`vector.max_size()`向量的增长？

如果没有，是否具有监视功能`vector.capacity()`以确保它不会超过确定的数量是可行的替代品？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T13:09:31.440

有点。您可以编写自定义分配器并将其用于 a `std::vector`（向量的第二个模板参数）。分配器需要满足[这些要求](http://en.cppreference.com/w/cpp/concept/Allocator)。然而，正确地做到这一点并不简单。而且你`vector`不会`push_back`在达到最大尺寸后忽略它，它会抛出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T13:02:49.047

并不真地。但是您可以定义自己的向量子类（或创建自己的全新向量实现），如果您真的愿意，这将允许强制执行此要求。

# .net - 为什么 CPLEX 在不同的机器上输出不同的结果？

> ID：13551248
> 
> 赞同：1
> 
> 时间：2012-11-25T12:59:16.447
> 
> 标签：.net, mathematical-optimization, cplex

当我运行使用 CPLEX 的 .NET 4 应用程序时，我在不同的机器上得到不同的输出。在我的开发机器上，CPLEX 输出一个结果（异常并停留在某个较大的值），而在所有其他机器上，结果正常。

首先，我认为它与操作系统有关，并且由于我的开发机器上同时安装了 Windows 7 x64 和 Windows 8 x64，因此我尝试在这两个系统上运行应用程序。结果是一样的——有问题。

然后我尝试在两台不同的台式机上运行，​​它工作正常。我什至在虚拟机中尝试过，在我的开发机器上使用 Windows 7 来宾，在所有这些情况下，结果都还可以。

如何解决这个问题？我该如何调试正在发生的事情？任何建议都会有所帮助。

附加信息：

*   我的开发机器是华硕 N73N 笔记本电脑，配备 Intel Core i7-2670QM CPU @ 2.20GHz、4 核、8 个逻辑处理器和 8GB RAM。
*   使用的 CPLEX：v12.4

这是我的开发机器的错误输出：

```
IBM ILOG CPLEX Optimization Studio Commercial Edition                         
Tried aggregator 1 time.
MIP Presolve eliminated 125 rows and 0 columns.
MIP Presolve modified 15000 coefficients.
Reduced MIP has 28795 rows, 14520 columns, and 965648 nonzeros.
Reduced MIP has 14520 binaries, 0 generals, 0 SOSs, and 0 indicators.
Probing time =    0.05 sec.
Tried aggregator 1 time.
Presolve time =    1.39 sec.
Found feasible solution after 1.48 sec.  Objective = 4.5736e+016
Probing time =    0.03 sec.
Clique table members: 14520.
MIP emphasis: balance optimality and feasibility.
MIP search method: dynamic search.
Parallel mode: deterministic, using up to 8 threads.
Root relaxation solution time =    2.70 sec.

        Nodes                                         Cuts/
   Node  Left     Objective  IInf  Best Integer    Best Bound    ItCnt     Gap

*     0+    0                      4.57357e+016                   1870     ---
*     0+    0                      2.93779e+016                   1870     ---
      0     0  1.54596e+015   811  2.93779e+016  1.54596e+015     1870   94.74%
*     0+    0                      5.78471e+015  1.54596e+015     2258   73.28%
      0     0  1.59388e+015   942  5.78471e+015     Cuts: 377     2258   72.45%
      0     0  1.65120e+015   813  5.78471e+015 ZeroHalf: 216     2590   71.46%
      0     0  1.67178e+015   968  5.78471e+015 ZeroHalf: 285     2857   71.10%
      0     0  1.71285e+015   957  5.78471e+015 ZeroHalf: 123     3241   70.39%
      0     0  1.73687e+015   991  5.78471e+015 ZeroHalf: 148     3642   69.97%
      0     0  1.76181e+015   997  5.78471e+015  ZeroHalf: 50     4048   69.54%
      0     0  1.77762e+015   976  5.78471e+015  ZeroHalf: 23     4344   69.27%
      0     0  1.78664e+015   977  5.78471e+015  ZeroHalf: 22     4601   69.11%
      0     0  1.80055e+015   994  5.78471e+015  ZeroHalf: 75     4943   68.87%
      0     0  1.80615e+015   993  5.78471e+015   ZeroHalf: 9     5143   68.78%
      0     0  1.81464e+015   996  5.78471e+015  ZeroHalf: 33     5440   68.63%
      0     0  1.82294e+015   991  5.78471e+015      Cuts: 27     5765   68.49%
      0     0  1.83208e+015   989  5.78471e+015      Cuts: 18     6104   68.33%
      0     0  1.84944e+015   946  5.78471e+015     Cuts: 182     6698   68.03%
      0     0  1.88828e+015   956  5.78471e+015     Cuts: 269     7432   67.36%
      0     0  1.89984e+015   971  5.78471e+015     Cuts: 118     7822   67.16%
      0     0  1.91068e+015   985  5.78471e+015      Cuts: 45     8155   66.97%
      0     0  1.92274e+015   980  5.78471e+015      Cuts: 40     8597   66.76%
      0     0  1.94969e+015   977  5.78471e+015     Cuts: 121     9295   66.30%
      0     0  1.95749e+015   970  5.78471e+015      Cuts: 69     9682   66.16%
      0     0  1.96689e+015   978  5.78471e+015      Cuts: 42    10093   66.00%
      0     0  1.97224e+015   980  5.78471e+015      Cuts: 30    10392   65.91%
      0     0  1.97649e+015   978  5.78471e+015      Cuts: 13    10622   65.83%
      0     0  1.98557e+015   976  5.78471e+015      Cuts: 50    10876   65.68%
      0     0  1.99259e+015   987  5.78471e+015      Cuts: 46    11183   65.55%
      0     0  2.00116e+015   987  5.78471e+015      Cuts: 77    11494   65.41%
      0     0  2.01149e+015   990  5.78471e+015      Cuts: 37    11921   65.23%
      0     0  2.01969e+015   976  5.78471e+015      Cuts: 60    12286   65.09%
      0     0  2.02492e+015   966  5.78471e+015      Cuts: 43    12578   65.00%
      0     0  2.03316e+015   969  5.78471e+015      Cuts: 84    12881   64.85%
      0     0  2.04175e+015   971  5.78471e+015      Cuts: 52    13174   64.70%
      0     0  2.05273e+015   964  5.78471e+015      Cuts: 68    13649   64.51%
      0     0  2.05591e+015   966  5.78471e+015      Cuts: 23    13902   64.46%
      0     0  2.06170e+015   964  5.78471e+015      Cuts: 43    14235   64.36%
      0     0  2.06574e+015   971  5.78471e+015      Cuts: 46    14481   64.29%
      0     0  2.07500e+015   952  5.78471e+015      Cuts: 47    14890   64.13%
      0     0  2.08393e+015   941  5.78471e+015      Cuts: 53    15280   63.98%
      0     0  2.09065e+015   948  5.78471e+015      Cuts: 36    15601   63.86%
      0     0  2.09803e+015   955  5.78471e+015     Cuts: 104    16015   63.73%
      0     0  2.10316e+015   944  5.78471e+015      Cuts: 63    16384   63.64%
      0     0  2.11460e+015   948  5.78471e+015      Cuts: 76    16846   63.45%
      0     0  2.12942e+015   956  5.78471e+015      Cuts: 97    17366   63.19%
      0     0  2.16151e+015   931  5.78471e+015     Cuts: 327    18262   62.63%
      0     0  2.17502e+015   930  5.78471e+015     Cuts: 120    18714   62.40%
      0     0  2.27173e+015   884  5.78471e+015     Cuts: 385    20411   60.73%
      0     0  2.29553e+015   899  5.78471e+015     Cuts: 134    21117   60.32%
      0     0  2.30977e+015   920  5.78471e+015      Cuts: 71    21621   60.07%
      0     0  2.31979e+015   909  5.78471e+015      Cuts: 38    22064   59.90%
      0     0  2.32293e+015   911  5.78471e+015      Cuts: 33    22333   59.84%
      0     0  2.32804e+015   908  5.78471e+015      Cuts: 60    22682   59.76%
      0     0  2.33324e+015   906  5.78471e+015      Cuts: 43    22991   59.67%
      0     0  2.34725e+015   909  5.78471e+015      Cuts: 22    23332   59.42%
      0     0  2.35327e+015   903  5.78471e+015      Cuts: 72    23571   59.32%
      0     0  2.36485e+015   889  5.78471e+015      Cuts: 61    23938   59.12%
      0     0  2.37310e+015   884  5.78471e+015      Cuts: 45    24319   58.98%
      0     0  2.39039e+015   885  5.78471e+015      Cuts: 79    24958   58.68%
      0     0  2.39677e+015   901  5.78471e+015      Cuts: 56    25186   58.57%
      0     0  2.40149e+015   885  5.78471e+015      Cuts: 41    25442   58.49%
      0     0  2.40325e+015   883  5.78471e+015      Cuts: 60    25617   58.46%
      0     0  2.41812e+015   894  5.78471e+015      Cuts: 84    26070   58.20%
      0     0  2.42607e+015   903  5.78471e+015      Cuts: 68    26474   58.06%
      0     0  2.52725e+015   844  5.78471e+015     Cuts: 524    28147   56.31%
      0     0  2.55516e+015   835  5.78471e+015     Cuts: 196    28727   55.83%
      0     0  3.23302e+015   654  5.78471e+015     Cuts: 889    30777   44.11%
      0     0  3.32795e+015   604  5.78471e+015     Cuts: 337    31390   42.47%
      0     0  3.37780e+015   686  5.78471e+015     Cuts: 212    31791   41.61%
      0     0  3.41202e+015   701  5.78471e+015     Cuts: 121    32148   41.02%
      0     0  3.52260e+015   654  5.78471e+015     Cuts: 398    33114   39.10%
      0     0  3.57604e+015   639  5.78471e+015     Cuts: 244    33613   38.18%
      0     0  3.61288e+015   625  5.78471e+015     Cuts: 235    34098   37.54%
      0     0  3.67035e+015   615  5.78471e+015     Cuts: 163    34491   36.55%
      0     0  3.73087e+015   663  5.78471e+015     Cuts: 157    35105   35.50%
      0     0  3.75834e+015   668  5.78471e+015     Cuts: 144    35530   35.03%
      0     0  3.77753e+015   662  5.78471e+015      Cuts: 93    35899   34.70%
      0     0  3.81446e+015   660  5.78471e+015      Cuts: 82    36310   34.06%
      0     0  3.83284e+015   648  5.78471e+015      Cuts: 76    36608   33.74%
      0     0  3.84779e+015   656  5.78471e+015      Cuts: 58    36845   33.48%
      0     0  3.85941e+015   639  5.78471e+015      Cuts: 67    37084   33.28%
      0     0  3.87033e+015   649  5.78471e+015      Cuts: 40    37284   33.09%
      0     0  3.87967e+015   662  5.78471e+015      Cuts: 32    37422   32.93%
      0     0  3.88305e+015   666  5.78471e+015      Cuts: 24    37577   32.87%
      0     0  3.89084e+015   654  5.78471e+015      Cuts: 59    37771   32.74%
      0     0  3.89489e+015   654  5.78471e+015      Cuts: 38    37968   32.67%
      0     0  3.90160e+015   669  5.78471e+015      Cuts: 55    38172   32.55%
      0     0  3.90440e+015   663  5.78471e+015      Cuts: 40    38329   32.50%
      0     0  3.90794e+015   660  5.78471e+015      Cuts: 27    38492   32.44%
      0     0  3.91249e+015   661  5.78471e+015      Cuts: 31    38662   32.36%
      0     0  3.91569e+015   673  5.78471e+015      Cuts: 32    38814   32.31%
      0     2  3.91569e+015   673  5.78471e+015  3.91569e+015    38814   32.31%
Elapsed real time = 312.08 sec. (tree size =  0.01 MB, solutions = 3)
      1     3  4.19433e+015   728  5.78471e+015  3.91569e+015    41427   32.31%
      2     2        cutoff        5.78471e+015  3.91569e+015    43784   32.31%
      3     3  4.35193e+015   730  5.78471e+015  3.91569e+015    45337   32.31%
      4     2        cutoff        5.78471e+015  3.91569e+015    46000   32.31%
      5     3  4.52240e+015   741  5.78471e+015  3.91569e+015    47554   32.31%
      6     2        cutoff        5.78471e+015  3.91569e+015    49263   32.31%
      7     3  4.66098e+015   799  5.78471e+015  3.91569e+015    51056   32.31%
      8     2        cutoff        5.78471e+015  3.91569e+015    51943   32.31%
      9     3  4.85025e+015   807  5.78471e+015  3.91569e+015    52422   32.31%
     12     2        cutoff        5.78471e+015  3.91569e+015    53363   32.31%
Elapsed real time = 350.88 sec. (tree size =  0.01 MB, solutions = 3)
     15     3  5.59278e+015   896  5.78471e+015  3.91569e+015    54625   32.31%

Clique cuts applied:  1901
Implied bound cuts applied:  160
Zero-half cuts applied:  150

Root node processing (before b&c):
Real time             =  310.11
Parallel b&c, 8 threads:
Real time             =   39.39
Sync time (average)   =    0.00
Wait time (average)   =    0.00
                          -------
Total (root+branch&cut) =  349.50 sec.

inst\instance.txt 00:05:50.9629598        5,78471010310452E+15

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
1 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 0 1 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 1 1 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 
```

这是所有其他机器的正常输出：

```
IBM ILOG CPLEX Optimization Studio Commercial Edition                         
Tried aggregator 1 time.
MIP Presolve eliminated 129 rows and 0 columns.
MIP Presolve modified 15480 coefficients.
Reduced MIP has 28791 rows, 14520 columns, and 965163 nonzeros.
Reduced MIP has 14520 binaries, 0 generals, 0 SOSs, and 0 indicators.
Probing time =    0.03 sec.
Tried aggregator 1 time.
Presolve time =    1.51 sec.
Found feasible solution after 1.62 sec.  Objective = 5170425.9868
Probing time =    0.05 sec.
Clique table members: 14520.
MIP emphasis: balance optimality and feasibility.
MIP search method: dynamic search.
Parallel mode: deterministic, using up to 8 threads.
Root relaxation solution time =    4.82 sec.

        Nodes                                         Cuts/
   Node  Left     Objective  IInf  Best Integer    Best Bound    ItCnt     Gap

*     0+    0                      5170425.9868                   2742     ---
*     0+    0                      2176197.5073                   2742     ---
      0     0   963286.8006  1320  2176197.5073   963286.8006     2742   55.74%
*     0+    0                      1742629.0387   963286.8006     3146   44.72%
      0     0   968918.1899  1292  1742629.0387     Cuts: 180     3146   44.40%
      0     0   972621.9253  1285  1742629.0387  ZeroHalf: 36     3543   44.19%
      0     0   974930.7260  1336  1742629.0387 ZeroHalf: 157     3934   44.05%
      0     0   975330.5044  1344  1742629.0387   ZeroHalf: 9     4042   44.03%
      0     0   976752.3324  1344  1742629.0387  ZeroHalf: 23     4298   43.95%
      0     0   977523.1431  1375  1742629.0387  ZeroHalf: 13     4523   43.91%
      0     0   978030.2843  1358  1742629.0387   ZeroHalf: 7     4732   43.88%
      0     0   978582.8390  1290  1742629.0387      Cuts: 13     4897   43.84%
      0     0   979462.4757  1394  1742629.0387      Cuts: 22     5107   43.79%
      0     0   980081.0140  1361  1742629.0387      Cuts: 16     5256   43.76%
      0     0   986296.0889  1453  1742629.0387     Cuts: 135     6066   43.40%
      0     0   987753.3557  1412  1742629.0387     Cuts: 105     6386   43.32%
      0     0   988885.7034  1442  1742629.0387      Cuts: 57     6694   43.25%
      0     0   989742.4516  1434  1742629.0387      Cuts: 27     6924   43.20%
      0     0   990497.2364  1434  1742629.0387      Cuts: 45     7178   43.16%
*     0+    0                      1402648.1251   990497.2364     7489   29.38%
      0     0   991849.2315  1437  1402648.1251     Cuts: 288     7489   29.29%
      0     0  1243733.1371   593  1402648.1251    Cuts: 2446    12636   11.33%
      0     0  1276887.2546   583  1402648.1251     Cuts: 556    14078    8.97%
      0     0  1296511.1088   701  1402648.1251     Cuts: 600    14813    7.57%
      0     0  1305221.3720   679  1402648.1251     Cuts: 193    15488    6.95%
      0     0  1309747.0795   660  1402648.1251     Cuts: 139    15848    6.62%
      0     0  1318085.1042   725  1402648.1251      Cuts: 43    16281    6.03%
      0     0  1323312.2600   747  1402648.1251      Cuts: 55    16728    5.66%
      0     0  1325171.8791   677  1402648.1251      Cuts: 23    17033    5.52%
      0     0  1326274.8424   704  1402648.1251      Cuts: 19    17265    5.44%
      0     0  1327853.0467   714  1402648.1251      Cuts: 20    17519    5.33%
      0     0  1328078.7180   687  1402648.1251       Cuts: 6    17621    5.32%
      0     0  1328705.5414   702  1402648.1251      Cuts: 18    17768    5.27%
      0     0  1329753.6276   716  1402648.1251      Cuts: 15    17988    5.20%
      0     0  1330728.0832   705  1402648.1251   ZeroHalf: 5    18165    5.13%
      0     0  1331208.9314   707  1402648.1251      Cuts: 15    18322    5.09%
      0     0  1331935.6017   709  1402648.1251   ZeroHalf: 5    18432    5.04%
      0     0  1332438.9391   738  1402648.1251   ZeroHalf: 4    18536    5.01%
      0     0  1332565.6221   712  1402648.1251       Cuts: 3    18578    5.00%
      0     0  1332961.2175   712  1402648.1251   ZeroHalf: 7    18653    4.97%
      0     2  1332962.3523   711  1402648.1251  1332962.3523    18656    4.97%
Elapsed real time = 136.63 sec. (tree size =  0.01 MB, solutions = 4)
      1     3  1355937.1387   819  1402648.1251  1332962.3523    20475    4.97%
      2     2        cutoff        1402648.1251  1332962.3523    20810    4.97%
      3     3  1373864.6210   889  1402648.1251  1332962.3523    21989    4.97%
      5     3  1391805.4913   902  1402648.1251  1332962.3523    22812    4.97%
      6     2        cutoff        1402648.1251  1332962.3523    24410    4.97%
      7     1        cutoff        1402648.1251  1332962.3523    25377    4.97%
      8     0        cutoff        1402648.1251  1332962.3523    26154    4.97%

Clique cuts applied:  2880
Implied bound cuts applied:  73
Zero-half cuts applied:  97

Root node processing (before b&c):
Real time             =  134.80
Parallel b&c, 8 threads:
Real time             =   16.44
Sync time (average)   =    0.00
Wait time (average)   =    0.00
                      -------
Total (root+branch&cut) =  151.24 sec.

inst\instance.txt 00:02:32.8137404        1402648.12514155

0 0 0 0 1 0 0 0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T15:40:21.360

首先，您应该绝对确定您正在解决完全相同的问题。

查看日志，CPLEX 解决的问题似乎有所不同。
例如 presolve 在第一种情况下消除 125 行，在第二种情况下消除 129 行，并在第一种情况下修改 15000 个系数，在第二种情况下修改 15480 个；减少的 MIP 似乎也有所不同：
第一种情况下为 28795 行、14520 列和 965648 个非零值，第二种情况下为 28791 行、14520 列和 965163 个非零值。

我很确定 CPLEX presolve 是完全确定性的并且绝对独立于平台。所以在我看来，由于某种原因，你会产生两个不同的问题。

您可以尝试将问题导出到开发和测试机器上的 LP 文件，然后检查两个文件是否相等（甚至尝试将测试机器上生成的 .LP 文件解决到开发机器上并检查日志）

无论如何，在 IBM 网站上有一个关于[“运行再现性”](http://www-01.ibm.com/support/docview.wss?uid=swg21399979)的部分。
他们指出，在不同的硬件架构上，结果实际上可能会发生变化，但最佳解决方案的目标值（当然）保持不变。
但是，我真的怀疑这是你的情况（值太不同），所以我会比较导出的 LP 问题，看看开发和测试机器之间是否有任何区别。

# ruby-on-rails - 模型包括，必须属于其他 2 个模型

> ID：13551250
> 
> 赞同：2
> 
> 时间：2012-11-25T12:59:47.170
> 
> 标签：ruby-on-rails

这真的让我很烦 - 似乎无法通过包含等来正确设置关联。以下是有问题的模型：

```
class Category < ActiveRecord::Base
 has_many :subcategories
 has_many :locations, :through => :subcategories
end
class Location < ActiveRecord::Base
 has_many :subcategories
 has_many :category, :through => :subcategories
end
class Subcategory < ActiveRecord::Base
 belongs_to :category
 belongs_to :location
end 
```

我需要以以下结构输出：

```
Category.name
 Location.name
  Subcategory.name
  Subcategory.name
  Subcategory.name
       (subcategory from another sub category) 
```

控制器：

```
 class SubcategoriesController < ApplicationController
    def index
      @categories = Category.all(:include => [:locations => :subcategories], :group
      =>"subcategories.name")
    end 
```

看法：

```
 <div class="categorylist">
  <ul>
     <%= @categories.each do |category|%>
    <h3>
        <%=h link_to category.name, category %>
    </h3>
    <%= category.locations.each do |location|%>
    <h6>
        <%= link_to location.name, location %>
    </h6>
        <%= location.subcategories.each do |subcategory|%>
        <p>
        <%= link_to subcategory.name, subcategory%>
        </p>
        <% end %>   
    <% end %>
   <% end %>    
  </ul> 
 </div> 
```

我想要的是：

```
 Fruit
  France
    apple
      granny smith
    fig
  India
    pineapple
    banana
 Meat
   India 
     cow
     chicken
     -------------
What I am currently getting:
Fruit
  India
    cow 
    chicken
    banana
    pineapple 
```

这意味着我仅根据位置而不是位置和类别来获取子类别。

我的问题出现了，当我达到子类别级别时，子类别应该取决于类别和位置 - 它们似乎只属于其他模型中的一个，但在我的情况下它们必须属于两者。我似乎无法做到这一点。我已经尝试了很多方法来做到这一点，但我什至不确定我是否正确地去做。

希望有人能指出我正确的方向。

在此先感谢基督教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:13:52.987

如果我正确理解你的问题，你有类似的东西

```
#Category
Fruit
 Apple
 Banana
Vegetable
 Lettuce

#Location
France
 Apple
 Lettuce
India
 Banana 
```

现在，你想要类似的东西

```
#Hierachical output
Fruit
 France
  Apple
 Vegetable
  Lettuce
India
 Fruit
  Banana 
```

在那种情况下，这不是工作=>`location.subcategories.where(category_id: category.id).each`吗？

**编辑**：

也许，这可以工作（除了上述变化）：

`<%= category.locations.all(include: sub_categories).each do |location|%>`

# c# - 如何在绘图前调整网格模型的位置

> ID：13551258
> 
> 赞同：2
> 
> 时间：2012-11-25T13:00:52.287
> 
> 标签：c#, windows, model, xna, fbx

我开始在 XNA 中编程。我开发了一个简单的项目，将加载从搅拌机导出的“fbx”网格模型。一切都很完美。但现在我想多次复制/复制我的模型来创建地板！10 X 10 模型的矩阵。我试了几个代码都不行。这是我的示例代码。

我不明白为什么我不能复制我的模型。

非常感谢你。

```
//Function draw models mesh
    private void draw_groundLand1()
    {
        //Draw 10 times model texture to make small ground
        for (int a = 0; a < 10; a++)
        {     
            // Copy any parent transforms.
            Matrix[] transforms = new Matrix[model_ground_land1.Bones.Count];
            model_ground_land1.CopyAbsoluteBoneTransformsTo(transforms);

            // Draw the model. A model can have multiple meshes, so loop.
            foreach (ModelMesh mesh in model_ground_land1.Meshes)
            {
                // This is where the mesh orientation is set, as well 
                // as our camera and projection.
                foreach (BasicEffect effect in mesh.Effects)
                {

                    effect.EnableDefaultLighting();
                    effect.World = transforms[mesh.ParentBone.Index] *
                Matrix.CreateRotationY(cubeGroundLand1_modelRotation) * Matrix.CreateTranslation(cubeGroundLand1_position);
                    effect.View = View;
                    //effect.Texture = text_ground_lan1;
                    effect.Projection = Projection;
                }
                // Draw the mesh, using the effects set above.
                mesh.Draw();
            }

            //Move position for the next mesh modal to draw
            cubeGroundLand1_position.X += (float)1.0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:45:33.017

我找到了我的解决方案-> juste move this code ligne "cubeGroundLand1_position.X += (float)1.0;"

像：

```
private void draw_groundLand1()
    {

        for (int a = 0; a < 10; a++)
        {
            // Copy any parent transforms.
            Matrix[] transforms = new Matrix[model_ground_land1.Bones.Count];
            model_ground_land1.CopyAbsoluteBoneTransformsTo(transforms);

            // Draw the model. A model can have multiple meshes, so loop.
            foreach (ModelMesh mesh in model_ground_land1.Meshes)
            {

                // This is where the mesh orientation is set, as well 
                // as our camera and projection.
                foreach (BasicEffect effect in mesh.Effects)
                {

                    effect.EnableDefaultLighting();
                    effect.World = transforms[mesh.ParentBone.Index] *
                Matrix.CreateRotationY(cubeGroundLand1_modelRotation) * Matrix.CreateTranslation(cubeGroundLand1_position);
                    effect.View = View;
                    //effect.Texture = text_ground_lan1;
                    effect.Projection = Projection;

                    cubeGroundLand1_position.X = (float)a+1;
                }
                // Draw the mesh, using the effects set above.
                mesh.Draw();
            }
        } 
```

# python - 工人寻址策略

> ID：13551261
> 
> 赞同：2
> 
> 时间：2012-11-25T13:01:07.487
> 
> 标签：python, celery

我有一个应用程序将一些操作委托给 celery 任务。根据某些参数，操作必须由不同的工作人员执行。我考虑过使用队列来实现这一点。我的想法如下：

1.  客户端请求来自特定消息的操作`queue1`
2.  如果`worker1`（专门负责`queue1`）已经处于活动状态，它将处理请求
3.  如果没有工人在听`queue1`，一个包罗万象的工人（`worker-main`）将实例化`worker1`。该请求将被转发到`worker1`.
4.  `worker1`一段时间后会自行关闭而不被使用

我对芹菜的了解有限，我有几个问题。

1.  **我如何`worker-main`在芹菜中实施？**：这是一个监听所有队列的工作人员，但优先级低于任何其他工作人员。也就是说，只有当请求没有被任何其他工作人员接受时，它才会起作用。
2.  **如何`woker-main`创建`worker1`？**一旦创建`worker1`者，必须与 关联`queue1`，优先级高于`worker-main`?
3.  **可以将请求转发`worker-main`到`worker1`吗？**回复应直接发送给客户端。
4.  **可以`worker1`自行关闭吗？**

您可以在下图中看到我尝试实现的架构的图形描述：

![多人](../Images/322e306690a5f56757524493eefc30de.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:41:07.930

您可以在顺序工作流中将“worker main”和“worker1”链接在一起，以便“worker main”始终将作业作为第 1 步处理，但如果检测到“worker1”已经启动，则简单地返回并且不执行任何操作。

所以任务首先点击“worker main”，“worker main”检查worker1正在运行的服务器的正常运行，如果该服务器没有启动，则将其拉起，等待它完全启动然后返回。这是我测试[的概念证明，](http://jorgenmodin.net/index_html/how-to-create-a-sequential-workflow-with-error-handling-in-celery)以了解链接如何在 Celery 中工作以创建顺序工作流，具有更多实际经验的人可能有更好的解决方案。它还包含错误处理，以防万一让工作人员失败，我想在你的情况下。

请注意，此方法中没有队列的概念。此外，你可以给worker1和worker2不同的方法名，而不是区分参数，客户端可以解析参数，然后选择celery方法执行。

# java - Java：在没有 Eclipse 的情况下运行程序

> ID：13551266
> 
> 赞同：0
> 
> 时间：2012-11-25T13:01:31.107
> 
> 标签：java, eclipse

我制作了一个使用外部库和资源文件的游戏。现在我想在另一台 PC（使用 Ubuntu 操作系统）上测试它，我尝试通过导出到 jar 文件来在没有 eclipse 的情况下运行它，但它不起作用。这就是层次结构。有什么简单的方法可以做到这一点吗？

[![](../Images/976af803b516b9edc359e11fbb7126b6.png "由 imgur.com 主办")](https://imgur.com/lpWjd)

**编辑** 当我将它导出为 Runnable 时（**请注意，我试图在 Windows 上运行它而不是 ubuntu**）jar 文件并尝试运行它`java -jar gra.jar`它抛出：

```
`Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoa
der.java:58)
Caused by: java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860)
        at java.lang.Runtime.loadLibrary0(Runtime.java:845)
        at java.lang.System.loadLibrary(System.java:1084)
        at org.lwjgl.Sys$1.run(Sys.java:73)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.lwjgl.Sys.doLoadLibrary(Sys.java:66)
        at org.lwjgl.Sys.loadLibrary(Sys.java:95)
        at org.lwjgl.Sys.<clinit>(Sys.java:112)
        at org.lwjgl.opengl.Display.<clinit>(Display.java:132)
        at org.newdawn.slick.AppGameContainer$1.run(AppGameContainer.java:39)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.newdawn.slick.AppGameContainer.<clinit>(AppGameContainer.java:36)

        at MainWindow.main(MainWindow.java:14)
        ... 5 more` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:50:47.513

`Caused by: java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path`

`lwjgl`没有找到。它应该位于 中列出的目录之一中`java.library.path`。

您肯定在设置项目时添加了一个`java.library.path`带有本机 dll 的目录。`jwgl`Eclipse 无法导出它。您必须创建一个添加 dll 的启动脚本（sh、bat）。

看看这里的最后一步： [http ://www.lwjgl.org/wiki/index.php?title=Setting_Up_LWJGL_with_Eclipse](http://www.lwjgl.org/wiki/index.php?title=Setting_Up_LWJGL_with_Eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:41:05.423

你是怎么包装罐子的？如果你只使用 eclipse，你应该使用 jarsplice。这可能会修复错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T13:04:30.907

确保您正确[获取资源文件](https://stackoverflow.com/questions/676097/java-resource-as-file)，而不是在本地文件系统中引用它们。

为确保您的资源被放入 JAR 中，[请将它们添加到您的 classpath](https://stackoverflow.com/questions/5832064/how-to-add-an-xml-file-to-the-java-applications-classpath-in-eclipse)中。

# android - 是否可以使用浮点的所有 16 位在 GLSL 中对纹理进行采样

> ID：13551269
> 
> 赞同：0
> 
> 时间：2012-11-25T13:01:46.920
> 
> 标签：android, opengl-es, opengl-es-2.0, glsl

我现在正在尝试使用浮点向量对纹理进行采样，但我发现浮点精度只有 2 ^ -10 位，并且分辨率非常有限。所以我想知道我是否可以使用 mediump 浮动变量的所有 16 位来采样纹理？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:54:11.097

您*正在*使用 16 位浮点数的所有 16 位。这就是16*位*[浮点数](http://en.wikipedia.org/wiki/IEEE-754#Basic_formats) 。它们有大约 11 位尾数和 5 位指数。您不能*使*半精度浮点值的尾数超过 ~11 位。

 **您可以尝试在顶点着色器中将数字乘以 4096，但这仅在纹理坐标最初是 32 位浮点数（在将其转换为半精度之前）时才有帮助。

简而言之：纹理坐标通常需要比这更高的精度。所以你将*不得不*使用更高精度的浮点值。**

# java - 如何在android sd卡中制作表格格式的文本文件？

> ID：13551271
> 
> 赞同：0
> 
> 时间：2012-11-25T13:02:09.027
> 
> 标签：java, android, eclipse

我看到这[是制作文本文件](https://stackoverflow.com/questions/8152125/how-to-create-text-file-and-insert-data-to-that-file-on-android)，它也帮助了我，但在所有示例中，我看到他们只是在记事本中制作字符串，或者我们可以说文本文件......有人能说如何在 android 中制作表格格式的文本文件吗？ ?

我要制作文件（发票）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:45:50.370

那将是 TSV 格式，并且很容易生成。只需在每个字段后添加一个 TAB，并在每个记录后添加一个 CR/LF 对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:53:02.757

这很可能会涉及一些稍微混乱的字符串处理。假设您的数据采用可接受的格式（例如字符串数组），您应该能够构造一个表示整个表的单个 java 字符串，然后使用您已经找到的代码将其打印到文件中。使用转义字符`\t`分隔列和`\n`行。

# entity-framework-4 - 如何定义数据库中不存在的类型之间的多对一关系

> ID：13551273
> 
> 赞同：1
> 
> 时间：2012-11-25T13:02:15.033
> 
> 标签：entity-framework-4

任何人都可以给出一些指示吗？首先，我创建了 Order 和 OrderItem 表之间的多对一关系，以及 Product 和 OrderItem 之间的多对一关系，然后我在使用 EF Code First Powertool 生成代码后删除了这些表之间的关系。我希望 EF 类型而不是数据库可以保持关系并检查数据一致性。有人说独立关联可以创建数据库中不存在的关系。但我做不到。这是我的代码，请查看。谢谢

```
public class Order
{
    public Order()
    {
        this.OrderItems = new List<OrderItem>();
    }

    public System.Guid Id { get; set; }
    public System.DateTime CreatedTime { get; set; }
    public virtual ICollection<OrderItem> OrderItems { get; set; }
}

public class OrderItem
{
    public System.Guid Id { get; set; }
    public Nullable<System.Guid> OrderId { get; set; }
    public Nullable<System.Guid> ProductId { get; set; }
    public Nullable<System.DateTime> CreatedTime { get; set; }
    public virtual Order Order { get; set; }
    public virtual Product Product { get; set; }
}

public class Product
{
    public Product()
    {
        this.OrderItems = new List<OrderItem>();
    }

    public System.Guid Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<OrderItem> OrderItems { get; set; }
}

public class OrderItemMap : EntityTypeConfiguration<OrderItem>
{
    public OrderItemMap()
    {
        // Primary Key
        this.HasKey(t => t.Id);

        // Properties
        // Table & Column Mappings
        this.ToTable("OrderItem");
        this.Property(t => t.Id).HasColumnName("Id");
        this.Property(t => t.OrderId).HasColumnName("OrderId");
        this.Property(t => t.ProductId).HasColumnName("ProductId");
        this.Property(t => t.CreatedTime).HasColumnName("CreatedTime");

        // Relationships
        this.HasRequired(t => t.Order)

            .WithMany(t => t.OrderItems)
            .HasForeignKey(d => d.OrderId);
        this.HasRequired(t => t.Product)
            .WithMany(t => t.OrderItems)
            .HasForeignKey(d => d.ProductId);
     }
}

public class OrderMap : EntityTypeConfiguration<Order>
{
    public OrderMap()
    {
        // Primary Key
        this.HasKey(t => t.Id);

        // Properties
        // Table & Column Mappings
        this.ToTable("Order");
        this.Property(t => t.Id).HasColumnName("Id");
        this.Property(t => t.CreatedTime).HasColumnName("CreatedTime");
    }
}

public class ProductMap : EntityTypeConfiguration<Product>
{
    public ProductMap()
    {
        // Primary Key
        this.HasKey(t => t.Id);

        // Properties
        this.Property(t => t.Name)
            .IsFixedLength()
            .HasMaxLength(100);

        // Table & Column Mappings
        this.ToTable("Product");
        this.Property(t => t.Id).HasColumnName("Id");
        this.Property(t => t.Name).HasColumnName("Name");
    }
}

class Program
{
    static void Main(string[] args)
    {
        using (var context = new ProductsContext())
        {
            Guid gProductId = Guid.NewGuid();
            Guid gOrderId = Guid.NewGuid();
            Product product = new Product
            {
                Id = gProductId,
                Name = "Prodcut1",
            };
            Order order = new Order()
            {
                Id = gOrderId,
                CreatedTime = DateTime.Now
            };
            Guid gItem1Id = Guid.NewGuid();

            OrderItem item1 = new OrderItem()
            {
                Id = gItem1Id,
                 Order=order,
                 Product=product,
                CreatedTime = DateTime.Now
            };
            context.Orders.Add(order);
            context.Products.Add(product);
            context.OrderItems.Add(item1);
            context.SaveChanges();//this one works
        }
        Console.WriteLine("Created now...");
        Console.ReadLine();

        using (var c = new ProductsContext())
        {
            Guid gItem2Id = Guid.NewGuid();
            OrderItem item2 = new OrderItem()
            {
                Id = gItem2Id,
                OrderId = Guid.NewGuid(),//doesn't exist order , 
                CreatedTime = DateTime.Now
            };

            c.OrderItems.Add(item2);
            c.SaveChanges();
        }
    }
} 
```

我预计最后一个`SaveChanges`会抛出一个异常，说“订单不存在，无法插入此记录”。但事实并非如此。此记录已成功创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:44:02.143

实体框架不强制执行完整的参照完整性。它仅强制执行一些基本场景 - 例如，如果子实体存在，但仅当父实体和子实体都加载到您的上下文中时，它将不允许您删除父实体。完整的参照完整性是数据库（或您自己的自定义逻辑）的责任。

# javascript - 如何禁用 onclick 事件？

> ID：13551275
> 
> 赞同：2
> 
> 时间：2012-11-25T13:02:21.193
> 
> 标签：javascript, jquery, html

```
 <form id="QandA" action="<?php echo htmlentities($action); ?>" method="post">

    <table id="question">

    <tr>
    <td colspan="2">
    <a onclick="return plusbutton();">
    <img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" id="mainPlusbutton" name="plusbuttonrow"/>
    </a>
    <span id="plussignmsg">(Click Plus Sign to look up Previous Questions)</span>
    </td>
    </tr>
    </table>

    </form> 
```

在上面的代码中，当满足 if 语句时，我可以用另一个图像替换一个图像。但我的问题是，当图像被替换时，它不会禁用点击事件。我的问题是，当图像被替换时，如何禁用 onclick 事件`onclick="return plusbutton();`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T13:07:05.077

您从`plusbutton`函数本身中禁用。首先，将元素传递给函数，如下所示：

```
<a onclick="return plusbutton(this);"> 
```

然后在函数中禁用它：

```
function plusbutton(element) {
    element.onclick = '';
    /* then do whatever plusbutton did before */
} 
```

但是由于您使用的是 jQuery，因此最好使用处理程序。所以给链接一个id而不是onclick，像这样：

```
<a id="plusbutton" href="#"> 
```

并使用[jQuery.one()](http://api.jquery.com/one/)绑定只发生一次的点击处理程序：

```
$(document).ready(function() {
    $('#plusbutton').one('click', function(ev) {
        plusbutton();
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T13:07:57.523

```
event.preventDefault(); 
```

将阻止元素继续其正常功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T13:07:34.867

试试这个代码：

```
$('#addQuestionBtn').bind("click",function(){
    $('#addQuestionBtn').unbind("click");   
    insertQuestion(document.form);
}); 
```

还有你的html：

```
<input id="addQuestionBtn" name="addQuestion" type="button" value="Add Question" /> 
```

# asp.net-mvc - 如何仅使用 HTML 在异步对象中指定控制器？

> ID：13551277
> 
> 赞同：0
> 
> 时间：2012-11-25T13:02:36.187
> 
> 标签：asp.net-mvc, html, asp.net-mvc-4, kendo-ui

我开始使用 Kendo UI 并尝试在异步模式下使用上传器，但我没有看到任何有关此异步对象中可用字段的文档。

```
 <div style="width: 350px">
        <input name="files[]" id="files" type="file" />
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#files").kendoUpload({
                async: {
                    saveUrl: "save",
                    removeUrl: "remove",
                    autoUpload: true
                    //controllerName? Where is the documentation for this?
                }
            });
        });
    </script> 
```

如果我要使用 MVC 扩展，剃刀语法有一个字段来指定控制器名称。如果我不使用 MVC 扩展/剃刀语法，我应该把它放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:13:19.220

没有这样的选项来指定动作或控制器。您只能指定 saveUrl 选项的完整 URL。作为一种解决方法，您可以使用MVC 提供的[Url.Action助手：](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.action%28v=vs.108%29.aspx)

```
async: {
                saveUrl: "save",
                removeUrl: '@Url.Action("ActionName","Controller")',
                autoUpload: true
            } 
```

# ontology - Protege 中的合格基数限制定义

> ID：13551280
> 
> 赞同：1
> 
> 时间：2012-11-25T13:03:08.107
> 
> 标签：ontology, owl, protege

我正在关注本教程-> [LINK](http://owl.cs.manchester.ac.uk/tutorials/protegeowltutorial/resources/ProtegeOWLTutorialP4_v1_3.pdf)

在第 75 页，它解释了如何使用合格的基数限制来定义 FourCheesePizza。根据说明，它说“有了这个描述，FourCheesePizza 仍然可以与其他类型的配料有其他关系。为了让我们说我们只希望它有四种奶酪配料而没有其他配料，我们必须添加关键字'only '（全称量词）”。

现在，我对 FourCheesePizza 的定义是：

```
Pizza and hasTopping exactly 4 CheeseTopping 
```

但我不明白在哪里添加 'only' 关键字，因为我只收到语法错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T13:45:46.933

如果你想要一个只有奶酪的四奶酪披萨，你必须这样定义它：

```
Pizza and hasTopping exactly 4 CheeseTopping and hasTopping only CheeseTopping 
```

# algorithm - 证明或反驳关于运行时间的陈述

> ID：13551283
> 
> 赞同：0
> 
> 时间：2012-11-25T13:03:35.070
> 
> 标签：algorithm, computer-science, time-complexity

我正在阅读 CLRS 的第 3 章，该章是关于运行时间的，并且想通过一些示例来工作。由于我没有参加算法课程，因此我需要求助于 www 寻求帮助。

1) n^2 = 大欧米茄(n^3)

> 我认为这种说法是错误的：如果最佳案例运行时间是 n^3，那么算法不可能是 n^2，. 即使是最好的情况也比这慢。

2) n + log n = Big-Theta (n)

> 我认为这个说法是对的，我们可以忽略 log n 的下限。这为我们提供了 Big-Oh (n) 的最坏情况运行时间。以及 Big-Omega (n) 的最佳情况运行时间。我不太确定这一点。一些更多的澄清将不胜感激。

3) n^2 log n =大哦 (n^2)

> 我认为 this.statement 是错误的：最坏情况下的运行时间应该是 n^2 log n。

4) n log n = Big-Oh (n sqrt (n))

> 因为 n log n < n sqrt (n) 可能是真的。不过不太确定。

5) n^2 - 3n - 18 = Big-Theta (n^2) 真的不知道...

6) 若f(n) = O(g(n))且g(n) = O(h(n))，则f(n) = O(h(n))。

> 由传递属性持有。

我希望有人可以详细说明我相当可能是错误的答案:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T13:16:48.607

1.  你是对的，但原因不是。请记住，Omega(n^3) 并不直接与算法相关，而是与函数相关。
    你正确的原因是：对于每个常数，`c,N`都有一些`n>N`这样的——`n^2 < c * n^3`因此**不在**`n^2`**`Omega(n^3)`**

***   你是对的。 `n < n + logn < 2*n`（对于足够大的 n），因此`n + logn`既是`O(n)`和`Omega(n)`

    *   你是对的，但同样，不要在这里使用“最坏情况”。解释和证明指南将类似于*1。*

    *   这是正确的，因为`log(n)`它渐近小于`sqrt(n)`，其余的紧随其后。

    *   *与1*中的原理相同。使用相同的方法将是正确的。

    *   正确的。** 

 *** * *

作为旁注：`Omega(n)`并不意味着“最佳情况下的运行时间`n`”，它意味着表示复杂性的*函数*（可以是最坏情况复杂性，最佳情况复杂性或平均情况复杂性，......）具有存在的条件`Omega(n)`。

例如 - 快速排序：

*   在最坏情况分析下，它是`Theta(n^2)`
*   而在平均案例分析下，它是`Theta(nlogn)`**

# android - 添加 AsyncTask 用于搜索位置

> ID：13551291
> 
> 赞同：1
> 
> 时间：2012-11-25T13:04:40.307
> 
> 标签：android, android-asynctask

所以我正在申请获得当前职位。下面的代码工作正常

```
字符串字符串地址 = "";

公共无效getLocation（查看视图）{
    最终 LocationManager lm = (LocationManager) getSystemService(LOCATION_SERVICE);

    标准 kriteria = new Criteria();
    kriteria.setAccuracy(Criteria.ACCURACY_FINE);
    kriteria.setAltitudeRequired(false);
    kriteria.setBearingRequired(false);
    kriteria.setCostAllowed(true);
    kriteria.setPowerRequirement(Criteria.POWER_LOW);
    最终字符串提供者 = lm.getBestProvider(kriteria, true);

    最终位置 lokasi = lm.getLastKnownLocation(provider);
    updateWithNewLocation(lokasi);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000, 5, ll);

    edittext_position.setText(stringAddress);
}

私人无效updateWithNewLocation（位置
    如果（lokasi！= null）{
        双纬度 = lokasi.getLatitude();
        双 lng = lokasi.getLongitude();
        Geocoder gc = new Geocoder(this, Locale.getDefault());

        尝试{
            列出地址 = gc.getFromLocation(lat, lng, 1);
            StringBuilder sb = new StringBuilder();

            如果（地址。大小（）> 0）{
                地址地址=addresses.get(0);
                sb.append(address.getAddressLine(0));
                stringAddress= sb.toString();
            }

        } 捕捉（异常 e）{

        }
    }
}

私人最终 LocationListener ll = new LocationListener() {
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

    公共无效onProviderEnabled（字符串提供者）{

    }

    公共无效onProviderDisabled（字符串提供者）{
        updateWithNewLocation(null);
    }

    公共无效onLocationChanged（位置位置）{
        updateWithNewLocation(位置);
    }
}

```

但问题是每次我调用 getLocation() 函数时，应用程序都会在返回结果之前挂起几秒钟。我知道使用 aSyncTask 解决这个问题，但我不知道如何开始。感谢你的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:19:48.703

这是我的应用程序的片段：

```
public void getCurrentLocation(final ListenerGetCurrentLocation listenerGetCurrentLocation) {
    new AsyncTask<Void, Void, List<Address>>() {

        @Override
        protected List<Address> doInBackground(Void... voids) {
            Geocoder geo = new Geocoder(instance);

            List<Address> listAddresses = null;

            Criteria criteria = new Criteria();
            String bestProvider = locationManager.getBestProvider(criteria, true);

            if (bestProvider == null) {
                bestProvider = LocationManager.NETWORK_PROVIDER;
            }

            Location location = locationManager.getLastKnownLocation(bestProvider);

            try {
                if (location != null) {
                    listAddresses = geo.getFromLocation(location.getLatitude(), 
                                                        location.getLongitude(), 
                                                        1);
                }
            } catch (IOException e) {
                e.printStackTrace();
            }

            return listAddresses;
        }

        public void onPostExecute(List<Address> listAddresses) {                
            Address _address = null;
            if ((listAddresses != null) && (listAddresses.size() > 0)) {
                _address = listAddresses.get(0);

                GeoPoint currentPosition = new GeoPoint(((int)(_address.getLatitude() * 1E6)), 
                                                        ((int)(_address.getLongitude() * 1E6)));
            }

        }

    }.execute();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T22:16:28.503

`requestLocationUpdates()`是异步的，它不会阻止您的应用程序。它在后台轮询位置，然后调用侦听器。

但是， gc.getFromLocation() 不是。这可能是你滞后的原因

创建一个新的`AsyncTask`，Eclipse 会建议你覆盖那些方法

```
@Override
protected List<String> doInBackground(String... params) {
   // this is done in the background so it won't block the UI. The return type must be set to List<String> (I think default is just String)
   return gc.getFromLocation()
}

@Override
protected void onPostExecute(List<String> adresses) {
    // called when the GC work is finished. You can now use your list of addresses and display them
} 
```

不要忘记调用`execute()`你的任务。

# python - 为什么导入wave会产生波形图而不播放wav文件

> ID：13551293
> 
> 赞同：1
> 
> 时间：2012-11-25T13:04:57.250
> 
> 标签：python, audio, wav, wave

以下链接有一个使用 python wave 播放 wav 文件的示例。

[pyaudio 帮助播放文件](https://stackoverflow.com/questions/6951046/pyaudio-help-play-a-file)

问题是在我的电脑上，任何带有“import wave”的脚本只会产生一张波浪的图片，而没有做任何其他事情。（即脚本的其余部分甚至没有运行。）我不知道这是为什么。有没有办法解决这个问题？我在 Windows XP 上运行 python 2.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:34:44.523

很可能您`wave.py`在当前目录（或在您`PYTHONPATH`的 .

# php - 为什么要强调 PHP 类函数

> ID：13551294
> 
> 赞同：1
> 
> 时间：2012-11-25T13:05:04.087
> 
> 标签：php, magic-methods

在 PHP 中使用 OOP 时，我见过很多这样编写的函数：`function __myfunc(){}` 我想知道下划线的作用。我读过他们保护功能，但从什么以及如何保护？

另一个例子：

```
class myClass{
    function __myFunc(){
        return ' what am i doing?';
    }
}
$question = new myClass;
echo $question->__myFunc(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T13:10:48.360

下划线无效。但是，两个下划线用于表示具有特殊含义的*魔术*函数，例如构造函数`__construct()`或析构函数`__destruct()`。有些人使用一个或两个下划线来表示一个方法是“私有的”，即只在内部使用。由于此功能在 PHP >= 5 中作为特殊关键字实现，因此您不应再使用此“下划线”：

```
class myClass{
    private function myFunc() {
        return ' what am i doing?';
    }
}

$question = new myClass();
echo $question->myFunc(); // fails! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T13:07:10.380

这基本上是这种方法的代码符号，代码`private`的用户不应该使用它。（对整体功能至关重要）

*您应该只在私有*方法上放置下划线符号，这被认为是一种好习惯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T13:10:16.400

有一些被称为[魔法](http://php.net/manual/en/language.oop5.magic.php)的函数，其他的只是将它们标记为私有的符号——所以如果你的团队中有人用下划线看到这个函数，他会认为它是私有的。但实际上你可以在课堂之外使用它们。要保护类内的方法，您需要使用[访问修饰符](http://www.php.net/manual/en/language.oop5.visibility.php)

# c++ - 在目标平台上自己编译 Boost 有意义吗？

> ID：13551295
> 
> 赞同：1
> 
> 时间：2012-11-25T13:05:18.210
> 
> 标签：c++, boost

我有一个使用 Boost 的应用程序。我刚刚下载了预编译的 DLL，仅此而已。现在我认为我可能应该自己编译 Boost，以便它可以利用目标系统的优势。我只需要在一个系统上运行软件，这是一个 2 处理器 Xeon E5，所以编译器可能会做一些优化。是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:12:04.897

编译 Boost 不适合胆小的人，也不值得你花时间去做。获取针对 Boost 编译的 Windows 软件的最简单方法是安装[BoostPro](http://www.boostpro.com/download/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:15:29.363

检查我的老[问题](https://stackoverflow.com/q/2889394/286260)，我相信它对你也很重要。

实际上，当您知道如何操作时，就很容易构建它。
是的，**我会建造它，除非最高性能不是必须的**。

祝你好运！

# php - 获取 ftp 发送的数据库导出到另一台服务器

> ID：13551297
> 
> 赞同：0
> 
> 时间：2012-11-25T13:05:58.713
> 
> 标签：php

好的，这就是我想要做的

从数据库中导出数据，写入 csv，然后发布到另一台服务器。

它将输出一个csv并下载，但我想在服务器上写入文件，然后将它从我的服务器发布到另一个。

开始...

```
function exportMysqlToCsv($table,$filename = 'cmv_sailings.csv')
{
$csv_terminated = "\n";
$csv_separator = ",";
$csv_enclosed = '"';
$csv_escaped = "\\";
$sql_query = "select * from $table";

// Gets the data from the database
$result = mysql_query($sql_query);
$fields_cnt = mysql_num_fields($result);

$schema_insert = '';

for ($i = 0; $i < $fields_cnt; $i++)
{
    $l = $csv_enclosed . str_replace($csv_enclosed, $csv_escaped . $csv_enclosed,
        stripslashes(mysql_field_name($result, $i))) . $csv_enclosed;
    $schema_insert .= $l;
    $schema_insert .= $csv_separator;
} // end for

$out = trim(substr($schema_insert, 0, -1));
$out .= $csv_terminated;

// Format the data
while ($row = mysql_fetch_array($result))
{
    $schema_insert = '';
    for ($j = 0; $j < $fields_cnt; $j++)
    {
        if ($row[$j] == '0' || $row[$j] != '')
        {

            if ($csv_enclosed == '')
            {
                $schema_insert .= $row[$j];
            } else
            {
                $schema_insert .= $csv_enclosed .
                str_replace($csv_enclosed, $csv_escaped . $csv_enclosed, $row[$j]) . $csv_enclosed;
            }
        } else
        {
            $schema_insert .= '';
        }

        if ($j < $fields_cnt - 1)
        {
            $schema_insert .= $csv_separator;
        }
    } // end for

    $out .= $schema_insert;
    $out .= $csv_terminated;
} // end while

header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-Length: " . strlen($out));
header("Content-type: text/csv");
header("Content-Disposition: attachment; filename=$filename");
echo $out;
exit;
} 
```

// FTP部分

```
$connection = ftp_connect("ftp server");
$username = "some user";
$password = "some password";
$login = ftp_login($connection, $username, $password);

if (!$connection) {

    die('oops, connection failed');

} else {

    echo "connection ok <br />";

}

// Ok, I'm connected, log me in...

if(!$login) {

    die('login failed');

} else {

    echo "logged in ok <br />";

}

// Set passive FTP mode

ftp_pasv($connection, true);

// Upload the file

$upload = ftp_put($connection, $filename, $filename, FTP_ASCII);

if(!$upload) { echo "upload failed, doh!"; } else { echo "upload done, thanks!"; }

// We're done, close the connection

ftp_close($connection); 
```

有谁知道我在这里缺少什么？

感谢

富有的 ：）

# android - 为 Android 3.2 声明平板电脑布局 - 轻度混淆

> ID：13551299
> 
> 赞同：0
> 
> 时间：2012-11-25T13:06:04.410
> 
> 标签：android, android-layout

根据本指南[的](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)[章节](http://developer.android.com/guide/practices/screens_support.html#overview) `px = dp * (dpi / 160)`以及布局规范从桶（物理尺寸以英寸为单位）更改为“dp”单位，以便：

*   320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
*   480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
*   600dp：7 英寸平板电脑 (600x1024 mdpi)。
*   720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

由于“dp”值取决于“px”和“dpi”值，因此：`dp = px / (dpi / 160)`- 高分辨率的电话设备是否有可能从 w600dp 文件夹中获取布局？

例如：三星 Galaxy s3 dp = 1280 / (303 / 160) = 670；三星 Galaxy s2 dp = 800 / (217 / 160) = 592。所以，galaxy s3 将采用“面向平板电脑”的模板，对。可以吗，特别是如果平板电脑版本包含更多元素并且整体界面人体工程学会在 s3 的情况下受到平板电脑布局的影响？为什么不只坚持展示桶？

您可能会推荐使用“sw”键，但我只是想确保这些“dp”单位实际上与尺寸相关，这样面向平板电脑的模板就不会显示在手机设备上。

那么，您介意分享您在应用新方法方面的实践知识吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:27:45.047

A`dp`或`dip`是（屏幕）密度无关像素。令人困惑的部分是提到*像素*。它实际上是一个类似于厘米或英寸的单位。

每个设备为其屏幕定义一个 dpi 存储桶，例如`mdpi`160dpi。这意味着您可以在屏幕上找到 160 像素跨一英寸。它不是 100% 准确的，因为物理屏幕通常不完全是 160 dpi（或为存储桶定义的任何值）。但这是一个接近的值。

这意味着完美的 160dpi 屏幕上的 160dp 实际上是 160 像素。在具有完美 xhdpi (=320dpi) 屏幕的设备上，那些 160dp 将是 320 像素。( `px = 160dp * (320dpi / 160)`)

使用`dp`不要以像素为单位思考。以英寸、毫米或您喜欢的单位进行思考。例如，推荐的 UI 元素[48dp 节奏](http://developer.android.com/design/style/metrics-grids.html#48dp-rhythm)解释了

> 平均而言，48dp 转换为大约 9mm 的物理尺寸（有一些可变性）

近似计算：50dp = 一指宽。

这有望解释为什么典型的 320dp 手机屏幕总是小于 720dp 平板电脑屏幕，尽管较小的屏幕可以比较大的屏幕具有更多的像素。dpi / 像素的东西已经计入 dp。

* * *

如何为不同的屏幕尺寸做不同的布局？（即电话与桌子）

使用[屏幕大小的桶](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)( `small`, ..., `xlarge`) 进行布局。它们代表从小到大的物理屏幕。`sw600dp`除非您需要调整非常特殊的情况，否则您不需要etc。

不同的 dpi 存储桶应该只关注图像。例如，文件夹*中任何尺寸*的高分辨率屏幕的高分辨率图像。`drawable-hdpi`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:35:59.820

S3 的密度不是 160。

# tomcat-valve - 自定义访问日志 (Apache Tomcat 7.0.8) 保持为零 kb

> ID：13551300
> 
> 赞同：1
> 
> 时间：2012-11-25T13:06:11.993
> 
> 标签：tomcat-valve

我正在尝试创建 AccessLog 的缩短/自定义版本（将其命名为 Stats_log）以从请求中注销一些项目（HTTP 代码、响应时间、请求类型）。

所以我复制了完整的 AccessLogValve 并对其进行了编辑以满足我的需要。重新启动服务器后，会创建新日志，但仍为零（！）0kb。

谁能指出我在这里做错了什么？

奇怪的是，自定义日志在我运行 Apache Tomcat 7.0.2 的测试 ENV 中对我有用（使用相同的设置）。（而 PROD 环境是 7.0.8）。

有什么建议么？

以下是 server.xml 文件中显示的 Valve 设置：

```
<Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs" prefix="172.30.21.244_**access_log**." suffix=".txt" pattern="%h %l %u %t &quot;%r&quot; %s %b" resolveHosts="false"/>

<Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs" prefix="localhost_stats_log." suffix=".txt" fileDateFormat="yyyy-MM-dd.HH" pattern="%U,%s,%D,%{Internal-Status-Code}o" resolveHosts="false"/> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T13:24:32.473

以下操作解决了这个问题：1）我的复制和粘贴似乎以某种方式添加了线刹车（\ n）。2) 将自定义的 AccessLogValve 移动到 under 。

这就是诀窍:)

# java - 如何判断一个方法是否被调用？

> ID：13551301
> 
> 赞同：-6
> 
> 时间：2012-11-25T13:06:17.927
> 
> 标签：java, methods

如何判断一个方法是否被调用，以便我可以添加一个计数器来测量该方法的总调用次数？

编辑澄清。

假设我有

```
class anything{ 
public String toString() { 
++counter; 
return "the time this method is being called is number " +counter; 
} 
}//end class 
```

我在 main 方法中创建了任何东西的实例 3 次，如果我调用它的 toString() 整个 3 次，我想要的输出是这样的：

> *   调用此方法的时间为 1
> *   调用此方法的时间为 2
> *   调用此方法的时间是 3

我希望将计数器成功添加到类中和 ToString() 方法中，而不是在 main 中。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T13:07:20.913

您可以使用私有实例变量计数器，您可以在每次调用您的方法时递增：-

```
public class Demo {
    private int counter = 0;

    public void counter() {
        ++counter;
    }
} 
```

* * *

**更新 ： -**

根据您的编辑，您需要一个在实例之间共享的静态变量。因此，一旦您更改了该变量，它将针对所有实例进行更改。它基本上绑定到类而不是任何实例。

因此，您的代码应如下所示： -

```
class Anything {   // Your class name should start with uppercase letters.
    private static int counter = 0;

    public String toString() { 
        ++counter; 
        return "the time this method is being called is number " +counter; 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T13:10:51.233

你有2个选择...

计算一个实例的消息：

```
public class MyClass {
private int counter = 0;

public void counter() {
    counter++;
    // Do your stuff
}

public String getCounts(){
    return "The time the method is being called is number " +counter;
}
} 
```

或者计算所有创建实例的全局调用：

```
public class MyClass {
private static int counter = 0;

public void counter() {
    counter++;
    // Do your stuff
}
public static String getCounts(){
    return "the time the method is being called is number " +counter;
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T13:11:28.107

最好的方法是使用私有整数字段

```
private int X_Counter = 0;

public void X(){
    X_Counter++;
    //Some Stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T13:10:40.497

这取决于你的目的是什么。如果在您的应用程序中，您想使用它，那么在每个方法中都有一个计数器来提供详细信息。

但是，如果它是一个外部库，那么像 VisualVM 或 JConsole 这样的分析器将为您提供每种方法的调用次数。

# javascript - 从父选项卡访问子级

> ID：13551302
> 
> 赞同：0
> 
> 时间：2012-11-25T13:06:19.023
> 
> 标签：javascript

我尝试在刚刚打开的页面上单击按钮，但得到`TypeError: Cannot read property 'body' of undefined`

```
var target = window.open("link");
target.document.body.getElementsByClassName("button class").item().click() 
```

能否请你帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:12:30.153

取决于是什么`"link"`（从表面上看，它是主 URL 的页面或 servlet 同级，但命名`link`- 但是我怀疑您将它用作其他内容的占位符）您的主页可能无权访问文档对象，取决于浏览器应用的安全策略。例如，如果`link`替换为与主页不同域的 URL，您通常会看到该错误消息。

# excel - 将列从工作簿复制到另一个并为每个单元格添加逗号

> ID：13551306
> 
> 赞同：0
> 
> 时间：2012-11-25T13:06:47.247
> 
> 标签：excel, vba

我正在尝试将一列复制到另一个工作簿。但我需要在每一行中添加一个逗号。有可能的？

```
 WBSource.Worksheets(1).Columns(i).Copy _
        Destination:=WBDest.Worksheets(1).Columns(1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:05:28.330

有两种方法可以做到：

1.  遍历源中的每个单元格，将此单元格的值设置为某个变量，添加一个逗号，然后在此变量的目标单元格中​​设置该值。

2.  复制/粘贴列，然后迭代结果列中的每个单元格以添加逗号。

我做第二个，快得多。

您还可以通过禁用屏幕更新来加速所有变体，而您的宏通过添加

```
Application.ScreenUpdating = False 
```

# sql - PL/SQL - 为什么 ORA-06550 不能被困在异常中？

> ID：13551308
> 
> 赞同：1
> 
> 时间：2012-11-25T13:07:02.433
> 
> 标签：sql, oracle, exception, plsql

我创建了一个 plsql 程序来从替换变量中获取一个employee_id。每当我尝试输入字母时，我都会收到一条错误消息，其中 ORA-06550 作为错误号。我把它放在异常部分，但它似乎没有被提出。

这是我在替换变量中输入“kk”时的错误消息...

```
Error report:
ORA-06550: line 13, column 9:
PLS-00201: identifier 'KK' must be declared
ORA-06550: line 13, column 1:
PL/SQL: Statement ignored
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

这是我的 pl/sql 块

```
set serveroutput on
set verify off
declare
  cursor cur(mid employees.employee_id%type) is
  select e.last_name employee, 
         m.last_name manager 
    from employees e 
    join employees m 
      on m.employee_id = e.manager_id
   where m.employee_id=mid;

   rec cur%rowtype;
   m_id employees.employee_id%type;
   ex exception;
   pragma exception_init(ex, -06550);

begin
  m_id := &id;
  open cur(m_id);
  fetch cur into rec;
    dbms_output.put_line('here '||rec.employee || ' ' || rec.manager);
  close cur;

exception
  when ex then dbms_output.put_line('employee_id was not a valid number');
end;
/ 
```

有谁知道为什么我不能捕获该异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T13:08:27.883

您无法在运行时捕获该异常，因为这是编译时错误。

> m_id := &id;

尝试键入`'KK'`而不是`KK`，否则它将被解释为标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:05:17.083

我希望我能发表评论。您不能将代码更改为：

```
m_id := '&id'; 
```

所以你不需要捕获那个异常。

捕获号码异常的更新：

```
declare
    (...)
begin
    m_id := to_number('&id');
    (...)
exception
    when VALUE_ERROR then
         dbms_output.put_line('You provided invalid number'); 
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T20:10:52.213

你的代码是绝对正确的。请使用员工 ID 而不是表中的 KK。它必须是一个数字。例如 101 或 102

在游标的 where 子句中，您使用了“m.employee_id=mid”，并且employee_id 的数据类型是数字。

谢谢：）

# python - 将 .ui 文件转换为 .py 文件时出错

> ID：13551316
> 
> 赞同：3
> 
> 时间：2012-11-25T13:07:52.203
> 
> 标签：python, user-interface, python-2.7, pyqt, pyqt4

我在 Qt4 Designer 中创建了 notepad.ui 文件，并尝试通过命令创建 notepadwindow.py 文件

```
pyuic4.bat notepad.ui -o notepadwindow.py 
```

结果我得到了以下错误

```
Traceback (most recent call):
  File "C:\Python27\Lib\site-packages\PyQt4\uic\pyuic.py" line 31, in <module>
    from PyQt4 import QtCore
Import Error: DLL load failed: %1 then something strange on a different encoding Win32\. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:09:52.600

我猜是一些安装问题

```
pyuic4 notepad.ui > notepad.py 
```

这对我有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T15:16:01.113

我就是这样做的：

```
pyuic4 -x name.ui -o name.py 
```

当然，在 cmd 中转到您的`notepad.ui`文件所在的目录。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-24T15:36:07.793

我遇到了同样的错误并且能够解决它。

虽然我在 64 位 Windows 上工作，但我的 python shell (2.7.11) 和所有扩展包都是 32 位的，而且它们运行良好。我遇到了很多错误，因为我下载的 PyQt4 是 64 位的。当我删除它并安装 32 位 PyQt4 时，问题就消失了，现在我可以将 .ui 文件转换为 .py

也许您的问题与我相同，反之亦然，但 idle 和 PyQt 的版本应该匹配，32 位或 64 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-23T06:49:04.900

我认为至少有两种可能的错误情况

## 1.ImportError: DLL load failed: 找不到指定的模块。

那么你必须检查你的 PyQT 版本是否与你的 python 兼容。换句话说，如果你使用 python 3.3，那么你只能使用 PyQT for python3.3，而 python 3.3 将无法使用 PyQT for python3.4

这就是我遇到的问题。我通过重新安装解决了它

## 2\. 导入错误：DLL 加载失败：%1 然后在不同的编码 Win32 上有些奇怪。

那么这将是一个操作系统问题。如果你使用 32 位 Python，那么你必须使用 32 位 PyQt，64 位也是如此

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T13:37:34.080

打开 cmd 并转到保存 ui 文件的目录，然后在其中编写以下命令。

```
pyuic4 -w notepad.ui > notepadwindow.py 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-26T01:15:56.523

这是我在转换时通常会做的事情：

*   移动到 .ui 文件位置：cd /d D:\yourdirectory
*   YourPyuicLocation -x inputname.ui -o outputname.py

例子 ：

```
C:\Users\ceppy\AppData\Local\Programs\Python\Python35\Lib\site-packages\PyQt5\pyuic5.bat -x Test.ui -o Test.py 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-04T20:16:33.920

使用**相同版本**的python和PyQt。它解决了错误ImportError：DLL加载失败：找不到指定的模块。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-19T07:18:24.023

对我来说，它与路径有关，也许它太长了。我将 .ui 文件复制到另一个文件夹并运行命令并且它工作。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-09-23T18:22:06.087

我对 PyQt5 64 位版本有同样的问题。删除并替换为 32 位版本，然后在命令提示符下输入： `pyuic5 -x "input.ui" -o "output.py"` Ran great。

# javascript - 如何在 JavaScript 中找到具有给定值的属性的对象的完整路径？

> ID：13551321
> 
> 赞同：0
> 
> 时间：2012-11-25T13:08:23.780
> 
> 标签：javascript, debugging

我想遍历从特定根对象开始的对象图，并找到从它开始的哪个路径通向具有给定值的属性的对象。到目前为止，这是我的代码：

```
function findPropertyValue(obj, value) { 
  if (typeof obj.seenBefore === "undefined") {
    // treat for object graph circularity
    obj.seenBefore = true; 

    for (var key in obj) {
      if (obj[key] == value) {
        return key;
      } else {
        if (obj[key]) {
          var foundIt = findInput(obj[key], value);
          if (foundIt) {
            return key + '.' + foundIt;
          }
        }
      }
    }
  }
  return false;
}; 
```

它的问题是它很快就达到了 Chrome 上的调用堆栈大小限制并且无法继续搜索。是否有另一种方法可以做到这一点或仅出于调试目的增加堆栈大小限制？

# django - Dart 认证注册

> ID：13551323
> 
> 赞同：2
> 
> 时间：2012-11-25T13:09:06.303
> 
> 标签：django, authentication, dart

我正在使用 dart 构建单页 javascript 应用程序，处理用户身份验证和注册的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:18:45.067

查看[http://code.google.com/p/google-api-dart-client/](http://code.google.com/p/google-api-dart-client/)了解有关将 oAuth 与 Dart 结合使用的信息。

我注意到你用 标记了这个`django`。我假设您正在以某种方式使用 Django。如果是这样的话，能不能不用Django本身提供的认证呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:16:24.050

现在有易于使用的[Google OAuth2 库，您可以从 Pub 获得](http://pub.dartlang.org/packages/google_oauth2_client)。

[这是一个关于如何使用 Dartwatch 包的很好的指南](http://blog.dartwatch.com/2013/04/sign-in-with-google-using-google-oauth2.html)。

# javascript - jQuery - 查找最后一个隐藏元素 ID

> ID：13551325
> 
> 赞同：0
> 
> 时间：2012-11-25T13:09:23.747
> 
> 标签：javascript, jquery, html

所以我有这样的事情：

```
if ($("div[id^='special-']").is(':visible')&&($(open).is(':hidden'))) {
    $('.menu-show-box').hide('slide', {direction: 'left'}, 200).delay(220);
    var check=0;
} 
```

有许多带`.menu-show-box`类的 DIV，但当时只有一个可见。

他们都有类似的 ID `#special-menu-1`，`#special-menu-2`等等。

这一切都有效，但我想知道如何获得我刚刚成功隐藏的元素的 ID：

```
 $('.menu-show-box').hide('slide', {direction: 'left'}, 
```

如果有人有想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:52:10.480

您正在使用的隐藏（ui-hide）没有回调，但动画有。

```
$('.menu-show-box').animate({width:'toggle'}, 200, function(){
    console.log($(this).attr('id'));
}).delay(220);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:18:08.703

我认为您需要与每个人一起去。

```
$('.menu-show-box').each(function(){
    $(this).hide('slide', {direction: 'left'}, 200).delay(220);
    console.log($(this).attr('id'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T23:22:08.830

像这样解决它：

```
jQuery('.menu-show-box').each(function(){
                        if (jQuery(this).is(':visible')) {
                        lastId = this.id;
                     }
             }); 
```

# php - Jquery .ready（）函数不起作用

> ID：13551329
> 
> 赞同：0
> 
> 时间：2012-11-25T13:09:47.613
> 
> 标签：php, jquery, zend-framework2

其实我在做zendframework-2.0.3。根据 zendframework-ZendSkeletonApplication-zf-release-2.0.3-0-g657a752 我添加了所有脚本但 `.ready()`没有工作。在我的视图页面中，我只添加了这段代码

```
<script>
    $(document).ready(function(){
      alert('ok');
    });
</script> 
```

但它不工作，但 .click() 和其他功能工作。这是我在布局中添加脚本的方式 headTitle('ZF2 '. $this->translate('Skeleton Application'))->setSeparator(' - ')->setAutoEscape(false) ?>

```
 <?php echo $this->headMeta()->appendName('viewport', 'width=device-width, initial-scale=1.0') ?>

    <!-- Le styles -->
    <?php echo $this->headLink(array('rel' => 'shortcut icon', 'type' => 'image/vnd.microsoft.icon', 'href' => $this->basePath() . '/images/favicon.ico'))
                    ->prependStylesheet($this->basePath() . '/css/foundation.min.css')
                    ->prependStylesheet($this->basePath() . '/css/foundation.css')
                    ->prependStylesheet($this->basePath() . '/css/app.css')
                    ?>

    <!-- Scripts -->
   <?php echo $this->headScript()->prependFile($this->basePath() . '/js/html5.js', 'text/javascript', array('conditional' => 'lt IE 9',))
                                  ->prependFile($this->basePath() . '/js/bootstrap.min.js')
                                  ->prependFile($this->basePath() . '/js/app.js', 'text/javascript')
                                  ->prependFile($this->basePath() . '/js/jquery.foundation.orbit.js', 'text/javascript')
                                  ->prependFile($this->basePath() . '/js/jquery.js', 'text/javascript')
                                  ->prependFile($this->basePath() . '/js/validation.js', 'text/javascript')
                                  ->prependFile($this->basePath() . '/js/jquery.foundation.alerts.js', 'text/javascript')
                                  ->prependFile($this->basePath() . '/js/jquery.foundation.forms.js', 'text/javascript')
                                  ->prependFile($this->basePath() . '/js/jquery.foundation.buttons.js', 'text/javascript')
                                  ->prependFile($this->basePath() . '/js/date.js', 'text/javascript')
                                   ?>

</head> 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:21:52.697

嗯试试

```
<script type="text/javascript">
    $(document).ready(function(){
      alert('ok');
    });
</script> 
```

**更新**

**哦，**我看到你有错误的结束标签

您正在使用

```
<script> 
```

将其更改为

```
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T16:56:01.293

我在 2.0.3 中发现的是，如果您`body onload=`的文档中有，该`ready`功能将不会运行。它在版本 1.4.2 中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T21:33:06.317

我只是遇到了同样的问题，原因是我在布局的底部加载了 headScript 文件，并且视图中的脚本没有在文档准备好时触发。

解决方案是在布局的 head 部分加载 jQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-27T16:28:00.443

在php中遇到同样的问题。
而不是
`<script type="text/javascript" src="Scripts/jquery.js" />`
我将其更改为
`<script type="text/javascript" src="Scripts/jquery.js"></script>`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-25T13:12:23.297

此方法已被废弃。

利用：

```
$(function() {
   // code that will be executed on DOM ready
}); 
```

# multithreading - 在 Haskell 程序中分析多线程性能——使用并行策略没有加速

> ID：13551330
> 
> 赞同：6
> 
> 时间：2012-11-25T13:09:50.837
> 
> 标签：multithreading, haskell, parallel-processing, profiling

在尝试在 Haskell 程序中添加多线程功能后，我注意到性能根本没有提高。追着它，我从threadscope得到了以下数据：

![图 1](../Images/a07c749b3505d706938d4692649c0296.png) 绿色表示正在运行，橙色表示垃圾回收。 ![图 2](../Images/8bbaa37c525ee8bab1a9c2dfc2cbb4e7.png) ![图 3](../Images/39435bde6eaafb32a08c0f17b97791a0.png) 这里的绿色竖条表示 spark 创建，蓝色条表示并行 GC 请求，浅蓝色条表示线程创建。 ![图 4](../Images/ae4f86b6dee6c0948168145e14a9530e.png) 标签是：spark created、requesting parallel GC、create thread n、steak from cap 2。

平均而言，我在 4 个内核上只获得了大约 25% 的活动，这与单线程程序相比根本没有任何改进。

当然，如果没有对实际程序的描述，这个问题将是无效的。本质上，我创建了一个可遍历的数据结构（例如树），然后在其上 fmap 一个函数，然后将其输入图像写入例程（解释在程序运行结束时明确的单线程段，过去 15 秒） . 函数的构造和 fmapping 都需要大量的时间来运行，尽管第二个时间稍长一些。

上面的图表是通过在图像写入消耗该数据结构之前为该数据结构添加一个 parTraversable 策略来制作的。我还尝试在数据结构上使用 toList，然后使用各种并行列表策略（parList、parListChunk、parBuffer），但对于各种参数（即使使用大块），每次的结果都是相似的。
我还尝试在将函数映射到可遍历数据结构之前对其进行全面评估，但发生了完全相同的问题。

以下是一些额外的统计数据（针对同一程序的不同运行）：

```
 5,702,829,756 bytes allocated in the heap
     385,998,024 bytes copied during GC
      55,819,120 bytes maximum residency (8 sample(s))
       1,392,044 bytes maximum slop
             133 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause 
  Gen  0     10379 colls, 10378 par    5.20s    1.40s     0.0001s    0.0327s
  Gen  1         8 colls,     8 par    1.01s    0.25s     0.0319s    0.0509s

  Parallel GC work balance: 1.24 (96361163 / 77659897, ideal 4)

                        MUT time (elapsed)       GC time  (elapsed)
  Task  0 (worker) :    0.00s    ( 15.92s)       0.02s    (  0.02s)
  Task  1 (worker) :    0.27s    ( 14.00s)       1.86s    (  1.94s)
  Task  2 (bound)  :   14.24s    ( 14.30s)       1.61s    (  1.64s)
  Task  3 (worker) :    0.00s    ( 15.94s)       0.00s    (  0.00s)
  Task  4 (worker) :    0.25s    ( 14.00s)       1.66s    (  1.93s)
  Task  5 (worker) :    0.27s    ( 14.09s)       1.69s    (  1.84s)

  SPARKS: 595854 (595854 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled)

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time   15.67s  ( 14.28s elapsed)
  GC      time    6.22s  (  1.66s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time   21.89s  ( 15.94s elapsed)

  Alloc rate    363,769,460 bytes per MUT second

  Productivity  71.6% of total user, 98.4% of total elapsed 
```

我不确定我可以提供哪些其他有用的信息来帮助回答。分析并没有发现任何有趣的东西：它与单核统计数据相同，只是添加的 IDLE 占用了 75% 的时间，正如上面所预期的那样。

发生了什么阻碍了有用的并行化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T07:05:31.457

很抱歉我无法及时提供代码来帮助受访者。我花了一段时间才弄清楚问题的确切位置。

问题如下：我正在映射一个函数

```
f :: a -> S b 
```

在可遍历的数据结构上

```
structure :: T a 
```

其中 S 和 T 是两个可遍历的函子。

然后，在使用parTraversable时，我错误地写了

```
Compose (fmap f structure) `using` parTraversable rdeepseq 
```

代替

```
Compose $ fmap f structure `using` parTraversable rdeepseq 
```

所以我错误地使用 Compose TS 的 Traversable 实例来执行多线程（使用 Data.Functor.Compose）。

（这看起来应该很容易发现，但我花了一段时间才从代码中提取出上述错误！）

现在看起来好多了！

![图 1](../Images/634ea4ace6f511ff604a385090b17abb.png)

![图 2](../Images/61fa923c31a5da1c8bbcc3de02ceded4.png)

# java - Java为当前线程添加进度条

> ID：13551331
> 
> 赞同：0
> 
> 时间：2012-11-25T13:09:56.787
> 
> 标签：java, swing, progress-bar

我如何添加一个`progressbar`可以显示完成当前流程需要多长时间的内容？
我确实知道如何以`progressbar`简单的方式构造和使用 a ，但我不知道如何将它们与流程绑定。

例如，当我单击一个按钮时，我想打开一个 jfilechooser，这可能需要一些时间。我希望用户知道应用程序没有崩溃，并了解 jfilechooser 出现之前需要多长时间。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:28:55.330

问题是，在处理不是您编写的课程时，将进度条与实际进度联系起来并不容易。

如果您想将其与某些任务的进度绑定，请执行以下步骤：

1.  为耗时任务分配线程
2.  使用父类中的静态字段作为您在任务中完成的进度。（可能是从 1 到 100 的计数器）
3.  每个特定时间段（1 秒）检查该静态字段并使用它设置进度条。
4.  在您的任务中，您将漫长的过程划分为多个固定步骤（即打开文件、处理、准备提取的数据……等）。
5.  在每一个坚实的步骤之后，用到目前为止的进度更新父类中的静态字段。

确保使用信号量来规范写入和读取静态字段的过程。

# c# - WPF中的回历和公历日历？

> ID：13551333
> 
> 赞同：2
> 
> 时间：2012-11-25T13:10:21.937
> 
> 标签：c#, .net, wpf, vb.net, hijri

我需要使用控件 System.Windows.Controls.Calendar 来显示回历日期并在同一窗口中显示公历日期。

我尝试过线程文化，但结果是所有的日历都被更改了，并且更改仅在日历控件的标题上，即写在数字网格上的日期仍然相同。

我尝试使用自定义用户控件，有人编写的开源项目，但是我发现问题太多，这些项目很难自定义，所以我需要使用原生控件，以及处理控件的原生方式..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T13:14:00.140

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.calendar.aspx)，`System.Windows.Controls.Calendar`它只支持公历 - 所以基本上使用内置控件做你想做的事是不可能的......

您将需要自己构建这样的控件或购买一些带有 Hijri 支持的控件包...

有关在 .NET 中处理回历日期的一些信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/bb882586%28v=vs.95%29.aspx)。

编辑：

我能找到的唯一支持 Hijri 的日历控件是[here](http://www.codeproject.com/Articles/33332/Persian-Diary-in-WPF)和[here](http://www.codeproject.com/Articles/23226/Windows-Hijri-Calendar)和**[here](http://www.codeproject.com/Articles/45684/Culture-Aware-Month-Calendar-and-Datepicker)**。

.NET 控制世界中的“更大”供应商（如 Telerik、DevExpress ......）不支持回历......他们都有一些“问题跟踪”，表示他们将考虑增加支持，但这些问题多年来一直存在到目前为止没有任何进展:-(

# r - 如何防止使用大文件的 R 循环中的内存问题？

> ID：13551342
> 
> 赞同：4
> 
> 时间：2012-11-25T13:11:22.517
> 
> 标签：r, memory-management, large-files

我正在尝试使用大文件/矩阵（Windows Vista 64 位，4G RAM）在 R（2.15.0）中运行 for 循环。如果我对这个循环进行一次迭代，它工作正常。但是如果我在多个文件上运行循环（我想做数百个），我的内存就会用完。我试图在循环结束时删除文件，但它不会将内存返回给 Windows（正如我在 Windows 任务管理器中看到的那样）。似乎 R 试图从我的操作系统中获取越来越多的内存，而不是在删除文件后使用内部可用的内存。有什么解决方法吗？如果您需要有关研究问题的更多详细信息，我很乐意分享其余部分以找到合适的解决方案。

已经谢谢了！干杯，罗伯特

```
> library(VariantAnnotation)
> fi<-list.files("E:/1000genomes/chr22",full.names=T)
> for(i in 1:length(fi)) {
+   input=paste("smaller.00", i, ".gz", sep = "")
+   output=paste("geno.", i, ".RData", sep = "")
+   vcf = readVcf(input, "hg19")
+   genotypes=geno(vcf)$GT[,]
+   save(genotypes, file=output)
+   gc()
+   }
Error: scanVcf: Realloc could not re-allocate memory (873600000 bytes)
  path: E:\1000genomes\chr22\smaller.002.gz
In addition: Warning messages:
1: In doTryCatch(return(expr), name, parentenv, handler) :
  Reached total allocation of 3963Mb: see help(memory.size)
2: In doTryCatch(return(expr), name, parentenv, handler) :
  Reached total allocation of 3963Mb: see help(memory.size)
> gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  4543758 242.7   12363911 660.4  18010556 961.9
Vcells 19536404 149.1   61090604 466.1 119317584 910.4 
```

如果我在脚本末尾删除东西：

```
+   save(genotypes, file=output)
+   rm(vcf)
+   rm(genotypes)
+   rm(input)
+   rm(output)
+   rm(getal)
+   rm(i)
+   }
Error: scanVcf: Calloc could not allocate memory (18 of 1 bytes)
  path: E:\1000genomes\chr22\smaller.001.gz
In addition: Warning message:
In doTryCatch(return(expr), name, parentenv, handler) :
  Reached total allocation of 3963Mb: see help(memory.size)
> gc()
          used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells 2355472 125.8   10798339 576.7  16872405 901.1
Vcells 1992717  15.3   62280756 475.2 105556441 805.4 
```

我在网上发现从命令提示符运行可能会起作用，所以我把脚本放在R-root目录下的“runthis.R”文件中并运行：Rscript.exe runthis.R --no-save --no -restore 它运行了一个额外的文件，然后报告了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:05:58.300

不知何故，我在分析中犯了一个错误。现在我发现（当然经过很多麻烦）确实 rm() 后跟 gc() 命令确实适用于我的情况！感谢 mneI 指出这一点:)

# c# - 变量不会在我的代码上增加/减少

> ID：13551345
> 
> 赞同：2
> 
> 时间：2012-11-25T13:11:29.813
> 
> 标签：c#, messagebox

```
if (getchar == '+') {
    answer = getnum1+getnum2;   // if the random operation is add, it will add
    addtemp++;                 // <---- disregard this
    if (answer == getanswer)   //  the answer from my textbox which is
    {                         //  user-input it is stored on "getanswer"
        correct++;            // it is compared if its correct or wrong
        addcomp++;
    }
    else { wrong++; }
}
else if (getchar == '-') {
    subtemp++;
    answer = nextValue - nextValue1;
    if (answer == getanswer) {
        correct++;
        subcomp++;
    }
    else { wrong++; }
}
else if (getchar == '*') {
    multemp++;
    answer = nextValue * nextValue1;
    if (answer == getanswer) {
        correct++;
        mulcomp++;
    }
    else { wrong++; }
}
else if (getchar == '/') {
    divtemp++;
    answer = nextValue / nextValue1;
    if (answer == getanswer) {
        correct++;
        divcomp++;
    }
    else { wrong++; }
}
else if (getchar == '%') {
    modtemp++;
    answer = nextValue % nextValue1;
    if (answer == getanswer) {
        correct++;
        modcomp++;
    }
    else { wrong++; }
} 
```

C# 编程帮助！现在，每当我按下“分数”按钮时，它都是 MessageBox.Show(正确或错误)，值是错误的。它有时会增加纠正但只有一次或两次。我的代码有问题吗？

///////////////////////////////////////// ///////// @boncodigo 的完整代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace A1_ALS_Noroña
{
    public partial class Form1 : Form
    {
        int minV=0, maxV=0,ques=0,tempques=1;

        int addtemp, subtemp, multemp, divtemp, modtemp;
        int addcomp, subcomp, mulcomp, divcomp, modcomp;
        int answer,getanswer;
        int getnum1, getnum2;

        char getchar;
        char[] select = new char[5];
        int count=0;
        int correct, wrong;

        public Form1()
        {
            InitializeComponent();
        }

        private void bttnstart_Click(object sender, EventArgs e)
        {
            bttnanswer.Enabled = true;
            grpbox1.Enabled = false;
            bttnanswer.Enabled = true;
            lblnum1.Visible = true;
            lblnum2.Visible = true;
            lbloperator.Visible = true;
            bttnstop.Enabled = true;
            bttnscore.Enabled = true;
            bttnstart.Enabled = false;

            Random random = new Random();
            int nextValue = random.Next(minV, maxV);
            int nextValue1 = random.Next(minV, maxV);
            lblnum1.Text = nextValue.ToString();
            lblnum2.Text = nextValue1.ToString();

            var rand = new Random();

            char num = select[rand.Next(count)];
            lbloperator.Text = Convert.ToString(num);
        }

        private void txtboxmin_TextChanged(object sender, EventArgs e)
        {
            minV = Convert.ToInt32(txtboxmin.Text);
        }

        private void txtbxmax_TextChanged(object sender, EventArgs e)
        {
            maxV = Convert.ToInt32(txtbxmax.Text);
        }

        private void bttnexit_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }

        private void bttnstop_Click(object sender, EventArgs e)
        {
            MessageBox.Show("APPLICATION STOP! The application will restart.");
            Application.Restart();
        }

        private void bttnanswer_Click(object sender, EventArgs e)
        {

            tempques++;
            Random random = new Random();
            int nextValue = random.Next(minV,maxV);
            int nextValue1 = random.Next(minV, maxV);
            lblnum1.Text = nextValue.ToString();

            var rand = new Random();
            char num = select[rand.Next(count)];
            lbloperator.Text = Convert.ToString(num);
            lblnum2.Text = nextValue1.ToString();
            getnum1 = Convert.ToInt32(lblnum1.Text);
            getnum2 = Convert.ToInt32(lblnum2.Text);
            getanswer = Convert.ToInt32(txtbxans.Text);
            getchar = Convert.ToChar(lbloperator.Text);

            if (getchar == '+')
            {

                answer = getnum1 + getnum2;
                addtemp++;              
                if (answer == getanswer)  
                {                      
                    correct++;            
                    addcomp++;
                }
                else
                {
                    wrong++;
                }
            }
            else if (getchar == '-')
            {
                subtemp++;
                answer = nextValue - nextValue1;
                if (answer == getanswer)
                {
                    correct++;
                    subcomp++;
                }
                else
                {
                    wrong++;
                }
            }
            else if (getchar == '*')
            {
                multemp++;
                answer = nextValue * nextValue1;
                if (answer == getanswer)
                {
                    correct++;
                    mulcomp++;
                }
                else
                {
                    wrong++;
                }
            }
            else if (getchar == '/')
            {
                divtemp++;
                answer = nextValue / nextValue1;
                if (answer == getanswer)
                {
                    correct++;
                    divcomp++;
                }
                else
                {
                    wrong++;
                }
            }
            else if (getchar == '%')
            {
                modtemp++;
                answer = nextValue % nextValue1;
                if (answer == getanswer)
                {
                    correct++;
                    modcomp++;
                }
                else
                {
                    wrong++;
                }
            }

        }

        private void txtbxques_TextChanged(object sender, EventArgs e)
        {
            ques = Convert.ToInt32(txtbxques.Text);

        }

        private void chkbxtimer_CheckedChanged(object sender, EventArgs e)
        {
            rdoeasy.Enabled = true;
            rdomed.Enabled = true;
            rdohard.Enabled = true;
        }

        private void chkboxAdd_CheckedChanged(object sender, EventArgs e)
        {

            if (chkboxAdd.Checked == true)
            {
                select[count] = '+';
                count++;
            }
            else if (chkboxAdd.Checked == false) 
            {
                Array.Clear(select, 0, select.Length);
                count--;
            }

        }

        private void chkboxSub_CheckedChanged(object sender, EventArgs e)
        {
            if (chkboxSub.Checked == true)
            {
                select[count] = '-';
                count++;

            }
            else if (chkboxSub.Checked == false)
            {
                Array.Clear(select, 0, select.Length);
                count--;
            }

        }

        private void chkboxMul_CheckedChanged(object sender, EventArgs e)
        {
            if (chkboxMul.Checked == true)
            {
                select[count] = '*';
                count++;

            }
            else if (chkboxMul.Checked == false)
            {
                Array.Clear(select, 0, select.Length);
                count--;
            }

        }

        private void chkboxDiv_CheckedChanged(object sender, EventArgs e)
        {
            if (chkboxDiv.Checked == true)
            {
                select[count] = '/';
                count++;

            }
            else if (chkboxDiv.Checked == false)
            {
                Array.Clear(select, 0, select.Length);
                count--;
            }
        }

        private void chkboxMod_CheckedChanged(object sender, EventArgs e)
        {
            if (chkboxMod.Checked == true)
            {
                select[count] = '%';
                count++;

            }
            else if (chkboxMod.Checked == false)
            {
                Array.Clear(select, 0, select.Length);
                count--;
            }
        }

        private void bttnscore_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Correct Answer"+correct);
        }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:04:31.137

提前一件事：我不知道你的错误在哪里。这里只是一些提示，我认为如果您考虑它们会很有意义，以避免将来出现类似的错误：

如果我必须查看这段代码，我的主要问题是重复代码的数量，其中非常相似的多行长模式被一遍又一遍地复制。我认为在整个代码中你没有调用任何方法，而是立即在事件处理程序中实现东西，从而重复你自己并增加错误的可能性。让我们看一下这段代码：

```
if (chkboxSub.Checked == true)
{
    select[count] = '-';
    count++;

}
else if (chkboxSub.Checked == false)
{
    Array.Clear(select, 0, select.Length);
    count--;
} 
```

除了当您向选择数组添加多个运算符时出现计数错误外，此代码会重复多次。让我们将代码提取到一个方法中，并使更改的位可参数化：

```
void AddOrRemoveOperator(bool isChecked, char operatorChar) {
  if (isChecked) {
    select[count] = operatorChar;
    count++;
  }
  else {
    Array.Clear(select, 0, select.Length);
    count--;
  }
} 
```

现在您可以多次调用该方法，例如：

```
AddOrRemoveOperator(chkboxSub.Checked, '-'); 
```

下一点是缺乏 .NET 基类库知识 (BCL)。`List<T>`例如，使用 a而不是数组不是更容易吗？

上述方法变为：

```
void AddOrRemoveOperator(bool isChecked, char operatorChar) {
  if (isChecked) {
    select.Add(operatorChar);
  }
  else {
    select.Clear();
  }
} 
```

观察：除加法运算外的所有运算符都使用值 nextValue、nextValue1，而加法运算则使用 getnum1 和 2。这是有意的吗？

除了将代码块提取`bttnanswer_Click`到自己的类中之外，您还可以将重复代码提取到方法中：

```
 void PerformComparison(Func<int> answerProvider, 
    ref int operatorCount, 
    ref int operatorSpecificCorrectCount)
 {
    var answer = answerProvider();
    operatorCount++;
    if (answer == getanswer) {
        correct++;
        operatorSpecificCorrectCount++;
    }
    else {
        wrong++;
    }
 } 
```

该代码仍然会让我发疯（因为您编写的课程*缺乏凝聚力*），但我们已经与代码重复作斗争。现在您可以像这样调用该方法：

```
if (getchar == '+')
{
  PerformComparison(()=>getnum1 + getnum2, ref addtemp, ref addcomp);
} 
```

有许多技术可以将代码变形为更易于测试和维护（重构）的形式，到目前为止我们只使用了*提取方法。*有关更多技术的书[重构：改进现有代码的设计](https://rads.stackoverflow.com/amzn/click/com/0201485672)仍然是强烈推荐的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:15:54.083

这可能是浮点精度问题（可能您的用户输入 3 并且程序计算 2.9999999）。调试您的代码并确定未正确添加的一种情况。

# c++ - 使用opengl创建交互式对话框

> ID：13551346
> 
> 赞同：0
> 
> 时间：2012-11-25T13:11:37.477
> 
> 标签：c++, c, opengl

如何使用 OpenGL 创建身份验证屏幕？有教程或网页吗？

注意：我还没有找到，如果我找到了，我不会问这个问题。如果有任何页面，只需给出一个名称，以便我可以删除这个问题。

请查看[http://docs.oracle.com/cd/E13169_01/ales/docs22/integrateappenviron/wwimages/aldsp4%20client%20login.gif上的图片](http://docs.oracle.com/cd/E13169_01/ales/docs22/integrateappenviron/wwimages/aldsp4%20client%20login.gif)

编辑：我想从屏幕输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:57:53.243

OpenGL 不是您正在寻找的库，您可以用它做很多事情，但这不是其中之一，对于图形用户界面，您可以使用 GLUI [http://en.wikipedia.org/wiki/OpenGL_User_Interface_Library](http://en.wikipedia.org/wiki/OpenGL_User_Interface_Library)

对于一些更清晰的你可以使用 AntTweakBar [http://www.antisphere.com/Wiki/tools:anttweakbar](http://www.antisphere.com/Wiki/tools%3aanttweakbar)

两者都与 OpenGL 很好地集成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:00:36.870

您可以通过仅绘制所有按钮并实现一种文本字段来强制执行此操作，但这不是 OpenGL 的用途。
在您的位置，我会使用诸如用于 Mac 平台的 Objective-C 和用于 Windows 平台的 C# 之类的语言。如果您想坚持使用 C++，则使用 Qt 之类的库。

# php - 在 MS Expression 中查看 PHP 结果

> ID：13551350
> 
> 赞同：0
> 
> 时间：2012-11-25T13:12:10.920
> 
> 标签：php, ide, microsoft-expression-web

我是[Microsoft Expression Web](http://www.microsoft.com/expression/products/Web_Overview.aspx) 4 的初学者。我尝试编写 PHP 代码，但无法查看代码结果。在 MS Expression 中查看 PHP 结果需要什么配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T13:14:30.700

据我所知，您正在编写 PHP 代码，使用 Microsoft Expression Web 4 作为您的编辑器，并希望从最终用户的角度查看页面的结果。

由于 PHP 代码需要首先由服务器解释，因此您不能只在 Web 浏览器中打开 PHP 文件并查看最终用户会看到什么。

通常，您需要在您的机器或远程机器上设置 Web 服务器。但是，Microsoft 提供了一个带有 Expression Web 的内置服务器，称为 Expression Development Server。据我所知，它旨在允许开发人员在本地计算机上快速查看动态网页，如 PHP 或 ASP.NET，而无需设置自己的 Web 服务器。

上手相当容易，几乎只涉及安装 PHP。我使用了 Expression Web 4 的免费版本并遵循了本教程：http: [//msdn.microsoft.com/en-us/expression/ee662148.aspx](http://msdn.microsoft.com/en-us/expression/ee662148.aspx)

注意：您需要确保要预览的 PHP 文件是“站点”的一部分。`Site-->New Site`可以通过位于主菜单中的“站点”来创建。

# sql - 如何连接具有特定要求的 4 个表？

> ID：13551355
> 
> 赞同：1
> 
> 时间：2012-11-25T13:12:56.887
> 
> 标签：sql, sql-server, join, sum

我有 4 张桌子。

```
Procedures

Name   Cost
Proc1  10
Proc2  20
Proc3  30
Proc4  40

MaterialsUsed

NameOfTheProcedure  MaterialUsed  AmountOfMaterialUsed
proc1               mat1              1
proc2               mat2              3
proc3               mat3              2
proc4               mat4              1

Materials

Name   Id   Price
mat1   1    10
mat2   2    20
mat3   3    30
mat4   4    40

ProceduresDone

ClientID   NameOfProcedure  Date
Client1    proc1            2012-11-24
Client2    proc2            2012-11-23
Client3    proc3            2012-11-24
Client4    proc4            2012-11-23 
```

我需要编写一个查询来返回在特定日期完成的程序。它应该有 3 列（NameOfTheProcedure、HowManyTimesThatProcedureWasDoneInThatDay、TotalPrice）。TotalPrice 列包括来自材料表的价格和来自过程一的价格。

是否可以通过单个查询来做到这一点？

编辑：

示例结果应该类似于（日期为 2012-11-24）：

```
NameOfTheProcedure    AmountOfTimesProcedureWasDoneThatDay    TotalPrice
proc1                 1                                       20
proc3                 1                                       90 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:48:11.667

尝试这样的事情，

```
SELECT  a.NameOfTheProcedure,
        COUNT(a.NameOfTheProcedure) AmountOfTimesProcedureWasDoneThatDay,
        SUM(b.AmountOfMaterialUsed * d.Price) +
        SUM(c.Cost) TotalPrice
FROM    ProceduresDone a
        INNER JOIN MaterialsUsed b
            ON a.NameOfProcedure = b.NameOfTheProcedure
        INNER JOIN Procedures c
            ON c.Name = a.NameOfProcedure
        INNER JOIN Materials d
            ON b.MaterialUsed = d.Name
WHERE   a.Date = '2012-11-24' 
```

# c# - 从 URLHelper 之类的 LiveStream 中获取 rtmp URL

> ID：13551356
> 
> 赞同：1
> 
> 时间：2012-11-25T13:13:04.640
> 
> 标签：c#, url, rtmp

有人知道我如何从 C# 中的直播中获取 rtmp url 吗？

我会插入一个 url，然后我需要 rtmp url。

工具 URLHelper 具有该功能。

我希望任何人都可以提供帮助。

此致

# eclipse - Eclipse CDT 中的 UI 设计器

> ID：13551357
> 
> 赞同：3
> 
> 时间：2012-11-25T13:13:05.643
> 
> 标签：eclipse, qt, user-interface, eclipse-cdt

我想为 c++ 设计一个 GUI，我正在使用 eclipse JUNO CDT (x64)，你知道除了 QT 插件之外的另一个插件吗？还是有win64 QT版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:56:30.680

我建议您安装 QtSDK，其中包括 QtCreator、设计器、助手、语言学家 ..等。您可以使用创建 .pro 文件和表单文件的 QtCreator 创建新的 Qt 项目。您可以使用设计器设计您的 .ui(form) 文件，然后在 Eclipse CDT 中将您的项目作为 Makefile 项目打开，这是一个比 QtCreator 更好的 IDE。

[http://qt.digia.com/Product/Qt-SDK/](http://qt.digia.com/Product/Qt-SDK/)

# java - 初始化地图 > - Java 7

> ID：13551358
> 
> 赞同：1
> 
> 时间：2012-11-25T13:13:08.227
> 
> 标签：java

`Map x<Apartment,Vector<Expense>>`如果我`@override`使用 Map 方法，我需要初始化它允许我

```
Description Resource    Path    Location    Type
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.isEmpty()   Repository.java /proj_individual/src/repo   line 12 Java Problem
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.size()  Repository.java /proj_individual/src/repo   line 12 Java Problem
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.keySet()    Repository.java /proj_individual/src/repo   line 12 Java Problem
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.remove(Object)  Repository.java /proj_individual/src/repo   line 12 Java Problem
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.entrySet()  Repository.java /proj_individual/src/repo   line 12 Java Problem
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.putAll(Map<? extends Apartment,? extends Vector<Expense>>)  Repository.java /proj_individual/src/repo   line 12 Java Problem
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.values()    Repository.java /proj_individual/src/repo   line 12 Java Problem
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.clear() Repository.java /proj_individual/src/repo   line 12 Java Problem
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.get(Object) Repository.java /proj_individual/src/repo   line 12 Java Problem
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.containsKey(Object) Repository.java /proj_individual/src/repo   line 12 Java Problem
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.containsValue(Object)   Repository.java /proj_individual/src/repo   line 12 Java Problem
The type new Map<Apartment,Vector<Expense>>(){} must implement the inherited abstract method Map<Apartment,Vector<Expense>>.put(Apartment, Vector<Expense>) Repository.java /proj_individual/src/repo   line 12 Java Problem 
```

但是我在网上看到 Map 不是一个接口，它是一个类，是我做错了，还是必须这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T13:16:18.740

```
Map<Apartment, Vector<Expense>> map = new HashMap<Apartment, Vector<Expense>>(); 
```

`Map`是一个接口（正如[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)所说——javadoc 应该是您的参考，而不是 Internet）。您需要选择一种实现（HashMap 是最常用的一种，但还有其他实现，具有其他特性）。

你也应该忘记 Vector。它不应该再使用了。使用 List 作为类型，使用 ArrayList 作为实现（还有其他 List 实现，但 ArrayList 几乎总是你想要的）：

```
Map<Apartment, List<Expense>> map = new HashMap<Apartment, List<Expense>>(); 
```

或者干脆

```
Map<Apartment, List<Expense>> map = new HashMap<>(); 
```

如果您在 Java 7 下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T13:16:34.497

> 但是我在互联网上读到 Map 不是界面

获取有关编程语言信息的最佳位置始终是官方文档。说到java，请务必先看看：[http ://docs.oracle.com/javase/7/docs/](http://docs.oracle.com/javase/7/docs/)

[地图](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)是一个界面。来自 Java 文档 API：

> 将键映射到值的对象。地图不能包含重复的键；每个键最多可以映射到一个值。这个接口代替了 Dictionary 类，它是一个完全抽象的类，而不是一个接口。

[我建议您使用HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)等实现类之一。来自 Java API 文档：

> Map 接口的基于哈希表的实现。此实现提供所有可选的映射操作，并允许空值和空键。（HashMap 类大致相当于 Hashtable，除了它是不同步的并且允许空值。）这个类不保证映射的顺序；特别是，它不保证订单会随着时间的推移保持不变。

您的代码可以通过简单地替换`Map`for来运行`HashMap`，如下所示：

```
new HashMap<Apartment,Vector<Expense>> 
```

我希望它有所帮助。干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T13:16:20.840

请在此处查看：http: [//docs.oracle.com/javase/6/docs/api/java/util/Map.html](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

您可以使用 HashMap 进行实例化。

# ruby-on-rails - Railstutorial：将 Flash 消息放入部分会产生错误“nil:NilClass 的未定义方法 `each'”？

> ID：13551360
> 
> 赞同：6
> 
> 时间：2012-11-25T13:13:36.800
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, railstutorial.org, partials

> **可能重复：**
> [部分中的 Flash 消息（Rails 3）](https://stackoverflow.com/questions/3111844/flash-messages-in-partials-rails-3)

我正在做 Michael Hartl 的 Railstutorial 并[列出 7.26](http://ruby.railstutorial.org/chapters/sign-up#code-layout_flash)将 flash 消息添加到应用程序布局：

```
<!DOCTYPE html>
<html>
.
.
.
  <body>
    <%= render 'layouts/header' %>
    <div class="container">
      <% flash.each do |key, value| %>
        <div class="alert alert-<%= key %>"><%= value %></div>
      <% end %>
      <%= yield %>
      <%= render 'layouts/footer' %>
      <%= debug(params) if Rails.env.development? %>
    </div>
    .
    .
    .
  </body>
</html> 
```

这工作正常。

但是，我试图通过在我的部分文件夹中创建一个 _flash.html.erb 来清理这段代码......

```
<% flash.each do |key,value| %>
  <%= content_tag(:div, value, class: "alert alert-#{key}") %>
  <!-- <div class="alert alert-<%= key %>"><%= value %></div> -->
<% end %> 
```

...而不是使用...

```
<%= render 'partials/flash' %> 
```

...在我的应用程序布局中，我的所有 Rspec 测试都开始失败，每个测试都显示以下消息：

```
 Failure/Error: before { visit signup_path }
 ActionView::Template::Error:
   undefined method `each' for nil:NilClass 
```

关键问题似乎是 flash 为零，因为将我的 _flash 部分包装在这样的 if 语句中......

```
<% unless flash.empty? %>
  <% flash.each do |key,value| %>
    <%= content_tag(:div, value, class: "alert alert-#{key}") %>
    <!-- <div class="alert alert-<%= key %>"><%= value %></div> -->
  <% end %>
<% end %> 
```

...产生与上述有关 NilClass 的相同错误消息，并将其包装在这样的 if 语句中...

```
<% if flash %>
  <% flash.each do |key,value| %>
    <%= content_tag(:div, value, class: "alert alert-#{key}") %>
    <!-- <div class="alert alert-<%= key %>"><%= value %></div> -->
  <% end %>
<% end %> 
```

... 使 flash 消息无法正常工作（因为 'if flash' 始终为假）。

我有两个相关的问题：

1.  为什么/如何使用 partials/flash 解决方案改变 Rails 应用程序的行为？

2.  如何更改我的部分/闪存，以便它可以工作？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T14:27:08.463

使用参数/值的散列设置局部变量以传递给部分

```
<%= render :partial => "partials/flash", :locals => {:flash => flash} %> 
```

# azure - 对 Windows Azure 网站使用登台和生产配置

> ID：13551361
> 
> 赞同：9
> 
> 时间：2012-11-25T13:13:39.180
> 
> 标签：azure, azure-web-app-service

我有一个 ASP.NET MVC 4 网站。我是 Windows Azure 的新手，所以我想我会尝试做一个完整的发布周期。我想在签到时发布到暂存区。然后，如果我喜欢这种变化，我想将它们推向生产。

这在 Windows Azure 网站上可行吗？如果是这样，怎么做？目前，我有一个 Windows Azure 网站。我可以成功地将站点发布到 Windows Azure。但是，我似乎无法弄清楚如何进行登台/生产配置。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T13:18:02.350

几天前，布雷迪·加斯特（Brady Gaster）在博客中谈到了这一点，为您提供了两种选择：

*   [使用不同的分支](http://www.bradygaster.com/multiple-environments-with-windows-azure-web-sites)（例如，如果您使用 GitHub，则使用暂存分支很好）
*   [使用 web.config 转换](http://www.bradygaster.com/managing-multiple-windows-azure-web-site-environments-using-visual-studio-publishing-profiles)（使用暂存发布配置文件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-11T07:32:19.280

在较新的资源模型中，Azure 提供部署槽（应用服务 | 部署 | 部署槽），可用于发布配置文件和粘性配置设置（应用服务 | 设置 | 应用程序设置 | 应用设置 | 将您的配置放在这里并选择槽设置检查盒子，使其专属于环境，如登台和生产。

查看微软官方链接了解[更多信息](https://docs.microsoft.com/en-us/azure/app-service/web-sites-staged-publishing)

**注意**：这个问题很老，建议的解决方案是在云服务上，这个问题的解决方案是由 Azure 的较新模型资源管理器和应用程序服务提供的，它为您提供了管理员可以随时交换的部署槽，并为您提供进行基于插槽的粘性配置的能力（如问题中所问，即一种基于环境的设置的方法）。

# google-maps - 谷歌地图中的弹出样式

> ID：13551365
> 
> 赞同：1
> 
> 时间：2012-11-25T13:14:09.327
> 
> 标签：google-maps

我使用markerclusterer并显示这样的弹出信息：（在我的js文件中）

```
var infowindow =  new google.maps.InfoWindow(); 
```

之后我使用：

```
google.maps.event.addListener(marker, 'click', (function(marker, i) {
  return function() {
    infowindow.setContent(
        '<div id="wrapper">'+
        '<div id="header">'+data.photos[i].owner_name+':</div>'+
        '<div id="content">'+data.photos[i].photo_title+'</div>'+
        '</div>'
    );
    infowindow.open(map, marker);
  }
})(marker, i)); 
```

在这种情况下，我只能自定义该信息，即我放入框中的内容（ infowindow.setContent ）

但是如何自定义弹出窗口？如果我想在我的弹出窗口上有一些边界半径......

我看到了 infobox 插件，但我无法设置它（对于许多弹出窗口 - 在 FOR cicle 中）

```
$(function(){

      function initialize() {
        var styles = [[{
          url: '../images/conv30.png',
          height: 27,
          width: 30,
          anchor: [3, 0],
          textColor: '#ff00ff',
          textSize: 10
        }, {
          url: '../images/conv40.png',
          height: 36,
          width: 40,
          anchor: [6, 0],
          textColor: '#ff0000',
          textSize: 11
        }, {
          url: '../images/conv50.png',
          width: 50,
          height: 45,
          anchor: [8, 0],
          textSize: 12
        }]];

        var center = new google.maps.LatLng(37.4419, -122.1419);

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 5,
          center: center,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          mapTypeControlOptions:{
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
          },
          navigationControlOptions: {
            style: google.maps.NavigationControlStyle.ANDROID
          },
          scaleControl: true
        });

var infowindow =  new google.maps.InfoWindow();

        var style = 0;
        var mcOptions = {gridSize: 50, maxZoom: 9, styles: styles[style]};

        var imageUrl = 'http://chart.apis.google.com/chart?cht=mm&chs=24x32&chco=00FF00,FF00FF,000000&ext=.png';

        var markerImage = new google.maps.MarkerImage(imageUrl, new google.maps.Size(24, 32));

        var markers = [];

        for (var i = 0; i < 100; i++) {
          var dataPhoto = data.photos[i];
          var title = data.photos[i].photo_title;
          var latLng = new google.maps.LatLng(dataPhoto.latitude, dataPhoto.longitude);
          var marker = new google.maps.Marker({
                                                position: latLng,
                                                title: title,
                                                icon: markerImage
                                              });

google.maps.event.addListener(marker, 'click', (function(marker, i) {
  return function() {
    infowindow.setContent(
        '<div id="wrapper">'+
        '<div id="header">'+data.photos[i].owner_name+':</div>'+
        '<div id="content">'+data.photos[i].photo_title+'</div>'+
        '</div>'
    );
    infowindow.open(map, marker);
  }
})(marker, i));

          markers.push(marker);
        }
        var markerCluster = new MarkerClusterer(map, markers, mcOptions);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
}); 
```

我知道我必须更改 infowindow.setContent，但是如何...

帮助我的PLZ。

# java - 在 Spring 中使用 JDBC 时遇到 Nullpointer 异常

> ID：13551368
> 
> 赞同：0
> 
> 时间：2012-11-25T13:14:56.497
> 
> 标签：java, spring

请原谅我，因为我是 Spring 初学者。我按照书中的示例进行操作，但我只是将数据库从 Derby 更改为 MySQL。

我的主要课程相当简单：

```
public class Main {

public static void main(String [] args)
{
    ApplicationContext context=new ClassPathXmlApplicationContext("beans.xml");

    VehicleDAO dao= (VehicleDAO) context.getBean("vehicleDao");
    Vehicle vehicle = new Vehicle("TEM0001", "Red", 4, 4);
    dao.insert(vehicle);
} 
```

}

它创建一个数据访问对象并尝试将新的 Vehicle 对象添加到 DAO 中。Vehicle 类非常简单，一个具有四个字段的对象类。

VehicleDAO 类粘贴在这里：

[http://pastebin.com/ekB2Rb40](http://pastebin.com/ekB2Rb40)

我的 bean 文件是这样的：

```
<bean id="dataSource"
 class="org.apache.commons.dbcp.BasicDataSource">
  <property name="driverClassName"
   value="org.gjt.mm.mysql.Driver" />
   <property name="url"
   value="jdbc:mysql://localhost:3306/vehicle" />
  <property name="username" value="root" />
  <property name="password" value="3324911" />
  <property name="initialSize" value="2" />
  <property name="maxActive" value="5" />
</bean>
<bean id="vehicleDao"
  class="com.apress.springrecipes.vehicle.JdbcVehicleDao">
  <property name="dataSource" ref="dataSource" />
</bean> 
```

正如您在上面看到的，我总是在行出现空指针错误

```
conn= dataSource.getConnection(); 
```

所以我怀疑 MySQL 连接有问题，但我已经在 Eclipse 的类路径中包含了“mysql-connector-java-bin.jar”。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:22:04.243

您的设置器中有错字

```
 public void setDataSource(DataSource datasource)
        {
                this.dataSource=dataSource;
        } 
```

所以当Spring注入数据源时，它的值并没有被保存，不知道你的IDE是否检查了源代码中的这种错误。

PS 你不应该在你的 DAO 类中手动打开数据库连接，我们在 Spring 中有 JdbcTemplate。

# c++ - 接受子引用作为参数的父函数（或三个相互依赖的类的冒险）

> ID：13551370
> 
> 赞同：0
> 
> 时间：2012-11-25T13:15:02.953
> 
> 标签：c++, inheritance, circular-dependency

如果这个问题已经被问过，我很抱歉，但我一直在寻找几个小时，我只找到了类似但不完全相同的问题的答案，而且在我的情况下它们都不起作用。我是一个新手程序员，所以我的代码很可能由于令人畏惧的设计或一个非常简单、愚蠢的错误而无法工作。我有一个替代设计，但我想知道这个设计是否真的不可能，或者我是否只是不正确地实现它。

所以这就是我正在尝试做的事情：我正在编写 2D 碰撞检测代码，它需要同时适用于多边形和圆形。多边形需要能够检测圆形和其他多边形上的碰撞，而圆形需要能够检测多边形和其他圆形上的碰撞。我认为能够将所有可碰撞对象（多边形和圆）放入一个名为“Collidables”的 std::vector 中会很好，而不是为每个类设置一个单独的向量。所以我创建了抽象的 Shape 类，它是 Circle 和 Polygon 的父类，并且拥有虚拟碰撞检测功能。Collidables 向量将是一系列 Shape 指针。下面是这些类的样子：

```
//in shape.h:
#ifndef __SHAPE_H_INCLUDED__
#define __SHAPE_H_INCLUDED__
class Polygon;
class Circle;

class Shape {
//number of functions and variables irrelevant to the issue
//relevant functions, note that Vector with capital 'V' is not std::vector but a class I wrote myself:
    virtual Vector* detectCollision(const Shape& Collidable) const = 0;
    virtual Vector* detectCollision(const Polygon& Collidable) const = 0;
    virtual Vector* detectCollision(const Circle& Collidable) const = 0;
};
#endif

//in polygon.h
#ifndef __POLYGON_H_INCLUDED__
#define __POLYGON_H_INCLUDED__
#include "shape.h"
//edit: deleted #include "circle.h", this is now included in polygon.cpp
//edit: deleted redundant Circle forward declaration

class Polygon: public Shape {
    //irrelevant stuff
    Vector* detectCollision(const Shape& Collidable) const {return Collidable.detectCollision(*this)};
    Vector* detectCollision(const Polygon& Collidable) const;
    Vector* detectCollision(const Circle& Collidable) const;
};
#endif

//in circle.h
#ifndef __CIRCLE_H_INCLUDED__
#define __CIRCLE_H_INCLUDED__
#include "shape.h"
//edit: deleted #include "polygon.h", this is now included in circle.cpp
class Circle: public Shape {
    //irrelevant stuff
    Vector* detectCollision (const Shape& Collidable) const {return Collidable.detectCollision(*this);}
    Vector* detectCollision (const Polygon& Collidable) const;
    Vector* detectCollision (const Circle& Collidable) const;
};
#endif 
```

这里的想法是，任何 Shape 都应该能够检测到任何其他 Shape 上的碰撞，甚至在调用 detectCollision 函数时甚至不知道它是检测多边形上的碰撞还是圆上的碰撞。想象一下你是一个圆圈，你正在迭代 Collidables std::vector。第一个元素是 Polygon，但你不知道，你只知道你是一个圆，并且你的 detectCollision 函数得到的参数是对 Shape 的引用。所以你告诉 Shape “看，我不知道你是什么，但我是一个圆圈。在这里，我会将自己作为参数传递给你的 detectCollision 函数，这样你就可以将结果返回给我”。因此 Shape 调用了它的虚拟 detectCollision(const &Circle)，然后将其传递给 detectCollision(const &

这在只编写 Shape 和 Polygon 类时工作得很好，但是一旦我添加了 Circle 类，我的代码就不再编译了。我得到的错误是：

在 polygon.cpp:1:0 中包含的文件中：polygon.h：在成员函数'virtual Vector* Polygon::detectCollision(const Circle&) const'中：polygon.h:45:78：错误：不完整类型的无效使用' const struct Circle' shape.h:8:7: 错误：'const struct Circle' 的前向声明</p>

我假设这是一个设计问题，因为这里发生了荒谬的循环依赖：Shape取决于它的孩子，因为它的一些虚函数接受孩子作为参数，Polygon取决于Shape（因为它继承自它）和Circle （因为它有一个接受 Circle& 参数的 detectCollision 函数）并且 Circle 取决于 Shape （因为它继承自它）和 Polygon （因为它有一个接受 Polygon& 参数的 detectCollision 函数）。最简单的出路可能就是放弃将多边形和圆放入一个序列容器中的想法，而只是将它们放入两个单独的 std::vectors 中。尽管如此，我还是想知道我的第一个设计是天生不可能，可能但丑陋，还是可靠但实施不正确。

（编辑：戴夫建议的一些代码更改）

编辑，链接到完整源代码，如果有人想要更多信息：[https ://github.com/KoenP/medieval-melee-combat-cpp](https://github.com/KoenP/medieval-melee-combat-cpp)

我只编译文件polygon.cpp、circle.cpp、vector.cpp和line.cpp；test.cpp 当前无关紧要。对于这个错误，向量和线并不是那么重要，不编译它们（只编译多边形和圆）会给出完全相同的错误。我使用的确切命令是“g++ -o test circle.cpp polygon.cpp line.cpp vector.cpp”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:22:23.447

这种设计有些常见。使其工作的方法是在标头中转发声明（不要`#include`）和`#include`在 cpps 中。你走在正确的轨道上...

在`circle.h`并且*仅*`polygon.h`包括. 从中删除（这是多余的，因为您已经从 include 中获得了它）。那么，在，。而在, . *`shape.h``class Circle;``polygon.h``Shape.h``polygon.cpp``#include "circle.h"``circle.cpp``#include "polygon.h"`*

# java - 在 Swing 中使汽车（JPanel）以平滑的曲线转弯

> ID：13551371
> 
> 赞同：1
> 
> 时间：2012-11-25T13:15:18.270
> 
> 标签：java, swing, matrix, bezier

目前我有一个简单的动画，其中一辆汽车（JPanel）接近一个路口，在它等待红绿灯变绿后继续直行。但是，我现在要进行下一步，我希望汽车以平滑的曲线向右转 90 度以转向垂直的道路。我已经大致勾勒了它的外观，曲线代表了我希望汽车转向的方式：

![转弯车](../Images/bb573815e4b5f2eb44a70eac922848af.png)

我不太确定该怎么做。我想我需要代表某种贝塞尔曲线？或者矩阵变换来旋转汽车？

有人可以就在 Swing 中执行此操作的最佳方法提供建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T13:49:50.313

如果您不熟悉 Java 图形，我推荐[本教程](http://www3.ntu.edu.sg/home/ehchua/programming/java/J8b_Game_2DGraphics.html)。如果我要对你正在做的事情进行编码，我会看到两个选项。

首先也是最简单的，您可以将转弯建模为“首先直行，然后沿着以我正在转弯的拐角为中心的圆的边缘转弯 90º，然后再次直行”。最简单的方法是定义一个`JPanel`绘制你的`Image`（是的，一个 JPanel；如果你不绘制它们的背景，你可以将 JPanel 层叠在一起——它们将以正确的顺序绘制；使背景`JPanel`不透明，以便在绘制下一帧之前清理），并给它一个`AffineTransform`使图像显示在您想要的位置的位置。您将需要调整变换中的增量，以使速度看起来恒定；反复试验，或一些几何学（半径 R 的 90º 意味着`R*pi/2.0`沿着弯曲路径的总行程），将帮助您。

困难的方法是将汽车的路线视为任意[形状](http://docs.oracle.com/javase/6/docs/api/java/awt/Shape.html)（例如，您可以使用贝塞尔曲线定义），从中提取一个扁平`PathIterator`的，沿着该迭代器以等间距跳跃前进，并计算您需要的旋转沿曲线的位置和任何给定点的航向（您可以通过获取 2 个连续样本并根据这些样本对齐汽车来估计航向）。这比使用上述方法更难，但允许您的汽车遵循任意复杂的路径。

# html - 在 HTML 中嵌入第三方图像的安全问题

> ID：13551372
> 
> 赞同：2
> 
> 时间：2012-11-25T13:15:29.077
> 
> 标签：html, security

从安全的角度来看，我试图找出最坏的情况，从模糊的第三方网站嵌入图像的损害或影响。具体来说，第 3 方可以利用哪些技术访问权限？

例如，用户发布一个图片 URL，然后该图片直接嵌入到网站上，如下所示：

```
<img src="http://www.site-thats-not-mine.com/image.jpg"> 
```

我知道该图像可能是恶意的，甚至不是真正的图像，但他们能因此而做的最糟糕的事情是什么？这也不是一种罕见的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:22:11.343

通常，它可以做的最糟糕的事情是跟踪最终用户。与图像请求一起发送的任何标头都可用于保存图像最终用户的数据库。它可以做的另一件坏事是更改 - 如果图像被删除或服务器出现故障，它可能会导致您网站上的图像损坏；如果图像被其他东西替换，它可能会导致类似的问题（甚至可能的法律问题——例如，如果图像被恶意替换以欺骗您网站的最终用户）。

还有一些浏览器漏洞需要考虑，但这些不是一般问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T13:22:09.343

例如，可以以特殊方式制作图像文件，以利用浏览器或图像库中的错误来破解访问者机器。

其他可能出错的事情 - 远程站点已关闭或图像消失。或者，您的网站有一天会开始显示兽交 p0rn，而不是可爱的花朵图像……最好提供自己的内容 :)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-25T13:20:43.007

可能发生的最糟糕的事情？

我会说：宇宙可能内爆。（虽然我不确定这是否会是一件坏事......）

不，这是一种严重但有点夸张的意思：因为不可能知道所有可能存在或可能开发的漏洞利用，所以正式限制滥用的最坏可能结果是不可能的。这样的问题不能认真回答。您可能想重新考虑您的问题。

# c++ - C++ 中的更多类和外部变量

> ID：13551375
> 
> 赞同：0
> 
> 时间：2012-11-25T13:15:41.603
> 
> 标签：c++, class, global, extern

我在将文件链接在一起时遇到了一些麻烦。我正在使用一些课程：

**文件 Ah 中 A 类的标头**

```
class A
{
public:
    B someVariable;    //there is class B used!!
    int number;
}; 
```

**文件 Bh 中 B 类的标头**

```
class B
{
public:
    void someMethod();  
}; 
```

**B的实施**

```
B::someMethod()
{
    cout << "Value is:" << globalInstanceOfA.number << "\n";
} 
```

然后在另一个文件中我需要声明一个全局变量 globalInstanceOfA，我将在整个程序中使用它......

但我无法解决在哪里放置 include、extern 等。我试过这样的事情：

```
#include "A.h"
#include "B.h"

extern A globalInstanceOfA; 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:19:30.320

线

```
extern A globalInstanceOfA; 
```

进入你必须包含的头文件才能使用变量`globalInstanceOfA`；这提供了全局变量的*声明*。

线

```
A globalInstanceOfA; 
```

进入您的任何 cpp 文件以提供全局变量的*定义*。程序中的所有 cpp 文件中必须有一个定义。

# java - 是否可以使用 Eclipse Java SE 版本将资源文件夹打包到 .war 中？

> ID：13551377
> 
> 赞同：1
> 
> 时间：2012-11-25T13:15:58.037
> 
> 标签：java, eclipse, web-applications

我正在使用 Eclipse Java SE Indigo。是否可以使用这个 Eclipse（而不是 Java EE Eclipse）将包含我的小程序的源文件夹包装到 .war 中？

此外，在我的源文件夹中，有一些 .txt 文件解释了这些小程序的功能。

特别是，我不愿意将我的 Java SE Eclipse 更新为 Java EE，因为在我的旧 Eclipse 下已经安装了太多插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:21:34.583

您可以在 Java 中轻松创建 zip 文件（特别是如果您使用 1.7）。战争文件只是遵循[一些约定](http://download.oracle.com/otndocs/jcp/servlet-2.4-fr-spec-oth-JSpec/)的 zip 文件。为什么不编写一个 Java 类，将 bin 文件夹（或 eclipse 存储其类的任何位置）的内容压缩成合适的战争格式？

运行时 Java 资源应添加到`WEB-INF/classes`您的 war 文件的文件夹中，这样您就可以使用`aClassLoader.getResourceAsStream()`; `WEB-INF`在and之外`META-INF`，文件通常可以通过网络访问（除非您的 web.xml 另有说明）。

如果您不想手动构建它，您还可以在 Eclipse 内部或外部使用[Ant](http://ant.apache.org/manual/Tasks/war.html)来自动构建战争。这是我推荐的路线；但话又说回来，我希望能够从 IDE 内部和外部构建和打包我的项目......

# node.js - 如何使用玉模板将块附加到父级

> ID：13551387
> 
> 赞同：10
> 
> 时间：2012-11-25T13:17:26.327
> 
> 标签：node.js, inheritance, include, append, pug

我正在尝试使用玉模板创建模块化布局。我想将一个脚本块从一个孩子附加到它的父母父母中。我不太确定它是否可能。

这是我的结构

布局.jade

头玉

索引.jade

用户.jade

layout.jade: doctype html#html include head

```
 body
        block content 
```

头玉：

```
head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
    block scripts 
```

index.jade:

```
extends layout

block content
    h1 Hello

    include users 
```

用户.jade

```
block append scripts
    script(src='/javascripts/user.js')  

ul
    each user, i in users
        li(class=i+"-"+user) #{user} 
```

我想要的 html 输出应该是：

```
<!DOCTYPE html>
<html id="html">
    <head>
        <title>Index</title>
        <link href="/stylesheets/style.css" rel="stylesheet">
        <script src="/javascripts/user.js">  <!--// append this from user.jade into head.jade //-->
    </head>
    <body>

        <h1>Hello bob</h1>
        <li class="0-user1">user1</li> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:28:23.863

这应该是可能[的，jade 文档](https://github.com/visionmedia/jade#a12)中有一些例子可以做到这一点。你的代码看起来都很好，除了你需要缩进你的`script`标签，`users.jade`所以它在`block append script`指令下面缩进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T09:50:05.030

我尝试使用相同的方法来定义选项卡控件。我在单独的玉文件中定义了页面。每个玉文件都附加了一个包含标签页的块。直到我在我的“index.jade”中的块中附加了一些东西，它也没有工作，如下所示：

```
extends layout

append scripts
    //- dummy

block content
    h1 Hello

    include users 
```

但是我还想补充一点，因为我添加了多个 .jade 文件，我在下面运行。包含jade-template 的每个文件都使用块追加来添加标签页，但添加页面的顺序颠倒了。

# ios - 下载存储在 RAM 中？

> ID：13551388
> 
> 赞同：2
> 
> 时间：2012-11-25T13:17:32.903
> 
> 标签：ios, download, nsurlconnection

我有一个问题：我如何理解这一点：

> “iOS 注意：NSURLDownload 类在 iOS 中不可用，因为不鼓励直接下载到文件系统。请改用 NSURLConnection 类。有关更多信息，请参阅“使用 NSURLConnection”。”

无法将下载内容直接存储在文件系统中。但是，如果我改用“NSURLConnection”并下载一个文件（可以说它像 500MB），它是存储在 RAM 中还是存储在存储系统中的临时文件夹中？

如果它存储在 RAM 中，是否可以直接将其保存到磁盘？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:32:42.357

这意味着不鼓励直接下载到文件系统上的文件，这是桌面计算机常见的约定，但在 iOS 上很少见。

数据并不*总是*存储在 RAM 中，文件的大小可能远远超过设备上可用的 RAM 量，因为它相当有限。来自 a 的响应`NSURLConnection`将存储在缓存中；它仍然被写入磁盘，但操作系统会跟踪它，而不是你的应用程序。因为这是一个操作系统实现细节，应用程序开发人员不应该关心它，所以不能保证这些数据将存储在哪里，因此尽量不要通过文件系统直接访问它。

一旦您从`NSURLConnection`. 为此，请设置您的`NSURLConnection`使用[本指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)。重要的是正确设置您的`NSURLConnectionDelegate`。[请参阅有关协议的此文档](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)。

您感兴趣的方法是这个（无论如何这是必需的方法！）

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
```

一旦有了`NSData`可用的资源，您就可以随心所欲地使用它。您保存将此数据保存到磁盘，请参阅[NSData](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)上的文档以了解如何执行此操作。

# iphone - UIToolbar 作为 UINavigationbar 中的右键，包含 2 个按钮，它们之间没有间隔

> ID：13551393
> 
> 赞同：2
> 
> 时间：2012-11-25T13:18:22.270
> 
> 标签：iphone, objective-c, ios, ipad

我想让我的右栏按钮包含 2 个按钮。所以我通过使用 UIToolbar 来做到这一点。但问题是 2 个按钮彼此分开，而我想要达到的效果是让它们彼此齐平。

这是他们现在的样子

![在此处输入图像描述](../Images/56803782b8ec34b8dae1a35bad3d5e65.png)

这是到目前为止我用来实现按钮的代码

```
 UIToolbar *tools = [[UIToolbar alloc] initWithFrame:CGRectMake(0.0f, 2.0f, 120.0f, 40.01f)]; // 44.01 shifts it up 1px for some reason
tools.clearsContextBeforeDrawing = NO;
tools.clipsToBounds = YES;
tools.tintColor = [UIColor blueColor];
tools.barStyle = -1;// -1; // clear background
NSMutableArray *buttons = [[NSMutableArray alloc] initWithCapacity:2];

UIButton * upButton = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
upButton.frame = CGRectMake(0, 07, 46, 30);
upButton.titleLabel.font = [UIFont fontWithName:@"Arial-BoldMT" size:16];
[upButton setTitle:@"" forState:UIControlStateNormal];
upButton.backgroundColor = [UIColor clearColor];
[upButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal ];
[upButton addTarget:self action:@selector(pageDown) forControlEvents:UIControlEventTouchUpInside];
[upButton setBackgroundImage:[UIImage imageNamed:@"page_up.png"] forState:UIControlStateNormal];
[upButton setBackgroundImage:[UIImage imageNamed:@"page_up_action.png"] forState:UIControlStateSelected];
UIBarButtonItem *toggleSegmentedControlBarItemOne = [[UIBarButtonItem alloc] initWithCustomView:upButton];
[buttons addObject:toggleSegmentedControlBarItemOne];

UIButton * downButton = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
downButton.frame = CGRectMake(0, 07, 46, 30);
downButton.titleLabel.font = [UIFont fontWithName:@"Arial-BoldMT" size:16];
[downButton setTitle:@"" forState:UIControlStateNormal];
downButton.backgroundColor = [UIColor clearColor];
[downButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal ];
[downButton addTarget:self action:@selector(pageUp) forControlEvents:UIControlEventTouchUpInside];
[downButton setBackgroundImage:[UIImage imageNamed:@"page_down.png"] forState:UIControlStateNormal];
[downButton setBackgroundImage:[UIImage imageNamed:@"page_down_action.png"] forState:UIControlStateSelected];
UIBarButtonItem *toggleSegmentedControlBarItemTwo = [[UIBarButtonItem alloc] initWithCustomView:downButton];
[buttons addObject:toggleSegmentedControlBarItemTwo];

[tools setItems:buttons animated:NO];

[buttons release];
UIBarButtonItem *twoButtons = [[UIBarButtonItem alloc] initWithCustomView:tools];
[tools release];
self.navigationItem.rightBarButtonItem = twoButtons;
[twoButtons release]; 
```

任何人都可以告诉我如何让这两个按钮没有任何间隙地坐在彼此旁边吗？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:46:02.507

您可以将 UISegmentedControl 作为 customView 添加到您的 navigationItem 并将其瞬时属性设置为 true，这样您将得到您想要的。

这是示例代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.title = @"Test";

    UISegmentedControl *segControl = [[UISegmentedControl alloc] initWithFrame:CGRectMake(0, 0, 90, 30)];
    segControl.momentary = YES;
    segControl.segmentedControlStyle = UISegmentedControlStyleBar;
    segControl.tintColor = [UIColor darkGrayColor];

    [segControl insertSegmentWithImage:[UIImage imageNamed:@"up.png"] atIndex:0 animated:NO];
    [segControl insertSegmentWithImage:[UIImage imageNamed:@"down.png"] atIndex:1 animated:NO];

    [segControl addTarget:self action:@selector(segButtonDown:) forControlEvents:UIControlEventValueChanged];

    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:segControl];

}

- (void)segButtonDown:(id)sender {

    UISegmentedControl *segControl = (UISegmentedControl *)sender;

    switch (segControl.selectedSegmentIndex) {
        case 0:
            NSLog(@"Up");
            break;
        case 1:
            NSLog(@"Down");
        default:
            break;
    }

} 
```

这是它的样子。

![截屏](../Images/5cc959d26e8e0ec12f9e2218d7202299.png)

在这里您可以在控制台中看到事件。

```
2012-11-25 16:03:47.805 test2[13886:c07] Up
2012-11-25 16:03:48.367 test2[13886:c07] Down
2012-11-25 16:03:48.930 test2[13886:c07] Up
2012-11-25 16:03:49.538 test2[13886:c07] Down 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:25:34.547

在两个按钮之间添加一个无空格空间。两个这样做。

UIBarButtonItem *noSpace = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil] autorelease]; noSpace.width = -10.0;

将此 noSpace 对象插入到您的数组中（在您的情况下为按钮）。UIBarButtonItem 的两个对象之间。

会好的。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T15:16:30.660

看看这个教程，也许它会有所帮助：

[Xcode：导航栏中的多个按钮](http://www.youtube.com/watch?v=XMG9izipH7k)

# c# - 是否有允许通过 API 访问的 D2L 服务器端设置

> ID：13551400
> 
> 赞同：0
> 
> 时间：2012-11-25T13:19:25.017
> 
> 标签：c#, api, permissions, desire2learn, server-configuration

当我运行 DESIRE2LEARN 的“入门”C# 项目时，我总是得到

> 远程服务器返回错误：(403) Forbidden。

我没有为“获取版本”方法提供 UserId 和 UserKey 字段的值，我只为**新服务器**设置了 Host、AppId、AppKey 值，但它仍然无法正常工作。

然后，我认为这可能与错误的端口号有关。我将它设置为 443，但不知道它到底是什么。**我在工作项目文件中为 D2L测试服务器**设置了端口号错误，但出现了另一个错误：

> “无法连接到远程服务器”。

所以，我不认为这与端口#有关。我的猜测是，这是关于服务器中与 API 相关的权限问题。您认为管理员需要相应地更改服务器中的设置，以便可以通过 API 访问吗？您是否曾经需要配置服务器以允许通过 API 访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:09:04.533

如果您正在检索 403（无权限）错误，则您的 LMS 似乎不太可能关闭对 Valence Extensibility 的所有支持（因为 API 服务层本身可能会返回此错误）。您的 LMS 可能无法识别您使用的 AppID/AppKey 凭据。我建议您[使用 Valence 问题跟踪器打开一个问题](https://d2l.fogbugz.com/default.asp?pg=pgPublicEdit)，并在那里解决问题。他们可能希望您的 LMS 管理员使用 Desire2Learn 打开客户支持票证，以调查您的 LMS 的配置，以确保一切设置正确。

# java - 生命周期接口在 Spring 中是如何工作的？什么是“顶级单例 bean”？

> ID：13551408
> 
> 赞同：19
> 
> 时间：2012-11-25T13:20:26.557
> 
> 标签：java, multithreading, spring

在 Spring javadoc 中说，“请注意，Lifecycle 接口仅在顶级单例 bean 上受支持。” 这里[网址](http://static.springsource.org/spring/docs/3.1.0.M1/javadoc-api/org/springframework/context/Lifecycle.html)

我`LifecycleBeanTest.xml`对 bean 的描述如下：

```
<beans ...>
    <bean id="lifecycle" class="tests.LifecycleBean"/>
</beans> 
```

所以它看起来足够“topish”和“singletonish”。

这是什么意思？如何让 Spring 了解我的 bean 实现`Lifecycle`并对其进行处理？

假设我的主要方法在 Spring 中看起来如下

```
public static void main(String[] args) {
    new ClassPathXmlApplicationContext("/tests/LifecycleBeanTest.xml").close();
} 
```

因此，它实例化上下文，然后立即关闭它。

我可以在我的配置中创建一些 bean，它会延迟`close()`执行，直到应用程序完成所有工作？那么主方法线程等待应用程序终止？

例如，下面的 bean 并没有按照我想象的方式工作。`start()`两者都不是`stop()`。

```
package tests;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.context.Lifecycle;

public class LifecycleBean implements Lifecycle {

    private static final Logger log = LoggerFactory.getLogger(LifecycleBean.class);

    private final Thread thread = new Thread("Lifecycle") {
        {
            setDaemon(false);
            setUncaughtExceptionHandler(new UncaughtExceptionHandler() {

                @Override
                public void uncaughtException(Thread t, Throwable e) {
                    log.error("Abnormal thread termination", e);
                }
            });
        }

        public void run() {
            for(int i=0; i<10 && !isInterrupted(); ++i) {
                log.info("Hearbeat {}", i);
                try {
                    sleep(1000);
                } catch (InterruptedException e) {
                    return;
                }
            }
        };
    };

    @Override
    public void start() {
        log.info("Starting bean");
        thread.start();
    }

    @Override
    public void stop() {
        log.info("Stopping bean");
        thread.interrupt();
        try {
            thread.join();
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            return;
        }
    }

    @Override
    public boolean isRunning() {
        return thread.isAlive();
    }

} 
```

**更新 1**

我知道我可以在代码中等待 bean。与 Spring 本身挂钩很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T18:08:21.470

您应该使用`SmartLifecycle`而不是`Lifecycle`. 只有前者按您预期`Lifecycle`的方式工作。确保在`isRunning()`实现中返回 true。

我已经用于`SmartLifecycle`异步作业，这听起来像是为之设计的。我想它会为你工作，但同时你可能会看看`ApplicationListener`像`ContextStoppedEvent`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T20:49:02.697

您可以检查`AbstractApplicationContext.doClose()`方法并看到 Spring 开发人员没有提供应用程序上下文关闭的中断

```
protected void doClose() {
    boolean actuallyClose;
    synchronized (this.activeMonitor) {
        actuallyClose = this.active && !this.closed;
        this.closed = true;
    }

    if (actuallyClose) {
        if (logger.isInfoEnabled()) {
            logger.info("Closing " + this);
        }

        try {
            // Publish shutdown event.
            publishEvent(new ContextClosedEvent(this));
        }
        catch (Throwable ex) {
            logger.warn("Exception thrown from ApplicationListener handling ContextClosedEvent", ex);
        }

        // Stop all Lifecycle beans, to avoid delays during individual destruction.
        try {
            getLifecycleProcessor().onClose();
        }
        catch (Throwable ex) {
            logger.warn("Exception thrown from LifecycleProcessor on context close", ex);
        }

        // Destroy all cached singletons in the context's BeanFactory.
        destroyBeans();

        // Close the state of this context itself.
        closeBeanFactory();

        // Let subclasses do some final clean-up if they wish...
        onClose();

        synchronized (this.activeMonitor) {
            this.active = false;
        }
    }
} 
```

所以你不能阻止应用程序上下文关闭。

# 使用 TestContext 框架测试服务

如果您使用带有 JUnit 的 Spring 测试上下文框架，我认为您可以使用它来测试实现 Lifecycle 的服务，我使用了来自[内部 Spring 测试之一的技术](https://src.springframework.org/svn/spring-batch-admin/trunk/spring-batch-integration/src/test/java/org/springframework/batch/integration/retry/RepeatTransactionalPollingIntegrationTests.java)

稍微修改了 LifecycleBean（我已经添加了`waitForTermination()`方法）：

```
public class LifecycleBean implements Lifecycle {

    private static final Logger log = LoggerFactory
            .getLogger(LifecycleBean.class);

    private final Thread thread = new Thread("Lifecycle") {
        {
            setDaemon(false);
            setUncaughtExceptionHandler(new UncaughtExceptionHandler() {

                @Override
                public void uncaughtException(Thread t, Throwable e) {
                    log.error("Abnormal thread termination", e);
                }
            });
        }

        public void run() {
            for (int i = 0; i < 10 && !isInterrupted(); ++i) {
                log.info("Hearbeat {}", i);
                try {
                    sleep(1000);
                } catch (InterruptedException e) {
                    return;
                }
            }
        };
    };

    @Override
    public void start() {
        log.info("Starting bean");
        thread.start();
    }

    @Override
    public void stop() {
        log.info("Stopping bean");
        thread.interrupt();
        waitForTermination();
    }

    @Override
    public boolean isRunning() {
        return thread.isAlive();
    }

    public void waitForTermination() {
        try {
            thread.join();
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            return;
        }
    }
} 
```

测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:Test-context.xml")
public class LifecycleBeanTest {

    @Autowired
    LifecycleBean bean;

    Lifecycle appContextLifeCycle;

    @Autowired
    public void setLifeCycle(ApplicationContext context){
        this.appContextLifeCycle = (Lifecycle)context;
    }

    @Test
    public void testLifeCycle(){
        //"start" application context
        appContextLifeCycle.start();

        bean.waitForTermination();
    }
} 
```

test-context.xml 内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

<bean class="LifecycleBean"/>
</beans> 
```

PS 启动和停止上下文不是您可能希望在同一个应用程序上下文上多次执行的操作，因此您可能需要`@DirtiesContext`在测试方法上添加注释以获得最佳结果。

## 回答新版本的问题

DefaultLifecycleProcessor 用于`beanFactory.getBeanNamesForType(Lifecycle.class, false, false);`从 getBeanNamesForType javadoc 中检索实现 Lifecycle 的 bean 列表：

> **注意：此方法仅内省顶级 bean。**它不 *检查*也可能与指定类型匹配的嵌套 bean。

所以这个方法没有列出内部bean（当只有xml配置可用时它们被称为嵌套——它们被声明为嵌套*bean* xml元素）。

考虑文档中的以下示例

```
<bean id="outer" class="...">
  <!-- Instead of using a reference to target, just use an inner bean -->
  <property name="target">
    <bean class="com.mycompany.PersonImpl">
      <property name="name"><value>Tony</value></property>
      <property name="age"><value>51</value></property>
    </bean>
  </property>
</bean> 
```

Start() 和 Stop() 只是由应用程序上下文传播的事件，它们与应用程序上下文的生命周期无关，例如，您可以使用一些服务 bean 实现下载管理器 - 当用户点击“暂停”按钮时，您将广播“停止”事件，然后当用户点击“开始”按钮时，您可以通过广播“开始”事件来恢复处理。Spring 在这里可用，因为它以正确的顺序调度事件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T13:57:59.390

我从未使用过[`Lifecycle`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/Lifecycle.html)界面，我不确定它应该如何工作。但它看起来像简单地调用`start()`上下文调用这些回调：

```
AbstractApplicationContext ctx = new ClassPathXmlApplicationContext("...");
ctx.start(); 
```

但是通常我使用`@PostConstruct`/`@PreDestroy`注释或实现`InitializingBean`or `DisposableBean`：

```
public class LifecycleBean implements InitializingBean, DisposableBean {

    @Override
    public void afterPropertiesSet() {
        //...
    }

    @Override
    public void destroy() {
        //...
    }

} 
```

请注意，我不调用`close()`应用程序上下文。由于您在 JVM 中创建非守护线程，`LifecycleBean`因此即使`main`退出也仍然运行。

当您停止该线程时，JVM 存在但未正确关闭应用程序上下文。基本上最后一个非守护线程停止，导致整个 JVM 终止。这是一个有点hacky的解决方法 - 当您的后台非守护线程即将完成时，明确关闭应用程序上下文：

```
public class LifecycleBean implements ApplicationContextAware /* ... */ {

    private AbstractApplicationContext applicationContext;

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) {
        this.applicationContext = (AbstractApplicationContext)applicationContext;
    }

    public void run() {
        for(int i=0; i<10 && !isInterrupted(); ++i) {
            log.info("Hearbeat {}", i);
            try {
                sleep(1000);
            } catch (InterruptedException e) {
            }
        }
        applicationContext.close();
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T12:03:00.270

所以，最后我发现如果我：

1）将我的bean定义为`implements Lifecycle`

`stop()`2）在这样的方法中引入延迟

```
@Override
public void stop() {
    log.info("Stopping bean");
    //thread.interrupt();
    try {
        thread.join();
    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
        return;
    }
} 
```

3）和代码上下文创建如下：

```
new ClassPathXmlApplicationContext("/tests/LifecycleBeanTest.xml").stop(); 
```

然后我得到我想要的：

上下文创建代码在所有生命周期 bean 执行完毕后才会退出。因此，此代码适用于 JUnit 测试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-14T16:07:31.370

使用 SmartLifecycle 怎么样？似乎它提供了所有必要的功能。

有方法 public void stop(Runnable contextStopping) {}。您可以通过在您想要的时间执行传入的 contextStopping 来继续关闭应用程序上下文。

在我的环境中，即使在 J-UNIT 上也一切正常，当然是通过 SpringJUnit4ClassRunner 运行它们。

# html - 带 GWT 的边框布局

> ID：13551412
> 
> 赞同：1
> 
> 时间：2012-11-25T13:20:45.177
> 
> 标签：html, gwt, border-layout

如何在 GWT 中实现真正的 BorderLayout 效果？

如果可能没有图书馆？如果我需要使用图书馆，请不要付费使用，也不要使用已弃用的图书馆？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T15:59:59.197

从 Kinjal 的帖子中，几乎可以肯定 2.0[`*LayoutPanel`类](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#LayoutPanels)是您想要的。`DockLayoutPanel`及其子类`SplitLayoutPanel`将以两种不同的方式提供此功能。

使用 Layout Panel 类有两件重要的事情。首先，使用严格的文档类型（例如 html5 文档类型）。其次，必须为所有面板指定大小并且必须通知调整大小 - 这就是它们都实现`RequiresResize`接口的原因。

最简单的方法是不以 a 开头`RootPanel`，而是以`RootLayoutPanel`- 开头，这将确保您从浏览器窗口中获得 resize 事件。然后，添加您选择的布局面板，它也会调整大小。

如果您构建自己的小部件子类并希望在调整大小时收到通知，您也应该实现`RequiresResize`. 同样，如果您正在构建一个小部件子类来调整其子级的大小，您应该实现该`ProvidesResize`接口。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T13:38:24.310

使用`HLayout`or`VLayout`并设置自定义 css 样式来实现它。

您还可以查看此[布局文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#LayoutPanels)

# php - 数组中的函数名

> ID：13551415
> 
> 赞同：1
> 
> 时间：2012-11-25T13:20:54.397
> 
> 标签：php, arrays, class, function

我在调用名称存储在数组中的函数时遇到问题。

```
class tempClass {
   function someFunction() {
      $tempArray = array('functionName' => 'tempFunction');
      $tempArray['functionName']();
   }

   function tempFunction() {
      echo "inside function";
   }
} 
```

它给了我一个错误：

```
"Fatal error: Call to undefined function tempFunction() in /..... line..". 
```

行号是调用函数的行，`$tempArray['functionName']();`

但如果调用`method_exists()`，则表明该方法存在。这非常令人困惑。谁能帮帮我？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T13:25:34.333

使用[call_user_func()](http://php.net/manual/en/function.call-user-func.php)，如下所示：

```
call_user_func($tempArray['functionName']); 
```

**更新：**
当您想从该类内部调用该类的方法时，请改用以下内容：

```
call_user_func(array($this, $tempArray['functionName'])); 
```

查看工作[**演示**](http://codepad.org/Qm202eOv)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T13:27:34.553

好吧，您询问该方法是否存在于类或对象中，但是您在没有该范围的情况下调用它。那是行不通的...

试试这个：

```
call_user_method($tempArray['functionName'],$this); 
```

刚看到`call_user_method()`是贬值。改为使用`call_user_func()`Nelson 的回答。

# javascript - 我的选择列表中的所有选项都连接在一个大选项中。我该如何解决？

> ID：13551416
> 
> 赞同：0
> 
> 时间：2012-11-25T13:21:02.307
> 
> 标签：javascript, forms, select, option

这是我第一次使用表单处理 DOM 节点而不是经典的 HTML 代码，有些事情让我感到困惑。我有一个`select`包含多个选项的列表，但不是将每个选项都放在新行中，而是将它们全部加入第一个选项。

我很确定我错过了一些非常简单的东西，但我看不出是什么。拜托，你能帮我看看我做错了什么吗？谢谢！这是代码：

```
var divcontainer = document.createElement("div");
var formulario = document.createElement("form");

var selectgrup = document.createElement("select");
var optiongrup = document.createElement("option");

var opcion = document.createTextNode("The first option");
optiongrup.appendChild(opcion);
selectgrup.appendChild(optiongrup);

var opcion = document.createTextNode("The second option");
optiongrup.appendChild(opcion);
selectgrup.appendChild(optiongrup);

formulario.appendChild(selectgrup);

divcontainer.appendChild(formulario);

document.body.appendChild(divcontainer);​ 
```

看看会发生什么：[JSFiddle](http://jsfiddle.net/q5WLX/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:25:19.753

您需要为第二个项目创建一个新的“选项”元素

```
optiongrup = document.createElement("option");
var opcion = document.createTextNode("The second option");
optiongrup.appendChild(opcion);
selectgrup.appendChild(optiongrup); 
```

检查我的小提琴：http: [//jsfiddle.net/BuddhiP/q5WLX/2/](http://jsfiddle.net/BuddhiP/q5WLX/2/)

# javascript - 多次读取数组会出错 javascript

> ID：13551417
> 
> 赞同：0
> 
> 时间：2012-11-25T13:21:18.263
> 
> 标签：javascript, arrays, google-maps

我正在尝试创建一个需要在其上带有一些标记的谷歌地图的网站我在多次读取 javascript 2D 数组时遇到问题它给了我错误

> 无法读取未定义的属性“0”

这是我的代码

```
function initialize() {
          var locations = [
          //'City',LatLng,LatLng,Zoom
          ['Egypt', 26.820553, 30.802498, 6], //Center of whole map
          ['Alexandria', 'Egypt'], //pointer
          ['Mansoura', 'Egypt'], //pointer
          ['Assiut', 'Egypt'] //pointer
          ];

          var mapOptions = {
              zoom: locations[0][3],
              center: new google.maps.LatLng(locations[0][1], locations[0][2]),
              mapTypeId: google.maps.MapTypeId.ROADMAP
          };

          var map = new google.maps.Map(document.getElementById('map_canvas'),
          mapOptions);

          var infowindow = new google.maps.InfoWindow();

          var marker, i;
          var geocoder = new google.maps.Geocoder();
          var image = 'flag.png';

          for (i = 1; i < locations.length; i++) {
              geocoder.geocode({ 'address': locations[i][0] + ' ' + locations[i][1] }, function (results, status) {
                  if (status == google.maps.GeocoderStatus.OK) {

                      marker = new google.maps.Marker({
                          animation: google.maps.Animation.DROP,
                          map: map,
                          icon: image,
                          position: results[0].geometry.location,
                          title: locations[i][0]
                      });

                      google.maps.event.addListener(marker, 'click', (function (marker, i) {
                          return function () {
                              infowindow.setContent('<b style="font-size:30px;">' + locations[i][0] + '</b>'
                                  + '<br><b>Starting Date:</b> 11/5/2012'
                                  + '<br><b>Ending Date:</b> 30/5/2012'
                                  + '<br><a href="google.com">Event Website</a>');
                              infowindow.open(map, marker);
                          }
                      })(marker, i));
                  }
              });
          }
      }

      function loadScript() {
          var script = document.createElement('script');
          script.type = 'text/javascript';
          script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyA6yYH66F1L3NgHAobufuUF6l-jjVCLwfE&sensor=false&' +
          'callback=initialize';
          document.body.appendChild(script);
      }

      window.onload = loadScript; 
```

当我尝试多次读取位置[i][0] 时，我在本节中遇到了错误。

```
for (i = 1; i < locations.length; i++) {
              geocoder.geocode({ 'address': locations[i][0] + ' ' + locations[i][1] }, function (results, status) {
                  if (status == google.maps.GeocoderStatus.OK) {

                      marker = new google.maps.Marker({
                          animation: google.maps.Animation.DROP,
                          map: map,
                          icon: image,
                          position: results[0].geometry.location,
                          title: locations[i][0]
                      });

                      google.maps.event.addListener(marker, 'click', (function (marker, i) {
                          return function () {
                              infowindow.setContent('<b style="font-size:30px;">' + locations[i][0] + '</b>'
                                  + '<br><b>Starting Date:</b> 11/5/2012'
                                  + '<br><b>Ending Date:</b> 30/5/2012'
                                  + '<br><a href="google.com">Event Website</a>');
                              infowindow.open(map, marker);
                          }
                      })(marker, i));
                  }
              });
          } 
```

如果无论如何我可以在后面的c#代码中处理这个代码会很好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T13:39:26.870

[忽略之前的评论`results`]

问题是您`i`在 geocode() 回调中引用。geocode() 方法是异步的 - 即在 for 循环完成*后调用您的回调。*那时，`i`= 4，意味着位置[i] 是未定义的。

如果这没有意义，您应该阅读闭包的工作原理，但基本上解决方案是将代码放在 for 循环中的一个单独的函数中，并将您想要使用的位置条目传递给它，如下所示：

```
function geocodeLocation(location) {
  geocoder.geocode({ 'address': location[0] + ' ' + location[1] },
    function (results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        marker = new google.maps.Marker({
          animation: google.maps.Animation.DROP,
          map: map,
          icon: image,
          position: results[0].geometry.location,
          title: location[0]
        });

        google.maps.event.addListener(marker, 'click', (function (marker, i) {
          return function () {
            infowindow.setContent('<b style="font-size:30px;">' + location[0] + '</b>'
              + '<br><b>Starting Date:</b> 11/5/2012'
              + '<br><b>Ending Date:</b> 30/5/2012'
              + '<br><a href="google.com">Event Website</a>');
            infowindow.open(map, marker);
          }
        })(marker, i));
      }
    }
  );
}

for (var i = 1; i < locations.length; i++) {
  geocodeLocation(locations[i]);
} 
```

# algorithm - table() 添加和删除值

> ID：13551421
> 
> 赞同：0
> 
> 时间：2012-11-25T13:21:55.867
> 
> 标签：algorithm, r, hashtable

我正在尝试创建一个有效的 table() 计算（获取向量中每个值的频率）。与普通的 table() 函数不同的是，它需要支持在不重新计算整个表的情况下添加和删除值。

我想到了使用哈希表。for add：查找键，将值加 1。for remove：寻找钥匙。如果找到：从值中减去 1，如果未找到：添加 value=1 的新键。

我想知道你们是否还有其他想法。

例子：

```
X

key  freq
1    3
2    5
3    2
8    1

remove(8)

key  freq
1    3
2    5
3    2

add(2)

key  freq
1    3
2    6
3    2 
```

任何有效实施的想法？提前致谢！

- 编辑 -

我目前的代码，如果有人感兴趣的话（还涉及香农熵的计算）

```
create.freq.hash<-function(x)
{
  t<-table(x)

  h<-hash(names(t),as.numeric(t));
  return(h);

}

freq.hash.add<-function(hash,key)
{
  if(is.null(hash[[key]]))
  {
    .set(hash,key,+1)
  }
  else
  {
    .set(hash,key,hash[[key]]+1)
  }
}

freq.hash.remove<-function(hash,key)
{
  if(!is.null(hash[[key]]))
  {
    if(hash[[key]]==1)
      del(key,hash)
    else
      .set(hash,key,hash[[key]]-1)
  }
}

hash.entropy<-function(hash)
{
  if(is.empty(hash))
    return;

  v<-values(hash);
  v.prob<-v/sum(v);
  entropy = (-1)*(v.prob%*%log2(v.prob))
  return(entropy)
} 
```

# java - 我如何测试一个方法计算出正确的结果？

> ID：13551424
> 
> 赞同：1
> 
> 时间：2012-11-25T13:22:14.430
> 
> 标签：java, testing

这听起来比我的意思更模糊，但是在测试类中的方法时，正确的过程是什么。

例如，客户类将设置密码的 md5 散列保存到数据库，而不是实际密码。客户类中的私有方法计算出用于保存的 md5 哈希。

```
public class Customer() {

public void setPassword(String password){
  this.password = hashPassword(password);
}

private String hashPassword(String password){
  ..do stuff..
}

.. other methods ..

} 
```

现在这只是一个例子，我不想知道如何计算 md5 哈希等。这是关于测试的。这是我能想到的选择：

*   我在测试类中创建了一个与 hashPassword 相同的方法，然后比较结果。
*   我手动计算特定密码 (myPassword) 的结果并将其存储为常量。在测试中将密码设置为 myPassword 后，我会将常量与结果进行比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T13:25:44.293

您应该采用第二个选项，即预先计算一个值或一系列值，并用它们进行测试。使用相同方法的副本测试方法除了增加代码重复量之外没有其他目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T13:26:22.453

做这个

> 我手动计算特定密码 (myPassword) 的结果并将其存储为常量。在测试中将密码设置为 myPassword 后，我会将常量与结果进行比较。

通过将实现与相同实现的结果进行比较来测试实现是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T13:30:23.973

我不会使用相同的算法，因为您可能会在两个实现中实现相同的错误。我不会手动计算，因为这种手动计算可能是错误的。相反，我会使用一些参考输入并检查您的算法的输出是否与参考输出相同。请参阅[以下页面](https://www.rfc-editor.org/rfc/rfc1321#appendix-A.5)：

```
MD5 test suite:
MD5 ("") = d41d8cd98f00b204e9800998ecf8427e
MD5 ("a") = 0cc175b9c0f1b6a831c399e269772661
MD5 ("abc") = 900150983cd24fb0d6963f7d28e17f72
MD5 ("message digest") = f96b697d7cb7938d525a2f31aaf161d0
MD5 ("abcdefghijklmnopqrstuvwxyz") = c3fcd3d76192e4007dfb496cca67e13b
MD5 ("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789") =
d174ab98d277d9f5a5611c2c9f419d9f
MD5 ("123456789012345678901234567890123456789012345678901234567890123456
78901234567890") = 57edf4a22be3c955ac49da2e2107b67a 
```

现在，如果您信任您的 MD5 实现，并且只想检查是否调用了摘要器，您可以注入一个模拟 MD5 摘要器，并在设置密码时检查模拟摘要器是否被调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T13:32:48.300

我肯定会采取第二种方法。您想要做的最后一件事是让您的测试代码在“被测单元”中复制功能。

1.  存储已知纯文本和散列结果的列表。
2.  `setPassword`添加一个使用纯文本调用的测试
3.  添加一种方法来“检查”散列值 - 如果您要添加它以进行测试，则使这个包可见

这里的好处是**您没有测试该`hashPassword`方法**。您正在验证密码是否正确散列。您的测试代码甚至不应该知道或关心私有方法是否存在。我会质疑您是否应该测试密码是否经过哈希处理，因为它实际上是`Customer`该类的实现秘密，但您可能有充分的理由进行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T13:24:24.367

还有第三种选择。

您可以使用[JunitAddons](http://junit-addons.sourceforge.net)库，它允许您使用反射测试私有方法，但它为您隐藏了反射的复杂性。

示例：通过 setValue() 方法将对象 obj 的值设置为 100：

```
PrivateAccessor.invoke( obj, "setValue", new Class[]{int.class}, new Object[]{
    new Integer( 100 )} ); 
```

如果该方法返回的值具有原始类型，则该方法返回的值会自动包装在对象中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-25T13:25:59.463

从您的选项选项 2 我将使用 ie openssl 计算它并存储它，以供以后比较:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-25T13:33:03.230

我假设您想测试私有方法，因为它包含一些重要的逻辑。也许最好的方法是将该方法的主体移动到某个外部类？

您的代码片段是一个很好的例子 - 计算 MD5 应该在客户类之外完成 - 这不是客户的责任。

```
private String hashPassword(String password) {
    this.hash = PasswordHasher.hash(password)
} 
```

后来`public(or default/protected) String PasswordHasher#hash(String)`很容易被测试

# php - 用三张表查询mysql，一张是关系表

> ID：13551425
> 
> 赞同：0
> 
> 时间：2012-11-25T13:22:21.623
> 
> 标签：php, sql, join

我仍然是一个 SQL 新手。我有三个具有给定结构的表：

```
table1 (products)
--------------------------------------
id   ident   title   types   desc
--------------------------------------
01   111ab   title1  2       details 1
02   222ab   title2  1       details 2
03   333ab   title3  2       details 3 
```

一个产品可以属于许多产品类型。“类型”列是与产品相关的类型的数量。产品“111ab”属于2种产品类型。

```
table2 (product-types)
--------------------------
id   type    typedesc
--------------------------
01   type1   description 1
02   type2   description 2
03   type3   description 3

table3 (relations)
-------------------
id   tbl1id  tbl2id
-------------------
01   01      01
02   02      03
03   03      03
04   01      03
05   03      02 
```

表 3 显示了表 1（产品）和表 2（产品类型）之间的关系。产品“111ab”与产品类型“01”和“03”相关。

我想创建一个应该是这样的数据结构：

```
type-description    prod   title   desc
-------------------------------------------
type1-description1  111ab  title1  details1
type2-description2  333ab  title3  details3
type3-description3  111ab  title1  details1
type3-description3  222ab  title2  details2
type3-description3  333ab  title3  details3 
```

这个结构最终将出现在产品类型的关联数组中，相关产品作为关联子数组，按表 1 的“标识”排序：

```
type1 description1
        111ab title1 details1

type2 description2
        333ab title3 details3

type3 description3
        111ab title1 details1
        222ab title2 details2
        333ab title3 details3 
```

该数组将被 json 编码并作为 ajax 请求的查询结果发送。

我在 stackoverflow 上阅读了关于 JOINing 表的线程，但无法生成有效的 SELECT 结构。也许这不能通过单个查询来完成。我不知道。

拜托，谁能给我一点帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:30:54.023

`INNER JOIN`满足您的要求，

```
SELECT  a.type, a.typedesc,
        c.ident, c.title,
        c.`desc`
FROM    `product-types` a
        INNER JOIN relations b
            ON a.id = b.tbl2id
        INNER JOIN products c
            ON b.tbl1id = c.id
ORDER BY a.type, a.typedesc 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/12b79/3)

或者

```
SELECT  CONCAT(a.type, '-',a.typedesc) `type-description`,
        c.ident, c.title,
        c.`desc`
FROM    `product-types` a
        INNER JOIN relations b
            ON a.id = b.tbl2id
        INNER JOIN products c
            ON b.tbl1id = c.id
ORDER BY `type-description` 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/12b79/5)

# java - 如何显示错误验证码的消息

> ID：13551431
> 
> 赞同：0
> 
> 时间：2012-11-25T13:22:44.837
> 
> 标签：java, html, extjs, captcha, recaptcha

我到处搜索，但没有结果（也许我不知道要搜索什么）。我的问题是显示这样的错误验证码解决方案的消息（用红色标记）：

![示例图片](../Images/f2fb1d1b6e061b8e1dec8ef01a522e74.png "示例图片")

验证码使用 ExtJs 面板显示：

```
{
    xtype:'panel',
    id:'reCaptcha-panel',
    html:'<div id="recaptcha"></div>',
    width:325,
    height:130,
    border:false,
    listeners:{
       afterrender:function(){
             Recaptcha.create(apiKey,
                              Ext.getDom('recaptcha'),
                              {
                                  theme : 'blackglass',
                                  lang:'en',
                                  callback: Recaptcha.focus_response_field
                              });
      }
   }
} 
```

该面板位于 ExtJs 表单中（脚本包含在 .html 中），这里的一切正常。在服务器端，使用谷歌服务器上的 java HttpURLConnection 发布请求检查验证码解决方案，该请求返回“不正确的验证码-sol”只有当客户的解决方案不正确时。我需要知道如何显示如上图所示的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:54:36.113

当您收到验证码错误的回复时，您只需在下面写下即可。

```
Ext.get('recaptcha').dom.innerHTML = 'Incorrect Captcha..!'; 
```

# jquery - RSS 提要问题。如何传递 html5 AUDIO 标签？

> ID：13551433
> 
> 赞同：2
> 
> 时间：2012-11-25T13:23:05.757
> 
> 标签：jquery, html, rss, iphone-standalone-web-app

我有一个使用 Drupal 视图创建的提要，我将其传递给使用 RSS 的 HTML5 Web 应用程序。

我有三个单独的提要（用于网络应用程序中的三个单独页面）。除了一个包含 HTML5 音频标签之外，它们都工作得很好。

我尝试了各种系统，并且都给出了相同的输出、标题、正文中的文本，但没有音乐播放器。我知道音乐播放器正在通过，因为如果我将提要插入谷歌 feedburner，那么一切都会完美显示，包括音乐播放器。

饲料应该是：

这是正在生成的xml：

```
<?xml version="1.0" encoding="utf-8" ?><rss version="2.0" xml:base="http://logan-net.com/demos12354688532" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/"          xmlns:foaf="http://xmlns.com/foaf/0.1/" xmlns:og="http://ogp.me/ns#" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" xmlns:sioc="http://rdfs.org/sioc/ns#" xmlns:sioct="http://rdfs.org/sioc/types#" xmlns:skos="http://www.w3.org/2004/02/skos/core#" xmlns:xsd="http://www.w3.org/2001/XMLSchema#">
  <channel>
  <title>demos</title>
  <link>http://logan-net.com/demos12354688532</link>
  <description></description>
  <language>en</language>
      <item>
<title>Make It Happen</title>
<link>http://logan-net.com/node/33</link>
<description>&lt;div class=&quot;field field-name-body field-type-text-with-summary field-label-hidden&quot;&gt;&lt;div class=&quot;field-items&quot;&gt;&lt;div class=&quot;field-item even&quot; property=&quot;content:encoded&quot;&gt;&lt;p&gt;One of the first songs in the new batch of demos recorded by Kenny and Mick.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;

 &lt;p&gt;&lt;audio controls=&quot;controls&quot;&gt;&lt;br /&gt;&lt;source src=&quot;http://logan-net.com/sites/default/files/Make%20It%20Happen.mp3&quot; type=&quot;audio/mp3&quot;&gt;&lt;/source&gt;&lt;/audio&gt;&lt;/p&gt;
 &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description>
 <pubDate>Tue, 20 Nov 2012 23:01:30 +0000</pubDate>
 <dc:creator>admin</dc:creator>
  <guid isPermaLink="false">33 at http://logan-net.com</guid>
  </item>
  </channel>
  </rss> 
```

这是来自提要源的 HTML：

```
 <audio controls="controls">
    <source src="http://logan-net.com/sites/default/files/Make%20It%20Happen.mp3" type="audio/mp3"></source></audio> 
```

提取提要的页面的完整 HTML：

```
<html class="no-js" xmlns="http://www.w3.org/1999/xhtml">
<!--<![endif]-->

<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />
  <meta charset="utf-8" />

  <title>Logan</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width" />
  <meta http-equiv="cleartype" content="on" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href=
  "img/touch/apple-touch-icon-144x144-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href=
  "img/touch/apple-touch-icon-114x114-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href=
  "img/touch/apple-touch-icon-72x72-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" href=
  "img/touch/apple-touch-icon-57x57-precomposed.png" />
  <link rel="shortcut icon" href="img/touch/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <!-- iPhone (Retina) -->
  <link href="img/apple-touch-startup-image-640x920.png" media=
  "(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)"
  rel="apple-touch-startup-image" />
  <!-- This script prevents links from opening in Mobile Safari. https://gist.github.com/1042026 -->
  <!--
        <script>(function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)$/i;a.addEventListener("click",function(a){d=a.target;while(!f.test(d.nodeName))d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}})(document,window.navigator,"standalone")</script>
        -->
  <link rel="stylesheet" href="css/normalize.css" type="text/css" />
  <link rel="stylesheet" href="css/main.css" type="text/css" />
  <link rel="stylesheet" href="css/add2home.css" type="text/css" />
  <script src="js/vendor/modernizr-2.6.1.min.js" type="text/javascript">
</script><!--  <script src="js/add2home.js"></script> -->

  <script type="text/javascript" src="https://www.google.com/jsapi">
</script>
</head>

<body>
  <div id="feed"></div>

  <div id="musichome">
    <a href="index.html">Home</a>
  </div><!-- SCRIPTS -->
  <script src="js/vendor/zepto.min.js" type="text/javascript">
</script><script src="js/helper.js" type="text/javascript">
</script><script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js" type=
"text/javascript">
</script><script src="rss/jquery.zrssfeed.min.js" type="text/javascript">
</script><!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
  <script type="text/javascript">
//<![CDATA[
            var _gaq=[["_setAccount","UA-XXXXX-X"],["_trackPageview"]];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
            g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";
            s.parentNode.insertBefore(g,s)}(document,"script"));
  //]]>
  </script><script type="text/javascript">
//<![CDATA[
                        $(document).ready(function () {
                          $('#feed').rssfeed('http://logan-net.com/mp3s.xml', {
                            limit: 5,
                            date: false,
                            header: false,
                            snippet: false,
                            sortasc: true,
                            limit: 3
                          });
                        });
  //]]>
  </script><!-- javascript coding -->
  &#226;&#8364;&#8249;
</body>
</html> 
```

​</p>

# ruby-on-rails - 验证资源唯一性和必需

> ID：13551442
> 
> 赞同：0
> 
> 时间：2012-11-25T13:24:42.213
> 
> 标签：ruby-on-rails, validation

我有一个页面模型和一个应用程序模型，每个应用程序应该至少有一个属性为 is_about = true 的页面，所以这是我在页面模型中的实际验证规则：

```
 validates :is_about, :uniqueness => {:scope => :application_id}, :if => :is_about? 
```

当我尝试将另一个带有 is_about = true 的页面添加到已经有一个带有 is_about 的页面的应用程序时，它会起作用。但是当我尝试删除 is_about 它也可以。

我怎样才能防止这种情况？

# c# - 客户端未打开而服务器打开时如何保持连接？

> ID：13551443
> 
> 赞同：1
> 
> 时间：2012-11-25T13:24:48.083
> 
> 标签：c#, tcplistener

我有一个客户端和服务器 c# 程序。客户端（接收连接的人）。服务器（是连接到客户端的那个）。

当服务器打开时，客户（服务器）及其电子邮件和地址将出现在客户端窗口中。但是当客户端关闭并重新打开时，连接就会松动，客户需要关闭服务器并再次打开它。

如何在不告诉客户关闭并重新打开服务器的情况下保持连接？我正在使用 TCP 连接和 scokets。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:57:40.110

对此的解决方案可能是在“客户端”不在线的情况下使用延迟连接初始化和错误处理。

您可以为您的连接创建一个包装器，它处理初始化，可以检查当前连接状态并使用错误处理包装您的所有操作，以防连接无法初始化。

WCF 是一个很好的抽象层，但可能过于重量级并且学习曲线非常陡峭，尤其是它在项目中的设置/配置部分。

此外，正如已经提到的，它是客户端/服务器设计的一部分，通常客户端使用某种登录/订阅消息初始化通信，而不是相反 - 这也可以解决您的问题。

# firefox - 计算firefox浏览器发出的特定请求的响应时间

> ID：13551445
> 
> 赞同：0
> 
> 时间：2012-11-25T13:25:02.247
> 
> 标签：firefox, google-chrome, google-chrome-extension, firefox-addon

如何计算 Firefox 浏览器发出的特定请求的响应时间。

即使我想找到 chrome 浏览器的响应时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:18:55.783

在 Firefox 上，您可以使用[nsIHttpActivityObserver 接口](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpActivityObserver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:44:57.000

您可以使用开发网络工具和 HAR 日志跟踪 Chrome 的网络请求。

***清单.json***

```
{
    "name": "Network Demo",
    "description": "This is a sample for API's available for Network",
    "devtools_page": "devtools.html",
    "manifest_version": 2,
    "version": "2",
    "permissions": ["experimental"]
} 
```

***开发工具.html***

```
<html>
<head>
<script src="devtools.js"></script>
</head>
<body>
</body>
</html> 
```

***开发工具.js***

以下代码中的 req 返回[HAR Log](http://www.softwareishard.com/blog/har-12-spec)，您可以使用它来读取您需要的内容；我在这里使用了 HAR 作为[TCP 连接时间](http://www.softwareishard.com/blog/har-12-spec/#timings)(http://www.softwareishard.com/blog/har-12-spec/#timings)

```
chrome.devtools.network.onRequestFinished.addListener(function(req) {
    // Displayed sample TCP connection time here
    chrome.experimental.devtools.console.addMessage(
        chrome.experimental.devtools.console.Severity.Log,
        req.timings.connect
    );
}); 
```

# mysql - 带有多个复选框和选择菜单的“AND”搜索表单的 MySQL 查询

> ID：13551447
> 
> 赞同：2
> 
> 时间：2012-11-25T13:25:29.100
> 
> 标签：mysql, search, checkbox

我有一张桌子：

```
item_id  | property_id | value |
================================
1        |      100    |   1   |
1        |      101    |   1   |
1        |      102    |   0   |
2        |      100    |   1   |
2        |      101    |   1   |
2        |      102    |   1   |
2        |      120    | black |
3        |      100    |   1   |
3        |      101    |   0   |
3        |      102    |   1   |
4        |      121    |  big  |
... 
```

我想通过具有多个复选框的表单执行“AND”搜索并选择菜单（每个复选框和选择菜单的名称类似于“property_id”）。

**例子：**

1.  当我选中复选框 100 和 101 时，查询的期望结果是 item_id = 1, 2。
2.  当我选中复选框 100、101 并从选择菜单 120 中选择“黑色”时，期望结果为 item_id = 2。
3.  当我选中复选框 100、101 时，从选择菜单 120 中选择“黑色”，然后从选择菜单 121 中选择“大”，期望结果为 item_id = NULL。

选中的属性（复选框和选择菜单）的数量可能会有所不同。

**我试过：**

```
SELECT item_id
FROM yourtable
WHERE property_id IN (100, 101)
AND value = 1
GROUP BY item_id
HAVING COUNT(DISTINCT property_id) = 2 
```

但它仅适用于复选框和值 0 或 1。我在使用选择菜单（例如 2\. 或 3.）来实现它时遇到问题。

我希望这能解释我正在尝试做的事情。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:58:16.970

对您的查询进行最少的更改：

```
SELECT item_id
FROM yourtable
WHERE property_id IN (100, 101)
  AND value = 1
   OR property_id = 120 
  AND value = 'black'
GROUP BY item_id
HAVING COUNT(DISTINCT property_id) = 3 ; 
```

这相当于：

```
SELECT item_id
FROM yourtable
WHERE property_id = 100  AND  value = 1 
   OR property_id = 101  AND  value = 1
   OR property_id = 120  AND  value = 'black'
GROUP BY item_id
HAVING COUNT(DISTINCT property_id) = 3 ; 
```

# php - PHP中的HTML表格网格

> ID：13551460
> 
> 赞同：-1
> 
> 时间：2012-11-25T13:27:22.800
> 
> 标签：php, html, html-table

我目前正在做一些基本的 PHP，我正在从 mysql 获取产品并在表格中显示每个产品以及相应的详细信息。

目前他们是一个在彼此之下

```
Product1 Name
Product1 Price
Product1 Description

Product2 Name
Product2 Price
Product2 Description 
```

现在我想将它们显示在 3 列的网格中。这意味着并排显示 3 个产品，然后第 4 个产品显示在第 1 个产品下方，依此类推。

```
$displayAllProducts.=
        "
            <tr><td>Product Name : </td><td>$productName</td></tr>
            <tr><td>Product Price : </td><td>$productPrice</td></tr>
            <tr><td>Product Qty  : </td><td>$productQty</td></tr>
            <tr><td colspan =\"2\"><img src=\"$imagePath\" width = \"100\" height = \"100\"></td><td></td></tr>
            <tr><td colspan =\"2\"><a href=\"singleProduct.php?pid=$productID&uid=$uid\">View Product<br/><br/><br/></td><td></td></tr>   
         ";

<table>
 <?php
  echo $displayAllProducts;
 ?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:03:01.840

在没有看到循环遍历`db`行的实际代码的情况下，这是一个总体思路。这将使每个表都有`$displayAllProducts`自己的表，嵌套在主表`<td>`的

```
$i=1;  // start a general counter
while($i<$number_of_db_rows){
if($i%3 = 1) {   // If number is 1,4,7,etc start a new row
$displayAllProducts.= "<tr>"; 
}
$displayAllProducts.=
    "
        <td>     // put each db row inside a cell
        <table>  // create a bounding table
        <tr><td>Product Name : </td><td>$productName</td></tr>
        <tr><td>Product Price : </td><td>$productPrice</td></tr>
        <tr><td>Product Qty  : </td><td>$productQty</td></tr>
        <tr><td colspan =\"2\"><img src=\"$imagePath\" width = \"100\" height = \"100\"></td><td></td></tr>
        <tr><td colspan =\"2\"><a href=\"singleProduct.php?pid=$productID&uid=$uid\">View Product<br/><br/><br/></td><td></td></tr>
        </table> 
        </td>  
     ";
if($i%3 = 0) {   // If number is 3,6,9,etc close the row
$displayAllProducts.= "</tr>";
}
$i++ // increase the counter to start again
}  // ends the loop

<table>
<?php
echo $displayAllProducts;
?>
</table> 
```

# php - 使用 Ajax、PHP 和 Mysql 的 Next/Prev 内容

> ID：13551462
> 
> 赞同：-3
> 
> 时间：2012-11-25T13:27:36.343
> 
> 标签：php, javascript, ajax, jquery

我希望创建一个每周足球冠军的比赛列表，所以我想用下一个和上一个按钮得到一个结果，所以像这样：

```
Next |    week 3  |  Prev
-------------------------
tream 1   1-0  team 2 
```

我从另一个 php 页面 "content.php" 获得的团队列表，我使用 HTML "table" 来制作列表

最后，我希望从“content.php”中获取每周的所有内容，并在单击下一个或上一个按钮时更改它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:52:41.240

好的，我在这里找到了一个很棒且简单的解决方案[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp) tnks。

# ios - iOS – 从 facebook.com 删除应用程序后，Facebook SDK 3.1.1 访问警报不显示

> ID：13551465
> 
> 赞同：1
> 
> 时间：2012-11-25T13:28:21.807
> 
> 标签：ios, facebook, cocoa-touch, facebook-ios-sdk

[如果从Facebook 应用中心](http://www.facebook.com/appcenter/my/)删除我的应用，然后我尝试使用

```
[FBSession openActiveSessionWithReadPermissions:permissions
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {

                                             [self sessionStateChanged:session state:state error:error];
                                         }]; 
```

未显示应显示请求访问的警报（“不允许”，“确定”），而是在调用完成处理程序时 FBSessionState 将`FBSessionStateOpen`是错误的。

我第二次尝试授权时，它总是会正确显示访问警报。

我是唯一一个遇到这种情况的人吗？这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:13:51.067

我们现在在新的 SDK 3.2 中有更好的错误处理。请在此处查看我们的新 SDK 版本 3.2：[https ://developers.facebook.com/blog/post/2013/02/25/facebook-sdk-3-2-for-ios/](https://developers.facebook.com/blog/post/2013/02/25/facebook-sdk-3-2-for-ios/)

# javascript - Javascript创建元素问题

> ID：13551467
> 
> 赞同：2
> 
> 时间：2012-11-25T13:28:23.367
> 
> 标签：javascript, performance, createelement

当我像示例 A 那样创建对象时，它不会应用任何属性（id、class 等...）。正在创建元素，但没有属性。选项 B 工作正常，但根据这个[Spped 测试](http://jsperf.com/jquery-vs-createelement/56)它慢了 25%。如何使用选项 A 应用属性？毕竟有可能吗？感谢所有聪明的答案！

A：

```
 var page = $(document.createElement("div"), {
         "id": "projects",
         "class": "page activePage"
    }); 
```

乙：

```
var page = document.createElement("div"); 
page.id = 'projects'; 
page.className = 'page activePage'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:32:08.160

第一个选项没有任何意义；这不是 jQuery 的工作方式（假设您因为`$()`构造而使用 jQuery）。在 jQuery 中，你会这样做：

```
var page = $('<div>').attr('id', 'projects').addClass('page').addClass('activePage'); 
```

还有其他方法可以通过 jQuery 完成此操作，但是您执行此操作的任何方式甚至都比上面的选项 B 慢，因为它基本上在幕后做与选项 B 相同的事情，周围有很多框架来减慢它的速度.

即使`$`引用不同的框架，同样适用——它不能比内置的 javascript 方法更快。

更重要的是：这里的速度很可能根本不重要。这会运行数千次吗？如果没有，这里不需要关心速度。在极少数情况下，它很重要，您不会比选项 B 更快，仅使用 vanilla javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:44:48.523

那么，为什么不直接使用呢？

**编辑：**

```
var page = '<div id:"projects" class:"page activePage"></div>'
var page = '<div id="projects" class="page activePage"></div>' 
```

或者

```
document.createElement("div",{id:"projects",class:"page activePage"}); 
```

如果您正在创建静态数据，我首先建议您。

希望，它会帮助你。谢谢。！！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T13:59:19.403

我们可以使用 jquery 创建 div 元素，它不会导致任何性能问题，因为它不是基于 javascript

```
1\. $("<div class='page activePage' id ='projects'></div>")

2\. $('<div>').attr('id', 'projects').addClass('page').addClass('activePage'); 
```

谢谢

# ios - [ self.navigationController popViewControllerAnimated:YES ]; 在委托回调中不起作用

> ID：13551468
> 
> 赞同：2
> 
> 时间：2012-11-25T13:28:28.160
> 
> 标签：ios

我有 A -> B ->C 控制器，与下一个委托链接：

```
@protocol ViewControllerDelegate <NSObject>

- (void)onResult:(ControllerDelegateObject *)delegateObject;

@end 
```

在 CI 调用中：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    ControllerDelegateObject *object = [[ControllerDelegateObject alloc]init];
    object.model = indexPath.row;
    [delegate onResult:object];
    [ self.navigationController popViewControllerAnimated:YES ];
} 
```

比我进入B：

```
-(void)onResult:(ControllerDelegateObject *)delegateObject{
    delegateObject.brand = self.chosenBrand;
    [delegate onResult:delegateObject];
    [ self.navigationController popViewControllerAnimated:YES ]; **//doesn't work**
     NSLog(@"TEST2");
} 
```

为什么在委托回调中没有第二次调用 [ self.navigationController popViewControllerAnimated:YES ]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:39:30.803

如果你想去A：

```
popToRootViewControllerAnimated: 
```

或者，如果您有超过 3 个视图控制器 A->B->C->D 并且您想从 D 转到 B，则另一种选择。

```
- popToViewController:animated: 
```

请参阅[UINavigationController 类参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)

# php - 使用 PHP 解析来自 WSDL 的响应

> ID：13551475
> 
> 赞同：3
> 
> 时间：2012-11-25T13:28:59.953
> 
> 标签：php, parsing, soap, wsdl, curl-multi

如果我写错了标题，我很抱歉，我不熟悉 SOAP 响应和它的类型。但我想这是一个 WSDL 响应，至少我是从 WSDL 链接得到的......

我有以下网址 [http://somedomain.com/j.svc?wsdl](http://somedomain.com/j.svc?wsdl)

在我使用 curl_multi 发出请求后，我得到了以下响应。响应缩短为两个结果，因此更易于阅读

响应如下：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <GetJourneyListResponse xmlns="http://tempuri.org/">
          <GetJourneyListResult xmlns:a="http://schemas.datacontract.org/2004/07/DreamFlightWCF" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
              <a:Journey>
                 <a:FromAirport>LHR</a:FromAirport>
                 <a:TotalPrice>146</a:TotalPrice>
              </a:Journey>
              <a:Journey>
                 <a:FromAirport>LHR</a:FromAirport>
                 <a:TotalPrice>155</a:TotalPrice>
              </a:Journey>
           </GetJourneyListResult>
      </GetJourneyListResponse>
  </s:Body>
</s:Envelope> 
```

有没有机会使用 PHP 解析结果？我进行了很多搜索，包括 StackOverflow 以及我设法找到的内容。

要解析上述响应，我可以使用以下代码：

```
$xml = simplexml_load_string($result);
$xml->registerXPathNamespace('flight','http://schemas.datacontract.org/2004/07/DreamFlightWCF');
   foreach ($xml->xpath('//flight:Journey') as $item){
     print_r($item);
   } 
```

似乎上面的 PHP 代码部分是正确的。我得到了正确数量的“Journey”，但 $item 本身是空的。

有什么解决办法吗？请不要建议使用 SoapClient 来检索结果。我无法从 curl_multi 移动。我已经有了结果，我需要解析它。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-05T02:34:20.310

```
$soap_request  = "<?xml version=\"1.0\"?>\n";
      $soap_request .= "<soap:Envelope xmlns:soap=\"http://www.w3.org/2001/12/soap-envelope\" soap:encodingStyle=\"http://www.w3.org/2001/12/soap-encoding\">\n";
      $soap_request .= "  <soap:Body xmlns:m=\"http://www.example.org/stock\">\n";
      $soap_request .= "    <m:GetStockPrice>\n";
      $soap_request .= "      <m:StockName>IBM</m:StockName>\n";
      $soap_request .= "    </m:GetStockPrice>\n";
      $soap_request .= "  </soap:Body>\n";
      $soap_request .= "</soap:Envelope>";

      $header = array(
        "Content-type: text/xml;charset=\"utf-8\"",
        "Accept: text/xml",
        "Cache-Control: no-cache",
        "Pragma: no-cache",
        "SOAPAction: \"run\"",
        "Content-length: ".strlen($soap_request),
      );

      $soap_do = curl_init();
      curl_setopt($soap_do, CURLOPT_URL, "http://ecc6unitst.kaisa.com:8000/sap/bc/srt/wsdl/bndg_386D2B5BD851F337E1000000AC1264E4/wsdl11/allinone/standard/document?sap-client=400" );
      curl_setopt($soap_do, CURLOPT_USERPWD, "EBALOBORRP:welcome1");
      curl_setopt($soap_do, CURLOPT_CONNECTTIMEOUT, 10);
      curl_setopt($soap_do, CURLOPT_TIMEOUT,        10);
      curl_setopt($soap_do, CURLOPT_RETURNTRANSFER, true );
      curl_setopt($soap_do, CURLOPT_SSL_VERIFYPEER, false);
      curl_setopt($soap_do, CURLOPT_SSL_VERIFYHOST, false);
      curl_setopt($soap_do, CURLOPT_POST,           true );
      curl_setopt($soap_do, CURLOPT_POSTFIELDS,     $soap_request);
      curl_setopt($soap_do, CURLOPT_HTTPHEADER,     $header);
      $str = curl_exec($soap_do);
      if(curl_exec($soap_do) === false) {
        $err = 'Curl error: ' . curl_error($soap_do);
        curl_close($soap_do);
        print $err;
      } else {
        curl_close($soap_do);
        var_dump($str);
        print 'Operation completed without any errors';
      } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T15:51:20.437

首先尝试[Parsing SOAP response](https://stackoverflow.com/questions/11315526/parsing-soap-response)然后尝试[Google](https://www.google.pl/search?q=PHP+SOAP+response)。

# java - android ksoap2 ip地址的未知主机异常

> ID：13551477
> 
> 赞同：0
> 
> 时间：2012-11-25T13:30:02.543
> 
> 标签：java, android, http, ksoap2

我的 android 应用程序与 .Net webservice 通信。我使用 ksoap2 库与 Web 服务进行通信。

我看到每次我在 web 服务中激活方法时都需要很长时间。我调试了该`HttpTransportSE.call()`方法，我发现在该`InetAddress.getHostByAddrImpl(byte[])`方法中，大约 20 秒后出现了一个未知的主机异常...

这很奇怪，因为我的 url 是一个 IP 地址，并且不需要 dns 查找......

即使我运行此代码，此异常也会出现：

```
InetAddress.getByName("192.168.191.110").getCanonicalHostName(); 
```

有人可以解释一下如何解决这个问题吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:48:08.810

也许你忘记在 AndroidManifest.xml 中添加权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

**编辑**

也试试这个：

```
java.net.InetAddress[] x= java.net.InetAddress.getAllByName("192.168.191.110") ;
textView.setText("Address: "+x[0].getHostAddress()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:36:51.140

我发现我的 sim 卡无法访问任何可用的 dns 服务器。

所以我使用该`system/etc/hosts`文件并在那里添加了映射。

在应用程序向 dns 服务器询问地址之前，会检查`system/etc/hosts`文件。

在我添加映射后，一切都运行良好。

谢谢您的帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T13:32:48.300

要使用 IP 地址，您必须使用`getAllByName()`而不是`getByName()`. 请参阅[此处的文档](http://developer.android.com/reference/java/net/InetAddress.html#getAllByName%28java.lang.String%29)。所以更换

```
InetAddress.getByName("192.168.191.110").getCanonicalHostName(); 
```

和

```
InetAddress.getAllByName("192.168.191.110").getCanonicalHostName(); 
```

# iphone - 退出应用程序后imageview为空

> ID：13551478
> 
> 赞同：0
> 
> 时间：2012-11-25T13:30:19.450
> 
> 标签：iphone, objective-c, ios, xcode

当当前图像等于某个图像视图时，我创建了一些代码来在图像视图中显示图像。它可以正常工作，但是如果我决定退出应用程序，然后再重新进入它，则以某种方式看不到当前图像并且比较不再起作用。

```
if (imageview25.image == [UIImage imageNamed:@"BLUEBOXPUNT.png"]){
            key25.hidden = NO;
        } 
```

所以这可行，但是当我离开应用程序并返回时，它看不到图像等于 BLUEBOXPUNT.png

有没有其他方法可以做到这一点或在Java中做类似的事情我会做imageview25.getImage。我认为那会奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T13:53:13.790

您的比较逻辑是检查两个图像对象是否具有相同的地址。这仅在图像保留在缓存中时才有效。内存警告很可能会导致您在切换应用程序时看到的相同问题。

如果你想关联图像和它们的文件名，我认为你需要自己做，可能使用一个键入名称的字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:52:28.783

如果您需要显示多个图像。一种更简单的方法是使用多个`UIImageView`，它们的大小相同，位置相同。但每个都显示不同的图像。然后你可以显示你需要的并隐藏其他（或`bringSubviewToFront`）。

如果您确实需要比较两个图像：

[Cocoa Touch - 比较图像](https://stackoverflow.com/a/3400863/1548523)

[开放式CV](http://opencv.willowgarage.com/wiki/)

# ruby-on-rails - 如何将表单部分用于带有管理路由的新操作和编辑操作？

> ID：13551483
> 
> 赞同：0
> 
> 时间：2012-11-25T13:31:07.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我应该如何为该部分表单设置 url 以便能够将其用于`create`操作`update`。

现在我必须设置两个 url：`admin_faculty_path`for`update`和`admin_faculties_path`for `create`action。

```
# admin/faculties/_form.html.haml
= simple_form_for @faculty, html: { multipart: true, class: 'form-horizontal' } do |f|
  = f.input :department_id, as: :hidden, input_html: { value: params[:department_id] } if params[:department_id]
  = f.input :name
  = f.input :name_en
  = f.submit 
```

路线：

```
admin_faculties    POST   /admin/faculties(.:format)              admin/faculties#create
new_admin_faculty  GET    /admin/faculties/new(.:format)          admin/faculties#new
edit_admin_faculty GET    /admin/faculties/:id/edit(.:format)     admin/faculties#edit
admin_faculty      GET    /admin/faculties/:id(.:format)          admin/faculties#show
                   PUT    /admin/faculties/:id(.:format)          admin/faculties#update 
```

控制器：

```
# faculties_controller.rb
  def new
    @faculty = Faculty.new
  end

  def create
    @faculty = Faculty.new(params[:faculty])

    if @faculty.save
      redirect_to admin_departments_path,
        notice: t('activerecord.successful_save_data')
    else
      flash[:error] = t('activerecord.save_data_error_html')
      render 'new'
    end
  end

  def edit
    @faculty = Faculty.find(params[:id])
  end

  def update
    @faculty = Faculty.find(params[:id])

    if @faculty.update_attributes(params[:faculty])
      redirect_to admin_departments_path,
        notice: t('activerecord.successful_save_data')
    else
      flash[:error] = t('activerecord.save_data_error_html')
      render 'edit'
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:40:22.050

您需要将命名空间传递给表单：

```
simple_form_for [:admin, @faculty] 
```

参见例如

*   [Rails 路由命名空间和 form_for](https://stackoverflow.com/questions/3853531/rails-routes-namespaces-and-form-for)

# c++ - 编译时测试 void* 两个类之间的铸造安全性

> ID：13551489
> 
> 赞同：0
> 
> 时间：2012-11-25T13:32:12.820
> 
> 标签：c++, casting, void-pointers

```
#include <cassert>

struct a
{
    virtual ~a() {}
    char a_[10];
};

struct b
{
    virtual ~b() {}
    char b_[20];
};

struct c : public a
{
    virtual ~c() {}
    char c_[15];
};

struct d : public b, a
{
    virtual ~d() {}
    char d_[5];
};

int main()
{
    a a_;
    c c_;
    d d_;

    a* a__ = &a_;
    a* c__ = &c_;
    a* d__ = &d_;

    assert((void*)&a_ == (void*)a__);
    assert((void*)&c_ == (void*)c__);
    assert((void*)&d_ == (void*)d__); // error on most compiler
} 
```

我正在寻找一种方法来测试类继承图中的 void* 强制转换安全性，它可以在编译时检测到第三个断言。

```
template<typename Base, typename Derived>
struct test
{
    enum {
        is_safe = (static_cast<Derived*>(static_cast<Base*>(nullptr)) == nullptr)
    };
}; 
```

我的意图在上面的代码中有所描述，但它不会被编译，因为强制转换不是常量表达式。是否可以以独立于平台/编译器的方式检查它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:51:55.107

根据标准，转换 from `X`to`void*`和 then from `void*`to仅当与 相同`Y`时才明确定义。其他一切都是未定义的行为。因此，唯一可能的可移植、符合标准的定义是：`X``Y``test`

```
template<typename Base, typename Derived>
struct test
{
    enum {
        is_safe = false;
    };
};

template <typename X>
struct test<X, X>
{
    enum {
        is_safe = true;
    };
}; 
```

# javascript - django request.is_ajax 返回 false

> ID：13551492
> 
> 赞同：0
> 
> 时间：2012-11-25T13:32:46.833
> 
> 标签：javascript, python, django, jquery

我不明白为什么我的视图为 request.is_ajax 返回 false 这里是
views.py 中的相关代码

```
def ajax_test(request):
    if request.is_ajax():
        message = "This is an Ajax message"
    else:
        message = "Ajax error"
    return render_to_response("ajax.html",
        context_instance=RequestContext(request,{'message':message})) 
```

在 ajax.html 中

```
$(document).ready(function(){

        $('#click_me').bind('click',function(){

            $.get('#');

        });

    }); 
```

我有一个模板变量`{{ message }}`，当我单击 click_me 链接时，它应该更新为“这是一条 Ajax 消息”。但这并没有发生。我在这里阅读了所有相关问题，但无法弄清楚出了什么问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:54:12.867

也许 ajax 请求得到一个 3xx 重定向响应，并且`X-Requested-with`标头消失了？

目前尚不清楚是什么`$.get('#')`。

这是一个常见的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:58:28.973

我不知道我是否可以回答我自己的问题，但解决了，是的，我不知道 $.get('#') 做了什么，我只是尝试通过访问相同的 url这样做，这是它的工作原理

```
$(document).ready(function(){
        $('#click_me').bind('click',function(){
            $('#insert_here').load("/ajax_test/ #insert_here");
            return false;
        }); 
```

和相关的 html（我很抱歉我不知道如何在这个编辑器中包含 html 代码）在 p 元素中有`{{ message }}`id 为“insert_here”和一个 id 为 click_me 和 href 属性为“/ajax_test/”的标签，因此当我访问 url '/ajax_test/' 时，我得到“Ajax 错误”，当我单击链接时，我得到“这是一条 Ajax 消息”，如果我不使用 return false，它会返回“Ajax 错误”。我真的不知道 return false 做了什么，感谢您的回复

# php - 使用 Symfony + SASS/Jade 的便捷解决方案

> ID：13551500
> 
> 赞同：0
> 
> 时间：2012-11-25T13:33:55.830
> 
> 标签：php, symfony, sass, less, pug

设置：PHP 5.4.8 + Symfony 2 开发 + SASS + Jade。

你如何一起使用它？

我找到了很多方法，但没有一个看起来很好和干净。例如，我们有一个jade.php 项目，两年多没有更新。

如果事实证明有必要回退到 HAML 和 LESS，这对他们来说是一个好的解决方案吗？

我已经用谷歌搜索了这些东西，但我想知道你在这个问题上的个人经验，关于实际生产的一些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:31:27.950

你可以看看[Assetic](http://symfony.com/doc/current/cookbook/assetic/index.html)。

# android - 具有部分重叠的自定义视图项的列表视图 (Android)

> ID：13551501
> 
> 赞同：4
> 
> 时间：2012-11-25T13:34:01.573
> 
> 标签：android, android-layout, android-listview, android-ui

我想在 Android 中实现一个包含一些自定义视图的列表。我的问题是我希望视图一个接一个地放置，它们之间有一点重叠。就像在以下架构中一样：![在此处输入图像描述](../Images/cde035bf59dcd177138b7443edb94b71.png)

我还想以这样一种方式控制这种重叠，当用户单击其中一个项目时，它们将彼此分开。

我试图扩展 ListView 但它似乎很模糊，有什么建议吗？

编辑：这可以更清楚：

![在此处输入图像描述](../Images/be7d811f59f5ca84d78880f32d4eb6e8.png)

我通过将分隔线高度设置为 -50dp 来做到这一点。这正是我想要实现的，但不知何故它并没有反映在我的应用程序上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:29:20.540

我设法通过使用具有单个相对布局的滚动视图作为孩子来实现这一点。然后我通过定义规则和边距来动态放置视图：

```
for (int i = 0; i < 30; i++) {
        TextView tv = new TextView(context);
        tv.setText("Text \n Text" + i);

        tv.setBackgroundColor(i % 2 == 0 ? Color.RED : Color.GREEN);

        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        lp.leftMargin = 0;
        lp.topMargin = (i * 45);
        rl.addView(tv, lp);
} 
```

稍后，您可以通过更改它们的 y 值来控制子视图的定位（例如：如果要添加动画）。

这是最终结果：

![包含重叠项目的布局](../Images/e15d445028de08719ceddffcffbf9c89.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:37:07.670

这可能可以通过使用该`Camera.setTranslate`功能来实现。有关类似问题，请参阅[Android：具有重叠行的垂直 ListView](https://stackoverflow.com/questions/10211835/android-vertical-listview-with-overlaped-rows)和[Android：垂直 3d 列表视图（带有解决方案）](https://stackoverflow.com/questions/10025270/android-vertical-3d-listview)

# android - 使用android中的图像进行指纹检测

> ID：13551503
> 
> 赞同：2
> 
> 时间：2012-11-25T13:34:34.727
> 
> 标签：android, opencv, fingerprinting

我打算从事一个项目，我必须从android相机捕获的图像中检测指纹。

我对指纹处理没有先验知识。android中是否有任何开源库来完成任务？如果不是，那么我必须从哪一点开始获得有关指纹检测和处理的足够知识？

我以前没有使用过图像处理。所以有很多事情要掩盖，我可以做到。但是我想知道确切的起点，这样我就不用绕圈子了……

与此主题相关的任何链接、论文或书籍都将非常方便。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:33:39.533

手机摄像头将如何拍摄这样的[图像](http://www.idfpr.com/DPR/images/fingerprint.gif)？指纹是使用专门的传感器获取的。

如果您正在谈论从手指的普通照片中获取指纹数据，我怀疑您是否能够准确地区分指纹。

# javascript - JQuery 自动完成表单提交

> ID：13551504
> 
> 赞同：1
> 
> 时间：2012-11-25T13:34:58.390
> 
> 标签：javascript, jquery, autocomplete

我已经设法`jQuery`在我的网站上实现了自动完成插件，但想知道一旦用户从搜索中选择了一个项目，是否可以让表单自动提交。我有以下设置：

HTML 表单：

```
<form class="quick_search" action="../include/search.php" method="post">
    <input type="text" name="search" id="search" value="Search...">
</form> 
```

JavaScript：

```
$().ready(function() {
    $("#search").autocomplete("../include/search.php", {
        width: 350,
        selectFirst: false
    });
}); 
```

我还包括了`jQuery`和`Autoplugin`脚本。search.php 文件包含搜索选项列表。

目前，搜索工作正常，一旦从出现的列表中选择了一个项目，我只需要它提交表单。我尝试在搜索字段中使用 onClick 和 onSelect 选项，但这些选项都不能正常工作。

任何帮助将不胜感激（我不太了解 js）！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:41:14.187

刚刚发现您可以使用 select 但不能在 ui.item 上使用，而是在 ui.item.value 上使用

```
$(document).ready(function() {
    $(function() {
        $("#search_box").autocomplete({
            source: ['Google', 'Yahoo', 'StackOverflow'],
            select: function(event, ui) {
                $(event.target).val(ui.item.value);
                $('#search_form').submit();
                return false;
            },
            minLength: 1
        });
    });
});​ 
```

看到这个小提琴[http://jsfiddle.net/uXHCQ/](http://jsfiddle.net/uXHCQ/)

感谢@tim peterson for [jQuery-UI Autocomplete submit form onclick of item from dropdown list](https://stackoverflow.com/questions/6619500/jquery-ui-autocomplete-submitting-form-onclick-of-item-from-dropdown-list)

# ruby - 如何从 should_receive 块中返回接收者实例的自身

> ID：13551507
> 
> 赞同：1
> 
> 时间：2012-11-25T13:35:31.573
> 
> 标签：ruby, rspec2

我想让一个类的实例方法返回 self，并与另一个类实例 self 一起初始化。
但是，我正在努力了解如何简洁地说明这一点：

```
::Api.should_receive(:new).once do |arg|
  arg.should be_an_instance_of(::Cli)
end 
```

运行此规范时，这可确保在 true 而不是 Api 实例上调用 next 方法，正如预期的那样，即块的返回值。例子：

```
class Cli
  def eg
    api = Api.new(self)
    api.blowup # undefined method for true
  end
end 
```

我真的很希望该块返回 Api 实例自身而不`Api.new(...)`在规范中调用另一个调用，下面的示例就是这样做的，在我看来，非 rspec 读者会想知道为什么规范在明显`Api.new(...)`被多次调用时会通过.

谁能建议如何最好地做到这一点？

**当前解决方案：** 这读起来像`::Api.new(...)`被称为三次：一次创建`api`，一次创建`cli`，一次创建`start`。然而，一个电话的规格通过了。我理解为什么并且这是正确的，所以不是错误。但是，我想要一个不熟悉 rspec 的读者可以扫描并且不会有`Api.new`被多次调用的印象的规范。另请注意，`...once.and_return(api){...}`不起作用，该块需要返回`api`才能通过。

```
let(:cli){ ::Cli.start(['install']) }
let(:start){ ::Cli.start(['install']) }
it 'is the API' do
  api = ::Api.new(cli)
  ::Api.should_receive(:new).once do |arg|
    arg.should be_an_instance_of(::Cli)
    api
  end
  start
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:48:06.203

您可以将原始方法 ( ) 保存在局部变量中，然后使用它从块`new`中返回新方法：`api`

```
original_method = ::Api.method(:new)
::Api.should_receive(:new).once do |arg|
  arg.should be_an_instance_of(::Cli)
  original_method.call(arg)
end 
```

这将运行期望，检查参数是否是 的实例`::Cli`，然后从原始方法（即 api）返回值。

# html - facebook喜欢按钮没有出现

> ID：13551510
> 
> 赞同：0
> 
> 时间：2012-11-25T13:35:46.853
> 
> 标签：html, facebook, facebook-like

我用这个代码添加了一个类似 facebook 的按钮：

```
<div id="fblike"><fb:like id="aa" layout="button_count" show_faces="false" ></fb:like></div> 
```

问题是它只适用于 Chrome 和 IE。这怎么可能？在 Firefox 中它没有显示。您可以在以下网址看到它：http: [//judopassion.com/wordpress/ ?p=274](http://judopassion.com/wordpress/?p=274)

当您前进到图片库时，将出现一个带有按钮的弹出窗口。

可能是什么问题？![在此处输入图像描述](../Images/42c9de171d3be3ede176245474dd6651.png) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:31:34.520

如果它仅在 Firefox 中不起作用，我的猜测是这个问题：

[Facebook Like 按钮在加载隐藏时不显示](https://stackoverflow.com/questions/12291017/facebook-like-buttons-not-displaying-when-loaded-hidden)

顺便说一句，我在您的页面上只看到一个“赞”按钮，它就在文章旁边，在每个浏览器中始终可见。如果我单击图库中的箭头，则只有一个带有倒计时的弹出窗口。倒计时结束后，我可以浏览图片。没有额外的like按钮的迹象。

# c++ - char* - 为什么指针中没有地址？

> ID：13551511
> 
> 赞同：6
> 
> 时间：2012-11-25T13:35:53.560
> 
> 标签：c++

我有一个基本的问题，`char*`我不明白

```
char* aString = "Hello Stackoverflow"; 
```

指针指向字符链的第一个字符。

```
cout << *aString; // H 
```

但为什么整个字符串保存在指针中？

```
cout << aString //Hello Stackoverflow 
```

我希望有一个地址，地址不是保存在指针中吗？“Hello Stackoverflow”的地址在哪里？

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-25T13:39:13.157

有一个重载，`operator<<(ostream&, char const*)`它输出从该指针开始的以空字符结尾的字符串，并且优先于`ostream::operator<<(void*)`将输出地址的运算符。

如果您想要地址，请将指针转换为`void*`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T13:37:35.737

字符串从该位置开始按顺序保存。由 C++ 继承的 C 规则简单地说，当您尝试使用 a`char *`作为字符串时，它将继续读取字符，直到遇到 0**字节**。

如果您**确实**想获取地址，请告诉`cout`不要将其解释为“字符串”：

```
std::cout << (void *)aString << std::endl; 
```

* * *

### 编辑

> 标准规定 0 == '\0' 在哪里？

来自 C++11 草案，第 2.3-3 节：

> 基本执行字符集和基本执行宽字符集应分别包含基本源字符集的所有成员，加上表示警报、退格和回车的控制字符，**加上一个空字符（分别为空宽字符），其表示全为零位**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T13:43:55.357

`aString`确实拥有一个地址，但是`operator<<`您的代码选择 ( `operator<<(ostream&, const char*)`) 的重载碰巧打印的不是给出的地址，而是从该地址开始的以空字符结尾的字符串。

如果要打印地址，可以通过强制转换来使用`ostream::operator<<(void*)`重载。`aString``void*`

# git - 如何从构建服务器有效地使用 Git (GitHub)

> ID：13551515
> 
> 赞同：0
> 
> 时间：2012-11-25T13:36:09.680
> 
> 标签：git, github, build-automation

我有一个 GitHub 存储库，其中包含几百兆字节的项目代码。我有一个构建服务器，我想让它经常从 GitHub 中提取源代码并构建它。我担心在每次构建时，我都会将完整的 GitHub 存储库拉到我的构建服务器上。有没有推荐的方法让我的 GitHub 存储库与我的构建服务器上的存储库同步，这样我只需要拉下差异？（对我来说）如何做到这一点并不明显。任何文章或参考资料将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T20:57:33.897

您应该将构建服务器配置为不是`git clone`每次都存储库，而只是配置到`git fetch`您要构建的分支。这样，只有初始克隆操作成本高，后续提取只会获取增量并且速度更快。

# google-contacts-api - Google 联系人 API 错误

> ID：13551525
> 
> 赞同：0
> 
> 时间：2012-11-25T13:37:49.997
> 
> 标签：google-contacts-api

我正在使用 Google Contact API 通过 java 访问我的联系人。我正在为此使用我的 gmail 帐户。我的帐户有双向密码验证。所以我写了一个示例程序来显示标题。但我收到了类似的错误

> 线程“主”com.google.gdata.client.GoogleService$InvalidCredentialsException 中的异常：com.google.gdata.client.GoogleAuthTokenFactory 的 com.google.gdata.client.GoogleAuthTokenFactory.getAuthException(GoogleAuthTokenFactory.java:600) 中的凭据无效。 getAuthToken(GoogleAuthTokenFactory.java:500) 在 com.google.gdata.client.GoogleAuthTokenFactory.setUserCredentials(GoogleAuthTokenFactory.java:346) 在 com.google.gdata.client.GoogleService.setUserCredentials(GoogleService.java:362) 在 com.google .gdata.client.GoogleService.setUserCredentials(GoogleService.java:317) 在 com.google.gdata.client.GoogleService.setUserCredentials(GoogleService.java:301) 在 com.contact.manager.Create.createContact(Create.java:15 ) 在 com.contact.manager.Create.main(Create.java:26)

我的代码：

```
public class Create {

    public void createContact() throws IOException, ServiceException {
        ContactsService contactsService = new ContactsService(
                "mine-MyProduct-3");
        contactsService.setUserCredentials(username,
                password);
        URL feedUrl = new URL(
                "https://www.google.com/m8/feeds/contacts/{EmailID}/full");
        ContactFeed resultedFeed = contactsService.getFeed(feedUrl,
                ContactFeed.class);
        System.out.println(resultedFeed.getTitle().getPlainText());
    }

    public static void main(String[] args) throws IOException, ServiceException {
        Create create = new Create();
        create.createContact();
    }
} 
```

1.  当时我正在为我的帐户使用两步身份验证，我收到这样的错误。
2.  使用普通帐户（我的意思是一步验证）时，我没有收到任何错误。

在进行两步身份验证时是否有任何特殊的方法来进行身份验证。你能帮忙吗？我卡在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:41:09.430

正如 Google 在两步文档中明确指出的那样，您不能使用常规密码访问 API。

相反，您应该使用 OAuth 2。
或者，您可以创建一个特定于应用程序的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:03:56.460

试试这个！我希望它会有所帮助。当 API 请求失败时，HTTP 将返回 4xx 或 5xx 响应代码，一般标识失败，以及提供有关导致失败的错误的更具体信息的 XML 响应。

# python - 第一次后未遍历 for 循环 - Python

> ID：13551528
> 
> 赞同：0
> 
> 时间：2012-11-25T13:38:21.890
> 
> 标签：python, regex, for-loop

我试图忽略从我的搜索中列入黑名单的网址。'ltp_block' 包含包含不同 url 的数据。

```
p = re.compile('href="(.*?)" rel="nofollow"')
url = "http://www.****.**" + p.findall(current)[0]

r = requests.get(url) 
```

上面的代码用于从 'ltp_block' 获取不同的 url。r.url 在调用时定义循环中的 url。

```
for each_row in blacklist:
    if(re.findall('\\b'+each_row[0]+'\\b', r.url, flags=re.IGNORECASE) != []):
        print "found" 
```

**问题**- 上面的“for”循环只工作一次。当 'check' 变为 1 或主循环选择另一个 url 时，第二个 'for' 循环就像它不存在一样被简单地跳过。为什么 ？

```
conn = sqlite3.connect('test.db')
c = conn.cursor()
blacklist = c.execute("SELECT `name` FROM `blacklist`")
check = 0
for row in ltp_block:

        p = re.compile('versan')
        current = ltp_block[check]
        if(p.findall(current) != []):
            p = re.compile('price=(.*?)&')
            ltp = p.findall(current)[0]
            del p
        else:
            p = re.compile('Gesa: (.*?) &')
            ltp = p.findall(current)[0]
            del p

        p = re.compile('href="(.*?)" rel="nofollow"')
        url = "http://www.****.**" + p.findall(current)[0]

        r = requests.get(url)

        for each_row in blacklist:
            if(re.findall('\\b'+each_row[0]+'\\b', r.url, flags=re.IGNORECASE) != []):
                print "found"

        check = check + 1 
```

回答 -

我不得不重新编译 blacklist = c.execute("SELECT `name`FROM `blacklist`") 每次

我把它放在主'for'循环中，现在一切正常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:29:34.150

`c.execute`正在返回一个迭代器。迭代器只能迭代一次。作为一个更简单的例子，试试这个：

```
numbers = (x for x in xrange(10))  # a simple iterator

for number in numbers:
     print number

print "Repeat"

for number in numbers:
     print number 
```

只有第一个循环提供任何输出，因为迭代器在第二个循环开始时已耗尽并为空。将其与以下内容进行比较：

```
numbers = (x for x in xrange(10))
numbers = list(numbers)  # turn the iterator into a list

for number in numbers:
     print number

print "Repeat"

for number in numbers:
     print number 
```

哪个按预期工作。在你的情况下，你想要：

```
blacklist = list(c.execute("SELECT `name` FROM `blacklist`")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:06:55.147

for 循环被“简单地跳过，就像它不存在一样”的唯一方法是没有任何东西可以迭代。如果真是这样，唯一的解释就是`blacklist`空洞的。如果您报告的内容属实，则根本没有其他解释。

这样的事情很容易证明。在循环之前添加一个 print 语句，并打印出 的值`blacklist`：

```
print "blacklist:", blacklist
for each_row in blacklist:
    ... 
```

# android - 如何通过单击按钮显示菜单列表？

> ID：13551531
> 
> 赞同：9
> 
> 时间：2012-11-25T13:39:05.423
> 
> 标签：android, menu

我的应用程序中有一个按钮，如果有人单击此按钮，我想这样做，菜单将显示。

![在此处输入图像描述](../Images/6d728bba5add4f5eebf90e370de1fb4f.png)

就像第一张图片上的这个菜单一样。这个怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-25T13:46:29.247

使用需要在 Button 点击​​事件上调用[Activity.openOptionsMenu 。](http://developer.android.com/reference/android/app/Activity.html#openOptionsMenu%28%29)

在你的按钮点击写

```
this.openOptionsMenu(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-02T12:41:50.183

这就是我`showPopUp()`在 Kotlin 中实现功能的方式，并且我遵循了 @umesh 提到的相同文档：http: [//developer.android.com/guide/topics./ui/menus.html#PopupMenu](http://developer.android.com/guide/topics./ui/menus.html#PopupMenu)。然后你可以在你的函数中调用该`onClick()`函数。

```
 private fun showPopup(v: View) {
         PopupMenu(this, v).apply {
            setOnMenuItemClickListener(object: PopupMenu.OnMenuItemClickListener {
                override fun onMenuItemClick(item: MenuItem?): Boolean {
                    return when (item?.itemId) {

                        R.id.settings -> {
                            dosomething()
                            true
                        }
                        else -> false
                    }
                }

            })
            inflate(R.menu.menu)
            show()
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-07T18:27:38.720

```
 private void showPopup(View v) {
        PopupMenu popup = new PopupMenu(this, v);
       MenuInflater inflater = popup.getMenuInflater();
        inflater.inflate(R.menu.option_menu, popup.getMenu());
        popup.show();

    }

 button.setOnClickListener(new View.OnClickListener()
 {
                public void onClick(View v) {

                    showPopup(v);
                }
            }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-04T08:28:45.223

按照下面的网址，它有示例 [http://developer.android.com/guide/topics/ui/menus.html#PopupMenu](http://developer.android.com/guide/topics/ui/menus.html#PopupMenu)

# mod-rewrite - Mod Rewrite 将接受带斜线和不带斜线

> ID：13551532
> 
> 赞同：0
> 
> 时间：2012-11-25T13:39:08.360
> 
> 标签：mod-rewrite

我目前在我的 htaccess 文件中有这个

```
RewriteRule ^(cms/.*)$ cms.php?querystring=$1 [L,QSA] 
```

这是获取域名后面的所有内容

目前，如果我输入`www.mydomain/classified/`没有问题

但是如果我输入`www.mydomain/classified`（最后没有斜线），它将触发 404 页面

我需要修改重写规则 [ `^(cms/.*)$`]，如果我输入它不会触发 404 页面 `www.mydomain/classified`（最后没有斜杠）

但如果我输入会显示 404

```
www.mydomain/classified-any-text-here/ 
```

或者

```
www.mydomain/classified-any-text-here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T20:40:12.113

您可以测试以下代码

```
 [^(cms/?.*)$] 
```

# jquery - 通过查询在每个元素后添加中断

> ID：13551536
> 
> 赞同：1
> 
> 时间：2012-11-25T13:39:23.813
> 
> 标签：jquery

我有一个代码：

```
<span class="twolastbuttons">
  <div class="btn-group">
    <a class="btn btn-success" onclick="addToWishList('<?php echo $product_id; ?>');"><?php echo $button_wishlist; ?></a>
    <a class="btn btn-success" onclick="addToCompare('<?php echo $product_id; ?>');"><?php echo $button_compare; ?></a>
  </div>
</span> 
```

我正在尝试使用 jquery在每个**< A >之后添加****< BR >**标签，但没有运气。请帮忙！

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:46:55.923

这样做：

```
$('.btn-group a').each(function() {
    $("<br/>").insertAfter($(this));
}); 
```

请参阅**[现场演示](http://jsfiddle.net/SivaCharan/JRVtU/1/)**和有关**[.insertAfter()](http://api.jquery.com/insertAfter/)的更多信息-[单击此处](http://api.jquery.com/insertAfter/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T13:43:06.570

你可以这样做：

```
$('.btn-group a').after('<br>'); 
```

或者也可以通过其他方式：

```
$('<br>').insertAfter('.btn-group a'); 
```**

# arrays - WCF 服务返回数组而不是列表

> ID：13551541
> 
> 赞同：1
> 
> 时间：2012-11-25T13:39:35.127
> 
> 标签：arrays, wcf, list

我的客户正在使用从 WSDL 创建的代理...是否可以将服务设置为发送 List 而不是`MyCustomObject[]`？

我在用

```
svcutil /t:metadata /ct:System.Collections.Generic.List`1 localhost:8080/managedApp 
```

但不起作用...

我的客户使用 Visual C++

IDE 是 Visual Studio 2012 --> 无法添加服务引用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:55:10.917

是的。

/collectionType：如果您直接使用 svcutil.exe，或者如果“添加服务引用”转到高级 -> 集合类型并更改为您想要的任何内容。

为什么有可能是，当使用 Web 服务/WCF“服务”时，您的端点总是接收以 XML/JSON 序列化的数据，而不是将此数据反序列化为您的 C++ 数据类型，这取决于您想要反序列化接收到的集合类型包含一些集合的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:01:13.000

好的...最后我放弃了，我只是将数据作为数组而不是 std:list 发送...

我就是这样做的： 1.- 使用 svcutil /t:metadata 从服务中获取元数据（注意：服务必须正在运行）。2.- 创建代理 wsutil *.wsdl *.xsd 3.- 将代理文件（.h 和 .c）添加到我的客户端并使用代理功能到服务。

如果您不熟悉 c 编程，那么数组有点棘手......

数据合约：

```
 [DataContract]
        public class CompositeType
        {
            CompositeType2[] ctListValue;
            bool boolValue;
            string stringValue;

            [DataMember]
            public bool BoolValue
            {
                get { return boolValue; }
                set { boolValue = value; }
            }

            [DataMember]
            public string StringValue
            {
                get { return stringValue; }
                set { stringValue = value; }
            }

            [DataMember]
            public CompositeType2[] CtListValue
            {
                get { return ctListValue; }
                set { ctListValue = value; }
            }
        }

        [DataContract]
        public class CompositeType2
        {
            bool boolValue;
            string stringValue;

            [DataMember]
            public bool BoolValue
            {
                get { return boolValue; }
                set { boolValue = value; }
            }

            [DataMember]
            public string StringValue
            {
                get { return stringValue; }
                set { stringValue = value; }
            }
        } 
```

和我的客户端调用数组：

```
// *** COMPOSITETYPE CALL
    CompositeType * co = new CompositeType();
    co->BoolValue = true;
    co->StringValue = L"Im co";

    CompositeType2 co0;
    co0.BoolValue = true;
    co0.StringValue = L"Im co0";

    CompositeType2 co1;
    co1.BoolValue = true;
    co1.StringValue = L"Im co1";

    CompositeType2 co2;
    co2.BoolValue = true;
    co2.StringValue = L"Im co2";

    CompositeType2 ** comType2; // <-- this is my CompositeType2[] I will send to the service
    comType2 = new CompositeType2*[3];

    comType2[0] = &co0;
    comType2[1] = &co1;
    comType2[2] = &co2;

    co->CtListValue = comType2;
    co->CtListValueCount = 3;

    CompositeType* result2;

    BasicHttpBinding_IHelloWorldService_SayHelloCompType(
            proxy, co, &result2,
            heap, NULL, 0, NULL, error); 
```

希望这可以帮助...

# php - CakePHP - 在列出的记录中显示另一个列表记录

> ID：13551542
> 
> 赞同：0
> 
> 时间：2012-11-25T13:39:49.300
> 
> 标签：php, cakephp, html-table, record

`How`我们可以使用 CakePHP 在列出的记录中列出`display`另一个记录吗？`inside`

我有 3 张桌子，其中包括：（员工、课程、出勤）

（职员）

```
staff_id    |   name    |   passport
------------------------------------------------
1       |   A   |   123
2       |   B   |   132
3       |   C   |   321 
```

（课程）

```
c_id    |   name
----------------------
10  |   PHP
20  |   AJAX
30  |   XHTML 
```

（出席）

```
at_id   |   staff_id    |   course_id
------------------------------------------------
1   |   1       |   10
2   |   1       |   20
3   |   1       |   30
4   |   2       |   20
5   |   2       |   30 
```

我想生成一些报告以显示我们员工参加的课程列表，如下所示：

```
Name    |   Course Attend
------------------------------
A   |   PHP
    |   AJAX
    |   XHTML
B   |   AJAX
    |   XHTML 
```

在这里，我使用表人员来显示结果，我应该怎么做才能在`Course Attend`与出勤表相关的列中获得另一个获取结果，该表将列出与其员工 ID 相关的所有相关结果。

我的代码：

（报告控制器.php）

```
$view = $this->Staff->find('all');

$this->set('view', $view); 
```

（查看-report.ctp）

```
<table>
<?php foreach($view as $data): ?>
<td>
    <?php echo $data['Staff']['name']; ?>
</td>
<td>
    <?php // something to do here... ?>
</td>
<?php endforeach ?>
</table> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:26:40.937

你的问题不是很清楚，但在我看来，你想显示一个包含来自所有 3 个表的信息的视图。

在这种情况下，您将需要创建[模型关联](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)。

在**考勤模型中：**

```
class Attendance extends AppModel {
    public $hasOne = array(
        'Staff' => array(
            'className'  => 'Staff',
            'foreignKey' => false,
            'conditions' => array('Staff.staff_id = Attendance.staff_id')
        ),
        'Course' => array(
            'className'  => 'Course',
            'foreignKey' => false,
            'conditions' => array('Course.c_id = Attendance.course_id')
        )
    );
} 
```

在**控制器**中，您可以添加一个 find('all') 查询，该查询将从出勤中检索所有行，以及它们对应的 Staff 和 Course 行。

```
$attendance_rows = $this->Attendance->find('all', array('order' => 'Staff.name ASC, Staff.staff_id ASC'));
$this->set("attendance_rows", $attendance_rows); 
```

在**视图**中，您可以像往常一样使用 foreach 循环：

```
<table>
<?php foreach($attendance_rows as $data): ?>
<td>
    <?php echo $data['Staff']['name']; ?>
</td>
<td>
    <?php echo $data['Course']['name']; ?>
</td>
<?php endforeach ?>
</table> 
```

要仅显示员工的名称一次，您可以在视图中添加一个变量，并在每次找到新的员工行时重置它。如果对 find('all') 查询进行了排序，则此方法有效。

```
<table>
<?php $temp = null; $no = 1;?>
<?php foreach($attendance_rows as $data): ?>
<td>
    <?php if ($temp != $data['Staff']['staff_id']) { echo $no; $no++;} ?>
</td>
<td>
    <?php if ($temp != $data['Staff']['staff_id']) { echo $data['Staff']['name']; $temp = $data['Staff']['staff_id']}; ?>
</td>
<td>
    <?php echo $data['Course']['name']; ?>
</td>
<?php endforeach ?>
</table> 
```

还有一个建议：您应该始终将主键命名为“id”，而不是“staff_id”或“c_id”，因为 Cakephp 知道如何根据名称绑定模型。如果您以“Cakephp 方式”创建模型，则在创建关联时无需指定“foreignKey”或“conditions”字段。

# ruby-on-rails - 在开发过程中，我应该如何处理 Rails 引擎外部所需的模型？

> ID：13551544
> 
> 赞同：1
> 
> 时间：2012-11-25T13:40:06.120
> 
> 标签：ruby-on-rails, ruby, rails-engines

我正在将 Rails 应用程序的一部分提取到引擎中。引擎包含与安装引擎的应用程序中的模型类有关系的模型类。在某些情况下，这些关系是必需的。

```
module Carrier
  class Profile < ActiveRecord::Base
    attr_accessible :company_id
    belongs_to :company, class_name: Carrier.company_class_name
    validates :company, presence: true
  end
end 
```

既然引擎没有`Company`类，那么在开发过程中应该如何处理这种关系呢？其他人如何“存根”外部类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:28:03.517

在引擎中为所需的类创建一个模型（`Company`在示例中）。

```
module Carrier
  class Company < ActiveRecord::Base
  end
end 
```

添加一个仅在引擎中的 Dummy 应用程序中运行的迁移。

```
class CreateCarrierCompanies < ActiveRecord::Migration
  def change
    if Rails.application.class.parent_name == "Dummy"
      create_table :carrier_companies do |t|
        t.timestamps
      end
    end
  end
end 
```

在引擎模块中创建`mattr_accessor`和其他方法，以便它在开发中使用存根类，但在其他情况下使用定义的类。

```
module Carrier
  mattr_accessor :company_class_name
  def self.company_class_name
    @@company_class_name || "Carrier::Company"
  end
  def self.company_class
    company_class_name.constantize
  end  
end 
```

`company_class_name`如果在安装引擎时未设置，您可能需要引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:50:56.460

对于主应用程序中的任何迁移和模型，我将迁移复制到虚拟应用程序中，并在虚拟应用程序中定义相同的空模型。

# sql - 外键可以有常量而不是字段名吗？将 FK 与 STI 子类相关联

> ID：13551547
> 
> 赞同：9
> 
> 时间：2012-11-25T13:40:41.280
> 
> 标签：sql, database-design, foreign-keys, sti

**设置**

因此，一旦您决定使用 STI（单表继承），我发现这是一个相当普遍的场景。

您有一些具有各种子类型的基本类型。

*   人 <（教师、学生、员工等）
*   用户 <（会员、管理员）
*   会员<（买方，卖方）
*   车辆 <（汽车、船、飞机）
*   等等

在数据库中建模有两种主要方法：

*   单表继承
    *   一个带有类型字段和一堆可为空字段的大表
*   类表继承
    *   每种类型一张桌子，共享 PK（从子代到父代的 FK）

虽然 STI 存在一些问题，但我*确实*喜欢它如何设法减少您必须进行的连接数量，以及 Rails 等框架中的一些支持，但我遇到了一个关于如何关联的问题子类特定的表。

例如：

*   认证只能参考教师-人员
*   配置文件应仅引用成员用户
*   WingInformation 不应与汽车或船相关（除非你可能是蝙蝠侠）
*   广告归卖方会员而非买方会员所有

使用 CTI，这些关系是微不足道的 - 只需在相关表上打一个外键，你就完成了：

```
ALTER TABLE advertisements
 ADD FOREIGN KEY (seller_id) REFERENCES sellers (id) 
```

但是对于 STI，类似的事情不会捕获子类型限制。

```
ALTER TABLE advertisements
  ADD FOREIGN KEY (seller_id) REFERENCES members (id) 
```

我想看到的是这样的：

```
* Does not work in most (all?) databases *
ALTER TABLE advertisements
  ADD FOREIGN KEY (seller_id, 'seller') REFERENCES members (id, type) 
```

我所能找到的只是一个肮脏的黑客，需要向相关表添加一个计算列：

```
ALTER TABLE advertisements
  ADD seller_type VARCHAR(20) NOT NULL DEFAULT 'seller'
ALTER TABLE advertisements
  FOREIGN KEY (seller_id, seller-type) REFERENCES members (id, type) 
```

这让我觉得很奇怪（更不用说不雅了）。

**真正的问题**

那里有一个 RDBMS 可以让我这样做吗？

有没有理由为什么这甚至不可能？

*这只是除了在最微不足道*的情况下不使用 STI 的另一个原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T18:36:04.813

没有在外键声明中声明常量的标准方法。您必须命名列。

但是您可以使用以下方法之一强制该列具有固定值：

*   计算列

*   CHECK 约束

*   在 INSERT/UPDATE 之前触发以使用默认值覆盖任何用户提供的值。

# java - solr-jetty 4.0.0 错误 BoolField$1$1 覆盖最终方法 setReader

> ID：13551553
> 
> 赞同：0
> 
> 时间：2012-11-25T13:41:42.190
> 
> 标签：java, solr, openjdk, solrcloud, jetty-8

我有 4 个节点 SolrCloud 集群和单独的 zookeeper 合奏。我使用[https://launchpad.net/~blubolt/+archive/preciseplatform](https://launchpad.net/~blubolt/+archive/preciseplatform) repo 来获取 solr-jetty。当我开始 jetty8 时，我在我的日志文件中得到了这个：

```
 Nov 25, 2012 4:20:26 PM org.apache.solr.schema.IndexSchema readSchema
INFO: Schema name=example
Nov 25, 2012 4:20:26 PM org.apache.solr.common.SolrException log
SEVERE: null:java.lang.VerifyError: class org.apache.solr.schema.BoolField$1$1 overrides final method setReader.(Ljava/io/Reader;)V
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:415)
        at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:377)
        at org.apache.solr.schema.BoolField.<clinit>(BoolField.java:66)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:264)
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:432)
        at org.apache.solr.core.SolrResourceLoader.newInstance(SolrResourceLoader.java:459)
        at org.apache.solr.core.SolrResourceLoader.newInstance(SolrResourceLoader.java:455)
        at org.apache.solr.schema.FieldTypePluginLoader.create(FieldTypePluginLoader.java:81)
        at org.apache.solr.schema.FieldTypePluginLoader.create(FieldTypePluginLoader.java:43)
        at org.apache.solr.util.plugin.AbstractPluginLoader.load(AbstractPluginLoader.java:142)
        at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:369)
        at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:113)
        at org.apache.solr.core.CoreContainer.getSchemaFromZk(CoreContainer.java:1438)
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:837)
        at org.apache.solr.core.CoreContainer.load(CoreContainer.java:539)
        at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:312)
        at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:106
        at org.eclipse.jetty.servlet.FilterHolder.doStart(FilterHolder.java:114)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
        at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:755)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:258)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1221)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:699)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:454)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
        at org.eclipse.jetty.deploy.WebAppDeployer.scan(WebAppDeployer.java:309)
        at org.eclipse.jetty.deploy.WebAppDeployer.doStart(WebAppDeployer.java:189)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
        at org.eclipse.jetty.util.component.AggregateLifeCycle.doStart(AggregateLifeCycle.java:63)
        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:53)
        at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:91)
        at org.eclipse.jetty.server.Server.doStart(Server.java:262)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1215)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1138)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.eclipse.jetty.start.Main.invokeMain(Main.java:457)
        at org.eclipse.jetty.start.Main.start(Main.java:602)
        at org.eclipse.jetty.start.Main.main(Main.java:82) 
```

在 myhostname:8983/solr/# 我在每个链接上都看到带有“正在加载...”的管理界面。与默认或自定义 schema.xml 相同。这似乎是破坏方案解析器的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:58:47.013

问题关闭。切勿将一个配置目录用于不同的 solr 版本。删除 /etc/solr/collection1/conf，删除 zookeeper 数据，然后重新安装最新版本的 solr-common 和 solr-jetty。现在一切正常。

# r - R ggplot2 带有 geom_text 的箭头

> ID：13551558
> 
> 赞同：0
> 
> 时间：2012-11-25T13:42:21.863
> 
> 标签：r, ggplot2, text

我使用 geom_text 绘制一些文本。一个文本示例是：

```
a -> 7.0 
```

但是，我不想使用“->”作为箭头，而是使用箭头符号。

我发现包 plotmath 可以与 ggplot 一起使用来绘制符号。

我不确定将文本与实际符号分开绘制并使用靠近在一起的不同坐标对齐它们是否更容易，这样一旦绘制它看起来就像一个单一的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:40:35.893

您需要将其作为表达式传递并`parse=TRUE`使用`geom_text`. `geom_text`文档应该为您提供足够的帮助：

绘图与`geom_text`：[链接](https://github.com/hadley/ggplot2/wiki/Plotmath)。

# c# - 改变能见度不起作用

> ID：13551560
> 
> 赞同：0
> 
> 时间：2012-11-25T13:42:41.157
> 
> 标签：c#, .net, winforms

我有一个`Label`和`PictureBox`元素，在设计师中我将可见性设置为`false`.

现在我试试这个：

```
 private void openExcelButton_Click(object sender, EventArgs e)
    {

        openExcelDialog.Filter = "Excel files|*.xls;*.xlsx;*.csv";
        DialogResult result = openExcelDialog.ShowDialog();
        if (result == DialogResult.OK) // Test result.
        {
            LoadingGIF.Visible = true;
            LoadingLabel.Text = "Loading...";
            LoadingLabel.Visible = true;
            string file = openExcelDialog.FileName;

            //more code
            LoadingGIF.Visible = false;
            LoadingLabel.Text = "Uploading Finished!";

        }
    } 
```

现在，当按下按钮并选择一个文件时，直到我完成该`//more code`部分中的代码然后标签更改之前，什么都没有发生。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:49:05.173

发生这种情况的原因是因为您的主线程变得无响应并且不允许更改按顺序发生。一年前我在一个项目上遇到了一个非常相似的问题。MS 建议的解决方案是使用后台工作程序打开文件并对其进行操作，这样主线程就不会变得无响应。微软在这里有一个如何使用后台工作者的相当不错的例子：http: [//msdn.microsoft.com/en-us/library/cc221403 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx)

# asp.net - MVC 3 导航到控制器

> ID：13551561
> 
> 赞同：0
> 
> 时间：2012-11-25T13:42:52.250
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-routing

对不起这个愚蠢的问题，但我怎样才能实现以下事情？

我有一个名为 ServerMonitor 的控制器，它只有一个 Action

```
 public ActionResult Index()
        {
            return Content(WebUtility.ServerID);
        } 
```

如何执行以下操作键入

[http://mydom.com/ServerMonitor](http://mydom.com/ServerMonitor)而不是**http://mydom.com/ServerMonitor/Index**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:45:19.897

您需要使`{action}`路由 URL 中的参数默认为`"index"`.
ASP.Net MVC 模板中定义的标准路由已经这样做了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:59:03.547

```
routes.MapRoute
(
"RouteName",
{controller}",
new{action = "index", id = "UrlParameter.optional"
); 
```

我认为这基本上是你所需要的。

# sql - SQL - 计数不同的出现？

> ID：13551562
> 
> 赞同：0
> 
> 时间：2012-11-25T13:42:59.023
> 
> 标签：sql, count, distinct

我有一个这样的数据库：

姓名、日期、通话

天代表日期，呼叫数代表他们拨打的电话数。是否有一种 SQL 语法可以返回当天的通话总数？我假设它的 COUNT DISTINCT 但我不能让它返回例如两个人的实例，同一天，返回应该是两者的总数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:44:47.450

`SELECT Day, SUM(Calls) FROM table GROUP BY Day;`

# javascript - 单步执行 JSON 对象，使用 Regex 从 Unix Timestamp 为 Google Chart 创建 Javascript 日期对象

> ID：13551569
> 
> 赞同：0
> 
> 时间：2012-11-25T13:43:45.467
> 
> 标签：javascript, jquery, json

我在 php 中生成了以下 JSON 对象，并通过 AJAX 将其传递给我的 javascript。这个 JSON 对象本身是不够的，因为我使用的 Google Charts API 需要一个用于 JSON 中每个日期的 javascript 日期对象。

我的日期目前以 UNIX 时间戳编码——1199170800,1201849200,1343800800,1346479200。我想我可以在时间戳的一侧添加一个正则表达式量词（即：~1346479200），使用 REGEX 根据量词查找日期，将日期转换为 javascript 对象，然后用正则表达式替换每个量词。说起来容易，然后做一些。

```
{"cols":[{"type":"date","label":"FromDate"},{"type":"number","label":"Electricity Use     
(KWH)"},{"type":"number","label":"Cooling Degree Days"}],"rows":[{"c":       
[{"v":1199170800,"f":"Jan-08"},{"v":"559280","f":"559,280"},{"v":"0"}]},{"c":
[{"v":1201849200,"f":"Feb-08"},{"v":"653193","f":"653,193"},{"v":"381"}]},{"c":
[{"v":1343800800,"f":"Aug-12"},{"v":"667874","f":"667,874"},{"v":"322"}]},{"c":
[{"v":1346479200,"f":"Sep-12"},{"v":"687299","f":"687,299"},{"v":"101"}]}]} 
```

我浏览了许多类似的帖子以获得一些想法，但我无法解决这个问题......类似的，看似有用的帖子：

[使用正则表达式键匹配Javascript循环遍历对象获取值](https://stackoverflow.com/questions/10758112/loop-through-object-get-value-using-regex-key-matches-javascript)

[http://sudarshanbhalerao.wordpress.com/2011/08/14/convert-json-date-into-javascript-date/](http://sudarshanbhalerao.wordpress.com/2011/08/14/convert-json-date-into-javascript-date/)

[日期范围谷歌图表工具](https://stackoverflow.com/questions/9180519/date-range-google-chart-tools)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:26:52.313

不需要正则表达式。

*   [将 JSON 解析](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)为 JavaScript 对象。
*   循环遍历结果对象的“rows”键。
*   对于每个项目，获取“c”键，这看起来就是您需要的值。
*   在上面的示例中，值是字符串，因此您应该使用 将它们转换为整数`parseInt`。
*   为每个对象创建一个新`Date`对象，并将整数值乘以 1000 传递给它。如果这样做`new Date(integer)`，它将使用该时间戳创建一个对象，但该值应以毫秒为单位，而不是像普通 UNIX 时间戳那样以秒为单位。

# javascript - 从 HTML 元素属性访问 JavaScript 变量

> ID：13551571
> 
> 赞同：0
> 
> 时间：2012-11-25T13:44:00.663
> 
> 标签：javascript, jquery

有没有办法从 HTML 元素的属性访问 JavaScript 变量？

例如：

```
<a href="#" id="id1" my-attr="test">click here</a>

<script type="text/javascript">
var test="hello world!";
$("#id1").click(function() { alert($(this).attr('my-attr')) });
</script> 
```

我想要发生的是显示“hello world！”的警报。但显然相反，它显示“测试”

我知道如果我使用 eval() 我可以做到这一点，我只是想知道是否还有其他方法。某种类型的 JavaScript 反射之类的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:00:34.937

```
<a href="#" id="id1" my-attr="test">click here</a>

<script type="text/javascript">
var test="hello world!";
$("#id1").click(function() { 
          $(this).attr('my-attr',test);
          alert($(this).attr('my-attr')); 
});
</script> 
```

你需要把你的变量测试放在那个`.attr`函数中。并且不要`my-attr`用作自定义属性，而是使用`Data-attr`，以便您可以使用`.data`jquery 中的函数访问它。

# c++ - 具有私有成员的结构的构造函数

> ID：13551572
> 
> 赞同：1
> 
> 时间：2012-11-25T13:44:15.077
> 
> 标签：c++, struct, c++11, private-members

考虑以下代码：

```
class A
{
private:
    struct B { private: int i; friend class A; };

public:
    static void foo1()
    {
        B b;
        b.i = 0;
    }

    static void foo2()
    {
        B b = {0};
    }
}; 
```

为什么**foo1**有效但**foo2**无效？struct initializer 构造函数对 A 类不可见吗？无论如何可以在 C++11 中完成这项工作吗？

（注意，删除 private 会使 foo2 工作。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T13:54:59.250

> **为什么`foo1`有效但无效`foo2`？struct initializer 构造函数对 class 不可见`A`吗？**

```
B b = {0}; 
```

不起作用，因为`B`不是**Aggregate**。而且它不是聚合，因为它具有非静态私有数据成员。如果您删除私有说明符，`B`则成为聚合，因此可以以这种方式初始化。

* * *

**C++03 标准 8.5.1 聚合**
**第 7 段：**

> 如果列表中的初始化器少于聚合中的成员，则每个未显式初始化的成员都应进行值初始化（8.5）。[例子：
> 
> ```
>  struct S { int a; char* b; int c; };
>  S ss = { 1, "asdf" }; 
> ```
> 
> `ss.a`使用、 和形式的表达式的值进行初始化`1`，即. ]`ss.b``"asdf"``ss.c``int()``0`

**C++03 标准 8.5.1 §1**：

> 聚合是一个数组或一个类（第 9 条），没有用户声明的构造函数（12.1），**没有私有或受保护的非静态数据成员**（第 11 条），没有基类（第 10 条），也没有虚函数（10.3） ）。

# label - Libreoffice Calc：自定义 x 轴标签

> ID：13551581
> 
> 赞同：7
> 
> 时间：2012-11-25T13:45:04.017
> 
> 标签：label, diagram, libreoffice, calc

我正在尝试在 Libreoffice calc 中创建一个图表，其中 x 轴标签应为间隔，y 轴标签应以百分比显示。

我的表如下所示：

```
0-40        100%
40-70       96%
70-100      92%
100-130     84%
>130        63% 
```

不幸的是，y 轴标签显示正确，但 x 轴标签看起来像这样，而不是用给定的间隔标记它：

```
0   1   2   3   4   5   6   7 
```

该图以 x=1 开始并以 x = 6 结束。

我没有找到一种方法来按照指定的方式将 calc 标记为 x 轴，也没有在网上找到任何帮助。大概有人知道吧？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T03:51:27.663

编辑图表的**数据系列**，让*类别*指向表中包含标签的字段。

1.  当您的图表处于编辑模式时（如果没有，只需双击它），右键单击并选择*数据范围*...。
2.  选择*数据系列*选项卡。
3.  对于每个**数据系列**，确保它们指向包含标签的相同字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T04:07:05.730

好的，对我有用的是：

当你去插入一个`object -> graph`，

选择`XY Scatter`，而不是折线图。

`XY Scatter`将自动将您选择的第一列作为您的 x 轴。

使用`XY Scatter`时，有一个名为 的数据范围输入选项`"x axis"`。

折线图不会，而且似乎不可能创建一个名为 的数据范围`"x axis"`。

# android - 实现自 api 17 以来已弃用的滑动抽屉的替代方法

> ID：13551582
> 
> 赞同：12
> 
> 时间：2012-11-25T13:45:04.610
> 
> 标签：android, android-layout, android-intent

在我的应用程序中，我有一个带有图像按钮的滑动抽屉，单击它会显示图像描述和信息。所以基本上我只为此使用了一个 XML 文件和一个 Java 文件。（但我注意到添加更多图像按钮和法师来显示需要一段时间才能加载）。现在，由于 API 17 不推荐使用滑动抽屉，这让我有点担心该应用程序的未来下载。现在我的问题是，是否有另一种方法可以在不使用滑动抽屉或微调器的情况下实现这一目标。我真的不想为每个图像创建一个 xml 和 java 文件（我最终会得到 100 多个 xml 和 java） 这是我目前拥有的代码。

XML:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent">

<ScrollView 
   android:layout_width="wrap_content"
   android:layout_height="wrap_content">
   <RelativeLayout 
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"> 

<ImageView 
    android:id="@+id/iM1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scaleType="fitStart"
    android:adjustViewBounds="true"/>

</RelativeLayout>
</ScrollView>

<SlidingDrawer
    android:id="@+id/sD1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:content="@+id/content"
    android:handle="@+id/handle">

    <Button
        android:id="@+id/handle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/icon_1" />

    <RelativeLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:background="@drawable/icon_background1">

        <ScrollView
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <Button
                    android:id="@+id/asample"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/imageicon1"/>
                   ..... 
```

和Java：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE); 
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); 
    setContentView(R.layout.campsites);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    final SlidingDrawer slider = (SlidingDrawer) findViewById(R.id.sD1);
    final ImageView imageView = (ImageView) findViewById(R.id.iM1);
    slider.animateOpen();

    Button next = (Button) findViewById(R.id.asample);
    Button next1 = (Button) findViewById(R.id.bsample);
    ..........

    next.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            imageView.setImageDrawable(getResources().getDrawable(R.drawable.asample));
            slider.animateClose();
        } 
    });
    next1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            imageView.setImageDrawable(getResources().getDrawable(R.drawable.bsample));
            slider.animateClose();
        } 
    });
    ............ 
```

任何人都可以请帮助或对做什么有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T21:01:19.917

这是`SlidingDrawer`从左到右，对吗？如果是这样，您可以查看[DrawerLayout](http://developer.android.com/training/implementing-navigation/nav-drawer.html)。

这是 Android 支持库的一部分，您应该能够相当简单地用它替换您的 XML，并且向后兼容 API4

从那个页面，有一个例子。

```
<android.support.v4.widget.DrawerLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/drawer_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <!-- The main content view -->
    <FrameLayout
        android:id="@+id/content_frame"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
    <!-- The navigation drawer -->
    <ListView android:id="@+id/left_drawer"
        android:layout_width="240dp"
        android:layout_height="match_parent"
        android:layout_gravity="start"
        android:choiceMode="singleChoice"
        android:divider="@android:color/transparent"
        android:dividerHeight="0dp"
        android:background="#111"/>
</android.support.v4.widget.DrawerLayout> 
```

该页面的一些注释

> 此布局展示了一些重要的布局特征：
> 
> *   主内容视图（上面的 FrameLayout）必须是 DrawerLayout 中的第一个子视图，因为 XML 顺序意味着 z-ordering 并且抽屉必须位于内容之上。主内容视图设置为匹配父视图的宽度和高度，因为它代表了隐藏导航抽屉时的整个 UI。
> *   抽屉视图（ListView）必须使用 android:layout_gravity 属性指定其水平重力。要支持从右到左 (RTL) 语言，请使用“start”而不是“left”指定值（因此当布局为 RTL 时，抽屉会出现在右侧）。
> *   抽屉视图以 dp 为单位指定其宽度，高度与父视图匹配。抽屉宽度不应超过 320dp，以便用户始终可以看到主要内容的一部分。

主要区别在于它`DrawerLayout`是顶级的，并且您将 XML 放入其中。所以像这样的东西（完全未经测试）：

```
<android.support.v4.widget.DrawerLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/drawer_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <!-- your content surrounded by a layout to signify that it's actually content -->
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <ScrollView 
           android:layout_width="wrap_content"
           android:layout_height="wrap_content">
           <RelativeLayout 
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"> 

                <ImageView 
                    android:id="@+id/iM1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:scaleType="fitStart"
                    android:adjustViewBounds="true"/>

            </RelativeLayout>
        </ScrollView>
    </RelativeLayout>
    <!-- your sliding menu in its own layout -->
    <LinearLayout 
        android:layout_gravity="start"
        android:layout_width="240dp"
        android:layout_height="wrap_content"> 
        <Button
            android:id="@+id/handle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/icon_1" />

        <RelativeLayout
            android:id="@+id/content"
            android:layout_width="match_parent"
            android:layout_height="match_parent" 
            android:background="@drawable/icon_background1">

            <ScrollView
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <RelativeLayout
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent" >

                    <Button
                        android:id="@+id/asample"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:background="@drawable/imageicon1"/>
                       .....
    </LinearLayout>
</android.support.v4.widget.DrawerLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T09:37:48.740

来自应用程序 Umano 的人的 SlidingUpPanel 似乎是目前最好的方法。您可以在以下位置找到它：[https ://github.com/umano/AndroidSlidingUpPanel](https://github.com/umano/AndroidSlidingUpPanel)

我在另一个 SOF 帖子中找到了有关它的信息：[vertical DrawerLayout 或 SlidingPaneLayout](https://stackoverflow.com/questions/16790129/vertical-drawerlayout-or-slidingpanelayout) :D

编辑：这个看起来也很有前途：[https](https://github.com/6wunderkinder/android-sliding-layer-lib) : //github.com/6wunderkinder/android-sliding-layer-lib演示应用程序，你会看到它也可以从下到上和从上到下）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T06:09:07.623

我宁愿建议一个简单的滑动菜单，我自己创建的。

**我使用的概念**

滑块按钮和内容面板

最初滑块按钮在左侧（在我的示例中），当您单击它时，它会移动并且内容窗格可见

**我是怎么做到的**

我玩的是左边距，所以当你按下滑块按钮时，内容窗格（最初隐藏）变得与 screen_width/3 一样宽，当你再次按下它时它会隐藏..

这是我的代码。

```
public class MainActivity extends Activity  {
    boolean toggle_open=false;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void open(View v){
        switch (v.getId()) {
        case R.id.imageButton1:
            if(!toggle_open){
                RelativeLayout header=(RelativeLayout)findViewById(R.id.header);
                Display size=getWindow().getWindowManager().getDefaultDisplay();
                int widthby2=size.getWidth()/3;
                RelativeLayout.LayoutParams lp=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
                lp.setMargins(size.getWidth()/2, 0, 0, 0);
                header.setLayoutParams(lp);

                RelativeLayout slider=(RelativeLayout)findViewById(R.id.panel);
                slider.setLayoutParams(new RelativeLayout.LayoutParams((size.getWidth()/2),size.getHeight()));
                slider.setVisibility(View.VISIBLE);

                toggle_open=true;
            }
            else{
                RelativeLayout header=(RelativeLayout)findViewById(R.id.header);
                RelativeLayout.LayoutParams lp=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
                lp.setMargins(0, 0, 0, 0);
                header.setLayoutParams(lp);

                RelativeLayout slider=(RelativeLayout)findViewById(R.id.panel);
                slider.setVisibility(View.GONE);
                toggle_open=false;

            }
            break;

        default:
            break;
        }
    }

} 
```

布局 XML 代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <RelativeLayout
        android:id="@+id/header"
        android:background="@android:color/black"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:padding="20dp" >

        <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:background="@android:color/black"
            android:onClick="open"
            android:src="@android:drawable/ic_dialog_dialer" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/imageButton1"
            android:layout_toRightOf="@+id/imageButton1"
            android:text="Admin Panel"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@android:color/white" />

    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/panel"
        android:visibility="gone"
        android:layout_toLeftOf="@+id/header"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:background="@android:color/darker_gray"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

        <fragment class="com.example.avanse.FragmentLayout$TitlesFragment"
            android:id="@+id/titles"
            android:layout_width="match_parent" android:layout_height="match_parent"/>

    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T02:47:03.090

我认为[这](http://w2davids.wordpress.com/android-slidingdrawer-top-down-style/ "Android 杂项小部件")是一个很好的替代
AFAIK 它不使用`SlidingDrawer`，您可以修改抽屉的方向

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-30T00:12:37.710

普通的 android 你可以使用 DrawerLayout。但我推荐[SlidingMenu lib](https://github.com/jfeinstein10/SlidingMenu) ，它对用户和程序员有更好的可用性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-04T21:31:10.233

大多数答案都很老了。如果您正在使用 API 30/31，则应该改用工作表。如[Android 材料设计文档中所述](https://material.io/components/sheets-bottom/android)

**布局**：

```
<androidx.coordinatorlayout.widget.CoordinatorLayout
  ...>

  <FrameLayout
    ...
    android:id="@+id/standard_bottom_sheet"
    style="?attr/bottomSheetStyle"    
    app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior">

<!-- Contents -->
   <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@android:color/black"
        android:onClick="open"
        android:src="@android:drawable/ic_dialog_dialer" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageButton1"
        android:layout_toRightOf="@+id/imageButton1"
        android:text="Admin Panel"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@android:color/white" />
<!-- Contents End -->

  </FrameLayout>

</androidx.coordinatorlayout.widget.CoordinatorLayout> 
```

需要注意的两点是：

*   注意**app:layout_behavior**和**FrameLayout**的**样式**
***   为了使工作表工作，它需要包含在**CoordinatorLayout****

 ****样本片段：**

```
class ModalBottomSheet : BottomSheetDialogFragment() {

   override fun onCreateView(
    inflater: LayoutInflater,
    container: ViewGroup?,
    savedInstanceState: Bundle?
): View? = inflater.inflate(R.layout.modal_bottom_sheet_content, container, false)

   companion object {
       const val TAG = "ModalBottomSheet"
   }
} 
```

**活动代码：** 您可以使用此以编程方式显示工作表...

```
val modalBottomSheet = ModalBottomSheet()
modalBottomSheet.show(supportFragmentManager, ModalBottomSheet.TAG) 
```**

# javascript - 在未知数量的 div 容器之间切换（隐藏/显示）

> ID：13551584
> 
> 赞同：2
> 
> 时间：2012-11-25T13:45:09.743
> 
> 标签：javascript, jquery

一个示例用例是一个分为几个步骤的注册表单。即有三个步骤：

*   容器 1 可见
*   容器 2 被隐藏
*   容器 3 被隐藏

用户点击**下一步**按钮：

*   容器 1 被隐藏
*   容器 2 可见
*   容器 3 被隐藏

用户点击**下一步**按钮：

*   容器 1 被隐藏
*   容器 2 被隐藏
*   容器 3 可见

用户单击**上一个**按钮：

*   容器 1 被隐藏
*   容器 2 可见
*   容器 3 被隐藏

等等。这是我尝试过的：

```
$('#btn-next-step').live('click', function(){
    $('.form-step').each(function(){
        if($(this).is(':visible')){
            $(this).hide();
        }else{
            $(this).show();
            return false;
        }
    });
}); 
```

HTML：

```
<form>
    <div class="container-fluid form-step form-step1">
        step1
    </div>
    <div class="container-fluid form-step form-step2">
        step2
    </div>
    <div class="container-fluid form-step form-step3">
        step3   
    </div>
</form> 
```

这是我的小提琴：http: [//jsfiddle.net/feFcu/](http://jsfiddle.net/feFcu/)

你能帮我解释一下逻辑吗？任何想法如何实现这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T13:53:36.150

首先，将可见的存储在变量中。然后将它们全部隐藏，并使用 [`.next('.form-step')`](http://api.jquery.com/next/)找到之前可见的后面的那个，然后`.show()`它。

```
$('#step').on('click', function(){
    // Find the visible one and store in a variable
    var showing = $('.form-step:visible');
    // Hide all of them (including the currently visible one)
    $('.form-step').hide();
    // Find the next one with .next() and make it visible
    showing.next('.form-step').show();            
 });​ 
```

### [这是更新的 jsfiddle 示例...](http://jsfiddle.net/feFcu/3/)

请注意，我已替换`.live()`为`.on()`, 因为`.live()` [现在已弃用](http://api.jquery.com/live/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:07:26.053

使用这一行将为您提供一系列步骤：

```
var steps = document.getElementsByClassName('.form-step'); 
```

现在您可以通过使用单独的变量跟踪哪个步骤处于活动状态来遍历这些步骤。

# asp.net-mvc-3 - MVC3 下拉菜单控制器

> ID：13551586
> 
> 赞同：0
> 
> 时间：2012-11-25T13:45:17.987
> 
> 标签：asp.net-mvc-3, drop-down-menu, controller

[我有一个类似于这个](https://stackoverflow.com/a/9222292/807223)下拉菜单的模型。我正在尝试为它创建一个控制器。

```
public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";
        return View(new MyData());
    } 
```

我像这样创建我的视图

```
@Html.DropDownListFor(m => m.State,
new SelectList(Model.StateList, "Value", "Text")) 
```

但我收到以下错误：

```
Compiler Error Message: CS1061: 'System.Collections.Generic.List<Projects.Models.MyData>' does not contain a definition for 'StateList' and no extension method 'StateList' accepting a first argument of type 'System.Collections.Generic.List<Projects.Models.MyData>' could be found (are you missing a using directive or an assembly reference?) 
```

你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:57:09.627

问题`@model List<ProjectName.Models.MyData>` 只是将其更改为

```
@model Projects.Models.MyData 
```

干杯！

# google-maps - 获取地址_components

> ID：13551593
> 
> 赞同：11
> 
> 时间：2012-11-25T13:45:48.437
> 
> 标签：google-maps, google-api, google-places-api

我正在使用带有地理编码的谷歌地方 API。我对地址组件类型有疑问。

我想获取有关用户以这种格式输入自动完成的地址的信息：
街道号码/街道/城市/省/国家。

如果用户自动完成“Street 12, SomeCity, SomeProvince, SomeCountry”，我想在警报中返回所有这些信息。但是当用户只输入“someProvince, SomeCountry”时，我只想输入省和国家地址类型。

这是我的代码：

```
google.maps.event.addListener(autocomplete, 'place_changed', function () {
    var place = autocomplete.getPlace();
    alert('0: ' + place.address_components[0].long_name);
    alert('1: ' + place.address_components[1].long_name);
    alert('2: ' + place.address_components[2].long_name);
    alert('3: ' + place.address_components[3].long_name);
    alert('4: ' + place.address_components[4].long_name);
    alert('5: ' + place.address_components[5].long_name);
    alert('6: ' + place.address_components[6].long_name);
    alert('7: ' + place.address_components[7].long_name);
)}; 
```

问题是当用户自动完成完整地址时，它会正确显示所有这些警报。但是，当仅自动完成部分信息（仅国家/地区）时，它将显示 7 次键入的国家/地区。

[http://gmaps-samples-v3.googlecode.com/svn/trunk/places/autocomplete-addressform.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/places/autocomplete-addressform.html)

我想要，当没有给出街道和城市时，它会显示警报（“街道为空”等）。怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-05T14:53:08.993

为一个项目制作了这个功能。它解析

*   街道
*   数字
*   国家
*   压缩
*   城市

来自谷歌地理响应

```
function parseGoogleResponse(components) {
    _.each(components, function(component) {
      _.each(component.types, function(type) {
        if (type === 'route') {
          $("input[name=street]").val(component.long_name)
        }
        if (type === 'street_number') {
          $("input[name=nr]").val(component.long_name)
        }
        if (type === 'locality') {
          $("input[name=city]").val(component.long_name)
        }
        if (type === 'country') {
          $("input[name=country]").val(component.long_name)
        }
        if (type === 'postal_code') {
          $("input[name=zip]").val(component.long_name)
        }
      })
    })
  } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-05-19T22:07:36.333

[地址类型和地址组件类型](https://developers.google.com/maps/documentation/geocoding/intro#Types)

使用这些类型并将它们映射到您的地址字段。请记住，城市、县、州等可能具有不同的含义，具体取决于它们的上下文。例如，`North Hollywood`提出类型`neighborhood`，因为它位于洛杉矶（'locality'）。

```
function placeToAddress(place){
        var address = {};
        place.address_components.forEach(function(c) {
            switch(c.types[0]){
                case 'street_number':
                    address.StreetNumber = c;
                    break;
                case 'route':
                    address.StreetName = c;
                    break;
                case 'neighborhood': case 'locality':    // North Hollywood or Los Angeles?
                    address.City = c;
                    break;
                case 'administrative_area_level_1':     //  Note some countries don't have states
                    address.State = c;
                    break;
                case 'postal_code':
                    address.Zip = c;
                    break;
                case 'country':
                    address.Country = c;
                    break;
                /*
                *   . . . 
                */
            }
        });

        return address;
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-07T05:18:17.123

根据[演示](http://gmaps-samples-v3.googlecode.com/svn/trunk/places/autocomplete-addressform.html)，您需要检查每个返回的地址组件以查看是否已返回街道/城市：

```
google.maps.event.addListener(autocomplete, 'place_changed', function() {
    var place = autocomplete.getPlace();
    var components = place.address_components;
    var street = null;
    for (var i = 0, component; component = components[i]; i++) {
        console.log(component);
        if (component.types[0] == 'route') {
            street = component['long_name'];
        }
    }
    alert('Street: ' + street);
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-20T12:03:48.363

为AngularJS制作了这个功能：

```
function getAddressComponentByPlace(place) {
    var components;

    components = {};

    angular.forEach(place.address_components, function(address_component) {
        angular.forEach(address_component.types, function(type) {
            components[type] = address_component.long_name;
        });
    });

    return components;
} 
```

结果如下所示：

```
administrative_area_level_1: "Berlin"
country: "Deutschland"
locality: "Berlin"
political: "Deutschland"
postal_code: "10719"
route: "Kurfürstendamm"
street_number: "1"
sublocality: "Bezirk Charlottenburg-Wilmersdorf"
sublocality_level_1: "Bezirk Charlottenburg-Wilmersdorf" 
```

## ES6 版本

```
 const parseGoogleAddressComponents = (addressComponents) => {
    let components = {};
    addressComponents.forEach((addressComponent) => {
      addressComponent.types.forEach((type) => {
        components[type] = addressComponent.long_name;
      });
    });

    return components;
  }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-05T13:35:33.340

这是一个简单的建议：

```
function parseGoogleResponse (components) {
  var newComponents = {}, type;
  $.each(components, function(i, component) {
    type = component.types[0];
    newComponents[type] = {
      long_name: component.long_name,
      short_name: component.short_name
    }
  });
  return newComponents;
} 
```

用法将是：

`var components = parseGoogleResponse( places[0].address_components );`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-15T23:25:24.593

`google.maps.GeocoderAddressComponent`我用纯Javascript编写了这个函数来从对象中获取相应的类型

```
//gets "street_number", "route", "locality", "country", "postal_code"
function getAddressComponents(components, type) {    

    for (var key in components) {
        if (components.hasOwnProperty(key)) {            

            if (type == components[key].types[0]) {
                return components[key].long_name;
            }  
        }        
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-10T21:57:24.790

简单的 ES6 版本：

`const addComponents = gPlaceObj?.place?.address_components`

然后使用 a 选择您想要的每个组件`filter`：

`const country = addComponents.filter(x => x?.types?.includes('country'))[0];`

这会给你这个`console.log(country)`：

`{"long_name": "United States", "short_name": "US", "types": ["country", "political"]}`

# linux - 如何在使用相同共享库的进程之间共享共享库（.so）中的全局变量？

> ID：13551597
> 
> 赞同：1
> 
> 时间：2012-11-25T13:46:12.033
> 
> 标签：linux, shared-libraries

我试图通过在库顶部定义静态全局变量来计算使用共享库的不同进程的数量。创建了一个共享库 os.so 并从 main.c 调用它。代码如下。

```
///  cat os.c
#include <stdio.h>

static  int count = 0;

void incre() {
++count ;
printf("Process using os.so is %d\n",count);
} 
```

gcc -c -fpic os.c gcc -shared os.o -o os.so

/// 猫 main.c

```
#include <stdio.h>
#include <dlfcn.h>

void main() {

void (*ptr2) (void); 
void *handle;

 handle = dlopen("./os.so", RTLD_NOW);
if (handle == NULL) {
 printf("failed to open library\n");
 exit(2);
}

 ptr2 = dlsym(handle,"incre");

ptr2();
getchar();
dlclose(handle);
} 
```

gcc main.c -ldl 产生 a.out

现在我在单独的 shell 中运行 2 个不同的 a.out 实例。令人惊讶的是，我从两个进程中得到的输出与“Process using os.so is 1”相同。由于 count 是一个全局变量，我希望它在共享库地址空间中增加。

我还从输出 /proc/pid/maps 观察到它们引用 os.so 的相同文件描述符的两个进程。

```
# cat /proc/1943/maps 
00920000-00921000 r-xp 00000000 fd:01 298166     /home/user1/personal/programs/logic /libraries/os.so 

# cat /proc/1944/maps 
00152000-00153000 r-xp 00000000 fd:01 298166     /home/user1/personal/programs/logic   /libraries/os.so 
```

我的问题是为什么不为所有使用 os.so 的进程共享全局数据？

如果我在 os.so 中声明静态变量`incre()`，它仍然不共享吗？windows dll也一样吗？

# android - Android：我们可以从 USB 读取文件吗？

> ID：13551598
> 
> 赞同：0
> 
> 时间：2012-11-25T13:46:20.087
> 
> 标签：android, android-layout, android-emulator, android-ndk

我想在我的 android 应用程序中读取存储在 USB 闪存驱动器（挂起驱动器）中的 pdf（或文本）文件。

是否可以使用 Android API？

任何代码片段或链接都会对我有所帮助。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:10:55.067

您正在考虑仅适用于 Android 3.1 及更高版本的[USB 主机模式。](http://developer.android.com/guide/topics/connectivity/usb/host.html)尽管拥有支持 USB 主机模式的设备是另一回事。请参阅这个 SO 问题，尤其是最后一个答案：[哪些设备支持和不支持 USB 主机模式？](https://stackoverflow.com/questions/9765207/which-devices-do-and-do-not-support-usb-host-mode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:03:20.160

嗨，请看那个[android-serialport-api](http://code.google.com/p/android-serialport-api/)

![在此处输入图像描述](../Images/388b0fd593a768f68aed474af6f36cce.png)

# android - 在我的设备上运行 Android 谷歌日历

> ID：13551602
> 
> 赞同：0
> 
> 时间：2012-11-25T13:46:55.673
> 
> 标签：android, github, google-calendar-api

如何从 GitHub 下载此[源项目](https://github.com/android/platform_packages_apps_calendar)并从我的 Eclipse IDE 和我的设备上运行它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:54:03.833

第 1 步：查看 Android 的完整源代码。

第 2 步：为 Android 构建完整的源代码，包括日历应用程序。

第 3 步：将第 2 步的结果倒入设备的 ROM 模块中。

步骤#4：用该 ROM 模块替换您设备的固件。

IOW，通常你不能只是从 AOSP 中取出任意应用程序并独立构建它，因为它将依赖于 Android 源代码的其余部分。

# opacity - 如何修复父级中的透明 div 子级？

> ID：13551603
> 
> 赞同：0
> 
> 时间：2012-11-25T13:47:02.460
> 
> 标签：opacity, css

我有 CSS 声明如下：

```
#loadingBox-holder
{
    height:100%;
    width:100%;
    position:fixed;
    left:0;
    top:0;
    filter: alpha(opacity=30);
    filter: progid:DXImageTransform.Microsoft.Alpha(opacity=30);
    opacity:0.7;
    -moz-opacity: 0.7; 
    z-index: 1000;
    background-color:#000;
}

#loadingBox
{
    position: fixed;
    left: 40%;
    top: 50%;
    z-index: 1000;
    height: 36px;
    width: 138px;
    border:1px solid #ccc;
    background:#fff !important;
    padding:5px 5px 10px 10px;
    opacity:100;

    /*-moz-opacity: 100 !important; */

} 
```

和 HTML：

```
<div id="loadingBox-holder" style="">
                <div id="loadingBox">
                    <p>Please wait...</p>
                    <img src="../Images/loading.gif" alt="" />
                </div>
            </div> 
```

上面的代码是一个加载指示器。我的问题是 loadingBox-hold 是灰色透明的，但我希望 loadingBox 是正常的而不是透明的。我在下面添加CSS：

```
filter: alpha(opacity=100);
filter: progid:DXImageTransform.Microsoft.Alpha(opacity=100);
opacity:1;
-moz-opacity: 1; 
```

但是子 div 仍然是透明的。

我的错误在哪里以及如何解决？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:56:58.407

如果您正在使用，`position fixed`那么将 loadingBox 移出支架不会对最终输出产生任何影响，并且可以解决您的不透明度问题。

```
<div id="loadingBox-holder" style="">
</div> 

<div id="loadingBox">
    <p>Please wait...</p>
</div>
​ 
```

[演示](http://jsfiddle.net/6kAC8/1/)

# android - 如何获取另一个应用程序图标的 ID？

> ID：13551604
> 
> 赞同：0
> 
> 时间：2012-11-25T13:47:12.410
> 
> 标签：android

我需要创建其他应用程序的主页快捷方式。为此，我需要获取可绘制图标的 ID。

我可以得到实际的drawable，但我不知道如何在不知道drawable 名称的情况下获取它的ID。

有没有办法找到可绘制对象的名称或从可绘制对象获取 ID？

我想我说了太多次drawable。

```
//get icon drwable
public Drawable getIcon(String pack) {
        final PackageManager pm = context.getPackageManager();
        try {
            return pm.getApplicationIcon(pack);
        } catch (NameNotFoundException e) {
            e.printStackTrace();
            return null;
        }
    }

public void makeShortcut(String pack){
         Intent shortcutIntent;

            shortcutIntent = new Intent();
            shortcutIntent.setComponent(new ComponentName(pack, ".classname"));
            int iconId =geIconId(pack); // a default icon for now TODO

            Log.i("icon id", ""+iconId);
            shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

            final Intent putShortCutIntent = new Intent();
            putShortCutIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT,
                    shortcutIntent);

            // Sets the custom shortcut's title
            putShortCutIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME,  getAppName(pack));
            putShortCutIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,Intent.ShortcutIconResource.fromContext(
                    context,iconId));
            putShortCutIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
            context.sendBroadcast(putShortCutIntent);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:55:30.373

图标启动器 drawableId 是相同的。我认为，首先获取应用程序图标，然后通过设置组件启动该应用程序。

![在此处输入图像描述](../Images/aa1cb21580e2a95587cf68ff3e2534a0.png)

您可以使用以下方法获取应用程序的 Drawable 图标：

```
Drawable icon = getPackageManager().getApplicationIcon("com.example"); 
```

然后

意图意图 = new Intent(); intent.setComponent(new ComponentName("com.example", "com.example.MyExampleActivity")); 开始活动（意图）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T02:56:06.417

ShortcutIconResource.fromContext(pkgContext, iconId) 成功了！ [为第三方应用程序创建快捷方式，这可能吗？](https://stackoverflow.com/questions/17339231/create-shortcut-for-thrid-party-app-is-that-possible/17561676#17561676)

# c# - 在 64 位中使用 Marshal.PtrToStructure 获取结构时出错

> ID：13551607
> 
> 赞同：0
> 
> 时间：2012-11-25T13:47:28.220
> 
> 标签：c#, pinvoke

> 这只发生在 64 位，但代码工作 32 位操作系统

我有两行代码，我可以从指针获取第一个结构，但我的应用程序在第二行崩溃。

我尝试更改变量类型（uint 到 Int64）我找不到任何解决方案。

```
GetChangesBuffer getChangesBuffer = (GetChangesBuffer)Marshal.PtrToStructure(_getChangesBuffer, typeof(GetChangesBuffer));
ChangesBuffer buffer = (ChangesBuffer)Marshal.PtrToStructure(getChangesBuffer.Buffer, typeof(ChangesBuffer)); // App crashing in this point 
```

**事件日志中的第一个错误（应用程序错误）**

> 错误应用程序名称：ApplicationName.exe，版本：1.0.0.0，时间戳：0x50b214c2 错误模块名称：clr.dll，版本：4.0.30319.269，时间戳：0x4ee9d6e1 异常代码：0xc0000005 错误偏移量：0x00000000000d2ad3 错误进程 id：0xb3c 错误应用程序启动时间：0x01cdcb0bf90a0678 错误应用程序路径：C:\XXXXXXXXX.exe 错误模块路径：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll 报告 ID：3857cdd8-36ff-11e2-ad19-00e04d3a73da

**事件日志中的第二个错误（.Net 运行时）**

> 应用程序：ApplicationName.exe 框架版本：v4.0.30319 描述：由于 IP 000007FEFAD22AD3 (000007FEFAC50000) 处的 .NET 运行时出现内部错误，退出代码为 80131506，进程已终止。

**使用的结构**

```
[StructLayout(LayoutKind.Sequential)]
    public struct GetChangesBuffer
    {
        public IntPtr Buffer;
        public IntPtr UserBuffer;
    }

[StructLayout(LayoutKind.Sequential)]
public struct ChangesBuffer
{
    public uint counter;

    public const int MAXCHANGES_BUF = 20000;

    [MarshalAs(UnmanagedType.ByValArray, SizeConst = MAXCHANGES_BUF)]
    public ChangesRecord[] pointrect;
}

[StructLayout(LayoutKind.Sequential)]
public struct ChangesRecord
{
    public uint type;
    public RECT rect;
    public RECT origrect;
    public Point point;
    public uint color;
    public uint refcolor;
}

[StructLayout(LayoutKind.Sequential)]
public struct RECT
{
    public int left;
    public int top;
    public int right;
    public int bottom;
} 
```

# c++ - 在 macOS 上编译 boost_asio/example/ssl/server.cpp 可以在 linux 上运行

> ID：13551614
> 
> 赞同：1
> 
> 时间：2012-11-25T13:48:30.523
> 
> 标签：c++, macos, boost, ssl

server.cpp - [http://www.boost.org/doc/libs/1_46_1/doc/html/boost_asio/example/ssl/server.cpp](http://www.boost.org/doc/libs/1_46_1/doc/html/boost_asio/example/ssl/server.cpp)

我正在尝试在我的 Mac 上构建它。使用以下。（在我的 ubuntu 系统上构建良好）

```
g++ -I /usr/local/boost/  sslserver.cpp -o sslserver -lboost_system -lssl -lpthread 
```

我的库位于 /usr/local/lib 中，所以我尝试在包含后添加 -L /usr/local/lib。但是，我在使用 -lboost_system -lpthread 之前构建了其他项目，没有任何问题或指定库。

错误很大> [https://dl.dropbox.com/u/15586644/error.txt](https://dl.dropbox.com/u/15586644/error.txt)

它主要是许多不推荐使用的方法警告 - 我怀疑任何东西都已被弃用。后跟架构 x86_64 的未定义符号。

我应该如何在 MacOSX 上构建 server.cpp？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:12:28.780

请参阅 -[为什么 Apple 在 MacOS 10.7 (Lion) 中弃用 OpenSSL？](https://stackoverflow.com/questions/7406946/why-is-apple-deprecating-openssl-in-macos-10-7-lion)

Apple 正在从 OpenSSL 迁移到 Common Crypto，因此警告已贬值

# php - 添加另一个过滤器时保存限制更改

> ID：13551616
> 
> 赞同：0
> 
> 时间：2012-11-25T13:48:31.703
> 
> 标签：php, jquery, joomla, get

我在这里迷路了，需要建议。我的情况：使用以下代码更改模块中的默认项目限制：

```
<form method="get" style="text-align:center;">
            <input type="hidden" name="lastrecepes" value="">
                <button type="submit" value="24" id="limit" name="limit" onclick="change();" style="width:200px;margin:20px 0 20px 0;"/>change limit</button>
                <script>
                function change(){
                var elem = document.getElementById("limit");
                if (elem.value=="24") elem.value = "36";}
                </script>

            </form> 
```

助手.php：

```
public static function getLists(&$params)
    {
        $total_items = ($_GET['limit']) ? $_GET['limit'] : $params->get('count');
        if ($_GET['limit']) $params->set('count',$_GET['limit']);
            $content_source = $params->get('content_source','joomla');

    } 
```

我的链接更改为： http: *** /project/?lastrecepes=&limit=36 并且它可以工作，但是当我尝试添加另一个过滤器时，例如：

```
<button type="submit" value="0" id="skip_items" name="skip_items" onclick="change1();" style="width:200px;margin:20px 0 20px 0;"/>more</button><script>
                function change1(){
                var elem = document.getElementById("skip_items");
                if (elem.value=="0") elem.value = "15";}
                </script> 
```

它将限制更改为旧值，并且 url 看起来像： http: *** /project/?lastrecepes=&skip_items=15

如果我手动将它们添加在一起，它们可以正常工作：http：*** /project/?lastrecepes=&limit=36&skip_items=15

谁能帮帮我，我想在另一个过滤器进来时保存第一个过滤结果。对不起我的英语不好希望你能理解我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:47:12.483

当然，当您刷新页面时，限制将从 36 变回 24，因为您没有将更改保存在任何地方。如果您转到`http:*/project/?lastrecepes=&skip_items=15`，则限制为 24，因为这是默认值。

您需要做的是在更改限制时将限制保存到 cookie 或会话（取决于您的需要），然后在每次页面加载时检查 cookie/会话以获取当前限制值。

# php - 用 Javascript 对 url 进行编码

> ID：13551621
> 
> 赞同：0
> 
> 时间：2012-11-25T13:49:11.383
> 
> 标签：php, javascript, url, encode, encodeuricomponent

朋友们，我目前正在使用下面`function`的`encode`数据并通过`GET`方法发送它们......我正在使用`ajax`发送和`php`接收它们......

```
function urlencode(a){
     a=encodeURIComponent(a);
     a=a.replace(/\\/g,'%5C');
     a=a.replace(/!/g,'%21');
     a=a.replace(/'/g,'%27');
     a=a.replace(/\(/g,'%28');
     a=a.replace(/\)/g,'%29');
     a=a.replace(/\*/g,'%2A');
     a=a.replace(/~/g,'%7E');
     a=a.replace(/%20/g,'+');
     a=a.replace(/%26amp%3B/gi,'%26');
     a=a.replace(/%26lt%3B/gi,'%3C');
     a=a.replace(/%26gt%3B/gi,'%3E');
     a=a.replace(/%26nbsp%3B/gi,'%C2%A0');
     return a;
} 
```

在传递字符串通过后`encodeURIComponent()`，我使用了额外的`replace()`方法，以便函数将我的链接的字符串编码为***类似于***`php`...

现在我的问题是有没有人知道任何更短或更简单的替代方法来做同样的事情......

我提出这个问题只是为了***学习目的***......***请不要使用jQuery......***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:22:59.690

使用[`escape()`代替`encodeURIComponent`](http://www.javascripter.net/faq/escape.htm)将至少消除您正在使用的一些替换（）。例如：

```
function urlencode(a){
 return escape(a);
   .replace(/\*/g,'%2A');
   .replace(/%20/g,'+');
   .replace(/%26amp%3B/gi,'%26');
   .replace(/%26lt%3B/gi,'%3C');
   .replace(/%26gt%3B/gi,'%3E');
   .replace(/%26nbsp%3B/gi,'%C2%A0');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:33:39.943

如果你从 JS 向 PHP 发送 GET 请求，你应该使用

*   [encodeURIComponent()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)，对于每个参数，在 javascript 端
*   **PHP 端**什么都没有（因为**[$_GET](http://www.php.net/manual/en/reserved.variables.get.php)已经是`urldecode()`d；请阅读其链接文档中的注释部分）**

 **如果你必须在 PHP 中对东西进行 url-encode，请使用`urlencode()`，它保证与相应的`urldecode()`.

如果您想“自己”学习如何做，请阅读相应库中的源代码，以确保您不会错过任何场景……重新实现库函数通常是个坏主意。**

# opengl-es-2.0 - GLES 2.0 是否支持矩形纹理

> ID：13551622
> 
> 赞同：0
> 
> 时间：2012-11-25T13:49:39.987
> 
> 标签：opengl-es-2.0

我从一个网站知道矩形纹理可用于屏幕大小的图像。但是，对于函数`glGetTexParameterfv`，只有`GL_TEXTURE_2D`和`GL_TEXTURE_CUBE_MAP`被接受。这是否意味着`GL_TEXTURE_RECTANGLE`OpenGL ES 2.0 不支持矩形纹理？我想知道这是否意味着只能在着色器中使用归一化纹理坐标？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:05:08.750

*   [关于 GL_TEXTURE_RECTANGLE](https://stackoverflow.com/questions/6883160/opengl-es-gl-texture-rectangle)

*   纹理坐标只是顶点之间的插值。但是对于 2D 纹理，它的值在 0.0 到 1.0 范围内（如果你不平铺纹理）。对于纹理立方体，它的向量（它可以是非标准化的）

# qt - 在 Windows 上部署 QML 桌面应用程序时出现空窗口

> ID：13551623
> 
> 赞同：4
> 
> 时间：2012-11-25T13:49:47.553
> 
> 标签：qt, deployment, desktop, qml

我刚刚在 Windows 上完成了 QML 桌面应用程序（使用 QtCreator 和 c++）的编写。

根据[这些](https://stackoverflow.com/questions/6298584/installing-qt-quick-components-for-desktop-for-use-with-qt-creator)说明，我已经使用 MinGw 编译器在 C:\QtSDK\Desktop\Qt\4.7.4\mingw\imports\Qt\labs\components 文件夹中安装了 QT Quick Desktop Components。

我安装了两次——一次用于调试——使用命令：qmake && jom debug && jom install，一次用于发布——使用命令：qmake && jom release && jom install，所以我现在有两个 dll 文件：1.styleplugin。 dll，2.styleplugind.dll。我在需要时使用它们中的每一个。我已经将它导入到我的应用程序中：

> 导入 Qt.labs.components 0.1

现在我必须部署我的应用程序，并让它在所有机器上运行：安装了 Qt，或者没有安装。我尝试通过[以下](http://www.johanpaul.com/blog/2011/07/deploying-qt-and-qt-quick-applications-on-windows/)步骤进行操作：

复制了这些文件：application.exe、QtCore4.dll、QtGui4.dll、QtNetwork4.dll、styleplugin.dll 和 styleplugind.dll。

但是当我运行 .exe 文件时 - 我得到一个白色的空白屏幕。

（顺便说一句，当我从它的发布文件夹运行 .exe 文件时 - 我只能再次看到一个白色窗口，而当我对一个简单的 Widget GUI 应用程序执行相同操作时 - 它从那里运行良好）。

你知道这种情况的任何原因吗？

任何答案将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:59:23.803

可能是您忘记将 QML 文件部署到 exe 了吗？(qrc) 简单的测试方法是将带有 qml-files 的文件夹复制到 exe 文件附近的目的地

UPD：请阅读[Qt 资源系统](http://doc.qt.digia.com/qt/resources.html)文章

IE：

1.  首先需要在项目菜单中添加新的“资源文件”，
2.  然后把你**所有**的qml文件放到这个资源文件中
3.  在 QDeclarativeView 中更改“源”，如下所示：

    ```
    viewer->setSource(QUrl("qrc:/main.qml")); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:52:42.583

一种可能的解决方案是通过运行命令启用警告

```
qmlviewer.exe -warnings show qmlfilename.qml 
```

如果 qmlviewer 找不到任何依赖的导入库，它会显示在这里。

要确保 qmlviewer 可以访问导入库，请在命令行上使用 -I <directory> 或将 QML_IMPORT_PATH 环境变量设置为包含导入库的文件夹。

例如：

```
qmlviewer.exe -warnings show -I <directory> qmlfilename.qml 
```

或者

```
set QML_IMPORT_PATH=<directory> 
```

其中 <directory> 是模块导入搜索路径（不带 <>）

# git - github repo 中的 Git 子模块

> ID：13551625
> 
> 赞同：2
> 
> 时间：2012-11-25T13:49:59.777
> 
> 标签：git, github, git-submodules

在我的项目中，我使用第三方库。`git submodule init`我有 git 在我的项目中克隆了这个库，然后`git submodule update`在 lib 文件夹中完成了。我将我的主项目推送到了 github，但是这个第三方 lib 的内容没有发送，并且 lib 文件夹在我的 github 项目 repo 中看起来像一个绿色文件夹。

如果我在另一台机器上克隆我的主项目，我那里没有库的内容。所以，我应该在机器上再次 git 克隆库并再次运行 init 和更新命令，还是有什么方法可以推送的内容我的 github 存储库的第 3 方库？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T13:11:28.940

请注意，自 2013 年 4 月 30 日起，当您在 github.com 上查看带有子模块的存储库时，您会获得该子模块的有用链接和信息：

![子模块](../Images/6247246a69d4de556c6675b17e74ee17.png)

您现在可以看到子模块指向的确切引用。

存储库[内容 API](http://developer.github.com/v3/repos/contents/#get-contents)将反映该 SHA1。

```
curl https://api.github.com/repos/jquery/jquery/contents/test/qunit

{
  "name": "qunit",
  "path": "test/qunit",
  "type": "submodule",
  "submodule_git_url": "git://github.com/jquery/qunit.git",
  "sha": "6ca3721222109997540bd6d9ccd396902e0ad2f9",
  "size": 0,
  "url": "https://api.github.com/repos/jquery/jquery/contents/test/qunit?ref=master",
  "git_url": "https://api.github.com/repos/jquery/qunit/git/trees/6ca3721222109997540bd6d9ccd396902e0ad2f9",
  "html_url": "https://github.com/jquery/qunit/tree/6ca3721222109997540bd6d9ccd396902e0ad2f9",
  "_links": {
    "self": "https://api.github.com/repos/jquery/jquery/contents/test/qunit?ref=master",
    "git": "https://api.github.com/repos/jquery/qunit/git/trees/6ca3721222109997540bd6d9ccd396902e0ad2f9",
    "html": "https://github.com/jquery/qunit/tree/6ca3721222109997540bd6d9ccd396902e0ad2f9"
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T23:09:33.470

我遇到了同样的问题：我想尝试托管在 github 上的项目 repo 中的一些代码，所以我克隆了它。在我的同事告诉我魔法咒语之前，没有一个构建命令起作用：

> git子模块更新--init

它正确地克隆了 repo 中引用的子模块。从“git submodule help”或“man git-submodule”中，我也不清楚这些。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T14:02:39.447

是的，子模块本质上是一个自己的 git 存储库。父 git 项目只是引用一个特定的提交。有关如何维护它们的详细信息，请参阅 git submodule 的帮助。是的，您确实需要为每个子模块初始化和更新存储库，但是，您会发现有一些命令（在帮助中）可以为您完成很多工作。

# html - 如何摆脱外部表格边框

> ID：13551626
> 
> 赞同：0
> 
> 时间：2012-11-25T13:49:59.160
> 
> 标签：html, css

我需要去掉外边界，只有单元格边界，单元格之间应该有空间。我不明白为什么它会在桌子周围建立这个外边框，我只是在单独的文件中尝试了这段代码

```
table {
  border-collapse: separate;
  border-spacing: 4px;
}
table td, table th {
  border: 1px solid black;
} 
```

并正确显示。但在网站内容上，它构成了这个外部边界。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:56:09.500

只需在您的 CSS 中执行：

```
.tribe-events-calendar
  {
  border: 0px!important;
  } 
```

或者

```
#big
  {
  border: 0px!important;
  } 
```

或者，如果它已经存在类或 id，请修改这些值以按上述方式设置它们。当心这个类，因为据说它应该影响其他元素。

再次阅读您的问题，如果您将其设置在不同的样式表中，它可能会用另一张表中的 Npx 的值覆盖 0px 的值。将它们合并为一个，或者，如果你不能，把 !important; 在显示 0px 的 CSS 之后标记。

如果没有任何效果，请将其嵌入（不包含）文件的开头。最后也是最不重要的（阅读：不建议），使用内联 css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T13:55:43.257

我试图添加这个：“边框：无；” 到 HTML 中的 table 元素本身，它起作用了。
我认为你的问题是这样的：

```
table.tribe-events-calendar, .tribe-events-calendar td {
border: 1px solid #BBB;
} 
```

它会覆盖你的 CSS。
使用 chrome 的“检查元素”或 Firefox 的 firebug 来查看问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T14:08:08.250

你只需要改变**一个地方**就是，

**原始代码**

```
table.tribe-events-calendar, .tribe-events-calendar td {
    border: 1px solid #BBBBBB; 
```

**修改后**

```
table.tribe-events-calendar td {
        border: 1px solid #BBBBBB; 
```

您可以使用**Firefox FireBug**进行检查，并对**CSS**和**Jquery**进行实时编辑。

# clojure - Clojure 中的分页

> ID：13551629
> 
> 赞同：9
> 
> 时间：2012-11-25T13:50:29.083
> 
> 标签：clojure, pagination, will-paginate, noir, hiccup

对于黑色/打嗝，有什么相当于 will_paginate 的东西吗？

人们通常如何用黑色/打嗝进行分页？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:59:03.903

据我所知没有。但这里有一篇很棒的[博客文章](http://www.flyingmachinestudios.com/programming/dissecting-gratefulplace/)，其中包含如何完成的示例。

# java - Map 的键是可序列化的，但返回错误

> ID：13551631
> 
> 赞同：0
> 
> 时间：2012-11-25T13:50:47.857
> 
> 标签：java, map, serializable

**类与`Maps`**

```
public class Page {
    private Map<LocaleWrapper, String> titles;
    private Map<LocaleWrapper, String> texts;

    (...)
} 
```

**关键类**

```
public class LocaleWrapper implements Serializable {
    private Locale locale;

    //Constructor, getter, setter
} 
```

我的 IDE 抛出错误：

`Basic attributes can only be of the following types: (...), or any Serializable type.`

为什么我的 IDE 会抛出这个错误，我该如何修复我的映射？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:09:06.263

显示此错误 AFAIK 是因为该属性位于 JPA 实体内，而不仅仅是一个简单的类。

而且 Map 不可序列化。

你真的想将整个地图保存为一个序列化的字节数组，在一个 BLOB 列中吗？如果是这样，请选择可序列化的类型，例如 HashMap。如果没有，那么映射需要在实体和/或嵌入类型之间定义某种形式的关联，我首先会考虑您希望如何将信息存储在数据库中，并将数据库模式映射到实体。

# php - Firefox 和多个 iframe 未加载

> ID：13551632
> 
> 赞同：1
> 
> 时间：2012-11-25T13:50:49.710
> 
> 标签：php, jquery, firefox, iframe, centos

这个问题已经在其他几个地方提出过几次，但从未真正得到回答。我的问题是这个。

我在一个页面上有 4 个 iframe，每个都指向同一个域，请求相同的资源，但根据参数显示不同的结果。iframe 正在通过 JQuery 加载。例子

```
//Get the data needed for form the iframe
var domain = $('#domain').val();
var application_id = $('#application_id').val();
var url = 'http://' + domain + '/appearance/theme/' + application_id  +'?device=';

//Load an empty iframe into the page
$('<iframe src="" height = "400px" id="iphone_demo" name="iphone_demo" ></iframe>').appendTo('#iphone_frame');
$('<iframe src="" height = "400px" id="android_demo" name="iphone_demo" ></iframe>').appendTo('#android_frame');
$('<iframe src="" height = "600px" id="ipad_demo" name="iphone_demo" ></iframe>').appendTo('#ipad_frame');
$('<iframe src="" height = "600px" id="facebook_demo" name="iphone_demo" ></iframe>').appendTo('#facebook_frame');

//Now set the iFrames source
$('#iphone_demo').attr('src', url + 'iphone');
$('#android_demo').attr('src', url + 'android');
$('#ipad_demo').attr('src', url + 'ipad');
$('#facebook_demo').attr('src', url + 'facebook'); 
```

iframe“#iphone_demo”工作得很好。其他 iframe 崩溃是因为似乎从未加载所有 js 脚本文件。JS 脚本文件是使用 PHP 聚合的。而这只发生在 FireFox 中。

服务器是 Centos 6，使用 apache 并通过 PHP 提供页面。有谁知道为什么会这样。

# eclipse-plugin - 我自己的 Find References 实现如何写入 Eclipse 搜索视图？

> ID：13551635
> 
> 赞同：3
> 
> 时间：2012-11-25T13:51:47.343
> 
> 标签：eclipse-plugin

我正在使用 Eclipse 插件框架为特定语言编写编辑器。我想为这种语言实现查找参考功能并将结果写入 eclipse 搜索视图。我已经在网上搜索了几天，我发现的只是关于如何定义 org.eclipse.search.searchResultViewPages 扩展点和定义搜索页面和搜索视图的解释。我只对搜索视图以及如何将自己的结果插入其中感兴趣。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T10:59:47.300

我已经开始研究同样的问题。

对我来说，最简单的事情是在我的编辑器的上下文中为现有的 Java 查找引用命令*org.eclipse.jdt.ui.edit.text.java.search.references.in.workspace添加一个命令处理程序。*

我的处理程序的当前版本非常简单，它将基于当前单词的正则表达式发送到简单的文本搜索（诚然，会产生误报）。从好的方面来说，结果可以根据需要插入到搜索结果中，而我不必处理搜索视图。

重要的事情似乎是您的处理程序以这样的调用结束：

```
NewSearchUI.runQueryInBackground(query); 
```

为了准备我的简单文本查询，我使用

```
ISearchQuery query = TextSearchQueryProvider.getPreferred().createQuery(new PigSearchInput(word)); 
```

你可以在[这里查看我的完整处理程序类。](https://github.com/eyala/pig-eclipse/blob/master/org.apache.pig.contrib.eclipse/src/org/apache/pig/contrib/eclipse/FindReferencesHandler.java)它主要是自给自足的。将来我计划实现一个“真正的”查找引用功能，使用我自己的类而不是 Eclipse 文本搜索类，但我还没有这样做。

# powershell - 将 DER 编码证书转换为 ssh-rsa 公钥

> ID：13551636
> 
> 赞同：2
> 
> 时间：2012-11-25T13:51:57.490
> 
> 标签：powershell, vbscript, x509, ssh-keys, pki

我正在开发一个项目，以自动从用户智能卡中提取公钥 DER 编码证书，并将其转换为 ssh-rsa 公钥形式。然后 ssh-rsa 公钥将作为用户属性发布在 AD 中。从那里 puppet 将使用 ldap 查询获取 ssh 公钥并将其放置在相关用户的 authorized_keys 文件中。

我遇到的问题是，在 Windows 中似乎没有办法将 DER 编码的 .cer 文件转换为 ssh-rsa 密钥。如果将证书移动到用户主目录，则可以运行：

```
openssl x509 -inform pem -in username.cer -noout -pubkey > username.pub 
```

然后 ssh-keygen 可以使用以下命令创建 ssh-rsa 公钥：

```
ssh-keygen -f username.pub -i -m PKCS8 
```

那么有人知道Windows进行这种转换的方法吗？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:19:29.473

您需要先将 DER 编码文件转换为 PEM。这是您需要做的：

```
openssl x509 -in <your DER encoded File> -inform DER -out username.crt -outform PEM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:13:08.280

有一种方法，你需要使用：

```
Import-Certificate 
```

将证书导入用户/本地机器存储。然后，您可以像这样获取公钥（这会为每个拥有一个证书的证书获取公钥，因此请根据您的需要进行更改）：

```
((get-childitem cert:\LocalMachine -Recurse) | Where-Object{$_.PublicKey}).GetPublicKey() 
```

这是使用 PowerShell 3。

# objective-c - 获取一个 Objective-C 方法来返回几个 NSStrings

> ID：13551637
> 
> 赞同：-1
> 
> 时间：2012-11-25T13:52:04.783
> 
> 标签：objective-c, string, pointers

我需要使用一种根据值返回几个不同字符串的方法。我的代码如下所示：

```

- (void) returnStringsAccordingToSet:(NSString *)string1: (NSString *)string2: (NSInteger)setNo {
    开关（setNo）{
        情况1：
            如果（一般字符串设置）{
                string1 = @"第一个字符串";
                string2 = @"第二个字符串";
            } 别的 {
                string1 = @"第一个其他字符串";
                string2 = @"第二个其他字​​符串";
            }
            休息;
        案例2：
             ...
             休息;
        案例3：
             ...
             休息;
    }
}我用以下方法调用该方法：

NSString *firstString = [[NSString alloc]init];
NSString *secondString = [[NSString alloc]init];
NSUInteger set  = 1;

[self getStringsAccordingToSet: firstString: secondString: set]; 
```

我无法让它工作！我得到的只是空字符串。我有一种感觉，对字符串的调用有些错误。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:55:54.943

你不能让它工作，因为当你这样做时

```
string1 = @"The first string"; 
```

您只需覆盖本地参数并更新其引用，但被调用者之外的任何内容都不会被修改。因此，该值仅在函数范围内更改。

您应该将方法的签名更改为

```
- (NSArray*) returnStringsAccordingToSet:(NSString *)string1: (NSString *)string2: (NSInteger)setNo { 
```

以便它返回一个 NSArray 而不是什么都没有，然后在函数内部

```
case1:
  return [NSArray arrayWithObjects:@"The first string",@"The second string",nil]; 
```

所以你返回数组并从调用者那里存储它，然后你可以访问返回的值。

```
NSArray *v = [returnStringAccordingTo: ..];
[v objectAtIndex:0] 
```

从技术上讲，由于 ObjectiveC 是 C 的超集，我想可以`NSString`通过引用传递指向指针的指针（但在 ObjC 中不鼓励这样做）：

```
NSString *string = nil;
[self callMethod:&string];

-(void)callMethod:(NSString**)refToString {
  *refToString = @"foobar"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:13:35.013

您可以通过填充 NSArray 来做到这一点，但为了展示 C 的工作原理，我将展示您所犯的错误。
string1 和 string2 只是指针，因此您可以将可变或不可变字符串作为参数传递。但原始指针永远不会被修改，例如：

```
NSString* string1=@"Hello";  // Let's suppose string1 is on the 0x8000 address
                             // And points to the 0x9000 address
NSString* string2=@"How are you?";  // string2: 0x1000 , pointing to 0x2000
[self returnStringsAccordingToSet: string1: string1 string2: string2]; 
```

然后，当您调用一个方法时，会为您传递给该方法的每个指针创建一个副本：

```
- (void) returnStringsAccordingToSet:(NSString *)string1: (NSString *)string2: (NSInteger)setNo {
// string1 and string2 both point on the same address, but they are other pointers
// for example string1 is on 0x7000 and string2 on 0x7400, pointing to 0x9000
// and 0x2000
    switch (setNo){
        case 1:
            if (generalStringSettings){
                string1 = @"The first string";  // You just create another instance
                string2 = @"The second string"; // of the string, but the original
                // pointers aren't affected
            } else {
                string1 = @"The first other string";
                string2 = @"The second other string";
            }
            break;
        case 2:
             ...
             break;
        case 3:
             ...
             break;
    }
} 
```

解决方案：

1.  传递一个 NSMutableString 作为参数，而不是分配它们，只需修改内容；
2.  传递一个指向指针的指针；
3.  返回一个包含新字符串的 NSArray。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T13:55:45.770

**更新说明：**我个人不首先使用该方法。如果可能的话，我会使用数组。不确定是否可以将其与 ARC 一起使用。一些 Apple 方法使用这种方法返回错误值，因此最好注意这一点。

当方法被调用时，你传递给函数的那些参数被复制（当然他们没有得到复制消息，指针被复制到你传递指针的距离），并且这些副本在函数内部使用（或者更技术上是用参数值）。因此，如果您更改副本（即尝试替换指针上的对象，可变对象可以修改），这不会反映在值上。您可以使用指针来解决这个问题（即，将指针传递给指针）。

所以：

```
NSString* string = @"one string";
NSLog(string); // one string

// [self method:string]
- (void) method: (NSString*) string {
    // Local copy created:
    // NSString* string = copy of string (second pointer created, object not copied in memory)
    string = @"other string";
    NSLog(string); // other string
}

NSLog(string); // one string 
```

你可以这样做：

```
- (void) method: (NSString**)str {
    *str = @"Some string";
} 
```

接着：

```
// string = "old vlalue"
NSString* string = @"old value";

// string = "Some string"
[self method:&string]; 
```

# wordpress - Wordpress 自定义帖子类型插件 - 我哪里出错了？

> ID：13551640
> 
> 赞同：0
> 
> 时间：2012-11-25T13:52:29.357
> 
> 标签：wordpress, custom-post-type

我决定创建一个插件，而不是将我的自定义帖子类型放入我的主题中（因为我的主题将来可能会改变）。

我为我的插件创建了一个文件夹并创建了一个文件（myplugin.php），其内容如下：

```
<?php
   /*
   Plugin Name: myplugin
   Plugin URI: http://www.mywebsite.com
   Description: Custom post types for my website
   Version: 1.0
   Author: my name
   Author URI: http://www.mywebsite.com
   License: Private
   */
?> 
```

并将我的自定义帖子类型添加到 functions.php 文件中，如下所示：

```
<?php
add_action( 'init', 'register_cpt_portfolio' );

function register_cpt_portfolio() {

    $labels = array( 
        'name' => _x( 'Portfolio', 'portfolio' ),
        'singular_name' => _x( 'Portfolio', 'portfolio' ),
        'add_new' => _x( 'Add New', 'portfolio' ),
        'add_new_item' => _x( 'Add New Portfolio', 'portfolio' ),
        'edit_item' => _x( 'Edit Portfolio', 'portfolio' ),
        'new_item' => _x( 'New Portfolio', 'portfolio' ),
        'view_item' => _x( 'View Portfolio', 'portfolio' ),
        'search_items' => _x( 'Search Portfolio', 'portfolio' ),
        'not_found' => _x( 'No portfolio found', 'portfolio' ),
        'not_found_in_trash' => _x( 'No portfolio found in Trash', 'portfolio' ),
        'parent_item_colon' => _x( 'Parent Portfolio:', 'portfolio' ),
        'menu_name' => _x( 'Portfolio', 'portfolio' ),
    );

    $args = array( 
        'labels' => $labels,
        'hierarchical' => true,
        'description' => 'To display completed works.',
        'supports' => array( 'title', 'editor', 'excerpt', 'thumbnail', 'custom-fields' ),
        'taxonomies' => array( 'category' ),
        'public' => true,
        'show_ui' => true,
        'show_in_menu' => true,

        'show_in_nav_menus' => true,
        'publicly_queryable' => true,
        'exclude_from_search' => false,
        'has_archive' => true,
        'query_var' => true,
        'can_export' => true,
        'rewrite' => true,
        'capability_type' => 'page'
    );

    register_post_type( 'portfolio', $args );
}
?> 
```

但是，激活插件后，我没有看到我的自定义帖子类型 - 我错过了这里的任何步骤吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:07:05.297

我没有使用functions.php文件，而是将CPT放入主插件php文件中，它似乎运行良好。我会在两天内接受这个答案，除非有人对我应该如何做到这一点有更好的建议:)。

# django - 使用 Django 1.4 创建 404

> ID：13551641
> 
> 赞同：0
> 
> 时间：2012-11-25T13:52:51.163
> 
> 标签：django

如果没有正确的条目，我想显示 404 错误`project_name/urls.py`。

我阅读了[编写您的第一个 Django 应用程序](https://docs.djangoproject.com/en/dev/intro/tutorial03/?from=olddocs#write-a-404-page-not-found-view)，但我不明白如何创建一般错误 - 不仅适用于应用程序。

所以我尝试了这个：

1.  `TEMPLATE_DIRS = /var/www/first/templates`
2.  回声“404 错误”> /var/www/first/templates/404.html
3.  在`/var/www/first/urls.py`：

    ```
    from django.http import Http404
    try: 
        ...
        url(r'^admin/', include(admin.site.urls)),
        ... 
    except: 
        raise Http404 
    ```

毕竟，如果我调用未知的 url，我仍然会收到 500 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:56:03.663

Django 使用 urls.py 文件按顺序评估所有 url 模式。如果您希望它在评估所有正则表达式模式但没有找到匹配项后转到某个页面，只需添加类似这样的内容作为`urlpatterns`元组中的最后一项：

```
url('', views.defaultview), 
```

可能是`defaultview`那个 404 页面。

`django.views.defaults.page_not_found`是一个内置的 django 视图，可以渲染`templates/404.html`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:11:06.207

它适用于以下`/var/www/first/urls.py`

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
...,
url(r'^admin/', include(admin.site.urls)),
...,
) 
```

# ember.js - Ember Js 移除 Metamorph 代码

> ID：13551642
> 
> 赞同：5
> 
> 时间：2012-11-25T13:52:55.860
> 
> 标签：ember.js

我目前处于需要删除 ember js 选择框中使用的 metamorph 标签的情况。我使用了一个 JS 插件，它将我的选择框变成了我使用 css 自定义的样式选择框。

我目前在我的视图中有这个 ember js 选择框。

```
<script type="text/x-handlebars" data-template-name="opportunities">
{{view Ember.Select 
             contentBinding="controller.filter" 
             optionLabelPath="content.metacode"  
             optionValuePath="content.description" 
             class="mydds opportunitylistcategory"}}
</script> 
```

我只需要一种删除变质代码的方法，但是对于 ember 选择框仍然启用绑定等...我已经阅读了有关使用可排序的 jquery 删除变质数据的信息，但这对我没有帮助。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:47:34.137

解决此问题的最佳方法是使用 Ember.CollectionView。

我用一个简单的无序列表（`<ul><li>`）遇到了这个问题。

这是一个演示如何做到这一点的答案[https://stackoverflow.com/a/11749736/701368](https://stackoverflow.com/a/11749736/701368)

* * *

**编辑**

最初的答案是针对 1.0 之前的 Ember 版本。

在处理较新版本的 Ember.js 时，我建议使用`{{each}}`带有属性的助手。`itemViewClass`您可以在此处找到文档：http: [//emberjs.com/api/classes/Ember.Handlebars.helpers.html#toc_specifying-a-view-class-for-items](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#toc_specifying-a-view-class-for-items)。

所以不要使用块级助手；你想使用`{{each}}`而不是`{{#each}}`.

# iphone - Xcode - 手动加载视图控制器

> ID：13551646
> 
> 赞同：0
> 
> 时间：2012-11-25T13:53:16.810
> 
> 标签：iphone, objective-c, ios, xcode, uiviewcontroller

我要问的可能是不可能的，而且听起来很奇怪，但它就是这样。

这类似于我想要实现的目标：

用户第一次打开应用程序，有两个标签栏，在第一个（他还没有点击第二个）中，他按下了一个按钮，应该启动进度视图和文本视图更改以及其他视图更改，即使用户没有通过单击第二个标签栏加载另一个视图控制器。

那么，有没有办法在用户自己手动加载视图控制器之前加载它，我知道`viewDidLoad`手动调用无济于事，有什么建议吗？相当混乱，这就像修改视图但控制器尚未加载......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:04:15.830

在另一个视图控制器中进行更改，然后让控制器在自然加载时配置自己的视图。

# jetty - 码头指标配置

> ID：13551647
> 
> 赞同：3
> 
> 时间：2012-11-25T13:53:18.850
> 
> 标签：jetty, metrics

我正在尝试使用 Coda Hale 的 metrics-jetty 项目：http: [//metrics.codahale.com/manual/jetty/](http://metrics.codahale.com/manual/jetty/)

问题是，我真的不知道如何配置码头来使用这些类。

我将项目添加到我的 pom.xml 中，但是在使用 jetty.xml 时：

```
<Call name="addConnector">
  <Arg>
      <New class="com.yammer.metrics.jetty.InstrumentedSelectChannelConnector">
        <Set name="host"><Property name="jetty.host" /></Set>
        <Set name="port"><Property name="jetty.port" default="9090"/></Set>
        <Set name="maxIdleTime">300000</Set>
        <Set name="Acceptors">2</Set>
        <Set name="statsOn">false</Set>
        <Set name="confidentialPort">8443</Set>
    <Set name="lowResourcesConnections">20000</Set>
    <Set name="lowResourcesMaxIdleTime">5000</Set>
      </New>
  </Arg>
</Call> 
```

（从jetty-distribution复制），我收到此错误：

```
Caused by: java.lang.ClassNotFoundException: com.yammer.metrics.jetty.InstrumentedSelectChannelConnector 
```

**编辑**

直接在 jetty-maven-plugin 中执行此操作具有相同的效果：

```
 <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>${jetty.version}</version>
            <configuration>
                <scanIntervalSeconds>0</scanIntervalSeconds>
                <stopKey>foo</stopKey>
                <stopPort>9999</stopPort>
                <reload>manual</reload>
                <connectors>
                    <connector
                        implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                        <port>8080</port>
                    </connector>
                    <connector
                        implementation="com.yammer.metrics.jetty.InstrumentedSelectChannelConnector">
                    </connector>
                </connectors>
                <webAppSourceDirectory>${basedir}/src/main/webapp</webAppSourceDirectory>
                <!-- <jettyXml>${project.basedir}/src/main/resources/jetty.xml</jettyXml> -->
            </configuration>
            <executions>
                <execution>
                    <id>start-jetty</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <scanIntervalSeconds>10</scanIntervalSeconds>
                        <daemon>true</daemon>
                    </configuration>
                </execution>
                <execution>
                    <id>stop-jetty</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

提前感谢比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:06:42.230

这似乎是一个非常直接的类路径问题。你在哪里有装有仪表连接器的罐子？

在发行版中，您需要将它放在服务器类路径中，或者在 lib/ext 下，或者作为启动时声明的选项。在插件中，您需要将工件声明为插件本身的依赖项。

# javascript - 纯粹使用 javascript 验证 html 代码

> ID：13551648
> 
> 赞同：1
> 
> 时间：2012-11-25T13:53:20.033
> 
> 标签：javascript, html, client-side

> **可能重复：**
> [是否有纯 Javascript X/HTML 验证器？](https://stackoverflow.com/questions/5809563/is-there-a-pure-javascript-x-html-validator)

是否有允许验证 html 代码的 javascript 库/框架，而无需进行服务器回发？

我正在寻找类似于 jslint/jshint 的东西，你在其中传递代码，它会返回错误、行号和消息。

# c++ - 是否违反过 C/C++ 运算符优先级和关联性规则？

> ID：13551653
> 
> 赞同：1
> 
> 时间：2012-11-25T13:53:56.110
> 
> 标签：c++, syntax, operators, operator-precedence, associativity

是否在任何 C/C++ 表达式中违反了[运算符优先级和关联性规则？](http://cpp.operator-precedence.com/)
如果是这样，你能举个例子吗？

假设优先级和关联性规则的声明是：

> 每个运算符都有一个给定的优先级，每个优先级都有一个给定的关联性。如果两个运算符在它们期望操作数的地方看到一个子表达式，则它属于具有更高优先级的那个。联系被关联性打破。

### 编辑：背景

该标准将 C/C++ 表达式定义为 CFG，它比基于优先级的解析器灵活得多。例如，可以给二元运算符提供不对称的“优先级”，这会导致*任何*优先级表不正确。然而，在我看来，语法的设计被限制为支持简单的优先规则。以下是我遇到的一些所谓的“反例”：

### 1) `a?b,c:d`不被解释为`(a?b),(c:d)`

一些人声称，`?:`运算符对其中间操作数的优先级与对其其他操作数的优先级不同`a?b,c:d`，例如，因为 不被解释为`(a?b),(c:d)`。但是，既不`b`也不`c`占据它似乎`?:`作为其内部操作数的位置。按此推理`a[b+c]`应解释为`(a[b)+(c])`，这是可笑的。

### 2) `sizeof(int)*a`被解释为`(sizeof(int))*a`而不是`sizeof((int)(*a))`

...因为 C 不允许将带括号的强制转换作为 sizeof 的运算符。但是，这两种解释都符合优先规则。混淆来自`*`运算符的歧义（是二元运算符还是一元运算符？）。优先表并不意味着解决运算符的歧义。毕竟，它们不是运算符*符号*优先表。所以*运算符*优先级规则本身是完整的。

### 3) `a+b=c`导致语法错误，而不是语义错误

`a+b=c`，根据标准，是无效的 C*语法*。如果 C 有一个基于优先级的解析器，它只会在*语义*级别被捕获。在 C 中，碰巧任何不是一*元表达式的表达式*都不能是左值的。因此，这些语义上注定要失败的 LHS 表达式不需要在语法上进行调整。它对整个语言没有影响，优先表不必用于预测表达式将导致的错误的句法/语义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T14:37:58.093

举个例子，通常的优先级表表明`sizeof`和 cast 表达式具有相同的优先级。表格和标准都说它们是从右到左关联的。

当您查看时，这种简化很好，例如`*&foo`，这意味着与 相同`*(&foo)`。

它还可能向您建议这`sizeof (int) 1`是合法的 C++，并且它的含义与`sizeof( (int) 1 )`. 但它是不合法的，因为实际上`sizeof( type-id )`它在语法中是一个特殊的东西。它的存在阻止`sizeof (int) 1`了一个`sizeof`表达式，其操作数是一个其操作数是 的强制转换表达式`1`。

所以我认为你可以说 C++ 语法中的“sizeof ( *type-id* )”产生是通常的优先级/关联性表所说的一个例外。他们*确实*准确地描述了“*一元表达式*的大小”产生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T13:58:29.733

这取决于“规则”是否正确。语言定义不讨论优先级，因此您在各个地方看到的优先级表可能反映也可能不反映语言定义实际需要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:08:57.180

在有人能找到反例之前，我将把它作为默认答案提出：

不，永远不会违反 C/C++ 优先级和关联性规则。

# unity3d - 不要通过 UIToolkit 按钮

> ID：13551654
> 
> 赞同：1
> 
> 时间：2012-11-25T13:53:57.753
> 
> 标签：unity3d, prime31

我一直在玩 UIToolkit，它很棒。虽然我的点击通过按钮，所以当点击 UI 时，我的光线投射也开始了。有没有办法检查 GUI 上是否有点击/触摸？

编辑：我正在使用 Prime31 的 UIToolkit

解决了：

```
foreach (var touchable in _gui.touchableSprites) {
    if ( !touchable.hidden && touchable.hitTest(new Vector2(clickPos.x, Screen.height - clickPos.y)) ) return;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:20:39.330

假设您正在使用 prime31 的 UIToolkit，请查看[UIToolkit.cs(第 81-95 行) 脚本](https://github.com/prime31/UIToolkit/blob/master/Assets/Plugins/UIToolkit/UIToolkit.cs#L81) 作者的示例展示了如何处理高亮显示他的 TouchableSprites。相同的功能[可以适用](http://forum.unity3d.com/threads/87917-Prime31-UIToolkit-Multi-Resolution-GUI-Solution-Ready-for-Use...and-it-s-free?p=646139&viewfull=1#post646139)于执行 MouseOver 事件。我不确定作者是否从 2011 年开始添加此功能，我有一段时间没有使用 UIToolkit。

或者，如果第一层命中是“UILayer”（UIToolkit 的层），您可以修改所有光线跟踪以返回。

我使用的第三种方法是创建一个全局 GUI 元素管理器，用于存储所有 GUI 矩形的列表。当我添加一个新的光线追踪函数时，我调用我的管理器类来查看鼠标光标是否包含在任何 GUI 矩形中（合并重叠矩形的复杂度更高一些），如果是，则跳过光线跟踪。

# json - 如何调用 Grails 动作并解析其 json 结果？

> ID：13551655
> 
> 赞同：0
> 
> 时间：2012-11-25T13:53:57.333
> 
> 标签：json, grails

我有一个过滤器正在过滤某些操作。如果这是必需的操作，我需要渲染它并查看它的响应（json）。我如何调用它并查看响应是否包含错误？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:35:49.773

你试过`afterView`吗？

> afterView - 在视图渲染后执行。将异常作为参数，如果在处理期间发生异常，则该参数将为非空。注意：在应用布局之前调用此闭包

更多关于[文档](http://grails.org/doc/latest/guide/single.html#filters)。

# java - 在while中使用if语句打破Java中的循环

> ID：13551665
> 
> 赞同：0
> 
> 时间：2012-11-25T13:55:40.027
> 
> 标签：java, if-statement, while-loop

我是 Java 新手，在 while 循环中使用 if 语句时遇到问题。

我写的代码如下：

```
 while(lexicalizations.hasNext())           
           {
               myObject = lexicalizations.next().getObject();
               language= myObject.getTermLanguage();
               if (language.equals(languageCode)) {
                   System.out.println(lexicalizations.next());

               }                             
           } 
```

但是，只要 if 条件为真，程序就会执行其块，然后终止 while 循环。因此，其余项目未检出。我怎么能解决这个问题？非常感谢。

干杯，阿亚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:59:27.817

每次调用都会`Iterator.next()`将迭代器移动到集合的下一个元素，因此您必须非常小心，不要在每次迭代中多次调用此方法。您必须将元素保存到局部变量中并在整个循环体中使用该变量。

为了系统地避免这种陷阱，总是喜欢在适用的情况下使用*增强的 for*循环：

```
for (String lex : lexicalizations) {
  ... your code uses lex here ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:59:02.220

请注意，当您执行该 println 时，您会“消耗”下一个元素，因此如果只剩下一个元素，那么当您返回 while 时将为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T14:00:59.217

`if`您正在语句块内的迭代器中移动到下一个对象。为避免这种情况，只需使用`myObject`，您将“访问”每个对象：

```
while (lexicalizations.hasNext())           
{
   myObject = lexicalizations.next().getObject();
   language= myObject.getTermLanguage();
   if (language.equals(languageCode)) {
      System.out.println(myObject);
   }                             
} 
```

# jquery - 如何防止在 twitter bootstrap typeahead 插件中按 enter 提交

> ID：13551668
> 
> 赞同：15
> 
> 时间：2012-11-25T13:55:42.060
> 
> 标签：jquery, twitter-bootstrap, form-submit, preventdefault

我有一个输入文本，我应用它预先输入插件来建议项目，但是当我在输入文本上按 Enter 键时，它会提交表单。

如何防止使用 twitter bootstrap typeahead 插件提交表单？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-25T15:44:12.490

您可以通过向其添加 ID 并简单地删除 keydown 事件来定位该特定输入，如下所示：

**JS**

```
$(document).ready(function() {
  $('form input').keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-26T12:24:17.130

第一个答案对我不起作用，可能是因为更新了预输入插件，但我确实通过使用由 typehead 创建的“替代”输入解决了这个问题：

```
$(".twitter-typeahead > input").focus(function(){
    //disable btn when focusing the input
    $("#my_submit_button").prop('disabled', true);
}).blur(function(){
    //enable btn when bluring the input
    $("#my_submit_button").prop('disabled', false);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-26T18:04:43.467

我在使用 CodeIgniter 和 bootstrap 的项目中遇到了同样的问题，我在这里找到了解决方案并且它有效。

只需`onsubmit="return false;"`在表格中添加，如下所示：

```
<form id="frmcrud" method="post" onsubmit="return false;"> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-25T12:23:23.200

根据[文档](http://bootstrap-tagsinput.github.io/bootstrap-tagsinput/examples/#options)，您可以将选项设置为`confirmKeys`return (13) 以外的其他内容：

```
$('input').tagsinput({
   confirmKeys: [188, 32, 39],
}); 
```

但是，解决此问题的一种更聪明的方法是[防止在 enter 上发送表单](https://stackoverflow.com/questions/585396/how-to-prevent-enter-keypress-to-submit-a-web-form)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-22T11:49:27.693

我发现解决此问题的最佳方法是不使用提交输入。改为使用按钮输入并添加一些js以在单击时提交表单。

```
$('#my_submit_button').click(function(){
    $(this).parents('form').submit();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-29T06:04:15.797

用这个

```
$('.bootstrap-tagsinput input').keydown(function( event ) {
 if ( event.which == 13 ) {
    $(this).blur();
    $(this).focus();
    return false;
 }
}) 
```

# jquery - jquery 动画 - 将一个对象从一个 div 移动到另一个

> ID：13551674
> 
> 赞同：0
> 
> 时间：2012-11-25T13:56:05.833
> 
> 标签：jquery

我发现这[是否可以使用 jquery 动画将文本从一个元素移动到另一个元素？](https://stackoverflow.com/questions/9153147/is-it-possible-to-move-the-text-from-an-element-to-another-using-jquery-animatio)这几乎是我一直在寻找的，但我真正不能做的是在我的小不同情况下在运动过程中获得平滑的动画。这里不是那么工作的例子：http: [//jsbin.com/ofumil/7/edit](http://jsbin.com/ofumil/7/edit)

第二个选项卡中的按钮应该从选项卡移动到上部 div（您看到“已选择”的位置）。

有人能理解我的错误吗？谢谢

```
<!DOCTYPE html>
<html>
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">    </script>
  <!-- <script src="./elgg/vendors/jquery/jquery-1.6.4.min.js"></script> -->
  <script>
    $(document).ready(function() {
      $("#tabs-left").tabs();
      $(".category").click(function(){
        changeDiv('#go', '#fragment-2', '#selicons');
        changedest();
      });
    });

    function changeDiv(what, source_id, target_id)
    {
    var clickedButton = $(what);
    var soff = $(source_id).offset();
    var eoff = $(target_id).offset();
    $('<div id="anim-shell"></div>').appendTo('body');
    $('#anim-shell').css( "background-color","yellow" );
    $('#anim-shell').css( { top: soff.top, left: soff.left } );
    clickedButton.appendTo('#anim-shell');
    $('#anim-shell').animate( { top: eoff.top+'px', left: eoff.left+'px' }, 1500, function() {
        clickedButton.appendTo(target_id)
        $('#anim-shell').remove();

        //$(target_id).text( _text );
    });
}
    function changedest(){
      document.getElementById("dest").href ="nuovohref.html"
    }; 

  </script>
  <style>

    #go{background-image:url('invia.gif');
    background-repeat:no-repeat;
    background-position:center center;
    width:100px;height:44px;
    background-color:0000ff;}
    //vertical tabs
    div#tabs-left {
        position: relative;
        padding-left: 200px;
    }

    div#tabs-left > div {
        min-height: 300px;
    }

    div#tabs-left .ui-tabs-nav {
        position: absolute;
        left: 0px;
        top: 0px;
        bottom: 0px;
        width: 195px;
        padding: 5px 0px 5px 5px;
    }

    div#tabs-left .ui-tabs-nav li {
        left: 0px;
        width: 195px;
        border-right: none;
        overflow: hidden;
        margin-bottom: 2px;
    }

    div#tabs-left .ui-tabs-nav li a {
        float: right;
        width: 100%;
        text-align: right;
    }

    div#tabs-left .ui-tabs-nav li.ui-tabs-selected {
        border: none;
        border-right: solid 1px #fff;
        background: none;
        background-color: #fff;
        width: 200px;
    }

    .content {
    position:relative;
    left:200px;
    background-color: #bcf;
    }
  </style>
</head>
<body >
<div id="selicons">
  <br>
  selected:<br>
  <br>
  <button id="search" >» trova</button>
  <a href="oldlink.htm" id="dest">link</a>
</div>
<div id="tabs-left">
    <ul>
        <li><a href="#fragment-1"><span>One</span></a></li>
        <li><a href="#fragment-2"><span>Two</span></a></li>
        <li><a href="#fragment-3"><span>Three</span></a></li>
    </ul>
    <div class= "content" id="fragment-1">
        <p >First tab is active by default:</p>
    </div>
    <div class= "content" id="fragment-2">
        <button id="go" class="category" style="position: absolute;left:100px;top:20px"></button>
        <button id="go1" class="category" style="position: absolute;left:100px;top:20px"></button>

    </div>
    <div class= "content" id="fragment-3">
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
    </div>
</div>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:09:32.453

您错过了示例代码中最重要的部分 :)

```
$('#anim-shell').css({'position': 'absolute' }); 
```

只是一个友好的建议：不要两次查询同一个元素，而是缓存它（在你的情况下它是'#anim-shell'！

# sql - SQL Server 2012 评估数据库到 SQL Server 2012 Express？

> ID：13551676
> 
> 赞同：2
> 
> 时间：2012-11-25T13:56:21.480
> 
> 标签：sql, sql-server-2012, sql-server-2012-express

我接手了一个客户，他有一个内部开发人员。内部开发人员使用 SQL Server 2012 评估版（我相信/假设是企业版）？

无论如何，他们的 SQL Server eval 现在已经过期，他们被“锁定”在购买 SQL Server，因为他们的整个应用程序基础架构现在都位于 SQL Server 2012 中。

SQL Server 评估版的数据库是否会在 SQL Server 2012 Express 版本中运行？

我现在没有手头的架构来测试这个场景，并且想要一些关于解决这个问题的最佳方法的想法。就像现在一样，他们已经死在了水里。

客户不需要任何特定于 2012 标准版或企业版的东西（据我所知），他们只有大约 30 个用户，使用内部应用程序。

任何帮助将不胜感激。

# java - 是否有可能 - 来自值表单数组的边框布局位置？

> ID：13551678
> 
> 赞同：0
> 
> 时间：2012-11-25T13:56:36.753
> 
> 标签：java, swing, user-interface, layout

我在网格布局框架中有 5 个标签。我想使用数组中的位置名称将 gridlayout 更改为边框布局（例如 String gborders[] = { "North", "Center", "South", "East", "West" }; ）并枚举标签地点。是否可以？

这就是我所拥有的：

```
package w1;

import java.awt.*;
import javax.swing.border.*;
import javax.swing.*;

public class LayShow {

  private static JLabel lLabel;

  public static void main(String[] args) {

    int t = 15;

    String lmNames[] = {"Label 1", "Label 2", 
            "Label 3", "Label 4", "Label 5"};

    String gborders[] = { "North", "Center", "South", "East", "West" };

    Color colors[] = { new Color(11, 125, 155), new Color(155, 55, 200),
        new Color(201, 245, 145), new Color(255, 255, 140),
        new Color(161, 224, 224), new Color(11, 125, 155) };

    Font fonts[] = {new Font("SansSerif", Font.BOLD, t), 
            new Font("Arial", Font.BOLD, t+1), 
            new Font("SansSerif", Font.PLAIN, t+2), 
            new Font("SansSerif", Font.ITALIC, t+3),
            new Font("SansSerif", Font.ITALIC, t+4)};

    JFrame frame = new JFrame("Frame"); 
    frame.setLayout(new GridLayout(0, 2));

    for (int i = 0; i < lmNames.length; i++) {

      final Border
      borderColor = BorderFactory.createLineBorder(colors[i+1]);    
      JPanel p = new JPanel();
      p.setBackground(colors[i]);  
      p.setBorder(BorderFactory.createTitledBorder(borderColor , lmNames[i])); 

      lLabel = new JLabel("label number: " + (i+1));
      p.add(lLabel);
      lLabel.setFont(fonts[i]);
      lLabel.setForeground(colors[i+1]);
      lLabel.setToolTipText("ToolTip for label number: " + (i+1));

      frame.add(p);
    }
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:27:18.050

您可以执行以下操作

```
String[] gborders =  { BorderLayout.NORTH,BorderLayout.CENTER, 
                      BorderLayout.SOUTH, BorderLayout.WEST, BorderLayout.EAST }; 
```

在单个面板中添加所有内部面板

```
JFrame frame = new JFrame("Frame"); 
JPanel panel1 = new JPanel();
panel1.setLayout(new BorderLayout()); 
```

在 for 循环结束时

```
for (int i = 0; i < lmNames.length; i++) {
  ....
  lLabel.setToolTipText("ToolTip for label number: " + (i+1));
  panel1.add(p,gborders[i]);
}
frame.add(panel1);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.pack();
frame.setVisible(true); 
```

完毕。

# jquery - 如何将 jVectorMap omMarkerClick 绑定到上下文菜单

> ID：13551682
> 
> 赞同：1
> 
> 时间：2012-11-25T13:56:58.843
> 
> 标签：jquery, contextmenu, markers, jvectormap

我正在尝试将上下文菜单绑定到 jVectorMap 中创建的每个标记。每当用户单击地图上的标记时，我希望弹出一个菜单。

我正在使用这个上下文菜单： http: [//javascripttoolbox.com/lib/contextmenu/](http://javascripttoolbox.com/lib/contextmenu/)和[http://jvectormap.com/](http://jvectormap.com/)

我尝试过这种天真的（？）方法，但没有运气：

```
$(function(){
  $('#world-map').vectorMap({
      map: 'world_mill_en',

      (code omitted...)

        onMarkerClick: function(e, code){
            var cmenu = $.contextMenu.create(menu1, {theme:'vista'});
            cmenu.show(this, e);
        }, 
```

我认为这是因为我必须将被点击的标记传递给`cmenu.show()`.

因此，在 onMarkerClick 处理程序中，我想获得点击的实际标记的句柄。如何从提供的`code`参数中获取该实例？

我曾尝试访问`this.markers[code]`，但`this`似乎不是类型`map`。

如果不可能将 contextMenu 和 jVectorMap 结合起来，我已经想到了一种替代方法，当单击标记时会显示一个简单的对话框。然而，我对如何做到这一点一无所知......

任何想法将不胜感激！

奥莱。

# jquery - Ajax 上传在 ie 中不起作用

> ID：13551684
> 
> 赞同：0
> 
> 时间：2012-11-25T13:57:50.387
> 
> 标签：jquery, ajax, ajax-upload, ajaxuploader

我正在使用 ajax 上传来上传图像。它在所有浏览器中都可以使用，但在 IE 中无法使用。

这是我使用的代码，

```
 $('#photoimg').live('change', function(){ 
    $(".selectedphoto").html('');
    $(".selectedphoto").html('<img src="loader.gif" alt="Uploading...."/>');
    $("#imageform").ajaxForm({
        target: '.selectedphoto',
                    success:       onsuccess,

    }).submit();

        })'; 
```

HTML

```
<form id="imageform" method="post" enctype="multipart/form-data"  action='ajaximage.php'>
    <input type="file" name="photoimg" id="photoimg" class="required" />
</form> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:16:09.880

假设您使用的是 jQuery 表单插件。

如果你检查[https://github.com/malsup/form/](https://github.com/malsup/form/)你会发现它提到这个插件依赖于现代浏览器的 XHR 2（如果是 IE，它只能在 IE10+ 中使用）和它使用的旧版本iframe ( [http://malsup.com/jquery/form/#file-upload](http://malsup.com/jquery/form/#file-upload) )。

建议您检查 iframe 部分的上述链接，因为它涉及对服务器如何访问文件的一些了解。

让我们知道它是否有效以及您正在测试的 IE 版本。

# c# - GetType() 和 GetType().UnderlyingSystemType 之间的区别

> ID：13551691
> 
> 赞同：3
> 
> 时间：2012-11-25T13:58:34.067
> 
> 标签：c#, reflection, types

我已经阅读了“UnderlyingSystemType”的定义，即它“表示由公共语言运行时提供的表示该类型的类型”。

关于 SO 有一个相关链接，[即 UnderlyingSystemType 何时与当前的 Type 实例不同，](https://stackoverflow.com/questions/11227136/when-does-the-underlyingsystemtype-differ-from-the-current-type-instance)但我无法从答案中判断是否真的有可能拥有一个类型与 UnderlyingSytemType 不同的对象。

我最近了解了 CLS 合规性，并且未签名的整数不符合 CLS。我真的很希望这样做，非 CLS 兼容类型可能具有不同的底层类型，但事实并非如此。

对于它的价值，我用来测试的代码是：

```
Byte    t01 = 1;
SByte   t02 = 1;
Int16   t03 = 1;
UInt16  t04 = 1;
Int32   t05 = 1;
UInt32  t06 = 1;
Int64   t07 = 1;
UInt64  t08 = 1;
Single  t09 = 1;
Double  t10 = 1;
Decimal t11 = 1;
Console.WriteLine(t01.GetType().Equals(t01.GetType().UnderlyingSystemType));
Console.WriteLine(t02.GetType().Equals(t02.GetType().UnderlyingSystemType));
Console.WriteLine(t03.GetType().Equals(t03.GetType().UnderlyingSystemType));
Console.WriteLine(t04.GetType().Equals(t04.GetType().UnderlyingSystemType));
Console.WriteLine(t05.GetType().Equals(t05.GetType().UnderlyingSystemType));
Console.WriteLine(t06.GetType().Equals(t06.GetType().UnderlyingSystemType));
Console.WriteLine(t07.GetType().Equals(t07.GetType().UnderlyingSystemType));
Console.WriteLine(t08.GetType().Equals(t08.GetType().UnderlyingSystemType));
Console.WriteLine(t09.GetType().Equals(t09.GetType().UnderlyingSystemType));
Console.WriteLine(t10.GetType().Equals(t10.GetType().UnderlyingSystemType));
Console.WriteLine(t11.GetType().Equals(t11.GetType().UnderlyingSystemType)); 
```

运行时，我只得到一堆真值。

我的问题是，是否存在对象的底层系统类型可能与其类型不同的情况？这种区分的目的是什么，仅仅是为了允许定义无法实例化的假设类型吗？我什至无法使用 new 关键字创建新类型。并且 Type 的所有属性都是 get-only，所以我不知道这个功能的作用。这种区别在其他语言中有用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:39:44.570

`Type`是一个抽象类。您将看到的最常见的实现是`RuntimeType`，这是通常的对象，但任何人都可以创建`Type`. `RuntimeType`的`UnderlyingSystemType`将返回相同的`RuntimeType`。据我所见，只有当你有一个`Type`在本地接受或构造这种类型的方法时，这才真正重要，而不是如果你得到一个对象并调用`GetType`. 这里有一个例子可以帮助你理解：

```
class Program
{
    static void Main(string[] args)
    {
        // creates a type whose methods and properties are all like Int32, but with an UnderlyingSystemType of string
        var type = new MyType(typeof(int));
        Console.WriteLine(type.FullName); // prints System.Int32
        Console.WriteLine(type.UnderlyingSystemType.FullName); // prints System.String
    }
}
class MyType : TypeDelegator //this extends Type, which is an abstract class
{
    public MyType(Type t) : base(t) { }
    public override Type UnderlyingSystemType
    {
        get
        {
            return typeof(string);
        }
    }
} 
```

# ios - ccrendertexture 内存使用情况

> ID：13551693
> 
> 赞同：0
> 
> 时间：2012-11-25T13:59:09.000
> 
> 标签：ios, xcode, cocos2d-iphone

我有很多针对内存使用进行了优化的 png 图像。我想知道这是否对 ccrendertexture 有任何影响。我的意思是当我创建一个 ccrendertexture 并在其中使用 sprite 访问方法时，原始 sprite 文件大小是否有任何意义，还是只有 ccrendertexture 的大小才重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:56:45.660

原始 png 大小仅对您的最终应用程序大小很重要。绘制精灵时，它消耗的内存等于宽度 * 高度 * bytesPerPixel，其中 bytesPerPixel 最有可能是 32。示例：RGBA8 颜色的 1024*1024 图像将占用 4M 设备内存。

CCRenderTexture 将根据其大小占用额外的空间。

# calendar - 如何自定义日历 Web 控件标题

> ID：13551696
> 
> 赞同：0
> 
> 时间：2012-11-25T13:59:25.500
> 
> 标签：calendar, customization, asp.net-webcontrol

这是我的日历。我希望能够格式化标有红色矩形的标题。我怎样才能访问它？我应该更改什么属性？

![在此处输入图像描述](../Images/a8013146758182dafa9ae02256bc2235.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:24:46.020

该问题没有指定标记或代码，因此很难给出一个好的答案。

但是，一般情况下，格式很大程度上可以由 css 指定。我建议使用 Firefox 扩展[Firebug](https://addons.mozilla.org/nl/firefox/addon/firebug/)来检查日历的标记。您可以轻松识别与标记中的标题对应的元素，并为其指定自定义 css 样式。

例如，如果您的标记是：

```
<html>
<body>
    <div class="calendar">
        <h1>Events</h1>
        <h2><span>November 2012</span></h2>
        <table>
            <thead>
                <tr><th>MON</th><th>TUE</th><th>WED</th><th>THU</th><th>FRI</th><th>SAT</th><th>SUM</th></tr>
            </thead>
            <tbody>
                <tr><td>29</td><td>30</td><td>31</td><td>1</td><td>2</td><td>3</td><td>4</td></tr>
                <tr colspan="7"><td>...</td></th>
            </tbody>
        </table>
    </div>
</body>
</html> 
```

你会添加：

```
<style>
div.calendar h2 span /*selector for a span, in a h2, in a div that has class "calendar".*/
{
    border-color: red;
    border-width: 2px;
    border-style: solid;
}
</style> 
```

到 html（或者更确切地说，创建一个专用的 css 文件）在月份和年份标题周围绘制一个红色矩形。

# c# - 如何暂停视频并从 WPF 和 C# 中的另一个位置播放它

> ID：13551697
> 
> 赞同：2
> 
> 时间：2012-11-25T13:59:26.123
> 
> 标签：c#, wpf, xaml, mediaelement, dispatchertimer

我正在尝试在测试代码中的特定位置暂停视频，并尝试从完全不同的位置开始播放。它最终确实从另一个点开始，但是当它再次暂停时，它会回到它注册的第一个实例。我想知道我在这段代码中做错了什么。

CS文件中的代码是

```
namespace timer_thread_and_gui
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
        DispatcherTimer timer;
        DispatcherTimer timer1;

    public MainWindow()
    {
        InitializeComponent();

   }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        timer1 = new DispatcherTimer();
        timer1.Tick += new EventHandler(dispatcherTimer_Tick1);
        timer1.Interval = new TimeSpan(0, 0, 10);

                    timer = new DispatcherTimer();
                    timer.Tick += new EventHandler(dispatcherTimer_Tick);
                    timer.Interval = new TimeSpan(0, 0, 5);
                    video_panel.Play();

            timer1.Start();
            timer.Start();

    }

    private void dispatcherTimer_Tick(object sender, EventArgs e)
    {
        this.draw_an_elipse();

       draw_an_elipse()
    {
       ++a;
       txt.Text = a.ToString();

       if (a%5==0)
       {
           video_panel.Stop();
           video_panel.Position = new TimeSpan(0, 18, 30);

           video_panel.Play();
           timer1.Start();
       }
    }

   private void dispatcherTimer_Tick1(object sender, EventArgs e)
   {

    video_panel.Pause();
    timer1.Stop();
   }

} 
```

XAML 代码是

```
<MediaElement Height="266" HorizontalAlignment="Left" Margin="12,33,0,0" Name="video_panel" 
                  VerticalAlignment="Top" Width="474" 
                  LoadedBehavior="Manual" UnloadedBehavior="Stop" 
                  Source="c:\users\ayymmoo\documents\visual studio 2010\Projects\Unfinished.avi" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:13:47.057

如果您想根据视频停止的位置跳到另一个位置，您的 TimeSpan 应该相对于这个停止位置，而不是绝对：

如果你想在暂停后跳过 10 秒，那应该是这样的：

```
MediaElement.Position += TimeSpan.FromSeconds(10); 
```

# c# - 加快端口扫描 C#

> ID：13551707
> 
> 赞同：0
> 
> 时间：2012-11-25T14:00:54.223
> 
> 标签：c#, sockets, web, port-scanning

我正在尝试在 C# 中创建端口扫描器，到目前为止我有这个：

```
private void ip()
{
    int start = 70;
    int end = 80;
    string ipString;
    if (this.comboBox1.Text == "Domain") {
         ipString= Dns.GetHostEntry(txtHost.Text).AddressList[0].ToString();
    }
    else {
        ipString = txtHost.Text;
    }
    TcpClient asd = new TcpClient();
    // MessageBox.Show(ipString);     
    IPAddress address = IPAddress.Parse(ipString);
    for (int i = start; i <= end; i++)
    {
        try
        {
            asd.SendTimeout = 3000;
            asd.ReceiveTimeout = 3000;
            asd.Connect(address, i);

            if (asd.Connected)
            {
                MessageBox.Show("Port " + i + " is open");
            }
        }
        catch
        {
            MessageBox.Show("Port " + i + " is closed");
        }
    }
} 
```

但是对于封闭的端口，它有点慢，大约 20 秒，我应该怎么做才能让这个过程更快？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:03:25.900

你应该使用线程。

[http://msdn.microsoft.com/en-us/library/aa645740(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645740(v=vs.71).aspx)

为您要检查的每个端口启动单独的线程，并让回调通知您其中哪些是打开的，哪些不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T03:03:11.617

完成测试后，您需要关闭连接。

在你的陈述`asd.Close();`结束时尝试。`catch`

它大大加快了我的进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T14:13:03.237

您应该像这样声明您的委托和异步函数（示例中的两个参数）

```
public delegate void UpdateUIThreadDelegate(int par1, int par2);
void UpdateUIThread(int par1, int par2)
{
       ...
} 
```

你应该这样称呼你异步函数：

```
this.Invoke(new UpdateUIThreadDelegate(UpdateUIThread), new object[] { par1, par2 }); 
```

# r - 如何转换数据框以对其运行卡方测试？

> ID：13551709
> 
> 赞同：0
> 
> 时间：2012-11-25T14:01:07.057
> 
> 标签：r, dataframe, chi-squared

```
 word    freq.x  freq.y
1             1       1
2   1D        1       NA
3   5         2       NA
4   a         5       18
5   a0        8       4
6   about     1       NA
7   all       2       2
8   already   1       NA
9   always    2       2
10  and       4       12
11  another   1       NA 
```

假设我有一个看起来像这样的数据框。它基本上是一个词频表。如何将其转换为表格，以便对其进行独立性卡方检验？

```
chisq.test(data.table) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:27:45.607

`chisq.test(data.table$freq.x, data.table$freq.y)`或者`chisq.test(as.matrix(data.table[c('freq.x', 'freq.y')]))`

# simulate - 模拟键盘按下的程序

> ID：13551710
> 
> 赞同：4
> 
> 时间：2012-11-25T14:01:20.990
> 
> 标签：simulate

我是编程新手，我想编写一个程序（仅供自用），每次运行时都会重复一组预设的键盘操作，谁能给我一些建议？是否有任何应用程序可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T14:14:37.573

有各种各样的程序可以满足您的需求。如果你在 Windows 上，[autoHotKey](http://www.autohotkey.com/)会让你正确。在 Mac 上，它是 automator（内置）或[Keyboard Maestro](http://www.keyboardmaestro.com/main/)来拯救。

它们使用特定领域的语言来创建宏，这比使用更通用的语言从头开始尝试要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:08:05.050

您应该使用全局键盘挂钩。

有 .dll 文件提供对使您能够发送全局击键的功能的访问。

在 Windows 中，它们位于 User32.dll 中，但如果您不熟悉挂钩到 DLL 函数，则可以使用包装器。你需要什么语言？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-10T21:36:55.637

你用什么语言编程？Java 是一种流行的初学者语言，您可以阅读有关 Robot 类的信息。它具有执行“sendKeys”类型的事情的功能。

# c++ - 使用 dsp 和图像处理的线跟随机器人

> ID：13551711
> 
> 赞同：0
> 
> 时间：2012-11-25T14:01:26.393
> 
> 标签：c++, c

我正在参加机器人比赛，我们使用摄像头来跟随路线。

我的算法是：

```
mean filter
--> Gaussian filter
--> find centroid
--> kalman filter
--> do pid for steering
--> do pid for speed of back motor 
```

并且机器人完美地执行了 98%。

我的问题是，经过所有这些过滤后，有时我会在机器人移动时看到摄像头读数出现巨大错误，这会导致机器人出现小幅振荡。

我怎样才能消除这个错误？（这个高速的小错误是个大问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:39:31.180

可能在图像处理可以工作之前设置缓冲区。假设有三个缓冲区（从相机连续保存的图像页面）... page1、page2、page3。使用page1处理图像...然后通过比较page2和page3获得平均图像，并将此结果图像放在page1上...然后再次从page1重复图像处理...依此类推。

# android - GPS 在 Android 上工作时的指南针干扰

> ID：13551715
> 
> 赞同：2
> 
> 时间：2012-11-25T14:01:41.257
> 
> 标签：android, filter, gps, compass-geolocation

我正在为 Android 制作一个应用程序，它使用根据指南针数据旋转的 MapView。

问题是当 GPS 传感器工作时（定位我的位置并将其转换为 MapView），指南针数据会受到太多干扰。如果我把它关掉，指南针又能正常工作了。

我正在使用低通滤波器，但干扰大于 90º，所以它不起作用。

有什么解决办法吗？

这是我的 GPS 类代码：

```
public class LocationController implements LocationListener, GpsStatus.Listener {

private static final String TAG = "LOOKAROUND_LOCATION";

private LocationManager mService;
private LocationProvider mProvider;
private GpsStatus mStatus;
private ArrayList<LocationActivity> mLocationActivities = new ArrayList<LocationActivity>();
boolean mStarted;
private Location mLastLocation;

private static LocationController sInstance;

public static LocationController getInstance(Context context) {
    if(sInstance == null){
        sInstance = new LocationController(context);
    }
    return sInstance;
}

public void addLocationActivity(LocationActivity activity) {
    mLocationActivities.add(activity);
}

public LocationController(Context context){
    mService = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
    mProvider = mService.getProvider(LocationManager.GPS_PROVIDER);
    if (mProvider == null) {
        Log.e(TAG, "Unable to get GPS_PROVIDER");
    }
    mService.addGpsStatusListener(this);
}

public void gpsStart() {
    if (!mStarted) {
        mService.requestLocationUpdates(mProvider.getName(), 1000, 0.0f, this);
        mStarted = true;
    }
    for (LocationActivity activity : mLocationActivities) {
        activity.gpsStart();
    }
}

public void gpsStop() {
    if (mStarted) {
        mService.removeUpdates(this);
        mStarted = false;
    }
    for (LocationActivity activity : mLocationActivities) {
        activity.gpsStop();
    }
}

public void onLocationChanged(Location location) {
    mLastLocation = location;

    for (LocationActivity activity : mLocationActivities) {
        activity.onLocationChanged(location);
    }
}

public void onProviderDisabled(String provider) {
    for (LocationActivity activity : mLocationActivities) {
        activity.onProviderDisabled(provider);
    }
}

public void onProviderEnabled(String provider) {
    for (LocationActivity activity : mLocationActivities) {
        activity.onProviderEnabled(provider);
    }
}

public void onStatusChanged(String provider, int status, Bundle extras) {
    for (LocationActivity activity : mLocationActivities) {
        activity.onStatusChanged(provider, status, extras);
    }

}

public void onGpsStatusChanged(int event) {
     mStatus = mService.getGpsStatus(mStatus);
        for (LocationActivity activity : mLocationActivities) {
            activity.onGpsStatusChanged(event, mStatus);
        }

}

public void shutdownGps(){
    mService.removeGpsStatusListener(this);
    mService.removeUpdates(this);
}

public float getAccuracy(){
    float acc = -1;
    if(mLastLocation != null){
        acc = mLastLocation.getAccuracy();
    }
    return acc;
}

public float getDeclination(){
    float declination = 0;
    if (mLastLocation != null) {
        GeomagneticField geoField = new GeomagneticField(
                (float) mLastLocation.getLatitude(),
                (float) mLastLocation.getLongitude(),
                (float) mLastLocation.getAltitude(),
                mLastLocation.getTime());
        declination = geoField.getDeclination();
    }
    return declination;
} 
```

}

这是 Orientation 类代码：

```
public class OrientationController implements SensorEventListener{
private static final String TAG = "LOOKAROUND_ORIENTATION";
static final float ALPHA = 0.2f;
private SensorManager mSensorManager;
private ArrayList<OrientationActivity> mOrientationActivities = new ArrayList<OrientationActivity>();
Sensor accelerometer;
Sensor magnetometer;
float[] mGravity = null;
float[] mGeomagnetic = null;
float azimut;

private static OrientationController sInstance;

public static OrientationController getInstance(Context ctx) {
    if (sInstance == null)
        sInstance = new OrientationController(ctx);
    return sInstance;
}

public void addOrientationActivity(OrientationActivity activity) {
    mOrientationActivities.add(activity);
}

private OrientationController(Context ctx) {
    mSensorManager = (SensorManager)ctx.getSystemService(Context.SENSOR_SERVICE);
    accelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    magnetometer = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
    mSensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_NORMAL);
    mSensorManager.registerListener(this, magnetometer, SensorManager.SENSOR_DELAY_NORMAL);
}

public void onAccuracyChanged(Sensor arg0, int arg1) {
    // TODO Auto-generated method stub

}

private float[] lowPass( float[] input, float[] output ) {
    if ( output == null ) return input;
    for ( int i=0; i<input.length; i++ ) {
        output[i] = output[i] + ALPHA * (input[i] - output[i]);
    }
    return output;
}

public void onSensorChanged(SensorEvent event) {

    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
            mGravity = lowPass(event.values, mGravity);
    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
            mGeomagnetic = lowPass(event.values, mGeomagnetic);
    if (mGravity != null && mGeomagnetic != null) {
        float R[] = new float[9];
        float I[] = new float[9];
        boolean success = SensorManager.getRotationMatrix(R, I, mGravity,
                mGeomagnetic);
        if (success) {
            float orientation[] = new float[3];
            SensorManager.getOrientation(R, orientation);
            azimut = orientation[0];
            float degAzimut = (float)Math.toDegrees(azimut);
            for(OrientationActivity orientationActivity : mOrientationActivities){
                orientationActivity.onOrientationChanged(degAzimut);
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:27:21.253

一种替代方法是使用 gps 的方位而不是指南针。当然，这只有在您的用户正在移动并且是我对自行车应用程序所做的事情时才有效。如果您的用户没有移动，那么可能会获得 gps 修复，然后将其关闭并返回指南针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:13:17.710

好吧，我一直在研究这个，现在我注意到如果我使用已弃用的方向传感器而不是 API 推荐的加速度计和磁场传感器组合，我的应用程序运行良好且流畅。

所以现在的问题是为什么不推荐使用的方法比最新的方法效果更好？难道我做错了什么？

# ios - ios，提交.IPA文件到应用商店

> ID：13551716
> 
> 赞同：0
> 
> 时间：2012-11-25T14:01:43.050
> 
> 标签：ios

另一个开发人员使用他的配置文件和证书创建了 .ipa 文件。他把 .IPA 文件发给了我。

我可以在我的帐户下提交 app/.ipa 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:23:51.703

不，你不能，因为 App ID 是从另一个帐户生成的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:01:30.180

您不能直接将 .ipa 文件提交到您的帐户。但是，您可以退出 .app 文件并将其提交到苹果商店。

使用您的分发证书重新签署 .app 文件并将其提交到苹果商店。此[链接](http://furbo.org/2008/11/12/the-final-test/)将为您提供帮助。

# php - 列出UID好友数查询数据库

> ID：13551717
> 
> 赞同：1
> 
> 时间：2012-11-25T14:01:44.310
> 
> 标签：php, facebook, facebook-fql

对不起这里的菜鸟问题，但我已经挣扎了一段时间。我正在开发一个应用程序，我试图在朋友开始使用该应用程序时查询我的数据库以添加积分。我一直在使用这个 FQL 命令来寻找使用该应用程序的朋友

```
SELECT uid FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND is_app_user=1 
```

这会将结果显示在一组已经在使用该应用程序的朋友的 UID 中。像这样（所有这些都是测试用户）：

```
Array ( [0] => Array ( [uid] => 100003095627567 ) [1] => Array ( [uid] => 100003256239213 ) [2] => Array ( [uid] => 100003296198341 ) ) 
```

我遇到的问题是我需要将所有 UID 放在一个用逗号分隔的变量中，例如 (UID1, UID2, UID3)，这样我就可以查询数据库了。我已经尝试过 ForEach 命令，但那不起作用。任何帮助或建议的解决方法都会很好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:39:34.807

```
<?php
$a = array (
    array ( 'uid' => '100003095627567' ),
    array ( 'uid' => '100003256239213' ),
    array ( 'uid' => '100003296198341' )
);
var_dump($a);

echo '<br/>'.PHP_EOL;

$v = array();          // (*)
foreach ($a as $u) {   // (*)
    $v[] = $u['uid'];  // (*)
}                      // (*)
var_dump($v);

echo '<br/>'.PHP_EOL;

$uids = join(',', $v); // (**)
var_dump($uids);
?> 
```

输出：

> 数组（3）{[0]=>数组（1）{[“uid”]=>字符串（15）“100003095627567”}[1]=>数组（1）{[“uid”]=>字符串（15 ) "100003256239213" } [2]=> 数组(1) { ["uid"]=> 字符串(15) "100003296198341" } }
> 
> 数组（3）{[0]=>字符串（15）“100003095627567”[1]=>字符串（15）“100003256239213”[2]=>字符串（15）“100003296198341”}
> 
> 字符串（47）“100003095627567,100003256239213,100003296198341”

# java - 序列化VS Gson

> ID：13551719
> 
> 赞同：3
> 
> 时间：2012-11-25T14:01:55.863
> 
> 标签：java, serialization, gson

我目前正在通过 Java 套接字发送数据，但我还没有决定以哪种方式传递这些数据。我一直在使用 Gson，我认为这很棒，所以我目前正在考虑通过套接字传递 json 字符串进行转换。但是由于客户端和服务器都是用 Java 编写的，因此本机 Java 序列化也是一种选择。

看性能和效率，Serialization 还是 Gson 哪个更快？

我发送的数据将具有以下性质（有修改）

```
public class Packet
{
    private int errorType;
    private String errorMessage;

    // Getters and setters..
}

public class Statistics extends Packet
{
    private int score;
    private int winRatio;

    // Getters and setters
} 
```

我将传递不同的数据包子类

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T11:31:55.140

我不知道其他人，但我在 java 中使用了[Protocol Buffer 。](https://developers.google.com/protocol-buffers/)真的很酷。序列化对象的速度极快且数据量小。谷歌使用它与他们的大多数应用程序进行通信。由于您的客户端和服务器都是用 java 编写的，我认为这对您来说是一个不错的选择

[阅读本文](https://developers.google.com/protocol-buffers/docs/javatutorial)以了解如何在 java 中使用 Protocol Buffer

[这](http://code.google.com/p/thrift-protobuf-compare/wiki/Benchmarking)是不同对象序列化工具的一个很好的基准比较。

# html - Docbook 到 HTML 的转换工具（除了玉）

> ID：13551720
> 
> 赞同：3
> 
> 时间：2012-11-25T14:01:56.190
> 
> 标签：html, docbook

除了标准的 Jade 工具和相关的 DSSSL 样式表之外，是否还有其他工具可以将 Docbook 文档（V4 或 V5）转换为 (X)HTML？当然 XSLT 是一种选择。与 Jade（过时的技术）相比，我正在寻找更强大和更方便的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T19:48:51.307

我使用以下（基于 XSLT）取得了不错的效果：

*   Maven插件：
    *   docbkx-maven-插件
    *   maven-jdocbook-插件
*   公众号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:50:59.617

我知道的将 DocBook 转换为 HTML 的唯一选项是 DSSSL 和 XSLT。XSLT 是当今的标准。我不知道您希望从其他工具中得到什么。

# php - 当值相同时，MYSQL JOIN 和 DISTINCT 每次只返回 1 个结果

> ID：13551722
> 
> 赞同：-2
> 
> 时间：2012-11-25T14:02:01.463
> 
> 标签：php, mysql, sql, database

我有一个名为“用户”的表，其中包含以下行的信息（名字等...）：

```
username
----------
mikha
guy
maricela 
```

另一个名为“问题”的表包含以下行：

```
asker
----------
mikha
mikha
maricela
guy
maricela 
```

另一个名为连接的表具有以下行：

```
username1
----------
guy
mikha
mikha 
```

我想选择有关用户“mikha”的信息，包括当他是 questions.asker 和当他是 connections.username1 时的计数。我使用以下查询：

```
SELECT COUNT(questions.asker) AS asking,COUNT(connections.username1) AS following 
FROM users LEFT JOIN questions ON users.username = questions.asker 
LEFT JOIN connections ON users.username = connections.username1 
WHERE users.username = 'mikha' 
```

预期成绩：

```
asking: 2 (as mikha is found 2 times asking)
following:  2 (as mikha is found 2 times following) 
```

实际结果：

```
asking: 4
following: 4 
```

如果我使用`COUNT(DISTINCT questions.asker)`并且`COUNT(DISTINCT connections.username1)`我得到的结果始终为 1，因为它只计算名称一次。我尝试了 GROUP BY 也无济于事。

那么，我怎样才能使用 distinct 来避免重复，同时在所有可用的时间都计算相同的名称，而不仅仅是一个？

我创建了这个[小提琴](http://sqlfiddle.com/#!2/18e2a/1)来自己测试问题。

提前致谢 问候迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:09:21.443

试一试，

```
SELECT  a.*,
        b.totalAsk AS Asking,
        c.totalCount AS following
FROM    users a
        LEFT JOIN
        (
            SELECT  asker, COUNT(*) totalAsk
            FROM    questions
            GROUP BY asker
        ) b ON a.username = b.asker
        LEFT JOIN
        (
            SELECT  username1, COUNT(*) totalCount
            FROM    connections
            GROUP BY username1
        ) c ON a.username = c.username1
WHERE   a.username = 'mikha' 
```

你得到的原因`4`是因为表上有*两个值*与表上的另外*两个值*`questions`相匹配，给它 4\. 尝试计算子查询中的每个值。*`connections`*

 **   [SQLFiddle 演示](http://sqlfiddle.com/#!2/18e2a/3)
*   [SQLFiddle Demo（*建议的替代解决方案 `ypercube`*）](http://sqlfiddle.com/#!2/18e2a/9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T14:23:57.573

您在问题表中有一个 ID，在连接表中有一个 ID？如果你有，你可以使用这个：

```
select
  users.username,
  count(distinct questions.id) as asking,
  count(distinct connections.id) as following
from
  users left join questions on users.username = questions.asker
  left join connections on users.username = connections.username1
where
  username='mikha' 
```

**编辑：**根据您的评论，我认为您需要的是：

```
select
  COUNT(distinct questions.id) AS asking,
  COUNT(DISTINCT CONCAT(c1.username1,c1.username2)) AS following,
  COUNT(DISTINCT CONCAT(c2.username1,c2.username2)) AS followers
FROM
  users LEFT JOIN questions ON questions.asker=users.username
  LEFT JOIN connections c1 ON c1.username1=users.username
  LEFT JOIN connections c2 ON c2.username2=users.username
WHERE
  users.username = 'mikha' 
```

这里唯一的问题是，count by`CONCAT(...)`没有利用索引并且可能很慢。`CONCAT(userA, userB) = CONCAT(userC, userD)`即使`userA<>userC and userB<>userD`. _ 您可以使用`CONCAT(username1, ':', username2)`来避免这种情况，但前提是您确保没有用户名包含`:`字符。但如果可能的话，我建议你在`id`你的连接表中添加一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T14:43:35.047

除了@fthiella 和@Kuya John 的两个正确答案，这里是第三个选项，带有内联子查询：

```
SELECT  u.*,
        (   SELECT  COUNT(*) 
            FROM    questions AS q
            WHERE   u.username = q.asker 
        ) AS asking,
        (   SELECT  COUNT(*)
            FROM    connections AS c
            WHERE   u.username = c.username1
        ) AS following
FROM    users AS u
WHERE   u.username = 'mikha' ; 
```*

# jquery - 用户第一次访问页面时未加载某些内容，仅在 chrome 上

> ID：13551724
> 
> 赞同：0
> 
> 时间：2012-11-25T14:02:06.797
> 
> 标签：jquery, html, google-chrome, loading

这将很难解释，因为它真的很奇怪。但我会尽力而为。

当内容溢出包装器时，我有一个滚动条需要出现。简单的。

但是脚本或我的 html 的一部分在用户第一次访问页面时没有加载。当他第二次访问该页面时，它起作用了。

要查看它，请单击“投资组合”： [http ://chuckbox.net/chromatemp/](http://chuckbox.net/chromatemp/)

-> 第一次，你看不到滚动条 -> 再次点击，你现在会看到它（从现在开始你会一直看到它）

我只有谷歌浏览器才有这个问题。仅供参考，我使用 jscrollpane 作为滚动条，但我认为问题不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:12:25.987

访问该页面显示以下内容：

图像没有`height`设置属性，浏览器必须等待外部 CSS 或图像本身才能知道图像大小。

您有以下代码段：

```
 $(function(){
    $('#side-content').jScrollPane();
    $('#portfolio-content-wrapper').jScrollPane();
  }); 
```

它在加载 DOM 时调用`jScrollPane`插件，但这可能发生在加载外部 CSS 之前。这意味着插件在被调用时无法访问其正确的长度，除非 CSS（或所有图像）已经在浏览器缓存中（显然以后不会读取它）。

要解决这个问题，要么

在图像中包含`height`属性：`<img src=... height=240>`，或

等待外部 CSS 加载：

```
 $(window).load(function(){
    $('#side-content').jScrollPane();
    $('#portfolio-content-wrapper').jScrollPane();
  }); 
```

或者，您可以初始化插件`ready`然后重复`load`（如果插件允许）。

# crop - 裁剪 Dicom 系列

> ID：13551729
> 
> 赞同：0
> 
> 时间：2012-11-25T14:02:26.580
> 
> 标签：crop, dicom

我需要裁剪 Dicom 系列并将结果再次保存为 Dicom 系列，保留有关位置的信息。我的问题类似于[DICOM 文件压缩](https://stackoverflow.com/questions/3196000/dicom-file-compression)，但不幸的是所有答案都是关于压缩而不是裁剪。

另一个问题是原始系列非常大，我无法将其全部加载到计算机的内存中（但如果需要，我可以使用 Unix 服务器进行计算）。

我曾尝试使用 ITK：我复制了示例 DicomSeriesReadSeriesWrite.cxx（在 ITK 软件指南中描述），在编写之前使用了cropimageFilter。问题是使用指令

```
seriesWriter->SetMetaDataDictionaryArray(reader->GetMetaDataDictionaryArray() ); 
```

结果图像位置（0020,0037）的第三维总是设置为0。如果我评论该指令，图像位置是正确的，但图像编号（0020,0013）和SliceLocation（0020,1041）不是，并且结果系列不会像 Osirix 一样加载到某些软件中。

我也尝试过使用 Dicom2 ( [http://www.barre.nom.fr/medical/dicom2/](http://www.barre.nom.fr/medical/dicom2/) )。同样，图像被裁剪得很好，但元数据不一致（它们与原始图像相同）。

我曾尝试使用 Amira，但除了内存问题外，将裁剪数据保存为 dicom 的过程会忽略原始 dicom 标签（例如图像位置为 [-1.#ND/-1.#ND/-1.#ND ]，其他标签也如“系列日期”更改）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:23:10.680

由于您知道标签的原始值以及图像的裁剪方式，因此您可以在保存 dicom 文件之前将标签修改为正确的值。

# java - 如何在 Java 应用程序中使用谷歌建议 API

> ID：13551731
> 
> 赞同：0
> 
> 时间：2012-11-25T14:02:53.287
> 
> 标签：java, google-api-java-client, google-suggest

我想在我的 Java 应用程序中使用 google-suggest-api。

我可以`http://google.com/complete/search?q=Test&output=toolbar`通过 Java 应用程序调用吗？

请给我一个例子。

更新。

下面的代码在我的 java 应用程序中工作，但是当我在 java servlet 中使用时（apache tomcat 6.0 是我的 web 服务器），它返回的结果没有建议内容 "<?xml version="1.0"?><toplevel/>" 为什么？

私人无效getSuggestWord（字符串关键字）{

```
 try {
        String urlName = "http://google.com/complete/search?q=" + keyword + "&output=toolbar";
        System.out.println(urlName);
        URL url = new URL(urlName);
        URLConnection conn = url.openConnection();
        conn.setRequestProperty(
                "User-Agent",
                "Mozilla/5.0 (X11; U; Linux x86_64; en-GB; rv:1.8.1.6) Gecko/20070723                       Iceweasel/2.0.0.6 (Debian-2.0.0.6-0etch1)");
        BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String line = in.readLine();
        in.close();
        System.out.println(line);
    } catch (Exception ex) {
        ex.printStackTrace();
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:28:55.550

我相信你可以。
开始阅读[Apache HTTP 客户端](http://hc.apache.org/httpclient-3.x/)，并查看其中的示例。
一般来说，您需要做的是 - A. 创建 HTTP 连接
B. 发布您的请求
C. 读取结果
D. 解析结果

# java - 尝试更新一个值并在 while 循环中更新后获取它

> ID：13551732
> 
> 赞同：-2
> 
> 时间：2012-11-25T14:03:18.107
> 
> 标签：java, android

当我输出 pW 它给了我原始值

```
 double plateWt = wWeight - bWval;

    while (plateWt > 200 && plate100val > 0) {
        plateWt = plateWt - 200;
        plate100 ++;
        plate100val --;
    }
    while (plateWt > 90 && plate45val > 0) {
        plateWt = plateWt - 90;
        plate45 ++;
        plate45val --;
    }
    while (plateWt > 70 && plate35val > 0) {
        plateWt = plateWt - 70;
        plate35 ++;
        plate35val --;
    }
    while (plateWt > 50 && plate25val > 0) {
        plateWt = plateWt - 50;
        plate25 ++;
        plate25val --;
    }
    while (plateWt > 20 && plate10val > 0) {
        plateWt = plateWt - 20;
        plate10 ++;
        plate10val --;
    }
    while (plateWt > 10 && plate5val > 0) {
        plateWt = plateWt - 10;
        plate5 ++;
        plate5val --;
    }
    while (plateWt > 5 && plateQval > 0) {
        plateWt = plateWt - 5;
        plateQ ++;
        plateQval --;
    }
    Log.i("LOG_TAG", "PlateWeight value: " + plateWt);
    double pw = plateWt;
    warmupPlatesOneTextView.setText(String.valueOf(pw)); 
```

11-25 15:16:16.867: I/LOG_TAG(21569): PlateWeight 值: 5.0 11-25 15:16:16.883: I/LOG_TAG(21569): PlateWeight 值: 10.0 11-25 15:16:17.121: I /LOG_TAG(21569)：PlateWeight 值：45.0 11-25 15:16:17.145：I/LOG_TAG(21569)：PlateWeight 值：45.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:22:13.680

猜测我会说它会在第一次正确运行（导致 5 次）之后，假设全局变量，while 循环将不会执行。在代码中插入断点并单步执行以检查

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T14:19:33.363

放置日志语句并确保正在输入和执行 while 循环并且 watplate10 值？

# jquery - 如何使用jquery从gridview获取文本框值

> ID：13551737
> 
> 赞同：0
> 
> 时间：2012-11-25T14:04:01.113
> 
> 标签：jquery, asp.net, gridview

如何使用 jquery 在单击链接按钮时从 gridview 中输入文本框值，这是我的 gridview

```
 <asp:GridView ID="gvEmployee" runat="server" AutoGenerateColumns="false" GridLines="Both">
            <Columns>
                <asp:TemplateField HeaderText="Email">
                    <ItemTemplate>
                        <asp:TextBox ID="txtEmail" runat="server" Text='<%#Eval("Emailid") %>'></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Name">
                    <ItemTemplate>
                        <asp:TextBox ID="txtName" runat="server" Text='<%#Eval("Name") %>'></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:LinkButton ID="lnkgettext" runat="server" Text="Gettextboxvalue"></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

我尝试了类似的东西

```
 alert($(this).parent("td").parent("tr").find("input:text").val()); 
```

我可以找到文本框的第一个值，但在获取下一个文本框值时遇到问题，即来自第二个 td 的 txtName 请提出建议 还建议您是否有任何使用 javascript 的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T12:56:31.677

愿这能帮助你...

```
 function GVtxtAmount() {
    var GVMaintainReceiptMaster = document.getElementById('<%= GVMaintainReceiptMaster.ClientID %>');

    for (var rowId = 1; rowId < GVMaintainReceiptMaster.rows.length; rowId++) {
        var txtbx = GVMaintainReceiptMaster.rows[rowId].cells[0].children[0];
        alert(txtbx.value);
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:13:46.777

您可以按如下方式使用结束选择器

```
 $( "[ @id *= 'txtEmail']" ).text(); 
```

这是一个很好的链接，关于如何找到像选择这样的元素

```
[http://www.bennadel.com/blog/1003-Cool-jQuery-Predicate-Selectors.htm][1] 
```

你会发现这样

```
 //first find the tr 
 var tr= $(this).parent("td").parent("tr");
 and then use like selector with.

 var Email=$(this).parent("td").parent("tr").find($( "[ @id *= 'txtEmail']" )).val();
 var Name= $(this).parent("td").parent("tr").find($( "[ @id *= 'txtName']" )).val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:28:59.953

试试这个，它应该可以完美运行

```
$('a[id$=lnkgettext]').click(function(){
    var email=$(this).parent('tr').find('input[id=txtEmail]').val();        
    var name=$(this).parent('tr').find('input[id=txtName]').val();
    alert(email+" "+name);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T14:35:15.843

```
$('#<%=lnkgettext.ClientID %>').click(function(){
    var email=$(this).parent('td').parent('tr').find('#<%=txtEmail.ClientID%>').val();        
    var name=$(this).parent('td').parent('tr').find('#<%=txtName.ClientID%>').val();
} 
```

或者

```
$(this).parent("td").parent("tr").each(function(){
    $(this).find('td').each(function(){
        //Do whatever you want, you can use $(this) to get value of current cell
    })
}) 
```

# android - 在android的gridview中显示简单文本时内存不足

> ID：13551740
> 
> 赞同：0
> 
> 时间：2012-11-25T14:04:34.643
> 
> 标签：android, memory, gridview, out-of-memory

我正在尝试显示一个带有文本的网格视图，基本上它将显示一年中的每一天的 7-8 个值。所以是的，它很快就会变得很大。

当我尝试向下滚动并且我在中间时，它会耗尽内存。这就是我正在尝试的方法

```
public View getView(int position, View convertView, ViewGroup parent) {
        dateView = new TextView(mContext);
        dateView.setText(dateArray.get(position));
        dateView.setSingleLine(true);
        // dateview.setLayoutParams(new GridView.LayoutParams(70, 70));
        Log.d("--in get view--", "");
                return dateView;
} 
```

有没有更好的方法来做到这一点，比如可能释放目前没有在屏幕上显示的视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:11:55.110

您应该重用视图。现在您创建`TextView`每次`getView`调用的新实例。但是给了你`convertView`。Android 会为您缓存所有视图并重用它们，因此它不是每行有 1000 个视图，而是使用大约 10-20 个（屏幕上可见的）视图并重用它们。您应该首先检查 if `convertView`is not null 然后将其转换为`TextView`并填充您的文本，否则您需要`TextView`像现在一样手动创建并返回它。查看本教程：[http](http://www.vogella.com/articles/AndroidListView/article.html) : //www.vogella.com/articles/AndroidListView/article.html 5.2 ConvertView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:17:23.323

它正在为每行显示创建新的 dateView，（向上或向下移动）。使用布局膨胀。要使用它创建适配器布局，请在 getview 中捕获它。

```
public static class ViewHolder {
        public TextView textView;       
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        ViewHolder holder;
        try {

            if (convertView == null) {
                vi = inflater.inflate(R.layout.yourTextviewInIt, null);
                holder = new ViewHolder();
                holder.textView = (TextView) vi.findViewById(R.id.textView);                
                vi.setTag(holder);
            } else {
                holder = (ViewHolder) vi.getTag();
            }

            holder.textView.setText(dateArray.get(position));
            holder.textView.setSingleLine(true);

        } catch (Exception e) {

        }
        return vi;
    } 
```

# android - 我无法在手机上获得完整的 JSON 回复，但浏览器正在给我完整的谷歌地图交通 API 回复

> ID：13551741
> 
> 赞同：0
> 
> 时间：2012-11-25T14:04:39.937
> 
> 标签：android, json, google-maps, google-maps-api-3

只需根据UTC更改时间以检查...

但我在移动应用程序上得到了一个不完整的剪辑版本..

`String archiveQuery ="http://maps.googleapis.com/maps/api/directions/json?origin=RV%20College%20Bus%20Stop,%20Mysore%20Road,Bangalore,Karnataka&destination=Malleswaram,Bangalore,Karanataka,India&sensor=假&departure_time=1353850800&mode=transit&alternatives=true";

```
Log.d("%%%%%%%%%%%%%%%%%%%%",archiveQuery);

       String arch=archiveQuery;
      InputStream in = null;
      String queryResult = "";
      try {
       URL url = new URL(arch); 
       HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();
       HttpURLConnection httpConn = (HttpURLConnection) urlConn;
       httpConn.setAllowUserInteraction(false);
       httpConn.connect();
       in = httpConn.getInputStream();
       BufferedInputStream bis = new BufferedInputStream(in);
       ByteArrayBuffer baf = new ByteArrayBuffer(5000000);
       int read = 0;
       int bufSize = 5000000;
       byte[] buffer = new byte[bufSize];
       while(true){
        read = bis.read(buffer);
        if(read==-1){
         break;
        }
        baf.append(buffer, 0, read);
       }
       queryResult = new String(baf.toByteArray());
       } catch (MalformedURLException e) {
        e.toString();
       } catch (IOException e) {
        e.toString();
       } 
```

尝试 {

```
 JSONObject jObject;
            Log.d("%%%%%%%%%%%%%%%%%%%%",queryResult);
           Toast.makeText(getApplicationContext(), "FFFFFFFFFFFFF", Toast.LENGTH_LONG).show();
            jObject = new JSONObject(queryResult);
            JSONArray routes = jObject.getJSONArray("routes");
            String statu  = jObject.getString("status").toString();
            if(statu.equals("OK")){

                int num=routes.length();
                for(int i=0;i<num;i++)
                    {
                JSONArray legs=routes.getJSONObject(i).getJSONArray("legs");
                JSONArray steps=legs.getJSONObject(0).getJSONArray("steps");
                int l=steps.length();
                for(int j=0;j<l;j++)
                    if(steps.getJSONObject(j).getString("travel_mode").toString()!="WALKING")
                        {
                            JSONObject trans=steps.getJSONObject(j).getJSONObject("transit_details");
                            JSONObject line=trans.getJSONObject("line");
                            Log.d("@@@@@@@@@@@@@@@@\n\n\n\n\n\n\n\n\n\n",line.getString("short_name").toString());
                            Toast.makeText(getApplicationContext(), line.getString("short_name").toString(), Toast.LENGTH_LONG).show();

             }
                    }}

            else
            {

           Toast.makeText(getBaseContext(), "Suggestion not available! Please search" +
                "another placeor search in maps", Toast.LENGTH_SHORT).show();}
       }
       catch (JSONException e) {e.toString();}

      `     this is code i am using 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:33:32.440

试试这个：

```
HttpClient client = new DefaultHttpClient();
HttpResponse response = client.execute(new HttpGet(url));
InputStream is = response.getEntity().getContent();
Scanner s = new Scanner(is).useDelimiter("\\A");
String res = s.hasNext() ? s.next() : "";
Log.i("JSON content", res);
// Then parse it 
```

# java - 生成的 JAR 和 EXE 的奇怪行为

> ID：13551742
> 
> 赞同：1
> 
> 时间：2012-11-25T14:04:41.277
> 
> 标签：java, path, nullpointerexception, executable

我正在使用 Jar2EXE 生成在没有安装 java 的 Windows 上运行的 EXE 文件，在我的 java 桌面应用程序中，我必须将文件上传到专用的 FTP 服务器，该文件位于运行 Jar 的同一个目录中。以前我有一些问题来获取 jar 的当前路径，然后我用这一行解决了这个问题：

```
pathToFile = new File(FtpUploder.class.getProtectionDomain().getCodeSource().getLocation().getPath()).getParent()+"\\File.doc"; 
```

我将 jar + File.doc 设置在同一目录中的任何地方及其工作。

当我生成我的 exe 时的问题，前一行抛出 NullpointerException 然后我用 try/catch 包围它，如下所示：

```
 try{
         pathToFile = new File(FtpUploder.class.getProtectionDomain().getCodeSource().getLocation().getPath()).getParent()+"\\File.doc"; 
         }
         catch(NullPointerException e)
         {
             pathToFile = "C:\\File.doc";
             System.out.println("path is null ! lets see the new path : pathToFile ="+pathToFile );
         } 
```

奇怪的问题是文件从“C:\File.doc”成功上传，那么为什么当我设置动态路径时它不起作用？

PS：任何帮助将不胜感激（对不起我的英语）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:13:47.363

在生成的 exe 文件中，您可以简单地调用`System.getProperty("application.home")`来获取生成的 exe 文件的路径。

请参阅“概述”中的[http://www.jar2exe.com/createdexe/integrate 。](http://www.jar2exe.com/createdexe/integrate)

# c++ - 默认纯虚拟实现 C++

> ID：13551743
> 
> 赞同：0
> 
> 时间：2012-11-25T14:04:46.597
> 
> 标签：c++

> **可能重复：**
> [带有实现的纯虚函数](https://stackoverflow.com/questions/2089083/pure-virtual-function-with-implementation)

我有一个基类，它有一个名为`time()`.
我的想法是拥有一个纯虚函数，从它继承的所有类都必须实现。

但是我也想添加默认行为；调用`time()`函数的人需要打印“hello”。
那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:08:35.707

实现此类目标的最简单方法是使用以下内容：

```
 class base {
       virtual void time_impl()=0;
  public:
       void time() {
             //Default behaviour
             std::cout << "Hello\n";
             //Call overridden behaviour
             time_impl();
       }
  };

  class child : public base {
       void time_impl() override {
            //Functionality
       }
  }; 
```

这样，当调用任何子函数时`time`，它会调用基类时间函数，该函数执行默认行为，然后`virtual`调用被覆盖的行为。

## 编辑：

正如 Als 在评论中所说，这称为模板方法模式，您可以在此处阅读：

[http://en.wikipedia.org/wiki/Template_method_pattern](http://en.wikipedia.org/wiki/Template_method_pattern)

尽管对于 C++ 来说这是一个相当混乱的名称（因为模板是别的东西，而“方法”在 C++ 中并不意味着任何东西（而是`member function`）。

## 编辑：

有人评论了override的使用，这是C++11的一个特性，如果你拥有它，从长远来看会省去很多头疼的问题：

[http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final](http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final)

而且，该`_impl`功能应该是私有的，除非您希望用户绕过默认行为，但我认为在大多数用例中这是一个糟糕的设计。

## 工作测试用例

[http://ideone.com/eZBpyX](http://ideone.com/eZBpyX)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:27:50.530

您可以通过使`virtual`函数 not来在基类中提供默认行为`pure virtual`。但是，如果不对孩子的实现施加一些限制，就不能强制实现调用此默认行为（有关详细信息，请参阅@111111 答案）。您应该检查您的要求，看看这是否是一个可接受的解决方案。

# javascript - jquery修改url获取参数

> ID：13551747
> 
> 赞同：6
> 
> 时间：2012-11-25T14:05:11.597
> 
> 标签：javascript, jquery, http, get

我有一个这样的网址：

```
http://google.de/test.php?a=b&c=d&e=f 
```

我知道只需要像这样修改一个 GET 参数：（`c`是“h”而不是“d”）

```
http://google.de/test.php?a=b&c=h&e=f 
```

并重定向到新的网址。所有其他 GET 参数应保持不变。

我要怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T14:35:24.133

如其他答案中所述，我同意最好为此目的使用库。

但是，如果您需要更简单的快速修复，这里有一个基于正则表达式的字符串替换解决方案。

```
var url = "http://my.com/page?x=y&z=1&w=34";

var regEx = /([?&]z)=([^#&]*)/g;
var newurl = url.replace(regEx, '$1=newValue'); 
```

在这里，我将查询字符串键 'z' 替换为 'newVlaue'

看看这个小提琴：http: [//jsfiddle.net/BuddhiP/PkNsx](http://jsfiddle.net/BuddhiP/PkNsx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:11:40.480

如前所述，`window.location.search`将为您提供`?`包含的查询字符串。

然后我会将它们变成一个对象（可能使用像[http://github.com/medialize/URI.js](http://github.com/medialize/URI.js)这样的库），以便更轻松地使用参数。像`var params = { key: value, key1: value1}`

然后，您可以修改所需的值并将键值对转换回查询字符串。

在此之后，您可以使用`window.location`将用户移动到下一页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T14:31:35.000

PHP 的一个鲜为人知的特性是现有参数的后一个命名会覆盖前一个。

有了这些知识，您可以执行以下操作：

```
location.href = location.href + '&c=h'; 
```

简单的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T14:17:20.147

我已经整理了一个非常简单的方法，但它只适用于您想要实现的目标：

```
var url = 'http://google.de/test.php?a=b&c=d&e=f';
var gets =  url.split('.php?');
var ge = gets[1].split('&');
var change = ge[1].split('=');
var change[1] = 'h';
var newUrl = url[0] + '.php?' + ge[0] + '&' + change[0] + '=' + change[1] + '&' + ge[2]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T14:28:31.740

你可以尝试这样的事情：

```
var changed = "h"; // you can vary this GET parameter

var url = "http://google.de/test.php?a=b&e=f&c=" + changed; // append it to the end

window.location = newurl; // redirect the user to the url 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-25T14:40:40.847

因为你的参数可以在任何地方。所以这会很好

```
url="http://google.de/test.php?a=b&c=d&e=f";
url=url.replace(/&c=.*&/,"&c=h&") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-20T17:12:10.640

**设置或更新 URL/QueryString 参数，并使用 HTML history.replaceState() 更新 URL**

你可以尝试这样的事情：

```
var updateQueryStringParam = function (key, value) {
    var baseUrl = [location.protocol, '//', location.host, location.pathname].join(''),
        urlQueryString = document.location.search,
        newParam = key + '=' + value,
        params = '?' + newParam;

    // If the "search" string exists, then build params from it
    if (urlQueryString) {
        keyRegex = new RegExp('([\?&])' + key + '[^&]*');

        // If param exists already, update it
        if (urlQueryString.match(keyRegex) !== null) {
            params = urlQueryString.replace(keyRegex, "$1" + newParam);
        } else { // Otherwise, add it to end of query string
            params = urlQueryString + '&' + newParam;
        }
    }
    window.history.replaceState({}, "", baseUrl + params);
}; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-03-11T15:28:02.783

```
location.href = location.origin+location.pathname+location.search;
```

将 location.search 替换为您的新参数，例如 "?foo=bar&tic=tac"

# magento - Magento - 如何手动更改基本 URL/域？

> ID：13551748
> 
> 赞同：9
> 
> 时间：2012-11-25T14:05:11.560
> 
> 标签：magento

我已经对此进行了搜索，但只能通过管理面板（我无法访问）找到有关如何执行此操作的答案。

我有一个实时的 Magento 安装，我将对其进行一些新的开发。

所以我在主站点 url ( [http://test.mydomain.com](http://test.mydomain.com) )的子域上建立了一个开发站点

我遇到的问题是，在`Mage::run()`引导程序的某个地方，该站点被重定向到 www 子域。

我已更改数据库中的以下 2 条记录：

```
mysql> select * from core_config_data where value like '%mydomain.com%';
| config_id | scope   | scope_id | path                   | value                         |
+-----------+---------+----------+------------------------+-------------------------------+
|         2 | default |        0 | web/unsecure/base_url  | http://test.mydomain.com/     |
|         3 | default |        0 | web/secure/base_url    | http://test.mydomain.com/     | 
```

*   我还确保“local.xml”配置指向新的开发数据库。
*   我还删除了整个 /var/cache
*   我还删除了所有 htaccess 子域重定向
*   我还重新启动了 Apache。

没有运气，仍然重定向。

我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-25T15:45:41.007

所以事实证明问题在于 Apache 没有对该`WEBROOT/var`目录的写入权限，因此 Magento 使用了系统`/tmp`目录中的缓存。（感谢您的提示，**Fiasco Labs**！）

万一有人从谷歌来到这里，我会重申这些步骤......

**如何在 Magento 中手动更改域**

1.  更新您的`core_config_data`表以编辑和的两条`web/unsecure/base_url`记录`web/secure/base_url`
2.  删除内容`WEBROOT/var/cache`
3.  更新/编辑`.htaccess`您可能添加的任何域重定向
4.  重启阿帕奇
5.  确保 Apache 具有写入权限`WEBROOT/var`
6.  如果您创建了一个新数据库，请确保`WEBROOT/app/etc/local.xml` 指向它。
7.  如果您使用的是 Chrome，请清除浏览器缓存！（Chrome 缓存 301s）

就是这样。干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-06T18:27:49.150

尝试使用`FLUSHALL`命令 on `redis-cli`，也许你有一个缓存的数据库。

它对我有用。

# html - 缩小浏览器会导致样式问题

> ID：13551752
> 
> 赞同：10
> 
> 时间：2012-11-25T14:06:08.587
> 
> 标签：html, css, browser, zooming, stylesheet

在 Firefox（和大多数其他浏览器）上缩小时，右侧栏和顶部菜单的布局会中断。侧边栏跳到页面底部。要复制此问题，请[访问该站点](http://the-artifice.com/death-note-morality/)并：

1.  在浏览器视图菜单下找到`Zoom Out`并单击几次。
2.  注意它如何影响菜单和侧边栏。

到目前为止，我发现的唯一解决方案是将侧边栏的宽度减小几个像素，并减小菜单列表项之一的宽度。这个*虚拟*修复的问题在于，当以实际大小查看站点时，可以看到菜单在宽度上缺少几个像素。

当然，必须有更好的解决方案来解决这个问题。你知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:30:55.743

AFAIK，桌面浏览器不使用亚像素分辨率进行布局（WebKit 目前确实有一个未决的实现，但没有关于其他浏览器引擎的消息）。这就是为什么在 CSS 中调整框大小时不能使用像素的小数部分的原因。缩放仅通过一个常见的缩放因子缩放 CSS 属性，并对余数进行四舍五入（我猜它会降低值），以便布局引擎可以使用整数而不是浮点数。

除了尝试选择在缩放级别之间均匀划分的像素值之外，没有硬性解决方案。另一种方法是为容器使用基于百分比的宽度定义——这样，浏览器将为您正确地舍入数字，并且如果两个容器的共同宽度从未超过 100%（您可能需要减去十分之一或由于四舍五入，百分之一），你应该很好地进行所有缩放级别。

不要将这与 CSS3 缩放相混淆，后者确实允许您任意缩放（并且确实会导致边缘不与屏幕像素对齐），因为这不会以任何方式影响布局。

*编辑：*示例：使用百分比调整列的大小

```
#left-area { width: 66.3179%; /* 634/956 */ }
#right-area { width: 33.6820%; /* 322/956 */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:30:22.030

对于顶部菜单，您可以尝试将`div`两个 的包装设置`ul`为`position:relative`，然后使用附加的 CSS 声明将`ul#mega`元素设置为。绝对定位似乎是解决此类问题的一种很好的跨浏览器方式。`position:absolute``right:0`

对于侧边栏，您可以设置`position:absolute`和。`right:0``div#sidebar`

*Safari问题的思考过程1：*

如果顶部菜单中的“更多”菜单宽度不同，请尝试设置`ul#secondary-menu`为`position:relative;z-index:11;`. 然后，您可以通过在 other 的下方扫一扫，向 的`li.mmore`子级添加 padding-left 以`ul#mega`补偿不同缩放时不同的浏览器宽度评估，可以这么说。然后，为了加宽彩色线，将声明从子级转移到自身并相应地调整高度。`li``li``border-bottom``a``li.mmore``li.mmore`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:41:01.567

当您调整浏览器的大小时，像素值必然是四舍五入的，这会导致一个问题，即`sidebar`和`left-area`没有足够的空间来并排放置，您可以看到它下降到页面底部。

的宽度`main-content`是 956px, `left-area`: 634px, `sidebar`: 322px。

634 + 322 = 956。

放大时，值是

633 + 321 = 954 > 953

任何硬编码的像素值都会有这个舍入问题，考虑使用百分比。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-23T18:30:24.290

在 head 标签中尝试给出如下内容：

```
<meta name="viewport" content="width=device-width, initial-scale=0.47, maximum-scale=1.0, user-scalable=1"> 
```

# http - 浏览时写www不起作用？

> ID：13551755
> 
> 赞同：0
> 
> 时间：2012-11-25T14:06:56.907
> 
> 标签：http, url, jsbin

我一直认为导航到`www.jsbin.com`就像`jsbin.com`

现在 - 在我在浏览器中尝试之后：

[http://jsbin.com/](http://jsbin.com/)正在工作

但[http://www.jsbin.com/](http://www.jsbin.com/)不工作。

是否有一个原因 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:09:11.863

使用`www`作为子域来托管域的主网站（在域本身上有重复的内容或重定向）是一种约定，而不是 DNS 的自动功能。

为了`www.example.com`和`example.com`返回同一个网站，需要控制者`example.com`这样做。

# php - 如何将值作为类私有属性传递

> ID：13551761
> 
> 赞同：0
> 
> 时间：2012-11-25T14:08:05.797
> 
> 标签：php

一个类是否有可能接受一个动态值并将其设为私有变量？

例子：

```
class test{

private $var = $x;

private function fromUser($var){
//code here
}

} 
```

我想像`$x`来自用户输入一样动态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:27:20.990

你当然可以。您可以在构造函数中或通过方法动态传递值吗？像工作一样的东西：

```
class Test {

    private $priv;

    function __construct($priv_value) {
        $this->priv = $priv_value;
    }       

    function get_priv() {    
        print $this->priv;
    }   

}

$test = new Test('testing');
$test->get_priv();
// testing 
```

你也可以定义一个`setter`方法？

```
function set_your_private_variable($value_to_set) {
  $this->your_private_variable = $value_to_set;
} 
```

# php - 存储大量用户上传文件的建议做法？

> ID：13551765
> 
> 赞同：3
> 
> 时间：2012-11-25T14:08:28.473
> 
> 标签：php, storage

我正在寻找一种可扩展的方式来存储来自用户的大量文件。我的策略是用随机名称保存它们，并将名称和文件关系保存在数据库中。

我的问题是将文件存储在磁盘上的建议做法是什么？我面临的一个限制是，如果我将它们全部保存在一个目录中，操作系统性能会降低，这是不可以的。

显然，我可以在指定的间隔创建目录并拆分负载，但这只是一种技巧，我确信必须有经过尝试和真正的程序来处理存储。我似乎找不到他们:)

我希望私下托管文件，而不是像 S3 这样的外部存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:12:39.717

由于您已经为每个文件指定了一个*随机*名称，因此将其分成子目录。

假设有一个随机名称：

```
$randomName = 'Akj823daosd03hdx'; 
```

保存到：

```
/Ak/j8/23/daosd03hdx 
```

这将限制每个目录中的节点数。如果你有一个好的随机分布，这应该是均匀分布的。

根据您拥有的文件数量，您也可以以不同的方式分发这些文件，但使用随机名称通常以这种方式直截了当。您可以根据需要改变子目录和最终文件名的长度和数量。

# sms - 电话类错误

> ID：13551766
> 
> 赞同：0
> 
> 时间：2012-11-25T14:08:29.697
> 
> 标签：sms, broadcastreceiver, telephony

我正在从教程中学习，以下代码不起作用：

```
SmsMessage msg[] = Telephony.Sms.Intents.getMessagesFromIntent(intent); 
```

我认为它不再是框架的一部分，但我还没有找到要使用的东西。

我怎样才能收到短信？（这是在 BroadcastReceiver 的 onReceive 方法中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:35:27.800

我找到了解决方案:)

```
Bundle bundle = intent.getExtras();
    SmsMessage[] msgs = null;
    String str = "";
    if (bundle != null) {
        // ---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
        for (int i = 0; i < msgs.length; i++) {
            msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);

            str += msgs[i].getMessageBody().toString();

        } 
```

# sql-server - Transact SQL 中存储过程的并行执行

> ID：13551767
> 
> 赞同：2
> 
> 时间：2012-11-25T14:08:31.087
> 
> 标签：sql-server, sql-server-2008, service-broker

再次大家好，

我想在 SQL Server 2008 中并行执行存储过程。我不会使用任何外部工具（SSIS、CLR）。我决定采用[rusanu 的博客](http://rusanu.com/2009/08/05/asynchronous-procedure-execution/)中提到的方法并尝试使用服务代理。

现在到并行执行 - 我已将 MAX_QUEUE_READERS 设置为 5 并尝试执行几个长时间运行的程序。我注意到，它们仍然是**连续**执行的。我会假设他们在不同的对话中，因此激活应该发生几次。如果我假设错误，请纠正我。

感谢您的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:25:21.303

激活最多每 5 秒启动一个新线程，当且仅当在这 5 秒内有 RECIEVE 到达队列底部（返回空结果集）。因此，要实现 5 个线程，您需要等待 20 秒才能开始，在这 20 秒内，您应该有足够的消息，没有线程会达到空闲状态。

# java - Java 帧动画损害性能

> ID：13551772
> 
> 赞同：0
> 
> 时间：2012-11-25T14:08:52.540
> 
> 标签：java, performance, animation, libgdx

对高效动画相当无知，所以所有帮助表示赞赏！我在 java 中使用 libgdx，我的游戏中有 128px 的水砖需要动画。我目前正在为动画使用 19 帧，但我已将该数字从 2-19 更改为从超过 60fps（上限为 60）到 20fps。

我唯一能想到的就是反复调用以获得正确的纹理，因为我使用的是相当强大的显卡，它可以非常轻松地处理带有更多动画的 java 游戏。如何在这里提高性能？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:48:48.023

使用分析器找出时间花在哪里。您可以使用分析工具，或者只是在代码中添加时间戳（我使用 java.lang.System.nanotime()）检查，并保留直方图以定期打印或打印“异常值”，甚至在屏幕上绘制结果。

虽然您或我可能能够猜出时间的去向，但拥有工具来帮助您实际找出时间花费的地方会更有效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:32:56.900

使用分析器的答案是很好的建议。但是，如果您还没有打包纹理，那么这样做是个好主意，因为这会减少正在使用的纹理数量，进而会减少（相对昂贵的）纹理切换的数量。鉴于您有方形纹理，您可以平铺它们。

这就留下了纹理可以有多大的问题。这取决于设备，[此处](https://stackoverflow.com/questions/8573178/limitation-on-texture-size-android-open-gl-es-2-0)针对 Android 设备进行了讨论。

即使将相对较少数量的纹理打包到单个纹理中，仍然会减少纹理切换的数量。例如，1024px x 1024px 的纹理大小限制将允许您打包 64 个 128x128 纹理。这将满足您对 19 个纹理的要求，而无需纹理切换。同样，512px x 512px 的纹理大小限制将允许您打包 16 个 128x128 纹理，因此只需要一个纹理切换。

# xcode - 使用导航返回按钮放松 segue

> ID：13551778
> 
> 赞同：31
> 
> 时间：2012-11-25T14:09:35.767
> 
> 标签：xcode, storyboard, segue

我已经观看了关于情节提要实现的 Apple 演示视频，其中包含 unwind segues 部分，并使用主视图上的自定义按钮观看了演示。这很好用。

我也在这里看到了同样的事情的一个很好的例子，它也有效。[http://www.techotopia.com/index.php/Using_Xcode_Storyboard_%28iOS_6%29#Unwinding_Storyboard_Segues](http://www.techotopia.com/index.php/Using_Xcode_Storyboarding_%28iOS_6%29#Unwinding_Storyboard_Segues)

但是，我希望有一个从父级（带有主表单数据）到子级（带有高级设置选项）的普通推送序列，然后使用导航栏中的后退按钮而不是使用自定义按钮返回父视图控制器演示中显示的视图。然后，当按下父控制器上的进一步保存按钮时，父控制器会将所有内容保存到 API 服务器。

我似乎无法覆盖导航后退按钮以将其指向我的展开 segue 操作，并且由于后退按钮没有出现在情节提要上，我无法将绿色退出按钮拖到它

我在 viewDidLoad 中尝试了这个来覆盖操作，但它没有工作 [self.navigationItem.backBarButtonItem setAction:@selector(unwindSegueAction:)];

是否可以使用后退按钮来展开 push segue？

到目前为止，我最好的想法是从 viewDidLoad 方法中覆盖后退按钮，但这会删除有角度的后退按钮样式，并且似乎对一个简单问题的粗略破解

```
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"back" style:UIBarButtonItemStyleBordered target:self action:@selector(unwindSegue:)]; 
```

我知道有使用协议和委托的答案，但我有兴趣使用 Xcode4.5 unwind segue 方法

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T11:35:34.173

最后，我不需要展开 segue，因为我仍然可以通过遵循导航控制器来获得对父控制器方法的引用。

`- (void)viewWillDisappear:(BOOL)animated`通过在子控制器的方法中执行以下操作，我能够获得参考

```
NSInteger currentVCIndex = [self.navigationController.viewControllers indexOfObject:self.navigationController.topViewController];

FirstViewController *parent = (FirstViewController *)[self.navigationController.viewControllers objectAtIndex:currentVCIndex];

parent.barcodeType = indexPath.row; 
```

它将设置变量完美地传递回原始控制器。

我还在子控制器顶部添加了对父控制器的导入引用

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-15T01:12:53.017

@Alan 走在正确的轨道上。只需添加一个测试以防止在不返回第一个视图控制器时触发 segue。viewWillDisappear 中的类似内容实际上允许您为后退按钮执行展开转场。您需要通过从类向下拖动到退出图标来创建手动展开转场。请务必在创建后为其命名。

```
UIViewController *vc = self.navigationController.topViewController;
if ([FirstViewController class] == [vc class])
{
    [self performSegueWithIdentifier:@"unwindSegue" sender:self];
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-04T13:57:13.100

I'd like to add a Swift solution that follows @Chuck H suggestion above:

```
let rootVC = self.navigationController!.topViewController
if rootVC.isKindOfClass(TheNameOfYourViewController) {
    performSegueWithIdentifier("yourNamedSegueIdentifier", sender: self)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-16T17:23:59.513

An alternative you might have not considered is to make the parent a delegate of the child and use delegate methods in the child to update the parent.

That way you would bypass the need to add to the navigation unwind, because the parent is already up to date the moment you hit back.

# ruby-on-rails - 使用 nokogiri 抓取 http://www.momondo.com 的困难屏幕

> ID：13551779
> 
> 赞同：1
> 
> 时间：2012-11-25T14:09:50.563
> 
> 标签：ruby-on-rails, ruby, nokogiri

我很难从航班结果中提取总价（css 选择器 = '.total'）。

```
http://www.momondo.com/multicity/?Search=true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=31-12-2012&AD=2&CA=0,0&DO=false&NA=false#Search=true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=31-12-2012&AD=2&CA=0,0&DO=false&NA=false 
```

我收到错误“nil:NilClass nokogiri 的未定义方法‘文本’”。

我的代码

```
desc "Fetch product prices"
task :fetch_details => :environment do
  require 'nokogiri'
  require 'open-uri'
  include ERB::Util

  OneWayFlight.find_all_by_money(nil).each do |flight|
    url = "http://www.momondo.com/multicity/Search=true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=31-12-2012&AD=2&CA=0,0&DO=false&NA=false#Search=true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=31-12-2012&AD=2&CA=0,0&DO=false&NA=false"
    doc = Nokogiri::HTML(open(url))
    price = doc.at_css(".total").text[/[0-9\.]+/]
    flight.update_attribute(:price, price)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:37:32.740

您尝试抓取的内容似乎在页面加载后由 JS 填充。要亲自查看，请检查`div#flight_results`您当前正在解析的文档的内容：

```
url = 'http://www.momondo.com/multicity/?Search=true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=31-12-2012&AD=2&CA=0,0&DO=false&NA=false#Search=true&TripType=oneway&SegNo=1&SO0=KUL&SD0=KBR&SDP0=31-12-2012&AD=2&CA=0,0&DO=false&NA=false'

doc = Nokogiri::HTML(open(url))
doc.at_css('div#flight_results').to_html #=> '<div id="flight_results"></div>' 
```

虽然它超出了这个问题的范围，但您通常可以重建用于填充您所追求的内容的 JS 请求。

# objective-c - UIWebView 不刷新

> ID：13551781
> 
> 赞同：0
> 
> 时间：2012-11-25T14:10:09.523
> 
> 标签：objective-c, ios, uiwebview, webview, refresh

我希望每次应用程序处于活动状态时（通过主屏幕启动或双击主页按钮），我的应用程序中的 web 视图都会刷新。

我的 ViewController.m 看起来像这样：

```
- (void)viewDidLoad
{
NSURL *url = [NSURL URLWithString:@"http://cargo.bplaced.net/cargo/apptelefo/telefonecke.html"];
NSURLRequest *req = [NSURLRequest requestWithURL:url];
[_webView loadRequest:req];

[super viewDidLoad];

}

- (void)viewDidAppear:(BOOL)animated{
[super viewDidAppear:animated];
[_webView reload];
}

-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
if ( inType == UIWebViewNavigationTypeLinkClicked ) {
    [[UIApplication sharedApplication] openURL:[inRequest URL]];
    return NO;
}

return YES;
} 
```

这段代码有什么问题？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:38:15.113

我认为`viewDidAppear:`应用程序获得前景时不会触发；这些 viewWill* 和 viewDid* 方法用于视图转换（模态、推送），与应用程序生命周期事件无关。

您要做的是专门注册前台事件并在收到通知时刷新 web 视图。您将在您的方法中注册通知并在您的`viewDidAppear:`方法中取消注册它们`viewDidDisappear:`。您这样做是为了让您的控制器在它消失时不会继续重新加载 web 视图（或尝试重新加载僵尸实例并崩溃），当它没有向用户显示任何内容时。像下面这样的东西应该可以工作：

```
- (void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];

    [_webView reload]; // still want this so the webview reloads on any navigation changes
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willEnterForeground) name:UIApplicationWillEnterForegroundNotification object:nil];
}

- (void)viewDidDisappear:(BOOL)animated{
    [super viewDidDisappear:animated];

    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationWillEnterForegroundNotification object:nil];
}

- (void)willEnterForeground {
    [_webView reload];
} 
```

# c# - RadTreeView 获取下一个节点

> ID：13551785
> 
> 赞同：0
> 
> 时间：2012-11-25T14:10:54.933
> 
> 标签：c#, telerik, radtreeview

我有一个 RadTreeView，我正在尝试获取 Selected 节点的下一个节点。我正在使用该`node.next`属性，但出现以下错误：

> 为了使用 Prev/Next，您需要将节点添加到绑定到 RadTreeView 的有效节点层次结构中。

有什么帮助吗？

```
RadTreeNode node = new RadTreeNode();
RadTreeNode nodeNext = new RadTreeNode();
node = RadTreeView1.SelectedNode ;
nodeNext = node.Next; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T15:29:06.100

```
RadTreeNode _NextNode=null;

_NextNode=RadTreeView1.SelectedNode.Next; 
```

问候（测试和工作）

# java - 从 libgdx 渲染成 Java 图像，完全脱离屏幕

> ID：13551788
> 
> 赞同：1
> 
> 时间：2012-11-25T14:11:09.603
> 
> 标签：java, image, swing, libgdx

我是新手`libgdx`，并且正在尝试将来自工作游戏引擎的约 100 个对象的（缩略图大小）图像渲染到`Image`可以在应用程序中显示的Java 中`Swing`。

[我可以在LwjglCanvas 中](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/backends/lwjgl/LwjglCanvas.html)很好地在屏幕上渲染它们，然后我可以使用`ScreenUtils.getFrameBufferPixels()`（尝试将 a 传递`BufferedImage`到`getGraphics()`方法`LwjglCanvas.paint(graphics)`中导致没有任何内容被渲染到 中）抓取它们的像素`graphics`，然后将它们放入`BufferedImage`. 但是，这需要一个现有的、显示的`LwjglCanvas`; 我根本无法弄清楚如何在不呈现在屏幕上的情况下进行背景线程缩略图。

附加当前代码片段（需要在画布中显示图像；在通过`Runnable`发布到此画布中执行`canvas.postRunnable()`）。

```
// canvas is an LwjglAWTCanvas
int w = canvas.getGraphics().getWidth();
int h = canvas.getGraphics().getHeight();
BufferedImage bi = new BufferedImage(w, h,
        BufferedImage.TYPE_INT_ARGB);
WritableRaster wr = bi.getRaster();
byte[] bytes = ScreenUtils.getFrameBufferPixels(0, 0, w, h, false);
int[] pixel = new int[4];
for (int y = h-1, b = 0; y >=0 h; y--) {
    for (int x = 0; x < w; x++) {
        pixel[0] = bytes[b++];
        pixel[1] = bytes[b++];
        pixel[2] = bytes[b++];
        pixel[3] = bytes[b++];
        wr.setPixel(x, y, pixel);
    }
}
image = bi; // image is the rendered output image 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:55:39.777

我想你想要一个[FrameBuffer](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/FrameBuffer.html)对象。这些在 OpenGL ES 2.0 及更高版本中受支持，并允许您将 OpenGL 绘制命令运行到屏幕外缓冲区中。

如果 FBO 是“当前的”，我认为`getFrameBufferPixels`可以与 FBO 合作，但我被告知不是。（似乎这些原语适用于 OpenGL，所以我不确定 libGDX 或 OpenGL ES 中是否缺少某些内容。请参阅[FBO 渲染到纹理和 glReadPixels](https://stackoverflow.com/questions/3949112/fbos-render-to-texture-and-glreadpixels)）。

# autocomplete - 如何实现类似于 jQuery UI 自动完成的 Dojo 自动完成？

> ID：13551790
> 
> 赞同：7
> 
> 时间：2012-11-25T14:11:35.077
> 
> 标签：autocomplete, dojo

美好的一天，使用 JSP 和 jQuery UI 我已经成功地实现了文本输入的自动完成功能。自动完成数据从数据库中检索，并在服务器端通过“q”参数进行过滤。它返回包含查询字符串的所有项目：

```
SELECT name FROM organization WHERE name LIKE '%q%'; 
```

有没有办法对 Dojo 做同样的事情？我遵循了这个[Dojo 教程](https://dojotoolkit.org/reference-guide/1.8/dojox/data/QueryReadStore/example.html)，但是当我在文本输入中输入例如 letter 时`a`，文本输入中的文本被替换为第一个建议`Ibam`，而我的第一个字母`a`被替换为`I`from word `Ibam`。它的工作原理很奇怪。请指教。

沃杰科技

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-25T14:32:42.290

我会推荐[`dijit/form/ComboBox`](http://livedocs.dojotoolkit.org/dijit/form/ComboBox).[`dojo/store/JsonRest`](http://livedocs.dojotoolkit.org/dojo/store/JsonRest)

看看它的实际效果：http: [//jsfiddle.net/phusick/N8DqG/](http://jsfiddle.net/phusick/N8DqG/)

# javascript - 输入中的十进制数字格式

> ID：13551797
> 
> 赞同：2
> 
> 时间：2012-11-25T14:12:27.320
> 
> 标签：javascript, forms, string-formatting, number-formatting

目前我在格式化小数方面遇到问题。

在文本框的 blur 事件上，如果用户输入：

```
1) 1    -> this should be converted to 001.00
2) 2.5  -> this should be converted to 002.50
3) .5   -> this should be converted to 000.50
4) 12.4 -> this should be converted to 012.40 
```

在离开输入或失去焦点时，所有输入都应转换为相同的格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:32:55.577

```
<input type="text" onblur="formatDecimal(this)" />

<script type="text/javascript">
    function formatDecimal(input) {
        var val = '' + (+input.value);
        if (val) {
            val = val.split('\.');
            var out = val[0];
            while (out.length < 3) {
                out = '0' + out;
            }
            if (val[1]) {
                out = out + '.' + val[1]
                if (out.length < 6) out = out + '0';
            } else {
                out = out + '.00';
            }
            input.value = out;
        } else {
            input.value = '000.00';
        }
    }
</script> 
```

# ef-code-first - Nopcommmerce 表生成

> ID：13551800
> 
> 赞同：1
> 
> 时间：2012-11-25T14:12:45.863
> 
> 标签：ef-code-first, nopcommerce

谁能解释一下 nopcommerce 如何`DbSet`用于其实体？

我想知道如何`NopObjectContext`知道连接字符串中提供的数据库中的表。

我的理解是，在 Code first 中，对于继承自 的类，`DbContext`每个实体都必须有 getter 和 setter DbSet。

但是我在`NopObjectContext`. 我正在使用使用 Code First 的 2.6 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:29:08.637

您在 Nop.Data.Mapping 中的类定义了表和属性。

```
public partial class CustomerMap : EntityTypeConfiguration<Customer>
{
    public CustomerMap()
    {
        this.ToTable("Customer");
        this.HasKey(c => c.Id);
        this.Property(u => u.Username).HasMaxLength(1000);
        this.Property(u => u.Email).HasMaxLength(1000);
        this.Property(u => u.Password);
        this.Property(c => c.AdminComment).IsMaxLength();
        this.Property(c => c.CheckoutAttributes).IsMaxLength();
        this.Property(c => c.GiftCardCouponCodes).IsMaxLength();

        this.Ignore(u => u.PasswordFormat);
        this.Ignore(c => c.TaxDisplayType);
        this.Ignore(c => c.VatNumberStatus);

        this.HasOptional(c => c.Language)
            .WithMany()
            .HasForeignKey(c => c.LanguageId).WillCascadeOnDelete(false);

        this.HasOptional(c => c.Currency)
            .WithMany()
            .HasForeignKey(c => c.CurrencyId).WillCascadeOnDelete(false);

        this.HasMany(c => c.CustomerRoles)
            .WithMany()
            .Map(m => m.ToTable("Customer_CustomerRole_Mapping"));

        this.HasMany(c => c.DismissedAttributeNotices)
            .WithMany()
            .Map(m => m.ToTable("ProductAttribute_DismissedAttributeNotices"));

        this.HasMany<Address>(c => c.Addresses)
            .WithMany()
            .Map(m => m.ToTable("CustomerAddresses"));
        this.HasOptional<Address>(c => c.BillingAddress);
        this.HasOptional<Address>(c => c.ShippingAddress);
        this.HasOptional<Customer>(c => c.SelectedSalesRep);
    }
} 
```

客户在 Nop.Core.Domain.Customers.Customer.cs 下定义。它的所有属性都将映射到表。您需要在此处添加的唯一部分是要使用的表、要忽略的属性、关系和字段的属性（字符串长度或精度）。

# java - 侦听 HTTP 请求的正确方法是什么？

> ID：13551803
> 
> 赞同：5
> 
> 时间：2012-11-25T14:13:06.573
> 
> 标签：java, http, webserver

我编写了一个非常简单的、相当低级的 HTTP（嗯，HTTP 的一部分）服务器作为练习，以更熟悉我一直在避免的整个 Web 事物。它在第一次尝试时工作得相当好（我不会推荐任何人实际使用它，但它会按照我的指示去做）。现在的问题是 GET 操作失败了很多（刷新有帮助，但它不是很好 - 下面的详细信息），我认为这是因为我读取请求的方式（我相当确定我的路线有效）：

```
void start()
{
    //...
    try(ServerSocket webSock = new ServerSocket(47000) {
    //...
        while(running) {
           try {
               Socket sock = webSock.accept();
               //read/write from/to sock 
           }
           //...
           Thread.sleep(10);
        }
    } 
} 
```

（完整代码在这里： http: [//pastebin.com/5B1ZuusH](http://pastebin.com/5B1ZuusH)）

我不确定我到底做错了*什么。*

我确实得到了错误：

```
This webpage is not available
The webpage at http://localhost:47000/ might be temporarily down or it may have moved permanently to a new web address.
Error 15 (net::ERR_SOCKET_NOT_CONNECTED): Unknown error. 
```

相当多（整个页面不加载），有时脚本或图像也不加载。如果需要，我可以发布整个代码，但其余大部分都是样板文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T14:32:08.670

[另一个更新]

好的，澄清我的回答，这是一个简单的 Web 服务器，它显示了如何读取 GET 请求。请注意，它处理同一连接中的多个请求。如果连接关闭，则程序退出。通常，虽然我可以在连接关闭和程序退出之前从同一个 Web 浏览器发送多个请求。这意味着您不能使用流结束作为消息结束的信号。

请注意，我从不将手写的网络服务器用于任何真实的事情。我最喜欢的是 Tomcat，但其他框架也很好。

```
public class MyWebServer
{
   public static void main(String[] args) throws Exception
   {
      ServerSocket server = new ServerSocket(47000);
      Socket conn = server.accept();
      BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));

      // don't use buffered writer because we need to write both "text" and "binary"
      OutputStream out = conn.getOutputStream();
      int count = 0;
      while (true)
      {
         count++;
         String line = reader.readLine();
         if (line == null)
         {
            System.out.println("Connection closed");
            break;
         }
         System.out.println("" + count + ": " + line);
         if (line.equals(""))
         {
            System.out.println("Writing response...");

            // need to construct response bytes first
            byte [] response = "<html><body>Hello World</body></html>".getBytes("ASCII");

            String statusLine = "HTTP/1.1 200 OK\r\n";
            out.write(statusLine.getBytes("ASCII"));

            String contentLength = "Content-Length: " + response.length + "\r\n";
            out.write(contentLength.getBytes("ASCII"));

            // signal end of headers
            out.write( "\r\n".getBytes("ASCII"));

            // write actual response and flush
            out.write(response);
            out.flush();
         }
      }
   }
} 
```

[来源回应]

> 侦听 HTTP 请求的正确方法是什么？

对于我们大多数人来说，正确的方法是使用设计良好的 Web 服务器框架，例如[Tomcat](http://tomcat.apache.org)、[Jetty](http://jetty.codehaus.org/jetty/)或[Netty](https://netty.io)

> 作为练习以更熟悉整个网络事物

但是，如果这是学习 HTTP 的学术练习，那么首先要做的是学习 HTTP 协议（​​参见[http://www.w3.org/Protocols/rfc2616/rfc2616.html](http://www.w3.org/Protocols/rfc2616/rfc2616.html)）。我很确定您没有这样做，因为您的代码没有尝试识别起始行、标题等来确定 GET 请求何时完成并且发送响应是有意义的。

[更新]

凉爽的。您已经了解了 TCP 如何面向流并且不保留消息边界。是的，应用程序必须处理。这是最后的想法——如果你曾经`readLine`阅读起始行和标题，你可能会让你的实验相当可靠地工作——只有 GET 请求才会提醒你。当你得到一个空行时，请求就完成了。这将导致缓冲阅读器在正确的时间阻塞，以便您获得所有内容。

这不适用于 POST 等，因为您随后需要解析 Content-Length 标头并读取一些字节数。

希望当您意识到正确可靠地执行此操作涉及多少时，此实验将使您更加欣赏 Jetty - 所以我认为这是一项值得的努力。

# visual-studio - Visual Studio 2012 - 如何使当前选择成为启动项目的默认选项

> ID：13551804
> 
> 赞同：3
> 
> 时间：2012-11-25T14:13:23.720
> 
> 标签：visual-studio, settings

每次我创建一个包含多个项目的解决方案时，我都必须转到该解决方案的属性并将启动项目更改为当前选择。有没有办法让它成为默认选项？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-10T17:31:46.460

工具 -> 选项... -> 项目和解决方案 -> 构建和运行 -> 然后在菜单右侧搜索“对于新解决方案，使用当前选定的项目作为启动项目”。

# network-protocols - 在使用 WireShark 进行 Google Hangout 对话期间，您将如何捕获 RTP 流？

> ID：13551812
> 
> 赞同：3
> 
> 时间：2012-11-25T14:14:19.797
> 
> 标签：network-protocols, wireshark

所以我试图捕获 RTP 流并计算抖动。我知道谷歌环聊使用多种协议。所以我这样做的方式是首先过滤UDP数据包，然后解码为RTP。当我进行 RTP 流分析时，它显示抖动为 0。还有其他方法可以做到这一点吗？

我的目标是仅捕获 RTP 数据包并计算 google + hangout 会话期间的抖动。

# javascript - 如何在 Javascript 中取整整数值

> ID：13551814
> 
> 赞同：3
> 
> 时间：2012-11-25T14:14:41.017
> 
> 标签：javascript, jquery

听起来很奇怪，但我现在需要这个。实际上我有一个这样的数组：

```
var arr = new Array(123, 432, 98, 227, 764);
var max = Math.max.apply(Math, arr); //calculate max = 764
var min = Math.min.apply(Math, arr); //calculate min = 123 
```

现在我必须根据最小值和最大值制作几个范围：

```
 100 - 200 // as the min is 123 (range 100 ~ 200) 
 201 - 300
 301 - 400
 401 - 500
 501 - 600
 601 - 700
 701 - 800 // as the min is 764 (range 700 ~ 800) 
```

制定范围只是一个循环问题。但是计算我实现的最小值和最大值的范围：

```
function integerRound (digit) {
    var i = 0, msb; 
    while( digit > 0 ) {
      msb = digit % 10;
      digit = Math.floor( digit / 10 );
      i++;
    }
    while ( i > 1 ) {
      msb = msb + '0';
      i--;
    };
    return msb;
}

var lowerMin = integerRound(min); // 100
var lowerMax = integerRound(max); // 700 
```

我的问题是 - 在 javascript 或 jQuery 中有什么好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T14:20:05.620

鉴于这个用例本质上是一个世纪的分类，是否有一些原因你不能简单地删除无关的部分：

```
century = value - (value % 100) 
```

如果您确实需要范围从 201 开始，依此类推，则只需在执行之前减去一个，然后返回一个以进行更正。

```
value -= 1;
century = value - (value % 100) + 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T14:18:37.923

这个怎么样：

```
var max = parseInt(Math.max.apply(Math, arr) / 100) * 100;
var min = parseInt(Math.min.apply(Math, arr) / 100) * 100 
```

首先将数字除以 100 以仅得到小数点前的有效数字，使用 parseInt 截断（删除小数点后的所有内容，无效数字），然后再次乘以 100 以将值恢复到正确的量级。

# expect - 无法使用自动预期

> ID：13551815
> 
> 赞同：4
> 
> 时间：2012-11-25T14:14:41.580
> 
> 标签：expect, autoexpect

我是第一次使用 autoexpect。我不确定使用它的参数应该是什么。我执行了 autoexpect 命令，并且有连续的消息“autoexpect 已启动，文件是 script.exp”。如果我执行 ssh 什么都不会发生。

```
autoexpect started, file is script.exp
autoexpect started, file is script.exp
autoexpect started, file is script.exp
autoexpect started, file is script.exp 
```

谁能帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T04:58:18.997

`autoexpect`将根据您的操作创建一个可以重复使用的期望脚本。

这意味着，第一次您必须手动执行所有操作。下次您可以使用生成的文件`script.exp`重复相同的操作。您可以修改 script.exp 以使其更通用。

要退出自动预期，只需`exit`在所有操作完成后键入。

```
MBP:~ user$ ./autoexpect 
autoexpect started, file is script.exp
bash-3.2$ exit
exit
autoexpect done, file is script.exp
MBP:~ user$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T01:58:19.483

我有同样的问题。我正在使用 bash 并且在 bash 中有很多初始配置。可能是一些启动配置 bash shell 影响了 autoexpect。我调用了 tcsh，然后调用了 autoexpect。autoexpect 在 tcsh 中运行良好，因为它没有任何启动配置。

调用 tcsh 并再次尝试。一旦我调用 tcsh 它就对我有用

# iphone - iOS - SQLite 批量插入错误

> ID：13551816
> 
> 赞同：1
> 
> 时间：2012-11-25T14:14:43.967
> 
> 标签：iphone, ios, xcode, cocoa-touch, sqlite

我需要在我的数据库中插入大量记录，但出现错误：

```
Prepare-error library routine called out of sequence 
```

这是我的代码：

```
NSString *databaseName = @"DB.sqlite";
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    NSString *databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

    sqlite3 *concertsDB;
    const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &concertsDB) == SQLITE_OK)
    {
        sqlite3_exec(concertsDB, "BEGIN TRANSACTION", 0, 0, 0);
        const char *sqlStatement = "INSERT INTO concertsData VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
        sqlite3_stmt *compiledStatement;

        if (sqlite3_prepare_v2(concertsDB, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
            int hasError;

            for (int i=0; i<[events count]; i++) {

                sqlite3_bind_text(compiledStatement, 1, [[[events objectAtIndex:i] title] UTF8String], -1, SQLITE_TRANSIENT);
                sqlite3_bind_int(compiledStatement, 2, [[[events objectAtIndex:i] date] timeIntervalSince1970]);

                sqlite3_bind_text(compiledStatement, 3, [[[events objectAtIndex:i] time] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_bind_text(compiledStatement, 4, [[[events objectAtIndex:i] shortDesription] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_bind_text(compiledStatement, 5, [[[events objectAtIndex:i] conductor] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_bind_text(compiledStatement, 6, [[[events objectAtIndex:i] location] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_bind_text(compiledStatement, 7, [[[events objectAtIndex:i] durations] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_bind_text(compiledStatement, 8, [[[events objectAtIndex:i] works] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_bind_text(compiledStatement, 9, [[[events objectAtIndex:i] solists] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_bind_text(compiledStatement, 10, [[[events objectAtIndex:i] fulltext] UTF8String], -1, SQLITE_TRANSIENT);                    

                sqlite3_bind_text(compiledStatement, 11, [[[[events objectAtIndex:i] concertUrl] absoluteString] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_bind_text(compiledStatement, 12, [[[[events objectAtIndex:i] buyUrl] absoluteString] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_bind_text(compiledStatement, 13, [[[events objectAtIndex:i] imageName] UTF8String], -1, SQLITE_TRANSIENT);

                if (sqlite3_step(compiledStatement) != SQLITE_DONE) {
                    hasError=1;
                    NSLog(@"Prepare-error %s", sqlite3_errmsg(concertsDB));
                }

                sqlite3_clear_bindings(compiledStatement);
            }
            sqlite3_reset(compiledStatement);
            if( hasError == 0 ) {
                sqlite3_exec(concertsDB, "COMMIT", 0, 0, 0);
            }
            else {
                sqlite3_exec(concertsDB, "ROLLBACK", 0, 0, 0);
            }

        }

        sqlite3_close(concertsDB);
    } 
```

谁能告诉我可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:13:15.977

将呼叫替换为`sqlite3_clear_bindings`呼叫`sqlite3_reset`。然后将当前调用替换为对`sqlite3_reset`的调用`sqlite3_finalize`。

`sqlite3_reset``sqlite3_step`如果您需要再次重用该语句，则必须在调用 to 之后调用。

`sqlite3_finalize`当你完全完成它时，必须调用它。

`sqlite3_clear_bindings`不需要您的调用，因为您在每次循环迭代中设置了每个绑定变量。

# objective-c - 用于检查 tabbarcontroller 顶部更新的启动画面

> ID：13551824
> 
> 赞同：0
> 
> 时间：2012-11-25T14:15:48.263
> 
> 标签：objective-c, uiviewcontroller, uitabbarcontroller, splash-screen

我试图在我的应用程序中的 tabbarcontroller 顶部加载启动画面。请不要引用苹果 HIG，此闪屏的目的是检查连接，然后检查内容更新。

在更新 Splashscreen -> update view -> tabbarcontroller 的情况下会做什么 Splashscreen -> tabbarcontroller

我从闪屏视图控制器呈现更新视图模式。

每次启动应用程序以及应用程序从后台返回时，我都无法加载启动画面。

在我使用的 appdelegate 上：

```
self.firstViewController = [[FirstViewController alloc]
                            initWithNibName:nil
                            bundle:NULL];
self.secondViewController = [[SecondViewController alloc]
                             initWithNibName:nil
                             bundle:NULL];
self.thirdViewController = [[ThirdViewController alloc]
                            initWithNibName:nil
                            bundle:NULL];
NSArray *twoViewControllers = [[NSArray alloc]
                               initWithObjects: self.firstViewController, self.secondViewController, self.thirdViewController, nil];
self.tabBarController = [[UITabBarController alloc] init];

[self.tabBarController setViewControllers:twoViewControllers];
self.window.rootViewController = self.tabBarController;
self.ecranDemarrage = [[SplashViewController alloc] init];
    self.ecranDemarrage.showsStatusBarOnDismissal = YES;
    self.ecranDemarrage.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self.window makeKeyAndVisible];
    [self.tabBarController presentModalViewController:self.ecranDemarrage animated:YES]; 
```

好吧，启动画面显示在 tabbarcontroller 之后......这不是一个好点。

我试图在 applicationdidbecomeactive 通知上启动，但总是先显示 tabbarcontroller，然后是启动画面。

在使窗口可见之前，我尝试将启动画面视图添加为子视图，但也没有太大成功。

有人可以指出我正确的方向，以便先加载启动画面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:47:38.243

1-你加了`Default.png`& `Default@2x.png`？？如果是，则启动画面会自动显示

2-您也可以这样做：（通常这是在您在应用程序启动后执行某些功能时完成的，例如您想从 Web 服务器下载数据或设置一些应用程序设置等）

将您添加`splashcontroller`为`rootcontroller`in `AppDelegate`，然后将 TabbarController 呈现为模态或再次在 SpalshController 中获取 AppDelegate 的引用并将其更改`RootViewController`为`TabbarController`.

# windows - bat文件中的转义百分比

> ID：13551829
> 
> 赞同：63
> 
> 时间：2012-11-25T14:16:22.147
> 
> 标签：windows, batch-file, cmd, escaping

我试图使用批处理文件编写 VPN 拨号器/断开器，但我被卡住了。经过一番调查，我发现`%`密码中的存在打得不好。

这是代码

```
@echo OFF
SET SWITCHPARSE1=%1
SET SWITCHPARSE2=%2
REM echo %SWITCHPARSE1%
SHIFT
SHIFT
IF "SWITCHPARSE1" == "" goto Usage
IF "SWITCHPARSE1" == "/?" goto Usage
IF "SWITCHPARSE2" == "" goto Usage
IF "SWITCHPARSE2" == "/?" goto Usage

IF "%SWITCHPARSE1%" == "sl" (
    IF "%SWITCHPARSE2%" == "conn" (
        echo "inside sl conn"
        rasdial sl employee1 K%%Pxev3=)g:{#Swc9
        goto end
    ) ELSE IF "%SWITCHPARSE2%" == "disconn" (
        rasdial sl /disconnect
        goto end
    ) ELSE (
        goto Usage
    )
) ELSE IF "%SWITCHPARSE1%" == "off" (
        IF "%SWITCHPARSE2%" == "conn" (
        rasdial Office employee1 office123
        goto end
    ) ELSE IF "%SWITCHPARSE2%" == "disconn" (
        rasdial Office /disconnect
        goto end
    ) ELSE (
        goto Usage
    )
) ELSE (
    goto Usage
)

:Usage
echo "Usage is vpnconn.bat /[sl|off] /[conn|disconn]"

:end 
```

在上面的脚本中，我试图`%`使用`%`（即`%%`，从[这里](http://www.robvanderwoude.com/escapechars.php)引用）进行转义，但是 bat 脚本给出的**g:{#Swc9 在此时是出乎意料的。**.

为了进一步根本原因，我尝试在不同的批处理文件中加倍`%%`（转义`%`），它起作用了：

```
@echo OFF
rasdial sl employee1 K%%Pxev3=)g:{#Swc9 
```

为什么相同的脚本在集成以处理不同的连接时不起作用？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-25T15:58:05.513

二**%%**等于一**%**。没错（但仅在脚本中，而不是直接在 cmd 中），无需使用转义运算符**^**。

但是您缺少 agrupation 运算符**）**。那就是问题所在; IF在您的命令下找到**)**时关闭。

用这个：

```
rasdial sl employee1 K%%%%Pxev3=^)g:{#Swc9 
```

# c++ - 二叉树递归插入错误

> ID：13551830
> 
> 赞同：0
> 
> 时间：2012-11-25T14:16:32.923
> 
> 标签：c++, pointers, tree, binary-tree

我有这种方法可以在二叉树中添加一个节点，在示例中，我首先添加了 4，它可以正常工作，然后当我添加 10 时，我得到了这个： ![在此处输入图像描述](../Images/7feaed4603a9bb23fd8252a6ae8d87ec.png)

它首先检测`top != NULL`哪个是正确的，因为有 4 个，然后用`top->droite`in 参数（即`top->right`）调用方法。当它没有检测`top`为 NULL 并跳过时，它就变成了您在屏幕截图中看到的内容。正如您所看到的，变量为 NULL。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:21:04.207

通过查看其余的调试信息，我们可以看到新节点的左右指针是`0xcdcdcdcd`，据我所知，这是 Visual Studio 中调试构建的未启动指针的标准值。

您的错误不是初始化新节点的指针。这是正在发生的事情：

开头`top`是`NULL`，然后插入`nbr`为 4 的节点。新顶部是一个`nbr`为 4 的节点，但两个指针基本上指向垃圾。

当您尝试插入 10 时，它将正确地将 10 与 4 进行比较，并尝试在 4 的右子树中插入 10。此右子树未初始化，因此出现错误。

解决它的一种方法是使您的代码如下所示：

```
static void insertion(Noeud *&top, Noeud *newNoeud) {
   if (top == NULL) {
       top = newNoeud;
       top->droite = NULL;
       top->gauche = NULL;
   } else if (newNoeud->nbr < top->nbr)
       insertion(top->gauche, newNoeud);
   else
       insertion(top->droite, newNoeud);
} 
```

这是一个完整的例子：http: [//ideone.com/5TDD49](http://ideone.com/5TDD49)

# asp.net - 如何在 ASP.NET 中动态创建网页

> ID：13551832
> 
> 赞同：-1
> 
> 时间：2012-11-25T14:16:48.927
> 
> 标签：asp.net

在社交网站中，多个用户可以一次打开他们的个人资料详细信息。

如何使用 Asp.net 实现此功能。我希望为此我需要动态创建个人资料网页。

如何为用户创建动态网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:58:50.217

从广义上讲，您将创建几个“页面模板”，其中包含将根据所需内容动态更改的某些元素。

您可能想查看[http://www.asp.net/web-pages/tutorials/introducing-aspnet-web-pages-2/getting-started](http://www.asp.net/web-pages/tutorials/introducing-aspnet-web-pages-2/getting-started)上的教程，它可以让您了解这些事情是如何完成的. 您可以返回更具体的问题。

# database - 国际化和 NLS 参数

> ID：13551835
> 
> 赞同：0
> 
> 时间：2012-11-25T14:17:06.023
> 
> 标签：database, oracle

我正在尝试了解 Oracle 产品中的国际化支持、字符集编码和转换。不幸的是，我读到更多的困惑出现在我的脑海中。我希望得到你的帮助。

以下是我的问题：

1.) 考虑到 NLS 参数和字符集转换，有人可以逐步解释客户端和服务器如何相互通信吗？我知道网上有这样的话题，但对我来说还不够清楚。

2.）如果我是正确的，在服务器和客户端是不同机器的情况下，NLS_LANG 必须分别设置吗？

3.) 如何在服务器机器上设置 NLS_LANG？和客户端一样吗？

4.) 在 Orcale 分支的注册表、系统变量（使用控制面板）和命令行中的“set”命令中设置 NLS_LANG 有什么区别？

5.) 字符集转换是如何完成的？我在某处读过“如果客户端和服务器上的字符集相同，Oracle 直接存储客户端提交的任何内容。不涉及转换”所以有没有像“服务器机器上的 NLS_LANG”与“客户端机器上的 NLS_LANG”还是“服务器机器上的 NLS_LANGUAGE”与“客户端机器上的 NLS_LANG”？

6.) 是什么情况：服务器将它的 NLS 信息（NLS_LANG 或 NLS_LANGUAGE？）发送到客户端或 ratcher clinet 向服务器发送 NLS_LANG 设置？

7.) 转换在哪里完成？在客户端系统或服务器上？

提前感谢所有帮助！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:57:32.190

NLS_LANG 应设置为客户端应用程序的字符集。这通常是您的操作系统使用的字符集。对我来说（荷兰语）Windows 使用的是[Windows 1252](http://en.wikipedia.org/wiki/Windows-1252 "窗户 1252")编码，所以我将客户端上的 NLS_LANG 设置为 WE8MSWIN1252。

1）对不起，一步一步的解释将是一个长篇故事，只是另一个话题

2) 服务器 NLS_LANG*仅*在您直接在服务器上运行 SQL*Plus 时使用。在这种情况下，服务器就像任何其他客户端一样。

3）见2），服务器上的NLS_LANG大部分时间是无关紧要的。

4）我不确定确切的优先级，但我相信“SET”命令行是最强的。如果未设置，则使用控制面板环境变量。当这些不存在时，使用注册表，最后，当注册表为空时，使用 US7ASCII。

5) 在客户端的 NLS_LANG 和服务器上的 NLS_CHARACTERSET 之间进行比较。后者可以用 来验证`SELECT VALUE FROM V$NLS_PARAMETERS WHERE PARAMETER = 'NLS_CHARACTERSET`。

6）见7，服务器的NLS_CHARACTERSET发送给客户端，反之亦然。

7) 我曾经读到，如果客户端上有相应的转换表可用，则转换是在客户端完成的。如果没有足够的信息可用，则在服务器上完成转换。

# bash - bash羊群：为什么是200？

> ID：13551840
> 
> 赞同：36
> 
> 时间：2012-11-25T14:17:35.123
> 
> 标签：bash, flock

关于那个线程： [bash羊群：如果无法获得锁则退出](https://stackoverflow.com/questions/7057234/bash-flock-exit-if-cant-acquire-lock/7057385#7057385)

如果有人可以向我解释“200”代表什么，我将不胜感激。

我读过关于flock 的文章，如果指定一个文件描述符似乎是200，但是这个数字有什么好处呢？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-25T14:23:47.773

数字 200 没有什么特别之处。它恰好是`flock`命令手册页中使用的示例；它恰好是一个很大的数字，因此它不太可能与您在脚本期间打开的任何其他文件的文件描述符发生冲突。

在您的评论中，您询问：

```
( 
  flock -e 200
  echo "In critical section"
  sleep 5 
) 200>/tmp/blah.lockfile 
echo "After critical section" 
```

括号`()`创建一个子shell；一个新的进程，与父进程分开。导致该进程在文件描述符 200 上`200>/tmp/blah.lockfile`打开以供写入。括号内的命令在该 shell 中执行。`/tmp/blah.lockfile`

`flock -e 200`在文件描述符 200 指向的文件上获得一个排他锁。排他锁意味着任何其他试图获得该文件上的锁的人，无论是排他的还是共享的，都会阻塞（等待）直到这个锁被放弃，或者失败如果他们超时或要求不阻止。因此，在子shell 主体的剩余部分（`echo`和`sleep`命令）中，锁将由该子shell 持有，其他人无法获得该锁。一旦 subshel​​l 完成，文件将被关闭并放弃锁定。

# android - android - 重叠视图

> ID：13551842
> 
> 赞同：0
> 
> 时间：2012-11-25T14:17:49.897
> 
> 标签：android, android-layout, android-view

事情是这样的：

我有一个 EditText 和一个按钮。这个概念是让 EditText 长，以便它覆盖 Button，但 Button 位于顶部。让我们这样描绘，[] 表示 EditText 宽度，() 表示 Button 宽度。

```
[ EditText        ( Button )] 
```

Button 位于 EditText 内的右侧。可能吗？有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:22:44.390

您应该创建一个自定义视图。下面的例子，edittect的右边有一个按钮，当你点击它时，它会清除edittext。

clearable_edit_text.xml

```
<?xml version=”1.0″ encoding=”utf-8″?>
<RelativeLayout xmlns:android=”http://schemas.android.com/apk/res/android”
android:layout_width=”fill_parent”
android:layout_height=”wrap_content”
>

<EditText
android:id=”@+id/clearable_edit”
android:layout_width=”fill_parent”
android:layout_height=”wrap_content”
android:paddingRight=”35dip”
/>
<Button
android:id=”@+id/clearable_button_clear”
android:layout_width=”30dip”
android:layout_height=”30dip”
android:layout_alignParentRight=”true”
android:background=”@drawable/image_clear”
android:layout_centerVertical=”true”
android:layout_marginRight=”5dip”/>

</RelativeLayout> 
```

JAVA代码

```
import android.content.Context;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RelativeLayout;

public class ClearableEditText extends RelativeLayout
{
LayoutInflater inflater = null;
EditText edit_text;
Button btn_clear;

public ClearableEditText(Context context, AttributeSet attrs, int defStyle)
{
super(context, attrs, defStyle);
// TODO Auto-generated constructor stub
initViews();
}

public ClearableEditText(Context context, AttributeSet attrs)
{
super(context, attrs);
// TODO Auto-generated constructor stub
initViews();

}

public ClearableEditText(Context context)
{
super(context);
// TODO Auto-generated constructor stub
initViews();
}

void initViews()
{
inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
inflater.inflate(R.layout.clearable_edit_text, this, true);
edit_text = (EditText) findViewById(R.id.clearable_edit);
btn_clear = (Button) findViewById(R.id.clearable_button_clear);
btn_clear.setVisibility(RelativeLayout.INVISIBLE);
clearText();
showHideClearButton();
}

void clearText()
{
btn_clear.setOnClickListener(new OnClickListener()
{
@Override
public void onClick(View v)
{
// TODO Auto-generated method stub
edit_text.setText(“”);
}
});
}

void showHideClearButton()
{
edit_text.addTextChangedListener(new TextWatcher()
{

@Override
public void onTextChanged(CharSequence s, int start, int before, int count)
{
// TODO Auto-generated method stub
if (s.length() > 0)
btn_clear.setVisibility(RelativeLayout.VISIBLE);
else
btn_clear.setVisibility(RelativeLayout.INVISIBLE);
}

@Override
public void beforeTextChanged(CharSequence s, int start, int count, int after)
{
// TODO Auto-generated method stub

}

@Override
public void afterTextChanged(Editable s)
{
// TODO Auto-generated method stub

}
});
}

public Editable getText()
{
Editable text = edit_text.getText();
return text;
}
} 
```

所以现在我们的自定义视图 ClearableEditText 已经准备好了，我们可以在任何需要的地方使用它。喜欢

```
<?xml version=”1.0″ encoding=”utf-8″?>
<LinearLayout xmlns:android=”http://schemas.android.com/apk/res/android”
android:layout_width=”fill_parent”
android:layout_height=”fill_parent” >

<com.and.ab1209.ClearableEditText
android:id=”@+id/edit_text_clearable”
android:layout_width=”fill_parent”
android:layout_height=”wrap_content” />

</LinearLayout> 
```

# cakephp - 从不同的控制器编辑/删除相关条目，返回到 CakePHP 中的当前页面？

> ID：13551843
> 
> 赞同：2
> 
> 时间：2012-11-25T14:17:53.407
> 
> 标签：cakephp, redirect, controller

例如，假设我有一个有 n 个学生的学校课程。我正在寻找一种方法，我不仅可以编辑或删除相关条目，还可以重定向回它的原始页面。

因此，如果我在学校班级 XY ( `cake/classes/1`) 的 view.ctp 中并想编辑/删除列出的学生，我想回到这个学校班级。但是当我在学生的索引（`cake/students/`）上时，我想被重定向到该页面本身。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:29:47.807

这样做的一个更“蛋糕”的方式是：

```
 <?php
class UserController extends AppController {
    function delete($id) {
        // delete code goes here, and then...
        if ($this->referer() != '/') {
            $this->redirect($this->referer());
        } else {
            $this->redirect(array('action' => 'index'));
        }
    }
}
?> 
```

在这里的书中找到：http: [//book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Controllers.html](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Controllers.html)

# elasticsearch - 关于弹性搜索内存使用

> ID：13551849
> 
> 赞同：35
> 
> 时间：2012-11-25T14:18:34.583
> 
> 标签：elasticsearch

我目前正在使用弹性搜索 0.9.19。我使用的机器有大约 300GB 的磁盘空间，它的 RAM 大约是 23GB。我已经为弹性搜索分配了大约 10GB 的内存。我的操作是写密集型的。他们在身边`1000docs/s`。我只在机器上运行弹性搜索，没有其他进程。文档大小不大。它们很小，只有不超过 10 个字段。弹性搜索仅在一台具有 1 个分片和 0 个副本的机器上运行。

当我发送时，使用的内存开始迅速增加`1000 docs/s`。虽然我只为弹性搜索分配了 10GB 内存，但仍然消耗了将近 21GB 的内存，最终弹性搜索过程导致堆空间不足。稍后我需要清除操作系统缓存以释放所有内存。即使我停止发送弹性搜索，`1000docs/s`内存也不会自动清除。

因此，例如，如果我在运行弹性搜索时使用周围的`1000doc/s`写操作，我发现它很快就达到了 18 GB Ram 使用量，后来当我将写操作减少到只有 10 docs/s 时，使用的内存仍然显示在 18 左右国标。我认为这应该随着写操作数量的减少而下降。我正在使用 Bulk API 执行我的写入操作，每个查询的大小为 100 个文档。当写入操作约为 1000docs/sec 时，数据来自 4 台机器

这些是我在做 top 后得到的数字

**内存：总计 24731664k，已使用 18252700k，空闲 6478964k，322492k 缓冲区**

**交换：总共 4194296k，使用 0k，免费 4194296k，缓存 8749780k**

**PID 用户 PR NI VIRT RES SHR S %CPU %MEM TIME+ 命令**

**1004 弹性 20 0 10.7g 8.3g 10m S 1 35.3 806:28.69 java**

请告诉是否有人有任何想法，这可能是什么原因。由于这个问题，我不得不停止我的申请。我想我缺少任何配置。我已经在这里 [http://www.elasticsearch.org/guide/reference/index-modules/cache.html阅读了弹性搜索的所有缓存相关文档](http://www.elasticsearch.org/guide/reference/index-modules/cache.html)

我也尝试过使用清除缓存 API 清除缓存，也尝试过刷新 api。但没有得到任何改善。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-10T16:32:34.037

总结邮件列表线程上的答案：问题在于 Ruby 客户端无法限制其插入，并且随着大量文档的添加，Lucene 内存使用量确实会增加。我认为提交频率也可能存在问题：不时提交以将新添加的文档刷新到磁盘很重要。OP还有问题吗？如果没有，您可以发布解决方案吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-25T05:27:37.093

我认为您的摄取对于集群容量来说太重了。然后数据一直堆积在内存中。你应该监控你的磁盘 I/O，它应该是瓶颈。

你应该：

*   减慢摄取速度（你可以使用更强大的队列，如 Kafka、Rabbit MQ 等……，或使用 logstash 的持久队列系统）
*   使用快速SSD硬盘加速IO容量
*   添加更多节点（并调整索引的分片）以获得更好的 I/O 并行性

作为小型优化，您可以通过以下方式稍微提高性能：

*   增加 refresh_interval。此操作会消耗 RAM，因此当您在大量摄取节点时避免刷新可能会有很大帮助
*   如果您在索引中进行第一次摄取，请尝试在摄取阶段删除所有副本，并在摄取后重新添加副本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-14T13:27:30.217

要考虑的另一件事是弹性搜索的 RAM / 存储比率应该

是。**1:16**以获得最佳性能。

这意味着 - 如果您使用 64 GB 内存，那么存储空间将是 1024 GB 或 1TB。

# javascript - Javascript 和 jQuery：遍历数组但等待动画完成

> ID：13551852
> 
> 赞同：1
> 
> 时间：2012-11-25T14:18:40.187
> 
> 标签：javascript, jquery, jquery-animate, loops

我有一个简单的示例，其中有几个框可以在屏幕上移动。在前一个完成之前，每个盒子都不应该移动。我有一个可行的解决方案，`.shift()`但我应该能够使用 for 循环和`$.each`. 任何人都知道如何获得和`$.each`工作？

[在这里摆弄](http://jsfiddle.net/twinturbotom/j8XCw/)换档按钮按我想要的方式工作。

谢谢。

JS：

```
boxes = [
  ['.box0', 'animate', [ {left: '200px' }, 1000 ] ],
  ['.box1', 'animate', [ {left: '200px' }, 1000 ] ],
  ['.box2', 'animate', [ {left: '200px' }, 1000 ] ],
  ['.box3', 'animate', [ {left: '200px' }, 1000 ] ],
  ['.box4', 'animate', [ {left: '200px' }, 1000 ] ],
  ['div', 'animate', [ {left: '0px' }, 1000 ] ]
];
$('.eachMethod').click(animEach);
$('.ifMethod').click(animFor);
$('.shiftMethod').click(animShift);
function animEach(){
  $.each(boxes, function(){
    $.fn[this[1]].apply($(this[0]), this[2]).promise().done();
  });
};
function animFor(){
  for (i=0; i < boxes.length; i++) {
    b=boxes[i];
    $.fn[b[1]].apply($(b[0]), b[2]).promise().done();
  }
};
function animShift(){
  b = boxes.shift();
  if (b) {
    $.fn[b[1]].apply($(b[0]), b[2]).promise().done(animShift);
  }
};​ 
```

HTML：

```
<ul>
  <li><button class='eachMethod'>$.each</button></li>
  <li><button class='ifMethod'>if</button></li>
  <li><button class='shiftMethod'>shift</button></li>
</ul>
<div class='box0'></div>
<div class='box1'></div>
<div class='box2'></div>
<div class='box3'></div>
<div class='box4'></div>​ 
```

CSS：

```
div{
 clear: both;   
 background-color: green;
 width: 40px;
 height: 40px;
 Position: relative;    
}
ul li {
  float: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:08:01.703

`animate()`是异步的，因此循环将在几毫秒内完成，几乎同时在每个元素上调用动画。当您使用循环时，您`.promise().done()`没有做任何事情。

使用的版本`animShift()`一次仅将动画应用于一个元素，并且由于下一个调用在`done()`其中，因此在第一个动画完成之前不会触发

# jquery - 用于动画边框半径的jQuery

> ID：13551857
> 
> 赞同：4
> 
> 时间：2012-11-25T14:19:53.753
> 
> 标签：jquery, css, jquery-animate

`border-top-left-radius`我的动画风格有问题。我通过分别输入两个长度值来使用这种风格。

```
border-top-left-radius: 15px 25px; 
```

我想通过分别增加这两个长度值`jquery.animate()`。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:23:51.750

border-top-left-radius 只接受一个值，对吗？所以你会像这样动画它：

```
$('.class').animate({borderTopLeftRadius: 20}) 
```

**编辑**

* * *

不确定 jQuery 是否支持这个开箱即用。也许您可以像这样实现步骤回调：

```
$('#container').animate({
    borderTopLeftRadiusSideLength: 500,
    borderTopLeftRadiusUpperLength: 50
}, {
    duration: 5000,
    step: function (val, context) {
        $(this).data(context.prop, val);
        var side = $(this).data('borderTopLeftRadiusSideLength');
        var upper = $(this).data('borderTopLeftRadiusUpperLength');
        if (side && upper) {
            $(this).css('borderTopLeftRadius', side + 'px ' + upper + 'px');
        }
    }
}); 
```

[http://jsfiddle.net/YWsQn/1/](http://jsfiddle.net/YWsQn/1/)

# javascript - 为什么缺少类的属性？

> ID：13551862
> 
> 赞同：2
> 
> 时间：2012-11-25T14:21:17.803
> 
> 标签：javascript, jquery, oop

我想为我自己的对象进行设置，女巫可以在追加时识别相同的对象并将它们掉落。

```
function ImageSet(){
    this.set = [];
}

ImageSet.prototype.length = function(){return this.set.length}
ImageSet.prototype.process = function(imgObj){
    var is_exist = false;
    $.each(this.set, function(i){
        if (this.set[i].imgHash == imgObj.imgHash){is_exist = true};
    });

    if (!is_exist){
        this.set[this.set.length + 1] = imgObj;
        return true;
    }
    return undefined;
}

var imagesChoosen = new ImageSet(); 
```

因此，当用户单击元素时，我会创建新对象并尝试将其附加到我的 ImageSet 中。在第一次单击对象成功附加到设置，但在第二次单击控制台写入错误

```
TypeError: this.set is undefined if (this.set[i].imgHash == imgObj.imgHash){is_exist = true}; 
```

调用 ImageSet 的代码是：

```
$('#content_table a').click(function(event){
    event.preventDefault();
    el = new Image($(this).attr('href'));
    if (imagesChoosen.process(el)){
        $(this).parent().css("border", "3px dotted orange");    
    } else {
        $(this).parent().css("border", "None");
    }
    console.log(imagesChoosen.length());
    return false;
}); 
```

我无法理解。我的 ImageSet 在第一次调用后被破坏了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:25:05.200

在您传递给的匿名函数内部`each`：

```
$.each(this.set, function(i){
    if (this.set[i].imgHash == imgObj.imgHash){is_exist = true};
}); 
```

... 的值`this`是当前正在作用的数组的成员，而不是`imagesChoosen`。

要访问它，您需要`this`从外部函数复制到另一个仍在范围内的变量。

```
var is_exist = false;
var currentImageSet = this;
$.each(this.set, function(i){
    if (currentImageSet.set[i].imgHash == imgObj.imgHash){is_exist = true};
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:37:40.527

`this`表示 jquery 中的当前迭代，每个迭代都使用此类关键字产生问题；您将其视为普通数组，因此我更喜欢使用 for 循环！

```
ImageSet.prototype.process = function(imgObj){
    var is_exist = false;
    for(var i=0; i<this.set.length; i++)
    {
        if (this.set[i].imgHash == imgObj.imgHash){is_exist = true};
    }

    if (!is_exist){
        this.set[this.set.length] = imgObj;
        return true;
    }
    return undefined;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T14:28:42.147

```
this.set[this.set.length + 1] = imgObj; 
```

认为应该是：

```
this.set[this.set.length] = imgObj; 
```

我不熟悉 JQuery 每个函数，但以前的帖子会表明这个上下文的变化，所以我会改变每个函数：

```
$.each(this.set, function(i){
    if (this.set[i].imgHash == imgObj.imgHash){is_exist = true};
}); 
```

至：

```
for(var i=0;i<this.set.length;i++){
    if (this.set[i].imgHash == imgObj.imgHash){is_exist = true};
}; 
```

# iphone - 应用程序中分配了很多内存，如何解决？

> ID：13551868
> 
> 赞同：0
> 
> 时间：2012-11-25T14:22:18.987
> 
> 标签：iphone, ios, memory-management, memory-leaks

为了测试内存管理和分配，我编写了一个简单的 Single View 应用程序，`viewDidAppear`为了创建一个包含许多对象的长循环，我编写了以下代码：

```
- (void) viewDidAppear:(BOOL)animated
{
    NSDate * time = [NSDate date];
    [super viewDidAppear:animated];

    for (int i = 0; i < 20003; i++)
    {
        NSString * testString = [[NSString alloc] initWithString:@"This is a test string"];
        NSMutableArray * itemsArray = [[NSMutableArray alloc] init];
        for (int j = 0; j < 1000; j++)
        {
            [itemsArray addObject:testString];
        }
        if ((i % 1000) == 0)
        {
            NSLog(@"called %d", i);
        }
}
NSDate * time2 = [NSDate date];
NSTimeInterval interval = [time2 timeIntervalSinceDate:time];
[label2 setText:[NSString stringWithFormat:@"time interval: %f", interval]]; 
```

}

在分析内存泄漏时，正如预期的那样，存在内存泄漏和超过 260 MB 的分配，屏幕截图： ![图 1](../Images/84fcd1e7350a43496fe5f0e6441a45a1.png)

但是在关注[本](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html#//apple_ref/doc/uid/20000047-CJBFBEDI)文档时，我将代码更改为：

```
- (void) viewDidAppear:(BOOL)animated
{
    NSDate * time = [NSDate date];
    [super viewDidAppear:animated];

    for (int i = 0; i < 20003; i++)
    {
        @autoreleasepool
        {
            NSString * testString = [NSString stringWithFormat:@"%@", @"This is a test string"];
            NSMutableArray * itemsArray = [[NSMutableArray alloc] init];
            for (int j = 0; j < 1000; j++)
            {
                [itemsArray addObject:testString];
            }
            [itemsArray release];
            itemsArray = nil;

            if ((i % 1000) == 0)
            {
                NSLog(@"called %d", i);
            }
        }
    }
    NSDate * time2 = [NSDate date];
    NSTimeInterval interval = [time2 timeIntervalSinceDate:time];
    [label2 setText:[NSString stringWithFormat:@"time interval: %f", interval]];

} 
```

分配量仍然没有差异，但没有内存泄漏，执行时间明显增加，从不到 2 秒增加到 80 秒左右： ![图 2](../Images/45401e1094dbd90bacc91aa467b933f6.png)

并且仍然在使用发布后，没有任何变化。代码：

```
- (void) viewDidAppear:(BOOL)animated
{
    NSDate * time = [NSDate date];
    [super viewDidAppear:animated];

    for (int i = 0; i < 20003; i++)
    {
        NSString * testString = [[NSString alloc] initWithString:@"This is a test string"];
        NSMutableArray * itemsArray = [[NSMutableArray alloc] init];
        for (int j = 0; j < 1000; j++)
        {
            [itemsArray addObject:testString];
        }
        [testString release];
        testString = nil;
        [itemsArray release];
        itemsArray = nil;

        if ((i % 1000) == 0)
        {
            NSLog(@"called %d", i);
        }
    }
    NSDate * time2 = [NSDate date];
    NSTimeInterval interval = [time2 timeIntervalSinceDate:time];
    [label2 setText:[NSString stringWithFormat:@"time interval: %f", interval]];
} 
```

和截图： ![在此处输入图像描述](../Images/6664584500d2bd1fa21601bc1ce8dc33.png)

并且明确地清空 MutableArray（使用`[itemsArray release]`）显示没有任何变化。

我的问题是：

1.  为什么在这三种情况下分配的总内存没有变化（尽管在第二种和第三种情况下没有内存泄漏），有没有办法减少大分配的内存？故障在哪里，如何减少内存消耗？

2.  其次，我是否使用了正确的工具并读取了正确的数字（在 Profiler Instruments 中使用 Memory Leaks，并参考 All Allocations，在分配生命周期中，选择 created and still living），我是否以正确的方式进行操作？我的意思是这是目前消耗的内存量，还是自应用程序启动以来消耗的总内存量？

3.  为什么在第二种情况下循环执行时间显着增加，而不是在第一种和第三种情况下？

使用 xCode 4.5，没有 ARC，没有 StoryBoards，所有测试都是在模拟器上完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:22:02.500

**1.**三种情况的总分配量相同，因为在每种情况下，您分配的内存量相同。

**2.**你使用了正确的工具，并且阅读了一些正确的数字，我认为你只是没有阅读足够的数字。**正如您所怀疑的，总体字节**本质上不是您当前消耗的。您需要检查**Live Bytes**部分。在本节中，您将看到第一种情况（浪费了近一半的总分配）与第二种情况之间的区别，后者最终处于相当小的状态。

**3.** “显着”的时间增加来自使用之间的差异：

```
[[NSString alloc] initWithString:@"This is a test string"]; 
```

和

```
@autoreleasepool  -and-
[NSString stringWithFormat:@"%@", @"This is a test string"]; 
```

是的，我说的是**差异**。而不仅仅是`autorelease`. 但...

众所周知，首次自动释放在循环释放内存方面效率低下。从一开始就不是它的真正目的，它只是真正发明出来的，以便方法可以返回对象的调用者所拥有的对象，换句话说：它的设计目的是让事情活得太久。虽然`@autorelease`已被证明比旧`NSAutoReleasePool`的 s 更有效，但在这种情况下应该避免使用它。

`NSString`第二个是在处理字符串文字作为新的源字符串时所做的一个相当未知的优化`NSString`。如[本答案](https://stackoverflow.com/a/8032400/927947)中所述， Using`initWithString:@"SomeLiteral"`会导致指向文字的指针，而不是形成 new `NSString`。此优化不适用于`stringWithFormat:`. 所以换句话说，你已经扭曲了你的测试。

**笔记：**

在保存开始时间后调用`[super viewDidAppear:animated];`会不必要地扭曲测试。

当我运行这些测试时，他们在分析器中运行了这些时间：

*   示例 1：0.999s
*   示例 2：1.526s
*   示例 3：1.082s

我不确定你是如何从不到 2 秒到 80 秒的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:54:30.840

本着学习的精神，我只是给你一个提示。浏览关于`NSMutableString`和的文档`NSAutoreleasePool`。

# language-agnostic - 内容本地化领域最佳实践

> ID：13551869
> 
> 赞同：3
> 
> 时间：2012-11-25T14:22:37.707
> 
> 标签：language-agnostic, localization, seo, subdomain, currency

不确定进行网站本地化的最佳方式，寻找一般反馈和最佳实践来解决一些令人头疼的问题。

**现在的情况**

我们有一家商店，需要根据用户的位置（我们只有在特定位置销售某些产品的权利）和不同的价格（基于用户当地货币）展示不同的产品。

我目前面临的问题是内容都是相同的语言（英语），最终将针对每个国家/地区进行翻译，并根据用户的区域设置和偏好显示不同的内容语言。

当前计划是根据位置将用户路由到相关子域：

*   `fr.domain.com`对于`France`价格`EUR`
*   `de.domain.com`对于`Germany`价格`EUR`
*   `it.domain.com`对于`Italy`价格`EUR`
*   `us.domain.com`对于`United States`价格`USD`
*   `gb.domain.com`对于`United Kingdom`价格`GBP`

等等...

由于内容都是相同的语言，这是否会导致糟糕的用户体验（是否`fr.domain.com`推断语言（即法语），因为目前所有内容都是英语）。— 这种方法有任何 SEO 优点/缺点吗？`it.domain.com`（如果在和上以相同语言列出相同的产品，可能会出现重复的内容问题`fr.domain.com`。

或者这是完全想多了，直到内容被翻译成我们应该使用的每种语言`domain.com`，检测用户位置并根据它显示相关的产品和货币。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:44:22.193

我每天在大型网站上进行多语言 SEO，这正是我会做的：

*   首先，使用子域结构。这是出于一个原因 - 与 Google 网站管理员工具中的文件夹相比，您可以更轻松地处理子域，并且您可以使用本地化功能单独定位每个子域；文件夹不可能（嗯，它是，但它会导致各种问题。）

Ross Patterson 给出的 FYI 默认为 true，但可以由刚才提到的 Google Webmaster Tools 覆盖和处理，并实现以下内容：

*   其次，实现 rel=alternate hreflang 标签，如在

    [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=189077](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=189077)

这将处理重复的内容问题。我建议使用站点地图格式而不是页面代码/标题响应，因为我发现随着时间的推移更容易维护（外部跨国公司依赖于代码库的东西越少越好。）

*   最后，进一步获取本地化的本地翻译内容。这是使您的网站发挥作用的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:23:15.930

子域不应对 SEO 产生负面影响，通常只有 TLD (example.fr) 会影响 SEO。

您对子域有什么想法？只是为了一个干净的 URL？为什么不 example.com/fr - example.com/en？

# javascript - 具有新 div 的重复功能

> ID：13551872
> 
> 赞同：1
> 
> 时间：2012-11-25T14:22:58.130
> 
> 标签：javascript, jquery, css

如何将此功能复制到另一个 div？

```
function goto(id, t){   

    //animate to the div id.
    $(".headbox-wrapper").animate({"left": -($(id).position().left)}, 600);

    // remove "active" class from all links inside #nav
    $('#nav a').removeClass('active');

    // add active class to the current link
    $(t).addClass('active');    
} 
```

使用新名称和新 div，例如 function2。

它与这个在同一页面上，当我复制并打印新脚本时，它们都不起作用，这很明显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:36:38.807

基于贝内托的评论：

```
function goto(id, t){   
    $(".headbox-wrapper, .headbox-wrapper2").animate({"left": -($(id).position().left)}, 600);
    $('#nav a').removeClass('active');
    $(t).addClass('active');    
} 
```

html:

```
<div id='headbox-wrapper'>Click me!</div>
<div id='headbox-wrapper2'>Click me again!</div> 
```

# grails - 如何在 Grails 应用程序中添加额外的源路径？

> ID：13551875
> 
> 赞同：2
> 
> 时间：2012-11-25T14:23:12.877
> 
> 标签：grails

我怎样才能以某种方式配置 Grails 应用程序`run-app`并`war`考虑到一些外部源路径`../external/src`？

我不想为此创建一个单独的 grails 插件。

**升级版**。感谢 Ian Roberts，有一个解决方案。但是还有一个额外的愿望出现了。我希望该外部源（足够大）仅用于搜索错过的课程。不像从那里开始的一切都投入到`*.war`现在。（至少可以使用 jar 优化器来实现。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T23:31:53.387

要编译的源目录列表是 的属性`projectCompiler`，您可以将其添加到合适的`_Events.groovy`块中。试试这个：

```
eventCompileStart = {
  projectCompiler.srcDirectories << "${basedir}/../external/src"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-02T19:25:31.840

我只是想扩展上述答案（这是正确的）。_Events.groovy 文件位于脚本目录中。如果您想在课堂上共享“所有内容”，您可以按照上面的方式进行操作，或者指定如下的特定包（我试图在两者之间共享 GWT）。

```
eventCompileStart = {
    projectCompiler.srcDirectories << "${basedir}/src/directory/org/mypackage/mustbe/shared"
} 
```

# wordpress - 手动编辑 Wordpress 主题

> ID：13551876
> 
> 赞同：1
> 
> 时间：2012-11-25T14:23:16.793
> 
> 标签：wordpress

我刚刚开始使用 Wordpress 来构建网站，主要是因为我希望我的客户能够在我构建网站后自己编辑网站......

现在我不想只是安装一个主题并使用它，我想自定义主题并放入我自己的插件等，甚至可能用纯 HTML/CSS 重写一些页面。

现在，如果我这样做，我的客户是否仍然能够使用用户友好的页面编辑器来更新内容，或者我需要坚持使用主题来启用它（无需编辑主题）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:30:11.840

更改主题（或构建自己的主题）不会影响管理面板。他们将能够像往常一样编辑和编写页面和帖子。

# macos - TOpenDialog/NSOpenPanel 在沙盒 Delphi 应用程序中不起作用

> ID：13551879
> 
> 赞同：7
> 
> 时间：2012-11-25T14:23:22.050
> 
> 标签：macos, delphi, sandbox, firemonkey, delphi-xe3

Firemonkey 应用程序中的 TOpenDialog 似乎存在问题，该应用程序已为 Mac Appstore 沙盒化。我使用 XE3，但它也存在于 XE2 中。我居然在这里找到了一份QC报告，但还是没有解决：

[http://qc.embarcadero.com/wc/qcmain.aspx?d=105344](http://qc.embarcadero.com/wc/qcmain.aspx?d=105344)

有没有人遇到过同样的问题，或者有任何解决方法的想法？

这很容易检查。只需在窗体上放置一个 TOpenDialog 并调用 Execute 方法。根据 Embarcadero 说明对应用程序进行签名和沙箱处理：

[http://docwiki.embarcadero.com/RADStudio/en/Mac_OS_X_Application_Development](http://docwiki.embarcadero.com/RADStudio/en/Mac_OS_X_Application_Development)

调用 Execute 时会有延迟，应用程序会冻结片刻，但没有显示任何内容。没有异常或错误消息。如果应用程序没有被沙盒化，则对话框可以正常工作。

这段代码也不起作用，所以问题可能出在TOpenDialog调用的TNSOpenPanel的某个地方，但不幸的是我找不到它。

```
var
  LOpenDir: NSOpenPanel;
begin
  LOpenDir := TNSOpenPanel.Wrap(TNSOpenPanel.OCClass.openPanel);
  LOpenDir.runModal;
  LOpenDir.release; 
```

我在[Apple 文档](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW8)中读到，与没有沙箱的相比，使用沙箱的 NSOpenPanel 派生自不同的类。我想这是问题的原因。

任何想法将不胜感激。如果没有打开/保存对话框，我们就不能真正发布一个必须处理文件的应用程序 :)

顺便说一句，我尝试了项目选项中权利的几种组合，但它们没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:59:01.147

当应用程序在沙盒中时，NSOpenPanel/NSSavePanel 应该由一个名为 Powerbox 的透明模块管理。AppKit 框架的普通面板无效。但要启用 Powerbox 访问文件系统，权利列表应包括

```
com.apple.security.files.user-selected.read-write YES 
```

配置。

# mongodb - 如何查找索引是在 RAM 中还是在磁盘 [MongoDB] 中？

> ID：13551880
> 
> 赞同：7
> 
> 时间：2012-11-25T14:23:35.810
> 
> 标签：mongodb, indexing, database

查找索引是否驻留在 RAM 或 MongoDB 磁盘中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T14:35:06.043

一方面，完全有可能只有索引的某些部分在 RAM [http://docs.mongodb.org/manual/applications/indexes/#indexing-right-handed](http://docs.mongodb.org/manual/applications/indexes/#indexing-right-handed)

> 索引不必在所有情况下都完全适合 RAM。如果索引字段的值随着每次插入而增长，并且大多数查询选择最近添加的文档；那么 MongoDB 只需将索引中包含最新或“最右边”值的部分保留在 RAM 中。这允许有效地使用索引进行读取和写入操作，并最大限度地减少支持索引所需的 RAM 量。

另一方面，`db.serverStatus()`为您提供所需信息的汇总。检查[http://docs.mongodb.org/manual/reference/server-status/#server-status-indexcounters](http://docs.mongodb.org/manual/reference/server-status/#server-status-indexcounters)：

> 该`indexCounters.btree.hits`值反映了索引被访问的次数，并且 mongod 能够从内存中返回索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:42:57.463

是的，有办法。您可以使用`totalIndexSize()`or `stats()` 来检查索引的大小

```
> db.collection.totalIndexSize()
> 1073741824

> db.collection.stats()
> {
"ns" : "collection.test",
"count" : 100006,
"size" : 72104,
"avgObjSize" : 4506.5,
"storageSize" : 688128,
"numExtents" : 3,
"nindexes" : 1,
"lastExtentSize" : 524288,
"paddingFactor" : 1.0170000000000319,
"systemFlags" : 1,
"userFlags" : 0,
"totalIndexSize" : 1073741824,
"indexSizes" : {
    "_id_" : 1073741824
},
"ok" : 1 
```

两者都将以字节为单位返回集合的索引大小。上例显示索引大小为`1GB`.

**更新**

要查找整个数据库的总索引大小，可以使用`stats()`

```
 > db.stats()
{
    "db" : "test",
    "collections" : 10,
    "objects" : 5909990,
    "avgObjSize" : 2888.31186440677965,
    "dataSize" : 170123304,
    "storageSize" : 14745603499,
    "numExtents" : 17,
    "indexes" : 8,
    "indexSize" : 1073741824,
    "fileSize" : 50331648,
    "nsSizeMB" : 163453,
    "ok" : 1
} 
```

现在您可以`indexSize`与机器 RAM 进行比较，以检查索引是否适合内存。您可以增加 RAM 大小以容纳完整索引。

希望能帮助到你

# java - GAE 远程 api：RemoteApiInstaller 安装总是失败

> ID：13551883
> 
> 赞同：0
> 
> 时间：2012-11-25T14:23:49.803
> 
> 标签：java, google-app-engine

[GAE 远程 API for java](https://developers.google.com/appengine/docs/java/tools/remoteapi#Configuring_Remote_API_on_an_App_Engine_Client)：在 App Engine 客户端上配置远程 API

```
RemoteApiInsideAppEngineExample(String username, String password)
        throws IOException {
        // Authenticating with username and password is slow, so we'll do it
        // once during construction and then store the credentials for reuse.
        this.options = new RemoteApiOptions()
            .server("your_target_app_id.appspot.com", 443)
            .credentials(username, password);
        RemoteApiInstaller installer = new RemoteApiInstaller();
        installer.install(options);
        try {
            // Update the options with reusable credentials so we can skip
            // authentication on subsequent calls.
            options.reuseCredentials(username, installer.serializeCredentials());
        } finally {
            installer.uninstall();
        }
    } 
```

在我的测试中它总是抛出异常：

```
java.lang.IllegalArgumentException: charset may not be null or empty
    at com.google.appengine.repackaged.org.apache.commons.httpclient.util.EncodingUtil.getString(Unknown Source)
    at com.google.appengine.repackaged.org.apache.commons.httpclient.util.EncodingUtil.getString(Unknown Source)
    at com.google.appengine.tools.remoteapi.AppEngineClient$Response.getBodyAsString(AppEngineClient.java:138)
    at com.google.appengine.tools.remoteapi.RemoteApiInstaller.getAppIdFromServer(RemoteApiInstaller.java:318)
    at com.google.appengine.tools.remoteapi.RemoteApiInstaller.loginImpl(RemoteApiInstaller.java:278)
    at com.google.appengine.tools.remoteapi.RemoteApiInstaller.login(RemoteApiInstaller.java:239)
    at com.google.appengine.tools.remoteapi.RemoteApiInstaller.install(RemoteApiInstaller.java:106) 
```

......

我确定用户名和密码是管理员一号，我使用 GAE 1.7、联合登录、高复制数据存储。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:46:00.667

代码对我有用。您只需要确保将**“your_target_app_id”**替换为 applicationID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:54:55.177

我想我找到了答案，我使用联合登录，目前 GAE 远程 API 不支持联合登录——太糟糕了，我花了很多时间调试。

# sql - 查询未按预期工作

> ID：13551885
> 
> 赞同：2
> 
> 时间：2012-11-25T14:23:56.743
> 
> 标签：sql, database, oracle, procedure

我们有这些表：

```
player(id,salary,bonus)

productivity_per_year(id,goals,year) 
```

> 生产力表（ID、目标、年份）

```
+----+-------+------+
| ID | Goals | Year |
+----+-------+------+
| 01 |    20 | 2001 |
| 01 |    30 | 2002 |
| 02 |    30 | 2001 |
| 02 |    40 | 2002 |
+----+-------+------+ 
```

问题是，如果球员在过去两年（2001 年和 2002 年）打进 30 球或更多球，我该如何提高球员的奖金。例如，在这里我希望 id=02 的玩家获得奖金，因为他在 2001 和 2002 的得分都 >=30 。

我正在使用以下程序，但它失败了，因为它为两个玩家增加了奖励！！！

```
create or replace 
procedure football
AS
BEGIN
   update player p
      set p.bonus = p.bonus + 500
   where p.id in 
         (select s.id from productivity s where
            s.goals >30 
        and  s.year>=2001
        and s.id = p.id
         );
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:37:28.030

自 2001 年以来，两名球员都进了 30 多个球，因此这两名球员都获得了更大的奖金。这就是您对查询所做的事情。但是，如果只给在 2001 年和 2002 年进球数超过 30 的球员提供奖金，您可以尝试以下查询。

```
update player p 
set bonus = bonus + 500 
where p.id in 
((select s.id from productivity s where s.goals > 30 and s.year = 2001 and s.id = p.id)
intersect
(select s.id from productivity s where s.goals > 30 and s.year = 2002 and s.id = p.id)); 
```

使用 postgresql 它可以工作。

# iphone - 将表格视图中的文本转换为大写字母？

> ID：13551887
> 
> 赞同：1
> 
> 时间：2012-11-25T14:24:23.203
> 
> 标签：iphone, ios, xcode, tableview

我正在处理 RSS 提要，需要将标题和副标题变成大写字母，有没有简单的方法可以做到这一点？

![在此处输入图像描述](../Images/89d49c7a84adaa4d99e649b45cdc802b.png)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:36:37.403

在 cellForRow AtIndexPath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

NSString *string1 = @"The quicK brOwn fox jumpeD";

cell.textLabel.text = [string1 uppercaseString];

.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:37:50.340

```
NSString* str = @"abcd abcd abcd abcd";
[str capitalizedString];    //  = Abcd Abcd Abcd Abcd
[str uppercaseString];      //  = ABCD ABCD ABCD ABCD 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T14:33:56.743

[大写](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/uppercaseString)字符串，*NSString*的方法？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-01T14:56:28.190

您可以从文本字段属性下的情节提要中执行此操作。将大写下拉更改为所有字符。在您的设备上进行测试或确保键盘已打开。如果您从物理键盘键入，它将覆盖模拟器键盘上的大写箭头。

# ios5 - 如何在 ios5 上为我的文件浏览器项目使用故事板？

> ID：13551888
> 
> 赞同：3
> 
> 时间：2012-11-25T14:24:28.570
> 
> 标签：ios5, dropbox

我正在尝试使用情节提要找到用于浏览远程文件系统（保管箱）的解决方案。例如，如果用户点击浏览文件夹，则没有关于文件夹结构深度的信息。我的意思是文件夹可能包含另一个文件夹，另一个文件夹可能包含另一个文件夹，它可以转到 5、10、20 等。这使得我无法定义我应该添加多少个 tableview 控制器。我尝试只使用一个并使用以下代码为每个选定的文件夹更新相同的表格视图：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 

{
[dropBoxArray removeAllObjects]; //remove all the objects which comes from the previous folder structure 

[[self restClient] loadMetadata:@"/selected folder/"]; // load the newly selected folder 
    contents

} 
```

它只适用于一个方向，用户可以浏览文件夹树直到永远，但这一次不可能一步一步返回。因为导航控制器将后退按钮放在导航项上，它会加载上一个视图而不是上层目录。我找不到如何正确处理这个逻辑并且需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:59:02.907

首先更改您的后退按钮操作方法，后退按钮从堆栈中弹出最后一个视图，因此它可能不适用于您的情况，并添加下一个按钮（或使用 didselect 行任何适合您的）

其次使用单例类来保留您的文件夹路径。

因此，接下来将向您的元数据路径添加一个详细文件夹，`selected folder/detail folder`然后返回将删除最后一个路径`selected folder/`

将单例单例类添加到您的代码中：

```
#import <Foundation/Foundation.h>
@interface SingletonClass : NSObject
{
    NSString *lastCreatedFolderName;
    NSMutableArray *fileListForEdit;
}
@property (nonatomic, retain) NSString *lastCreatedFolderName;
@property (nonatomic, retain) NSMutableArray *fileListForEdit;
+ (SingletonClass *)sharedInstance;

@end

    #import "SingletonClass.h"

    @implementation SingletonClass

    @synthesize lastCreatedFolderName=_lastCreatedFolderName;
    @synthesize fileListForEdit=_fileListForEdit;

    + (SingletonClass *)sharedInstance
    {
        static SingletonClass *sharedInstance = nil;
        static dispatch_once_t onceToken;
        dispatch_once(&onceToken, ^{
            sharedInstance = [[SingletonClass alloc] init];
            // Do any other initialisation stuff here
        });
        return sharedInstance;
    }

    - (id)init {
        if (self = [super init]) {
            _lastCreatedFolderName = @"Empty Folder";
            _fileListForEdit=[[NSMutableArray alloc]init];

        }
        return self;
    }
  -(NSString *) addFolderPath : (NSString *) nextFolder{

    [_fileListForEdit addObject:nextFolder]; // add your folder path to mutablearray 
    for(int i=0 ; int<[_fileListForEdit count]; i++) {
         _lastCreatedFolderName=[NSString stringWithFormat:@"%@/%@",_lastCreatedFolderName,[_fileListForEdit objectAtIndex:i]]; //add folder path to your current path

     }

     return _lastCreatedFolderName;
} 
-(NSString *) removeLastFolderDromPath
{
     [_fileListForEdit removeLastObject];// remove last folder path from array

     //create new folder path
     for(int i=0 ; int<[_fileListForEdit count]; i++) {
         _lastCreatedFolderName=[NSString stringWithFormat:@"%@/%@",_lastCreatedFolderName,[_fileListForEdit objectAtIndex:i]]; //add folder path to your current path

     }

     return _lastCreatedFolderName;
}

    @end 
```

在 -(void)loadView 中：

```
UIBarButtonItem *btn = [[UIBarButtonItem alloc] initWithTitle:@"back" style:UIBarButtonItemStyleBordered target:self action:@selector(backPressed:)];
self.navigationItem.leftBarButtonItem = btn;

   UIBarButtonItem *btnNext = [[UIBarButtonItem alloc] initWithTitle:@"next" style:UIBarButtonItemStyleBordered target:self action:@selector(nextPressed:)];
self.navigationItem.rightBarButtonItem = btnNext;

-(void)backPressed: (id)sender
{
    //call your singleton here and load last path
    SingletonClass *sharedInstance=[SingletonClass sharedInstance];
    NSString *destDirectory= [sharedInstance addFolderPath :@"nextFolder"];

}
 -(void)nextPressed: (id)sender
{
  //call your singleton here and load last path
  //get last created file name from singleton
    SingletonClass *sharedInstance=[SingletonClass sharedInstance];
    NSString *destDirectory= [sharedInstance removeLastFolderDromPath];//gives you the new path
} 
```

然后打电话给你的客户

`[[self restClient] loadMetadata:destDirectory];`

**请注意，此调用未经测试，您可能会看到一些拼写错误，需要稍微编辑代码**

# c - MS C++ 禁用函数重新排序

> ID：13551891
> 
> 赞同：0
> 
> 时间：2012-11-25T14:24:37.427
> 
> 标签：c

如何禁用对程序中的函数重新排序的编译器/链接器优化？比方说，我有三个功能，比如

```
 void A (){};
    void B (){};
    void C (){}; 
```

构建后，这些函数可以重新排序，以便 B 在内存中排在第一位，C - 第二， A - 第三。

在 GCC 中，您有一个选项“no-toplevel-reorder”可以解决问题。

> -fno-toplevel-重新排序
> 
> 不要重新排序顶级函数、变量和 asm 语句。以它们在输入文件中出现的相同顺序输出它们。使用此选项时，不会删除未引用的静态变量。此选项旨在支持依赖特定排序的现有代码。对于新代码，最好使用属性。

有 MS C++ 的类似物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:32:49.277

可以使用 #pragma code_seg("segname$tag");

# android - 在 Android 上捕获特定进程或包的数据包

> ID：13551893
> 
> 赞同：5
> 
> 时间：2012-11-25T14:24:49.427
> 
> 标签：android, packet

我可以在 Android 上甚至通过 adb 捕获某些进程或包的数据包吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T14:46:22.623

如果您正在查看特定应用程序，请通过设置应用程序禁用其他进程的后台数据。手机上安装tcpdump，电脑上安装wireshark过滤数据。无法直接按特定进程进行过滤，但您可以让手机的其余部分足够安静，以便您可以筛选噪音。

这是一个很好的教程：[分析android网络流量](http://mobile.tutsplus.com/tutorials/android/analyzing-android-network-traffic/)

如果您正在寻找到已知站点的流量，例如您正在尝试嗅探私有 api 调用，那么在 wireshark 中过滤进出该地址的出站和入站流量是微不足道的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T14:32:54.583

不，抱歉，您不能通过`adb`. 使用 root 访问权限，[您有更多选择](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark)，但即便如此，也不能简单地使用`adb`.

# windows - System.StackOverflow 错误

> ID：13551894
> 
> 赞同：1
> 
> 时间：2012-11-25T14:24:58.020
> 
> 标签：windows, vb.net, microsoft-metro

我正在对用 VB.net 编写的现有 Windows 应用商店应用程序进行更新。我创建了一个共享 MsgBox() 函数和一个“非共享”函数（将从共享函数运行）。我需要共享的，因为我也从另一个班级运行它。完整的错误代码：

```
An unhandled exception of type 'System.StackOverflowException' occurred in Calculator World.exe
The program '[4360] Calculator World.exe: Managed (v4.0.30319)' has exited with code -2147023895 (0x800703e9) 
```

这是 MsgBox 代码：

```
''' <summary>
''' Shows a message box with a Close button.
''' 
''' NOTE: Run "MainPage.MessageBoxDone = false" before running this function!!!
''' </summary>
''' <param name="text">The text to show in the message box.</param>
Public Shared Sub MsgBox(ByVal text As String)'<--- error is occurring  ether here 
    MsgBox(text)                          ' <--- or here
End Sub

Private Sub MsgBox_unShared(ByVal txt As String)
    Canvas_MsgBox.Visibility = Windows.UI.Xaml.Visibility.Visible
    Label_MsgBox.Text = txt
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T14:30:15.720

您的`MsgBox`函数调用自身 - 导致无限递归，因此堆栈溢出。你可能打算`MsgBox`打电话给`MsgBox_unShared`.

# java - java中内存效率最高的映射

> ID：13551896
> 
> 赞同：4
> 
> 时间：2012-11-25T14:25:21.193
> 
> 标签：java, memory-management, map

`Map`我正在使用类似于以下声明的接口实现树状结构：

```
Map<String, Map<String, Map<Integer, Double>>> 
```

目前我正在使用该`HashMap`实现。加载大量数据后，我看到程序消耗了 4GB 的 RAM。在使用接口持久化整个实体`Serializable`时，生成的文件大小仅为 1GB。

我可以在这里使用的最节省内存的`Map`实现是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T16:13:25.533

如果您想将 (String,String,Integer) 映射到 Float，那么最好的办法是使用 a `Map<MyKey, Float>`，`MyKey`其定义如下：

```
public final class MyKey {
    private final String a;
    private final String b;
    private final Integer c;

    public MyKey(String a, String b, Integer c) {
        this.a = a;
        this.b = b;
        this.c = c;
    }

    // getters, if needed

    @Override
    public int hashCode() {
        return Objects.hash(a, b, c);
    }

    @Override
    public boolean equals(Object o) {
        if (o == this) {
            return true;
        }
        if (!(o instanceof MyKey)) {
            return false;
        }
        MyKey other = (MyKey) o;
        return Objects.equal(a, o.a)
               && Objects.equal(b, o.b)
               && Objects.equal(c, o.c);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T14:32:38.183

这里有两种地图。一种具有字符串键和映射值。为此，如果您可以接受不变性，我可能会使用[Google Guava 的 ImmutableMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableMap.html)。它可能不会为您节省很多内存，但它可能会为您节省一些，并且比普通的 HashMap 执行得更好。

对于具有 Integer 键和 Double 值的其他 Map，您应该使用存储原语而不是对象的专用 Map 实现。例如看一下[Trove4j 的 TIntDoubleHashMap](http://trove4j.sourceforge.net/javadocs/index.html?gnu/trove/TLongIntHashMap.html)。这将为您节省大量内存，因为原语存储为原语而不是对象。

# windows-8 - 在 Metro 应用程序中从 UIElement 生成/保存位图

> ID：13551897
> 
> 赞同：2
> 
> 时间：2012-11-25T14:25:41.643
> 
> 标签：windows-8, windows-runtime, winrt-xaml, uielement

我需要保存与`UIElement`.

我已尝试[从 WPF 的 UIElement 链接生成 BitmapSource，](https://stackoverflow.com/questions/831860/generate-bitmapsource-from-uielement)但由于 API 有限，这在 Metro 应用程序中不起作用。

DirectX 是一种方法，但学习曲线陡峭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T16:35:30.987

这现在在 Windows 8.1 中可用，请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.rendertargetbitmap.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.rendertargetbitmap.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:24:12.873

除了自己渲染之外别无他法，您可以使用`WriteableBitmap`或 DirectX 来完成，具体取决于您想要实现的目标。这完全是由于`WriteableBitmap.Render()`Silverlight 中缺少可用的方法以及 WPF 中的类似方法。

*编辑 1

[Stack Overflow](https://stackoverflow.com/questions/11627830/creating-bitmap-image-from-xaml-control-using-writablebitmapex)和[MSDN](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/65a6870d-1412-4701-ae12-258ed2b45452/)上也不断有人问类似的问题。希望在不久的将来可以在 WinRT/XAML 中提供一种简单的方法，但现在您必须使用这些变通方法。

*编辑 2

我刚刚研究了很短的时间，但我正在努力实现一些基本的组合代码来将可视化树渲染为位图。现在让它适用于一些基本的 TextBlocks，但我可能很快也会添加其他部分。您可以使用代码添加场景中所需的元素。

[http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/585d3ae5a3e3#WinRTXamlToolkit.Composition%2fWriteableBitmapRenderExtensions.cs](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/585d3ae5a3e3#WinRTXamlToolkit.Composition%2fWriteableBitmapRenderExtensions.cs)

# html - 如何仅向屏幕阅读器显示标签 - Web Accessiblity

> ID：13551899
> 
> 赞同：6
> 
> 时间：2012-11-25T14:25:47.900
> 
> 标签：html, accessibility, screen-readers

在 HTML 中，我想显示一个`<label>`放置在我的文本框中的内容，以便仅显示给屏幕阅读器或语音浏览器。关于 WAG-ARIA 指南，有什么方法可以实现这一点，我也想知道反之亦然的情况，即仅从语音浏览器中隐藏一些文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T15:46:13.490

我发现的最好方法是创建一个可以切换的类，该类将使用 CSS 以可视方式隐藏文本。我使用的代码是：

```
 .hidden
{position:absolute;
left:-10000px;
top:auto;
width:1px;
height:1px;
overflow:hidden;} 
```

至于仅对屏幕阅读器隐藏文本，什么样的情况需要这样做？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T14:10:58.997

为此，只需使用一些 CSS 将其置于屏幕外。这将在视觉上隐藏标签，除非他们禁用样式表。你在这里并不需要 ARIA，除非你想要做的东西比你说的更花哨。

> 到底是谁禁用了样式表？

我不能给出百分比，但由于一些原因，我会定期禁用它们。我今天早上必须这样做才能填写表格，因为他们的 CSS 和 JS 很不稳定。

> 我还想知道反之亦然的情况，即仅从语音浏览器中隐藏一些文本？

我真的不知道你这是什么意思。我会在黑暗中拍摄，并说你在谈论使用 Dragon NaturallySpeaking 的人。隐藏`label`s 实际上会降低用户体验。对于屏幕阅读器、JAWS、NVDA、VoiceOver，它执行以下操作：哦，嘿，我在一个文本框中，是否有一个带有我 ID 的 for 属性的标签？是的，有，然后在`label`. 龙几乎以相反的方式工作。它识别出文本是一个标签，并且匹配起来，当人们说出标签中的单词（例如名字）时，表单元素会获得焦点。

查看另一个答案，如果他们将这个问题正确解释为：“如何[或可以]从屏幕阅读器中隐藏页面的某些部分？” 答案是肯定的，您可以使用该`aria-hidden`属性。前几天我[回答了一个问题`aria-hidden`](https://stackoverflow.com/questions/13365938/gwt-div-aria-hidden-not-hiding-in-ie/13382831#13382831)，其中的链接可能会提供见解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-20T11:27:42.617

目前在**Chrome**中也有这样的工作：

```
<h1 aria-hidden="false" style="display: none;">Heading only for Screen Readers</h1>
<h1 aria-hidden="false" style="visibility: hidden;">Second Heading only for Screen Readers</h1>
<h1 aria-hidden="true">Heading only for Screen</h1> 
```

其中第一个和第二个标题由屏幕阅读器阅读。

另请参阅我的答案：[https ://stackoverflow.com/a/49940541/9219743](https://stackoverflow.com/a/49940541/9219743)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-23T11:12:31.280

我一直在试图找到一个解决方案并写了这样的东西：

```
 .hidden {
    opacity: 0;
    pointer-events: none;
    position: absolute;
   } 
```

你怎么看？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-20T19:55:29.670

最佳答案是正确的方法。

```
*class/tag* { 
position:absolute;
left:-10000px;
top:auto;
width:1px;
height:1px;
overflow:hidden;
} 
```

应该知道，这是 Webaim 推荐的代码，[Webaim](https://webaim.org/techniques/css/invisiblecontent/)是一个致力于为所有人提供 Web 可访问性的组织。

# ruby-on-rails - Rails 尝试在 f.label 标记中使用 html

> ID：13551900
> 
> 赞同：2
> 
> 时间：2012-11-25T14:25:50.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在努力实现这一目标：

```
<label ...>First name<em>*</em></label>
<input ... /> 
```

有了这个：

```
<%= d.label :first_name do %>First Name<em>*</em><% end %>
<%= d.text_field :first_name, :required => "required" %> 
```

但它实际上正在产生：

```
First Name
<em>*</em>
<label ...>
    First Name
    <em>*</em>
</label>
<input .../> 
```

如何获得我想要实现的 html 输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:29:53.317

只需将标签内容作为第二个参数传递给块，并使用`.html_safe`它来防止它被编码：

```
<%= d.label :first_name, "First Name<em>*</em>".html_safe 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T23:44:52.357

虽然这两个答案都能完成工作，但从网页设计的角度来看，这并不是真正“最正确”的方式。

相反，考虑给标签一个 html 类，如“必需”。然后在您的 CSS 中，为“必需”类的标签元素定义一个选择器，添加 * 并根据需要设置样式。

这是我的一个项目中的一些 SCSS：

```
.required::before {
        content: '*';
        color: $orange;
        margin-right: 2px;
        position: relative;
        left: -2px;
      }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T14:55:37.400

试试生的

```
<%= d.label :first_name, raw("First Name<em>*</em>") %> 
```

# ipad - 在 iPad ios6 中上传图片

> ID：13551901
> 
> 赞同：1
> 
> 时间：2012-11-25T14:26:04.390
> 
> 标签：ipad, ios6

好吧，这很奇怪。我有一个页面，可以上传图片。我想用iPad，用相机拍照。

我将它提交到一个 aspx 页面。我所做的一切（出于测试目的），是将图像保存到服务器，然后将其写回浏览器，使用：您上传：

一切都很好，在低光照条件下（黑暗图片）。我一离开办公室，进入标准灯光，应用程序就崩溃了。

听起来很愚蠢，我知道。

我猜这与图像大小有关。此外，ipad 会将图像上传到服务器（我看到它遇到了，并保存到文件系统中）。但是，ipad 从不等待服务器返回的响应。发送图像上传后，它只显示一个空白页面。

这就像图像正在后台上传，但 ipad 不会等待来自服务器的响应文本。

这听起来很熟悉吗？有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:05:19.297

仅供参考……通过将图像发布到 IFrame 来解决这个问题，然后通过 javascript 在主页上查询上传的图像。

仍然不知道为什么会出现原始问题，因为我可以复制该场景。哦，好吧，只是发布答案，以防其他人遇到这个问题。

# java - 模型视图控制器 - 如何构建我的程序？（Java 摇摆）

> ID：13551903
> 
> 赞同：-2
> 
> 时间：2012-11-25T14:26:18.213
> 
> 标签：java, swing, model-view-controller

我有一个带有 3 个独立 JSplitPanes 的窗口。我分别做了三个应用程序；因此，它们内部拥有一切，包括动作侦听器之类的东西。

我现在创建了第 4 个类，我刚刚将其他类称为对象并将它们放在窗格中。

这是否符合我应该使用的 MVC 标准？还是我实际上必须重新开始并拥有不同的数据结构？如果是这样，你会建议我如何构建它？在一个类中拥有所有“布局”的东西，在另一个类中拥有所有“数据结构”的东西，以及在另一个类中拥有所有“计算”的东西，因此像动作侦听器这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:35:16.357

我真的不明白你做了什么，但这里有一个简单的方法你可以自己检查：

*   摆动成分是否仅反映数据，而不是保持数据？
*   你有一个处理数据（并且只有数据）的类吗？
*   你有处理逻辑的类吗？

你的答案应该是`yes`所有问题。

如果您在侦听器方法中有逻辑，那么您做错了。如果您要求视觉对象获取数据，那么您做错了。

您如何组织窗格并使其看起来不错是无关紧要的。

# google-bigquery - 是否可以将云 sql 表加入 bigquery？

> ID：13551906
> 
> 赞同：4
> 
> 时间：2012-11-25T14:26:49.643
> 
> 标签：google-bigquery, google-cloud-sql

我在 bigquery 中有大量数据，我想做一些分析，通过加入我在云 sql 中的一小组数据来增强这些分析。我已经搜索但找不到两者之间的基于 sql 的桥梁。我在想这样的事情：

```
SELECT
  bqdb.table as a,
  csdb.table as b,
  csdb.table as c
FROM bigquery:project:bqdb.table as t1,cloudsql:project:csdb.table as t2
JOIN t1 ON t1.a=t2.b
WHERE a='foo'
GROUP BY a,b
ORDER BY c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:39:02.940

Cloud SQL 和 Google BigQuery 中的数据之间目前没有直接的桥梁。为了运行这样的查询，您需要通过 mysqldump 工具以 CSV 格式导出 Cloud SQL 表数据，然后将该数据作为新表导入 BigQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-15T15:17:59.263

根据[此处](https://cloud.google.com/bigquery/docs/cloud-sql-federated-queries#example_query)的文档，这现在是可能的：

> 数据通常分散在许多地方。您可以在 BigQuery 中存储一个客户表，而在 Cloud SQL 中存储一个销售表，并希望在一个查询中连接这两个表。
> 
> BigQuery Cloud SQL 联合使 BigQuery 能够实时查询驻留在 Cloud SQL 中的数据，而无需复制或移动数据。它支持 Cloud SQL 中的 MySQL（第 2 代）和 PostgreSQL 实例。
> 
> 在初始的一次性设置之后，您可以使用新的 SQL 函数编写查询`EXTERNAL_QUERY()`。
> 
> ...
> 
> 假设您需要将每个客户的第一个订单日期包含在我们在概述中描述的报告中。此数据目前不在 BigQuery 中，但在 Cloud SQL 中的可操作 PostgreSQL 数据库中可用。以下联合查询示例实现了这一点。
> 
> ```
> SELECT c.customer_id, c.name, SUM(t.amount) AS total_revenue,
> rq.first_order_date
> FROM customers AS c
> INNER JOIN transaction_fact AS t ON c.customer_id = t.customer_id
> LEFT OUTER JOIN EXTERNAL_QUERY(
>   'connection_id',
>   '''SELECT customer_id, MIN(order_date) AS first_order_date
>   FROM orders
>   GROUP BY customer_id''') AS rq ON rq.customer_id = c.customer_id
> GROUP BY c.customer_id, c.name, rq.first_order_date; 
> ```

# android - List Array 查看TextView中的所有条目

> ID：13551907
> 
> 赞同：0
> 
> 时间：2012-11-25T14:26:58.020
> 
> 标签：android

我有一个 ArrayList ，它从数据库中获取所有条目作为字符串

```
List<Amthal> amthal = getAmthalSetFromDb(p); 
```

我可以得到它的大小“它包含多少个字符串”

```
int i= amthal.size(); 
```

我想通过单击下一个按钮移动到下一个在 TextView 中一个接一个地查看这些字符串

我试图查看该数组列表中的任何字符串，但出现错误……“get(i-1)”必须返回该数组中的最后一个字符串……</p>

```
 tv.setText(amthal.get(i-1)); 
```

我的问题是如何检索和查看这些字符串？我应该将它转换为字符串数组还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:32:30.097

您可以通过使用计数器变量来解决您的问题：

```
public static int count=0;  //Declare it as class level varaible
yourbutton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {

    if(count < amthal.size())
         {
              tv.setText(amthal.get(count).toString()); //set textView Text here
              count++;  // increase counter here
         }
         else{
            //Reset counter to 0
          }
    }
}); 
```

# c++ - 将文本文件读入字符串。C++ ifstream

> ID：13551911
> 
> 赞同：7
> 
> 时间：2012-11-25T14:27:08.167
> 
> 标签：c++, ifstream

```
void docDB(){
     int sdb = 0;
     ifstream dacb("kitudacbiet.txt");
     if(!dacb.is_open())
         cout<<"Deo doc dc file"<<endl;
     else{
          while(!dacb.eof()){
               dacb>>dbiet[sdb].kitu;
               dacb>>dbiet[sdb].mota;
               //getline(dacb,dbiet[sdb].mota);
               /*
               string a="";
               while((dacb>>a)!= '\n'){
                //strcat(dbiet[sdb].mota,a);
                dbiet[sdb].mota+=a;
               }
               */
               sdb++;
          }
     }

} 
```

文本文件：“kitudacbiet.txt”

```
\ Dau xuyet phai
@ Dau @
# Dau #
$ Ky hieu $
( Dau mo ngoac
) Dau dong ngoac 
```

![屏幕](../Images/1effdd1975bdd0da4fe99dec84785d46.png)

我想将第一行字符串读入 dbiet[sdb].kitu 并将其余行读入 dbiet[sdb].mota

示例：第 1 行 = \ Dau xuyet phai

dbiet[sdb].kitu = "\" 和 dbiet[sdb].mota = "Dau xuyet phai"

我想逐行阅读，直到遇到下线字符（'\n'）。这个怎么做。对不起，我的英语不好。谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-25T14:31:11.477

要将文件中的整行读入字符串，请`std::getline`像这样使用：

```
 std::ifstream file("my_file");
 std::string temp;
 std::getline(file, temp); 
```

您可以循环执行此操作，直到文件结束，如下所示：

```
 std::ifstream file("my_file");
 std::string temp;
 while(std::getline(file, temp)) {
      //Do with temp
 } 
```

## 参考

[http://en.cppreference.com/w/cpp/string/basic_string/getline](http://en.cppreference.com/w/cpp/string/basic_string/getline)

[http://en.cppreference.com/w/cpp/string/basic_string](http://en.cppreference.com/w/cpp/string/basic_string)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T14:36:49.730

看起来您正在尝试解析每一行。另一个答案向您展示了如何`getline`在循环中使用来分隔每一行。您将需要的另一个工具是`istringstream`分隔每个标记。

```
std::string line;
while(std::getline(file, line))
{
    std::istringstream iss(line);
    std::string token;
    while (iss >> token)
    {
        // do something with token
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T14:31:39.140

`getline(fin, buffer, '\n')`
在哪里`fin`打开文件（ifstream 对象）并且`buffer`是`string/char`要复制行的类型。

# performance - 在 CUDA 探查器 nvvp 中，“共享/全局内存重放开销”是什么意思？它是如何计算的？

> ID：13551923
> 
> 赞同：6
> 
> 时间：2012-11-25T14:27:58.517
> 
> 标签：performance, cuda, overhead

当我们使用`CUDA`profiler`nvvp`时，有几个与指令相关的“开销”，例如：

*   分支分歧开销；
*   共享/全局内存重播开销；和
*   本地/全局缓存重播开销。

我的问题是：

1.  是什么导致了这些间接费用？以及
2.  它们是如何计算的？
3.  同样，如何计算全局加载/存储效率？

附件：我在 CUDA5 工具包中的“CUDA Profiler 用户指南”中找到了计算这些开销的所有公式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:18:34.543

您可以在此处找到您的问题的一些答案：

[为什么 CUDA Profiler 指示重放指令：82% != 全局重放 + 本地重放 + 共享重放？](https://stackoverflow.com/questions/7187489/why-does-cuda-profiler-indicate-replayed-instructions-82-global-replay-lo)

> **Replayed Instructions (%)**这给出了在内核执行期间重放的指令的百分比。重放指令是硬件实际发出的指令数与内核要执行的指令数之差。理想情况下，这应该为零。这计算为 100 *（发出的指令 - 执行的指令）/发出的指令
> 
> **全局内存重播 (%)**由于全局内存访问而导致的重播指令的百分比。这计算为 100 *（l1 全局加载未命中）/发出的指令
> 
> **本地内存重播 (%)**由于本地内存访问而导致的重播指令的百分比。这计算为 100 * (l1 本地加载未命中 + l1 本地存储未命中) / 发出的指令
> 
> **共享存储库冲突重播 (%)**由于共享存储库冲突而导致的重播指令的百分比。这计算为 100 *（l1 共享冲突）/发出的指令

# lexical-analysis - 带有 C 的词法分析器，换行符

> ID：13551924
> 
> 赞同：3
> 
> 时间：2012-11-25T14:28:00.763
> 
> 标签：lexical-analysis, lexical

我有4条规则

```
rule1: match variable 
rule2: match Float 
rule3: match Integer 
rule4: [ \t] ; //skipping space, tabs 
rule5: \n ; 
```

现在我想要一个匹配错误的规则，其他任何不是 ID、Float、Integer 的东西，例如：“&^()>~....”

所以这是我创建的规则：

```
. {   printf("found an error:%s\n",yytext);
      err_count++;
} 
```

但是有问题，每当扫描仪跳到下一行时，它就会捕获一个未知的令牌。

我的输入：

> ```
> 12+32+22:18,18
> 99558^8*6
> 15.~646(5 
> ```

```
My output

    Found a number:12
    Found a error:+
    Found a number:32
    Found a error:+
    Found a number:22
    Found a error::
    Found a number:18
    Found a error:,
    Found a number:18
    Found a error:
    Found a number:99558
    Found a error:^
    Found a number:8
    Found a error:*
    Found a number:6
    Found a error:
    Found a float:15.
    Found a error:~
    Found a number:646
    Found a error:(
    Found a number:5 
```

出于调试目的，我尝试通过用方括号括起来来找出令牌

```
. {
        printf("Found a error:[%s]\n",yytext);
        err_count++;
        }

bash show:
    Found a number:12
    Found a error:[+]
    Found a number:32
    Found a error:[+]
    Found a number:22
    Found a error:[:]
    Found a number:18
    Found a error:[,]
    Found a number:18
    ]ound a error:[
    Found a number:99558
    Found a error:[^]
    Found a number:8
    Found a error:[*]
    Found a number:6
    ]ound a error:[
    Found a float:15.
    Found a error:[~]
    Found a number:646
    Found a error:[(]
    Found a number:5

 redirect output to a txt file
    Found a number:12
    Found a error:[+]
    Found a number:32
    Found a error:[+]
    Found a number:22
    Found a error:[:]
    Found a number:18
    Found a error:[,]
    Found a number:18
    Found a error:[
    ]
    Found a number:99558
    Found a error:[^]
    Found a number:8
    Found a error:[*]
    Found a number:6
    Found a error:[
    ]
    Found a float:15.
    Found a error:[~]
    Found a number:646
    Found a error:[(]
    Found a number:5 
```

任何人都知道是什么导致了这个问题？谢谢，我可以向你保证 rule5: \n ; 工作正常，这是证明

```
I add print to rule5"\n { printf("newline\n"); 

redirect output to a txt file
Found a number:12
Found a error:[+]
Found a number:32
Found a error:[+]
Found a number:22
Found a error:[:]
Found a number:18
Found a error:[,]
Found a number:18
Found a error:[
]
newline
Found a number:99558
Found a error:[^]
Found a number:8
Found a error:[*]
Found a number:6
Found a error:[
]
newline
Found a float:15.
Found a error:[~]
Found a number:646
Found a error:[(]
Found a number:5
Found a error:[
]
newline
Found a variable:T189_10
Found a error:[@]
Found a float:12.2
Found a error:[
]
newline
Found a number:1
Found a variable:ABB21u
Found a error:[=]
Found a variable:ier_
Found a error:[
]
newline
Found a error:[$]
Found a error:[%]
Found a error:[^] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:37:40.043

你要找回车符（\r），windows系统按回车键插入两个字符是不是很常见，两个字符是换行符（\n）和回车符（\r），添加以这种方式：

```
rule4: [ \t\r] 
```

它会正常工作。

# .htaccess - 试图重写 url

> ID：13551928
> 
> 赞同：1
> 
> 时间：2012-11-25T14:28:30.687
> 
> 标签：.htaccess, mod-rewrite

我试图改变我的网址的外观，因为它看起来真的很乱

我一直在尝试在我的 .htaccess 文件中解决 mod-rewrite

这是我的网址：http://www.blablabla.com/user_poll_profile.php?user_id=212

我基本上只是想要：blablabla.com/user

这是我的 .htaccess 文件

```
RewriteEngine On
RewriteRule ^([a-z]+)/([a-z\-]+)$ /$1/$2.php [L] 
```

是否有可能获得我想要的网址？？？？或者我什至接近？？？？

我查看了大约一百万个不同的 tut 和论坛，但没有一个有用:(

任何帮助都会很棒

亲切的问候罗南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:43:28.260

当使用这样的重写规则时，规则的第一部分应该反映您想要在地址栏中输入的内容，第二部分应该是实际文件所在的位置。

在这种情况下，您要输入 www.domain.com/user/212，这应该会显示 www.domain.com/user_poll_profile.php?user_id=212 的内容，对吗？那么这就是你应该处理的方式：

```
RewriteEngine On
RewriteRule ^user/([0-9]+)$ /user_poll_profile.php?user_id=$1 [L] 
```

不过，这只会重写用户 URL。如果您有更多像这样工作的网址，则需要稍微更改代码。这完全取决于您想要的 url 和 php 文件的底层结构，因此现在很难给出更通用的答案。

# c# - 使用 .NET 4.5 的 dropbox.com 的 API

> ID：13551931
> 
> 赞同：3
> 
> 时间：2012-11-25T14:28:42.080
> 
> 标签：c#, api, windows-8, windows-runtime, dropbox

我正在使用 C# 和 XAML 开发 Metro 应用程序，我想连接到 Dropbox.com 并从保管箱中检索文件，我尝试从[此处](http://nuget.org/packages/DropNet)和[此处](http://sharpbox.codeplex.com/)以及其他一些链接安装保管箱 API 但是当我从安装时`Package Manager Console(VS 2012)`，它会在所有 API 的安装请检查图像![安装错误](../Images/8ff1998d369d102f81e21c58de5f265e.png)。
我了解这些版本的 API 不支持`framework 4.5`. 谁能告诉我在哪里可以找到支持的正确版本`framework 4.5`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T17:12:35.863

它与 .NET 4.5 没有任何关系，问题在于您选择的项目类型。它选择了 .NETCore 配置文件，这是您从可移植类库项目或 Windows 应用商店项目中获得的配置文件。您尝试使用的库只能在桌面应用程序中使用。

您可以使用他们的[通用 REST api](https://www.dropbox.com/developers/reference/api)。Fuggedaboudit 如果这是一个商店应用程序，当用户厌倦等待时，您无法继续进行文件传输。

# php - 使用数组时隐藏特定的单词

> ID：13551936
> 
> 赞同：0
> 
> 时间：2012-11-25T14:29:05.483
> 
> 标签：php

我目前在一个房地产网站上工作，当从一个数组中检索统计数据时，我不想显示一个特别称为“post_title”的数据。这是代码

```
<?php if ( have_properties() ) { ?>

<ul class="<?php wpp_css('property_featured_shortcode::featured_properties',   "wpp_featured_properties_shortcode clearfix"); ?>">

<?php foreach ( returned_properties('load_gallery=false') as $property) {  ?>

<li class="<?php wpp_css('property_featured_shortcode::property', "{$class} wpp_featured_property_container wp-caption clearfix"); ?>" >

  <a class="<?php wpp_css('property_featured_shortcode::thumbnail', "featured_property_thumbnail"); ?>"  href="<?php echo $property['permalink']; ?>">

    <?php property_overview_image($thumbnail_size); ?>

  </a>

  <?php if(is_array($stats)): ?>

    <ul class="<?php wpp_css('property_featured_shortcode::stats', "wp-caption-text shortcode_featured_properties"); ?>">

      <?php foreach($stats as $stat):

        if(empty($property[$stat])) continue;

        ?>

        <li class="<?php echo $stat; ?>">

          <dl>

            <dt><?php echo (empty($wp_properties['property_stats'][$stat]) ? ucwords($stat) : $wp_properties['property_stats'][$stat]); ?>:</dt>

            <dd><?php echo $property[$stat];  ?></dd>

          </dl>

        </li>

      <?php endforeach; ?>

    </ul>

  <?php endif; ?>

</li>

<?php } ?>

</ul>

<?php } ?> 
```

这就是结果

![结果](../Images/b31c2623accb8fbb78f20d6d9030e09c.png).

请问我该如何隐藏帖子标题？

我尝试通过尝试下面的代码将其更改为仅回显标题，但它不起作用。

```
<?php if ([$stat] == 'post_title') echo 'Title' ?> 
```

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:42:18.680

您需要更改的部分是标签，它正在由此代码输出（您可以从末尾输出的冒号看出）：

```
<?php echo (empty($wp_properties['property_stats'][$stat]) ? ucwords($stat) : $wp_properties['property_stats'][$stat]); ?>: 
```

试试这个：

```
<?php echo (empty($wp_properties['property_stats'][$stat]) ? ucwords($stat == 'post_title'? 'Title': $stat) : $wp_properties['property_stats'][$stat]); ?>: 
```

# regex - 使用 URL 重写从 url 重定向中删除文件夹

> ID：13551940
> 
> 赞同：1
> 
> 时间：2012-11-25T14:29:47.183
> 
> 标签：regex, url, iis, rewrite

考虑如下结构：

```
/folderx/a.aspx
/folderx/b.aspx
/foldery/c.aspx
/folderz/d.aspx 
```

当前**浏览器显示/显示**以下 URL »

```
https://xxx.domain.yyy/folderx/a.aspx
https://xxx.domain.yyy/folderx/b.aspx
https://xxx.domain.yyy/foldery/c.aspx
https://xxx.domain.yyy/folderz/d.aspx 
```

我们如何**重定向**以**在浏览器**地址栏中**显示/显示**以下 URL ？»

 **```
https://xxx.domain.yyy/a
https://xxx.domain.yyy/b
https://xxx.domain.yyy/c
https://xxx.domain.yyy/d 
```

健康）状况：

*   URL 匹配中没有硬编码`folderx`, `foldery`,`folderz`等

几天来试图得到这个，但无法达到满足上述要求的工作规则集。
任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:46:19.180

```
RewriteCond %{HTTP_HOST}:%{SERVER_PORT}s ^(.*):(443(s)|\d+s)$
RewriteRule ^/?([^/]+)/([^/]+)\.aspx$ http%3://%1/$2 [NC,R=301,QSA,L,CO=dir:$1:%1:0:/] 
```

第一条规则会将请求[重定向](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_r)`domain/directory/file.aspx`到原始请求中的路径信息`domain/file`并[设置 cookie 。](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_co) `dir`

```
RewriteCond %{HTTP_COOKIE} (?:^|;\s*)dir=([^;]+)
RewriteRule ^/?(.*)$ /%1/$1.aspx [QSA,L] 
```

第二条规则将[读取 cookie](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond) `dir`并根据原始请求的路径为请求提供服务。这将导致使用正确的路由从 url 中删除目录...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:44:31.533

如果没有对可能的文件夹名称进行硬编码，这是不可能的。mod_rewrite 如何神奇地知道哪些文件夹是可能的？它必须是硬编码的。它违反了你的条件，但这是唯一的方法。

它可以尝试每一个，因此它不必知道哪些文件夹与哪些 aspx 文件匹配，但它必须知道哪些文件夹是可能的。如果您知道哪些文件夹是可能的（例如，“folderx”、“folder”和“folderz”），您可以对每个可能的文件夹进行一系列重写，如下所示：

```
RewriteCond /folderx%{REQUEST_FILENAME}.aspx -f
RewriteRule ^(.+)$ /folderx/$1.aspx [L,QSA]

RewriteCond /foldery%{REQUEST_FILENAME}.aspx -f
RewriteRule ^(.+)$ /foldery/$1.aspx [L,QSA]

RewriteCond /folderz%{REQUEST_FILENAME}.aspx -f
RewriteRule ^(.+)$ /folderz/$1.aspx [L,QSA] 
```

这些规则说“如果在定义的文件夹中存在带有 aspx 扩展名的文件，请重写它”。**

# android - 在 Android 应用程序中使用 Facebook SDK

> ID：13551941
> 
> 赞同：0
> 
> 时间：2012-11-25T14:29:47.860
> 
> 标签：android, facebook, sdk

我试图让用户发布到他的 Facebook 墙上。为此，我下载了适用于 Android 的 Facebook SDK，并从 Facebook 复制了官方代码来调用请求方法。问题是我的 SDK 声明 .request 方法已被弃用。我发现周围有几个 SDK，但我找不到适合我的一整套（SDK + 示例代码）。有人可以指出有关从何处获取所有这些的完整工作说明吗？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:13:03.147

我做了一个简单的程序，你必须登录，然后你可以将状态发布到你的墙上。有或没有对话框。
安卓项目[链接](https://www.dropbox.com/s/jgl4u6beu7hj5pj/androidfacebook.zip)

脸书 API[链接](https://www.dropbox.com/s/lxr10hgkg8x5d2c/com_facebook_android.rar)

首先，您必须使用示例源 (com_facebook_android) 创建一个项目，然后将其导入您的 android 项目。它会起作用

干杯

# ruby - Ruby - 从任意类/模块中获取常量

> ID：13551942
> 
> 赞同：-5
> 
> 时间：2012-11-25T14:30:00.147
> 
> 标签：ruby

我有两节课：

```
class Ios 
  REST_ENDPOINT = 'http://rest'
  SOAP_ENDPOINT = 'http://soap'
end

class Android
  REST_ENDPOINT = 'http://rest'
  SOAP_ENDPOINT = 'http://soap'
end 
```

然后我有两个用于 REST 和 SOAP 的类：

```
class REST
  def some_action
    # I want to use the endpoint based on device type
  end
end

class SOAP
  def some_action
    # I want to use the endpoint based on device type 
  end
end 
```

如何在 REST 和 SOAP 类中使用基于设备类型的端点 URL？

问候，凯恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:36:50.027

这是你想要达到的目标吗？

```
class REST
  def some_action
    ios_url = URI.parse("#{Ios::REST_ENDPOINT}/login")
    android_url = URI.parse("#{Android::REST_ENDPOINT}/login")
  end
end

class SOAP
  def some_action
    ios_url = URI.parse("#{Ios::SOAP_ENDPOINT}/login")
    android_url = URI.parse("#{Android::SOAP_ENDPOINT}/login")
  end
end 
```

你也可以像这样使用一些重构：

### 米信

```
module Endpoints

  def initialize device = Ios
    @device = device_class(device)
  end

  def url device = nil
    URI.parse "#{endpoint(device || @device)}/login"
  end

  def ios_url
    URI.parse "#{endpoint Ios}/login"
  end

  def android_url
    URI.parse "#{endpoint Android}/login"
  end

  private
  def endpoint device
    device_class(device).const_get self.class.name + '_ENDPOINT'
  end

  def device_class device
    device.is_a?(Class) ? 
      device : 
      Object.const_get(device.to_s.capitalize)
  end

end 
```

### 在你的课程中包含 Mixin

```
class REST
  include Endpoints

  def some_action
    # use ios_url and android_url here
  end
end

class SOAP
  include Endpoints

  def some_action
    # use ios_url and android_url here
  end
end 
```

### 一些测试：

```
puts REST.new(:Ios).url
#=> http://ios-rest.com/login

puts REST.new.url :Ios
#=> http://ios-rest.com/login

puts REST.new.ios_url
#=> http://ios-rest.com/login

puts REST.new(:Android).url
#=> http://android-rest.com/login

puts REST.new.url :Android
#=> http://android-rest.com/login

puts SOAP.new.android_url
#=> http://android-soap.com/login 
```

### [这](http://cibox.org/slivu/stackoverflow?lang=ruby&file=ruby-classes-or-modules.rb&versions=1.9.3&run=true)是一个工作演示

# android - 将非 Activity 类强制转换为 Activity

> ID：13551944
> 
> 赞同：0
> 
> 时间：2012-11-25T14:30:10.740
> 
> 标签：android, menu, android-activity, jfreechart

我有一个扩展 DemoView 类的类（使用 afreechart 库显示一些图表）。我的问题是我想在那个 Activity 中创建一个菜单，只是一个菜单。我正在考虑将该类转换为 Activity，这合乎逻辑吗？或者有没有其他解决方案？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:10:18.637

[对 DemoView 源代码的](http://code.google.com/p/afreechart/source/browse/trunk/afreechart_sample/src/org/afree/chart/demo/DemoView.java?r=44)第一次基本检查表明它继承自[android.view.View](http://developer.android.com/reference/android/view/View.html)，它只是扩展了 Object。所以你最好*不要*尝试你所描述的：

> 将该类转换为 Activity

如果你想添加菜单支持，也许你应该试试这个架构：

*   扩展 DemoView 并添加菜单支持（如 DemoViewWithMenu 类）
*   让你的类扩展 DemoViewWithMenu 而不仅仅是 DemoView

但是，如果您只是尝试从 View 对象中访问 Activity 对象，则可以利用 Activity 也是一个 Context 的事实。但是，并非所有上下文都是活动，因此以下可能有效，但也可能会给您带来例外：

```
Activity a = (Activity)getContext();  //inside method of View class 
```

也可以看看：

*   [在 View 上下文中获取 Activity 对象](https://stackoverflow.com/questions/3901590/get-activity-object-while-in-view-context)
*   [从 View 访问 Activity 类](http://www.41post.com/585/programming/access-activity-class-from-view)

# boost - 并行 bgl 延迟和性能

> ID：13551949
> 
> 赞同：1
> 
> 时间：2012-11-25T14:30:16.753
> 
> 标签：boost

我正在开发一个对图的每个顶点进行计算的应用程序。这里的主要问题是延迟，因为每次计算都相当小。例如，每个计算可能需要 10 毫秒才能自行执行，因此 PGBL 不应给进程增加任何明显的延迟。

我可以编写自己的准系统图形例程来完成这项任务。当然，PBGL 有更多的特性会很不错。例如，当延迟不是问题时，我什至可能将一些计算卸载到“云”。

所以基本上，在 cpu 或多核 cpu 上跨向量计算的开销是多少？另外，将来是否有可能将顶点计算卸载到 GPU 上？

我从未使用过 PGBL，但在 boost 库中遇到过它，它引起了我的注意，它可能对我的应用程序来说几乎是完美的，除了潜在的延迟问题。

例如，一个非常简单的树被分成 n 个分支，每个分支的计算在单独的核心上运行，与使用 PBGL 相比，性能差异是什么？（对于小的计算时间，显然计算越大，差异越小）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:11:27.803

Parallel BGL 主要是一个分布式内存库。有一个研究版本也包含了共享内存并行性。从长远来看，我们可能会添加加速器支持，假设加速器内存模型曾经支持内核中的原子、重叠输出写入集以及支持有助于其他类型并行化的图形算法所需的其他复杂行为。主要目标是找到一个单一的并行抽象，允许使用它表达的图形算法使用各种硬件并行化。

无论如何，听起来您正在寻找一个主要是共享内存的并行图形库，而 Parallel BGL 可能不适合。目前，您必须运行多个 MPI 等级，这绝对不能满足您的“低延迟”约束。多年来，人们对 BGL 的共享内存和/或 SIMD 版本产生了一些兴趣，但没有任何结果。随着在 Boost 中添加更多共享内存并行库（Lockfree、各种 SIMD 实现和容器等），实现某种共享内存并行 BGL 所需的工作量变得非常低，所以也许这几天会发生.

# android - 从安卓设备发送短信

> ID：13551953
> 
> 赞同：0
> 
> 时间：2012-11-25T14:31:05.903
> 
> 标签：android, multithreading, sms

我有一个课程可以计算我的位置并将其打印在屏幕上。现在我想每隔 x 次向某个号码发送一条带有该地址的短信。所以这需要 sleep 方法，我猜这意味着我需要一个扩展 Thread 的类 .. 但是该类如何从另一个类中获取 TextView 字符串？它们将如何相互连接？顺便说一句，我在这个论坛的某个地方找到了这个代码来发送短信：

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("sms:"+ phoneNumber))); 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:47:38.160

你可以使用短信管理器，

```
 String Text = "My location is: " +
    "Latitude = " + current_lat +
    "Longitude = " + current_lng;

    SmsManager sender=SmsManager.getDefault();
    sender.sendTextMessage("9762281814",null,Text , null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:48:27.553

将与线程相关的内容包装在异步任务中，并将当前活动的 Context 参数传递给它。这样你就可以调用异步任务的`Context.findViewById()`内部`doInBackGround()`方法。这样，您甚至不会在主线程上执行任何阻塞操作（这将导致您将来出现另一个异常）。

```
public void SendSmsTask extends AsyncTask<Context, Void, Void> {
  @Override
  protected Void doInBackGround(Context... contexts) {
    for(Context con : contexts) {
      TextView abc = context.findViewById(<textview Id>);
      // send your sms after this
    }
  }
... // remaining functions and logic
} 
```

您可以使用以下方法从您的活动开始此任务：

```
new SendSmsTask().execute(this); 
```

# zend-framework2 - ZF2：如何完成来自其他Action方法的请求，然后请求使用Forward Controller Plugin？

> ID：13551956
> 
> 赞同：1
> 
> 时间：2012-11-25T14:31:23.020
> 
> 标签：zend-framework2, zend-framework-mvc, zend-framework-routing

在 ZF 中，控制器中有一个 Forward Plugin。手册说：

> 有时，您可能希望从匹配的控制器中调度其他控制器——例如，您可能使用这种方法来构建“小部件化”内容。Forward 插件有助于实现这一点。

它的例子是这样的：

```
$foo = $this->forward()->dispatch('foo', array('action' => 'process')); 
```

插件将`foo`控制器 ( `FooController::processAction`) 中的某些内容返回到调用插件的初始匹配控制器。但是是否可以从该`foo`控制器完成请求（向浏览器发送最终响应）？像这样：

```
class IndexController extends AbstractActionController {

    // The request comes here by routes
    public function indexAction() {

        if($someCondition) {

            // I forward the request to the fooAction of this IndexController
            // And I do not wait for any return from it, the response
            // will be sent from fooAction, the run will not come back here
            $this->forward()->dispatch('index', array('action' => 'foo'));
        }
    }

    // I want to send the response from this action and finish with the request
    public function fooAction() {

        $response = $this->getResponse();
        $response->setStatusCode(200);
        $response->setContent($someContent);

        // But it returns the response to the indexAction,
        // instead of sending it to browser.
        // How to finish the request here?
        return $response;
    }
} 
```

有可能`Forward`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:17:56.483

使用常规 php`return`构造：

```
return $this->forward()->dispatch('index', array('action' => 'foo')); 
```

# php - “SQLSTATE[HY000]: 一般错误” - 一条语句中有多个 SQL 查询

> ID：13551961
> 
> 赞同：0
> 
> 时间：2012-11-25T14:31:40.773
> 
> 标签：php, mysql, pdo, xampp

我的 php 脚本中有一个由 PDO 处理的查询。确切地说，它是 1 个语句中的 2 个查询。查询本身在 SQL 客户端中运行良好（我使用的是 HeidiSQL）。然而 PHP 却给了我这个错误：“ **SQLSTATE[HY000]: General error** ”，没有别的。没有错误号或消息。

有没有办法以某种方式调试查询？我认为查询本身没有错误，所以我不知道出了什么问题。mysql错误日志中没有显示任何内容。我启用了 mysql 常规日志，但它只记录查询本身而不显示错误。

我的堆栈：XAMPP 1.8、Apache 2.4.3、PHP 5.4.7、MySQL 5.5.27

这是我的查询（相当长）：

```
 /*First query - generating temp table with overdue jobs*/

    CREATE TEMPORARY TABLE temp AS (
        SELECT  j.NetworkID,
            @clientID := j.ClientID,
            j.BranchID,
            j.ServiceProviderID,
            (   
                (DATEDIFF(CURDATE(), j.DateBooked)) 
                - 
                IF(
                (@unit :=   (
                    SELECT      uctype.UnitTurnaroundTime
                    FROM        job
                    LEFT JOIN   product ON job.ProductID = product.ProductID
                    LEFT JOIN   unit_type AS utype ON product.UnitTypeID = utype.UnitTypeID
                    LEFT JOIN   unit_client_type AS uctype 
                            ON utype.UnitTypeID = uctype.UnitTypeID 
                            AND uctype.ClientID = @clientID
                    WHERE       job.JobID = j.JobID
                    )
                ) IS NOT NULL,      /*statement*/
                @unit,          /*TRUE - Client Unit Type has turnaround time assigned in the db*/  
                IF(         /*FALSE - Now checking if Client Default Turnaround Time is set*/
                    (@clnt := (
                        SELECT  DefaultTurnaroundTime AS dtt
                        FROM    client
                        WHERE   client.ClientID = @clientID
                    )
                    ) IS NOT NULL,  /*statement*/
                    @clnt,      /*TRUE - Client Default Turaround time is set*/
                    (           /*FALSE - falling back to general default*/
                    SELECT  gen.Default
                    FROM    general_default AS gen
                    WHERE   gen.GeneralDefaultID = 1
                    )
                )
                )
            ) AS overdue

        FROM    job AS j

        HAVING  overdue > 0
    );

    /*Second query - filtering out overdue jobs with specific time range*/

    SELECT  COUNT(*) AS number
    FROM    temp
    WHERE   overdue >= :from AND overdue <= :to AND overdue != 0 
```

**更新：**问题似乎是由 PDO 拒绝在一个语句中运行多个查询引起的。我在执行查询之前插入了这个：

```
$conn->setAttribute(PDO::ATTR_EMULATE_PREPARES, 0); 
```

所以现在“一般错误”消失了，但我得到了

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax 
```

就在第一个查询之后，这意味着 PDO 只运行一个查询并拒绝继续......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:54:21.387

毕竟，我找到了一种一次性运行多个查询的方法。看来**MySQLi->multi_query**允许这样做。再次对 PDO 深感失望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:44:49.573

无需创建临时表。将您的两个语句合并为一个应该可以解决问题。

```
SELECT  COUNT(*) AS number
FROM    (giant select statement) temp
WHERE   overdue >= :from AND overdue <= :to AND overdue != 0 
```

如果您真的想要临时表，请使用两个不同的语句。一个用来创建表，一个用来查询它。一个更好的选择是使用[view](https://dev.mysql.com/doc/refman/5.5/en/views.html)。这样，怪物 SQL 语句就存在于数据库中，而不是您的 php 代码中。

# java - 可读性分类器的哪种方法

> ID：13551963
> 
> 赞同：0
> 
> 时间：2012-11-25T14:32:10.777
> 
> 标签：java, weka, svm, classification

恐怕我对分类器背后的理论理解不深，所以如果我的问题对你来说很幼稚，请原谅。

**目标：** 给定任意文本，根据年龄范围对其进行分类，即根据其可读性。所以我的课程将是年龄范围，如（简化）：5-6、6-8、8-10、10-14、14-16、成人。理想情况下，每个文本文档都应该获得每个类别的概率（不仅是最可能的类别）。

**当前状态：** 特征提取器已到位。它为每个文本文档输出一个特征向量，大约有 30 个特征，几乎都是数字的，其中一些是名义上的。我正在尝试使用 Weka 训练模型，目前使用 weka 中包含的 SMO svm，并通过网格搜索进行了优化。我也可以使用 libSVM，但这目前并不重要。

**问题：**

1.  你会为这个任务使用不同的分类器，尤其是希望输出具有每类概率的结果吗？
2.  训练数据并没有被划分在如此好的不相交范围内。这些范围可能重叠。一些文本（手动）分类为 10-12 范围，其他一些来自不同来源的文本被分类为 11-13 或 8-13 等。您将如何处理？修改过滤/训练？不是修改它们，而是以不同的方式解释结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:49:24.983

您可以尝试进行回归而不是分类 - 基本上您会尝试预测阅读每个文档的“理想”年龄。

这将允许您处理不同的年龄范围，尽管尚不完全清楚如何表示班级 - 也许只是从取平均值开始，所以对于 8-12，正确答案将是 10 等（并玩弄“成人”的价值有点）。

我的猜测是，它可能会导致对模型的估计更稳健，并且结果可以很好地解释——例如，如果你有很多 8-12 和 12-15 的例子，并且算法预测 11.9，你可以说对于 8-12 范围来说，这“勉强”可以理解。

# objective-c - NStimer 加载重复值

> ID：13551966
> 
> 赞同：0
> 
> 时间：2012-11-25T14:32:39.660
> 
> 标签：objective-c, ios, cocoa-touch, nstimer

我正在使用`NSTimer`每秒运行一次来​​加载用户从中看到的标签中的字符串`NSUserdefults`。当用户从一个`UITableView`字符串中选择时，该字符串保存在 中`userdefaults`，并且每秒运行的计时器会根据用户的选择更新标签。有没有办法在`NSUserdefults`不使用计时器的情况下检查中的值是否已更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:36:24.673

除非应用程序的用户默认值被另一个应用程序修改（这种情况不太可能发生，我什至不确定这在 iOS 上是否可行），否则您的应用程序应该*知道*值何时更改。如果它发生在后台线程中，您可以使用[`NSNotification`and`NSNotificationCenter`](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)来提醒应用程序的其他组件该值已更改。

# html - html2jade : 使用制表符作为缩进转换 html 2 翡翠

> ID：13551968
> 
> 赞同：1
> 
> 时间：2012-11-25T14:32:44.900
> 
> 标签：html, node.js, pug

使用 html2jade 将 html 文件转换为翡翠。

1.  但是，它使用 2 个空格作为缩进，并且看不到将制表符配置为缩进的方法。是否有任何配置选项可以将缩进字符指定为制表符？

此外，如果 html 具有以下注释块，则在将 html 转换为玉时面临问题：

```
<div id='view-templates'>
    <!--<div id='project-view'>
        <div id='toolbar'>
            <div id='top-list'></div>
            <div id='intvl-options'></div>
            <div id='display-options'></div>
        </div>
        <div id='top-chart'>
        </div>
        <div id='bw-chart'>
        </div>
    </div>-->
</div> 
```

上面的代码片段翻译为：

```
#view-templates
  //
    <div id='project-view'>
            <div id='toolbar'>
                <div id='top-list'></div>
                <div id='intvl-options'></div>
                <div id='display-options'></div>
            </div>
            <div id='top-chart'>
            </div>
            <div id='bw-chart'>
            </div>
        </div> 
```

1.  看起来它没有将注释的 HTML 转换为翡翠导致无效的缩进。转换为翡翠时是否有任何配置选项可以排除评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:18:15.423

不，没有固定的方式来使用制表符或空格。但是你可以从一个到另一个没有任何问题。也就是说，如果您将所有制表符更改为空格或反之亦然，Jade 会理解正在编写的内容，但必须是整个文档或文件都必须更改。

建议，这里的空格和评论要非常小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T08:19:49.280

当然，您可以在文本编辑器中从空格切换到制表符。以 Sublime 为例：

1.  将 html2jade 的结果粘贴到 Sublime 中
2.  在 View menu -> Indentation 中，选择 Tab Width : 2。
3.  再次在 View menu -> Indentation 单击 Convert Indentations to tabs。

工作完成了。

关于您的第一个问题：看起来玉转换器确实将 html 注释视为*未翻译*，从某种角度来看这是合乎逻辑的。您可以使用以下命令轻松地在jade中设置块注释：

```
//
  this is a
  block comment 
```

# python - 如何在 Python 中安装guess_language 包

> ID：13551969
> 
> 赞同：1
> 
> 时间：2012-11-25T14:32:44.083
> 
> 标签：python

这个问题可能是微不足道的，但老实说，我无法弄清楚，因为我是 python 新手。

我运行 Python 2.7.3，前面提到的包可以在[这里找到](https://bitbucket.org/spirit/guess_language)

如果您能帮助确保我已在笔记本电脑上正确安装它，我将不胜感激。仅供参考，这里分别是命令***$ ./setup.py install***和***$ python2 setup.py install***的输出。

**$ ./setup.py 安装**

```
running install
running build
running build_py
creating build/lib
creating build/lib/guess_language
copying guess_language/__main__.py -> build/lib/guess_language
copying guess_language/__init__.py -> build/lib/guess_language
copying guess_language/console_mode.py -> build/lib/guess_language
creating build/lib/guess_language/data
copying guess_language/data/__init__.py -> build/lib/guess_language/data
creating build/lib/guess_language/data/models
copying guess_language/data/models/az.py -> build/lib/guess_language/data/models
copying guess_language/data/models/tl.py -> build/lib/guess_language/data/models
copying guess_language/data/models/pt.py -> build/lib/guess_language/data/models
copying guess_language/data/models/hu.py -> build/lib/guess_language/data/models
copying guess_language/data/models/so.py -> build/lib/guess_language/data/models
copying guess_language/data/models/pt_br.py -> build/lib/guess_language/data/models
copying guess_language/data/models/da.py -> build/lib/guess_language/data/models
copying guess_language/data/models/tn.py -> build/lib/guess_language/data/models
copying guess_language/data/models/fr.py -> build/lib/guess_language/data/models
copying guess_language/data/models/fi.py -> build/lib/guess_language/data/models
copying guess_language/data/models/__init__.py -> build/lib/guess_language/data/models
copying guess_language/data/models/is.py -> build/lib/guess_language/data/models
copying guess_language/data/models/id.py -> build/lib/guess_language/data/models
copying guess_language/data/models/bg.py -> build/lib/guess_language/data/models
copying guess_language/data/models/la.py -> build/lib/guess_language/data/models
copying guess_language/data/models/sl.py -> build/lib/guess_language/data/models
copying guess_language/data/models/pl.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ca.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ru.py -> build/lib/guess_language/data/models
copying guess_language/data/models/sk.py -> build/lib/guess_language/data/models
copying guess_language/data/models/lt.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ne.py -> build/lib/guess_language/data/models
copying guess_language/data/models/af.py -> build/lib/guess_language/data/models
copying guess_language/data/models/haw.py -> build/lib/guess_language/data/models
copying guess_language/data/models/sq.py -> build/lib/guess_language/data/models
copying guess_language/data/models/nl.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ceb.py -> build/lib/guess_language/data/models
copying guess_language/data/models/nso.py -> build/lib/guess_language/data/models
copying guess_language/data/models/en.py -> build/lib/guess_language/data/models
copying guess_language/data/models/uz.py -> build/lib/guess_language/data/models
copying guess_language/data/models/es.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ts.py -> build/lib/guess_language/data/models
copying guess_language/data/models/cs.py -> build/lib/guess_language/data/models
copying guess_language/data/models/sw.py -> build/lib/guess_language/data/models
copying guess_language/data/models/mn.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ro.py -> build/lib/guess_language/data/models
copying guess_language/data/models/hi.py -> build/lib/guess_language/data/models
copying guess_language/data/models/tlh.py -> build/lib/guess_language/data/models
copying guess_language/data/models/lv.py -> build/lib/guess_language/data/models
copying guess_language/data/models/zu.py -> build/lib/guess_language/data/models
copying guess_language/data/models/vi.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ar.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ss.py -> build/lib/guess_language/data/models
copying guess_language/data/models/pt_pt.py -> build/lib/guess_language/data/models
copying guess_language/data/models/it.py -> build/lib/guess_language/data/models
copying guess_language/data/models/de.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ky.py -> build/lib/guess_language/data/models
copying guess_language/data/models/sv.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ha.py -> build/lib/guess_language/data/models
copying guess_language/data/models/cy.py -> build/lib/guess_language/data/models
copying guess_language/data/models/xh.py -> build/lib/guess_language/data/models
copying guess_language/data/models/fa.py -> build/lib/guess_language/data/models
copying guess_language/data/models/kk.py -> build/lib/guess_language/data/models
copying guess_language/data/models/et.py -> build/lib/guess_language/data/models
copying guess_language/data/models/tr.py -> build/lib/guess_language/data/models
copying guess_language/data/models/st.py -> build/lib/guess_language/data/models
copying guess_language/data/models/sr.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ve.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ur.py -> build/lib/guess_language/data/models
copying guess_language/data/models/ps.py -> build/lib/guess_language/data/models
copying guess_language/data/models/nb.py -> build/lib/guess_language/data/models
copying guess_language/data/models/eu.py -> build/lib/guess_language/data/models
copying guess_language/data/models/nr.py -> build/lib/guess_language/data/models
copying guess_language/data/models/uk.py -> build/lib/guess_language/data/models
copying guess_language/data/models/mk.py -> build/lib/guess_language/data/models
copying guess_language/data/models/hr.py -> build/lib/guess_language/data/models
running install_lib
running install_egg_info
Removing /usr/local/lib/python3.2/dist-packages/guess_language_spirit-0.5a3.egg-info
error: /usr/local/lib/python3.2/dist-packages/guess_language_spirit-0.5a3.egg-info: Permission denied 
```

**$ python2 setup.py 安装**

```
Traceback (most recent call last):
  File "setup.py", line 597, in <module>
    sys.exit(main())
  File "setup.py", line 592, in main
    run_setup_hooks(config)
  File "setup.py", line 569, in run_setup_hooks
    func(config)
  File "setup.py", line 582, in default_hook
    generate_py2k(config)
  File "setup.py", line 543, in generate_py2k
    run_3to2(copied_py_files)
  File "setup.py", line 374, in run_3to2
    raise OSError("3to2 script is unavailable.")
OSError: 3to2 script is unavailable. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:34:37.437

您需要以`setup.py install`root 身份运行命令：

```
sudo python setup.py install 
```

否则，您将无权将文件复制到您的`/usr/local/lib/python3.2/dist-packages`目录。

要在 Python 2 上安装包，您需要先安装[`3to2`包](http://pypi.python.org/pypi/3to2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-30T06:36:59.643

These days you can just use pip - the python package manager to install it:

1.  You'll need to install pip - and then
2.  simply: `pip install guess_language`

# r - 使用R在矩阵中存储循环的值

> ID：13551972
> 
> 赞同：1
> 
> 时间：2012-11-25T14:33:01.150
> 
> 标签：r, loops

A 有以下矩阵

```
w= 
    0.0  0.0  0.0  0.3  0.4
    0.1  0.0  0.5  0.2  0.0
    0.0  0.3  0.0  0.0  0.0
    0.0  0.0  0.6  0.0  0.0
    0.0  0.0  0.0  0.5  0.0
c=
    0.1  0.0  0.00   0.0   0.00
    0.0  0.4  0.00   0.0   0.00
    0.0  0.0  0.25   0.0   0.00
    0.0  0.0  0.00   0.2   0.00
    0.0  0.0  0.00   0.0   0.05

x = seq(1, 1, length=5)
result = matrix() 
```

我在 R. 中建立了一个循环：

```
nloop=10
for (i in 1:nloop)
{
    u=x %*% t(w) 

    x=(x %*% t(w))+((u) %*% t(c))

    x=1/(1+exp(x))

    result=matrix(nrow=10 , ncol = 5)
    for (i in 1:10)
    {
        result[[i]] =x 
    }
} 
```

R 返回此错误：

> 结果 [[i]] = x 中的错误：提供的元素多于要替换的元素

我想将每个循环的值存储在`result`矩阵中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:12:23.960

我找到了解决方案。它并不优雅，但它有效。

```
result = vector("list") 

nloop=10
    for (i in 1:nloop)
    { 
    u=x %*% t(w) 
    x=(x %*% t(w))+((u) %*% t(c))
    x=1/(1+exp(1*x))
    result[[i]]=(x)
    }

 result=do.call(rbind, result) 
```

感谢您的建议

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T19:32:55.357

矩阵<-矩阵（ncol=numberOfCols，nrow=numberOfRows）；

矩阵[rowNum,]<-row; # rowNum 是您要覆盖的行数。

# port - 英特尔 8080 指令：输出

> ID：13551973
> 
> 赞同：2
> 
> 时间：2012-11-25T14:33:04.397
> 
> 标签：port, emulation, instructions, intel-8080

我正在尝试模拟英特尔 8080 指令集，但我被困在这条指令上`OUT D8`，根据[*英特尔 8080/8085 汇编语言编程*](https://archive.org/details/8080-8085_Assembly_Language_Programming_1977_Intel)一书，它说

> `OUT`指令将累加器的内容放在 8 位数据总线上，将所选端口的编号放在 16 位地址总线上。由于端口数的范围从 0 到 255，因此端口号在地址总线上是重复的。

问题是我不明白这是做什么的。有人可以向我解释一下，或者让我看一篇解释它的文章或一本书。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:17:33.877

一种思考方式是 8080 及其衍生产品具有 17 位地址总线，而不是通常引用的 16 位总线。该地址总线的最高位是芯片的输入/输出请求线（IORQ）。

当您使用正常加载和存储时，最高位总是被重置。当您执行输入或输出时，始终设置最高位。

英特尔命名了这条线，并希望它用于与外围芯片通信，因此得名，可用寻址的形式更加有限，访问成本更高，而且程序计数器和堆栈指针都不能指向这一点地址空间的区域。

这给英特尔留下了一个问题，即他们有 16 位地址总线要填充，但只采用了一个 8 位参数。他们实际上所做的是将累加器加载到前 8 位。所以如果你有：

```
LD A, 0xfe
OUT (0xdc) 
```

然后将值 0xfe 输出到端口地址 0xfedc。

（除此之外：为 Zilog 语法而不是 Intel 道歉；可能有趣的是，Z80 添加了一堆类似`OUT (C), A`这样的指令，真的将整个 BC 转储到地址总线上，而不仅仅是 C 并且大多数 Z80 微型制造商非常乐意使用完整的 16 -位地址，因为它允许他们使用“如果此地址线为低电平，则正在寻址组件”的简化逻辑，同时仍然为外部外围设备留下了不错的范围）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T09:46:13.160

对于仿真，这意味着
当仿真设备中存在 IN/OUT 端口时 -
当仿真设备具有内存映射端口时，端口中有简单的 IN/OUT 数据 -
然后
是 OUT AB -> 到 STA ABAB
IN 12 -> LDAX 1212

对于硬件开发人员来说，这意味着在执行输入/输出时，地址总线具有 a15-8 = a7-a0 和 =portNum

# java - 分开数字和字母

> ID：13551985
> 
> 赞同：1
> 
> 时间：2012-11-25T14:34:55.640
> 
> 标签：java, split, letters-and-numbers

假设我有一个字符串说`"Hello123"`，我怎样才能将它们分开成为`s[0] = "Hello", s[1] = "123"`？我希望使用`s.split()`，但我不知道在参数/参数中放入什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:37:30.640

您可以使用正则表达式：

```
String[] splitArray = subjectString.split(
    "(?x)                  # verbose regex mode on                    \n" +
    "(?<=                  # Assert that the previous character is... \n" +
    " \\p{L}               # a letter                                 \n" +
    ")                     # and                                      \n" +
    "(?=                   # that the next character is...            \n" +
    " \\p{N}               # a digit.                                 \n" +
    ")                     #                                          \n" +
    "|                     # Or                                       \n" +
    "(?<=\\p{N})(?=\\p{L}) # vice versa"); 
```

分裂

```
psdfh123sdkfjhsdf349287 
```

进入

```
psdfh
123
sdkfjhsdf
349287 
```

# vba - Excel 运行时错误 16 表达式太复杂

> ID：13551986
> 
> 赞同：4
> 
> 时间：2012-11-25T14:35:00.767
> 
> 标签：vba, excel, excel-2007, excel-2003

我在 Excel 表中有这个基本代码

```
For x = 1 To ThisWorkbook.Worksheets("GRP0").Range("D9:D112").Rows.Count
' do work here
Next x 
```

虽然当我执行它给出了错误

```
Run-time error '16':

Expression too complex 
```

我在兼容模式下使用 Excel 2007，如果有帮助，我相信这张表是为/在 Excel 2003 中制作的。关于导致错误的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T07:57:33.560

让我回答这个问题，让它离开“未回答”部分......以及其他寻找答案并看到完美书面问题的人。

所描述的问题不时发生。我不知道确切的原因，但有一种简单的方法可以解决它。您只需要使用变量，在循环开始之前设置它的值并在循环起始行中使用这个变量。这可能如下：

```
Dim rowsCount As Long
    rowsCount = ThisWorkbook.Worksheets("GRP0").Range("D9:D112").Rows.Count
    'and any other complex statement could be placed here
For x = 1 To rowsCount
    'do work here
Next x 
```

根据我的经验，所有“表达过于复杂”的问题都可以通过这种方式解决。

# facebook - 使用主题标签和 modrewrite 的 Facebook 共享器

> ID：13551991
> 
> 赞同：0
> 
> 时间：2012-11-25T14:35:24.853
> 
> 标签：facebook, .htaccess, mod-rewrite, facebook-sharer, hashtag

所以我正在尝试使用 facebook 共享器与主题标签共享 url.. 但我不需要它们被谷歌爬虫或任何东西索引..

这个想法是标签是页面内容的代码（它是游戏的随机项目生成器 - [http://manlysmite.com/](http://manlysmite.com/)）

无论如何，所以共享哈希标签不起作用..即使我更新了opengraph标签和共享者网址..现在我不想像我提到的那样使用“喜欢”按钮，我不想将这些页面索引为单个项目..

我发现如果你使用'|' （管道）而不是 url 中的“#”（哈希）分享到 facebook 时，它会将其识别为正确的 url..

我的问题是，我可以在 .htaccess 中使用 modrewrite 规则来更改“|” 到一个'#'服务器端，这样当它到达页面时它是一个'#'？如果是这样，有人可以告诉我我应该在 .htaccess 文件中放入什么，因为我似乎找不到“替换单个 url 字符重写”信息吗？这甚至是最好的方法吗？

先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:42:38.150

我认为不可能重写哈希，因为它是客户端的事情。通常哈希不会发送到服务器。

您是否尝试过： [在 Facebook 分享中使用哈希标签？](https://stackoverflow.com/questions/9610156/using-hash-tags-with-facebook-share-possible) 共享时用 %23 替换 #？

# c# - 我需要从这个 X 是最大数字的数组点中检索

> ID：13551992
> 
> 赞同：-1
> 
> 时间：2012-11-25T14:35:25.180
> 
> 标签：c#, .net

我有点结构数组：

```
Point[] arr  = samples.pointsArray; 
```

我需要从这个 X 是最大数字的数组点中检索。

```
 Point maxX= (some logic); 
```

知道如何实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T14:36:34.177

使用`OrderBy`和`First`LINQ 运算符：

`Point minX = arr.OrderBy(p => p.X).First();`

`Point maxX = arr.OrderByDescending(p => p.X).First();`
或者
`Point maxX = arr.OrderBy(p => p.X).Last();`

替代解决方案（不使用`OrderBy`）：
[如何在不使用 OrderBy 的情况下从点数组中获取具有最小 X 的点？](https://stackoverflow.com/questions/1574330/how-to-get-the-point-with-minimal-x-from-an-array-of-points-without-using-orderb?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:02:37.217

无需按照@Rotem 的建议重新排序数组（！？！），您可以简单地执行以下操作：

```
int maxX = arr.Max(p => p.X);
Point maxXPt = arr.First(p => p.X == maxX); 
```

请注意，这是在 O(n) 中完成的，而`OrderBy`方法是 O(n log n)。

# java - 当子属性具有尾随空值时，杰克逊反序列化中止

> ID：13551994
> 
> 赞同：1
> 
> 时间：2012-11-25T14:35:31.693
> 
> 标签：java, json, serialization, null, jackson

在发送 JSON 以由 Jackson 反序列化时，似乎如果子元素的最后一个值为 ，则`null`Jackson 将中止反序列化。

* * *

**坏的：**

如果我将此 JSON 发送到我的接收器（如下），则映射`Content`对象将为`null`，因为反序列化停止于`image`：

```
{"user":{"id":"1", "token":"ABC", "image":null},"content":{"id":"2"}} 
```

**好的：**

如果我这样发送它，`image`仍将具有`null`所需的值，但`Content`将使用其 id 创建对象：

```
{"user":{"id":"1", "image":null, "token":"ABC"},"content":{"id":"2"}} 
```

这对我来说就像一个错误..？！

* * *

**简单的接收器**：

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
@Transactional
public Response create(UserContent source) {
        UserContent dbResult = manager.create(source);
        return Response.status(200)
                .entity(dbResult.getId().toString()).build();
} 
```

**串行器**

```
 public static String objectToString(Object object) {
        ObjectMapper mapper = new ObjectMapper();
        mapper.setDateFormat(new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss"));

        Writer strWriter = new StringWriter();
        try {
            mapper.writeValue(strWriter, object);
        } catch (Exception ex) {
            throw new RuntimeException(ex);
        }
        String userDataJSON = strWriter.toString();

        return userDataJSON;
    } 
```

我可以将我的 ObjectMapper 设置为在发送端将所有对象序列`null`化为或空对象吗？`""`

如果我将`UserContent`具有属性的对象传递`null`给上述方法，则生成的 JSON 将具有`null`与上面示例类似的值，并且如果列表的最后一项具有值 null，反序列化将中止，导致我的后端出现 NullPointerExceptions。

* * *

编辑 - UserContent 类：

```
@Entity
@Table(name = "user_content")
@XmlRootElement
public class UserContent extends org.springframework.data.jpa.domain.AbstractPersistable<Long> {
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id", nullable = false)
    @Fetch(FetchMode.JOIN)
    private User user;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "content_post_id", nullable = false)
    @Fetch(FetchMode.JOIN)
    private Contentcontent;

    // more properties...
} 
```

我们的依赖：

```
<properties>
    <jersey-version>1.14</jersey-version>
</properties>
            <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.5</version>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>${jersey-version}</version>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-client</artifactId>
        <version>${jersey-version}</version>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-json</artifactId>
        <version>${jersey-version}</version>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey.contribs</groupId>
        <artifactId>jersey-multipart</artifactId>
        <version>${jersey-version}</version>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey.jersey-test-framework</groupId>
        <artifactId>jersey-test-framework-grizzly2</artifactId>
        <version>${jersey-version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-servlet</artifactId>
        <version>${jersey-version}</version>
        <scope>test</scope>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:29:18.923

对于这种奇怪的行为，我们现在的解决方案是通过配置**忽略序列化上的所有空值**`ObjectMapper`：

```
mapper.setSerializationInclusion(Inclusion.NON_NULL); 
```

当我们控制双方时，我们可以做到这一点。如果我们将 REST 服务公开可用，我仍然对如何实际处理如上所述的传入空值星座感到好奇。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-25T18:29:43.063

假设您使用的是运动衫。您可以尝试在服务器端用[Genson](http://code.google.com/p/genson/)替换 jackson ，它应该可以解决您的问题。确实，它看起来像一个错误。请务必删除 jackson 和 jersey-json。您不需要任何配置来启用 Genson 的 json 支持，只需将 jar 放在您的类路径中。

# spring - 测试 JPA Spring 3.1 的最佳方法

> ID：13551995
> 
> 赞同：0
> 
> 时间：2012-11-25T14:35:46.827
> 
> 标签：spring, junit4, spring-data-jpa, spring-test

我为我的 Spring 3.1.1/JPA/Hibernate 4 Web 应用程序编写了几个 JPA 存储库、服务和支持类。但是，我真的很想为它写一些单元和集成测试（我知道，你应该先写这些）。我使用的是 JavaConfig 而不是 XML，所以我想知道最好的测试方法。这是我要解决的特定问题：

我有一个 @Configuration，它声明了 DataSource、JpaTransactionManager、LocalContainerEntityManagerFactoryBean 和我所有的存储库。显然我不想为集成测试开始所有这些，所以我想我可以使用 EmbeddedDatabase 和 H2 创建一个内存数据库，填充值，然后使用我的存储库来对付它。但是，我看到的文档并没有帮助我把它放在一起。我有这个：

```
@RunWith( SpringJUnit4ClassRunner.class )
public class TestMenuService {

    private EmbeddedDatabase database;

    @Autowired
    private MenuRepository menuRepository;

    @Before
    public void setUp() throws Exception {
        database = new EmbeddedDatabaseBuilder().setType(EmbeddedDatabaseType.H2).setName("myschema")
                .addScript("classpath:schema.sql").build();

        menuRepository = new MenuRepository();
        Assert.assertNotNull(database);
    } 
```

但是 menuRepository 没有被实例化，所以我尝试创建我的 @Configuration 的测试版本

```
@Configuration } )
@ComponentScan( basePackages = { "com.mycompany.service"} )
@EnableTransactionManagement
@ImportResource( "classpath:applicationContext.xml" )
@PropertySource( "classpath:test-application.properties" )
public class TestEdmConfiguration {

    @Bean
    MenuRepository menuRepository() {
        return new MenuRepository();
    } 
```

我的 test-applicationContext.xml

```
<jpa:repositories base-package="com.mycompany.servce.repository"/> 
```

我的 test-application.properties：

```
db.driver=org.h2.Driver
db.username=sa
db.password=
db.url=jdbc:h2:mem:myschema

hibernate.dialect=org.hibernate.dialect.H2Dialect
hibernate.format_sql=true
hibernate.hbm2ddl.auto=create
hibernate.ejb.naming_strategy=org.hibernate.cfg.ImprovedNamingStrategy
hibernate.show_sql=true 
```

但这需要我创建上面提到的所有数据源等。似乎我只是在为这个复制所有的支持 bean。

有没有办法让存储库和嵌入式数据库与我的测试隔离而没有所有其他依赖项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:23:14.030

如果您想在完整的集成测试中测试您的存储库，我会认为您需要设置其他所有内容，即 EntityManagerFactory、PlatformTransactionManager 等。

由于您使用的是 Spring 3.1，我建议您使用 bean 配置文件来实现这一点。

我会创建两个配置文件，一个用于测试，一个用于应用程序，每个都提供一个数据源。

```
@Configuration
@Profile("test")
public class EmbeddedDataSource {

  @Bean
  public DataSource dataSource() {
    // Return a H2 datasource
  }

}

@Configuration
@Profile("application")
public class ApplicationDataSource {

  @Bean
  public DataSource dataSource() {
    // Return a normal datasource
  }

} 
```

您可以创建一个启动 spring 上下文的测试，如下所示：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(loader = AnnotationConfigContextLoader.class, classes = { MyConfigClass.class })
@ActiveProfiles(profiles = {"test"})
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = true)
public class TestRepository {

} 
```

在这里，您可以指定对测试有效的配置文件。

# android - 未创建 AVD

> ID：13551996
> 
> 赞同：0
> 
> 时间：2012-11-25T14:36:08.230
> 
> 标签：android

![在此处输入图像描述](../Images/08d2cc37d13d5f6141c250310be59d5c.png)我有一个奇怪的问题。我在我的系统上安装了 Eclipse juno，甚至还安装了 SDK 管理器。但是当我尝试运行应用程序时，没有出现 AVD。当我尝试通过转到 Windows-> AVD 管理器并单击“新建”按钮来配置 AVD 时，一个 dailog 正在打开 AVD 名称、内存选项和内部存储器。但是对于我给出的任何值，确定按钮被禁用，因此无法创建 AVD 来启动应用程序。

我尝试通过修改 androidManifest 文件中的这个块来成功。

```
 <uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="8" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:58:52.357

您是否注意到它旁边`CPU/ABI`说当前目标没有系统映像？这就是`Ok`期权被淘汰的原因。如果您想使用此 AVD，请尝试更新您的 SDK，并安装所有可用的更新。检查[此链接](https://stackoverflow.com/a/7817100/1782481)以了解其外观。

否则，只需降低 SDK 级别（`target`选项）并尝试各种级别，直到找到它适用的级别（即，您安装了系统映像）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:44:53.273

您的系统似乎**缺少**创建 AVD 所需的系统映像。

转到**Eclipse -> 窗口 -> Android SDK 管理器**

在您想要的 API 级别部分，选择**ARM EABI v7a System Image**并下载它。

# iphone - 没有iphone模拟器文件夹

> ID：13551997
> 
> 赞同：0
> 
> 时间：2012-11-25T14:36:08.887
> 
> 标签：iphone, ios, xcode

几个月前，当最新的 iphone 模拟器版本是 4.3.1 时，我将 iphone 模拟器文件夹从我的硬盘驱动器删除到了外部硬盘驱动器。

现在当我再次将它拖回来时，版本仍然是 4.3.1，所以我不能用它来保存媒体。

是否可以重新安装某些东西以获得最新版本（6.0）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:09:59.273

**要确认 iOS 模拟器的安装位置：**在 XCode 4.5.2（以及大多数其他最新版本的 XCode，不确定何时首次引入）中，iOS 模拟器安装在：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications 
```

使用当前版本的 iOS 模拟器，不同的 iOS 版本没有单独的应用程序。相反，您使用菜单选项“硬件”->“版本”来选择不同的 iOS 版本进行模拟。

**如果缺少“应用程序支持”文件夹**（您的应用程序的模拟器副本被“安装”），您可以检查：

```
/Users/<username>/Library/Application Support/iPhone Simulator 
```

注意：Mountain Lion 现在从默认的 Finder 视图中隐藏了“Library”文件夹。在该路径中查找“6.0”（或其他 iOS 模拟器版本）文件夹很容易，以查看您的文件夹是否存在。

**最后，如果真的需要 iOS Simulator 的新副本**，安装另一个版本（假设 XCode 4.5.2 或类似版本）：“XCode”菜单 -> “Preferences” -> “Downloads” 选项卡 -> 选择另一个你想要的模拟器喜欢安装

![在此处输入图像描述](../Images/31520c5f1cfbd78ccc84f8d724cd2ca4.png)

# validation - 模型验证规则的默认值

> ID：13551998
> 
> 赞同：1
> 
> 时间：2012-11-25T14:36:14.330
> 
> 标签：validation, cakephp, model, cakephp-2.3

我对模型字段的默认值有疑问，这个问题让我发疯了一段时间。

举个例子，我有一个带有必须验证的状态字段的模型：

```
$validate = array (
    ...
    'status' => array(
        'list' => array(
            'rule' => array('inList', array('0','1')),
            'allowEmpty' => true
        )
    )
) 
```

插入数据库中的数据不是从表单提交的。

如果缺少状态字段，我希望它默认为 1，否则必须进行验证。

有没有办法在不使用自定义验证规则的情况下从模型中做到这一点？我知道我可以在 MySQL 表中设置默认值，但我仍然想从模型中验证它，以防提交不同的值。

**编辑**

我查看了 Validation 类代码，inList 验证只是 in_array 检查的愚蠢包装：

**Cake.Utility.Validation.php**

```
public static function inList($check, $list, $strict = true) {
   return in_array($check, $list, $strict);
} 
```

你知道吗，还有一个[`CakePHP Api docs`](http://api21.cakephp.org/class/validation#method-ValidationinList)（$strict）中没有提到的第三个参数，默认为true。

从 in_array 文档：

> 如果第三个参数 strict 设置为 TRUE，则 in_array() 函数还将检查大海捞针的类型。

它仍然不能解决我的问题，但现在我知道为什么 array('inList', array('0','1')) 没有验证空字段，即使 allowEmpty 设置为 true。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:44:13.010

您可以使用[beforeSave](http://book.cakephp.org/2.0/en/models/callback-methods.html#beforesave)方法设置默认值。不要忘记返回true，否则您将中止保存。