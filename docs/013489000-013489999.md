# StackOverflow 问答 13489000-13489999

# vim - 命令模式下的压痕宽度

> ID：13489002
> 
> 赞同：1
> 
> 时间：2012-11-21T08:21:04.713
> 
> 标签：vim

我在 Windows 7 上使用 Vim 7.3 并在我的 vimrc 中有以下设置：

```
set expandtab
set tabstop=4
set shiftwidth=4
set softtabstop=4 
```

如果我在“插入模式”中使用**Tab或在“命令模式”中使用****>>**，我的文本将缩进 4 个空格。但是如果我在“冒号命令模式”中使用**>>**（我不知道它是否真的像那样调用），例如使用范围

```
:30,35>> 
```

文本仍然缩进 8 个空格。

将其更改为 4 个空格的正确设置是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T08:27:05.827

你缩进两次愚蠢。`:30,35>`

# asp.net - 在没有服务器的情况下关闭 etags

> ID：13489004
> 
> 赞同：1
> 
> 时间：2012-11-21T08:21:08.647
> 
> 标签：asp.net, apache, asp.net-mvc-4, etag, yslow

您好，我刚开始使用**ASP.NET MVC 4**，我是一家企业的实习生，他告诉我创建一个没有服务器的基本网上**商店**，然后使用**YSlow**验证 HTML 和网站的速度。

我一直很忙，当我完成网店后，我开始使用 YSlow 将速度应用于网站，但有一件事我似乎无法修复，那就是**错误配置的 ETag**：
“有 5 个组件的 ETag 配置错误”<-这些是我的 CSS 文件和我用过的图片。我一直在研究 ETag 是什么，但仍然不完全了解它们的作用。

我知道在**Apache**中你可以通过说 FileETag none 来关闭它们，但在这种情况下，我没有使用服务器，我仍然想关闭它们，因为它们对 99 的分数不满意。

我正在寻找的是对 ETags 究竟做什么的答案以及对我的问题的修复。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:38:32.257

根据下面的评论，这是一个练习，显然 PC 的性能不会很好。您可以使用 httpHandler。这是我用于图像的一个，这将有助于您的 yslow（但请注意，这不能保证性能，并且旨在为非常繁忙的站点提供指导）

```
public class ImageHandler : IHttpHandler
    {
        public void ProcessRequest(HttpContext context)
        {
            context.Response.Cache.SetCacheability(HttpCacheability.Public);
            context.Response.Cache.SetMaxAge(new TimeSpan(28, 0, 0, 0, 0));

            // Setting the last modified date to the creation data of the assembly
        Assembly thisAssembly = Assembly.GetExecutingAssembly();
        string thisPath = thisAssembly.CodeBase.Replace(@"file:///", "");
        string assemblyName = "yourAssembly";
        string assemblyPath = thisPath.Replace(thisAssembly.ManifestModule.ScopeName, assemblyName);

        var assemblyInfo = new FileInfo(assemblyPath);
        var creationDate = assemblyInfo.CreationTime;
        string eTag = GetFileETag(assemblyPath, creationDate);      
        // set cache info
        context.Response.Cache.SetCacheability(HttpCacheability.Private);
        context.Response.Cache.VaryByHeaders["If-Modified-Since"] = true;
        context.Response.Cache.VaryByHeaders["If-None-Match"] = true;
        context.Response.Cache.SetLastModified(creationDate);
        context.Response.Cache.SetETag(eTag);
if (IsFileModified(assemblyPath, creationDate, eTag, context.Request))
        {
            //context.Response.ContentType = <specify content type>;
            // Do resource processing here
            context.Response.TransmitFile(context.Request.PhysicalPath);
        }
        else
        {
            // File hasn't changed, so return HTTP 304 without retrieving the data 
            context.Response.StatusCode = 304;
            context.Response.StatusDescription = "Not Modified";

            // Explicitly set the Content-Length header so the client doesn't wait for
            //  content but keeps the connection open for other requests 
            context.Response.AddHeader("Content-Length", "0");         
        }

        context.Response.End();

        }

        public bool IsReusable
        {
            get { return false; }
        }

        /// <summary>
        /// Checks if the resource assembly has been modified based on creation date.
        /// </summary>
        /// <remarks>
        /// </remarks>
        /// <seealso cref="GetFileETag"/>
        private bool IsFileModified(string fileName, DateTime modifyDate, string eTag, HttpRequest request)
        {
            // Assume file has been modified unless we can determine otherwise 
            bool FileDateModified = true;
            DateTime ModifiedSince;
            TimeSpan ModifyDiff;
            bool ETagChanged;

            // Check If-Modified-Since request header, if it exists 
            string ifModifiedSince = request.Headers["If-Modified-Since"];
            if (!string.IsNullOrEmpty(ifModifiedSince) && ifModifiedSince.Length > 0 && DateTime.TryParse(ifModifiedSince, out ModifiedSince))
            {
                FileDateModified = false;
                if (modifyDate > ModifiedSince)
                {
                    ModifyDiff = modifyDate - ModifiedSince;
                    // Ignore time difference of up to one seconds to compensate for date encoding
                    FileDateModified = ModifyDiff > TimeSpan.FromSeconds(1);
                }
            }
            // Check the If-None-Match header, if it exists. This header is used by FireFox to validate entities based on the ETag response header 
            ETagChanged = false;
            string ifNoneMatch = request.Headers["If-None-Match"];
            if (!string.IsNullOrEmpty(ifNoneMatch) && ifNoneMatch.Length > 0)
            {
                ETagChanged = ifNoneMatch != eTag;
            }
            return ETagChanged || FileDateModified;
        }

        /// <summary>
        /// Generates a caching ETag based on file name and creation date.
        /// </summary>
        /// <remarks>
        /// </remarks>
        /// <seealso cref="GetFileETag"/>
        private string GetFileETag(string fileName, DateTime modifyDate)
        {
            string fileString;
            Encoder stringEncoder;
            int byteCount;
            Byte[] stringBytes;

            // Use file name and modify date as the unique identifier 
            fileString = fileName + modifyDate.ToString();

            // Get string bytes 
            stringEncoder = Encoding.UTF8.GetEncoder();
            byteCount = stringEncoder.GetByteCount(fileString.ToCharArray(), 0, fileString.Length, true);
            stringBytes = new Byte[byteCount];

            stringEncoder.GetBytes(fileString.ToCharArray(), 0, fileString.Length, stringBytes, 0, true);

            //{ Hash string using MD5 and return the hex-encoded hash }
            MD5 Enc = MD5CryptoServiceProvider.Create();
            return "\"" + BitConverter.ToString(Enc.ComputeHash(stringBytes)).Replace("-", string.Empty) + "\"";

        }
    }
} 
```

然后在您的配置中指定处理程序（如果不使用 iis7，也可以在 httphandlers 下执行）

```
 <add name="pngs" verb="*" path="*.png" type="yourAssembly.HttpHandlers.ImageHandler, hcs.web" preCondition="managedHandler" />
  <add name="jpgs" verb="*" path="*.jpg" type="yourAssembly.HttpHandlers.ImageHandler, hcs.web" preCondition="managedHandler" />
  <add name="gif" verb="*" path="*.gif" type="yourAssembly.HttpHandlers.ImageHandler, hcs.web" preCondition="managedHandler" /> 
```

# regex - 如何用 sed 向前查找和替换选定的字符

> ID：13489009
> 
> 赞同：0
> 
> 时间：2012-11-21T08:21:25.100
> 
> 标签：regex, replace, sed

我可以使用 sed 替换选定的字符，例如`H => X`, `1 => 2`，但首先向前搜索，这样第一组中的字符就不会被替换。

样本数据：

```
"Hello World";"Number 1 is there";"tH1s-Has,1,HHunKnownData"; 
```

之后应该如何`sed`：

```
"Hello World";"Number 1 is there";"tX2s-Xas,2,XXunKnownData"; 
```

我试过的：

没什么，我会尝试，但我所知道的关于 sed 表达式的一切似乎都是错误的。

好的，我尝试捕获`([^;]+)`并“跳过”（*使用 '\1\2'... 让他们回来*）第一个由 分隔的组`;`，这工作正常，但随后出现问题，如果我使用捕获，我需要选择整个组如果我不使用捕获，我会丢失数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:12:33.627

使用 是可能的`sed`，但有点乏味。要进行字段编号的翻译，`$FIELD`您可以使用以下内容：

```
sed 's/\(\([^;]*;\)\{'$((FIELD-1))'\}\)\([^;]*;\)/\1\n\3\n/;h;s/[^\n]*\n\([^\n]*\).*/\1/;y/H1/X2/;G;s/\([^\n]*\)\n\([^\n]*\)\n\([^\n]*\)\n\([^\n]*\)/\2\1\4/' 
```

或者，减少括号的数量`GNU sed`：

```
sed -r 's/(([^;]*;){'$((FIELD-1))'})([^;]*;)/\1\n\3\n/;h;s/[^\n]*\n([^\n]*).*/\1/;y/H1/X2/;G;s/([^\n]*)\n([^\n]*)\n([^\n]*)\n([^\n]*)/\2\1\4/' 
```

例子：

```
$ FIELD=3
$ echo '"Hello World";"Number 1 is there";"tH1s-Has,1,HHunKnownData";' | sed -r 's/(([^;]*;){'$((FIELD-1))'})([^;]*;)/\1\n\3\n/;h;s/[^\n]*\n([^\n]*).*/\1/;y/H1/X2/;G;s/([^\n]*)\n([^\n]*)\n([^\n]*)\n([^\n]*)/\2\1\4/'
"Hello World";"Number 1 is there";"tX2s-Xas,2,XXunKnownData";

$ FIELD=2
$ echo '"Hello World";"Number 1 is there";"tH1s-Has,1,HHunKnownData";' | sed -r 's/(([^;]*;){'$((FIELD-1))'})([^;]*;)/\1\n\3\n/;h;s/[^\n]*\n([^\n]*).*/\1/;y/H1/X2/;G;s/([^\n]*)\n([^\n]*)\n([^\n]*)\n([^\n]*)/\2\1\4/'
"Hello World";"Number 2 is there";"tH1s-Has,1,HHunKnownData"; 
```

不过，可能有一种我没有想到的更简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:02:47.027

**[更新]**

（我刚刚意识到它可以更短。Perl 有一个自动拆分模式）：

```
$F[2] =~ s/H/X/g; $F[2] =~ s/1/2/g; $_=join(";",@F) 
```

Perl 的可读性并不高，但在这种情况下，我怀疑你能得到的最好的东西`sed`可能不像 Perl 那样清晰：

```
echo '"Hello World";"Number 1 is there";"tH1s-Has,1,HHunKnownData";' | 
  perl -F';' -ape '$F[2] =~ s/H/X/g; $F[2] =~ s/1/2/g; $_=join(";",@F)' 
```

拆开 Perl 代码：

```
# your groups are in @F, accessed as $F[$i]
$F[2] =~ s/H/X/g;      # Do whatever you want with your chosen (Nth) group.
$F[2] =~ s/1/2/g; 
$_ = join(";", @F)     # Put them back together. 
```

`perl -pe`就像`sed`。（有点。）

和`perl -F';' -ape`表示使用自动拆分 ( `-a`) 并将字段分隔符设置为`';'`. 然后你的组可以通过`$F[i]`- 所以它的工作方式也有点像`awk`。

所以它也可以像`perl -F';' -ape '/*your code*/' < inputfile`

我知道你要求一个`sed`解决方案——我经常发现自己切换到 Perl（尽管我仍然喜欢`sed`）单行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T08:35:58.410

如果 awk 适合您：

```
awk -F";" '{gsub("H","X",$3);gsub("1","2",$3);}1' OFS=";" file 
```

使用 -F，文件以分号作为分隔符分割，因此现在第三个字段（$3）是我们感兴趣的。gsub 函数在第 3 个字段中用 X 替换所有出现的 H，并再次替换为 1 到 2。

1是打印每一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:03:22.913

这可能对您有用（GNU sed）：

```
sed 's/H/X/2g;s/1/2/2g' file 
```

除了第一次出现`H`or之外，这将分别更改`1`为`X`or`2`

如果是由`;`'s 分隔的字段，请使用：

```
sed 's/H[^;]*;/&\n/;h;y/H/X/;H;g;s/\n.*\n//;s/1[^;]*;/&\n/;h;y/1/2/;H;g;s/\n.*\n//' file 
```

可以对其进行变异以适应许多值，因此：

```
echo -e "H=X\n1=2"|
sed -r 's|(.*)=(.*)|s/\1[^;]*;/\&\\n/;h;y/\1/\2/;H;g;s/\\n.*\\n//|' |
sed -f - file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T10:20:07.280

```
awk -F";" '{gsub("H","X",$3);gsub("1","2",$3);}1' Your_file 
```

# c# - 从 windows phone 7 连接到 MYSQL

> ID：13489012
> 
> 赞同：1
> 
> 时间：2012-11-21T08:21:40.467
> 
> 标签：c#, mysql, windows-phone-7, restsharp

我正在尝试将 Windows Phone 7 应用程序连接到 PC 上的 MySQL 数据库。

从我经过大量搜索后发现的情况来看，没有直接的方法可以做到这一点。很多人说 restsharp 可以帮助沟通，但似乎很少有关于成功和如何做到这一点的信息。

我需要让 wp7 应用程序将数据发送到 MySQL 数据库，这样网站就可以将发送到数据库的数据显示出来。

有好心人愿意给我一些指导或指导我找一个已知的向导吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:25:56.623

典型的方法是设置您自己的网站（最好是受密码保护，并通过 SSL）。然后你使用 REST 或简单的 HTTP POST 将数据传递给你的 web 脚本，然后连接到 MySQL 并执行实际的数据插入。

# python - 查找字符和数字之间可能的双射

> ID：13489014
> 
> 赞同：6
> 
> 时间：2012-11-21T08:21:42.480
> 
> 标签：python, list, bijection

假设您在列表 L 中有一个字符串 S 和一个数字序列，使得 len(S) = len(L)。

检查是否可以找到字符串的字符与序列中的数字之间的双射，以使每个字符匹配一个且仅一个数字，最干净的方法是什么。

例如，“aabbcc”应与 115522 匹配，但不能与 123456 或 111111 匹配。

我有一个带有两个字典和循环的复杂设置，但我想知道是否有一种干净的方法可以做到这一点，也许是通过使用 Python 库中的一些函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T08:30:26.597

我会为此使用一组：

```
In [9]: set("aabbcc")
Out[9]: set(['a', 'c', 'b'])

In [10]: set(zip("aabbcc", [1, 1, 5, 5, 2, 2]))
Out[10]: set([('a', 1), ('c', 2), ('b', 5)]) 
```

当且仅当映射是满射时，第二组的长度才等于第一组。（如果不是，您将有两个字母映射到第二组中的相同数字，反之亦然）

这是实现这个想法的代码

```
def is_bijection(seq1, seq2):
    distinct1 = set(seq1)
    distinct2 = set(seq2)
    distinctMappings = set(zip(seq1, seq2))
    return len(distinct1) == len(distinct2) == len(distinctMappings) 
```

如果一个序列比另一个序列短，这也将返回 true，但已经建立了有效的映射。如果序列的长度必须相同，则应为此添加检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:30:06.590

由于您通常只谈论集合之间的双射，因此我假设与其他答案不同，数字的*顺序*不必与字母的顺序相匹配。如果是这样，有一个简短而优雅的解决方案，但它需要[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)在 python 2.7 中引入的类。对于那些坚持使用旧版本的人，有一个[2.5+](http://code.activestate.com/recipes/576611-counter-class/)的向后移植。

```
from collections import Counter

def bijection_exists_between(a, b):
    return sorted(Counter(a).values()) == sorted(Counter(b).values()) 
```

测试：

```
>>> bijection_exists_between("aabbcc", "123123")
True
>>> bijection_exists_between("aabbcc", "123124")
False 
```

您的示例在边缘情况下相当轻松，因为另一种阅读问​​题的方式允许数字的数量和字母的数量不相等（即，您寻找从唯一字符集到唯一数字集的双射，所以例如`"aabbcc"`会双射到`"123333"`.)。如果这是您的意思，请改用此版本：

```
def bijection_exists_between(a, b):
    return len(set(a)) == len(set(b)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:43:51.090

```
import itertools

a = 'aabbcc'
b = 112233

z = sorted(zip(str(a), str(b)))
x = all(
    gx == g0
    for k, g in itertools.groupby(z, key=lambda x: x[0])
    for gx in g for g0 in g
)
print x 
```

或者：

```
import itertools

a = 'aabbcc'
b = 112233

z = zip(str(a), str(b))
x = all(
    (z1[0] == z2[0]) == (z1[1] == z2[1]) for z1 in z for z2 in z
)
print x 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:45:21.297

有一种更优雅的方法可以做到这一点（使用排序和`itertools.groupby`），但我现在很想睡觉，无法解决这个问题。但这应该仍然有效：

```
In [172]: S = "aabbcc"

In [173]: L = [1, 1, 5, 5, 2, 2]

In [174]: mapping = collections.defaultdict(list)

In [175]: reverseMapping = collections.defaultdict(list)

In [176]: for digit, char in zip(L, S):
    mapping[digit].append(char)
    reverseMapping[char].append(digit)
   .....:     

In [177]: all(len(set(v))==1 for v in mapping.values()) and all(len(set(v))==1 for v in reverseMapping.values())
Out[177]: True

In [181]: S = "aabbcc"

In [182]: L = [1, 2, 3, 4, 5, 6]

In [183]: mapping = collections.defaultdict(list)

In [184]: reverseMapping = collections.defaultdict(list)

In [185]: for digit, char in zip(L, S):                                                                         
    mapping[digit].append(char)
    reverseMapping[char].append(digit)
   .....:     

In [186]: all(len(set(v))==1 for v in mapping.values()) and all(len(set(v))==1 for v in reverseMapping.values())
Out[186]: False 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T08:49:52.517

这尊重顺序：

```
>>> s = "aabbcc"
>>> n = 115522
>>> l1 = dict(zip(s, str(n))).items()
>>> l2 = zip(s, str(n))
>>> l1
[('a', '1'), ('c', '2'), ('b', '5')]
>>> l2
[('a', '1'), ('a', '1'), ('b', '5'), ('b', '5'), ('c', '2'), ('c', '2')]
>>> not bool([i for i in l2 if i not in l1])
True
>>> n = 115225
>>> l1 = dict(zip(s, str(n))).items()
>>> l2 = zip(s, str(n))
>>> not bool([i for i in l2 if i not in l1])
False 
```

# android - 两个不同应用程序之间的 NFC Android

> ID：13489016
> 
> 赞同：0
> 
> 时间：2012-11-21T08:21:52.030
> 
> 标签：android

我是 NFC 与 Android 的新手，我开始开发使用 NFC 相互通信的应用程序。

到现在为止，我正在做的是同一个Activity之间的通信等等。那么，现在，我想看看是否可以通过 NFC 通信两个不同的应用程序。

那么，是否可以在两个不同的应用程序（我开发的）之间使用 NFC 进行通信？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:50:40.843

有可能的。您只需在清单文件和 NDEF 消息（在 createNdefMessage 方法中）中设置 mime 类型，如下所示：

创建NdefMessage：

```
NdefMessage msg = new NdefMessage(new NdefRecord[] { createMimeRecord( yourMimeType,payloadByteArray)}); 
```

显现：

```
<data android:mimeType="yourMimeType" /> 
```

这样，任何 nfc 意图都将由应用程序处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:48:21.107

createMimeRecord() 方法应该由您实现并且应该返回一个 NdefRecord。您可以将其替换为 NdefRecord 类型的对象，如下所示：

```
NdefRecord mime = new NdefRecord(NdefRecord.TNF_MIME_MEDIA, mimeTypeByteArray, new byte[0], payloadByteArray); 
```

在这种情况下，请使用 mime 而不是 createMimeRecord()。

# java - 将节点添加到具有 HashMap 对象作为属性的 Jackrabbit 存储库中

> ID：13489021
> 
> 赞同：0
> 
> 时间：2012-11-21T08:22:32.123
> 
> 标签：java, jackrabbit, jcr

我想在jackrabbit Repository 中添加一个节点，该节点具有一个保存HashMap 对象的属性。应该使用什么属性类型以及应该如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:30:20.077

JCR 节点本身就是一个哈希映射（以它的属性作为键）。那么，您可以添加一个子节点吗？

# javascript - 将图像绘制到画布中

> ID：13489023
> 
> 赞同：0
> 
> 时间：2012-11-21T08:22:34.147
> 
> 标签：javascript, jquery, html, html5-canvas

我正在使用 HTML5 画布创建图像查看器应用程序。我使用了两个画布，第一个用于加载未向用户显示的实际宽度和高度的图像（它是未附加到 DOM 树中的隐藏画布），第二个实际呈现给用户。假设图片的实际分辨率为1200*800。我将图像加载到大小为 1200*800 的隐藏画布中。然后我尝试将图像加载到分辨率为 700*600 的可见画布中（我添加了类似 ctx.drawImage（hiddenCanvas,0,0,700,600）的代码。我可以看到此分辨率下的整个图像。我有以下问题。

1.  加载到可见画布时会保持纵横比吗？或者我们是否手动进行纵横比操作。
2.  这样做会不会降低图像质量。这是执行 imageviewer 应用程序的标准方法吗？

我必须在此查看器中添加放大、缩小、平移等功能。

请任何人都可以回答我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:26:07.510

当您说 时`,0,0,700,600`，您会自动指定纵横比。

大多数调整大小操作都会降低图像质量。如果将 1200x800 图像的大小调整为 700x600，则会执行某种插值（线性、双三次等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-09T08:51:24.480

您可以使用

```
var name=new Image();
name.src="name.fileformat";
context.drawImage(name,X, Y, sizeX, sizeY); 
```

但是对于平移、缩放和其他，我没有任何关于它们的东西。

# jquery - 具有固定标题的可滚动可调整大小的表格

> ID：13489032
> 
> 赞同：0
> 
> 时间：2012-11-21T08:23:05.393
> 
> 标签：jquery, resizable, fixed-header-tables

我正在使用 jQuery 在运行时创建一个表。该表来自 JSON 数据。问题是我需要为表格提供一个固定的标题，这样当我滚动它时，标题不应该移动。我知道我可以创建 2 个 div，一个仅用于标题，另一个用于表格内容。我不能这样做，因为我还需要调整列的大小。是否有任何 jQuery 插件或代码可以做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:10:34.693

查看[jqFAQ.com](http://jqfaq.com/how-to-create-table-with-fixed-headers-and-resizable-columns/)链接，这将帮助您创建具有固定标题和可调整大小列的表。

# angularjs - AngularJS 自定义指令在 FF16 中有效，但在 IE 或 Chrome 中无效

> ID：13489034
> 
> 赞同：1
> 
> 时间：2012-11-21T08:23:08.453
> 
> 标签：angularjs

我有一个指令，它根据输入属性 id 是否存在来呈现活动或禁用的文件链接。

该指令称为文件链接：

```
<filelink id="{{resource.id}}" type="{{resource.mimetype}}" name="{{resource.name}}" size="{{resource.size}}" icon="hide"></filelink> 
```

这是指令代码：

```
.directive('filelink', function() {
    return {
        restrict: 'E',
        replace:true,
        scope: true,
        template:"<span></span>",
        link: function($scope, $element, $attrs){
            $attrs.$observe('id', function (value) {
                if(value == ""){
                    $element.append("<span class='heading' href=''>  "+$attrs.name+" <i class='icon-lock'></i></span>")
                }else{
                    $element.append("<a class='heading' href='t3a/index.php?id=5&tx_crcdata_crc_data_mgm[controller]=Dataset&tx_crcdata_crc_data_mgm[action]=readFile&tx_crcdata_crc_data_mgm[id]="+$attrs.id+"&tx_crcdata_crc_data_mgm[type]="+$attrs.type+"&tx_crcdata_crc_data_mgm[name]="+$attrs.name+"&tx_crcdata_crc_data_mgm[size]="+$attrs.size+"' style='padding-left: 10px;' title='"+$attrs.name+"'>  "+$attrs.name+" </a> ")
                 }
             });
          }
        };
      }); 
```

id 值通过控制器外部的解析器异步接收：

```
DatasetDetailCtrl.resolve = {
  dataset: function($route, Package) {
    Package.getSinglePackage($route.current.params.datasetId);
  },
  delay: function($q, $timeout) {
    var delay = $q.defer();
    $timeout(delay.resolve, 1000);
    return delay.promise;
  }
}; 
```

该指令在 Firefox 16 中运行良好，但在 Chrome 和 IE 中该指令不起作用，因为所有 $attrs 都是“未定义的”。似乎观察异步调用的数据不起作用

任何想法为什么会这样？

# php - 无法连接到 SMTP 主机

> ID：13489037
> 
> 赞同：13
> 
> 时间：2012-11-21T08:23:17.157
> 
> 标签：php, smtp, phpmailer

> SMTP 错误：无法连接到 SMTP 主机。无法发送消息。
> 
> 邮件程序错误：SMTP 错误：无法连接到 SMTP 主机。

我似乎找不到让 PHPMailer 在 CentOS 下工作的方法。邮件在带有 XAMPP 的 Windows 下工作得很好，但在 Linux 下我总是得到这个错误。

SMTP 服务器是侦听端口 25 的 Lotus Domino，CentOS 机器根本没有防火墙，奇怪的是即使 mail() 也不起作用。它什么也不返回（而在 Windows 上返回 1）。如果我通过 CentOS 服务器通过 telnet 发送电子邮件，它工作得很好，所以我认为这不是网络问题。它必须与PHP有关，但我不知道如何。

```
<?php
require("class.phpmailer.php");
$mail = new PHPMailer();
$mail->IsSMTP();
$mail->Host = "192.168.x.x";
$mail->SMTPAuth = false;
$mail->From = "xxx@xxx.it";
$mail->FromName = "XXX";
$mail->AddAddress("xxx@xxx.it");
$mail->IsHTML(true);
$mail->Subject = "Test";
$mail->Body    = "Test";
if(!$mail->Send())
{
   echo "Message could not be sent. <p>";
   echo "Mailer Error: " . $mail->ErrorInfo;
   exit;
}
echo "Message has been sent";
?> 
```

只是为了澄清上面的代码适用于 XAMPP (Windows)。

我在 PHPMailer 上调试了错误，错误发生在这里（class.smtp.php 方法 Connect()）：

```
$this->smtp_conn = @fsockopen($host,    // the host of the server
                             $port,    // the port to use
                             $errno,   // error number if any
                             $errstr,  // error message if any
                             $tval);   // give up after ? secs
// verify we connected properly
if(empty($this->smtp_conn)) {
  $this->error = array("error" => "Failed to connect to server",
                       "errno" => $errno,
                       "errstr" => $errstr);
  if($this->do_debug >= 1) {
    echo "SMTP -> ERROR: " . $this->error["error"] . ": $errstr ($errno)" . $this->CRLF . '<br />';
  }
  return false;
} 
```

好像打不开Socket...

**更新：**使用 $mail->SMTPDebug = 2; 正如阿尔瓦罗所建议的那样产生了这个输出：

> SMTP -> 错误：无法连接到服务器：权限被拒绝 (13)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-08-23T09:55:20.353

操作系统 CentOS 6.3

无法发送电子邮件

经过一些研究发现 SELinux 阻止了通信

SELinux 是默认激活和配置的。因此 SELinux 不允许 Apache (httpd,phpmailer) 使用 sendmail 功能并进行任何类型的网络连接。

使用 getsebool 命令，我们可以检查是否允许 httpd 恶魔通过网络建立连接并发送电子邮件。

```
getsebool httpd_can_sendmail
getsebool httpd_can_network_connect 
```

此命令将返回一个布尔值 on 或 off。如果它关闭，我们可以使用以下方法将其设置为打开：

```
sudo setsebool -P httpd_can_sendmail 1
sudo setsebool -P httpd_can_network_connect 1 
```

现在您可以测试您的 php、代码以查看 SendMail 是否正常工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-21T08:54:38.200

您可以使用该属性启用调试模式`SMTPDebug`，例如：

```
$mail = new PHPMailer();
// 1 = errors and messages
// 2 = messages only
$mail->SMTPDebug  = 2; 
```

错误消息将回显到屏幕上。

**更新：**

[使用fsockopen()](http://php.net/fsockopen)的*权限被拒绝*错误消息表明用户 PHP 以不允许打开套接字的方式运行。如果您仔细检查是否没有防火墙，则可能是[SELinux 问题](http://yml.com/fv-b-1-619/selinux--apache-httpd--php-establishing-socket-connections-using-fsockopen---et-al.html):-？

# ruby-on-rails - 在 Rails 应用程序中使用 RSpec 测试登录流程

> ID：13489038
> 
> 赞同：0
> 
> 时间：2012-11-21T08:23:20.933
> 
> 标签：ruby-on-rails, login, rspec, integration-testing, flow

我正在使用 RSpec 来测试 Rails 中的控制器行为。我的期望之一是以下情况：

1.  用户尝试使用 params 访问受保护（需要登录）的 url `/home?val=123`。
2.  该用户被重定向到登录页面。
3.  登录后，用户应重定向回最初请求的 URL，并带有相关参数。

我正在为我的身份验证系统使用设计（使用omniauth），并且我已经设置了推荐的宏来登录用户等等。

我对如何测试上述行为的流程有点困惑：

```
describe HomeController do
  context "user is logged out" do
    it "redirects back to original page after signin" do
      # user is not signed in - redirected to login page
      get :index, { :val => '12345' }
      current_user.should_not be_present
      expect(response).to redirect_to(login_page_path)

      # should now login the user and verify
      # that request.fullpath == '/home?val=12345'

      # ?...
    end
  end

end 
```

它甚至属于控制器规范吗？任何帮助或示例将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:18:40.930

Luacassus 看起来他有一个不错的答案，但你看过 Capybara 的请求测试吗？

[这里有一个关于Rails Casts](http://railscasts.com/episodes/257-request-specs-and-capybara)的非常不错的教程。

这基本上就是我们用来测试注册测试的内容。但是，我们没有测试omniauth，所以它可能不是您正在寻找的。

# java - 简单线程串联运行？（直到第一个线程停止，第二个线程才会运行）

> ID：13489039
> 
> 赞同：3
> 
> 时间：2012-11-21T08:23:22.773
> 
> 标签：java, multithreading

我一个接一个地开始两个线程。第一个线程从输入循环中读取，另一个线程检查循环中的某些条件以向另一个线程发送中断。

问题是我首先开始的两个线程中的任何线程都不会让另一个停止。如果我开始阅读永远不会运行另一个线程，直到它完成，如果我启动另一个线程正在检查循环中的条件，它不会在代码中向前移动，直到条件为真并退出循环。正确的方法是什么？下面的示例代码：

线程 1)

```
public class InterruptionThread extends Thread {
   public void run() {

      while (condition not true) {
         try {
            sleep(1000);
         } catch (InterruptedException e) {
            e.printStackTrace();
         }

      }
      if (condition true) {
         do some work
         return;
      }
   }
} 
```

线程 2)

```
public class ReadingThread extends Thread{

   public void run() {
      int input;
      while (true) {
         try {
            input = stdInput.read();
         } catch (IOException e) {
            e.printStackTrace();
            return;
         }
         System.out.print((char) input);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:26:18.790

这听起来像您没有以正确的方式启动线程。

使用`start()`方法来启动线程，而*不是*`run()`方法（实际上并不启动线程）。

```
new InterruptionThread().start();
new ReadingThread().start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:49:55.043

我认为您的问题属于生产者消费者问题类型。所以建议你使用 BlockingQueue。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html)

也不是直接处理线程；如果你使用 Executor Framework 会很容易；这样线程管理将变得非常容易。

# android - 我可以在我的电脑上使用安卓应用吗？如何？

> ID：13489040
> 
> 赞同：2
> 
> 时间：2012-11-21T08:23:29.763
> 
> 标签：android

朋友们

从我的一位朋友那里我听说我们可以在我们的电脑上使用安卓应用程序......

我可以在笔记本电脑上使用 Android 应用程序吗？

如果是，请告诉我如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:25:26.910

是的你可以

[在 PC 上运行移动应用程序：](http://bluestacks.com/)

但这将仅支持 Windows 或 Mac。不在**Linux**操作系统上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:27:35.137

你需要一个安卓模拟器。你可以寻找一个独立的模拟器或下载 android SDK for eclipse，你也会有一些。

这是另一个关于如何在模拟器上安装市场的线程：

[如何在模拟器上安装 Android Market App？](https://stackoverflow.com/questions/1387830/how-to-install-android-market-app-on-the-emulator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:27:58.583

安装 AMD 的 BlueStack。 [Bluestacks 网页](http://bluestacks.com/)。这也适用于基于 Intel 的 Windows 机器。我没有在 Mac 上尝试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:28:30.330

您可以安装虚拟机（如 VMWare 或 VirtualBox）在您的 PC 中运行 Android。示例：[http ://www.kirsle.net/blog/kirsle/android-4-0-in-virtualbox](http://www.kirsle.net/blog/kirsle/android-4-0-in-virtualbox)

# c# - 绑定到属性不起作用

> ID：13489046
> 
> 赞同：1
> 
> 时间：2012-11-21T08:23:47.250
> 
> 标签：c#, wpf, mvvm

这是用户控制背后的代码

```
 public delegate void YardSelectionChangedDelegate();
 public event YardSelectionChangedDelegate YardSelectionChanged;
 public static readonly DependencyProperty SelectedYardIdProperty =
     DependencyProperty.Register(
         "SelectedYardId",
         typeof(long),
         typeof(YardSelectorUserControl),
         new UIPropertyMetadata(null)); 
```

这是属性：

```
public long SelectedYardId
{
    get { return (long)GetValue(SelectedYardIdProperty); }
    set { SetValue(SelectedYardIdProperty, value); }
} 
```

这是父窗口中的绑定：

```
SelectedYardId="{Binding  Path=YardId,UpdateSourceTrigger=PropertyChanged}" 
```

问题是该属性的 Set 永远不会起作用，并且光标永远不会到达 Set 主体。确实谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:13:36.377

这是因为绑定引擎不使用您的 set 或 get 访问器来设置或获取属性。它直接使用 DependencyObject 的 SetValue 和 GetValue。为了在更改依赖属性时触发事件，您需要在注册依赖属性时定义回调委托，如下所示：

```
public static readonly DependencyProperty SelectedYardIdProperty =
    DependencyProperty.Register(
        "SelectedYardId",
        typeof(long),
        typeof(YardSelectorUserControl),
        new UIPropertyMetadata(OnSelectedYardIdChanged));

public static void OnSelectedYardIdChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
{
     // Action 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:10:41.523

也许您应该在模型中实现 INotifyPropertyChanged，并更改“YardId”属性以在“Set”主体中引发 PropertyChanged 事件。

# bash - 将 url 传递给 bash 脚本以在 scp 中使用

> ID：13489051
> 
> 赞同：3
> 
> 时间：2012-11-21T08:24:06.563
> 
> 标签：bash, ssh, scp

我正在编写一个cron来备份服务器上的一些东西。基本上，我使用 scp 从本地目录发送特定文件。我正在使用公钥来避免身份验证。

为了可重用性，我通过参数将本地目录和服务器 url 传递给我的 bash 脚本。

我如何设置参数：

```
#!/bin/bash

DIR="$1"
URL="$2"
FILES="$DIR*.ext" 
```

我的问题是关于格式化网址。

## 不格式化

我如何将文件发送到服务器：

```
#!/bin/bash

for F in $FILEs
do
    scp $F $URL;

    if ssh $URL stat $(basename "$F")
    then
        rm $F
    else 
        echo "Fails to copy $F to $URL"
    fi
done 
```

如果我尝试在服务器上的用户家中复制，我会：

```
$ ~/backup /path/to/local/folder/ user@server.com: 
```

如果我尝试在服务器上的特定目录中复制，我会这样做：

```
$ ~/backup /path/to/local/folder/ user@server.com:/path/to/remote/folder/ 
```

在所有情况下，它都会给我一个众所周知的错误（以及我的自定义回声）：

```
ssh: Could not resolve hostname user@server.com: nodename nor [...]
Can't upload /path/to/local/folder/file.ext to user@server.com 
```

无论如何它都可以工作（文件被复制）。但这不是解决方案，因为 scp 失败（似乎），文件永远不会被删除。

## 带格式

我尝试使用这种方法发送文件：

```
#!/bin/bash

for F in $FILES
do
    scp $F "$URL:"
done 
```

我不再收到错误，它适用于在用户的主目录复制然后删除本地文件：

```
$ ~/backup /path/to/local/folder/ user@server.com 
```

但是，当然，发送到特定目录根本不起作用。

## 最后

所以我认为我的第一种方法更合适，但我怎样才能摆脱那个错误呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:28:46.983

您的错误是您可以`scp`但`user@server.com:`不能`ssh`：您需要删除尾随`:`字符（以及它之后的可能路径）。`bash` *您可以通过参数扩展*轻松做到这一点：

```
ssh "${URL%:*}" stat "$(basename "$F")" 
```

**建议**

*   “使用更多报价！” 它们至关重要。此外，了解 ' 和 " 和 ` 之间的区别。参见[http://mywiki.wooledge.org/Quotes](http://mywiki.wooledge.org/Quotes)和[http://wiki.bash-hackers.org/syntax/words](http://wiki.bash-hackers.org/syntax/words)
*   如果文件名中有空格，您的代码会破坏。更好的使用`while IFS= read -r line; do #stuff with $line; done < file.txt`
*   见[bash 参数扩展](http://wiki.bash-hackers.org/syntax/pe)

# jpa-2.0 - Container Managed 和 Application Managed EntityManager 的区别

> ID：13489057
> 
> 赞同：5
> 
> 时间：2012-11-21T08:24:28.480
> 
> 标签：jpa-2.0, entitymanager

我很难理解容器管理的实体管理器和应用程序管理的实体管理器之间的区别？

如果您能给我一个说明差异的例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T10:25:26.283

对于容器管理的实体管理器，容器管理该实体管理器的生命周期。对于应用程序管理的应用程序（意味着您，程序员）管理它。

一个简单但非常明显的区别是您必须调用`close()`应用程序管理的实体工厂。当您使用容器管理的容器时，容器会为您执行此操作。

应用程序管理的实体管理器的持久性上下文也不是事务范围的。它在实体管理器创建时开始，在它关闭时结束。这使它有点像扩展的持久性上下文，不同之处在于您可以在任何地方使用这种类型的实体管理器，而不仅仅是在有状态的 bean 中。

最后，应用程序管理的实体管理器是唯一可以正式配置为使用资源本地事务的实体管理器，这些事务独立于容器可能运行的任何（JTA）事务。

请注意，在 Java SE 中，您只有应用程序管理的实体管理器。因此，当您只是将 Hibernate 添加到 Tomcat（一种流行的组合）时，您实际上一直在使用应用程序管理的实体管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T01:34:48.037

如果您有多个 java EE 应用程序连接同一个数据库并使用 JPA 实体管理器缓存。你可能会遇到这个问题：

**在一个应用程序中进行的数据库更改可能不会立即反映在其他应用程序中**

使用应用程序托管实体管理器代替容器托管实体管理器是解决此问题的完美解决方案。

你可以参考我的博客[Java EE Example - How to use application managed entitymanager](http://www.victz.com/post/cf4f7098785b46e7b22d84e9520b3082)

# video - 如何在煎茶触摸中播放视频

> ID：13489060
> 
> 赞同：0
> 
> 时间：2012-11-21T08:24:29.370
> 
> 标签：video, sencha-touch

我想在我的 sencha touch 应用程序中播放视频。如果有人知道这一点，请帮助我。

样本

```
{
    xtype: 'video',
    // cls: 'video',
    url: 'lib/sample.mp4',
    loop: false,
    width: 250,
    height: 10,
    posterUrl: 'lib/touch/img/pic2.jpg'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:32:39.097

如果您在使用标签时在视频标签上包含海报属性，则视频将无法在使用 iOS 3 的 iPad 和 iPhone 上播放。您会看到播放按钮损坏或根本没有播放按钮。

但显然这个错误已在 iOS 4 中修复

有关视频的更多信息，请参阅以下网站。 [http://camendesign.com/code/video_for_everybody#notes](http://camendesign.com/code/video_for_everybody#notes)

# c# - 在asp mvc 4中将Json文本解析为C#对象

> ID：13489061
> 
> 赞同：12
> 
> 时间：2012-11-21T08:24:30.633
> 
> 标签：c#, .net, asp.net-mvc, json, asp.net-mvc-4

我有大量的自定义属性我想将它们保存在数据库中，我对如何将它们存储在数据库中感到困惑，我想将它们存储为一个字符串，将它们分开

( `=`=> name , value) ( `;`=> attribute , attribute) 但代码一点也不优雅！

所以我考虑将它们保存为`Json`字符串，但我找不到 `Json to object parser`

而我们只需要调用`json()`解析`object to json string`

有没有比使用 json 字符串更好的方法，是否提供了 json 字符串解析器？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-21T08:39:18.870

尝试使用 `System.Web.Script.Serialization.JavaScriptSerializer`，这里是示例：

```
var yourObject = new JavaScriptSerializer().Deserialize<YourType>(strInput) 
```

或者

```
var yourObject = new JavaScriptSerializer().Deserialize(strInput) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-21T08:29:08.533

很多人使用[Json.net](http://james.newtonking.com/projects/json-net.aspx)进行序列化

```
var log  = JsonConvert.DeserializeObject<YourObject>(logJson) 
```

和另一个方向

```
 var logJson = JsonConvert.SerializeObject(log); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T08:28:13.847

你可以使用 $.parseJSON，试试这个只是为了让你看到 txt 数据：

```
var info = $.parseJSON(data);
 alert(info); 
```

# android - AudioRecord：AudioFormat 常量和麦克风选择

> ID：13489063
> 
> 赞同：1
> 
> 时间：2012-11-21T08:24:38.610
> 
> 标签：android, audiorecord, android-audiorecord, audioformat

我目前正在开始为 Android 编写一个软件，该软件即将测量封闭房间的混响时间。

我不得不选择[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)而不是[MediaRecorder](http://developer.android.com/reference/android/media/MediaRecorder.html)，因为它让我有机会获取原始数据。

您可能知道有许多不同的常量可供选择`AudioFormat`（例如：、、、`CHANNEL_IN_MONO`）`CHANNEL_IN_STEREO`，`CHANNEL_IN_PRESSURE`并且您可能知道在 android 智能手机中嵌入的麦克风不止一个（通常您有 2 个麦克风，以便产生噪音取消和类似的东西）。

问题来了：我必须选择哪个常数才能确保只有一个麦克风向我提供原始数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:06:43.463

如果您进行单声道录音，则设备只能从一个麦克风录音。我不确定您所说的“原始”数据是什么意思。总会进行一些声学补偿处理（例如自动增益控制、均衡等），这不是您可以关闭的。

也会影响录制的一件事是您选择的[AudioSource 。](http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html)如果您在具有 2 个或更多麦克风的手机上选择 CAMCORDER，如果您进行单声道录音，您通常会获得带有远场调谐的后置麦克风。如果您选择 MIC/DEFAULT，您应该获得主麦克风，但它可能会根据供应商针对近场录音或远场录音进行调整（我怀疑如果您正在尝试，您可能需要远场调整测量房间混响）。

# c# - 为所有服务器端代码调用 ConfigureAwait 的最佳实践

> ID：13489065
> 
> 赞同：639
> 
> 时间：2012-11-21T08:24:49.357
> 
> 标签：c#, asp.net-web-api, task-parallel-library, async-await

当您有服务器端代码（即一些`ApiController`）并且您的函数是异步的 - 所以它们返回时`Task<SomeObject>`- 任何时候等待调用的函数是否被认为是最佳实践`ConfigureAwait(false)`？

我读过它的性能更高，因为它不必将线程上下文切换回原始线程上下文。但是，使用 ASP.NET Web Api，如果您的请求来自一个线程，并且您等待某个函数和调用`ConfigureAwait(false)`，当您返回`ApiController`函数的最终结果时，可能会将您置于不同的线程。

我在下面输入了一个我正在谈论的示例：

```
public class CustomerController : ApiController
{
    public async Task<Customer> Get(int id)
    {
        // you are on a particular thread here
        var customer = await GetCustomerAsync(id).ConfigureAwait(false);

        // now you are on a different thread!  will that cause problems?
        return customer;
    }
} 
```

* * *

## 回答 #1

> 赞同：729
> 
> 时间：2012-11-21T13:40:46.267

**更新：** [ASP.NET Core 没有`SynchronizationContext`](http://blog.stephencleary.com/2017/03/aspnetcore-synchronization-context.html). 如果你在 ASP.NET Core 上，用不用都没关系`ConfigureAwait(false)`。

对于 ASP.NET “完整”或“经典”或其他任何内容，此答案的其余部分仍然适用。

**原始帖子（针对非核心 ASP.NET）：**

[由 ASP.NET 团队制作的此视频包含有关`async`在 ASP.NET 上使用的最佳信息。](http://channel9.msdn.com/Events/aspConf/aspConf/Async-in-ASP-NET)

> 我读过它的性能更高，因为它不必将线程上下文切换回原始线程上下文。

对于 UI 应用程序也是如此，其中只有一个 UI 线程需要“同步”回。

在 ASP.NET 中，情况要复杂一些。当一个`async`方法恢复执行时，它会从 ASP.NET 线程池中获取一个线程。如果使用 禁用上下文捕获`ConfigureAwait(false)`，则线程将继续直接执行该方法。如果不禁用上下文捕获，那么线程将重新进入请求上下文，然后继续执行该方法。

所以`ConfigureAwait(false)`不会为您节省 ASP.NET 中的线程跳转；它确实为您节省了重新输入请求上下文的时间，但这通常非常快。如果您尝试对请求进行少量并行处理，这`ConfigureAwait(false)` *可能会很有用，但实际上 TPL 更适合大多数情况。*

> 但是，对于 ASP.NET Web Api，如果您的请求来自一个线程，并且您等待某个函数并调用 ConfigureAwait(false)，当您返回 ApiController 函数的最终结果时，这可能会将您置于另一个线程.

实际上，只要做一个`await`可以做到这一点。一旦您的`async`方法命中`await`，该*方法*将被阻止但*线程*返回到线程池。当方法准备好继续时，从线程池中抢夺任何线程并用于恢复该方法。

ASP.NET 中唯一的区别`ConfigureAwait`是该线程在恢复方法时是否进入请求上下文。

我在我的[MSDN 文章`SynchronizationContext`](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)和我的[`async`介绍性博客](http://blog.stephencleary.com/2012/02/async-and-await.html)文章中有更多背景信息。

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2012-11-21T09:01:21.073

简要回答您的问题：不。您不应该`ConfigureAwait(false)`像那样在应用程序级别调用。

TL;DR 版本的长答案：如果您正在编写一个不了解您的使用者并且不需要同步上下文的库（我相信您不应该在库中），您应该始终使用`ConfigureAwait(false)`. 否则，您的库的使用者可能会因为以阻塞方式使用您的异步方法而面临死锁。这取决于情况。

下面是关于方法重要性的更详细的解释`ConfigureAwait`（引自我的博客文章）：

> 当您使用 await 关键字等待方法时，编译器会代表您生成一堆代码。此操作的目的之一是处理与 UI（或主）线程的同步。此功能的关键组件是`SynchronizationContext.Current`获取当前线程的同步上下文。 `SynchronizationContext.Current`根据您所处的环境填充。`GetAwaiter`Task 的方法查找 `SynchronizationContext.Current`. 如果当前同步上下文不为空，则传递给该等待者的延续将被回发到该同步上下文。
> 
> 当以阻塞方式使用使用新异步语言特性的方法时，如果您有可用的 SynchronizationContext，您将最终陷入死锁。当您以阻塞方式使用此类方法时（使用 Wait 方法等待 Task 或直接从 Task 的 Result 属性中获取结果），您将同时阻塞主线程。当最终任务在线程池中的该方法内完成时，它将调用延续以回发到主线程，因为`SynchronizationContext.Current`它可用并被捕获。但是这里有个问题：UI线程被阻塞了，你就死锁了！

此外，这里有两篇非常适合您的文章，它们正是针对您的问题：

*   [用 C# 5.0 异步语言特性解决死锁的完美秘诀](http://www.tugberkugurlu.com/archive/the-perfect-recipe-to-shoot-yourself-in-the-foot-ending-up-with-a-deadlock-using-the-c-sharp-5-0-asynchronous-language-features)
*   [用于 HTTP API 的异步 .NET 客户端库以及对 async/await 不良影响的认识](http://www.tugberkugurlu.com/archive/asynchronousnet-client-libraries-for-your-http-api-and-awareness-of-async-await-s-bad-effects)

最后，[Lucian Wischik](https://twitter.com/lwischik)有一个关于这个主题的精彩短视频：[异步库方法应该考虑使用 Task.ConfigureAwait(false)](https://channel9.msdn.com/Series/Three-Essential-Tips-for-Async/Async-library-methods-should-consider-using-Task-ConfigureAwait-false-)。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2017-06-22T02:49:01.287

我发现使用 ConfigureAwait(false) 的最大缺点是线程文化恢复为系统默认值。如果您配置了一种文化，例如...

```
<system.web>
    <globalization culture="en-AU" uiCulture="en-AU" />    
    ... 
```

并且您托管在其文化设置为 en-US 的服务器上，那么您会在 ConfigureAwait(false) 被调用之前发现 CultureInfo.CurrentCulture 将返回 en-AU 并且在您将获得 en-US 之后。IE

```
// CultureInfo.CurrentCulture ~ {en-AU}
await xxxx.ConfigureAwait(false);
// CultureInfo.CurrentCulture ~ {en-US} 
```

如果您的应用程序正在执行任何需要对数据进行文化特定格式的操作，那么在使用 ConfigureAwait(false) 时需要注意这一点。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-11-21T13:23:29.190

我有一些关于实施的一般想法`Task`：

1.  任务是一次性的，但我们[不应该](https://stackoverflow.com/questions/3734280/is-it-considered-acceptable-to-not-call-dispose-on-a-tpl-task-object)使用`using`.
2.  `ConfigureAwait`在 4.5 中引入。`Task`在 4.0 中引入。
3.  .NET 线程*总是*用于流动上下文（参见 C# via CLR book），但在它们的默认实现中，`Task.ContinueWith`它们并不 b/c，它意识到上下文切换是昂贵的，默认情况下它是关闭的。
4.  问题是库开发人员不应该关心其客户是否需要上下文流，因此它不应该决定是否流上下文。
5.  [稍后添加] 没有权威的答案和适当的参考，我们一直在为此奋斗，这意味着有人没有做好他们的工作。

我有几篇关于这个主题的[帖子](http://byterot.blogspot.co.uk/search/label/Async)，但我的看法——除了 Tugberk 的好答案——**你应该把所有的 API 都变成异步的，并且最好让上下文流动。**由于您正在执行异步操作，因此您可以简单地使用延续而不是等待，因此不会导致死锁，因为库中没有等待，并且您保持流动，因此保留了上下文（例如 HttpContext）。

**问题是当一个库公开一个同步 API 但使用另一个异步 API - 因此您需要在代码中使用`Wait()`/ `Result`。**

# c - 像 qsort 这样的 C 函数如何处理不同的数据类型？

> ID：13489071
> 
> 赞同：1
> 
> 时间：2012-11-21T08:25:24.640
> 
> 标签：c, generics, void-pointers

在`stdlib.h`中，有一个带有原型的函数 qsort() 的声明：

```
void qsort( void *ptr, size_t count, size_t size,
        int (*comp)(const void *, const void *) ); 
```

显然这是一个泛型编程。我想知道它是如何实现的，如何从 void * 类型中获取元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:30:25.263

`void *`指针根据`size_t size`（中的第三个参数`qsort`）强制转换

首先我们对to`void*`进行类型转换`char*`，然后根据`size``1`

编辑：（用于内置数据类型）

```
char *ptr = (char*)vp; //here vp is void *p

*(ptr + (n-1)*size); //will give you nth element 
```

例如

```
size =1 and want 3rd element it means it will give you 3rd char
size =4 and want 3rd element it means it will give you 3rd int or float
size =2 and want 3rd element it means it will give you 3rd short int
size =8 and want 3rd element it means it will give you 3rd double 
```

注意：大小是实现定义的，因此它可能因编译器而异

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:55:57.243

```
#include <stdio.h>

void compare_first_to_rest(void *ptr, size_t nelem, 
   size_t size, int (*cmp)(const void*, const void*)) {
    unsigned i;
    for(i = 1; i < nelem; ++i)
        {
        int res = cmp(ptr, (char*)ptr + i * size);
        if(res < 0)
            printf("First element is less than element at %u\n", i);
        else if(res > 0)
            printf("First element is greater than element at %u\n", i);
        else
            printf("First element is equal to element at %u\n", i);
        }
}

int icmp(const void *x, const void *y) {
   return *(int*)x - *(int*)y;
}

int main()
{
   int x[] = { 5, 3, 6, 2, 4, 8, -1, 10 };
   compare_first_to_rest(x, 8, sizeof(int), icmp);
} 
```

如您所见，`compare_first_to_rest' 不知道它在第一个参数中接收到的元素的类型。但是知道每一个的大小，它可以得到一个指向每一个的指针，并让函数指针完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:33:14.680

最后一个参数是函数指针。正如您隐含地提到的，您必须在某处实现了此功能。但是当你实现它时，你确实知道指针之王实际上是你的 void* 元素。

在您的 comp 函数中，您必须将 2 个参数转换为您要使用的指针类型，如下所示：

```
int myCompFn(const void * e1, const void * e2)
{
    MyType *elem1=(MyType*)e1;
    MyType *elem2=(MyType*)e2;
    ... /* then compare elem1 and elem2 regarding to there definition */
} 
```

# iphone - 从应用程序中排除 iPhone 3GS (Adobe Air)

> ID：13489093
> 
> 赞同：0
> 
> 时间：2012-11-21T08:26:45.577
> 
> 标签：iphone, ios, air, app-store

> **可能重复：**
> [我可以限制我的 iPhone 应用程序被 iPhone3G 使用吗？](https://stackoverflow.com/questions/3283189/can-i-restrict-my-iphone-app-from-being-used-by-iphone3gs)

我已经为 IOS 构建了一个应用程序，它在 iPhone 4（及更高版本）和所有 iPad 上运行良好。只是 3GS 被认为缺乏运行良好的动力。我可以排除这些设备的应用程序吗？

我发现使用 UIRequiredDeviceCapabilities 和[http://developer.apple.com/library/ios/#documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html](http://developer.apple.com/library/ios/#documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)来限制使用所需功能的应用程序。但是我找不到可以排除 3GS 的东西。有人知道吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:38:03.570

将`UIRequiredDeviceCapabilities`密钥添加到 info.plist 文件和`front-facing-camera`所需的值。如果我是正确的，3GS 没有前置摄像头。这是[包含所有可能值的苹果文档](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW3)。正如 TonyMkenu 在评论中提到的，请查看此链接[以获取 UIRequiredDeviceCapabilities 和设备兼容性矩阵](http://blog.manbolo.com/2012/10/30/uirequireddevicecapabilities-and-device-compatibility-matrix)

# android - 如何在没有源代码的情况下从另一个应用程序调用 apk

> ID：13489095
> 
> 赞同：2
> 
> 时间：2012-11-21T08:26:45.457
> 
> 标签：android

我正在开发一个应用程序，我想在其中调用另一个应用程序 apk，但我没有该应用程序的代码，所以我不知道包名和类名。我搜索了很多，但找不到任何有效的东西. 有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:37:48.130

It is perfectly possible. You don't need to know its "source code", you need to do a bit of research on the app and you're probably going to find its package's name.

You can:

*   a) Try to de-pack the .apk which is extremely tedious (or was last time I tried)
*   b) Write a very simple app that will list all of your installed apps (by package name)
*   c) Some custom and even stock firmwares even have that option baked in when you go to Apps/Installed/All or something similar to that.

Once you have the package name. For example, com.adobe.reader for...well...Adobe Reader, then you can launch the app really simply by using an Intent.

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.package.address");
startActivity(LaunchIntent); 
```

For a similar, but maybe clearer for you view of things, you can check out this link:

[Open another application from your own (intent)](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)

# javascript - 更新图像的 Javascript 循环返回损坏的图像

> ID：13489104
> 
> 赞同：0
> 
> 时间：2012-11-21T08:27:24.940
> 
> 标签：javascript, loops

我是 javascript 新手，正在尝试创建这个循环来模拟一些掷骰子。当我单击滚动时，没有任何图像被刷新，并以显示的损坏图像结束。谁能看到我的错误在哪里？

```
 function roll(){
        for(x=0;x<10;x++){ 
            var die_num1 = Math.ceil(Math.random()*6);
            for(y=0;y<20;y++){
                var picturetype1 = Math.ceil(Math.random()*3);
                if (picturetype1 == 1){prefix1 = "die-";}
                if (picturetype1 == 2){prefix1 = "dicet-";}
                if (picturetype1 == 3){prefix1 = "dices-";}
                document.getElementById("dice").src='http://localhost/CodeIgniter_2.1.2/dice/' + prefix1 + die_num1 + '.gif';
            }
        } 
    } 
```

身体：

```
 <input type ="button" value = "Roll" onclick="roll()" >
    <img name="dice" id="dice" src="http://localhost/CodeIgniter_2.1.2/dice/die-1.gif" > 
```

我使用 a`document.write`来确保至少最终图像存在于我的文件夹中，并且确实存在。我希望看到图像随着循环的进行而循环播放。同样，我没有使用 javascript 的经验，并且根据我认为它的外观将其组合在一起。任何帮助将不胜感激。在此处输入代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:41:02.843

我不希望浏览器成为事件驱动的环境，甚至在您返回之前考虑更新屏幕`roll()`。您需要熟悉`setTimeout`并将其作为一系列计时器事件进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:21:49.637

感谢您让我朝着正确的方向前进。正如迈克尔建议的那样，我已经对其进行了重新设计以使用 setTimeout 并且效果很好。每次迭代只需要 1/10 秒，虽然不多，但效果显着。

```
function roll2(){
    var timer = setTimeout ("roll2();", 100);
    i++;
    if(i >= 15) clearTimeout(timer);
    var die_num1 = Math.ceil(Math.random()*6);
    var picturetype1 = Math.ceil(Math.random()*3);
    if (picturetype1 == 1){prefix1 = "die-";}
    if (picturetype1 == 2){prefix1 = "dicet-";}
    if (picturetype1 == 3){prefix1 = "dices-";}
    if (i <=15) {
        document.getElementById("dice").src='http://localhost/CodeIgniter_2.1.2/dice/' + prefix1 + die_num1 + '.gif';
    }
    if (i >=15) {
        document.getElementById("dice").src='http://localhost/CodeIgniter_2.1.2/dice/die-' + die_num1 + '.gif';
        i=0;
    }
} 
```

# javascript - 使用动态 ID 选择

> ID：13489109
> 
> 赞同：0
> 
> 时间：2012-11-21T08:27:49.550
> 
> 标签：javascript, jquery, html

我有一个动态生成的表单，并且动态生成了 id（和潜在的类）。表格是相同的，但它们的最后都附加了相关的 ID。

如何选择每组并将代码应用于每组？

```
switch(id_type_champ)
            {
            case 1:
                 $('#header-right-container').append(''+nom_champ+'<input type="text" id='+Id+'  >  ').trigger("create");
              break;
            case 2:
                 $('#header-right-container').append(''+nom_champ+'<input type="text" id='+Id+' > ').trigger("create");
              break;
            case 3:
                 $('#header-right-container').append(''+nom_champ+'<input type="date" id='+Id+' OnClick="aff_date(\'' + Id + '\')">').trigger("create");
              break;
            case 4:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+'    ><option value=0></option></select>').trigger("create");

                v++;
                 break;
            case 5:
                $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
              break;
            case 6:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
              break;
            case 7:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
              break;
            case 8:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
              break;
            case 9:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
              break;
            default:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
             break;
            } 
```

该代码可以执行添加选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:48:21.677

您可以像这样附加案例：

```
switch (id_type_champ) {
    case 1:
    case 2:
        $('#header-right-container').append(nom_champ + '<input type="text" id=' + Id + ' > ').trigger("create");
        break;
    case 3:
        $('#header-right-container').append(nom_champ + '<input type="date" id=' + Id + ' OnClick="aff_date(\'' + Id + '\')">').trigger("create");
        break;
    // The cases below can be removed, except dor "default"
    case 4:
    case 5:
    case 6:
    case 7:
    case 8:
    case 9:
    // ^ These can be removed.
    default:
        $('#header-right-container').append(nom_champ + '<select id=' + Id + ' ><option value=0> </option></select> ').trigger("create");

        v++;
        break;
} 
```

案例 1 到 3 将创建 a `input`， 4 到 9 和默认 a `select`。
不过，您可以删除案例 4-9，因为默认情况下会处理这些案例。

此外，不需要在`nom_champ`( )前添加空字符串。`'' + nom_champ`我假设那是用来转换`nom_champ`为字符串的，但是`'<input/select'`附加的那会处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:55:34.393

最好为此创建自己的插件，例如此处的原始函数：

```
function ListIds(var Id) {
switch(id_type_champ)
            {
            case 1:
                 $('#header-right-container').append(''+nom_champ+'<input type="text" id='+Id+'  >  ').trigger("create");
              break;
            case 2:
                 $('#header-right-container').append(''+nom_champ+'<input type="text" id='+Id+' > ').trigger("create");
              break;
            case 3:
                 $('#header-right-container').append(''+nom_champ+'<input type="date" id='+Id+' OnClick="aff_date(\'' + Id + '\')">').trigger("create");
              break;
            case 4:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+'    ><option value=0></option></select>').trigger("create");

                v++;
                 break;
            case 5:
                $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
              break;
            case 6:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
              break;
            case 7:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
              break;
            case 8:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
              break;
            case 9:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
              break;
            default:
                 $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");

                v++;
             break;
            }

} 
```

然后，插件调用此代码：

```
 (function($){  
     $.fn.listIdValue = function() {  

        return this.each(function() {  
             ListIds($(this).id)

        });  
     };  
    })(jQuery); 
```

然后您可以在您的元素或元素列表上调用此函数，例如：

```
$('#element').listIdValue(); 
```

或者

```
$('.elementClass').listIdValue(); 
```

# jquery - 加载部分页面保留样式

> ID：13489111
> 
> 赞同：0
> 
> 时间：2012-11-21T08:27:51.253
> 
> 标签：jquery, css, iframe

我想加载页面（表格）的一部分，保留 css 样式并将这部分加载到另一个页面（同一域）中。iframe 使用样式加载整个页面。jQuery .load 加载页面的一部分但不保留样式。我想要两全其美..

一个例子： ![在此处输入图像描述](../Images/bd0395a5ab244272d9654332d39def18.png)

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:32:52.017

这当然不是一件容易的事。您可以从该部分中提取`<link rel="stylesheet">`和`<style>`元素，请求外部 CSS 文件，确定哪些规则适用，并手动（使用`.css()`）将这些规则中的每一个应用到目标元素。这当然会导致与当前页面上现有的 CSS 发生冲突，所以我认为没有开箱即用的解决方案。

# javascript - 使用 asp.net mvc 在引导弹出窗口中插入图像

> ID：13489114
> 
> 赞同：0
> 
> 时间：2012-11-21T08:27:55.057
> 
> 标签：javascript, asp.net-mvc-3, twitter-bootstrap

它是`byte[]`来自数据库的图像，我需要调用一个动作。

```
<td><a href="#" rel="popover" class="user" data-content="
<h3>@hItem.m_sUsername</h3>
<img src=@Url.Action("Show", "Image", new {id = "1"}) alt="Image" />
<p>First name: @hItem.m_sFirstname</p>
<p>Last name: @hItem.m_sLastname</p>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:55:54.003

好的，所以你的逻辑应该是这样的：

```
public class ImageController
{
    [HttpGet]
    public virtual ActionResult Show(int id)
    {
        var byteArray = YourDatabaseAdapter.LoadImage(id);
        var mimeType = GetMimeType(fileName);
        return base.File(byteArray, mimeType, fileName);
    }

    private static string GetMimeType(string fileName)
    {
        var mimeType = "application/unknown";
        var extension = Path.GetExtension(fileName);
        if (extension != null)
        {
            var ext = extension.ToUpperInvariant();
            var regKey = Registry.ClassesRoot.OpenSubKey(ext);
            if (regKey != null && regKey.GetValue("Content Type") != null)
            {
                mimeType = regKey.GetValue("Content Type").ToString();
            }
        }
        return mimeType;
    }
} 
```

通用`GetMimeType`函数根据从 Windows 注册表获取的文件扩展名在 http 标头中设置您的内容类型。

编辑（用于 html 内容）：

在将 html 代码传递给内容的情况下，`.html();`使用内容 html 在外部 div 上调用的 jQuery 应该按照[参考中的](https://stackoverflow.com/questions/8875376/is-it-possible-to-use-a-div-as-content-for-twitters-popover)描述工作：

```
$('.user').popover({ 
    html : true,
    content: function() {
      return $('#data-content-wrapper').html();
    }
}); 
```

# c# - 如何自动格式化包含字符串和数字的 Excel 单元格？

> ID：13489115
> 
> 赞同：-1
> 
> 时间：2012-11-21T08:27:55.767
> 
> 标签：c#, excel, user-defined-functions, rtd

我已经编写了一个 RTD 服务器，我将它包装在一个 UDF 中 - 两者都使用 C#，如下所示：

```
public object MyUDF(string ItemID, string TopicName)
{
    return _xlApp.WorksheetFunction.RTD("my_rtdserver", null, TopicID, TopicName);
} 
```

UDF 提供字符串、日期和数字数据，但它们似乎都被格式化为字符串，这不允许我使用 excel 公式处理数字数据，例如`SUM(A:A)`.

我试图用“数字”格式格式化数字单元格，但这没有任何区别。

有人有这个问题吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:56:05.670

我发现以下工作：

```
public object MyUDF(string TopicID, string TopicName)
{
    var value = _xlApp.WorksheetFunction.RTD("my_rtdserver", null, TopicID, TopicName);
    double num;
    if (!double.TryParse(value, out num))
        return value;
    return num;
} 
```

请参阅：[检查对象是否为 C# 中的数字](https://stackoverflow.com/questions/1130698/checking-if-an-object-is-a-number-in-c-sharp)

干杯

# java - jde-import-all 没有看到 playframework(play.mvc.*) 类

> ID：13489118
> 
> 赞同：1
> 
> 时间：2012-11-21T08:28:01.813
> 
> 标签：java, emacs, playframework, classpath, jde

我想使用 emacs(with jde) 进行 playframework java 编码。（单独设置jde是个大麻烦但已经搞定了）

首先，我尝试使用 Mx jd​​e-import-all 来导入所有类。
它运行但无法导入（或列出）play.mvc.* 类。

我尝试设置 (jde-set-variables '(jde-global-classpath ( quote ("~/../myApp/conf" "~/play/framework" ~/play/framework/lib") ))) 但没有利用。

# android - 归档下载不会从我的 Android 应用程序启动

> ID：13489120
> 
> 赞同：0
> 
> 时间：2012-11-21T08:28:06.017
> 
> 标签：android, file, download

我目前正在使用 HTML5 构建一个 Android 应用程序。在我的应用程序中，我提供了指向我机器上的 tomcat 服务器中可用的 HTML 文件的链接。

```
<div><a href="http://localhost:8082/directDownload/sample.html">Beep</a></div> 
```

HTML 文件“sample.html”具有下载文件的链接，该文件位于放置 sample.html 的相同文件位置。

sample.html 有这个 -->`<a href="MyFirstOnMosync.apk">Click to download</a>`

这里的问题是，当我在 android 手机上运行我的应用程序时，链接保持不变，并且不会从给定路径启动下载。

但是，当我在网络浏览器中打开相同的 URL 时，下载开始了。

谁能告诉我为什么这个 URL 没有在我的应用程序中启动下载？我已经在我的安卓设备的设置中启用了“允许安装非市场应用程序”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:42:50.410

如果您使用的是真实设备，则必须使用机器的静态 ip 设置您的 url，例如`192.168.0.10`在模拟器中`10.0.0.2`

[看到这个帖子](https://stackoverflow.com/questions/6417055/download-files-and-store-them-locally-with-phonegap-jquery-mobile-android-and-io)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:37:01.130

使用 10.0.2.2 作为与 Android 模拟器在同一台机器上运行的服务器的 IP。

查看以下有类似问题的帖子：

[在 WebView 中下载文件](https://stackoverflow.com/questions/10069050/download-file-inside-webview)

查看此[链接](http://www.developershome.com/wap/wapServerSetup/tutorial.asp?page=settingUpMIME)以在 tomcat 中设置 mime 类型。

复制参考：

在 Tomcat 5.x 和 4.x 中，MIME 类型和文件扩展名之间的默认映射存储在文件 tomcat_home/conf/web.xml 中，其中 tomcat_home 是在您的服务器上安装 Tomcat 的路径。此处指定的映射适用于托管在 Tomcat 服务器上的所有 Web / WAP 应用程序。应用程序特定的映射应该在您的 web/WAP 应用程序目录下的 WEB-INF/web.xml 文件中设置。

每个映射都用`<mime-mapping>`,`<extension>`和`<mime-type>`标签指定。这是一个例子：

```
<web-app>

...

  <mime-mapping>
    <extension>xhtml</extension>
    <mime-type>application/vnd.wap.xhtml+xml</mime-type>   </mime-mapping>

  <mime-mapping>
    <extension>wml</extension>
    <mime-type>text/vnd.wap.wml</mime-type>   </mime-mapping>

  <mime-mapping>
    <extension>wmls</extension>
    <mime-type>text/vnd.wap.wmlscript</mime-type>   </mime-mapping>

  <mime-mapping>
    <extension>wbmp</extension>
    <mime-type>image/vnd.wap.wbmp</mime-type>   </mime-mapping>

...

</web-app> 
```

# java - 如何计算 TextView Android 中的字符数？

> ID：13489122
> 
> 赞同：2
> 
> 时间：2012-11-21T08:28:20.463
> 
> 标签：java, android

我有以下任务：

有字符串，它可以有任意长度：从**1 到 50 个符号**。还有`TextView`用于存储这个字符串。

我需要做以下事情：

如果`TextView`可以存储此字符串而不转移到下一行，`TextView`则应该存储字符串，但如果字符串非常大`TextView`，则该字符串应附加一些字符“...”并显示为`textview`。

例如，如果字符串是“abdcdereweewew”，并且`TextView`一行只能包含 10 个符号，`TextView`则应显示“abdcder...”。我该如何计算呢？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:33:17.527

您实际上可以通过在实际 TextView 上设置 XML 属性椭圆大小来做到这一点！

```
android:ellipsize="end" 
```

您可能还应该设置：

```
android:singleLine="true" 
```

ellipsize 还有更多选项，看看 =)

# stdin - 如何在新输入之前清除 php STDIN？

> ID：13489128
> 
> 赞同：4
> 
> 时间：2012-11-21T08:28:35.227
> 
> 标签：stdin, php

我有一个关于 php-cli 的问题。

我正在使用这个：

```
define("STDIN", fopen('php://stdin','r'));
$input = "";
while($input == "") {
   echo "Please enter : ";
   $input = fread(STDIN, 80);
} 
```

问题是：

如果我输入超过 80 个字符，比如 100 个，那么 20 个额外字符将添加到下一个字符中。

如何在每次输入之前“清除”STDIN？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:44:52.373

将`length`的参数设置`fread()`为更高的值（即 1024、2048、10000） - 它确定读取的数据的**最大**`fread()`长度。如果您只需要最多 80 个字符，请在阅读后检查并`substr()`在需要时缩短使用。`STDIN`如果您使用( [docs](http://php.net/manual/en/features.commandline.io-streams.php) )，则不需要打开输入流，这是推荐的，因为在处理`php://stdin`高达 PHP 5.2.1 ( [docs](http://pl1.php.net/manual/en/wrappers.php.php) ) 时存在错误。

```
$input = "";
while($input == "") {
   echo "Please enter : ";
   $input = fread(STDIN, 10000);
} 
```

还要记住`STDIN`, `STDOUT`,`STDERR`是已经定义的系统常数。您不应将这些名称用于您自己的常量。

# php - PHP - array_sum 有问题

> ID：13489135
> 
> 赞同：0
> 
> 时间：2012-11-21T08:29:11.287
> 
> 标签：php, arrays

我似乎无法让 array_sum 正常工作，也许有人可以帮助我。

```
foreach ($this->vacation as $v) {
 $this->all = array();
 $this->all[] = ((strtotime("$this->end 23:59:59") - strtotime("$this->beginning")) / 86400) - $this->sum_of_days;
}
$this->all = is_array($this->all) ? array_sum($this->all) : 0; 
```

在 foreach 循环之后，我想对数组中的所有值求和，但它不求和，它只是给了我数组的最后一个值。我正在尝试编写我的第一个 PHP 类，但我对这个数组感到沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:31:20.730

您在每次迭代中清空数组：

```
$this->all = array(); 
```

只需*在循环之前执行一次*，而不是每次迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:31:42.140

您正在循环中重新初始化数组：

```
$this->all = array();   // Moved out of the loop
foreach ($this->vacation as $v) {
 $this->all[] = ((strtotime("$this->end 23:59:59") - strtotime("$this->beginning")) / 86400) - $this->sum_of_days;
}
$this->all = is_array($this->all) ? array_sum($this->all) : 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:32:37.887

您正在循环内初始化数组`foreach`，这意味着您正在第一个循环中创建一个空数组，然后添加一个元素。在第二个循环中，您将再次创建数组（从而消除第一个元素）并添加一个元素。因此，在每个循环结束时，您的数组只包含一个元素。将初始化移出循环：

```
$this->all = array();
foreach ($this->vacation as $v) {
  $this->all[] = ((strtotime("$this->end 23:59:59") - strtotime("$this->beginning")) / 86400) - $this->sum_of_days;
}
$this->all = is_array($this->all) ? array_sum($this->all) : 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:34:24.893

消除

```
 $this->all = array(); 

```

在循环。它在每次迭代时重新初始化数组。

希望这可以帮助。

# perl - 在 ultraedit 中运行 PERL 拼写检查器（如在 komodo 编辑中）

> ID：13489137
> 
> 赞同：1
> 
> 时间：2012-11-21T08:29:18.237
> 
> 标签：perl, syntax, interactive, komodoedit, ultraedit

在 Komodo Edit 中，该工具以交互方式通知您语法错误，其中许多只是拼写错误。例如，假设我输入了（在 PERL 中）：

```
use strict;
my ($name);
$name1="Schuller"; 
```

在这种情况下，$name1 下应该有一个红色下划线，因为我们使用了 strict，而 $name1 是未定义的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:45:19.960

不幸的是，UltraEdit 不做真正的语法检查。

它只是使用单词文件中定义的规则（perl.uew for perl）基于文件的正则表达式搜索进行语法突出显示。

因此，它将以特定语法的方式突出显示某些关键字，但不会告诉您是否编写了错误的代码。

# asp.net-mvc - 如何将移动设备定位到项目

> ID：13489138
> 
> 赞同：0
> 
> 时间：2012-11-21T08:29:17.283
> 
> 标签：asp.net-mvc, visual-studio, mobile

我现在在 Visual Studio 中获得了具有 2 个 Web 项目的解决方案。一个默认值，如果用户使用移动设备，我想定位一个。

我想在进入默认站点 www.site.com 时检查用户是否在移动设备上，然后重定向到 m.site.com。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:00:32.743

**[1]**

在 ASP.NET 中，您可以使用`Request.Browser.IsMobileDevice`属性和`Request.UserAgent`.

以下代码检查`IsMobileDevice`属性并重定向到移动特定页面：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Request.Browser.IsMobileDevice)
    {
       Response.Redirec("~/default_mobile.aspx");          
    }
} 
```

**[2]**

另一种更好的方法是使用名为`51Degrees`. 这是[一篇](http://dotnetslackers.com/articles/aspnet/Mobile-Device-Detection-and-Redirection-Using-ASP-NET.aspx)关于如何在您的应用程序中使用它的文章。

# c# - 如何在代码中写入 JSON 字符串值？

> ID：13489139
> 
> 赞同：29
> 
> 时间：2012-11-21T08:29:24.797
> 
> 标签：c#, json, string, syntax

我想将以下字符串存储在 String 变量中

> {"Id":"123","DateOfRegistration":"2012-10-21T00:00:00+05:30","状态":0}

这是我使用的代码..

```
String str="{"Id":"123","DateOfRegistration":"2012-10-21T00:00:00+05:30","Status":0}"; 
```

..但它显示错误..

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-21T08:33:17.403

你必须这样做

```
String str="{\"Id\":\"123\",\"DateOfRegistration\":\"2012-10-21T00:00:00+05:30\",\"Status\":0}"; 
```

请[参阅此内容以供参考](http://www.codeproject.com/Articles/371232/Escaping-in-Csharp-characters-strings-string-forma)
也[来自 msdn :)](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)

```
Short Notation  UTF-16 character    Description
\'  \u0027  allow to enter a ' in a character literal, e.g. '\''
\"  \u0022  allow to enter a " in a string literal, e.g. "this is the double quote (\") character"
\\  \u005c  allow to enter a \ character in a character or string literal, e.g. '\\' or "this is the backslash (\\) character"
\0  \u0000  allow to enter the character with code 0
\a  \u0007  alarm (usually the HW beep)
\b  \u0008  back-space
\f  \u000c  form-feed (next page)
\n  \u000a  line-feed (next line)
\r  \u000d  carriage-return (move to the beginning of the line)
\t  \u0009  (horizontal-) tab
\v  \u000b  vertical-tab 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-03-01T06:11:33.410

我更喜欢这个，只要确保字符串中**没有单引号**

```
 string str = "{'Id':'123','DateOfRegistration':'2012 - 10 - 21T00: 00:00 + 05:30','Status':0}"
              .Replace("'", "\""); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-06-03T17:04:13.290

有另一种方法可以使用 Expando 对象或 XElement 编写这些复杂的 JSON，然后进行序列化。

[https://blogs.msdn.microsoft.com/csharpfaq/2009/09/30/dynamic-in-c-4-0-introducing-the-expandoobject/](https://blogs.msdn.microsoft.com/csharpfaq/2009/09/30/dynamic-in-c-4-0-introducing-the-expandoobject/)

```
dynamic contact = new ExpandoObject
{    
    Name = "Patrick Hines",
    Phone = "206-555-0144",
    Address = new ExpandoObject
    {    
        Street = "123 Main St",
        City = "Mercer Island",
        State = "WA",    
        Postal = "68402"
    }
};

//Serialize to get Json string using NewtonSoft.JSON
string Json = JsonConvert.SerializeObject(contact); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2020-10-28T18:23:09.720

微调[sudhAnsu63 的答案](https://stackoverflow.com/a/50668879)，这是一个**单行**：

使用**.NET 核心**：

```
string str = JsonSerializer.Serialize(
  new {    
    Id = 2,
    DateOfRegistration = "2012-10-21T00:00:00+05:30",
    Status = 0
  }
); 
```

使用**Json.NET**：

```
string str = JsonConvert.SerializeObject(
  new {    
    Id = 2,
    DateOfRegistration = "2012-10-21T00:00:00+05:30",
    Status = 0
  }
); 
```

*无需*实例化`dynamic ExpandoObject`.

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-11-21T08:32:48.990

您必须像这样转义字符串中的引号：

```
String str="{\"Id\":\"123\",\"DateOfRegistration\":\"2012-10-21T00:00:00+05:30\",\"Status\":0}"; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-21T08:32:51.007

您需要像这样转义内部引号：

```
String str="{\"Id\":\"123\",\"DateOfRegistration\":\"2012-10-21T00:00:00+05:30\",\"Status\":0}"; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-05-30T10:25:20.337

使用 Verbatim String Literals ( `@"..."`) 您可以通过用双引号对交换双引号来编写内联多行 json - "" 而不是 "。示例：

```
string str = @"
{
    ""Id"": ""123"",
    ""DateOfRegistration"": ""2012-10-21T00:00:00+05:30"",
    ""Status"": 0
}"; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-04T02:08:06.230

对于一个开箱即用的解决方案，我将 JSON 编码为 base64，以便可以将其作为字符串值导入一行。

这可以保留行格式，而无需手动编写动态对象或转义字符。格式与从文本文件中读取 JSON 相同：

```
var base64 = "eyJJZCI6IjEyMyIsIkRhdGVPZlJlZ2lzdHJhdGlvbiI6IjIwMTItMTAtMjFUMDA6MDA6MDArMDU6MzAiLCJTdGF0dXMiOjB9";
byte[] data = Convert.FromBase64String(base64);
string json = Encoding.UTF8.GetString(data);

//using the JSON text
var result = JsonConvert.DeserializeObject<object>(json); 
```

# .htaccess - 使用 htaccess 将链接（SEO 模式）转换为 Yii 路由链接

> ID：13489140
> 
> 赞同：2
> 
> 时间：2012-11-21T08:29:25.193
> 
> 标签：.htaccess, seo, yii

## 大家好，

我正在寻找在这种情况下转换 SEO 友好链接的 htaccess 脚本：

```
http://www.sitename.domain/content/categoryName/subCategoryName/contentId/contentName.html 
```

在这种情况下到 Yii（PHP 框架）的路由链接：

```
http://www.sitename.domain/index.php?r=content/view&id=contentId 
```

另一个问题是，是否可以在 htaccess 文件中使用 IF 条件？

我们有不想使用此规则的链接！

最后，感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:11:24.090

您不能为此使用网址管理器吗？类似的东西

```
'components'=>array(
    ...
    'urlManager'=>array(
        ...
        'content/<categoryName:\w+>/<subCategoryName:\w+>/<id:\d+>/<contentName:\w+>.html'=>'content/view',
        ...
    ),
    ...
); 
```

您想要的“if”语句是什么？如果可能是您可以应用那些高于主要规则的情况，以便在格式稍有不同的情况下首先运行它们？

# android - Eclipse 在 Android SDK 内容加载器处挂起

> ID：13489141
> 
> 赞同：294
> 
> 时间：2012-11-21T08:29:27.347
> 
> 标签：android, eclipse, macos

几周以来，我一直在 OS X 10.8.2 上使用 Eclipse 4.2（Juno 版本 20120920-0800），为 Android 3.0 及更高版本构建应用程序。我有一个带 SSD 的四核 i7 MacBook Pro，所以性能不是问题。一切都很好。

在某些时候，我导入了一个需要 Android 2.2 的 Android 项目，所以我使用 Android SDK 管理器 (v.21) 安装了它。从那时起，使用 Eclipse 需要很长时间。首先，它将在右下角的状态消息中打印以下内容：

> Android SDK 内容加载器：(0%)

这需要两分钟左右。具体消息是“检查项目”，在执行此操作时，所有 Android 项目都以红色突出显示，因为未找到 Android 资源。然后，它继续：

> 为 Android 2.2 加载数据 (100%)

这将停留几分钟。然后它继续对我安装的 Android 3.1 和其他 SDK 版本做同样的事情。每当第一次自动完成启动时（例如在键入之后`System.`）或当我在加载之前访问 Android 首选项时，它基本上都会挂起。

这是我的 Android SDK 的状态：

![](../Images/29978f25112995f64a7d3d2c8c6efb30.png)

我已经尝试过的：

*   重新安装 Android SDK（通过 Homebrew），从而`/usr/local/Cellar/android-sdk`完全删除。

*   从头开始重新安装 AVD 插件 (v.21)。

我能做些什么来找出这些问题的根源并回到一个美好而干净的状态？

* * *

## 回答 #1

> 赞同：567
> 
> 时间：2013-10-30T05:46:39.357

这是我找到的正确工作的解决方案：

1.  确保日食未激活。如果它是活动的，从任务管理器的进程选项卡中杀死 eclipse
2.  `%USERPROFILE%/`在 Windows 或Linux/OS X 上打开`~`（您可以从桌面找到此文件夹）
3.  转到`.android`文件夹（这可能是一个隐藏文件夹）
4.  删除`cache`位于文件夹内的`.android`文件夹
5.  删除位于文件夹`ddms.cfg`内的文件`.android`
6.  启动 Eclipse

希望这对你有用。

* * *

## 回答 #2

> 赞同：209
> 
> 时间：2013-03-27T22:09:13.663

同样的问题，卡在0%。冉

`/Applications/eclipse/eclipse -clean`

一切都很好。修改 linux 框的路径。

*更新（来自@Janusz 的评论）*

**对于在应用程序目录外使用 eclipse**的 mac 用户，您的 clean 命令将类似于：

```
path/eclipse/Eclipse.app/Contents/MacOS/eclipse -clean 
```

* * *

## 回答 #3

> 赞同：103
> 
> 时间：2013-03-26T10:56:05.693

转到您的工作区目录`\workspace\.metadata\.plugins\org.eclipse.core.resources\.projects`并删除其中的所有项目。

注意：您不会丢失您的项目

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2013-09-26T19:30:26.333

我在这里使用了其他一些答案来解决这个问题，但我最近再次遇到它，但没有一个有效。我不想重新安装或删除我的工作区，所以我终于找到了一个可以帮助其他人的工作。删除文件：

```
/workspace/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi 
```

如果您愿意，可以先进行备份。它存储您的工作台设置（透视状态、菜单选项的文件路径等）但已加载 Eclipse，我不必像某些答案建议的那样重新安装任何东西。我还没有在任何地方看到这个。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2013-06-07T13:21:01.190

我知道这已经解决了，但我想我会[分享这个链接](http://xmodulo.com/2013/04/how-to-fix-android-sdk-content-loader-stuck-at-0-in-eclipse.html)：

> ### 解决方案一
> 
> 通常，此问题可能与网络有关。检查您的网络是否在代理后面。如果是这样，您需要在 Eclipse 上配置代理。为此，请转到“Windows”->“首选项”->“常规”->“网络连接”，然后填写您的代理信息。之后重新启动 Eclipse。相反，也有可能您之前在 Eclipse 上配置过代理，但您不再使用代理。然后确保禁用代理。
> 
> ### 解决方案二
> 
> 另一种解决方案是清理存储在工作区目录下的特定于项目的元数据目录。
> 
> ```
> $ cd workspace/.metadata/.plugins/org.eclipse.core.resources/.projects
> $ rm -rf * 
> ```
> 
> 重新启动 Eclipse。
> 
> ### 解决方案三
> 
> 检查 adb 进程是否正在运行。如果是这样，请终止 adb 进程，然后重新启动 Eclipse。
> 
> ### 解决方案四
> 
> 1.  尝试删除位于用户配置文件下的缓存文件夹的内容`.android\cache`
> 2.  尝试删除位于用户配置文件下的 ddms.cfg`.android`

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2014-08-04T09:31:55.877

所有其他解决方案都对我不起作用，所以我只是删除了文件夹**[workspace]/.metadata中的所有****.log**文件，它再次起作用了！

 *** * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-02-07T08:59:42.563

事实证明，当您的互联网连接不稳定、缓慢等时，确实会出现此问题。

一旦我恢复正常的互联网连接，内容就会在不到几秒钟的时间内再次正常加载。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2014-12-04T18:48:12.133

我已经尝试了所有解决方案，但我没有得到解决方案。之后，我断开了 Internet 并`ddms.cfg`从`.android`文件夹中删除 -> `open eclipse`-> `dialog of statistics send to Google?`-> 已选择`NO`并最终为我工作。

**编辑：**

我已经`eclipse -clean`在命令提示符中尝试过命令，这也对我有用。

> 注意：`eclipse -clean`首先，对于命令，您必须选择放置的 eclipse 文件夹的路径。

谢谢。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-09-15T22:19:53.993

我在 Mac 上使用 ADT，可以确认以下内容对我有用。

```
cd workspace/.metadata/.plugins/org.eclipse.core.resources/.projects
rm -rf * 
```

重新启动 Eclipse 或重新启动 Mac 无济于事。Eclipse 似乎是因为突然停止而进入这个阶段。我不得不强制启动我的 Mac，从那时起这个问题似乎就发生了。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-01-20T07:27:23.030

我准备了一个小脚本来轻松处理这个反复出现且非常烦人的问题。打开终端，然后：

```
open ~/.bash_profile 
```

在文件末尾粘贴此函数：

```
function eclipse-clean() {
  echo "removing ddms.cfg file" 
    cd ~/.android/
    rm ddms.cfg 
  echo "removing cache"
    cd cache/
    rm -rf *
  echo "done! you can open eclipse now."
} 
```

那么你现在要做的就是：

```
source ~/.bash_profile 
```

每当您遇到困难时，只需在终端窗口中输入：

```
eclipse-clean 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-12-06T12:17:59.107

我的解决方案：

在 sdk 管理器中安装所有文档。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-08-13T06:52:48.363

只需右键单击eclipse并以管理员身份运行它之后我也遇到了同样的问题它工作正常有时Windows没有授予普通用户访问sdk的权限所以你必须授予管理员权限才能工作 android sdk 或内容加载器

这种方法：

关闭 eclipse 然后转到 YourWorkSpace\.metadata\.plugins\org.eclipse.e4.workbench 并删除“workbench.xmi”，现在重新启动 eclipse。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-12-09T14:30:19.820

我制作了这个批处理文件来完成 slhck 对 Windows 系统的回答所解释的任务：

```
@echo off
set ECLIPSEFOLDER=%CD%
cd /D %USERPROFILE%/.android
rd /s /q cache
del ddms.cfg /f
cd /D %ECLIPSEFOLDER%
eclipse -clean -refresh
exit 
```

我在博客上[的这篇文章中](http://www.ryadel.com/2014/12/09/android-sdk-eclipse-hangs-resolving-error-markers-android-sdk-content-loader/)解释了这种方法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-07-10T06:49:15.930

以上所有解决方案都不适合我。

在 Eclipse 的问题选项卡下检查错误 - 您可能会看到无法删除文件和项目路径名。

现在转到您的工作区目录 - 检查 project.properties 以获取问题选项卡下所述的所有项目并检查

目标=android-21

目标值有效且存在于您的 android-sdk/platforms/ 文件夹中

在我的情况下 target=Google,Google-Api-16 导致了这个问题。替换它，它就解决了。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-01-04T03:54:05.137

这个问题有多种原因，每个都有不同的解决方案。对于 Linux 环境，我创建了一个别名来处理其中的大部分，因为它们会超时。要将所有这些都放在一个地方，您可以尝试以下操作：

*   `~/.bash_aliases`在您的文件中添加以下内容。

    ```
    alias eclipse='rm -rf ~/.android/ddms.cfg;rm -rf ~/workspace/MyApps/.metadata/.plugins/org.eclipse.core.resources/.projects/*;mv ~/workspace/MyApps/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi ~/workspace/MyApps/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi.bkp;rm -rf ~/.android/cache/;cd ~/Desktop/adt-bundle-linux-x86_64-20140702/eclipse;nohup ./eclipse & cd -;' 
    ```

*   使用刷新源`source ~/.bash_aliases`

**笔记：**

*   `~/workspace/MyApps`是我的*工作区*，你必须相应地配置你的。

*   `~/Desktop/adt-bundle-linux-x86_64-20140702/eclipse`是我的*Eclipse 可执行文件*的位置，你必须相应地配置你的

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-09-24T10:28:11.900

工作！我所做的只是**打开终端**并输入：

```
 cd documents/workspace/.metadata/.plugins 
```

然后...输入

```
rm -rf 
```

...在那个**.plugins**类别中。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2013-09-21T09:28:13.583

所以这就是让我再次工作的原因：

解决了与android-support-v4.jar相关的不同版本的问题。它们不匹配，如果项目仍然相关，则会导致问题。

第二个不是那么明显：我从 shell 重新启动了 IDE，提供了`$ANDROID_SDK_HOME`- 环境变量。这让我更进一步，但 ide 挂在不同的位置。提供`$ANDROID_HOME`终于让我再次上升。

顺便说一句：在此过程之后，无需在 IDE 的以下启动中再次设置环境变量。**

# android - 安装 Team Explorer 后无法使用 eclipse 进行 android 编程

> ID：13489159
> 
> 赞同：0
> 
> 时间：2012-11-21T08:30:52.827
> 
> 标签：android

嗨伙计们。我有一个小问题。昨天我将我的 android 应用程序上传到 TFS（Team Foundation Server），现在我不能再将应用程序作为 android 项目运行了。我不能再添加 android 活动，甚至不能创建一个 android 项目.基本上我不能做任何与android有关的事情。有什么想法吗？

# .htaccess - 重写规则不适用于以字母 h 结尾的用户名

> ID：13489161
> 
> 赞同：0
> 
> 时间：2012-11-21T08:31:11.703
> 
> 标签：.htaccess

我有 www.amunzi.com/profile.php?username=anyusername 的重写规则

```
> RewriteRule ^([a-zA-Z0-9\._-]+[^.php])$ profile.php?username=$1  

> RewriteRule ^([a-zA-Z0-9\._-]+[^.php])/()$ profile.php?username=$1 
```

它工作正常，但问题是当用户名以字母“h”结尾时，会出现 404 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:47:57.833

此正则表达式：将匹配 {alphanumeric characters or } 后跟除,或之外的任何字符`^([a-zA-Z0-9\._-]+[^.php])$`的任何非空字符串。`._-``.``p``h``p`

试试这个：

```
RewriteCond %{REQUEST_URI} !\.php$
RewriteRule ^([a-zA-Z0-9\._-]+)$ profile.php?username=$1 
```

`.php` [重写条件应匹配所有不以(source)](https://stackoverflow.com/a/604178/499214)结尾的 URL ，并且重写规则中的正则表达式将匹配 {alphanumeric characters or `._-`}的任何非空字符串。

# web-services - ADF 服务接口中的值列表

> ID：13489171
> 
> 赞同：0
> 
> 时间：2012-11-21T08:31:48.887
> 
> 标签：web-services, oracle-adf

我有一个 ADF 业务组件模型项目。在一些视图对象中，我为属性定义了一个值列表，并在一些属性的 UI 提示选项卡中设置了一个标签。当我运行应用程序模块时，一切正常。

现在我想通过 Web 服务公开这个（和其他一些）视图对象。所以我向应用程序模块添加了一个服务接口，我在其中设置了视图对象的公开方式。我还选中了生成控制提示操作复选框。

在下一步中，我使用我的服务的 WSDL 创建一个 Web 服务数据控件。然后，当我将例如 findByViewCriteria-method 方法的结果放到 jsf 页面并选择 ADF 表单时，我既没有得到 Choice 组件的选项，也没有像我配置它们那样的标签。

有谁知道，我错过了什么？如何在我的 Web 服务中启用 LOV 和 UI 提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:47:29.340

Web 服务不会在其上定义 LOV，因为它们是在 ADF BC 层中定义的。因此，您需要做的是向您传递给 Web 服务的参数添加一个列表。与此类似： [https ://blogs.oracle.com/shay/entry/adding_lov_to_non_database](https://blogs.oracle.com/shay/entry/adding_lov_to_non_database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T07:05:28.857

谢斯的回答非常有帮助（一如既往），尽管我想分享我最终如何解决这个问题。正如他所指出的

> Web 服务不会在其上定义 LOV，因为它们是在 ADF BC 层中定义的。

所以我删除了`selectOneChoise`关于页面的属性。需要注意的重要一点是，只有 - 方法的结果`find`可以用作 a `List Data Source`， - 方法的`getByKey`结果会导致错误。

# c# - 设计多生产者一消费者双向通信

> ID：13489173
> 
> 赞同：1
> 
> 时间：2012-11-21T08:31:57.107
> 
> 标签：c#, producer-consumer

我正在编写交易软件。我的系统生成需要处理的“顺序项目”（1,2,3...）（在我的应用程序中，每个项目都是一个执行订单，id 被称为内部订单 ID）。

我有很多线程可以生产项目（许多策略），但可以保证每个项目都只生产**一次**。

我只有一个处理器（订单执行者）应该

*   每当有新项目可用时提交执行（下订单）
*   在回调中接收结果并更新它“项目结果”（从证券交易所获得响应）

每个生产者都应该

*   提交要执行的“顺序包”项目（例如提交“1234,1235,1236,1237”）
*   阻止，直到所有项目的结果都可用。当所有项目的结果都可用时 - 处理

注意：

*   项目可以从不同的线程并行提交
*   我需要最小的延迟和最小的“锁定”
*   很高兴有一个易于移植到 C++ 的代码
*   在任何时候，我都有相当“有限”数量的“实时”ID。例如，我不能同时拥有 live id 的“1 和 10000”。因为每当创建新 id 时 - 它必须被处理和清理。所以我总是有一组彼此接近的id（例如~9900-10000）。所以使用循环数组来实现可能是有意义的

如果您可以提出建议-请提出建议。我在下面添加了我奇怪的实现，但没有必要阅读它。

* * *

这是我的*问题*实现：

```
 private Dictionary<uint, AutoResetEvent> transactionsEvents = new Dictionary<uint, AutoResetEvent>();
    private Dictionary<uint, TransactionResult> transactionsResults = new Dictionary<uint, TransactionResult> ();

    public void IssueOrders(List<OrderAction> actions)
    {
        int count = actions.Count;
        if (count == 0)
        {
            return;
        }
        uint finishUserId = (uint) apiTransactions.counter.Next(count);
        uint startUserId = finishUserId + 1 - (uint) count;

        AutoResetEvent[] events = new AutoResetEvent[count];
        for (int i = 0; i < count; i++)
        {
            var action = actions[i];
            uint userId = startUserId + (uint) i;
            action.UserId = userId;
            var e = new AutoResetEvent(false);
            events[i] = e;
            transactionsEvents[userId] = e;
        }

        for (int i = 0; i < count; i++)
        {
            var action = actions[i];
            apiTransactions.ScheduleOrderAction(action);
        }

        WaitHandle.WaitAll(events);

        // now all answers are available, need to apply information
        foreach (var action in actions)
        {
            UpdateActionWithResult(action, transactionsResults[action.UserId]);
            transactionsResults.Remove(action.UserId);
        }
    } 
```

`ScheduleOrderAction`将项目添加到 BlockingCollection。处理器执行 BlockingCollection 中的项目，将结果放入 transactionsResults 并引发相应的事件。

我的实现有很多问题：

*   我从不同的线程访问（和修改）字典。例如，当一个线程从`transactionResults`另一个线程（处理器）中删除项目时，可能会向其添加项目。
*   我不想切换到 ConcurentDictionaries，因为即使是 Dictionary 对我来说已经太贵了（就速度而言）

# flash - 网络浏览器中的流式广播

> ID：13489185
> 
> 赞同：1
> 
> 时间：2012-11-21T08:32:43.233
> 
> 标签：flash, web, stream, m3u, asx

我有一个用于流式传输不同在线网络广播的主页。目前我正在使用 Windows Media Player 插件，但许多用户报告此插件/解决方案存在问题（[有关当前解决方案的详细信息，请点击此处](http://www.streamalot.com/wm-embed.shtml)）。

现在我正在寻找一个新的解决方案：有人知道基于闪存（或其他）的软件，用于以下列文件格式流式传输网络广播吗？我已经用 JWPlayer 尝试过，但它不适用于所有流文件格式。

使用的文件格式：

*   .pls
*   .asx
*   .m3u
*   .mp3

# jquery - 移除输入框的初始样式

> ID：13489187
> 
> 赞同：0
> 
> 时间：2012-11-21T08:32:45.803
> 
> 标签：jquery, html, css

我在尝试更改输入文本框初始样式时遇到了一些问题，这是我目前的样式：

```
.myInput {
    text-align: left;
    display:inline-block;
    outline: none;
    float: left;
    font-size: 0.8em;
} 
```

而且我想删除边框并使输入文本出现在输入控件的开头，而没有由默认输入文本框样式创建的任何填充/边距（我添加了一个显示输入文本位置与标签的文本位置）

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:40:42.270

如果您想更改/更改文本框（myInput）的默认样式，请尝试这个。

```
.myInput{
border:0px!important;
text-align:left!important;
padding:0px!Important;
margin:0px!important;
} 
```

using`!important`将优先考虑你给定的风格希望它会有所帮助谢谢..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:44:41.947

用于`border:none`删除边框并添加您的自定义样式

**[演示](http://jsfiddle.net/Ux3yb/2/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:10:27.233

我认为`!important`在代码中声明这么多 s 并不是一个好主意。你最终会遇到几个错误，因为`!important`它不只是优先考虑 - 它会积极地覆盖。

您最好更改`.myInput`为 ID ( `#myInput`) 并以 ID 为目标。ID 具有更高的优先级。

```
#myInput {
  padding: 0px;
  margin: 0px;
  text-align:left;
  border: 0px;
  ...your styles here...
} 
```

如果您多次使用此输入，您可以尝试将其包装为一个 ID 下的类并定位它（`#myInput input`）`!important`d 急忙找身份证。

该`!important`命令是一个可爱的 hack，但是你会因为过度使用它而遇到太多问题。经验法则（我不是互联网上唯一支持这一点的 CSS 爱好者）：**除非绝对必要，否则****不要使用。`!important`**

# jquery - jQuery.Mason 在 jQuery masonry 中未定义

> ID：13489193
> 
> 赞同：0
> 
> 时间：2012-11-21T08:33:06.730
> 
> 标签：jquery, jquery-masonry

我使用了 jQuery 砌体脚本。在那个脚本中，我使用了角印章。我的代码如下所示。

```
 jQuery.Mason.prototype.resize = function() {
    this._getColumns();
    this._reLayout();
  };

  jQuery.Mason.prototype._reLayout = function( callback ) {
    var freeCols = this.cols;
    if ( this.options.cornerStampSelector ) {

      var containerWidth = this.cols * this.columnWidth - this.options.gutterWidth;
      this.element.css({ width: containerWidth });

      var $cornerStamp = this.element.find( this.options.cornerStampSelector ),
          cornerStampX = $cornerStamp.offset().left - 
            ( this.element.offset().left + this.offset.x + parseInt($cornerStamp.css('marginLeft')) );
      freeCols = Math.floor( cornerStampX / this.columnWidth );
    }
    // reset columns
    var i = this.cols;
    this.colYs = [];
    while (i--) {
      this.colYs.push( this.offset.y );
    }

    for ( i = freeCols; i < this.cols; i++ ) {
      this.colYs[i] = this.offset.y + $cornerStamp.outerHeight(true);
    }

    // apply layout logic to all bricks
    this.layout( this.$bricks, callback );
  }; 
```

但现在它显示“jQuery.Mason 未定义”。我的代码有什么问题，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:57:29.493

我的代码也有类似的问题。我按照[masonry.desandro.com](http://masonry.desandro.com/demos/corner-stamp.html)上的说明进行操作，但该脚本无法使用 jQuery 1.8.3 运行。

我将 $.Mason.prototype._reLayout 函数更改为以下内容：

```
$.Mason.prototype._reLayout = function(callback) {
var freeCols = this.cols;
if (this.options.cornerStampSelector) {
  //jQuery Selector
  var cornerStamp = $(this.options.cornerStampSelector);
  var cornerStampX = cornerStamp.offset().left - (this.element.offset().left + this.offset.x + parseInt(cornerStamp.css('marginLeft')));
  var freeCols = Math.floor(cornerStampX / this.columnWidth);
}
//Reset columns
var i = this.cols;
this.colYs = [];
while (i--) {
  this.colYs.push( this.offset.y );
}
for (i = freeCols; i < this.cols; i++ ) {
  this.colYs[i] = this.offset.y + cornerStamp.outerHeight(true);
}
//Apply layout logic to all bricks
this.layout(this.$bricks, callback); }; 
```

如果您有与砖石示例中设置的 CSS 类似的 CSS，代码就可以工作！

# extjs - 长时间操作中的 Spinner 动画挂起，如何避免？

> ID：13489195
> 
> 赞同：0
> 
> 时间：2012-11-21T08:33:12.660
> 
> 标签：extjs

我有一个应用程序需要很长时间才能保存数据，因为它必须通过 Intranet 写入。我想运行一个动画来显示正在保存。怎么做？任何代码示例？

在加载大量数据时，微调器动画会在一段时间后挂起。

# java - 警报不起作用

> ID：13489197
> 
> 赞同：0
> 
> 时间：2012-11-21T08:33:16.060
> 
> 标签：java, android, alarmmanager

我试图在单击按钮时立即发出警报（其 onClick 属性设置为 startAlarm()）。这个按钮工作正常。我的 startAlarm() 方法中的 toast 显示了，但没有其他内容，不是我的 toast 或其他两个文件（AlarmReceiver 和 AlarmActivity）中的日志。任何帮助将不胜感激。

这是我的 AlarmActivity

```
import java.io.IOException;
import android.app.Activity;
import android.content.Context;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.Toast;

public class AlarmActivity extends Activity {
    private MediaPlayer mp;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Toast.makeText(getApplicationContext(), "Its done!", Toast.LENGTH_SHORT).show();
        super.onCreate(savedInstanceState);
        Log.d("alarm","activity");
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_alarm);

        Button stopAlarm = (Button) findViewById(R.id.stop_alarm_button);
        stopAlarm.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View arg0, MotionEvent arg1) {
            mp.stop();
            finish();
            return false;
        }
    });

    playSound(this, getAlarmUri());
}

private Uri getAlarmUri() {
    Uri alert = RingtoneManager
            .getDefaultUri(RingtoneManager.TYPE_ALARM);
    if (alert == null) {
        alert = RingtoneManager
                .getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        if (alert == null) {
            alert = RingtoneManager
                    .getDefaultUri(RingtoneManager.TYPE_RINGTONE);
        }
    }
    return alert;
}

private void playSound(Context context, Uri alert) {
    mp = new MediaPlayer();
    try {
        mp.setDataSource(context, alert);
        final AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
        if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
            mp.setAudioStreamType(AudioManager.STREAM_ALARM);
            mp.prepare();
            mp.start();
        }
    } catch (IOException e) {
        System.out.println("OOPS");
    }
}
} 
```

这是我的 MainActivity 中的方法

```
public void startAlarm(View v) {
    Intent myIntent = new Intent(getApplicationContext(), AlarmReceiver.class);
    PendingIntent pendingIntent = PendingIntent.getService(getApplicationContext(), 0, myIntent, 0);
    AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 1);
    alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);
    Toast.makeText(MainActivity.this, "Start Alarm", Toast.LENGTH_LONG).show();
} 
```

这是我的警报接收器

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

public class AlarmReceiver extends BroadcastReceiver { 
    @Override
    public void onReceive(Context context, Intent intent) {
        try {
            Intent newIntent = new Intent(context, AlarmActivity.class);
        Log.d("alarm", "receive");
        newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(newIntent);
        Toast.makeText(context, "received", Toast.LENGTH_LONG).show();
    } catch (Exception e) {
        e.printStackTrace();
    }
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:40:59.913

我认为您的代码的问题是您正在使用 BroadcastReciever 来获取警报事件，但您正试图通过服务接收它。

你应该使用`PendingIntent.getBroadcast(getApplicationContext(), 0, myIntent, 0);` 而不是`PendingIntent.getService(getApplicationContext(), 0, myIntent, 0);`

# qt - 在 Qt 中连接的自定义上下文菜单

> ID：13489198
> 
> 赞同：2
> 
> 时间：2012-11-21T08:33:17.043
> 
> 标签：qt, contextmenu, connect

我在连接自定义菜单时遇到问题，`QListWidget`连接函数返回 false。这是代码：

我有一些名为`MainWindow`. 在它的构造函数中我有这条线

```
connect(ui->notesWidget, SIGNAL(customContextMenuRequested(QPoint &)), 
        this, SLOT(contextMenuforNotesArea(QPoint &))); 
```

在哪里`notesWidget`提到`QListWidget`。

`ContextMenuforNotesArea(QPoint &)`是这样定义的

```
class MainWindow : public QMainWindow
{
public slots:
    void contextMenuforNotesArea(QPoint &pos);
};

void MainWindow::contextMenuforNotesArea(const QPoint &pos){
    QMessageBox::information(this, "a", "the function has been finally called");
    QMenu contextMenu(tr("Context menu"), this);
    contextMenu.addAction(new QAction(tr("Hello"), this));
    contextMenu.exec(mapToGlobal(pos));
} 
```

我还通过表单设计器更改`contextMenu`了`listWidget`to中的属性。`customContextMenu`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:28:30.990

在头文件中按如下方式更改您的 SLOT 签名

```
void contextMenuforNotesArea(const QPoint &pos); 
```

还要确保，当您在构造函数中进行连接时，您在调用`setupUi`

# date - 将 FM (FileMaker) 时间戳转换为 DateTime

> ID：13489208
> 
> 赞同：2
> 
> 时间：2012-11-21T08:33:37.777
> 
> 标签：date, datetime, timestamp, type-conversion, filemaker

我有一些我不知道如何处理的 FileMaker 时间戳。*（我是通过试验发现的……）*

有人知道将 FM (File Maker) 时间戳转换为 DateTime 的算法吗？

我已阅读此[页面](http://fmdiff.com/fm/timestamp.html)上的格式。其中包括一个“FM dec Timestamp”按钮，可以进行所需的转换，但没有给出它是如何做到的参考！

此外，我的时间戳格式与网站所需的格式不同，我的时间戳为 18 位，而网站只允许 11 位。

插入`634890864000000000`和删除尾随零（留下 11 位数字），我得到了这个日期：

```
Wednesday, 2012-11-21 10:20:00 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T16:02:15.250

如果您有 FileMaker，这应该很简单：

1.  将数字作为文本导入，
2.  创建一个新的计算字段，resultingTimestamp，它取剩下的 11 个字符并转换为 TimeStamp：

    ```
    GetAsTimestamp( Left( myImportedTimestamp ; 11 ) ) 
    ```

3.  以编程方式或通过在布局上的结果时间戳字段上显示转换为 Unix 格式。

如果您没有 FileMaker：

1.  取 FileMaker 时间戳的左 11 位数字。
2.  从 FileMaker 时间戳中减去`62135596800`以获得 Unix（纪元）时间戳。
    *（通过在每个日期中使用相同的日期并从 Unix 日期中减去 FileMaker 日期来验证。）*
3.  将纪元时间转换为人类可读的时间，例如根据[epochconverter.com](http://www.epochconverter.com/ "历元转换器")的“从纪元转换为人类可读的日期”部分中的公式之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:56:44.043

要获取您的日期：

1.  使用以下计算创建一个计算字段：

    ```
    TimeStamp/864000000000+1 
    ```

2.  将返回类型设置为日期。

*另外，我认为额外的零是几分之一秒，不管给定的公式处理这些。*

# matlab - 在 MATLAB 中为 linprog 格式化方程

> ID：13489209
> 
> 赞同：3
> 
> 时间：2012-11-21T08:33:38.407
> 
> 标签：matlab, linear-programming

`linprog`我必须使用matlab 数学工具箱中的函数来解决一个简单的问题。问题是我不知道如何格式化我的方程，所以这个函数解决了这个问题。

这是我试图最小化的函数（`a_i`是一些给定的系数，`x`在 R^5 中）：

```
x = argmax min{a1*x1 + a2*x2, a2*x2 + a3*x3 + a4*x4, a4*x4 + a5*x5} 
```

受制于：

```
sum(x_i) = 3000
all x_i >= 0 
```

这可以改写为：

```
(x, lambda) = argmin(-lambda) 
```

受制于：

```
a1*x1 + a2*x2 >= lambda
a2*x2 + a3*x3 + a4*x4 >= lambda
a4*x4 + a5*x5 >= lambda
sum(x_i) = 3000
all x_i >= 0 
```

我只能找到没有最小/最大参数的简单线性函数的最小化示例。你能给我一个提示如何让我的结构作为函数的参数`linprog`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:49:19.923

我不相信您可以提出问题，因为您将其表述为 linprog 问题。“MIN”操作是问题所在。由于目标函数不能表述为

```
y = f'x. 
```

即使您的约束是线性的，您的目标函数也不是。

也许通过一些技巧，您可以将其线性化。但如果是这样，那就是一个数学问题。见：[https ://math.stackexchange.com/](https://math.stackexchange.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:01:50.213

让我们尝试以下您的`x`向量现在

```
[x1 x2 x3 x4 x5 lambda] 
```

目标向量

```
f = [0 0 0 0 0 -1] 
```

等式约束：

```
Aeq = [1 1 1 1 1 0] beq = 3000 
```

不等式约束：

```
A = [-a1 -a2 0 0 0  1; 0 -a2 -a3 -a4 0 1; 0 0 0 -a4 -a5 1] b = [0;0;0] 
```

下限：

```
lb = [0 0 0 0 0 -inf] 
```

现在试试

> linprog( f, A, b, Aeq, beq, lb )

最多一些转置的论点应该可以解决问题。

# ruby-on-rails - Rbenv 警告：第 1 行：ge#!/usr/bin/env：没有这样的文件或目录

> ID：13489210
> 
> 赞同：0
> 
> 时间：2012-11-21T08:33:38.477
> 
> 标签：ruby-on-rails, ruby, rbenv

我现在使用 rbenv 有一段时间了，每次运行 ruby​​ 命令或启动 rake 任务时都会收到此警告：

`/Users/.../.rbenv/shims/ruby: line 1: ge#!/usr/bin/env: No such file or directory`

或者

`/Users/.../.rbenv/shims/rake: line 1: ge#!/usr/bin/env: No such file or directory`

当然，`/usr/bin/env`实际存在并且有效。

# qt - 使用 GStreamer 播放视频

> ID：13489211
> 
> 赞同：1
> 
> 时间：2012-11-21T08:33:40.520
> 
> 标签：qt, gstreamer, meego

我正在尝试使用 GStreamer 在 Linux 嵌入式系统上使用 Gstreamer 构建一个用于播放视频的项目，来自[How to play video in Qt on MeeGo using GStreamer](http://www.developer.nokia.com/Community/Wiki/How_to_play_video_in_Qt_on_MeeGo_using_GStreamer) 我的设备上有 Gstreamer 包（我可以使用 shell 中的 gstreamer 命令运行视频），但是当我尝试编译由于以下行而失败的项目：

```
CONFIG += link_pkgconfig
PKGCONFIG += gstreamer-0.10 gstreamer-interfaces-0.10
in the .pro file 
```

输出错误：

```
 Project ERROR: Package gstreamer-0.10 not found
 make: *** [Makefile] Error 2 
```

知道如何正确使用 link_pkgconfig 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:07:14.637

当你需要链接到一个库时，你需要开发包，那些是以`-dev`. 尝试安装`libgstreamer0.10-dev`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T09:56:09.740

你也可以在 LDFLAG 中这样使用

```
`pkg-config --cflags --libs gstreamer-1.0` 
```

谢谢

# php - 如何回显二维数组的值？

> ID：13489213
> 
> 赞同：0
> 
> 时间：2012-11-21T08:33:44.187
> 
> 标签：php

**print_r($getPrice)**结果是：

```
Array
(
    [0] => Array
        (
            [price_id] => 5
            [price_qty] => 2
            [price] => 100.0000

        )

    [1] => Array
        (
            [price_id] => 6
            [price_qty] => 5
            [price] => 90.0000
        )

    [2] => Array
        (
            [price_id] => 7
            [price_qty] => 8
            [price] => 80.0000

        )

) 
```

我想循环出 [price_qty] 和 [price] 的值，对不起，我是 php 的新手，我不知道如何使用 foreach 来输出它们的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:34:59.963

```
foreach($getPrice as $price) {
     echo $price['price_qty'];
     echo $price['price'];
} 
```

或者，如果您更喜欢`for`循环：

```
for($i = 0, $prices = sizeOf($getPrice); $i < $prices; ++$i) {
    echo $getPrice[$i]['price_qty'];
    echo $getPrice[$i]['price'];
} 
```

还有其他循环数组的方法，例如：使用`current()`and `next()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T08:35:22.360

只需阅读文档[`foreach`](http://php.net/manual/en/control-structures.foreach.php)命令

```
foreach($getPrice as $price) {
  echo $price['price_qty'];
  ..
  ..
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:36:45.170

使用 foreach 循环。

```
foreach($getPrice as $price) {
     echo $price['price_qty'];
     echo $price['price'];
} 
```

# html - 将中间 div 宽度限制为子 div 宽度

> ID：13489215
> 
> 赞同：0
> 
> 时间：2012-11-21T08:33:49.087
> 
> 标签：html, css

我有这样的嵌套div：

```
<div class="first">
    <div class="second">
        <div class="third"></div>
    </div>
</div>​ 
```

第三个 div 包含动态内容 - 所以我不知道它的尺寸。

我想要的是第二个 div 采用第三个 div 的宽度，而不是第一个更大的 div 的宽度。

所以在[这个演示](http://jsfiddle.net/danield770/bBusJ/)中，我希望边框包围绿色方块。这可能只用css吗？如果是这样，如何？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:36:35.493

把一个`float: left;`放在二等舱。这应该够了吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:39:05.343

.second {浮动：左；}

或者

.second { 显示：内联块；//不适用于ie7 }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:56:09.757

实际上`div`是一个块级元素，所以你可以给`display:inline-block`第二**个div**，而不是它会占用**第三个** `div` **宽度和高度**，反之亦然......

**CSS**

```
.first
{
    width: 500px;
    height: 500px;
    background: yellow;
}

.second
{
    border: 5px solid blue;
    display:inline-block;
}

.third
{
    min-width: 100px;
    min-height: 100px;
    background: green;
} 
```

**[演示](http://tinkerbin.com/DIKwygp8)**

# html - 使用 HTML 5 实时流式传输网络摄像头视频，以便其他用户可以查看

> ID：13489216
> 
> 赞同：1
> 
> 时间：2012-11-21T08:33:50.037
> 
> 标签：html, streaming, real-time, webcam

这个问题与其他类似问题不同，因为我想要的是一个用户应该将自己的视频流式传输到服务器，而其他用户访问同一服务器的特定用户应该能够看到相同的流式视频。想一想老师在线（实时）教学并且多个学生正在观看的情况。我可以使用 HTML5 访问网络摄像头，还可以查看我自己的视频。现在我希望服务器和客户端支持流式传输它。如果有办法，我可以使用 Flash / HTML 5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:10:58.887

您可以使用 HTML5 Web 套接字。这可能会对您有所帮助 [http://badankles.com/?p=209](http://badankles.com/?p=209)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T10:14:09.547

查看[binary.js](http://binaryjs.com/) ，它是一个使用 websocket在（JavaScript）客户端和（[节点）服务器之间来回发送二进制数据的框架。](http://nodejs.org/)

websockets 上的音频/视频网络聊天被列为该库的功能之一。

# javascript - 如何为 IE8 <= 实现 node.localName 等效项？

> ID：13489224
> 
> 赞同：1
> 
> 时间：2012-11-21T08:34:45.723
> 
> 标签：javascript, jquery, internet-explorer, local-storage

我想为我的 lib [garlicjs.org](http://garlicjs.org)添加一些旧的浏览器支持。

我发现我的主要功能之一`getPath`依赖`localName`于 IE8<=

在那个函数中，我需要为我的 lib 绑定​​的每个 DOM 元素获取一个唯一的标识符字符串，更重要的是，不依赖于 id、类或名称。

哦，我可以管理：为旧的 IE 浏览器支持此属性，或者，使用所有浏览器都支持的另一个属性，它可以管理具有与此功能相同的效果。

谢谢！

这是代码：

```
/* retuns an unique identifier for form elements, depending on their behaviors:
   * radio buttons: domain > pathname > form.<attr.name>[:eq(x)] > input.<attr.name>
      no eq(); must be all stored under the same field name inside the same form

   * checkbokes: domain > pathname > form.<attr.name>[:eq(x)] > [fieldset, div, span..] > input.<attr.name>[:eq(y)]
      cuz' they have the same name, must detect their exact position in the form. detect the exact hierarchy in DOM elements

   * other inputs: domain > pathname > form.<attr.name>[:eq(x)] > input.<attr.name>[:eq(y)]
      we just need the element name / eq() inside a given form
*/
, getPath: function () {

  // Requires one element.
  if ( this.$element.length != 1 ) {
    return false;
  }

  var path = ''
    , fullPath = this.$element.is( 'input[type=checkbox]')
    , node = this.$element;

  while ( node.length ) {
    var realNode = node[0]
      , name = realNode.localName;

    if ( !name ) {
      break;
    }

    name = name.toLowerCase();

    var parent = node.parent()
      , siblings = parent.children( name );

    // don't need to pollute path with select, fieldsets, divs and other noisy elements,
    // exept for checkboxes that need exact path, cuz have same name and sometimes same eq()!
    if ( !$( realNode ).is( 'form, input, select, textarea' ) && !fullPath ) {
      node = parent;
      continue;
    }

    // set input type as name + name attr if exists
    name += $( realNode ).attr( 'name' ) ? '.' + $( realNode ).attr( 'name' ) : '';

    // if has sibilings, get eq(), exept for radio buttons
    if ( siblings.length > 1 && !$( realNode ).is( 'input[type=radio]' ) ) {
      name += ':eq(' + siblings.index( realNode ) + ')';
    }

    path = name + ( path ? '>' + path : '' );

    // break once we came up to form:eq(x), no need to go further
    if ( 'form' == realNode.localName ) {
      break;
    }

    node = parent;
  }

  return 'garlic:' + document.domain + ( this.options.domain ? '*' : window.location.pathname ) + '>' + path;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:32:53.727

好的，我改用`nodeName`了属性，它正在工作。

# three.js - three.js 共享线条和粒子的几何图形

> ID：13489228
> 
> 赞同：2
> 
> 时间：2012-11-21T08:34:53.083
> 
> 标签：three.js

我想使用一个几何对象来制作一些精美的粒子动画并在这些粒子之间显示线条。

```
geometry = new THREE.Geometry();

particles = new THREE.ParticleSystem(geometry, particleMaterial);
line = new THREE.Line(geometry, lineMaterial, THREE.LinePieces); 
```

不知何故，线对象没有在场景中渲染，但粒子出现了。

[http://jsfiddle.net/Pk85y/1/](http://jsfiddle.net/Pk85y/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T14:59:04.670

在`WebGLRenderer`某些特定情况下，您无法共享几何图形。最好的选择是做`geometry.clone()`。

这是固定的 jsfiddle：http: [//jsfiddle.net/Pk85y/3/](http://jsfiddle.net/Pk85y/3/)

# unix - 从 cron (tcsh) 运行命令时出错

> ID：13489233
> 
> 赞同：0
> 
> 时间：2012-11-21T08:35:15.167
> 
> 标签：unix, crontab, tcsh

当我从 shell(tcsh) 运行这个命令时，它执行得很好——

```
cal | tail -6 | sed -e 's/^.\{3\}//' -e 's/.\{3\}$//' | tr -s '[:blank:]' '\n' | head -21 | tail -20 | tr -s '\n' ' ' | grep -w `date "+%e"` ; /usr/bin/bash -lc "if [ "$?" == 0 ] ; then echo xyz ; fi" 
```

但是当我把完全相同的东西放在一个 crontab 中时，我从我的机器上收到了这个错误邮件——

```
Subject: Output from "cron" command
Content-Length: 244

Your "cron" job on uatserver
cal | tail -6 | sed -e 's/^.\{3\}//' -e 's/.\{3\}$//' | tr -s '[:blank:]' '\n' | head -21 | tail -20 | tr -s '\n' ' ' | grep -w `date "+

produced the following output:

Usage: grep -hblcnsviw pattern file . . . 
```

我确信即使是我的 crontab 命令也是使用 tcsh 执行的，因为它被设置为默认值。

ps-我的机器： **SunOS uatserver 5.10 Generic_127112-11 i86pc i386 i86pc**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:34:11.373

您的问题是 PATH 变量不一样。Solaris 有不同风格的 grep 示例：

/usr/bin/grep /usr/xpg4/bin/grep

你 crontab 运行 /usr/bin/grep 而不是 /usr/xpg4/bin/grep。两个版本的 grep 有一些不同的选项。

# ruby-on-rails - 如何使用 Date 对象和带有日期名称的字符串来创建新的 Date 对象？

> ID：13489235
> 
> 赞同：0
> 
> 时间：2012-11-21T08:35:23.530
> 
> 标签：ruby-on-rails, ruby, date

我有一个日期对象

```
Mon, 03 Dec 2012 
```

我有一个包含日期名称的字符串

```
"Thursday" 
```

如何使用这两个对象找到一个新的 Date 对象，该对象表示与原始 Date 对象在同一周内的日期名称？所以对于这个例子，它将是

```
Thu, 07 Dec 2012 
```

在这种情况下，一周从星期一到星期日。

我正在使用 Rails 3.2.0 和 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:20:35.970

如果你能设法将“星期四”转换为第 4 天——我知道你可以——你可以得到另一个这样的日期：

```
1.9.3p125 :014 > d = Date.parse "Mon, 03 Dec 2012"
 => Mon, 03 Dec 2012 
1.9.3p125 :015 > Date.commercial d.cwyear, d.cweek, 4
 => Thu, 06 Dec 2012 
1.9.3p125 :016 > 
```

顺便说一句，您可以将地图从日期名称存储到数组或哈希中，或者使用 I18n。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:55:15.987

我相信有更好的方法可以做到这一点，但你可以这样做

```
def date_by_day(date, day_name)
  beginning_of_week = date.beginning_of_week
  7.times do |i|
    _date = beginning_of_week + i.days
    return _date if _date.strftime("%A") == day_name
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:06:11.813

这个会很好地为你工作。

```
def date_by_day(date, day_name)
  beginning_of_week = date.beginning_of_week
  day_number = Time::DAYS_INTO_WEEK[day_name.to_sym]
  return (beginnig_of_week + day_number.days)
end 
```

# c# - 将单选按钮添加到 Windows 窗体数据网格控件

> ID：13489238
> 
> 赞同：3
> 
> 时间：2012-11-21T08:35:31.507
> 
> 标签：c#, winforms

![在此处输入图像描述](../Images/f7f675d7c3817e80d0684b1d9cf64d45.png)

我的 Windows 窗体上有 DataGrid，我在运行时向 DataGrid 添加一行。我在 DataGrid 上有一个列，我需要在运行时添加不同的 UI 控件（列的每个单元格将包含不同的 UI 控件，如下拉列表、复选框、超链接、单选按钮）。我可以添加除单选按钮控件之外的其他控件，如何将单选按钮添加到 DataGrid 列？我已经使用[它对](http://msdn.microsoft.com/en-us/library/aa730882%28VS.80%29.aspx)我不起作用，因为它需要整个列作为单选按钮列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:30:28.040

这里有一个如何使一列复选框作为单选按钮工作。从您的图片中，您需要一个所有列作为 RadioBUttons 的一行 -> 这更复杂，并且取决于您如何将数据绑定到 datagridview。我更多地使用 VB.NET，所以这里可能有一些语法错误......

在 datagridview 中创建一个 DataGridViewCheckBoxColumn 列使用 DataGridView 的三个事件，我的复选框列用作单选按钮

```
private Boolean bRbtnCurrentValue 
private Int32 iColumnRadioBtn = 4
private Datagridview dgv //Only for this exapmle

//In Event dgv_CellBeginEdit
{
    //Here we stored current value to variable
    if (this.dgv.CurrentCell.ColumnIndex = this.iColumnRadioBtn)
        this.bRbtnCurrentValue = this.dgv
}

//In Event dgv_CellEndEdit
{
    //Here we update if value changed
    Boolean bNewValue = this.dgv.CurrentCell.Value
    if (this.dgv.CurrentCell.ColumnIndex = this.iColumnRadioBtn)
    {
        if(bNewValue=False)
            this.dgv.CurrentCell.Value=this.bRbtnCurrentValue
        else
            //Here jo actions when value changed(database update etc.)
    }   
}

//Event dgv_ CurrentCellDirtyStateChanged
{
    if(this.dgv.CurrentCell.ColumnIndex = this.iColumnRadioBtn) andalso (dgv.IsCurrentCellDirty = True)
    {
        foreach(DataGridViewRow dgvr In dgv.Rows)
        {
            If (dgvr.Index = dgv.CurrentRow.Index)
                If (dgv.CurrentCell.Value = True)
                    dgv.CancelEdit() //True to False cannot be changed
            else
                If (dgvr.Cells(dgv.CurrentCell.ColumnIndex).Value=True)
                    dgvr.Cells(dgv.CurrentCell.ColumnIndex).Value = False
        }
    }
} 
```

# css - 仅在 html css 中将缩略图的背景图像网格放大到更高的分辨率

> ID：13489240
> 
> 赞同：0
> 
> 时间：2012-11-21T08:35:40.323
> 
> 标签：css, background, hover, image

嗨，我正在使用“背景图像”制作一个简单的缩略图网格（2x3），可以是横向或纵向的，效果很好。但我希望他们在悬停时放大到更高分辨率的图像。我认为高分辨率的需要以某种方式隐藏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:25:13.443

您可以使用`background-size:`CSS3 中的属性来执行此操作：

简单的 HTML：

```
<div class="wrapper">
    <div class="thumb"></div>
    <div class="thumb"></div>
    <div class="thumb"></div>
    <div class="thumb"></div>
    <div class="thumb"></div>
    <div class="thumb"></div>
    <span class="clear"></span>
</div>​ 
```

CSS：

```
.wrapper
{
    width: 300px;
    height: 200px;
}

.thumb
{
    background: url(http://placehold.it/100x100) no-repeat;
    background-size: 50% 50%; /*CSS3*/
    background-position: 50% 50%;
    width: 100px;
    height: 100px;
    float: left;
    -webkit-transition: background-size 1s; /*CSS3*/
    -moz-transition: background-size 1s; /*CSS3*/
}

.thumb:hover
{
    background-size: 100% 100%;
    -webkit-transition: background-size 1s; /*CSS3*/
    -moz-transition: background-size 1s; /*CSS3*/
    cursor: pointer; 
}

span.clear
{
    display: block;
    height: 0;
    width: 100%;
    clear: both;
}
​ 
```

您所做的是立即提供更高分辨率的图像，然后使用`background-size:`属性按比例缩小它们。然后在悬停时放大图像。这可以防止加载每个图像的两个版本，并且使用 CSS3 转换它看起来也很酷；）

请记住，这是 CSS3，所以（我认为）IE8 及更低版本不支持此功能。

[http://jsfiddle.net/Kyle_Sevenoaks/CFM5Q/](http://jsfiddle.net/Kyle_Sevenoaks/CFM5Q/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:37:39.900

这是对凯尔答案的修改。我不确定它是否适合您的需求（不使用`background-image`，而只是一个`<img>`标签），但我发布它以防万一有人发现它有用。除了使用背景大小，还可以使用 CSS3 变换（`scale`在这种情况下）和过渡。

[http://jsfiddle.net/vheVk/1/](http://jsfiddle.net/vheVk/1/)

# powershell - 是否可以使用 snk 文件签署 powershell 脚本？

> ID：13489241
> 
> 赞同：1
> 
> 时间：2012-11-21T08:35:41.477
> 
> 标签：powershell

我制作了一个小型 powershell 脚本（ps1 文件），仅供内部使用。为了更容易执行 powershell 脚本，我想对其进行签名。

我们有一个 snk 文件，用于签署我们提供给客户的程序集。

是否可以使用 snk 文件对脚本进行签名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:16:24.273

答案是不。

```
.cer files are X.509 Certificates 

.pfx files are encrypted X.509 Certificates using a password-based symmetric key

.snk files only contain the RSA key (public/private or public only) 
```

`Set-AuthenticodeSignature`cmdlet 有一个`-Certificate`接受的参数

```
[System.Security.Cryptography.X509Certificates.X509Certificate2] 
```

那么你需要一个证书。您可以在 SuperUser 上阅读此[答案](https://superuser.com/a/94252)，了解有关签署 powershell 脚本的更多信息。

# c# - 新线程和新任务之间的区别？

> ID：13489242
> 
> 赞同：2
> 
> 时间：2012-11-21T08:35:41.630
> 
> 标签：c#, multithreading, task-parallel-library

以下方法有什么区别？

```
 Task.Factory.StartNew(() => CustomConnection());  

 new Thread(CustomConnection).Start(); 
```

两者都将创建新线程来执行工作。在什么意义上线程与任务不同？
性能方面哪个更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:49:02.147

关键区别在于任务方法将利用线程池。

这很重要，因为这意味着您将只创建绝对必要的线程。在可能的情况下，将重用现有线程，从而无需创建新线程即可获得性能优势。

如果您正在创建大量线程，那么对于运行时间相对较短的操作，上述好处变得更加重要。但是，如果操作是一个或几个，长时间运行的操作，它的好处就更少了。

# java-me - 如何在 JavaME 中接收传入的短信？

> ID：13489247
> 
> 赞同：0
> 
> 时间：2012-11-21T08:36:01.297
> 
> 标签：java-me, sms, wma

我正在 javaME 中开发一个应用程序，我正在尝试接收传入的短信，但有一种方法可以捕获它们，它只适用于端口，并且必须有两个应用程序，但我想在不使用 javame 应用程序的情况下在手机中发送短信到其他没有 javame 应用程序的手机。

我想在不使用端口的情况下接收传入的短信。我该怎么做，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:37:30.307

在 Java ME 中，您无法从收件箱中读取 SMS。有一种方法可以从收件箱中读取短信，但它仅适用于 S60 系列（诺基亚 E72、E5）等 symbian 手机。

在 S60 系列手机中使用[API Bridge](http://www.developer.nokia.com/Resources/Tools_and_downloads/Other/APIBridge/) jar 文件，您可以实现您的要求。请查看[http://www.developer.nokia.com/Resources/Tools_and_downloads/Other/APIBridge/](http://www.developer.nokia.com/Resources/Tools_and_downloads/Other/APIBridge/)页面了解更多详情。

# cassandra - Cassandra 节点在初始启动时承担不同的负载

> ID：13489253
> 
> 赞同：1
> 
> 时间：2012-11-21T08:36:46.590
> 
> 标签：cassandra

我正在使用虚拟盒来配置 cassandra 节点，我能够启动一个包含三个节点的集群，在启动所有三个节点时我没有给出任何初始令牌，三个节点承受不同的负载，一个是 85%，另一个是 11 % 和最后一个是 4% 任何人都可以知道为什么在启动时这三个节点中的节点不平衡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:49:10.910

为了获得均匀的数据分布，您需要在 conf.xml 中手动指定令牌。

[http://www.datastax.com/docs/1.1/initialize/token_generation](http://www.datastax.com/docs/1.1/initialize/token_generation)

# windows - Windows Embedded Compact 7（以前的 CE）上的 HTTP 1.0 通信速度较慢

> ID：13489254
> 
> 赞同：3
> 
> 时间：2012-11-21T08:36:48.003
> 
> 标签：windows, http, sockets, embedded, windows-ce

在 Windows Embedded Compact 7（以前的 CE）上，我响应 HTTP 1.0 请求的性能比旧 Windows CE 版本（4.0 和 5.0）慢得多。在 Windows CE 5.0 上，我有大约 10 毫秒来响应请求，而在 Embedded Compact 7 上大约有 170 毫秒。一旦我切换到“保持活动状态”，HTTP 1.1 就会再次快速运行。但我想了解是否引入了任何可以更改的新套接字限制或选项选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-02T20:24:10.733

我建议您在注册表中将 TCPSendQueueDelay 设置为 0。( [https://technet.microsoft.com/en-us/subscriptions/securedownloads/ee495047.aspx](https://technet.microsoft.com/en-us/subscriptions/securedownloads/ee495047.aspx) ) 默认设置为 4（以毫秒为单位），在我们的应用程序中，当交换许多小数据包时，这会导致显着延迟。这显然是 WEC7 中的一个新设置，在交换许多小数据包的情况下，它会导致 tcp/ip 性能更差。这将降低某些通信模式的性能，例如相当频繁地发送大块数据。Microsoft 代表已向我们确认，设置 TCPSendQueueDelay 会导致 WEC7 的行为与 CE 5.0 的行为相同。

# asp.net - 动态加载的下拉列表控件不会触发 SelectedIndexChanged 事件

> ID：13489256
> 
> 赞同：1
> 
> 时间：2012-11-21T08:36:50.173
> 
> 标签：asp.net

我有`dropdownlist`已加载到模板列中的控件`RadGrid`。
加载时我已经设置`AutoPostBack='True'`并`dropdownlist`创建了事件`SelectedIndexChanged`。

```
 DropDownList ddlConditions = new DropDownList(); 
 ddlConditions.ID = "ddl" + name;
 ddlConditions.AutoPostBack = true;
 ddlConditions.SelectedIndexChanged += new EventHandler(ddlConditions_SelectedIndexChanged); 
```

我的问题是当我更改`dropdownlist`事件的选定索引时`SelectedIndexChanged`没有被触发。
谁能帮我解决这个问题？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:00:27.943

通常这是由`page life cycle problem`. 当 Dropdownlist 的索引更改事件触发时，控件不存在以将其绑定到回发。

例子：

-> MyEvent 触发。-> 下拉菜单创建。-> 指定的事件处理程序。-> 索引更改事件触发。页面重新加载。未找到下拉菜单，无法触发。

因此，您必须`ensure that the drop-down is created before`尝试 .NET 来处理该事件。

有关此类问题和**生命周期**的更多信息，请参阅此[答案](https://stackoverflow.com/a/11127064/1740379)。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:01:55.773

我可以建议您检查创建**DropDownList**的位置。应在**OnInit**或至少在**OnLoad**上添加动态控件。OnLoad 完成执行后，ASP.NET 开始处理控件的事件和值。

> 我的问题是，当我更改下拉列表的选定索引时，事件 SelectedIndexChanged 没有被触发。

**答：**因为您在处理完事件后创建了 DropDownList。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:55:33.097

页面回传了吗？如果是这样，您需要确保在每次回发时在页面上重新创建控件。

如果它在通常的`if(!IsPostBack)`块内，则将其放在外面 - 通常，在其中创建控件也是谨慎的`page_init`，但这可能取决于您的特定设置。**

# reporting - Navision通过预览打印不丢失功能

> ID：13489261
> 
> 赞同：1
> 
> 时间：2012-11-21T08:37:19.733
> 
> 标签：reporting, navision, dynamics-nav

我有一些报告，我的客户希望通过预览选项打印这些报告。问题是，这些报告需要 CurrReport.Preview 函数来记录数据。但如果要打印报表，则不能使用此功能。

单击页面预览中的打印按钮后，是否有可能进入触发器？

编辑以指定：对于记录数据，我的意思首先是关于打印的真实记录，其次是归档数据和其他类似内容的选项。

CurrReport.Preview：http: [//msdn.microsoft.com/en-us/library/dd301398.aspx](http://msdn.microsoft.com/en-us/library/dd301398.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:45:40.170

一种选择是使用 REPORT.Run(Report::"Name Of Report",...) 再次调用报告并应用在初始报告中使用的过滤器。

如果它是一个密集的报告，它可能不实用（因为它必须运行两次），但是有一些参数可以使报告自动打印；

*   [http://msdn.microsoft.com/en-us/library/dd355230.aspx](http://msdn.microsoft.com/en-us/library/dd355230.aspx)

# templates - 模板中的乳胶指令导致“Unicode转义错误”

> ID：13489262
> 
> 赞同：0
> 
> 时间：2012-11-21T08:37:21.887
> 
> 标签：templates, playframework, playframework-2.0

我想在 play framework 2.0 模板中包含一些 LaTEX 代码，即：

```
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage{babel} 
```

当然，`error in unicode escape`由于`\us...`部分原因，游戏会抱怨错误消息。

我应该如何转义这些文本，所以 play 编译模板并得到逐字的 LaTeX 代码？用@Html() 试试我的运气，但它也不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:28:07.737

`Application.java`在控制器中创建一个方法：

```
public static String latex(String s){
    return "\\"+s;
} 
```

所以你可以在视图中使用它：

```
@Application.latex("usepackage[T1]{fontenc}")
@Application.latex("usepackage[latin9]{inputenc}")
@Application.latex("usepackage{babel}") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:13:32.480

或者，根据@biesior 的回答，创建一个`latex.scala.html`文件，其中包含：

```
@(latexStatement:String)

@{
    "\\" + latexStatement
} 
```

要使用它：

```
@latex("usepackage[T1]{fontenc}")
@latex("usepackage[latin9]{inputenc}")
@latex("usepackage{babel}") 
```

# hibernate - 休眠搜索

> ID：13489267
> 
> 赞同：0
> 
> 时间：2012-11-21T08:37:37.600
> 
> 标签：hibernate, jakarta-ee

是否可以使用 Hibernate Search（使用 FullTextSession）并行搜索多个表以在数据库上按关键字搜索？

感谢开发人员的回应..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:08:12.200

是的。在我们的项目中，我们有一种方法来搜索每个表/实体：

**List< Object[] > multiFieldSearch(Class< ? > entityClass, List fields, Sort sort, String[] projectionFields, int maxResultsCount);**

您可以创建多个线程来搜索不同的表/实体，然后以您需要的方式聚合所有结果。

# wordpress - 网站吓坏了

> ID：13489269
> 
> 赞同：-8
> 
> 时间：2012-11-21T08:37:44.680
> 
> 标签：wordpress

请访问[http://bigginsroofing.com](http://bigginsroofing.com)

请注意该站点如何从不加载，并且页面不断重新加载，地址栏中的 url 没有：

```
http://www1.bigginsroofing.com/?framerequest=1&refurl=http%3A%2F%2Fwww1.bigginsroofing.com%2F%3Fframerequest%3D1%26refurl%3Dhttp%253A%252F%252Fwww1.bigginsroofing.com%252F%253Fframerequest%253D1%2526refurl%253Dhttp%25253A%25252F%25252Fwww1.bigginsroofing.com%25252F%25253Fframerequest%25253D1%252526refurl%25253Dhttp%2525253A%2525252F%2525252Fwww1.bigginsroofing.com%2525252F%2525253Fframerequest%2525253D1%25252526refurl%2525253D 
```

因为这是一个 wordpress 网站，有趣的是我访问管理部分没有问题。

我不知道可能是什么原因造成的，以及我可以在哪里进行故障排除。

没有启用插件，并且仍然发生。dns 看起来不错，htaccess 也不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:50:02.690

**编辑**

这原来是另一个虚假的 jQuery 垃圾邮件反向链接。基本上，一些代码会被插入到您网站的 HTML 中，假装它们正在加载 jQuery。[在这里](http://www.robgonda.com/2012/07/12/wordpress-hacked-spam-backlinks/)您可以看到更多详细信息，或者您也可以自己进行搜索。

* * *

这是由 JS 重定向引起的。我想有问题的代码是这样的：

```
<script type="text/javascript">StaticRequestInfo={Referer:document.referrer};function EscapeBrowserFrame(){try{if(window.top.location==window.self.location){}... 
```

和

```
<script type="text/javascript">InitiateFrameRequest();</script> 
```

你的 HTML 也是一团糟——你有两个`<html>`标签，这是完全错误的。查看您的主题目录的`header.php`文件 - 这是您应该能够修复`HTML`错误的地方。JS 代码也可能在那里。

# wpf - Automatic Style Inheritance

> ID：13489272
> 
> 赞同：1
> 
> 时间：2012-11-21T08:37:50.200
> 
> 标签：wpf

I have a question about automatic style inheritance.

Basically, I have a superclass for which I would like to define the default style for textboxes and textblocks for classes that derive from it. These styles are based on my default styles as defined in Styles.xaml.

```
<controls:BaseUserControl.Resources>

    <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource DisplayLabel}">
        <Setter Property="Foreground" Value="Black"/>
        <Setter Property="Margin" Value="10,0,10,0"/>
        <Setter Property="HorizontalAlignment" Value="Left"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
    </Style>

    <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource InputField}">
        <Setter Property="Height" Value="30"/>
        <Setter Property="Margin" Value="10,0,0,0"></Setter>
        <Setter Property="HorizontalAlignment" Value="Left"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"></Setter>
    </Style>

</controls:BaseUserControl.Resources> 
```

This class is called `DataEntryView`.

Now when I derive from this class, the textblock and textboxes just get their default Windows look, not what I defined here.

```
<views:DataEntryView.Resources>
    <!-- Do I need to add anything here? -->
</views:DataEntryView.Resources> 
```

What is it that I'm forgetting?

Basically, I don't want to explicitly set the Style of every textblock and textbox to some key.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:55:25.367

您需要将样式放在 RessourceDictionary 中，并使用 RessourceDictionary.MergedDictionaries 属性将其包含到超类和派生类中。

样式文件 (Styles.xaml)

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" ....>
    <Style ...> <!--Your styles goes here-->
</ResourceDictionary> 
```

控制（父母和孩子）：

```
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Styles.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</UserControl.Resources> 
```

# c# - 如何使用 llblgen 将间隔天分配给秒值？

> ID：13489273
> 
> 赞同：0
> 
> 时间：2012-11-21T08:37:49.287
> 
> 标签：c#, .net, oracle, timespan, llblgen

在我的数据库中，我有一个名为“StartTime”的字段，其数据类型为“Interval day to seconds”。

LLBLGen 将其转换为“timeSpan”

我正在尝试做一个事务工作，我使用下面的代码行来分配时间跨度值。

```
request.tableTransferObject.StartTime = new TimeSpan(0, startTimePicker.SelectedDate.Value.Hour, startTimePicker.SelectedDate.Value.Minute, startTimePicker.SelectedDate.Value.Second); 
```

但是，当我尝试保存实体时，我得到了下一个异常

```
An exception was caught during the execution of an action query: Invalid parameter binding
Parameter name: StartTime4\. Check InnerException, QueryExecuted and Parameters of this exception to examine the cause of this exception. 
```

我应该怎么做才能将值插入数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:14:28.387

经过大量研究，我找不到任何合适的方法来做到这一点。

最后，我将我的数据库值更改为日期，在设置和获取时，我只获取和设置时间部分。日期部分始终默认为 01.01.2001，但这对我来说并不重要。我可以轻松地设置和获取只有时间的部分。

这就是我需要的技巧。现在它正在工作。

# iphone - How to implement table with row and column

> ID：13489274
> 
> 赞同：2
> 
> 时间：2012-11-21T08:37:52.417
> 
> 标签：iphone, ios, uitableview

How to implement a table like in the image? Table with Row and column? Can any tell me the refrence for iphone

![enter image description here](../Images/e0edbb5f329360b1259773063b62e89f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:41:52.520

列只是一种错觉。

这是通过继承 UITableViewCell 并将单元格设计为具有一个 UIImageView 和三个 UILabel 来完成的。

将 imageView 和标签分配给子类的属性，您可以通过这种方式配置它...

```
Object *object = [self.datasource objectAtIndexPath:indexPath];

cell.imageView.image = object.image;
cell.subCategoryLabel.text = object.subcategory;
cell.dateLabel.text = object.dateString;
cell.scoreLabel.text = [NSString stringWithFormat:@"%i", object.score]; 
```

或类似的东西。

然后标签的布局给人一种有列的错觉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:42:23.697

您需要根据您的要求创建自定义单元格。通过添加行和列来动态添加数据。在实现自定义单元格之前，请阅读此[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html)文档。

# java - Keep the contents of the Vector intact

> ID：13489277
> 
> 赞同：0
> 
> 时间：2012-11-21T08:38:04.490
> 
> 标签：java, servlets

From my website this servlet below gets called number of times and every time it has to store a value in vector. But I dont want the vector to lose its previous contents once the servlet execution is complete. Like a shopping cart.

```
public void putValues(HttpServletRequest request, HttpServletResponse response)  throws ServletException, IOException
 {
Vector<Object> vector = new Vector<Object>();
 vector.add(request.getParameter("UID"));
 } 
```

Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:40:25.393

不要在每次调用该方法时都创建一个新的 Vector，使用实例变量。

```
private Vector<Object> vector = new Vector<Object>();    

public void putValues(HttpServletRequest request, HttpServletResponse response)  throws ServletException, IOException
     {
     vector.add(request.getParameter("UID"));
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:42:27.430

每次调用该方法时都会创建一个新`Vector`实例。

此类情况通常通过将此类对象保留在`HttpSession`对象中来处理。

我还建议您使用`ArrayList`而不是 Vector，或者`Collections.synchronizedList()`如果您确实需要`List`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T08:43:42.243

您显然应该使用 HttpSession。

```
doXXX(...){
    Object data = request.getSession().getAttribute("data");
    if(data==null){
       request.getSession().setAttribute("data", new Vector());
    } 
```

然后，每次调用 servlet 时，使用：

```
((Vector)(request.getSession().getAttribute("data"))).add(request.getParameter("UID")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:40:43.897

您可以将矢量内容存储在临时文本文件中

# mysql - MySQL EXPLAIN 语句在类型上显示 ALL

> ID：13489279
> 
> 赞同：0
> 
> 时间：2012-11-21T08:38:12.713
> 
> 标签：mysql, indexing, explain

我有一个快速且非常简单的问题。

我有一个带有以下 SQL 的表：

```
CREATE TABLE `users` (
 `id` int(20) NOT NULL AUTO_INCREMENT,
 `username` char(100) NOT NULL,
 `password` char(100) NOT NULL,
 PRIMARY KEY (`id`),
 KEY `password` (`password`),
 KEY `username_2` (`username`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=latin1 
```

当我尝试运行如下 EXPLAIN 语句时：

```
EXPLAIN SELECT * FROM users WHERE username = 'xx' OR `password` = 'xx' 
```

我收到的结果表明我有一个`type = ALL`.

但是，当我尝试运行 EXPLAIN 语句时：

```
EXPLAIN SELECT * FROM users WHERE username = 'xx' AND `password` = 'xx' 
```

我收到的结果表明我有一个`type = REF`.

我想我的问题是为什么第一个查询显示 ALL 而第二个查询显示 REF。

如果有人能对此有所了解，将不胜感激！谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:04:13.957

MySQL 无法优化`OR`条件。因此，即使`OR`索引的两个部分都可以满足，它也不会使用它们。

您应该能够通过使用 UNION 来解决这个问题：

```
SELECT * FROM users WHERE username = 'xx'
UNION
SELECT * FROM users WHERE password = 'xx' 
```

每个子查询都可以使用一个索引，然后将结果合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:44:20.343

ALL 表示必须扫描整个表。在这种情况下，密码和用户名的索引没有帮助（“（用户名，密码）”上没有键）。

第二个查询使用两个键。

更详细的解释可以在这里找到：http: [//dev.mysql.com/doc/refman/5.1/en/explain.html](http://dev.mysql.com/doc/refman/5.1/en/explain.html)

# hibernate - Hibernate HQL delete with and

> ID：13489281
> 
> 赞同：20
> 
> 时间：2012-11-21T08:38:21.937
> 
> 标签：hibernate, hql, hql-delete

Hibernate doesn't delete my row:

```
public boolean deleteVote(Login user, int pid){

      Session session = getSession();

      try{
          String hql = "delete from Vote where uid= :uid AND pid= :pid";
          Query query = session.createQuery(hql);
          System.out.println(user.getUid() + " and pid: " + pid);
          query.setString("uid", user.getUid());
          query.setInteger("pid", pid);
          System.out.println(query.executeUpdate());
      }catch(Exception e){ 
```

Outprint:

```
uid: 123 and pid: 1
Hibernate: delete from votes where uid=? and pid=?
1 
```

The SQL Syntax is working when I'm trying directly in SQL. Direct SQL Syntax:

```
 delete from votes where uid= '123' AND pid= 1 
```

Mapping:

```
<class name="package.model.Vote" table="votes">
   <id name="vid" column="vid" >
   <generator class="increment"/>
</id>
<property name="pid" column="pid" />
<property name="uid" column="uid" />
<property name="tid" column="tid" />
<property name="votes" column="votes" />
 </class> 
```

Table:

```
CREATE TABLE IF NOT EXISTS `votes` (
  `vid` int(11) NOT NULL 
  `pid` int(11) NOT NULL,
  `uid` varchar(20) NOT NULL,
  `tid` int(11) NOT NULL,
  `votes` int(11) NOT NULL DEFAULT '1',
  PRIMARY KEY (`vid`),
  KEY `pcid` (`pid`,`uid`),
  KEY `uid` (`uid`),
  KEY `tid` (`tid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=10 ;

ALTER TABLE `votes`
ADD CONSTRAINT `votes_ibfk_3` FOREIGN KEY (`pid`) REFERENCES `poll` (`pid`) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT `votes_ibfk_4` FOREIGN KEY (`uid`) REFERENCES `user` (`uid`) ON DELETE CASCADE ON     UPDATE CASCADE,
ADD CONSTRAINT `votes_ibfk_5` FOREIGN KEY (`tid`) REFERENCES `teams` (`tid`) ON DELETE CASCADE ON UPDATE CASCADE;

INSERT INTO `votes` (`vid`, `pid`, `uid`, `tid`, `votes`) VALUES
(20, 1, '123', 1, 1); 
```

I guess it's something pretty easy because everything looks okay for me so far. I got no error or anything else, just that no delete is happening.

Any help is appreciated.

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-21T09:38:07.840

您需要开始并提交事务。

```
Transaction transaction = session.beginTransaction();
try {
  // your code
  String hql = "delete from Vote where uid= :uid AND pid= :pid";
  Query query = session.createQuery(hql);
  System.out.println(user.getUid() + " and pid: " + pid);
  query.setString("uid", user.getUid());
  query.setInteger("pid", pid);
  System.out.println(query.executeUpdate());
  // your code end

  transaction.commit();
} catch (Throwable t) {
  transaction.rollback();
  throw t;
} 
```

您也可能需要在更改在数据库中可见之前关闭会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:36:25.277

从您提供的输出

```
uid: 123 and pid: 1
Hibernate: delete from votes where uid=? and pid=?
1 
```

很明显，`query.executeUpdate()`它返回 1。该方法返回更新或删除的实体数。这意味着 1 行已被更新或删除，这没关系。

尝试执行 a`session.flush()`刷新会话，或 a`session.evict()`从会话中删除对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-03T09:00:18.427

```
 int deletedRows = 0;
        try {
            session = sessionProvider.get();
            String hql = "delete from ApprovalRemark approvalRemark where approvalRemark.approvalItem.id =:approvalItemId ";
            Query query = session.createQuery(hql);
            query.setParameter("approvalItemId", approvalItemId);
            deletedRows = query.executeUpdate();
        } catch (javax.persistence.NoResultException e) {
            return false;
        } catch (HibernateException he) {
            log.error("deleteAllApprovalRemarksForApprovalItem exception", he);
            throw he;
        }
        log.debug("deleteAllApprovalRemarksForApprovalItem deleted " + deletedRows + " rows");
        return true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-28T17:57:32.643

带有 HQL 和 session.update 的完整 Java 代码

```
 try {

            try (Session session = this.sessionFactory.openSession()) {

                session.beginTransaction();

                String hql = "UPDATE Employee SET " +
                        "firstName = :firstName, " +
                        "lastName = :lastName," +
                        "gender = :gender," +
                        "jobTitle = :jobTitle," +
                        "departmentId = :departmentId " +
                        "where employeeId = :employeeId";

                Query query = session.createQuery(hql);

                query
                        .setParameter("employeeId", employee.getEmployeeId())
                        .setParameter("departmentId", employee.getDepartmentId())
                        .setParameter("firstName", employee.getFirstName())
                        .setParameter("lastName", employee.getLastName())
                        .setParameter("gender", employee.getGender())
                        .setParameter("jobTitle", employee.getJobTitle())
                ;

                int rows = query.executeUpdate();

//              session.update(Objects.requireNonNull(employee));

                session.getTransaction().commit();

                return session.get(Employee.class, employee.getEmployeeId()).equals(employee);
            }

        } catch (RuntimeException e) {
            e.printStackTrace();
            throw e;
        } 
```

# sql - Split multi column semicolon separated string and create records

> ID：13489286
> 
> 赞同：1
> 
> 时间：2012-11-21T08:38:39.373
> 
> 标签：sql, oracle, oracle11g

I have a stored procedure which receives three string parameters

```
1\. p_ReqIDs VARCHAR2
2\. p_ItemIDs VARCHAR2
3\. p_Qtys    VARCHAR2 
```

The above 3 string variables contain semicolon-separated values like this:

```
p_ReqIDs  := "56;56;56;"  
p_ItemIDs := "3;2;1;"  
p_Qtys    := "400;300;200;" 
```

I need to split values and create rows like this:

```
p_ReqIDs   p_ItemIDs   p_Qtys  
------------------------------------
  56           3       400  
  56           2       300  
  56           1       200 
```

I need the query which splits and insert into table also.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:29:48.707

您可以按如下方式处理参数：

```
SQL> declare
  2    type l_rec_type is record(
  3      r_ReqIDs  varchar2(31),
  4      r_ItemIDs varchar2(31),
  5      r_Qtys    varchar2(31)
  6    );
  7  
  8    type l_rec_list is table of l_rec_type;
  9    -- your parameters. 
 10    l_ReqIDs  constant varchar2(31) := '56;56;56;';
 11    l_ItemIDs constant varchar2(31) := '3;2;1;';
 12    l_Qtys    constant varchar2(31) := '400;300;200;';
 13  
 14    l_rec l_rec_list;
 15  begin
 16  
 17  with Parameters(param) as(
 18      select l_ReqIDs  from dual union all
 19      select l_ItemIDs from dual union all
 20      select l_Qtys    from dual
 21    ),
 22    Occurrences(oc) as(
 23      select level
 24        from ( select max(regexp_count(param, '[^;]+')) moc
 25                 from parameters) s
 26     connect by level <= s.moc
 27    )
 28  select max(res1)
 29       , max(res2)
 30       , max(res3)
 31    bulk collect into l_rec
 32    from (select decode(param, l_ReqIDs, res) res1
 33               , decode(param, l_ItemIDs,res) res2
 34               , decode(param, l_Qtys,   res) res3
 35               , rn
 36            from ( select param, regexp_substr(param, '[^;]+', 1, o.oc) res
 37                        , row_number() over(partition by param order by param) rn
 38                     from parameters p
 39                    cross join occurrences o
 40                  )
 41          )
 42  group by rn;
 43  
 44    for i in l_rec.first..l_rec.last
 45    loop
 46       dbms_output.put_line(l_rec(i).r_ReqIDs || '  ' || l_rec(i).r_ItemIDs || '  ' || l_rec(i).r_Qtys);
 47    end loop;
 48  end;
 49  /

56   2   200
56   1   300
56   3   400

PL/SQL procedure successfully completed 
```

如果您只需要将处理后的数据插入表中，`insert into`则需要唯一的语句和查询（`bulk collect into l_rec`必须删除）：

```
insert into your_table(<<columns>>)
  with Parameters(param) as(
     select l_ReqIDs  from dual union all
     select l_ItemIDs from dual union all
     select l_Qtys    from dual
  .... 
  -- the rest of the query from the above pl/sql block. 
```

您还可以将整条记录插入到表中（如果您需要在插入之前对提取的元素进行额外处理），如下所示：

*   如果表中的列数等于插入的元素数

    ```
    for i in l_rec.first..l_rec.last
    loop
       insert into your_table
         values l_rec(i);
    end loop; 
    ```

*   如果表中的列数大于插入的值数

    ```
    for i in l_rec.first..l_rec.last
    loop
       insert into (select column1, .. ,columnn from your_table)
         values l_rec(i);
    end loop; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:35:46.767

我确实喜欢这个:) 简短而甜蜜。

```
create or replace procedure proc1(p_ReqID varchar2,p_ItemID varchar2,p_ItemQty varchar2)
is
begin
 insert into test(req_id,item_id,itemqty)
 select regexp_substr(req_id,'[^;]+',1,level),
         regexp_substr(item_id,'[^;]+',1,level),
         regexp_substr(item_qty,'[^;]+',1,level)
  from  (
      select p_ReqID Req_ID,p_ItemID item_id,p_ItemQty item_qty
      from dual
      )
  connect by regexp_substr(req_id,'[^;]+',1,level) is not null;
end; 
```

# android - VideoView is not displayed on a Fragment

> ID：13489290
> 
> 赞同：11
> 
> 时间：2012-11-21T08:39:16.413
> 
> 标签：android, android-fragments, android-canvas, hardware-acceleration

I have a problem in running a video in Samsung S3(Android 4.1.1), the issue seems to be because the videoview is on a fragment because if I put it on and activity, it works. Also I found out that if I turn on the GPU hardware acceleration on, the video works. I have also a game made by drawing on a SurfaceView and that view doesn't work as well(only with GPU on)... The rest of the app content is displayed as it supposed to (buttons and other layouts).

I tested the app on Nexus S and on the emulator and it works fine, also on other devices..

Does anyone know what the problem could be? Thank you!

And here is the code:

```
public class VideoFragment extends Fragment implements MediaPlayer.OnCompletionListener,
        MediaPlayer.OnPreparedListener, MediaPlayer.OnErrorListener {

    private Video mVideo;
    private VideoView mVideoView;
    // The video position
    private int mPosition;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View fragmentView = inflater.inflate(R.layout.screen_video, container, false);

        mVideoView = (VideoView) fragmentView.findViewById(R.id.VideoView);

        return fragmentView;
    }

    @Override
    public void onPause() {
        super.onPause();

        // Pause the video if it is playing
        if (mVideoView.isPlaying()) {
            mVideoView.pause();
        }

        // Save the current video position
        mPosition = mVideoView.getCurrentPosition();
    }

    @Override
    public void onResume() {
        super.onResume();

        mVideoView.setOnCompletionListener(this);
        mVideoView.setOnPreparedListener(this);
        mVideoView.setOnErrorListener(this);
        mVideoView.setKeepScreenOn(true);

        // Initialize the media controller
        MediaController mediaController = new MediaController(getActivity());
        mediaController.setMediaPlayer(mVideoView);
        // Set-up the video view
        mVideoView.setMediaController(mediaController);
        mVideoView.requestFocus();
        mVideoView.setVideoPath(mVideo.getUrl());

        if (mVideoView != null) {
            // Restore the video position
            mVideoView.seekTo(mPosition);
            mVideoView.requestFocus();
        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        // Clean-up
        if (mVideoView != null) {
            mVideoView.stopPlayback();
            mVideoView = null;
        }
    }

    @Override
    public void onCompletion(MediaPlayer mediaPlayer) {
        Log.e("VIDEO PLAY", "end video play");
    }

    @Override
    public void onPrepared(MediaPlayer mediaPlayer) {
        // Start the video view
        mediaPlayer.start();
        Log.e("VIDEO PLAY", "video ready for playback");
    }

    @Override
    public boolean onError(MediaPlayer mediaPlayer, int i, int i1) {
        Log.e("VIDEO PLAY", "error: " + i);
        return true;
    }

} 
```

I don't think it's something related to context(Application or Activity).. because on all other devices the Video and the games are displayed.. Thanks for the help!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:35:32.773

我有一个类似的问题，我解决了它的变化：

```
 MediaController mediaController = new MediaController(getActivity().getApplicationContext()); 
```

对此（在片段中）：

```
 MediaController mediaController = new MediaController(getActivity()); 
```

希望这可以帮助，...

**编辑**

看看这堂课

[http://code.google.com/p/sinaweibo-honeycomb/source/browse/branches/sinaweibo-merged/src/com/lenovo/dll/SinaWeibo/VideoFragment.java?r=71](http://code.google.com/p/sinaweibo-honeycomb/source/browse/branches/sinaweibo-merged/src/com/lenovo/dll/SinaWeibo/VideoFragment.java?r=71)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:06:21.947

If hardware acceleration fixes your issue then I would [enable it for that view/window](http://developer.android.com/guide/topics/graphics/hardware-accel.html#controlling) on that device.

In general I've found that when code works on one device but not another it is typically caused by one of the following problems:

1.  Bug in the manufacturer's API implementation
2.  Different interpretation of the API by the manufacturer
3.  Concurrency problem (e.g. race condition, improper synchronization) in your own code that happens to trigger more frequently on a particular device

As far as I can tell you seem to be using the UI thread appropriately so I would imagine your issue falls into one of the first two categories and you'll just need to work around it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-16T07:28:46.547

`MediaController mediaController = new MediaController(getActivity())`从移动`onResume()`到`onCreateView`。

# c# - UniqueConstraint on dataset fails when values contain space

> ID：13489292
> 
> 赞同：2
> 
> 时间：2012-11-21T08:39:20.183
> 
> 标签：c#, .net, datatable, dataset

I have a datatable in which one of the columns has string values. I want to enforce an unique constraint on that column, but the constraint fails if I have two values that differ only by a space at the end (like "test" and "test "). I don't want this, I want the two values to be considered unique even if the only difference is a space at the end. How can I do this?

```
try
            {
                DataTable dt = new DataTable("test");
                dt.Columns.Add("nr");
                dt.Columns.Add("text");
                DataRow dr = dt.NewRow();
                dr.ItemArray = new object[] { 1, "test" };
                dt.Rows.Add(dr);
                dr = dt.NewRow();
                dr.ItemArray = new object[] { 2, "test " };
                dt.Rows.Add(dr);
                dr = dt.NewRow();
                dr.ItemArray = new object[] { 3, "alabala" };
                dt.Rows.Add(dr);
                dr = dt.NewRow();
                dr.ItemArray = new object[] { 4, "bbb" };
                dt.Rows.Add(dr);

                DataSet ds = new DataSet("testds");
                ds.Tables.Add(dt);

                ds.EnforceConstraints = true;
                UniqueConstraint unqUID = new UniqueConstraint(ds.Tables[0].Columns[1], true);
                ds.Tables[0].Constraints.Add(unqUID);

                int count = ds.Tables[0].Rows.Count;
            }
            catch (Exception ex) {
                MessageBox.Show(ex.Message);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:31:11.157

恐怕我不确定你能做些什么。

它似乎只是减少了字符串末尾的空间。如果您在第二行的开头放置一个空格，如下所示：-“测试”。它包括空格并将两行确定为唯一。

我很想知道是否存在解决方案，但我找不到。

# java - 如何修复 HTML 代码中的 Open Quote 错误消息？

> ID：13489293
> 
> 赞同：1
> 
> 时间：2012-11-21T08:39:42.163
> 
> 标签：java, html

谁能帮我修复 HTML 代码中的错误。在第 9 行我有一个错误。

```
Fatal Error: Open quote is expected for attribute "{1}" associated with an  element type  "border". 
```

这段代码是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>some title here</title>
        <link href="../design.css" rel="stylesheet" type="text/css"/>
    </head>
    <body style="background-image:url(../Pictures/background.png)">
        <table border=0 width="100%" cellpadding=0 cellspacing=0>
            <tr>
                <td>
                    <p align="left" id="textd"><img src="../Pictures/iconeD.png" alt="D Logo" /> D</p>
                </td>
            </tr>
        </table>
        <br></br>
        <table bgcolor="#e7ebff" border=0 width="100%" cellpadding=0 cellspacing=0>
            <tr valign=top>
                <td></td>
            </tr>
        </table>
    </body>
</html> 
```

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:54:58.683

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>some title here</title>
        <link href="../design.css" rel="stylesheet" type="text/css"/>
    </head>
    <body style="background-image:url(../Pictures/background.png)">
        <table style="border:0px;width:100%;" cellpadding="0" cellspacing="0">
            <tr>
                <td>
                    <p align="left" id="textd"><img src="../Pictures/iconeD.png" alt="D Logo" /> D</p>
                </td>
            </tr>
        </table>
        <br></br>
        <table style="border:0px;width:100%;background-color:#e7ebff;" cellpadding="0" cellspacing="0">
            <tr valign=top>
                <td></td>
            </tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:46:00.980

试试这个：

```
<table border="0" width="100%" cellpadding="0" cellspacing="0"> 
```

或像这样使用 css：

```
table{
   border:none;
   width: 100%;
   border-spacing:0;
   border-collapse:collapse;
} 
```

# python - 分配给列表列表中的位置

> ID：13489294
> 
> 赞同：1
> 
> 时间：2012-11-21T08:39:49.327
> 
> 标签：python, list

假设我在 Python 中有一个值表。我以这种方式生成表格：

```
table = [[True] * 11] * 7 
```

这产生了一个包含 7 个列表的列表，每个列表包含 11 个`True`值：

```
[[True True True True True True True True True True True],
 [True True True True True True True True True True True],
 [True True True True True True True True True True True],
 [True True True True True True True True True True True],
 [True True True True True True True True True True True],
 [True True True True True True True True True True True],
 [True True True True True True True True True True True]] 
```

假设我更改`table[6][4]`为`False`( `table[6][4] = False`)。我希望*只*更改该插槽：

```
[[True True True True True  True True True True True True],
 [True True True True True  True True True True True True],
 [True True True True True  True True True True True True],
 [True True True True True  True True True True True True],
 [True True True True True  True True True True True True],
 [True True True True True  True True True True True True],
 [True True True True False True True True True True True]] 
```

但显然每个其他列表中的第 4 列也发生了变化：

```
[[True True True True False True True True True True True],
 [True True True True False True True True True True True],
 [True True True True False True True True True True True],
 [True True True True False True True True True True True],
 [True True True True False True True True True True True],
 [True True True True False True True True True True True],
 [True True True True False True True True True True True]] 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:46:36.090

表的 7 个元素中的每一个都指向同一个列表？

```
>>> x = range(5)
>>> y = x
>>> print x
[0, 1, 2, 3, 4]
>>> print y
[0, 1, 2, 3, 4]
>>> x.append("ABC")
>>> print x
[0, 1, 2, 3, 4, 'ABC']
>>> print y
[0, 1, 2, 3, 4, 'ABC'] 
```

您可以使用[`deepcopy`](http://docs.python.org/2/library/copy.html#copy.deepcopy)来确保始终添加列表的新实例：

```
from copy import deepcopy
table = [[True] * 11] * 7
table = [deepcopy(x) for x in table]
# now this will behave as you expected
table[6][4] = False 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T08:47:53.363

如果你这样做

```
table = [[True] * 11] * 7 
```

您创建一个包含 11`True`的列表，然后将其包装在一个列表中七倍。不是通过复制它，而是通过多次引用它。

如果您创建 7 个不同的列表，例如在

```
table = [[True] * 11 for _ in range(7)] 
```

你过得更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T08:47:50.237

当您以这种方式创建列表时，它们指向内存中的相同位置，因此任何更改都将反映在每个列表中：

```
In [1]: table = [[True] * 11] * 7

In [2]: id(table[0])
Out[2]: 17815672

In [3]: id(table[1])
Out[4]: 17815672 
```

至于创建表的正确方法，@glglgl 的答案是要走的路。

# c# - Why The uploader clear my sessions and logout?

> ID：13489298
> 
> 赞同：0
> 
> 时间：2012-11-21T08:39:55.377
> 
> 标签：c#, asp.net, session, file-upload

I use the `FileUpload` to upload files.

but i note that :

in the second upload ,the session variables are cleared then log out !!

Why this strange behavior is happened when clicking on `save button` ?and how to fix it ?

* * *

```
if (fup_logoBannarFile.HasFile)
{
    try
    {
        bool IsExists = System.IO.Directory.Exists(Server.MapPath(path + ddl_dep.SelectedItem.Value.ToString()));
        if (!IsExists)
          System.IO.Directory.CreateDirectory(Server.MapPath(path + ddl_dep.SelectedItem.Value.ToString()));
          upload_file(fup_logoBannarFile, lbl_successMsg, "LogoBanner");
          load_images();
     }
     catch (Exception ex)
     {
          errorDiv.Visible = true;
          successDiv.Visible = false;
          lbl_msg.Text = "Upload status: The file could not be uploaded. The following error occured: " + ex.Message;
     }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:07:11.513

您可以尝试将文件保存在您的网站或 iis 根目录之外。因为我猜替换您网站目录中的文件可能会清除会话

# python - function with multiple arguments **args

> ID：13489299
> 
> 赞同：1
> 
> 时间：2012-11-21T08:39:55.423
> 
> 标签：python

I am learning python and this is from

```
http://www.learnpython.org/page/MultipleFunctionArguments 
```

They have an example code that does not work- I am wondering if it is just a typo or if it should not work at all.

```
def bar(first, second, third, **options):
    if options.get("action") == "sum":
        print "The sum is: %d" % (first + second + third)

    if options.get("return") == "first":
        return first

result = bar(1, 2, 3, action = "sum", return = "first")
print "Result: %d" % result 
```

Learnpython thinks the output should have been-

```
The sum is: 6
Result: 1 
```

The error i get is-

```
Traceback (most recent call last):
  File "/base/data/home/apps/s~learnpythonjail/1.354953192642593048/main.py", line 99, in post
    exec(cmd, safe_globals)
  File "<string>", line 9
     result = bar(1, 2, 3, action = "sum", return = "first")
                                                ^
 SyntaxError: invalid syntax 
```

Is there a way to do what they are trying to do or is the example wrong? Sorry I did look at the python tutorial someone had answered but I don't understand how to fix this.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T08:43:02.800

`return`是 python 中的关键字 - 你不能将它用作变量名。如果您将其更改为其他内容（例如`ret`），它将正常工作。

```
def bar(first, second, third, **options):
    if options.get("action") == "sum":
        print "The sum is: %d" % (first + second + third)

    if options.get("ret") == "first":
        return first

result = bar(1, 2, 3, action = "sum", ret = "first")
print "Result: %d" % result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:44:14.317

您可能不应该使用“ `return`”作为参数名称，因为它是一个 Python 命令。

# node.js - Failed to build and deploy node.js project with Travis-ci - No Rakefile found

> ID：13489301
> 
> 赞同：5
> 
> 时间：2012-11-21T08:39:58.237
> 
> 标签：node.js, heroku, travis-ci, heroku-toolbelt

I am trying to build a `node.js` project in travis-ci. this is my `.travis.yml` file:

```
language: node_js
node_js:
  - 0.8

after_script:
  # Install the Heroku package (or the Heroku toolbelt)
  - npm install heroku
  # Add your Heroku git repo:
  - git remote add heroku git@heroku.com:*****.git
  # Add your Heroku API key:
  - export HEROKU_API_KEY=KEYHERE
  # Turn off warnings about SSH keys:
  - echo "Host heroku.com" >> ~/.ssh/config
  - echo "   StrictHostKeyChecking no" >> ~/.ssh/config
  - echo "   CheckHostIP no" >> ~/.ssh/config
  - echo "   UserKnownHostsFile=/dev/null" >> ~/.ssh/config
  # Clear your current Heroku SSH keys:
  - heroku keys:clear
  # Add a new SSH key to Heroku
  - yes | heroku keys:add
  # Push to Heroku!
  - yes | git push heroku master 
```

I get the following build error right on the beginning:

> No Rakefile found (looking for: rakefile, Rakefile, rakefile.rb, Rakefile.rb)

Probably because there's something wrong with my yml file and it tries to use the default ruby builder.

I don't think the file is not valid yml file as I have checked it with yml validator at [http://yamllint.com/](http://yamllint.com/)

Something wrong with my Travis specific conf ?

My `package.json` looks like this :

```
{
  "name": "csnc",
  "description": "csnc",
  "version": "0.0.1",
  "private": true,
  "dependencies": {
    "express": "3.x",
    "ejs": ">=0.0.0",
    "express-partials": ">=0.0.0"
  },
  "engines": {
    "node": "0.8.x",
    "npm": "1.1.x"
  }
} 
```

**EDIT:**

If you are looking for a way to automatically deploy node.js app to Heroku using Travis-CI, look for the answer I included for a working `.travis.yml` file

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T08:50:12.407

您的`.travis.yml`文件未通过验证；您可以在[http://lint.travis-ci.org/](http://lint.travis-ci.org/)对其进行验证。

> 发现**node_js**键有问题：
> 
> 检测到不受支持的 Node.js 版本。有关支持的 Node.js 版本的最新列表，请参阅[http://bit.ly/travis-ci-environment上的 Travis CI 文档](http://bit.ly/travis-ci-environment)

尝试使用`0.8.x`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:45:51.123

出于某种奇怪的原因，我注意到文件开头有一个以前不存在的空格（我发誓:)。这一定是导致错误的原因。

奇怪的是，当我将节点版本从`0.8`更改`0.6`为验证器时，并没有注意到错误。也许这是验证器中的一个错误。

无论如何，我还成功地**将我的节点应用程序自动部署到 Heroku**。我没有在网上找到任何关于这样做的过程的文档（特别是对于节点），所以我附上了`.travis.yml`对我有用的文件。请注意，我不必为我的应用程序添加任何测试，没有它它可以正常工作：

```
language: node_js
node_js:
  - 0.8

after_script:
  # Install the Heroku package (or the Heroku toolbelt)
  - npm install heroku
  # Add your Heroku git repo:
  - git remote add heroku git@heroku.com:HEROKU_REPO_HERE.git
  # Add your Heroku API key:
  - export HEROKU_API_KEY=ENTER_KEY_HERE
  # Turn off warnings about SSH keys:
  - echo "Host heroku.com" >> ~/.ssh/config
  - echo "   StrictHostKeyChecking no" >> ~/.ssh/config
  - echo "   CheckHostIP no" >> ~/.ssh/config
  - echo "   UserKnownHostsFile=/dev/null" >> ~/.ssh/config
  # Download and install Heroku toolbelt locally
  - wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh
  # Clear your current Heroku SSH keys:
  - heroku keys:clear
  # Add a new SSH key to Heroku
  - yes | heroku keys:add
  # Push to Heroku!
  - yes | git push heroku master 
```

编辑：

我最近从 Travis.ci 搬到了 Drone.io。如果您正在寻找从 Github 到 Heroku 的自动部署，您应该检查一下，它工作得很好并且更容易设置 IMO。

[https://drone.io/](https://drone.io/)

# opencv - Are there any way to find optical flow velocity from motion of real-world object without knowing depth Z?

> ID：13489305
> 
> 赞同：9
> 
> 时间：2012-11-21T08:40:03.147
> 
> 标签：opencv, computer-vision

I am struggling and need help.

I want to compute **optical flow velocity** from the known motion of real-world object (actually camera is moving). This is part of what I have asked in my previous question ([Determining if a feature is part of a moving object from sparse optical flow (KLT)](https://stackoverflow.com/questions/13289578/determining-if-a-feature-is-part-of-a-moving-object-from-sparse-optical-flow-kl)).

Anyway, I have done computing optical flow using `cvGoodFeaturesToTrack()` and `cvCalcOpticalFlowPyrLK()`.

I just want to check if the flow I computed is theoretically correct (corresponding to the motion of camera).

Let my camera move only in Z axis (simply ignore yaw-rate for now). Assume my camera move for Vz (in Z direction).

I can find the optical flow by

```
vx = x * Vz / Z    
vy = y * Vz / Z 
```

(assume Vx,Vy = 0 --> no camera motion in x and y axis)

This is what I have studied mainly from [http://www.cse.psu.edu/~rcollins/CSE486/lecture22_6pp.pdf](http://www.cse.psu.edu/~rcollins/CSE486/lecture22_6pp.pdf).

The problem is to solve this I have to have Z. In my case, I cannot assume surface Z to be flat or known. Camera is moving on road and directing perpendicular to the ground.

Please anyone help me answer the questions below:

1.  How can I get the depth of object Z value? Do I need additional technique?
2.  Or are there any way else that I can find the relationship between motion of camera and image optical flow?
3.  Have anyone tried the equation above? Is it valid when the camera moving just in one direction?

Thank you very much.

[If you find this question to be too vague, please let me know so that I can give more detail.]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T21:04:13.177

也许这会有所帮助……来自中佛罗里达大学计算机视觉小组的视频讲座：

*   [第 6 章 - 光流](http://youtu.be/5VyLAH8BhF8)（您要求的方程式在视频 31:00 分钟）
*   [第 8 章 - 运动模型](http://youtu.be/dW_F2C-kNfo)（处理偏航、倾斜、旋转的各种方法）
*   [第 9 章 - 全局运动](http://youtu.be/fI6-02ATz4w)（解决自我运动的问题，即移动摄像机）

Jan Erik Solem 的其他 python 代码：[使用 Python 编程计算机视觉](http://programmingcomputervision.com/downloads/ProgrammingComputerVision_CCdraft.pdf)。

阅读第 10.4 章，它很可能会回答你所有的问题。

另请参阅该书的第 5.4 章，如果您用相机拍摄图像，然后在 x 方向上稍微移动相机并拍摄另一张图像，您可以使用这两个图像计算出称为“视差图”的东西图像中的东西在前面和后面。这有点像弄清楚 z 方向。类似于您已经尝试过的内容以及一些评论中提到的有关立体成像的内容。

第 4.3 章解释了使用平面标记的姿态估计。您可以使用放置在相机前面已知距离的物体来校准相机。这很可能是您应该首先查看的内容。

# java - 在泛型方法的实现中强制类型安全

> ID：13489306
> 
> 赞同：1
> 
> 时间：2012-11-21T08:40:04.770
> 
> 标签：java, generics, abstract-class

假设我有这个通用类，它做了一些工作并产生了结果：

```
public abstract class Work<T> {

    private T mResult;

    public Work(T result) {
        mResult = result;
    }

    public abstract <T> void doWork(T result);

    public T getResult() {
        return mResult;
    }
} 
```

对于这个类的用户，我想要看起来像这样的类型安全：

```
Work<MyResult> work = new Work<MyResult>(new MyResult()){
    public void work(MyResult result){
        //...
    }
} 
```

问题是 Java 不能以这种方式工作，并迫使我从泛型类型转换：

```
Work<MyResult> work = new Work<MyResult>(new MyResult()){
    public <T> void work (T result){
        // (MyResult)result - not nice
    }
} 
```

有没有办法像第一个例子那样以一种很好的方式实现类型安全？

谢谢，泰奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:43:39.503

您不需要`<T>`在 的声明中`doWork`，因为您想使用在类级别声明的 T - 您需要

```
public abstract void doWork(T result); 
```

当前声明与

```
public abstract <A> void doWork(A result); 
```

它不一定和你班上的其他人一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:44:23.697

试试这个：

```
Work<MyResult> work = new Work<MyResult>(new MyResult()){
    public void work(MyResult result){
      // Do something
    }
} 
```

* * *

您当前的`Work`课程设计有点奇怪。我不确定为什么您的`doWork`方法需要一个结果对象作为参数。抽象类似乎也没有提供什么功能（尽管我很欣赏这可能是一个原型）。也许考虑一个接口：

```
public interface Work<T> {    

    public T doWork();   
} 
```

# android - android项目部署和活动问题

> ID：13489307
> 
> 赞同：0
> 
> 时间：2012-11-21T08:40:11.050
> 
> 标签：android

我在 android 中创建了包含 5 到 6 个活动的应用程序。它运行成功。我将apk加载到我安装并运行的Android手机中。问题是安装应用程序后，所有活动都单独显示在我的设备中。为什么它不只包含一个文件，因为我们看到其他应用程序只有一个文件。将设备中的许多活动与图标分开不仅混淆而且弄得一团糟。我应该在eclipse项目中做什么来解决它？？？？？？提前感谢您的回复>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:44:01.670

检查android清单文件，你可能有

```
<intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter> 
```

在每个活动标签中。

相反，您应该仅在您希望在启动器菜单上的活动中插入此标签。

# mysql - 恢复选项

> ID：13489314
> 
> 赞同：1
> 
> 时间：2012-11-21T08:40:25.280
> 
> 标签：mysql

MYSQL 中的 excatly 刷新意味着什么？它像截断表吗？我需要从 linux 上的服务器上的数据库中提取几个表，然后我需要将它恢复到跨多个服务器的多个数据库中。

我正在考虑在第一台服务器上转储特定数据库，然后将特定表从数据库恢复到多台服务器

示例 - 我有一个名为“SA”的服务器，我在该服务器上有一个名为“DA”的数据库，然后我需要从 DA 中提取一些表，比如说 TA 和 TB，并将其还原到其他可能有 TA TB 的数据库中同一个数据库DA

什么方法会好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:52:37.800

在mysql中使用flush来清除mysql引擎默认调用的几种形式的内部数据。它不会从数据库中清除数据，而是对临时数据进行操作。

*   它只是清除内部缓存数据。
*   如果需要，它会从服务器重新加载数据。
*   它会导致隐式提交，就像我们使用任何 DDL 命令时一样。但它不像截断。

更好的是，使用 mysqldump 转储您的数据库，然后您可以轻松地在任何平台或服务器上恢复它。

# windows - 如何在 Windows XP-X86 上确定机器字节序

> ID：13489318
> 
> 赞同：4
> 
> 时间：2012-11-21T08:40:41.037
> 
> 标签：windows

我正在尝试在 Windows XP 上使用 MSYS 和 MinGW 安装软件，正如我对 UNIX 和 UBUNTU 所了解的那样。我安装了 Msys 和 MinGW，同时通过运行以下 cmd 在 win32 上设置构建环境：

```
./setup.sh C:/SRC/NBIS/Main --MSYS --32 
```

我收到此错误：

`gcc.exe: am_big_endian.c: No such file or directory gcc.exe: no input files /bin/setup.sh: line 221: ./am_big_endian: No such file or directory Failed Setup - Cannot determine target machine endianness!`

我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T15:20:17.647

x86 机器总是小端的。

# c++ - 在哪里可以找到 Qt 5 beta 2 的 Qt Location 插件？

> ID：13489328
> 
> 赞同：1
> 
> 时间：2012-11-21T08:41:28.977
> 
> 标签：c++, qt, geolocation, maps, openstreetmap

我正在尝试在 Qt5 beta 2 下编译 qtm-geoservices-extras，但错过了一些标头，例如：

```
qgeoserviceproviderplugin_osm.h:46: Error:qgeoserviceproviderfactory.h: No such file or directory 
```

根据在线文档，此标头是 Qt Location 插件的一部分，应该在 Qt5 SDK 中：

[http://doc-snapshot.qt-project.org/5.0/location-plugin-nokia.html](http://doc-snapshot.qt-project.org/5.0/location-plugin-nokia.html) [http://doc-snapshot.qt-project.org/5.0/qgeoserviceproviderfactory.html](http://doc-snapshot.qt-project.org/5.0/qgeoserviceproviderfactory.html)

有人知道在哪里可以找到 Qt5 的 Qt Location 插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:14:05.210

Qt location 插件已从 Beta 2 中的 Qt 5 发行版中删除。它现在被认为是一个可选的[插件](http://qt-project.org/wiki/Qt-Add-ons-Modules)模块。源代码可从 Qt 项目 git [server](http://qt.gitorious.org/qt/qtlocation)获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T03:07:50.693

您需要下载 qtlocation 插件并将包放在 Qt5 分发包目录中，然后重新配置 qt 和 make

# youtube-api - 如何在 YouTube API 版本 3 中获取评论？

> ID：13489329
> 
> 赞同：7
> 
> 时间：2012-11-21T08:41:36.383
> 
> 标签：youtube-api

如何在 YouTube API 版本 3 中获取视频评论？我一直在尝试Google API Explorer`youtube.activities.list`中`youtube.videos.list`提供的大多数其他方法。我在这里错过了什么吗？

（`youtube.activities.list`似乎是正确的调用，但这只会返回我自己的上传和播放列表项。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T19:55:27.970

更新：Data API v3 现在提供评论功能。[http://youtube-eng.blogspot.com/2015/04/manage-comments-with-youtube-data-api-v3.html](http://youtube-eng.blogspot.com/2015/04/manage-comments-with-youtube-data-api-v3.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-14T11:21:34.260

```
https://www.googleapis.com/youtube/v3/commentThreads?part=snippet%2Creplies&maxResults=20&videoId=Au87oAJ2jeE&key=app-key 
```

结果 json

```
{
 "kind": "youtube#commentThreadListResponse",
 "etag": "\"mPrpS7Nrk6Ggi_P7VJ8-KsEOiIw/Q8IErPBy5AB6a2BKgaDaOWcf_jQ\"",
 "pageInfo": {
  "totalResults": 10,
  "resultsPerPage": 20
 },
 "items": [
  {
   "kind": "youtube#commentThread",
   "etag": "\"mPrpS7Nrk6Ggi_P7VJ8-KsEOiIw/bdn5c_ALv5vbJlPCzNuP1B9UqiU\"",
   "id": "z12qxfxr2onpy1b5l04cdfzrgwabir0q4bo",
   "snippet": {
    "channelId": "UCJr72fY4cTaNZv7WPbvjaSw",
    "videoId": "Au87oAJ2jeE",
    "topLevelComment": {
     "kind": "youtube#comment",
     "etag": "\"mPrpS7Nrk6Ggi_P7VJ8-KsEOiIw/JZObCX09D4_6WRoUvqcZuSWtjRw\"",
     "id": "z12qxfxr2onpy1b5l04cdfzrgwabir0q4bo",
     "snippet": {
      "channelId": "UCJr72fY4cTaNZv7WPbvjaSw",
      "videoId": "Au87oAJ2jeE",
      "textDisplay": "Thank you Dan and Envato for creating this video!\ufeff",
      "authorDisplayName": "Randy Taschner",
      "authorProfileImageUrl": "https://lh6.googleusercontent.com/--vE0X3_vDCs/AAAAAAAAAAI/AAAAAAAAAJU/aBCbmKPAMtc/photo.jpg?sz=50",
      "authorChannelUrl": "http://www.youtube.com/channel/UCTRuBHRb4BRFcob-hMj6NnQ",
      "authorChannelId": {
       "value": "UCTRuBHRb4BRFcob-hMj6NnQ"
      },
      "authorGoogleplusProfileUrl": "https://plus.google.com/109363234563168058777",
      "canRate": false,
      "viewerRating": "none",
      "likeCount": 1,
      "publishedAt": "2015-08-16T05:02:25.807Z",
      "updatedAt": "2015-08-16T05:02:25.807Z"
     }
    },
    "canReply": false,
    "totalReplyCount": 0,
    "isPublic": true
   }
  }
} 
```

# grid - 为什么我不能在禁用的网格上拖放？

> ID：13489330
> 
> 赞同：3
> 
> 时间：2012-11-21T08:41:41.597
> 
> 标签：grid, extjs4

我有 2 个网格，一个最初被禁用。在 2 个网格之间配置了一个拖放。我认为拖放在禁用的网格上不起作用，但显然可以。

知道如何预防吗？这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:38:53.263

您可以通过在禁用网格时禁用 D&D 插件来防止这种情况。并在启用网格时（或任何时候）启用它。

# openembedded - 在 bitbake 中跟踪变量分配

> ID：13489332
> 
> 赞同：16
> 
> 时间：2012-11-21T08:41:49.990
> 
> 标签：openembedded, bitbake

我正在使用 bitbake / openembedded，但我的食谱失败了，因为我认为某些路径变量最终没有正确设置。具体来说，我正在将文件添加到 SRC_URI，但错误表明尝试复制文件是使用错误的路径完成的。所以

1）如何验证使用 file:// 协议时使用的“当前”路径变量

2）鉴于我以某种方式确认了哪个变量用于搜索文件，我可以在我的依赖图中跟踪对所述变量的分配吗？我的意思是，bitbake 必须在一组配方文件中以某种顺序遇到变量的追加/前置，我想检查这些以找到我的错误

额外的问题：我认为我当前用于检测食谱中的错误的“调试方法”过于原始（例如，将 -D -D -D 添加到命令行，然后在成堆的输出中寻找提示） ）。“专业人士”如何调试他们的 bitbake 食谱？

**更新：**我找到了一种更好的方法来调试我的食谱：

事实证明，在给定配方的“获取”任务成功完成后，会创建该配方的工作文件夹。此文件夹内是一个“temp”子文件夹，其中包含配方中每个任务的执行代码（例如 run.do_fetch.######）和结果（例如 log._do_fetch.######） .

检查“run..###”文件将告诉您任何变量的确切值，以及为该任务执行的确切命令/Python 函数。给定“运行”的输出存储在“log..###”文件中，其 ID/编号与“运行”文件相同。不知何故，当我阅读手册时，这个非常基本的信息并没有注册，但现在我总是在配方失败时查看“临时”文件夹。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-21T23:22:34.187

我想你已经发现了`bitbake -e`，对吧？这会转储特定于单个 bitbake“目标”（即配方）的环境。我相信`FILESPATH`这是 bitbake 用于查找`file://` `SRC_URI`组件中指定的文件的关键变量。使用`bitbake -e (recipe) | grep ^FILESPATH=`将显示非常大的路径变量！

我不知道如何跟踪对该变量的分配，但有几种方法可以修改它。（实际上我记得一个 bitbake 补丁，它会`bitbake -e`用哪个文件修改哪个变量但无法回忆细节的输出来注释。在 oe 列表中询问。）无论如何，如果你`=`从上面的 grep 中删除符号，你可以看到其他方式`FILESPATH`可以修改。我认为这也包含在各种文档中。

最后，在[openembedded mailing list](https://www.openembedded.org/wiki/Mailing_lists)上提问可能比在 stackoverflow 上提问要好。

`bitbake -e`日志文件（在 中找到`${WORKDIR}/temp`）是您最好的调试工具。（另请查看`ack-grep`。比`grep`一些与 bitbake 相关的用例更好。）你在哪里`WORKDIR`问？

```
bitbake -e (recipe) | grep ^WORKDIR= 
```

一旦你熟悉了`WORKDIR`，你就会看到这个模式，而不必那样去寻找它。

快乐烘焙！;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T11:07:34.547

我建议在交互模式下使用 Toaster。在配置页面中，您可以跟踪变量分配历史。

样机在这里： https: [//www.yoctoproject.org/toaster/build-configuration.html](https://www.yoctoproject.org/toaster/build-configuration.html)

要使用它，请在“source oe-init-build-env”之后运行“source toaster start”，然后在 Web 界面中，您将找到从构建中记录的数据。

希望这会有所帮助，亚历克斯

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T13:15:19.377

事实证明，在更高版本的 BitBake 中有一个补丁可以做到这一点，只是我目前使用的那个不支持它:-(

# android - 按下后退按钮时如何返回上一个活动？

> ID：13489333
> 
> 赞同：0
> 
> 时间：2012-11-21T08:41:50.057
> 
> 标签：android, back-button

我正在开发 Android 应用程序。当我按下后退按钮时，它说应用程序已停止。

下面是我的代码：

```
 list.setOnItemClickListener( new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {

                switch(position){

                case 1 : Intent intent = new Intent(Product.this, Desktop.class);

                         intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                         startActivityForResult(intent, 1);

                         break;
                case 2 : Intent intent1 = new Intent(Product.this, Notebook.class);
                         intent1.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                         startActivityForResult(intent1, 2);

                         break;

               default : break;

                }
            }   
        });

@Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.desktop);

        gridView = (GridView) findViewById(R.id.gridView1);

        gridView.setAdapter(new ImageAdapter(this, comps));

        gridView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                Toast.makeText(
                   getApplicationContext(),
                   ((TextView) v.findViewById(R.id.grid_item_label))
                   .getText(), Toast.LENGTH_SHORT).show();

            }
        });

    }

} 
```

我应该添加什么以便它将转到上一个活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:53:19.560

写下面的代码片段而不是您的代码，可能会解决您的问题。

```
case 1 : Intent intent = new Intent(Product.this, Desktop.class);
         startActivity(intent);

         break;

case 2 : Intent intent1 = new Intent(Product.this, Notebook.class);
         startActivity(intent1);

         break; 
```

# php - 在 wordpress 中集成自定义页面

> ID：13489337
> 
> 赞同：-1
> 
> 时间：2012-11-21T08:42:01.533
> 
> 标签：php, wordpress

需要将自定义`php page`及其集成`code`到 .php 的 home.php 中`wordpress`。包含多少可能性`wordpress`？任何用于集成的自定义代码？目前完整`code`且存在于主题`images`中。`js``wordpress`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:44:16.770

使用自定义页面模板：[http](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates) ://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates 创建模板后，您只需告诉主页在 Wordpress 页面管理器中使用它。

根据您的 Wordpress 站点的设置方式，您可能只需要在`index.php`文件中包含您的自定义功能。

如果您提到添加的自定义代码包含功能，您可能需要考虑将其设为插件文件。在您的 Wordpress 博客上启用它，然后从您需要的任何地方调用它。这将在逻辑和表示之间保持良好的整洁分离。

# regex - MS-Word VBA，正则表达式，仅替换第一个捕获组的格式

> ID：13489345
> 
> 赞同：1
> 
> 时间：2012-11-21T08:42:44.433
> 
> 标签：regex, vba, ms-word

我尝试使用通配符搜索和替换在 VBA 中记录替换：

我有由 3 个空格后跟单词 normal 组成的字符串，例如“normal”，并且想用蓝色字体的“1”（一个 1 后跟两个空格）替换 3 个前导空格。

给出：“1 normal”，1为蓝色，“normal”为原始格式..

我试图匹配：

```
([^s]{3})normal 
```

但是当用新格式替换时，我总是会重新格式化整个字符串..如何保留字符串“正常”的原始格式

任何指针，也许直接使用VBA？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:24:32.207

我设法做我想做的事。但是，我不使用正则表达式，我想有一种更优雅的方式来做到这一点（我做了两次替换来得到我想要的地方）。我认为关键词是“环顾四周”，但我没有绕过应用它。

```
Sub replace_3spaces()

Dim str_after As String
Dim re_number As Integer

str_after = "normal"
re_number = "1"

    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting
    With Selection.Find
        .Text = "([^s]{3})" & "(" & str_after & ")"
        .Replacement.Text = "§§§\2"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchWildcards = True
    End With
    Selection.Find.Execute Replace:=wdReplaceAll

    Selection.Find.ClearFormatting
    Selection.Find.Replacement.Font.ColorIndex = wdBlue
    With Selection.Find
        .Text = "§§§"
        .Replacement.Text = re_number & " "
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchWildcards = True
    End With
    Selection.Find.Execute Replace:=wdReplaceAll
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:31:06.853

改用这个`regex`：`^ {3}(normal.*)`

```
^          # Matched the start of the string
 {3}       # Followed by 3 spaces
(normal.*) # Followed by normal + anything else (captured) 
```

*经测试`sed`：*

```
$ cat file.txt
   normal string 
no spaces 
  two spaces
   another normal string

$ sed -E 's/^ {3}(normal.*)/1  \1/' file.txt
1  normal string 
no spaces 
  two spaces
another normal string 
```

# objective-c - 将 NSData 转换为 Hex NSString

> ID：13489349
> 
> 赞同：5
> 
> 时间：2012-11-21T08:43:02.137
> 
> 标签：objective-c, cocoa, hex, nsdata, nsscanner

参考以下问题：[Convert NSData into HEX NSString](https://stackoverflow.com/questions/7520615/how-to-convert-an-nsdata-into-an-nsstring-hex-string "将 nsdata 转换为十六进制 nsstring")

我已经使用 Erik Aigner 提供的解决方案解决了这个问题，即：

```
NSData *data = ...;
NSUInteger capacity = [data length] * 2;
NSMutableString *stringBuffer = [NSMutableString stringWithCapacity:capacity];
const unsigned char *dataBuffer = [data bytes];
NSInteger i;
for (i=0; i<[data length]; ++i) {
  [stringBuffer appendFormat:@"%02X", (NSUInteger)dataBuffer[i]];
} 
```

但是，有一个小问题，如果后面有多余的零，则字符串值会有所不同。例如。如果六进制数据是字符串@“3700000000000000”，则在使用扫描仪转换为整数时：

```
unsigned result = 0;
NSScanner *scanner = [NSScanner scannerWithString:stringBuffer];
[scanner scanHexInt:&result];
NSLog(@"INTEGER: %u",result); 
```

结果将是 4294967295，这是不正确的。不应该是 55，因为只取六边形 37 吗？

那么如何摆脱零点呢？

**编辑：（响应 CRD）**

嗨，感谢您澄清我的疑问。所以你正在做的是直接从字节指针中读取 64 位整数，对吗？不过我还有一个问题。您实际上如何将 NSData 转换为字节指针？

为了让您更容易理解，我将解释我最初所做的事情。

首先，我显示了我拥有的文件的数据（数据是十六进制的）

```
NSData *file = [NSData dataWithContentsOfFile:@"file path here"];
NSLog(@"Patch File: %@",file); 
```

输出：

![在此处输入图像描述](../Images/587443bb8fde846a5d9b2a248f3f35d1.png)

接下来，我读取并偏移文件的前 8 个字节，并将它们转换为字符串。

```
// 0-8 bytes
[file seekToFileOffset:0];
NSData *b = [file readDataOfLength:8];
NSUInteger capacity = [b length] * 2;
NSMutableString *stringBuffer = [NSMutableString stringWithCapacity:capacity];
const unsigned char *dataBuffer = [b bytes];
NSInteger i;
for (i=0; i<[b length]; ++i) {
    [stringBuffer appendFormat:@"%02X", (NSUInteger)dataBuffer[i]];
}
NSLog(@"0-8 bytes HEXADECIMAL: %@",stringBuffer); 
```

如您所见，0x3700000000000000 是接下来的 8 个字节。为了访问接下来的 8 个字节，我必须做的唯一更改是将 SeekFileToOffset 的值更改为 8，以便访问接下来的 8 个字节的数据。

总而言之，您给我的解决方案很有用，但是手动输入十六进制值是不切实际的。如果将字节格式化为字符串然后解析它们不是这样做的方法，那么我如何直接访问数据的前 8 个字节并将它们转换为字节指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:06:41.873

4,294,967,295 是[`ULONG_MAX`](https://stackoverflow.com/questions/2107544/types-in-objective-c-on-iphone)，所以看起来扫描仪只是溢出了。（该`scanHexInt`方法会吃掉它找到的所有六进制数字，并且由于零也是一个六进制数字，因此该方法会吞掉整个数字，越过`ULONG_MAX`.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T09:35:35.573

您似乎正在尝试将存储在 an 中的 8 个字节转换`NSData`为 64 位整数（0x3700000000000000 中有 8 个字节）。

如果这是您的目标，那么通过将字节格式化为字符串然后对其进行解析*不是*这样做的方法。您需要找出数据的*字节序*格式（即最低或最高有效字节优先），然后使用适当的字节序转换函数。

顺便说一句，您获得 4294967295 (0xFFFFFFFF) 的原因是因为您要求`NSScanner`读取 32 位整数并且您的数字 (0x3700000000000000) 溢出。

**对评论的回应**

由于 x86 是 little-endian，您可以通过强制转换直接从字节指针读取 little-endian 64 位整数：

```
Byte bytes[] = { 0x37, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
NSLog(@"%lld", *(int64_t *)bytes); 
```

如果您需要读取 big-endian 数据，那么您可以使用 endian 转换功能，例如`Endian64_Swap`- 它只是翻转您拥有的数据，所以读取然后翻转。

请注意，x86 不需要*对齐*数据访问，但如果对齐，性能会更好。

# linux - 将存储库版本反转为旧版本的 Subversion

> ID：13489350
> 
> 赞同：1
> 
> 时间：2012-11-21T08:43:02.503
> 
> 标签：linux, apache, svn, tortoisesvn

我使用 SVN 存储库有一段时间了，但现在我想将其移至我的托管帐户，因为最近似乎有可能创建自己的 SVN 存储库。这个选项对我来说似乎更好。

但似乎主机上的 SVN 服务器版本比我的存储库旧，因为当我移动所有存储库文件时，我从 TortoiseSVN 收到此错误：

```
SVN Error: Expected fs format '2'; found format '4' 
```

所以我尝试了：

*   将 db/format 文件从“4 layout sharded 1000”更改为“2”
*   将 db/current 文件从“60”更改为“60 nx 2”
*   将修订文件从 db/revs/0/0 移动到 db/revs/0
*   与 db/revprops/ 相同

然后一切似乎工作正常，我能够提交新的更改，进行更新，但是当我尝试在 TSVN 中“显示日志”时，我得到一条信息，它无法连接到存储库并出现错误：

```
Invalid change kind in rev file 
```

我认为这是因为 rev 文件也应该是不同的版本。

所以我的问题是，有没有可能让它再次工作？

提前感谢您的任何答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:17:10.760

看来您还没有尝试过最明显的工具：[svnadmin](http://svnbook.red-bean.com/nightly/en/svn.reposadmin.maint.html#svn.reposadmin.maint.tk.svnadmin)。`svnadmin dump`和的组合`svnadmin load`应该可以解决问题。

此外，[svnrdump](http://svnbook.red-bean.com/nightly/en/svn.reposadmin.maint.html#svn.reposadmin.maint.tk.svnrdump)也很方便。

确保您转储了您没有损坏的存储库版本；-)

**更新：**

由于您正在编辑 repo 文件，因此我假设您具有完全访问权限。您需要 SSH 访问权限（与 Cpanel 无关）。如果您的服务器运行 1.4 或更新版本，您可以简单地使用`svnrdump`. 此外，只需询问支持人员他们提供哪些工具来导入存储库。

# tastypie - 我怎样才能在tastepie中获得登录用户？

> ID：13489352
> 
> 赞同：0
> 
> 时间：2012-11-21T08:43:12.217
> 
> 标签：tastypie, logged

我想在从 Tastypie 中的 ModelResource 派生的类的脱水方法中获取登录用户。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:04:55.483

找到了。bundle中有request对象；

```
def dehydrate(self,bundle):
    logged_user = bundle.request.user
    ...
    return bundle 
```

这工作正常。

# ruby-on-rails - rails 混合 id 和 locale post 参数

> ID：13489353
> 
> 赞同：0
> 
> 时间：2012-11-21T08:43:17.037
> 
> 标签：ruby-on-rails, localization, locale

我的麻烦是我有 2 个控制器（文章和新闻），当我编辑文章时，我的更新被保存到 db。但是当我尝试对新闻做同样的事情时，我得到了这个错误

```
Started PUT "/1" for 127.0.0.1 at 2012-11-21 10:30:17 +0200
Processing by NewsController#index as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OyzVdh0yLz4fGAPwU+tKzuy8B5Wb0exV4+4OjE5UHt8=", "news"=>{"title"=>"fsf", "text"=>"<p>fsdfsfds</p>"}, "commit"=>"Update News", "locale"=>"1"}
1 translation's not available 
```

而且我在代码路由 中没有看到这两个动作之间的任何区别

```
scope '(:locale)' do
  get 'articles/autocomplete_article_title'
  resources :users
  resources :news do
  end
  resources :articles do
  end

# match "/news*tail" => 'news#index'
  root :to => 'News#index', as: 'news'
end 
```

请帮忙！
**提前谢谢了！**

**更新 1**
错误似乎在路由中（因为这是抛出错误的地方

```
 def set_locale_from_params
    if params[:locale]
      if I18n.available_locales.include?(params[:locale].to_sym)
       I18n.locale = params[:locale]
      else
        flash.now[:notice] =
        "#{params[:locale]} translation\'s not available"
        logger.error flash.now[:notice]
      end
    end
  end

  def default_url_options
    {locale: I18n.locale}
  end 
```

**更新 2**
这是发生错误时的参数转储。这里没有 id 字段

```
{"utf8"=>"✓", "_method"=>"put", "authenticity_token"=>"OyzVdh0yLz4fGAPwU+tKzuy8B5Wb0exV4+4OjE5UHt8=", "news"=>{"title"=>"fsf", "text"=>"<p>fsdfsfds</p>"}, "commit"=>"Update News", "controller"=>"news", "action"=>"index", "locale"=>"1"} 
```

**更新 3**
尝试`scope '(:locale)', :locale => /en|ru/ do`在此处设置路线[http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-url-params](http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-url-params)没有帮助。

更新 4
的问题是 form_for 指向 /:id url，它被根路由覆盖。所以将 form_for 更改为`form_for(@news, url: news_path(@news))`并且必须放在本地...搜索如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:38:44.600

在 _form 文件中使用

```
 form_for(@news, url: {action: 'show', id: @news, locale: params[:locale]} ) 
```

为您的表格。像这样它不会被root覆盖

# .net - 通过反射暴露方法的源代码

> ID：13489355
> 
> 赞同：1
> 
> 时间：2012-11-21T08:43:18.267
> 
> 标签：.net, reflection

Stack Overflow 上的几个答案说，无法使用常规反射从 .NET 程序集中获取源代码，我只能访问 IL 代码。

在我的项目中，第三方会将一些基本的 C# 代码写入我创建的项目模板并构建一个 .NET dll。我需要从这些 dll 中提取一些信息。为了收集一些信息，必须调用 dll - 我将对此使用反射。不幸的是，我还需要获取一种特定方法的源代码。

我可以解析cs文件——这不是什么大问题，但我想知道。由于我必须已经使用反射并且项目模板完全在我的控制之下，我可以做一些事情来故意公开部分源代码（也许以某种方式在编译时将其构建到资源或同样古怪的东西）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:54:42.243

既然你提到了一些古怪的东西，你可以从技术上公开一个只是方法文本的属性。这样您就可以使用反射来获取属性值。它可能是一个返回常量的现成属性。如果方法要改变，维护起来会很痛苦，因为你必须在两个地方改变它。

另一种同样古怪的处理方法，它与上面有关，就是使用您在上面创建的字符串属性作为方法文本。然后在您拥有该方法的实际类中，您可以动态获取文本，动态构建并执行它。这解决了在两个地方更改它的问题。然而，这可能是一场性能噩梦，但似乎有可能。

这里有几篇关于如何编译和执行动态代码的示例文章：http: [//www.codeproject.com/Articles/5472/Compiling-NET-code-on-the-fly](http://www.codeproject.com/Articles/5472/Compiling-NET-code-on-the-fly)

[http://www.west-wind.com/presentations/dynamiccode/dynamiccode.htm](http://www.west-wind.com/presentations/dynamiccode/dynamiccode.htm)

# php - 条件 if 是 category.php 和 single.php 上的类别

> ID：13489363
> 
> 赞同：0
> 
> 时间：2012-11-21T08:44:02.190
> 
> 标签：php, html, wordpress

如果用户属于特定类别或属于该类别的 single.php，我正在尝试制作一个仅显示内容的条件。我试过使用这些代码，但都不起作用：

```
<?php if (in_category('catering')) : ?> 
<div class='eventinfo'> 
    <h2>Event Details</h2>
</div>
<?php endif; ?> 
```

和这个：

```
<?php if(is_category('catering')){

<h2>text</h2>

} endif ?> 
```

它似乎什么也没做，任何想法怎么可能是有条件的？

此外，我需要将它放在 category.php 和 single.php 中，以便在属于该类别的单个帖子上也显示内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:54:23.103

试试这个：

```
 <?php if(is_category('catering')){?>

    <h2>text</h2>

<?php }  ?>

<?php if (in_category('catering')) { ?> 
<div class='eventinfo'> 
    <h2>Event Details</h2>
</div>
<?php} ?> 
```

# java - java中的Selenium下拉问题

> ID：13489368
> 
> 赞同：2
> 
> 时间：2012-11-21T08:44:20.483
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我有一个网站，我正在尝试自动化我可以登录并点击其中一个菜单，但是当我点击第三个孩子时我遇到了问题

假设我有一个主菜单，它显示子菜单，单击子菜单它显示第三个菜单，其中有 10 个以自上而下的顺序显示的链接，我点击了我无法执行的第 9 个子菜单。

下面是代码：

```
WebElement myElement1 = driver.findElement(By.xpath("/html/body/form/div[5]/div/div[2]/table/tbody/tr/td[2]/div/div/ul/li/ul/li[2]/span/span/span"));
Actions builder = new Actions(driver);
builder.moveToElement(myElement1).build().perform();
myElement1.click();

WebElement myElement2 = driver.findElement(By.xpath("/html/body/form/div[5]/div/div[2]/table/tbody/tr/td[2]/div/div/ul/li/ul/li[2]/ul/li/span/span/span"));
Actions builder1 = new Actions(driver);
builder1.moveToElement(myElement2).build().perform();
myElement2.click();

WebDriverWait wait = new WebDriverWait(driver, 40);
WebElement ele = driver.findElement(By.xpath("/html/body/form/div[5]/div/div[2]/table/tbody/tr/td[2]/div/div/ul/li/ul/li[2]/ul/li/ul/li[9]/a/span/span"));
System.out.println(ele.getText());

WebElement element = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("/html/body/form/div[5]/div/div[2]/table/tbody/tr/td[2]/div/div/ul/li/ul/li[2]/ul/li/ul/li[9]/a/span/span")));
System.out.println(" about to get enter time sheet" + element.getText());
System.out.println(isElementPresent(By.xpath("/html/body/form/div[5]/div/div[2]/table/tbody/tr/td[2]/div/div/ul/li/ul/li[2]/ul/li/ul/li[9]/a/span/span")));
driver.manage().timeouts().implicitlyWait(2500, TimeUnit.SECONDS);
org.openqa.selenium.Point coordinates = driver.findElement(By.xpath("/html/body/form/div[5]/div/div[2]/table/tbody/tr/td[2]/div/div/ul/li/ul/li[2]/ul/li/ul/li[9]/a/span/span")).getLocation();
System.out.println(coordinates.getX() + " " + coordinates.getY());
WebElement myElement3 = driver.findElement(By.xpath("/html/body/form/div[5]/div/div[2]/table/tbody/tr/td[2]/div/div/ul/li/ul/li[2]/ul/li/ul/li[9]/a/span/span"));
Actions builder3 = new Actions(driver);
builder3.moveToElement(myElement3).build().perform();
myElement3.click(); 
```

最后一个下拉列表是失败的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:40:59.610

为 selenium 2.0 提交了类似的错误并已关闭。请参考 selenium 的最新稳定版本。

让我们参考下面的 2 级菜单下拉菜单。

```
Menu
  Item 1
      SubItem1
      SubItem2
  Item 2 
```

我会建议解决这个问题的两种方法

***方法 1：***从上面的代码中，我看到为 Level1 菜单项和 Level2 菜单项定义了点击事件。而是直接引用2级项目而不点击1级项目，如下图：

```
Menu.click();
Actions Build = new Actions(driver);
Build.moveToElement(Menu).moveToElement(Item1).moveToElement(SubItem2).click().build().perform(); 
```

***方法 2*** JavaScript 方式，尽管它是一种安全的解决方法，可以单击页面上的菜单项。

```
js.ExecuteScript("return $(\"a:contains('Menu')\").mouseover();");
js.ExecuteScript("return $(\"a:contains('Item1')\").next(':eq(1)').mouseover();");
driver.FindElement(By.LinkText("SubItem2")).Click(); 
```

这是一个使用方法 1 的实时示例...（C# 代码片段和亚马逊网站）

```
 IWebDriver driver = new InternetExplorerDriver();
        driver.Navigate().GoToUrl("http://www.amazon.com/gp/goldbox/ref=cs_top_nav_gb27");
        driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(10));

        IWebElement Menu = driver.FindElement(By.Id("nav-bar-inner")).FindElement(By.Id("nav-shop-all-button"));
        Menu.Click();

        IWebElement Item1 = driver.FindElement(By.Id("nav_cat_4"));
        Actions Build = new Actions(driver);
        Build.MoveToElement(Menu).MoveToElement(Item1).Click().Build().Perform();

        IWebElement SubItem = driver.FindElement(By.Id("nav_subcats_4")).FindElement(By.LinkText("Games"));
        Build.MoveToElement(Menu).MoveToElement(Item1).MoveToElement(SubItem).Click().Build().Perform(); 
```

这是亚马逊网站的示例，最初它首先单击顶部菜单，然后单击 Item1 (level1)，然后通过 TopMenu 通过 Level1 单击 Item2

我希望这会有所帮助....一切顺利:)

# java - Graph 的 valueOf 方法

> ID：13489374
> 
> 赞同：0
> 
> 时间：2012-11-21T08:44:49.950
> 
> 标签：java, string, graph

有没有人不得不为来自 toString 方法的 String 的 Graph（使用不同类中的边和顶点）制作 valueOf 方法？我已经为此苦苦挣扎了好几天，无法完成。我只需要一个线索如何做到这一点，不需要任何人为我做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:06:49.470

您可以从[jgrapht库中查看](http://jgrapht.org/)[AbstractGraph](https://github.com/jgrapht/jgrapht/blob/master/jgrapht-core/src/main/java/org/jgrapht/graph/AbstractGraph.java)`toString()`的方法以获得灵感。

# java - Junit @Rule 是如何工作的？

> ID：13489388
> 
> 赞同：220
> 
> 时间：2012-11-21T08:45:39.273
> 
> 标签：java, junit, junit4, junit-rule

我想为大量代码编写测试用例，我想知道 JUnit`@Rule`注释功能的详细信息，以便我可以使用它来编写测试用例。请提供一些好的答案或链接，通过一个简单的示例详细描述其功能。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-11-21T08:53:39.190

规则用于添加适用于测试类中所有测试的附加功能，但以更通用的方式。

例如，[ExternalResource](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/rules/ExternalResource.java)在测试方法之前和之后执行代码，而无需使用`@Before`and `@After`。使用`ExternalResource`而不是`@Before`提供`@After`更好的代码重用机会；可以从两个不同的测试类中使用相同的规则。

设计基于：[JUnit 中的拦截器](https://web.archive.org/web/20130429055253/http://www.threeriversinstitute.org/blog/?p=155)

有关详细信息，请参阅[JUnit wiki：规则](https://github.com/junit-team/junit/wiki/Rules)。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2016-01-05T09:27:33.463

Junit Rules 的工作原理是 AOP（面向方面​​的编程）。它拦截了测试方法，从而提供了在执行特定测试方法之前或之后做一些事情的机会。

以下面的代码为例：

```
public class JunitRuleTest {

  @Rule
  public TemporaryFolder tempFolder = new TemporaryFolder();

  @Test
  public void testRule() throws IOException {
    File newFolder = tempFolder.newFolder("Temp Folder");
    assertTrue(newFolder.exists());
  }
} 
```

每次执行上述测试方法时，都会创建一个临时文件夹，并在执行该方法后将其删除。这是 Junit 提供的开箱即用规则的示例。

类似的行为也可以通过创建我们自己的规则来实现。Junit 提供了 TestRule 接口，可以实现该接口来创建我们自己的 Junit Rule。

这是一个有用的链接供参考：

*   [http://www.codeaffine.com/2012/09/24/junit-rules/](http://www.codeaffine.com/2012/09/24/junit-rules/)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-06-16T19:45:56.313

其工作原理的解释：

JUnit 将您的测试方法包装在一个 Statement 对象 so 语句中并`Execute()`运行您的测试。然后，JUnit 不是`statement.Execute()`直接调用来运行您的测试，而是将 Statement 传递给带有`@Rule`注释的 TestRule。TestRule 的“apply”函数返回一个新的 Statement 给定 Statement 与您的测试。新 Statement 的`Execute()`方法可以调用 test Statement 的 execute 方法（或不调用，或多次调用），为所欲为`before and after`。

现在，JUnit 有了一个新的 Statement，它不仅仅运行测试，它可以在最终调用 Execute 之前再次将它传递给任何更多规则。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-01T16:24:06.840

规则用于以通用方式增强每个测试方法的行为。Junit 规则拦截测试方法并允许我们在测试方法开始执行之前和测试方法执行之后做一些事情。

例如，使用[@Timeout](https://self-learning-java-tutorial.blogspot.com/2018/07/junit-timeout-rule-time-out-for-all.html)规则，我们可以为所有测试设置超时。

```
public class TestApp {
    @Rule
    public Timeout globalTimeout = new Timeout(20, TimeUnit.MILLISECONDS);

    ......
    ......

 } 
```

[@TemporaryFolder](https://self-learning-java-tutorial.blogspot.com/2018/07/junit-temporaryfolder-rule.html)规则用于创建临时文件夹、文件。每次执行测试方法时，都会创建一个临时文件夹，并在方法执行后将其删除。

```
public class TempFolderTest {

 @Rule
 public TemporaryFolder tempFolder= new TemporaryFolder();

 @Test
 public void testTempFolder() throws IOException {
  File folder = tempFolder.newFolder("demos");
  File file = tempFolder.newFile("Hello.txt");

  assertEquals(folder.getName(), "demos");
  assertEquals(file.getName(), "Hello.txt");

 }

} 
```

[您可以在此链接](https://self-learning-java-tutorial.blogspot.com/2018/07/junit-rules.html)中查看 junit 提供的一些内置规则的示例。

# ios - 如何在 iOS 上向本机邮件客户端添加“扩展”？

> ID：13489389
> 
> 赞同：1
> 
> 时间：2012-11-21T08:45:40.470
> 
> 标签：ios, email, native

我上周阅读了一篇文章，其中解释了赛门铁克即将发布一个应用程序，该应用程序将成为 iOS 本地邮件客户端的扩展（这里是参考：http: [//goo.gl/xsIiC](http://goo.gl/xsIiC)）。

那篇文章的相关句子：

> 它作为 Apple iOS 邮件客户端的扩展来加密和解密文档。

我的问题是：在未越狱的 iPhone 上怎么可能？我们在 iOS 原生邮件程序上唯一能做的（如果我没记错的话）就是准备一封电子邮件（带有正文、附件等）并将应用程序与可以从邮件程序接收的文件扩展名相关联.

你知道他们在说什么吗？它只是商业的东西，还是你认为他们有办法做这样的扩展？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:51:34.167

请记住，赛门铁克是一家相当大的公司，而且离苹果园区不远。副总裁和/或高管甚至可能一起打高尔夫球。

无论如何，赛门铁克可以访问像您或我这样的普通 peon 开发人员无法访问的私有 API 或资源。赛门铁克要么通过 App Store 发布一个应用程序（Apple 的审阅者将自动批准和祝福），要么扩展程序将被合并并包含在未来版本的 iOS 中。

如果您想要 Apple Mail 的扩展功能，请通过[http://bugreporter.apple.com](http://bugreporter.apple.com)提交错误，如果有足够多的开发人员要求，Apple 更有可能公开赛门铁克用于扩展 Mail.app 功能的 API .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:28:34.840

检查此[iOS 文档交互编程主题：注册您的应用程序支持的文件类型](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1)。

> 如果您的应用程序能够打开特定类型的文件，您应该向系统注册该支持。这允许其他应用程序通过 iOS 文档交互技术为用户提供将这些文件移交给您的应用程序的选项。
> 
> 要声明其对文件类型的支持，您的应用程序必须在其 Info.plistproperty 列表文件中包含 CFBundleDocumentTypes 键。（请参阅“核心基础密钥”。）系统将此信息添加到其他应用程序可以通过文档交互控制器访问的注册表中。

因此，如果您在 Info.plist 中提供您的文档类型，其他识别该文档类型的应用程序应在其打开选项中列出您的应用程序。可能这就是赛门铁克的目标。我们可能会尝试在邮件应用程序中打开某些文件类型，以启动赛门铁克的应用程序或类似的东西。他们可能会将该应用程序称为邮件应用程序的扩展。

# ant - org.programmerplanet.ant.taskdefs.jmeter.Arg 类中没有公共的 execute()

> ID：13489391
> 
> 赞同：0
> 
> 时间：2012-11-21T08:45:50.837
> 
> 标签：ant, jenkins, jmeter

需要有关上述错误的帮助。
当我尝试将参数从 jenkins 传递给 ant 时，出现以下错误：

```
"No public execute() in class org.programmerplanet.ant.taskdefs.jmeter.Arg" 
```

由于我是 jenkins ant 集成的新手，所以我不太了解。
任何建议都会有很大帮助。

我的蚂蚁脚本是：

```
<project basedir=".">

    <property environment="env"/>
    <property name="jmeter-home" location="D:/apache-jmeter-2.7"/>
    <property name="THREADS" value="${env.THREADS}"/>

    <path id="ant.jmeter.classpath">
        <pathelement location="${jmeter-home}/extras/ant-jmeter-1.0.9.jar" />
    </path>

    <taskdef
        name="jmeter"
        classname="org.programmerplanet.ant.taskdefs.jmeter.JMeterTask"
        classpathref="ant.jmeter.classpath" />
    <taskdef 
        name="jvmarg" 
        classname="org.programmerplanet.ant.taskdefs.jmeter.Arg" 
        classpathref="ant.jmeter.classpath"/>

    <target name="clean">
       <delete dir="results"/>
       <delete file="jmeter.log"/>
       <mkdir dir="results/jtl"/>
       <mkdir dir="results/html"/>
   </target>

   <target name="Product" depends="clean" >
       <jmeter jmeterhome="d:/apache-jmeter-2.7"
               resultlogdir="results/jtl"
               testplan="D:\Program Files\....\Test.jmx" />
       <jvmarg value ="-DTHREADS"/>
       <xslt
           in="${basedir}/results/jtl/Test.jtl"
           out="${basedir}/results/html/Test.xml"
           style="${jmeter-home}/extras/jmeter-results-report_21.xsl"/>
   </target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:31:57.187

看起来你没有额外定义`jvmarg`taskdef。

1.  您已声明 THREADS 的属性：

    > ```
    > <property name="THREADS" value="${env.THREADS}"/> 
    > ```

2.  另外在`jmeter`任务集中

    > ```
    > <property name="jmeter.threads" value="${THREADS}"/> 
    > ```

3.  在 ant 的命令行中设置所需的线程数：

    > ```
    > ant -f build.xml -DTHREADS=N 
    > ```

您也可以使用[`jmeterarg`嵌套元素](http://www.programmerplanet.org/pages/projects/jmeter-ant-task.php)：

> **jmeterarg**用于指定额外的 JMeter 命令行参数。唯一的属性是价值。

# hadoop - 从 Pig Latin 中的组操作中获取过滤后的元组

> ID：13489392
> 
> 赞同：0
> 
> 时间：2012-11-21T08:45:52.777
> 
> 标签：hadoop, apache-pig

我有一些交易数据，比如

txn_id、receiver_userid、sender_userid、金额

1,1,2,50

2,1,2,100

3,1,2,500
4,5,3,100
5,5,3,200
6,5,3,300
7,6,2,200

8,6,1,200

现在我想找到从另一个用户收到超过 2 笔交易的所有接收者用户，我已经开始将我的 PIG 工作写为

```
txnrecord = LOAD './txndata' USING PigStorage(',') AS (txn_id:int, receiver_userid:int, sender_userid:int, amount:int);
grptxn1 = GROUP txnrecord BY (receiver_userid, sender_userid);
txncount = FOREACH grptxn1 GENERATE FLATTEN(group) as (receiver_userid, sender_userid), COUNT(txnrecord) as num_txns, SUM(txnrecord.amount) as total_sum;
txncount1 = FILTER txncount by num_txns > 2;
dump txncount1; 
```

以上是给我正确的组聚合，但我的额外要求是

1) 找到聚合组记录及其关联的元组集（单个 txns），例如 - 如果我的组聚合说用户 ID 1 收到来自用户 ID 2 的 3 个事务，我需要将所有三个元组存储在另一个数据文件中。

2）组聚合不匹配> 2个事务条件应该被忽略（这里最后两条记录应该被忽略）

3）我想为我的组聚合分配序列，并且应该将相同的序列用作它们关联的事务元组中的链接键（以识别这三个事务记录与特定的组聚合相关联）。

我正在尝试使用各种功能，但到目前为止还没有运气。

感谢您提供任何帮助指针，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:06:08.077

您可以携带由 GROUP BY 创建的 BAG，它们包含所有原始列，以进行检查

```
DESCRIBE grptxn1; 
```

要回答要求 1 和 2：

```
txnrecord = LOAD './txndata' USING PigStorage(',') AS (txn_id:int, receiver_userid:int, sender_userid:int, amount:int);
grptxn1 = GROUP txnrecord BY (receiver_userid, sender_userid);
txncount = FOREACH grptxn1 GENERATE FLATTEN(group) as (receiver_userid, sender_userid), 
txnrecord, -- carry bags through the filter
COUNT(txnrecord) as num_txns, SUM(txnrecord.amount) as total_sum ;
txncount1 = FILTER txncount by num_txns > 2;
tran_dump = FOREACH  txncount1 GENERATE FLATTEN(txnrecord);
STORE tran_dump INTO 'another data file';

txncount2 = FOREACH txncount1 GENERATE (receiver_userid, sender_userid, num_txns, total_sum);
dump txncount2; 
```

要求 3 在 MapReduce 中是不容易做到的，如果不让它变得非常慢或使用一些网络 ID 代理。可能您不需要它，因为 FLATTEN(txnrecord) 将转储输入文件中存在的所有列。

# algorithm - 20 个元素的排列，满足一定的规则

> ID：13489395
> 
> 赞同：2
> 
> 时间：2012-11-21T08:46:07.083
> 
> 标签：algorithm, permutation, combinations, pascal

我必须找到满足某些规则的 20 个元素的所有可能排列。例如，元素 1 永远不能位于位置 3、4、6、7、8、12 和 17，元素 2 永远不能位于位置 1、2、7、10、19 等等。目前，我正在使用一个递归函数，该函数遍历所有可能的排列并检查规则是否得到满足。这适用于 10 个元素（10 个！排列），但正如您可以想象的那样，该算法不再适用于 20 个元素。有谁知道跳过不需要的排列的更有效的方法？（我假设，从 20！=2.4E18 可能的排列中，只有 1-2 Mio。将满足规则。

这就是我现在使用的（帕斯卡代码）：

```
 procedure permu(p:feldtyp; ka:bereich); 
 var
   i,h : bereich; 
 label skip;
 begin 
   if ka=teams then begin 

    //execute certain tests, skip the output part if the tests fail 
    for i:=1 to ka do if ((hh11[P[i]]+hh21[i])<>(ka-1)) or 
      ((patterns[h1[P[i]]][teams-1]=patterns[h2[i]][1]) and ((patterns[h1[P[i]]][teams-1]=patterns[h1[P[i]]][1])=(patterns[h2[i]][teams-1]=patterns[h2[i]][1]))) or 
      ((patterns[h1[P[i]]][teams-1]<>patterns[h2[i]][1]) and ((patterns[h1[P[i]]][teams-1]=patterns[h1[P[i]]][1])<>(patterns[h2[i]][teams-1]=patterns[h2[i]][1]))) or 
      ((patterns[h1[P[i]]][teams-1]<>patterns[h2[i]][1]) and ((patterns[h1[P[i]]][teams-1]=patterns[h1[P[i]]][1]) and (patterns[h2[i]][teams-1]=patterns[h2[i]][1]))) or 
      ((patterns[h1[P[i]]][teams-1]=patterns[h2[i]][1]) and ((patterns[h1[P[i]]][teams-2]=patterns[h1[P[i]]][teams-3]) or (patterns[h2[i]][2]=patterns[h2[i]][3]))) or 
      ((patterns[h1[P[i]]][teams-1]=patterns[h1[P[i]]][teams-2]) and (patterns[h2[i]][1]=patterns[h2[i]][2])) 
    then goto skip; 

    //all tests passed, write permutation
    // ...
    skip:
  end 
  else begin 
    for i := ka to teams do begin 
      h := P[i]; 
      P[i] := p[ka]; 
      P[ka] := h; 
      permu(p, ka+1); 
    end;
  end;
end; 
```

（“teams”是常数 20，“h1”、“h2”是在其他地方定义的一些数组 [1..20]。此外，定义了一个全局二维数组“patterns”，用于导出规则。这个数组可以看成一个n行19列的大0-1矩阵）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:31:48.307

`n!`远不接近多项式，因此您的执行时间将随着时间的推移而急剧`n`增加。如果在“哪些数字可以/不能去哪个插槽”上有某种模式，那么你可以通过使用它的结构来改进算法，但你的问题听起来不是这样。

可能有一些帮助。首先，迭代要放置的数字 - 而不是要填充的插槽：

对于每个数字`1, .., n`，使用它们可以进入的插槽的链接列表。例如。数字 3 只能进入插槽 3、16、7、6——这就是 n=3 的链表。

维护所有`n`元素的“中央”数组（直接访问）。每当您将一个数字（例如 x）放入插槽 p 时，您都会反转该中央数组的第 p 个元素。

对您的数字进行排序`n`，以便列表顶部是可以进入最少插槽数的数字，而底部是可以进入最多插槽数的数字。

从列表顶部的数字开始，并继续使用这些链接列表进行排列——将数字放置到未填充的插槽中。这为您提供了最佳但指数时间的解决方案。问题是指数级的。

您还可以使用子优化算法在多项式时间内运行，但不一定允许所有排列。

# javascript - 按类名计数 onclick 项目

> ID：13489397
> 
> 赞同：1
> 
> 时间：2012-11-21T08:46:12.100
> 
> 标签：javascript, getelementbyid, getelementsbyclassname

我想创建一个 eshop 购物篮.. 所以我想在按下购买按钮时计数物品。我尝试使用 getElementById 并简单地在我的篮子中调用 id 的名称。

--

```
<script type="text/javascript">
    var index = 0;
</script> 
```

在顶部的某个地方-----

```
<div>items :<input type="text" id="tb" style="width: 20px; color:green; font-weight:bold; border:none; background: none; margin-left:20px;"/></div> 
```

当我按下购买按钮时--------

```
<input  name="button" type="submit" value="add to basket" onClick="index = index + 1;document.getElementById('tb').value = index;" /> 
```

所以这是可行的..但知道我想复制篮子并在页面中两次（在顶部和最后）所以如果我尝试再次调用相同的 id 它只是不起作用（导致唯一性身份证）。我想我应该使用类名 istead 但我不知道如何..

我对 js 很陌生，希望有一个解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:52:39.173

您可以复制`document.getElementById('tb').value = index`并使用第二个（唯一）ID。或者你迭代`documnet.getElementsByName('elementsname')`，但你`input`必须有一个`name`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:57:44.737

使用类而不是 id：

```
<div>items :<input type="text" class="tb" style="width: 20px; color:green; font-weight:bold; border:none; background: none; margin-left:20px;"/></div> 
```

然后遍历具有该类的项目：

```
function tb_increment() {
    index++;
    tbs = document.getElementsByClassName("tb");
    for (var i = 0; i < tbs.length; i++) {
        tbs[i].value = index;
    }
} 
```

然后在您的点击处理程序中使用此函数：

```
<input  name="button" type="submit" value="add to basket" onClick="tb_increment();" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T08:52:54.833

试试这个示例代码模式：

```
$(".class").each(function(){ index++; });
$("#tb").val(index); 
```

# bash - 在 Unix 中使用 shell 脚本删除超过 10 天的文件

> ID：13489398
> 
> 赞同：153
> 
> 时间：2012-11-21T08:46:13.470
> 
> 标签：bash, shell, unix, find

我是shell脚本的新手，有人可以帮忙吗？我想删除文件夹中从当前日期回溯到 10 天的脚本。脚本如下所示：

```
2012.11.21.09_33_52.script
2012.11.21.09_33_56.script
2012.11.21.09_33_59.script 
```

该脚本将使用 Crontab 每 10 天运行一次，这就是我需要当前日期的原因。

* * *

## 回答 #1

> 赞同：488
> 
> 时间：2012-11-21T08:54:10.213

`find`是此类任务的常用工具：

```
find ./my_dir -mtime +10 -type f -delete 
```

**解释**

*   `./my_dir`您的目录（替换为您自己的）
*   `-mtime +10`超过 10 天
*   `-type f`只有文件
*   `-delete`没有惊喜。**在执行整个命令之前****将其删除以测试您的过滤器`find`**

并注意`./my_dir`存在以避免糟糕的惊喜！

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-07-26T11:57:07.283

只需添加上面的 shell 脚本以删除旧文件，但会记录和计算经过的时间

```
#!/bin/bash

path="/data/backuplog/"
timestamp=$(date +%Y%m%d_%H%M%S)    
filename=log_$timestamp.txt    
log=$path$filename
days=7

START_TIME=$(date +%s)

find $path -maxdepth 1 -name "*.txt"  -type f -mtime +$days  -print -delete >> $log

echo "Backup:: Script Start -- $(date +%Y%m%d_%H%M)" >> $log

... code for backup ...or any other operation .... >> $log

END_TIME=$(date +%s)

ELAPSED_TIME=$(( $END_TIME - $START_TIME ))

echo "Backup :: Script End -- $(date +%Y%m%d_%H%M)" >> $log
echo "Elapsed Time ::  $(date -d 00:00:$ELAPSED_TIME +%Hh:%Mm:%Ss) "  >> $log 
```

代码添加了一些东西。

*   以时间戳命名的日志文件
*   指定的日志文件夹
*   find 仅在日志文件夹中查找 *.txt 文件
*   类型 f 确保您只删除文件
*   maxdepth 1 确保您不输入子文件夹
*   超过 7 天的日志文件将被删除（假设这是用于备份日志）
*   注意开始/结束时间
*   计算备份操作的经过时间...

**注意**：要测试代码，只需使用 -print 而不是 -print -delete。但是请仔细检查您的路径。

**注意**：请确保您的服务器时间通过 date-set timezone/ntp 正确设置。另外使用“stat 文件名”检查文件时间

**注意**：mtime 可以替换为 mmin 以获得更好的控制，因为 mtime 在处理在天的上下文中获取文件的时间戳时会丢弃所有分数（早于 2 天（+2 天）实际上意味着 3 天）

```
-mtime +$days  --->  -mmin  +$((60*24*$days)) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-21T08:50:18.350

如果你能负担得起通过文件数据工作，你可以做

```
find -mmin +14400 -delete 
```

# android - 如何将监听器附加到我的 DroidGap？

> ID：13489402
> 
> 赞同：2
> 
> 时间：2012-11-21T08:46:23.213
> 
> 标签：android, cordova, listener

我在源代码中使用技术 DroidGap

```
public class MainActivity extends DroidGap {
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");

}
} 
```

**Activity**没有使用，在 "super.loadUrl(super.loadUrl("file:///android_asset/www/index.html");" 之后我完全使用网络

**我要……不管现在打开什么网页，当我点击屏幕时，启动这个监听器 **

```
View.OnClickListener activityLauncher = new View.OnClickListener() {

        public void onClick(View arg0) {

        }
    }; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:34:01.543

创建一个外部 javascript 文件，在其中写入以下代码：

```
<script>
document.getElementByTagName("body").addEventListener('touchstart',touchPagePressed);// you can use 'onclick' also
function touchPagePressed()
{
   MyAndroid.performClick();
   alert(touchPagePressed');
}
</script>
```

在每个 html 页面中包含该外部 js 文件。

在此之后，在您的 onCreate 方法中编写以下代码：

```
public class MainActivity extends DroidGap {
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");

        WebView webView = (WebView) findViewById(R.id.webView);
        WebSettings webSettings = webView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webView.addJavascriptInterface(new Object()
             {
                public void performClick()
                {
                   // Deal with a click on the body tag
                }
             },"MyAndroid");
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:25:59.557

```
@Override
    public boolean dispatchTouchEvent(MotionEvent e) {
        super.dispatchTouchEvent(e);

        return true;
    } 
```

# android - Android webservice 获取参数

> ID：13489407
> 
> 赞同：0
> 
> 时间：2012-11-21T08:47:03.193
> 
> 标签：android, web-services, ksoap2

**我的网络服务**

```
public int GetWayBillBySachetID( int version, string encryptedJsonIn, out string encryptedJsonOut )
{
  // some codes
  return number;
} 
```

**安卓**

```
SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,
                OPERATION_NAME);
request.addProperty("version", "100");
request.addProperty("encryptedJsonIn", object.toString());
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
HttpTransportSE httpTransport = new HttpTransportSE(
SOAP_ADDRESS);
httpTransport.call(SOAP_ACTION, envelope);
Object response = envelope.getResponse();
} 
```

我的网络服务工作正常，但我无法获取 out 参数。当我检查响应时，它只包含返回值而不是输出参数。我怎样才能得到输出参数。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:04:52.693

这是参数问题。代码没有错。谢谢。

# google-chrome - 如何单击具有相同 ID 的按钮？

> ID：13489410
> 
> 赞同：1
> 
> 时间：2012-11-21T08:47:26.157
> 
> 标签：google-chrome, cucumber, watir-webdriver

我有两个具有相同 ID 的按钮（一切都相同）。如果我点击它，它会自动选择第一个按钮，但我需要点击第二个或第三个。

```
@b.link(:id => "commit").click 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:48:10.043

`id`在页面上应该是唯一的，您应该将此报告为错误。

同时，要单击第二个链接，请`id`尝试以下操作：

```
@b.a(:id => "commit", :index => 1).click 
```

点击第三个：

```
@b.a(:id => "commit", :index => 2).click 
```

顺便说一句，您可以单击第一个：

```
@b.a(:id => "commit", :index => 0).click 
```

# azure - 如何在 iOS 设备和 Windows 中使用 Windows Azure 媒体服务编码的 ism 文件来平滑流？

> ID：13489412
> 
> 赞同：1
> 
> 时间：2012-11-21T08:47:31.937
> 
> 标签：azure

我有一个名为 Spiderman.mp4 的视频，我使用他们的 Web UI（不是控制台应用程序）将其上传到 Windows Azure 媒体服务。我还使用 Web UI 将视频编码为预设的“iOS 和 PC/MAC 播放”。发布后，我得到的 URL 为

[http://azure-something.net/Spiderman.ism/Manifest](http://azure-something.net/Spiderman.ism/Manifest)

如何将此清单文件平滑流式传输到 iOS 和 PC？为此，我在 Windows 上使用了 Silverlight Smooth Streaming 播放器，但它不适用于 iOS。

在这方面的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:30:37.610

您必须将视频文件编码为 Apple HTTP Live Streaming (HLS) 。结帐[https://www.windowsazure.com/en-us/develop/net/how-to-guides/media-services/#header-12](https://www.windowsazure.com/en-us/develop/net/how-to-guides/media-services/#header-12)

您似乎正在将视频文件转换为 IIS 平滑流，这证明了它仅适用于 Silverlight 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T12:49:32.507

您必须将清单文件编码为苹果 HLS（Http Live Streaming）内容，您将能够在 ios 上查看它。

# java - 检查字符串是否有特定的单词

> ID：13489419
> 
> 赞同：1
> 
> 时间：2012-11-21T08:48:03.830
> 
> 标签：java, string

My`String words`包含一堆由 a 分隔的单词`\n`（并以 a 结尾`\n`）。代码将单词添加到字符串中，仅当单词不存在时。这些代码块在一个`for`循环中，`w`是要添加的单词。

我有

```
loop: if (w.contains("" + letter)) //This is just to test the words I want to add
{
  for (String s : words.split("\n"))
    if (w.equals(s))
      break loop;
  words += w + "\n";
} 
```

和

```
if (w.contains("" + letter))
{
  if (!words.contains("\n"+w+"\n") && words.indexOf(w+"\n") != 0)
    words += w + "\n";
} 
```

但两者似乎都以自己的方式混乱。有没有另一种方法可以解决这个问题，或者哪种方法执行得更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:54:51.760

首先，`if`不是循环。因此，标记它并使用标记中断是没有意义的。

其次，你的两个代码都没有真正做你说你想做的事情。另外，我不明白你为什么要做`if (w.equals(s))`这个测试。`w`以及用于什么。

你说： - `w being the word to add`，但你又说`"\n"`，如果它不在你的`array`. 因此，您要添加许多单词，而不仅仅是一个单词。请重新阅读您的帖子，并在必要时对其进行编辑。

* * *

根据您当前的问题陈述，我会这样处理：-

*   首先拆分您的行`"\n"`以获得包含单个单词的数组。
*   我宁愿使用`StringBuilder`或者`StringBuffer`如果我想在每次迭代中修改我的字符串。
*   现在，在每次迭代中，检查您是否`StringBuilder`已经包含该`word`. 如果它不包含，则附加它，否则保留它。
*   在循环结束时，打印您的`StringBuilder`实例。

* * *

或者，正如您所说，您也可以使用 an`ArrayList`来存储您的单词。或者，如果你`unique`只想要单词，你应该使用 a`Set`来代替。那将不需要您进行测试。它自己处理重复项：-

```
List<String> wordList = new ArrayList<String>();

Set<String> set = new LinkedHashSet<String>();

for (String s : words.split("\n")) {

    if (s.contains("" + letter)) {

        if (!wordList.contains(s)) {
            wordList.add(s);   // Add to list. 
        }
        set.add(s);   // Add to set.
    }
} 
```

然后通过迭代其中任何一个来打印您的`ArrayList`或。`Set`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T05:26:37.950

// 如果你试图在字符串中找到一个单词/特定单词，这段代码肯定会帮助你..

公共类 findWordFromString {

```
public static void main(String[] A)
{
    String str = "Manhattan is a great company";
    String search = "great";
    boolean flag= false;

// here first split or break the string,based on the space present btween each word
    String[] arr = str.split(" "); 
      for(int i=0;i<arr.length;i++)
     {

        if(arr[i].**equals**(search)) // here,never use == instead of equals()  
        {
          flag = true;
            break;
        }
     }//for loop

        if(flag)
        {
           System.out.println(search+" is present");    
        }else
        {
            System.out.println(search+" is not present");
        }
}//method 
```

}//班级

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:02:19.483

我会将您添加的不同单词存储在列表中；

```
List<String> words = new ArrayList<String>();

void addWord(String word){
    if(!words.contains(word)){
        words.add(word);
    }
}

String listAsString(){
    StringBuilder buffer = new StringBuilder();
    for(String word: words){
        buffer.append(word);
        buffer.append("\n");
    }
    return buffer.toString();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T09:06:30.723

我建议使用列表

```
ArrayList<String> wordList = new ArrayList() ;
// to add
if (w.contains("" + letter) && wordList.contains(w) )
{
   wordList.add(w);
}
//at the end you can append \n
StringBuilder bdr = new StringBuilder() ;
for(String word : wordList)
{
     bdr.append(word).append("\n");
}
String words = bdr.toString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T08:59:24.227

您可以使用

```
Set<String> words = LinkedHashSet<String>();

if (words.add("" + letter)) {
    // Added.
} 
```

它保持添加单词的顺序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T13:52:35.223

或者简单地说，

```
public static void main(String[] args) {
String test = "test";
String test2 = "st";
if (test.contains(test2)) System.out.println("String found");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-21T08:57:39.520

如何将单词存储在 ArrayList 中并在添加之前检查 ArrayList 是否包含该单词？如果顺序不重要，则使用 Set。

使用集合会容易得多，然后您可以在需要显示它时将其转换为字符串。例如：

```
List wordList = new ArrayList();

public void addWord(String word){
    if(!wordList.contains(word)){
        wordList.add(word);
    }
}

public String displayWordsAsString(){
    StringBuilder builder = new StringBuilder();
    for(int i = 0; i < wordList.size(); i++){
        //add this condition if you only want a new line between words and not every time.
        if(i > 0)
            builder.append("\n");

        builder.append(word); 
    }

    return builder.toString();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-21T09:18:59.857

这是在字符串中查找特定单词的快速方法。无需拆分和循环。

```
public static void main(String[] args) {
      String w = "This\nis\nTesting\nString\nthat\ncontains\nHelloWorld\n";
      String searchingWord = "HelloWorld";
      Pattern pattern= Pattern.compile("("+searchingWord+")");
      Matcher matcher = pattern.matcher(w);
      if(!matcher.find())
      {
         System.out.println("Word Not Found");
      }else
      {
         System.out.println("Word Found");
      }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-21T09:40:31.287

如果您检查是否包含新单词并且分隔符是 \n 那么您将需要正则表达式。仅依靠 contains 不会添加现有单词的子序列的单词。

```
public class AddWords {

    public String addWord(final String newWord, final String allWords) {
        String result = allWords;
        Pattern p = Pattern.compile(".*\n" + newWord + "\n.*");
        Matcher m = p.matcher(allWords);
        if (!m.find()) {
            StringBuffer buf = new StringBuffer();
            buf.append(allWords);
            buf.append(newWord);
            buf.append("\n");
            result = buf.toString();
        }
        return result;
    }
} 
```

为了更好地理解此事，我为该场景添加了一个单元测试：

```
public class AddWordsTest {
    @Test
    public void addExistingWord() {
        String allWords = "\nfoo\nbar\n";
        String notNewWord = "foo";
        AddWords aw = new AddWords();
        String newAllWords = aw.addWord(notNewWord, allWords);
        Assert.assertEquals(allWords, newAllWords);
    }

    @Test
    //This would fail if you rely on contains!!!
    public void addNewWord() {
        String allWords = "\nfoobar\nbar\n";
        String newWord = "foo";
        AddWords aw = new AddWords();
        String newAllWords = aw.addWord(newWord, allWords);
        String expectedAllWords = "\nfoobar\nbar\nfoo\n";
        Assert.assertEquals(expectedAllWords, newAllWords);
    }
} 
```

# c# - 如何将设计器用于继承的用户控件？

> ID：13489421
> 
> 赞同：1
> 
> 时间：2012-11-21T08:48:04.470
> 
> 标签：c#, visual-studio-2010, windows-forms-designer

我尝试将设计器用于继承的用户控件，不幸的是没有成功。

![我的设置](../Images/1c3e41df119634d086cfd03073a4b14f.png)

我的问题是，我无法`ConcreteWizardTemplate`按预期设计。它在`AbstractWizardElement`从 a 派生时完美无瑕`Form`，但即使不是从`UserControl`. 如果我`ConcreteWizardTemplate`用设计师打开我的，我可以从工具箱中添加组件，尽管我不能设计或设计它们。

```
#if DEBUG
    public class AbstractWizardElement : UserControl
    {
         ..
    }
#else
    public abstract class AbstractWizardElement : UserControl
    {
         ..
    }
#endif 
```

`AbstractWizardElement`当调试模式打开时，有一个编译器开关，将 定义为普通类。

![我的问题](../Images/d30281fd72931501d6013a05f80b3b70.png)

我怎样才能`ConcreteWizardTemplate`像我一样设计一个继承自 a 的元素`Form`？

我的环境是带有 C#.net 4.0 的 Visual Studio 2010。

# git - 使用 git 在 Drupal 网站上的分支之间切换

> ID：13489423
> 
> 赞同：0
> 
> 时间：2012-11-21T08:48:07.757
> 
> 标签：git, drupal, version-control

所以我在一个 Drupal 网站上工作，我想开始使用 git 在不破坏旧实现的情况下使用不同的实现功能的方式（以防新方式被证明是垃圾）。

假设我从服务器（安装了 Drupal 的同一台服务器）上的存储库中拉出 master，然后创建一个新分支 feature1，然后决定从名为 feature1b 的分支创建另一个分支，该分支以不同的方式实现。为了测试我的代码，我需要它在安装了 Drupal 的服务器上，所以我必须将我的分支提交回服务器上的 master。

将两个分支推送到服务器的最佳方法是什么，而不会将它们合并到 master*并且*能够在它们之间切换以进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:59:47.223

你要问的是：

> 如何将更改推送到远程服务器上的新分支？

答案是：

```
git push <your remote name> feature1 
```

这将在您的远程（Drupal）服务器上创建分支 feature1，然后您可以查看它并查看它是如何工作的

# iphone - 如何从 iPhone 中的 NSString 中删除某些字符？

> ID：13489428
> 
> 赞同：0
> 
> 时间：2012-11-21T08:48:35.780
> 
> 标签：iphone, objective-c, ios, replace, nsstring

```
NSString *Address = [placemark.addressDictionary objectForKey:@"FormattedAddressLines"];
NSLog(@"Address:%@", Address);
Address: ("Hooker Alley","San Francisco, CA 94108",USA) 
```

我想从地址字符串中删除一些字符，例如 Hooker Alley, San Francisco, CA 94108,USA。怎么去掉这样的？请帮我

提前致谢

我试过这个：

```
NSString *removeCharacter = [Address stringByReplacingOccurrencesOfString:@"(" withString:@""]; 
```

但是错误出现在 First throw 调用堆栈中：

错误信息是，

```
-[__NSArrayM stringByReplacingOccurrencesOfString:withString:]: unrecognized selector sent to instance 0x81afd00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:56:09.680

尝试这个，

```
NSArray *addressArray = [placemark.addressDictionary objectForKey:@"FormattedAddressLines"];
NSString *address = [addressArray componentsJoinedByString:@", "];
NSLog(@"Address:%@", address); 
```

在您的情况下，`[placemark.addressDictionary objectForKey:@"FormattedAddressLines"]`返回一个数组而不是单个字符串。您可以尝试将这些数组组件连接为单个字符串，如上所示。或者，您也可以检查

```
id object = [placemark.addressDictionary objectForKey:@"FormattedAddressLines"];
if([object isKindOfClass[NSArray class]]) {
  //handle as above
} else if([object isKindOfClass[NSString class]]) {
  //use your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:53:23.057

你可以像这样删除：-

```
 NSString *s = @"$$$hgh$g%k&fg$$tw/-tg";
    NSCharacterSet *doNotWant = [NSCharacterSet characterSetWithCharactersInString:@"-/:;()$&@\".,?!\'[]{}#%^*+=_|~<>€£¥•."];
    s = [[s componentsSeparatedByCharactersInSet: doNotWant] componentsJoinedByString: @""];

    NSLog(@"String is: %@", s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:00:52.597

```
 NSArray *Address=[placemark.addressDictionary objectForKey:@"FormattedAddressLines"];
     NSLog(@"Address:%@",Address);

     NSMutableString *myString = [[NSMutableString alloc]init];

    for(int i = 0 ; i < [Address count] ; i++){
    [myString appendString:[Address objectAtIndex:i]];

    if (i < [Address count]  ){
    [myString appendString:@","];
       }
 }

NSLog(@"%@",myString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:56:18.047

使用如下方式检查输出`addressDictionary objectForKey`提供的内容`isKindOfClass`：

```
if([[placemark.addressDictionary objectForKey:@"FormattedAddressLines"] isKindOfClass[NSArray class]])
{

  NSArray *address=[placemark.addressDictionary objectForKey:@"FormattedAddressLines"];
  NSLog(@"Address:%@",Address);
  NSString *str = [address componentsJoinedByString: @","]
  NSLog(@"str:%@",str);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T08:56:33.507

试试这个......它会帮助你

```
 NSString *unfilteredString = @"!@#$%^&*()_+|abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
NSCharacterSet *notAllowedChars = [NSCharacterSet characterSetWithCharactersInString:@"1234567890"];
NSString *resultString = [[unfilteredString componentsSeparatedByCharactersInSet:notAllowedChars] componentsJoinedByString:@""];
NSLog (@"Result: %@", resultString); 
```

# c# - 查询正文必须以 select 子句或 group 子句结尾，为什么这里会出错？

> ID：13489436
> 
> 赞同：14
> 
> 时间：2012-11-21T08:49:16.683
> 
> 标签：c#, .net, linq

我的 linq 语句有什么问题，我做错了什么？

```
if (this.selectLBU.HtUsers.Any())
{
    reportRowItems = (from r in reportRowItems
                      from bu in r.User.HtBusinessUnits
                      where bu.LocationBusinessUnitId == selectLBU.LocationBusinessUnitId).ToList(); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-21T08:50:22.780

您需要添加 select 子句来告诉您需要从查询中获得哪些数据。这篇[**msdn 文章**](http://msdn.microsoft.com/en-us/library/bb397927.aspx)描述了基本的查询操作和结构。

```
 reportRowItems = (from r in reportRowItems
                   from bu in r.User.HtBusinessUnits
                   where bu.LocationBusinessUnitId == selectLBU.LocationBusinessUnitId 
                   select r 
                  ).ToList(); 
```

要获得两个表的组合，您可以使用投影。

```
reportRowItems = (from r in reportRowItems
                   from bu in r.User.HtBusinessUnits
                   where bu.LocationBusinessUnitId == selectLBU.LocationBusinessUnitId 
                   select new {r.AttributeName1, r.AttributeName2, bu.AttributeName1}
                  ).ToList(); 
```

# css - !important 还是 !notimportant 在 IE6 和 7 中？

> ID：13489438
> 
> 赞同：2
> 
> 时间：2012-11-21T08:49:21.777
> 
> 标签：css, internet-explorer

我的一个朋友说，`!`在层叠样式表中的键之后使用什么词并不重要，它仍然会增加额外的重量，只要它是 Internet Explorer 6 或 7。

这意味着我可以写作`!notimportant`并且它仍然被认为是重要的。我对这个线程的问题是：**这是真的吗？**

我不能自己尝试，因为我没有任何 Windows 机器（不在工作或家里）。不过知道会很有趣。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:52:21.460

那是对的。IE6/IE7 错误地将`!`后跟任何标识符和空格视为`!important`标记，而不是完全忽略声明。一些参考资料：

*   [http://www.javascriptkit.com/dhtmltutors/csshacks3.shtml](http://www.javascriptkit.com/dhtmltutors/csshacks3.shtml)
*   [Bang IE7 - 这是什么意思？](https://stackoverflow.com/questions/4987418/bang-ie7-what-does-it-mean)（`!ie7`在这个网站上有一个例子以及指向上述参考的链接）

规范声明`!`只能在不区分大小写的情况下`important`使用可选的空格和将它们分开的注释，以便将其识别为重要声明。您可以在[语法](http://www.w3.org/TR/CSS21/grammar.html#scanner)中看到这一点：

```
"!"({w}|{comment})*{I}{M}{P}{O}{R}{T}{A}{N}{T}  {return IMPORTANT_SYM;} 
```

因此，虽然这些是有效的重要声明：

```
background: transparent !important;
background: transparent !IMPORTANT;
background: transparent !ImPoRtAnT;
background: transparent ! important;
background: transparent !   important;
background: transparent !   /**/important;
background: transparent ! /**/ /**/ important;
background: transparent !/**/important; 
```

这些是无效的，应该被忽略（甚至不要尝试应用背景）：

```
background: transparent !notimportant;
background: transparent !NOTIMPORTANT;
background: transparent !NoTiMpOrTaNt;
background: transparent ! notimportant;
background: transparent !   notimportant;
background: transparent !ie7;
background: transparent !abc;
background: transparent !_; 
```

但是 IE6/7 会将它们*都*视为有效`!important`语句并应用背景。IE8 及更高版本将正确忽略它们，尽管在兼容性视图中的这些版本中可能会或可能不会重现。

请注意，虽然[Jigsaw W3C CSS Validator](http://jigsaw.w3.org/css-validator)报告`!/**/important`为无效（`!`紧接着是注释而不是空格），但这是验证器解析器的错误。根据语法，它肯定是有效的。

# c++ - .NET 编译器的开发

> ID：13489439
> 
> 赞同：1
> 
> 时间：2012-11-21T08:49:26.840
> 
> 标签：c++, .net, compiler-construction

我正在用 C++ 为 .Net 开发一个简单的编译器，但是我的包含系统有问题，因此如果它是 void 、 string 、 int ，似乎找不到一种方法来识别我从 dll 调用的方法类型...所以，我的包含系统调用 .net dll 调用

```
@include System
@include System:Windows:Forms 
```

什么时候生成代码，需要知道，什么样的方法......我想知道是否有人知道一种方法来获取方法的类型，而不使用工具.net

我想到使用它的一种方法：用 C# 或另一种 .net 语言创建一个应用程序来生成一个 TXT，这个 txt 包含方法的名称和它们的正确类型，在编译时，我携带这个 txt 并在编译时方法的类型

但是，我想知道，如果有另一种方式。

> * * *

关于我谈到的这个程序是：

```
using namespace System;
using namespace System::IO;
using namespace System::Reflection;

ref class Reflector
{
public:
    void LoadAndReflect(String^ assemblyFileName)
    {
        Assembly^ assembly = Assembly::Load(assemblyFileName);
        array<Type^>^ types = assembly->GetTypes();
        StreamWriter^ sw = gcnew StreamWriter("mscorlib.txt");

        for each(Type^ t in types)
        {
            array<MethodInfo^>^ methods = t->GetMethods();

            for each(MethodInfo^ method in methods)
            {
                String^ base = method->ReturnType->ToString();
                array<String^>^ auxBase = base->Split('.');
                if(auxBase->Length > 1)
                    sw->WriteLine(String::Format("{0} <::> {1}", auxBase[1], method->Name));
                else
                    sw->WriteLine(String::Format("{0} <::> {1}", auxBase[0], method->Name));
            }
        }
        sw->Close();
    }
};

int main(array<System::String ^> ^args)
{
    Reflector^ ref = gcnew Reflector();

    Console::WriteLine("Reflection on {0}", "mscorlib.dll");
    ref->LoadAndReflect("mscorlib.dll");
    return 0;
} 
```

而且，在编译器时，我打开那个 txt 并得到方法类型

# php - PHP/MySQL 编辑账户信息

> ID：13489441
> 
> 赞同：-1
> 
> 时间：2012-11-21T08:49:32.940
> 
> 标签：php, html, mysql, phpmyadmin, phpmyid

我首先有 2 个文件 edit.php 和 update.php edit.php

```
<?php
session_start();
$_SESSION['id'] = '9';
$id = $_SESSION["id"];
$username = $_POST["username"];
$fname = $_POST["fname"];
$password = $_POST["password"];
$email = $_POST["email"];

mysql_connect('mysql13.000webhost.com', 'a2670376_Users', 'PASSWORD') or     die(mysql_error());
echo "MySQL Connection Established! <br>";

mysql_select_db("a2670376_Pass") or die(mysql_error());
echo "Database Found!<br>";

$query = "UPDATE members SET username = '$username', fname = '$fname', 
password = '$password' WHERE id = '$id'";

$res = mysql_query($query);

if ($res)
echo "<p>Record Updated $rows[id]<p>";
else
echo "Problem updating record MySQL Error: " . mysql_error();
?>

<form action="update.php" method="post">
<input type="hidden" name="id" value="<?=$id;?>"/>
ScreenName:<br> <input type='text' name='username' id='username' maxlength='25'    style='width:247px' name="username" value="<?=$username;?>"/><br>
FullName:<br> <input type='text' name='fname' id='fname' maxlength='20' style='width:248px' name="fname" value="<?=$fname;?>"/><br>
Email:<br> <input type='text' name='email' id='email' maxlength='50' style='width:250px' name="email" value="<?=$email;?>"/><br>
Password:<br> <input type='text' name='password' id='password' maxlength='25' style='width:251px' value="<?=$password;?>"/><br>
<input type="Submit">
</form> 
```

现在更新.php

```
<?php
session_start();
mysql_connect('mysql13.000webhost.com', 'a2670376_Users', 'PASSWORD') or     die(mysql_error());
mysql_select_db("a2670376_Pass") or die(mysql_error());
$id = (int)$_SESSION["id"] = $_SESSION['id'];

$username = mysql_real_escape_string($_POST["username"]);
$fname = mysql_real_escape_string($_POST["fname"]);
$email = mysql_real_escape_string($_POST["email"]);
$password = mysql_real_escape_string($_POST["password"]);

$query="UPDATE members
SET username = '$username', fname = '$fname', email = '$email', password = '$password'
WHERE id = '$id'";

mysql_query($query)or die(mysql_error());
if(mysql_affected_rows()>=1){
echo "<p>($id) Record Updated<p>";
}else{
echo "<p>($id) Not Updated $_SESSION[username]<p>";
}
?> 
```

这是我在edit.php中的问题， `$_SESSION['id'] = '9';` 如果该行没有说'9'，它将不会更新ID为9的用户，这是我迄今为止唯一的用户数据库中的ID是9，如果该行是不在那里它根本不起作用它不会更新任何信息我如何使它从当前登录的用户中提取ID

这是我的登录代码

```
<?php
session_start();
// Check if he wants to login:
if (!empty($_POST[username]))
{
require_once("connect.php");

// Check if he has the right info.
$query = mysql_query("SELECT * FROM members
                        WHERE username = '$_POST[username]'
                        AND password = '$_POST[password]'")
or die ("<center>Error - Couldn't login user!!");

$row = mysql_fetch_array($query)
or die ("<center>Error - Couldn't login user!!");

if (!empty($row[username])) // he got it.
{
    $_SESSION[username] = $row[username];
    echo "<center>Welcome $_POST[username]! You've been successfully logged in.   <br><h2 style='color: Yellow;'>REDIRECTING.....</H2><br><img    src='http://i1261.photobucket.com/albums/ii586/jacob1899/ajax-loader-1.gif'></center>      <meta http-equiv='REFRESH' content='1;url=/index.htm'>";
    exit();
}
else // bad info.
{
    echo "<center>Error - Couldn't login user!!";
    exit();
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:08:15.263

将以下行写入您的登录文件

```
$_SESSION['id'] = $row[id]; 
```

这是完整的片段代码

```
if (!empty($row[username])) // he got it.
{
    $_SESSION[username] = $row[username];
    $_SESSION['id'] = $row[id]; 
    echo "<center>Welcome $_POST[username]! You've been successfully logged in.   <br><h2 style='color: Yellow;'>REDIRECTING.....</H2><br><img    src='http://i1261.photobucket.com/albums/ii586/jacob1899/ajax-loader-1.gif'></center>      <meta http-equiv='REFRESH' content='1;url=/index.htm'>";
    exit();
}
else // bad info.
{
    echo "<center>Error - Couldn't login user!!";
    exit();
} 
```

现在将以下行注释到编辑文件中。

```
//$_SESSION['id'] = '9'; from your edit.php 
```

# php - 显示进度条，直到在 php 中加载页面？

> ID：13489449
> 
> 赞同：1
> 
> 时间：2012-11-21T08:50:02.953
> 
> 标签：php, javascript, html

我有一个目标是 PHP 文件的 HTML 表单。点击提交按钮后，加载我的PHP文件需要一些时间[因为我正在运行一些后台进程]，所以我想显示一个进度条框[或警报]，直到加载PHP文件。

谁能建议我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:52:21.763

您可能想研究使用像[jQuery](http://jquery.com/)这样的 JavaScript 库。我知道[jQuery mobile](http://jquerymobile.com/)有一个加载动画，您可以在 AJAX 请求期间使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:00:07.593

使用 ajax 发布并使用[jQuery BlockUI](http://www.malsup.com/jquery/block/)插件。提交表单时，阻止 UI。脚本完成后，只需解锁 UI 并显示结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:54:12.120

这些可能会变得棘手。首先，您的后台任务需要在某处报告进度。它可能正在写入文件，或更新数据库中的记录。

接下来，您需要一个检查进度值的 php 脚本。例如，只需将其从数据库中拉出并报告当前值。

最后，您需要更新进度条。从这样的事情开始：http: [//docs.jquery.com/UI/API/1.8/Progressbar](http://docs.jquery.com/UI/API/1.8/Progressbar)

只需让您的 javascript 对您的进度脚本执行 ajax 请求并相应地更新进度条中的值。

# jquery - 将每 2 个 div 包装在一个新的 div 中

> ID：13489450
> 
> 赞同：4
> 
> 时间：2012-11-21T08:50:05.700
> 
> 标签：jquery, html

说我有这个：

```
<div class="somediv"></div>
<div class="somediv"></div>
<div class="somediv"></div>
<div class="somediv"></div>
<div class="somediv"></div>
<div class="somediv"></div> 
```

我将如何将每 2 个 div 包装在一个带有 "newdiv" 类的新 div 中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T09:14:29.837

这听起来像是“为我做我的工作”。下次提示：您尝试了什么？

无论如何，这里是如何做到这一点：

```
var elems = $(".somediv");
var wrapper = $('<div id="wrapper" />');
var pArrLen = elems.length;
for (var i = 0;i < pArrLen;i+=2){
    elems.filter(':eq('+i+'),:eq('+(i+1)+')').wrapAll(wrapper);
}; 
```

在这里工作的[小提琴](http://jsfiddle.net/r5M5Q/2/)

# db2 - 尝试使用 IKJEFT 实用程序卸载 DB2

> ID：13489451
> 
> 赞同：1
> 
> 时间：2012-11-21T08:50:08.010
> 
> 标签：db2, jcl

我正在尝试卸载：

```
Below is jCL

/STEP90    EXEC PGM=IKJEFT01                             
//STEPLIB  DD DSN=DB2.SYS.LOAD,DISP=SHR                  
//SYSPRINT DD DUMMY,DCB=BLKSIZE=8000                     
//SYSTSPRT DD SYSOUT=*                                   
//SYSDBOUT DD SYSOUT=*                                   
//SYSPUNCH DD DSN=aAA.BAAA.CAAA.DSSSS,         
//         DISP=(,CATLG,UNCATLG),                        
//         UNIT=SYSALLDA,                                
//         SPACE=(CYL,(1000,1000),RLSE),                 
//         DCB=(RECFM=FB,LRECL=800)                      
//SYSTSIN  DD *                                          
  DSN SYSTEM(abcd)                                       
    RUN PROGRAM(DB2pg2) -                               
    PARM('/LRECL=08000')                                 
  END                                                    
/*                                                       
//SYSIN    DD *                                                   
-----------------------------------------------------------       
*                                                                 
SELECT  vAL1    ,'~',                           
       LPAD(EMP_NAME,10,'!')   ,'~',                          
               EMP2_NAME     ,'~',                           
               eMP_ID        ,'~',                           
               DATA_VALUE       ,'~',                           
               GEN_ERR_TEXT       ,'~',                           
               E_TIMESTAMP    ,'~',                           
               E_TEXT_SHORT   ,'~',                           
               E_TEXT_LONG                                    
        from  DB2BATC.ump_error_log where                         
        PROJECT_ID = 'GUI'                                        
  ORDER BY ERROR_TIMESTAMP ASC                                    
  FETCH FIRST 03 ROWS ONLY                                        
   WITH UR;                                                
 */ 
```

## 输出

```
GUI ~ !!vINAY ~ HKJSKSKS ~ ~ ~ USER NOT PRESEN :
GUI ~ !!KUMARTHA ~ IJKHJHJD ~ ~ ~                             
GUI ~ !!NAUISJSK ~ HJJKSDHSJDHSJ ~ ~ ~ USER NOT EXIST
*************************** Bottom of Data **************************** 
```

但我希望它是：

```
GUI(12 spaces)       ~ !!vINAY              ~ HKJSKSKS              ~ ~ ~ USER NOT PRESEN 
```

由于 vAL1 在 DB2 中定义为 15 个字符，所以我期望的是在 ps 输出文件中

Gui 3 个字符加 12 个空格

在 suffi 我得到相同的地方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:42:09.587

IKJEFT01 是 TSO 监控程序。您正在使用它连接到 DB2 子系统“abcd”并运行应用程序“DB2pg2”。这是运行利用 DB2 资源的应用程序的方法之一。

输出取决于“DB2pg2”中的逻辑，因此您需要查看那里。

# c# - 如何防止浏览器的后退按钮点击？

> ID：13489454
> 
> 赞同：0
> 
> 时间：2012-11-21T08:50:17.763
> 
> 标签：c#, javascript, jquery

我不想通过浏览器的后退按钮返回我的历史页面。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:56:16.073

您可以使用 HTML5 历史 API 禁用它。Jordan Hollinger有[一篇很棒的文章](http://jordanhollinger.com/2012/06/08/disable-the-back-button-using-html5)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:27:32.037

我同意 Damien 的观点，即您解决了错误的问题。我为此写了一篇博文

> 作为 Web 开发人员，您可以完全控制服务器代码，但在脚本方面只能有限控制客户端。您甚至不能保证客户端将具有任何脚本功能（用户可能会禁用脚本，直到他们信任您的站点），因此您永远不应该从客户端的角度设计您的站点行为 - 即尝试禁用浏览器的后退按钮。
> 相反，如果您需要实现行为，以便当注销的用户单击后退按钮时，他们会被重定向到登录页面，您需要设计您的站点以实现这一点。**您的服务器端设计应该驱动客户端行为**

完整的博客文章在这里 - [http://www.dylanmorley.com/blog/post/Web-Development-Disabling-the-back-button.aspx](http://www.dylanmorley.com/blog/post/Web-Development-Disabling-the-back-button.aspx)

虽然您可以使用 javascript 实现所需的结果，但您不能保证所有设备在所有模式下的一致行为（例如 - 禁用脚本的移动浏览）

正确设计服务器端代码将导致正确的客户端行为，而不会破坏后退按钮的预期行为，无论是否启用脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T08:58:52.370

你可以这样做，但正如@Ahren 所说你不应该这样做。

您只需要开发 SPA（单页应用程序）。在这种情况下，您将只有对 Web 服务器的异步请求，并且您的页面将被部分更新。据我所知，您正在使用 asp.net 进行开发。因此，您可以在 asp.net 官方网站上了解如何操作：[Samples: A Tour through SPA](http://www.asp.net/single-page-application/spa-samples)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T09:29:09.583

您可以使缓存过期，并且可以实现此功能。

```
Response.Cache.SetExpires(DateTime.Now.AddDays(-1));
Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T08:53:17.073

你的意思是从网站注销后？如果是这样，我认为这会对您有所帮助：[链接](http://www.codeproject.com/Questions/149637/Disable-Browser-Back-Button-functionality-after-cl)

# interop - Vsto PowerPoint 2007

> ID：13489463
> 
> 赞同：0
> 
> 时间：2012-11-21T08:50:52.040
> 
> 标签：interop, ms-office, office-interop, powerpoint-2007

我被要求使用 VSTO 开发 PowerPoint 2007 的加载项。

我需要仅在 PowerPoint 中从代码中禁用 AutoRover/AutoSave，这可能吗？

我发现它可以在 Excel 和 Word 中使用。

Excel： http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.autorecover.time%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.autorecover.time%28v=office.14%29.aspx) this.Application.AutoRecover.Enabled = false;

字： http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.word.options.saveinterval%28v=office.11](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.options.saveinterval%28v=office.11%29.aspx) ​​%29.aspx this.Application.Options.SaveInterval = 0;

我已经在互联网上搜索了有关此的信息。有些人说这是不可能的，有些人说我需要在启动 PowerPoint 2007 之前在 Windows 注册表中设置值。有没有人有一些信息，或者有证据证明 PowerPoint 确实有这些选项。

感谢您花时间阅读。

**2012 年 11 月 21 日更新**

这篇文章说，我们可以使用这个设置 HKCU\Software\Microsoft\Office\xx.0\PowerPoint\Options 但我在 Windows 注册表中找不到那个设置。

[禁用 powepoint 的自动恢复选项](https://stackoverflow.com/questions/5464075/disablinging-autorecover-option-for-powepoint)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:44:30.197

一些应用默认值不会写入注册表；如果您更改默认值，您将获得 reg 条目。

例如，在选项、保存中，如果您取消选中“保存自动恢复信息...”旁边的复选框，您会发现

值为 0 的 SaveAutoRecoveryInfo

如您所指示的那样在注册表中（用正确版本的 PPT 替换 xx.0）

因此，您可以使用 PPT 为您创建条目，也可以手动或通过代码创建条目。

请注意，要使其正常工作，您必须在 PowerPoint 未运行时进行更改。

# ruby-on-rails - Rails 对象删除或销毁方法

> ID：13489464
> 
> 赞同：0
> 
> 时间：2012-11-21T08:50:54.667
> 
> 标签：ruby-on-rails, methods, destroy

我有

```
<%= link_to 'Destroy', project, :method => :delete, :data => { :confirm => 'Are you sure?'       } %> 
```

但是当我在视图中单击“销毁”时，它会向我显示项目（将我路由到`/project/:id`）

```
# routes.rb
resources :users

resources :projects do
  resources :issues  
end

resources :issues

resources :sessions

root :to => "users#index"

match "/auth/:provider/callback" => "sessions#create"
match "/signout" => "sessions#destroy", :as => :signout

# projects_controller.rb
def destroy
  @project = Project.find(params[:id])
  @project.destroy

  respond_to do |format|
    format.html { redirect_to projects_url }
    format.json { head :no_content }
  end
end 
```

但是“编辑”效果很好。你知道，问题出在哪里吗？

并且有一个 aplication.html.erb

```
#aplication.html.erb
<!DOCTYPE html>
<html>
<head>
  <title>Project manager</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<% if current_user %>
    Welcome <%= current_user.username %>
    <%= link_to "Signout", signout_path %>
<% else %>
    <%= link_to "Sign in with twitter", "/auth/twitter" %>
<% end %>
<%= yield %>

</body>
</html> 
```

最后是 application.js

```
#aplication.js
= require jquery
//
= require jquery_ujs
//
= require_tree .
//
= require prototype_nested_form
//
= require jquery_nested_form

= require bootstrap 
```

**PS：服务器重启没有帮助**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:01:54.673

我已经解决了。我不知道为什么，但是当我删除这两行时

```
#aplication.js
= require jquery
= require jquery_ujs 
```

一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:59:42.013

尝试这个

```
<%= link_to 'Destroy', project, :method => :delete, :confirm => 'Are you sure?' %> 
```

**请参阅文档**：[http ://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

**更新** `destroy link`已经`delete method`使 url 看起来像`show`但是当`show action`你`get method`检查时`rake routes`你可以看到。destroy 和 show 方法都显示相同的 url，但方法不同。显示它是一个获取和销毁它是一个删除方法。

# windows - Windows 上的 Nodejs ODBC 连接

> ID：13489465
> 
> 赞同：12
> 
> 时间：2012-11-21T08:50:54.630
> 
> 标签：windows, node.js, odbc

我有一个非常适合 Node.js 的项目，但它必须连接到 ODBC 数据库并且必须在 Windows 上运行。我在 linux 上看到了 nodejs 的 ODBC 模块，但没有在 windows 上看到。有人对如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-22T07:36:37.747

如果你像我一样从谷歌来到这里，因为你有旧的（即古老的）系统，我遇到了[是否可以将 WSH（wscript）与 nodejs 结合起来](https://stackoverflow.com/questions/11267265/is-it-possible-to-marry-wsh-wscript-with-nodejs)，并被告知 npm 模块“win32ole”：[https：/ /www.npmjs.com/package/win32ole](https://www.npmjs.com/package/win32ole)。

虽然不仅仅是 ODBC 解决方案，但“win32ole”确实让您能够在风吹盒上做很多事情，就像旧的 WSH 所做的那样。

```
var win32ole = require('win32ole');
. . .
// Create an ADODB.Connection Object
dbcon = new ActiveXObject('ADODB.Connection'); 
```

如果（像我一样），由于您正在连接到访问数据库，您正在使用 ODBC 连接，那么甚至还有一个示例脚本可以直接使用 Jet 进行连接：

[https://github.com/idobatter/node-win32ole/blob/master/examples/access_mdb_sample.js](https://github.com/idobatter/node-win32ole/blob/master/examples/access_mdb_sample.js)

编辑：它确实需要一个 node-gyp，一个需要将代码构建为原生的模块......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-07T22:23:51.023

与我们多年来在 ADO.NET 中提供的强大且高性能的数据库驱动程序相比，Windows 上 node.js 的数据库驱动程序的状态似乎有些不成熟。

我会认真考虑使用[Edge](https://github.com/tjanczuk/edge)在进程中调用 C# 或 CLR 程序集来访问您的数据库。您可以在 C# 中编写[存储库](http://martinfowler.com/eaaCatalog/repository.html)样式的数据访问层并从 node.js 调用它。

我已经证明这在使用 C#、[PetaPoco](http://www.toptensoftware.com/petapoco/)（可选）、.NET 4.5 和 Oracle ODP 驱动程序 (Oracle.DataAccess.dll) 以及 ADO.NET + SQL Server 的开发环境中有效。这应该适用于您可以在 .NET 中与之交谈的任何数据库。

调用 .NET CLR 函数的节点（server.js）示例：

```
var edge = require('edge');

// define CLR function proxy
var getData = edge.func({
    assemblyFile: '../Repositories/bin/Debug/Repositories.dll',
    typeName: 'Repositories.TestRepository',
    methodName: 'GetData' // This must be Func<object,Task<object>>
});

// call proxy function
getData({ myParam:1 }, function (error, result) {
    if (error) throw error;
    console.log(result);
}); 
```

GetData C# 看起来像这样（请注意，您需要将连接字符串放在包含 node.exe 的文件夹中的 node.exe.config 中）：

```
public async Task<object> GetData(object param)
    {
        using (var db = new Database("NameOfConnString"))
        {
            return db.Fetch<dynamic>("SELECT * FROM sometable");
        }
    } 
```

或者，如果使用 SQL Server，您可以使用[edge-sql](https://github.com/tjanczuk/edge#how-to-script-t-sql-in-a-nodejs-application)。

使用 edge-sql 的节点示例（server.js）（请注意，您需要根据 edge-sql 文档将连接字符串放入环境变量中）：

```
var edge = require('edge');

// edge-sql has built in support for T-SQL / MSSQL Server
var getData = edge.func('sql', function () {/*
    select top 10 * from sometable
*/
});

getData(null, function (error, result) {
    if (error) throw error;
    console.log(result);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-12T19:16:45.480

[node-odbc](https://github.com/markdirish/node-odbc)说它是适用于 Linux的unixODBC，但它也适用于 Windows，我在这里使用它。它只是不包含二进制文件，因此您需要在安装 node-odbc 之前安装 windows-build-tools 和 node-gyp 才能构建二进制文件。

```
npm i -g windows-build-tools
npm i -g node-gyp
npm i odbc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-12T08:19:24.973

我正在启动 node.js ，厌倦了 csript.exe 是主要原因。该死的强大，令人印象深刻，我花了 1 小时来设置一个完整的网格功能。好吧，我不是来推广 node.js 的，我是菜鸟。但是我发现一些非常有用的东西...... [http://syskall.com/how-to-write-your-own-native-nodejs-extension/](http://syskall.com/how-to-write-your-own-native-nodejs-extension/)

因此，我没有重做 C++ 总是会做得更好的东西，而是同时使用 node.js 和 C++ 以实现最大效率。

* * *

## 回答 #5

> 赞同：-9
> 
> 时间：2012-12-26T02:13:50.727

~~NodeJS 有一些潜力，但它仍然是一个玩具。前端程序员和后端程序员可以互换的想法是可笑的。但那是题外话...~~

微软[发布](http://blogs.msdn.com/b/sqlphp/archive/2012/06/08/introducing-the-microsoft-driver-for-node-js-for-sql-server.aspx)了他们自己的驱动程序。我没有尝试过，所以我不知道它们有多好。我想他们一定不错，因为我在过去 8 个月中看到了多个 NodeJS 程序员的职位发布。（也没有响应）。

# android - 无法通过三星 Galaxy 3 上的 Intent.ACTION_EDIT 添加新日历事件

> ID：13489466
> 
> 赞同：0
> 
> 时间：2012-11-21T08:50:57.583
> 
> 标签：android, calendar, widget, android-4.0-ice-cream-sandwich

我正在尝试开发简单的小部件（ICS 和更高版本），它将使用一些简单的电话日历快捷方式。我知道，我知道，google calendar api 是非官方的，我应该改用官方的 web 界面，等等，但我不想要 - 我想使用非官方但记录在案的日历界面。所以 - 我有一个应该启动新事件对话框的按钮：

```
Intent i7 = new Intent(Intent.ACTION_EDIT);
i7.setData(CalendarContract.Events.CONTENT_URI);
PendingIntent pi7 = PendingIntent.getActivity(this, 7, i7, PendingIntent.FLAG_UPDATE_CURRENT);
updateViews.setOnClickPendingIntent(R.id.btnAdd, pi7); 
```

这适用于我所有的手机/平板电脑，但不适用于三星 Galaxy 3 - 它会导致错误：

“S Planner 失败。S planner 已停止”。

这是因为三星 Galaxy 手机有另一个日历应用程序 - S Planner，但我想问一下，如果有人遇到同样的问题，你如何处理这个......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:12:01.747

固定，我只添加了这一行：

```
i7.setType("vnd.android.cursor.item/event"); 
```

# intellij-idea - 如何将 intellij 32bit xmlx 增加超过 1GB？

> ID：13489469
> 
> 赞同：22
> 
> 时间：2012-11-21T08:51:08.467
> 
> 标签：intellij-idea, jvm, java, 32-bit

我在具有 4 GB RAM 的 32 位 Windows XP 上使用 32 位 Intellij。
我正在尝试将 intellij xxx 增加到 1.5GB：`-Xmx1500m`
所以我知道 JVM 在 32 位系统中支持 1.5GB 的 RAM。
但是这个错误是从 JVM 抛出的：

```
The JVM could not be started. The maximum heap size (-Xmx) might be too large ... 
```

我无法将 intellij Xmx 增加超过 900MB
请帮助我！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-21T09:17:57.607

您不能这样做，因为 JVM 需要将所有堆分配到一个连续的块中，这可能由于内存碎片而无法实现。[有关更多详细信息，请参阅我的常见问题解答文章](http://devnet.jetbrains.net/docs/DOC-1185)。

另见这张图片：

![JVM 堆](../Images/708ef1e62cc1a7184f753dbaeb51c73f.png)

如您所见，总进程内存不仅仅是堆大小，它更容易达到 2GB 操作系统限制。

可以使用的实际堆因操作系统配置和正在运行的其他应用程序而异（带有钩子的 DLL 会注入进程空间并导致额外的碎片）。通常它在 512M 和 1G 之间，但在干净的系统上可能更高。

# asp.net-mvc - 如何通过 MVC 使用文件上传？

> ID：13489470
> 
> 赞同：2
> 
> 时间：2012-11-21T08:51:09.020
> 
> 标签：asp.net-mvc, razor

我使用文件上传将文件路径插入到数据库中，并将上传的文件插入到项目目录中的文件中，我添加了我的代码，但效果不佳。

```
<div class="editor-field create-Bt2">
        @Html.EditorFor(model => model.Active)
        @Html.ValidationMessageFor(model => model.Active)
    </div>
    <div>
        <p class="create-Bt ">
            <input type="submit" value="Create" />
        </p>
    </div> 
```

```
[HttpPost]
    public ActionResult Create(Category category)
    {
        if (ModelState.IsValid)
        {
            var fileName = "";

            var fileSavePath = "";
            var uploadedFile = Request.Files[0];
            fileName = Path.GetFileName(uploadedFile.FileName);
            fileSavePath = Server.MapPath("../../Uploads/" +
              fileName);
            uploadedFile.SaveAs(fileSavePath);

            db.Categories.Add(category);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(category);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:59:45.177

在您的表格上

```
<form action="" method="post" enctype="multipart/form-data">

  <label for="file">Filename:</label>
  <input type="file" name="file" id="file" />

  <input type="submit" />
</form> 
```

在你的控制器中

```
[HttpPost]
public ActionResult Index(HttpPostedFileBase file) {

  if (file.ContentLength > 0) {
    var fileName = Path.GetFileName(file.FileName);
    var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
    file.SaveAs(path);

    // save the path to your table 
    // db.???

    db.SaveChanges();

  }

  return RedirectToAction("Index");
} 
```

# php - PHP SELECT 查询有条件

> ID：13489471
> 
> 赞同：0
> 
> 时间：2012-11-21T08:51:14.730
> 
> 标签：php, mysql, sql

```
$query = mysql_query("SELECT M.msg_id, M.uid_fk, M.message, M.created, U.full_name, U.profile_pic, U.username, U.uid FROM t_haps_wall M, t_users U, t_join_user F WHERE
        M.uid_fk=U.uid AND F.uid=U.uid AND M.uid_fk = F.uid AND F.status='joining' order by M.msg_id desc ") or die(mysql_error()); 
```

这是我的 SELECT 代码来显示一些消息，现在我想添加 1 个条件：

```
AND M.uid_fk='$uid' 
```

所以我可以把它放在我完整的代码中。我已经试过了，但没有效果。还是缺少/错误的代码？
请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:54:44.643

您应该将它放在`WHERE`子句中，并使用 ANSI SQL-92 代替，如下所示：

```
SELECT 
  M.msg_id, 
  M.uid_fk, 
  M.message, 
  M.created,
  U.full_name, 
  U.profile_pic, 
  U.username, 
  U.uid 
FROM t_haps_wall       M
INNER JOIN t_users     U ON  M.uid_fk = U.uid
INNER JOIN t_join_user F ON  F.uid    = U.uid
WHERE F.status = 'joining' 
  AND M.uid_fk ='$uid' -- your condition here 
order by M.msg_id desc 
```

**请注意：**这种方式的代码容易受到[**SQL 注入**](http://en.wikipedia.org/wiki/SQL_injection)的影响，请改用 PDO 或准备好的语句。有关更多详细信息，请参见：

*   [**在 PHP 中防止 SQL 注入的最佳方法是什么？**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:53:30.590

像这样？..

```
$query = mysql_query("SELECT M.msg_id, M.uid_fk, M.message, M.created, U.full_name, U.profile_pic, U.username, U.uid FROM t_haps_wall M, t_users U, t_join_user F WHERE
    M.uid_fk=U.uid AND F.uid=U.uid AND M.uid_fk = F.uid AND F.status='joining' AND M.uid_fk=".$uid." order by M.msg_id desc ") or die(mysql_error()); 
```

我假设你想把它放在`M.uid_fk=".$uid."`你的`WHERE`条件下。(.) 运算符并不是必需的，因为您的查询有双引号，但我还是喜欢使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:54:25.143

如果你在提出这个问题之前先搜索一下会更好::

无论如何 :: 检查 NEW_COLUMN 的位置

```
$query = mysql_query("SELECT M.msg_id, M.uid_fk, M.message, M.created, U.full_name, U.profile_pic, U.username, U.uid, NEW_COLUMN FROM t_haps_wall M, t_users U, t_join_user F WHERE
        M.uid_fk=U.uid AND F.uid=U.uid AND M.uid_fk = F.uid AND F.status='joining' order by M.msg_id desc ") or die(mysql_error()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:55:32.707

您可以在子句后的*任何位置*添加* 。`WHERE`试试这个更新的查询

```
$sql =
"
SELECT 
   M.msg_id, 
   M.uid_fk, 
   M.message, 
   M.created, 
   U.full_name, 
   U.profile_pic, 
   U.username, 
   U.uid 
FROM 
   t_haps_wall M, 
   t_users U, 
   t_join_user F 
WHERE 
   M.uid_fk=U.uid 
   AND F.uid=U.uid 
   AND M.uid_fk = F.uid 
   AND F.status='joining' 
   AND M.uid_fk='".$uid."'
ORDER BY 
   M.msg_id DESC
";

$query = mysql_query($sql); 
```

*我已经在最后添加了。虽然，我说无论在哪里，它都有效；这并不是严格意义上的最佳方式。条件的放置通常会影响查询运行的效率

# ruby-on-rails - 在测试中获得 2 个回报而不是 1 个回报

> ID：13489472
> 
> 赞同：0
> 
> 时间：2012-11-21T08:51:20.110
> 
> 标签：ruby-on-rails, ruby, rspec, mocking

我正在使用 double/stub 编写测试，我想返回一个假值，但我得到的是假值和真实值。这是我的控制器和规格文件，模型中没有任何内容。任何想法我做错了什么？我的猜测是我做错了。Ps 我对规范和模拟/存根的东西有点陌生

控制器：

```
def destroy
    uri = URI('example.com')
    request_params = {'requestId' => @session.id, 
      'merchantId' => MERCHANTID, 
      'locale' => LOCALE, 
      'partnerId' => PARTNERID, 
      'sessionId' => params[:id]
    }

   Net::HTTP.start(uri.host, uri.port, :use_ssl => uri.scheme == 'https') do |http|
      request = Net::HTTP::Post.new uri.request_uri
      request.set_form_data(request_params)
      #request.content_type = 'application/x-www-form-urlencoded'
      response = http.request request # Net::HTTPResponse object
      json = ActiveSupport::JSON.decode(response.body)
      puts '<<<<<<<<<'
      puts json
      if json['expireSessionRes']['isError'] == false
        render :json => {:status => 'ok', :message => 'logged out'}
      else
        render :json => {:status => 'failed', :message => 'logout failed'}
      end
    end 
```

规格文件：

```
it "should correctly return isError false if logout was sucessful" do
    SID = "123"
    @data3 = {:id => SID}  
    delete :destroy, default_rest_params.merge(@data3)
    response = double('http.request')
    response.stub!(:body => '{"expireSessionRes"=>{"requestId"=>"72", "sessionId"=>"123", "isError"=>false, "desc"=>""}}')
    puts response.body

  end 
```

接收：

```
{"expireSessionRes"=>{"requestId"=>"94", "isError"=>true, "desc"=>"Session exipred", "errorCode"=>"-10011"}}
{"expireSessionRes"=>{"requestId"=>"72", "sessionId"=>"123", "isError"=>false, "desc"=>""}} 
```

第一个来自控制器第二个来自存根

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:46:15.480

所以模拟和存根的问题是，你必须以某种方式将你的模拟对象连接到你的真实代码......这个`double('http.request')`位只是创建一个名为“http.request”的模拟对象，它不会`http.request`返回这个对象。

您需要做的是存根`request`方法以返回模拟响应。但是注入模拟将非常困难，因为您无法`http`从测试中访问块中的对象。

难以测试代码通常是您需要重构代码的好兆头。

`Net::HTTP.start`最简单的事情是用一行替换整个内容

```
response = Net::HTTP.post_form(uri, request_params) 
```

然后你可以通过做测试它

```
remote_response = double('remote_response', body: '...')
Net::HTTP.stub(:post_form).and_return(remote_response)

delete :destroy, ...

response.should whatever 
```

（我假设您在控制器规范中，并且您将需要`response`RSpec 提供的对象，因此您的模拟不能存储在名为 的变量中`response`）。

但这只是掩盖了更重要的一点，即您应该将远程服务交互提取到一个专用类中并单独测试，它不属于控制器。

希望有帮助！

# python - 如何在python的scrapy选择器中只提取文本

> ID：13489473
> 
> 赞同：21
> 
> 时间：2012-11-21T08:51:21.787
> 
> 标签：python, scrapy

我有这个代码

```
 site = hxs.select("//h1[@class='state']")
   log.msg(str(site[0].extract()),level=log.ERROR) 
```

输出是

```
 [scrapy] ERROR: <h1 class="state"><strong>
            1</strong>
            <span> job containing <strong>php</strong> in <strong>region</strong> paying  <strong>$30-40k per year</strong></span>
                </h1> 
```

是否可以只获取没有任何 html 标签的文本

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-21T10:00:44.917

```
//h1[@class='state'] 
```

在您上面的 xpath 中，您正在选择`h1`具有`class`属性的标签`state`

所以这就是为什么它选择所有进来的东西`h1 element`

如果您只想选择`h1`标签的文本，您所要做的就是

```
//h1[@class='state']/text() 
```

如果要选择`h1`标签的文本及其子标签，则必须使用

```
//h1[@class='state']//text() 
```

所以区别在于`/text()`特定标签文本和特定标签`//text()`的文本及其子标签

下面提到的代码适合你

```
site = ''.join(hxs.select("//h1[@class='state']/text()").extract()).strip() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-30T14:57:36.977

您可以使用 BeautifulSoup`get_text()`功能。

```
from bs4 import BeautifulSoup

text = '''
<td><a href="http://www.fakewebsite.com">Please can you strip me?</a>
<br/><a href="http://www.fakewebsite.com">I am waiting....</a>
</td>
'''
soup = BeautifulSoup(text)

print(soup.get_text()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:22:34.163

我没有运行一个scrapy实例，所以我无法测试它；但您可以尝试`text()`在搜索表达式中使用。

例如：

```
site = hxs.select("//h1[@class='state']/text()") 
```

（从 得到它[`tutorial`](http://doc.scrapy.org/en/0.9/intro/tutorial.html)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T09:28:32.283

你可以使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)去除 html 标签，这里是一个例子：

```
from BeautifulSoup import BeautifulSoup
''.join(BeautifulSoup(str(site[0].extract())).findAll(text=True)) 
```

然后，您可以去除所有额外的空格、新行等。

如果您不想使用其他模块，可以尝试简单的正则表达式：

```
# replace html tags with ' '
text = re.sub(r'<[^>]*?>', ' ', str(site[0].extract())) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-30T14:50:16.353

您可以使用`html2text`

```
import html2text
converter = html2text.HTML2Text()
print converter.handle("<div>Please!!!<span>remove me</span></div>") 
```

# php - 在php中只用str_replace替换取消注释字符串

> ID：13489476
> 
> 赞同：0
> 
> 时间：2012-11-21T08:51:29.613
> 
> 标签：php

日志文件

```
define ( 'COMPANY_WEB', 'www.6666.com' );
//define ( 'COMPANY_WEB', 'www.6666.com' );
define ( 'COMPANY_FAX', 'asdfffff' ); 
```

我的字符串替换代码....

```
$config_old_arr[0] = " define ( 'COMPANY_WEB', 'www.6666.com' )";
$config_new_arr[0] = " define ( 'COMPANY_WEB', 'www.NEW.com' )";

$config_new_file_content = str_replace($config_old_arr, $config_new_arr, $logfilecontent); 
```

运行我的代码后...更改新的 log.php 文件

logNew.php

```
define ( 'COMPANY_WEB', 'www.NEW.com' );
//define ( 'COMPANY_WEB', 'www.NEW.com' );
define ( 'COMPANY_FAX', 'asdfffff' ); 
```

但我只想更改非注释行（第 1 行）中的值，因此结果字符串希望如下

logNew.php

```
define ( 'COMPANY_WEB', 'www.NEW.com' );
//define ( 'COMPANY_WEB', 'www.6666.com' );
define ( 'COMPANY_FAX', 'asdfffff' ); 
```

我喜欢使用 str_replace() 函数，但该方法可能不适合这个问题任何知道这个问题的解决方案的人请帮助我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T08:55:01.070

使用[substr](http://php.net/manual/en/function.substr.php)检查字符串的前 2 个字符

//$linetocheck = 要替换的行

```
if (substr($linetocheck, 0, 2) == "//") {

    //the first 2 chars are //

} 
```

# javascript - 如何使用标头和数据创建对服务器的 javascript POST 请求

> ID：13489481
> 
> 赞同：5
> 
> 时间：2012-11-21T08:51:53.777
> 
> 标签：javascript, post, http-headers

我使用 JS 自动化框架来测试 iOS 应用程序。在测试过程中，我需要向服务器创建 POST 请求给用户一些钱，然后验证更改是否反映在 UI 中。

请求看起来像：www.testserver.com/userAddMoney?user_id=1&amount=999

但是要在服务器上授权，我需要将特殊参数传递给请求的标头：

**标头：** X-Testing-Auth-Secret：kI7wGju76kjhJHGklk76

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T09:06:06.107

所以基本上你想设置一个 POST 请求的标头。只有当它是一个 ajax 请求时才可以这样做（您不能为普通的 html 表单提交请求设置标题）。这是一种为 ajax 请求设置标头的方法：

```
var request = new XMLHttpRequest();
request.onreadystatechange= function () {
    if (request.readyState==4) {
        //handle response
    }
}
request.open("POST", "url", true);
request.setRequestHeader("header", "blah blah");
request.setRequestHeader("Accept","text/plain");
request.send("post data"); 
```

# java - 使用包含多引用对象的 jaxws 使用 php soap 服务时出现问题

> ID：13489484
> 
> 赞同：0
> 
> 时间：2012-11-21T08:52:02.847
> 
> 标签：java, soap, jax-ws

我尝试使用在其响应多引用对象中返回的 php Web 服务。我使用 wsimport 创建了 java 客户端，并且可以毫无问题地调用 soap 方法。但是在响应中，应该相应填充的对象是空的：

肥皂信封中输出的基本部分：

```
<result>
 <book id="extref1">
  <title>Refactoring</title>
 </book>
 <book id="extref2">
  <title>Clean Code</title>
 </book>
 <library name="lib1">
  <book href="#extref1"/>
  <book href="#extref2"/>
 <library>
 <library name="lib2">
  <book href="#extref2"/>
 <library>
</result> 
```

在 Java 中调试 result.getBook()-List 填充了正确的对象，但 library[0].getBook()-List 仅填充了适量的 book-Objects 但这些对象是空的（例如 title 为 null ）。

php 中的 SoapClients 正在正确解组响应，但我也需要在 Java 中使用它。

# javascript - 如何使用 javascript RegExp 匹配媒体查询

> ID：13489486
> 
> 赞同：0
> 
> 时间：2012-11-21T08:52:08.190
> 
> 标签：javascript, regex

我想用正则表达式匹配这样的字符串：

```
@media only screen and (max-width: 479px){
.abv{style:value;style:value}
.xyz{style:value;style:value}

} 
```

但不知何故我不能。我的正则表达式开始时`/ @media[^{]*\{ /gim` 想要匹配除以下之外`}}`的所有内容`}}` `/@media[^{]*\{[^}}]*\}(?=})/gim`-这不起作用，因为`[^}}] == [^}]`...我不知道如何使正则表达式像这样工作请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T03:07:12.037

来自[Respond.js](https://github.com/scottjehl/Respond/blob/master/src/respond.js)，这里有一个[Demo](http://regex101.com/r/qX9lT0/1)

```
@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+[^\}]+\} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:46:10.550

你要这个：

```
/@media[^{]*\{(?:(?!\}\s*\}).)*/gis 
```

[在 Regexr 上](http://regexr.com?32sn6)查看

1.  您不需要`m`修饰符，它仅适用于锚点`^`和`$`

2.  您的意思是`s`使`.`匹配也成为换行符的修饰符。您没有`.`在您的正则表达式中使用，但我使用了。

3.  使用此构造可以实现您想要实现的目标，这意味着仅当下一个字符不是a后跟另一个字符之间可能有空格`(?:(?!\}\s*\}).)*`时才匹配。这个断言由否定的前瞻来保证。开头的组只是一个非捕获组，没什么特别的。`}``}``(?!\}\s*\})``?:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:48:56.870

你也可以试试这个`/@media[^\(]+[^\)]+\){([^{]+[^}]+})+[^}]+}/ig`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:06:07.140

试试这个：

```
@media[^\{]*\{([^\{]+\{[^\}]+\}\n*)*\n*\} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T11:36:03.070

不是 100% 确定这是如何工作的，但它似乎（来自此页面上其他条目的试验和错误）

```
/(@media[^{]*{(?:(?!}\s*}).)*}.*?})/s 
```

# android-listview - 当我们在android中单击列表项时，如何在列表项中获取文本？

> ID：13489492
> 
> 赞同：1
> 
> 时间：2012-11-21T08:52:40.157
> 
> 标签：android-listview

这是我的代码片段：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
   super.onListItemClick(l, v, position, id);
   Toast.makeText(MainActivity.this, "clicked " + 
     position, Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:55:23.917

您可以点击此链接：

```
ArrayList<String> list;
listView.setOnItemClickListener(new OnItemClickListener() 
{

            public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                    long arg3) 
{
                ArrayList<String> newList=new ArrayList<String>();
                newList=list.get(position);//Text will be featch according to the position
                String name=newList.get(0).toString(); 
    }
} 
```

# alfresco-share - 如何在 Alfresco 的文件夹详细信息中显示文件夹大小和项目数？

> ID：13489493
> 
> 赞同：0
> 
> 时间：2012-11-21T08:52:48.267
> 
> 标签：alfresco-share

我想显示 Alfresco Share 中每个文件夹的所有从属文件（不是子文件夹）的文件夹大小和数量。

如何在文件夹详细信息中显示此信息，如下所示？

名称：露天

标题：露天分享

描述：露天讨论

创建者：管理员

**大小：128,08 MB**

**文件：12**

**子文件夹：2**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:59:16.810

试试这个：

```
 System.IO.DirectoryInfo info = new DirectoryInfo("c:\\");
    int NumerSubDirs = info.GetDirectories().Length;
    int NumFiles = info.GetFiles().Length;
    FileInfo[] fileinfos = info.GetFiles();
    float totalSize =0;

    foreach (FileInfo infof in fileinfos)
    {
      totalSize += (infof.Length / 1024 / 1024);
    }

    Console.WriteLine("Number of subdirs -> " + NumerSubDirs.ToString());
    Console.WriteLine("Numer of files -> " + NumFiles.ToString());
     Console.Write("Size of files -> " + totalSize.ToString()); 
```

# c++ - 在游戏中的图形和物理引擎之间共享数据？

> ID：13489496
> 
> 赞同：4
> 
> 时间：2012-11-21T08:53:04.553
> 
> 标签：c++, graphics, game-engine, physics-engine, 3d-engine

我正在编写一个由几个模块组成的游戏引擎。其中两个是**图形引擎**和**物理引擎**。

**我想知道在他们之间共享数据是否是一个好的解决方案？**

两种方式（共享与否）看起来像这样：

## 不共享数据

```
GraphicsModel{
    //some common for graphics and physics data like position

    //some only graphic data 
    //like textures and detailed model's vertices that physics doesn't need
};

PhysicsModel{
    //some common for graphics and physics data like position

    //some only physics data 
    //usually my physics data contains A LOT more information than graphics data
}

engine3D->createModel3D(...);
physicsEngine->createModel3D(...);

//connect graphics and physics data 
//e.g. update graphics model's position when physics model's position will change 
```

我看到两个主要问题：

1.  大量冗余数据（例如物理和图形数据的两个位置）
2.  更新数据的问题（我必须在物理数据更改时手动更新图形数据）

## 通过共享数据

```
Model{
     //some common for graphics and physics data like position
};

GraphicModel : public Model{
    //some only graphics data 
    //like textures and detailed model's verticles that physics doesn't need
};

PhysicsModel : public Model{
     //some only physics data 
    //usually my physics data contains A LOT more informations than graphics data
}

model = engine3D->createModel3D(...);
physicsEngine->assignModel3D(&model); //will cast to 
//PhysicsModel for it's purposes??

//when physics changes anything (like position) in model 
//(which it treats like PhysicsModel), the position for graphics data 
//will change as well (because it's the same model) 
```

这里的问题：

1.  `physicsEngine`无法创建新对象，只需从 engine3D 中“分配”现有对象（不知何故，它对我来说看起来更加反独立）
2.  在 assignModel3D 函数中转换数据
3.  `physicsEngine`并且`graphicsEngine`必须小心 - 当他们不需要数据时，他们不能删除数据（因为第二个可能需要它）。但这是一种罕见的情况。此外，他们可以只删除指针，而不是对象。或者我们可以假设这`graphicsEngine`将删除对象，`physicsEngine`只是指向它们的指针。

**哪种方式更好？**

未来哪个会产生更多的问题？

我更喜欢第二种解决方案，但我想知道为什么大多数图形和物理引擎更喜欢第一种（可能是因为它们通常只制作图形或只制作物理引擎，而其他人在游戏中将它们连接起来？）。

**他们还有更多隐藏的优点和缺点吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T09:27:26.523

如今，更多的游戏引擎采用组件化设计（如Unity、Unreal）。在这种设计中，a`GameObject`由一系列组件组成。在您的情况下，可以有 a`MeshComponent`和 a `PhysicalComponent`，它们都附加到单个游戏对象。

为简单起见，您可以将世界变换变量放入`GameObject`. 在更新短语期间，`PhysicalComponent`将世界变换输出到该变量。在渲染期间，`MeshComponent`读取该变量。

这种设计背后的基本原理是在组件之间解耦。彼此都不认识`MeshComponent`，也不认识。`PhysicalComponent`它们只依赖于一个通用接口。并且通过组合来扩展系统比使用单一继承层次更容易。

然而，在现实场景中，您可能需要在物理/图形同步之间进行更复杂的处理。例如，物理模拟可能需要以固定的时间步长（例如 30Hz）运行，而渲染需要是可变的。您可能需要从物理引擎的输出中插入结果。一些物理引擎（例如 Bullet）虽然直接支持这个问题。

Unity 提供了他们的[Components](http://docs.unity3d.com/Documentation/Components/ "组件系统")的一个很好的参考，值得一看。

# jpeg - 将普通图像转换为红外线或紫外线？

> ID：13489497
> 
> 赞同：1
> 
> 时间：2012-11-21T08:53:12.420
> 
> 标签：jpeg

我已经看到搜索植物的红外和紫外图像，例如：葡萄植物。但我无法从搜索中找到合理的图像。我也试过买相机自己拍照，但你知道那些相机太贵了，我买不起。

我正在使用不同的成像技术在图像处理下完成我的论文。如果你们都可以帮我找到红外和紫外图像的图像，或者你可以告诉我是否可以购买这些照片吗？

或者您能否告诉我，可以将普通图片转换为红外线图片或紫外线图片吗？

谢谢。！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:30:00.320

无法将普通照片转换为物理上正确的红外或紫外线照片，就像无法将使用红色滤镜拍摄的照片转换为使用绿色滤镜拍摄的照片一样。他们使用不同频率的光。如果未捕获特定的先决条件，则会丢失一些细节。

例如：花朵在紫外线范围内具有非常丰富的色彩，但在光频率范围内大多是单色的。这很难伪造。此外，人体会发出红外线范围内的辐射，这意味着即使没有任何光源（如果您有正确的设备），它也是完全可见的。人体不会在可见范围内发射。

如果可能的话，所有昂贵的真红外和真紫外相机都会使用这个过程，因此会便宜得多。医院里所有昂贵的X光机将完全没用——只需用普通手机拍照并处理即可。

但是，您*可以*假装效果。这对科学测量没有好处，但出于艺术原因可以使用。在任何像样的图像编辑器中打开图片，然后使用颜色。使用通道混合播放（您至少有 12 个滑块可供播放）。玩选择。您可以对图像的不同区域应用不同的颜色效果。使用魔术套索选择特定对象或羽化选择以创建渐变。Gimp 有一个很好的功能，您可以在选择蒙版中而不是图像本身上进行绘画 - 因此您也可以选择一个区域或使用画笔调整选择。玩图层。通过绘制顶层 Alpha 通道，您可以拥有两个具有不同颜色效果的图层并在它们之间进行模糊处理。使用内置过滤器。玩不同的图层混合模式。玩弄色彩平衡曲线。做你需要的事情以获得你想要的艺术效果。您可以混合同一物体不同方面的不同照片，或同一物体在不同光照条件下的照片（自然光、人工照明、通过一副太阳镜拍摄...），以获得更多颜色通道进行混合...

只要相机在该区域至少*有点*敏感，您就可以粗略估计*近紫外区域的**实际*情况。你找不到紫外线通过过滤器，用紫外线阻挡过滤器拍照，没有过滤器，平衡和减去。不过，不要期望太多。不过，它可以为您提供一些提示，如何实现半逼真的色彩效果。

# php - 如何使用 optgroup 生成动态选择框

> ID：13489498
> 
> 赞同：-1
> 
> 时间：2012-11-21T08:53:15.507
> 
> 标签：php, sql, drop-down-menu

嗨，我有这个 mysql 表。

```
CREATE TABLE IF NOT EXISTS `selling_counties` (
  `county_id` int(11) NOT NULL auto_increment,
  `country` varchar(20) collate utf8_unicode_ci NOT NULL,
  `county_name` varchar(25) collate utf8_unicode_ci NOT NULL,
  `datecreated` datetime NOT NULL,
  `datemodified` datetime NOT NULL,
  PRIMARY KEY  (`county_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=97 ; 
```

我需要一个带有 optgroup 的选择框，其中国家将是，county_name 将是 s，例如

```
<select name ="county">
    <optgroup label="England">
        <option>South Yorkshire</option>
        <option>Staffordshire</option>
        <option>Suffolk</option>
        <option>Surrey</option>
        <option>Tyne and Wear</option>
        <option>Warwickshire</option>
        <option>West Midlands</option>
        <option>West Sussex</option>
        <option>West Yorkshire</option>
        <option>Wiltshire</option>
        <option>Worcestershire</option>
    </optgroup>
    <optgroup label="Wales">
        <option>Clwyd</option>
        <option>Dyfed</option>
        <option>Gwent</option>
        <option>Gwynedd</option>
        <option>Mid Glamorgan</option>
        <option>Powys</option>
        <option>South Glamorgan</option>
        <option>West Glamorgan</option>
    </optgroup>
    <optgroup label="Scotland">
        <option>Aberdeenshire</option>
        <option>Angus</option>
        <option>Argyll</option>
        <option>Selkirkshire</option>
        <option>Shetland</option>
        <option>Stirlingshire</option>
        <option>Sutherland</option>
        <option>West Lothian</option>
        <option>Wigtownshire</option>
    </optgroup>
    <optgroup label="Northern Ireland">
        <option>Antrim</option>
        <option>Armagh</option>
        <option>Down</option>
        <option>Fermanagh</option>
        <option>Londonderry</option>
        <option>Tyrone</option>
    </optgroup>
</select> 
```

我已经尝试过这个[PHP: Dynamic Drop down with optgroup](https://stackoverflow.com/questions/5132166/php-dynamic-drop-down-with-optgroup) 但它对我来说有点复杂，因为我是 php 的新手，而且它来自 2 个单独的表，而我的来自同一个表。

任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:03:06.537

像这样创建一个新数组，以国家作为键，将县数组作为每个值。假设`$rows`是原始表行的数组。

```
<?php

$countries = array();

foreach($rows as $row)
{
    if(isset($countries[$row['country']])) // <-- edit, was missing a ]
    {
        $contries[$row['country']][] = $row['county_name'];
    }
    else
    {
        $countries[$row['country']] = array($row['county_name']);
    }
}

?>

<select name ="county">
    <?php foreach($countries as $country => $counties): ?>

        <optgroup label="<?php echo htmlentities($country); ?>">

            <?php foreach($counties as $county): ?>

                <option><?php echo htmlentities($county); ?></option>

            <?php endforeach; ?>

        </optgroup>

    <?php endforeach; ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:19:25.313

您需要从表中选择值

```
$mysqli = new mysqli($host, $user, $passwd, $database);
$result = $mysqli->query('select county_id, country, county_name from selling_counties');
$countries = array();
while ($row = $result->fetch_assoc()) {
    $country = $row['country'];
    if (!array_key_exists($country, $countries))
        $countries[$country] = array();

    $countries[$country][] = array($row['county_id'], $row['county']);
} 
```

并将这些放在您的 html 选择中。

**更新**添加：`county_id`_`<option>`

```
<option value="<?php echo htmlentities($county[0]); ?>"><?php echo htmlentities($county[1]); ?></option> 
```

# android - 通过视图android传递点击事件

> ID：13489507
> 
> 赞同：7
> 
> 时间：2012-11-21T08:53:41.400
> 
> 标签：android, click

我有框架布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="10dp" >

<LinearLayout
    android:id="@+id/widgetView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:layout_margin="10dp"
    android:gravity="center" >
</LinearLayout>

<LinearLayout
    android:id="@+id/widgetOverlayFrame"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clickable="false" >
</LinearLayout> 
```

第一个布局包含小部件布局，第二个是透明的并接收 onLongClick 用于拖动方法。这有效，问题是当我想与小部件交互时，单击某些东西时，单击事件由 overlayFrame 获取。如何通过overlayFrame将点击事件传递给widgetView？

编辑：

现在我正在尝试将 GestureLister 附加到 overlayFrame LinearLayout，以某种方式查看代表单击和长按的 MotionEvent 之间的区别。我面临的问题是手势监听器中的 OnLongPress 总是被称为无论我做什么，单击或长按。

这种行为有解释吗？天呐！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-12-28T08:45:21.563

在我的情况下，我在视图的 layoutParams 中添加了标志，它应该在下面传递了一个触摸事件：

```
WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE 
```

这种方式视图将忽略所有触摸（如可见性消失的视图）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:59:27.260

也许设置覆盖的属性`android:focusable="false"`或者`android:focusableInTouchMode="false"`就足够了。

您还可以制作自己的覆盖小部件并覆盖其`onInterceptTouchEvent`方法以始终返回 false。

```
public class NotTouchableLinearLayout extends LinearLayout {

    // Override constructors
    // ...

   @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T22:25:39.527

`GestureListener`您应该创建自己的扩展类`LinearLayout`并覆盖它的`onTouchEvent`方法，而不是在顶部布局上设置 a 。在那里你可以实现长点击\短点击等的逻辑。

点击事件将首先被发送到小部件布局，并且只有当它不处理它们（因此它是`onTouchEvent`return `false`）时，您才会将它们放在顶部布局中。

**编辑：**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_margin="10dp" >

<LinearLayout
android:id="@+id/widgetView"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center"
android:layout_margin="10dp"
android:gravity="center" >
</LinearLayout>

<com.example.touchtesting.MyLinearLayout
android:id="@+id/widgetOverlayFrame"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:clickable="false" >
</com.example.touchtesting.MyLinearLayout>

</FrameLayout> 
```

更改`com.example.touchtesting`为您的包的名称。这是课程：

```
 public class MyLinearLayout extends LinearLayout{

        public MyLinearLayout(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

        private long startClick = 0;

        @Override
        public boolean onTouchEvent(MotionEvent ev) {
            switch (ev.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    startClick = ev.getEventTime();
                    break;
                case MotionEvent.ACTION_CANCEL:
                case MotionEvent.ACTION_UP:
                    if (ev.getEventTime() - startClick < 500) {
                        Log.i("example","short click");
                    }
                    else {
                        Log.i("example","long click");
                    }
                    break;
            }

            return true;
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:33:29.217

您可以通过这种方式覆盖 onTouchListener，而不是使用 GestureListener。

这将在计时器用完时调用 longPress，如果在两者之间出现 up ，它将取消 LongPress

```
 CountDownTimer c;
    long time=5000;
    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN:
                c= new CountDownTimer(5000, 1000) {
                          public void onTick(long millisUntilFinished) {
                                  time=millisUntilFinished;
                           }

                          public void onFinish() {
                                 Log.i("","LONG PRESS");
                           }}.start();

            break;
            case MotionEvent.ACTION_UP:
                if (time>0) {
                    Log.i("example","short click");
                    c.cancel();
                }
            break;
        }

        return true;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-09T19:24:25.463

要获得长点击以通过 widgetView`LinearLayout`添加`android:longClickable="true"`。（对于普通点击添加`android:clickable="true"`）

所以 widgetView 变成：

```
<LinearLayout
    android:id="@+id/widgetView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:layout_margin="10dp"
    android:gravity="center" 
    android:longClickable="true">
</LinearLayout> 
```

# mysql - mysql - 如何保存

> ID：13489508
> 
> 赞同：3
> 
> 时间：2012-11-21T08:53:57.430
> 
> 标签：mysql, encoding, character-encoding

每当我尝试将其保存在 mysql 数据库中`ñ`时。`?`经过几次阅读后，建议我必须将我的 jsp 字符集更改为`UTF-8`. 由于某些原因，我必须坚持`ISO-8859-1`. 我的数据库表编码是`latin1`. 我怎样才能解决这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T13:17:59.450

您在问题中声明您需要一个 ISO-8859-1 后端 (latin1) 和一个 Unicode (UTF-8) 前端。这个设置很疯狂，因为前端的设置比数据库中允许的要大得多。最*明智*的做法是通过软件堆栈使用相同的编码，但仅将 Unicode 用于存储也是有意义的。

如您所知，字符串是字符序列的人类概念。在计算机程序中，字符串**不是**这样的：它可以被*视为*一个字符序列，但它实际上是一对数据结构：**一个字节流和一个编码**。

一旦你明白传递一个字符串实际上是传递字节和一个方案，让我们看看谁发送了什么：

1.  浏览器到 HTTP 服务器（通常与表单页面相同的编码，因此 UTF-8。方案通过 指定`Content-Type`。如果缺少，服务器将根据[自己的策略](http://dev.mysql.com/doc/refman/5.6/en/connector-j-reference-charsets.html)选择一个，例如默认为 ISO-8859-1 或配置范围）
2.  HTTP 服务器到 Java 程序（它是 Java 到 Java，所以编码无关紧要，因为我们传递 String 对象）
3.  Java 客户端到 MySQL 服务器（[Connector/J](http://dev.mysql.com/doc/refman/5.6/en/connector-j-reference-charsets.html)文档非常复杂 - 它使用`character_set_server`系统变量，可能被`characterEncoding`连接参数覆盖）

要了解问题出在哪里，首先要确保该列确实存储为 latin1：

```
SELECT character_set_name, collation_name
    FROM information_schema.columns
    WHERE table_schema = :DATABASE
        AND table_name = :TABLE
        AND column_name = :COLUMN; 
```

然后将从请求中获得的 Java 字符串写入日志文件：

```
logger.info(request.getParameter("word")); 
```

最后看看列中的实际内容：

```
SELECT HEX(:column) FROM :table 
```

此时，您将有足够的信息来理解问题。如果它真的是一个问号（而不是[替换字符](http://en.wikipedia.org/wiki/Specials_%28Unicode_block%29)），很可能是 MySQL 试图将一个字符从一个更大的集合（比如说 Unicode）转码为一个不包含它的更窄的字符。这里奇怪的是[ñ同时属于](http://www.fileformat.info/info/unicode/char/f1/index.htm)ISO-8859-1（0xF1，十进制241）和Unicode（U+00F1），所以看起来好像有第三个字符集（可能是代码页？）参与往返.

更多信息可能会有所帮助（操作系统、HTTP 服务器、MySQL 版本）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T08:59:16.087

转到您的数据库管理，`MySQL WorkBench`例如，将引擎放入并将`InnoDB`排序规则放入`utf8-utf8_general_ci`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T08:55:37.793

将您的数据库表内容编码更改为 UTF-8

这是整个数据库转换的命令

```
ALTER DATABASE db_name DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

这是用于单表转换

```
ALTER TABLE db_table CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-21T08:55:39.093

将您的表格整理更改为`utf8_spanish_ci`

where`ñ`不等于，`n`但如果您希望两个字符相等，请使用

`utf8_general_ci`反而

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-03T14:32:44.127

我尝试了几种组合，但这对我有用：

VARCHAR(255) 二进制字符集 utf8 整理 utf8_bin

在 dbforge express 中检索数据时，显示如下：NIÃ'A

但在应用程序中显示如下：NIÑA

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-12-03T22:19:15.640

我有同样的问题。发现这不是关于编码 UTF-8 或任何字符集的问题。我从 Windows ANSI 导入了我的数据，我所有的 Ñ 和 ñ 都按原样完美地放入了数据库中。示例姓氏显示在数据库**last_name = "MUÑOZ"**上。我能够从数据库中正常选择查询**Select * from database where last_name LIKE "%muñoz%"**和 phpmyadmin 显示结果很好。它毫无问题地选择了所有“MUÑOZ”和“MUNOZ”。所以 phpmyadmin 确实显示了我所有的 Ñ 和 ñ**没有任何问题**。

问题出在程序本身。我提到的所有角色，正如你所描述的那样，带有时髦的**“MU�OZ”问号**。我到处都听从了所有的建议。正确设置我的标题并尝试了我所有可用的字符集。甚至使用谷歌字体和任何可用的字体来正确显示这些姓氏，但没有成功。

然后我想起了一个旧程序，它能够透明地来回执行这个技巧，然后偷看代码来弄清楚：数据库本身，显示我所有的特殊字符是问题所在。请记住，我使用 Windows ANSI 编码上传。phpmyadmin按预期进行，按指示上传。

旧程序修复**了将 Ñ 转换为其 UNICODE HTML 实体的问题：（`&#209;`**参见此处的图表[https://www.compart.com/en/unicode/U+00D1](https://www.compart.com/en/unicode/U+00D1)）从 MySQL 到应用程序的来回过程。

因此，您只需将包含字母 Ñ 和 ñ 的数据库字符串更改为它们对应的 UNICODE，以便使用 UTF 字符集正确反映在您的浏览器上。

就我而言，我解决了我的问题，将我的所有 Ñ 和 ñ 替换为我数据库中所有姓氏中对应的 UNICODE。

```
UPDATE database_name
SET 
    last_name = REPLACE(last_name,
        'MUÑOZ',
        'MU&#209;OZ'); 
```

现在，我能够显示、浏览、甚至搜索我所有正确的姓氏和口音/波浪号，适合西班牙语。我希望这有帮助。解决这个问题很痛苦，但一个旧程序解决了这个问题。最好的问候和快乐的编码！

# c# - 当我更改 Windows 主题时，视觉方面会发生变化

> ID：13489509
> 
> 赞同：-1
> 
> 时间：2012-11-21T08:53:58.280
> 
> 标签：c#

运行我的 application.exe 后，我注意到当我更改 windows xp 主题（例如从普通主题到经典主题）时，我的应用程序的视觉方面发生了变化！有人可以告诉我应该怎么做才能制作一个不支持的静态 GUI当我更改主题或从 Windows xp 切换到 Windows 7 时更改 Ps：我正在使用 .NET Framework 4

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:48:18.000

UI 外观正在发生变化，因为 Windows 主题更改了默认字体，从而更改了渲染所需的点数。

使用默认主题打开Visual Studio，然后更改它并调试winform，您将看到控件如何更改大小...

阅读这篇 msdn 文章，它可能会帮助您决定下一步要做什么[自动缩放 Windows 窗体](http://msdn.microsoft.com/en-us/library/ms229605.aspx)

# macos - Mac OS X - 丢失应用程序文件夹中的所有应用程序

> ID：13489510
> 
> 赞同：-1
> 
> 时间：2012-11-21T08:54:08.857
> 
> 标签：macos, terminal

我有一个大问题。我在终端应用程序中键入此命令

```
bless --folder /Volumes/Applicaitons --openfolder /Volumes/DIRECTORY 
```

之后，应用程序中的所有应用程序都会消失。我不知道为什么要备份所有。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:01:26.423

哇。这看起来像是你制造的一个潜在的巨大混乱。希望您没有尝试重新启动计算机。

尝试做：

```
bless --folder /System --openfolder / 
```

那*应该*重置您的祝福文件夹。

如果 Applications 文件夹保持不可见，您可以通过以下方式使其可见：

```
SetFile -a v /Applications 
```

（顺便说一句，“ `/Volumes/Applications`- 您在问题中惊慌失措地输入的名称 - 一个有效的硬盘驱动器卷？？还是您的意思是“ `/Applications`”？）

# algorithm - Goertzel算法得到相位？

> ID：13489519
> 
> 赞同：2
> 
> 时间：2012-11-21T08:54:45.533
> 
> 标签：algorithm, signal-processing

我正在使用 Goertzel 算法来获得某个频率的幅度。我现在正试图从中获得灵态，但我不知道如何。

有人可以解释一下，并告诉我如何从这段代码中获取某个 f 的相位吗？

另外，我将它用于 16khz，采样率为 44.1。我可以运行它的最小样本长度是多少？

```
double AlgorithmGoertzel( int16_t *sample,int sampleRate, double Freq, int len )
{
    double realW = 2.0 * cos(2.0 * M_PI * Freq / sampleRate);
    double imagW = 2.0 * sin(2.0 * M_PI * Freq / sampleRate);
    double d1 = 0;
    double d2 = 0;
    double y;
    for (int i = 0; i < len; i++) {
        y=(double)(signed short)sample[i] +realW * d1 - d2;
        d2 = d1;
        d1 = y;
    }
    double rR = 0.5 * realW *d1-d2;
    double rI = 0.5 * imagW *d1-d2;

    return (sqrt(pow(rR, 2)+pow(rI,2)))/len;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T06:03:34.923

进行矩形到极坐标的转换。这会给你相位和幅度。

幅度 = sqrt ((Vreal * Vreal) + (Vimag * Vimag))

相位 = atan2 (Vimag, Vreal)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:20:37.137

我不认为该算法包括将序列乘以常数，而是乘以复信号`exp(n*i*2pi*freq/samplerate);`0<=n<=length，并获得平均幅度（或信号的*功率*）。

由于复数输出为 R*exp(i theta)，因此 R 给出了给定频率的功率，而 theta 给出了相位。（theta == atan2（想象，真实））

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:06:30.277

您需要馈送到 Goertzel 滤波器的样本数量将与您想要或要求的滤波器带宽成反比。Goertzel 提供了一个 Sinc 形带通滤波器，其主瓣宽度与 2*Fs/N 成比例。

如果您使用复数 Goertzel，则生成的相位将与滤波器数据窗口中的某个点相关。因此，您可能必须计算偏移量才能获得相对于其他一些参考时间点的相位。

# asp.net - 在 ASP.NET Web 服务中使用静态变量，如跨线程

> ID：13489526
> 
> 赞同：0
> 
> 时间：2012-11-21T08:55:01.670
> 
> 标签：asp.net

是否可以将它与线程中的所有内容一起使用，并带有锁定？

主要思想是跟踪某个网络方法是否已被同一用户调用，因此我们希望在一分钟内阻止超过 X 个调用。我们会将一些数据保存在相关的 HashTable 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:29:02.563

asp.net 会话有一个很大的缺点。除非会话处于 ReadOnly 状态，否则它会锁定执行相同的 sessionId 请求。我没有以这种方式使用它，但它认为它可以解决您的任务。

[ASP.NET 会话状态概述](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)

> 并发请求和会话状态
> 
> 每个会话对 ASP.NET 会话状态的访问是独占的，这意味着如果两个不同的用户发出并发请求，则同时授予对每个单独会话的访问权限。但是，如果对同一个会话发出两个并发请求（通过使用相同的 SessionID 值），则第一个请求将获得对会话信息的独占访问权。第二个请求仅在第一个请求完成后执行。（如果因为第一个请求超过了锁超时，信息上的独占锁被释放，第二个会话也可以获得访问权。）如果@Page指令中的EnableSessionState值设置为ReadOnly，则请求只读会话信息不会导致对会话数据的独占锁定。然而，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:21:05.537

ASP.NET 会话依赖于 cookie，恶意用户很容易绕过这些 cookie。由于恶意用户似乎是您的问题，因此 ASP.NET 会话不是解决方案。

您可以编写一个包含静态 Dictionary<UserID, List<DateTime>> 的包装类，仅允许使用 1-2 种方法对字典进行操作并正确锁定它。

例如

```
class UserLogger
{
    private Dictionary<int, List<DateTime>> _visits;

    public bool AddPageVisit(int userID)
    {
       // lock dictionary
       // add or update entry for the user,
       // remove from all entries the datetimes older than a minute
       // remove entries without datetimes
       // check if number of datetimes for the user > max allowed
       // unlock dictionary
    }
}

class RestrictedController
{
   private static UserLogger _userLogger;
} 
```

免责声明：我只是在答案中写了这个伪代码，它可能包含错字。

# c - 致命错误 LNK1120：C 中有 1 个未解决的外部

> ID：13489529
> 
> 赞同：0
> 
> 时间：2012-11-21T08:55:12.973
> 
> 标签：c

通常当我收到此错误时，创建一个新项目并复制粘贴代码修复该问题，但现在它没有。

这是输出：

```
1>------ Build started: Project: myList, Configuration: Debug Win32 ------
1>  List.cpp
1>List.obj : error LNK2019: unresolved external symbol "void __cdecl printStd(struct Student >*)" (?printStd@@YAXPAUStudent@@@Z) referenced in function _main
1>C:\Users\Talmid\Desktop\אמרי\C\myList\Debug\myList.exe : fatal error LNK1120: 1 unresolved >externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

和代码：

```
#include <stdio.h>
#include <stdlib.h>

#define SUCCESS 1
#define FAILURE 0

// A definition of some information type:
typedef struct
{
char name[20];
int id;
}Student;

// A definition of a single node
typedef struct node_s
{
Student data;
struct node_s *next;
}Node;

// a definition of "list manager":
typedef struct
{
Node *start;
int num;
}List;

List *createList();
int insertToList(List *ptrList, Student *ptrStu);
int removeFirst(List *ptrList, Student *ptrStu);
Node *getRecord(List *ptrList, int recNum);
void printList(List *ptrList);
void printRec(Node *ptrNode);
void printStd(Student *std);
void freeList(List *ptrList);
void shutDown(List *ptrList);

//Creates a new 'list manager', initializes it and returns its value;
List *createList()
{
    List *ptrNewList = (List *)malloc(sizeof(List));
    if(ptrNewList)
    {
        ptrNewList->start = NULL;
        ptrNewList->num = 0;
    }
    return ptrNewList;
}

// free 'list manager'
void shutDown(List *pList)
{
    if(pList != NULL)
        free(pList);
}

// inserts one record a the head of the list
int insertToList(List *ptrList, Student *ptrStu)
{
    Node *ptrNewNode = (Node *)malloc(sizeof(Node));
    if(ptrNewNode)
    {
        ptrNewNode->data = *ptrStu;
        ptrNewNode->next = ptrList->start;
        ptrList->start = ptrNewNode;
        ptrList->num++;
        return SUCCESS;
    }
    return FAILURE;
}

// remooves the first node from the list
int removeFirst(List *ptrList, Student *ptrStu)
{
    Node *ptrDel;
    if(ptrList->start != NULL)
    {
        ptrDel = ptrList->start;
        ptrList->start = ptrDel->next;
        ptrList->num--;
        *ptrStu = ptrDel->data;
        free(ptrDel);
        return SUCCESS;
    }
    return FAILURE;
}

// gets the data of the recNum node
Node *getRecord(List *ptrList, int recNum)
{
    Node *ptrNode;
    int nodeNum = 1;
    ptrNode = ptrList->start;
    while((nodeNum<recNum) && (ptrNode != NULL))
    {
        ptrNode = ptrNode->next;
        nodeNum++;
    }
    return ptrNode;
}

// prints the entire list
void printList(List *ptrList)
{
    Node *ptrNode;
    int i;
    ptrNode = ptrList->start;

    i = 1;
    while(ptrNode != NULL)
    {
        printf("%2d: ",i);
        printRec(ptrNode);
        ptrNode = ptrNode->next;
        i++;
    }
    printf("\n");
}

// prints a given record
void printRec(Node *ptrNode)
{
    printf("name is %10s, id is %d.\n", ptrNode->data.name, ptrNode->data.id);
}

// prints a given student
void printSt(Student *std)
{
    printf("name is %10s, id is %d.\n", std->name, std->id);
}

//free all nodes (dynamic allocation)
void freeList(List *ptrList)
{
        Node *ptrDel;
    if(ptrList != NULL)
    {
        ptrDel = ptrList->start;
        while(ptrDel)
        {
            ptrList->start = ptrDel->next;
            free(ptrDel);
            ptrDel = ptrList->start;
        }
    }
}

void main()
{
    List *l1 = NULL;
    Node *n1 = NULL;
    Student *s1 = NULL;
    int i, status;
    int wantedIndexElement = 3;
    Student studentsArr[] = {
                                {"Rina",134},
                                {"Tomer",22307},
                                {"Rotem",3732},
                                {"Yosef",773},
                                {"Anat",9998},
                                {"Vered",14555},
                                {"Malkishua",878},
                                {"David",6543},
                                {"Yigal",9870},
                                {"Beni",123}
                            };
    int arrLen = sizeof(studentsArr)/sizeof(Student);
    l1 = createList();
    if(l1 == NULL)
    {
        printf("problem to allocate List (list manager)\n");
        exit(1);
    }
    for(i=0;i<arrLen;i++)
    {
        status = insertToList(l1,&studentsArr[i]);
        if(status == FAILURE)
        {
            printf("Failed to insert to the list!!!\n");
            exit(1);
        }
    }
    printList(l1);
    n1 = getRecord(l1,wantedIndexElement);

    if(n1 != NULL)
        printRec(n1);
    else
        printf("No such element %d \n",wantedIndexElement);

    s1 = (Student *)malloc(sizeof(Student));
    if (removeFirst(l1,s1) == FAILURE)
    {
        printf("Failed to remove from list!!!\n");
            exit(1);
    }

    printf("The   student has been deleted:\n");
    printStd(s1);

    freeList(l1);
    shutDown(l1);
    l1 = NULL;
    putchar('\n');
    getchar();
} 
```

由于它是一个很长的代码，您实际上不需要检查它，因此没有错误.. 甚至控制台也这么说：D

那么这个错误意味着什么？为什么我会得到它？我该如何解决它？它引导我找到一个甚至不存在的 exe。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:59:28.483

void printStd(Student *std) -> 这就是你声明的。

void printSt(Student *std) -> 这是你写的函数名

“未解析的外部符号”void __cdecl printStd“编译器告诉你它找不到任何你已经贴花的名为printStd的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:58:53.340

您有一个名为 的函数的原型`printStd`，但没有主体：

```
void printStd(Student *std); 
```

有一个`printSt`函数的主体。那应该是`printStd`吗？

# php - 如何避免警告消息

> ID：13489533
> 
> 赞同：0
> 
> 时间：2012-11-21T08:55:24.800
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

```
Warning: mysql_fetch_row() expects parameter 1 to be resource, boolean given in /home/content/97/9548797/html/backuptestmp/index.php on line 344 
```

**句法：**

```
$table3right = mysql_query("SELECT username FROM users where parent_id=$GDs[4]"); 

 $table3right3 = mysql_fetch_row($table3right);  

 while( $row = mysql_fetch_row( $table3right) ){ $VDs[] = $row[0]; } 

 $table3r1 =  $table3right3[0]; 
```

如何避免警告味精。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:57:04.483

只需添加`if`语句以检查 sql 何时返回某些内容并无错误地结束。

```
$table3right = mysql_query("SELECT username FROM users where parent_id=$GDs[4]");
if ($table3right && mysql_num_rows($table3right)) {
    $table3right3 = mysql_fetch_row($table3right);
    while( $row = mysql_fetch_row( $table3right) ){ $VDs[] = $row[0]; }
    $table3r1 =  $table3right3[0];
} else { 
 //... 
} 
```

注意 1：**不推荐使用**`mysql_*`函数。请使用[PDO](http://www.php.net/manual/en/class.pdo.php)或.**`mysqli_*`**

 **注意2：你在开始循环`mysql_fetch_row()` **之前做了。**`while()`好像你需要删除这一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:03:29.557

您不能在 "" 这样的引号内使用数组($GDs[4])。

```
$table3right = mysql_query("SELECT username FROM users where parent_id='" . $GDs[4] . "'"); 

 $table3right3 = mysql_fetch_row($table3right);  

 while( $row = mysql_fetch_row( $table3right) ){ $VDs[] = $row[0]; } 

 $table3r1 =  $table3right3[0]; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-21T08:58:53.323

为了避免警告信息使用

```
error_reporting(0); 
```**

# tomcat - liferay 6.1 & Tomcat 7 - 更改端口

> ID：13489537
> 
> 赞同：1
> 
> 时间：2012-11-21T08:55:32.677
> 
> 标签：tomcat, dns, liferay, hosts, connector

在 Tomcat 上安装 Liferay 6.1 后，我想以`http:// myportal.local`.

我更改文件主机：

```
127.0.0.1 myportal.local 
```

我更改文件`server.xml`

从`<Connector port="8080"...`到`<Connector port="80"...`

但是当我输入 URL`http:// localhost`或`http:// myportal.local`响应是一个白页时

> 有用！

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:02:59.420

端口 80 是 apache 使用的所有 http 请求的端口。通过这条线

```
127.0.0.1 myportal.local 
```

你已经给你的本地主机起了一个名字，所以

```
http://localhost and http://myportal.local 
```

将指向您的 apache 端口 80

现在您将看到一个带有“It works”的白页。这是您的 apache 中存在的 index.html 文件。

所以你要做的是，将你的tomcat端口保持为8080，并在你的apache中编辑你的workers.properties和httpd.conf，并将所有请求重定向到你的tomcat。

然后您可以将您的 webapp 放在 webapps/Root 中或相应地编辑您的 server.xml 以反映 url 更改。

编辑完所有这些文件后不要忘记重新启动 apache 和 tomcat。

# knockout.js - 淘汰赛 - 显示日期格式 dd-MM-yyy 但使用 jqm DateBox 将字符串作为日期存储在视图模型中

> ID：13489540
> 
> 赞同：0
> 
> 时间：2012-11-21T08:55:37.483
> 
> 标签：knockout.js, datebox

我是淘汰赛的新手......我有以下问题。我正在使用`jqm DateBox`设置日期和淘汰插件来管理`viewmodel`. 我想以格式`dd-mm-yyyy`（原样）显示日期，但同时我希望`viewmodel`存储的日期不是字符串而是`Date()`. 这可能吗？
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:12:18.360

我已经为 jQuery UI Datepicker 做了这个，我猜它与 Mobile 类似。从您的自定义日期框绑定的 init 函数中

```
ko.utils.registerEventHandler(element, "change", function () {
    var observable = valueAccessor();
    observable($(element).datepicker("getDate"));
}); 
```

有关完整的日期选择器示例，请参阅我的绑定集合 [https://github.com/AndersMalmgren/Knockout.Bindings](https://github.com/AndersMalmgren/Knockout.Bindings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:20:07.547

有关信息，这是代码：

```
ko.bindingHandlers.jqmDateBox = {
    'init': function (element, valueAccessor, allBindingsAccessor, context) {
        ko.utils.registerEventHandler(element, "change", function () {
            var observable = valueAccessor();
            observable($(element).data('datebox').theDate);
        });
    }
}; 
```

# c++ - 在 DOS 窗口中的任意位置写入

> ID：13489542
> 
> 赞同：0
> 
> 时间：2012-11-21T08:55:44.697
> 
> 标签：c++, windows, dos, roguelike

我正在寻找一种以 Roguelike 方式显示“DOS”输出的方法，即。看起来你有一个充满字符（级别）的 DOS 窗口，当用户按下按钮、用鼠标点击等时，这些字符可以改变或移动。

在普通的 DOS 窗口中（比如经典 c++ 程序或 .bat 的输出），您只能“编写更多文本”，如果有任何变化很麻烦并导致伪影（更新后的关卡会慢慢滚动），您必须重新绘制整个关卡）。

我知道我可以使用 Qt 或 SDL 并用字符绘制 2D 瓷砖来克服这个问题，但我想做的事情似乎很复杂，有没有一种简单的方法（比如 C++ 库）可以让我在任何地方绘制字符/一个'DOS'窗口？

谢谢！

[编辑] 谢谢，我会检查你所有的建议，+1！

[编辑]PDCurses 获胜，可以在此处找到有关如何使用它的教程（上面写着 NCurses，但它对于一个简单的 Hello world 示例非常有效）： [http ://tldp.org/HOWTO/NCURSES-Programming-HOWTO/](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:05:10.453

在编写 Rogue 时，它​​使用了[curses 屏幕控制库](http://en.wikipedia.org/wiki/Curses_%28programming_library%29)。

您可以在 Windows 上获得它的各种实现。一些将 curses 调用转换为普通的 Windows 控制台调用：

[适用于 Windows 的 PDCurses](http://gnuwin32.sourceforge.net/packages/pdcurses.htm)

其他人制作一个真正的 GUI 窗口，然后在“伪造”终端中绘制诸如粗体和下划线之类的增强功能*（就像您使用 Qt 或 SDL 绘制图块的想法一样）*：

[“真实”Windows 的 PDCurses](http://www.projectpluto.com/win32a.htm)

如果您想将自己直接绑定到 Microsoft 很少使用的控制台 API 函数，您可以这样做。但如果怀旧是你在这个时代追求这样一个 UI 的目标，那么学习 curses 会让你跨平台*，*让你更好地理解 Rogue 源代码之类的东西。

如果你的目标是进入实际的 DOS 仿真（根据[DOSBox](http://www.dosbox.com/wiki/Main_Page)），还有另一个流行的选择：*直接访问屏幕内存*。您可以四处看看和戳...在正确的位置写一个 65，然后出现一个“A”。

然后是[ANSI.SYS](http://www.dosbox.com/wiki/Main_Page)，它在当时的许多公告板系统上都使用过……但同样已经过时了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:01:34.563

这是一个 MSDN 链接，其中包含一系列可能对您有所帮助的功能：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx)

很可能你可以

```
SetConsoleCursorPosition
WriteConsole 
```

一遍又一遍地做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:01:48.983

如果它真的是 DOS，那么 ansi.sys 将启用颜色代码和[定位光标](http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x361.html)：在[服务器故障](https://serverfault.com/questions/106028/how-to-enable-ansi-escape-codes-in-windows-cmd)有一个关于在 windows COMMAND.COM 中启用 ansi 代码的线程。没有测试，HTH。

您可能还想检查[ncurses](https://stackoverflow.com/questions/138153/is-ncurses-available-for-windows)，这是一个移植到许多系统的库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T10:41:02.467

另一种选择：

创建文本区域小部件，例如 Qt或`QPlainTextEdit`，将其设为只读，将字体设置为固定宽度，并用所需颜色的文本填充它，固定数量的行上的固定字符数。`QTextEdit``QTextBrowser`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T14:53:54.473

试试这个：

```
#include <iostream>
#include <windows.h> 
using namespace std;

void gotoxy(int x, int y)
{
  static HANDLE hStdout = NULL;
  COORD coord;

  coord.X = x;
  coord.Y = y;

  if(!hStdout)
  {
    hStdout = GetStdHandle(STD_OUTPUT_HANDLE);
  }

  SetConsoleCursorPosition(hStdout,coord);
}

int main(void)
{

  gotoxy(30 , 12);
  cout<<" Writing anywhere \n";

  gotoxy(1 , 22);
  cout<<" \nPress any key to continue\n";
  cin.ignore();
  cin.get();

   return 0;
} 
```

# jquery - 选项卡式内容未出现在方向上

> ID：13489545
> 
> 赞同：1
> 
> 时间：2012-11-21T08:55:55.640
> 
> 标签：jquery, html, css

有 2 个选项卡都显示 jQuery 滑块 - flexslider（这是一个移动站点）。在纵向模式下有 2 个图像（所以 2 个 div），在横向模式下有 3 个图像（所以 3 个 div）。它们保存在不同的容器代码中，由 CSS 控制，根据方向显示哪个。问题是第一个选项卡在设备拾取方向时显示正常，但是当您切换到另一个选项卡时，内容不会出现，在普通桌面浏览器中测试它确实会在窗口稍微调整大小时出现。简而言之，代码如下：

```
HTML:

    <!--tabs-->
    <div id="toggleLeft" class="active toggleBox"><a href="" >New Promotions</a></div>
    <div id="toggleRight" class="toggleBox"><a href="">Ending soon</a></div>

    <!--containers-->

    <div id="toggleBoxLeft">
      <div id="mainPortrait" role="main">SLIDER CODE FOR PORTRAIT VIEW</div>
      <div id="mainLandscape" role="main">SLIDER CODE FOR LANDSCAPE VIEW</div>
    </div>

    <div id="toggleBoxRight">
      <div id="mainPortrait2" role="main">SLIDER CODE FOR PORTRAIT VIEW</div>
      <div id="mainLandscape2" role="main">SLIDER CODE FOR LANDSCAPE VIEW</div>
    </div>

    CSS:

    @media all and (orientation:landscape){

    #mainPortrait           {
        margin-left: 0px; 
        margin-top: 0px;
        overflow: hidden;
        visibility:hidden;
    }

    #mainLandscape          {
        margin-left: 0px; 
        margin-top: 0px;
        overflow: hidden;
        visibility:visible;
    }

    #mainPortrait2          {
        margin-left: 0px; 
        margin-top: 0px;
        overflow: hidden;
        visibility:hidden;
    }

    #mainLandscape2             {
        margin-left: 0px; 
        margin-top: 0px;
        overflow: hidden;
        visibility:visible;
    }

    } 
```

即使 CSS 声明为，我如何“强制”浏览器加载两个选项卡内容`display:none;`？

# android - getAuthToken y Android 不调用任何回调

> ID：13489546
> 
> 赞同：2
> 
> 时间：2012-11-21T08:55:55.453
> 
> 标签：android, accountmanager

我在 Android 中有一个应用程序，我正在尝试使用 AccountManager 获取 AuthToken 并使用 Facebook 或 Twitter 执行操作。所以我有这个：

```
AccountManager am = AccountManager.get(this);
Account[] accounts = am.getAccountsByType("com.facebook.auth.login");
Bundle options = new Bundle();
Account myAccount=null;

    for (int i=0;i<accounts.length;i++) {
        if (accounts[i].type.equals("com.facebook.auth.login")) myAccount=accounts[i];
        //options.putString("facebookUser", accounts[i].name);
    }

    am.getAuthToken(
            myAccount,                     // Account retrieved using getAccountsByType()
            "Manage your tasks",            // Auth scope
            options,                        // Authenticator-specific options
            this,                           // Your activity
            new OnTokenAcquired(),          // Callback called when a token is successfully acquired
            new Handler(new OnError())); 
```

我的两个回调是 onTokenAcquired：

```
public class OnTokenAcquired implements AccountManagerCallback<Bundle> {

@Override
public void run(AccountManagerFuture<Bundle> result) {
    try {
        Bundle bundle = result.getResult();
        Log.e("onTokenAcquired",bundle.getString(AccountManager.KEY_AUTHTOKEN));
    } catch (OperationCanceledException e) {
        Log.e("onTokenAcquired","operationcanceled");
    } catch (AuthenticatorException e) {
        Log.e("onTokenAcquired","authenticatorexception");
    } catch (IOException e) {
        Log.e("onTokenAcquired","IOException");
    }
}
} 
```

和 OnError：

```
public class OnError implements Callback {

@Override
public boolean handleMessage(Message msg) {
    Log.e("onError","ERROR");
    return false;
}

} 
```

我正在关注 Android 开发人员指南 (http://developer.android.com/intl/es/training/id-auth/authenticate.html)。所以，我有两个选项，错误或获取令牌，在每个选项中我都有一个 Log.e() 来读取 SOMETHING，但没有写入。

有谁能够帮我？如果我遇到错误或没有获得令牌，至少我会有一些工作要做，但我只是不知道发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-09T00:10:05.680

从文档中看并不是很明显，但是如果需要用户干预，您调用的 getAuthToken 变体将永远不会调用回调。这里有一些解决方法：

[https://code.google.com/p/android/issues/detail?id=25473](https://code.google.com/p/android/issues/detail?id=25473)

我不知道这是否是您遇到的具体问题，但这可能无济于事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:30:53.823

我认为 Facebook 身份验证器不支持 getAuthToken。此外，您使用的身份验证范围“管理您的任务”是“Google 任务”的范围，如果支持 getAuthToken，则很可能不是正确的范围。

我建议您改用[适用于 Android 的 Facebook SDK](http://developers.facebook.com/android/)。有了这个，很容易获得身份验证令牌。该 SDK 还为没有安装官方 facebook 或在手机中添加了 facebook 帐户的用户提供了一个备用方案，非常简洁。

另请参阅：[如何从保存在 Android 上的帐户中检索 Facebook-AuthToken](https://stackoverflow.com/questions/4593061/how-to-retrieve-an-facebook-authtoken-from-the-accounts-saved-on-android)

# javascript - JQueryMobile：Listview 过滤器 - 如何获取结果列表？

> ID：13489551
> 
> 赞同：0
> 
> 时间：2012-11-21T08:56:12.043
> 
> 标签：javascript, jquery-mobile

我动态生成了我的列表视图。现在，由于列表生成期间的事件绑定，listview ul 的每个 li 元素都有一个特定的事件。现在这个 listview data-filter="true"。

然后从另一个文本字段（来自另一个 jqm 页面），我需要输入一个字符串，在输入键时我需要将值传递给过滤器字段文本（用于过滤列表视图的那个）然后获取对应的 li 元素到传递的值。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:42:28.937

我以不同的方式处理它：

```
$.each($('#myListView').children(),function(){
    var text = $(this).attr("data-filtertext");
    if(text.toLowerCase().search(search) > 0){
        //do event
        //Since I generate the data-filtertext attr, 
        //and I've guarantee that it wont have duplicate, so: 
        $(this).children("a").click();
    }
}); 
```

# android - JellyBean 4.2 上的 Gif 动画不显示

> ID：13489555
> 
> 赞同：4
> 
> 时间：2012-11-21T08:56:24.723
> 
> 标签：android, movie

我在用着

*   Nexus 7 安卓 4.2
*   SDK 和 eclipse 是 adt-bundle-windows 版本。*2012-11-21下载
*   操作系统是 Windows7 64 位家庭高级版 sp1

我尝试在以下位置运行示例代码

> ...\ApiDemos\src\com\example\android\apis\graphics\BitmapDecode.java。

它在模拟器和我的 nexus 7 上成功构建和运行。问题是应用程序不显示`*.gif`动画，但其他 3 个`*.bmp`正确显示。屏幕上甚至没有任何黑框。

我尝试`*.gif`了来自互联网或`SDK`示例图像文件的不同文件。

我已在 google 组中附加了这些文件。[这是链接](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/android-developers/2IA8MjOjO_4)。

在调试模式下，我检查了一些参数，如下所示：

1.  输入流与gif文件长度相同，所以我认为读取成功。
2.  Movie.draw x,y 为正数。
3.  可能是帧率太高，所以我尝试通过延迟来放慢速度并尝试了 Movie.setTime(10); 所以它至少必须显示一些静态图片。但是在我的设备/模拟器上只是黑屏。

谢谢你。

问候， Murnesty

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T12:00:58.267

Android 不支持动画 GIF。

# objective-c - 在 Mac OSX 上监控鼠标状态

> ID：13489559
> 
> 赞同：4
> 
> 时间：2012-11-21T08:56:31.113
> 
> 标签：objective-c, macos, cocoa, device-driver, macos-carbon

我想在 OS X 上监视系统范围内的鼠标状态（连接/断开连接）。我检查了 Apple 开发人员库，但找不到任何线索。

我的目标是同时监控 USB 和蓝牙鼠标。我可以使用任何 API 吗？

非常感谢。

--N

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:04:50.563

您可以使用 I/O Kit 的 HID 管理器 API 来查明系统中何时出现新的 HID（人机接口设备）或与系统断开连接。这本身就是一个复杂的话题，所以我不会向您抛出随机代码 - 只需阅读[访问 HID 设备](http://developer.apple.com/library/mac/documentation/DeviceDrivers/Conceptual/HID/new_api_10_5/tn2187.html#//apple_ref/doc/uid/TP40000970-CH214-SW2)（特别是[匹配 HID 设备](http://developer.apple.com/library/mac/documentation/DeviceDrivers/Conceptual/HID/new_api_10_5/tn2187.html#//apple_ref/doc/uid/TP40000970-CH214-SW9)和[注册拔出通知](http://developer.apple.com/library/mac/documentation/DeviceDrivers/Conceptual/HID/new_api_10_5/tn2187.html#//apple_ref/doc/uid/TP40000970-CH214-SW69)部分）。包括示例代码。

# groovy - 如何使用运算符“？”从数组中获取项目？

> ID：13489565
> 
> 赞同：2
> 
> 时间：2012-11-21T08:56:42.073
> 
> 标签：groovy

Groovy 代码：

```
def line = "aa bb"
println line?.split("\\s+")?[1] 
```

我想用`?`一个数组来获取一个项目。如果数组为 null，则返回 null，就像`?.`.

但是上面的代码无法编译。如何解决？或者还有其他简单的替代解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:05:03.637

您可以使用`getAt`代替`[]`（[下标运算符](http://groovy.codehaus.org/Operators)）

```
def line = "aa bb"
println line?.split("\\s+")?.getAt(1) 
```

[http://groovyconsole.appspot.com/script/801001](http://groovyconsole.appspot.com/script/801001)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T09:07:12.170

这是 List 的默认行为：

```
println (line?.split("\\s+")as List)[1] 
```

# javascript - 早期的JS石头剪刀布游戏

> ID：13489566
> 
> 赞同：0
> 
> 时间：2012-11-21T08:56:50.647
> 
> 标签：javascript

我正在尝试制作摇滚纸.. 游戏，但似乎代码仅在我打领带时才有效。我可能在下车的过程中搞砸了。另外我想问一下您填写的提示窗口上的数字是字符串还是数字？任何帮助表示赞赏。谢谢！

```
// rock beats scissors (1 beats 3)
// paper beats rock (2 beats 1)
// scissors beat paper (3 beat 2)

 var player1= prompt("Player ONE, choose (1) for rock, (2) for paper, (3) for scissors");
 var player2 = prompt("Player TWO, choose (1) for rock, (2) for paper, (3) for scissors");

 function game (player1,player2)
 {

    if (player1===player2){
    alert("its a tie");
    }
    else
    { 
      if (player1+player2==="4")
      {
        if(player1==="1"){
        alert("Rock beats Scissors, Player one wins");
        }else {
        alert("Rock beats Scissors, Player Two wins");
        }

      }
      if (player1+player2==="3")
        {
         if (player1==="1"){
            alert("paper beats rock, player One wins");
         }else {
          alert ("paper beats rock, player Two wins");
          }
         }  
      if (player1+player2==="5")
        {
          if (player1==="3"){
            alert("scissors beats paper, Player One wins");
            }else{
            alert("scissors beats papaer, player Two wins");
            }

        }
    }
};
game(player1,player2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:01:48.180

您正在连接字符串，而不是添加数字，因此您`player1+player2==="3"`实际上会产生`12`or `21`。您想先将字符串转换为数字。

将此代码放在 tie check 的 else 块的顶部。

```
player1 = parseInt(player1);
player2 = parseInt(player2); 
```

作为扩展，您需要清理播放器输入以确保它只包含数字，因为如果传递的不是数字字符串，此方法将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:03:17.000

您正在对 player1..2 变量进行字符串连接而不是积分数学。

请注意，您还需要更改比较，而不仅仅是将字符串解析为整数。

尝试：

```
 var player1= parseInt(prompt("Player ONE, choose (1) for rock, (2) for paper, (3) for scissors"));
 var player2 = parseInt(prompt("Player TWO, choose (1) for rock, (2) for paper, (3) for scissors"));

 function game (player1,player2)
 {

  if (player1===player2){
    alert("its a tie you mofos");
  }
  else
  { 
    if (player1+player2===4)
    {
      if(player1===1){
        alert("Rock beats Scissors, Player one wins");
      }else {
        alert("Rock beats Scissors, Player Two wins");
      }
    }
    if (player1+player2===3)
    {
      if (player1===1){
        alert("paper beats rock, player One wins");
      }else {
        alert("paper beats rock, player Two wins");
      }
    }  
    if (player1+player2===5)
    {
      if (player1===3){
        alert("scissors beats paper, Player One wins");
      }else{
        alert("scissors beats papaer, player Two wins");
      }
    }
  }
};
game(player1,player2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:03:22.260

除了鲁尔泽写的，还有一个错误：

在`player1+player2==="4"`您尝试添加两个整数然后将它们与字符串进行比较的行中。

`===`运算符不仅比较值，还比较类型。当您将整数与字符串进行比较时，它将返回 false。

使用比较`==`器，其中数字 4 等于字符串“4”，或者与数字 4 进行比较：

```
player1+player2 === 4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T09:32:26.827

试试这个！希望能帮助到你！

```
--javascript code for rock, paper, scissors...--

var userChoice = prompt("Please type in your choice : rock , paper or scissors?");
var computerChoice = Math.random();

if (computerChoice < 0.34)
{
    computerChoice = "rock";
}
else if(computerChoice <= 0.67)
{
    computerChoice = "paper";
}
else {
    computerChoice = "scissors";
}

var compare = function (userChoice, computerChioce)
{
    if (userChoice === computerChioce)
    {
        return "The result is a tie!";
    }
    else if (userChoice === "rock")
    {
        if(computerChioce === "scissors")
        {
            return "rock wins" + " ," + "rock breaks scissors";
        }
        else if (computerChioce === "paper")
        {
            return "paper wins" +  " ,"  + "paper captures rock";
        }
    }
    else if (userChoice === "paper")
    {
        if (computerChioce === "rock")
        {
            return "paper wins" +  ", "  + "paper captures rock";
        }
        else if (computerChioce === "scissors")
        {
            return "scissors win" + ", " + "scissors cuts paper";
        }
    }
    else if (userChoice === "scissors")
    {
        if (computerChioce === "rock")
        {
            return "rock wins" + " " + "rock breaks scissors";
        }
        else if (computerChioce === "paper")
        {
            return "scissors win" + ", " + "scissors cuts paper";
        }
    }
};

console.log("You chose" + " " + userChoice + ".");
console.log("Computer chose" + " " + computerChoice + ".");
compare (userChoice, computerChoice); 
```

# hadoop - 无法从 hadoop URL 读取数据

> ID：13489569
> 
> 赞同：0
> 
> 时间：2012-11-21T08:56:55.527
> 
> 标签：hadoop

我正在关注 Tom White 的“Hadoop - The Definitive Guide”。当我尝试使用 Java 接口从 hadoop URL 读取数据时，我收到以下错误消息：

```
hadoop@ubuntu:/usr/local/hadoop$ hadoop URLCat hdfs://master/hdfs/data/SampleText.txt
12/11/21 13:46:32 INFO ipc.Client: Retrying connect to server: master/192.168.9.55:8020\. Already tried 0 time(s).
12/11/21 13:46:33 INFO ipc.Client: Retrying connect to server: master/192.168.9.55:8020\. Already tried 1 time(s).
12/11/21 13:46:34 INFO ipc.Client: Retrying connect to server: master/192.168.9.55:8020\. Already tried 2 time(s).
12/11/21 13:46:35 INFO ipc.Client: Retrying connect to server: master/192.168.9.55:8020\. Already tried 3 time(s).
12/11/21 13:46:36 INFO ipc.Client: Retrying connect to server: master/192.168.9.55:8020\. Already tried 4 time(s).
12/11/21 13:46:37 INFO ipc.Client: Retrying connect to server: master/192.168.9.55:8020\. Already tried 5 time(s). 
```

URLCat 文件的内容如下：

```
import java.net.URL;
import java.io.InputStream;
import org.apache.hadoop.io.IOUtils;
import org.apache.hadoop.fs.FsUrlStreamHandlerFactory;

public class URLCat {
static {
    URL.setURLStreamHandlerFactory(new FsUrlStreamHandlerFactory());
}

public static void main(String[] args) throws Exception {
    InputStream in = null;
    try {
        in = new URL(args[0]).openStream();
        IOUtils.copyBytes(in, System.out, 4096, false);
    } finally {
        IOUtils.closeStream(in);
    }
}
} 
```

/etc/hosts 文件内容为：

```
127.0.0.1   localhost
127.0.1.1   ubuntu.ubuntu-domain    ubuntu

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters

# /ect/hosts Master and slaves
192.168.9.55    master
192.168.9.56    slave1
192.168.9.57    slave2
192.168.9.58    slave3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:06:23.927

首先，我会检查 Hadoop 守护进程是否正在运行。一个方便的工具是[jps](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jps.html)。确保（至少）名称节点和数据节点正在运行。

如果仍然无法连接，请检查 url 是否正确。正如您提供的*hdfs://master/*（没有任何端口号）Hadoop 假设您的名称节点侦听端口**8020**（默认）。这就是您在日志中看到的内容。

For a quick lookup in `core-site.xml` (*fs.default.name*) you can check whether you have a custom port defined for the filesystem URI (in this case 54310).

# xcode - LevelHelper 和 Box2D Collions：如何获得“标签”？

> ID：13489570
> 
> 赞同：2
> 
> 时间：2012-11-21T08:57:01.317
> 
> 标签：xcode, cocos2d-iphone, box2d, collision, levelhelper

我已经成功制作了一个非常简单的 LevelHelper/Box2D/Cocos2D 项目。我现在正尝试按照[此处](http://www.levelhelper.org/app/documentation/docs/COCOS2D_Box2d_collision.htm)文档中的说明注册碰撞。

我使用的示例代码如下：

```
[lh registerBeginOrEndColisionCallbackBetweenTagA:COIN
                                          andTagB:MARIO
                                       idListener:self
                                      selListener:@selector(beginEndCollisionBetweenMarioAndCoin:)]; 
```

我的问题是：我如何获得标签？我在“常规属性”窗格的 LevelHelper 中设置它是否正确？（以下）

![LevelHelper 标记设置为 CHARACTER_TAG？](../Images/dab42b59708173f2de9fd83470042b9a.png)

在 LevelHelper 的自定义属性窗口中，“CHARACTER_TAG”的“标记值”为 1，但如果我尝试将其放入上面的代码中而不是“MARIO”，XCode 会感到不安，因为它“无法初始化 'enum LevelHelper_TAG' 类型的参数'int' 类型的右值”（很公平）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:49:00.543

我想通了！

在 LevelHelper 中设置标签后`CHARACTER_TAG`，我需要使用 File\Generate Code\Cocos2D 和 Box2D 重新生成我的代码。然后我可以简单地输入 CHARACTER_TAG 代替 MARIO，如我的问题所示！

我希望这可以帮助别人！

# android - 另一个选择语句中的 Sqlite 选择语句

> ID：13489573
> 
> 赞同：-1
> 
> 时间：2012-11-21T08:57:10.303
> 
> 标签：android, sql-order-by, android-sqlite, sql

我为一个 android 项目创建了一个 sqlite 数据库。我想根据另一个 select 语句结果订购一个 select 语句。

我有两张这样的桌子；

**表 A：**

[A_ID] [姓名] **[B_ID]**

**表 B：**

**[B_ID]** [B_Detail]

现在，我可以选择TableA，但我无法按照B_Detail排序。

我曾尝试编写 rawQuery，但没有完成。

**编辑：**

我用这个语句解决了问题；

```
database.rawQuery("SELECT Table_A.* FROM Table_A JOIN Table_B USING (B_ID) ORDER BY Table_B.B_Detail]", null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:08:03.213

尝试这个，

SELECT [A_ID],[Name],[B_ID] FROM TableA WHERE [B_ID] in(SELECT [B_ID] FROM [B_Detail])

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:07:47.147

您可以执行嵌套查询，例如

```
String sql="Select A_ID, Name, B_ID from Table A where B_ID IN (Select B_ID from Table_B)";
db.rawQuery(sql, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:14:52.850

我得到了答案。

database.rawQuery("SELECT Table_A.* FROM Table_A JOIN Table_B USING (B_ID) ORDER BY Table_B.B_Detail]", null);

# forms - MVC jquery ajax 表单服务器端验证

> ID：13489574
> 
> 赞同：1
> 
> 时间：2012-11-21T08:57:14.933
> 
> 标签：forms, jquery, asp.net-mvc-4, validation

我们的网站上有许多表单，这些表单使用 jquery .dialog 显示，我们使用 ajax 发布请求提交它们。

我已经进行了相当多的研究，据我所知，对于如何从服务器端返回验证错误作为 ajax 请求的结果，没有任何明确的模式。

几乎我能找到的唯一模式是发布表单，然后在服务器端进行验证，无论哪种情况，都返回一个封装结果的 json 对象，如果结果不正确，则返回表单 html

IE。

```
{result: true}
{success: false, html =  "<form>....</form>"} 
```

因此，在结果为假的情况下，您需要重新连接附加到表单上项目的任何事件，因为您将用具有验证错误的新表单替换旧表单。

这似乎是一种不错的方法，但是当他们只需要验证消息并且您还被迫重新连接表单时，您最终可能会向客户端返回更多您需要的数据，这有点烦人。

我确实发现另一个提到以某种方式获取验证错误并将它们从操作返回到一个 json 对象中，并以某种方式告诉客户端将它们显示在正确的字段中。

是否有任何框架可以让这更容易，或者我应该自己编写还是坚持返回表单的整个部分并在验证不正确时重新连接它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:37:56.667

我不知道有任何框架可以处理这种特殊情况——而且我不知道有明确的最佳实践——但是序列化验证错误并将它们作为 JSON 对象返回很容易。您可以在 ModelStateDictionary 上尝试此扩展方法：

```
public static IEnumerable<ValidationResult> GetValidationResults(this ModelStateDictionary dictionary)
{
    foreach (var key in dictionary.Keys)
        foreach (var error in dictionary[key].Errors)
            if (error != null)
                yield return new ValidationResult(error.ErrorMessage, new string[] { key });
} 
```

在控制器中：

```
if (!ModelState.IsValid)
{
    return new JsonResult(ModelState.GetValidationResults());
} 
```

但你是对的，然后你必须遍历对象并将错误附加到正确的字段。如果您将 ClientValidationEnabled 和 UnobtrusiveJavaScriptEnabled 设置为 true，则循环将如下所示：

```
$.each(errors, function(i, item) {
    $('span[data-valmsg-for=' + item.MemberNames[0] + ']').html(item.ErrorMessage);
}) 
```

如果没有，将错误消息与它们各自的字段匹配起来并不难，因为对象包含字段名称。这肯定会为您节省一些数据，但它将验证责任的大部分转移到了 Javascript 中。就像我说的，我不知道是否有明确的最佳实践，但我过去曾成功使用过这种方法。

# mysql - MySql：从其他表加入并计算结果

> ID：13489577
> 
> 赞同：3
> 
> 时间：2012-11-21T08:57:24.737
> 
> 标签：mysql, sql, join

我希望标题不会太混乱——我不知道怎么称呼它。

假设您有一张产品表：

```
+----+---------------------------+-------+
| id | name                      | stock |
+----+---------------------------+-------+
|  1 | 1\. Product of set         |     2 |
|  2 | 2\. Product of set         |     5 |
|  3 | 3\. Product of set         |     3 |
|  4 | Set of Product 1, 2 and 3 |     0 |
+----+---------------------------+-------+ 
```

产品 1-3 可以单独出售，也可以成套出售（即产品 4）。所以我们有另一个表：

```
+---------+-------------+-------+
| product | set_product | count |
+---------+-------------+-------+
|       1 |           4 |     1 |
|       2 |           4 |     2 |
|       3 |           4 |     1 |
+---------+-------------+-------+ 
```

...它指出产品 4 由 1x 产品 1、2x 产品 2 和 1x 产品 3 组成。

在产品表中有一个“库存”列，表示每种产品当前有多少库存。

**Q 是：如何通过一个 SELECT 获得产品 4 的库存（这当然取决于产品 1-3 的库存）？**

* * *

为了设置测试用例，我创建了以下代码：

```
CREATE TABLE products (
    `id` int unsigned NOT NULL AUTO_INCREMENT, unique key(id),
    `name` TINYTEXT,
    `stock` int NOT NULL DEFAULT 0 
);

CREATE TABLE sets (
    `product` int unsigned NOT NULL,
    `set_product` int unsigned NOT NULL,
    `count` int NOT NULL
);

INSERT INTO products SET id=1, name="1\. Product of set", stock=2;
INSERT INTO products SET id=2, name="2\. Product of set", stock=5;
INSERT INTO products SET id=3, name="3\. Product of set", stock=3;
INSERT INTO products SET id=4, name="Set of Product 1, 2 and 3";

INSERT INTO sets SET product=1, set_product=4, count=1;
INSERT INTO sets SET product=2, set_product=4, count=2;
INSERT INTO sets SET product=3, set_product=4, count=1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:08:02.717

尝试这个

```
select p.name, ifnull(min(ps.stock / s.count), p.stock) as stock
from products as p
    left outer join sets as s on s.set_product = p.id
    left outer join products as ps on ps.id = s.product
group by p.name 
```

[**SQL FIDDLE**](http://sqlfiddle.com/#!2/3be64/26)
你也可以做联合解决方案

```
select p.id, p.name, min(ps.stock / s.count) as stock
from products as p
    inner join sets as s on s.set_product = p.id
    inner join products as ps on ps.id = s.product
group by p.id, p.name

union all

select p.id, p.name, p.stock
from products as p
where p.id not in (select distinct tt.set_product from sets as tt) 
```

[**SQL 小提琴**](http://sqlfiddle.com/#!2/3be64/32)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:08:14.010

我会尝试这样的事情......（它是 MS SQL，但它不应该离事实太远......）

```
SELECT DISTINCT s.set_product
              , ISNULL(MIN((p.stock/s.count)),0) calculated_stock
FROM [sets] s
INNER JOIN products p
  ON p.id = s.product
GROUP BY s.set_product; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:05:40.177

您应该购买所有套装产品的最低库存。坚果您应该记住，该产品的商品数量：

```
 select 
       coalesce( min( p.stock / s.`count`), 0)
       as stock_product
 from 
   products p 
 left outer join
   sets s on
      p.id = s.product
 where
   set_product = 4 
```

[http://sqlfiddle.com/#!2/3be64/19/0](http://sqlfiddle.com/#!2/3be64/19/0)

# ios - iOS 水平菜单 w ScrollView

> ID：13489582
> 
> 赞同：2
> 
> 时间：2012-11-21T08:57:36.883
> 
> 标签：ios, paging, horizontalscrollview

我想制作一个像底部图片顶部的水平滚动视图菜单。（新闻通讯，城市，女性等）我正在研究两天。但我没有找到解决我的问题的方法。

这个菜单必须可以循环播放。所选项目将位于屏幕中心。并且有分页的效果。但是，当我在滚动视图上启用 pagingEnabled 时，它会为每一帧制作页面。我想要一个页面每个菜单项。

有人可以给我一些想法吗？

谢谢你。

![这个应用在 AppStore 中叫 Gild](../Images/bfbaa74a0e432bfbff842ff95cb900a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:48:57.133

有一些不错的选项可以将内容包装在 UIScrollView 中。签出：[让 UIScrollView 环绕](https://stackoverflow.com/questions/3071623/make-uiscrollview-wrap-around).

也看看这个 github 项目：[https ://github.com/jonah-carbonfive/WrappingScrollView](https://github.com/jonah-carbonfive/WrappingScrollView)

# vba - VBA Word - BreakLink 给我一个错误

> ID：13489588
> 
> 赞同：0
> 
> 时间：2012-11-21T08:58:03.903
> 
> 标签：vba, ms-word

我正在尝试使用宏在 Word 文档中嵌入链接图像。

当我到达断开链接的行时，我不断收到此错误：运行时错误 5352 链接不存在

这是我用来断开链接的代码：

```
For Each objField In ActiveDocument.Fields
  If Not objField.LinkFormat Is Nothing Then
    objField.LinkFormat.BreakLink
    ActiveDocument.UndoClear
  End If
Next 
```

任何想法为什么这不起作用？我不明白为什么会收到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:33:46.553

我找到了解决方案 - 在尝试断开链接之前刷新图像：

```
For Each objField In ActiveDocument.Fields
  If Not objField.LinkFormat Is Nothing Then
    objField.LinkFormat.Update
    objField.LinkFormat.BreakLink
    ActiveDocument.UndoClear
  End If
Next 
```

# email - 如何使用 java 邮件 API 从邮件服务器检索所有或匹配的电子邮件地址？

> ID：13489589
> 
> 赞同：0
> 
> 时间：2012-11-21T08:58:18.160
> 
> 标签：email, jakarta-mail, email-client, mail-server

我正在尝试在我们正在开发的电子邮件客户端中实现一项功能，以查找特定域中的电子邮件地址列表，一旦最终用户在 to/cc/bcc 框中键入前 3 个字母。因为邮件只会发送到一个预定义的域（内部域）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:58:18.720

通常，无法找到域中的所有有效电子邮件地址。即使在可能的情况下，也没有标准的方法来做到这一点。JavaMail 不会在这里为您提供帮助。如果您的邮件服务器支持这种功能，您将需要弄清楚如何以特定于产品的方式来实现它。

# android - 在 Monodroid 中重写 ArrayAdapter 的 GetItem 方法

> ID：13489590
> 
> 赞同：2
> 
> 时间：2012-11-21T08:58:21.827
> 
> 标签：android, xamarin.android

我有一个在我的 monodroid 应用程序中覆盖 ArrayAdapter 的类。它用于为文本视图创建自动完成。它的代码是：

```
class PlacesAutoCompleteAdapter: ArrayAdapter  <String>  ,IFilterable 
{
    private List<String> resultList;

    public PlacesAutoCompleteAdapter(Context context, int textViewResourceId):
        base(context,textViewResourceId)
        {

        }

    public override int Count 
     {
        get 
        {
            return base.Count;
        }
    }

    public override  String GetItem (int position)
    {
        return resultList[position];
    }

} 
```

但它给出了这个错误：

```
 cannot override inherited member 'Android.Widget.ArrayAdapter<string>.GetItem(int)' because it is not marked virtual, abstract, or override (CS0506) 
```

我很困惑。这个错误是为了什么？肯定 GetItem 方法在基类中是虚拟的，我使用了覆盖词。这是什么错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-11T10:53:32.263

如果您扩展 ArrayAdapter 而不是 ArrayAdapter<String> 并将此签名用于 GetItem，您将能够覆盖它：

```
public override Java.Lang.Object GetItem(int position) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:05:11.113

我不确定问题是什么，但我总是从**BaseAdapter**继承并将项目列表作为参数传递给构造函数

这是我如何做的一个例子

```
public class ImageAdapter : BaseAdapter
    {
            private readonly List<string> _imagesUrls;
            private readonly BaseActivity _activity;

            public ImageAdapter(BaseActivity activity, List<string> imagesUrls)
            {
                    _activity = activity;
                    _imagesUrls = imagesUrls;               
            }

            public override Object GetItem(int position)
            {
                    return null;
            }

            public override long GetItemId(int position)
            {
                    return 0;
            }

            public override View GetView(int position, View convertView, ViewGroup parent)
            {
                    ImageView imageView;

                    if (convertView == null)
                    {
                            imageView = new ImageView(_context);
                            imageView.LayoutParameters = new GridView.LayoutParams(Misc.ImageThumbWidth, Misc.ImageThumbWidth);
                            imageView.SetScaleType(ImageView.ScaleType.CenterCrop);
                            imageView.SetPadding(0, 0, 0, 0);
                    }
                    else
                    {
                            imageView = (ImageView)convertView;
                    }

                    _activity.DisplayImage(_imagesUrls[position], imageView);

                    return imageView;
            }

            public override int Count
            {
                    get { return _imagesUrls.Count; }
            }
    } 
```

请注意，在此方法中

```
public override Object GetItem(int position)
{
    return null;
} 
```

**Object**实际上是**Java.Lang.Object**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:27:53.250

[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)是一个公共类实现[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)是一个接口。ArrayAdapter 已经实现了[BaseAdapter 中的抽象方法，](http://developer.android.com/reference/android/widget/BaseAdapter.html#inhmethods)`GetItem(int position)`它是从[Adapter](http://developer.android.com/reference/android/widget/Adapter.html)继承的方法，因此您不需要再次实现它，当然也不允许覆盖。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-12-23T08:35:24.807

place ("@override") 被覆盖方法 getitem(int) 上面的注解

# prolog - Prolog，文件操作

> ID：13489591
> 
> 赞同：1
> 
> 时间：2012-11-21T08:58:22.600
> 
> 标签：prolog

作为输入数据，我有一个包含 100 行的文件。在每一行上，我都有一个数字，后跟一个点。我需要将排序后的数字越来越多地打印到另一个文件中。

我知道从文件中读取并使用 see and tell 打印到文件中，但是当涉及从 1 到 100 的所有文件时，无需对 see 中的每一行执行 read(X)、read(Y) 等（） 我搞不清楚了。那么你将如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:31:29.767

请注意，此描述比所需的实际代码要详细得多。

```
?- read_input(L), msort(L, S), write_output(S). 
```

即（使用[爱丁堡风格的 I/O](http://www.swi-prolog.org/pldoc/doc_for?object=section%283,%274.16.2%27,swi%28%27/doc/Manual/IO.html%27%29%29)）[查看](http://www.swi-prolog.org/pldoc/doc_for?object=see/1)输入文件，继续[阅读](http://www.swi-prolog.org/pldoc/doc_for?object=read/1)，存储在列表中直到输入 = `end_of_file`（然后关闭列表），然后使用[msort](http://www.swi-prolog.org/pldoc/doc_for?object=msort/2)对列表进行排序，然后[告诉](http://www.swi-prolog.org/pldoc/doc_for?object=tell/1)输出文件，然后用循环写入列表的每个元素。您可以使用 length/2 检查是否真的有 100 个数字。

**编辑**未经测试的代码以从当前输入中读取列表

```
read_list(L) :-
  read(N), N \= end_of_file
  -> L = [N|Ns], !, read_list(Ns)
  ;  L = []
  . 
```

# jquery - jQquery onhover：将图像从鼠标移开

> ID：13489594
> 
> 赞同：0
> 
> 时间：2012-11-21T08:58:35.890
> 
> 标签：jquery

我希望图像在悬停条件下移动：

```
- 如果鼠标来自左侧，图像会从鼠标向右移动 100 像素，反之亦然。
- 图像可以连续向一个方向移动，当点击#div边界时会移动到相反的方向。
```

我几乎想不出将它组合起来，这里是我的基本代码：

在悬停时移动图像

```
$(document).ready(function()
{  $("#image").mouseover(function()
   {  $("#image").animate({left:'250px'});
   });
}); 
```

在悬停时捕捉鼠标位置

```
jQuery(document).ready(function(){
   $(document).mousemove(function(e){
      $('#status').html(e.pageX +', '+ e.pageY);
   }); 
}) 
```

。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:11:10.213

你可以把你的图像放在一个由 1px 宽边框 div 填充的 div 中。将鼠标悬停侦听器附加到每个侦听器，例如将左入口侦听器附加到左侧 div，将右入口侦听器附加到右侧 div 等等。

HTML：

```
<div id="box" style="background:#98bf21;height:100px;position: absolute;left:100px; width:200px;">
<div id="skinDiv">
    <div id="leftboundary"></div>
</div>
</div> 
```

CSS：

```
#leftboundary{
    height:100%;
    width:20px;
    position:absolute;
    top:0px;
    right:0px;
    background:blue;
} 
```

这是从我回答的另一个问题中重复使用的短小提琴：http: [//jsfiddle.net/PRZYN/10/](http://jsfiddle.net/PRZYN/10/)

编辑：改进的小提琴：http: [//jsfiddle.net/PRZYN/11/](http://jsfiddle.net/PRZYN/11/)

# appharbor - AppHarbor 不恢复包

> ID：13489595
> 
> 赞同：0
> 
> 时间：2012-11-21T08:58:38.293
> 
> 标签：appharbor

我正在向 AppHarbor 推送 NancyFx 解决方案，但由于 AppHarbor 没有恢复包，因此无法构建。

不过，包还原是在我的解决方案文件中定义的。

```
Project("{2150E333-8FDC-42A3-9474-1A3956D46DE8}") = ".nuget", ".nuget", "{313EB245-8733-45FC-82B3-6C1404446A50}"
ProjectSection(SolutionItems) = preProject
    .nuget\NuGet.Config = .nuget\NuGet.Config
    .nuget\NuGet.exe = .nuget\NuGet.exe
    .nuget\NuGet.targets = .nuget\NuGet.targets
EndProjectSection
EndProject 
```

这是 AppHarbor 日志的相关部分。

```
Build started 11/21/2012 8:50:07 AM.
 1>Project "D:\temp\cqcytykz.jkt\input\src\xxx\xxx.sln" on node 1 (default targets).
 1>ValidateSolutionConfiguration:
     Building solution configuration "Release|Mixed Platforms".
 1>Project "D:\temp\cqcytykz.jkt\input\src\xxx\xxx.sln" (1) is building "D:\temp\cqcytykz.jkt\input\src\xxx\xxx\xxx.csproj" (2) on node 1 (default targets).
 2>PrepareForBuild:
     Creating directory "obj\Release\".
   ResolveAssemblyReferences:
     Primary reference "Nancy".
 2>C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "Nancy". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [D:\temp\cqcytykz.jkt\input\src\xxx\xxx\xxx.csproj] 
```

有人知道缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:43:57.457

csproj 中是否有引用 NuGet.targets 文件的部分？您刚刚显示了解决方案中的项目，项目需要对目标文件的引用才能真正知道在构建项目时要执行什么。

NuGet 支持并不是 MSBuild/VS 所知道的任何特别之处（尽管 VS 确实有一个扩展来使某些事情变得更容易）。这些东西（如果你使用 VS 扩展“启用包还原”功能应该插入）是告诉 MSBuild 它需要在构建期间运行外部命令，然后恢复包的内容:-)

# java - 什么时候视频文件太大而无法在没有流式传输/多部分的情况下发送？

> ID：13489596
> 
> 赞同：0
> 
> 时间：2012-11-21T08:58:44.570
> 
> 标签：java, spring, video-streaming

我目前正在使用 Java 和 Spring MVC 开发一项服务，用户可以在其中上传视频文件。这些可以稍后通过我们的 API 检索。

当视频文件通过我们的 API 加载时，我们只是完整地发送文件，作为下载，没有流式传输或多部分。我知道这仅在您达到特定文件大小之前有效。有人对最大文件大小有什么建议吗？即我们应该从哪个文件大小开始使用视频流服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:18:01.943

实际上，这是一个相当复杂的问题，因为需要考虑多个因素。我将列出每种方法的优缺点，并最终提供替代解决方案。

**一次下载/上传整个文件：**

**->优点：** 易于编程

**->缺点：** 一旦用户尝试上传一个 2 GB 的文件，该文件将在您的服务器内存中，然后再保存到您的文件系统或您保存它的任何位置。你可以想象如果有 100 个用户这样做，你的服务器会崩溃。您可以在 servlet 容器级别限制请求的大小，但是您将限制您的用户。另一种方法是将其也限制在应用程序级别，但您仍然在限制您的用户。几年前，一个 tomcat 的默认上传大小是 2097152（2 兆）。不知道现在是多少，但即使你把它提高到 10mb 或 100mb，你也会遇到我描述的问题：当多个用户尝试上传大文件时，你会把它们放在内存中。

**使用流媒体下载/上传文件**

**-> 优点：** 流式传输不需要在保存之前将所有内容都存在于内存中。这是一种更优雅的方法，并且在所有方面都绝对比发送所有内容更好。此外，您可能会绕过公司环境中的大多数问题，例如发送大文件、防火墙、servlet 容器限制等。

此外，如果您使用进度条实现流式传输，向您的系统发送大文件的用户不会认为系统崩溃，这将显着改善您的用户体验。

**-> 缺点：** 不是很多，但实施起来稍微困难一些。使用 commons 的 IOUtils 之类的库，您在实现流式解决方案时应该没有任何问题。

如您所见，在大多数情况下，流式传输文件内容会更好，无论其大小如何，但如果您仍想使用整个文件解决方案，则可以使用 10MB 或该区域的限制。这取决于您希望视频的大小。

需要注意的一件事是，如果您还想使用流式传输来允许用户查看视频内容，那么您将不必要地为您的 servlet 容器增加不应该做的事情：流式传输视频。Servlet 容器用于响应 http 请求，并且通过设计由池组成，这些池可重用预期短暂的 http 请求的线程。在某个时候可能会变得很明显，http servlet 容器不适合同时流式传输视频和服务 http 请求。一个可能的解决方案可能是您的用户使用您的 api 将您的文件上传到视频服务器，然后使用甚至可能位于不同位置的视频服务器将视频流式传输回用户。你可以看看这个：http://www.red5.org/

你可以从这个设置中得到： -> 你减轻了你的 http 服务器上的负载，你正在使用它来做它应该做的事情：服务 http 请求 -> 你降低了应用程序的复杂性，作为流、播放的东西，等不是由您的应用程序处理，而是由视频服务器处理。

# android - 如何删除根应用程序/应用程序/文件？

> ID：13489597
> 
> 赞同：4
> 
> 时间：2012-11-21T08:58:45.323
> 
> 标签：android, file, root, file-handling

我的手机已经root了。我正在尝试做一个非常简单的程序。程序应该从 app/app 文件夹中删除文件。我怎样才能做到这一点？我是新手，所以示例代码很有价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:08:12.200

如果您的手机已获得 root 权限，则您可以以 root 身份发出命令——前提`su`是`su`二进制文件存在并且在您的手机中`PATH`——因为 Android 是 Linux 的一个变体。只需通过 执行删除命令`Runtime.exec()`，超级用户应注意权限提示。

[这是我从这个问题](https://stackoverflow.com/questions/11355480/how-can-i-execute-su-on-android)中得到的一个简单的用法示例：

```
process = Runtime.getRuntime().exec("su");
os = new DataOutputStream(process.getOutputStream());
os.writeBytes(command + "\n");
os.writeBytes("exit\n");
os.flush();
process.waitFor(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:00:50.967

您可以使用以下方法递归删除文件夹中的所有文件。

```
private void DeleteRecursive(File fileOrDirectory) {
    if (fileOrDirectory.isDirectory())
        for (File child : fileOrDirectory.listFiles())
        {
            child.delete();
            DeleteRecursive(child);
        }

    fileOrDirectory.delete();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T20:50:54.137

在他的[github 上](https://github.com/Chainfire/libsuperuser/tree/master/libsuperuser/src/eu/chainfire/libsuperuser)，Chainfire 提供了一个类的[示例实现](https://github.com/Chainfire/libsuperuser/blob/master/libsuperuser/src/eu/chainfire/libsuperuser/Shell.java)，您可以使用它以root`Shell`身份执行命令。`rm`该`rm`命令是用于删除文件（和文件夹）的命令的 Linux 变体。

**代码片段：**

```
if(Shell.SU.available()){
   Shell.SU.run("rm /data/app/app.folder.here/fileToDelete.xml"); //Delete command
else{
   System.out.println("su not found"); 
```

或者，如果您**确定**`su`二进制文件可用，您可以运行删除命令（注释行）并跳过检查

来源：[如何苏](http://su.chainfire.eu/#how)

# c# - 无法读取 httpwebresponse

> ID：13489609
> 
> 赞同：1
> 
> 时间：2012-11-21T08:59:20.223
> 
> 标签：c#, vb.net, encoding, httpwebresponse

当我尝试反序列化 Web 响应时，我得到一个无效操作异常。

在这个 webresponse 中，我得到一个通过 https 发送的 XML 页面。我的代码所做的基本上是发送一个 web 请求以获取登录 cookie，然后是另一个获取 XML 页面的请求，然后我反序列化该页面。

当我尝试反序列化时出现问题，它给了我以下错误：

```
There is an error in XML document (1, 1). 
```

首先，我查看了我的网络响应，看看它是否有正确的数据。所以我把我的 webresponse 放到流阅读器中，并使用 readToEnd 将其转换为字符串。像这样：

```
dim myStringResult as String = myStreamReader.ReadToEnd() 
```

它给了我一些字母数字和块。所以我认为我得到的回应是问题所在。我用 Fiddler 进行了检查，发现在我看到内容之前需要对响应进行解码（是的，它确实有我想要的正确响应）。我对异常进行了更深入的研究，看到它说

```
hexadecimal value 0x1F, is an invalid character. Line 1, position 1 
```

我尝试查看 System.Text.Encoding，但找不到十六进制的任何内容。谁能帮我这个？

编辑：我可能必须对其进行解码，因为它是一个 https 响应，而不是因为它是十六进制编码的。

edit1：不幸的是，我尝试过`HttpUtility.HtmlDecode`它没有更改字符串。

edit2：我得到的数据示例

> {� �U�r�0��+(g���(J��ԙ$�k;IomR&�I�N?���/�6���L�^`���</p >

它没有正确显示数据。它应该主要是正方形。时不时地看到

编辑：标题

> ```
> content-disposition: : attachment; filename="document.xml"
> CachingModuleShouldWork: true
> Content-Language: en-US
> 
> Vary: Accept-Encoding,User-Agent 
> ```
> 
> 内容长度：382 内容类型：应用程序/xml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:15:20.803

0x1f 是 Windows 控制字符。它不是有效的 XML。

您需要先使用[HttpUtility.Decode之类的东西对其进行解码](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)

因此：获取您的响应并使用 StreamReader 将其读入字符串，然后执行以下操作：

```
StringWriter myWriter = new StringWriter();
         // Decode the encoded string.
         HttpUtility.HtmlDecode(myEncodedString, myWriter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:11:55.810

如果您正在解码从网络上读取的内容，我建议您检查一下：

[HttpUtility.HtmlDecode 方法（字符串）](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)

**编辑：类似的问题**

[十六进制值 0x1F，是无效字符。第 1 行，位置 1](https://stackoverflow.com/questions/6728329/hexadecimal-value-0x1f-is-an-invalid-character-line-1-position-1)

# java - 在java中为各种用户定义的类创建通用方法

> ID：13489610
> 
> 赞同：5
> 
> 时间：2012-11-21T08:59:19.867
> 
> 标签：java

我正在尝试实现以下目标：我有这个方法

```
public String methodName(Userdefinedclass.class,Userdefinedclass obj)
{

//some code 
.........
method(Userdefinedclass.class);
method2(obj);

} 
```

我想概括这种方法。

挑战在于这里的参数是用户定义的，即它可以改变。所以请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T09:01:42.447

```
public <T> String methodName(Class<T> c, T obj) 
{
    method1(c);
    method2(obj);

    return "some string";
}

void method1(Class c) 
{
   // Some stuff.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:06:35.667

泛型是类型擦除，因此您不能拥有 .class 泛型类型。那是因为在这种情况下泛型被擦除以`Object`键入。因此 `T.class' 不起作用

所以改为使用`Class<T>`来获取课程，然后一起工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:11:11.973

这使您的方法签名保持不变：

```
public <T> String  methodName(Class<T> c, T obj)
{
   method(c);
   method2(obj);
} 
```

但我会使用伊万诺维奇的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T09:04:18.573

如果您想概括函数中使用的参数，您可以创建一个空接口并强制 userDefinedClass 实现它。或者您可以使用 T 来实现这一点

# asp.net - jquery mobile for mobile 无需回发

> ID：13489611
> 
> 赞同：0
> 
> 时间：2012-11-21T08:59:20.887
> 
> 标签：asp.net, jquery-mobile

我正在使用 jquery 移动控件，我有两个按钮保存和取消。单击保存时，我想将数据保存到数据库。但我想使用 jquery 和 json 编写代码，这样页面回发就不会在单击保存时一次又一次地发生按钮。请给我一些想法如何执行此操作并将数据保存到数据库。
我的代码是

```
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
    </title>
    <link href="jquery.mobile-1.1.1.min.css" rel="stylesheet" type="text/css" />

    <link href="my.css" rel="stylesheet" type="text/css" />
    <style>
        /* App custom styles */
    </style>
    <script type="text/javascript" src="jquery.min.js"></script>

    <script type="text/javascript" src="jquery.mobile-1.1.1.min.js"></script>

    <script type="text/javascript" src="my.js"></script>

</head>

<body>
    <!-- Items Assessment -->
    <div data-role="page" data-theme="d" id="page10">
        <div data-theme="b" data-role="header">
            <a data-role="button" data-transition="fade" href="page22" data-icon="home"
            data-iconpos="right" class="ui-btn-right">
                Home
            </a>
            <a data-role="button" data-transition="slide" href="page3.html" data-
icon="arrow-l"
            data-iconpos="left" class="ui-btn-left">
                Back
            </a>
            <h3>
            </h3>
            <div class="ui-title">
                <img style="QuickMove.png">
            </div>
        </div>
        <div data-role="content" style="padding: 15px">

                    <div data-role="fieldcontain">
                        <label for="selectmenu29"><span style="font-family: times new 
roman,times; font-size: medium;">
                                <b>
                                    Room Type:
                                </b>
                            </span>
                        </label>
                        <select name="selectmenu29" id="selectmenu29" data-theme="b" 
data-mini="true" runat="server">
                            <option value="option1">
                                Room Type
                            </option>
                        </select>
                    </div>

                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-mini="true">
                            <label for="textinput43"><span style="font-family: times   
new roman,times; font-size: medium;">
                                <b>
                                    Building &amp; Floor:
                                </b>
                            </span>
                            </label>
                            <input name="" id="textinput43" placeholder="" value="" 
type="text">
                        </fieldset>
                    </div>

                    <div data-role="fieldcontain">
                        <label for="selectmenu31"><span style="font-family: times new 
roman,times; font-size: medium;">
                                <b>
                                    Origin:
                                </b>
                            </span>
                        </label>
                        <select name="selectmenu31" id="selectmenu31" data-theme="b" 
data-mini="true">
                            <option value="option1">
                                ALL
                            </option>
                        </select>
                    </div>

                    <div data-role="fieldcontain">
                        <label for="selectmenu33"><span style="font-family: times new 
roman,times; font-size: medium;">
                                <strong>
                                    Destination:
                                </strong>
                            </span>
                        </label>
                        <select name="selectmenu33" id="selectmenu33" data-theme="b" 
data-mini="true">
                            <option value="option1">
                                ALL
                            </option>
                        </select>
                    </div>

                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-type="vertical" data-   
mini="true">
                            <legend> <span style="font-family: times new roman,times; 
font-size: medium;">
                                <strong>
                                    Transport Mode:
                                </strong>
                            </span>
                            </legend>
                            <input name="radiobuttons1" id="radio1" value="radio1" 
type="radio">
                            <label for="radio1">
                                Road
                            </label>
                            <input name="radiobuttons1" id="radio2" value="radio2" 
type="radio">
                            <label for="radio2">
                                Air
                            </label>
                            <input name="radiobuttons1" id="radio3" value="radio3" 
type="radio">
                            <label for="radio3">
                                Sea
                            </label>
                            <input name="radiobuttons1" id="radio4" value="radio4" 
type="radio">
                            <label for="radio4">
                                Rail
                            </label>
                        </fieldset>
                    </div>

                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-mini="true">
                            <label for="textinput47"><span style="font-family: times 
new roman,times; font-size: medium;" data-mce-style="font-family: times new 
roman,times; font-size: medium;">
                                <b>
                                    Quantity:
                                </b>
                            </span>
                            </label>
                            <input name="" id="textinput47" placeholder="" value="" 
type="text">
                        </fieldset>
                    </div>

                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-mini="true">
                            <label for="textinput73"><span style="font-family: times 
new roman,times; font-size: medium;" data-mce-style="font-family: times new 
roman,times; font-size: medium;">
                                <b>
                                    Width
                                </b>
                                <b>
                                    ​:
                                </b>
                            </span>
                            </label>
                            <input name="" id="textinput73" placeholder="" value=""   
type="text">
                        </fieldset>
                    </div>

                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-mini="true">
                            <label for="textinput74"><span style="font-family: times     

new roman,times; font-size: medium;" data-mce-style="font-family: times new   
roman,times; font-size: medium;">
                                <strong>
                                    Height:
                                </strong>
                            </span>
                            </label>
                            <input name="" id="textinput74" placeholder="" value=""   
type="text">
                        </fieldset>
                    </div>
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-mini="true">

                        </fieldset>
                    </div>

                    <div data-role="fieldcontain">
                        <label for="selectmenu26">
                        </label>

                    </div>

                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-mini="true">
                            <label for="textinput76"> <span style="font-family: times   
new roman,times; font-size: medium;" data-mce-style="font-family: times new     
roman,times; font-size: medium;">
                                <b>
                                    Weight:
                                </b>
                            </span>
                            </label>
                            <input name="" id="textinput76" placeholder="" value="" type="text">
                        </fieldset>
                    </div>

                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-type="horizontal" data- 

mini="true">
                            <legend><span style="font-family: times new roman,times;   
font-size: medium;">
                                <b>
                                    Packing Required?
                                </b>
                            </span>
                            </legend>

                        </fieldset>
                    </div>

                     <div class="ui-grid-a" style="width:100%">
                <div class="ui-block-a">
                    <a data-role="button" data-inline="true" id="btn_save" data-   
transition="fade" data-theme="b"
                    href="#page12" data-icon="check" data-iconpos="right" >
                        Save
                    </a>
                </div>
                <div class="ui-block-b" >
                    <a data-role="button" data-inline="true" data-transition="fade"  
  data-theme="b"
                    href="#page12" data-icon="delete" data-iconpos="right" 
 runat="server">
                        Cancel
                    </a>
                </div>
            </div>
        </div>

        </div>

 </div> 
    </div>
     </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:23:39.507

您可以只发出一个 ajax 发布请求来异步执行此操作。

```
// 将您的输入元素封装在一个表单标签中，例如
// 从表单中获取所有参数
var formData = $("#myForm").serialize();

$.ajax({
 网址：，
 类型：“帖子”，
 数据：表格数据，
 成功：功能（数据）{
  // 保存成功时的动作
 },
 错误：函数（对象，txtStatus，errorThrown）{
  // 处理抛出的错误的操作
 }
});

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:30:36.637

看看[这个页面](http://jquerymobile.com/demos/1.2.1/docs/forms/forms-sample.html)，jquery mobile 尽可能通过 ajax 发布数据。您不需要为此将数据序列化为 json。

# objective-c - Google Adsmob 无法在 iOS 6 设备中显示

> ID：13489612
> 
> 赞同：1
> 
> 时间：2012-11-21T08:59:22.763
> 
> 标签：objective-c, ios, admob

```
- (UIView *)addbanner{
CGPoint origin = CGPointMake(0.0, 0);
self.adBanner = [[[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner origin:origin]autorelease];
headerView = [[[UIView alloc] initWithFrame:CGRectMake(0,0,320, self.adBanner.adSize.size.height)] autorelease];
self.adBanner.adUnitID = @"a14fe853330ee80";
self.adBanner.delegate = self;
[self.adBanner setRootViewController:self];
[headerView addSubview:self.adBanner];
[self.adBanner loadRequest:[self createRequest]];
return headerView;
}

- (GADRequest *)createRequest {
GADRequest *request = [GADRequest request];
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
request.testDevices = [NSArray arrayWithObjects:appDelegate.udid, nil];
return request;
} 
```

横幅仅显示在带有 iOS 6 的模拟器中，但不显示在设备中。对于 iOS 5，模拟器和设备都显示了。

我现在正在使用分发。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:10:23.217

核实。![在此处输入图像描述](../Images/253c741b5215df369881adbd87c52567.png)

您正在测试模式下运行它，这就是它没有在 ios 6 设备中运行的原因。检查下面的链接。 [https://developers.google.com/mobile-ads-sdk/docs/admob/best-practices](https://developers.google.com/mobile-ads-sdk/docs/admob/best-practices)

放

> request.testing = 否；

希望它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:15:29.790

看看他们怎么说[https://developers.google.com/mobile-ads-sdk/docs/admob/best-practices](https://developers.google.com/mobile-ads-sdk/docs/admob/best-practices)

> iOS 6 设备不支持测试广告；改用模拟器。

# javascript - 检索动态创建元素的值

> ID：13489618
> 
> 赞同：5
> 
> 时间：2012-11-21T08:59:31.783
> 
> 标签：javascript, html

我已经创建了一个 HTML 表单，在这个表单中，当我单击一个按钮时，它会根据预定义的标准创建输入文本字段，这很好用。现在，当我尝试使用警报检索在这些创建的文本字段中输入的值时，我无法这样做。

我有两个问题

1.  从动态创建的文本字段中检索输入的最佳方法是什么？
2.  你能告诉我为什么我写的代码不起作用

HTML 代码

```
<BODY>
<FORM>
    <BR/>
    <div align = "center">
        <br /><br />
        <INPUT type="button" value="Click To Enter Values" onclick="getkeywords()"/>
    </div>
    <div align="center" id="d_div">
        <form name="permavalues" id="d_form">
        </form>
        <br/> <br/>
    </div>
</FORM> 
```

我正在使用的 javascript 代码是这样的：

```
function getkeywords() {
    var index_array = new Array();
    var myString = "one and a two and a three = $ and four = $ and five = $";
    var splitresult = myString.split(" ");

    for(i = 0; i < splitresult.length; i++)
    {
        if (splitresult[i] == "$" && i > 1 ) //retireving the keywords..
        {   
            add(splitresult[i-2]);
        }
    }
} 
```

在 getkeywords 中调用的 add 函数：

```
function add(s) {
    //Create an input type dynamically.
    var element = document.createElement("input");
    //Assign different attributes to the element.
    element.setAttribute("type", "text");
    element.setAttribute("value", s);
    element.setAttribute("name", s);
    element.setAttribute("id", s);

    var foo = document.getElementById("d_form");

    //Append the element in page (in span).
    foo.appendChild(element);
    alert("Value=" + document.getElemebtById(s).value);
} 
```

我想我一定有一个错误`element.setAtrribute("id",s);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:09:02.500

主要问题是您不能将表单放入另一个表单中。请删除您的 HTML 代码第 2 行和第 13 行。

正如 IvanL 所说，另一个问题是您的拼写错误。

其他代码都很好。

为您提供经过全面测试的工作代码，如下所示。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>test</title>
<script language="javascript">
function getkeywords() {
    var index_array = new Array();
    var myString = "one and a two and a three = $ and four = $ and five = $";
    var splitresult = myString.split(" ");

    for(i = 0; i < splitresult.length; i++)
    {
        if (splitresult[i] == "$" && i > 1 ) //retireving the keywords..
        {   
            add(splitresult[i-2]);
        }
    }
}
function add(s) {
    //Create an input type dynamically.
    var element = document.createElement("input");
    //Assign different attributes to the element.
    element.setAttribute("type", "text");
    element.setAttribute("value", s);
    element.setAttribute("name", s);
    element.setAttribute("id", s);

    var foo = document.getElementById("d_form");

    //Append the element in page (in span).
    foo.appendChild(element);
    alert("Value=" + document.getElementById(s).value);
}
</script>
</head>
<BODY>
    <BR/>
    <div align = "center">
        <br /><br />
        <INPUT type="button" value="Click To Enter Values" onclick="getkeywords()"/>
        <br><br><br>
        <input type="button" value="add" onclick="add('tt')">
    </div>
    <div align="center" id="d_div">
        <form name="permavalues" id="d_form">
        </form>
        <br/> <br/>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:10:21.017

> 从动态创建的文本字段中检索输入的最佳方法是什么？

我将使用 JQuery 遍历所有文本输入元素的表单并检索它们各自的值。

或者，您可以为每个文本字段指定一个通用名称，例如“txt_”，然后将增量 ID 附加到字符串（IE -- txt_1、txt_2、txt_3、...），然后以编程方式迭代匹配的表单字段，直到您已达到表示可用表单域总数的值。该值可能是一个 JavaScript 整数。

例如...

```
$("form input[type='text']").each( function() 
{ 
    // gets text value for each field in the form
    var textFieldValue = this.value;

    // do stuff
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T18:38:19.733

查看获取所有输入值的 Jquery 代码。

```
$(document).ready(function()
{
    $('form#d_form input[type="text"]').each(
    function()
    {
         alert($(this).val());
    });
}); 
```

# string - 如何找到字符串中最长的连续子字符串？

> ID：13489623
> 
> 赞同：1
> 
> 时间：2012-11-21T09:00:05.693
> 
> 标签：string, algorithm

例如，有一个给定的字符串，它由`1s`和组成`0s`：

```
s = "00000000001111111111100001111111110000"; 
```

*   获取 s 中最长 1s 子串计数的有效方法是什么？( `11`)
*   获取 s 中最长 0s 子串计数的有效方法是什么？( `10`)

我很欣赏这个问题会从算法的角度来回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:53:14.863

我认为最直接的方法是遍历位串，同时记录所有`0`和所有`1`子串的最大长度。正如其他人所建议的那样，这很`O (n)`复杂。

如果您负担得起某种数据并行计算，您可能希望查看[此处](http://www.drdobbs.com/architecture-and-design/parallel-pattern-7-reduce/222000718)解释的并行模式。具体来说，看看[并行归约](http://www.drdobbs.com/architecture-and-design/parallel-pattern-7-reduce/222000718)。`O (log n)`我认为如果你能负担得起其中一种方法，这个问题可以及时解决。

我正在尝试为这个问题考虑并行减少：

1.  在减少的第一级，每个线程将处理 8 位字符串块（取决于您拥有的线程数和字符串的长度）并生成位字符串的**摘要，例如：**`0 -> x, 1 -> y, 0 -> z, ....`

2.  在下一个级别，每个线程会将这些摘要中的两个合并为一个，在此阶段将执行任何可能的连接（基本上，如果上一个摘要以`0`( `1`) 结尾，下一个摘要以`0`( `1`) 开头，那么最后一个条目并且两个摘要的第一个条目可以折叠成一个）。

3.  在顶层只有一个结构，其中包含位串的整体摘要，您必须逐步找出最大的序列（但这次它们都是摘要形式，所以应该更快） . 或者，您可以让每个摘要结构跟踪大字符串`0`和`1`子字符串，这样就无需遍历最终结构。

我想这种方法只在非常有限的范围内有意义，但因为你似乎非常热衷于变得比`O (n)`......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:18:20.823

好的，这是我想出的一种解决方案，我不确定这是否没有错误。如果您发现错误或建议更好的方法，请纠正我。如果您同意此解决方案，请投票。谢谢！

```
#include <iostream>

using namespace std;

int main(){

    int s[] = {0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0};
    int length = sizeof(s) / sizeof(s[0]);

    int one_start = 0;
    int one_n = 0;
    int max_one_n = 0;

    int zero_start = 0;
    int zero_n = 0;
    int max_zero_n = 0;

    for(int i=0; i<length; i++){
        // Calculate 1s
        if(one_start==0 && s[i]==1){
            one_start = 1;
            one_n++;
        }
        else if(one_start==1 && s[i]==1){
            one_n++;
        }
        else if(one_start==1 && s[i]==0){
            one_start = 0;
            if(one_n > max_one_n){
                max_one_n = one_n;
            }
            one_n = 0;      // Reset 
        }

        // Calculate 0s
        if(zero_start==0 && s[i]==0){
            zero_start = 1;
            zero_n++;
        }
        else if(zero_start==1 && s[i]==0){
            zero_n++;
        }
        else if(one_start==1 && s[i]==1){
            zero_start = 0;
            if(zero_n > max_zero_n){
                max_zero_n = zero_n;
            }
            zero_n = 0;     // Reset 
        }
    }

    if(one_n > max_one_n){
        max_one_n = one_n;
    }
    if(zero_n > max_zero_n){
        max_zero_n = zero_n;
    }

    cout << "max_one_n: " << max_one_n << endl;
    cout << "max_zero_n: " << max_zero_n << endl;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:14:11.540

最坏的情况总是 O(n)，你总能找到强制算法检查每一位的输入。

但是你可能会得到比这更好的平均值（更简单的是，如果你只扫描 0 或 1，而不是两者），因为你可以跳过当前找到的最长序列的长度并向后扫描。至少这会减少 O(n) 的常数因子，但至少在随机输入的情况下，更多的项目也意味着更长的序列，因此越长越长。但是与 O(n) 的差异不会太大...

# symfony - Symfony2 错误处理独立于页面中的每个模块

> ID：13489627
> 
> 赞同：1
> 
> 时间：2012-11-21T09:00:20.683
> 
> 标签：symfony, exception-handling

我有一个显示复杂布局的屏幕，其中显示了几个不同的模块、portlet 类型，每个模块都是不同的树枝模板和控制器调用。

如果其中一个控制器调用出现异常，我想用日志的简短摘录填充这个方块（如果它以这种方式配置），但我希望其他模块正常显示，并且 js 插件工作。页面中间会有一个小方块空白或显示日志。我没有与 ESI 合作。

到目前为止，我已经尝试应用不同的方法： - 一个异常侦听器，我可以在其中获取堆栈跟踪并显示自定义错误树枝模板 - 使用来自先前树枝控制器渲染的“alt”控制器调用

我已经看到我不能混合这两种方法， - 使用“alt”时没有引发事件，没有什么可听的，替代控制器没有关于显示异常的信息 - 没有“alt”，我的错误模板显示全屏，所以没有显示其他模块。
- 与标准输出错误相同，或者即使我覆盖了 ExceptionController。

在这一刻，我正在考虑这些选项 - “alt”，对于页面中的每个控制器调用，在 APC 中保留此请求的配置文件令牌号（我还无法实现），以便从替代控制器中使用它并在配置文件收集器 - 异常侦听器和“alt”中搜索日志，在检测到错误时在框架中查找，引发事件同时启动“alt”，并使其兼容。

任何帮助将不胜感激

# dependencies - Tycho 下载依赖项但无法解决它

> ID：13489641
> 
> 赞同：3
> 
> 时间：2012-11-21T09:01:25.520
> 
> 标签：dependencies, osgi, tycho

我对第谷 0.15.0 有一个奇怪的问题。我的有 8 个依赖项，`MANIFEST.MF`但 Tycho 无法解决其中之一。输出如下所示：

```
[INFO] 1 operation remaining.
[INFO] Fetching org.eclipse.xtext.logging_1.2.15.v201206120633.jar (4kB of 10.12kB at 0B/s) from http://my.server.com/p2-3.7.2/plugins/
[INFO] Resolving class path of MavenProject: <...my project ...> @ <...path to my project...>/pom.xml
[ERROR] Internal error: java.lang.RuntimeException: org.osgi.framework.BundleException: Bundle <...my project...> cannot be resolved
[ERROR] Resolution errors:
[ERROR] Bundle <...my project...> - Missing Constraint: Require-Bundle: org.eclipse.xtext.logging; bundle-version="1.2.15"
[ERROR] -> [Help 1]
org.apache.maven.InternalErrorException: Internal error: java.lang.RuntimeException: org.osgi.framework.BundleException: Bundle <...my project...> cannot be resolved
Resolution errors:
Bundle <...my project...> - Missing Constraint: Require-Bundle: org.eclipse.xtext.logging; bundle-version="1.2.15" 
```

我知道的：

1.  罐子`org.eclipse.xtext.logging_1.2.15.v201206120633.jar`存在
2.  罐子没有损坏
3.  Tycho 可以从我的 p2 服务器下载它（我`~/.m2/repository/p2/osgi/bundle/org.eclipse.xtext.logging/1.2.15.v201206120633/org.eclipse.xtext.logging-1.2.15.v201206120633.jar`的电脑上有）
4.  `MANIFEST.MF`看起来正确：

    ```
    Manifest-Version: 1.0
    Ant-Version: Apache Ant 1.8.2
    Bundle-Vendor: %providerName
    Bundle-Localization: fragment
    Fragment-Host: org.apache.log4j;bundle-version="[1.2.15,1.2.16)"
    Bundle-RequiredExecutionEnvironment: J2SE-1.5
    Bundle-Name: %pluginName
    Bundle-SymbolicName: org.eclipse.xtext.logging;singleton:=true
    Created-By: 1.5.0_22-b03 (Sun Microsystems Inc.)
    Bundle-Version: 1.2.15.v201206120633
    Bundle-ManifestVersion: 2
    Import-Package: org.eclipse.core.runtime,org.osgi.framework;version="1
    .5.0" 
    ```

5.  第谷 0.16.0 也有同样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T14:03:42.030

您看到此行为的原因如下：

*   `org.eclipse.xtext.logging`是一个片段，而不是一个独立的捆绑包（您可以看到，因为它`Fragment-Host`在`MANIFEST.MF`其中定义了另一个捆绑包，该捆绑包属于该捆绑包）。
*   片段在 p2 中编码的方式，a`Require-Bundle`到片段可以在 p2 中解析。基于 p2 的依赖解析决定了目标平台的哪些工件被下载到本地 Maven 存储库。
*   A`Require-Bundle`到一个片段将不会在 OSGi 服务器中解析。为了计算类路径（因此是控制台输出`Resolving class path`），Tycho 使用 Equinox 解析器。该解析器正确检测[到碎片的 Require-Bundle 无效](https://stackoverflow.com/questions/7141398/eclipse-osgi-bundle-reqiure-another-bundles-fragment)。

# jquery - 单击父级时的jQuery切换复选框

> ID：13489644
> 
> 赞同：1
> 
> 时间：2012-11-21T09:01:38.657
> 
> 标签：jquery, html, checkbox, toggle, prop

我编写了一个简单的 js 函数来打开/关闭复选框，然后单击父级（在本例中为 TD）。*当您单击 TD 上的任意位置时，*此功能将按预期工作。

但是，当您*单击复选框本身*时，什么也没有发生。
**我想知道的是*为什么*它会这样做，最好的解决方法是什么？**

[我提供了一个 jsfiddle 来演示这个。](http://jsfiddle.net/V7LxV/)

这是我的js函数：

```
$("td.onoff").click(function() {
    var objCheckbox = $(this).find("input[type=checkbox]");
    if( objCheckbox.length >= 1 ) {
        objCheckbox.prop("checked", !objCheckbox.prop("checked"));
    }
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T09:05:52.400

你需要`by pass event code when source of event is not td with class onoff`，你可以这样做。

**[现场演示](http://jsfiddle.net/V7LxV/4/)**

```
$(function() {
    $("td.onoff").click(function(event) {          
        if(event.target.className != 'onoff') return;
        var objCheckbox = $(this).find("input[type=checkbox]");
        if( objCheckbox.length >= 1 ) {
            objCheckbox.prop("checked", !objCheckbox.prop("checked"));
        }
    });
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:04:59.453

检查点击元素的类型。没有这个，你试图得到一个不存在的元素。

```
$(function() {
    $("td.onoff").click(function() {
        var type = $(this).attr('type');
        if ( type != "checkbox" ) {
            var objCheckbox = $(this).find("input[type=checkbox]");
            if( objCheckbox.length >= 1 ) {
                objCheckbox.prop("checked", !objCheckbox.prop("checked"));
            }
        }
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:11:23.423

它以这种方式运行的原因是因为`input`正在触发父`click`事件，此时`this`成为复选框，而不是 clicked `td`，因此`.find("input[type=checkbox]")`不会选择任何内容，因此不会执行任何操作。

其他答案的替代方法是将`click`事件直接绑定到输入，并阻止它传播，例如：

```
$("td.onoff > input").click(function(e) {
  e.stopPropagation();        
}); 
```

[这是一个演示](http://jsfiddle.net/V7LxV/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T09:11:29.713

添加以下内容：

```
$("td.onoff :checkbox").click(function(event) {
    event.stopPropagation();
}); 
```

当您单击复选框时，这可以防止单击事件冒泡到容器中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T09:15:41.670

使用“for”属性而不是任何 javascript 函数这将像函数一样自动工作：就在 html 下方：

```
<tr class="row" >
        <td class="onoff" ><label for="check1"><input id="check1" type="checkbox" name="something[]" checked="checked" /></label></td>
    </tr>
    <tr class="row">
        <td class="onoff"><label for="check2"><input id="check2" type="checkbox" name="something[]" checked="checked" /></td>
    </tr>
    <tr class="row">
        <td class="onoff"><label for="check3"><input id="check3" type="checkbox" name="something[]" checked="checked" /></td>
 </tr> 
```

# asp.net - Python 用 URL 中的会话抓取 asp.net

> ID：13489645
> 
> 赞同：0
> 
> 时间：2012-11-21T09:01:38.827
> 
> 标签：asp.net, python, session

我正在尝试抓取一个用 asp.net 编写的小页面（使用 POST 方法）。但是有一个问题，我无法访问服务器在URL“.../(S(XXXXXXXXX))/...”中指定的会话ID。

这是我的代码：

```
import urllib
import urllib2

headers = {
    'HTTP_USER_AGENT': 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.13) Gecko/2009073022 Firefox/3.0.13',
    'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml; q=0.9,*/*; q=0.8',
    'Content-Type': 'application/x-www-form-urlencoded'
}

url = 'http://mobile.trenitalia.com/W2/ViaggiaTrenoXHTML.aspx'
values = {'Text1':21324,
            '__EVENTVALIDATION':'/wEWAwLgwZLkDQLzlKGwCgK28MDdBaZpixsZK6pgmdSd5WzAhOKq22MJ',
            '__VIEWSTATE':'/wEPDwUINzkxNzIxNzFkZCx1ajW4bJv22/lexpR1EWM3e10A',
            'butt_Find':'Cerca'}

data = urllib.urlencode(values)
req = urllib2.Request(url)#, data, headers)
response = urllib2.urlopen(req)
the_page = response.read()
print the_page 
```

如何查看网址是：http: [//mobile.trenitalia.com/W2/ViaggiaTrenoXHTML.aspx](http://mobile.trenitalia.com/W2/ViaggiaTrenoXHTML.aspx)

并且没有会话的痕迹，我如何访问服务器提供的会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:05:15.580

在您的`response`变量上，您可以调用该`geturl()`方法来获取结果 URL：

```
In [13]: response.geturl()
Out[13]: 'http://mobile.trenitalia.com/(S(saaizweqpa3q5yvnd4qjytii))/W2/ViaggiaTrenoXHTML.aspx' 
```

# .net - SHFB - .NET xml 文件中的变音符号问题

> ID：13489653
> 
> 赞同：1
> 
> 时间：2012-11-21T09:01:53.367
> 
> 标签：.net, internationalization, sandcastle, shfb

我们正在使用 Sandcastle 和 SHFB 为 .NET 项目创建文档。基本上，这行得通。

不幸的是，我们正在使用带有德语语言包的 .NET（这将保持这种方式 ;-)），但显然 SHFB 在加载带有德语变音符号的 .NET 自己的 XML 文件时存在问题。

我们得到的是 XmlParser 抛出的异常，看起来它无法正确读取文件（尽管文件内的编码设置为 UTF8）。问题是这些文件不受*我们*控制，它们是由 Microsoft 创建的。

一个可能的解决方案可能是卸载 .NET 的德语语言包，但首先这更多的是一种解决方法而不是解决方案，其次卸载程序警告我们“一个或多个产品我停止工作”......这是有点太关键了，只是尝试一下。

有官方解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:24:49.757

我不确定这是否能解决您的问题，但您可以尝试使用变音符号的数字表示。

取自 Sandcastle 帮助文件生成器页面：

> 当使用实体表示 XML 语言资源文件或标题文本、版权文本等中的特殊字符时，请使用数字形式而不是名称形式，因为 XML 解析器将无法识别它们并抛出异常。例如，如果您指定 Ä（带分音符号的拉丁文大写字母 A），则会生成异常。要修复它，请改用数字形式 (& #196;)。这也适用于版权文本中的 © 等符号。相反，您应该使用 & #169; 获取版权符号。

**注意：** *& 和 # 之间的空格是我插入的，以避免格式化。*

请参阅[此处](http://www.w3schools.com/tags/ref_entities.asp)的字符的数字表示

# php - copyimageresampled 不适合我

> ID：13489656
> 
> 赞同：0
> 
> 时间：2012-11-21T09:01:58.323
> 
> 标签：php, image-resizing, resampling

我想调整我的图片大小，使其不超过 500 像素。纵横比必须相同。我的图像 (960x960) 没有任何变化。

这是我的代码：

```
public static function resizeImage($imagename) {
        list($width, $height) = getimagesize($imagename);
        if($width < 500)
            return $imagename;

        $ratio = $width / $height;
        $new_width = 500;
        $new_height = $new_width / $ratio;

        $image_p = imagecreatetruecolor($new_width, $new_height);
        $image = imagecreatefromjpeg($imagename);
        imagecopyresampled ($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

        return $imagename;
    } 
```

这是 imagecopyresampled 的输入
`Resource id #25|Resource id #27|0|0|0|0|500|500|960|960|`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:06:47.633

尝试而不是返回名称返回裁剪图片：

```
//replace 
return $imagename;

//with 

return imagejpeg($image_p, null, 100); 
```

# javascript - 当它进入css响应时，在js中刷新页面

> ID：13489663
> 
> 赞同：0
> 
> 时间：2012-11-21T09:02:39.613
> 
> 标签：javascript, jquery, css

是否有可能当页面在 css 响应时它会使用 javascript 或 jquery 刷新页面？

例如，如果我有这个 CSS 代码：

```
@media only screen and (max-width: 826px){
    #divid{
    top:80px;
}
} 
```

如果宽度等于 826px，我想刷新页面。现在我有这些js代码：

```
var descTop = $('#divid').eq(0).css('top');
    if (descTop == "80px"){
           window.location.reload();
    } 
```

但它不起作用，但是当我尝试手动刷新它时，它会无限停止重新加载。

我的想法可能吗？如果是，那么我将如何处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:07:01.717

您正在根据小于 826 像素的大小刷新页面，一旦您低于该数量，情况总是如此。所以刷新会循环。

您需要查看附加到 onWinodowResize 事件：

```
$(window).resize(function() {
  var descTop = $('#divid').width()
if (descTop < 826){
       window.location.reload();
}
}); 
```

然后你需要重新加载一次。但仅当用户调整大小时。

此外，您的代码是比较两个字符串而不是宽度的整数值；

# css - 如何摆脱图像下方和上方的空白

> ID：13489672
> 
> 赞同：1
> 
> 时间：2012-11-21T09:03:22.447
> 
> 标签：css, image, border, padding

我有一个图像，它周围有一个边框，代码如下所示：

```
img{
 display: block;
 border: 2px solid #000;
 height: 140px;
 width: 200px;
 padding: 0;
}

<img src="pathtoimage.png" alt="product name" /> 
```

我在上下边框和图像之间有一个 1px 高的白色间隙。我尝试将图像放入容器中并将边框设置为容器，但仍然出现间隙。我尝试将位置设置为绝对和相对，但它们不起作用。我曾尝试使用 css3 的 box-size，但这也不起作用。

请有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:08:05.977

您的代码应该按原样工作。这是一个[演示](http://jsfiddle.net/PVe7Y/5/)。

我认为问题是你的实际图片。您是否 100% 确定图像本身没有一些小的白色边框？尝试替换`pathtoimage.png`并`http://placehold.it/350x150`查看白色边缘是否消失。

最后，尝试设置`padding: 0 !important;`以确保它没有从其他地方继承填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:05:38.090

元素周围有三种类型的边缘：内边距、边距和边框。

添加：

```
margin: 0; 
```

这是一张图片，解释了哪个是哪个：

![http://www.avajava.com/tutorials/cascading-style-sheets/how-are-margins-borders-padding-and-content-related/how-are-margins-borders-padding-and-content-related- 01.gif](../Images/ef3265c597c5a1fa3b65924d579693be.png)

# haskell - 非常简单的代码中的堆栈溢出

> ID：13489676
> 
> 赞同：7
> 
> 时间：2012-11-21T09:03:34.737
> 
> 标签：haskell

我是 Haskell 新手，所以我可能遗漏了一些基本的东西——在这种情况下很抱歉，但我就是不知道下面的代码有什么问题以及为什么它会溢出堆栈。它用于找到可以被 [1..x] 中的所有数字整除的最小数字，这里使用 [1,2]（欧拉计划[问题 5](https://projecteuler.net/problem=5)是针对 [1..20]）。

```
module Main where

main::IO()
main = do
    putStrLn $ show s where s = func 1

func :: Int -> Int
func x
    | foldr1 (&&) [x `mod` y == 0 | y <- [1..2]] == True = x 
    | otherwise = func x+1 
```

我想它应该打印出'2'。

我也尝试使用`and [mod x y == 0 | y <- [1..2]] == True = x`而不是第一后卫。在这两种情况下，我在尝试运行它时都会遇到堆栈溢出。我已经通过将所有内容放在 main 中加上另外一个列表理解来解决了这个问题，但我想了解这个有什么问题。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T09:10:00.637

问题（或者至少是一个问题——我没有检查过其他问题）在这一行：

```
| otherwise = func x+1 
```

你打算这样

```
| otherwise = func (x+1) 
```

但它被解析为

```
| otherwise = (func x)+1 
```

函数应用程序的优先级高于任何运算符。

# javascript - 鼠标悬停效果不起作用

> ID：13489677
> 
> 赞同：1
> 
> 时间：2012-11-21T09:03:36.140
> 
> 标签：javascript, html, smarty

我这里有一个奇怪的问题。我有一个隐藏元素（显示隐藏），当我将鼠标悬停在另一个元素上时我想显示它。javscript 似乎可以完成这项工作，但是当元素从 display: hidden; 更改时仍然没有任何反应。显示：块；

这是我的 html 部分：

```
<div id="cart_block" class="block exclusive" style="display: none;">
    a bunch more code in here, but I don't suppose I need to display that
</div> 
```

因为它在一个聪明的 tpl 文件中，所以我对 javascript 使用了文字。它看起来像这样：

```
<script type="text/javascript">
{literal}
    document.getElementById('header_user').onmouseover=function(){
        document.getElementById('cart_block').style.display='block';
    };
    document.getElementById('header_user').onmouseout=function(){
        document.getElementById('cart_block').style.display='none';
    };
{/literal} 
```

你可以在[http://www.jiblab.dk](http://www.jiblab.dk)看到它。如果您查看带有 id cart_block 的元素，您应该会看到，当您将鼠标悬停在右上角的篮子上时，样式标签会发生变化，但它会保持隐藏状态。如果我从上面的 html 中删除 style="display: none" ，它会显示我的元素，所以在我看来这应该可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:21:49.520

#cart_block 元素位于另一个已`display:none`设置的 div 中。

以下块需要 .top-header .sf-contener 从定义中删除，或者将 cart_block 元素移出该元素

```
.top-header #currencies_block_top, .top-header #header_links, .top-header #search_block_top, .top-header .sf-contener {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:36:22.407

使用 document.ready

```
$(document).ready(function(){

document.getElementById('header_user').onmouseover=function(){
        document.getElementById('cart_block').style.display='block';
    };
    document.getElementById('header_user').onmouseout=function(){
        document.getElementById('cart_block').style.display='none';
    };

}); 
```

> ```
> <div id="header_user" style="width:100px; height:20px; border:1px solid black;"></div>
> 
> <div id="cart_block" class="block exclusive" style="display: none;">
>     a bunch more code in here, but I don't suppose I need to display that
> </div> 
> ```

# html - CSS 按钮值样式

> ID：13489679
> 
> 赞同：3
> 
> 时间：2012-11-21T09:03:49.680
> 
> 标签：html, css, button, styling

如果我有这行代码：

```
<input type="submit" class="mybutton" name="add" value="Add new"/> 
```

如何使用 CSS 设置按钮值的样式？我需要在它的值之前添加一个图像，因此我需要在值输出处使用这行代码：

```
<span class="add">Add new</span> 
```

我试过这样的事情：

```
<input type="submit" class="mybutton" name="add" value="">
<span class="add">Add new</span></input> 
```

哈哈，但这完全没有任何意义。

任何人的好提示？

**编辑**

哇，感谢您的快速响应。忘了提我使用“sexybuttons”的 .CSS 文件，所以我无法更改样式并需要其他方法。

```
<button type="submit"> 
```

是我一直在寻找的。非常感谢大家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T09:07:15.790

您可以尝试使用`button`标签而不是`input`.

```
<button type="submit" class="mybutton" name="add">
  <img src="path_to_image">
  <span class="add">Add new</span>
</button> 
```

或者您可以`background-image`使用 CSS 为按钮设置一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T09:08:33.650

您可以使用 css 设置背景图像并将其应用于按钮，如下所示：

**CSS：**

```
input[type=button],input[type=submit],button{
    background:url(images/btn-verzend.jpg) no-repeat;
    width:91px;
    height:35px;
    line-height:35px;
    border:none;
    color:#FFF;
    cursor:pointer;
} 
```

**html:**

```
<input type="submit" name="add" value="Send" />
<input type="button" name="add" value="Send" />
<button>Send</button> 
```

这对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T09:07:29.247

```
<input type="submit" class="mybutton" name="add" value="Add new"/> 
```

然后添加一个CSS

```
.mybutton{
   // use css background attributes
   background:transaparent url(//image);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T09:08:39.530

我希望你在看这个............

[演示](http://tinkerbin.com/HObS2CEs)

**HTML**

```
<input type="submit" class="mybutton" name="add" value=""/> 
```

**CSS**

```
.mybutton {
background: url(http://coursesandevents.anjaschuetz.net/wp-content/uploads/2010/01/submit_button_large_red.jpg) no-repeat 0 0;
  width:248px;
  height:262px;
  border:none;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T09:09:40.113

尝试：

```
<button type="submit" class="mybutton" name="add" value="">
  <span class="add">Add new</span>
</button> 
```

[小提琴](http://jsfiddle.net/2HCLr/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-21T09:10:01.650

```
<input type="submit" class="mybutton" name="add" value="Add new"/>

.mybutton{
background:url(image.jpg)no-repeat;
height:12px;
width:12px;
color:#fff;
border:none
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-21T09:10:25.907

**HTML**

```
<input type="submit" class="mybutton" name="add" value="Add New" />​ 
```

**CSS**

```
input{
    background:#58D3F7 url(http://png-1.findicons.com/files/icons/1580/devine_icons_part_2/128/home.png) no-repeat left;
    background-size:20px;
    padding:10px 25px;
    text-align:center;
    border:none; border-radius:3px; cursor:pointer

}​ 
```

**[演示](http://jsfiddle.net/ynr42/2/)**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-21T09:16:39.733

你也可以这样做：

```
<span id="addSubmitButton" class="add" class="mybutton">Add new</span> 
```

然后将其添加到css：

```
.mybutton:before{
content:"url(image.jpg)";
} 
```

或者您可以使用 jquery 来执行此操作而无需更改原始代码，如下所示：

```
$("#addSubmitButton").before("<img src='image.jpg' alt='image'/>"); 
```

# python - Python script.py文件url参数

> ID：13489686
> 
> 赞同：1
> 
> 时间：2012-11-21T09:04:43.380
> 
> 标签：python, url, distribution, setup.py

我对 python 很陌生，正在学习创建 python 发行版。我已经意识到 setup.py 文件是这个过程的重要组成部分。但是我想知道 setup.py 脚本中 'url:' 字段的值应该解决什么问题？我提供给“url”字段的 url 是什么意思？如果我想将我的模块上传到 pypi，我应该提供什么 url。

对于这个问题的简单性，我深表歉意，但这个特定主题似乎在 python 文档中没有得到太多解决。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:27:31.640

它是您项目主页的 url（例如，github 页面或您为其设置的某个站点）。

[您可以在distutils 文档](http://docs.python.org/2/distutils/setupscript.html#additional-meta-data)中获得元数据的完整列表。

# iphone - 自动拨号，iphone

> ID：13489687
> 
> 赞同：0
> 
> 时间：2012-11-21T09:04:54.213
> 
> 标签：iphone, ipad

我正在尝试制作一个程序，在该程序中，用户可以自动拨打号码（最好是最后一次通话），类似于我们在旧电话中的功能。

我需要从通话列表中获取最后一个拨号号码，只需轻轻一按，用户就可以拨打该号码。

请指导我了解这个想法，实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:07:04.560

您不能修改电话应用程序的逻辑。你不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:18:54.037

从以 [编程方式拨打电话号码并使用 iPhone SDK 传递 DTMF](https://stackoverflow.com/questions/584663/programatically-dial-a-phone-number-and-pass-dtmf-using-the-iphone-sdk)

不知何故有帮助：

* * *

> 我不知道为什么每个人都说你不能......你可以！
> 
> NSString *phoneNumber = @"15555551212"; NSString *dtmfAfterPickup = @"1234"; NSString *telString = [NSString stringWithFormat:@"tel:%@,%@", phoneNumber, dtmfAfterPickup]; [[UIApplication sharedApplication] openURL:[NSURL URLWithString:telString]];

这将绕过拨号/取消提示拨打电话号码... 接听电话 1 秒后，将自动拨打 dtmfAfterPickup 字符串。

检测设备是否支持电话呼叫是个好主意

# jaxb - jaxb marshall 字段作为具有属性的 xml 节点

> ID：13489697
> 
> 赞同：3
> 
> 时间：2012-11-21T09:05:31.367
> 
> 标签：jaxb

```
public class Person {
    public String name; ...
} 
```

当我编组时，我想获得一个具有 value 属性的 Name 节点

```
<name value="arahant" /> 
```

代替 ：

```
<name>arahant</name> 
```

我怎样才能做到这一点？我尝试查看 XmlElementWrapper 但仅允许用于集合。我需要为此编写自定义代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T10:22:54.313

您可以使用几个选项来支持此用例。

* * *

**选项 #1 -`XmlAdapter`任何 JAXB (JSR-222) 实现**

此方法适用于任何符合[**JAXB (JSR-222) 的**](http://jcp.org/en/jsr/detail?id=222)实现。

***值适配器***

An`XmlAdapter`允许您编组一个对象，就好像它是另一个对象一样。在我们`XmlAdapter`的例子中，我们将`String`值转换为/从具有一个属性映射到的对象`@XmlAttribute`。

```
package forum13489697;

import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class ValueAdapter extends XmlAdapter<ValueAdapter.Value, String>{

    public static class Value {
        @XmlAttribute
        public String value;
    }

    @Override
    public String unmarshal(Value value) throws Exception {
         return value.value;
    }

    @Override
    public Value marshal(String string) throws Exception {
        Value value = new Value();
        value.value = string;
        return value;
    }

} 
```

***人***

`@XmlJavaTypeAdapter`注释用于指定`XmlAdapter`应与字段或属性一起使用。

```
package forum13489697;

import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
public class Person {

    @XmlJavaTypeAdapter(ValueAdapter.class)
    public String name;

} 
```

* * *

**选项 #2 - EclipseLink JAXB (MOXy)**

我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，我们提供的`@XmlPath`扩展允许您轻松地进行基于路径的映射。

***人***

```
package forum13489697;

import javax.xml.bind.annotation.XmlRootElement;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
public class Person {

    @XmlPath("name/@value")
    public String name;

} 
```

***jaxb.properties***

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

* * *

**演示代码**

以下演示代码可与任一选项一起使用：

***演示***

```
package forum13489697;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Person.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum13489697/input.xml");
        Person person = (Person) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(person, System.out);
    }

} 
```

***输入.xml/输出***

```
<?xml version="1.0" encoding="UTF-8"?>
<person>
    <name value="arahant" />
</person> 
```

# c++ - SFML 2.0 GLSL 体积光散射着色器

> ID：13489703
> 
> 赞同：4
> 
> 时间：2012-11-21T09:05:59.397
> 
> 标签：c++, visual-studio-2010, glsl, shader, sfml

使用 Kenny Mitchell 在*GPU Gems 3*中提供的 GLSL 着色器源代码，我尝试使用 SFML 2.0 创建一些 2D 神射线。目前，每当我编译和调试项目时，蒙版纹理和精灵（分别为“image.png”和“sprite”）完全消失。我目前建立的项目非常粗糙，只包含一个 main.cpp 文件和着色器文件，尽管我觉得我需要的比目前更多。任何帮助将非常感激！下面将提供源代码。

主.cpp：

```
#include <SFML\Graphics.hpp>
#include <SFML\System.hpp>
#include <SFML\Window.hpp>
#include <iostream>

void main()
{
    sf::RenderWindow _window(sf::VideoMode(800, 480, 32), "Lighting Test");
    _window.setFramerateLimit(60);

    sf::Shader lightingShader;
    sf::RenderStates renderState;

    sf::Texture texture;
    texture.loadFromFile("image.png");

    sf::Sprite sprite;
    sprite.setTexture(texture);

    sf::Texture backgroundTexture;
    backgroundTexture.loadFromFile("light.png");

    sf::Sprite background;
    background.setTexture(backgroundTexture);

    while (_window.isOpen())
    {
        int x = sf::Mouse::getPosition(_window).x;
        int y = sf::Mouse::getPosition(_window).y;

        lightingShader.loadFromFile("lightingShader.vert", "lightingShader.frag");
        lightingShader.setParameter("exposure", 0.25f);
        lightingShader.setParameter("decay", 0.97f);
        lightingShader.setParameter("density", 0.97f);
        lightingShader.setParameter("weight", 0.5f);
        lightingShader.setParameter("lightPositionOnScreen", sf::Vector2f(0.5f, 0.5f));
        lightingShader.setParameter("myTexture", sf::Shader::CurrentTexture);
        renderState.shader = &lightingShader;

        _window.clear(sf::Color::Black);
        sprite.setPosition(x, y);
        //sprite.setColor(sf::Color::Black);
        //background.setPosition(400, 240);
        _window.draw(background);
        _window.draw(sprite, renderState);
        _window.display();
    }
} 
```

LightingShader.vert：

```
void main() 
{

    gl_TexCoord[0] = gl_MultiTexCoord0;
    gl_Position = ftransform();
} 
```

LightingShader.frag:

```
uniform float exposure;
uniform float decay;
uniform float density;
uniform float weight;
uniform vec2 lightPositionOnScreen;
uniform sampler2D myTexture;
const int NUM_SAMPLES = 100 ;
void main()
{   
    vec2 deltaTextCoord = vec2( gl_TexCoord[0].st - lightPositionOnScreen.xy );
    vec2 textCoord = gl_TexCoord[0].st;
    deltaTextCoord *= 1.0 /  float(NUM_SAMPLES) * density;
    float illuminationDecay = 1.0;

    for(int i=0; i < NUM_SAMPLES ; i++)
    {
            textCoord -= deltaTextCoord;
            vec4 sample = texture2D(myTexture, textCoord);

            sample *= illuminationDecay * weight;

            gl_FragColor += sample;

            illuminationDecay *= decay;
    }

    gl_FragColor *= exposure;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T01:26:16.723

我终于自己解决了这个问题。原来我创建的顶点着色器是不必要的，我所要做的就是替换：

`lightingShader.loadFromFile("lightingShader.vert", "lightingShader.frag");`

和：

`lightingShader.loadFromFile("lightingShader.frag", sf::Shader::Type::Fragment);`.

# pdf - 如何在使用 itext 从数据库生成的 pdf 报告中添加标题图像

> ID：13489707
> 
> 赞同：-1
> 
> 时间：2012-11-21T09:06:06.637
> 
> 标签：pdf, servlets, header, itext

嗨伙计们！下面是我将数据库导出到 excel 文件的代码。现在根据我的要求，我想在页面顶部添加公司的标题图片。请帮助我并指导我完成任务。提前谢谢。下面是我的代码...

```
 Document document = new Document(PageSize.A2);

        PdfWriter.getInstance(document, new FileOutputStream("d:/".concat(datum1).concat(" ").concat("To").concat(" ").concat(datum2).concat(".pdf")));
        document.open();

        Image logo = Image.getInstance("d:/header.png");
        logo.setAlignment(Image.MIDDLE);
        logo.scaleAbsoluteHeight(20);
        logo.scaleAbsoluteWidth(20);
        logo.scalePercent(100);
        Chunk chunk = new Chunk(logo, 0, -45);
        HeaderFooter header = new HeaderFooter(new Phrase(chunk), false);
        header.setAlignment(Element.ALIGN_CENTER);
        header.setBorder(Rectangle.NO_BORDER);
        document.setHeader(header);

        PdfPTable table = new PdfPTable(9);
        table.setWidthPercentage(110);
        table.addCell("calldate");
        table.addCell("src");
        table.addCell("dst");
        table.addCell("dstchannel");
        table.addCell("lastapp");
        table.addCell("duration");
        table.addCell("disposition");
        table.addCell("amaflags");
        table.addCell("cdrcost");

        String strQuery = "";
        ResultSet rs = null;

        conexion conexiondb = new conexion();
        conexiondb.Conectar();

        strQuery = "SELECT * FROM cdrcost where date(calldate) between '" + datum1 + "' and '" + datum2 + "'";

        // strQuery = "SELECT * FROM cdrcost where date(calldate) between '2011-09-01' and '2012-01-01'";

        rs = conexiondb.Consulta(strQuery);
        while (rs.next()) {
            table.addCell(rs.getString("calldate"));
            table.addCell(rs.getString("src"));
            table.addCell(rs.getString("dst"));
            table.addCell(rs.getString("dstchannel"));
            table.addCell(rs.getString("lastapp"));
            table.addCell(rs.getString("duration"));
            table.addCell(rs.getString("disposition"));
            table.addCell(rs.getString("amaflags"));
            table.addCell(rs.getString("cdrcost"));
        }

        document.add(table);
        document.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:17:10.463

1.  正如在[现有页面底部添加内容中所述](https://stackoverflow.com/questions/13465657/itext-add-content-to-the-bottom-of-an-existing-page)，该方法`setHeader()`已在很久以前从 iText 中删除。请不要使用它！
2.  您可以使用页面事件轻松地将图像添加为标题。页面事件在[iText in Action 的第 5 章](http://itextpdf.com/book)中进行了解释。[您可以在SO](https://stackoverflow.com/questions/13465657/itext-add-content-to-the-bottom-of-an-existing-page)上找到对示例的参考

由于您似乎不理解之前在 SO 上给出的答案，让我重复一遍：

您需要创建一个`PdfPageEvent`实现，例如通过扩展`PdfPageEventHelper`覆盖该`onEndPage()`方法的类。这样做时，请考虑以下注意事项：

*   不要`onStartPage()`用来添加内容，
*   不要向`Document`传递给页面事件的对象添加任何内容，
*   除非您指定不同的页面大小，否则左下角的坐标为`x = 0; y = 0`。添加页脚时需要考虑到这一点。页脚的 y 值低于页眉的 y 值。

在您的代码中，您需要在打开文档*之前*对对象使用该`setPageEvent()`方法。每次页面完成时，您编写的方法都会被调用，因此您需要使用. 如果您希望图像位于页面顶部，则需要询问其尺寸，并相应地设置 Image 对象的绝对位置。`PdfWriter`*`onEndPage()``PdfContentByte.addImage()``Document`*

 *如果您不理解这个详尽的解释，请阅读我的[书](http://itextpdf.com/book)或聘请 iText 开发人员为您完成此任务。*

# asp.net-mvc - ASP.NET MVC4 中的 Html.ActionLink() 未正确呈现

> ID：13489710
> 
> 赞同：0
> 
> 时间：2012-11-21T09:06:15.513
> 
> 标签：asp.net-mvc, jqgrid, asp.net-mvc-4, jqgrid-asp.net

Un 在浏览器中呈现 @Html.ActionLink 时出现预期结果。下面是我用 jqGrid 编写的用于显示链接列的代码。

```
{ name: 'Restart',
                         formatter: function (cellvalue, options, rowObject) {
                             var x = '@Html.ActionLink( "Restart", "Dashboard", new { requestId ="myId"  }, new { onclick = "return confirm('Are you sure to Restart?');" })';
                             return x.replace("myId",rowObject[8]);
                         }, align: 'left', width: 100
                     } 
```

在浏览器中渲染后显示如下

```
<a href="/DashBoard/Dashboard?requestId=2362e13b-e4fc-4140-b7ad-1bd0e82b6bde" onclick="return confirm('Are you sure to Restart?');">Restart</a> 
```

当我在上面的代码中替换 @Html.ActionLink("Restart", "Restart") 时，它会像这样正确显示。

```
 <a href="/Dashboard/Restart?requestId=2362e13b-e4fc-4140-b7ad-1bd0e82b6bde" onclick="return confirm('Are you sure to Restart?');">Restart</a> 
```

为什么 ASP.NET MVC4 会产生 Un Expected 结果？这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:12:17.370

您不应将此行为视为意外。您正在使用[LinkExtensions.ActionLink](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink%28v=vs.108%29.aspx)方法的以下重载：

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    Object routeValues,
    Object htmlAttributes
) 
```

所以第二个参数是动作名称，控制器名称默认为当前控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:12:38.847

这是因为您需要检查 Html.ActionLink 的参数

我假设你在 DashBoardController

第一个para是你要在链接中显示的字符串第二个是参数第三个是控制器

等等...

你可能想看看你用 Url.Action() 做了什么，以使这段代码更整洁

# css - Opera 上的水平下拉菜单

> ID：13489712
> 
> 赞同：3
> 
> 时间：2012-11-21T09:06:21.297
> 
> 标签：css, drop-down-menu, menu, opera

我在我的网站上显示下拉菜单时遇到问题：http: [//lotzen.eu/jkowalczuk/](http://lotzen.eu/jkowalczuk/) 我在大多数浏览器上都能正常工作：Firefox、IE、Chrome、Safari

问题从 Opera 开始。当鼠标悬停在菜单项上时链接消失。

我是 CSS 新手，我找不到任何解决此问题的方法。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:18:13.237

`display`将值更改为`inline-block`in your`class #nav li`就完成了。

```
#nav li {
   position: relative;
   display: inline-block;
} 
```

[在此处](http://d.pr/i/PVxj)查看屏幕截图

# windows-phone-8 - NetworkAdapter-Windows Phone 8 的地址

> ID：13489720
> 
> 赞同：2
> 
> 时间：2012-11-21T09:06:49.800
> 
> 标签：windows-phone-8, proximity

我正在尝试构建一个 Windows-Phone-8 应用程序，它通过多个网络接口（蓝牙、Wifi、也许 NFC）进行通信

我的问题：有什么方法可以获取这些适配器（蓝牙 / Wifi）的地址（MAC / IP）？！

对于我已经尝试过的接近适配器->

```
ProximityDevice tempDevice = ProximityDevice.GetDefault();

string deviceSelector = ProximityDevice.GetDeviceSelector(); 
```

提前致谢！

# android - 如何将 viewPager 的方向反转为从左到右的顺序？

> ID：13489723
> 
> 赞同：5
> 
> 时间：2012-11-21T09:07:02.320
> 
> 标签：android, android-viewpager

我有几个视图的 viewPager。viewPager 的默认行为是首先显示第一个项目，然后从右向左滑动将第二个视图显示到当前视图的右侧，依此类推。

我想要的行为是在显示第一个项目后，**从左向右**滑动将显示当前项目 **左侧**的下一个视图。

我搜索了很多聪明的方法来实现这个但没有结果..
提前谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T09:12:19.373

为什么不反转您在视图寻呼机中查看的列表并使用[setCurrentItem(int)](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setCurrentItem%28int%29)或[setCurrentItem(int,boolean)](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setCurrentItem%28int,%20boolean%29)并在活动/片段启动时设置最后一个..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T09:12:27.230

当 ViewPager 附加到 View 时，您可以简单地使用`setCurrentItem()`它导航到 ViewPager 中的最后一页。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-11-20T11:13:10.113

### ViewPager2 的解决方案

我正在寻找一种方法来反转 viewpager2 并想出了这个。这是一个肮脏的黑客，但它有效

这个想法是水平镜像viewpager，然后将每个页面镜像回来

```
var ViewPager2.isReversedDirection: Boolean
get() = scaleX == -1f
set(value) {
    if (value) {
        scaleX = -1f  //  mirror viewpager

        val listener = object : RecyclerView.OnChildAttachStateChangeListener {
            override fun onChildViewDetachedFromWindow(view: View) = Unit

            override fun onChildViewAttachedToWindow(view: View) {
                view.scaleX = -1f  //  mirror the page back when it was attached
            }
        }

        val recyclerView = getChildAt(0) as RecyclerView
        recyclerView.addOnChildAttachStateChangeListener(listener)
    }
} 
```

由于依赖viewpager内部实现，所以在androidx.viewpager2:viewpager2:1.0.0上测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-28T14:48:27.573

您现在可以在 Recyclerview 中水平显示项目。

有一个选项可以将 recyclerview 项目显示为相反的顺序。

```
RecyclerView recyclerView = findViewById(R.id.recyclerView);
recyclerView.setLayoutManager(new LinearLayoutManager(activity, LinearLayoutManager.HORIZONTAL, true)); // last parameter is isReverse 
```

如果你想显示像 ViewPager 分页这样的 RecyclerView 项目，你应该使用这个库：

[https://github.com/lsjwzh/RecyclerViewPager](https://github.com/lsjwzh/RecyclerViewPager)

此代码将 RecyclerView 显示为 Reverse Order ViewPager。

这是代码：

```
RecyclerViewPager recyclerViewPager = findViewById(R.id.recyclerViewPager);
recyclerViewPager.setLayoutManager(new LinearLayoutManager(activity, LinearLayoutManager.HORIZONTAL, true));

repositories {
    ...
    maven { url "https://jitpack.io" }
    ...
}

dependencies {
    ...
    compile 'com.github.lsjwzh.RecyclerViewPager:lib:v1.1.2@aar'
    ...
} 
```

# git - 再次创建一个等于 master 的 git 分支

> ID：13489725
> 
> 赞同：17
> 
> 时间：2012-11-21T09:07:05.993
> 
> 标签：git, branch

*简洁版本*

使分支再次等于的最简单方法是什么`master`，丢弃任何差异？到目前为止，我只是简单地使用`git branch -D wip`, 后跟`git checkout -b wip`，但这似乎有点傻。

*动机*

我经常`wip`在我的分支旁边有一个分支`master`，用于“进行中的工作”。有时在这样一个分支上的工作会被“抛在后面”，当我重新发现它时，我发现我不再需要它了。当我想使用分支存储一组新的“正在进行的工作”并且我发现我只是想丢弃与 的任何差异时，通常会发生这种重新发现`master`，因此新的“正在进行的工作”适合顶部。找出差异不值得麻烦：上面描述的解决方案对我来说很好。有没有更好的解决方案来解决这个用例？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-21T09:19:27.107

在您的分支中尝试这个：

```
git reset --hard master 
```

这将使您的分支与 master 相同，删除您可能已完成的所有提交，并丢弃暂存区域中的所有文件。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-21T15:31:29.317

如果您真的想用该名称吹走以前的分支，并创建一个新分支，您可以使用：

```
git checkout -B wip master 
```

使用大写版本而不是`-b`将导致 git 切换到命名分支，并将其重置为命名为最后一个参数的新起点。如果您当前处于所需的起点，则可以省略最后一个参数（`master`此处），它将默认为 using `HEAD`。

# ssl-certificate - 将 Domino 服务器的 kyr 密钥导出到 PEM 或 PKCS12

> ID：13489735
> 
> 赞同：0
> 
> 时间：2012-11-21T09:07:41.727
> 
> 标签：ssl-certificate, lotus-domino

Lotus Domino 为 SSL 配置。如何导出他的证书（存储在扩展名为 .kyr 的密钥环文件中）。

这意味着我需要另一个服务器上的 Domino 网站的 SSL 证书（如反向代理）我的问题与[http://labs.groupwave.be/index.php/2009/](http://labs.groupwave.be/index.php/2009/08/31/exporting-kyr-certificate-for-apache/)
中公开的问题几乎相同[08/31/exporting-kyr-certificate-for-apache/](http://labs.groupwave.be/index.php/2009/08/31/exporting-kyr-certificate-for-apache/)

我还阅读了： [http](http://www-01.ibm.com/support/docview.wss?rs=463&context=SSKTMJ&q1=export+ssl+certificate&uid=swg21097215&loc=en_US&cs=utf-8&lang=en) ://www-01.ibm.com/support/docview.wss?rs=463&context=SSKTMJ&q1=export+ssl+certificate&uid=swg21097215&loc=en_US&cs=utf-8&lang=en 这说明它不是可能的。

所以它是否有效？也许我混淆了私钥和公钥？我需要私钥还是其他服务器上的公钥就足够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:33:41.633

那么对于谁在这里谷歌......
了解“它是否有效”的最佳方式？是“尝试并相信自己！”。

所以是的！有用！许多功劳[归于 http://labs.groupwave.be/index.php/2009/08/31/exporting-kyr-certificate-for-apache/](http://labs.groupwave.be/index.php/2009/08/31/exporting-kyr-certificate-for-apache/)

其他服务器需要私钥！（顺便说一句，如果任何拥有您的公共证书的人都可以做到这一点，那将意味着没有安全性）

# android - ArrayAdapter 的 getView" 没有被调用

> ID：13489736
> 
> 赞同：0
> 
> 时间：2012-11-21T09:07:43.073
> 
> 标签：android, listview, android-arrayadapter

我有一个自定义适配器，它的“getView”没有被调用。那是我的主要活动：

```
public class MainActivity extends Activity {
RelativeLayout mainRelativeLayout;
ListView listViewOne;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    String[] values1 = new String[] { " ", "Android", "iPhone", "WindowsMobile" };
    ListArr listArr = new ListArr(this, 3);
    listArr.AddListToListArr(values1);
} 
```

}

那是我的适配器：

```
public class MyAdapter extends ArrayAdapter<String> {
private final Context context;
private final String[] values;
private TextView textView;
private ImageView icon;

public MyAdapter(Context context, String[] values) {
    super(context, R.layout.first_row, values);
    this.context = context;
    this.values = values;
}

@Override
public int getCount() {
    return values.length;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView;

    rowView = inflater.inflate(R.layout.first_row, parent, false);
    textView = (TextView) rowView.findViewById(R.id.row_text_view);

    icon.setImageDrawable(context.getResources().getDrawable(R.drawable.ic_launcher));
    textView.setText(values[position]);
    return rowView;
}} 
```

这就是创建列表的类：

```
public class ListArr {
int indexOfEmptyCellInArr;
ListView[] listArr;
Context context;
LinearLayout mainRelativeLayout;

public ListArr(Context context, int numOFLists) {
    this.listArr = new ListView[numOFLists];
    this.indexOfEmptyCellInArr = 0;
    this.context = context;
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflater.inflate(R.layout.activity_main, null);
    this.mainRelativeLayout = (LinearLayout) v.findViewById(R.id.main_relative_layout);
}

public void AddListToListArr(String[] stringsOfNewList) {
    ArrayAdapter<String> arrayAdapter = new MyAdapter(context, stringsOfNewList);
    ListView listview = new ListView(context);
    listview.setAdapter(arrayAdapter);
    listArr[indexOfEmptyCellInArr] = listview;
    mainRelativeLayout.addView(listArr[indexOfEmptyCellInArr]);

    indexOfEmptyCellInArr++;
}

public void RemoveLastList(){
    int indexOfListToRemove = indexOfEmptyCellInArr - 1;
    listArr[indexOfListToRemove] = null;
    indexOfEmptyCellInArr--;
} 
```

为什么 getView 没有被调用？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:13:03.390

您还没有将 mainRelativeLayout 添加到活动的内容视图中。您应该使用 findViewById()，而不是应用额外的 LayoutInflater。使用 LayoutInflater.inflate() 方法会导致额外的布局膨胀，它会创建一个尚未添加到列表视图的新视图。所以将您的代码更改为以下内容：

```
public class MainActivity extends Activity {
RelativeLayout mainRelativeLayout;
ListView listViewOne;

@Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String[] values1 = new String[] { " ", "Android", "iPhone", "WindowsMobile" };
        ListArr listArr = new ListArr(this, this, 3);
        listArr.AddListToListArr(values1);
    }
    } 
```

和 ListAddr 类到下面的代码

```
public class ListArr {
int indexOfEmptyCellInArr;
ListView[] listArr;
Context context;
Activity activity;
LinearLayout mainRelativeLayout;

public ListArr(Activity activity, Context context, int numOFLists) {
    this.listArr = new ListView[numOFLists];
    this.indexOfEmptyCellInArr = 0;
    this.context = context;
    this.activity = activity;
    this.mainRelativeLayout = (LinearLayout) activity.findViewById(R.id.main_relative_layout);
}

public void AddListToListArr(String[] stringsOfNewList) {
    ArrayAdapter<String> arrayAdapter = new MyAdapter(context, stringsOfNewList);
    ListView listview = new ListView(context);
    listview.setAdapter(arrayAdapter);
    listArr[indexOfEmptyCellInArr] = listview;
    mainRelativeLayout.addView(listArr[indexOfEmptyCellInArr]);

    indexOfEmptyCellInArr++;
}

public void RemoveLastList(){
    int indexOfListToRemove = indexOfEmptyCellInArr - 1;
    listArr[indexOfListToRemove] = null;
    indexOfEmptyCellInArr--;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:13:49.433

`getItem(int position)`您还必须覆盖`ArrayAdapter`.

```
@Override
public String getItem(int position) {
    return values[position];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T05:04:01.207

/** * 显示患者和医生健康提示的适配器 */ public class HealthTipsAdapter extends ArrayAdapter implements ServiceCallBacks {

```
 @Override
    public HealthPost getItem(int position) {
        // TODO Auto-generated method stub
        return super.getItem(position);
    }

    @Override
    public int getPosition(HealthPost item) {
        // TODO Auto-generated method stub
        return super.getPosition(item);
    }

    @Override
    public void notifyDataSetChanged() {
        // TODO Auto-generated method stub
        super.notifyDataSetChanged();
    }

    /** Context of application(here DoctorCommentsActivity object) */
    private Context context;
    /** Used to store parentCommentId in order to show doctor reply */
    private String parentCommentId;
    /** Common list used in both patient comment and doctor reply lists */
    private List<HealthPost> commentsList;
    /** List used to store patient comments */
    private List<HealthPost> patientCommentsList;
    /** List used to store doctor replies */
    private List<HealthPost> doctorCommentsList;
    /** boolean list used to decide icon color for plusOneCommentIcon */
    private List<Boolean> isCommentPlusOneList;
    /**
     * boolean hashmap used to store comment id(key) and if it has
     * reply(value)
     */
    private HashMap<String, Boolean> commentIdHasReplyMap;
    /**
     * boolean hashmap used to store comment id(key) and its plus one
     * count(value)
     */
    private HashMap<String, String> commentIdPlusCountMap;

    /** stores comment id of comment to be deleted or plus oned */
    private String commentId;

    /**
     * stores position of list item in case Internet connection is
     * unavailable
     */
    private int retryForPosition = -1;
    /** stores position of list item in case of right doctor is clicked */
    private int positionValue;

    /**
     * differentiates in two lists whether list stores patient comments or
     * doctor replies
     */
    private boolean isReply = false;

    public HealthTipsAdapter(Context context, List<HealthPost> list) {
        super(context, R.layout.list_health_tips,list);
        this.context = context;
        this.commentsList = new ArrayList<HealthPost>();
        Log.v(tag,"construtor-"+list.get(1).getPost());
        this.commentsList.addAll(list);
    }

    @Override
    public int getCount() {
        Log.v(tag,"size"+commentsList.size());
        return commentsList.size();

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        Log.v(tag,"getview-"+position+"commentlist-"+commentsList.get(1).getPost());
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.list_health_tips,
                parent, false);

        final TextView tv_comment_right_count = (TextView) rowView
                .findViewById(R.id.tv_comment_right_count);

        final View rl_comment_delete = rowView
                .findViewById(R.id.rl_comment_delete);
        final TextView textViewUserName = (TextView) rowView
                .findViewById(R.id.textView_UserName);
        final TextView textViewComment = (TextView) rowView
                .findViewById(R.id.txtComment);
        final TextView textViewDate = (TextView) rowView
                .findViewById(R.id.textView_date);
        final TextView textViewTime = (TextView) rowView
                .findViewById(R.id.textView_time);
        final View rl_comment_right = (View) rowView
                .findViewById(R.id.rl_comment_right);
        final ImageView iv_comment_right = (ImageView) rowView
                .findViewById(R.id.iv_comment_right);
        final View rl_comment_offensive = (View) rowView
                .findViewById(R.id.rl_comment_offensive);
        final View rl_doctor_reply = (View) rowView
                .findViewById(R.id.rl_doctor_reply);
        final ImageView iv_doctor_reply_seperator = (ImageView) rowView
                .findViewById(R.id.iv_doctor_reply_seperator);
        Log.v(tag,"getView-"+commentsList.get(1).getPost());
        // Actual comment text to be displayed
        textViewComment.setText("hi"+commentsList.get(position).getPost());

        return rowView;
    } 
```

# c++ - GetWindowsDirectory 和 GetSystemWindowsDirectory 的区别？

> ID：13489746
> 
> 赞同：3
> 
> 时间：2012-11-21T09:08:24.930
> 
> 标签：c++, winapi, terminal-services

我正在尝试通过控制台和远程连接测试应该由[GetWindowsDirectory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724454%28v=vs.85%29.aspx)和[GetSystemWindowsDirectory API 返回的不同系统路径。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724403%28v=vs.85%29.aspx)根据文档：

> 对于终端服务，GetSystemWindowsDirectory 函数检索系统 Windows 目录的路径，而 GetWindowsDirectory 函数检索每个用户专用的 Windows 目录的路径。在单用户系统上，GetSystemWindowsDirectory 与 GetWindowsDirectory 相同。

我似乎看不出有什么区别。它们都返回“C:\Windows”。

有人可以解释为什么我没有看到为终端服务宣布的文档吗？

**编辑：**这是我正在运行的一个小 C++ 代码示例：

```
//Check if RDP session
BOOL bRDP = FALSE;
DWORD dwSessID = -1;
::ProcessIdToSessionId(::GetCurrentProcessId(), &dwSessID);
DWORD dwSz;
LPTSTR ppBuffer = NULL;
if(WTSQuerySessionInformation(NULL, dwSessID, WTSClientProtocolType, &ppBuffer, &dwSz))
{
    bRDP = *(USHORT*)ppBuffer == 2;
    WTSFreeMemory(ppBuffer);
}

_tprintf(_T("%s\n"), !bRDP ? _T("Console Session") : _T("RDP Session"));

//Get system folder
TCHAR buff[MAX_PATH * 2];

buff[0] = 0;
GetSystemWindowsDirectory(buff, SIZEOF(buff));
_tprintf(_T("Sysfolder1: %s\n"), buff);

buff[0] = 0;
GetWindowsDirectory(buff, SIZEOF(buff));
_tprintf(_T("Sysfolder2: %s\n"), buff); 
```

这是我从远程桌面会话中获得的输出：

```
RDP Session
Sysfolder1: C:\WINDOWS
Sysfolder2: C:\WINDOWS 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:44:37.457

感谢@RaymondChen 和@Stefan，**只有**在应用程序设置中指定[/TSAWARE:NO](http://msdn.microsoft.com/en-us/library/01cfys9z%28v=vs.80%29.aspx)链接器选项时，您才会看到输出的不同： ![在此处输入图像描述](../Images/6e9680665ac76ff6008bce86748cd0ff.png)

在这种情况下，我得到了这个输出：

```
RDP Session
Sysfolder1: C:\WINDOWS
Sysfolder2: C:\Documents and Settings\RemoteUserA\WINDOWS 
```

# joomla - 在任何自定义主题之后更改 Joomla 中的模板

> ID：13489747
> 
> 赞同：0
> 
> 时间：2012-11-21T09:08:29.047
> 
> 标签：joomla, joomla1.5, joomla2.5, joomla-extensions

我是 Joomla 的新手。虽然我非常擅长 PHP。我得到了一个带有自定义主题的 joomla 项目的源代码。但是当我将此主题更改为任何其他现有的 joomla 默认主题时。它给了我一条默认主题的消息已成功更改，但在站点上不起作用。站点保留其旧版本。任何机构都可以帮助我解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:35:50.613

只是要仔细检查主题是否为默认主题，请转到 phpMyAdmin 并在表格中检查默认模板是否在**“主页”**列中`#__template_styles`具有数字**1 。**

 **如果是这样，那么您的模板肯定已设置为默认模板。转到您的 Joomla 后端，然后在顶部菜单上，转到**站点 >> 维护 >> 全局签入**。

如果这不起作用，我只能假设它是您的缓存。**

# asp.net - Umbraco 中的波斯日期选择器（asp.net 的 cms）

> ID：13489748
> 
> 赞同：2
> 
> 时间：2012-11-21T09:08:29.873
> 
> 标签：asp.net, asp.net-mvc, visual-studio, umbraco, datetimepicker

我需要在我的网站中添加一个波斯（shamsi）日期时间选择器，我已经在[这个链接](https://stackoverflow.com/questions/13429558/how-do-i-add-a-persian-or-other-language-datatimepicker-in-umbraco/13436513#comment18375515_13436513)中问过我的问题。

并且 -codegecko 为我写了一个真实的答案。-codegecko 答案：您可以在 Umbraco 中创建新的数据类型，以您自己的风格和偏好来存储和呈现日期。该过程涉及创建几个类，其中一个实现称为 IDataType 的接口。Umbraco 总部的员工 Tim Geyssens 在[这里](http://www.nibble.be/?p=50)有一篇很棒的关于基础知识的博文。

结果，我正在尝试这样做。我下载了为 Asp.Net 编写的不同版本的日期波斯选择器控件，并更改了 -codegecko 的代码以使用日期波斯选择器：

```
private persianDatePicker pdate;
protected override void OnInit(EventArgs e)
 {
  pdate = new persianDatePicker();
  base.ContentTemplateContainer.Controls.Add(pdate); 
 } 
```

当我在 Umbraco 中添加它时，我在内容框中看到一个没有任何日期的空框。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T11:55:39.380

我和你一样工作，我很满意。我想你必须检查一下`persianDatePicker`。

请使用[此链接](http://s3.picofile.com/file/7561800000/DatePersianPicker.rar.html)

# mysql - 在子查询中引用外部查询

> ID：13489750
> 
> 赞同：3
> 
> 时间：2012-11-21T09:08:38.300
> 
> 标签：mysql, sql, database, select

我有以下查询，它通常有效，并且应该返回涵盖定义时间范围的所有行（如果没有绝对匹配，则取最接近的前一行和下一行 - 在[http://www.orafaq.com/node/1834](http://www.orafaq.com/node/1834)中概述）

```
SELECT * FROM table
  WHERE id=__ID__ AND `date` BETWEEN 
    IFNULL((SELECT MAX(`date`) FROM table WHERE id=__ID__ AND `date`<=__LOWERLIMIT__), 0)
  AND
    IFNULL((SELECT MIN(`date`) FROM table WHERE id=__ID__ AND `date`>=__UPPERLIMIT__), UNIX_TIMESTAMP())
ORDER BY `date` 
```

但希望通过引用外部选择来减少两个表子选择，但显然它不喜欢它

```
SELECT * FROM (SELECT * FROM table WHERE id=__ID__) b
  WHERE `date` BETWEEN 
    IFNULL((SELECT MAX(`date`) FROM b WHERE `date`<=__LOWERLIMIT__), 0)
  AND
    IFNULL((SELECT MIN(`date`) FROM b WHERE `date`>=__UPPERLIMIT__), UNIX_TIMESTAMP())
ORDER BY `date` 
```

有没有办法在没有三个表选择的情况下进行查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:24:02.537

你可以通过加入来做这样的事情：

```
select * from table a
    inner join (
       select id,
              max(
                  if(`date` <= __LOWERLIMIT__ ,`date`, 0)
              ) as min_date,              
              min(
                 if(`date` >= __UPPERLIMIT__ , `date`, UNIX_TIMESTAMP())
              ) as max_date
           from table
           where id = __ID__
           group by id
    ) range on
    range.id = a.id and
    a.`date` between min_date and max_date; 
```

我不是 MySQL 专家，因此如果需要进行一些语法调整，我深表歉意。

**更新：** OP 也发现[了这个非常好的解决方案](https://stackoverflow.com/a/5914974/1841321)。

# slider - 我不知道制作主页滑块要多少钱

> ID：13489754
> 
> 赞同：0
> 
> 时间：2012-11-21T09:08:47.643
> 
> 标签：slider

我已经从事自由职业大约一年了，但我总是向客户收取固定费用以制作 100% 的网站。我被要求只为主页制作一个带有图片和文字等的滑块。非常简单。他们想在我与他们一起参与更多网站之前“测试我”，但他们不会告诉我他们的预算或他们的其他开发人员为同样的工作获得了多少报酬。我通常向低端的人收取网站费用，因为我还是新手，而且我的客户的需求通常很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:13:20.737

如果您希望为他们提供更多工作，而且这对您来说不是太多工作，我会向他们收取象征性的 1 美元/欧元/无论您以何种货币支付，然后在附注中提及。

这会给人留下好印象，因为每个人都会知道，数量只是象征性的。对于测试而言，充电太多或太少要好得多。

# c++ - xcode4 和 nodejs：如何导入？

> ID：13489755
> 
> 赞同：1
> 
> 时间：2012-11-21T09:08:59.157
> 
> 标签：c++, node.js, xcode4

我正在开发一个项目来测试和调试它们 nodejs-foo。我想使用 Xcode4 作为 IDE。我试图将 nodejs-project-code 从 github 导入 xcode。但是因为我是 Xcode 的新手，所以我不知道从哪里开始以及该做什么。

我在*developer.apple.com上找到*[了这个](http://developer.apple.com/library/mac/#documentation/Porting/Conceptual/PortingUnix/preparing/preparing.html)，但我不确定它到底有多大帮助。

 *如何将现有的 None-Xcode-project 导入 Xcode？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:24:47.907

我通过浏览 Google v8 文档自己解决了这个问题。调用 ./configure 后，您只需在源文件夹中调用 ./tools/gyp_node 即可为 xcode 构建项目文件！*

# iphone - 如何在我的当前位置和 MKMapView 上的所需位置之间绘制一条路线？

> ID：13489756
> 
> 赞同：2
> 
> 时间：2012-11-21T09:09:01.463
> 
> 标签：iphone, ios, xcode, map, mkmapview

我想显示我当前位置和所需位置之间的路线。我能够做到这一点，但是当源点和目标点到目前为止，它不会显示路线并给出内存警告。你能建议任何示例代码或任何方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:17:28.450

以下代码用于当前位置到所需位置之间的绘制路径

```
- (void)viewDidLoad {
    [super viewDidLoad];

    mapView = [[[MapView alloc] initWithFrame:
                         CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)] autorelease];

    [self.view addSubview:mapView];
    [self performSelector:@selector(LoadMaps) withObject:self afterDelay:1.0];
}

-(void)LoadMaps{
    MapWithRoutesAppDelegate *app = (MapWithRoutesAppDelegate *)[[UIApplication sharedApplication]delegate];
    CLLocation *location = app.userlocation;
    // Configure the new event with information from the location
    CLLocationCoordinate2D coordinate = [location coordinate];

    NSString *latitude = [NSString stringWithFormat:@"%f", coordinate.latitude];
    NSString *longitude = [NSString stringWithFormat:@"%f", coordinate.longitude];

    NSLog(@"dLatitude : %@", latitude);
    NSLog(@"dLongitude : %@",longitude);

    Place* home = [[[Place alloc] init] autorelease];
    home.name = @"Home";
    home.description = @"Sweet home";
    home.latitude = coordinate.latitude;
    home.longitude = coordinate.longitude;

    Place* office = [[[Place alloc] init] autorelease];
    office.name = @"Office";
    office.description = @"Bad office";
    office.latitude = 23.329404;
    office.longitude = 72.0039299;

    [mapView showRouteFrom:home to:office];
    NSLog(@"latitide:%.7f, longitude: %.7f ", coordinate.latitude, coordinate.longitude);
} 
```

在 Appdelegate 方法中包含

```
#pragma mark- CLLocationManager delegate
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation{
    MapWithRoutesAppDelegate *app = (MapWithRoutesAppDelegate*)[[UIApplication sharedApplication] delegate];
    app.userlocation = newLocation;
    NSLog(@"latitide:%.7f, longitude: %.7f ", app.userlocation.coordinate.latitude, app.userlocation.coordinate.longitude);
} 
```

[您可以从这里下载完整的源代码。](http://sourceforge.net/projects/nimitparekh/files/Current%20location%20to%20desire%20location%20path/MapWithRoutes.zip/download)

愿这有很大帮助。

# facebook - 获取 YOUR_APP_ID 或为公司页面创建应用程序

> ID：13489757
> 
> 赞同：1
> 
> 时间：2012-11-21T09:09:04.630
> 
> 标签：facebook, login

全部！

我在 Facebook 上有公司页面。现在我需要在我的网站上登录。但我无法通过我的公司页面帐户访问[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)，它重定向到我的页面。使用我的私人帐户，它可以正常工作。

如何为我的公司页面创建应用程序？

# mapreduce - 不能应用 map reduce 模型的机器学习算法

> ID：13489758
> 
> 赞同：6
> 
> 时间：2012-11-21T09:09:06.403
> 
> 标签：mapreduce, machine-learning

论文“Map-Reduce for Machine Learning on Multicore”展示了 10 种机器学习算法，它们可以从 map reduce 模型中受益。关键是“任何符合统计查询模型的算法都可以写成某种“求和形式”，算法可以表示为求和形式可以应用map reduce编程模型。

对于那些不能表达为求和形式的算法，并不意味着它们不能应用map reduce模型。谁能指出任何特定的机器学习算法，这些算法不能通过 map reduce 模型加速？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:20:42.730

当数据中存在计算依赖性时，MapReduce 不起作用。这种限制使得很难表示在结构化模型上运行的算法。

> 因此，当面临大规模问题时，我们经常放弃丰富的结构化模型，转而采用适合 MapReduce 抽象[2](http://select.cs.cmu.edu/publications/paperdir/uai2010-low-gonzalez-kyrola-bickson-guestrin-hellerstein.pdf)的过于简单的方法。

在机器学习社区中，许多算法在学习和推理过程中迭代地变换参数，例如信念传播、期望最大化、梯度下降和吉布斯采样。这些算法迭代地细化一组参数，直到某些终止标准匹配[2](http://select.cs.cmu.edu/publications/paperdir/uai2010-low-gonzalez-kyrola-bickson-guestrin-hellerstein.pdf)。

如果您在每次迭代中调用 MapReduce，是的，我认为您仍然可以加快计算速度。这里的重点是我们需要一个更好的抽象框架，以便能够包含数据的图形结构，表达复杂的调度或自动评估终止。

顺便说一句，[Graphlab](http://www.graphlab.org)是上述原因[2](http://select.cs.cmu.edu/publications/paperdir/uai2010-low-gonzalez-kyrola-bickson-guestrin-hellerstein.pdf)所激发的替代方案之一。

# google-apps-script - 如何在多次登录到一个谷歌电子表格以同时更新时克服错误“onEdit function”

> ID：13489763
> 
> 赞同：0
> 
> 时间：2012-11-21T09:09:29.273
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我在谷歌电子表格中准备了一个格式，该格式接受多个用户的输入/更新。有时，三个或四个用户可能同时访问同一个工作表以更新工作表中的格式。

问题是：当我的 onEdit 函数在编辑工作表中的一行时触发日期/时间戳时，会引发错误（“oops ...”）。显示此错误时未插入大多数时间戳。

这可能是同时对多行进行的频繁编辑。谁能指导我如何解决这个问题；没有onedit功能的基于行的时间戳/日期是否有任何选项或替代方法？

以下是我用于日期/时间戳的脚本，如果下面提到的脚本中有错误，请纠正我。

```
function onEdit(){

 var s = SpreadsheetApp.getActiveSheet();  

 var sheetname = SpreadsheetApp.getActiveSheet().getName()

 var s = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Footfall-Format');

if(s.getName() == 'Footfall-Format' ) { //checks that we're on the correct sheet

var totrows = s.getMaxRows();

var r = s.getActiveCell();

if( r.getColumn() >= 2 &&  r.getColumn() <= 15) { //checks the column

// in order to conver -ve to +ve 

if(r.getColumn() < 0){

r.getColumn() = r.getColumn() * -1;

} 

//diffrence of colums makes a standar col

var settimsmp = 16 - r.getColumn();

//cahnge negetive num,ber to +ve then caculate row number;

var nextCell = r.offset(0, settimsmp);

if( nextCell.getValue() === '' ) //is empty?

var stringdate = new Date();

time = Utilities.formatDate(new Date(stringdate), "GMT", "dd-MMM-yyyy");   

nextCell.setValue(time);

SpreadsheetApp.flush(); //force the data to be written            

};

};

SpreadsheetApp.flush(); //force the data to be written

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T16:40:25.183

这是一个常见的“[关键部分](http://en.wikipedia.org/wiki/Critical_section)”问题，Google Apps 脚本提供了锁定服务来解决它。

查看[此答案](https://stackoverflow.com/a/15258203/1677912)，了解使用此技术的函数示例。

# asp.net - 在 IIS 中从一个 IP 运行多个站点

> ID：13489768
> 
> 赞同：16
> 
> 时间：2012-11-21T09:09:50.167
> 
> 标签：asp.net, iis-7, windows-server-2008, windows-firewall

我有一个装有 Windows Server 2008 和 IIS 7 的盒子，我正在使用 ASP.NET 应用程序。我正在尝试从一个 IP 运行多个站点，但我无法从外部访问这些站点。我只能从外部访问默认网站，但是当我想访问第二个网站时，它不起作用。

第二个应该在 80 上运行`http://ip:81`，默认值在 80 上。它们都在本地运行良好，我在防火墙上添加了一条规则以允许所有入站。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-21T10:14:33.703

您可以为所有站点使用相同的端口 80。这都是关于绑定的。您需要将每个站点绑定到不同的主机名：

```
www.domain.com
site2.domain.com
www.anotherdomain.com 
```

等等

您可以通过在创建站点时指定绑定来做到这一点。然后确保您已将 DNS 记录配置为指向同一 IP。

您还可以为域设置一个包罗万象的 DNS 条目并将其指向服务器的 IP，然后每次创建站点时，您只需选择一个新的子域名即可立即工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-21T10:10:01.373

***主机头是你的朋友***

此链接可能会对您有所帮助。

[http://technet.microsoft.com/en-us/library/cc753195(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc753195(v=ws.10).aspx)

您基本上将在不同的端口上运行您的站点，并告诉 IIS http:// url1 映射到端口 80 上的站点，而 http:// url2 映射到端口 81

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-16T09:36:25.397

TCP端口号，IP地址，主机头这三个用于识别传入的http调用处理，因为前两个现在很常见，所以您只需要使用主机头，这很容易通过命令提示符和用户界面完成IIS。

请在此处阅读[此帖子](http://woshub.com/run-multiple-websites-on-the-same-port-and-ip-address-on-iis/)以逐步了解整个过程

# c# - 根据 item.key 获取字典项的索引

> ID：13489771
> 
> 赞同：15
> 
> 时间：2012-11-21T09:10:07.750
> 
> 标签：c#

如何根据元素键找到字典元素的索引？我正在使用以下代码来浏览字典：

```
foreach (var entry in freq)
{
    var word = entry.Key;
    var wordFreq = entry.Value;
    int termIndex = ??????;
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T09:12:08.127

中没有索引的概念`Dictionary`。您不能依赖`Dictionary`. [`OrderedDictionary`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)可能是另一种选择。

```
var freq = new OrderedDictionary<string, int>();
// ...

foreach (var entry in freq)
{
    var word = entry.Key;
    var wordFreq = entry.Value;
    int termIndex = GetIndex(freq, entry.Key);
}

public int GetIndex(OrderedDictionary<string, object> dictionary, string key) 
{
    for (int index = 0; index < dictionary.Count; index++)
    {
        if (dictionary.Item[index] == dictionary.Item[key]) 
            return index; // We found the item
    }

    return -1;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-31T14:37:26.160

这可能有效，这可能不是最有效的方法。我也不确定你为什么想要这样的东西。

```
Int termIndex = Array.IndexOf(myDictionary.Keys.ToArray(), someKey); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-21T09:41:08.540

无法获取索引，因为数组和字典以完全不同的方式存储在内存中的数据。

当您声明任何类型的数组时，您知道，这些数据将一个接一个地放置在内存单元中。因此，索引是内存地址的移位。

当您将数据放入字典时，您无法预测将用于该项目的地址，因为它将放置在特定的空位置，这将为按键快速搜索提供平衡图。因此，您不能使用索引来操作字典数据。

PS 我相信，您可以使用 Linq 解决您的问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-26T13:25:38.993

有2种扩展方法

按键索引

```
public static int IndexOf<TKey, TValue>(this Dictionary<TKey, TValue> dictionary, TKey key) 
    {
        int i = 0;
        foreach(var pair in dictionary)
        {
            if(pair.Key.Equals(key))
            {
                return i;
            }
            i++;
        }
        return -1;
    } 
```

按值索引

```
public static int IndexOf<TKey, TValue>(this Dictionary<TKey, TValue> dictionary, TValue value) 
    {
        int i = 0;
        foreach(var pair in dictionary)
        {
            if(pair.Value.Equals(value))
            {
                return i;
            }
            i++;
        }
        return -1;
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-10T20:43:10.393

也许这样的事情可以工作：

```
public static int GetIndex(Dictionary<string, object> dictionary, string key) 
{
    for (int index = 0; index < dictionary.Count; index++)
    {
        if(dictionary.Skip(index).First().Key == key)
            return index;
    }

    return -1;
} 
```

基于 Dennis Traub 解决方案，但使用字典...（它是原始添加的排序器）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-21T09:15:06.133

正如丹尼斯所说，字典中没有索引，但在您的示例中，可以这样跟踪 foreach 循环中的位置：

```
int index = -1;
foreach (var entry in freq)
            {

                var word = entry.Key;
                var wordFreq = entry.Value;
                int termIndex = ++index;

            } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-23T11:44:34.923

它很旧，但有人可能会使用它 - 我目前使用

```
public static int OrderedDictIndexOfKey(string key, OrderedDictionary oDict)
{
    int i = 0;
    foreach (DictionaryEntry oDictEntry in oDict)
    {
        if ((string)oDictEntry.Key == key) return i;
        i++;
    }

    return -1;
}

public static object OrderedDictKeyAtIndex(int index, OrderedDictionary oDict)
{
    if (index < oDict.Count && index >= 0)
    {
        return oDict.Cast<DictionaryEntry>().ElementAt(index).Key;
    }
    else
    {
        return null;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-05T13:27:35.770

.NET 哈希表中的字典实现没有定义索引，因为它基于哈希键。我发现这里的答案效率低下且速度慢，因为这些解决方案中的许多都没有保留 O (1) Dictionary 数据结构的时间复杂度。与字典相比，有序字典有一些性能劣势。

唯一一次有效的可能解决方案是在构建字典时添加索引。所以你应该有例如

```
Dictionary<string, Tuple <int, int >> 
```

如果添加新的键值对，您将在元组中添加索引的位置。这个简单的解决方案保留了时间 O (1)，此外您还可以拥有一个带有索引的属性。

# vb6 - 尝试连接框架时出现间隙

> ID：13489773
> 
> 赞同：0
> 
> 时间：2012-11-21T09:10:14.720
> 
> 标签：vb6, grid, frames, clipping

我正在尝试将几个框架连接在一起以实现网格类型排列：

![在此处输入图像描述](../Images/258d7abfd308b9e080a8f01b0b0ea973.png)

在左侧，框架线有一个间隙。我怎样才能让这条线加入下面的框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:49:37.933

正如我对原始帖子的评论中所说，您可以通过仔细选择“带到前面”和“发送到后面”来解决这个问题....但是当您希望框架有一些标题时，这不起作用

在代码中，您可以使用 zorder 执行相同操作：

```
' 1 form with :
'    1 frame : name=Frame1    index=0
Option Explicit

Private Sub Form_Load()
  Dim intIndex As Integer
  Frame1(0).Caption = ""
  For intIndex = 1 To 8
    Load Frame1(intIndex)
    Frame1(intIndex).Visible = True
  Next intIndex
End Sub

Private Sub Form_Resize()
'  PlaceNormal
'  PlaceOverlap 0
  PlaceOverlap 1
End Sub

Private Sub PlaceNormal()
  Dim intRow As Integer, intCol As Integer
  Dim sngWidth As Single, sngHeight As Single
  sngWidth = ScaleWidth / 3
  sngHeight = ScaleHeight / 3
  For intRow = 0 To 2
    For intCol = 0 To 2
      Frame1(intRow * 3 + intCol).Move intCol * sngWidth, intRow * sngHeight, sngWidth, sngHeight
    Next intCol
  Next intRow
End Sub

Private Sub PlaceOverlap(intOrder As Integer)
  Dim intRow As Integer, intCol As Integer
  Dim sngWidth As Single, sngHeight As Single
  sngWidth = ScaleWidth / 3
  sngHeight = ScaleHeight / 3 + 120
  For intRow = 0 To 2
    For intCol = 0 To 2
      Frame1(intRow * 3 + intCol).Move intCol * sngWidth, intRow * (sngHeight - 120), sngWidth, sngHeight
      Frame1(intRow * 3 + intCol).ZOrder intOrder
    Next intCol
  Next intRow
End Sub 
```

但同样：当框架需要有一些标题时，这不起作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:33:17.403

带有标签而不是框架标题的粗略示例

```
' 1 form with :
'    1 frame : name=Frame1    index=0
'    1 label in Frame1 : name=Label1    index=0
Option Explicit

Private Sub Form_Load()
  Dim intIndex As Integer
  Frame1(0).Caption = ""
  Label1(0).Caption = "0"
  Label1(0).Alignment = vbCenter
  For intIndex = 1 To 8
    Load Frame1(intIndex)
    Frame1(intIndex).Visible = True
    Load Label1(intIndex)
    Label1(intIndex).Visible = True
    Label1(intIndex).Caption = CStr(intIndex)
    Set Label1(intIndex).Container = Frame1(intIndex)
  Next intIndex
End Sub

Private Sub Form_Resize()
  PlaceOverlap 1
End Sub

Private Sub PlaceOverlap(intOrder As Integer)
  Dim intIndex As Integer
  Dim intRow As Integer, intCol As Integer
  Dim sngWidth As Single, sngHeight As Single
  sngWidth = ScaleWidth / 3
  sngHeight = ScaleHeight / 3 + 120
  For intRow = 0 To 2
    For intCol = 0 To 2
      intIndex = intRow * 3 + intCol
      With Frame1(intIndex)
        .Move intCol * sngWidth, intRow * (sngHeight - 120) - 120, sngWidth, sngHeight
        Label1(intIndex).Move 120, 120, .Width - 240, 195
        .ZOrder intOrder
      End With 'Frame1(intIndex)
    Next intCol
  Next intRow
End Sub 
```

# mysql - 从 mysql 表列中提取所需的内容

> ID：13489781
> 
> 赞同：0
> 
> 时间：2012-11-21T09:10:36.540
> 
> 标签：mysql, select

我有一张桌子和一列。该列包含如下数据

```
<!--:en-->some content<!--:-->
<!--:zh-->概况<!--:-->
<!--:dr-->some content<!--:-->
<!--:cp-->some content<!--:--> 
```

我只对`<!--:zh--><!--:-->`. 如何使用 mysql 获取此内容`SELECT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:15:20.563

尝试这个：

```
SELECT REPLACE(REPLACE(content, '<!--:zh-->' ,''), '<!--:-->', '') 
FROM tableName  
WHERE content  
LIKE('<!--:zh-->%<!--:-->') 
```

检查此链接[SQL Fiddle Demo](http://sqlfiddle.com/#!2/013d5/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:38:48.323

I have just answered this in your [Question](https://stackoverflow.com/questions/13492411/mysql-select-with-like-clause-is-not-working-chinese-characters)

```
SET @PRE = '<!--:zh-->', @SUF = '<!--:-->';

SELECT
  content,
  SUBSTR( 
    content, 
    LOCATE( @PRE, content ) + LENGTH( @PRE ), 
    LOCATE( @SUF, content, LOCATE( @PRE, content ) ) - LOCATE( @PRE, content ) - LENGTH( @PRE ) 
  ) langcontent
FROM tab
WHERE content LIKE CONCAT( '%', @PRE, '%', @SUF, '%' ); 
```

The desired result is in column langcontent

[SQL Fiddle DEMO](http://sqlfiddle.com/#!2/caf58/17/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:23:18.997

```
SELECT column FROM table WHERE column LIKE "<!--:zh-->%<!--:-->" 
```

并解析结果以丢弃 ,

# java - 使用假日日历

> ID：13489784
> 
> 赞同：1
> 
> 时间：2012-11-21T09:10:49.043
> 
> 标签：java, quartz-scheduler

我在使用 HolidayCalendar 时遇到问题。似乎日历被简单地忽略了。

这是我的代码（主要重复 Quartz 文档中的代码片段）：

```
public class Cron {

    public static void main(String[] args) {

        try {
            Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler();

            Calendar cbegin = Calendar.getInstance(), cend = Calendar.getInstance();
            cbegin.set(Calendar.MONTH, Calendar.NOVEMBER);
            cend.set(Calendar.MONTH, Calendar.NOVEMBER);

            // exclude Nov 23 and Nov 24
            HolidayCalendar cln = new HolidayCalendar();

            cbegin.set(Calendar.DAY_OF_MONTH, 23);
            cln.addExcludedDate(new Date(cbegin.getTimeInMillis()));
            cbegin.set(Calendar.DAY_OF_MONTH, 24);
            cln.addExcludedDate(new Date(cbegin.getTimeInMillis()));

            scheduler.addCalendar("job1", cln, false, false);

            JobDetail job = newJob(HelloJob.class).withIdentity("job1").build();

            // trigger running once a day at 1 AM
            Trigger trigger = newTrigger().withIdentity("trigger10").forJob(job)
                .withSchedule(cronSchedule("0 0 1 * * ?"))
                .modifiedByCalendar("job1")
                .build();

            scheduler.scheduleJob(job, trigger);
            scheduler.start();

            // print fired times from Nov 21 to Nov 30
            cbegin.set(Calendar.DAY_OF_MONTH, 21);
            cend.set(Calendar.DAY_OF_MONTH, 30);

            Date dtnext = new Date(cbegin.getTimeInMillis()), dtend = new Date(cend.getTimeInMillis());
            do { 
                dtnext = trigger.getFireTimeAfter(dtnext); 
                System.out.println("Next... " + dtnext);
            } while(dtnext.before(dtend)); 

            try { Thread.sleep(3600000); } catch(InterruptedException ie) {}

            scheduler.shutdown();

        } catch (Exception se) {
            se.printStackTrace();
        }
    }
} 
```

结果是：

```
 [java] Next... Thu Nov 22 01:00:00 CET 2012
 [java] Next... Fri Nov 23 01:00:00 CET 2012
 [java] Next... Sat Nov 24 01:00:00 CET 2012
 [java] Next... Sun Nov 25 01:00:00 CET 2012
 [java] Next... Mon Nov 26 01:00:00 CET 2012
 [java] Next... Tue Nov 27 01:00:00 CET 2012
 [java] Next... Wed Nov 28 01:00:00 CET 2012
 [java] Next... Thu Nov 29 01:00:00 CET 2012
 [java] Next... Fri Nov 30 01:00:00 CET 2012
 [java] Next... Sat Dec 01 01:00:00 CET 2012 
```

如您所见，11 月 23 日和 11 月 24 日的排除日期仍然排定。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:44:38.443

实际上，该作业不会被执行。

我修改了一个触发器以每分钟启动一次作业，并且它没有在排除的日期执行。但`trigger.getFireTimeAfter`仍会在排除日期返回触发时间。

要解决问题，我需要手动检查触发时间是否包含在日历中。

# java - 在不安装 Eclipse 的情况下运行 RCP 应用程序

> ID：13489785
> 
> 赞同：5
> 
> 时间：2012-11-21T09:10:49.260
> 
> 标签：java, eclipse, eclipse-rcp

我是 RCP 应用程序的新手。是否可以在不安装 Eclipse 的情况下运行 RCP 应用程序。我的意思是我们可以像 java 应用程序（如 Swing 应用程序）那样运行 rcp 应用程序吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T09:14:54.823

Eclipse RCP 应用程序通常包含它需要的 Eclipse 中的所有内容，所以是的，您不需要安装 Eclipse 来运行 Eclipse RCP 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:10:58.357

使用您的 .product 文件并在 Overview 选项卡上，单击“Eclipse Product export wizard”并按照说明进行操作。该向导将生成您的应用程序运行所需的所有内容和一个 .exe 文件。您可以使用此文件来启动您的应用程序！

# unit-testing - 在 Titanium 中设置 Anvil 单元测试框架

> ID：13489789
> 
> 赞同：2
> 
> 时间：2012-11-21T09:11:02.770
> 
> 标签：unit-testing, titanium

谁能帮我在 Titanium Mobile 项目中设置 Anvil 测试框架。我浏览了这个 git hub repo [https://github.com/appcelerator/titanium_mobile/tree/2_1_X/anvil/driver](https://github.com/appcelerator/titanium_mobile/tree/2_1_X/anvil/driver)

我主要担心的是：

1.  如何在我的 Titanium 项目中设置 anvil。在自述文件中，他们只提到了如何使用驱动程序以及它将如何驱动线束，但没有提到我的 Titanium 移动项目将如何使用 anvil 并运行测试用例。

2.  由于harness 是一个应用程序，它包含所有测试用例和套件。通过浏览测试套件，我没有发现这些测试套件如何与我实际的钛移动项目中的功能相关联。我知道要运行我们启动的测试用例并在harness的app.js中启动测试套件，但是这些测试用例将如何服务于我的钛移动项目。

# asp.net-mvc - 从控制器更改 URL？

> ID：13489801
> 
> 赞同：6
> 
> 时间：2012-11-21T09:11:51.427
> 
> 标签：asp.net-mvc, url-routing, url-parameters

有没有办法从控制器更改当前的 url 参数，以便在加载页面时，地址栏中会显示其他/不同的参数？

这就是我的意思，假设我有一个动作“产品”：

```
public ActionResult Product(int productId)
{
  ..
} 
```

我映射了路由，以便`product/4545/purple-sunglasses`映射到上面的函数，产品名称实际上被忽略了，但我想要，如果没有指定产品名称，控制器应该添加这个，所以产品很容易进入搜索引擎等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T09:16:26.277

看看这里： http: [//www.dominicpettifer.co.uk/Blog/34/asp-net-mvc-and-clean-seo-friendly-urls](http://www.dominicpettifer.co.uk/Blog/34/asp-net-mvc-and-clean-seo-friendly-urls)

有一个很长的描述如何做到这一点。最后一部分告诉您有关 301 重定向的信息，您应该使用它来指示搜索引擎爬虫可以在您希望的所需 URL 下找到该页面。

不要忘记查看 url-encoding，应该可以为您节省一些工作并提供更高质量的 url。

以下是博客文章中的一些基本片段：

设置您的路由：

```
routes.MapRoute( 
    "ViewProduct", 
    "products/{id}/{productName}", 
    new { controller = "Product", action = "Detail", id = "", productName = "" } 
); 
```

将名称部分添加到您的控制器并检查它是否是正确的名称：

```
public ActionResult Detail(int id, string productName) 
{ 
    Product product = IProductRepository.Fetch(id); 

    string realTitle = product.Title; // Add encoding here

    if (realTitle != urlTitle) 
    { 
        Response.Status = "301 Moved Permanently"; 
        Response.StatusCode = 301; 
        Response.AddHeader("Location", "/Products/" + product.Id + "/" + realTitle); // Or use the UrlHelper here
        Response.End(); 
    }

    return View(product); 
} 
```

**更新**
网址显然已损坏。本文描述了大部分相同的功能： http: [//www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx](http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx)

感谢 Stu1986C 的评论/新链接！

# iphone - 关于临时对象的 iOS 内存/性能优化

> ID：13489804
> 
> 赞同：0
> 
> 时间：2012-11-21T09:11:57.370
> 
> 标签：iphone, ios, performance, ios5, memory-management

我的代码中有一个运行很多次的方法。我需要我的代码能够运行几个小时，所以这个方法将被执行数百次。

该方法由不大的临时变量组成。关于 ARC 下的内存管理和性能，我想知道以下 4 种方法中哪一种是最好的：

1) Alloc-init 所有临时对象。
2) 改用“方便”初始化程序（即[NSDictionary dictionaryWithObjectsAndKeys:...]）。
3) 将这些临时对象声明为 ivars/properties/global，在 Class +init 方法中对其进行一次初始化，然后在此多次运行的方法中设置它们（无需初始化）。
4) 使用 @autorelease 块限定整个方法。

请解释它们中的每一个对 ARC 项目下的性能和内存管理的影响。

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:13:32.447

如果您要在每个循环结束时将对象清零，然后重新初始化它们，理论上 ARC 应该在此时释放对象。

重新分配给 iVar，应该有效地插入经典的 setter 模式。

```
if (newVal != iVarVal) {
    [iVarVal release];
    iVarVal = [newVal retain];
} 
```

无论哪种方式，您的对象都不应该比它们需要的时间更长，这就是 ARC 的重点。如果您想确定，请设置一个测试项目并使用分配工具在仪器中对其进行分析，然后查看内存使用量是否持续增长，或者趋于平稳，以及在什么时候趋于平稳。

为了代码的清洁，我要么在它们将被使用的范围内（即在循环内）声明变量，要么可能只是在循环外并重新分配值。在重新分配变量之前将其归零是一种很好的做法。

编辑

根据您的评论，这是我认为的最佳实践

```
- (void)exampleMethod {
    id variable = nil;
    for (int i = 0; i < LOOP_LIMIT; i++) {

        // init 
        variable = <alloc/init variable here>

        /* use variable somehow.... */

        // nil variable before reassigning 
        variable = nil;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:09:51.590

关于不同方法的执行时间，我创建了一个示例 iOS 项目，用于测量 4 种不同方法的平均执行时间。

您可以通过[从 github 下载代码](https://github.com/gardenofwine/iOSMethodExecutionTimeTest)并替换`MethodsToTest.m`该类的内容来对其进行测试。

从我所做的测试来看，使用便捷方法的性能比 alloc-init 方法稍好一些（好 0.004 毫秒）。

# core-data - restkit 映射和反向关系

> ID：13489807
> 
> 赞同：2
> 
> 时间：2012-11-21T09:12:07.573
> 
> 标签：core-data, restkit

我对restkit中的关系映射有一个小问题。我的模型中有如下关系：

新闻 < -- >> 标签

在 coredata 中，我将其映射为：

> 新闻：标签 -> 对多，可选
> 
> 标签：新闻 -> 一对一，必填。

现在......我有一个如下的JSON：

```
{
   "news" : {
     "attr1" = "...",
     "tags" = ["tag1, "tag2, ...]
   }
} 
```

我以这种方式设置我的映射（顺便说一句：我的标签实体只有一个属性：值）

```
RKManagedObjectMapping *tagMapping = [[self class] objectMappingForClass:[Tag class] inManagedObjectStore:managedObjectStore];
    [tagMapping mapKeyPath:@"" toAttribute:@"value"];

RKManagedObjectMapping *newsMapping = [[self class] objectMappingForClass:[News class] inManagedObjectStore:managedObjectStore];
....
[newsMapping mapKeyPath:@"Tags" toRelationship:@"tags" withMapping:tagMapping]; 
```

现在...当 RestKit 解析和映射 News JSON 时，它会找到 tags 属性并构建具有正确值的 Tag 实体列表。它还将这个数组/集合链接到新闻中的标签关系。但是...我的 Tag 实体将新闻关系设置为 nil，因此它没有通过 CoreData 验证。如何建立反向关系？我尝试添加以下语句：

```
[tagMapping mapRelationship:@"news" withMapping:newsMapping]; 
```

但我得到了一个例外..

谢谢您的帮助！

# c# - C# 等待和同步 - 我误解了什么吗？

> ID：13489810
> 
> 赞同：2
> 
> 时间：2012-11-21T09:12:13.157
> 
> 标签：c#, windows-store-apps

我已经将一个应用程序从 Android 移植到 Windows Phone 7，并且能够使用同步调用文件 io 等没有很多问题（我使用线程，所以这简化了事情）。

但是，现在我正在移植到 Windows 8 商店应用程序，并且 XxxAsync() 方法在 api 中很猖獗。

我是否应该盲目地使用异步 api 并希望获得最好的结果？

我有各种疑问......例如：

假设用户点击 Save 按钮来保存数据模型。所有的保存都是异步完成的。这意味着用户可以在保存数据模型时继续更改数据模型。如果在中途修改，这不会弄乱数据并损坏他的文件吗？

这如何使开发人员更容易？

我已经阅读了各种异步文章（例如[this](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx#BKMK_WhentoUseAsynchrony)），但我觉得好像我可能遗漏了一些东西......

感谢您的洞察力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:31:40.427

在 UI 中使用异步的想法是所有代码都*在*一个线程（UI 线程）上运行。当用户单击 Save 按钮时，您的处理程序将运行。此时，UI 正忙于运行您的代码，因此 UI 不是交互式的。当您准备好要发送到服务器的数据快照后，您将启动异步保存，并且（从技术上讲）您的处理程序已完成。控制权传递回 UI，它再次变得响应。

此时，用户可以更新数据模型，但操作系统并未查看数据模型。它只是确保将单独的数据缓冲区（您在保存按钮处理程序中创建的快照）发送到服务器。发生这种情况后，您的异步回调将再次执行，在 UI 线程上。根据您使用的版本，您可能需要使用[BeginInvoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.begininvoke%28v=vs.95%29.aspx)手动将该调用转移到 UI 线程。

这与浏览器内的 JavaScript 中使用的模型完全相同。

它并不能完全解决所有同步问题。例如，除非您在上传期间禁用“保存”按钮，否则用户可以在服务器已经接收到第一次保存时再次单击“保存”。但这只是服务器需要担心的一个问题，它更好地能够应对两个同时尝试的保存。

您可能遇到的一个可能问题是您以前版本的应用程序。如果你到处都在使用线程，你是否正确地使用了锁或线程安全的数据结构？您描述的问题肯定存在于自由线程应用程序中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:16:49.240

您应该了解**为什么**以及**何时**使用异步方法，切勿盲目使用它们。当然，这几乎适用于任何编程技术，但在异步情况下尤其重要，因为如果您不知道发生了什么，将来很容易搞砸事情。

**重要的是要了解您提到的异步问题与 async/await 和使用手动线程解决方案没有什么不同。**如果您不使用 async/await（或手动构建的线程），您的 UI 可能会感觉迟缓或受到恼人的锁定。*如果您确实使用它，您必须通过禁用输入控件、缓存正在保存的数据或您拥有的东西来补偿您的 UI不会*锁定的事实。

散布在现代 API 中的异步方法通常不会改变您对异步或多线程代码的看法，只是将这些想法应用于实际代码是多么容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T13:14:30.720

> 我是否应该盲目地使用异步 api 并希望获得最好的结果？

在 Windows Phone 平台上，您确实*必须*使用`async`API，但我建议您不要“盲目地”使用它们。首先了解它们；我的博客上有一个[`async`介绍，可能会有所帮助。](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)

> 假设用户点击 Save 按钮来保存数据模型。所有的保存都是异步完成的。这意味着用户可以在保存数据模型时继续更改数据模型。如果在中途修改，这不会弄乱数据并损坏他的文件吗？

是的。一种常见的做法是在请求未完成时复制数据和/或禁用控件，例如，此代码将在第一次请求保存时复制数据并禁用保存按钮，直到保存完成：

```
public async Task SaveAsync(MyData data) { ... }

// Logically, this is an asynchronous ICommand.Execute implementation.
public async void SaveCommand()
{
  saveInProgress = true;
  dirty = false;
  MyData data = CopyData();
  await SaveAsync(data);
  saveInProgress = false;
}

// Logically, this is an ICommand.CanExecute implementation.
public bool CanSave { get { return !saveInProgress && dirty; } }
private bool saveInProgress, dirty; 
```

使用线程保存时，您面临完全相同的问题。

> 这如何使开发人员更容易？

`async`代码比使用线程的代码更易于维护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T09:19:38.497

你是对的，你必须保护你的数据，但这与使用单独的线程没有什么不同。异步模式让您无需显式使用线程即可创建响应式应用程序，但它不能解决访问共享资源的问题。我喜欢来自 channel9 视频之一的引述：响应能力带来责任。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-29T12:02:03.860

请记住，仅仅因为代码异步执行，并不意味着您必须允许用户在保存数据时继续更改数据。恕我直言，它确实可以提供更好的用户体验，因为您可以决定阻止用户进一步更改数据的方法。

如果您同步保存并且需要很长时间（例如 30 秒），则用户将面临 30 秒的冻结、无响应屏幕。许多用户会认为应用程序已经崩溃。然而，虽然这是一个异步模型，但您可以简单地显示一条消息（和状态栏）告诉用户发生了什么。此外，您可以选择允许他们访问应用程序的其他功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T09:18:53.627

> 我是否应该盲目地使用异步 api 并希望获得最好的结果？

不是，肯定不是。异步内容非常好，可以为用户带来灵活的用户体验，但正如您所言，在异步内容执行时会带来程序功能资产*管理的复杂性。*

对于移动设备（不仅是），基本思想是向用户提供一些`progress`信息，和/或`disable`从`hide`UI 控件（功能访问点）使用这些信息，在特定时刻可能会以某种方式伤害用户。

# playframework-2.0 - 使用 Fakeapplication 进行规格测试失败，无法访问 play.Cache -> 没有应用程序存在

> ID：13489818
> 
> 赞同：4
> 
> 时间：2012-11-21T09:12:34.030
> 
> 标签：playframework-2.0, specs2

我有这样的设置：

```
class PriceAwareSpec extends Specification  {

 sequential

 running(FakeApplication()) {

 val price = "CHF 50.00"
 val priceAsHtml: Html = Html(price)

 val context: Context = ContextAccessUtil.getContext
 val stateAccess = ServiceFactoryUtil.getService(context, classOf[StateAccess])

 "price aware template" should {

   "per default" in {

    stateAccess.store(StateKeys.HIDE_NETTO_KEY, java.lang.Boolean.FALSE)

     "show netto" in {
       val html = views.html.price.priceAware(priceAsHtml, true)(request)
       contentAsString(html) must contain(price)
     }

     "show brutto" in {
       val html = views.html.price.priceAware(priceAsHtml, false)(request)
       contentAsString(html) must contain(price)
     }
   }
 }
} 
```

随着调用

```
ContextAccessUtil.getContext 
```

有一个访问播放缓存的权限

```
play.cache.Cache.get("foo") 
```

它确实尝试从当前应用程序中获取信息（=FakeApplication() ？）

这会导致 NullPointerException：

```
[error]       NullPointerException: null (Cache.scala:-1)
[error] play.api.cache.Cache$.get(Cache.scala:57)
[error] play.api.cache.Cache.get(Cache.scala)
[error] play.cache.Cache.get(Cache.java:16) 
```

这表明没有应用程序存在......？！

我的设置有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:14:55.043

[正如Play 2.0 wiki](http://bit.ly/UpZKGu)中提到的，必须为每个示例创建上下文：

```
"Computer model" should {

  "be retrieved by id" in new WithApplication {
    val Some(macintosh) = Computer.findById(21)

    macintosh.name must equalTo("Macintosh")
    macintosh.introduced must beSome.which(dateIs(_, "1984-01-24"))  
 }

 // or, if you want to be more specific about your configuration
 "be retrieved by id" in new 
    WithApplication(FakeApplication(additionalConfiguration = inMemoryDatabase())) {
    ...
 } 
```

}

这确保每个示例都在`FakeApplication`. 另一方面，您在代码中所做的是围绕*示例的创建，*这`FakeApplication`对它们的执行没有影响。请注意，Play 2.0 的下一个版本应该有[一个更简单的版本](http://bit.ly/Sco9QZ)来满足您的要求：

```
class MySpec extends Specification with ApplicationExample {

  // only override if necessary
  implicit override val app = 
    FakeApplication(additionalConfiguration = Map("foo" -> "bar"))

  "something" should {
    ...
  }

} 
```

# python - Python子进程假脱机太多进程

> ID：13489820
> 
> 赞同：0
> 
> 时间：2012-11-21T09:12:42.003
> 
> 标签：python, postgresql, subprocess

希望有人可以提供帮助，我遇到了一个我似乎无法编写脚本的具有挑战性的情况。我的目标是自动将 SQL 文件加载到 PostgreSQL 中。

我不知道我有多少个 SQL 文件文件夹，所以最初我检查一个文件夹是否存在，然后遍历每个文件并使用 psql.exe 将其加载到 PostgreSQL

我当前的代码看起来像这样

```
if os.path.exists("sql1"):
    for files in os.listdir("sql1"):    
    load1 = subprocess.Popen("psql -d data -U postgres -f sql1\%s" %files)

if os.path.exists("sql2"):
    for files in os.listdir("sql2"):    
    load2 = subprocess.Popen("psql -d data -U postgres -f sql2\%s" %files) 
```

但是，这会假脱机这么多子进程，因为它为文件夹中的每个 SQL 文件创建一个子进程，并为每个文件夹创建更多子进程。

如果我将它更改为 subprocess.call 它当然会序列化加载并阻止从下一个文件夹加载文件，而不是为每个文件夹运行一个进程。

有谁知道我如何为每个存在的文件夹创建一个进程？

除此之外，我将运行索引，但仅在所有进程完成后。

我可以使用 load.wait() 但这仅适用于一个进程。

提前感谢您的建议和帮助

编辑添加：

接受史蒂夫的建议，我引入了一些线程，但它仍然导致索引在子进程完成之前开始

```
def threads(self):
  processors = multiprocessing.cpu_count()
  n = 1
  name = "sql%i" %n
  for i in range(processors):
      if os.path.exists(name):
     thread = Thread(target=self.loadData, args=(name,))
     thread.start()             
     n += 1
     name = "sql%i" %n

 def loadData(self, name):
    for files in os.listdir(name):
    load = subprocess.Popen("psql -d osdata -U postgres -f %s\%s" %(name, files))
    load.wait() 
```

但是索引在进程完成之前就开始了。

任何想法如何防止这种情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:59:30.977

我建议为每个文件夹创建一个线程。然后用于`subprocess.call`在每个线程中序列化调用。

如果您想限制并发执行的线程数，您应该查看 Python 的 futures 模块。

[http://docs.python.org/dev/library/concurrent.futures.html](http://docs.python.org/dev/library/concurrent.futures.html)

```
from concurrent.futures import ThreadPoolExecutor

with ThreadPoolExecutor(max_workers=2) as executor:
    for n in range(processors):
        name = "sql%i" % (n + 1)
        if os.path.exists(name):
            future = executor.submit(loadData, name) 
```

# c++ - Lua 保存全局值

> ID：13489821
> 
> 赞同：0
> 
> 时间：2012-11-21T09:12:47.963
> 
> 标签：c++, lua

我使用 Lua 作为我的游戏引擎逻辑。我的主要游戏循环没有在 Lua 中完成。只有场景层次结构中的特殊节点附加了 Lua 脚本。这些脚本每帧执行一次。我面临的问题是我需要将全局变量值从一帧保存到另一帧。

我的临时解决方案如下所示：

```
finish = useBool("finish", false)
timer = useInt("timer", 0)
showTimer = useBool("showTimer", true)
startTimer = useInt("startTimer", 0)
play0 = useBool("play0", false)
play1 = useBool("play1", false)
play2 = useBool("play2", false)
play3 = useBool("play3", false)
delta = useInt("delta", 0)
gameOverTime = useInt("gameOverTime", 5000)
finishTime = useInt("finishTime", 5000)
checkPoint = useInt("checkPoint", 255)

<...> Game logic <...>

setInt("message", message);
setInt("checkPoint", checkPoint)
setInt("finishTime", finishTime)
setInt("gameOverTime", gameOverTime)
setInt("timer", timer)
setBool("play3", play3)
setBool("play2", play2)
setBool("play1", play1)
setBool("play0", play0)
setInt("startTimer", startTimer)
setBool("showTimer", showTimer)
setInt("timer", timer)
setBool("finish", finish); 
```

我在开始时调用了从 C++ 中的哈希映射中检索全局变量的特殊方法，并在脚本末尾再次设置它们。

有没有办法隐含地做到这一点？

不使用 Lua 作为主要游戏循环是一个糟糕的设计吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:24:16.877

好吧，虽然您的解决方案在技术上没有任何问题，但如果您最终使用大量全局变量（通常应该避免的），您可能会开始注意到一些性能问题。

话虽如此，仍有改进的余地。例如：

在脚本的开头，检查您的全局变量是否为`nil`. 如果是，那么你可以初始化它，如果不是，这可能不是你第一次运行脚本，所以不要修改它。但这意味着很多讨厌的`if-else`陈述，很容易忘记。我们可以做得更好！

我建议您阅读《Lua 编程》一书中的[第 14 章：环境。](http://www.lua.org/pil/14.html)这是介绍中的快速引用：

> Lua 将其所有全局变量保存在一个常规表中，称为环境。...另一个（实际上是主要的）优点是我们可以像操作其他任何表一样操作该表。为了方便这种操作，Lua 将环境本身存储在一个全局变量 _G 中。（是的，_G._G 等于 _G。）

由于`_G`是一个表，它也有一个元表，因此您可以定义元方法来处理对全局变量的访问和创建`__index`。[您可以在第 14.2 节](http://www.lua.org/pil/14.2.html)`__newindex`中找到这方面的示例。去阅读整章吧，它并不长（如果你不熟悉元方法和元表，也可以看看[第 13 章](http://www.lua.org/pil/13.html)——这是 Lua 在灵活性方面真正闪耀的地方）。

既然我们已经介绍了琐碎和普通的方法，让我们来看看光谱的过度杀伤力。作为一个例子，我将看看 Unity 的脚本编写方法。Unity javascript 通常定义变量、函数和类型。任何在方法或类型范围之外定义的变量都会在帧之间持久化，因为脚本本身并不是每帧都执行的。相反，他们让脚本定义函数并在适当的时间调用函数。因此，如果您希望每帧都执行某些操作 - 您可以将其放入`Update`函数中。每个脚本都可以定义自己的`Update`函数，因为它有自己的范围。因此，脚本引擎的每一帧都会遍历所有对象，检查脚本的作用域是否有`Update`方法并调用它。

回到 Lua - 这样的解决方案将涉及为每个对象/脚本/无论您的节点是什么创建单独的环境。然后，您的主循环将遍历所有节点并在其环境中运行一个函数，而不是每帧执行附加到您的节点的脚本。您还可以切换环境，因此您可以在执行之前将全局环境设置为节点的 env，然后在完成后切换回来。这允许您的脚本在他们认为合适的时候使用全局变量，让它们在帧之间保持不变，并排除名称冲突或全局命名空间污染的可能性。此外，您可以使用元方法将节点的环境嵌套在实际的全局环境中或使用辅助方法的 API 环境中（基本上，`__index``parent`）。

# sql - 匹配全部或不匹配的 SQL

> ID：13489825
> 
> 赞同：2
> 
> 时间：2012-11-21T09:13:02.470
> 
> 标签：sql, postgresql, select

我在 PostgreSQL 数据库中有下表：

```
CREATE TABLE maclist (
    username character varying,
    mac macaddr NOT NULL,
    CONSTRAINT maclist_user_mac_key UNIQUE (username, mac)
); 
```

我需要一种方法来检查 MAC 地址是否已分配给用户，或者用户根本没有分配 MAC 地址。基本上我需要一个查询，如果所有条件都为真或没有条件为真，即**不是 XOR b** ，则返回行。

**编辑：** 示例：

```
username | mac
john     | 11:22:33:44:55:66
john     | 11:22:33:44:55:67
doe      | 11:22:33:44:55:68 
```

如果我查询：

```
username = john, mac = 11:22:33:44:55:66                     -> true, 1 whatever...
username = john, mac != 11:22:33:44:55:66                    -> 0, null or nothing...
username = jane, mac = no matter what except john's or doe's -> true, 1 whatever...
username = jane, mac = john's or doe's                       ->  0, null or nothing... 
```

我需要`true`在两个条件下：

1.  该（用户，mac）组合有一行。没有行
2.  对于该用户并且该 mac 没有行

到目前为止，我得到了这个：

```
SELECT yes
FROM
  (SELECT 1 AS yes) AS dummy
LEFT JOIN maclist ON (username = 'user'
                      OR mac = '11:22:33:44:55:66')
WHERE ((username = 'user'
        AND mac = '11:22:33:44:55:66')
       OR (username IS NULL
           AND mac IS NULL); 
```

它可以工作，但在我看来就像一个 hack，而且随着数据库的增长，我也不知道这个查询的性能。我的问题是是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:29:49.097

**编辑：*我稍微修改了逻辑，我认为它符合你想要的***

以下代码将`1`在两种情况下返回...

*   `user`那和那有一排`mac`
*   该用户有行`0`，该用户***有***行`0``mac`

在所有其他条件下，查询返回`0`。

*   有行，`user`但没有一个行`mac`
*   有行，`mac` 但没有一个行`user`

```
SELECT
  CASE WHEN COUNT(*) = 0                                THEN 1
       WHEN SUM(CASE WHEN mac = '11:22:33:44:55:66'
                      AND user = 'user' THEN 1
                                        ELSE 0 END) = 1 THEN 1
                                                        ELSE 0
  END
FROM
  maclist
WHERE
     username = 'user'
  OR mac      = '11:22:33:44:55:66' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:04:30.903

您可以将查询简单地编写为：

```
prepare query_mac(text, macaddr) as
select exists (select 1 from maclist where username = $1 and mac = $2)
       or (not exists (select 1 from maclist where username = $1)
           and not exists (select 1 from maclist where mac = $2)
          ); 
```

PostgreSQL 将分别评估三个查询中的每一个，`(username,mac)`并对前两个使用唯一索引。如果需要，可以`(mac)`为第三个添加索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:39:35.597

实际上，当涉及到时，所有数据库都不会使用索引`OR`，因此请避免连接中的那些。

### 编辑：

看来您确实在进行两个单独的查询：

*   谁是分配给的mac（如果有）
*   分配给用户的 mac（如果有）

所以联合不会像子选择的集合那么容易。使用单独的查询将信息拆分为他们自己的简单查询，并将它们组合成一个：

```
select
    (select username from maclist
     where mac = '11.22:33:44:55:66') as mac_assigned_to,
    (select mac from maclist
     where username = 'user') as user_assigned_to 
```

如果当前没有分配任何内容，则这两列可能都有空值，否则它们将显示为每个关注点分配的内容。

# javascript - 我想从ckeditor动态获取数据到div

> ID：13489827
> 
> 赞同：1
> 
> 时间：2012-11-21T09:13:15.950
> 
> 标签：javascript, jquery, ckeditor

我创建了一个 javascript，它在 div 的单击事件上打开 ckeditor，并将数据从 div 获取到 ckeditor，现在我想要一些可以将更新的数据从 ckeditor 再次返回到该 div 的东西。并且是动态发生的。

我正在使用这个 javascript 从 div 获取数据

```
//var editor, html = '';
function createEditor(ele)
{
var x = ele.innerHTML;

CKEDITOR.instances.editor1.setData(x);

 var y = document.getElementById("editor1").value;
alert(y);
//ele.innerHTML = y;
document.getElementById("editor1").style.display = "block";

}

    </script> 
```

我的 HTML 是

```
 <div onclick="createEditor(this);" id="id2"> hello how r u? </div> 
```

请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:46:40.080

所以我猜你想要 CKEditor 的实时预览？您将无法使用事件执行此操作`keyup`，但您可以使用 CKEditor 事件，如`key`( `instance.on('key', doSomething());`)。

**第 1 步：**向页面添加两个元素：

1.  带有 ID 的文本区域：编辑器
2.  带有 ID 的 div：预览

```
...
<body>
    <textarea id="editor"></textarea>
    <div id="preview"></div>
</body>
... 
```

**第 2 步：**添加 javascript 以检测`key`事件并更新`#preview`：

```
CKEDITOR.replace('editor'); //new ckeditor instance
var editor = CKEDITOR.instances.editor; //reference to instance

//on `key` event
editor.on('key', function(){

  var data = editor.getData(); //reference to ckeditor data
  $('#preview').html(data); //update `div` html

}); 
```

**[我在 JSBin 创建了一个预览](http://jsbin.com/iwunup/4)。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:15:58.610

我认为，在您的 ckeditor textarea 上绑定 onKeyUp 事件应该可以解决问题。 [http://www.w3schools.com/jsref/event_onkeyup.asp](http://www.w3schools.com/jsref/event_onkeyup.asp)

# aggregate - CQRS sagas - 我理解对了吗？

> ID：13489829
> 
> 赞同：19
> 
> 时间：2012-11-21T09:13:32.233
> 
> 标签：aggregate, cqrs, saga

我试图理解**sagas**，同时我对它们有一种特定的思考方式——但我不确定我的想法是否正确。因此，我想详细说明并让其他人告诉我这是对还是错。

在我的理解中，sagas 是解决如何为**长时间运行的流程建模**的问题。长时间运行意味着：涉及多个命令、多个事件以及可能的多个聚合。该过程不在参与聚合之一内建模，以避免它们之间的依赖关系。

基本上，saga 只不过是*对内部和外部命令/事件做出反应的命令/事件处理程序*。它不包含自己的逻辑，它只是一个（有限）状态机，因此提供了诸如**当事件 X 发生时，发送命令 Y**等任务。

Sagas 被持久化到事件存储以及聚合中，与特定聚合实例相关联，因此在使用该特定聚合（或一组聚合）时会重新加载。

这是正确的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T09:52:29.560

有不同的方法来实现 Sagas。从发布命令的无状态事件处理程序一直到携带所有状态并且基本上是域的聚合本身。Udi Dahan 曾经写过一篇关于 Sagas 是（在他的特定情况下）正确建模系统中的唯一聚合的文章。我会查找并更新此答案。

还有基于文档的 sagas 的概念。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-21T09:45:27.443

你对 Sagas 的定义听起来很适合我，我也会这样定义它们。

我对您的描述所做的唯一更改是，saga 只是事件的事件处理程序（不是命令），并且基于接收事件及其内部状态构造一个命令并将其发送到 CommandBus 以执行。

通常一个 Saga 只有一个事件从 (StartByEvent) 开始，多个事件转换 (TransitionByEvent) 到下一个状态，多个事件由 (EndByEvent) 结束。

在[MSDN](http://msdn.microsoft.com/en-us/library/jj591569.aspx)上，他们将 Sagas 定义为 ProcessManager。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-27T00:50:47.920

> saga 一词通常用于 CQRS 的讨论中，指的是在有界上下文和聚合之间协调和路由消息的一段代码。但是，出于本指南的目的，我们更喜欢使用术语流程管理器来指代这种类型的代码工件。这有两个原因： saga 一词有一个众所周知的预先存在的定义，其含义与通常理解的与 CQRS 相关的含义不同。术语流程管理器更好地描述了这种类型的代码工件所执行的角色。尽管术语 saga 经常在 CQRS 模式的上下文中使用，但它有一个预先存在的定义。我们选择在本指南中使用术语流程管理器以避免与此预先存在的定义混淆。传奇这个词，关于分布式系统，最初是在 Hector Garcia-Molina 和 Kenneth Salem 的论文“Sagas”中定义的。本文提出了一种称为 saga 的机制，以替代使用分布式事务来管理长期运行的业务流程。该论文认识到业务流程通常由多个步骤组成，每个步骤都涉及一个事务，并且可以通过将这些单独的事务分组为分布式事务来实现整体一致性。但是，在长时间运行的业务流程中，使用分布式事务可能会影响系统的性能和并发性，因为在分布式事务期间必须持有锁。赫克托·加西亚-莫利纳和肯尼斯·塞勒姆。本文提出了一种称为 saga 的机制，以替代使用分布式事务来管理长期运行的业务流程。该论文认识到业务流程通常由多个步骤组成，每个步骤都涉及一个事务，并且可以通过将这些单独的事务分组为分布式事务来实现整体一致性。但是，在长时间运行的业务流程中，使用分布式事务可能会影响系统的性能和并发性，因为在分布式事务期间必须持有锁。赫克托·加西亚-莫利纳和肯尼斯·塞勒姆。本文提出了一种称为 saga 的机制，以替代使用分布式事务来管理长期运行的业务流程。该论文认识到业务流程通常由多个步骤组成，每个步骤都涉及一个事务，并且可以通过将这些单独的事务分组为分布式事务来实现整体一致性。但是，在长时间运行的业务流程中，使用分布式事务可能会影响系统的性能和并发性，因为在分布式事务期间必须持有锁。该论文认识到业务流程通常由多个步骤组成，每个步骤都涉及一个事务，并且可以通过将这些单独的事务分组为分布式事务来实现整体一致性。但是，在长时间运行的业务流程中，使用分布式事务可能会影响系统的性能和并发性，因为在分布式事务期间必须持有锁。该论文认识到业务流程通常由多个步骤组成，每个步骤都涉及一个事务，并且可以通过将这些单独的事务分组为分布式事务来实现整体一致性。但是，在长时间运行的业务流程中，使用分布式事务可能会影响系统的性能和并发性，因为在分布式事务期间必须持有锁。

参考：http: [//msdn.microsoft.com/en-us/library/jj591569.aspx](http://msdn.microsoft.com/en-us/library/jj591569.aspx)

# python - 将类实例动态添加到 Python 实例 à la __setattr__

> ID：13489831
> 
> 赞同：1
> 
> 时间：2012-11-21T09:13:41.907
> 
> 标签：python, oop

假设我有两个 Python 类，A 和 B。我希望能够执行以下操作：

```
>>> b = B()
>>> b.a.attr1 = 'foo'
>>> b.a.attr2 = 'bar' 
```

`__setattr__`其中 'a' 是 A 的一个实例。如果 'a' 是某种“原始”类型，我将无法使用。除了

```
>>> b = B()
>>> b.a = A()
>>> b.a.attr1 = 'foo'
>>> b.a.attr2 = 'bar' 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:21:31.863

您必须`a`在`__init__`of中创建`B`，使用[`__getattr__`钩子](http://docs.python.org/2/reference/datamodel.html#object.__getattr__)动态创建`a`，或使用[属性](http://docs.python.org/2/library/functions.html#property)。

`__init__`方法：

```
class B(object):
    def __init__(self):
        self.a = A() 
```

`__getattr__`方法：

```
class B(object):
    def __getattr__(self, attr):
        if attr == 'a':
            self.a = A()
            return self.a
        raise AttributeError(attr) 
```

属性方法：

```
class B(object):
    _a = None

    @property
    def a(self):
        if self._a is None:
            self._a = A()
        return self._a 
```

当然，属性和`__getattr__`方法不必*将*`A()`实例存储在上，它可以只从其他地方`self`返回一个预先存在的实例。`A()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:26:55.633

```
class A(object):
    pass

class B(object):
    def __init__(self):
        self.a = A()

b = B()
b.a.attr1 = 'foo'
b.a.attr2 = 'bar' 
```

# c# - 如何在 c# windows 8 Metro App 中从 HostName 获取 IPAddress？

> ID：13489832
> 
> 赞同：6
> 
> 时间：2012-11-21T09:13:40.817
> 
> 标签：c#, windows-8

我正在将 Windows 窗体类库迁移到 Metro App 类库。其中有一个代码块，它从下面的主机名中给出 IPAddress，

```
IPHostEntry ipHostInfo = Dns.GetHostEntry(Address);   
IPAddress ipAddress = ipHostInfo.AddressList[0];// IPAddress.Parse(address);
IPEndPoint endPoint = new IPEndPoint(ipAddress, Port); 
```

例如：

地址 ：`talk.google.com`

IP地址 ：`xx.xxx.xxx.xx`

但我已经看到 Metro App System.Net中没有`IPHostEntry`or 。.`Dns``IPAddress`

如果有人知道方法，请告诉我在 Windows 8 Metro 应用程序中替换这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-17T19:32:51.403

```
using System.Threading.Tasks;

public async static Task<string> ResolveDNS(string remoteHostName)
    {
        if (string.IsNullOrEmpty(remoteHostName))
            return string.Empty;

        string ipAddress = string.Empty;

        try
        {
            IReadOnlyList<EndpointPair> data =
              await DatagramSocket.GetEndpointPairsAsync(new HostName(remoteHostName), "0");

            if (data != null && data.Count > 0)
            {
                foreach (EndpointPair item in data)
                {
                    if (item != null && item.RemoteHostName != null &&
                                  item.RemoteHostName.Type == HostNameType.Ipv4)
                    {
                        return item.RemoteHostName.CanonicalName;
                    }
                }
            }
        }
        catch (Exception ex)
        {
            ipAddress = ex.Message;
        }

        return ipAddress;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:54:40.297

检查[如何在 Metro/WinRT 中将主机名解析为 IP 地址？](https://stackoverflow.com/questions/11216625/how-to-resolve-a-hostname-to-an-ip-address-in-metro-winrt)并将'http'替换为https并尝试。

IE

```
await clientSocket.ConnectAsync(serverHost, "https"); 
```

# python - GPS定位与Python，geopy，匀称

> ID：13489835
> 
> 赞同：3
> 
> 时间：2012-11-21T09:13:51.500
> 
> 标签：python, geolocation, geopy, shapely

我正在尝试处理以下场景：

*   从谷歌地球获取多边形坐标
*   使用 Shapely 获得界限：

    ```
    >>> polygon = Polygon([(53.349459,-6.260159),(53.349366,-6.260126),(53.349383,-6.260012),(53.349478,-6.260053),(53.349459,-6.260159)])   
    >>> polygon.bounds
    (53.349366, -6.260159, 53.349478, -6.260012) 
    ```

    我得到 2 个坐标，它们是我的图形顶部的 2 个边界点。

*   用geopy获取距离

    现在我被困住了......试图弄清楚：

    1.  如何找到其他 2 个边界点（在底部）
    2.  如何检测用户是否从任何一侧靠近（例如 3 米）多边形？（左，右，上，下）。在这种情况下，我不仅需要知道边缘边界点，还需要知道左、右、上和下的所有边界点？我可以计算用户位置和多边形之间的距离，但是从多边形中动态取什么点呢？我可以为此使用现有的库，例如 geopy 和 Shapely 吗？

    ![图片](../Images/e192dd433b10c4d4e965cb694025f556.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:27:45.870

因此，如果我理解正确，您有一堆 Shapely 多边形，并且您想测试任意点是否接近这些形状。对于这个问题，匀称地提供了[距离](http://toblerity.github.com/shapely/manual.html#object.distance)：

```
from shapely.geometry import Point, Polygon
polygon = Polygon([(53.349459,-6.260159),
                   (53.349366,-6.260126),
                   (53.349383,-6.260012),
                   (53.349478,-6.260053),
                   (53.349459,-6.260159)])
testpoint = Point(53.349459,-6.260190)
dist = polygon.distance(testpoint)
print(dist)
>>> 3.09999999999e-05 
```

请注意：距离以弧为单位，而不是以米为单位，因此您必须转换它们。

# html - 重新加载页面时，IE 中的 Sprite 导航菜单呈现不正确

> ID：13489837
> 
> 赞同：0
> 
> 时间：2012-11-21T09:14:23.717
> 
> 标签：html, css, internet-explorer-9

我的网站有问题。我有一个适用于所有浏览器的导航垂直菜单。我进行了设置，以便当您将鼠标悬停在图像上时，它会移动位置以显示悬停图像（如精灵）。但是，在兼容模式下的 IE9 和 IE9 中，当我单击其中一个链接并导航离开页面然后单击返回返回页面时，IE 会将菜单中最后一项的悬停图像精灵作为菜单中的第一张图片。只有当您单击该页面时，它才会自行更正。下面是css。

```
 #nav{
clear:both;
float:left;
width:200px;
margin-right:20px;  
}

    /*.menu li{
height:28px;
overflow:hidden;
margin-bottom:10px;
    }
    .menu a:link{
position:relative;
top:0;
    }
    .menu a:hover{
    top: -28px; 
    }*/

   .menu {
   position:relative;

    margin-left:-10px;
    }
    .menu li{
    /*height:30px; 
    overflow:hidden;
    margin-bottom:10px;*/
    margin:10px;
    padding:0;
    list-style:none;
    top:0;
    }

   .menu li a{
    /*height:60px;*/
    display:block;
    }
   .btnPromodirect a{
     height:28px;
     width:200px;
     background:url('../links/promodirect_button.jpg') 200px 0;
    }
   .btnPromotionmag a{
    height:28px;
    width:200px;
    background:url('../links/promotionmagazine_button.jpg') 200px 0;
     }

    .btnPromota a{
     height:28px;
     width:200px;
      background:url('../links/promota_button.jpg') 200px 0;
     }
   .btnPpib a{
     height:28px;
     width:200px;
     background:url('../links/ppib_buton.jpg') 200px 0;
     }

   .btnPromodirect, .btnPromotionmag, .btnPromota, .btnPpib{
     border: none !important;
     outline: none !important;
    }
   .btnPromodirect a:hover, a:active{

     background:url('../links/promodirect_button.jpg') 0 -28px;
     }

    .btnPromotionmag a:hover, a:active{
     background:url('../links/promotionmagazine_button.jpg') 0 -28px;
    }

    .btnPromota a:hover, a:active{
     background:url('../links/promota_button.jpg') 0 -28px;
    }

    .btnPpib  a:hover, a:active{
    background:url('../links/ppib_buton.jpg') 0 -28px;
     } 
```

下面是html

```
 <div id="nav">

     <ul class="menu">

     <li class="btnPromodirect"><a href="http://www.promodirect.com.au"></a></li>
     <li class="btnPromotionmag"><a href="http://www.promotionmagazine.com.au">       </a></li>
     <li class="btnPromota"><a href="http://www.promota.com.au"></a></li>
     <li class="btnPpib"><a href="http://www.ppib.com.au"></a></li>

     </ul>
     </div>

     </div> 
```

我对此相当陌生，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:47:52.000

无论您在哪里使用背景，例如..

```
background:url('../links/promodirect_button.jpg') 200px 0; 
```

也添加**不重复**...

```
background:url('../links/promodirect_button.jpg') 200px 0 no-repeat; 
```

试试这个，让我知道它是否有帮助......

# - 灵药语言

> ID：13489840
> 
> 赞同：0
> 
> 时间：2012-11-21T09:14:36.997
> 
> 标签：

Elixir 是一种开源、动态、编译的通用函数式编程语言。它被设计为与 Erlang 平台完全兼容，非常适合编写具有软实时保证和热代码交换能力的容错分布式应用程序。

# android - ACRA 错误报告失败

> ID：13489842
> 
> 赞同：2
> 
> 时间：2012-11-21T09:14:38.650
> 
> 标签：android, error-handling, acra

我正在使用著名的 ACRA 错误报告工具将崩溃日志发送到我在 Google Doc 上上传的文档。

我已经按照下面提到的所有步骤

[https://github.com/ACRA/acra/wiki/BasicSetup](https://github.com/ACRA/acra/wiki/BasicSetup)

但是我的应用程序仍然没有向我上传的文档发送错误报告。

我可以看到 ACRA 生成的以下错误日志。

> 01-01 02:11:19.995: E/ACRA(6054): ACRA 捕获了 com.example.arcasample 的 RuntimeException 异常。建设报告。

以下是我认为完美无缺的源代码。

**我的应用程序.java**

```
package com.example.arcasample;

import org.acra.ACRA;
import org.acra.ErrorReporter;
import org.acra.annotation.ReportsCrashes;

import android.app.Application;

@ReportsCrashes(formKey = "XXXX")
public class MyApplication extends Application 
{

    @Override
    public void onCreate()
    {
        // ErrorReporter.getInstance().init(this); This is not helping me
        ACRA.init(this);
        super.onCreate();
    }

} 
```

**MainActivity.java**

```
package com.example.arcasample;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class MainActivity extends Activity 
{

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        int a = 10 / 0; <= This will cause crash.

        Log.i("vipul", "" + a);
    }

} 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.arcasample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:name="MyApplication"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.arcasample.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

如果我遗漏任何东西，有人可以告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:52:53.647

好吧，我尝试删除在 Google 文档上创建的表单并重新创建它。我想知道我以前犯了什么错误？

无论如何，重新创建表单并仔细记下表单键解决了我的问题。

# java - JMS 中的隔离级别

> ID：13489850
> 
> 赞同：1
> 
> 时间：2012-11-21T09:15:20.070
> 
> 标签：java, jakarta-ee, transactions, jms

JMS 队列中是否有任何事务隔离级别可用，如[JDBC](http://download.oracle.com/otndocs/jcp/jdbc-4_1-mrel-spec/index.html)中？

更具体地说，在过渡模式下，当客户端消费一条消息但尚未提交时，下一个客户端是否会消费下一条消息？如果第一个客户端回滚转换，即消息放置在队列中的位置，我认为它将被放置在之前的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:18:51.787

简短的回答：**没有**。

JMS 发送要么是事务性的，要么不是事务性的，这意味着当发送者事务提交或立即（即使客户端稍后发送事务回滚）时，消息是“提交的”（对代理和 MDB 可见）。

JMS 接收也有简单的开/关事务：当消息被 MDB 拾取（非事务性）或 MDB 无异常返回（事务性）时，消息被标记为已接收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:34:51.683

事务隔离是关于数据库表更改的可见性。JMS 消息是不可变的，您发送一次就无法更改。

# algorithm - 2个AVL树的交集和并集算法是什么？

> ID：13489854
> 
> 赞同：3
> 
> 时间：2012-11-21T09:15:32.903
> 
> 标签：algorithm, data-structures, language-agnostic, intersection, avl-tree

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:05:20.880

您可以在线性时间内与任意两个排序列表相交。

*   获取两个 AVL 树的有序（左孩子，然后是父数据，然后是右孩子）迭代器。
*   查看两个迭代器的头部。
    *   如果一个迭代器用完，则返回结果集。
    *   如果两个元素相等或正在计算并集，则将它们的最小值添加到结果集中。
    *   弹出最低（如果迭代器按升序排列）元素。如果两者相等，则同时弹出

这在 O(n1+n2) 中运行并且对于联合操作是最佳的（您受输出大小的限制）。

或者，您可以查看较小树的所有元素，以查看它们是否存在于较大的树中。这在 O(n1 log n2) 中运行。

* * *

这是 Google 在其 BigTable 引擎中使用（或考虑使用）来查找交集的算法：

*   获取所有源的迭代器
*   从 pivot = null 开始
*   依次循环遍历所有 n 个迭代器，直到它们中的任何一个被耗尽。
    *   在此迭代器中找到大于枢轴的最小元素。
    *   如果元素是枢轴
        *   增加枢轴所在的迭代器的计数
        *   如果此枢轴在所有迭代器中，则将枢轴添加到结果集中。
    *   别的
        *   重置枢轴所在的迭代器的计数
        *   使用找到的元素作为新的枢轴。

在二叉树迭代器中查找元素或下一个最大元素：

*   从当前元素开始
*   向上走，直到当前元素大于正在搜索的元素，或者您在根中
*   往下走，直到找到元素，否则你不能向左走
*   如果当前元素小于正在搜索的元素，则返回 null（此迭代器已耗尽）
*   否则返回当前元素

对于完全混合的类似大小的集合，这将衰减到 O(n1+n2)，如果第二棵树更大，则衰减到 O(n1 log n2)。如果一棵树中的子树的范围不与另一棵树/所有其他树中的任何节点相交，则最多访问该子树中的一个元素（其最小值）。这可能是可用的最快算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T20:23:05.007

Here is a paper with efficient algorithms for finding intersections and unions of AVL trees (or other kinds of trees for that matter, and other operations).

[Implementing Sets Efficiently in a Functional Language](http://groups.csail.mit.edu/mac/users/adams/BB/92-10.ps)

I found this paper when I was researching this subject. The algorithms are in Haskell and they are primarily designed for immutable trees, but they will work as well for any kind of tree (though there might be some overhead in some languages). Their performance guarantees are similar to the algorithm presented above.

# java - Java - 调整绘制对象的大小

> ID：13489859
> 
> 赞同：-1
> 
> 时间：2012-11-21T09:16:15.083
> 
> 标签：java, swing, resize, mouse, shape

假设我使用以下代码在屏幕上绘制了一个正方形：

我希望如果用户单击形状，则会在形状上绘制一个带有四个小框（北、南、东和西）的边框。将鼠标悬停在任何小框上会将光标更改为调整大小光标，如果用户将小框拖到新位置，则形状会调整大小。

请问这怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:20:45.277

而不是使用`drawRect()`方法为矩形创建`Shape`对象并绘制`Shape`. 因为`Shape`你可以`getBounds()`用来获取主矩形。使用边界找到小框矩形（也称为形状）。

当鼠标移动（或拖动）时，检查其中一个框形状是否包含鼠标事件坐标。

在拖动时，您可以`Shape`使用`AffineTransfrorm`.

# android - 尝试在关闭的流上读取

> ID：13489866
> 
> 赞同：0
> 
> 时间：2012-11-21T09:16:45.043
> 
> 标签：android, sockets, httpclient, inputstream

当我滚动我的 ListView 并在到达列表中的最后一项时获取新数据时，我得到了这个异常。

这是获取新数据的代码：

```
public static String PostData(String url, String sa[][]) {

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    int n = sa.length;
    for (int i = 0; i < n; i++) {
        nameValuePairs.add(new BasicNameValuePair(sa[i][0], sa[i][1]));
    }
    HttpPost httppost;
    try {
        httppost = new HttpPost(url);
    } catch (Exception e) {
    }
    try {
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    } catch (UnsupportedEncodingException e) {
    }
    HttpResponse response = null;
    try {
        response = client.execute(httppost);
    }catch (Exception e) {
    }
    HttpEntity entity = response.getEntity();
    try {
        is = entity.getContent();
    } catch (Exception e) {
    }
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        sb = new StringBuilder();
        sb.append(reader.readLine());
        String line = "0";
        while ((line = reader.readLine()) != null) {
            sb.append("\n" + line);
        }
        result = sb.toString();
    } catch (Exception e) {
        //I get Exception here saying: Attempted read on closed stream
    }finally{
        try {
            reader.close();
        } catch (Exception e) {
        }
    }
} 
```

我使用的**客户端**是：

```
private static DefaultHttpClient client = getThreadSafeClient(); 
```

的

```
public static DefaultHttpClient getThreadSafeClient() {

    DefaultHttpClient client = new DefaultHttpClient();
    ClientConnectionManager mgr = client.getConnectionManager();
    HttpParams params = client.getParams();
    client = new DefaultHttpClient(new ThreadSafeClientConnManager(params,
            mgr.getSchemeRegistry()), params);
    return client;
} 
```

当我们滚动到 ListView 的底部时，**PostData**方法会获取新的 10 个项目。

问题是，对于前 3-4 卷，这很好用，后来我得到了异常，新添加的 10 个项目来自以前的数据（重复）。

有时我什至得到这个例外：

```
Socket closed 
```

代替

```
Attempted read on closed stream 
```

但我没有使用任何**Sockets**来尝试修复它。

**编辑：**

实际上，我在每个 catch 块中都有登录，它会打印异常。但我没有在问题中添加所有这些日志。上面列出了我在 LogCat 中得到的那些。

我不断在 Logcats 信息中获得这些行：

```
11-21 15:49:57.735: I/System.out(1034): close [socket][/0.0.0.0:36508]
11-21 15:49:57.735: I/System.out(1034): close [socket][/0.0.0.0:36508]
11-21 15:50:02.978: I/System.out(1034): [socket][3] connection /76.74.166.78:80(0)
11-21 15:50:03.010: I/System.out(1034): /76.74.166.78:80(0)
11-21 15:50:03.330: I/System.out(1034): Socket[addr=/0.0.0.0,port=0,localport=33818]
11-21 15:50:03.331: I/System.out(1034): [socket][/192.168.1.6:33818]
11-21 15:50:03.341: I/System.out(1034): setSoSndTimeout:0
11-21 15:50:03.342: I/System.out(1034): setSendBufferSize:8096
11-21 15:50:04.164: I/System.out(1034): close [socket][/0.0.0.0:33818]
11-21 15:50:04.165: I/System.out(1034): close [socket][/0.0.0.0:33818] 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:34:52.050

当你忽略每一个可能的异常时，这种错误是不可避免的。一个方法中间的一个`try/catch`块，在它自动被怀疑之后有更多的代码。尝试正确地捕获、记录和处理异常*，*我的意思是在它们发生后不要继续，就好像它们没有发生一样。

# javascript - 当我点击文本框时如何修复 Iphone 上的小部件？

> ID：13489867
> 
> 赞同：1
> 
> 时间：2012-11-21T09:16:45.520
> 
> 标签：javascript, iphone, jquery-mobile

我正在使用 VS2010 上的 Jquerymobile 和 asp.net 处理 .Net 项目，当我在 Iphone 上测试我的应用程序并单击靠近窗口顶部的文本框时，表单会向下一点，页面的标题也会消失当我使标题不固定时，请使用表格，这仅在Iphone上发生，所以当我单击文本框时如何防止此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:56:46.743

试试`this.element.addClass("ui-fixed-hidden");` 这将禁用要修复的标题

# design-patterns - 工厂设计模式相对于 MVC 的可能优势？

> ID：13489868
> 
> 赞同：0
> 
> 时间：2012-11-21T09:16:46.690
> 
> 标签：design-patterns

我正计划通过某个项目的工厂设计模式。但是，我对它很陌生，只是想知道是否真的值得尝试使用工厂模式而不是 MVC ？与 MVC 相比，使用 Factory DP 有哪些可能的优势？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T09:25:47.337

[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)是一种模型-视图-控制器- 旨在将 UI 与模型分离的高级架构模式。[工厂](http://en.wikipedia.org/wiki/Factory_%28design_pattern%29)是一种低级模式，旨在创建对象。如何比较这些模式？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:26:54.293

这个问题将有助于[何时使用工厂模式？](https://stackoverflow.com/questions/4067271/when-to-use-factory-patterns)
了解工厂模式和 MVC 更好地 [阅读这个](http://www.adobe.com/devnet/actionscript/articles/ora_as3_design_patterns.html)

# objective-c - CoreData 多对多关系（子）查询

> ID：13489874
> 
> 赞同：0
> 
> 时间：2012-11-21T09:17:15.300
> 
> 标签：objective-c, ios, macos, cocoa, core-data

我有一个具有以下结构的模型：

*   文档实体有很多命令
*   命令属于文档

*   文档有很多标签

*   标签有很多文档

这很重要，因为用于此类关系的附加表

Tag 还有一个 type 属性，它是一个整数，是一个枚举。

我试图实现的是向 CoreData 询问属于 Documents 的命令，这些命令与 TagTypeUnwanted 类型的标签没有关系，显然是在单个查询中:)

我尝试使用谓词进行子查询：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(document.tags, $tag, $tag.type == %d).@count == 0", TagTypeUnwanted] 
```

不幸的是，它试图加入管理 Document 和 Tag 之间关系的中间表。所以它导致抱怨它在那里找不到归档的“类型”，因为它只有 Document id 和 Tag id，这不是我所期望的。看起来它适用于除多对多之外的所有其他关系，但在这种情况下它已经丢失了。

```
[NSPredicate predicateWithFormat:@"NOT ANY document.tags.type == %d", TagTypeUnwanted] 
```

这个也不起作用，因为它只在 SQL 中留下 NOT ，并且由于与许多类型的标签的关系，它会在找到的每个 Document 中重新出现。所以它总是会找到至少一个类型不是类型 TagTypeUnwanted 的记录。

如果您喜欢更多信息或生成的 SQL 或任何内容，只需将其写在评论中即可。提前致谢！

* * *

看起来 NOT ANY 和 NONE 都不能在 Core Data 中工作，据我所知，这是自 2007 年以来的一个已知问题，通常你会做子查询来解决这个问题，但在这种情况下，子查询似乎无法处理很多 -对多表

NOT ANY 生成： AND NOT (Tag.type == TagTypeUnwanted) 所以它只接近 SQL 的实际外观

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:57:36.400

这可能不是很有效，但有趣的是以下嵌套的 SUBQUERY 似乎有效：

```
[NSPredicate predicateWithFormat:
    @"SUBQUERY(document, $doc, SUBQUERY($doc.tags, $tag, $tag.type == %d).@count == 0) != NULL",
    TagTypeUnwanted] 
```

# objective-c - 修复UILabel的边框

> ID：13489875
> 
> 赞同：1
> 
> 时间：2012-11-21T09:17:26.523
> 
> 标签：objective-c, ios, xcode, uitableview, uilabel

我正在获取`UILabel`位于 a 内的`UItableViewCell`文本（标签文本来自 webData，因此它的大小会有所不同）。

我想给我的标签一个边框，它应该适合文本的宽度和高度。我已经创建了一个，但看起来不太好。
帮助我改进我的代码。

**还有什么办法可以得到圆角的边框？**

嘿，我在边框内收到这样的文字，而且角落不是那么圆润：

![在此处输入图像描述](../Images/e1de748a2dafc8463ce6868d52802efd.png)

```
UILabel *cmntBoxlbl = [[UILabel alloc]initWithFrame:CGRectMake(58, 23, 250, 60)];
cmntBoxlbl.font=[UIFont fontWithName:@"Arial" size:12];
cmntBoxlbl.layer.borderColor = [UIColor darkGrayColor].CGColor;
cmntBoxlbl.layer.borderWidth = 1.0;
NSString *text = [NSString stringWithFormat:@"%@%@%@",@"  ",[[self.DtlArray objectAtIndex:indexPath.row] objectForKey:@"comment"],@" "];
cmntBoxlbl.text = text;

cmntBoxlbl.textAlignment = UITextAlignmentCenter;
cmntBoxlbl.lineBreakMode = UILineBreakModeWordWrap;
[cmntBoxlbl setTextColor:[UIColor darkGrayColor]];

CGSize expectedLabelSize = [text sizeWithFont:cmntBoxlbl.font
                            constrainedToSize:cmntBoxlbl.frame.size
                                lineBreakMode:UILineBreakModeWordWrap];

CGRect newFrame = cmntBoxlbl.frame;
newFrame.size.height = expectedLabelSize.height;
cmntBoxlbl.frame = newFrame;
cmntBoxlbl.numberOfLines = 0;
[cmntBoxlbl sizeToFit];
[cell addSubview:cmntBoxlbl]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:22:58.547

*还有什么办法可以得到圆角的边框？？*

```
#import <QuartzCore/QuartzCore.h>
label.layer.borderWidth = 3;
label.layer.borderColor = [[UIColor blackColor] CGColor];
label.layer.cornerRadius = 5; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:23:50.650

用于圆角设置。

```
[cmntBoxlbl.layer setCornerRadius:15]; 
```

还要添加`QuartzCore`框架并导入标头：

`#import <QuartzCore/QuartzCore.h>`

# iphone - 在 iOS 设备上运行 PHP 服务器和 MySQL

> ID：13489878
> 
> 赞同：3
> 
> 时间：2012-11-21T09:17:47.530
> 
> 标签：iphone, ios, ipad, apache, web

是否有可能在未越狱的 iOS 设备上运行 PHP 服务器（lighttpd、apache、cherokee 等）和 MySQL 服务器（或 sqlite）？我知道[http://www.becomekodiak.com/](http://www.becomekodiak.com/)他们似乎正在运行一个服务器（或者只是一个解释器？），但没有数据库连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:04:55.680

您可以使用 cocoahttpserver、iPhoneHTTPServer3、SimpleWebSocketServer、MultithreadedHTTPServer3 或 MongooseDaemon 来实现服务器。内容生成由您的代码生成，您可以使用 CoreData 或任何其他移动数据库解决方案来保存和提供数据。

它不是 PHP，但你可以在 Objective C 中实现它。

# php - 运行 _remap() 一次

> ID：13489879
> 
> 赞同：0
> 
> 时间：2012-11-21T09:17:50.460
> 
> 标签：php, codeigniter

当用户登录时，我希望他们能够访问`http://website.com/user`并被带到`http://website.com/1/johndoe`，`1`他们的用户 ID 和`johndoe`用户名在哪里。

我正在尝试使用`_remap()`来捕获所有尝试`http://website.com/user/`，因此即使是不完整的 URI，例如`http://website.com/user/1`或被`http://website.com/user/1/joh`重定向到`http://website.com/user/1/johndoe`.

这是我尝试过的：

```
class User extends CI_Controller {

    function index($uID, $user) {
        echo $uID;
        echo $user;
    }

    function _remap() {
        $uID = 3;
        $user = 'johndoe';
        //redirect('user/'.$uID.'/'.$user); // Updates URI, but redirect loop
        //$this->index($uID, $user); Works, but doesn't update the URI
    }

} 
```

我当然可以先检测该方法，然后执行以下操作：

```
function _remap($method = '') {
    if ($method != 'view') {
        $uID = 3;
        $user = 'johndoe';
        redirect('user/view/'.$uID.'/'.$user);
    }
}

function view($uID, $user) {
    echo $uID;
    echo $user;
} 
```

但后来我认为 URI 看起来像`http://website.com/user/view/1/johndoe`，我宁愿`view`被排除在外。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:44:56.990

如果你有一个`_remap()`方法——它总是会被调用，所以重定向到*用户/任何东西*仍然会`_remap()`在下一个请求上调用，所以你不仅需要捕获路由器方法*及其*参数——如果你想使用，你必须这样做`_remap()`以某种有意义的方式：

```
public function _remap($method, $args)
{
    if ($method === 'user' && (empty($args) OR ! ctype_digit($args[0])))
    {
        // determine and handle the user ID and name here
    }
    else
    {
        return call_user_func_array(array($this, $method), $args));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:42:44.723

我使用的解决方案是：

```
$route['user/(:num)/:any'] = 'user/view/$1';
$route['user/(:num)'] = 'user/view/$1'; 
```

确实，用户名应该只用于 SEO 目的，在这种情况下，不应将其传递给操作。无论如何，当您查找用户时，您当然可以从 UserID 访问用户名，所以我觉得它是多余的。

以上将匹配

```
/user/1/jdoe
/user/1 
```

但只会传递`1`给你的`user/view`行动。

编辑：考虑到您的评论：

```
$route['user/(:num)/(:any)'] = 'user/view/$1/$2';
$route['user/(:num)'] = 'user/view/$1';

function view($UserID, $UserName = null) {
    // Load the model and get the user.
    $this->model->load('user_model');
    $User = $this->user_model->GetByUserID($UserID);
    // If the user does not exist, 404!
    if (empty($User)) {
        show_404();
        return;
    }
    // If the UserName does not exist, or is wrong,
    // redirect to the correct page.
    if($UserName === null || strtolower($User->UserName) != strtolower($UserName)) {
        redirect("user/$UserID/{$User->UserName}");
        return;
    }
} 
```

以上将接受用户名作为参数，但是如果未提供或不正确，它将重定向到正确的 url 并继续。

希望这可以解决您的问题？

# jquery - 加载嵌套图像后查找元素高度的一致方法

> ID：13489883
> 
> 赞同：1
> 
> 时间：2012-11-21T09:17:57.453
> 
> 标签：jquery, image, ready

我有一个`div.body`包含`img`更多元素的其中一个。

我需要获取加载`div.body`后的高度。`img`

我目前正在使用以下方法进行测量：

```
var $body = $("div.body");
$body.find("img").ready(function(){
   var bodyHeight = $body.outerHeight();
}); 
```

这会在 90% 的情况下返回正确的高度，但有时它会返回不包括图像高度的高度。

* * *

例如，如果其他元素的`div.body`总和为`50px`，并且我的图像的高度为`150px`，我需要得到`200px`，但有时这只是返回`50px`。

* * *

为什么是这样？不应该`.ready()`只在图像加载后调用该函数吗？

我应该使用不同的方法吗？

一旦图像可用，运行此代码的 100% 一致方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:19:44.707

`.ready()`加载整个页面的 DOM 时运行。你想要`.load()`。

有关适用于动态添加内容的实现，请参见[此处的讨论部分。](http://api.jquery.com/load-event/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:21:19.193

根据 jQuery 的文档，将加载事件与图像一起使用有许多注意事项。

看看这里：

[加载图像的 jQuery 事件](https://stackoverflow.com/questions/910727/jquery-event-for-images-loaded)

和这里：

[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

# php - 将值从一个表转储到 MySQL 中的另一个表

> ID：13489884
> 
> 赞同：0
> 
> 时间：2012-11-21T09:18:02.693
> 
> 标签：php, mysql, dump

假设我有一个名为 dogs 的表，其中包含以下列：

```
id, fk_hospital, fk_owner, date, name 
```

我想创建另一个包含以下列的表：

```
fk_hospital, fk_owner, fk_dogs, what_type 
```

在第二个表中，fk_dogs 将是第一个表的 id。what_type 默认为 NULL。

所以基本上，我想从第一个表转储到第二个表。第二个表的创建表如下所示：

```
CREATE TABLE dogs_info (
fk_hospital char(4) NOT NULL,
fk_owner char(11) NOT NUL,
fk_dogs int(11) unsigned NOT NULL,
what_type tinyint(1) unsigned DEFAULT NULL,
PRIMARY KEY(fk_hospital, fk_owner, fk_dogs)
) 
```

我如何将内容从第一个转储到第二个？我需要任何服务器语言，比如 PHP 吗？或者我可以直接用mysql做吗？

编辑：我想按块执行此操作，因此首先为特定的 fk_hospital 和 fk_owner 进行转储，然后为下一个 fk_owner 进行转储。这也可以用 MySQL 完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:21:24.153

您可以使用 MySQL：

```
INSERT INTO dogs_info SELECT fk_hospital, fk_owner, id, NULL FROM dogs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:21:11.390

使用`INSERT INTO..SELECT`声明

```
INSERT INTO dogs_info(k_hospital, fk_owner, fk_dogs)
SELECT fk_hospital, fk_owner, ID as fk_dogs
FROM dogs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:22:22.343

你可以试试这个 select 和 while 循环

```
$result = $mysqli->query('select fk_hospital, fk_owner from dogs');
while ($row = $result->fetch_assoc()) {
    $mysqli->query('insert into dogs_info ' .
                   '(fk_hospital, fk_owner, fk_dogs) ' .
                   'select fk_hospital, fk_owner, id ' .
                   'from dogs ' .
                   'where fk_hospital = ' . $row['fk_hospital'] .
                   ' and ' . $row['fk_owner']);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T09:25:45.030

不需要 PHP 。

```
INSERT INTO dogs_info(fk_hospital, fk_owner, fk_dogs)
SELECT fk_hospital,fk_owner,id
FROM dogs 
```

请参阅[插入...选择](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

对于插入块使用`ORDER BY`子句

```
 INSERT INTO dogs_info(fk_hospital, fk_owner, fk_dogs)
    SELECT fk_hospital,fk_owner,id
    FROM dogs
    ORDER BY fk_hospital,fk_owner 
```

请参阅[订购方式](http://www.w3schools.com/php/php_mysql_order_by.asp)

# jquery - 在 IE8 和 IE7 中为透明背景图像设置动画

> ID：13489886
> 
> 赞同：1
> 
> 时间：2012-11-21T09:18:11.310
> 
> 标签：jquery, css, internet-explorer, opacity

我很清楚有很多关于这方面的文章，包括这篇[文章](https://stackoverflow.com/questions/1251416/png-transparency-problems-in-ie8)。

但是，除非我弄错了，否则这里的解决方案是不正确的，因为即使我已经应用了本文以及许多其他建议中的所有建议修复程序，我仍然遇到此问题。

这可能归结为几个关键差异：

1.  我正在为 div 的不透明度设置**动画**
2.  我使用的是**`background-image`**，而不是`img`

可以在此处找到该问题的工作示例：

[http://jsfiddle.net/J88gq/11/](http://jsfiddle.net/J88gq/11/)

有大神知道解决办法吗？或者，是否有人知道我可以阻止 jQuery`filter:alpha(opacity=x)`为任何元素设置动画的方法，因为这反过来又可以解决问题。

非常感谢任何帮助:-)

**请注意：**您不会在 Internet Explorer 9 兼容性视图中看到此错误，您必须在 IE8 或 IE7 中进行测试

# javascript - aJavascript科学计算器输入错误

> ID：13489892
> 
> 赞同：2
> 
> 时间：2012-11-21T09:18:41.683
> 
> 标签：javascript, calculator, trigonometry

使用具有基本正弦和余弦函数的计算器。

jsfiddle 中的代码：http: [//jsfiddle.net/C9VcE/](http://jsfiddle.net/C9VcE/)

出现错误，我只能输入一个字符作为输入。

目前也是 sin 函数

```
function call_func(sin) {
        output=Number (numberone, numbertwo)
        document.getElementById('equation').value =output; 
    } 
```

似乎有问题，直到我按下“清除”，计算器才会改变值。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:35:27.243

您的代码的问题在于 getnumber 函数定义。

请按照以下指定更改代码并尝试一下。

```
function getnumber (number) {
            var val = document.getElementById('equation').value;
            document.getElementById('equation').value = val.toString() + number;

            if(numberone=="") {
                numberone=number;
            /*document.getElementById('equation').value =numbertwo; */
            } else {
                numbertwo=number;
            /*document.getElementById('equation').value =numberone; */
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:35:46.737

我看过你的代码。你需要把这条线

```
document.getElementById('equation').value =document.getElementById('equation').value+number; 
```

但是你需要修剪这个字符串并将其正确转换为数字

# java - 如何在画布上维护二维对象？如何将点击映射到对象？

> ID：13489893
> 
> 赞同：0
> 
> 时间：2012-11-21T09:18:42.053
> 
> 标签：java, data-structures, drawing, 2d

我需要在 Java 的画布上绘制一些 2D 对象（矩形、类似窗口）

主要目标是将 2D 坐标映射到对象，例如识别单击了哪个对象。

**问题：**
保持 2D 对象大小/位置的常用方法是什么。（哪些数据结构等）
应该有一种有效的方式来说明哪个对象位于坐标 x,y

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:13:35.310

通常你会在这里使用“分而治之”的策略：你的视图（矩形）包含对该视图中视图的引用，而不是将所有视图放在一个大数组中。然后从左到右对它们进行排序，您可以应用递归二进制搜索来查找您正在单击的视图。

不知道如何在 Java 中做到这一点，但 C++ 中一个非常简单的类定义是：

```
class MyView {
    std::vector<MyView*> subviews;
    int x;
    int y;
    int width;
    int height;
}; 
```

搜索您单击的视图非常简单快捷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:31:51.753

我一直在寻找 - 是一个 [四叉树](http://en.wikipedia.org/wiki/Quadtree) 对于不太复杂的结构，一个数组会做。

# java - Eclipse 插件：从 bin.includes 中删除库并强制插件在安装期间依赖它

> ID：13489894
> 
> 赞同：0
> 
> 时间：2012-11-21T09:18:44.523
> 
> 标签：java, eclipse, eclipse-plugin

我有一个我的插件所依赖的库。它已添加到插件项目下的 lib 目录中，并添加到 bin.dir 以与插件一起提供。

有没有办法删除它而不是随插件一起提供并强制 eclipse 在安装过程中搜索它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:40:52.123

[`Plug-in from Existing JAR Archives`](http://help.eclipse.org/indigo/topic/org.eclipse.pde.doc.user/guide/tools/project_wizards/plugin_from_archives.htm)首先通过向导为您的库创建一个插件。

将新插件作为依赖项添加到您的插件中。

在配置操作期间，如果没有它的依赖项，您的插件将不会安装。尝试将插件安装到尚未包含库插件的 Eclipse 安装将失败并出现错误。

然而，这在 Eclipse 世界中并不常见。

理想情况下，您应该将这两个插件作为功能的一部分[提供](http://help.eclipse.org/indigo/topic/org.eclipse.pde.doc.user/concepts/feature.htm)。

> Feature 用于将一组插件打包成一个可安装和可更新的单元。

# php - 请求和下载 Bing 广告报告的 PHP 示例不起作用

> ID：13489900
> 
> 赞同：3
> 
> 时间：2012-11-21T09:19:06.153
> 
> 标签：php, ads, bing, sample

我真的坚持这一点，所以任何帮助都会非常有用！

我已下载 PHP 示例以请求和下载 Bing 广告报告：[http](http://code.msdn.microsoft.com/PHP-Sample-that-Shows-How-d817dfe5) ://code.msdn.microsoft.com/PHP-Sample-that-Shows-How-d817dfe5 ，但不适用于我。我已经尝试了很多东西，现在不知道该怎么办。

我正在使用 Ubuntu 并安装了我的 SOAP，似乎请求类不是由 SOAP 生成的，我粘贴接下来会发生什么：

$ php ReportingSample.php 要指定要生成的报告，请输入相应报告的数值。否则，输入先前下载尝试的 ID。

1 - 账户表现报告

2 - 广告效果报告

3 - 活动效果报告

4 - 关键字效果报告

5 - 负 KW 冲突报告

6 - 搜索查询报告

类型（或 99 结束）：4

输入要写入报告的有效文件名。不要包含扩展名。测试

报告将写入 /home/opascual/projects/bing/PHP/PhpReportingSample/ReportingSample/reports/test.zip。

PHP 致命错误：在第 347 行的 /home/opascual/projects/bing/PHP/PhpReportingSample/ReportingSample/ReportingSample.php 中找不到类“KeywordPerformanceReportRequest”

提前致谢！！

奥斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:02:07.407

您需要从 [http://code.msdn.microsoft.com/windowsdesktop/PHP-Production-Classes-for-378b0d25下载 Bing API PHP 生产类](http://code.msdn.microsoft.com/windowsdesktop/PHP-Production-Classes-for-378b0d25)

# javascript - 照片网格 - 多选/突出显示？切换？

> ID：13489901
> 
> 赞同：2
> 
> 时间：2012-11-21T09:19:09.967
> 
> 标签：javascript, jquery, html, css

我有一张照片网格。我需要的是用户能够点击他们想要邀请参加活动的人的照片。第一次单击时，我希望它更改 CSS/样式（例如添加边框或更改透明度），然后在第二次单击时恢复为原始样式。所以我猜是切换。

这样用户就可以点击说三个图像，这三个图像将有一个绿色边框，表明它们已被选中。然后，如果他想取消选择，只需再次单击，它就会恢复为原始样式。

这怎么可能？CSS？Javascript？查询？

到目前为止，我所拥有的只是照片表：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:25:40.210

## HTML

```
<div class="user">john</div>
<div class="user">doe</div>
<div class="user">larry</div>
<div class="user">sergey</div>​ 
```

## CSS

```
.user {border: 1px solid #ededed; cursor: pointer; width: 100px; padding: 10px; margin-bottom: 10px}
.active {border: 1px solid #0066cc; background: #eeeeee;}​ 
```

## jQuery

```
$('.user').on('click', function() {
    $(this).toggleClass('active');
});​ 
```

小提琴 - [http://jsfiddle.net/qgGne/](http://jsfiddle.net/qgGne/)

# c# - C#中指针（字节*）的别名

> ID：13489903
> 
> 赞同：5
> 
> 时间：2012-11-21T09:19:11.730
> 
> 标签：c#, pointers, alias, using

是否可以在不安全的指针类型上创建别名，即我想使用以下：`using bytePtr = System.Byte*`.

.net 开发人员会在未来的版本中引入此功能（指针和数组类型的别名）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:25:45.173

不，不是。

如果*是*，则语法将是：

```
using BytePtr = System.Byte*; 
```

但再说一遍：不，你不能那样做。`using`别名不能指向指针。

此外，`byte*`比`BytePtr`IMO 更短更清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:26:32.943

不，使用别名仅与名称空间和类型名称有关。您不能将其用于“派生”类型。

为了比较，以下内容也不会编译：

```
 using NullDate = System.DateTime?; 
```

错误（在“？”上）只是`';'`预期的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T09:29:58.333

不可能。如果你坚持你可以定义一个包装类或结构并得到非常接近的东西。但是我不推荐这个，因为它似乎没有什么价值。

像这样的东西：

```
unsafe struct BytePtr
{
    public BytePtr(byte *value)
    {
        _value = value;
    }

    private byte* _value;

    public byte* Value
    {
        get { return _value; }
    }
} 
```

# android - 如何获取视频流的时间数据？

> ID：13489909
> 
> 赞同：1
> 
> 时间：2012-11-21T09:19:41.363
> 
> 标签：android, video-streaming, buffering

我学安卓。

使用视频流时如何计算和预测视频缓冲时间。

它会在显示视频流时计算时间。（例如 youtube）

1.  如何捕捉开始和结束流的点。

2.  如何捕获开始和结束缓冲的点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:34:46.967

您可以使用 onBufferingUpdate 捕获缓冲区百分比

```
public void onBufferingUpdate(MediaPlayer arg0, int percent) {
        Log.d(TAG, "onBufferingUpdate percent:" + percent);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:29:07.627

使用`Timer`对象？ [Android Timer](http://developer.android.com/reference/java/util/Timer.html)并使其每 1000 毫秒增加一个对象。

# c - 没有全局变量的 twalk

> ID：13489911
> 
> 赞同：3
> 
> 时间：2012-11-21T09:19:45.003
> 
> 标签：c, binary-tree, tree-traversal

`twalk()`我正在尝试使用with遍历二叉树`<search.h>`

```
 #define _GNU_SOURCE     /* Expose declaration of tdestroy() */
   #include <search.h>
   #include <stdlib.h>
   #include <stdio.h>
   #include <time.h>

   void *root = NULL;

   void *
   xmalloc(unsigned n)
   {
       void *p;
       p = malloc(n);
       if (p)
           return p;
       fprintf(stderr, "insufficient memory\n");
       exit(EXIT_FAILURE);
   }

   int
   compare(const void *pa, const void *pb)
   {
       if (*(int *) pa < *(int *) pb)
           return -1;
       if (*(int *) pa > *(int *) pb)
           return 1;

       return 0;
   }

   void
   action(const void *nodep, const VISIT which, const int depth)
   {
       int *datap;

       switch (which) {
       case preorder:
           break;
       case postorder:
           datap = *(int **) nodep;
           printf("%6d\n", *datap);
           break;
       case endorder:
           break;
       case leaf:
           datap = *(int **) nodep;
           printf("%6d\n", *datap);
           break;
       }
   }

   int
   main(void)
   {
       int i, *ptr;
       void *val;

       srand(time(NULL));
       for (i = 0; i < 12; i++) {
           ptr = (int *) xmalloc(sizeof(int));
           *ptr = rand() & 0xff;
           val = tsearch((void *) ptr, &root, compare);
           if (val == NULL)
               exit(EXIT_FAILURE);
           else if ((*(int **) val) != ptr)
               free(ptr);
       }
       twalk(root, action);
       tdestroy(root, free);
       exit(EXIT_SUCCESS);
   } 
```

如您所见，无法从 action() 传递或返回任何变量。为什么这么密封？我不能使用任何全局，因为程序使用线程，我的问题是：如何在线程安全模式下遍历（并与非全局变量共享 nodep）？原谅我糟糕的英语

**编辑：** 正如 unwind 所说，解决方案是重新发明这个特定的轮子，重新定义 tsearch.c 使用的结构解决了这个问题：

```
/* twalk() fake */

struct node_t
{
    const void *key;
    struct node_t *left;
    struct node_t *right;
    unsigned int red:1;
};

static void tmycallback(const xdata *data, const void *misc)
{
    printf("%s %s\n", (const char *)misc, data->value);
}

static void tmywalk(const struct node_t *root, void (*callback)(const xdata *, const void *), const void *misc)
{
    if (root->left == NULL && root->right == NULL) {
        callback(*(xdata * const *)root, misc);
    } else {
        if (root->left != NULL) tmywalk(root->left, callback, misc);
        callback(*(xdata * const *)root, misc);
        if (root->right != NULL) tmywalk(root->right, callback, misc);
    }
}

/* END twalk() fake */

if (root) tmywalk(root, tmycallback, "Hello walker"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:26:57.607

我想没有人能准确地回答“为什么”，除了那些指定和实现这些功能的人。我猜是“短视”，或者可能是“历史原因”（他们在线程编程成为普遍事物之前就这样做了）。

无论如何，由于这个限制，这个 API 对我来说似乎有点“玩具”，事实上，所有未能包含用户拥有的`void *`API 都只是在 API 和任何回调之间不透明地传递。

所以，我猜的解决方案是重新发明这个特定的轮子，并编写自己的函数来遍历二叉树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:37:49.337

您可以使用[线程局部存储](http://en.wikipedia.org/wiki/Thread-local_storage)来使用全局变量并且仍然是线程安全的。显然，您可以`__thread`为此目的使用关键字。还要检查[Using __thread in c99](https://stackoverflow.com/questions/6869391/using-thread-in-c99)。

# android - 带有 Android SDK 的 Eclipse 无法运行空白项目

> ID：13489915
> 
> 赞同：0
> 
> 时间：2012-11-21T09:19:57.460
> 
> 标签：android, eclipse, sdk, adt

我已经下载了包含[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)的所有内容的 ADT Bundle 。当我创建 Android Applicatio 并且我想运行时，我得到了这样的结果。如何让它运行。

```
[2012-11-21 10:18:00 - Test2] ------------------------------
[2012-11-21 10:18:00 - Test2] Android Launch!
[2012-11-21 10:18:00 - Test2] adb is running normally.
[2012-11-21 10:18:01 - Test2] Performing com.example.test2.MainActivity activity launch
[2012-11-21 10:18:01 - Test2] Automatic Target Mode: launching new emulator with compatible AVD 'Test'
[2012-11-21 10:18:01 - Test2] Launching a new emulator with Virtual Device 'Test'
[2012-11-21 10:18:01 - Emulator] WARNING: Data partition already in use. Changes will not persist!
[2012-11-21 10:18:01 - Emulator] WARNING: Cache partition already in use. Changes will not persist!
[2012-11-21 10:18:01 - Emulator] Failed to allocate memory: 8
[2012-11-21 10:18:01 - Emulator] 
[2012-11-21 10:18:01 - Emulator] This application has requested the Runtime to terminate it in an unusual way.
[2012-11-21 10:18:01 - Emulator] Please contact the application's support team for more information. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T12:35:46.970

在运行您的 android 应用程序时，它将加载到新的模拟器中。我们不能用单个实例运行多个模拟器。Goto->Task Manager->adb(in running processes)->give end task->重启你的eclipse并运行你的模拟器。

数据分区已在使用：此问题基于您的系统 RAM 大小和模拟器内存​​大小（在创建 AVD 时分配内存大小）。如果两个模拟器运行在同一个实例中，就会出现内存错误。

# objective-c - Facebook：当我返回我的应用程序时，登录和权限屏幕不会关闭

> ID：13489924
> 
> 赞同：0
> 
> 时间：2012-11-21T09:20:46.703
> 
> 标签：objective-c, ios, facebook-ios-sdk

我正在我的应用程序中集成 facebook 登录。

当我向用户请求权限时，默认 UI 会呈现给他以接受权限，然后当他单击“确定”时，它将从 ui 返回到我的应用程序以继续。

但是，默认的权限 UI 在浏览器中保持打开状态（如果我退出应用程序并打开浏览器，我仍然会看到之前呈现给他的权限 UI。有没有办法在用户授​​予权限后关闭浏览器中的页面?

希望我很清楚

**这是我正在使用的代码：**

此方法将向用户显示 facebook 登录页面以获得他的许可

```
-(BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_location",
                            @"user_birthday",
                            nil];
    return [FBSession openActiveSessionWithReadPermissions:permissions
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self HandleLogin];
                                     }];
} 
```

然后如果登录和许可成功

```
- (void)HandleLogin {
    if (FBSession.activeSession.isOpen) {

        [FBRequestConnection
         startForMeWithCompletionHandler:^(FBRequestConnection *connection,
                                       id<FBGraphUser> user,
                                       NSError *error) {
             //DO SOMETHING WITH THE USER INFO
         }];
    }
} 
```

处理从 Facebook 应用返回的代码

```
- (BOOL)application:(UIApplication *)application 
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    // attempt to extract a token from the url
   return [FBSession.activeSession handleOpenURL:url]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:15:18.757

Facebook SDK 是相当有问题的，我会说。就个人而言，我不喜欢将 FB 图片共享集成到几个项目中（而他们的开发人员发布了几个新的 SDK）。我不知道，为什么浏览器重定向变得流行，老实说，我不喜欢它。一般来说，我认为在不从应用程序打开新 url 的情况下以某种方式从浏览器中清除这些不需要的内容是不可能的，因为它不是解决方案。我的建议是**强制**FB SDK 使用**WebView**。在我使用的上一个版本中，这是在您创建具有自定义行为的新会话时设置的。代码应该是这样或非常相似：

```
[[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorForcingWebView
                              completionHandler:^(FBSession *session, FBSessionState status, NSError *error)handler] 
```

# python - scipy splrep 的行为

> ID：13489925
> 
> 赞同：3
> 
> 时间：2012-11-21T09:20:47.980
> 
> 标签：python, scipy, splines

我有一组数据点，想用样条函数逼近它们。我使用了两个不同的功能：

1.  *来自scipy*的 splrep
2.  [和我在这里](http://en.literateprograms.org/Cubic_spline_%28Python%29)找到的三次样条函数。

结果看起来像[这样](http://postimage.org/image/9wvq9gzdz/)。

代码如下：

```
from matplotlib.pyplot import *
from numpy import *
from scipy import interpolate
#----------------------------------------------
s = arange(257)/256.0
z = s[::-1]
b = transpose(array((z*z*z,
                 3*z*z*s, 
                 3*z*s*s,
                 s*s*s)))
def cubicspline(c,t): 
return dot(b[t],c)
#----------------------------------------------

A = array([
   [ -126.041   ,  246.867004],
   [ -113.745003,   92.083   ],
   [  208.518997, -183.796997],
   [  278.859009, -190.552994]])

a1 = A[:,0]
a2 = A[:,1] 
cs = reshape(A, (-1, 4, 2))
X = []
Y = []
#spline with cubicspline()
for (x,y) in [cubicspline(c,16*t) for c in cs for t in arange(17)]:
X.append(x)
Y.append(y)

# spline with splrep
tck = interpolate.splrep( a1, a2)

xnew = np.arange( min(a1), max(a1), 5)
ynew = interpolate.splev(xnew, tck)
plot(a1, a2, "--ob", ms = 9,  label = "points")
plot(X, Y, "r", lw=2, label = "cubicspline")
plot(xnew, ynew, "g", lw=2, label = "splrep")
legend(); savefig("image.png"); show() 
```

如您所见，*splrep*的结果远非令人满意。有人可以解释这种行为以及如何从*splrep*获得合理的近似值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:49:46.447

您需要定义“满意”的含义。显然，您的三次样条没有通过点进行插值，而`splrep`结果却是（并且在这个意义上完全令人满意）。另请注意，您的“三次样条曲线”实际上只是一个多项式而不是样条曲线（它们是带有断点的多项式）。

您需要明确告知`splrep`样条曲线不需要通过点 --- 传入非零`s`平滑参数。如何正确选择这个，看到这个问题： [scipy.interpolate.UnivariateSpline not smoothing 不管参数](https://stackoverflow.com/questions/8719754/scipy-interpolate-univariatespline-not-smoothing-regardless-of-parameters?rq=1)

# spring - 使用 JMock 在 Spring 中测试 ModelMap

> ID：13489926
> 
> 赞同：2
> 
> 时间：2012-11-21T09:20:56.837
> 
> 标签：spring, testing, jmock

我是 JMock 的新手，正在尝试开发 Spring 控制器测试。这是我的测试方法：

```
@Test
public void testList() {
    context.checking(new Expectations() {{
        Student student = new Student(767001);
        oneOf(studentService).getByNumber(767001); will(returnValue(student));
    }});    

    ModelMap model = new ModelMap();
    Student student = new Student(767001);
    model.addAttribute("student", student);
    CourseRightController instance = new CourseRightController();
    request.setMethod("GET");

    Assert.assertEquals(studentService.getByNumber(767001),model.get(student)); 
```

问题是我如何能够测试模型是否包含正确的对象和对象值？ModelMap 不如 ModelAndWiew 灵活。我无法访问模型属性，所以这里的最后一行代码不应该是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:34:01.570

您可以使用扩展模型映射来获得更大的灵活性。你应该使用接口而不是实现来声明引用。

spring 3.2 中还包含这个包，这可能会有所帮助：[https ://github.com/SpringSource/spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)

但是，我一直很好用[extendedmodelmap](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/ui/ExtendedModelMap.html)和普通的旧[hashmaps](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/ui/Model.html#asMap%28%29)。

在您的示例中，您是否正确实现了equals（和哈希码），如果您没有覆盖这些方法，assertEquals 将测试对象是否是相同的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:49:42.940

我通常使用`Model`接口，然后在一个测试超类中我有代码，可以让我在模型中得到东西

```
@Ignore
public abstract class SpringControllerTestCase {
    /**
     * Spring Model object - initialised in @Before method.
     */
    private Model model;

    /**
     * Initialise fields before each test case.
     */
    @Before
    public final void setUpAll() {
       model = new ExtendedModelMap();
    }

    public final Model getModel() {
        return model;
    }

    @SuppressWarnings("unchecked")
    public <T> T getModelValue(final String key, final Class<T> clazz) {
        return (T) getModel().asMap().get(key);
    }

} 
```

然后在测试中我可以做

`assertEquals("someValue", getModelValue("bean", String.class));`

或者

`assertTrue(getModelValue("student", Student.class).getId() == "767001");`

请注意，这只是这样的代码的简写

```
Student student = (Student) model.asMap().get("student");
assertEquals(767001, student.getId()); 
```

# asp.net-mvc - MVC3 ajax 更新强类型部分视图中的字段

> ID：13489928
> 
> 赞同：0
> 
> 时间：2012-11-21T09:21:04.217
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我在玩 MVC3 时遇到了一些麻烦。我有一个强类型的局部视图包含一个表单。它嵌入在一个大页面中。我想将此部分视图提交给控制器并更新一些字段。更新后，我希望嵌入在页面中的部分视图被替换为 html 包含新值，因为声明了 UpdateTargetId，但事实并非如此。不知道我能不能做到。任何帮助将不胜感激。
代码为：

```
public ActionResult Employee(Employee em)
{
    var em1 = new Employee
    {
        Id = 1,
        Name = "xing yanguang",
        Code = "131324e12"
    };

    return PartialView(em);
} 
```

部分视图中的代码：

![员工局部视图](../Images/520af2e552e8f10b25e13ed74db327f3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:35:27.490

试试这个修改你的局部视图

```
//In Partial View 

 @model MvcApplication1.Employee

    <table>
        <tr>
            <td>
                @Html.TextBoxFor(m => m.Id)
            </td>
            <td>
                @Html.TextBoxFor(m => m.Name)
            </td>
             <td>
                @Html.TextBoxFor(m => m.Code)
            </td>
        </tr>
    </table>  

Now in your parent view 

// In View.cshtml
    <div id="div_employee">
       @Partail("partailView",Model)
    </div>
       @using (Ajax.BeginForm("Employee", "PO", new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "div_employee", InsertionMode = InsertionMode.Replace }))
       {
           <input type="submit" value="save" />
       } 
```

在控制器中

```
public string Employee(Employee em)
{
    var em1 = new Employee
    {
        Id = 1,
        Name = "xing yanguang",
        Code = "131324e12"
    };

    return RenderPartialViewToString("partailView",em1);
}

protected string RenderPartialViewToString(string viewName, object model)
        {
            if (string.IsNullOrEmpty(viewName))
                viewName = ControllerContext.RouteData.GetRequiredString("action");

            ViewData.Model = model;

            using (StringWriter sw = new StringWriter())
            {
                ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
                ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
                viewResult.View.Render(viewContext, sw);
                return sw.GetStringBuilder().ToString();
            }
        } 
```

在控制器中添加另一种方法来获取部分视图的 RenderHtml，通过将**ParttailViewName**和**模型**传递给 RenderPartialViewToString 方法，它将返回具有更新值的视图 Htmlstring。

# hibernate - Hibernate 将@Table(name) 更改为小写

> ID：13489932
> 
> 赞同：3
> 
> 时间：2012-11-21T09:21:19.647
> 
> 标签：hibernate, jpa

我在 Hibernate 中有一个每个类继承的表。

```
@Entity
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public abstract class A {
}

@Entity
@Table(name="B")
public class B extends A {
}

@Entity
@Table(name="C")
public class C extends A {
} 
```

我只是想验证架构。我已经在 db 中有 B 和 C 表。

我正在使用`<property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>`，但我认为指定 @Table(name) 会覆盖命名策略的行为！

为什么休眠将@Table中指定的名称转换为小写并搜索b和c而不是B和C？怎么能避免呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:06:33.263

如果您使用的是 JPA 2.0，则规范说：

`<delimited-identifiers/>`通过指定对象/关系 xml 映射文件的 persistence-unit-defaults 元素中的元素，可以指定将用于持久性单元的所有数据库标识符视为分隔标识符。如果 `<delimited-identifiers/>`指定了元素，则不能覆盖它。

这个设置应该让 Hibernate 使用你的表的大写名称，因为这是你在注解中指定名称的方式。

# mysql - MYSQL 查询：如何用 ORDER BY 合并两个表

> ID：13489938
> 
> 赞同：1
> 
> 时间：2012-11-21T09:21:34.153
> 
> 标签：mysql

谁能帮我解决这个问题？我一直在尝试查询这个，但我不断收到错误。

**mysql代码：**

```
SELECT * FROM
(

 SELECT BU.*, BD.BOOK_TITLE AS BOOK_TITLE, BD.BOOK_COMPANY AS COMPANY,
     BD.RETURN_DATE AS RETURN 
 FROM BOOK_USER BU
 INNER JOIN BOOKING_DETAIL BD ON (BU.USR_ID = BD.USR_ID)

UNION

 SELECT BU.*, "NEW REGISTERED" AS BOOK TITLE, 'RENT-A-BOOK' AS COMPANY,
     BU.REGISTER_DATE AS RETURN 
 FROM BOOK_USER BU

) AS BU 
GROUP BY BU.USR_ID 
```

**表**：

### BOOK_USER

```
+---------+----------+---------------+
| USR_ID  | USR_NAME | REGISTER_DATE |
+---------+----------+---------------+
| 1       | john     | 2011-09-20    |
+---------+----------+--------------+
| 2       | jane     | 2011-12-05    |
+---------+----------+--------------+
| 3       | doe      | 2012-02-16    |
+---------+----------+--------------+
| 4       | mary      | 2012-02-02  |
+---------+----------+--------------+ 
```

### BOOKING_DETAIL

```
+---------+----------+------------+-----------+--------------+
| BOOK_ID  | USR_ID |  BOOK_TITLE | COMPANY   | RETURN_DATE  |
+----------+--------+-------------+-----------+--------------+
| 1       | 1       | DEAR JOHN   |ABC PVT LMT| 2011-11-01   |
+---------+---------+-------------+-----------+--------------|
| 2       | 1       | LUCKY       |  DEF      | 2012-03-18   |
+---------+---------+-------------+-----------+--------------|
| 3       | 1       | THE RISE    | GHI       | 2012-06-12   |
+---------+---------+-------------+-----------+--------------|
| 4       | 2       | HELLO       |    TIMES  | 2012-01-11   |
+---------+---------+-------------+-----------+--------------|
| 5       | 2       | SHOPAHOLIC  |           | 2012-08-31   |
+---------+---------+-------------+-----------+--------------|
| 6       | 3       | LOST        |           | 2012-06-20   |
+---------+---------+-------------+-----------+--------------| 
```

### 结果应返回**最新**的RETURN_DATE 并按 USR_ID 排序。

例如：

1.  约翰，崛起，GHI，2012-06-12
2.  简，购物狂，出租书，2012-08-31
3.  能源部，丢失，租借一本书，2012-06-20
4.  玛丽, 新注册, 出租书, 2012-02-02

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:24:35.267

该查询包含一个*子查询*，该子查询为每个用户获取*最新信息。* `RETURN_DATE`

```
SELECT  a.*, c.BOOK_TITLE, c.RETURN_DATE
FROM    book_user a
        INNER JOIN
        (
            SELECT usr_ID, MAX(return_DATE) maxDate
            FROM booking_detail
            GROUP BY usr_ID
        ) b ON  a.usr_ID = b.usr_ID
        INNER JOIN booking_detail c
            ON  b.usr_ID = c.usr_ID AND
                b.maxDate = c.return_DATE 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/29087/5)

**更新**

使用`LEFT JOIN`和`COALESCE`

```
SELECT  a.USR_ID,
        a.USR_NAME, 
        COALESCE(c.BOOK_TITLE,'RENT-A-BOOK') BOOK_TITLE, 
        COALESCE(c.RETURN_DATE, a.REGISTER_DATE) RETURN_DATE
FROM    book_user a
        LEFT JOIN
        (
            SELECT usr_ID, MAX(return_DATE) maxDate
            FROM booking_detail
            GROUP BY usr_ID
        ) b ON  a.usr_ID = b.usr_ID
        LEFT JOIN booking_detail c
            ON  b.usr_ID = c.usr_ID AND
                b.maxDate = c.return_DATE 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/5ef70/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:25:32.300

试试看：

```
SELECT *
FROM (
    (
        SELECT BU.*, BD.BOOK_TITLE, BD.BOOK_COMPANY AS COMPANY,BD.RETURN_DATE AS RETURN FROM BOOK_USER BU INNER JOIN BOOKING_DETAIL BD ON (BU.USR_ID = BD.USR_ID)
    ) UNION ALL (
        SELECT BU.*, BD.BOOK_TITLE, 'RENT-A-BOOK' AS COMPANY,BD.RETURN_DATE AS RETURN FROM BOOK_USER BU INNER JOIN BOOKING_DETAIL BD ON (BU.USR_ID = BD.USR_ID)
    )
) BU
GROUP BY BU.USR_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:44:58.490

您可以使用以下查询直接获取输出检查查询：

```
SELECT BU.*, IFNULL(BD.BOOK_TITLE, 'NEW REGISTERED') AS BOOK_TITLE, IFNULL(BD.BOOK_COMPANY, 'RENT-A-BOOK') AS COMPANY,BD.RETURN_DATE AS RETURN 
FROM BOOK_USER BU
LEFT JOIN (SELECT * FROM (SELECT USR_ID, BOOK_TITLE, BOOK_COMPANY, RETURN_DATE FROM BOOKING_DETAIL ORDER BY RETURN_DATE DESC) AS A GROUP BY USR_ID) AS BD ON (BU.USR_ID = BD.USR_ID) 
ORDER BY BU.USR_ID; 
```

# c++ - fscanf 的愚蠢错误 - 逗号而不是点

> ID：13489940
> 
> 赞同：1
> 
> 时间：2012-11-21T09:21:36.660
> 
> 标签：c++, c, scanf

我的一个项目的 C++ 源代码中有一个愚蠢的错误。我在这部分做源 I/O 操作。我有一个愚蠢的错误，我打印 fscanf 读取值。在这部分的下面：首先，我没有读取好的值，当我打印一个浮点值时，我得到一个带有逗号'，'而不是点'的十进制值。在整数部分和浮点部分之间。

```
FILE* file3;
file3=fopen("test.dat","r");
float test1;
fscanf(file3," %f ",&test1);
printf("here %f\n",test1);
float test3 = 1.2345;
printf("here %f\n",test3);
fclose(file3); 
```

其中`test.dat`文件包含“1.1234”，我得到执行：

```
here 1,000000
here 1,234500 
```

所以，我做了一个用 g++ 编译的简单测试 C 程序：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  FILE* file3;
  float test3;
  file3=fopen("test.dat","r");
  fscanf(file3,"%f",&test3);
  printf("here %f\n",test3);
  fclose(file3);
} 
```

它给出了：

```
here 1.123400 
```

这是我第一次遇到这样的错误。任何人都可以看到有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:26:03.843

您的 C++ 语言环境是否以某种方式设置为使用欧洲约定？他们使用逗号，我们使用点和点作为千位分隔符。

查看环境变量的设置

LANG LC_CTYPE LC_ALL

尝试设置 en_GB 或 en_US。确定这是一个语言环境问题后，接下来决定什么行为是有意义的。显示 1224,45 是一个错误吗？用户设置了区域设置是有原因的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:41:37.243

您正在使用为程序环境设置区域设置的代码。在某些语言环境中，例如在法语语言环境中，逗号是小数点分隔符。所以这段代码正在做它的语言环境可能告诉它的事情。

在您的简单代码中，您尚未初始化语言环境支持，因此不会发生这种情况。

假设一个类 Unix 环境，环境变量 LANG 的值是多少，以及各种 LC_* 环境变量？

> 环境 | grep -e ^LANG -e ^LC_

对于一些背景阅读，尝试一些 GNU Libc 手册（语言环境和国际化）

[http://www.gnu.org/software/libc/manual/html_node/Locales.html#Locales](http://www.gnu.org/software/libc/manual/html_node/Locales.html#Locales)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:11:31.187

我的猜测是应用程序正在根据用户偏好设置区域设置，使用`std::locale::global( std::locale( "" ) )`. 这是控制台应用程序*应该* 做的，永远；他们也应该灌输`std::cin`,`std::cout`并 `std::cerr`使用这个语言环境。大多数语言社区使用逗号代替小数点，而不是小数点。（对于恶魔进程，通常更适合使用`"C"`语言环境，或者`"Posix"`Unix 下的语言环境，而不管服务器实际运行在哪里。由于`"C"`语言环境是默认设置，所以对于恶魔和服务器来说，什么都不做通常没问题。）

全局语言环境会影响*所有*C 样式的输入和输出，这也是使用 C++ iostream 的另一个原因。使用 `std::ifstream`，只需在进行第一次输入之前将写入文件的语言环境灌输给流。对于机器生成的文件，`"C"`语言环境是通常的默认值，因此您的代码将变为：

```
std::ifstream file3( "test.dat" );
if ( ! file3.is_open() ) {
    //  error handling...
}
file3.imbue( std::locale( "C" ) );
float test1;
file3 >> test1;
//  ... 
```

对于终端的输出，期望遵循语言环境约定。并设置环境变量以指定您要查看的语言环境。

# r - 带有有序因子的 tapply

> ID：13489941
> 
> 赞同：1
> 
> 时间：2012-11-21T09:21:45.540
> 
> 标签：r, r-factor, tapply

当缺少因子水平时，您可以通过以下方式使用表：

```
marks <- c(1,5,3,4,5,6)
table(ordered(marks,levels=1:6)) 
```

这将返回一个以零频率列出的级别为“2”的表。

如果有一组与“分数”相关联的“分数”并且没有缺失的级别（这里是 2），`tapply`则可以用于生成每个级别的分数总和。

```
tapply(scores,marks,sum) 
```

tapply 可以适应“缺失”因子水平的情况吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:22:38.777

这里的想法是模拟 **表**函数行为。

首先，我生成一个分数向量，分数 <- 样本（1:6）

然后分两步：

1.  tapply 以获取未命中值的 NA 分数。在这里，我使用 sum 函数，如 table 函数，但我们可以使用任何自定义函数（max、min、..）

    ```
     res <- tapply( scores , ordered(marks,levels=1:6),function(x) {sum(x)} ) 
    ```

2.  然后只需替换缺失值

    ```
     res[is.na(res)] <- 0 
    ```

# android - 如何创建可以连接到 SQL Server 并执行 CRUD 操作的应用程序？

> ID：13489945
> 
> 赞同：0
> 
> 时间：2012-11-21T09:21:55.387
> 
> 标签：android, sql-server, web-services

有人可以建议我如何将 SQL Server 与 Android 连接吗？我需要从 Android UI 创建、读取、更新、删除 SQL Server 中的数据。

如果有人向我提供对我有很大帮助的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:42:58.947

您可以将数据库驱动程序添加到您的项目中，并为此添加常规 jdbc 代码。但我想这不是一个好习惯。而是使用带有 JSON 的 SAOP 或 REST Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:24:23.977

使用 JSON 创建一个 RESTFul Web 服务，并在该 Web 服务中实现所有 CRUD 操作。从移动设备直接连接到数据库不是一个好习惯，因为这样您就将后端暴露给外界。

检查实际实施的[链接](http://guruparan.blog.com/2012/03/30/connecting-android-to-sql-server-via-wcf-using-json-part-1/)。[这](http://anindita9.wordpress.com/2012/01/02/consuming-sql-serversql-azure-data-in-windows-phone-7-1-android-through-odata-wcf-data-services-entity-frameworks/)是一个更详细的示例。

# c# - 在线授权 Office 365/Sharepoint

> ID：13489949
> 
> 赞同：45
> 
> 时间：2012-11-21T09:22:09.817
> 
> 标签：c#, sharepoint, authentication, sharepoint-2013

我编写了一个作为（PaaS）托管在 Azure 中的 WCF 服务。该服务又需要与 Sharepoint 2013 Online/Office 365 通信。

我正在考虑使用 Sharepoint Client 对象模型与之交谈，但不断收到以下错误：“远程服务器返回错误：(403) Forbidden” 当我们通过浏览器登录访问 SharePoint 实例时，通常需要您到 [https://login.microsoftonline.com/login.srf](https://login.microsoftonline.com/login.srf)以便您可以使用 Live Id 登录。问题是我们使用的是联合帐户而不是 Live Id，因此再次重定向到 adfs 站点以登录。我在[http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx 查看](http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx)了使用基于声明的身份验证的代码示例，但是在尝试检索 Saml 令牌时，这总是失败并显示“身份验证失败”消息。

如果我理解正确的话。这样做的一种方法是获取 Saml 令牌，将其传递给 SPO，后者将返回两个 cookie，我需要将它们包含在使用客户端对象模型发出的请求中。问题是我没有找到任何关于如何在 C# 中使用联合帐户进行身份验证的适当示例。

谁能指出我正确的方向，关于我如何继续授权我的 WCF 服务与 SharePoint 对话。

对不起，如果这是在错误的论坛。我不确定这是 Azure 问题还是只是 SharePoint，因为我对这两种技术都很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T12:29:44.020

试试下面的博客文章。访问 Office`365 API`的功能上个月刚刚宣布，从您的 Web 服务调用它的功能是相当新的。 [这篇文章](http://blogs.msdn.com/b/kaevans/archive/2014/04/15/calling-o365-apis-from-your-web-api-on-behalf-of-a-user.aspx)是关于这个主题的一个很好的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:44:45.713

您是否尝试过使用 Wictor 的示例代码并将 login.srf URL 替换为您的 ADFS 登录端点？

在您尝试此操作时保持 fiddler 处于打开状态，并每次检查请求/响应，您可能会看到更多详细信息，了解为什么 C# 隐藏在其对象模型中的响应正文中无法正常工作。

也请查看此博客文章，了解如何使用可以创建 SOAP 信封的任何东西从 ADFS 获取身份验证令牌：

[http://leandrob.com/2012/02/request-a-token-from-adfs-using-ws-trust-from-ios-objective-c-iphone-ipad-android-java-node-js-or-任何平台或语言/](http://leandrob.com/2012/02/request-a-token-from-adfs-using-ws-trust-from-ios-objective-c-iphone-ipad-android-java-node-js-or-any-platform-or-language/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T20:28:39.373

在尝试对 SharePoint 对象模型进行类似操作时，我得到了 403。为了纠正它，我所要做的就是包含用户代理。

在这里回答 [使用WebRequest获取cookies自动登录Sharepoint Online，报错](https://stackoverflow.com/questions/10400875/using-webrequest-to-obtain-cookies-to-automatically-log-into-sharepoint-online)

希望它有一些帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T19:45:21.673

我知道这是一篇旧帖子，但通过应用程序使用 SharePoint Online 而不使用应用程序主体可能违反您的许可协议。您应该使用真正的 OAuth 和作为 SDK 一部分的 TokenHelper 类来正确使用应用程序模型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T22:15:59.580

嗨，以防我们几天前注册为 Office365 经销商，我不得不学习一个痛苦的教训：身份验证。您从 sharepoint 获得的令牌仅在 2 小时内有效！也许这会在 Sharepoint 15 中改变，谁知道呢……

我认为这可能是一个有价值的提示，因为没有已知的解决方法......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-07T13:55:38.550

使用 Office 365 SharePoint 网站创建一个环境，您可以在其中使用 ACS 在提供商托管的应用程序和本地 SharePoint 2013 场之间建立信任，就像您为 Office 365 SharePoint 网站开发应用程序一样。您可以访问以下链接进一步了解： http: [//msdn.microsoft.com/en-us/library/office/dn155905 (v=office.15).aspx](http://msdn.microsoft.com/en-us/library/office/dn155905(v=office.15).aspx)

# plugins - 在声纳数据库中创建一个新表

> ID：13489950
> 
> 赞同：2
> 
> 时间：2012-11-21T09:22:15.133
> 
> 标签：plugins, sonarqube

我必须在声纳数据库中创建一个新表来开发我的插件。
是否可以使用 java.lang. 在声纳数据库中创建一个新表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:40:49.073

在开发插件时不应该尝试扩展 Sonar DB，否则在连续迁移到 Sonar 的未来版本时会花费很多。

相反，您应该使用 Sonar API 来实现您想要的。如果你错过了一些功能，那么你可以来 Sonar DEV 邮件列表讨论它。

但是我建议你不要尝试对数据库做一些花哨的事情，那样会花费你将来维护的很多精力。

# c++ - 位反转：为 N 位生成位反转查找表

> ID：13489951
> 
> 赞同：2
> 
> 时间：2012-11-21T09:22:15.103
> 
> 标签：c++, c, algorithm, bit-manipulation

我正在尝试做一些反转，我理解直接的实现，但出于性能目的，我需要通过构建一个查找表并使用该表来查找位反转来反转位，所以我的程序将构建一个查找表对于位大小 N，然后它将使用该表来查找给定位的位反转。

例如，如果 bitSize = 9 且 num = 6 (00000110)

reverse(num,bitSize) 将返回 192，即 11000000

```
int lookup(int num, int bitSize)
{
    return table[bitSize][num]; // == reverse(num,bitSize);
} 
```

我认为查找函数应该是这样的，有人告诉我可以构建表，但我不知道如何构建，有人可以解释如何构建这个表吗？

我只是想澄清一下，我正在寻找一种方法来为给定的 bitSize 构建这个表，而不仅仅是 32 位，否则我会使用这种方法： [http ://graphics.stanford.edu/~seander/bithacks .html#BitReverseTable](http://graphics.stanford.edu/~seander/bithacks.html#BitReverseTable)

感谢您的帮助，

编辑：这两种解决方案都有效，但由于 j_random_hacker 的内存优化，kmkaplan 的解决方案更有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:46:19.870

对于 12 位表：

```
int table[1<<12]; // or 4096
int i;

for (i=0;i<4096;i++) table[i] = my_straight_forward_bitreverse(12,i); 
```

然后你必须解决其他位长度的问题。
要么有一个数组 int table[12][4096]; 大约 90% 无人居住。

或者有

```
int table12[4096], table11[2048], table10[1024] /* , ...*/ ;  
int *table[12]={ table1, table2, /*  ...  */ table12 };

int i, j;
for (j=0;j<12;j++) 
  for (i=0;i<1<<j;i++) table[j][i]=my_straight_forward_bitreverse(j+1,i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:50:04.937

```
#include <stdio.h>
#include <stdlib.h>
int
main(int argc, char **argv)
{
  const int bitSize = atoi(argv[1]);

  printf("static unsigned int table[] = {");
  unsigned int i;
  for (i = 0; i < 1 << bitSize; i++) {
    if ((i & 7) == 0)
      printf("\n");
    unsigned int v = i;
    unsigned int r = 0;
    int s = bitSize;
    while (s--) {
      r <<= 1;
      r |= v & 1;
      v >>= 1;
    }
    printf(" 0x%x,", r);
  }
  printf("\n};\n"
         "unsigned int lookup(int num, int bitSize)\n"
         "{\n"
         "        return table[num] >> (%d - bitSize);\n"
         "}\n",
         bitSize
         );

  return 0;
} 
```

编辑：实现 j_random_hacker 内存优化。

# ruby-on-rails - 耙中止！您已经激活了 rake 10.0.2，但您的 Gemfile 需要 rake 0.9.2.2

> ID：13489953
> 
> 赞同：27
> 
> 时间：2012-11-21T09:22:18.190
> 
> 标签：ruby-on-rails, rake

我正在尝试执行“rake db:migrate”，它给了我这个错误。

```
Andy:AcademyAir Andy$ rake db:migrate
/Users/Andy/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.2.2/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /usr in PATH, mode 040777
rake aborted!
You have already activated rake 10.0.2, but your Gemfile requires rake 0.9.2.2\. Using bundle exec may solve this.
/Users/Andy/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.2.2/lib/bundler/runtime.rb:31:in `block in setup'
/Users/Andy/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.2.2/lib/bundler/runtime.rb:17:in `setup'
/Users/Andy/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.2.2/lib/bundler.rb:116:in `setup'
/Users/Andy/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.2.2/lib/bundler/setup.rb:7:in `<top (required)>'
/Users/Andy/Desktop/AcademyAir/config/boot.rb:6:in `<top (required)>'
/Users/Andy/Desktop/AcademyAir/config/application.rb:1:in `<top (required)>'
/Users/Andy/Desktop/AcademyAir/Rakefile:5:in `<top (required)>'
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-21T09:25:28.297

试试这个`bundle exec rake db:migrate`

**移除 rake 10.0.2 宝石**

通过使用`gem uninstall rake`和删除`10.0.2`rake gem 的版本

然后尝试`rake db:migrate`

**为什么会出现错误**：在您的 gem 中列出了 rake gem install 的两个版本（10.0.2 和 0.9.2.2），以便出现此错误。*

另一个解决方案是你可以做`bundle update`

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-11-26T15:17:35.960

对我来说，我只是跑了`bundle update`，一切都恢复正常了。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-23T19:33:19.110

我能够通过打开 Gemfile 并更改为来解决这个`gem 'rake', '~> 0.9.2.2'`问题`gem 'rake', '~> 10.0.1'`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-27T07:16:17.877

在您的`Gemfile`中，通过以下方式明确设置最新的 rake 版本：

```
gem 'rake', '~> 10.0.1' 
```

然后运行

```
$ bundle update rake 
```

然后尝试

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-22T12:50:18.530

我刚刚遇到了同样的问题。

1.  我插入了我的 gemfilen gem 'rake', '~> 10.0.1' [在你的情况下应该是 '10.0.2']
2.  我删除了我的 gemfile 锁
3.  我再次运行 rake db:migration 并且它起作用了。

我在这里得到了这个提示：[Activated Ruby RAKE 10.0.1, require 10.0.0](https://stackoverflow.com/questions/13400587/activated-ruby-rake-10-0-1-require-10-0-0)

**更新：**就我而言，我没有重复 rake。我的宝石中只有 10.0.1 版本。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-13T18:39:31.623

通过运行解决了同样的问题：

```
bundle update 
```

这会将您的 rake gem 更新到最新版本并允许您运行迁移。

如果您使用的是 gemset：请确保`bundle install`在更新 rake 以更新本地 gemset 之后运行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-18T16:16:30.243

发生这种情况是因为您正在使用系统中的**rake**。（默认为最新版本）解决方案是使用以下命令：

```
bundle exec rake db:migrate 
```

此外，您可以创建别名。因为这个命令太大，很难写。

```
echo "alias be='bundle exec'" >> ~/.bash_profile
source ~/.bash_profile 
```

然后你可以使用以下短命令：

```
be rake db:migrate 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-04T09:29:24.320

将 gemfile 和 gemlock 中的版本更改为控制台中显示的版本号，它将完成

# xcode - 在主项目中按下按钮时自动启动应用程序 - Xcode

> ID：13489955
> 
> 赞同：0
> 
> 时间：2012-11-21T09:22:26.850
> 
> 标签：xcode, macos, action, automator

我正在 Xcode 中开发一个应用程序，我希望如果我在主视图中按下一个按钮，它将启动一个自动操作。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:44:30.153

从可可应用程序启动自动化工作流程可以通过以下方式完成：

```
task = [[NSTask alloc] init];
[task setLaunchPath:@"/usr/bin/automator"];
NSArray *arguments;
arguments = [NSArray arrayWithObjects:@"/path/to/your/workflow", nil];
[task setArguments:arguments];    
[task launch]; 
```

# c++ - 调用 boost io_service.post 的正确方法

> ID：13489958
> 
> 赞同：3
> 
> 时间：2012-11-21T09:22:42.273
> 
> 标签：c++, multithreading, boost, boost-asio, stdstring

我有以下功能：

```
void MyLib::sendMessage(const std::string& message) {
  m_xIOService.post( boost::bind(&VoIPPhone::onSendMessage, this, message) );
}

void MyLib::onSendMessage(const std::string& message) {
  m_xVoIPClient.sendMessage(message);
} 
```

所以我在一个线程中调用 sendMessage，onSendMessage 将在主线程中调用。

问题是在这种情况下是否将是由 boost 复制的消息字符串。如果不是 - 我如何将字符串传递给 onSendMessage 函数并确保不会发生内存泄漏并且消息字符串是有效的，而不是删除的对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:46:18.310

`onSendMessage`将在执行的线程之一中调用`m_xIOService::run`- 而不是在主线程中。

所有`bind`参数都被复制，因此`message`也将被复制。每当您想`bind`通过引用传递参数时，请使用`boost::ref`包装器。

# java - 小程序。加载本机 .dll 时出现 UnsatisfiedLinkError

> ID：13489961
> 
> 赞同：0
> 
> 时间：2012-11-21T09:22:53.530
> 
> 标签：java, applet, jnlp, unsatisfiedlinkerror

我有一个带有`.jnlp`文件的小程序，我想`.dll`在小程序内使用本机。所以我`.dll`在根目录`.jar`和 jnlp-file 文件中插入了 native 我添加了这一行：

```
<nativelib href="MILIB0.1-SNAPSHOT.jar" main="true"/> 
```

在我对程序进行更改（我重构了程序）之前，这工作得很好。但现在没有了。什么会导致此崩溃？在哪里寻找问题？

这个问题可以与证书有关吗？我对它们有问题，但其他受限操作可以正常工作（例如在本地文件系统上保存文件）。

错误文字：

```
java.lang.UnsatisfiedLinkError: Unable to load library 'mydlllib' 
```

# c# - 将匿名类型列出到接口列表

> ID：13489965
> 
> 赞同：3
> 
> 时间：2012-11-21T09:23:17.017
> 
> 标签：c#, .net

> **可能重复：**
> [在 .NET 4.0 (C#) 中动态实现接口](https://stackoverflow.com/questions/2974736/dynamically-implementing-an-interface-in-net-4-0-c)
> [将匿名类型转换为接口？](https://stackoverflow.com/questions/9249645/cast-anonymous-type-to-an-interface)

有没有办法将匿名类型“转换”到特定接口？我知道我可以创建一个实现这个接口的类，但我不需要这个类，我必须返回一个接口。

我需要一个没有第三方库的解决方案

谢谢，

```
var result =
    (from a in context.TABLE1
     join b in context.TABLE2 on a.Table2Id equals b.Id
     select new
     {
         Table1Field1 = a.Field1,
         Table2Field1 = b.Field1,
         ....
     }).ToList<IMyClass>();

public interface IMyClass
{
    string Table1Field1 { get; set; }
    string Table1Field2 { get; set; }
    string Table2Field1 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T09:26:01.317

这是不可能的。为什么？因为匿名类型是一种语法糖。匿名类型是一种设计时特性，这意味着编译器将生成一个名称非常奇怪的实际类型，但毕竟它与任何其他类型一样。

遗憾的是，C# 没有接口自动实现。也就是说，您需要以*命名*类型实现接口。

**更新**

想要解决此限制？

您可以使用控制反转（使用 Castle Windsor 之类的 API 或仅*手动*）。

检查我刚刚制作的这个示例代码：

```
public static class AnonymousExtensions
{
    public static T To<T>(this object anon)
    {
        // #1 Obtain the type implementing the whole interface
        Type implementation = Assembly.GetExecutingAssembly()
                                .GetTypes()
                                .SingleOrDefault(t => t.GetInterfaces().Contains(typeof(T)));

        // #2 Once you've the implementation type, you create an instance of it
        object implementationInstance = Activator.CreateInstance(implementation, false);

        // #3 Now's time to set the implementation properties based on
        // the anonyous type instance property values!
        foreach(PropertyInfo property in anon.GetType().GetProperties(BindingFlags.Instance | BindingFlags.Public))
        {
            // Has the implementation this anonymous type property?
            if(implementation.GetProperty(property.Name) != null)
            {
                // Setting the implementation instance property with the anonymous
                // type instance property's value!
                implementation.GetProperty(property.Name).SetValue(implementationInstance, property.GetValue(anon, null));
            }
        }

        return (T)implementationInstance;
    }
} 
```

设计和实现一些接口...

```
// Some interface
public interface IHasText
{
    string Text { get; set; }
}

// An implementation for the interface
public class HasText : IHasText
{
    public string Text
    {
        get;
        set;
    }
} 
```

现在在某处使用整个扩展方法！

```
var anonymous = new { Text = "Hello world!" };
IHasText hasTextImplementation = anonymous.To<IHasText>(); 
```

`hasTextImplementation`会有一个`HasText`实现实例！或者换句话说：`Text`属性将包含**Hello world！**.

请注意，可以调整此代码以支持基类和抽象类，但我相信这足以获取基本信息以根据需要改进它。

# android - 在模拟器中测试是可以的，但它不能在手机上

> ID：13489967
> 
> 赞同：0
> 
> 时间：2012-11-21T09:23:30.357
> 
> 标签：android, emulation

我在模拟器中测试它可以正常运行。但是我在手机上测试，总是抛出异常。

```
 public static String doGet(String url) {
    try {
      HttpGet method = new HttpGet(url); 
      DefaultHttpClient client = new DefaultHttpClient();
 //     HttpHost proxy = new HttpHost("10.0.0.172", 80);  The two sentence added on the phone, it still can not run
   //   client.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
      method.setHeader("Connection", "Keep-Alive");
      HttpResponse response = client.execute(method);
      int status = response.getStatusLine().getStatusCode();
      if (status != HttpStatus.SC_OK)
        throw new Exception("");
      return EntityUtils.toString(response.getEntity(), "UTF-8");
    } catch (Exception e) {
      return "Connection errors！";
    }
  } 
```

我在创建项目时检查 API4。并在模拟器 android 1.6 中测试。测试手机是android 2.3.3。我还在计算机 android-x86 2.2 jar 中进行了测试。那没问题。我加`<uses-permission android:name="android.permission.INTERNET"/>`进去`AndroidManifest.xml`。我不知道原因。任何人的意见都是感谢的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:33:28.363

你把这个函数叫做什么线程？您无法在 UI 线程中创建连接

# php - if - else php 查询

> ID：13489968
> 
> 赞同：0
> 
> 时间：2012-11-21T09:23:34.897
> 
> 标签：php, navigation, if-statement

我需要一个代码来提取产品的列表计数，以便将它们放在导航中。我正在尝试在导航中获取产品和列表编号（如果有），但如果列表计数等于 0，我不想显示某些内容。

下面是我的代码：

```
<?php if($listingsCount = getListingsCount(0,0,2,2,1,86) > 0): ?>
<a href="">Bakery</a>
<?php echo $listingsCount['totalRecords'] ?>.
<?php else: ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:26:59.133

它应该是

```
if ( ($listingsCount = getListingsCount(0,0,2,2,1,86)) > 0) 
```

在这种情况下，您首先完成分配，然后将其与`0`. 所以`$listingCount`包含真正的计数。

按照您的操作方式，首先进行比较，然后将返回值 ( `true/false`) 分配给`$listingCount`.

尽管如此。如果您从未达到`else`-part，则您的方法中的某些内容可能`getListingsCount()`已损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:35:43.523

尝试这个：

```
<?php if (($listingsCount = getListingsCount(0,0,2,2,1,86)) > 0) { ?>
<a href="">Bakery</a>
<?php echo $listingsCount['totalRecords']; ?>
<?php } else { ?>
Other text
<?php }?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:40:18.650

谢谢你们的回答。设法让它与这个一起工作......

```
<?php 
$listingsCount = getListingsCount(0,0,2,2,1,86);
if($listingsCount['totalRecords'] > 0): 
?>
<dd>
<a href="">Bakery</a>
[<?php echo $listingsCount['totalRecords'] ?>]
</dd>
<?php endif; ?> 
```

# android - 如何在android中创建更多edittext字段？

> ID：13489981
> 
> 赞同：-1
> 
> 时间：2012-11-21T09:24:12.573
> 
> 标签：android

我正在研究android项目。我需要创建一些如下图所示的字段。

这里我只显示 4 列，但我有 8 到 10 列。在一种方式中，我可以动态生成编辑文本。如何在 android 屏幕中创建这些字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:31:16.513

您可以使用 4 个 EditTexts 作为表的行来制作 ListView。ListView 将自动生成行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:49:12.493

您好，您可以使用 TableLayout、TextView 和 EditText，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableLayout android:layout_width="match_parent"
    android:layout_height="match_parent"

   >
        <TableRow android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:layout_weight="1">
            <TextView android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"/>            
            <TextView android:layout_width="match_parent"
    android:layout_height="match_parent"
     android:text="Location"
      android:layout_weight="1"/>
            <TextView android:layout_width="match_parent"
    android:layout_height="match_parent"
     android:text="Name"
      android:layout_weight="1"/>
            <TextView android:layout_width="match_parent"
    android:layout_height="match_parent"
     android:text="Age"
      android:layout_weight="1"/>
            <TextView android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Gender"
     android:layout_weight="1"/>
        </TableRow>
         <TableRow android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1" >
             <TextView android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="1"
    android:layout_weight="1"/>            
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

     android:layout_weight="1"/>
         </TableRow>
           <TableRow android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
             <TextView android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="2"
    android:layout_weight="1"/>            
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

     android:layout_weight="1"/>
         </TableRow>
          <TableRow android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
             <TextView android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="3"
    android:layout_weight="1"/>            
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

     android:layout_weight="1"/>
         </TableRow>
          <TableRow android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
             <TextView android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="4"
    android:layout_weight="1"/>            
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

     android:layout_weight="1"/>
         </TableRow>
          <TableRow android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
             <TextView android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="5"
    android:layout_weight="1"/>            
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

      android:layout_weight="1"/>
            <EditText android:layout_width="match_parent"
    android:layout_height="match_parent"

     android:layout_weight="1"/>
         </TableRow>
    </TableLayout>

</LinearLayout> 
```

# spring - 上下文：财产持有人与。PropertyPlaceholderConfigurer

> ID：13489985
> 
> 赞同：0
> 
> 时间：2012-11-21T09:24:18.640
> 
> 标签：spring

在以下 2 种情况下如何使用 @Value？

**案例 1：**我有一个 PropertyPlaceholderConfigurer bean，定义如下

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <value>file:#{ systemProperties['user.home']}/myconf/settings.properties</value>
    </property>
</bean> 
```

**案例2：**我没有定义bean，但是我在上下文中声明了property-place holder，如下所示

```
<context:property-placeholder 
     location="file:#{ systemProperties['user.home']}/myconf/settings.properties"  /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:29:09.613

在这两种情况下，您都会使用 like

```
@Value(value="${key.in.file}")
private String myVar; 
```

# c# - 变量“集群”在c#中计算阶乘

> ID：13489986
> 
> 赞同：1
> 
> 时间：2012-11-21T09:24:19.063
> 
> 标签：c#, .net, variables, cluster-computing, factorial

试图计算一个大数的**阶乘，例如****1000！**

```
static void Main(string[] args)
        {
            UInt64 fact = 1;

            for (UInt64 i = 1000; i > 0; i--)
            {
                fact = fact * i;
            }
            Console.WriteLine(fact); //returns 0, due to overflow UInt64, max fact is 56!

            Console.ReadKey();
        } 
```

所以我问，是否有某种方法可以**将更多变量加入集群**，这样我就可以制作非常大的变量来存储“大”数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T09:26:33.123

您可以使用[`BigInteger`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx). 这种类型可以存储任意大小的整数，直到内存不足。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:26:51.710

在 .NET 4 [BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)将做你想做的事。

[C# 中的大整数](https://stackoverflow.com/questions/176775/big-integers-in-c-sharp)也可能更有趣，因为它是一个非常相似的问题（嗯，更相似的答案）。

# java - 数据获取后的MongoDB排序

> ID：13489988
> 
> 赞同：0
> 
> 时间：2012-11-21T09:24:28.843
> 
> 标签：java, mongodb, sorting

在 java 驱动程序中，我从集合中获取记录到 DBCursor 中，然后在 cursor 时迭代它们`hasNext()`。

我需要根据获取的数据中的字段计算一个值，然后返回根据我计算的新值排序的数据。知道如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:40:13.633

使用我在 Remon van Vliet 建议使用 Comparator 解决我的问题后找到的本指南：

[在 Java 中使用 Collections.sort 和 Comparator](http://www.vogella.com/blog/2009/08/04/collections-sort-java/)

# jmeter - CLI 模式下的 JMeter 参数传递不适用于 -r（远程）开关

> ID：13489992
> 
> 赞同：2
> 
> 时间：2012-11-21T09:24:42.557
> 
> 标签：jmeter

我试图在 CLI 模式下将线程计数参数传递给 JMeter。当脚本在本地运行时，这非常有效。我需要远程运行脚本，所以我使用 -r 开关，以便 JMeter 脚本在配置的远程客户端上运行。

这是我的 cli 命令：

```
jmeter -n -t "C:\ScriptLocation\Sanity_WebV2_Prod.jmx" -r -l c:\CSV\log.jtl -Jusers=4 
```

目的是上述命令应该在远程机器上为 4 个用户（线程）运行脚本。线程属性中的线程数设置为`${__P(users)}`。

但该脚本实际上只为 1 个用户（默认值）运行，而不是为作为参数传递的 4 个用户运行。

当执行上面提到的 cli 命令`w/o -r`开关，即在本地机器上执行的脚本时，它工作得非常好，即对于 4 个用户。

需要帮助来解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T10:36:34.367

尝试使用`-Gusers`选项而不是`-Jusers`一个：

```
-D[prop_name]=[value] - defines a java system property value.
-J[prop name]=[value] - defines a local JMeter property.
-G[prop name]=[value] - defines a JMeter property to be sent to all remote servers. 
```