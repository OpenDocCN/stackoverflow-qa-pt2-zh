# StackOverflow 问答 13927000-13927999

# c# - 如何批量更新实体框架？

> ID：13927002
> 
> 赞同：0
> 
> 时间：2012-12-18T05:45:03.273
> 
> 标签：c#, asp.net

大家好，我使用由 code smith 工具生成的实体框架，我遇到了批量更新的问题。因为我在网格中有很多行，我想使用批量更新来更新记录。我试图这样做但没有成功我的代码如下

```
try
    {
        TList<PriceSystemItems> _priceSystemCollection = new TList<PriceSystemItems>() ;

        for (int i = 0; i < gvService.Rows.Count; i++)
        {
            _priceSystemItems = new PriceSystemItems();

            EntityDropDownList dataServiceTypeId = (EntityDropDownList)gvService.Rows[i].FindControl("dataServiceTypeId1");
            EntityDropDownList dataPricePlanId = (EntityDropDownList)gvService.Rows[i].FindControl("dataPricePlanId1");
            EntityDropDownList dataNoMatchPlanId = (EntityDropDownList)gvService.Rows[i].FindControl("dataNoMatchPlanId1");
            EntityDropDownList dataSurchargePlanId = (EntityDropDownList)gvService.Rows[i].FindControl("dataSurchargePlanId1");
            CheckBox chkDefault = (CheckBox)gvService.Rows[i].FindControl("chkDefault");
            Label lblPricePlanId = (Label)gvService.Rows[i].FindControl("lblPricePlanId");

            _priceSystemItems.ServiceTypeId = int.Parse(dataServiceTypeId.SelectedValue);
            _priceSystemItems.PriceSystemId = _priceSystemId;
            _priceSystemItems.NoMatchAltPlanId = int.Parse(dataNoMatchPlanId.SelectedValue);
            _priceSystemItems.SurchargePlanId = int.Parse(dataSurchargePlanId.SelectedValue);
            _priceSystemItems.IsDefault = chkDefault.Checked;
            _priceSystemItems.PricePlanId = int.Parse(lblPricePlanId.Text);
            _priceSystemItems.OriginalPriceSystemId = _priceSystemId;
            _priceSystemItems.OriginalServiceTypeId = int.Parse(dataServiceTypeId.SelectedValue);

           _priceSystemCollection.Add(_priceSystemItems);

        }

         _priceSystemItemsService.Update(_priceSystemCollection);
    }
    catch (Exception /*ex*/)
    {

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:04:30.823

我认为您正在创建 PriceSystemItems 对象，然后将其发送以进行更新。这将失败。Entity Framework 中有一个限制，即您需要在修改对象之前将其检索到内存中。要么您必须检索 priceSystemItem，对其进行修改并将其推送到集合中，最后在实体对象上使用 SubmitChanges。

否则，您可以设置 SQL 查询并在实体对象上使用 ExecuteCommand。LINQ 查询也是处理批处理执行的替代方法。

请查看[http://www.aneyfamily.com/terryandann/post/2008/04/Batch-Updates-and-Deletes-with-LINQ-to-SQL.aspx](http://www.aneyfamily.com/terryandann/post/2008/04/Batch-Updates-and-Deletes-with-LINQ-to-SQL.aspx)

# android - 卡模拟是通过 Android 中的 libnfc-nxp 库实现的吗？

> ID：13927004
> 
> 赞同：0
> 
> 时间：2012-12-18T05:45:06.607
> 
> 标签：android, nfc

我知道 NFC 功能是在 Android 的 libnfc-nxp 库中实现的。那么，这是否意味着卡模拟功能也在那里定义和实现？更具体地说，我的手机处于卡模拟模式，但是我的 CPR 40.30 读卡器无法读取或写入其中模拟的卡，因为它甚至无法识别转发器的类型。虽然它可以读取 UID当将手机触摸到它时。当我向某人寻求帮助时，他问我是否想使用 libnfc-nxp 库。这就是为什么我对这个库感到好奇并想知道我是否可以修改它以便我可以访问在安全元素中模拟的卡。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T16:42:23.077

您可以发布您的读者从手机收到的 UID 吗？我确实怀疑您的阅读器正在检测 NFC 目标（而不是模拟卡）。如果 ID 以 0x80 开头（或结束 - 取决于字节顺序），则它是 NFC 目标的防冲突 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:00:33.853

实际的卡模拟是由使用 libnfc-nxp 作为驱动程序库的 Android NFC 设备中的 NFC 芯片中的嵌入式安全元件完成的。库本身仅用于打开或关闭卡模拟。

# jquery - 延迟加载器/无限滚动与 Django

> ID：13927006
> 
> 赞同：0
> 
> 时间：2012-12-18T05:45:09.013
> 
> 标签：jquery, ajax, django, lazy-loading

我正在尝试创建类似于 twitter/facebook/google 文档的无限滚动。我查看了许多插件和教程，但我似乎无法弄清楚如何去做。似乎我查看的所有内容都通过 ajax 加载另一个页面，而不是仅从数据库中提取部分内容。

```
 <div class="question">
            {% if the_question %}
              <ul>
                <li>
                    <div class="votecounter">
                        <span class="score" id="linkscore{{ question_id }}"
                        title="after {{ score.num_votes|default:0 }} vote{{ score.num_votes|default:0|pluralize }}">
                        {{ score.score|default:0 }}
                        </span>
                    </div>
                    <div class="votearrowdiv">
                        <form class="linkvote" id="linkup{{ question.id }}" action="/home/{{ question.id }}/{% if vote and vote.is_upvote %}clear{% else %}up{% endif %}/vote/" method="POST">
                            {% csrf_token %}
                            <input type="image" id="linkuparrow{{ question.id }}" class="{% if vote and vote.is_upvote %}uparrowBlue{% else %}uparrow{% endif %}" value=""></input>
                        </form>
                        <form class="linkvote" id="linkdown{{ question.id  }}" action="/home/{{ question.id }}/{% if vote and vote.is_downvote %}clear{% else %}down{% endif %}/vote/" method="POST">
                            {% csrf_token %}
                            <input type="image" id="linkdownarrow{{ question.id  }}" class="{% if vote and vote.is_downvote %}downarrowBlue{% else %}downarrow{% endif %}" value=""></input>
                        </form>
                    </div>
                        <div class="actualQuestion">
                        <a href="/home/{{ content.id }}/{{ question.id }}/">{{ question.question_text }}</a>
                        </div>
                </li>
              </ul>
          </div> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:15:53.037

您可以尝试使用 jQuery 无止境

[https://github.com/fredwu/jquery-endless-scroll](https://github.com/fredwu/jquery-endless-scroll)

# java - hibernate动态表名

> ID：13927008
> 
> 赞同：1
> 
> 时间：2012-12-18T05:45:30.203
> 
> 标签：java, hibernate, annotations

如何为休眠域对象指定以注释形式动态出现的表名？或者有没有办法为休眠域对象动态设置表名而不对其进行注释？

我正在使用 Hibernate 注释 @Entity 和 @Table。我想将表名动态设置为@Table。可能吗？

在我的模式中，我有具有相同结构的不同表名，其中包含数千条记录。我不想为所有这些表编写域类。谢谢

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-19T04:55:44.430

尝试这个`@Table(name="tab_name")`

# azure - 如何从我的国家更快地检查哪个地区

> ID：13927011
> 
> 赞同：2
> 
> 时间：2012-12-18T05:45:40.960
> 
> 标签：azure

我正在创建 Azure 网站。我的国家降落在欧洲和亚洲之间。Azure 区域选项包括 5 个区域（东亚、西欧、北欧、美国西部、美国东部）。

如何选择从我的国家快速？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:45:22.350

这完全取决于到 Windows Azure 数据中心的路由。您是否尝试过测试欧洲和亚洲数据中心的下载速度、ping 等？

尝试使用[wget](http://users.ugent.be/~bpuype/wget/)甚至 Visual Studio 之类的工具。使用 Visual Studio（我认为您需要 Ultimate），您可以创建负载测试，这些测试可以在您的网站上执行不同的操作（例如下载文件、加载页面……）。在部署在不同数据中心的网站上运行此测试，以更好地了解您所在国家/地区的性能（您可以使用此信息来选择要部署网站的位置）。

请注意，性能仍然会因 ISP 而异。如果性能是您的应用程序的关键，请考虑将云服务与 Windows Azure 流量管理器（配置了[性能负载平衡](http://msdn.microsoft.com/en-us/library/windowsazure/hh744833.aspx#BKMK_PLB)）一起使用。就性能而言，流量管理器可以将您的用户重定向到最近的数据中心。

# excel-2007 - IL、varags 和 ExcelDNA

> ID：13927013
> 
> 赞同：1
> 
> 时间：2012-12-18T05:45:59.497
> 
> 标签：excel-2007, variadic-functions, il, excel-dna

背景：Windows 7、ExcelDNA 0.30、.NET 4.0

我仍在尝试通过 ExcelDNA 在 Excel 中使用 params/ParamArray 方法。通过使用可变参数，我避免与 System.ParamArrayAttribute 有任何关系，并使用 System.ArgIterator 寻求路径。

可悲的事实是以下编译但仍然不起作用。我不断收到价值错误。出了点问题，但我对这个汇编器的了解还不够多，无法弄清楚。任何想法，任何人？

```
.assembly extern mscorlib { } 
.assembly Test {} 
.module test.dll
.namespace VTest {
    .class public Test { 
        // Compute sum of undefined number of arguments 
        .method public static vararg int64 IntSum(/* all arguments optional */) 
        { 
            .locals init(valuetype [mscorlib]System.ArgIterator Args, 
                        unsigned int64 Sum, 
                        int32 NumArgs) 
            ldc.i8 0 
            stloc Sum    

            ldloca Args 
            arglist // Create argument list structure  
            // Initialize ArgIterator with this structure: 
            call instance void [mscorlib]System.ArgIterator::.ctor( 
               value class [mscorlib]System.RuntimeArgumentHandle) 

            // Get the optional argument count: 
            ldloca Args 
            call instance int32 [mscorlib]System.ArgIterator::GetRemainingCount() 
            stloc NumArgs 

            // Main cycle: 
          LOOP: 
            ldloc NumArgs 
            brfalse RETURN // if(NumArgs == 0) goto RETURN; 

            // Get next argument: 
            ldloca Args 
            call instance typedref [mscorlib]System.ArgIterator::GetNextArg() 

            // Interpret it as unsigned int64: 
            refanyval [mscorlib]System.UInt64 
            ldind.u8 

            // Add it to Sum: 
            ldloc Sum 
            add 
            stloc Sum // Sum += *((int64*)&next_arg) 

            // Decrease NumArgs and go for next argument: 
            ldloc NumArgs 
            ldc.i4.m1 
            add 
            stloc NumArgs 
            br LOOP 

          RETURN: 
            ldloc Sum 
            ret 
        } 

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:00:38.107

[Excel-DNA](http://excel-dna.net)（和 Excel C API）目前不支持（0.30 版）“params”可选参数。有关更多详细信息和可能的解决方法，请参阅此讨论：http: [//exceldna.codeplex.com/discussions/406719](http://exceldna.codeplex.com/discussions/406719)

# wpf - WPF - 自定义设计音量控制

> ID：13927017
> 
> 赞同：3
> 
> 时间：2012-12-18T05:46:11.697
> 
> 标签：wpf, wpf-controls, slider

我一直在使用 WPF 一段时间。

我需要通过 Internet 创建以下控件，但找不到合适的。

任何人都可以帮助如何实现此功能。单击控件时，值应该增加或减少。我发现我可以使用音量控制或滑块，但不清楚我应该使用什么。

![在此处输入图像描述](../Images/a0d17fdf169a611aba5a1d563c893c84.png)

感谢期待。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T10:19:57.260

我更喜欢对这类显示使用进度条。这是我实现的一个简单的音量控制，看起来很像您作为示例显示的那个：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{

    private double _volume;
    private bool mouseCaptured = false;

    public double Volume
    {
        get { return _volume; }
        set
        {
            _volume = value;
            OnPropertyChanged("Volume");
        }
    }

    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    private void MouseMove(object sender, MouseEventArgs e)
    {
        if (Mouse.LeftButton == MouseButtonState.Pressed && mouseCaptured)
        {
            var x = e.GetPosition(volumeBar).X;
            var ratio = x/volumeBar.ActualWidth;
            Volume = ratio*volumeBar.Maximum;
        }
    }

    private void MouseDown(object sender, MouseButtonEventArgs e)
    {
        mouseCaptured = true;
        var x = e.GetPosition(volumeBar).X;
        var ratio = x / volumeBar.ActualWidth;
        Volume = ratio * volumeBar.Maximum;
    }

    private void MouseUp(object sender, MouseButtonEventArgs e)
    {
        mouseCaptured = false;
    }

    #region Property Changed

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    #endregion

} 
```

和 XAML：

```
<Window x:Class="VolumeControlApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="196" Width="319">
    <Window.Resources>
        <Style x:Key="VolumeStyle" TargetType="{x:Type ProgressBar}">
            <Setter Property="Foreground" Value="#FFB00606"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ProgressBar}">
                        <Grid x:Name="TemplateRoot">
                            <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}"/>
                            <Rectangle x:Name="PART_Track"/>
                            <Grid x:Name="PART_Indicator" ClipToBounds="True" HorizontalAlignment="Left">
                                <Rectangle x:Name="Indicator" Fill="{TemplateBinding Foreground}" RadiusX="5" RadiusY="3"/>
                            </Grid>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid Background="#FF363636">
        <Border Background="Gray" BorderBrush="Black" BorderThickness="1" HorizontalAlignment="Center" VerticalAlignment="Center" CornerRadius="3" Padding="2">
            <Border Background="Black" CornerRadius="3">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Vol:" Foreground="White" VerticalAlignment="Center" Margin="4 0"/>
                    <ProgressBar x:Name="volumeBar"  Height="10" 
                    Value="{Binding Volume}" 
                    Width="100"
                    MouseMove="MouseMove" 
                    MouseDown="MouseDown"
                    MouseUp="MouseUp" Style="{DynamicResource VolumeStyle}" Grid.Column="1"/>
                </Grid>
            </Border>
        </Border>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T06:41:58.317

您可以使用滑块并为其创建模板。

如果您需要特殊的鼠标处理，您需要子类化滑块并添加逻辑/事件处理。

标准 Slider 模板有几个重复按钮。通过简单地将左侧重复按钮设置为红色，您就可以实现所需控件的非常基本的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:56:07.110

看看这个帖子希望对你有帮助。。

关联：

1：[滑块](http://blogs.telerik.com/miromiroslavov/posts/11-04-15/volume-mixer-with-the-new-shiny-radslider-for-silverlight-and-wpf.aspx)

2：[类似于VLC播放器音量控制](https://stackoverflow.com/questions/8989854/volume-slider-like-vlc)

# ios - 无法使用 NSURLRequest 下载文件

> ID：13927023
> 
> 赞同：-1
> 
> 时间：2012-12-18T05:47:08.270
> 
> 标签：ios, nsurlconnection, nsurlrequest, nsmutabledata

我只是IOS开发的新手。我一直在试图找出苹果的文件。所以我读了这个页面：

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple%5fref/doc/uid/20001836-BAJEAIEE)

这就是我所做的：

```
NSMutableData *testFileType;
// Create the request.
NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                              timeoutInterval:60.0];
// create the connection with the request
// and start loading the data
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if (theConnection) {
    // Create the NSMutableData to hold the received data.
    // receivedData is an instance variable declared elsewhere.
    testFileType = [[NSMutableData data] retain];
    NSLog(@"the connection is successful");
} else {
    // Inform the user that the connection failed.
    NSLog(@"the connection is unsuccessful");
}

[testFileType setLength:0];
[testFileType appendData:[NSMutableData data]]; 
```

谁能告诉我我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:25:26.340

您应该实现以下委托方法：

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"Error: %d %@", [error code], [error localizedDescription]);
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    responseData = [NSMutableData data];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [responseData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [responseData writeToFile:savePath atomically:YES]; 
} 
```

这里 responseData 和 savePath 是声明的实例变量：

```
NSMutableData *responseData;
NSString *savePath; 
```

并且您的课程必须符合`NSURLConnectionDataDelegate`and`NSURLConnectionDelegate`协议。

为了使代码正常工作，您可能需要将 savePath 设置为这样的工作路径

```
NSString *savePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"testfile.txt"]; 
```

下载完成后，您可以根据需要对文件进行任何操作`savePath`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:49:36.627

仅仅创建 NSURLConnection 是不够的。您还需要实现 didReceiveResponse 和 didFinishLoading 委托方法。没有这些，连接会下载文件，但你永远看不到它。

当收到标头时，NSURLConnection 会为每个重定向发送一个 didReceiveResponse。然后它发送一个带有文件的一些字节的 didReceiveData。您需要附加到可变数据的那些。最后你会得到一个 didFinishLoading ，你知道你已经得到了所有的数据。如果出现错误，您会得到一个 didFailWithError 代替。

查看 NSURLConnectionDelegate 协议文档：[https ://developer.apple.com/library/mac/ipad/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html](https://developer.apple.com/library/mac/ipad/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html)

# gridview - 无法在 vb.net 中使用文本框和下拉列表框控件创建动态行

> ID：13927025
> 
> 赞同：0
> 
> 时间：2012-12-18T05:47:10.043
> 
> 标签：gridview, vb.net-2010

在 gridview 中使用带有文本框和下拉列表框控件的 vb.net.crating 动态行，但是当我单击添加新行按钮时无法创建，并且该行中的值也没有保存在后端。在这里我附上了我的代码供你参考。

```
designing code
 -------------
 <asp:gridview ID="Gridview1" runat="server" ShowFooter="true" AutoGenerateColumns="false" Width ="100%">
    <Columns>
    <asp:BoundField DataField="RowNumber" HeaderText="Row Number" />
    <asp:TemplateField HeaderText="Origin country">
        <ItemTemplate>

            <asp:DropDownList ID="ddl1"  runat ="server">
          <asp:ListItem ></asp:ListItem>
          <asp:ListItem >India</asp:ListItem>
            </asp:DropDownList>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Origin City">
        <ItemTemplate>
            <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Destination Country">
        <ItemTemplate>
             <asp:DropDownList ID="ddl2" runat ="server" >
             <asp:ListItem ></asp:ListItem>
             <asp:ListItem >India</asp:ListItem>
             </asp:DropDownList>
        </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Destination City">
        <ItemTemplate>
            <asp:TextBox ID="TextBox21" runat="server"></asp:TextBox>
        </ItemTemplate>
        <FooterStyle HorizontalAlign="Right" />
        <FooterTemplate>
         <%--<asp:Button ID="ButtonAdd" runat="server" Text="Add New Row" OnClick = "ButtonAdd_click"/>--%>
         <asp:LinkButton ID="lnk1" runat ="server" Text ="Add new Row" ></asp:LinkButton>
        </FooterTemplate>
    </asp:TemplateField>
    </Columns> 
```

```
code
-----
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        SetInitialRow()
    End If
End Sub
Private Sub SetInitialRow()
    Dim dt As DataTable = New DataTable
    Dim dr As DataRow = Nothing
    dt.Columns.Add(New DataColumn("RowNumber", GetType(System.String)))
    dt.Columns.Add(New DataColumn("Column1", GetType(System.String)))
    dt.Columns.Add(New DataColumn("Column2", GetType(System.String)))
    dt.Columns.Add(New DataColumn("Column3", GetType(System.String)))
    dt.Columns.Add(New DataColumn("column4", GetType(System.String)))
    dr = dt.NewRow
    dr("RowNumber") = 1
    dr("Column1") = String.Empty
    dr("Column2") = String.Empty
    dr("Column3") = String.Empty
    dr("column4") = String.Empty
    dt.Rows.Add(dr)
    'dr = dt.NewRow();
    'Store the DataTable in ViewState
    ViewState("CurrentTable") = dt
    Gridview1.DataSource = dt
    Gridview1.DataBind()
End Sub

Protected Sub lnk1_Click(ByVal sender As Object, ByVal e As EventArgs)
    Dim rowIndex As Integer = 0
    Dim sc As StringCollection = New StringCollection
    If (Not (ViewState("CurrentTable")) Is Nothing) Then
        Dim dtCurrentTable As DataTable = CType(ViewState("CurrentTable"), DataTable)
        If (dtCurrentTable.Rows.Count > 0) Then
            Dim i As Integer = 1
            Do While (i <= dtCurrentTable.Rows.Count)
                'extract the TextBox values
                Dim box1 As DropDownList = CType(Gridview1.Rows(rowIndex).Cells(1).FindControl("ddl1"), DropDownList)
                Dim box2 As TextBox = CType(Gridview1.Rows(rowIndex).Cells(2).FindControl("TextBox2"), TextBox)
                Dim box3 As DropDownList = CType(Gridview1.Rows(rowIndex).Cells(3).FindControl("ddl2"), DropDownList)
                Dim box4 As TextBox = CType(Gridview1.Rows(rowIndex).Cells(4).FindControl("TextBox21"), TextBox)
                'get the values from the TextBoxes
                'then add it to the collections with a comma "," as the delimited values
                'sc.Add((box1.Text + ("," + (box2.Text + ("," + box3.Text)))))
                sc.Add((box1.Text + ("," + (box2.Text + ("," + box3.Text + ("," + box4.Text))))))
                rowIndex = (rowIndex + 1)
                i = (i + 1)
            Loop
            'Call the method for executing inserts
            InsertRecords(sc)
        End If
    End If
End Sub
Private Sub InsertRecords(ByVal sc As StringCollection)
    Dim str As String = "server=local host; database=traveldesk; username=root; password=test123;"
    Dim conn As MySqlConnection = New MySqlConnection(Str)
    Dim sb As StringBuilder = New StringBuilder(String.Empty)
    Dim splitItems() As String = Nothing
    For Each item As String In sc
        Const sqlStatement As String = "INSERT INTO tbl_testing (Col1,Col2,Col3,Col4) VALUES"
        If item.Contains(",") Then
            splitItems = item.Split(",".ToCharArray)
            sb.AppendFormat("{0}('{1}','{2}','{3}'); ", sqlStatement, splitItems(0), splitItems(1), splitItems(2))
        End If
    Next
    Try
        conn.Open()
        Dim cmd As MySqlCommand = New MySqlCommand(sb.ToString, conn)
        cmd.CommandType = CommandType.Text
        cmd.ExecuteNonQuery()
        'Display a popup which indicates that the record was successfully inserted
        Page.ClientScript.RegisterClientScriptBlock(GetType(Page), "Script", "alert('Records Successfuly Saved!');", True)
    Catch ex As System.Data.SqlClient.SqlException
        Dim msg As String = "Insert Error:"
        msg = (msg + ex.Message)
        Throw New Exception(msg)
    Finally
        conn.Close()
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:43:32.997

我已将插入记录子例程更改如下....

问题出在您的 stringbuilder.appendformat 语句中

```
'Dim str As String = "server=local host; database=traveldesk; username=root; password=test123;"
Dim conn As System.Data.SqlClient.SqlConnection
Dim sb As StringBuilder = New StringBuilder(String.Empty)
Dim splitItems() As String = Nothing
Const sqlStatement As String = "INSERT INTO tbl_testing (Col1,Col2,Col3,Col4) VALUES"
conn = New System.Data.SqlClient.SqlConnection
conn.ConnectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=C:\inetpub\wwwroot\Workspace\App_Data\Database.mdf;Integrated Security=True;User Instance=True"
For Each item As String In sc
  If item.Contains(",") Then
    splitItems = item.Split(",".ToCharArray)
    sb.AppendFormat("{0} ('{1}', '{2}', '{3}', '{4}'); ", sqlStatement, splitItems(0), splitItems(1), splitItems(2), splitItems(3))
  End If
Next
Try
  conn.Open()
  Dim cmd As System.Data.SqlClient.SqlCommand
  cmd = New System.Data.SqlClient.SqlCommand(sb.ToString, conn)
  cmd.ExecuteNonQuery()
  'Display a popup which indicates that the record was successfully inserted
  Page.ClientScript.RegisterClientScriptBlock(GetType(Page), "Script", "alert('Records Successfuly Saved!');", True)
  Catch ex As System.Data.SqlClient.SqlException
    Dim msg As String = "Insert Error:"
    msg = (msg + ex.Message)
    Throw New Exception(msg)
  Finally
    conn.Close()
  End Try 
```

我还修改了 sql-connection 和 sql-command 参数以使其与我创建的测试数据库一起使用，因此您必须替换旧的 sql-connection 和 sql-command 参数。

问候，

# ruby-on-rails - 在 heroku 中，你如何让 ruby /rails 开始工作

> ID：13927028
> 
> 赞同：0
> 
> 时间：2012-12-18T05:47:22.343
> 
> 标签：ruby-on-rails, heroku, queue, delayed-job

我在 heroku 上运行 ruby​​/rails，我想扩展我的工人..

Heroku 有这个很棒的 api 来扩展工人..

```
heroku.post_ps_scale(APP_NAME, 'worker', count) 
#brings up new worker dyno's, or scales down 
```

问题是工人不知道队列......如果我有两个客户并且每个客户都有自己的队列延迟工作。然后他们的任务相互冲突。

让工作人员在不同的队列上工作，但他们与启动他们的应用程序在同一个测功机上（又名网络测功机）

```
cmd = "rake jobs:work WORKER=STYLE_SERF QUEUES=#{queue}"
Rush::Box.new[Rails.root].bash( cmd, :background => true ) 
```

**问题** *如何创建可感知队列的工作人员测功机？*
我希望这将是上面代码的某种组合。

编辑：有些人建议我使用 procFile，我面临的问题是我不知道我需要的数量或工作队列。它非常适合设置在特定队列中工作的“紧急”或“due_yesterday”工作人员......但我希望每个客户都有一个队列。
所以worker_1 处理client_1 作业，worker_2 处理client_2 作业。永远不要穿越到另一个。
很容易想象 client_1 每小时更新一次产品，client_2 每周更新一次。

扩展问题（基于编辑）可以在运行时调整 procfile 吗？它是一个文件，还是编译成代码？如果它是一个可访问的文件，那么也许我可以“创建”工作类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:57:52.120

您可以尝试[http://hirefire.io/](http://hirefire.io/)每月 10 美元，您有 30 天的时间试用它，但根据您的队列大小和响应时间惊人地扩展工作人员和测功机，它是可定制的！

# java - 关于语句 System.out.println() 的解释；

> ID：13927033
> 
> 赞同：-1
> 
> 时间：2012-12-18T05:47:47.007
> 
> 标签：java, system.out

我想知道每个术语的`System.out.println()`含义是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:53:45.977

*   [`System`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html)是一个类名，你访问这个*类*（不是它的一个实例）`System.*`
*   `out`是该类型类中的*类变量*[`PrintStream`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html)
*   [`println()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html#println%28%29)是一种方法`PrintStream`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:54:53.753

`System`是一个类
`out`是一个`PrintStream`类变量是一个 类
`println()`中的方法`PrintStream`

# c# - 在 C# 中的事务内循环

> ID：13927034
> 
> 赞同：2
> 
> 时间：2012-12-18T05:47:56.820
> 
> 标签：c#, sql

我在 C# 中有一个方法，它执行一些查询以插入事务内的数据库中。

我想要做的是一个循环插入几个“电话号码”

```
// Creates the transaction
dbTransaction = dbConnection.DbConnection.BeginTransaction(System.Data.IsolationLevel.ReadCommitted);

// Creates the sql command
dbCommand = factory.CreateCommand();
dbCommand.Connection = dbConnection.DbConnection;
dbCommand.Transaction = dbTransaction; 
```

...逻辑的东西

```
// Inserts the phone
foreach (PlacePhoneDTO placePhoneDTO in placePhoneList)
{
    dbCommand.CommandText = sqlStatementPhone.ToString();
    // Adds the parameters
    AddParameter<int>("@PlaceID", placeID, ref dbCommand);
    AddParameter<string>("@PhoneNumber", placePhoneDTO.phoneNumber, ref dbCommand);
    dbCommand.ExecuteNonQuery();
}

dbTransaction.Commit(); 
```

第二次执行循环失败

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:03:25.220

您要么必须清除命令参数，如 slugster 在他的评论中建议的。您也可以将命令文本移到循环之外，因为它始终相同

```
dbCommand.CommandText = sqlStatementPhone.ToString();

foreach (PlacePhoneDTO placePhoneDTO in placePhoneList)
{
    dbCommand.Parameters.Clear();

    // Adds the parameters
    AddParameter<int>("@PlaceID", placeID, ref dbCommand);
    AddParameter<string>("@PhoneNumber", placePhoneDTO.phoneNumber, ref dbCommand);

    dbCommand.ExecuteNonQuery();
} 
```

或像这样在循环内重新创建命令：

```
foreach (PlacePhoneDTO placePhoneDTO in placePhoneList)
{
    dbCommand = factory.CreateCommand();
    dbCommand.Connection = dbConnection.DbConnection;
    dbCommand.Transaction = dbTransaction;  
    dbCommand.CommandText = sqlStatementPhone.ToString();

    // Adds the parameters
    AddParameter<int>("@PlaceID", placeID, ref dbCommand);
    AddParameter<string>("@PhoneNumber", placePhoneDTO.phoneNumber, ref dbCommand);
    dbCommand.ExecuteNonQuery();
} 
```

# xcode - 在 mac osx 中延迟加载的 TableView

> ID：13927038
> 
> 赞同：5
> 
> 时间：2012-12-18T05:48:12.953
> 
> 标签：xcode, macos

我开始了 mac osx 开发，我想在我搜索的 tableview 中集成延迟加载，但我没有找到任何示例。我试图在 mac osx 中实现 ios 延迟加载，但它不起作用。

任何人都知道如何在 NSTableview 中实现延迟加载。

谢谢，日元

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:51:59.810

我使用 AFNetworking 解决了这个问题。

# jquery - 如何将ajax检索到的对象转换为jquery中的字符串

> ID：13927039
> 
> 赞同：3
> 
> 时间：2012-12-18T05:48:29.550
> 
> 标签：jquery, ajax, json

我正在寻找一个包含各个地方的纬度和经度的对象，例如`[["Second Event",19.0554748,72.8497017],["Demo Event",19.2097381,72.8737017]]`.

我`php`通过使用`json_encode()`函数成功地做到了这一点。如何在回调函数中检索它。我尝试了以下方法：

```
$.post('maps1.php',{},function(data){
    alert(data);
    markers=JSON.stringify(data);
},"json");
alert(markers); 
```

但是，这似乎不起作用。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:52:43.373

您在 post 方法中有变量标记的范围，请尝试这样做：

```
var markers = '';

$.post('maps1.php', {}, function (data) {
    alert(data);
    markers = JSON.stringify(data);
}, "json");

alert(markers) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T10:37:47.133

ajax 字符串语法如下：

```
 var marker;
 $.ajax({
    url:'maps1.php',
    data:{},
    type:'POST',
    dataType:'json',
    success:function(data){
        alert(data);
        marker = JSON.stringify(data);
    },
    complete:{
        alert(marker);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:09:31.170

`$.ajax`应该这样做：

```
 var marker;
     $.ajax({
        url:'maps1.php',
        data:{},
        type:'POST',
        dataType:'json',
        success:function(data){
            alert(data);
            marker = JSON.stringify(data);
        },
        complete:{
            alert(marker);
        }
   }); 
```

`$.POST`应该是这样的：

```
 $.post('maps1.php',{},function(data){
       alert(data);
   },"json").done(function(data){
       markers=JSON.stringify(data);
       alert(markers);
   }); 
```

但我更喜欢使用`$.ajax()`

# java - 用Java中的缩写替换关键字

> ID：13927040
> 
> 赞同：-1
> 
> 时间：2012-12-18T05:48:33.357
> 
> 标签：java, syntax

我正在尝试为 Java 创建一种“速记”语法，用不太冗长的关键字替换冗长的关键字，这样我就可以用更少的击键来编写 Java 代码。有没有办法用这些关键字的缩写替换诸如“public”和“static”之类的关键字，然后将其转换为“普通”Java 代码？

```
//would it be possible to convert this to "normal" Java code?
pu cl ModifiedSyntaxExample{
    pu st void main(){
        System.out.println("Hello World!")
    }
} 
```

这相当于：

```
//would it be possible to convert this to "normal" Java code?
public class ModifiedSyntaxExample{
    public static void main(){
        System.out.println("Hello World!")
    }
} 
```

第一个版本不那么冗长（因此更容易输入），因为“public”和“class”被缩写为“pu”和“st”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T05:51:28.287

如果您使用的是任何 IDE，那么它是可能的。例如，在 Eclipse 中`code snippets`，您可以通过这样的方式配置它，从而使您的代码不那么冗长。我希望我正确理解了你的问题。for ex -`sysout`将为您打印`System.out.println();`。

# c - 通用列表操作函数是如何编写的？

> ID：13927044
> 
> 赞同：7
> 
> 时间：2012-12-18T05:49:05.260
> 
> 标签：c, function, generic-list

我是编程初学者，请对我放轻松，我发现很难得到我的问题的答案。我无法理解复杂的代码。有人可以用简单的编码解释一下我是如何`generic list manipulation function written which accepts elements of any kind?`提前谢谢的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:59:37.450

这通常使用 void 指针来完成：

```
typedef struct node {
  struct node *next;
  void *data;
} node;

node *insert(node *list, void *data) {
}

node *delete(node *list, node *to_delete) {
} 
```

这样的操作函数不依赖于数据的实际类型，因此它们可以通用地实现。例如，您可以为上面的数据字段设置一个数据类型结构：

```
typedef struct data {
  int type;
  void *data;
} data;

/* .... */
data d;
d.type = INT;
d.data = malloc(sizeof(int));
node n = {NULL, (void*)&data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T05:58:53.220

看起来您需要一个异构列表。下面的一些指针：

将列表节点的数据元素作为一个通用结构，其中包含数据类型和数据的指示符。

```
 /** This should be your data node **/
    struct nodedata
    {
      int datatype;
      void *data;
    };    

    /** This should be your list node **/
    struct listnode
    {
      struct nodedata *data;
      struct listnode *next;
    }; 
```

使用上述结构，您可以存储不同类型的数据。使用函数指针进行比较函数或根据数据类型调用不同的函数。

# javascript - nth-child 和 if else 语句

> ID：13927048
> 
> 赞同：1
> 
> 时间：2012-12-18T05:49:25.010
> 
> 标签：javascript, jquery, if-statement, css-selectors

是否可以使用 nth-child 和 if else 语句来实现以下目标？

假设有 9 个 div，每个 div 里面都有一个链接，单击该链接执行一个功能。我可以让链接找出它在里面的第n个子div（来自body标签），并且只有当它在第3个、第6个或第9个div内时才执行该功能？我真的不知道从哪里开始，但似乎有可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T05:52:01.960

您可以使用[**nth-clild**](http://api.jquery.com/nth-child-selector/)，

**[现场演示](http://jsfiddle.net/Fwqxv/)**

```
$('.divclass :nth-child(3n)') 
```

对于绑定事件，您可以使用[click()](http://api.jquery.com/click/)

**[现场演示](http://jsfiddle.net/Fwqxv/4/)**

```
$('#divId div:nth-child(3n) a').click(function(){
  alert($(this).text());    
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T05:55:34.687

[jsBin 演示](http://jsbin.com/udinaj/2/edit)

```
$('div:nth-child(3n)').find('a').click(function( e ){

  e.preventDefault();

  alert( $(this).text() );

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:05:39.440

```
$('divclass:nth-child(3n)').find('a').on('click',function(){
    alert( $(this).text() );
}); 
```

希望这有效:)干杯

# c# - 具有 2 个匹配项的单个正则表达式

> ID：13927051
> 
> 赞同：-1
> 
> 时间：2012-12-18T05:49:36.413
> 
> 标签：c#, .net, regex

给定路径

```
C:\Users\Bob\Downloads\Product12\Prices\USD 
```

并且只知道它包含一个名为的子目录`Downloads`

我有这个正则表达式来定位下载部分

```
(?<=Downloads\\)[^\\""]* 
```

理想情况下，我还希望将下载之后的所有内容作为一个单独的组进行匹配，但对下载和以下路径部分使用单个正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:18:42.997

您不需要 RegEx 来解析路径

```
var paths = new Uri(@"C:\Users\Bob\Downloads\Product12\Prices\USD").Segments; 
```

将返回所有段，您可以跳过 until `Downloads`。例如

```
var paths = new Uri(@"C:\Users\Bob\Downloads\Product12\Prices\USD")
                .Segments
                .SkipWhile(s => s != "Downloads/")
                .Skip(1)
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:53:11.877

这将匹配一个子组中“下载”之前的所有内容，以及另一个子组中的所有内容：

```
/^(.*?Downloads\\)(.*)$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:08:08.503

所以给定样本输入，你想得到`Product12\Prices\USD`，对吧？

```
result = Regex.Match(s, @"\\Downloads\\(.*)$").Groups[1].Value; 
```

但是`[\\""]*`在您的正则表达式中似乎表明您的路径用引号引起来，并且您不希望匹配到结束引号或它之后的任何内容。

```
result = Regex.Match(s, @"\\Downloads\\([^""]*)""").Groups[1].Value; 
```

一些特别感兴趣的点是：

*   在 C# 中创建正则表达式时，如果可能，请始终使用 C# 的逐字字符串表示法（即`@"regex"`）。它使您不必在代码中乱扔一堆反斜杠。例如，如果您的正则表达式是标准 C 样式的字符串文字，则您必须在正则表达式中使用*四个*反斜杠来匹配一个反斜杠输入。

*   当您在 SO 的帖子中包含正则表达式时，请在代码中显示它们。这样我们就不必猜测反斜杠是什么意思了。例如，`\\`in`[^\\""]*`应该与文字反斜杠匹配，还是您只是为正则表达式转义它？

*   说到引号，`"`在正则表达式中没有特殊含义，所以你不必为此逃避它。我将该序列更改为，`[^""]*`因为这就是您在逐字字符串中转义引号的方式。在 C 风格的字符串文字中，它将是`[\\"]*`.

# python - 导入时，Python全局变量在类内部不同

> ID：13927053
> 
> 赞同：0
> 
> 时间：2012-12-18T05:49:36.907
> 
> 标签：python, class, scope, global-variables

这显然是某种范围或导入问题，但我无法弄清楚。就像是：

```
classes.py

class Thing(object):

    @property
    def global_test(self):
        return the_global 
```

进而...

```
test.py

from classes import Thing

global the_global
the_global = 'foobar'

t = Thing()
t.global_test 
```

:(

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "classes.py", line 4, in global_test
    return the_global
NameError: global name 'the_global' is not defined 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T05:53:12.407

Python 中的“全局”是模块内顶层可访问的变量。

这条信息：

```
NameError: global name 'the_global' is not defined 
```

在范围内提出意味着您的文件`classes.py`中没有全局命名。`the_global``classes.py`

**Python 模块不共享全局变量**。（嗯，不是你希望他们分享的方式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:52:41.320

“全局”变量仅在使用它的模块范围内将变量定义为全局变量。您不能在此处使用“全局”来访问“类”模块的模块范围之外的变量。

如果您必须处理全局定义，这里的正确解决方案是：将“全局”变量移动到专用模块中，并使用正确的导入语句将变量导入到“类”模块中。

myvars.py：

```
MY_GLOBAL_VAR = 42 
```

类.py：

```
import myvars

class Thing():

   def method(self):
       return myvars.MY_GLOBAL_VAR # if you need such a weird pattern for whatever reason 
```

# php - 添加个人资料图片归档 joomla 2.5

> ID：13927054
> 
> 赞同：0
> 
> 时间：2012-12-18T05:49:46.653
> 
> 标签：php, joomla, joomla2.5

我正在尝试通过 joomla 用户配置文件扩展插件扩展我的 joomla 用户配置文件。我需要允许用户在网站注册时上传他们的头像。有没有不接触joomla核心的简单方法来获得这个？我读到对用户表单 xml 文件进行一些简单的修改将允许此功能。但我不想改变核心。

我也尝试了 joomla 用户个人资料图片插件。我不想使用 joom social 或那种大型插件。我只需要简单的方法将用户个人资料图片添加到我的 joomla 网站。

非常感谢您 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:55:01.410

您可以将此插件用于个人资料图片实施，而无需更改任何 Joomla 核心文件。

[http://extensions.joomla.org/extensions/clients-a-communities/user-management/19702](http://extensions.joomla.org/extensions/clients-a-communities/user-management/19702)

检查这个......这可能会帮助你......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:51:38.367

我知道这是一个相当大的系统，但您可能需要考虑使用[Community Builder](http://www.joomlapolis.com/downloads/doc_details/451-community-builder-19-package)。它是一个大型用户管理系统，并且与其他 3rd 方扩展（例如 Kunena 论坛）集成时非常有用。我在我的网站中使用它并成功添加了个人资料图片字段。

# java - 如何在Java中比较两个以上的字符串？

> ID：13927056
> 
> 赞同：1
> 
> 时间：2012-12-18T05:50:02.707
> 
> 标签：java, string

我有 4 个字符串 s1、s2、s3、s4。我想将它与“是”，“否”和“两者”进行比较它必须像`(s1.equals("yes"));`

1.  如果所有字符串都等于“是”，它应该给出一个结果。
2.  如果所有字符串都等于“否”，它应该给出一个结果。
3.  如果任何 2 个字符串等于“yes”并且另外 2 个字符串等于“no”，则它必须给出一个结果。
4.  如果任何 3 个字符串等于“是”且 1 个字符串等于“否”，则它必须给出一个结果。
5.  如果任何 3 个字符串等于“否”并且 1 个字符串等于“是”，则它必须给出一个结果..

如何进行这种比较？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T06:04:20.463

我会将这些字符串存储在一个列表中，并使用实用程序来查找和`Collections`的频率。然后将您的条件应用于数量和。： -`yes``no``yes``no`

```
List<String> list = new ArrayList<String>() {{
    add("yes"); add("yes"); add("no"); add("no");
}};

int yes = Collections.frequency(list, "yes");
int no = Collections.frequency(list, "no");

if (yes == 4 || yes == 0) {   // all "yes" or all "no"
    System.out.println("Operation 1");

} else if (yes == 2) {   // 2 "yes" and 2 "no"
    System.out.println("Operation 2");

} else {   // (1 "yes", 3 "no") or (1 "no", 3 "yes")
    System.out.println("Operation 3");
} 
```

当然，我假设您的字符串只能是`"yes"`or `"no"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:33:18.767

```
String[] str={s1,s2,s3,s4};
int yesCount=0, noCount=0;
for(int i=0;i<str.length();i++){
if("yes".equals(str[i]))
yescount++;
else if("no".equals(str[i]))
noCount++;
}
String check=""+yesCount+noCount;
switch(check){
case "40":
//do whatever
break;
case "30":
//do whatever
break;
case "20":
//do whatever
break;
case "10":
//do whatever
break;
case "31":
//do whatever
break;
case "21":
//do whatever
break;
case "11":
//do whatever
break;
case "22":
//do whatever
break;
case "12":
//do whatever
break;
case "13":
//do whatever
break;
case "04":
//do whatever
break;
case "00":
//do whatever
break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T05:56:49.867

你可以试试这个逻辑。这个做你打算做的事情：

```
if(s1.equals("yes") && s2.equals("yes") && s3.equals("yes") && s4.equals("yes"))
    result1;
else if (s1.equals("no") && s2.equals("no") && s3.equals("no") && s4.equals("no"))
    result2;
else if ((s1.equals("yes") || s2.equals("yes")) && (s3.equals("no") || s4.equals("no")))
    result3;
else if((s1.equals("yes") || s2.equals("yes") || s3.equals("yes")) && s4.equals("no"))
    result4;
else if((s1.equals("no") || s2.equals("no") || s3.equals("no")) && s4.equals("yes"))
    result5; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T06:11:32.973

假设它们是“是”或“否”，请使用：

```
int yesCount = (s1+s2+s3+s4).replace("no", "").length() / 3; 
```

然后基于你的逻辑，可能有一个`switch(yesCount)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T06:35:14.293

假设字符串值可以是yes或no

```
 int result = 0;
    if("yes".equalsIgnoreCase(s0)) result++;
    if("yes".equalsIgnoreCase(s1)) result++;
    if("yes".equalsIgnoreCase(s2)) result++;
    if("yes".equalsIgnoreCase(s3)) result++;
    switch(result){
        case 0:
            System.out.println("all strings are NO");
            break;
        case 1:
            System.out.println("3 strings are NO, 1 string is YES");
            break;
        case 2:
            System.out.println("2 strings are NO, 2 strings are YES");
            break;
        case 3:
            System.out.println("1 string is NO, 3 strings are YES");
            break;
        case 4:
            System.out.println("all strings are YES");
            break;
    } 
```

# iphone - 图像不太清晰

> ID：13927057
> 
> 赞同：0
> 
> 时间：2012-12-18T05:50:09.590
> 
> 标签：iphone, objective-c, uiimageview

在我的应用程序中，我从相机捕获图像。那时我的图像的清晰度非常好，但是通过以下代码行，我的图像被移动到下一个视图。

```
- (UIImage *) imageFromView:(UIView *)view {

    UIGraphicsBeginImageContext(view.bounds.size);
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return viewImage;
} 
```

当我当时在下一个视图中看到图像时，它没有以前那么清晰。

我想提一下，在两个屏幕上，图像视图的高度和宽度是相同的。

那么图像清晰度应该是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:14:02.113

使用这条线

```
UIGraphicsBeginImageContextWithOptions(view.bounds.size, NO, 0.0); 
```

代替
`UIGraphicsBeginImageContext(view.bounds.size);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:57:26.137

您需要将图像偏移 0.5,0.5。否则 Quartz 将每个点分配给 4 个邻居。

在 Quartz 0.0 中是一个像素的角，而不是它的中心。

```
CGContextTranslateCTM(context, 0.5, 0.5); 
```

请参阅：[https ://developer.apple.com/library/mac/ipad/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html](https://developer.apple.com/library/mac/ipad/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html)

# android - 如果应用程序仅针对 Android 4.0 及更高版本，是否可以从项目中删除 v4 支持库？

> ID：13927071
> 
> 赞同：1
> 
> 时间：2012-12-18T05:51:17.857
> 
> 标签：android, eclipse, adt, android-version, android-support-library

我编写了一个仅针对 Android 4.0（冰淇淋三明治）及更高版本的应用程序。`android-support-v4.jar`默认情况下，这似乎是我的 Eclipse 项目中的一个依赖项。由于我的目标不是低于 4.0，我可以将此支持库作为依赖项删除，因为它不需要...？我不希望任何不必要的膨胀与我的应用程序一起打包（如果它实际上不是这样工作的，请纠正我）。

如果是这样，如何在 Eclipse 中删除它？我似乎在任何地方都找不到选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:52:09.333

当然。只需删除 jar，如果您没有任何其他依赖项，则删除整个 libs/ 文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:08:03.850

**当您创建一个新的 android 应用程序项目时，取消**选中创建图标**并**取消选中创建活动。**这样adt就不会导入支持库了，应用模板刚刚完成。**

# iphone - 滚动视图中的图像视图未放大视图的某些部分

> ID：13927072
> 
> 赞同：0
> 
> 时间：2012-12-18T05:51:19.770
> 
> 标签：iphone, ios, xcode

我已经在我`imageview`的应用程序中实现了放大`scrollview`应用程序。我想在视图的右上方设置`scrollview`and 。`imageview`但它没有在那里放大。当我把它放在`view`它缩放的中心时。

代码如下

```
@interface przoomViewController : UIViewController<UIScrollViewDelegate> 

{     
    IBOutlet UIScrollView *scrollView;
    IBOutlet UIImageView  *image;    
}

    -(void)viewDidLoad
{
    [image setUserInteractionEnabled:YES];
    [scrollView addSubview:image];
    scrollView.scrollEnabled = YES;
    scrollView.minimumZoomScale=1.0;
    scrollView.maximumZoomScale=4.0;
    [scrollView setContentSize:CGSizeMake(320, 180)];
    scrollView.delegate=self;

}
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return image;
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:14:13.373

我已经在我的应用程序中实现了图像缩放。试试 scrollviewDelegate 方法

```
- (void)scrollViewDidZoom:(UIScrollView *)scrollView 
{
  // The scroll view has zoomed, so we need to re-center the contents
  [self centerScrollViewContents];
}

- (void)centerScrollViewContents 
{
  CGSize boundsSize = zoomingScrollView.bounds.size;
  CGRect contentsFrame = ZImageView.frame;

  if (contentsFrame.size.width < boundsSize.width) 
  {
    contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
  } 
  else 
  {
    contentsFrame.origin.x = 0.0f;
  }

  if (contentsFrame.size.height < boundsSize.height) 
  {
    contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
  } 
  else 
  {
    contentsFrame.origin.y = 0.0f;
  }

  ZImageView.frame = contentsFrame;
} 
```

无需在 imageView 上启用 userInterAction。如果这没有帮助，我将分享我的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:54:58.803

您应该设置`zoomScale`属性的值`scrollview`以开始缩放，如下所示。

```
scrollView.zoomScale=1.0; // this will enable zooming. 
```

# java - 将对象分配给 null

> ID：13927077
> 
> 赞同：4
> 
> 时间：2012-12-18T05:51:36.847
> 
> 标签：java

如果我实例化一个对象并将其传递给一个函数，则在此函数中我将此对象分配给 null。似乎从函数返回时，对象仍然存在。

我只想知道当我分配 null 时会发生什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T05:55:56.497

你永远不能分配给一个对象。你所拥有的只是原语和引用。引用要么是空的，要么是指向合适类的对象的指针。

Java 参数是按值传递的。您调用的方法获得了引用的副本。它使该引用为空。调用方法有自己的引用，它不受对传递的副本的任何分配的影响。该引用仍然指向该对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T05:55:48.947

Java 中方法的参数是“按值传递”，这意味着您将对象引用的副本传递给方法。*为该引用分配 null 值将在方法调用内*更改其值，但对方法外的引用没有任何作用，因为它是一个副本。用代码说明：

```
void doSomething(final String input) {
    input = null;
    System.out.println("Input is: " + input); // prints null
    return;
}

final String name = "Bob";
doSomething(name);
System.out.println("Name is: " + name); // prints 'Bob' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T05:57:04.890

当您实例化一个对象并将其传递给一个函数，并在函数内部将其重新分配给 null 或其他内容时，在调用方它不会反映为参数是按值传递的（在对象的情况下是引用的副本），在调用它仍然会指向旧对象。如果要限制方法中的重新分配，可以`final`在方法参数中使用关键字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T05:58:00.320

当您将对象引用传递给函数时（Java 总是调用它方法），在方法范围内，会在堆栈内存上创建一个新引用，但它们指向堆内存中的同一个对象。因此，如果您将 null 分配给新的参考，只有这个参考与该对象的链接是中断的，它不影响前一个。

# python - 使用 Python 在抓取数据中进行编码

> ID：13927079
> 
> 赞同：1
> 
> 时间：2012-12-18T05:51:50.720
> 
> 标签：python, html-encode

我想用 Python 抓取网站的内容。像这样：

```
Apple’s stock continued to dominate the news over the weekend, with Barron’s placing it on the top of its favorite 2013 stock list. 
```

但是以错误结果打印它们：

```
Apple âs stock continued to dominate the news over the weekend, with Barronâs placing it on the top of its favorite 2013 stock list. 
```

无法显示符号“'”，这是我的代码：

```
 #-*- coding: utf-8 -*-

    import sys
    reload(sys)
    sys.setdefaultencoding('utf-8')
    import urllib
    from lxml import *
    import urllib
    import lxml.html as HTML

    url = "http://www.forbes.com/sites/panosmourdoukoutas/2012/12/09/apple-tops-barrons- 10-favorite-stocks-for-2013/?partner=yahootix"
    sock = urllib.urlopen(url)
    htmlSource = sock.read()
    sock.close()

    root = HTML.document_fromstring(htmlSource)
    contents = ' '.join([x.strip() for x in root.xpath("//div[@class='body']/descendant::text()")])

    print contents

    f = open('C:/Users/yinyao/Desktop/Python Code/data.txt','w')
    f.write(contents)
    f.close() 
```

但是设置之后，printf的功能就没有用了。为什么？我该怎么办？我用的是Windows，默认的编码方式是gbk。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:56:19.923

首先，确保您了解[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

其次，**始终在**内部使用 unicode。早解码，晚编码：当您废弃网站时，将其解码为 un​​icode，并在脚本内部将其处理为 unicode。否则，您的代码将在随机点崩溃，例如因为它在某些中文网页的评论中遇到意外字符。只有当您稍后将它传递给某个地方（例如，某些可写流）时，您才应该对其进行编码（最好是“utf-8”）

三、使用[BeautifulSoup 4](http://www.crummy.com/software/BeautifulSoup/)

# .net - 运行exe后如何返回退出代码？

> ID：13927081
> 
> 赞同：11
> 
> 时间：2012-12-18T05:51:57.050
> 
> 标签：.net, vbscript

我创建了一个用于验证功能的控制台应用程序，并且我需要使用 vbscript 执行该应用程序。执行此 exe 后，无论函数是否返回成功，我都想返回退出代码。如何在 .net 中返回状态或退出代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T06:03:55.347

我假设您正在编写 C# 或 VB.NET。在这两种情况下，通常人们都有一个不返回任何内容的 Main 函数，**但**您可以将其更改为返回一个整数来表示退出代码。

对于 C#，请参阅[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/0fwzzxz2%28v=vs.80%29.aspx)。

你可以做：

```
static int Main()
{
    //...
    return 0;
} 
```

对于 VB.NET，请参阅[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms235406%28v=vs.80%29.aspx)。

你可以做：

```
Module mainModule
    Function Main() As Integer
        '....
        '....
        Return returnValue
    End Function
End Module 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-18T07:17:12.017

除了@gideon 你还可以设置

```
Environment.ExitCode = theExitCode; 
```

如果发生了非常糟糕的事情，请在代码的其他部分中直接退出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:53:07.383

正如@gideon 评论的那样，在您的可执行文件中，您必须使用`return`语句来返回数字。

在您的脚本中，请`%ERRORLEVEL%`在调用此可执行文件后阅读。这就是 Windows 保存返回码的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:31:16.840

鉴于此 C# 程序：

```
class MainReturnValTest {
    static int Main(string[] args) {
        int rv = 0;
        if (1 == args.Length) {
            try {
                rv = int.Parse(args[0]);
            }
            catch(System.FormatException e)             {
                System.Console.WriteLine("bingo: '{1}' - {0}", e.Message, args[0]);
                rv = 1234;
            }
        }
        System.Console.WriteLine("check returns {0}.", rv);
        return rv;
    }
} 
```

样品运行：

```
check.exe
check returns 0.

check.exe 15
check returns 15.

check.exe nonum
bingo: 'nonum' Input string was not in a correct format.
check returns 1234. 
```

和这个 VBScript 脚本（减少到最低限度，不要在生产中这样做）：

```
Option Explicit

Const WshFinished = 1

Dim goWSH : Set goWSH = CreateObject("WScript.Shell")

Dim sCmd : sCmd = "..\cs\check.exe"
If 1 = WScript.Arguments.Count Then sCmd = sCmd & " " & WScript.Arguments(0)
WScript.Echo sCmd
Dim nRet : nRet = goWSH.Run(sCmd, 0, True)
WScript.Echo WScript.ScriptName, "would return", nRet
With goWSH.Exec(sCmd)
    Do Until .Status = WshFinished : Loop
    WScript.Echo "stdout of check.exe ==>" & vbCrLf, .Stdout.ReadAll()
    nRet = .ExitCode
    WScript.Echo ".ExitCode of check.exe", nRet
End With
' !! http://stackoverflow.com/questions/2042558/how-do-i-get-the-errorlevel-variable-set-by-a-command-line-scanner-in-my-c-sha
WScript.Echo "Errorlevel:", Join(Array(goWSH.Environment("PROCESS")("ERRORLEVEL"), goWSH.ExpandEnvironmentStrings("%ERRORLEVEL%"), "???"), " - ")
WScript.Echo WScript.ScriptName, "returns", nRet
WScript.Quit nRet 
```

样品运行：

```
cscript 13921064.vbs
..\cs\check.exe
13921064.vbs would return 0
stdout of check.exe ==>
 check returns 0.

.ExitCode of check.exe 0
Errorlevel:  - %ERRORLEVEL% - ??? <=== surprise, surprise
13921064.vbs returns 0

echo %ERRORLEVEL%
0

cscript 13921064.vbs nonum & echo %ERRORLEVEL%
..\cs\check.exe nonum
13921064.vbs would return 1234
stdout of check.exe ==>
 bingo: 'nonum' Input string was not in a correct format.
check returns 1234.

.ExitCode of check.exe 1234
Errorlevel:  - %ERRORLEVEL% - ???
13921064.vbs returns 1234
0       <=== surprise, surprise

DNV35 E:\trials\SoTrials\answers\13927081\vbs
echo %ERRORLEVEL%
1234 
```

你会看到的

*   WScript.Quit 是从脚本返回退出代码的方法
*   您使用 .Run 或 .Exec 启动另一个进程
*   .Run 返回被调用进程的退出代码
*   .Exec 设置 .ExitCode （终止后！）
*   在脚本中访问 %ERRORLEVEL% 是徒劳的 (@LexLi)
*   `cscript 13921064.vbs nonum & echo %ERRORLEVEL%`也没用

# java - Java Charset InputStreamReader，文件通道差异

> ID：13927082
> 
> 赞同：1
> 
> 时间：2012-12-18T05:52:00.960
> 
> 标签：java, character-encoding

我正在尝试读取编码为 UTF-16 文件的（日语）文件。

当我使用带有“UTF-16”字符集的 InputStreamReader 读取它时，文件被正确读取：

```
try {
        InputStreamReader read = new InputStreamReader(new FileInputStream("JapanTest.txt"), "UTF-16");
        BufferedReader in = new BufferedReader(read);
        String str;
        while((str=in.readLine())!=null){           
            System.out.println(str);
    }
    in.close();
}catch (Exception e){
    System.out.println(e);
} 
```

但是，当我使用文件通道并从字节数组中读取时，字符串并不总是正确转换：

```
 File f = new File("JapanTest.txt");
    fis = new FileInputStream(f);
    channel = fis.getChannel();
     MappedByteBuffer buffer = channel.map( FileChannel.MapMode.READ_ONLY, 0L, channel.size());
     buffer.position(0);
    int get = Math.min(buffer.remaining(), 1024);
    byte[] barray = new byte[1024];
    buffer.get(barray, 0, get);
    CharSet charSet = Charset.forName("UTF-16");
    //endOfLinePos is a calculated value and defines the number of bytes to read
    rowString = new String(barray, 0, endOfLinePos, charSet);               
    System.out.println(rowString); 
```

我发现的问题是，如果 MappedByteBuffer 位于位置 0，我只能正确读取字符。如果我增加 MappedByteBuffer 的位置，然后将多个字节读入字节数组，然后使用转换为字符串字符集 UTF-16，则字节未正确转换。如果文件以 UTF-8 编码，我还没有遇到过这个问题，那么这只是 UTF-16 的问题吗？

更多详细信息：我需要能够从文件通道中读取任何行，因此我构建了一个行结束字节位置列表，然后使用这些位置来获取任何给定行的字节，然后转换它们到一个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:33:55.957

UTF-16 的编码单元是 2 个字节，而不是像 UTF-8 那样一个字节。模式和单字节码单元长度使UTF-8自同步；它可以在任何时候正确读取，如果它是一个连续字节，它可以回溯或只丢失一个字符。

使用 UTF-16，您必须始终使用字节对，您不能从奇数字节开始读取或在奇数字节处停止读取。您还**必须**知道字节顺序，并且在文件开头不读取时使用 UTF-16LE 或 UTF-16BE，因为不会有 BOM。

您还可以将文件编码为 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:29:23.897

可能，`InputStreamReader`正常情况下不会进行一些转换`new String(...)`。作为一种解决方法（并验证此假设），您可以尝试包装从通道读取的数据，例如`new InputStreamReader( new ByteArrayInputStream( barray ) )`.

编辑：忘记:) - [Channels.newReader()](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/Channels.html#newReader%28java.nio.channels.ReadableByteChannel,%20java.lang.String%29)将是要走的路。

# css - 如何删除在 Rails3 中执行 JQuery Ajax 后弹出的新空白行？

> ID：13927087
> 
> 赞同：1
> 
> 时间：2012-12-18T05:52:19.190
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, jquery

在`index.html.erb`中，我制作了一个按钮，当它被按下时，它会从跟随切换到取消关注，跟随切换到取消关注。
它工作得很好，但是当我按下按钮时，它会在页面加载时首先显示的按钮的右下方创建另一个新行。
为什么会这样？以及如何删除或修复这条新线？

这里有图片！

图 1\. 页面加载时

![页面加载时](../Images/c7c2cca30e6bf0e40504cf895bbc84d3.png)

图 2\. 加载后第一次按下按钮时

![第一次按下按钮时](../Images/68f53e42ed44d4b7e665630b8ea37072.png)

图 3\. 加载后第二次按下按钮时

![第二次按下按钮时](../Images/d9d1ad629786257f9201e25ce9ca2654.png)

我的代码是

follow_controller.rb

```
class FollowsController < ApplicationController

  def create
    @user = User.find(params[:user_id])
    current_user.follow(@user)
    respond_to do |format|
      format.js {render :action=>"create.js"}
      end
  end

  def destroy
    @user = User.find(params[:user_id])
    current_user.stop_following(@user)
    respond_to do |format|
      format.js {render :action=>"destroy.js"}
  end
end

end 
```

意见/用户/_follow_user.html.erb

```
<% unless user == current_user %>
    <% if current_user.following?(user) %>
        <%= button_to("Un-Follow", user_follow_path(user.to_param, current_user.get_follow(user).id), 
        :method => :delete, 
        :remote => true, 
        :class => 'btn') %>
    <% else %>
        <%= button_to("Follow", user_follows_path(user.to_param), 
        :remote => true, 
        :class => 'btn btn-primary') %>
    <% end %>
<% end %> 
```

意见/关注/create.js.erb

```
$('.follow_user[data-user-id="<%=@user.id%>"]').html('<%= escape_javascript(render :partial => "follow_user", :locals => {:user => @user}) %>');
#jQuery 
```

意见/关注/destroy.js.erb

```
$('.follow_user[data-user-id="<%=@user.id%>"]').html('<%= escape_javascript(render :partial => "follow_user", :locals => {:user => @user}) %>');
#jQuery 
```

意见/用户/index.html.erb

```
<%- model_class = User.new.class -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize %></h1>
</div>
  <% @from %>
  <h3>tag cloud</h3>
  <% tag_cloud(@tags, %w(css1 css2 css3 css4)) do |tag, css_class| %>
    <%= link_to tag.name, {:action=>'index', :tag=>tag.name}, :class => css_class%>
  <% end %> 

<%= paginate @users %>

<table class="table table-condensed">
  <thead></thead>
    <tbody>
    <% @users.each do |user| %>  
      <div class="memberListBox">
        <div class="memberList">
            <p class="name"><span><%= user.user_profile.nickname %></span>(<%= user.user_profile.age %>)</p>
            <p class="size"><%= user.username %></p>
            <p class="img">
            <% if user.user_profile.user_avatar? %>
            <%= image_tag(user.user_profile.user_avatar.url(:thumb),:height => 100, :width => 100, :class => 'img-polaroid' ) %>
            <% else %>
            <%= image_tag('nophoto.gif',:height => 100, :width => 100, :class => 'img-polaroid' ) %>
            <% end %>
            </p>
            <div class="introduction">
                <%= user.user_profile.introduction %>
            </div>

<% if user_signed_in? && current_user!=user %>          
<div class="follow_user" data-user-id="<%= user.id %>">
  <%= render :partial => "follow_user", :locals => {:user => user} %>
</div>
<% end %>

  <%= link_to sanitize('<i class="icon-pencil icon-white"></i> ') + 'Message', new_messages_path(user.username), :class => 'btn btn-primary'  %>

                <%= link_to sanitize('<i class="icon-user icon-white"></i> ') + 'Profile', show_user_path(:username => user.username, :breadcrumb => @from), :class => 'btn btn-info' %>              

        </div>
    </div>
   <% end %>
  </tbody>  
</table> 
```

页面加载时的html（图1）

```
<div class="follow_user" data-user-id="3">
        <form action="/users/3/follows/133" class="button_to" data-remote="true" method="post"><div><input name="_method" type="hidden" value="delete" /><input class="btn" type="submit" value="Un-Follow" /><input name="authenticity_token" type="hidden" value="eVjePZ0ajS3NfXJLDBkELnpNwyt8k1f59FiT8iv/Xb8=" /></div></form>

</div> 
```

按下按钮时的 html（图 3）

```
<div class="follow_user" data-user-id="3">
        <form action="/users/3/follows/133" class="button_to" data-remote="true" method="post"><div><input name="_method" type="hidden" value="delete" /><input class="btn" type="submit" value="Un-Follow" /><input name="authenticity_token" type="hidden" value="S92bRkGcbMz/puQvia4m7IOtrTsO2iCThiaHlBaXmJU=" /></div></form>

</div> 
```

# java - Eclipse - Java 导入似乎丢失了？

> ID：13927088
> 
> 赞同：1
> 
> 时间：2012-12-18T05:52:26.613
> 
> 标签：java, eclipse, jmenubar

我在`JMenu`班上玩，发生了意想不到的事情。

我运行下面的代码，`JFrame`出现了，但`MenuBar`和内容没有。但是，当我`JFrame`用鼠标调整大小时，元素会突然出现。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class Main {
  public static void main(String[] args) {
    JFrame frame = new JFrame("test");
    frame.setVisible(true);
    frame.setSize(300,300);     
    frame.setLocationRelativeTo(null); // centered on monitor   
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JMenuBar menubar = new JMenuBar();
    frame.setJMenuBar(menubar);
    menubar.setVisible(true);

    JMenu file = new JMenu("File");
    menubar.add(file);

    JMenuItem exit = new JMenuItem("Exit");
    file.add(exit);

    JMenu help = new JMenu("Help");
    menubar.add(help);

    /**
     * Label and text and button
     */
    JLabel label = new JLabel("Hello there");
    JPanel panel = new JPanel();
    frame.add(panel);
    panel.add(label);

    JButton button = new JButton("Submit Button");
    panel.add(button);
    button.setToolTipText("this is my tooltip text");    
  }
} 
```

任何人都可以看到我看不到的任何可疑的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:04:30.320

原来它只是 frame.setVisible(true);

我需要把它放在下面。

# jquery - 不能在 woff 上使用 jquery 事件？

> ID：13927089
> 
> 赞同：0
> 
> 时间：2012-12-18T05:52:39.903
> 
> 标签：jquery, twitter-bootstrap, font-awesome, woff

我正在使用`bootstrap`and建立一个网站`fontawesome`。现在我想在一个图标上使用 JQuery`onclick`事件。`icon-plus`但是点击图标后什么也没发生。我找到了一些可以正常工作的引导程序示例，并将浏览器下载图标视为`png`. 但`fontawesome`提供图标为`woff`. 我的jQuery代码如下：

```
$(".icon-plus").on("click",function(e){
  $("#form").append(...);
}); 
```

# php - 使用或不使用协议验证 URL

> ID：13927099
> 
> 赞同：7
> 
> 时间：2012-12-18T05:53:14.390
> 
> 标签：php, regex

嗨，我想验证以下网址，因此只要存在 .com、.net、.org 等顶级域名，它们都会通过或不带 http/www 部分。

有效的 URL 应该是：

```
http://www.domain.com
http://domain.com
https://www.domain.com
https://domain.com
www.domain.com
domain.com 
```

要支持长 tld：

```
http://www.domain.com.uk
http://domain.com.uk
https://www.domain.com.uk
https://domain.com.uk
www.domain.com.uk
domain.com.uk 
```

要支持破折号 (-)：

```
http://www.domain-here.com
http://domain-here.com
https://www.domain-here.com
https://domain-here.com
www.domain-here.com
domain-here.com 
```

还支持域中的数字：

```
http://www.domain1-test-here.com
http://domain1-test-here.com
https://www.domain1-test-here.com
https://domain1-test-here.com
www.domain1-test-here.com
domain-here.com 
```

也可能允许甚至 IP：

```
127.127.127.127 
```

（但这是额外的！）

也允许破折号（-），忘了说=）

我发现许多功能可以验证一个或另一个，但不能同时验证两者。如果有人知道好的正则表达式，请分享。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-26T05:28:25.690

对于 url 验证完美的解决方案。

以上答案是正确的，但不适用于 .me、.it、.in 等所有域

所以请在下面的用户进行 url 匹配：

```
$pattern = '/(?:https?:\/\/)?(?:[a-zA-Z0-9.-]+?\.(?:[a-zA-Z])|\d+\.\d+\.\d+\.\d+)/';

if(preg_match($pattern, "http://website.in"))
{
echo "valid";
}else{
echo "invalid";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:09:10.203

当您忽略路径部分并仅查找域部分时，一个简单的规则是

```
(?:https?://)?(?:[a-zA-Z0-9.-]+?\.(?:com|net|org|gov|edu|mil)|\d+\.\d+\.\d+\.\d+) 
```

如果您还想支持国家 TLD，则必须提供完整的（当前）列表或附加`|..`到 TLD 部分。

`preg_match`你必须将它包裹在一些分隔符之间

```
$pattern = ';(?:https?://)?(?:[a-zA-Z0-9.-]+?\.(?:com|net|org|gov|edu|mil)|\d+\.\d+\.\d+\.\d+);';
$index = preg_match($pattern, $url); 
```

通常，您使用`/`. 但在这种情况下，斜线是模式的一部分，所以我选择了其他分隔符。否则我必须用`\`

```
$pattern = '/(?:https?:\/\/)?(?:[a-zA-Z0-9.-]+?\.(?:com|net|org|gov|edu|mil)|\d+\.\d+\.\d+\.\d+)/'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-13T09:35:33.733

我认为您可以将[标志](http://php.net/manual/en/filter.filters.flags.php)用于[`filter_vars`](http://php.net/manual/en/function.filter-var.php).

因为`FILTER_VALIDATE_URL`有几个标志可用：

*   `FILTER_FLAG_SCHEME_REQUIRED`要求 URL 包含方案部分。
*   `FILTER_FLAG_HOST_REQUIRED`要求 URL 包含主机部分。
*   `FILTER_FLAG_PATH_REQUIRED`要求 URL 包含路径部分。
*   `FILTER_FLAG_QUERY_REQUIRED`要求 URL 包含查询字符串。

`FILTER_FLAG_SCHEME_REQUIRED`并`FILTER_FLAG_HOST_REQUIRED`默认使用。

假设您要检查路径部分并且不想检查方案部分，您可以执行以下操作（falg 是位掩码）：

```
filter_var($url, FILTER_VALIDATE_URL, ~FILTER_FLAG_SCHEME_REQUIRED | FILTER_FLAG_PATH_REQUIRED) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:43:19.860

不要使用正则表达式。并非所有涉及字符串的问题都需要使用正则表达式。

不要编写自己的 URL 验证器。URL 验证是一个已解决的问题，现有的代码已经编写、调试和测试。事实上，它是 PHP 的标准配置。

查看 PHP 内置的过滤功能：[http ://us2.php.net/manual/en/book.filter.php](http://us2.php.net/manual/en/book.filter.php)

# jquery - 在 JQuery 中动态创建表单并使用 JSON 发布

> ID：13927106
> 
> 赞同：4
> 
> 时间：2012-12-18T05:53:45.403
> 
> 标签：jquery, json, xslt

我正在尝试在我的 XSLT 代码中动态创建活动监视器时事通讯订阅。

```
<script type="text/javascript"><xsl:text disable-output-escaping="yes"><![CDATA[

    $(function() {
        $('#submit').click(function() {
             if ($('#nlapproved').attr('checked')) {
                newsletter();
            }
        });

        function newsletter()
        {
            $form = $('<form action="http://mydomain.createsend.com/t/j/s/jtes/" method="post" id="subForm" />');
            $form.append('<input type="hidden" name="cm-name" id="hidName" />');
            $form.append('<input type="hidden" name="cm-jtes-jtes" id="hidEmail" />');
            $form.append('<input type="hidden" name="cm-fo-pikty" id="hidPrivateBusiness" />');

            $form
                .find("#hidName")
                .val(']]></xsl:text><xsl:value-of select="$context//checkoutinformation/info[key='name']/value" disable-output-escaping="yes"/><xsl:text disable-output-escaping="yes"><![CDATA[');

            $form
                .find("#hidEmail")
                .val(']]></xsl:text><xsl:value-of select="$context//checkoutinformation/info[key='email']/value" disable-output-escaping="yes"/><xsl:text disable-output-escaping="yes"><![CDATA[');

            $form
                .find("#hidPrivateBusiness")
                .val(']]></xsl:text><xsl:value-of select="$acctype"/><xsl:text disable-output-escaping="yes"><![CDATA[');

            $.getJSON(
                $($form).get(0).action + "?callback=?",
                $($form).serialize(),
                function (data) {
                    if (data.Status === 400) {
                        alert("Error: " + data.Message);
                    } else { 
                        // 200
                        alert("Success: " + data.Message);
                    }
                }
            );
        }
    });
]]></xsl:text></script> 
```

一切正常，直到我调用`getJSON`方法。之后没有任何效果。我在 Mozilla 错误控制台中找不到任何 JavaScript 错误。我检查了表单是否正确创建并`alert($('<div>').append(($form).clone()).html());`显示正确的结果。

```
<form action="http://mydomain.createsend.com/t/j/s/jtes/" method="post" id="subForm"><input value="552" name="cm-name" id="hidName" type="hidden"><input value="aks@mydomain.com" name="cm-jtes-jtes" id="hidEmail" type="hidden"><input value="268278" name="cm-fo-pikty" id="hidPrivateBusiness" type="hidden"></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:23:22.250

在[jQuery API 文档](http://api.jquery.com/jQuery.getJSON/)中，重新调用回调函数：

> success(data, textStatus, jqXHR) 请求成功时执行的回调函数。

也许添加一个失败监听器会有所帮助：

```
$.getJSON(
    $($form).get(0).action + "?callback=?",
    $($form).serialize(),
    function (data) {
        if (data.Status === 400) {
            alert("Error: " + data.Message);
        } else { 
            // 200
            alert("Success: " + data.Message);
        }
    }
).error(function(data) {
    alert('have error http: ' + data);
}).complete(function(data){
    alert('have complete: ' + data);
}); 
```

更新：

也可能与 JSON 错误有关。从[API 文档](http://api.jquery.com/jQuery.getJSON/)：

> 重要提示：从 jQuery 1.4 开始，如果 JSON 文件包含语法错误，请求通常会静默失败。

切换到`$.get(...)`通话可能会测试这一理论。

# javascript - 如何取消绑定特定键的事件

> ID：13927107
> 
> 赞同：0
> 
> 时间：2012-12-18T05:53:48.957
> 
> 标签：javascript, jquery-events

我怀疑我正在使用的一些 jQuery 插件通过绑定特定的事件来干扰我的键盘箭头按键。

假设我不在乎破坏他们正在做的任何事情，我怎样才能解除所有事件的绑定，例如，左右箭头键按下？

如何调试或查看按键时触发的事件列表？（我不知道哪些代码行当前正在处理按键，如果有的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:14:54.397

您可以取消绑定，而不会影响其他绑定的按键事件：

```
$(document).unbind("keypress.key37");
$(document).unbind("keypress.key39"); 
```

这称为[命名空间事件](http://docs.jquery.com/Namespaced_Events)`<event_name>.<namespace>`，即使用（在您的情况下为“keypress.key37 & keypress.key39”）标记特定绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:56:35.327

如果当您聚焦页面上的任何位置时触发箭头键，则事件处理程序可能已绑定到窗口或文档，解绑如下：

```
$(window).unbind('keydown');
$(document).unbind('keydown'); 
```

如果您只想为“左”或“右”箭头键取消绑定事件，您可以像这样停止事件：

```
$(window).bind('keydown', function(e){
    switch(e.keyCode) {
        case 37: // left arrow
            e.preventDefault;
            e.stopPropagation;
            break;
        case 39: // right arrow
            e.preventDefault;
            e.stopPropagation;
            break;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:06:24.880

我建议调试以查找这些事件的绑定位置（或者即使它们已绑定）。如果这些与 jQuery 绑定，它们将可以通过 .data(); 查看。

例如，在控制台中：

```
$('.suspected.element').data().events 
```

如果关键事件确实是某个插件的原因，我会考虑修改事件的绑定，而不是添加解决方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-02-12T03:14:43.353

```
function stopRKey(evt) {
      var evt = (evt) ? evt : ((event) ? event : null);
      var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement :null);
      if ((evt.keyCode == 13) && (node.type=="text"))  {return false;}
}
document.onkeypress = stopRKey; 
```

# android - 如何在android中打开存储在我的应用程序数据文件夹中的文档

> ID：13927108
> 
> 赞同：0
> 
> 时间：2012-12-18T05:53:50.393
> 
> 标签：android

我有一个文档文件存储在我的应用程序的数据文件夹中，这是应用程序的一种私有文件夹。它是一个 .doc 文件。我在设备中安装了文档查看器应用程序。现在，如何使用 Action_view 意图打开文件。由于查看器应用程序无法访问存储在我的应用程序数据文件夹中的文件，因此它会抛出一个错误，指出无法访问文件。我没有兴趣将文件复制到 sdcard 等电话公共文件夹。反正有没有打开那个doc文件。关于在 android 中嵌入 apk 的任何线索。

感谢和问候，

苏曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:02:56.047

你不能直接这样做。将文件临时复制到 SD 卡（外部存储）或将权限*临时*设置为`WORLD_READABLE`. Android 中没有嵌入式 APK，但如果查看器可作为库使用，您可以将其包含在您的应用中。当然，临时更改权限的问题是，当用户完成查看时，您并没有真正得到通知，等等。

整个事情引出了一个问题：如果它需要由第三方应用程序查看，为什么它是一个私有文件？如果它是为设备的用户设计的，那么向他们隐藏它没有多大意义......

# sql - Teradata 中的导入问题

> ID：13927114
> 
> 赞同：0
> 
> 时间：2012-12-18T05:54:19.973
> 
> 标签：sql, teradata

我在 .csv 文件中有一个单元格值“80/90”。

使用 sql 助手导入 Teradata 时，该值显示为“？”。

给定列的数据类型是 CV（字符可变长度）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-24T07:53:09.853

如果您在 excel 和表格（您在其中插入数据）中将字段数据类型更改为文本，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:35:32.793

使用 varchar 作为数据类型而不是 CV。

# c++ - 为什么禁止在后续的私有派生类中简单提及基指针/引用？

> ID：13927116
> 
> 赞同：14
> 
> 时间：2012-12-18T05:54:50.567
> 
> 标签：c++, compiler-errors, language-lawyer

```
struct B {};
struct D : private B {
  B* fun () { return new D; }  // ok
}
struct DD : public D {
  B* foo () { return 0; } // error: ‘struct B B::B’ is inaccessible !
}; 
```

这个错误对我来说似乎不合理。如果我们可以在全局范围内使用 simple`B*`那么为什么不能在其私有派生类中使用呢？[g++ 演示](http://ideone.com/ZFJdQU)。

我们不会尝试转换`DD*`为`B*`，这是语言规则所禁止的（[this](https://stackoverflow.com/questions/9661936/inheritance-a-is-an-inaccessible-base-of-b)，[this](https://stackoverflow.com/questions/4847100/c-inheritance-inaccessible-base)，[this](https://stackoverflow.com/questions/3674876/why-is-this-not-allowed-in-c)是相关问题）。
请注意，如果我更改`B* foo()`为`int foo()`，一切都会好起来的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T06:02:56.300

所以显然编译器认为`B`是指私有构造函数`B`而不是类型。

排位赛`B`显然修复了这个错误：

```
class B* foo () { return 0; } 
```

或这个：

```
::B* foo () { return 0; } 
```

我不知道为什么会这样，但也许这会有所帮助。

* * *

更新：也许它与标准的 11.2.4 有关？唯一的问题是我的标准语言不够好，无法完全理解。

![](../Images/710ed2d8bf0b735043ae3d451d2a92c2.png)

（对不起图片，复制/粘贴对我不起作用）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T07:45:51.517

在标准中快速查找*注入类名称*会产生：

> **§11.1 [class.access.spec]**
> 
> **5/** [*注意：*在派生类中，基类名称的查找将找到注入的类名称，而不是在声明它的范围内的基类名称。在声明它的范围内，注入的类名可能比基类的名称更难访问。*——尾注*]
> 
> *[ 例子：*
> 
> ```
> class A { };
> class B : private A { };
> class C : public B {
>     A *p; // error: injected-class-name A is inaccessible
>     ::A *q; // OK
> }; 
> ```
> 
> *—结束示例]*

我相信这与您的示例非常接近；）

* * *

注意 clang 3.0 的堆栈，它稍微更明确：

```
$ clang++ -fsyntax-only test.cpp
test.cpp:6:5: error: 'B' is a private member of 'B'
    B* foo () { return 0; } // error: ‘struct B B::B’ is inaccessible !
    ^
test.cpp:2:12: note: constrained by private inheritance here
struct D : private B {
           ^~~~~~~~~
test.cpp:1:8: note: member is declared here
struct B {};
       ^
1 error generated. 
```

在这里我们看到`B`是通过 访问`D`，而不是直接在全局命名空间中获取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:14:26.280

我最好的猜测是它不是被禁止的，C++ 根本看不到该语句中的 B 类型，或者更好的说法是标签`B`没有任何意义。

一些很好的阅读

*   [http://eli.thegreenplace.net/2012/02/06/dependent-name-lookup-for-c-templates/](http://eli.thegreenplace.net/2012/02/06/dependent-name-lookup-for-c-templates/)
*   [https://stackoverflow.com/a/7376212/1797612](https://stackoverflow.com/a/7376212/1797612)
*   [C++ 名称解析（和重载）规则列表](https://stackoverflow.com/questions/7374588/list-of-c-name-resolution-and-overloading-rules/7376212#comment8901983_7374588)

# python - 让 os.path.join 与生成器一起工作？

> ID：13927122
> 
> 赞同：1
> 
> 时间：2012-12-18T05:55:22.550
> 
> 标签：python

试图让这行代码工作，无论我如何更改格式，我都会遇到问题：

```
if not os.path.exists(os.path.join(IncludeSettings.FILE_URL, [str(x) for x in [year, month, day]])): 
```

（年、月、日）可以是整数或字符串。

追溯：

```
Traceback (most recent call last):
  File "/home/tinyup/dev/lib/python2.7/site-packages/pyramid_debugtoolbar-1.0.3-py2.7.egg/pyramid_debugtoolbar/toolbar.py", line 117, in toolbar_tween
    response = _handler(request)
  File "/home/tinyup/dev/lib/python2.7/site-packages/pyramid_debugtoolbar-1.0.3-py2.7.egg/pyramid_debugtoolbar/panels/performance.py", line 55, in resource_timer_handler
    result = handler(request)
  File "/home/tinyup/dev/lib/python2.7/site-packages/pyramid-1.4a3-py2.7.egg/pyramid/tweens.py", line 20, in excview_tween
    response = handler(request)
  File "/home/tinyup/dev/lib/python2.7/site-packages/pyramid-1.4a3-py2.7.egg/pyramid/router.py", line 161, in handle_request
    response = view_callable(context, request)
  File "/home/tinyup/dev/lib/python2.7/site-packages/pyramid-1.4a3-py2.7.egg/pyramid/config/views.py", line 342, in rendered_view
    result = view(context, request)
  File "/home/tinyup/dev/lib/python2.7/site-packages/pyramid-1.4a3-py2.7.egg/pyramid/config/views.py", line 456, in _class_requestonly_view
    response = getattr(inst, attr)()
  File "/home/tinyup/dev/tinyuploads/tinyuploads/views/share.py", line 56, in view_process
    return self.handle_file_upload(self.request.params['file'], shareID)
  File "/home/tinyup/dev/tinyuploads/tinyuploads/views/share.py", line 101, in handle_file_upload
    self.save(file, newFileName, isImage, uploadTime)
  File "/home/tinyup/dev/tinyuploads/tinyuploads/views/share.py", line 166, in save
    if not os.path.exists(os.path.join(IncludeSettings.FILE_URL, [str(x) for x in [year, month, day]])):
  File "/home/tinyup/dev/lib/python2.7/posixpath.py", line 66, in join
    if b.startswith('/'):
AttributeError: 'list' object has no attribute 'startswith' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T06:01:10.147

您在这里缺少“*”：

```
>>> os.path.join('foo', *['a','b'])
'foo/a/b' 
```

您必须在此处使用星号运算符才能将列表项作为解压缩的变量参数列表传递给方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:23:55.863

@user1833746 首先得到了答案，所以如果您接受其中任何一个，请接受那个:)

除了解包之外，如果您不打算使用结果列表，您可以将`[`'s更改`(`为使其成为真正的生成器（而不是创建一个列表然后迭代它）。操作符“`*`解包”，这意味着项目的各个组件将被传递给函数。正如您在下面的代码中看到的，`os.path.join`接受“两个”参数：（`a`路径名）和`*p`（任意数量的路径组件）。如您所见，您可以使用此语法提供任意数量的附加路径名参数（即没有固定`path_component1`的`path_component2`变量）。在您的情况下，一旦您获得了值的生成器，您就可以将它们“解包”为单个值（而不是单个值`list`或`generator`对象），这`os.path.join`函数然后处理：

```
In [1]: import os

In [2]: os.path.join('/home/myname', *(str(x) for x in ('one', 'two', 'three')))
Out[2]: '/home/myname/one/two/three'

In [3]: os.path.join??
Type:           function
Base Class:     <type 'function'>
String Form:    <function join at 0x7f4944c31a28>
Namespace:      Interactive
File:           /usr/lib/python2.6/posixpath.py
Definition:     os.path.join(a, *p)
Source:
def join(a, *p):
    """Join two or more pathname components, inserting '/' as needed.
    If any component is an absolute path, all previous path components
    will be discarded."""
    path = a
    for b in p:
        if b.startswith('/'):
            path = b
        elif path == '' or path.endswith('/'):
            path +=  b
        else:
            path += '/' + b
    return path 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:01:32.450

在前面加上 *`[str(x) for x in [year, month, day]]`

`*[str(x) for x in [year, month, day]]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T06:04:04.020

```
if not os.path.exists(os.path.join(IncludeSettings.FILE_URL, str(year), str(month), str(day))): 
```

为了可读性：

```
fname = os.path.join(IncludeSettings.FILE_URL, str(year), str(month), str(day))
if not os.path.exists(fname): 
```

# php - 如何从 PHP 中使用 file_get_contents() 函数获得的内容中检索特定数据？

> ID：13927124
> 
> 赞同：0
> 
> 时间：2012-12-18T05:55:22.953
> 
> 标签：php, json, google-maps

我的代码是

```
$result = file_get_contents("http://maps.googleapis.com/maps/api/geocode/json?address=".$stateName.",".$districtName.",".$cityName."&sensor=true"); 
```

其中`$stateName`, `$districtName`,`$cityName`是用户给出的值
输入*Kerala*、*Ernakulam*、*Angamaly*作为*stateName*、*DistrictName*和*cityName 后*，我得到如下结果：

```
{
    "results": [
        {
            "address_components": [
                {
                    "long_name": "Angamaly",
                    "short_name": "Angamaly",
                    "types": [
                        "locality",
                        "political"
                    ]
                },
                {
                    "long_name": "Ernakulam",
                    "short_name": "Ernakulam",
                    "types": [
                        "administrative_area_level_2",
                        "political"
                    ]
                },
                {
                    "long_name": "Kerala State",
                    "short_name": "Kerala State",
                    "types": [
                        "administrative_area_level_1",
                        "political"
                    ]
                },
                {
                    "long_name": "India",
                    "short_name": "IN",
                    "types": [
                        "country",
                        "political"
                    ]
                }
            ],
            "formatted_address": "Angamaly, Kerala State, India",
            "geometry": {
                "bounds": {
                    "northeast": {
                        "lat": 10.2464704,
                        "lng": 76.39544959999999
                    },
                    "southwest": {
                        "lat": 10.1585335,
                        "lng": 76.3500451
                    }
                },
                "location": {
                    "lat": 10.212894,
                    "lng": 76.380601
                },
                "location_type": "APPROXIMATE",
                "viewport": {
                    "northeast": {
                        "lat": 10.2464704,
                        "lng": 76.39544959999999
                    },
                    "southwest": {
                        "lat": 10.1585335,
                        "lng": 76.3500451
                    }
                }
            },
            "types": [
                "locality",
                "political"
            ]
        }
    ],
    "status": "OK"
} 
```

我需要这个地方的纬度和经度。如何从**geometry->bounds->northeast检索****lat**和**lng**？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:59:06.933

```
$json = file_get_contents("http://maps.googleapis.com/maps/api/geocode/json?address=".$stateName.",".$districtName.",".$cityName."&sensor=true");

$response = json_decode($json);
echo $response->results[0]->geometry->bounds->northeast->lat;
echo $response->results[0]->geometry->bounds->northeast->lng; 
```**

# c# - ReSharper 添加注册指令做错事

> ID：13927126
> 
> 赞同：0
> 
> 时间：2012-12-18T05:55:38.837
> 
> 标签：c#, asp.net, resharper

ReSharper (7.1.25.234) 在添加寄存器指令时做错了。

1.  创造`/Controls/ComplexField.ascx`
2.  在`APageWithABunchOfFields.aspx`中，指的是新控件：

    ```
    <%@ Page Title="A page with a bunch of fields" Language="C#" MasterPageFile="~/Layouts/Site.Master" %>
    <myproj:ComplexField runat="server" /> 
    ```

3.  ReSharper 提供生成一个`<%@ Register %>`指令，这会导致：

    ```
    <%@ Page Title="A page with a bunch of fields" Language="C#" MasterPageFile="~/Layouts/Site.Master" %>
    <%@ Register TagPrefix="myproj" Namespace="MyProject.Controls" Assembly="MyProject" %>
    <myproj:ComplexField runat="server" /> 
    ```

问题是，它不会找到或执行`ComplexField.ascx`（请注意，虽然`ComplexField`实例确实被构建了）。ReSharper*应该*生成的是：

```
<%@ Page Title="A page with a bunch of fields" Language="C#" MasterPageFile="~/Layouts/Site.Master" %>
<%@ Register TagPrefix="myproj" TagName="ComplexField" Src="~/Controls/ComplexField.ascx" %>
<myproj:ComplexField runat="server" /> 
```

换句话说，ReSharper 是通过命名空间而不是源路径注册控件。`ComplexField.ascx`ReSharper 导致的问题是加载页面时ASP.NET 不执行文件！

这是 ReSharper 中的错误/缺失功能还是我对 Register 指令的理解有问题？

# android - 如何将相机图像保存在不同的文件夹中

> ID：13927127
> 
> 赞同：0
> 
> 时间：2012-12-18T05:55:36.607
> 
> 标签：android, camera, gallery

这是我的源代码，当单击浏览按钮从图库中拍照或使用相机拍摄时提供两个选项我怎么做到的？

```
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.Toast;

public class AddEditCountry extends Activity {
 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;
 private EditText Donedate;
 private EditText Notes;
 private EditText Person;
 private  ImageView imageView1;
public  static Bitmap yourSelectedImage = null;
public static byte[] blob = null;
private final int CAMERA_PICTURE = 1;
private final int GALLERY_PICTURE = 2;
private Intent pictureActionIntent = null;
//public static        byte[] blob = new byte[2048];

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.Address);
      capEt = (EditText) findViewById(R.id.Stage);
      codeEt = (EditText) findViewById(R.id.Dueby);

      Donedate = (EditText) findViewById(R.id.Donedate);

      Notes = (EditText) findViewById(R.id.Notes);
      Person = (EditText) findViewById(R.id.Person);

      imageView1 = (ImageView) findViewById(R.id.imageView1);
      Button Browse = (Button) findViewById(R.id.Browse);
      Browse.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {               
        //      Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        //      intent.setType("image/*");
         //     startActivityForResult(intent, 0);

                startDialog();
            }
        });        

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         Donedate.setText(extras.getString("Location"));  
         Notes.setText(extras.getString("Notes")); 
         Person.setText(extras.getString("Person")); 
         }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new  
 AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {

//     byte[] blob = new byte[2048];

       ByteArrayOutputStream outStr = new ByteArrayOutputStream();
       yourSelectedImage.compress(CompressFormat.JPEG, 100, outStr);
        blob = outStr.toByteArray();

      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  codeEt.getText().toString(),
                  Donedate.getText().toString(),
                  Notes.getText().toString(),
                  Person.getText().toString()
                  ,blob
                  );
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(), 
            codeEt.getText().toString(), 
            Donedate.getText().toString(),
         Notes.getText().toString(),
          Person.getText().toString()
          , blob
         );
      }
   }

   @Override
   protected void onActivityResult(int requestCode, int resultCode, Intent  
    imageReturnedIntent) {
       super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

       if (requestCode == GALLERY_PICTURE) {
            Uri uri = imageReturnedIntent.getData();
            if (uri != null) {
                // User had pick an image.
                Cursor cursor = getContentResolver().query(uri, new String[]  
     {  android.provider.MediaStore.Images.ImageColumns.DATA }, null, null, null);
                cursor.moveToFirst();
                final String imageFilePath = cursor.getString(0);
                File photos = new File(imageFilePath);
                yourSelectedImage = decodeFile(photos);
                yourSelectedImage =  
    Bitmap.createScaledBitmap(yourSelectedImage, 150, 150, true);
                imageView1.setImageBitmap(yourSelectedImage);
                cursor.close();
            }
            else {
                Toast toast = Toast.makeText(this, "No Image is selected.",  
   Toast.LENGTH_LONG);
                toast.show();
            }
        }
        else if (requestCode == CAMERA_PICTURE) {
            if (imageReturnedIntent.getExtras() != null) {
                // here is the image from camera
                yourSelectedImage = (Bitmap)  
  imageReturnedIntent.getExtras().get("data");
                imageView1.setImageBitmap(yourSelectedImage);
            }
        }
    }
   private Bitmap decodeFile(File f) {
        try {
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            while (true) {
                if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < 
 REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale++;
            }

            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null,  
   o2);
        }
        catch (FileNotFoundException e) {
        }
        return null;
    }

    private void startDialog() {
        AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(this);
        myAlertDialog.setTitle("Upload Pictures Option");
        myAlertDialog.setMessage("How do you want to set your picture?");

        myAlertDialog.setPositiveButton("Gallery", new 
  DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                pictureActionIntent = new Intent(Intent.ACTION_GET_CONTENT,  
  null);
                pictureActionIntent.setType("image/*");
                pictureActionIntent.putExtra("return-data", true);
                startActivityForResult(pictureActionIntent, GALLERY_PICTURE);
            }
        });

        myAlertDialog.setNegativeButton("Camera", new  
  DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                pictureActionIntent = new  
  Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(pictureActionIntent, CAMERA_PICTURE);
            }
        });
        myAlertDialog.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:01:56.233

试试这个 ：：

```
 private void SelectPhotoFromCamera() 
    {
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        File file = new File(Environment.getExternalStorageDirectory(),
                "/DCIM" + ".jpg");

           if(file.isDirectory()) 
           {
                 //DO SOMETHING
           }                   
           else
           {
                  //DO SOMETHING
           }   
        outputFileUri = Uri.fromFile(file);

        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
        startActivityForResult(intent, SELECT_PICTURE_CAMERA);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:09:18.643

看看这个帖子，也有类似的问题。您需要使用媒体扫描仪。 [Android - 为什么我保存的图像没有出现在手机的默认图库中？](https://stackoverflow.com/questions/11552014/android-why-my-saved-image-is-not-appearing-in-the-default-gallery-of-my-phone)

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.Bitmap.CompressFormat;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Environment;

public class ImageSaver {
    private String TAG = "ImageSaver";
    private Context context;
    private String FILENAME_LEADER = "bijintokei";
    private String DOWNLOAD_FOLDER = "download";
    private String STORAGE_DESTINATION = "/sdcard";
    private CompressFormat COMPRESS_FORMAT = CompressFormat.JPEG;

    /**
     * Return file extension
     * 
     * @return
     */
    private String getFileExtention() {
        String result = "bmp";
        if (COMPRESS_FORMAT.equals(CompressFormat.JPEG)) {
            result = "jpg";
        }
        if (COMPRESS_FORMAT.equals(CompressFormat.PNG)) {
            result = "png";
        }
        return result;
    }

    /**
     * Constructor
     * 
     * @param context
     */
    public ImageSaver(Context context) {
        this.context = context;
    }

    /**
     * Return appropriate file path for saving
     * 
     * @param hhmm
     * @return File path
     */
    public String getFilePath4Saving(String hhmm) {
        String fileName = "", destination = this.getDefaultLocation(), filePath = "";
        int i = 0;
        File file;
        do {
            fileName = getMixedFileName(hhmm, i++);
            filePath = String.format("%s/%s", destination, fileName);
            file = new File(filePath);
        } while (file.exists());
        Log.d(TAG, "File path for saving: " + filePath);
        return filePath;

    }

    /**
     * Return a mixed file name from: - FILENAME_LEADER - Specified time - Order
     * number
     * 
     * @param hhmm
     * @param i
     * @return
     */
    private String getMixedFileName(String hhmm, int i) {
        String fileName = String.format("%s%s", FILENAME_LEADER, hhmm);
        String extension = getFileExtention();
        String result = String.format("%s.%s", fileName, extension);
        if (i > 0) {
            result = String.format("%s-%d.%s", fileName, i, extension);
        }
        return result;
    }

    /**
     * Make sure Download folder is exists in the specified path
     */
    private boolean MakeSureFolderIsExists(String path, String folder) {
        File file = new File(path + "/" + folder);
        boolean result = true;
        if (!file.exists()) {
            result = file.mkdir();
            Log.d(TAG,
                    "Create folder " + path + "/" + folder + ": "
                            + Boolean.toString(result));
        }
        return result;
    }

    /**
     * Return default location for saving image
     * 
     * @return By default return external storage
     */
    private String getDefaultLocation() {
        String result = this.STORAGE_DESTINATION;
        if (MakeSureFolderIsExists(result, DOWNLOAD_FOLDER)) {
            result = result + "/" + DOWNLOAD_FOLDER;
        }
        return result;
    }

    /**
     * Save bitmap for hhmm minute to default destination
     * 
     * @param bitmap
     * @param hhmm
     * @throws IOException
     */
    public void saveImage(Bitmap bitmap, String hhmm) throws IOException {
        Log.d(TAG, "Saving image: " + hhmm);
        String filePath = getFilePath4Saving(hhmm);
        File fo = new File(filePath);
        FileOutputStream out = new FileOutputStream(fo);
        bitmap.compress(CompressFormat.JPEG, 100, out);
        out.flush();
        out.close();
        requestMediaScannerRefesh();
    }

    /**
     * Require Media Scanner refresh
     */
    private void requestMediaScannerRefesh() {
        context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri
                .parse("file://" + Environment.getExternalStorageDirectory())));
    }
    public static Bitmap decodeFile(File f,int screenHeight,
            int screenWidth){
        Bitmap b = null;
        try {

            //Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;

            FileInputStream fis = new FileInputStream(f);
            BitmapFactory.decodeStream(fis, null, o);
            fis.close();

            int scale = 1;
            if (o.outHeight > screenHeight || o.outWidth > screenWidth) {
                scale = (int)Math.pow(2, (int) Math.round(Math.log(screenHeight / (double) Math.max(o.outHeight, o.outWidth)) / Math.log(0.5)));
            }

            //Decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            fis = new FileInputStream(f);
            b = BitmapFactory.decodeStream(fis, null, o2);
            fis.close();
        } catch (IOException e) {
        }
        return b;
    }
} 
```

# java - 如何在java中的特定时间和日期启动进程？

> ID：13927130
> 
> 赞同：1
> 
> 时间：2012-12-18T05:55:55.187
> 
> 标签：java

我想从用户那里获取开始和结束时间，日期并从用户开始处理器开始时间和日期并结束到结束时间和日期。我如何在 TimerTask 中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:15:49.367

我会远离 Timers 和 TimerTasks，而是使用`Executors.newScheduledThreadPool`

参考[https://stackoverflow.com/a/409993/628943](https://stackoverflow.com/a/409993/628943)

如果您正在寻找更高级别的 api，您可以使用 Quartz，或者如果您使用 Spring，您可以使用`@Scheduled`annotation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:15:40.477

主线程可以简单地休眠直到开始时间。

之后，让主线程启动一个 TimerTask，计划在结束时间激活，并开始执行它的工作。检查每个循环的线程是否被中断。

TimerTask 的工作是中断主线程。

所以当 TimerTask 激活时，它会中断主线程。由于其线程被中断，主线程将退出其作业执行循环。

# python - Python在遍历列表后删除列表中的一半元素

> ID：13927132
> 
> 赞同：0
> 
> 时间：2012-12-18T05:56:00.320
> 
> 标签：python, list, python-2.7

我完全被这个难住了：

我有以下python代码：

```
def remove(self, widgets):
    for widget in widgets:
        widget_found = False
        for widget_sig in self.widgets:
            if widget_sig.id == widget:
                #remove all objects from selected widget
                widget_found = True
                to_remove = widget_sig.objs
                for obj in to_remove:
                    #objs are all intances of oo_canvas classes
                    obj.destroy()
                    self._build(widget, obj)
        if not widget_found:
            #if we iterated through the entire list and still couldn't find anything
            raise mockingbird_errs.InternalMockingbirdError("The requested widget was not registered with this builder: "+str(widget)) 
```

这应该很简单。问题是，它永远不会正确地遍历 to_remove。出于某种原因，它会跳过所有其他元素。更令人费解的是，如果我让它在 for 循环之前和之后打印 to_remove 的长度，它会打印 254 和 127。嗯？据我所知，遍历列表并不涉及删除所有其他元素。

我错过了一些简单的东西吗？到底是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T06:04:31.740

> ...它跳过所有其他元素。

那是因为您不断删除它们，将列表缩短 1。然后您继续前进到下一个索引。要么向后工作，要么迭代列表的副本。

# core-data - 当 NSOrderedSet 中的新对象收到 -awakeFromInsert 消息时，关系为（空）

> ID：13927133
> 
> 赞同：2
> 
> 时间：2012-12-18T05:56:03.220
> 
> 标签：core-data, nsmanagedobject, nsarraycontroller

当用户按下添加按钮时，以下`-awakeFromInsert`实现设置由 UI 中的数组控制器实例化的新对象的属性：

```
- (void)awakeFromInsert
{
    [super awakeFromInsert];
    NSLog(@"Adding perceptron %ld to layer %ld", self.indexInLayer, self.layer.indexInNetwork);
    NSLog(@"New perceptron added to layer %@", self.layer );
    // more code here to do the configuration
} 
```

问题是`self.parent`新对象的关系在`-awakeFromInsert`被调用时没有设置（它是 nil）所以我不能用它来访问父对象（例如有多少孩子或新对象是什么索引）。

上述代码的输出：

```
2012-12-17 21:36:39.309 MLPManager[98112:403] Adding perceptron 0 to layer 0
2012-12-17 21:36:39.309 MLPManager[98112:403] New perceptron added to layer (null) 
```

我很确定新对象已正确连接，因为`indexInLayer`当`UITableView`调用它以将对象的索引添加到视图时，该方法可以正常工作：

```
- (NSUInteger)indexInLayer
{
    NSUInteger index = [self.layer.perceptrons indexOfObject:self];
    //NSLog(@"indexInLayer returning %ld", index );
    return index;
} 
```

我的数据模型有三个实体：网络、层、感知器排列为有序集，并通过一对多关系（即父-子-孙）连接到下一个。我的 UI 有三个数组控制器和三个`UITableViews`. 我已将其设置为子数组控制器仅包含选定父项的子项，而孙子数组控制器仅包含选定子项的孙子项。当我将子或孙子添加到这些数组控制器时，它们会自动设置为当前选定父级的子级。这一切都很好。

`self.layer`UI在什么时候设置？有人可以确认这是在之后发生的`-awakeFromInsert`吗？如果是这样，如果我不能从内部配置一个新对象，我应该如何配置`-awakeFromInsert`？我注意到 Apple 文档`-awakeFromInsert`说它“在接收器首次插入托管对象上下文时由 Core Data 框架自动调用”。

我需要有关层对象和数据结构其他部分的信息的原因是，我需要同时自动实例化各种其他对象（作为感知器子级的权重）作为新的感知器对象。我应该使用`-awakeFromInsert`这些类型的任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T01:26:52.500

首先，您的代码中似乎存在模型 ( `NSManagedObject`) 和视图 ( `UITableView`) 对象之间的耦合。根据模型-视图-控制器设计模式，不建议这样做。

`layer`并且`indexInLayer`不是标准属性，`NSManagedObject`所以我假设这些是您实体中的属性。作为在 中进行设置的替代方法`awakeFromInsert`，我想知道您是否可以为您的属性实现自己的 setter 方法，以便您可以在所需数据可用时进行必要的工作。

如果您选择实现自己的 setter 方法，则需要遵循 Apple 在[Managed Object Accessor Methods](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html)文档中的指导，具体而言：

> 您必须确保调用相关的访问和更改通知方法（willAccessValueForKey:、didAccessValueForKey:、willChangeValueForKey:、didChangeValueForKey:、willChangeValueForKey:withSetMutation:usingObjects: 和 didChangeValueForKey:withSetMutation:usingObjects:）。

我不知道为什么`layer`并且`indexInLayer`在您的`awakeFromInsert`方法中不可用；您可能需要解决该问题。

# java - Ant 电子邮件错误：需要身份验证

> ID：13927134
> 
> 赞同：1
> 
> 时间：2012-12-18T05:56:04.373
> 
> 标签：java, email, ant, selenium-webdriver

我无法通过 ant build 发送电子邮件。我收到以下错误：

```
Buildfile: C:\Users\madhur\workspace\TCLAutomation\build.xml
build-subprojects:
init:
build-project:
     [echo] Hello Hi in build
     [echo] TCLAutomation: C:\Users\madhur\workspace\TCLAutomation\build.xml
    [javac] C:\Users\madhur\workspace\TCLAutomation\build.xml:32: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
build:
email-testng:
     [echo] ---------------------------
     [echo] SMTP Server..:  smtp.gmail.com
     [echo] Subject......:  TestNG Report for Date and time 18/December/2012 :(10:56:53)
     [echo] Message File.:  C:\Users\madhur\workspace\TCLAutomation\test-output\emailable-report.html
     [echo] From.........:  tcl.testng.reports@gmail.com
     [echo] To...........:  tcl.testng.reports@gmail.com
     [echo] ---------------------------
     [mail] Sending email: TestNG Report for Date and time 18/December/2012 :(10:56:53)
     [mail] Failed to send email: 530-5.5.1 Authentication Required. Learn more at
     [mail] 530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 o11sm493273pby.8

BUILD FAILED
C:\Users\madhur\workspace\TCLAutomation\build.xml:132: Problem while sending mime mail:

Total time: 2 seconds 
```

构建脚本

```
<target description="Email the testng style format report." name="email-testng" >
                        <property name="report.type" value="TestNG" />
                        <tstamp>
                            <format property="HUMANDATE" pattern="dd/MMMM/yyyy :(HH:mm:ss)" />
                        </tstamp>
                        <property name="subject" value="${report.type} Report for Date and time ${HUMANDATE}" />

                             <echo>---------------------------</echo>
                             <echo>SMTP Server..:  smtp.gmail.com</echo>
                             <echo>Subject......:  ${subject}</echo>
                             <echo>Message File.:  ${basedir}\test-output\emailable-report.html</echo>
                             <echo>From.........:  tcl.testng.reports@gmail.com</echo>
                             <echo>To...........:  tcl.testng.reports@gmail.com</echo>
                             <echo>---------------------------</echo>

                    <zip destfile="${basedir}/PictorialReports.zip" basedir="${basedir}/testng-xslt" update="true"/>
                    <zip destfile="${basedir}/FailedCasesScreenShots.zip" basedir="${basedir}/ScreenShots" update="true"/>  

                    <mail mailhost="smtp.gmail.com" mailport="465" password="xxxxxxx" ssl="true" subject="${subject}" user="tcl.testng.reports@gmail.com">
                       <from address="tcl.testng.reports@gmail.com"></from>
                         <replyto address="tcl.testng.reports@gmail.com"></replyto>
                         <to address="tcl.testng.reports@gmail.com"></to>

                         <message>This is auto generated mail after completion of test case execution.The Reports of test cases executed.Download the attachments and keep all attachemnts in same folder.Double click on emailable-reports.html for results of executed test cases. Double click on index.html to view them in pie chart model.
                         </message>

                          <attachments>
                             <fileset dir="${basedir}/test-output">
                                 <include name="emailable-report.html"></include>
                              </fileset>
                            <fileset dir="${basedir}">
                                 <include name="PictorialReports.zip"></include>
                            </fileset>
                            <fileset dir="${basedir}">
                                 <include name="FailedCasesScreenShots.zip"></include>
                            </fileset>
                             </attachments>  

                          </mail>
                        </target> 
```

他们提供的链接没有帮助。我无法获得需要身份验证的问题。任何人都可以帮忙。谢谢。

# node.js - NodeJS 的 Web Sockets 服务器端实现

> ID：13927138
> 
> 赞同：5
> 
> 时间：2012-12-18T05:56:22.020
> 
> 标签：node.js, websocket, socket.io

这个问题的部分原因可能是客户端的讨论太多，我看不到树木的木材。

无论如何，这就是我想要做的。我需要一个独立于平台的 WebSockets 服务器端实现。我希望它在 NodeJS 中运行。

现在，我在这个主题上找到的 99% 的内容都是关于 socket.io 的。但据我所知，这不是 WebSockets，它本身就是一种特殊的“额外”协议。我需要一些“按（尚未）标准”工作的东西。这是有充分理由的，这是不可协商的，相信我。

所以，我尝试了 WebSocket，但这需要（或似乎需要 python，更糟糕的是，Visual Studio）在 Windows 上运行。我需要一些独立于平台的东西，不需要像这样的特殊东西。

我也尝试过 node-websocket-server，但我根本无法让它工作。主页上的示例对我来说失败了。它似乎接受了一个连接，但客户端看不到它，双方都无法发送任何内容，客户端立即将连接视为关闭。事实上，我得到的只是一个“连接”回调，然后它似乎死了。在调试模式下运行并没有告诉我任何有用的信息，除了一些关于某些对象或其他没有 flush() 方法的内部错误。我半怀疑这是一个已经失效的项目？

所以，我没有想法。是否有可能说服 socket.io 完全按照 WebSockets 的（非）规范工作？有没有办法让 node-websocket-server 表现出我找不到的行为。有没有办法绕过 websocket 中的 Visual Studio 依赖项，或者是否有其他一些基于 NodeJS 的工具可以满足我的所有要求？

哦，另一件事，我希望该工具与“连接”和平共处，因为我将它用于我的常规文档服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T07:58:36.373

*当我尝试在不同的平台上使用Socket.IO*时，我遇到了完全相同的问题，而没有客户端的直接端口（并且没有自己移植它的动机）。

我最终将我的代码移动到使用***ws***，这是一个基于标准的 websocket 节点实现，没有来自 socket.io 的添加糖。

在我的情况下，它在几个不同的平台上运行得非常好，但是您需要重新编写大部分连接/重新连接代码等。

网站：[链接](http://einaros.github.com/ws/)

GitHub：[链接](https://github.com/einaros/ws)

新PM：`npm install ws`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T00:53:01.213

Socket.io 在后台使用 WS，因此您可能会在 Windows 上遇到相同的安装问题。您可能会发现它抱怨您需要安装 Visual Studio 2010 才能使`ws`组件正常工作。

`node-gyp`但是，您可以通过环境变量配置运行 C++ 编译器所使用的 Visual Studio 版本。

例子：

*   `GYP_MSVS_VERSION=2012`为 Visual Studio 2012设置
*   设置`GYP_MSVS_VERSION=2013e`（“e”代表“特快版”）

有关完整列表，请参阅 - [https://github.com/joyent/node/blob/v0.10.29/tools/gyp/pylib/gyp/MSVSVersion.py#L209-294](https://github.com/joyent/node/blob/v0.10.29/tools/gyp/pylib/gyp/MSVSVersion.py#L209-294)

这对于 NodeJS 的 Windows 用户来说是一件痛苦的事情，因为它假定您安装了许多非开发最终用户永远不会拥有的 Visual Studio 的副本。所以我正在游说 Joyent 鼓励他们将 Web 套接字作为 CORE 节点的一部分，并将 GNU gcc 编译器作为 NodeJS 安装的一部分，这样我们就可以永久解决这个问题，而不必强迫 Windows 节点用户调整他们的环境或下载其他任何东西。

欢迎在以下位置添加您的投票：

*   [https://github.com/joyent/node/issues/8005#issuecomment-50545326](https://github.com/joyent/node/issues/8005#issuecomment-50545326)

注意：Joyent 团队表示 socket.io 将在编译`ws`失败时回退到使用较慢的实现。换句话说，您的代码仍将运行 - 只是没有那么快。对于执行依赖于 socket.io 或 ws 的任何应用程序安装的最终用户来说，这一点尚不清楚，因为它在安装过程中显示红色错误文本，导致用户认为安装失败，而实际上它会运行，尽管速度很慢。

# opengl - 我想使用 openStreetMap 数据在 openGL 中渲染道路，我应该从哪里开始？

> ID：13927142
> 
> 赞同：6
> 
> 时间：2012-12-18T05:56:28.183
> 
> 标签：opengl, maps, geocoding, openstreetmap

我想到的是用户将选择他/她想要生成道路并检索openStreetMap数据并使用它在openGL中渲染道路的世界部分。

在搜索网络和实验时，我想到了这种方法：

1.  获取所选地图的xml文件
2.  解析xml并通过openGL生成道路。

但我认为这是非常幼稚的做法。

另外为了试验一下，我使用 OSM2WorldViewer 将 xml 文件转换为 obj 文件并将其作为模型导入到 openGL 中，但是这种方法很麻烦并且需要时间

![截图](../Images/0b251bce54fb9a8350617faa0071c76f.png)

而且我不熟悉 OpenStreetMap api 以及如何在这样的项目中使用它。任何建议或有用的链接如何开始这个项目？

编辑：它是如何结束的：[链接到项目 wiki](https://wiki.openstreetmap.org/wiki/3D-mapland)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T07:41:09.727

为什么你认为你的方法很幼稚？您要么让用户提供一个自行下载的 XML 文件，要么您必须使用 API 自己检索一个。后一种方法允许您在用户平移地图时实现自动更新机制。

您可以使用[Overpass API](http://wiki.openstreetmap.org/wiki/Overpass_API)来代替[主 API](http://wiki.openstreetmap.org/wiki/API)来下载数据。它使用起来更快、更灵活，允许指定要下载的元素类型（例如仅道路和建筑物）等等。

您已经提到[过 OSM2World](http://osm2world.org/)，请查看其免费提供的代码以查看 3D OpenGL 渲染器的示例实现。或者查看OSM的其他[3D 渲染器之一。](http://wiki.openstreetmap.org/wiki/Rendering#3D_Rendering)

# python - 使用 IronPython2.7 计算特征值和特征向量

> ID：13927150
> 
> 赞同：4
> 
> 时间：2012-12-18T05:57:12.117
> 
> 标签：python, python-2.7, ironpython, eigenvector, eigenvalue

这可能是 IronPython 用户经常遇到的问题。但我是 python 新手。

我希望使用 IronPython2.7 计算大约 50x50 矩阵的特征值和特征向量我探索了使用 Numpy 和 Scipy 的可能性，但 IronPython 不支持它们。

有没有更好的方法来实现我的要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T22:34:04.060

[IronPython 的 Sho](http://research.microsoft.com/en-us/downloads/19418d96-6e47-440f-b70d-9ad5c93a79b9/default.aspx)是 Microsoft 提供的一个很好的环境，它确实提供了你想要的东西。我很高兴它对你有用。

引用链接本身

> Sho 是一个数据游乐场：一组库和一个用于快速原型设计、数据分析和可视化的交互式环境。

Sho 中的线性代数类确实提供了多种计算特征值的函数，如[Sho 书中](http://research.microsoft.com/en-us/um/redmond/projects/sho/documentation/sho2.0/TheBookofSho.html#_Toc282280647)所示。

# clearcase - 我应该使用什么 clearcase 命令来让谁最后签到？

> ID：13927154
> 
> 赞同：1
> 
> 时间：2012-12-18T05:57:28.137
> 
> 标签：clearcase, clearcase-ucm, cleartool

我是 ClearCase 的新手，我需要让谁最后签入特定文件（即：最新版本）。

我知道文件的绝对路径。
您建议我使用什么命令来访问该文件的用户（即最新版本的创建者）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:17:15.637

尝试：

```
cleartool descr -l /path/to/file 
```

如果您的视图已经选择了最新版本，那就足够了。

您还可以使用**[`fmt_ccase`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)**仅隔离您需要的信息：

```
cleartool descr -fmt "%u" /path/to/file 
```

如果您查看未选择`LATEST`版本（您可以通过`cleartool ls`在父目录中执行 a 来检查，并查看那里显示的选择规则），您可以使用扩展路径名来推断其 LATEST 路径：

```
cleartool descr -fmt "%u" /path/to/file@@/main/branch/subBranch/LATEST 
```

[在“ clearcase latest version of a file on a specific branch](https://stackoverflow.com/questions/12140611/clearcase-latest-version-of-a-file-on-a-particular-branch/12140897#12140897) ”中查看更多信息，以便*找到*您想要的确切扩展路径。

# java - java utf-8 用法

> ID：13927156
> 
> 赞同：0
> 
> 时间：2012-12-18T05:57:39.147
> 
> 标签：java, utf-8

今天我为朋友制作了一个 URDu（类似阿拉伯语的语言）的记事本编辑器......我想出的代码很长，我认为这不是正确的方法，特别是其中的 Switch Cases.. 有吗在 JFrame->JTextPanel 上直接写入 UTF-8 字符的任何其他方式

```
import java.io.*;
import javax.swing.*;
import java.awt.*;
import java.util.regex.*;
import java.awt.event.*;
class MyJFrames extends JFrame implements ActionListener{
private JTextArea txt;
private JMenuBar mb;
private JMenu file=new JMenu("File"); 
private JMenu edit=new JMenu("Edit");  
private JMenu format=new JMenu("Format"); 
private JMenuItem open;
private JMenuItem save;
private JMenuItem saveAs;
private JMenuItem exit;
private JMenuItem find;
private JMenuItem findAndReplace;
private JCheckBoxMenuItem wrap;
private JMenuItem font;
private JScrollPane pane=null;
private MyFiling mf=new MyFiling();
private static String fileName;
private static int saveValue=0;
private JComboBox fontCombo;
private Font ffont;
MyJFrames(){
    super("Urdu Notepad");
        mb=new JMenuBar();
    txt = new JTextArea();
    txt.setFont(new Font("Arial",1,30));
    txt.setWrapStyleWord(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    txt.grabFocus();
    txt.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
    open=new JMenuItem("Open"); 
    save=new JMenuItem("Save"); 
    saveAs=new JMenuItem("Save As"); 
    exit=new JMenuItem("Exit");
    find=new JMenuItem("Find");
    findAndReplace=new JMenuItem("Replace");
    wrap=new JCheckBoxMenuItem("Wrap");
    font=new JMenuItem("Font");
    file.add(open);
    file.add(save);
    file.add(saveAs);
    file.add(exit);
    edit.add(find);
    edit.add(findAndReplace);
    format.add(wrap);
    format.add(font);
    mb.add(file);
    mb.add(edit);
    mb.add(format);
    pane=new JScrollPane(txt);
    setJMenuBar(mb);
    add(pane);
    txt.addKeyListener(new keyAdapterOnText());
    open.addActionListener(this);
    save.addActionListener(this);
    saveAs.addActionListener(this);
    exit.addActionListener(this);
    find.addActionListener(this);
    findAndReplace.addActionListener(this);
    wrap.addActionListener(this);
    font.addActionListener(this);
    setSize(600,600);
    setVisible(true);

}

private class keyAdapterOnText extends KeyAdapter{
keyAdapterOnText(){
}
public void keyTyped(KeyEvent key){
char enter=key.getKeyChar();
key.consume();
String st=txt.getText();
switch(enter){
case 'a':
    txt.setText(st+"\u0627");
    break;
case 'b':
txt.setText(st+"\u0628");
break;
case 'c':
txt.setText(st+"\u0686");
break;
case 'd':
txt.setText(st+"\u062F");
break;
case 'e':
txt.setText(st+"\u0639");
break;
case 'f':
txt.setText(st+"\u0641");
break;
case 'g':
txt.setText(st+"\u06AF");
break;
case 'h':
txt.setText(st+"\u06BE");
break;
case 'i':
txt.setText(st+"\u064A");
break;
case 'j':
txt.setText(st+"\u062C");
break;
case 'k':
txt.setText(st+"\u06A9");
break;
case 'l':
txt.setText(st+"\u0644");
break;
case 'm':
txt.setText(st+"\u0645");
break;
case 'n':
txt.setText(st+"\u0646");
break;
case 'o':
txt.setText(st+"\u0665");
break;
case 'p':
txt.setText(st+"\u067E");
break;
case 'q':
txt.setText(st+"\u0642");
break;
case 'r':
txt.setText(st+"\u0631");
break;
case 's':
txt.setText(st+"\u0633");
break;
case 't':
txt.setText(st+"\u062A");
break;
case 'u':
txt.setText(st+"\u0674");
break;
case 'v':
txt.setText(st+"\u0637");
break;
case 'w':
txt.setText(st+"\u0648");
break;
case 'x':
txt.setText(st+"\u0634");
break;
case 'y':
txt.setText(st+"\u06D2");
break;
case 'z':
txt.setText(st+"\u0632");
break;
case 'A':
txt.setText(st+"\u0622");
break;
case 'B':
txt.setText(st+"\u0628");
break;
case 'C':
txt.setText(st+"\u062B");
break;
case 'D':
txt.setText(st+"\u0688");
break;
case 'E':
txt.setText(st+"\u0639");
break;
case 'F':
txt.setText(st+"\u0641");
break;
case 'G':
txt.setText(st+"\u063A");
break;
case 'H':
txt.setText(st+"\u062D");
break;
case 'I':
txt.setText(st+"\u0627");
break;
case 'J':
txt.setText(st+"\u0636");
break;
case 'K':
txt.setText(st+"\u062E");
break;
case 'L':
txt.setText(st+"\u0644");
break;
case 'M':
txt.setText(st+"\u0627");
break;
case 'N':
txt.setText(st+"\u06BA");
break;
case 'O':
txt.setText(st+"\u0629");
break;
case 'P':
txt.setText(st+"\u0654");
break;
case 'Q':
txt.setText(st+"\u0642");
break;
case 'R':
txt.setText(st+"\u0691");
break;
case 'S':
txt.setText(st+"\u0635");
break;
case 'T':
txt.setText(st+"\u0679");
break;
case 'U':
txt.setText(st+"\u0621");
break;
case 'V':
txt.setText(st+"\u0638");
break;
case 'W':
txt.setText(st+"\u0648");
break;
case 'Y':
txt.setText(st+"\u06D2");
break;
case 'Z':
txt.setText(st+"\u0630");
break;
case ' ':
txt.setText(st+" ");
break;
}
}
}
public void actionPerformed(ActionEvent e){
    String title=e.getActionCommand();
    if(title.compareTo("Open")==0){
        JFileChooser chooser= new JFileChooser();
        chooser.showOpenDialog(this);
        String path= chooser.getSelectedFile().getAbsolutePath();
        if(path!=null){
            txt.setText("YOU selected file path = "+path);
            try{
                mf.showFile(path);
            }catch(IOException eX){
                System.out.println(" EXCEPTION CAUGHT "+eX);
            }
        }
    }
    else if(title.compareTo("Save")==0){
        if(saveValue==0){
            JFileChooser chooser= new JFileChooser();
            int option=chooser.showSaveDialog(this);
            File file=chooser.getSelectedFile();
            fileName=file.getName();
            System.out.println("saveD and option = "+option+" filename "+fileName);
            if(option==0){
                try{
                    mf.saveFile(txt.getText(),fileName);
                    saveValue=1;
                }catch(Exception exe){;}
            }
            else{;}             
        }
        else{
            try{
                mf.saveFile(txt.getText(),fileName);
            }catch(Exception exe){
                System.out.println(" EXCEPTION CAUGHT "+exe);
            }
        }
    }
    else if(title.compareTo("Save As")==0){
        JFileChooser chooser= new JFileChooser();
        int option=chooser.showSaveDialog(this);
        File file=chooser.getSelectedFile();
        fileName=file.getName();
        System.out.println("saved and option = "+option+" filename "+fileName);
        if(option==0){
            try{
                mf.saveFile(txt.getText(),fileName);
            }catch(Exception exe){;}
        }
    }
    else if(title.compareTo("Exit")==0){
        setVisible(false);
        System.exit(0);
    }
    else if(title.compareTo("Find")==0){
        String inputValue = JOptionPane.showInputDialog("Find");
        if(inputValue!=null){
            String currentText=txt.getText();
            if(currentText.toLowerCase().contains(inputValue.toLowerCase())){
                JOptionPane.showMessageDialog(this, "String FOUND ");
            }
            else
                JOptionPane.showMessageDialog(this, "String NOT FOUND ");
        }
    }
    else if(title.compareTo("Replace")==0){
        String findValue = JOptionPane.showInputDialog("Find");
        String currentText;
        if(findValue!=null){
            currentText=txt.getText();
            if(currentText.toLowerCase().contains(findValue.toLowerCase())){
                String replaceValue = JOptionPane.showInputDialog("Replace");
                String replaceText = currentText.replace(findValue,replaceValue);
                txt.setText(replaceText);
            }
            else
                JOptionPane.showMessageDialog(this, "STRING IS NOT FOUND ");
        }
    }
    else if(title.compareTo("Wrap")==0){
        if(wrap.getState()){
            txt.setLineWrap(true);
        }
        else{
            txt.setLineWrap(false);
        }
    }

}
private class MyFiling{
    public void showFile(String path)throws IOException{
        File f=new File(path);
        FileInputStream fst=new FileInputStream(f);
        int i=0;
        String text="";
        while((i=fst.read())!=-1){
            text=text+(char)i;
        }
        txt.setText(text);
        fst.close();
    }
    public void saveFile(String text,String name)throws Exception{
        name=name+".txt";
        FileOutputStream out=new FileOutputStream(name);
        out.write(text.getBytes());
        out.close();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:07:54.557

您在读取/写入文件时遇到问题，而不是 JTextArea。

请使用`Reader`/`Writer`来读取或写入文本文件。以正确的编码使用它们，一切都应该没问题。在内部，java 使用 UTF-16，转换应该由 a`Reader`或 a完成`Writer`。

目前，您正在从流中读取字节并尝试将它们视为几乎总是会导致错误的字符。

# codeigniter - 无法发送电子邮件 Codeigniter

> ID：13927159
> 
> 赞同：1
> 
> 时间：2012-12-18T05:57:49.403
> 
> 标签：codeigniter, ssl, smtp, sendmail

我正在尝试发送电子邮件当我将它放在服务器上时它在本地主机上正常工作它给我警告我正在使用 codeigniter 这是代码

公共函数 send_me($from,$name,$toEmail,$subject,$msg){

```
 $config = Array(
        'protocol'  => 'smtp',
        'smtp_host' => 'ssl://smtp.googlemail.com',
        'smtp_port' => 465,
        'smtp_user' => 'xxxxxxxxxxx',//user name herer
        'smtp_pass' => 'xxxxxxxx', //password hre
        'mailtype'  => 'html',
        'charset'   => 'iso-8859-1',
        'wordwrap'  => TRUE
    );
    $this->load->library('email', $config);
    $this->email->set_newline("\r\n");
    $this->email->from($from,$name);
    $this->email->to($toEmail);//to address here
    $this->email->subject($subject);
    $this->email->message($msg);
    if($this->email->send())
        return true;
    else
        return false;
} 
```

和警告是

遇到 PHP 错误

严重性：警告

消息：fsockopen() [function.fsockopen]：无法连接到 ssl://smtp.googlemail.com:465（连接超时）

文件名：库/Email.php

行号：1689 遇到 PHP 错误

严重性：警告

消息：fwrite() 期望参数 1 是资源，给定的布尔值

文件名：库/Email.php

行号：1846

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-02T17:32:56.860

我已经回答了几个像这样的问题。如果您的本地电子邮件工作正常，请按照以下步骤操作：

要在 CodeIgniter 中使用 Google SMTP，您需要对您的 Gmail 帐户设置进行 2（两）次更改：（*注意请注意，现在攻击者更容易侵入您的帐户 - Google 说）*

> 1.  启动**两步验证**。
> 2.  **允许不太安全的应用程序**：开（或启用）

现在使用`'smtp_host'`as`ssl://smtp.gmail.com`而不是`smtp.googlemail.com`

希望即将到来的用户也能得到这个帮助。

# apache - 带有两个参数的 URL 转发

> ID：13927162
> 
> 赞同：1
> 
> 时间：2012-12-18T05:58:06.823
> 
> 标签：apache, .htaccess, url, web, lamp

这是我当前的 .htaccess

```
 RewriteEngine On
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule ^([0-9a-zA-Z-]+)/?$ index.php?u=$1 [L]
   RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
   RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

它将**www.example.com**转换为example.com**并将****example.com/username**解释为**example.com/index.php?u=username**

 **现在我想传递第二个参数，例如**example.com/index.php?u=username&e=email**并且仍然保持格式**example.com/arg1&arg2**。我如何在 .htaccess 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:06:47.827

首先，您需要在路由规则*之前移动重定向：*

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

然后，您要检查 2 参数路由：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9a-zA-Z-]+)/([^/]+)/?$ /index.php?u=$1&e=$2 [L,QSA] 
```

（这假定 URL 看起来像: `http://example.com/username/emailaddress`，但如果你真的想要`&`分隔它们，请改用此规则：

```
RewriteRule ^([0-9a-zA-Z-]+)&([^/]+)/?$ /index.php?u=$1&e=$2 [L,QSA] 
```

这假设一个 URL 看起来像：`http://example.com/username&emailaddress`

现在你原来的规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9a-zA-Z-]+)/?$ /index.php?u=$1 [L,QSA] 
```**

# javascript - 使用可拖动的 Jquery 将拖放/附加功能应用到 JSTreegraph

> ID：13927165
> 
> 赞同：7
> 
> 时间：2012-12-18T05:58:11.487
> 
> 标签：javascript, jquery, jquery-ui

我正在使用[JSTreegraph](http://jstreegraph.codeplex.com/)插件来绘制树结构。但是现在我需要一个拖放和附加功能，其中我可以拖动树的任何节点并附加到任何其他节点，随后第一个节点的所有子节点现在将成为新节点的孙子节点（它被附上）。

据我所知，这个插件似乎没有这个功能。它只是根据传递给它的数据对象绘制结构。

该插件基本上将一个类分配给`Node`树的所有节点（div），并将另一个类`NodeHover`分配给悬停时的节点。没有`id`分配给这些 div。

所以我尝试使用 JQuery Draggable 来查看是否可以通过这样做来移动任何节点

```
$('.Node').draggable();
$('.NodeHover').draggable(); 
```

但它似乎不起作用。所以任何人都可以帮我解决这个问题。

如何获得拖放功能？

****编辑:: 请****原谅我不太喜欢使用 Fiddle，所以我在这里分享一个示例代码供您使用：* *

**HTML 文件：**将绘制示例树

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <link href="css/JSTreeGraph.css" rel="stylesheet" type="text/css" />
  <script src="js/JSTreeGraph.js" type="text/javascript"></script>
  <script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
  <script src="js/jquery.ui.position.js" type="text/javascript"></script>
  <style type="text/css">
     .Container {
       position: absolute;
      top: 100px;
      left: 50px;
       id: Container; 
    }

 </style>
</head>
<body>
    <div id="tree">
        Ctrl+Click to Add Node
        <br />
        Double Click to Expand or Collapse
        <br />
        Shift+Click to Delete Node
        <br />
        <select id="dlLayout" onchange="ChangeLayout()">
            <option value="Horizontal">
                Horizontal
            </option>
            <option value="Vertical" selected>
                Vertical
            </option>
        </select>
        <div class="Container" id="dvTreeContainer"></div>

        <script type="text/javascript">

    var selectedNode;
    // Root node
    var rootNode = { Content: "Onida", Nodes:[] };

    // First Level
    rootNode.Nodes[0] = { Content: "Employee Code", navigationType: "0"};
    rootNode.Nodes[1] = { Content: "Problem Area", navigationType: "1"  };

    // Second Level
    rootNode.Nodes[1].Nodes = [{ Content : "ACC-HO", Collapsed: true /* This node renders collapsed */ }, 
                               { Content : "ACC-SALES" },
                               { Content : "BUSI. HEAD",   /*This node looks different*/ ToolTip: "Click ME!" },
                               { Content : "CEO"},
                               { Content : "HO-ADMIN"},
                               { Content : "HO-FACTORY"},
                               { Content : "SALES"}];

    // Third Level
    rootNode.Nodes[1].Nodes[0].Nodes = [{ Content: "Billing" },
                                        { Content: "Credit Limit" },
                                        { Content: "Reconciliation" }];

    rootNode.Nodes[1].Nodes[1].Nodes = [{ Content: "Billing" },
                                        { Content: "Others" }];

    rootNode.Nodes[1].Nodes[2].Nodes = [{ Content: "AC" },
                                        { Content: "CTV" },
                                        { Content: "DVD" },
                                        { Content: "Washing Machine" }];

    rootNode.Nodes[1].Nodes[6].Nodes = [{ Content: "Appointments" },
                                        { Content: "Resignations" },
                                        { Content: "Others" }];

    // Draw the tree for the first time
    RefreshTree();

    function RefreshTree() {
        DrawTree({ Container: document.getElementById("dvTreeContainer"),
                    RootNode: rootNode,
                    Layout: document.getElementById("dlLayout").value,
                    OnNodeClickFirefox: NodeClickFF,
                    OnNodeClickIE: NodeClickIE,
                    OnNodeDoubleClick: NodeDoubleClick
                    });
    }

    //function 
    function NodeClickFF(e) {
        if (e.shiftKey){
            // Delete Node
            if (!this.Node.Collapsed) {
                for(var index=0; index<this.Node.ParentNode.Nodes.length; index++) {
                    if(this.Node.ParentNode.Nodes[index].Content == this.Node.Content) {
                        this.Node.ParentNode.Nodes.splice(index, 1);
                        break;
                    }
                }
               RefreshTree();
            }
                // return false;
        }
        else if (e.ctrlKey) {
            // Add new Child if Expanded                    
            if (!this.Node.Collapsed) {
                if (!this.Node.Nodes) this.Node.Nodes = new Array();
                var newNodeIndex = this.Node.Nodes.length;
                this.Node.Nodes[newNodeIndex] = new Object();
                this.Node.Nodes[newNodeIndex].Content = this.Node.Content + "." + (newNodeIndex + 1);
                RefreshTree();
            }
                // return false;
        }
        else{
            fnNodeProperties(this.Node);
        }
    }

    function NodeClickIE() {
        if (typeof(event) == "undefined" && event.ctrlKey) {
            // Add new Child if Expanded
            if (!this.Node.Collapsed) {
                if (!this.Node.Nodes) this.Node.Nodes = new Array();
                var newNodeIndex = this.Node.Nodes.length;
                this.Node.Nodes[newNodeIndex] = new Object();
                this.Node.Nodes[newNodeIndex].Content = this.Node.Content + "." + (newNodeIndex + 1);
                RefreshTree();
            }
        }
        else if (typeof(event) == "undefined" && event.shiftKey) {
            // Delete Node
            if (!this.Node.Collapsed) {
                for(var index=0; index<this.Node.ParentNode.Nodes.length; index++) {
                    if(this.Node.ParentNode.Nodes[index].Content == this.Node.Content) {
                        this.Node.ParentNode.Nodes.splice(index, 1);
                        break;
                    }
                }
                RefreshTree();
            }
        }
        else{
            fnNodeProperties(this.Node);
        }
    }        

    function NodeDoubleClick() {
        if (this.Node.Nodes && this.Node.Nodes.length > 0) { // If has children
            this.Node.Collapsed = !this.Node.Collapsed;
            RefreshTree();
        }
    }

    function ChangeLayout() {

        RefreshTree();
    }

</script>
    </div>
</body>
</html> 
```

**JSTreeGraph JS文件**：插件js文件

```
function DrawTree(options) {

// Prepare Nodes
PrepareNode(options.RootNode);

// Calculate Boxes Positions
if (options.Layout == "Vertical") {
    PerformLayoutV(options.RootNode);
} else {
    PerformLayoutH(options.RootNode);
}

// Draw Boxes
options.Container.innerHTML = "";
DrawNode(options.RootNode, options.Container, options);

// Draw Lines
DrawLines(options.RootNode, options.Container);
}

 function DrawLines(node, container) {
if ((!node.Collapsed) && node.Nodes && node.Nodes.length > 0) { // Has children and Is Expanded
    for (var j = 0; j < node.Nodes.length; j++) {
        if(node.ChildrenConnectorPoint.Layout=="Vertical")
            DrawLineV(container, node.ChildrenConnectorPoint, node.Nodes[j].ParentConnectorPoint);
        else
            DrawLineH(container, node.ChildrenConnectorPoint, node.Nodes[j].ParentConnectorPoint);

        // Children
        DrawLines(node.Nodes[j], container);
    }
}
}

 function DrawLineH(container, startPoint, endPoint) {
    var midY = (startPoint.Y + ((endPoint.Y - startPoint.Y) / 2)); // Half path between start en end Y point

    // Start segment
    DrawLineSegment(container, startPoint.X, startPoint.Y, startPoint.X, midY, 1);

    // Intermidiate segment
    var imsStartX = startPoint.X < endPoint.X ? startPoint.X : endPoint.X; // The lower value will be the starting point
    var imsEndX = startPoint.X > endPoint.X ? startPoint.X : endPoint.X; // The higher value will be the ending point
    DrawLineSegment(container, imsStartX, midY, imsEndX, midY, 1);

    // End segment
    DrawLineSegment(container, endPoint.X, midY, endPoint.X, endPoint.Y, 1);
 }

  function DrawLineV(container, startPoint, endPoint) {
var midX = (startPoint.X + ((endPoint.X - startPoint.X) / 2)); // Half path between start en end X point

// Start segment
DrawLineSegment(container, startPoint.X, startPoint.Y, midX, startPoint.Y, 1);

// Intermidiate segment
var imsStartY = startPoint.Y < endPoint.Y ? startPoint.Y : endPoint.Y; // The lower value will be the starting point
var imsEndY = startPoint.Y > endPoint.Y ? startPoint.Y : endPoint.Y; // The higher value will be the ending point
DrawLineSegment(container, midX, imsStartY, midX, imsEndY, 1);

// End segment
DrawLineSegment(container, midX, endPoint.Y, endPoint.X, endPoint.Y, 1);
}

function DrawLineSegment(container, startX, startY, endX, endY, lineWidth) {

var lineDiv = document.createElement("div");
lineDiv.style.top = startY + "px";
lineDiv.style.left = startX + "px";

if (startX == endX) { // Vertical Line
    lineDiv.style.width = lineWidth + "px";
    lineDiv.style.height = (endY - startY) + "px";
}
else{ // Horizontal Line
    lineDiv.style.width = (endX - startX) + "px";
    lineDiv.style.height = lineWidth + "px";
}

lineDiv.className = "NodeLine";
container.appendChild(lineDiv);
}

function DrawNode(node, container, options) {
var nodeDiv = document.createElement("div");
nodeDiv.style.top  = node.Top + "px";
nodeDiv.style.left = node.Left + "px";
nodeDiv.style.width = node.Width + "px";
nodeDiv.style.height = node.Height + "px";

if (node.Collapsed) {
    nodeDiv.className = "NodeCollapsed";
} else {
    nodeDiv.className = "Node";
}

if (node.Class) 
    nodeDiv.className = node.Class;

if (node.Content)
    nodeDiv.innerHTML = "<div class='NodeContent'>" + node.Content + "</div>";

if (node.ToolTip)
    nodeDiv.setAttribute("title", node.ToolTip);

nodeDiv.Node = node;

// Events
if (options.OnNodeClickIE){
    //alert('OnNodeClick');
    nodeDiv.onclick = options.OnNodeClickIE;        
}
// Events
if (options.OnNodeClickFirefox){
    //alert('OnNodeClick');
    nodeDiv.onmousedown = options.OnNodeClickFirefox;        
}
//on right click
if (options.OnContextMenu){
        //alert('OnContextMenu');
        nodeDiv.oncontextmenu = options.OnContextMenu;
     }

if (options.OnNodeDoubleClick)
    nodeDiv.ondblclick = options.OnNodeDoubleClick;

nodeDiv.onmouseover = function () { // In
    this.PrevClassName = this.className;
    this.className = "NodeHover";
};

nodeDiv.onmouseout = function () { // Out
    if (this.PrevClassName) {
        this.className = this.PrevClassName;
        this.PrevClassName = null;
    }
};

container.appendChild(nodeDiv);

// Draw children
if ((!node.Collapsed) && node.Nodes && node.Nodes.length > 0) { // Has Children and is Expanded
    for (var i = 0; i < node.Nodes.length; i++) {
        DrawNode(node.Nodes[i], container, options);
    }
}
}

function PerformLayoutV(node) {

var nodeHeight = 30;
var nodeWidth = 100;
var nodeMarginLeft = 40;
var nodeMarginTop = 20;

var nodeTop = 0; // defaultValue 

// Before Layout this Node, Layout its children
if ((!node.Collapsed) && node.Nodes && node.Nodes.length > 0) {
    for (var i = 0; i < node.Nodes.length; i++) {
        PerformLayoutV(node.Nodes[i]);
    }
}

if ((!node.Collapsed) && node.Nodes && node.Nodes.length > 0) { // If Has Children and Is Expanded

    // My Top is in the center of my children
    var childrenHeight = (node.Nodes[node.Nodes.length - 1].Top + node.Nodes[node.Nodes.length - 1].Height) - node.Nodes[0].Top;
    nodeTop = (node.Nodes[0].Top + (childrenHeight / 2)) - (nodeHeight / 2);

    // Is my top over my previous sibling?
    // Move it to the bottom
    if (node.LeftNode && ((node.LeftNode.Top + node.LeftNode.Height + nodeMarginTop) > nodeTop)) {
        var newTop = node.LeftNode.Top + node.LeftNode.Height + nodeMarginTop;
        var diff = newTop - nodeTop;
        /// Move also my children
        MoveBottom(node.Nodes, diff);
        nodeTop = newTop;
    }

} else {
    // My top is next to my top sibling
    if (node.LeftNode)
        nodeTop = node.LeftNode.Top + node.LeftNode.Height + nodeMarginTop;
}

node.Top = nodeTop;

// The Left depends only on the level
node.Left = (nodeMarginLeft * (node.Level + 1)) + (nodeWidth * (node.Level + 1));
// Size is constant
node.Height = nodeHeight;
node.Width = nodeWidth;

// Calculate Connector Points
// Child: Where the lines get out from to connect this node with its children
var pointX = node.Left + nodeWidth;
var pointY = nodeTop + (nodeHeight/2);
node.ChildrenConnectorPoint = { X: pointX, Y: pointY, Layout: "Vertical" };
// Parent: Where the line that connect this node with its parent end
pointX = node.Left;
pointY = nodeTop + (nodeHeight/2);
node.ParentConnectorPoint = { X: pointX, Y: pointY, Layout: "Vertical" };
}

function PerformLayoutH(node) {

var nodeHeight = 30;
var nodeWidth = 100;
var nodeMarginLeft = 20;
var nodeMarginTop = 50;

var nodeLeft = 0; // defaultValue 

// Before Layout this Node, Layout its children
if ((!node.Collapsed) && node.Nodes && node.Nodes.length>0) {
    for (var i = 0; i < node.Nodes.length; i++) {
        PerformLayoutH(node.Nodes[i]);
    }
}

if ((!node.Collapsed) && node.Nodes && node.Nodes.length > 0) { // If Has Children and Is Expanded

    // My left is in the center of my children
    var childrenWidth = (node.Nodes[node.Nodes.length-1].Left + node.Nodes[node.Nodes.length-1].Width) - node.Nodes[0].Left;
    nodeLeft = (node.Nodes[0].Left + (childrenWidth / 2)) - (nodeWidth / 2);

    // Is my left over my left node?
    // Move it to the right
    if(node.LeftNode&&((node.LeftNode.Left+node.LeftNode.Width+nodeMarginLeft)>nodeLeft)) {
        var newLeft = node.LeftNode.Left + node.LeftNode.Width + nodeMarginLeft;
        var diff = newLeft - nodeLeft;
        /// Move also my children
        MoveRigth(node.Nodes, diff);
        nodeLeft = newLeft;
    }
} else {
    // My left is next to my left sibling
    if (node.LeftNode) 
        nodeLeft = node.LeftNode.Left + node.LeftNode.Width + nodeMarginLeft;
}

node.Left = nodeLeft;

// The top depends only on the level
node.Top = (nodeMarginTop * (node.Level + 1)) + (nodeHeight * (node.Level + 1));
// Size is constant
node.Height = nodeHeight;
node.Width = nodeWidth;

// Calculate Connector Points
// Child: Where the lines get out from to connect this node with its children
var pointX = nodeLeft + (nodeWidth / 2);
var pointY = node.Top + nodeHeight;
node.ChildrenConnectorPoint = { X: pointX, Y: pointY, Layout:"Horizontal" };
// Parent: Where the line that connect this node with its parent end
pointX = nodeLeft + (nodeWidth / 2);
pointY = node.Top;
node.ParentConnectorPoint = { X: pointX, Y: pointY, Layout: "Horizontal" };
}

function MoveRigth(nodes, distance) {
for (var i = 0; i < nodes.length; i++) {
    nodes[i].Left += distance;
    if (nodes[i].ParentConnectorPoint) nodes[i].ParentConnectorPoint.X += distance;
    if (nodes[i].ChildrenConnectorPoint) nodes[i].ChildrenConnectorPoint.X += distance;
    if (nodes[i].Nodes) {
        MoveRigth(nodes[i].Nodes, distance);
    }
}
}

function MoveBottom(nodes, distance) {
for (var i = 0; i < nodes.length; i++) {
    nodes[i].Top += distance;
    if (nodes[i].ParentConnectorPoint) nodes[i].ParentConnectorPoint.Y += distance;
    if (nodes[i].ChildrenConnectorPoint) nodes[i].ChildrenConnectorPoint.Y += distance;
    if (nodes[i].Nodes) {
        MoveBottom(nodes[i].Nodes, distance);
    }   
}
}

function PrepareNode(node, level, parentNode, leftNode, rightLimits) {

if (level == undefined) level = 0;
if (parentNode == undefined) parentNode = null;
if (leftNode == undefined) leftNode = null;
if (rightLimits == undefined) rightLimits = new Array();

node.Level = level;
node.ParentNode = parentNode;
node.LeftNode = leftNode;

if ((!node.Collapsed) && node.Nodes && node.Nodes.length > 0) { // Has children and is expanded
    for (var i = 0; i < node.Nodes.length; i++) {
        var left = null;
        if (i == 0 && rightLimits[level]!=undefined) left = rightLimits[level];
        if (i > 0) left = node.Nodes[i - 1];
        if (i == (node.Nodes.length-1)) rightLimits[level] = node.Nodes[i];
        PrepareNode(node.Nodes[i], level + 1, node, left, rightLimits);
    }
}
} 
```

**JSTreeGraph CSS 文件：**

```
.NodeContent
{
font-family:Verdana;
font-size:small;
}

.Node 
{
position:absolute;
background-color: #CCDAFF;
border: 1px solid #5280FF;
text-align:center;
vertical-align:middle;
cursor:pointer;
overflow:hidden;
}

.NodeHover
{
position:absolute;
background-color: #8FADFF;
border: 1px solid #5280FF;
text-align:center;
vertical-align:middle;
cursor:pointer;
overflow:hidden;
}

.NodeCollapsed
{
position:absolute;
background-color: #8FADFF;
border: 2px solid black;
text-align:center;
vertical-align:middle;
cursor:pointer;
overflow:hidden;
}

.NodeLine
{
background-color: #000066;
position:absolute;
overflow:hidden;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:03:52.680

我想你需要的是建立一个机制来修改你的拖拽树逻辑结构，然后重新加载整个树元素。这样，插件将呈现您修改后的新结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:43:50.083

这不是一个简单的问题，您还没有概述确切的规格。

*   当你移动一个节点时，所有的子节点都应该跟着它移动吗？
*   删除/附加节点时，节点及其子元素会发生什么？

您使用的插件可以很好地绘制静态树，但它不是以允许动态编辑树的方式编写的。

我必须同意@Bardo，因为使这项工作满足您的需求的最简单方法是了解树是如何被操纵的。（谢天谢地，该插件似乎提供了一个`onNodeClick`选项，可以让您了解您打算操作哪个节点）。一旦对树进行了操作，就必须完全重新绘制它。（似乎没有部分绘制树的好方法）。

# actionscript-3 - 标签中的粗体文本

> ID：13927167
> 
> 赞同：0
> 
> 时间：2012-12-18T05:58:19.603
> 
> 标签：actionscript-3, flex4, itemrenderer

我在 datagrid 的 itemRenderer 中使用标签并根据验证显示标签。我需要将标签显示为粗体。为此，我给出了 fontWeight="bold"; 它不起作用，字体粗细显示正常而不是粗体。有没有其他方法可以让文本字体为粗体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:51:24.680

试试这个 yourLabelObject.setStyle('fontWeight','bold');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:35:29.397

在 itemrenderer 的 set data() 方法中试试这个。

```
if (lblStatus)
{
    lblStatus.fontWeight= getStyle("fontWeight");
} 
```

愿这对你有帮助..

# delphi - MessageBoxEx 停止更新操作

> ID：13927170
> 
> 赞同：3
> 
> 时间：2012-12-18T05:58:48.150
> 
> 标签：delphi, delphi-7

我使用 Delphi 7，我的项目有几种非模态可见形式。问题是如果在其中一个 MessageBoxEx 被调用，则应用程序的所有操作都不会更新，直到 MessageBoxEx 的表单关闭。在我的项目中，它可能会破坏应用程序的业务逻辑。

TApplication.HandleMessage 方法在显示 MessageBoxEx 的窗口时永远不会被调用，因此它不会调用 DoActionIdle 并且不会更新操作。

我认为我需要的是在应用程序空闲时捕获它的状态并更新所有操作的状态。

首先我实现了 TApplication。OnIdle 处理程序：

```
procedure TKernel.OnIdle(Sender: TObject; var Done: Boolean);
begin
  {It’s only to switch off the standard updating from TApplication.Idle. It's to make the CPU usage lower while MessageBoxEx's window isn't shown }
 Done := False;
end;

implementation

var
  MsgHook: HHOOK;

{Here is a hook}
function GetMsgHook(nCode: Integer; wParam: Longint; var Msg: TMsg): Longint; stdcall;
var
  m: TMsg;
begin
  Result := CallNextHookEx(MsgHook, nCode, wParam, Longint(@Msg));
  if (nCode >= 0) and (_instance <> nil) then
  begin
    {If there aren’t the messages in the application's message queue then the application is in idle state.}
    if not PeekMessage(m, 0, 0, 0, PM_NOREMOVE) then
    begin
      _instance.DoActionIdle;
      WaitMessage;
    end;
  end;
end;

initialization
    MsgHook := SetWindowsHookEx(WH_GETMESSAGE, @GetMsgHook, 0, GetCurrentThreadID);

finalization
  if MsgHook <> 0 then
    UnhookWindowsHookEx(MsgHook); 
```

这是一种用于更新应用程序所有操作的状态的方法。它只是 TApplication.DoActionIdle 的修改版本：

```
type
  TCustomFormAccess = class(TCustomForm);

procedure TKernel.DoActionIdle;
var
  i: Integer;
begin
  for I := 0 to Screen.CustomFormCount - 1 do
    with Screen.CustomForms[i] do
      if HandleAllocated and IsWindowVisible(Handle) and
        IsWindowEnabled(Handle) then
        TCustomFormAccess(Screen.CustomForms[i]).UpdateActions;
end; 
```

状态的更新似乎比平时更频繁（我将使用分析器找出问题所在）。

此外，当鼠标光标不在应用程序的窗口上时，CPU 使用率会严重增加（在我的 DualCore Pentium 上约为 25%）。

您如何看待我的问题以及我尝试解决它的方式？使用钩子是个好主意还是有更好的方法来捕获应用程序空闲状态？在设置挂钩期间我是否需要使用 WH_CALLWNDPROCRET ？

为什么 MessageBoxEx 会阻止 TApplication.HandleMessage？有没有办法防止这种行为？我尝试使用 MB_APPLMODAL、MB_SYSTEMMODAL、MB_TASKMODAL 标志来调用它，但它没有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T06:40:04.477

`MessageBox/Ex()`是一个模态对话框，因此它在内部运行自己的消息循环，因为调用线程的正常消息循环被阻塞。 `MessageBox/Ex()`接收调用线程的消息队列中的任何消息，并将它们正常发送到目标窗口（因此基于窗口的计时器之类的东西仍然可以工作，例如`TTimer`），但是它的模态消息循环没有 VCL 特定消息的概念，例如行动更新，并将丢弃它们。 `TApplication.HandleMessage()`仅由主 VCL 消息循环、`TApplication.ProcessMessages()`方法和`TForm.ShowModal()`方法调用（这就是模态 VCL 窗体窗口不会遇到此问题的原因），在`MessageBox/Ex()`运行时均不会调用（对于任何 OS 模态也是如此对话）。

要解决您的问题，您有几个选择：

1.  `SetWindowsHookEx()`在调用之前通过设置线程本地消息挂钩，然后在退出`MessageBox/Ex()`后立即释放挂钩。`MessageBox/Ex()`这使您可以根据需要查看`MessageBox/Ex()`接收它们并将它们分派到 VCL 处理程序的每条消息。 **不要调用`PeekMessage()`，`GetMessage()`或`WaitMessage()`在消息挂钩内！**

    ```
    type
      TApplicationAccess = class(TApplication)
      end;

    function GetMsgHook(nCode: Integer; wParam: WPARAM; lParam: LPARAM): LRESULT; stdcall;
    var
      Msg: TMsg;
    begin
      if (nCode >= 0) and (wParam = PM_REMOVE) then
      begin
        Msg := PMsg(lParam)^;
        with TApplicationAccess(Application) do begin
          if (not IsPreProcessMessage(Msg))
            and (not IsHintMsg(Msg))
            and (not IsMDIMsg(Msg))
            and (not IsKeyMsg(Msg))
            and (not IsDlgMsg(Msg)) then
          begin
          end;
        end;
      end;
      Result := CallNextHookEx(MsgHook, nCode, wParam, lParam);
    end;

    function DoMessageBoxEx(...): Integer;
    var
      MsgHook: HHOOK;
    begin
      MsgHook := SetWindowsHookEx(WH_GETMESSAGE, @GetMsgHook, 0, GetCurrentThreadID);
      Result := MessageBoxEx(...);
      if MsgHook <> 0 then UnhookWindowsHookEx(MsgHook);
    end; 
    ```

2.  将`MessageBox/Ex()`调用移至单独的工作线程，以便调用线程可以正常处理消息。如果需要等待 的结果`MessageBox/Ex()`，例如提示用户输入时，则可以使用`MsgWaitForMultipleObjects()`等待线程终止，同时允许等待线程在`Application.ProcessMessages()`有待处理消息时调用。

    ```
    type
      TMessageBoxThread = class(TThread)
      protected
        procedure Execute; override;
        ...
      public
        constructor Create(...);
      end;

    constructor TMessageBoxThread.Create(...);
    begin
      inherited Create(False);
      ...
    end;

    function TMessageBoxThread.Execute;
    begin
      ReturnValue := MessageBoxEx(...);
    end;

    function DoMessageBoxEx(...): Integer;
    var
      Thread: TMessageBoxThread;
      WaitResult: DWORD;
    begin
      Thread := TMessageBoxThread.Create(...);
      try
        repeat
          WaitResult := MsgWaitForMultipleObjects(1, Thread.Handle, False, INFINITE, QS_ALLINPUT);
          if WaitResult = WAIT_FAILED then RaiseLastOSError;
          if WaitResult = WAIT_OBJECT_0 + 1 then Application.ProcessMessages;
        until WaitResult = WAIT_OBJECT_0;
        Result := Thread.ReturnVal;
      finally
        Thread.Free;
      end;
    end; 
    ```

# javascript - Netbeans 中用于 javascript 的代码折叠

> ID：13927171
> 
> 赞同：3
> 
> 时间：2012-12-18T05:58:52.077
> 
> 标签：javascript, jquery, netbeans-7

我最近才开始使用 Netbeans，我一直在使用 javascript 文件，这些文件变得越来越大，我希望能够在 Visual Studio 中对这样的功能进行分组，实际上是代码折叠。

> **#region**
> 代码在这里
> **#endregion**

搜索后我发现你可以使用

> **//<编辑器折叠> </编辑器折叠>**

[http://wiki.netbeans.org/FaqCustomCodeFolds](http://wiki.netbeans.org/FaqCustomCodeFolds)

但这不适用于 .js 文件，因为它被视为注释。

请告知，如何在 javascript 文件的 Netbean 中添加自定义代码折叠。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:24:51.393

**当前，当前编辑器的 javascript 文件不支持**自定义代码折叠。

 **但很快将在netbeans 官方发行版中的**新编辑器**
中实现， 这允许您编辑您的 javascript 文件，所有功能目前在其他编程语言中可用。

[新的 JavaScript 编辑器](https://blogs.oracle.com/netbeansphp/entry/new_javascript_editor)

***但是，如果您等不及了***，那么您可以下载[NetBeans 的开发版](http://bertram-tst.netbeans.org:8080/job/javascript2/lastSuccessfulBuild/artifact/nbbuild/NetBeans-dev-javascript2-783-on-20121205-full.zip) 实现新的编辑器，而不会丢失您当前的项目设置。

您还可以创建模板代码，以制作环绕块代码。
在此[链接](http://wiki.netbeans.org/SurroundWithCodeFolding)中进行了解释。

这是测试中的新编辑器

![在此处输入图像描述](../Images/9b27d11e7781c5c5786ddf7ceb481e84.png)**

# google-app-engine - google app angine模板：循环并检查对应实体是否存在

> ID：13927174
> 
> 赞同：0
> 
> 时间：2012-12-18T05:59:01.423
> 
> 标签：google-app-engine, templates

我需要创建一个 100 单元格的表格，并且在每个单元格中，如果相应的实体存在，则显示它的信息，否则，显示“空”。我怎么做？python程序（项目具有“seqNumber”和“name”的属性）：

```
query = db.Query(Item)
items = query.fetch(100)
render(..., {'range100':range(100), 'items':items}, ...) 
```

HTML：

```
<table>
<tr>
{% for i in range100 %}  <!-- for item in items (how?) -->
<td>
    {% if item.seqNumber == forloop.counter (how?) %}
      {{item.name}}
    {% else %}
      Empty
    {% endif %}
{% endfor %}
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:36:43.380

```
query = db.Query(Item)
items = query.fetch(100)
l = []
for i in enumerate(range(99)):
    try:
        l.append((i,items[i].name))
    except:
        l.append((i,None))

render(stuff = l) 
```

这一切都未经测试，try/except 无疑并不理想，只是更容易编写代码然后在评论中让您大致了解我将如何处理这个问题。

```
<table>
<tr>
{% for i in stuff %}  
<td>
      {{ i.0 }}<!-- ID -->
      {% if i.1 %}
      {{ i.1 }}<!-- value -->
    {% else %}<!-- if the value is none -->
      "VALUE NEEDED"
    {% endif %}
{% endfor %}
</tr>
</table> 
```

# iphone - 无法从 JSON 响应中提取密钥

> ID：13927181
> 
> 赞同：0
> 
> 时间：2012-12-18T05:59:44.713
> 
> 标签：iphone, ios, xcode, json

以下是有效的 JSON 响应：

```
**{
    "responseHeader": null,
    "cart": {
        "locale": "en_US",
        "currency": "USD",
        "purchaseRequestId": 0,
        "stuid": 0,
        "defaultHeaderLineLevels": {},
        "invalidMaterialIDs": [
            {
                "@class": "com.insight.web.domain.transaction.LineItem",
                "ewrFee": null,
                "name": null,
                "currency": null,
                "description": null,
                "categoryId": null,
                "poolID": null,
                "contractReportingFields": {},
                "selectedwarrantyDetails": null,
                "manufacturerName": null,
                "warrantyDetails": [],
                "vspp": false,
                "softwareLicense": false,
                "sourceContractId": null,
                "softwareLicenseType": "",
                "nonShipabble": false,
                "configured": false,
                "partnerID": null,
                "cartModifiedByConvertQuote": false,
                "stock": 0,
                "deletable": false,
                "duplicatable": false,
                "softwareLicensePhone": null,
                "softwareLicenseName": null,
                "zp00MaterialCategory": false,
                "quotedShippingPrice": null,
                "diversityPartners": [],
                "labFeesExists": false,
                "quoteConfigured": false,
                "quotedOrderConditions": null,
                "ruleID": ""
            },
            {
                "@class": "com.insight.web.domain.transaction.LineItem",
                "ewrFee": null,
                "name": null,
                "currency": null,
                "description": null,
                "selectPlus": false,
                "lineLevels": {},
                "materialID": "4434HE1-OPY",
                "materialIDKey": "",
                "isDiscontinued": false,
                "itemNumber": null,
                "quoteItemNumber": null,
                "price": 0,
                "quantity": 0,
                "materialCategory": null,
                "ruleID": ""
            }
        ],
        "webLoginProfile": null,
        "requestorGroupId": null,
        "defaultLineLevels": {},
        "totalCost": 0,
        "dpasCode": null,
        "orderedDate": null,
        "hasSPLAAndNonSPLAContracts": false,
        "cartItemsForEmail": [],

    },
    "materialIdKeyList": []
} 
```

要从中提取所有键，我使用递归函数将 JSON 响应作为字典对象“数据”传递：

```
 -(NSMutableDictionary *)recurse:(NSDictionary *)data counter:(NSInteger *)i parent:(NSString *)parent
    {
        self.mDict =   [NSMutableDictionary dictionary];

        for (NSString* key in [data allKeys])
        { 
            NSDictionary

 *value = [data objectForKey:key];

        if ([value isKindOfClass:[NSDictionary class]])
        {
            i++;
            NSDictionary *newDict = (NSDictionary*)value;
            [self recurse:newDict counter:i parent:key];
            [self.mDict setValue:value forKey:key];
            i--;
            if(i==0)
            {
                return self.mDict;
            }

        }
        else if([value isKindOfClass:[NSArray class]])
        {
            // loop through the NSArray and traverse any dictionaries found
            NSArray *a = (NSArray *)value;
            for(id child in a)
            {
                if([child isKindOfClass:[NSDictionary class]])
                {
                    i++;
                    NSDictionary *newDict = (NSDictionary *)child;
                    [self recurse:newDict counter:i parent:key];
                    [self.mDict setValue:value forKey:key];
                    i--;

                    if(i==0)
                    {
                        return self.mDict;
                    }
                }
                else
                {
                    [self.mDict setValue:value forKey:key];
                }
            }
        }
        else 
        {
           [self.mDict setValue:value forKey:key];
        }
    }

    return self.mDict;
} 
```

输出只为键提供 3 个键值对：postLoginRedirectUrl、cart、defaultHeaderLineLevels ......我的意思是它的荒谬。我应该包括哪些其他条件？或者是否有一种简单的方法可以从 JSON 响应中获取所有密钥，这是我的真正目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:10:15.680

您能否将 NSString 转换为 NSData 并尝试以下代码行？

```
NSDictionary *dictionaryResponse = [NSJSONSerialization JSONObjectWithData:[stringResponse dataUsingEncoding:NSASCIIStringEncoding] options:0 error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:30:32.173

试试下面的代码，让我知道反馈。

```
 id jsonObject = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingAllowFragments error:nil];

    if ([jsonObject respondsToSelector:@selector(objectForKey:)])

    {
NSDictionary *cart_Dict=[jsonObject valueForKey:@"cart"];
NSString *responseHeader=[jsonObject valueForKey:@"responseHeader"];
NSArray *invalidMaterial_CartDict_array=[[jsonObject valueForKey:@"cart"] objectForKey:@"invalidMaterialIDs"];
 NSArray *materialIdKeyList_array=[[jsonObject valueForKey:@"materialIdKeyList"]        

 } 
```

如果您不知道响应字符串是什么，那么您必须找到所有键

```
 if ([jsonObject isKindOfClass: [NSArray class]])
    {
       //for Array you have to access by Object at Index
    }
    else if ([jsonObject isKindOfClass: [NSDictionary class]])
    {
       for (NSString *key in [jsonObject allKeys])
          {
              NSDictionary *feed = [jsonObject objectForKey:key];

           //do stuff with feed.
           }
    }
    else
    {
        // deal with it.
    } 
```

# java - 将字符串转换为枚举会在 java 中出现错误？

> ID：13927183
> 
> 赞同：-1
> 
> 时间：2012-12-18T05:59:55.150
> 
> 标签：java, string, enums

所有`String to Enum`转换示例只采用一个字符串，但在我的示例字符串中，像这样......

```
String allDays="MONDAY,SUNDAY,FRIDAY"; 
```

和我的枚举类这样..

```
public enum WeekdayType {

    MONDAY(Calendar.MONDAY), TUESDAY(Calendar.TUESDAY), WEDNESDAY(
            Calendar.WEDNESDAY), THURSDAY(Calendar.THURSDAY), FRIDAY(
            Calendar.FRIDAY), SATURDAY(Calendar.SATURDAY), SUNDAY(
            Calendar.SUNDAY);

    private int day;

    private WeekdayType(int day) {
        this.day = day;
    }

    public int getDay() {
        return day;
    }
} 
```

所以在那段时间`WeedayType.valueOf(allDay)`给出了错误.....对此有任何建议..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:04:44.497

试试这样：

```
String allDays = "MONDAY,SUNDAY,FRIDAY";
        for (String day : allDays.split(",")) {
            System.out.println(WeekdayType.valueOf(day));
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:22:31.293

您将收到以下错误

`java.lang.IllegalArgumentException: No enum const class com.java.core.Test$WeekdayType.MONDAY,SUNDAY,FRIDAY`

原因是您将以下字符串传递给您的*WeedayType*枚举，正如异常所说，这是一个非法参数。

```
String allDays = "MONDAY,SUNDAY,FRIDAY"; 
WeedayType.valueOf(allDay); 
```

您可以传递给 valueOf 方法的有效值是“MONDAY”、“TUESDAY”等（即您的枚举名称）。其他值会为您提供 java.lang.IllegalArgumentException，这是正确的行为。

# android - 将Google Drive v2 APIs添加到android项目后，报错 Multiple dex files defined Lcom/google/api/client/http/HttpContent;

> ID：13927184
> 
> 赞同：1
> 
> 时间：2012-12-18T05:59:59.727
> 
> 标签：android, google-drive-api

我试过到处寻找，但我无法弄清楚为什么会出现这个错误，因为我所做的只是通过 Eclipse（Juno）从 Google 插件添加 Google Drive API。当我清理项目时，错误不会出现。只有当我去运行 Android 应用程序时。我一直在尝试按照[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android) 上提供的步骤来获取 API，并且还为 Play Services 添加了 .jar/build 路径。

这是出现的确切代码：

```
[2012-12-18 00:49:57 - Dex Loader] Unable to execute dex: Multiple dex files define Lcom/google/api/client/http/HttpContent;
[2012-12-18 00:49:57 - Intro] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/google/api/client/http/HttpContent; 
```

我认为这在某种程度上与重复依赖项有关，但我不知道应该保留或删除哪些依赖项。此外，我已经尝试在添加 API 并重新启动之前删除 bin 文件夹，它也不在构建路径中。下面是两个库的屏幕截图。

[http://d.pr/i/tYvs](http://d.pr/i/tYvs)

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:08:02.930

您很可能需要包含相同类（可能不同的版本）的 jar。检查`libs/`文件夹的内容并删除所有重复项。或者只是从头开始或已知的工作样本。

# magento - Magento 免运费，仅限标准运费

> ID：13927185
> 
> 赞同：3
> 
> 时间：2012-12-18T06:00:01.693
> 
> 标签：magento

使用购物车规则为某些商品设置免费送货没有问题。但是，现在是圣诞节，我想在标准运输的情况下提供免费送货，但以正常价格保留快递运输。当我设置购物车规则为特定商品提供免费送货时，它会自动将每种统一运费方式降低到 0 美元。有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:17:51.043

请查看可能对您有帮助的屏幕截图。这里常规是标准运输的运输代码，如果订单金额超过 100 美元，我会添加额外条件。

![第一张图片](../Images/6a25fadb003bcace6a7e80e73181c800.png) ![第二张图片](../Images/dae5d342b4e626a97316d9600ad7661e.png) ![第三张图片](../Images/3ead61c4b9336560a72a84c395f62854.png)

祝你好运，如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T15:39:54.473

我有一个类似的问题，我找到了解决方案。

**问题**：具有多种运输方式的多商店网站：flatrate、matrixrate。在某些商店中，免费送货规则应仅适用于 matrixrate 而不是 flatrate，在其他一些商店中应适用于 flatrate。

**解决方案**：使用这里解释的规则，除了运输方式一之外的任何条件。然后创建一个扩展 Flatrate 模型的模块（或者一个女巫不应该受规则影响），以防止根据特定于网站的配置应用运输规则。

更多信息在这里：[https ://magento.stackexchange.com/a/173063/4647](https://magento.stackexchange.com/a/173063/4647)

# javascript - 从元素列表中查找匹配模式

> ID：13927187
> 
> 赞同：0
> 
> 时间：2012-12-18T06:00:09.350
> 
> 标签：javascript, jquery, regex

我正在尝试为用户输入到文本框中的字符串查找匹配模式，在大多数情况下，我的代码都成功了，但我发现在某些情况下，它不会返回所有需要的结果。我附上了一个 jsfiddle 链接以显示它的 wrking，我还将粘贴代码以供将来参考

[http://jsfiddle.net/faphf/2/](http://jsfiddle.net/faphf/2/)

```
$("#facetSearchBox").live("keyup",
    function() {
        $("#test").empty();
        facetSearch();
    });

 function facetSearch(){ 
 var facetSearchTerm = $("#facetSearchBox").val();
 facetSearchTerm = facetSearchTerm.toLowerCase();
 var inputArray=["mark zuckerberg","ben s bernanke","ben bernanke","sven grundberg",    "michael bloomberg","robert powell","kenneth lieberthal","frank boulben"];

  var re = new RegExp(facetSearchTerm, "ig");
  var outputArray = inputArray.filter(function(item) {
     return re.test(item);
});
for(var k=0; k<outputArray.length;k++){
$("#test").append(outputArray[k] + "<br>" );
}
} 
```

尝试搜索本，它不会返回所有所需的结果......如果你能帮我找出代码有什么问题，那会很有帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T06:06:13.117

`g`从您的正则表达式中删除全局修饰符。之后它应该可以正常工作。

```
var re = new RegExp(facetSearchTerm, "i"); 
```

测试链接：http: [//jsfiddle.net/faphf/5/](http://jsfiddle.net/faphf/5/)

**编辑：**

[为什么 Javascript 中带有全局标志的 RegExp 会给出错误的结果？](https://stackoverflow.com/questions/1520800/why-regexp-with-global-flag-in-javascript-give-wrong-results)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:08:55.177

采用：

```
 var re = new RegExp( facetSearchTerm, "i"); 
```

参见：[小提琴](http://jsfiddle.net/faphf/3/)

对于词边界匹配：

```
 var re = new RegExp("\\b" + facetSearchTerm, "i"); 
```

参见：[小提琴](http://jsfiddle.net/faphf/4/)

# android - 如何对抗 apk-tool 和修改 apktool，保护我的应用程序？

> ID：13927188
> 
> 赞同：1
> 
> 时间：2012-12-18T06:00:24.300
> 
> 标签：android

请考虑以下链接：

[https://code.google.com/p/android-apktool/wiki/KnownIssues](https://code.google.com/p/android-apktool/wiki/KnownIssues)

底部写着：</p>

> 我发现有些 APK 不符合常规的 Android 标准。它们可能是使用修改后的 aapt 构建的，这使得反编译几乎是不可能的。这些 APK 被称为“Magic” apk，可能不受支持。

那么，如何保护我的应用程序？我有兴趣`modified aapt`，但我不知道从哪里开始？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:06:05.767

这通常是一个失败的原因。有一些工具会滥用 DEX 文件格式来试图对流行工具隐藏您的代码，但它们很容易被打败。“几乎不可能”是不完全正确的，只是更难为它制作通用工具。

混淆您的代码，考虑使用 Dex2Jar，最重要的是构建一个出色的应用程序，以便更多人使用它/为它付费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:06:49.057

你必须先搜索一下，有一些关于逆向工程和反编译 .apk 文件的有用链接：

*   [如何避免对 APK 文件进行逆向工程？](https://stackoverflow.com/questions/13854425/how-to-avoid-reverse-engineering-of-apk-file)
*   [将 DEX 反编译为 Java 源代码](https://stackoverflow.com/questions/1249973/decompiling-dex-into-java-sourcecode)

# jquery - 在页面滚动时加载Repeater DB数据

> ID：13927190
> 
> 赞同：1
> 
> 时间：2012-12-18T06:00:38.243
> 
> 标签：jquery, asp.net, sql-server, vb.net, visual-studio-2010

我像 pinterest.com 一样微笑着工作。

我在我的项目中使用带有中继器、MS SQL DB 和砌体 jquery 插件的 Visual Studio 2010。

一切工作正常，但最大的问题是**中继器一次加载所有数据，我希望它从数据库加载前 10 条图片记录，当用户滚动页面结束时加载接下来的 10 条图片记录，依此类推**.. 像 infinet 页面就像 Facebook 和 pinterest.com 一样。我使用 SqlDataSource 组件从数据库中获取数据。

帮我解决这个问题，欢迎任何建议或想法或链接。

现场页面演示在这里[www.bhinderblink.com](http://www.bhinderblink.com)

页眉编码....

```
<script type="text/javascript">
    $(function () {
        $('#container').masonry({ // options 
            itemSelector: '.item', columnWidth: 240,
            isAnimated: true,
            animationOptions: {
                duration: 750,
                easing: 'linear',
                queue: false
            }
        });
    });

    $(window).scroll(function () {
        if ($(window).scrollTop() == $(document).height() - $(window).height()) {
            alert("end of the page");
        }
    });
</script> 
```

页面正文开始......

```
<form id="form1" runat="server">
<div id="topBanner">
</div>

<asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource1">
    <HeaderTemplate>
    </HeaderTemplate>
    <ItemTemplate>
        <div id="container">
            <div class="item">
                <a id="a" href="#">
                    <asp:Image ID="myimage" runat="server" ImageUrl='<%#"~/" + Eval("pic_path") + Eval("pic_name") + ".jpg" %>' />
            </div>
    </ItemTemplate>
    <FooterTemplate>
    </FooterTemplate>
</asp:Repeater>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
    SelectCommand="SELECT pic_name, pic_path FROM pic_info"></asp:SqlDataSource>
</form> 
```

# macos - 如何调用从命令行获取文本输入的 Matlab 函数？

> ID：13927191
> 
> 赞同：4
> 
> 时间：2012-12-18T06:00:39.213
> 
> 标签：macos, matlab, shell, command-line

我正在从事一个医疗机器人项目，该项目捕获一系列图像，然后在 MATLAB 中对它们进行一些处理。由于必须在 MATLAB 之外完成许多其他事情，因此我使用另一种语言进行整体控制，并使用控制台命令来触发其他部分。

我有一个带有单个函数的 .m 文件，该函数将文件路径带到图像所在的目录并执行所有 MATLAB 处理。如何从命令行调用它？我在`matlab -r "function(input)"`这里看到了其他一些答案中的讨论，但它对我不起作用（我在打开的括号中遇到语法错误）。更具体地说，我得到：`matlab: eval: line 1690: syntax error near unexpected token '('`.

我见过一些人说这必须通过调用 shell 脚本来完成（我不知道如何编写），但是其他一些人说没有它是可行的，谁能澄清一下？

此外，假设我只是搞砸了`matlab -r`语法，MATLAB 怎么知道在哪里可以找到 .m 文件？它是否需要位于我从中运行命令的任何目录中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T06:23:56.090

我猜你正在尝试：

```
matlab -r test('hi') 
```

并得到...

```
bash: syntax error near unexpected token `(' 
```

或类似的东西？

**答：**您需要在`" "`周围使用`function(input)`，即：

```
matlab -r "test('hi')" 
```

这`test.m`在我的当前目录中运行，输入字符串`'hi'`。

要在名为 的 shell 脚本中执行此操作`runmatlabcommand.sh`，例如`bash`，您可以打开一个文件并编写：

```
#!/bin/bash
matlab -r "test('hi')" 
```

然后通过键入从命令行执行此脚本`./runmatlabcommand.sh`。在尝试运行之前确保脚本具有执行权限；）

# php - Zend 框架 Zend_Date::WEEKDAY

> ID：13927194
> 
> 赞同：2
> 
> 时间：2012-12-18T06:01:06.070
> 
> 标签：php, zend-framework

如何在设置日期后从 Zend_Date 获取工作日名称，

```
$date = new Zend_Date();
$date->set(strtotime($newDate)); 
```

当我使用 `return $date::WEEKDAY_NAME`时，它总是返回 EE 作为日期名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:10:55.710

这里明显的危险信号是双冒号：它仅用于静态属性和类常量，因此它不能是您获取此特定日期对象（或任何实例数据）的实际“工作日名称”字符串的方式任何形式的）。尽管 PHP 允许您以`$date`这种方式使用变量，但编写正确的方式`Zend_Date::WEEKDAY_NAME`可以更清楚地表明您是从*类*访问数据，而不是从*对象*访问数据。

`Zend_Date::WEEKDAY_NAME`只是 Zend_Date 的工作日格式字符串的常量（这就是`EE`您所看到的）。事实上，尽管有名字，它实际上是 2 字符工作日缩写的常量；`Zend_Date::WEEKDAY`是当天的全称。

您可以使用这些常量作为`$date`对象方法的参数。`toString`是返回日期的格式化字符串表示的方法：

```
$date = new Zend_Date(strtotime($newDate));
return $date->toString(Zend_Date::WEEKDAY); 
```

# python - CodingBat上雪茄和松鼠谜题的解决方法抛出语法错误

> ID：13927195
> 
> 赞同：1
> 
> 时间：2012-12-18T06:01:09.480
> 
> 标签：python, if-statement, syntax-error

我正在尝试解决[这个](http://codingbat.com/prob/p159531)CodingBat 问题：

> 喜欢聚会的松鼠们聚在一起抽雪茄。只有在工作日雪茄数量在 40 到 60 支之间时，这样的聚会才被认为是成功的。然而，在周末，雪茄的数量没有上限。如果具有给定值的一方成功，则编写一个返回 True 的函数。

不幸的是，虽然我偶尔使用过 Python，但我并不擅长理解为什么我的代码在第 5 行出现语法错误而失败：

```
def cigar_party(cigars, is_weekend):
  if is_weekend:
    if cigars >= 40:
      return True
  else if:
    cigars >= 40 and cigars =< 60:
      return True
  else:
    return False 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T06:03:18.897

在 Python 中，您需要使用`elif`而不是`else if`.

更多信息： [http ://docs.python.org/2/tutorial/controlflow.html](http://docs.python.org/2/tutorial/controlflow.html)

还要更改以下行：

```
else if:
cigars >= 40 and cigars =< 60: 
```

对此：

```
elif cigars >= 40 and cigars <= 60:
    return True 
```

小于或等于符号必须是`<=`，并且在关键字 elif 和表达式的其余部分之间不应有冒号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:38:04.923

首先，正如 tcdowney 指出的那样，语法是 elif，而不是 else if，其次，您需要在 elif 语句中具有逻辑评估，而不是某种操作。最后，在等号之前有大于/小于号。

```
elif cigars >= 40 and cigars <= 60:
    return True 
```

这应该够了吧 ;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-25T10:34:32.573

```
def cigar_party(cigars, is_weekend):
  a = range(61)
  if is_weekend and cigars not in a:
    return True

  elif cigars in range(40,61):
    return True

  else:
    return False 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-04T11:55:26.517

```
def cigar_party(cigars, is_weekend):
   if is_weekend and cigars>=40:
     return True
   elif not is_weekend and cigars in range(40,61):
     return True
   return False 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-20T02:29:50.630

```
def cigar_party(cigars, is_weekend):
    if is_weekend:
        return cigars >= 40
    return 40 <= cigars <= 60  // Python supports this type of Boolean evaluation 
```

或使用三元形式：

```
def cigar_party(cigars, is_weekend):
    return cigars >= 40 if is_weekend else 40 <= cigars <= 60 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-17T06:46:12.010

```
def cigar_party(cigars, is_weekend):
  if is_weekend:
    if cigars>=40:
      return is_weekend
  else:
    if cigars in range(40,61):
      return True
  return False 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-16T22:24:46.573

```
def cigar_party(cigars, is_weekend):
  if is_weekend == True:
    if cigars >= 40:
      return True
    else:
      return False
  if is_weekend == False:
    if cigars >= 40 and cigars <= 60:
      return True
    else:
      return False 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-30T09:38:04.793

```
#got 9/12 not bad! 

is_weekday = True
is_weekend = True 

def cigar_party(cigars, is_weekend):
    if is_weekend and cigars >= 0: 
        return True 
    elif is_weekday and cigars >= 40: 
        return True 
    else: 
        return False 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-04-23T22:39:47.920

```
def cigar_party(cigars, is_weekend):
  if is_weekend and cigars >= 40:
      return True
  elif cigars >= 40 and cigars <= 60:
      return True
  else:
    return False 
```

# objective-c - 使用各种调度队列和 NSOperationQueue 处理执行时间和性能

> ID：13927198
> 
> 赞同：3
> 
> 时间：2012-12-18T06:01:19.110
> 
> 标签：objective-c, ios, cocoa

我的应用程序包中有一个 XML。我正在解析这个 XML 文件。`NSXMLParser`我使用和使用以下方式解析了这个 XML ：

1.  在主线程上串行运行整个代码
2.  使用调度队列（GCD）：

    **2.1 使用dispatch_queue_create**创建我自己的调度队列

     **2.2 使用具有高优先级的全局队列**dispatch_get_global_queue**

    2.3 使用低优先级的全局队列

    2.4 使用具有后台优先级的全局队列** 
***   使用`NSOperationQueue`** 

 **我检查了执行解析 XML 文件的性能和总时间，发现结果非常奇怪（或者可能是正确的）。

以下是上述解析方式的代码：

1.  主线程上的串行执行 - 执行时间**34 毫秒。**

    ```
    BOOL success = [conf parseXMLFile:[[NSBundle mainBundle] pathForResource:@"Configuration" ofType:@"xml"] didFailWithError:&error];
    if (success) {
        DLog(@"Parsing Complete");
    }
    else
        DLog(@"Parse error %@",[error description]); 
    ```

2.1 使用**dispatch_queue_create** - 执行时间**68 毫秒**。

```
dispatch_queue_t backgroundQueue = dispatch_queue_create("BackQueue", NULL);

dispatch_async(backgroundQueue, ^{
    NSError *error = nil;
    BOOL success = [conf parseXMLFile:[[NSBundle mainBundle] pathForResource:@"Configuration" ofType:@"xml"] didFailWithError:&error];
    if (success) {
        DLog(@"Parsing Complete");
    }
    else
        DLog(@"Parse error %@",[error description]);
});

dispatch_release(backgroundQueue); 
```

2.2 使用具有高优先级**dispatch_get_global_queue**的全局队列- 执行时间 - **74 毫秒**

```
dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);

dispatch_async(backgroundQueue, ^{
    NSError *error = nil;
    BOOL success = [conf parseXMLFile:[[NSBundle mainBundle] pathForResource:@"Configuration" ofType:@"xml"] didFailWithError:&error];
    if (success) {
        DLog(@"Parsing Complete");
    }
    else
        DLog(@"Parse error %@",[error description]);
});

dispatch_release(backgroundQueue); 
```

2.3 类似于 2.2 使用具有 LOW 优先级的全局队列**DISPATCH_QUEUE_PRIORITY_LOW** - 执行时间 - **72 毫秒**

2.4 与 2.2 使用具有背景优先级的全局队列**DISPATCH_QUEUE_PRIORITY_BACKGROUND** - 执行时间 - **37 毫秒**

2.5\. 使用`NSOperationQueue`（继承 NSOperation） - 执行时间 - **36 毫秒**

谁能帮我弄清楚这些执行时间以及为什么它们如此奇怪（或者我错过了什么）。为什么我使用方法 1 获得最佳性能。为什么 DISPATCH_QUEUE_PRIORITY_BACKGROUND 提供比 HIGH 更好的性能。为什么 NSOperationQueue 的结果比 GCD 好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T07:59:30.693

**更新：**

我针对两种情况测试了各种调度和操作队列：

1.  调用单个作业，在单个操作中重复解析大型 (725kb) XML 文件 100 次；和

2.  排队 100 个操作，每次解析同一个非常大的 XML 文件。

我在 iPhone 5 上的结果（以秒为单位）如下：

1.  对于第一种情况：

    ```
    主队列：18.7
    NSOperation：18.4
    全局高优先级队列：18.3
    全局默认优先级队列：18.4
    全局低优先级队列：18.4
    全局后台队列：18.5
    串行调度队列：18.3

    ```

2.  对于我的第二种情况：

    ```
    主队列：18.7
    NSOperation：10.9
    全局高优先级队列：10.9
    全局默认优先级队列：10.8
    全局低优先级队列：10.8
    全局后台队列：11.0
    串行调度队列：18.5

    ```

因此，我从中得出两个相当不足为奇的结论：

*   至少对于计算密集型后台操作而言，各种并发后台技术之间似乎没有太大差异。

*   当将一个任务分解为多个操作时，并发后台操作（`NSOperationQueue`GCD 全局队列）比串行操作具有性能优势。

不过，我并不是说处于资源争用状态的设备在调度方面可能不会表现出不同的行为（特别是 GCD 全局队列类型，请参阅参考资料[`dispatch_queue_priority_t`](https://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/constant_group/dispatch_queue_priority_t)，这会影响设备上排队的其他并发操作的操作调度）。我只是想凭经验证明各种队列的效率并没有显着提高或降低。话虽如此，我个人不会`DISPATCH_QUEUE_PRIORITY_HIGH`在我的应用程序中使用，因为我认为这可能会影响核心 iOS 功能。

此外，为了充分披露，我应该承认我关注的是材料性能差异。一种或另一种机制很可能会提供以毫秒为单位的性能差异。当我考虑不同的后台性能方法时，我肯定更关注用户可观察到的性能差异。

* * *

**原答案：**

`parseManyTimes`我从主队列中调用了我的（它反复解析一个大的 XML 文件）：

```
[self parseManyTimes:@"Main queue"]; 
```

通过`NSOperation`：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[queue addOperationWithBlock:^{
     [self parseManyTimes:@"NSOperation"];
}];
queue = nil; 
```

通过 GCD 上的全局队列：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [self parseManyTimes:@"DISPATCH_QUEUE_PRIORITY_DEFAULT"];
}); 
```

和

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    [self parseManyTimes:@"DISPATCH_QUEUE_PRIORITY_HIGH"];
}); 
```

和

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    [self parseManyTimes:@"DISPATCH_QUEUE_PRIORITY_LOW"];
}); 
```

并通过 GCD 串行队列：

```
dispatch_queue_t dispatchQueue = dispatch_queue_create("org.rob.test", NULL);
dispatch_async(dispatchQueue, ^{
    [self parseManyTimes:@"dispatch_queue_create"];
}); 
```

并且结果彼此之间没有显着差异（均在 32.2 到 32.5 秒之间）。我的解析例程是：

```
- (void)parseManyTimes:(NSString *)type
{
    NSDate *startDate = [NSDate date];
    for (NSInteger i = 0; i < 100; i++)
        [self parse];

    NSLog(@"%@: %.1f", type, [[NSDate date] timeIntervalSinceDate:startDate]);
}

- (void)parse
{
    NSURL *url = [[NSBundle mainBundle] URLForResource:@"personnel" withExtension:@"xml"];
    NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:url];
    parser.delegate = self;
    [parser parse];
} 
```

我在 iPad 上运行了一个 725kb XML 文件。显然，我构建这个的方式是一个非常耗时的过程，它倾向于消除各种队列的调度方式的任何可忽略不计的差异，而是专注于后台操作。通过它不会对各种技术的材料性能问题产生任何担忧（至少对我而言）。

结果是：

```
主队列：32.3
NSOperation: 32.2
DISPATCH_QUEUE_PRIORITY_DEFAULT：32.4
DISPATCH_QUEUE_PRIORITY_HIGH：32.3
DISPATCH_QUEUE_PRIORITY_LOW：32.5
调度队列创建：32.3

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T20:17:39.690

各种默认并发队列的性能只是相对的。“高”优先级仅意味着高于其他队列。我希望您的综合基准测试当时几乎没有发生其他事情，因此为什么所有队列似乎都表现相同。如果您想要实际演示权重，可以一次将一百个解析操作排入*每个*并发队列，并比较它们的执行时间。

另请注意，NSOperation 使用默认优先级并发队列来执行，因此正如您所看到的，性能基本相同。充其量你只是在测量 NSOperation 的开销，这是很小的。

在您的初步结果中，您看到了完全不同的时间安排。这些测量的条件是什么？例如，如果您在应用程序启动时执行此操作，那么将 XML 解析转移到另一个线程或队列可能会使其花费更长的时间，因为您的主线程和队列可能会与它竞争 CPU 时间。在这种情况下，更好的测试是整体启动时间，这将证明使用多个内核的好处。**

# wordpress - 根据 Wordpress 插件中的 wp_content 添加 wp_header

> ID：13927202
> 
> 赞同：0
> 
> 时间：2012-12-18T06:01:40.397
> 
> 标签：wordpress

我正在开发一个 Wordpress 插件来根据一些参数运行某个 javascript 函数。

第一步是从我的服务器中包含 javascript 文件。简单的：

```
add_action('wp_head', 'my_plugin_head');

function my_plugin_head(){
echo '<script type="text/javascript" src="http://www.my-server.net/js/w.js" ></script>';
} 
```

*第二步*是将WordPress 正文中的某些文本更改为 javascript 函数...类似于：

```
 add_filter('the_content', 'plugin_text_replace');
 function plugin_text_replace($text){
 $text=preg_replace('blah', 'blah');

 return $text;
 //I Am still researching how to setup the preg_replace. 
 //It will look for something like plugin_call[1, 40, 60]
 //And Change it To jsFunction(1, 40, 60);
 //Bonus for anyone who can help me with that :)
 } 
```

无论如何，我意识到我希望仅在需要时才包含 my-server.net javascript（或者换句话说，只有在 preg_replace 找到匹配项时）。这对我来说是有问题的，因为无论如何我都找不到在`<head>`不使用 on 的操作的情况下将脚本添加到标签`wp_head`，该操作没有对文本正文的任何​​引用。

仅当找到某个 preg_match 时，如何添加标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:02:35.190

要添加 javascript，最好的方法是使用`wp_enqueue_script()`，如下所示：

```
function my_scripts_method() {
    wp_enqueue_script('my_java_function');            
}    

// For use on the Front end (ie. Theme)
add_action('wp_enqueue_scripts', 'my_scripts_method'); 
```

插入代码`<body>`可以这样实现：

```
function wp_body() {
  do_action( 'wp_body' );
}

add_action( 'wp_body', 'my_body_function' ) ; // 

// In "header.php" place something like this after <body>:

if ( function_exists('wp_body')) wp_body(); ?> 
```

# ruby - 如何在ruby中使用正则表达式在ruby on rails中获取php注释行，代码行计数

> ID：13927204
> 
> 赞同：-1
> 
> 时间：2012-12-18T06:01:57.813
> 
> 标签：ruby

我是 rails 新手，目前我正在使用 ruby​​ 处理 php、javascript/coffeescript 存储库的代码统计，我需要获取 php 和 javascript 和 coffeescript 的编码行和注释行（单行和多行注释）使用正则表达式的文件。任何人都可以帮助解决这个问题，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:54:49.060

这是我的男人：

```
f = File.open("test.php")

loc = 0
comments = 0
while line = f.gets
  if commented ||= line.match(/^\/\*/)
    commented = nil if line.match(/\*\/$/)
    comments += 1
  elsif line.match(/^\s*\/\//)
    comments += 1
  else
    loc +=1 unless line.match(/^\s*\n/)
  end
end

puts loc
puts comments 
```

这适用于：

```
//line comments
/* inline block comments */
/* multi
line
comments */ 
```

这个怎么运作：

*   你打开文件
*   将计数器初始化为 0
*   使用gets遍历每一行并将其分配给行变量
*   如果该行与块注释的开头匹配，则设置注释变量
*   将 1 添加到评论变量
*   如果设置了commented，则搜索comment的结尾，如果找到则将commented设置为nil
*   否则，如果未打开评论块并且找到“//”，则在评论中添加 1
*   否则将 1 添加到 loc 除非它是“空”行

# excel - 使用VBScript在Excel列之间进行减法

> ID：13927207
> 
> 赞同：0
> 
> 时间：2012-12-18T06:02:14.833
> 
> 标签：excel, vbscript, vba

假设我有下面的 excel 表，我需要找到它们之间的差异，结果需要放回另一列：

```
 ColA                      ColB                    ColC

9/3/2012  8:31:59 AM      09/17/2012  6:45:56 PM        Result
9/4/2012  8:31:59 AM      10/17/2012  6:45:56 PM        Result 
```

我使用循环和逐行技术做到了。寻找一种方法，如果它可以直接通过列级减法完成。说 ColB-ColA -> ColC。整个操作应该一次执行。结果应该是***"hh:mm:ss"***。

***代码***

```
 IntRow4=2
  Do While objSheet4.Cells(IntRow4,1).Value <> ""

    If objSheet4.Cells(IntRow4,9).Value <> "Open" Then

       Date1=objSheet4.Cells(IntRow4,7).Value
       Date2=objSheet4.Cells(IntRow4,8).Value
       objSheet4.Cells(IntRow4,11)=TimeSpan(Date1,Date2)

   End If

  IntRow4=IntRow4+1
  Loop 
```

***更新***

```
 ColA1    ColB1      ColC1       ColA2    ColB2     ColC2   .....   ColAN    ColBN    ColCN    TotaltimeDurtion
      Date     Date     11:25:20      Date     Date     10:25:00          Date    Date     11:25:20      ? 
```

***在这里我只显示了一行，但可以有多个或 N 行。我需要做的是，我想添加持续时间并将它们放到最后一列“TotaltimeDurtion”。但最后一列不能是固定的。每行的所有列都不需要值，但永远不会是空的。我们也可以在列级别执行此操作。这里的持续时间是 hh:mm:ss 格式或根据您的说明 [h ]:mm:ss。TotaltimeDurtion <- ColC1 + ColC2 + ...+ ColCN。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:13:03.177

使用范围对象，我可以一次在一个范围内的所有单元格上设置公式

```
range("C1:C10").Formula="=B1-A1" 
```

它还将根据绝对寻址的正常复制规则调整公式。

例如，在上面的例子中，C10 将是`=B10-A10`. 如果我将公式设为“=B1-$A$1”，那么 C10 将是`=B10-$A$1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:21:18.997

您可以从另一个日期中减去一个日期，然后设置单元格的格式：

```
'Within the Do..While loop
Dim cell
Set cell = objSheet4.Cells(intRow4,11)
cell.Value = Date2 - Date1
cell.NumberFormat = "hh:mm:ss" 
```

# .htaccess - 如何查看 RewriteRule 或 RewriteCond 服务器变量的值？

> ID：13927208
> 
> 赞同：0
> 
> 时间：2012-12-18T06:02:27.113
> 
> 标签：.htaccess, mod-rewrite

例如，如果我想查看 php 中某个变量的值，我会这样做：

```
$foo = 'This is a variable foo';

var_dump($foo);  // string(22) "This is a variable foo"
echo $foo;       // This is a variable foo
print_r $foo;    // This is a variable foo 
```

但是当我写一些`mod_rewrite`规则时，现在我只能猜测 RewriteRule 的值是什么以及重写后它会变成什么`($0)`：

```
<Directory /public>
    DirectoryIndex index.php
</Directory>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]   // what is %{REQUEST_FILENAME}
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.+)$ $0 [NC, L]             // what is ^(.+)$, and what is $0? 
```

有什么方法可以打印或以某种方式查看每行之后我得到什么值？例如，我想看看什么是进来的`RewriteRule ^(.+)$ $0 [NC, L]`，什么是进来的，`^(.+)$`然后是什么`$0`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:37:47.460

不，没有你问的方式。

错误日志是一个很好的帮助。将 LogLevel 设置为调试，如下所示： `LogLevel debug`在`httpd.conf`文件中。

如果使用 Firefox，您可以尝试[livehttpheaders](http://livehttpheaders.mozdev.org/)，例如，查看标头和其他相关信息。其他浏览器也有等效的扩展。

不用说，一个 php 脚本在映射地址处用`echo var_dump($_SERVER);`或类似语句，将显示结果的完整信息。

# google-calendar-api - 将活动从全天更改为限时活动

> ID：13927209
> 
> 赞同：6
> 
> 时间：2012-12-18T06:02:29.740
> 
> 标签：google-calendar-api

Google 日历上有一个全天活动，我把它拉了出来，把它改成 1 小时活动，我创建了补丁活动来推回。据我了解，全天活动的日期为“开始”，下一个日期为“结束”。限时事件有那些在 DateTime。

所以在我的补丁中，我尝试将这些值从 Date 更改为 DateTime。但是，我总是收到错误“开始和结束时间无效或不匹配”。

我在 Google Calendar API 网站上手动尝试过：[https](https://developers.google.com/google-apps/calendar/v3/reference/events/patch#try-it) ://developers.google.com/google-apps/calendar/v3/reference/events/patch#try-it 并得到同样的错误。如果我采取限时事件并对其进行修改，则不会出现问题。我相信这是 API 本身的一个错误。任何人都经历过它，解决方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T02:22:22.190

更新：这是我从谷歌开发团队收到的，希望对某人有用：

stanc 对问题 3110 的评论 #4...@google.com：从全天到非全天修补事件失败 [http://code.google.com/a/google.com/p/apps-api-问题/问题/详细信息？id=3110](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3110)

补丁操作采用原始事件并更改/添加/删除请求指定的条目。如果您针对全天事件向 PATCH 操作发送以下请求：

```
{
 "start": {
  "dateTime": "2012-05-17T06:30:00+06:30",
  "timeZone": "UTC"
 },
 "end": {
  "dateTime": "2012-05-17T07:30:00+06:30",
  "timeZone": "UTC"
 }
} 
```

结果事件最终会同时设置 dateTime 和 date 字段（这是不允许的）。因此，PATCH 请求需要清除日期字段：

```
{
 "start": {
  "dateTime": "2012-05-17T06:30:00+06:30",
  "timeZone": "UTC",
  "date": null
 },
 "end": {
  "dateTime": "2012-05-17T07:30:00+06:30",
  "timeZone": "UTC",
  "date": null
 }
} 
```

在代码中，当您要将字段 Date 设置为 null 时，您必须`Data.NULL_DATE_TIME`这样输入：

```
EventDateTime edt = new EventDateTime();
edt.put("date",Data.NULL_DATE_TIME);// if you put NULL, it doesn't retain.
edt.put("dateTime", newTime); //newTime is the new value you want to set, type DateTime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T11:32:24.997

使用补丁[https://github.com/google/google-api-php-client/pull/484](https://github.com/google/google-api-php-client/pull/484) 它会帮助你。

# javascript - 当父窗口使用框架在php中弹出时关闭子窗口

> ID：13927213
> 
> 赞同：-1
> 
> 时间：2012-12-18T06:02:59.520
> 
> 标签：javascript, frame

我想知道当子窗口打开时是否有办法关闭父窗口。我目前正在使用框架（是的，我知道使用框架的麻烦，但你知道客户端）。所以我目前正在尝试做的是在框架中单击链接时打开一个新的子窗口 child.php。一旦这个子窗口打开，现在需要使用 javascript 关闭整个框架 index.php。这可能吗，请告诉我天气这是否取决于浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:45:16.167

如果浏览器窗口是使用 JavaScript window.open() 打开的，则只能使用 JavaScript 关闭它。在某些浏览器实现中（更像过去，但我不确定），如果您尝试 close() 一个不是由 JavaScript 打开的窗口，浏览器会向用户弹出一个确认对话框，说脚本想要关闭窗口。

所以答案是肯定的和否定的。不，默认情况下您不能这样做。现代浏览器会简单地忽略这一点而不会出错。另一方面，如果你真的想这样做，你应该用 JavaScript 打开你的主框架集。就像使用什么都不做的加载页面一样，只需使用 window.open() 弹出框架集。然后，如果您从任何框架打开更多窗口，您将能够关闭框架集的窗口。

# c# - 如何简化 C# 查询执行？

> ID：13927214
> 
> 赞同：0
> 
> 时间：2012-12-18T06:03:00.087
> 
> 标签：c#, asp.net

我是 asp.net 的程序员。我正在使用 C#。我每次都为查询执行编写了很长的代码。如何重构和组织以下代码？

```
MySqlConnection connection = new MySqlConnection(connstring);
string query = "Select fo_region_Name from fo_region where fo_region_DeleteStatus=0";
MySqlCommand command = new MySqlCommand(query, connection);
MySqlDataReader reader;
connection.Open();
reader = command.ExecuteReader();
while (reader.Read())
{
    ddl_Country.Items.Add(UppercaseFirst(reader[0].ToString()));
}
connection.Close();

query = "Select Fo_Nationality_Name from fo_Nationality a, Fo_region b where a.Fo_Nationality_Type=1 and "
        + "LEFT(a.Fo_Nationality_Code,2)=LEFT(b.fo_region_Name,2)  and  a.Fo_Nationality_DeleteStatus=0 and "
        + "b.fo_region_DeleteStatus=0 Union Select Fo_Nationality_Name from fo_nationality where Fo_Nationality_DeleteStatus=0";
command = new MySqlCommand(query, connection);
connection.Open();
reader = command.ExecuteReader();
while (reader.Read())
{
    ddl_Nationality.Items.Add(UppercaseFirst(reader[0].ToString()));
}
connection.Close();

query = "select mcs_CreditCard_CardName from mcs_creditcard where mcs_CreditCard_DeleteStatus=0";
command = new MySqlCommand(query, connection);
connection.Open();
reader = command.ExecuteReader();
while (reader.Read())
{
    ddl_CreditCard.Items.Add(UppercaseFirst(reader[0].ToString()));
}
connection.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:29:24.927

一些想法：

*   使用多行字符串来格式化您的 SQL 语句。
*   无需在每个命令执行之间关闭和重新打开连接。
*   也不需要创建新的连接和命令对象（在这种情况下）
    *   如果您在命令对象上有参数，则创建新命令对象比清除旧参数更容易
*   使用`var`语句让 C# 编译器自动为您确定变量类型。
*   将需要处理的对象包装在一个`using`块中。

* * *

```
using (var connection = new MySqlConnection(connstring)) {
    connection.Open();

    using (var command = new MySqlCommand()) {
        MySqlDataReader reader;

        command.CommandText = @"
            SELECT fo_region_Name
            FROM fo_region
            WHERE fo_region_DeleteStatus=0
        ";
        using (reader = command.ExecuteReader()) {
            while (reader.Read()) {
                ddl_Country.Items.Add(UppercaseFirst(reader[0].ToString()));
            }
        }

        command.CommandText = @"
            SELECT Fo_Nationality_Name
            FROM fo_Nationality a,
                Fo_region b
            WHERE a.Fo_Nationality_Type = 1
                AND LEFT(a.Fo_Nationality_Code,2) = LEFT(b.fo_region_Name,2)
                AND b.fo_region_DeleteStatus=0

            UNION SELECT Fo_Nationality_Name 
            FROM fo_nationality
            WHERE Fo_Nationality_DeleteStatus=0
        ";
        using (reader = command.ExecuteReader()) {
            while (reader.Read()) {
                ddl_Nationality.Items.Add(UppercaseFirst(reader[0].ToString()));
            }
        }

        command.CommandText = @"
            SELECT mcs_CreditCard_CardName
            FROM mcs_creditcard
            WHERE mcs_CreditCard_DeleteStatus = 0
        ";
        using (reader = command.ExecuteReader()) {
            while (reader.Read()) {
                ddl_Nationality.Items.Add(UppercaseFirst(reader[0].ToString()));
            }
        }
    }
} 
```

使用 LINQ（添加`using System.Data.Common`语句）：

```
 using (reader = command.ExecuteReader()) {
            /*while (reader.Read()) {
                ddl_Country.Items.Add(UppercaseFirst(reader[0].ToString()));
            }*/
            ddl_Country.Items.AddRange((
                from DbDataRecord row in reader
                select new ListItem(
                    UppercaseFirst(reader.GetString(0))
                )
            ).ToArray());
        } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-18T06:34:11.030

Maybe use can use EnterpriseLibrary, to reduce amount of code that deals with database.

# java - java程序启动时会发生什么？

> ID：13927217
> 
> 赞同：9
> 
> 时间：2012-12-18T06:03:04.380
> 
> 标签：java, jar, jvm, classloader, executable-jar

最近接触了Java类加载器，突然认识到，不完全明白有人调用时**会发生什么**

```
java -jar App.jar 
```

好吧，我猜

1.  创建了一个新的 JVM 实例
2.  它使用 ClassLoader 加载主类和其他类
3.  字节码从 main() 方法开始执行

但我仍然认为有很多事情我需要了解更多。

*   谁以及如何决定在启动时应该加载哪些类以及曾经需要哪些类？

我发现了两个相关的问题，但没有解释如何将其应用于 Java 现实。

[计算机程序运行时会发生什么？](https://stackoverflow.com/questions/5162580/what-happens-when-a-computer-program-runs)

[运行程序时会发生什么？](https://stackoverflow.com/questions/1204078/what-happens-when-you-run-a-program)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:21:43.890

> • 谁以及如何决定在启动时应该加载哪些类以及曾经需要哪些类？

我们需要了解java类加载的基础知识。最初，引导类加载器（它作为 VM 本身的一部分本地实现）负责加载核心系统类。然后还有其他类加载器，如扩展、系统、用户定义（可选）类加载器，它们决定何时以及如何加载类。 [类加载的基础知识](http://www.ibm.com/developerworks/java/library/j-dclp1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:21:56.883

决定由类加载器做出。有不同的实现，其中一些预加载它们可以加载的所有类，而另一些则仅在需要时加载类。

一个类只有在第一次从程序代码中访问时才*需要加载；*这种访问可能是该类中对象的实例化或对其`static`成员之一的访问。通常，默认类加载器会在需要时延迟加载类。

但是，在任何情况下都不能依赖某些类来预加载：在`Class.forName(...)`实际执行此代码之前，可能无法确定通过何种方式访问​​的类。

在其他选项中，对于简单的实验，您可以使用静态初始化程序代码来查看实际加载类的实际时间和顺序；此代码将在第一次加载类时执行；例子：

```
class SomeClass {

    static {
        System.out.println("Class SomeClass was initialized.");
    }

    public SomeClass() {
        ...
    }

    ...

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:27:14.953

您的示例显示了一个*可执行的 jar*，它只是一个普通的 java 存档（jar），其清单文件（位于 folder `"META_INF"`）中有一个额外的键/值对。键是“ `Main-Class`”，如果您像示例中一样“运行”jar，则该类的“main”方法将被执行的类的完全限定类名的值。

jar 是一个 zip 文件，您可以使用每个 zip 存档工具查看内部文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-10T06:39:03.650

每当您编译 Java 程序时，都会执行以下步骤

1.  首先，类加载器将类加载到 JVM 中。
2.  在给出命令***javac filename.java***后，编译器会检查编译时错误，如果一切正常，它将生成 .Class 文件（字节码）。

这将是第一阶段。

稍后解释器检查运行时错误，如果一切正常且无异常，则解释器将字节码转换为可执行代码。

Java 的第一阶段由 JIT 编译器（**Just In Time**）完成。

# php - 如何提高迭代 DOMDocument 的性能？

> ID：13927221
> 
> 赞同：12
> 
> 时间：2012-12-18T06:03:22.613
> 
> 标签：php, performance, domdocument

我正在使用 cURL 从服务器中提取网页。我将它传递给 Tidy 并将输出放入 DOMDocument。然后麻烦就开始了。

该网页包含大约三千个（yikes）表格标签，我正在从中抓取数据。有两种类型的表，其中一个或多个类型 B 跟随类型 A。

我已经使用`microtome(true)`调用分析了我的脚本。我在脚本的每个阶段之前和之后都进行了调用，并相互减去了时间。所以，如果你跟着我看我的代码，我会解释它，分享配置文件结果，并指出问题所在。也许你甚至可以帮我解决问题。开始了：

首先，我包含两个文件。一个处理一些解析，另一个定义两个“数据结构”类。

```
// Imports
include('./course.php');
include('./utils.php'); 
```

据我所知，包含是无关紧要的，所以让我们继续进行 cURL 导入。

```
//  Execute cURL
$response = curl_exec($curl_handle); 
```

我已将 cURL 配置为不超时，并发布一些标题数据，这是获得有意义的响应所必需的。接下来，我清理数据以准备用于 DOMDocument。

```
// Run about 25 str_replace calls here, to clean up
// then run tidy.

$html = $response; 

//  
//      Prepare some config for tidy
//  
       $config = array(
                  'indent'         => true,
                  'output-xhtml'   => true,
                   'wrap'           => 200);

    //  
    // Tidy up the HTML
    //  

    $tidy = new tidy;
    $tidy->parseString($html, $config, 'utf8');
    $tidy->cleanRepair();

    $html = $tidy; 
```

到目前为止，该代码已经花费了大约 9 秒。考虑到这是一项 cron 工作，不经常运行，我对此很好。但是，代码的下一部分真的很糟糕。这是我从 HTML 中获取我想要的内容并将其放入我的自定义类的地方。（我也计划将其填充到 MySQL 数据库中，但这是第一步。）

```
//  Get all of the tables in the page

$tables = $dom->getElementsByTagName('table');

//  Create a buffer for the courses

$courses = array();

//  Iterate

$numberOfTables = $tables->length;

for ($i=1; $i <$numberOfTables ; $i++) { 

    $sectionTable = $tables->item($i);
    $courseTable = $tables->item($i-1);

    //  We've found a course table, parse it.

    if (elementIsACourseSectionTable($sectionTable)) {

        $course = courseFromTable($courseTable);
        $course = addSectionsToCourseUsingTable($course, $sectionTable);            

        $courses[] = $course;
    }
} 
```

作为参考，这是我调用的实用程序函数：

```
//  
//  Tell us if a given element is
//  a course section table.
//

function elementIsACourseSectionTable(DOMElement $element){

        $tableHasClass = $element->hasAttribute('class');
        $tableIsCourseTable = $element->getAttribute("class") == "coursetable"; 

        return $tableHasClass && $tableIsCourseTable;
}

//
//  Takes a table and parses it into an 
//  instance of the Course class.
//

function courseFromTable(DOMElement $table){

    $secondRow = $table->getElementsByTagName('tr')->item(1);   
    $cells = $secondRow->getElementsByTagName('td');

    $course = new Course;

    $course->startDate = valueForElementInList(0, $cells);
    $course->endDate = valueForElementInList(1, $cells);        
    $course->name = valueForElementInList(2, $cells);
    $course->description = valueForElementInList(3, $cells);
    $course->credits = valueForElementInList(4, $cells);
    $course->hours = valueForElementInList(5, $cells);
    $course->division = valueForElementInList(6, $cells);
    $course->subject = valueForElementInList(7, $cells);

    return $course;

}

//
//  Takes a table and parses it into an 
//  instance of the Section class.
//

function sectionFromRow(DOMElement $row){

    $cells = $row->getElementsByTagName('td');

    //
    //  Skip any row with a single cell
    //

    if ($cells->length == 1) {
        # code...
        return NULL;
    }

    //
    //  Skip header rows
    //

    if (valueForElementInList(0, $cells) == "Section" || valueForElementInList(0, $cells) == "") {
        return NULL;
    }

    $section = new Section;

    $section->section = valueForElementInList(0, $cells);
    $section->code = valueForElementInList(1, $cells);
    $section->openSeats = valueForElementInList(2, $cells);     
    $section->dayAndTime = valueForElementInList(3, $cells);        
    $section->instructor = valueForElementInList(4, $cells);        
    $section->buildingAndRoom = valueForElementInList(5, $cells);
    $section->isOnline = valueForElementInList(6, $cells);  

    return $section;

}

//
//  Take a table containing course sections
//  and parse it put the results into a
//  give course object.
//

function addSectionsToCourseUsingTable(Course $course, DOMElement $table){

    $rows = $table->getElementsByTagName('tr');
    $numRows = $rows->length;

    for ($i=0; $i < $numRows; $i++) { 

        $section = sectionFromRow($rows->item($i));

        //  Make sure we have an array to put sections into 

        if (is_null($course->sections)) {
            $course->sections = array();
        }

        //  Skip "meta" rows, since they're not really sections

        if (is_null($section)) {
            continue;
        }

        $course->addSection($section);
    }

    return $course;
}

//
//  Returns the text from a cell
//  with a 
//

function valueForElementInList($index, $list){
    $value =  $list->item($index)->nodeValue;
    $value = trim($value);
    return $value;
} 
```

此代码需要 63 秒。PHP 脚本从网页中提取数据需要一分钟多的时间。嘘！

有人建议我拆分主要工作循环的工作量，但考虑到我的数据的同质性​​，我不完全确定该怎么做。非常感谢任何有关改进此代码的建议。

我可以做些什么来改善我的代码执行时间？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T10:58:41.827

事实证明，我的循环非常低效。

使用`foreach`切割时间减半至约 31 秒。但这还不够快。所以我整理了一些样条曲线，并与大约一半我知道如何在网上戳的程序员进行了头脑风暴。这是我们发现的：

使用 DOMNodeList 的`item()`访问器是线性的，在循环中产生指数级缓慢的处理时间。因此，在每次迭代后删除第一个元素会使循环更快。现在，我们总是访问列表的第一个元素。这使我缩短到 8 秒。

玩了一些之后，我意识到 的`->length`属性和`DOMNodeList`一样糟糕`item()`，因为它也会产生线性成本。所以我将我的 for 循环更改为：

```
 $table = $tables->item(0);

while ($table != NULL) {

    $table = $tables->item(0);

    if ($table === NULL) {
        break;
    }

    //
    //  We've found a section table, parse it.
    //

    if (elementIsACourseSectionTable($table)) {

        $course = addSectionsToCourseUsingTable($course, $table);           
    }

    //
    //  Skip the last table if it's not a course section
    //

    else if(elementIsCourseHeaderTable($table)){
        $course = courseFromTable($table);
        $courses[] = $course;
    }

    //
    //  Remove the first item from the list
    //

    $first = $tables->item(0);
    $first->parentNode->removeChild($first);

    //
    //  Get the next table to parse
    //

    $table = $tables->item(0);
} 
```

请注意，我在定位我想要的数据方面做了一些其他优化，但相关部分是我如何处理从一个项目到下一个项目的进展。

# php - PHP 静态数组解决方法

> ID：13927239
> 
> 赞同：0
> 
> 时间：2012-12-18T06:04:54.723
> 
> 标签：php, arrays, class, static

我有一个数组结构，其中包含多个维度的键和值对。我想在一个类中使用这个数组，但我不希望它添加到每个实例中，因为它只是该类所需的引用。

这是我通过 Google 和 Stack Overflow 搜索提出的解决方法。它可以满足我的需要，但是有经验的 PHP 程序员可以看到任何明显的问题吗？

```
class Foo {

    public static function bar($key = null) {

        $array = array('key'=>array(1,2,3));

        if ($key && array_key_exists($key, $array)) {
            return $array[$key];
        } else {
            return $array;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:33:12.827

静态变量不适用于此目的。如果您想拥有每个实例的值，只需在 OOP 上下文中使用它：

```
class Foo {

    protected $myArray = array();

    public function __construct($array = array())
    {
        $this->myArray = $array;
    }

}

$array1 = array('key' => array(1,2,3));
$array2 = array('key' => array(4,5,6));

$foo1 = new Foo($array1);
$foo2 = new Foo($array2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:17:36.413

你为什么不通过引用每个实例来传递你的数组。这是通过使用`&`变量名之前的，如下所示：

```
&$SomeArray; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:11:31.933

您可以在类中声明静态变量，然后使用`self`.

```
class Foo {
  public static $bar = array(...);
  function Foo()
  {
    print_r(self::$bar)
  }
}   
print_r(Foo::$bar); 
```

您也可以查看[手册](http://php.net/manual/en/language.oop5.static.php)。

# java - Java String.equals() 算法

> ID：13927241
> 
> 赞同：-5
> 
> 时间：2012-12-18T06:05:11.260
> 
> 标签：java, string, algorithm

有人知道`String.equals()`Java中使用的算法是什么吗？Java如何比较两个词？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T06:08:46.183

[字符串](http://www.docjar.com/html/api/java/lang/String.java.html)中的简单函数

```
 /**
 * Compares this string to the specified object.  The result is {@code
 * true} if and only if the argument is not {@code null} and is a {@code
 * String} object that represents the same sequence of characters as this
 * object.
 *
 * @param  anObject
 *         The object to compare this {@code String} against
 *
 * @return  {@code true} if the given object represents a {@code String}
 *          equivalent to this string, {@code false} otherwise
 *
 * @see  #compareTo(String)
 * @see  #equalsIgnoreCase(String)
 */
public boolean equals(Object anObject) {
    if (this == anObject) {
        return true;
    }
    if (anObject instanceof String) {
        String anotherString = (String) anObject;
        int n = value.length;
        if (n == anotherString.value.length) {
            char v1[] = value;
            char v2[] = anotherString.value;
            int i = 0;
            while (n-- != 0) {
                if (v1[i] != v2[i])
                        return false;
                i++;
            }
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:20:31.870

您可以在 JDK 中查看所有 java 类的实现。

只需转到您的 JDK_HOME，您可以在其中找到“src.zip **”**，其中包含所有 java 类的源代码，您可以在其中轻松找到 String 类的实现。

# lighttpd - Rstudio 服务器的 Lighttpd 反向代理设置

> ID：13927242
> 
> 赞同：1
> 
> 时间：2012-12-18T06:05:18.187
> 
> 标签：lighttpd, rstudio

我正在尝试按照此处的建议为 Rstudio 设置反向代理：

[http://www.rstudio.com/ide/docs/server/running_with_proxy](http://www.rstudio.com/ide/docs/server/running_with_proxy)

但是我使用的是Lighttpd，我不知道如何重写url请求然后代理它。

具体来说，我正在尝试获取它，以便如果我输入 4.4.4.4（或其他）/rstudio 它会将其代理到 localhost:8787 （rstudio 服务器：端口）并且我正在路上。

基本上，我被困在这个：

```
$HTTP["url"] =~ "/rstudio" {
# url.rewrite-once = ( "/rstudio" => "" )
    proxy.server  = (
        "" => ( (
            "host" => "127.0.0.1",
            "port" => "8787"
        ) )
    )
} 
```

Lighttpd 说你不能在 $HTTP["url"] 条件下进行 url.rewrite，所以我不知道如何解决这个问题（有人知道这是为什么吗？）。如果没有 url.rewrite，代理可以工作，只是它似乎将其转发到 localhost:8787/rstudio，这会导致 Rstudio 出错，因为它不是现有文件夹。

我需要弄清楚如何摆脱转发到代理的 /rstudio。我只是想让它从 4.4.4.4/rstudio 到 localhost:8787

有谁知道我该如何解决这个问题？

提前致谢。

# android - 检测在 Iphone 或 Android 手机上使用的屏幕锁定 - 有可能吗？

> ID：13927243
> 
> 赞同：2
> 
> 时间：2012-12-18T06:05:33.083
> 
> 标签：android, iphone, security, session-timeout

乡亲

我正在为我的公司开发一个 HTML5 移动应用程序，它可以针对某人存储的信用卡资料进行交易。该项目的下一阶段是“本地化”。

我通过使会话到期来管理（其中一个）安全隐患，因此如果他们离开一段时间，他们需要重新登录 - 这是通常的事情。

我的营销团队坚持“人们讨厌一直登录”，我已经解释了这样做的安全隐患。我的直觉是，由于大多数简单的应用程序都会让您保持登录状态，因此人们已经习惯了一直登录。我不会让你在浏览器上保持登录状态。

然而 - 在手机上它不同。

我敢肯定，很大一部分人会锁定他们的手机——但很多人不会。

我的问题是：Iphone 或 Android 手机是否允许您判断用户是否打开了“屏幕锁定”，从而允许您将其作为额外的安全屏障？

我对 Stack Overflow 还很陌生，所以请放轻松。

![屏幕锁](../Images/ce5cda1711fce238c9ccf2aec265d7af.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:47:38.263

对于 iOS，简短的回答是否定的。Apple 没有提供确定用户是否设置密码的方法。

# asp.net-mvc-4 - MVC 4 异步控制器

> ID：13927246
> 
> 赞同：0
> 
> 时间：2012-12-18T06:05:45.720
> 
> 标签：asp.net-mvc-4

在 MVC 4 中，我在控制器中创建了以下异步方法

```
public async Task<ActionResult> Test()
{
    string str  = await TestClient() ;
    return View() ;
} 
```

**控制器名称：主页 动作名称：测试** 当我的控制器类继承自“AsyncController”基类时，就`http://localhost/Home/Test`可以正常工作，甚至调试器也不会在动作方法上命中。但是当我的控制器类继承自“控制器”基类时，它可以正常工作

我不太确定它基于使用的基类创建的差异

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:47:16.740

`AsyncController`是实现异步控制器的旧方法；`Controller`在所有现代代码中使用，包括`async`代码。

# emacs - Erlang flymake在src中嵌套文件夹找不到包含文件夹

> ID：13927247
> 
> 赞同：3
> 
> 时间：2012-12-18T06:05:51.247
> 
> 标签：emacs, erlang

对不起我的英语不好。

我正在使用 erlang flymake 配置我的 emacs。src 的嵌套文件夹中的源文件报告“找不到包含文件”，但文件`src/`夹中的文件可以找到包含文件。

我对 erlang 的 emacs 设置：

```
;; erlang-mode
(setq load-path (cons "/usr/local/Cellar/erlang/R15B02/lib/erlang/lib/tools-2.6.8/emacs" load-path))
(setq erlang-root-dir "/usr/local/Cellar/erlang/R15B02/lib/erlang")
(setq exec-path (cons "/usr/local/Cellar/erlang/R15B02/lib/erlang/bin" exec-path))
(require 'erlang-start)

;; distel
(add-to-list 'load-path "/usr/local/share/distel/elisp/")
(require 'distel)
(distel-setup)

;; erlang-flymake
(require 'erlang-flymake)
(erlang-flymake-only-on-save) 
```

我的 erlang 应用程序文件夹如下所示：

```
app/src/      (source code)
    src/mod
    src/lib

app/include/  (hrls)
app/ebin/     (compiled code)

...etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:21:33.507

其中`erlang-flymake`有 2 个变量 (`erlang-flymake-get-include-dirs-function`和`erlang-flymake-get-code-path-dirs-function`)，它们指定搜索包含和 ebin 目录的函数。现在，他们指向的函数`erlang-flymake-get-include-dirs`只是`erlang-flymake-get-code-path-dirs`简单地返回当前的 dir +`include`并`ebin`相应地返回。例如，您可以使用以下代码来执行此操作：

```
(defun get-erlang-app-dir ()
  (let* ((src-path (file-name-directory (buffer-file-name)))
     (pos (string-match "/src/" src-path)))
    (if pos
    (substring src-path 0 (+ 1 pos))
      src-path)))

(setq erlang-flymake-get-code-path-dirs-function
      (lambda ()
    (concat (get-erlang-app-dir) "ebin")))

(setq erlang-flymake-get-code-include-dirs-function
      (lambda ()
    (concat (get-erlang-app-dir) "include"))) 
```

PS您是否使用钢筋来维护您的项目？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:47:36.033

如果您使用 erlang-flymake，您可能需要查看[https://github.com/ten0s/syntaxerl](https://github.com/ten0s/syntaxerl)。它是 Erlang 的语法检查器。它在后台使用 erlang-flymake，但不是使用 `erlc'，而是使用自定义语法检查器，可以评估 .erl、.hrl、.config、.rel、.app、.app.src、.escript 文件。语法检查器是 rebar 感知的，但也适用于标准 Erlang/OTP 目录结构。Emacs 的设置也在那里。

# php - 尝试使用 PHP DOM 替换节点文本而不更改子节点

> ID：13927248
> 
> 赞同：3
> 
> 时间：2012-12-18T06:05:54.643
> 
> 标签：php, dom, domdocument

我正在尝试使用 dom 对象来简化词汇表工具提示的实现。我需要做的是替换段落中的文本元素，而不是替换可能嵌入段落中的锚标记。

```
$html = '<p>Replace this tag not this <a href="#">tag</a></p>';
$document = new DOMDocument();
$document->loadHTML($html);
$document->preserveWhiteSpace = false;
$document->validateOnParse = true;

$nodes = $document->getElementByTagName("p");
foreach ($nodes as $node) {
  $node->nodeValue = str_replace("tag","element",$node->nodeValue);
}
echo $document->saveHTML(); 
```

我得到：

```
'...<p>Replace this element not this element</p>...' 
```

我想：

```
'...<p>Replace this element not this <a href="#">tag</a></p>...' 
```

如何实现这一点，以便仅更改父节点文本而不更改子节点（标签）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T07:08:13.843

尝试这个：

```
$html = '<p>Replace this tag not this <a href="#">tag</a></p>';
$document = new DOMDocument();
$document->loadHTML($html);
$document->preserveWhiteSpace = false;
$document->validateOnParse = true;

$nodes = $document->getElementsByTagName("p");

foreach ($nodes as $node) {
    while( $node->hasChildNodes() ) {
        $node = $node->childNodes->item(0);
    }
    $node->nodeValue = str_replace("tag","element",$node->nodeValue);
}
echo $document->saveHTML(); 
```

希望这可以帮助。

**更新** 要在下面的评论中回答@paul 的问题，您可以创建

```
$html = '<p>Replace this tag not this <a href="#">tag</a></p>';
$document = new DOMDocument();
$document->loadHTML($html);
$document->preserveWhiteSpace = false;
$document->validateOnParse = true;

$nodes = $document->getElementsByTagName("p");

//create the element which should replace the text in the original string
$elem = $document->createElement( 'dfn', 'tag' );
$attr = $document->createAttribute('title');
$attr->value = 'element';
$elem->appendChild( $attr );

foreach ($nodes as $node) {
    while( $node->hasChildNodes() ) {
        $node = $node->childNodes->item(0);
    }
    //dump the new string here, which replaces the source string
    $node->nodeValue = str_replace("tag",$document->saveHTML($elem),$node->nodeValue);
}
echo $document->saveHTML(); 
```

# c# - 实体框架：如何在数据库表中排除 Soap 属性

> ID：13927250
> 
> 赞同：1
> 
> 时间：2012-12-18T06:06:09.050
> 
> 标签：c#, entity-framework-4, soapheader

我在 MVC 3 下，编写了一些用于 Web 服务的类，它们也作为实体在应用程序中使用。一切正常，但是当框架将实体生成到数据库中时，所有 SoapHeader 属性也存储为表字段，即：

*   编码必须了解
*   编码必须理解12
*   必须了解
*   演员
*   ...

当然这是因为**MyEntityClass**的基类是**System.Web.Services.Protocols.SoapHeader**。

我的问题是：如何避免在不手动操作的情况下将soap头属性创建到数据库中（如NotMapped属性）？

这是我的代码

```
// MyEntityClass.cs
public class MyEntityClass : System.Web.Services.Protocols.SoapHeader
{
    // Attributes...
}

// MyService.asmx.cs
public class MyService : System.Web.Services.WebService
{
    public MyEntityClass myClass; // Used as header from the client

    [WebMethod]
    [System.Web.Services.Protocols.SoapHeader("myClass")]
    public string Hello()
    {
    }
} 
```

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:26:03.340

因此，我发布了自己的解决方案，可能对其他人有用。我刚刚在我的实体（DbContect）类中使用了 OnModelCreating 方法，如下所示：

```
using System.Data.Entity;
namespace Application.Models
{
    public class Entities : DbContext
    {
        public DbSet<MyEntityClass> MyEntityClass { get; set; }
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Ignore<System.Web.Services.Protocols.SoapHeader>();
    }
} 
```

# android - 是否可以以编程方式阻止 Android 市场？

> ID：13927254
> 
> 赞同：2
> 
> 时间：2012-12-18T06:06:23.523
> 
> 标签：android, google-play

我想以编程方式为我的孩子应用程序启用/禁用 Android 市场（带有复选框）。这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:14:19.957

一般来说，没有。您不能从您的应用程序影响其他应用程序的行为。有一些技巧可以让您监控所陈述的内容，并且您可以将自己的应用程序置于前台以“阻止”它，但这既不受支持，也不保证在所有设备和 Android 版本上都能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:11:01.527

要禁用 Play 商店，如果您要删除它，请像使用任何其他应用程序一样执行此操作，但是替换删除按钮将是一个禁用按钮。

如果您不想一起禁用它，您可以打开应用程序，单击菜单，然后单击设置，然后在您要设置的列表中设置购买密码。

**编辑** 我知道您以编程方式说过，但这仍然可能是您可能正在寻找的解决方案，而不是作为一种解决方法。

# c++ - 浮点异常

> ID：13927256
> 
> 赞同：3
> 
> 时间：2012-12-18T06:06:24.537
> 
> 标签：c++

```
#include <cstdio>
#include <ctime>

int populate_primes(int array[])
{   
    const int max = 1000000; 
    char numbers[max+1];
    int count=1;
    array[0]=2;
    for(int i=max;i>0;i-=2)numbers[i]=0;
    for(int i=max-1;i>0;i-=2)numbers[i]=1;
    int i;  
    for(i=3;i*i<=max;i+=2){
        if(numbers[i]){
            for(int j=i*i;j<max+1;j+=i)numbers[j]=0;            array[count++]=i;
        }
    }
    int limit = max/2;
    for(;i<limit;i++)   if(numbers[i])array[count++]=i;
    return count;
}

int factorize(int number,int array[])
{
    int i=0,factor=1;
    while(number>0){
        if(number%array[i]==0){
            factor++;
            while(number%array[i]==0)number/=array[i];
        }
        i++;
    }
    printf("%d\n",factor);
    return factor;
}
int main()
{
    int primes[42000];
    const int max = 1000000;
    int factors[max+1];
    clock_t start = clock();
    int size = populate_primes(primes);
    factorize(1000,primes);
    printf("Execution time:\t%lf\n",(double)(clock()-start)/CLOCKS_PER_SEC);
    return 0;
} 
```

我试图找到不。使用简单算法的因素。填充素数部分运行正常，但分解部分不执行并给出浮点异常错误。

请查看代码并告诉我的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:14:14.937

在您的因式分解方法中，您访问数组 [0]，因为 i 的初始值为 0。该数组是由 populate_primes 填充的素数数组。但是填充 prime 不会写入 primes[0]，因为 count 的初始值为 1。

因此第一个元素没有被初始化，你可能会得到一个 div by 0 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:25:22.637

您需要将您从填充中获得的大小传递给分解。因式分解（整数，整数数组[]，整数大小）；
问题是你的 array[] 没有完全加载，它只加载到大小变量。所以你可能想检查一下。
factorize 内部的逻辑也是错误的。您需要检查 (number > 1) 而不是 (number >0)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:18:37.753

尝试使用下面的函数来查看一些问题：

```
#define MAX_PRIMES 42000
int factorize(int number,int array[])
{
  int i=0,factor=1;
  for (i=0; number>0 && i< MAX_PRIMES; i++){
    if (array[i] == 0 || array[i] == 1) {
      printf("Error: array[%d] = %d\n", i, array[i]);
    } else {
      if(number%array[i]==0){
        factor++;
        while(number%array[i]==0 && number>0) {
          printf("%d %d\n", number, array[i]);
          number/=array[i];
        }
      }   
    }   
  }
  printf("%d\n",factor);
  return factor;
} 
```

# php - 我的sql查询结果重复

> ID：13927257
> 
> 赞同：-1
> 
> 时间：2012-12-18T06:06:42.140
> 
> 标签：php, pdo

这是我正在使用的代码：

```
$sql = "SELECT Student_ID
        FROM course_student
        WHERE Course_ID='$CourseID'";

$Lresult=$DBInstance->CallDB($sql);
print_r($Lresult); 
```

我得到的结果是：

```
Array ( 
  [0] => Array ( [Student_ID] => S10812345 [0] => S10812345 ) 
  [1] => Array ( [Student_ID] => S1081299 [0] => S1081299 ) 
  [2] => Array ( [Student_ID] => S1089922 [0] => S1089922 ) 
) 
```

这是我想要的结果：

```
Array ( [0] => S10812345 [1] => S1081299 [2] => S1089922 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:29:02.547

检查您的 $Dbinstantse 类方法是否存在“fetchCol”，或其他一些返回线性数组的方法，其中包含第一列中的值或使用 array_map 将您的数组转换为线性

php 版本 < 5.3

```
$res = array_map( 
          create_function( '$item', 'return $item[\'Student_ID\'];'), 
          $array 
       ); 
```

php 版本 >= 5.3

```
$res = array_map( function ( $item ) { 
                      return $item['Student_ID']; 
                  }, 
                  $array 
       ); 
```

# java - JNLParseException [无法解析启动文件。第 56 行出错。]

> ID：13927265
> 
> 赞同：3
> 
> 时间：2012-12-18T06:07:51.770
> 
> 标签：java, spring-mvc, applet, jnlp, java-web-start

我正在尝试使用 jnlp 和 deployjava.js 加载一个小程序，但我无法解决这个问题。Stacktrace 如下：

```
JNLParseException[ Could not parse launch file. Error at line 56.]
    at com.sun.javaws.jnl.XMLFormat.throwNewException(Unknown Source)
    at com.sun.javaws.jnl.XMLFormat.parse(Unknown Source)
    at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
    at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
    at com.sun.javaws.jnl.LaunchDescFactory._buildDescriptor(Unknown Source)
    at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
    at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
    at sun.plugin2.applet.JNLP2Manager.initialize(Unknown Source)
    at sun.plugin2.main.client.PluginMain.initManager(Unknown Source)
    at sun.plugin2.main.client.PluginMain.access$200(Unknown Source)
    at sun.plugin2.main.client.PluginMain$2.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

这是我的 jnlp 文件：

```
<%-- 
    Document   : render
    Created on : 18 May, 2012, 2:16:37 PM
    Author     : Piyush
--%>

<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%
    String path = request.getContextPath();
    String protocol = request.getScheme();
    String domain = request.getServerName();
    String port = Integer.toString(request.getServerPort());
    String a = protocol + "://" + domain + ":" + port + path;
    path = protocol + "://" + domain + ":" + port + path + "/";
    String invitedUnder=request.getParameter("invitedUnder");
%>

<%@page contentType="application/x-java-jnlp-file" pageEncoding="UTF-8"%>
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="<%=path%>" href="">
    <information>
        <title>Enrollment</title>
        <vendor>Piyush</vendor>
    </information>
    <resources>
        <!-- Application Resources -->
        <j2se version="1.6+"
              href="http://java.sun.com/products/autodl/j2se" />
        <jar href="jnlp/FingerPrint_fat1.jar" main="true" />

    </resources>
    <applet-desc 
        name="Enrollment Applet"
        main-class="ui.InvitationApplet"
        width="600"
        height="600">
        <param name="separate_jvm" value="true" />
        <param name="firstName" value="${firstName}"/>
        <param name="lastName" value="${lastName}"/>
        <param name="loginId" value="${loginId}"/>
        <param name="roleId" value="${roleId}"/>
        <param name="urlCode" value="${urlCode}"/>
        <param name="databaseURL" value="${databaseURL}"/>
        <param name="userName" value="${userName}"/>
        <param name="createdBy" value="${createdBy}"/>
        <param name="password" value="root"/>    
        <param name="driverName" value="com.mysql.jdbc.Driver"/>
        <param name="path" value="<%=a%>"/>
        <param name="invitedUnder" value="${invitedUnder}"/>
    </applet-desc>
    <update check="background"/>
</jnlp> 
```

我没有弄错，因为前一天一切正常。我使用的是 SpringMVC 3.2 版本和 Java 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:56:13.787

`href=""``href`应该明确设置为有效路径，或完全省略。

请务必使用[JaNeLA](http://pscode.org/janela/)验证（典型）最终产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:31:24.917

您首先使用 JSTL 标记，然后再导入 JSTL。它应该类似于以下内容。

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<%-- 
    Document   : render
    Created on : 18 May, 2012, 2:16:37 PM
    Author     : Piyush
--%> 
```

# pandas - 应用于复制完整 MultiIndex 的组

> ID：13927267
> 
> 赞同：1
> 
> 时间：2012-12-18T06:08:06.067
> 
> 标签：pandas

我有以下问题 - 计算的输出给了我两个 atomic_number 字段：

```
In [7]: partition_functions
Out[7]: 
atomic_number  ion_number
14             0             11.291802
               1              5.866805
               2              1.004422
               3              2.000202
26             0             59.650557
               1             66.895978
               2             28.186253
               3              6.569105

In [8]: def group_func(group):
    return group[1:]/group[:-1].values
   ...: 

In [9]: partition_functions.groupby(level='atomic_number').apply(group_func)
Out[9]: 
atomic_number  atomic_number  ion_number
14             14             1             0.519563
                              2             0.171204
                              3             1.991397
26             26             1             1.121464
                              2             0.421345
                              3             0.233061 
```

我尝试了几件事——包括制作一个新系列，但没有任何效果。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:53:51.707

怎么样：

```
def group_func(group):
    return (group / group.shift(1))

partition_functions.groupby(level='atomic_number').apply(group_func).dropna() 
```

结果是：

```
 values
atomic_number ion_number          
14            1           0.519563
              2           0.171204
              3           1.991396
26            1           1.121464
              2           0.421345
              3           0.233061 
```

# android - 在 Android 中使用 onDestroy()

> ID：13927269
> 
> 赞同：18
> 
> 时间：2012-12-18T06:08:16.630
> 
> 标签：android, android-activity

如果Java提供Garbage Collection，那么Activity Lifecycle中的onDestroy()需要什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-18T06:32:52.487

onDestroy: The final call you receive before your activity is destroyed. This can happen either because the activity is finishing (someone called finish() on it), or because the system is temporarily destroying this instance of the activity to save space.

Here is an example......

```
 public void onDestroy() {

   super.onDestroy();

 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T06:19:01.430

操作系统决定事情何时“消失”。onDestroy 是为了让您的应用程序有最后的机会在 Activity 被销毁之前进行清理，但这并不意味着该 Activity 实际上会被 GCed。这是一篇与创建退出按钮相关的好[文章](http://blog.radioactiveyak.com/2010/05/when-to-include-exit-button-in-android.html)，我建议人们阅读。虽然这并不完全是您所问的，但这些概念将帮助您了解正在发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:11:22.090

`onDestroy()`是当您的活动关闭时由框架调用的方法。调用它是为了允许您的活动执行它可能希望执行的任何关闭操作。该方法实际上与垃圾收集没有任何关系（尽管您的关闭操作（如果有的话）可能涉及释放可以被 gc'ed 的额外资源）。特别是，它与 C++ 析构函数无关（尽管它的名字）。

如果您没有要执行的关闭操作，则无需覆盖它。基类基本上什么都不做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-16T21:58:24.930

您可以使用 onDestroy() 来完成程序。我在下面的代码中使用它来告诉服务器客户端正在关闭其与服务器的套接字，以便我可以通知服务器端的用户客户端已断开连接。

客户：

```
...
protected void onDestroy(){
    super.onDestroy();
    if(connected) {
        clientMessage.println("exit");
        clientMessage.close();
        try {
            socket.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    finish();
}
... 
```

服务器：

```
...
while (connected) {
    input = clientMessage.readLine();
    if ("exit".equals(input)){
        break;
    }
    ...
}
... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-01T20:47:23.137

在 Android Activity Lifecycle 的[`onDestroy`](https://developer.android.com/guide/components/activities/activity-lifecycle#ondestroy)文档中：

> `onDestroy()`在活动被销毁之前被调用。系统调用此回调是因为：
> 
> *   活动正在**完成**（由于用户完全关闭活动或由于在活动上[`finish()`](https://developer.android.com/reference/android/app/Activity#finish())被调用），或者
> *   由于配置更改（例如设备轮换或多窗口模式），系统正在**临时销毁活动**

[`Activity#onDestroy()`API 文档](https://developer.android.com/reference/android/app/Activity.html#onDestroy())也很好地回答了这个问题：

> **此方法通常用于释放资源，如与活动相关联的线程，以便在其应用程序的其余部分仍在运行时**，被破坏的活动不会留下这些东西。[资源](https://developer.android.com/reference/android/app/Activity.html#onDestroy())

正如文档中的引述所说，它用于防止被破坏的活动留下一些东西（例如，通过引用，线程泄漏内存），**但只有当应用程序的其余部分仍然运行时**。如果应用程序进程结束，您是否忘记清理线程或其他资源也没关系，因为操作系统会为您完成。您不需要覆盖`onDestroy`.

没有必要做[**sam786**正在做的事情](https://stackoverflow.com/a/13927550/7365866)（覆盖并调用 super 方法），因为那绝对没用。所有其他答案似乎都遵循“清理”的路线，但没有解释什么样的清理或何时清理。你不应该在 中保存任何数据`onDestroy()`，因为你**不能**保证它会被调用，所以有时你会丢失数据。例如，当您按下主页按钮时，它不会被调用（您希望保存数据的情况）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T06:11:15.353

**onDestroy 可以让您的应用程序有最后的机会在 Activity 被销毁之前进行清理**

Android中的文章[退出按钮](http://blog.radioactiveyak.com/2010/05/when-to-include-exit-button-in-android.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T06:12:07.787

它让你的程序有机会做一些事情，比如清理资源（比如线程），这样它们就不会污染相关的应用程序。如果您对它没有任何用处，请不要覆盖它。

请参阅：[onDestroy()-Android 参考](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-19T13:43:13.487

onDestroy 可能会在活动被销毁时被调用，但你不能指望它。在某些情况下，系统会简单地终止 Activity 的宿主进程，而不会在其中调用此方法（或任何其他方法），因此不应使用它来执行打算在进程消失后保留的事情。

请参阅：http: [//developer.android.com/reference/android/app/Activity.html#onDestroy()](http://developer.android.com/reference/android/app/Activity.html#onDestroy())

# stata - 在 stata 中使用 xtgls 估计 4 年内不平衡面板数据的系数时，可能会导致什么错误？

> ID：13927271
> 
> 赞同：1
> 
> 时间：2012-12-18T06:08:20.763
> 
> 标签：stata

我使用不平衡面板数据已有 4 年了。在尝试确定哪种时变模型（xtgls、xtreg、re 或 xtgee）最适合我的分析时，我试图在同方差和异方差假设下估计 xtgls 的系数。当我使用异质选项运行此模型时，我得到了非常高的 z 分数 (>30)，并且对在所有其他模型中都很重要的项有显着影响。

此外，当我尝试运行 lrtest 比较异方差模型和同方差模型时，我得到一个错误，上面写着“hetero does not contain scalar e(ll)”。我读到解决此问题的一种方法是添加选项 igls，据说它提供的系数与没有 igls 选项的模型相同。但是，我的模型不会与 igls 选项收敛。我认为异性 xtgls 模型的这些奇怪结果可能是因为某些时间不变变量被错误编码（即，一年编码为女性 = 1 的人，另一年编码为女性 = 0）。我检查了我的 2 个 ivs，但事实并非如此。我无法弄清楚还有什么可能导致这种情况。

所以我的具体问题是：

1.  为什么我会收到这个错误 - “hetero does not contain scalar e(ll)” - for the lrtest 比较同源模型和异源模型？这是什么意思？以下是我的状态代码：

xtgls Continuous_DV IV1 IV2 IV1xIV2，i（person_id）面板（hetero）

估计存储异性

xtgls 连续_DV IV1 IV2 IV1xIV2, i(person_id)

本地 df=e(N_g)-1

显示“df”

lrtest 异类., df(`df')

我运行了 xttest3，它表明错误是异类的。

2.  igls 是否适合解决我在 lrtest 之后遇到的错误（“hetero does not contain scalar e(ll)”）？如果是这样，什么可能导致这个带有 igls 选项的模型不收敛？下面是代码：

xtgls 连续_DV IV1 IV2 IV1xIV2, i(person_id) 面板(hetero) igls

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T14:53:07.170

在 Stata 中，该`xtgls`命令不估计对数似然，因为它不是最大似然估计。因此，您无法从该模型中获得对数似然检验。要获得对数似然，您需要使用上面的设置，而是使用`igls`选项。这是一个适当的解决方法，并且是完全合适的；我认为您不需要从削减数据集开始。

或者，您可以使用不同的估算器。当您的面板很少且较宽时，GLS 是合适的。如果您的面板非常短（每个人只有几年），您可能应该使用类似`xtreg`. [http://www.stata.com/support/faqs/statistics/xtgls-versus-regress/](http://www.stata.com/support/faqs/statistics/xtgls-versus-regress/)

# c++ - 如何将结构打包从 vc++ 转换为 gcc

> ID：13927273
> 
> 赞同：1
> 
> 时间：2012-12-18T06:08:46.597
> 
> 标签：c++

如何在 Linux 中将以下 vc++ 打包命令翻译成 gcc 命令？我知道如何为单个结构执行此操作，但是如何为一系列结构执行此操作？

```
#pragma pack(push, 1) // exact fit - no padding
//structures here
#pragma pack(pop) //back to whatever the previous packing mode was 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T06:23:54.993

您可以将**属性**((packed)) 添加到各个数据项以实现此目的。在这种情况下，对数据项应用打包，因此无需恢复旧模式。

例如：对于结构：

```
typedef struct _MY_STRUCT
{

}__attribute__((packed)) MY_STRUCT; 
```

对于数据成员：

```
struct MyStruct {

    char c;

    int myInt1 __attribute__ ((packed));

    char b;

    int myInt2 __attribute__ ((packed));

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:20:04.427

gcc 也支持这些编译指示。参见编译器文档： http: [//gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html](http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html)

或者，您可以使用更特定于 gcc 的

```
__attribute__(packed) 
```

例子：

```
struct foo {
  int16_t one;
  int32_t two;
} __attribute__(packed); 
```

[http://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Type-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Type-Attributes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:22:58.937

根据[http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html，gcc](http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html)应该`#pragma pack`是直接支持的，所以可以直接使用。

`gcc way`指定对齐的 是，`__attribute__((aligned(x)))`其中`x`需要对齐。

您还可以使用`__attribute__((packed))`来指定紧密包装的结构。

参考[http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Type-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Type-Attributes.html)

# php - 从 Flash 从 PHP 调用时，ftp_connect() 不起作用

> ID：13927277
> 
> 赞同：1
> 
> 时间：2012-12-18T06:09:15.397
> 
> 标签：php, flash, ftp

我有一个 Flash 应用程序和几个 PHP 脚本。我想创建一个文件夹并将图像上传到它。

我的 php 代码位于“http://dev.myapp.com.au/php/testFtp.php”，我的存储位置是“storagetest.myapp.com.au”。这些域都存在于同一个“myapp”服务器上。

现在我只想创建新文件夹。在我的 PHP 中，我使用 ftp_connect()、ftp_login() 和 ftp_mkdir()。

当我的测试 PHP 从我的浏览器运行但不是从我的 Flash 应用程序调用时，这工作正常。这是我的 php 脚本的一部分：

```
$ftp_server = "storagetest.myapp.com.au";
$ftp_user_name = "name";
$ftp_user_pass = "pass";
$dirNew = "/web/test/storage/new_folder";

$conn_id = ftp_connect($ftp_server) or die("Couldn't connect to $ftp_server");
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
$mk = ftp_mkdir($conn_id, $dirNew);
ftp_close($conn_id); 
```

编辑：

以及如何从 Flash 调用它：

```
sMyUrl = "http://dev.myapp.com.au/php/testFtp.php";
var myData:URLRequest = new URLRequest( sMyUrl );
myData.method = URLRequestMethod.POST;
var variables:URLVariables = new URLVariables();
(set some vars here)
myData.data = variables; 
m_uloader = new URLLoader(); 
m_uloader.dataFormat = URLLoaderDataFormat.TEXT;  
m_uloader.addEventListener(Event.COMPLETE, onRecordCompleteHandler); 
m_uloader.addEventListener(IOErrorEvent.IO_ERROR, onIoErrorHandler); 
m_uloader.load(myData); 
```

此 Flash 代码适用于其他 PHP 脚本。

我想我已经找到了 ftp_connect() 的问题。当从 Flash 调用并且这是在脚本中时，整个脚本将停止工作。甚至我的测试回显语句也没有返回。

任何想法为什么这不起作用？谢谢 ：）

# android - [JqueryMobile]使用 jm，页面加载后我的标签被禁用

> ID：13927278
> 
> 赞同：0
> 
> 时间：2012-12-18T06:09:16.647
> 
> 标签：android, jquery, jquery-mobile

我正在使用 JM 开发应用程序。完成静态页面后，我参考 JM：

```
<link href="css/jquery.mobile-1.0.1.min.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" charset="utf-8" src="js/jquery-1.7.2.min.js"></script>
<script src="js/jquery.mobile-1.0.1.min.js" type="text/javascript"></script> 
```

令人惊奇的是，我的一些标签（例如按钮、选择...）被禁用了。删除 JM 后，标签运行良好。

我用 firefox 调试代码，发现我添加的所有选择标签都禁用了属性。例子：

```
<div class="ui-select">
<div data-theme="[object Object]" class="ui-btn ui-btn-up-[object Object] ui-btn-inline ui-btn-icon-[object ui-btn-corner-all ui-shadow ui-disabled" aria-disabled="true">
<span class="ui-btn-inner ui-btn-corner-all">
<span class="ui-btn-text">---Select Area---</span>
<span class="ui-icon ui-icon-[object Object] ui-icon-shadow"></span>
</span>
<select class="validate[required] mobile-selectmenu-disabled ui-state-disabled" id="plannerArea" disabled="disabled" aria-disabled="true">
        <option value="">---Select Area---</option>
        <option value="3">tetaa</option>
<option value="1">testArea666</option></select>
</div></div> 
```

这怎么可能发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:30:27.283

尝试使用最新版本的 JQuery Mobile 与版本 1.0.1。

# android - 不使用 Android 支持库时的 NavUtils 等价物？

> ID：13927282
> 
> 赞同：8
> 
> 时间：2012-12-18T06:09:31.000
> 
> 标签：android, navigation, android-4.0-ice-cream-sandwich, android-version, android-support-library

*[Android Developers Google Group（链接](https://groups.google.com/d/topic/android-developers/h8nFxDBwGIw/discussion)）上的某个人也提出了这个问题，但没有答案......*

我最近在 Eclipse 中从我的 Android 项目中删除了 v4 支持库，因为我的应用程序仅针对 Android 4.0（Ice Cream Sandwich）及更高版本。我现在正在浏览所有给我错误的支持库引用。

特别是`NavUtils`，它似乎是 Activity 导航中使用的支持库类。例子：

```
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

`NavUtils`不使用支持库时的等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T06:20:29.043

查看 的源代码`NavUtils`，如有必要，只需将其复制到您的项目中即可。它只是获取清单中设置的父活动并启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T12:46:38.637

如果您不想在项目中拥有整个 android v4 支持库，我发现 @Nikolay 的方法是最好的。

这是您应该复制到项目中的类列表：

*   [导航工具](https://github.com/android/platform_frameworks_support/blob/master/v4/java/android/support/v4/app/NavUtils.java?source=c)
*   [NavUtilsJB](https://github.com/android/platform_frameworks_support/blob/master/v4/jellybean/android/support/v4/app/NavUtilsJB.java?source=c)
*   [意图兼容](https://github.com/android/platform_frameworks_support/blob/master/v4/java/android/support/v4/content/IntentCompat.java?source=cc)
*   [IntentCompatHoneycomb](https://github.com/android/platform_frameworks_support/blob/master/v4/honeycomb/android/support/v4/content/IntentCompatHoneycomb.java?source=cc)
*   [IntentCompatIcsMr1](https://github.com/android/platform_frameworks_support/blob/master/v4/ics-mr1/android/support/v4/content/IntentCompatIcsMr1.java?source=cc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T09:08:59.553

Jelly Beans 的 Android 版本已将 NavUtils 合并到 Activity 类中。

不需要处理这种**情况：onOptionsItemSelected()中的android.R.id.home**。或者，您可以在 onOptionsItemSelected() 中为这种情况**返回 false 。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T00:23:19.350

这是我能找到的最简单的答案，以及我在代码中所做的事情：

只需更换：

```
NavUtils.navigateUpFromSameTask(this); 
```

和：

```
navigateUpTo(getParentActivityIntent()); 
```

希望这可以帮助！

# java - CircularGauge.getFaceBrush() 在 Android 上崩溃

> ID：13927284
> 
> 赞同：0
> 
> 时间：2012-12-18T06:09:47.860
> 
> 标签：java, android, teechart

显然，这不应该崩溃！

```
try {
    ChartBrush b = gauge.getFaceBrush();
} catch (Exception e) {
    e.printStackTrace(); // NullPointerException
} 
```

运行 Android 4.1.2，Nexus S。

# html - CSS 过滤多个 URL - 同时获得模糊和灰度

> ID：13927286
> 
> 赞同：0
> 
> 时间：2012-12-18T06:09:55.430
> 
> 标签：html, css, blur, grayscale

这是 CSS 模糊过滤器的工作代码：

```
filter: blur(3px); -webkit-filter: blur(3px); -moz-filter: blur(3px);
-o-filter: blur(3px); -ms-filter: blur(3px);
filter: url('images/blur.svg#blur'); 
```

blur.sv 在哪里：

```
<svg version="1.1" xmlns="http://www.w3.org/2000/svg">
<filter id="blur">
<feGaussianBlur stdDeviation="3" />
</filter>
</svg> 
```

这适用于灰度：

```
filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); /* Firefox 10+, Firefox on Android */
filter: gray; /* IE6-9 */
-webkit-filter: grayscale(100%); /* Chrome 19+, Safari 6+, Safari 6+ iOS */ 
```

但是我如何使它们同时进行灰度和模糊（尤其是使用 URL）？我试过：

```
filter: blur(3px) grayscale(100%);
-webkit-filter: blur(3px) grayscale(100%);
-moz-filter: blur(3px) grayscale(100%);
-o-filter: blur(3px) grayscale(100%);
-ms-filter: blur(3px) grayscale(100%);
filter: url('images/blur.svg#blur'), url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); 
```

但它只给了我没有模糊的灰度。任何帮助，将不胜感激。

编辑：我想让它在最新的主要浏览器中运行，正如 Rakesh Juyal 所说，它在 Chrome 中运行良好，但在 Firefox 中运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:37:10.400

请在此处查看工作示例：

[http://jsbin.com/okemik/6](http://jsbin.com/okemik/6)

我用模糊+灰度滤镜制作了一个svg元素：

```
<svg height="0" xmlns="http://www.w3.org/2000/svg">
  <filter id="svgBlur" x="-5%" y="-5%" width="110%" height="110%">
    <feGaussianBlur in="SourceGraphic" stdDeviation="5"/>
  </filter>

  <filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/></filter>

  <filter id='grayscaledBlur'>
    <feGaussianBlur in="SourceGraphic" stdDeviation="3"/>

    <feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/>

    </filter>

</svg> 
```

# mongodb - 如何从 mongodb 集合中读取特定的键值对

> ID：13927295
> 
> 赞同：9
> 
> 时间：2012-12-18T06:11:13.653
> 
> 标签：mongodb, mongodb-query

如果我有一个`users`这样的 mongodb 集合：

```
{
  "_id": 1,
  "name": {
    "first" : "John",
    "last" :"Backus"
  },
} 
```

如何在`name.first`不提供`_id`或任何其他参考的情况下从中检索。此外，是否有可能仅拉出 `name^ 可以给我嵌入键的数组（在这种情况下是第一个和最后一个）？怎么可能呢？

`db.users.find({"name.first"})`对我不起作用，我得到了：

> SyntaxError "缺少：在属性 id (shell) 之后：1

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-18T06:16:17.177

的第一个参数`find()`是查询条件，而该`find()`方法的第二个参数是投影，它采用文档的形式，其中包含字段列表，以便从结果集中包含或排除。您可以指定要包含的字段（例如`{ field: 1 }`）或指定要排除的字段（例如`{ field: 0 }`）。`_id`除非明确排除，否则该字段是隐含的。

在您的情况下， db.users.find({name.first}) 将给出错误，因为它应该是搜索条件。

获取名称 json : `db.users.find({},{name:1`})

如果您只想获取 name.first

```
db.users.find({},{"name.first":1}) 
```

MongoDB 文档链接[在这里](http://docs.mongodb.org/manual/core/read-operations/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-07T10:24:42.840

获取所有记录详细信息： db.users.find({"name.first":""}) 仅获取名称或特定字段： db.users.find({{},"name.X":" "}); 其中 X 可以是第一个，最后一个。

如果需要在数组内部遍历键值对作为 db.users.find({"name.first._id":"xyz"});

# javascript - 如何将文本从弹出窗口返回到chrome可以支持的父窗口

> ID：13927303
> 
> 赞同：1
> 
> 时间：2012-12-18T06:11:32.310
> 
> 标签：javascript, jquery, asp.net-mvc-3, google-chrome

我将弹出窗口选择的值返回到父窗口。它在 IE 中运行良好，但 chrome 不支持它，我该如何解决浏览器兼容问题。

```
//Parent Window

<script type="text/javascript">
    $("#Open-Popup").live("click", function () {
        var s = window.showModalDialog('AddDependentConfiguration?QuestionID= @question.QuestionID&ProjectModuleID=@question.ProjectModule.ProjectModuleID', window);
        alert(s);
    });
</script>

//Pop-up window
<script type="text/javascript">
    var opener = null;
    $(document).ready(function () {

        window.name = "modal";
        //        alert(window.dialogArguments);
        // alert(window.opener);;
        if (window.dialogArguments) // Internet Explorer supports window.dialogArguments
        {
            opener = window.dialogArguments;
        }
        else // Firefox, Safari, Google Chrome and Opera supports window.opener
        {
            if (window.opener) {
                window.returnValue = 'sonam';
                window.close();
                return false;
                //opener = window.opener;

            }
        }
        $("#Pwindow").val(opener);
    });
    //        function showDiv(Grid) {
    //            document.getElementById("Grid").style.display = 'block';
    //        }
    debugger;
    $(".select").click(function () {
        //  alert(opener);
        var $td = $(this).closest('td');

        var $tr = $td.parent();

        var QText = $tr.children().eq(1).text();
        alert('Question text' + QText);
        var QID = $tr.children().eq(1).find("input[type=hidden]").val();
        alert('question id' + QID);

        opener.$("#DQID").val(QID);

        opener.$("#DQText").val(QText);      
        window.close();
    });

</script> 
```

# mysql - 在 VB.NET 中合并两个 mysql 表并将结果放入 datagrid

> ID：13927304
> 
> 赞同：0
> 
> 时间：2012-12-18T06:11:35.737
> 
> 标签：mysql, vb.net

我有两个 MySQL 表，

tblloan注册表

```
LoanID     EMPNumber     Date      Amount     Status
1          1111         2012-10-01  50000        0
2          2222         2012-10-10  10000        1 
```

tblLoanAccount

```
ID     LoanID     Date     Payment     Interest     Total     Auto     Installment
1         1       2012-10-25  5000         0         5000        0           1
2         1       2012-11-01     0        100         100        1           0
3         1       2012-11-25  5000        100        5100        0           2
4         2       2012-11-25  1500         0         1500        0           1 
```

成员 1111 的输出：

```
Date          Description     Principle    Interest      Balance
2012-10-25    Installment: 1     5000          0           45000
2012-11-01    Interest             0          100          45100
2012-11-25    Installment: 2     5000         100          40000 
```

我尝试了以下方法，但它显示错误。

```
SELECT tblLoanAccount.Date, tblLoanAccount.Payment, tblLoanAccount.Interest, 
tblLoanAccount.Total, tblLoanAccount.Auto, tblLoanAccount.Installment FROM " &
"tblLoanAccount WHERE tblLoanAccount.EMPNumber=" & cmbEMPNumber.Text & " AND 
tblLoanAccount.LoanID = '1' AND tblLoanAccount.Total <> 0 ORDER BY tblLoanAccount.ID 
```

错误：

![在此处输入图像描述](../Images/8c6bf0ecaad762d110cb84f84c929c95.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:51:13.780

这个错误是因为你还没有加入表。

将此查询用于您的预期答案。您应该加入两个表，然后只有您可以获得输出。

```
SELECT tblLoanAccount.Date, tblLoanAccount.Payment, tblLoanAccount.Interest,
    tblLoanAccount.Total, tblLoanAccount.Auto, tblLoanAccount.Installment,     
    if(Installment = 0, 'Interest', concat('Installment : ', Installment)) as Description
FROM tblLoanAccount 
JOIN tblloanRegistry ON tblloanRegistry.LoanID = tblLoanAccount.LoanID
WHERE tblloanRegistry.EMPNumber= 1111 
    AND tblLoanAccount.LoanID = 1 
    AND tblLoanAccount.Total <> 0 
ORDER BY tblLoanAccount.ID 
```

您的表架构是在[此链接](http://sqlfiddle.com/#!2/7e223/3)中创建的。请通过它。

# android - 如何在android中的ScrollView上设置手势的onFling（）事件？

> ID：13927305
> 
> 赞同：5
> 
> 时间：2012-12-18T06:11:36.487
> 
> 标签：android, scrollview, gesture

我将`onFling()`Gesture 的事件设置为 on `ScrollView`，但它在 ScrollView 上不起作用，

```
package com.doubletap;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.GestureDetector;
import android.view.GestureDetector.OnDoubleTapListener;
import android.view.GestureDetector.OnGestureListener;
import android.view.MotionEvent;
import android.widget.TextView;

public class DoubleTapActivity extends Activity implements OnGestureListener 
{
private GestureDetector gd;

private TextView tvTap;

String TAG = getClass().getSimpleName();

private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tvTap = (TextView)findViewById(R.id.tvTap);

    gd = new GestureDetector(this);

    gd.setOnDoubleTapListener(new OnDoubleTapListener()
    {
        @Override
        public boolean onDoubleTap(MotionEvent e) 
        {
            return false;
        }

        @Override
        public boolean onDoubleTapEvent(MotionEvent e) 
        {
            return false;
        }

        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) 
        {
            return false;
        }
    });
}

@Override
public boolean onTouchEvent(MotionEvent event) 
{
    return gd.onTouchEvent(event);//return the double tap events
}

@Override
public boolean onDown(MotionEvent e) 
{
    return false;
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) 
{

    try {
        if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
        {
             return false;
        }

        if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
             tvTap.setText("Flip Right to Left");
             Log.v(TAG, "Right to Left");
        }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            tvTap.setText("Flip Left to Right");
             Log.v(TAG, "Left to Right");
        }
    } catch (Exception e)
    {

    }
    return false;
}

@Override
public void onLongPress(MotionEvent e) 
{
}

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) 
{
    return false;
}

@Override
public void onShowPress(MotionEvent e) 
{
}

@Override
public boolean onSingleTapUp(MotionEvent e) 
{
    return false;
}
} 
```

主要的.xml

> ```
> <?xml version="1.0" encoding="utf-8"?>
> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
> android:layout_width="fill_parent"
> android:layout_height="fill_parent"
> android:orientation="vertical">
> <TextView
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_gravity="center_horizontal"
>     android:text="@string/hello"
>     android:textStyle="bold" />
> <TextView
>     android:id="@+id/tvTap"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_marginTop="20dip" >
> </TextView>
> <TextView
>     android:id="@+id/tvTapEvent"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_marginTop="10dip" >
> </TextView>
> <ScrollView
>     android:id="@+id/scroll"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent" >
>     <LinearLayout
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:orientation="vertical" >
>         <Button
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:text="Button1" />
>         <Button
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:text="Button2" />
>         <Button
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:text="Button3" />
>         <Button
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:text="Button4" />
>         <Button
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:text="Button5" />
>         <Button
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:text="Button6" />
>         <Button
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:text="Button7" />
>         <Button
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:text="Button8" />
>         <Button
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:text="Button9" />
>         <Button
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:text="Button10" />
>     </LinearLayout>
> </ScrollView> 
> ```

有人知道如何在 Scrollview 上实现 onFling() 事件吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T06:34:34.810

This works for me. Hopefully you can add your double tap actions in here.

```
 public class ScrollViewFling extends Activity 
{
    private GestureDetector mGesture;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.scrollviewfling);
        mGesture = new GestureDetector(this, mOnGesture);

    }
    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        boolean handled = super.dispatchTouchEvent(ev);
        handled = mGesture.onTouchEvent(ev);    
        return handled;
    }

    private OnGestureListener mOnGesture = new GestureDetector.SimpleOnGestureListener() {

        @Override
        public boolean onDown(MotionEvent e) {
            return false;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            Log.v("fling", "Flinged.");
            return true;
        }

        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
            return false;
        }
    };
}; 
```

# cordova - 如何在phonegap中循环播放音频？

> ID：13927316
> 
> 赞同：7
> 
> 时间：2012-12-18T06:12:53.093
> 
> 标签：cordova, cordova-plugins

我正在使用phonegap 2.2.0。我尝试了一些代码来循环播放音频而不会中断，但它**在我的 android 设备上不起作用**。它只播放一次。这是我的代码：

```

 function playAudio(url) {

        var my_media = new Media(url,
            function() {
                console.log("playAudio():Audio Success");
            },
            function(err) {
                console.log("playAudio():Audio Error: "+err);
            },
            function(status) {
                console.log("playAudio():Audio Status: "+status);
            }
        });

        // Play audio
        my_media.play({numberOfLoops:99});
    } 

```

你能告诉我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T03:30:31.850

聆听状态变化并开始支付 MEDIA_STOPPED。如果您希望用户停止声音，请使用 snd.pause() 而不是 snd.stop()

这对我有用：

```
 document.addEventListener("deviceready", onDeviceReady, false);

    var getPhoneGapPath = function() {
        var path = window.location.pathname;
        path = path.substr( path, path.length - 10 );
        return path;
    };

    var snd = null;

    function onDeviceReady(){
        snd = new Media( getPhoneGapPath() + "sound/funk_game_loop.mp3", onSuccess, onError, onStatus);
        snd.play();
    }

    // onSuccess Callback
    function onSuccess() {
    }
    // onError Callback 
    function onError(error) {
    }
    // onStatus Callback 
    function onStatus(status) {
        if( status==Media.MEDIA_STOPPED ) {
            snd.play();
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T06:30:45.423

在 Phonegap 中，Android 尚不支持循环播放 - 因此 numberOfLoops 除了在 iOS 设备上什么都不做。

# delphi - 什么是 Free Pascal 相当于 Delphi 的 TStopWatch？

> ID：13927317
> 
> 赞同：11
> 
> 时间：2012-12-18T06:13:01.357
> 
> 标签：delphi, freepascal, lazarus, stopwatch

我需要在 Free Pascal 中实现简单的性能基准测试。在 Delphi 我使用`TStopWatch`来自诊断单元的记录，我可以在 Free Pascal/Lazarus 中使用什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T14:14:45.070

这是一个仿照 Delphi 在线文档的实现：

```
{        High frequency stop watch implemntation.
         Copyright (c) 2012 by Inoussa OUEDRAOGO

         This source code is distributed under the Library GNU General Public License 
         with the following modification:

            - object files and libraries linked into an application may be
              distributed without source code.

         This program is distributed in the hope that it will be useful,
         but WITHOUT ANY WARRANTY; without even the implied warranty of
         MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

     **********************************************************************}

{$IFDEF FPC}
  {$mode objfpc}{$H+}
  {$modeswitch advancedrecords}
{$ENDIF}

{$IFDEF MSWINDOWS}
    {$IFNDEF WINDOWS}
        {$DEFINE WINDOWS}
    {$ENDIF WINDOWS}
{$ENDIF MSWINDOWS}

unit stopwatch;

interface
uses
  SysUtils
  {$IFDEF LINUX}
  ,unixtype, linux
  {$ENDIF LINUX}
  ;

type

  { TStopWatch }

  TStopWatch = record
  private
    const
      C_THOUSAND = 1000;
      C_MILLION  = C_THOUSAND * C_THOUSAND;
      C_BILLION  = C_THOUSAND * C_THOUSAND * C_THOUSAND;
      TicksPerNanoSecond   = 100;
      TicksPerMilliSecond  =  10000;
      TicksPerSecond       = C_BILLION div 100;
    Type
      TBaseMesure =
        {$IFDEF WINDOWS}
           Int64;
        {$ENDIF WINDOWS}
      {$IFDEF LINUX}
           TTimeSpec;
      {$ENDIF LINUX}
  strict private
    class var FFrequency : Int64;
    class var FIsHighResolution : Boolean;
  strict private
    FElapsed : Int64;
    FRunning : Boolean;
    FStartPosition : TBaseMesure;
  strict private
    procedure CheckInitialization();inline;
    function GetElapsedMilliseconds: Int64;
    function GetElapsedTicks: Int64;
  public
    class function Create() : TStopWatch;static;
    class function StartNew() : TStopWatch;static;
    class property Frequency : Int64 read FFrequency;
    class property IsHighResolution : Boolean read FIsHighResolution;
    procedure Reset();
    procedure Start();
    procedure Stop();
    property ElapsedMilliseconds : Int64 read GetElapsedMilliseconds;
    property ElapsedTicks : Int64 read GetElapsedTicks;
    property IsRunning : Boolean read FRunning;
  end;

resourcestring
  sStopWatchNotInitialized = 'The StopWatch is not initialized.';

implementation
{$IFDEF WINDOWS}
uses
  Windows;
{$ENDIF WINDOWS}

{ TStopWatch }

class function TStopWatch.Create(): TStopWatch;
{$IFDEF LINUX}
var
  r : TBaseMesure;
{$ENDIF LINUX}
begin
  if (FFrequency = 0) then begin
{$IFDEF WINDOWS}
    FIsHighResolution := QueryPerformanceFrequency(FFrequency);
{$ENDIF WINDOWS}
{$IFDEF LINUX}
    FIsHighResolution := (clock_getres(CLOCK_MONOTONIC,@r) = 0);
    FIsHighResolution := FIsHighResolution and (r.tv_nsec <> 0);
    if (r.tv_nsec <> 0) then
      FFrequency := C_BILLION div r.tv_nsec;
{$ENDIF LINUX}
  end;
  FillChar(Result,SizeOf(Result),0);
end;

class function TStopWatch.StartNew() : TStopWatch;
begin
  Result := TStopWatch.Create();
  Result.Start();
end;

procedure TStopWatch.CheckInitialization();
begin
  if (FFrequency = 0) then
    raise Exception.Create(sStopWatchNotInitialized);
end;

function TStopWatch.GetElapsedMilliseconds: Int64;
begin
  {$IFDEF WINDOWS}
    Result := ElapsedTicks * TicksPerMilliSecond;
  {$ENDIF WINDOWS}
  {$IFDEF LINUX}
    Result := FElapsed div C_MILLION;
  {$ENDIF LINUX}
end;

function TStopWatch.GetElapsedTicks: Int64;
begin
  CheckInitialization();
{$IFDEF WINDOWS}
  Result := (FElapsed * TicksPerSecond) div FFrequency;
{$ENDIF WINDOWS}
{$IFDEF LINUX}
  Result := FElapsed div TicksPerNanoSecond;
{$ENDIF LINUX}
end;

procedure TStopWatch.Reset();
begin
  Stop();
  FElapsed := 0;
  FillChar(FStartPosition,SizeOf(FStartPosition),0);
end;

procedure TStopWatch.Start();
begin
  if FRunning then
    exit;
  FRunning := True;
{$IFDEF WINDOWS}
  QueryPerformanceCounter(FStartPosition);
{$ENDIF WINDOWS}
{$IFDEF LINUX}
  clock_gettime(CLOCK_MONOTONIC,@FStartPosition);
{$ENDIF LINUX}
end;

procedure TStopWatch.Stop();
var
  locEnd : TBaseMesure;
  s, n : Int64;
begin
  if not FRunning then
    exit;
  FRunning := False;
{$IFDEF WINDOWS}
  QueryPerformanceCounter(locEnd);
  FElapsed := FElapsed + (UInt64(locEnd) - UInt64(FStartPosition));
{$ENDIF WINDOWS}
{$IFDEF LINUX}
  clock_gettime(CLOCK_MONOTONIC,@locEnd);
  if (locEnd.tv_nsec < FStartPosition.tv_nsec) then begin
    s := locEnd.tv_sec - FStartPosition.tv_sec - 1;
    n := C_BILLION + locEnd.tv_nsec - FStartPosition.tv_nsec;
  end else begin
    s := locEnd.tv_sec - FStartPosition.tv_sec;
    n := locEnd.tv_nsec - FStartPosition.tv_nsec;
  end;
  FElapsed := FElapsed + (s * C_BILLION) + n;
{$ENDIF LINUX}
end;

end. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T17:58:56.870

看看Jedi 项目中的[TJclCounter](http://wiki.delphi-jedi.org/wiki/JCL_Help%3aTJclCounter)。通过考虑 QueryPerformanceCounter 调用开销，它的实现甚至比 Delphi 的 TStopwatch 更复杂。

# javascript - 将 json 动态添加到 spacetree 视图

> ID：13927320
> 
> 赞同：1
> 
> 时间：2012-12-18T06:13:18.527
> 
> 标签：javascript, jquery, ruby-on-rails, infovis

我正在使用 spacetree js 来显示树视图。

我想在单击节点后按需加载 json。

我已经使用硬编码的 json 值运行了示例示例。

但我不知道如何使它动态.....在选择节点后显示他们的孩子并保留他们的父母。我有两个问题

如何制作

1.要么重新加载整个json对象

2 或者将选中的childrens json添加到之前的json对象中

我需要这个例子..我正在使用 ruby​​ on rails 做应用程序，所以他们制作自定义 json 的任何方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:24:05.423

您可以使用[jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)方法或[$.ajax()](http://api.jquery.com/jQuery.ajax/)之类的方法从远程服务器加载 JSON，而不是示例中的硬编码 JSON 对象。会是这样的：

```
$.ajax({
  url: '/tree/structure',
  type: 'GET',
  dataType: 'JSON',
  success: function(data) {
    json = $.parseJSON(data);
  }
}); 
```

所以在 Rails 中，你可以创建一个控制器来返回 JSON 响应，如下所示：

```
def treedata
  @tree = Tree.create() # object with tree structure

  respond_to do |f|
    f.json{ render :json => @tree }
  end
end 
```

希望以上对一些想法有所帮助。

# java - 阅读短信收件箱在android中不起作用？

> ID：13927321
> 
> 赞同：1
> 
> 时间：2012-12-18T06:13:20.717
> 
> 标签：java, android, cordova, cordova-2.0.0

我正在使用科尔多瓦 phonegap 2.1.0

我已从以下位置下载代码： [Phone Gap SMS Read Extension](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SMS%20inbox_sent%20access)

然后我根据新的cordova库修改了代码

修改后的 Smsread.js

```
var SMSReader = function () {};

SMSReader.prototype.getInbox = function(params, success, fail) {
    return cordova.exec(function (args) {
    success(args);
}, function(args) {
    fail(args);
}, 'SMSReader', 'inbox', [params]);
};

SMSReader.prototype.getSent = function(params, success, fail) {
return cordova.exec(function (args) {
    success(args);
}, function(args) {
    fail(args);
}, 'SMSReader', 'sent', [params]);};
if (!window.plugins) {
window.plugins = {};
}
 if (!window.plugins.SMSReader) {
window.plugins.SMSReader = new SMSReader();
}
//cordova.addConstructor(function () {
//    cordova.addPlugin("SMSReader", new SMSReader());
//    PluginManager.addService("SMSReader", "com.example.sample2");
//}); 
```

修改 SMSReader.java

```
package com.example.sample2;

import android.content.ContentResolver;
import android.content.Context;
import android.database.Cursor;
import android.net.Uri;
import android.provider.ContactsContract;
import android.util.Log;
import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class SMSReader extends Plugin {

Context ctx;
@Override
public PluginResult execute(String action, JSONArray data, String callbackId) {
    Log.d("SMSReadPlugin", "Plugin Called");
    PluginResult result = null;
    JSONObject messages = new JSONObject();
    if (action.equals("inbox")) {
        try {
            Log.d("SMSReadPlugin", "TRY Called");
            messages = readSMS("inbox");
            Log.d("SMSReadPlugin", "Returning " + messages.toString());
            result = new PluginResult(PluginResult.Status.OK, messages);
        } catch (JSONException jsonEx) {
            Log.d("SMSReadPlugin", "Got JSON Exception "+ jsonEx.getMessage());
            result = new PluginResult(PluginResult.Status.JSON_EXCEPTION);
        }
    }
    else if(action.equals("sent")){
         try {
            messages = readSMS("sent");
            Log.d("SMSReadPlugin", "Returning " + messages.toString());
            result = new PluginResult(PluginResult.Status.OK, messages);
        } catch (JSONException jsonEx) {
            Log.d("SMSReadPlugin", "Got JSON Exception "+ jsonEx.getMessage());
            result = new PluginResult(PluginResult.Status.JSON_EXCEPTION);
        }
    }
    else {
        result = new PluginResult(PluginResult.Status.INVALID_ACTION);
        Log.d("SMSReadPlugin", "Invalid action : "+action+" passed");
    }
    return result;
}

//Read messages from inbox/or sent box.
private JSONObject readSMS(String folder) throws JSONException {
    JSONObject data = new JSONObject();
    Uri uriSMSURI = Uri.parse("");
    if(folder.equals("inbox")){
        uriSMSURI = Uri.parse("content://sms/inbox");
        Log.d("SMSReadPlugin", "Inbox Called");
    }
    else if(folder.equals("sent")){
            uriSMSURI = Uri.parse("content://sms/sent");
            Log.d("SMSReadPlugin", "Sent Called");
    }
    Log.d("SMSReadPlugin", "content Before");
   // Cursor cur = getContentResolver().query(uriSMSURI, null, null, null,null);
    Cursor cur = getContentResolver().query(uriSMSURI, null, null, null, null);
    Log.d("SMSReadPlugin", "content Called");
    JSONArray smsList = new JSONArray();
    data.put("messages", smsList);
    while (cur.moveToNext()) {
        Log.d("SMSReadPlugin", "cursor Called");
      JSONObject sms = new JSONObject();
        sms.put("number",cur.getString(2));
        sms.put("text",cur.getString(11));

        String name = getContact(cur.getString(2));
        if(!name.equals("")){
            sms.put("name",name);
        }
        smsList.put(sms);
    }
    return data;
}

private String getContact(String number){
    Cursor cur = this.cordova.getActivity().getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,null,null,null,null);
    String returnName= "";
    if(cur.getCount() > 0){
        while(cur.moveToNext()){
              String id =  cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
              Log.d("Contact","ID:" + id );
              String name =  cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
               Log.d("Contact","name:" + name);
              if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                  Cursor pcur = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                          ContactsContract.CommonDataKinds.Phone.NUMBER + "=?",new String[]{number},null);
                  int numindex = pcur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DATA);
                  if(pcur.moveToFirst()){
                      String dbNum = pcur.getString(numindex);
                      if(dbNum.equals(number)){
                       returnName = name;
                      Log.d("number","number:" + dbNum);
                      }
                      else {
                          Log.d("number","numbers dont match!");
                      }
                  }
                  else {
                      Log.d("number", "no result");
                  }

              }
                else {
                   Log.d("number", "No Number");
              }
        }
    }
    return returnName;
}

private ContentResolver getContentResolver(){
    return ctx.getContentResolver();
 } 
```

}

我仍然无法得到结果。请帮助。

# android - 使用按钮 onclick 转到 fragmentactivity 的第 n 个片段

> ID：13927323
> 
> 赞同：0
> 
> 时间：2012-12-18T06:13:34.083
> 
> 标签：android, drop-down-menu, android-fragments, android-viewpager

我有 6 个不同类别的片段，而 Activity A.... Activity A 具有指定 6 个片段的类别下拉列表。我的问题是当我从下拉 ItemList 中单击类别的第 3 个位置时如何转到第 3 个片段。 ..请帮助......提前谢谢......

```
public class MissMaliniActivity extends FragmentActivity{

/** Called when the activity is first created. */
private PagerAdapter1 mPagerAdapter;
 private ViewPager mPager;
 List<Fragment> fragments = new Vector<Fragment>();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.latest_list2);

      fragments.add((Fragment.instantiate(this,Home.class.getName())));
      fragments.add(Fragment.instantiate(this,Bollywood.class.getName()));
      fragments.add(Fragment.instantiate(this,Fashion.class.getName()));
      fragments.add(Fragment.instantiate(this,Lifestyle.class.getName()));
      fragments.add(Fragment.instantiate(this,GeekChic.class.getName()));
      fragments.add(Fragment.instantiate(this,Contests.class.getName()));

   this.mPagerAdapter = new PagerAdapter1(super.getSupportFragmentManager(),fragments);
    mPager = (ViewPager) super.findViewById(R.id.viewpager);
    mPager.setAdapter(this.mPagerAdapter);
    mPager.setOffscreenPageLimit(2);

    } 
```

并且类 Dropdown 扩展了 Activity

```
tblHome.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                _____>>>>How to go 3rd Fragment... which code here?? <<<_____
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T07:14:35.107

ViewPager 有一个 setCurrentItem 方法来指定 ViewPager 中的某个位置。

```
mpager.setcurrentitem(int i); 
```

# android - 如何允许 NFC 意图触发某些活动？

> ID：13927325
> 
> 赞同：0
> 
> 时间：2012-12-18T06:13:40.507
> 
> 标签：android, android-intent, xamarin.android, nfc

在我的应用程序中，我只有一个带有 NFC 意图的活动，但它仍然在所有其他活动中触发。有没有办法限制这个？

我想模仿[NFC TagInfo](https://play.google.com/store/apps/details?id=at.mroland.android.apps.nfctaginfo&hl=en)处理他们的 NFC 意图的方式。他们只允许在他们的“扫描标签...”活动中读取 NFC，并在所有其他活动中被阻止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:17:26.653

显示一些代码/清单，但它并不像那样工作。活动选择器由系统处理，并在每次标签进入范围时触发。如果您的活动匹配，它将在列表中。如果它是唯一的应用程序，它将自动启动。如果你使用前台调度，你可以让你的活动在前台时优先，这样选择对话框就不会显示。

# java - 在java中读取输入直到EOF

> ID：13927326
> 
> 赞同：9
> 
> 时间：2012-12-18T06:13:51.447
> 
> 标签：java, file-io, eof

在 C++ 中，如果我希望在 EOF 之前读取输入，我可以通过以下方式进行

```
while(scanf("%d",&n))
{
    A[i]=n;
    i++;
} 
```

然后我可以将此代码作为 ./a.out < input.txt 运行。这段代码的java等价物是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T06:18:27.790

你可以这样做：

```
Scanner s = new Scanner(System.in);
while (s.hasNextInt()) {
    A[i] = s.nextInt();
    i++;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-18T06:19:46.693

```
// assuming that reader is an instance of java.io.BufferedReader
String line = null;
while ((line = reader.readLine()) != null) {
    // do something with every line, one at a time
} 
```

如果您遇到困难，请告诉我。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T06:19:23.573

```
 import java.io.BufferedReader;
 import java.io.FileReader;

BufferedReader br = null;  
     br = new BufferedReader(new FileReader(file));
       while ((line = br.readLine()) != null) {              

     }

    //using Scanner class

    Scanner scanner = new Scanner(file);
    while (scanner.hasNextLine()) {
      String line = scanner.nextLine();
      System.out.println(line);
   } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-18T07:38:06.473

这是使用 BufferedReader 和 FileReader 类的 Java 等效代码。

```
 import java.io.BufferedReader;
  import java.io.FileReader;
  import java.io.IOException;

  public class SmallFileReader {
        public static void main(String[] args) throws IOException { 
```

选项 1：
`String fileName = args[0];`
`BufferedReader br = new BufferedReader(new FileReader(fileName));`
选项 2：
`BufferedReader br = new BufferedReader(new InputStreamReader(System.in));`
`System.out.println("Enter a file name: ");`
`String fileName = br.readLine();`

```
 //BufferedReader br = new BufferedReader(new FileReader("Demo.txt"));
             String line=null;
             while( (line=br.readLine()) != null) {
                    System.out.println(line);  
             }
  }
} 
```

我对@Vallabh 代码做了一点修改。@tom 如果要通过命令行输入文件名，可以使用第一个选项。
`java SmallFileReader Hello.txt`
选项 2 会在您运行文件时询问您的文件名。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-18T06:20:11.897

这是使用 BufferedReader 和 FileReader 类的 Java 等效代码。

```
 import java.io.BufferedReader;
  import java.io.FileReader;
  import java.io.IOException;

  public class SmallFileReader {
        public static void main(String[] args) throws IOException {
             BufferedReader br = new BufferedReader(new FileReader("Demo.txt"));
             String line=nul;
             while( (line=br.readLine()) != null) {
                    System.out.println(line);  
             }
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-24T03:08:36.730

唯一对我有用的东西（你甚至不必创建文件）

```
Scanner read = new Scanner(System.in);
String cadena;
boolean cond = true;
int i =0;
while (cond){
    cadena = read.nextLine();
    if(cadena.isEmpty())
        cond = false;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-23T12:09:34.417

这是我的 Java 等效代码，用于在文件结束之前读取输入：

```
import java.util.Scanner;

public class EndOfFileSolutions {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        for(int i = 1; sc.hasNext()== true; i++){
            System.out.println(i + " " + sc.nextLine());
        }
    }
} 
```

此代码将产生如下所示的输出 -

# 样本输入：

```
Hello world
I am a file
Read me until end-of-file. 
```

# 样本输出：

```
1 Hello world
2 I am a file
3 Read me until end-of-file. 
```

这个答案也可以很好地解决[Hackerrank EOF 问题](https://www.hackerrank.com/challenges/java-end-of-file/problem)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-03T18:49:59.793

```
Scanner scanner = new Scanner(System.in);
int c = 0;
while(scanner.hasNext()){
  System.out.println(++c + " " + scanner.nextLine());
}
scanner.close();
// use while instead of normal for loop. 
// If you need to read a file than BufferReader is the best way to do it, as explained above. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-08T17:41:29.680

eof() 函数用于检查是否到达文件结尾 (EOF)。如果达到 EOF 或 FileHandle 未打开且在所有其他情况下未定义，则返回 1。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-12-07T09:26:32.373

一个简单的解决方案是使用`Scanner`类。

见下面的片段：

```
import java.io.*;
import java.util.*;

public class Solution {

    public static void main(String[] args) {

        Scanner s = new Scanner(System.in);
        while(s.hasNextLine())
        {
            String line = s.nextLine();
            System.out.println(line);
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-05-30T12:31:32.407

**在 Java 中，直到 EOF 的一种阅读方式是：-**

```
 Scanner scan = new Scanner(System.in);    
     while(scan.hasNextLine())   //read until condition is true
     {
        String line = scan.nextLine();
        System.out.println(line);
        i++;
     } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-01-03T07:35:13.517

EOF 或行尾..！可以在单个while循环条件中实现..!!，直到条件有效循环运行并从用户那里获取输入。“.hasNextLine”，正在检查是否有另一个输入行。例如，我正在使用 Hackerrank 练习。希望这对你有帮助。

```
import java.io.*;
import java.util.*;

public class Solution {

    public static void main(String[] args) {
        int i=1;
        Scanner sc = new Scanner(System.in); // Making Scanner object
        while(sc.hasNextLine()){            // This is the main condition for EOF  
            String line = sc.nextLine();
            System.out.format("%d %s\n",i,line);
            i++;
        } 

    }
} 
```

# ios5 - 我的子视图在出现后键盘隐藏后停止响应

> ID：13927327
> 
> 赞同：0
> 
> 时间：2012-12-18T06:13:58.000
> 
> 标签：ios5, ios4, iphone-5

我的 UIViewController 很少，它的 nib 文件大小是 Retina 4 Full Screen。所有视图添加一个子视图调用底部菜单作为子视图

```
 BottomMenu *bottomMenu=[[BottomMenu alloc]init ];
    [self.view addSubview:bottomMenu.view];
    [self addChildViewController:bottomMenu]; 
    [bottomMenu release]; 
```

在 iPhone 4 中一切正常，但在 iPhone 5 中，如果一旦我的键盘出现，就会调用 keyboardwill aear 并且当键盘隐藏时调用 keyboardWillHide 方法

```
-(void)keyboardWillShow :(NSNotification*)notification {

        self.view.frame=CGRectMake(-1,-120,320,480);

}

-(void)keyboardWillHide :(NSNotification*)notification {

        self.view.frame=CGRectMake(0,0,320,480);

} 
```

但是在键盘隐藏我的 BottomMenu 在 Iphone5 中停止响应但其他视图工作正常后，我的视图在 Iphone4 中也完全正常工作。谁能告诉我有什么问题

# java - Bar.setBarStyle(BarStyle.RECTGRADIENT) 无法按预期工作

> ID：13927331
> 
> 赞同：1
> 
> 时间：2012-12-18T06:14:16.050
> 
> 标签：java, android, teechart

使用`StartColor`和错误地绘制渐变`Color`。它不尊重 的价值`EndColor`。

```
Bar bar = new Bar();
bar.setMultiBar(MultiBars.STACKED);
bar.setBarStyle(BarStyle.RECTGRADIENT);
bar.getGradient().setDirection(GradientDirection.VERTICAL);
bar.getGradient().setUseMiddle(false);

bar.getGradient().setStartColor(Color.fromArgb(0xff000000));
bar.getGradient().setEndColor(Color.fromArgb(0xffffff00));

// WORKAROUND: Setting the color yields a valid gradient.
// bar.setColor(Color.fromArgb(0xffffff00)); 
```

安卓 4.1.2，Nexus S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:12:26.113

你说的对。我已将其添加到缺陷列表中，以便为下一个版本进行修订。同时，您建议的解决方法对我来说看起来不错。

# sql - SQL 查询太慢

> ID：13927335
> 
> 赞同：0
> 
> 时间：2012-12-18T06:14:27.573
> 
> 标签：sql, sql-server-2008, query-optimization

我的要求是只选择没有交易的客户，否则他们的最后一笔交易是在某个日期之后。

目前，我的查询时间太长了。

有没有更有效的方法来做到这一点？

```
SELECT *, 
   (SELECT MAX(AC_CLOSEDDAT) FROM 
    Accs WHERE accs.AC_CLIENTCODE = c.CL_CLIENTCODE) AS LastTrans 
FROM Clients c 
WHERE CL_STATUS <> 'R' 
AND STORE_CODE = '69JX 
```

我希望我可以使用 JOIN，但不确定....我需要没有交易的客户，以及过去 2 年内有交易的客户。

使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:21:49.470

您可以使用 NOT EXISTS 子句，它将在给定日期之后为您提供空交易或无交易的结果，而无需任何最大值。

```
SELECT * FROM Clients c
WHERE CL_STATUS <> 'R'
AND STORE_CODE = '69JX'
AND NOT EXISTS 
    (SELECT NULL FROM Accs a
    WHERE a.AC_CLIENTCODE = c.CL_CLIENTCODE
    AND a.AC_CLOSEDDAT > theDateToCompare) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:52:28.047

好吧，你可以使用 JOIN，只是它需要是 LEFT JOIN：

```
SELECT c.*, MAX(AC_CLOSEDDAT) AS LastTrans
    FROM Clients c 
    LEFT JOIN Accs ON accs.AC_CLIENTCODE = c.CL_CLIENTCODE 
WHERE CL_STATUS <> 'R' 
    AND STORE_CODE = '69JX 
```

使用 LEFT JOIN 将返回来自 Clients 的所有记录，无论 Accs 表中是否有对应方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:05:15.690

通过加入，您可以：

```
SELECT c.client_id
FROM Clients c 
LEFT JOIN  Accs a
  on (a.AC_CLIENTCODE = c.CL_CLIENTCODE AND 
      a.AC_CLOSEDDAT >= DATEADD(year,-2,GETDATE())
WHERE CL_STATUS <> 'R'
AND STORE_CODE = '69JX'
group by c.client_id; 
```

但 Raphaël Althaus 的答案是最好的 SQL，并且引擎知道使用哈希连接（最终）执行它。

# codeigniter - Codeigniter 将验证码控制器加载到索引控制器中

> ID：13927338
> 
> 赞同：1
> 
> 时间：2012-12-18T06:14:35.917
> 
> 标签：codeigniter, controller, captcha

我是 CI 新手，对 CI 控制器有疑问，我有一个页面控制器，它是一个索引，用于加载视图中的页眉、页脚和所有页面，如下所示：

```
class Pages extends CI_Controller{

function __construct() {
    parent::__construct();

    $this->load->helper(array('url', 'form', 'captcha'));
    $this->load->model('getdb');
    $this->load->library('javascript');
    $this->load->library('session');
}

public function index($page='home'){

    if(!file_exists('application/views/pages/'.$page.'.php')){
        show_404();
    }

    $data['title'] = ucfirst($page);

    $data['sitename'] = $this->config->item('site_name');

    $data['library_src'] = $this->jquery->script();
            $data['script_head'] = $this->jquery->_compile();

    $data['results'] = $this->getdb->getAll();

    $this->load->view('templates/header', $data);
    $this->load->view('inc/mainmenu', $data);
    $this->load->view('pages/'.$page, $data);
    $this->load->view('pages/sidebar', $data);
    $this->load->view('templates/footer', $data);

}
} 
```

然后我建立了一个注册表，它在表单中使用了验证码库，我找到了一个验证码控制器的示例，如下所示：

```
class Captcha extends CI_Controller {

public function index()
{

    $this->load->library('session');
    $this->load->helper(array('captcha','url'));

    if ($this->input->post() && ($this->input->post('secutity_code') == $this->session->userdata('mycaptcha'))) {
        $this->load->view('process.php');
    }
    else
    {

        $this->load->helper('captcha');

        $vals = array(
            'img_path' => './assets/captcha/',
            'img_url' => base_url().'captcha/',
            'font_path' => './assets/styles/fonts/MyriadPro-Semibold.ttf',
            'img_width' => '200',
            'img_height' => '30',
            'expiration' => 3600
            );

        $cap = create_captcha($vals);

        $data['image'] = $cap['image'];

        $this->session->set_userdata('mycaptcha', $cap['word']);

        $this->load->view('pages/register.php', $data);

    }
}
} 
```

这是我的名为 register.php 的视图：

```
<div id="content-wrap">
    <form method="post" action="<?php echo base_url()?>">
    <p><?php echo $image ?></p>
    <p>Security: <input type="text" name="secutity_code"></p>
    <p><input type="submit" name="submit" value="submit"  /></p>
    </form>
</div> 
```

我的问题是，当我调用 url 页面时，如何让 Captcha 控制器加载到 Pages 控制器中以便处理该功能`http://site.com/ci/register`？当前页面将显示如下错误：

```
A PHP Error was encountered
Severity: Notice
Message: Undefined variable: image
Filename: pages/register.php
Line Number: 65 
```

请指教，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:55:47.047

当您调用`pages`控制器时，`capcha`控制器不会调用，而不是将其用作控制器，而是将其作为库，

将其加载到“页面”控制器中。

```
$this->load->library('Captcha'); 
```

然后从您的控制器调用`captcha`库`pages`

```
$data['image'] = $this->captcha->index(); 
```

现在`captcha` 图书馆看起来像这样。

```
class Captcha  {

public function __construct()
    {
        $this->ci =& get_instance();
    }

public function index()
{

    $this->ci->load->library('session');
    $this->ci->load->helper(array('captcha','url'));

    if ($this->ci->input->post() && ($this->ci->input->post('secutity_code') == $this->ci->session->userdata('mycaptcha'))) {
        $this->ci->load->view('process.php');
    }
    else
    {

        $this->ci->load->helper('captcha');

        $vals = array(
            'img_path' => './assets/captcha/',
            'img_url' => base_url().'captcha/',
            'font_path' => './assets/styles/fonts/MyriadPro-Semibold.ttf',
            'img_width' => '200',
            'img_height' => '30',
            'expiration' => 3600
            );

        $cap = $this->create_captcha($vals);

        $this->ci->session->set_userdata('mycaptcha', $cap['word']);

        return $cap['image'];
    }
}
} 
```

希望这可以帮助 。

**更新**

我的错

利用

```
$cap = create_captcha($vals); 
```

代替

```
$cap = $this->create_captcha($vals); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T06:25:20.443

看起来您在最高级别设置了 error_logging 您收到的错误消息只是一个“通知” - 它不值得担心。

请参阅此处了解更多信息 - [http://ellislab.com/codeigniter/user-guide/general/errors.html](http://ellislab.com/codeigniter/user-guide/general/errors.html)

但是，您的控制器中似乎也没有“注册”功能 - 如果您希望触发该 url，您将需要一个名为 register 的功能来执行您想要的操作。

希望我的回答是正确的或有帮助的，因为这是我在 Stack 上的第一个回答！！

# c# - 应用程序中连接字符串的单一声明

> ID：13927352
> 
> 赞同：0
> 
> 时间：2012-12-18T06:16:08.993
> 
> 标签：c#, asp.net

在我的 asp.net 应用程序中，我在每个页面`Page_Load`函数中添加了连接字符串，并在页面顶部将该字符串声明为公共。

我知道这是错误的事情。整个应用程序都在运行同一个连接，所以我只想在一个地方声明连接字符串。我应该在哪里声明连接字符串？如何访问每个连接中的连接字符串？

```
public string connstring = "";

protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack != true)
    {
        connstring = ConfigurationManager.ConnectionStrings["connString"].ToString();
        MySqlConnection connection = new MySqlConnection(connstring);
        // ----
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T06:18:12.737

您已经在 中定义了连接字符串`web.config`，您不需要在每个页面中再次定义它，只需使用 ConfigurationManager 中的连接字符串，而不是在每个页面上创建新的字符串变量。

```
ConfigurationManager.ConnectionStrings["connString"].ToString() 
```

如果在使用连接字符串之前检查 null 会更好。

```
if(ConfigurationManager.ConnectionStrings.Count > 0 && 
ConfigurationManager.ConnectionStrings["connString"] != null) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T06:34:05.007

您可以在 webconfig 文件中标为

```
<configuration>
  < connectionstring>
     <add name="Name of Your Connection" connectionstring=""/>
  <connectionstring>
<configuration> 
```

在 Webonfig 中声明后，您可以在不同的 .Aspx 页面中调用连接字符串，例如，

添加

```
system.web.configuration; 
```

那么您可以将连接字符串称为

```
 string connection = WebConfigurationManager.ConnectionStrings["Name Of your Connection"].ConnectionString;
sqlconnection con=new sqlconnection[con];
... 
```

您可以创建一个`dataUtility`类，并且可以`connectionstring`为整个项目定义一次，例如

```
class dataUtility
{
 string connection = WebConfigurationManager.ConnectionStrings["Name Of your   Connection"].ConnectionString;

Public void Insert()
{
sqlconnection con=new sqlconnection(connection);
...
}
} 
```

现在您必须只创建一个类的对象并调用 insert 方法。您将需要在一个地方编写整个 DAL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:21:07.000

添加一个 Web 配置文件并将您的连接放入 ConnectionString 部分：

```
<configuration>
    <connectionStrings>
        <add name="ConnectionName" connectionString="your connection string" providerName="System.Data.SqlClient"/>
    </connectionStrings>
</configuration> 
```

在公共类中添加一个静态 SqlConnection：

```
public class myClass
{
    public static System.Data.SqlClient.SqlConnection con;
} 
```

并在应用程序负载中实例化一次（在 global.asax 中）：

```
void Application_Start(object sender, EventArgs e)
{
    myClass.con = new System.Data.SqlClient.SqlConnection(ConfigurationManager.ConnectionStrings["connString"].ToString());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T06:21:34.723

你为什么不创建一个单独的类来实例化连接，就像[这样](https://stackoverflow.com/questions/6906299/how-to-use-a-single-connection-string-in-whole-winforms-project)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T06:21:35.693

在 web.config 中添加它

```
<connectionStrings>
    <add name="StrConnection" connectionString="Server=SERVER_NAME;Database=DATABASE_NAME;user id=USER_NAME;password=PASSWORD;"/>
</connectionStrings> 
```

在数据访问层中创建一个静态类，例如：

```
public static class sqlConnectionProvider
    {
        public static string GetConnection()
        {
            return ConfigurationManager.ConnectionStrings["StrConnection"].ConnectionString;
        }

    } 
```

并从业务访问层调用它，例如：

```
return DataAccessLayer.ExecuteDataset(sqlConnectionProvider.GetConnection(), CommandType.StoredProcedure, spName, parameter); 
```

谢谢

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-18T06:33:03.603

您还没有在每个页面中*定义*连接字符串，而是在每个页面中*读取*它。如果您不想这样做，更好的方法是拥有一个静态类（或[单例](http://en.wikipedia.org/wiki/Singleton_pattern)）来为您管理它。

通常，您不应在 UI 代码中执行任何与数据库相关的操作。更好的方法是将工作委托给一组类（数据层）。一个简单的数据层可以是一个简单的单例类，它完成所有的数据访问：

```
public class DataManager
{
    private static DataManager _instance;

    private DataManager() {}

    public static DataManager Instance
    {
        get
        {
            if (_instance == null)
                _instance = new DataManager();
            return _instance;
        }
    }

    public DbConnection GetConnection()
    {
        return new MySqlConnection(ConfigurationManager.ConnectionStrings["connString"].ToString());
    }

    ...
} 
```

显然，这是一个非常简单的类，不适合大型项目。您应该考虑使用[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)工具，例如[EntityFramework](http://msdn.microsoft.com/en-us/data/ef.aspx)。

* * *

你绝对应该考虑把相关的东西放在一个地方。这是规则：除了方法调用外，不要重复任何代码（在这种情况下，从 web.config 读取连接字符串）。如果在 web.config 中更改连接字符串的名称会怎样？

有关设计数据访问层的指南，请参阅以下链接：

[http://en.wikipedia.org/wiki/Data_access_layer](http://en.wikipedia.org/wiki/Data_access_layer)
[http://msdn.microsoft.com/en-us/library/ee658127.aspx](http://msdn.microsoft.com/en-us/library/ee658127.aspx)
[http://weblogs.asp.net/cumpsd/archive/2005/04/ 24/404058.aspx](http://weblogs.asp.net/cumpsd/archive/2005/04/24/404058.aspx)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-18T06:39:22.483

这是我所做的：

我在每个 .Net 应用程序中添加了一个 UTILITIES 项目。我在实用程序项目中添加了一个名为 Misc.cs 的文件。

在这个文件中，我添加了对整个应用程序通用的所有功能，并且将以某种方式使用。在那里添加一个新功能，例如

```
Public string GetConnectionString()
{
    return ConfigurationManager.ConnectionStrings["connString"].ToString();
} 
```

现在，这是您更改连接字符串的常见位置。随时随地使用它。如果您仍然需要更多抽象，请编写一个 DAL（数据访问层）。在 DAL 类中定义属性，如连接字符串、命令字符串等。添加诸如 FetchData 之类的方法（在其中编写通用选择方法），保存数据（在此处编写通用更新/保存逻辑）。从您的前端只需您以下调用

数据表/数据集 lobj = [You_Dal_Class_Object].FetchData([Your_select_command_here];

链接： [http](http://www.mssqltips.com/sqlservertip/2034/writing-a-data-access-layer-dal-for-sql-server/) : //www.mssqltips.com/sqlservertip/2034/writing-a-data-access-layer-dal-for-sql-server/ http://msdn.microsoft.com/en-us/library/ aa581778.aspx

# jquery - 当 Chrome 框架不存在/禁用时，IE8 中的图像链接失败

> ID：13927353
> 
> 赞同：1
> 
> 时间：2012-12-18T06:16:13.587
> 
> 标签：jquery, css, nivo-slider, google-chrome-frame

如果您查看以下网站，您将在主页顶部看到幻灯片。我在这里使用 Nivo Slider，我们的客户报告说这些链接在 IE8 中不起作用。

[http://youthsolutions.com.au/](http://youthsolutions.com.au/)

我唯一能想到的是，使用绝对定位的“幻灯片叠加” div 以某种方式“阻挡”了下面的图层（即使它有一个固定的宽度并且应该只阻挡幻灯片的左侧）。

有任何想法吗？我都出来了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:40:49.610

这是很多人发现的问题，我发现其他人给出了一些解决方案。

一种解决方案是在底部更改 nivo 滑块 css，如下所示，

```
.nivoSlider a {
border:0;
display:block;
background-color: #fff;
filter:alpha(opacity=0);
opacity: 0;
-webkit-opacity:0;
-moz-opacity:0;
-khtml-opacity:0;
} 
```

为了防止其他 div 阻止它尝试使用`z-index`并给它一个更大的值，比如`z-index:8`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T06:21:58.463

好吧，ie 渲染图像的效果不如其他浏览器，在为网络和设备保存时可能会出现错误，请执行此操作，再次使用保存为网络和设备选项并另存为 jpg 并且不要替换任何文件给他们新名称，然后将这些新文件链接到 nivo 滑块然后对其进行测试，它应该可以工作

# performance - 如何正确使用profr

> ID：13927359
> 
> 赞同：1
> 
> 时间：2012-12-18T06:16:52.423
> 
> 标签：performance, r, profiling

我想使用 profr 来分析我的 R 代码。我对如何使用此功能感到困惑，因为我找不到任何使用示例。有没有办法在运行我的 R 程序时从 CMD 调用它作为参数？该程序由许多脚本组成，这增加了混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:41:54.217

它不会从命令行运行。它从 R 内部运行。这就是我所做的。

```
myTopLevelFunction <- function(){
  Rprof(interval = 5) # Start sampling. I want it to sample the stack every 5 seconds
  # ... run the stuff I want to profile
  Rprof(NULL) # Stop sampling. Stack samples are in Rprof.out
} 
```

然后我只检查`Rprof.out`文件中的样本。

我进行分析的方式是获取少量堆栈样本，然后直接检查它们，而不是通过某种统计汇总对它们进行分析。原因是，如果有一些东西需要花费足够的时间来修复，比如 40% 的时间，那么如果我查看 10 个随机样本，平均而言，其中 4 个会很明显。我只需要在 2 个样本上看到一个问题就知道它值得修复，而且我可以通过这种方式看到统计摘要会遗漏的问题。这很关键。

堆栈样本`Rprof`仅来自列表函数。他们没有列出发生呼叫的行号。尽管如此，它总比没有好。

# google-apps-script - 如何最小化谷歌脚本的加载时间？

> ID：13927363
> 
> 赞同：1
> 
> 时间：2012-12-18T06:17:15.620
> 
> 标签：google-apps-script

我正在研究 Google Apps 脚本的 HtmlServices。在这个脚本中，我实现了两个功能，Autocomplete 和 DataTable，因为它使用了许多 js 和 css 文件。所有功能都运行良好，但是在加载脚本时，它花费了太多时间。一旦脚本完全加载，它就可以正常工作了。该脚本发布在网络上。

那么，有什么办法可以减少加载时间呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-01T20:36:40.570

`doGet()`似乎在开始和`google.script.run`第一次执行之间存在明显的滞后。我创建了一个名为 Simple 的虚拟应用程序，它与我的应用程序（基于演示应用程序）具有相似的结构，除了一个 jQuery 调用来设置我的模板中的文本之外什么都不做。

`doGet()`加载我的`index.html`模板。我在我的模板中包含了我的 CSS 和 Javascript`index.html`以进一步简化事情。

我设置 doGet() 以在加载模板后立即对其进行评估。

在评估时，`google.script.run`调用一个`code.gs`不执行任何操作并返回 null 的虚拟函数。成功时，它调用 javascript 来更新页面，该页面执行单个 jQuery 来更新我的 html 元素。模板有“Hello world！” 在其中，它被替换为“Hello other world！”

这几乎是微不足道的。模板几乎立即加载，显示“Hello world！” 但是通过单个 jQuery 调用更新内容大约需要 6 秒。这种性能反映了我的实际应用程序正在做什么。应用程序访问 javascript 后，对 google.script.run 的后续调用非常快。

有趣的是，我可以`doGet()`在 web 开发环境中进行评估，它在半秒内运行，执行记录确认所有适当的调用，包括 jQuery 引用，都已进行。

这说明了几件事。首先，非常快速地`doGet()`加载和显示模板（在调用时`template.evaluate()`）。似乎第一次调用`google.script.run`是延迟所在，但仅当应用程序呈现给网络时。我的工作应用程序证明了后续调用`google.script.run`非常快，该应用程序有一个表单，我可以通过调用`google.script.run`通过 URL 传递的变量来更新页面。

这种延迟使得网络应用程序的谷歌应用程序脚本对于我能想到的大多数基于网络的应用程序都没有吸引力。这是不幸的，因为环境有很多其他的东西使它有吸引力。

我很高兴应要求与任何人分享我的示例代码。我也很想知道谷歌是否意识到这一点以及在这个问题上的立场。代码如下：

## 代码.gs：

```
function doGet(e) {
  Logger.log('start');
  var template = HtmlService.createTemplateFromFile('Index');
  // Build and return HTML in IFRAME sandbox mode.
  Logger.log('before template.evalute()');
  return template.evaluate()
      .setTitle('Web App Window Title')
      .setSandboxMode(HtmlService.SandboxMode.IFRAME);
  Logger.log('after template.evaluate()');
}

function getFolderContents() {
  var contents = 0;
  return contents;
} 
```

* * *

## 索引.html

```
<link rel="stylesheet" href="https://ssl.gstatic.com/docs/script/css/add-ons.css">

    <h1 id="main-heading">Hello world!</h1>

<!-- Use a templated HTML printing scriptlet to import JavaScript. -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
  /**
   * Run initializations on web app load.
   */
  $(function() {
    // Call the server here to retrieve any information needed to build the page.
    google.script.run
       .withSuccessHandler(function(contents) {
            // Respond to success conditions here.
            updateDisplay(contents);
          })
       .withFailureHandler(function(msg) {
            // Respond to failure conditions here.
            $('#main-heading').text(msg);
          })
       .getFolderContents();
  });

  function updateDisplay() {
    $('#main-heading').text("Hello other world!");
  }
</script> 
```

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:30:01.273

我遇到了同样的问题，但得出的结论是我设计脚本的方式导致了这个问题。最初我设计我的脚本来构建整个页面，**然后**将其呈现给用户。当脚本开始时，第一页似乎需要很长时间才能呈现，这使得页面看起来很慢。它很慢。

我现在正在切换到呈现快速显示的“正在加载...”类型的页面。加载后，它对服务器进行回调以构建页面的其余部分，并将其传递回客户端脚本以呈现它。我还没有完全完成这个，但它看起来很有希望。

我不确定 GAS 是否会很快，因为它依赖于 Caja。因此我们需要在我们的代码中使用好的设计来尽可能地帮助。

# wpf - 带有图像的 WPF 文本框

> ID：13927364
> 
> 赞同：4
> 
> 时间：2012-12-18T06:17:20.210
> 
> 标签：wpf, image, xaml, textbox, passwordbox

我正在做一个WPF登录界面。在我的登录面板中，我有一个登录名`TextBox`和一个`PasswordBox`. 如下图第一张所示，登录文本框中有一个小人类标志，密码框中有一个锁。我将图像设置为文本框背景，然后当我尝试在登录框中插入一些单词时，这些单词将覆盖人类徽标（图像 B）。有什么建议可以使它正确吗？

我的 XAML：

```
 <TextBox Width="380" Height="25" HorizontalAlignment="Center"  Foreground="WhiteSmoke" BorderBrush="Transparent" >
     <TextBox.Background>
       <ImageBrush ImageSource="/icon/user_login.png" AlignmentX="Left" Stretch="None"></ImageBrush>
     </TextBox.Background>
 </TextBox> 
```

图片一：

![在此处输入图像描述](../Images/09a331552254dd8beb624c2ee7bb8341.png)

图片 B：

![在此处输入图像描述](../Images/dcd8ad901763e011a58fe253ba7793af.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T06:22:54.163

我的建议是您将每个替换`Textbox's`为`DockPanel`. 其中他们每个人都有一个`Image`作为最左边的项目和一个`Textbox`作为最右边的项目。然后将图像分别设置为用户和锁定。`Textbox`然后将和的背景设置`Images`为透明。然后，您可以在`DockPanel`.

编辑 1 - 从工作示例中复制粘贴

代码：

```
<DockPanel>
    <Button BorderThickness="0" DockPanel.Dock="Left" HorizontalAlignment="Right" Height="28" Width="23">
         <DynamicResource ResourceKey="SearchBar"/>
    </Button> 'This is a button, because I have a custom Style which I am using which makes all the borders go away. And also because I use it to clear the field.
    <TextBox Text="Search..." FontSize="16" HorizontalAlignment="Stretch" Background="Transparent"/>
</DockPanel> 
```

图片：

![在此处输入图像描述](../Images/33d8b06849a2640d5855c07ce16c4efd.png)

通过不设置`DockPanel.Dock`第二个项目的属性，我告诉它延伸到`DockPanel`. 如有其他疑问，请告诉我。如果你复制粘贴上面的内容，它可能看起来不一样，因为我剪掉了不相关的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T12:25:36.323

```
 <DockPanel Grid.Row="1" Margin="65,24,71,11" HorizontalAlignment="Stretch">
                            <Image Source="/SDPI;component/Image/Profile.png"/>
                            <toolkit:WatermarkTextBox Grid.Row="1" FontSize="16">
                                <toolkit:WatermarkTextBox.Watermark>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Username" FontSize="15" Margin="4,0,0,0" />
                                    </StackPanel>
                                </toolkit:WatermarkTextBox.Watermark>
                            </toolkit:WatermarkTextBox>
                        </DockPanel> 
```

# javascript - onClick="javascript:test();" 之间的区别是什么 和 onClick="test();"

ID：13927368

赞同：0

时间：2012-12-18T06:17:21.973

标签：javascript

# node.js - Express.js 两次调用同一个控制器，第二次打印出 [Error: Invalid ObjectId]

> ID：13927370
> 
> 赞同：0
> 
> 时间：2012-12-18T06:17:34.343
> 
> 标签：node.js, express, mongoose

我正在编写一个网站，发现这个奇怪的 [Error:Invalid ObjectId] 在我的 console.log 中打印出来，这是发生错误的情况：

1）当我重启节点服务器并重新登录时，在主页，没有这样的错误；但是一旦我第一次点击进入项目页面，我会得到一个

```
[Error: Invalid ObjectId] 
```

我发现这个错误是由“/items/:id”控制器打印出来的；

我不断刷新页面，再也没有出现过

2) 发生此错误的另一种情况是当我什么都不做时，就像刚才一样，只输入stack-overflow，并且在一定时间内，我会再收到一个这样的错误。这个错误让我很困扰，因为如果我出去1~2个小时，我的开发服务器回来的时候可能会出现20个这样的错误，它会卡住并且没有很快响应（大约需要2分钟才能响应）

我正在使用 Jade、backbone.js、express.js 和猫鼬；但我没有使用像 socket.io 这样的东西，而且我相信我的骨干网在一定时间内也不会调用服务器。（除非我对骨干的了解是错误的。）

这是简化的代码：

1）我点击的链接：

```
a(href!="/items/<%=_id%>") click 
```

2）产生此错误的控制器：

```
//GET an item
app.get('/items/:id',function(req,res){
    models.ItemModel.findOne({_id:req.params.id},function(err,item){
        if (!err){
            item.rtime=app.moment(item.ctime).fromNow();
            render(req,res,'item.jade',item)
        } else
            console.log(err)
    })
}) 
```

render函数是一个封装函数，索引页也使用了那个函数，没有报错，所以我觉得跟render()没有关系。

目前，我可以肯定的是，当第一次点击链接时，控制器肯定会被调用两次。第一次调用正常，返回页面，但第二次调用好像是空调用，返回一个空项。

有没有人以前有过这种类似的情况？或者关于如何解决这个问题的一些想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T15:20:15.877

我在 Chrome 中浏览时遇到了同样的问题。就我而言，似乎有一个插件（很可能是 UA spoofer）正在发出第二个请求。我验证了在 Safari 中该请求只被调用一次。尝试关闭浏览器中的所有插件或使用其他浏览器进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:35:18.940

使用 {_id:req.params.id.toString()}

ObjectID 通常是一个对象，但 Mongoose 在搜索时需要一个字符串。将 toString() 添加到 ObjectIDs 和 Strings 使其安全。

# cron - 每当宝石：设置分钟的每小时任务

> ID：13927372
> 
> 赞同：6
> 
> 时间：2012-12-18T06:17:44.947
> 
> 标签：cron, whenever

我有一堆由任何时候管理的 cronjobs。一切正常，但我有几个每小时都会同时触发的 cronjobs，所以我想错开它们。在最坏的情况下，我可以手动更新 crontab，但我真的更愿意在 schedule.rb 中使用它。

TL;DR - 我想做类似的事情：

```
every 1.hour, at: ":00" do #task 1
every 1.hour, at: ":10" do #task 2
every 1.hour, at: ":20" do #task 3 
```

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-09-30T16:51:20.370

这可以通过以下方式完成：

```
every :hour, at: 0 do #task 1
every :hour, at: 10 do #task 2
every :hour, at: 20 do #task 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:07:28.077

我将其用于您的情况：

```
every '5 * * * *' do
  #do stuff here
end 
```

这将在 5 分钟标记处启动（每小时、每天、每月、每周的每一天）

对于其他可能没有内置帮助程序的情况，请查看[此链接](http://team.macnn.com/drafts/crontab_defs.html)

# jquery - 类似于 gmail 的进度条

> ID：13927373
> 
> 赞同：1
> 
> 时间：2012-12-18T06:17:48.183
> 
> 标签：jquery, jquery-ui, progress-bar

如何创建类似于 gmail 的进度条？我有一个名为 display 的 div `<div id="display"></div>`，其中内容是使用 jquery 从外部页面获取的`$('#display').load('somepage.html');`，这部分是使用 .click() 事件激活的。所以我正在尝试的是在获取something.html以加载“显示”时，如何向`<div id="display"></div>`![在此处输入图像描述](../Images/f403121fac8c2d6f614c6a0724162536.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:04:37.337

我推荐[jQueryUI 进度条](http://jqueryui.com/progressbar/#animated)。他们有一个动画版本，类似于 Gmail 进度条的样式。您可以使用 jQuery [Theme Roller](http://jqueryui.com/themeroller/)以与 Gmail 相同的方式为其设置皮肤。

不幸的是，jQuery.load 没有为您提供完成百分比，因此您可以通过缓慢地为完成进度条设置动画来伪造知道总百分比的效果，并且当在加载时执行完成回调时，您应该完成进度条动画。在调用 .load() 之前启动慢速动画，并确保您的动画速度足够慢，不会在页面完全加载之前完成假动画。

您可以使用[.load()](https://stackoverflow.com/questions/3178761/is-there-an-alternative-to-load-in-jquery)的一些替代方法。我认为在您的情况下，您应该将进度分成多个`.load()`呼叫并为它们分配任意百分比。例如，当第一个 .load() 完成时，将进度条移动到 25%，然后为第二个内容加载移动到 50%，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:26:41.570

您可以使用[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)来加载内容（而不是加载）并使用事件“beforeSend”和“success”来修改加载器的 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:05:58.147

您可以使用[Bootstrap 的进度条](http://twitter.github.com/bootstrap/components.html#progress)进行样式设置。

在函数 .load() 开始之前添加进度条。jQuery-function load() 有一个可选的第二个参数（一个在页面加载后执行的函数）：在这个函数中，告诉页面再次删除你的进度条。

我希望它有帮助...

# android - BaseAdapter 中的 notifyDataSetChanged()

> ID：13927374
> 
> 赞同：3
> 
> 时间：2012-12-18T06:17:58.430
> 
> 标签：android

**这是我的代码，在这里我试图从 Arraylist 中删除该项目并尝试使用 notifyDataSetChanged 更新布局项目。**

```
public class GroupContactListingAdapter extends BaseAdapter {

    private LayoutInflater mInflater;
    private ArrayList<ContactListDto> groupListDto = new ArrayList<ContactListDto>();
    private Activity context;
    public static ArrayList<String> selectList;

    @Override
    public void notifyDataSetChanged() {
        super.notifyDataSetChanged();
    }

    /**
     * Assigning the parameter
     * 
     * @param mContext1
     *            Getting the context of the class
     * @param contactList
     *            list to be display
     * @param value
     *            if 0 all, if 1 unblocked and 2 blocked
     * @param isContactList
     *            if 1 then contact list and if 0 search contact list
     */
    public GroupContactListingAdapter(Activity mContext1,
            ArrayList<ContactListDto> contactList) {
        this.context = mContext1;
        this.mInflater = (LayoutInflater) mContext1
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if (this.groupListDto != null) {
            this.groupListDto.clear();
        }
        this.groupListDto = contactList;
        selectList = new ArrayList<String>();
    }

    @Override
    public int getCount() {
        return groupListDto.size();
    }

    @Override
    public Object getItem(int position) {
        return groupListDto.get(position);
    }

    @Override
    public long getItemId(int arg0) {
        return arg0;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup arg2) {
        final ViewHolder viewHolder;
        if (convertView == null) {

            convertView = mInflater.inflate(R.layout.group_listing_item, null);
            viewHolder = new ViewHolder();
            viewHolder.nameTextView = (TextView) convertView
                    .findViewById(R.id.group_name);
            viewHolder.relative = (RelativeLayout) convertView
                    .findViewById(R.id.group_layout);
            viewHolder.deleteContacts = (Button) convertView
                    .findViewById(R.id.btn_group_contact_delete);
        } else {
            viewHolder = (ViewHolder) convertView.getTag();
        }

        viewHolder.deleteContacts.setVisibility(View.VISIBLE);
        viewHolder.deleteContacts
                .setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        Helper.printLogD(" deleting position is " + position);
                        selectList.add(groupListDto.get(position)
                                .getContactId());
                        groupListDto.remove(groupListDto.get(position));

                        notifyDataSetChanged();

                    }
                });

        viewHolder.nameTextView.setText(groupListDto.get(position)
                .getContactFullName());
        if (position % 2 == 0) {
            viewHolder.relative.setBackgroundColor(context.getResources()
                    .getColor(R.color.white));
        } else {
            viewHolder.relative.setBackgroundColor(context.getResources()
                    .getColor(R.color.list_even_color));
        }
        return convertView;
    } 
```

出现以下错误

```
12-18 11:43:01.895: E/ListView(24434): null
12-18 11:43:01.895: E/ListView(24434): java.lang.NullPointerException
12-18 11:43:01.895: E/ListView(24434):  at com.hazemedia.stewdent.client.android.ui.adapter.GroupContactListingAdapter$ViewHolder.access$4(GroupContactListingAdapter.java:133)
12-18 11:43:01.895: E/ListView(24434):  at com.hazemedia.stewdent.client.android.ui.adapter.GroupContactListingAdapter.getView(GroupContactListingAdapter.java:94)
12-18 11:43:01.895: E/ListView(24434):  at android.widget.AbsListView.obtainView(AbsListView.java:1428)
12-18 11:43:01.895: E/ListView(24434):  at android.widget.ListView.makeAndAddView(ListView.java:1801)
12-18 11:43:01.895: E/ListView(24434):  at android.widget.ListView.fillSpecific(ListView.java:1339)
12-18 11:43:01.895: E/ListView(24434):  at android.widget.ListView.layoutChildren(ListView.java:1625)
12-18 11:43:01.895: E/ListView(24434):  at android.widget.AbsListView.onLayout(AbsListView.java:1279)
12-18 11:43:01.895: E/ListView(24434):  at android.view.View.layout(View.java:7321)
12-18 11:43:01.895: E/ListView(24434):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
12-18 11:43:01.895: E/ListView(24434):  at android.view.View.layout(View.java:7321)
12-18 11:43:01.895: E/ListView(24434):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
12-18 11:43:01.895: E/ListView(24434):  at android.view.View.layout(View.java:7321)
12-18 11:43:01.895: E/ListView(24434):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
12-18 11:43:01.895: E/ListView(24434):  at android.view.View.layout(View.java:7321)
12-18 11:43:01.895: E/ListView(24434):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1217)
12-18 11:43:01.895: E/ListView(24434):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1995)
12-18 11:43:01.895: E/ListView(24434):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 11:43:01.895: E/ListView(24434):  at android.os.Looper.loop(Looper.java:150)
12-18 11:43:01.895: E/ListView(24434):  at android.app.ActivityThread.main(ActivityThread.java:4389)
12-18 11:43:01.895: E/ListView(24434):  at java.lang.reflect.Method.invokeNative(Native Method)
12-18 11:43:01.895: E/ListView(24434):  at java.lang.reflect.Method.invoke(Method.java:507)
12-18 11:43:01.895: E/ListView(24434):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
12-18 11:43:01.895: E/ListView(24434):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
12-18 11:43:01.895: E/ListView(24434):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T05:35:45.317

**这个问题是因为我没有在 convertView 实例中标记 viewHolder..**

```
convertView .setTag(viewHolder); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:58:05.367

试试这种类型的代码可能对你有帮助，

```
@Override
public View getView(final int position, View convertView, ViewGroup arg2) {
    ViewHolder mViewHolder;
    if(convertView == null){
        mViewHolder = new ViewHolder();
        mInflater = (LayoutInflater) context .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = mInflater.inflate(R.layout.group_listing_item, null);
        mViewHolder. nameTextView = (TextView) convertView .findViewById(R.id.group_name);
        mViewHolder.relative = (RelativeLayout) convertView .findViewById(R.id.group_layout);
        mViewHolder.deleteContacts = (Button) convertView .findViewById(R.id.btn_group_contact_delete);
        convertView.setTag(mViewHolder);
    } else {
        mViewHolder = (ViewHolder)convertView.getTag();
    }
    deleteContacts.setVisibility(View.VISIBLE);
    deleteContacts .setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            Helper.printLogD(" deleting position is " + position);
            selectList.add(groupListDto.get(position) .getContactId());
            groupListDto.remove(groupListDto.get(position));
            notifyDataSetChanged();
        }
    });

    nameTextView.setText(groupListDto.get(position) .getContactFullName());
    if (position % 2 == 0) {
        relative.setBackgroundColor(context.getResources() .getColor(R.color.white));
    } else {
        relative.setBackgroundColor(context.getResources() .getColor(R.color.list_even_color));
    }
    return convertView;
}
public class ViewHolder{
    TextView nameTextView;
    RelativeLayout relative;
    Button deleteContacts;
} 
```

# salesforce - SalesForce.com - 如何从媒体创建书籍和视频对象继承？

> ID：13927377
> 
> 赞同：0
> 
> 时间：2012-12-18T06:18:12.060
> 
> 标签：salesforce, force.com

我在第 2 章“在 Force.com 上创建数据库”中阅读了 Force.com 开发人员认证手册？图中显示的关系：

![在此处输入图像描述](../Images/9725cd314da6e7f350dd737e53a33edc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:47:41.463

一般来说 - 进入设置（右上角） -> 创建 -> 对象。在列表中找到“视频”和“书籍”，如果它们不存在 - 单击按钮创建新对象。

然后，您将能够向它们添加自定义字段。字段类型应为“查找”或“主详细信息”。例如，在视频上添加新字段并选择您希望它指向媒体对象。

如果您准备参加考试，我认为您已经跳过了手册中他们解释的部分内容？到达此设置->创建->对象菜单后，您还可以单击“此页面的帮助”。最后但并非最不重要的一点 - 例如，您也可以从 Eclipse IDE 中执行此操作，但这是一个高级主题。

# c - 嵌套结构填充 - C - 64 位 - linux

> ID：13927378
> 
> 赞同：6
> 
> 时间：2012-12-18T06:18:15.507
> 
> 标签：c, 64-bit, nested, padding, structure

我在 C 中有以下嵌套结构。（64 位）

```
 typedef struct {
        int a;
        int b;
        int c;
        struct {
            int ab;
            long bc;
        }
        int d;
    } Test;

I see that,
a = 4 bytes
b = 4 bytes
c = 4 bytes
padding1 = 4 bytes 
inner structure = 16 bytes ( 4 bytes for ab, 4 bytes padding, 8 bytes for bc)
d = 4 bytes
padding2 = 4 bytes 
```

sizeof(Test) 返回 40 个字节。

我的问题：

1.  padding1 -> 为什么这是 4 个字节？这是因为内部结构本身应该对齐吗？（另外，它是否与 8 字节（长）或 16 字节（内部大小）边界对齐。？）

2.  padding2 -> 这 4 字节填充是因为结构内部完成的最大对齐（即 8）吗？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T06:21:00.097

> 1.  padding1 -> 为什么这是 4 个字节？这是因为内部结构本身应该对齐吗？（另外，它是否与 8 字节（长）或 16 字节（内部大小）边界对齐。？）

这是因为内部`struct`应该是 8 字节对齐的，因此`long`可以可靠地是 8 字节对齐的。

> 1.  padding2 -> 这是 4 字节填充，因为在结构内部完成了最大对齐（即 8）？

它的存在使得整体的大小`struct`是八字节的倍数，因此内部`struct`可以在八字节边界上适当地对齐。

在这种特殊情况下，如果匿名`struct`成员的处理方式与独立成员不同，则只需四个字节的填充即可满足对齐要求`struct`，但 6.7.2.1

> 14 结构或联合对象的每个非位域成员都以适合其类型的实现定义的方式对齐。

禁止这样做。因此，为了减小 的大小`struct`，程序员需要重新排列它，将奇数个`int`成员移动到内部`struct`（或不经过匿名的情况下创建`int ab;`和`long bc;`直接成员）。`Test``struct`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:48:43.103

填充非常依赖于平台和编译器，即使您看到的行为很常见。

通常（这不是 C 标准所说的），编译器对齐结构的成员以减少内存访问的次数。在 64 位 x86 的情况下，内存访问总是获取 8 个字节，与 64 位边界对齐。换句话说，如果您访问地址*0x1010AA45*处的 1 个字节，CPU 实际上将从（缓存）内存中获取地址*0x01010AA40*处的 8 个字节。

为了满足这样的规则，如果成员是 N 字节长，编译器通常将 N 舍入为 2 的下一个幂，并将成员对齐到这样的大小或 64 位平台上的 8 字节，无论哪个更小。大多数编译器允许通过`#pragma`或配置调整此类规则。

我相信你的编译器添加了*Padding1*因为它有一个规则将所有结构对齐到 8 字节边界，无论它们有多大。或者，也可以引入它，因为内部结构大于4字节，因此需要对齐到8字节。

*可能会引入*Padding2*`struct Test` ，因为您可以创建一个. 为了保证所有结构都正确对齐到 8 字节边界 - 而不仅仅是数组中的第一项 - 定义了末尾的填充。*

# android - 我在哪里可以找到 Android：源代码中的常量值？

> ID：13927381
> 
> 赞同：2
> 
> 时间：2012-12-18T06:18:20.530
> 
> 标签：android, attributes, constants

我想知道有一个地方可以定义所有的Android：命名常量和它的值。不是[http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android:orientation中的 html 文档](http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android:orientation)

我的意思是，Android 开源代码库中的源代码在哪里，用于 android:orientation 和其他属性，例如 android:gravitiy。我想 0 表示 xx，1 表示 yy，但不是来自网站文档。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:24:01.887

你不会发现它们是 Java 的，就像你的项目中的 R 一样。您可以在 android-sdk/platforms/android-#/data/res 的 SDK 中查看它们的 xml 定义

例如，android.R.attr.orientation 位于 android-sdk/platforms/android-#/res/values/attrs.xml 中，对于 platform-16 的定义如下

```
<!-- Standard orientation constant. -->
<attr name="orientation">
    <!-- Defines an horizontal widget. -->
    <enum name="horizontal" value="0" />
    <!-- Defines a vertical widget. -->
    <enum name="vertical" value="1" />
</attr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:34:54.123

@Andy McSherry 所说的并不完全正确，因为通常 XML 常量仍然需要在代码中匹配（无论是 Java 还是本机）才能执行逻辑。

话虽如此，没有一个文件包含所有常量的定义。相反，常量通常是相对于它们的使用位置来定义的。例如，`android:orientation`值可以在`LinearLayout`( [`LinearLayout.HORIZONTAL`](http://developer.android.com/reference/android/widget/LinearLayout.html#HORIZONTAL)with value `0`) 和[`LinearLayout.VERTICAL`](http://developer.android.com/reference/android/widget/LinearLayout.html#VERTICAL)(with value `1`) 中找到。

的可能值`android:gravitiy`实际上是在一个单独的类中定义的[`Gravity`](http://developer.android.com/reference/android/view/Gravity.html)，这从封装的角度来看是有意义的，特别是因为重力被不同的例如`ViewGroup`实现使用。

一般来说，根据经验，如果常量只与单个类相关，您会发现它们在同一个类中声明。否则，它们很可能被分解到单独的文件或例如超类中。

# eclipse - 在 pom.xml 中自动生成依赖项

> ID：13927385
> 
> 赞同：1
> 
> 时间：2012-12-18T06:18:38.730
> 
> 标签：eclipse, maven

我正在将一个项目转换为 Maven 项目。所以我希望 pom.xml 中的所有依赖项都将从库中自动生成（包含大约 100 个 jar 文件，手动执行可能会浪费很多时间）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:22:54.747

JBoss 工具包含一些 Maven 集成，可以做到这一点。您可以在[此处](https://community.jboss.org/en/tools/blog/2012/12/10/jboss-tools-4-and-developer-studio-6-is-ready)找到更多相关信息，并且[有](http://marketplace.eclipse.org/node/420896#.UNALfm9-VzY)安装链接。

# jquery - 在 Ajax Spring MVC 中上传文件不起作用

> ID：13927388
> 
> 赞同：1
> 
> 时间：2012-12-18T06:18:50.057
> 
> 标签：jquery, spring-mvc, file-upload, multipartform-data

我正在使用以下代码将使用 ajax 的文件上传到 spring mvc 控制器

```
var formData = new FormData();    
formData.append('file', file);

  $.ajax({
         url: url,
         data: formData,
         cache: false,
         contentType: false,
         processData: false,
         type: 'POST',
     }); 
```

我可以在 http 帖子中看到我的数据，但我在控制器中得到空值。

```
 @RequestMapping(value = { "/file.htm" }, method = RequestMethod.POST)

    public @ResponseBody String upload(@RequestParam(value="file",required=false) CommonsMultipartFile file 

            ) throws IOException {

        String response="";
} 
```

我也试过了`MultipartFile`。我什至尝试使用`MultipartHttpServletRequest`并尝试从请求中获取数据但无法获取。请让我知道如何解决它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:23:50.580

尝试使用 @RequestPart 而不是 @RequestParam

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-17T12:21:17.387

```
var fd = new FormData();
fd.append( "file", $("input[name=file]").files[0]);

var ajaxReq =  $.ajax({
    url : 'kolfileUpload',
    type : 'POST',
    data : fd,
    cache : false,
    contentType : false,
    processData : false,

}); 
```

# business-intelligence - 我可以在 OBIEE 分析报告中按列创建新的分组吗？

> ID：13927392
> 
> 赞同：1
> 
> 时间：2012-12-18T06:19:05.743
> 
> 标签：business-intelligence, obiee

在这里我有一个报告：

```
ProductID Price
LCD1 12
LCD2 11
LCD3 10
TV 100
GAME 50 
```

我希望在 OBIEE 的这份报告中添加一个新列，结果应该如下所示：

```
ProductID Price New_ProductID_Grouped
LCD1 12 LCD
LCD2 11 LCD
LCD3 10 LCD
TV 100 TV
GAME 50 GAME 
```

我希望在现场展示 LCD* 产品作为 LCD `New_ProductID_Grouped`。

在 OBIEE 中可以吗？

我希望创建列，然后再做层次结构。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:47:28.680

是否只想为该分析添加此列？通常最好在 RPD 中定义该列，这将使其可用于所有报告和分析。

如果您只希望该列用于此特定分析，则至少有两种方法：

**A) 如果您可以使用查询来确定该值（即您可以通过编程方式找出产品是 LCD、TV 还是游戏）：**

> A1 - 再次将 ProductId 列拖到条件选项卡并将名称更改为“Product Type”，您现在将有 3 个列：“ProductId”、“Price”和“Product Type”
> A2 - 使用编辑新列的公式将根据 productID 计算产品类型的 LSQL，例如：

```
 CASE ( SUBSTRING("Products"."ProductID" FROM 0 FOR 3) )  
  WHEN 'LCD' THEN 'LCD Group'       
  WHEN 'TV' THEN 'TV Group' 
  ELSE 'Game Group' 
 END 
```

> A3 - 将新列添加到表/数据透视表，如果您想查看在类型级别聚合的数据，您可能需要隐藏 productID 列。

**B) 如果您必须手动选择类型（即您必须查看 productID 以确定产品是 LCD、TV 还是 Game）：**

> B1 - 单击结果选项卡中的“新建组”按钮
> B2 - 使用“LCD 组”作为显示标签并从“值来自”列表中选择 ProductID
> B3 - 手动选择应标记为 LCD 的产品
> B4 - 重复 B1- B3 用于“TV”和“GAME”
> B5 - 预览报告；请注意，您可以通过单击该组来深入了解 ProductID。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:11:01.887

如果您要添加的列是维度，那么可以，因为您添加到作为维度列的答案的任何列都将自动添加到 GROUP BY。

如果它不是维度而是事实（通过聚合定义），那么您需要指定它。请参阅[OBIEE101 上的此帖子](http://obiee101.blogspot.co.uk/2008/02/obiee-aggregate-by.html)

# android - 使用 facebook graph api 发布签到

> ID：13927396
> 
> 赞同：0
> 
> 时间：2012-12-18T06:19:27.117
> 
> 标签：android, facebook-graph-api

[https://graph.facebook.com/profile-id/checkins?access_token=access_token&message=](https://graph.facebook.com/profile-id/checkins?access_token=access_token&message=) “办公室”

我正在使用上面的图形 api，在我的提要上发布签入，我在浏览器上尝试了这个，我得到空数组作为响应，我还使用了来自图形 api 资源管理器的 access_token，这是允许的（发布签入）。

我收到如下回复

```
 {
   "data": [

   ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:13:32.790

```
final JSONObject jsonobj;

try {

    jsonobj = new JSONObject();
    jsonobj.put("latitude", fetLatitude);
    jsonobj.put("longitude", fetLongitude);

    final String message;
    final String name = fetPlaceName;
    final String placeID = fetPlaceID;

    if (edittxtMessageBox != null){
        message = edittxtMessageBox.getText().toString();
    } else {
        message = "I am at: " + fetPlaceName  + " using MyAppName";
    }

    new AlertDialog.Builder(this).setTitle(R.string.check_in_title)
        .setMessage(String.format(this.getString(R.string.check_in_at), name))
        .setPositiveButton(R.string.checkin, new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                Bundle params = new Bundle();
                params.putString("place", placeID);
                params.putString("message", message);
                params.putString("coordinates", jsonobj.toString());
                Utility.mAsyncRunner.request("me/checkins", params, "POST",
                        new placesCheckInListener(), null);
            }
        }).setNegativeButton(R.string.cancel, null).show();
} catch (Exception e) {
    e.printStackTrace();
} 
```

# javascript - 自动将一个变量名替换为另一个

> ID：13927401
> 
> 赞同：1
> 
> 时间：2012-12-18T06:20:02.683
> 
> 标签：javascript

我一直在寻找使我的代码更简洁的方法，因此我想找到一种方法来自动将标识符替换为该标识符的缩写（每当我键入该标识符时）。它类似于某些文字处理器中的“自动更正”功能。

例子：

```
var con = console.log;
//from this point on, whenever I type "console.log" as a variable name, I want the text to be automatically replaced with "con" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:29:38.190

采用

```
var con = function(str){console.log(str);};
con('hello world'); //=> hello world 
```

看起来您希望能够使用一种[智能感知](http://en.wikipedia.org/wiki/IntelliSense)或[自动完成功能](http://en.wikipedia.org/wiki/Autocomplete)。你的编辑应该提供。您可以尝试[Komodo Edit](http://www.activestate.com/komodo-edit/downloads)或[Visual Studio](http://msdn.microsoft.com/en-us/vstudio/aa718325.aspx) (2012)。在 Komodo Edit 中，上面的代码示例会导致自动完成（它会显示`con`您是否输入了“co”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:22:10.160

长时间编写代码，并通过混淆器运行它，例如[前面描述的包之一](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

# list - Sencha Touch 2.1：允许垂直列表上的水平溢出

> ID：13927404
> 
> 赞同：3
> 
> 时间：2012-12-18T06:20:18.347
> 
> 标签：list, sencha-touch, touch, sencha-touch-2, sencha-touch-2.1

我正在尝试在 Sencha Touch 2.1 中创建一个列表，其中每个 itemTPL 行都有水平溢出。它仍然是一个垂直列表，但每行显示的内容太多。

所以我将列表放在一个包装容器中，它具有设定的宽度并允许水平滚动。这允许标题和列表内容水平移动。它实际上有效。但是，在释放滚动后，它会重新回到 0。对于容器视口来说，滚动条明显太大，给人的感觉是没有正确渲染。

有谁知道如何让顶部容器自由滚动。

这里有一个示例，它显示了溢出小窗口的图标。您可以滚动查看完整图标，但不能将滚动条留在原处... [http://www.senchafiddle.com/#dSMpw](http://www.senchafiddle.com/#dSMpw)

```
Ext.application({
name: 'SenchaFiddle',
models:['Model'],
stores:['Store'],

launch: function() {
    var list = Ext.create('Ext.List',{
        store: 'Store',
        itemTpl: new Ext.XTemplate('<img src="{icon}" width=750 height=50/>'),
        flex:1
    });

    var panel = Ext.create('Ext.Container', {
        layout:'vbox',
        width:750,
                    scrollable : {
                        direction     : 'horizontal',
                        directionLock : true
                    },
        items: [
            {
                html: 'Header bar',
            },
            list
        ]
    });

    Ext.Viewport.add(panel)
 }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T09:18:51.310

一直在寻找这个，但显然我们无法做到这一点，规则是：

*   如果要水平显示项目，请使用 dataview
*   如果要垂直显示项目，请使用列表
*   如果您需要对项目进行分组，请使用列表

至于[Ram G Atherya](https://stackoverflow.com/users/1651689/ram-g-athreya)给出的建议[答案](http://try.sencha.com/touch/2.0.0/examples/list-horizontal/)，

如果我们查看源代码，它使用数据视图而不是列表（xtype：'dataview'）和“inline：wrap：false”使项目水平滚动而不被换行到下一行..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T10:07:18.407

我不完全理解你的问题，但我认为[这](http://try.sencha.com/touch/2.0.0/examples/list-horizontal/)就是你想要的......你需要做的就是将列表的内联换行设置为 false

```
inline: {
        wrap: false
}, 
```

# matlab - 提高matlab中多项式求根的精度

> ID：13927405
> 
> 赞同：1
> 
> 时间：2012-12-18T06:20:24.183
> 
> 标签：matlab

我有一个多项式取决于`x`和`y`在matlab中，当我找到它的不同根时`x`，有时多项式中根的替换不是几乎为零的值，有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:39:32.277

当缩放比例不佳时`x`，可能会出现数值问题。`y`例如，如果您的根`(x,y)`具有非常大的值，则机器精度可能会阻止您获得精确的根。尝试将您的功能扩展到一个紧凑的域`(0,0)`（通常`[-1,1]x[-1,1]`是一个很好的起点）。

```
%// let mx and my be upper bounds to |x| and |y| respectively
nx = x / mx; %// change of variables
ny = y / my;
%// express your polynom in nx and ny and solve for them
%// let nrx and nry be a root of the polynom in the new changed variables, then:
rx = nrx * mx; %// root in original varialbes
ry = nry * my;
%// if you want to verify that the roots indeed brings your polynom to zero, you should try it in the scaled domain with rnx, rny. 
```

# jetty - Jetty 9 在具有特定扩展名的文件上抛出空指针 (woff ttf)

> ID：13927410
> 
> 赞同：0
> 
> 时间：2012-12-18T06:20:58.177
> 
> 标签：jetty

Jetty 显示 ttf 和 woff 文件的奇怪行为。下面的堆栈跟踪是在访问 .ttf 文件（静态）时生成的。我将文件重命名为 .bin 它工作正常。然后我创建了一个常规的 html 文件并将其保存为 .ttf 扩展名，出现了同样的问题。

ubuntu 上的 java 版本“1.7.0_03”+ jetty-9.0.0.M3。

完整的堆栈跟踪：

```
HTTP ERROR 500
Problem accessing /assets/fontawesome-webfont.ttf. Reason:
    Server Error
Caused by:
java.lang.NullPointerException
    at org.eclipse.jetty.util.BufferUtil.toBuffer(BufferUtil.java:678)
    at org.eclipse.jetty.server.ResourceCache$Content.<init>(ResourceCache.java:385)
    at org.eclipse.jetty.server.ResourceCache.load(ResourceCache.java:229)
    at org.eclipse.jetty.server.ResourceCache.lookup(ResourceCache.java:188)
    at org.eclipse.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:472)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:669)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:445)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:138)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:582)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:213)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1054)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:372)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:175)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:988)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:136)
    at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:261)
    at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:101)
    at org.tuckey.web.filters.urlrewrite.NormalRewrittenUrl.doRewrite(NormalRewrittenUrl.java:213)
    at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:171)
    at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)
    at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)
    at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:394)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)
    at org.eclipse.jetty.servlets.UserAgentFilter.doFilter(UserAgentFilter.java:82)
    at org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:254)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:443)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:138)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:564)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:213)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1054)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:372)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:175)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:988)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:136)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:258)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:109)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)
    at org.eclipse.jetty.server.Server.handle(Server.java:410)
    at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:245)
    at org.eclipse.jetty.server.HttpConnection$1.run(HttpConnection.java:75)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:597)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:33:03.543

Jetty 在 mime.properties 中缺少默认的 mime 类型条目。我刚刚为jetty9修复了这个问题。快速解决方法是在 webdefault.xml 中为 ttf 添加一个 mime 类型：

ttf 应用程序/八位字节流

干杯，托马斯

# php - 如何请求额外的 google oauth2 范围？

> ID：13927414
> 
> 赞同：2
> 
> 时间：2012-12-18T06:21:16.290
> 
> 标签：php, google-api, oauth-2.0, google-contacts-api

我正在使用 google oauth 2 进行注册。

注册时我问这两个范围。

```
https://www.googleapis.com/auth/userinfo.email
https://www.googleapis.com/auth/userinfo.profile 
```

我已经成功地将 oauth2 令牌（如刷新令牌）存储在数据库中。

我的一些用户有兴趣邀请他们的朋友。

所以我想请求额外的范围来访问该用户的联系人。这是访问联系人的范围

```
https://www.google.com/m8/feeds/ 
```

现在有没有办法在不强制用户注销并再次授权的情况下请求额外的范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:42:50.753

你不能。用户必须重新登录。

# html - 实现点击式 Web 数据提取器

> ID：13927415
> 
> 赞同：-2
> 
> 时间：2012-12-18T06:21:24.370
> 
> 标签：html, css, web-scraping, web-crawler, jsoup

我已经使用 jsoup 构建了一个网络爬虫。在当前版本中，用户必须使用 Firefinder 才能进入 CSS 选择器。

我想简化这一点，以便不了解 CSS 的用户也可以使用我的工具。我找到了这个工具[http://www.mozenda.com](http://www.mozenda.com)并看到他们有一个点击界面来选择网页中的特定元素。

如何实现这样的接口？或者有没有其他方法可以让用户轻松输入我的引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:12:42.480

我编写了一个[Greasemonkey 脚本](http://userscripts.org/scripts/show/144991)来执行此操作。

您可以查看源代码，看看它是如何完成的（捕获文档 mouseup 事件，然后使用 window.getSelection 获取元素）

# selenium - 如何验证 Selenium IDE 中存储在变量中的文本？

> ID：13927424
> 
> 赞同：0
> 
> 时间：2012-12-18T06:22:02.327
> 
> 标签：selenium, ide, qa

我正在尝试以下操作：

1.  `ArrDt`在第 1 页的变量“”中存储一个值，例如“到达日期”的值
2.  进入第 2 页
3.  尝试验证第 1 页上提供的到达日期：**这里我需要验证到达日期值与存储在变量“ `ArrDt`”中的值相同，并寻求您的帮助**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:35:02.013

verifyTrue storedVars['ArrDt'] == nextpage's value or use verifyEquals

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:27:51.220

我也遇到过同样的情况，您可以将第 2 页中的“到达日期”放在另一个变量中并比较这两个变量。或者您也可以使用 java.lang.String.contains("//arrival date from page 1") 方法。

# c# - 导出中的 Rdlc 报告列可见性

> ID：13927426
> 
> 赞同：1
> 
> 时间：2012-12-18T06:22:10.617
> 
> 标签：c#, reporting-services, report, rdlc, rdl

我有一个 Rdl 报告作为 Par 客户端要求 我想在导出报告中隐藏一些列 他们应该只显示运行时间而不是导出

请帮我导出 CSV

我可以尝试所有的东西，但还没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:05:37.313

我可以找到这种情况的解决方案，但无法在导出 CSV 文件中工作

1）我安装了SqlServer R2，所以使用这个参数获取一个像Reander.name这样的参数我可以隐藏特定的列或行
，但它应该在PDF和Excel中工作而不是在Csv文件中

# drupal - 如何修改内容类型 Drupal7 中的输入表单

> ID：13927428
> 
> 赞同：2
> 
> 时间：2012-12-18T06:22:28.987
> 
> 标签：drupal, input, drupal-7, theming

谁能帮我？我已经有很多时间环顾四周来解决这个问题。现在我知道了，如何制作新的内容类型以及如何为其输出设置主题。这很简单。只需在我的模板文件夹中创建一个“node--content-type-name.tpl.php”文件。现在我想主题输入表单。

当我找到它的方式时，只是说，制作一个新模块或在 template.php 中放置一些代码，但我尝试了数千次但没有任何结果。我想我没有很好地理解它。这比仅仅制作一个 tpl.php 文件太难了。

所以，我的问题是。

1.  有什么方法可以制作像 node--content--edit.tpl.php 这样的输入主题文件？（我发现，在页面情况下，制作一个页面--node--add--content-type.tpl.php）

2.  我必须制作自定义模块吗？如果我想在内容类型中输入主题？

3.  有人说，将 theme() 函数放在 site/all/theme/bartik 文件夹中的 template.php 中。我在下面放了一个代码，但它没有用。我错过了什么吗？

内容类型名称：mycontent

```
function mycontent_theme() {
    return array(
        'mycontent_node_form' => array(
        'agruments' => array('form' => NULL),
        'template' => 'mycontent-node-form',
        ),
    );
} 
```

然后我在 site/all/theme/bartik/template 文件夹中创建了 mycontent-node-form.tpl.php 文件，并在其中放入了随机文本。(adsfasdfkajsdhfkash) 但什么也没发生。

实际上我只想在我的内容类型（INPUT）中制作一个协议框，但我花了很多时间。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:57:32.613

> 有人说，把`theme()`函数放在site/all/theme/bartik文件夹的template.php中。我在下面放了一个代码，但它没有用。我错过了什么吗？

而不是`mycontent`，您应该使用主题的短名称。如果您将其添加到 Bartik 主题中，那么函数名称应该是`bartik_theme()`，而不是`mycontent_theme()`。

您正在使用的代码包含一个错字：它是*arguments*，而不是*agruments*。但是，Drupal 7 中没有使用该属性。Drupal 7 使用*变量*或*渲染元素*。

```
function bartik_theme() {
  return array(
    'mycontent_node_form' => array(
      'render element' => array('form' => NULL),
      'template' => 'mycontent-node-form',
    ),
  );
} 
```

作为旁注，如果要向已启用的模块/主题添加功能，则需要先禁用它，然后重新启用它，因为 Drupal 缓存了模块/主题实现的某些功能的名称。

# javascript - $("html").scrollLeft(值); 不能在 Chrome 中工作

> ID：13927430
> 
> 赞同：1
> 
> 时间：2012-12-18T06:22:31.670
> 
> 标签：javascript, jquery, scroll

我试图让浏览器在页面加载时水平滚动到特定位置。它适用于 FF 和 IE，但不适用于 Chrome。

```
 $(document).ready(function () {
 $("html").scrollLeft(100);
 }); 
```

有任何想法吗？

我更大的目标是让浏览器以水平滚动条为中心。同样，我在 FF 和 IE 中都可以使用，但没有 Chrome。

我所有的其他方法在 Chrome 中都可以正常工作。我正在使用以下方法来查找要滚动的像素数量，以便将其居中，并且它们都可以正常工作，但是当尝试使用“scrollLeft”时，它什么也不做。

```
$(document).width()
screen.width)
$(window).width() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:35:28.900

请用

```
$(window).scrollLeft(100); 
```

或者

```
$(document.body).scrollLeft(100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:29:52.557

也许你可以试试

```
$(window).scrollLeft(100); 
```

# java - 用于趋势分析的 android.database 和 android.graphics

> ID：13927431
> 
> 赞同：0
> 
> 时间：2012-12-18T06:22:41.267
> 
> 标签：java, android, sqlite, graph

是否可以使用 Android API 提供的 android.database 和 android.graphics 进行趋势分析（如折线图和饼图）？我正在考虑从 SQLite 数据库中读取数据点，并将其用作 Java 的图形点等坐标。

如果这听起来可行，那么这种方法是否需要创建 ContentProvider？

这适用于未与服务器集成的 android 应用程序，逻辑和数据库在客户端中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:12:49.690

这对我来说听起来是可行的。我以前没有使用过 sqlite 数据库，所以我没有任何建议给你。但是，我可以推荐使用[afreechart](http://code.google.com/p/afreechart/)为您的应用程序制作漂亮的图表；它易于学习和使用。

# ajax - 如何使用没有历史记录的ajax进程加载页面？

> ID：13927432
> 
> 赞同：0
> 
> 时间：2012-12-18T06:22:43.117
> 
> 标签：ajax, jquery-mobile

在我的网站中，我没有网页，而且我没有显示历史记录（用户不应使用后退按钮在页面之间随机播放），

为此，我正在使用此功能：

html:

```
 <a class="challengeBtn changePage" data-link="task-1.html" href="#">Take the Hays Challenge</a>

 $('a.changePage').on('click',function(){
        var newPage = $(this).attr('data-link');
        $.mobile.loadPage(newPage);
    }) 
```

但页面根本没有从我的本地文件夹加载。有人帮我整理一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:53:17.967

你应该打电话

```
$.mobile.page.prototype.options.domCache = true; 
```

在启动应用程序然后使用时防止 jqm 缓存（历史记录）

```
$.mobile.changePage(newPage); 
```

显示新页面

# xcode - 在不创建和导入新项目的情况下更改 xcode 包名称

> ID：13927433
> 
> 赞同：2
> 
> 时间：2012-12-18T06:22:50.607
> 
> 标签：xcode, xcode4

我用一个脏包名构建了一个 ios 应用程序项目，现在我想更改这个包名，但我的 ios 模拟器窗口在运行时保持空白。有人可以知道如何在不对新项目进行原始导入的情况下更改包名称。?

我正在使用 xcode 4.5.2 山狮

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:17:54.420

我通过编辑应用程序“目标”的“捆绑标识符”来更改包名称

![截屏](../Images/ecc8238ea9db4a189d75529b96617615.png)

# php - 修复php中的解析错误

> ID：13927436
> 
> 赞同：-4
> 
> 时间：2012-12-18T06:22:54.617
> 
> 标签：php

当我尝试加载我的页面时，我该如何纠正这个错误，

```
Parse error: syntax error, unexpected $end in C:\xampp\htdocs\mysite\index.php on line 46 
```

第 46 行的代码是下面这个

```
?> 
```

我的代码就是这个

```
<?php session_start();?>

<!DOCTYPE html>
<html lang="en">
<?php
if (isset ($_post['submit'])){
    $error_count = 0;
    $error_message = array();
//trim removes the spaces
  $validate = trim(strtolower($_post['validate']));
  if($validate != get_answer() ){ 
  $error_count++;
  $error_message['validate'] = "validation error";
   }  
 echo $error_count;
if( $error_count > 0){
?>
<form method="post">
<h1> <?php create_function()?></h1>
<label for="validation">Validate:</label>
<input type="text" name="validate" id="validate" />
<?php if(isset($error_message['validate'])):?>
<span style="color: red"><?php echo $error_message['validate']?></span>
<?php endif;?>
<span style="color: green">Reenter Answer to Question</span>
<br/>
<input type="submit" name="submit" value="email">
</form>
<?php
}
else{
?>
<form method="post">
<h1> <?php create_function()?></h1>
<label for="validation">Validate:</label>
<input type="text" name="validate" id="validate" />
<br/>
<input type="submit" name="submit" value="email">
</form>
<?php
}
?> 
```

我到底做错了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T06:25:42.083

你错过了一个右括号`}` 我猜它应该在最后一个 php 结束标记之前`?>`

```
 <!DOCTYPE html > <html lang = "en" >
  <? php if (isset($_post['submit'])) {
    $error_count = 0;
    $error_message = a rray(); //trim removes the spaces $validate=t rim(strtolower($_post[
    'validate']));
    if ($validate != g et_answer()) {
        $error_count++;
        $error_message['validate'] = "validation error";
    }
    echo $error_count;
    if ($error_count > 0) { ?>
    <form method="post">

<h1> <?php create_function() ?></h1>

        <label for="validation">Validate:</label>
        <input type="text" name="validate" id="validate" />
        <?php if (isset($error_message['validate'])) : ?>
<span style="color: red"><?php echo $error_message['validate'] ?></span>

        <?php
    endif; ?>
<span style="color: green">Reenter Answer to Question</span>

            <br/>
            <input type="submit" name="submit" value="email">
    </form>
    <?php } else { ?>
    <form method="post">

<h1> <?php create_function() ?></h1>

        <label for="validation">Validate:</label>
        <input type="text" name="validate" id="validate" />
        <br/>
        <input type="submit" name="submit" value="email">
    </form>
    <?php }
} //guess you are missing this 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:02:16.297

`}`正如 Dan 提到的，文件末尾的错误很可能缺少右括号。
您可以使用 IDE 中的工具对其进行调试。至于我，我正在使用 Adob​​e Dreamweaver 并使用它的**Balance Braces**工具。如果您有正确的左括号和右括号，它将突出显示整个块。我希望你的 IDE 中有这个工具并且你可以调试它。

![在此处输入图像描述](../Images/8f1c5b672231e9060e916d7144857a56.png)

# php - 这个递归函数正确吗？

> ID：13927438
> 
> 赞同：0
> 
> 时间：2012-12-18T06:23:20.940
> 
> 标签：php, recursion

我开发了这个使用递归调用自身的函数。我需要生成一个唯一的激活码。

它是这样的： 1\. 使用单独的类文件中的函数生成一个随机字符串。（参见第二个代码） 2\. 我正在检查激活表中该字符串的唯一性，以便没有重复项。3.万一重新生成随机字符串虽然我知道机会很小，但我不想冒险。所以我正在对照表记录检查它。

如果生成的激活码已经存在，那么函数应该再次调用自身以生成新的激活码，整个过程继续进行，直到我们得到一个唯一的激活码，该激活码不存在于表记录中。

我的问题是，我是否正确编码了它，即递归部分。如果它不正确或者是否有人有更好或有效的方法来实现这一点，请告诉我。

注意：我从类文件中调用这些函数。简单地说，我正在使用 OOP。所以我需要知道调用递归的代码应该是

```
return generateUniqueActivationCode(); 
```

或者

```
return $this->generateUniqueActivationCode(); 
```

任何帮助将不胜感激。

```
 // Generate Unique Activation Code
    //*********************************************************************************
    public function generateUniqueActivationCode()
    {
        $mysql = new Mysql();
        $string = new String();

        // This is coming from the 2nd part of code snippet that I have added
        $activation_code = $string->generateActivationCode();

        // Is Activation Code Unique Check
        $sql = "SELECT activation_id FROM ". TABLE_ACTIVATION_CODES ." WHERE activation_code='$activation_code' LIMIT 1";
        $query = $mysql->query($sql);

        if($mysql->rowCount($query) > 0)
        {
            // This function is calling itself recursively
            return generateUniqueActivationCode();
        }
        else
        {
            return $activation_code;
        }
    } 
```

这是生成随机激活码的代码

```
class String
{
    // Generates A Random String (Can be used for generating password etc.)
    //*********************************************************************************
    public function generateRandomString($noofchars=8)
    {
        $salt = "ABCDEFGHIJKLMNOPQRSTUVWXYZabchefghjkmnpqrstuvwxyz0123456789";
        srand((double)microtime()*1000000);
        $i = 0;
        while ($i <= $noofchars)
        {
            $num = rand() % 33;
            $tmp = substr($salt, $num, 1);
            $string = $string . $tmp;
            $i++;
        }
        return $string;
    }   
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:27:31.273

我会这样输入：

```
public function generateUniqueActivationCode(){
        $mysql = new Mysql();
        $string = new String();
        do{
            $activation_code = $string->generateActivationCode();
            $sql = "SELECT activation_id FROM ". TABLE_ACTIVATION_CODES ." WHERE activation_code='$activation_code' LIMIT 1";
            $query = $mysql->query($sql);
        }while($mysql->rowCount($query) > 0);
        return $activation_code;
    } 
```

执行（至少运行一次），但只要您的 rowCount 返回大于 0 的值就会重复。

# android - AlarmManager 没有取消我的 setRepeating Alarm

> ID：13927441
> 
> 赞同：0
> 
> 时间：2012-12-18T06:23:39.303
> 
> 标签：android, alarmmanager, android-pendingintent, android-alarms

我有一个创建重复警报的活动（设置警报），我需要从另一个活动中取消该警报（取消警报）。我无法取消闹钟。我究竟做错了什么？：

```
public class settingalarm...

am =(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
Intent alrm = new Intent(context, z.class);
alrm.setAction(ALARM);
alrm.putExtra(x, x);
PendingIntent alarmIntent = PendingIntent.getBroadcast(context, 0, alrm, 0);
am.setRepeating(AlarmManager.RTC_WAKEUP, 0, 30000, alarmIntent); 
```

我有另一个需要取消现有警报的活动：

```
public class cancelingalarm...

am =(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
Intent alrm = new Intent(context, z.class);
PendingIntent alarmIntent = PendingIntent.getBroadcast(context, 0, alrm, 0);
am.cancel(alarmIntent); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:32:19.540

You need to use an equivalent `Intent` for the `PendingIntent` you create. In this that means setting the same action. BTW, since you are using an explicit Intent (you specify the class name), there is really no need to add an action as well.

In short: either remove `alrm.setAction(ALARM);` or use it in both places.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:32:15.560

I am making intent Global & working for me:--

```
private Intent alrm;

alrm = new Intent(context, z.class); 
```

# c++ - C++ - 接受命令行参数？

> ID：13927442
> 
> 赞同：3
> 
> 时间：2012-12-18T06:23:46.757
> 
> 标签：c++

所以这是我的原始代码：

```
#include <iostream>

using namespace std;

int main ()
{
    float x;  
    cout << "Please enter an integer value: ";
    cin >> x;

    if ((x >= 100) && (x < 200)) {
        cout << "split";
    } else if (x == 0 ||x == 1 ) {
        cout << "steal";
    } else {
        cout << "split";
    } 

    system("pause");
} 
```

* * *

它工作得很好，但我需要它以这种方式运行：

```
C:\> program.exe 109 
```

它将读取`109`并给出输出 - `"steal"`。

```
C:\> program.exe 0.5 
```

它会读取`0.5`并给我输出`"split"`。

我必须在原始代码中添加什么才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T06:29:18.937

将您的主要更改为

```
int main (int argc, char** argv) 
```

您可以检查程序中指定参数的数量`argc`以及 中的值（如`char *`）`argv`。您可以使用将该值转换为浮点数`std::stof`

```
float x = 0.0f;
if (argc > 1) {
    x = std::stof(argv[1]);
} else {
    std::cerr << "Not enough arguments\n";
    return 1;
} 
```

请注意，程序的第一个参数是可执行文件本身的名称（`program.exe`在您的情况下），因此您需要检查至少两个参数。

参考资料：[http ://en.cppreference.com/w/cpp/string/basic_string/stof](http://en.cppreference.com/w/cpp/string/basic_string/stof)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:32:32.420

Can we have more clarity on the question? Do you want to know how to execute the code using command line arguments? In that case here it is:

```
int main (int no_of_args, char* arglist[])
{
} 
```

In `argList`, the first item holds the name of the executable and subsequent items hold the inputs provided.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:31:31.783

您可以通过使用命令行参数来做到这一点。这是主要功能的格式：

```
int main (int argc, _TCHAR* argv[])
{
} 
```

这里`argc`表示参数的数量（在您的情况下返回 2， program.exe 0.5 ）

`argv`代表两个字符串。第一个包含`program.exe`和第二个包含`0.5`。

这样你就可以解决你的问题

# r - 以编程方式从数据框中提取行和列

> ID：13927447
> 
> 赞同：1
> 
> 时间：2012-12-18T06:23:58.530
> 
> 标签：r, dataframe

我有一个数据框。

```
temp = data.frame(a=c(1,2,3,4),b=c(6,7,8,9),c=c(10,11,12,13))
> temp
a b  c
1 1 6 10
2 2 7 11
3 3 8 12
4 4 9 13 
```

我想提取列“a”和“c”的第 2 行和第 4 行，意思是：

```
a c
2 11
4  13 
```

这个“a”和“c”在输入过程中会有所不同，并且可以有更多的列名，所以我将它们放入一个列表中，例如，

```
t <- c("a","c")
output <- c(output,temp[2,t])
output <- c(output,temp[4,t]) 
```

但它让我回来了

```
> f
$a
[1] 2

$c
[1] 11

$a
[1] 4

$c
[1] 13 
```

我想要的是

```
a c
2 11
4  13 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:37:21.943

正如 Ananda Mahto 在对我的问题的评论中回答的那样，我可以将行和列名存储在向量中，并使用它们来获取我想要的数据：

```
> i <- c(2,4)
> ee <- c("a","c")
> temp[i, ee]
  a  c
2 2 11
4 4 13 
```

# google-visualization - 如何在谷歌图表工具中绘制甘特图？

> ID：13927451
> 
> 赞同：3
> 
> 时间：2012-12-18T06:24:18.593
> 
> 标签：google-visualization

我正在尝试使用 Google Chart Tools 实现甘特图，但我在 Google 中没有找到正确的选项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:07:58.200

似乎没有开箱即用的甘特图控件。

[https://google-developers.appspot.com/chart/interactive/docs/gallery](https://google-developers.appspot.com/chart/interactive/docs/gallery)

但是，您可以使用 Google Chart Tool API 创建甘特图，请参见：

[http://jsfiddle.net/2jfy6/2/](http://jsfiddle.net/2jfy6/2/)

代码

```
<img  

title="Gantt Chart" 
src="http://chart.apis.google.com/chart?cht=bhs&amp;
chs=500x300&amp;
chd=t:0,0,0,0,0,0|10,20,30,40,60,75|10,20,40,20,30,19&amp;
chxt=x,y&amp;
chxl=1:sad|Testing&amp;
chxr=0,0,100|1,0,100&amp;
chds=0,100&amp;
chco=DC143C|DC143C,ffffff00&amp;
chg=20,50&amp;
chbh=20,10&amp;
chtt=Gantt Chart&amp;
chts=000000,25&amp;
chdl=Project Test&amp;chdlp=b" 
alt="Google Charts Gantt Chart"
width="500" 
height="300" /> 
```

# php - 不要从正在运行的 iOS 发布查询

> ID：13927453
> 
> 赞同：0
> 
> 时间：2012-12-18T06:24:30.700
> 
> 标签：php, mysql, ios, database

我受尽折磨。我不明白为什么这段代码不起作用？我做错什么了？谢谢，我真的需要帮助

```
 <?php
$name = $POST['name'];
$tel = $POST['tel'];
$dbhost = "sql200.60ru.com"; 
$dbuser = "****"; 
$dbpassword = "***"; 
$dbname = "60ru_11939825_zav333"; 
$link = mysql_connect($dbhost, $dbuser, $dbpassword);
mysql_select_db($dbname, $link);
$query = "INSERT INTO customer (name, tel) VALUES (" . $name . "," . $tel . ")";
mysql_query($query, $link);
 mysql_close($link);
?> 
```

和

```
NSString *bodyData =  @"fio=GGG&telefon=2521521551277777";    
    NSMutableURLRequest *postRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://zav333.60ru.com/test/insert.php"]];
    [postRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [postRequest setHTTPMethod:@"POST"];
    [postRequest setHTTPBody:[NSData dataWithBytes:[bodyData UTF8String] length:[bodyData length]]];
    self.mainUrl = [[NSURLConnection alloc] initWithRequest:postRequest delegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:30:27.707

改变这个

```
$name = $POST['name'];
$tel = $POST['tel']; 
```

到

```
$name = $_POST['name'];
$tel = $_POST['tel']; 
```

获取 post 值的正确语法`$_POST`不是`$POST`and

```
$query = "INSERT INTO customer (name, tel) VALUES (" . $name . "," . $tel . ")";
mysql_query($query, $link); 
```

到

```
$query = "INSERT INTO customer (name, tel) VALUES ('" . $name . "','" . $tel . "')";
mysql_query($query, $link) or die(mysql_error()); 
```

# asp.net - 我能否确定用户是否启用了浏览器插件？

> ID：13927454
> 
> 赞同：0
> 
> 时间：2012-12-18T06:24:33.733
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-3, pdf-viewer

我在 MVC 应用程序中使用 PDF 查看器，`object id='pdfbox'`. 为此，必须在浏览器中启用插件：Adobe PDF Link Helper。

是否可以通过编程方式确定客户端计算机中是否启用了附加组件并提供链接以启用附加组件？

是否有可用的示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:36:46.723

如果未安装插件，您可以尝试提供将显示的替代内容：

```
<object ...>
    <p>
        You do not have the XXX plugin installed. You could download it here
    </p>
</object> 
```

# c - 无法识别的音乐格式使用 SDL 播放 mp3 文件

> ID：13927456
> 
> 赞同：2
> 
> 时间：2012-12-18T06:24:49.820
> 
> 标签：c, linux, sdl

```
#include <SDL/SDL.h>
#include <SDL/SDL_mixer.h>
#include <stdio.h>
#include <stdlib.h>
Mix_Music *play_sound = NULL;
void cleanUp();

int main(int argc, char* args[])
{

    int channel;
    int audio_rate;
    Uint16 audio_format;
    int audio_channels;
    int audio_buffers;

        if(SDL_Init(SDL_INIT_AUDIO)<0)
        printf("Error In Init");

    audio_rate = 44100;
    audio_format = AUDIO_S16;
    audio_channels = 2;
    audio_buffers = 4096;

    if(Mix_OpenAudio(audio_rate, audio_format, 2, 4096)<0) {
                 //Some error shows here

    } else {
        Mix_QuerySpec(&audio_rate, &audio_format, &audio_channels);
        printf("Opened audio at %d Hz %d bit %s (%s), %d bytes audio buffer\n", audio_rate,
                (audio_format&0xFF),
                (audio_channels > 2) ? "surround" :                         (audio_channels > 1) ? "stereo" : "mono", 
                (audio_format&0x1000) ? "BE" : "LE",
                audio_buffers );
    }

    play_sound = Mix_LoadMUS("1.mp3");

    if ( play_sound == NULL ) {
        fprintf(stderr, "Couldn't load 1.mp3: %s\n",
            SDL_GetError());
        cleanUp();
        return;
    }

        Mix_PlayMusic(play_sound, -1);

    while (Mix_PlayingMusic() || Mix_PausedMusic()) {
            SDL_Delay(100);
        }

        cleanUp();
        return 0;
}

void cleanUp()
{
     Mix_FreeMusic(play_sound);
     Mix_CloseAudio();
     SDL_Quit();
} 
```

### 这是我的输出：

```
Opened audio at 44100 Hz 16 bit stereo (LE), 4096 bytes audio buffer
Couldn't load 1.mp3: Unrecognised music format 
```

谁能告诉我播放 mp3 文件有什么问题`SDL`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:41:05.740

它默认支持 WAV 文件，但您需要 SMPEG 库以及一些更复杂的代码行才能使 mp3 正常工作。几年前我遇到了同样的问题，并通过各种论坛发现 mp3 很棘手。我最终将我的文件转换为 OGG，这非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T06:48:58.227

### 这是一个小脚印！

```
#include <stdio.h>
#include <stdlib.h>
#include <SDL/SDL.h>
#include <smpeg/smpeg.h>
#include <dirent.h>

int main(int argc, char * argv[])
{
  SDL_Surface * screen;
  SMPEG *mpeg;
  SMPEG_Info info;

  /* Init SDL: */

  SDL_Init(SDL_INIT_VIDEO |
           SDL_INIT_AUDIO);

  mpeg = SMPEG_new("1.mp3",&info, 1);

  SMPEG_play(mpeg);

  do
    {
      SDL_Delay(250);
    }while(!SDL_QuitRequested() && SMPEG_status(mpeg)==SMPEG_PLAYING);

  SMPEG_delete(mpeg);
  SDL_Quit();

  return(0);
} 
```

### 编译使用

```
gcc `sdl-config --cflags --libs` sample.c -o sample -lSDL_mixer -lsmpeg 
```

# netbeans - Cygwin g++ 构建错误：未定义的引用

> ID：13927458
> 
> 赞同：0
> 
> 时间：2012-12-18T06:24:58.680
> 
> 标签：netbeans, g++, cygwin, undefined-reference

我试图用 NetBeans cygwin g++ 编译器构建一个项目（ [rar 文件）。](http://www.csie.ntu.edu.tw/~b98902109/db/btree12.rar)我可以通过在 ubuntu 下`make`的**src/**目录中运行来构建它。但是，在cygwin下，它一直给我`undefined reference to...`。

（在编译之前，我已经更改`CC = g++`为`CC = g++-3`in **src/Makefile**。）

错误说`undefined reference to BufMgr::pinPage(int, Page*&, int, char const*)`, where`pinPage()`位于**include/**。

这是项目的结构。

```
project/
    include/
        buf.h (where pinPage() was defined)
        other header files
    src/
        Makefile
        other source files 
```

以下是原始 Makefile 和错误。

生成文件：

```
#
# Makefile for CS564 Minibase project.  Needs GNU make.
#
# Define DEBUGREL for some kind of debugging output (not from us, from
# the original Minibase implementors.)
#
# Warning: make depend overwrites this file.

.PHONY: depend clean backup setup

MAIN = btree

MINIBASE = ..

CC = g++

#CFLAGS = -DUNIX -Wall -g
CFLAGS = -g

INCLUDES = -I${MINIBASE}/include -I.

LFLAGS = -L. -lbtree -lm

SRCS = main.C btree_driver.C btfile.C btindex_page.C btleaf_page.C btree_file_scan.C key.C db.C new_error.C sorted_page.C system_defs.C

OBJS = $(SRCS:.C=.o)

$(MAIN):  $(OBJS)
    $(CC) $(CFLAGS) $(INCLUDES) $(OBJS) -o $(MAIN) $(LFLAGS)

.C.o:
    $(CC) $(CFLAGS) $(INCLUDES) -c $<

depend: $(SRCS)
    makedepend $(INCLUDES) $^

clean:
    rm -f *.o *~ $(MAIN)
    rm -f my_output

backup:
    -mkdir bak
    cp Makefile *.[Ch] bak

run:
    rm -rf my_output
    ./btree > my_output

# Grab the sources for a user who has only the makefile
setup:
    /bin/cp -i $(MINIBASE)/src/*.[Ch] .
    /bin/cp -i $(MINIBASE)/src/*.sample .

# DO NOT DELETE THIS LINE -- make depend needs it 
```

错误：

```
$ make
g++-3 -g -I../include -I. -c main.C
g++-3 -g -I../include -I. -c btree_driver.C
g++-3 -g -I../include -I. -c btfile.C
g++-3 -g -I../include -I. -c btindex_page.C
g++-3 -g -I../include -I. -c btleaf_page.C
g++-3 -g -I../include -I. -c btree_file_scan.C
g++-3 -g -I../include -I. -c key.C
g++-3 -g -I../include -I. -c db.C
g++-3 -g -I../include -I. -c new_error.C
g++-3 -g -I../include -I. -c sorted_page.C
g++-3 -g -I../include -I. -c system_defs.C
g++-3 -g -I../include -I. main.o btree_driver.o btfile.o btindex_page.o btleaf_page.o btree_file_scan.o key.o db.o new_error.o sorted_page.o system_defs.o -o btree -L. -lbtree -lm
btfile.o: In function `_ZN9BTreeFileC2ER6StatusPKc':
/cygdrive/c/Users/Trantor/Documents/NetBeansProjects/DB-HW6/src/btfile.C:78: undefined reference to `BufMgr::pinPage(int, Page*&, int, char const*)'
btfile.o: In function `_ZN9BTreeFileC1ER6StatusPKc':
/cygdrive/c/Users/Trantor/Documents/NetBeansProjects/DB-HW6/src/btfile.C:78: undefined reference to `BufMgr::pinPage(int, Page*&, int, char const*)'
btfile.o: In function `_ZN9BTreeFileC2ER6StatusPKc8AttrTypeii':

..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:10:02.620

这可能是因为文件扩展名似乎是`.C`. 在区分大小写的文件系统 (Unix) 上，大写`.C`扩展表示 C++ 代码，而小写`.c`表示普通的旧 C 代码。因此编译器可能会尝试将其编译为 C 代码，这将产生不同的函数名称。

如果这是原因，那么可能的修复：

*   通过向 CFLAGS 添加正确的编译开关来强制 gcc 编译 C++（`-x c++`快速谷歌搜索）
*   将文件重命名为`.cpp`, 并修复 Makefile 中的扩展名

# github - 删除匿名创建的秘密要点

> ID：13927460
> 
> 赞同：6
> 
> 时间：2012-12-18T06:25:12.160
> 
> 标签：github, gist

我在没有登录的情况下意外创建了一个秘密要点（我认为我的会话在正确的时间过期）..无论如何都要删除它..因为它有敏感数据。

![在此处输入图像描述](../Images/18dacd40cf59246ba518f5ef2e6345ce.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-18T07:25:44.720

> 2014 年 4 月 8 日更新

现在 GitHub 有一个单独的页面来处理[匿名 gists 的删除](https://help.github.com/articles/deleting-an-anonymous-gist)。

* * *

可以发邮件`support@github.com`吗？他们可以帮助你解决这个问题。

# c - fgets 设置为 char * 导致分段错误，动态字符串

> ID：13927465
> 
> 赞同：1
> 
> 时间：2012-12-18T06:25:37.433
> 
> 标签：c, pointers, segmentation-fault, scanf, gets

我正在用 c 编写一个程序，该程序通过“string int”行查看标准输入的文本文件。我最初使用 scanf 使程序运行良好，但现在名称必须是动态字符串（在运行时已知大小），当我将grade_entry 中的名称切换为指针时，它开始出现分段错误

```
typedef struct grade_entry {
       char *name;
       int grade;
} grade_entry;

struct grade_entry grade_list[100];

int main(){
    int grade;
    int done;
    int i=0;
    do{
            puts("not weee\n");
            done=(int)strlen(gets(grade_list[i].name));
            puts("weee\n");
    }while(1);
} 
```

编译和当前输出是：

```
not weee

segmentation fault(core dumped) 
```

**已解决：我分配了指针，然后为 size+1 重新分配，将 null 添加到末尾。不幸的是，我不能根据 scanf、fgets、gets 的临时内存立即进行 malloc。哦，好的，谢谢大家的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T06:29:55.713

您必须为 分配内存`grade_entry.name`，否则它是一个指向任意内存位置的 char 指针，写入它会导致分段错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:54:14.727

你不应该使用`gets()`- 永远。假装不存在。假装如果你使用它会炸毁你的电脑。假设它将用于使您的程序崩溃——因为它会。

问题是您无法确定`gets()`它需要使用多少空间。

改为使用`fgets()`。如果您担心读取的行太长，那么您应该希望您的系统具有 POSIX 2008 功能[`getline()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html)，它可以为您处理任意长度的读取行。您只需要处理字符指针数组，这更简单。

在您的程序中，指针最终将被复制到数据结构中的指针。

这一切都很干净有趣；关键是要记住，如果你没有初始化指针，它会随机指向，在你知道指针指向什么之前，你不能安全地使用指针。因此，初始化您的指针以指向某处，或者初始化为 NULL 以指示它们不指向任何地方。永远不要取消引用 NULL 指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:37:04.140

您尚未为 char* 名称字段分配内存，而是将值存储在此内存中，而您实际上并不拥有该内存。

除此之外，您正在运行一个无限循环并使用相同的数组元素（不增加“i”）

以下是我猜可以工作的代码。

```
typedef struct grade_entry {
   char *name;
   int grade;
} grade_entry;

int main(){
int grade;
int done;
char str[100];
grade_entry grade_list[10];
int i=0;    
do{
        puts("not weee\n");
        gets(str);
        grade_list[i].name=(char*)malloc(strlen(str));
        done=strlen(grade_list[i++].name);
        puts("weee\n");
  }while(i<10);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T06:40:24.907

问题出在这里：

```
 done=(int)strlen(gets(grade_list[i].name));//Storing in a unallocated memory using an uninitialized pointer. BAD! 
```

除了在您的代码中，我看不到您增加/减少/更改 的值，所以基本上每次循环执行`i`时您都会覆盖。`grade_list[0].name`那也很糟糕。内存泄漏太多！！

它是一个没有中断条件的无限循环！

尝试这样的事情：

```
char buffer[MAX_LENGTH_OF_A_STRING];
memset(buffer,0x00,MAX_LENGTH_OF_A_STRING);
do{
        puts("not weee\n");
        done=strlen(gets(buffer));//This is enough
        grade_list[i].name=malloc(strlen(buffer)+1);
        strncpy(grade_list[i].name,buffer,strlen(buffer)+1);
        memset(buffer,0x00,MAX_LENGTH_OF_A_STRING);
        i++;//You were not doing this
        puts("weee\n");
        //Put some condition to break this infinite loop, somewhere within the loop
}while(1); 
```

# c - 为什么 gcc 抱怨一个库已经存在时找不到？

> ID：13927467
> 
> 赞同：0
> 
> 时间：2012-12-18T06:25:45.250
> 
> 标签：c, linux, linker, centos, shared-libraries

消息如下：

```
$:~/software/version_1.02/example$ gcc -Wall -Wextra example.c -I../include -L../lib -lnnmf -larpack -llapack \
-lblas -o main
In file included from example.c:47:
../include/nmfdriver.h:92:7: warning: no newline at end of file
example.c:53: warning: unused parameter ‘argc’
example.c:53: warning: unused parameter ‘argv’
/usr/bin/ld: cannot find -larpack
collect2: ld returned 1 exit status
$:~/software/version_1.02/example$ ls /usr/lib/*arpack*
/usr/lib/libarpack.so.2  /usr/lib/libarpack.so.2.0.0 
```

由（包管理器）`arpack`安装。`yum`我想知道为什么找不到。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T06:28:39.490

它可能正在寻找没有版本后缀的库。
尝试创建一个没有版本后缀的链接到一个版本化的链接：

```
sudo ln -s /usr/lib/arpack.so.2 /usr/lib/arpack.so 
```

# objective-c - FBRequest 不能在 NSOperation 中工作

> ID：13927472
> 
> 赞同：1
> 
> 时间：2012-12-18T06:26:26.763
> 
> 标签：objective-c, facebook, block, nsoperation

为什么行：`NSLog(@"request complete");`不起作用？块内的代码仅在`FBRequest`完成时调用。我认为与此同时，我的操作将从中删除，`NSOperationQueue`并且不会调用该块。

测试.h

```
#import <Foundation/Foundation.h>
@interface test: NSOperation;
@end 
```

测试.m

```
#import "test.h"
@implementation test

- (void)start {
    [self willChangeValueForKey:@"isExecuting"];
    _isExecuting = YES;
    [self didChangeValueForKey:@"isExecuting"];

    [self loadFBRequest];
}

- (BOOL)isConcurrent {
    return YES;
}

- (void)finish {
    [self willChangeValueForKey:@"isExecuting"];
    [self willChangeValueForKey:@"isFinished"];

    _isExecuting = NO;
    _isFinished = YES;

    [self didChangeValueForKey:@"isExecuting"];
    [self didChangeValueForKey:@"isFinished"];
}

- (void)loadFBRequest {
    FBRequestConnection *conn = [[FBRequestConnection alloc] init];

    // Example: Get my info
    FBRequest *request = [FBRequest requestForGraphPath:@"/me?fields=id,name"];
    [conn addRequest:request completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        if (!error) {
            NSLog(@"result=%@", result);
        }
        NSLog(@"request complete"); // Don't work!
        [self finish];
    }];
    [conn start];
}

@end 
```

# r - 如何在箱线图中绘制与水平线平行的条形图到箱线图的面积分数？

> ID：13927473
> 
> 赞同：3
> 
> 时间：2012-12-18T06:26:26.903
> 
> 标签：r, plot, boxplot, stackedbarseries

我正在处理数据表示，我需要并行绘制带有堆叠条形图的箱线图。

![在此处输入图像描述](../Images/f41c0d69eb081df40a91a7ec16b7b68e.png)

用不同深浅的颜色按点覆盖面积的比例着色。我该如何绘制它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:11:58.383

这是一个通用解决方案，可用于将平行百分比框添加到格子弓形图中。它计算箱线图描述部分（晶须和主要部分）的确切百分比。

该解决方案基于网格包。lattice 的视口操作比 ggplot2 更容易，这就是我选择 bwplot 的原因。

我生成了一些示例数据：

```
df <- data.frame(cond = factor( rep(c("A"), each=200) ), 
                 rating = c(rnorm(200),rnorm(200, mean=.8)))

library(lattice)
bwplot(cond ~ rating, data=df,gp=gpar(fill='blue'),
       par.settings = list( box.umbrella=list(col= c( "red")), 
                            box.dot=list(col= c("green")), 
                            box.rectangle = list(fill= c( "blue"),alpha=0.6))) 
```

我抓住了主视口

```
downViewport("plot_01.panel.1.1.vp") 
```

然后我存储胡须的尺寸和四肢箱线图位置的位置。

```
segs <- grid.get('segments',grep=T)
cap.segs <- grid.get('cap.segments',grep=T) 
```

函数 drawBox ，用百分比的文本绘制一个矩形。我为每个盒子调用了 3 次。

```
drawbox <- function(x0 = segs$x0[1] , col ='red',
                    width.vp = segs$x0[2] - segs$x0[1]){
  vpd <- viewport(
            x = x0 ,
            y = cap.segs$y1[2] + unit(0.5,'native'),
            width  = width.vp,
            height = unit(2,'cm'),
            just   = c('left','bottom'),
            name   = 'vpd')
  pushViewport(vpd)
    grid.rect(gp=(gpar(fill=col)))
    # The compute of percent is a little bit tricky due we can't apply '/'
    value <- as.numeric(convertUnit(width.vp,'native'))
    value <- value/as.numeric(convertUnit(cap.segs$x0[2]- cap.segs$x0[1],'native'))
    grid.text(label = paste(round(value*100),'%',sep='') , gp= gpar(cex=3))
  upViewport(1)
} 
```

函数drawbox被调用了3次：

```
drawbox()
drawbox(col='yellow',width=segs$x0[1] - cap.segs$x0[1], x0= cap.segs$x0[1])
drawbox(col='green',width.vp= cap.segs$x0[2]- segs$x0[2],x0 = segs$x0[2]) 
```

![在此处输入图像描述](../Images/01598e44daef86aba116dfb224f1e514.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T06:44:11.697

一种可能性是结合`boxplot()`和`rect()`功能。坐标`rect()`被计算为您感兴趣的分位数。在这个例子中，我使用了分位数 25% 和 60%（25% 和 35% 的总和）。`text()`用于设置名称的函数。

```
 set.seed(123)
  x<-rnorm(100)
  boxplot(x,horizontal=TRUE,axes=FALSE)
  rect(min(x),1.5,quantile(x,0.25),1.4,col="red")
  rect(quantile(x,0.25),1.5,quantile(x,0.60),1.4,col="green")
  rect(quantile(x,0.60),1.4,max(x),1.5,col="yellow")
  text(-1.5,1.45,"25%")
  text(0,1.45,"35%")
  text(1.1,1.45,"40%") 
```

![在此处输入图像描述](../Images/accc08508e9ed33b9052924a514c6a6a.png)

# windows - windows - 如何枚举所有连接的 USB 设备的设备路径？

> ID：13927475
> 
> 赞同：18
> 
> 时间：2012-12-18T06:26:36.437
> 
> 标签：windows, winapi, visual-c++, usb

我正在尝试使用 SetupDi 函数枚举所有连接的 USB 设备的设备路径。设备路径是 CreateFile() 中使用的路径，因此我可以与设备通信。

但是，[SetupDiGetDeviceInterface](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551015%28v=vs.85%29.aspx)需要接口 GUID，但我并不是专门寻找特定接口（所有连接的 USB 除外）。这部分已被注释为 /* ??? */ 在下面的源代码中。

**尝试的解决方案：**

我试图提供 GUID_DEVCLASS_UNKNOWN = {0x4d36e97e, 0xe325, 0x11ce, {0xbf, 0xc1, 0x08, 0x00, 0x2b, 0xe1, 0x03, 0x18}}; 但这引发了“不再有接口”错误。

我也尝试将 deviceInfoData.ClassGuid 提供给 SetupDiGetDeviceInterface 但我得到与上面相同的错误，“没有更多的接口”。

**问题：**

是否有涵盖所有 USB 设备的通用接口类？（HID、通用等）

或者是否有替代功能可以为我提供设备路径？（由 SetupDiGetDeviceInterfaceDetail 返回的 SP_DEVICE_INTERFACE_DETAIL_DATA 结构的插入）。

**资源：**

```
HDEVINFO deviceInfoList
SP_DEVINFO_DATA deviceInfoData;
deviceInfoData.cbSize = sizeof(SP_DEVINFO_DATA);
SP_DEVICE_INTERFACE_DATA deviceInterfaceData;
PSP_DEVICE_INTERFACE_DETAIL_DATA deviceInterfaceDetailData = NULL;
DWORD requiredLength = 0;
char *hardwareID = 0;

// Retrieve a list of all present devices
deviceInfoList = SetupDiGetClassDevs(NULL, NULL, NULL, DIGCF_PRESENT | DIGCF_DEVICEINTERFACE | DIGCF_ALLCLASSES);

if (deviceInfoList == INVALID_HANDLE_VALUE) {
    SetupDiDestroyDeviceInfoList(deviceInfoList);
    return false;
}

// Iterate over the list
for (DWORD i = 0; SetupDiEnumDeviceInfo(deviceInfoList, i, &deviceInfoData); i++) {
    if (deviceInterfaceDetailData) LocalFree(deviceInterfaceDetailData);

    requiredLength = 0;

    SetupDiGetDeviceRegistryProperty(deviceInfoList, &deviceInfoData, SPDRP_HARDWAREID, &DataT, NULL, 0, &requiredLength);

    if (requiredLength <= 0) {
        SetupDiDestroyDeviceInfoList(deviceInfoList);
        return false;
    }

    hardwareID = new char[requiredLength]();

    SetupDiGetDeviceRegistryProperty(deviceInfoList, &deviceInfoData, SPDRP_HARDWAREID, &DataT, (PBYTE)hardwareID, requiredLength, NULL);

    // Parse hardwareID for vendor ID and product ID

    delete hardwareID;
    hardwareID = 0;

    deviceInterfaceData.cbSize = sizeof(SP_INTERFACE_DEVICE_DATA);

    // Requires an interface GUID, for which I have none to specify
    if (!SetupDiEnumDeviceInterfaces(deviceInfoList, &deviceInfoData, /* ??? */, 0, &deviceInterfaceData)) {
        SetupDiDestroyDeviceInfoList(deviceInfoList);
        return false;
    }

    if (!SetupDiGetDeviceInterfaceDetail(deviceInfoList, &deviceInterfaceData, NULL, 0, &requiredLength, NULL)) {
        if (GetLastError() == ERROR_INSUFFICIENT_BUFFER && requiredLength > 0) {
            deviceInterfaceDetailData = (PSP_DEVICE_INTERFACE_DETAIL_DATA)LocalAlloc(LPTR, requiredLength);

            if (!deviceInterfaceDetailData) {
                SetupDiDestroyDeviceInfoList(deviceInfoList);
                return false;
            }
        } else {
            SetupDiDestroyDeviceInfoList(deviceInfoList);
            return false;
        }
    }

    deviceInterfaceDetailData->cbSize = sizeof(SP_DEVICE_INTERFACE_DETAIL_DATA);

    if (!SetupDiGetDeviceInterfaceDetail(deviceInfoList, &deviceInterfaceData, deviceInterfaceDetailData, requiredLength, NULL, &deviceInfoData)) {
        SetupDiDestroyDeviceInfoList(deviceInfoList);
        return false;
    }

    SetupDiDestroyDeviceInfoList(deviceInfoList);

    // deviceInterfaceDetailData->DevicePath yields the device path
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-18T07:10:45.570

[MSDN](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545972%28v=vs.85%29.aspx)说有一个以`GUID_DEVINTERFACE_USB_DEVICE`GUID命名的通用 USB 设备接口类`{A5DCBF10-6530-11D2-901F-00C04FB951ED}`：

> 系统提供的 USB 集线器驱动程序注册 GUID_DEVINTERFACE_USB_DEVICE 的实例，以通知系统和应用程序存在连接到 USB 集线器的 USB 设备。

[这是一个代码示例](http://www.velleman.eu/images/tmp/usbfind.c)，它似乎可以使用 DEVINTERFACE_USB_DEVICE GUID 执行您想要执行的操作。

# c# - 在 C# 中将 SQLite 数据库作为文件读取

> ID：13927476
> 
> 赞同：2
> 
> 时间：2012-12-18T06:26:40.937
> 
> 标签：c#, android, sqlite, filestream, outputstream

关于如何读取来自我的 NexusOne 的 SQLite 数据库并使用 C#.Net 将其读取到我的 PC 上，我的头脑中有些许皱纹。

在我的 android 应用程序的初始加载中，数据库将从 Asset 复制到`/data/data/com.example.myapp/databases`as `OutputStream`。这是代码。

```
 //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0) {
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close(); 
```

我创建了一个 C# 程序来读取 SQLite 数据库，但是在使用它初始化连接`System.Data.SQLite`时总是抛出一个错误“没有这样的表错误”。

当我在 中放置断点时`SQLiteConnection connection = new SQLiteConnection("Data Source=MyDB.db")`，`connection.DataBase`总是等于“ **main** ”。数据库名称应该是“MyDB”而不是“main”。似乎我的 sqlite 数据库文件无法读取可能是因为它是使用创建的，`Stream`或者可能是因为它不是数据库文件？因为当我检查文件类型时，它显示的是“文件”而不是“数据库文件”。

任何人都知道如何使用 C# 读取 sqlite 数据库文件。我想到的第一件事是使用`FileStream`和`StreamReader`/ `StreamWriter`。但我不知道如何开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:31:40.190

使用像[SQLite Admin](http://sqliteadmin.orbmu2k.de/)这样的工具来确定数据库中表的名称，或者即使它可以打开。然后，一旦您获得了这些信息，您应该能够使用 SQLiteConnection 对象打开数据库。

# java - 如何允许我的用户使用 Windows 凭据登录？

> ID：13927479
> 
> 赞同：-3
> 
> 时间：2012-12-18T06:26:44.993
> 
> 标签：java, authentication, windows-authentication

我正在创建一个（基于 Java 的）Web 应用程序。如何允许我的用户使用 Windows 凭据登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:29:02.570

首先找出windows登录使用什么样的身份验证，如LDAP服务器等。
接下来获取有关此身份验证服务器的信息。
接下来在您的网络服务器中配置这种身份验证服务。

# ios - RestKit 0.2，多种方式发出 GET、POST、PUT 请求

> ID：13927480
> 
> 赞同：11
> 
> 时间：2012-12-18T06:26:51.303
> 
> 标签：ios, restkit, restkit-0.20

我对使用 restkit 的方式有点困惑，似乎有多种方法可以做同样的事情，在我满足于搞砸它直到它起作用之前，但现在他已经改变了 0.20 中的框架和用法.x，我花了很多时间来转换我的代码，现在花更多的时间试图让它像以前一样工作。而且我已经搜索了一些例子，以及人们声称为他们工作的例子，不要为我做太多，所以在某个地方一定有区别，所以也许有人可以在尝试时告诉我下面的区别至少获取此数据，例如 1 和 2（失败，但这是关于 restkit github 的问题）

```
response.body={
"player": [
 {
  "_id": "50585c86ded998e77a000002"
 }
]
} 
```

1.

```
[[RKObjectManager sharedManager].router.routeSet addRoute:[RKRoute routeWithClass:[Player class] pathPattern:@"player/fbid/:fID" method:RKRequestMethodGET]]; 
```

为了让你的播放器，像这样：

```
Player *player = [Player new];
player.playerID = 2;
[[RKObjectManager sharedManager] getObject:player path:nil parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *result) 
{
// Request 
} failure:nil]; 
```

2.

像这样使用响应描述符。

```
RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor  responseDescriptorWithMapping:playerWtfMappingIn pathPattern:nil keyPath:@"player" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

[[RKObjectManager sharedManager] addResponseDescriptor:responseDescriptor];

[tempPlayer setFbID:[result objectForKey:@"id"]];

[objectManager getObject:tempPlayer path:nil parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult)
{

}
failure:nil]; 
```

3.

或者实际上是在 RestKit wiki 上拥有自己的示例

```
RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:articleMapping pathPattern:nil keyPath:@"articles" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

NSURL URL = [NSURL URLWithString:@"http://restkit.org/articles"];
NSURLRequest *request = [NSURLRequest requestWithURL:URL];
RKObjectRequestOperation *objectRequestOperation = [[RKObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[ responseDescriptor ]];
[objectRequestOperation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    RKLogInfo(@"Load collection of Articles: %@", objects);
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    RKLogError(@"Operation failed with error: %@", error);
}];

[objectRequestOperation start]; 
```

而且我相信还有很多其他方法，我怀疑是否有人可以确认您应该设置路径的方式以及您是否使用一种方法而不是另一种方法，这取决于您尝试映射的数据集及其格式. 然后，其中一些看起来也像是做同样事情的不同方式？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T04:31:53.837

两种方式都是正确的。事实上，第一个更好，因为它将所有配置集中在 RKObjectManager 中。对于基于 RestKit 的项目，我强烈建议您使用 ObjectManager 方式 :)

你甚至可以更进一步，开始使用路由来保持你的代码更干净，请参阅关于该部分的 wiki :)

希望能帮助到你

# css - 相对位置内的绝对位置问题

> ID：13927483
> 
> 赞同：2
> 
> 时间：2012-12-18T06:26:58.777
> 
> 标签：css

我在尝试在相对定位元素中创建灵活的绝对定位元素时遇到问题。这是代码：

[http://jsfiddle.net/cxHNN/](http://jsfiddle.net/cxHNN/)

当`.content`div 内的`.active`div 具有最大的高度值时，上面的代码可以正常工作。（`inner-3`在这种情况下）

但是，如果`.active`该类设置在任何其他`inner`元素上（文本较少），则最大元素 ( `inner-3`) 的内容会溢出（[请参见此处的示例](http://jsfiddle.net/cxHNN/1/)）。

我可以使用 JavaScript 解决这个问题，但我想要一个纯 css 解决方案来解决这个问题，这样所有`inner`元素都具有相同的高度而不给出固定高度，以便它们的高度随着容器宽度的变化而动态变化（在响应式布局）。

**注意：** 不要介意基于像素的边距/宽度。我不得不稍微调整一下 css 以使其工作 jsFiddle。在我的原始样式表中，它们都以 % 或 em 表示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:48:23.303

尝试隐藏所有`.inner`div，只显示活动 div？

```
.inner .content {
    background: none repeat scroll 0 0 #CCCCCC;
    margin-top: -4em;
    padding: 0.5em;
    display: none;}
.inner.active .content{
    display: block;
    } 
```

**更新：**如果您需要内部 div 的大小相同，则不能绝对定位它们，或者浮动它们，或者显示它们隐藏或内联。所以，我做了以下事情：

*   flex 容器是相对定位的，并且给定了足够的内边距，使其内部的元素可以定位在左上角，并正确定位。我还将字体大小设置为 0 并防止换行。
*   内部 div 显示为 inline-block，宽度为 0
*   活动内部块的宽度为 100%，因此它是唯一显示的块
*   H1 绝对定位，并放置在您想要的位置

[http://jsfiddle.net/cxHNN/4/](http://jsfiddle.net/cxHNN/4/)

您将需要使用填充和间距等东西。哦，我只在 FireFox 上测试过——其他浏览器可能有问题。

# ios - 如果应用程序意外崩溃，请释放我的 iOS 应用程序使用的所有内存？

> ID：13927490
> 
> 赞同：0
> 
> 时间：2012-12-18T06:27:33.347
> 
> 标签：ios, memory-management, crash

我是 iPhone 应用程序开发的初学者。很抱歉提出愚蠢的问题。

考虑一个案例，如果我的应用程序在没有任何警告的情况下崩溃，那么我的应用程序分配的所有内存都将被 iOS 自动释放，还是保持原样？

如果不是由 iOS 发布，那么我可以如何以及在哪里发布它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:37:47.670

如果您的应用程序崩溃，您将无能为力。当应用程序崩溃时，系统将销毁特定应用程序分配的内存。当应用程序再次启动时，没有分配内存，您的应用程序将重新启动。

您应该正确管理应用程序中的内存，请参阅：[this](https://stackoverflow.com/questions/8186056/how-free-memory-imediately-in-ios)或[Apple Doc](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/)

或者您可以尝试[ARC](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)，请参阅本[教程](http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:38:59.753

是的，任何体面的操作系统都会释放所有内存并释放许多其他资源，例如程序终止时程序使用的文件句柄。程序如何终止并不重要。需要注意的一件重要事情是操作系统在不释放/销毁对象的情况下回收内存。因此，当操作系统在程序终止时回收内存时，不会调用通常在对象被干净释放时自动运行的任何代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:30:29.973

您将不得不在 dealloc 方法中释放您的全局（在 .h 文件中标记）对象，即

```
-(void)dealloc
{
   //release here
} 
```

您可以在使用后释放您的私有或实例对象。

快乐编码！！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T06:41:06.833

我更喜欢开始在 ARC（自动引用计数）中工作，它也适用于 iOS4 和 iOS5

# codeigniter - codeigniter-Model group by 2 模型结果

> ID：13927492
> 
> 赞同：0
> 
> 时间：2012-12-18T06:27:49.997
> 
> 标签：codeigniter

我有两个不同的模型函数 event_person1 和 event_person5，我需要按两个带有 event_id 的模型的结果进行分组，模型在这里

```
public function event_person1($user_id){
$details1 ="select * from event where created_by={$user_id} order by created_date   desc";
$details = $this->db->query($details1);     
$res = $details->result_array();
return $res;
}

public function event_person5($employee_id,$user_id) {
$query="select distinct(event_id) from event_booth where booth_owner='{$employee_id}'";
$sql=$this->db->query($query);
$res=$sql->result_array();
$arr=array();
foreach($res as $r)
{ 
$data['id']=$r['event_id'];
$query1="select * from event where (event_id={$data['id']} and created_by!=      {$user_id})";
$sql1=$this->db->query($query1);
$res1=$sql1->result_array();
if(!empty($res1))
{
$arr[] = $res1;
}
unset($res1);
}
return $arr;
} 
```

# css - Rails - Internet Explorer 中未加载 CSS

> ID：13927500
> 
> 赞同：5
> 
> 时间：2012-12-18T06:29:00.137
> 
> 标签：css, ruby-on-rails, internet-explorer, stylesheet

几周来我一直在努力解决这个问题，但我还没有找到解决方案。我的[网页](http://sharehomme.com)在 Chrome 和 Firefox 上运行良好，但不是在所有版本的 Internet Explorer 上。显然，有很多问题都在抱怨同一个问题，但在尝试了所有已知的解决方案后，我仍然没有解决我的问题。这里有一些信息给你。

1.  网页（应用程序）基于 Ruby on Rails。
2.  我的 css 文件足够少；他们不超过“31限制”
3.  在页面顶部，我定义`<!DOCTYPE HTML>`
4.  通过 W3C 验证

样式表，*posts.css.scss*包含..

```
body {
    background-color: #000000;
    color: #FFF;
} 
```

当有人通过互联网浏览器查看网页时，即使是这种简单的样式也不会应用。

我一直在使用 Firebug 和 Chrome 调试工具来寻找问题的根源，但还没有成功。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T04:08:55.293

您确实超过了 IE 的每个文件限制 4096 个选择器。根据[CSS: Selector Counter](http://snippet.bevey.com/css/selectorCount.php) ，您位于 5775 处。似乎其他人已使用此解决方案来解决 4096 选择器限制：[ChristianPeters CSS Split tool for IE 4096 Limit](https://gist.github.com/2398394#file_lib_css_splitter.rb)。

另一个看起来更正式和有文档的工具： [CSSSplitter](https://github.com/zweilove/css_splitter)

让我知道其中一个是否可以完成这项工作。

# azure-sql-database - 将 EF5 数据迁移到 SQL Azure DB 后查询失败并出现“无效列”错误

> ID：13927508
> 
> 赞同：1
> 
> 时间：2012-12-18T06:29:35.253
> 
> 标签：azure-sql-database, entity-framework-5, entity-framework-migrations

我修改了用户类并在 Visual Studio 2012 的包管理器控制台中创建了数据迁移。数据迁移包括以下脚本：

```
 CreateTable(
            "dbo.Users",
            c => new
                {
                    Id = c.Int(nullable: false, identity: true),
                    Username = c.String(nullable: false),
                    Comment = c.String(),
                    EmailAddress = c.String(maxLength: 64),
                    Identifier = c.String(),
                    IsApproved = c.Boolean(nullable: false),
                    PasswordFailuresSinceLastSuccess = c.Int(nullable: false),
                    LastPasswordFailureDate = c.DateTime(),
                    LastActivityDate = c.DateTime(),
                    LastLockoutDate = c.DateTime(),
                    LastLoginDate = c.DateTime(),
                    ConfirmationToken = c.String(),
                    CreateDate = c.DateTime(),
                    IsLockedOut = c.Boolean(nullable: false),
                    LastPasswordChangedDate = c.DateTime(),
                    PasswordVerificationToken = c.String(),
                    PasswordVerificationTokenExpirationDate = c.DateTime(),
                    PersonId = c.Int(nullable: false),
                    OwnerId = c.Int(nullable: false),
                    EffectiveDate = c.DateTime(nullable: false),
                    ExpirationDate = c.DateTime(),
                    CreationDate = c.DateTime(nullable: false),
                    UpdatedDate = c.DateTime(nullable: false),
                    Creator = c.String(nullable: false),
                    Updater = c.String(nullable: false),
                    AlertConfiguration_Id = c.Int(),
                })
            .PrimaryKey(t => t.Id)
            .ForeignKey("dbo.People", t => t.PersonId, cascadeDelete: false)
            .ForeignKey("dbo.AlertConfigurations", t => t.AlertConfiguration_Id)
            .Index(t => t.PersonId)
            .Index(t => t.AlertConfiguration_Id); 
```

运行迁移后，在数据库中成功创建了 User 表，并显示了所有列。但是，对数据库的后续查询会生成以下错误：

```
Exception Details: System.Data.SqlClient.SqlException: Invalid column name 'OwnerId'.
Invalid column name 'EffectiveDate'.
Invalid column name 'ExpirationDate'.
Invalid column name 'CreationDate'.
Invalid column name 'UpdatedDate'.
Invalid column name 'Creator'.
Invalid column name 'Updater'. 
```

用户类继承自 AuditableClass，其定义如下：

```
public abstract class AuditableClass
    {
        public AuditableClass()
        {
            this.CreationDate = System.DateTime.Now;
        }

        [ScaffoldColumn(false)]
        public int Id { get; set; }

        [Required(ErrorMessage = "An owner ID is required")]
        [ScaffoldColumn(false)]
        public int OwnerId { get; set; }

        [DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)]
        [Display(Name = "Effective Date")]
        [Required(ErrorMessage = "An effective date is required")]
        [DataType(DataType.Date)]
        public DateTime? EffectiveDate { get; set; }

        [DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)]
        [Display(Name = "Expiration Date")]
        [DataType(DataType.Date)]
        public DateTime? ExpirationDate { get; set; }

        [DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)]
        [Required(ErrorMessage = "An creation date is required")]
        [ScaffoldColumn(false)]
        public DateTime? CreationDate { get; set; }

        [DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)]
        [Required(ErrorMessage = "A last update date is required")]
        [ScaffoldColumn(false)]
        public DateTime? UpdatedDate { get; set; }

        [Required(ErrorMessage = "An creator is required")]
        [ScaffoldColumn(false)]
        public string Creator { get; set; }

        [Required(ErrorMessage = "A last updater is required")]
        [ScaffoldColumn(false)]
        public string Updater { get; set; }
    } 
```

这是用户类：

```
public class User : AuditableClass
    {
        [Required]
        public virtual String Username { get; set; }

        [DataType(DataType.MultilineText)]
        public virtual String Comment { get; set; }

        [Display(Name = "Email Address")]
        [StringLength(64)]
        public string EmailAddress { get; set; }

        public string Identifier { get; set; }
        public Boolean IsApproved { get; set; }
        public int PasswordFailuresSinceLastSuccess { get; set; }
        public DateTime? LastPasswordFailureDate { get; set; }
        public DateTime? LastActivityDate { get; set; }
        public DateTime? LastLockoutDate { get; set; }
        public DateTime? LastLoginDate { get; set; }
        public String ConfirmationToken { get; set; }
        public DateTime? CreateDate { get; set; }
        public Boolean IsLockedOut { get; set; }
        public DateTime? LastPasswordChangedDate { get; set; }
        public String PasswordVerificationToken { get; set; }
        public DateTime? PasswordVerificationTokenExpirationDate { get; set; }
        public virtual List<Role> Roles { get; set; }
        public virtual List<myApp.Models.Parties.Org> AuthorizedOrgs { get; set; }
        public virtual List<myApp.Models.Security.Permission> Permissions { get; set; }

        public int PersonId { get; set; }
        public virtual Person Person { get; set; }
} 
```

System.Data.SqlClient.SqlException 的主题列都继承自 AuditableClass。

如何让实体框架识别继承的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:19:17.470

发现问题了，原来是User对象包含了一个Roles集合，这个集合是在运行时实例化用户的时候动态加载的。与 Role 类对应的 Roles 表最初也是安全模式的一部分，并在移动 Users 表的同时被移动到事务模式中。Roles 表是使用包管理器控制台的自动数据迁移功能创建的。此功能已创建表，但错过了继承的列（角色也继承自 AuditableClass）。

创建数据迁移，然后输入代码手动创建自动迁移遗漏的列解决了这个问题。

这是解决问题的迁移代码：

```
 public partial class UpdateRoles : DbMigration
{
    public override void Up()
    {
        AddColumn("dbo.Roles", "OwnerId", c => c.Int(nullable: false));
        AddColumn("dbo.Roles", "EffectiveDate", c => c.DateTime(nullable: false));
        AddColumn("dbo.Roles", "ExpirationDate", c => c.DateTime());
        AddColumn("dbo.Roles", "CreationDate", c => c.DateTime(nullable: false));
        AddColumn("dbo.Roles", "UpdatedDate", c => c.DateTime(nullable: false));
        AddColumn("dbo.Roles", "Creator", c => c.String(nullable: false, defaultValue: "myusername"));
        AddColumn("dbo.Roles", "Updater", c => c.String(nullable: false, defaultValue: "myusername"));
    }

    public override void Down()
    {
    }
} 
```

# javascript - 无法推送到 JavaScript 数组

> ID：13927512
> 
> 赞同：0
> 
> 时间：2012-12-18T06:29:54.123
> 
> 标签：javascript, d3.js

我正在使用 D3.js。原始源设置对象中的`source`和`target`数组`links`。

我正在尝试再添加一个包含百分比的数组。我遵循的技术对于源和目标是相同的。

但是，JavaScript 控制台会引发错误 -`Uncaught TypeError: Cannot read property 'percentages' of undefined`

在下面的代码中，我突出显示了为百分比添加的语句。

```
 function computeNodeLinks() {
    nodes.forEach(function(node) {
      node.sourceLinks = [];
      node.targetLinks = [];
      node.percentages = [];    //**** Added this
    });
    links.forEach(function(link) {
      var source = link.source,
          target = link.target,
          pc = link.pc;    //**** Added this
      if (typeof source === "number") source = link.source = nodes[link.source];
      if (typeof target === "number") target = link.target = nodes[link.target];
      if (typeof pc === "number") pc = link.pc = nodes[link.pc];    //**** Added this
      source.sourceLinks.push(link);
      target.targetLinks.push(link);
      pc.percentages.push(link);    //**** Added this. At this statement I get: 'Uncaught TypeError: Cannot read property 'percentages' of undefined'
    });
  } 
```

任何指针？

# gmail - 通过gmail api将某些消息标记为已读（使用Oauth）

> ID：13927515
> 
> 赞同：0
> 
> 时间：2012-12-18T06:29:57.477
> 
> 标签：gmail

无论如何，我们可以使用 Oauth 2.0 通过 GMAIL API 将某些消息标记或标记为已读，就像我们可以通过 Gmail API 读取提要一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T03:59:53.890

我找不到通过 GMAIL API 将状态 READ 设置为消息的方法。所以我使用 IMAP 使用 Oauth 访问令牌进行身份验证，并使用 IMAP 来获得我想要的功能。

# arrays - 在 AS3 的点数组中查找最高/最低 y 值

> ID：13927516
> 
> 赞同：1
> 
> 时间：2012-12-18T06:30:03.667
> 
> 标签：arrays, actionscript-3, search, coordinates, point

如果我在 AS3 中有这样的点数组：

```
(x=584.1, y=279.4),(x=584.1, y=280.4),(x=584.1, y=281.4),(x=584.1, y=282.4),(x=584.1, y=283.4),(x=584.1, y=284.4),(x=584.1, y=285.4),(x=584.1, y=286.4),(x=584.1, y=287.4),(x=585.1, y=287.45),(x=586.1, y=287.45),(x=584.1, y=288.4),(x=585.1, y=288.45),(x=586.1, y=288.45),(x=587.1, y=288.5),(x=588.1, y=288.55),(x=584.1, y=289.4),(x=585.1, y=289.45),(x=586.1, y=289.45),(x=587.1, y=289.5),(x=588.1, y=289.55),(x=584.1, y=290.4),(x=585.1, y=290.45),(x=586.1, y=290.45),(x=587.1, y=290.5),(x=588.1, y=290.55),(x=584.1, y=291.4),(x=585.1, y=291.45),(x=586.1, y=291.45),(x=587.1, y=291.5),(x=588.1, y=291.55),(x=584.1, y=292.4),(x=585.1, y=292.45),(x=586.1, y=292.45),(x=587.1, y=292.5),(x=588.1, y=292.55),(x=584.1, y=293.4),(x=585.1, y=293.45),(x=586.1, y=293.45),(x=587.1, y=293.5),(x=588.1, y=293.55),(x=584.1, y=294.4),(x=585.1, y=294.45),(x=586.1, y=294.45),(x=587.1, y=294.5),(x=588.1, y=294.55),(x=584.1, y=295.4),(x=585.1, y=295.45),(x=586.1, y=295.45),(x=587.1, y=295.5),(x=588.1, y=295.55) 
```

找到最高和最低 y 值的有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:32:10.210

如果您只对 n > 2 的任何随机输入数据的最高和最低感兴趣，我很确定这是最快的。

```
var input:Array = [ {x:584.1, y:279.4}, {x:584.1, y:280.4}, {x:584.1, y:281.4}, ...];

public function MinMaxValues() {
    var len:Number = input.length;
    var min:Number = Number.MAX_VALUE;
    var max:Number = Number.MIN_VALUE;

    var check:Number;
    for (var i:int = 0; i < len; i++) {
        check = input[i]["y"];

        if (check < min) {
            min = check;
        } 

        if (check > max) {
            max = check;
        }
    }
    trace("minimum value of [" + len + "] items is::" + min);
    trace("maximum value of [" + len + "] items is::" + max); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:43:37.293

[编辑] 有时 Array.sortOn 是最快的。如果你的数组需要排序，就使用native函数，否则，使用大牛的代码。

```
myArray.sortOn('y', Array.NUMERIC); 
```

我用排序和丹尼尔的代码进行了基准测试。在某些情况下，sortOn/copy 比无数组副本更快。在某些情况下不是。无论哪种方式，数组复制/排序都会给出不一致的结果，因为它会消耗更多的内存。结果和基准如下。

（在调试播放器中array.sortOn总是会输）

```
package {

    import flash.display.*;
    import flash.geom.*;
    import flash.text.*;
    import flash.utils.*;

    final public class ArraySortTest extends Sprite {

        /**
         *  @private
         */
        private const arr:Array         = [];

        private const text:TextField    = new TextField();

        public function ArraySortTest():void {

            text.width          = stage.stageWidth;
            text.height         = stage.stageHeight;
            addChild(text);

            var length:int      = 1000;
            var iterations:int  = 5000;
            while (length--) {
                arr.push(new Point(Math.random() * 500, Math.random() * 500));
            }

            var i:int, start:int, result:Point = new Point();

            start   = getTimer();
            i       = iterations;

            while (i--) {
                getMinMax(arr, 'y', result);
            }

            text.appendText('nosort: ' + String(getTimer() - start) + result + '\n');

            start   = getTimer();
            i       = iterations;
            while (i--) {
                getMinMaxSorted(arr, 'y', result);
            }
            text.appendText('sorted: ' + String(getTimer() - start) + result + '\n');

            start   = getTimer();
            i       = iterations;
            while (i--) {
                getMinMaxSortedConcat(arr, 'y', result);
            }
            text.appendText('sorted concat: ' + String(getTimer() - start) + result + '\n');

        }

        private function getMinMaxSortedConcat(input:Array, key:String, result:Point):void {

            input.concat().sortOn('y', Array.NUMERIC);

            result.x = input[0][key];
            result.y = input[int(input.length - 1)][key];
        }

        private function getMinMaxSorted(input:Array, key:String, result:Point):void {

            input.sortOn('y', Array.NUMERIC);

            result.x = input[0][key];
            result.y = input[int(input.length - 1)][key];
        }

        private function getMinMax(input:Array, key:String, result:Point):void {

            var len:Number = input.length;
            var min:Number = Number.MAX_VALUE;
            var max:Number = Number.MIN_VALUE;

            var check:Number;
            for (var i:int = 0; i < len; i++) {
                check = input[i][key];

                if (check < min) {
                    min = check;
                } else if (check > max) {
                    max = check;
                }
            }

            result.x = min;
            result.y = max;
        }
    }
} 
```

结果：

```
100 elements, 5000 iterations each
nosort: 124(x=3.739513223990798, y=495.2090959995985)
sorted: 109(x=3.739513223990798, y=495.2090959995985)
sorted concat: 115(x=3.739513223990798, y=495.2090959995985)

1000 elements, 5000 iterations each
nosort: 1263(x=0.13151345774531364, y=499.65104297734797)
sorted: 1181(x=0.13151345774531364, y=499.65104297734797)
sorted concat: 1234(x=0.13151345774531364, y=499.65104297734797)

1000 elements, 10000 iterations
nosort: 2474(x=0.18377462401986122, y=499.73958847112954)
sorted: 2371(x=0.18377462401986122, y=499.73958847112954)
sorted concat: 2454(x=0.18377462401986122, y=499.73958847112954)

10000 elements, 1000 iterations
nosort: 2487(x=0.003137858584523201, y=499.816557392478)
sorted: 2961(x=0.003137858584523201, y=499.816557392478)
sorted concat: 3157(x=0.003137858584523201, y=499.816557392478) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:34:59.867

Just that, traverse the array, grab first point's Y value as current min and max, and compare all the others. I think there will be no better way, unless you will provide additional info on how is the data organized in that array.

# android - 通过 UI 线程更改 setText

> ID：13927517
> 
> 赞同：0
> 
> 时间：2012-12-18T06:30:10.793
> 
> 标签：android, android-layout, android-widget

在我的`onCreate()`方法中，我有以下代码

```
 protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu_item_layout);
            final TextView cumItemRating = (TextView) findViewById(R.id.CumItemRating);
            final String postText = "(No rating)";

    final Handler handler = new Handler();
    Thread t = new Thread(){
        public void run(){
            handler.post(new Runnable(){
                public void run(){
                    cumItemRating.setText(postText);
                }
            });
        }
    };

    t.start();
    addListenerOnRatingBar();
    } 
```

在该`addListenerOnRatingBar()`方法上，我希望能够在`cumItemRating.setText(postText)`每次运行此方法时更改并更新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:48:58.767

将您的 TextView 声明为类/实例变量，像现在一样在 onCreate 中对其进行初始化。可以从活动中的任何地方访问 TextView。您可以从那里调用 cumItemRating.setText(postText) 。

# jquery - 带有引导程序的 WordPress 中的模态框无法在同一链接上打开视频

> ID：13927519
> 
> 赞同：0
> 
> 时间：2012-12-18T06:30:23.887
> 
> 标签：jquery, wordpress, twitter-bootstrap

我正在开发带有引导主题的 WordPress。我正在使用模式框在我的页面上打开视频。我的问题是我想在同一个链接上打开两个不同的视频，这可能吗？意味着一旦我单击该链接，一个视频将出现，而在另一个单击时，另一个视频将出现在模态框上。

这是我的模态框代码：

```
<div id="myModal1" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-body">
<button type="button" class="close well" data-dismiss="modal">×</button><br />
    <iframe width="480" height="360" src="http://www.youtube.com/embed/tgOFI5xAKU0?rel=0" frameborder="0" allowfullscreen></iframe>
  </div>
</div>​ 
```

这是我点击的链接：

```
<li class="span3"><a data-target="#myModal1" data-toggle="modal" href=""><img src="my image url" alt="" /></a>
<div class="image_caption">Faculty Speak &gt;&gt;</div></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:28:27.853

我认为您将遇到的问题是模态如何知道要显示什么以及何时显示。我认为这种方法存在一些用户体验问题。下面是几个例子。

1.  如果用户第三次点击链接会发生什么？
2.  用户如何知道他们需要再次点击该链接？
3.  如果他们不小心关闭了模态会发生什么？他们可以回到他们正在观看的视频还是打开下一个视频？

您可以轻松添加打开第二个模式的第二个链接。只需复制您现有的模式并将其 id 更改为“myModal2”

# smf - 积分系统论坛

> ID：13927524
> 
> 赞同：-2
> 
> 时间：2012-12-18T06:30:52.217
> 
> 标签：smf

我如何设置一个带有积分系统的论坛，我的用户可以通过发布更多文章、观看相关视频和推荐其他人来获得更高的积分。我不在乎它是哪种表单系统；vbulleting、smf 或其他。我只是想知道是否可以这样做。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:51:17.690

是的你可以。很简单..你需要稍微改变一下你的php代码和mysql结构。

php 代码：在发布查询时，您需要为每个帖子/主题添加积分。例如

```
INSERT into posting (user_id,title,subject,points) values ('1','lorem ipsum','lorem ipsum','10'); 
```

mysql代码：

```
alter table posting add points varchar(20); 
```

php 代码（配置文件页面）：您还需要在配置文件页面中创建一个查询，以汇总所有用户点。

它适用于 vbulletin、phpbb 和 smf（我不知道在其他平台上）

# api - github api 获取master的SHA

> ID：13927530
> 
> 赞同：8
> 
> 时间：2012-12-18T06:31:23.323
> 
> 标签：api, github

我正在寻找 github repo 的当前 master 的 SHA。

如果我这样做： [https ://api.github.com/repos/ameyer/Arduino-L6470/git/trees/master](https://api.github.com/repos/ameyer/Arduino-L6470/git/trees/master)

返回的 SHA 是“主”。

我需要一种方法来检查 github 上的 master 版本是否比我在缓存应用程序中的版本新，我认为 SHA 将是最好的检查方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:40:13.893

尝试获取参考：

[https://api.github.com/repos/ameyer/Arduino-L6470/git/refs](https://api.github.com/repos/ameyer/Arduino-L6470/git/refs)

然后你可以：

[https://api.github.com/repos/ameyer/Arduino-L6470/git/trees/d0cad097e733c3d9b7051c6f047411c5e3494491](https://api.github.com/repos/ameyer/Arduino-L6470/git/trees/d0cad097e733c3d9b7051c6f047411c5e3494491)

请注意，第二个 URL 给出的结果与您尝试的 URL 基本相同，只是`master`ref 名称被替换为最新提交的实际 sha。

所以，基本上，只需获取 refs 并获取 master 的 sha。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-10T20:55:50.140

如果你不介意启动一个进程，你也可以使用“native” git api：

```
git ls-remote https://github.com/ameyer/Arduino-L6470 master 
```

这也适用于其他托管服务提供商和跨 http api 更改。

原始来源：[如何从远程 git 存储库获取最新提交的 SHA？](https://stackoverflow.com/a/1161926/6040478)

# sql - 在外键表上排序

> ID：13927532
> 
> 赞同：0
> 
> 时间：2012-12-18T06:31:25.053
> 
> 标签：sql, sql-server-2008

好的，我正在尽我所能把这个..

我有两个表`message`，并且`comments`关系正常，其中`messageId`外键在`comments`.

现在在某个屏幕上，我显示了当前按发布日期排序的所有消息。这是一个转折点：现在需要的是，虽然显示应该是相同的，只应该看到消息，但顺序应该根据消息上发布的最新评论。

例子：

*   消息 1 和消息 2
*   消息 1 发布日期 > 消息 2 发布日期
*   但是message2刚刚收到了评论。

在这种情况下，应该在列表顶部看到消息 2，然后是消息 1

注意：在显示中我没有拉评论，只显示消息按日期排序

我希望我说对了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:01:23.143

```
SELECT M.*, C.MostRecent
  FROM Message M
  JOIN (SELECT MessageID, MAX(Comment_DateTime) AS MostRecent
          FROM Comments
         GROUP BY MessageID
       ) AS C ON M.MessageID = C.MessageID
 ORDER BY C.MostRecent DESC 
```

这适用于小桌子。它汇总了 Comments 表，查找每条消息的最新评论，然后按时间戳的降序对消息进行排序。如果表格很大，它会变得很慢，特别是如果您只显示前几条消息。在这种情况下，您希望对查询设置限制，以便扫描的完整表要少得多。例如，您可能会猜到您只需要最后一小时、一天或一周的行，而不是所有时间的行。

即使使用 OLAP 函数表示法，您仍然需要担心是否可以将查询限制为有用的数据子集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:54:04.673

有人对此发表了评论，这是不可见的。这是个好建议。我设法提取消息的最大评论日期，然后在该日期之前订购。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:39:11.333

您可以使用 CTE（通用表表达式）和`ROW_NUMBER()`函数尝试这样的事情：

```
;WITH CTE AS
(
 SELECT
     m.MessageId, m.MessageText, m.PostedDate,
     CommentDate = ISNULL(c.CommentDate, '19000101'),
     RowNum = ROW_NUMBER() OVER (PARTITION BY m.MessageID 
                                 ORDER BY ISNULL(c.CommentDate, '19000101') DESC) 
 FROM dbo.Messages m
 LEFT OUTER JOIN dbo.Comments c ON c.MessageId = m.MessageId
)
SELECT
   MessageId, MessageText, PostedDate
FROM 
   CTE
WHERE
   RowNum = 1
ORDER BY
   CommentDate DESC 
```

此 CTE 按 对数据“分区” `MessageID`，然后按其对所有评论（如果有）进行编号`CommentDate`。因此，对于每个`MessageID`，您都应该获得连续`RowNum`的值 - 从 1 开始最近的评论。

从此 CTE（“临时”内嵌视图）中，您只需选择所有具有`RowNum = 1`最新评论日期的行。我也在选择`CommentDate`CTE 内部，因为我认为可能还没有评论，所以我使用该`ISNULL()`功能确保在没有评论存在的情况下提供虚构的评论日期。

# sql-server-2008 - 在asp中更改日期格式

> ID：13927537
> 
> 赞同：1
> 
> 时间：2012-12-18T06:31:42.363
> 
> 标签：sql-server-2008, asp-classic

在尝试了各种处理方法后，我无法在动态 sql 语句中正确获取日期格式。我需要一些有关日期格式的帮助。

我有一个发布日期字段，它以 yyyy-mm-dd 格式存储在 sql db 中。它在 asp 网页中显示为 mm-dd-yyyy ..我需要在 dd-mm-yyyy 中显示日期格式..有什么办法吗？

这是我的 sql 查询：

```
SELECT CR.Name AS country,C.Name,C.[Name 2],C.[E-Mail],[Pre-Assigned No_], [Posting Date], SIH.[Currency Code], SIH.[Shipment Method Code],[Total Boxes],[ARE Net Wt],[ARE Gr_Wt], SIH.[Shipping Agent Code], SIH.[Payment Terms Code] FROM [Sales Invoice Header] SIH 
INNER JOIN [Country_Region] CR ON CR.Code = SIH.[Country of Final Destination] 
INNER JOIN [Customer] C ON C.No_ = SIH.[Sell-to Customer No_] WHERE SIH.No_ = 'PEXP1213-540' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:54:04.757

无需替换直接使用**106** 或**105**即可得到想要的格式
`SELECT convert(varchar, getdate(), 106)`——dd mon yyyy

所以你的查询看起来像

```
select  CR.Name as country,C.Name,C.[Name 2],C.[E-Mail],[Pre-Assigned No_], 
convert(varchar,[Posting Date], 106) AS [Posting Date], SIH.[Currency Code], SIH.[Shipment Method Code],
[Total Boxes],[ARE Net Wt],[ARE Gr_Wt], SIH.[Shipping Agent Code], SIH.[Payment Terms Code] from [Sales Invoice Header] SIH 
inner join [Country_Region] CR On CR.Code = SIH.[Country of Final Destination] 
inner join [Customer] C on C.No_ = SIH.[Sell-to Customer No_] where SIH.No_ = 'PEXP1213-540' 
```

也可以在codeBehind上做：

```
DateTime time = DateTime.Now;             // Use current time
string format = "dd mm yyyy";            // Use this format
Console.WriteLine(time.ToString(format)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:36:45.893

请尝试使用此查询

```
select  CR.Name as country,C.Name,C.[Name 2],C.[E-Mail],[Pre-Assigned No_], 
replace(convert(varchar(12),[Posting Date], 103), '/','-') AS [Posting Date], SIH.[Currency Code], SIH.[Shipment Method Code],
[Total Boxes],[ARE Net Wt],[ARE Gr_Wt], SIH.[Shipping Agent Code], SIH.[Payment Terms Code] from [Sales Invoice Header] SIH 
inner join [Country_Region] CR On CR.Code = SIH.[Country of Final Destination] 
inner join [Customer] C on C.No_ = SIH.[Sell-to Customer No_] where SIH.No_ = 'PEXP1213-540' 
```

**注意：这里的 [Posting Date] 列是字符串，所以只需要显示。**

# jquery - jQuery Validation - 单击提交按钮时会多次显示相同的消息

> ID：13927538
> 
> 赞同：-1
> 
> 时间：2012-12-18T06:32:04.820
> 
> 标签：jquery, jquery-validate

我已经在我的网站上实现了 jQuery Validation 插件。当我在未填写必填文本框的情况下单击提交按钮时，必填字段消息会显示多次。

就像我点击提交按钮三次，然后消息显示三次。它应该只显示一次。

**代码**

```
$(document).ready(function()
{
$("#frm").validate(
  {
    rules : {
      cat_name : {
        required: true
      },
      cat_description : {
        required : true
      }
    },
    messages : {
      cat_name : {
        required:"<br />Please enter category name"
      },
      cat_description : {
        required:"<br /> Please enter category description"
      }
    }
  });

}); 
```

**HTML**

```
<table width="99%" cellspacing="6" cellpadding="3" border="0" align="right">
    <form method="post" action="save_livefeed_categories.php" class="cmxform" id="frm" name="frm">
        <tbody>
            <tr>
                <td><div align="center" class="venueError" id="venueError"></div></td>
            </tr>
                <input type="hidden" value="0" id="update" name="update">
                <input type="hidden" value="" id="cat_id" name="cat_id">
            <tr>
                <td height="10" colspan="2"></td>
            </tr>
            <tr>
                <td width="22%" height="25" bgcolor="#FFFFFF"><strong>Category Name :</strong></td>
                <td width="50%" bgcolor="#FFFFFF"><input type="text" value="" id="cat_name" name="cat_name"></td>         
            </tr>
            <tr>
                <td width="22%" height="25" bgcolor="#FFFFFF"><strong>Category Description :</strong></td>
                <td width="50%" bgcolor="#FFFFFF"><textarea cols="35" rows="8" id="cat_description" name="cat_description"></textarea></td>
            </tr>
            <tr>
                <td bgcolor="#FFFFFF" align="right"></td>
                <td bgcolor="#FFFFFF" align="left">
                    <input type="image" name="Save" id="Save" src="images/bt_save.gif">
                    &nbsp;&nbsp;
                    <input type="image" style="cursor:pointer" onclick="javascript:window.location.replace('livefeed_categories.php'); return false;" src="images/bt_cancel.gif">
                </td>
            </tr>

        </tbody>
    </table>
</form> 
```

**输出** ![jQuery 错误](../Images/1ab38afdc83ada6e89eceea70d4d9ecf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:22:48.793

这是因为我在`<form>`标签内添加了`<table>`标签。现在它工作正常。

谢谢你的时间。

# ruby - jsftp for node.js 和 CloudFoundry 上的 FTP

> ID：13927548
> 
> 赞同：0
> 
> 时间：2012-12-18T06:32:46.723
> 
> 标签：ruby, node.js, ftp, cloud-foundry, vmc

我正在测试一个小想法，即在 CloudFoundry 上有一个 node.js 脚本来在另一个 FTP 站点中写入文件。

```
var Ftp = require("jsftp");

var ftp = new Ftp({
    host: "ftp.somesite.com",
    user: "username",
    port: 21, 
    pass: "password"
});

var remotePath = "/test.txt";

var data = 'this is a test string';

ftp.getPutSocket(remotePath, function(err, socket) {
    socket.write(data, function(err) {
        console.log('good');
        socket.end();
    });
}); 
```

但是，当我这样做时，`vmc push`我得到了这个错误

```
Uploading my-ftp... FAILED
Upload failed. Try again with 'vmc push'.
Errno::ENOENT: No such file or directory - C:/Users/myUsername/AppData/Local/Temp/.
vmc_my-ftp_files/node_modules/jsftp/test/test_c9/??.md
For more information, see ~/.vmc/crash 
```

该`crash`文件也没有告诉我太多：

```
Errno::ENOENT: No such file or directory - C:/Users/myUsername/AppData/Local/Temp/.vmc_my-ftp_files/node_modules/jsftp/test/test_c9/??.md

cfoundry-0.4.14/lib/cfoundry/upload_helpers.rb:146:in `size'
cfoundry-0.4.14/lib/cfoundry/upload_helpers.rb:146:in `block in make_fingerprints'
cfoundry-0.4.14/lib/cfoundry/upload_helpers.rb:143:in `glob'
cfoundry-0.4.14/lib/cfoundry/upload_helpers.rb:143:in `make_fingerprints'
cfoundry-0.4.14/lib/cfoundry/upload_helpers.rb:125:in `determine_resources'
cfoundry-0.4.14/lib/cfoundry/upload_helpers.rb:44:in `upload'
vmc-0.4.7/lib/vmc/cli/app/push.rb:119:in `block in upload_app'
interact-0.5.0/lib/interact/progress.rb:98:in `with_progress'
vmc-0.4.7/lib/vmc/cli/app/push.rb:118:in `upload_app'
vmc-0.4.7/lib/vmc/cli/app/push.rb:100:in `setup_new_app'
vmc-0.4.7/lib/vmc/cli/app/push.rb:82:in `push'
mothership-0.3.5/lib/mothership/base.rb:61:in `run'
mothership-0.3.5/lib/mothership/command.rb:68:in `block in invoke'
manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:113:in `call'
manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:113:in `block (2 levels) in <class:Manifests>'
mothership-0.3.5/lib/mothership/callbacks.rb:74:in `with_filters'
manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:112:in `block in <class:Manifests>'
mothership-0.3.5/lib/mothership/command.rb:78:in `instance_exec'
mothership-0.3.5/lib/mothership/command.rb:78:in `block (2 levels) in invoke'
mothership-0.3.5/lib/mothership/command.rb:82:in `instance_exec'
mothership-0.3.5/lib/mothership/command.rb:82:in `invoke'
mothership-0.3.5/lib/mothership/base.rb:50:in `execute'
vmc-0.4.7/lib/vmc/cli.rb:106:in `execute'
mothership-0.3.5/lib/mothership.rb:45:in `start'
vmc-0.4.7/bin/vmc:11:in `<top (required)>'
C:/Ruby193/bin/vmc:23:in `load'
C:/Ruby193/bin/vmc:23:in `<main>' 
```

**知道我做错了什么吗？**它在本地主机上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:10:43.927

我已经尝试过了，它似乎上传正常。对于节点应用程序，我总是小心确保我的 packages.json 文件中的内容与 node_modules 的内容相匹配。可以肯定的是，在尝试推送之前，完全删除 node_modules 并重新运行“npm install”。

此外，由于这似乎不是基于 http 的应用程序，请记住通过为框架选择“其他”然后选择“独立”来将框架设置为独立。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:30:08.960

正确的答案是删除 node_modules/jsftp 中的 'test' 文件夹

# codeigniter - Authorization with Codeigniter+CSRF+uLogin error

> ID：13927555
> 
> 赞同：0
> 
> 时间：2012-12-18T06:33:05.810
> 
> 标签：codeigniter, authorization, csrf

Set authorization module uLogin for Codeigniter [http://ulogin.ru/constructor.html](http://ulogin.ru/constructor.html)

However, it causes an error (`"The action you have requested is not allowed."`) if enabled CSRF protection.

If the protection is turned off, everything works fine.

If protection is enabled, then after logging and automatic refresh the current page fails.

Apparently due discrepancies passed token. How to solve this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:13:34.390

CodeIgniter CSRF 有一个设置可能会导致您的问题。在 /config/config.php 中，该设置`$config['csrf_expire']`决定了 CSRF cookie 的有效期。例如，如果该设置为 300（5 分钟），并且您刷新了登录页面但在 10 分钟内没有尝试登录，您将收到错误`"The action you have requested is not allowed."`消息，因为 CSRF cookie 在 5 分钟前过期。

本质上，该错误可能来自 CodeIgniter CSRF cookie 已过期。该 cookie 是在页面加载时设置的，因此如果带有表单的页面在此处停留的时间超过`$config['csrf_expire']`设置时间，则您必须在提交表单之前刷新页面，否则您将收到该错误。为避免经常出现错误，请尝试增加`$config['csrf_expire']`.

此外，如果您使用 CodeIgniter[表单助手](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)，隐藏的 CSRF 输入将自动生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:39:51.070

我不熟悉链接的“模块”，但您需要在登录表单中添加一个隐藏字段，其中包含 CSRF 验证数据，如下所示：

```
<input type="hidden"
    name="<?=$this->security->get_csrf_token_name();?>"
    value="<?=$this->security->get_csrf_hash();?>"
/> 
```

# javafx-2 - Menuitem tooltip in javafx2

> ID：13927559
> 
> 赞同：4
> 
> 时间：2012-12-18T06:33:16.887
> 
> 标签：javafx-2

There are two questions in javafx2..

1.  How to set tooltip for the menuitem
2.  How to set size (width) for the menu item

Kindly let me know if you have the answer..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:03:41.963

这两个问题的答案直接指向类[CustomMenuItem](http://docs.oracle.com/javafx/2/api/javafx/scene/control/CustomMenuItem.html)，该类包装任意节点并将其放入菜单中。例如，以下在菜单中创建一个具有特定宽度、高度和工具提示的矩形：

```
public void start(final Stage stage) throws Exception {
    Group root = new Group();

    final Menu menu1 = new Menu("File");
    MenuBar menuBar = new MenuBar();
    menuBar.getMenus().add(menu1);

    MenuItem menu12 = new MenuItem("Open");

    menu1.getItems().add(menu12);

    Rectangle rect = new Rectangle();
    rect.setHeight(100);
    rect.setWidth(100);

    Tooltip t = new Tooltip("A Rectangle ToolTip");
    Tooltip.install(rect, t);

    CustomMenuItem customMenuItem = new CustomMenuItem(rect);
    customMenuItem.setHideOnClick(false);

    menu1.getItems().add(customMenuItem);

    root.getChildren().add(menuBar);
    Scene scene = new Scene(root,800,600);
    stage.setScene(scene);
    stage.show();
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-27T18:07:18.410

## 1- 在 MenuItem 上安装工具提示

```
Tooltip tooltip = new Tooltip("This is a tooltip"); 
```

如您所知，**要将 Tooltip 绑定**到 JavaFX 图形对象`foo`：

```
Tooltip.install(foo, tooltip); 
```

此静态实用程序**需要提供的对象来扩展 Node**，而**MenuItem 不需要**。

但是它的 CustomMenuItem 子类可以解决您的问题。直接引用自[CustomMenuItem Java 文档](https://docs.oracle.com/javafx/2/api/javafx/scene/control/CustomMenuItem.html "自定义菜单项 Java 文档")：

> 通过将 Node 分配给 content 属性，允许在其中嵌入任意节点的 MenuItem。CustomMenuItem 尝试使任意节点在菜单中显得更自然。例如，当用户将鼠标悬停在节点上（或使用键盘或其他替代方式导航到该节点）时，您会自动获得悬停突出显示。

例如，要**创建一个**外观和行为与常规 MenuItem 完全相同的 CustomMenuItem：

```
CustomMenuItem openMenuItem = new CustomMenuItem(new Label("Open")); 
```

然后，您可以**将 Tooltip 附加到其包装的内容**（即节点）：

```
Tooltip.install(openMenuItem.getContent(), tooltip); 
```

如果您打算将 CustomMenuItem 与其他类型的节点一起使用，请查看[Java 文档](https://docs.oracle.com/javafx/2/api/javafx/scene/control/CustomMenuItem.html "自定义菜单项 Java 文档")，尤其是 about `setHideOnClick`，但这是题外话。

## 2-调整菜单项的大小

您不能调整 MenuItem 的大小，但可以使用允许它的节点，然后再次**将其包装在 CustomMenuItem 中**：

```
Label closeLabel = new Label("Close");
closeLabel.setPrefWidth(400); // Overly large menu item
CustomMenuItem closeMenuItem = new CustomMenuItem(closeLabel); 
```

# nhibernate - NHibernate 遗留数据库多对一

> ID：13927563
> 
> 赞同：2
> 
> 时间：2012-12-18T06:33:34.557
> 
> 标签：nhibernate, nhibernate-mapping

我正面临与 NH 和遗留数据库的映射关系问题。

我们有两张桌子

```
Table1 [
   Id primary Key (sql identity)
   Cod1,
   Cod2 ] 
```

然后是第二张桌子

```
Table2 [
   CompositeCode primary key (assigned),
   Cod1,
   Cod2 ] 
```

CompositeCode 是 Cod1 + Cod2 的计算字段，是表的键。

我正在尝试以这种方式映射 Table1 和 Table2 之间的只读多对一关系

```
<class name="Table2"  >
  <id name="Id" >
     <generator class="identity" />
 </id>
 <many-to-one name="Table2" 
             formula="SELECT C.CompositeCode FROM Table2 C WHERE C.Cod1= Cod1 AND C.Cod2 = Cod2"/>
  <property name="Cod1" />
  <property name="Cod2" />
</class> 
```

NHibernate 在访问数据库时给了我这个错误：

```
'Incorrect syntax near the keyword 'SELECT'. 
```

这是生成的 SQL

```
 SELECT TOP (100) this_.Id as Id1_37_0_, 
 this_.Cod1 as Cod1l3_37_0_, 
 this_.Cod2 as Cod24_37_0_, 
 SELECT this_.CompositeCode  FROM Table2 C WHERE this_.Cod1 = C.OCd1 AND this_.Cod2 =  C.COd2 as formula0_0_ 
 FROM Table1 this_ 
```

怎么了？

我也尝试将公式更改为

```
 formula="SELECT C.CompositeCode FROM Table2 C WHERE C.CompositeCode = Cod1 + Cod2" 
```

但没有运气！

PS NH 是 3.1 版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:59:09.193

执行子选择的公式语句必须用**大括号括** `(SELECT ...)`起来：

```
formula="(SELECT C.CompositeCode FROM Table2 C WHERE C.CompositeCode = Cod1 + Cod2)" 
```

*注意：我尝试了类似的场景并且它正在工作。除了生成的代码不是*

```
...
,(SELECT this_.CompositeCode  FROM Table2 C .. // this_.ComositeCode 
```

*但*

```
...
,(SELECT C.CompositeCode  FROM Table2 C .. // C.CompositeCode 
```

# model - Whats the correct way of accessing AuthComponent::user in Model in Cakephp

> ID：13927565
> 
> 赞同：0
> 
> 时间：2012-12-18T06:33:45.727
> 
> 标签：model, cakephp-2.0

I need to set a varibiale from the AuthComponent

```
var $something = AuthComponent::user('group_id'); 
```

Gives me a syntax error in NetBeans. If I just set:

```
var $something = AuthComponent::user; 
```

I dont get an error, but does this contain all the user data, and how do I then access it for a conditional key value pair?

```
'Group' => array(
            'className' => 'Group',
            'foreignKey' => 'group_id',
            'conditions' => '', // access the Auth Component here
            'fields' => '',
            'order' => ''
        ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:34:38.933

您不能将方法设置为类的属性，因此会出现错误。控制器也在组件之前加载。

只需`AuthComponent::user('group_id')`在需要时使用或为其创建包装方法，就像`$this->groupId()`Auth 调用一样

# html - jquery ui Progress bar do not stop when clicking on stop button

> ID：13927566
> 
> 赞同：1
> 
> 时间：2012-12-18T06:33:49.390
> 
> 标签：html, jquery-ui, progress-bar

I am trying to use jquery ui progressbar. Below is code i have

```
<!DOCTYPE html>
<html>
<head>
<link href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" rel="stylesheet">
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script>
$(document).ready(function(){
 $('#progressBar').progressbar({
             value: 1
         });
});
var statusTracker ;
var percentage = 0;
function checkStatus() {//function to fill progress bar
 percentage = percentage +5;
 $("#progressBar > .ui-progressbar-value").animate({
  width : percentage + "%"
 });
 statusTracker = setTimeout(function() {//call this function every 20ms
  checkStatus()
 }, 20);
}

function startProgress(){
checkStatus();
}

function stop(){//stop progress bar

clearTimeout(statusTracker);

}
</script>
</head>

<body>
<div id="progressBar" style="opcity:1; height:30px;width:500px;" ></div>
<p>
<input type="submit" value="Start" onclick="startProgress()"/>

<input type="submit" value="Stop" onclick="stop()"/>
</p>
</body>
</html> 
```

When i am clicking on stop button progress bar do not stop. My clearTimeout() function is not working. Any help will be appreciable .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:03:30.250

你的超时时间太短了。第二个参数`setTimeout()`是执行前的*毫秒*数。浏览器在收到您的“停止”指令之前很久就已经将所有 (100 / 5) 20 步动画放在堆栈上。

尝试将超时间隔设置为 500（1/2 秒），然后重试。另外，我认为在这种情况下你会更好`setInterval()`，而不是使用无限`setTimeout()`循环。像这样的东西：

```
var statusTracker;
var percentage = 0;

function checkStatus() {
    percentage = percentage + 5;
    $("#progressBar > .ui-progressbar-value").animate({
        width : percentage + "%"
    });
    if (percentage == 100) stop();
}

function startProgress() {
    statusTracker = setInterval(checkStatus, 500);
}

function stop() {
    clearInterval(statusTracker);
}

$(function() {
    $('#progressBar').progressbar({
        value: 1
    });
}); 
```

**[JSFiddle 演示](http://jsfiddle.net/A7Yhs/9/)**

# objective-c - NSJSONSerialization return null

> ID：13927571
> 
> 赞同：0
> 
> 时间：2012-12-18T06:34:14.560
> 
> 标签：objective-c, json, ios5

The code listed below return 4 items very good but when i increase the number of items say limit 5 then it return null, can someone told me why its behaving like this?

```
NSString *hostStr = @"http://localhost:8888/iphone-so/product.json.php?";
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:hostStr]];
NSError *error;
product = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]; 
```

product.json.php return the following with 4 items

```
{
    "products": {
        "19": [
            {
                "id": "19",
                "name": "Save $240 on your next photo session",
                "image_url": "http://localhost:8888/iphone-so/images/13558127351.jpg",
                "highlight": "This is a fantastic offer! You can save 63% with this offer the next time you need an on-site photographer."
            }
        ],
        "21": [
            {
                "id": "21",
                "name": "One Hour Massage",
                "image_url": "http://localhost:8888/iphone-so/images/13558127352.jpg",
                "highlight": "With this special offer receive one hour massage for $35\. If you have ever wanted a massage after a long day, this is it! Buy one now for yourself or a loved one. You will save almost 70% with this o"
            }
        ],
        "22": [
            {
                "id": "22",
                "name": "Start your spring cleaning with this Offer! Get one area cleaned for Half-Price!",
                "image_url": "http://localhost:8888/iphone-so/images/13558127353.jpg",
                "highlight": "For only $40 you can save on having your carpet cleaned with this offer! Save 50% with this offer and receive a free gift."
            }
        ],
        "23": [
            {
                "id": "23",
                "name": "Let Their Creativity Unwined",
                "image_url": "http://localhost:8888/iphone-so/images/13558127354.jpg",
                "highlight": "For only $60 children can express themselves with art! With this offer you can see what creativity your child is keeping bottled up with this 2 hour class!"
            }
        ]
    }
} 
```

this is the result of product.json.php with 5 items

```
{
    "products": {
        "19": [
            {
                "id": "19",
                "name": "Save $240 on your next photo session",
                "image_url": "http://localhost:8888/iphone-so/images/13558151441.jpg",
                "highlight": "This is a fantastic offer! You can save 63% with this offer the next time you need an on-site photographer."
           }
        ],
        "21": [
            {
                "id": "21",
                "name": "One Hour Massage",
                "image_url": "http://localhost:8888/iphone-so/images/13558151442.jpg",
                "highlight": "With this special offer receive one hour massage for $35\. If you have ever wanted a massage after a long day, this is it! Buy one now for yourself or a loved one. You will save almost 70% with this o"
            }
        ],
        "22": [
            {
                "id": "22",
                "name": "Start your spring cleaning with this Offer! Get one area cleaned for Half-Price!",
                "image_url": "http://localhost:8888/iphone-so/images/13558151443.jpg",
                "highlight": "For only $40 you can save on having your carpet cleaned with this offer! Save 50% with this offer and receive a free gift."
            }
        ],
        "23": [
            {
                "id": "23",
                "name": "Let Their Creativity Unwined",
                "image_url": "http://localhost:8888/iphone-so/images/13558151444.jpg",
                "highlight": "For only $60 children can express themselves with art! With this offer you can see what creativity your child is keeping bottled up with this 2 hour class!"
            }
        ],
        "24": [
            {
                "id": "24",
                "name": "Custom framing for only $49! An offer valued at $200",
                "image_url": "http://localhost:8888/iphone-so/images/13558151445.jpg",
                "highlight": "Framing doesn’t have to be expensive! Now with this offer you can get $200 worth of framing for only $49\. Don’t let your art hang without a frame, take advantage of this offer. "
            }
        ]
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:10:30.430

从`NSJSONSerialization`'`JSONObjectWithData:options:error:`方法的文档中：

> 数据必须采用 JSON 规范中列出的 5 种支持的编码之一：UTF-8、UTF-16LE、UTF-16BE、UTF-32LE、UTF-32BE。

由于您似乎可以控制服务器源代码，因此您的 URL 是“ `http://localhost:8888/`”，下一点也适用：

> 用于解析的最有效编码是 UTF-8，因此如果您可以选择对传递给此方法的数据进行编码，请使用 UTF-8。

如果您确实需要不在`UTF-8`try`UTF-16`中的字符，或者在百分比转义中编码特殊字符。

# java - Avoiding TreeMap ConcurrentModificationException?

> ID：13927572
> 
> 赞同：14
> 
> 时间：2012-12-18T06:34:23.087
> 
> 标签：java, treemap, concurrentmodification

I am calling function that returns `TreeMap` instance, and in the calling code I wanted to modify the `TreeMap`. However, I am getting a `ConcurrentModificationException`.

Here is my code:

```
public Map<String, String> function1() {
    Map<String, String> key_values = Collections.synchronizedMap(new TreeMap<String, String>());
    // all key_values.put() goes here

    return key_values;
} 
```

And my calling code is:

```
Map<String, String> key_values =Collections.synchronizedMap(Classname.function1());
//here key_values.put() giving ConcurrentModificationException 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-18T06:47:29.030

请注意，如果您使用迭代器，`Collections.synchronizedMap`它将*永远不会保护您免受并发修改。*此外，除非您`Map`从多个线程访问您的，否则创建同步地图是没有用的。**没有被交给其他线程的局部范围的集合和变量不需要是`synchronized`.**

我的猜测是，在您遗漏的代码中，您正在迭代, 或, 之一`Map.entrySet`，并在该迭代*期间*（在循环内）调用。使用您显示的代码，这是发生这种情况的唯一方法。`Map.keySet``Map.values``put` *`for`*

 ** * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T09:40:14.567

如果您使用[ConcurrentSkipListMap](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)可以更快并且没有这个问题。

```
public NavigableMap<String, String> function1() {
    NavigableMap<String, String> key_values = new ConcurrentSkipListMap<String, String>();
    // all key_values.put() goes here

    return key_values;
} 
```

如果您不需要对键进行排序，则可以使用[ConcurrentHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:49:12.620

您似乎正在获得同步地图的同步地图。如果我用它的内容（简化）替换对 function1() 的调用，我们有：

```
Map<String, String> key_values =Collections.synchronizedMap(Collections.synchronizedMap( new TreeMap<String, String>())); 
```

我认为您的呼叫线路应更改为：

```
Map<String, String> key_values = Classname.function1(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T07:10:21.390

您正在寻找一个同步的 MAP，所以我假设您正在处理一个多线程应用程序。在这种情况下，如果要使用迭代器，则必须为 MAP 同步块。

```
/*This reference will give error if you update the map after synchronizing values.*/
    Map<String, String> values =Collections.synchronizedMap(function1());

/*This reference will not give error if you update the map after synchronizing values  */
        Map<String, String> values = Collections.synchronizedMap(new TreeMap<String, String>());

     synchronized (values) 
                {           
                    Iterator it = values.entrySet().iterator();
                    while(it.hasNext())
                    {
                        it.next() ; 
    // You can update the map here.     
                    }
                } 
```

更新 ：

实际上，在您的情况下，**考虑到您两次包装 MAP 的错误，**即使使用同步块在 while 循环中对其进行修改也会产生 CM 异常，因为您将无法在正在更新的原始 MAP 对象上进行同步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-30T18:12:36.597

这就是我正在做的事情`ConcurrentModificationException`：

```
TreeMap<Integer, Integer> map = new TreeMap<>();

for (Integer i : map.keySet()) {
    map.remove(i)
} 
```

这就是我为修复异常所做的相同功能：

```
TreeMap<Integer, Integer> map = new TreeMap<>();

// I would not recommend this in production as it will create multiple
// copies of map
for (Integer i : new HashMap<>(integers).keySet()) {
    map.remove(i)
} 
```*

# mysql - whitch of these is faster method do import db?

> ID：13927574
> 
> 赞同：0
> 
> 时间：2012-12-18T06:34:26.497
> 
> 标签：mysql, import, command-line-interface, dump

I wonder if importing a script with mysql CLI is faster than use a Linux CLI, let me explain what I mean here:

This:
- `mysql -uroot -ppass` then use this `source dump_script.sql`
is faster/slower of this:
- `mysql -uroot -ppass < dump_script.sql`

I'm importing a 9gb db and I'm trying to avoid mistake :)

Also what about [http://www.percona.com/](http://www.percona.com/) toolkit ? there is any valid tool to fast import a db ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:06:53.680

简单的回答：没有区别。

这两种方法都受到 MySQL 的插入速度而不是文件系统或磁盘读取性能的限制。您在 MySQL 如何将数据加载到表中的两种方法之间没有区别。

如果您从转储文件导入，则它是单线程操作。如果您可以使用 MyDumper (http://www.mydumper.org/) 之类的工具，它可以一次使用多个连接恢复数据，这会明显更快。

# python - get_latest() method in Django for getting few objects

> ID：13927576
> 
> 赞同：0
> 
> 时间：2012-12-18T06:34:38.937
> 
> 标签：python, sql, django

I have a model like this:

```
from django.core import meta

class Foo(models.Model):
    date = models.DateTimeField()
    name = models.CharField(maxlength=100)

    def __unicode__(self):
        return self.name

    class Meta:
        get_latest_by = 'date' 
```

And I can write

```
>>> from datetime import datetime
>>> a1 = Foo(name='a1', date=datetime(2012, 12, 18))
>>> a1.save()
>>> a2 = Foo(name='a2', date=datetime(2012, 12, 19))
>>> a2.save()
>>> a3 = Foo(name='a3', date=datetime(2012, 12, 20))
>>> a3.save()
>>> a4 = Foo(name='a4', date=datetime(2012, 12, 21))
>>> a4.save() 
```

Then if I write next I get following result

```
>>> Foo.objects.latest()
a4 
```

How cat I get the last 3 objects? Something like

```
>>> Foo.objects.latest(count=3)
a4, a3, a2 
```

**Note**: I don't have to use sorting, like

```
>>> Foo.objects.all().order_by('-date') 
```

because the datebase is very large and the query takes a long time.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T06:54:32.537

`latest()`只是一种快捷方式，`order_by(model._meta.get_latest_by)`因此在您使用它时已经进行了排序。也没有别的办法。你需要使用

```
Foo.objects.order_by('-date')[:3] 
```

如果查询太慢，您可以选择在日期字段上添加索引或使用`id`字段代替（假设您使用的是自动 ID）。

```
Foo.objects.order_by('-id')[:3] 
```

请注意，查询集会重载切片操作，因此这将转换为`...LIMIT 3`SQL 中的 a，而不是选择所有记录，然后在应用程序端获取前 3 个记录。

# open-source - 用 laravel 构建的简单应用程序？

> ID：13927581
> 
> 赞同：43
> 
> 时间：2012-12-18T06:35:10.870
> 
> 标签：open-source, laravel, php

我正在考虑进入 laravel，它看起来像一个很棒的框架，但它似乎缺少一个重要的文档。一个“入门”教程。

一个简单的博客教程或类似的，甚至是基于 laravel 构建的开源应用程序。有没有人有一些关于 laravel 的好教程或资源的链接？

我遇到了[这个 nettuts 教程](http://net.tutsplus.com/tutorials/php/building-web-applications-from-scratch-with-laravel/)，但它只是非常简短地略过一些东西。我希望会有一个更深入的教程。

当然有[官方文档](http://laravel.com/docs)，但这更多的是对您可以使用的内容的概述**，**它并没有真正告诉您**如何**使用它们。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-18T06:44:38.840

试试[daylerees.com/codebright](http://daylerees.com/codebright)（如[@michel-sim](https://stackoverflow.com/questions/13927581/simple-application-built-with-laravel#comment30496508_13927697)所述）

它为您提供了一个从头到尾的综合教程，并且写得很好

另外，如果你卡住了

社区也非常有帮助。检查[论坛](http://forums.laravel.com/)

**更新**

另外我会在 YouTube 上推荐 falldown2005 的 laravel 视频。如果您是初学者，这真的很有帮助

[http://www.youtube.com/user/fallendown2005?feature=watch](http://www.youtube.com/user/fallendown2005?feature=watch)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-18T06:56:53.370

我是 Nettuts+ 教程的作者 Nikko Bautista。我实际上停止了编写这个系列，因为我认为 Laravel 4 即将发布。不过我知道它会在明年问世，所以我实际上也会完成该系列的其他部分。

无论如何，如果您正在寻找使用 Laravel 构建的应用程序，您可以查看我在菲律宾作为 hackaton 的一部分构建的这个开源应用程序。它被称为“Bukas Palad”（在他加禄语中意为“Open Palms”）。这是一个捐赠和资源管理系统，旨在帮助捐赠和救济中心跟踪捐赠和资源（这个黑客事件发生在 2012 年菲律宾一场大风暴之后）。

你可以在这里找到代码： [http ://webpilipinas.github.com/bukaspalad/](http://webpilipinas.github.com/bukaspalad/)

这实际上使用了很多 Laravel 组件：

*   迁移
*   雄辩的 ORM
*   流畅的查询生成器
*   活动
*   路由
*   查看作曲家
*   资产管理
*   基于 REST 的控制器
*   会话
*   验证
*   输入

如果您有任何问题，请随时在 GitHub 页面上创建问题或在这里提问 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T19:03:36.193

我发现的另一个简单的：[https ://github.com/bstrahija/l4-site-tutorial](https://github.com/bstrahija/l4-site-tutorial)

更新的分叉在这里：[https](https://github.com/djodjoni/Laravel4_Example) ://github.com/djodjoni/Laravel4_Example 和工作版本可以在这里看到：http: [//l4.djodjo.org](http://l4.djodjo.org)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T03:12:17.423

我已经在 Laravel 中创建了 3 次这些综合教程，并将它们打包到 Udemy 课程中。几个月前我免费开设了这门课程。这些教程仍然在很大程度上适用于 Laravel 4，除了很少的语法更改，也许当您遵循这些教程时，您将能够从文档中找出更改：

[http://udemy.com/develop-web-apps-with-laravel-php-framework/](http://udemy.com/develop-web-apps-with-laravel-php-framework/)

看看它们，如果你需要更多，请告诉我，我一直在我的博客上发布 Laravel 教程。

# node.js - nodeJS，JOB调度

> ID：13927583
> 
> 赞同：2
> 
> 时间：2012-12-18T06:35:22.620
> 
> 标签：node.js, scheduling, jobs

我正在实现一个将执行多项任务的 Web 服务器，因为我计划在 8 个核心服务器上使用集群。任务如下：需要每 1 秒从某个服务器轮询一些统计数据，并将该数据存储在本地 redis 服务器中。需要访问多个服务器以发送来自 Web 客户端的单个请求的响应。一些请求可能是视频流。为此，我计划使其基于集群以利用多个内核。那么集群中有什么方法可以指定“这个工作人员应该专门做这项工作”，如果是，那么我可以在多个工作人员之间分配工作，比如网络请求由 n1 到 n2 个工作人员提供服务，并且总是由第一个工作人员轮询等。

或者你认为我应该遵循什么以获得最佳性能。

问候，-M-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:04:07.790

我与 Kue 合作过，在不同的工作进程中添加了订阅者。它在 Redis 上运行，因此可能很有趣。但在你的情况下，我会考虑使用某种 CRON 设置。您仍然可以在不同的进程上使用 redis 发布/订阅功能。

酷：http : [//learnboost.github.com/kue/](http://learnboost.github.com/kue/)

基于 CRON： [http ://www.romansky.me/2012/10/20/distributed-scheduled-queue-with-redis/](http://www.romansky.me/2012/10/20/distributed-scheduled-queue-with-redis/)

# java - 使用密码算法解码

> ID：13927585
> 
> 赞同：1
> 
> 时间：2012-12-18T06:35:30.147
> 
> 标签：java, web-services

这是私钥中存在的组件列表

```
modulus: b3baa8dae61d1db6d04c5454fd231e329062c8be33605e4161bcc627c0bea810c8f14accda49653d82d8dba060906e0aa978f300b6c1984c26f8b86708de0f2d859d82892a1255fa8132f451e1571ab2d98dc77d27f72e107a8b851e6f471b6b4d72e1ea76cc7c094ce471e6e2c63e802d0ded9a0b366cc4f53e537242c1b639eac90987e4197e4a5882178f854fc81c2c0a8a5ac390dafb9782340c02a15279dca8078715408a5c6a8b844e9c3e83c0d61afa0d1f4bdf365f252fbbd6f9e28168ffac28eb9db516907379b7949b355190c07f5ec959632c2783d55501841305140901b55129dd8e74c7ebca5395dc65127cbd64a7f493a80204299e625212e9
public exponent: 10001
private exponent: 1df3dbb42f6966cc52c685bf6c38700de9362d525569980bb9682675f58f509f0b7dfb034cd5b2839fccd83d501a81dc510611296b4bb43fecb6c2b4992bb8c7d35ebea4715880efb09c774f3608b8305a45609ba10f76a3d4687014f4629b5534a112b96a7705acdf1dab45d94144a543dcf05e1dc4423848cecc455c8ebff97b80acaff1d11ac1c04a7d502520116ff7fd8f71f2bda84a4432a60324e6ccca32fe1a63bb1116ecf9e8ef4b8e755ec19585ddeaa88477a77584b00c7c1322a39de4b4e6b50ccf44a7d40d28bc728cbe37e30a453f392614509470e43c730b7baf469e87b5f3d459380b04d408098c26564f3225068461203ad306af948c9a01
primeP: d98204decf9a6354e63297ff181e67554b310198a9fedce5b45018e21c3a3496481c3641eb654701d7272cf003c9c3dc3be7cc5de7792805dfb93fab86bf39c0c2237068efe09346e8a84795ff27eff25356715dbc60828ef2fd1988a49e0854ccbc2fd66f7bb8a37718ca46c6931fb65c571d706b5f0974477780138274dc21
primeQ: d3891c8dbd0b71b5ab06f0ce6387f2c0f03099814f7133632d79c705d45b2b8dcc82e0d667634d86570feed203bcddbb57e16fc5198f7d1c0811313e4c34e061022bb83971ede0a9d89fb786f164fe01842b9c158c547e3ae308ed0111ad2e3474cfb514739f2ee0db2d2a4162c89aa6df4511b8afaee8bd8d006a4a3f719dc9
primeExponentP: 28d783369b60f019f707b506cf6e9614ac03cdbaeee0ce75cb7fe6cc3e64a78f388723a10924814ad52da400859593537d642f39cac7333eb71dbfd8e37a70cbc32888690bf1ed75b926301af8487583d926382f53ba0389f8129282d7f65cb61fa38e90036b05e69bec69bf147677d3f44edf5646b317c15fd20e989b3c7a41
primeExponentQ: 4cb28009dc2b54153c678dd4273e59841f125ff604a9d4a9f7091a6240b6b5b9fa16d212aaf5d45c0b2119c447daa8c28e808c97f84690642380a84c203163d18889f587ce89235631d6e72224502bd0bced5af06d2b0d81a863ca1b031fb98b07776ffe74559917aa205c1bcd07531b8204770271a0877e82ab4dde91d64e11
crtCoefficient: 82cee4d829988a09694b598e08065e38fbf221f12fb1fbc3ab564d9d7eaad1e39402607f176d0c6c9f9afa5d10e2e441a65f2cac8e13f67e1c86a67cfb805f15df84d52bdea51acd2e4ea4444b6a3ba2bd22667cb494062209cb9c17efdb6d6c34e460dc59cd9b8a3f2d941c2a954c9c827891ae6ac5af6f98f8b9532b8cf14e 
```

我使用密码算法用这个私钥解码该字符串，但问题是我遇到了异常

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: too much data for RSA block
    at org.bouncycastle.jce.provider.JCERSACipher.engineDoFinal(Unknown Source)
    at javax.crypto.Cipher.doFinal(Cipher.java:2087) 
```

任何人都知道为什么我得到那个例外，我该如何解决这个问题

**编辑：** 私钥有8个数据块，但公钥只有一个块，即模数公钥用于加密数据私钥用于解密数据，但私钥有8个数据块我有一个问题我需要仅使用模数块来解密数据

# html - 谁能解释 CSS 类中 *width 的含义？

> ID：13927589
> 
> 赞同：0
> 
> 时间：2012-12-18T06:35:42.617
> 
> 标签：html, css

> **可能重复：**
> [CSS 重置 - 样式中星号的用途](https://stackoverflow.com/questions/1690642/css-reset-purpose-of-asterik-within-a-style)

任何人都可以解释`*width`CSS 类中的含义吗？在阅读我的 CSS 类时，我发现：

```
 width:188px!important; *width:181px!important; 
```

是什么意思`*width`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T06:38:23.170

`*width`是特定于浏览器的 hack。它的行为就像`width`在 Internet Explorer 7 和更早版本上一样，并且对其他浏览器没有影响。

[http://en.wikipedia.org/wiki/CSS_filter#Star_hack](http://en.wikipedia.org/wiki/CSS_filter#Star_hack)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:37:23.337

*宽度：181px！重要；"* " 是针对 IE 7 浏览器的 hack。

# php - 在 CodeIgniter 的 DATE_FORMAT sql 中必须使用 FALSE

> ID：13927592
> 
> 赞同：3
> 
> 时间：2012-12-18T06:35:53.093
> 
> 标签：php, sql, codeigniter

我试着用

```
$this->db->select("orders.*, DATE_FORMAT(orders.created, '%M %e, %Y - %l:%i %p') AS OrderDate, users.id AS UserID, users.username AS UserName"); 
```

但这会产生错误...但是当我像这样使用 False 作为第二个参数时

```
$this->db->select("orders.*, DATE_FORMAT(orders.created, '%M %e, %Y - %l:%i %p') AS OrderDate, users.id AS UserID, users.username AS UserName", FALSE); 
```

错误消失了......
为什么需要在 CodeIgniter 的模型中`FALSE`用作函数中的第二个参数？`DATE_FORMAT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:26:19.093

显然，因为它无法解析函数（具有多个参数）和/或子查询。

# c - C - sysmalloc：断言失败（realloc）

> ID：13927593
> 
> 赞同：0
> 
> 时间：2012-12-18T06:36:07.233
> 
> 标签：c, realloc, assertion

我正在尝试编写一个函数来搜索所有出现的模式并返回文件中与模式匹配的偏移量数组。我想使用 realloc 来动态增长我返回的数组，但是我得到一个 sSYSMALLOC 断言错误。有时，如果我使用不同的搜索模式，我可能会收到无效的下一个尺寸错误。我的机器上还没有 valgrind（需要使用调试标志重建 glibc）。这似乎是一个简单的问题，我只触摸这个指针两次 - 一次声明它并将其设置为 NULL，然后再次重新分配以增长它。我知道 sizeof(char) 是 1，在我的 realloc 语句中没有用。

这是有问题的函数的代码。

```
unsigned long long* searchBytes(FILE* fp, char* byteString, char* searchType, unsigned   long long fileSize)
{
if (fp == NULL)
    return NULL;

unsigned long long* foundBytes = NULL;
long numBytes = 0;

// make some memory for the array of found bytes
if (strcmp(searchType, "ascii") == 0)
{
    numBytes = strlen(byteString);
    //foundBytes = realloc(NULL, numBytes * sizeof(char));
}
else
{
    // TODO strip the spaces from the string and handle hex searches
    printf("hex-search not implemented yet.\n");
    return NULL;
}

// loop over all the bytes in the file looking for this ascii pattern
unsigned long long currentOffset = 0;
unsigned long long origOffset = 0;
unsigned long long m = 0;
foundWords = 0;
char* possibleWord = malloc(numBytes * sizeof(char));

do
{
    fseek(fp, currentOffset, SEEK_SET);
    unsigned long long i;
    int n = 0;
    int failed = 0;
    origOffset = currentOffset;

    for(i=currentOffset; i<currentOffset+numBytes; i++)
    {
        possibleWord[n] = fgetc(fp);
        n++;
    }
    //printf("possibleWord: %s\n", possibleWord);

    // is this our word? use strstr just in case
    char* found = strstr((const char*) byteString, (const char*) possibleWord);
    if (found)
    {
        foundWords++;
        // make a bigger spot for it
        printf("allocating %ld bytes to add word %d to list...\n", (numBytes*foundWords) * sizeof(char), foundWords);
        unsigned long long* p = realloc(foundBytes, (numBytes*foundWords) * sizeof(char));
        if (p)
        {
            foundBytes = p;

            for (i = origOffset; i<origOffset+numBytes; i++)
            {
                foundBytes[m] = i;
                //printf("added offset %llu to foundBytes[%llu]\n", i, m);
                m++;
            }

        }
        else
        {
            return NULL;
        }

    }
    else
    {
        failed = 1;
    }

    if (failed == 0)
    {
        currentOffset += numBytes;
        //printf("Yay! moving forward %ld bytes.\n", numBytes);
    }
    else
    {
        currentOffset++;
    }   
}
while (currentOffset < fileSize);

if (foundWords > 0)
{
    //printf("returning foundBytes!\n");

    //unsigned long long z;
    //for (z=0; z<foundWords*numBytes; z++)
    //  printf("%llu\n", foundBytes[z]);
    //printf("...\n");
    return foundBytes;
}
//printf("returning NULL\n");
return NULL;
} 
```

* * *

当使用“root”作为搜索模式在 /etc/passwd 上运行时：

```
allocating 4 bytes to add word 1 to list...
allocating 8 bytes to add word 2 to list...
*** glibc detected *** ./chex3: realloc(): invalid next size: 0x0000000001a59270 *** 
```

或在 /etc/passwd 上使用“daemon”作为搜索模式：

```
allocating 6 bytes to add word 1 to list...
allocating 12 bytes to add word 2 to list...
chex3: malloc.c:2451: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed. 
```

有人可以看看这个，看看它看起来是否正常？谢谢！我是一个试图学习的菜鸟:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:57:22.043

解决方案是使用 foundBytes 对 p 进行 decalure，然后将 realloc 行更改为：

```
p = realloc(foundBytes, (numBytes*foundWords) * sizeof(*p)); 
```

我必须承认我真的不明白为什么这是必要的，似乎我以这种方式分配了很多。（对于 3 个字符的搜索模式，每次添加 24 个字节而不是 3 个字节）

# javascript - 在javascript中动态设置样式

> ID：13927595
> 
> 赞同：1
> 
> 时间：2012-12-18T06:36:39.020
> 
> 标签：javascript, styles, set

我必须为元素动态设置边距。早些时候，它是通过以下方式完成的。

```
var starLink = star.createChild({
            tag: 'a',
            html: this.values[i],
            href: 'javascript:void',           
            title: this.showTitles ? this.titles[i] : ''
        });

        // Prepare division settings
        if(this.split) {
          var odd = (i % this.split);              
          star.setWidth(sw);
          starLink.setStyle('margin-left', '-' + (odd * sw) + 'px');          
        } 
```

但现在我改变了我的代码如下。我将如何在这里设置边距？

```
var starLink = document.createElement('a');        
        starLink.href = 'javascript:void';         
        starLink.title = this.showTitles ? this.titles[i] : '';
        starLink.innerHTML = this.values[i];
        star.appendChild(starLink);

 // Prepare division settings
        if(this.split) {
          var odd = (i % this.split);              
          star.setWidth(sw);
          starLink.setStyle('margin-left', '-' + (odd * sw) + 'px');              
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:42:05.143

starLink.style.marginLeft='10px' 或 starLink.style.margin = "0px 0px 0px" + xOffset + "px";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:41:44.330

怎么样

```
var starLink = document.createElement('a');        
starLink.href = 'javascript:void';         
starLink.title = this.showTitles ? this.titles[i] : '';
starLink.innerHTML = this.values[i];
star.appendChild(starLink);

// Prepare division settings
if(this.split) {
    var odd = (i % this.split);              
    star.setWidth(sw);
    starLink.style.marginLeft = '-' + (odd * sw) + 'px';              
} 
```

# java - 根据 Android 手机中的 Wifi 连接在联系人号码之间切换

> ID：13927599
> 
> 赞同：1
> 
> 时间：2012-12-18T06:36:50.240
> 
> 标签：java, call

我们可以有一个 android 应用程序将任何来电定向到

a) wifi 被禁用时的手机号码 b) 通过 Jabber 客户端的办公室分机号码，以防 wifi 连接（当我在办公室时，我想在我的分机上而不是手机上接听电话）。

是否有任何具有此类设置的 Jabber 客户端可用，或者我需要开发一个可以实现此目的的 android 应用程序（在 java 中）。

# android - 如何在 BaseAdapter Get View Method 扩展的类中显示 Toast

> ID：13927601
> 
> 赞同：10
> 
> 时间：2012-12-18T06:36:52.187
> 
> 标签：android, android-layout, listview, baseadapter, listview-adapter

当我单击列表视图中的按钮时，我遇到了显示 Toast 消息的问题。问题是由 BaseAdapter 扩展的自定义类我有一个名为 GetView 的方法我想显示来自该特定消息的 toast 消息

以下是我的 Listview Row Xml

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/tools"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    app:context=".HomeActivity" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TableRow
            android:id="@+id/tableRow_laugh"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                app:ignore="UselessParent" >

                <TableLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true" >

                    <TableRow
                        android:id="@+id/tableRow_Header_laugh"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:background="#818085" >

                        <RelativeLayout
                            android:id="@+id/relative_header"
                            android:layout_width="wrap_content"
                            android:layout_height="fill_parent"
                            android:background="#818085" >

                            <ImageView
                                android:id="@+id/UserIconPic_laugh"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignParentLeft="true"
                                android:layout_alignParentTop="true"
                                android:layout_weight="0.4"
                                android:src="@drawable/ic_launcher"
                                app:ignore="ObsoleteLayoutParam,ContentDescription" />

                            <Button
                                android:id="@+id/btn_Vote_laugh"
                                android:layout_width="wrap_content"
                                android:layout_height="match_parent"
                                android:layout_alignParentRight="true"
                                android:layout_alignParentTop="true"
                                android:layout_weight=".4"
                                android:text="VOTE"
                                app:ignore="ObsoleteLayoutParam,HardcodedText" />

                            <TextView
                                android:id="@+id/txt_number_of_vote_laugh"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignBaseline="@+id/btn_Vote_laugh"
                                android:layout_alignBottom="@+id/btn_Vote_laugh"
                                android:layout_toRightOf="@+id/UserIconPic_laugh"
                                android:layout_weight=".4"
                                android:textAppearance="?android:attr/textAppearanceMedium"
                                app:ignore="ObsoleteLayoutParam,HardcodedText" />
                        </RelativeLayout>
                    </TableRow>

                    <TableRow
                        android:id="@+id/tableRow_MainText_laugh"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" >

                        <TextView
                            android:id="@+id/txt_MainText_laugh"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:text="@string/whatweare_about_main"
                            android:textAppearance="?android:attr/textAppearanceMedium"
                            app:ignore="HardcodedText" />
                    </TableRow>

                    <TableRow
                        android:id="@+id/tableRow_Footer_laugh"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent" >

                        <RelativeLayout
                            android:id="@+id/relative_footer"
                            android:layout_width="wrap_content"
                            android:layout_height="fill_parent"
                            android:background="#bababa" >

                            <Button
                                android:id="@+id/btn_Share_laugh"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Share"
                                app:ignore="HardcodedText" />

                            <ImageButton
                                android:id="@+id/btn_facebook_laugh"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_centerVertical="true"
                                android:layout_toLeftOf="@+id/btn_twitter_laugh"
                                android:src="@drawable/pic2"
                                app:ignore="ContentDescription" />

                            <ImageButton
                                android:id="@+id/btn_twitter_laugh"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignParentRight="true"
                                android:layout_alignTop="@+id/btn_facebook_laugh"
                                android:src="@drawable/pic3"
                                app:ignore="ContentDescription" />
                        </RelativeLayout>
                    </TableRow>
                </TableLayout>
            </RelativeLayout>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow_light"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                app:ignore="UselessParent" >

                <TableLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true" >

                    <TableRow
                        android:id="@+id/tableRow_header_light"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" >

                        <RelativeLayout
                            android:id="@+id/RelativeLayout02"
                            android:layout_width="wrap_content"
                            android:layout_height="fill_parent"
                            android:background="#818085" >

                            <ImageView
                                android:id="@+id/UserIconPic_light"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignParentLeft="true"
                                android:layout_alignParentTop="true"
                                android:layout_weight="0.4"
                                android:src="@drawable/ic_launcher"
                                app:ignore="ObsoleteLayoutParam,ContentDescription" />

                            <Button
                                android:id="@+id/btn_Vote_light"
                                android:layout_width="wrap_content"
                                android:layout_height="match_parent"
                                android:layout_alignParentRight="true"
                                android:layout_alignParentTop="true"
                                android:layout_weight=".4"
                                android:text="VOTE"
                                app:ignore="ObsoleteLayoutParam,HardcodedText" />

                            <TextView
                                android:id="@+id/txt_vote_light"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignBaseline="@+id/btn_Vote_light"
                                android:layout_alignBottom="@+id/btn_Vote_light"
                                android:layout_toRightOf="@+id/UserIconPic_light"
                                android:layout_weight=".4"
                                android:textAppearance="?android:attr/textAppearanceMedium"
                                app:ignore="ObsoleteLayoutParam,HardcodedText" />
                        </RelativeLayout>
                    </TableRow>

                    <TableRow
                        android:id="@+id/tableRow_content_light"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" >

                        <FrameLayout
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content" >

                            <TextView
                                android:id="@+id/textView1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_gravity="bottom|center"
                                android:maxLength="300"
                                android:text="@string/Main_laugh"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                app:ignore="HardcodedText" />

                            <ImageView
                                android:id="@+id/light_image"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                app:ignore="ContentDescription" />
                        </FrameLayout>
                    </TableRow>

                    <TableRow
                        android:id="@+id/tableRow_Footer_light"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent" >

                        <RelativeLayout
                            android:id="@+id/RelativeLayout01"
                            android:layout_width="wrap_content"
                            android:layout_height="fill_parent"
                            android:background="#bababa" >

                            <Button
                                android:id="@+id/Btn_Share_light"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Share"
                                app:ignore="HardcodedText" />

                            <ImageButton
                                android:id="@+id/btn_facebook_light"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_centerVertical="true"
                                android:layout_toLeftOf="@+id/btn_twitter_light"
                                android:src="@drawable/pic2"
                                app:ignore="ContentDescription" />

                            <ImageButton
                                android:id="@+id/btn_twitter_light"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignParentRight="true"
                                android:layout_alignTop="@+id/btn_facebook_light"
                                android:src="@drawable/pic3"
                                app:ignore="ContentDescription" />
                        </RelativeLayout>
                    </TableRow>
                </TableLayout>
            </RelativeLayout>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow_fun"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                app:ignore="UselessParent" >

                <TableLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true" >

                    <TableRow
                        android:id="@+id/tableRow_header_fun"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" >

                        <RelativeLayout
                            android:id="@+id/RelativeLayout04"
                            android:layout_width="wrap_content"
                            android:layout_height="fill_parent"
                            android:background="#818085" >

                            <ImageView
                                android:id="@+id/UserIconPic_fun"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignParentLeft="true"
                                android:layout_alignParentTop="true"
                                android:layout_weight="0.4"
                                android:src="@drawable/ic_launcher"
                                app:ignore="ObsoleteLayoutParam,ContentDescription" />

                            <Button
                                android:id="@+id/btn_vote_fun"
                                android:layout_width="wrap_content"
                                android:layout_height="match_parent"
                                android:layout_alignParentRight="true"
                                android:layout_alignParentTop="true"
                                android:layout_weight=".4"
                                android:text="VOTE"
                                app:ignore="ObsoleteLayoutParam,HardcodedText" />

                            <TextView
                                android:id="@+id/txt_vote_number_fun"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignBaseline="@+id/btn_vote_fun"
                                android:layout_alignBottom="@+id/btn_vote_fun"
                                android:layout_toRightOf="@+id/UserIconPic_fun"
                                android:layout_weight=".4"
                                android:textAppearance="? android:attr/textAppearanceMedium"
                                app:ignore="ObsoleteLayoutParam,HardcodedText" />
                        </RelativeLayout>
                    </TableRow>

                    <TableRow
                        android:id="@+id/tableRow_Content_fun"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" >

                        <RelativeLayout
                            android:id="@+id/relativelayout"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent" >

                            <ImageView
                                android:id="@+id/image_fun"
                                android:layout_width="fill_parent"
                                android:layout_height="fill_parent"
                                android:adjustViewBounds="true"
                                android:baselineAlignBottom="true"
                                android:cropToPadding="true"
                                app:ignore="ContentDescription" />

                            <TextView
                                android:id="@+id/myImageViewText"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignBottom="@+id/image_fun"
                                android:layout_alignLeft="@+id/image_fun"
                                android:layout_alignRight="@+id/image_fun"
                                android:layout_alignTop="@+id/image_fun"
                                android:layout_margin="1dp"
                                android:gravity="center"
                                android:text="@string/main_light"
                                android:textColor="#000000" />
                        </RelativeLayout>
                    </TableRow>

                    <TableRow
                        android:id="@+id/tableRow_Footer_fun"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent" >

                        <RelativeLayout
                            android:id="@+id/RelativeLayout03"
                            android:layout_width="wrap_content"
                            android:layout_height="fill_parent"
                            android:background="#bababa" >

                            <Button
                                android:id="@+id/Btn_share_fun"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Share"
                                app:ignore="HardcodedText" />

                            <ImageButton
                                android:id="@+id/btn_facebook_fun"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_centerVertical="true"
                                android:layout_toLeftOf="@+id/btn_twitter_fun"
                                android:src="@drawable/pic2"
                                app:ignore="ContentDescription" />

                            <ImageButton
                                android:id="@+id/btn_twitter_fun"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_alignParentRight="true"
                                android:layout_alignTop="@+id/btn_facebook_fun"
                                android:src="@drawable/pic3"
                                app:ignore="ContentDescription" />
                        </RelativeLayout>
                    </TableRow>
                </TableLayout>
            </RelativeLayout>
        </TableRow>
    </TableLayout>

</ScrollView> 
```

我的CustomeAdapter 类代码

```
 package com.example.laysapp.ContentListView;
 import java.util.ArrayList;
 import java.util.List;

 import com.example.laysapp.R;
 import com.example.laysapp.RegisteredUser.LighterShare;

 import android.app.Application;
 import android.content.Context;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.view.ViewGroup;
 import android.webkit.WebView.FindListener;
 import android.widget.BaseAdapter;
 import android.widget.Button;
 import android.widget.ImageView;
 import android.widget.TextView;
 import android.widget.Toast;

 public class ContentItemAdapter extends BaseAdapter {

private final List<Content_Items> items;

public ContentItemAdapter(final Context context, final int itemResId,
        final ArrayList<Content_Items> items2) {
    this.items = items2;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return items.size();
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@SuppressWarnings("null")
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    final Content_Items item = this.items.get(position);
    View itemView = null;

    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) parent.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        itemView = inflater.inflate(R.layout.contentlistrow, null);
    } else {
        itemView = convertView;
    }

    // Set the text of the Laugh Row Start
    TextView txtLaugh_Vote = (TextView) itemView
            .findViewById(R.id.txt_number_of_vote_laugh);
    txtLaugh_Vote.setText(item.getLaughNo_Vote());

    TextView txtlaugh_Content = (TextView) itemView
            .findViewById(R.id.txt_MainText_laugh);
    txtlaugh_Content.setText(item.getLaughContent());

    ImageView imgView_Laugh_UserPic = (ImageView) itemView
            .findViewById(R.id.UserIconPic_laugh);

    imgView_Laugh_UserPic.setImageBitmap(item.getLaughtUserPic());

    // Set the text of the Laugh Row End

    // Setting of Light Row Start

    TextView txtLight_Vote = (TextView) itemView
            .findViewById(R.id.txt_vote_light);
    txtLight_Vote.setText(item.getLaughNo_Vote());

    TextView txtlight_Content = (TextView) itemView
            .findViewById(R.id.textView1);
    txtlight_Content.setText(item.getLaughContent());

    ImageView imgView_Light_UserPic = (ImageView) itemView
            .findViewById(R.id.UserIconPic_light);

    imgView_Light_UserPic.setImageBitmap((item.getLightStoriesUserPic()));

    ImageView imgView_LightContent_Image = null;
    // Check weather ContentImage is Available For Light

    String Check = item.getIsLightContentAvaiable();
    if (Check == "yes") {
        imgView_LightContent_Image = (ImageView) imgView_LightContent_Image
                .findViewById(R.id.light_image);
        imgView_LightContent_Image.setImageBitmap(item
                .getLightStoriesContentImagePic());
    }

    // Setting of Light Row End

    // Set the text of the Funto Row Start

    TextView txtfunto_Vote = (TextView) itemView
            .findViewById(R.id.txt_vote_number_fun);
    txtfunto_Vote.setText(item.getLaughNo_Vote());

    TextView txtfunto_Content = (TextView) itemView
            .findViewById(R.id.myImageViewText);
    txtfunto_Content.setText(item.getLaughContent());

    // Set the text of the Funto Row End

    ImageView imgView_funto_UserPic = (ImageView) itemView
            .findViewById(R.id.UserIconPic_fun);

    imgView_funto_UserPic.setImageBitmap(item.getfuntoUserPic());

    ImageView imgView_funto_ContentPic = (ImageView) itemView
            .findViewById(R.id.image_fun);

    imgView_funto_ContentPic.setImageBitmap(item.getfuntoContentImagePic());

    Button MainVote_Laugh = null;
    MainVote_Laugh = (Button) MainVote_Laugh
            .findViewById(R.id.btn_Vote_laugh);
    MainVote_Laugh.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Toast.makeText(getApplication(), "Clicked Laugh Vote", Toast.LENGTH_SHORT).Show();
        }
    });

    return itemView;
}
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-18T06:38:21.787

替换这一行：

```
Toast.makeText(getApplication(), "Clicked Laugh Vote", Toast.LENGTH_SHORT).show(); 
```

用这条线：

```
 Toast.makeText(v.getContext(), "Clicked Laugh Vote", Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T06:51:48.470

你在构造函数中有一个上下文。创建一个类级别的上下文变量，比如 ctx。内部构造函数写

```
this.ctx = context; 
```

最后替换 getApplication() 中

```
Toast.makeText(getApplication(), "Clicked Laugh Vote", Toast.LENGTH_SHORT).Show(); 
```

与 ctx。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-14T10:45:37.650

你也可以使用 parent.getContext()，toast 的完整代码如下

```
Toast.makeText(parent.getContext(), "view clicked", Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-15T03:30:04.157

当您从**MainActivity**上下文更改切换时，您必须使用**AdapterClass > ViewHolderClass > ViewHolder 的构造函数参数**来获取适配器的上下文。

这是一个例子。

```
 public MyViewHolder(final View itemView) {
        super(itemView);

        itemView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                Toast.makeText(itemView.getContext(),"Hi",Toast.LENGTH_LONG);
            }
        });

    } 
```

否则，您还可以将上下文传递给任何其他没有活动的类的构造函数参数。

例子。

```
public class MyClass {
Context c;
public MyClass(Context context) {
     c = context;
 }} 
```

# c++ - c++ 运算符重载，

> ID：13927604
> 
> 赞同：3
> 
> 时间：2012-12-18T06:37:03.397
> 
> 标签：c++, operator-overloading

下面显示的代码有什么问题？请有人点亮。谢谢你的时间 ！

```
 #include<iostream.h>
      using namespace std;

     struct mydata{
        int mx;
        mydata(int x = 0){}
        mydata operator+(const mydata& rhs){

                mydata temp(rhs);
                return temp;
        }
        operator int() const{ return mx; }
        operator double() const{ return mx; }
};

int main(){
        mydata d;
        mydata r = d + 5; // L1
        5 + d; // L2
        d + d; // L3
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T06:39:26.170

首先，您没有说明问题出在哪里，但大概您想要一个将两个对象的值`operator+`相加的值：`mx``mydata`

```
mydata operator+(const mydata& rhs){
        return mydata (mx + rhs.mx);
} 
```

接下来，我建议将其设为非成员函数，以便 LHS 和 RHS 以相同的方式处理，从而解决以下问题`L2`：

```
mydata operator+(const mydata& lhs, const mydata& rhs){
        return mydata (lhs.mx + rhs.mx);
} 
```

最后，您将留下一个模棱两可的重载，因为编译器无法决定是使用内置的`operator+(int,int)`还是您自己的`operator+(const mydata&, const mydata&)`. 您可以通过删除强制转换运算符`int()`和`double()`.

[在此处](http://ideone.com/LmLeDG)查看演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T06:48:35.630

问题（说明[注释](https://stackoverflow.com/questions/13927604/c-operator-overloading/13927749#comment19200638_13927604)）是编译器不知道`+`您要执行哪个：

```
(double)d + 5 
```

或者

```
(int)d + 5 
```

为了解决这种歧义，您应该指出类型转换，或者用命名函数替换这些运算符之一：

```
 operator int() const{ return mx; }
    operator double() const{ return mx; } 
```

如果你想改用 d + mydata(5) 你应该这样写，因为上述变体更有可能被应用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:53:20.607

您可以提供一些非成员 operator+ 来启用`operator+`不同的数据类型：

```
mydata operator+(const mydata& lhs, const mydata& rhs){
        return mydata (lhs.mx + rhs.mx);
}
mydata operator+(int mx, const mydata& rhs){
        return mydata (rhs.mx+mx);
}

mydata operator+(const mydata& lhs, int mx){
        return mydata(lhs.mx+mx);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T06:45:08.343

你不能做 5 + d。5 不能像这样转换为类对象。为此，您需要从类方法中获取运算符 + 定义。（据我所知，最好是朋友）。

# java - 我的解决方案中缺少什么？凸包查找算法

> ID：13927609
> 
> 赞同：2
> 
> 时间：2012-12-18T06:37:23.200
> 
> 标签：java, convex-hull

几天来，我一直在为这个问题绞尽脑汁……我看不出我的算法可能遗漏了什么。这就是[这里的问题。](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=622)

从我收集到的信息中，我以某种循环的 ccw 顺序获得积分。因此，我实现了一个 graham 扫描版本，通过确保它使用始终提供右转的点来寻找凸包。

我的算法适用于所有给定的测试输入和我可以提出的所有输入，但它不会被在线法官接受，这是作业“完成”所必需的。

无论如何，这是我的代码，如果有人能找到我所缺少的东西，我将永远欠你的债。

```
import java.util.Scanner;
import java.util.Vector;
import java.util.Arrays;
import java.util.Comparator;

public class Main {

public Main() {}

public void handlePoints(Point[] points) throws Exception {
    int m = 1;
    Vector<Point> convexHull = new Vector<Point>();
    // This is THE ONLY gaurunteed point to be in the hull - and it is the lowest left point so that's ok. 
    convexHull.add(points[0]);
    // Can be removed if ill-suited. 
    convexHull.add(points[1]);
    for (int i = 2; i < points.length; i++) {
        // Find the next valid point on the hull. 
        while (counterClockWise(convexHull.elementAt(m-1), convexHull.elementAt(m), points[i]) <= 0) {
            convexHull.removeElementAt(m);
            if (m > 1) {
                m -= 1;
            }
            // All points are colinear
            else if (i == points.length - 1) {
                break;
            }
            else {
                convexHull.add(points[i]);
                i++;
            }
        }
        convexHull.add(points[i]);
        m++;
    }   
    if (convexHull.size() <= 3) {
        throw new Exception();
    }

    String test = "" + convexHull.size() + '\n';
    for (Point p : convexHull) {
        test += p.x + " " + p.y + '\n';
    }
    System.out.print(test);
}

// Simply calculated whether or not the 3 points form a countedClockWise turn.
public int counterClockWise(Point p1, Point p2, Point p3) {
    return ((p2.x - p1.x) * (p3.y - p1.y)) - ((p2.y - p1.y) * (p3.x - p1.x));
}

// Rearranges the array to maintain its order but be started and ended by the point with the lowest y value
private static Point[] moveLowestToFront(Point[] array) {
    // Rearrange for y:
    int lowestY = 99999;
    int lowestIndex = 0;
    for (int i = 0; i < array.length; i++) {
        if (array[i].y < lowestY) {
            lowestY = array[i].y;
            lowestIndex = i;
        }
    }
    // Scan through again to see if there are any competing low-y values. 
    int lowestX = 99999;
    for (int i = 0; i < array.length; i++) {
        if (array[i].y == lowestY) {
            if (array[i].x < lowestX) {
                lowestX = array[i].x;
                lowestIndex = i;
            }
        }
    }
    Point[] rearrangedPoints = new Point[array.length];
    int j = 0;
    // Take from low to end cutting off repeated start point. 
    for (int i = lowestIndex; i < array.length - 1; i++) {
        rearrangedPoints[j] = array[i];
        j++;
    }
    // Throw the remaining and put them at the end.
    for (int i = 0; i < lowestIndex; i++) {
        rearrangedPoints[j] = array[i];
        j++;
    }
    // End the array with the repeated first point. 
    rearrangedPoints[array.length - 1] = array[lowestIndex];
    return rearrangedPoints;
}

public static void main(String[] args) throws Exception {
    Scanner sc = new Scanner(System.in);
    Main convexHullFinder = new Main();
    int numDataSets = sc.nextInt();
    System.out.println(numDataSets);
    for (int z = 0; z < numDataSets; z++) {
        int numPoints = sc.nextInt();
        Vector<Point> points = new Vector<Point>();
        // Read in all the points for this set. 
        points.add(new Point(sc.nextInt(), sc.nextInt()));
        int j = 1;
        for (int i = 1; i < numPoints; i++) {
            Point p = new Point(sc.nextInt(), sc.nextInt());
            // Remove repeated points. 
            if (p.x < 0 || p.y < 0) {
                throw new Exception();
            }
            if ( (p.x == points.elementAt(j-1).x) && (p.y == points.elementAt(j-1).y) ) {}
            else {
                points.add(p);
                j++;
            }
        }
        Point[] reducedPoints = points.toArray(new Point[points.size()]);

        // Rearrange the set to start and end on the lowest Y point. 
        reducedPoints = moveLowestToFront(reducedPoints);

        if (numPoints >= 3) {
            convexHullFinder.handlePoints(reducedPoints);
        }
        else {
            throw new Exception();
        }

        try { 
            System.out.println(sc.nextInt());
        }
        catch (Exception e) {

        }
    }
}
}

class Point {
public int x;
public int y;

public Point(int x, int y) {
    this.x = x;
    this.y = y;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:46:49.653

从它的声音来看，这些点是按照格雷厄姆扫描进行排序的。因此，我认为你的堆栈操作（handlePoints）可能是不对的。

我更习惯安德鲁的算法（格雷厄姆扫描的修改），但我相当确定你不应该在 while 循环的内部和外部向凸包添加点。原因是我相当确定无论使用哪种算法，while 循环的目的都是一样的。它是从凸包中删除无效点。但是，您有可能在 while 循环期间添加点。

我不确定这就是所有需要解决的问题，但我目前没有设置任何东西来运行 Java。

# jquery - 如何在 Ajax 请求中添加自定义标头以进行跨域 JsonP 调用

> ID：13927610
> 
> 赞同：1
> 
> 时间：2012-12-18T06:37:30.160
> 
> 标签：jquery, html, ajax, jsonp

谁能告诉我如何在jquery中使用ajax调用为跨域jsonp调用添加自定义标头。我正在使用ajax跨域调用在html页面中调用webservice。因为这是使用jsonp，现在我必须在标头中发送一些参数所以我如何设置标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T06:42:46.083

恐怕这是不可能的。jQuery 为 JSONP 使用`<script>`标签，如您所知，您不能使用此标签设置自定义标头。作为一种可能的解决方法，您可以在您的域上编写一个服务器端脚本，该脚本将充当您的域和远程域之间的桥梁。然后向您的脚本发送一个正常的 AJAX 请求，该脚本又会将调用委托给实际的 Web 服务。由于它是服务器到服务器的通信，您的脚本可以设置远程服务所需的任何 HTTP 请求标头。

# objective-c - 单元格显示在部分标题的顶部

> ID：13927616
> 
> 赞同：12
> 
> 时间：2012-12-18T06:38:02.257
> 
> 标签：objective-c, ios, uitableview

我有一个`UITableView`自定义单元格和自定义标题。当我在编辑时移动一个单元格时，它会弹出到标题视图中。如何将标题视图保持在所有单元格的顶部？

该应用程序使用情节提要，以防万一。

这是它的样子？[https://www.dropbox.com/s/wg8oiar0d9oytux/iOS%20SimulatorScreenSnapz003.mov](https://www.dropbox.com/s/wg8oiar0d9oytux/iOS%20SimulatorScreenSnapz003.mov)

这是我的代码：

```
[...]
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ListCell";
    ListCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    int handleSection = [self sectionToHandle:indexPath.section];

    switch (handleSection)
    {
        case PrivateLists:
        {
            if (tableView.isEditing && (indexPath.row == self.privateLists.count))
            {
                cell.textField.text = NSLocalizedString(@"Lägg till ny lista", nil);
                cell.textField.enabled = NO;
                cell.textField.userInteractionEnabled = NO;
                cell.accessoryType = UITableViewCellAccessoryNone;
                cell.editingAccessoryView.hidden = YES;
            }
            else
            {
                List *list = [self.privateLists objectAtIndex:indexPath.row];
                cell.textField.text = list.name;
                cell.textField.enabled = YES;
                cell.textField.userInteractionEnabled =YES;
                cell.backgroundColor = [UIColor clearColor];

                cell.onTextEntered = ^(NSString* enteredString){
                    list.name = enteredString;
                    UpdateListService *service = [[UpdateListService alloc]initServiceWithList:list];
                    [service updatelistOnCompletion:
                     ^(BOOL success){
                         DLog(@"Updated list");

                         NSIndexPath *newPath = [NSIndexPath indexPathForRow:0 inSection:indexPath.section];
                         [self.tableView moveRowAtIndexPath:indexPath toIndexPath:newPath];

                         [self moveListToTop:list.ListId newIndexPath:newPath];
                         justMovedWithoutSectionUpdate = YES;
                     }
                                                    onError:
                     ^(NSError *error){
                         [[ActivityIndicator sharedInstance] hide];
                         [[ErrorHandler sharedInstance]handleError:error fromSender:self];
                     }];
                };
            }
        }
            break;
        default:
            return 0;
            break;
    }

    return cell;
}

-(UIView *)tableView:(UITableView *)aTableView viewForHeaderInSection:(NSInteger)section
{
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 22)];

    UILabel *textLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, 300, 21)];
    [textLabel setFont:[[AXThemeManager sharedTheme]headerFontWithSize:15.0]];
    [textLabel setTextColor:[[AXThemeManager sharedTheme]highlightColor]];
    [textLabel setText:@"SECTION TITLE"];
    [textLabel setBackgroundColor:[UIColor clearColor]];

    UIImageView *backgroundView = [[UIImageView alloc]initWithImage:[AXThemeManager sharedTheme].tableviewSectionHeaderBackgroundImage];
    [backgroundView setFrame:view.frame];
    [view addSubview:backgroundView];
    [view sendSubviewToBack:backgroundView];
    [view addSubview:textLabel];

    return view;
}

- (float)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 22;
}

- (float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 44;
}
[...] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T21:51:20.557

好消息！我能够以两种不同的方式修复/解决您的问题（见下文）。

我会说这肯定是一个操作系统错误。您正在执行的操作会导致您已移动（使用`moveRowAtIndexPath:`）的单元格被放置在 z 顺序中标题单元格的上方（前面）。

我能够在 OS 5 和 6 中重现问题，使用有和没有 UITextFields 的单元格，以及 tableView 进入和退出编辑模式（我注意到在你的视频中它处于编辑模式）。即使您使用标准节标题也会发生这种情况。

**保罗**，你在你的评论之一中说：

> 我使用加载器解决了这个问题，并在执行 reloadData 时“锁定”了表

我不确定“使用加载器并锁定表”是什么意思，但我确实确定调用`reloadData`after`moveRowAtIndexPath:`确实可以解决问题。这不是你想做的事吗？

```
[self.tableView moveRowAtIndexPath:indexPath toIndexPath:newPath];
//[self.tableView reloadData];
// per reply by Umka, below, reloadSections works and is lighter than reloadData:
[self reloadSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationNone]; 
```

如果您不想这样做，这里有另一个解决方案，对我来说有点 hacky，但似乎运行良好（iOS 5+）：

```
__weak UITableViewCell* blockCell = cell;  // so we can refer to cell in the block below without a retain loop warning.
...
cell.onTextEntered = ^(NSString* sText)
{
    // move item in my model
    NSIndexPath *newPath = [NSIndexPath indexPathForRow:0 inSection:indexPath.section];
    [self.itemNames removeObjectAtIndex:indexPath.row];
    [self.itemNames insertObject:sText atIndex:0];

    // Then you can move cell to back
    [self.tableView moveRowAtIndexPath:indexPath toIndexPath:newPath];
    [self.tableView sendSubviewToBack:blockCell];  // a little hacky

    // OR per @Lombax, move header to front
    UIView *sectionView = [self.tableView headerViewForSection:indexPath.section];
    [self.tableView bringSubviewToFront:sectionView]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T16:09:52.563

这是一个错误。您可以通过在以下行之后添加来快速解决它：

```
[self.tableView moveRowAtIndexPath:indexPath toIndexPath:newPath]; 
```

这行：

```
UIView *sectionView = [self.tableView headerViewForSection:indexPath.section];
[self.tableView bringSubviewToFront:sectionView]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-30T22:28:00.293

不是解决方案，但您的代码有很多问题。谁知道如果你修复它们会发生什么;）

(1) 您的单元格在此行之后可能为零：

ListCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

它应该如下所示：

```
ListCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
                cell = [[[ListCell alloc] initWithStyle:style
                                                    reuseIdentifier:cellIdentifier] autorelease];
} 
```

(2) -(UIView *)tableView:(UITableView *)aTableView viewForHeaderInSection:(NSInteger)section 中的两个内存泄漏

->>修复（当您将标签添加为子视图时，它会获得 +1 参考）。

```
UILabel *textLabel = [[[UILabel alloc] initWithFrame:CGRectMake(10, 0, 300, 21)] autorelease]; 
```

->>修复（当您将视图添加为子视图时，它会获得 +1 参考）。

```
UIImageView *backgroundView = [[[UIImageView alloc]initWithImage:[AXThemeManager sharedTheme].tableviewSectionHeaderBackgroundImage] autorelease]; 
```

(3) 不是缺陷，但这可能会对您有所帮助。尝试使用它而不是 [table reloadData]。它可以很好地为事物制作动画，并且不是更新表格的硬核方式。我敢肯定它要轻得多。或者尝试寻找其他“更新”方法。鉴于您没有删除示例中的行，因此 [updateRowsFrom:idxFrom to:idxTo] 之类的内容会有所帮助。

```
[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0]
                              withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-10T11:58:34.127

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {

  float  heightForHeader = 40.0;
    if (scrollView.contentOffset.y<=heightForHeader&&scrollView.contentOffset.y>=0) {
        scrollView.contentInset = UIEdgeInsetsMake(-scrollView.contentOffset.y, 0, 0, 0);
    } else if (scrollView.contentOffset.y>=heightForHeader) {
        scrollView.contentInset = UIEdgeInsetsMake(-heightForHeader, 0, 0, 0);
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-23T22:11:41.277

我为解决这个问题所做的就是在节标题中设置视图的 zPosition。

```
headerView.layer.zPosition = 1000 //just set a bigger number, it will show on top of all other cells. 
```

# jquery - jQuery Mobile listview 缩略图图像对齐

> ID：13927624
> 
> 赞同：0
> 
> 时间：2012-12-18T06:38:50.890
> 
> 标签：jquery, css, jquery-mobile

嗨，我添加了一个带有缩略图的列表视图

使用

```
<ul data-role="listview" data-inset="false" data-theme="a" data-dividertheme="d">
<li><a href="image.php?imgid=2">  
    <img src="../images/comma.png" class="ui-li-thumb" />  
    <h3 class="ui-li-heading">Colleeeeeeeeeeeeege</h3>  
    <p class="ui-li-desc">by Scott Hill</p></a></li> 
</ul> 
```

并获取图像但**不在中心如何将其放入缩略图区域**

在这里看图片

![在此处输入图像描述](../Images/c977c143d64075df8dd33409f897e7f5.png)

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:19:44.907

我遇到过同样的问题。我添加了以下事件来设置所需的顶部填充。

```
$("img[class='ui-li-thumb']").load(function() {
    $(this).css('padding-top',((80-this.height)/2));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:13:53.170

如果您已固定列表视图中每个列表的高度，那么您可以为 img 标签提供 margin-top 并进行调整以使其居中

```
<style>
.listex{
height:50px;
}
 .ui-li-thumb{
   margin-top:10px;
 }
</style>
<ul data-role="listview" data-inset="false" data-theme="a" data-dividertheme="d">
   <li class="listex"><a href="image.php?imgid=2">  
       <img src="../images/comma.png" class="ui-li-thumb" />  
       <h3 class="ui-li-heading">Colleeeeeeeeeeeeege</h3>  
       <p class="ui-li-desc">by Scott Hill</p></a>
   </li> 
</ul> 
```

您应该相应地设置 height 和 margin-top 的值。

# java - Android 应用程序计算自己的 MD5 校验和

> ID：13927627
> 
> 赞同：6
> 
> 时间：2012-12-18T06:39:05.920
> 
> 标签：java, android, md5, checksum

android 应用程序在安装后如何计算自己的 md5 校验和？尝试谷歌搜索，但所有结果都是关于另一个应用程序计算其他人的校验和。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T06:41:49.230

那会有什么用？为了与某些东西进行比较，预期的校验和需要在 APK 中。但是，如果有人更改了您的 APK（重新打包等），他们也可以轻松更改预期值。您可以从服务器上获取它，但如果它们弄乱了您的包，也可以禁用它。

此外，一些工具会直接修补 Dalvik 缓存中的代码，从而改变您的应用程序所做的事情，而无需接触 APK。

通常，您只需获取 APK 的路径，读取为二进制文件并使用`MessageDigest`. 您可以使用`PackageManager`获取应用程序信息，然后[ApplicationInfo#sourceDir](http://developer.android.com/reference/android/content/pm/ApplicationInfo.html#sourceDir)为您提供包的位置。顺便说一句，这可能不适用于 JB（4.1 及更高版本）上的付费应用程序，因为您无权读取实际 APK（这是​​“前向锁定”的结果，也称为“应用程序加密”）。

# validation - Mongoid：ActiveModel 数值验证，allow_nil 不起作用

> ID：13927637
> 
> 赞同：1
> 
> 时间：2012-12-18T06:40:19.570
> 
> 标签：validation, mongoid, null, activemodel

我已经定义了一个带有 Integer 字段的**Mongoid 模型**，我像这样验证数值

```
# source.rb
class Source
 field :code, type: Integer
 validates_numericality_of :code, allow_nil: true 
```

allow_nil 的目的是验证存在的字段并忽略 nil 值。

但是在这里，allow_nil 完全绕过了数值检查

```
object = Source.new
object.code = "ABC"
object.valid?
=> true
object
=> #<Source _id: 50d00b2d81ee9eae46000001, _type: nil, code: 0> 
```

在activerecord中，这可以正常工作

```
object = Source.new
object.code = "ABC"
object.valid?
=> false
object
=> #<Source id: nil, code: 0, created_at: nil, updated_at: nil>
object.save
(0.1ms)  begin transaction
(0.1ms)  rollback transaction
 => false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:49:49.033

使用#valid 时，Mongoid 的行为与 Active Record 略有不同？在已经持久化的数据上。Active Record 的#valid？将运行所有验证，而 Mongoid 的 #valid? 将仅在数据已更改的字段上运行验证作为优化。-[见 mongoid 验证](http://mongoid.org/en/mongoid/docs/validation.html)

所以这可能是你的问题。

你可以试试

`validates_numericality_of :code, :allow_nil => true`

和

`validates :code, :numericality => true ,:allow_nil => true`

# ruby-on-rails - Rails - 如何从模型创建数据库表（我没有迁移脚本）

> ID：13927640
> 
> 赞同：2
> 
> 时间：2012-12-18T06:40:26.980
> 
> 标签：ruby-on-rails, ruby, rake

我是 Rails 的新手，它是一个很棒的平台。

我创建了一个应用程序，但删除了所有迁移脚本。

我想用现有模型中的表创建数据库。

我在网上找不到它，我确信这可能是像任何其他平台（java hibernate 等）一样的选项

命令rails生成......只创建没有列的表，但我在现有模型中有列。那我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T06:52:24.257

如果您不小心清理了模型并且没有任何迁移，您仍然可以`db/schema.rb`通过运行`rake db:migrate`和使用它来生成文件。无论您对它做了什么，它都应该反映数据库的当前状态。

如果您在其中创建包含重要部分的迁移，您会注意到格式非常相似，您将能够在其他系统上复制该配置。

不过，这有点笨拙。每个模型都应该有其相关的迁移。通常，这些永远不会被删除，只有在绝对必要时才进行修改，从而保留模式如何演变为其最终状态的历史。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T06:55:38.667

如果我正确理解了您的问题，那么确实没有办法从您的 ActiveRecord 模型类构建数据库表 - 最好将 ActiveRecord 模型更多地视为不同风格的关系数据库和 Ruby 对象之间的映射。换句话说，ActiveRecord 模型抽象出数据库的细节，以便独立于数据库。它们使您的数据库数据更容易在 Ruby 中访问。在这样做时，他们没有能力构建您的表格。将它们视为非常漂亮的 getter 和 setter，而不是绑定到数据库。

这正是迁移存在的原因——它们包含特定于数据库的内容。它们本质上包含模型定义的“另一半”——大多数应用程序级别的东西（比如关系，在 MySQL 中不存在，对吧？它们是 ActiveRecord 约定）是在您的模型上定义的，但是，例如，如果你想在你的 Foo 模型上有一个字符串，你可以在你的*migration*中定义它，并且你的模型上将有适当的 getter 和 setter 供你使用这个字符串。

tl;博士：你需要你的迁移。它们存在于 Rails 中的事实是有意的设计决定，将 Ruby 模型的一半与数据库的一半分开。

# django - 如何给出模板目录的路径

> ID：13927643
> 
> 赞同：1
> 
> 时间：2012-12-18T06:40:41.087
> 
> 标签：django, django-templates, django-admin

我的模板无法识别，我收到以下错误。

```
os.path.dirname(__file__)+'\\template' NameError: name 'os' is not defined 
```

我在设置中使用的代码是：

```
os.path.dirname(__file__)+'\\template' 
```

我现在该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:41:17.833

导入模块 os

```
import os 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T08:55:50.310

您可以在 Django第 99 页[权威指南中](https://rads.stackoverflow.com/amzn/click/com/B004VJ46OM)看到相关知识 ：

```
import os.path

TEMPLATE_DIRS =(os.path.join(os.path.dirname(__file__),'templates').replace('\\','/'),) 
```

哪里解释了它是如何工作的

> 这个例子使用了“神奇”的 Python 变量**文件**，它被自动设置为代码所在的 Python 模块的文件名。它获取包含 settings.py (os.path.dirname) 的目录的名称，以跨平台方式将其与模板连接 (os.path.join)，然后确保所有内容都使用正斜杠而不是反斜杠（在Windows 的情况）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:29:44.593

os 模块丢失 你已经使用它没有导入

在你的 settings.py 中添加这个

```
import os
TEMPLATE_DIRS = (os.path.join(os.path.dirname(__file__), 'templates'),) 
```

并将所有模板放在项目中的模板文件夹下

你可以在windows（“C：/your_project/../templates”）中使用像linux（/home/your_project/../templates）这样的绝对路径，但这不是一个好习惯

# php - 用于输出数据的 PHP 表

> ID：13927644
> 
> 赞同：0
> 
> 时间：2012-12-18T06:40:47.197
> 
> 标签：php, mysql

我想在循环一些数据后询问在 php 中输出一个表。以前，我总是将数据循环到水平或垂直的表格中。但是现在，我想把这个循环数据水平和垂直地放到一个表中，所以结果可能是这样的：

```
data1 | data2 | data3 | data4

data5 | data6 | data7 | data8 
```

并且仍然如此，直到循环结束。所以我从我的表中获取了 1 个数据并像这样放置它。

我现在的代码是：

```
<?php 
require ('server.php');
$query = mysql_query("SELECT * FROM ekskul");
if (mysql_num_rows($query) < 1) {
    echo "No data.";
} else {
    $i = 0;
    while ($roweks = mysql_fetch_array($query)) {
        echo '<tr class="dark">';
        echo "<td>$roweks[nama]</td>";
        if ($i % 4 == 0) {
            echo "</tr>";
        }
        $i += 1;
    }
}
?> 
```

我没有得到关于水平抛出结果的逻辑，因为我得到的总是垂直的：

```
data1

data2

data3

...

datan 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:25:46.063

如果条件发生，则在 while 循环之前使用 tr 打开，然后关闭 tr 并打开新的 tr ..

```
<?php
    require ('server.php');
    $query = mysql_query("SELECT * FROM ekskul");
    if (mysql_num_rows($query) < 1) {
        echo "No data.";
    } else {
        $i = 1;
        echo "<table>";
        echo '<tr class="dark">';
        while ($roweks = mysql_fetch_array($query)) {

            echo "<td>".$roweks['nama']."</td>";
            if ($i % 4 == 0) {

                echo "</tr>";
                echo '<tr class="dark">';
            }
            $i += 1;
        }
    }
    echo "</table>";
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:49:49.607

这个怎么样

```
<?php 
require ('server.php');
$query = mysql_query("SELECT * FROM ekskul");
if (mysql_num_rows($query) < 1) {
    echo "No data.";
} else {
    $i = 0;
    echo '<table>';
    while ($roweks = mysql_fetch_array($query)) {
        echo '<tr class="dark">';
                echo "<td>$roweks[nama]</td>";
            if ($i % 4 == 0) {
            echo "</tr>";
        }
        $i += 1;
    }
echo '</table>';
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:50:16.563

它应该是那么容易。

```
<table>
    <tr>
    <?
    $i = 1;
    while ($roweks = mysql_fetch_array($query)) {
        echo "<td>$roweks[nama]</td>";
        if ($i == 4 ) {
            echo "</tr><tr>";
            $i = 1;
        }else{
            $i += 1;
        }

    }
    ?>
    </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T06:52:34.690

您必须每 4 个项目创建一个新行，并跳过最后一个，因为项目数是 4 的倍数。

```
<?php 
    require ('server.php');
    $query = mysql_query("SELECT * FROM ekskul");
    $num_row = mysql_num_rows($query);

    if ($num_row < 1) {
        echo "No data.";
    } else {
        $i = 0;
        echo '<tr class="dark">';
        while($roweks = mysql_fetch_array($query))
        {
            $i++;
            echo "<td>$roweks[nama]</td>";
            if($i % 4 == 0 && $i != $num_row)
            {
                echo "</tr>";
                echo '<tr class="dark">';
            }                   
            $i++;
        }
        if ($i % 4 != 1) {
            echo "</tr>";
        }
    } 
```

# java - 如何在文本字段中获取日期

> ID：13927650
> 
> 赞同：0
> 
> 时间：2012-12-18T06:41:01.440
> 
> 标签：java, swing, date, jtextfield, jformattedtextfield

我是 Java 新手，在获取`Textfield`. 我想将用户输入的日期输入数据库。我尝试过使用`JCalender`，但它不起作用，因为我未能配置调色板。除了 有没有其他选择`JCalender`？提前致谢。

这是我到目前为止所拥有的：

```
// Delivery Date Action

              tf3.addKeyListener(new KeyAdapter() {
    public void keyTyped(KeyEvent e) {
      char c = e.getKeyChar();
      if (!((c >= '0') && (c <= '9') ||
         (c == KeyEvent.VK_BACK_SPACE) ||
         (c == KeyEvent.VK_DELETE) || (c == KeyEvent.VK_SLASH)))        
      {
        JOptionPane.showMessageDialog(null, "Please Enter Valid");
        e.consume();
      }
    }
  });

        tf3.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
               int i = Integer.parseInt(tf3.getText());

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:51:00.037

也许您正在寻找 JFormattedTextField？

[http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:49:56.070

```
JFormattedTextField is a subclass of JTextField.

DateFormat df = new SimpleDateFormat("MM/dd/yyyy");
JFormattedTextField txtDate = new JFormattedTextField(df); 
```

您可以在其上添加验证事件

```
txtDate .addKeyListener(new KeyAdapter() {
    public void keyTyped(KeyEvent e) {
      char c = e.getKeyChar();
      if (!((c >= '0') && (c <= '9') ||
         (c == KeyEvent.VK_BACK_SPACE) ||
         (c == KeyEvent.VK_DELETE) || (c == KeyEvent.VK_SLASH)))        
      {
        JOptionPane.showMessageDialog(null, "Please Enter Valid");
        e.consume();
      }
    }
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:52:36.150

将 JFormattedTextField 与数据格式一起使用

看

[http://www.kodejava.org/examples/234.html](http://www.kodejava.org/examples/234.html)

和

[http://www.java2s.com/Tutorial/Java/0240__Swing/JFormattedTextFieldwithSimpleDateFormat.htm](http://www.java2s.com/Tutorial/Java/0240__Swing/JFormattedTextFieldwithSimpleDateFormat.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T06:46:54.053

您可以放置​​三个不同的下拉框来指定日、月和年。您无需检查其他验证。如果该月有 31 个日期，则闰年检查和订单日期 < 交货日期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-29T09:41:01.027

根据[Mohammod Hossain 的回答](https://stackoverflow.com/a/13927765/2821954)，我编写了这个简单的课程。我希望它可以帮助。

```
public class JDateTextField extends JFormattedTextField{

private final String format;
private final char datesep;
private Component pare = null;

/**
 * Establece el componente padre para los mensajes de dialogo.
 * <p>
 * @param pare
 */
public void setPare(Component pare) {
    this.pare = pare;
}

public JDateTextField(final String format) {
    super(new SimpleDateFormat(format));
    this.format = format;
    setColumns(format.length());
    //if(format.contains("-")) datesep=KeyEvent.VK_MINUS;
    //else
    if (format.contains("/")) {
        datesep = KeyEvent.VK_SLASH;
    } else {
        datesep = KeyEvent.VK_MINUS;
    }

    addFocusListener(new FocusAdapter() {
        @Override
        public void focusLost(FocusEvent e) {
            try {
                Date date = getDate();
            } catch(ParseException ex) {
                showError("Por favor introduzca una fecha válida.");
            }
        }
    });
    addKeyListener(new KeyAdapter() {
        @Override
        public void keyTyped(KeyEvent e) {
            char c = e.getKeyChar();
            String s = "" + c;
            if (s.matches("|[a-z]|i")){
                showError("Carácter no válido detectado " + s);
                e.consume();
            } else if(!((c >= '0') && (c <= '9')
                    ||(c == KeyEvent.VK_BACK_SPACE)
                    ||(c == KeyEvent.VK_DELETE)
                    ||(c == datesep)||(c == KeyEvent.VK_COLON))){
                showError("Carácter no válido detectado " + c);
                e.consume();
            }
            /*
             * else{
             * try{
             * Date date=getDate();
             * }catch(ParseException ex){
             * showError("Por favor introduzca una fecha válida.");
             * }
             * }
             */
        }
    });
    setValue(new Date());
}

private void showError(String error) {
    JOptionPane.showMessageDialog(pare, error + "\n\tEl patrón válido es: " + format, "Fecha NO válida", JOptionPane.ERROR_MESSAGE);
}

public Date getDate() throws ParseException {
    SimpleDateFormat frt = new SimpleDateFormat(format);
    return frt.parse(getText());
} 
```

}

# javascript - 创建模型时的主干无限循环

> ID：13927656
> 
> 赞同：1
> 
> 时间：2012-12-18T06:41:30.290
> 
> 标签：javascript, backbone.js, infinite-loop

我认为我正在做一些非常标准的事情。

模型：

```
 app.model.Todo = Backbone.Model.extend({
    defaults: {
        task: ''
        , completed: 0
        , attachments: []
        , note: ''
    }
}); 
```

收藏：

```
 var Todos = Backbone.Collection.extend({
    model: app.model.Todo

    , localStorage: new Store('Todos')

    , incomplete: function () {
        return this.filter(function (todo) {
            return !todo.get('completed')
        });
    }

    , complete: function () {
        return this.filter(function (todo) {
            return todo.get('completed')
        });
    }

    , comparator: function(todo) {
        return todo.get('order');
    }
});

app.collection.Todos = new Todos(); 
```

然后，如果我这样做：

```
app.collection.Todos.create({task: 'hi'});
app.collection.Todos.create({task: 'hi'}); 
```

第二个永远不起作用。我得到一个无限循环（Firefox 上的递归太多，Chrome 上的 stack_overflow 太多）。

我真的很茫然。我也注释掉了所有事件。

似乎它在主干中失控：

```
// Return a copy of the model's `attributes` object.
toJSON: function(options) {
    return _.clone(this.attributes);
}, 
```

更新：如果我`id: 0`向模型添加或任何 id，错误就会停止，但如果我给它一个自定义 ID（即`new Date().getTime()`错误再次发生。就像每当我创建一个独特的项目时它就会爆炸。

更新 2：

```
var todo = new gator.model.Todo({task: actionbarVal});
gator.collection.Todos.add(todo);
gator.collection.Todos.sync('create', todo); 
```

做上述有点工作，并且我需要它来工作，但这真的很糟糕。这很糟糕，因为每次我们执行新的添加和同步时，每次在此页面加载时调用添加和同步时，它都会调用 toJSON 1 次。因此，如果添加 3 个项目，您将获得 6 个 toJSON 调用（第一个调用 1 个，第二个调用 2 个，第三个调用 3 个）。而且，也不是很干净。我还注意到在`toJSON`主干的调用中`this.attributes`第一次是正确的。第二次就像 this.attributes == 骨干之类的。非常非常奇怪。它具有 Backbone 的所有方法。就好像克隆做了一个深度克隆什么的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:52:15.917

您的 Backbone (v0.9.9) 版本与 localstorage 插件版本不匹配。请务必从 Backbone 存储库获取最新版本的 localstorage 插件，它将解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T22:37:06.713

感谢 Derick Bailey，我最终通过恢复到 Backbone 的 0.9.2 来修复它。我尝试使用最新的 localStorage 插件似乎并没有解决它。也许我使用了不同的来源？我正在使用这个：

[https://github.com/jeromegn/Backbone.localStorage](https://github.com/jeromegn/Backbone.localStorage)

# javascript - 连接空/单项数组

> ID：13927657
> 
> 赞同：2
> 
> 时间：2012-12-18T06:41:38.427
> 
> 标签：javascript

好的，所以我有这个简单的代码：

```
for(var i=0; i<lines.length; i++) {
    elements += myFunction(lines[i]);
} 
```

where`elements`开头是一个空数组，`myFunction()`只是一个返回字符串数组的函数。

问题是，如果`myFunction()`返回一个包含单个字符串的数组，则将`+=`其解释为字符串 concat 来代替数组 concat。在循环结束时，结果只是一个长字符串，而不是一个数组。

我尝试`push()`用这些值代替串联，但这只是给了我一个带有单项数组的二维矩阵。

我该如何解决这个类型转换问题？先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:47:09.420

尝试 ：

```
 for(var i=0; i<lines.length; i++) {
        elements [i] = myFunction(lines[i]);
    } 
```

我想它可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:47:52.197

您可以使用数组`concat`功能：

```
elements = elements.concat(myFunction(lines[i])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:53:28.327

大概你想要类似的东西：

```
var arrs = [[0],[1,2],[3,4,5],[6]];
var result = [];

for (var i=0, iLen=arrs.length; i<iLen; i++) {
  result = result.concat(arrs[i]);
}

alert(result); // 0,1,2,3,4,5,6 
```

啊，你想连接一个函数的结果。相同的概念，请参阅其他答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T06:56:25.910

你也可以使用`myArray[myArray.length] = someValue;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-10T05:46:12.573

```
let newArray = [].concat(singleElementOrArray) 
```

# java - 春天的新手，无法使用休眠删除用户

> ID：13927660
> 
> 赞同：0
> 
> 时间：2012-12-18T06:41:52.830
> 
> 标签：java, spring, java-ee-6

我是春天的新手，正在研究一个例子。该示例显示了如何使用休眠将数据添加到表中并列出它，我尝试添加额外的删除选项，但它的更新记录改为。我将在下面发布完整的代码。( 2 ) 我使用 jsp 和 servlet 以及大量 jquery ajax 开发简单的 Web 应用程序，我也想将 ajax 与 spring 一起使用，我是否能够以相同的方式编写代码，或者我必须学习的不同的东西。坦率地说，看到弹簧图案后我很害怕.. :)。

调度程序-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

    <!--
    Most controllers will use the ControllerClassNameHandlerMapping above, but
    for the index controller we are using ParameterizableViewController, so we must
    define an explicit mapping for it.
    -->
    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="index.htm">indexController</prop>
            </props>
        </property>
    </bean>

    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp" />

    <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://localhost:3306/production"/>
        <property name="username" value="tpsl_admin"/>
        <property name="password" value="admin"/>
    </bean>

    <bean id="mySessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="myDataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.org.domain.User</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
            </props>
        </property>
    </bean>

    <bean id="myUserDAO" class="com.org.dao.UserDAOImpl">
        <property name="sessionFactory" ref="mySessionFactory"/>
    </bean>

    <bean name="/user/*.htm" class="com.org.web.UserController" >
        <property name="userDAO" ref="myUserDAO" />
    </bean>

    <!--
    The index controller.
    -->
    <bean name="indexController" class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          p:viewName="index" />

</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

用户DAO.java

```
package com.org.dao;
import com.org.domain.User;
import java.util.List;

public interface UserDAO {

    public void saveUser(User user) ;
    public List<User> listUser() ;
        public void deleteUser(User user) ;
} 
```

UserDAOImpl.java

```
package com.org.dao;
import com.org.domain.User;
import java.util.List;
import org.hibernate.SessionFactory;
import org.springframework.orm.hibernate3.HibernateTemplate;

public class UserDAOImpl implements UserDAO {

    private HibernateTemplate hibernateTemplate;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.hibernateTemplate = new HibernateTemplate(sessionFactory);
    }

    @Override
    public void saveUser(User user) {
        hibernateTemplate.saveOrUpdate(user);
    }

    @Override
    @SuppressWarnings("unchecked")
    public List<User> listUser() {
        return hibernateTemplate.find("from User");
    }

        @Override
    public void deleteUser(User user) {
        hibernateTemplate.delete(user);
    }
} 
```

用户.java

```
package com.org.domain;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="USER")
public class User {

    private Long id;
    private String name;
    private String password;
    private String gender;
    private String country;
    private String aboutYou;
    private String[] community;
    private Boolean mailingList;

    @Id
    @GeneratedValue
    @Column(name="USER_ID")
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @Column(name="USER_NAME")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    @Column(name="USER_PASSWORD")
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }

    @Column(name="USER_GENDER")
    public String getGender() {
        return gender;
    }
    public void setGender(String gender) {
        this.gender = gender;
    }

    @Column(name="USER_COUNTRY")
    public String getCountry() {
        return country;
    }
    public void setCountry(String country) {
        this.country = country;
    }

    @Column(name="USER_ABOUT_YOU")
    public String getAboutYou() {
        return aboutYou;
    }
    public void setAboutYou(String aboutYou) {
        this.aboutYou = aboutYou;
    }

    @Column(name="USER_COMMUNITY")
    public String[] getCommunity() {
        return community;
    }
    public void setCommunity(String[] community) {
        this.community = community;
    }

    @Column(name="USER_MAILING_LIST")
    public Boolean getMailingList() {
        return mailingList;
    }
    public void setMailingList(Boolean mailingList) {
        this.mailingList = mailingList;
    }

} 
```

用户控制器.java

```
package com.org.web;
import com.org.dao.UserDAO;
import com.org.domain.User;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.multiaction.MultiActionController;

public class UserController extends MultiActionController {

    private UserDAO userDAO;

    public void setUserDAO(UserDAO userDAO) {
        this.userDAO = userDAO;
    }
        @RequestMapping(params = "add", method = RequestMethod.POST)
    public ModelAndView add(HttpServletRequest request,
            HttpServletResponse response, User user) throws Exception {
        userDAO.saveUser(user);
        return new ModelAndView("redirect:list.htm");
    }
        @RequestMapping(params = "delete", method = RequestMethod.POST)
        @Transactional
        public ModelAndView delete(HttpServletRequest request,
            HttpServletResponse response, User user) throws Exception {
        userDAO.deleteUser(user);
        return new ModelAndView("redirect:list.htm");
    }

    public ModelAndView list(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        ModelMap modelMap = new ModelMap();
        modelMap.addAttribute("userList", userDAO.listUser());
        modelMap.addAttribute("user", new User());
        return new ModelAndView("userForm", modelMap);
    }
} 
```

好的，这就是代码的全部内容，我使用的 ide 是 netbeans，srinf ver 是 3.1.1。休眠 3.0。有人请告诉我我需要更改的地方，因为失败了 2 天我正在尝试。如果可能的话，还要解释我自己的代码我有很多疑问。

谢谢

用户窗体.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
.even {
    background-color: silver;
}
</style>
<title>Registration Page</title>
</head>
<body>

    <form:form action="add.htm" commandName="user" method="post">
    <table>

        <tr>
            <td>User Name :</td>
            <td><form:input path="name" /></td>
        </tr>
        <tr>
            <td>Password :</td>
            <td><form:password path="password" /></td>
        </tr>
        <tr>
            <td>Gender :</td>
            <td><form:radiobutton path="gender" value="M" label="M" /> 
                            <form:radiobutton path="gender" value="F" label="F" /></td>
        </tr>
        <tr>
            <td>Country :</td>
            <td><form:select path="country">
                <form:option value="0" label="Select" />
                <form:option value="India" label="India" />
                <form:option value="USA" label="USA" />
                <form:option value="UK" label="UK" />
            </form:select></td>
        </tr>
        <tr>
            <td>About you :</td>
            <td><form:textarea path="aboutYou" /></td>
        </tr>
        <tr>
            <td>Community :</td>
            <td><form:checkbox path="community" value="Spring" label="Spring" /> 
                            <form:checkbox path="community" value="Hibernate" label="Hibernate" />
                            <form:checkbox path="community" value="Struts" label="Struts" />
                        </td>
        </tr>
        <tr>
            <td></td>
            <td><form:checkbox path="mailingList" label="Would you like to join our mailinglist?" /></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit" name="add" value="Register"></td>
                        <td colspan="2"><input type="button" name="delete" value="Delete"></td>
        </tr>
    </table>
</form:form>
<c:if test="${fn:length(userList) > 0}">
    <table cellpadding="5">
        <tr class="even">
                        <th>ID</th>
            <th>Name</th>
            <th>Gender</th>
            <th>Country</th>
            <th>About You</th>
                        <th>Mailing List</th>
                        <th>Community</th>
        </tr>
        <c:forEach items="${userList}" var="user" varStatus="status">
            <tr class="<c:if test="${status.count % 2 == 0}">even</c:if>">
                                <td>${user.id}</td>
                <td>${user.name}</td>
                <td>${user.gender}</td>
                <td>${user.country}</td>
                <td>${user.aboutYou}</td>
                                <td>${user.mailingList}</td>
                                <td>${user.community}</td>
            </tr>
        </c:forEach>
    </table>
</c:if>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T05:33:45.533

在您的 dispatcherservlet.xml 中，请评论以下行

```
 <prop key="hibernate.hbm2ddl.auto">create</prop> 
```

每次重新启动服务器时，它都会在服务器启动时自动创建表。请正确检查映射以删除用户并设置打印或断点并调试问题，看到您的代码**hibernateTemplate.delete(user)**应该可以正常工作。

# c# - 如何从 .cs 文件列表中检索字符串的值？

> ID：13927663
> 
> 赞同：0
> 
> 时间：2012-12-18T06:41:57.680
> 
> 标签：c#, search

我有一个 .cs 文件列表，每个文件都包含一个字符串 commandID。我需要检索这个字符串的值。

如何在 C# 中实现这种搜索和检索值机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T06:47:34.473

```
 //Sample code to list all .cs files within a directory
    string[] filePaths = Directory.GetFiles(@"c:\MyDir\", "*.cs");

    // Sample code to read 1 file. 
    // Read each line of the file into a string array. Each element 
    // of the array is one line of the file. 
    string[] lines = System.IO.File.ReadAllLines(@"C:\Users\Public\TestFolder\file1.cs");

    // Display the file contents by using a foreach loop.
    foreach (string line in lines)
    {
        // INSERT YOUR SEARCH LOGIC HERE
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:51:38.100

终于得到了 ID :)
假设你找到了你想要的行，所以我从行中得到了 ID，如下所示：

```
string line = "while(i<10){CommandID = 15852; i+=1;}";
//I've put a complicated code in the string to make you sure
var rightSideOfAssignment = line.Split(new string[] {"CommandID"}, StringSplitOptions.RemoveEmptyEntries)[1];
int val = 0,temp;
bool hasAlreadyStartedFetchingNumbers= false;
foreach (char ch in rightSideOfAssignment)  //iterate each charachter
{
    if (int.TryParse(ch.ToString(), out temp)) //if ch is a number
    {
        foundFirstInteger = true;
        val *= 10;
        val += temp;
    }
    else
    {
        if (hasAlreadyStartedFetchingNumbers)
            break;
        //If you don't check this condition, it'll result to 158521
        //because after hitting `;` it won't stop searching
    }
}
MessageBox.Show(val.ToString()); //shows 15852 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:49:10.700

我假设，在您的项目中的 .Cs 文件中有一些名为 CommandId 的字符串，您正在尝试获取它的值，因为您不想手动转到每个文件并获取它的值。

遵循以下

1- 将所有 .CS 文件粘贴到单独的文件夹中。

2- 使用 FileSytem 获取该文件夹中的所有文件

3- 使用流阅读器获取 .cs 文件中的文本

4-将文件中的每一行与您要查找的文本进行比较。

5- 如果字符串匹配，则将其保存在 XML 或其他文本文件之类的位置。

6- 阅读下一个文件并返回第 3 步。

# java - 如何修剪 CKEditor 呈现的空格和新行？

> ID：13927666
> 
> 赞同：0
> 
> 时间：2012-12-18T06:42:36.797
> 
> 标签：java, html, ckeditor, trim, ckfinder

我正在使用[CKEditor](http://download.cksource.com/CKEditor/CKEditor/CKEditor%203.6.4/ckeditor_3.6.4.zip)（以及[CKFinder](http://download.cksource.com/CKFinder/CKFinder%20for%20Java/2.2.2/ckfinder_java_2.2.2.zip)）。在存储到数据库之前，我需要验证它呈现的内容。

如果 CKEditor 呈现的内容为空白，则应显示验证违规消息。这可以在服务器端轻松完成，但是如果用户**只**输入空格和换行符，则应将其删除，并且不应将违反验证规则的内容插入数据库。

由于 CKEditor 呈现 HTML，因此仅在服务器端使用（关于 Java）之类的函数是**不可能的。**`String.trim()`如果我只输入一些空格和换行符，那么呈现的 HTML 如下所示。

```
<p>            
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   
</p>

<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</p> 
```

它实际上代表了一些空格和换行符，它们不能通过简单地使用服务器端函数来修剪。那么在这种情况下执行验证的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T11:17:07.847

我是一个巨大的书呆子，并为此提出了一个小建议。基本上得到CKEditor的值，把它吐进一个一次性的DIV，用jQuery得到那个内容的长度，然后和0比较。

我制作了一个[jsfiddle](http://jsfiddle.net/UxMUZ/2/)示例，它同时为 CKFinder 和一次性使用 contenteditable DIV。这是JavaScript，我希望你明白。如果没有，请提出问题，我将尝试澄清我扭曲的代码。

```
$(function() {
    // this just keeps track of the contenteditable
    // replace with your submit or whatever event
    $('body').on('focus', '[contenteditable]', 
            function() {
                var $this = $(this);
                $this.data('before', $this.html());
                return $this;
            }).on('blur keyup paste', '[contenteditable]', function() {
                var $this = $(this);
                if ($this.data('before') !== $this.html()) {
                    $this.data('before', $this.html());
                    $this.trigger('change');
                }
                return $this;
            });
    $('body').on('change', function() {
       validate();
    });

    // This actually validates the string as 0-rendering or not.
    function validate() {

        // Replace this text getter with getting the CKE content
        // Then vomit it into a DIV like check and then get it again.
        // just keep #check invisible with CSS.
        var text = $('#check').text();
        var l = text.trim().length;

        // if length is 0, it renders as whitespace only
        // I show a message to whine about that
        if (l === 0) {
            $('#aaa').text("DOES NOT PASS");    
        }
        else {
             $('#aaa').text("PASS");   
        }   
    }
    validate();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-05T10:19:37.237

如果它返回 true，则只需将文本编辑器字符串传递给此方法，这意味着我们有没有实际文本内容的空字符串。

```
public boolean validateSpace(String str) {
        if (str != null) {
            String replaceStr = str.replace("&nbsp;", "").replace("<p>", "").replace("</p>", "").replace("<br>", "").replace("<br />", "");
            if (replaceStr == null || replaceStr.trim().isEmpty()) {
                return true;
            }
        }
        return false;
    } 
```

# regex - 如何在 perl 正则表达式中匹配换行符？

> ID：13927672
> 
> 赞同：5
> 
> 时间：2012-12-18T06:42:45.573
> 
> 标签：regex, perl, shell

我正在尝试解决如何使用 perl（来自 shell）来匹配换行符。下列的：

```
(echo a b c d e; echo f g h i j; echo l m n o p) | perl -pe 's/(c.*)/[$1]/' 
```

我明白了：

```
a b [c d e]
f g h i j
l m n o p 
```

这是我所期望的。但是当我`/s`在我的正则表达式末尾放置一个时，我得到了这个：

```
a b [c d e
]f g h i j
l m n o p 
```

我期望并希望它打印的是：

```
a b [c d e
f g h i j
l m n o p
] 
```

我的正则表达式有问题，还是我的 perl 调用标志有问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T07:01:50.650

`-p`逐行循环输入，其中“行”由`$/`输入记录分隔符分隔，默认情况下是换行符。如果您想将所有 STDIN 插入`$_`以进行匹配，请使用`-0777`.

```
$ echo "a b c d e\nf g h i j\nl m n o p" | perl -pe 's/(c.*)/[$1]/s'
a b [c d e
]f g h i j
l m n o p
$ echo "a b c d e\nf g h i j\nl m n o p" | perl -0777pe 's/(c.*)/[$1]/s'
a b [c d e
f g h i j
l m n o p
] 
```

有关这两个标志的信息，请参阅[perlrun 中的命令开关。](http://perldoc.perl.org/perlrun.html#Command-Switches)`-l`(dash-ell) 也很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:04:30.947

问题是你的单行一次只工作一行，你的正则表达式很好：

```
use strict;
use warnings;
use 5.014;

my $s = qq|a b c d e
f g h i j
l m n o p|;

$s =~ s/(c.*)/[$1]/s;

say $s; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T07:01:57.610

实际上你的单线看起来像这样：

```
while (<>) {

     $ =~ s/(c.*)/[$1]/s;
} 
```

这意味着正则表达式仅适用于您输入的第一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T19:47:09.157

有不止一种方法可以做到这一点：既然你正在阅读“一次整个文件”，我会亲自删除`-p`修饰符，明确地吞下整个输入，然后从那里开始：

```
echo -e "a b c d e\nf g h i j\nl m n o p" | perl -e '$/ = undef; $_ = <>; s/(c.*)/[$1]/s; print;' 
```

这个解决方案确实有更多的字符，但对于其他读者来说可能更容易理解（三个月后你将是;-D）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T12:26:50.460

你一次读一行，那么你认为它怎么可能匹配跨越多行的东西？

添加`-0777`以将“行”重新定义为“文件”（不要忘记添加 /s 以`.`匹配换行符）。

```
$ (echo a b c d e; echo f g h i j; echo l m n o p) | perl -0777pe's/(c.*)/[$1]/s'
a b [c d e
f g h i j
l m n o p
] 
```

# windows-8 - Windows 8 控制台任务命令窗口

> ID：13927673
> 
> 赞同：0
> 
> 时间：2012-12-18T06:42:52.973
> 
> 标签：windows-8, scheduled-tasks, console-application, command-window

我在 Windows 8 中有任务设置，每 5 分钟运行一次。这是一个控制台 exe 文件，如果手动运行，它会显示命令窗口，但当它通过任务调度程序运行时，它也会每 5 分钟显示一次命令窗口。Windows 8 上是否有任何我不知道隐藏命令窗口的设置。它从未在 Windows 7 中发生过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:04:42.513

好的，我找到了解决方案。将用户组更改为系统并选中以最高权限运行任务的复选框。

# c# - 将数据表转换为 PDF

> ID：13927675
> 
> 赞同：12
> 
> 时间：2012-12-18T06:42:55.863
> 
> 标签：c#, asp.net

我可以在 Asp.net Web 应用程序中获取将数据表转换为 pdf 的代码吗？我想要具有导出`datatable`到 `PDF`. 我找到[了这篇](http://www.aspsnippets.com/Articles/Export-DataSet-or-DataTable-to-Word-Excel-PDF-and-CSV-Formats.aspx)文章，但它`gridview`用于导出

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-18T06:53:04.487

使用 iTextSharp，你可以做到。它可以从互联网上下载，它是免费的。请找到下面的代码，

```
 public void ExportToPdf(DataTable dt,string strFilePath)
   {      
    Document document = new Document();
    PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(strFilePath, FileMode.Create));
    document.Open();
    iTextSharp.text.Font font5 = iTextSharp.text.FontFactory.GetFont(FontFactory.HELVETICA, 5);

    PdfPTable table = new PdfPTable(dt.Columns.Count);
    PdfPRow row = null;
    float[] widths = new float[dt.Columns.Count];
    for (int i = 0; i < dt.Columns.Count; i++)
        widths[i] = 4f;

    table.SetWidths(widths);

    table.WidthPercentage = 100;
    int iCol = 0;
    string colname = "";
    PdfPCell cell = new PdfPCell(new Phrase("Products"));

    cell.Colspan = dt.Columns.Count;

    foreach (DataColumn c in dt.Columns)
    {
        table.AddCell(new Phrase(c.ColumnName, font5));
    }

    foreach (DataRow r in dt.Rows)
    {
        if (dt.Rows.Count > 0)
        {
            for (int h = 0; h < dt.Columns.Count; h++)
            {
                table.AddCell(new Phrase(r[h].ToString(), font5));
            }
        }          
    }
    document.Add(table);
    document.Close();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T07:01:04.677

您不能将 a“**转换**”`DataTable`为 PDF 文档。但是您可以**将**数据作为普通内容插入其中。

This would have to be done through a data control, like the `GridView` or `ListView`; just like in a normal webpage. Which is why the [article](http://www.aspsnippets.com/Articles/Export-DataSet-or-DataTable-to-Word-Excel-PDF-and-CSV-Formats.aspx) you have linked to does that. `GridView` is probably the closest and easiest way to make it aesthetically appear the same as a `DataTable`. As it will just be stored as a normal table in the PDF Document.

Note that the `GridView` is created in memory - you don't create or need to have one in your HTML page. Try and experiment with the code to understand this better.

So I recommend following the [article](http://www.aspsnippets.com/Articles/Export-DataSet-or-DataTable-to-Word-Excel-PDF-and-CSV-Formats.aspx).

# e-commerce - 如何在magento中调整媒体图像的大小？

> ID：13927677
> 
> 赞同：2
> 
> 时间：2012-12-18T06:42:59.410
> 
> 标签：e-commerce, magento-1.7, magento-1.6, magento

我正在使用 magento 1.7 版本。我有一些产品图片。现在我想在详细页面中显示为滑块。我的代码如下：-

```
<?php if (count($_product->getMediaGalleryImages()) > 0): ?>  
<div class="more-views">

<div class="productsmallImage">
    <div id="slider2">
        <a class="buttons prev" href="javascript:;">left</a>
        <div class="viewport">                 
            <ul class="overview">            
                <?php foreach ($_product->getMediaGalleryImages() as $_image):?>
                <li>
                    <!--No lightbox on click of image-->
                  <a href="<?php echo $_image->getUrl();?>" title="<?php echo $_image->getName();?>" onclick="$('image').src = this.href; return false;">
                      <img src="<?php echo $_image->getUrl(); ?>" width="56" height="56" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" />
                  </a>
                </li>
                <?php endforeach; ?>
            </ul>
        </div>
        <a class="buttons next" href="javascript:;">right</a>
    </div>
</div> 
```

在此计数中（$_product->getMediaGalleryImages()) 的值为 4。所有图像都显示但需要调整它们的大小。请帮助执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:55:08.237

尝试对图像输出使用以下结构：

```
<img src="<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail', $_image->getFile())->resize(56) ?>" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-07T04:14:37.807

```
foreach ($_product->getMediaGalleryImages() as $image) { 
```

> 固定宽度为 600px

```
$image_Url = Mage::helper('catalog/image')
 ->init($_product, 'image')
->constrainOnly(TRUE)
->keepAspectRatio(TRUE)
->keepFrame(FALSE)
->resize(600,null)
?> 
```

> **固定高度为 600px**

```
$image_Url =  Mage::helper('catalog/image')
              ->init($_product, 'image')
               ->constrainOnly(TRUE)
               ->keepAspectRatio(TRUE)
               ->keepFrame(FALSE)
                ->resize(null,600) 
```

> **以下代码将按比例调整图像大小，并且不会让图像大于指定的高度和宽度。**

```
 $_image_Url = Mage::helper('catalog/image')
                          ->init($_product, 'image', $image->getFile())
                          ->keepFrame(true)
                          ->keepAspectRatio(TRUE)
                          ->constrainOnly(true)
                          ->resize(600,600);

<img src="<?php echo  $_imageUrl; ?>" alt="" class="normal"/>

} 
```

# c# - 根据 linq 投影中的某些标准计算字段

> ID：13927680
> 
> 赞同：0
> 
> 时间：2012-12-18T06:43:12.080
> 
> 标签：c#, linq, entity-framework

> **可能重复：**
> [linq case 语句](https://stackoverflow.com/questions/936028/linq-case-statement)

请考虑这种情况：

我有这样的功能：

```
private void MyFunction(byte Period)
{
    ... 
```

我在数据库中有一个这样的表：

```
...    F008    F009_1    F009_2    F009_3    F009_4    F009_5    F009_6    F009_7    F009_8  ...

------------------------------------------------------------------------------------------------- 
```

在函数体中我想做一些计算。

```
var MyCalculation = from r in ent.MyTable
                    group r by new { r.F000 } into grp
                    select new
                          {
                              F008 = grp.Sum(o => o.F008) 
                              F009 = ????? 
```

问题是`F009`我应该在 linq 投影中这样做：

```
switch(Period)
{ 
    case 1:
        F009 = (Sum of F009_1) + (Sum of F009_2);
        break;
    case 2:
        F009 = (Sum of F009_3) + (Sum of F009_4);
        break;
    case 3:
        F009 = (Sum of F009_5) + (Sum of F009_6);
        break;
    case 4:
        F009 = (Sum of F009_7) + (Sum of F009_8);
        break;
} 
```

我如何`switch case`在 linq 投影中使用它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:48:43.977

它应该像内联和连接查询的组合。请说出确切的场景或您写的查询。

您可以遵循的一种方法是，构建查询并编写 switch case 并将您的查询包含在其中.. 像，

```
case 1: var MyCalculation = from r in ent.MyTable
                    group r by new { r.F000 } into grp
                    select new
                          {
                              F008 = grp.Sum(o => o.F008) 
                              F009 =F009_1+F009_2,} 
```

` 像这种类似的方式可以完成..无论如何查询将执行一次，是最简单的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:04:33.310

```
var groupQuery = ent.MyTable.GroupBy(r => r.F0000 );
IEnumerable<Result> query;

switch(Period)
{ 
    case 1:
        query = groupQuery.Select(grp => new Result { 
              F008 = grp.Sum(r => r.F008),
              F009 = grp.Sum(r => r.F009_1 + r.F009_2)
           };
        break;
    case 2:
        query = groupQuery.Select(grp => new Result { 
              F008 = grp.Sum(r => r.F008),
              F009 = grp.Sum(r => r.F009_3 + r.F009_4)
           };
        break;
    case 3:
        query = groupQuery.Select(grp => new Result { 
              F008 = grp.Sum(r => r.F008),
              F009 = grp.Sum(r => r.F009_5 + r.F009_6)
           };
        break;
    case 4:
        query = groupQuery.Select(grp => new Result { 
              F008 = grp.Sum(r => r.F008),
              F009 = grp.Sum(r => r.F009_7 + r.F009_8)
           };
        break;
}

var MyCalculation = query.ToList(); 
```

还有你的 DTO：

```
public class Result
{
    // provide actual data types
     public int F008 { get; set; }
     public int F009 { get; set; }
} 
```

# php - 如何为 XPath 查询选择多个属性

> ID：13927683
> 
> 赞同：6
> 
> 时间：2012-12-18T06:43:14.390
> 
> 标签：php, html, xpath, domdocument, domxpath

> **可能重复：**
> [如何使用 XPath 在 XML 文档中选择多组属性？](https://stackoverflow.com/questions/303970/how-do-i-select-multiple-sets-of-attributes-within-an-xml-document-using-xpath)

我的 HTML 代码：

```
<table width="100%" cellpadding="6" cellspacing="0"> 
```

我想通过不仅指定宽度而且还指定单元格填充和单元格间距来选择此表。

我正在使用这个 PHP 代码：

```
$query = $xpath->query('//table[@width|@cellpadding|@cellspacing]'); 
```

但它仍然显示整个html源而不是我想要的..
请帮助我..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T09:44:07.273

似乎您不想选择属性，但请检查是否所有属性都存在。IE：

```
 $query = $xpath->query('//table[@width and @cellpadding and @cellspacing]'); 
```

或者，如果您特别想要表格，请检查某些值的属性？

```
 $query = $xpath->query('//table[@width = "100%" and @cellpadding = "6" and @cellspacing = "0"]'); 
```

# xml - 如何在子元素中具有父元素的xsd中定义元素

> ID：13927688
> 
> 赞同：3
> 
> 时间：2012-12-18T06:43:44.213
> 
> 标签：xml, xsd

如何在子元素中有父元素的xsd中定义元素？

这是一个例子：

```
<score seq="1" type="test" numeric="23">
    <option lbound="0" ubound="">
        <score seq="1" type="app" numeric="575">
            <option lbound="" ubound="0">0</option>
        </score>
    </option>
</score> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:43:50.723

像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="score">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="option">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="score">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="option">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:unsignedByte">
                            <xs:attribute name="lbound" type="xs:string" use="required" />
                            <xs:attribute name="ubound" type="xs:unsignedByte" use="required" />
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                  <xs:attribute name="seq" type="xs:unsignedByte" use="required" />
                  <xs:attribute name="type" type="xs:string" use="required" />
                  <xs:attribute name="numeric" type="xs:unsignedShort" use="required" />
                </xs:complexType>
              </xs:element>
            </xs:sequence>
            <xs:attribute name="lbound" type="xs:unsignedByte" use="required" />
            <xs:attribute name="ubound" type="xs:string" use="required" />
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attribute name="seq" type="xs:unsignedByte" use="required" />
      <xs:attribute name="type" type="xs:string" use="required" />
      <xs:attribute name="numeric" type="xs:unsignedByte" use="required" />
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:48:34.870

这是任何嵌套级别的选项...

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xs:element name="score">
        <xs:complexType>
            <xs:sequence>
                <xs:element minOccurs="0" maxOccurs="unbounded" ref="option"/>
                <xs:element minOccurs="0" maxOccurs="unbounded" ref="ignore"/>
            </xs:sequence>
            <xs:attribute name="numeric" use="optional" type="xs:integer"/>
            <xs:attribute name="seq" use="required" type="xs:integer"/>
            <xs:attribute name="type" use="required" type="xs:NCName"/>
        </xs:complexType>
    </xs:element>
    <xs:element name="option">
        <xs:complexType mixed="true">
            <xs:sequence>
                <xs:element minOccurs="0" maxOccurs="unbounded" ref="score"/>
            </xs:sequence>
            <xs:attribute name="id" use="optional"/>
            <xs:attribute name="lbound" use="optional"/>
            <xs:attribute name="ubound" use="optional"/>
        </xs:complexType>
    </xs:element>
    <xs:element name="ignore"/>
</xs:schema> 
```

这适用于您给出的两个示例：

**示例 1**

```
<score seq="1" type="test" numeric="23">
    <option lbound="0" ubound="">
        <score seq="1" type="app" numeric="575">
            <option lbound="" ubound="0">0</option>
        </score>
    </option>
</score> 
```

**示例 2**（来自评论）

```
<score seq="1" type="IN">
    <option id="1">10</option>
    <ignore/>
</score> 
```

# node.js - 如何将coffeescript编译到源码的父目录？

> ID：13927690
> 
> 赞同：0
> 
> 时间：2012-12-18T06:43:54.040
> 
> 标签：node.js, compiler-construction, coffeescript, cakefile

我刚刚进入咖啡因的世界，但在使用 Cakefiles 时遇到了一些麻烦。

据我了解，Cakefiles 使用的是咖啡脚本语法；如果我想在子目录中查找文件，我需要 require`fs`模块并做任何我需要做的事情，就好像我在 nodejs 应用程序中一样，对吗？而且我整个项目只需要一个 Cakefile，对吗？我是否需要对 package.json 或项目进行任何更改才能使用 Cakefile？

[话虽如此，当我在这个美味的 cakefile 教程](https://github.com/jashkenas/coffee-script/wiki/%5BHowTo%5D-Compiling-and-Setting-Up-Build-Tools)中查看一些示例时，我遇到了以下片段：

```
{exec} = require 'child_process'
task 'build', 'Build project from src/*.coffee to lib/*.js', ->
  exec 'coffee --compile --output lib/ src/', (err, stdout, stderr) ->
    throw err if err
    console.log stdout + stderr 
```

我想将我的咖啡脚本放在`/coffee`目录下，并且我希望它们`/`针对它找到的每个咖啡脚本进行编译。例如，如果它发现`routes/coffee/index.coffee`编译后的 js 应该输出为`routes/index.js`. 为了做到这一点，我尝试运行`$ coffee --output ../ .`，但由于它不起作用——尽管我认为值得一试——我尝试用 Cakefile 来做。

```
{exec} = require 'child_process'
task 'build', 'Build project from *.coffee to ../*.js', ->
  exec 'coffee --compile --output ../ .', (err, stdout, stderr) ->
    throw err if err
    console.log stdout + stderr 
```

这是上面代码段的修改版本。它也没有奏效。我正在尝试了解有关 cakefiles 的更多信息，以便我可以编写一个函数来记住 pwd 并进入一个目录，在编译咖啡脚本时将输出设置为该目录。

如果您能引导我找到可以帮助我找到解决方案的解决方案或来源，我将不胜感激。但是请记住，我不了解文档中的高级咖啡脚本内容......结果示例对我的开发技能更有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:01:51.867

我认为这里的主要区别是工作目录。

```
- root
-- lib
--- foo.js <- target
-- src
--- foo.coffee 
```

当您拥有该设置并从运行它时`root`，您可以运行`coffee --compile --output lib/ src/`它，因为`root/lib`并且`root/src`都可以从`root`.

```
- root
-- foo.js <- target
-- coffee
--- foo.coffee 
```

现在，从`root`您运行时`coffee --compile --output ../ ./`开始，您将输出目录设置为`root/..`，将输入目录设置为`root/.`（或简单地说`root`。）

这意味着，当您运行此命令时，`root`您只需：

```
coffee --compile --output ./ coffee/ 
```

或者如果你`cd coffee/`，那么这个：

```
cd coffee
coffee --compile --output ../ ./ 
```

应该可以正常工作。

# c# - 警告：找不到 dll

> ID：13927695
> 
> 赞同：5
> 
> 时间：2012-12-18T06:44:24.803
> 
> 标签：c#, sql, dll, version, fxcop

我有一个用**C#**编写的客户端程序，其中解决方案中的一个项目处理机器安装了**SQL 2005**的情况。

我已经添加了相关的 DLL，但我收到了警告：

`CA0060 : The indirectly-referenced assembly 'Microsoft.SqlServer.ManagedDTS, Version=9.0.242.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' could not be found. This assembly is not required for analysis, however, analysis results could be incomplete. This assembly was referenced by: d:\Any CPU\Bin\Debug\MyProgram.SSIS2005.dll.`

根据`Microsoft.SqlServer.ManagedDTS`它的版本属性是**9.0.3042.0**，我不明白为什么它**需要版本 9.0.242.0**。我不知道它是否相关，但版本`Microsoft.SQLServer.DTSRuntimeWrap`是9.0.242.0。

我尝试了什么？

*   删除和添加参考
*   手动更改 csproj 文件中所需的版本
*   我想过让所有的 dll 都具有相同的版本，但在网上没有找到这样的来源。

有任何想法吗？谢谢，公里

编辑：另一个细节，

*   我的目标框架是 .Net 4.0
*   我已将“useLegacyV2RuntimeActivationPolicy”设置为 true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:49:04.503

尝试从以下位置添加参考：

```
C:\Windows\assembly\GAC_MSIL\Microsoft.SqlServer.ManagedDTS 
```

并将 VS 中引用的本地副本设置为 true，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:46:38.193

据我所知，SQL CLR 目前与 .NET 4.0 不兼容，您应该尝试切换到 3.5，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-08T09:44:18.890

通过以下方式检查系统版本：

`C:\Windows\assembly\GAC_MSIL\Microsoft.SqlServer.ManagedDTS`

如果它们不同，请单击`Add reference`并按照链接添加相同的内容。

同样在`web.config`，在程序集标签下删除旧版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-10T15:38:26.100

正如@Mightymuke 在评论中提到的那样，[Fuslogvw.exe](https://docs.microsoft.com/en-us/dotnet/framework/tools/fuslogvw-exe-assembly-binding-log-viewer)显示加载了哪些 DLL。我的一个项目引用了 DLL，它引用了旧版本的`Microsoft.SqlServer.ManagedDTS`.

# vb.net - 在服务器上创建 Word 文档并提供客户端作为下载

> ID：13927696
> 
> 赞同：0
> 
> 时间：2012-12-18T06:44:37.283
> 
> 标签：vb.net, ms-word

嗨，我正在创建一个 Word 文档，例如：

```
 Dim oApp As Word.Application
    Dim oDoc As Word.Document

    oApp = CreateObject("Word.Application")

    oDoc = oApp.Documents.Add

    Dim rng As Word.Range = oDoc.Range(0, 0)
    rng.Font.Name = "Verdana"
    rng.Font.Size = 16

    .......
    ...............

    oApp.Visible = True

    oDoc = Nothing
    oApp = Nothing 
```

这在我的本地机器上完美运行。但是，如果我将我的代码放在网络服务器上，它当然不起作用。

我的问题是：我必须做的是，在服务器上创建 Word 文档并将创建的文档作为下载提供给客户端。

有人可以帮我吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:58:08.533

我认为您当前执行此操作的方式需要服务器上存在 Microsoft Word（或至少是 Interop 组件）以允许此操作。

也许更好的方法是动态创建 PDF 并将其提供给客户

或者[，这种](http://www.cosninix.com/wp/2010/04/generating-microsoft-office-documents-word-excel-on-your-webserver-using-php/)方法可能会奏效还是[这个](http://msdn.microsoft.com/en-us/library/office/bb735940%28v=office.12%29.aspx)？

编辑：

另请参阅[how-to-generate-word-documentdoc-docx-in-asp-net](https://stackoverflow.com/questions/1475471/how-to-generate-word-documentdoc-docx-in-asp-net)

编辑：

此代码段将允许您将文件流式传输到客户端

```
using (MemoryStream mem = new MemoryStream())
        {
            // Create Document
            using (<declare document>))
            {
               //create your document here

                // Stream it down to the browser

            Response.ContentType = "application/vnd.openxmlformats-officedocument.wordprocessingml.document";
            Response.AppendHeader("Content-Disposition", "attachment;filename=HelloWorld.docx");
            mem.Position = 0;
            mem.CopyTo(Response.OutputStream);
            Response.Flush();
            Response.End();
            }

        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-31T17:43:52.873

刚看到这个...

我设法让 Word 在服务器 (Apache) 上运行。您必须在可以运行 Word 的用户帐户下运行 Apache。此外，如果您使用 Office 32 位，则必须运行 Apache 32 位。一次只运行一个 Word 实例。但是，Word 可以同时打开多个文档。我开发了一个插件，放在 Word 的启动目录中，以便每个文档都可以使用它。在 AutoExec 宏中，我触发读取作业队列并生成文档的代码。所有这些都是使用 AJAX 和 PHP 从网络上运行的。

# iphone - 如何在按钮单击时加载 UIView

> ID：13927699
> 
> 赞同：3
> 
> 时间：2012-12-18T06:44:41.523
> 
> 标签：iphone, objective-c, xcode

我有`UIView`我正在使用的Seprate`UIViewController`最初加载但我希望当它加载时我再次单击按钮然后它应该重新加载因为它具有图形创建方法可以在视图加载时绘制图形

```
 #import <UIKit/UIKit.h> 
  #import "ECGraph.h"
  #import "ECGraphItem.h"
  #import "CereniaAppDelegate.h"
  @class GraphsViewController;
  @interface Display : UIView {

NSArray *percentages;
CereniaAppDelegate*appDelegate;
}
  @property(nonatomic,retain)NSArray*percentages;

  -(void) setPercentageArray:(NSArray*) array;
  @end 
```

实施文件

```
 #import "Display.h"
 #import "ECGraph.h"
 #import "CereniaAppDelegate.h"
 @implementation Display
 @synthesize percentages;
 - (id)initWithFrame:(CGRect)frame {
 self = [super initWithFrame:frame];
 if (self) {
  }
 return self;
 }

- (void)drawRect:(CGRect)rect {

 CGContextRef _context = UIGraphicsGetCurrentContext();

 ECGraph *graph = [[ECGraph alloc] initWithFrame:CGRectMake(70,-70,800,200) withContext:
                  _context isPortrait:NO];

    appDelegate=[[UIApplication sharedApplication]delegate];

ECGraphItem *item1 = [[ECGraphItem alloc] init];

ECGraphItem *item2 = [[ECGraphItem alloc] init];    

ECGraphItem *item3 = [[ECGraphItem alloc] init];
    item1.isPercentage = YES;

int value=(int)roundf(appDelegate.graphValueOne);
item1.yValue=value;
item1.width = 70;
item1.name = @"Unvaccinated horse"; 

int value1=(int)roundf(appDelegate.graphValueTwo);

item2.isPercentage = YES;
item2.yValue=value1;
item2.width = 70; 

item2.name = @"Annually Vaccinated horse";

int value3=(int)roundf(appDelegate.graphValueThree);
item3.isPercentage = YES;
item3.yValue=value3;

item3.width = 70;
item3.name = @"Semi-Annually vaccinated horse";

NSArray *items = [[NSArray alloc] initWithObjects:item1,item2,item3,nil];
[graph setXaxisTitle:@""];
[graph setYaxisTitle:@"Risk"];
[graph setDelegate:self];
[graph setBackgroundColor:[UIColor lightGrayColor]];
[graph drawHistogramWithItems:items lineWidth:2 color:[UIColor blackColor]];

    }
  -(void) setPercentageArray:(NSArray*) array

    {

percentages = array;

NSString*test=[percentages objectAtIndex:0];

NSLog(test);

     }

- (void)dealloc {
   [super dealloc];
    }

   @end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T06:56:21.037

您可以使用任何视图重绘

```
[view setNeedsDisplay]; 
```

因此，在您的刷新按钮上，您将更新 Display 类使用的数据，然后 setNeedsDisplay。

# c++ - 传递数组时没有匹配的调用函数

> ID：13927705
> 
> 赞同：1
> 
> 时间：2012-12-18T06:45:21.853
> 
> 标签：c++, parameters, constructor

在编写要传递一些参数的构造函数时出现错误。搜索了以前的线程，但我没有清除它。

这是我的代码：

```
#include<stdio.h>
#include<iostream>
#include<stdlib.h>

using namespace std;

int curr_state;
//int signal[3],trans_in[7],trans_fin[7],trans_sig[7];

class state_machine
{
        private :
                int start,end;
        public :
                state_machine(const int Q[],const int signals[],const int trans[][10][10],const int start,const int end);
//              int mystate();
                int run();
                int get_signal( );

                int get_state();
                int change_state();
};

state_machine::state_machine(const int Q[],const int signals[],const int trans[][10][10],const int start,const int end)
{
}     

int main(int argc, char * argv[])
{   
        state_machine s;
        int Q[5]={1,2,3,4,5};
        int signals[3]={0,1,2};
        int trans[][3][1]={{1,0,2},{1,1,0},{1,2,0},{2,0,3},{2,1,0},{2,2,0},{3,0,5},{3,1,4},{3,2,2},{4,0,2},{4,1,0},{4,2,0},{5,0,0},{5,1,0},{5,2,0}};
        int start=1,end=5;
        //s.state_machine(Q,signals,trans,start,end);
} 
```

获取输出为：

```
state_machine.cpp: In function ‘int main(int, char**)’:<br>
state_machine.cpp:27:16: error: no matching function for call to ‘state_machine::state_machine()’&lt;br>
state_machine.cpp:21:1: note: candidates are: state_machine::state_machine(const int*, const int*, const int (*)[10][10], int, int)<br>
state_machine.cpp:8:1: note:                 state_machine::state_machine(const state_machine&) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:03:13.413

的构造函数`state_machine`需要一个`int trans[][10][10]`. 这必须与`trans`main 中的数组类型匹配。

您必须将主要更改为

```
int main(int argc, char * argv[])
{
    int Q[5]={1,2,3,4,5};
    int signals[3]={0,1,2};
    int trans[][10][10]={{1,0,2},{1,1,0},{1,2,0},{2,0,3},{2,1,0},{2,2,0},{3,0,5},{3,1,4},{3,2,2},{4,0,2},{4,1,0},{4,2,0},{5,0,0},{5,1,0},{5,2,0}};
    int start=1,end=5;
    state_machine s(Q,signals,trans,start,end);
    return 0;
} 
```

虽然初始化列表`trans`不适合所需的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:46:57.563

您指定的 3D 数组大小需要**完全**匹配，但事实并非如此。正如错误所说的那样`const int (*)[10][10]`

如果`int trans[][3][1]`变成`int trans[][10][10]`这个错误会消失

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:56:40.413

首先，您无法创建`state_machine s;`没有可用参数的 ctor 主体。

其次，您需要将最后一行称为`state_machine s(Q,signals,trans,start,end);`

第三，为 ctor 传递的第三个参数不正确。对于 3d 数组，索引应该匹配。使`int trans[][3][1]`或`int trans[][10][10]`反之亦然。

# java - 从activeMQ获取所有队列

> ID：13927708
> 
> 赞同：1
> 
> 时间：2012-12-18T06:45:25.317
> 
> 标签：java, activemq

我是*activeMQ*的新手。我需要编写代码来获取所有队列并阅读消息。我没有找到像获取所有队列这样的 API。如何从*ActiveMQ*读取队列。如果可能的话，一些示例会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-16T09:45:54.817

在java中获取ActiveMQ中的所有队列。

**在pom.xml**中添加以下 Maven 依赖项

 **```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jms</artifactId>
    <version>4.3.2.RELEASE</version>
</dependency>  

<dependency>
    <groupId>org.apache.activemq</groupId>
    <artifactId>activemq-spring</artifactId>
    <version>5.14.0</version>
</dependency> 
```

您可以将运行 activemq 服务的**tcp://localhost:61616/**更改为**tcp://180.50.50.10:61616/ 。**

**Java 代码：**

```
try {
    ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616/");

    ActiveMQConnection connection = (ActiveMQConnection) connectionFactory.createConnection();
    DestinationSource ds = connection.getDestinationSource();

    connection.start();

    Set<ActiveMQQueue> queues = ds.getQueues();

    for (ActiveMQQueue activeMQQueue : queues) {
        try {
            System.out.println(activeMQQueue.getQueueName());
        } catch (JMSException e) {
            e.printStackTrace();
        }
    }
    connection.close();
} catch (Exception e) {
    e.printStackTrace();
} 
```

**控制台输出：**

```
HtmlQueue
emaildewsgmc
pdfdirectinpirepscli
pdfdirectinpirecli
InQueue
ReceiveQueue
NormalPriorityQueue
emaildirecthp
pdfdewsgmc
pdfdirecthp
Send2Recv
SaveQueue
LowPriorityQueue
emaildewshp
HighPriorityQueue
PdfQueue
AnotherDest
pdfdewshp
emaildirectgmc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:01:13.553

伙计，您已经在使用名为 activeMQ 的 API，您可以从该 API 获取所有队列。
我无法理解你所说的这部分问题
*我没有找到任何像 get Q* 这样的 api
无论如何你可以使用**[JMX](http://activemq.apache.org/jmx.html)**。最简单的方法是通过将 JMX 控制台或 JConsole 指向代理 JVM 来使用 JMX。
**以编程**方式您还可以通过[getDestinations()](http://activemq.apache.org/maven/5.5.0/activemq-core/apidocs/org/apache/activemq/broker/Broker.html#getDestinations%28%29)使用 Java 代码从代理获取所有活动目的地。您还可以通过 getDestinationMap() 获取由 ActiveMQDestination 索引的所有 Destination 对象的 Map。这使您可以查看各个目的地的详细信息，例如队列深度等

最后一种方法是使用**[WebConsole](http://activemq.apache.org/web-console.html).** ActiveMQ Web 控制台是一个基于 Web 的管理工具，用于使用 ActiveMQ。当与 JMX 支持一起使用时，它可以成为使用 ActiveMQ 的宝贵工具。
请[在他们的网站上关注 ActiveMQ 的详细支持，您可以在其中找到几乎所有内容](http://activemq.apache.org/index.html):)**

# jquery - 在页面加载时加载 div

> ID：13927709
> 
> 赞同：1
> 
> 时间：2012-12-18T06:45:38.250
> 
> 标签：jquery, ajax, struts2

我想在页面加载时加载一个动作。

我正在使用 struts2 和 jquery。

我想获取 commentOn 元素的所有评论。

对于页面加载，我将commentOn 值发送到fetchallcomments 动作加载的内容应该显示到div gameComments 中。

```
<script>
    $(document).ready(function() {
        $(".gameComments").load("fetchallcomments", {
            commentOn: '<s:property value="id"/>' 
        });
    });
</script>

<body>
  <div class="gameComments">
  </div>
</body> 
```

在 struts.xml 中

```
<action name="fetchallcomments" class="comment.action.commentAction" method="fetchAll">
        <result name="success">/pages/others/ajaxcomments.jsp</result>
        <result name="input">/pages/others/playGames.jsp</result>
        <result name="login">/pages/login.jsp</result>
    </action> 
```

在肌动蛋白类

```
public class commentAction extends ActionSupport {

private String commentOn;
private String comment;
private ArrayList commentList;
getter and setters;

private String fetchAll() {

System.out.println(" commentOn " + getCommentOn());
Map m = new HashMap();

m.put("commentOn", getCommentOn());
Map ab = cb.fetchAll(m);
    status = (String) ab.get("status");
    if (status.equalsIgnoreCase("success")) {
        setCommentList((ArrayList) ab.get("commentList"));
        return SUCCESS;
    } else {
        addActionError("Sorry not able to fetch");
        return INPUT;
    }

} 
```

}

在 ajaxcomments.jsp 中

```
<body>
    <s:iterator var="cat" value="CommentList">
         <s:property value="comment"/>
    </s:iterator>
<body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:24:55.110

你在做什么是错的。

```
$(document).ready(function() {
        $(".gameComments").load("file/path/to/the/file.php #divYouAreGonnaFetch",{
            commentOn: '<s:property value="id"/>' 
        });
    }); 
```

试试上面，让我知道。

```
.load( url [, data] [, complete(responseText, textStatus, XMLHttpRequest)] ) 
```

[阅读更多](http://api.jquery.com/load/)

# c# - 两个字符串数组的Fast count() 如何并集

> ID：13927712
> 
> 赞同：-1
> 
> 时间：2012-12-18T06:45:53.647
> 
> 标签：c#, optimization

在这个主题[快速 count() 两个字符串数组的交集中](https://stackoverflow.com/questions/13900514/fast-count-intersection-of-two-string-arrays)，*Some1.Kill.The.DJ*解释了一种非常快速的方法来计算两个字符串数组的交集。

这是 ：

```
HashSet<string> arr2Set = new HashSet<string>(arr2);
arr1.Where(x=>arr2Set.Contains(x)).Count(); 
```

同样的事情，Union 怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:40:07.327

老实说，这种方法不应该比原来的方法快，因为它本质上在幕后做同样的事情。

（编辑：在包含重复项目的情况下甚至不*正确*！它也不总是更快：我在短数组上尝试过，但在更长的数组上尝试过，但不是。）`arr1``arr2`

一个平行的`Union`可能是

```
HashSet<string> arr2Set = new HashSet<string>(arr2);
int unionSize = arr2Set.Count + arr1.Where(x=>arr2Set.Add(x)).Count(); 
```

但它真的应该和做没有什么不同

```
int unionSize = arr1.Union(arr2).Count(); 
```

如果您担心性能，[请先阅读此](http://ericlippert.com/2012/12/17/performance-rant/)内容。通过*尝试*这个版本并为这两个版本计时，你最终可能会得到更快的原始版本——我当然做到了。

# c# - 在日期中设置特定日期

> ID：13927715
> 
> 赞同：16
> 
> 时间：2012-12-18T06:46:04.210
> 
> 标签：c#, asp.net, ajax

我在 AjaxControlToolkit 中使用 Calender Extender Control。基本上有两个日期控件：`Start Date`和`End date`（都与日历扩展器相关联）。根据选择的开始日期，我在结束日期字段中填充日期，例如添加月数或天数。但是就像我已经能够添加月份一样，但也想设置该月的特定日期，这是我无法做到的。

示例：今天的日期是`18 Dec 2012`。就像每三个月的第 1 天，所以我加上 3 个月，这个月就出来了`Feb 2013`。但我想设置 Day `1st Feb 2013`。我做不到。请帮忙。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T06:56:44.007

您可以通过添加月份来设置月份中的任何一天。

```
DateTime todayDate = DateTime.Now;
DateTime after3MonthDate = todayDate.AddMonths(3);
//Set First Day of Month
after3MonthDate = new DateTime(after3MonthDate.Year, after3MonthDate.Month, 1); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-20T13:55:13.597

此代码可用于现有日期时间变量，以将日期部分设置为该月的第一天：

```
if(myDate.Day > 1)
{
    myDate = myDate.AddDays(-(myDate.Day - 1));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T07:00:31.440

试试这个：

```
// Here is the simple wrapper method to get the first day of the month:
public DateTime FirstDayOfMonthFromDateTime(DateTime dateTime)
{
   return new DateTime(dateTime.Year, dateTime.Month, 1);
}

// Set the due date...
DueDate.Text = (FirstDayOfMonthFromDateTime(DateTime.Parse(StartDate.Text).AddMonths(N))).ToShortDateString(); 
```

您还可以修改包装方法以获取一个月中的任何一天：

```
public DateTime DayOfMonthFromDateTime(DateTime dateTime, int day)
{
   return new DateTime(dateTime.Year, dateTime.Month, day);
} 
```

# asp.net-mvc - 带有斜体值的 CSV 文件

> ID：13927717
> 
> 赞同：0
> 
> 时间：2012-12-18T06:46:18.030
> 
> 标签：asp.net-mvc, c#-4.0, csv

有没有办法使用 c# 创建一个 csv 文件，当我们在 excel 中打开它时，它可以有/显示几个斜体格式的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:51:33.683

CSV 文件是一个文本文件，其中 Excel 只能将字段内容的类型解释为最佳（文本、数字、日期），但不能在字段内解释。所以简短的回答是否定的。

有一些可用于 ASP.NET MVC 环境的库，允许您创建真正的 Excel 文件，这样您就可以完全控制字段格式等。快速 Google 会找到这些。

**更新**

如果您使用的是 MVC，一个可能的解决方案是创建一个 HTML“文件”，然后下载它：

```
this.Response.AddHeader("Content-Disposition", "Employees.xls");
this.Response.ContentType = "application/vnd.ms-excel";
return this.Content(sb.ToString()); 
```

我从未尝试过，但已经看到它*可能会*起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:17:22.333

它只是不可能的。csv中没有标记。导出 xls(x) 或重新考虑您的问题/解决方案。为什么是 csv？它并不是真正适合人们阅读的。仅用于将数据从一个应用程序传输到另一个应用程序。

# android - view.getHitRect(rect) 不工作

> ID：13927718
> 
> 赞同：5
> 
> 时间：2012-12-18T06:46:18.703
> 
> 标签：android

`onInterceptTouch(MotionEvent)`为了允许水平滚动，我正在覆盖。然而，我发现我无法检测到用户何时触摸了嵌入的 v。视图上的 x、y 类似于 2000、2400，而视图上的 x、y`MotionEvent.getX(),getY()`类似于 400,500

```
View v = findViewById(R.id.myView);

Rect r = new Rect();
v.getHitRect(r);
int[] loc = new int[2];
v.gtLocationOnScreen(loc);

int x = loc[0];
int y = loc[1];

// Result x,y are huge numbers 2400, etc
// event.getX() is 30, event.getY() == 500 nothing close to 2400.

if (r.contains((int)event.getX(), (int)event.getY())
{
   return false;  // this is never true even when I click right on View v.
 } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-02-17T21:02:39.370

我知道这是一个老问题，大部分都在链接的帖子中得到了回答，但我刚刚遇到了这个问题，所以我想我会填写我的解决方案。

```
private boolean isTouchInView(View view, MotionEvent event) {
    Rect hitBox = new Rect();
    view.getGlobalVisibleRect(hitBox);
    return hitBox.contains((int) event.getRawX(), (int) event.getRawY());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T06:49:56.897

尝试使用`getRawX()`和`getRawY()`。这些将为您提供所需的绝对位置。

看：

[我如何知道 MotionEvent 是相对的还是绝对的？](https://stackoverflow.com/questions/1410885/how-do-i-know-if-a-motionevent-is-relative-or-absolute)

您还必须调整目标视图的位置，以解决其他视图的任何位移，如下所示：

```
int[] screenLocation = new int[2];
view.getLocationOnScreen(screenLocation);
hitRect.offset(screenLocation[0] - view.getLeft(), screenLocation[1] - view.getTop());

//Then check if source view is contained in target view

x=event.getRawX();
y=event.getRawY();

if (hitRect.contains(x, y)) {

//do your stuff

} 
```

# python - 使用 Beautiful Soup 从网站抓取数据并在 jinja2 中显示

> ID：13927719
> 
> 赞同：1
> 
> 时间：2012-12-18T06:46:51.477
> 
> 标签：python, google-app-engine, beautifulsoup, jinja2

我正在尝试使用 Beautiful Soup 从网站中提取数据列表：

```
class burger(webapp2.RequestHandler):
    Husam = urlopen('http://www.qaym.com/city/77/category/3/%D8%A7%D9%84%D8%AE%D8%A8%D8%B1/%D8%A8%D8%B1%D8%AC%D8%B1/').read()

    def get(self, soup = BeautifulSoup(Husam)):

        tago = soup.find_all("a", class_ = "bigger floatholder")
        for tag in tago:
        me2 = tag.get_text("\n")

        template_values = {
                           'me2': me2
                           }
        for template in template_values:

            template = jinja_environment.get_template('index.html')
            self.response.out.write(template.render(template_values)) 
```

现在，当我尝试使用 jinja2 在模板中显示数据时，它会根据列表的数量重复整个模板，并将每个信息放在一个模板中。

我如何将整个列表放在一个标签中并能够在不重复的情况下编辑其他标签？

```
<li>{{ me2}}</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T05:23:18.920

要输出条目列表，您可以在 jinja2 模板中循环它们，如下所示：

```
{%for entry in me2%}
  <li> {{entry}} </li>
{% endfor %} 
```

要使用它，您的 python 代码还必须将标签放入列表中。

像这样的东西应该工作：

```
 def get(self, soup=BeautifulSoup(Husam)):
      tago = soup.find_all("a", class_="bigger floatholder")

      # Create a list to store your entries
      values = []

      for tag in tago:
          me2 = tag.get_text("\n")
          # Append each tag to the list
          values.append(me2)

      template = jinja_environment.get_template('index.html')

      # Put the list of values into a dict entry for jinja2 to use
      template_values = {'me2': values}

      # Render the template with the dict that contains the list
      self.response.out.write(template.render(template_values)) 
```

参考：

*   [Jinja2 模板文档](http://jinja.pocoo.org/docs/templates)

# ios - 对象的潜在泄漏 - 调用函数“ABMultiValueCopyValueAtIndex”返回一个具有 +1 保留计数的 Core Foundation 对象

> ID：13927724
> 
> 赞同：1
> 
> 时间：2012-12-18T06:46:59.840
> 
> 标签：ios, xcode, memory-leaks, automatic-ref-counting

我在使用以下地址簿代码时遇到了这个问题（效果很好，但肯定会泄漏）：

```
ABMultiValueRef email = ABRecordCopyValue(person, property);
NSString *type = (__bridge NSString *)(ABMultiValueCopyValueAtIndex(email, 0));
self.textEmail.text = type;
CFRelease(email); 
```

我已经用 CFRelease(email) 语句修复了一个泄漏，但无法解决这个问题：

![在此处输入图像描述](../Images/30b4c2813095c2f865520b30d7270abf.png)

我不能调用 [type release] 因为这是一个 ARC 项目并且 CFRelease((CFTypeRef) type) 是不允许的。如何释放桥接实例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T07:09:44.650

将 __bridge 更改为 __bridge_transfer。这将使 type 成为引用的所有者，因此将在范围结束时自动释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T10:18:10.197

只需添加此方法，而不是 CFRelease(email);

如果（电子邮件）{ CFRelease（电子邮件）；}

# c# - 将列表中的元素转换为标题大小写？

> ID：13927725
> 
> 赞同：1
> 
> 时间：2012-12-18T06:47:04.630
> 
> 标签：c#, list, title-case

我正在尝试将所有列表项转换为 TitleCase。我认为 TitleCase 会很简单，但它似乎与大写或小写不一样。有任何想法吗？这适用于上下：

列表 myList = new List() { "abc", "DEF", "Def", "aBC" };

```
myList = myList.ConvertAll(x => x.ToUpper());
myList = myList.ConvertAll(x => x.ToLower()); 
```

但这些都不起作用：

```
myList = myList.ConvertAll(x => x.ToTitleCase());
myList = myList.ConvertAll(x => x.TitleCase()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T06:51:31.887

使用[TextInfo.ToTitleCase](http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.totitlecase.aspx)方法。

```
List<string> myList = new List<string>() { "abc", "DEF", "Def", "aBC" };
CultureInfo currentCulture =  System.Threading.Thread.CurrentThread.CurrentCulture;
myList = myList.Select(r=> currentCulture.TextInfo.ToTitleCase(r.ToLower())).ToList(); 
```

输出：

```
foreach (string str in myList)
    Console.WriteLine(str); 
```

结果：

```
Abc
Def
Def
Abc 
```

编辑：

你可以使用 ConvetAll 像：

```
myList =  myList.ConvertAll(r => currentCulture.TextInfo.ToTitleCase(r.ToLower())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:07:29.610

```
 class Program
    {
        static void Main(string[] args)
        {

            List<string> myList = new List<string>() { "abc", "DEF", "Def", "aBC" };

            CultureInfo currentCulture = System.Threading.Thread.CurrentThread.CurrentCulture;
            myList=myList.ConvertAll(r => currentCulture.TextInfo.ToTitleCase(r.ToLower()));
            int i=0;
            myList.ForEach(delegate(string k)
            {
                 Console.WriteLine(k);
                 i++;
            });
            Console.ReadLine();
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-02T17:16:58.980

是的，如果原始值是大写的，则必须降低。您可能还需要添加全球化命名空间。我在 DropDownList_DataBound 事件中使用了它。

```
CultureInfo currentCulture = System.Threading.Thread.CurrentThread.CurrentCulture;        
foreach (ListItem li in DropDownList.Items)
{
     li.Text = currentCulture.TextInfo.ToTitleCase(li.Text.ToLower());
} 
```

# php - smarty 与 DOMPDF 问题结果未导入 pdf 文件？

> ID：13927727
> 
> 赞同：1
> 
> 时间：2012-12-18T06:47:12.320
> 
> 标签：php, smarty, dompdf

我正在开发中。我必须从结果中创建一个 PDF 文件。请查看我的代码，PDF 已创建但为空。

**代码：**

```
case 'pre-test-pdf': 
    ob_start();
    require_once("includes/dompdf/dompdf_config.inc.php");     
    $smarty->display('default/content/pdf/pdf-view-pre-test.tpl');      
    $html = ob_get_contents();
    ob_clean();
    $dompdf = new DOMPDF();
    $dompdf->load_html($html);
    $dompdf->render();
    $dompdf->stream("sample.pdf");
 break; 
```

此页面的结果必须是 PDF

```
$smarty->display('default/content/pdf/pdf-view-pre-test.tpl'); 
```

期待尽快解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:44:04.447

你可以写 $html = $smarty->fetch('default/content/pdf/pdf-view-pre-test.tpl'); 这将为您的文件提供 html 布局，该布局存储在 $html 中，可用于创建 PDF。

# eclipse - Eclipse 中未解决的 Qt 包含问题

> ID：13927730
> 
> 赞同：4
> 
> 时间：2012-12-18T06:47:25.673
> 
> 标签：eclipse, qt, indexer

Eclipse 无法找到 Qt 包含。同样，它无法为 Qt 类提供自动完成功能。

我做了项目 -> 属性 -> 路径和符号 -> 包含 -> 添加到 Qt in 的包含目录`/usr/include/qt4/`。这导致 Eclipse 识别某些特定的类，例如`QString`；但是，没有自动完成功能。

我搜索了网络无济于事。如何将 Eclipse 索引 Qt 放入我的项目中？

编辑：2012 年 12 月 20 日

我已经解决了我自己的问题。似乎包含事项的顺序。我放

```
'usr/include/qt4'
'usr/include/qt4/Qt'
'usr/include/qt4/QtCore'
'usr/include/qt4/QtGui' 
```

进入`Project Properties -> C++ General -> Paths & Symbols`. 我重建并且自动完成工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:50:42.710

您需要添加几个包含目录，例如命令列出的目录

```
 pkg-config --cflags QtGui QtXml QtSvg QtDBus 
```

（和其他 Qt 包）。

# css - 如何在css3和jquery中为进度条添加边框

> ID：13927733
> 
> 赞同：2
> 
> 时间：2012-12-18T06:47:27.407
> 
> 标签：css, progress-bar, border

# 长话短说

使用来自 CSS 技巧的进度条代码。无法在进度条上添加边框而不使其看起来更糟。

# 很长的故事

[我在这里](http://css-tricks.com/css3-progress-bars/)使用了 CSS 技巧中的进度条码

我对原始代码进行了几处更改以获得看起来像这样的东西

[http://dl.dropbox.com/u/8743819/reducedtestcase/ProgressBars/custombar.html](http://dl.dropbox.com/u/8743819/reducedtestcase/ProgressBars/custombar.html)

# 我想要完成的

1.  仪表 > 跨度有梯度**（完成）**
2.  仪表和跨度紧密贴合，它们之间没有间距**（完成）**
3.  跨度具有不同颜色的 1 或 2 像素边框。

请注意，那些标记**（完成）**已完成。请在[此处](http://dl.dropbox.com/u/8743819/reducedtestcase/ProgressBars/custombar.html)查看演示。

# 我尝试并得到的结果

*   我尝试为仪表>跨度添加边框，但这导致跨度更大。
*   我尝试向仪表>跨度添加填充。相同的故事。
*   我尝试为仪表本身添加边距。然后看起来有间距。

# 我需要的

要求 1、2 和 3 才能工作。

# 常见问题

1.  这是您的完整应用程序吗？

不。我做了一个简化的测试用例，我去掉了尽可能多的不必要的代码来解释我的问题，而不会影响问题陈述。

# 披露

1.  [我在这里](http://css-tricks.com/forums/discussion/21212/how-to-add-border-to-progress-bar-done-in-css3-and-jquery#Item_1)的 css-tricks.com 上交叉发布了同样的问题，以引起对我的问题的更多关注。

# 最终解决方案

最终解决方案作为演示的一部分发布[在这里。](http://dl.dropbox.com/u/8743819/reducedtestcase/ProgressBars/custombarsolved.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:11:57.710

如果了解您的问题，您可以为此使用 CSS **box-sizing**属性。像这样写：

```
.meter > span{
 border:2px solid red;
 -moz-box-sizing:border-box;
 -webkit-box-sizing:border-box;
 box-sizing:border-box;
} 
```

有关更多信息，您可以阅读此[http://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:28:08.227

我尝试将 a 添加`border-width:2px`到跨度中，正如您提到的那样，它从 parent 延伸出来`div`。但如果你用高度来解释这一点，它看起来还不错。请看下文。

将父 div 高度设置为 24px`.meter {height:24px;}`

而不是 height 100% 将跨度高度设置为 20px`.meter > span {height:20px;}`

并修复宽度将父div填充设置为`.meter {padding: 0px 5px 0px 0px;}`

我确定这不是正确的方法，但看起来还不错。

**总之**

`.meter {height:24px; padding: 0px 5px 0px 0px;}`

`.meter > span {height:20px;}`

# javascript - 查找 asp 的函数：FileUpLoad 始终返回 null

> ID：13927743
> 
> 赞同：0
> 
> 时间：2012-12-18T06:48:07.860
> 
> 标签：javascript, asp.net, file-upload, find

我在 aspx 页面中创建了一个 Asp:FileUpload 控件，我尝试使用此代码从 Javascript 访问控件，

在 Aspx 页面中

```
<asp:FileUpload ID="fileUp" runat="server" /> 
```

在Javascript中

```
var vbsfileupload = $find("<%= fileUp.ClientID %>"); 
```

但 vbsfileupload 始终为空值。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:51:47.393

我不相信`$find`是一个功能。尝试使用选择元素`getElementById`：

```
var vbsfileupload = document.getElementById("#<%= fileUp.ClientID %>"); 
```

假设您在元素加载*后*运行这部分脚本，`vbsfileupload`现在应该保存所需的元素。

# javascript - 通过 node.js 发送 android 推送通知

> ID：13927744
> 
> 赞同：8
> 
> 时间：2012-12-18T06:48:12.743
> 
> 标签：javascript, node.js, google-cloud-messaging

我最近一直在尝试向我的 android 和 ios 设备发送推送通知。对于 ios，我发现 node-apn 模块将用于处理此问题，但对于 android，我还没有遇到过这种情况。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-22T10:50:54.317

还有另一种选择；[安卓-gcm](https://www.npmjs.com/package/android-gcm)。它非常易于使用。

文档中的代码示例：

```
var gcm = require('android-gcm');

// initialize new androidGcm object 
var gcmObject = new gcm.AndroidGcm('API_KEY');

// create new message 
var message = new gcm.Message({
    registration_ids: ['x', 'y', 'z'],
    data: {
        key1: 'key 1',
        key2: 'key 2'
    }
});

// send the message 
gcmObject.send(message, function(err, response) {}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:26:06.303

检查这些解决方案以获取更多信息。

[https://github.com/SpeCT/node-c2dm](https://github.com/SpeCT/node-c2dm)

[https://github.com/Instagram/node2dm](https://github.com/Instagram/node2dm)

[https://npmjs.org/package/pushover.net](https://npmjs.org/package/pushover.net)

# asp.net-mvc-3 - 将数据从 js 传递到控制器问题

> ID：13927745
> 
> 赞同：0
> 
> 时间：2012-12-18T06:48:20.810
> 
> 标签：asp.net-mvc-3, knockout.js

我正在传递视图模型数据以从 js 保存到控制器，例如

```
 $(function () {
    $.ajax({
        url: "/api/BranchSurvey/GetBranchLogicConditions?qId=" + questionId + "&isAdd=false",
        success: function (branchLogicdata) {
            BrSViewModel = ko.mapping.fromJS(branchLogicdata);

            $.ajax({
                url: "/api/BranchSurvey/BranchingLogicQuestion?questionId=" + questionId,
                success: function (branchLogicQuestion) {
                    BrSViewModel.Question = branchLogicQuestion;

                    ko.applyBindings(BrSViewModel, document.getElementById('mainDiv'));
               }
            });

        }
    });

    $("#btnSaveLogic").click(function () {
            debugger;
            $.ajax({
                url: "/api/BranchSurvey/SaveBranchLogicConditions",
                type: 'post',
                data: ko.toJSON(BrSViewModel),
                success: function (data) {
                    branchingSurveyPopupBody.empty();
                    branchingSurveyPopup.dialog('destroy');
                }
            });
            return false;
        });
}); 
```

在控制器中

```
public class BranchSurveyController : ApiController
    {
 [HttpPost]
        public void SaveBranchLogicConditions(BranchLogic objBranchSurvey)
        {

            string str = "<condition>";
            string qstText = "";
            int count = 0;
            foreach (BranchCondiotionXml oxml in objBranchSurvey.ListBranchXML)
            {
               ..... (something)
            }
      }
 } 
```

当我在浏览器中调试脚本时，我在 viewmodel 中获取值`BrSViewModel`。但是当它进入控制器时，所有数据都变空了。

我的实体是

```
public class BranchLogic
    {
        #region private members

        List<BranchCondiotionXml> lstBranchXML = new List<BranchCondiotionXml>();
        Question _question = new Question();
        string targetQuestionCondition = string.Empty;
        string thenTargetQuestion = string.Empty;
        string sucessQuestion = string.Empty;
        string thenTargetUrl = string.Empty;
        string elseTargetQuestionCondition = string.Empty;
        string elseTargetQuestion = string.Empty;
        string elseSuccessQuestion = string.Empty;
        string elseTargetUrl = string.Empty; 

        #endregion

        #region public members
        public List<BranchCondiotionXml> ListBranchXML
        {
            get { return lstBranchXML; }
            set { lstBranchXML = value; }
        }
        public Question Question
        {
            get { return _question; }
            set { _question = value; }
        }
        public string TargetQuestionCondition
        {
            get { return targetQuestionCondition; }
            set { targetQuestionCondition = value; }
        }

        public string ThenTargetQuestion
        {
            get { return thenTargetQuestion; }
            set { thenTargetQuestion = value; }
        }

        public string SucessQuestion
        {
            get { return sucessQuestion; }
            set { sucessQuestion = value; }
        }

        public string ThenTargetUrl
        {
            get { return thenTargetUrl; }
            set { thenTargetUrl = value; }
        }

        public string ElseTargetQuestionCondition
        {
            get { return elseTargetQuestionCondition; }
            set { elseTargetQuestionCondition = value; }
        }

        public string ElseTargetQuestion
        {
            get { return elseTargetQuestion; }
            set { elseTargetQuestion = value; }
        }

        public string ElseSuccessQuestion
        {
            get { return elseSuccessQuestion; }
            set { elseSuccessQuestion = value; }
        }

        public string ElseTargetUrl
        {
            get { return elseTargetUrl; }
            set { elseTargetUrl = value; }
        }
        #endregion

    } 
```

你能告诉我我在哪里做错了吗。提前致谢。

# android - 添加应用内计费库时出错

> ID：13927759
> 
> 赞同：39
> 
> 时间：2012-12-18T06:49:33.743
> 
> 标签：android, google-play, in-app-billing, google-play-services

[我按照链接](https://developer.android.com/intl/zh-CN/training/in-app-billing/preparing-iab-app.html)中提到的这些步骤执行此操作。

1.  将`IInAppBillingService.aidl`文件复制到您的 Android 项目。

    (1) 如果您使用 Eclipse：将`IInAppBillingService.aidl`文件导入您的 /src 目录。

    （2）如果是在非Eclipse环境下开发：创建如下目录/src/com/android/vending/billing，将`IInAppBillingService.aidl`文件复制到该目录下。

2.  构建您的应用程序。`IInAppBillingService.java`您应该会在`/gen`项目目录中看到一个名为的生成文件。
3.  将示例`/util`目录中的帮助程序类添加到您的项目中。`TrivialDrive`请记住相应地更改这些文件中的包名称声明，以便您的项目正确编译。

但是当我完成时，Eclipse 给了我一个错误：

```
interface IInAppBillingService should be declared in a file called com\android\vending\billing\IInAppBillingService.aidl. 
```

该`aidl`文件位于正确的目录中，但未 `IInAppBillingService.java`生成该文件。

以前有人见过吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-23T02:52:44.967

右键单击项目的头部并创建一个新的 PACKAGE ...调用包 com.android.vending.billing ....将aidl文件放在那里以消除错误。

一些思考：对于那些有兴趣的人 - 当使用某人的aidl文件时，两个应用程序的包名称必须相同。google 使用 com.android.vending.billing 作为其计费辅助界面的包名称，因此您还必须在您的应用程序中使用相同的包名称。这是使用aidl时的规则。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-02-20T14:25:37.637

对于 android studio 用户，应该是这样的结构：

![在此处输入图像描述](../Images/d6e2fc8135aba1dfd94dd3294f9bab8f.png)

[根据这个答案，为我工作。](https://code.google.com/p/android/issues/detail?id=56755)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-10T18:31:51.523

[@David](https://stackoverflow.com/users/1038702/david)提到的结构在 Android Studio 1.2 中运行良好。

您的帐单文件夹路径应如下所示：

```
[YOUR_APP_FOLDER]/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl 
```

您可以在此处检查 IInAppBillingService.java 生成的文件：

```
[YOUR_APP_FOLDER]/app/build/generated/source/aidl/debug/com/android/vending/IInAppBillingService.java 
```

祝你好运 ！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-29T22:30:43.587

在 /src 目录中，单击 File > New > Package，然后创建一个名为 com.android.vending.billing 的包

从 /extras/google/play_billing/ 复制 IInAppBillingService.aidl 文件并将其粘贴到工作区的 src/com.android.vending.billing/ 文件夹中。

构建您的应用程序。您应该在项目的 /gen 目录中看到一个名为 IInAppBillingService.java 的生成文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T10:19:08.563

我能给您的唯一建议是重新检查 src 文件夹中目录的拼写，如果您将文件放入 /src/com/android/vending/billing/IInAppBillingService.aidl 它应该可以工作

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-18T08:45:36.440

其他建议都不错。有时 eclipse 可能只是很奇怪，在这种情况下，清理项目可以修复它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-13T04:09:41.527

我按照@j2emanue 的建议做了（单击新建/包，添加“com.android.vendor.billing”），我还将目录添加到我的文件系统（com/android/vendor/billing），然后将文件复制到其中。然后，单击项目上的刷新。构建，它成功了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-03T07:45:05.087

检查您是否在 build.gladle 的依赖项下添加了计费库

```
dependencies {
implementation fileTree(dir: 'libs', include: ['*.jar'])
implementation 'com.android.support:appcompat-v7:27.1.1'
testImplementation 'junit:junit:4.12'
androidTestImplementation 'com.android.support.test:runner:1.0.2'
androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'

implementation 'com.android.billingclient:billing:1.1'
} 
```

请参阅上面代码中的最后一行。实施 'com.android.billingclient:billing:1.1' 为我解决了同样的问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-08T08:07:41.690

2018

```
app/build.gradle:

sourceSets {
  main {
    aidl.srcDirs = ['src/main/aidl']
  }
} 
```

或者

```
sourceSets {
  main {
    aidl.srcDirs = ['src']
  }
} 
```

为了`IInAppBillingService.aidl`

# javascript - 我可以在一页上放置多个 jRecorder 元素吗？

> ID：13927762
> 
> 赞同：0
> 
> 时间：2012-12-18T06:49:45.050
> 
> 标签：javascript, jquery, jquery-plugins

我一直在尝试找到一个插件，允许我网站上的用户录制语音剪辑，在搜索了一段时间后，我最终得到了[jRecorder](http://www.sajithmr.me/jrecorder/)。然而，这个问题是我需要在一个页面上有多个 jRecorder 实例，并且它们必须每个都写入一个单独的文件。

我一直无法找到如何做到这一点，并且想知道是否有人成功实施了这一点。

# java - Tomcat + Servlet + Solr 不正确的国际字符

> ID：13927767
> 
> 赞同：2
> 
> 时间：2012-12-18T06:50:05.223
> 
> 标签：java, tomcat, solr, solrj

我有一个 Solr 4.0，它在 Postgres db 中索引数据（包含多语言字符）。当我通过内置的 Jetty 向 Solr 发出直接请求时，我得到了 JSON 格式的正确响应。Tomcat 7 下运行着一个 Servlet，它负责处理对公共 API 的请求。此 API 通过 HTTP 获取请求，对执行请求的权限进行某种检查，然后使用 solrj 向 Solr 发出请求，然后以 JSON 格式发送响应。问题是当我通过 Servlet 请求 Solr 时，我总是得到很多 ????????? 应有国际字符的地方的符号。DB 中的所有数据都是 UTF-8 编码，Tomcat server.xml 中的 URIEncoding 参数也是 UTF-8。这是我在 Servlet 中编写响应的方式：

```
public void service(HttpServletRequest req, HttpServletResponse res) throws IOException
{
    PrintWriter writer = res.getWriter();
    String encoding = req.getCharacterEncoding();
    if(null == encoding)
    {
        req.setCharacterEncoding("UTF-8");
    }
    else
    {
        req.setCharacterEncoding(encoding);
    }   
    res.setContentType("application/json; charset=UTF-8");
    res.setCharacterEncoding("UTF-8");
    String key = req.getParameter(P_KEY);
    if (ps.isPartnerKey(key))
    {
        if (req.getMethod().equals(M_GET))
        {
            String query = req.getParameter(P_QUERY);
            String solr_json = SolrService.getInstance().query(query);
            //parse JSON for id's and get images
            if (solr_json != null)
            {
                writer.println(solr_json);
            }
        }
        if (req.getMethod().equals(M_POST))
        {
            String id = req.getParameter(P_ID);
            String field = req.getParameter(P_FIELD);
            String value = req.getParameter(P_VALUE);
            SolrService.getInstance().partialUpdate(id, field, value);
            fs.add(id, field, value, ps.getPartnerId(key));
        }
    }
    else
    {
        res.sendError(HttpServletResponse.SC_FORBIDDEN);
    }
    writer.close();
} 
```

这就是我从 Solr 获取数据的方式：

```
 public String query(String query)
{
    SolrQuery solrQuery = new SolrQuery();
    solrQuery.set("q", query!=null ? query : "*:*");
    solrQuery.set("wt", "json");
    String response = "";
    try
    {
        QueryResponse res = solr.query(solrQuery);
        response = res.getResults().toString();
        log.debug(response);
    }
    catch (SolrServerException e)
    {
        e.printStackTrace();
    }
    return response;
} 
```

Am I doing wrong something? What is the problem may be?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:56:42.467

You are calling getWriter to early. Call it after setting the character encoding.

# powershell - 使用自定义元素标签名称将数组转换为 xml

> ID：13927773
> 
> 赞同：0
> 
> 时间：2012-12-18T06:50:29.037
> 
> 标签：powershell

我有以下 Powershell 脚本。

```
$load = @(@(1, 2), @(3))
$Load | % { "[$_]" }
$Date = Get-Date "2012-01-01"
$xml = $Load | ConvertTo-Xml -NoTypeInformation
$xml.OuterXml 
```

代码生成以下结果。

```
[1 2]
[3] 
```

```
<?xml version="1.0"?>
<Objects>
  <Object>
    <Property>1</Property>
    <Property>2</Property>
  </Object>
  <Object>
    <Property>3</Property>
   </Object>
 </Objects> 
```

但是我希望能够指定 xml 元素名称并添加一个额外的`Date`（常量）元素。这是一个简单的方法吗？

```
<?xml version="1.0"?>
<Groups>
  <Group>
    <Item><ID>1</ID><Date>2012-01-01</Date></Item>
    <Item><ID>2</ID><Date>2012-01-01</Date></Item>
   </Group>
  <Group>
    <Item><ID>3</ID><Date>2012-01-01</Date></Item>
  </Group>
</Groups> 
```

我尝试了以下“新对象”方法，但结果非常冗长，而不是我想要的。

```
$load = @(@(1, 2), @(3))
$Load | % { "[$_]" }
$Date = Get-Date "2012-01-01"
$xml = $Load | 
    % { 
        @(, @{ ID = $_; Date = $Date }) 
    } | 
    ConvertTo-Xml -NoTypeInformation 
$xml.OuterXml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:47:17.410

两种解决方案：

1.  `Select-Xml`
2.  普通的旧字符串连接

# c# - 如果条件进入 Gridview 列设计

> ID：13927782
> 
> 赞同：0
> 
> 时间：2012-12-18T06:51:18.287
> 
> 标签：c#, asp.net, gridview

我有一个网格视图。它的数据源是从数据库加载的数据表。在这个 gridview 中，我有一个模板列。

```
<asp:TemplateField HeaderText="Product Type" SortExpression="ProductID">
                                        <ItemStyle CssClass="MP-table-tb-display-item" />
                                        <ItemTemplate>
                                            <div class="MP-table-tb-display-main">
                                                <asp:LinkButton ID="lnkview" CommandArgument='<%# Eval("ProductID") %>' CommandName="Viewproduct"
                                                    runat="server" CausesValidation="False" OnClick="lnkview_Click"><h4>
                                        <%# Eval("Name") %>
                                    </h4>
                                                </asp:LinkButton>
                                            </div>
                                            <br />
                                            <div class="MP-table-tb-display">
                                                <p>
                                                    <span>KEY</span><%# Eval("[product_type_key]") %></p>
                                                <br />

                                                <a target="_blank" href='<%# Eval("SourceURL") %>'>Source</a>
                                            </div>
                                        </ItemTemplate>
                                    </asp:TemplateField> 
```

在此我希望 Source 超链接仅在数据可用于`<%# Eval("SourceURL") %>`. 如果我无法将 SourceURL 值放入`RowDatabound Event`. 请指导我。

我也计划这样做，但这不能正常工作。

```
<a target="_blank" href=' <%= Eval("SourceURL")!=null ? Eval("SourceURL") : "style='display: none'" %> />'>  Source</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T06:56:36.250

改用这个

```
<asp:hyperlink  Target="_blank"  NavigateUrl='<%# Eval("SourceURL") %>' Visible = '<%# Eval("SourceURL") == null ? false : true %>' > 
```

同样，您可以使用`<a>`标签来控制其可见性。if 条件将进入 Style 属性而不是 href 属性。像这样的东西

```
Style=display:Eval('some_val') == null ? none : block 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:02:54.833

试试这个 ：

```
<a target="_blank" href='<%#(String.IsNullOrEmpty(Eval("SourceURL").ToString()) ? "" : Eval("SourceURL"))'%> style='display: none'>Source</a> 
```

谢谢

# jquery - JQuery UI 自动完成通过 JSON 发送额外的术语

> ID：13927783
> 
> 赞同：0
> 
> 时间：2012-12-18T06:51:18.127
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

我从 jQuery UI 文档中获取了大部分代码。我想添加到请求变量中，以便`<input>`也发送 id。

输入如下所示：

```
<input size="50" class="attr_values" name="msrp" id="msrp" /> 
```

现在这里是jquery。在 .autocomplete 源 $.getJSON 中，我尝试使用“this.id”，但它不起作用。我怎样才能让它工作？

```
$(document).ready(function() { 
    // 2 string parsing functions
    function split( val ) {
        return val.split( /,\s*/ );
    }
    function extractLast( term ) {
        return split( term ).pop();
    }

    $( '.attr_values' )
        // don't navigate away from the field on tab when selecting an item
        .bind( 'keydown', function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( 'autocomplete' ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            source: function( request, response ) {
                $.getJSON( 'controllers/core_data/ajax/core_data.php', {
                    'attr_name' : this.id, // THIS DOESN'T WORK
                    'term': extractLast( request.term )
                }, response );
            },
            search: function() {
                // custom minLength
                var term = extractLast( this.value );
                if ( term.length < 2 ) {
                    return false;
                }
                // var attr_name = this.id;
            },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( '' );
                this.value = terms.join( ', ' );
                return false;
            }
        });

 }); 
```

另请注意，我已将其应用于“.attr_values”类，而不是像示例所示的那样应用于一个特定的 id。我有一大堆字段，每个字段都有不同的 id。这就是为什么我需要将 id 和术语发送到 php 脚本。这样它就知道在哪个表中查找该术语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:58:42.297

`this``getJSON`在回调中不再引用原始集合。尝试向上钻取以到达原始元素：

```
source: function( request, response ) {
    $.getJSON( 'controllers/core_data/ajax/core_data.php', {
        'attr_name' : this.element[0].id,
        'term': extractLast( request.term )
    }, response );
}, 
```

这里的上下文`this`是指`autocomplete`您正在评估`source`函数的对象。我们可以使用该`element`属性来获取对应的jQuery集合，然后从中找到id。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T06:59:25.480

试试给这个..

```
$(this).attr('id'); 
```

# html - 文本溢出时我的 div 未对齐（但仅有时）

> ID：13927787
> 
> 赞同：0
> 
> 时间：2012-12-18T06:51:31.877
> 
> 标签：html, css

我想以任何分辨率的最佳方式展示容器，不要太宽也不要太薄：

*   1 块/行，分辨率高达 640x480；
*   1024x768 分辨率下 2 块/行；
*   1366x768 及以上分辨率为 3 块/行；
*   4 个块，用于 1680x1050 及以上的分辨率。

理想情况下，它将容器大小调整为当前屏幕宽度。

在`<div class="L">`循环中，会显示 5-100 次；`<div ID="A">`没有样式。

```
<div id="A">
...
    <div class="L V">
        <a href="#"><img src="thumb.jpg">
        <h2>short title</h2>
        medium to long description about lorem ipsum (10-500chrs)
        </a>
    </div>
...
</div> 
```

`<div class="L">`也用于其他一些地方；`<div class="V">`主要用于此视图：

```
div.L {
    border:1px;
    padding:3px;
    margin:2px;
    font-size:21px;
    text-align:justify;
}
div.V {
    width:486px;
    height:149px;
    display:inline-block;
    overflow:hidden;
    text-overflow:ellipsis;
}
div.L img {
    float:left;
    min-width:80px;
    min-height:80px;
    padding-right:4px;
}
div.V img {
    max-width:157px;
    max-height:118px;
}
div.L h2 {
    margin:1px;
    font-size:21px;
}
div.V h2 {
    white-space:nowrap;
} 
```

**问题：**
我的猜测是它可能与可变文本有关，因为当没有描述（固定大小）或只有几个词时，它们都很好地对齐。

JS 小提琴：http: [//jsfiddle.net/qvpuX/1/](http://jsfiddle.net/qvpuX/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:39:01.220

只需将`float: left`规则添加到`div.V`选择器

[http://codepen.io/timothyasp/pen/AFerh](http://codepen.io/timothyasp/pen/AFerh)

全视图：[http ://codepen.io/timothyasp/full/AFerh](http://codepen.io/timothyasp/full/AFerh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:42:18.827

将您的`div.V`CSS更改为以下内容，

```
div.V { 
    width:416px; 
    height:149px; 
    float:left; 
    overflow:hidden; 
    text-overflow:ellipsis;
} 
```

[测试链接](http://jsfiddle.net/VYZja/4/embedded/result/)

**编辑：**

您可以`div`如下添加可变宽度，

```
@media all and (min-width: 400px) and (max-width: 600px){
    div.V{
        width: 416px;
    }
}
@media all and (max-width: 320px){
    div.V{
        width: 100px;
    }

} 
```

**注意：**我添加`width: 100px;`只是作为参考以表明它有效，您可以添加`width`您想要的（`300px`我从您的评论中猜测）

[**测试链接 - 响应式**](http://jsfiddle.net/VYZja/6/embedded/result/)

# php - 如何为另一个表制作一个表属性名称的列名

> ID：13927793
> 
> 赞同：0
> 
> 时间：2012-12-18T06:52:22.943
> 
> 标签：php, mysql, sql

我有 2 个表，T1 具有表单属性，分别`name,address,rating`具有相应的控件类型`text,textarea,integer`。

在另一个表 T2 中，我存储来自表单的值，并有列`valuechar,valuetext,valueint`，其中的值`name,address and rating`保存在单个表单的不同行中。现在我想进行查询并从上述两个表中得到以下结果。

```
array(
      [name]=>value from valuechar
      [address]=>value from valuetext
      [rating]=>value from valueint
) 
```

我如何有效地做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:00:08.040

你为什么不制作一张表并制作这 3 个字段？

无论如何; 如果结果完全相同，您可以执行以下操作：

```
 $dataArray1 = mysql_fetch_array..? // Table2
 $dataArray2 = mysql_fetch_array..? // Table2

 $data = array();

 for($i = 0; $i < count($dataArray1); $i++) {
    $data = $dataArray1[$i] = $dataArray2;
 } 
```

给我更多关于你想要达到的目标的信息，也许我们可以解决一些问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:02:27.733

如果要将数据从一个表复制到另一个表，则可以使用以下查询：

```
insert into t1 
select valuechar,
valuetext,
valueint
from t2
where <some condition> 
```

向我们提供有关您的要求的更多信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T07:04:39.653

[http://blog.sqlauthority.com/2007/08/15/sql-server-insert-data-from-one-table-to-another-table-insert-into-select-select-into-table/](http://blog.sqlauthority.com/2007/08/15/sql-server-insert-data-from-one-table-to-another-table-insert-into-select-select-into-table/) 可能是这对你有用

# asp.net - 如何在单元测试方法中访问该页面上定义的 aspx 页面和 HiddenField？

> ID：13927797
> 
> 赞同：0
> 
> 时间：2012-12-18T06:52:27.140
> 
> 标签：asp.net, c#-2.0

我想在单元测试方法中访问 aspx 页面和 HiddenField。我需要将 aspx 页面和 HiddenField 作为参数传递给 .cs 文件中定义的另一个方法。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:17:41.283

会话可用于存储整个页面内容，隐藏字段可以作为参数传递给单元测试方法。

# maven - Nexus 不会从 Central 下载工件

> ID：13927806
> 
> 赞同：2
> 
> 时间：2012-12-18T06:53:26.160
> 
> 标签：maven, configuration, proxy, installation, nexus

我刚刚在公司代理后面安装了 Nexus 2.2-01。当我直接访问 Central 存储库时，Maven 正在工作，但是当我配置`<mirror>`in时，`%M2_HOME%\conf\settings.xml` 我无法执行简单的`mvn archetype:create`or `mvn clean`.

从 Nexus Web UI 我可以：

*   中环的“远程浏览”。
*   “浏览索引”
*   并从显示“（未本地缓存）”的“工件信息”选项卡中，我可以下载罐子
*   然后在“http://127.0.0.1:8081/nexus/content/groups/public/”和“\nexus\sonatype-work\nexus\storage\central”查看 .jar 和 .jar.sha1 文件

...但由于某种原因它不下载`.pom`文件

Nexus 2.2 带有一个预先配置的 Central 代理存储库，我可以从 Web UI 手动浏览索引和下载文件 - 那么为什么它不能从 Maven 工作呢？

我已经为 Nexus 配置了带有身份验证的默认 HTTP 代理设置，但仍然出现以下错误：

```
[ERROR] Plugin org.apache.maven.plugins:maven-clean-plugin:2.4.1 
  or one of its dependencies could not be resolved: 
  Failed to read artifact descriptor for org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1: 
  Could not transfer artifact org.apache.maven.plugins:maven-clean-plugin:pom:2.4.1 from/to nexus 
  (http://myserver:8081/nexus/content/groups/public): 
  Failed to transfer file: 
  http://myserver:8081/nexus/content/groups/public/
  org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom. 
  Return code is: 504, ReasonPhrase:Gateway Timeout. -> [Help 1] 
```

和

```
[INFO] Scanning for projects...
Downloading: http://myserver:8081/nexus/content/groups/public/
  org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom
[WARNING] Failed to retrieve plugin descriptor for 
  org.apache.maven.plugins:maven-clean-plugin:2.4.1: 
  Plugin org.apache.maven.plugins:maven-clean-plugin:2.4.1 
  or one of its dependencies could not be resolved: 
  Failed to read artifact descriptor for 
  org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1
Downloading: http://myserver:8081/nexus/content/groups/public/
  org/codehaus/mojo/maven-metadata.xml
Downloading: http://myserver:8081/nexus/content/groups/public/
  org/apache/maven/plugins/maven-metadata.xml
[WARNING] Could not transfer metadata org.apache.maven.plugins/maven-metadata.xml
  from/to nexus (http://myserver:8081/nexus/content/groups/public): 
  Failed to transfer file: http://myserver:8081/nexus/content/groups/public/org/
  apache/maven/plugins/maven-metadata.xml. 
  Return code is: 504, ReasonPhrase:Gateway Timeout. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:11:18.923

啊！DNS 问题 - 使用 maven settings.xml 中的 IP 地址解决了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T14:02:38.927

另一个答案是正确的，但对于遇到相同问题但上述答案无济于事的人来说只是一个注释：检查您的 settings.xml 代理设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-02T05:23:36.943

我今天看到了这个错误，唯一修复它的是回到 maven 3.2.5（来自 3.3.9）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-10T17:08:00.840

为此，似乎要么

1.  settings.xml 中的代理部分导致问题（您应该删除它们或修复它们）
2.  Maven settings.xml 中的 URL 问题

如果在那里正确定义了 url，则可能您需要打开 C:\Windows\System32\drivers\etc 中的主机文件并将您正在连接的服务器映射到其相应的 IP... 通过添加如下所示的行：

11.111.11.11 RepoUrl

这样你就声明名为 RepoUrl 的 baseurl 实际上是 ip 11.1....

# sql - 使用 Delphi6 在 MS-Access 上“插入语句”中的语法错误

> ID：13927809
> 
> 赞同：0
> 
> 时间：2012-12-18T06:53:31.663
> 
> 标签：sql, delphi, ms-access

当我直接在 MS-Access 上执行 SQL 查询时，它将插入记录，但是当通过 Delphi 中的 TADOQuery 组件时，显示上述错误。我的代码中有什么错误？

这是我的代码：

```
strQuery := 'INSERT INTO MAS_User_Master
            (First_Name, Middle_Name, Last_Name, User_Name, Password, Mobile_No, 
             Email_Id, Security_Question, Security_Answer, Is_Admin, Is_Deleted,
             Created_By, Created_Date) 
            VALUES
            ('Adam', 'G.', 'James', 'adam', 'ada23',9999599990,
             'adam@yahoo.com', 'what', 'yes', -1, 0,
             'admin', Now())'

qryExec.SQL.Add(strQuery);
qryExec.ExecSQL(); 
```

编辑：

上面的 strQuery 值是在运行时复制的。创建语句我在下面的代码中使用：

```
strQuery := 'INSERT INTO MAS_User_Master ' +
                  '(First_Name, Middle_Name, Last_Name, User_Name, Password, Mobile_No, Email_Id, '+
                  'Security_Question, Security_Answer, Is_Admin, Is_Deleted, Created_By, Created_Date) '+
                  'VALUES (''' + UserRec.FirstName + ''', ''' + UserRec.MiddleName +
                  ''', ''' + UserRec.LastName + ''', ''' +  UserRec.UserName + ''', ''' + UserRec.Password +
                  ''',' + UserRec.MobileNubmer + ', ''' + UserRec.EmailId + ''', '+
                  '''' + UserRec.SecurityQuestion + ''', ''' + UserRec.SecurityAnswer + ''', ' +
                  UserRec.IsAdmin + ', 0, '''+ g_strUserName + ''', Now())'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:36:27.217

```
Thank You! All of You.. 
```

我找到了解决方案：

上述所有查询和语法都是正确且有效的..

```
Important thing: 
```

我在*MS-Access 数据库*中有一个名为“**密码**”的***字段***。Delphi 保留了这个词，所以我们不能使用它们。我更改了字段的名称，所有的东西都工作正常......

 **** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:36:44.890

```
qryExec.Paramcheck := true;
qryExec.SQL.Text := 'INSERT INTO MAS_User_Master '
            +'(First_Name, Middle_Name, Last_Name, User_Name, [Password], Mobile_No, '
            +' Email_Id, Security_Question, Security_Answer, Is_Admin, Is_Deleted,'
            +' Created_By, Created_Date)'
            +'VALUES'
            +'(:fn, :mn, :ln, :un, :pw,:mno,'
            +' :em, :q, :an, :isad, :isDel,'
            +' :cb, :cd)';
qryExec.Parameters.ParamByName('fn').Value := 'Adam';
qryExec.Parameters.ParamByName('mn').Value := 'G.';
qryExec.Parameters.ParamByName('ln').Value := 'James';
qryExec.Parameters.ParamByName('un').Value := 'adam';
qryExec.Parameters.ParamByName('pw').Value := 'ada23';
qryExec.Parameters.ParamByName('mno').Value := 9999599990;
qryExec.Parameters.ParamByName('em').Value := 'adam@yahoo.com';
qryExec.Parameters.ParamByName('q').Value := 'what';
qryExec.Parameters.ParamByName('an').Value := 'yes';
qryExec.Parameters.ParamByName('isad').Value := -1;
qryExec.Parameters.ParamByName('isdel').Value := 0;
qryExec.Parameters.ParamByName('cb').Value := 'admin';
qryExec.Parameters.ParamByName('cd').Value := Now();
qryExec.ExecSQL(); 
```

另一种方式可能是：

```
AdoDataset.CommandText :='Select * from MAS_User_Master where 1=0';
AdoDataset.Append;
Adodataset.FieldByName('First_Name').Value := 'Adam';
// and so on
Adodataset.Post; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:00:52.930

有几个可能的错误

首先，您的查询包含引号。要在 Delphi 中的字符串中使用引号，您必须键入双引号来转义它，否则它会被视为字符串终止符。这将产生一个 Delphi 编译错误。

二、你`Add`要SQL。这意味着，如果 SQL 属性已经包含信息，则会将这条语句添加到其中，这可能会导致语句无效。这将生成一个运行时错误，由 ADO 在执行 ExecSQL 方法时生成。

您可以做的其他事情不会直接解决您的问题，但会让您的生活更轻松，您的项目更易于维护：

使用对象检查器编辑 SQL 属性。您无需转义引号，可以轻松添加换行符，并且可以执行相同的查询，就像在 Access 中一样进行测试。您可以为每个需要执行的语句使用 TADOQuery（或者更确切地说是 TADOCommand 用于插入和更新语句），因此您永远不必更新 SQL 本身。

要在语句中使用“变量值”，您可以使用命令的*参数*。

为了确保它们不会妨碍您在设计时阻止表单的站点，您可以将命令放在数据模块上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T07:04:16.953

在 Delphi 中，您应该使用双重配额将一个引号插入字符串。确保`qryExec.SQL`为空。就做`qryExec.SQL.Clear`之前`qryExec.SQL.Add`。也是`Now()`一个 Delphi 函数，因此您应该将结果转换`Now()`为字符串以将其放入 SQL 查询中。

```
strQuery := 'INSERT INTO MAS_User_Master (First_Name, Middle_Name, Last_Name, User_Name, Password, Mobile_No, Email_Id, Security_Question, Security_Answer, Is_Admin, Is_Deleted, Created_By, Created_Date) VALUES (''Adam'', ''G.'', ''James'', ''adam'', ''ada23'',9999599990, ''adam@yahoo.com'', ''what'', ''yes'', -1, 0, ''admin'', '''+DateToStr(Now())+''' )';

qryExec.SQL.Add(strQuery);
qryExec.ExecSQL(); 
```***

# razor - 如何控制文本框的宽度和小数位？

> ID：13927811
> 
> 赞同：0
> 
> 时间：2012-12-18T06:54:02.380
> 
> 标签：razor, asp.net-mvc-4

MVC 剃刀视图

Html.EditorFors 小数位可以用 Dataannotations 控制，但没有简单的（如果有的话）方法来控制宽度（它们不采用 htmlAttributes 并且设置具有宽度的 css 类没有效果）。

Html.TextBoxFors 允许使用 htmlAttributes 轻松控制宽度，但没有简单的（如果有的话）方法来控制小数位。

如何获得一个可以同时控制宽度和小数位的编辑文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:11:12.450

> 并且设置一个宽度的css类没有效果

我想那是因为你有一个不正确的 CSS 选择器。

例如，您可以这样做：

```
<div class="myrule">
    @Html.EditorFor(x => x.FooBar)
</div> 
```

然后在你的 CSS 文件中：

```
.myrule input {
    width: 200px;
} 
```

作为替代方案，您可以编写自定义编辑器模板，然后在使用 EditorFor 调用时指定此模板的名称：

```
@Html.EditorFor(x => x.FooBar, "MyTemplate") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:46:58.050

使用正则表达式来控制小数位。

编写一个继承 System.ComponentModel.DataAnnotations.RegularExpressionAttribute 的自定义属性，该属性指定所需的正则表达式来控制小数位。

然后在 viewmodel/model 中指定所需字段的自定义属性。

# c# - 用整数表达式切换大小写

> ID：13927815
> 
> 赞同：12
> 
> 时间：2012-12-18T06:54:22.523
> 
> 标签：c#, .net

我正在尝试使用`switch case`而不是`If Else`语句，其中我必须首先检查字符串的长度，并根据我必须对其进行处理。

```
switch (mystring.length)
{
    case <=25:
    {
        //do this
        break;
    }
    case <50:
    {
        //do this
        break;
    }
    default:
        break;
} 
```

这是我想做的事情，但无法获得如何放在`<25`案例前面，因为根据 switch case 规则它不合适。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-18T07:03:55.710

对于您的特定情况，使用 if/else 总是更好，使用 switch 语句，您不能在情况下设置条件。看起来您正在检查范围，如果**范围是恒定**的，那么您可以尝试以下操作*（如果您想使用 switch 语句）*。

```
int Length = mystring.Length;
int range = (Length - 1) / 25;
switch (range)
{
    case 0:
        Console.WriteLine("Range between 0 to 25");
        break;
    case 1:
        Console.WriteLine("Range between 26 to 50");
        break;
    case 2:
        Console.WriteLine("Range between 51 to 75");
        break;

} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-05-29T14:56:46.817

这确实对 OP 帮助不大，但希望它能帮助将来寻找这个的人。

如果您使用的是 C# 7（在 Visual Studio 2017 中可用），则可以[`switch`在范围](https://docs.microsoft.com/en-us/dotnet/articles/csharp/language-reference/keywords/switch).

**例子：**

```
switch (mystring.length)
{
    case int n when (n >= 0 && n <= 25):
    //do this
    break;

    case int n when (n >= 26 && n <= 50 ):
    //do this
    break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T07:14:34.417

尝试这个：

```
int range = (int) Math.Floor(mystring.Length / 25);

switch (range) {
case 0:

    //do this <= 25
    break;

case 1:

    //do this < 50 & > 25
    break;

default:
    break;
}​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T07:01:21.497

您不能这样做，`switch`但可能有解决方法。

```
Dictionary<int, Action> actions = new Dictionary<int, Action>()
    {
        {25,()=>Console.WriteLine("<25")},
        {49,()=>Console.WriteLine("<50")},
        {int.MaxValue,()=>Console.WriteLine("Default")},
    };

actions.First(kv => mystring.length < kv.Key).Value(); 
```

# java - ScheduledExecutorService 一线程多任务

> ID：13927816
> 
> 赞同：8
> 
> 时间：2012-12-18T06:54:22.853
> 
> 标签：java, multithreading, timer, executorservice, scheduledexecutorservice

我是新手`ExecutorService`，想知道为什么以下代码正确打印“10 15”，即使我只创建了一个线程来处理超时？为什么我可以多次调用 schedule 而不会在单个线程执行程序上取消以前的任务？

```
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

public class TestExecutorService implements Runnable {
    public static ScheduledExecutorService SERVICE = Executors.newSingleThreadScheduledExecutor();
    private int delay;

    public TestExecutorService(int delay) {
        this.delay = delay;
    }

    public void run () {
        System.out.println(delay);
    }

    public static void main (String[] args) {
        SERVICE.schedule(new TestExecutorService(10), 10, TimeUnit.SECONDS);
        SERVICE.schedule(new TestExecutorService(15), 15, TimeUnit.SECONDS);

        SERVICE.shutdown();
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T07:03:46.333

从[Javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadScheduledExecutor%28%29)：

> 任务保证按顺序执行，并且在任何给定时间不会有超过一个任务处于活动状态。

“处理超时”和“任务执行”的区别是答案的关键。您假设“单线程”意味着“一次只处理一个超时”，但它实际上意味着“一次只执行一个任务”。所有的超时都是同时处理的，但是如果在一个任务停止执行之前达到一个超时，它必须等待另一个超时才能执行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-18T06:59:08.600

在这种情况下，阅读[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor())会很有帮助。它确实解释了虽然执行器将使用单个线程创建，但它将使用*无界*队列进行操作。这意味着您可以向执行程序提交多个任务，它们将排队等待一个接一个地运行，直到队列的最大边界（在本例中为无穷大）或直到 JVM 耗尽资源。

> 创建一个使用单个工作线程在无界队列上运行的 Executor。（但请注意，如果该单线程在关闭前的执行过程中因故障而终止，如果需要执行后续任务，则新线程将取代它。）任务保证按顺序执行，并且不会有超过一个任务处于活动状态在任何给定时间。与其他等效的 newFixedThreadPool(1) 不同，返回的执行程序保证不可重新配置以使用额外的线程。

在您的示例中，您的两个任务排队，并依次运行，这就是您获得（预期）输出的原因。

# javascript - 如何在asp.net mvc中注销当前用户

> ID：13927818
> 
> 赞同：1
> 
> 时间：2012-12-18T06:54:38.670
> 
> 标签：javascript, jquery, asp.net-mvc-3, jquery-ui

我已使用以下链接结束会话。

[http://pure-essence.net/2010/02/14/jquery-session-timeout-countdown/](http://pure-essence.net/2010/02/14/jquery-session-timeout-countdown/)

这样我就可以重定向到登录页面。但是用户没有注销。只是它正在重定向到该页面。但它没有注销。在这种情况下，我如何注销会话。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:26:02.930

简短答案：使用`FormsAuthentication.SignOut();`

长答案

```
public ActionResult LogOff()
{
    FormsAuthentication.SignOut();

    return RedirectToAction("Login", "Account");
}

private ActionResult RedirectToLocal(string returnUrl)
{
    if (Url.IsLocalUrl(returnUrl))
    {
        return Redirect(returnUrl);
    }
    else
    {
        return RedirectToAction("Index", "Home");
    }
} 
```

使用`[Authorize]`上面您不希望用户在注销后执行的操作。您可以通过在操作上单独添加此属性或标记整个类来`[Authorize]`做到这一点，这样所有方法现在只能由经过身份验证的用户访问。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-23T13:04:16.350

```
AuthenticationManager.SignOut(DefaultAuthenticationTypes.ApplicationCookie); 
```

这应该适用于较新的版本。

# android - android应用程序的自动更新数据库

> ID：13927820
> 
> 赞同：0
> 
> 时间：2012-12-18T06:54:55.280
> 
> 标签：android, google-cloud-messaging

我正在android中制作一个测验应用程序。但是，如果数据库中有更改，那么用户如何才能根据这些更改进行更新。我阅读了有关 GCM 和 php 的信息。但是谁能告诉我该怎么做？有什么有用的教程吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:57:12.287

GCM 用于通知您的应用程序需要更新。然后它可以启动服务并在后台下载文件，或者设置偏好标志并询问用户是否要在下次启动应用程序时进行更新。它只是一个触发器，您必须在您的应用程序中实现实际更新。无需使用 PHP 或创建动态网站，只需将文件放在某处，以便应用程序可以下载它。

# javascript - 从 html 表单生成 pdf 的简单方法（兼容 IE）

> ID：13927821
> 
> 赞同：1
> 
> 时间：2012-12-18T06:55:01.927
> 
> 标签：javascript, html

我想从带有 12 个输入字段的简单 html 生成 pdf。我试图用jsPDF做到这一点。一切正常，但不适用于 IE。

是否有任何简单的插件也适用于 IE？我更喜欢 Js & Html 的基于客户端的解决方案。我也想在pdf中画线。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:09:03.727

[http://www.html2pdf.fr/en](http://www.html2pdf.fr/en) 这可能有用。我更喜欢用这个；内联样式 css 可能有助于绘制线条

# json - 如何从 java 客户端使用 JSON Webservice？

> ID：13927823
> 
> 赞同：3
> 
> 时间：2012-12-18T06:55:20.053
> 
> 标签：json, jsp, servlets, liferay, portlet

```
public void doView(RenderRequest renderRequest, RenderResponse renderResponse) throws IOException, PortletException {

    Map countryList = new HashMap();

    String str = "http://10.10.10.25/TEPortalIntegration/CustomerPortalAppIntegrationService.svc/PaymentSchedule/PEPL/Unit336";

    try {
        URL url = new URL(str);

        URLConnection urlc = url.openConnection();

        BufferedReader bfr = new BufferedReader(new InputStreamReader(urlc.getInputStream()));

        String line, title, des;

        while ((line = bfr.readLine()) != null) {

            JSONArray jsa = new JSONArray(line);

            for (int i = 0; i < jsa.length(); i++) {
                JSONObject jo = (JSONObject) jsa.get(i);

                title = jo.getString("Amount"); 

                countryList.put(i, title);
            }

            renderRequest.setAttribute("out-string", countryList);

            super.doView(renderRequest, renderResponse);
        }
    } catch (Exception e) {

    }
} 
```

我正在尝试`json`从 liferay portlet 类访问对象，并且我想将任何字段的值数组传递`json`给 jsp 页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:09:31.810

在将其转换为 JSON 数组之前，您需要阅读完整的响应。这是因为响应中的每一行都将是一个（无效的）JSON 片段，无法单独解析。稍作修改，您的代码应该可以工作，突出显示如下：

```
// fully read response
final String line;
final StringBuilder builder = new StringBuilder(2048);

while ((line = bfr.readLine()) != null) {
    builder.append(line);
}

// convert response to JSON array
final JSONArray jsa = new JSONArray(builder.toString());

// extract out data of interest
for (int i = 0; i < jsa.length(); i++) {
    final JSONObject jo = (JSONObject) jsa.get(i);
    final String title = jo.getString("Amount"); 

    countryList.put(i, title);
} 
```

# wordpress - 在社交插件中从 google plus 中删除计数

> ID：13927824
> 
> 赞同：0
> 
> 时间：2012-12-18T06:55:30.523
> 
> 标签：wordpress, social-networking

我`sociable plugin`在我的 wordpress 博客文章中使用。我需要`hide count`从谷歌加。我找到了这段代码`<a class="addthis_button_google_plusone" g:plusone:count="false"></a>`，但我不知道在哪里使用这个。

![在此处输入图像描述](../Images/2631882b3469679ec9529d825d3ddcab.png)

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:19:48.357

如果您检查前端的共享按钮，您应该会看到一个带有“vC”类的 div。您应该能够通过在您的 CSS 中将其设置为 display:none 来隐藏计数。

```
.vC { display:none; } 
```

如果它不在“vC”中，您可以用您网站上的内容替换该类。

# sql-server-2008 - T-SQL(MS SQL 2008)，不带“EXEC”或“EXECUTE”字的执行程序

> ID：13927829
> 
> 赞同：11
> 
> 时间：2012-12-18T06:55:47.407
> 
> 标签：sql-server-2008, tsql, stored-procedures, exec, execute

是否可以执行开头没有“EXEC”或“EXECUTE”字样的存储过程？

通常要执行我做的存储过程

```
EXEC DeleteProfile 'Joe Smith' 
```

但是，我注意到下一个命令也有效：

```
DeleteProfile 'Joe Smith' 
```

为什么要写“EXEC”或“EXECUTE”字样？

在存储过程名前不写可以执行存储过程吗？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T06:58:37.583

我在 MSDN 中发现“当语句是批处理中的第一个语句时，执行存储过程时不必指定 EXECUTE 关键字。”

得到它。抱歉提问。

如果没有 GO 在每个语句的末尾，这将无法工作：

```
DeleteProfile 'Joe Smith'
DeleteProfile 'Joe Smith'
DeleteProfile 'Joe Smith' 
```

# java - 在 Struts2 中结合 Validate Method 和 xml 验证

> ID：13927830
> 
> 赞同：0
> 
> 时间：2012-12-18T06:55:56.170
> 
> 标签：java, forms, struts2, tags, validation

是否可以将 xml 验证和 Validate 方法结合起来进行表单验证？

我的一般想法是 xml 验证将主要包含给定字段名称的长度，它是一个数字，它是一个有效的电子邮件地址吗？虽然 Validate 方法将检查给定的 fieldname 值，如果该值存在于数据库中，则会出错。

如果是这样，请举一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:11:14.220

~~AFAIK，不。~~根据评论，是的。

我一直认为 Validation 旨在验证输入的正确性，而不是“语义”：如果输入错误，则返回；如果输入正常，检查 db 是否有重复项，检查用户角色的权限，调用服务，查看文件系统等。

顺便说一句，请注意：使用`fieldexpression validator`，您可以调用带参数的函数，就像在 JSP 中一样（它是 OGNL）。

这可能*是*一个不好的做法（见上文），但你可以这样做：

```
<validators>
    <field name="username">
        <field-validator type="fieldexpression">
            <param name="expression">
                <![CDATA[
                    isUserAlreadyInDatabase(username)
                ]]>
            </param>
            <message>function call message here</message>
        </field-validator>
    </field>
</validators> 
```

我分享了这一点，因为它值得了解，并且在某些情况下非常有用（绝对不是你的问题所指出的那个）。

例如，我用它来检查页面中的日期是否在当前主题的 startDate 和 endDate 之间的间隔内。startDate 和 endDate 是来自 Action 的实例变量，通过 getter 读取...

也请阅读此链接：[我们可以在 Struts2 字段表达式中调用带有参数的方法吗？](https://stackoverflow.com/questions/7549063/can-we-call-methods-with-parameters-in-struts2-fieldexpression)

希望有帮助

# android - 在 Android 中查找位于我当前位置之后的位置

> ID：13927834
> 
> 赞同：2
> 
> 时间：2012-12-18T06:56:12.660
> 
> 标签：android, gps, location

我有一些位置（经纬度），我需要在列表视图中显示这些位置。我可以完美地做到这一点。

但现在我想显示在我当前位置之前的位置。这意味着我想跳过我在驾驶过程中已经经过的位置。

让我更清楚地澄清。我们有像 loc1 (lat,lon) , loc2(lat,lon), loc3(lat,lon).. loc100 (lat,lon) 这样的位置。在我开车的过程中，我喜欢查看位置（loc1 - loc100）。但现在我想隐藏从当前位置/位置经过的位置（在 loc1 到 loc100 之间）。比如说，我已经通过了 loc1、loc3、loc5，所以我需要从列表视图中的列表中跳过这 3 个位置。为了实现这一点，我需要知道哪些位置（loc1 - loc100）在我当前位置（gps 当前位置）之后，以便我可以跳过这些位置。

任何的想法？我如何在我的代码中实现这一点？请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:45:12.460

我将有两个 Location 对象的数据结构（例如，LinkedList）：

*   未访问的地点
*   访问地点

您向用户显示的列表将基于 unvisitedLocations 数据结构的内容。

根据您的实时位置，您需要根据您选择的给定半径阈值检测与 unvisitedLocations 数据结构中每个 Location 对象的接近度。为此，您可以使用 LocationManager.addProximityAlert() 方法注册每个位置（在检测到接近度时将触发 PendingIntent），或者循环遍历 unvisitedLocations 数据结构并自行执行此操作 - 例如：

```
if(currentLocation.distanceTo(unvisitedLocations[i]) < threshold){
    visitedLocations.add(unvisitedLocations[i]);        
    unvisitedLocations.remove(i);
} 
```

这将根据您的实时位置为您提供当前访问和未访问位置的列表。

请注意，随着 unvisitedLocations 初始大小的增长，性能将成为一个问题，因为您将遍历整个数据结构内容以确定每次实时位置更新的位置接近度，这可能是 GPS 每秒一次。如果性能成为问题，您应该考虑移动接近检测服务器端并使用空间数据库，该数据库具有特殊的数据结构，可以大大降低接近检测的密集度。

# twitter-bootstrap - Twitter 引导项目结构

> ID：13927836
> 
> 赞同：1
> 
> 时间：2012-12-18T06:56:23.227
> 
> 标签：twitter-bootstrap, less

在每个项目之前我面临的最大困境是我需要使用整个 Bootstrap 还是只使用它所需的部分。我在这个决定上浪费了很多时间。

到目前为止，我的设置是这样的：

将 twitter/bootstrap 中的 less 目录复制到我的样式表目录

```
├── bootstrap
│   ├── layouts.less
│   └── more...
├── fonts.less
├── mixins.less
├── mysite.less
├── plugins.less
└── variables.less 
```

创建一个`plugins.less`文件以包含所需的 bootstrapless 文件。它看起来像这样：

```
 @import "bootstrap/layouts.less";
  @import "bootstrap/type.less";
  @import "bootstrap/forms.less";
  @import "bootstrap/buttons.less";
  @import "bootstrap/utilities.less"; 
```

`main.less`然后，在我的文件中使用这个 plugins.less 。

```
 @import "fonts.less"
  @import "variables.less"     // Bootstrap's + my variables
  @import "mixins.less"        // Bootstrap's + my mixins
  @import "plugins.less"
  @import "mysite.less" 
```

从我看到的博客文章和讨论中，看起来大多数人只包含 bootstrap.css、bootstrap-responsive.css 并使用 custom.css 覆盖样式。虽然我知道这将最大限度地减少项目的“引导”时间，但我担心膨胀和维护。当我使用这种方法时，我通过 Inspector 看到数百种样式被覆盖。另外，我可能不小心使用了引导程序使用的类名。

我使用的方法有什么缺点吗？还是我应该只使用[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)并覆盖其中的一些类`custom.less`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:15:57.860

我个人包括我的项目所需的较少文件，然后自定义给定的类来做我需要的。如果我需要添加自定义类，我会在 custom.less 中完成。

每个项目都不同，所以让 Bootstrap 为你工作。网站会维持多年吗？也许您想花时间删除未使用的较少文件并修改现有类以执行您需要的操作。如果项目需要快速完成并且站点可能会很短暂，只需包含所有 .less 文件并覆盖 custom.less

知道在 Bootstrap 版本 3 中，所有的 less 都将在一个文件[http://blog.getbootstrap.com/2012/12/10/bootstrap-3-plans/](http://blog.getbootstrap.com/2012/12/10/bootstrap-3-plans/)中也很有用。就我个人而言，我喜欢使用一个大文件而不是使用许多 .less 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T09:11:15.217

这是我的设置的样子：

```
|-bootstrap (as cloned from github)
|
|-css
| |-app.css
| |-app.less (watched by LESS compiler)
|
|-js
| |-app.js
| |-plugins
|
|-img
|  
|-index.html 
```

我在我的 app.less 文件中包含引导文件，我从终端调用 less 编译器编译到 app.css（我在我的 html 模板中链接了这个）

这样我可以随时安全地升级引导程序（使用简单`git pull`的引导程序文件夹）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T18:29:35.300

您可以在类中指定样式并在需要使用该样式的任何地方使用这些类，而不是覆盖。这样你就不会因为覆盖许多样式和与现有的引导类混合而搞砸了。你可以像这样使用命名空间。

```
<div class="navbar navbar-default pn-navabr">
  <div class="navbar-inner">
    // Inner code
  </div>
</div> 

.pn-navabr{    // Pn is project name initials, you can choose anything you like maybe dev's name initials 

}
.pn-navabr .navabr-inner{   

} 
```

通过这种方式，您可以真正清理您的 CSS 并使其真正可扩展，而不会弄乱和覆盖引导程序核心。并且您将始终可以灵活地使用 Sass、Less、mix 或纯 css。

# image - WP8：有没有一种简单的方法来缩放和模糊 Windows 手机应用程序的 BitmapImage？

> ID：13927845
> 
> 赞同：8
> 
> 时间：2012-12-18T06:56:42.070
> 
> 标签：image, windows-phone-7, windows-phone-8, effect, bitmapimage

我正在开发一个 Windows Phone 应用程序，该应用程序可以通过 MediaPlayer API 从音乐文件中动态读取专辑艺术。我希望获得专辑封面并调整视图背景的大小。由于调整大小会丢失细节并使图像难看，所以我想模糊它或某种效果。有没有可以模糊图像的API？（来自 C# 或 XAML）？非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T10:11:53.110

我将从使用 WriteableBitmap 开始，要从 BitmapImage 获取 WriteableBitmap，您可以执行以下操作：

```
WriteableBitmap wb = new WriteableBitmap(bitmapImage); 
```

然后我会推荐使用[WriteableBitmapExtension library](http://writeablebitmapex.codeplex.com/)。它支持调整图像大小：

```
wb.Resize(newWidth, newHeight, WriteableBitmapExtensions.Interpolation.Bilinear); 
```

要使用 WritableBitmapExtensions 进行[高斯模糊](http://writeablebitmapex.codeplex.com/discussions/236374)，请执行以下操作（由于某种原因，concolution 不会编辑 writableBitmap，因此您必须再次将其分配给相同的 writableBitmap 以查看结果）：

```
wb = wb.Convolute(WriteableBitmapExtensions.KernelGaussianBlur5x5); 
```

或者

```
wb = wb.Convolute(WriteableBitmapExtensions.KernelGaussianBlur3x3); 
```

（只是相邻像素的权重不同）。

# sql-server - SQL Server 更改登录

> ID：13927848
> 
> 赞同：0
> 
> 时间：2012-12-18T06:56:50.670
> 
> 标签：sql-server

我想更改 SQL Server 登录密码，不想应用 windows 密码保护策略。我想知道为什么即使在谷歌上搜索了这么多之后我也找不到一个例子。:(

```
ALTER LOGIN <login name> WITH PASSWORD = '<password here>' CHECK_POLICY Off; 
```

我得到这个错误。

```
Incorrect syntax near the keyword 'Off'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:04:07.410

正如错误消息告诉您的那样，您使用了错误的语法。检查[相关](http://msdn.microsoft.com/de-de/library/ms189828.aspx)的MSDN 页面（在此处发布之前始终是一个好主意，顺便说一句）：您需要在 CHECK_POLICY 关键字和 OFF 之间放置一个等号，并且您缺少逗号。

```
ALTER LOGIN <login name> WITH PASSWORD = '<password here>', CHECK_POLICY = Off; 
```

# android - 已经可用的 Android 测试用例

> ID：13927850
> 
> 赞同：0
> 
> 时间：2012-12-18T06:56:56.273
> 
> 标签：android, junit, open-source, servicetestcase, testcasesource

是否有任何可用于 android junit 的开源测试用例代码。比如，Android 媒体播放器、内容提供商等的测试用例？我通过谷歌搜索并找不到相关链接。我现在正在使用我的测试用例进行测试，但我想知道测试用例是否已经可用。计划重复使用这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:59:57.233

如果您想要平台的单元测试或 CTS（兼容性测试套件），请从[AOSP](http://source.android.com/source/index.html)下载 android 源代码，它们已包含在内。除非您尝试修改平台，否则这些不会有用。没有人可以真正为您正在编写的应用程序创建可重用的测试。

# codeigniter - 为什么从 facebook 登录到我的应用程序后，我的 URL 中会附加字符“#_=_”

> ID：13927851
> 
> 赞同：-2
> 
> 时间：2012-12-18T06:57:10.593
> 
> 标签：codeigniter, url, facebook-graph-api, url-rewriting

> **可能重复：**
> [Facebook 回调将“#_=_”附加到返回 URL](https://stackoverflow.com/questions/7131909/facebook-callback-appends-to-return-url)

好吧，这不是我面临的问题，因为它不会以任何方式与我的代码混淆，但只是想知道为什么我的应用程序的 URL 会被这个额外字符附加为 # *=* 当用户使用 Facebook 登录我的网站时api？

例如，我的网址应该是

```
 www.xyz.com/viewResume 
```

但实际上是

```
 www.xyz.com/viewResume#_=_ 
```

这种行为有什么特别的原因吗？我正在使用 Codeigniter 框架

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:22:18.663

我忘记了它为什么这样做，我也搜索了一段时间，但如果我没记错的话，它只是返回 URL FB 帖子的残余。不过，在登录后将用户发送回的页面上使用一些小 js 非常容易。

```
 <script type="text/javascript">
    $(document).ready(function(e){
    if (window.location.hash == '#_=_') {
        window.location.hash = ''; // for older browsers, leaves a # behind
        history.pushState('', document.title, window.location.pathname); // nice and clean
        e.preventDefault(); // no page reload
    }
    });
</script> 
```

# android - 2步保存过程

> ID：13927853
> 
> 赞同：0
> 
> 时间：2012-12-18T06:57:16.187
> 
> 标签：android, android-sqlite

目前我有一个具有“保存”按钮的应用程序。触摸此按钮后，数据库中的数据将更新。但是，我希望实施一个两步过程。“保存”后，所有数据都将保存在数据库中，但稍后可编辑。但是，如果数据是“已提交”，则数据只能在以后查看且不可编辑。在这两种情况下，我都希望数据反映在数据库中。

我该如何执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:07:54.963

在您的数据库中添加一个字段，该字段将保持状态 EDITABLE true 或 false。
如果您提交了数据，则将 EDITABLE 更改为 true。
每次你想更新数据库时，你都要检查 EDITABLE 是真还是假。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:13:56.020

在 SQL Lite 的数据表中，您可以使用布尔类型再调用一个名为“已保存”的列，第一次在以编辑模式打开记录时检查“已保存”列，如果为真，则显示它们不可编辑，如果none 或 false 显示数据可编辑。

保存后，您将列值更新为 true。

这样，您就可以为每个记录用户首次保存数据，一旦保存，他们就无法保存，只能查看。

# javascript - Javascript自动点击不起作用

> ID：13927854
> 
> 赞同：1
> 
> 时间：2012-12-18T06:57:22.457
> 
> 标签：javascript

我正在使用脚本使 html 中的表格可排序。脚本在这里 - [http://www.kryogenix.org/code/browser/sorttable/](http://www.kryogenix.org/code/browser/sorttable/)。我希望在加载时自动单击对 html 表进行排序的文本。我使用的自动点击脚本是这个-

```
<head>
<script LANGUAGE='javascript'>
function autoClick(){
document.getElementById('sort').click();
}
</script>
</head>
<body onload="autoClick();">
<table><tr><th><p id="sort">Click here to sort the table</p></th>... 
```

问题是这不起作用，我很困惑为什么这不起作用。

- - - - - - - - - - 编辑 - - - - - - - - -

对此感到抱歉，但实际上我在正文 onload 语句中输入了错误。因此我使用的脚本是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:13:03.217

您在哪里定义了您的活动？
因为我在你的 onload 中只看到一个函数。

下面，一个工作正常的小例子：

```
<html>
    <head>
        <script type='text/javascript'>
        var init = function() 
        {
            document.getElementById('test').addEventListener('click', function() {
                alert('Auto test is ok');
            }, false);
        };

        function autoClick(){
            document.getElementById('test').click();
        }

        </script>
    </head>
    <body onload="init(); autoClick();">
        <button id="test">Test</button>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:07:05.823

我想你错过了表中的班级名称

请使用名为“可排序”的类名添加您的表格标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:04:28.083

使用 Jquery 库总是更安全。只需在页面的标题部分包含最新的 Jquery 库：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js" type="text/javascript"></script> 
```

这个功能应该可以解决您的问题：

```
$("#sort").live('click'); 
```

# c# - itextsharp pdf页面边框？

> ID：13927858
> 
> 赞同：3
> 
> 时间：2012-12-18T06:57:47.857
> 
> 标签：c#, asp.net, itext

我正在使用 itext sharp 来创建 PDF 格式的报告。
我想要页面边框。我尝试了一些方法。我不成功。
如何使用 获取顶部、底部、左侧、右侧的页面边框`iText for .NET`？
我添加了一张图片[1](https://i.stack.imgur.com/qFyBp.png)。我想要图像中描述的边框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T07:13:44.990

您可以尝试使用此代码手动添加标题的图像。

//第一步：添加图片文件

```
strImgPath is refer the directory Info..

Image imgLogo = Image.GetInstance(strImgPath.ToString()+"\\abcdur compe.Jpg");
imgLogo.Alignment = Image.ALIGN_CENTER;
imgLogo.ScalePercent(50f); 
```

// 第2步：

```
Add this ImgLogo to the PdfPTable by use of this
PdfPCell pdfcellImage = new PdfPCell(imgLogo, true);
pdfcellImage.FixedHeight = 40f;
pdfcellImage.HorizontalAlignment = Element.ALIGN_CENTER;
pdfcellImage.VerticalAlignment = Element.ALIGN_CENTER;
pdfcellImage.Border = Rectangle.NO_BORDER;
pdfcellImage.Border = Rectangle.NO_BORDER;
pdftblImage.AddCell(pdfcellImage); 
```

// 第三步：

```
Create Chunck to add Text for address or others
fntBoldComHd is a Base Font Library Object

Chunk chnCompany = new Chunk("Your CompanyName\nAddress", fntBoldComHd);

//Step 4:

Create Phrase For add the Chunks and PdfPTables

Phrase phHeader = new Phrase(); 

phHeader.Add(pdftblImage);
phHeader.Add(chnCompany); 
```

// 第 5 步：

```
Assign the Phrase to PDF Header
HeaderFooter header = new HeaderFooter(phHeader, false);
header.Border = Rectangle.NO_BORDER;
header.Alignment = Element.ALIGN_CENTER;
docPDF.Header = header; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:13:00.417

我正在使用一种解决方法，但它会创建边框。使用此方法。

```
private void CreateBorder(PdfContentByte cb, PdfWriter writer, Document doc)
    {
        iTextSharp.text.Rectangle r = doc.PageSize;
        float left = r.Left + 30;
        float right = r.Right - 30;
        float top = r.Top - 30;
        float bottom = r.Bottom + 30;
        float width = right - left;
        float height = top - bottom;

        PdfPTable tab = new PdfPTable(1);
        tab.TotalWidth = width;
        tab.LockedWidth = true;

        PdfPCell t = new PdfPCell(new Phrase(String.Empty));
        t.BackgroundColor = new BaseColor(250, 235, 215);
        t.FixedHeight = height;
        t.BorderWidth = 3;
        tab.AddCell(t);
        Paragraph pa = new Paragraph();
        pa.Add(tab);

        float h = tab.TotalHeight;
        PdfTemplate temp = cb.CreateTemplate(tab.TotalWidth, h);
        tab.WriteSelectedRows(0, -1, 0.0F, h, temp);
        iTextSharp.text.Image img = iTextSharp.text.Image.GetInstance(temp);
        img.SetAbsolutePosition(30, 30);
        cb.AddImage(img);
    } 
```

如果您想要一个标题的更多部分，请创建两行表格宽度。我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:38:31.863

您指的是文档页边距吗？如果是，请使用 Document 对象的 ctor 来指定它们：

```
public Document(Rectangle pageSize, float marginLeft, float marginRight, float marginTop, float marginBottom); 
```

# youtube-api - YouTube 分析 API 问题

> ID：13927864
> 
> 赞同：5
> 
> 时间：2012-12-18T06:58:20.860
> 
> 标签：youtube-api

我是 YouTube Analytics API 的新手，有几个问题：

*   为了检索分析报告，我必须为“ids”参数指定通道 ID。如何找到 OAuth 认证用户的通道 ID？我在示例应用程序中看到我可以在 Data API (V3) 中调用 Channels.list 方法并使用“mine=true”参数。这是否保证返回单个频道？如果不是，我怎么知道哪个频道是正确的？查找用户频道 ID 的推荐方法是什么？

*   获得渠道 ID 后，我就可以开始查询 Analytics 数据了。我想查询该频道的“观看次数”指标以了解该频道的整个历史记录。问题是，我怎么知道查询回溯到多远？有频道开始日期吗？上面提到的 Channels.list 方法不会返回我的频道的 snippet.publishedAt 日期，因此这似乎不是一种可靠的方法。我怎么知道什么时候停止？我想我可以追溯到 2005 年左右 YouTube 成立时，但这似乎是一个不好的方法。有什么建议么？

*   Analytics API 支持渠道和内容所有者的报告。用户通过 OAuth 进行身份验证后，我如何知道该帐户是常规 YouTube 帐户还是 CMS 内容所有者帐户？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:33:48.973

*   推荐的方法是做一个`channels.list(mine=true)`. 返回的第一个结果将是当前授权用户对应的频道。（`channels.list()`返回频道列表，因为请求参数的其他组合可能导致返回多个频道。）

*   回到过去的某个任意日期应该是无害的。2005 年、2000 年等。YouTube 分析后端应该知道如何正确处理这种情况，而且您显然只会获得可追溯到与您的频道相关联的第一次观看的统计数据。

*   该`ids=`参数的值告诉 API 您是要针对与当前授权用户关联的频道 ( `ids=channel==UC...`) 还是针对您作为 CMS 内容所有者 ( `ids=contentOwner==CONTENT_OWNER_NAME`) 有权访问的频道/视频进行报告。

# java - MongoDB：使用 DBcollection 查找时对数据进行排序

> ID：13927867
> 
> 赞同：8
> 
> 时间：2012-12-18T06:58:44.407
> 
> 标签：java, mongodb

我想在基于 lastUpdated 字段的排序的帮助下返回查找查询的结果。

目前我已经看到了两种方法

**第一种方法**

```
BasicDBObject query = new BasicDBObject();
query.put("updated_at","-1");
query.put(MONGO_ATTR_SYMBOL, "" + symbol);
DBCursor cursor = DBcollection.find(query).sort(query); 
```

**第二种方法**

```
DBCursor cursor = DBcollection.find(query,new BasicDBObject("sort", new BasicDBObject("lastUpdated ", -1))); 
```

处理任何想法的最佳选择是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T16:44:31.540

如果你看一下 Java Driver API，方法[find](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#find%28com.mongodb.DBObject,%20com.mongodb.DBObject%29%20find)需要两个参数，查询和将返回的字段。

一旦要对结果进行排序，请使用传统的查找方法并对 DBCursor 进行排序。

```
DBCursor cursor = DBCollection.find(query);
cursor.sort(new BasicDBObject("lastUpdated ", -1)); 
```

请记住，DBCursor 对象对数据库进行延迟提取，因此您可以使用排序、限制或跳过而无需开销。

# java - 如何在多台机器上使用一个声纳服务器

> ID：13927868
> 
> 赞同：9
> 
> 时间：2012-12-18T06:58:49.050
> 
> 标签：java, eclipse, sonarqube

我正在使用 Java、Eclipse。我已经在我的机器上安装和配置了 sonar-server、sonar-runner，它工作正常。我已经在我的机器上使用`http://localhost:9000/`. 一切正常。但现在我想使用我机器上的声纳服务器测试另一台机器上的项目的代码质量。（意味着我有 5 台机器，然后我不想安装声纳服务器，声纳运行器在所有机器上，我只是将它安装在一台机器上并希望将它用于所有其他机器）。

如何将声纳服务器连接到另一台或不同机器上的项目。请指导我，如何做到这一点？如何进行设置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T07:41:19.987

在所有其他机器上，您需要安装 Sonar Runner 并将其配置为指向您的远程 Sonar 服务器。为此：编辑“conf/sonar-runner.properties”文件以引用远程 Sonar 服务器的 URL 和远程数据库的 JDBC 连接。

所有这些都在这里解释：[安装和配置声纳扫描仪](http://docs.sonarqube.org/display/SCAN/Analyzing+with+SonarQube+Scanner)

# android - GridView在每次调用android时重复内容

> ID：13927878
> 
> 赞同：0
> 
> 时间：2012-12-18T06:59:29.133
> 
> 标签：android, android-gridview

我有一个`Arraylist<HashMap<String,String>>`三记录。我正在使用`CustomAdapter`which extends显示它们`BaseAdapter`。

在第一次通话中，我在 gridview 中获得了三个记录。

在第二次通话中，我得到 3+3 = 6 条记录。（同样是 3 条）

在第三次通话中，我接到 3+3+3 = 9 次通话，依此类推。

我用过`grid.invalidateViews()`。但它不起作用，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:07:30.830

当您将 ArrayList 放入 CustomAepter 时，您的 Arraylist 并不清楚。`arryList.clear();`因此，在将新元素放入其中之前，您应该在您的班级中使用

# sql - SQL 列交换行为

> ID：13927879
> 
> 赞同：1
> 
> 时间：2012-12-18T06:59:30.270
> 
> 标签：sql, sql-server-2008, swap

我正在使用以下语句交换表中的列值：

```
UPDATE SwapTable
SET ValueA=ValueB
   ,ValueB=ValueA 
```

这可行，并且值确实被交换了，这可以通过此[**SQL Fiddle**](http://sqlfiddle.com/#!3/fc36a/2)进行验证。

但是，如果我们用（大多数情况下）其他语言做这样的事情，我们最终会得到两者`ValueA`并`ValueB`具有相同的值。

所以我的问题是为什么/如何在 SQL 中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T07:09:08.050

你可以看到执行计划。

1.  从表中选择所有行并将其作为行集。
2.  打开交易
3.  **从从行集读取的旧值**到**字段引用**，使用相应的行地址更新引用的表 (SwapTable) 。
4.  提交——完成更新。

# android - 带有果冻豆 v4.1.1 的 Galaxy S3 上的黑屏/黑屏

> ID：13927881
> 
> 赞同：4
> 
> 时间：2012-12-18T06:59:35.457
> 
> 标签：android, surfaceview

在我的游戏中的某些屏幕上，我使用的是surfaceView。它在所有其他设备和 android 版本上都可以正常工作，除了一个 - 带有 jellybean 更新 4.1.1 的三星 Galaxy s3

在此设备上，所有使用 surfaceView 的屏幕都变为空白，没有任何显示。但我知道游戏正在运行，因为我能听到运行的声音。在其中一个屏幕上，我将活动的方向设置为横向，它工作正常，而所有其他具有 potrait 方向的屏幕在加载时都变成空白

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:29:03.787

您将不得不关闭全屏。

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN, 
    WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN); 
```

对于某些具有硬件覆盖的设备，这是果冻豆的错误。

# android - Appcelerator 模块开发：如何将我的 Java 源代码与模块连接

> ID：13927885
> 
> 赞同：1
> 
> 时间：2012-12-18T06:59:49.943
> 
> 标签：android, appcelerator, appcelerator-mobile

我一直在尝试在 Appcelerator 中构建一个模块，让一个 Android 库也可用于 Appcelerator 平台，但 Appcelerator 网站上的文档对我帮助不大。我已经两天没撞墙了。

我遵循了他们网站上提供的[Android 模块开发指南](https://wiki.appcelerator.org/display/guides/Android+Module+Development+Guide#AndroidModuleDevelopmentGuide-Creatingamodule)，但它没有指定很多东西，例如：

*   它讲述了从命令行为计算器创建一个模块，但没有写太多关于如何集成实际代码的内容。

我可能会遗漏一些东西，这是一种可能性，所以我再次阅读它。

但是谁能指出我正确的方向或让事情更清楚一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:38:59.337

我正在回答我自己的问题，所以如果有人来到这里，它会帮助他们。

原来我正在访问他们文档的旧版本，称为 Wiki。

托管的较新版本`docs.appcelerator.com`更具描述性。

在这种特殊情况下，[这些文档](http://docs.appcelerator.com/titanium/latest/#!/guide/Android_Module_Development_Guide-section-29004945_AndroidModuleDevelopmentGuide-ImportingaModuleintoEclipse)对我帮助很大。

除此之外，以下链接也有帮助，我构建并运行了一个示例模块：

*   [钛模块概念](http://docs.appcelerator.com/titanium/latest/#!/guide/Titanium_Module_Concepts)
*   [在 Android 模块中集成外部库](http://developer.appcelerator.com/blog/2011/11/integrating-an-external-library-in-an-android-module.html)
*   [模块开发指南 iOS 和 Android 参考模块](http://developer.appcelerator.com/blog/2011/10/module-development-guide-reference-module-for-ios-and-android.html)

希望它可以帮助某人。

# java - 重命名、删除或更改文件路径的成本

> ID：13927888
> 
> 赞同：2
> 
> 时间：2012-12-18T07:00:11.567
> 
> 标签：java, linux, file-io

`delete`、`rename`和`move`文件操作的成本是多少？哪个最快？

我想使用java，文件由linux操作系统维护。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:36:14.293

一般来说，不能说哪个更快，因为相对性能取决于多种因素。这可能是无关紧要的......因为**它们做不同的事情**并且通常不可互换。

然而：

*   如果源位置和目标位置位于同一文件系统中，则重命名和移动通常是等效的。

*   如果移动涉及在文件系统之间移动，它可能是最昂贵的。 `O(N)`必须复制字节。

*   否则，删除可能是最昂贵的。操作系统需要更新父目录并将文件使用的所有磁盘块标记为空闲。

*   实际成本还取决于操作系统和所涉及的文件系统类型，以及（在某些情况下）所涉及文件的大小 - 见上文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:04:25.337

它取决于文件系统的实现细节。在大多数文件系统中，它应该是一阶 O(1) 操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:14:29.100

*重命名*文件基本上只是以本地化的方式更改路径，因此它应该与*更改路径*一样快。删除实际上只是意味着删除一个引用，所以它也应该相当快。

您应该看到操作成本显着增加的唯一情况是*复制*文件或将路径更改*为其他分区/磁盘*。这些情况实际上需要文件系统逐块复制文件。

**实际**需要多长时间很大程度上取决于您使用的文件系统（ext3、ext4、FAT...），当然也取决于您的硬盘和硬盘连接的速度（即您的主板）。

*   如果您需要对您的问题有明确的答案，我认为您无法避免使用您的特定测试设置自行对其进行基准测试。

# python - 在字符串中显示不可打印的字符

> ID：13927889
> 
> 赞同：17
> 
> 时间：2012-12-18T07:00:13.577
> 
> 标签：python, python-3.x, escaping

是否可以使用其十六进制值可视化 python 字符串中的不可打印字符？

例如，如果我有一个带有换行符的字符串，我想用`\x0a`.

我知道`repr()`这会给我... `\n`，但我正在寻找十六进制版本。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T14:55:15.443

我不知道任何内置方法，但使用理解很容易做到：

```
import string
printable = string.ascii_letters + string.digits + string.punctuation + ' '
def hex_escape(s):
    return ''.join(c if c in printable else r'\x{0:02x}'.format(ord(c)) for c in s) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-01T00:58:17.703

我参加聚会有点晚了，但是如果您需要它来进行简单的调试，我发现这很有效：

```
string = "\n\t\nHELLO\n\t\n\a\17"

procd = [c for c in string]

print(procd)

# Prints ['\n,', '\t,', '\n,', 'H,', 'E,', 'L,', 'L,', 'O,', '\n,', '\t,', '\n,', '\x07,', '\x0f,'] 
```

丑陋，但它帮助我在字符串中找到不可打印的字符。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-18T07:10:16.147

您必须手动进行翻译；例如，使用正则表达式遍历字符串，并用等效的十六进制替换每个出现。

```
import re

replchars = re.compile(r'[\n\r]')
def replchars_to_hex(match):
    return r'\x{0:02x}'.format(ord(match.group()))

replchars.sub(replchars_to_hex, inputtext) 
```

上面的示例仅匹配换行符和回车符，但您可以扩展匹配的字符，包括使用`\x`转义码和范围。

```
>>> inputtext = 'Some example containing a newline.\nRight there.\n'
>>> replchars.sub(replchars_to_hex, inputtext)
'Some example containing a newline.\\x0aRight there.\\x0a'
>>> print(replchars.sub(replchars_to_hex, inputtext))
Some example containing a newline.\x0aRight there.\x0a 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T21:56:15.427

修改 ecatmur 的解决方案以处理不可打印的非 ASCII 字符使其变得不那么琐碎和令人讨厌：

```
def escape(c):
    if c.printable():
        return c
    c = ord(c)
    if c <= 0xff:
        return r'\x{0:02x}'.format(c)
    elif c <= '\uffff':
        return r'\u{0:04x}'.format(c)
    else:
        return r'\U{0:08x}'.format(c)

def hex_escape(s):
    return ''.join(escape(c) for c in s) 
```

当然，如果`str.isprintable`不是您想要的定义，您可以编写不同的函数。（请注意，它与其中的集合非常不同`string.printable`——除了处理非 ASCII 可打印和不可打印字符之外，它还认为`\n`、`\r`、`\t`、`\x0b`和`\x0c`是不可打印的。

你可以让它更紧凑；这只是为了显示处理 Unicode 字符串所涉及的所有步骤。例如：

```
def escape(c):
    if c.printable():
        return c
    elif c <= '\xff':
        return r'\x{0:02x}'.format(ord(c))
    else:
        return c.encode('unicode_escape').decode('ascii') 
```

真的，无论你做什么，你都必须明确地处理`\r`,`\n`和`\t`，因为我所知道的所有内置和 stdlib 函数都将通过这些特殊序列而不是它们的十六进制版本来转义它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T12:24:51.533

我曾经做过类似的事情，方法是派生一个具有我想要`str`的自定义方法的子类。`__repr__()`这不完全是您正在寻找的东西，但可能会给您一些想法。

```
# -*- coding: iso-8859-1 -*-

# special string subclass to override the default
# representation method. main purpose is to
# prefer using double quotes and avoid hex
# representation on chars with an ord > 128
class MsgStr(str):
    def __repr__(self):
        # use double quotes unless there are more of them within the string than
        # single quotes
        if self.count("'") >= self.count('"'):
            quotechar = '"'
        else:
            quotechar = "'"

        rep = [quotechar]
        for ch in self:
            # control char?
            if ord(ch) < ord(' '):
                # remove the single quotes around the escaped representation
                rep += repr(str(ch)).strip("'")
            # embedded quote matching quotechar being used?
            elif ch == quotechar:
                rep += "\\"
                rep += ch
            # else just use others as they are
            else:
                rep += ch
        rep += quotechar

        return "".join(rep)

if __name__ == "__main__":
    s1 = '\tWürttemberg'
    s2 = MsgStr(s1)
    print "str    s1:", s1
    print "MsgStr s2:", s2
    print "--only the next two should differ--"
    print "repr(s1):", repr(s1), "# uses built-in string 'repr'"
    print "repr(s2):", repr(s2), "# uses custom MsgStr 'repr'"
    print "str(s1):", str(s1)
    print "str(s2):", str(s2)
    print "repr(str(s1)):", repr(str(s1))
    print "repr(str(s2)):", repr(str(s2))
    print "MsgStr(repr(MsgStr('\tWürttemberg'))):", MsgStr(repr(MsgStr('\tWürttemberg'))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-22T20:45:35.127

还有一种方法可以打印不可打印的字符，即使它们在字符串中作为命令执行，即使在字符串中不可见（透明），也可以通过使用`len`as测量字符串的长度来观察它们的存在只需将鼠标光标放在字符串的开头并查看/计算您必须点击箭头键多少次才能从开始到结束，因为奇怪的是，例如某些单个字符的长度可能为 3，这似乎令人困惑. （不确定这是否已经在之前的答案中得到证明）

在下面的示例屏幕截图中，我粘贴了一个 135 位字符串，该字符串具有特定的结构和格式（我必须事先为某些位位置及其总长度手动创建），以便特定程序将其解释为 ascii。 m 正在运行，并且在生成的打印字符串中是不可打印的字符，例如~~“换行符”，它实际上会导致~~打印输出中的换行符（更正：换页，我的意思是新页面，而不是换行符）打印结果之间的整个空白行（见下文）：

[打印出现在打印字符串中的不可打印字符的示例](https://i.stack.imgur.com/a8Yxl.png)

```
Input a string:100100001010000000111000101000101000111011001110001000100001100010111010010101101011100001011000111011001000101001000010011101001000000
HPQGg]+\,vE!:@
>>> len('HPQGg]+\,vE!:@')
17
>>> 
```

在上面的代码摘录中，尝试`HPQGg]+\,vE!:@`直接从该站点复制粘贴字符串，看看将其粘贴到 Python IDLE 时会发生什么。

**提示：**您必须点击箭头/光标三次才能跨越两个字母 from `P`to`Q`即使它们彼此相邻，因为它们`File Separator`之间实际上有一个 ascii 命令。

然而，即使我们在将它作为字节数组解码为十六进制时得到相同的起始值，如果我们将该十六进制转换回字节，它们看起来会有所不同（可能缺少编码，不确定），但无论哪种方式，程序的上述输出打印不可打印的字符（我在尝试开发压缩方法/实验时偶然遇到了这个）。

```
>>> bytes(b'HPQGg]+\,vE!:@').hex()
'48501c514767110c5d2b5c2c7645213a40'
>>> bytes.fromhex('48501c514767110c5d2b5c2c7645213a40')
b'HP\x1cQGg\x11\x0c]+\\,vE!:@'

>>> (0x48501c514767110c5d2b5c2c7645213a40 == 0b100100001010000000111000101000101000111011001110001000100001100010111010010101101011100001011000111011001000101001000010011101001000000)
True
>>> 
```

在上面的 135 位字符串中，从大端开始的前 16 组 8 位编码每个字符（包括不可打印的），而最后一组 7 位产生`@`符号，如下所示：

[上述 135 位字符串格式的技术分解](https://i.stack.imgur.com/Qikab.png)

这里的文本是 135 位字符串的细分：

```
10010000 = H (72)
10100000 = P (80)
00111000 = x1c (28 for File Separator) *
10100010 = Q (81)
10001110 = G(71)
11001110 = g (103)
00100010 = x11 (17 for Device Control 1) *
00011000 = x0c (12 for NP form feed, new page) *
10111010 = ] (93 for right bracket ‘]’
01010110 = + (43 for + sign)
10111000 = \ (92 for backslash)
01011000  = , (44 for comma, ‘,’)
11101100  = v (118)
10001010 = E (69)
01000010 = ! (33 for exclamation)
01110100 = : (58  for colon ‘:’)
1000000  =  @ (64 for ‘@’ sign) 
```

所以在结束时，关于将不可打印为十六进制的子问题的答案，在上面的字节数组中出现了`x1c`表示文件分隔符命令的字母，这也在提示中注明。`b`如果不包括左侧的前缀，则字节数组可以被视为字符串，并且该值再次显示在打印字符串中，尽管它是不可见的（尽管可以通过上面的提示和`len`命令观察到它的存在）。

# sql - 具有不同时间戳的重复条目

> ID：13927890
> 
> 赞同：2
> 
> 时间：2012-12-18T07:00:20.433
> 
> 标签：sql, sql-server, sql-server-2008

我有一个按名称命名的客户表：`Customer_SCD`在 SQL 中，我有 3 列：`Customer_Name`，`Customer_ID` `Customer_TimeStamp`

此表中存在具有不同**Timestamp**的重复条目。

例如

```
ABC, 1, 2012-12-05 11:58:20.370

ABC, 1, 2012-12-03 12:11:09.840 
```

我想从数据库中消除它并保持第一个时间/日期可用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:09:05.557

这行得通，试试看：

```
DELETE  Customer_SCD
OUTPUT  deleted.*
FROM    Customer_SCD b
JOIN    (
    SELECT  MIN(a.Customer_TimeStamp) Customer_TimeStamp,
            Customer_ID,
            Customer_Name
    FROM    Customer_SCD a
    GROUP   BY a.Customer_ID, a.Customer_Name
) c ON 
    c.Customer_ID = b.Customer_ID
AND c.Customer_Name = b.Customer_Name
AND c.Customer_TimeStamp <> b.Customer_TimeStamp 
```

在子查询中，它确定每条记录的第一条记录`Customer_Name`，`Customer_ID`然后删除所有其他记录的重复记录。我还添加了`OUTPUT`返回受语句影响的行的子句。

您也可以使用排名功能来做到这一点`ROW_NUMBER`：

```
DELETE  Customer_SCD
OUTPUT  deleted.*
FROM    Customer_SCD b
JOIN    (
    SELECT  Customer_ID,
            Customer_Name,
            Customer_TimeStamp,
            ROW_NUMBER() OVER (PARTITION BY Customer_ID, Customer_Name ORDER BY Customer_TimeStamp) num
    FROM    Customer_SCD
) c ON 
    c.Customer_ID = b.Customer_ID
AND c.Customer_Name = b.Customer_Name
AND c.Customer_TimeStamp = b.Customer_TimeStamp
AND c.num <> 1 
```

查看哪个具有较小的查询成本并使用它，当我检查它时，第一种方法更有效（它具有更好的执行计划）。

这是一个**[SQL Fiddle](http://sqlfiddle.com/#!3/70fe3/1/0)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:09:24.580

以下查询将为您提供要保留的结果。

```
Select Customer_Name, Customer_ID, MIN(Customer_TimeStamp) as Customer_TimeStamp
from Customer_SCD 
group by Customer_Name, Customer_ID 
```

将结果存储在表变量中，例如`@correctTbl`

然后加入此表并删除重复项

```
delete 
from Customer_SCD a
inner join @correctTbl b on a.Customer_Name = b.Customer_Name and a.Customer_ID = b.Customer_ID and a.Customer_TimeStamp != b.Customer_TimeStamp 
```

# android - Android，Proguard 到底是做什么的？

> ID：13927894
> 
> 赞同：1
> 
> 时间：2012-12-18T07:00:56.813
> 
> 标签：android, proguard

我正在使用 Proguard 来混淆我的代码。所以，我在`project.propertise`文件中激活它。

之后我通过 apktool 反编译了 APK 文件。

反编译的文件里有res、smali和AndroidManifest三个项目。在 res 文件夹中，我可以清楚地看到我的图像 :) 在 smali 中，这并不容易理解，但我仍然可以找到我的代码。它是这样的：

```
.method public static u()Ljava/lang/String;
    .locals 1

    const/4 v0, 0x1

    packed-switch v0, :pswitch_data_0

    const-string v0, "https://uat.somewhere.com/ebroking/wecos/mobiletrader/aboutus.html"

    :goto_0
    return-object v0

    :pswitch_0
    const-string v0, "https://www2.somewhere.com/ebroking/wecos/mobiletrader/aboutus.html"

    goto :goto_0

    :pswitch_data_0
    .packed-switch 0x1
        :pswitch_0
    .end packed-switch 
```

如果我转到包名称（活动），有几个文件，如 a.smali、aa.smali、ab.smali、ac.smali 等。此外，在这个文件夹中我可以看到我的所有活动。例如，在我的应用程序中，我有一个名为`MSAboutUs`. 在 smali 文件夹中，它的名称是 MSAboutUs.smali。当我打开它时，我可以看到以下代码：

```
 .class public Lcom/pbb/mystock/activities/MSAboutUs;
.super Lcom/pbb/mystock/activities/ay;

# instance fields
.field private j:Landroid/widget/Button;

.field private k:Landroid/webkit/WebView;

# direct methods
.method public constructor <init>()V
    .locals 0

    invoke-direct {p0}, Lcom/pbb/mystock/activities/ay;-><init>()V

    return-void
.end method

# virtual methods
.method public onCreate(Landroid/os/Bundle;)V
    .locals 3

    invoke-super {p0, p1}, Lcom/pbb/mystock/activities/ay;->onCreate(Landroid/os/Bundle;)V

    const v0, 0x7f030004

    invoke-virtual {p0, v0}, Lcom/pbb/mystock/activities/MSAboutUs;->setContentView(I)V

    const-string v0, ""

    const-string v1, "Loading..."

    const/4 v2, 0x1

    invoke-static {p0, v0, v1, v2}, Landroid/app/ProgressDialog;->show(Landroid/content/Context;Ljava/lang/CharSequence;Ljava/lang/CharSequence;Z)Landroid/app/ProgressDialog;

    move-result-object v0

    iput-object v0, p0, Lcom/pbb/mystock/activities/MSAboutUs;->a:Landroid/app/ProgressDialog;

    const v0, 0x7f060008

    invoke-virtual {p0, v0}, Lcom/pbb/mystock/activities/MSAboutUs;->findViewById(I)Landroid/view/View;

    move-result-object v0

    check-cast v0, Landroid/webkit/WebView;

    iput-object v0, p0, Lcom/pbb/mystock/activities/MSAboutUs;->k:Landroid/webkit/WebView;

    iget-object v0, p0, Lcom/pbb/mystock/activities/MSAboutUs;->k:Landroid/webkit/WebView;

    new-instance v1, Lcom/pbb/mystock/activities/a;

    invoke-direct {v1, p0}, Lcom/pbb/mystock/activities/a;-><init>(Lcom/pbb/mystock/activities/MSAboutUs;)V

    invoke-virtual {v0, v1}, Landroid/webkit/WebView;->setWebViewClient(Landroid/webkit/WebViewClient;)V

    iget-object v0, p0, Lcom/pbb/mystock/activities/MSAboutUs;->k:Landroid/webkit/WebView;

    invoke-static {}, Lcom/pbb/mystock/a/b;->u()Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v0, v1}, Landroid/webkit/WebView;->loadUrl(Ljava/lang/String;)V

    const v0, 0x7f060007

    invoke-virtual {p0, v0}, Lcom/pbb/mystock/activities/MSAboutUs;->findViewById(I)Landroid/view/View;

    move-result-object v0

    check-cast v0, Landroid/widget/Button;

    iput-object v0, p0, Lcom/pbb/mystock/activities/MSAboutUs;->j:Landroid/widget/Button;

    iget-object v0, p0, Lcom/pbb/mystock/activities/MSAboutUs;->j:Landroid/widget/Button;

    new-instance v1, Lcom/pbb/mystock/activities/b;

    invoke-direct {v1, p0}, Lcom/pbb/mystock/activities/b;-><init>(Lcom/pbb/mystock/activities/MSAboutUs;)V

    invoke-virtual {v0, v1}, Landroid/widget/Button;->setOnClickListener(Landroid/view/View$OnClickListener;)V

    const v0, 0x7f060009

    invoke-virtual {p0, v0}, Lcom/pbb/mystock/activities/MSAboutUs;->findViewById(I)Landroid/view/View;

    move-result-object v0

    check-cast v0, Landroid/widget/Button;

    const v1, 0x7f06000a

    invoke-virtual {p0, v1}, Lcom/pbb/mystock/activities/MSAboutUs;->findViewById(I)Landroid/view/View;

    move-result-object v1

    check-cast v1, Landroid/widget/HorizontalScrollView;

    invoke-virtual {p0, v0, v1}, Lcom/pbb/mystock/activities/MSAboutUs;->a(Landroid/widget/Button;Landroid/widget/HorizontalScrollView;)V

    invoke-virtual {p0}, Lcom/pbb/mystock/activities/MSAboutUs;->d()V

    return-void
.end method

.method public onKeyDown(ILandroid/view/KeyEvent;)Z
    .locals 1

    const/4 v0, 0x4

    if-ne p1, v0, :cond_0

    const/high16 v0, 0x7f04

    invoke-virtual {p0, v0}, Lcom/pbb/mystock/activities/MSAboutUs;->getString(I)Ljava/lang/String;

    move-result-object v0

    invoke-virtual {p0, v0}, Lcom/pbb/mystock/activities/MSAboutUs;->b(Ljava/lang/String;)V

    :cond_0
    const/4 v0, 0x0

    return v0
.end method 
```

这与其他活动相同。我可以看到登录活动 EditTexts 和按钮。我敢肯定，花几个小时来了解什么是架构，然后操纵代码是可能的。

所以我的问题是 Progaurd 到底在做什么？我认为它改变了类、方法和变量的名称，但似乎没有任何改变。

在`prject.properties`应用程序中，我添加了这一行：

```
proguard.config=proguard.cfg 
```

并`proguard.cfg`包括以下几行：

```
# This is a configuration file for ProGuard.
# http://proguard.sourceforge.net/index.html#manual/usage.html

-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-verbose

# Optimization is turned off by default. Dex does not like code run
# through the ProGuard optimize and preverify steps (and performs some
# of these optimizations on its own).
-dontoptimize
-dontpreverify
# Note that if you want to enable optimization, you cannot just
# include optimization flags in your own project configuration file;
# instead you will need to point to the
# "proguard-android-optimize.txt" file instead of this one from your
# project.properties file.

-keepattributes *Annotation*
-keep public class com.google.vending.licensing.ILicensingService
-keep public class com.android.vending.licensing.ILicensingService

# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native
-keepclasseswithmembernames class * {
    native <methods>;
}

# keep setters in Views so that animations can still work.
# see http://proguard.sourceforge.net/manual/examples.html#beans
-keepclassmembers public class * extends android.view.View {
   void set*(***);
   *** get*();
}

# We want to keep methods in Activity that could be used in the XML attribute onClick
-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

# The support library contains references to newer platform versions.
# Don't warn about those in case this app is linking against an older
# platform version.  We know about them, and they are safe.
-dontwarn android.support.**

# Remove all logs
-assumenosideeffects class android.util.Log {
    public static *** v(...);
    public static *** d(...);
    public static *** i(...);
    public static *** w(...);
    public static *** e(...);
}

-keepattributes JavascriptInterface
-keep public class com.pbb.mystock.activities.MSLogin2$MyJavaScriptInterface
-keep public class * implements com.pbb.mystock.activities.MSLogin2$JavaScriptInterface
-keepclassmembers class com.pbb.mystock.activities.MSLogin2$JavaScriptInterface { 
    void processHTML(***); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T07:06:46.960

它的作用与在其他平台上的作用相同，有关详细信息，请参阅[常见问题解答](http://proguard.sourceforge.net/#FAQ.html)。在 Andorid 上，您必须保留清单中定义的活动、服务和其他组件的名称，因为操作系统按名称引用它们。生命周期方法也是如此，例如`onCreate()`. 资源不会以任何方式修改。非组件类 (POJO) 将被重命名，它们的方法和字段也将被重命名。它最终取决于您使用的配置文件的内容。

正如您所注意到的，这并不能完美地隐藏您的代码，什么也没有。它只是让反编译时更难阅读。你可以试试[DexGuard](http://www.saikoa.com/dexguard)，它做得更多，但最终如果有人有足够的决心，他们可以逆转你的代码（本机代码也是如此，等等）

# android - 带有文本和图像的 Android 按钮

> ID：13927896
> 
> 赞同：3
> 
> 时间：2012-12-18T07:01:06.650
> 
> 标签：android, button

在看到有关此功能的许多问题并尝试遵循答案后，我想知道是否有更清晰的示例？

编辑：我试图制作一个大按钮，其中包含“中间”的图像和文本。它必须表现得像一个按钮（StateList drawable），并且图像/文本对应该分组并居中（作为一个组）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T07:17:24.387

如果您喜欢带有图像 + 文本的 Button，那么为什么不使用**CompoundDrawable**呢？

例如：

![在此处输入图像描述](../Images/b95a70c2ae2472521783cd6b7537c56b.png)

另请检查：[如何使用复合可绘制对象而不是包含 ImageView 和 TextView 的 LinearLayout](https://stackoverflow.com/questions/8318765/how-do-i-use-a-compound-drawable-instead-of-a-linearlayout-that-contains-an-imag)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:01:06.650

为了节省其他人一些时间，我提供以下内容：

布局/some_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    android:id="@+id/menu_ok"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    <!-- StateList Drawable to make it look like a button -->
    android:background="@drawable/btn_std_holo_states"
    <!-- Required so you can click on it like a button -->
    android:clickable="true"    
    <!-- Recommended min height from the guidelines -->
    android:minHeight="48dp"    
    <!-- OnClickEvent definition -->
    android:onClick="onClickOk" >   

    <!-- Compound drawable of graphic and text -->
    <TextView
        android:id="@+id/txt_ok"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        <!-- Center both the graphic and text inside the button -->
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        <!-- Draw the graphic to the left of the text -->
        android:drawableLeft="@drawable/ic_ok"
        <!-- Space between the graphic and the text-->
        android:drawablePadding="16dp"
        <!-- ensures the text and graphic are both centered vertically -->
        android:gravity="center"
        <!-- Text of the button -->
        android:text="@android:string/ok"
        <!-- Change the font to match the standard button settings (optional) -->
        android:textAppearance="?android:attr/textAppearanceButton" />

</RelativeLayout> 
```

drawable/btn_std_holo_states.xml（上面引用过）

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/abs__btn_cab_done_pressed_holo_dark" android:state_pressed="true"/>
    <item android:drawable="@drawable/abs__btn_cab_done_focused_holo_dark" android:state_enabled="true" android:state_focused="true"/>
    <item android:drawable="@android:color/transparent" android:state_enabled="true"/>
    <item android:drawable="@android:color/transparent"/>

</selector> 
```

注意：这里不同的 @drawable 和 @android:color 设置可以是任何东西，只是为了做一个完整的例子而提供

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T07:17:39.350

试试这个自定义的 Drawable：

```
class BackgroundDrawable extends StateListDrawable {
    private StateListDrawable mDrawable;
    private Bitmap mBitmap;
    private Matrix mMatrix;
    private boolean mScale;
    private int mGravity;
    private int mDx;
    private int mDy;

    public BackgroundDrawable(StateListDrawable sld, Resources res, int resId, boolean scale, int gravity, int dx, int dy) {
        mDrawable = sld;
        mBitmap = BitmapFactory.decodeResource(res, resId);
        mMatrix =  new Matrix();
        mScale = scale;
        mGravity = gravity;
        mDx = dx;
        mDy = dy;
    }

    public static void setupBackground(View v, int resId, boolean scale, int gravity, int horizontalPadding, int verticalPadding) {
        Drawable d = v.getBackground();
        if (d instanceof StateListDrawable) {
            StateListDrawable sld = (StateListDrawable) d;
            Drawable drawable = new BackgroundDrawable(sld, v.getResources(), resId, scale, gravity, horizontalPadding, verticalPadding);
            v.setBackgroundDrawable(drawable);
        }
    }

    @Override
    protected boolean onStateChange(int[] stateSet) {
        invalidateSelf();
        return super.onStateChange(stateSet);
    }

    @Override
    protected void onBoundsChange(Rect bounds) {
        mDrawable.setBounds(bounds);
        Rect b = new Rect(bounds);
        b.inset(mDx, mDy);
        RectF src = new RectF(0, 0, mBitmap.getWidth(), mBitmap.getHeight());
        RectF dst = new RectF(b);
        float[] values = new float[9];
        if (mScale) {
            mMatrix.setRectToRect(src, dst, ScaleToFit.START);
        }
        mMatrix.getValues(values);
        float sx = values[Matrix.MSCALE_X];
        float sy = values[Matrix.MSCALE_Y];
        Rect outRect = new Rect();
        Gravity.apply(mGravity, (int) (src.width() * sx), (int) (src.height() * sy), b, outRect);
        mMatrix.postTranslate(outRect.left, outRect.top);
    }

    @Override
    public void draw(Canvas canvas) {
        int[] stateSet = getState();
        mDrawable.setState(stateSet);
        mDrawable.draw(canvas);
        canvas.drawBitmap(mBitmap, mMatrix, null);
    }
} 
```

以及如何使用它：

```
Button b0 = (Button) findViewById(R.id.b0);
BackgroundDrawable.setupBackground(b0, R.drawable.ic_launcher, false, Gravity.BOTTOM | Gravity.RIGHT, 10, 5);
Button b1 = (Button) findViewById(R.id.b1);
BackgroundDrawable.setupBackground(b1, R.drawable.ic_launcher, false, Gravity.TOP, 0, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T07:09:44.120

试试这个：

```
Drawable appImg = getApplicationContext().getResources().getDrawable( R.drawable.ic_launcher );
appImg.setBounds( 0, 0, appImg.getIntrinsicHeight(), appImg.getIntrinsicWidth() );

Button btn_ok = (Button) findViewById(R.id.ok);
btn_ok.setCompoundDrawables( null, null, appImg, null ); 
```

希望它可以帮助你。

谢谢。

# java - Java中html文本代码的正则表达式

> ID：13927897
> 
> 赞同：1
> 
> 时间：2012-12-18T07:01:07.930
> 
> 标签：java, regex

我有一个带有标题的 html 文本文件，我想提取其中的唯一文本

例子：

```
<h1 class="title"><a href="dtb.htm#rgn_txt_0001_0001">Fire Safety</a></h1>
<h1><a href="dtb.htm#rgn_txt_0002_0001">About this book</a></h1>
<h1><a href="dtb.htm#rgn_par_0002_0008">1</a></h1>
<h1><a href="dtb.htm#rgn_txt_0003_0001">Contents of this book</a></h1> 
```

我只想从 HTML 代码中提取以下文本：

**消防安全, 关于本书, 1, 本书内容**

我尝试了很多事情，例如：

```
Pattern pattern = Pattern.compile("<a[^>]href\\s=\\s*\"\\s*([^\"]*)");
Matcher matcher = pattern.matcher(input); 
```

其中**输入**是html数据。

在控制台上没有得到任何结果，或者有时我只得到href :(

我该如何解决这个问题？

让我知道！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:08:07.403

我强烈建议使用 HTML 解析器，例如[TagSoup](http://home.ccil.org/~cowan/XML/tagsoup/)、[Jericho](http://jericho.htmlparser.net/docs/index.html)、[NekoHTML](http://sourceforge.net/projects/nekohtml/)、[HTML Parser](http://htmlparser.sourceforge.net/)等

# android - Android安装过程及Application目录

> ID：13927900
> 
> 赞同：1
> 
> 时间：2012-12-18T07:01:12.297
> 
> 标签：android, android-install-apk

我读到在 .apk 安装过程中创建了一个新用户，并使用这个新用户权限，创建了内部存储中的 Applications 目录（在此处提取 .apk）（在 /data/app 中，不太确定）。我在 /data/app 中找不到任何应用程序目录，甚至 /system/app 也包含 .apk 而不是应用程序目录。有人可以解释我在哪里可以找到应用程序目录吗？

另外在安装过程中会发生什么（我有兴趣知道是否将某些特定文件复制到特定位置）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:09:25.803

你读错了:) APK 没有在文件系统上解压，只是在内存中解压缩。因此，您只会在 、 等中找到 APK 文件`/data/app`。`/system/app`整个过程取决于版本（例如 Jelly Bean 添加了前向锁定/加密）。您需要阅读 Android 源代码以获取实际详细信息。开始`PackageManagerService.java`。

# json - 使用分页器时 Jqgrid 不会重新加载

> ID：13927904
> 
> 赞同：0
> 
> 时间：2012-12-18T07:01:37.047
> 
> 标签：json, jqgrid, refresh, pager

我希望我的 jqgrid 以编程方式使用重新加载的数据移动下一页。例如：每 5 秒换页并获取刷新数据。---> 数据类型：'json' <--- 在 loop() 函数中。带来重新加载的页面，但它没有通过下一页。卡在第一页。如果我删除它转到下一页，但页面不刷新。

我阅读并尝试过，尝试过，尝试过一切，但到目前为止还没有运气。请帮忙..

```
 <script>
       function fill() {
        jQuery("#jqGrid").jqGrid({
            url: '@Url.Content("~/Handler/GetAjaxGridData")',
            datatype: 'json',
            height: 'auto',
            altRows: true,
            loadonce:true,
            pager: '#pager',
            rowNum: 3,
            colNames: ['birim_adi', 'durum'],
            colModel: [
                     { name: 'cell.birim_adi', index: 'birim_adi' },
                      { name: 'cell.durum', index: 'durum' }
            ],
            jsonReader: {
                repeatitems: false,
                root: function (obj) { return obj.rows; },
                page: function (obj) { return 1; },
                total: function (obj) { return 1; },
                records: function (obj) { return obj.rows.length; }
            },
            loadComplete: function (data) {
                var total_pages = $("#sp_1_pager").text(); // total pages
                $('#hdn_total_pages').val(total_pages);
            },
            ajaxGridOptions: { cache: false }
        });
    }
    function loop() {
        var i = 1;
        setInterval(function () {
            var total_pages = $('#hdn_total_pages').val();
            $("#jqGrid").setGridParam({
                datatype: 'json', // <--When I delete it goes to another page, but the page does not refresh.
                page: i,
            }).trigger('reloadGrid');
            i++;
            if (i > total_pages) { i = 1; }
        }, 5000);
    }
       </script>
       <script>
        $(function () {
        fill();
        loop();
       });
       </script>
<table id="jqGrid"></table>
<div id="pager"></div>
<input type="hidden" id="hdn_total_pages" value="1" /> 
```

然后我的json是这样的：

```
 {
"total": 1,
"page": 1,
"records": 6,
"rows": [
    {
        "id": 1,
        "cell": {
            "birim_adi": "a",
            "durum": "test"
        }
    },
    {
        "id": 2,
        "cell": {
            "birim_adi": "b",
            "durum": "test1"
        }
    },
    {
        "id": 3,
        "cell": {
            "birim_adi": "c",
            "durum": "test3"
        }
    },
    {
        "id": 4,
        "cell": {
            "birim_adi": "d",
            "durum": "test4"
        }
    }
]
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:27:59.807

jsonReader 正在为页面返回硬编码值“1”。看起来您的数据符合 jqGrid 将自动使用的结构。您可以尝试完全删除 jsonReader 部分并试一试。

如果这不起作用（或者您的数据名称与 jqGrid 预期的名称不同），您将需要查看修复 jsonReader 以返回正确的值。

查看有关自定义 jsonReader 以使用不同数据格式的[博客条目。](http://vikingerik.wordpress.com/2012/12/20/jqgrid-and-flat-json-data-with-paging/)它可能会帮助您解决页面卡住的问题。（完全披露：我是作者。）

# sql-server-2008 - 是否可以使用多值参数调用存储过程？

> ID：13927906
> 
> 赞同：0
> 
> 时间：2012-12-18T07:01:48.743
> 
> 标签：sql-server-2008, stored-procedures

我正在研究一个存储过程。这会是一个可能的电话吗？-

```
exec [dbo].[prc_RPT_Respondent_Answer] '20121011', '20121017' , 18964 , "3", "30,31,32,33,34,35,36,37,38,39,130" 
```

我猜这个 `"30,31,32,33,34,35,36,37,38,39,130"`参数是由如下代码处理的（来自引用的sproc：

```
BEGIN
    INSERT 
    INTO #tempClientLK_ResponseStatuses
    SELECT CONVERT(INT, val) FROM dbo.Split(@ClientResponseRange, ',')  
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:16:57.773

您可以使用以下网址，它可能会帮助您解决问题

[如何将逗号分隔的值拆分为列](https://stackoverflow.com/questions/10581772/sql-server-2008-how-to-split-a-comma-seperated-value-to-columns)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:35:39.397

是的，这应该有效。这种方法我已经用过几次了。如果您询问如何编写该表值函数 dbo.Split() 那么您可以查看此链接-

[http://blog.logiclabz.com/sql-server/split-function-in-sql-server-to-break-comma-separated-strings-into-table.aspx](http://blog.logiclabz.com/sql-server/split-function-in-sql-server-to-break-comma-separated-strings-into-table.aspx)

# liferay - Liferay 6.1 portlet 在 5.2.3 中工作不正确

> ID：13927914
> 
> 赞同：3
> 
> 时间：2012-12-18T07:02:00.627
> 
> 标签：liferay, portlet

我有一个在 Liferay 6.1 门户上运行良好的 portlet，但是当我在 Liferay 5.2.3 上部署它时，我的配置页面甚至没有打开。我应该如何使它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:06:32.997

这是对一个非常相似的问题的一个很好的权威[答案。](https://stackoverflow.com/a/13910680/468763)

较新版本的 portlet 不是为在较旧的 Liferay 安装上工作而设计的。因为它们是使用最新的 plugins-sdk 和自上一个版本以来发生变化的不同 jar 编译的。

因此，如果您希望新版本的 portlet 与任何旧版本一起工作，那么您必须使用带有插件 SDK 的旧版本 Liferay 编译 portlet。而且我确信 Liferay 6.1 portlet 中有很多类和 jsp-tags 在 Liferay 5.2.3 中不起作用。

# java - 如何在 Java 中构建链接列表？

> ID：13927915
> 
> 赞同：0
> 
> 时间：2012-12-18T07:02:01.603
> 
> 标签：java, linked-list

> **可能重复：**
> [如何在 Java 中实现链表？](https://stackoverflow.com/questions/10042/how-do-i-implement-a-linked-list-in-java)

我们知道java中没有指针。那么在java中构建链接列表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T07:07:56.943

最好的方法是*不*构建它。Java在其相当[大的集合类选择中](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)已经有一个[LinkedList](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)类。

最好使用语言/库已经提供的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:06:56.347

你有一个对象，它基本上包含两个变量，没有方法（最低限度；但是，如果你愿意，你可以有方法）。就像是：

```
class Link
{
   int data;
   Link next;
} 
```

然后你像任何其他对象一样创建一个新的链接。将数据设置为您希望节点保存的数据。然后将 Link 节点设置为它将“指向”的节点（如果它不指向另一个节点，则为 null）。

注意：如果需要，您还可以拥有前一个节点（指向前一个节点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T07:13:54.097

尝试使用此代码。

```
public class Main {
public static void main(String[] args) {
LinkedList theList = new LinkedList();
LinkedListIterator theItr;

theItr = theList.zeroth();
printList(theList);

for (int i = 0; i < 10; i++) {
  theList.insert(new Integer(i), theItr);
  printList(theList);
  theItr.advance();
}
System.out.println("Size was: " + listSize(theList));

}

public static int listSize(LinkedList theList) {
LinkedListIterator itr;
int size = 0;
for (itr = theList.first(); itr.isValid(); itr.advance())
  size++;
return size;
  }

 public static void printList(LinkedList theList) {
if (theList.isEmpty())
   System.out.print("Empty list");
 else {
   LinkedListIterator itr = theList.first();
   for (; itr.isValid(); itr.advance())
    System.out.print(itr.retrieve() + " ");
  }
  System.out.println();
}
}

class LinkedList {
 public LinkedList() {
header = new ListNode(null);
 }

public boolean isEmpty() {
return header.next == null;
}

public void makeEmpty() {
header.next = null;
}

 public LinkedListIterator zeroth() {
  return new LinkedListIterator(header);
 }

 public LinkedListIterator first() {
 return new LinkedListIterator(header.next);
 }

  public void insert(Object x, LinkedListIterator p) {
  if (p != null && p.current != null)
  p.current.next = new ListNode(x, p.current.next);
}

 public LinkedListIterator find(Object x) {
ListNode itr = header.next;

while (itr != null && !itr.element.equals(x))
  itr = itr.next;

return new LinkedListIterator(itr);
 }

  public LinkedListIterator findPrevious(Object x) {
  ListNode itr = header;

 while (itr.next != null && !itr.next.element.equals(x))
  itr = itr.next;

return new LinkedListIterator(itr);
  }

public void remove(Object x) {
LinkedListIterator p = findPrevious(x);

if (p.current.next != null)
  p.current.next = p.current.next.next; // Bypass deleted node
}

 private ListNode header;

}

class LinkedListIterator {
LinkedListIterator(ListNode theNode) {
current = theNode;
  }

  public boolean isValid() {
 return current != null;
  }

  public Object retrieve() {
return isValid() ? current.element : null;
  }

public void advance() {
  if (isValid())
  current = current.next;
  }

  ListNode current;
}

class ListNode {
  public ListNode(Object theElement) {
this(theElement, null);
  }

  public ListNode(Object theElement, ListNode n) {
   element = theElement;
    next = n;
  }

  public Object element;

  public ListNode next;
} 
```

# javascript - 带布尔值的数学表达式

> ID：13927928
> 
> 赞同：0
> 
> 时间：2012-12-18T07:03:11.423
> 
> 标签：javascript, math, boolean, expression

我们的导师在测验中给了我们以下代码，我不知道发生了什么。到目前为止还没有收到她的回音，有人可以对此有所了解吗？到目前为止，我在编程学习中还没有见过这样的表达方式

```
var a = 3;
var b = 5;
var c = 7;
var d = 8;
var e;

e = a < b && c++ > d;

document.write(c); 
```

答案是 7

```
e = a > b && c++ > d;

document.write(c); 
```

答案是 8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:18:45.803

```
var a = 3;
var b = 5;
var c = 7;
var d = 8;
var e;

e = a < b && c++ > d;

document.write(c); 
```

重要的部分是 c=7

```
e = a < b && c++ > d; 
```

这使得 c=8 (c++)

第二个 e = a > b && c++ > d;

因为 a 不大于 b，所以 Javascript 无法解决第二部分（因为无论其结果如何，e 的结果都是错误的）

所以第二个应该是 7 并且顶部应该是 8 给定你给它的值

[http://jsfiddle.net/ZYVrH/1/](http://jsfiddle.net/ZYVrH/1/)为例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:18:15.717

e = a > b && c++ > d;

像这样的条件 - (exp1 && exp2)，当 exp1 结果为假时，永远不会计算 exp2。所以在上面的表达式中，你有 a > b && c++ > d。由于 a 不大于 b 因此，即使有 ++ 运算符， c 也永远不会递增。所以当你打印 c 时，它是 7。

鉴于，e = a < b && c++ > d; 由于 a 小于 b，计算继续计算 c++ > d，结果 c 递增，其值为 8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:10:38.143

1.  a < b == true，javascript VM 计算布尔表达式的下一部分并增加**c**变量。
2.  **a > b == false，javascript VM不计算下一部分，因为当逻辑表达式的**第一个参数为false时不需要这样做。

# android - 如何在钛应用加速器中将二进制数据字符串转换为图像？

> ID：13927931
> 
> 赞同：0
> 
> 时间：2012-12-18T07:03:15.333
> 
> 标签：android, image, binary, titanium, appcelerator

嗨，我需要知道如何将二进制字符串解码为图像格式，以便将其分配给 imageview。这是我用来将图像转换为二进制的内容。

```
function toBin(str){
var st,i,j,d;
var arr = [];
var len = str.length;
for (i = 1; i<=len; i++){
           //reverse so its like a stack
d = str.charCodeAt(len-i);
for (j = 0; j < 8; j++) {
st = d%2 == '0' ? "class='zero'" : "" 
arr.push(d%2);
d = Math.floor(d/2);
}
}
   //reverse all bits again.
return arr.reverse().join("");

} 
```

我需要知道如何从二进制字符串反转回图像。请帮忙。

阿里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T12:35:19.940

您可以在 Titanium 中使用编码和解码

```
Ti.Utils.base64encode();
Ti.Utils.base64decode(); 
```

# php - 有没有更好的方法来使用 Youtube PHP API

> ID：13927933
> 
> 赞同：5
> 
> 时间：2012-12-18T07:03:26.380
> 
> 标签：php, ajax, curl, youtube, youtube-api

我正在使用 youtube php Zend API 库。

在此 API 中，我首先发送请求以获取临时/确认代码。

然后请求获取访问令牌。

在此之后我想获取用户信息然后另一个请求

```
https://gdata.youtube.com/feeds/api/users/default 
```

对于当前用户它返回带有 userId 的 url

然后最后我从那个 xml 格式的 url 获取用户信息。

我受够了这些如此多的请求，这也需要很多时间。

有没有另一种方法可以通过减少`curl/ajax`请求的数量来获得这些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:13:15.580

您可以使用`curl_multi_*`并行处理不同用户的请求。它不会加快每个用户的流程，但由于您可以并行执行 10-30 个或更多请求，因此它将加快整个交易的速度。

唯一的复杂之处是您需要为每个请求单独的 cookie 文件。这是让您入门的示例代码：

```
$chs = array();
$cmh = curl_multi_init();
for ($t = 0; $t < $tc; $t++)
{
    $chs[$t] = curl_init();
    // set $chs[$t] options
    curl_multi_add_handle($cmh, $chs[$t]);
}

$running=null;
do {
    curl_multi_exec($cmh, $running);
} while ($running > 0);

for ($t = 0; $t < $tc; $t++)
{
    $contents[$t] = curl_multi_getcontent($chs[$t]);
    // work with $contencts[$t]
    curl_multi_remove_handle($cmh, $chs[$t]);
    curl_close($chs[$t]);
}
curl_multi_close($cmh); 
```

# sql - 如果我使用 SQLAlchemy ORM，这是否意味着我停止直接查询后端数据库？

> ID：13927934
> 
> 赞同：0
> 
> 时间：2012-12-18T07:03:26.820
> 
> 标签：sql, database, orm, sqlalchemy

如果我使用 SQLAlchemy 的 ORM 来创建对象并存储它们，这是否意味着我几乎也只能通过 SQLAlchemy 从数据库中检索数据？由 SQLAlchemy ORM 创建的基础表是否仍然正常？我仍然可以直接查询数据库并获得有用的发现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:03:59.660

ORM 只会在定义时创建和修改数据库记录。您将能够像往常一样查询它们。使用 SqlAlchemy 不会以任何方式限制您的正常数据库访问。SqlAlchemy 可以将使用的查询输出到日志文件中，以查看它们到底在做什么。这与 html 生成完全不同，您不想查看它创建的 html。

# ruby-on-rails-3.2 - 重命名资源后，活动管理员中未显示验证消息

> ID：13927937
> 
> 赞同：0
> 
> 时间：2012-12-18T07:03:40.987
> 
> 标签：ruby-on-rails-3.2, activeadmin

我的活动管理员的名字是 PartnerSite，在我添加了验证之后，消息就会正确显示。但是在我使用 ActiveAdmin.register PartnerSite 将我的活动管理员从合作伙伴站点重命名为子域之后， :as => "Subdomain" 它没有显示错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:40:48.357

检查这个答案：[在活动管理员中显示错误消息有很多关系表](https://stackoverflow.com/questions/13395087/showing-error-messages-in-active-admin-for-has-many-relationship-table)。它有一个拉取请求的链接，您所要做的（假设您使用的是 5.0.1）就是`f.semantic_errors *f.object.errors.keys`在您的表单中添加。

# android - 适用于 Android 应用的 Google Map Overlay

> ID：13927940
> 
> 赞同：1
> 
> 时间：2012-12-18T07:04:00.173
> 
> 标签：android, google-maps

我有一个地图图像，我想在我的 android 应用程序中显示为 Google 地图上的叠加层。但图像大小为 9 mb。我把它作为一个覆盖，当用户尝试缩放地图时，应用程序由于内存问题而崩溃。

有谁知道我们如何在 android 应用程序中使用更少的内存将图像显示为覆盖？

高度赞赏帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:14:00.367

您可能希望在显示之前缩放图像，如此[处所述](http://graphics-geek.blogspot.be/2012/08/thanks-for-memories.html)

# gdb - 如何使用 gdb 处理远程信号？

> ID：13927942
> 
> 赞同：0
> 
> 时间：2012-12-18T07:04:00.783
> 
> 标签：gdb, gdbserver

我想远程调试程序。但问题是我的程序正在使用信号。在本地机器上，我使用以下命令处理信号： `handle SIG64 nostop noprint` 但是对于使用 gdbserver 进行远程调试，我不知道如何处理信号。这是我正在做的事情：

```
remote$ gdbserver :2345 hello_world
Process hello_world created; pid = 2509
Listening on port 2345

local$ gdb -q hello_world
Reading symbols from /home/user/hello_world...done.
(gdb) target remote 192.168.0.11:2345
Remote debugging using 192.168.0.11:2345
0x002f3850 in ?? () from /lib/ld-linux.so.2
(gdb) continue 
```

任何帮助将不胜感激。

谢谢和BR，尤维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:13:00.700

该`handle SIG64 nostop noprint`命令也应该可以远程工作。

# ant - 在 ant 中显示 exec 任务的输出

> ID：13927947
> 
> 赞同：0
> 
> 时间：2012-12-18T07:04:25.183
> 
> 标签：ant, scp

我正在使用[`exec`](http://ant.apache.org/manual/Tasks/exec.html)Ant 任务编写文件。它工作正常，但不显示 scp 命令的输出。

下面是代码

```
 <target name="scp-jar" depends = "jar">
      <exec executable="/usr/bin/scp">
          <arg value="my.jar"/>
          <arg value="myserver:dir"/>          
      </exec>
  </target> 
```

我必须进行哪些更改才能显示 scp 命令的文件进度输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:16:08.210

默认情况下，命令的输出被写入标准输出，您可以指定输出属性将其更改为文件。更多细节在这里：[http ://ant.apache.org/manual/Tasks/exec.html](http://ant.apache.org/manual/Tasks/exec.html)

但是很难重定向 SCP 的输出。您可能希望在您的情况下使用标志 -v 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:27:02.687

[ant SCP 任务](http://ant.apache.org/manual/Tasks/scp.html)可以显示该信息。用户详细标志。

此任务需要[额外的 jars](http://ant.apache.org/manual/install.html#librarydependencies)（jsch.jar 0.1.42 或更高版本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T14:03:43.973

正如@Tanuki Software 提到的，`scp`如果[stdout 不是 tty](http://cwshep.blogspot.jp/2009/06/showing-scp-progress-using-zenity.html) ，则不会打印进度条。

所以问题更多是与Ant 任务有关，`scp`而不是与 Ant 任务有关。

我尝试使用 的`-v`选项`scp`，但它显示调试信息和进度条。

所以只有两种选择

*   使用 Exec 任务并错过进度条。（或者）
*   使用 Scp 任务，但它需要额外的 jar，在 mac 中无法正常工作，并且很难使其使用 .sshconfig 文件中的默认设置。

我最终选择了第一个选项。

# html - iFrame 不工作 - 显示为空白

> ID：13927954
> 
> 赞同：0
> 
> 时间：2012-12-18T07:04:44.353
> 
> 标签：html, iframe

在一个随机实验中，我想通过 iframe 显示我在另一台服务器上运行的 Ruby 应用程序。

```
<html>

<body>
<iframe src="http://192.155.83.120:5000/r/2" width="800px" height="800px"></iframe>
</body>

</html> 
```

没有运气，变成空白。

ruby 应用程序的代码中是否存在阻止它在 iframe 中正确显示的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:07:09.240

iframe 将仅支持文件名的确切路径......比如

```
<iframe src="http://192.155.83.120:5000/r/2/index.html" width="800px" height="800px"></iframe> 
```

# jquery - 默认情况下如何折叠jquery可嵌套树

> ID：13927955
> 
> 赞同：5
> 
> 时间：2012-12-18T07:04:49.783
> 
> 标签：jquery, treeview

我正在使用 jquey.nestable 插件来渲染树。现在在页面加载时，树默认处于展开视图中。我想在页面加载时折叠它。这该怎么做？

[https://github.com/dbushell/Nestable](https://github.com/dbushell/Nestable)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T07:36:39.520

如果要折叠所有项目，请使用：

```
$(selector).nestable('collapseAll'); 
```

您必须在创建`Nestable`. 例如：

```
$('#nestable').nestable({});
$('#nestable').nestable('collapseAll'); 
```

# android - 如何在缩略图视图中显示来自 sdcard 的视频？

> ID：13927956
> 
> 赞同：1
> 
> 时间：2012-12-18T07:04:57.397
> 
> 标签：android

如何从 sdcard 上的文件夹中获取所有视频的列表并在列表中显示缩略图？当我单击缩略图时，它应该会打开该视频进行播放。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:13:11.127

我们不能给你完整的代码。我只是建议您如何实现这一目标。您可以使用该代码查看特定文件夹中的媒体。

```
String fileUrl = "/myfolder/";
String MEDIA_PATH = android.os.Environment.getExternalStorageDirectory().getPath() +       
fileUrl; 
```

这是用于搜索特定扩展的过滤器代码。

```
class Mp4Filter implements FilenameFilter {
 public boolean accept(File dir, String name) {
        return (name.endsWith(".mp4"));
  }
} 
```

要在列表视图中生成缩略图，请转到[此处](http://android-er.blogspot.in/2011/05/display-video-thumbnail-in-listview.html)

对于点击开始视频，您需要实现 onListItemClick。像那样：-

```
 protected void onListItemClick(ListView l, View v, int position, long id) {
 currentPosition = position;
 playSong(MEDIA_PATH + songs.get(position));
 Toast.makeText(getApplicationContext(), "Video Start",
 Toast.LENGTH_LONG).show();
 } 
```

# javascript - 防止在某段代码中调用函数

> ID：13927957
> 
> 赞同：1
> 
> 时间：2012-12-18T07:05:07.127
> 
> 标签：javascript

在 Javascript 中，有什么方法可以防止某个函数在某段代码中被调用？我想确保在代码的特定部分中没有调用函数“alert”。

```
alert("Hi!"); //this should work normally
var al = alert
//the function "alert" cannot be called after this point

preventFunctionFromBeingCalled(alert, "Do not use alert here: use the abbreviation 'al' instead.");

alert("Hi!"); //this should throw an error, because "console.log" should be used instead here
allowFunctionToBeCalled(alert);
//the function "alert" can be called after this point
alert("Hi!"); //this should work normally 
```

在这种情况下，我应该如何实现功能`allowFunctionToBeCalled`和`preventFunctionFromBeingCalled`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:08:20.023

您可以像*这样*实现这一点：

```
window._alert = window.alert;
window.alert = function() {throw new Error("Do not use alert here, use console.log instead");};

// later:
window.alert = window._alert;
delete window._alert; 
```

但这是主要的骗局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:08:01.017

```
var a = alert; //save the alert function
alert = function(){}; //change to a function you want (you can throw an error in it)
alert("something"); //this will call the empty function bellow
alert = a; //change alert back to it's original function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:16:58.023

您可以临时重新分配`window.alert`给无操作函数并将其原始值隐藏在局部变量中：

```
// replace alert
var _alert = window.alert;
window.alert = function() {};

// code here can't call alert
// code in this closure can't even access the saved version of window.alert
(function() {
    alert("hello1");
})();

// restore alert
window.alert = _alert;

// code here can call alert
(function() {
    alert("hello2");
})(); 
```

工作演示：http: [//jsfiddle.net/jfriend00/mGC3x/](http://jsfiddle.net/jfriend00/mGC3x/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T07:11:11.683

你可以找到为什么是“window.alert()”而不是“alert()”？这里。[http://bytes.com/topic/javascript/answers/832371-why-window-alert-over-alerthere](http://bytes.com/topic/javascript/answers/832371-why-window-alert-over-alerthere)

# c++ - QDomElement 内的关闭符号

> ID：13927967
> 
> 赞同：0
> 
> 时间：2012-12-18T07:06:01.407
> 
> 标签：c++, xml, qt

我一直在寻找这个问题没有任何结果。也许你们中的一位专家对此有一个想法。我正在构建一个具有各种元素和属性的 .xml。问题是使用 QDomElement appendChild() 方法时，元素的关闭不在第一个 <> 符号内。这是公司规则要求的。

现在是什么：

```
<element att1="" att2="">
</element> 
```

我想要的是：

```
<element att1="" att2="" /> 
```

我能做些什么来实现这种布局？

提前致谢

# database - 这是正确的交易行为吗？

> ID：13927968
> 
> 赞同：9
> 
> 时间：2012-12-18T07:06:06.430
> 
> 标签：database, jakarta-ee, transactions, database-connection, commit

我有三个在事务边界内执行的事务服务（stratTransaction 或开始事务）。这三个服务分别使用不同的连接（No_Transaction、Local_Transaction 和 XA_Transaction）进行处理。现在我想知道，当我启动一个事务（使用 javax.transaction.TransactionManager）并在事务边界内运行这三个服务时，我可以看到使用 NO 和 LOCAL 事务的服务能够将数据插入表中。现在，我使用服务 XA（我知道它应该会失败）并调用提交（如果有任何失败，还有回滚过程）在列中插入比表约束更多的数据。现在我在 NO 和 Local 连接表中有数据，而 XA 连接表没有任何数据。现在：

**我想知道，当事务在某一时刻失败时，应该回滚所有表中的所有数据，还是应该只回滚 XA 服务的数据？**

**我还想知道：据我所知，“事务”是一个原子传输数据的过程。那么为什么连接创建包括定义可以由连接执行的事务类型不是事务的属性吗？**

**我还想知道为什么我们必须在连接属性中定义事务类型，而不是我们必须在启动事务时定义事务类型，并且事务管理器必须执行给定类型的事务。**

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T05:46:07.427

让我们从最简单的事务模式开始，增加复杂性。

**无交易**

“无事务”连接是一种不“提交”或“回滚”数据（例如发送电子邮件）的连接。一旦你将消息对象传递给电子邮件服务器，它就会被发送给收件人，再多的恳求也不会再次得到消息。就好像每次调用都在调用返回时提交。这种连接的示例包括与 SMTP、SMS 网关、打印机等的连接。

我相信如果您启用了自动提交，您可以以这种方式使用数据库连接，但它引出了一个问题，即为什么您首先拥有一个完整的 ACID 数据库......

**“正常”交易**

正常的连接，例如与 SQL 数据库的连接，能够在内部缓冲区中存储一系列状态更改命令。当一切都完成并且一切正常时，整个更改缓冲区将被写入数据存储，其他连接可以看到更改。如果在提交之前或什至在提交期间出现问题，则可以丢弃（回滚）整个更改集。

这种类型的连接的一个*关键*限制是缓冲区的范围 - 缓冲区是连接本身的一部分。换句话说，只有通过连接才能写入缓冲区。

应用服务器的一个重要职责是管理这些连接。当您要求连接池为您提供连接时，您每次都会神奇地获得相同的连接（在单个事务中）。即使一个 EJB 调用另一个 EJB 或一个 EJB 调用资源适配器时也是如此（假设您使用 REQUIRES_TRANSACTION 语义。您可以使用 REQUIRES_NEW 覆盖它）。这种行为意味着一个 Web 请求可以进行多个 EJB 调用，每个调用都可以与多个实体 bean 交互，并且所有数据操作都发生在具有单个内部缓冲区的单个连接上。它将全部一起提交或回滚。

**具有多个连接的事务**

当你有一个单一的数据库时这很好 - 但是（根据定义）如果你与单独的数据库实例（例如在不同的机器上）通信，你需要单独的连接。那么会发生什么呢？您的 EJB 事务最终会与多个连接相关联——每个连接到一个唯一的数据库。这似乎运作良好，除了在一种情况下：

*   您有到数据库 A 的连接 A 和到数据库 B 的连接 B
*   您在 A 和 B 上执行 DML 语句
*   您提交 EJB 连接。应用服务器现在：
    1.  提交连接 A - 成功
    2.  提交连接 B - 失败（例如约束失败）并且连接 B 回滚

这是一场灾难——您已经在数据库 A 中提交了事务，现在无法回滚。但是，事务（以及整个 EJB）在数据库 B 上回滚。

（有趣的是，您的示例几乎与此相同-您将数据提交给无事务和正常事务，但不在 XA 事务中-三个连接中的**最后一个）**

**XA 交易**

这就是 XA 的用武之地。它提供逻辑来协调针对*不同数据源*提交的事务，并*模拟*多个数据源上的单个事务。XA 提交由事务协调器管理的“两阶段提交”，该事务协调器管理多个 XA 连接，这些连接被选入 XA 事务。协调员

1.  通过 XA 连接向每个数据源发送消息以查看是否*可以*提交事务：所有约束和数据库逻辑都在最终提交之前执行。如果任何数据库报告失败，XA 协调器将回滚整个事务。阶段 1 是执行几乎所有事务工作的地方，因此需要相对较长的时间
2.  当每个数据库都报告*可以*提交事务时，协调器向每个数据库发送消息以提交事务。这发生得非常快。

请注意，如果在阶段 2 中出现问题（例如，部分网络崩溃或其中一个数据库在阶段 1 和阶段 2 之间关闭） ，则两阶段提交*可能会失败。*

因为 XA 连接的行为与普通连接如此不同，所以它通常需要一个不同的 ConnectionFactory 对象来实例化与非 XA ConnectionFactory 不同的对象实例。此外，XA ConnectionFactory 需要XA 事务协调器的配置参数，例如XA 事务超时，这些是普通事务属性之外的。

另一个约束：只有由 XA ConnectionFactory 创建的连接才能加入 XA 事务和相关的两阶段提交。您*可以*让 XA 和非 XA 连接参与单个 Application Server 事务，但是整个事务不能作为单个事务可靠地提交/回滚（如上所述）。

**具体答案**

> 我想知道，当事务在某一时刻失败时，应该回滚所有表中的所有数据，还是应该只回滚 XA 服务的数据？

如果事务在应用程序服务器尝试提交之前失败（例如，您的 EJB 获得 NPE 或您故意回滚），每个连接都会收到回滚，一切都应该如您所愿。

但是，如果事务在提交逻辑中失败（例如数据库约束），那么事务管理器将尝试回滚所有内容；如果非 XA 连接已提交，则不会发生这种情况。

> 我还想知道：据我所知，“事务”是一个原子传输数据的过程。那么为什么连接创建包括定义可以由连接执行的事务类型不是事务的属性吗？

XA 连接使用与普通连接不同的库和协议，因为连接本身需要与 XA 事务协调器通信。普通连接不会这样做。

> 我还想知道为什么我们必须在连接属性中定义事务类型，而不是我们必须在启动事务时定义事务类型，并且事务管理器必须执行给定类型的事务。

因为 XA 连接使用了不同的代码，所以与普通连接相比，连接池需要加载不同的类。这就是连接池（不是连接）属性不同的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:56:37.480

是的，如果事务未能将其提交条目写入日志文件，则它会完全回滚（ trxn 的原子属性）。

Trxn 是数据库处理的原子单元。无论您使用 txn 在数据库中执行什么操作，该操作都是原子的。默认情况下，事务是自动提交类型。但是，如果您使用自己的代码来说明 txn 的起点和提交点，那么它是显式类型的。（http://msdn.microsoft.com/en-us/library/ms172353.aspx）

# eclipse-plugin - 序列图中的消息语法

> ID：13927971
> 
> 赞同：2
> 
> 时间：2012-12-18T07:06:26.300
> 
> 标签：eclipse-plugin, uml, sequence-diagram, papyrus

我正在使用 Papyrus 对序列图进行建模我想知道对于位于生命线之间的消息是否应该遵循语法，以及如何识别与参数中的消息关联的变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:35:01.487

```
<stereotype> methodName(Parameter) : return 
```

您可能会发现[UML 样式的元素](http://www.agilemodeling.com/style/) 对于回答这类问题很有用。

# flash - Adobe Flash 自定义编解码器

> ID：13927974
> 
> 赞同：2
> 
> 时间：2012-12-18T07:06:37.993
> 
> 标签：flash, flex4

有谁知道是否可以将自定义编解码器与 Adob​​e Flash 播放器集成？喜欢某种插件支持或另一种创造性的方式？我查看了文档，似乎没有。但我想我会在这里查看:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:47:36.487

不，这是不可能的。

`Flv`/`H264`是 Fl​​ash 中使用的任何视频唯一支持的格式，但是有一些可用的编码选项。有关这方面的更多信息，请参见[此处](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d46.html)和[此处](http://download.macromedia.com/flashmediaserver/http_encoding_recommendations.pdf)。

将另一种视频格式转换为 Flash 的唯一方法是使用例如[FFMpeg](http://ffmpeg.org/)对视频进行转码。当然，这必须在服务器端或预发布版本中完成。

然后，您可以通过开箱即用的 Flash 支持简单地提供、流式传输或捆绑视频。

干杯

# android - 如何以编程方式增加 IntentFilter 的优先级

> ID：13927977
> 
> 赞同：1
> 
> 时间：2012-12-18T07:06:49.693
> 
> 标签：android, sms, broadcastreceiver, intentfilter, notificationmanager

这就是我将我的应用程序意图过滤器的优先级设置为最高的方式。在接收到额外的意图后，我中止了广播，但本机应用程序仍在接收短信，并且通知栏仍然显示最烦人的消息内容，因为我没有希望它显示消息正文。有什么我想念的吗？

```
<receiver android:name=".MySmsReceiver" > 
<intent-filter> 
        <action android:name="android.provider.Telephony.SMS_RECEIVED"
            android:priority="999"
             /> 
</intent-filter> 
</receiver> 
```

这是我的接收者的`onReceive()`方法

```
public void onReceive(final Context context, Intent intent) {

    Bundle extras = intent.getExtras();
    abortBroadcast();
             ....
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:19:16.307

尝试以这种方式声明您的接收者：

```
<receiver android:name=".MySmsReceiver">
    <intent-filter android:priority="999">
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

代替 ：

```
<receiver android:name=".MySmsReceiver" > 
<intent-filter> 
        <action android:name="android.provider.Telephony.SMS_RECEIVED"
            android:priority="999"
             /> 
</intent-filter> 
</receiver> 
```

在中止广播之前，请尝试检查以下情况：

编辑：

```
@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(SMS_RECEIVED)) {
        Bundle extras = intent.getExtras();
        if(extras != null)
          // doBroadcast();
        else
           abortBroadcast();
    }
} 
```

希望它可以帮助你。

谢谢。

# jqgrid - 在 jquery 模型中打开 jqgrid 列链接

> ID：13927985
> 
> 赞同：0
> 
> 时间：2012-12-18T07:07:09.557
> 
> 标签：jqgrid

```
name:'copyquiz',align:'center',classes:'s',index:'copyquiz',width:'100%',formatter:'showlink',formatoptions:{baseLinkUrl:'copy.php'} 
```

现在，这将打开新页面。如何让这个页面在同一页面上以 jQuery 模式打开（如弹出窗口）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:14:40.623

您必须下载 jquery 花式框 css 和 javascript 文件并包含在您的文件中

1.  jquery.fancybox-1.3.4.pack.js
2.  jquery.fancybox-1.3.4.css

然后在任何你想要jquery模型的地方添加类名，比如“box it”，然后添加类名，比如“boxit”，然后尝试。

您的可点击将通过弹出窗口打开。

# javafx-2 - 如何在进程管理器中找到我的 JavaFX 应用程序？

> ID：13927989
> 
> 赞同：3
> 
> 时间：2012-12-18T07:07:32.177
> 
> 标签：javafx-2, single-instance, javaw

我有一个 JavaFX 应用程序，它应该在您启动它时检查它是否已经启动（当时只需要运行一个实例）。问题是如何定义！

我尝试将我的 JavaFX 应用程序打包到 .exe 文件中（或制作一个 .exe 启动器），该文件将在 Windows 任务管理器中显示为“MyProg.exe”进程，而不是“javaw.exe”。但这不是解决方案（我已经尝试过 netbeans 的工具），因为它将 jre 添加到我的应用程序中，从而将其从 1 mb 放大。到 130+ mb。（[你能帮我吗？](https://stackoverflow.com/questions/13913782/how-to-make-an-exe-application-with-netbeans-without-runtime-folder)）

我试过launch4j，但启动器和.exe包都会启动javaw.exe来运行我的应用程序。当我检查进程管理器并看到 2 javaw.exe 我不知道，它是我的应用程序的 2 个实例还是只是另一个正在运行的应用程序？

我希望我描述得很清楚，如果有人可以帮助我，我将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:42:38.757

从您的方法来看，您似乎已经找到了一种从 Java 获取 Windows 进程列表的方法。在这种情况下，您可以使用以下解决方案之一：

1.  考虑其他过程信息。例如命令行或窗口标题。可以使用`wmic.exe PROCESS`命令检索 Windows 命令行，对于基于 Unix 的系统，可以使用`ps -Af`.
2.  当您的程序启动时，将它的进程 ID 存储在注册表中或 homedir 中的文件中。当另一个实例启动时，它应该检查该值，如果具有该 ID 的进程处于活动状态，则退出。

# git - git 获取远程分支和远程参考

> ID：13927991
> 
> 赞同：11
> 
> 时间：2012-12-18T07:07:48.767
> 
> 标签：git

如何在不影响当前分支的情况下获取远程分支并更新该分支的 git 本地引用？例如，如果我这样做

```
$ git pull origin master 
```

origin/master 合并到我当前的分支中。这也行不通

```
$ git fetch origin master 
```

然后我检查

```
$ git branch -r -v
origin/HEAD   -> origin/master
origin/master 7cf6ec5 test 02 
```

那个origin/master ref "7cf6ec5 test 02" 落后了。真正的起源/主人是“XXXXXX测试03”。 `git fetch`仅将更改拉入 FETCH_HEAD 它没有上传本地源/主参考。更新该参考的步骤是什么？

笔记：

```
$ git fetch origin 
```

将获取所有远程参考并更新它们，但不幸的是（a）很多混乱。（我不希望别人的 30-50 个随机分支知道有人不想要我的）和（b）因为分支在原点被删除，所以下次我这样做时这些引用不会在本地被删除，`git fetch origin`这意味着路径结束加上杂物。

问题是，如何只获取一个分支并在本地更新其 ref？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T08:14:12.580

我想我要找的是这个

```
$ git fetch origin master:refs/remotes/origin/master 
```

这似乎确实有效，与“git fetch origin master”不同，我确实看到 ref 得到了更新。

有什么理由是错误的答案？我应该害怕什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T08:08:15.803

您始终可以为`git fetch`命令提供 refspec。特别是，如果你想更新`other-branch`，你可以这样做：

```
git fetch origin other-branch:other-branch 
```

这将获取`refs/heads/other-branch`from origin 的当前提示，并将其放入同名的本地分支中。

另一种方法是继续：

```
git fetch origin other-branch 
```

然后重新创建本地分支：

```
git branch -l -f other-branch -t origin/other-branch 
```

作为`-l`安全机制存在。它将创建一个 reflog 条目，以便您可以在需要时返回到以前的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T07:15:19.150

```
git fetch origin 
```

这将获取所有远程分支并为它们更新远程跟踪分支。

现在你可以做两件事之一

```
git checkout other-branch
git merge origin/other-branch
git checkout - 
```

或者

```
git push . origin/other-branch:other-branch 
```

如果您知道这将是一个快进合并，则最后一个选项是可以的。

# android - 使用从 MYSQL DB 中提取的纬度和经度值在地图上放置标记，在 android 中使用 JSON

> ID：13927999
> 
> 赞同：0
> 
> 时间：2012-12-18T07:08:10.413
> 
> 标签：android, json, google-maps

我在 MYSQL DB 中有一组 lat 和 lon 值。我使用 JSON（从 PHP 代码中检索）在 android 应用程序中检索了它，并且能够在地图上显示这些位置。但我不知道如何在这些位置上放置标记。请帮我。

以下是我的代码：

```
try {

    HttpClient client = new DefaultHttpClient();
    URI website = new URI("http://192.168.1.15/latlonret1.php");
    HttpGet request = new HttpGet();
    request.setURI(website);
    HttpResponse response = client.execute(request);
    in = new BufferedReader(new InputStreamReader(response
            .getEntity().getContent()));
    StringBuffer sb = new StringBuffer("");
    String l = "";
    String nl = System.getProperty("line.separator");

    while ((l = in.readLine()) != null) {
        sb.append(l + nl);
    }
    in.close();
    data = sb.toString();
    // return data;
} catch (Exception e) {
    Log.e("log_tag", "Error converting result " + e.toString());
}
    try {

        JSONArray jArray = new JSONArray(data);

        for (int i = 0; i < jArray.length(); i++) {
            JSONObject json_data = jArray.getJSONObject(i);
            JSONObject json_data1 = jArray.getJSONObject(i);

            returnString =json_data.getString("lat") + "\n";
            returnString1 =json_data1.getString("lon") + "\n";
            System.out.println(returnString);
            System.out.println(returnString1);
      }
 Intent viewIntent =new Intent(Androidmap.this,Mapview.class);

 Bundle bundle = new Bundle();
 bundle.putString("stuff", returnString); 
 bundle.putString("stuff1", returnString1); 
 viewIntent.putExtras(bundle);

 startActivity(viewIntent);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:17:39.253

使用 ItemizedOverlays 在地图上绘制点。这是 Lars Vogel 教程的链接

[http://www.vogella.com/articles/AndroidGoogleMaps/article.html#maps_overlays](http://www.vogella.com/articles/AndroidGoogleMaps/article.html#maps_overlays)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:13:31.567

Use Google map v2\. V1 been deprecated and key been no longer used.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:46:07.610

从您从谷歌获得的 JSON 中检索位置（lat.long）后

按着这些次序

1.  位置 l=新位置（LocationManager.GPS_PROVIDER）；
2.  位置点标记=新位置（l）；
3.  然后，您可以设置点的标题、邻近度和 point_marker 的其他详细信息。bY 制作一个像这样的捆绑包。
4.  捆绑EXTRAS =新捆绑（）；
5.  EXTRAS.putString("TITLE",TITLE); EXTRAS.putString("邻近地区", 邻近地区); poi.setExtras(EXTRAS);
6.  因此，现在您的 ArrayList 中充满了位置对象，这些对象本身就充满了位置详细信息。
7.  现在将这些添加到地图中
8.  逐一检索位置对象，并为每个位置创建一个 GEOPOINT 并将其标记在地图上，如下所示

    for(Location l:locs){ Log.d("PAIRED-VALUES:",String.valueOf(l.getLatitude())+","+String.valueOf(l.getLongitude())); GeoPoint 点 =new GeoPoint((int)(l.getLatitude()*1E6), (int)(l.getLongitude()*1E6));

    ```
     controller.animateTo(point);
        controller.setZoom(17);
        Map_OverLays=map.getOverlays();

        itemizedoverlay=new HelloItemizedOverlay(draw, context);
        overlayitem = new OverlayItem(point,l.getExtras().getString("TITLE"),l.getExtras().getString("VICINITY"));
        itemizedoverlay.addOverlay(overlayitem);
        Map_OverLays.add(itemizedoverlay);

        map.invalidate(); 
    ```

    }

这里是逐项叠加类

```
import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.util.Log;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

@SuppressWarnings("rawtypes")
public class HelloItemizedOverlay extends ItemizedOverlay {

    private ArrayList<OverlayItem> Map_Overlays=new ArrayList<OverlayItem>();
    //private ArrayList<OverlayItem> Map_Overlays1=new ArrayList<OverlayItem>();        
    Context mcontext;
    public HelloItemizedOverlay(Drawable default_marker) {
        super(boundCenterBottom(default_marker));
        // TODO Auto-generated constructor stub
    }
    public HelloItemizedOverlay(Drawable default_marker,Context context) {
        super(boundCenterBottom(default_marker));
        mcontext=context;       
        //populate();
        // TODO Auto-generated constructor stub
    }
@Override
    protected boolean onTap(int arg0) {
    OverlayItem item=Map_Overlays.get(arg0);
      AlertDialog.Builder dialog = new AlertDialog.Builder(mcontext);
      dialog.setTitle(item.getTitle());
      dialog.setMessage(item.getSnippet());
      dialog.show();
      return true;

    }   
public void addOverlay(OverlayItem item)
{
    Log.d("NumberOfTimes" , item.getSnippet());
    Map_Overlays.add(item);
    populate();

}
    @Override
    protected OverlayItem createItem(int arg0) {
        // TODO Auto-generated method stub
        return Map_Overlays.get(arg0);

    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return Map_Overlays.size();
    }

} 
```