# StackOverflow 问答 16075000-16075999

# javascript - Keyup 功能未在下部 div 中传输数据

> ID：16075005
> 
> 赞同：0
> 
> 时间：2013-04-18T05:18:15.783
> 
> 标签：javascript, jquery

保持简单和简短，这是我的代码，我希望将文本输入字段中的文本内容显示在另一个 div(showcontent) 中..虽然我的 firebug 中没有标记 jQuery 错误..但它仍然不是在下部 div 中显示内容，让我知道我做错了什么？

`keyup`如果不适合处理此功能，还请让我知道此类功能的正确功能？

```
<form>
<input type="text" name="usertext" placeholder="Enter text" id="usertext" />
</form>

<div id="showcontent"></div>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
jQuery(document).ready(function(){
    jQuery('#usertext').keyup(function(){
        var mytext = jQuery('#usertext').text();
        jQuery('#showcontent').html(mytext);
    });
});
</script> 
```

我试过`jQuery('#usertext').on('keyup',function(){...});` 但没有帮助:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:22:57.257

读取文本时存在问题`input box`

用这个

```
var mytext = jQuery('#usertext').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:26:48.720

如果您使用 jquery 来获取文本框的值，那么您应该始终使用 val() 方法，如果您想获取跨度或 div 内的文本，您应该使用 text() 方法..所以您应该编写代码按照以下方式输入

```
$('#usertext').keyup(function(){
//B.T.W $(this) refers to the current element ie the textbox
       $('#showcontent').text($(this).val());
}); 
```

# r - 如何编写一个用图形演示中心极限定理的函数

> ID：16075006
> 
> 赞同：5
> 
> 时间：2013-04-18T05:18:39.693
> 
> 标签：r, function, animation

我正在尝试编写一个创建动画图形的函数（不使用动画包），用户可以在其中控制演示中心极限定理的输入（样本大小和分布等）。这在理论上是我想要的，但是在编写用户可以实际控制输入的函数时遇到了麻烦，如上所述。

```
msample <- NA # set up empty vector
ns <-3 # sample size
for(i in 1:500){
sam <- runif(ns) * 10 # draw sample
 msample[i] <- mean(sam) # save mean of sample
h <- hist(msample, breaks=seq(0,10, len=50), # histogram of all means
xlim=c(0,10), col=grey(.9),
xlab="", main="Central Limit Theorem", border="blue", las=1)
points(sam, rep(max(h$count), length(sam)),
pch=16, col=grey(.2)) # add sampled values
points(msample[i], max(h$count), # add sample mean value
col="red", pch=15)
text(10, max(h$count), paste("sample no", i))
hist(msample[i], breaks=seq(0,10, len=50), # ovelay sample mean 
xlim=c(0,10), col="red", add=T, # in histogram
xlab="", border="white", las=1)
Sys.sleep(.05)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:52:53.683

目前尚不清楚您想要什么结果。但我认为，您可以将代码放入函数中并使用点参数 `...`作为提供额外参数（例如分布参数）的解决方案。

```
 central.simul <- function(N, ns,type = c("runif", "rnorm", "rbinom"),...){
        type <- match.arg(type)
        msample <- rep(NA,N)  ## EDIT here: intialisation
        for(i in 1:N){
          sam <- switch(type,
                        runif = runif(ns)*10,
                        rnorm = rnorm(ns)*10,
                        rbinom = rbinom(ns,...))
          msample[i] <- mean(sam) # save mean of sample
          add.hist <- i > 1
          h <- hist(msample, breaks=seq(0,10, len=50), # histogram of all means
                    xlim=c(0,10), col=grey(.9),
                    xlab="", main="Central Limit Theorem", border="blue", las=1,add=add.hist)
          points(sam, rep(max(h$count), length(sam)),
                 pch=16, col=grey(.2)) # add sampled values
          points(msample[i], max(h$count), # add sample mean value
                 col="red", pch=15)
          text(10, max(h$count), paste0("sample no ", i))
          hist(msample[i], breaks=seq(0,10, len=50), # ovelay sample mean 
               xlim=c(0,10), col="red", add=T, # in histogram
               xlab="", border="white", las=1)
          Sys.sleep(.1)
        }
    } 
```

您可以使用以下方式调用它：

```
central.simul(10,3,'runif')
central.simul(10,3,'rbinom',size=2,prob=0.5) 
```

例如，该代码不适用于 rnorm（我认为您应该修改中断），但这应该是一个好的开始。

# hadoop - 扩展 Hive：编写一个同时执行 Map 和 Reduce 操作的 UDF

> ID：16075007
> 
> 赞同：0
> 
> 时间：2013-04-18T05:18:48.220
> 
> 标签：hadoop, mapreduce, hive, user-defined-functions

我正在开发一个项目来扩展 Hive 以支持一些图像处理功能。

为此，我们需要读入一个`image`，将其分解为多个文件，将每个文件传递给一个单独的 Map 任务，该任务对其进行一些处理，然后将它们还原为一个图像以返回给用户。

为此，我们计划在 Hadoop中实现一个`UDF`调用任务的方法。`MapReduce`但是，据我们了解，它`UDF`只会在 Map 和 Reduce 端之间运行`either on the Map side OR the Reduce side of the HQL query`，而我们需要它在理想情况下“运行”。`bridge the gap`

这`Hive documentation`不是最有帮助的，我一直在寻找一些关于从哪里开始寻找有关此信息的指示。如果我的问题不够清楚，请随时提出更多问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T06:33:27.273

研究 HIPI（Hadoop 图像处理接口）可能会给您一个开始。特别是，计算一堆图像的主成分的例子可能很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T17:21:27.360

使用 UDAF（用户定义的聚合函数）。其中有某种映射和减少阶段。

# android - 在 doInBackground 完成之前调用 onPostExecute - 异步任务

> ID：16075008
> 
> 赞同：2
> 
> 时间：2013-04-18T05:18:51.727
> 
> 标签：android, android-asynctask

我有这样的方法：

```
public void extractFiles() {

    AsyncTask<Void, Void, Boolean> extractionTask = new AsyncTask<Void, Void, Boolean>() {

        @Override
        protected void onPreExecute() {
        progressDialog = new ProgressDialog(Activity.this);
        progressDialog.setCancelable(false);
        progressDialog.setMessage("Extracting Files Please wait...");
        progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progressDialog.setProgress(0);
        progressDialog.show();
        super.onPreExecute();
        }

        @Override
        protected Boolean doInBackground(Void... params) {
        // TODO Auto-generated method stub
        String xapkFilePath = XAPKFilePath(Activity.this);
        String exportDirectory = Environment.getExternalStorageDirectory().getAbsolutePath() + "/Android/data/"
            + Activity.this.getPackageName() + "/files/";
        File exportDirectoryFilepath = new File(exportDirectory);
        exportDirectoryFilepath.mkdirs();
        ZipHelper zhelper = new ZipHelper();

        System.out.println("In background called");
        zhelper.unzip(xapkFilePath, exportDirectoryFilepath);

        return true;
        }

        @Override
        protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        if (progressDialog != null && progressDialog.isShowing()) {
            progressDialog.dismiss();
            System.out.println("progress dialog dismissed");
        }
        if (result) {
            //start intent.
        }
        }

    };
    extractionTask.execute();
    }

public class ZipHelper {

    boolean zipError = false;

    public boolean isZipError() {
    return zipError;
    }

    public void setZipError(boolean zipError) {
    this.zipError = zipError;
    }

    public void unzip(String archive, File outputDir) {
    try {
        Log.d("control", "ZipHelper.unzip() - File: " + archive);
        ZipFile zipfile = new ZipFile(archive);
        for (Enumeration e = zipfile.entries(); e.hasMoreElements();) {
        ZipEntry entry = (ZipEntry) e.nextElement();

        System.out.println("OUTPUT DIR 1*" + outputDir);
        System.out.println("ENTRY IS " + entry);

        unzipEntry(zipfile, entry, outputDir);

        }
    } catch (Exception e) {
        Log.d("control", "ZipHelper.unzip() - Error extracting file " + archive + ": " + e);
        setZipError(true);
    }
    }

    private void unzipEntry(ZipFile zipfile, ZipEntry entry, File outputDir) throws IOException {
    if (entry.isDirectory()) {
        createDirectory(new File(outputDir, entry.getName()));
        return;
    }

    File outputFile = new File(outputDir, entry.getName());
    if (!outputFile.getParentFile().exists()) {
        createDirectory(outputFile.getParentFile());
        System.out.println("OUTPUT FILE IS " + outputFile.getParentFile());
    }

    Log.d("control", "ZipHelper.unzipEntry() - Extracting: " + entry);
    BufferedInputStream inputStream = new BufferedInputStream(zipfile.getInputStream(entry));
    BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(outputFile));
    try {
        IOUtils.copy(inputStream, outputStream);
    } catch (Exception e) {
        Log.d("control", "ZipHelper.unzipEntry() - Error: " + e);
        setZipError(true);
    } finally {
        outputStream.close();
        inputStream.close();
    }
    }

    private void createDirectory(File dir) {
    Log.d("control", "ZipHelper.createDir() - Creating directory: " + dir.getName());
    if (!dir.exists()) {
        if (!dir.mkdirs()) {
        throw new RuntimeException("Can't create directory " + dir);
        }
    } else {
        Log.d("control", "ZipHelper.createDir() - Exists directory: " + dir.getName());
    }
    }

} 
```

在这里，我调用这样的方法，`extractFiles()`但发生的事情甚至在 doInBackground 完成之前提取我正在显示微调器的文件，调用 onPostExecute 并移动到下一个屏幕。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:25:22.227

```
public void extractFiles() {
     new TheTask().execute(params);
}
class TheTask extends AsyncTask<Void,Void,Void>
{ 
     .......
} 
```

你应该先调用 super

```
 @Override
    protected void onPreExecute() 
      super.onPreExecute();
   } 
```

Asynctask 必须在 UI 线程上加载。加载异步任务时，会在 ui 线程上调用异步任务 onPreExecute()。之后 doInBackground() 在后台线程中运行。doInBackground() 的结果是 onPostExecute() 的参数。

当一个异步任务被执行时，任务会经过 4 个步骤：

1.  **onPreExecute()，在任务执行之前在 UI 线程上调用**。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。

2.  **doInBackground(Params...)，在 onPreExecute() 完成执行后立即在后台线程上调用**。此步骤用于执行可能需要很长时间的后台计算。异步任务的参数传递到这一步。计算的结果必须由这一步返回，并将传递回最后一步。此步骤还可以使用 publishProgress(Progress...) 来发布一个或多个进度单位。这些值在 UI 线程上的 onProgressUpdate(Progress...) 步骤中发布。

3.  onProgressUpdate(Progress...)，在调用 publishProgress(Progress...) 后在 UI 线程上调用。执行的时间是不确定的。此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度。例如，它可用于动画进度条或在文本字段中显示日志。

4.  **onPostExecute(Result)，在后台计算完成后在 UI 线程上调用**。后台计算的结果作为参数传递给该步骤。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:58:30.403

检查您在 doinbackground 中的条件是否完全执行您的操作，如果执行则返回 true，

```
zhelper.unzip(xapkFilePath, exportDirectoryFilepath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-13T18:18:44.330

我通过声明 doInBackground 和 onPostExecute 同步解决了一个非常相似的问题。
(...)
protected **synchronized** Boolean doInBackground(Void... params)
{...}
protected **synchronized** void onPostExecute(Boolean result) {...}
(...)
在我的例子中， doInBackground() 首先进入（应该）但是在 doInBackground() “技术上”完成之前调用了 onPostExecute() （我不知道为什么 - 也许我的解压缩库对象有自己的线程并且没有阻止 doInBackground() 方法）。同步方法解决了问题（当然，不是没有性能后果）

# mysql - MySQL date_add 并永远重复

> ID：16075010
> 
> 赞同：0
> 
> 时间：2013-04-18T05:19:00.423
> 
> 标签：mysql, datetime, mysqli, dateadd

我有一个用户警报表，我们必须在用户定义的时间间隔内向用户发送警报，例如 0（仅一次）、3 个月、6 个月、1 年

所以我设计了一张这样的桌子

```
id   |   user_id    |   alert_date            |  repeat_int
-----+--------------+-------------------------+-------------
12   |    747       |   2013-04-19 00:00:00   |    0
13   |    746       |   2013-03-19 00:00:00   |    1
14   |    745       |   2012-04-19 00:00:00   |    0
15   |    744       |   2013-04-19 00:00:00   |    0
16   |    743       |   2013-05-19 00:00:00   |    0 
```

我们在“alert_date”前一天发送警报

通过以下查询，我可以获取数据

```
SELECT al.id,
       al.user_id,
       al.alert_date,
       al.repeat_int AS repunit
FROM alerts AS al
WHERE DATE_ADD(alert_date,INTERVAL repeat_int MONTH)=date_add(CURRENT_DATE,INTERVAL 1 DAY)
  OR date(al.alert_date)=date_add(CURRENT_DATE,INTERVAL 1 DAY) 
```

它的工作文件，但我真正的问题是

重复只会工作一次，我们需要它重复每个间隔

IE。如果警报日期为 2012-03-14 且 repeat_int 为 0 - 只需工作一次，但如果警报日期为 2012-03-14 且 repeat_int 为 1 - 需要从 2012-03-14 起每隔 14 日工作一次

如果警报日期是 2012-03-14 并且 repeat_int 是 3 - 需要在每三个月的 14 日工作。即警报在 2012-03-14、2012-06-14、2012-09-14 等...

有什么想法/方法可以做到吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:41:54.297

# 更新

OP 已根据评论更改了他的架构，因此查询本质上是：

```
SELECT *
  FROM alerts
 WHERE CURRENT_DATE + INTERVAL 1 DAY = COALESCE(next_alert_date, alert_date); 
```

这将处理“next_alert_date”在第一次运行时为 NULL。

# 原始答案

对于原始架构：

```
SELECT *
  FROM alerts
  JOIN (SELECT CURRENT_DATE + INTERVAL 1 DAY AS tomorrow) d
 WHERE -- We want to alert if
       --  1\. Tomorrow is the alert_date
       tomorrow = alert_date
       OR
       --
       --  2\. Tomorrow is "repeat_int" months removed from alert_date, falling on
       --     the same day of the month or on the end of the month if the original
       --     alert_date day of month is later in the month than is possible for us
       --     now.  E.g., 2013-01-31 repeated monthly is adjusted to 2013-02-28.
       (
         PERIOD_DIFF(DATE_FORMAT(tomorrow, '%Y%m'), DATE_FORMAT(alert_date, '%Y%m'))
           MOD repeat_int = 0
         AND
         -- Make sure we are at the same day of the month
         ( (DAYOFMONTH(tomorrow) = DAYOFMONTH(alert_date)
          OR
         -- Or, if the day of the alert is beyond the last day of our month,
         -- that we are at the end of our month.
           (LAST_DAY(alert_date) > LAST_DAY(tomorrow)
              AND
            DAYOFMONTH(tomorrow) = LAST_DAY(tomorrow)) )
        ); 
```

# emacs - Emacs ess 自动完成

> ID：16075012
> 
> 赞同：2
> 
> 时间：2013-04-18T05:19:04.920
> 
> 标签：emacs, autocomplete, ess

我是 R 用户，我想在 emacs 中使用 R。但是，我在 emacs 中自定义 ess 时遇到了麻烦。我已经在我的 emacs 中安装了自动完成包和最新的 ess。但是当我在 emacs 中运行 r 时，自动完成不能很好地工作。当我输入 app 时，我想像 ( [http://www.emacswiki.org/pics/static/ess-ac3](http://www.emacswiki.org/pics/static/ess-ac3) ) 中的图像一样显示，但在我的 emacs 中，自动完成和黄色部分都没有显示。

我的操作系统：ubuntu 12.04 amd64

我的 ~/.emacs 文件

```
;; Auto-complete
(add-to-list 'load-path "~/.emacs.d/site-lisp")
(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/site-lisp/ac-dict")
(ac-config-default)
; ess-site
(add-to-list 'load-path "/usr/share/emacs/site-lisp/ess")
(require 'ess-site)
(setq ess-eval-visibly-p nil)
(setq ess-ask-for-ess-directory nil) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-18T19:18:31.967

我最近开始在 Windows 上使用 ESS，并且遇到了同样的问题。我不知道所有细节，但最新版本的 ESS 建议使用公司模式而不是自动完成模式。在以下设置中，这个最小设置似乎对我来说具有很好的自动完成功能：

*   视窗 10 x64
*   R 3.4.3 x64
*   Emacs 25 x64 安装正常
*   MELPA repo 已启用`init.el`
*   `package-install [RET] company`
*   `package-install [RET] ess`
*   在某个目录中打开一个新的 R 文件
*   `M-x company-mode``company-mode`在当前缓冲区中启用
*   `Cc Cz' 启动下级 R 进程

至此，有了下图所示的init.el文件，R完成工作，完成函数调用，包成员。我认为需要更多的配置才能根据自己的喜好对其进行调整，但是达到这一点花了我足够长的时间，我认为这是成功的

[![emacs ess 自动完成](https://i.stack.imgur.com/lqC8W.png)](https://i.stack.imgur.com/lqC8W.png)

`init.el`：

```
(require 'package)
(let* ((no-ssl (and (memq system-type '(windows-nt ms-dos))
                    (not (gnutls-available-p))))
       (proto (if no-ssl "http" "https")))
  (add-to-list 'package-archives (cons "melpa" (concat proto "://melpa.org/packages/")) t)
  )
(package-initialize)

;; emacs controlled settings
(custom-set-variables
 '(package-selected-packages (quote (company ess)))
 '(show-paren-mode t)
 '(tool-bar-mode nil))
(custom-set-faces
 '(default ((t (:family "Consolas" :foundry "outline" :slant normal :weight normal :height 113 :width normal)))))

(require 'company) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T04:17:39.427

使用此设置自动完成对我有用

```
(setq ess-use-auto-complete t) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T15:37:15.337

我遇到了同样的问题，以下代码对我有用：

```
(require 'package)
(add-to-list 'package-archives '("melpa" . "http://melpa.org/packages/") t)
(package-initialize)  ;load and activate packages, including auto-complete
(ac-config-default)
(setq ess-use-auto-complete 'script-only)
;;if not working, use the following instead of (setq ess-use-auto-complete 'script-only)
;;(global-auto-complete-mode t) 
```

# jquery - Javascript不适用于通过ajax在滚动上附加的内容

> ID：16075018
> 
> 赞同：0
> 
> 时间：2013-04-18T05:19:45.420
> 
> 标签：jquery, html, ajax, dom

当滚动到达页面末尾时，我一直在努力向页面添加更多内容。

问题是 JavaScript 无法处理通过 ajax 加载的内容

下面是一个简单的代码：

HTML：

```
 <div class="ajax_load_wrapper">
        <div id="title_191">
        <div id="title_172">
        <div id="title_171">
        <div id="title_105">
        <div id="title_95"> 
        <!-- new divs load here on which jQuery events don't work -->
    </div>

    <div id="load_more_vbz" style="display: none;">
        <a href="somelink">loading...</a>
    </div> 
```

jQuery：

```
(function ($) {

    $(window).on('scroll',function(){
        if (($(window).scrollTop() == $(document).height() - $(window).height() )){
            load_mode_content();
        }
    });

    //loads more content
    function load_mode_content(){
        var link = $('#load_more_vbz a').attr('href');

        $('#load_more_vbz').show(); //show the loading image

        $.get(link).done( function(data){
            $('.ajax_load_wrapper').append(data); //appends new data
            $('#load_more_vbz').hide();
        });
        return false;
    }

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:22:31.020

如果您正在动态加载内容并且希望 jQuery 事件处理程序在该内容中工作，那么您必须执行以下操作之一：

1.  使用将与动态创建的内容一起使用的委托事件处理，并且可以在内容存在之前放置事件处理程序。

2.  在动态创建的内容在 DOM 中之后安装事件处理程序。

如果您使用静态添加的事件处理程序，那么它们将不适用于新的 DOM 元素，因为在运行 jQuery 选择器查询时这些 DOM 元素不存在，并且事件处理程序仅添加到当时存在的元素中时间。

如果您在动态加载的内容中显示您尝试使用的内容和事件处理程序，我们可以提供更具体的帮助。

请参阅这些先前的讨论，了解如何`.on()`正确使用动态内容：

[jQuery .live() 与 .on() 方法在加载动态 html 后添加点击事件](https://stackoverflow.com/questions/8752321/jquery-live-vs-on-method-for-adding-a-click-event-after-loading-dynamic-ht/8752376#8752376)

[jQuery.on() 是否适用于在创建事件处理程序后添加的元素？](https://stackoverflow.com/questions/9814298/does-jquery-on-work-for-elements-that-are-added-after-the-event-handler-is-cre/9814409#9814409)

[jQuery .on 不起作用，但 .live 可以](https://stackoverflow.com/questions/9985090/jquery-on-does-not-work-but-live-does/9985137#9985137)

[在 Jquery 中正确使用 .on 方法](https://stackoverflow.com/questions/9473379/proper-use-of-on-method-in-jquery/9473429#9473429)

这是一般的想法，在上面的参考资料中有更多解释：

```
$("static selector").on('click', "dynamic selector", fn); 
```

# java - 在 Java 中，有没有办法在方法中设置一行，以便在该方法稍后的任何时候返回？

> ID：16075019
> 
> 赞同：2
> 
> 时间：2013-04-18T05:19:46.563
> 
> 标签：java, methods, return

我正在学习用 Java 编程，我想知道是否有一种简单的方法可以在方法中设置返回点，以防用户决定他们想要返回。例如，在一个方法中，我要求用户在以下三个选项中进行选择：

1) 注册

2) 搜索

3) 其他

假设用户选择注册。然后，此选择为他们提供了两个新选项：

1) 注册为用户

2) 注册为管理员

假设他们选择注册为管理员。然后提示他们输入他们的信息，但可能在中途他们意识到“等等！我想注册为用户，而不是管理员！”。输入“返回”也是一个选项，如果他们这样做，我希望能够将他们带回到他们在用户和管理员之间进行选择的菜单，而不是一直回到开头。有没有办法做到这一点？我知道我可以使用循环，但我的程序比我的示例要复杂一些，所以如果我能绕过它，我宁愿不这样做。我正在寻找一种类似于用汇编语言命名循环的方式，这样你就可以说“转到这一点”，它会返回，而用户不必重新输入他们之前所做的所有信息他们想要进入的子菜单。

有任何想法吗？如果情况变得更糟，我不反对使用循环。只是想我会问！

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:25:09.733

我认为使用循环是一种很好的方法。两个建议：

*   您可能需要阅读[`break`-with-label 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)；和/或
*   您可能希望将每个菜单放入单独的函数中以使结构清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:26:35.303

假设您对每个选项都有方法。在任何时候，如果用户想要转到某个选项，只需从现有方法返回一些值，该值指示用户想要跳转到的选项。从主代码中，只需根据所选选项转到适当的方法即可。

此外，每个方法都可能接受父（id）的输入，因此返回不会有问题。

这样，您可以从程序中的任何位置返回父级或其他选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:37:53.400

我认为您以错误的方式看待它。您无需回到代码中的某个点来执行撤消或倒带，您需要创建逻辑以能够更改决策并使其与迄今为止输入的任何数据一起工作。

例如，您将使用数据结构来保存用户输入的所有数据，如果他选择更改其注册类型，您将能够从该数据结构中填写他的信息。他还可以确定他给您的地址是错误的并更改它，您仍然希望保留到目前为止获得的所有数据，无论他是否从用户更改为管理员。

关键是，你是按顺序看的，好像代码只能直线向前和向后运行，而Java甚至汇编根本不是顺序的，你可以往各个方向走，跳到一些逻辑时间点，然后跳回原来的位置。

# mysql - 选择 codeigniter 中其他表中不存在的记录

> ID：16075020
> 
> 赞同：3
> 
> 时间：2013-04-18T05:19:50.270
> 
> 标签：mysql, codeigniter

我使用以下查询从表中选择行。

```
Table 1:

id  description status add_date   topicid 
 1   xyz         0      22-3-13     5   
 2   pqr         0      21-3-13     5
 3   abc         0      20-3-13     5
 4   sdd         0      22-3-13     5

Table2:

id     otherid    
1       2  
2       3 
```

此查询为我提供了 table1 中的所有记录，但我想选择那些不在 table2 中的记录。
像 table1 'id' 不存在于 table2 'otherid' 中。
在我的情况下，想从 table1 中为 id 1 和 4 选择记录。因为它在 table2 中不存在为“otherid”。

```
$topicid = 5;

$q =$this->db->select(array(
            't1.id as id',
            't1.description',
            't1.topicid',
            't1.add_date'))
            ->from('table1 AS t1')
            ->where('t1.topicid',$topicid)
            ->where('t1.status',0)
            ->order_by('t1.add_date DESC)->get(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:58:32.730

试试这个查询会起作用

```
$topicid = 5;

$q =$this->db->select(array(
            't1.id as id',
            't1.description',
            't1.topicid',
            't1.add_date'))
            ->from('table1 AS t1')
            ->where('t1.topicid',$topicid)
            ->where('t1.status',0)
            ->where('t1.id NOT IN (select otherid from table2)',NULL,FALSE)
            ->order_by('t1.add_date DESC)->get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:30:59.260

```
$select =   array(
                't1.id as id',
                't1.description',
                't1.topicid',
                't1.add_date'
            );
$this->db
        ->select($select)
        ->join('Table2','Table2.otherid = Table1.id','left')
        ->where('Table2.otherid IS','NULL')
        ->where('Table1.topicid',$topicid)
        ->where('Table1.status',0)
        ->get('Table1'); 
```

# c++ - 如何在 C 或 C++ 中获得与 Java 中的 toLowerCase 或 Python 中的 string.lower() 相同的结果？

> ID：16075021
> 
> 赞同：0
> 
> 时间：2013-04-18T05:19:58.063
> 
> 标签：c++, c, visual-studio-2010, visual-c++

我需要一个`String.toLowerCase()`在 Java 中工作的 C 或 C++ 函数（或库）。

我知道我可以用`tolower()`英语，但我需要的是一个可以覆盖全球语言的函数（或库）。（实际上，它需要涵盖下面列出的 9 种语言。）

# 语言列表

```
荷兰语
英语
法语
德语
意大利语
葡萄牙语
俄语
西班牙语
乌克兰

```

添加，下面第一行中的这些字符是输入，第二行是预期结果

第 1 行：

```
AÁÀÂÄĂĀÃÅÆBCĆČÇDEÉÈÊËĚĘFGHℏIÍÌÎÏJKLŁMNŃŇÑOÓÒÔÖÕØŒPQRŘSŚŠŞTŢUÚÙÛÜŪVWXYÝZŹŽΑΔΕΘΛΜΝΠΡΣΣΦΩАБВГҐДЕЁЄЖЗИЙІЇКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ 
```

第 2 行：

```
aáàâäăāãåæbcćčçdeéèêëěęfghℏiíìîïjklłmnńňñoóòôöõøœpqrřsśšştţuúùûüūvwxyýzźžαδεθλμνπρσςφωабвгґдеёєжзийіїклмнопрстуфхцчшщъыьэюя 
```

我验证了 Java`toLowerCase()`和 Python的结果`string.lower()` ，两者都是正确的。

有没有办法在 C 或 C++ 中翻译成小写字母？

重要的是，**这些字母是从编码为“UTF-8”的文件中读取的！**

请帮我。我的英语不是很好，所以请尽量使用简单的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:23:37.707

我想你会在 Boost 库中找到你需要的东西——见[http://www.boost.org/doc/libs/1_51_0/libs/locale/doc/html/conversions.html](http://www.boost.org/doc/libs/1_51_0/libs/locale/doc/html/conversions.html)

引用他们的网站：

> Boost.Locale 为跨平台本地化软件的开发提供了强大的工具——该软件以其语言与用户对话。
> 
> 提供的功能：
> 
> ```
> Correct case conversion, case folding and normalization.
> Collation (sorting), including support for 4 Unicode collation levels.
> .... 
> ```

你明白了，我希望。你需要的功能是

```
Boost::Locale::to_lower(yourUTF8String) 
```

# java - 制作一个JPanel正方形

> ID：16075022
> 
> 赞同：4
> 
> 时间：2013-04-18T05:20:06.037
> 
> 标签：java, swing, jpanel

如果我有一个带有多个子组件的 JPanel，我将如何制作它以便 JPanel 仍然是一个正方形，尽管它的父级是如何调整大小的？我尝试了以下代码的变体，但它不会导致子组件也是方形的。

```
public void paint(Graphics g){
    if(this.isSquare()){
        Dimension d = this.getSize();
        if(d.height > d.width){
            this.setSize(d.width, d.width);
        } else {
            this.setSize(d.height, d.height);
    }
    super.paint(g);
} 
```

这是一个SSCCE。

包含的父级：

```
import javax.swing.JFrame;

public class TestFrame extends JFrame{

    public TestFrame(){
        this.add(new TestPanel());
    }

    public static void main(String[] args){
        TestFrame tf = new TestFrame();

        tf.setSize(500, 500);
        tf.setVisible(true);
    }
} 
```

什么应该是方形JPanel：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;

import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.border.LineBorder;

public class TestPanel extends JPanel{
    private boolean isSquare;

    public TestPanel(){
        this.setSquare(true);
        this.setLayout(new BorderLayout());

        JLabel panel1 = new JLabel();
        panel1.setBorder(new LineBorder(Color.RED, 4));
        panel1.setBackground(Color.CYAN);

        JLabel panel2 = new JLabel();
        panel2.setBorder(new LineBorder(Color.BLUE, 4));
        panel2.setBackground(Color.CYAN);

        this.setBorder(new LineBorder(Color.GREEN, 4));
        this.setBackground(Color.CYAN);

        this.add(panel1, BorderLayout.WEST);
        this.add(panel2, BorderLayout.EAST);
    }

    public void paint(Graphics g){
        if(this.isSquare()){
            Dimension d = this.getSize();
            if(d.height > d.width){
                this.setSize(d.width, d.width);
            } else {
                this.setSize(d.height, d.height);
            }
            super.paint(g);
        }
    }

    private boolean isSquare() {
        return isSquare;
    }

    private void setSquare(boolean isSquare) {
        this.isSquare = isSquare;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T06:25:13.953

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class SoSquare {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                // the GUI as seen by the user (without frame)
                // A single component added to a GBL with no constraint
                // will be centered.
                JPanel gui = new JPanel(new GridBagLayout());

                gui.setBackground(Color.WHITE);

                SquarePanel p = new SquarePanel();
                p.setBackground(Color.red);
                gui.add(p);

                JFrame f = new JFrame("Demo");
                f.add(gui);
                // Ensures JVM closes after frame(s) closed and
                // all non-daemon threads are finished
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                // See http://stackoverflow.com/a/7143398/418556 for demo.
                f.setLocationByPlatform(true);

                // ensures the frame is the minimum size it needs to be
                // in order display the components within it
                f.pack();
                f.setSize(400,100);
                // should be done last, to avoid flickering, moving,
                // resizing artifacts.
                f.setVisible(true);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
}

/**
 * A square panel for rendering. NOTE: To work correctly, this must be the only
 * component in a parent with a layout that allows the child to decide the size.
 */
class SquarePanel extends JPanel {

    @Override
    public Dimension getPreferredSize() {
        Dimension d = super.getPreferredSize();
        Container c = getParent();
        if (c != null) {
            d = c.getSize();
        } else {
            return new Dimension(10, 10);
        }
        int w = (int) d.getWidth();
        int h = (int) d.getHeight();
        int s = (w < h ? w : h);
        return new Dimension(s, s);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T05:26:51.617

利用尊重组件的首选/最小/最大尺寸的布局管理器。覆盖`getPreferred/Minimum/MaximumSize`方法以返回所需的大小。

![在此处输入图像描述](https://i.stack.imgur.com/oiSH9.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.LineBorder;

public class SqaurePaneTest {

    public static void main(String[] args) {
        new SqaurePaneTest();
    }

    public SqaurePaneTest() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new BorderLayout());
            add(new JLabel("Look ma, I'm a square", JLabel.CENTER));
            setBorder(new LineBorder(Color.GRAY));
        }

        @Override
        public Dimension getMinimumSize() {
            return getPreferredSize();
        }

        @Override
        public Dimension getMaximumSize() {
            return getPreferredSize();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }

} 
```

或者，创建您自己的布局管理器，做同样的事情（使所有组件方形）

# android - Android 从另一个活动中获取 Int

> ID：16075026
> 
> 赞同：-2
> 
> 时间：2013-04-18T05:20:31.867
> 
> 标签：android

我想要实现的是，当我单击图像按钮时，它会将 1 添加到 int，然后当我转到统计信息页面时，它将在 textview 中显示此 int，但是当我单击统计信息按钮时，我的应用程序崩溃了。

* * *

*颜色等级*

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_color);

    blue = (ImageButton)findViewById(R.id.imageButton1);

    blue.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            tb1.setText("BLUE");
            bl1++;

        }
    });

    home.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            Intent intent  = new Intent(v.getContext(), MainActivity.class);

            intent.putExtra("blue1", bl1);

            startActivityForResult(intent, 0);

        }
    }); 
```

* * *

*统计类*

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_stats);

    theblue = (TextView)findViewById(R.id.textView1);
    theblue.setText(getIntent().getExtras().getInt("blue1"));

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.stats, menu);
    return true;
}

} 
```

* * *

```
04-18 05:30:12.645: W/dalvikvm(790): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-18 05:30:12.685: E/AndroidRuntime(790): FATAL EXCEPTION: main
04-18 05:30:12.685: E/AndroidRuntime(790): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.childapp/com.example.childapp.Stats}: java.lang.NullPointerException
04-18 05:30:12.685: E/AndroidRuntime(790):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-18 05:30:12.685: E/AndroidRuntime(790):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-18 05:30:12.685: E/AndroidRuntime(790):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-18 05:30:12.685: E/AndroidRuntime(790):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-18 05:30:12.685: E/AndroidRuntime(790):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 05:30:12.685: E/AndroidRuntime(790):  at android.os.Looper.loop(Looper.java:137)
04-18 05:30:12.685: E/AndroidRuntime(790):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-18 05:30:12.685: E/AndroidRuntime(790):  at java.lang.reflect.Method.invokeNative(Native Method)
04-18 05:30:12.685: E/AndroidRuntime(790):  at java.lang.reflect.Method.invoke(Method.java:511)
04-18 05:30:12.685: E/AndroidRuntime(790):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-18 05:30:12.685: E/AndroidRuntime(790):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-18 05:30:12.685: E/AndroidRuntime(790):  at dalvik.system.NativeStart.main(Native Method)
04-18 05:30:12.685: E/AndroidRuntime(790): Caused by: java.lang.NullPointerException
04-18 05:30:12.685: E/AndroidRuntime(790):  at com.example.childapp.Stats.onCreate(Stats.java:19)
04-18 05:30:12.685: E/AndroidRuntime(790):  at android.app.Activity.performCreate(Activity.java:5104)
04-18 05:30:12.685: E/AndroidRuntime(790):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-18 05:30:12.685: E/AndroidRuntime(790):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-18 05:30:12.685: E/AndroidRuntime(790):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:40:12.550

1.  首先放 Log 来检查 value 是否在 Intent 中传递。
    如果成功：
2.  然后使用此代码获取值。

    ```
    theblue.setText(""+getIntent().getExtras().getInt("blue1")); 
    ```

# mysqli - mysqli 的最新生产版本是什么？

> ID：16075035
> 
> 赞同：0
> 
> 时间：2013-04-18T05:21:13.513
> 
> 标签：mysqli

很难弄清楚我是否有最新版本的 mysqli。我在网页中使用它：

```
$link = mysqli_connect($hostname, $username, $password, $dbname);
printf("MYSQLi Client library version: %s<br>\n", mysqli_get_client_info()); 
```

输出是：

```
MYSQLi Client library version: mysqlnd 5.0.10 - 20111026 - $Id: e707c415db32080b3752b232487a435ee0372157 $ 
```

好吧，这一切都很好..但我的 MySQL rev 是 5.5.30 基于此：

```
//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password)
  or die("Unable to connect to MySQL");
echo "Connected to ";
// print the MySQL server version
printf("MySQL server version: %s<br>\n", mysql_get_server_info()); 
```

结果是：

```
Connected to MySQL server version: 5.5.30 
```

我应该期望看到 5.5.x 的 mysqli rev 还是我错了？

任何见解都会有所帮助。

如果有帮助，这是 Apache 2.4.4 和 PHP 5.4.12：

```
$ /usr/local/bin/php --version 
PHP 5.4.12 (cli) (built: Feb 25 2013 19:25:44) 
Copyright (c) 1997-2013 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies

$ /usr/local/bin/httpd -v
Server version: Apache/2.4.4 (Unix)
Server built:   Feb 28 2013 10:46:58 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:39:03.020

mysqli 扩展是使用 MySQL 发行版构建的，该发行版与您的 (MySQL) 服务器版本不同：

[http://php.net/manual/en/mysqli.installation.php](http://php.net/manual/en/mysqli.installation.php)

您会注意到输出指的是 MYSQLi*客户端*库版本。

要获取您的服务器分发版本，您可以使用相同的 PHP 版本的 PHP 和 mysqli 扩展执行以下查询： `SELECT @@version;`

```
$mysqli = new mysqli('host', 'username', 'my_secret_password...');
$result = $mysqli->query('SELECT @@version;');

print_r($result->fetch_array()); 
```

# android - 如何检查回调是否在 GUI 线程中执行：Android

> ID：16075037
> 
> 赞同：2
> 
> 时间：2013-04-18T05:21:22.060
> 
> 标签：android, multithreading, user-interface

我有一个应用程序，我在其中接收来自本机层的回调，并根据这些回调更新屏幕上的 List UI。

如何检查回调是仅在 UI 线程中执行还是在单独的线程中执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:24:18.613

简单的方法是使用[http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#currentThread()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#currentThread()) 查看 ui 所在的线程，然后稍后在打回来。

# batch-file - 批处理文件提前结束

> ID：16075043
> 
> 赞同：1
> 
> 时间：2013-04-18T05:21:45.573
> 
> 标签：batch-file, command-prompt

我有一个包含以下命令的批处理文件（用于设置编译器）：

```
del Yylex.java

jflex scanner.flex

del parser.java

java -jar java-cup-11a.jar parser.cup 
```

但是，由于某种原因，在 结束后`jflex scanner.flex`，批处理脚本结束并且命令提示符关闭。如果我只是单独运行该命令，则不会发生这种情况。有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:55:38.250

是`jflex`批处理文件吗？

如果是这样，请尝试

```
CALL jflex ... 
```

或者

```
start /wait "" jflex ... 
```

（嗯，实际上 - 无论如何试一试，不会受伤......）

当 bat 被要求运行另一批时，它只是将控制权转移到另一批，不知道从哪里返回。`CALL`或者`START`给它一张回家的票……

# android - 无法在android的sqllite数据库中插入数据

> ID：16075045
> 
> 赞同：-1
> 
> 时间：2013-04-18T05:21:55.653
> 
> 标签：android, sqlite

我已经为插入编写了 contentvalues，代码编译得很好，但数据没有插入到数据库中。我的问题是，正在创建表但没有插入数据，我不知道。

我的代码是这样的：它有两个类，第一类有数据库连接信息，第二类有表创建和数据插入语句。

```
Class 2:
create table and insert method that has content values and I am returning the value to main class
class 1:
database connection and database open command. 
```

任何人都可以请指导，因为我是 android 新手并试图自学。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:32:10.850

这里有两个类一个创建数据库连接，另一个类在数据库中插入一个用户（使用用户类对象）

```
public class UserDataHelper extends SQLiteOpenHelper {

public UserDataHelper(Context context, String name, CursorFactory factory,
        int version) {
    super(context, name, factory, version);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase database) {
    // TODO Auto-generated method stub

    database.execSQL(UserMataData.sql);

}

@Override
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub

} 
```

}

上面的类创建数据库

```
public class UserDataSource {

private SQLiteDatabase userDataBase;
private UserDataHelper userDataHelper;

public UserDataSource(Context context) {
    super();
    userDataHelper = new UserDataHelper(context, UserMataData.DataBaseName, null, UserMataData.DataBaseVersion);        
}

public void openDataBase()
{       
    userDataBase = userDataHelper.getReadableDatabase();
}

public void closeDataBase()
{
    userDataHelper.close();
}
public boolean addUser (User user)
{
    ContentValues cv = new ContentValues();
    cv.put(UserMataData.Name, user.getName());
    cv.put(UserMataData.University, user.getUniversity());

    long insert = userDataBase.insert(UserMataData.TableName, null, cv);
    if( insert != -1)
        return true;

    return false;

}

public Cursor getAllUsers()
{
    return userDataBase.query(UserMataData.TableName, null, null, null, null, null, null);
} 
```

}

注意用户对象只是用户类的一个对象，您可以简单地将其替换为您想要添加到数据库中的任何其他内容并相应地更改 ContentValues

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:39:23.027

参考这个精湛的教程......它对你有很大的帮助......链接在[这里](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

# java - 在内存中编译并执行java源文件

> ID：16075046
> 
> 赞同：2
> 
> 时间：2013-04-18T05:22:00.763
> 
> 标签：java, compilation, javac, .class-file

假设我有一个`String`包含文件内容的`.java`文件。是否有任何 API 可以让我将此源文件编译为虚拟文件（即生成内容并将其存储在内存中，而不是在磁盘上`.class`创建实际的物理文件）？`.class`然后这个“虚拟”`.class`将在JVM中加载和执行？

编辑 1：我想这样做的唯一原因是因为有时，我的应用程序可能没有写权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:27:35.343

Java 确实有一个[编译 API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)来动态编译文件，但我不知道不会将类文件保存到磁盘的选项。您始终可以使用 a`ClassLoader`并动态加载这些类，然后再使用它们。您可以通过覆盖[getFileForOutput](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaFileManager.html#getFileForOutput%28javax.tools.JavaFileManager.Location,%20java.lang.String,%20java.lang.String,%20javax.tools.FileObject%29)方法将类加载到内存中。

> 或者，此文件管理器可能会将同级视为放置输出的提示。此提示的确切语义未指定。例如，JDK 编译器 javac 会将类文件放在与原始源文件相同的目录中，除非提供了类文件输出目录。为了促进这种行为，javac 可能在调用此方法时提供原始源文件作为同级文件。

另一种选择是使用像[BeanShell](http://www.beanshell.org/)这样的解释器，它将为您运行 java 代码。它像代码一样执行脚本，并且可以在 repl 模式下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:27:10.797

[`JavaCompiler`](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaCompiler.html)为此使用。我认为诀窍是定义一个 custom [`JavaFileManager`](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaFileManager.html)。

# f# - F# 签名文件和对应的实现文件中的通用函数定义

> ID：16075048
> 
> 赞同：1
> 
> 时间：2013-04-18T05:22:25.653
> 
> 标签：f#, signature-files

我正在尝试使用 F# 签名文件为轻量级数据存储模块创建抽象。这是我的签名文件代码，假设它被称为repository.fsi

```
namespace DataStorage

/// <summary>Lightweight Repository Abstraction</summary>
module Repository = 
   /// <summary> Insert data into the repository </summary>
   val put: 'a -> unit
   /// <summary> Fetch data from the repository </summary>
   val fetch: 'a -> 'b
   /// <summary> Remove data from the repository </summary>
   val remove: 'a -> unit 
```

这里是对应的实现，我们称之为repository.fs

```
namespace DataStorage

module Repository = 

    (* Put a document into a database collection *)
    let put entity = ()

    (* Select a document from a database collection *)
    let fetch key = ("key",5)

    (* Remove a document from a database collection *)
    let remove entity = () 
```

在我的 Visual Studio 项目文件中，我的实现文件 (repository.fs) 上方有签名文件 (repository.fsi)。**put**和**remove**函数正在被正确解析和验证，没有错误（在实现文件中），但fetch**函数**在 Visual Studio 中不断给我红色波浪，并显示以下错误消息：

模块“DataStorage.Repository”包含

```
val fetch: s:string -> string * int 
```

但它的签名指定

```
val fetch<'a,'b> : 'a -> 'b 
```

各自的类型参数计数不同

有人可以告诉我我做错了什么吗？我的签名文件中的 fetch 函数值是否定义错误？我只是想在我的签名文件中创建一个通用函数（'a -> 'b），并让实现将一种类型作为输入并返回另一种类型作为输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:39:38.443

我在 F# 方面还不是很强大，但我认为您在这里以错误的方式使用签名文件。

第一的。以下是修复编译错误的方法：

代替：

```
let fetch key = ("key",5) 
```

和：

```
let fetch key = ("key",5) :> obj :?> 'b 
```

你不会得到编译错误。但这个修复在很多情况下实际上没有意义。例如，如果下一个作品：

```
let a = Repository.fetch(56) 
```

如果您明确指定类型，它将崩溃（在大多数情况下）：

```
let b = Repository.fetch<int, string>(56) 
```

情况是泛型实现应该使用泛型类型进行操作。如果我正确理解了您要做什么，那么当使用签名文件隐藏实现方面时，您应该使用 OOP 和多态性。例如：

```
namespace DataStorage

[<AbstractClass>]
type Repository<'TKey,'T>() =     
    abstract member put: 'T -> unit
    abstract member fetch: 'TKey -> 'T  
    abstract member remove: 'T -> unit

type IntRepository() =
    inherit Repository<int, int>()
    override self.put item = ()
    override self.fetch index = 5
    override self.remove item = ()

type StringRepository() =
    inherit Repository<int, string>()
    override self.put item = ()
    override self.fetch index = "Hello"
    override self.remove item = () 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:09:46.403

我最近尝试过的一种（一些限制性的）替代方案与泛型相距甚远，但似乎适用于我的场景。基本上 fetch 函数的签名文件现在看起来像这样。

```
'a -> RepositoryRecord 
```

RepositoryRecord 的实现是代数数据类型。

```
type RepositoryRecord = | SomeVal1 of int * string | SomeVal2 of string 
```

# javascript - 来自父 javascript 文件的 jquery fancybox 弹出式调用

> ID：16075050
> 
> 赞同：0
> 
> 时间：2013-04-18T05:22:37.467
> 
> 标签：javascript, jquery, popup, fancybox

> 任何人都可以帮助我如何从父 js 文件中调用 fancybox 弹出窗口。当我单击按钮时，如果功能中的条件为真，它将一个功能，我需要打开fancybox弹出窗口。提前谢谢..

```
 $(document).ready(function() {
    $("#EXTERNAL").fancybox({
        'width'             : '80%',
        'height'            : '100%',
        'autoScale'         : false,
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',
        'href'              : 'openpopup.html',
        'type'              : 'iframe'
    });
       });
    function clickFancy(){
if(true){
// here i need open fancypopup
}else(){

}
<body>
<form name="frm1">
    <input type="submit" name="fancy" onclick="clickFancy()">
<button>Click me</button>
</form>
</body>
<html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:41:54.663

如果您已经为此选择器初始化了 fancybox

```
$("#EXTERNAL").fancybox(); 
```

`click`然后只需在您的函数中触发

```
function clickFancy() {
    if (true) {
        // here i need open fancypopup
        $("#EXTERNAL").trigger("click");
    } else {

    }
} 
```

...然后从您需要的任何地方调用该函数。顺便说一句，这`<button>Click me</button>`什么也没做，所以我想知道为什么会在那里。此外，`else()`应该只是`else`，除非您使用 . 嵌套另一个条件`else if()`。

**编辑**：

作为对您的*编辑*尝试的响应，您可以看到该函数的工作原理是这个**[JSFIDDLE](http://jsfiddle.net/x8CbD/)**。

我怀疑（我的意思是没有冒犯）是您在选择器和 javascript 条件语句应该如何工作以及它们如何与 html 元素相关的知识方面存在一些空白。

# python - Python-寻找平均值

> ID：16075058
> 
> 赞同：0
> 
> 时间：2013-04-18T05:23:27.957
> 
> 标签：python, python-3.x, average

我试图找出用户猜数字的平均次数。用户被问到他们想要做多少问题，然后程序会给他们那么多问题。我无法记录他们猜错和猜错以及猜对并找到两者之间的平均值的次数。这是我到目前为止所拥有的

```
print("Hello!")
from random import randint

def HOOBLAH():
    randomA = randint(0,12)
    randomB = randint(0,12)
    answer = 0
    CORRECTanswer = (randomA*randomB)
    REALanswer = (randomA*randomB)
    AVGcounter = 0
    AVGcorrect = 0
    AVERAGE = 0
    print("What is {0} * {1} ?".format(randomA,randomB))
    while answer != REALanswer:
        an = input("What's the answer? ")
        answer = int(an)
        if answer == CORRECTanswer:
            AVGcorrect+=1
            print("Correct!")
            AVERAGE+=((AVGcorrect+AVGcounter)/AVGcorrect)
        else:
            AVGcounter+=1
            if answer > CORRECTanswer:
                print("Too high!")
            else:
                print("Too low!")

def main():
    numPROBLEMS = input("How many problems would you like to solve? ")
    PROBLEMS = int(numPROBLEMS)
    if PROBLEMS in range(1,11):
        for PROBLEMS in range(PROBLEMS):
            HOOBLAH()
        else:

            print("Average number of tries: {0}".format(HOOBLAH,AVERAGE))

    else:
        print("Please input a value between 1 through 10!")
main() 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:47:42.597

所以我试图尽可能少地改变，以免束缚你的风格。所以这样想，得到正确答案所需的平均猜测次数就是猜测的总数除以正确猜测的次数。因为您确保用户最终得到正确答案，所以正确猜测的数量就是问题的数量！

因此，每次运行 HOOBLAH() 时，都会返回获得正确答案所需的猜测次数。在 for 循环之外将所有这些加在一起，然后在循环结束时，将猜测的数量除以问题的数量，然后你就得到了答案！另外，我不认为 python 支持'+='，所以你可能需要将 AVGcounter+=1 更改为 AVGcounter = AVGcounter +1，但我完全可能弄错了，我在语言之间切换了一堆！

一个注意事项是我将 numGuesses 转换为浮点数（ float(numGuesses) ），这是为了确保 int 数据类型不会截断您的平均值。例如，你不希望 5/2 变成 2，你希望它是 2.5，一个浮点数！

希望这会有所帮助！

```
from random import randint

def HOOBLAH():
    randomA = randint(0,12)
    randomB = randint(0,12)
    answer = 0
    CORRECTanswer = (randomA*randomB)
    REALanswer = (randomA*randomB)
    AVGcounter = 0
    AVERAGE = 0
    print("What is {0} * {1} ?".format(randomA,randomB))
    while answer != REALanswer:
        an = input("What's the answer? ")
        answer = int(an)
        if answer == CORRECTanswer:
            print("Correct!")
            return AVGcounter
        else:
            AVGcounter+=1
            if answer > CORRECTanswer:
                print("Too high!")
            else:
                print("Too low!")

def main():
    problemsString = input("How many problems would you like to solve? ")
    numProblems = int(problemsString)
    numGuesses = 0
    if numProblems in range(1,11):
        for problem in range(numProblems):
            numGuesses = numGuesses + HOOBLAH()
        print("Average number of tries: " + str(float(numGuesses)/numProblems)

    else:
        print("Please input a value between 1 through 10!")
main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:40:39.557

我不完全确定你要做什么，但如果你想给用户 x 个问题，并找到每个问题的平均猜测次数，你会希望你的 HOOBLAH() 函数返回数字每次运行的猜测。您可以在方法调用之外跟踪它并在最后对其进行平均。但是现在，您的程序无法访问 AVGcounter，这似乎是您用来计算猜测次数的变量，在 HOOBLAH() 函数调用之外。

# php - 使用 CURL 保存的 PNG 文件已损坏

> ID：16075059
> 
> 赞同：0
> 
> 时间：2013-04-18T05:23:30.900
> 
> 标签：php, image, curl, png

我正在使用来自[SO 线程](https://stackoverflow.com/questions/6306935/php-copy-image-to-my-server-direct-from-url)的以下代码，但输出的文件是损坏的 PNG 文件。我无法在任何图像编辑器中查看它。我试图抓取的图像可以在[这个直接链接](http://download.videos.framebase.io/5a94a14f-aca6-4fb0-abd3-f880966358ab/6bf94ebb-4712-4895-9c85-fb8d4a19d50c/8f8b778f-6335-4351-82e7-6f50fd7fdd06/1351620000000-000020/thumbs/00001.png)中找到。

```
<?php
function getimg($url) {         
        $headers[] = 'Accept: image/gif, image/png, image/x-bitmap, image/jpeg, image/pjpeg';   
        $headers[] = 'Connection: Keep-Alive';         
        $headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8';         
        $user_agent = 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31';         
        $process = curl_init($url);         
        curl_setopt($process, CURLOPT_HTTPHEADER, $headers);         
        curl_setopt($process, CURLOPT_HEADER, 0);         
        curl_setopt($process, CURLOPT_USERAGENT, $user_agent);         
        curl_setopt($process, CURLOPT_TIMEOUT, 30);         
        curl_setopt($process, CURLOPT_RETURNTRANSFER, 1);         
        curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1);         
        $return = curl_exec($process);         
        curl_close($process);         
        return $return;     
    } 

    $imgurl = 'http://download.videos.framebase.io/5a94a14f-aca6-4fb0-abd3-f880966358ab/6bf94ebb-4712-4895-9c85-fb8d4a19d50c/8f8b778f-6335-4351-82e7-6f50fd7fdd06/1351620000000-000020/thumbs/00001.png'; 
    if(file_exists($imgsave)){continue;} 
    $image = getimg($imgurl); 
    file_put_contents($imgsave,$image); 
?> 
```

我错过了什么？是我正在使用的标题吗？是文件吗？我尝试在浏览器中手动保存文件，并使用我的图像编辑器很好地加载。

任何想法将不胜感激，谢谢！-- 24x7

**编辑：** 我知道我将此标记为已解决，但再三考虑，我仍然无法查看服务器正在保存的 PNG。以下是迄今为止的建议：

```
<?php
            function grab_image($url){
                echo $url;
                  $ch = curl_init ($url);
                  curl_setopt($ch, CURLOPT_HEADER, 0);
                  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
                  curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
                  $raw=curl_exec($ch);
                  curl_close ($ch);
                  $saveto = 'recent-image.png';
                  if(file_exists($saveto)){
                      unlink($saveto);
                  }

                  $fp = fopen($saveto,'x');
                  fwrite($fp, $raw);
                  fclose($fp);
                }   

    grab_image("http://download.videos.framebase.io/2acd363b-ab1f-4305-8f1c-c1eaa6ebcc2a/abb6a3b7-414c-461b-a84c-56032060575d/e3682943-6959-456d-89db-8cd96647ddd4/1351620000000-000020/thumbs/00001.png");
?> 
```

我一遍又一遍地运行脚本没有运气，再次，任何帮助将不胜感激。这是它输出的 PNG[示例](http://quizmakr.com/cec3642e-b858-4ae5-929e-9d8449d07b73.png)。先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:48:23.680

您可以使用普通功能，例如

```
function grab_image($url,$saveto){
    $ch = curl_init ($url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
    $raw=curl_exec($ch);
    curl_close ($ch);
     $saveto = "D:/test.png";
    if(file_exists($saveto)){
        unlink($saveto);
    }

$fp = fopen($saveto,'x');
fwrite($fp, $raw);
fclose($fp); 
```

}

```
grab_image('http://download.videos.framebase.io/5a94a14f-aca6-4fb0-abd3-f880966358ab/6bf94ebb-4712-4895-9c85-fb8d4a19d50c/8f8b778f-6335-4351-82e7-6f50fd7fdd06/1351620000000-000020/thumbs/00001.png',''); 
```

并确保在 php.ini allow_url_fopen 已启用..

# c - C：“无效的 free()：地址 0x7feffee08 在线程 1 的堆栈上”

> ID：16075060
> 
> 赞同：-1
> 
> 时间：2013-04-18T05:23:31.637
> 
> 标签：c, segmentation-fault, malloc, free

这不是我的确切代码，但本质上是这样的。我正在尝试在 main() 中创建一个堆栈变量

> 诠释**x；

我想传递给函数 foo(int **x, arg1, arg2, ...)。在某些情况下，我应该在 foo() 中为 x 动态分配空间

> x = (int **) malloc(sizeof(int *) * num_elems);

我也没有为每个 int * 元素分配新空间，而是分配给它 &y，其中 int y 是在 foo() 中创建的。

当我尝试在 main() 中释放 x 时出现此错误。我不明白这是什么意思，但我怀疑可能是因为我使用了 &y？

编辑：也相关：当我尝试访问 x 的双重取消引用元素时，我得到了垃圾值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:28:09.440

您没有在 main 函数中正确声明，也没有在 foo() 函数中正确定义。你必须声明为

在主函数中

```
int *x ;
foo(&x); 
```

在 foo(int **x,....)

```
*x =  malloc(sizeof(int) * num_elems); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:58:16.603

考虑到这一点，

```
void foo()
{
    int y;
    int *x = NULL;
    x = &y;
} 
```

在这种情况下，`y`存储在堆栈中。`foo`返回时，将`y`不可用（取决于实现）。如果您绝对需要这样做，请`malloc` `y`改为。如果你这样做，`y`将被存储在堆上。

# ruby-on-rails - 更新 Rails 和 Mongoid 中嵌入的新记录的属性

> ID：16075061
> 
> 赞同：1
> 
> 时间：2013-04-18T05:23:36.233
> 
> 标签：ruby-on-rails, mongoid

我正在尝试编写一个从我的 Rails 应用程序中的模板创建记录的功能，但需要用户进行一些自定义。

当试图让用户覆盖嵌入文档中的字段时会遇到困难：文档是重复的而不是更新的。

我从一个类型的对象开始，比方说，`ExternalLinkGroupTemplate`它包含许多`ExternalLink`s。它用于创建`ExternalLinkGroup`还包含`ExternalLink`s 的一个。用户应该能够在克隆时编辑链接文本，但不能编辑 URL，因此用户会看到一个表单当它被复制时，用户应该能够我可以创建它的副本（简化，因为一些代码在不同的文件中，删除成功测试等）：

```
@link_group = ExternalLinkGroup.new
@template.links.each do {|link| @new_link_group.links.push link.dup }
@link_group.update_attributes(params[:link_group]) 
```

创建链接组时，它包含的链接数量是模板的两倍，并且只有第二组有更改。显然，Mongoid/ActiveWhatever 正在创建新项目而不是更新现有项目。

我不想只通过参数中的所有字段而不复制任何内容，因为实际上正在进行一些继承，并且某些链接将具有不同的类型并具有额外的字段，我不想编写部分代码对于每个只有一堆隐藏字段的人。另外，我不希望用户能够修改隐藏字段并提交任何内容。

我无法引用它们，`_id`因为它们尚未保存。我原以为数组索引`template[links_attributes]`就足够了，但事实并非如此。

做什么？

使用 Rails 3.2.13、MongoDB 2.2.x、Mongoid 3.0.5。

# java - 如何在鼠标指针处读取 SWT 画布上像素的颜色？

> ID：16075066
> 
> 赞同：0
> 
> 时间：2013-04-18T05:23:50.057
> 
> 标签：java, canvas, swt, ubuntu-12.04, mousemove

我写了一个小程序来读取鼠标指针位置像素的颜色。但我没有得到鼠标指针的颜色，RGB {0, 0, 0} 总是在控制台上打印。请修复/更正下面的程序，以便它在鼠标指针处打印像素的颜色。

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.MouseEvent;
import org.eclipse.swt.events.MouseMoveListener;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.ImageData;
import org.eclipse.swt.graphics.PaletteData;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.graphics.RGB;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Canvas;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class PixelColorPick {
    private static final int RECT_HEIGHT = 20;
    private static final int RECT_WIDTH = 20;
    private static final int CYCLE_OFFSET = 0;
    protected static final int Y_STEP = 20;
    static int shellStyle = SWT.NO_REDRAW_RESIZE | SWT.NO_BACKGROUND | SWT.CLOSE | SWT.RESIZE;
    static int canvasStyle = SWT.NO_REDRAW_RESIZE | SWT.H_SCROLL | SWT.V_SCROLL;

    public static void main(String[] args) {
        final Display display = new Display();
        final Shell shell = new Shell(display, shellStyle);
        shell.setLayout(new FillLayout());
        shell.setBackground(display.getSystemColor((SWT.COLOR_CYAN)));
        shell.setText("Canvas Test");
        shell.setSize(400, 300);

        Composite composite = new Composite(shell, SWT.NONE);
        composite.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
        composite.setLayout(new GridLayout(1, false));

        final Canvas canvas = new Canvas(composite, canvasStyle);
        canvas.setBackground(display.getSystemColor(SWT.COLOR_WHITE));
        canvas.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
        final Point cycleOrigin = new Point(CYCLE_OFFSET, 0);

        // Create a paint handler for the canvas
        canvas.addPaintListener(new PaintListener() {
            @Override
            public void paintControl(PaintEvent e) {

                for (int i = 0; i < 100; i++) {                    
                    for (int j = 0; j < 100; j++) {                     
                        Color oldBgColor = e.gc.getBackground();
                        Color oldFgColor = e.gc.getForeground();
                        if(j%2 == 0) {
                            e.gc.setBackground(e.display.getSystemColor(SWT.COLOR_RED));                            
                            e.gc.drawRectangle(cycleOrigin.x + j * RECT_WIDTH, cycleOrigin.y + i * Y_STEP, RECT_WIDTH, RECT_HEIGHT);                        
                            e.gc.fillRectangle(cycleOrigin.x + 1 + j * RECT_WIDTH, cycleOrigin.y + 1 + i * Y_STEP, RECT_WIDTH - 1, RECT_HEIGHT -1);
                            e.gc.setBackground(oldBgColor);
                            e.gc.setForeground(oldFgColor);
                        } else if(j%3 == 0) {
                            e.gc.setBackground(e.display.getSystemColor(SWT.COLOR_DARK_MAGENTA));
                            e.gc.drawRectangle(cycleOrigin.x + j * RECT_WIDTH, cycleOrigin.y + i * Y_STEP, RECT_WIDTH, RECT_HEIGHT);                        
                            e.gc.fillRectangle(cycleOrigin.x + 1 + j * RECT_WIDTH, cycleOrigin.y + 1 + i * Y_STEP, RECT_WIDTH - 1, RECT_HEIGHT -1);
                            e.gc.setBackground(oldBgColor);
                            e.gc.setForeground(oldFgColor);
                        } else {
                            e.gc.setBackground(e.display.getSystemColor(SWT.COLOR_GREEN));
                            e.gc.drawRectangle(cycleOrigin.x + j * RECT_WIDTH, cycleOrigin.y + i * Y_STEP, RECT_WIDTH, RECT_HEIGHT);                        
                            e.gc.fillRectangle(cycleOrigin.x + 1 + j * RECT_WIDTH, cycleOrigin.y + 1 + i * Y_STEP, RECT_WIDTH - 1, RECT_HEIGHT -1);
                            e.gc.setBackground(oldBgColor);
                            e.gc.setForeground(oldFgColor);
                        }
                    }
                }
            }

        });
        canvas.addMouseMoveListener(new MouseMoveListener() {

            @Override
            public void mouseMove(MouseEvent e) {
                Image image = new Image(e.display, 20, 20);
                GC gc = new GC(image);
                gc.copyArea(image, e.x, e.y);
                ImageData imageData = image.getImageData();                
                int pixelValue = imageData.getPixel(0, 0);
                PaletteData palette = imageData.palette;
                RGB rgb = palette.getRGB(pixelValue);
                System.out.println(rgb);

            }
        });
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:35:22.613

将这些行更新为：

```
Image image = new Image(e.display, 20, 20);
GC gc = new GC(image);
gc.copyArea(image, e.x, e.y); 
```

这：

```
Image image = new Image(e.display, 1, 1);
GC gc = new GC((Canvas)e.widget);
gc.copyArea(image, e.x, e.y); 
```

`GC gc = new GC((Canvas)e.widget);`很重要。

**作为一个很好的做法，一旦你完成了就`GC`处理 和***对象！***`image`**

# ios - 无法更改 UIImageView 的中心点

> ID：16075068
> 
> 赞同：0
> 
> 时间：2013-04-18T05:23:57.007
> 
> 标签：ios, objective-c, cocoa-touch, uiimageview, ipod

因此，在我的 ios pacman 游戏中，检测到 pacman 和敌方砖块之间发生碰撞后，此方法运行。假设停止游戏计时器，显示开始按钮并将 pacman 返回到他的起点。该方法正常运行，除了 pacman 停留在原处并且​​永远不会返回到他的起点，我在更改中心点时是否犯了明显的错误？

```
-(void)lose{
    [self stopTimer];
    self.play.hidden = FALSE;
    _start = CGPointMake(30, 247);
    self.pacman.center = self.start;
    [self.pacman setNeedsDisplay];
} 
```

感谢您的帮助，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:26:03.180

如果你喜欢这样做有什么问题。

```
self.pacman.center = CGPointMake(30, 247); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:00:34.740

尝试在设置新值之前和之后记录 pacman 的中心：

```
NSLog(@"Pacman's center: (%f, %f)", self.pacman.center.x, self.pacman.center.y); 
```

# java - java中的对象。在不再将它们分配给变量后它们会发生什么？

> ID：16075069
> 
> 赞同：1
> 
> 时间：2013-04-18T05:24:01.820
> 
> 标签：java, hashmap

当我遇到一个我自己无法解决或在网上找到的问题时，我一直在使用 HashMaps。

```
HashMap<String,HashMap<String,String>> m= new HashMap<>();
HashMap<String,String> t = new HashMap<>();

t.put("test1","1");
m.put("h1",t);

t = new HashMap<>();
t.put("test2,"2");
m.put("h2",t);

System.out.println(m); 
```

这给了我`{h1={test1=1}, h2={test2=2}}` 因此大 HashMap 包含两个 HashMap 的数据。所以问题是它只是简单地复制了较小的 HashMap 的数据，还是两个“t”HashMap 都保留在 JVM 内存中，而 HashMap`m`只是将我链接到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:32:41.743

您的 big`HashMap`包含对两者的引用`HashMaps`。你所做的也改变了`HashMap` `t`指向的东西。

所以作为一个更直观的例子让我们说

```
t = 0x00000001 
```

当你放入时`t`，`m`现在`m`看起来像

```
m = {0x00000001} 
```

此时两者`t`和`m`都引用了相同的`HashMap`，这意味着对一个的任何更改都将出现在另一个中。现在，当你去的时候，`t = new HashMap<>()`你实际上是在重新分配`t`指向的引用

```
t = 0x00000002 
```

但`m`看起来`{0x00000001}`你仍然没有失去你的第一个参考。当你`t`进入`m`第二次时，它们看起来像

```
t = 0x00000002
m = {0x00000001, 0x00000002} 
```

所以最后，`m`仍然包含对两者的引用`HashMaps`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:26:54.350

每当您`t`放入`m`时，都不会复制数据。相反，会放置对子地图的*引用。*

你加`t`了`m`两次。但是，每次都`t`指向不同的对象。因此，您最终会在`m`.

将此与以下示例进行对比：

```
 t.put("subkey","old");
      m.put("h1",t);
      m.put("h2",t);
      t.put("subkey", "new");
      System.out.println(m); 
```

这打印出来

```
{h1={subkey=new}, h2={subkey=new}} 
```

在这里，`t`并且两个键都`m`指向同一个子图。当你改变一个时，它们都会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:27:02.687

`Map`可以引用您的对象。它内部包含`Entry`类的数组桶，其中包含键、值对象引用。

`HashMap`m 将包含您第一个创建的哈希映射对 h1 的对象引用和第二个哈希映射的引用 aginst h2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T05:30:35.937

Java 中的一切都是指针或引用，因此对象保存在内存中，哈希映射存储引用，而不是复制实际数据。

大哈希映射包含对较小哈希映射的引用，因此垃圾收集器不会释放内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T05:32:48.463

两个 HashMap 都将保留在内存中。您可以通过带有键 h1 和 h2 的 hashmap m 引用它们。数据不会从哈希映射中复制，但对象的引用更改为哈希映射键（即 h1 和 h2）。

# axapta - 按总和字段排序

> ID：16075073
> 
> 赞同：1
> 
> 时间：2013-04-18T05:24:19.543
> 
> 标签：axapta, dynamics-ax-2009, x++

我尝试用 X++ 编写 SQL 语句。它应该做这样的事情：

```
SELECT 
    Table.field1, SUM(Table.field2) AS SumField
FROM 
    Table
WHERE 
    Table.FieldX = Something
GROUP BY 
    Table.Field1
ORDER BY 
    SumField; 
```

我在 X++ 中遇到的问题是它在计算它们的总和之前对记录进行排序。我知道我可以`While Select`在 X++ 中制作一个并通过代码对其进行排序，但这不是我想要的方式。

有人能告诉我如何处理这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:29:14.417

抱歉，您不能同时`sort by`在`group by`X++ 选择或查询中执行和操作。

解决方案是创建一个视图（没有排序），然后使用 order by 在视图上进行选择。

# html - 视口、媒体查询，可在低于 html5 的环境下使用

> ID：16075075
> 
> 赞同：0
> 
> 时间：2013-04-18T05:24:21.847
> 
> 标签：html, viewport, html4

视口是否可用于 html5 之前的 html 版本？有人可以告诉我如何使用视口和媒体查询吗？我正在尝试将一个网站变成一个响应式网站，同时“移动”它。但我不认为它是使用 html5 构建的。请问有什么见解吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:31:00.220

首先，您不应该将“HTML5”作为一个单一的具体实体，并且特定的东西在 HTML5 之前是否可用。您是否可以使用视口（我假设您的意思是`<meta name="viewport">`）很大程度上取决于设备。 `<meta name="viewport" content="width=device-width">`等更常用于较小的设备，例如手机，但您不需要将其用于较大的屏幕。不过，这取决于具体情况，但我会重申：这取决于设备和用户代理（浏览器）。

至于使用媒体查询，这是 CSS3 规范的一部分，与 HTML5 完全无关。再一次，是否支持媒体查询（甚至*如何*支持它们）取决于用户代理。

# php - PHP mySQL 更新页面

> ID：16075076
> 
> 赞同：-1
> 
> 时间：2013-04-18T05:24:23.307
> 
> 标签：php, mysql, database, session

我正在尝试在 php 和 mysql 中创建一个简单的产品页面（没有登录或类似的东西）。到目前为止，一切都很好地显示在我的产品页面上，我可以从我的管理页面中很好地删除/添加。从那里我试图弄清楚如何创建一个编辑功能。因此，为了方便起见，我制作了一个基于 productid 从 mysql 表中填充的表单（edit2.php?id=X），然后发布到 edit.php 并希望更新数据库。到目前为止，重用旧代码不起作用，不知何故我希望它会那么简单。

这是我的添加产品（有效）：

```
<?php
session_start();
if(isset($_POST) && isset($_POST['hp']) && empty($_POST['hp'])) {
    if(
isset($_SESSION['token']) &&
$_SESSION['token'] == $_POST['token']
) {
        mysql_connect('localhost', 'test_admin', 'test');
        mysql_select_db('test_product');
        $data = array_map('mysql_real_escape_string', $_POST);
        $query = "
            INSERT INTO products (
                product_name, price, description, image
            ) VALUES (
                '{$data['product_name']}',
                '{$data['price']}',
                '{$data['description']}',
                '{$data['image']}'
            )
        ";
        if(mysql_query($query)) {
            echo '<p>Your information was successfully saved.</p>';
            unset($_SESSION['token']);
        } else {
            echo '<p>There was an error storing your data, please try again later.</p>';
        }
    } else {
        echo '<p>Your data has already been saved.</p>';
    }
} else {
    echo '<p>Error.<br />Please try again later.</p>';
}
?> 
```

这是我的更新（它只是抛出一个语法错误或“错误存储您的数据”：

```
<?php

        mysql_connect('localhost', 'test_admin', 'test');
        mysql_select_db('lbriedis_product');

        $data = array_map('mysql_real_escape_string', $_POST);
        $query = "UPDATE products WHERE id = ".$pageid." (
                product_name, price, description, image
            ) VALUES (
                '{$data['product_name']}',
                '{$data['price']}',
                '{$data['description']}',
                '{$data['image']}'
            )
        ";
        if(mysql_query($query)) {
            echo '<p>Your information was successfully saved.</p>';
            unset($_SESSION['token']);
        } else {
            echo '<p>There was an error storing your data, please try again    later.</p>';
            echo mysql_error(); //Used for development and testing only
        }
?> 
```

当我尝试使用会话验证时出现会话错误，可能是因为我在我的管理页面上启动了一个会话（添加产品表单在 admin.php 上，编辑和删除是链接）？尽管如此，我暂时删除了会话检查，因为我在更新部分更加挣扎。

此外，我不确定将 $pageid 传递给更新查询的最佳方式，以获取 'update where id = $pageid. 我有一个带有值的隐藏字段（请参阅编辑表单），如何正确引用它？

编辑表单（值显示正确，因此 id = $pageid 在这里工作：

```
<?php
        $dol = "$";
        $pageid = (int)$_GET['id']; 
        mysql_connect('localhost', 'lbriedis_admin', 'xxxxxx123');
        mysql_select_db('lbriedis_product');
    $result = mysql_query("SELECT * FROM products WHERE id = ".$pageid."");
    if($result){
  $data = mysql_fetch_assoc($result);
}

    ?>

<form id="inputForm" method="post" action="edit.php">

    <fieldset>

   <label>Pool name:</label>
 <?php
   echo '<input type="text" name="product_name" value="'.$data['pool_name'].'" />';
     ?> 

    <label>Price:</label> <br>
     <?php
   echo '$&nbsp;<input type="text" name="price" value="'.$data['price'].'" />';
    ?>  <br />
    <label>Description:</label>
      <?php
   echo '<textarea name="description">'.$data['description'].'</textarea>';
    ?>

 <label>Image:</label></label>
  <?php
   echo '<input type="text" name="image" value="'.$data['image'].'" />';
    ?>  
    <input type="hidden" name="token" value="<?php echo $_SESSION['token']; ?>" />
     <input type="text" id="hp" name="hp" />
     <?php
   echo '$&nbsp;<input type="hidden" name="$pageid" value="'.$pageid.'" />';
    ?>  

    <br>
    <input type="submit" name="submit" value="Update" />

    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:32:39.507

您的[更新](http://dev.mysql.com/doc/refman/5.0/en/update.html)查询有不正确的**sintax**

```
 $query = "UPDATE products WHERE id = ".$pageid." (
            product_name, price, description, image
        ) VALUES (
            '{$data['product_name']}',
            '{$data['price']}',
            '{$data['description']}',
            '{$data['image']}'
        ) 
```

正确的语法应该是

```
 $query="UPDATE products SET
            product_name = '".$data['product_name']."', 
            price ='".$data['price']."',
            description = '".$data['description']."',
            image = '".$data['image']."'
            WHERE id = '".$pageid."' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:36:49.953

用以下内容替换您的更新查询：-

```
$query = "UPDATE products 
  set product_name=$data['product_name'],
      price = $data['price'],
      description = $data['description'] ,
      image = $data['image']
      where id =". $pageid ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:30:35.413

改变这个

```
name="$pageid" 
```

至

```
name="pageid" 
```

并像这样访问它

```
$data = array_map('mysql_real_escape_string', $_POST);
$query = "UPDATE products WHERE id = {$data['pageid']} ( 
```

问题是`$pageid`在`edit.php`. 并且您已分配`$pageid`到`name`属性，每个产品都会有所不同。

将查询更改为此

```
$query="UPDATE products SET
        product_name = '{$data['product_name']}', 
        price ='{$data['price']}',
        description = '{$data['description']}',
        image = '{$data['image']}'
        WHERE id = '{$data['pageid']}' 
```

# java - 使用 java ResultSet 将 clob 对象作为字符串获取的性能问题

> ID：16075078
> 
> 赞同：0
> 
> 时间：2013-04-18T05:24:27.033
> 
> 标签：java, oracle

我正在尝试使用我的 java 应用程序从 ORACLE DB 中获取 CLOB 对象。此 CLOB 对象包含 XML 数据。这对我来说实际上是一个性能影响，需要大约 3 分钟的时间来处理。如果我的 XML 内容变得更多，则处理时间超出了可接受的时间间隔。

是否有任何其他替代方法可以从 DB 获取 XML 内容（CLOB 对象）而没有性能问题？使用oracle 10g。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:26:45.637

您可以尝试使用 oracle xml db，而不是以 clob 的形式存储 xml。查看更多详细信息：[http](http://www.oracle.com/technetwork/database-features/xmldb/overview/index.html) ://www.oracle.com/technetwork/database-features/xmldb/overview/index.html 。

使用 xml DB 直接对 xml 数据运行查询，因此您不需要一直将整个数据带入 java 层，这将提高性能。

编辑：

如果 xml db 不适合您，那么您需要对 java 实现进行更改。根据您的问题，我可以看到 clob 的大小导致获取数据的延迟。您启动一个后台线程，该线程可以将您的数据加载到缓存中[您可以基于 Map 创建一个简单的缓存]，然后您可以先签入缓存而不是去数据库。这可以大大减少您的时间。

# c# - 对同一对象使用多个 AutoProxyCreator

> ID：16075079
> 
> 赞同：1
> 
> 时间：2013-04-18T05:24:51.263
> 
> 标签：c#, .net, spring, spring.net, autoproxy

我将 Spring.Net 用于 IOC 和 AOP。似乎 Spring.Net 不支持多个 AutoProxyCreators。我有以下课程：

```
[Facade]
public abstract class AbstractFacade{
}

[TransactionSupportFacade]
public abstract class AbstractTransactionSupportFacade{
} 
```

有些类是从上面的类继承的，我有以下 xml 配置：

```
 <object type="Spring.Aop.Framework.AutoProxy.AttributeAutoProxyCreator , Spring.Aop">
    <property name="AttributeTypes">
      <list>
        <value>Common.Attributes.TransactionSupportFacadeAttribute, Common</value>
      </list>
    </property>
    <property name="InterceptorNames">
      <list>
        <value>JUTransactionInterceptor</value>
      </list>
    </property>
    <property name="CheckInherited">
      <value>true</value>
    </property>
  </object>

  <object type="Spring.Aop.Framework.AutoProxy.AttributeAutoProxyCreator , Spring.Aop">
    <property name="AttributeTypes">
      <list>
        <value>Common.Attributes.FacadeAttribute, Common</value>
      </list>
    </property>
    <property name="InterceptorNames">
      <list>
        <value>IdentifyServiceAspect</value>
        <value>PushIdentityAspect</value>
        <value>AuthenticationAdvice</value>
        <value>ValidationAspect</value>
        <value>ServiceCallResultWrapperAspect</value>
      </list>
    </property>
    <property name="CheckInherited">
      <value>true</value>
    </property>
  </object> 
```

问题在这里提出，这些 AttributeAutoProxyCreators 中只有一个同时工作，请帮我解决这个问题。

# android - Samsung Grand 中的媒体播放器套接字异常

> ID：16075082
> 
> 赞同：3
> 
> 时间：2013-04-18T05:25:06.870
> 
> 标签：android, media-player, samsung-mobile, socketexception

我们正在通过本地代理服务器播放媒体。一切都很好，直到新的三星 Grand 设备。在该特定设备中，我们得到一个 Socket 异常，如下所示：

```
4-04 17:55:35.646: W/System.err(15187): java.net.SocketException: sendto failed: ECONNRESET (Connection reset by peer)
04-04 17:55:35.646: W/System.err(15187):    at libcore.io.IoBridge.maybeThrowAfterSendto(IoBridge.java:506)
04-04 17:55:35.646: W/System.err(15187):    at libcore.io.IoBridge.sendto(IoBridge.java:475)
04-04 17:55:35.646: W/System.err(15187):    at java.net.PlainSocketImpl.write(PlainSocketImpl.java:507)
04-04 17:55:35.656: W/System.err(15187):    at java.net.PlainSocketImpl.access$100(PlainSocketImpl.java:46)
04-04 17:55:35.656: W/System.err(15187):    at java.net.PlainSocketImpl$PlainSocketOutputStream.write(PlainSocketImpl.java:269)
04-04 17:55:35.656: W/System.err(15187):    at java.io.BufferedOutputStream.flushInternal(BufferedOutputStream.java:185)
04-04 17:55:35.656: W/System.err(15187):    at java.io.BufferedOutputStream.write(BufferedOutputStream.java:139)
04-04 17:55:35.656: W/System.err(15187):    at com.ganeshane.music.gslib.comp.security.SecurityManager$EncryptDecryptAgent.decryptStreamWithHeaderAndFlush(SecurityManager.java:192)
04-04 17:55:35.656: W/System.err(15187):    at com.ganeshane.music.gslib.comp.player.ProxyMediaPlayer$LocalFileServer.handleGetRequest(ProxyMediaPlayer.java:315)
04-04 17:55:35.656: W/System.err(15187):    at com.ganeshane.music.gslib.comp.player.ProxyMediaPlayer$LocalFileServer.run(ProxyMediaPlayer.java:291)
04-04 17:55:35.656: W/System.err(15187): Caused by: libcore.io.ErrnoException: sendto failed: ECONNRESET (Connection reset by peer)
04-04 17:55:35.666: W/System.err(15187):    at libcore.io.Posix.sendtoBytes(Native Method)
04-04 17:55:35.666: W/System.err(15187):    at libcore.io.Posix.sendto(Posix.java:146)
04-04 17:55:35.666: W/System.err(15187):    at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:177)
04-04 17:55:35.666: W/System.err(15187):    at libcore.io.IoBridge.sendto(IoBridge.java:473)
04-04 17:55:35.666: W/System.err(15187):    ... 8 more 
```

我们的 get 和 head 标头是：

```
 HEAD = "HTTP/1.1 200 OK\r\n" + Date + "\r\n"
                + "Last-Modified: Mon, 19 Jan 20013 12:51:42 GMT\r\n"
                + "Connection: Keep-Alive\r\n"
                + "Content-Type: audio/mpeg\r\n"
                + "Accept-Ranges: bytes\r\n"
                + "Server: Apache/2.2.9\r\n" + "Content-Length: "
                + fileLength + "\r\n" + "\r\n";

          GET = "HTTP/1.1 200 OK\r\n" + Date + "\r\n"
                + "Last-Modified: Mon, 19 Jan 20013 12:51:42 GMT\r\n"
                + "Connection: Keep-Alive\r\n"
                + "Content-Type: audio/mpeg\r\n"
                + "Accept-Ranges: bytes\r\n"
                + "Server: Apache/2.2.9\r\n" + "Content-Length: "
                + fileLength + "\r\n" + "\r\n"; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-24T08:15:07.330

所以，我的解决方案是用于加密的 mp3 文件，但应该适用于其他用途。我面临的唯一问题是在缓冲未完成时寻求。我确信有一些范围结束请求，但我真的不在乎。它在 99.9% 的时间里都有效，所以......

[下面是相关的响应头部分，但您可以在https://gist.github.com/frostymarvelous/26ac6cba11bf50e591a4](https://gist.github.com/frostymarvelous/26ac6cba11bf50e591a4)找到整个代码

```
if (cbSkip > 0) {// It is a seek or skip request if there's a Range
            // header
            headers += "HTTP/1.1 206 Partial Content\r\n";
            headers += "Content-Type: " + dataSource.getContentType() + "\r\n";
            headers += "Accept-Ranges: bytes\r\n";
            headers += "Content-Length: " + (fileSize - cbSkip) + "\r\n";
            headers += "Content-Range: bytes " + cbSkip + "-" + (fileSize - 1) + "/" + fileSize + "\r\n";
            headers += "Connection: Keep-Alive\r\n";
            headers += "\r\n";
        } else {
            headers += "HTTP/1.1 200 OK\r\n";
            headers += "Content-Type: " + dataSource.getContentType() + "\r\n";
            headers += "Accept-Ranges: bytes\r\n";
            headers += "Content-Length: " + fileSize + "\r\n";
            headers += "Connection: Keep-Alive\r\n";
            headers += "\r\n";
        }

        Log.i(TAG, "headers: " + headers);

        OutputStream output = null;
        byte[] buff = new byte[64 * 1024];
        try {
            output = new BufferedOutputStream(client.getOutputStream(), 32 * 1024);
            output.write(headers.getBytes());
            InputStream data = dataSource.getInputStream();

            dataSource.skipFully(data, cbSkip);//try to skip as much as possible

            // Loop as long as there's stuff to send and client has not closed
            int cbRead;
            while (!client.isClosed() && (cbRead = data.read(buff, 0, buff.length)) != -1) {
                output.write(buff, 0, cbRead);
            }
        } 
```

# android - 数组中的数据不会持久化

> ID：16075084
> 
> 赞同：0
> 
> 时间：2013-04-18T05:25:09.337
> 
> 标签：android, arrays, orientation

在我的 Android 活动中，我使用了两个不同的数组。首先，我声明它们，然后在`onCreate()`方法中实例化它们。但是，当我填充它们然后更改方向时，它们会再次实例化并且数据丢失。

```
public class MainActivity extends Activity {

    private JSONArray first;
    private JSONArray second;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        interestedSections = new JSONArray();
        productsBought = new JSONArray();
    }

        //...
} 
```

我尝试`if (savedInstanceState != null)`在初始化数组之前添加，以便仅第一次初始化它们，但是当我改变方向时，它们是`null`. 我该怎么做才能在整个应用程序生命周期中持久保存数组中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:29:38.430

查看这个答案，因为屏幕旋转时调用了 onCreate： [Activity restart on rotation Android](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)

编辑：如果您想要一种快速而肮脏的方式使其工作，只需有一个静态初始化布尔值并将其设置为 true onCreate。如果 initialized 为真，请勿将数组设置为新数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:55:04.483

请参阅[onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)，这是您应该将数组保存到包的位置。

顺便说一句，Android有时可以杀死进程并稍后恢复活动；静态变量将无法生存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:48:04.817

`static`我必须在方法中声明数组`onCreate()`，我只在第一次初始化它们：

公共类 MainActivity 扩展 Activity {

```
private static JSONArray first;
private static JSONArray second;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    if (savedInstanceState == null) {
        first = new JSONArray();
        second = new JSONArray();
    }
}

    //... 
```

}

# c - 当我用 Scite 编译时，命令提示符不会出现，为什么？

> ID：16075091
> 
> 赞同：0
> 
> 时间：2013-04-18T05:25:32.090
> 
> 标签：c, compiler-construction, command-prompt, scite

当我用 Scite 编译时，命令提示符不会出现，为什么？我正在编写ac程序，一旦我遵守它就不会弹出是因为它没有连接吗？还是我必须连接它，如果是这样怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:18:37.560

我使用的是旧版本（10 年），因此描述可能与您的不符：在我的“参数对话框”中有一个名为“子系统”的设置。当子系统设置为“命令行界面”时，所有子进程都使用管道创建，以将子输出捕获到“输出窗格”。在这种情况下没有“Cmd 窗口”。当 sub-system 设置为任何其他值时：'GUI'、'Shell' ...子进程正在自由运行，不与 SciTE 通信：在这种情况下显示普通窗口或 Cmd 窗口。检查您的“参数对话框”或“cpp.config”文件以确保在“命令行界面”子系统下未调用“执行命令”。

# c# - 使用 List.ToLookup()

> ID：16075092
> 
> 赞同：10
> 
> 时间：2013-04-18T05:25:45.323
> 
> 标签：c#, .net, linq

我有一个如下列表：

```
var products = new List<Product>
{
    new Product { Id = 1, Category = "Electronics", Value = 15.0 },
    new Product { Id = 2, Category = "Groceries", Value = 40.0 },
    new Product { Id = 3, Category = "Garden", Value = 210.3 },
    new Product { Id = 4, Category = "Pets", Value = 2.1 },
    new Product { Id = 5, Category = "Electronics", Value = 19.95 },
    new Product { Id = 6, Category = "Pets", Value = 5.50 },
    new Product { Id = 7, Category = "Electronics", Value = 250.0 },
}; 
```

我想按类别分组并获得属于该类别的“值”的**总和。示例：电子产品：284.95**

虽然我可以通过其他方式做到这一点，但我想学习查找的用法。

是否可以在查找中获得这两个值（类别和值）？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-18T05:31:09.977

当您从 Lookup 中按键检索时，它的行为就像一个分组，因此您可以执行以下操作：

```
var productLookup = products.ToLookup(p => p.Category);
var electronicsTotalValue = productLookup["Electronics"].Sum(p => p.Value);
var petsTotalValue = productLookup["Pets"].Sum(p => p.Value);
//etc

var totalValue = products.Sum(p => p.Value);
// I wouldn't use the Lookup here, the line above makes more sense and would execute faster
var alsoTotalValue = productLookup.Sum(grp => grp.Sum(p => p.Value)); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-18T05:34:48.113

您可能想使用[`ToDictionary()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.todictionary.aspx)而不是`ToLookup`

```
var dict = products
    .GroupBy(p => p.Category)
    .ToDictionary(grp => grp.Key, grp => grp.Sum(p => p.Value));

foreach(var item in dict)
{
    Console.WriteLine("{0} = {1}", item.Key, item.Value);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T05:29:28.380

你不需要一个`Lookup`. 你可以通过一个查询来做到这一点：

```
var results =
    from p in products
    group p by p.Category into g
    select new
    {
        Category = g.Key,
        TotalValue = g.Sum(x => x.Value)
    }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-03T17:04:48.010

```
var rez = products.ToLookup(k => k.Category, v => v.Value).Select(k=>new KeyValuePair<string, double>(k.Key, k.Sum())); 
```

# java - 如果 Tomcat 在 java 中作为服务运行，则无法执行 EXE 文件

> ID：16075094
> 
> 赞同：0
> 
> 时间：2013-04-18T05:25:47.230
> 
> 标签：java, tomcat, exe

我正在使用**Apache tomcat (7.0.39)**来运行我的 java web 应用程序。在该应用程序中，我正在调用可执行文件。如果我使用 `Startup.bat`. 如果我将 Tomcat 作为服务启动，可执行文件不会运行并且 Windows 会显示

```
"Exe file encoutered a problem . We are sorry for the inconvenience caused" 
```

我需要这个，因为 tomcat 在 Windows 启动期间启动。如果我使用 启动 Tomcat `Startup.bat`，则命令提示符会打开并且不会退出。它保持打开状态。有人给出解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:59:40.937

Tomcat作为服务启动时会以不同的用户身份运行，检查该用户是否有权限执行exe文件。

或者也许 exe 通过相对路径访问其他文件，并且仅在通过命令行启动时才找到它们。

# jquery - 查找 Div 的长度

> ID：16075100
> 
> 赞同：4
> 
> 时间：2013-04-18T05:26:28.450
> 
> 标签：jquery, html

如何找到 div 中存在的元素数量？我也想打印 div 中存在的元素列表。我试过这个，但它不工作..

```
<!DOCTYPE html>
<html>
<head>
<title> Div Length</title>
<script type="text/javascript" src="js/jquery-1.6.2.min.js">

</script>
<script>
    $(function ()
    {
    alert(' Elements are ' +$('#main').length);

    }
    )
</script> 
</head> 
<body>

<div id="main">

<img src="images/thumb1.jpg"; height="30" width="30" />
<img src="images/thumb2.jpg"; height="30" width="30"/>
<img src="images/thumb3.jpg"; height="30" width="30"/>
<img src="images/thumb4.jpg"; height="30" width="30"/>
<div id="main1">

</div>

<div id="main2">

</div>

</div>
</body> 
</html> 
```

我需要找到长度，因为我是从 j 查询动态添加 div 中的元素，所以最后我想检查已成功添加的所有元素。

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T05:27:08.780

`$("div#main").children().length`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T05:31:42.630

如果要处理已动态添加的每个项目，则根本不需要获取长度。相反，您可能只是像这样循环每个循环

```
$('#main img').each(function(index){
  // Your code
  console.log( $(this).html() );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T05:29:22.450

有很多方法可以做到这一点。

一个解法 ：

根据您要计算的内容：

`$('#main div').length`返回div中的`main`div个数

`$('#main img').length``main`返回div中的图像数量

# azure - Azure 上预留实例的容量和租期

> ID：16075101
> 
> 赞同：0
> 
> 时间：2013-04-18T05:26:32.057
> 
> 标签：azure

我将 Azure 保留网站视为 ASP.NET 应用程序托管的一个选项。但我找不到有关以下两个方面的信息：

1.  预留实例大小/资源（例如，中型 VM、2 x 1.6GHz CPU、3.5GB RAM）是否与实例操作系统和操作系统服务共享，就像 VM 一样？或者这是不包括操作系统的专用计算能力？

2.  在一篇博文（[http://weblogs.asp.net/scottgu/archive/2012/09/17/announcing-great-improvements-to-windows-azure-web-sites.aspx](http://weblogs.asp.net/scottgu/archive/2012/09/17/announcing-great-improvements-to-windows-azure-web-sites.aspx)）中，Scott Guthrie 提到了运行多个站点在单个预留实例中（很像 VM，但没有完全托管），但我不清楚如何在管理工具的预留实例中设置/配置多个站点（具有不同域名）：

> 您可以以相同的成本在预留实例 VM 中运行单个站点或在其中运行 100 个网站

任何澄清表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:57:56.460

1.  就像虚拟机一样，它将与实例操作系统和操作系统服务共享。
2.  对于在保留实例中托管多个网站...阅读此处...[是否也可以让多个 azure 网站在单个保留实例上运行](https://stackoverflow.com/questions/11006428/is-it-possible-to-have-multiple-azure-web-sites-running-off-a-single-reserved-in) 。以及[如何为一个 Azure WebSite 保留实例配置多个主机标头](https://stackoverflow.com/questions/11530507/how-to-configure-multiple-host-headers-for-one-azure-website-reserved-instance) 您还可以在 Microsoft 文档中阅读有关主机标头的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T23:52:02.287

为了在单个服务器上运行多个网站，请转到您的 azure 管理门户。选择一个您想扩展到标准服务器的网站。您将看到部署到 azure 的所有网站的列表。您可以选择要一起部署到标准服务器实例的那些。

从管理门户查看下面的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/xeLcd.png)

# java - 代码效率、调试、对象方法、数组

> ID：16075112
> 
> 赞同：0
> 
> 时间：2013-04-18T05:27:11.457
> 
> 标签：java, arrays, oop, methods, performance

我更多地练习对象、数组和方法。现在我正在编写一个简单的簿记程序来添加一本书，按标题、作者、价格、库存编号和流派搜索书籍。我有几个问题，修复这个程序（在方法 fillBook() 中添加一本书，二，我如何从对象类中删除一本书，三，我怎样才能使这个程序更有效率。

目前正在研究，和阅读 ioexception 类。

**这是我得到的错误**
java:66: error: constructor Book in class Book cannot be applied to given types;
图书 tempBook = new Book();
^
必需：String、String、double、int、String
找到：无参数
原因：实际参数列表和形式参数列表长度不同
1 错误

使用退出代码 1

模板对象类完成的工具

```
public class Book
{
private String title;
private String author;
private double price;
private int inventoryNumber;
private String category;

private static int numberOfBooks = 0;

public Book(String bookTitle, String bookAuthor, double bookPrice, int bookInventoryNumber, String bookCategory)
{
    title = bookTitle;
    author = bookAuthor;
    price = bookPrice;
    inventoryNumber = bookInventoryNumber;
    category = bookCategory;
    numberOfBooks++;
}//end 5 args Book Constructor

public String getTitle()  {return title;}
public void setTitle(String t)  {title = t;}

public String getAuthor() {return author;}
public void setAuthor(String a)  {author = a;}

public double getPrice() {return price;}
public void setPrice(double p)  {price = p;}

public int getInventoryNumber() {return inventoryNumber;}
public void setInventoryNumber(int i)  {inventoryNumber = i;}

public String getCategory()  {return category;}
public void setCategory(String c)  {category = c;}

public static int getNumberOfBooks()  {return numberOfBooks;}

public String toString ()
{
    StringBuffer sb = new StringBuffer();
    sb.append("Title: " + title);
    sb.append("\nAuthor: " + author);
    sb.append("\nPrice: " + price);
    sb.append("\nInventoryNumber: " + inventoryNumber);
    sb.append("\nCategory: " + category + "\n\n");
    return (new String (sb));
}//end toString

public static String searchByTitle(Book[] newBook, String seachName)
{
    String message = "";
    for(int i=0; i<getNumberOfBooks(); i++)
    {
        if (seachName.equalsIgnoreCase(newBook[i].getTitle()))
        {
            message += newBook[i].toString();
        }//end if
    }//end for
    return message;
}//end searchByTitle

public static String searchByAuthor(Book[] newBook, String seachName)
{
    String message = "";
    for(int i=0; i<getNumberOfBooks(); i++)
    {
        if (seachName.equalsIgnoreCase(newBook[i].getAuthor()))
        {
            message += newBook[i].toString();
        }//end if
    }//end for
    return message;
}//end searchByAuthor

public static String searchByPrice(Book[] newBook, double seachPrice)
{
    String message = "";
    for(int i=0; i<getNumberOfBooks(); i++)
    {
        if (seachPrice == newBook[i].getPrice())
        {
            message += newBook[i].toString();
        }//end if
    }//end for
    return message;
}//end searchByPrice

public static String searchByInventory(Book[] newBook, int seachInventory)
    {
        String message = "";
        for(int i=0; i<getNumberOfBooks(); i++)
        {
            if (seachInventory == newBook[i].getInventoryNumber())
            {
                message += newBook[i].toString();
            }//end if
        }//end for
        return message;
}//end searchByInventory

public static String searchByCategory(Book[] newBook, String seachName)
    {
        String message = "";
        for(int i=0; i<getNumberOfBooks(); i++)
        {
            if (seachName.equalsIgnoreCase(newBook[i].getCategory()))
            {
                message += newBook[i].toString();
            }//end if
        }//end for
        return message;
}//end searchByAuthor

}//end class 
```

运行程序类

```
import javax.swing.JOptionPane;

class FindBook
{
public static void main(String[] args)
{
    Book[] newBook = new Book[2000];
    newBook[0] = new Book("Game of Thrones", "George R. R. Martin", 39.95, 3, "fiction");
    newBook[1] = new Book("A Song of Ice and Fire", "George R. R. Martin", 34.50, 3, "fiction");
    newBook[2] = new Book("Java Programming For Dummies", "Donald Koosis", 59.29, 12, "non fiction");
    newBook[3] = new Book("Java™ Programming: From Problem Analysis to Program Design, 5th Edition", "Malik", 140.49, 4, "non fiction");
    newBook[4] = new Book("Life of Pi", "Yann Martel", 12.50, 3, "childrens");

    boolean continueOption = true;
    //****************menu bar********************/
    do {
        int menuOption = getMenu();
        switch (menuOption)
        {
            case 1: addBook(newBook); break;
            case 2: searchByTitle(newBook); break;
            case 3: searchByAuthor(newBook); break;
            case 4: searchByPrice(newBook); break;
            case 5: searchByInventory(newBook); break;
            case 6: searchByCategory(newBook); break;
            case 7: displayAllBookInfo(newBook); break;
            case 8: continueOption = false; break;
            default: JOptionPane.showMessageDialog(null, "Invalid choice"); break;
        }//end menu
    }while (continueOption);

    JOptionPane.showMessageDialog(null, "Thank You Come Again");

}//end main

public static int getMenu()
{
    String message;
    int choice;
    message = "\n1\. Add a book in the book database: \n"
    + "2\. Search book database by title: \n"
    + "3\. Search books database by author: \n"
    + "4\. Search books database by price: \n"
    + "5\. Search books database by inventory: \n"
    + "6\. Search books database by category: \n"
    + "7\. Display all book information: \n"
    + "8\. Exit the program\n\n"
    + "Please enter in a number from the menu to choose.";
    choice = Integer.parseInt(JOptionPane.showInputDialog(null,message));
    return choice;
} // end getMenu method

// option to add another book
public static void addBook(Book[] aBook)
{
    int select;
    do{
        aBook[Book.getNumberOfBooks()] = fillBook();
        select = JOptionPane.showConfirmDialog(null, "Add another book?");
    }while (select == JOptionPane.YES_OPTION && Book.getNumberOfBooks() < 2000);
}//end method add book

//filling in a book into book array
public static Book fillBook()
{
    Book tempBook = new Book();
    tempBook.setTitle(JOptionPane.showInputDialog(null, "Enter a title"));
    tempBook.setAuthor(JOptionPane.showInputDialog(null, "Enter an author"));
    tempBook.setPrice(Double.parseDouble(JOptionPane.showInputDialog(null, "Enter in a Price")));
    tempBook.setInventoryNumber(Integer.parseInt(JOptionPane.showInputDialog(null, "Enter in how many book(s) are in inventory")));
    tempBook.setCategory(JOptionPane.showInputDialog(null, "Enter in the category"));
    return tempBook;
}//end fillBook

public static void searchByTitle(Book[] aBook)
{
    String message = "";
    String searchTitle = "";
    searchTitle = JOptionPane.showInputDialog(null, "What title do you want to search for?");
    message = Book.searchByTitle(aBook, searchTitle);
    JOptionPane.showMessageDialog(null, message);
}//end method searchByTitle

public static void searchByAuthor(Book[] aBook)
{
    String message = "";
    String searchAuthor = "";
    searchAuthor = JOptionPane.showInputDialog(null, "What Author do you want to search for?");
    message = Book.searchByAuthor(aBook, searchAuthor);
    JOptionPane.showMessageDialog(null, message);
}//end method searchByAuthor

public static void searchByPrice(Book[] aBook)
{
    String message = "";
    double searchPrice = Double.parseDouble(JOptionPane.showInputDialog(null, "What Author do you want to search for?"));
    message = Book.searchByPrice(aBook, searchPrice);
    JOptionPane.showMessageDialog(null, message);
}//end method searchByPrice

public static void searchByInventory(Book[] aBook)
{
    String message = "";
    int seachInventory = Integer.parseInt(JOptionPane.showInputDialog(null, "What Author do you want to search for?"));
    message = Book.searchByInventory(aBook, seachInventory);
    JOptionPane.showMessageDialog(null, message);
}//end method searchByInventory

public static void searchByCategory(Book[] aBook)
{
    String message = "";
    String searchCategory = "";
    searchCategory = JOptionPane.showInputDialog(null, "What Author do you want to search for?");
    message = Book.searchByCategory(aBook, searchCategory);
    JOptionPane.showMessageDialog(null, message);
}//end method searchByCategory

public static void displayAllBookInfo(Book[] aBook)
{
    String message ="";
    for(int i=0; i<Book.getNumberOfBooks(); i++)
    {
        message += aBook[i].toString();
    }//end for loop for displayAllBookInfo
    JOptionPane.showMessageDialog(null, message);
}//end method displayAllBookInfo

}//end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:28:36.597

您需要为 Book 类添加一个默认构造函数。一旦你提供了参数化的构造函数，java 将不会自动创建默认的构造函数，所以你需要提供它。

`Book tempBook = new Book();`一旦您在类中提供以下构造函数，将开始工作。

```
Public Book(){
//implementation
} 
```

# ios - 如何以编程方式将音乐从 pc 同步到 iphone 音乐库？

> ID：16075123
> 
> 赞同：5
> 
> 时间：2013-04-18T05:28:15.470
> 
> 标签：ios, objective-c, macos, ipod, mpmusicplayercontroller

我已经从网站 url 或通过共享应用程序从 pc 下载音乐并将其存储到本地文档目录。现在我想以编程方式将存储的音乐从本地目录添加到设备的音乐库中。

那么如何在不使用 iTunes 的情况下以编程方式将本地目录中的音乐同步到 iphone/ipod/ipad 设备的音乐库？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:17:47.280

当您的 iPhone 插入计算机时，自动打开 iTunes 和 iTunes 以同步您的音乐。

# python - 在 App Engine 中使用 Flask-OpenID

> ID：16075126
> 
> 赞同：0
> 
> 时间：2013-04-18T05:28:31.847
> 
> 标签：python, google-app-engine, flask

我正在 App Engine 中试用 Flask-OpenID。Flask-OpenID 使用“存储”来保存身份验证信息。如果我提到 '/some/path' 来保存数据，它在 App Engine 中不起作用，因为它是只读的。

为了让 Flask-OpenID 工作，我必须编写自己的“存储”，它使用 App Engine 的数据存储或云存储。我对如何编写这家商店没有太多想法。有没有可用的文件，以便我可以跟进。如果我得到关于使用 Flask 和 App Engine 编写“商店”的任何意见，那将会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:53:21.100

免责声明：我**不是**该框架的作者，但我每天都在使用它。您可以从[gae-init](http://gae-init.appspot.com)开始，这是一个使用[Flask-OAuth](http://pythonhosted.org/Flask-OAuth/)进行身份验证的工作示例。开箱即用地提供了登录和其他好东西，您可以对其进行概述，并在仍在建设中的[文档中进行自我教育。](http://docs.gae-init.appspot.com)

# java - 用负整数对一串数字进行排序

> ID：16075137
> 
> 赞同：2
> 
> 时间：2013-04-18T05:29:29.893
> 
> 标签：java, algorithm, sorting

这两天查了很多，没成功

现在我有 7 个整数（+ 和 -）的字符串，用逗号分隔。

我写了一个示例代码来解释。

```
 ArrayList<String> str = new ArrayList<String>();

        str.add("9,-9,21,23,28,29,35");
        str.add("18,18,-21,28,28,32,34");
        str.add("-11,-11,22,28,29,-30,31");
        str.add("8,-8,26,31,31,31,31");
        str.add("8,8,26,-32,25,29,35");
        str.add("10,9,-21,45,25,29,35");
        str.add("-11,59,21,25,25,-29,35");
        str.add("12,-9,21,55,25,29,15");
        str.add("9,9,21,25,25,-29,35");
        str.add("7,9,21,25,-35,25,35");
        str.add("4,-39,21,-15,25,-29,35");
        str.add("9,9,21,25,27,29,-35");
        str.add("10,9,21,35,25,39,15");
        str.add("8,-9,21,-25,25,29,-35");
        str.add("18,-9,21,-23,25,29,-35");

        Collections.sort(str); 
```

这不会返回正确的排序数组。它使用数字的第一个数字进行测试并继续进行排序。

但我想要的是，排序必须基于字符串中的第一个数字。只有当数字相同时（比如字符串数组的第一个数字中有三个 9），它才应该检查这些数字中的第二个数字（单独绑定的字符串）并相应地排序，依此类推。

结果应该是

```
9 , -9 , 21 , 23 , 28 , 29 , 35
9 , 9 , 21 , 25 , 25 , -29 , 35
9 , 9 , 21 , 25 , 27 , 29 , -35 
```

有没有什么方法可以在这个方法中排序。如果有的话请告诉我，欢迎任何相关的答案。

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:33:58.233

您为所需的排序语义使用了不正确的数据类型。Java 看到您想要对字符串进行排序，因此它会按字典顺序对它们进行排序，因为您没有告诉它要这样做。Java 不是读心者 :)

不要尝试对字符串进行排序，如“9,-9,21,23,28,29,35”，而是对整数数组进行排序，如 {9, 9, -9, 21, 23, 28, 29, 35 }。您仍然需要为比较器编写自己的逻辑，但现在相对容易，因为您不必进行任何字符串解析。

如果您需要排序的数据以字符串格式到达您的程序，请尝试然后将字符串数组`split`的`','`每个组件解析为一个 int，最后将其全部转储到一个 int 数组或 ArrayList 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:33:16.663

编写您的自定义排序逻辑并通过`Collection#sort`.

```
Collections.sort(str, new Comparator<String>(){
                          public int compare(String str1, String str2){
                               // Write your logic
                               // @return a negative integer, zero, or a  
                              // positive integer as the first argument is less 
                              //  than, equal to, or greater than the second.
                          }
                      }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T05:50:03.957

将此比较方法用作[sort(List list, Comparator c)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)的比较器：

```
Collections.sort(str, new Comparator<String>(){                    
    public int compare(String str1, String str2){
      int result = 0;
      int i = 0;
      String [] s1 = str1.split(",");
      String [] s2 = str2.split(",");
      while ((i < s1.length) && (i < s2.length) && (result == 0)){
        result = (Integer.parseInt(s1[i]) - Integer.parseInt(s2[i]));
        i++;        
      }
      return (result);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T05:35:43.567

您可以创建一个新类，比如 NumberListString 实现 Comparable 接口，并将此字符串作为私有字段。提供适当的构造函数以及访问器/修改器。

现在重写 compareTo 方法并提供您的比较逻辑。

然后使用 Collections.sort(str) 进行排序。这将以所需的方式对您的列表进行排序。

或者，您可以动态创建一个匿名比较器并将其提供给您的 Collections.sort 方法。

注意：我将推荐第一种方式，因为它允许您抽象您可能需要对这种特定类型的字符串执行的其他操作。

# ios - 异步加载图像？

> ID：16075139
> 
> 赞同：0
> 
> 时间：2013-04-18T05:29:32.280
> 
> 标签：ios, objective-c, uiimageview, uiimage, lazy-loading

如何异步加载图像？这就是我目前正在做的事情（借用开源代码来加载图像缩略图）：

```
- (UIImage*)thumbnailListView:(ThumbnailListView*)thumbnailListView
                 imageAtIndex:(NSInteger)index
{
    NSURL* url = [NSURL URLWithString:[recommendedArray objectAtIndex:index]] ;

//  [[cell grid_image] setImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:url]]];

NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
BOOL isImageLoaded = YES;
UIImage *bookImage = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@", docPath, [[recommendedArray objectAtIndex:index] lastPathComponent]]];

if(bookImage == nil)
    isImageLoaded = NO;

if(!isImageLoaded){
    UIImage *thumbnailImage =[UIImage imageNamed:@"App-icon-144x144.png"];}
else{
    UIImage *thumbnailImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@",[recommendedArray objectAtIndex:index]]]]];
      return thumbnailImage;

}

} 
```

我尝试将以下内容添加到该方法中，但它会为 NSURL 产生错误：

```
dispatch_queue_t imageLoadQueue = dispatch_queue_create("com.g.load", NULL);

dispatch_async(imageLoadQueue, ^{
    //Wait for 5 seconds...
    usleep(1000000);

    NSArray *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];    

    for(int k=0; k < [images count];k++){
        NSLog(@"Loading %d Image", k);
        NSString *imgURL = [images objectAtIndex:k];
        NSData *imgData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:imgURL]];
        [imgData writeToFile:[NSString stringWithFormat:@"%@/%@", docPath, [imgURL lastPathComponent]] atomically:YES];
    }

    [[self collectionView] reloadData];
    NSLog(@"DONE WITH ALL IMAGES");
}); 
```

错误

```
[NSURL length]: unrecognized selector sent to instance 0x12ea7240
2013-04-18 11:18:35.456 AssamKart[3084:14d03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSURL length]: unrecognized selector sent to instance 0x12ea7240' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:43:40.377

在方法内部->

```
- (UIImage*)thumbnailListView:(ThumbnailListView*)thumbnailListView
                     imageAtIndex:(NSInteger)index 
```

使用这个->

```
NSURLConnection *aNSURLConnection= [[NSURLConnection alloc]initWithRequest:<#(NSURLRequest *)#> delegate:<#(id)#> startImmediately:<#(BOOL)#>]; 
```

和内部代表

`- (void)connectionDidFinishLoading:(NSURLConnection *)connection;` 获取图像数据并实现您的逻辑，在这里您将再次调用

```
- (UIImage*)thumbnailListView:(ThumbnailListView*)thumbnailListView
                     imageAtIndex:(NSInteger)index 
```

递归方法，直到你`recommendedArray`筋疲力尽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:09:01.080

使用 AsyncImageView。

[https://github.com/nicklockwood/AsyncImageView](https://github.com/nicklockwood/AsyncImageView)

```
AsyncImageView *imageView = [[AsyncImageView alloc] initWithFrame:CGRectMake(Your Frame)];
imageView.contentMode = UIViewContentModeScaleAspectFill;
imageView.clipsToBounds = YES;
NSURL *URL =  [NSURL URLWithString:[NSString stringWithFormat:URL]];
[AsyncImageLoader defaultCache];
[[AsyncImageLoader sharedLoader]loadImageWithURL:URL target:self success:@selector(successSelector) failure:@selector(failureSelector)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:36:41.067

就这样做，

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    for (int k=0; k<[images count]; k++) {
    NSString *imgURL = [images objectAtIndex:k];
    NSData* data = [NSData dataWithContentsOfURL: [NSURL URLWithString:imgURL]];
    [data writeToFile:[NSString stringWithFormat:@"%@/%@", docPath, [imgURL lastPathComponent]] atomically:YES];

    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:00:13.577

您可以使用[SDWebImage](https://github.com/rs/SDWebImage)从 Internet 下载您的图像并使用以下方法：

```
[imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
               placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

# selection - Zend Studio 选择完整块

> ID：16075142
> 
> 赞同：1
> 
> 时间：2013-04-18T05:29:40.160
> 
> 标签：selection, block, zend-studio

Zend Studio 中有什么方法可以选择一个完整的块吗？我们可以使用

> Ctrl + Shift + P

并跳转到块的末尾，但是有没有办法像这样选择块代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-25T13:54:20.000

您可以使用 SHIFT + DOWN 组合

您可以更改切换标记出现模式（ALT+SHIFT+O），然后如果您双击 { 它正在选择块。

# c++ - C++ 索引到索引映射

> ID：16075146
> 
> 赞同：0
> 
> 时间：2013-04-18T05:30:12.247
> 
> 标签：c++, vector

我有一个 ID 列表（整数）。它们以非常有效的方式排序，以便我的应用程序可以轻松处理它们，例如

```
9382
297832
92
83723
173934 
```

（这种类型在我的应用程序中非常重要）。

现在我面临着必须访问另一个向量中某个 ID 的某些值的问题。

例如，ID 9382 的某些值位于 someVectorB[30] 上。

我一直在使用

```
const int UNITS_MAX_SIZE = 400000;

class clsUnitsUnitIDToArrayIndex : public CBaseStructure
{
private:
    int m_content[UNITS_MAX_SIZE];
    long m_size;
protected:
    void ProcessTxtLine(string line);
public:
    clsUnitsUnitIDToArrayIndex();
    int *Content();
    long Size();
}; 
```

但是现在我将 UNITS_MAX_SIZE 提高到 400.000，我得到了页面堆栈错误，这告诉我我做错了什么。我认为整个方法并不是很好。

如果“位置”不同，如果我想在不同的向量中定位 ID，我应该使用什么？

ps：我正在寻找一些简单的东西，可以很容易地从文件中读取，也可以很容易地序列化到文件中。这就是为什么我之前一直在使用这种蛮力方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:44:11.447

如果您想要从 int 到 int 的映射并且您的索引号不连续，您应该考虑使用`std::map`. 在这种情况下，您可以这样定义它：

```
std::map<int, int> m_idLocations; 
```

映射表示两种类型之间的映射。第一种类型是“键”，用于查找称为“值”的第二种类型。对于每个 id 查找，您可以将其插入：

```
m_idLocations[id] = position;
// or
m_idLocations.insert(std::pair<int,int>(id, position)); 
```

您可以使用以下语法查找它们：

```
m_idLocations[id]; 
```

通常`std::map`，stl 中的 a 是使用[红黑树实现的，红黑树](http://en.wikipedia.org/wiki/Red-black_tree)的查找速度较差，为 O(log n)。这比 O(1) 稍慢，您将从巨大的数组中获得，但它是对空间的更好利用，除非您存储真正大量的数字，否则您不太可能注意到实践中的差异或进行大量查找。

**编辑：**

在回应一些评论时，我认为重要的是要指出从 O(1) 到 O(log n) 可以对应用程序的速度产生显着影响，更不用说从移动到固定块的实际速度问题了内存到基于树的结构。但是，我认为最初表示您要说的内容（int 到 int）映射并避免过早优化的陷阱很重要。

在你表达了这个概念之后，你应该**使用分析器**来确定速度问题是否以及在哪里。如果您发现地图导致问题，那么您应该考虑用您认为更快的东西替换您的地图。**确保测试优化是否有帮助**，并且不要忘记包含关于您所代表的内容以及为什么需要更改的重要评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:40:40.217

由于 int m_content[UNITS_MAX_SIZE]，您可能会遇到 stackoverflow 错误。数组分配在堆栈上，400000 对堆栈来说是一个相当大的数字。您可以改用 std::vector ，它是动态分配的，您可以返回向量成员的引用以避免复制操作：

```
std::vector<int> m_content(UNITS_MAX_SIZE);

const std::vector<int> &clsUnitsUnitIDToArrayIndex::Content() const
{
   return m_content;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T05:49:11.293

如果没有其他工作，您可以在构造函数中动态分配数组。这将在堆上移动大数组并避免您的页面堆栈错误。您还应该记住在销毁您的资源时释放资源`clsUnitsUnitIDToArrayIndex`

但推荐的用法是其他成员建议的，使用 std::vector 或 std::map

# linux - 将多个文件夹重定向到单个文件夹

> ID：16075149
> 
> 赞同：1
> 
> 时间：2013-04-18T05:30:31.247
> 
> 标签：linux, apache, .htaccess, cpanel, post-redirect-get

我想知道是否可以执行以下操作：所以，当您获得新主机时，您只从几个文件夹开始，对吗？..然后你再添加几个文件夹，css、js、imgs、assets、media...等等，一年后你有大约20个额外的文件夹，你的女朋友特殊卡，你表弟学校的项目，你爸爸的作品集，你妈妈派你来帮助他们建立慈善页面的一些“客户”等等，所以几年后你有大约 100 个文件夹！这太疯狂了！所有这些文件夹的 80% 都是活动的，你有很多 Facebook 粉丝页面和你喜欢的 iframe ......等等......

所以对于这个问题，我怎样才能将所有对这个文件夹的请求发送到另一个文件夹，所以这就是我所拥有的：

domain.com
     |_css
     |_js
     |_folder1
     |_fancy1
     |_mydadprofile
     |_mysisterpictures
     |_imgs

你得到了图片...

我想做的是以下

domain.com
     |_css
     |_js
     |_oldstuff
     | |_文件夹1
     | |_mydadportfolio
     | |_fancy1
     | |_mysisterpictures
     |_imgs

如果用户请求我父亲的作品集，它会重定向到新文件夹，如果您访问 Facebook 粉丝页面并查看 iFrame 页面，您仍然可以看到信息......

我正在考虑以与重定向错误相同的方式使用 .htaccess，404 错误，403、301 ......我只是不知道如何实现......

我真的很感谢任何帮助，谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:10:54.167

你可以重写请求[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

```
RewriteRule ^mydadprofile.*$ /oldstuff/$0 [L] 
```

对于多次重写，您可以添加更多规则。

如果你想将它们组合成一个长规则，你也可以使用

```
RewriteRule ^(?:mydadprofile|mysisterpictures|folder1|fancy1).*$ /oldstuff/$0 [L] 
```

# java - 最短路径链表

> ID：16075150
> 
> 赞同：0
> 
> 时间：2013-04-18T05:30:33.377
> 
> 标签：java, algorithm, shortest-path

我想在链表列表中找到最短路径，它表示每条边/路径成本的有向图。

**输出**看起来像这样，它告诉我从顶点 0 到其他顶点的成本：

```
d[0 to 0] = 0
d[0 to 1] = 20
d[0 to 2] = 10 
```

这就是我**填充我**的测试列表的方式。

```
LinkedList<GraphData> g = new LinkedList[3];

for (int i = 0; i < 3; i++)
    weight[i] = new LinkedList<GraphData>();

g[0].add(new GraphData(1, 20);
g[0].add(new GraphData(2, 10); 
```

GraphData**类**看起来像这样：

```
int vertex, int edgeCost; 
```

**现在解决我的问题：**

我想找到从顶点 v 到所有其他顶点的最短路径。

```
 public static int[] shortestPaths(int v, LinkedList<GraphData>[] cost)
{
    // get the set of vertices
    int n = cost.length;

    // dist[i] is the distance from v to i
    int[] dist = new int[n];

    // s[i] is true if there is a path from v to i
    boolean[] s = new boolean[n];

    // initialize dist
    for(int i = 0; i < n; i++)
        dist[i] = cost[v].get(i).getCost();

    s[v] = true;

    // determine n-1 paths from v 
    for ( int j = 2 ; j < n  ; j++ )
    {
        // choose u such that dist[u] is minimal for all w with s[w] = false
        // and dist[u] < INFINITY
        int u = -1;

        for (int k = 0; k < n; k++)
            if ( !s[k] && dist[k] < INFINITY)
                // check if u needs updating
                if ( u < 0 || dist[k] < dist[u])
                    u = k;
        if (u < 0)
            break; 

        // set s[u] to true and update the distances
        s[u]=true;

        for (int k = 0; k < n; k++)
            if ( !s[k] && cost[u].get(k).getCost() < INFINITY )
                if( dist[k] > dist[u] + cost[u].get(k).getCost())
                    dist[k] = dist[u] + cost[u].get(k).getCost();

        // at this point dist[k] is the smallest cost path from
        // v to k of length j.
    }       
    return dist;
} 
```

这一行 dist[i] = cost[v].get(i).getCost(); 抛出“IndexOutOfBoundsException”

知道我做错了什么吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:57:44.600

表示图的常用方法有两种：邻接表和邻接矩阵。

**邻接列表：列表**数组。index 处的元素`i`是一个包含 vertex 的出边的小列表`i`。这是您在填充列表时创建的内容。

**邻接矩阵：**数组数组，包含从 vertex到 vertex`cost[i][j]`的边的成本。您正在使用该参数，就好像它是一个邻接矩阵。`i``j``cost`

你有两个选择：

*   更改图形构造以创建邻接矩阵并使用数组数组
*   更改算法以将`cost`其视为邻接列表而不是邻接矩阵

这是第二个选项。我重命名了一些东西并简化了初始化，以便第一次迭代计算到其直接邻居的距离`v`（而不是在开始时将其作为特殊情况进行）。

```
import java.util.*;

public class Main
{
    public static int[] shortestPaths(int v, LinkedList<Edge>[] edges)
    {
        // get the set of vertices
        int n = edges.length;

        // dist[i] is the distance from v to i
        int[] dist = new int[n];
        for (int i = 0; i < n; i++) {
            dist[i] = Integer.MAX_VALUE;
        }

        // seen[i] is true if there is a path from v to i
        boolean[] seen = new boolean[n];

        dist[v] = 0;

        // determine n-1 paths from v
        for (int j = 0; j < n; j++) {
            // choose closest unseen vertex
            int u = -1;

            for (int k = 0; k < n; k++) {
                if (!seen[k]) {
                    // check if u needs updating
                    if (u < 0 || dist[k] < dist[u]) {
                        u = k;
                    }
                }
            }

            if (u < 0 || dist[u] == Integer.MAX_VALUE) {
                break;
            }

            // at this point dist[u] is the cost of the
            // shortest path from v to u

            // set seen[u] to true and update the distances
            seen[u] = true;

            for (Edge e : edges[u]) {
                int nbr = e.getTarget();
                int altDist = dist[u] + e.getCost();
                dist[nbr] = Math.min(dist[nbr], altDist);
            }
        }

        return dist;
    }

    public static void main(String[] args)
    {
        int n = 5;
        int start = 0;
        LinkedList<Edge>[] cost = new LinkedList[n];
        for (int i = 0; i < n; i++) {
            cost[i] = new LinkedList<Edge>();
        }

        cost[0].add(new Edge(1, 20));
        cost[0].add(new Edge(2, 10));
        cost[1].add(new Edge(3, 5));
        cost[2].add(new Edge(1, 6));

        int[] d = shortestPaths(start, cost);
        for (int i = 0; i < n; i++) {
            System.out.print("d[" + start + " to " + i + "] = ");
            System.out.println(d[i]);
        }
    }
}

class Edge
{
    int target, cost;

    public Edge(int target, int cost) {
        this.target = target;
        this.cost = cost;
    }

    public int getTarget() {
        return target;
    }

    public int getCost() {
        return cost;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:45:50.653

可能元素`cost[v].get(i)`不存在（`i`在 this `LinkedList`is中没有具有索引的元素`cost[v]`）。

[http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html#get(int)](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html#get(int))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:11:42.850

问题是您的索引不对应。例如，如果您只设置一个距离

```
cost[0].add(new GraphData(5, 20)); 
```

然后

```
cost[0].get(5).getCost(); 
```

会抛出一个`IndexOutOfBoundsException`，因为你应该这样做

```
cost[0].get(0).getCost(); 
```

为了得到`20`（这很令人困惑）。

我建议使用 a `Map`，而不是 a`List`来编码边缘成本。

你填充那个`Map`喜欢

```
List<Map<Integer, Integer>> g = new ArrayList<>();

for (int i = 0; i < 3; i++)
    g.add(new HashMap<Integer, Integer>());

g.get(0).put(1, 20);
g.get(0).put(2, 10); 
```

有了这个，你可以像这样初始化你的`dist`数组

```
// initialize dist
for(int i = 0; i < n; i++)
    dist[i] = cost.get(v).containsKey(i) ? cost.get(v).get(i) : INFINITY; 
```

# file - 将已删除的文件信息添加到单个文件 [UNIX]

> ID：16075158
> 
> 赞同：0
> 
> 时间：2013-04-18T05:30:50.640
> 
> 标签：file, unix, linode

所以我有一个简单的问题

> 为了恢复文件，必须存储原始目录和文件名。
> 
> 创建一个名为“.restore.info”的隐藏文件。此文件的每一行都应包含存储文件的名称，后跟一个冒号，然后是原始完整路径和文件名。
> 
> 例如，如果从 /home/usr1.name/ 目录中删除了具有 inode 1234 的文件 f1，并且从 /home/usr1.name/testing 目录中删除了另一个名为 f1 的具有 inode 5432 的文件，则 .restore.info 将包含：
> 
> f1_1234:/home/usr1.name/f1
> 
> f1_5432:/home/usr1.name/testing/f1

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:22:04.083

```
ls f* | parallel 'echo {}_`stat -c%i {}`:$PWD/{} >> .restore.info ;mv {} recycleBin/{}_`stat -c%i {}`' 
```

希望这有效 +

# c# - 使用 DateTime.TryParse 检查字符串是否为有效日期

> ID：16075159
> 
> 赞同：52
> 
> 时间：2013-04-18T05:30:55.017
> 
> 标签：c#, .net

我正在使用`DateTime.TryParse()`函数来检查特定字符串是否是有效的日期时间，而不取决于任何文化。
令我惊讶的是，该函数返回`true`偶数字符串，如“1-1”、“1/1”等。

我怎么解决这个问题？

更新：

这是否意味着，如果我想检查一个特定的字符串是否是有效的日期时间，我需要大量的格式？我相信会有不同的组合。
即使有很多日期分隔符（“.”、“/”、“-”等），取决于文化，我也很难定义一个格式数组来检查。
基本上，我想检查一个特定的字符串是否至少包含天（1 到 31 或 01 到 31）、月份（1 到 12 或 01 到 12）和年份（yyyy 或 yy），以任何顺序，任何日期分隔符，解决方案是什么？
因此，如果该值包含时间的任何部分，它也应该返回 true。我无法定义格式数组。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-18T05:40:20.507

如果您希望您的日期符合特定格式或格式，则使用[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/ms131044.aspx)其他格式，这是默认行为`DateTime.TryParse`

[日期时间.TryParse](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)

> 如果可能，此方法会尝试**忽略无法识别的数据**，并使用当前日期填充**缺失的月、日和年信息。**如果 s 仅包含日期而没有时间，则此方法假定时间为午夜 12:00。如果 s 包含具有两位数年份的日期组件，则会根据 Calendar.TwoDigitYearMax 属性的值将其转换为当前区域性的当前日历中的年份。s 中的任何前导、内部或尾随空白字符都将被忽略。

如果您想确认多种格式，请查看[DateTime.TryParseExact Method (String, String[], IFormatProvider, DateTimeStyles, DateTime)](http://msdn.microsoft.com/en-us/library/h9b85w22.aspx)重载。来自同一链接的示例：

```
string[] formats= {"M/d/yyyy h:mm:ss tt", "M/d/yyyy h:mm tt", 
                   "MM/dd/yyyy hh:mm:ss", "M/d/yyyy h:mm:ss", 
                   "M/d/yyyy hh:mm tt", "M/d/yyyy hh tt", 
                   "M/d/yyyy h:mm", "M/d/yyyy h:mm", 
                   "MM/dd/yyyy hh:mm", "M/dd/yyyy hh:mm"};
string[] dateStrings = {"5/1/2009 6:32 PM", "05/01/2009 6:32:05 PM", 
                        "5/1/2009 6:32:00", "05/01/2009 06:32", 
                        "05/01/2009 06:32:00 PM", "05/01/2009 06:32:00"}; 
DateTime dateValue;

foreach (string dateString in dateStrings)
{
   if (DateTime.TryParseExact(dateString, formats, 
                              new CultureInfo("en-US"), 
                              DateTimeStyles.None, 
                              out dateValue))
      Console.WriteLine("Converted '{0}' to {1}.", dateString, dateValue);
   else
      Console.WriteLine("Unable to convert '{0}' to a date.", dateString);
}
// The example displays the following output: 
//       Converted '5/1/2009 6:32 PM' to 5/1/2009 6:32:00 PM. 
//       Converted '05/01/2009 6:32:05 PM' to 5/1/2009 6:32:05 PM. 
//       Converted '5/1/2009 6:32:00' to 5/1/2009 6:32:00 AM. 
//       Converted '05/01/2009 06:32' to 5/1/2009 6:32:00 AM. 
//       Converted '05/01/2009 06:32:00 PM' to 5/1/2009 6:32:00 PM. 
//       Converted '05/01/2009 06:32:00' to 5/1/2009 6:32:00 AM. 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-18T05:37:02.713

如果 `DateTime.TryParseExact()`您想匹配特定的日期格式，请使用

```
 string format = "ddd dd MMM h:mm tt yyyy";
DateTime dateTime;
if (DateTime.TryParseExact(dateString, format, CultureInfo.InvariantCulture,
    DateTimeStyles.None, out dateTime))
{
    Console.WriteLine(dateTime);
}
else
{
    Console.WriteLine("Not a date");
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-18T05:44:11.737

```
[TestCase("11/08/1995", Result= true)]
[TestCase("1-1", Result = false)]
[TestCase("1/1", Result = false)]
public bool IsValidDateTimeTest(string dateTime)
{
    string[] formats = { "MM/dd/yyyy" };
    DateTime parsedDateTime;
    return DateTime.TryParseExact(dateTime, formats, new CultureInfo("en-US"),
                                   DateTimeStyles.None, out parsedDateTime);
} 
```

*只需在名为formats*的数组中指定您希望接受的日期时间格式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-04T20:52:19.493

所以这个问题已经得到回答，但对我来说，使用的代码不够简单或完整。对我来说，这就是我一直在寻找的东西，可能其他人也会喜欢它。

```
string dateString = "198101";

if (DateTime.TryParse(dateString, out DateTime Temp) == true)
{
     //do stuff
} 
```

输出存储在`Temp`之后不需要的，`datestring`是要测试的输入字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-13T20:32:10.463

另一种方法是创建一种方法来验证文本是否为 Date 类型。

```
public bool IsDateTime(string date)
{
    if (string.IsNullOrEmpty(date)) return false;
    return DateTime.TryParse(date, out DateTime dateTime);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T08:53:07.283

> 基本上，我想检查一个特定的字符串是否至少包含天（1 到 31 或 01 到 31）、月份（1 到 12 或 01 到 12）和年份（yyyy 或 yy），以任何顺序，任何日期分隔符，解决方案是什么？因此，如果该值包含时间的任何部分，它也应该返回 true。我无法定义格式数组。

当我处于类似情况时，这就是我所做的：

1.  收集我的系统预期支持的所有格式。
2.  看看什么是常见的或可以概括的。
3.  学会了创建正则表达式（最初是一种时间投资，但一旦你自己创建一两个就会得到回报）。也不要尝试一次性为所有格式构建 REGEX，遵循增量过程。
4.  我创建了 REGEX 以涵盖尽可能多的格式。
5.  在少数情况下，为了不使 REGEX 更加复杂，我通过 DateTime.Parse() 方法对其进行了介绍。
6.  通过 Parse 和 REGEX 的结合，我能够验证输入是否正确/符合预期。

这个[http://www.codeproject.com/Articles/13255/Validation-with-Regular-Expressions-Made-Simple](http://www.codeproject.com/Articles/13255/Validation-with-Regular-Expressions-Made-Simple) 对于理解和验证每种格式的语法都非常有帮助。

如果有帮助，我的 2 美分....

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-04T15:11:18.503

尝试使用

```
DateTime.ParseExact(
    txtPaymentSummaryBeginDate.Text.Trim(),
    "MM/dd/yyyy", 
    System.Globalization.CultureInfo.InvariantCulture
); 
```

如果输入字符串的格式不正确，它将引发异常，因此在该`catch`部分中您可以`return false;`

# windows - 输入框在 Windows 资源管理器中查找并打开文件夹

> ID：16075164
> 
> 赞同：0
> 
> 时间：2013-04-18T05:31:20.290
> 
> 标签：windows, input, directory

问题：

我有 10,000 个编号的文件夹。例如：

根/7000-8000/7400/7473/

根/3000-4000/3800/3846/

这些网络文件夹是“单元文件夹”，其中包含我公司销售的每个“单元”的所有文档、设计、照片、会计等数据。这些文件按子目录组织。数十名员工每天数百次引用这些文件夹。不断深入到您要查找的文件夹是很乏味的。

我想要的是：

我想创建一个简单的输入框，用户只需要输入一个单位编号，比如说 1 到 100,000 之间，然后按 Enter。系统会自动打开对应的“单元文件夹”。

如何：

我正在寻找某人来帮助我弄清楚我需要学习哪种脚本语言来完成这项工作，我应该特别研究哪些功能，以及我应该知道的任何交易破坏者。

我需要某种输入框，越简单越好，它可以留在桌面或任务栏中。接下来我需要解析输入的数字，并将它们分解成千、百、十等。然后我需要将这些变量组合到一个目标文件夹中，以创建正确的命令以发送到资源管理器。最后，如果出现问题，我需要发出错误。

提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:26:38.553

我们弄明白了。如果其他人遇到这样的事情，代码附在下面：

```
Option Explicit

Private Function CheckPath(strPath As String) As Boolean
        Dim fso As New FileSystemObject

        If fso.FolderExists(strPath) Then
            CheckPath = True
        Else
            CheckPath = False
        End If
End Function

''''''''''''''''''
Private Sub cmdGo_Click()
Dim unit As Double 'unit number
Dim unitTh As Integer 'for thousand of unit
Dim unitHu As Integer 'for hundred of unit
Dim locationstring As String 'for string to store folder location
Dim Exists As Boolean 'ensure folder exists

locationstring = "Z:\Unit Folders\"
If Val(txtUnit.Text) > 90000 Then
    unit = Val(txtUnit.Text) - 90000
    unitHu = Fix(unit / 100)

    locationstring = locationstring & "RTB90000-90999\RTB"
    locationstring = locationstring & "90" & unitHu & "00"
    locationstring = locationstring & "\RTB90" & unit & "\"
Else
    unit = Val(txtUnit.Text)
    unitTh = Fix(unit / 1000)
    If unit > 10000 Then
        unitTh = unitTh + 10
    End If
    unitHu = Fix((unit - unitTh * 1000) / 100)

    locationstring = locationstring & unitTh & "000-" & unitTh & "999\"
    locationstring = locationstring & unitTh & unitHu & "00"
    locationstring = locationstring & "\" & unit & "\"

End If
Exists = (CheckPath(locationstring))
Dim x
If Exists Then
    x = Shell("c:\windows\explorer.exe " & locationstring, vbNormalFocus)
Else
    MsgBox ("Folder does not exist")
End If

End Sub 
```

# java - Java缓冲灰度图像字节和整数

> ID：16075165
> 
> 赞同：0
> 
> 时间：2013-04-18T05:31:22.533
> 
> 标签：java, image, bufferedimage, grayscale

请，请有人可以在下面向我解释。它让我发疯。我正在玩从 java 中的数组创建 8 位灰度图像。

下面的代码应该产生黑色 > 白色水平渐变。第 1 部分和第 2 部分确实产生了所需的图像，但在 int[] 中传递给`getimageFromarray`in **1**从 -128 到 127，并且 in **2**从 0 到 255，但它们产生相同的图像。**3**产生我期望**1**产生的（不想要的）图像，仅使用其最大值和最小值。

为什么是这样？怎么会这样？

```
import java.awt.image.BufferedImage;
import java.awt.image.WritableRaster;
import java.io.FileOutputStream;
import java.io.IOException;

import javax.imageio.ImageIO;

public class Test {

    final static int WIDTH = 320;
    final static int HEIGHT = 256;

    // Black and white as int
    final static int BLACK = 0;
    final static int WHITE = 255;
    //...same, but not
    final static int BLACK_WRONG = 127;
    final static int WHITE_WRONG = -128;

    // Black and white as byte val
    final static byte BLACK_BYTE = -0x80; //i.e -128
    final static byte WHITE_BYTE = 0x7f; // i.e. 127

    public static void main(String[] args) throws IOException { 

        int[] pixels = new int[WIDTH*HEIGHT];
        int[] m;

        // Generates gradient1.bmp
        // produces as expected - black at top, white at bottom
        int numb=0,c=0;
        byte grey1 = BLACK;
        while (numb<pixels.length){

            // inc through greyscales down image
            if (c>WIDTH){
                grey1++;
                c=0;
            }       

            // cast from byte to int
            pixels[numb] = grey1; 

            // inc column and count
            c++;
            numb++;
        }

        m = getMaxMin(pixels); // max 127 , min -128
        System.out.printf("Maxmin %s; %s;\n",m[0], m[1]);
        getImageFromArray("gradient1.bmp", pixels,WIDTH, HEIGHT);

        //*************************************************************************
        // Generates gradient3.bmp
        // produces as expected - black at top, white at bottom

        numb=0;     
        c=0;
        int grey2 = BLACK; //i.e zero
        while (numb<pixels.length){

            // inc through greyscales down image
            if (c>WIDTH){
                grey2++;
                c=0;
            }       

            // no cast
            pixels[numb] = grey2; 

            // inc column and count
            c++;
            numb++;
        }

        m = getMaxMin(pixels); // max 255, min 0
        System.out.printf("Maxmin %s; %s;\n",m[0], m[1]);
        getImageFromArray("gradient2.bmp", pixels,WIDTH, HEIGHT);

        //*************************************************************************
        // Generates gradient3.bmp
        // produces as unexpected - midgrey > white. black > midgrey
        numb=0;     
        c=0;
        byte grey3 = BLACK_BYTE; //i.e zero
        while (numb<pixels.length){

            // inc through greyscales down image
            if (c>WIDTH){
                grey3++;
                c=0;
            }       

            // no cast
            pixels[numb] = grey3; 

            // inc column and count
            c++;
            numb++;
        }

        m = getMaxMin(pixels); // max 127 , min -128
        System.out.printf("Maxmin %s; %s;\n",m[0], m[1]);
        getImageFromArray("gradient3.bmp", pixels,WIDTH, HEIGHT);
    }

//*******************************************************************************
    static int sWidth,sHeight = 0;        
    static BufferedImage sImage = null;
    static WritableRaster sRaster=null;

    public static BufferedImage getImageFromArray(String filename, int pixels[], int width, int height) throws IOException {
        if (sImage == null){
        sImage = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY);
        sRaster = sImage.getRaster();
        }

        sRaster.setPixels(0,0,width,height,pixels);
        try {
            ImageIO.write(sImage, "bmp", new FileOutputStream(filename));
        } catch (IOException e) {
            e.printStackTrace();
        }
        return sImage;
    }

    static int[] getMaxMin(int[] v){
        int max=0,min=0;
        for (int i:v){
            if (i>max) max = i;
            if (i<min) min = i;
        }
        int[] r = {max,min};
        return r;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:44:58.793

假设`BufferedImage`将 RGBA（或类似的）编码颜色作为输入，您需要`int`从它们各自的 RGBA 组件中正确构造这些 s。

要将带符号的 bytes `R = 0`, `G = 0`, `B = 0`,转换`A = 127`为*GREY*，您必须将它们转换为 unsigned `int`s 并将它们组合成一个`int`，如下所示：

```
int color = (((A & 0xff) << 24 | ((B & 0xff) << 16) | ((G << 8) | (R & 0xff)); 
```

*这与分配7f 7f 7f ff*的十六进制值相同。`& 0xff`掩码对于正确地将有符号字节（-128 到 127）转换为无符号整数（0 到 255）是必要的。

`<<`'左移' int 内的字节。

您可能必须更改 RGBA 的输入顺序才能获得正确的结果。

# cordova - facebook评论未在电话间隙中显示其整个列表

> ID：16075168
> 
> 赞同：0
> 
> 时间：2013-04-18T05:31:40.263
> 
> 标签：cordova, facebook-javascript-sdk, phonegap-plugins

我正在尝试使用 facebook cordova s​​dk 将 Facebook 评论放入我在 iOS 上的 phonegap 应用程序中。我已经包含了 Facebook_js_sdk.js 和 cdv-plugin-fb-connect.js。另外，我在body标签开始后添加了下面的代码。

```
<div id="fb-root"></div>
        <script>(function(d, s, id) {
                 var js, fjs = d.getElementsByTagName(s)[0];
                 if (d.getElementById(id)) return;
                 js = d.createElement(s); js.id = id;
                 js.src = "//connect.facebook.net/ko_KR/all.js#xfbml=1&appId=MY_APP_ID";
                 fjs.parentNode.insertBefore(js, fjs);
                 }(document, 'script', 'facebook-jssdk'));</script> 
```

并将下面的代码放在要显示的位置

```
<div class="fb-comments" data-href="http://example.com" data-width="470" data-num-posts="10"></div> 
```

但是，Facebook 评论插件在运行应用程序时总是只显示一条评论和一半（它没有完全加载）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T13:52:04.540

尝试将此添加到您的CSS：

```
.fb_ltr { min-height:100%; !important; } 
```

或者

```
.fb_ltr { min-height:300px; !important; } 
```

第一个对我有用，即使 % height shouldent。

# r - R 中的时间数据，用于以 HMS 格式记录的持续时间（但 H 可以大于 24）

> ID：16075170
> 
> 赞同：1
> 
> 时间：2013-04-18T05:31:58.133
> 
> 标签：r, datetime, time

我有一个这样的数据集：

```
> dput(data)
structure(list(Run = c("Dur 2", "Dur 3", "Dur 4", "Dur 5", "Dur 7", 
"Dur 8", "Dur 9"), reference = c("00h 00m 32s", "00h 00m 31s", 
"00h 05m 46s", "00h 03m 51s", "00h 06m 49s", "00h 06m 47s", "00h 08m 56s"
), test30 = c("00h 00m 44s", "00h 00m 41s", "00h 21m 54s", "00h 13m 37s", 
"00h 28m 48s", "00h 22m 54s", "10h 02m 12s"), test31 = c("00h 00m 39s", 
"00h 00m 45s", "00h 40m 10s", "00h 23m 07s", "00h 35m 23s", "00h 47m 42s", 
"25h 37m 05s"), test32 = c("00h 01m 05s", "00h 01m 13s", "00h 55m 02s", 
"00h 28m 54s", "01h 03m 17s", "01h 02m 08s", "39h 04m 39s")), .Names = c("Run", 
"reference", "test30", "test31", "test32"), class = "data.frame", row.names = c(NA, 
-7L)) 
```

我试图将它变成可绘制的格式，如下所示：

```
library(reshape2)
library(scales)

# melt the data and convert the time strings to POSIXct format
data_melted <- melt(data, id.var = "Run")
data_melted$value <- as.POSIXct(data_melted$value, format = "%Hh %Mm %Ss") 
```

大概是由于 POSOXct 期望 24 小时时间意义上的实际 HMS 数据，我`NA`在最后的持续时间内得到了 s 。`Dur9`

处理这种不会滚动到几天的记录数据的推荐方法是`H > 24`什么？

我是否需要手动检查此类实例并创建一个表示日期的新字符串（这似乎需要我创建一个任意的开始日期并增加日期 if `H > 24`）？或者是否有更适合严格时间数据的软件包而不是假设所有时间数据都根据实际时间戳记录？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:47:58.867

您可以`colsplit`从`plyr`包中使用创建小时、分钟和秒的列，然后使用创建`difftime`可以添加到日期的对象

```
library(plyr)

# note gsub('s','',mdd[['value']]) removes trailing s from each value
# we then split on `[hm]` (ie. h or m)` -- this returns a data.frame with
# 3 integer columns 
times <- colsplit(gsub('s','',mdd[['value']]), '[hm]', names = c('h','m','s'))

seconds <- as.difftime(with(times, h*60*60 + m *60 + s), format = '%X', units = 'secs')
seconds
Time differences in secs
 [1]     32     31    346    231    409    407    536     44     41   1314    817   1728   1374  36132     39     45
[17]   2410   1387   2123   2862  92225     65     73   3302   1734   3797   3728 140679 
```

你不需要自己做算术，使用`Map`and`Reduce`

```
 Reduce('+',Map(as.difftime, times, units = c('hours','mins','secs'))) 
```

# windows - 如何从命令提示符使用 Visual Studio 2012 编译 Windows XP

> ID：16075171
> 
> 赞同：1
> 
> 时间：2013-04-18T05:32:02.693
> 
> 标签：windows, visual-studio-2012

我正在运行带有外部 c 库的**tcl/tk (8.5)以连接到****d2xx USB**库。我正在运行 Windows 8 并尝试使用`VS 2012 Native Tools`命令提示符编译库。当我启动命令提示符时，我的密码是：

```
\Program Files (x86)\Microsoft Visual Studio 11.0\VC 
```

c 库 (tclftd2xx.c) 带有用于虚拟工作室的 nmake 文件，可以正确设置环境以链接到所需的 tcl 库和 d2xx 头文件。

在 VS 命令窗口中，我 CD 到包含 makefile.vc 的目录并键入：

> 制造……

我得到了我的 tclftd2xx.dll。

`tclftd2xx.dll calls msvcr110.dll`. 当这两个都正确放置在 /Tcl/lib 中时，它们在我的 Windows 8 系统以及 Vista 和 Windows 7 上运行良好。

但是，在 Windows XP 上安装时，Windows 无法加载 tclftd2xx.dll。

我做了一些搜索，发现我必须为 v110_xp 工具集配置 VS2012。链接（[http://blogs.msdn.com/b/vcblog/archive/2012/10/08/10357555.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/10/08/10357555.aspx)）有这个注释：

> 已切换到 v110_xp 工具集的 Visual Studio 2012 解决方案和项目可以使用 MSBuild 或 DEVENV 从命令行构建，无需额外步骤。
> 
> 但是，如果您希望直接使用 CL 和 Link，则需要额外的步骤。请注意，可以通过创建批处理脚本来自动执行以下步骤。

我在这里做的：

```
REM set include and path variables
set INCLUDE=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Include;%INCLUDE%
set PATH=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Bin;%PATH%

REM When targeting X86, set the lib path as follows:
set LIB=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Lib;%LIB%

REM set the compiler options
set CL=/D_USING_V110_SDK71_;%CL%

REM  When targeting x64, set the lib path as follows:
REM  set LIB=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Lib\x64;%LIB%

REM  Specify the correct subsystem and subsystem version for the linker based on the type of
REM  application you are building. Applications targeting the x86 version of Windows XP must specify
REM  subsystem version 5.01, and applications targeting x64 must specify version 5.02.

REM  For x86 console applications:
set LINK=/SUBSYSTEM:CONSOLE,5.01 %LINK%

REM  For x64 console applications:
REM  set LINK=/SUBSYSTEM:CONSOLE,5.02 %LINK% 
```

要构建 xp 版本，从 VS 命令行 I 1) 运行 .bat 文件 2) nmake .....

我得到一个大小与 Windows 8 目标 dll 完全相同的 .dll。

所以我有两个问题：

1.  除了执行 .bat 文件之外，我还必须运行其他一些神奇的配置脚本或环境变量来启用 v110_xp 工具集`.bat file`吗？还是执行 .bat 文件来完成完整配置？
2.  除了尝试将其加载到 XP 系统上之外，是否有其他方法可以确认 .dll 确实针对 XP 系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-17T17:20:49.097

我想出了以下批处理脚本来设置变量。看来，我必须将其包含在我的项目中，以便人们使用 Visual Studio 2012 构建我的代码。

```
@echo off
goto :start

:check_dir
    if not exist "%~1" (
        echo Directory "%~1" does not exist.
        echo Things may not work as expected.
    )
    goto :eof

:start
    setlocal
    if "%PROCESSOR_ARCHITECTURE%" == "x86" (
        set "ProgramFiles(x86)=%ProgramFiles%"
    )

    set "BINDIR=%ProgramFiles(x86)%\Microsoft SDKs\Windows\v7.1A\Bin"
    set "INCDIR=%ProgramFiles(x86)%\Microsoft SDKs\Windows\v7.1A\Include"
    set "LIBDIR=%ProgramFiles(x86)%\Microsoft SDKs\Windows\v7.1A\Lib"
    set "SUBSYS=CONSOLE,5.01"

    REM for x64 instead of x86:
    REM set "LIBDIR=%ProgramFiles(x86)%\Microsoft SDKs\Windows\v7.1A\Lib\x64"
    REM set "SUBSYS=CONSOLE,5.02"

    call :check_dir "%%BINDIR%%"
    call :check_dir "%%INCDIR%%"
    call :check_dir "%%LIBDIR%%"

    endlocal & (
        set "CL=/D_USING_V110_SDK71_;%CL%"
        set "LINK=/SUBSYSTEM:%SUBSYS% %LINK%"
        set "LIB=%LIBDIR%;%LIB%"
        set "PATH=%BINDIR%;%PATH%"
        set "INCLUDE=%INCDIR%;%INCLUDE%"
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T13:50:59.320

您不必同时包含 msvcrt 和 tclftd2xx dll。编译器生成一个清单，该清单向运行时加载程序提供必要的信息，以说明应该加载哪个 C++ 运行时。您看到的错误是 rules.vc 文件需要更新以支持较新的编译器。完成此操作后，makefile 变量 _VC_MANIFEST_EMBED_DLL 将设置为将编译器清单文件合并到生成的 DLL 所需的命令。

我已经在 github 上更新了项目，所以这应该不再是问题。

# xml - xslt 中的 XML 命名空间处理

> ID：16075174
> 
> 赞同：2
> 
> 时间：2013-04-18T05:32:09.237
> 
> 标签：xml, xslt, namespaces

我需要使用 xslt 将一种 xml 格式转换为另一种 xml。最初我尝试不使用命名空间并得到它。但是当我尝试使用命名空间 xmlns="http://ws.wso2.org/dataservice" 时，它在给定的 xml 文件中没有前缀作为 xmlns:d="http://ws.wso2.org/dataservice" 无法工作

```
<test xmlns="http://ws.wso2.org/dataservice">
 <datarows>
  <name>Name</name>
 </datarows>
 <datarows>
  <name>karthik</name>
 </datarows>
 </testcsv> 
```

我需要 xsl 转换后的 xml 文件，就像

```
<head>
<names>Name</names>
<names>karthik</names>
</head> 
```

帮助我使用 xslt

我试过 xslt 作为

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:d="http://ws.wso2.org/dataservice" exclude-result-prefixes="d" >
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
     <namespace-alias stylesheet-prefix="xsl" result-prefix="#default"/>

    <xsl:template match="/">
    <head>
        <xsl:for-each select="testcsv/datarows">
            <names>
                <xsl:value-of select="name" />
            </names>
        </xsl:for-each>
        </head>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:51:26.927

请更改以下列表： 1\. 您的输入 XML 格式不正确。请将根元素更改为`<testcsv>` 2。`<namespace-alias stylesheet-prefix="xsl" result-prefix="#default"/>`从您的 XSLT 中删除，因为它不需要。3\. 在您的输入 XML 中添加命名空间 xmlns:d="http://ws.wso2.org/dataservice"

输入 XML：

```
<?xml version="1.0"?>
<testcsv xmlns:d="http://ws.wso2.org/dataservice">
 <datarows>
  <name>Name</name>
 </datarows>
 <datarows>
  <name>karthik</name>
 </datarows>
 </testcsv> 
```

XSLT 转换：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:d="http://ws.wso2.org/dataservice" exclude-result-prefixes="d" >
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="/">
    <head>
        <xsl:for-each select="testcsv/datarows">
            <names>
                <xsl:value-of select="name" />
            </names>
        </xsl:for-each>
        </head>
    </xsl:template>
</xsl:stylesheet> 
```

输出：

```
<head>
  <names>Name</names>
  <names>karthik</names>
</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:59:57.097

据我了解，您将（或不能）更改您的 xml 中的 xmlns 声明（可能是因为它是在其他地方生成的）。比你必须在你的 xlst 中使用 xml 节点前缀。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:d="http://ws.wso2.org/dataservice"
    exclude-result-prefixes="d"
    >
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
    <xsl:template match="/">
        <head>
            <xsl:for-each select="d:testcsv/d:datarows" >
                <names>
                    <xsl:value-of select="d:name" />
                </names>
            </xsl:for-each>
        </head>
    </xsl:template>
</xsl:stylesheet> 
```

# c++ - Qt QPainterpath.h 错误

> ID：16075185
> 
> 赞同：1
> 
> 时间：2013-04-18T05:32:50.583
> 
> 标签：c++, qt, compiler-errors, include-path, qpainter

我目前正在开发一个包含库`Qt`中许多`#include`文件的应用程序`Qt`。项目挺大的，在搭建的时候遇到了一个奇怪的问题。显示的错误都在`QPainterpath.h`文件中，但与我的项目对其的调用无关。错误都如下所示：

> c:\qt\4.8.4\include\qtgui../../src/gui/painting/qpainterpath.h(397)：错误 C2143：语法错误：缺少';' 前 '：：'
> 
> c:\qt\4.8.4\include\qtgui../../src/gui/painting/qpainterpath.h(397)：错误 C2059：语法错误：'::'
> 
> c:\qt\4.8.4\include\qtgui../../src/gui/painting/qpainterpath.h(398)：错误 C2143：语法错误：缺少“;” 前 '{'
> 
> c:\qt\4.8.4\include\qtgui../../src/gui/painting/qpainterpath.h(398) : 错误 C2447: '{' : 缺少函数头（旧式正式列表？）
> 
> c:\qt\4.8.4\include\qtgui../../src/gui/painting/qpainterpath.h(405) : 警告 C4003: 宏 'elementCount' 的实际参数不足

我以前遇到过一次，并且能够通过将一些`Qt`#include 语句移动到它们下面的其他类头之前调用来解决它。不过，我似乎无法弄清楚这次是什么原因造成的。任何想法都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:58:06.403

当您忘记用分号关闭类定义时，我已经看到了这种情况。如果您查看编译器的输出，并查看在此错误开始之前编译了哪个文件，您可能会得到答案。在先前编译的文件末尾查找缺少 a`;`或 extra`}`或缺少的语法错误。`}`

它也可能来自您调用`.h`上方列出的有错误的文件。`#include <QPainter>`

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T19:29:27.687

我正在与 RyGuyFalcore 合作，并弄清楚为什么我们的代码会发生这种情况，而没有其他人看到它。问题是我们的遗留代码重新定义了 elementCount 宏。因此，如果我们在包含 Qt 代码之前包含了遗留代码的那部分，则使用了错误的宏 :( 想我会在此处发布此内容以避免其他人遇到类似错误时可能会遇到的任何疯狂追逐。

# html - 某些字体不适用于@font-face？

> ID：16075187
> 
> 赞同：1
> 
> 时间：2013-04-18T05:33:04.363
> 
> 标签：html, css, font-face

这就是令人沮丧的地方。我得到了一个 Sansation 的字体包，然后尝试将它与@font-face 一起使用。普通版有效，而“粗体”版则无效。我检查了文件名，它绝对是正确的。我的理解是任何字体都应该有效。我错过了什么吗？

```
@font-face
    {
        font-family: sansation_regular;
        src: url('/fonts/sansation_regular-webfont.ttf'),
            url('/fonts/sansation_regular-webfont.eot');
    } 
```

然后，我在不更改与文本元素对应的 CSS 中的 font-family 的情况下，将其更改为：

```
@font-face
    {
        font-family: sansation_regular;
        src: url('/fonts/sansation_bold-webfont.ttf'),
            url('/fonts/sansation_bold-webfont.eot');
    } 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:06:17.940

您可能还应该通过 FontSquirel 运行字体以获取完整集 [http://www.fontsquirrel.com/tools/webfont-generator](http://www.fontsquirrel.com/tools/webfont-generator)

它将生成的 CSS 类似于：

```
/* fonts */
@font-face {
font-family: 'sansation_regular-webfont';
src: url('../fonts/sansation_regular-webfont.eot');
src: url('../fonts/sansation_regular-webfont.eot?#iefix') format('embedded-opentype'),
url('../fonts/sansation_regular-webfont.woff') format('woff'),
url('../fonts/sansation_regular-webfont.ttf') format('truetype'),
url('../fonts/sansation_regular-webfont.svg#sansation_regular-webfont') format('svg');
font-weight: normal;
font-style: normal;
}

@font-face {
font-family: 'sansation_bold-webfont';
src: url('../fonts/sansation_bold-webfont.eot');
src: url('../fonts/sansation_bold-webfont.eot?#iefix') format('embedded-opentype'),
url('../fonts/sansation_bold-webfont.woff') format('woff'),
url('../fonts/sansation_bold-webfont.ttf') format('truetype'),
url('../fonts/sansation_bold-webfont.svg#sansation_bold-webfont') format('svg');
font-weight: normal;
font-style: normal;
} 
```

另外我会避免使用完整的 ULR refs - 只需从 css 文件中检查字体文件夹的路径是否正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:01:06.257

作为@DOLOisSOLO 和@Mr。Lavalamp 建议，绝对路径应该可以工作。

为了将来参考，您的 CSS 文件是否在文件夹中？如果是这样，则可以使用相对路径 URL，例如：

```
@font-face
{
    font-family: sansation_regular;
    src: url('../fonts/sansation_regular-webfont.ttf'),
        url('../fonts/sansation_regular-webfont.eot');
} 
```

每次代表上一级的点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:45:19.617

我已经用@font-face 测试了 Sansation，当安装为系统字体时，常规和粗体版本似乎都可以工作。也许仔细检查路径？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T05:52:27.303

如果使用本地文件目录不起作用，请尝试使用绝对路径。以下解决方案有效：

```
@font-face
    {
        font-family: sansation_regular;
        src: url('http://www.siteAddress.com/fonts/sansation_bold-webfont.ttf'),
            url('http://www.siteAddress.com/fonts/sansation_bold-webfont.eot');
    } 
```

# mysql - 随机连接错误无法连接到mysql数据库服务器10060

> ID：16075188
> 
> 赞同：1
> 
> 时间：2013-04-18T05:33:08.790
> 
> 标签：mysql, networking

我们的应用程序在端口 3306 使用来自远程 linux 服务器的 mysql 数据库 应用程序正在使用来自 windows xp service pack 3 机器的 TCP/IP 协议连接到数据库服务器。应用程序几乎一直运行良好，但有时它随机给出以下错误“[MySQL ][ODBC 5.1 驱动程序]无法连接到“IP Adderss”上的 MySQL 服务器 (10060)”。大约 240 个用户中只有一个桌面用户面临这个问题。

应用程序是用VB6开发的。数据库服务器：mysql 5.1.51

任何人都可以提出这个错误的可能原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:15:25.910

由于错误仅在一台客户端机器上随机发生，我们在特定机器上更换了网卡，然后用户从上周开始没有遇到同样的问题。这是由于客户端机器与数据库服务器的网络连接中断

# python - 这个python sql语句有什么问题

> ID：16075194
> 
> 赞同：0
> 
> 时间：2013-04-18T05:33:37.260
> 
> 标签：python, mysql

我在 mysql 中有一个 DB 模式

```
id  int(11) PK AI
apt_id  varchar(200) 
checkin_date    date 
checkout_date   date 
price   decimal(10,0) 
deposit decimal(10,0) 
adults  int(11) 
source_id   int(11) 
confirmationCode    varchar(100) 
client_id   int(11) 
booking_date    datetime 
note    mediumtext 
Related Tables:property (apt_id → apt_id)
booking_source (source_id → id) 
```

我正在尝试使用以下查询在数据库中插入值

```
self.start_at = datetime.strptime(self.start_at[0:10] + ' ' + self.start_at[11:19], "%Y-%m-%d %H:%M:%S")
self.end_at = datetime.strptime(self.end_at[0:10] + ' ' + self.end_at[11:19], "%Y-%m-%d %H:%M:%S")
x = db.cursor()
sql = """INSERT INTO `nycaptBS`.`booking` (`apt_id`, `checkin_date`, `checkout_date`, `price`,`deposite` `adults`, `source_id`, `confirmationCode`, `client_id`, `booking_date`) VALUES ('%s','%s','%s','%s','%s','%s','%s','%s','%s','%s' )"""
x.execute(sql,(self.apt_id,self.start_at,self.end_at,self.final_price,self.deposit,self.adults,self.source_id,self.notes,self.client_id,self.booking_date,self.notes)) 
```

由于错误本身并不清楚

```
 File "/usr/lib/python2.7/dist-packages/MySQLdb/cursors.py", line 159, in execute
    query = query % db.literal(args)
TypeError: not enough arguments for format string 
```

请帮助我如何解决这个问题。我在 Django ORM 上做了很多工作，但为此我必须在 Mysql 查询中编写。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:54:16.513

当您的字符串中有更多格式化代码并且传入的参数不足时会引发此异常：

```
>>> s = "Hello %s %s %s"
>>> print(s % ('a','b'))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: not enough arguments for format string 
```

在这里你看我有三个`%s`，但我只传递了两个字符串`('a','b')`。

您的查询也有同样的问题，因为您缺少逗号：

```
sql = """
    INSERT INTO `nycaptBS`.`booking` (
           `apt_id`,
           `checkin_date`,
           `checkout_date`,
           `price`,
           `deposite` `adults`, # missing comma here
           `source_id`,
           `confirmationCode`,
           `client_id`,
           `booking_date`) VALUES (
                      '%s', #1
                      '%s', #2
                      '%s', #3
                      '%s', #4
                      '%s', #5
                      '%s', #6
                      '%s', #7
                      '%s', #8
                      '%s', #9
                      '%s'  #10
             )
      """
x.execute(sql,(
self.apt_id, #1
self.start_at, #2
self.end_at, #3
self.final_price, #4
self.deposit, #5
self.adults, #6
self.source_id, #7
self.notes, #8
self.client_id, #9
self.booking_date, #10
self.notes #11 )) 
```

# android - 使用（NDR）网络发现存储库扫描网络时获取主机名及其类型

> ID：16075199
> 
> 赞同：3
> 
> 时间：2013-04-18T05:34:08.343
> 
> 标签：android, android-networking

我正在尝试获取`Connected Device details of Network`. 我已经引用了网络发现存储库我能够获取*IP 地址和 Mac 地址（硬件地址）*但无法`Host name`& `device type`。

我使用了以下代码和不同的 Stackoverflow 建议的帖子。我也实现了`jcifs jar`. 但运气不好，我无法从网络中获取主机名及其类型。

*代码：*

```
1) 
NbtAddress nbtAddress = NbtAddress.getByName("Base");
InetAddress address = nbtAddress.getInetAddress();
String hostname = address.getHostAddress();

2)
InetAddress addr = NbtAddress.getByName(strIp).getInetAddress();
host.hostname =addr.getCanonicalHostName(); 
```

你的建议是可观的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T00:50:01.583

如果您使用的是 1.3.17 JCIFS，它有一些错误会导致它不返回主机名。您可以尝试使用旧版本的 JCIFS，它会为您提供主机名。旧版本的 JCIFS (1.2.25) 有其他问题，但取决于您使用它的目的。

# php - 访问被拒绝 BO prestashop

> ID：16075204
> 
> 赞同：1
> 
> 时间：2013-04-18T05:34:41.077
> 
> 标签：php, prestashop

在主页 BO 中，目录 -> 产品 -> 编辑 ()-> 组合 -> 产品组合生成器和管理 -> 权限 -> 编辑访问被拒绝。我附加了打印屏幕。![在此处输入图像描述](https://i.stack.imgur.com/8ycWy.png)怎么解决？

![在此处输入图像描述](https://i.stack.imgur.com/hQwjR.png)

![在此处输入图像描述](https://i.stack.imgur.com/rGf5E.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:54:54.747

在 ps_access 选项卡 AdminHome 中找到并编辑此 row.put 1 无处不在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T12:25:05.113

我已经被这个问题所困扰，问题是，即使您以管理员身份登录，升级期间也不会创建一些权限/选项卡。

尝试为您尝试访问的功能创建一个选项卡，然后将为超级管理员正确创建权限。

# python - Python从列表中传递的值未正确添加

> ID：16075207
> 
> 赞同：1
> 
> 时间：2013-04-18T05:34:55.797
> 
> 标签：python

在下面的代码中，我遇到了两件事。对于第 40 行（examPoints）和第 47 行（hwkPoints）的函数中的数学运算正在通过第 94 行的列表中的一系列值。它应该把分数加起来，但由于某种原因它不是在通过的每个范围上添加最后一个数字。

例如：对于 myValues[11:13]，它传递了数字 75、95 和 97，但它只添加了前 2，而不是最后一个。

我的代码在这里：

```
from time import asctime
from time import localtime

def findGrade(myGrade): #argument number in range of 1 - 100 or float myNum?
    if myGrade >= 90:
        letterGrade = "A"
    if myGrade >= 80:
        letterGrade = "B"
    if myGrade >= 70:
        letterGrade = "C"
    if myGrade >= 60:
        letterGrade = "D"
    if myGrade < 60:
        letterGrade = "F"
    return letterGrade

def calculatePointsEarned(hwkGrades, examGrades):
    hwkTotal = float(hwkPoints(hwkGrades))
    #print hwkTotal
    examTotal = float(examPoints(examGrades))
    #print examTotal
    myAverage = (hwkTotal + examTotal) / possiblePoints
    myAverage = myAverage * 100.0
    #myAverage = int(myAverage)
    return myAverage

def totalPoints(hwkGrades, examGrades):
    hwkTotal = int(hwkPoints(hwkGrades))
    examTotal = int(examPoints(examGrades))
    allPoints = str((hwkTotal + examTotal))
    return allPoints

#Create newtimeline using day of week, space, month, space, day, space, year, space time from asctime function
def timeMessage():
    localtime()
    newTimeline = asctime()
    return newTimeline

def examPoints(examValues):
    myGrades = 0
    for grade in examValues:
        myGrades = int(grade) + myGrades
    #print str(myGrades) + " exam\n" 
    return myGrades

def hwkPoints(hwkValues):
    myGrades = 0
    for grade in hwkValues:
        myGrades = int(grade) + myGrades
    #print str(myGrades) + " hwk" 
    return myGrades

def requestMessage (myValues, myTime):
    nameLine = myValues[1] + ", " + myValues[2] + "\t" + myValues[0] + "\t" + myValues[3]
    examScore = "Exam " + "- " + myValues[11] + ", " + myValues[12] + ", " + myValues[13]
    hwkScore = "Homework " + "- " + myValues[4] + ", " + myValues[5] + ", " + myValues[6] + ", " + myValues[7] + ", " + myValues[8]  + ", " + myValues[9] + ", " + myValues[10]
    pointsEarned = "Total points earned " + "- " + totalPoints(myValues[4:10], myValues[11:13])
    myGrade = "Grade:  " + str(theAverage) + " that is a " + findGrade(theAverage)
    message = nameLine + "\n" + examScore + "\n" + hwkScore + "\n" + pointsEarned + "\n" + myGrade + "\n" + myTime
    return message

def fileOutput(studentID, lastName, firstName, dateTime):
    myLine = studentID + " " + lastName + ", " + firstName + " " + dateTime + "\n"
    return myLine

#Create input stream from grades.dat and assign to infile
inFile = open('grades.dat', "r")

#Create output stream to results.dat and assign to outfile
outFile = open('results.dat', 'w+')

myTime = timeMessage()
theAverage = 0
theLettergrade = ""
theMessage = ""
possiblePoints = 550
theRequest = ""

studentID = raw_input("Please input student ID: ")
myLine = "notemptystring"

while myLine != "": #may be wrong Is myline not equal to the empty string?
    myLine = inFile.readline() #may be wrong Read line from infile and assign to myline
    myLine = myLine.strip('\r\n')

    myValues = myLine.split(",") #Separate values in myline and assign to myvalues

    if studentID == myValues[0]:
        #print myValues

        #Call calculatePointsEarned function with a list of homework values and a list of exam values and assign to theaverage
        theAverage = calculatePointsEarned(myValues[4:10], myValues[11:13])
        #print theAverage

        theLettergrade = findGrade(theAverage) #Call findGrade function with theaverage and assign to thelettergrade)
        #print theLettergrade

        #Call fileOutput function with studentid, lastname, firstname, and datetime to get message for writing to output file, and assign to therequest
        theRequest = fileOutput(myValues[0], myValues[1], myValues[2], timeMessage())
        #print theRequest

        theMessage = requestMessage(myValues, timeMessage()) #Call requestMessage with myline and mytime for message to display, and assign to themessage

        #Write theRequest to outfile
        outFile.write(theRequest)

        print theMessage

    else: #is studentid not equal to first element in myValues
        "Do Nothing"

#close infile and outfile
inFile.close()
outFile.close() 
```

编辑：对不起，我在让代码在此处正确显示时遇到问题的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T05:39:22.870

> 对于 myValues[11:13]，它被传递了数字 75、95 和 97，但它只添加了前 2 而不是最后一个

`myValues[11:13]`选择两个元素，而不是三个。结束索引 (13) 不包括在该范围内。

阅读[解释 Python 的切片符号](https://stackoverflow.com/questions/509211/the-python-slice-notation)

# iphone - CTTelephonyCenterAddObserver 私有 API 在通话连接且通话持续时间超过 5/6 秒时未收到断开事件

> ID：16075209
> 
> 赞同：1
> 
> 时间：2013-04-18T05:35:09.347
> 
> 标签：iphone, ios, notifications, iphone-privateapi, core-telephony

我`CTTelephonyCenterAddObserver(ct, NULL, callback, NULL, NULL, CFNotificationSuspensionBehaviorHold);`用来记录电话。

这是回调方法的代码

```
static void callback(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo)
{

    NSString *notifyname=(NSString *)name;
    if ([notifyname isEqualToString:@"kCTCallStatusChangeNotification"])
    {

        NSDictionary *info = (NSDictionary*)userInfo;

        NSString *state=[[info objectForKey:@"kCTCallStatus"] stringValue];
        NSLog(@"Call status changed = %@",state);

        if ([state isEqualToString:@"5"]){//disconnect
            NSLog(@"unanswered:%@",state);

        }
        if ([state isEqualToString:@"3"]){//OUTGOING
            NSLog(@"Outgoing calls:%@",state);

        }

        if ([state isEqualToString:@"1"]){//connected

            //Call Connected
        }

        callState=[state intValue];

    }
} 
```

我正在接收所有呼叫事件/状态，而回调方法没有任何问题。但是断开状态（5）存在问题。问题是当已经连接的呼叫断开并且呼叫持续时间超过 5/6 秒时，回调方法中未收到断开 (5) 状态。

有没有其他人遇到过同样的问题并找到了这个问题的解决方案？

# grails - 参数 #1 未设置错误

> ID：16075210
> 
> 赞同：0
> 
> 时间：2013-04-18T05:35:15.323
> 
> 标签：grails, grails-orm

我收到 grails 查询错误。我有班级用户：

```
class User {
String username
String passwordHash

static hasMany = [roles: Role, permissions: String, clients: User, owners: User]
} 
```

当我查询时：

```
def addClient() {
    def principal = SecurityUtils.subject?.principal
    User currentUser = User.findByUsername(principal);
    if (request.method == 'GET') {
        User user = new User()
        [client: currentUser, clientCount: User.countByOwners(currentUser)]
    }
} 
```

Grails 说：

参数“#1”未设置；SQL 语句：select count(*) as y0_ from user this_ where this_.id=? [90012-164]

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:17:12.313

看起来`currentUser`是`null`。

顺便说一句，我想知道，为什么您按所有者计算，但将用户指定为所有者？根据你的`hasMany`定义，`owners`是一个集合。

# html - 并非所有 CSS 属性都能够级联，或者某些标签会忽略父级的属性？

> ID：16075211
> 
> 赞同：0
> 
> 时间：2013-04-18T05:35:18.253
> 
> 标签：html, css

**我的 HTML**

```
<div class="teaser">
<img src="smiley.gif">
</div> 
```

在我的 CSS 中，我尝试将边框半径：100% 应用于图像，使其看起来像一个圆圈。当我做

`.teaser{ border-radius: 100%; }`它不会工作，但`.teaser img{ border-radius: 100%; }`它会。原因是什么？是因为**border-radius**属性不能级联还是因为**img**标签会忽略父母的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:39:12.370

默认继承的属性

```
border-collapse
border-spacing
caption-side
color
cursor
direction
empty-cells
font-family
font-size
font-weight
font-style
font-variant
font
letter-spacing
list-style-type
list-style-position
list-style-image
list-style
line-height
orphans
page-break-inside
quotes
text-align
text-indent
text-transform
visibility
white-space
widows
word-spacing 
```

资料来源：[impressivewebs.com/](http://www.impressivewebs.com/inherit-value-css/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T06:25:01.280

具体来说，对于`border-radius`，您应该使用`overflow:hidden`来裁剪您的内容。

示例[http://jsfiddle.net/pavloschris/FSK75/](http://jsfiddle.net/pavloschris/FSK75/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T05:43:56.790

[`border-radius`不被继承](http://www.w3.org/TR/css3-background/#the-border-radius)

这是 CSS 属性列表，您可以检查它是否被继承：http: [//www.w3.org/community/webed/wiki/CSS/Properties](http://www.w3.org/community/webed/wiki/CSS/Properties)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T06:52:22.993

尝试这个

CSS

```
.teaser {
   border-radius: 100%;
   overflow: auto;
   display: table-caption;
} 
```

HTML

```
<div class="teaser">
    <img src="http://lorempixel.com/output/animals-q-c-189-137-4.jpg">
</div> 
```

[演示](http://jsfiddle.net/FSK75/2/)

# ios - Dropbox Core API - 上传前出现 1021 错误 - 仅适用于 iOS 5 及更低版本

> ID：16075213
> 
> 赞同：1
> 
> 时间：2013-04-18T05:35:24.863
> 
> 标签：ios, file-upload, dropbox

我将 Dropbox 核心 API 与我的两个 iOS 应用程序集成在一起。成功地。几周前，它运行良好。但是现在，当我在装有 iOS 5.0 或 iOS 4.2 的设备上运行这些应用程序并尝试调用 uploadFile: API 时，我收到此错误：

`error making request to /1/files_put/sandbox/abc.xyz - (-1021) Error Domain=NSURLErrorDomain Code=-1021 "The operation couldnÕt be completed. (NSURLErrorDomain error -1021.)" UserInfo=0x28af00 {destinationPath=/abc.xyz, sourcePath=/var/mobile/Applications/FB0373C9-...C4F0874D40/Documents/abc.xyz}`

其中 abc.xyz 是我要上传的文件名。

-1021 错误代码通常出现在上传时身份验证失败的情况下。文件上传后也是如此。但这一次它甚至在上传开始之前就出现了。

我尝试了 loadMetadata: API，它工作正常，并返回元数据。

在 2 台安装了最新 iOS 的设备上，Dropbox 上传工作正常。我尝试更新到最新的 SDK，但即使那样它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T13:47:01.920

[您可以从Dropbox 论坛](https://forums.dropbox.com/topic.php?id=102898)检查此版本在 iOS 5,6 中是否适用于我

你也可以从[这里下载构建](https://www.dropbox.com/s/vy2dq3jzfv90w5g/dropbox-ios-sdk-1.3.5-b3.tar.gz)

# java - 为什么接口方法范围只是公共的？

> ID：16075223
> 
> 赞同：0
> 
> 时间：2013-04-18T05:36:31.090
> 
> 标签：java

在`interfaces`为什么方法访问说明符只是`public`为什么不`protected`呢？

```
interface IPractice {
    void test(); // it will be public
    protected void test2(); // why this is not allowed
} 
```

谁能给我解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:38:43.997

接口的全部意义在于它向外界公开方法，因此可以隐藏实现细节。

接口内部发生的事情不应该为外界所知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:43:08.630

因为**接口本质上是公共的**，如果你声明一个接口是因为你想确保每个人都实现相同的方法，并且这些方法是公共的。

无论如何，将界面视为汽车的控制装置（方向盘、制动器、离合器......），它总是可见的。

如果您希望多个类实现相同的方法但使其受到保护，您可能需要考虑使用抽象类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:41:31.887

接口用于访问实现它的类的功能，因此您可以将类的对象分配给接口引用。您可以从该引用中调用方法。所以只能访问公共功能。

# extjs - sencha touch 什么时候使用方括号和大括号？

> ID：16075226
> 
> 赞同：1
> 
> 时间：2013-04-18T05:36:33.790
> 
> 标签：extjs, sencha-touch, sencha-touch-2

这可能是一个愚蠢的问题，但在这里。

我一直在关注sencha touch 2 app 上的[本教程。](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/)我对 Ext JS 很陌生，我不明白何时使用`square brackets : [ .. ]`或`curly brackets : { .. }`.

```
Ext.define("NotesApp.view.NotesListContainer", {
    extend: "Ext.Container",
    config: {
        items: [{
            xtype: "toolbar",
            docked: "top",
            title: "My Notes",
            items: [{
                xtype: "spacer"
            }, {
                xtype: "button",
                text: "New",
                ui: "action",
                id:"new-note-btn"
            }]
        }]
    }
}); 
```

就像这里

```
html: [
                        '<img src="http://staging.sencha.com/img/sencha.png" />',
                        '<h1>Welcome to Sencha Touch</h1>',
                        "<p>You're creating the Getting Started app. This demonstrates how ",
                        "to use tabs, lists and forms to create a simple app</p>",
                        '<h2>Sencha Touch 2</h2>'
                    ].join("") 
```

1.  任何人都可以在编码煎茶触摸时帮助我正确使用大括号和方括号吗？

2.  为什么不直接使用大括号 { .. } ？为什么 ext js 必须使用 [ .. ] 和 { .. } ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:16:04.220

这只是基本的javascript。

`[]`表示数组，表示`{}`对象字面量，因此：

```
[{
    xtype: 'foo'
}, {
    xtype: 'bar'
}] 
```

是一个对象字面量数组。

# r - 如何从R中的网格坐标创建邻接矩阵？

> ID：16075232
> 
> 赞同：3
> 
> 时间：2013-04-18T05:36:53.360
> 
> 标签：r, coordinates, coordinate, adjacency-matrix

我是这个网站的新手。我想知道是否有人有转动网格坐标列表的经验（在下面的示例代码中显示为 df）。我编写了一个函数，可以处理非常小的数据集的工作，但运行时间随着数据集大小的增加呈指数增长（我认为 800 像素大约需要 25 小时）。这是因为嵌套的 for 循环，但我不知道如何绕过它。

```
## Dummy Data
x <- c(1,1,2,2,2,3,3)
y <- c(3,4,2,3,4,1,2)
df <- as.data.frame(cbind(x,y))
df

## Here's what it looks like as an image
a <- c(NA,NA,1,1)
b <- c(NA,1,1,1)
c <- c(1,1,NA,NA)
image <- cbind(a,b,c)
f <- function(m) t(m)[,nrow(m):1]
image(f(image))

## Here's my adjacency matrix function that's slowwwwww
adjacency.coordinates <- function(x,y) {
  df <- as.data.frame(cbind(x,y))
  colnames(df) = c("V1","V2")
  df <- df[with(df,order(V1,V2)),]
  adj.mat <- diag(1,dim(df)[1])
  for (i in 1:dim(df)[1]) {
    for (j in 1:dim(df)[1]) {
      if((df[i,1]-df[j,1]==0)&(abs(df[i,2]-df[j,2])==1) | (df[i,2]-df[j,2]==0)&(abs(df[i,1]-df[j,1])==1)) {
        adj.mat[i,j] = 1
      }
    }
  }
  return(adj.mat)
}

## Here's the adjacency matrix
adjacency.coordinates(x,y) 
```

有谁知道一种方法可以在几千像素长的一组坐标上很好地工作？我已经尝试转换为 SpatialGridDataFrame 并从那里开始，但它不会使邻接矩阵正确。非常感谢您的参与。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T06:35:30.000

虽然我认为`igraph`可能是去这里的方式，但我认为你可以更简单地做到这一点：

```
result <- apply(df, 1, function(pt) 
  (pt["x"] == df$x &  abs(pt["y"] - df$y) == 1) |
  (abs(pt["x"] - df$x) == 1 &  pt["y"] == df$y)    
)
diag(result) <- 1 
```

并避免循环并获得相同的结果：

```
> identical(adjacency.coordinates(x,y),result)
[1] TRUE 
```

# c++ - 在 C/C++ 中读取和处理 WAV 文件数据

> ID：16075233
> 
> 赞同：14
> 
> 时间：2013-04-18T05:36:57.667
> 
> 标签：c++, c, voice, voice-recognition

我目前正在做一个非常重要的学校项目。我需要在 C/C++ 中提取 WAVE 文件的信息，并使用该信息来获取语音信号的 LPC。但是，为了做到这一点，我需要对信号进行一些预处理，比如过零和能量分析等等。这意味着我需要符号和真实值。问题是我不知道如何获得有用的信息和正确的格式。我已经阅读了文件中的每个字段，但我不确定我做得对。请给点建议好吗？

这是我目前读取文件的方式：

> > readI = fread(&bps, 1, 2, 音频); printf("每个样本的位数 = %d \n", bps);

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T06:26:50.057

我的第一个建议是使用某种库来帮助你。大多数声音解决方案似乎都过大了，因此一个简单的库（例如您的问题评论中推荐的[libsndfile](http://www.mega-nerd.com/libsndfile/)）应该可以解决问题。

如果您只是想知道如何阅读 WAV 文件以便编写自己的文件（因为您的学校可能会拒绝让您像任何其他普通人一样使用图书馆），快速谷歌搜索将为您提供所有信息需要[加上一些已经写了很多关于阅读.wav格式的教程的人](http://dilawarnotes.wordpress.com/2010/10/15/opening-wav-file-using-cc/)。

如果您仍然不明白，这是我自己的一些代码，我在其中读取 WAV/RIFF 数据文件的标题和所有其他块，直到我到达数据块。它[完全基于 WAV 格式规范](http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/WAVE/WAVE.html)。提取实际的声音数据并不是很困难：您可以原始读取并使用它，也可以转换为您在内部更熟悉的格式（32 位 PCM 未压缩数据或其他格式）。

查看以下代码时，请替换为对指定类型的整数值和字节大小的`reader.Read...( ... )`等效`fread`调用。`WavChunks`是一个枚举，它是 WAV 文件块中 ID 的 Little Endian 值，`format`变量是 WAV 文件格式中可以包含的 Wav 格式类型的类型之一：

```
enum class WavChunks {
    RiffHeader = 0x46464952,
    WavRiff = 0x54651475,
    Format = 0x020746d66,
    LabeledText = 0x478747C6,
    Instrumentation = 0x478747C6,
    Sample = 0x6C706D73,
    Fact = 0x47361666,
    Data = 0x61746164,
    Junk = 0x4b4e554a,
};

enum class WavFormat {
    PulseCodeModulation = 0x01,
    IEEEFloatingPoint = 0x03,
    ALaw = 0x06,
    MuLaw = 0x07,
    IMAADPCM = 0x11,
    YamahaITUG723ADPCM = 0x16,
    GSM610 = 0x31,
    ITUG721ADPCM = 0x40,
    MPEG = 0x50,
    Extensible = 0xFFFE
};

int32 chunkid = 0;
bool datachunk = false;
while ( !datachunk ) {
    chunkid = reader.ReadInt32( );
    switch ( (WavChunks)chunkid ) {
    case WavChunks::Format:
        formatsize = reader.ReadInt32( );
        format = (WavFormat)reader.ReadInt16( );
        channels = (Channels)reader.ReadInt16( );
        channelcount = (int)channels;
        samplerate = reader.ReadInt32( );
        bitspersecond = reader.ReadInt32( );
        formatblockalign = reader.ReadInt16( );
        bitdepth = reader.ReadInt16( );
        if ( formatsize == 18 ) {
            int32 extradata = reader.ReadInt16( );
            reader.Seek( extradata, SeekOrigin::Current );
        }
        break;
    case WavChunks::RiffHeader:
        headerid = chunkid;
        memsize = reader.ReadInt32( );
        riffstyle = reader.ReadInt32( );
        break;
    case WavChunks::Data:
        datachunk = true;
        datasize = reader.ReadInt32( );
        break;
    default:
        int32 skipsize = reader.ReadInt32( );
        reader.Seek( skipsize, SeekOrigin::Current );
        break;
    }
} 
```

# jquery - jquery验证表单不起作用

> ID：16075235
> 
> 赞同：-4
> 
> 时间：2013-04-18T05:37:07.120
> 
> 标签：jquery, jquery-plugins, jquery-validate

我有一个注册表单，其中包含用 php 编写的表单中的一些字段要求，我正在尝试向其中添加一个验证插件，但该插件不起作用，我没有收到任何错误。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js">

</script>                           

<script src="scripts/jquery.validate.js"></script>

<script>
$(function(){
$("#regForm").validate({
    rules: {
        brukernavn: {
            required: true,
            minlength:3,
            maxlength:10
        },
        passord: {
            required: true,
            minlength:3,
            maxlength:10
        },
        bekreft_pass: {
            required: true,
            minlength:3,
            maxlength:10
        },
        E_post: {
            required: true,
            email: true
        },
        bekreft_epost {
            required: true,
            email: true
        },
        messages: {

        }
    }
});

$.extend($.validator.messages, {
    required: "Obligatorisk felt:"
});
 });
</script>

 <form id="regForm" method="post" action="">
<label for="brukernavn">Brukernavn</label><br>
<input type='text' id="brukernavn" name="brukernavn"><br>

<label for="passord">Passord</label>
<input type="password" id="passord" name="passord"><br>

<label for="bekreft_pass">Bekreft passord</label>
<input type="password" id="bekreft_pass" name="passord2"><br>

<label for="E_post">E-post</label>
<input type="E-post" id="E_post" name="E-post"><br>

<label for="bekreft_epost">Bekreft e-post</label>
<input type="E-post" id="bekreft_epost" name="E-post2"><br>
<br>

<input type='submit' id"submit" value='Register'> 
```

有谁看到问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:45:03.763

这里缺少一个冒号：`bekreft_epost {`应该是`bekreft_epost: {`

此外，没有关闭表单标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:58:13.137

`messages`不应低于`rules`：

[http://jsfiddle.net/samliew/uGsXC/10/](http://jsfiddle.net/samliew/uGsXC/10/)

此外，验证规则名称必须匹配字段 NAME 属性而不是 ID：

[http://jsfiddle.net/samliew/uGsXC/12/](http://jsfiddle.net/samliew/uGsXC/12/)

# ruby-on-rails - 在 Rails 上配置 Neo4j 以使用 Warbler 进行部署

> ID：16075239
> 
> 赞同：0
> 
> 时间：2013-04-18T05:37:36.667
> 
> 标签：ruby-on-rails, neo4j, warbler

如何配置 Neo4j on Rails 应用程序以使用 Warbler 进行部署？就目前而言，每次我部署我的应用程序时，之前的 neo4j 生产实例都会被破坏，因为 neo4j 是嵌入的。我希望通过 Warbler 或 neo4j 对生产进行某种配置，这样一旦在服务器上创建了 neo4j 实例，它就不会被下一个部署所取代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:59:02.210

我想您可以将 neo4j 数据库放置在您的 volatile 代码库之外的某个持久性位置，然后针对例如 /var/database 打开 Neo4j？如果存在现有文件，Neo4j 不会替换它们。

# android - 将代码从 Google Map Android API v1 转换为 Google Map Android API v2？

> ID：16075241
> 
> 赞同：2
> 
> 时间：2013-04-18T05:37:48.277
> 
> 标签：android, google-maps

这是代码`Google Map Android API v1`。我不知道转换为`API v2`. 请帮帮我！

FlatBack.java

```
public class FlatBack extends MapActivity {
private MapView mapView;
private MyLocationOverlay myLocationOverlay;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.map);

    mapView = (MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    myLocationOverlay = new FixLocation(this, mapView);

    mapView.getOverlays().add(myLocationOverlay);
    mapView.postInvalidate();

    zoomToMyLocation();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.map_toggle, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.map:
        if (mapView.isSatellite() == true) {
            mapView.setSatellite(false);
            mapView.setStreetView(true);
        }
        return true;
    case R.id.sat:
        if (mapView.isSatellite() == false) {
            mapView.setSatellite(true);
            mapView.setStreetView(false);
        }
        return true;
    case R.id.both:
        mapView.setSatellite(true);
        mapView.setStreetView(true);
    default:
        return super.onOptionsItemSelected(item);
    }
}

@Override
protected void onResume() {
    super.onResume();
    myLocationOverlay.enableMyLocation();
}

@Override
protected void onPause() {
    super.onPause();
    myLocationOverlay.disableMyLocation();
}

private void zoomToMyLocation() {
    GeoPoint myLocationGeoPoint = myLocationOverlay.getMyLocation();
    if (myLocationGeoPoint != null) {
        mapView.getController().animateTo(myLocationGeoPoint);
        mapView.getController().setZoom(10);
    }
}

protected boolean isRouteDisplayed() {
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:45:57.323

最后，最重要的是将*Google Play Services*添加为 Android 库项目，如下所示：

*   选择*File > Import > Android > Existing Android Code Into Workspace*，然后单击*Next*。选择*Browse...*，输入 */extras/google/google_play_services/libproject/google-play-services_lib*，然后单击*Finish*。
*   检查项目中是否存在包含*libs/*的文件夹`android-support-v4.jar`。
*   `android-support-v4.jar`位于`/extras/android/compatibility/v4/android-support-v4.jar`您的“android-sdk”目录下。

在运行您的项目之前，您必须将您的项目构建目标设置为“Google APIs”，而不是 Android xx 版本：选择您的项目并单击Eclipse 中的*Project > Properties > Project Build Target*并选择任何“Google APIs”，然后运行您的项目在您的手机上。如果您使用模拟器，还**必须**将模拟器的 AVD 设置为任何“Google APIs”。

*   关注本文：[地图片段/MapView v2 快速入门](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)
*   [地图 v2 文章](http://karnshah8890.blogspot.in/2013/02/google-maps-android-api-v2-introduction.html)
*   [google-maps-android-api-v2-介绍](http://karnshah8890.blogspot.in/2013/02/google-maps-android-api-v2-introduction.html)

# asp.net - TinyMCE 值未更新

> ID：16075242
> 
> 赞同：0
> 
> 时间：2013-04-18T05:37:50.620
> 
> 标签：asp.net, tinymce

我将 tinyMCE 绑定到更新面板内的文本框。
最初，我从后面的代码中设置了一些值
在浏览器中加载页面后，我更新了 tinymce 文本框的值
，当我提交表单时，我没有在后面的代码中获得更新的值，
我得到的只是旧值。

帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:46:00.637

在提交按钮 onclick 中添加了以下 javascript：

```
tinyMCE.triggerSave(); 
```

# c# - 实体框架中的 POCO 是什么？

> ID：16075245
> 
> 赞同：87
> 
> 时间：2013-04-18T05:37:58.827
> 
> 标签：c#, .net, entity-framework, poco

我刚开始学习 POCO，但我不明白它的用法和优点。甚至 StackOverflow 的以下链接也没有帮助我。

[什么是带有 POCO 的实体框架](https://stackoverflow.com/questions/2672409/what-is-entity-framework-with-poco)

任何人都可以用一个简单的例子来解释 POCO 的用法吗？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-18T05:44:48.853

POCO（普通旧 CLR 对象）只是您的域的实体。通常，当我们使用实体框架时，实体会自动为您生成。这很好，但不幸的是，这些实体散布着数据库访问功能，这显然违反了 SOC（关注点分离）。POCO 是没有任何数据访问功能的简单实体，但仍提供所有[EntityObject](http://msdn.microsoft.com/en-us/library/system.data.objects.dataclasses.entityobject.aspx)功能，例如

*   延迟加载
*   变更跟踪

这是一个好的开始

[POCO 实体框架](https://msdn.microsoft.com/en-us/library/dd456853(v=vs.100).aspx)

您还可以使用代码生成器从现有的实体框架项目中轻松生成 POCO。

[EF 5.X DbContext 代码生成器](http://visualstudiogallery.msdn.microsoft.com/da740968-02f9-42a9-9ee4-1a9a06d896a2)

# sql - 在子字符串方法中如何使用 Isnull()

> ID：16075246
> 
> 赞同：0
> 
> 时间：2013-04-18T05:38:08.990
> 
> 标签：sql, sql-server, sql-server-2008, isnull

在我的一些列中有 NULL 值。所以我无法获得其他信息（我的其他列）获得 NULL 值。所以我使用**Isnull**。但是我记录了我在下面的代码中放置 Isnull() 的位置。

**我的代码是**

```
SELECT TOP(10) 'INSERT INTO jobs(Budget) VALUES('+

    CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), 0, PATINDEX('%laks%', r.Budget))*100000

        + SUBSTRING(CAST(r.Budget AS VARCHAR(50)), PATINDEX('%laks%', r.Budget) + 4, 
        patindex('%Thousands%', r.Budget) - PATINDEX('%laks%', r.Budget) - 4)* 1000 AS VARCHAR(50))+')'

FROM requirementsdetailsfororganization r 
```

在上面的代码中，我以十万和千为单位计算薪水。无论我把 Isnull() 放在哪里，它都会显示错误。

建议我摆脱这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:54:50.750

现在这就是我认为正在发生的事情

你可能用过`PATINDEX('%laks%', ISNULL(r.Budget,''))`

如果未找到模式，现在`PATINDEX()`返回**零。**当您`'%laks%`在返回的空字符串中搜索模式 '时`ISNULL()`，会返回零值，这会导致 SUBSTRING() 函数出现错误，例如索引超出范围

解决方案之一是过滤掉预算列中具有空值或空值的行。所以你可以添加 LEN() 函数并检查它是否不等于零。请参阅`WHERE`下面的查询中添加的条件。

```
SELECT TOP(10) 'INSERT INTO jobs(Budget) VALUES('+

    CAST(SUBSTRING(CAST(r.Budget AS VARCHAR(50)), 0, PATINDEX('%laks%', r.Budget))*100000

        + SUBSTRING(CAST(r.Budget AS VARCHAR(50)), PATINDEX('%laks%', r.Budget) + 4, 
        patindex('%Thousands%', r.Budget) - PATINDEX('%laks%', r.Budget) - 4)* 1000 AS VARCHAR(50))+')'

FROM requirementsdetailsfororganization r
where len(r.Budget)<>0 
```

对于预算列中具有 NULL 的值，您可以插入一些默认值，例如零

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:46:58.343

要将 null 值转换为可以在字符串中使用的值，您可以像这样使用它：

```
... + isnull( expression, 'null') + ... 
```

如果 的值为`expression`null，则您将获取该字符串`null`以在查询中使用。

此外，要与查询中的值相乘，首先需要将它们转换为数字。

# excel - excel中的数据分析/操作

> ID：16075248
> 
> 赞同：-1
> 
> 时间：2013-04-18T05:38:21.017
> 
> 标签：excel

我是 excel 新手，这可能是一个初学者问题，所以请多多包涵，我正在尝试执行以下操作：如果我在 excel 表中有一些数据，如下所示 -

-- 运行情况：03_mileage.cry ......
结果：OK
-- 运行情况：07_option mode.cry ......
结果：OK
-- 运行情况：10_80 columns.cry ......
结果：OK
- 运行案例：11_Split tag.cry ......
结果：OK
- 运行案例：12_TQC.cry ......
结果：ERROR

我想要的是将它移动到另一张纸上，其中一列中的案例和相应列中的结果。我更喜欢使用 excel 公式而不是 VB。
谢谢， 阿比纳亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:21:20.377

如果您的第一张工作表 (Sheet1) 如下所示：

```
A1:  -- Running case : 03_mileage.cry ......
A2:  Result : OK
A3:  -- Running case : 07_option mode.cry ......
A4:  Result : OK
A5:  -- Running case : 10_80 columns.cry ......
A6:  Result : OK
A7:  -- Running case : 11_Split tag.cry ......
A8:  Result : OK
A9:  -- Running case : 12_TQC.cry ......
A10: Result : ERROR 
```

然后，在新的电子表格上（在同一个工作簿中），您可以像这样引用另一个工作表的范围：

```
A1: =Sheet1!A1          B1: =Sheet1!A2
A2: =Sheet1!A3          B2: =Sheet1!A4
A3: =Sheet1!A5          B3: =Sheet1!A6
A4: =Sheet1!A7          B4: =Sheet1!A8
A5: =Sheet1!A9          B5: =Sheet1!A10 
```

就这样……

* * *

或者，如果您的第一张工作表中有大量数据，您可以使用[VBA](http://msdn.microsoft.com/en-us/library/office/ee814737%28v=office.14%29.aspx)来完成这项工作。

```
Option Explicit

Sub CaseDesc()
    Application.ScreenUpdating = False
    Dim ws1 As Worksheet, ws2 As Worksheet, lr&, i&, nxt&
    Set ws1 = ThisWorkbook.Sheets("Sheet1")
    Set ws2 = ThisWorkbook.Sheets("Sheet2")
    lr = ws1.Range("A" & Rows.Count).End(xlUp).Row
    nxt = 1
    ' if you have headers change 1 to 2 ( or row where your data starts)
    For i = 1 To lr
        If i Mod 2 Then
            ws2.Range("A" & ws2.Range("A" & Rows.Count).End(xlUp).Row + 1).Value = ws1.Range("A" & i).Value
        Else
            ws2.Range("B" & ws2.Range("B" & Rows.Count).End(xlUp).Row + 1).Value = ws1.Range("A" & i).Value
        End If
    Next i
    Application.ScreenUpdating = True
End Sub 
```

# visual-c++ - Visual C++ 中的虚拟内存

> ID：16075252
> 
> 赞同：0
> 
> 时间：2013-04-18T05:38:31.203
> 
> 标签：visual-c++, memory, virtual

我对虚拟内存有疑问。首先，我想提一下我是编程领域的新手。我已经阅读了视觉记忆。

现在我有一个程序可以打开需要大量内存的软件（例如图片查看器）。但是，相关计算机无法为此腾出那么多内存。而这一切都是用 Visual C++ 完成的。图片查看器当前在物理内存上运行。

但是一旦这个软件被分发出去，它就会被用在那些不能节省那么多物理内存的计算机上。所以我的任务是研究并找出如何将这个程序从使用物理内存切换到虚拟内存。最后我可能会自己实现这个。

所以我的问题是，**如何更改代码以防止应用程序使用物理内存，而是切换到虚拟内存？**

我当然不是要求有人为我提供复制粘贴代码，而只是一种方法。另外，如果有人可以**解释其背后的逻辑**，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:28:30.697

操作系统负责决定哪些应该存储在 RAM 中，哪些应该分页到 VM。在某些异常情况下，可以从您的应用程序向操作系统提供建议可能很有用，但这仅建议专家使用。作为一个新手，你最好的选择是相信操作系统会做正确的事情。

为什么你认为你需要特殊的行为呢？无论如何，图片通常很小。除非您的应用程序处理成千上万，否则它们将适合 RAM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:33:45.973

不使用一些物理内存就不能使用虚拟内存。*名称swapfile*是有原因的。处理器不能直接对二级存储（如硬盘）中的数据进行操作。它必须首先将其复制到 RAM 中。

# asp.net - 使用计时器使asp标签不可见

> ID：16075253
> 
> 赞同：1
> 
> 时间：2013-04-18T05:38:35.813
> 
> 标签：asp.net, timer, label, visible

我必须显示一个指示数据插入成功的标签。标签应在 5 秒后自动消失，我该如何实现？

```
 <html>
 <head id="Head1" runat="server">
 <title>Test Visibility</title>
 <script type="text/javascript">
  $(document).ready(function () {
    setTimeout(function () {
        $('#<%= lblError.ClientID%>').hide();
    }, 100); // <-- time in milliseconds
});
</script>
</head>
<body>
<form id="form1" runat="server">
<div>

<asp:Label ID="lblError" runat="server" Text="Label"></asp:Label>
</div>
 </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:43:33.673

您可以为此使用 jquery。
调用一个函数，它会在特定的持续时间后隐藏它。

```
setTimeout(function() {
   $('#labelId').hide();
}, 1000); // <-- time in milliseconds 
```

假设你有一个标签

```
 <asp:Label ID="lblResult" runat="server" Text=""></asp:Label> 
```

所以你可以按如下方式使用它

```
 setTimeout(function() {
   $('#<%= lblResult.ClientId%>').hide();
}, 1000); // <-- time in milliseconds 
```

并在 document.ready 中调用它。

```
$(document).ready(function() {
       setTimeout(function() {
   $('#<%= lblResult.ClientId%>').hide();
}, 1000); // <-- time in milliseconds
}); 
```

# javascript - 根据所选项目删除所选项目

> ID：16075256
> 
> 赞同：1
> 
> 时间：2013-04-18T05:38:47.987
> 
> 标签：javascript, jquery, html

我有两个选择元素，时间为上午 12:00 到晚上 11:45，

两个选择都具有相同的选项，包括文本和值。例如，是否可以说我在第一次选择时选择下午 1:00 以在第二次选择时在下午 1:00 之前删除所有选项？我知道我可以用 jquery 检测到变化

```
$('#select1').change(function(){

// in here do something to remove previous selects

}); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:08:12.753

这是相同的另一个版本，我们允许用户更改他的第一个选择并仍然正确过滤第二个选择

```
$(document).ready(function() {
  var to_mins = function(x) {
    var p = x.split(':').map(function(v) { return parseInt(v, 10); });
    return (p[0] * 60) + p[1];
  };
  $('#second').data('options', $('#second').find('option').toArray());
  $('#first').change(function() {
     var val = to_mins(this.value);
     console.log(val);
     $('#second').empty();
     $('#second').data('options').filter(function(v) {
       return to_mins(v.value) > val;
     }).map(function(v) {
       $('#second').append(v.cloneNode(true));
     });
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:08:20.897

尝试

```
$('#select1').change(function(){
    var $this = $(this);
    var index = $('option:selected', $this).index();
    $('#select2 option').show().filter(':lt(' + index + ')').hide();
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/UzHtj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:45:57.860

尝试这个

```
$('#select1').change(function(){

 var value = $(this).val();
 $("#selectId > option").each(function() {
   if(value > this.value)
      $("#selectId  option[value=this.value]").remove();       
 });    
}); 
```

但是选择框的值需要按升序排列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:00:28.533

HTML：

```
<select id="select1">
  <option value="1">11h00</option>
  <option value="2">11h15</option>
  <option value="3">11h30</option>
  <option value="4">11h45</option>
  <option value="5">12h00</option>
  <option value="6">12h15</option>
  <option value="7">12h30</option>
  <option value="8">12h45</option>
  <option value="9">13h00</option>
</select>

<select id="select2">
   <option value="1">11h00</option>
  <option value="2">11h15</option>
  <option value="3">11h30</option>
  <option value="4">11h45</option>
  <option value="5">12h00</option>
  <option value="6">12h15</option>
  <option value="7">12h30</option>
  <option value="8">12h45</option>
  <option value="9">13h00</option>
</select> 
```

JS：

```
$(document).ready( function(){
  $('#select1').change(function(){
    var val = $(this).find('option:selected').prop('value');

    $('#select2').find('option').show().each(function(){
      if( $(this).prop('value') <= val ){
        $(this).hide();
      }
      else{
        return false;
      }
    });
  });
}); 
```

# c - c中的字符指针奇怪的表达式

> ID：16075260
> 
> 赞同：-1
> 
> 时间：2013-04-18T05:39:01.150
> 
> 标签：c, pointers, char, expression

我想知道为什么这段代码正在运行。

代码：

```
#include <stdio.h>

int main(int argc, char* argv[])
{
        char* c = "1234567";
        printf("%c\n", 5[c]);

        return 0;
} 
```

结果：

6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T05:41:47.120

如果您对`a[b]`语法感到困惑，那么只需刷新您的 C 知识即可。

`a[b]`定义为`*(a + b)`和 因为`a+b`与 相同`b+a`，所以`a[b]`和`b[a]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:33:51.053

在 C 中，数组索引的工作方式如下，例如 a[i] 它实际上被编译器解释为 *(a+i) 所以它可以写成 *(i+a) 因为加法是可交换的。因此 a[i] == i[a]。

# java - 如何根据一个数组的值对两个数组进行排序

> ID：16075262
> 
> 赞同：0
> 
> 时间：2013-04-18T05:39:07.137
> 
> 标签：java

```
public static void getSort(short[] time, String[] champs){
    System.out.println("Time     Champs\n");
    for(int a= 0; a < time.length; a++){
        char Fletter=champs[a].charAt(0);
        if('B' == Fletter){
            Arrays.sort(champs);
            System.out.println(time[a] + "     " + champs[a]);
        }
    }
    for(int a= 0; a < time.length; a++){
        char Fletter=champs[a].charAt(0);
        if('C' == Fletter){
            Arrays.sort(champs);
            System.out.println(time[a] + "     " + champs[a]);
        }
    }
} 
```

大家好，我需要有关此功能的一些建议和帮助。我想要做的是输出并显示数组时间和冠军里面的内容。

我想要的输出是：

```
Time----Champs

2001 Banana   

2004 Banana

2000 Boat

2003 Boat

2011 Carrot

2013 Carrot

2002 Cucumber 
```

正确显示时间和冠军的位置按字母顺序显示但是当我使用`Arrays.sort(champs);`

我的输出是：

```
Time----Champs

2004  Banana

2005  Banana

2006  Boat

2007  Boat

2008  Carrot

2009  Carrot

2010  Cucumber 
```

冠军的输出显示正确，但年份按 1 递减列出。

没有`Arrays.sort(champs)`我的输出是：

```
Time----Champs

2000 Boat

2001 Banana  

2003 Boat

2004 Banana

2002 Cucumber

2011 Carrot

2013 Carrot 
```

如您所见，冠军的时间是正确的，但未按字母顺序排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:59:40.813

我认为您的问题是您没有用“冠军”重新安排“时间”。从您的示例来看，似乎“时间”只是按递增顺序排列的年份，而冠军就是那一年的冠军队伍。当您按字母顺序对 Champs 进行排序时，它们与时间不同步。

为了解决这个问题，您需要将 Time 与 Champs 配对，这样如果您按其中一个值排序，另一个值会随之移动。

从这样的内部类开始：

```
public static class Tuple implements Comparable<Tuple>{
    public short time;
    public String champ;

    public Tuple(short time, String champ) {
        this.time = time;
        this.champ = champ;
    }

    public int compareTo(Tuple other) {
        return this.champ.compareTo(other.champ);
    }
} 
```

然后，在哪里改变你当前的方法来制作一个元组数组：

```
public static void getSort(short[] time, String[] champs){
   // assuming time.length & champ.length are the same
   Tuple[] timechamps = new Tuple[time.length];
   for (int a = 0; a < time.length; a++) {
     timechamps[a] = new Tuple(time[a], champs[a]);
   } 
```

因为我们已经使新的元组实现了 Comparable，所以我们可以简单地对其进行排序。元组的 compareTo 方法按字母顺序正确排序。

```
 Arrays.sort(timechamps); 
```

然后你可以打印出结果

```
 for (Tuple t : timechamps) {
     System.out.println(t.time+"\t"+t.champ);
   }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:58:06.200

你想看看这里 [http://www.mkyong.com/java/how-to-sort-a-map-in-java/](http://www.mkyong.com/java/how-to-sort-a-map-in-java/)

这里键 -----> 冠军价值观 --> 时间

我认为你想缩短你的冠军，时间应该保持相应的价值。希望它对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:05:10.573

我也去了。这是一个功能齐全、独立的解决方案。

```
import java.util.Arrays;

public class TimeAndChampSorter {

    public static void main(String[] args) {
        // prepare input
        short[] time = { 2000, 2001, 2003, 2004, 2002, 2011, 2013 };
        String[] champs = { "Boat", "Banana", "Boat", "Banana", "Cucumber",
                "Carrot", "Carrot" };
        printSorted(time, champs);
    }

    public static void printSorted(short[] time, String[] champs) {
        // check arguments are of equal length
        if (time.length != champs.length) {
            throw new IllegalArgumentException(
                    "arrays time and champs must have equal length");
        }
        Tuple[] tuples = createTuples(time, champs);
        Arrays.sort(tuples);
        printTuples(tuples);
    }

    private static Tuple[] createTuples(short[] time, String[] champs) {
        // create empty array of Tuples with correct length
        Tuple[] tuples = new Tuple[champs.length];
        // fill the tuples array
        for (int i = 0; i < champs.length; i++) {
            tuples[i] = new Tuple(time[i], champs[i]);
        }
        return tuples;
    }

    private static void printTuples(Tuple[] tuples) {
        System.out.println("Time     Champs\n");
        for (Tuple tuple : tuples) {
            System.out.println(tuple);
        }
    }

    // static class to avoid having to create an instance of TimeAndChampSorter
    static class Tuple implements Comparable<Tuple> {
        short time;
        String champ;

        Tuple(short time, String champ) {
            // make sure champ is not null to avoid having to test for nulls in
            // compareTo
            if (champ == null) {
                throw new IllegalArgumentException("champ can not be null");
            }
            this.time = time;
            this.champ = champ;
        }

        // method of Comparable interface determines the ordering
        @Override
        public int compareTo(Tuple other) {
            return this.champ.compareTo(other.champ);
        }

        @Override
        public String toString() {
            return time + "     " + champ;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:12:13.593

最好创建一个 Class 并实现 Comparable 方法

```
public class TimeChamp implements Comparable<TimeChamp>{

private short time;
private String champs;

public short getTime() {
    return time;
}

public void setTime(short time) {
    this.time = time;
}

public String getChamps() {
    return champs;
}

public void setChamps(String champs) {
    this.champs = champs;
}

@Override
public int compareTo(TimeChamp o) {
    if(getChamps().compareTo(o.getChamps())==0)
    {
        if(getTime()<o.getTime())
            return -1;
        else
            return 1;
    }
    else
        return getChamps().compareTo(o.getChamps());
}
} 
```

然后您可以创建将在您的类中排序的函数，如下所示

```
public void getSort(TimeChamp[] timeChamp)
{
    Arrays.sort(timeChamp);
    for(int i=0;i<timeChamp.length;i++)
    {   
        System.out.print(timeChamp[i].getTime());
        System.out.print("            ");
        System.out.println(timeChamp[i].getChamps());
    }
} 
```

编辑：编写一个更具描述性的答案，构建数据集并调用排序方法

```
import java.util.Arrays;

public class MainExample {

/**
 * @param args
 */
public static void main(String[] args) {
            //Construct data sets
    TimeChamp [] timeChampArray = new TimeChamp[3];
    TimeChamp timeChamp = new TimeChamp();
    timeChamp.setChamps("Boat");
    timeChamp.setTime((short)2001);
    timeChampArray[0]=timeChamp;
    timeChamp= new TimeChamp();
    timeChamp.setChamps("Banana");
    timeChamp.setTime((short)2000);
    timeChampArray[1]=timeChamp;
    timeChamp= new TimeChamp();
    timeChamp.setChamps("Banana");
    timeChamp.setTime((short)2001);
    timeChampArray[2]=timeChamp;
            //Call the sort method
    new MainExample().getSort(timeChampArray);
}
//the sorting method
public void getSort(TimeChamp[] timeChamp)
{
    Arrays.sort(timeChamp);
    for(int i=0;i<timeChamp.length;i++)
    {   
        System.out.print(timeChamp[i].getTime());
        System.out.print("            ");
        System.out.println(timeChamp[i].getChamps());
    }
} 
```

}

# php - jQuery val() 返回先前选择的元素值

> ID：16075265
> 
> 赞同：0
> 
> 时间：2013-04-18T05:39:16.163
> 
> 标签：php, jquery

我有一个处理表中动态 ID 的 javascript 函数。

桌子：

```
<table border = "0" width = "95%"  class = "table table-striped table-bordered" id = "tblInfoChecks">
    <thead>
        <tr>
            <th><center>#</center></th>
            <th><center>Category</center></th>
            <th><center>Name</center></th>
            <th><center>Date</center></th>
            <th><center>Due Date</center></th>
            <th><center>Allocation</center></th>
            <th><center>Status</center></th>
            <th><center>TAT</center></th>
            <th><center>Action</center></th>
        </tr>
    </thead>
    <tbody>
        <?php                   
            $q = "SELECT * FROM checks WHERE candidate_id = '$case_id' AND client_id = '$client_id'";
            $res = mysql_query($q);
            $numR = mysql_numrows($res);
            $y = 0;

            while($y < $numR){

                $m = $y + 1;
                $check_id = mysql_result($res, $y, "case_id");          
                $check_name = mysql_result($res, $y, "check_name"); //hidden
                $check_cat = mysql_result($res, $y, "check_category"); //hidden
                $elements = mysql_result($res, $y, "elements"); //hidden

                //verified information -- hidden
                $ver_status = mysql_result($res, $y, "ver_status");
                $ver_remarks = mysql_result($res, $y, "ver_remarks");
                $ver_action = mysql_result($res, $y, "ver_action");
                $overall_status = mysql_result($res, $y, "overall_status");

                $check_date = mysql_result($res, $y, "date_to_process");
                $check_due_date = mysql_result($res, $y, "due_date");
                $ver_id = mysql_result($res, $y, "verifier_id");
                $check_status = mysql_result($res, $y, "status");

                //hidden elements
                echo '<input type = "text" style = "" id = "txtInfoCheckID'.$y.'" value = "'.$check_id.'" />';
                echo '<input type = "text" style = "" id = "txtInfoCheckName'.$y.'" value = "'.$check_name.'" />';
                echo '<input type = "text" style = "" id = "txtInfoCheckCat'.$y.'" value = "'.$check_cat.'" />'; 
                echo '<input type = "text" style = "" id = "txtInfoCheckElements'.$y.'" value = "'.$elements.'" />';
                echo '<input type = "text" style = "" id = "txtInfoCheckVerStatus'.$y.'" value = "'.$ver_status.'" />';
                echo '<input type = "text" style = "" id = "txtInfoCheckVerRemarks'.$y.'" value = "'.$ver_remarks.'" />';
                echo '<input type = "text" style = "" id = "txtInfoCheckVerAction'.$y.'" value = "'.$ver_action.'" />';
                echo '<input type = "text" style = "" id = "txtInfoCheckOverallStatus'.$y.'" value = "'.$overall_status.'" />';

                //get verifier name
                $ver = "SELECT name FROM employees WHERE id = '$ver_id'";
                $ver_res = mysql_query($ver);
                $ver_numR = mysql_numrows($ver_res);
                if($ver_numR != 0){
                    $ver_name = mysql_result($ver_res, 0 ,0);
                } 

                //compute TAT
                $check_date_sec = strtotime($check_date);
                $today = strtotime(date("m/d/Y", time()));
                $tat = $today - $check_date_sec;
                $time_arr = secondsToTime($tat);
                $final_tat = $time_arr["d"]; //tat

                echo '
                    <tr>
                        <td><center>'.$m.'</center></td>
                        <td><center>'.$check_cat.'</center></td>
                        <td><center>'.$check_name.'</center></td>
                        <td><center>'.$check_date.'</center></td>
                        <td><center>'.$check_due_date.'</center></td>
                        <td><center>'.$ver_name.'</center></td>
                        <td><center>'.$check_status.'</center></td>
                        <td><center>'.$final_tat.'</center></td>
                        <td><center><a href = "javascript: void(0);" id = "viewInfoCheckElements'.$y.'">View Elements</a></center></td>
                    </tr>                   
                ';              

                $y++;
            }

        ?>
    </tbody>
    <tfoot>
        <tr>
            <th><center>#</center></th> 
            <th><center>Category</center></th>
            <th><center>Name</center></th>
            <th><center>Date</center></th>
            <th><center>Due Date</center></th>
            <th><center>Allocation</center></th>
            <th><center>Status</center></th>
            <th><center>TAT</center></th>
            <th><center>Action</center></th>
        </tr>
    </tfoot>
</table> 
```

JS

```
var rowCount_infoChecks = $('#tblInfoChecks >tbody >tr').length;                                                                                    
for(var i = 0; i < rowCount_infoChecks; i++)
{ViewInfoChecks(i);} 
```

查看信息检查：

```
function ViewInfoChecks(place){
        $('#viewInfoCheckElements'+place).livequery(function(){
            $('#viewInfoCheckElements'+place).live("click", function(e){
                var check_id = $('#txtInfoCheckID'+place).val();
            alert(check_id);                
                var check_name = $('#txtInfoCheckName'+place).val();                
                var check_cat = $('#txtInfoCheckCat'+place).val();
                var check_elem = $('#txtInfoCheckElements'+place).val();
                var ver_status = $('#txtInfoCheckVerStatus'+place).val();
                var ver_remarks = $('#txtInfoCheckVerRemarks'+place).val();
                var ver_action = $('#txtInfoCheckVerAction'+place).val();
                var overall_status = $('#txtInfoCheckOverallStatus'+place).val();

                $.post(
                    "posts/view-check-elements.php",
                    {
                        check_name : check_name,
                        check_cat : check_cat,
                        check_elem : check_elem,
                        ver_status : ver_status,
                        ver_remarks : ver_remarks,
                        ver_action : ver_action,
                        overall_status : overall_status
                    },
                    function(data){
                        $('#popupViewInfoChecks').html(data);
                        $('#popupViewInfoChecks').lightbox_me({
                            centered: true
                        });
                        e.preventDefault();
                    }
                );

            });
        });
    } 
```

每次我使用`$('#').html(data);`正确加载的表格将表格加载到 div 元素时，我都会尝试取消隐藏隐藏的值并正确放置元素值。但是当我通过 a 访问它`$('#').val()`并警告它的值时，它变得不一致。有时，当我访问元素时，之前选择的值是出现的值，所以我的假设是它与浏览器有关，但是当我尝试清除缓存时它仍然出现，所以我认为问题出在我的代码上。

例子：

*   ID为myID0的输入选择器的值为“boy”；
*   我提醒 myID0 的值并且值男孩是正确的
*   我尝试再次加载表并查询不同的值，这样男孩就变成了女孩
*   我提醒同一选择器 myID0 的值，该值仍然是男孩，并且选择器 myID0.val() 无法识别新分配的值（女孩）；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:44:29.433

尝试这个

```
function ViewInfoChecks(place){
        $('#viewInfoCheckElements'+place).livequery('click',function(){
                var check_id = $('#txtInfoCheckID'+place).val();
            alert(check_id);                
                var check_name = $('#txtInfoCheckName'+place).val();                
                var check_cat = $('#txtInfoCheckCat'+place).val();
                var check_elem = $('#txtInfoCheckElements'+place).val();
                var ver_status = $('#txtInfoCheckVerStatus'+place).val();
                var ver_remarks = $('#txtInfoCheckVerRemarks'+place).val();
                var ver_action = $('#txtInfoCheckVerAction'+place).val();
                var overall_status = $('#txtInfoCheckOverallStatus'+place).val();

                $.post(
                    "posts/view-check-elements.php",
                    {
                        check_name : check_name,
                        check_cat : check_cat,
                        check_elem : check_elem,
                        ver_status : ver_status,
                        ver_remarks : ver_remarks,
                        ver_action : ver_action,
                        overall_status : overall_status
                    },
                    function(data){
                        $('#popupViewInfoChecks').html(data);
                        $('#popupViewInfoChecks').lightbox_me({
                            centered: true
                        });
                        e.preventDefault();
                    }
                );

            });

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:35:37.327

由于选择器/加载 html 的时间，可能是某种问题。我会尝试这样的事情：

```
function(data){
    var $popupViewInfoCheck = $('#popupViewInfoChecks');
    $popupViewInfoCheck.html(data);
    $popupViewInfoCheck.lightbox_me({
        centered: true
    });
    e.preventDefault();
} 
```

..顺便说一句，出于性能原因，您应该始终将选择器分配给变量。

# c# - 在 GridView 控件 C# 中查看行号

> ID：16075266
> 
> 赞同：-3
> 
> 时间：2013-04-18T05:39:16.320
> 
> 标签：c#, .net, gridview, datagridview

我想知道是否可以在框中的 GridView 控件中为每一行添加一个行号，如图所示。

![在此处输入图像描述](https://i.stack.imgur.com/hBIga.png)

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:47:15.600

你可以使用这个代码

```
foreach (DataGridViewRow r in  dataGridView1.Rows)
{
    dataGridView1.Rows[r.Index].HeaderCell.Value = (r.Index + 1).ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:53:35.590

看看[这个](https://stackoverflow.com/questions/710064/adding-text-to-datagridview-row-header)

```
datagridview1.Rows[0].HeaderCell.Value = "ur text"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T05:43:34.017

查询中的用户`ROW_NUMBER()`函数：

```
SELECT *,
       ROW_NUMBER() OVER (ORDER BY AdrId) as RNK
FROM YourTable 
```

# php - 使用ajax传递post值

> ID：16075268
> 
> 赞同：0
> 
> 时间：2013-04-18T05:39:22.250
> 
> 标签：php, javascript, jquery

我的 index.php 中有这段代码：

```
 $('#whois').click(function () {
        //console.log("button clicked");
            $('#whois_content').html("");
            $('#fade').fadeOut('slow', function () {
                urlLinkas();
            });
        }); 
```

我想在这个脚本中将一个 post 值传递给 test.php，如下所示：

```
 $('#whois').click(function () {
        //console.log("button clicked");
        $.ajax({
        type: "POST",
        url: "test.php",
        data: info,
        success: function(){
        //dont know what to write here
        }
            $('#whois_content').html("");
            $('#fade').fadeOut('slow', function () {
                urlLinkas();
            });
        }); 
```

然后在 test.php 中调用这个 post 值`$_POST['info']`

也许有人会明白我在说什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:42:08.280

这会更好

```
$.post("test.php", { info: "Something", moreinfo: "Something Else" })
.done(function(data) {
    $('#whois_content').html("");
    $('#fade').fadeOut('slow', function () {
        urlLinkas();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:45:15.920

这应该可以，试试看：

```
$('#whois').click(function () {
        $.ajax({
            type: "POST",
        url: "test.php",
        data: {info: "some info"},
        success: function () {

        }
        $('#whois_content').html("");
    $('#fade').fadeOut('slow', function () {
        urlLinkas();
    });
}); 
```

# c++ - 在c ++中将字符串散列为整数

> ID：16075271
> 
> 赞同：9
> 
> 时间：2013-04-18T05:39:32.630
> 
> 标签：c++, string, hash, type-conversion

我试图弄清楚字符串到整数的转换过程。我们正在做一个带有散列的程序，其中要散列的键值是一个状态的名称。根据我的研究，似乎 atoi() 不起作用。

我需要分解单词的每个字母并单独转换吗？我使用 ASCII 吗？我是否完全走错了方向？

我很迷茫，所以任何信息都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T05:56:46.677

C++11 引入了一个`std::hash`在 header`<functional>`中调用的实现定义的散列函数，它对字符串类 , 等具有`std::string`特殊性`std::wstring`。

就像这样做一样简单：

```
#include <iostream>
#include <functional> //for std::hash
#include <string>

int main() {
    std::string str = "Hello World";
    std::hash<std::string> hasher;
    auto hashed = hasher(str); //returns std::size_t
    std::cout << hashed << '\n'; //outputs 2146989006636459346 on my machine
} 
```

专门`std::hash`针对您的用户定义类型也不是很复杂。但是请注意，没有任何 C 字符串的`std::hash`专门化。`const char*`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T05:48:29.810

您需要一个*哈希函数*来将您的字符串转换为或多或少的任意整数。有很多可供选择，是的，它们通常使用字符串的 ASCII 值。这是一个叫 djb2

```
unsigned long hash(const std::string& str)
{
    unsigned long hash = 5381;
    for (size_t i = 0; i < str.size(); ++i)
        hash = 33 * hash + (unsigned char)str[i];
    return hash;
} 
```

请不要认为这是一个*很好*的哈希函数，这是一个完全不同的话题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-11T03:12:52.860

从 [这里开始](https://gist.github.com/underscorediscovery/81308642d0325fd386237cfa3b44785c)，有两个函数可以将字符串转换为`uint32_t`or `uint64_t`，转换为`uint32_t`：

```
inline uint32_t hash_str_uint32(const std::string& str) {

    uint32_t hash = 0x811c9dc5;
    uint32_t prime = 0x1000193;

    for(int i = 0; i < str.size(); ++i) {
        uint8_t value = str[i];
        hash = hash ^ value;
        hash *= prime;
    }

    return hash;

} 
```

测试：

[![在此处输入图像描述](https://i.stack.imgur.com/bjqGh.png)](https://i.stack.imgur.com/bjqGh.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T05:43:55.430

[boost::lexical_cast](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_lexical_cast.html)可能适合您的需要。

```
#include <string>
#include <boost/lexical_cast.hpp>

int main()
{
    std::string str = "123456";
    try
    {
       int i = boost::lexical_cast<int>(str);
       // i should be 123456 here
    }
    catch(const boost::bad_lexical_cast&)
    {
        //bad format
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T06:29:42.373

如果字符串将留在内存中，一些库只是将字符串的地址作为哈希返回。

# java - oop pig 游戏中的“找不到符号”错误

> ID：16075278
> 
> 赞同：0
> 
> 时间：2013-04-18T05:40:18.207
> 
> 标签：java, oop, class, symbols

我在做oop pig游戏。我遇到一个错误：“ `cannot find symbol class name"`。你能帮我找到它吗？

```
 public class Player 
 {
    protected String name;
    Scorekeeper sk;
    // sk =  new ScoreKeeper();

    public Player(String name)
    {
      this.name = name;
      //Scorekeeper sk = new ScoreKeeper();
      sk = new ScoreKeeper();
    }

    public Player(){  }

    public int getScore()
    {
       return sk.getGameTotal;
    }

    public String getName()
    {
       return name;
    }

    public int incScore(int rollValue)
    {
       sk.addToRoundTotal(rollValue);
       return sk.getRoundTotal;
    }

    public int setScore()
    {
      return sk.resetRoundTable();
    }
  } 
```

这是我为该类创建对象的类`ScoreKeeper`，另一个类是

```
public class ScoreKeeper {

    int gametotal = 0;
    int roundtotal = 0;

    public ScoreKeeper() 
    {
        //gametotal = 0;
        //roundtotal = 0;
    }

    public void addToGameTotal() {
        gametotal += roundtotal;
        resetRoundTotal();
    }

    public void addToRoundTotal(int value) {
        roundtotal += value;
    }

    public void resetRoundTotal() {
        roundtotal = 0;
    }

    public int getRoundTotal() {
        return roundtotal;
    }

    public int getGameTotal() {
        return gametotal;
    }
  } 
```

当我尝试编译课程时

```
 Player.java:5: cannot find symbol
        symbol  : class Scorekeeper
        location: class Player
        Scorekeeper sk;
        ^
      1 error 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:42:19.793

在您的 Player-class 中，您写道：

```
Scorekeeper sk; 
```

“k”需要大写，如下所示：

```
ScoreKeeper sk; 
```

Java 是区分大小写的语言

# c# - LinQ 错误 linq 关节类型推断未能调用“加入”错误

> ID：16075281
> 
> 赞同：1
> 
> 时间：2013-04-18T05:40:38.173
> 
> 标签：c#, linq, entity-framework

我对实体框架很陌生，我正在尝试在两个实体上使用 join 子句，如下所示。

```
var alertlist = from elogAlert  in yangkeeDBEntity.Yang_Kee_Logistics_Pte_Ltd_ELog_Tablet_Alert
                        where elogAlert.No_ != null
                        join elogAlertDetail in  yangkeeDBEntity. Yang_Kee_Logistics_Pte_Ltd_ELog_Tablet_Alert_Details
                        on elogAlert.No_ == elogAlertDetail.AlertID

                        where elogalertdetail.employee_id == driverid
                        select new
                        {
                            elogalertdetail.employee_id,
                            elogalertdetail.alert_id,
                            elogalertdetail.no_,
                            elogalertdetail.status,
                            elogalertdetail.created_by,
                            elogalertdetail.date_created,

                        }; 
```

嗨，从上面的代码中，我收到两个错误说

```
'Error  1   The name 'elogAlertDetail' is not in scope on the left side of 'equals'.  Consider swapping the expressions on either side of 'equals'.' and 'linq joint type inference failed to call 'join' error  ' 
```

目前这两个表没有任何数据。如果有人可以帮助我解决这种情况，我会很高兴

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T05:43:58.083

`==`加入 Linq 时不能使用。你需要使用`equals`.

注意不是[方法](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx) `.Equals(..)`而是[关键字](http://msdn.microsoft.com/en-us/library/cc713644.aspx)

```
from elogAlert  in yangkeeDBEntity.Yang_Kee_Logistics_Pte_Ltd_ELog_Tablet_Alert
join elogAlertDetail in  yangkeeDBEntity.Yang_Kee_Logistics_Pte_Ltd_ELog_Tablet_Alert_Details

on elogAlert.No_ equals elogAlertDetail.AlertID //this line has equals instead of ==

                        where elogAlert.No_ != null
                        where elogalertdetail.employee_id == driverid
                        select new
                        {
                            elogalertdetail.employee_id,
                            elogalertdetail.alert_id,
                            elogalertdetail.no_,
                            elogalertdetail.status,
                            elogalertdetail.created_by,
                            elogalertdetail.date_created,
                        }; 
```

查看有关 Linq 加入的[文档](http://code.msdn.microsoft.com/LINQ-Join-Operators-dabef4e9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:49:56.717

您遇到的错误与连接时等于操作数周围的参数顺序有关。

连接的表必须是等号的 RHS，并且 LHS 必须在您要连接的行中。

在这种情况下`yangkeeDBEntity`不在`elogAlert`行中

CF MSDN 中的例子

```
from c in categories 
        join p in products on c equals p.Category into ps 
        from p in ps 
        select new { Category = c, p.ProductName }; 
```

`c`在您要加入的行中，在您要加入`p.category`的表上

另外你还需要使用上面`equals`没有`==`提到的词

# java - 是否有可能将 JPanel 对象存储在 arraylist 中

> ID：16075287
> 
> 赞同：0
> 
> 时间：2013-04-18T05:41:11.027
> 
> 标签：java, arrays, swing, jtextfield, jpasswordfield

嗨，我从团队负责人那里得到了一项任务，即存储员工详细信息用户在该面板中的文本字段中输入的内容，然后在另一个框架中，管理员必须通过调用 arraylist 来检查每个员工的详细信息，该列表应该在卡片布局中显示面板，这里是我的员工注册编码。任何人都可以帮助我

```
Registration()
{
    frm=new JFrame("Welcome to the login page");
    left=new JPanel(new GridLayout(0,1));
    left.setBackground(Color.LIGHT_GRAY);
    right=new JPanel(new GridLayout(0,1));
    right.setBackground(Color.LIGHT_GRAY);
    sp=new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,left,right);
    lb9=new JLabel("Member");
    lb9.setFont(new Font("Serif",Font.PLAIN, 18));
    lb9.setForeground (Color.blue);
    lb10=new JLabel("Create an Account");
    lb10.setFont(new Font("Serif", Font.PLAIN, 16));
    lb10.setForeground (Color.blue);
    lb1=new JLabel("Username");
    tf1=new JTextField(10);
    lb2=new JLabel("Password");
    tf6=new JTextField(10);
    lb3=new JLabel("First Name");
    tf2=new JTextField(10);
    lb4=new JLabel("Last Name");
    tf3=new JTextField (10);
    lb5=new JLabel("Password");
    psd2=new JPasswordField (10);
    lb6=new JLabel("Confirm password");
    psd3=new JPasswordField (10);
    lb7=new JLabel("MailID:");
    tf4=new JTextField (10);
    lb8=new JLabel("Contact No");
    tf5=new JTextField (10);
    b1=new JButton("Enter");
    b2=new JButton("Register");

}
public void launchFrame()
{

frm.setSize(450, 350);
frm.add(sp);
//sp.setLeftComponent(left);
//sp.setRightComponent(right);
left.add(lb9);
left.add(lb1);
left.add(tf1);
left.add(lb2);
left.add(tf6);
left.add(b1);

right.add(lb10);
right.add(lb3);
right.add(tf2);
right.add(lb4);
right.add(tf3);
right.add(lb5);
right.add(psd2);
psd2.setEchoChar('*');
right.add(lb6);
right.add(psd3);
psd3.setEchoChar('*');
right.add(lb7);
right.add(tf4);
right.add(lb8);
right.add(tf5);
right.add(b2);

frm.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:58:13.310

像这样创建 List 对象

```
List<JPanel> panelList = new ArrayList<JPanel>();

// add your JPanel object like this way
panelList.add(yourPanel);

// retrieve your JPanel object from list
JPanel panel = panelList.get(index); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:59:03.477

只评论不回答

> 是否有可能将 JPanel 对象存储在 arraylist 中

1.  是的，但出于某种原因，

    *   因为这个 JComponents 的数量不需要将这些 JComponet 存储在数组中，
    *   JComponents 不是同一类型，
    *   它们被创建为（局部）变量，
    *   它们可以从整个 JVM 实例中访问
2.  将值从具体 JComponent 传递到当前 JVM（另一个类）中的任何地方是否有任何问题
3.  在contianer（你的左右JPanels）内部迭代并在内部迭代以测试（JTextComponent的compo [i]实例），然后在这个条件下你将只能访问并从JTextField和JPasswordField获取值，其余的JComponents放置（JLabel , JButton eg ) 在 JPanel (例如) 不是 JTextComponent 的实例

# javascript - 根据输入自动完成 AJAX 请求，而不是返回所有结果

> ID：16075289
> 
> 赞同：0
> 
> 时间：2013-04-18T05:41:19.790
> 
> 标签：javascript, jquery, autocomplete, fcbkcomplete

我正在使用这个名为 FCBKcomplete 的自动完成插件，它的作用是魅力。我唯一的问题和担忧是，显然（这就是我的想法）当我在输入中输入一个字符以在下拉列表中获取结果时，所有结果都将作为 JSON 响应返回，然后将搜索该响应在下拉列表中显示我的结果。

换句话说，说以下是我的网址：

```
http://this.com/usersAPI.do 
```

搜索查询将类似于：

```
select * from user_table 
```

当请求被发送到这个 url 时，所有结果都将返回，并且大小一点也不小。

我正在寻找的是可以搜索我在输入字段中输入的那些字符的方法。所以像这样的网址：

```
http://this.com/usersAPI.do?name=? 
```

以便执行的查询类似于

```
select * from user_table where name like xxx 
```

xxx 是我目前输入的字符。我输入的下一个字符也是 y 查询更改为

```
select * from user_table where name like xxxy 
```

等等

这导致更轻的 JSON 响应和更少的服务器负载。

所以请帮帮我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:04:07.267

嗨，你可以使用这样的东西。

```
 $( "#fieldId").autocomplete({
         source: 
        function( request, response ) { 
             $.ajax({
                 url: "test.do",
                 data : {"searchText":request.term}
                 context: document.body
                 }).done(function() {
                     response( $.map( data.dropValues, function( item ) {
                                    var returnObj = new Object();
                                    returnObj['label'] = item.id + '--' + item.value;
                        }
                 }); 
        },
        minLength: 1, 
        mustMatch:true,
        autoSelect :true,
        delay:0,
        }).data( "autocomplete" )._renderItem = function( ul, item ) { 
        var html = '<li><a>' + item.label;
            html += '</a></li>';
        return $(html).data('item.autocomplete', item).appendTo( ul );
    }; 
```

# python - 在 Python 中处理多个文件，并在字段上进行匹配

> ID：16075290
> 
> 赞同：0
> 
> 时间：2013-04-18T05:41:19.893
> 
> 标签：python, file, pattern-matching

我有许多 CSV 文件，我需要将它们与一个“主列表”进行比较，并根据唯一 ID 确定这些其他文件是否包含该键的条目。

在 Python 中执行此操作的最简单方法是什么？即，您建议我将数据读入哪种结构，以及您建议我如何遍历它？

这是我正在寻找的数据和输出的示例。

```
**Master List**

Unique ID : File Name : File Version : Responsible Party

J578221 : Expander : 1.23 : Joe Bloggs

KK89821 : Top : 0.9 : Mike Smith

**Location X**

Region : File Name : Unique ID

USA : Acme Expander : J578221

USA : Acme Tail : MK33431

**Location Z**

Reqion : File Name : Unique ID : Date Added

China : Expander : J578221 : 03-04-2012

HK : Acme Top : KK89821 : 06-07-2012

**Output:**

Unique ID : File Name : File Version : Responsible Party : In Location X : In Location Z

J578221 : Expander : 1.23 : Joe Bloggs : YES : YES

KK89821 : Top : 0.9 : Mike Smith : NO : YES 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:22:07.637

最简单的方法可能是使用正则表达式（[请参阅此处的文档](http://docs.python.org/2/library/re.html)）来检索主文件中每一行的键。（如果唯一 ID 的位置发生变化，您可能需要先评估文件的结构并修改您的表达式。）

将此 ID 列表作为键存储在字典中，并使用列表作为值，指示包含每个主键的文件。

之后，您可以过滤字典以查找一个或多个文件的 ID（键），或查找包含一个特定 ID 的文件。

# c# - 阅读每个 Outlook 2003 邮件中的 Internet 标题

> ID：16075297
> 
> 赞同：1
> 
> 时间：2013-04-18T05:41:42.907
> 
> 标签：c#, outlook-2003

我开发了一个适用于所有 Outlook 版本（2003、2007、2010）的应用程序。在该项目中，我处理每个 Outlook 邮件的 Internet 标头信息。我使用 PropertyAccessor 属性完成了 Outlook 版本（2007、2010）。我发现 PropertyAccessor 仅适用于 Outlook 版本（2007、2010）。我还想处理每个 oulook 2003 邮件的 Internet 标题信息。我完成了使用兑换 dll（第三方）来克服上述问题。任何人都可以帮助我是否有任何其他选择来克服这个问题或建议我赎回 dll 方法是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:26:40.693

过去 3 年在一个大型 Outlook (2003,2007,2010,2013) 项目上工作，我同意使用 Redemption 是正确的方法，这就是我为 Outlook 2003 所做的，并且效果很好。

# iphone - 在 UImage 中显示渲染图标

> ID：16075298
> 
> 赞同：1
> 
> 时间：2013-04-18T05:41:45.617
> 
> 标签：iphone, ios, objective-c, xcode, uitableview

我有一个 57x57 png 图标图像，用作我的应用程序的主图标。如何以编程方式使用 iOS 的渲染系统以与图标在主屏幕中渲染相同的方式产生光泽效果？我最好使用 Uimage 将其与原始图像一起传递。

似乎没有一个名为 UIPrerenderedIcon 的类来完成此操作，尽管该设置中有一个属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:44:33.027

这有点奇怪，但为什么不直接在模拟器上进入你的主屏幕，截屏，然后通过 PhotoShop、InkScape 或类似的东西从那里剪下来呢？这可能是实现这一目标的最快方法。

# java - 如何解析 xml 并获取特定元素的内容

> ID：16075301
> 
> 赞同：0
> 
> 时间：2013-04-18T05:41:52.960
> 
> 标签：java, xpath, xml-parsing

我的 xml 字符串是

```
Got message from Queue ==> <?xml version='1.0' encoding='UTF-8'?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003
/05/soap-envelope"><soapenv:Body><ns1:PostPublicationResponse xmlns:ns1="http://www.openoandm.org/xml/ISBM/"><ns1:Messag
eID>urn:uuid:7d361fb0-bc54-48bd-bbd1-6e34960ef3f8</ns1:MessageID><ns1:MessageContent><MessageContent xmlns="http://www.o
penoandm.org/xml/ISBM/"><hi>k786</hi></MessageContent></ns1:MessageContent></ns1:PostPublicationResponse></soapenv:Body>
</soapenv:Envelope> 
```

现在我已经编写了一个函数，它试图获取***元素 MessageContent 的内容，即`<hi>k786</hi>`***，但我总是得到空值。我解析上述 xml 的函数是：

```
private String parseQueueMessage(String message)
        throws ParserConfigurationException, SAXException, IOException,
        XPathExpressionException {
    String resultMsg = "";
    DocumentBuilderFactory domFactory = DocumentBuilderFactory
            .newInstance();
    domFactory.setNamespaceAware(true);

    DocumentBuilder builder = domFactory.newDocumentBuilder();

    Document doc = builder.parse(new InputSource(new java.io.StringReader(
            message)));

    XPath xpath = XPathFactory.newInstance().newXPath();
    // XPath Query for showing all nodes value

    xpath.setNamespaceContext(new NamespaceContext() {

        @SuppressWarnings("rawtypes")
        @Override
        public Iterator getPrefixes(String arg0) {
            return null;
        }

        @Override
        public String getPrefix(String arg0) {
            return null;
        }

        @Override
        public String getNamespaceURI(String arg0) {
            if("xmlns:ns1".equals(arg0)) {
                return "http://www.openoandm.org/xml/ISBM/";
            }
            return null;
        }
    });

    XPathExpression expr = xpath.compile("//xmlns:ns1:MessageContent");

    Object result = expr.evaluate(doc, XPathConstants.NODESET);

    NodeList nodes = (NodeList) result;
    for (int i = 0; i < nodes.getLength(); i++) {
        System.out.println("The message obtained after parsing : "
                + nodes.item(i).getNodeValue());
        resultMsg = nodes.item(i).getNodeValue();
    }

    return resultMsg;
} 
```

我在这里做错了什么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:05:24.217

在从 XPATH 中选择之前，您需要先定义名称空间 URI。例如，首先在根上定义命名空间URI如下；

```
element.setAttribute("xmlns:ns1", "http://www.openoandm.org/xml/ISBM/");
xpath.compile("//ns1:MessageContent"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:59:12.030

//尝试类似...

XmlDocument 文档 = 新 XmlDocument(); doc.LoadXml("urn:uuid:7d361fb0-bc54-48bd-bbd1-6e34960ef3f8k786");

```
XmlElement elem = (XmlElement) doc.DocumentElement.FirstChild;
Console.Write("{0}:{1} = {2}", elem.Prefix, elem.LocalName, elem.InnerText);
Console.WriteLine("\t namespaceURI=" + elem.NamespaceURI); 
```

# unit-testing - jQuery UI 工具提示在更改内容时打开

> ID：16075304
> 
> 赞同：2
> 
> 时间：2013-04-18T05:42:00.057
> 
> 标签：unit-testing, jquery-ui-tooltip

我在 ui.tooltip 中发现了一个错误：如果其内容发生变化，工具提示会中断关闭。这是[示例](http://jsfiddle.net/w354U/)。

请帮助我进行适当的测试，这个有时会在“工具提示被隐藏得太早”上失败：

```
asyncTest( "content: change while close", function() {
    expect( 2 );
    $.fx.off = true
    var tooltip,
        hidingDuration = 20,
        element = $( "#tooltipped1" ).tooltip({
            hide: hidingDuration
        });

    element.tooltip( "open" );
    tooltip = $( "#" + element.data( "ui-tooltip-id" ) );

    $.fx.off = false;
    element.tooltip( "close" );
    setTimeout( function() {
        ok( tooltip.is( ":visible" ), "tooltip was hidden too early" );
    }, hidingDuration * 0.5 );

    //element.tooltip({ content: 'Foo' });
    //tooltip = $( "#" + element.data( "ui-tooltip-id" ) );

    setTimeout( function() {
        ok( !tooltip.is( ":visible" ), "tooltip doesn't hid properly" );
        start();
    }, hidingDuration * 1.5 );
}); 
```

# java - 从 Glassfish 2.1 迁移我的应用程序。到 JBoss 7.1.3 - 与用户共享库相关

> ID：16075305
> 
> 赞同：0
> 
> 时间：2013-04-18T05:42:06.797
> 
> 标签：java, jboss, glassfish, ear

再会！

我的应用程序在 Glass fish 2.1 中运行良好。它是 .ear 文件。我在我的应用程序中使用了更多配置文件，如 xsl、xsd、apache log4j xml 和一些属性文件。所以我在我的磁盘中创建了共享库，说 C:/SharedLib 并将我所有的配置文件放在这个位置。在 glassfish 中，我将在我的应用程序服务器中提供此位置-->JVM 设置--> 路径设置--> 类路径前缀 --- C:/SharedLib

我将使用该位置（C:/SharedLib）中的所有属性文件、jar 文件和 xsl、xsd。我的应用程序 (.ear) 包含 ejb 和 war 文件。

我的问题是如何在我的 Jboss 7.1.3 中使用相同的配置？有什么办法不改变我的应用程序.ear中的代码？

# magento - 我如何在销售订单视图的左侧添加一个新选项卡，比如现在是 Magento 中的发票贷项通知单、发布等

> ID：16075312
> 
> 赞同：0
> 
> 时间：2013-04-18T05:42:37.180
> 
> 标签：magento

我想在销售->订单->视图的左侧添加一个新选项卡。为此我创建了一个模块但没有解决我的问题，它显示错误选项卡配置等错误，我搜索了许多链接也发布在堆栈溢出，但还不满意。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:34:03.553

这实际上应该很容易做到。只需查看`app/design/adminhtml/default/default/layout/sales.xml`布局文件。您可以在那里找到该`<adminhtml_sales_order_view>`节点，该节点定义了订单查看页面上使用的所有块。

为了添加新选项卡，您需要`<action`在文件中放置另一个 > 声明。当前选项卡的定义如下（Magento EE 1.11）：

```
 <adminhtml_sales_order_view>
    (...)
    <reference name="left">
        <block type="adminhtml/sales_order_view_tabs" name="sales_order_tabs">
            <action method="addTab"><name>order_info</name><block>order_tab_info</block></action>
            <action method="addTab"><name>order_invoices</name><block>adminhtml/sales_order_view_tab_invoices</block></action>
            <action method="addTab"><name>order_creditmemos</name><block>adminhtml/sales_order_view_tab_creditmemos</block></action>
            <action method="addTab"><name>order_shipments</name><block>adminhtml/sales_order_view_tab_shipments</block></action>
            <action method="addTab"><name>order_history</name><block>adminhtml/sales_order_view_tab_history</block></action>
            <action method="addTab"><name>order_transactions</name><block>adminhtml/sales_order_view_tab_transactions</block></action>
        </block>
    </reference>
</adminhtml_sales_order_view> 
```

请注意，**不要更改核心模板！**

在这种情况下，您应该创建新模块或更改**本地**代码池中的现有模块。在 adminhtml 默认主题中定义一个布局更新，`config.xml`然后创建新的布局文件，例如：

`app/design/adminhtml/default/default/layout/CUSTOM_VENDOR/sales.xml`：

```
 <adminhtml_sales_order_view>
    <reference name="sales_order_tabs">
        <action method="addTab"><name>TAB_NAME</name><block>CUSTOM_BLOCK</block></action>         
    </reference>
</adminhtml_sales_order_view> 
```

然后你只需要创建新块和模板。

# vaadin - 在 Vaadin 7 中实现 ICEPush 0.5.5

> ID：16075325
> 
> 赞同：2
> 
> 时间：2013-04-18T05:43:35.877
> 
> 标签：vaadin, add-on, icepush

我正在尝试将 ICEPush 附加组件添加到我的 Vaadin 7 项目中。但是，我找不到任何正确的方法来实现它。

我将此添加到我的 web.xml 文件中。

```
<servlet>
    <servlet-name>ICEPush for Portlets</servlet-name>
    <servlet-class>org.vaadin.artur.icepush.ICEPushServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>ICEPush for Portlets</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

课程`org.vaadin.artur.icepush.ICEPushServlet`似乎无法使用。所以我把它改成了`org.icepush.servlet.ICEpushServlet`.

我使用 Vaadin 7.0.4 和 ICEPush 0.5.5。有人可以指导我如何在 Vaadin 7 中实现 ICEPush。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:35:51.477

您是否还添加了 Maven/Ivy 依赖项和存储库？

**马文：**

```
<dependency>
   <groupId>org.vaadin.addons</groupId>
   <artifactId>icepush</artifactId>
   <version>0.5.5</version>
</dependency>
<repository>
   <id>vaadin-addons</id>
   <url>http://maven.vaadin.com/vaadin-addons</url>
</repository> 
```

**常春藤：**

```
<dependency org="org.vaadin.addons" name="icepush" rev="0.5.5" />

<ibiblio name="vaadin-addons" usepoms="true" m2compatible="true" root="http://maven.vaadin.com/vaadin-addons" /> 
```

如果这不是解决方案，我们需要有关该问题的更多信息来帮助您。

# c++ - 类中的线程

> ID：16075328
> 
> 赞同：1
> 
> 时间：2013-04-18T05:43:52.080
> 
> 标签：c++, thread-safety

我正在创建一个将字符串记录到文件中的异步类。我应该在类本身中创建线程吗？我在想这样的事情作为启动功能

```
void Async_Log::start (void)
{
  std::thread thread_log(
    [&]()
    {
      std::ofstream fout;
      fout.open(fileName);
      while(true)
      {
        if(q.size())
        {
          std::lock_guard<std::mutex> lock(m);
          fout << q.front() <<  "\t At Time: " << std::clock() << std::endl;
          q.pop();
        }
      }
      fout.close();
    });
} 
```

或者将线程留在主线程会更好。我首先关心的是线程是否是唯一的（所以如果我用两个不同的文件实例化类 2 次，thread_log 会被覆盖或发生冲突）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:25:21.020

在课堂上有一个专门的线程没有错，但我想注意几点：

1.  在您的线程中，您实现忙于等待日志消息。这是完全多余的而且非常昂贵！即使队列中没有消息，您的线程也会消耗 CPU。你需要的是**阻塞队列**，这会阻塞 pop() 方法。[您可以在此处](https://stackoverflow.com/questions/12805041/c-equivalent-to-javas-blockingqueue)或[此处](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)找到 C++ 阻塞队列的实现。

2.  需要提供终止日志记录线程的可能性。您可以通过在循环中检查“终止”变量或向记录器发送特殊的“毒丸”消息来完成此操作。

# sql-server - 在 SQL Server 中将 Varchar 转换为时间

> ID：16075331
> 
> 赞同：11
> 
> 时间：2013-04-18T05:43:57.663
> 
> 标签：sql-server, tsql, type-conversion

如何将时间格式 ***“10:02:22 PM”***转换为 SQL Server DateTime 格式。

我有一列这样的数据。我从 CSV 文件中导入了此列，现在想将其转换为日期时间格式，以便能够使用日期时间函数。

我希望能够将此列插入到另一个具有正确日期时间格式的表中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:58:32.123

使用此链接：http: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。

仅用于时间转换...

```
SELECT CONVERT( TIME, '10:00:22 PM' ); 
```

给出以下输出...

```
22:00:22.000000 
```

日期和时间的时间转换...

```
SELECT CONVERT( DATETIME, '10:00:22 PM' ); 
```

给出以下输出...

```
1900-01-01 22:00:22.0000 
```

注意：因为`datetime`您需要输入特定日期，否则它会考虑默认世纪日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:55:25.060

你不需要转换它。使用时会发生隐式转换

```
INSERT otherTable
SELECT ....., timeAsVarchar, ...
  FROM csvTable 
```

如果所有时间数据（前导空格与否）都可以从字符串中解析出来，那么查询将很好地工作。但是，如果存在无法转换为时间的不良数据或空白数据的可能性，请先对其进行测试

```
INSERT otherTable
SELECT ....., CASE WHEN ISDATE(timeAsVarchar)=1 THEN timeAsVarchar END, ...
  FROM csvTable 
```

`ELSE NULL`是隐含的，所以我把它省略了。

# extjs4 - 来自提交的 ExtJs 与在不同域上提交的文件上传

> ID：16075333
> 
> 赞同：1
> 
> 时间：2013-04-18T05:44:03.773
> 
> 标签：extjs4

我有表单提交方法，我将表单提交到不同的域。我的表单包括 fileupload 字段。由于只有 fileupload 字段，我无法从第三方域取回响应。我已经在本地主机上检查了它，它工作得很好，但在不同的域上它会给出错误，比如

```
Resource interpreted as Document but transferred with MIME type application/json: "url". 
```

而这也

```
Unsafe JavaScript attempt to access frame with URL "URL-1" from frame with URL "URL-2". Domains, protocols and ports must match. 
```

提前致谢。

# iphone - 每次获取当前位置警报

> ID：16075337
> 
> 赞同：0
> 
> 时间：2013-04-18T05:44:14.393
> 
> 标签：iphone, ios, objective-c, cllocationmanager

我正在尝试使用`CLLocationManage`. 我将我的方法设置为在按钮单击时获取位置。我可以成功获取位置，但是当我收到带有消息“ *APPNAME 想使用您当前的位置？* ”的警报视图时，带有两个按钮，“*不允许*”和“*确定*”。然后我点击“不允许”。然后，每当我单击按钮时，我就无法再次获取该警报视图以获取当前位置，因此我无法获取该位置。那么每次单击按钮获取位置时是否可以获取警报视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:52:17.503

当您单击警报上的“不允许”按钮时，您的应用程序的位置权限将受到限制。

您可以导航到手机中的设置>隐私>位置服务，在那里您可以看到服务已为您的应用程序关闭。您可以打开它以授予权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:07:13.013

添加此答案，以便您可以更有效地处理该场景。

没有办法再次强制当前位置权限对话框，但您可以做的是捕获其用户已拒绝在您的应用程序中使用位置的状态，使用`CLLocationManagerDelegate`,

```
- (void)locationManager:(CLLocationManager*)aManager didFailWithError:(NSError*)error
{
    switch([error code])
    {
    case kCLErrorDenied: // Location access denied
    NSLog(@"Sorry, this app needs to access your current location... ");
    UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:@"" message:@"Sorry, this 
    app needs to access your current location. You can navigate to settings in your 
    phone > privacy >location services, over there you can see services are off for you 
    application. You can turn it on to give permissions"  
    delegate:self cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
    //show the alert view
    [myAlert show];
    break;

    case kCLErrorNetwork: // received n/w error
    NSLog(@"Network error occurred");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T21:54:36.907

对于用户来说，选择的答案是正确的。

但是，如果您是程序员并且希望用户收到警报通知，则应致电

```
[singleton.locationManager startUpdatingLocation]; 
```

每次我如您所愿时，当位置服务被禁用时，这将自动弹出警报。

一个常见的错误是检查是否启用了位置更新，并且在未启用时不要打扰调用 startUpdatingLocation。

如果是这种情况，则不会显示警报。

# plsql - 使用 Execute Immediate 执行变量

> ID：16075343
> 
> 赞同：0
> 
> 时间：2013-04-18T05:45:00.223
> 
> 标签：plsql, oracle11g

当我尝试运行以下代码时，出现“PL/SQL 编译错误”之类的错误。我在这做错了什么？

```
declare vsql varchar2(500);
 begin
   vsql:='begin
   create global temporary table temp_subset 
    ( id number
      ,"Category"  varchar2(2048)
      ,"Class"  varchar2(2048)
      ,"Measure"  varchar2(2048)
      ,"Actuals Year Total"  varchar2(2048)
      ,"COL NAME" varchar2(256)
      ,value varchar2(2048)
    );
end;';
execute immediate vsql;
end; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:50:20.543

尝试这个：

```
vsql:='
   create global temporary table temp_subset 
    ( id number
      ,"Category"  varchar2(2048)
      ,"Class"  varchar2(2048)
      ,"Measure"  varchar2(2048)
      ,"Actuals Year Total"  varchar2(2048)
      ,"COL NAME" varchar2(256)
      ,value varchar2(2048)
    ) on commit delete rows'; 
```

* * *

如果需要创建两个表：

```
vsql:='
  begin
    execute immediate ''create table t1 ()'';
    execute immediate ''create table t2 ()'';
  end;
'; 
```

# c++ - 在 c++/MFC 中读取密钥并从 .ini 文件中获取部分

> ID：16075365
> 
> 赞同：0
> 
> 时间：2013-04-18T05:46:36.777
> 
> 标签：c++, visual-c++, mfc

我有一个 .ini 文件，其中包含以下部分：

```
[Hai1]
Value1 = 1
Value2 = 2

[Hai2]
Value1 = 3
Value2 = 4 
```

现在，我需要搜索一个特定的键，如“value1 = 3”，并且必须获取它所属的相应部分，在本例中为“Hai2”。要使用 GetPrivateProfileString，我们首先需要该部分。但就我而言，我需要根据 Key 值获取特定部分。关于如何执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:04:48.540

浏览所有部分。通过 GetPrivateProfileSectionNames 获取部分名称。

```
char lpszReturnBuffer[4096];
DWORD nSize;     
nSize = sizeof(lpszReturnBuffer);

DWORD dwRet = GetPrivateProfileSectionNames(lpszReturnBuffer, nSize, lpszFileName);

while (strlen(lpszReturnBuffer)>0) 
{
    TRACE(lpszReturnBuffer);
    SearchForMyKeyValueInSection(lpszReturnBuffer);
    lpszReturnBuffer+= strlen(lpszReturnBuffer)+1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:09:14.903

您需要一个 INI 文件解析器。如果您可以使用 Boost 库，请参阅[Boost::PropertyTree](http://www.boost.org/doc/libs/1_53_0/doc/html/property_tree.html)

# c++ - 此函数的操作员参数过多？

> ID：16075366
> 
> 赞同：3
> 
> 时间：2013-04-18T05:46:37.907
> 
> 标签：c++, operator-overloading

制作了我自己的字符串类（显然是用于家庭作业），并且在我的两个运算符上遇到奇怪的语法错误。我的相等和添加运算符声称我有太多参数（即在我的 .h 文件中），但随后声称该方法甚至不属于我的 .cpp 文件中的类！

我什至将相等运算符加为好友，但智能感知仍然给我同样的错误信息。

有谁知道我做错了什么？

```
friend bool operator==(String const & left, String const & right); 
```

**字符串.h**

```
bool operator==(String const & left, String const & right);
String const operator+(String const & lhs, String const & rhs); 
```

**字符串.cpp**

```
bool String::operator==(String const & left, String const &right)
{
    return !strcmp(left.mStr, right.mStr);
}

String const String::operator+(String const & lhs, String const & rhs)
{
    //Find the length of the left and right hand sides of the add operator
    int lengthLhs = strlen(lhs.mStr);
    int lengthRhs = strlen(rhs.mStr);

    //Allocate space for the left and right hand sides (i.e. plus the null)
    char * buffer = new char[lhs.mStr + rhs.mStr + 1];

    //Copy left hand side into buffer
    strcpy(buffer, lhs.mStr);

    //Concatenate right hand side into buffer
    strcat(buffer, rhs.mStr);

    //Create new string
    String newString(buffer);

    //Delete buffer
    delete [] buffer;

    return newString;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T05:47:41.203

您需要`operator==`在类之外定义：

```
bool String::operator==(String const & left, String const &right)
     ^^^^^^^^ REMOVE THIS 
```

如果`operator+`也是友元，也需要定义为自由函数（即类外）。

# android - 多个通知是从（GCM）谷歌通知服务器获得的？

> ID：16075367
> 
> 赞同：0
> 
> 时间：2013-04-18T05:46:50.067
> 
> 标签：android, asp.net, google-cloud-messaging, pushsharp

我的数据库表中有多个不同的设备 ID 指向同一个设备，因为当设备重新安装/安装时，谷歌会向我发送不同的设备 ID。由于哪些设备会收到多个通知，这对我和我的用户造成了极大的伤害。有没有办法告诉谷歌只向单个设备发送一个通知？或者有没有办法在发送请求之前检查 id 是新的还是旧的？有人遇到过这个奇怪的问题吗？顺便说一句，我在后端使用 PushSharp/ASP.NET。

**更新**：我现在依赖本机设备 ID。因此，我将从本地设备 ID 相同的数据库表中删除/替换旧的注册 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:58:45.830

我认为一旦获得未注册的错误代码，您就需要从数据库中删除设备 ID。

```
Unregistered Device
An existing registration ID may cease to be valid in a number of scenarios, including:
If the application manually unregisters by issuing a com.google.android.c2dm.intent.UNREGISTER intent.
If the application is automatically unregistered, which can happen (but is not guaranteed) if the user uninstalls the application.
If the registration ID expires. Google might decide to refresh registration IDs.
If the application is updated but the new version does not have a broadcast receiver configured to receive com.google.android.c2dm.intent.RECEIVE intents.
For all these cases, you should remove this registration ID from the 3rd-party server and stop using it to send messages. 
Happens when error code is NotRegistered. 
```

我建议您在向设备发送消息时处理错误代码。

[http://developer.android.com/google/gcm/gcm.html](http://developer.android.com/google/gcm/gcm.html)

请阅读第 3 方服务器的角色。你会得到更多的细节。

# python-2.7 - 鱼在pygame中游泳

> ID：16075368
> 
> 赞同：0
> 
> 时间：2013-04-18T05:46:50.483
> 
> 标签：python-2.7, pygame, python-imaging-library, gif

我想使用 python pygame 模块制作一个 2D 的“鱼缸”。

基本上，我将加载一个 jpg 图像作为背景，并加载一个描绘鱼游泳的 gif 动画图像并使其移动。

我知道如何使静态图像移动，但如何在图像本身动画时使 gif 图像移动。

我已经安装了 PIL，请确定是否需要使用它。

如果这不起作用，我还可以将 gif 文件分成几个静态帧，并循环地让每个帧显示在屏幕上。后一张贴的时候，前一张需要去掉，怎么去掉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:52:10.097

这是我以我的名义用来让 PyGame 动画工作的类：

```
class Animation(pygame.sprite.Sprite):
    def __init__(self, img, fps = 6):
        # Call the parent class (Sprite) constructor 
        pygame.sprite.Sprite.__init__(self)

        # Slice source image to array of images
        self.images = self.loadSliced(img)

        # Track the time we started, and the time between updates.
        # Then we can figure out when we have to switch the image.
        self._start = pygame.time.get_ticks()
        self._delay = 1000 / fps
        self._last_update = 0
        self._frame = 0
        self.image = self._images[self._frame]

def loadSliced(w, h, filename):
    """
    Pre-conditions:
        Master can be any height
        Sprites frames must be the same width
        Master width must be len(frames)*frames.width

    Arguments: 
        w -- Width of a frame in pixels
        h -- Height of a frame in pixels
        filename -- Master image for animation
    """
    images = []

    if fileExists( img, "Animation Master Image"):
        master_image = pygame.image.load(filename).convert_alpha()
        master_width, master_height = master_image.get_size()
        for i in range(int(master_width/w)):
            images.append(master_image.subsurface((i*w, 0, w, h)))
    return images

def update(self, t):
    # Note that this doesn't work if it's been more than self._delay
    # time between calls to update(); we only update the image once
    # then. but it really should be updated twice

    if t - self._last_update > self._delay:
        self._frame += 1
        if self._frame >= len(self._images): 
            self._frame = 0
            self.image = self._images[self._frame]
            self._last_update = t
        self.image = self._images[self._frame]
        self._last_update = t

def getFrame(self, screen):
    # Update Frame and Display Sprite
    self.update(pygame.time.get_ticks())
    return self.image 
```

# drools - 使用 drools 和 jbpm 处理保单变体？

> ID：16075372
> 
> 赞同：0
> 
> 时间：2013-04-18T05:47:10.690
> 
> 标签：drools, jbpm, business-rules

我正在尝试建立一个索赔处理系统。保险单将有多种变化（基于与个别客户的谈判）。目的是为每个供应商保留一个基本政策，然后对每个客户应用变化，以确保轻松维护顶级政策（如火灾是否覆盖造成的损坏）。这些策略应该很容易由非技术业务用户创建。

最好的方法是什么？我正在考虑使用 Drools 提出基本规则，然后为每个将使用规则的策略提供者创建 jBPM 流程。Guvnor 用于编写和维护规则和流程。

假设没有人工任务（它只是一组需要触发并丢弃结果的规则），使用 jBPM 是否会是一种矫枉过正？开源世界有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:30:43.457

对于这样的用例，Drools 已经与 jBPM 紧密集成，因此绝对不会过分，它们可以很好地协同工作。jBPM 不仅与人机交互有关，它还可以用于自动处理。

需要注意的是，每个提供者甚至可能没有一个进程，而只有一个（或一小组）进程，并使用规则来处理变化。

# c# - 如何使用客户姓名和年份生成参考编号？

> ID：16075373
> 
> 赞同：0
> 
> 时间：2013-04-18T05:47:11.070
> 
> 标签：c#, string, winforms, int

我想根据客户姓名和出生日期生成一个唯一编号。

如果我的客户姓名是 Chandra shekar，他的出生日期是`28/12/1990`.

我想要类似的东西 `xxxx-1990`

`xxxx`应该是一个应该根据客户名称生成的数字。

如何从字符串值生成数字？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:49:41.517

如果您只需要从字符串生成数字，则可以使用[GetHashCode()](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)：

```
var customerName = "John Smith";
var yourReferenceNumber = customerName.GetHashCode(); 
```

但是请注意，这并不能保证您的号码的唯一性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:58:29.367

如果您需要能够*立即*保证唯一性，这很棘手。任何试图将字符串转换为“小”数（在信息方面总是比原始字符串小）的方案总是会遇到可能的冲突。

所以这真的取决于你的要求。如果您以后需要能够可靠地生成此 ID，然后*纯粹*通过算法提供名称和编号，那么您就有问题了。

另一方面，如果您可以将“姓名、出生日期、生成的 ID”存储在某处的表中，那么您可以从使用某种形式的哈希开始（我不建议使用`GetHashCode`，因为不能保证它会保留随着时间的推移稳定，但一些常见的加密哈希应该没问题）然后在表中查找结果。您也可以使用另一部分来实现唯一性。例如，如果“Fred Blogs”的哈希值是 1234，“Jim Smith”的哈希值也是如此，你可能会得到：

```
Fred Blogs => 1234-0-1990
Jim Smith =>  1234-1-1990 
```

但话又说回来，如果您处于这种情况，您可以考虑只生成一个全局唯一 ID。这一切都是为了在您尝试解决它们之前制定*确切的要求。*正如我所说，您应该放弃“唯一的数字”的想法 - 由于[鸽子原则](http://en.wikipedia.org/wiki/Pigeonhole_principle)，这是注定要失败的。

正如 Habib 提到的，您还需要考虑多个客户具有相同姓名和出生日期的可能性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T05:58:12.247

尝试使用这样的代码

```
var yr = DateTime.Parse("28/12/1990" , new CultureInfo("en-US")).Year;
var custName = "Chandra shekar";
var result = custName + yr ;
Console.WriteLine(result); 
```

希望它会帮助你。

# mysql - 如果我在表中的每一列上放置索引会发生什么

> ID：16075377
> 
> 赞同：6
> 
> 时间：2013-04-18T05:47:21.600
> 
> 标签：mysql, indexing

让我们考虑一下我有一个包含 60 列的表，我需要对该表执行各种查询，并且还需要将该表与其他表连接起来。而且我几乎使用所有行来搜索该表中的数据，包括其他表。该表就像数据库中的主表（如主键）。所以所有的表都与这张表有关。通过考虑上述情况，我可以在表的每一列（60 列）上创建索引，这是一种好习惯吗？

单句：

> ```
> Is it best practice to create index on each column in a table ?
> What might happens if I create index on each column in a table? 
> ```

其中 index 可能是“主键”、“唯一键”或“索引”

请评论，如果这个问题对你们来说不清楚，我会尝试改进这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T05:53:08.733

[MySQL 的文档](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)对此非常清楚（总而言之，在您将在 、 和聚合函数中使用的列上使用索引`WHERE`）`JOIN`。

因此，在表中的所有列上创建索引本质上没有错，即使它是 60 列。索引越多，插入速度越慢，一些更新将是因为 MySQL 必须创建键，但如果您不创建索引，如果在比较和连接中仅使用非索引列，MySQL 必须扫描整个表。

我不得不说我很惊讶你会

1.  有一个 60 列的表
2.  在or子句中使用*所有*`JOIN`这些列，`WHERE`而不依赖于同一表中的任何其他列

...但这是一个单独的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T06:01:01.500

在表中的每一列上创建索引不是最佳做法。

当列用于 where 子句时，索引最常用于提高查询性能。

假设您经常使用此查询：

```
select * from tablewith60cols where col10 = 'xx'; 
```

那么在 col10 上有一个索引会很有用。

请注意，默认情况下，主键上有一个索引，因此当您将表与其他表连接时，您应该使用主键来连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T05:58:18.653

**添加索引意味着数据库必须维护它**，这意味着它必须更新，因此您拥有的写入越多，索引将更新的越多。

开箱即用创建索引不是一个好主意，仅在需要时创建索引（或者当您可以看到将来需要时......只有在非常明显的情况下）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-12T16:18:54.033

在 SQL 中创建更多索引只会提高搜索速度，而插入和更新速度会变慢，并且会占用更多存储空间。

# ios - Xcode UINavigationBar 文本字体和颜色

> ID：16075379
> 
> 赞同：0
> 
> 时间：2013-04-18T05:47:34.690
> 
> 标签：ios, xcode, fonts, colors, uinavigationbar

我想更改**UINavigationBar 标题的***颜色*和*字体*。我如何使用代码或界面生成器来做到这一点？这可能很容易，但我是 xcode 的新手。感谢您的帮助。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:04:53.783

对于编码部分，您可以做的是使用标签启动标题视图。

```
UILabel *myLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 10, 40)];
[myLabel setFont:[UIFont fontWithName:@"Arial" size:12]];
[myLabel setTextColor:[UIColor whiteColor]];
[myLabel setText:@"My text here"];
[**your navigation bar**.topItem setTitleView:myLabel]; 
```**

# download - 如何使用 Git 从 android.googlesourcecode.com 下载特定版本的源代码？

> ID：16075382
> 
> 赞同：5
> 
> 时间：2013-04-18T05:47:58.553
> 
> 标签：download, android-source, git-clone

我想从 下载标签中显示的源代码`android.googlesourcecode`。比如我要下载日历代码

[https://android.googlesource.com/platform/packages/apps/Calendar](https://android.googlesource.com/platform/packages/apps/Calendar)

我还想下载android特定版本标签的代码。例如，`android-4.0.3_r1.1`从以下链接

[https://android.googlesource.com/platform/packages/apps/Calendar/+/android-4.0.3_r1.1](https://android.googlesource.com/platform/packages/apps/Calendar/+/android-4.0.3_r1.1)。

当我从 git 存储库浏览此代码时，它不会显示标记的代码版本。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:36:17.970

所有标签都列在“[所有标签](https://android.googlesource.com/platform/packages/apps/Calendar/+refs)”下的“[日历”页面](https://android.googlesource.com/platform/packages/apps/Calendar/)中。该页面包含.`android-4.0.3_r1.1`

如果您克隆存储库并查找该标签，您也会找到它。例如：

```
C:\prog\git>git clone https://android.googlesource.com/platform/packages/apps/Calendar
Cloning into 'Calendar'...
remote: Counting objects: 80, done
remote: Finding sources: 100% (80/80)
remote: Total 30504 (delta 15730), reused 30504 (delta 15730)
Receiving objects: 100% (30504/30504), 11.16 MiB | 4.61 MiB/s, done.
Resolving deltas: 100% (15730/15730), done.

C:\prog\git>cd Calendar

C:\prog\git\Calendar>git tag|grep 4.0.3
android-4.0.3_r1
android-4.0.3_r1.1
... 
```

从那里，一个简单的`git checkout android-4.0.3_r1.1`将允许您浏览该特定标签的来源。

# java - 删除另一个项目后无法将项目插入数组

> ID：16075385
> 
> 赞同：-1
> 
> 时间：2013-04-18T05:48:03.600
> 
> 标签：java, arrays

我可以从我的数组中删除项目，但是当我尝试插入一个项目时，它会因空指针异常而失败。这仅在删除后发生。插入项目正常工作。先感谢您。

这决定了在哪里插入新项目，以便数组保持有序

```
public int appropriatePosition(Comparable ap){
    int temp = top;
    if(temp == -1){
        temp = 0;
    }
    else
    {
        for(int i = 0; i <= top; i++)
        {
            if(ap.compareTo(sa[i])>0)
            {
                temp = i + 1;
            }
        }
    }
    return temp;
} 
```

这使用在适当的位置中找到的索引

```
public void insert(Comparable a){

    int loc = appropriatePosition(a);
    if(full() == true)
    {
        int expandedSize = sa.length + incrementAmount;
        Comparable[] tempArray = new Comparable[expandedSize];
        for(int i= 0; i < sa.length; i++)
        {
            tempArray[i]= sa[i];
        }
        sa  = tempArray;
    }
    for(int i = top; i >= loc; i--)
    {
        sa[i+1] = sa[i];
    }
    sa[loc] = a;
    top++;
}

public void find(Comparable value2){    
    Comparable value = value2;

    if (empty() == true){
        System.out.println("The array is empty");
        Arrays.fill(sa, null);
    }
    else{
    int bsValue = Arrays.binarySearch(sa,value);
    System.out.println("The index is: " + bsValue);
    delete(bsValue);
    }
    }

// This method deletes a given value from the array

public void delete(int bs){
     int location = bs;   
     Comparable[] tempArray = new Comparable[sa.length -1];
     System.arraycopy(sa, 0, tempArray, 0, location);
     if (sa.length != location){
         System.arraycopy(sa, location +1 , tempArray, location, sa.length - location - 1);
         sa = tempArray;
         print();
     }      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:29:21.820

我找到了。谢谢您的帮助。删除后我忘了减少顶部。

```
public void delete(int bs){
     int location = bs;   
     Comparable[] tempArray = new Comparable[sa.length -1];
     System.arraycopy(sa, 0, tempArray, 0, location);
     if (sa.length != location){
         System.arraycopy(sa, location +1 , tempArray, location, sa.length - location - 1);
         sa = tempArray;
         top--;
         print();
     } 
```

# web - 获取 DISQUS 评论计数

> ID：16075393
> 
> 赞同：4
> 
> 时间：2013-04-18T05:48:23.817
> 
> 标签：web, disqus

我正在尝试从我的[漫画网站](http://www.hittingtreeswithsticks.com/?action=viewimage&site=comics&id=66)上的漫画中获取评论数。例如，漫画 id 66 有 2 条评论。我想获得该计数并将其显示在另一页上。到目前为止，当我按照下面的 disqus 指南进行操作时，它给了我一个带有评论的漫画链接，但没有给我全部评论。

[DISQUS 说……](http://htws.disqus.com/admin/universalcode/#comment-count)

> 附加`#disqus_thread`到`href`链接中的属性。这将告诉 Disqus 查找哪些链接并返回评论计数。例如：`<a href="http://foo.com/bar.html#disqus_thread">Link</a>`。

* * *

但是，如果我的 URL 字符串是这样的，我将如何获得该计数：

`<a href=".?action=viewimage&site=comics&id=66">Link</a>`

所以我的问题是：

*   我会在哪里追加`#disqus_thread`？

*   如何从该漫画 URL 获取评论数并将这些总评论显示在另一页上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-13T16:30:42.103

此处示例：http: [//help.disqus.com/customer/portal/articles/1131783-tutorial-get-comment-counts-with-the-api](http://help.disqus.com/customer/portal/articles/1131783-tutorial-get-comment-counts-with-the-api)

变量

```
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
$(document).ready(function () {
  var disqusPublicKey = "YOUR_PUBLIC_KEY";
  var disqusShortname = "thenextweb"; // Replace with your own shortname

  var urlArray = [];
});
</script>

var urlArray = [];
//...continued from above

$('.count-comments').each(function () {
  var url = $(this).attr('data-disqus-url');
  urlArray.push('link:' + url);
}); 
```

发出 API 请求

```
$('#get-counts-button').click(function () {
  $.ajax({
    type: 'GET',
    url: "https://disqus.com/api/3.0/threads/set.jsonp",
    data: { api_key: disqusPublicKey, forum : disqusShortname, thread : urlArray },
    cache: false,
    dataType: 'jsonp',
    success: function (result) {

      for (var i in result.response) {

        var countText = " comments";
        var count = result.response[i].posts;

        if (count == 1)
          countText = " comment";

        $('div[data-disqus-url="' + result.response[i].link + '"]').html('<h4>' + count + countText + '</h4>');

      }
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-02T16:01:55.603

虽然这是一个旧线程，但似乎没有接受任何答案，所以会添加我的想法，以防它帮助其他人。

在您的 function.php 中添加以下内容：

```
function disqus_count($disqus_shortname) {
    wp_enqueue_script('disqus_count','http://'.$disqus_shortname.'.disqus.com/count.js');
    echo '<a href="'. get_permalink() .'#disqus_thread"></a>';
} 
```

然后在您希望评论计数出现的任何页面上添加以下内容：

```
<?php disqus_count('myshortcode'); ?> 
```

确保将其添加到“循环”中，并将 myexampleblog 替换为您的 disqus 帐户短名称。同样在您的 Disqus 帐户中，您可以看到要使用的措辞，例如“0 条评论”、“1 条评论”、“3 条评论”等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-30T13:00:05.460

如果您在该页面上启用了 Disqus 评论，那么您只需要一个指向该页面的链接，例如

```
<a href=".?action=viewimage&site=comics&id=66">Link</a> 
```

然后你修改`#disqus_thread`

像这样`<a href=".?action=viewimage&site=comics&id=66#disqus_thread">Link</a>`

它让你链接到的 javascript 检查链接页面的评论计数，`#disqus_thread`然后它下面的评论会覆盖你在下面创建的链接

`<a href=".?action=viewimage&site=comics&id=66#disqus_thread">Link</a>`

有类似的东西`1 Comment`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-07T09:14:21.400

我遇到了这个问题，而且很烦人这么久，我终于用这个简单的代码解决了这个问题，我希望在其中显示注释以强制将#disqus_thread 附加到末尾：

```
<a href="<?php the_permalink() ?>#disqus_thread">Comments</a> 
```

# html - 在浏览器中验证 XML 和 DTD

> ID：16075396
> 
> 赞同：0
> 
> 时间：2013-04-18T05:48:46.763
> 
> 标签：html, xml, dtd

我必须对我的 XML 和 DTD 进行验证，我的问题是，如果我删除了在 DTD 中定义为必填字段的 XML 标记会发生什么？它会继续在浏览器中显示 XML 吗？或者标记我一个错误？，或者在他的情况下作为验证这种情况？

附件一 DTD 和 XML

> ```
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE Dispositivos SYSTEM "productosDTD.dtd">
> <Dispositivos>
>     <Dispositivo  id="kos1000" nombreProducto="Cafetera" marca="Oster" precio="275 MXN">
>         <fechaImportacion> 05/04/1992</fechaImportacion>
>         <precioAduana>85</precioAduana>
>         <idPedido>Mtg08042013</idPedido>
>         <nombreAduana>Viva Mexico</nombreAduana>
>         <observacionesProducto> Excelente Estado :D </observacionesProducto> 
>     <fabricanteDispositivo nombre="La Rivera" calle="Av de las Granjas"
>      numero="1230" delegacion="Azcapotzalco" entidadFederativa="DF" 
>      codigoPostal="02230" />
>     </Dispositivo>
> </Dispositivos> 
> ```

和productosDTD.dtd

> ```
> <?xml version="1.0" encoding="UTF-8"?>
> <!--
> To change this template, choose Tools | Templates
> and open the template in the editor.
> -->
> 
> <!--
>     TODO define vocabulary identification data
>     PUBLIC ID  : -//vendor//vocabulary//EN
>     SYSTEM ID  : http://server/path/__NAME__
> -->
> 
> <!-- TODO define your own vocabulary/syntax. Example follows:  -->
> <!ELEMENT Dispositivos (Dispositivo*)>
> <!ELEMENT Dispositivo (fechaImportacion,precioAduana,idPedido,nombreAduana,
>           observacionesProducto,fabricanteDispositivo)>
> <!ATTLIST Dispositivo  
>  id  CDATA #REQUIRED
>  nombreProducto CDATA #REQUIRED
>  marca CDATA #REQUIRED
>  precio CDATA #REQUIRED
> >
> 
> <!ELEMENT fechaImportacion (#PCDATA)>
> <!ELEMENT precioAduana (#PCDATA)>
> <!ELEMENT nombreAduana (#PCDATA)>
> <!ELEMENT  observacionesAduana (#PCDATA)>
> <!ELEMENT  observacionesProducto (#PCDATA)>
> <!ELEMENT idPedido (#PCDATA)>
> <!ELEMENT fabricanteDispositivo (#PCDATA)>
> <!ATTLIST fabricanteDispositivo 
>  nombre CDATA #REQUIRED
> calle CDATA #REQUIRED
> numero CDATA #REQUIRED
> delegacion CDATA #REQUIRED
> entidadFederativa  CDATA #REQUIRED
> codigoPostal CDATA #REQUIRED
> > 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:17:23.703

要验证 XML 文件，您需要一个验证器。我不确定浏览器中是否包含某些内容。如果不是，则将显示 XML，而不注意有效性。

顺便说一句，我更喜欢 XML Schema 来验证 XML 文件。您还需要一个验证器，但您可以更准确地配置它。

# javascript - 使用Java中的Rest webservice在phonegap中上传图像

> ID：16075405
> 
> 赞同：0
> 
> 时间：2013-04-18T05:49:37.360
> 
> 标签：javascript, rest, cordova, jersey, cordova-2.0.0

我正在使用phonegap + rest webservice。下面给出的服务正在与 Web 应用程序测试一起工作。图像文件已上传到本地网络服务器。但是相同的服务在phonegap中不起作用。包括这里的两个代码。

**休息网络服务**

```
 @POST
        @Consumes(MediaType.MULTIPART_FORM_DATA)
        public Response uploadFile(

                @FormDataParam("image") InputStream uploadedInputStream,
                @FormDataParam("image") FormDataContentDisposition fileDetail) {
    System.out.println("entered");
    //some logic .. this method is working good using webapplication ... i tested using html page
    } 
```

**Phonegap 代码**

```
function myDetails()
{

     var options = new FileUploadOptions();
     options.fileKey="file";
     options.fileName=imgByte.substr(imgByte.lastIndexOf('/')+1);
     options.mimeType="image/jpeg";

     var ft = new FileTransfer();
     ft.upload(imgByte, IMGURL, win, fail, options);
     alert("finished calling upload");

    }
function win(r) {
    alert("success");
    console.log("Code = " + r.responseCode);
    console.log("Response = " + r.response);
    console.log("Sent = " + r.bytesSent);
}

function fail(error) {
    alert("An error has occurred: Code = " + error.code);
    console.log("upload error source " + error.source);
    console.log("upload error target " + error.target);
} 
```

新的一些指导

```
 Log cat error :
    04-18 18:30:31.621: E/FileTransfer(9459): {"target":"http:\/\/10.1.6.88:8080\/TodaysAdminAds\/resources\/service\/vendor\/vendorregistration","source":"\/9j\/4AAQSkZJRgABAQAAAQABAAD\/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P\/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P\/wAARCAHgA9QDASIAAhEBAxEB\/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL\/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4 Tl5ufo6erx8vP09fb3 Pn6\/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL\/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3 Pn6\/9oADAMBAAIRAxEAPwDrwOKT8KcenamBuSCeetIQtISR2P4UvY8UnTgD8KADg9aUY5xj8qTp97ilAAXjA goAXv05pDnPGfw7UYpG2qckleOmOKAAZzyPel4BPAHtimjHJUcHnNKQeeAT\/SgBu9yxGwBcZ3dqcThcgqMYycH9KGLbTtUFu27gGhcHnHNAC8 goGeQV5ox8uMDHuKRepAUY65JoAenXp0p2MdqZkD1 uKcM4PQCgBDzSdTz HFID1yCCPWloAX\/JxSd \/0o7HFA5PagBMkfew2e4HSjHOePalHB7Y lB6cAUAN 7IRgYIzzShhjgfpTZAOG7rz\/jR8wJIIx2oAVWycHoehGafuHbFQ YVkwXQK3IGTmhmYPx8yHqehU0ASbz7rj2pc5wQc9iKZgA\/KO\/rSk7TjI nSgBd5Iz2pQx56YqNtjL8wDDcOMZANKQGAODx0PTFAADjPLAtzjrilB2hVLbj2Peg5OQTTMkkFUc47GgBGUy5XcQoyCw4P4VIkeBjczetAfuYyF6HnOPypWZXG3n8M0AGwZBAOR3x2pcKDkLzSZzztP0peOuDmgA3HPTikJVsjkHv2NGQxHzcHpt6Up4BI5PX3oAX3\/nSeucflS49KMHHQUAAPbAH4UYye9HI n0o5oAT2HX35xS9ucGk5z22 nehhkdTu9QKADGfvY\/wNBA6nr dLn2pMDrzQAA5OOD7UEAkHBH8qU4x1NJg5I7GgAJA6sCPek25JfJxjGOSKNuMYX6ECl5x0J\/GgABJ6g9aUcA4BpvJ6Yx tKMqB0460AKD1G0jnvRgH1pGJHGcE9OKUHPIxQAbcc4ANHfjNIASSDnHUEUEeh\/EigBEwM4z PNKMheOcd6MFcnGT6CgqMjCn\/639aAFJPFGeaaB1GOD0OKMAn3\/AJ0AO6cHJoyAOf5UmOTx PejGOR\/KgBf4vagjIpMtjjafQ4pfU7Rnp0oAAOpyT9aQl9uQAT2B4oyOeCPwzR\/nOO1ADgfaj1oAPsaPmGcgfhQAvakI n FL0pucnqRQAc9QCaX86b3wcYpefu\/LntQAo9xil474pBnvS\/gOKAEPHfmjkA8DrxQCM\/d\/HHWk\/AigBeh7Uo lIOexpR FAB26Uh lLSdz60AKOKWkGMe1KMUAHaijH55oxQAd6MfhQDSUAFLTaU0AIKXFA4ooAWikooAWkpaSgA6UUUUAGKDRRQAdM0nQd6XHvSdO1ACchsdj7UvJHTFJzmlPvigA79qTAPv60dOo6ULjqM4oAXFFHTPagflQAfgKB1Pp2o\/OgD0xQAc9sUnTrmjOBS0AGeDxzRR VA69KAEAwT70tFJ FAByDgj8aXvR2xikHJ6UALQPoRSYwKMDrigAxSYx7 9LjtmjB9qAG89MH60UFQ3XqOeKMcc8UARl1U43KvtRT8L\/cB96KAH4HqaTb VAINKeM4FACYwKQZHc0ZyucEex7Ucc0AA78n\/CjPHT9KPwoBI9KABjjH6UZK9ce2KMn0pPzzQAhUs\/P3D\/DjpQB2xn8KUAjOME\/lQPrj2xg0AJs5zk 9KOPUmnYPpxQTgcHH4UAJgjnnHpQOe2PTNJk56c445oDEHBUknrjkUAO598e9LnIwR7dKaT6j8KQcZx07DjigBwBHPWkwc8\/lQWweKZu9zQBJ7f0poLbzwMdjnmomuYl4eVB9WApjX1so4njz9QaV0i1CT2RZwOBxntQO46fhVdLu1YcTx\/niplKSfdYNj0NCaYnGS3Q7GT lMjAUFB0XjFP6Dk80zEgfIACkcimSK5TIQg5PQd\/zpFKogATBPXv vekCg5R1b3BOaUOCcDdnt8vH\/wCqgBeQpPAOOhGeaTaDgkY45Hak8spyZC3qDijaFXOOOo46GgBrmRiPLKY6ZIOfwxTyCCWYsEAwRjNLtxjHB g5pm4cjflkPPp\/n2oAd5p3hQjezEYBP e9KCw 8CfXnpTvofwpAZNxARSB6Nz WKADJzwCPp0o8xsjIAA6ginBucbWH5YoYrjk4 tAB5inrn8qCygc\/oKZHIMbW2sBwGAp U7AfWgBVC4 XgUmV37QRu649qRVXqBg0FegJPqDQA7bnjg\/hR0z1zSAcUoz9PrQADJHoaPypf50ZoAT8B NJ68Uvv3o negBBx90j6gUpHvz6igHtke4pRx1FACdKQjPv8A0pfpmjOaADnsKToeBxS49qCPr HagBOcZJPH60ueDgfQUnXjeOenrRyOTjH9aAEDDA6HHenH6HPrTSxAJVc\/TApQR054oAXtnBo4pPl6de\/0o69OfT0oAFXb06dvahTjKjOfU0ppOCcenvQAufUY tJz32n0xSgCjH1oAb8vXaKCwAO0n8s0pBz0\/Ck5z3 lAACSMq4HQ8ilGRkdfpSdQeD9cUHjJAJxzx1oAUMe4x6UoY9cHH0pgJBzk5IHUU4FiOwP0oAUkYJA59KMgDr FJ859B70vzDqD HSgAHXg4B6cUhznoCPpRu4GQfyozjjGBQAexXijKjJAOB1NJjAGTx346048EGgBA2DgkZ9ulO57kCkP4flSDB 6BQA8ZPcU0nHWjHqOKCAM4B lAC9e1KPc0i\/U0vSgAyKToaM460vrj VACD9P5UtA\/GgdaAD8 KUUUUAIeKTHvS0lAC0UmKWgAooooAKMUUtABSUtFACUYpaSgAxRRRQAdqT14paTOAaAExjkj8aXFHQ0UAA\/pQfWge1H6UAGKM8cCkI7jr6UvPX8xigAB4pM\/hj1oOe3WjaOpx7UAL27UZpB0OOaX dABSHOOAT7Uv4Unvg\/T0oAXt0xR lNzxnGaUYHHJoAWgYopP89KAEYAcnPFLjtR NIRnByRjpQAtHSjpSdzxzQAdz0\/KmkgE5IzQQxIIPGecUuBnIXBPX3oATn 6fyopNrZPzcZ4GOlFADvpxS5HqM0mMHgUpB7UAJjsBTTwTngdqdikOM4zzQAflmlAyOf5UmewPXpxSK\/B4Kn0NADj6dDRwOgo79qTtgnHXnuKAEyC3APoTjOKACvIyfU9qOO3APfFCqFyAe\/ftQA4gntS845\/lTcBsqVyp4P0pk 
```

# php - 必填字段缺失。PHP 贝宝 REST API

> ID：16075411
> 
> 赞同：2
> 
> 时间：2013-04-18T05:50:02.453
> 
> 标签：php, paypal, paypal-sandbox

我目前正在尝试使用 PHP PayPal REST API。但是，似乎我无法通过事务传递项目列表，因为“缺少必填字段”。

```
$item = new Item();
$item->setQuantity("1");
$item->setName("stuff");
$item->setPrice("305.00");
$item->setCurrency("USD");

$amount = new Amount();
$amount->setCurrency("USD");
$amount->setTotal("305.00");

$item_list = new ItemList();
$item_list->setItems(array($item));

$transaction = new Transaction();
$transaction->setAmount($amount);
$transaction->setDescription("This is incredibly awesome.");
$transaction->setItem_list($item_list); 
```

[我已经按照文档 ( https://developer.paypal.com/webapps/developer/docs/api/#common-objects](https://developer.paypal.com/webapps/developer/docs/api/#common-objects) )中的“通用对象”填写了 Paypal 文档认为“必需”的所有字段。但是当我尝试重定向到 Paypal 以开始交易时，我被抛出了这个错误：

> [例外：访问https://api.sandbox.paypal.com/v1/payments/payment](https://api.sandbox.paypal.com/v1/payments/payment)时获得 Http 响应代码 400 。string(269) "{"name":"VALIDATION_ERROR","details":[{"field":"transactions[0].item_list.items[0].sku","issue":"必填字段缺失"} ],"message":"无效请求 - 查看详细信息","information_link":" [https://developer.paypal.com/docs/api/#VALIDATION_ERROR](https://developer.paypal.com/docs/api/#VALIDATION_ERROR) ","debug_id":"9e292fc3a312d"}"

当我注释掉 $transaction->setItem_list($item_list); 时，它可以正常工作。所以很明显，项目列表或项目中缺少某些东西。但我看不出是什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:55:16.750

错误指向您：

```
transactions[0].item_list.items[0].sku 
```

这个文件似乎是必需的，我认为它只需要将 sku 放入项目数组中，所以让我们这样做： **尝试添加：**

```
$item->setSKU("CODEHERE"); 
```

**后**

```
$item->setCurrency("USD"); 
```

# codeigniter - 如何使用 Codeigniter 面包屑助手删除动态网址面包屑

> ID：16075419
> 
> 赞同：0
> 
> 时间：2013-04-18T05:50:33.117
> 
> 标签：codeigniter, breadcrumbs

我正在使用来自[https://bitbucket.org/cahva/codeigniter-autocrumb/src/59a0dbe8aba2/helpers/breadcrumb_helper.php](https://bitbucket.org/cahva/codeigniter-autocrumb/src/59a0dbe8aba2/helpers/breadcrumb_helper.php)的 codeigniter 面包屑助手来设置一个简单的面包屑。我的网址之一如下，

[http://example.dev/jobs/c0001/j0002](http://example.dev/jobs/c0001/j0002)

这里`c001`代表一个客户，`customer_id`两个代表`j0002`工作，并且是动态的。此页面的面包屑导航如下所示，`job_id``0001``0002`

```
Home    › Jobs  ›  C0001 › J0002 
```

但我需要它

```
Home    ›  Jobs 
```

是否可以修剪最后两个（动态）部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:06:04.770

```
<?php echo set_breadcrumb('',array($this->uri->segment(2),$this->uri->segment(3))); ?> 
```

试试看让我知道它是否有效

# javascript - 如何将 JavaScript 侦听器添加到 PrimeFaces Ajax 事件

> ID：16075421
> 
> 赞同：3
> 
> 时间：2013-04-18T05:50:51.560
> 
> 标签：javascript, ajax, primefaces, listener

我想通过javascript方法收听pickList传输事件，

侦听器适用于 java bean：

```
<p:pickList value="#{pickListBean.cities}" var="city" 
itemLabel="#{city}" itemValue="#{city}">
<p:ajax event="transfer" listener="#{pickListBean.handleTransfer}" />
</p:pickList> 
```

但这不起作用：

```
listener="myJavaScriptMethod(event)" 
```

有没有办法像上面那样监听事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T06:13:08.770

侦听器是服务器端，在客户端您可以使用 oncomplete、onsuccess、..（您的选择）：

```
 <p:ajax event="transfer" oncomplete="js_function()" />
    <p:ajax event="transfer" onstart="js_function()" />
    ... 
```

# codeigniter - 超大和codeigniter连接失败

> ID：16075422
> 
> 赞同：0
> 
> 时间：2013-04-18T05:50:53.927
> 
> 标签：codeigniter, supersized

我在使用 codeigniter 和 supersized 时遇到了一个奇怪的问题。该插件工作正常，我可以从根目录加载它，但是当我在 MVC 工作流程中使用它时，它似乎没有加载图像。

我正确链接的图像，我可以从代码中看到它应该在那里。不过，我唯一看到的是黑屏。

我的代码是标准的核心示例，仅此而已。一切都正确链接，但仍然没有骰子。

控制器

```
function test(){
        $data['img'] = base_url()."../_data/images/bg.jpg";
        $data['main_content'] = 'core_view';
        $this->load->view('/includes/templatepop_view',$data);
} 
```

HTML

```
 ...
    <link rel="stylesheet" href="<?=base_url();?>../_data/css/supersized.core.css" type="text/css" media="screen" />

        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js"></script>
        <script type="text/javascript" src="<?=base_url();?>../_data/js/supersized.core.3.2.1.js"></script>

        <script type="text/javascript">

            jQuery(function($){

                $.supersized({
                                    slides  :   [ {image : '<?= $img;?>'} ]
                });
            });

        </script>

    </head>

<body>

    <div id="content">

    </div>
    ... 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:55:18.870

问题是我用于标题的模板。基本上它加载了两次jquery和一堆其他的东西，所以干扰了超大的脚本。我会把它留给任何可能有类似问题的人。

# android - 在计时器上运行许多 Asynctask(countdowntimer)

> ID：16075428
> 
> 赞同：0
> 
> 时间：2013-04-18T05:51:48.273
> 
> 标签：android, android-asynctask, countdowntimer

我创建了一个`CountDownTimer`这样的

```
public class MyCountDownTimer extends CountDownTimer {
        public MyCountDownTimer(long startTime, long interval) {
        super(startTime, interval);
        }

        @Override
        public void onFinish() {
        //timeout
        }

        @Override
        public void onTick(long millisUntilFinished) { 
         PaymentAsyncTask paymentTask = new PaymentAsyncTask(this);
         paymentTask.execute();

        }
} 
```

在`onPostExecute`中`paymentTask`，我正在某些特定条件下进行一些操作。

基本上，我正在从某个网站检查，经过一段时间（比如 3 秒）后，任务是否已完成。

**现在，如果互联网运行得很快，这段代码就没有问题，**

**如果任务完成，我取消 onPostExecute 中的计时器并做进一步的工作。**

但是如果互联网运行**缓慢**，这意味着响应没有在 3 秒内出现， `onPostExecute`被多次调用（**在其中多次执行代码**），而任务已经完成，只是由于服务器我得到了迟到的响应问题/互联网延迟。

我如何确保里面的代码`onPostExecute`只被调用一次？

可能的方法：

1.  取一些静态标志变量，使其为真并检查其他变量......

我正在寻找一些可靠的解决方案，也许android提供了一些机制来**同步**这个..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:52:47.337

您实际上可以检查 的状态，`AsyncTask`并且根据您可以执行逻辑的当前状态。

请`AsyncTask`在课堂上将您的对象带到全球范围内`Activity`。

代码片段：

```
public class MyCountDownTimer extends CountDownTimer {
    PaymentAsyncTask paymentTask = null;

      public MyCountDownTimer(long startTime, long interval) {
            super(startTime, interval);
      }

      @Override
      public void onFinish() {
        //timeout 
      }

      @Override
      public void onTick(long millisUntilFinished) { 
        if(paymentTask == null) {
            android.util.Log.i("TAG", "Null");
            paymentTask = new PaymentAsyncTask(this);
            paymentTask.execute();
        } else {
            //Depending on your situation take appropriate action
            android.util.Log.i("TAG", "Not Null");
            if(paymentTask.getStatus() == (AsyncTask.Status.PENDING)) {
                //Indicates that the task has not been executed yet.
                android.util.Log.i("TAG", "Pending");
            } else if(paymentTask.getStatus() == (AsyncTask.Status.RUNNING)) {
                //Indicates that the task is running.
                android.util.Log.i("TAG", "Running");
            } else if(paymentTask.getStatus() == (AsyncTask.Status.FINISHED)) {
                //Indicates that AsyncTask.onPostExecute has finished.
                android.util.Log.i("TAG", "Finished");
            } 
        }
      }
} 
```

我希望这可以帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:03:09.203

[请根据http://daniel-codes.blogspot.in/](http://daniel-codes.blogspot.in/)检查它对您的帮助...

**您的 AsyncTask 正在运行吗？**

关于 AsyncTask 的简短说明：在 4.0 之前（也可能在 3.0 之前，但我没有测试过），**AsyncTask.getStatus()**可能会骗你。如果 AsyncTask 被取消，它不会正确设置状态；相反，它会在**AsyncTask.onCancelled()**完成后保持 RUNNING 很远。

我最初的想法是使用**AsyncTask.isCancelled()**，但是如果您尝试判断 AsyncTask 是否是从另一个线程完成的，您可能会遇到一些并发问题。取消的 AsyncTask 不一定会在您取消它的那一刻结束；事实上，如果您没有在 doInBackground() 中定期检查**isCancelled()** **，**那么您可能会在取消后让 AsyncTask 运行一段时间。

**我的解决方案是在onCancelled()**的末尾设置一个布尔值，这将向系统指示您已完成执行。这是一个编写 AsyncTask 的示例，您可以在其中正确知道它何时完成：

```
private class MyAsyncTask extends AsyncTask {
  private boolean mFinishedCancel = false;

  protected Void doInBackground(Void... params) {
    return null; // You'd normally do something here
  }

  protected void onCancelled() {
    mFinishedCancel = true;
  }

  public boolean isFinished() {
    return getStatus() == Status.FINISHED || mFinishedCancel;
  }
} 
```

# c# - 绑定通用列表中的项目并序列化

> ID：16075431
> 
> 赞同：0
> 
> 时间：2013-04-18T05:51:55.157
> 
> 标签：c#, asp.net, .net, json.net, generic-list

**这是我的代码：**

```
List<Test> list = new List<Test>();
for (int j = 0; j < dss.Tables[0].Rows.Count; j++)
{
    list.Add(new Test(dss.Tables[0].Rows[j]["PSet"].ToString(), 
                      Convert.ToInt32(dss.Tables[0].Rows[j]["Score"].ToString())));
}
StringBuilder data = new StringBuilder();
JavaScriptSerializer json = new JavaScriptSerializer();
json.Serialize(list, data);
hdlineData.Value = list.ToString(); 
```

但如果我没有正确绑定列表，它不会序列化我的列表。请建议我如何以 Json 格式绑定列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:12:38.170

您可以`[Serializable()]`在自定义类上使用该属性，然后：

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
var Json = serializer.Serialize(myObject); 
```

要忽略您正在序列化的对象中的特定属性，只需将`[NonSerialized]`属性放在它们上面。

我只是从[这里推荐的](https://stackoverflow.com/questions/7307100/servicestack-text-how-to-serialize-class-to-json)

# java - 如何存储动态列基于表生成的值并传递给查询字符串

> ID：16075434
> 
> 赞同：1
> 
> 时间：2013-04-18T05:52:17.033
> 
> 标签：java, jsp

我的标题可能不够清楚，所以让我先解释一下我的情景。我有一个下拉列表，它从表中获取表列表。现在，如果我选择其中一张表，它将通过以下代码显示所有列：

```
<%          
String columnsql = "SELECT COLUMN_NAME as ColumnName FROM information_schema.columns " 
+ "WHERE  table_name = '"+ TableName + "' ORDER  BY ordinal_position";
PrintDebug.println("Table:" + TableName);
ResultSet myRs = aDbManager.retrieveRec(columnsql);

int count =0;
//String[] arraycolumn;
//boolean[] arraycheckbox;
//String[] arraysearch;
while (myRs2.next()) {

    columnname = myRs2.getString("ColumnName");
    //PrintDebug.println("Column"+count+": "  + columnname);        
%>
<label id="lblcolumnname<%=count %>" value=<%=columnname%>> <%=columnname%></label> 
&nbsp;
&nbsp;
<input id="chkcheckbox<%=count %>" type="checkbox" value=<%=columnname %>>
&nbsp;
&nbsp;
<input id="txtsearch<%=count %>" type="text">
<br>
<%
    count++;
}
myRs2.close();
%> 
```

所以上面的代码将生成我选择的表中的每一列。我使用javascript通过onchanged刷新。

这里的问题：我应该如何存储列，不管复选框是否被选中，以及查询字符串中的搜索文本框。

抱歉我的英语很差，很困惑我应该在这个动态生成和存储上使用的逻辑传递给其他页面/servlet以处理复选框的查询字符串是否被选中或不决定是否显示该列，搜索文本框是"" 或得到过滤的价值。

正在考虑通过数组解决方案，在动态方面是否有可能？因为我必须在另一端检索它来处理查询。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:12:59.783

据我了解，如果选中列，您希望列名及其各自的值在提交表单时做一些事情。

添加`name`到复选框和文本字段。

```
<input id="chkColumn<%=count %>" name="columnNames" type="checkbox" value=<%=columnname %>>
&nbsp;
&nbsp;
<input id="txtSearch<%=count %>" name="val_<%=columnname%>" type="text"> 
```

此外，将表名添加为隐藏参数。所以，它也会被提交

```
<input type="hidden" name="tableName" value="<%=TableName%>" /> 
```

现在，当您的表单在 Servlet/JSP 中提交时（不推荐）。

您可以访问所有选中的复选框

```
String tableName = request.getParameterValues('tableName');
String[] colNames=request.getParameterValues('columnNames'); 
```

处理 Array 中的每个项目并获取每列的搜索值，例如

```
String strPrefix = "val_";
String strVal = strPrefix + colNames [0]; // you will get value for each column 
```

# javascript - Contenteditable / jQuery / Javascript - 从光标/插入符号到段落末尾选择文本

> ID：16075438
> 
> 赞同：0
> 
> 时间：2013-04-18T05:52:27.990
> 
> 标签：javascript, jquery, contenteditable

当按下回车键时，我正在尝试创建一个新段落。我可以做到，而且效果很好。但是现在说光标是段落的中间 - 当按下回车时，我试图选择从光标位置到段落末尾的范围。从现有段落中删除它并将其添加到下面的新段落中。

我正在尝试修改此处答案中的代码：[Contenteditable - extract text from caret to end of element](https://stackoverflow.com/questions/5740640/contenteditable-extract-text-from-caret-to-end-of-element)

```
$(document).on('keydown', 'p[contenteditable="true"]', function(e) {
    if(e.which == 13) { //new paragraph on enter/return
        e.preventDefault();
        var sel = window.getSelection();
    if (sel.rangeCount) {
        var selRange = sel.getRangeAt(0);
        var blockEl = selRange.endContainer.parentNode;
        var range = selRange.cloneRange();
            range.selectNodeContents(blockEl);
            range.setStart(selRange.endContainer, selRange.endOffset);
            remainingText = range.extractContents();
        $(this).after('<p contenteditable = "true">'+ remainingText +'</p>');
        $(this).next('p').focus();

    } 
```

我没有取得太大的成功——主要是因为我对范围、节点和选择对象缺乏了解。有人能够解释这些对象是如何工作的，以及我如何调整上面的答案以适应我的情况。

[http://jsfiddle.net/UU4Cg/17/](http://jsfiddle.net/UU4Cg/17/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:39:54.373

子字符串版本：

```
$(document).on('keydown', 'p[contenteditable="true"]', function(e) {
    if(e.which == 13) { //new paragraph on enter/return
        e.preventDefault();
        cursorIndex = window.getSelection().getRangeAt(0).startOffset;
        textBefore = $(this).text().substring(0, cursorIndex);
        textAfter = $(this).text().substring(cursorIndex);
        $(this).text(textBefore); 
        $(this).after('<p contenteditable = "true">'+ textAfter +'</p>');
        $(this).next('p').focus();

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:43:42.220

[这是从另一个答案](https://stackoverflow.com/questions/11111704/rangy-js-jquery-split-node)改编的一些代码，以消除 Rangy 依赖项：

```
var sel = window.getSelection();
if (sel.rangeCount > 0) {
    // Create a copy of the selection range to work with
    var range = sel.getRangeAt(0).cloneRange();

    // Get the containing paragraph
    var p = range.commonAncestorContainer;
    while (p && (p.nodeType != 1 || p.tagName != "P") ) {
        p = p.parentNode;
    }

    if (p) {
        // Place the end of the range after the paragraph
        range.setEndAfter(p);

        // Extract the contents of the paragraph after the caret into a fragment
        var contentAfterRangeStart = range.extractContents();

        // Collapse the range immediately after the paragraph
        range.setStartAfter(p);
        range.collapse(true);

        // Insert the content
        range.insertNode(contentAfterRangeStart);

        // Move the caret to the insertion point
        range.setStartAfter(p);
        range.collapse(true);
        sel.removeAllRanges();
        sel.addRange(range);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-27T06:01:30.583

试试这个。

```
 function placeCaretAtEnd(el) {
        el.focus();
        if (typeof window.getSelection != "undefined"
        && typeof document.createRange != "undefined") {
            var range = document.createRange();

            range.selectNodeContents(el);
            range.collapse(false);
            var sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);
        } else if (typeof document.body.createTextRange != "undefined") {
            var textRange = document.body.createTextRange();
            textRange.moveToElementText(el);
            textRange.collapse(false);
            textRange.select();
        }
    } 
```

# spring-ws - 如何使用 Spring WS Client 在服务器端获取 Soap Header

> ID：16075444
> 
> 赞同：2
> 
> 时间：2013-04-18T05:53:27.563
> 
> 标签：spring-ws, soapheader

我是 Web 服务开发的新手。我正在使用 Spring WS 开发 Web 服务。我需要在请求中添加soap标头，所以下面是我在客户端在请求中添加标头的代码。

```
 getWebServiceTemplate()
                .sendSourceAndReceiveToResult(source, 
                    new WebServiceMessageCallback(){
                        public void doWithMessage(WebServiceMessage message) throws IOException, TransformerException{
                            SaajSoapMessage soapMessage = (SaajSoapMessage) message;
                            SoapHeaderElement messageId =  soapMessage.getSoapHeader().addHeaderElement(new QName("http://www.w3.org/2005/08/addressing", "messageId", "wsa"));
                            messageId.setText("Test Security Token");
                        }
                },result); 
```

**如何从服务器端类的请求中获取此标头？**

我已经使用 Eclipse Axis 插件来生成我的 wsdl 到类骨架。我正在使用 Spring 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:28:27.517

我得到了解决方案。我在服务器骨架的 BindingImpl 方法中编写的代码：

```
MessageContext messageContext = MessageContext.getCurrentContext();

SOAPHeader header = (SOAPHeader) 
    messageContext.getCurrentMessage().getSOAPHeader();

header.getChildElements(); 
```

它将为您提供 SOAPHeaderElement 列表。从中您可以获取元素名称及其值。

谢谢大家... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:32:02.983

嗯，问题是，您使用的是哪个版本的 Spring- **WS ？**您要添加的标头属于 WS-Addressing 规范，对吗？我知道 Spring-WS 也直接支持 WS-Addressing。最好尽量使用Spring的支持，不要干扰消息头（虽然这也是可以的）。

# android - 多任务网络操作android

> ID：16075445
> 
> 赞同：0
> 
> 时间：2013-04-18T05:53:29.353
> 
> 标签：android, performance, network-programming, android-asynctask, android-service

我想知道同时执行多个网络任务的最佳决策是什么。我的情况如下：-我的列表视图上有几个单词（最多 20 个）。我想同时搜索所有这些单词，同时在我的屏幕上显示“加载”进度对话框。现在，我希望操作尽快完成。

我在想两件事：- i。为每个请求生成几个异步任务。ii. 使用服务。

请帮我做决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:55:57.223

您可以使用 Executor 来运行多个任务。

[http://developer.android.com/reference/java/util/concurrent/Executor.html](http://developer.android.com/reference/java/util/concurrent/Executor.html)。

还要在下面的链接中检查 ExecutorService

[http://developer.android.com/reference/java/util/concurrent/ExecutorService.html](http://developer.android.com/reference/java/util/concurrent/ExecutorService.html)

asynctask 的替代方案是 RoboSpice。异步运行。可以处理多个香料请求。在 UI 线程上更新 UI。有关更多详细信息，请查看以下链接

[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)

编辑：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

检查执行顺序主题

从上面的链接引用

如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])

**从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。**

# google-apps-script - 如何保护 Google 电子表格中的 Apps 脚本代码？

> ID：16075446
> 
> 赞同：40
> 
> 时间：2013-04-18T05:53:34.947
> 
> 标签：google-apps-script, google-sheets

我已经使用脚本编辑器为我的 Google 电子表格编写了一些代码。

我想与我的客户分享这个电子表格，但我不想分享我编写的代码。

此代码向我的电子表格添加了一个菜单，其中包含有用的功能，当我的客户打开此电子表格并应用以下条件时，这些功能应该工作/运行：他们不应该看到它的代码。

使用 Excel 很容易，但使用 Google 电子表格我不知道。. 我在谷歌上搜索了很多，但他们都给出了如何共享电子表格的想法。例如在“查看”模式下，但在这种情况下会出现问题：我的菜单功能（添加菜单）是“onOpen”并且在我的客户打开它时不会启动。

如何在 Google 电子表格中实现这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2018-01-03T17:24:43.520

# 简答

将您的脚本作为编辑器插件或 Google Workspace 插件发布[。](https://developers.google.com/apps-script/add-ons/publish)请记住，您可以将其设为私有，方法是选择不公开或仅对您的 G Suite/Google Workspace 组织可用。

# 解释

附加组件是在 2014 年添加的。这比使用库更好，因为您的附加组件不会共享任何内容。

请注意

*   无法使用 Chrome 开发者工具或其他类似软件访问 Google Apps 脚本服务器端代码。
*   附加组件有一些限制，请仔细研究它们，因为这种替代方案可能不适合您。
*   如今，附加组件需要 Google Cloud 项目和 oAuth 同意屏幕。如果加载项将与外部用户共享，则需要 oAuth 验证和应用审查。

如果您不适合作为附加组件发布，您应该重新考虑您的解决方案，考虑使用 Web 应用程序，使用 Apps Script API 或 Google Sheets API。

# 参考

*   [发布后从我的谷歌电子表格插件中获取代码](https://stackoverflow.com/q/37806779/1595451)
*   [Google Apps 脚本插件源代码/安全性](https://stackoverflow.com/q/32878136/1595451)
*   [为 Google 文档和表格构建插件](https://gsuite-developers.googleblog.com/2014/03/add-ons.html)
*   [为 Google 表格、文档、幻灯片、表单和 Gmail 开发插件](https://developers.google.com/apps-script/add-ons/)
*   [为 G Suite G+ 社区开发插件](https://plus.google.com/communities/117193953428311185494)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T09:06:01.853

使用 Library[文档](https://developers.google.com/apps-script/guide_libraries?hl=en)解释了如何使用它，还有一些关于[这个主题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1355)的[有趣帖子](https://stackoverflow.com/questions/13741173/source-code-of-libraries-used-by-webapps-visible-to-everybody)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-27T20:58:13.300

制作一个仅包含客户端脚本的特殊库文件。您的客户端必须至少具有读取级别的访问权限。所以他可以看到你的剧本。删除您的脚本并在该文件中创建一个新的无辜脚本并将其保存为新版本。现在您的客户只能看到这个新脚本。因为他的应用程序仍在使用旧版本的库，所以原始脚本将照常完成他的工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-31T12:11:46.180

1.  创建 2 个库；一个是虚拟的（我称之为 Lib1），另一个是包含所有密码的核心库（我称之为 Lib2）。
2.  将 Lib2 作为库添加到 Lib1，并在其中使用在 Lib2 中完全实现的必要方法。
3.  公开共享这两个库并将其权限设置为查看者。
4.  **从Lib1的分享设置页面，有一个齿轮符号。确保未选中以下选项“查看者和评论者可以看到下载、打印和复制的选项”**
5.  将 Lib1 添加到客户的脚本（可能是电子表格脚本）。
6.  以编辑者或查看者的身份分享您客户的脚本。

如果客户可以通过从其脚本的 Resources/Libraries 菜单访问它来获取 Lib1 ID，他将无法访问 Lib1 的 Resources/Libraries 菜单。由于步骤 4 中未选中的选项，他也无法制作 Lib1 的另一个副本，从而使他无法看到 Lib2 的 ID。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-11T17:53:24.890

[这里](https://www.quora.com/Is-there-a-way-to-hide-tabs-from-certain-viewers-in-Google-Sheets)有一个类似的问题。那里接受答案。

您可以创建一个独立的应用程序脚本项目。然后从您的谷歌工作表脚本编辑器调用具有适当参数的独立应用程序脚本项目功能。这样，您在独立项目中的秘密将受到保护。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-27T14:09:14.793

除了脚本编辑器窗口中“发布”菜单下列出的选项外，以下 3 个选项还可以使代码对开发人员保密。

选项 1：
要创建 3 个文件：
1.1 接收用户输入的电子表格，用作用户界面，并与用户共享。
1.2 一个独立的库脚本文件，用于接收来自 UI 电子表格的输入。
1.3 一个独立的私有脚本文件，用于处理库文件接收到的数据。

[选项 1 电子表格](https://docs.google.com/spreadsheets/d/1rBHnIm0kED9H7Zcqe-q7GcbfLiV9PecXyCeFJbm_MNk/copy#gid=0%22)

作为此选项的参考，请参阅上述链接中的电子表格。
单击“提交”后，电子表格 ID 将发送到库脚本文件，并授予开发人员编辑权限。然后私有脚本文件打开文件并处理输入。

选项 2：
要创建 5 个文件
2.1 用作登录屏幕的电子表格。这是与用户共享的。
2.2 作为包含数据的实际应用程序的电子表格。一个用户界面。成功登录后，此电子表格可供用户使用。用户从此工作表中注销应用程序。
2.3 维护用户登录状态的电子表格。这是开发人员私有的。
2.4 一个库脚本文件，用于更新上一步创建的电子表格中用户的登录状态，并更改对私有脚本文件的访问权限。此脚本文件作为库资源包含在登录电子表格和用户界面电子表格中。
2.5 处理在用户界面表中输入的数据的库脚本文件。此脚本文件包含开发人员想要保密的代码。此文件仅作为库资源包含在用户界面电子表格中。

[选项 2 电子表格](https://docs.google.com/spreadsheets/d/1M8a_FdElZv1Oibt1sUBIy2SB94XJhe3ZFYaDTuz8gjU/copy?usp=sharing)

作为此选项的参考，请参阅上述链接中的电子表格。
当用户单击“开始”按钮时，用户在更新电子表格中的单元格值后登录到应用程序 2.3。包含私有代码的库脚本文件在使用 addViewer 方法成功登录后设置为可共享。应用程序的链接被呈现给用户并且用户在“登录”时与应用程序交互。当用户从应用程序注销时，将调用 removeViewer 方法再次将脚本文件设为私有。
在此选项中，用户在使用应用程序时可以访问私有代码文件。该文件可以通过使用计时器、脚本触发器、提示、警报等来保密。

在我的两个电子表格中，我使用设置为每分钟运行一次的基于时间的触发器来处理应用程序。这可能会导致输出延迟。触发器是在服务器端而不是在客户端创建的。

选项 3：私有共享文件夹

2 文件将被创建：
3.1 接收用户输入的电子表格，用作用户界面，并与用户共享。
3.2 用于处理电子表格的独立私有脚本文件。

请参阅此链接了解[如何创建私人共享文件夹](https://support.google.com/drive/thread/8347046?hl=en&msgid=8434738)。在此选项中，用户看不到任何脚本。即使是共享电子表格也可能不包含代码。

# azure - 从 tfs 预览部署到 Windows Azure 云服务时出错

> ID：16075450
> 
> 赞同：3
> 
> 时间：2013-04-18T05:53:44.227
> 
> 标签：azure, tfsbuild

我已按照以下链接中描述的步骤创建从 tfs 构建到 Windows azure 的持续交付： [https ://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/](https://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/)

tfs 无法部署到 azure 云服务的问题并给我以下错误：

```
An attempted http request against URI https ://management.core.windows.net/...-1b8d-49ae-9d78-.../services/hostedservices/myhostedservicename/deploymentslots/Staging returned an error: (400) Bad Request.
Additional Exception Information:
Error Code: BadRequest
Message: The certificate with thumbprint 96a.... was not found.

The Create Deployment operation threw an unexpected exception.
The deployment failed. Check the logs for exceptions that may have caused this failure.

Exception Message: An attempted http request against URI https: //management.core.windows.net/474...f4/services/hostedservices/myhostedservice/deploymentslots/Staging returned an error: (400) Bad Request.

Additional Exception Information:

Error Code: BadRequest

Message: The certificate with thumbprint 6789... was not found. (type AzureHttpRequestException)

Exception Stack Trace:    at System.Activities.Statements.Throw.Execute(CodeActivityContext context)
   at System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor executor, BookmarkManager bookmarkManager)
   at System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor executor, BookmarkManager bookmarkManager, Location resultLocation) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-02T01:25:41.727

我能想到两件事，这可能是我的头等大事：

1.  您的服务配置有一个证书，您需要在部署之前将其上传到云服务。
2.  当您从 azure 管理门户设置持续部署时，它会创建证书并将证书上传到您的 azure 订阅以将您的 TFS 帐户连接到您的 azure 帐户，这与 Visual Studio 在设置云服务的发布功能时所做的方式非常相似项目。因此，如果您正在清理 azure 下标中的证书，您可能已经删除了 tfs 用于部署的证书。要解决此问题，请转到 tfs 中的团队项目并单击设置图标，这应该会为团队项目的设置打开一个新选项卡，如果单击服务选项卡，您会看到天蓝色连接。要解决此问题，请单击断开连接，然后转到 azure 门户并从云服务的仪表板选项卡重新设置与云服务的连接，就像您第一次那样。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-07T11:14:49.737

我遵循了这个建议 [http://teelahti.fi/howto-deploy-to-azure-websites-deployment-slot-from-tfs/](http://teelahti.fi/howto-deploy-to-azure-websites-deployment-slot-from-tfs/) 使用这个模式 mywebsite(slotname)

因此，如果您的网站是 MySite，并且您在构建定义的“进程”选项卡中的“Windows Azure 部署设置”的“网站名称：”中创建了一个插槽“Staging”，请使用 MySite(Staging)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T11:52:07.877

我遇到了同样的问题，这是因为在我的云项目上启用了远程桌面配置。您有 2 个选项：

1.  通过右键单击您的云项目并单击配置远程桌面...来删除您的远程桌面连接。然后取消勾选为所有角色启用连接并单击确定。现在检查这些更改以运行构建
2.  确保您在配置远程桌面...下使用的证书已上传到设置和管理证书下的 Azure 门户

希望这可以帮助

# ruby-on-rails - Canvas-lms 将 rails 2.3.5 更新到 3.2.12

> ID：16075451
> 
> 赞同：-1
> 
> 时间：2013-04-18T05:53:46.277
> 
> 标签：ruby-on-rails, ruby-on-rails-2, rails-3-upgrade

我将致力于开源 Canvas-lms。它使用rails 2.3.5，但我熟悉rails 3.2.12。

1.  如何将 rails 2.3.5 升级到 rails 3.2.12。
2.  有哪些挑战。
3.  最好的方法是什么。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-18T06:01:31.390

将此包含在您的 Gemfile 中：

```
gem 'rails', '3.2.12' 
```

然后运行命令

```
bundle update rails 
```

我认为这是最好的方法。

# iphone - Cocos 2d：在 Retina 设备上渲染的图像大小是原来的两倍

> ID：16075456
> 
> 赞同：0
> 
> 时间：2013-04-18T05:53:56.290
> 
> 标签：iphone, ios, cocos2d-iphone

我是 Cocos 2d 的新手。所以请原谅我，因为这是非常基本的东西。

我正在从图像创建 CCMenuItemImage，它在非视网膜设备上运行良好，但在视网膜设备（iPhone 和 iPad 视网膜）的情况下，渲染的图像是预期大小的两倍。前提是，用于 Retina 设备的图像的分辨率是非 Retina 设备的两倍。例如，如果非 Retina 设备的按钮分辨率为 100 x 100，Retina 设备的相同按钮的分辨率为 200 x 200（因为 Retina 设备的分辨率是非 Retina 设备的两倍）。

我正在使用以下代码创建 CCMenuItemImage ：-

```
CCMenuItemImage *startButton = [CCMenuItemImage itemFromNormalImage:startBtnImg selectedImage:startBtnImg target:self selector:@selector(MenuButtonAction:)]; 
```

在视网膜设备的情况下，与非视网膜设备相比，“startButtonImg”将具有双倍分辨率的文件名。

**总结**当我在视网膜设备上渲染 CCMenuItemImage 时，被渲染的图像是双倍大小的（不应该是这样的）。

请帮助我弄清楚我做错了什么。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:56:09.987

使用 -hd 更改您的视网膜图像名称，
例如
SD 图像 -> apple.png [100x100]
高清图像 -> apple-hd.png [200x200]

在您的代码中仅指 SD 图像。例如`[CCSprite spriteWithFile:@"apple"];`
，您的应用必须在配置中启用视网膜支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T05:56:18.123

cocos2d 中视网膜显示的 hd 后缀。例如，如果您在应用程序中有一个图像 img.jpg。

你必须有 2 张图片 img.jpg (100*100) img-hd.jpg (200 *200)

img.jpg 将用于普通 iPhone，img-hd.jpg 用于高清设备

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T09:37:41.913

本教程解释了如何为 iPhone 和 iPad 提供不同的资源，包括视网膜而不是以和平的方式 :) [http://www.raywenderlich.com/25736/how-to-make-a-simple-iphone-game-with -cocos2d-2-x-tutorial](http://www.raywenderlich.com/25736/how-to-make-a-simple-iphone-game-with-cocos2d-2-x-tutorial)

您是否忘记通过以下方式让 CCFileUtils 模块知道您为每个文件使用的后缀？

```
// On iPhone HD: "-hd"
    CCFileUtils *sharedFileUtils = [CCFileUtils sharedFileUtils];
    [sharedFileUtils setEnableFallbackSuffixes:NO];             // Default: NO. No fallback suffixes are going to be used
    [sharedFileUtils setiPhoneRetinaDisplaySuffix:@"-hd"];      // Default on iPhone RetinaDisplay is "-hd"
    [sharedFileUtils setiPadSuffix:@"-ipad"];                   // Default on iPad is "ipad"
    [sharedFileUtils setiPadRetinaDisplaySuffix:@"-ipadhd"];    // Default on iPad RetinaDisplay is "-ipadhd" 
```

确保你已经完成了它，并且当你初始化一个精灵时，你已经将所有图像资源复制到你的应用程序包中。例如，如果您有以下代码，您应该有 4 张图片：

> projectile.png、projectile-hd.png、projectile-ipad.png 和 projectile-ipadhd.png

```
CCSprite *projectile = [CCSprite spriteWithFile:@"projectile.png"]; 
```

# javascript - jquery，用另一个超链接替换一个超链接链接？

> ID：16075461
> 
> 赞同：-1
> 
> 时间：2013-04-18T05:54:22.777
> 
> 标签：javascript, jquery, html

在我的 html 页面中有两个超链接。

```
<a href="#" id="demo1" onclick="onClick_Demo1()" >Demo1</a>
<a href="#" id="demo2" onclick="onClick_Demo2()" >Demo2</a> 
```

当我们点击`Demo1`超链接..`Demo1`超链接替换为`Demo2`超链接。

以及当我们单击`Demo2`超链接时..`Demo2`超链接替换为`Demo1`超链接。

我就是这样。。

```
 $(document).ready(function() {

  $('#demo2').attr('disabled', 'disabled');
});
function onClick_Edit(){
  $('#demo1').attr('disabled', 'disabled');
  } 
```

建议我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:12:20.287

试试这个。。

```
<script>
    $(document).ready(function() {

        $('#demo2').hide();
    });
    function onClick_Edit() {
        $('#demo1').hide();
        $('#demo2').show();

    }
    function onClick_Edit() {
        $('#demo1').show();
        $('#demo2').hide();

    }
</script> 
```

# php - 这条线如何运作：require_once('Zend/Registry.php');？

> ID：16075466
> 
> 赞同：3
> 
> 时间：2013-04-18T05:54:58.267
> 
> 标签：php, zend-framework2

我在我的 win 7 上安装了 Zend Framework 2(Zend Framework + Zend Server)。在里面`Zend/Apache2/htdocs/hello1.php`，我放了下面的脚本：

```
<?php
    require_once('Zend/Registry.php'); 
    $registry = Zend_Registry::getInstance(); 
    $registry['name'] = 'Quentin Zervaas'; 
    echo sprintf('My name is %s', $registry['name']);
?> 
```

然后我运行`http://localhost/hello1.php`，它显示：我的名字是 Quentin Zervaas

我的问题是：对于`require_once('Zend/Registry.php');`htdocs文件夹下的这一行，是dummy.php、favicon.ico、index.html、hello1.php，没有Zend文件夹，那么这一行是如何工作的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T05:59:48.707

在你的 php.ini 中检查这个

```
include_path 
```

它将具有您的 zend 目录的默认位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:53:06.090

如果您使用 Zend Framework 2 - 您不应该使用 Zend_Registry。那是 ZF 1 组件而不是 ZF 2 组件。它工作的唯一原因是因为您的包含路径和 Zend Server 将 ZF 1 放在那里。

# java - JAVA中的文件管理服务器

> ID：16075467
> 
> 赞同：0
> 
> 时间：2013-04-18T05:55:01.907
> 
> 标签：java, sockets, svn, eclipse-plugin, client-server

我有一个应用程序（SWT），我需要在服务器端管理一个文件。通过管理我的意思是 3 件事，**将**内容写入文件，对其应用**读/写**锁定机制**并**在`TextArea`. 我需要创建一个**多线程服务器**来实现这一点，因为我的应用程序（实际上是一个基于 Eclipse 的插件）接受**多个用户**。我是这个客户端服务器和套接字编程的新手，我已经阅读了一些教程，但仍然没有找到任何最佳解决方案。我不需要代码（互联网上有很多），而是需要方法或步骤来做到这一点。谢谢。

另外，我发现了一些实际上可以正常工作的服务器代码。但是没有显示所需的结果。

**我想用这个文件做的是维护作者的名字。SVN 在服务器端所做的修订号和相关文件。**

服务器程序：

```
public void onServer() throws Exception {
        String sentByClient;
        String line1 = null;
        ServerSocket socket = new ServerSocket(6789);
        while(true) {

    System.out.println("Listening...");
        Socket connectionSocket = socket.accept();
        BufferedReader inFromClient =
        new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
        DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
        sentByClient = inFromClient.readLine();

        System.out.println("Received: " + sentByClient);

        File file=new File("HistoryFile.txt");//------------------server file
        BufferedWriter writ=new BufferedWriter(new FileWriter(file));
        writ.write(sentByClient);
        writ.close();
        BufferedReader read=new BufferedReader(new FileReader(file));

        while((line1=read.readLine())!=null) {
            System.out.println(line1);

        }
        outToClient.writeBytes(line1);

                    }

    } 
```

客户端代码：

```
public void onClient(String param) throws Exception {
        Socket clientSocket = new Socket("localhost", 6789);
          DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
          BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
          //sentence = inFromUser.readLine();
          sentence=param; // Here i'm sending the author name, revision details, etc from svn to my server 
          outToServer.writeBytes(sentence);
          newSentence = inFromServer.readLine();
          System.out.println("FROM SERVER: " + newSentence);
          historyArea.append(newSentence);
    } 
```

我真正需要的是在服务器上维护一个文件并在 textArea(historyArea) 上显示文件内容。我正在将历史数据从 SVN 发送到文件。

期望的输出：

```
Revision Number: 1
Author: a
Time:xxxx
Changed Path:xxxx 
-------------------
Revision Number: 2
Author: a
Time:xxxx
Changed Path:xxxx
------------------
Revision Number: 3
Author: a
Time:xxxx
Changed Path:xxxx 
```

我得到的输出只是第一次修订：

```
Revision Number: 1
    Author: a
    Time:xxxx
    Changed Path:xxxx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:39:48.843

在这一行

```
BufferedWriter writ=new BufferedWriter(new FileWriter(file)); 
```

您正在以写入模式打开文件，因此写入操作将覆盖现有内容。而是这样做

```
BufferedWriter writ=new BufferedWriter(new FileWriter(file,true)); 
```

这将以附加模式打开文件。

# php - PHP 和 MySQL - 常量、函数、最佳实践？

> ID：16075475
> 
> 赞同：0
> 
> 时间：2013-04-18T05:55:51.953
> 
> 标签：php, mysql

我多年来一直在使用 PHP 和 MySQL，但从未在正式环境中使用过。我用它来简化我的工作，并编写了很多我自己的商业网站，但我没有被聘为程序员，而且从来没有。不过，我希望开始做一些自由职业，我想知道一些最佳实践是什么。

我总是使用 getter 类从 mysql 检索数据，并使用 setter 类将数据输入 mysql，我将连接类传递给它。每个 mySQL 表和字段名称都有自己的常量定义在常量包含文件中。我通常做的是将常量直接输入到 setter 或 getter 类中，而不是将它们作为变量传递。这样做让生活更轻松、更快捷，但它确实违背了我对类中的函数应该是独立的东西的理解。

为了清楚起见，这是我通常做的一个例子：

常量.inc.php

```
define('TABLE_NAME','table_name'); 
```

dbase_getters.class.php

```
public function get_data($connection){
    $query = "SELECT * FROM " . TABLE_NAME;
    $result = $connection etc...
} 
```

还是我应该这样做？

dbase_getters.class.php

```
public function get_data($connection, $table_name){
    $query = "SELECT * FROM " . $table_name;
    result = $connection etc...
} 
```

通过传递变量似乎更麻烦，特别是因为如果我想通过添加一个新字段来更改函数的参数进行搜索，我必须找到函数调用的每个实例并更改它们，而如果我使用常量，我只需要将它们添加到函数中。

此外，当涉及到诸如声明常量​​之类的事情时，我总是使用单引号。但是当我创建字符串时，我总是使用双引号。这是否不一致，我是否应该一直使用一种类型的报价？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:08:43.943

当然，您可以两种方式都这样做，我认为两者都同样不可取。动态创建 SQL 字符串既难以保护又容易出错。

我建议您尝试许多现成的库之一，例如：

[http://www.doctrine-project.org/](http://www.doctrine-project.org/)

[http://propelorm.org/](http://propelorm.org/)

这些就是所谓的“ORM”——对象关系映射器。这些将帮助你实现你 - 所以我相信 - 正在努力做的事情。

还有其他方法可以解决这个问题，我曾经使用过 Pear DB（现在是 MDB2，[http](http://pear.php.net/package/MDB2) ://pear.php.net/package/MDB2 ），它不像 ORM 那样高级。这也将帮助您解决设计问题。

数据库访问是一个需要解决的常见问题，很多人以前都做过，使用他们已经发现的东西，不要重新发明轮子！尝试使用 ORM。它非常令人满意，并且比处理 SQL、行、结果集和连接对象更自然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:09:08.470

要使用 MVC 术语...包含所有业务逻辑的*模型应该在某处有**一个*明确定义的函数，该函数从数据库中获取某种特定类型的数据。说，像这样：

```
function getUserByUsername($username) {
    $query = 'SELECT ... FROM users WHERE name = :username';
    ...
    return $user;
} 
```

通过用户名从数据库中检索用户是您的应用程序可以执行的*一项特定的、独特的操作。*为它做一个函数。它使您的应用程序更加结构化。不要制作一个通用的 SQL 包装器并向其传递大量不同的变量，这只会在您的应用程序中不必要地扩散您的数据库逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:11:48.703

对于定义常量，我使用与 OP 相同的方法。

我建议你为你的持久层研究这些模式：

[DAO（数据访问对象）模式](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)

[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)

除此之外，还有可能使用 ORM 框架

在我看来，你做对了。（请记住，有诸如为 php 查询准备好的语句之类的东西）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:10:08.027

使用自己的框架仅限于自己的知识线，我建议使用**`mvc frameworks`** 大多数主机和所需的框架：

1.  CAKEPHP
2.  代码点火器
3.  禅德

因为`cakephp`这里是如何工作的：

[核心定义常量](http://book.cakephp.org/2.0/en/core-libraries/global-constants-and-functions.html#core-definition-constants)

[全局函数](http://book.cakephp.org/2.0/en/core-libraries/global-constants-and-functions.html#global-functions)

如果您习惯使用一个**`mvc`**，那么其他人不适合您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T06:23:35.987

我更喜欢的最佳实践是创建一个具有执行数据库查询的方法的数据库类。这些是我使用的一堆函数，它们是实现基本插入选择和更新的简单方法。这是 PDO 的示例。

```
 public function select($table, $fields, $where = ""){
    try{
        $fields = implode(",", $fields);
        $stmt = $this->connection->prepare("SELECT {$fields} from {$table} {$where}");
        $stmt->execute();
        $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
        return $result;
    }catch(PDOException $p){
        Error::PDOError($p->getCode(), $p->getMessage());
    }
}
public function insert($table, $data) {
    $fields = implode(",", array_keys($data));
    $values = implode(",", array_values($data));
    $stmt = $this->prepare("INSERT INTO " . $table . "({$fields}) VALUES ({$values})");
    return $stmt->execute();
}

public function update($table, $data, $where) {
    $fieldValues = NULL;
    foreach ($data as $key => $value) {
        $fieldValues .= "$key = :$key,";
    }
    $fieldValues = rtrim($fieldValues, ",");
    $stmt = $this->prepare("UPDATE {$table} SET {$fieldValues} WHERE {$where}");
    foreach ($data as $key => $value) {
        $stmt->bindValue(":$key", $value);
    }
    return $stmt->execute();
} 
```

或者您可以随时使用[活动记录库](http://www.phpactiverecord.org/)

# ios - 创建一个 iPhone 应用程序以在 iPhone 中拥有多个用户

> ID：16075477
> 
> 赞同：1
> 
> 时间：2013-04-18T05:55:59.487
> 
> 标签：ios, objective-c, jailbreak

我想创建一个应用程序，我们可以使用它在一个`iOS`设备中创建多个用户。就像计算机中的多个用户一样。每个用户都应该能够拥有单独的应用程序、单独的设置等。
试图找到这个应用程序的起点，但没有运气。

谁能告诉我从哪里开始以及我们**如何**在`iPhone`. 如果我们必须只为越狱 iPhone 制作这个应用程序，那没问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-27T16:52:58.317

这一切都是关于在 DB-schema(sqlite) 中实现正确的***主外键关系。***存储和检索关于 Pk-Fk 关系的数据

**例如**

有一个用户表

> *表名*：用户
> 
> *列* ：userRef、userId、userType

（userRef 应该是主键）

然后所有子表都应该在主键和外键关系中使用 userRef 存储和检索数据。

> *表名*：Account_balance
> 
> *列* ：userRef、account_BalId、balanceAmount

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:26:05.910

最好为您的应用程序创建一个 CoreData 数据库并维护一个用户和权限矩阵。

像这样说：

```
>              Write Files         Edit Files        Delete     
> 
> Admin           Y                   Y               Y
> 
> Guest           Y                   N               N
> 
> Developer       Y                   Y               N 
```

你必须想出这样一个矩阵并将其转换为一个核心数据数据库，它维护用户的详细信息和他的权限。

# servicestack - 使用 NLog 的 MappedDiagnosticsContext 和 ServiceStack

> ID：16075478
> 
> 赞同：3
> 
> 时间：2013-04-18T05:56:06.550
> 
> 标签：servicestack, nlog

我将 NLog 与我的 Servicestack 服务一起使用。我想使用 NLog 的 MappedDiagnosticsContext 将变量附加到每个日志条目。就我而言，我想为每个请求生成一个唯一标识符，并将该标识符与在该请求期间记录的所有日志条目一起记录。

该`ServiceStack.Logging.ILog`接口（或任何其他服务堆栈日志记录类）似乎不支持这一点。

但是我可以做到`NLog.MappedDiagnosticsContext.Set("somekey", "some value")`。这可行，但将我与 NLog 联系在一起（不过我并不担心）。

两个问题：

1.  有没有更好的方法来使用 servicestack 来做到这一点。
2.  假设使用 NLog 的 MappedDiagnosticsContext 设置的值的范围限定为请求是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-05T19:17:57.953

您可以从 ServiceStack 版本开始执行此操作。5.0：

```
using (log.PushProperty("Hello", "World"))
{
    log.InfoFormat("Message");
} 
```

另请参阅：[https ://docs.servicestack.net/logging](https://docs.servicestack.net/logging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T16:23:41.277

我打算将 MappedDiagnosticsContext 用于这些目的：

我的事件日志目标的 EventID：${mdc:item=eventId}。我们一直在考虑使用 eventcontext 属性，但这会改变您记录项目的方式。

记录 ASP.Net 代码时我的其他目标的 SessionId：${mdc:item=sessionId} 因为即使使用来自 NuGet 的 NLog 2.0.1.0，${aspnet-sessionid} 方式似乎也不适用于非 ASP 代码.

我的测试表明，这些案例对我的目的是有意义的。

# javascript - 使用javascript计算div最大高度

> ID：16075485
> 
> 赞同：1
> 
> 时间：2013-04-18T05:56:42.333
> 
> 标签：javascript, jquery, document

我有一个 div，假设它夹在许多元素之间，并且位于侧边栏上。我需要计算 div 和它下面的元素之间有多少空间。然后将我的 div 的最大高度设置为它的当前高度加上下面的空间，这样它就永远不会超过那个高度（从而扩展页面）。初始的最大高度，将是一个非常小的值，应该由 JS 更改。所以，基本上：

```
<thing></thing>
<div id="mydiv"></div>
<another></another> 
```

我需要类似（jQuery示例）的东西：

```
var spacebelow = space between mydiv and <another>    
var daheight = (currentheight + spacebelow); 
    $("#mydiv").attr("style", "max-height:" + daheight + "px"); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:07:00.103

我想你想要这样的东西：-

```
 var divoffset=$(#divID).offset();
    var divanotheroffset=$(#divanotherID).offset();
    var spacebelow =divanotheroffset.top-divoffset.top;
    var currentheight =$(#divID).height();
    var daheight = (currentheight + spacebelow); 
    //set the max-height:-
     $("#mydiv").attr("max-height",daheight ); 
```

# php - $_REQUEST 在一个页面上有效，但在另一个页面上无效

> ID：16075486
> 
> 赞同：-3
> 
> 时间：2013-04-18T05:56:44.347
> 
> 标签：php, mysql, request

好的，伙计们，我的问题很基本。

这是基础知识。

我的网站位于 GoDaddy 共享主机上。

我有一个可以在一页上完美运行的分页脚本。

[http://subdomain.mysite.com/category.php](http://subdomain.mysite.com/category.php)

在网站的不同部分；

[http://www.mysite.com/admin/page.php](http://www.mysite.com/admin/page.php)

我收到此行错误：

`$page= $_REQUEST['page'];`

我不放脚本的其余部分，因为除了查询变量之外，它在两个页面上都是相同的。

在第二页我得到一个`Notice: Undefined index: page ....`错误。

我错过了什么？

有工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:03:54.767

您可能正在尝试获取未传递给服务器的参数。

我猜你在查询中传递了你的分页参数，但这在你的“第 1 页”上失败了，你仍然没有传递任何东西。

尝试：

```
$page = 1;
if (isset($_REQUEST['page']) {
    $page = (int)$_REQUEST['page'];
} 
```

# c++ - 展平 std::vector 的推荐方法是什么 使用 C++/STL 到 multi_sz

> ID：16075488
> 
> 赞同：2
> 
> 时间：2013-04-18T05:56:57.577
> 
> 标签：c++, string, windows, stl, atl

我想将存储在 std::vector 中的字符串列表 (ATL::CString) 写入 Windows 注册表中的 REG_MULTI_SZ 值。我知道如何在纯 C 中执行此操作（迭代一次以获得总长度，分配缓冲区，将字符串复制到由“\0”分隔的缓冲区）。

知道我使用 STL 尝试了以下操作（抱歉，我必须将 VS2010 与“for each”一起使用）：

```
std::vector<TCHAR> multiline_sz;
for each ( CString entry in myStringList )
{
   TCHAR* buf = entry.GetBuffer();
   multiline_sz.insert(multiline_sz.end(), &buf[0], &buf[entry.GetLength()]);
   multiline_sz.push_back(L'\0');
}
multiline_sz.push_back(L'\0'); 
```

这行得通，但我想知道是否有更优雅或更快的方式使用 STL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-08T11:43:17.983

我建议使用**`CString::GetString()`**( 而不是`CString::GetBuffer()`)，因为它返回指向 NUL 终止字符串的指针以进行*只读*访问。

此外，还要注意`CString::GetBuffer()`需要匹配的`CString::ReleaseBuffer()`调用。

我也会简化你的代码，没有不必要的`&buf[0]`,`&buf[<index>]`语法。

```
// Your pseudo code: 
// for each ( CString entry in myStringList )
{
  multiline_sz.insert(
      multiline_sz.end(), 
      entry.GetString(), // <-- current string's start
      entry.GetString() + entry.GetLength() + 1 // <-- include terminating NUL
  );
} 
```

作为进一步的优化，您可以扫描整个输入字符串列表，并预先计算所需的*总*长度，并在调用之前调用`std::vector::reserve()`以预先分配向量中的空间`vector::insert()`。这将在插入过程中为您节省一些重新分配和副本。

* * *

**PS**如果你想遍历一个`std::vector<CString>`带有 C++11 **range-for**循环，你可以使用这个语法：

```
for (const auto& entry : myStringList) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:26:35.257

`CString::GetBuffer()`已经是零终止的，所以它是有效的

```
for each ( CString entry in myStringList )
{
   TCHAR const* buf = entry.GetBuffer();
   multiline_sz.insert(multiline_sz.end(), &buf[0], &buf[entry.GetLength()+1]);
} 
```

# java - String("2013-4-25") to date conversion

> ID：16075490
> 
> 赞同：1
> 
> 时间：2013-04-18T05:57:15.550
> 
> 标签：java, string, date, format

I have a String like `"2013-4-25"` I need to convert this into `"MM-dd-yyyy"` format. Later I will have to append this `date` like

```
Calendar cal=new GregorianCalendar();
cal.setTime(date);
cal.set(Calendar.HOUR, 23);
cal.set(Calendar.MINUTE, 59);
cal.set(Calendar.SECOND, 59); 
```

How could I do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:01:19.137

使用[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)：

```
 Date date = new Date();
        Calendar cal=new GregorianCalendar();
        cal.setTime(date);
        cal.set(Calendar.HOUR, 23);
        cal.set(Calendar.MINUTE, 59);
        cal.set(Calendar.SECOND, 59);

        SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy");
        System.out.println(sdf.format(cal.getTime())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T06:06:43.540

用这个

```
String str = "2013-4-25";
        SimpleDateFormat formatter = new SimpleDateFormat("MM-dd-yyyy");
        try {
            SimpleDateFormat parseFormatter = new SimpleDateFormat("yyyy-MM-dd");

            Date date = parseFormatter.parse(str);

            String formattedDate = formatter.format(date);
            System.out.println(formattedDate);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:07:47.543

使用[`JodaTime`](http://joda-time.sourceforge.net)和[`DateMidnight`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateMidnight.html)类，您不必自己规范日期。像这样的东西：

```
DateTimeFormatter format = DateTimeFormatter.fromPattern("yyyy-MM-dd");
DateMidnight date = DateMidnight.parse(date, format); 
```

JDK 中的`Calendar`和`Date`API 很痛苦……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:00:03.237

您可以使用`SimpleDateFormat`. 检查此链接：[http ://www.java2s.com/Tutorial/Java/0040__Data-Type/SimpleDateFormat.htm](http://www.java2s.com/Tutorial/Java/0040__Data-Type/SimpleDateFormat.htm)

您可以指定您选择的格式化程序，然后相应地格式化日期。

# python - averaging only second column data from multiple files

> ID：16075492
> 
> 赞同：-2
> 
> 时间：2013-04-18T05:57:17.820
> 
> 标签：python, perl, bash, awk

I have total 64 files with each file name as below:

```
diffusion-isomalto-thermo1.dat_x.xmgr
diffusion-isomalto-thermo2.dat_x.xmgr
diffusion-isomalto-thermo3.dat_x.xmgr
diffusion-isomalto-thermo4.dat_x.xmgr
.
.
diffusion-isomalto-thermo64.dat_x.xmgr 
```

Each file contains two columns of data in the format:

```
 5.000     1.047
10.000     1.107
15.000     1.211
20.000     1.083
25.000     1.166
30.000     1.368
35.000     1.179
40.000     1.307
45.000     0.985
50.000     0.954 
```

containing 50,000 lines of data.

What I want is the average of all the first row second column from all files (64 files) and next is average for second row second column over all files.

What is a good approach for this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:57:33.733

With `GNU awk`:

```
awk 'FNR==1{a+=$2;next}{b+=$2;close(FILENAME);nextfile}END{print a,b}' diffusion* 
```

Assuming the globbing of `diffusion*` picks up only the 64 files you want. If not use something stricter like `diffusion-isomalto-thermo*.dat_x.xmgr`.

# java - 使用 AJAX 上传文件而不是表单提交

> ID：16075493
> 
> 赞同：0
> 
> 时间：2013-04-18T05:57:21.430
> 
> 标签：java, jsf-2, richfaces

我正在尝试使用rich:fileUpload 控件上传文件，我也能够成功地这样做。我在这里面临的唯一问题是，当我单击文件上传控件中的上传按钮时，页面被提交，这是我试图避免的。

我想要做的是，只要单击上传按钮，就会调用侦听器来执行必要的后端操作。并刷新要显示图片的部分。一切运行良好，但我想通过 AJAX 上传文件。

我正在使用 Richfaces 4.1

```
<rich:fileUpload addLabel="Add photo" clearAllLabel="Clear All" clearLabel="Clear"
    deleteLabel="Remove" doneLabel="Upload successful!"
    uploadLabel="Upload profile pic"
    fileUploadListener="#{studentProfile.fileUploadListener}"
    acceptedTypes="jpg, gif, png, bmp" noDuplicate="true" immediateUpload="false">
    <!-- <a4j:ajax event="uploadcomplete" render="validationButton"/> -->
    <!-- <a4j:ajax event="clear" listener="#{uploadBean.doClearFilesList}" render="validationButton"/> -->
            <a4j:ajax event="uploadcomplete" render="profilepic" immediate="true" />
</rich:fileUpload>

<a4j:outputPanel ajaxRendered="true" id="profilepic">
        <rich:panel header="Profile Picture" style="width: 100px;height: 100px">
    <h:graphicImage url="#{studentProfile.profilePictureURL}" width="100" height="100" />
        </rich:panel>
</a4j:outputPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-31T13:00:25.267

使用 h:commandlink 也针对 iframe 名称然后 on<click 操作调用一个字符串方法，该方法也返回 url 丰富的面孔页面这很好只重新加载丰富的面孔页面而不是主页....

# windows-7 - 由于 Windows 7 上的访问被拒绝错误，SetVolumeLabel 函数失败

> ID：16075497
> 
> 赞同：1
> 
> 时间：2013-04-18T05:57:55.167
> 
> 标签：windows-7, uac, windows-7-x64, msdn

`SetVolumeLabel`由于 Windows 7 上的访问被拒绝错误，功能失败。

相同的功能在 Windows XP 上运行良好。

知道为什么这个问题出现在 Windows 7 上而不是 XP 上。

任何帮助将不胜感激，对我们非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T13:51:10.137

Windows Vista 和 Windows 7 具有[用户帐户控制](http://technet.microsoft.com/en-us/library/cc731416%28WS.10%29.aspx)或 UAC。这意味着除非针对特定操作或应用程序请求，否则用户没有管理员权限。在 Windows XP 下，如果用户是管理员，则所有程序都以管理员权限运行。

您收到的错误表明`SetVolumeLabel`需要提升权限。您可以使用“runas”以管理员身份运行应用程序，也可以更改程序以[请求提升](https://en.wikipedia.org/wiki/User_Account_Control#Requesting_elevation)。

# internet-explorer-8 - Pie graph drawn through Highchart not getting loaded in IE8

> ID：16075499
> 
> 赞同：0
> 
> 时间：2013-04-18T05:58:00.443
> 
> 标签：internet-explorer-8, highcharts

We are using highchart API along with javascript to draw some graphs in our application. But in IE8 the window gets hanged as soon as i try to open graph. I don't know how to fix this. in all other browsers i.e. chrome,mozilla its working fine.

* * *

The code goes like this

```
var chart=new Highcharts.Chart({
chart: {
     renderTo: container,
     plotBackgroundColor: '#FFFFFF',
     plotBorderWidth: null,                 
     plotShadow: false,
     spacingTop: 0,
     spacingBottom: 0,
     animation: false
 },
 title: {
     useHTML: true,
     text: licenseText,
     style: {
         color: '#000000',
         fontSize: '12px',
         textDecoration: 'underline',
         fontWeight: 'bold'
     }
 },    
 plotOptions: {
     pie: {
         borderWidth: width,
         allowPointSelect: false,
         cursor: 'pointer',
         startAngle: 90,
         size: size,
         dataLabels: {
             enabled: showLabel,
             crop: true
         }
     }
 },
 series: [{
 name: 'Occurrences',
 type: 'pie',
 data:[]
 }]
});            
return chart; 
```

Once we get this chart then we set data in it chart.series[0].setData(numericDataSecondary);

How can i check object notation?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:06:11.007

Internet Explorer 对对象表示法非常严格。请检查您的对象符号，您可能为对象的最后一个成员保留了一个“，”，根据 IE，这是一个错误。

如果可能，请发布您的代码，这将帮助我们准确了解您的问题。

# python - 如何在 Django 中根据字典及其键进行 Q 过滤器搜索

> ID：16075502
> 
> 赞同：1
> 
> 时间：2013-04-18T05:58:10.887
> 
> 标签：python, django, django-queryset

假设我有这本词典

```
mydict['number'] = {23,24,25}
mydict['name'] = {"john","mike","kaff"}
mydict['area'] = {"london", "usa", "japan"} 
```

我已经有了查询集`qs`

但是我想根据上面的内容进行额外的过滤，`dictionary`例如

`qs.filter (where number __icontains in 23,24,25)`

等等`qs.filter (where name __icontains in john, mike, kaff)`_

编辑：

这是我尝试过但很粗糙的

```
query_list = []

for key1 in mydict.iteritems():
  for myval in  mydict[key1]:
    qry = qry + Q(myval__icontains= myval) |
query_list.append(qry)

queryset = Student.objects.filter(reduce(operator.and_, query_list)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:39:17.360

您可以尝试这种方法：

```
for k, v in mydict:
    qs.filter('%s__icontains' % k=v) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:13:24.017

我会将论点与`filter`from`Q`对象结合起来。[https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)

# mysql - 如何加快SQL查询

> ID：16075509
> 
> 赞同：0
> 
> 时间：2013-04-18T05:58:23.573
> 
> 标签：mysql, sql

我需要建议是否可以进行这种调整。

桌子：

```
CREATE TABLE UTIL_DAY (
  CompID varchar(15) collate utf8_czech_ci NOT NULL,
  TestplanID int(10) unsigned NOT NULL default '0',
  FromDate datetime NOT NULL default '0000-00-00 00:00:00',
  ToDate datetime NOT NULL default '0000-00-00 00:00:00',
  Interval int(11) NOT NULL default '0',
  Variant varchar(25) collate utf8_czech_ci default NULL,
  WO_ID int(11) default NULL,
  SAPTime int(5) default NULL,
  UseTime int(5) NOT NULL,
  MeasureCount int(10) unsigned NOT NULL,
  KEY CompID (CompID),
  KEY TestplanID (TestplanID),
  KEY WO_ID (WO_ID),
  KEY FromDate (FromDate),
  KEY Variant (Variant)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_czech_ci; 
```

当前查询：

```
UPDATE UTIL_DAY UDAY SET TestplanID = (SELECT TestplanID 
                                       FROM (SELECT UD_U.Variant,UD_U.WO_ID,VS.TestplanID 
                                             FROM (SELECT UD.Variant,UD.WO_ID 
                                                   FROM UTIL_DAY UD WHERE SUBSTR(CompID,1,3) <> 'AOI' 
                                                   GROUP BY UD.Variant,UD.WO_ID) UD_U 
                                             JOIN VARIANTS V ON UD_U.Variant = V.Variant 
                                             JOIN VARIANT_STATUS VS ON V.VariantID = VS.VariantID 
                                             JOIN TESTPLANS_WO_ID TW ON UD_U.WO_ID = TW.WO_ID 
                                             WHERE VS.TestplanID = TW.TestplanID 
                                             GROUP BY UD_U.Variant,UD_U.WO_ID ) TP 
                                       WHERE TP.Variant = UDAY.Variant AND TP.WO_ID = UDAY.WO_ID) 
```

我的更新是临时表：

```
CREATE TEMPORARY TABLE UTIL_DAY_TEMP (
Variant varchar(25) COLLATE 'utf8_czech_ci' NOT NULL,
WO_ID int unsigned NOT NULL,
TestplanID int unsigned NOT NULL,
PRIMARY KEY Variant_WO_ID (Variant, WO_ID)) COMMENT='' ENGINE='InnoDB' COLLATE 'utf8_czech_ci';
INSERT IGNORE INTO UTIL_DAY_TMP (SELECT UD_U.Variant,UD_U.WO_ID,VS.TestplanID 
                FROM (SELECT UD.Variant,UD.WO_ID 
            FROM UTIL_DAY UD WHERE SUBSTR(CompID,1,3) <> 'AOI' 
            GROUP BY UD.Variant,UD.WO_ID) UD_U 
      JOIN VARIANTS V ON UD_U.Variant = V.Variant 
      JOIN VARIANT_STATUS VS ON V.VariantID = VS.VariantID 
      JOIN TESTPLANS_WO_ID TW ON UD_U.WO_ID = TW.WO_ID 
      WHERE VS.TestplanID = TW.TestplanID 
      GROUP BY UD_U.Variant,UD_U.WO_ID);
 UPDATE UTIL_DAY UDAY SET TestplanID = (SELECT TestplanID 
                                        FROM UTIL_DAY_TEMP TP 
                                         WHERE TP.Variant = UDAY.Variant AND TP.WO_ID = UDAY.WO_ID); 
```

这一改进将超过 200 万行的查询速度提高了 400%。但是这种改进有同样的结果吗？谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:01:03.473

首先，使用

解释来自 mysql 的命令[。](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

之后，确定是否有任何索引会对您有所帮助（警告：不要创建失控的索引）此外，请查看 mysql 上的复合索引文档

# ruby-on-rails - 如何在rails中启用嵌入ckeditor的youtube或vimeo

> ID：16075510
> 
> 赞同：2
> 
> 时间：2013-04-18T05:58:23.620
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ckeditor

我在我的 Rails 应用程序中使用[CKEditor](https://github.com/galetahub/ckeditor) gem 来处理富文本区域。现在我想在 ckeditor 中附加 YouTube 或 Vimeo 视频并从本地文件系统功能上传视频，但我找不到任何解决方案。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T14:43:18.810

为了解决这个任务，我被添加到工具栏“Iframe”按钮 config.js 中：

```
CKEDITOR.editorConfig = function( config )
{
config.toolbar_Easy =
  [
    ...
    {name: 'insert', items : [ 'Image', 'Flash', 'Table', 'Iframe' ] }
    ...
  ];
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T08:06:15.067

使用 ckeditor 的 Mediaembed 插件时，在 webkit 上插入 XSS 阻止媒体内容和 iframe 时可能会遇到问题。在我的项目中，我们`[youtube url = "% url%"]`通过插件插入类型 url，然后在后端解析它们以生成页面。

# regex - 正则表达式中的小混乱 | （管道）

> ID：16075511
> 
> 赞同：1
> 
> 时间：2013-04-18T05:58:24.450
> 
> 标签：regex

当我使用 pattren

```
"(see|see also) [\w\d]+" 
```

关于文本

```
see page 
see also page 
```

但输出匹配是

```
see page 
see also 
```

如果我互换了，请参见

```
"(see also|see) [\w\d]+" 
```

输出是

```
see page 
see also page 
```

我以为两者都是一样的。我可以知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T06:01:14.783

删除交替并离开`see [\w\d]+`将匹配字符串“see also page”，因为它满足`see also`. 正则表达式使用交替的方式（至少在这种情况下）是它会尝试将每个选项按顺序与模式的其余部分匹配，并在成功完成后立即停止，或者在匹配时返回替代项失败。当您反转交替时，它会尝试与`see also`first 匹配，但这将失败并显示“see page”。

把它写成这样会更有意义`see( also)? [\w\d]+`

# python - Global variables across multiple files in python

> ID：16075512
> 
> 赞同：4
> 
> 时间：2013-04-18T05:58:26.373
> 
> 标签：python, scope, python-module

I have a modules.py file :

```
global dns_server_ip
def SetVnetGlobalParameters():
    dns_server_ip = '192.168.3.120' 
```

And I’m importing this file in say abc.py file

```
from modules import *
SetVnetGlobalParameters()
print(dns_server_ip) 
```

But ‘dns_server_ip’ is still not accessible.

I want to set global parameters through Function only. Any help would be greatly appreciated! Thanks..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T06:32:23.210

根据您的问题，我了解您是 python 的初学者。

在导入模块时，您只使用模块名称，不需要包含扩展名或后缀（py），并且在您的代码中您错过了起始单引号。

这是您修改后的代码：它是 modules.py

```
dns_server_ip = ''
def SetVnetGlobalParameters():
    global dns_server_ip
    dns_server_ip = '192.168.3.120′ 
```

这是你的 abc.py

```
import modules 
modules.SetVnetGlobalParameters()
print modules.dns_server_ip 
```

在这里，通过 global 关键字，我们告诉 python 解释器更改或指出全局变量而不是局部变量，并且始终变量将是`global`或者`local` 如果变量是（局部和全局），你将得到 python `UnboundLocalError` 异常，如果你这样做了不要放那个全局关键字

```
global dns_server_ip 
```

dns_server_ip 将被创建为一个新的局部变量。`global`仅用于函数中的关键字

你可以检查[全局关键字](https://stackoverflow.com/questions/4693120/use-of-global-keyword-in-python)，[python模块](http://docs.python.org/2/tutorial/modules.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T06:02:52.873

在模块.py

```
dns_server_ip = None
def SetVnetGlobalParameters():
    global dns_server_ip
    dns_server_ip = '192.168.3.120' 
```

在 abc.py

```
import modules
modules.SetVnetGlobalParameters()
print(modules.dns_server_ip) 
```

# php - 关闭页面后用户仍然在线

> ID：16075519
> 
> 赞同：-5
> 
> 时间：2013-04-18T05:58:56.387
> 
> 标签：php, mysql, database, login

我正在使用 php 登录脚本。（我有一个愚蠢的初学者问题）计划是在 1 小时后用 cookie 注销用户。

但是，如果用户没有按下注销按钮，则用户保持在线（在我的数据库表上，我的 MySQL 数据库上保持打开记录）当我删除该记录时，一切正常，用户可以登录。

有人可以帮帮我吗？我是否需要让他脚本删除我的会话或其他内容？

**解决方案：**问题是我只需要删除（确保）在用户想要再次登录之前删除用户登录数据。所以我做了一个小脚本，如果他想登录，它会为用户删除一个打开的会话。毕竟我停止使用我自己的代码。现在我正在使用 CodeIgniter，效果很好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:02:07.197

实际上，这就是会话通常的工作方式。一旦页面被加载，浏览器和服务器之间就不再有连接了。基本上，一旦页面完成加载并且只是坐在浏览器中，就好像用户关闭了窗口一样。

没有办法 100% 可靠地检测用户是否仍然“在线”。您必须让 Javascript 为此发送一个持续的心跳，但即使这样，它也归结为**timeouts**。如果您已经有一段时间没有看到该用户，则假设他处于离线状态并删除该会话。这就是你所能做的。

# ios - Navigate Back to previous view controller

> ID：16075525
> 
> 赞同：38
> 
> 时间：2013-04-18T05:59:11.903
> 
> 标签：ios, objective-c, uinavigationcontroller

I have a `UIView->UICollectionView->UICollectionViewCell`. I am trying to navigate back programatically but none of these works. The code did called. I am using StoryBoard.

```
- (void) goBack:(NSNotification *) notification {
      // [self.navigationController popViewControllerAnimated:YES];
     //  [self dismissViewControllerAnimated:YES completion:nil];
      [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-04-18T07:18:15.240

你需要使用：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

这将带您回到根视图控制器。

如果你想导航回之前的视图控制器，你应该实现：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-21T12:09:48.500

通过使用下面的行，我们可以转到父视图控制器

```
[self.navigationController popViewControllerAnimated:YES]; 
```

通过使用下面的行，我们可以移动到主/根视图控制器

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

通过使用下面的行，我们可以移动到任何视图控制器

```
[self.navigationController popToViewController:viewControllerObject animated:YES]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T07:13:40.973

怎么样...

```
 [self.navigationController dismissViewControllerAnimated:YES completion:NULL]; 
```

假设您当前处于基于导航的控制器中，并且您想在进入基于导航的控制器之前返回上一个控制器。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-07T07:42:41.310

使用 swift3，

```
@IBAction func back(_ sender: UIButton) {
    self.dismiss(animated: true, completion: nil)     
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-01T16:39:51.337

Swift solutions for easy copy pasting:

```
navigationController?.popViewControllerAnimated(true) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-08-13T21:15:24.547

斯威夫特 4.1：

```
navigationController.popViewController(animated: true) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-18T06:11:42.353

试试看....

```
#import "bookdescriViewController.h" // import here your class name 

- (IBAction)backButton:(id)sender 
{
  bookdescriViewController *previosVC = [[bookdescriViewController alloc]init];
  [self.navigationController popViewControllerAnimated:YES]; // go to previous view controller
  [self.navigationController popToRootViewControllerAnimated:YES]; // go to root view controller
  [self.navigationController popToViewController:previosVC animated:YES]; // go to any view controller
  [previosVC release];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-13T23:51:19.103

返回父视图控制器并释放当前视图控制器 ex ：

```
- (void)applicationDidEnterBackground:(NSNotification *)notification
{
    NSInteger numberOfViewControllers = self.navigationController.viewControllers.count;

    UIViewController *vc = [self.navigationController.viewControllers objectAtIndex:numberOfViewControllers - 2];

    [self.navigationController popToViewController:vc animated:NO];
} 
```

或另一个视图控制器

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-04-18T06:00:52.550

```
- (void) goBack:(NSNotification *) notification 
{ 
   if(!self.YOrView.isHidden)
      self.YOrView.hidden = YES;
} 
```

# dependency-injection - 为 Couchbase 客户端管理 DI

> ID：16075528
> 
> 赞同：0
> 
> 时间：2013-04-18T05:59:20.903
> 
> 标签：dependency-injection, ninject, ravendb, couchbase

有了`RavenDb`它真的是小菜一碟：

```
public class DataAccessModule : NinjectModule {
    public override void Load() {
        Bind<IDocumentStore>().ToMethod(
            context => {
                var documentStore = new EmbeddableDocumentStore {
                    DataDirectory = @"~/App_Data/database",
                    UseEmbeddedHttpServer = true
                };
                return documentStore.Initialize();
            }
       ).InSingletonScope();

        Bind<IDocumentSession>().ToMethod(context =>
            context.Kernel.Get<IDocumentStore>().OpenSession()
        ).InRequestScope();
    }
} 
```

如何管理依赖注入`Couchbase .NET client`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:55:05.260

根据[此页面](http://www.couchbase.com/develop/net/current)，在“实例化客户端”标题下：

> 实际上，创建客户的成本很高。客户端在创建连接池并设置线程以获取集群配置时会产生开销。因此，最佳实践是为每个存储桶、每个 AppDomain 创建一个客户端实例。

与 RavenDB 不同，CouchDB 似乎没有“会话”或其他必须根据请求实例化的工作单元容器。

因此，如果您想使用像 Ninject 这样的 DI 容器，您只需将该`CouchbaseClient`类注册为单例，可能使用`ICouchbaseClient`接口。

```
Bind<ICouchbaseClient>().ToMethod(
        context => {
            var client = new CouchbaseClient();
            // do anything else you need to init the client here
            return client;
        }
   ).InSingletonScope(); 
```

# readline - 使用鼠标在终端中移动光标

> ID：16075529
> 
> 赞同：1
> 
> 时间：2013-04-18T05:59:25.167
> 
> 标签：readline, gnome-terminal

假设我写了这样一行：

> 查找 somedir -flag1 opt1 -flag2 opt2 -flag3 opt3 -flag4 opt4 -flag5 opt5 -flag6 opt6 -flag7 opt7 -flag8 opt8 -flag9 opt9 | xargs 命令...

然后我需要对 opt6 进行一些更改，使用键盘，我需要按回到开始，然后按 15 次才能到达那里（一个接一个？对我有好处，希望我学会数数）。

或者，如果我对 Emacs 有一点了解，我会按 ，输入 14，然后将我带到 opt6 之后的空间。

或者，我可以`set -o vi`按下以启动命令模式，然后在`f`or`t`或它们的大写表亲前面加上不准确的计数以到达那里。但我怀疑即使是 vimer 也会这样做，我们使用[EasyMotion](http://www.vim.org/scripts/script.php?script_id=3526)。

有时我只是不想数数，盯着愚蠢的终端我的眼睛很痛。左键单击会很棒，但是鼠标只能在终端中选择文本。但是，当在终端中运行 vim 时，我们可以使用鼠标来移动 ( `set mouse=a`)。如果鼠标可用于vim，为什么不能在终端中使用？

ps：我的系统是Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T18:31:31.223

尝试将此添加到您的 .emacs 文件中：

```
(xterm-mouse-mode t) 
```

另请参阅： [如何让鼠标选择在 Mac 上的 emacs 和 iTerm2 中工作？](https://stackoverflow.com/questions/5710334/how-can-i-get-mouse-selection-to-work-in-emacs-and-iterm2-on-mac)

# android - inflater.inflate 的动态资源 ID

> ID：16075530
> 
> 赞同：0
> 
> 时间：2013-04-18T05:59:25.953
> 
> 标签：android, layout-inflater

我有动态布局，如下面的代码。

```
 linearLayout=new LinearLayout(sActiveContext);      
        linearLayout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
        linearLayout.setOrientation(LinearLayout.VERTICAL); 
        CustomWebView webview=new CustomWebView(sActiveContext);
        FrameLayout layout=webview.createwebview();         
        for (int i = 0; i < arrayList.size(); i++) {
            if(tab.getPosition()==i)
            {
                webview.initwebview(arrayList.get(i));
                mWebViewList.add(i, webview);
                break;
            }
        }
        linearLayout.addView(layout); 
```

现在，我怎样才能膨胀这个线性布局？请给一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:33:08.940

您只需在 onCreateView 的返回语句中返回线性布局对象。否则您可以将该线性布局对象添加到您已经膨胀的视图（myFragmentView）中，您只能膨胀 xml 布局文件而不是动态布局。

# android - 谁能建议我logcat下面的内容是什么？

> ID：16075534
> 
> 赞同：0
> 
> 时间：2013-04-18T05:59:41.560
> 
> 标签：android, runtime-error

```
04-18 10:43:01.765: I/System.out(23278): MANUAL HOURS === 9:8
04-18 10:43:01.820: I/System.out(23278): ---GpsOnOff.detectGps()
04-18 10:43:01.835: D/AndroidRuntime(23278): Shutting down VM
04-18 10:43:01.835: W/dalvikvm(23278): threadid=1: thread exiting with uncaught exception (group=0x40018578)
04-18 10:43:01.851: E/AndroidRuntime(23278): FATAL EXCEPTION: main
04-18 10:43:01.851: E/AndroidRuntime(23278): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.security/com.example.security.Colect_data_from_usr_activity}: android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@40538820 is not valid; is your activity running?
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1491)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at com.example.security.StartInspection$3.onClick(StartInspection.java:72)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.view.View.performClick(View.java:2485)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.view.View$PerformClick.run(View.java:9080)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.os.Handler.handleCallback(Handler.java:587)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.os.Looper.loop(Looper.java:130)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.app.ActivityThread.main(ActivityThread.java:3687)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at java.lang.reflect.Method.invokeNative(Native Method)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at java.lang.reflect.Method.invoke(Method.java:507)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at dalvik.system.NativeStart.main(Native Method)
04-18 10:43:01.851: E/AndroidRuntime(23278): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@40538820 is not valid; is your activity running?
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.view.ViewRoot.setView(ViewRoot.java:532)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.view.Window$LocalWindowManager.addView(Window.java:424)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.app.Dialog.show(Dialog.java:241)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at com.example.security.Colect_data_from_usr_activity.showGPSOnDialog(Colect_data_from_usr_activity.java:195)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at com.example.security.Colect_data_from_usr_activity.detectGps(Colect_data_from_usr_activity.java:172)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at com.example.security.Colect_data_from_usr_activity.onCreate(Colect_data_from_usr_activity.java:95)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-18 10:43:01.851: E/AndroidRuntime(23278):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-18 10:43:01.851: E/AndroidRuntime(23278):    ... 15 more 
```

**Colect_data_from_usr_activity.java**

```
 public class Colect_data_from_usr_activity extends Activity {
 Dialog dialog;
 Button cnf_exit,cnf_cancel;

 private CheckBox chk1, chk2,chk3,chk4,chk5;
 Button  btn_sbmt;
 String address="";
 String adr1,adr2;
 private int mYear;
 private int mMonth;
 private int mDay;
 private TextView edt_date,edt_time,txt_location,edt_note,txt_buildingname;
 private int mhour,mminute,msecond;

 static final int TIME_DIALOG_ID = 1;
 static final int DATE_DIALOG_ID = 0;
 LocationManager loc_mgr ;   
 MyLocationListener location_listener;   

 @Override
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.collect_data_frm_user_layout);

    dialog = new Dialog(ActGroup.group);
    dialog.setContentView(R.layout.confirmexit);
    dialog.setTitle(Html.fromHtml("<font color='white'>Exit</font>"));

    dialog.show();

    cnf_exit=(Button) dialog.findViewById(R.id.cnf_exit);
    cnf_cancel =(Button) dialog.findViewById(R.id.cnf_cancel);
    cnf_exit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            finish();
        }
    });
    cnf_cancel.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            dialog.cancel();
        }
    });

    SimpleDateFormat date_format = new SimpleDateFormat("dd-MMM-yy");
    SimpleDateFormat time_format = new SimpleDateFormat("HH:mm:ss a");
    Date date = new Date();
    getWindow().setSoftInputMode(
    WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
    loc_mgr = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    detectGps();

   /*   Bundle bundle = getIntent().getExtras();
    String strloc = bundle.getString("lctn");
    System.out.println("======>>>>" + strloc);
  */    

    addListenerOnChkIos();
    addListenerOnButton();

    txt_location = (TextView)findViewById(R.id.txt_location);
    txt_location.setText(address);
    txt_buildingname = (TextView)findViewById(R.id.textView_Building_name);
    txt_buildingname.setText(Tracker.building_name);

    edt_note = (TextView) findViewById(R.id.editText_note);
         edt_date = (TextView) findViewById(R.id.txtvw_date);

      Date d = new Date();
  java.text.DateFormat df = android.text.format.DateFormat.getDateFormat(getApplicationContext());
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(new Date());
    edt_date.setText(date_format.format(date));

    edt_time=(TextView) findViewById(R.id.editText_time);
    edt_time.setText(time_format.format(date));

      edt_date.setOnClickListener(new View.OnClickListener() {
       public void onClick(View v) {
           showDialog(DATE_DIALOG_ID);
       }
   });

    final Calendar c = Calendar.getInstance();
    mYear = c.get(Calendar.YEAR);
    mMonth = c.get(Calendar.MONTH);
    mDay = c.get(Calendar.DAY_OF_MONTH);
    mhour = c.get(Calendar.HOUR);
    mminute = c.get(Calendar.MINUTE);
    msecond = c.get(Calendar.SECOND);

    }        

 private void updateDate() {
    edt_date.setText(new StringBuilder()
           .append(mDay).append("/")
           .append(mMonth + 1).append("/")
           .append(mYear).append(" "));
            showDialog(DATE_DIALOG_ID);
  }

   //-------------------------------------------update time---------------------//    
  public void updatetime()
  {
 edt_time.setText(new StringBuilder()
               .append(pad(mhour)).append(":")
                  .append(pad(mminute))); 
  }
  private void detectGps() {
// TODO Auto-generated method stub
System.out.println("---GpsOnOff.detectGps()");
if(loc_mgr.isProviderEnabled(LocationManager.GPS_PROVIDER))
{
    trackGPS();
}
else
{
    showGPSOnDialog();
}  }

   public void showGPSOnDialog() {
// TODO Auto-generated method stub
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
alertDialogBuilder.setMessage("GPS is disabled in your device. Would you like to enable it?")
.setCancelable(false)
.setPositiveButton("Settings",
        new DialogInterface.OnClickListener(){
    public void onClick(DialogInterface dialog, int id){
        Intent callGPSSettingIntent = new Intent(
                android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        startActivityForResult(callGPSSettingIntent,55);
    }
});
alertDialogBuilder.setNegativeButton("Cancel",new DialogInterface.OnClickListener(){
    public void onClick(DialogInterface dialog, int id){
        dialog.cancel();
    }
});
AlertDialog alert = alertDialogBuilder.create();
alert.show();
 }

 protected void showLastKnownLocation() {

Location location = loc_mgr.getLastKnownLocation(LocationManager.GPS_PROVIDER);

if (location == null) {
    System.out.println("LOCATION GPS NULL");
    location = loc_mgr.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
}

if(location!=null)
{
    String message = String.format(
            "Last Location \n Longitude: %1$s \n Latitude: %2$s",
            location.getLongitude(), location.getLatitude()
            );
    System.out.println(message);
    getAddress(location.getLatitude(),location.getLongitude());
}
else
{
    System.out.println("LOCATION NULL");
}}

   @Override  
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
// TODO Auto-generated method stub
detectGps();
 }

 public void trackGPS() {
// TODO Auto-generated method stub
showLastKnownLocation();
location_listener = new MyLocationListener();
loc_mgr.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,location_listener);
 }

 private void getAddress(double latitude,double longitude) {
// TODO Auto-generated method stub
try {
    Geocoder geocoder = new Geocoder(Colect_data_from_usr_activity.this);
    try {
        List<Address> arr =  geocoder.getFromLocation(latitude,longitude,1);
    if(arr.size() !=0 && arr != null)
    {
    for (int i = 0; i < arr.get(0).getMaxAddressLineIndex(); i++) {
    System.out.println("ADDRESSSS   "+arr.get(0).getAddressLine(i));
                if(i == 0)
                {
                    adr1 = arr.get(0).getAddressLine(i);
                }else if(i == 1)
                {
                    adr2 = arr.get(0).getAddressLine(i);
                }
                address += arr.get(0).getAddressLine(i)+"\n";
            }
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        System.out.println("--- GETADRES EXCEPTION");
    }
} catch (Exception e) {
    // TODO: handle exception
    System.out.println(e.toString());
}} 
  public class MyLocationListener implements LocationListener
  {
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    if(location != null)
    {
        getAddress(location.getLatitude(), location.getLongitude());
    }
    else
    {
        System.out.println("--- location null;");
    }
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub
    System.out.println("GpsOnOff.MyLocationListener.onProviderDisabled()");
}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub
    System.out.println("GpsOnOff.MyLocationListener.onProviderEnabled()");
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub
    System.out.println("GpsOnOff.MyLocationListener.onStatusChanged()");
}}

  private void CheckEnableGPS(){
String provider = Settings.Secure.getString(getContentResolver(),
        Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
if(provider.contains("gps")){
    //GPS Enabled
    System.out.println("PROVIDE -- "+provider);
    //  Toast.makeText(Start_hr_activity.this, "GPS Enabled: " + provider,
    //          Toast.LENGTH_LONG).show();
}else{
    //Intent intent = new Intent(Settings.ACTION_SECURITY_SETTINGS);
    Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
    startActivity(intent);
}
}

 private static String pad(int c) 
  {
 if (c >= 10)
      return String.valueOf(c);
 else
      return "0" + String.valueOf(c);
 }

  //Datepicker dialog generation  
  private DatePickerDialog.OnDateSetListener mDateSetListener =
  new DatePickerDialog.OnDateSetListener() {
    public void onDateSet(DatePicker view, int year, 
                         int monthOfYear, int dayOfMonth) {
       mYear = year;
       mMonth = monthOfYear;
       mDay = dayOfMonth;
      updateDate();
   } 
 };

 // Timepicker dialog generation
  private TimePickerDialog.OnTimeSetListener mTimeSetListener =
  new TimePickerDialog.OnTimeSetListener() {

public void onTimeSet(TimePicker view, int hourOfDay, int minute) {

    mhour = hourOfDay;
    mminute = minute;
    updatetime();
       }
   };
 @Override
 protected Dialog onCreateDialog(int id) {
   switch (id) {
   case DATE_DIALOG_ID:
       return new DatePickerDialog(this,
               mDateSetListener, mYear, mMonth,mDay);
   case TIME_DIALOG_ID:
       return new TimePickerDialog(this,
               mTimeSetListener, mhour, mminute, false);
        }
   return null;
 }

  public void addListenerOnChkIos() {

chk1 = (CheckBox) findViewById(R.id.checkBox_windowopen);
chk1.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

    if (((CheckBox) v).isChecked()) {
            }

        }
    });
}

  public void addListenerOnButton() {

    chk1 = (CheckBox) findViewById(R.id.checkBox_windowopen);
    chk2 = (CheckBox) findViewById(R.id.checkBox_dooropen);
    chk3 = (CheckBox) findViewById(R.id.checkBox_employeeonsite);
    chk4 = (CheckBox) findViewById(R.id.checkBox_glassbroken);
    chk5 = (CheckBox) findViewById(R.id.checkBox_doorbroken);

    btn_sbmt = (Button) findViewById(R.id.button_sbmt);
    btn_sbmt.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

    String str_1 = String.valueOf(chk1);
    String str_2 = String.valueOf(chk2);
    String str_3 = String.valueOf(chk3);
    String str_4 = String.valueOf(chk4);
    String str_5 = String.valueOf(chk5);

    String str_dt = edt_date.getText().toString();
    String str_tm = edt_time.getText().toString();
    System.out.println("********_--------________--- "+ str_tm);

    String str_loct = txt_location.getText().toString();
    str_loct.valueOf(txt_location.getText().toString());

    String str_note = edt_note.getText().toString();
    String incidents="";

    if(chk1.isChecked())
     {
        incidents += chk1.getText().toString()+"\n";
     }

    if(chk2.isChecked())
     {
        incidents += chk2.getText().toString()+"\n";
     }
    if(chk3.isChecked())
     {
        incidents += chk3.getText().toString()+"\n";
     }
    if(chk4.isChecked())
     {
        incidents += chk4.getText().toString()+"\n";
     }

    if(chk5.isChecked())
     {
        incidents += chk5.getText().toString()+"\n";
     }

    Bundle b=new Bundle();
    b.putString("c1", incidents);
    b.putString("date", str_dt);
    b.putString("time", str_tm);
    b.putString("lctn",str_loct);
    b.putString("note", str_note);
    b.putString("adr1", adr1);
    b.putString("adr2", adr2);
    loc_mgr.removeUpdates(location_listener);
Intent intnt = new Intent(v.getContext(), Colected_data_result_activity.class);
intnt.putExtras(b);
View view = ActGroup.group.getLocalActivityManager().startActivity("Colected_data_result_activity", intnt.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();
ActGroup.group.replaceView(view);
//  Toast.makeText(Report.this, result.toString(),Toast.LENGTH_LONG).show();
        }
    });
}
  @Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    dialog.show();
}
} 
```

**最新的日志猫**

```
04-18 11:49:34.414: D/AndroidRuntime(27731): Shutting down VM
04-18 11:49:34.414: W/dalvikvm(27731): threadid=1: thread exiting with uncaught exception (group=0x40018578)
04-18 11:49:34.453: E/AndroidRuntime(27731): FATAL EXCEPTION: main
04-18 11:49:34.453: E/AndroidRuntime(27731): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.security/com.example.security.Colect_data_from_usr_activity}: java.lang.NullPointerException
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1491)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at com.example.security.StartInspection$3.onClick(StartInspection.java:72)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.view.View.performClick(View.java:2485)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.view.View$PerformClick.run(View.java:9080)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.os.Handler.handleCallback(Handler.java:587)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.os.Looper.loop(Looper.java:130)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.app.ActivityThread.main(ActivityThread.java:3687)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at java.lang.reflect.Method.invokeNative(Native Method)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at java.lang.reflect.Method.invoke(Method.java:507)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at dalvik.system.NativeStart.main(Native Method)
04-18 11:49:34.453: E/AndroidRuntime(27731): Caused by: java.lang.NullPointerException
04-18 11:49:34.453: E/AndroidRuntime(27731):    at com.example.security.Colect_data_from_usr_activity.detectGps(Colect_data_from_usr_activity.java:159)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at com.example.security.Colect_data_from_usr_activity.onCreate(Colect_data_from_usr_activity.java:66)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-18 11:49:34.453: E/AndroidRuntime(27731):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-18 11:49:34.453: E/AndroidRuntime(27731):    ... 15 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:09:26.183

根据日志，该异常是由于向未在前台运行的活动添加了一个对话框。在 onCreate 中，该对话框构造函数应与当前正在运行的活动的上下文一起传递。但是，根据上面的代码，对话框构造函数将 activitygroup(ActGroup.group 返回 activitygroup ) 作为参数而不是上下文。

如果您仍想使用 ActGroup.group，则该对话框构造函数应包含 ActGroup.group.getCurrentActivity()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:06:58.683

您不能从内部显示对话框`onCreate`；这就是导致神秘异常的原因。窗口尚未创建。将`detectGps`调用（以及显示代码的其他对话框）移至`onStart`它应该可以工作。

但事实上，您应该覆盖`onCreateDialog`并使用`showDialog`来显示对话框。这允许活动在活动生命周期事件期间正确管理对话框。

# ssl - 将 SSL 与 Playframework 一起使用

> ID：16075537
> 
> 赞同：1
> 
> 时间：2013-04-18T05:59:58.177
> 
> 标签：ssl, playframework

我正在尝试将 SSL 与我的 Playframework 1.2.5 应用程序一起使用，但似乎无法使其正常工作。

我有来自 GoDaddy 的 SSL 证书。我从 application.conf 中引用了 key & crt 文件，如下所示：

```
%prod.https.port=443
%prod.certificate.key.file=conf/hawkanalytics.key
%prod.certificate.file=conf/hawkanalytics.com.crt 
```

但是，尝试访问应用程序时出现以下错误：

```
22:49:33,836 INFO  ~ Listening for HTTPS on port 443 ...
java.lang.NullPointerException
        at play.server.ssl.SslHttpServerContextFactory$PEMKeyManager.<init>(SslHttpServerContextFactory.java:94)
        at play.server.ssl.SslHttpServerContextFactory$PEMKeyManager.<clinit>(SslHttpServerContextFactory.java:79)
        at play.server.ssl.SslHttpServerContextFactory.<clinit>(SslHttpServerContextFactory.java:47)
        at play.server.ssl.SslHttpServerPipelineFactory.getPipeline(SslHttpServerPipelineFactory.java:29)
        at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink$Boss.registerAcceptedChannel(NioServerSocketPipelineSink.java:274)
        at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink$Boss.run(NioServerSocketPipelineSink.java:239)
        at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
        at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:679)
22:49:43,372 ERROR ~
java.lang.NullPointerException
        at play.server.ssl.SslHttpServerContextFactory$PEMKeyManager.<init>(SslHttpServerContextFactory.java:94)
        at play.server.ssl.SslHttpServerContextFactory$PEMKeyManager.<clinit>(SslHttpServerContextFactory.java:79)
        at play.server.ssl.SslHttpServerContextFactory.<clinit>(SslHttpServerContextFactory.java:47)
        at play.server.ssl.SslHttpServerPipelineFactory.getPipeline(SslHttpServerPipelineFactory.java:29)
        at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink$Boss.registerAcceptedChannel(NioServerSocketPipelineSink.java:274)
        at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink$Boss.run(NioServerSocketPipelineSink.java:239)
        at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
        at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:679)
22:49:43,504 DEBUG ~ Invalid certificate
javax.net.ssl.SSLHandshakeException: no cipher suites in common
        at sun.security.ssl.Handshaker.checkThrown(Handshaker.java:1031)
        at sun.security.ssl.SSLEngineImpl.checkTaskThrown(SSLEngineImpl.java:508)
        at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:759)
        at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:727)
        at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
        at org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:938)
        at org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:656)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:317)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:207)
        at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:792)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:352)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:334)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:207)
        at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:94)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:372)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:246)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:38)
        at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
        at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T06:27:34.270

检查您使用的“.key”文件是 RSA PRIVATE KEY 还是 PRIVATE KEY。

播放框架似乎需要带有标题“-----BEGIN RSA PRIVATE KEY-----”的 RSA PRIVATE KEY

转换： [如何将私钥转换为 RSA 私钥？](https://stackoverflow.com/questions/17733536/how-do-i-convert-a-private-key-to-an-rsa-private-key).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-06T14:06:53.597

我按照[生产模式文档中的说明和](https://www.playframework.com/documentation/1.3.x/production)[startssl](https://www.startssl.com)的免费证书让这个工作

要对此进行测试，请在本地将以下条目添加到您的主机文件中

```
127.0.0.1 my-ssl-domain.com 
```

接下来将证书复制到`play-app/conf/host.cert`. 现在在文本编辑器中打开您的密钥文件。
如果您`Proc-Type: 4,ENCRYPTED`在密钥文件的顶部看到一行，则它是加密的。我使用startssl webinterface解密了我的，但你应该能够从命令行使用

```
openssl rsa –in my_downloaded_ssl_key.key -out play-app/conf/host.key 
```

如果您的密钥未加密，您可以将其直接复制到`play-app/conf/host.key`

最后编辑`application.conf`并添加以下行：

```
https.port=443
certificate.key.file=conf/host.key
certificate.file=conf/host.cert
certificate.password=my-private-key-password
trustmanager.algorithm=JKS 
```

我在开发模式下测试了这个`sudo play run .`。我正在使用 sudo 绑定到端口 443。您可以[在此答案中找到解决此特定问题的更好方法](https://stackoverflow.com/questions/413807/is-there-a-way-for-non-root-processes-to-bind-to-privileged-ports-1024-on-l)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:13:11.157

我不使用 Play 1.x，但根据有关 HTTPS 配置的[文档](http://www.playframework.com/documentation/1.2.4/production)，它指出：

> 您需要将证书放在 conf 目录中。Play 支持 X509 证书和密钥库证书。X509 证书必须按如下命名： **host.cert**用于证书，**host.key**用于密钥。如果您使用的是密钥库，那么默认情况下它应该被命名为**certificate.jks**。

我不是 100% 肯定它是强制性的，但这意味着你应该有这样的 conf：

```
%prod.https.port=443
%prod.certificate.key.file=conf/host.key
%prod.certificate.file=conf/host.cert 
```

# wix - Should ALLUSERS property be specified in the .wxs file which produce Windows merge modules (*.msm)?

> ID：16075541
> 
> 赞同：2
> 
> 时间：2013-04-18T06:00:08.513
> 
> 标签：wix, windows-installer, wix3.5

We are developing a Windows Installer installer (MSI) using [WiX](http://en.wikipedia.org/wiki/WiX) 3.5, and we have used merge modules in our MSI.

In the MSI, we have specified ALLUSERS property value=1\. Will the Windows merge modules (*.msm) use this property or should we also specify the ALLUSERS property in the .wxs file which produces *.msm files?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:05:48.187

首先，它是[ALLUSERS 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367559%28v=vs.85%29.aspx)。拼写和大小写至关重要。其次，不，MSI 应该设置 ALLUSERS=1 而不是 MSM。这是安装程序的决定，而不是合并模块的问题。

如果合并模块中的组件需要按机器安装，您可以考虑安排一个错误自定义操作来强制执行此操作。

# android - 注销后第二个活动仍在会话中

> ID：16075543
> 
> 赞同：0
> 
> 时间：2013-04-18T06:00:13.600
> 
> 标签：android, android-intent

我正在用安卓开发应用程序。因为我使用 SharedPreferences 进行会话管理的登录和注销活动。我的应用程序注销，将数据存储在 sharedpreferences 以保持会话成功完成。当我从应用程序（第二个活动）注销并呈现到第一个活动（登录活动）但是当我在成功注销后单击模拟器上的后退按钮仍然再次呈现到第二个活动并且遇到某些版本（如 2.3.3 等）时会发生什么例外

```
java.lang.RuntimeException: Unable to destroy activity {com.oj.bs/com.oj.bs.LoginActivity}: java.lang.NullPointerException 
```

任何人都可以解决这个问题。请参考以下代码

以下是**登录活动代码**

```
sessionmngr = new SessionManager(getApplicationContext());

                    JSONObject json_user = jsonObj.getJSONObject("user");
                    sessionmngr.createLoginSession(id,json_user.getString(KEY_UNAME), 
                            json_user.getString(KEY_UEMAIL));
                     .
                     . 
```

以下是**会话管理**

```
public class SessionManager {

SharedPreferences pref;
Editor editor;
Context contxt;
//shared pref mode
int PRIVATE_MODE = 0;
 // Sharedpref file name
private static final String PREF_NAME = "bookingScapePref";

// All Shared Preferences Keys
private static final String IS_LOGIN = "IsLoggedIn";
public static final String KEY_NAME = "name";
public static final String KEY_ID = "id";
public static final String KEY_EMAIL = "email";

public SessionManager(Context context) {
    super();
    this.contxt = context;
    pref = context.getSharedPreferences(PREF_NAME, PRIVATE_MODE);
    editor = pref.edit();
    editor.commit();
}
/**
 * Create login session
 * */
public void createLoginSession(int id,String name, String email) {

    editor.putBoolean(IS_LOGIN,true);
    editor.putString(KEY_NAME, name);
    editor.putString(KEY_EMAIL, email);
    editor.putInt(KEY_ID, id);
    editor.commit();
}
/**
 * Get stored session data
 * */
public HashMap<String, String> getUserDetails() {
    HashMap<String, String> userDetails = new HashMap<String, String>();
    userDetails.put(KEY_NAME, pref.getString(KEY_NAME, null));
    userDetails.put(KEY_EMAIL, pref.getString(KEY_EMAIL, null));
    return userDetails;
}
/**
 * Check login method will check user login status
 * */
public void checkLogin() {

    if (!this.isLoggedIn()) {
        Intent i = new Intent(contxt, LoginActivity.class);
        //closing all the activity
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        //Add new Flag to start new Activity
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        contxt.startActivity(i);
    }
}

public void logoutUser() {
    //clearing all data from sharedPreferences
    editor.clear();
    editor.commit();
    Intent intnt = new Intent(contxt, LoginActivity.class);
    // Closing all the Activities
    intnt.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    // Add new Flag to start new Activity
    intnt.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    // Staring Login Activity
    contxt.startActivity(intnt);
}

/**
 * Quick check for login
 * **/
// Get Login State
public boolean isLoggedIn(){
    return pref.getBoolean(IS_LOGIN, false);
} 
```

}

这是我正在检查会话的**第二个活动**

```
public class ProjectFragActivity extends SherlockFragmentActivity {

SessionManager sessionMngr ;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    sessionMngr = new SessionManager(getApplicationContext());

    Toast.makeText(getApplicationContext(), "User Login Status: " + sessionMngr .isLoggedIn(), 
            Toast.LENGTH_LONG).show();
    sessionMngr.checkLogin();
            .
            . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:08:58.117

我不知道这个会话是如何工作的，顺便说一句，您在执行注销操作时尝试使用 finish() 函数，这样在按下后退按钮时该操作将不存在

# javascript - 区分设备和服务器的互联网连接

> ID：16075544
> 
> 赞同：0
> 
> 时间：2013-04-18T06:00:26.753
> 
> 标签：javascript, ios, ajax, sharepoint

我正在尝试从具有 wifi 功能的手机 (iOS) 访问共享点服务器。基本上，我正在对 Sharepoint 服务器进行 ajax 调用，并使用响应来执行进一步的任务。当我的设备关闭 wifi 时，我得到`http response status`“0”，同样，当设备打开 wifi，但 Sharepoint 服务器不可连接时，状态也显示为“0”。

如何区分这两种情况并以不同方式处理这两种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:41:06.797

使用[可达性](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

ARC 版本： [https ://github.com/tonymillion/Reachability](https://github.com/tonymillion/Reachability)

# opencv - PCA using SVD in OpenCV

> ID：16075551
> 
> 赞同：2
> 
> 时间：2013-04-18T06:00:51.787
> 
> 标签：opencv, image-processing, artificial-intelligence, emgucv

I have a matrix **M** of m*n dimension. **M** contains n number of data each has m dimension and m is very very large than n.

Now my question is, how to compute or what are the steps or procedure to find **PCA** of **M** using **SVD** in **OpenCV** keeping only those eigenvectors containing **99%** of total load or energy ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:26:47.750

您需要首先从数据矩阵 M 计算协方差矩阵 C。您可以使用 OpenCV 的[calcCovarMatrix](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=pca#void%20calcCovarMatrix%28const%20Mat%2a%20samples,%20int%20nsamples,%20Mat&%20covar,%20Mat&%20mean,%20int%20flags,%20int%20ctype%29)函数或简单地计算 C = (M - mu)' x (M - mu)，其中我假设您的数据样本存储为行在 M 和 mu 是您的数据样本的平均值，A' 是矩阵 A 转置。

接下来，对 C 执行 SVD 得到 USU' = SVD(C)，其中 U' 是 U 转置。在这种情况下，来自 SVD 的 V' 与 U' 相同，因为 C 是对称的并且是正定的（如果 C 是满秩的）或半定的（如果它是秩不足的）。U 包含 C 的特征向量。

您要做的是保留 k 个特征向量，即 k 个列（或行？您必须检查 OpenCV 文档是否将特征向量作为行或列返回），其对应的矩阵 S 中的奇异值对应于k 个最大奇异值及其总和除以所有奇异值的总和 >= 0.99。基本上，这里的奇异值对应于特征向量中每个相应特征的方差，并且您保留保留 0.99 即 99% 的方差/能量的前 k 个。

这些特征向量打包成一个矩阵，比如 Uk，是你的 PCA 基础。因为这些特征向量也恰好相互正交，所以 Uk 的转置，Uk'，就是投影矩阵。要获得新测试样本 x 的降维点，只需计算 x_reduced = Uk'*(x - mu);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T06:12:39.817

通常，对于 PCA（即不特定于 OpenCV），您将从协方差矩阵开始。因此，在您的情况下，输入将是`m*m`由原始样本的分量方差形成的方阵。

然后你对（非常大的）方形对称矩阵进行特征向量分解，并且可以提取你需要的最上面的特征向量。使用相应的特征值来确定您的百分比方差覆盖率。

如果您的原始变量的比例不相似 - 即您没有标准化您的数据 - 您可以使用相关矩阵而不是协方差矩阵。

对于使用 OpenCV 的 PCA，Google 提供了[一些非常有用的示例](http://www.bytefish.de/blog/pca_in_opencv/)

# php - GD library create image with dynamic text on it

> ID：16075553
> 
> 赞同：1
> 
> 时间：2013-04-18T06:01:01.177
> 
> 标签：php, sql, image, gd, image-generation

I want to place text generated dynamically from a sql select, on an image created with GD library. I'm using this to create the image and place some text on it, but I want to place the variable $users with the sql select data into the image:

```
$query = "SELECT id, name FROM users WHERE .... ORDER BY id DESC";
while ($line = mysql_fetch_assoc($query)) {

  $users .=  "<img src='https://www.example.com/" . $line['id'] . "/photo'/>&nbsp;" . $line['name'] . "<br />";
}

function  create_image(){
    $im = @imagecreate(550, 600)or die("Cannot Initialize new GD image stream");
    $background_color = imagecolorallocate($im, 255, 255, 0);  // yellow
    $red = imagecolorallocate($im, 255, 0, 0);      // red

    imagestring($im, 1, 5,  10, $users);
    imagestring($im, 2, 5,  50, "Text 2", $red);

    imagepng($im,"image.png");
    imagedestroy($im);
}

create_image();
print "<img src=image.png?".date("U").">"; 
```

The text in the $user variable not appear, how can I do this?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:09:22.743

这是一个如何在 png 图像上绘制文本的示例：

```
$img = imagecreatefrompng($image_path); //$image_path -> on which text to be drawn
        @imagealphablending($img, true);
        @imagesavealpha($img, true);
$textColor = imagecolorallocate($img, 100, 100, 98);
$font = '../fonts/Arial.ttf';

imagettftext($img, 18, 0, 140, 285,$textColor,$font, $name); // $name -> dynamic text to be drawn on image
$path = "path where you want to save created image";

$image = imagejpeg($img, $path);
imagedestroy($img); 
```

完毕..

# mysql - 根据类似查询中的出现获取记录

> ID：16075556
> 
> 赞同：0
> 
> 时间：2013-04-18T06:01:06.190
> 
> 标签：mysql, sql, sql-server

我正在使用一个简单的 my-sql LIKE 查询...我的列记录是“Strong、True、Trap、Strip”等等。

```
"SELECT * FROM table WHERE name LIKE '%tr%'". 
```

像这样。我只是想根据记录的出现位置来获取记录。像 Trap，True，Strip，Strong。是否可以根据类似情况来操作查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:39:44.677

试试这个..并根据你的记录。

```
SELECT * FROM table WHERE name LIKE '%tr%' ORDER BY LOCATE('tr', name),name ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:18:53.317

您的意思是根据搜索字符串的位置对结果进行排序吗？就像是：

```
SELECT * FROM table WHERE name LIKE '%tr%' ORDER BY LOCATE('tr', name) ASC 
```

# c# - How to convert decimal array to string array in C#?

> ID：16075557
> 
> 赞同：0
> 
> 时间：2013-04-18T06:01:14.583
> 
> 标签：c#, arrays

i need to convert Decimal array to string array . How to convert decimal[] to string[] ? Can i use

> `Array.ConvertAll()`

method to do this task?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T06:03:03.807

是的，你可以[`Array.ConvertAll`](http://msdn.microsoft.com/en-us/library/exc45z53.aspx)很简单地使用——你只需要提供转换委托，这很容易用 lambda 表达式完成：

```
string[] strings = Array.ConvertAll(numbers, x => x.ToString()); 
```

您可以使用 LINQ 效率稍低，但更惯用且更灵活：

```
string[] strings = numbers.Select(x => x.ToString()).ToArray(); 
```

或者，如果您实际上并不需要一个数组，并且很高兴它每次迭代它时都执行字符串转换：

```
IEnumerable<string> strings = numbers.Select(x => x.ToString()); 
```

这里的灵活性是`numbers`可以更改为*any* `IEnumerable<decimal>` - 例如，如果您更改为使用 a `List<decimal>`，则无需更改此转换代码。

调用时效率的轻微损失`ToArray`是调用的结果`Select`是一个延迟评估的序列，它不知道它的大小开始 - 所以它不能立即知道输出数组的确切大小，而`ConvertAll`显然知道。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T06:03:15.483

当然你可以使用[`Array.ConvertAll`](http://msdn.microsoft.com/en-us/library/exc45z53.aspx#United%20States%20%28English%29)方法。您只需要一个可以使用 lambda 表达式轻松完成的对话。

```
string[] string_array = Array.ConvertAll(decimal_array, x => x.ToString()); 
```

[`Array.ConvertAll`](http://msdn.microsoft.com/en-us/library/exc45z53.aspx#United%20States%20%28English%29)转换整个数组。它将一个数组中的所有元素转换为另一种类型。

让我们编码吧；

```
decimal[] decimal_array = new decimal[] {1.1M, 1.2M, 1.3M, 1.4M };
string[] string_array = Array.ConvertAll(decimal_array, x => x.ToString());

foreach (var item in string_array)
{
      Console.WriteLine("{0} - {1}", item.GetType(), item);
} 
```

输出将是；

```
System.String - 1.1
System.String - 1.2
System.String - 1.3
System.String - 1.4 
```

这是一个[`DEMO`](http://ideone.com/IlrEVS).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T06:03:03.717

尝试这个

```
decimal[] decArr = new decimal[5];
// ...
string[] strArr = decArr.Select(d => d.ToString("0.00")).ToArray(); 
```

希望这可以帮助

# objective-c - Why does an NSInteger variable have to be cast to long when used as a format argument?

> ID：16075559
> 
> 赞同：145
> 
> 时间：2013-04-18T06:01:19.007
> 
> 标签：objective-c, xcode, casting, nsinteger

```
NSInteger myInt = 1804809223;
NSLog(@"%i", myInt); <==== 
```

The code above produces an error:

> Values of type 'NSInteger' should not be used as format arguments; add an explicit cast to 'long' instead

The corrected `NSLog` message is actually `NSLog(@"%lg", (long) myInt);`. Why do I have to convert the integer value of `myInt` to `long` if I want the value to display?

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2013-04-18T06:43:36.087

如果您在 OS X（64 位）上编译，则会收到此警告，因为在该平台`NSInteger`上定义为`long`64 位整数。`%i`另一方面，格式是 for ，`int`它是 32 位的。所以格式和实际参数大小不匹配。

由于`NSInteger`是 32 位还是 64 位，取决于平台，编译器`long`一般建议添加强制转换。

*更新：*由于 iOS 7 现在也支持 64 位，因此在为 iOS 编译时会收到相同的警告。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-04-18T07:29:22.327

如果您的格式说明符与您的数据类型匹配，则不必强制转换为任何内容。`NSInteger`有关如何根据本机类型定义的详细信息，请参阅 Martin R 的答案。

因此，对于旨在为 64 位环境构建的代码，您可以像这样编写日志语句：

```
NSLog(@"%ld",  myInt); 
```

而对于 32 位环境，您可以编写：

```
NSLog(@"%d",  myInt); 
```

没有演员表，这一切都可以工作。

无论如何使用强制转换的一个原因是好的代码倾向于跨平台移植，如果你明确地强制转换你的变量，它将在 32 位和 64 位上编译干净：

```
NSLog(@"%ld",  (long)myInt); 
```

请注意，这不仅适用于 NSLog 语句，毕竟它们只是调试辅助工具，而且适用`[NSString stringWithFormat:]`于各种派生消息，它们是生产代码的合法元素。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-01-30T11:15:24.933

无需将 NSInteger 传递给 NSLog，只需传递 NSNumber。这将绕过所有强制转换并选择正确的字符串格式说明符。

```
NSNumber foo = @9000;
NSLog(@"foo: %@", foo);
NSInteger bar = 9001;
NSLog(@"bar: %@", @(bar)); 
```

它也适用于 NSUIntegers 而不必担心。[在混合 64 位/32 位环境中](https://stackoverflow.com/questions/20355439/nsinteger-and-nsuinteger-in-a-mixed-64bit-32bit-environment)查看对 NSInteger 和 NSUInteger 的回答

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-23T17:44:48.197

它在使用时保持警告，但在 iOS 10 中`NSLog(@"%ld", (long)myInt);`更改声明后停止警告。`long myInt = 1804809223;`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-03-17T11:38:16.837

OS X 使用多种数据类型——NSInteger、NSUInteger、CGFloat 和 CFIndex——来提供在 32 位和 64 位环境中表示值的一致方法。在 32 位环境中，NSInteger 和 NSUInteger 分别定义为 int 和 unsigned int。在 64 位环境中，NSInteger 和 NSUInteger 分别定义为 long 和 unsigned long。为避免需要根据平台使用不同的 printf 样式类型说明符，您可以 [将此链接](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)中显示的说明符用于 32 位和 64 位环境。

# java - 不显示 android 应用程序的准确输出

> ID：16075561
> 
> 赞同：0
> 
> 时间：2013-04-18T06:01:27.753
> 
> 标签：java, android, xml

我是安卓新手。我创建了一个应用程序，然后是一个教程。我创建了一个餐厅信息页面。当我输入名称和地址和类型时，它应该显示详细信息，但它不是在模拟器中显示的

```
com.example.lunchlist.Restaurant@40ad8sd
com.example.lunchlist.Restaurant@40fhyu5 
```

这是我的xml代码：

**activity_lunch_list.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:stretchColumns="1"
>
<TableLayout android:id="@+id/details"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:stretchColumns="1"
>

<TableRow >

     <TextView
    android:text="@string/Namee" />
<EditText 
android:id="@+id/name"

android:ems="10" 
android:inputType="text"></EditText>

</TableRow>
<TableRow>
     <TextView
    android:text="@string/addresss" />

    <EditText
    android:id="@+id/addr"
    android:inputType="text"></EditText>
 </TableRow>
 <TableRow >
  <TextView android:text="@string/types"/>   
  <RadioGroup android:id="@+id/type">
      <RadioButton android:id="@+id/take_out"
               android:text="@string/take"   />     
      <RadioButton android:id="@+id/sit_down"
               android:text="@string/sit" /> 
      <RadioButton android:id="@+id/delivery"
               android:text="@string/deliveryy" />    
 </RadioGroup>
 </TableRow>

   <Button
    android:id="@+id/button1"
    android:text="@string/save" />
   </TableLayout>
   <ListView android:id="@+id/restaurants"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentTop="true"
android:layout_above="@id/details"
/>

</RelativeLayout> 
```

这是我的java代码：

**午餐清单.java**

```
package com.example.lunchlist;

import java.util.List;
import java.util.ArrayList;
import android.os.Bundle;
import android.app.Activity;
//import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.view.View;
//import android.widget.EditText;
//import android.widget.RadioButton;
import android.widget.RadioGroup;
//import android.widget.Toast;

public class LunchList extends Activity {
List<Restaurant> model=new ArrayList<Restaurant>();
ArrayAdapter<Restaurant> adapter=null;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_lunch_list);
Button save=(Button)findViewById(R.id.button1);
save.setOnClickListener(onSave);
ListView list=(ListView)findViewById(R.id.restaurants);
adapter=new ArrayAdapter<Restaurant>(this,
android.R.layout.simple_list_item_1,
model);
list.setAdapter(adapter);
}
private View.OnClickListener onSave=new View.OnClickListener() {
public void onClick(View v) {
Restaurant r=new Restaurant();
EditText name=(EditText)findViewById(R.id.name);
EditText address=(EditText)findViewById(R.id.addr);
r.setName(name.getText().toString());
r.setAddress(address.getText().toString());
RadioGroup types=(RadioGroup)findViewById(R.id.type);
switch (types.getCheckedRadioButtonId()) {
case R.id.sit_down:
r.setType("sit_down");
break;
case R.id.take_out:
r.setType("take_out");
break;
case R.id.delivery:
r.setType("delivery");
break;
}
adapter.add(r);
};
};
} 
```

这是 Restaurant.java 页面：

```
package com.example.lunchlist;
public class Restaurant  {
    private String name="";
    private String address="";
    private String type="";
    public String getName() {
    return(name);
    }
    public void setName(String name) {
    this.name=name;
    }
    public String getAddress() {
    return(address);
    }
    public void setAddress(String address) {
    this.address=address;
    }

    public String getType() {
    return(type);
    }

    public void setType(String type) {
        this.type=type;
    }

} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:21:29.710

它的问题与您的适配器。您正在将`Restaurant`对象传递给 ，`Adapter`但应该将`String`其设置为`TextView`.

并且该项目不应添加到，`Adapter`而是必须添加到，`ArrayList`并且您必须通过调用将数据更改通知适配器`adapter.notifyDataSetChange()`

即，您的`LunchList`班级应如下所示

```
public class LunchList extends Activity
{
    List<String> model = new ArrayList<String>();
    ArrayAdapter<String> adapter = null;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_lunch_list);
        Button save = (Button) findViewById(R.id.button1);
        save.setOnClickListener(onSave);
        ListView list = (ListView) findViewById(R.id.restaurants);
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, model);
        list.setAdapter(adapter);
    }

    private View.OnClickListener onSave = new View.OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            Restaurant r = new Restaurant();
            EditText name = (EditText) findViewById(R.id.name);
            EditText address = (EditText) findViewById(R.id.addr);
            r.setName(name.getText().toString());
            r.setAddress(address.getText().toString());
            RadioGroup types = (RadioGroup) findViewById(R.id.type);
            switch ( types.getCheckedRadioButtonId() )
            {
                case R.id.sit_down:
                    r.setType("sit_down");
                    break;
                case R.id.take_out:
                    r.setType("take_out");
                    break;
                case R.id.delivery:
                    r.setType("delivery");
                    break;
            }
            model.add(r.getType());
            adapter.notifyDataSetChanged();
        };
    };
} 
```

**注意：**如果要在 ListView 中显示所有三个（名称、地址和类型），请使用自定义 ListView

[带有图像和文本的 Android 自定义 ListView](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

[使用自定义 ArrayAdapter 自定义 Android ListView 项](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

# xcode - 对同一个项目使用多个目标来加载不同的资源图像

> ID：16075563
> 
> 赞同：1
> 
> 时间：2013-04-18T06:01:32.543
> 
> 标签：xcode, target

我有一个带有故事板和一些资源图像的项目。

我想创建另一个应用程序，它将具有所有相同的交互等，除了一组不同的资源图像，它也被添加到不同文件夹中的项目中。我尝试添加一个新目标，但是当我尝试调试它时，我无法让它运行原始情节提要。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:14:27.513

脚步：

1.  右键单击目标并选择复制
2.  将目标的名称更改为您的选择
3.  将重复的 .plist 文件名重命名为您在步骤 2 中选择的名称
4.  单击您选择在何处启动应用程序以进行调试的控件，然后选择管理方案
5.  删除重复的方案（它的名称中很可能有“副本”）
6.  单击“立即自动创建方案”以获取更新的名称

在步骤 4 中提到的控件中选择要调试的方案。

# c++ - 如何使用 OpenCv 将字节数组转换为 IplImage？

> ID：16075565
> 
> 赞同：1
> 
> 时间：2013-04-18T06:01:39.850
> 
> 标签：c++, opencv, bytearray, iplimage

如何使用 OpenCv 将字节数组转换为 IplImage？

是否可以使用 Opencv 在此处从字节数组转换为 IplImage ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:47:27.603

简称

```
uchar mybytes[]={1,255,0,4,1,4,76,43,45};
Mat mymat(3,3,CV_8UC1,mybytes); 
```

或分析

```
int nl= mymat.rows; 
int nc= mymat.cols;
for (int j=0; j<nl; j++) 
{
    uchar* data= mymat.ptr<uchar>(j);
    for (int i=0; i<nc; i++) 
        data[i]= mybytes[j*i];
} 
```

# javascript - 使用 Javascript 将 fontWeight 的 CSS 属性应用于单选按钮的标签标签

> ID：16075566
> 
> 赞同：1
> 
> 时间：2013-04-18T06:01:41.837
> 
> 标签：javascript, input, label, radio

我在互联网上搜索了一个解决方案，我已经无能为力了。我已经用 Javascript 进行了几个星期的试验，但在我的一生中，我无法让这个新项目工作。

我最初的目标是为我为我的一门课程开发的在线测验的所有正确答案加粗。我可以很容易地使用 CSS 将正确答案加粗，并标有“正确”的类名，但我不能让 Javascript 执行命令以在单击按钮时执行相同的操作。

如果有人可以帮助我解决这个问题，将不胜感激。ClearCorrectAnswers() 函数旨在反转 ShowCorrectAnswers() 的效果。

我一直在开发的 javascript 可以在下面找到：

```
function ShowCorrectAnswers() {
    var correctAnswers = document.getElementsByClassName("Correct");

    for (var count = 0; count < correctAnswers.length; count++) {
        correctAnswers[count].style.fontWeight = "bold";
    }
}

function ClearCorrectAnswers() {
    var correctAnswers = document.getElementByClassName("Correct");

    for (var count = 0; count < correctAnswers.length; count++) {
        correctAnswers[count].style.fontWeight = "normal";
    }
} 
```

HTML 同样可以在下面找到：

```
<input type="submit" value="Submit Test" onClick="ComputeGrade()">
<button type="button" onClick="ShowCorrectAnswers()">Show Correct Answer</button>
<button type="button" onClick="ClearCorrectAnswers">Clear Correct Answer</button>
<p>1\. The external behavior of a system is described by _____.
    <br>
    <input type="radio" id="1" name="As1" value="1">
    <label class="Correct">A. functional models</label>
    <br>
    <input type="radio" id="2" name="As1" value="0">
    <label>B. structural models</label>
    <br>
    <input type="radio" id="3" name="As1" value="0">
    <label>C. behavioral models</label>
    <br>
    <input type="radio" id="4" name="As1" value="0">
    <label>D. interaction diagrams</label>
    <br>
    <input type="radio" id="5" name="As1" value="0">
    <label>E. statechart diagrams</label>
</p>
<p>2\. An analyst depicts the static view of an information system with _____.
    <br>
    <input type="radio" name="As2" value="0">
    <label>
        <label>A. use-case models</label>
        <br>
        <input type="radio" name="As2" value="1">
        <label class="Correct">B. structural models</label>
        <br>
        <input type="radio" name="As2" value="0">
        <label>C. behavioral models</label>
        <br>
        <input type="radio" name="As2" value="0">
        <label>D. interaction diagrams</label>
        <br>
        <input type="radio" name="As2" value="0">
        <label>E. statechart diagrams</label>
</p>
<p>3\. The two types of interaction diagrams are ______________ diagrams.
    <br>
    <input type="radio" name="As3" value="0">
    <label>A. use-case and sequence</label>
    <br>
    <input type="radio" name="As3" value="0">
    <label>B. class and sequence</label>
    <br>
    <input type="radio" name="As3" value="1">
    <label class="Correct">C. sequence and communication</label>
    <br>
    <input type="radio" name="As3" value="0">
    <label>D. object and communication</label>
    <br>
    <input type="radio" name="As3" value="0">
    <label>E. statechart and object</label>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:07:14.930

```
<script>
function ShowCorrectAnswers() {
    var correctAnswers = document.getElementsByClassName("Correct");

    for (var count = 0; count < correctAnswers.length; count++) {
        correctAnswers[count].style.fontWeight = "bold";
    }
}

function ClearCorrectAnswers() {

    var correctAnswers = document.getElementsByClassName("Correct");

    for (var count = 0; count < correctAnswers.length; count++) {
        correctAnswers[count].style.fontWeight = "normal";
    }
}
</script> 
```

和 HTML：

```
<input type="submit" value="Submit Test" onClick="ComputeGrade()">
<button type="button" onClick="ShowCorrectAnswers()">Show Correct Answer</button>
<button type="button" onClick="ClearCorrectAnswers()">Clear Correct Answer</button>

<p>1\. The external behavior of a system is described by _____.<br>
    <input type="radio" id="1" name="As1" value="1"><label class="Correct"> A. functional models</label><br>
    <input type="radio" id="2" name="As1" value="0"><label> B. structural models</label><br>
    <input type="radio" id="3" name="As1" value="0"><label> C. behavioral models</label><br>
    <input type="radio" id="4" name="As1" value="0"><label> D. interaction diagrams</label><br>
    <input type="radio" id="5" name="As1" value="0"><label> E. statechart diagrams</label>
</p>

<p>2\. An analyst depicts the static view of an information system with _____.<br>
    <input type="radio" name="As2" value="0"><label><label> A. use-case models</label><br>
        <input type="radio" name="As2" value="1"><label class="Correct"> B. structural models</label><br>
        <input type="radio" name="As2" value="0"><label> C. behavioral models</label><br>
        <input type="radio" name="As2" value="0"><label> D. interaction diagrams</label><br>
        <input type="radio" name="As2" value="0"><label> E. statechart diagrams</label>
</p>

<p>3\. The two types of interaction diagrams are ______________ diagrams.<br>
    <input type="radio" name="As3" value="0"><label> A. use-case and sequence</label><br>
    <input type="radio" name="As3" value="0"><label> B. class and sequence</label><br>
    <input type="radio" name="As3" value="1"><label class="Correct"> C. sequence and communication</label><br>
    <input type="radio" name="As3" value="0"><label> D. object and communication</label><br>
    <input type="radio" name="As3" value="0"><label> E. statechart and object</label>
</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:26:57.420

你最好在 CSS 中做艰苦的工作，只切换一次父类，而不是遍历每个`.correct`标签。

所以，假设你有这个 HTML：

```
<form id="quiz">
    ...
</form> 
```

你会在某个地方有这个 CSS：

```
<style>
#quiz.showAnswers .correct {
    font-weight: bold;
}
</style> 
```

而这个JavaScript：

```
<script>
function showCorrectAnswers () {
    document.getElementById('quiz').className = 'showAnswers';
}

function clearCorrectAnswers () {
    document.getElementById('quiz').className = '';
}
</script> 
```

# android - Android 选项卡帮助。应用程序打开时如何将第二个选项卡设置为默认值？

> ID：16075572
> 
> 赞同：6
> 
> 时间：2013-04-18T06:02:17.290
> 
> 标签：android, tabs, android-tabhost

我创建了一个带有 3 个选项卡的应用程序。该应用程序运行良好，但我希望在应用程序打开时选择并加载第二个选项卡。我该如何设置？

这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TabHost tabHost = getTabHost();

        // Tab for Home
        TabSpec homespec = tabHost.newTabSpec("Home");
        // setting Title and Icon for the Tab
        homespec.setIndicator("Home",getResources().getDrawable(R.drawable.icons_home_tab));
        Intent photosIntent = new Intent(this, HomeActivity.class);
        homespec.setContent(photosIntent);

        // Tab for Child
        TabSpec childspec = tabHost.newTabSpec("Child");
        childspec.setIndicator("Child",getResources().getDrawable(R.drawable.icons_child_tab));
        Intent homeIntent = new Intent(this, ChildActivity.class);
        childspec.setContent(homeIntent);

        // Tab for Account
        TabSpec accspec = tabHost.newTabSpec("Account");
        accspec.setIndicator("Account",getResources().getDrawable(R.drawable.icons_account_tab));
        Intent accIntent = new Intent(this, AccountActivity.class);
        accspec.setContent(accIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(homespec); // Adding home tab
        tabHost.addTab(childspec); // Adding child tab
        tabHost.addTab(accspec); //Adding account tab
        } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T06:04:44.440

在 tabHost 中添加选项卡后，使用此方法设置当前选项卡

```
tabHost.setCurrentTab(1);  // here pass the tab index its starting from 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T06:04:54.607

`tabHost.setCurrentTab(1);`在你的 onCreate 中使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-01T22:31:55.340

```
public override void OnResume() 
    {
        base.OnResume();
        tabHost.CurrentTab = 1; //index of the tab you want to set to default.
    } 
```

覆盖 OnResume() 并将 tabHost 的 CurrentTab 属性分配给您想要的选项卡的索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-11T05:33:49.173

如果你有碎片，会有一些困难。黑客是使选项卡选择延迟。请参阅**[此答案中的代码](https://stackoverflow.com/a/52752853/1112963)**。

# android - save Json object to a class with variable name same as in Json

> ID：16075575
> 
> 赞同：1
> 
> 时间：2013-04-18T06:02:31.627
> 
> 标签：android, json, gson

I want to save Json object to a class with variable names same as in Json (Just like what Gson does). My problem to use Gson is, The datatype of the class variable in json changes according to datas available in server. For example, some times, it contains a list of data,and some other time, it contains "" for null. my Gson crashes while dealing with both the cases for a single code.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:36:14.620

您可以使用普通的 JSON 对象，GSON 用于预定义的数据类型，它使处理数据更容易。如果您的数据类型发生变化，最好使用 JSON 本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:20:30.320

如果您使用过旧版本的 GSON，请尝试使用 GSON2。

# macos - how to install ffmpeg on macbookpro osx 10.8.3

> ID：16075576
> 
> 赞同：-4
> 
> 时间：2013-04-18T06:02:35.807
> 
> 标签：macos, ffmpeg

I have downloaded FFMPEG from this link [http://www.ffmpeg.org/download.html](http://www.ffmpeg.org/download.html) under FFmpeg Mac OS X Builds section, all builds come with .7z extension i need help how to configure it on my machine.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:57:49.890

安装 FFMPEG 的最佳方式是使用 Homebrew

```
ruby -e "$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)" 
```

上面的命令将安装 Homebrew 然后安装 FFMPEG 使用以下命令

```
brew install ffmpeg 
```

干杯

# vsto - 检查以确保只有一名检查员处于打开状态

> ID：16075577
> 
> 赞同：1
> 
> 时间：2013-04-18T06:02:37.097
> 
> 标签：vsto, outlook-addin, outlook-2010

我正在编写一个 VSTO Outlook 插件，并打开我自己的检查器（表单）让用户输入信息。在打开另一个表单之前，如何检查以确保未加载表单实例？

# asp.net - How to generate report on a button click in an asp.net website in visual studio 2010?

> ID：16075578
> 
> 赞同：1
> 
> 时间：2013-04-18T06:02:37.913
> 
> 标签：asp.net, visual-studio-2010, crystal-reports, reportviewer

I am building a billing software for school. I am having problems on printing the bill.

*   1.Should I use report viewer or Crystal Report ?? Whichever I use I have to bind report source to one of the table in my sql server database.
*   2.How can i do this??

*   3.Also I want to generate bill on a button click. How can I do this??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:16:45.187

是否要使用 SSRS 或 Crystal 完全取决于您，如果您想了解两者的优缺点，我建议您阅读 -[将 SQL Server Reporting Services 与 Crystal Reports 进行比较](https://stackoverflow.com/questions/168427/compare-sql-server-reporting-services-to-crystal-reports)。

您会发现大量开发人员选择使用 SSRS，如果您也有同感，这里有一个很好的分步示例来帮助您入门 - [ASP.net 中的 RDLC 报告](http://kishor-naik-dotnet.blogspot.com/2011/06/aspnet-rdlc-report-in-aspnet.html)

# solr - 如何在不解析为 solr 的情况下索引 apache nutch 获取的内容

> ID：16075580
> 
> 赞同：1
> 
> 时间：2013-04-18T06:02:43.267
> 
> 标签：solr, nutch

我需要将 nutch 抓取的获取内容索引到 solr 中。nutch 索引中的 Solrjob 仅解析内容。我需要所有 HTML 标签的内容。有人可以指导我吗？

谢谢苏德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T20:23:02.327

Nutch 有一系列解析器和过滤器，可以从获取的 HTML 中提取内容。

您需要实现 HtmlParserFilter，将原始内容写入元标记并将其插入 SOLR 字段。

下面的教程是关于索引过滤器的，但它遵循相同的流程。

[Nutch 插件](http://wiki.apache.org/nutch/WritingPluginExample)

你的类应该实现“HtmlParseFilter”而不是“IndexingFilter”。覆盖 filter() 方法：

```
@Override
public ParseResult filter(Content content, ParseResult parseResult, HTMLMetaTags metaTags, DocumentFragment doc) {
    Metadata metadata = parseResult.get(content.getUrl()).getData().getParseMeta();
    byte[] rawContent = content.getContent();
    String str = new String(rawContent, "UTF-8");
    metadata.add("rawcontent", str);
        return parseResult;
} 
```

之后，更改您的 schema.xml 并添加新字段：

```
<field name="metatag.rawcontent" type="text" stored="true" indexed="true" multiValued="false"/> 
```

编译、部署、重新抓取、重新索引。

您现在应该在 SOLR 索引中看到原始 HTML 内容。

笔记： -

确保您已启用[元标记插件](http://wiki.apache.org/nutch/IndexMetatags)。这很重要，因为您本质上是将原始内容存储为元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T15:01:56.150

您可以将 nutch 2.1 与 Cassandra 后端或 Mysql（它有一些错误）或 HBase 一起使用。然后你就可以在数据库中进行查询，并从页面中获取所有的html代码。

# awk - 如何在 AWK 3.1.3 中按定义的顺序打印数组

> ID：16075582
> 
> 赞同：6
> 
> 时间：2013-04-18T06:02:51.370
> 
> 标签：awk

我搜索了一下，发现在 AWK 4.0 之后，我们可以通过在 for 循环之前放置 PROCINFO["sorted_in"] 命令来按定义的顺序打印一个数组。例如

```
 PROCINFO["sorted_in"] = "@ind_num_asc"
    for( i in array)
          print i, array[i] 
```

在 AWK 4.0.2 中，它可以工作。但是，我在 AWK 3.1.3 环境下试了一下，还是不行。这个早期版本的AWK不支持这个功能吗？如何在 AWK 3.1.3 中实现这个目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:32:22.397

只需保留`order`带有数字索引的第二个数组和第一个数组的键作为值。然后，您可以按顺序遍历`order`并查找 的值`array`：

```
for (i = 1; i < length(order); i++) {
  print order[i], array[order[i]]
} 
```

在构建时`order`，您可能需要检查键是否已存在于中`array`，以防止键`array`被多次显示。

# java - 如何使用 java 变量设置语言环境

> ID：16075584
> 
> 赞同：1
> 
> 时间：2013-04-18T06:03:03.260
> 
> 标签：java, jsp, jstl

我在 java 变量中有语言代码。我想将该代码设置为 setLocale 值，例如

```
<%

String lang="en";

%>
<fmt:setLocale value="${lang}" scope="session"/> 
```

但这不能正常工作。但是当我设置喜欢

`<fmt:setLocale value="en" scope="session"/>`，它工作得很好。语言可能是 es,de... 所以我想将值设置为 `<fmt:setLocale value="${lang}" scope="session"/>`.

有什么解决办法吗？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:52:23.910

试试这种方式：

```
<fmt:setLocale value="<%=lang%>" scope="session"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:15:39.047

如评论使用`set`标签中所述

```
 <c:set var="language" value="${not empty param.language ?
          param.language : not empty language  ? language :
                        pageContext.request.locale}" scope="session" />
                                           <fmt:setLocale value="${language}" /> 
```

有关完整说明，请参见此处[如何国际化 Java Web 应用程序？](https://stackoverflow.com/questions/4276061/how-to-internationalize-a-java-web-application)

# dictionary - How to sort result from foursquare place api according to distance?

> ID：16075587
> 
> 赞同：1
> 
> 时间：2013-04-18T06:03:08.750
> 
> 标签：dictionary, foursquare

I am fetching nearby restaurants from foursquare API, i am getting json which contains details of restaurants.it has the **"distance=XX"**.How can I get the result as least distance on first index of array ?

I found something - **"intent=match"**.But dont know how to give that in the below url Please help me.Thanks in advance

[https://api.foursquare.com/v2/venues/search?radius=500&ll=10.00915,76.318738&limit=50&client_id=CLIENT_ID&v=YYYYMMDD&client_secret=CLIENT_SECRET&categoryId=4d4b7105d754a06374d81259](https://api.foursquare.com/v2/venues/search?radius=500&ll=10.00915,76.318738&limit=50&client_id=CLIENT_ID&v=YYYYMMDD&client_secret=CLIENT_SECRET&categoryId=4d4b7105d754a06374d81259)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:01:04.670

`intent=match`对您输入的位置和查询非常敏感，它通常用于查找与您要查找的内容完全匹配的内容（例如，Joe's Coffeeshop*就在*这个精确的纬度/经度上）。这可能是也可能不是您要查找的内容，但您只需将其作为另一个参数添加到您的 API 调用中即可使用它，就像您添加`categoryId`.

一般来说，`intent=checkin`根据您的确切要求，使用（这是调用默认的）应该足够了。它返回按距离排序的结果，但也考虑到有人在那里签到的可能性，所以有时第一个结果并不是最接近的。

# java - 从 DAO 类的单个列表中的两个查询中获取结果

> ID：16075591
> 
> 赞同：2
> 
> 时间：2013-04-18T06:03:22.920
> 
> 标签：java, mysql, spring

我试图在 DAO 类中获取两个不同的选择查询作为 java 中的单个列表。

```
public List<SBCDocumentDetailsVO> getsBCDetails() throws DataAccessException, SQLException{
List<SBCDocumentDetailsVO> sbcDocList = new ArrayList<SBCDocumentDetailsVO>();

MapSqlParameterSource namedParameter = new MapSqlParameterSource();

//using NamedParameterJdbcTemplate for querying
sbcDocList = this.getNamedParameterJdbcTemplate().query(
        sbcDetailsQuery, namedParameter,
        new sBCDetailsMapper());
return sbcDocList; 
```

}

我的选择查询是

```
SELECT State, marketId, COUNT(marketId)
FROM BatchReport
GROUP BY State, marketID

SELECT
SUM(CASE marketID WHEN 'in' THEN 1 ELSE 0 END) AS totalCountInd 
,SUM(CASE marketID WHEN 'gr' THEN 1 ELSE 0 END) AS totalCountGrp
FROM BatchReport 
```

任何人都可以帮助我在一个列表中获取 2 个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:12:36.113

从我的角度来看，您有两种可能性：

* * *

**集合合并**

这个想法是执行两个查询并将两个结果添加到一个列表中：

```
...
List result = new ArrayList();
result.addAll(firstQuery());
result.addAll(secondQuery());
... 
```

* * *

**SQL 联合**

对于 SQL Union，您将有一个查询用于检索整个结果列表。[您可以在此处](http://www.w3schools.com/sql/sql_union.asp)查看如何操作

在你的情况下，你不能做这样的事情：

```
SELECT 
   State, 
   marketId, 
   COUNT(marketId) 
FROM 
   BatchReport 
GROUP BY 
   State, 
   marketID 
UNION
SELECT 
   'Total', 
   SUM(CASE marketID WHEN 'in' THEN 1 ELSE 0 END) AS totalCountInd,
   SUM(CASE marketID WHEN 'gr' THEN 1 ELSE 0 END) AS totalCountGrp 
FROM BatchReport 
```

* * *

我会花时间在 SQL UNION 解决方案上，因为它通过查询数据库一次来解决问题。

你可以在这里看到一个**演示**：[http ://sqlfiddle.com/#!2/e5285/1](http://sqlfiddle.com/#!2/e5285/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:29:23.070

简单的方法可以是创建一个查询并创建一个包含所有列的单个 bean。以下查询应该有帮助：

```
SELECT State, marketId, COUNT(marketId),SUM(CASE marketID WHEN 'in' THEN 1 ELSE 0 END) AS totalCountInd ,SUM(CASE marketID WHEN 'gr' THEN 1 ELSE 0 END) AS totalCountGrp
FROM BatchReport
GROUP BY State, marketID 
```

请原谅我的语法 [我在 oracle 上工作]

# opencv - 如何获取图像uchar数组的实际长度opencv2

> ID：16075594
> 
> 赞同：0
> 
> 时间：2013-04-18T06:03:35.810
> 
> 标签：opencv

我正在尝试使用 GPU 模糊图像。我将编写自己的 GPU 例程。我正在使用 Opencv2 库进行图像读取。

我想访问图像数组（uchar *），为此我想通了；我可以做到以下几点

```
cv::Mat im = imread( 'lena.jpg'); 
```

我还可以弄清楚我可以访问 uchar* 数组——

```
uchar * data = im.data; 
```

现在的问题是，为了提高效率，在其中添加了填充字节。这意味着这个数组的大小可能大于（或等于）width*height*channels。

怎么获得

*   a) 这个数组的实际大小
*   b）像widthStep这样的变量或用于逐行递增的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:08:01.267

您需要所谓的*stride*或*step-width*。
您可以使用 访问它`im.step`，如下所示：

```
cv::Mat im = imread( 'lena.jpg');
uchar * data = im.data;
int stepWidth = im.step; 
```

# nginx - Nginx ：对于 Http 范围请求，即 206 ，自定义标头在 x-redirect 链的情况下被阻止

> ID：16075598
> 
> 赞同：0
> 
> 时间：2013-04-18T06:04:01.530
> 
> 标签：nginx

当我们希望通过 X-redirect 链传播 Etag 作为 Range 请求的 Http 响应（即 Http 206）的一部分时，我们遇到了这种奇怪的行为。似乎 nginx 过滤掉了任何额外的服装标头/tmp 变量，作为通过 x- 的最终响应的一部分重定向非 200 响应。请建议解决此问题。

这是正常与范围请求清除的调试模式下的日志数据，显示自定义标头被过滤掉。

```
Without Range :

2013/04/16 04:08:22 [debug] 23457#0: *385 event timer del: 11: 1366110562151
2013/04/16 04:08:22 [debug] 23457#0: *385 event timer add: 11: 300000:1366110802151
2013/04/16 04:08:22 [debug] 23457#0: *385 http run request: "get_file?path=/Shared/Documents/loader.html"
2013/04/16 04:08:22 [debug] 23457#0: *385 http upstream check client, write event:1, "/v2_0/get_file"
2013/04/16 04:08:22 [debug] 23457#0: *385 http upstream recv(): -1 (11: Resource temporarily unavailable)
2013/04/16 04:08:22 [debug] 23457#0: *385 http upstream request: "/v2_0/get_file?path=/Shared/Documents/loader.html"
2013/04/16 04:08:22 [debug] 23457#0: *385 http upstream process header
2013/04/16 04:08:22 [debug] 23457#0: *385 malloc: 000000000E8621C0:32768
2013/04/16 04:08:22 [debug] 23457#0: *385 recv: fd:11 1229 of 32646
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy status 200 "200 OK"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header: "Last-Modified: Tue, 16 Apr 2013 09:47:42 GMT"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header: "Etag: 0853bce8-bf84-4cc4-9c7e-d4182bafafad"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header: "Date: Tue, 16 Apr 2013 11:08:22 GMT"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header: "Server: CherryPy/3.1.2"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header: "Connection: close"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header: "Content-Disposition: attachment;filename="loader.html""

2013/04/16 04:08:22 [debug] 23457#0: *385 http script complex value
2013/04/16 04:08:22 [debug] 23457#0: *385 http script set $compressed
2013/04/16 04:08:22 [debug] 23457#0: *385 http script complex value
2013/04/16 04:08:22 [debug] 23457#0: *385 http script set $serve_decompressed
2013/04/16 04:08:22 [debug] 23457#0: *385 http script complex value
2013/04/16 04:08:22 [debug] 23457#0: *385 http script var: "0853bce8-bf84-4cc4-9c7e-d4182bafafad"
2013/04/16 04:08:22 [debug] 23457#0: *385 http script set $etag
2013/04/16 04:08:22 [debug] 23457#0: *385 http script complex value
2013/04/16 04:08:22 [debug] 23457#0: *385 http script var: "Tue, 16 Apr 2013 09:47:42 GMT"
2013/04/16 04:08:22 [debug] 23457#0: *385 http script set $last_modified
2013/04/16 04:08:22 [debug] 23457#0: *385 http script complex value
2013/04/16 04:08:22 [debug] 23457#0: *385 http script var: "205"
2013/04/16 04:08:22 [debug] 23457#0: *385 http script set $expected_size
2013/04/16 04:08:22 [debug] 23457#0: *385 http script complex value
2013/04/16 04:08:22 [debug] 23457#0: *385 http script var: "205"
2013/04/16 04:08:22 [debug] 23457#0: *385 http script set $actual_size
--
2013/04/16 04:08:22 [debug] 23457#0: *385 malloc: 000000000E906930:32768
2013/04/16 04:08:22 [debug] 23457#0: *385 posix_memalign: 000000000E90E940:4096 @16
2013/04/16 04:08:22 [debug] 23457#0: *385 recv: fd:11 350 of 32638
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy status 200 "200 OK"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header: "Server: Apache-Coyote/1.1"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header: "Accept-Ranges: bytes"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header: "Content-Length: 205"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header: "Date: Tue, 16 Apr 2013 11:08:22 GMT"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header: "Connection: close"
2013/04/16 04:08:22 [debug] 23457#0: *385 http proxy header done
2013/04/16 04:08:22 [debug] 23457#0: *385 http script var: "0853bce8-bf84-4cc4-9c7e-d4182bafafad"
2013/04/16 04:08:22 [debug] 23457#0: *385 http script var: "0853bce8-bf84-4cc4-9c7e-d4182bafafad"
2013/04/16 04:08:22 [debug] 23457#0: *385 http script var: "Tue, 16 Apr 2013 09:47:42 GMT"
2013/04/16 04:08:22 [debug] 23457#0: *385 HTTP/1.1 200 OK
Server: nginx/1.0.4
Date: Tue, 16 Apr 2013 11:08:22 GMT
Content-Type: text/html;charset=ISO-8859-1
Connection: keep-alive
Content-Disposition: attachment;filename="loader.html"
Accept-Ranges: none
Content-Length: 205
Etag: 0853bce8-bf84-4cc4-9c7e-d4182bafafad
Last-Modified: Tue, 16 Apr 2013 09:47:42 GMT
=================================================================================

With Range :

2013/04/16 04:07:35 [debug] 23457#0: *373 event timer del: 11: 1366110515893
2013/04/16 04:07:35 [debug] 23457#0: *373 event timer add: 11: 300000:1366110755894
2013/04/16 04:07:35 [debug] 23457#0: *373 http run request: "/v2_0/get_file?path=/Shared/Documents/loader.html"
2013/04/16 04:07:35 [debug] 23457#0: *373 http upstream check client, write event:1, "/v2_0/get_file"
2013/04/16 04:07:35 [debug] 23457#0: *373 http upstream recv(): -1 (11: Resource temporarily unavailable)
2013/04/16 04:07:35 [debug] 23457#0: *373 http upstream request: "/v2_0/get_file?path=/Shared/Documents/loader.html"
2013/04/16 04:07:35 [debug] 23457#0: *373 http upstream process header
2013/04/16 04:07:35 [debug] 23457#0: *373 malloc: 000000000E8621C0:32768
2013/04/16 04:07:35 [debug] 23457#0: *373 recv: fd:11 1258 of 32646
2013/04/16 04:07:35 [debug] 23457#0: *373 http proxy status 200 "200 OK"
2013/04/16 04:07:35 [debug] 23457#0: *373 http proxy header: "Etag: 0853bce8-bf84-4cc4-9c7e-d4182bafafad"
2013/04/16 04:07:35 [debug] 23457#0: *373 http proxy header: "Date: Tue, 16 Apr 2013 11:07:35 GMT"
2013/04/16 04:07:35 [debug] 23457#0: *373 http proxy header: "Server: CherryPy/3.1.2"
2013/04/16 04:07:35 [debug] 23457#0: *373 http proxy header: "Connection: close"
2013/04/16 04:07:35 [debug] 23457#0: *373 http proxy header: "Content-Disposition: attachment;filename="loader.html""

2013/04/16 04:07:35 [debug] 23457#0: *373 http script complex value
2013/04/16 04:07:35 [debug] 23457#0: *373 http script set $compressed
2013/04/16 04:07:35 [debug] 23457#0: *373 http script complex value
2013/04/16 04:07:35 [debug] 23457#0: *373 http script set $serve_decompressed
2013/04/16 04:07:35 [debug] 23457#0: *373 http script complex value
2013/04/16 04:07:35 [debug] 23457#0: *373 http script var: "0853bce8-bf84-4cc4-9c7e-d4182bafafad"
2013/04/16 04:07:35 [debug] 23457#0: *373 http script set $etag
2013/04/16 04:07:35 [debug] 23457#0: *373 http script complex value
2013/04/16 04:07:35 [debug] 23457#0: *373 http script var: "Tue, 16 Apr 2013 09:47:42 GMT"
2013/04/16 04:07:35 [debug] 23457#0: *373 http script set $last_modified
2013/04/16 04:07:35 [debug] 23457#0: *373 http script complex value
2013/04/16 04:07:35 [debug] 23457#0: *373 http script var: "205"
2013/04/16 04:07:35 [debug] 23457#0: *373 http script set $expected_size
2013/04/16 04:07:35 [debug] 23457#0: *373 http script complex value
2013/04/16 04:07:35 [debug] 23457#0: *373 http script var: "205"
2013/04/16 04:07:35 [debug] 23457#0: *373 http script set $actual_size

2013/04/16 04:05:18 [debug] 23457#0: *352 http proxy status 206 "206 Partial Content"
2013/04/16 04:05:18 [debug] 23457#0: *352 http proxy header: "Server: Apache-Coyote/1.1"
2013/04/16 04:05:18 [debug] 23457#0: *352 http proxy header: "Accept-Ranges: bytes"
2013/04/16 04:05:18 [debug] 23457#0: *352 http proxy header: "Content-Range: bytes 10-20/205"
2013/04/16 04:05:18 [debug] 23457#0: *352 http proxy header: "Content-Length: 11"
2013/04/16 04:05:18 [debug] 23457#0: *352 http proxy header: "Date: Tue, 16 Apr 2013 11:05:18 GMT"
2013/04/16 04:05:18 [debug] 23457#0: *352 http proxy header: "Connection: close"
2013/04/16 04:05:18 [debug] 23457#0: *352 http proxy header done
2013/04/16 04:05:18 [debug] 23457#0: *352 HTTP/1.1 206 Partial Content
Server: nginx/1.0.4`enter code here`
Date: Tue, 16 Apr 2013 11:05:18 GMT
Content-Type: text/html;charset=ISO-8859-1
Connection: keep-alive
Content-Disposition: attachment;filename="loader.html"
Accept-Ranges: none
Content-Range: bytes 10-20/205
Content-Length: 11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:44:14.760

你的两个回答都有

```
Accept-Ranges: none 
```

表示您的服务器不支持范围请求。

参考：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

> ```
>  Servers that do not accept any kind of range request for a
>   resource MAY send
> 
>       Accept-Ranges: none
> 
>   to advise the client not to attempt a range request. 
> ```

不知道你的 nginx 配置。因为只有 http 1.1 支持范围请求，我猜你可能错过了这个指令：

```
 proxy_http_version 1.1; 
```

Nginx 代理模块默认使用 http 1.0。但是，如果您的上游服务器支持 http 1.1（应该），建议使用 1.1 以获得更好的性能。详见参考：[http ://wiki.nginx.org/HttpProxyModule#proxy_http_version](http://wiki.nginx.org/HttpProxyModule#proxy_http_version)

# java - How to use Arrays.asList() to do List functions on arrays

> ID：16075600
> 
> 赞同：2
> 
> 时间：2013-04-18T06:04:11.330
> 
> 标签：java, arrays, list

Prompt: Given an array of ints, return true if the array contains a 2 next to a 2 or a 4 next to a 4, but not both.

I have done this with just Arrays and no List methods, but I want to do it this way for practice. Here's what I have, Arrays.asList() is giving me some grief.

```
public boolean either24(int[] nums) 
{
    List list = Arrays.asList(nums);
    boolean twos = list.containsAll(Arrays.asList(2, 2));
    boolean fours  = list.containsAll(Arrays.asList(4, 4));
    return (twos || fours) && !(twos && fours);
}
Expected    Run     
either24({1, 2, 2}) → true  true    OK      
either24({4, 4, 1}) → true  true    OK      
either24({4, 4, 1, 2, 2}) → false   false   OK      
either24({1, 2, 3, 4}) → false  false   OK      
either24({3, 5, 9}) → false false   OK      
either24({1, 2, 3, 4, 4}) → true    false   X       
either24({2, 2, 3, 4}) → true   false   X       
either24({1, 2, 3, 2, 2, 4}) → true false   X       
either24({1, 2, 3, 2, 2, 4, 4}) → false false   OK      
either24({1, 2}) → false    true    X       
either24({2, 2}) → true true    OK      
either24({4, 4}) → true true    OK      
either24({2}) → false   true    X       
either24({}) → false    false   OK 
```

UPDATE: Part of problem was using int instead of Integer. New code:

```
public boolean either24(int[] nums) 
{
    Integer[] nums2 = new Integer[nums.length];
    for(int i = 0; i < nums.length; i++)
        nums2[i] = nums[i];
    List list = Arrays.asList(nums2);
    boolean twos = list.containsAll(Arrays.asList(2, 2));
    boolean fours  = list.containsAll(Arrays.asList(4, 4));
    return (twos || fours) && !(twos && fours);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:11:59.953

`containsAll()`不检查两个元素是否彼此相邻。它只检查元素是否存在于列表中。您需要遍历数组并检查相邻元素

```
 int [] nums = new int [] {1,2,3,4,2,3,2,2,1,-4,4,4};
        int len = nums.length;
        for (int i = 0; i < len - 1 ; i++)
        {
            if((nums[i] == nums[i+1]) && (nums[i] == 2 || nums[i] == 4))
            {
                System.out.println("Yes");
            }
        } 
```

上面的那个片段没有给你答案。你仍然需要处理`but not both`问题的一部分，我将留给你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T06:11:16.623

问题是您正在使用该`containsAll`方法。文档说：

> 如果此列表包含指定集合的​​所有元素，则返回 true。

即使你传入 2 两次，它只是检查列表是否包含 2。换句话说，它是在说，“这个列表有两个吗？好。这个列表有两个吗？好”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T06:19:47.633

如果它只是关于短代码，那么这也可以：

```
public boolean either24(int[] nums) {
    String s = Arrays.toString(nums);
    boolean twos = s.contains("2, 2");
    boolean fours = s.contains("4, 4");
    return (twos || fours) && !(twos && fours);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T06:29:11.200

尝试这个：

```
public boolean either24(int[] nums) {
    return (Arrays.toString(nums).contains("2, 2") ^ Arrays.toString(nums).contains("4, 4"));       
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T06:14:41.230

containsAll 检查 twos/fours 是否是列表的子集。它不关心订单。

containsAll 在 Java 中实现如下：

```
public boolean containsAll(Collection<?> c) {

// get iterator for collection c
Iterator<?> e = c.iterator();
// loop all elements in collection c
while (e.hasNext())
// if collection A doesn’ have such an element
if(!contains(e.next()))
return false;
return true;

} 
```

如您所见，它只是说明第二个集合是否是第一个集合的子集，而与顺序无关。因此，如果您的列表有一个序列，比如 2、1、2、4，那么 containsAll 将为 2 的列表提供 true。

解决方案：您可以实现自己的 containsAll 版本，例如 containsOrderedAll 并使用上述实现作为参考来调用它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-18T06:12:30.300

```
 public static boolean is2or4(int[] nums){
    for (int i = 0; i < nums.length; i++) {
      if(nums[i] == 2){
        return nums[i+1] == 2;
      }else if(nums[i] == 4){
        return nums[i+1] == 4;
      }
    }
    return false;
  } 
```

我认为上述方法会更有效率。

# javascript - Javascript merge two Arrays

> ID：16075603
> 
> 赞同：0
> 
> 时间：2013-04-18T06:04:30.123
> 
> 标签：javascript, arrays

I want to merge two arrays in Javascript like this:

```
['First', 'Third', 'Fifth', 'Seventh', 'Ninth']
['Second', 'Fourth', 'Sixth', 'Eigth']
=> ['First', 'Second', 'Third', 'Fourth',...] 
```

Also One array can have more elements than another one. So for example:

```
['E1', 'E2', 'E3']
['E4']
=> ['E1', 'E4', 'E2', 'E3'] 
```

What is the easiest way to do this?

I don't really have in idea how to do this.

note: I have underscorejs available.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T06:11:20.717

带下划线：

```
var a1 = ['First', 'Third', 'Fifth', 'Seventh', 'Ninth'];
var a2 = ['Second', 'Fourth', 'Sixth', 'Eigth'];

var result = _.compact(_.flatten(_.zip(a1, a2))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T06:10:14.783

```
a = ['First', 'Third', 'Fifth', 'Seventh', 'Ninth'];
b = ['Second', 'Fourth', 'Sixth', 'Eigth'];
c = [];
for (var i = 0; i < Math.max(a.length, b.length); i++) {
  if (i < a.length) c.push(a[i]);
  if (i < b.length) c.push(b[i]);
} 
```

# c# - How to read part of string from .txt file?

> ID：16075604
> 
> 赞同：-6
> 
> 时间：2013-04-18T06:04:41.253
> 
> 标签：c#, file

Here is my problem, I have to read a certain data from the Text file.

For example: `"test1.txt"` has some data like

```
TEST1ZE  G P 1 -   ‘ 
 =  =    û   ¡  É É    
END1=  =    û  TEST2  ¡  É É ‘END2 
```

I have to read data from TEST2 TO END2 in **c#** later I have to convert this data in a byte array.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:16:44.513

[http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx) 这可能会对您有所帮助，其余的是 C# 中的逻辑。你可以在这里找到帮助： [如何获取字符串的一部分](https://stackoverflow.com/questions/5844055/how-to-get-one-part-of-the-string)

# javascript - jQuery：无法选择动态创建的 div ID？

> ID：16075605
> 
> 赞同：0
> 
> 时间：2013-04-18T06:04:43.773
> 
> 标签：javascript, ajax, jquery-ui, jquery

```
$('#content').droppable({
    drop:function(event , ui){  
        $('<div>').appendTo('#content');
        $('#content div').load('div.html');
                             }
                        }); 
```

**下面的代码没有选择 divContainer ID**

```
$('#divContainer').click(function(){
    $('#divContainer').hide(); 
}); 
```

这是我的 html 页面 DIV.html

```
<div id="divContainer">
    SampleDIV  
 </div> 
```

*DIv 被添加到我的页面，但我无法使用它的 ID 选择 div！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:05:52.803

尝试使用事件委托。

```
$("#content").on('click', '#divContainer', function () {
    $(this).hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:06:37.760

加载数据后，$('#divContainer').click 代码需要进入 done 部分

```
$('#result').load('div.html', function() {
    $('#divContainer').click(function(){
        $('#divContainer').hide(); 
    });
}); 
```

或使用 on() 作为 Explosion Pills 说

# c# - 使用 Web.config 连接到 MSSQL DB

> ID：16075613
> 
> 赞同：0
> 
> 时间：2013-04-18T06:04:58.247
> 
> 标签：c#, sql-server, asp.net-mvc, web-config

我创建了一个`ASP.NET C# MVC`项目。我正在尝试将其连接到`MSSQL`数据库。在`Web.config`文件中，我添加了以下内容；

```
 <connectionStrings>
     <add name="sdbconnection" providerName="System.Data.SqlClient"
         connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename="C:\Users\o\documents\visual studio 2012\Projects\ppl\ppl\App_Data\ppldb.mdf";Integrated Security=True" />
  </connectionStrings> 
```

但是，上面的代码是不正确的；我希望它如下所示；

```
 <connectionStrings>
    <add name="sdbconnection" providerName="System.Data.SqlClient"
         connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|ppldb.mdf;Integrated Security=True" />
  </connectionStrings> 
```

但什么是`DataDirectory`？我在哪里指定它？

是什么`name="sdbconnection"`？我可以给任何我想要的名字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:10:14.837

**第一个问题** 引用[MSDN](http://msdn.microsoft.com/en-us/library/aa478948.aspx)：

> |数据目录| 连接字符串的一部分指定 MDF 文件位于 App_Data 目录中

此外，您可以使用以下功能更改它：

```
AppDomain.CurrentDomain.SetData("DataDirectory", "D:\database"); 
```

**第二个问题** name="sdbconnection" 允许您使用指定的连接字符串。所以在你的代码中你可以写：

```
string connectionString = ConfigurationManager.ConnectionStrings["sdbconnection"].ConnectionString; 
```

访问此连接字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:18:33.497

名称用于识别和使用您的应用程序的代码 请参考这篇文章[http://www.connectionstrings.com/Articles/Show/store-connection-string-in-web-config](http://www.connectionstrings.com/Articles/Show/store-connection-string-in-web-config) 数据目录通常是 App_Data 文件夹和 web.config文件名用于在应用程序中使用连接字符串

例如：String conn=ConfigurationManager.ConnectionStrings["你在 web.config 文件中的名字"].ConnectionString;

或 String conn=ConfigurationManager.ConnectionStrings["你在 web.config 文件中的名字"].toString();

# zend-framework - 像 ZF1 一样在 ZF2 中的 Form 中创建模型实例？

> ID：16075622
> 
> 赞同：0
> 
> 时间：2013-04-18T06:05:32.580
> 
> 标签：zend-framework, zend-framework2

在 ZF1 中，可以创建模型的实例，也可以从任何表单类访问其属性。

```
class Application_Form_Drydepot extends Zend_Form
{

     $model = new Application_Model_DbTable_DrydepotModel();
     $List   = $model ->formationSelect();
     array_unshift($List, array('key'   => '', 'value' => '--Please Select--'));

    $id = new Zend_Form_Element_Hidden('id');
    $id->addFilter('Int')
            ->setDecorators($this->elementDecoration);

    $formation = new Zend_Form_Element_Select('formation_id');
    $formation->setLabel('Formation Name')
            ->setRequired(true)
            ->setAttrib('id', 'formation')
            ->setAttrib('class', 'required')
            ->addValidator('NotEmpty', true)
            ->setMultiOptions($List)
            ->setDecorators($this->elementDecoration);
} 
```

在这里 $model 可以直接调用但使用起来很容易但是 zf2 是相当困难的。我不会成功地做到这一点。在 ZF2 中我该如何做同样的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:53:22.990

另一种方法就像这里：[文档](http://framework.zend.com/manual/2.1/en/modules/zend.form.quick-start.html)

## 程序化表单创建

ZF2 编码接近 ZF1

```
use Zend\Captcha;
use Zend\Form\Element;
use Zend\Form\Form;

$captcha = new Element\Captcha('captcha');
$captcha
    ->setCaptcha(new Captcha\Dumb())
    ->setLabel('Please verify you are human');

$form = new Form('my-form');
$form->add($captcha); 
```

# php - 在php中读取URL

> ID：16075623
> 
> 赞同：1
> 
> 时间：2013-04-18T06:05:34.583
> 
> 标签：php, url

我想检查请求来自哪个 URL LIKE --- 。 `www.mysite.com or bussiness.mysite.com`我们如何检查它，因为 $_SERVER['HTTP_HOST'] 给出了整个 URL 。谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:08:14.207

你想要的是你的 url 的子域。用这个

```
$subdomain =  array_shift(explode(".",$_SERVER['HTTP_HOST'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:36:00.937

```
$domain = $_SERVER['HTTP_HOST'];
$path = $_SERVER['SCRIPT_NAME'];
$queryString = $_SERVER['QUERY_STRING'];
$url = "http://" . $domain . $path . "?" . $queryString;
echo "The current URL is: " . $url . "";

visit :http://www.2basetechnologies.com/ 
```

# linq - 如何将给定数据转换为 IEnumerable 对象

> ID：16075624
> 
> 赞同：1
> 
> 时间：2013-04-18T06:05:40.253
> 
> 标签：linq, c#-4.0

我在 c# 4 中有以下代码，我正在尝试使用 linq 进行排序、分组。

```
IList<Component> components = Component.OrganizationalItem.OrganizationalItem.Components(true);
IEnumerable<Component> baggage = components.Where(x => x.IsBasedOnSchema(Constants.Schemas.BaggageAllowance.ToString()))
                                           .OrderBy(x => x.ComponentValue("name").StringValue("Code")) 
                                           .GroupBy(x => x.ComponentValue("name").StringValue("Code")); 
```

在上面的示例中，当我尝试使用`GroupBy`它时出现错误，请参见下文：

> 无法将类型“ `System.Collections.Generic.IEnumerable<System.Linq.IGrouping<string,Tridion.ContentManager.ContentManagement.Component>>`”隐式转换为“ `System.Collections.Generic.IEnumerable<Tridion.ContentManager.ContentManagement.Component>`”。存在显式转换（您是否缺少演员表？）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:09:27.763

的结果`GroupBy`将是[`IGrouping<string, Component>`](http://msdn.microsoft.com/en-GB/library/bb344977.aspx)- 它是一组组件的序列*，*而不是一个组件序列。这就是分组的全部意义所在。所以这应该没问题：

```
IEnumerable<IGrouping<string, Component>> baggage = ... query as before ...; 
```

或者只是使用隐式类型：

```
var baggage = ...; 
```

然后，您可以遍历组：

```
foreach (var group in baggage)
{
    Console.WriteLine("Key: {0}", group.Key);
    foreach (var component in group)
    {
        ...
    }
} 
```

# windows - bin/hadoop 版本在 CYGWIN [Windows 7] 中引发错误

> ID：16075630
> 
> 赞同：0
> 
> 时间：2013-04-18T06:06:18.117
> 
> 标签：windows, hadoop, cygwin, bigdata

当我执行以下命令时：

> Anands@Tx-D-AnandS /usr/local/hadoop-1.1.2
> 
> $ bin/hadoop 版本

我收到以下错误：

```
cygwin warning:
    MS-DOS style path detected: C:\Program_Files\Java\jre6\x0D/bin/java
    Preferred POSIX equivalent is: /cygdrive/c/Program_Files/Java/jre6\x0D/bin/java
    CYGWIN environment variable option "nodosfilewarning" turns off this warning.
    Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
    /bin/java: No such file or directoryes\Java\jre6
    /bin/java: No such file or directoryes\Java\jre6
    /bin/java: cannot execute: No such file or directorye6 
```

谁能帮我这个？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T21:38:18.243

为java设置系统环境变量

也在`export JAVA_HOME=c:/Program_Files/Java/jre6`hadoop-evn.sh 文件中设置。

# rspec - rspec 集成/请求规范与控制器规范，重点是 JSON api

> ID：16075632
> 
> 赞同：6
> 
> 时间：2013-04-18T06:06:23.163
> 
> 标签：rspec

我采用了一个具有一定测试覆盖率的应用程序，但大多数测试质量参差不齐。该应用程序的大部分都针对 JSON api 工作。我打算编写请求规范，但验证然后发送带有验证数据的 POST 并非易事。对于测试 JSON api，控制器规格是否更合适？

例如，

```
 match 'api/login-mobile' => 'api#login_mobile', :as => :login_mobile, :defaults => {:format => 'json' } 
```

这似乎是微不足道的，但需要与水豚的集成规范。此外，capybara 本身不会发送会话数据，并且需要

```
page.driver.post ..... 
```

我得到了用于测试 UI 交互的集成测试，但它似乎是测试 JSON api 的一个非常糟糕的模型。我错过了什么吗？或者有没有做集成/请求测试的教程？我现在正在查看话语，几乎所有他们的测试都是控制器....如果集成/请求规范是蜜蜂的膝盖，他们为什么要做出这个决定？

提前谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-16T04:30:12.567

我会做集成式测试，有点像[这个 SO post](https://stackoverflow.com/questions/10721225/rails-testing-json-api-with-functional-tests)。

通过 JSON 与 API 端点交互比控制器更高级别，所以我可能会使用RSpec 提供的`feature`和块描述符。`scenario`（[这里](http://robots.thoughtbot.com/post/33771089985/rspec-integration-tests-with-capybara)的例子）。

从功能上讲，它与控制器规范没有太大区别，但有助于推动您进行场景/功能类型的测试，而不是单元级测试。

# c# - C# WindowsForm - 如何检测文本框中的焦点是否是通过鼠标单击或选项卡输入的

> ID：16075633
> 
> 赞同：0
> 
> 时间：2013-04-18T06:06:31.383
> 
> 标签：c#, textbox, click, focus

我有这个代码来选择文本框中的所有文本，如果里面已经写了一些东西（TextLength> 0），当我使用这个文本框上的选项卡聚焦输入时它工作完美，然后全选，当焦点是通过鼠标进行时小问题单击，所以我只想在焦点输入不是通过鼠标单击时执行下面的代码，因为如果鼠标单击文本框并且它已经有文本，它将全选大约 0,1 秒并取消选择（但用户可以查看蓝色选择文本比取消选择后）而且不好

我的代码：

```
private void txtValormetrocubico_Enter(object sender, EventArgs e)
{
    if (txtValormetrocubico.TextLength > 0)
    {
        txtValormetrocubico.SelectAll();
    }
} 
```

我想做什么（语法不正确，只是为了理解我的目标）

```
 private void txtValormetrocubico_Enter(object sender, EventArgs e)
    {
        if (isnt mouse_click)
        {
            if (txtValormetrocubico.TextLength > 0)
            {
                txtValormetrocubico.SelectAll();
            }
        } 
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:10:41.757

在表单的构造函数中，您可以挂钩`GotFocus`事件

```
public Form1()
{
    textBox1.GotFocus += textBox1_GotFocus;
}

void textBox1_GotFocus(object sender, EventArgs e)
{
    throw new NotImplementedException();
} 
```

# ios - 在什么情况下 application:didFinishLaunchingWithOptions: 被调用？

> ID：16075637
> 
> 赞同：0
> 
> 时间：2013-04-18T06:06:46.870
> 
> 标签：ios, background, voip

我的应用程序是用于 Voip 的，它可以在后台运行。当它在后台运行很长时间时，会调用 `application:didFinishLaunchingWithOptions:' 方法，然后我的应用程序停止运行。我想知道：为什么 voip 应用程序在后台运行时，调用了 application:didFinishLaunchingWithOptions 方法？如果调用了这个方法，我应该怎么做才能让我的应用程序继续运行？任何身体都可以帮忙吗？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:13:41.073

我在猜测，但我认为您的应用程序可能会收到内存警告。并且`application:didFinishLaunchingWithOptions:`每次运行应用程序只调用一次。只需尝试通过覆盖`- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application`您的应用程序委托中的方法进行调查。这可能是崩溃的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:36:48.243

VoIP 应用程序在电话启动时启动。启动时，您会在手机控制台中看到您的应用程序正在启动。如果您多次使用日志调用 application:didFinishLaunchingWithOptions，则您的应用程序可能正在崩溃或手机正在为内存而杀死它。如果您在 plist 中注册为 voip 应用程序，则可以在 applicationDidEnterBackground 中调用 setKeepAliveTimeout:handler: 以每 10 分钟（600 秒）运行一次 SIP 注册。顺便说一句，不要试图让 application:didFinishLaunchingWithOptions 保持运行；我相信它会在 iOS 杀死你的应用程序之前得到 5 秒。

查看开发 VoIP 应用程序的技巧：[https ://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)

# c# - The multi-part identifier "System.Data.DataRowView" could not be bound

> ID：16075640
> 
> 赞同：4
> 
> 时间：2013-04-18T05:48:16.803
> 
> 标签：c#, sql-server, ado.net

I have a table that populate Combobox1 and Combobox1 should populate Combobox2 and this is where the problem is. That's the exception i'm getting

> The multi-part identifier "System.Data.DataRowView" could not be bound.

Code :

```
 private void frm2_Load(object sender, EventArgs e)
    {
        //Populate Combobox1
        SqlDataAdapter da = new SqlDataAdapter("SELECT CategoryID, Name FROM Categories", clsMain.con);
        DataSet ds = new DataSet();
        da.Fill(ds);
        comboBox1.DataSource = ds.Tables[0];
        comboBox1.DisplayMember = "Name";
        comboBox1.ValueMember = "CategoryID";
    }

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        //populate Combobox2
        SqlDataAdapter da = new SqlDataAdapter("SELECT SubCategoryID, Name FROM SubCategories WHERE CategoryID=" + comboBox1.SelectedValue, clsMain.con);
        DataSet ds = new DataSet();
        da.Fill(ds);
        comboBox2.DataSource = ds.Tables[0];
        comboBox2.DisplayMember = "Name";
        comboBox2.ValueMember = "SubCategoryID";
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:18:25.133

这是由于在第一个组合中填充数据时加载了第二个组合框。
您可以通过以下方式避免此错误：
1\. 使用*SelectionChangeCommitted*事件而不是*SelectedIndexChanged*事件。
或者
2\. 分离选定的索引更改事件，填充组合框，再次附加事件：

```
private void frm2_Load(object sender, EventArgs e)
{
   //Detach event
   comboBox1.SelectedIndexChanged -= comboBox1_SelectedIndexChanged;

    //Populate Combobox1
    SqlDataAdapter da = new SqlDataAdapter("SELECT CategoryID, Name FROM Categories", clsMain.con);
    DataSet ds = new DataSet();
    da.Fill(ds);
    comboBox1.DataSource = ds.Tables[0];
    comboBox1.DisplayMember = "Name";
    comboBox1.ValueMember = "CategoryID";

   //Attach event again
    comboBox1.SelectedIndexChanged += comboBox1_SelectedIndexChanged;
} 
```

希望这会对你有所帮助。

# c# - 如何读取 C# 控制台应用程序的整个命令行，因为它是键入的？

> ID：16075663
> 
> 赞同：5
> 
> 时间：2013-04-18T06:08:21.673
> 
> 标签：c#, .net, command-line, console-application

我正在编写一个小的 REPL 控制台应用程序，我读取一个命令，拆分它，并使用一个糟糕的 switch 语句来决定调用哪个方法（而不是使用策略模式）。然后我将每个命令放入历史记录中以供审核。

启动应用程序时键入的命令行会丢失，因为它已经被拆分。我宁愿拥有整个命令行并继续我的循环和它自己的拆分例程。

是否有可能以某种方式获得整个命令行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T06:24:52.580

您可以通过以下方式获取最初传递给程序的整个命令行

[`Environment.CommandLine`](http://msdn.microsoft.com/en-gb/library/system.environment.commandline.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:17:20.163

第一选择是再次加入它：

```
var arg = string.Join(" ", args); 
```

如果您想在 main 之外执行此操作，您可以将参数设置为：

```
Environment.GetCommandLineArgs() 
```

# javascript - How to get the total depth of an unknown JSON hierarchy?

> ID：16075664
> 
> 赞同：8
> 
> 时间：2013-04-18T06:08:29.423
> 
> 标签：javascript, json, d3.js, nested

I've been struggling to find/build a recursive function to parse this JSON file and get the total depth of its children.

The file looks something like this:

```
var input = {
    "name": "positive",
    "children": [{
        "name": "product service",
        "children": [{
            "name": "price",
            "children": [{
                "name": "cost",
                "size": 8
            }]
        }, {
            "name": "quality",
            "children": [{
                "name": "messaging",
                "size": 4
            }]
        }]
    }, {
        "name": "customer service",
        "children": [{
            "name": "Personnel",
            "children": [{
                "name": "CEO",
                "size": 7
            }]
        }]
    }, {
        "name": "product",
        "children": [{
            "name": "Apple",
            "children": [{
                "name": "iPhone 4",
                "size": 10
            }]
        }]
    }] 
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-18T06:29:28.413

您可以使用递归函数来遍历整个树：

```
getDepth = function (obj) {
    var depth = 0;
    if (obj.children) {
        obj.children.forEach(function (d) {
            var tmpDepth = getDepth(d)
            if (tmpDepth > depth) {
                depth = tmpDepth
            }
        })
    }
    return 1 + depth
} 
```

该功能的工作原理如下：

*   如果对象不是叶子（即对象具有 children 属性），则：
    *   计算每个孩子的深度，保存最大的一个
    *   返回 1 + 最深孩子的深度
*   否则，返回 1

jsFiddle：http: [//jsfiddle.net/chrisJamesC/hFTN8/](http://jsfiddle.net/chrisJamesC/hFTN8/)

**编辑** 使用现代 JavaScript，该函数可能如下所示：

```
const getDepth = ({ children }) => 1 +
    (children ? Math.max(...children.map(getDepth)) : 0) 
```

jsFiddle：http: [//jsfiddle.net/chrisJamesC/hFTN8/59/](http://jsfiddle.net/chrisJamesC/hFTN8/59/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T06:33:41.647

这将计算树中“叶子”的数量：

```
var treeCount = function (branch) {
    if (!branch.children) {
        return 1;
    }
    return branch.children.reduce(function (c, b) {
        return c + treeCount(b);
    }, 0)
} 
```

还有一种获得深度的替代方法：

```
var depthCount = function (branch) {
    if (!branch.children) {
        return 1;
    }
    return 1 + d3.max(branch.children.map(depthCount));
 } 
```

# jquery - Lightbox not working after new images load

> ID：16075668
> 
> 赞同：2
> 
> 时间：2013-04-18T06:08:41.510
> 
> 标签：jquery, image, lightbox

Initialize lightbox:

```
<script type="text/javascript" src="<?=SITE_TEMPLATE_PATH?>/js/slimbox2.js"></script> 
```

I have static images on page:

```
<a class="itogdetimg" href="" rel="lightbox" title="">
    <img width="83px" src="/img.png" border="0"/>
</a> 
```

And i have link with `id="knav1"` on click this load new images with jquery script:

```
$("#knav1").click(function(){
        $("#navldesc").load('/api.php?nvl=y&komplektn=Комплит2');
}); 
```

Links type is the same as above, but lightbox with them no longer works. I think this is because of was originally do not have them on page. How can I fix this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:42:49.540

对于 slimbox2 这应该可以工作：

```
$("#knav1").click(function(){
        $("#navldesc").load('/api.php?nvl=y&komplektn=Комплит2',function() {
             $("#navldesc").find("[rel='lightbox']").slimbox(/*if you have custom options place them here*/);
        });
}); 
```

正如我最初的评论所提到的，问题是 slimbox2 不关心由 ajax 添加的图像。所以你需要自己申请`slimbox`新添加的图片。

但据我所知，slimbox2 很长时间没有更新，所以它可能与较新版本的 jquery 不兼容。我建议你考虑一个替代方案。我有一个自己的 ui 框架，所以我真的可以很好地推荐什么库更好。（这些看起来像是最新的：[fancybox2](http://fancyapps.com/fancybox/) [lightbox2](http://lokeshdhakar.com/projects/lightbox2/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:16:01.183

该主题有不止一个帖子...

[动态链接和 jQuery 灯箱问题：在灯箱中加载图像......完全难倒！](https://stackoverflow.com/questions/3420056/dynamic-links-and-jquery-lightbox-issue-loading-image-in-lightbox-completely?rq=1)

[灯箱不适用于 AJAX 加载部件](https://stackoverflow.com/questions/7652726/lightbox-not-working-on-ajax-load-parts?rq=1)

[在动态添加的内容上激活灯箱](https://stackoverflow.com/questions/1597511/activate-lightbox-on-dynamically-added-content)

答案很简单

**改成：**

```
$("selector").live('click', function (){
      $(this).lightBox();
}); 
```

**Alt** *（取决于您使用的 Jquery 版本 1.7+）*

```
$("selector").on('click', function (){
      $(this).lightBox();
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T06:19:20.913

您可以使用 jquery 的 live() 方法来使页面上出现的所有新元素正常工作。您必须更改当前的灯箱功能才能使用 live(); 可能的解决方案是这样的：

```
$("a.itogdetimg").live("click", function(){ $(this).lightbox(); }); 
```

# c - How to detect empty epoll set

> ID：16075671
> 
> 赞同：4
> 
> 时间：2013-04-18T06:08:55.863
> 
> 标签：c, linux, asynchronous, epoll

I'm learning to use epoll, and I wrote the following example

```
#include <assert.h>
#include <errno.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/epoll.h>
#include <unistd.h>

int main() {
    int epfd;
    struct epoll_event ev;
    struct epoll_event ret;
    char buf[200];
    int n,k,t;

    epfd = epoll_create(100);
    assert(0 ==
            fcntl(0, F_SETFL, fcntl(0, F_GETFL) | O_NONBLOCK)
          );

    ev.data.fd = 0;
    ev.events = EPOLLIN  | EPOLLET;

    if(epoll_ctl(epfd, EPOLL_CTL_ADD, 0, &ev) != 0)
        perror("epoll_ctl");

    while((n = epoll_wait(epfd, &ret, 1, -1)) > 0) {
        printf("tick!\n");

        if(ret.data.fd == 0) {
            k=0;
            while((t=read(0, buf, 100)) > 0) {
                k+=t;
            }   

            if(k == 0) {
                close(0);
                printf("stdin done\n");
            }
        }   
    }

    perror("epoll");
    return 0;
} 
```

If you try running it in the terminal it won't work properly since fds 0, 1 and 2 all point to same open file, so close(0) won't remove stdin from the epoll set. You can get around this by doing "cat | ./a.out". Dirty trick, I know, but setting up a small example with named pipes or sockets would be more complicated.

Now, everything works and the file is removed from the epoll set, but then the next epoll_wait call blocks permanently since it's on an empty set! So I would need to detect if the epoll file descriptor (epfd) is an empty epoll set.

How can I get around this? (in a general manner, not just calling exit when stdin is done) Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:34:16.517

基本上，如果您“正确”地使用 epoll，那么您永远不会遇到意外空 epoll 集的情况。你应该知道什么时候有更多的事情要做。好吧，或者至少是这样的理论。让我回顾一下：

您在这里使用 EPOLLET（恕我直言，一般来说是正确的想法）。这意味着文件描述符 0 在返回时从 epoll 中删除`&ret`。此时，您应该像您一样通过从 0 读取一些数据来处理它，然后通过将文件描述符 0 再次添加到 epoll 中来“重新武装”它（当然，除非它被关闭）。有关这应该如何工作的示例，请删除内部循环并执行以下操作：

```
k = read(0, buf, 100); 
```

最多读取 100 个字节。这个想法是，如果你通过管道传输一个比这更大的文件，它应该在整个循环中循环几次。为了使这个工作，如果 k > 0，在你处理了 k 个字节之后，你需要`epoll_ctl(..EPOLL_CTL_ADD..)`再次调用。

请注意一个烦人的细节：有时可能会`read()`返回 0 字节，而这并不意味着文件或套接字位于末尾。检查是否`errno == EAGAIN || errno == EWOULDBLOCK`。检测这种情况，然后再检测`epoll_ctl(..EPOLL_CTL_ADD..)`一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T07:05:12.297

当您删除所有添加的内容时，epoll 集将为空。据我所知，您无法内省 epoll 集以找出是否存在任何文件描述符。因此，由您决定 epoll 集何时变为空，如 Armin 的回答中所述。

由于您没有解释您对程序的期望，我猜测您希望它在标准输入关闭时退出，因为执行 a`close(0)`可能会导致文件描述符 0 从 epoll 集中删除。但是，列出的代码有缺陷。如果您继续等待不包含任何文件描述符的 epoll 集（无论是自动删除还是使用 删除`EPOLL_CTL_DEL`），`epoll_wait`则将永远等待。

下面的代码很好地展示了这一点。

```
#include <errno.h>
#include <stdio.h>
#include <sys/epoll.h>

int main() {
    int epfd;
    int n;
    struct epoll_event ret;

    epfd = epoll_create(100);

    while((n = epoll_wait(epfd, &ret, 1, -1)) > 0) {
        /* Never gets here. */
        printf("tick!\n");
    }

    return 0;
} 
```

epoll 集不包含任何文件描述符，因此`epoll_wait`永远等待。如果您的程序中碰巧有一个文件连接到标准输入，而您的程序中没有其他文件描述符连接到标准输入，`close(0)`则将从集合中删除 fd 0，epoll 集合变为空，并且下一个将`epoll_wait`永远等待。

通常，您自己管理 epoll 集中的文件描述符，而不是依赖`close`调用自动从集中删除您的文件描述符。完成后是否继续等待 epoll 集由您决定`close(0)`。

我还建议您将程序的结构`epoll_wait` **更改**为`read`. 这可以保证您在第一次调用`epoll_wait`.

另外，请注意以下代码：

```
k=0;
while((t=read(0, buf, 100)) > 0) {
    k+=t;
}   
if(k == 0) {
    close(0);
    printf("stdin done\n");
} 
```

如果假设`read`循环中的 连续返回 100 后跟 0 表示一些数据加上文件结尾，`close(0)`则不会调用 。程序将循环并再次永远等待`epoll_wait`。最好检查每个`read`专门针对文件结尾和错误的结果。

# javascript - 在javascript中旋转按钮以增加数量

> ID：16075673
> 
> 赞同：1
> 
> 时间：2013-04-18T06:08:58.147
> 
> 标签：javascript

我做了一个旋转控件，仅作为 onclick 事件递增和递减我的问题是我想限制它永远不允许显示低于 1 的值。目前当它显示 1 并且我点击递减箭头时它会下降归零，然后从那里继续 -1、-2、-3 等

有没有办法我可以添加到这个脚本/函数中，使最小数量显示为 1

我在 head 标签中的功能是：

```
 <!---sPIN BUTTONS TO UP QUANTITY---> 
  <script type="text/javascript"> 
      function changeVal(n) { 
           document.forms[0].quantity.value = 

 parseInt(document.forms[0].quantity.value) + n; 
      } 
 </script> 
```

我在表格中的字段是：

```
 <td ><input name="quantity" type="text" class="quantity" onfocus="this.blur();" value="1" /></td> 
                    <td style="width:14px;"> 
                          <table cellpadding="0" cellspacing="0"> 
                      <td width="28"><img src="siteImages/btn_up.gif" width="14" height="9" hspace="0" vspace="0" border="0" onClick="changeVal(1);"></td> 
                   </tr> 
                   <tr> 
                   <td><img src="siteImages/btn_down.gif" width="14" height="9" border="0" hspace="0" vspace="0" onClick="changeVal(-1);"></td> 
                    </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:12:34.847

使用 if 条件检查新值是否为非零，并且仅在这种情况下更改表单元素的值。

```
function changeVal(n) { 
    var el = document.forms[0].quantity;
    var newval = parseInt(el.value) + n;
    if (newval > 0) {
        el.value = newval;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:19:15.757

仅作记录：

```
function changeVal(n) {
  var el = document.forms[0].quantity;
  el.value = Math.max(parseInt(el.value) + n, 1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:02:19.237

尝试：

```
 <script type="text/javascript"> 
function changeVal(n) { 
var newVal=parseInt(document.forms[0].quantity.value) + n 
if (newVal<1){ 
 document.forms[0].quantity.value=1; 
} 
else { 
document.forms[0].quantity.value=newVal; 
} 
} 
</script> 
```

# java - 在 JNA 中创建全局引用

> ID：16075674
> 
> 赞同：1
> 
> 时间：2013-04-18T06:08:58.190
> 
> 标签：java, c, java-native-interface, jna

我想使用的本机库有这样的方法：

```
extern unsigned long write(void); 
```

然而，它要写什么，需要在几个全局变量中定义：

```
short int Addr; //the starting address it write to;
short int Length; //the length of the writing;
void * data; //the data it will write; 
```

我知道在 JNA 中，NativeLibray 具有加载本地库中定义的全局引用的方法，但它似乎不是这里需要的。我实际上需要声明上面的全局变量并写入它们，以便 write() 方法可以正常工作。

关于如何在 JNA 中实现这一点的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:40:37.087

如此多的游戏黑客不愿意进入肮脏的细节。

`NativeLibrary`提供对共享库导出的全局变量地址的访问。

```
NativeLibrary lib = NativeLibray.getInstance("mylib");
Pointer paddr = lib.getGlobalVariableAddress("Addr");
paddr.setInt(0, 1234); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:10:41.810

你为什么不把你的“写”方法包装在另一个你可以通过Java/JNA调用的方法中。在那里，您首先设置这些全局变量，然后调用真正的变量。

# backbone.js - Which one should I use? Backbone.js Router.navigate and window.location.hash

> ID：16075675
> 
> 赞同：11
> 
> 时间：2013-04-18T06:08:59.993
> 
> 标签：backbone.js, browser-history

I began learning Backbonejs recently, by reading a book. and I feel a little bit confuse about this issue.Here is a Router:

```
define(['views/index', 'views/login'], function(indexView, loginView) {

    var SelinkRouter = Backbone.Router.extend({

        currentView: null,

        routes: {
            'home': 'home',
            'login': 'login'
        },

        changeView: function(view) {
            if(null != this.currentView)
                this.currentView.undelegateEvents();
            this.currentView = view;
            this.currentView.render();
        },

        home: function() {
            this.changeView(indexView);
        },

        login: function() {
            this.changeView(loginView);
        }
    });

    return new SelinkRouter();
}); 
```

and this is the boot method of a application:

```
define(['router'], function(router) {

    var initialize = function() {
        // Require home page from server
        $.ajax({
            url: '/home',          // page url
            type: 'GET',           // method is get
            dataType: 'json',      // use json format
            success: function() {  // success handler
                runApplicaton(true);
            },
            error: function() {    // error handler
                runApplicaton(false);
            }
        });
    };

    var runApplicaton = function(authenticated) {

        // Authenticated user move to home page
        if(authenticated) window.location.hash='home';
                          //router.navigate('home', true); -> not work

        // Unauthed user move to login page
        else window.location.hash='login';
             //router.navigate('login', true); -> not work

        // Start history
        Backbone.history.start();
    }

    return {
        initialize: initialize
    };
}); 
```

My question is about the `runApplication` part. The example of the book that I read passed router into module just like this, but it used `window.location.hash = "XXX"`, and the router wasn't touched at all.

I thought the "navigate" method would make browser move to the page I specified, but nothing happened. Why?

And for the best practice sake, what is the best way to achieve movement between pages(or views)?

thanks for any ideas.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-11-14T09:50:04.353

您还可以使用静态方法来避免路由器依赖（例如使用 requirejs 时）。

```
Backbone.history.navigate(fragment, options) 
```

这样，您只需要：

```
// Start history
Backbone.history.start();

// Authenticated user move to home page
if(authenticated)
  Backbone.history.navigate('home', true);
// Unauthed user move to login page
else
  Backbone.history.navigate('login', true); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-18T06:40:04.000

根据文档，如果您还想调用属于特定路由的函数，则需要传递选项`trigger: true`：

> 每当您在应用程序中到达想要保存为 URL 的点时，调用 navigate 以更新 URL。如果您还想调用路由函数，请将触发器选项设置为 true。要更新 URL 而不在浏览器的历史记录中创建条目，请将替换选项设置为 true。

您的代码应如下所示：

```
if(authenticated)
    router.navigate('home', {trigger: true}); 
```

创建路由器后，您还必须调用

```
Backbone.history.start(); 
```

> **Backbone.history.start([选项])**
> 
> 当您的所有路由器都已创建并正确设置所有路由后，调用 Backbone.history.start() 开始监控 hashchange 事件并调度路由。

最后 runApplication 逻辑将与此类似：

```
var runApplicaton = function(authenticated) {

    var router = new SelinkRouter();
    // Start history
    Backbone.history.start();

    // Authenticated user move to home page
    if(authenticated)
        router.navigate('home', true);
    // Unauthed user move to login page
    else
        router.navigate('login', true);
} 
```

# ruby-on-rails - Rails 3.2 中 fields_for 块和非 fields_for 块的组合

> ID：16075684
> 
> 赞同：0
> 
> 时间：2013-04-18T06:09:31.623
> 
> 标签：ruby-on-rails

我正在尝试使用 fields_for 块和非 fields_for 块的组合创建一个表单：

但是输出在重复，看起来它们在循环......

也许是因为，有一个 fields_for 块，而另一个不是 fields_for / 表单。

我怎样才能在我的`<tbody>`or`<tr>`标记中将它们结合起来。

```
<% @annual_procurement_plan.project_procurement_management_plans.each do |ppmp| %>
    <% ppmp.items.each do |itemx| %>
    <tbody>

       <%= f.fields_for :project_procurement_management_plans do |p| %>
          <%= p.fields_for :items do |item| %>
                <tr class="nested-fields info">
                <td>

              <%= item.select :category_id, Category.all.map{|c| [c.code, c.id]}%>  
             </td>

             <td>
                       <%= content_tag :span, itemx.description%>
                     </td>      

             <td><%= p.text_field :pmo_end_user%>
                     </td>

        </tr>
       <% end %>
        <% end %>
     </tbody>
   <% end %>
<% end %> 
```

任何解决方法将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:24:19.060

`fields_for`像这样将迭代项放在你的

```
f.fields_for :project_procurement_management_plans, ppmp do |p| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:25:08.373

假设您的模型层次结构`annual_procurement_plan`有很多`project_management_procurement_plans`，并且`project_management_procurement_plan`有很多`items`，表格的一般结构应该是这样的：

```
<% @annual_procurement_plan.project_management_procurement_plans.each do |ppmp| %>
  <%= f.fields_for(:project_management_procurement_plans, ppmp) do |ppmp_f| %>
    # any fields for the ppmp

    <% ppmp.line_items.each do |item| %>
      <%= ppmp_f.fields_for(:line_items, item) do |item_f| %>
        # any fields for the line_item, eg
        <%= item_f.select :category_id, Category.all.map{ |c| [c.code, c.id] } %>

      <% end %>
    <% end %>

  <% end %>
<% end %> 
```

在每种情况下，您都会遍历关联中的每个对象，并为每个对象调用`fields_for`（将关联用作第一个参数，将实际对象用作第二个参数）。因此，您循环遍历`ppmp`s，调用`fields_for`它们中的每一个，然后在 each 内部`ppmp`，循环遍历所有它`line_items`，调用`fields_for`它们中的每一个。

确保在添加字段时使用正确的表单构建器（即`item_f`字段`line_item`和字段）`pmpp_f`。`pmpp`

# java - is there is any configuration tool for active MQ?

> ID：16075686
> 
> 赞同：0
> 
> 时间：2013-04-18T06:09:32.593
> 
> 标签：java, jms, activemq

Instead of manually changing the xml configuration of active mq server (i.e, port number, queue & topics, user name, password, groups, jetty server credientials etc..) is there is any GUI tool avail to make the changes easily?

Thanks in advance....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:12:03.280

ActiveMQ 二进制发行版中集成了一个基于 Web 的管理工具：http: [//activemq.apache.org/web-console.html](http://activemq.apache.org/web-console.html)

# android - SVN checkout commit and update

> ID：16075688
> 
> 赞同：1
> 
> 时间：2013-04-18T06:09:40.367
> 
> 标签：android, tortoisesvn, svn-checkout

I would like to ask about `SVN checkout` with respect to `Android`. If I commit the project and in that project I do not commit the `/bin` what will be the pros and cons related to this. What is the best practice, commit `/bin` also or not commit `/bin`.

Second question is if I commit the `/bin` along with the project and get conflict on update it what should the preferable should I resolve "*using their`s*" or resolve "*using mine*".

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:21:13.193

`/bin`是一个自动生成的文件夹。每当您导入/运行/调试/构建项目时，都会重新创建它。在将项目提交到远程存储库时，建议不要使用它提交**自动生成的**文件夹（例如，/bin、/gen）。因为一旦您在编辑器中导入/运行/调试/构建项目，它们就会自动创建。

我希望这能回答这个问题。

# c# - How to Bind column of a table in array and display result one by one on button click event?

> ID：16075689
> 
> 赞同：0
> 
> 时间：2013-04-18T06:10:04.730
> 
> 标签：c#, asp.net, sql-server, ado.net, arraylist

I have created method to store column value of Questions from Question table into array and now I wanted to display in a label one by one on button click event.

```
public ArrayList BindDataToArray()
{
    ArrayList list = new ArrayList();
    DataTable dt = new DataTable();
    con = new SqlConnection(str);
    cmd = new SqlCommand("select Question from  Questions", con);
    con.Open();
    adp = new SqlDataAdapter(cmd);
    adp.Fill(dt);

    foreach (DataRow dtrow in dt.Rows)
    {
        list.Add(dtrow);
    }
    return list;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T20:46:54.933

```
// in Aspx Page
<asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" 
            CommandArgument="1" /><asp:Label
           ID="Label1" runat="server" Text="Label"></asp:Label>
//in Aspx.cs

        protected void Button1_Click(object sender, EventArgs e)
        {
            ArrayList list = new ArrayList();
            list = BindDataToArray();
            int I = (Convert.ToInt32(Button1.CommandArgument.Count()));
            //int I = (Convert.ToInt32(Button1.CommandArgument));
            if (I < list.Count)
            {
                Label1.Text = list[I] as string; //Label in which u want to show message
                Button1.CommandArgument = (I + 1).ToString();
            }
            else
            {
                Label1.Text = "eND OF LIST";
                Button1.Enabled = false;
            }
        }
        public ArrayList BindDataToArray()
        {
            ArrayList list = new ArrayList();
            DataTable dt = new DataTable();
            //con = new SqlConnection(con);
            SqlCommand cmd = new SqlCommand("SELECT SurveyName FROM tblSurveyName", con);
            con.Open();
            SqlDataAdapter adp = new SqlDataAdapter(cmd);
            adp.Fill(dt);

            foreach (DataRow dtrow in dt.Rows) { list.Add(dtrow["SurveyName"].ToString()); }
            return list;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:25:20.533

将列表保存到会话中

用 value = 0 初始化一个 int 并将其也存储在会话中。

单击按钮时

从会话中获取列表和整数

使用 list[index] 值更新标签，其中 index 是 int。

将 int 加一并将其重新保存在会话中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:25:59.337

看来您正在寻找asp.net 的[gridview](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview%28v=vs.80%29.aspx)控件。
示例[http://www.dotnetfunda.com/articles/article1594-how-to-populate-gridview-from-code-behind.aspx](http://www.dotnetfunda.com/articles/article1594-how-to-populate-gridview-from-code-behind.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:26:29.010

尝试这个....

```
<asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click"  
            CommandArgument="0" />//dEFINATION OF BUTTON ON ASPX PAGE

protected void Button1_Click(object sender, EventArgs e)
{
     ArrayList list = new ArrayList();
     list=BindDataToArray();
     int I=( Convert.ToInt32(Button1.CommandArgument));
     if (I < list.Count)
     {
          Label1.Text = list[I] as string; //Label in which u want to show message
          Button1.CommandArgument = (I + 1).ToString();
     }
     else
     {
         Label1.Text = "eND OF LIST";
         Button1.Enabled = false;
     }
}

public ArrayList BindDataToArray()
{
    ArrayList list = new ArrayList();
    DataTable dt = new DataTable();
    con = new SqlConnection(str);
    cmd = new SqlCommand("select Question from  Questions", con);
    con.Open();
    adp = new SqlDataAdapter(cmd);
    adp.Fill(dt);

    foreach (DataRow dtrow in dt.Rows)
    {
        list.Add(dtrow["Question"].ToString());
    }
    return list;
} 
```

# android - Android 开发 - 为电脑制作无线（蓝牙/Wi-fi）键盘

> ID：16075693
> 
> 赞同：0
> 
> 时间：2013-04-18T06:10:19.070
> 
> 标签：android, keyboard, wireless

我想问一下我需要什么研究才能将我的智能手机变成无线键盘并用于台式机/笔记本电脑/等...？我怎样才能一步一步地做到这一点？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:19:17.380

您需要一个具有键盘布局的应用程序（或仅使用 android 软键）并通过蓝牙将按键代码发送到计算机。

您的计算机应该有一个接口软件，可以接收您输入的击键信号并将其转换为操作系统信号。

实际上市场上有一个具有相同功能的应用程序 [https://play.google.com/store/apps/details?id=com.iandrobot.andromouse.lite&hl=en](https://play.google.com/store/apps/details?id=com.iandrobot.andromouse.lite&hl=en)

# security - Symfony2 访问控制和路径名

> ID：16075694
> 
> 赞同：0
> 
> 时间：2013-04-18T06:10:23.200
> 
> 标签：security, symfony, routes, access-control

我在 symfony2 文档中找不到这个，所以我在这里问。是否可以在里面设置路径名而不是模式`security.yml` `access_controll`？

代替：

```
access_control:
    - { path: /admin/logowanie, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

像这样设置它：

```
access_control:
    - { path: pkr_blog_user_login, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

路径名称是正确的，但目前第二种形式不起作用。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:47:15.933

我不认为你可以做这样的事情。

您可以做的是[保护一个](http://symfony.com/doc/2.0/book/security.html#securing-a-controller)与您在此处尝试执行的操作非常相似的控制器，因为控制器（操作）将由特定路由调用，即使您更改路由名称，也应该假设您必须通过相同的控制器动作。

通过这种方式，您可以获得您正在寻找的灵活性。

# python - 全局导入模块

> ID：16075703
> 
> 赞同：0
> 
> 时间：2013-04-18T06:10:54.827
> 
> 标签：python, import

我想为用户提供一个 python 脚本，该脚本将为他们导入一些模块，然后将导入的模块放到该级别可用的 python 解释器。我有一些我认为可能有效的代码，但它似乎没有：

```
module_list = ['module_a','module_b']

# Import our common modules
for module in module_list:
try:
    print "Importing: {0}".format(module)
    exec("import {0}".format(module))
except:
    print "FYI we failed importing {0}. It will not be available for you to use".format(module) 
```

因此，当脚本完成后，它将下降到用户可以执行的 python 模块：

```
>>> module_a.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:20:09.040

您可以使用[`code.InteractiveConsole()`](http://docs.python.org/2/library/code.html#code.InteractiveConsole)并传递`locals`包含控制台将在其中运行的本地上下文的字典。通过将模块存储在其中，您可以轻松地将它们提供给交互式 shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:22:41.027

如果我是你，我不会这样做……但是

```
import imp

module_list = ['module_a','module_b']

for name in module_list:
    try:
        module_info = imp.find_module(name)
        globals()[name] = imp.load_module(name, *module_info)
    except:
        "Import error: %s" %name 
```

保存上面的代码文件，例如并用switch`imptest.py`加载它，如`-i`

```
python -i imptest.py 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:01:23.320

反对我读过的许多关于触摸的评论的建议`__main__`，我做到了。

所以这是最终为我工作的代码：

```
module_list = ['module_a','module_b']

# Import our modules
for name in module_list:
     try:
         __import__(name)
        if name in sys.modules:
            setattr(__main__, name, sys.modules[name])
     except:
        print "FYI we failed importing {0}. It will not be available for you to use".format(name) 
```

# c# - Deploy sql+winforms application on Linux/Ubuntu while development server is still Windows

> ID：16075704
> 
> 赞同：1
> 
> 时间：2013-04-18T06:10:57.510
> 
> 标签：c#, linux, winforms, mono

I have a very limited knowledge for Linux/Ubuntu platform. There are some requirements coming though for me to deploy a version of our desktop application on either of the above platforms.

With the context, I have the following queries in my mind:

1.  Could the same code can run on windows using the MONO/MONO IDE and I can compile the output to the OS specific?
2.  OR assuming there are certain changes I must make to run them on different OS, what could be the best way to deploy it on Linux/Ubuntu?
3.  OR Is it possible to keep the same code under windows development, however can be deployed on Linux/Unix environment?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:23:44.573

SQL 不能在 Unix 上工作，所以你需要先转换它。

1.  是的，这就是要走的路。

2.  您需要执行第 1 步来确定是否需要特定于操作系统的更改。

3.  假设 Mono 支持程序集所需的所有内容，您不必做任何事情 - 它应该已经是二进制兼容的。这是 IL 的要点之一 :)

如果你确实发现了 Mono 不支持的一些东西，建议你有一个 Unix 分支的代码。

# android - 在设备被密码锁定时捕获图像

> ID：16075726
> 
> 赞同：14
> 
> 时间：2013-04-18T06:12:46.353
> 
> 标签：android, android-intent, android-camera, android-canvas, android-camera-intent

当有人试图解锁我的设备并输入错误密码 3 次时，我想实现通过前置摄像头捕获图像的功能。我检查了它是否可以在 Android 中使用，并且某些应用程序也可以在 Market 中使用。

我已经做了一些工作来实现这一点，但我得到了一个黑色图像。这是代码：

向设备管理员注册以获取错误密码尝试的广播：

```
public class DeviceAdminSample extends DeviceAdminReceiver {

static Context ctx;

static SharedPreferences getSamplePreferences(Context context) {

    ctx = context;

    return context.getSharedPreferences(
            DeviceAdminReceiver.class.getName(), 0);
}

@Override
public void onPasswordFailed(Context context, Intent intent) {
    super.onPasswordFailed(context, intent);

    System.out.println("Password Attempt is Failed...");

    Intent i = new Intent(context, CameraView.class);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);

}

} 
```

相机类捕获图像并将其保存到 SD 卡：

```
public class CameraView extends Activity implements SurfaceHolder.Callback,
    OnClickListener {
private static final String TAG = "CameraTest";
Camera mCamera;
boolean mPreviewRunning = false;

public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    Log.e(TAG, "onCreate");

    setContentView(R.layout.cameraview);

    mSurfaceView = (SurfaceView) findViewById(R.id.surface_camera);

    // mSurfaceView.setOnClickListener(this);

    mSurfaceHolder = mSurfaceView.getHolder();
    mSurfaceHolder.addCallback(this);

    mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    mSurfaceHolder.setKeepScreenOn(true);

    // mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
}

protected void onResume() {
    Log.e(TAG, "onResume");
    super.onResume();
}

protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
}

protected void onStop() {
    Log.e(TAG, "onStop");
    super.onStop();
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    Log.e(TAG, "surfaceChanged");

    // XXX stopPreview() will crash if preview is not running
    if (mPreviewRunning) {
        mCamera.stopPreview();
    }

    Camera.Parameters p = mCamera.getParameters();

    mCamera.setParameters(p);

    mCamera.startPreview();
    mPreviewRunning = true;
    mCamera.takePicture(null, null, mPictureCallback);

}

public void surfaceDestroyed(SurfaceHolder holder) {
    Log.e(TAG, "surfaceDestroyed");
    // mCamera.stopPreview();
    // mPreviewRunning = false;
    // mCamera.release();

    stopCamera();
}

private SurfaceView mSurfaceView;
private SurfaceHolder mSurfaceHolder;

public void onClick(View v) {
    mCamera.takePicture(null, mPictureCallback, mPictureCallback);
}

public void surfaceCreated(SurfaceHolder holder) {
    Log.e(TAG, "surfaceCreated");

    int i = findFrontFacingCamera();

    if (i > 0); 
    while (true) {
        try {
            this.mCamera = Camera.open(i);
            try {
                this.mCamera.setPreviewDisplay(holder);
                return;
            } catch (IOException localIOException2) {
                stopCamera();
                return;
            }
        } catch (RuntimeException localRuntimeException) {
            localRuntimeException.printStackTrace();
            if (this.mCamera == null)
                continue;
            stopCamera();
            this.mCamera = Camera.open(i);
            try {
                this.mCamera.setPreviewDisplay(holder);
                Log.d("HiddenEye Plus", "Camera open RE");
                return;
            } catch (IOException localIOException1) {
                stopCamera();
                localIOException1.printStackTrace();
                return;
            }

        } catch (Exception localException) {
            if (this.mCamera != null)
                stopCamera();
            localException.printStackTrace();
            return;
        }
    }
}

private void stopCamera() {
    if (this.mCamera != null) {
        /*this.mCamera.stopPreview();
        this.mCamera.release();
        this.mCamera = null;*/
        this.mPreviewRunning = false;
    }
}

private int findFrontFacingCamera() {
    int i = Camera.getNumberOfCameras();
    for (int j = 0;; j++) {
        if (j >= i)
            return -1;
        Camera.CameraInfo localCameraInfo = new Camera.CameraInfo();
        Camera.getCameraInfo(j, localCameraInfo);
        if (localCameraInfo.facing == 1)
            return j;
    }
}

Camera.PictureCallback mPictureCallback = new Camera.PictureCallback() {

    public void onPictureTaken(byte[] data, Camera camera) {
        if (data != null) {
            // Intent mIntent = new Intent();
            // mIntent.putExtra("image",imageData);

            mCamera.stopPreview();
            mPreviewRunning = false;
            mCamera.release();

            try {
                BitmapFactory.Options opts = new BitmapFactory.Options();
                Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0,
                        data.length, opts);
                bitmap = Bitmap.createScaledBitmap(bitmap, 300, 300, false);
                int width = bitmap.getWidth();
                int height = bitmap.getHeight();
                int newWidth = 300;
                int newHeight = 300;

                // calculate the scale - in this case = 0.4f
                float scaleWidth = ((float) newWidth) / width;
                float scaleHeight = ((float) newHeight) / height;

                // createa matrix for the manipulation
                Matrix matrix = new Matrix();
                // resize the bit map
                matrix.postScale(scaleWidth, scaleHeight);
                // rotate the Bitmap
                matrix.postRotate(-90);
                Bitmap resizedBitmap = Bitmap.createBitmap(bitmap, 0, 0,
                        width, height, matrix, true);

                ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                resizedBitmap.compress(Bitmap.CompressFormat.JPEG, 40,
                        bytes);

                // you can create a new file name "test.jpg" in sdcard
                // folder.
                File f = new File(Environment.getExternalStorageDirectory()
                        + File.separator + "test.jpg");

                System.out.println("File F : " + f );

                f.createNewFile();
                // write the bytes in file
                FileOutputStream fo = new FileOutputStream(f);
                fo.write(bytes.toByteArray());

                // remember close de FileOutput
                fo.close();

            } catch (Exception e) {
                e.printStackTrace();
            }
            // StoreByteImage(mContext, imageData, 50,"ImageName");
            // setResult(FOTO_MODE, mIntent);
            setResult(585);
            finish();
        }
    }
};
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T04:49:15.017

我已经测试了您的代码，并且得到了正确的图像，因此我认为您的相机代码可以正常工作。

[你可以在这里](https://github.com/entryleveldev/LockCamera)查看我的代码。我从你那里复制了 CameraView 类。[我取自https://github.com/marakana/DevicePolicyDemo](https://github.com/marakana/DevicePolicyDemo)的设备管理部分 图片是第一次尝试失败时拍摄的。

我怀疑这可能是某种硬件问题。我不确定你是否看过[从没有预览的相机拍照](https://stackoverflow.com/questions/2386025/android-camera-without-preview)。

那里的第二个答案提到，使用虚拟 SurfaceView 伪造预览不适用于所有 Android 设备。请看他的[博客](http://handycodeworks.com/?p=19)。他在各种手机上完成了测试。你可以试试我的项目，如果它在你的手机上不起作用。可能是这种情况。（其他答案也可能对您有用。）

我在带有 CM10 的 Galaxy S3 上尝试了我的代码。

希望这可以帮助。

Edit1：在 HTC One、HTC One X、Sony Experia 上测试。工作正常。

Edit2：在 Galaxy Note 上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:50:47.513

我不确定这是否适用于其他设备，但如果确实如此，它可能会提供一些关于正在发生的事情的见解。

在 Camera.Parameters 中，有一个功能可以将原始拜耳图像直接保存到 SD 卡中。此图像发生在创建 .jpeg 文件之前，因此如果操作系统正在清除图像，则此图像可能不会受到影响。

> ```
>  Camera.Parameters parameters=camera.getParameters();
>   parameters.set("rawsave-mode", "1");
>   parameters.set("rawfname", "/mnt/sdcard2/test5.raw");
>   camera.setParameters(parameters); 
> ```

如果此功能在您的设备上有效，您应该能够确定照片是正在拍摄并被清除，还是根本没有拍摄。

如果原始图像有效，则将拜耳转换为 RGB 图像或灰度图像相当容易。

我要查看的另一个领域是 logcat 信息，并比较代码的未锁定上下文和代码的锁定上下文之间的日志。如果有安全问题，应该反映在logcat中。

# objective-c - when adding a relationship object w/ core data get "property cannot be found in forward class object" error

> ID：16075727
> 
> 赞同：3
> 
> 时间：2013-04-18T06:12:53.570
> 
> 标签：objective-c, core-data, entity, relationship

I have a core data model with four entities. The entity `Player` has a to-Many relationship to the other entities (`Player_Scores,Custom_Exercise,Selected_Exercise`).

In my app delegate, I make `NSManagedObjectContext,NSManagedObjectModel,NSPersistentStoreCoordinator` properties in the standard way. Then, in a different view controller, I declare ivars for an `NSManagedObjectContext` object and a `newPlayer` Player entity in the **@interface:**

```
@interface NewProfileViewController()
{
    NSManagedObjectContext *context;
    Player *newPlayer;
} 
```

Then in an action I have the following code to create a Player entity and enter in its attributes, as well as a `Player_Scores` entity and a `Selected_Exercise` entity. The code i use successfully adds the attributes for the `Player_Scores` and the Player entities. However when I try to add 16 `Selected_Exercise` entities in a loop and set their attributes I get a big fat "*Property cannot be found on forward class object?*" error. HELP!!!!! Like i said the code is the same for `Selected_Exercise` and for `Player_Scores`. I already tried re-starting, deleting database, etc. It's a compiler error that pops up when i try to do `newEx.exercise=@"blahblahblah";` or `newEx.suit=@"blahblahblah";` UGH

Below is my code for that method:

```
 //1\. save a person to database
        newPlayer=[NSEntityDescription
                           insertNewObjectForEntityForName:@"Player"
                           inManagedObjectContext:context];

        newPlayer.name=newentry;
        //NSError *error; [context save:&error];

        //2\. begin making a score card:
        Player_Scores *newScoreCard = [NSEntityDescription
                               insertNewObjectForEntityForName:@"Player_Scores"
                               inManagedObjectContext:context];

        newScoreCard.date_of_game = [NSDate date];
        newScoreCard.player=newPlayer; //attach this score card to the new playe
        [newPlayer addScoresObject:newScoreCard];//add the score card to the newplayer
        //3\.  make selected_exercise

        NSString *plistCatPath = [[NSBundle mainBundle] pathForResource:@"ListOfExercises" ofType:@"plist"]; //grab plist
        NSMutableArray* theDictArray= [[NSMutableArray arrayWithContentsOfFile:plistCatPath] copy];

        for(int cnt=0;cnt<[theDictArray count];cnt++){

            Selected_Exercise *newEx= [NSEntityDescription
                                       insertNewObjectForEntityForName:@"Selected_Exercise"
                                       inManagedObjectContext:context];
            newEx.exercise=[[theDictArray objectAtIndex:cnt]valueForKey:@"exercise"];
            newEx.suit=[[theDictArray objectAtIndex:cnt]valueForKey:@"suit"];
            [newPlayer addSelected_exerciseObject:newEx];
            NSLog(@"added exercise %@ for suit %@ at array index %d",[[theDictArray objectAtIndex:cnt]valueForKey:@"exercise"],[[theDictArray objectAtIndex:cnt]valueForKey:@"suit"],cnt);
        }
    // Save everything
    NSError *error = nil;
    if ([context save:&error]) {
        NSLog(@"The save was successful!");
    } else {
        NSLog(@"The save wasn't successful: %@", [error userInfo]);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T06:54:58.573

听起来好像您在该文件中导入了“Player.h”，而不是“Selected_Exercise.h”。

“Player.h”可能包含前向声明`@class Selected_Exercise`，因此编译器不会抱怨

```
Selected_Exercise *newEx = [NSEntityDescription ... 
```

`newEx.exercise`但是，如果没有导入“Selected_Exercise.h” ，则编译器不知道该类的属性，例如 。

# c++ - 错误：非常量引用的初始值必须是左值

> ID：16075729
> 
> 赞同：-1
> 
> 时间：2013-04-18T06:12:54.727
> 
> 标签：c++, string, operator-overloading

我的字符串类出现另一个错误。智能感知不会让我使用 strcmp 将对象与自调用对象（即 *this）进行比较。

我尝试制作自己的运算符转换函数来帮助解决这个问题，但它仍然给我错误。

我必须在我的代码中进行哪些更改才能使其正常工作？

```
//Overloaded comparison operators
bool &String::operator<(const String & obj)
{
    return strcmp(*this, obj) < 0 ? true : false;
}

//Operator conversion function
String::operator char const * () const
{
    return mStr;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:14:13.797

您正在返回对局部变量的引用。按值返回。您还可以简化返回表达式，并创建方法`const`，因为比较两个对象不应该改变它们中的任何一个：

```
bool String::operator<(const String & obj) const {
  return strcmp(*this, obj) < 0;
} 
```

~~虽然我不确定是否`strcmp`可以处理两个`String`s，这就是您传递的内容。从你之前的问题来看，你需要~~

 ~~```
return strcmp(mstr, obj.mStr) < 0; 
```~~  ~~* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:14:30.300

制作`const`并删除`&`

```
bool String::operator<(const String & obj) const
                                           ^^^^^ 
```

返回对临时对象的引用会导致未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T14:14:06.987

错误信息明确指向 的第一个参数`strcmp()`，*this 是一个右值，但是 strcmp 需要一个左值，尝试在前面加一句：

```
String thisObj = *this; 
```~~

# mysql - MySQL Replace is not working

> ID：16075732
> 
> 赞同：1
> 
> 时间：2013-04-18T06:13:11.417
> 
> 标签：mysql, replace

I try to use mysql replace with following table.

```
CREATE TABLE price (
   id BIGINT UNSIGNED AUTO_INCREMENT, 
   ski_chalet_id BIGINT UNSIGNED NOT NULL, 
   month DATE NOT NULL, 
   d_1 DOUBLE(18, 2), 
   d_2 DOUBLE(18, 2), 
   d_3 DOUBLE(18, 2), 
   d_4 DOUBLE(18, 2), 
   d_5 DOUBLE(18, 2), 
   created_at DATETIME NOT NULL, 
   updated_at DATETIME NOT NULL, 
   UNIQUE INDEX fk_ski_chalet_price_ski_chalet_idx (ski_chalet_id, month), 
   INDEX ski_chalet_id_idx (ski_chalet_id), 
   PRIMARY KEY(id)
) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB; 
```

I want add a row if row is not exist and update if row is exist. So i used mysql REPLACE to do that.

```
REPLACE INTO  `price` SET `ski_chalet_id` = 43 and `month` = '2013-04-01' and `d_1` = 23 
```

This query is successful. but add all value as 00 and 0000-00-00 or null.

But insert query is working.

```
INSERT INTO `price` (`ski_chalet_id`,`month`,`d_1`) VALUES ('34', '2013-04-01', '46'); 
```

I cant find whats the issue. Please help me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:20:25.620

您必须在替换查询中使用“，”而不是“和”......

替换 为`price`SET `ski_chalet_id`= 43 , `month`= '2013-04-01' , `d_1`= 23

**注意**：如果您希望您不必寻找其他功能，则 REPLACE 功能将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:15:06.033

不要`SET`与`REPLACE`. for 的语法与 for`REPLACE`相同`INSERT`：

```
REPLACE INTO `price` (`ski_chalet_id`,`month`,`d_1`) VALUES ('43', '2013-04-01', '23'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:16:43.647

`SET`要使用in `REPLACE`（和`UPDATE`/ ）指定多个列`INSERT`，必须用逗号分隔它们。您的查询相当于：

```
SET `ski_chalet_id` = (some boolean expression) 
```

改写为

```
SET `ski_chalet_id` = 43, `month` = '2013-04-01', `d_1` = 23 
```

# android - 使 html 页面文本适合窗口宽度

> ID：16075738
> 
> 赞同：2
> 
> 时间：2013-04-18T06:13:28.700
> 
> 标签：android, html, css, webview

您好我的网站是为移动设备设计的。

我在我的应用程序中使用 WebView 来显示这个网站。

当用户缩放文本时，我得到水平滚动条。相反，我想要的是页面中的文本应该换行到下一行，并且文本应该适合屏幕宽度。

应该使用哪些 html5、css3 属性来包装文本以适应移动设备的屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:22:54.483

在苹果网站上它说

> 用户还可以使用手势放大和缩小。放大和缩小时，用户更改视口的比例，而不是视口的大小。因此，平移和缩放不会改变网页的布局。图 3-8 显示了用户放大查看详细信息时的同一网页。

所以我认为这不是可能的，除非你可以操纵规模

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:37:41.483

在您的代码中，您需要实现 WebViewClient 并覆盖 OnScaleChanged 方法，该方法会通知您用户放大了。在此方法中，您需要重新布局整个 WebView。以下代码是我如何实现文本重排（注意：如果您不希望滚动条显示，您将需要更多代码，但我没有添加）：

```
WebView view;
view = (WebView)findViewById(R.id.webView);
view.setWebViewClient(new WebViewClient(){
    @Override
    public void onScaleChanged(WebView view, float oldScale, float newScale) {

        view.getSettings().setLayoutAlgorithm(
                LayoutAlgorithm.NARROW_COLUMNS); //causes the text to reflow to the screen size
        view.invalidate();
        super.onScaleChanged(view, oldScale, newScale);
    }
}); 
```

# php - Change Default Date to firstday of previous month

> ID：16075739
> 
> 赞同：0
> 
> 时间：2013-04-18T06:13:35.217
> 
> 标签：php, jquery, jquery-ui, yii

I am trying to change the default date as first day of previous month in Yii cjuidatepicker. Date is displaying in the textfield correctly,but in the datepicker popup it shows the current date.

**Code**

```
 $model_form->suspended_date_from =date("d-M-Y", mktime(0, 0, 0, date("m")-1, 1, date("Y")));
   $date= date('dd-MM-yy', strtotime($model_form->suspended_date_from));
                       $this->widget('zii.widgets.jui.CJuiDatePicker', array(
                            'model' => $model_form,
                            'attribute' => 'suspended_date_from',
                            'htmlOptions' => array(
                                'class' => 'reporttext-field fromdate',
                                'id' => uniqid(),
                            ),
                            'options' => array(

                                'dateFormat' => 'dd-MM-yy',
                               'defaultDate'=> $date,
                                // 'beforeShowDay'=>'unavailable',

                                'showAnim' => 'fade',
                                //'onSelect' => 'js:function( selectedDate ) {$( ".todate" ).datepicker( "option", "minDate", selectedDate );}'
                            ),
                        )); 
```

How can i show it on the datepicker popup??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:34:13.097

您的日期格式不正确。dd-MM-yy (??) 这个返回类似 1818-AprApr-1313; 所以我认为这是不正确的。如果您将日期格式更改为 dMy，那么您将拥有您想要的。为什么你使用两种不同的日期格式？`("d-M-Y" and "d-M-y")`

```
$date= date('d-M-y', strtotime($model_form->suspended_date_from));
                       $this->widget('zii.widgets.jui.CJuiDatePicker', array(
                            'model' => $model_form,
                            'attribute' => 'suspended_date_from',
                            'htmlOptions' => array(
                                'class' => 'reporttext-field fromdate',
                                'id' => uniqid(),
                            ),
                            'options' => array(

                                'dateFormat' => 'd-M-y',
                               'defaultDate'=> $date,
                                // 'beforeShowDay'=>'unavailable',

                                'showAnim' => 'fade',
                                //'onSelect' => 'js:function( selectedDate ) {$( ".todate" ).datepicker( "option", "minDate", selectedDate );}'
                            ),
                        )); 
```

类似的东西对我有用。

# perl - $_ outputting extra bit of data

> ID：16075741
> 
> 赞同：1
> 
> 时间：2013-04-18T06:13:40.867
> 
> 标签：perl, network-programming, client-server

The static $_ might needs to be flushed. It is tried to be done by $|=1;.

![enter image description here](https://i.stack.imgur.com/MrLYu.png)

***DESIRED OUTPUT:***

*CLIENT*

```
Connected to the Server.
sent to server : SAS4
sent to server : 50
sent to server : SAS_ACTION LOGIN
sent to server : LOGIN bss
sent to server : PASSWORD cleint
sent to server : $END$
Message received from Server : SAS4
Message received from Server : 61
Message received from Server : SAS_ACTION LOGIN_ACK
Message received from Server : ACK_STATUS 0
Message received from Server : ACK_MESSAGE Logged In
Message received from Server : $END$ 
```

*SERVER*

```
Waiting for the Client.
Connected from : 127.0.0.1, Port : 1862
Message received from Client : SAS4
Message received from Client : 50
Message received from Client : SAS_ACTION LOGIN
Message received from Client : LOGIN bss
Message received from Client : PASSWORD cleint
Message received from Client : $END$
server to client : SAS4
server to client : 61
server to client : SAS_ACTION LOGIN_ACK
server to client : ACK_STATUS 0
server to client : ACK_MESSAGE Logged In
server to client : $END$ 
```

***CODE :***

**CLIENT**

```
use strict;
use warnings;
use IO::Socket::INET;

my $socket = new IO::Socket::INET (PeerHost => '127.0.0.1', PeerPort => '1055', Proto    => 'tcp', Reuse    => 1) or die "$!\n";

print "Connected to the Server.\n";

send_login();
$|=1;
receive_loginack();
$socket->close();

sub send_login
{
    my $login_txt = "Login.txt";
    open LOGIN, '<', $login_txt or die "Cannot open $login_txt $!\n";
    my @login = <LOGIN>;
    close LOGIN;

    my $logfile = "logfile.txt";
    open LOG, '>>', $logfile or die "Cannot open $logfile ($!)\n";

    foreach my $login (@login)
    {
        print $socket $login;
        print LOG "CLIENT : $login";
        print "sent to server : $login";
        #last if ($login eq "\$END\$\n");

    }
    close LOG;
}

sub receive_loginack
{
    while (<$socket>)
    {   
        print"Message received from Server : $_";
    }
} 
```

**SERVER**

```
use strict;
use warnings;
use IO::Socket::INET;

my $socket = new IO::Socket::INET (LocalHost => '127.0.0.1', LocalPort => '1055', Proto => 'tcp', Listen => 1, Reuse => 1) or die "Oops: $! \n";

print "Waiting for the Client.\n";
server_loop();
$socket->close();

sub server_loop
{
OUTER:
    while (my $clientsocket = $socket->accept())
    {
        print "connected from : ", $clientsocket->peerhost();
        print ", port : ", $clientsocket->peerport(), "\n";

INNER:
        while (<$clientsocket>)                                 #
        {                                                       #
            print"Message received from Client : $_";           #
            last INNER if ($_ eq "\$END\$\n");                  #       RECEIVING
            #last OUTER if ($_ eq "\$QUIT\$\n");                #
            print $clientsocket $_;                             #
        }                                                       #

        my $login_ack = "login_ack.txt";
        open LOGINACK, '<', $login_ack or die "Cannot open login acknowledgment file $login_ack ($!)\n";
        my @loginack = <LOGINACK>;
        close LOGINACK;

        my $logfile = "logfile.txt";
        open LOG, ">>", $logfile or die "cannot open $logfile ($!)\n";

        foreach my $loginack (@loginack)
        {
            $|=1;
            print $clientsocket $loginack;
            print LOG "SERVER : $loginack";
            print "server to client : $loginack";
            #last if ($loginack eq "\$END\$\n");
        }

        close LOG;
        close $clientsocket;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T06:51:36.313

服务器的输入循环包含：

```
print $clientsocket $_; 
```

因此，客户端发送到服务器的所有内容都会在 login_ack.txt 文件之前被发送回客户端。因此客户端将其打印为从服务器接收到的消息。

# android - Join tables in android

> ID：16075743
> 
> 赞同：5
> 
> 时间：2013-04-18T06:13:41.797
> 
> 标签：android, sqlite

I have 3 tables in my sqllite database Two are config tables and one is main table where my data is stored. now how to retrive data from main table by joining 2 tables in android, How and where to perform join operations.

Can anyone guide me.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T06:17:45.563

你可以只执行一个 rawQuery。
例如这样的：

```
db.rawQuery("SELECT a.* 
FROM table_1 a 
INNER JOIN table_2 b ON a.id=b.anyId 
INNER JOIN table_3 c ON b.id= c.anyId
WHERE c.key = ?", new String[]{"test"}); 
```

第一个参数是您要执行的查询。对于要添加到查询中的所有键，只需`?`在查询中添加一个。
第二个参数是一个字符串数组。在这个数组中，你把你的键，就像上面给出的例子 value `test`。

**编辑：**

也可以将 rawQuery 用于`update`,`insert`或`delete`.
例如一个简单的更新查询：

```
db.rawQuery("UPDATE table_1
SET fieldA = ?,
fieldB = ?
WHERE id = ?", new String[]{"test", "test2", "1"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:40:53.893

类 DatabaseHelper 扩展 SQLiteOpenHelper

在你的函数中写下下面的代码......

```
 SQLiteDatabase db = this.getReadableDatabase();

    private final String MY_QUERY = "YOUR QUERY";

    db.rawQuery(MY_QUERY, new String[]{"Parameter"});
    db.close(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T06:22:02.587

你需要[rawQuery](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)方法来解决这个问题。

```
private final String MY_QUERY = "SELECT * FROM table_a a INNER JOIN table_b b ON a.id=b.other_id WHERE b.property_id=?";

db.rawQuery(MY_QUERY, new String[]{String.valueOf(propertyId)}); 
```

但是如果你想做一个好的实现，为每个表创建一个 SQLiteHelper 和 DataSource 并在数据源中做关系。

# sql-server-2008 - 重复主键异常 MSSQL server 2008

> ID：16075745
> 
> 赞同：1
> 
> 时间：2013-04-18T06:13:46.290
> 
> 标签：sql-server-2008, jira, auto-increment

我`MSSQL server 2008`用作我的 Web 应用程序 (JIRA) 的数据库，几天前我通过数据库插入了一些值。现在，当我尝试通过 UI 添加值时，出现以下异常。

> com.atlassian.jira.exception.DataAccessException：org.ofbiz.core.entity.GenericEntityException：插入时：[GenericEntity:CustomFieldOption][id,10815][sequence,7][value,TEST][customfieldconfig,10400][parentoptionid ,null][disabled,N][customfield,10300]（执行以下操作时出现 SQL 异常：INSERT INTO dbo.customfieldoption（ID、CUSTOFIELD、CUSTOMFIELDCONFIG、PARENTOPTIONID、SEQUENCE、customvalue、optiontype、disabled）VALUES (?, ?, ? , ?, ?, ?, ?, ?) （违反主键约束“PK_customfieldoption”。无法在对象“dbo.customfieldoption”中插入重复键。重复键值为 (10815)。））

我相信这是因为主键是一个自动增量值，我通过查询插入了这个值。有人可以帮我解决这个问题吗？我想重置自动增量序列会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:24:44.237

希望这可以帮助！仅供参考，SQL Server 使用所谓的身份而不是自动增量

```
-- First check what value is being used
dbcc checkident('tableName',noreseed)
-- Then you can "reseed" it to whatever value you want.  If you use 10815, the value that will be used is 10816
dbcc checkident('tableName',reseed,10815) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:27:06.673

简短的回答：

尝试修改 UI 应用程序的代码，使其执行不包含 PK 列 dbo.customfieldoption.ID 的 SQL 语句。

长答案：

您的 UI 应用程序尝试执行以下 SQL 语句。

```
INSERT INTO dbo.customfieldoption (ID, CUSTOMFIELD, CUSTOMFIELDCONFIG, PARENTOPTIONID, SEQUENCE, customvalue, optiontype, disabled) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 
```

上面的 SQL 语句似乎包含 PK 列的值，即 dbo.customfieldoption.ID。如果为数据库启用了自动增量，那么您的 UI 应用程序不需要包含 PK 列的值。

尝试修改 UI 应用程序的代码，使其执行不包含 dbo.customfieldoption.ID 的 SQL 语句。SQL 语句应该与下面的类似。

```
INSERT INTO dbo.customfieldoption (CUSTOMFIELD, CUSTOMFIELDCONFIG, PARENTOPTIONID, SEQUENCE, customvalue, optiontype, disabled) VALUES (?, ?, ?, ?, ?, ?, ?) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:53:17.207

感谢您的快速响应，我找到了一个提供 sql 语句来重置序列 ID 的文档。我将序列 id 重置为比当前最大 (PK 值) 更大的数字。这解决了问题

链接到文档：[https ://confluence.atlassian.com/pages/viewpage.action?pageId=193299577](https://confluence.atlassian.com/pages/viewpage.action?pageId=193299577)

问候，米赞

# android - Android-Magento-如何使用 ksop2 将产品添加到购物车

> ID：16075749
> 
> 赞同：3
> 
> 时间：2013-04-18T06:13:57.917
> 
> 标签：android, magento, android-ksoap2

我正在magento中使用soap api构建android应用程序，它能够在移动设备上销售产品。我正在使用**ksoap2**库文件。

但问题是我无法使用功能**shoppingCartProductAdd**将产品添加到购物车。它给出错误产品的数据无效

因此，如果您有更好的方法将产品添加到购物车，请帮助我

**这是我将产品添加到购物车的代码**

```
SoapObject request;
    Method_Name = "shoppingCartCreate";
    SOAP_ACTION = "urn:Magento/shoppingCartCreate";
    try {
        SoapSerializationEnvelope env = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        env.dotNet = false;
        env.xsd = SoapSerializationEnvelope.XSD;
        env.enc = SoapSerializationEnvelope.ENC;

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

        request = new SoapObject(NAMESPACE, Method_Name);
        request.addProperty("sessionId", sessionId);

        env.setOutputSoapObject(request);
        androidHttpTransport.call("SOAP_ACTION", env);
        cartId = env.getResponse().toString();

        SoapObject loresponse = new SoapObject(NAMESPACE,
                "shoppingCartProductEntity");

        PropertyInfo pi = new PropertyInfo();
        pi.setName("product_id");
        pi.setValue(cartitem.getItemId());
        pi.setType(String.class);

        loresponse.addProperty(pi);

        pi = new PropertyInfo();
        pi.setName("sku");
        pi.setValue(cartitem.getSku());
        pi.setType(String.class);

        loresponse.addProperty(pi);

        pi = new PropertyInfo();
        pi.setName("qty");
        pi.setValue(cartitem.getQuantity());
        pi.setType(Double.class);
        loresponse.addProperty(pi);

        request = new SoapObject(NAMESPACE, "shoppingCartProductAdd");
        request.addProperty("sessionId", sessionId);

        request.addProperty("quoteId", cartId);
        request.addProperty("productsData", loresponse);
        env.setOutputSoapObject(request);
        androidHttpTransport
                .call("urn:Magento/shoppingCartProductAdd", env);
        boolean result1po = (Boolean) env.getResponse();

    }

    catch (Exception ex) {
        Log.e(TAG, "Error: " + ex.getMessage());

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-02T06:19:05.480

使用以下代码创建 ProductArray。我认为缺少“shoppingCartProductEntityArray”

```
 //Create Product Array
        SoapObject item = new SoapObject(NAMESPACE, "shoppingCartProductEntity");
        PropertyInfo pinfo = new PropertyInfo();

        pinfo.setName("product_id");
        pinfo.setValue("91");
        pinfo.setType(String.class);
        item.addProperty(pinfo);

        pinfo = new PropertyInfo();
        pinfo.setName("sku");
        pinfo.setValue("SFS-123");
        pinfo.setType(String.class);
        item.addProperty(pinfo);

        pinfo = new PropertyInfo();
        pinfo.setName("qty");
        pinfo.setValue("2");
        pinfo.setType(Double.class);
        item.addProperty(pinfo);

        SoapObject EntityArray = new SoapObject(NAMESPACE, "shoppingCartProductEntityArray");
        EntityArray.addProperty("products",item);

        SoapObject request = new SoapObject(NAMESPACE, "shoppingCartProductAdd");
        request.addProperty("sessionId", sessionId);
        request.addProperty("quoteId", 166);
        request.addProperty("products",EntityArray); 
```

# jquery - 带有html控件的jquery中的文本/字符串问题

> ID：16075750
> 
> 赞同：1
> 
> 时间：2013-04-18T06:14:06.730
> 
> 标签：jquery, html, string

我在数据库中保存了一个格式化文本。我的文本中有空格、粗体文本、换行符等。当我从数据库中获取并提醒它时，没关系，一切都是一样的。但是当我将它分配给 html 控件时喜欢

```
<textarea id="description"></textarea> 
```

然后提醒它，它会丢失所有 html 标签，如空格、换行符粗体等……整个文本显示为一个段落。

```
 <textarea name="description" cols="200" rows="50" id="description"></textarea>
  alert(json.description_demo);//this is ok
  $("#description").val(json.description_demo);
  alert($("#description").val());//now it give me issue 
```

# 可能是什么问题？这是我的文字

全新的！！！

位于迪拜码头奥拉塔的超大三卧室公寓出租

位于高楼层，可俯瞰码头的壮丽景色

娱乐和体育设施 - 温控游泳池、按摩浴缸、独立的湿区、最先进的健身房、网球场和篮球场以及专用的室内儿童游乐区设施：

24/7 接待和保安 游泳池 健身房 桑拿 儿童游乐区 豪华室内设计 高速电梯 可到达 Marina Mall、Emirates Mall 和 Ibn Batuta Mall，仅需 3 分钟

单击此链接进行迪拜码头虚拟之旅：http: [//360emirates.com/virtual_tours/15#](http://360emirates.com/virtual_tours/15#)

Rhhh Real Estate 为每一位客户提供全方位的服务。我们提供出售和出租的综合物业。我们的团队是高度熟练的房地产顾问，他们是房地产行业各个方面的专家。

有关此房产的更多详细信息，请联系 Roassasae Real Estate，ORN：121

电话：+97142

手机：+971544444444 要查看更多房产，请访问 www.abc.ae

要列出您的房产，请立即联系我们，精心设计的营销套餐等着您。RERA 经纪人 ID-13334

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:21:26.657

尝试使用[contenteditable](http://html5demos.com/contenteditable) div ：

```
<div id="description" contenteditable="true">

</div> 
```

使用 as javascript：

```
$("#description").html(json.description_demo); 
```

但要小心 XSS 攻击 ;)。

# java - Apache Camel：查询参数与标头参数

> ID：16075758
> 
> 赞同：1
> 
> 时间：2013-04-18T06:14:29.917
> 
> 标签：java, http-headers, apache-camel, query-parameters, spring-dsl

我目前正在尝试使用 Apache camel（作为路由引擎）。我了解 Camel 支持多种 DSL，并且可以使用 Java (Java DSL) 或 Spring (Spring DSL) 进行配置。

**问题：**
我有以下 Spring DSL 配置。这个想法是，如果传入的请求具有名为“name”的标头参数，它将命中 when 子句，否则会将请求路由到 google：

```
 <camel:route>
    <camel:from uri="servlet:///test" />
    <camel:choice>
        <camel:when>
            <camel:header>name</camel:header>
            <camel:transform>
                <camel:simple>Hello ${header.name} how are you?</camel:simple>
            </camel:transform>
        </camel:when>
        <camel:otherwise>
                <camel:to uri="http://www.google.com?bridgeEndpoint=true" />
        </camel:otherwise>
    </camel:choice>
</camel:route> 
```

我希望上述配置仅适用于 Header Param。但是，我注意到此配置甚至适用于查询参数，如以下请求所示：

```
http://localhost:8080/<war-context>/test?name=test 
```

有没有办法确保它只适用于标题参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T12:00:27.377

[这里](https://camel.apache.org/components/2.x/servlet-component.html#_message_headers)有很好的记录，查询参数被复制到 servlet 组件中的交换标头。

# python - 如何删除 one2many 树视图中的删除图标

> ID：16075761
> 
> 赞同：4
> 
> 时间：2013-04-18T06:14:44.490
> 
> 标签：python, xml, openerp

请就此向我提出建议。需要删除删除图标。但需要创建和编辑记录。如果我将其设置为只读，则也无法编辑。那么实现这个的更好方法是什么

![删除图标](https://i.stack.imgur.com/2O2e3.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T06:23:36.263

添加标签`delete="false"`。`tree`

```
<tree string="My Tree" delete="false"> 
```

这将从`one2many`树视图中删除删除选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T04:57:36.333

我也以一种形式使用它。像那样，

```
<form string="Employee" version="7.0" create="false" edit="false" delete="false"> 
```

有效。

# java - 使用两个 for 循环输出组环值

> ID：16075763
> 
> 赞同：0
> 
> 时间：2013-04-18T06:14:55.520
> 
> 标签：java, for-loop

我正在学习 Java，但我对 for 循环的了解似乎很薄弱。

我应该打电话`printSquare(1, 5);`。我想要的输出是：

```
12345
23451
34512
45123
51234 
```

我试过了：

```
public void printSquare(int min,int max){

    for(int i=min;i<=max;i++){
        for(int j=i;j<=max;j++){
          System.out.print(j);
        }
        System.out.println();
    }
} 
```

这给了我：

```
12345
2345
345
45
5 
```

然后我尝试再插入 2 个循环，但它似乎不起作用。

如果您不给我完整的答案，我将不胜感激，因为那不是学习的方式。我希望提供一些有关如何完成此任务的线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:16:52.103

您应该再添加一个嵌套在`i`循环中但在循环之外的`j`循环。

应该是从`min`到`i-1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:20:38.730

尝试

```
public static void printSquare(int min, int max) {

    int x = max - min + 1;

    for (int i = min; i <= max; i++) {
        int counter = i;
        for (int j = 0; j < x; j++) {
            System.out.print(counter);
            counter = counter >= max ? min : counter + 1;
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T08:22:42.867

因此，您似乎从 8 个答案中得到了解决方案。:)

我只想对此进行测试，看看哪个更快（我的）或 3 循环方法。

这是代码（您不必以任何方式理解它），除了一种方法 - **printSquare(int number)**是唯一与您相关的方法。其余的与卡尺框架有关——我用它来测量一些结果。

```
import com.google.caliper.Param;
import com.google.caliper.Runner;
import com.google.caliper.SimpleBenchmark;

public class Measure extends SimpleBenchmark {
     public static void main(String[] args) {
         Runner.main(Measure.class, args);
     }

     @Param({"1"})
     private int mins;

     @Param({"4","7","9"})
     private int maxs;

    public void timePrintSquare3Loops(int reps){
        for(int i=0;i<reps;++i){
            printSquareTwo(mins, maxs);
        }
    }

    public void timePrintSquareMine(int reps){
        for(int i=0;i<reps;++i){
            printSquareOne(mins, maxs);
        }
    }

    public void timePrintSquareTwoLoops(int reps){
        for(int i=0;i<reps;++i){
            printSquareTwoLoops(mins, maxs);
        }
    }

    /**
     * the general solution with 3 loops
     */
     public void printSquareTwo(int min,int max){
         for(int i=min;i<=max;i++){
             for(int j=i;j<=max;j++) System.out.print(j);
             for(int k=min;k<i;k++)  System.out.print(k);           
         }
     }

    public static void printSquareTwoLoops(int min, int max) {
        int x = max - min + 1;
        for (int i = min; i <= max; i++) {
            int counter = i;
            for (int j = 0; j < x; j++) { 
                System.out.print(counter);
                counter = counter >= max ? min : counter + 1;
            }
            System.out.println();
        }
    }

    /**
     * If you know the number upfront. for example 345678.
     *    345678-3*10000=45678=>most significatDigit=3, difference = 45678\. 
     *    number = 45678*10 + significatDigit=456783
     *    
     *    And so on..
     * 
     */
     public void printSquareOne(int min, int max){
         StringBuilder sb = new StringBuilder();
         for(int i=min;i<=max;++i){sb.append(i);}
             int number = Integer.valueOf(sb.toString());
             int howMany = (""+number).length();        
             for(int i=0;i<howMany;++i){
                 int pow = (int)Math.pow(10, (howMany-1));
                 int mostSignificantDigit = 0;
                 int intermediarResult = number;
                 do {
                     ++mostSignificantDigit;
                     intermediarResult = intermediarResult - pow;
                 } while (intermediarResult>pow);
                 number = intermediarResult * 10 + mostSignificantDigit;
                 System.out.println(number);
            }    
     }
} 
```

我进行了一些测试。

**编辑**我还在测试中添加了@Arun P Johny 方法。

这是输出：

```
 4      PrintSquare3Loops  32.4 =====
 4        PrintSquareMine  20.7 ===
 4    PrintSquareTwoLoops  38.4 ======
 4 PrintSquareCollections  31.8 =====
 7      PrintSquare3Loops  92.9 ==============
 7        PrintSquareMine  36.8 =====
 7    PrintSquareTwoLoops 102.6 ================
 7 PrintSquareCollections 104.8 ================
 9      PrintSquare3Loops 166.2 ==========================
 9        PrintSquareMine  41.7 ======
 9    PrintSquareTwoLoops 187.5 ==============================
 9 PrintSquareCollections 147.7 ======================= 
```

似乎一个接一个的3个循环对性能没有那么好。我在这里谈论内存，我相信我的会使用更多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T06:22:30.567

我认为你可以在 j 之外尝试第二个循环

```
public void printSquare(int min,int max){

    for(int i=min;i<=max;i++){

        for(int j=i;j<=max;j++){
          System.out.print(j);
        }
        for(int k=min;k<i;k++){
          System.out.print(k);
        }

    System.out.println();
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T07:02:47.383

我不赞成让学生完全实施，但这次我做了一些与 OP 建议不同的事情。希望他能学到一些东西。

```
public class RingGroupPrint {
  public static void printSquare(int min,int max){
    LinkedList<Integer> list = new LinkedList<Integer>();
    for (int a=min; a<=max; a++) {
      list.add(a);
    }

    for (int i= 0, amount = max-min +1; i<amount; i++ ){
      for (Integer val: list) {
        System.out.print(val);
      }
      list.offerLast(list.pollFirst());
      System.out.println();
    }
  }

  public static void main(String[] args) {
    printSquare(1, 5);
  }
} 
```

我并不声称它比简单的 2 for 实现是最佳的或更好的。它使用Java的集合，是一个很好的学习资料。我希望。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T06:32:33.490

看到这个逻辑，它执行所需的操作，它是通用的，适用于 min、max 的任何 +ve 值：

```
for(int i=min;i<=max;i++){
    for(int j=min;j<=max;j++){
        int val = (j + i - min);
            if (val >max ){
                val -= max - min + 1;
            }
            System.out.print(val);
        }
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-18T06:30:26.050

在您的代码中添加另一个循环。尝试这个：

```
public void printSquare(int min, int max) {
        for (int i = min; i <= max; i++) {
            int j = i;
            for (j = i; j <= max; j++) {
                System.out.print(j);
            }
            for (int k = j - i, l = min; k < max; k++, l++) {
                System.out.print(l);
            }

            System.out.println();
        }
} 
```

# c - OpenGL：将帧缓冲区保存到图像，文件

> ID：16075764
> 
> 赞同：2
> 
> 时间：2013-04-18T06:15:04.690
> 
> 标签：c, visual-c++, opengl

我写了几行代码来绘制一个旋转的矩形：

```
#include "glut.h"
static GLfloat spin = 0.0; /* current angle */
void init(void) 
{
    glClearColor (0.0, 0.0, 0.0, 0.0);
    glShadeModel (GL_FLAT);
}
void display(void)
{
    glClear(GL_COLOR_BUFFER_BIT);
    glPushMatrix();
    glRotatef(spin, 0.0, 0.0, 1.0);  /* rotate Oxyz (OZ) */
    glColor3f(1.0, 1.0, 1.0); /* bgr-color: white; */
    glRectf(-25.0, -25.0, 25.0, 25.0); /* Rectangle */
    glPopMatrix();
    glutSwapBuffers();  /* Swap 2 buffer */
}
void spinDisplay(void)
{
    spin = spin + 2.0;  /* Add 2 degrees for every loop action */
    if (spin > 360.0)
        spin = spin - 360.0;
    glutPostRedisplay();  /* Alert: Redraw */
}
/* Change window mode */
void reshape(int w, int h)
{
    glViewport (0, 0, (GLsizei) w, (GLsizei) h); /* change viewport */
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-50.0, 50.0, -50.0, 50.0, -1.0, 1.0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}
/* Mouse interaction */
void mouse(int button, int state, int x, int y) 
{
    switch (button) {
    case GLUT_LEFT_BUTTON:  /* left mouse */
        if (state == GLUT_DOWN)
            glutIdleFunc(spinDisplay); /* idle mode switch to spinDisplay */
        break;
        //case GLUT_MIDDLE_BUTTON:  /* middle mouse button */
        //if (state == GLUT_DOWN)
        //glutIdleFunc(NULL);
        //break;
    default:
        break;
    }
}
/* main */
int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGB);  /* double buffer */
    glutInitWindowSize (500, 500); 
    glutInitWindowPosition (100, 100);
    glutCreateWindow ("spinning rectangle");
    init ();
    glutDisplayFunc(display); 
    glutReshapeFunc(reshape); /* reshape func (redraw) when window size changed */
    glutMouseFunc(mouse); /* mouse func */
    glutMainLoop();
    return 0;
} 
```

我想将帧缓冲区保存到图像（JPEG、BMP、TIFF）或文件中。你能告诉我怎么做吗？我需要使用一些像 jpeglib、libtiff 这样的库吗？

# c# - 正在运行的应用程序的自动检查器并创建报告

> ID：16075767
> 
> 赞同：0
> 
> 时间：2013-04-18T06:15:09.710
> 
> 标签：c#, window

我想创建一个应用程序来检查计划任务程序是否正在运行，并在检查后生成报告并自动将报告发送到电子邮件。

这是出于监控目的。并跟踪系统中的差异。

希望得到您的回应。

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:18:19.233

*   创建一个计时器
*   在定时器的 esaspsed 函数中，获取所有正在运行的进程
*   按进程名称（或任何名称）检查它是否存在；
*   使用 System.Web.Mail.MailMessage 类编写电子邮件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:41:33.860

这就像一个参考代码给你，你需要修改它：

```
public Form1()
        {
            InitializeComponent();
            CreateTimer();
        }

        private void CreateTimer()
        {
            System.Windows.Forms.Timer ProcessChecker = new System.Windows.Forms.Timer();
            ProcessChecker.Tick += new System.EventHandler(ProcessChecker_Tick);
            ProcessChecker.Interval = 6000;    //set your required interval for checking
            ProcessChecker.Start(); //now start the timer            
        }

        void ProcessChecker_Tick(object sender, System.EventArgs e)
        {
            Process[] pro = Process.GetProcessesByName("notepad"); //place your processname at the place of notepad
            if (pro.Length > 0)
            {
                new Thread(GenerateReport).Start(); //it will generate report in parallel so your process will not be effected by its longer time to generate report and sending email
            }
        }

        private void GenerateReport()
        {
            //after generating report send email
            SendEmail();  //create it and then invoke it here
        } 
```

# c# - 为 64 位项目调用 C# 中的 Javascript 函数

> ID：16075775
> 
> 赞同：0
> 
> 时间：2013-04-18T06:15:50.460
> 
> 标签：c#, javascript, 64-bit, eval, clsid

我正在尝试从 C# 代码内部调用 Javascript 函数“eval”（以将字符串用于运算符解析器）。我使用了以下代码： [https ://stackoverflow.com/a/12431435/712700](https://stackoverflow.com/a/12431435/712700)

但它会崩溃并显示以下消息---：

> **异常详细信息：** System.Runtime.InteropServices.COMException：检索具有 CLSID {0E59F1D5-1FBE-11D0-8FF2-00A0D10038BC} 的组件的 COM 类工厂失败，原因是以下错误：80040154 未注册类（来自 HRESULT 的异常：0x80040154（REGDB_E_CLASSNOTREG） ））。

我相信问题是因为项目/机器是 64 位的。我不想将项目更改为 32 位，是否可以使用另一个 CLSID 使其与 64 位一起使用？或者是否有另一种方法可以在 C# 代码中简单地利用 Javascript 中的“eval”函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:07:39.577

您指的是以下代码

```
Type scriptType = Type.GetTypeFromCLSID(Guid.Parse("0E59F1D5-1FBE-11D0-8FF2-00A0D10038BC"));

dynamic obj = Activator.CreateInstance(scriptType, false);
obj.Language = "javascript";

var res = obj.Eval("a=3; 2*a+32-Math.sin(6)"); 
```

上面的 ClSID 其实是针对 ScriptControl

*   [添加 ScriptControl](http://msdn.microsoft.com/en-us/library/aa227400%28v=vs.60%29.aspx) - 语言参数
*   [使用 ScriptControl 方法](http://msdn.microsoft.com/en-us/library/aa227637%28v=vs.60%29.aspx)- Eval 方法

从上面的 2 个链接中，您将看到这是与 VB6 相关的，如果您想使用问题中提到的上述代码，您将需要**msscript.ocx**。请检查您是否有此文件。您可能必须使用 regsvr32 正确注册它

我使用的是 64 位机器，我在以下文件夹中看到该文件`C:\Windows\SysWOW64`

# android - 从 res 文件夹 android 动态访问图像

> ID：16075778
> 
> 赞同：5
> 
> 时间：2013-04-18T06:16:12.277
> 
> 标签：android, android-image

我在 res 文件夹中有这样的图像

![在此处输入图像描述](https://i.stack.imgur.com/9aEVT.png)

我想像这样动态访问这个

```
holder.Viewcover.setImageDrawable(Drawable.createFromPath("R.id." + CoverimgUrl.get(position))); 
```

**CoverimgUrl**是一个列表，其中有两个图像名称一个是**book_cover** & 另一个是**blank_image**这个数组是动态生成的，所以我如何从该列表中设置这个图像

**一句话，如何动态访问可绘制文件夹中的图像，我需要从数组列表中获取该图像名称？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T06:18:40.357

```
Resources res = getResources();
String mDrawableName = "image_name";
int resourceId = res.getIdentifier(mDrawableName , "drawable", getPackageName());
Drawable drawable = res.getDrawable(resourceId);
icon.setImageDrawable(drawable ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:25:39.393

首先制作**CoverimgUrl**整数列表

```
List<Integer> CoverimgUrl =new ArrayList<Integer>();
            CoverimgUrl.add(R.drawable.book_cover);
            CoverimgUrl.add(R.drawable.blank_image); 
```

然后

```
holder.Viewcover.setImageResource(CoverimgUrl.get(position)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T06:30:38.837

createFromPath 需要文件的路径，而不是 ID。

您可以使用以下内容：

int id = getResources().getIdentifier(CoverimgUrl.get(position), "id", getPackageName()); holder.Viewcover.setImageDrawable(getResources().getDrawable(id));

getIdentifier() 从字符串中获取 ID。当您使用“R”类时，它包含用于 id 的静态整数。所以 R.id.some_name 实际上是一个整数，也就是 some_name 资源的 id。

一旦你用 getIdentifier 得到这个整数，你就可以使用 getResources().getDrawable() 来获取具有给定 ID 的可绘制对象。

让我知道这个是否奏效。

# java - 比较方法抛出一般合同异常

> ID：16075779
> 
> 赞同：2
> 
> 时间：2013-04-18T06:16:25.587
> 
> 标签：java, collections, comparator

下面是导致异常的代码块，

**代码 ：**

```
 Collections.sort( arrayList, new Comparator()
            {
                public int compare( Object o1, Object o2 )
                {
                TypeAdapterSort tas1 = ( TypeAdapterSort ) o1;
                TypeAdapterSort tas2 = ( TypeAdapterSort ) o2;
                if ( tas1.order < tas2.order )
                    return -1;
                else
                    return 1;
                }
            } ); 
```

**例外 ：**

```
java.lang.IllegalArgumentException: Comparison method violates its general contract!
                    at java.util.TimSort.mergeLo(TimSort.java:747)
                    at java.util.TimSort.mergeAt(TimSort.java:483)
                    at java.util.TimSort.mergeForceCollapse(TimSort.java:426)
                    at java.util.TimSort.sort(TimSort.java:223)
                    at java.util.TimSort.sort(TimSort.java:173)
                    at java.util.Arrays.sort(Arrays.java:659)
                    at java.util.Collections.sort(Collections.java:217) 
```

当我运行与独立程序相同的代码时，问题永远不会发生。这里的比较器有什么问题？有没有办法在独立代码中重现问题？

此问题仅在 Java 1.7 上出现，因为 Arrays.sort 和 Collections.sort 的实现发生了变化。如何更改上述代码以避免该问题？另外，如何在独立代码中重现此问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T06:19:09.910

比较器*不*遵守一般合同。看这个：

```
if ( tas1.order < tas2.order )
    return -1;
else
    return 1;
} 
```

现在考虑两个具有相同 的对象`order`。比较它们*应该*返回 0。

[`Integer.compare`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#compare%28int,%20int%29)如果您使用的是 Java 7 ，最好只委托给：

```
return Integer.compare(tas1.order, tas2.order); 
```

或者，如果您使用的是早期版本：

```
return tas1.order == tas2.order ? 0
     : tas1.order < tas2.order ? -1
     : 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:21:31.617

您不需要只返回 -1 或 1。一般合同规定，如果第一个元素更小，则返回的数字必须为负数，如果它们相等则返回零，如果第二个元素更小，则返回正数。所以你可以跳过 if/else 语句，直接返回：

```
return tas1.order - tas2.order; 
```

# javascript - 如何使用 WWW::Mechanize 访问由下拉列表拆分的页面

> ID：16075788
> 
> 赞同：0
> 
> 时间：2013-04-18T06:16:52.993
> 
> 标签：javascript, html, perl, unix, mechanize

我有从以下链接下载的基因列表。在下拉列表下，它被分成 60 页的问题。

```
http://diana.cslab.ece.ntua.gr/micro-CDS/index.php?r=search/results_mature&mir=hsa-miR-3131&kwd=MIMAT0014996 
```

如何让[WWW::Mechanize](http://search.cpan.org/~jesse/WWW-Mechanize-1.72/lib/WWW/Mechanize.pm)访问所有页面中的所有基因？

这是我拥有的当前代码：

```
use WWW::Mechanize;
use strict;
use warnings;

my $url = "http://diana.cslab.ece.ntua.gr/micro-CDS/index.php?r=search/results_mature&mir=hsa-miR-3131&kwd=MIMAT0014996";

my $mech = WWW::Mechanize->new();
$mech->agent_alias("Windows IE 6");

$mech->get($url);
#only access the first page. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:43:16.830

这很简单——页码在 URL 中（这是针对第 11 页的）：

```
my $page_number = 11;
$mech->get( "http://diana.cslab.ece.ntua.gr/micro-CDS/index.php?r=search%2Finitializesearch&keywords=MIMAT0014996&thr=0.41&kegg=&page=" . $page_number ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:36:19.550

页面下拉是使用 Javascript 实现的。你不能用 Mechanize 做到这一点，因为它没有实现 Javascript。查看[常见问题解答](http://search.cpan.org/~jesse/WWW-Mechanize-1.72/lib/WWW/Mechanize/FAQ.pod#JavaScript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T08:22:45.493

```
$pages = 60;
for($i=1;$pages<=60;$i++){
    $url = "http://diana.cslab.ece.ntua.gr/micro-CDS/index.php?r=search%2Finitializesearch&keywords=MIMAT0014996&thr=0.41&kegg=&page=$i"
    $mech->get($url);
} 
```

这应该这样做。您只需要遍历这 60 个页面，每次都修改 URL。

# django - 如何使用 call_command 和 dumpdata 命令将 json 保存到文件

> ID：16075789
> 
> 赞同：18
> 
> 时间：2013-04-18T06:16:57.103
> 
> 标签：django, json, command, call, dumpdata

我正在尝试使用该`call_command`方法来调用 dumpdata `command`。手动，我使用它来将数据保存到文件中。

```
python manage.py dumpdata appname_one appname_two > /path/to/save/file.json 
```

它保存了 json 文件。现在，我需要使用该`call_command`方法调用此命令。

我可以使用以下命令从命令中打印出 json：

```
from django.core.management import call_command

call_command('dumpdata', 'appname_one', 'appname_two') 
```

有没有办法像我们从命令行那样将给定的数据保存到文件中？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-18T06:36:41.073

必须重定向`sys.stdout`到文件才能实现上述目的。就像是。

```
import sys

from django.core.management import call_command

sysout = sys.stdout
sys.stdout = open('filename.json', 'w')
call_command('dumpdata', 'appname_one', 'appname_two')
sys.stdout = sysout 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-09T20:40:58.373

一个更好的方法是使用 Django 的内置标准输出重定向到他们的命令模块。请参阅[此处的文档](https://docs.djangoproject.com/en/stable/ref/django-admin/#output-redirection)。

如果要在将流发送到文件之前对其进行操作，还可以将 StringIO 缓冲区传递给它：

```
import os
from cStringIO import StringIO

from django.core import management

def create_fixture(app_name, filename):
    buf = StringIO()
    management.call_command('dumpdata', app_name, stdout=buf)
    buf.seek(0)
    with open(filename, 'w') as f:
        f.write(buf.read()) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-30T17:15:46.483

我正在使用 Django 夹具魔术[https://github.com/davedash/django-fixture-magic](https://github.com/davedash/django-fixture-magic)并且需要转储自定义夹具。我尝试了几种方法，但最终使用了 Amyth 的答案，因为这是唯一有效的方法。

这是我的管理操作，适用于夹具魔术

```
def export_survey(modeladmin, request, queryset):

    sysout = sys.stdout

    survey = queryset[0]
    fname = "%s.json" %(survey.slug)
    response = HttpResponse(mimetype='application/json')
    response['Content-Disposition'] = 'attachment; filename=%s' %(fname)

    sys.stdout = response
    call_command('custom_dump', 'complete_survey', survey.id)
    sys.stdout = sysout
    return response

export_survey.short_description = "Exports a single survey as a .json file" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-19T14:55:22.933

DB 夹具通常可以很好地压缩，并且`loaddata`可以读取压缩的夹具。直接写一个`.bz2`压缩的fixture：

```
import bz2

with bz2.BZ2File('db.json.bz2', 'w', buffering=1024) as f:
  django.core.management.call_command('dumpdata', stdout=f) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-22T18:02:36.790

这有助于将多个转储数据转储到 json 文件中

```
from django.core.management import call_command
import sys

sys.stdout = open('app_one/fixtures/apple.json', 'w')
call_command('dumpdata', 'app_one.apple')

sys.stdout = open('app_two/fixtures/banana.json', 'w')
call_command('dumpdata', 'app_two.banana') 
```

# android - 选择 ActionbarSherlock 选项卡时重新创建片段

> ID：16075790
> 
> 赞同：1
> 
> 时间：2013-04-18T06:17:03.950
> 
> 标签：android, android-actionbar, actionbarsherlock, android-tabs

我有一个包含三个片段的片段活动。

```
public class MainActivity extends SherlockFragmentActivity {
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab tab1 = bar.newTab();
    ActionBar.Tab tab2 = bar.newTab();
    ActionBar.Tab tab3 = bar.newTab();
    tab1.setText("");
    tab1.setIcon(R.drawable.abs__ic_menu_share_holo_dark);
    tab2.setText("");
    tab2.setIcon(R.drawable.abs__ic_voice_search);
    tab3.setText("");
    tab3.setIcon(R.drawable.abs__ic_cab_done_holo_dark);

    if (savedInstanceState == null) {

        tab1.setTabListener(new MyTabListener());
        tab2.setTabListener(new MyTabListener());
        tab3.setTabListener(new MyTabListener());
        bar.addTab(tab1);
        bar.addTab(tab2);
        bar.addTab(tab3);

    }
}

private class MyTabListener implements ActionBar.TabListener {
    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {

        switch (tab.getPosition()) {
        case 0:

            FeedsActivity frag = new FeedsActivity();

            ft.replace(android.R.id.content, frag);
            return;

        case 1:
            ProfileActivity frag2 = new ProfileActivity();
            ft.replace(android.R.id.content, frag2);
            return;
        case 2:
            MyMemoirsActivity frag3 = new MyMemoirsActivity();
            ft.replace(android.R.id.content, frag3);
            return;

        }

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
    }
} 
```

}

这是第一个片段，

```
public class FeedsActivity extends SherlockFragment {

public static String[] MainCategory; 
public static String[] MainCategoryId; 
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup group,
        Bundle saved) {
    setRetainInstance(true);
    return inflater.inflate(R.layout.activity_feeds, group, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

         new GetMainCategory(getActivity()).execute();

}
} 
```

当我选择第二个选项卡然后选择第一个选项卡时，再次调用第一个片段中的异步任务。如何保留第一个片段的状态以便创建一次它的视图？我使用了 setRetainInstance(true) 但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:23:41.103

我通过使用显示和隐藏而不是附加和分离解决了这个问题。

```
 private class MyTabListener implements ActionBar.TabListener {
        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {

            switch (tab.getPosition()) {
            case 0:

                if (frag1 == null) {
                    // If not, instantiate and add it to the activity
                    frag1 = Fragment.instantiate(getApplicationContext(),
                            FeedsActivity.class.getName());
                    ft.add(android.R.id.content, frag1, "Feeds");
                } else {
                    // If it exists, simply attach it in order to show it
                    ft.show(frag1);
                }
                return;

            case 1:
                if (frag2 == null) {
                    // If not, instantiate and add it to the activity
                    frag2 = Fragment.instantiate(getApplicationContext(),
                            ProfileActivity.class.getName());
                    ft.add(android.R.id.content, frag2, "Profile");
                } else {
                    // If it exists, simply attach it in order to show it
                    ft.show(frag2);
                }
                return;
            case 2:

                if (frag3 == null) {
                    // If not, instantiate and add it to the activity
                    frag3 = Fragment.instantiate(getApplicationContext(),
                            History.class.getName());
                    ft.add(android.R.id.content, frag3, "History");
                } else {
                    // If it exists, simply attach it in order to show it
                    ft.show(frag3);
                }

                return;

            }

        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub
            if (frag1 != null) {
                // Detach the fragment, because another one is being attached
                switch (tab.getPosition()) {
                case 0:
                    ft.hide(frag1);
                    return;
                case 1:
                    ft.hide(frag2);
                    return;
                case 2:
                    ft.hide(frag3);
                    return;

                }

            }
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:35:30.293

使用 TabListener 的正确方法是：

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    // Check if the fragment is already initialized
    if (mFragment == null) {
        // If not, instantiate and add it to the activity
        mFragment = Fragment.instantiate(mActivity, mClass.getName());
        ft.add(android.R.id.content, mFragment, mTag);
    } else {
        // If it exists, simply attach it in order to show it
        ft.attach(mFragment);
    }
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    if (mFragment != null) {
        // Detach the fragment, because another one is being attached
        ft.detach(mFragment);
    }
}

@override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
    // User selected the already selected tab. Usually do nothing.
} 
```

基本上你需要检查你的 Fragment 是否是第一次被初始化。如果没有，您应该将它添加到您的屏幕，当用户取消选择一个选项卡时，您应该分离当前可见片段并添加新片段。这就是它应该工作的方式。每次用户单击选项卡时，您都不需要创建 Fragment 的新实例。

# opengl - Drawing multiple objects with different textures

> ID：16075791
> 
> 赞同：0
> 
> 时间：2013-04-18T06:17:06.920
> 
> 标签：opengl

Do I understand correctly that the typical way to draw multiple objects that each have a different texture in OpenGL is to simply bind one texture at a time using `glBindTexture` and draw the objects that use it, then bind a different texture and do the same?

In other words, only one texture can be "active" for drawing at any particular time, and that is the last texture that was bound using `glBindTexture`. Is this correct?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T06:42:04.650

> bind one texture at a time using glBindTexture and draw the objects that use it, then bind a different texture and do the same?
> 
> In other words, only one texture can be "active" for drawing at any particular time

These two statements are not the same thing.

A single rendering operation can only use a single *set* of textures at any time. This set is defined by the textures currently bound to the various texture image units. The number of texture image units available is queryable through `GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS`.

So multiple textures can be "active" for a single rendering command.

However, that's *not* the same thing as binding a bunch of textures and then rendering several objects, where each object only uses *some* (or one, in your case) of the bound textures. You *could* do that, but really, there's not much point.

The association between a GLSL sampler and a texture image unit is part of the program object state. It's [the value you set on the sampler uniform](http://www.opengl.org/wiki/Sampler_%28GLSL%29#Binding_textures_to_samplers). Therefore, in order to do what you suggest, you would have to bind a bunch of textures, set the uniform to one of them, render, then set the uniform to the next, render, etc.

You are still incurring all of the cost of binding those textures. You're still incurring all of the overhead of changing uniforms. Indeed, it might be less efficient, since the normal way (bind, render, bind, render) doesn't involve changing uniform state.

Plus, it's just weird. Generally, you shouldn't be changing uniform sampler state dynamically. You define a simple convention (diffuse texture comes from unit 0, specular from unit 1, etc), and you stick to that convention. Any GL 3.x-class hardware is required to provide no less than 48 texture image units (16 per stage), so it's not like you're going to run out.

There are mechanisms to do things not entirely unlike what you're talking about. For example, [array textures](http://www.opengl.org/wiki/Array_Texture) can be leveraged, though this requires explicit shader logic and support. That would almost certainly be faster than the "bind a bunch of textures" method, since you're only binding one. Also, the uniform you'd be changing is a regular data uniform rather than a sampler uniform, which is likely to be faster.

With the array texture mechanism, you can also leverage [instancing](http://www.opengl.org/wiki/Vertex_Rendering#Instancing), assuming you're rendering the same object with slightly different parameters.

# restkit-0.20 - 更新不属于 RestKit 映射的属性的首选方法是什么

> ID：16075792
> 
> 赞同：0
> 
> 时间：2013-04-18T06:17:14.183
> 
> 标签：restkit-0.20

响应对象中的对象到我的数据模型中的对象的所有映射都很清楚如何做并且工作得很好。但是，每次通过映射更改值时，我都需要更新数据模型上的某些属性，这些属性不是响应对象的一部分。例如 last_synced 日期或部分排序属性（这是基于映射对象之一的值）等。

有没有办法将其设置为映射操作的一部分，或者我是否需要通过迭代 mappingResult 在成功块中手动处理这些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:37:44.340

看看使用 KVO 和 NSManagedObject 提供的工具，而不是尝试使用 RestKit。当映射将更改应用于模型对象以执行内部数据更新时，您可以触发相关的 KVC 更改。

# python - 在 Django 1.5 中使用两个数据库

> ID：16075798
> 
> 赞同：0
> 
> 时间：2013-04-18T06:18:02.953
> 
> 标签：python, django, oracle, connection-string, tns

我有一个带有 SQLite 或 MySQL 数据库的 Django 1.5 应用程序。在本地服务器上，我有一个 Oracle 数据库，我通常使用连接字符串连接到该数据库

> “TNS=TNS 名称；UID=用户；PWD=pwd；”。

如何在我的 Django 应用程序中从本地 Oracle 数据库打印数据？
实际上，我想将数据从 Oracle 数据库传输到我的主 SQLite/MySQL 数据库中。
我已经看过一些教程如何在 Django 应用程序中使用 Oracle 数据库作为主数据库源，但我想保留我的主数据库源，并在特定的 Django 视图中从 Oracle 数据库加载一些特定数据。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:29:04.970

我不太确定这是否是您要查找的内容，但是[Django Docs](https://docs.djangoproject.com/en/1.5/topics/db/multi-db/)似乎很好地解释了它（如果我解释正确的话）。简而言之，您需要将其添加到设置文件中的数据库列表中并创建一个路由器。数据库的查找链在[此处](https://docs.djangoproject.com/en/1.5/topics/db/multi-db/#using-routers)详细介绍。

# liferay-6 - 从 /web/guest 更改默认 URL

> ID：16075802
> 
> 赞同：1
> 
> 时间：2013-04-18T06:18:16.563
> 
> 标签：liferay-6

如何将 liferay url 更改 `/web/guest`为另一个。在我的 Liferay 控制面板社区（在门户中）该选项不存在（不可见）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T07:54:55.860

在您的 portal-ext.properties 中添加/更改以下属性

```
#
# This sets the default home URL of the portal.
#
company.default.home.url=/web/guest 
```

# c - ANDing with different bit lengths

> ID：16075804
> 
> 赞同：-1
> 
> 时间：2013-04-18T06:18:28.783
> 
> 标签：c, bitwise-operators

I have the following:

```
void calculate(unsigned long num1, unsigned long num2){
   int32_t invertednum2 = ~(num2);    // yields 4294967040
   printf("%d\n", invertednum2);      // yields 255

   // num1 is 3232236032
   int32_t combine = (int32_t) num1 & num2;
   printf("%d\n", combine);           // yields 0???
} 
```

I'm trying to AND num1 and num2 so that the result would be:

```
 000000000000000011111111 
```

I'm not sure if I'm ANDing correctly with two different bit lengths or if I should cast.

Any help would be appreciated!

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:48:37.503

您不能在 C 中使用不同的位长度，因为您不能对不同类型的操作数应用任何二元运算符（移位除外）。如果您编写操作数为不同类型的代码，C 编译器将在执行操作之前首先将它们转换为相同类型（因此大小相同）。C 规范中有 7 页（第 6.3 节）专门详细说明了这种情况是如何发生的。

结果，当您拥有：

```
int32_t combine = (int32_t) num1 & num2; 
```

and `num1`and `num2`are both `unsigned long`and that is 64 bits, 会发生什么：

1.  演员表将截断`num1`为 32 位
2.  AND 具有不同的操作数类型（int32_t 和 uint64_t），因此 int32_t 将符号扩展为 64 位。
3.  对这两个 64 位值执行 AND
4.  结果被截断回 32 位并存储在`combine`

现在因为`num1`是 3232236032 (0xc0a80200)，步骤 1 和 2 会将其转换为 0xffffffffc0a80200，这将与 num2 进行“与”运算，然后将丢弃前 32 位。

相反，如果您有：

```
int32_t combine = (int32_t)(num1 & num2); 
```

它将在 and 上执行 64 位与`num1`，`num2`然后截断为 32 位以存储在`combine`. 虽然这与第一种情况完全不同，但存储的结果值`combine`将完全相同——只有没有人看到的中间值（按位与的结果）会有所不同。结果，编译器可以自由地重新排列事物并为这两种情况生成完全相同的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:36:22.980

首先，你没有说是什么`num1`，所以我们不知道结果应该是什么。其次，4294967040 对于`int32_t`. 既然你的论点是`unsigned long`，你的其他变量也应该是......但然后使用`%lu`而不是`%d`。

# android - Make Coverflow appear like a Horizontal Gallery Android

> ID：16075805
> 
> 赞同：0
> 
> 时间：2013-04-18T06:18:31.620
> 
> 标签：android

I am trying to make the CoverFlow below appear like a Horizontal Gallery. The original file looks like this

![enter image description here](https://i.stack.imgur.com/iZpLe.png)

There are three classes

1.  the CoverFlow.class which extends a gallery

    ```
    public class CoverFlow extends Gallery {

    private Camera mCamera = new Camera();
    private int mMaxRotationAngle = 50;
    private int mMaxZoom = -380;
    private int mCoveflowCenter;
    private boolean mAlphaMode = true;
    private boolean mCircleMode = false;
    public CoverFlow(Context context) {
        super(context);
        this.setStaticTransformationsEnabled(true);
    }
    public CoverFlow(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.setStaticTransformationsEnabled(true);
    }
    public CoverFlow(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        this.setStaticTransformationsEnabled(true);
    }
    public int getMaxRotationAngle() {
        return mMaxRotationAngle;
    }
    public void setMaxRotationAngle(int maxRotationAngle) {
        mMaxRotationAngle = maxRotationAngle;
    }
    public boolean getCircleMode() {
        return mCircleMode;
    }
    public void setCircleMode(boolean isCircle) {
        mCircleMode = isCircle;
    }
    public boolean getAlphaMode() {
        return mAlphaMode;
    }
    public void setAlphaMode(boolean isAlpha) {
        mAlphaMode = isAlpha;
    }
    public int getMaxZoom() {
        return mMaxZoom;
    }
    public void setMaxZoom(int maxZoom) {
        mMaxZoom = maxZoom;
    }
    private int getCenterOfCoverflow() {
        return (getWidth() - getPaddingLeft() - getPaddingRight()) / 2
                + getPaddingLeft();
    }
    private static int getCenterOfView(View view) {
        return view.getLeft() + view.getWidth() / 2;
    }
    protected boolean getChildStaticTransformation(View child, Transformation t) {
        final int childCenter = getCenterOfView(child);
        final int childWidth = child.getWidth();
        int rotationAngle = 0;
        t.clear();
        t.setTransformationType(Transformation.TYPE_MATRIX);
        if (childCenter == mCoveflowCenter) {
            transformImageBitmap((ImageView) child, t, 0);
        } else {
            rotationAngle = (int) (((float) (mCoveflowCenter - childCenter) / childWidth) * mMaxRotationAngle);
            if (Math.abs(rotationAngle) > mMaxRotationAngle) {
                rotationAngle = (rotationAngle < 0) ? -mMaxRotationAngle
                        : mMaxRotationAngle;
            }
            transformImageBitmap((ImageView) child, t, rotationAngle);
        }
        return true;
    }
    /**
     * This is called during layout when the size of this view has changed. If
     * you were just added to the view hierarchy, you're called with the old
     * values of 0.
     * 
     * @param w
     *            Current width of this view.
     * @param h
     *            Current height of this view.
     * @param oldw
     *            Old width of this view.
     * @param oldh
     *            Old height of this view.
     */
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        mCoveflowCenter = getCenterOfCoverflow();
        super.onSizeChanged(w, h, oldw, oldh);
    }
    /**
     * Transform the Image Bitmap by the Angle passed
     * 
     * @param imageView
     *            ImageView the ImageView whose bitmap we want to rotate
     * @param t
     *            transformation
     * @param rotationAngle
     *            the Angle by which to rotate the Bitmap
     */
    private void transformImageBitmap(ImageView child, Transformation t,
            int rotationAngle) {
        mCamera.save();
        final Matrix imageMatrix = t.getMatrix();
        final int imageHeight = child.getLayoutParams().height;
        final int imageWidth = child.getLayoutParams().width;
        final int rotation = Math.abs(rotationAngle);
        mCamera.translate(0.0f, 0.0f, 100.0f);
        // As the angle of the view gets less, zoom in
        if (rotation <= mMaxRotationAngle) {
            float zoomAmount = (float) (mMaxZoom + (rotation * 1.5));
            mCamera.translate(0.0f, 0.0f, zoomAmount);
            if (mCircleMode) {
                if (rotation < 40)
                    mCamera.translate(0.0f, 155, 0.0f);
                else
                    mCamera.translate(0.0f, (255 - rotation * 2.5f), 0.0f);
            }
            if (mAlphaMode) {
                ((ImageView) (child)).setAlpha((int) (255 - rotation * 2.5));
            }
        }
        mCamera.rotateY(rotationAngle);
        mCamera.getMatrix(imageMatrix);

        imageMatrix.preTranslate(-(imageWidth ), -(imageHeight / 2));
        imageMatrix.postTranslate((imageWidth ), (imageHeight / 2));

        mCamera.restore();
    } 
    ```

    }

The second class is my coverFlowActivity which is my class class

```
public class CoverFlowActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
//        setContentView(R.layout.main);

        CoverFlow cf = new CoverFlow(this);
        ImageAdapter ia = new ImageAdapter(this);
        cf.setAdapter(ia);
        cf.setAnimationDuration(1000);
        setContentView(cf);

    }

    public class ImageAdapter extends BaseAdapter {

        private int[] mImgs = {
                R.drawable.img1,
                R.drawable.img2,
                R.drawable.img3,
                R.drawable.img4,
                R.drawable.img5,
                R.drawable.img6,
                R.drawable.img7,
                R.drawable.img8
        };
        Context mContext;

        public ImageAdapter(Context context) {
            this.mContext = context;
        }
        @Override
        public int getCount() {
            return mImgs.length;
        }

        @Override
        public Object getItem(int position) {
            return position;
        }

        @Override
        public long getItemId(int position) {
            return mImgs[position];

        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ReflectionImage i = new ReflectionImage(mContext);

            i.setImageResource(mImgs[position]);
            i.setLayoutParams(new CoverFlow.LayoutParams(100, 100));
            i.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
            BitmapDrawable drawable = (BitmapDrawable) i.getDrawable();
            drawable.setAntiAlias(true);

            return i;
        }

        public float getScale(boolean focused, int offset) {
            return Math.max(0, 1f/(float)Math.pow(2, Math.abs(offset)));
        }

    }
} 
```

and the third activity is the reflected image below each image.

```
public class ReflectionImage extends ImageView {
    //ÊòØÂê¶‰∏∫ReflectionÊ®°Âºè
    private boolean mReflectionMode = true;
    public ReflectionImage(Context context) {
        super(context);
    }
    public ReflectionImage(Context context, AttributeSet attrs) {
        super(context, attrs);
        //ÂèñÂæóÂéüÂßãÂõæÁâáÁöÑbitmapÂπ∂ÈáçÁîª
        Bitmap originalImage = ((BitmapDrawable)this.getDrawable()).getBitmap();
        DoReflection(originalImage);
    }
    public ReflectionImage(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
        Bitmap originalImage = ((BitmapDrawable)this.getDrawable()).getBitmap();
        DoReflection(originalImage);
    }
    public void setReflectionMode(boolean isRef) {
        mReflectionMode = isRef;
    }
    public boolean getReflectionMode() {
        return mReflectionMode;
    }
    //ÂÅ∑Êáí‰∫Ü,Âè™ÈáçÂÜô‰∫ÜsetImageResource,ÂíåÊûÑÈÄ†ÂáΩÊï∞ÈáåÈù¢Âπ≤‰∫ÜÂêåÊ†∑ÁöÑ‰∫ãÊÉÖ
    @Override
    public void setImageResource(int resId) {
        Bitmap originalImage = BitmapFactory.decodeResource(
                getResources(), resId);
        DoReflection(originalImage);
        //super.setImageResource(resId);
    }
    private void DoReflection(Bitmap originalImage) {
        final int reflectionGap = 4;                            //ÂéüÂßãÂõæÁâáÂíåÂèçÂ∞ÑÂõæÁâá‰∏≠Èó¥ÁöÑÈó¥Ë∑ù
        int width = originalImage.getWidth();
        int height = originalImage.getHeight();

        //ÂèçËΩ¨
        Matrix matrix = new Matrix();
        matrix.preScale(1, -1);
      //reflectionImageÂ∞±ÊòØ‰∏ãÈù¢ÈÄèÊòéÁöÑÈÇ£ÈÉ®ÂàÜ,ÂèØ‰ª•ËÆæÁΩÆÂÆÉÁöÑÈ´òÂ∫¶‰∏∫ÂéüÂßãÁöÑ3/4,ËøôÊ†∑ÊïàÊûú‰ºöÊõ¥Â•Ω‰∫õ
        Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0,
                0, width, height, matrix, false);
        //ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑbitmap,È´òÂ∫¶‰∏∫ÂéüÊù•ÁöÑ‰∏§ÂÄç
        Bitmap bitmapWithReflection = Bitmap.createBitmap(width, (height + height), Config.ARGB_8888);
        Canvas canvasRef = new Canvas(bitmapWithReflection);

        //ÂÖàÁîªÂéüÂßãÁöÑÂõæÁâá
        canvasRef.drawBitmap(originalImage, 0, 0, null);
        //ÁîªÈó¥Ë∑ù
        Paint deafaultPaint = new Paint();
        canvasRef.drawRect(0, height, width, height + reflectionGap, deafaultPaint);

        //ÁîªË¢´ÂèçËΩ¨‰ª•ÂêéÁöÑÂõæÁâá
        canvasRef.drawBitmap(reflectionImage, 0, height + reflectionGap, null);
        // ÂàõÂª∫‰∏Ä‰∏™Ê∏êÂèòÁöÑËíôÁâàÊîæÂú®‰∏ãÈù¢Ë¢´ÂèçËΩ¨ÁöÑÂõæÁâá‰∏äÈù¢
        Paint paint = new Paint();
        LinearGradient shader = new LinearGradient(0,
                originalImage.getHeight(), 0, bitmapWithReflection.getHeight()
                        + reflectionGap, 0x80ffffff, 0x00ffffff, TileMode.CLAMP);
        // Set the paint to use this shader (linear gradient)
        paint.setShader(shader);
        // Set the Transfer mode to be porter duff and destination in
        paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));
        // Draw a rectangle using the paint with our linear gradient
        canvasRef.drawRect(0, height, width, bitmapWithReflection.getHeight()
                + reflectionGap, paint);
      //Ë∞ÉÁî®ImageView‰∏≠ÁöÑsetImageBitmap
        this.setImageBitmap(bitmapWithReflection);
    }
} 
```

I want to make it appears like a gallery that is all images must have four dp margin and appear like the center image without any effects. Can someone please help me to achieve this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:48:36.220

请试试这个：

```
private int mMaxRotationAngle = 0; 
```

和

```
CoverFlow cf = new CoverFlow(this);
   cf.setSpacing(-30); 
```

在里面`CoverFlowActivity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:25:22.273

据我了解，您需要一个 ViewPager：

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

注意：添加支持库以支持 API 直到级别 4 ;-)

一些有用的代码：[http ://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html](http://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html)

```
 setContentView(R.layout.main);

    mContainer = (PagerContainer) findViewById(R.id.pager_container);

    ViewPager pager = mContainer.getViewPager();
    PagerAdapter adapter = new MyPagerAdapter();
    pager.setAdapter(adapter);
    //Necessary or the pager will only have one extra page to show
    // make this at least however many pages you can see
    pager.setOffscreenPageLimit(adapter.getCount());
    //A little space between pages
    pager.setPageMargin(15);

    //If hardware acceleration is enabled, you should also remove
    // clipping on the pager for its children.
    pager.setClipChildren(false); 
```

添加填充和边距应该是微不足道的;-)

![在此处输入图像描述](https://i.stack.imgur.com/ga9s4.png)

# php - How to create a tree of category subcatagory in php

> ID：16075810
> 
> 赞同：0
> 
> 时间：2013-04-18T06:18:55.450
> 
> 标签：php, tree

I am trying to create a tree ordered select box from an array of category, subcategory data. This is the array

```
Array
(
    [0] => Array
        (
            [id] => 6
            [cata_key] => 32e9c75e38d2a1d77b2b49b2
            [cata_name] => Road
            [app_key] => b80e0935b348da61b2a807ff
            [parentid] => 0
        )

[1] => Array
    (
        [id] => 7
        [cata_key] => 56bae4297efcbf796b230a99
        [cata_name] => River
        [app_key] => b80e0935b348da61b2a807ff
        [parentid] => 0
    )

[2] => Array
    (
        [id] => 8
        [cata_key] => 1c748603f36105b921b54165
        [cata_name] => Air
        [app_key] => b80e0935b348da61b2a807ff
        [parentid] => 0
    )

[3] => Array
    (
        [id] => 9
        [cata_key] => 780c3eb53264d5c33a26d49f
        [cata_name] => Cars
        [app_key] => b80e0935b348da61b2a807ff
        [parentid] => 6
    )

[4] => Array
    (
        [id] => 10
        [cata_key] => 111cd06b1575457f665d460e
        [cata_name] => Hyundai
        [app_key] => b80e0935b348da61b2a807ff
        [parentid] => 9
    )

[5] => Array
    (
        [id] => 11
        [cata_key] => 26ca0e1622c11ed2628eaadf
        [cata_name] => Maruthi
        [app_key] => b80e0935b348da61b2a807ff
        [parentid] => 9
    )

[6] => Array
    (
        [id] => 12
        [cata_key] => 7fc72e49fe67d0b777648f54
        [cata_name] => Boat
        [app_key] => b80e0935b348da61b2a807ff
        [parentid] => 7
    )

[7] => Array
    (
        [id] => 13
        [cata_key] => b6125c73f6d7c153f45e133e
        [cata_name] => Ship
        [app_key] => b80e0935b348da61b2a807ff
        [parentid] => 7
    )

[8] => Array
    (
        [id] => 14
        [cata_key] => 38c749056a9f583e284e509b
        [cata_name] => 2 Seater
        [app_key] => b80e0935b348da61b2a807ff
        [parentid] => 12
    )

[9] => Array
    (
        [id] => 15
        [cata_key] => 6ebfcad4d4e05e84d333b7e5
        [cata_name] => 10 Seater
        [app_key] => b80e0935b348da61b2a807ff
        [parentid] => 12
    )

[10] => Array
    (
        [id] => 16
        [cata_key] => 49973084640af71ad61e634b
        [cata_name] => Bikes
        [app_key] => b80e0935b348da61b2a807ff
        [parentid] => 6
    )
) 
```

in which the parentid points to the parent category. The resultant array should be in the order of

```
Road
->Cars
    -> Hyndai
    -> Maruthi
-> Bikes
River
-> Boats
    -> 2 seater
    -> 10 seater
-> Ship
Air 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:34:20.507

```
<?php
$categories = array(
    array('id' => 1,  'parent' => 0, 'cata_name' => 'Road'),
    array('id' => 2,  'parent' => 1, 'name' => 'Cars'),
    array('id' => 3,  'parent' =>2, 'name' => 'Maruthi'),
    array('id' => 4,  'parent' => 2, 'name' => 'Hyundai')
);

function categoriesToTree(&$categories) {

    $map = array(
        0 => array('subcategories' => array())
    );

    foreach ($categories as &$category) {
        $category['subcategories'] = array();
        $map[$category['id']] = &$category;
    }

    foreach ($categories as &$category) {
        $map[$category['parent']]['subcategories'][] = &$category;
    }

    return $map[0]['subcategories'];

}

$tree = categoriesToTree($categories);

echo "=== TREE ===\n";
echo "<pre>"; print_r ($tree);
?> 
```

# django - Django 将注销过程重定向到视图

> ID：16075812
> 
> 赞同：0
> 
> 时间：2013-04-18T06:19:05.550
> 
> 标签：django, django-login

我对 django 很陌生，我有一个以下模板：

```
{% if settings.LOGIN_SYSTEM %}
     <a href="{{ settings.LOGOUT_URL }}?target={{ settings.LOGOUT_REDIRECT_URL}}">{% trans %}sign out{% endtrans %}</a>
{% endif %} 
```

我也有一个清除所有会话的视图：

```
class LogoutView(TemplateView):

    redirect_field_name = "target"

    def get(self, *args, **kwargs): 
```

我想确保登录信号通过 LogoutView 获取方法。我可以从模板调用视图方法吗？

如果是这样，一个例子会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T00:23:38.277

要注销，请使用 POST 而不是 GET。这是一个[架构问题](https://stackoverflow.com/questions/3521290/logout-get-or-post)。因此，要注销，您应该像以下示例一样发出发布请求。

注销模板表单

```
<form action="{% url 'logout' %}" method="post" >
  {% csrf_token %}
  <input type="submit" value="Logout" />
</form> 
```

登出网址

```
urlpatterns = patterns('',
    url(r'^logout/$', LogoutView.as_view(), name='logout'),
    # other urls...
) 
```

注销视图

```
from django.contrib.auth import logout

class LogoutView(ProcessFormView):
    def post(self, request, *args, **kwargs):
        logout(request)
        return redirect('login-url-name') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:37:01.350

示例注销

```
@require_POST
def logout(request):
    auth.logout(request)
    return redirect('/') 
```

# php - PHP: Select part of string (from to) and apply changes on it

> ID：16075813
> 
> 赞同：1
> 
> 时间：2013-04-18T06:19:07.623
> 
> 标签：php

I want a way to change part of string according to simple marks. for example:

```
$string = "I'm student (at JIC college), and I'm GENIUS."; 
```

I want to select `at JIC college` or any words between brackets and change their color. (I know how to change their color). but how to select it change it then put it back. and how to do that even if I had more than 1 brackets.

```
$string = "I'm student (at JIC college), and I'm GENIUS (not really)."; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:27:41.967

您可以使用 a`preg_replace`来实现这一点。

```
$string = "I'm student (at JIC college), and I'm GENIUS (not really).";

$string = preg_replace('/\(([^\)]+)\)/', '<span style="color:#f00;">$1</span>', $string); 
```

不幸的是，这个例子有点不清楚，因为您选择的封装在正则表达式中丢失并且需要转义。如果你想让你的代码清晰，我会使用括号以外的东西！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:23:48.417

您可以使用[explode()](http://php.net/manual/en/function.explode.php)：

```
$string = "I'm student (at JIC college), and I'm GENIUS (not really).";

$pieces = explode("(", $string );

$result = explode(")", $pieces[1]);

echo $result[0]; // at JIC college 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:27:54.017

通过该函数获取()之间的字符串

```
function get_string_between($string, $start, $end){
    $string = " ".$string;
    $ini = strpos($string,$start);
    if ($ini == 0) return "";
    $ini += strlen($start);
    $len = strpos($string,$end,$ini) - $ini;
    return substr($string,$ini,$len);
}

$fullstring = "this is my [tag]dog[/tag]";
$parsed = get_string_between($fullstring, "[tag]", "[/tag]");

echo $parsed; // (result = dog) 
```

并改变颜色。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T06:25:46.453

您可以使用正则表达式来实现：

```
$colorized = preg_replace('/(\(.*?\))/m', '<span style="color:#f90;">($1)</span>', $string); 
```

# cocos2d-iphone - shooting intervals in cocos2d without CACurrentMediaTime()

> ID：16075815
> 
> 赞同：0
> 
> 时间：2013-04-18T06:19:10.390
> 
> 标签：cocos2d-iphone

I have a ship and I want to make it to shoot every 1 sec. So here's what I did,

```
@property (nonatomic, assign) float lastDamageTime; 
```

and in the update method,

```
if (CACurrentMediaTime - self.lastDamageTime > 1)
{
    self.lastDamageTime = CACurrentMediaTime;
    [self shoot];
} 
```

But the problem is, say I pause the game right after the ship shoot a bullet, and then 1 sec later, I resume the game, the if statement pass the check, and the ship will shoot another bullet immediately. And that's not what I want.

So, what can I do to make sure the ship fire bullets each sec weather I pause the game or not? Should I use CCTimer instead?

Thank you in advance for your answer.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:39:13.700

您可以尝试将拍摄安排为一个`CCRepeatForever`动作，以便 cocos2d 为您处理暂停。它看起来像这样（假设您在 custom 中`ShipSprite`）。-

```
CCDelayTime *delay = [CCDelayTime actionWithDuration:1.0];
CCCallFunc *funcShoot = [CCCallFunc actionWithTarget:self selector:@selector(shoot)];
CCRepeatForever *repeat = [CCRepeatForever actionWithAction:[CCSequence actionOne:delay two:funcShoot]];
[self runAction:repeat]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:22:27.350

而不是 CCRepeatForever 你可以尝试这样的事情

```
[self schedule:@selector(shoot) interval:1]; 
```

在您的暂停代码中取消安排拍摄

```
[self unschedule:@selector(shoot)]; 
```

在您的代码中检测到敌人的呼叫

```
[self unschedule:@selector(shoot)];
[self performSelector:@selector(shoot)];
[self schedule:@selector(shoot) interval:1]; 
```

它会立即拍摄，但是它只会拍摄一次，然后以 1 秒的间隔重新启动等等......所以如果你需要改变它，你可以调整时间

# ms-access - 使用连接将两个不同表中的值插入另一个不同的表

> ID：16075825
> 
> 赞同：1
> 
> 时间：2013-04-18T06:19:33.717
> 
> 标签：ms-access, vba, ms-access-2010

我有一个按钮，它使用两个单独的查询从两个表中提取数据并插入到另一个表中：

```
Dim lngID As Long
Dim lngIDCallout As Long
Dim strSQL1 As String

lngID = CalloutAttendance_MultiSelect.Value
lngIDCallout = Forms![Callouts].[CalloutID].Value

strSQL1 = "INSERT INTO Members_Callouts(MemberID) SELECT MemberID FROM Members WHERE MemberID=" & lngID    
strSQL2 = "INSERT INTO Members_Callouts(CalloutID) SELECT CalloutID FROM Callouts WHERE CalloutID=" & lngIDCallout

CurrentDb.Execute strSQL1
CurrentDb.Execute strSQL2
CalloutAttendance_MultiSelect.Requery 
```

虽然它几乎做了我想要它做的事情，但它将这两个值作为两个单独的新记录插入，而我希望它将它插入一个新记录。我已经尝试过了，但是我遇到了语法错误，或者在下面的情况下，我收到了 3067 运行时错误“查询输入必须包含至少一个表或查询”

```
strSQL1 = "INSERT INTO Members_Callouts(MemberID, CalloutID) SELECT
          (SELECT MemberID FROM Members WHERE MemberID=" & lngID & "),
          (SELECT CalloutID FROM Callouts WHERE CalloutID=" & lngIDCallout & ")" 
```

有人知道我可能会出错吗？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:31:06.060

在这种情况下，您只是插入键值，所以您需要做的就是

```
strSQL1 = _
        "INSERT INTO Members_Callouts (MemberID, CalloutID) " & _
            "VALUES (" & lngID & ", " & lngIDCallout & ")" 
```

换句话说，您无需为诸如...之类的事情烦恼

```
"(SELECT MemberID FROM Members WHERE MemberID=" & lngID & ")" 
```

...因为它返回的值只是`lngId`（假设该值存在于 [Members] 表中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:33:42.347

```
INSERT INTO
  MyTable (Col1,Col2,Col3,Col4,Col5,Col6,Col7)
SELECT
  f1.col1, f2.col2, f3.col3, f3.col4, f3.col5, f4.col6, f5.col7
FROM
  (SELECT Col1 FROM Func1())           AS f1
CROSS JOIN
  (SELECT Col2 FROM Func2())           AS f2
CROSS JOIN
  (SELECT Col3,Col4,Col5 FROM Func3()) AS f3
CROSS JOIN
  (SELECT Col6 FROM Func4())           AS f4
CROSS JOIN 
```

（从 Func5() 中选择 Col7）作为 f5

# ruby-on-rails-3 - Bootstrap (2.3.1) + SimpleForm (2.1) 单选按钮组的内联标签

> ID：16075830
> 
> 赞同：1
> 
> 时间：2013-04-18T06:19:55.810
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, radio-button, label, simple-form

我正在尝试创建内联单选按钮，该按钮也具有内联标签（在最左侧）。

正如我在标题中所说，使用 Bootstrap 和 SimpleForm。

我的代码如下所示：

```
<%= f.input :breakdown_or_size, 
            :collection => ["Breakdown", "Manual"],
            :as => :radio_buttons, 
            :item_wrapper_class => 'inline',
            :label => 'Select One: ' %> 
```

这就是我得到的：

[![标签下方的单选按钮](https://i.stack.imgur.com/WPVq8.jpg)](https://i.stack.imgur.com/WPVq8.jpg)
[（来源：[webpagescreenshot.info](http://www.webpagescreenshot.info/i3/516f8dbc4c7633-60839289)）]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:18:57.063

我为 simple_form_for 寻求帮助。最后我找不到任何东西，但至少使用 form_for 你可以这样做：

```
<%= form_for(@book) do |f| %>
  <% if @book.errors.any? %>
  <div id="error_explanation">
  <h2><%= pluralize(@book.errors.count, "error") %> prohibited this book from being saved:</h2>

    <ul>
    <% @book.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %>

<div class="actions", style='inline'>

  <%= f.label 'Select One: ' %>
  <br/>
  <%= f.radio_button :collection, "Breakdown" %> Breakdown
  <%= f.radio_button :collection, "Manual" %> Manual
  <br/>
  <%= f.submit %>
</div> 
```

这至少解决了内联渲染。

# python - 与在 python 中的先前值和当前值之间保存混淆

> ID：16075832
> 
> 赞同：0
> 
> 时间：2013-04-18T06:19:57.377
> 
> 标签：python, dictionary

我是 python 新手，我尝试制作一个简单的 python 脚本来保存先前值和当前值之间的波动值。但我对此感到困惑..

可以说，波动的价值是位置

previous_value = 位置

current_value = 位置

如何使上一个值在下一个位置值之前保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:22:13.417

```
previous_value,current_value = None,None  #initialize values outside the loop

for loop ... :
  previous_value = current_value   #storing last current value as previous value
  current_value = position         #storing current position as current value. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:27:05.473

```
previous_value, current_value = current_value, position 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:27:50.817

Python 赋值保证您可以在赋值的左侧和右侧使用相同的变量，并且还允许在单个语句中分配多个值：

```
previous, current = 0, 1
for i in range(10):
    previous, current = current, i 
```

# codeigniter - Codeigniter - cookie 在 Internet Explorer 8 中不起作用

> ID：16075833
> 
> 赞同：3
> 
> 时间：2013-04-18T06:19:59.050
> 
> 标签：codeigniter, cookies, internet-explorer-8

此代码适用于除 Internet Explorer 8 以外的所有浏览器

```
 $this->input->set_cookie(array(
                          'name'   => 'test_cookie',
                          'value'  => 'hello from cookie',
                          'expire' => 360000000,
                          'secure' => FALSE
                          ));

        echo get_cookie('test_cookie'); 
```

如何解决这个问题呢？为什么没有set_cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T05:48:18.767

我有一个类似的问题，只有 IE 会拒绝接受 cookie。结果发现计算机的时区设置不正确（提前 17 小时，服务器在澳大利亚时设置为美国太平洋标准时间），所以发生的事情是 cookie 立即过期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:23:56.983

尝试：

```
echo $this->input->cookie('test_cookie'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:30:17.140

我使用助手中的函数解决了我的问题

```
function setcookie_ex($name, $value, $expire)
{
    $cookie_path = '/'; $cookie_domain = ''; $cookie_secure = false;

    // Enable sending of a P3P header
    header('P3P: CP="CUR ADM"');

    if (version_compare(PHP_VERSION, '5.2.0', '>='))
       setcookie($name, $value, $expire, $cookie_path, $cookie_domain, $cookie_secure, true);
    else
    setcookie($name, $value, $expire, $cookie_path.'; HttpOnly', $cookie_domain, $cookie_secure);
} 
```

# iphone - Can I release an update to the app store with "Build Active Architecture Only" set to "Yes"?

> ID：16075836
> 
> 赞同：14
> 
> 时间：2013-04-18T06:20:12.453
> 
> 标签：iphone, ios, build

I accidentally submitted a build to the app store with "Build active architecture only" (ONLY_ACTIVE_ARCH) set to "Yes". The phone I was archiving it for was a 3GS. Does this mean that phones with other architectures, like the iPhone 5 with ARMv7S, won't be able to run the app?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-01-08T04:02:51.767

如果选择“仅构建活动架构”是，它将通过仅构建当前架构来加快您的构建时间。但是当您构建发布时，请将其设置为 NO

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T06:27:43.087

这个链接可以帮助你...

[http://useyourloaf.com/blog/2010/04/21/xcode-build-active-architecture-only.html](http://useyourloaf.com/blog/2010/04/21/xcode-build-active-architecture-only.html)

但是，我之前已经构建了一些应用程序并使用选项集将它们提交到 App Store。这是因为我有一个旧的 iPod 设备，用于“归档”应用程序和随后的提交，而构建目标包括 ARM7。如果没有该选项集，我无法为较旧的 iPod 构建它，因此无法存档和发布。

所以，我会说，你会没事的，不用经历重新提交和让自己重新启动柜台等待审查的痛苦。

标记

# java - 在 java 代码中显示异常（Selenium + Jsoup）

> ID：16075837
> 
> 赞同：0
> 
> 时间：2013-04-18T06:20:15.130
> 
> 标签：java, exception, selenium, jsoup

我正在做一个项目。在那，我必须获得 HTML 页面源代码。为此，我使用 调用 firefox 驱动程序`Selenium`，并将页面源代码存储在 String 中，然后使用解析`Jsoup`

我的代码适用于 single `url`。但是当我把我的代码放在测试中时，它必须一个一个地获取 URL 的数量，然后在最后它抛出一个异常，我的项目失败了。请查看异常并告诉我为什么会发生这种情况，并给我一些解决此异常的解决方案。

**我的硒代码如下，**

```
private static FirefoxProfile createFirefoxProfile() {
    File profileDir = new File("/tmp/firefox-profile-dir");
    if (profileDir.exists()) {
        return new FirefoxProfile(profileDir);
    }
    FirefoxProfile firefoxProfile = new FirefoxProfile();
    File dir = firefoxProfile.layoutOnDisk();
    try {
        profileDir.mkdirs();
        FileUtils.copyDirectory(dir, profileDir);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return firefoxProfile;
} 
```

**// 下面是 main 函数中的代码（url1 和 url2 是两个 url）**

```
WebDriver driver = new FirefoxDriver(createFirefoxProfile());
driver.get(url1);
String hml1 = driver.getPageSource();
driver.get(url2);
String hml2 = driver.getPageSource();
driver.close(); 
```

**例外**

```
[WARNING] 
    java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:297)
        at java.lang.Thread.run(Thread.java:662)
    Caused by: org.openqa.selenium.WebDriverException: Failed to connect to binary FirefoxBinary(C:\Program Files (x86)\Mozilla Firefox\firefox.exe) on port 7056; process output follows: 
    null
    Build info: version: '2.31.0', revision: '1bd294d185a80fa4206dfeab80ba773c04ac33c0', time: '2013-02-27 13:51:26'
    System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_43'
    Driver info: driver.version: FirefoxDriver
        at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:122)
        at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:244)
        at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:110)
        at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:188)
        at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:183)
        at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:179)
        at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:96)
        at XXX.YYY.ZZZ.Template_Matching.Scroll_down.processing(Scroll_down.java:334)
        at XXX.YYY.ZZZ.Template_Matching.Scroll_down.main(Scroll_down.java:472)
        ... 6 more
    Caused by: org.openqa.selenium.firefox.UnableToCreateProfileException: java.io.IOException: There is not enough space on the disk
    Build info: version: '2.31.0', revision: '1bd294d185a80fa4206dfeab80ba773c04ac33c0', time: '2013-02-27 13:51:26'
    System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_43'
    Driver info: driver.version: FirefoxDriver
        at org.openqa.selenium.firefox.FirefoxProfile.layoutOnDisk(FirefoxProfile.java:453)
        at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:77)
        ... 14 more
    Caused by: java.io.IOException: There is not enough space on the disk
        at java.io.FileOutputStream.writeBytes(Native Method)
        at java.io.FileOutputStream.write(FileOutputStream.java:282)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
        at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
        at org.openqa.selenium.io.Zip.unzipFile(Zip.java:171)
        at org.openqa.selenium.io.Zip.unzip(Zip.java:152)
        at org.openqa.selenium.io.FileHandler.unzip(FileHandler.java:54)
        at org.openqa.selenium.firefox.internal.FileExtension.obtainRootDirectory(FileExtension.java:81)
        at org.openqa.selenium.firefox.internal.FileExtension.writeTo(FileExtension.java:58)
        at org.openqa.selenium.firefox.internal.ClasspathExtension.writeTo(ClasspathExtension.java:63)
        at org.openqa.selenium.firefox.FirefoxProfile.installExtensions(FirefoxProfile.java:469)
        at org.openqa.selenium.firefox.FirefoxProfile.layoutOnDisk(FirefoxProfile.java:447)
        ... 15 more
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 20:49:03.625s
    [INFO] Finished at: Thu Apr 18 10:47:12 IST 2013
    [INFO] Final Memory: 12M/163M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:java (default-cli) on project Template_Matching: An exception occured while executing the Java class. null: InvocationTargetException: Failed to connect to binary FirefoxBinary(C:\Program Files (x86)\Mozilla Firefox\firefox.exe) on port 7056; process output follows:
    [ERROR] null
    [ERROR] Build info: version: '2.31.0', revision: '1bd294d185a80fa4206dfeab80ba773c04ac33c0', time: '2013-02-27 13:51:26'
    [ERROR] System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_43'
    [ERROR] Driver info: driver.version: FirefoxDriver: java.io.IOException: There is not enough space on the disk
    [ERROR] Build info: version: '2.31.0', revision: '1bd294d185a80fa4206dfeab80ba773c04ac33c0', time: '2013-02-27 13:51:26'
    [ERROR] System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_43'
    [ERROR] Driver info: driver.version: FirefoxDriver
    [ERROR] -> [Help 1]
    [ERROR] 
    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
    [ERROR] Re-run Maven using the -X switch to enable full debug logging.
    [ERROR] 
    [ERROR] For more information about the errors and possible solutions, please read the following articles:
    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:32:19.567

您可能使用 USB 闪存驱动器或 SD 卡。检查您的硬盘可用空间以及您是否正在使用外围设备。

# php - 使用 AJAX 将 PHP 表单提交到 MYSQL 数据库

> ID：16075838
> 
> 赞同：0
> 
> 时间：2013-04-18T06:20:24.170
> 
> 标签：php, mysql, ajax

我有一个`PHP`页面在表中显示来自`MYSQL`数据库的记录。我希望能够通过单击单元格来编辑表格单元格中的记录。我描绘的过程是这样的：

1)`onclick()`表单元格触发器上的事件`ajaxfunction()`
2)`ajaxfunction()`将单元格数据发送到查询数据库并显示选项下拉列表的 php 页面。
3) 用户从下拉列表中选择选项
4)`onchange()`事件将表单提交到数据库
5) 刷新表格单元格或页面以显示当前表格单元格数据。（目前不在我现有的代码中）

现在我有两`PHP`页`ac_sched.php`和`ModSched.php`。

下面是每个页面的结构：

`ac_sched.php`：

*   `PHP`创建的表显示`MYSQL`记录
*   `ajaxfunction`查询数据库以获取可用的单元格选项

`ModSched.php`：

*   `PHP`代码从数据库中选择可用的单元格选项并创建下拉菜单。
*   `PHP`使用下拉列表中的选定选项更新数据库的代码。

以下是每个页面的相关代码部分：

```
ac_sched.php:

<script>
function ACSchedQuery(reg)
    {
    if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
        }
    xmlhttp.onreadystatechange=function()
        {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            document.getElementById(reg).innerHTML=xmlhttp.responseText;
            }
        }
    xmlhttp.open("GET","../process/ModSched.php?ModSched_Reg="+reg,true);
    xmlhttp.send();
    }
</script>

<table>

<tr>
<td id="ABC-Day-3" onclick="ACSchedQuery(this.id)"></td>
</tr>

......rest of table here......
</table>

ModSched.php:

// This is to request the options from the database  
if(isset($_GET['ModSched_Reg']))
    {
    $ModSched_Array = explode("-",$_GET["ModSched_Reg"]);
    $ModSched_Reg = $ModSched_Array[0];
    $ModSched_Day = $ModSched_Array[1];
    $ModSched_ID = $ModSched_Array[2];

    $sql4 = ("SELECT * FROM aircraft_sched_options WHERE SchedOpt_ID != 0");

    if(!$result_sql4 = $mysqli->query($sql4))
        {
        echo QueryCheck("getting the schedule options ","from the aircraft sched options",$mysqli);
        }
    ?>
    <form action="../process/ModSched.php" method="post">// I did try: action=""
        <table cellpadding="0" cellspacing="0" border="0">

        <tr>
        <td>
    <?php
    echo "<select name=\"ModSched_ID\">";

    while($SchedOpt = $result_sql4->fetch_assoc())
        {
        echo "<option value=\"" . $ModSched_Reg . "-" . $ModSched_Day .  "-" . $SchedOpt['SchedOpt_ID'] . "\" onchange=\"formSubmit(this.form)\"";
        if($SchedOpt['SchedOpt_ID'] == $ModSched_ID)
            {
            echo " selected=\"selected\"";
            }
        echo ">" . $SchedOpt['SchedOpt_Name'] . "</option>";
        }

    echo "</select>";
    ?>
        </td>
        </tr>

        </table>
    </form>
    <?php
    }  

// This is to submit the selected option to the database
if(isset($_POST['ModSched_ID']))
    {
    $ModSched_Array = explode("-",$_POST["ModSched_ID"]);
    $ModSched_Reg = $ModSched_Array[0];
    $ModSched_Day = $ModSched_Array[1];
    $ModSched_ID = $ModSched_Array[1];

    $sql4 = ("UPDATE aircraft_status SET $ModSched_Day = $ModSched_ID WHERE AC_Reg = $ModSched_Reg");

    if(!$result_sql4 = $mysqli->query($sql4))
        {
        echo QueryCheck("updating the aircraft schedule ","into the aircraft sched",$mysqli);
        }

    } 
```

我知道这是很多代码，但我认为为了展示整个故事，这一切都是必要的。
我认为，如果有人只看一下我拥有的代码结构，那将告诉我我是否走在正确的轨道上，那将是一个很大的帮助。以下是我对代码的疑问：

1) 提交更改的表格是否在正确的位置？- 我之前有一秒钟`ajaxfunction()`将所选选项提交到表单提交页面。这不起作用，但它可能是我的代码而不是结构本身。

2）我应该在自己的页面上有表单提交代码吗？

我这周才开始使用`AJAX`，所以在这里我可能会偏离目标。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:26:59.033

你可以实现一些框架，比如[cakephp](http://cakephp.org/)或[symphony](http://symfony.com/legacy)，这个框架可以帮助你在学习这门语言和良好实践的过程中。

# php - 如何解码图像数据（sqlite）以在 HTML 中显示

> ID：16075841
> 
> 赞同：-1
> 
> 时间：2013-04-18T06:20:38.077
> 
> 标签：php, sqlite, blob

我有一个存储在 sqlite 数据库中的图像数据。数据是这样的：

> €TâM89504e470d0a1a0a0000000d494844520000012

如何使用 php 在 html 中显示数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:23:10.270

看起来像base64编码。

如果您有可以访问数据库的 PHP 脚本，请使用以下 PHP 片段：

`echo "<img src='data:image/png;base64,".$base64_data."' />`

# ssl - 如何将 .p12 文件更改为 .key 文件

> ID：16075846
> 
> 赞同：22
> 
> 时间：2013-04-18T06:20:54.673
> 
> 标签：ssl, private-key

我有一个`.p12`文件，我也可以转成`.pem`文件，但是怎么转成`.key`文件呢？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-18T06:29:47.267

`openssl pkcs12 -in out.p12 -nodes -out private.key -nocerts`

openssl 会要求你输入密码，然后将未加密的私钥存储到文件中`private.key`

文档：[https ://www.openssl.org/docs/man1.1.0/apps/pkcs12.html](https://www.openssl.org/docs/man1.1.0/apps/pkcs12.html)

# javascript - Form submission checkscript() javascript

> ID：16075847
> 
> 赞同：0
> 
> 时间：2013-04-18T06:20:58.620
> 
> 标签：javascript, form-submit

I want to be able to submit the form only if the 'my val 2' option is selected. If another option is selected and the submit button is pressed, I want it to just say they cannot submit it. Also, if they submit it, I want it to go to a submission page that says what they submitted. Here is my form:

```
<form action="formSub.php" method="POST" name="myform" onsubmit="return checkscript()">
            <select name="test_select">
                <option value="1">my val 1</option>
                <option value="2">my val 2</option>
                <option value="3">my val 3</option>
                <option value="4">my val 4</option>
            </select>
            <input type="submit" value="Submit" name="test_button" onClick="submitform(test_select.value)">
        </form> 
```

Here are my javascript functions

```
function submitform(val) {
    var obj = val;;
    alert("Value =  " + obj);
}

function checkscript() {
    if (obj !== "2") {
        alert('This is not \'my val 2\' so you cannot submit');
        return false;
    }
    return true;
} 
```

Also, my checkscript function doesn't work correctly. The f statement is always false.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:40:15.247

你的脚本有错误。JavaScript 在函数 checkscript() 的范围内看不到变量 obj。您宁愿尝试将该变量声明为全局变量。您有如何在此处验证表单的示例：http: [//www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp) 以及：[Javascript 表单验证 onsubmit](https://stackoverflow.com/questions/5711175/javascript-form-validation-onsubmit) as @Noob UnChained 写入您必须通过脚本从字段中获取值。你也有功能`submitform(val)`

正如我所见，该函数从选择面板中获取值。因此，您可以尝试使用该函数从列表中返回选定的值。

```
var obj;
function submitform(val) {
    obj = val;
    alert("Value =  " + obj);
}

function checkscript() {
    if (obj !== "2") {
        alert('This is not \'my val 2\' so you cannot submit');
        return false;
    }
    return true;
} 
```

对于第一个函数`submitform()`集变量 obj 和第二个函数使用 set obj 来检查值。

但如果我是你，我会使用 @Noob UnChained 方法，因为它更简单，而且你可以在一个函数中验证多种形式。也尝试阅读 JavaScripts 教程以编写好的 scipts。

我希望对你有所帮助。

# pytest - inspect.getsource() 和 __file__ 都不适用于 pytest？

> ID：16075850
> 
> 赞同：1
> 
> 时间：2013-04-18T06:21:18.563
> 
> 标签：pytest

当我使用其中任何一个时：

```
inspect.getsource(someObj) 
```

或者

```
__file__ 
```

这两个在没有 pytest 的情况下可以正常工作，但是当使用 pytest 运行相同的代码时会失败。有任何想法吗？

谢谢！

# c# - 将xml文件中的数据检索到c#.net中的datagridview中

> ID：16075856
> 
> 赞同：1
> 
> 时间：2013-04-18T06:21:35.403
> 
> 标签：c#, xml

我正在将数据从 xml 文件导入 c# 中的 datagridview 问题是数据网格视图中只显示一行，即它被覆盖。我的代码如下

```
DataSet ds = new DataSet();
DataTable dt = new DataTable();

for (int i = 0; i <= 3; i++)
{
    ds.ReadXml(@"C:\Users\dell\Downloads\ChillerReport.xml");
    dataGridView1.DataSource= ds.Tables[i].DefaultView;
} 
```

我的xml代码如下

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="file:///C:\TechView\XSL\Techview AshraeReport.xsl"?>
 <TraneChillerServiceReport label="ASHRAE Chiller Report">
 <date label="Date">Wednesday, April 17, 2013 4:15:48 PM IST</date>
  <technician label="Technician">sss</technician>
  <job_name label="Job Name">01 17 04 13</job_name>
 <chiller_name label="Chiller Name">trane</chiller_name>
 <reference_number label="Ref Number">01</reference_number>
<location label="Location">ppmf</location>
</chiller_setpoints>
</TraneChillerServiceReport> 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:00:31.007

![在此处输入图像描述](https://i.stack.imgur.com/hU512.png)**在后面的代码中**试试这个

 **```
 XmlReader xmlFile = XmlReader.Create("YourFullXmlFilePath",new XmlReaderSettings());
            DataSet dataSet = new DataSet();

            dataSet.ReadXml(xmlFile);

            dataGridView1.DataSource = dataSet.Tables["empdetails"];
            dataGridView1.DataBind(); 
```

这是 Demo 的 Xml 文件

```
<?xml version="1.0" encoding="utf-8" ?>
<employee>
  <empdetails id="1" name="sam"/>
  <empdetails id="2" name="robin"/>
  <empdetails id="3" name="victor"/>
</employee> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:26:22.213

我找到了解决方案。

我以以下方式包含了一个 for 循环，我可以获取所有数据。

```
for (int i = 0; i <= 11; i++)
{
    ds.ReadXml(@"C:\Users\dell\Downloads\ChillerReport.xml");
    dataGridView1.DataSource= ds.Tables[i].DefaultView;
} 
```

这创建了获取所有必需的值。**

# cocos2d-iphone - 如何使用 CCPhysicsSprite 摧毁身体

> ID：16075858
> 
> 赞同：0
> 
> 时间：2013-04-18T06:21:42.323
> 
> 标签：cocos2d-iphone, box2d, physics, box2d-iphone

我已经意识到 CCPhysicsSprite 在某些方面与 CCSprite 不同。例如，您必须在设置精灵的位置之前设置身体。我相信当我尝试破坏身体时，这些差异之一会导致 EXC_BAD_ACCESS 错误。我在 update 方法中调用 scheduleSprite 方法。

```
-(void)scheduleSprite {

if ([testSprite physicsSprite].b2Body != NULL) {
b2Vec2 force = b2Vec2(-5, 10.0 * [testSprite physicsSprite].b2Body->GetMass());
[testSprite physicsSprite].b2Body->ApplyForce(force, [testSprite physicsSprite].b2Body->GetWorldCenter() );

if ([testSprite physicsSprite].position.x < 0) {
world->DestroyBody([testSprite physicsSprite].b2Body);
[testSprite physicsSprite].b2Body = NULL;
    }
}
} 
```

我得到一个指向行的 EXC_BAD_ACCESS

```
b2Vec2 pos  = _b2Body->GetPosition(); 
```

在里面

```
-(CGAffineTransform) nodeToParentTransform 
```

方法，在类中

```
CCPhysicsSprite.mm 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:52:32.780

尽管你破坏了`body`，但`sprite`它会继续做它的事情，所以你也可以从它的父级中删除精灵，比如.-

```
if ([testSprite physicsSprite].position.x < 0) {
    world->DestroyBody([testSprite physicsSprite].b2Body);
    [[testSprite physicsSprite] removeFromParentAndCleanup:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T05:15:51.773

```
- (void) killBody:(cpBody*)body
{
    cpBodyEachShape_b(body, ^(cpShape *shape) {
        cpSpaceRemoveShape( _space, shape );
        cpShapeFree(shape);
    });
    cpSpaceRemoveBody( _space, body );
    cpBodyFree(body);//edited to include this line

    CCPhysicsSprite*    sprite = (__bridge CCPhysicsSprite*) body->data;
    [sprite removeFromParentAndCleanup:true];
} 
```

我得到了同样的东西，上面的方法似乎可以解决它。首先，从空间中删除连接到身体的形状。我使用 _space 作为指向 cpSpace 对象的实例变量。接下来，从空间中移除身体。最后，从父级移除精灵。

当我制作一个 CCPhysicsSprite 对象时，我使用 body->data 将它的主体连接到精灵。您可以在上面的方法中看到这一点。

如果您从 CCPhysicsSprite 对象开始，您将首先从 sprite 中获取 cpBody 对象，然后如上所示移除身体和形状。

# mysql - 2 rows having unique field and recent date

> ID：16075859
> 
> 赞同：0
> 
> 时间：2013-04-18T06:21:57.557
> 
> 标签：mysql

**Table :**

![enter image description here](https://i.stack.imgur.com/oRWVf.jpg)

I am new to query writing. Now I am stuck on retrieving 2 rows from above table. Data will be date sorted in descending order for only 2 different topic_id. There won't be a third different topic_id.

So I want to retrieve two rows only that will have different topic_id, one data for each topic_id having most recent date.

**The result would be**

![enter image description here](https://i.stack.imgur.com/qUWd7.jpg)

try [sql fiddle](http://sqlfiddle.com/#!2/f37963)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:42:00.307

[http://sqlfiddle.com/#!2/f37963/9](http://sqlfiddle.com/#!2/f37963/9)

```
SELECT t1.* FROM temp t1
      JOIN (SELECT question_id, MAX(`date`) as `date` FROM temp GROUP BY topic_id) t2
        ON t1.question_id= t2.question_id AND t1.`date`= t2.`date`; 
```

逻辑是在每个组（子查询）中查找最新日期，然后再次将其与表连接以检索其他详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:33:13.173

用这个

```
 $qry="SELECT * FROM table_name GROUP BY TOPIC_ID ORDER BY DATE desc"; 
```

# python - Implementing Google's DiffMatchPatch API for Python 2/3

> ID：16075864
> 
> 赞同：9
> 
> 时间：2013-04-18T06:22:19.233
> 
> 标签：python, diff

I want to write a simple diff application in Python using [Google's Diff Match Patch APIs](http://code.google.com/p/google-diff-match-patch/). I'm quite new to Python, so I want an example of how to use the Diff Match Patch API for semantically comparing two paragraphs of text. I'm not too sure of how to go about using the `diff_match_patch.py` file and what to import to from it. Help will be much appreciated!

Additionally, I've tried using [difflib](http://docs.python.org/library/difflib.html), but I found it ineffective for comparing largely varied sentences. I'm using ubuntu 12.04 x64.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-18T15:09:12.537

Google 的[**diff-match-patch API**](https://code.google.com/p/google-diff-match-patch/wiki/API)对于所有实现它的语言（Java、JavaScript、Dart、C++、C#、Objective C、Lua 和 Python 2.x 或 python 3.x）都是相同的。因此，通常可以使用目标语言以外的语言的示例片段来确定各种差异/匹配/补丁任务需要哪些特定的 API 调用。

在简单的“语义”比较的情况下，这就是您所需要的

```
import diff_match_patch

textA = "the cat in the red hat"
textB = "the feline in the blue hat"

#create a diff_match_patch object
dmp = diff_match_patch.diff_match_patch()

# Depending on the kind of text you work with, in term of overall length
# and complexity, you may want to extend (or here suppress) the
# time_out feature
dmp.Diff_Timeout = 0   # or some other value, default is 1.0 seconds

# All 'diff' jobs start with invoking diff_main()
diffs = dmp.diff_main(textA, textB)

# diff_cleanupSemantic() is used to make the diffs array more "human" readable
dmp.diff_cleanupSemantic(diffs)

# and if you want the results as some ready to display HMTL snippet
htmlSnippet = dmp.diff_prettyHtml(diffs) 
```

**关于diff-match-patch进行“*语义*”处理的一个词**
请注意，这种处理对于向人类观众呈现差异很有用，因为它倾向于通过避免文本的非相关重新同步来产生较短的差异列表（例如，当两个不同的单词恰好在它们的中间有共同的字母）。然而，产生的结果远非完美，因为这种处理只是基于差异长度和表面模式等的简单启发式算法，而不是基于词典和其他语义级设备的实际 NLP 处理。
例如，上面使用的`textA`and`textB`值为`diffs`数组生成以下“before-and-after-diff_cleanupSemantic”值

```
[(0, 'the '), (-1, 'cat'), (1, 'feline'), (0, ' in the '), (-1, 'r'), (1, 'blu'), (0, 'e'), (-1, 'd'), (0, ' hat')]
[(0, 'the '), (-1, 'cat'), (1, 'feline'), (0, ' in the '), (-1, 'red'), (1, 'blue'), (0, ' hat')] 
```

好的！红色和蓝色共有的字母“e”导致 diff_main() 将此文本区域视为四个编辑，但 cleanupSemantic() 仅修复两个编辑，很好地挑选出不同的语义 'blue' 和 '红色的'。

但是，如果我们有，例如

```
textA = "stackoverflow is cool"
textb = "so is very cool" 
```

产生的前/后数组是：

```
[(0, 's'), (-1, 'tack'), (0, 'o'), (-1, 'verflow'), (0, ' is'), (1, ' very'), (0, ' cool')]
[(0, 's'), (-1, 'tackoverflow is'), (1, 'o is very'), (0, ' cool')] 
```

这表明，与*before相比，据称在语义上有所改进的**after*可能会被过度“折磨” 。请注意，例如，如何将前导的“s”保留为匹配项，以及添加的“very”单词如何与“is cool”表达式的部分混合。理想情况下，我们可能会期望像

 *```
[(-1, 'stackoverflow'), (1, 'so'), (0, ' is '), (-1, 'very'), (0, ' cool')] 
```*

# asp.net - 数据表存档 SQL Server 2008

> ID：16075867
> 
> 赞同：3
> 
> 时间：2013-04-18T06:22:28.690
> 
> 标签：asp.net, performance, sql-server-2008

我有一个大小为 54 GB 的数据库，其中一些表中有很多行。

现在查询这些表会消耗性能并且执行查询需要很长时间。

已经创建了索引和东西，但现在我计划在某些表中存档记录，并且只在用户想要时查询它们。

例如，假设我有一个名为的表`Transaction`，并且我通常不需要超过 3 个月的行。

现在我想要做的是将`Transaction`表中超过 3 个月的所有行存储到其他表中，并且仅当 UI 中的用户说查看存档事务时才查询该表。

我能想到的选项：

1.  在同一个数据库中创建`ArchivedTransaction`，但问题是数据库的大小会不断增长，在某些时候我将不得不开始删除行。

2.  将行完全移动到不同的数据库，但在这种情况下，我如何管理数据库请求，需要进行大量更改，当有人说查看存档行时也不确定性能

3.  将列存档添加到表中，然后在需要时检查标志，但大小问题仍然相同，性能并没有提高到那个程度。

我不确定该走哪条路，我确信有更好的方法来处理我不知道的这个问题。

有什么想法可以走吗？有什么方法可以建议。

# java - 请解释一下为什么 24,16,8 用于将 int 转换为字节？

> ID：16075876
> 
> 赞同：2
> 
> 时间：2013-04-18T06:22:58.997
> 
> 标签：java, integer, byte

以下代码是将 int 转换为 Bytes 数组。我知道 int`i`右移了 24、16、8 次，并与 0xFF 进行了与运算，但我不明白为什么要使用这些数字？

```
private static byte[] intToBytes(int i)
  // split integer i into 4 byte array
  {
    // map the parts of the integer to a byte array
    byte[] integerBs = new byte[4];
    integerBs[0] = (byte) ((i >>> 24) & 0xFF);
    integerBs[1] = (byte) ((i >>> 16) & 0xFF);
    integerBs[2] = (byte) ((i >>> 8) & 0xFF);
    integerBs[3] = (byte) (i & 0xFF);

    // for (int j=0; j < integerBs.length; j++)
    //  System.out.println(" integerBs[ " + j + "]: " + integerBs[j]);

    return integerBs;
  }  // end of intToBytes() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T06:35:48.807

好的，假设您有一个 32 位二进制数：

```
00001111 00000111 00000011 00000001 
```

一个字节相当于 8 位，因此上面的数字由 4 个字节组成。

为了将这些字节分开，我们需要执行一系列移位和屏蔽操作。

例如，为了获取第一个字节`(00001111)`，我们执行以下操作：

```
00001111 00000111 00000011 00000001 (original)
00000000 00000000 00000000 00001111 (shifted 24 spaces to the right) 
```

现在我们不希望前面有 3 个字节的零，所以我们使用 8 位掩码并在结果数字和掩码之间`(0xFF)`执行`AND`操作。`32 bit`

例如：

```
00000000 00000000 00000000 00001111
&&                         11111111
-----------------------------------
                           00001111 (the first byte) 
```

现在您可以想象如何获得第二个字节（仅右移 16 位）。整个目的是在前 8 个位置获得你想要的 8 位，并使用掩码去除前面的垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:31:50.403

一个 32 位整数由四个字节组成：

*   字节 0 从位 0 开始；
*   字节 1 从第 8 位开始；
*   字节 2 从第 16 位开始；
*   字节 3 从位 24 开始。

我希望这能解释 8、16 和 24 的来源（它们是 8 的倍数，这是一个字节的宽度（以位为单位））。

最后，值得注意的是

```
integerBs[3] = (byte) (i & 0xFF); 
```

是相同的

```
integerBs[2] = (byte) ((i >>> 0) & 0xFF); 
```

这是缺失的零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:31:55.980

由于 an`int`由四个字节组成，您可以`int`通过移动 8 位的倍数 = 1 个字节来“到达” 中的每个字节。

为了获得第一个字节，您将其移动`int`24 位 = 3 个字节，将第二个字节移动 16 位 = 2 个字节，依此类推......

屏蔽`& 0xFF`的目的是防止溢出，所以你只需要你想要的字节。

将其可视化

```
31                              0  
 |                              |
 11111111111111111111111111111111 
```

右移 24 等于

```
 31                             0
 |                              |
 00000000000000000000000011111111 
```

使用掩蔽它`& 0xFF`会为您提供从 0 到 7 的 8 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:41:01.087

一些整数：

1111 1001 1010 1001 1010 1001 1010 1001 1010

右移 24 位：

1111 1001 1010

与 0xFF 相加：

1111 1001 1010

0000 1111 1111

* * *

0000 1001 1010

...这只是第 4 个字节。

整数：

1111 1001 1010 1001 1010 1001 1010 1001 1010

右移 16 位：

1111 1001 1010 1001 1010

与 0xFF 相加：

1111 1001 1010 1001 1010

0000 0000 0000 1111 1111

* * *

0000 0000 0000 1001 1010

...这只是第三个字节。

ETC...

# php - MySQL：比较两个表并列出新的行？

> ID：16075880
> 
> 赞同：0
> 
> 时间：2013-04-18T06:23:14.780
> 
> 标签：php, mysql

我们有每日数据馈送。我需要确定哪些行是新的。（说来话长，但行没有记录号，也不会有。）我们需要能够识别自上次数据馈送以来哪些行是新的。该文件以 JSON 形式出现，我已将其放入 MySQL TABLE 以用于其他目的。

如何获取昨天的 TABLE 并将其与今天的 TABLE 进行比较，并显示自昨天以来添加的那些行？这一切都可以在 MySQL 中完成，还是我需要在 PHP 的帮助下完成？

如果我在 PHP 中执行此操作，我想我会用昨天的 TABLE 搜索今天的 TABLE，并在今天的 TABLE 中标记（添加的列），在找到时用“N”标记为“N”。“Y”将是默认值，这意味着该行是新的。然后使用 MySQL 执行 select where new="Y" ，这将显示新字段。这是怎么做的？我是否忽略了更好的方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:30:36.790

如果您实际上有两个单独的表（从您的描述中听起来是这样，但很奇怪）并且没有在字面上比较同一个表，您可以

```
 SELECT partnumber FROm Today_table where partnumber not in (select partnumber from Yesterday_table) 
```

# android - Android :: Servlets，我正在尝试将流刷新到 servlet

> ID：16075881
> 
> 赞同：0
> 
> 时间：2013-04-18T06:23:18.583
> 
> 标签：android, servlets

我想将输入流从 android 发送到 servlet，但我认为我看不到与 android 中的流和 servlet 中的流进行通信的正确方法，这是两者的示例：android 方法：

```
 private InputStream getHttpConnection(String urlString) throws IOException {
    InputStream stream = null;
    URL url = new URL(urlString);
    URLConnection connection = url.openConnection();

    try {
        HttpURLConnection httpConnection = (HttpURLConnection) connection;
        httpConnection.setRequestMethod("GET");
        httpConnection.setRequestProperty("name", "TheKeyword");
        httpConnection.connect();

        if (httpConnection.getResponseCode() == HttpURLConnection.HTTP_OK) {
            stream = httpConnection.getInputStream();

        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return stream;
} 
```

这是servlet代码：

```
inputStream = new DataInputStream(request.getInputStream());
        content = request.getParameter("name");

        if (content.equals("TheKeyword")) {
            ServerResponse = "32.024851:35.877249;31.9565783:35.945695;32.0833:36.1000;31.56:35.56;";
        } else {
            ServerResponse = "32.024851:35.877249;31.56:35.56;";
        }

    } catch (Exception e) {
        // // TODO: handle exception
        System.out.println(ServerResponse);
    }

    response.getOutputStream().print(ServerResponse); 
```

请我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:12:16.453

如果您想发送输入流，您可以使用多部分/请求，例如在您上传文件的 Web 表单中。

# c# - 从 mac 连接到 Unity 3d tcp 服务器

> ID：16075882
> 
> 赞同：1
> 
> 时间：2013-04-18T06:23:28.443
> 
> 标签：c#, iphone, ios, unity3d

我在 Unity 3D 应用程序中有一个 TCP 服务器。我想从 macbook 连接到它。这是 C# 中的 Unity 代码。

```
listener = new TcpListener(port);   

// start listening
listener.Start();

// wait for our first client
listener.BeginAcceptTcpClient(OnAcceptTcpClientComplete, this); 
```

现在，我想通过 WiFi 从 mac 终端连接。我将该应用程序编译为 Android 和 iOS 应用程序。对于 Android，我已在清单文件中授予权限 - .

但是，对于 iOS，我无法连接或远程登录到 iPhone 或 iPad。是否需要任何许可？我错过了iOS的东西吗？

***注意：**我的 iOS 应用程序编译良好，也可以在设备上正确安装。xCode 控制台中没有错误。我也可以从设备本身远程登录，但无法从外部远程登录。*

# c++ - C++ 中的 set 和 unordered_set 有什么区别？

> ID：16075890
> 
> 赞同：62
> 
> 时间：2013-04-18T06:24:11.200
> 
> 标签：c++, algorithm, data-structures, c++11

我遇到了一个很好的问题，它是相似的，但完全不一样，因为它谈到了 Java，它具有不同的哈希表实现，凭借同步的访问器 /mutators： [HashMap 和 Hashtable 之间有什么区别爪哇？](https://stackoverflow.com/questions/40471/differences-between-hashmap-and-hashtable)

`set`那么和的 C++ 实现有什么区别`unordered_set`呢？这个问题当然可以扩展到其他 C++ 容器的`map`vs`unordered_map`等等。

这是我的初步评估：

`set`：虽然标准没有明确要求将其实现为树，但时间复杂性约束要求其查找/插入操作，这意味着它将始终以树的形式实现。通常作为 RB 树（如 GCC 4.8 中所见），它是高度平衡的。由于它们是高度平衡的，因此它们具有可预测的时间复杂度`find()`

优点：紧凑（与其他 DS 相比）

缺点：访问时间复杂度为 O(lg n)

`unordered_set`：虽然标准没有明确要求将其实现为树，但时间复杂性约束要求其查找/插入操作，这意味着它将始终作为哈希表实现。

优点：

1.  更快（承诺为搜索摊销 O(1)）
2.  与 tree-DS 相比，易于将基本原语转换为线程安全

缺点：

1.  查找不保证是 O(1)。理论上最坏的情况是 O(n)。
2.  不像树那么紧凑（出于实际目的，负载因子永远不会是 1）。

注意：哈希表的 O(1) 来自没有冲突的假设。即使负载因子为 0.5，每第二个变量插入都会导致碰撞。可以观察到，哈希表的负载因子与访问其中元素所需的操作数成反比。我们减少了更多#operations，更稀疏的哈希表。当存储的元素的大小与指针相当时，开销就相当大了。

**我是否错过了应该知道的用于性能分析的 map/set 之间的任何区别？**

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-18T07:28:44.627

我认为您通常已经回答了自己的问题，但是，这是：

> 不像树那么紧凑。（出于实际目的，负载因子永远不会是 1）

不一定是真的。一个类型的树的每个节点（我们假设它是一棵红黑树）`T`使用的空间至少等于`2 * pointer_size + sizeof(T) + sizeof(bool)`. 这可能`3 * pointer size`取决于树是否包含`parent`每个树节点的指针。

`load factor < 1`将此与哈希映射进行比较：由于您所说的事实，每个哈希映射都会浪费数组空间。但是，假设哈希映射使用单链表进行链接（实际上，没有真正的理由不这样做），插入的每个元素只取`sizeof(T) + pointer size`.

请注意，此分析忽略了可能来自对齐使用的额外空间的任何开销。

对于任何尺寸较小的元素`T`（因此，任何基本类型），指针的大小和其他开销占主导地位。在`> 0.5`（例如）的负载因子下，`std::unordered_set`可能确实比等效的`std::set`.

另一个重要的缺失点是`std::set`，根据给定的比较函数，遍历 a 可以保证产生从最小到最大的排序，而遍历 an`std::unordered_set`将以“随机”顺序返回值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-19T18:35:05.447

另一个区别（尽管与性能无关）是`set`插入不会使迭代器无效，而`unordered_set`如果它触发了重新散列，则插入可以。在实践中，这是一个非常小的问题，因为对实际元素的引用仍然有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-13T08:16:14.880

Yuushi 已经很好地解决了空间效率和其他问题；我将评论问题的其他几个部分......

> 哈希表的 O(1) 来自没有冲突的假设。

这不是真的。O(1) 的意思并不是第一次查找尝试总是会成功，而是平均而言，需要的尝试次数是恒定的，而不是随着值数量的增加而增加。例如，使用`unordered_set`or ... `_map`，[`max_load_factor`](http://en.cppreference.com/w/cpp/container/unordered_set/max_load_factor)构造时默认为 1.0，如果负载因子通过良好的散列函数接近该值，则散列到任何一个桶的*平均*元素数将在 2 左右，无论有多少值在表中。

> 即使负载因子为 0.5，每第二个变量插入都会导致碰撞。

没错，但它并没有你想象的那么可怕：在 1.0 的负载因子下，平均链长度为 2 还不错。

> 可以观察到，哈希表的负载因子与访问其中元素所需的操作数成反比。我们减少了更多#operations，更稀疏的哈希表。

肯定存在相关性（不是相反的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-06T12:25:59.460

在某些情况下`set`更方便。

例如使用`vector`作为键：

```
set<vector<int>> s;
s.insert({1, 2});
s.insert({1, 3});
s.insert({1, 2});

for(const auto& vec:s)
    cout<<vec<<endl;   // I have override << for vector
// 1 2
// 1 3 
```

之所以`vector<int>`会在`set`因为`vector`override `operator<`。

但是如果你使用`unordered_set<vector<int>>`你必须创建一个散列函数`vector<int>`，因为向量没有散列函数，所以你必须定义一个像：

```
struct VectorHash {
    size_t operator()(const std::vector<int>& v) const {
        std::hash<int> hasher;
        size_t seed = 0;
        for (int i : v) {
            seed ^= hasher(i) + 0x9e3779b9 + (seed<<6) + (seed>>2);
        }
        return seed;
    }
};

vector<vector<int>> two(){
    //unordered_set<vector<int>> s; // error vector<int> doesn't  have hash function
    unordered_set<vector<int>, VectorHash> s;
    s.insert({1, 2});
    s.insert({1, 3});
    s.insert({1, 2});

    for(const auto& vec:s)
        cout<<vec<<endl;
    // 1 2
    // 1 3
} 
```

你可以看到在某些情况下`unordered_set`更复杂。

主要引用自： [https ://stackoverflow.com/a/29855973/6329006](https://stackoverflow.com/a/29855973/6329006)

之间的更多区别`unordered_set`，`set`请参见：[https ://stackoverflow.com/a/52203931/6329006](https://stackoverflow.com/a/52203931/6329006)

# c# - 占位符控件计数在按钮单击时始终返回 0

> ID：16075892
> 
> 赞同：1
> 
> 时间：2013-04-18T06:24:20.023
> 
> 标签：c#, asp.net, placeholder

我使用下面的代码动态创建了一些文本框，并在这个文本框中输入了一些文本。现在我想在将文本添加到数据库时读取此控件的 ID。如何在单击按钮时获取此 TextBox 的 ID。

```
for (int i = 0; i < dv_count; i++)
{
    TextBox txt_box = new TextBox();
    txt_box.Text = "";
    txt_box.ID = "s" + i;
    placeholder1.Controls.Add(txt_box);
}

protected void btn_act_proceed_Click(object sender, EventArgs e)
{
    int count = placeholder1.Controls.Count; //always return 0

    if (count > 0)
    {
        int dv_count = count / 2;

        for (int i = 0; i < dv_count; i++)
        {
            TextBox  lbl_type = (TextBox )placeholder1.FindControl("s" + i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:47:33.400

尝试这个

在您的**Aspx**页面中

```
<div runat="server" id="plcholder">
</div>
<asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" /> 
```

现在在**后面的代码中**

```
protected void Page_Load(object sender, EventArgs e)
{
    populate();
}

public void populate()
{
    for (int i = 0; i < 3; i++)
    {
        TextBox tb = new TextBox();
        tb.ID = "s" + i;
        tb.Text = "Hello" + i;
        plcholder.Controls.Add(tb);
    }
}

protected void Button1_Click(object sender, EventArgs e)
{
    int cont = plcholder.Controls.Count;

    for (int i = 0; i < cont-1; i++)
    {
        TextBox tx = (TextBox)plcholder.FindControl("s" + i);
        Response.Write(tx.Text);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:36:34.127

期间将失去控制`postback`。因此，`preinit`您需要再次创建控件。
或者，您可以将控件保持在会话中并从回发中取回。
一个很好的链接[http://www.codeproject.com/Articles/3684/Retaining-State-for-Dynamically-Created-Controls-i](http://www.codeproject.com/Articles/3684/Retaining-State-for-Dynamically-Created-Controls-i)
[http://www.codeproject.com/Articles/502251/How-to-create-在 ASP-NET 中动态控制和](http://www.codeproject.com/Articles/502251/How-to-create-controls-dynamically-in-ASP-NET-and)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:29:59.100

我没有看到您首先向占位符添加控件。尝试这个

```
for (int i = 0; i < dv_count; i++)
{
    TextBox txt_box = new TextBox();
    txt_box.Text = "";
    txt_box.ID = "s" + i;
    placeholder1.Controls.Add(txt_box);
}

TextBox lbl_type = (TextBox)placeholder1.FindControl("s" + i); 
```

# xaml - Windows 8 xaml 中的 MessageDialog

> ID：16075897
> 
> 赞同：0
> 
> 时间：2013-04-18T06:24:37.973
> 
> 标签：xaml, windows-8, messagedialog

我的代码：

```
 MessageDialog msg = new MessageDialog("Are you sure to cancel the booking?", "Confirmation");
            msg.Commands.Add(new UICommand("Confirm", new UICommandInvokedHandler(CommandHandler)));
            msg.Commands.Add(new UICommand("Cancel", new UICommandInvokedHandler(CommandHandler)));
            msg.DefaultCommandIndex = 1;
            msg.CancelCommandIndex = 1;
            await msg.ShowAsync();

private async void CommandHandler(IUICommand command)
    {
        var commandLabel = command.Label;
        switch (commandLabel)
        {
            case "Confirm":
                CancelBookingTickets();
                break;
            case "Cancel":
                break;

        }

    }

 protected async void CancelBookingTickets()
    {          

            MessageDialog msg1 = new MessageDialog("The cancellation process is complete", "Complete");
            await msg1.ShowAsync();            
    } 
```

我正在尝试在我的 Windows 8 xaml 应用程序中使用嵌套的 MessageDialog 框，但是当我到达 时`msg1.ShowAsync()`，它会触发一个异常，提示“访问被拒绝”。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:42:10.090

`MessageDialog`您一次面临多个问题。

[如何在 WinRT 中一次允许多个弹出窗口？](https://stackoverflow.com/questions/14488587/how-to-allow-for-multiple-popups-at-once-in-winrt)

# iphone - 单击图像视图弹出显示原始图像的视图

> ID：16075900
> 
> 赞同：0
> 
> 时间：2013-04-18T06:24:43.767
> 
> 标签：iphone, ios, uiimageview, tableview, afnetworking

我已经将几个图像加载到表视图中。图像已调整大小，我希望当用户点击 imageview 时，它会弹出一个显示原始图像大小的视图，当用户再次单击任意位置时，视图会消失并返回 tableview。加载图像的代码如下：

```
- (UITableViewCell *)tableView:(UITableView *)atableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";
    SearchCell *cell = (SearchCell *)[atableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (!cell) {
        cell = [[[NSBundle mainBundle] loadNibNamed:@"SearchCell" owner:self options:nil] objectAtIndex:0];
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    cell.name.text = [[self.brands objectAtIndex:indexPath.row] objectForKey:@"name"];

    __weak SearchCell *weakCell = cell; 
    [cell.leftImageView setImageWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://s-57130.gotocdn.com/%@", [[self.brands objectAtIndex:indexPath.row] objectForKey:@"pic"]]]] placeholderImage:[UIImage imageNamed:@"app_icon.png"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {

        CGFloat imageHeight = image.size.height;
        CGFloat imageWidth = image.size.width;

        CGSize targetSize = CGSizeMake(70, 70);
        CGSize newSize = targetSize;
        CGFloat scaleFactor = targetSize.width / imageWidth;
        newSize.height = imageHeight * scaleFactor;

        UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
        [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
        UIImage *small = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        weakCell.imageView.image = small;

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {

    }];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T18:07:56.853

无需手动调整图像大小。如果将`imageView` `contentMode`属性设置为`UIViewContentModeScaleAspectFill`，它将自动缩放以适应图像视图的大小。

至于点击缩放，请查看[UIImageViewModeScaleAspect](https://github.com/VivienCormier/UIImageViewModeScaleAspect)。

# android - 自定义 Facebook OAuth 对话框中的文本

> ID：16075904
> 
> 赞同：1
> 
> 时间：2013-04-18T06:24:54.497
> 
> 标签：android, facebook, facebook-android-sdk, android-facebook

我正在使用 Facebook Android SDK 来实现 Facebook 登录并从我的 Android 应用程序访问 Facebook 平台 API。

OAuth 对话框如下：![在此处输入图像描述](https://i.stack.imgur.com/BurdJ.png)

目前它显示文本：登录以使用**您的**Facebook 帐户...

有什么方法可以将上述文本更改为：登录以使用**{USER_NAME} 的**Facebook 帐户...

在这里，我可以动态更改文本 {USER_NAME} 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:18:09.213

**这是不可能的。我认为这也不重要，因为**

您如何知道他/她要登录的 Facebook 用户名？

如果您显示应用程序中提供的用户名，Facebook 中提供的用户名可能与应用程序中的用户名不同。如果不同，作为最终用户，他们真的很困惑为什么我需要使用其他用户名登录。**你**这个词本身就足以让用户觉得这是他们的账号。

# php - 为什么执行后我的 INSERT 语句的 VALUES 变成了 SPACES？

> ID：16075908
> 
> 赞同：1
> 
> 时间：2013-04-18T06:25:19.293
> 
> 标签：php, sql, codeigniter, activerecord, foxpro

```
//here is my function block
public function create_accnt()
{
    $post = $this->input->post(); //gets all possible posts in array form

    echo "Post array: ";print_r($post); // just to make sure that my array has    values

    $data = array(
        'userid'    => $post['user_id'],
        'lastname'  => $post['lname'],
        'firstname' => $post['fname'],
        'username'  => $post['username'],
        'password'  => $post['password'],
        'usertype'  => $post['user_type'],
        'status'    => 'A'
    ); // assigning my values to their specific fields where they will be inserted

    $query = $this->db->insert('accounts', $data); //insertion via active record

    echo "<br/>Result of db last query: "; 
    echo $this->db->last_query();//to see how my query looks in code form

    if($query)
    {
        return true;
    }
    else
        return false;
    // end if
} // end function

//here is the result of the code above

//Post array: Array ( [user_id] => 123456 [lname] => Smith [fname] => John [username] =>     John [password] => password [c_password] => password [user_type] => S [btn_create] => Create )

//Result of db last query: INSERT INTO accounts (userid, lastname, firstname, username, password, usertype, status) VALUES ('', '', '', '', '', '', '') 
```

这里为什么在查询后我的 VALUES 都是空格？顺便说一句，我正在使用 CodeIgniter，我的数据库驱动程序是 PDO，我的数据库是 DBFoxPro。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:36:08.973

我最终使用`$this->db->query()`了 CI 的功能并手动提供了我的查询语句。我认为`$this->db->insert()`不会通过 PDO 驱动程序在我的 db DBF-foxpro 上工作。我也有关于`$this->db->where()`功能的问题。现在我只是在使用`$this->db->query()`. 谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:48:59.027

代替

```
 $data = array(
        'userid'    => $post['user_id'],
        'lastname'  => $post['lname'],
        'firstname' => $post['fname'],
        'username'  => $post['username'],
        'password'  => $post['password'],
        'usertype'  => $post['user_type'],
        'status'    => 'A'
    ); 
```

利用

```
$data = array(
        'userid'    => $this->input->post('user_id'),
        'lastname'  => $this->input->post('lname'),
        'firstname' => $this->input->post('fname'),
        'username'  => $this->input->post('username'),
        'password'  => $this->input->post('password'),
        'usertype'  => $this->input->post('user_type'),
        'status'    => 'A'
    ); 
```

# ruby-on-rails - 如何使用 rails validates 来检查一个值或另一个值，而不是一个范围？

> ID：16075912
> 
> 赞同：4
> 
> 时间：2013-04-18T06:25:23.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, isbn

我正在尝试在我的 Rails 应用程序中为书籍编写模型，并且我想验证 isbn 属性，但是 ISBN 有两种可能的长度：10 和 13。我如何使用验证来确保给定的 isbn 是 10还是 13 个数字长？

我考虑过使用一个范围：

```
validates :isbn, length: { minimum: 10, maximum: 13 } 
```

但如果它是 11 或 12 个数字，它 { should_not be_valid }。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T06:42:59.703

您可以为此目的使用自定义验证器：

```
class Book < ActiveRecord::Base
  attr_accessible :isbn

  validate :check_length

  def check_length
    unless isbn.size == 10 or isbn.size == 13
      errors.add(:isbn, "length must be 10 or 13") 
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:51:57.590

您需要创建一种新方法来验证一个长度或另一个。

用于验证：

```
validate :isbn_length 
```

定义此验证

```
def isbn_length
  if isbn.length !== 10 || 13
    errors.add(:isbn, "ISBN should be 10 or 13 characters long")
  end
end 
```

# javascript - 可编辑网格中的 ComboxBox

> ID：16075913
> 
> 赞同：1
> 
> 时间：2013-04-18T06:25:36.613
> 
> 标签：javascript, jsp, extjs4, java-ee-6

我是 ExtJS 的新手，现在我正在制作一个带有组合框的可编辑网格。我在从组合框中显示我选择的数据时遇到问题。愿有人帮助我。下面提供了屏幕截图。

![http://dc532.4shared.com/img/KXKZShxg/s7/0.8332573228065803/error2.png?async](https://i.stack.imgur.com/AUfP7.png)

[提供链接.. :))](http://dc532.4shared.com/img/KXKZShxg/s7/0.8332573228065803/error2.png?async)

我的组合框代码...

数据：

```
 var farms = new Ext.data.ArrayStore({
    fields: ['id', 'farms'],
    data : [                                         
            ['1', 'DVZ'],
            ['2', 'SSK'],
            ['3', 'LNA'],
            ['4', 'NSK']
           ]
     }); 
```

组合框..

```
 header   : 'Location',
          width    : 130,
          fixed    : true,
          hideable : false,
          dataIndex: 'farms',
          editor   : {xtype:'combo', 
                      store: farms,
                             displayField:'farms',
                             valueField: 'id',
                             queryMode: 'local',
                            typeAhead: true,
                            triggerAction: 'all',
                            lazyRender: true,
                            emptyText: 'Select location...',
                            autoload: true

          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:06:35.253

可能是您在网格配置中的 dataindex 值，与您在组合框配置中的值字段不同，例如，在“责任”字段中查看此配置

```
columns: [
     { header: 'ID', dataIndex: 'id', width: 50, hidden: true, sortable: true },
     {header: 'Responsible',
            width: 175,
            sortable: true,
            renderer: title_respU_D1,
            dataIndex: 'resp_user_name'
            ,editor: new Ext.form.ComboBox({
                   typeAhead: true,
                   triggerAction: 'all',
                   store: app_responsibleStore,
                   mode: 'remote',
                   valueField: 'resp_user_name',
                   displayField: 'resp_user_name',
                   listClass: 'x-combo-list-small'
        })
     }

] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:26:23.663

您可能在网格面板中项目的编辑器配置中缺少一些“配置”。

我希望你可能会错过 typeAhead 配置。

请参考下面的煎茶示例链接

[http://docs.sencha.com/extjs/4.0.7/extjs-build/examples/grid/cell-editing.html](http://docs.sencha.com/extjs/4.0.7/extjs-build/examples/grid/cell-editing.html)

谢谢。

# google-glass - 是否可以在 Mirror API 中注册顶级意图？

> ID：16075920
> 
> 赞同：8
> 
> 时间：2013-04-18T06:25:53.693
> 
> 标签：google-glass, google-mirror-api

示例“顶级操作”将是“Google”、“拍照”等。

是否可以使用 Mirror API 来注册自定义顶级事件？“好吧，格拉斯，压扁我。”

我的第二个问题是是否可以接受用户语音。使用“OK Glass，Google”示例，用户说出 Google 接受并采取行动的查询。是否可以使用 Mirror API 为您的自定义操作捕获它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T15:19:38.350

Glass 客户端和 Mirror API 尚无法实现这一点。但是，已经有一个提交的[功能请求](https://code.google.com/p/google-glass-api/issues/detail?id=6)，您可以按照该请求获取有关进度的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-07T22:40:28.367

只有当你同时根设备（使你的保修失效）并激活他们所谓的“实验室实验”时，你现在才可以这样做。更具体地说，称为“原生应用语音”，它使您能够通过部署到 Glass 的原生 APK 的 AndroidManifest.xml 来启用 ok,glass 菜单上的语音快捷方式来启动应用的意图。

见：[https ://gist.github.com/zhuowei/5624527](https://gist.github.com/zhuowei/5624527)

# mysql - 触发器创建错误以及如何优化它

> ID：16075931
> 
> 赞同：0
> 
> 时间：2013-04-18T06:26:36.143
> 
> 标签：mysql, triggers

请告诉我代码有什么问题。无法解决错误

```
DELIMITER $$
CREATE TRIGGER update_status  BEFORE Update ON listing_basic_new_updated 
FOR EACH ROW
 if new.processing_status is not null 
    then begin
    SET new.rep_status = New.processing_status;
    end; 
  elseif new.televeri_status is not null 
    then begin
    SET new.rep_status = New.televeri_status;
    end; 
  elseif new.verification_status is not null 
    then begin
    SET new.rep_status = New.verification_status;
    end;
end if;
END$$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:31:07.763

我认为你错过了一个`BEGIN`与你最后相匹配`END`的：

```
DELIMITER $$
CREATE TRIGGER update_status  BEFORE Update ON listing_basic_new_updated 
FOR EACH ROW
BEGIN
 if new.processing_status is not null 
    then begin
    SET new.rep_status = New.processing_status;
    end; 
  elseif new.televeri_status is not null 
    then begin
    SET new.rep_status = New.televeri_status;
    end; 
  elseif new.verification_status is not null 
    then begin
    SET new.rep_status = New.verification_status;
    end;
end if;
END$$
DELIMITER ; 
```

我想你也许可以用

```
SET new.rep_status = COALESCE(new.processing_status, new.televeri_status,
                           new.verification_status, new.rep_status); 
```

[`COALESCE`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)：“返回列表中的第一个非 NULL 值，如果没有非 NULL 值，则返回 NULL。”

# wcf - 在 Test_at_server 配置中与 Ninject 内核绑定时，如何将 ClientCredentials 分配给 WCF 客户端？

> ID：16075932
> 
> 赞同：0
> 
> 时间：2013-04-18T06:26:44.767
> 
> 标签：wcf, binding, dependency-injection, ninject, credentials

我正在使用 Ninject 在本地环境中注入我的 WCF 客户端并且它工作正常。这就是我实现它的方式：

```
private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();

        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);

        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        return kernel;
    } 
```

在我的`RegisterServices(kernel)`方法中，我有以下实现：

```
private static void RegisterServices(IKernel kernel)
    {
    #if DEBUG
        kernel.Bind<MyWCFClient.IMyWCF>().To<MyWCFClient.MyWCFClient>();

    #elif Test_at_server            
        kernel.Bind<MyWCFClient.IMyWCF>().To<MyWCFClient.MyWCFClient>()
              /*.WithConstructorArgument("UserName", Credentials.UserName.UserName = "user")
              .WithConstructorArgument("Password", Credentials.UserName.Password = "password")*/;
    #endif
    } 
```

我想要做的是，当我在服务器中部署我的 Web 应用程序时，ninject 应该用凭据注入 WCf，因为服务器上的 WCF 需要经过身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:22:42.763

我已经尝试过了，它对我有用！

```
#if DEBUG
    kernel.Bind<MyWCFClient.IMyWCF>().To<MyWCFClient.MyWCFClient>();
    #elif Test_at_server
    ClientCredentials Credentials = new ClientCredentials();
    kernel.Bind<MyWCFClient.IMyWCF>().To<MyWCFClient.MyWCFClient>()
        .WithConstructorArgument("UserName", Credentials.UserName.UserName = "username")
       .WithConstructorArgument("Password", Credentials.UserName.Password = "password");
#else
#endif 
```

# asp.net-mvc - 如何通过javascript填充MVC下拉列表

> ID：16075933
> 
> 赞同：0
> 
> 时间：2013-04-18T06:26:46.017
> 
> 标签：asp.net-mvc, html-select

早上好，我有一个连接到视图模型的视图，它有 3 个部分，一个是简单模型的一般信息，一个是 List<> 的地址模型和一个也是列表的电话模型，在视图上模型。我的问题是，在新的客户视图上，上面的视图，地址和电话模型是空的，当我给用户添加地址和电话的机会时，模型是空的，所以当我需要用上面的内容填写 2 个下拉列表时页面已加载的数据。所以我的问题是如何“刷新”下拉列表数据以从包含上述数据的 ViewBag 中填充？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:29:21.817

当用户单击`Add New Address`按钮时，您可以对控制器操作执行 AJAX 调用，该操作将返回包含将添加到 DOM 的地址模板的部分视图。Steven Sanderson 在他非常出色的[`Editing a variable length list in ASP.NET MVC`](http://blog.stevensanderson.com/2008/12/22/editing-a-variable-length-list-of-items-in-aspnet-mvc/)博文中说明了这个概念。

作为使用 AJAX 的替代方法，您还可以使用纯客户端方法来执行此操作。例如，您可以使用模板 javascript 框架，例如[`knockoutjs`](http://knockoutjs.com/). Steven Sanderson 在[`his blog post`](http://blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/).

# javascript - 如何使用 javascript 浏览器检测获取当前位置、鼠标位置和当前 url

> ID：16075941
> 
> 赞同：0
> 
> 时间：2013-04-18T06:27:21.597
> 
> 标签：javascript

我正在创建一个监控网站的工具。

为此，我需要使用 javascript 浏览器检测获取当前位置、鼠标位置和当前 url

我怎样才能做到这一点？

我知道下面的代码对于获取当前位置是正确的。

```
var loc = navigator.geolocation.getCurrentPosition;
console.log(loc); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:29:26.517

1.  要访问对象的属性，请使用`.`（句点）而不是`,`（逗号）
2.  `getCurrentPosition`是一个*函数*，你需要调用它（with `()`）
3.  `getCurrentPosition`可能必须发出网络请求才能得出结果，所以它是异步的。您必须将回调函数作为其第一个参数传递给它。

这样的：

```
function showPositionData(result) {
    console.log(result);
}
navigator.geolocation.getCurrentPosition(showPositionData); 
```

# android - Android中的微笑和长按功能

> ID：16075943
> 
> 赞同：3
> 
> 时间：2013-04-18T06:27:32.523
> 
> 标签：android, keyboard, emoji

我创建了一个 Android 键盘。如何添加插入表情符号和使用长按键显示符号等功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:37:14.550

要创建允许从弹出菜单中选择多个选项的长按行为，请遵循本指南（特别是弹出菜单部分）：

[http://developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

表情符号（也称为表情符号）只是键的组合，所有程序都可以理解并以相同的方式解析。所以你要做的是，当有人点击你键盘上的笑脸时，模拟按下与那个表情符号匹配的组合键。例如，当有人点击笑脸时，您应该模拟按键 ':' 和 ')' 以获得:)。

这是表情符号列表： [http ://en.wikipedia.org/wiki/List_of_emoticons](http://en.wikipedia.org/wiki/List_of_emoticons)

# python - Python grid_forget

> ID：16075951
> 
> 赞同：0
> 
> 时间：2013-04-18T06:28:11.793
> 
> 标签：python, tkinter

我想请你帮忙。

我正在尝试清除一个框架，然后在其中添加新元素。但是，清除所有元素后，添加新元素不显示。能否请您对我的问题有所了解。谢谢

这是我的代码

```
#!/usr/bin/env python

import Tkinter as tk
import socket
import sys

def next(line, num):
    s.send(line)
    data= s.recv(size)
    num.set(data)

class Client(tk.Frame):

    def __init__(self, master=None):
        tk.Frame.__init__(self, master)
        self.grid()
        self.configHost()

    def configHost(self):
        self.hostEntry = tk.Entry(self, justify=tk.CENTER);
        self.hostLabel = tk.Label(self, text='Host')
        self.connectButton = tk.Button(self, text='Connect', command=lambda:self.startServe())

        self.hostLabel.grid(row=0, column=0, ipadx=10, ipady=10)
        self.hostEntry.grid(row=0, column=1, columnspan=4, pady=20, padx=20, ipadx=5, ipady=5)
        self.connectButton.grid(column=2,pady=10)

    def startServe(self):
        hostnum = self.hostEntry.get()
        port = 50000
        size = 1024
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.connect((hostnum,port))

        if s >= 0:
            self.grid_forget()
            tk.Frame.__init__(self, master=None)
            self.grid()     
            self.nowServingLabel= tk.Label(self, text="Sample") 
            self.button = tk.Button(self, text='Connect')
            self.nowServingLabel.grid()
            self.button.grid() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:45:58.783

多次调用框架构造函数是*非常不寻常的。*这很可能是您问题的根源。我不知道这在幕后做了什么，但类根本不是为了那样工作而设计的。

另外，您是否知道 grid_forget 只会从视图中删除一个小部件，而不会破坏它？如果您一直“忘记”并重新创建小部件，那么您正在创建内存泄漏。

# c++ - C++ 序列化/反序列化 std::map 从/到文件

> ID：16075953
> 
> 赞同：16
> 
> 时间：2013-04-18T06:28:20.040
> 
> 标签：c++, serialization, map

我有一个 std::map。

我想知道是否可以使用 fwrite 将其写入文件（也可以从文件中读取），或者是否需要分别写入/读取每个值。

我希望因为没什么特别的，这可能是可能的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-18T06:32:25.437

用于`boost::serialization`在一行中序列化。它的标题：

```
boost/serialization/map.hpp 
```

代码示例

```
#include <map>
#include <sstream>
#includ  <iostream>
#include <boost/serialization/map.hpp>
#include <boost/archive/text_iarchive.hpp>
#include <boost/archive/text_oarchive.hpp>

int main()
{
   std::map<int, int> map = {{1,2}, {2,1}};
   std::stringstream ss;
   boost::archive::text_oarchive oarch(ss);
   oarch << map;
   std::map<int, int> new_map;
   boost::archive::text_iarchive iarch(ss);
   iarch >> new_map;
   std::cout << (map == new_map) << std::endl;
} 
```

输出：

```
g++ -o new new.cpp -std=c++0x -lboost_serialization
./new
1 
```

对于文件，只需使用`std::ifstream/std::ofstream`而不是，`std::stringstream`并且可能是`binary_archive`，而不是`text_archive`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:30:38.427

没有一个单行来序列化地图。您需要单独编写每个键/值对。不过，这实际上并不比 for 循环复杂多少。

使用 boost，可能有一种方法，但我不熟悉确切的 API。

# rspec - 是否有 RSpec 格式化程序可以在规范通过/失败时播放音频文件？

> ID：16075954
> 
> 赞同：2
> 
> 时间：2013-04-18T06:28:26.920
> 
> 标签：rspec, formatter

我接触到了有趣的[Nyan Cat Formatter](https://github.com/mattsears/nyan-cat-formatter)，它能够在规范运行时播放音乐。

因为我们的测试套件在不断增长，所以我经常在它运行时做其他事情，例如互联网上的浏览器。当规范完成时（或失败时）有音频信号会很棒，所以我知道什么时候恢复工作。

有这样的格式化程序吗？如果没有，我会尝试自己创建一个，看看 Nyan Cat Formatter 是如何工作的。

感谢乔希的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:54:51.347

你可以在 shell 上做一些简单的事情，比如：

```
rake spec && say 'pass!' 
```

`say`是 Mac 的东西，但我确信其他平台也可以使用类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-26T20:56:30.830

我刚刚制作了这个 Gist，它让它变得非常简单，除了 rspec （和 sox，你可以通过它安装）之外你不需要任何东西`apt-get`：

[在 Rspec 套件之后播放声音](https://gist.github.com/yjukaku/8138580)

```
 config.after(:suite) do
    examples = RSpec.world.filtered_examples.values.flatten
    if examples.none?(&:exception)
      file = "spec/pass.wav" 
    else
      file = "spec/fail.wav"     
    end

    fork{exec "play -q -V0 #{file}"}

  end 
```

这在你的`spec_helper.rb`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T14:27:02.160

您可能想要检查[自动](http://rubygems.org/gems/autotest)测试以让它运行您的测试，它可以[配置为使用插件](https://github.com/unimatrixZxero/.files/blob/master/.autotest)在测试运行开始或结束时播放声音。

# jsp - 我不知道如何在 java 中存储 cookie 值然后传递给 html 页面我将在 websession 中使用 wicket 概念

> ID：16075955
> 
> 赞同：0
> 
> 时间：2013-04-18T06:28:27.227
> 
> 标签：jsp, get, return-value

java页面中的代码

```
protected void onSubmit() {
            System.out.println("login name inner the submit function:"+this.loginName);

        if(loginName == null || password == null) {
            logger.error("login failed - login name " + 
                    (loginName!=null ? "is set (trimmed length=" + 
                            loginName.trim().length()+")" : "is null") + 
                    " and password " + 
                    (password!=null ? "is set" : "is null") + ".");
            error(getLocalizer().getString("login.error", null));
            return;
        }

        User user = JtracApplication.get().authenticate(loginName, password);
        System.out.println("USER:"+user);
        if (user == null) {
            /*
             * ================================
             * Login failed!
             * ================================
             */
            logger.error("login failed - Authentication for login name '"+
                    loginName + "' not successful");
            error(getLocalizer().getString("login.error", null));
        } else {
            /*
             * ================================
             * Login success!
             * ================================
             */

            /*
             * Set Remember me cookie if checkbox is checked on page.
             */
            if(rememberMe) {
                Cookie cookie = new Cookie("jtrac", loginName + ":" + JtracApplication.get().getJtrac().encodeClearText(password));
                cookie.setMaxAge(30 * 24 * 60 * 60); // 30 days in seconds 
                String path = getWebRequestCycle().getWebRequest().getHttpServletRequest().getContextPath();
                cookie.setPath(path);
                getWebRequestCycle().getWebResponse().addCookie(cookie);
                logger.debug("remember me requested, cookie added, " + WebUtils.getDebugStringForCookie(cookie));
                System.out.println("cookies:"+cookie);
                temp=cookie;
            }

            /*
             * Setup session with principal
             */
            JtracSession.get().setUser(user);

            /*
             * Proceed to bookmarkable page or default dashboard
             */
            if (!continueToOriginalDestination()) {
                setResponsePage(DashboardPage.class);
            }
        }
    } // end onSubmit() 
```

我不知道如何在变量中设置 cookie 值并将其传递给我的 html 页面，请尽早帮助我。页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:30:33.397

希望这两个链接对您有所帮助。

1.  [获取/设置 Cookie](http://www.java2s.com/Tutorial/Java/0400__Servlet/GetSetCookie.htm)
2.  [JSP - Cookie 处理](http://www.tutorialspoint.com/jsp/jsp_cookies_handling.htm)

# c - 我的 wcf 端点有问题

> ID：16075960
> 
> 赞同：0
> 
> 时间：2013-04-18T06:28:47.710
> 
> 标签：c, wcf, wcf-client, wcf-endpoint, wcf-configuration

**我的 WCF 服务 web.config。**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add name="ZesdaagseResultsContext" connectionString="Data Source=194.33.112.88\partywhere;Initial Catalog=ZesdaagseResults;Persist Security Info=True;User ID=*********;Password=******************/;MultipleActiveResultSets=True"
      providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.serviceModel>
    <services>
      <service name="WcfOpzet.MobileService" behaviorConfiguration="MexBehavior">
        <endpoint binding="webHttpBinding" contract="WcfOpzet.IMobileService" behaviorConfiguration="webHttpBehavior" />
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MexBehavior">
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="webHttpBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
  </startup>
  <system.web>
    <compilation debug="true" />
  </system.web>
</configuration> 
```

**我的 wcf 客户端 MobileServiceReference.ClientConfig。**

```
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="webHttpBinding"
                 maxBufferSize="2147483647"
                 maxReceivedMessageSize="2147483647">
          <security mode="None" />
        </binding>       
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://zesdaagse.mobi-app.be/WCFUrl/MobileService.svc"
                binding="basicHttpBinding"
                bindingConfiguration="webHttpBinding"
                contract="MobileService.IMobileService"
                name="webHttpBinding"

                />
    </client>
    <!--<behaviors>
      <endpointBehaviors>
        <behavior name="webHttpBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>-->
  </system.serviceModel>
</configuration> 
```

**运行 Windows Phone 应用程序时出现错误。**

在[http://zesdaagse.mobi-app.be/WCFUrl/MobileService.svc](http://zesdaagse.mobi-app.be/WCFUrl/MobileService.svc)上没有可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

**解释**

我搜索了但我没有得到它修复。我的端点有问题，但我不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:32:53.140

啊，现在我明白了您在客户端中使用 basicHttpBinding，在服务中使用 webHttpBinding (REST) ...这可能是它不起作用的原因，不是吗？

额外的仅供参考：我尝试自己调用您的服务，现在我得到一个 405，这可能意味着您没有为您的服务操作指定 [WebGet] 或 [WebInvoke] 属性。

使用以下客户端配置，您应该能够调用您的服务（在使用 WebGet 进行操作之后）

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="webHttpBinding"
                 maxBufferSize="2147483647"
                 maxReceivedMessageSize="2147483647">
          <security mode="None" />
        </binding>
      </webHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://zesdaagse.mobi-app.be/WCFUrl/MobileService.svc"
                binding="webHttpBinding"
                bindingConfiguration="webHttpBinding"
                contract="MobileService.IMobileService"
                name="webHttpBinding"
                behaviorConfiguration="webHttpBehavior"
                />
    </client>
    <behaviors>
      <endpointBehaviors>
        <behavior name="webHttpBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

# python - 使用python查找文本文件中的单词数

> ID：16075966
> 
> 赞同：0
> 
> 时间：2013-04-18T06:29:10.183
> 
> 标签：python, file, count, word

我的文本文件命名为`content_data`以下内​​容

```
A house is house that must be beautiful house and never regrets the regrets for the baloon in 
the baloons. Find the words that must be the repeated words in the file of house and ballons 
```

1.  现在我需要使用 python 读取文件并且需要找到每个单词的计数
2.  我们需要以字典的形式实现结果，如下所示

    `{'house':4,'baloon':3,'in':4........},`

    我的意思是格式为`{word:count}`

谁能让我知道如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:35:58.467

```
from collections import Counter
from string import punctuation

counter = Counter()
with open('/tmp/content_data') as f:
  for line in f:
    counter.update(word.strip(punctuation) for word in line.split())

result = dict(counter)

# note: because we have
#   isinstance(counter, dict)
# you may as well leave the result as a Counter object

print result 
```

# mysql - 从 mysql 转储恢复 wordpress 数据库

> ID：16075977
> 
> 赞同：0
> 
> 时间：2013-04-18T06:29:28.503
> 
> 标签：mysql, wordpress

有没有办法从旧的 mysqldumb 文件 (.sql) 中正确恢复 Wordpress 数据库？我不记得 wordpress 版本了，但它不低于 3.4.2。

目前，每当我尝试像这样恢复时：

`mysql -u blogadmin -p new_db < old_db_dump.sql`

我没有收到任何错误（至少没有输出错误），然后我的博客第一页是白色的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:33:33.633

白色首页通常意味着在渲染此页面时出现 php 错误。尝试启用 php error_reporting（或错误日志）并查看这些错误消息。根据错误消息，您可以尝试修复 wp 脚本版本或将更新应用于您的数据库。

# php - 需要检测移动浏览器并使用 PHP 为 Joomla 模板加载 mobile.css 文件

> ID：16075978
> 
> 赞同：1
> 
> 时间：2013-04-18T06:29:31.130
> 
> 标签：php, css, mobile, joomla, detection

我需要通过 php 检测是否有人正在使用移动浏览器（在这种情况下媒体查询还不够），然后加载一个 mobile.css 文件以覆盖几行 css，因为我对某些代码缺乏适当的支持米使用。我正在构建一个 joomla 模板，所以我需要它来动态生成 css 文件的路径。那么，我这样做对吗？例子：

```
<?php
$iphone = strpos($_SERVER['HTTP_USER_AGENT'],"iPhone");
$android = strpos($_SERVER['HTTP_USER_AGENT'],"Android");
$palmpre = strpos($_SERVER['HTTP_USER_AGENT'],"webOS");
$berry = strpos($_SERVER['HTTP_USER_AGENT'],"BlackBerry");
$ipod = strpos($_SERVER['HTTP_USER_AGENT'],"iPod");

if ($iphone || $android || $palmpre || $ipod || $berry == true) 
{ 
echo "<link rel="stylesheet" href="$this->baseurl/templates/$this->template/css/mobile.css" type="text/css">";
}
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T07:59:39.743

在 Joomla 中内置了移动检测。

如果您使用的是 Joomla 3.0，您可以使用：

```
<?php
$templateUrl = $this->baseurl . '/templates/' . $this->template;
$doc         = JFactory::getDocument();
$appWeb      = new JApplicationWeb; // new JWebClient; (in Joomla 2.5)

if ($appWeb->client->mobile)
{
    $doc->addStyleSheet($templateUrl . '/css/mobile.css');
}
?> 
```

在 Joomla 2.5 或更低版本中你会使用`$appWeb = new JWebClient`

在 Joomla 3.4 中你可能会使用`if (JFactory::getApplication()->client->mobile)`

我没有找到文档页面，但您可以随时检查[源代码](https://github.com/joomla/joomla-cms/blob/master/libraries/joomla/application/web/client.php)

*顺便说一下，看看响应式框架。学习需要时间，但值得。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T06:34:23.470

有一些可用的库，如 Mobile_Detect，您可以使用它们来检测您正在使用桌面、移动设备或平板电脑的哪个频道，并可以相应地加载 css。[你可以在这里](http://code.google.com/p/php-mobile-detect/)找到下载链接

请按照以下步骤操作：

1 从以上链接下载 Mobile_detect 文件。

2 将文件放在项目的某个文件夹中

3 现在将该文件包含在您要检查频道是移动版还是桌面版的页面中。即包括mobile_detect.php（类似这样的东西）4）然后一旦你包括上面的文件就这样做

```
$this->detect = new Mobile_Detect;
$channel = 'desktop';

if ($this->detect->isTablet() || 't' == $_REQUEST['device']) {
    $channel = 'tablet';
} elseif ($this->detect->isMobile() || 'm' == $_REQUEST['device']) {
     $channel = 'mobile';
} 
```

因此，您的 $channel 变量将具有频道，使用此变量您可以检查 $channel 是否不等于桌面，那么它将是移动的。您可以相应地加载 mobile.css。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:07:57.417

正如您在评论中明确表示您希望使用自己的方法，请注意您的`if`陈述和`echo`存在问题：如[文档中所述](http://php.net/manual/en/function.strpos.php)，`strpos`返回整数或 FALSE，因此您的软布尔比较`==`不起作用，因为整数的结果0 是正匹配，但会隐式转换为 FALSE。你`echo`也没有逃脱；我鼓励您使用单引号来减少丢失转义的风险。解决这些问题的更新代码如下：

```
// ... $iphone = strpos(... etc

if($iphone !== false || $android !== false || $palmpre !== false || $ipod !== false || $berry !== false)
{
  echo('<link rel="stylesheet" href="' . $this->baseurl . '/templates/' . $this->template . '/css/mobile.css" type="text/css">');
} 
```

# asana - Asana API 跨域请求访问控制标头

> ID：16075979
> 
> 赞同：1
> 
> 时间：2013-04-18T06:29:33.263
> 
> 标签：asana

我正在尝试从浏览器向 Asana API 发出 GET 请求。因为这是一个跨域请求，所以客户端先发送一个OPTIONS请求。我遇到了一年前在这个 Stack Overflow 问题中描述的相同问题，即[ASANA API 和 Access-Control-* headers](https://stackoverflow.com/questions/10567884/asana-api-and-access-control-headers)，其中 Asana API 不响应 Access-Control 参数。

我想知道 Asana Connect 和 OAuth2 的新版本是否解决了这个问题，我只是做错了什么，或者这是否仍然不受支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T20:30:23.910

（我在 Asana 工作。）对不起，看起来这从裂缝中溜走了。

我们目前不允许跨域请求。但是，如果您使用 Oauth2 并使用不记名令牌进行身份验证，我们确实支持[JSONP 。](http://en.wikipedia.org/wiki/JSONP)这允许您从 JS 客户端发出安全请求。

`opt_jsonp=CALLBACK`只需将作为参数附加到请求中，`CALLBACK`您希望使用响应数据回调的 javascript 函数的名称在哪里。

# scala - Scala比较泛型？

> ID：16075980
> 
> 赞同：2
> 
> 时间：2013-04-18T06:29:37.850
> 
> 标签：scala, generics, binary-search, comparator

我正在编写一个通用的二进制搜索实现，我无法编译这个（`compare is not a member of type parameter B`），即使它`B`是一个`Ordering`并且它应该被隐式转换为`Ordered`具有该`compare`方法的：

```
 /**
   * Generic binary search in (min,max) f to achieve target goal
   * O(log n)
   *
   * @param f the function to binary search over - most be monotonically increasing
   * @param min starting minimum guess (must be exclusive)
   * @param max starting maximum guess (must be exclusive)
   * @param avg mid function usually (min+max)/2
   * @param goal target to achieve
   * @tparam A input type of f
   * @tparam B output type of f
   * @return Some(x) such that f(x) is goal else None
   */
  import scala.math.Ordering.Implicits._

  def binarySearch[A: Ordering, B: Ordering](f: A => B, min: A, max: A, avg: (A, A) => A, goal: B): Option[A] = {
    if (min >= max) {
      None
    } else {
      val mid = avg(min, max)
      f(mid) compare goal match {
        case  1 => binarySearch(f, min, mid, avg, goal)
        case -1 => binarySearch(f, mid, max, avg, goal)
        case  0 => Some(mid)
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:53:07.960

尝试导入[`scala.math.Ordered`](http://www.scala-lang.org/api/current/index.html#scala.math.Ordered%24)：

```
import scala.math.Ordered._ 
```

它具有类型元素的隐式转换，`B`以`Ordered`允许在范围内存在`Ordering`类型的类型类`B`。

# javascript - 什么是“装饰器”，它们是如何使用的？

> ID：16075982
> 
> 赞同：149
> 
> 时间：2013-04-18T06:29:47.007
> 
> 标签：javascript, angularjs, decorator, angularjs-decorator

我很好奇 AngularJS 中的装饰器到底是什么。除了[AngularJS 文档中的简介和](http://docs.angularjs.org/api/AUTO.$provide#decorator)[youtube 视频](http://www.youtube.com/watch?v=VxuN6WO3tIA)中的简短（尽管很有趣）提及外，没有太多关于装饰器的在线信息。

正如 Angular 的人所说，装饰器是：

> 服务的装饰，允许装饰器拦截服务实例的创建。返回的实例可以是原始实例，也可以是委托给原始实例的新实例。

我真的不知道那是什么*意思*，我不确定你为什么要将这个逻辑与服务本身分开。例如，如果我想在不同的条件下返回不同的东西，我只需将不同的参数传递给相关函数或使用另一个共享该私有状态的函数。

我仍然是一个 AngularJS 菜鸟，所以我确信这只是我养成的无知和/或坏习惯。

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2013-04-18T08:54:47.970

一个很好的用例`$provide.decorator`是当您需要对模块所依赖的某些第三方/上游服务进行较小的“调整”，同时保持服务完好无损（因为您不是服务的所有者/维护者）。[这](http://plnkr.co/edit/lj9srM2KXZmwmTxLb1p7?p=preview)是关于 plunkr 的演示。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-04-18T13:52:53.590

装饰器允许我们分离横切关注点并允许服务保留单一职责原则，而无需担心“基础设施”代码。

装饰器的实际用途：

*   缓存：如果我们有一个服务可能会进行昂贵的 HTTP 调用，我们可以将服务包装在一个缓存装饰器中，该装饰器在进行外部调用之前检查本地存储。
*   调试/跟踪：根据您的开发/生产配置进行切换，使用调试或跟踪包装器装饰您的服务。
*   节流：将频繁触发的调用包装在一个去抖动的包装器中。例如，允许我们轻松地与速率受限的服务进行交互。

在所有这些情况下，我们将服务中的代码限制为其主要职责。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-21T04:59:08.580

`decorator`可以拦截由创建的服务实例`factory, service, value, provider`，并提供选项来更改一些`instance(service)`否则不可配置的/带有选项的选项。

它还可以提供用于测试目的的模拟实例，例如`$http`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-12T15:42:36.550

简单来说，我们可以说它就像一个扩展方法。对于前。我们有一个类，它有两个方法，在运行时我们想在其中添加更多方法，然后我们使用装饰器。

我们不能将 $provide.decorator 与常量一起使用，因为我们无法更改它们正在提升只读属性的常量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-19T06:23:52.010

简而言之，装饰器可以描述如下：-

> 装饰器函数拦截服务的创建，允许它覆盖或修改服务的行为。

它`$provide`通过角度使用服务并修改或替换另一个服务的实现

```
$provide.decorator('service to decorate',['$delegate', function($delegate) {
  // $delegate - The original service instance, 
  //             which can be replaced, monkey patched, 
  //             configured, decorated or delegated to. 
  //             ie here what is there in the 'service to decorate'

  //   This function will be invoked, 
  //   when the service needs to be provided 
  //   and should return the decorated service instance.
  return $delegate;
}]); 
```

例子：

```
$provide.decorator('$log', ['$delegate', function($delegate) {
  // This will change implementation of log.war to log.error
  $delegate.warn = $delegate.error; 
  return $delegate;
}]); 
```

应用

除了@JBland 答案。

*   应用程序范围的区域设置：-

    [你可以在这里](https://stackoverflow.com/questions/27547680/angular-js-currency-symbol-euro-after/#answer-47881020)找到一个例子

*   通过角度服务更改服务的默认行为和现有实现：-

    [你可以在这里](https://docs.angularjs.org/api/auto/service/$provide#$provide.decorator-examples)找到一个例子

*   一个函数在不同环境中的切换行为。

# javascript - getJSON() 中的 JSON 回调函数名称

> ID：16075984
> 
> 赞同：0
> 
> 时间：2013-04-18T06:29:50.117
> 
> 标签：javascript, jquery, json, rest, jsonp

我想访问[REACTOME REST API](http://reactomews.oicr.on.ca:8080/ReactomeRESTfulAPI/ReactomeRESTFulAPI.html)来检索一些数据。我`getJSON()`用来获取`JSON`数据。但我不知道`callback function name`每个网站的名称都不同。

以下不起作用：

```
 $.getJSON('http://reactomews.oicr.on.ca:8080/ReactomeRESTfulAPI/RESTfulWS/frontPageItems/homo+sapiens?jsoncallback=?', function(data) {

console.dir(data); }); 
```

我也尝试使用 AJAX，因为 jQuery 文档声明我们可以保留 jQuery 来决定回调函数。

```
$.ajax({
   type: 'GET',
    url: 'http://reactomews.oicr.on.ca:8080/ReactomeRESTfulAPI/RESTfulWS/frontPageItems/homo+sapiens',
    dataType: 'jsonp',
    success: function(data) {
       console.dir(data);
    },
    error: function(e) {
       console.log("error"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:45:05.643

所有迹象都表明该服务**不**支持 JSONP。

jQuery 中的实际错误是：`TypeError: Property 'message' of object Error: jQuery191005664544063620269_1366270377427 was not called is not a function`.

在发出 JSONP 请求时检查来自服务器的响应，它*没有*包含在回调函数中。所以它返回这个......

```
[ {
  "dbId" : 109581,
  "displayName" : "Apoptosis",
  "created" : {
    "dbId" : 109608,
.... 
```

但要支持 JSONP，它需要改为：

```
jQuery191005664544063620269_1366270377427([ {
  "dbId" : 109581,
  "displayName" : "Apoptosis",
  "created" : {
    "dbId" : 109608,
....) 
```

您需要找到一种不同的方法来处理[同源安全](http://en.wikipedia.org/wiki/Same_origin_policy)限制。

最简单的选择可能是使用服务器端代理，而不是直接通过浏览器。换句话说，jQuery 将调用您自己控制下的服务器（最好与提供 HTML 的域相同），然后它将传递服务请求并提供适当的响应。或者，如果您不需要在客户端上保持动态，只需在服务器端编写整个脚本（ASP.NET、php 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:37:27.307

如果网站不支持 jsonp 我建议你使用服务器端脚本，这里是一个使用 php 的示例

[http://momotaroblogger.blogspot.co.nz/](http://momotaroblogger.blogspot.co.nz/)

# azure - Azure 网站可以有多个绑定吗？

> ID：16075986
> 
> 赞同：2
> 
> 时间：2013-04-18T06:30:07.207
> 
> 标签：azure, azure-web-roles

我们目前在我们自己的虚拟机上的 IIS 上托管我们的网站。效果很好。

我们的主网站有大约 30 个左右的绑定，我们用它们来自定义 html 输出。对我们来说，每个绑定都是一个主题。例如，red.mywebsite.com 将具有红色背景。

如果我们转到 azure 网站，azure 是否也允许我们这样做？

如果是，我们可以以编程方式执行此操作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T07:08:57.370

是的，Azure 网站确实支持每个网站的多个绑定。

`Shared`但是，此功能仅适用于`Reserved`实例缩放模式。

配置绑定是通过目标网站的[自定义域管理完成的。](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)您可以添加多个自定义域，这将有效地编辑 IIS 中的绑定。但是，您必须知道 SSL 尚不可用于 Azure 网站。

还有管理绑定的编程方式，但尚未记录，因为此功能是预览版。[您可以通过Windows Azure PowerShell 管理 cmdlet](http://msdn.microsoft.com/en-us/library/windowsazure/jj156055.aspx)管理 Azure 网站。但这还没有记录。如果您从[这里](http://go.microsoft.com/?linkid=9811175&clcid=0x409)获得最新的 Windows Azure PowerShell，您将拥有以下命令：

*   新天蓝网站
*   获取 Azure 网站
*   删除-AzureWebsite
*   设置-Azure网站
*   显示-AzureWebSite
*   开始-AzureWebSite
*   停止-AzureWebSite

还有 REST 管理 API（由 PowerShell cmdlet 使用），它也没有记录:(

简单的逆向工程（使用 fiddler）显示 *AzureWebsite 命令连接到以下地址：

https://management.core.windows.net/[subscription-id]/services/webspaces/

只是一个简短的说明，该命令的帮助`Set-AzureWebsite`显示有一个 switch `-HostNames`，其记录如下：

> -HostNames <字符串[]>
> 
> ```
>  The fully qualified hostnames that can be used to access the website 
> ```

我相信这就是你需要的。

您可以尝试深入挖掘。

# javascript - 关于 jQuery 模式的问题

> ID：16075987
> 
> 赞同：1
> 
> 时间：2013-04-18T06:30:08.107
> 
> 标签：javascript, jquery, design-patterns, jquery-plugins

所以我决定最终学习一些关于 jQuery 的知识，因为我的一个项目需要一个简单的函数，所以我开始寻找一个好的模式。

我从官方[指南](http://docs.jquery.com/Plugins/Authoring)开始，但很快发现了许多其他可能的模板。我将参考其中两个来问我的问题：

[第一](http://www.impressivewebs.com/my-current-javascript-design-pattern/)

[第二个](http://jsfiddle.net/7snNz/)

第一个模式对我来说似乎更干净，我非常喜欢命名空间的想法。但是，这个怎么用？我是否将我的整个函数编写为命名空间的方法，然后在 IIFE 中调用所有这些函数，`init()`最后只在 IIFE 中调用这个方法`init()`，*还是应该直接在**IIFE*中调用必要的方法？

我觉得这个问题很白痴，但我就是不明白它的用法。

第二种模式对我来说更复杂。看看这个：

```
;(function ( $, window, document, undefined ) {
    //...
})( jQuery, window, document ); 
```

所有这些参数是什么，我在哪里设置它们以及为什么需要它们？第一个示例中包装器的缺点是什么？

可能性的多样性是压倒性的，我不知道从哪里开始或如何找到适合我的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:02:34.463

[查看Smashing Magazine](http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/)上的这篇优秀文章。
它涵盖了多种 jQuery 插件模式并解释了其中的每一种。

编辑：
那里有一部分文章可以回答您的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:58:37.837

尝试 Javascript 显示模块模式。

根据我的经验，这是最好的一个。

[在Javascript Revealing Module Pattern](http://blog.pluralsight.com/2012/10/02/revealing-module-pattern-structuring-javascript-code-part-iii/)上关注它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:11:55.590

### 来自[插件/创作的文档 - jQuery Wiki](http://docs.jquery.com/Plugins/Authoring)

要编写 jQuery 插件，首先向 jQuery.fn 对象添加一个新的函数属性，其中该属性的名称是您的插件的名称：

```
jQuery.fn.myPlugin = function() {
  // Do your awesome plugin stuff here
}; 
```

以上是最简单的插件制作。虽然有一个特定的步骤要遵循，但使用闭包是避免任何`$`与任何其他库（如 mootools、原型等）发生任何美元符号冲突的最佳实践。

为了确保您的插件不会与可能使用美元符号的其他库发生冲突，最好将 jQuery 传递给将其映射到美元符号的 IIFE（立即调用函数表达式），这样它就不会被覆盖由另一个库在其执行范围内。

```
 (function( $ ) {
   $.fn.myPlugin = function() {
    // Do your awesome plugin stuff here
   };
})(jQuery); 
```

**现在在这个闭包中，我们可以随意使用美元符号代替 jQuery。**

## 命名空间：

正确命名插件是插件开发的一个非常重要的部分。命名空间正确地确保您的插件被位于同一页面上的其他插件或代码覆盖的可能性非常低。命名空间还使您作为插件开发人员的生活更轻松，因为它可以帮助您更好地跟踪您的方法、事件和数据。

## 插件方法

```
(function( $ ){
  $.fn.tooltip = function( options ) { 
    // THIS
  };
  $.fn.tooltipShow = function( ) {
    // IS
  };
  $.fn.tooltipHide = function( ) { 
    // BAD
  };
  $.fn.tooltipUpdate = function( content ) { 
    // !!!  
  };
})(jQuery); 
```

这是不鼓励的，因为它会使`$.fn`命名空间变得混乱。为了解决这个问题，您应该将插件的所有方法收集在一个中`object literal`，并通过将方法的字符串名称传递给插件来调用它们。

```
 (function( $ ){
     var methods = {
        init : function( options ) { 
              // THIS 
        },
        show : function( ) {
              // IS
        },
        hide : function( ) { 
              // GOOD
        },
        update : function( content ) { 
              // !!! 
        }
     };

  $.fn.tooltip = function( method ) {
   // Method calling logic
    if ( methods[method] ) {
      return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    
   };
 })( jQuery );

// calls the init method
 $('div').tooltip(); 

 // calls the init method
 $('div').tooltip({
    foo : 'bar'
 }); 
```

# android - 使用android检索GPS位置

> ID：16075989
> 
> 赞同：1
> 
> 时间：2013-04-18T06:30:22.660
> 
> 标签：android, gps

我正在尝试使用简单的 android 程序获取当前位置的 gps 位置。我`onLocationChanged()`为此使用了方法。但它将坐标返回为 0.0。用户权限部分是正确的。这是主要的代码。

```
public class MainActivity extends Activity {

GPSTracker gps;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btn = (Button) findViewById(R.id.button1);
    final TextView tv = (TextView) findViewById(R.id.textView1);

    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            gps = new GPSTracker(MainActivity.this);

            double lat = gps.latitude;

            String mlat = String.valueOf(lat);

            tv.setText(mlat);
        }
    });
}

 } 
```

这是我使用的gps定位类...

```
 public class GPSTracker extends Service implements LocationListener{

private final Context mContext;
boolean isGPSEnabled = false;
boolean canGetLocation = false;

Location location;
double latitude;
double longtitude;

protected LocationManager locationManager;

public GPSTracker(Context context){

    this.mContext = context;
    getLocation();

}

public Location getLocation(){

        locationManager = (LocationManager) mContext.getSystemService(LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);

        return null;
}

protected void onStart() {

}

protected void onPause(){

    locationManager.removeUpdates(this);
}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub

    latitude = location.getLatitude();
    longtitude = location.getLongitude();
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:33:38.490

您可以找到 GPS_PROVIDER 或 NETWORK_PROVIDER 的位置

Android中的位置服务概述

这是一个尝试使用 GPS 查找位置的示例，如果您的 GPS 不可用，则尝试使用网络查找位置

**GPSTracker.java**

```
public class GPSTracker extends Service implements LocationListener {

private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

// flag for GPS status
boolean canGetLocation = false;

Location location; // location
double latitude; // latitude
double longitude; // longitude

// The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSTracker(Context context) {
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS Enabled", "GPS Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}

/**
 * Stop using GPS listener
 * Calling this function will stop using GPS in your app
 * */
public void stopUsingGPS(){
    if(locationManager != null){
        locationManager.removeUpdates(GPSTracker.this);
    }       
}

/**
 * Function to get latitude
 * */
public double getLatitude(){
    if(location != null){
        latitude = location.getLatitude();
    }

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude(){
    if(location != null){
        longitude = location.getLongitude();
    }

    // return longitude
    return longitude;
}

/**
 * Function to check GPS/wifi enabled
 * @return boolean
 * */
public boolean canGetLocation() {
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog
 * On pressing Settings button will lauch Settings Options
 * */
public void showSettingsAlert(){
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS is settings");

    // Setting Dialog Message
    alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int which) {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            mContext.startActivity(intent);
        }
    });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        dialog.cancel();
        }
    });

    // Showing Alert Message
    alertDialog.show();
}

@Override
public void onLocationChanged(Location location) {
}

@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
}
} 
```

**活动 -AndroidGPSTrackingActivity.java**

```
public class AndroidGPSTrackingActivity extends Activity {

Button btnShowLocation;

// GPSTracker class
GPSTracker gps;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnShowLocation = (Button) findViewById(R.id.btnShowLocation);

    // show location button click event
    btnShowLocation.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {        
            // create class object
            gps = new GPSTracker(AndroidGPSTrackingActivity.this);

            // check if GPS enabled     
            if(gps.canGetLocation()){

                double latitude = gps.getLatitude();
                double longitude = gps.getLongitude();

                // \n is for new line
                Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();    
            }else{
                // can't get location
                // GPS or Network is not enabled
                // Ask user to enable GPS/network in settings
                gps.showSettingsAlert();
            }

        }
    });
}
} 
```

**布局 - main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button android:id="@+id/btnShowLocation" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show Location"
        android:layout_centerVertical="true"
        android:layout_centerHorizontal="true"/>

</RelativeLayout>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />  
    <uses-permission android:name="android.permission.INTERNET" /> 
```

# python - Python。subprocess.Popen 截断第一个结果的第二步

> ID：16075992
> 
> 赞同：1
> 
> 时间：2013-04-18T06:30:28.890
> 
> 标签：python, linux, python-2.7, subprocess, chaining

在下面我的 python 脚本的片段中，我认为 temp2 不会等待 temp 完成运行，输出可能很大，但只是文本。这会从 temp 中截断结果（'out'），它会在中线停止。'out' from temp 工作正常，直到添加 temp 2。我尝试添加 time.wait() 以及 subprocess.Popen.wait(temp)。这些都允许 temp 运行到完成，因此“out”不会被截断，但会破坏链接过程，因此没有“out2”。有任何想法吗？

```
temp = subprocess.Popen(call, stdout=subprocess.PIPE)
#time.wait(1)
#subprocess.Popen.wait(temp)
temp2 =  subprocess.Popen(call2, stdin=temp.stdout, stdout=subprocess.PIPE)
out, err = temp.communicate()
out2, err2 = temp2.communicate() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T04:15:53.747

根据[Python 文档](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate "Popen.communicate")， communicate() 可以接受要作为输入发送的流。如果您更改`stdin`为`temp2`并`subprocess.PIPE`放入`out`communicate()，则数据将正确传输。

```
#!/usr/bin/env python
import subprocess
import time

call = ["echo", "hello\nworld"]
call2 = ["grep", "w"]

temp = subprocess.Popen(call, stdout=subprocess.PIPE)

temp2 =  subprocess.Popen(call2, stdin=subprocess.PIPE, stdout=subprocess.PIPE)
out, err = temp.communicate()
out2, err2 = temp2.communicate(out)

print("Out:  {0!r}, Err:  {1!r}".format(out, err))
# Out:  b'hello\nworld\n', Err:  None
print("Out2: {0!r}, Err2: {1!r}".format(out2, err2))
# Out2: b'world\n', Err2: None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T00:25:30.003

在[文档中的“替换 shell 管道”部分](http://docs.python.org/2/library/subprocess.html#replacing-shell-pipeline)之后：

```
temp = subprocess.Popen(call, stdout=subprocess.PIPE)
temp2 =  subprocess.Popen(call2, stdin=temp.stdout, stdout=subprocess.PIPE)
temp.stdout.close()
out2 = temp2.communicate()[0] 
```

# android - 动态改变Custom PreferenceScreen的数据

> ID：16075996
> 
> 赞同：8
> 
> 时间：2013-04-18T06:30:48.343
> 
> 标签：android, android-preferences, preferencescreen

我正在处理自定义`PreferenceScreen`，我已经为设置页面创建了一个自定义屏幕，使用`PreferenceActivity`.

下面是我的偏好屏幕。

![在此处输入图像描述](https://i.stack.imgur.com/vupyA.png)

**问题：-** 我需要动态更改下载数据的徽章。我按照这个[问题](https://stackoverflow.com/questions/5334194/custom-preferencescreen-with-clickable-buttons)来实现这个布局。我已经尝试了该问题的所有答案，但没有单独的答案。

有没有其他方法可以找到内部偏好的视图？

**设置.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

<Preference android:title="@string/settings_user_profile" android:key="user_profile" android:summary="@string/settings_user_profile_desc" android:layout="@layout/setting_list"></Preference>
<Preference android:title="@string/settings_download" android:key="download_data" android:summary="@string/settings_download_desc" android:layout="@layout/setting_list"></Preference>
</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T07:11:05.557

您可以继承`Preference`、覆盖`onBindDialogView()`- 只需记住将 XML 从更改`<Preference...>`为包含您的包和类`<com.example.app.BadgedPreference...>`：

```
@Override
protected void onBindDialogView(View v) {
    super.onBindDialogView(v);
    Log.v( "onBindDialogView()", v.getClass().getSimpleName() );
} 
```

如果您`BadgedPreference`有处理更改的方法，则可以更轻松地使用它 - 从您的内部`PreferenceActivity`：

```
PreferenceScreen myPrefScreen = (PreferenceScreen)getPreferenceScreen();
BadgedPreference bp = (BadgedPreference)myPrefScreen.findPreference("download_data");
// Custom method
bp.setBadgeValue(12); 
```

更简单地说，您可以使用标准`Preference`，只需将其汇总字段设置为“徽章”，然后您可以使用包含的汇总字段设置值：

```
Preference pref = (Preference)myPrefScreen.findPreference("download_data");
pref.setSummary("12"); 
```

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:23:21.903

你可以实现`OnSharedPreferenceChangeListener` 这样的东西：

```
 @Override
  public void onResume() {
      super.onResume();

      // Set up a listener whenever a key changes
      getPreferenceScreen().getSharedPreferences()
         .registerOnSharedPreferenceChangeListener(this);        
  }

  @Override
  protected void onPause() {
       super.onPause();

      // Unregister the listener whenever a key changes
      getPreferenceScreen().getSharedPreferences()
         .unregisterOnSharedPreferenceChangeListener(this);
  }

  @Override
  public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
        String key) {

       //update summary  
       updatePrefsSummary(sharedPreferences, findPreference(key));
  } 
```

如果您使用标准首选项，您可以尝试这样的事情：

```
/**
 * Update summary
 * 
 * @param sharedPreferences
 * @param pref
 */
 protected void updatePrefsSummary(SharedPreferences sharedPreferences,
    Preference pref) {

if (pref == null)
    return;

if (pref instanceof ListPreference) {
    // List Preference
    ListPreference listPref = (ListPreference) pref;
    listPref.setSummary(listPref.getEntry());

} else if (pref instanceof EditTextPreference) {
    // EditPreference
    EditTextPreference editTextPref = (EditTextPreference) pref;
    editTextPref.setSummary(editTextPref.getText());

} else if (pref instanceof MultiSelectListPreference) {
    // MultiSelectList Preference
    MultiSelectListPreference mlistPref = (MultiSelectListPreference) pref;
    String summaryMListPref = "";
    String and = "";

    // Retrieve values
    Set<String> values = mlistPref.getValues();
    for (String value : values) {
        // For each value retrieve index
        int index = mlistPref.findIndexOfValue(value);
        // Retrieve entry from index
        CharSequence mEntry = index >= 0
                && mlistPref.getEntries() != null ? mlistPref
                .getEntries()[index] : null;
        if (mEntry != null) {
            // add summary
            summaryMListPref = summaryMListPref + and + mEntry;
            and = ";";
        }
    }
    // set summary
    mlistPref.setSummary(summaryMListPref);

} else if (pref instanceof RingtonePreference) {
    // RingtonePreference
    RingtonePreference rtPref = (RingtonePreference) pref;
    String uri;
    if (rtPref != null) {
        uri = sharedPreferences.getString(rtPref.getKey(), null);
        if (uri != null) {
            Ringtone ringtone = RingtoneManager.getRingtone(
                    getActivity(), Uri.parse(uri));
                pref.setSummary(ringtone.getTitle(getActivity()));
        }
    }

} 
```

}

如果你使用自定义偏好，你可以做任何事情，你可以覆盖 setSummary(int value)

```
@Override
public void setSummary(int value) {
   setSummary(String.valueOf(value)+" ...." );
} 
```

# selenium - 如果元素不存在，isElementPresent 会非常慢。

> ID：16075997
> 
> 赞同：21
> 
> 时间：2013-04-18T06:30:51.103
> 
> 标签：selenium, webdriver, selenium-webdriver

我正在使用下面的代码来检查我的网页上的元素

```
private boolean isElementPresent(By by) {
try {       
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
        return false;
    }
    catch (Exception e)
    {       
        return false;
    }

  } 
```

如果特定区域出现在结果中，我需要检查我的程序，如下所示

```
isElementPresent(By.xpath(".//*[@id='header']"))); 
```

如果存在此功能，则此功能将快速完成，但如果不存在上述功能，则它会运行很长时间。

有人可以帮我解决这个问题，以便可以快速执行此检查吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-18T09:20:13.677

在这里你错过了一些东西，这就是为什么它在等待如果没有元素。findElement 将等待一个元素隐式指定的时间。因此需要在该方法中将该时间设置为零。

```
isElementPresent(WebDriver driver, By by) {  
    driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);  
    try {  
        driver.findElement(by);  
        return true;  
    } catch (NoSuchElementException e) {  
        return false;  
    } finally {  
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);  
    }  
} 
```

这里发生了 4 件重要的事情。为了：

1.  将implicity_wait 设置为0，这样WebDriver 就不会隐式等待。

2.  找到元素时返回 True。

3.  当我们发现该元素不存在时捕获 NoSuchElementException 并返回 False，而不是用异常停止测试。

4.  操作完成后将 implicitly_wait 设置回 30，以便 WebDriver 将来隐式等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:53:06.230

显然，发送异常的时间很长，因为您的 DOM 很大，而且 xpath 不是获取元素的最快方法。但是，如果您想使用 xpath，请尝试放置最佳路径并避免使用子字符串检查的那种功能。

您的实际 xpath :`.//*[@id='header']`需要很长时间，因为您检查了 DOM 的所有标签。因此，如果放置您要查找的标签，例如：您想要捕获输入。你的 xpath 应该这样开始，`//input[@id='1234']`它会比查看所有标签更短。

# java - LDAP 密码重置，但我没有来自 Java 应用程序的旧密码

> ID：16075999
> 
> 赞同：1
> 
> 时间：2013-04-18T06:30:57.460
> 
> 标签：java, ldap, opends

我想添加代码来帮助我重置 LDAP 用户密码，但是当我搜索时，我必须拥有旧密码才能重置并添加新密码。如果没有旧密码，我怎么能重置密码。

我查看了该链接，但它以解决方案结束，其中包含使用旧密码 [LDAP 更改 Active Directory 上的用户密码](https://stackoverflow.com/questions/11178481/ldap-changing-user-password-on-active-directory)

```
final Modification _delete_old_modification = new Modification(ModificationType.DELETE, "unicodePwd", ('"' + oldPassword + '"').getBytes("UTF-16LE"));
final Modification _add_new_modification = new Modification(ModificationType.ADD, "unicodePwd", ('"' + newPassword + '"').getBytes("UTF-16LE")); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T01:24:29.410

去掉第一行，将第二行的修改类型改为REPLACE。