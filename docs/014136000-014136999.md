# StackOverflow 问答 14136000-14136999

# c# - 将密码/字符串发送到外部控制台应用程序 C#

> ID：14136002
> 
> 赞同：3
> 
> 时间：2013-01-03T09:21:44.987
> 
> 标签：c#, process, console, pipe, prompt

我需要从 C# 自动化外部 Windows 控制台应用程序。应用程序基本上是与外部设备的接口。当我调用应用程序时，它会要求我进行身份验证，即输入密码并提示“输入密码：”。现在没有办法将此应用程序配置为在没有交互式密码提示的情况下运行。

因此，我想通过在提示时发送密码然后触发将在外部设备上执行然后获取输出的命令来从 C# 中自动执行相同的操作。我知道进程类，并且我有一些指针，比如我可以为此目的使用管道（不确定？）。

因为在我寻求帮助/指导之前，我还没有处理过这种自动化。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T09:51:07.880

这样做的方法是使用重定向成员，例如[ProcessStartInfo.RedirectStandardInput 属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardinput.aspx)

```
 Process myProcess = new Process();

     myProcess.StartInfo.FileName = "someconsoleapp.exe";
     myProcess.StartInfo.UseShellExecute = false;
     myProcess.StartInfo.RedirectStandardInput = true;
     myProcess.StartInfo.RedirectStandardOutput = true;
     myProcess.StartInfo.ErrorDialog = false;

     myProcess.Start();

     StreamWriter stdInputWriter  = myProcess.StandardInput;
     StreamReader stdOutputReader  = myProcess.StandardOutput;

     stdInputWriter.WriteLine(password);

     var op = stdOutputReader.ReadLine();

     // close this - sending EOF to the console application - hopefully well written
     // to handle this properly.
     stdInputWriter.Close();

     // Wait for the process to finish.
     myProcess.WaitForExit();
     myProcess.Close(); 
```

# wordpress - wordpress 电子商务插件上的 Authorize.net 支付网关

> ID：14136003
> 
> 赞同：2
> 
> 时间：2013-01-03T09:21:47.883
> 
> 标签：wordpress, e-commerce

wordpress 电子商务插件是否有 authorize.net 支付网关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T14:02:58.200

[是的，WordPress 电子商务插件有一个 Authorize.Net 支付网关集成模块，如果您使用来自 codecanyon 的以下 WP 电子商务 Authorize.Net 模块](http://codecanyon.net/item/wp-ecommerce-authorizenet/4494116)，则不需要金车。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:23:06.573

是的，但您还需要为此安装[黄金购物车插件](http://getshopped.org/premium-upgrades/premium-plugin/gold-cart-plugin/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T02:41:55.897

有几个支持 Authorize.net 的插件可用，但是，它们并不都支持相同的接口。Authorize.net 提供以下 API

SIM = 简单集成方法
AIM = 高级集成方法
ARB = 自动定期计费
CIM = 客户信息管理器

除了第一个要求您还在您的站点上安装安全证书以加密信用卡通信或检查详细信息。第一个选项 SIM 将用户发送到 Authorize.net 的网站以完成付款，因此这是在他们的安全连接上。

插件中不太可能支持 CIM，因为它用于更高级的电子商务功能，而 wordpress 无论如何都不适合它们。

您可以在目录中找到一些免费选项： [http ://wordpress.org/extend/plugins/search.php?q=ecommerce](http://wordpress.org/extend/plugins/search.php?q=ecommerce)

您还可以选择商业选项，例如：
[http ://simplecreditcardpayments.com/](http://simplecreditcardpayments.com/)

以下是有关如何在您的 wordpress 博客上获取 SSL 以支持 Authorize.net [http://www.youtube.com/watch?v=8F8iPxs4naY的详细信息](http://www.youtube.com/watch?v=8F8iPxs4naY)

# java - 异步猪作业提交

> ID：14136006
> 
> 赞同：0
> 
> 时间：2013-01-03T09:22:09.527
> 
> 标签：java, hadoop, apache-pig, oozie

我在 Java 中动态生成一些 Pig 查询并使用 PigServer 类执行相同的查询。有什么方法可以异步提交作业，然后轮询/挂钩以完成作业？另外，如果 pig 不允许，我可以使用 Oozie 和 Java Action 来实现所需的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:59:12.760

您可以使用 OOZIE 中的[fork 和 join 控制节点](http://oozie.apache.org/docs/3.2.0-incubating/WorkflowFunctionalSpec.html#a3.1.5_Fork_and_Join_Control_Nodes)来并行运行作业。

如果您只想更改 Pig 脚本的某些属性以运行（您可以使用模板变量 - 请参阅[oozie pig 操作](http://oozie.apache.org/docs/3.2.0-incubating/WorkflowFunctionalSpec.html#a3.2.3_Pig_Action)文档），则执行动态代码很容易。但是，如果动态是指动态构建不同的代码路径，那么在调用 pig 操作之前，您需要一个自定义 Java 操作将 pig 脚本写入 HDFS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:49:29.267

首先正确发布您的查询。上面的描述没有很好的解释。如果你想在java中异步运行任何作业，你应该使用线程编程。有一个很好的apache框架叫做“quartz-scheduler”可以完成这个任务。它是开源的。参考这个链接。

[http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/)

# wordpress - 包含子项和帖子的自定义分类列表，不起作用

> ID：14136007
> 
> 赞同：1
> 
> 时间：2013-01-03T09:22:13.290
> 
> 标签：wordpress, taxonomy

我有这段代码可以正常工作，但问题在于显示数据的顺序。现在，当您检查子类别位置时，它几乎没有混乱并且帖子重复。我可以做些什么来显示一个类别树，其中每个类别和子类别中都包含帖子，例如：

```
<h1>Prime Category 1</h1>
    <ul>
        <li>Post 1</li>
        <li>Post 2</li>
        <li>...</li>
    </ul>
<h2>Sub Category 1</h2> 
    <ul>
        <li>Post 1</li>
        <li> Post 2</li>
        <li>...</li>
    </ul>
<h2>Sub Category 2</h2> 
    <ul>
        <li>Post 1</li>
        <li> ...</li>
    </ul>
<h1>Prime Category 2</h1>
<h2>Sub Category</h2> 
    <ul>
        <li>Post 1</li>
        <li> ...</li>
    </ul>
<h2>Sub Category</h2> 
    <ul>
        <li>Post 1</li>
        <li> ...</li>
    </ul> 
```

这是我的代码

```
<?php
    $post_type = 'biblioteka';
    $tax = 'kategoria-pozycji';
    $tax_terms = get_terms( $tax );
    if ($tax_terms) {
        foreach ($tax_terms  as $tax_term) {

        $args = array(

            'post_type' => $post_type,
            'child_of' => $tax_term->term_id,
            "$tax" => $tax_term->slug,
            'post_status' => 'publish',
                'posts_per_page' => 2,
            'hierarchical' => true,
            'caller_get_posts'=> 1);

        $my_query = null;
        $my_query = new WP_Query($args);

     if( $my_query->have_posts() ) : ?>

        <h1><?php echo $tax_term->name; ?></h1>

        <ul>
        <?php while ( $my_query->have_posts() ) : $my_query->the_post(); ?>

            <li id="post-<?php the_ID(); ?>">
        <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
            </li>

        <?php endwhile; ?>

        </ul>

    <?php else : ?>
    <?php endif; wp_reset_query();
            }
        }
    ?> 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:32:15.013

感谢大家的帮助......这是有效的解决方案：

```
<?php

$args=array(
'post_type'                => 'biblioteka',
'child_of'                 => 0,
'parent'                   => '',
'orderby'                  => 'name',
'order'                    => 'ASC',
'hide_empty'               => 1,
'hierarchical'             => 1,
'exclude'                  => '',
'include'                  => '',
'number'                   => '',
'taxonomy'                 => 'kategoria-pozycji',
'pad_counts'               => false
);

$categories=get_categories($args);

foreach ( $categories as $category ) {

if ( $category->parent > 0 ) {
    continue;   
}

echo '<h1 style="font-weight:bold">' . $category->name . '</h1>';

    $querystr = "SELECT $wpdb->posts.*
                  FROM $wpdb->posts, $wpdb->term_relationships, $wpdb->terms
                  WHERE term_id = (" . $category->cat_ID . ")
                  AND term_taxonomy_id = (" . $category->term_taxonomy_id . ")
                  AND ID = object_id
                  AND post_type = 'biblioteka'
                  AND post_status = 'publish'
                  ORDER BY post_date DESC";
    $posts = $wpdb->get_results($querystr, OBJECT);

    echo '<ul>';
        foreach ( $posts as $post ) {
            setup_postdata($post);  

                echo '<li>'; the_title();   echo '</li>';

                }
    echo '</ul>';

$categories2 = get_terms('kategoria-pozycji',array('parent' => $category->term_id , 'hide_empty'=> '0' ));

foreach ( $categories2 as $category ) {

echo '<h2>' . $category->name . '</h2>';

$posts = get_posts( array( 'kategoria-pozycji' => $category->name, 'post_type' => 'biblioteka' ) );  

    echo '<ul>';
        foreach($posts as $post) { 
            setup_postdata($post);  

                echo '<li>'; the_title();   echo '</li>';

                }
    echo '</ul>';

}
}

?> 
```

# mysql - SQL：帮我在 1 -> N -> N 关系中选择记录

> ID：14136008
> 
> 赞同：0
> 
> 时间：2013-01-03T09:22:18.087
> 
> 标签：mysql, sql

我有客户 客户可以有 N 个交付 每个交付可以有 N 个短信

Delivery 有 client_id Sms 作为 Delivery_id

我想从短信表中检索所有短信，但每个客户最多 10 条短信。

这是因为“短信”是要发送的短信队列。所以我想最初以这种简单的方式保持平衡，从每个客户端发送的短信的分布。

有没有办法只使用 SQL 来完成这个？

如果我加入客户发送到短信...如何为每个客户只选择十个短信？

我正在将 MYSQL 与 InnoDb 一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:29:44.767

这在mysql中并不容易做到。这个 SO question 有一些可能有用的答案：

[MySQL 中的 ROW_NUMBER()](https://stackoverflow.com/questions/1895110/row-number-in-mysql)

特别是，文章[http://www.explodybits.com/2011/11/mysql-row-number/](http://www.explodybits.com/2011/11/mysql-row-number/)应该会有所帮助。

如果它对其他人有帮助，对于 SQL Server（2005 或更高版本），可以这样做：

```
WITH
ClientSms AS
(
  SELECT
    Client.Client_id,
    Sms.Content,
    ROW_NUMBER() OVER
    (
      PARTITION BY Client.Client_id
      ORDER BY Sms.Content
    ) AS RowNumber
  FROM Client
    INNER JOIN Delivery ON Delivery.Client_id = Client.Client_id
    INNER JOIN Sms ON Sms.Delivery_id = Delivery.Delivery_id
)
SELECT
    Client.Client_id,
    Sms.Content
FROM ClientSms
WHERE RowNumber <= 10
ORDER BY
    Client.Client_id,
    Sms.Content 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:27:11.930

编辑：我再次尝试，这次使用 MySQL 并使用 Fiddle 进行测试。代码很脏，我认为你可以在没有一些 SELECT 的情况下做到这一点，但这是我想出的伪造行数的方法。希望它是有帮助的。

```
SELECT * 
FROM (
    SELECT
        (SELECT COUNT(*)
         FROM (
           SELECT s.smsid, c.clientid
           FROM sms s INNER JOIN delivery d ON d.deliveryid = s.deliveryid
                      INNER JOIN client c ON c.clientid = d.clientid
         ) AS numberedSMS
         WHERE numberedSMS.smsid <= numberedSMS2.smsid 
               AND
               numberedSMS.clientid = numberedSMS2.clientid) AS rowNum,
        smsid AS smsid
    FROM (
           SELECT smsid, c.clientid
           FROM sms s INNER JOIN delivery d ON d.deliveryid = s.deliveryid
                      INNER JOIN client c ON c.clientid = d.clientid
         ) numberedSMS2
    ORDER BY numberedSMS2.smsid asc 
      ) as r
WHERE r.ROWNUM <= 10 
```

这里有[SQLFiddle 代码](http://sqlfiddle.com/#!2/2c115/24)

# blackberry-10 - 如何在黑莓 10 级联 qml 中获取列表视图行数？

> ID：14136011
> 
> 赞同：0
> 
> 时间：2013-01-03T09:22:30.350
> 
> 标签：blackberry-10, blackberry-cascades

我需要在列表视图 blackberry 10 cascades 中获取行数`qml`吗？列表视图数据源模型类型为`json`. 我试过这个

```
ListItem.initialized ? ListItem.view.dataModel.childCount(ListItem.indexPath) : 0 
```

但即使列表视图行数超过 1，它也只显示 0。

我的代码

```
dataModel: groupdatamodel 
listItemComponents: [ 
    ListItemComponent { 
        type: "header" 

        Container { 
            preferredWidth: 748 
            layout: DockLayout { }

            Label {
                text: "Title" 
                base: SystemDefaults.TextStyles.TitleText
                fontWeight: FontWeight.Bold
            }
        }

        Label { 
            id: subtitle 
            text: groupdatamodel.size() + "Items"

            textStyle { 
                base: SystemDefaults.TextStyles.SmallText 
                fontWeight: FontWeight.Bold
        } 
    }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T08:50:12.270

1.  主.qml

    ```
    import bb.cascades 1.0
    import bb.data 1.0

    Page {
        content: Container {
            Label {
                text: "List View with json parsing"
            }
            ListView {
                id: listViewDemo
                dataModel: GroupDataModel {
                    grouping: ItemGrouping.None
                }
                listItemComponents: [
                    ListItemComponent {
                        type: "listItem"
                        StandardListItem {
                            title: ListItemData.ThumnailImage
                            description: ListItemData.CategoryID
                        }
                    }
                ]
                function itemType(data, indexPath) {
                    return "listItem";
                }
            }
        }
        attachedObjects: [
            DataSource {
                id: serviceDataSource
                source: "contacts.json"
                type: DataSourceType.Json
                onDataLoaded: {
                    listViewDemo.dataModel.clear();
                    listViewDemo.dataModel.insertList(data)
                }
            }
        ]
        onCreationCompleted: {
            serviceDataSource.load();
        }
    } 
    ```

2.  联系人.json

    ```
    [   {"CategoryID":"3","CategoryName":"News","CountryID":"1","Result":"OK"}, 
    ```

    `{"CategoryID":"4","CategoryName":"Daily Paper","CountryID":"1","Result":"OK"},{"CategoryID":"5","CategoryName":"Thanthi","CountryID":"1","Result":"OK"}, {"CategoryID":"1","CategoryName":"Newspaper","CountryID":"1","Result":"OK"}, {"CategoryID":"2","CategoryName":"Magazine","CountryID":"1","Result":"OK"} ]`

3.  主文件

在主文件中添加以下行

```
#include <bb/data/DataSource>
#include <bb/data/JsonDataAccess>

Q_DECL_EXPORT int main(int argc, char **argv)
{
    // We want to use DataSource in QML
    bb::data::DataSource::registerQmlTypes(); 
```

4.文件名.PRO

LIBS += -lbbdata

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T11:30:57.850

you can use:

```
your_groupdatamodel.size().toString(); 
```

or

```
your_groupdatamodel.childCount(0); 
```

in javascript code.

J.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:45:10.973

我在我的项目中使用此代码，它工作正常：

```
 console.log("pcs count" + pcsListModel.childCount(0)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T19:18:14.480

DataModel::childCount(ListItem indexPath) 返回由 indexPath 指定的列表中项目的子项计数，而不是数据模型中的数据项计数（因此可用于列表）。您需要询问实际的数据模型。例如 GroupDataModel::size() 返回 GroupDataModel 中的项目数，与 QListDataModel 类似。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-03T07:43:39.930

除非您使用自定义数据模型，否则无法在标签中添加自定义元素。

# asp.net - 从文本文件批量插入 MS SQL

> ID：14136013
> 
> 赞同：0
> 
> 时间：2013-01-03T09:22:36.513
> 
> 标签：asp.net, sql-server, c#-4.0, insert, database

我有一个包含大约 21 个 lac 条目的文本文件，我想将所有这些条目插入一个表中。最初我在 c# 中创建了一个函数，它逐行读取并插入到表中，但这需要太多时间。请建议一种插入这些批量数据的有效方法，并且该文件包含 TAB（4 个空格）作为分隔符。
该文本文件还包含一些重复的条目，我不想插入这些条目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:25:24.423

将所有数据加载到一个`DataTable`对象中，然后用于`SqlBulkCopy`批量插入它们：

```
DataTable dtData = new DataTable("Data");

// load your data here

using (SqlConnection dbConn = new SqlConnection("db conn string"))
{
    dbConn.Open();

    using (SqlTransaction dbTrans = dbConn.BeginTransaction())
    {
        try
        {
            using (SqlBulkCopy dbBulkCopy = new SqlBulkCopy(dbConn, SqlBulkCopyOptions.Default, dbTrans))
            {
                dbBulkCopy.DestinationTableName = "intended SQL table name";
                dbBulkCopy.WriteToServer(dtData );
            }

            dbTrans.Commit();
        }
        catch
        {
            dbTrans.Rollback();
            throw;
        }
    }

    dbConn.Close();
} 
```

我已经包含了将其包装到 a 中的示例，`SqlTransaction`因此如果在此过程中出现故障，将会完全回滚。为了帮助您入门，[这里有一篇很好的 CodeProject 文章](http://www.codeproject.com/Articles/6737/Fill-a-DataSet-from-delimited-text-files)，介绍了将分隔数据加载到`DataSet`对象中。

**加载前清理数据**

好的，我认为您的数据如下所示：

```
CC_FIPS    FULL_NAME_ND 
AN         Xixerella
AN         Vila 
AN         Sornas
AN         Soldeu
AN         Sispony
... (cut down for brevity) 
```

在这种情况下，您想创建`DataTable`这样的：

```
DataTable dtData = new DataTable("Data");
dtData.Columns.Add("CC_FIPS");
dtData.Columns.Add("FULL_NAME_ND"); 
```

然后你想迭代每一行（假设你的制表符分隔的数据由回车逐行分隔）并检查该数据是否已经存在于`DataTable`使用`.Select`方法中以及是否存在匹配项（我正在检查两个值，是否要执行其他操作取决于您）然后不要添加它，从而防止重复。

```
using (FileStream fs = new FileStream("path to your file", FileMode.Open, FileAccess.Read))
{
    int rowIndex = 0;
    using (StreamReader sr = new StreamReader(fs))
    {
        string line = string.Empty;
        while (!sr.EndOfStream)
        {
            line = sr.ReadLine();

            // use a row index to skip the header row as you don't want to insert CC_FIPS and FULL_NAME_ND
            if (rowIndex > 0)
            {
                // split your data up into a 2-d array tab delimited
                string[] parts = line.Split('\t');

                // now check whether this data has already been added to the datatable
                DataRow[] rows = dtData.Select("CC_FIPS = '" + parts[0] + "' and FULL_NAME_ND = '" + parts[1] + "'");
                if (rows.Length == 0)
                {
                    // if there're no rows, then the data doesn't exist so add it
                    DataRow nr = dtData.NewRow();
                    nr["CC_FIPS"] = parts[0];
                    nr["FULL_NAME_ND"] = parts[1];
                    dtData.Rows.Add(nr);
                }
            }

            rowIndex++;
        }
    }
} 
```

在此结束时，您应该有一个`DataTable`可以批量插入的消毒。请注意，此代码未经测试，但它是您应该如何做的最佳猜测。有很多方法可以做到这一点，并且可能比这种方法（特别是 LINQ）要好得多——但这是一个起点。

# android - Spring 和 Jackson Mapper 无法从 START_OBJECT 中反序列化 CUSTOM_CLASS 的实例

> ID：14136017
> 
> 赞同：1
> 
> 时间：2013-01-03T09:22:55.980
> 
> 标签：android, spring, spring-mvc, resttemplate

所以我在标题中收到错误，我正在使用以下代码：

...

```
RestTemplate restTemplate = new RestTemplate();

restTemplate.getMessageConverters().add(
        new MappingJacksonHttpMessageConverter());

String url = "w/ever";
List<Teacher> teachers = (List<Teacher>) restTemplate.getForObject(
        url, List.class); 
```

...

我的教师课看起来像：

```
import java.io.Serializable;
import java.util.HashSet;
import java.util.Set;

/**
 * Teacher generated by hbm2java
 */
public class Teacher implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private Integer id;
    private ClassGroup classGroup;
    // private Users users;
    private String lastName;
    private boolean admin;
    private String telephoneNo;
    private String address;
    private String email;
    private String firstName;
    private Set<SubjectTeacherForClass> subjectteacherforclasses = new HashSet<SubjectTeacherForClass>(
            0);

    public Teacher() {
    }

    public Teacher(String lastName, boolean admin, String email,
            String firstName) {
        // this.users = users;
        this.lastName = lastName;
        this.admin = admin;
        this.email = email;
        this.firstName = firstName;
    }

    public Teacher(ClassGroup classGroup, String lastName, boolean admin,
            String telephoneNo, String address, String email, String firstName,
            Set<SubjectTeacherForClass> subjectteacherforclasses) {
        this.classGroup = classGroup;
        // this.users = users;
        this.lastName = lastName;
        this.admin = admin;
        this.telephoneNo = telephoneNo;
        this.address = address;
        this.email = email;
        this.firstName = firstName;
        this.subjectteacherforclasses = subjectteacherforclasses;
    }

    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public ClassGroup getClassgroup() {
        return this.classGroup;
    }

    public void setClassgroup(ClassGroup classGroup) {
        this.classGroup = classGroup;
    }

    /*
     * @ManyToOne(fetch = FetchType.LAZY)
     * 
     * @JoinColumn(name = "UserId", nullable = false) public Users getUsers() {
     * return this.users; }
     * 
     * public void setUsers(Users users) { this.users = users; }
     */

    public String getLastName() {
        return this.lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public boolean isAdmin() {
        return this.admin;
    }

    public void setAdmin(boolean admin) {
        this.admin = admin;
    }

    public String getTelephoneNo() {
        return this.telephoneNo;
    }

    public void setTelephoneNo(String telephoneNo) {
        this.telephoneNo = telephoneNo;
    }

    public String getAddress() {
        return this.address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public String getEmail() {
        return this.email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getFirstName() {
        return this.firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public Set<SubjectTeacherForClass> getSubjectteacherforclasses() {
        return this.subjectteacherforclasses;
    }

    public void setSubjectteacherforclasses(
            Set<SubjectTeacherForClass> subjectteacherforclasses) {
        this.subjectteacherforclasses = subjectteacherforclasses;
    }

} 
```

我的反应看起来像

```
{

    "teacherList": [
        {
            "id": 1,
            "lastName": "Corega",
            "admin": true,
            "telephoneNo": "333333",
            "address": "str Albinii 45",
            "email": "sscac@yahoo.com",
            "firstName": "Constantin"
        },
        {
            "id": 2,
            "lastName": "Cotul",
            "admin": false,
            "telephoneNo": "333333",
            "address": "str Dorobanti 21",
            "email": "ascasa@gmail.com",
            "firstName": "Monica"
        },
        {
            "id": 3,
            "lastName": "Ramona",
            "admin": false,
            "telephoneNo": "333333",
            "address": "str. Izlazului 78",
            "email": "asc@yahoo.com",
            "firstName": "Calina"
        },
        {
            "id": 4,
            "lastName": "Cruceriu",
            "admin": false,
            "telephoneNo": "333333",
            "address": "str Muresului 92",
            "email": "c2c2@gmail.com",
            "firstName": "Alexandrina"
        },
        {
            "id": 5,
            "lastName": "Moldovan",
            "admin": false,
            "telephoneNo": "333333",
            "address": "str Fabricii 56",
            "email": "casca@yahoo.com",
            "firstName": "Camelia"
        }
    ]

} 
```

我得到的例外是：

```
01-03 11:18:32.809: E/AndroidRuntime(16203): FATAL EXCEPTION: AsyncTask #1
01-03 11:18:32.809: E/AndroidRuntime(16203): java.lang.RuntimeException: An error occured while executing doInBackground()
01-03 11:18:32.809: E/AndroidRuntime(16203):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at java.lang.Thread.run(Thread.java:856)
01-03 11:18:32.809: E/AndroidRuntime(16203): Caused by: org.springframework.http.converter.HttpMessageNotReadableException: Could not read JSON: Can not deserialize instance of java.util.ArrayList out of START_OBJECT token
01-03 11:18:32.809: E/AndroidRuntime(16203):  at [Source: libcore.net.http.ChunkedInputStream@417f4378; line: 1, column: 1]; nested exception is org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.util.ArrayList out of START_OBJECT token
01-03 11:18:32.809: E/AndroidRuntime(16203):  at [Source: libcore.net.http.ChunkedInputStream@417f4378; line: 1, column: 1]
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:127)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:147)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:76)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:483)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:438)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:236)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at com.catalog.views.MenuActivity$isConnectedTask.doInBackground(MenuActivity.java:176)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at com.catalog.views.MenuActivity$isConnectedTask.doInBackground(MenuActivity.java:1)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-03 11:18:32.809: E/AndroidRuntime(16203):    ... 4 more
01-03 11:18:32.809: E/AndroidRuntime(16203): Caused by: org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.util.ArrayList out of START_OBJECT token
01-03 11:18:32.809: E/AndroidRuntime(16203):  at [Source: libcore.net.http.ChunkedInputStream@417f4378; line: 1, column: 1]
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:219)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:212)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.handleNonArray(CollectionDeserializer.java:246)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:204)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:194)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:30)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2732)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1923)
01-03 11:18:32.809: E/AndroidRuntime(16203):    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:124) 
```

我对映射器的 Maven 依赖项是：

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-core-asl</artifactId>
    <version>1.9.9</version>
</dependency>
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-asl</artifactId>
    <version>1.9.9</version>
</dependency> 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-23T12:08:41.133

固定的 ！我所做的是创建一个类，它只有一个名为“teacherList”的教师 ArrayList 以及该数组列表的 getter 和 setter。把它放在请求中，瞧。从那里开始一切都很美好！

# build-automation - Sublime Text 2：构建系统自定义选择器

> ID：14136024
> 
> 赞同：8
> 
> 时间：2013-01-03T09:23:12.220
> 
> 标签：build-automation, sublimetext2

如何在构建系统中使用没有可用选择器（如等）的自定义扩展名（如等）定义`*.ltx`选择器？`*.cmake``text.tex.latex``source.c++`

是否可以？如果是 - 如何？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T17:32:23.610

如果您定义一个新的语法定义（即，一个新的 .tmLanguage 文件），这是可能的。语法定义可以声明新的“范围名称”，然后您可以在新的自定义构建系统中使用它们。

新的语法定义文件实际上不必定义/匹配文件的语法，因为您可以简单地通过文件扩展名进行匹配......！

[在此处查看](http://docs.sublimetext.info/en/latest/extensibility/syntaxdefs.html#creating-a-new-syntax-definition).tmLanguage文件语法。“scopeName”项允许您命名新范围（即“text.tex.latex”等）。我将在下面通过一个示例。

* * *

我创建了一个定义新范围的新语法——它非常简单（就像 Sublime 中的大多数东西一样）：

*   在命令面板中，选择“包控制：安装包”
*   在包列表中，选择“PackageDev”
*   通过选择**工具 > 包 > 包开发 > 新语法定义来创建新的语法定义**
*   您的新语法定义将如下所示：

```
{ "name": "语法名称",
  "scopeName": "source.syntax_name",
  “文件类型”： [””]，
  “模式”：[
  ],
  “uuid”：“……”
}
```

... 将“语法名称”替换为描述性名称，将“source.syntax_name”替换为您的新范围名称，并填写“fileTypes”以包含一个或多个文件扩展名。例如：

`"fileTypes": ["tex", "ltx"]`

*   使用 Packages/User 下的“.JSON-tmLanguage”扩展名保存文件
*   选择**工具 > 构建系统 > 选择 Json 到 tmLanguage**
*   选择**工具 > 构建**

你完成了！任何恰好具有“fileTypes”中定义的扩展名之一的新文件都将激活“scopeName”范围。

您现在可以在新的构建系统文件中使用此范围（**工具 > 构建系统 > 新构建系统...**）

干杯!

# android - 尝试使用回收的位图 android.graphics.Bitmap

> ID：14136026
> 
> 赞同：3
> 
> 时间：2013-01-03T09:23:24.437
> 
> 标签：android

我在我的 .gif 文件中显示一个 .gif `activity A`。当用户按下一个按钮时，用户移动到`activity b`并且相同的 .gif 显示在那里，但我`android.graphics.Bitmap`在我的`activity b`.

我正在从 sd 卡显示 .gif 并且`onStop()`我也在设置to ，但`imageview`我无法解决这个问题。`activity a``null``activity A`

请在这种情况下提供帮助。

//日志猫

```
12-31 10:58:49.819: E/AndroidRuntime(20903): java.lang.RuntimeException: Canvas: trying to use a recycled bitmap android.graphics.Bitmap@405131c8
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.graphics.Canvas.throwIfRecycled(Canvas.java:955)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.graphics.Canvas.drawBitmap(Canvas.java:1044)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.graphics.drawable.BitmapDrawable.draw(BitmapDrawable.java:325)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.widget.ImageView.onDraw(ImageView.java:854)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.View.draw(View.java:6880)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.View.draw(View.java:6883)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.View.draw(View.java:6883)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.View.draw(View.java:6883)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1871)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewRoot.draw(ViewRoot.java:1542)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1269)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1883)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.os.Looper.loop(Looper.java:130)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at android.app.ActivityThread.main(ActivityThread.java:3737)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at java.lang.reflect.Method.invokeNative(Native Method)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at java.lang.reflect.Method.invoke(Method.java:507)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:894)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:652)
12-31 10:58:49.819: E/AndroidRuntime(20903):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T07:24:18.153

您可以在回收位图之前进行检查，例如：

```
if (img != null && !img.isRecycled()) 
{
 img.recycle(); 
 img = null;
 System.gc(); 
} 
```

这里的**img** 是位图。试试这个类型错误就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:55:32.797

Try to find references of usage of the method [recycle()](https://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29) in your code or in any library that you use. It indicates that someone is recycling a bitmap that is still being used which is not good. You can only safely call the recycle() method when you are absolutely sure that the given bitmap won't be necessary anymore.

It is usually a common problem when you are dealing with bitmap caches, not sure if that is your case.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-09T07:20:13.383

此处已提供解决方案：[画布：尝试在 android 中使用回收的位图 android.graphics.Bitmap](https://stackoverflow.com/questions/22129420/canvas-trying-to-use-a-recycled-bitmap-android-graphics-bitmap-in-android/57425077#57425077)

这个应该工作。否则，请查看链接以获取更多解决方案

```
if (mBitmap != null && !mBitmap.isRecycled()) {
    mBitmap.recycle();
    mBitmap = null; 
} 
```

# javascript - 在输入文本字段时设置单选按钮值

> ID：14136027
> 
> 赞同：1
> 
> 时间：2013-01-03T09:23:33.830
> 
> 标签：javascript, html, radio-button

我将以下代码用于我的单选按钮和日期字段

```
<input type="radio" name="datefilter" value="all" checked>All sessions<br>
<input type="radio" name="datefilter" value="after" >
Changes take effect on: 
<input type="text" name="date_filter" value="<? echo date('m-d-Y'); ?>"> 
```

当用户单击文本字段时，我希望选择值为“after”的单选按钮，以防忘记输入值。我是一个 php hack，但根本不知道 javascript。如果它会让它更容易，我绝对可以添加到无线电领域。

当用户选择文本字段时，已经运行了一个调用日期选择日历弹出窗口的 javascript 函数。不要想象那会

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:37:27.797

像这样添加一些jQuery：

[JSFiddle 上的示例页面](http://jsfiddle.net/b7JZX/1/)

代码：

```
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js">

        <script type="text/javascript">

            $(document).ready(function () {
                $('#date_filter').click(function () {
                    $("#after").attr('checked', true);
                });
            });

        </script>
    </head>
    <body>
        <input type="radio" name="datefilter" value="all" checked>All sessions<br>
        <input type="radio" id="after" name="datefilter" value="after">
        Changes take effect on: 
        <input type="text" id="date_filter" name="date_filter" value="2013-01-01">
    </body>
</html> 
```

# postgresql - 使用 ::date、::time 和间隔的 Postgresql 查询非常慢

> ID：14136028
> 
> 赞同：3
> 
> 时间：2013-01-03T09:23:42.550
> 
> 标签：postgresql

我有一个非常慢的 sql 查询：

```
 select number1 from mytable
        where symbol = 25
        and timeframe = 1
        and date::date = '2008-02-05'
        and date::time='10:40:00' + INTERVAL '30 minutes' 
```

目标是返回一个值，postgresql 需要 1.7 秒才能返回所需的值（总是一个值）。我需要为一项任务执行数百个这样的查询，所以这变得非常慢。执行相同的查询，但不使用interval和::date直接指向时间，::time只需要17ms：

```
 select number1 from mytable
    where symbol = 25
    and timeframe = 1
    and date = '2008-02-05 11:10:00' 
```

我认为如果我不使用 ::date 和 ::time 会更快，但是当我执行如下查询时：

```
 select number1 from mytable
    where symbol = 25
    and timeframe = 1
    and date = '2008-02-05 10:40:00' + interval '30 minutes' 
```

我收到一个 sql 错误 (22007)。我已经尝试了不同的变体，但如果不使用 ::date 和 ::time，我无法获得工作间隔。postgresql.org 上的日期/时间函数并没有帮助我。

该表有一个关于交易品种、时间范围、日期的多列索引。

有没有一种通过添加时间来执行查询的快速方法，或者有一个工作语法与我不必使用 ::date 和 ::time 的间隔？或者在使用这样的查询时我是否需要有一个特殊的索引？

Postgresql 版本是 9.2。

编辑：表格的格式是：日期=带有时区的时间戳，符号，时间范围=数字。

编辑 2：使用

```
select open from ohlc_dukascopy_bid
where symbol = 25
and timeframe = 1
and date = timestamp '2008-02-05 10:40:00' + interval '30' minute 
```

解释显示：

```
“在 mytable 上使用 mcbidindex 进行索引扫描（成本=0.00..116.03 行=1 宽度=7）”
" Index Cond: ((symbol = 25) AND (timeframe = 1) AND (date = '2008-02-05 11:10:00'::timestamp without time zone))"

```

时间现在大大加快：第一次运行 86 毫秒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T09:41:43.827

第一个版本不会在名为 的列上使用（常规）索引`date`。

您没有提供太多信息，但假设名为的列`date`具有数据类型 `timestamp`（而不是`date`），那么以下应该可以工作：

```
and date = timestamp '2008-02-05 10:40:00' + interval '30 minutes' 
```

这应该在名为的列上使用索引`date`（但前提是它实际上是 a`timestamp`而不是 a `date`）。它与您的基本相同，唯一的区别是显式时间戳文字（尽管 Postgres*也应该*理解`'2008-02-05 10:40:00'`为时间戳文字）。

您需要运行 an`explain`来确定它是否使用索引。

请：更改该列的名称。使用保留字作为标识符是一种不好的做法，而且它是一个非常可怕的名称，它并没有说明该列中存储了什么样的信息。是“开始日期”、“结束日期”、“截止日期”……？

# sql - SQL IN 语句需要永远加载

> ID：14136036
> 
> 赞同：2
> 
> 时间：2013-01-03T09:24:14.673
> 
> 标签：sql, tsql

有谁知道为什么下面的 SQL 语句需要永远加载？？？

```
select LE_ACNT_STKG.ID_PRD_RP
from       
    TR_LTM_PHY_CNT  
    inner join AS_ITM_STK   ON (AS_ITM_STK.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT
                            and AS_ITM_STK.ID_ITM = TR_LTM_PHY_CNT.ID_ITM)  
    inner join LE_ACNT_STKG ON (LE_ACNT_STKG.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT  
                            and LE_ACNT_STKG.ID_ITM = TR_LTM_PHY_CNT.ID_ITM)  
    inner JOIN AS_ITM       ON (AS_ITM.ID_ITM = AS_ITM_STK.ID_ITM and AS_ITM.ID_STR_RT = AS_ITM_STK.ID_STR_RT)  
    inner join LO_LCN       ON (LE_ACNT_STKG.ID_LCN = LO_LCN.ID_LCN) 
    INNER JOIN DO_CNT_PHY   on  TR_LTM_PHY_CNT.ID_DCM_PHY_CNT = DO_CNT_PHY.ID_DCM_PHY_CNT  
    INNER JOIN CO_EV        on (DO_CNT_PHY.ID_STR_RT         = CO_EV.ID_STR_RT  
                            and DO_CNT_PHY.ID_EV         = CO_EV.ID_EV)                                     
where   
    LE_ACNT_STKG.ID_PRD_RP >= 4792
    AND LE_ACNT_STKG.ID_PRD_RP <= 6693
    AND LE_ACNT_STKG.ID_PRD_RP IN (
                    SELECT TOP 1 LE_ACNT_STKG.ID_PRD_RP 
                    FROM LE_ACNT_STKG 
                    INNER JOIN CA_PRD_RP ON (LE_ACNT_STKG.ID_PRD_RP = CA_PRD_RP.ID_PRD_RP)
                    WHERE 
                        CA_PRD_RP.TY_PRD_RP = 'CD' AND
                        LE_ACNT_STKG.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT AND
                        LE_ACNT_STKG.ID_ITM = TR_LTM_PHY_CNT.ID_ITM AND
                        (
                          (CA_PRD_RP.TS_PRD_RP_STRT <= CO_EV.TS_EV_ACT_EF AND CA_PRD_RP.TS_PRD_RP_END  >= CO_EV.TS_EV_ACT_EF) 
                           OR --If we're in the latest period, which is still open
                          (CA_PRD_RP.TS_PRD_RP_STRT <= CO_EV.TS_EV_ACT_EF AND CA_PRD_RP.TS_PRD_RP_END  IS NULL) 
                           OR --if there isn't one for the current period, get the previous one
                          (CA_PRD_RP.TS_PRD_RP_END < CO_EV.TS_EV_ACT_EF)
                        )
                    ORDER BY
                        LE_ACNT_STKG.ID_PRD_RP DESC) 
```

我相信这是因为`IN()`子查询。当我取出该语句时，它的加载速度要快得多。如果是这种情况，我该怎么办？我尝试用 替换`IN`，`EXISTS`但返回的结果完全不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:19:41.247

我认为您可以像这样简单地使用 group by 查询：

```
select distinct SUB.ID_PRD_RP from (
  select CA_PRD_RP.ID_PRD_RP,MAX(LE_ACNT_STKG.ID_PRD_RP) AS ID_PRD_RP
  from       
      TR_LTM_PHY_CNT  
      inner join AS_ITM_STK   ON (AS_ITM_STK.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT
                  and AS_ITM_STK.ID_ITM = TR_LTM_PHY_CNT.ID_ITM)  
      inner join LE_ACNT_STKG ON (LE_ACNT_STKG.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT  
                  and LE_ACNT_STKG.ID_ITM = TR_LTM_PHY_CNT.ID_ITM)  
      inner JOIN AS_ITM       ON (AS_ITM.ID_ITM = AS_ITM_STK.ID_ITM and AS_ITM.ID_STR_RT = AS_ITM_STK.ID_STR_RT)  
      inner join LO_LCN       ON (LE_ACNT_STKG.ID_LCN = LO_LCN.ID_LCN) 
      INNER JOIN DO_CNT_PHY   on  TR_LTM_PHY_CNT.ID_DCM_PHY_CNT = DO_CNT_PHY.ID_DCM_PHY_CNT  
      INNER JOIN CO_EV        on (DO_CNT_PHY.ID_STR_RT = CO_EV.ID_STR_RT  
                  and DO_CNT_PHY.ID_EV = CO_EV.ID_EV)                                     
      INNER JOIN CA_PRD_RP ON (LE_ACNT_STKG.ID_PRD_RP = CA_PRD_RP.ID_PRD_RP)
  where   
      LE_ACNT_STKG.ID_PRD_RP >= 4792
      AND LE_ACNT_STKG.ID_PRD_RP <= 6693
      AND CA_PRD_RP.TY_PRD_RP = 'CD'
      AND (
      (CA_PRD_RP.TS_PRD_RP_STRT <= CO_EV.TS_EV_ACT_EF AND CA_PRD_RP.TS_PRD_RP_END  >= CO_EV.TS_EV_ACT_EF) 
        OR --If we're in the latest period, which is still open
      (CA_PRD_RP.TS_PRD_RP_STRT <= CO_EV.TS_EV_ACT_EF AND CA_PRD_RP.TS_PRD_RP_END  IS NULL) 
          OR --if there isn't one for the current period, get the previous one
      (CA_PRD_RP.TS_PRD_RP_END < CO_EV.TS_EV_ACT_EF)
    )
  GROUP BY
    CA_PRD_RP.ID_PRD_RP) SUB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:35:20.993

将子查询的结果转储到临时表中，然后将该临时表连接到主查询。

```
SELECT
    LE_ACNT_STKG.ID_PRD_RP
INTO
    #MyFirstTempTable
FROM
    LE_ACNT_STKG 
INNER JOIN
    CA_PRD_RP
    ON (LE_ACNT_STKG.ID_PRD_RP = CA_PRD_RP.ID_PRD_RP)
WHERE 
    CA_PRD_RP.TY_PRD_RP = 'CD' AND
    LE_ACNT_STKG.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT AND
    LE_ACNT_STKG.ID_ITM = TR_LTM_PHY_CNT.ID_ITM AND
    (
        (CA_PRD_RP.TS_PRD_RP_STRT <= CO_EV.TS_EV_ACT_EF AND CA_PRD_RP.TS_PRD_RP_END  >= CO_EV.TS_EV_ACT_EF) 
        OR --If we're in the latest period, which is still open
        (CA_PRD_RP.TS_PRD_RP_STRT <= CO_EV.TS_EV_ACT_EF AND CA_PRD_RP.TS_PRD_RP_END  IS NULL) 
        OR --if there isn't one for the current period, get the previous one
        (CA_PRD_RP.TS_PRD_RP_END < CO_EV.TS_EV_ACT_EF)
     ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:27:55.917

cipet huat 这样做，

```
select LE_ACNT_STKG.ID_PRD_RP
from       
    TR_LTM_PHY_CNT  
    inner join AS_ITM_STK   ON (AS_ITM_STK.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT
                            and AS_ITM_STK.ID_ITM = TR_LTM_PHY_CNT.ID_ITM)  
    inner join LE_ACNT_STKG ON (LE_ACNT_STKG.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT  
                            and LE_ACNT_STKG.ID_ITM = TR_LTM_PHY_CNT.ID_ITM)  
    inner JOIN AS_ITM       ON (AS_ITM.ID_ITM = AS_ITM_STK.ID_ITM and AS_ITM.ID_STR_RT = AS_ITM_STK.ID_STR_RT)  
    inner join LO_LCN       ON (LE_ACNT_STKG.ID_LCN = LO_LCN.ID_LCN) 
    INNER JOIN DO_CNT_PHY   on  TR_LTM_PHY_CNT.ID_DCM_PHY_CNT = DO_CNT_PHY.ID_DCM_PHY_CNT  
    INNER JOIN CO_EV        on (DO_CNT_PHY.ID_STR_RT         = CO_EV.ID_STR_RT  
                            and DO_CNT_PHY.ID_EV         = CO_EV.ID_EV)                                     
    inner join 
                    SELECT TOP 1 LE_ACNT_STKG.ID_PRD_RP 
                    FROM LE_ACNT_STKG 
                    INNER JOIN CA_PRD_RP ON (LE_ACNT_STKG.ID_PRD_RP = CA_PRD_RP.ID_PRD_RP)
                    WHERE 
                        CA_PRD_RP.TY_PRD_RP = 'CD' AND
                        LE_ACNT_STKG.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT AND
                        LE_ACNT_STKG.ID_ITM = TR_LTM_PHY_CNT.ID_ITM AND
                        (
                          (CA_PRD_RP.TS_PRD_RP_STRT <= CO_EV.TS_EV_ACT_EF AND CA_PRD_RP.TS_PRD_RP_END  >= CO_EV.TS_EV_ACT_EF) 
                           OR --If we're in the latest period, which is still open
                          (CA_PRD_RP.TS_PRD_RP_STRT <= CO_EV.TS_EV_ACT_EF AND CA_PRD_RP.TS_PRD_RP_END  IS NULL) 
                           OR --if there isn't one for the current period, get the previous one
                          (CA_PRD_RP.TS_PRD_RP_END < CO_EV.TS_EV_ACT_EF)
                        )
                    ORDER BY
                        LE_ACNT_STKG.ID_PRD_RP DESC) temp
   on temp.ID_PRD_RP = LE_ACNT_STKG.ID_PRD_RP
where   
    LE_ACNT_STKG.ID_PRD_RP >= 4792
    AND LE_ACNT_STKG.ID_PRD_RP <= 6693 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:42:58.073

可惜没有 DDL 很难测试，表名很糟糕 ^^ 这可能是朝着正确方向迈出的一步，但很难确定！

```
;WITH CTE0 AS
(
    SELECT   ID_PRD_RP  = TR.ID_STR_RT
            ,TR.ID_ITM
            ,ID_PRD_RP  = MAX(LE.ID_PRD_RP) 
    FROM LE_ACNT_STKG   LE 
    JOIN CA_PRD_RP      CA  ON LE.ID_PRD_RP = CA.ID_PRD_RP
    JOIN TR_LTM_PHY_CNT TR  ON TR.ID_STR_RT = LE.ID_STR_RT AND LE.ID_ITM = TR.ID_ITM
    JOIN DO_CNT_PHY     DO  ON  TR_LTM_PHY_CNT.ID_DCM_PHY_CNT = DO.ID_DCM_PHY_CNT
    JOIN CO_EV          CO  ON (DO.ID_STR_RT = CO.ID_STR_RT and DO.ID_EV = CO.ID_EV)
    WHERE CA_PRD_RP.TY_PRD_RP = 'CD' 
    AND (
            (CA.TS_PRD_RP_STRT <= CO.TS_EV_ACT_EF AND CA.TS_PRD_RP_END  >= CO.TS_EV_ACT_EF) 
            OR --If we're in the latest period, which is still open
            (CA.TS_PRD_RP_STRT <= CO.TS_EV_ACT_EF AND CA.TS_PRD_RP_END  IS NULL) 
            OR --if there isn't one for the current period, get the previous one
            (CA.TS_PRD_RP_END < CO.TS_EV_ACT_EF)
        )
    GROUP BY TR.ID_STR_RT, TR.ID_ITM
)
SELECT LE_ACNT_STKG.ID_PRD_RP
FROM TR_LTM_PHY_CNT  
JOIN AS_ITM_STK     ON (AS_ITM_STK.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT
                            and AS_ITM_STK.ID_ITM = TR_LTM_PHY_CNT.ID_ITM)  
join LE_ACNT_STKG   ON (LE_ACNT_STKG.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT and LE_ACNT_STKG.ID_ITM = TR_LTM_PHY_CNT.ID_ITM)  
JOIN AS_ITM         ON (AS_ITM.ID_ITM = AS_ITM_STK.ID_ITM and AS_ITM.ID_STR_RT = AS_ITM_STK.ID_STR_RT)  
join LO_LCN         ON (LE_ACNT_STKG.ID_LCN = LO_LCN.ID_LCN) 
JOIN DO_CNT_PHY     ON  TR_LTM_PHY_CNT.ID_DCM_PHY_CNT = DO_CNT_PHY.ID_DCM_PHY_CNT  
JOIN CO_EV          ON (DO_CNT_PHY.ID_STR_RT         = CO_EV.ID_STR_RT and DO_CNT_PHY.ID_EV = CO_EV.ID_EV)   
JOIN CTE0   CTE ON CTE.ID_PRD_RP =    LE_ACNT_STKG.ID_PRD_RP                               
WHERE LE_ACNT_STKG.ID_PRD_RP >= 4792
AND LE_ACNT_STKG.ID_PRD_RP <= 6693 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-03T10:38:14.017

inner join ( SELECT TOP 1 LE_ACNT_STKG.ID_PRD_RP FROM LE_ACNT_STKG INNER JOIN CA_PRD_RP ON (LE_ACNT_STKG.ID_PRD_RP = CA_PRD_RP.ID_PRD_RP) WHERE CA_PRD_RP.TY_PRD_RP = 'CD' AND LE_ACNT_STKG.ID_STR_RT = TR_LTM_PHY_CNT.ID_STR_RT AND LE_ACNT_STKG.ID_ITM = TR_LTM_PHY_CNT.ID_ITM AND ( (CA_PRD_RP.TS_PRD_RP_STRT <= CO_EV.TS_EV_ACT_EF AND CA_PRD_RP.TS_PRD_RP_END >= CO_EV.TS_EV_ACT_EF) 或 -- 如果我们处于最新的时期，该时期仍然开放 (CA_PRD_RP.TS_PRD_RP_STRT <= CO_EV.TS_EV_ACT_EF AND CA_PRD_RP.TS_PRD_RP_END 为空) 或 -- 如果没有't 一个当前周期，获取前一个 (CA_PRD_RP.TS_PRD_RP_END < CO_EV.TS_EV_ACT_EF) ) ORDER BY LE_ACNT_STKG.ID_PRD_RP DESC) ) temp.ID_PRD_RP = LE_ACNT_STKG.ID_PRD_RP

# jquery - Jquery 主题未添加到通过 ajax 加载的内容中

> ID：14136040
> 
> 赞同：0
> 
> 时间：2013-01-03T09:24:39.960
> 
> 标签：jquery, jquery-ui, themes

我正在使用 ajax 将“输入”元素加载到我的 html 页面中。虽然输入元素已经存在，但从 jquery 主题文件中获取 css 类，动态添加的元素没有使用相同的类。

任何解决方法？

# javascript - 使用 jquery 添加新 css 规则的最佳方法？

> ID：14136042
> 
> 赞同：9
> 
> 时间：2013-01-03T09:24:50.253
> 
> 标签：javascript, jquery, css

我在网页上动态插入一些 html（在我检测到来自用户的事件之后）。这个 html 需要一些 css 样式，我想知道使用 jQuery 最干净的方法是什么。我不是网站开发人员，所以我无法将这些规则添加到原始 css 中。

假设我已经插入了一些没有样式的 html，包括一个`formElement`类。我可以在我的文档中写一个新`<style>`块，例如：

```
my_html =  '<style type="text/css">';
my_html += '   .formElement {';
my_html += '       display: block;';
my_html += '       width: 240px;';
my_html += '       position: relative;';
my_html += '       padding: 4px 0;';
my_html += '   }';
my_html += '</style>';
my_html = $(my_html);
$('body').prepend(my_html); 
```

或者，我可以使用以下`css`方法：

```
$('.formElement').css({
    'display': 'block',
    'width': '240px',
    'position': 'relative',
    'padding': '4px 0'
}); 
```

哪种解决方案最好/最干净？

**编辑：**

由于我不能直接在 CSS 中添加规则，所以我会坚持使用`css`jQuery 的方法。其他一些相关问题也提供了解决方案：

*   [在运行时使用 jQuery 创建 CSS 规则/类](https://stackoverflow.com/questions/1212500/jquery-create-css-rule-class-runtime)
*   [使用 JavaScript 或 jQuery 更改 CSS 规则](https://stackoverflow.com/questions/13431116/changing-css-rules-using-javascript-or-jquery)

我不能真正使用 jQuery 插件，但如果可以，我肯定会使用[jQuery.Rule](http://flesler.blogspot.fr/2007/11/jqueryrule.html)

感谢大家的宝贵帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T09:28:17.437

不要将 css 和 js 混合在一起，特别是如果您的属性不包含计算值或动态值：只需定义一个 CSS 类

```
.mystyle {
    display: block;
    width: 240px;
    position: relative;
    padding: 4px 0;
} 
```

并设置类

```
$('.formElement').addClass('mystyle'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T09:26:14.457

这：

```
$('.formElement').css({
        'display': 'block',
        'width': '240px',
        'position': 'relative',
        'padding': '4px 0'
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T09:36:18.483

老实说，最好的方法可能都不是。如果我必须选择一个，jquery`css`方法将是我的选择，只是因为它更干净，但是，考虑这个替代方案以获得更好的性能和更清晰的代码：

创建 CSS 类以在需要时附加到您的元素。例如：

```
.formElementAlpha {  
  width:240px;
  padding:4px 0;
}
.formElementBravo {
  width:400px;
  height:50px;
  padding:20px 0;
  line-height:50px;
  font-size:30px;
} 
```

然后，使用 jquery，当你需要它时：

```
$('.formElement').addClass('formElementAlpha'); 
```

或者

```
$('.formElement[name="bigUsernameInput"]').addClass('formElementBravo'); 
```

`css`如果您需要根据某种用户交互或其他需要您使用 JavaScript 变量的值来确定您正在应用的样式的动态事件来修改特定元素，我会保留 jQuery方法。由于看起来您已经知道要如何设置它们的样式，因此让 CSS 来完成这项工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T09:26:54.910

你的第二个选择：

```
$('.formElement').css({
    'display': 'block',
    'width': '240px',
    'position': 'relative',
    'padding': '4px 0'
}); 
```

这是迄今为止最干净的解决方案！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-03T09:27:07.620

使用 jquery [.css(propertyName, value)](http://api.jquery.com/css/)

```
$('.formElement').css({
    'display': 'block',
    'width': '240px',
    'position': 'relative',
    'padding': '4px 0'
}); 
```

这是您提供的解决方案中最好的。

**但是**，我会去创建一个具有所有属性`yourCSS`的类，并将该类添加到该元素：

```
$('.formElement').addClass('yourCSS'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-28T14:35:02.917

HTML

```
<style id="customCSS"> ... </style> 
```

JS

```
my_html += '   .formElement {';
my_html += '       display: block;';
my_html += '       width: 240px;';
my_html += '       position: relative;';
my_html += '       padding: 4px 0;';
my_html += '   }';
$('#customCSS').html(my_html) 
```

# python - python-xbee 的 ser.send() 中的 frame_id 和 frame 字段是什么？

> ID：14136053
> 
> 赞同：1
> 
> 时间：2013-01-03T09:25:38.887
> 
> 标签：python, xbee

[python-xbee](http://code.google.com/p/python-xbee/)使得在 API 模式下处理 XBee 变得更容易。但是文档很短。谁能告诉我什么是`frame`和`frame_id`？我可以用：

```
ser.send('at', frame_id='A', command='IS') 
```

发送 IS 命令。也可以`frame_id='A'`替换为`frame='A'`or`'B'`或`'C'`。所以我只是想知道图书馆中的`frame`和`frame_id`代表什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:15:51.980

对稀疏的文档感到抱歉。我还没来得及改进它。

frame_id 是一个可选参数，可帮助匹配对相关请求的响应。提供帧 ID 时，该请求的响应消息将具有匹配的帧 ID。

例如，如果我想设计一个高吞吐量系统，我可能希望它异步响应事件。以这种方式，我可能想在 XBee 可能响应其中任何一个之前向 XBee 设备发出一系列请求。

通过在发送之前为每个请求分配一个临时唯一的帧 ID，系统可以等待并通过将帧 ID 字段与初始请求的分配帧 ID 匹配来对每个响应消息做出反应。

如果未提供帧 ID，则来自 XBee 的响应也将缺少帧 ID。

# ruby-on-rails - rails i18n，管理本地化的最佳方式

> ID：14136056
> 
> 赞同：0
> 
> 时间：2013-01-03T09:25:52.133
> 
> 标签：ruby-on-rails, localization, internationalization, ruby-on-rails-3.2

我正在使用[http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)进行本地化。看起来更新本地化的唯一解决方案是更新 yml 文件。可能有一些解决方案或宝石增加了通过应用程序更新本地化的能力。例如，我们可以包含一些 gem 并从我们的应用程序中更新本地化文件。有一些解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:28:20.077

看看[全球化 3](https://github.com/svenfuchs/globalize3)。它将翻译/本地化数据存储在数据库中。还有一个 gem 可以将它与[ActiveAdmin](https://github.com/stefanoverna/activeadmin-globalize3)连接起来。

此外，当您使用它时，不要错过指南中提到的[rails-i18n gem。](https://github.com/svenfuchs/rails-i18n)它将 Rails 本身翻译成多种语言，因此您不必自己动手。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T09:54:03.253

在这里为我自己的产品添加了无耻的插件，但请查看[http://www.localeapp.com](http://www.localeapp.com)以获取开箱即用的 YAML 文件的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T09:31:38.193

[有一个很棒的 railscast](http://railscasts.com/episodes/256-i18n-backends)可以通过 Redis 管理 i18n。

# sql - 如何检查特定列的当前值（SQL 服务器）

> ID：14136057
> 
> 赞同：0
> 
> 时间：2013-01-03T09:25:59.047
> 
> 标签：sql, sql-server, sql-server-2005

我有一列（状态），值将是等待或 on_process 或完成。我会检查 velue 是否在等待，所以我会得到最大数字（例如 waiting1，waiting2 --> 所以最大值是 waiting2）然后我会 +1 它的最大值，所以下一个状态将是 waiting3..

col_status
waiting1
waiting2
on_process
完成
......

这是我的代码：

```
create PROCEDURE SP_queue
AS
BEGIN
    DECLARE @NEWID VARCHAR(5);
    select @NEWID = max(convert(int,SUBSTRING(status, 8, 2)))  FROM myTable

SELECT 'Waiting'+convert(VARCHAR, @NEWID+1)
END 
```

但是如果该列有另一个值（例如on_process），我有错误..所以任何人都可以帮助我如何使用if语句检查，如果值正在等待，那么将获得最大值，如果值是on_process /完成然后什么都不做..

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:38:53.600

尝试使用 where 条件：

```
SELECT
  @NEWID = max(convert(int,SUBSTRING(status, 8, 2)))  
FROM myTable
WHERE [status]='Waiting' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:28:54.527

我会使用字符串更改为数字。为每个状态设置一些特殊值，即。100 以下不是等待，而 100、101、102、... 是等待链。它会更容易和更清洁。

# python - pyodbc 在我的机器上很慢，但在其他机器上没有

> ID：14136061
> 
> 赞同：6
> 
> 时间：2013-01-03T09:26:13.837
> 
> 标签：python, windows, odbc, db2, pyodbc

我正在使用 python 2.7 和 pyodbc 3.0.6 访问与我的计算机在同一网络上运行的 db2 (9.7) 服务器。

以下是一个非常精简的示例，类似于我正在尝试做的事情。

```
import pyodbc as db

def dbcur(connectname):
    con = db.connect(connectname)
    cur = con.cursor()
    return cur,con

def main():

    print 'a'
    cur,con = dbcur('DSN=MYODBCCON')
    print 'b'

    # X.name is a short varchar
    qry = """
        select
        X.name as N
        from schema.table as X
        """

    print 'c'

    cur.execute(qry)

    print 'd'

    c = 0
    for row in cur:
        c+=1
        if not c%100:
            print c, row

    return

if __name__ == '__main__': main() 
```

此代码在我的 Windows 8 计算机上运行非常慢（10 秒内 100 行）。但是，在我的同事装有 Windows 7 的计算机上，这是闪电般的速度。他的电脑与我的电脑相似，而且他有相同版本的 pyodbc 和 python，所以我不认为这是一个问题。

当我同时使用 IBM DB2 ODBC DRIVER 和 IBM DATA SERVER DRIVER FOR ODBC 时，问题仍然存在。

关于为什么这么慢的任何建议？

我知道诸如 cur.fetchmany() 之类的东西，但我仍然希望这段代码在不使用它的情况下会快得多。

**更新**：

事实证明 ODBC 很慢，因为打开了跟踪。我禁用了跟踪，性能又回到了我的预期。（可以在 Windows 7 和 8 中的 ODBC 数据源下找到跟踪。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-28T09:00:32.600

事实证明 ODBC 很慢，因为打开了跟踪。我禁用了跟踪，性能又回到了我的预期。（可以在 Windows 7 和 8 中的 ODBC 数据源下找到跟踪。）

# php - 如何将值从 php 传递到 javascript

> ID：14136064
> 
> 赞同：2
> 
> 时间：2013-01-03T09:26:21.320
> 
> 标签：php, javascript

> **可能重复：**
> [将 php 变量值传递给 javascript](https://stackoverflow.com/questions/10437703/pass-php-variable-value-to-javascript)

我想创建一个进度条，进度的值将来自 PHP。

```
<div class="prog" id="progressbar"></div>
<label id="amount">
<?php echo $cast; ?></label> 
```

我有这种javascript。

```
<script>
$(function() {
    $( "#progressbar" ).progressbar({
    value: 0
    });
});
</script> 
```

如何在我的脚本中抛出价值 $cast ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:31:18.180

```
<script>
$(function() {
    $( "#progressbar" ).progressbar({
    value: <?php echo intval($cast);?>
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:31:48.193

Javascript 在客户端（浏览器）中运行，而 PHP 在服务器上运行。您不能像那样将 varble 从 PHP 转换为 javascript。随着打印进度：

```
 <?php echo $cast; ?> 
```

它只显示当前运行时间的值，不会更新。如果您有检查进度条值的链接，只需使用 ajax POST 或 GET 进行更改。

# github - 使用私钥将 TeamCity VCS Root 与 GitHub 存储库连接

> ID：14136065
> 
> 赞同：6
> 
> 时间：2013-01-03T09:26:30.090
> 
> 标签：github, teamcity, teamcity-7.0

我尝试了大约三个小时来创建一个指向 Github 存储库的 VCS 根，使用“私钥”作为身份验证方法。

![在此处输入图像描述](../Images/26260c6f449ab9ee44193484530afd63.png)

但是当我点击“测试连接”按钮时，我得到了这个错误：

> 列出远程参考失败：com.jcraft.jsch.JSchException：无效的私钥：C:\Users\Administrator.ssh\EC2BuildServerPrivateKey.ppk

私钥肯定存在，我什至使用 GIT 扩展使用相同的密钥克隆了存储库。

当然，我不是第一个尝试使用 github 作为 VCS 根的人！？我正在使用 Team City 7.1.3！

任何人都可以请帮助提供一些要验证的事情的建议吗？

也许我应该使用其他一些“身份验证方法”，因为这个不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T12:24:11.160

我非常确信 TeamCity 需要 OpenSSH 私钥，并且不能使用 PuTTY 私钥格式 (.ppk) 的私钥。

您可以使用 PuTTY 随附的 PuTTY Key Generator GUI 转换您的私钥。

# html - 表格单元格的滚动条

> ID：14136076
> 
> 赞同：37
> 
> 时间：2013-01-03T09:27:47.723
> 
> 标签：html, scrollbar, html-table

有没有办法将滚动条添加到“td”标签？我在“td”标签中有一个动态内容。我希望“td”具有固定大小，如果内容变得大于“td”大小，我希望滚动条仅出现在该特定单元格上。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-03T09:29:20.887

是的，你可以这么做。

最简单的方法是在你的单元格中放置一个填充它的 div 并设置它的`overflow`样式属性。

**CSS：**

```
div.scrollable {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: auto;
} 
```

**HTML：**

```
<td><div class=scrollable>
    Some content with a scrollbar if it's too big for the cell
</div></td> 
```

如果您希望滚动条始终可见，即使内容没有被裁剪，请在 CSS 中`auto`替换为。`scroll`

[示范](http://jsbin.com/jatexeke/1)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-03T09:40:25.517

```
<table  width ="400" >
    <tr>
        <td >
            <div style="width:100%; max-height:300px; overflow:auto">Your content here 
             </div>
        </td>
    </tr>
</table> 
```

[http://jsfiddle.net/7T2S4/1/](http://jsfiddle.net/7T2S4/1/)

希望这可以帮助

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-28T05:27:01.240

您应该需要提供 div 元素的“高度”或“宽度”，以便相应地滚动。例如，您要应用垂直滚动（Y 轴）：-

```
<td><div class="scrollable">
    Some content with a scrollbar if it's not fit in your customized container
</div></td>

div.scrollable
{
width:100%;
height: 100px;
margin: 0;
padding: 0;
overflow-y: scroll
} 
```

# linux - Linux：从 .bin 安装后软件包安装在哪里

> ID：14136083
> 
> 赞同：-2
> 
> 时间：2013-01-03T09:28:38.713
> 
> 标签：linux, fedora

我是 linux 的新手，所以请不要对这个基本问题感到恼火。我在网上搜索了它，但我能找到的只是安装说明。有人能告诉我从 .bin 文件安装时程序安装在哪里吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:04:52.733

You can use **find** and **Xargs** commands for locate files that have been installed. You can use for instance find directory -nmin Number_of_minutes to see which files were modified in some directory in last Number_of_minutes. Xargs is a command "used to build and execute command lines". You can combine that twho command to list the files, as shown in [find and Xargs using](http://www.hcidata.info/find.htm), but you try it first in root directory or you can limit to /bin.

# android - 图像未显示在图像视图中

> ID：14136084
> 
> 赞同：0
> 
> 时间：2013-01-03T09:28:45.150
> 
> 标签：android, bitmap, imageview

我正在尝试在 imageview 上设置图像，但未显示图像。

我正在从 json 数据中读取图像 url，然后尝试在 ImageView 上设置它，但我的图像不可见。没有任何异常发生。
这是我的代码

HotelList.class

```
static final String TAG_DISHIMAGEURL = "dishimageurl";
......
String imageUrl = dishResult.getString(TAG_DISHIMAGEURL);
map.put(TAG_DISHIMAGEURL, imageUrl);
.....
dishimageurl1 = hm.get(TAG_DISHIMAGEURL).toString();
 intent.putExtra("background", dishimageurl1); 
```

HotelDetails.class

```
......
String dishimageurl = bundle.getString("background");
Bitmap bimage=  getBitmapFromURL(dishimageurl);
    imageView.setImageBitmap(bimage);
....   
public Bitmap getBitmapFromURL(String src) {
try {
    URL url = new URL(src);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setDoInput(true);
    Toast.makeText(this, "showing image", Toast.LENGTH_LONG).show();
    connection.connect();
    InputStream input = connection.getInputStream();
    Bitmap myBitmap = BitmapFactory.decodeStream(input);
    return myBitmap;
} catch (IOException e) {
    Toast.makeText(this, "showing exception", Toast.LENGTH_LONG).show();
    return null;
} 
```

}

我不明白这段代码会发生什么。没有任何例外，但我的图像不可见。
请给我任何参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:31:21.227

请使用以下代码从 url 获取图像并显示到 imageview 中。

```
public class image extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Bitmap bitmap = DownloadImage("http://www.gophoto.it/view.php?i=http://1.bp.blogspot.com/-2LTvCCufBKc/T3L3KgcTj2I/AAAAAAAABbQ/Ki60e1LU9sE/s1600/Sachin%2BTendulkar.png");

        RelativeLayout mRlayout1 = (RelativeLayout) findViewById(R.id.mRlayout1);
        Drawable d=new BitmapDrawable(bitmap);
        mRlayoutLogin.setBackgroundDrawable(d);
    }

    private InputStream OpenHttpConnection(String urlString) throws IOException {
        InputStream in = null;
        int response = -1;

        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))
            throw new IOException("Not an HTTP connection");

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();
            response = httpConn.getResponseCode();
            if (response == HttpURLConnection.HTTP_OK) {
                in = httpConn.getInputStream();
            }
        } catch (Exception ex) {
            throw new IOException("Error connecting");
        }
        return in;
    }

    private Bitmap DownloadImage(String URL) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        return bitmap;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:04:51.090

您可以使用此代码查看图像。

```
 try {
    bitmap = BitmapFactory.decodeStream((InputStream)new URL(url).getContent());
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:16:28.397

看来您正在从 UI 线程下载图像。这将阻止 UI 线程，并会给你没有响应的错误。作为一种简单的方法，您可以使用 Universal Image Loader 之类的库

[通用图像加载器 - GitHub](https://github.com/nostra13/Android-Universal-Image-Loader)

这将为您管理图像加载并避免诸如不正确的 url、Out Of Memory 错误等问题。

# java - Java泛型方法通配符不匹配问题

> ID：14136085
> 
> 赞同：3
> 
> 时间：2013-01-03T09:28:48.660
> 
> 标签：java, generics

我想要实现的基本目标是将引用列表映射`List<Ref<Thing>>`到实际对象列表，但由超类给出`List<SuperThing>`。在这个例子中，`Thing extends SuperThing`并`Ref<Thing>`有一个方法`public Thing get()`来获取被引用的对象。

我认为有效的方法：

```
public <T> List<T> refsToObjects(List<Ref<? extends T>> list) {
    List<T> result = new ArrayList<T>();
    for(Ref<? extends T> ref : list) {
        result.add(ref.get());
    }
    return result;
} 
```

但是当我尝试使用它时

```
List<Ref<Thing>> refs;
List<SuperThing> objectList = refsToObjects(refs); 
```

我收到此错误消息：`The method refsToObjects(List<Ref<? extends T>>) is not applicable for the arguments (List<Ref<Thing>>)`

我之前没有积极使用`? extends T`通配符结构，但我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T09:59:55.260

如果您将“扩展”参数也指定为通用参数，它会起作用：

```
 public <T, S extends T> List<T> refsToObjects(List<Ref<S>> list) {
    List<T> result = new ArrayList<T>();
    for(Ref<S> ref : list) {
        result.add(ref.get());
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T14:05:37.390

将您的方法声明为采取`List<? extends Ref<? extends T>>`：

```
public <T> List<T> refsToObjects(List<? extends Ref<? extends T>> list) { ... } 
```

体内不应该有任何改变。

**编辑：**类型推断似乎仍然在使用此解决方案的呼叫站点失败。它只适用于像`this.<SuperThing>refsToObjects(refs)`. 因此，如果您可以预期这种用法，那么使用附加类型参数的[wrm 解决方案是更可取的。](https://stackoverflow.com/a/14136559/697449)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T18:01:56.097

如我所见，您的代码中有两个错误。首先是相信该类型`List<Ref<? extends Thing>>`是 的超类型`List<Ref<Thing>>`。如果我们创建 like 的子`Thing`类`DerivedThing`，我们不能将 的实例添加`Ref<DerivedThing>`到 的列表中`List<Ref<Thing>>`：

```
List<Ref<Thing>> refs = new ArrayList<Ref<Thing>>();
refs.add(new Ref<Thing>()); // OK.
refs.add(new Ref<DerivedThing>()); // Error! 
```

但是，如果我们将其替换为`List<Ref<? extends Thing>>`then 类就没有问题了`DerivedThing`：

```
List<Ref<? extends Thing>> refs = new ArrayList<Ref<? extends Thing>>();
refs.add(new Ref<Thing>()); // Still OK.
refs.add(new Ref<DerivedThing>()); // Now OK! 
```

因此，如果编译器允许将 的值作为其参数传递`List<Ref<? extends Thing>>`给函数`List<Ref<? extends Thing>>`，这将允许该函数将一些无效项添加到列表中。

第二个错误是认为的基本类型（或擦除类型）`<? extends Thing>`是`SuperThing`而不是剩余`Thing`。在这里，`<? extends Thing>`指定由组成的类型`Thing`及其派生类的集合，而不是由及其派生类组成的集合`SuperThing`。因此，我们可以这样写：

```
List<Ref<? extends Thing>> refs = new ArrayList<Ref<? extends Thing>>();
refs.add(new Ref<Thing>());
List<Thing> objectList = refsToObjects(refs); 
```

或者，`SuperThing`作为擦除类型：

```
List<Ref<? extends SuperThing>> refs = new ArrayList<Ref<? extends SuperThing>>();
refs.add(new Ref<Thing>());
List<SuperThing> objectList = refsToObjects(refs); 
```

但不是两者的组合，因为`List<SuperThing>`它不是一个超类，`List<Thing>.` 请注意我们仍然可以将 a 添加`Ref<Thing>`到 a `List<Ref<? extends SuperThing>>`。因此，如果您想保留作为起点，请使用上述解决方案之一或使用[wrm 的解决方案。](https://stackoverflow.com/a/14136559/697449)`List<Ref<Thing>>`

就个人而言，我更愿意充分利用多态性，并始终引用 a 中的所有内容`SuperThing`；即使在创建`Thing`或`Ref<Thing>`对象时。例如，如果我们`T`向 的构造函数添加一个类型的参数`Ref()`：

```
List<Ref<SuperThing>> refs = new ArrayList<Ref<SuperThing>>();
refs.add(new Ref<SuperThing>(new Thing()));
List<SuperThing> objectList = refsToObjects(refs); 
```

请注意，我们现在将一个类型的对象传递给的构造函数中的一个类型`Thing`的引用。通过使用层次结构的超类作为所有派生对象的引用，所有编码变得更加简单。当您选择主要只通过它们的超类查看所有对象时，OOP 工作得非常好并且非常容易，这扩展到了泛型的使用。`SuperThing``Ref()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T09:44:14.440

类型必须完全匹配，因此：

```
List<Ref<? extends Thing>> refs = new ArrayList<Ref<? extends Thing>>();
List<SuperThing> objectList = refsToObjects(refs); 
```

应该管用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T11:58:19.807

如果您执行以下操作，它也将起作用：

```
List<Ref<Thing>> refs;
List<SuperThing> objectList = this.<Thing>refsToObjects(refs); 
```

正在发生的事情是该方法需要扩展的东西`T`。但你从不定义`T`. @wrm 解释的那个在方法中定义了它。

# javascript - Twitter Streaming API 多流与自定义过滤器

> ID：14136087
> 
> 赞同：4
> 
> 时间：2013-01-03T09:28:52.077
> 
> 标签：javascript, node.js, twitter

我正在构建一个 node.js 应用程序，它打开了与 Twitter 流 API (v1.1) 的连接

我想将多个关键字（主题标签和单词）过滤为单独的查询。我最初的想法是拥有多个公共流。

但是，我知道每个应用程序和每个 IP 地址只能有一个与 Twitter 流 api 的开放连接，并且 Twitter 鼓励我们提出创造性的解决方案来获得我们想要的东西。

**所以我的问题是：**

如果我在没有过滤器的情况下进行流式传输，例如使用[statuses/sample](https://dev.twitter.com/docs/api/1.1/get/statuses/sample)（我相信是 1%）并使用自定义 javascript 过滤输出，如果我使用 API 过滤方法（即 track='twitter '）。

编辑：我创建了一个图表来解释这一点：

![在此处输入图像描述](../Images/d54c12459f4d5b1233d3961fa4c27f48.png)

如您所见，我想知道这两个输出是否相同。我怀疑它们不会是，因为虽然两个输出实际上是相同的过滤器，但一个来源是 1% 的样本，而另一个来源可能是 100% 的样本，但只提供 1% 的推文。

那么有人可以澄清一下两个输出是否相同吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:15:35.583

我想用我的调查结果来回答我的问题。

我在同一时间范围内并排测试了两者，并得出结论，自定义过滤器方法虽然支持多个过滤器，但无法提供足够的推文来创建足够有趣的可视化。

我认为使用并发过滤器获得更有趣的东西的唯一方法是查看其他方法，但我想知道它是否不可能。也许与第三方。

我附上了可视化跟踪“barackobama”的截图。左边是自定义过滤器，右边是状态/过滤器。

![在此处输入图像描述](../Images/913e4b7bd8730f6cb54348cb9a193f03.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T20:49:21.603

根据 Twitter 流 api 规则，如果您跟踪的关键字不超过整个全球流量的 1%，您将收到所有数据（一些推文可能由于网络问题等原因丢失，但这并不重要）。这被称为garden-hose（firehose 是一种特殊的过滤器，它可以为您提供所有数据，但它是通过第三方（例如[http://datasift.com/](http://datasift.com/) ）作为付费服务提供的）

因此，如果一条推文通过公共流过滤，那么它也将成为您自定义过滤器的一部分，除非您的关键字集太宽泛。

通过使用自定义过滤器，您可以跟踪多个搜索关键字，如果您因为关键字集太宽而错过了一些数据，twitter 会发送一个跟踪限制通知，指示您丢失了多少数据。

我对您的建议是使用自定义过滤器并分析您从流中获得的内容以及您从 twitter 获得的相同关键字的结果。当您开始从 twitter 收到曲目限制通知时，是时候将您的关键字集拆分为多个块，并通过在不同机器上运行它们来开始通过不同的流媒体进行流式传输。

过滤器流的详细信息如下（取自官网[https://dev.twitter.com/docs/api/1.1/post/statuses/filter](https://dev.twitter.com/docs/api/1.1/post/statuses/filter)）

> 返回匹配一个或多个过滤谓词的公共状态。可以指定多个参数，允许大多数客户端使用单个连接到 Streaming API。GET 和 POST 请求都支持，但参数过多的 GET 请求可能会导致请求因 URL 长度过长而被拒绝。使用 POST 请求来避免长 URL。
> 
> 默认访问级别最多允许 400 个跟踪关键字、5,000 个关注用户 ID 和 25 个 0.1-360 度位置框。如果您需要提升对 Streaming API 的访问权限，您应该在此处探索我们的 Twitter 数据合作伙伴提供商。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-20T17:00:11.997

该`statuses/filter`api 对所有推文进行操作，而不是那些返回的推文`statuses/sample`，您可以通过查看他们的推文 id 来判断：示例推文都来自特定的时间窗口。因此，从毫秒分辨率的创建时间，您可以肯定地判断`filter`返回的推文在`sample`.

有关从推文 ID 和示例推文的时间窗口获取创建时间的更多详细信息，请参阅这篇文章：[http://blog.falcondai.com/2013/06/666-and-how-twitter-samples-tweets-in。 html](http://blog.falcondai.com/2013/06/666-and-how-twitter-samples-tweets-in.html)

# c - 用于 C 代码多级嵌套的 Emacs 缩进

> ID：14136090
> 
> 赞同：1
> 
> 时间：2013-01-03T09:28:55.207
> 
> 标签：c, emacs, indentation

我对 emacs 完全陌生（主要使用 vim 和 eclipse/netbeans 等）我正在玩 C 代码的多级嵌套并在 emacs 中编写了一个示例代码来测试它如何缩进嵌套太深的代码（不是现实生活中的代码）。

```
int foo()
{
    if (something) {
        if (anotherthing) {
            if (something_else) {
                if (oh_yes) {
                    if (ah_now_i_got_it) {
                        printf("Yes!!!\n");
                    }
                }
            }
        }
    }
} 
```

当我输入 emacs 并保存它时，这看起来就像这样。但是在不同的文本编辑器上打开它显示保存的实际文本是这样的：

```
int foo()
{
    if (something) {
    if (anotherthing) {
        if (something_else) {
        if (oh_yes) {
            if (ah_now_i_got_it) {
            printf("Yes!!!\n");
            }
        }
        }
    }
    }
} 
```

所以我想知道emacs中是否有任何方法可以按照实际显示的方式保存文本？

我当前的 c-default-style 设置为“linux”。

编辑：

好的，我正在使用 Notepad++/Vim 查看 emacs 保存的文件，它显示“错误”的缩进，但看起来，用好的旧记事本打开（甚至是 cat file.c）显示正确的缩进显示emacs。将尝试这里提到的其他方法。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:42:30.060

尝试使用空格而不是制表符进行缩进。将以下内容添加到您的 init.el：

```
(setq-default indent-tabs-mode nil) 
```

这将使所有缓冲区默认使用空格。您需要为 makefile 添加以下异常：

```
(add-hook 'makefile-mode-hook (lambda () (setq indent-tabs-mode t))) 
```

# java - ldap 搜索很慢

> ID：14136091
> 
> 赞同：3
> 
> 时间：2013-01-03T09:28:56.983
> 
> 标签：java, active-directory, ldap, jndi

我正在使用JNDI连接LDAP活动目录，我想搜索名称中包含搜索字符串的用户，所以我的搜索方法如下：

```
public static List<LDAPUser> searchContactsByName(
        ExtendedDirContext extendedDirContext, String name) {

    try {

        LdapContext ldapContext = extendedDirContext.getLdapContext();
        String searchBaseStr = extendedDirContext.getSearchBase();

        String sortKey = LDAPAttributes.NAME;
        ldapContext.setRequestControls(new Control[] { new SortControl(
                sortKey, Control.CRITICAL) });

        SearchControls searchCtls = new SearchControls();
        searchCtls.setTimeLimit(1000 * 10);

        String returnedAtts[] = { LDAPAttributes.USER_NAME,
                LDAPAttributes.NAME };
        searchCtls.setReturningAttributes(returnedAtts);

        searchCtls.setSearchScope(SearchControls.SUBTREE_SCOPE);

        String searchFilter = "(&(ObjectCategory=person)(cn=*" + name
                + "*))";

        NamingEnumeration<SearchResult> results = ldapContext.search(
                searchBaseStr, searchFilter, searchCtls);

        List<LDAPUser> users = new ArrayList<LDAPUser>(0);
        while (results.hasMoreElements()) {
            SearchResult sr = (SearchResult) results.next();
            Attributes attrs = sr.getAttributes();
            LDAPUser user = new LDAPUser();
            user.setName(attrs.get(LDAPAttributes.NAME).toString()
                    .replace("cn: ", ""));
            user.setUserName(attrs.get(LDAPAttributes.USER_NAME).toString()
                    .replace("sAMAccountName: ", ""));
            users.add(user);
        }

        return users;

    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

以下是我连接 LDAP 的方式：

```
public static ExtendedDirContext connectToLdap(MessageSource messageSource) {

    try {
        log.debug("connectToLdap");
        String providerUrl = messageSource.getMessage("provider.url", null,
                null);
        String securityPrincipal = messageSource.getMessage(
                "security.principal", null, null);
        String securityCredentials = messageSource.getMessage(
                "security.credentials", null, null);
        String searchBase = messageSource.getMessage("search.base", null,
                null);
        boolean ssl = Boolean.parseBoolean(messageSource.getMessage("ssl",
                null, null));
        LdapContext ldapContext;

        Hashtable<String, String> ldapEnv = new Hashtable<String, String>(
                11);
        ldapEnv.put(Context.INITIAL_CONTEXT_FACTORY,
                "com.sun.jndi.ldap.LdapCtxFactory");
        ldapEnv.put(Context.PROVIDER_URL, providerUrl);
        ldapEnv.put(Context.SECURITY_AUTHENTICATION, "simple");
        ldapEnv.put(Context.SECURITY_PRINCIPAL, securityPrincipal);
        ldapEnv.put(Context.SECURITY_CREDENTIALS, securityCredentials);
        if (ssl)
            ldapEnv.put(Context.SECURITY_PROTOCOL, "ssl");
        // To get rid of the PartialResultException when using Active
        // Directory
        ldapEnv.put(Context.REFERRAL, "follow");
        ldapContext = new InitialLdapContext(ldapEnv, null);
        ExtendedDirContext extendedDirContext = new ExtendedDirContext();
        extendedDirContext.setLdapContext(ldapContext);
        extendedDirContext.setSearchBase(searchBase);
        log.debug("success connection to ldap");
        return extendedDirContext;
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }

} 
```

LDAP 凭据如下：

```
provider.url=ldap://dc.fabrikam.com:389
security.principal=CN=administrator,CN=Users,DC=fabrikam,DC=com
security.credentials=password
search.base=dc=fabrikam,dc=com 
```

为什么搜索要花这么多时间来检索数据？由于 AD 中只有 285 个联系人，我可以做些什么来加快搜索速度？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T07:44:22.997

解决方案是更改`ldapEnv.put(Context.REFERRAL, "follow");`为`ldapEnv.put(Context.REFERRAL, "ignore");`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T09:46:56.270

你的过滤器：

```
"(&(ObjectCategory=person)(cn=*" + name + "*))" 
```

可能是个问题。

我建议您下载一个已知的 LDAP 实用程序（以 Apache Directory Studio 浏览器为例）并尝试不同的搜索过滤器，直到找到一个有效的过滤器。

要开始，请尝试

```
"(&(ObjectCategory=person)(cn= + name ))" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-19T13:30:49.930

你是对的，

```
ldapEnv.put(Context.REFERRAL, "ignore") 
```

没有得到关于连接超时的异常。但是当我第一次尝试时，我得到了一个部分异常。在我将 LDAP 配置端口从 389 更改为 3268 后，我没有收到任何异常，构建成功。LDAP 全局目录的 3268 端口。例如，Outlook 客户端查询全局编录以查找通讯簿信息。如果您获得异常引用类型设置，您可以尝试全局编录。

# html - 自动调整 div 和所有父 div 的大小

> ID：14136095
> 
> 赞同：0
> 
> 时间：2013-01-03T09:29:12.890
> 
> 标签：html, css

布局具有以下排列：（使用 MVC3 - 整个 html 在 中`Layout.cshtml`）

*   顶部标题（包含横幅和菜单栏）
*   内容（分为左窗格和右窗格）。
*   页脚

右窗格的内容包含选项卡，高度可能因打开的选项卡而异。

我想让 Contents div 自动调整到高度，而不是创建滚动条（不是浏览器滚动条）。

这在一定程度上实现了，但它打破了`CSS`.

这是CSS：

```
html {
    width: 100%;
    height: 100%;    
}

body {
width: 100%;
/* height: 100%;    */
}

#Wrapper {
    border: 1px solid #6A89C1;
    height: 100%;
    margin: 0px auto;
    min-height: 750px;
    min-width: 700px;
    width: 100%;
    font-size: 0.75em;
}

header {
    background-color: #abcdef;
    height: 19%;  /* did not keep it 20% due to some Background repeat issues.. */
    margin: 0px;
    border-bottom: 2px outset #FFFFFF;
    width: 100%;    
    -webkit-border-top-left-radius: 5px;
    -webkit-border-top-right-radius: 5px;
    -moz-border-radius-topleft: 5px;
    -moz-border-radius-topright: 5px;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
}

#Banner {   
    height: 72%;
    width: 100%;
    padding-top: 5px;
}

#Menu {
    height: 25%;
    width: 100%;    
}

#Contents {
    height: auto; /*65%;*/
    width: 100%;
    clear: both;    
}

#Contents #LeftPane {
    background-color: #E9F1FF;
    border-right: 1px solid #B9D4FF;
    height: 100%;
    min-height: 300px;
    width: 24.8%;  /* Should not be exactly 25% as it causes RightPane div to shift downwards  */    
}

#Contents #RightPane {
    background-color: #FFFFFF;
    height: 100%;
    width: 75%;    
    overflow: auto;
}

.Left {
    float: left;    
}

.Clear {
    clear: both;    
}

footer {
    background-color: #6A89C1;
    clear: both;
    height: 15%;
    width: 100%;
    margin: 0px;
    min-height: 50px;
}

#Wrapper, footer {
    -webkit-border-bottom-right-radius: 5px;
    -webkit-border-bottom-left-radius: 5px;
    -moz-border-radius-bottomright: 5px;
    -moz-border-radius-bottomleft: 5px;
    border-bottom-right-radius: 5px;
    border-bottom-left-radius: 5px;    
} 
```

![布局截图](../Images/50bc59554ecbe89fcf52c0de9516a7cc.png)

整个中心部分需要自动增长，但布局（比例）应该相同

附件也是调整到给定后的图像`CSS`

![调整后的布局](../Images/4ba972e80a6019c3cae5fd0862c6c1bc.png)

**（注意菜单栏 Bg 和左窗格和页脚高度）**

希望已经充分解释了这个问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:32:48.703

您应该使用 javascript（或 jquery）获取打开的选项卡高度，并将此高度分配给内容容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:45:55.957

[http://www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

```
overflow: auto 
```

导致滚动条。

您可以使用 javascript 来执行此操作（更改选项卡时，根据选项卡的高度更改高度）。我不确定是否还有其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:19:20.077

我会避免一起使用高度，浏览器会根据元素的内容调整元素的高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:46:14.637

感谢所有的帮助..！

找到了一种可能的解决方案，即不将所有内容放在包装器 div 中，而不是彼此独立，即

```
 The Header div is separate div (parent is the body not the wrapper)

 same for Contents and footer div.. 
```

亲切的问候，再次感谢您的所有建议，A.Ali

# mysql - 自连接mysql表

> ID：14136096
> 
> 赞同：-1
> 
> 时间：2013-01-03T09:29:18.483
> 
> 标签：mysql, join

**发薪日**

```
 id   day    employee    income    expenses    tax
   1    7        3         600        100       30
   2    14       3         650        150       35
   3    14       2         680        200       38

SELECT p.income, p.tax, ps.expenses
FROM paydays p
LEFT JOIN paydays ps ON ps.day+7 = p.day
WHERE p.day = 14 AND p.employee = 3 
```

这给出了我想要的，第 14 天的 650 收入和 35 税，
以及第 7 天的 100 费用

现在的问题，

```
SELECT SUM(p.income), SUM(p.tax), SUM(ps.expenses)
FROM paydays p
LEFT JOIN paydays ps ON ps.day+7 = p.day
WHERE p.day = 14 
```

它应该给

```
income = 1330  
tax = 73  
expenses = 100 
```

但它将字段乘以 2，`income = 2660, tax = 146.....`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:33:58.763

```
SELECT 
    SUM(payday.income) as Income , 
    SUM(payday.tax) as Tax,  
    p.expenses as Expanses
FROM payday
LEFT JOIN payday as p ON p.id = payday.id - 1
WHERE day = 14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:30:35.670

也许我在你的解释中遗漏了一些东西，但你不能使用子查询来获取`expenses`，类似于：

```
SELECT SUM(p.income) TotalIncome, 
  SUM(p.tax) TotalTax, 
  ps.expenses Expenses
FROM paydays p
INNER JOIN
(
  select sum(expenses) expenses, day
  from paydays
  where day = 7
  group by day
) ps 
  ON ps.day+7 = p.day
WHERE p.day = 14
GROUP BY ps.expenses 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/0e4b9/12)

结果是：

```
| TOTALINCOME | TOTALTAX | EXPENSES |
-------------------------------------
|        1330 |       73 |      100 | 
```

# java - ANDROID：Facebook 和浏览器在我的应用程序中打开，而不是在他们自己的应用程序中打开

> ID：14136098
> 
> 赞同：5
> 
> 时间：2013-01-03T09:29:23.787
> 
> 标签：java, android, facebook, browser

解释起来会有点烦人，但请耐心等待：

所以我有一个带有按钮的简单 android 应用程序，一个打开一个 facebook 页面（首先检查该应用程序是否已安装，并将在其中打开，否则将在浏览器中打开相同的页面），另一个在浏览器中打开一个网站 url

我遇到的问题是，它似乎不是将它们作为单独的应用程序打开，而是在我的原始应用程序中打开浏览器/fb 应用程序。

因此，如果我通过我的应用程序打开 fb 页面，然后单击返回按钮，它会将我带回到我的应用程序的主屏幕。如果我单击 fb 按钮，然后最小化应用程序，然后进入 ACTUAL fb 应用程序，它并没有改变任何内容。

所以我的应用程序实际上并没有使用独立的 fb 应用程序，只是在内部调用它。

（希望这是有道理的......）这是我使用的代码；

```
 //just defined button variables
    button facebook, shop;

    //now for the onCreate method

    @Override
    public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    facebook = (Button) findViewById(R.id.facebook);
    shop = (Button) findViewById(R.id.shop);

    facebook.setOnClickListener(new View.onClickListener(){

    public void onClick(View v) {
    try{                                   //left out the profile id on purpose...
        Intent facebook = new Intent(Intent.ACTON_VIEW, Uri.parse("fb://profile/xxxx"));
    startActivity(facebook);

    }catch(Exception e){
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse ("http://www.facebook.com/example")));
    }
    }
    }); 
```

shop按钮设置相同，只是没有try/catch，它只会在浏览器中打开。

我如何使它将请求发送到实际的 fb 应用程序/浏览器，而不是它当前正在做什么？非常欢迎任何帮助/提示:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:51:03.900

使用 layout/a.xml 创建新布局

打开布局文件，然后添加一个 WebView，分配一个 ID，以便您以后可以访问该小部件。

```
 <?xml version="1.0" encoding="utf-8"?> 
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
          android:orientation="vertical" 
          android:layout_width="fill_parent" 
          android:layout_height="fill_parent"> 

          <WebView android:id="@+id/webview" 
          android:layout_width="fill_parent" 
          android:layout_height="fill_parent"/>

     </LinearLayout> 
```

### 当您在应用程序中访问 INTERNET 时，在清单文件中插入权限

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

### 在新的Activity里面——>WebActivity.java

```
 public class WebActivity extends Activity
     {

      public void onCreate(Bundle savedInstanceState)
      { 
     super.onCreate(savedInstanceState);
     WebView mywebview = (WebView) findViewById(R.id.webview);
     WebSettings webSettings = mywebview.getSettings();
     webSettings.setJavaScriptEnabled(true); 
     mywebview.loadUrl("http://www.facebook.com");
       } 
     } 
```

### 如果您想自己处理 webView 内的导航

```
 mywebview.setWebViewClient(new WebViewClient()) 
    private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
    return false;
        } 
```

### 现在从您的主要活动重定向到这些新活动::

```
 facebook.setOnClickListener(new View.onClickListener(){

public void onClick(View v) {
    try{
    ApplicationInfo info = getPackageManager().getApplicationInfo("com.facebook.katana", 0 );
    boolean isFacebookInstalled = true;
        }
   catch( PackageManager.NameNotFoundException e ){
                    isFacebookInstalled=false;
              }

  if(isFacebookInstalled)
   {
       //start the facebook app
        Intent intent = new Intent("android.intent.category.LAUNCHER");
        intent.setClassName("com.facebook.katana", "com.facebook.katana.LoginActivity");
        startActivity(intent);
   }
 else
   {
    Intent facebook = new Intent(getApplicationContext(),WebActivity.class);
    startActivity(facebook);
   }
}); 
```

### 同样，您也可以为您的商店按钮插入

# ios - ViewController 中的 View 类正在发生变化？

> ID：14136099
> 
> 赞同：0
> 
> 时间：2013-01-03T09:29:25.397
> 
> 标签：ios, uiview, uitabbar

我的应用程序中有一个 ViewController，它有一个在不同视图和标签栏之间切换的方法。为了能够在方法中切换视图，视图从它们的 nib 加载到 viewDidLoad 中。视图的切换基本上可以正常工作，但只有一个视图总是错误的。如果我检查可能是什么问题，我可以在日志中看到该视图的类在加载到 viewDidLoad 后发生更改。一般来说，如果一个对象改变了它的类，就没有什么神秘的魔法，一定会发生一些事情。我想知道加载视图后会发生什么？更准确地说，这里是执行“魔术”的代码：视图在 viewDidLoad 中加载

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self setCurrentView:placeholder];
    [self configureView];
    wineryView = [self loadWineryView];
    DLog(@"- %@", [wineryView class]);
    wineView = [self loadWineView];
    DLog(@"- %@", [wineView class]);
    tasteView = [self loadTasteView];
    DLog(@"- %@", [tasteView class]);
} 
```

日志总是显示预期的和正确的类！之后我有了改变视图的方法：

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{
    DLog(@"- %d", item.tag);
    [[self currentView] removeFromSuperview];

    switch ([item tag])
    {
        case TAB_WINERY:
            if (self)
            {
               [self viewWillDisappear:YES];
               [[self view] addSubview:wineryView];
               DLog(@"- %@", [wineryView class]);
               [self setCurrentView:wineryView];
            }
            break;
        case TAB_WINE:
            if (self)
            {
                [self viewWillDisappear:YES];
                [[self view] addSubview:wineView];
                DLog(@"- %@", [wineView class]);
                [self setCurrentView:wineView];
            }
            break;
        case TAB_TASTE:
            if (self)
            {
                [self viewWillDisappear:YES];
                [[self view] addSubview:tasteView];
                DLog(@"- %@", [tasteView class]);
                [self setCurrentView:tasteView];
            }
        default:
            break;
        }
    } 
```

那时日志没有显示预期的结果！这是我的日志的摘录：

```
2013-01-03 10:20:52.032 Weinerei[454:c07] -[DetailViewController viewDidLoad] [Line 51] - WineryView
2013-01-03 10:20:52.034 Weinerei[454:c07] -[DetailViewController viewDidLoad] [Line 53] - WineView
2013-01-03 10:20:52.036 Weinerei[454:c07] -[DetailViewController viewDidLoad] [Line 55] - TasteView
2013-01-03 10:20:58.946 Weinerei[454:c07] -[DetailViewController tabBar:didSelectItem:] [Line 89] - 0
2013-01-03 10:20:58.948 Weinerei[454:c07] -[DetailViewController tabBar:didSelectItem:] [Line 100] - TasteView
2013-01-03 10:21:00.378 Weinerei[454:c07] -[DetailViewController tabBar:didSelectItem:] [Line 89] - 1
2013-01-03 10:21:00.380 Weinerei[454:c07] -[DetailViewController tabBar:didSelectItem:] [Line 109] - WineView
2013-01-03 10:21:03.306 Weinerei[454:c07] -[DetailViewController tabBar:didSelectItem:] [Line 89] - 2
2013-01-03 10:21:03.308 Weinerei[454:c07] -[DetailViewController tabBar:didSelectItem:] [Line 119] - TasteView 
```

由于我没有在代码中的任何地方更改视图对象的类，所以我不明白为什么会发生这种情况！有谁知道这可能是什么原因以及如何避免这种情况？只是为了表明我在加载时不会更改类，下面是一个加载视图的示例方法：

```
- (UIView *) loadTasteView
{
    NSArray *nibViews = [[NSBundle mainBundle] loadNibNamed:@"TasteView" owner:self options:nil];
    TasteView *tView;
    for (id view in nibViews) {
        if ([view isKindOfClass:[TasteView class]]) 
        {
            tView = (TasteView*) view;
        }
    }
    return tView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:45:59.117

同时，我为我的问题找到了一个很棒的解决方案，这简直令人难以置信：在我的一个视图类的头文件中，我为视图声明了错误的 IBOutlet！当我使用复制和粘贴时，我在标题中粘贴了另一个类的 IBOutlet。这让我相信这个对象会改变它的类！

# java - 具有多个数组的 Eclipse 首选项页面

> ID：14136106
> 
> 赞同：0
> 
> 时间：2013-01-03T09:30:00.830
> 
> 标签：java, eclipse, eclipse-rcp, preferences

我试图在互联网上搜索这样做的例子，但找不到一个好的例子。我还检查了 eclipse IDE 源代码，但它有点太大而无法过滤掉我需要的示例。

我需要的是类似于下面的 Eclipse 文件关联页面。

我的计划是稍后用组合替换文件类型列表，并为每个组合选择添加更多值/控件。

我将非常感谢一个示例或指向一个示例的链接，该示例执行此操作或与工作偏好商店具有相同的概念。

谢谢！

![在此处输入图像描述](../Images/00451814236be918ad1e51a21422d066.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:44:11.900

好吧，我认为它只不过是简单的首选项页面，其中有两个`Lists`仅代表文件类型和编辑器之间的一致性。如何实现您自己的首选项页面的示例在这里：[Eclipse Preferences - Tutorial](http://www.vogella.com/articles/EclipsePreferences/article.html)

如果你想拥有`Combo`- 没问题 - 你只需更换你的上部`ListEditor`并`ComboFieldEditor`继续添加更多控制。文件关联存储在 Eclipse 首选项中，每当您尝试打开某个文件以检索相应的编辑器时，您都可以访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:48:17.550

您可以查看 Google Eclipse 插件源代码。我必须实现与您的需求相似的东西，并从[那里](http://google-plugin-for-eclipse.googlecode.com/svn/trunk/plugins/com.google.appengine.eclipse.core/src/com/google/appengine/eclipse/core/preferences/ui/GaePreferencePage.java)启发自己。它设计得当。您可以在[此处](http://google-plugin-for-eclipse.googlecode.com/svn/trunk/)查看存储库。

就我而言，我需要复选框而不是组合，并使用 JFace 库中的 CheckboxTableViewer，网上有很多示例（例如：[JFace 片段](http://wiki.eclipse.org/JFaceSnippets)）。正如亚历克斯所说，首先，在 Eclipse 首选项概念上工作......当你得到它时，它只会保留一些纯粹的 UI 任务。

# ios - 如果后台任务到期，则不调用 didBecomeActive

> ID：14136107
> 
> 赞同：12
> 
> 时间：2013-01-03T09:30:06.070
> 
> 标签：ios, background-process

情况如下：

我正在使用 imagepicker 挑选一个大视频。显然，选择器将花费一些时间来压缩视频。因此，为了简化用户体验，我为其启用了后台任务。

现在问题来了：

如果用户选择一个视频并点击主页按钮，应用程序将进入后台并继续压缩视频接下来的 600 秒。并且后台任务到期。在到期处理程序中，我已经停止了我的后台任务。

现在，如果用户在后台过期后恢复应用程序

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

没有被调用。谁能解释我为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T08:21:44.870

当后台任务到期时，你的应用就真的被关闭了！所以它不会再次变得活跃，它正在启动。

您应该在过期处理程序中或/以及当您的后台任务成功结束时处理内容。**这两种情况**，您都需要将 background_task 设置为**无效**。

如果您的应用程序在转换视频时进入后台，然后用户在任务结束或后台任务到期之前再次打开它，那么您应该看到应用程序调用 applicationDidBecomeActive。

我假设您知道这一点，但也许您在 Info.plist 文件中缺少多任务属性，因此您的应用程序没有按照您期望的方式接受后台任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:35:01.890

您可以尝试将日志语句添加到方法`applicationDidFinishLaunching`吗？可能是应用程序在用户打开之前终止或崩溃。

`applicationDidFinishLaunching`另外，我认为正确的方法是在应用程序接收到类似信号以及应用程序开始恢复解析时保存当前的解析上下文。因为用户可以手动关闭应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:07:13.763

-(void) applicationDidBecomeActive:(UIApplication)application

该方法仅在应用状态从非活动状态变为活动状态时调用。是否可以知道视频选择是否完成？如果可能的话，那就把它储存起来。以及当用户再次访问该应用程序时。只需触发您需要的功能。

# http - 延迟的 HTTP 响应导致会话过期

> ID：14136108
> 
> 赞同：1
> 
> 时间：2013-01-03T09:30:08.380
> 
> 标签：http, timeout, cgi, response

我的网站需要根据用户的请求创建 PDF 报告。根据请求（我使用过 GET），我的 CGI 首先生成 PDF，然后我才将响应（连同 PDF）发送到浏览器。

在大量数据的情况下，PDF 生成需要大量时间，并且在几分钟没有响应后，页面就会过期。

我尝试使用“Expires”HTTP 响应，但没有奏效。

该站点可以部署在 IIS 或 Apache 上，并且只允许在 IE 7.0 或更高版本上查看。

任何帮助表示赞赏。

PS。

# assembly - 汇编 jmp 不跳转

> ID：14136109
> 
> 赞同：0
> 
> 时间：2013-01-03T09:30:10.210
> 
> 标签：assembly, x86, dos, x86-16

`doi`问题是即使`dl`和`bl`相等，它也不会跳跃。有谁知道为什么？

```
assume cs:code,ds:data
data segment
sir1 db "abc"
l1 equ $-sir1
sir2 db "a"
l2 equ $-sir2
bunbun db "Este!$"
nu db "NU este!$"
iesire db "Apasa Enter!$"

data ends

code segment
start:
    mov ax,data
    mov ds,ax

    mov bp,offset sir1
    mov si,offset sir2
    dec bp
    push bp
    push si
    mov ah,l1
    mov bh,l2

unu:
    pop si
    pop bp
    inc bp
    dec ah
    mov dl,sir1[bp]
    mov bl,sir2[si]
    push bp
    push si
    cmp dl,bl
    je doi
    cmp ah,0
    je nu_bun
    jmp unu

doi:
    inc si
    inc bp
    dec ah
    mov dl,sir1[bp]
    mov bl,sir2[si]
    cmp dl,bl
    jne unu
    cmp bh,0
    je bun
    jmp doi

bun:
    mov dx,offset bunbun
    mov ah,09h
    int 21h
    mov ah, 09h
    mov dx,offset iesire
    int 21h
    mov ah, 0ah
    int 21h
    mov ax,4c00h
    int 21h

nu_bun:
    mov dx,offset nu
    mov ah,09h
    int 21h
    mov ah, 09h
    mov dx,offset iesire
    int 21h
    mov ah, 0ah
    int 21h
    mov ax,4c00h
    int 21h

code ends
end start 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:03:47.103

这比较隐式长度以 0 结尾的字符串。（与问题中的字符串不同，这些字符串要么是明确的长度（`l1 equ $-sir1`但没有特殊的字节标记结束），要么有一个`$`终止符。）

它还假设 ES = DS，或者第二个字符串由 ES:BP 指向。（问题是`[BP]`用于其中一个，除非您使用 DS = SS 的“微小”代码模型，否则这可能是一个错误。）

```
doi:
   ; cld             ; assume DF=0
    xchg di, bp
    mov cx, ax
    xor ax, ax

cmp_next:            ; do{
    lodsb              ; AL = [si]        ; si++
    scasb              ; cmp al, [es:di]  ; di++
    jnz not_equal
    test  al, al
    jnz   cmp_next   ; }while(al!=0);
   ; else fall through if we reached the end without finding a difference
do_equal:
    xchg di, bp
    mov ax, cx
    jmp somewhere_togo_when_equal

not_equal:
    xchg di, bp
    mov ax, cx
    jmp somewhere_togo_when_not_equal 
```

# c# - 在 Excel 文件 asp.Net 中保存 DataTable 数据

> ID：14136110
> 
> 赞同：0
> 
> 时间：2013-01-03T09:30:14.160
> 
> 标签：c#, asp.net, .net

我有一个 Gridview，我用一个数据表填充。在网页上，用户必须能够下载包含 Gridview 内容的 excel 文件。所以 mi 认为保存文件的最简单方法是将数据表保存为 excel 文件。我已经使用了这个方法，我在 stackoverflow 上找到了这个方法。

```
using Excel = Microsoft.Office.Interop.Excel;
 public static bool ExportDataTableToExcel(DataTable dt, string filepath)
    {

    Excel.Application oXL;
    Excel.Workbook oWB;
    Excel.Worksheet oSheet;
    Excel.Range oRange;

    try
    {
        // Start Excel and get Application object. 
        oXL = new Excel.Application();

        // Set some properties 
        oXL.Visible = true;
        oXL.DisplayAlerts = false;

        // Get a new workbook. 
        oWB = oXL.Workbooks.Add(Missing.Value);

        // Get the Active sheet 
        oSheet = (Excel.Worksheet)oWB.ActiveSheet;
        oSheet.Name = "Data";

        int rowCount = 1;
        foreach (DataRow dr in dt.Rows)
        {
            rowCount += 1;
            for (int i = 1; i < dt.Columns.Count + 1; i++)
            {
                // Add the header the first time through 
                if (rowCount == 2)
                {
                    oSheet.Cells[1, i] = dt.Columns[i - 1].ColumnName;
                }
                oSheet.Cells[rowCount, i] = dr[i - 1].ToString();
            }
        }

        // Resize the columns 
        oRange = oSheet.get_Range(oSheet.Cells[1, 1],
                      oSheet.Cells[rowCount, dt.Columns.Count]);
        oRange.EntireColumn.AutoFit();

        // Save the sheet and close 
        oSheet = null;
        oRange = null;
        oWB.SaveAs(filepath, Excel.XlFileFormat.xlWorkbookNormal,
            Missing.Value, Missing.Value, Missing.Value, Missing.Value,
            Excel.XlSaveAsAccessMode.xlExclusive,
            Missing.Value, Missing.Value, Missing.Value,
            Missing.Value, Missing.Value);
        oWB.Close(Missing.Value, Missing.Value, Missing.Value);
        oWB = null;
        oXL.Quit();
    }
    catch
    {
        throw;
    }
    finally
    {
        // Clean up 
        // NOTE: When in release mode, this does the trick 
        GC.WaitForPendingFinalizers();
        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();
    }

    return true;
} 
```

但是我收到一个构建错误，指出“当前上下文中不存在名称**缺失**”，我似乎无法弄清楚为什么？谁能帮忙？

[代码是从这里](https://stackoverflow.com/questions/9478351/how-to-export-excel-from-dataset-or-datatable-in-c)的stackoverflow页面粘贴的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:08:57.917

[这里](http://msdn.microsoft.com/en-us/library/system.reflection.missing.value.aspx)根据msdn ，`Missing.Value`是在`System.Reflection`. 您应该添加对此命名空间的引用。

```
using System.Reflection; 
```

# javascript - 灵活的 div 布局

> ID：14136116
> 
> 赞同：-1
> 
> 时间：2013-01-03T09:30:34.777
> 
> 标签：javascript, html, css

我正在尝试编写一个布局，其中有一个工具栏和一个主 div。当窗口 Y 轴小于窗口 X 轴时，工具栏在左侧。当窗口 X 轴小于窗口 Y 轴时，工具栏位于顶部。我已经将工具栏绝对定位在顶部：0 和左侧：0 并尝试在调整大小时更改宽度和高度属性。但是我的代码不起作用。

Javascript：

```
window.onresize = function(event) {
winW = window.innerWidth;
winH = window.innerHeight;   
console.debug("x axis:" + winW  + "y axis:" + winH);

if(winW < winH){
   var elem = document.getElementById('div1');

    console.debug("test" + elem.style.width);

   var a = elem.style.height;
   elem.style.height = elem.style.width;
   elem.style.width = a;

}
else{
   var elem = document.getElementById('div1');

    elem.style.height = elem.style.height;
    elem.style.width = elem.style.width;
}
} 
```

CSS：

```
#div1{
  background: red;
  position:absolute;
  height:100%;
  width:20px;
  top:0;
  left:0;
}
#div2{
  width:100%;
  height:500px;
  background-color:green;
  margin-left: 20px;
} 
```

[jsFiddle 示例在这里](http://jsfiddle.net/AjBwx/11/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T09:38:20.047

您可以使用`@media screen and (min-aspect-ratio: 1/1) { ... }`. 此查询中的任何样式仅在窗口与窗口一样宽或比其高宽时才会激活。

[演示](http://jsfiddle.net/AjBwx/12/)

我添加了这段代码，并删除了所有的 JavaScript：

```
@media screen and (min-aspect-ratio: 1/1) { 
    #div1 {
        width: 100%;
        height: 20px;
    }

    #div2 {
        width: 100%;
        margin: 0;
     }                
} 
```

可以[在 MDN 上找到信息](https://developer.mozilla.org/en-US/docs/CSS/Media_queries#aspect-ratio)

可以在[此处](http://caniuse.com/css-mediaqueries)找到对媒体查询的支持，但由于您可以使用 JavaScript，因此我建议您使用[Respond.js](https://github.com/scottjehl/Respond)使它们适用于所有用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T09:47:28.067

支持媒体比例；）

更多浏览器兼容：

```
window.onresize = function(event) {
    winW = window.innerWidth;
    winH = window.innerHeight;

    console.debug("x axis:" + winW  + "y axis:" + winH);

    document.getElementById("div1").className = ( winW < winH ? "verticalMenu" : "horizontalMenu" );
}

// optionally invoke window.resize() once manually for setting it default. Or set a defaultClass on the div itself in HTML 
```

和

```
.horizontalMenu {
    height:20px;
    width:100%;
}
.verticalMenu {
    height:100%;
    width:20px;
} 
```

请参阅[此 CodePen](http://codepen.io/Eric/pen/zqdik)。

# php - WooCommerce 附加信息即将到来

> ID：14136117
> 
> 赞同：0
> 
> 时间：2013-01-03T09:30:41.087
> 
> 标签：php, wordpress, woocommerce

我写了一个插件，可以像 WooCommerce 一样将数据插入数据库，但产品的附加信息（如尺寸）没有随任何订单一起提供，我不知道它从哪里获取以及如何获取。结果如下

![图片](../Images/857961abcb3aa38ab9023ca4c0d574e7.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T00:59:55.753

如果你在你的个位数数字前面加上一个“0”，那将把它理顺。它目前按第一个数字排列它，这是正确的。

示例：0、04、06、08、10 等。

# ruby - 回应？抱怨 nil 不是一个符号

> ID：14136118
> 
> 赞同：0
> 
> 时间：2013-01-03T09:30:41.067
> 
> 标签：ruby, metaprogramming

我正在编写一个 CLI 工具并具有以下代码：

```
commands = {
  :'-h' => :help,
  :'--help' => :help,
  :help => :help,
  :r => :remove,
  :rm => :remove,
  # ...
}

if some_obj.respond_to? commands[ARGV.first.to_sym]
  some_obj.send commands[ARGV.first.to_sym]
end 
```

但是，当在`ARGV.first.to_sym`中找不到时`commands`，`respond_to?`抱怨

```
./tool.rb:121:in `respond_to?': nil is not a symbol (TypeError)
        from ./tool.rb:121:in `<main>' 
```

是否可以在没有此错误的情况下使用其他方法，并且也无需`nil`明确检查？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:33:29.693

一个明显的解决方法是事先检查该命令是否存在

```
if cmd = commands[ARGV.first.to_sym]
  if some_obj.respond_to? cmd
    some_obj.send cmd
  end
else
  # complain about unrecognized command
end 
```

然而，更好的方法是使用专门为此类任务构建的工具[OptionParser](http://ruby-doc.org/stdlib-1.9.3/libdoc/optparse/rdoc/OptionParser.html)。

```
# example from the doc
options = {}
OptionParser.new do |opts|
  opts.banner = "Usage: example.rb [options]"

  opts.on("-v", "--[no-]verbose", "Run verbosely") do |v|
    options[:verbose] = v
  end
end.parse! 
```

## 更新

`respond_to?`也会很乐意接受一个字符串。因此，为了快速修复，请执行以下操作：

```
if some_obj.respond_to? commands[ARGV.first.to_sym].to_s
  # ...
end 
```

`nil.to_s`是空字符串，`respond_to?`并将返回`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:08:47.250

作为 Sergio 的答案的替代方案（这也很好），您可以使用哈希的默认值：

```
commands = Hash.new("").merge(
  :'-h' => :help,
  :'--help' => :help,
  :help => :help,
  :r => :remove,
  :rm => :remove,
  # ...
) 
```

然后你不需要检查`nil`.

```
commands[ARGV.first.to_sym]
.tap{|cmd| some_obj.send(cmd) if some_obj.respond_to?(cmd)} 
```

# linux - 在 glibc 源代码中找不到 puts()

> ID：14136120
> 
> 赞同：4
> 
> 时间：2013-01-03T09:30:43.000
> 
> 标签：linux, glibc

我对 Linux/C 很陌生。

在我的 Linux 上的 glibc(eglibs-2.15) 源代码中，我只能在 /libio/stdio.h 中找到 puts() 声明

```
extern int puts (__const char *__s); 
```

但在 glibc 源代码中的任何地方都找不到 puts() 的源代码。我的猜测是 puts() 依赖于系统，它的来源在其他地方。问题：我在哪里可以找到 puts() 源？

此外，似乎在某些系统上可以使用 puts() 源，例如在 Apple 上（http://www.opensource.apple.com/source/Libc/Libc-186/stdio.subproj/puts.c）或NetBSD (https://www-asim.lip6.fr/trac/netbsdtsar/browser/vendor/netbsd/5-20091104/src/lib/libc/stdio/puts.c?rev=160)。

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T09:34:58.430

在 glibc 中，puts 是 _IO_puts 函数的别名，在 ./libio/ioputs.c 中定义

# selenium - StaleElementReferenceException：元素不再附加到 DOM：Selenium

> ID：14136122
> 
> 赞同：4
> 
> 时间：2013-01-03T09:30:56.500
> 
> 标签：selenium, automation, automated-tests

我对自动化测试完全陌生。在参考了一些教程后，我创建了一个自动化测试用例。我尝试自动化的测试用例是在单击表格的标题之一后检查排序是否正确。

我的自动化测试用例失败，但出现以下异常：

```
org.openqa.selenium.StaleElementReferenceException: Element is no longer attached to the DOM
Command duration or timeout: 12 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/stale_element_reference.html
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:08:56'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '2.6.35-30-generic',     java.version: '1.6.0_20'
Driver info: driver.version: RemoteWebDriver
Session ID: 95b80ea0-26ac-45e0-a407-79f5b687504a
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at  sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:498)
at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:244)
at org.openqa.selenium.remote.RemoteWebElement.findElements(RemoteWebElement.java:169)
at org.openqa.selenium.remote.RemoteWebElement.findElementsByTagName(RemoteWebElement.java:240)
at org.openqa.selenium.By$ByTagName.findElements(By.java:312)
at org.openqa.selenium.remote.RemoteWebElement.findElements(RemoteWebElement.java:151)
at Sorting.sorting_column(Sorting.java:68) 
```

以下是代码：

```
 //Fetching values from the column of a table
    WebElement table = driver.findElement(By.id("dnn_ctr381_View_DealerList_ctl00"));
    List<WebElement> rows = table.findElements(By.tagName("tr"));

    for (WebElement row : rows) {

        List<WebElement> cells = row.findElements(By.tagName("td"));
        if (!cells.isEmpty() && cells.get(0).isDisplayed()) {
            a = cells.get(0).getText();
        }
        b[i] = a;
        i++;
    }
    //Click on column header to sort   
    driver.findElement(By.cssSelector("html body#Body form#Form div#container.container div#Wrapper div#Main div#Panes div#ContentsContainer.box-shadow div#Contents div#Content div#dnn_ContentPane.MainContent div.DnnModule div.dnnPEMContNotitle div#dnn_ctr381_ContentPane.dnnPEMContNotitleBody div#dnn_ctr381_ModuleContent.DNNModuleContent div#dnn_ctr381_View_dnn_ctr381_View_DealerListPanel div#dnn_ctr381_View_DealerList.RadGrid table#dnn_ctr381_View_DealerList_ctl00.rgMasterTable thead tr th.rgHeader a")).click();
    WebElement table1 = driver.findElement(By.id("dnn_ctr381_View_DealerList_ctl00"));
    List<WebElement> rows1 = table1.findElements(By.tagName("tr"));
    for (WebElement row1 : rows1) {
        List<WebElement> cells1 = row1.findElements(By.tagName("td"));// Exception here
        if (!cells1.isEmpty() && cells1.get(0).isDisplayed()) 
            {

         c = cells1.get(0).getText();

       } 
```

例外来自这一行：

```
List<WebElement> cells = row1.findElements(By.tagName("td")); 
```

有人可以让我知道这个问题的原因以及如何解决吗？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T09:54:00.760

`StaleElementException` is there to tell you that a DOM element that you've referenced in your client code (by a `findElement`) doesn't exist anymore. In your case, the `row1` element doesn't exist anymore. It is certainly a timing issue, as your click to sort is just above, and no care is taken to ensure the sort has finished. Without more insight in how the sort is implemented, or how long it takes, it'd be my best guess. If the sort ends while you iterate through your DOM objects, these will be rearranged in the DOM and lost in your client code

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-19T11:43:52.283

好吧，StaleElement 异常可能真的很令人沮丧……尤其是在使用 chrome 驱动程序时……但到目前为止，唯一的解决方法是简单地使用我所谓的 Raw 等待：

```
try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

虽然纯粹主义者可能会说我们使用的是幻数，但一旦你知道安全等待的大小，我就知道它在 95% 以上的情况下是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-11T14:32:33.743

使用`webDriverwait`并使驱动程序等待，直到元素位于 dom 上。

```
WebDriverWait wait = new WebDriverWait(driver,20);

wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//*

[@id='mndf']/form/fieldset/table/thead/tr/th"))); 
```

无论元素是否位于，都使用输出语句。

```
System.out.println("element located"); 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T05:25:09.203

这与 DOM 更改有关，因为当页面上发生交互时会执行一些 javascript。因此，由于错误表明元素已过时，因此解决方案是再次执行 driver.findElement 以摆脱它。遇到同样的问题并解决了

# c# - IDataService 已在 MVVM Light Project 中注册

> ID：14136126
> 
> 赞同：4
> 
> 时间：2013-01-03T09:31:08.147
> 
> 标签：c#, mvvm, mvvm-light, windows-phone-8

我正在尝试将我的 WP8 项目从自制的 MVVM 实现调整为 MVVM Light。我已经成功地完成了[这个例子](http://jesseliberty.com/2011/01/04/wpfs-mvvm-light-toolkit-soup-to-nuts-part-i/)，并且效果很好。然后我开始为我自己的项目重复相同的步骤。

应用程序编译时没有错误，但是当我在 Expression Blend 中打开 MainPage.xaml 时，我会收到以下错误：

> 类 project.Services.IDataService 已注册。App.xaml，第 6 行，第 5 列

如果我查找它，它是 ViewModelLocator 注册的行：

```
<Application.Resources>
<vm:ViewModelLocator x:Key="Locator" d:IsDataSource="True" />
</Application.Resources> 
```

我的 ViewModelLocator.cs：

```
 /// <summary>
        /// Initializes a new instance of the ViewModelLocator class.
        /// </summary>
        public ViewModelLocator()
        {
            ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

            if (ViewModelBase.IsInDesignModeStatic)
            {
                // Create design time view services and models
                // see: http://developingux.com/2012/06/10/how-to-fix-error-design-time-data-in-blend-with-mvvm-light/
                if (!SimpleIoc.Default.IsRegistered<IDataService>())
                {
                    SimpleIoc.Default.Register<IDataService, DesignDataService>();
                }
            }
            else
            {
                // Create run time view services and models
                if (!SimpleIoc.Default.IsRegistered<IDataService>())
                {
                    SimpleIoc.Default.Register<IDataService, DataService>();
                }
            }

            // only one ViewModel for the MainPage
            SimpleIoc.Default.Register<MainViewModel>();
        } 
```

正如您从我的代码注释中看到的那样，我已经尝试过[这里](http://developingux.com/2012/06/10/how-to-fix-error-design-time-data-in-blend-with-mvvm-light/)假设的修复，但我仍然在 Blend 中遇到此错误。没有其他地方可以注册 IDataService，那么可能是什么问题？[SO 上的其他](https://stackoverflow.com/questions/13175446/simpleioc-default-register-fails-at-isindesignmodestatic-if-the-interface-is-in)问题特别针对桌面应用程序，并且也仅包含上述某种修复，其中在注册 ViewModelLocator 之前首先进行检查。

有任何想法吗？:)

**更新 1：** 我已经设法在 Visual Studio 中显示我的设计时间。我仍然在我的代码隐藏文件中手动引用 DataContext。但是，我仍然需要解决无法在 Blend 中显示设计时数据的问题。从 Visual Studios 的行为来看，它应该可以工作吗？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-31T21:45:17.103

老问题，但仍然相关，我认为原因尚未得到解释，也没有直接答案。

在设计时，Visual Studio 似乎喜欢多次实例化资源。
这会导致在同一个静态应用程序实例中多次构造视图模型定位器，该定位器可能在您的 App.xaml 或其他资源中定义。

在这`SimpleIoc.Default`2 个视图模型定位器实例中作为单个实例存在，导致任何新注册都是重复注册。

在重新启动 Visual Studio、重新加载项目或杀死（Visual Studio 中 XAML 设计器的宿主进程）之后，它可能一开始似乎可以工作`XDesProc.exe`，但如果你关闭一个窗口设计器，然后再次打开它，你将获得设计时间错误，因为它试图重新创建链接到该窗口的资源。

我尝试了几种解决方案，比如在视图模型定位器中创建一个静态布尔值，我在第一次调用时将其设置为 true，如果在此之前为 true，则返回，并且不注册任何内容。

但不幸的是，这似乎没有帮助，因为布尔值与视图模型定位器一起被重新实例化。
可以尝试将它放在一个单独的类中，每次打开视图时都不会重新构建它，但这似乎有点愚蠢。

最后，我决定使用`.Reset()`on 方法`SimpleIoc`来移除所有之前注册的服务、实例和工厂。

```
public ViewModelLocator()
{
    SimpleIoc.Default.Reset();

    ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

    SimpleIoc.Default.Register<IExampleService, ExampleServiceImplementation>();
    // Register the rest of your services
} 
```

这似乎解决了这个问题，并且在运行时应该没有影响，因为视图模型定位器只会被实例化一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-07T14:14:06.273

我遇到了同样的问题，这似乎是与 XAML 设计器、静态工厂/定位器和对象的设计时创建相结合的 Visual Studio 问题。但是：解决方案如下：

1.  无工厂注册（不推荐）

    `SimpleIoc.Default.Register<INavigationService>();`

2.  或者如果您想使用工厂，请在注册工厂之前取消注册

    `SimpleIoc.Default.Unregister<INavigationService>();` `SimpleIoc.Default.Register<INavigationService>(() => new NavigationService());`

3.  通过将构造函数设为静态，防止设计器/Blend 多次创建 ViewModelLocator

    `static ViewModelLocator() { ... }`

该错误很麻烦，但可能在这种情况下发生：您在设计时（`ViewModelLocator`可能在 App.xaml 中）创建对象，并且每当您更改代码中的某些内容时，都会触发编译器并重新创建 ViewModelLocator，而无需取消注册服务。因此它会抱怨在工厂已经注册。理论上，当多次注册没有工厂的类时，也应该有错误。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-04T08:47:35.827

在一次又一次地阅读 ViewModelLocator.cs 的评论后，我发现我的 MainPage.xaml 的 DataContext 设置不正确：

```
DataContext="{Binding Source={StaticResource Locator}, Path=Main}" 
```

代替

```
DataContext="{Binding Main, Source={StaticResource Locator}}" 
```

Blend 中的错误停止了，我现在可以在 Blend 和 VS 中看到相同的设计时数据。但是我是如何监督这个错误的呢？好吧，这是解释：

我已经将自己定位于[本教程](http://jesseliberty.com/2011/01/04/wpfs-mvvm-light-toolkit-soup-to-nuts-part-i/)，这非常有帮助。但我的经验是，它必须适用于某种旧版本的 MVVM Light，并且我现在使用的版本发生了一些变化。Jesse 使用了没有路径的绑定。但是，这在他的示例中有效。但是在我的特殊情况下，我需要提供路径，以便定位器可以识别我的 MainViewModel 的正确属性（这里是 Main）。

# c++ - clang 不知道 std::atomic_bool，但 XCode 知道

> ID：14136128
> 
> 赞同：5
> 
> 时间：2013-01-03T09:31:10.223
> 
> 标签：c++, macos, c++11, clang, std

我正在尝试编译声明 std::atomic_bool 类型变量的 C++11 代码。这是在带有 clang 的 Mac OS 10.8.2 上：

```
clang --version
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.0
Thread model: posix 
```

clang 抱怨 std::atomic_bool：

```
clang++ -c -stdlib=libc++ -msse4 -std=c++11 -Wno-unused-parameter -I. -o query.o query.cpp
In file included from query.cpp:1:
[...]
./threadutils.h:33:10: error: no type named 'atomic_bool' in namespace 'std'; did you mean 'atomic_long'?
    std::atomic_bool work; 
```

但是，相同的文件在使用相同编译器的 XCode 项目中编译得很好。所以我假设我在手动编译器调用中遗​​漏了一些东西。

我尝试了一些变体，例如`-std=c++0x`and `-std=gnu++11`，但无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T10:42:26.173

我想到了。不幸的是，我在我的问题中设置了一个错误标志：它在 XCode 中也不起作用，我在那里导入了不同版本的源文件。

问题是 C++11 定义了“`atomic_bool`对应于指定的命名类型`atomic<bool>`”，但[clang 不支持](http://lists.cs.uiuc.edu/pipermail/cfe-dev/2012-December/026678.html)。

将类型从重命名`atomic_bool`为`atomic<bool>`修复它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-14T22:01:27.690

我发现了同样的问题。就我而言，我通过包含原子来解决它：

```
#include <atomic>
static std::atomic_bool varname; 
```

在此之后，我可以在 Linux (Ubuntu) 上使用 std=c++11 调用 g++ 以及在 XCode 上编译。

# mysql - 在Mysql中实现特定日期之间的数据

> ID：14136130
> 
> 赞同：1
> 
> 时间：2013-01-03T09:31:13.227
> 
> 标签：mysql

我有三个名为`User`和`Role`的表`Balance_updates`。`User`表保存有关用户的信息，`Role`描述用户类型，如客户、管理员、经理，并`Balance_updates`存储有关余额的所有交易，即它存储有关与余额相关的交易的历史记录。

**表**

用户

```
+-----------------------+--------------+------+-----+-------------------+-------+
| Field                 | Type         | Null | Key | Default           | Extra |
+-----------------------+--------------+------+-----+-------------------+-------+
| username              | varchar(20)  | NO   | PRI | NULL              |       |
| password              | varchar(32)  | NO   |     | NULL              |       |
| email                 | varchar(50)  | YES  |     | NULL              |       |
| role_id               | int(11)      | NO   | MUL | NULL              |       |
| mobile_wallet_balance | double(20,2) | NO   |     | 0.00              |       |
| merit_point           | bigint(20)   | YES  |     | NULL              |       |
| status                | int(11)      | NO   |     | NULL              |       |
| is_auto_btm_enabled   | tinyint(1)   | YES  |     | 0                 |       |
| created_at            | datetime     | YES  |     | NULL              |       |
| updated_at            | timestamp    | YES  |     | CURRENT_TIMESTAMP |       |
| gender                | varchar(20)  | YES  |     | NULL              |       |
| validity              | date         | YES  |     | NULL              |       |
| status_desc           | text         | YES  |     | NULL              |       |
+-----------------------+--------------+------+-----+-------------------+-------+

Role

+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| id          | int(11)      | NO   | PRI | NULL    | auto_increment |
| name        | varchar(25)  | NO   | UNI | NULL    |                |
| description | varchar(255) | YES  |     | NULL    |                |
| value       | varchar(25)  | NO   |     | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+ 
```

余额更新

```
+------------+--------------+------+-----+-------------------+----------------+
| Field      | Type         | Null | Key | Default           | Extra          |
+------------+--------------+------+-----+-------------------+----------------+
| id         | int(11)      | NO   | PRI | NULL              | auto_increment |
| username   | varchar(15)  | NO   |     | NULL              |                |
| role_id    | int(11)      | YES  |     | NULL              |                |
| amount     | double(20,2) | YES  |     | NULL              |                |
| updated_at | timestamp    | NO   |     | CURRENT_TIMESTAMP |                |
+------------+--------------+------+-----+-------------------+----------------+ 
```

Balance_updates 中的数据

**客观的**

我想在任何给定日期生成所有用户及其各自的余额；例如，如果我想要给定日期的余额表，`2012-12-28`它应该生成最新的余额`Balance_updates`。

**我试过的**

```
SELECT DISTINCT (
u.username
), r.value, u.amount AS `amount`
FROM Balance_updates u
INNER JOIN Role r ON u.role_id = r.id
WHERE u.amount > 0.0 && UNIX_TIMESTAMP( u.updated_at ) < UNIX_TIMESTAMP( '2013-1-3 23:59:59' )
ORDER BY r.value, UNIX_TIMESTAMP( u.updated_at ) DESC 
```

**结果和问题**

正如您所期望的，它从 Balance_updates 返回所有值，即记录的每个其他用户交易。

问题：

1.如何获得用户在特定日期的最新余额报表。如果在该日期用户余额未更改，则显示他上次更改的上次余额。

任何帮助将不胜感激;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:18:33.083

*Not tested, but I have the feeling this could work (and could be optimised).*

```
SELECT DISTINCT u.username, r.value, u.amount AS `amount`
FROM Balance_updates u
INNER JOIN Role r ON u.role_id = r.id
WHERE u.updated_at = (
    SELECT MAX(inner_u.updated_at)
    FROM Balance_updates AS inner_u
    WHERE
        inner_u.username = u.username
        && amount > 0
        && UNIX_TIMESTAMP( inner_u.updated_at ) < UNIX_TIMESTAMP( '2013-1-3 23:59:59' )
)
ORDER BY r.value, UNIX_TIMESTAMP( u.updated_at ) DESC 
```

Just one off-topic piece of advice:

*   add a [surrogate key](http://en.wikipedia.org/wiki/Surrogate_key) to table `User` (e.g. `User.id`); make it the primary key
*   replace column `Balance_updates.username` with (e.g.) `Balance_updates.user_id`, and store a reference to `User.id` (a [foreign key](http://en.wikipedia.org/wiki/Foreign_key)).

or

*   change column `Balance_updates.username` to a `VARCHAR(20)` to match the type of `User.username`

# c++ - C++ 未解析的外部符号 (LNK2019)

> ID：14136131
> 
> 赞同：1
> 
> 时间：2013-01-03T09:31:17.257
> 
> 标签：c++, dll, linker

在过去的两天里，我一直在寻找类似问题的答案并将其实施到我的代码中，但收效甚微。我有一个外部 .dll（Windows）的 API，并且我的 .cpp 文件中包含了头文件以引用 API。

但是我有这个问题，无论我做什么，我总是得到一个未解析的外部符号，它在我的 .h 文件中引用了这一行。是的，我使用谷歌并修改了我在代码中找到的答案，但没有成功。

Foo.h

```
Class Foo {
    public:
        static Foo* Interface_Get(char* dllfilename); 
```

Foo.cpp

```
// I declare this just underneath the #include "Foo.h" header
Foo *foo = 0; 
```

在我的 main 函数中，我将它声明为 this（以及其他一些很好的函数）。

```
//This has already been created and both Header and .dll are in the same directory.
Foo::Interface_Get("bar.dll"); 
```

我得到这个错误

```
error LNK2019: unresolved external symbol 
    "public: static class Foo * __cdecl Foo::Interface_Get(char *)" 
```

我已经尝试了我所知道的一切（这是我的第一次 .dll 创建经验）我有一种感觉我错过了一些非常明显的东西，但对于我的生活我看不到它。

整个 Foo.cpp

```
#include "Foo.h"
Foo* Foo::Interface_Get(char* dllfilename); //May not be redeclared outside class error

Foo* foo = 0;

bool Frame()
{
if (foo->Key_Down(DIK_ESCAPE))
    return false;   
return true;
}

INT WINAPI WinMain(HINSTANCE, HINSTANCE, LPSTR, INT)
{
foo->Interface_Get("bar.dll");

foo->System_SetState(grSTATE_FRAME, Frame);

foo->System_SetState(grSTATE_WINDOWED, true);

foo->System_SetState(grSTATE_KEYBOARD, true);

foo->System_Initiate();

foo->System_Start();

foo->System_Shutdown();

foo->Inferface_Release();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:42:45.543

[这个问题](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)解释了常见问题，在您的情况下，它（可能）是以下各项的组合：

*   （可能）忘记实现功能
*   遗忘`__declspec(dllexport)`
*   忘记链接到图书馆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:40:41.143

`Interface_Get(char* dllfilename);`如果您还没有这样做，您需要提供函数定义。

这只会再次重新声明函数，您需要提供如下格式的函数`{}`

```
Foo* Foo::Interface_Get(char* dllfilename); //May not be redeclared outside class error 
```

Foo.cpp

```
Foo* Foo::Interface_Get(char* dllfilename)
{
  //....
  return new Foo();
} 
```

# linux - Linux 在特定物理地址分配内存

> ID：14136135
> 
> 赞同：0
> 
> 时间：2013-01-03T09:31:27.873
> 
> 标签：linux, linux-device-driver, device-driver, pci

我正在测试一个 PCI 端点驱动程序，我想做从 PCI RootPort 端到 PCI 端点端的简单复制。在 PCI Endpoint 端，我们有从 PCI 地址到 CPU 物理地址的地址转换。我们可以在转换中配置 CPU 物理地址，使其映射到特定的 DRAM 区域。问题是我们如何在特定的 CPU 物理地址分配内存缓冲区以确保来自 RootPort 端的写入确实有效？

任何建议表示赞赏。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:41:30.870

您需要先保留物理内存区域。最简单但丑陋的方法是将“mem =”参数传递给内核命令行，该参数将您感兴趣的物理内存范围排除在内核内存管理之外，然后使用[ioremap](http://www.makelinux.net/ldd3/chp-9-sect-4) () 获取它的虚拟映射。

例如，如果您的机器有 256 Mb 的 RAM 使用 mem=255M 保留最后一个 Mb 供您使用，然后通过 ioermap() 映射它

注意：根据@Adrian Cox 的反馈修复了原始答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:08:01.757

如果您可以即时重新映射转换，那么您应该像使用 DMA 的任何驱动程序一样工作。您对此的基本参考是[LDD3 的第 15 章](http://lwn.net/images/pdf/LDD3/ch15.pdf)，以及[Linux DMA API](http://lxr.free-electrons.com/source/Documentation/DMA-API.txt)。

您分配的是一个 DMA 相干缓冲区，通过`dma_alloc_coherent`. 在大多数平台上，您应该能够传入一个空`struct device`指针并获得一个通用的 DMA 地址。这将为您提供一个内核虚拟地址来访问数据，以及一个 dma 地址，它是通过您的转换层映射的 CPU 物理地址。

如果您的地址转换不是很灵活，您可能需要修改端点的平台代码以尽早保留此缓冲区，以满足地址对齐要求。这有点复杂，但是最近的内核[更新了 bigphysarea](http://permalink.gmane.org/gmane.linux.kernel/1273100)补丁，这可能有助于作为一个起点。

# jquery - 迷你升级Jqgrid？如何？

> ID：14136140
> 
> 赞同：0
> 
> 时间：2013-01-03T09:31:37.957
> 
> 标签：jquery, jqgrid, upgrade

我想更新到 jqgrid 的最新版本，主要是为了可以使用 rowattr，因为我的大型项目在“jqGrid 4.2.0”中，我需要在每个不同的行中应用样式。我的问题是我必须替换哪个文件才能使用此选项？如果可能的话，我不想更改所有文件，以避免我的旧版本的某些选项出现问题。

谢谢。

# php - PHP 简单时间检查（小时）

> ID：14136144
> 
> 赞同：-2
> 
> 时间：2013-01-03T09:31:58.553
> 
> 标签：php, sql, timestamp

尽管我使用 PHP 已经有一段时间了，但我仍在努力解决的问题之一是时间。

我正在创建一个简单的脚本，它将检查是否`timestamp`大于或等于一个小时，如果是，它将从数据库中删除。

```
2013-01-03 20:30:25

DELETE FROM tablename WHERE timestamp = ????? 
```

我不确定如何执行查询以删除`timestamp`当前时间超过一个小时的值。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T09:37:05.173

```
DELETE FROM tablename WHERE `timestmap` < DATE_SUB(NOW(), INTERVAL 1 HOUR) 
```

参考：- [date_add](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)和[date_sub](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-sub)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:37:43.347

首先，`2013-01-03 20:30:25`不是时间戳，它是格式化的日期。该日期的时间戳如下所示：`1357245025`。`strtotime`您可以使用该函数将其转换为时间戳。您还可以通过`strtotime("-1 hour")`对值进行比较来计算一小时前的时间戳。

不过，在 MySQL 查询中执行所有这些操作可能会更快，MySQL 提供了执行此操作的查询，使用与`Amit Garg`提供的查询类似的查询。

# ruby-on-rails - Twitter Api 仅提供最近几天的推文

> ID：14136145
> 
> 赞同：2
> 
> 时间：2013-01-03T09:32:01.757
> 
> 标签：ruby-on-rails

最近，我使用 OAuth gem 在我们的 Ruby on Rails 应用程序中实现了 OAuth，并开始使用它。

技术：- Ruby On Rails

在实施 OAuth 之前，我会调用下面的 URL 来正确发送推文，

[http://search.twitter.com/search.json?q=moxie&count=100](http://search.twitter.com/search.json?q=moxie&count=100)

但是，在实施 Oauth 之后，我调用了以下 URL：-

[https://api.twitter.com/1.1/search/tweets.json?q=moxie&count=100](https://api.twitter.com/1.1/search/tweets.json?q=moxie&count=100)

哪个没有正确给出推文，即结果集仅包含最近几天的推文。

如何检索过去两个月或更长时间的推文？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:34:11.403

检查您的 api 请求限制，o 尝试将您的请求分成 50 个 tweats

# hibernate-search - Hibernate Search Indexer 进程在工作一半后挂起

> ID：14136154
> 
> 赞同：0
> 
> 时间：2013-01-03T09:33:05.513
> 
> 标签：hibernate-search

我有 7 个实体类要使用 Hibernate Search 进行索引。在尝试了 MassIndexer 和 FlushToIndexes 之后，索引器进程通过最小的实体搅动，但最大的实体/表没有完成，即使 MassIndexerProgressMonitor 告诉索引已完成。该进程仅在达到分配的 100-200 MB 时挂起。我想确保索引过程正确结束。

**问题：代码是否正确？应该调整休眠或数据库设置吗？**

* * *

环境：64 位 Windows 7、JBoss、Struts2、Hibernate、Hibernate Search、Lucene、SQL Server。休眠搜索索引放置在文件系统中。

* * *

MassIndexer 代码示例：

```
 final Session session = HibernateSessionFactory.getSession();
  final FullTextSession fullTextSession = Search.getFullTextSession(session);
  MassIndexerProgressMonitor monitor = new IndexProgressMonitor("Kanalregister");
  fullTextSession.createIndexer()
                 .purgeAllOnStart(true)
                 .progressMonitor(monitor)
                 .batchSizeToLoadObjects(BATCH_SIZE)    // 250000
                 .startAndWait(); 
```

* * *

FlushToIndexes 代码示例：（来自 Hibernate ref. doc。）（似乎可以索引，但永远不会结束）

```
 final Session session = HibernateSessionFactory.getSession();
  final FullTextSession fullTextSession = Search.getFullTextSession(session);
  fullTextSession.setFlushMode(FlushMode.MANUAL);
  fullTextSession.setCacheMode(CacheMode.IGNORE);
  Transaction t1 = fullTextSession.beginTransaction();
  // Scrollable results will avoid loading too many objects in memory
  ScrollableResults results = fullTextSession.createCriteria(Land.class)
                                             .setFetchSize(BATCH_SIZE) // 250000
                                             .scroll(ScrollMode.FORWARD_ONLY);
  int index = 0;
  while (results.next()) {
     index++;
     fullTextSession.index(results.get(0)); // index each element
     if (index % BATCH_SIZE == 0) {
        fullTextSession.flushToIndexes(); // apply changes to indexes
        fullTextSession.clear(); // free memory since the queue is processed
     }
  }
  t1.commit(); 
```

* * *

使用 hibernate.cfg.xml 中的以下设置验证代码在模拟所有索引工作时结束：

```
 <property name="hibernate.search.default.worker.backend">blackhole</property> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:22:45.333

上面的代码经过验证且正确。

我的控制台没有结束的问题被认为与 Eclipse 有关，因为确实显示了 main() 末尾的打印输出。

有一些缺失的实体类（在我的模型中）没有正确报告。一旦我收到这些通知并将它们添加到我的模型中，MassIndexer 的索引过程就成功结束，Lucene 索引中每个目录中的 3+ 个文件证明了这一点。

# python - 循环获取两条用户输入并保存到全局列表

> ID：14136159
> 
> 赞同：1
> 
> 时间：2013-01-03T09:33:21.140
> 
> 标签：python, oop, loops, raw-input

首先，我是 Python 新手，所以请放轻松...其次，我以前从未使用过论坛，所以如果我粘贴了太多代码或没有提供您需要的内容，请原谅我，我会尝试我的最好的：

### 我需要我的代码做什么：

我需要我的代码向用户询问名为 m​​oduleName 的输入，然后在输入 moduleName 后，我需要它向用户询问该特定模块的等级。输入之后，我需要它再次询问模块然后评分，直到没有更多可以输入的地方，用户将在模块位中输入 -1 以结束它。我还需要将每个项目保存到我创建的全局列表中。因此，当我使用我创建的函数来查看列表时，它会打印出所有模块和成绩。

### 迄今为止我的代码：（我的全局列表位于名为 students[] 的代码的顶部）

```
def addStudent():
    print 
    print "Adding student..."
    student = Student()
    firstName = raw_input("Please enter the student's first name: ")
    lastName = raw_input("Please enter the student's last name: ")
    degree = raw_input("Please enter the name of the degree the student is studying: ")
    studentid = raw_input("Please enter the students ID number: ")
    age = raw_input("Please enter the students Age: ")
    **moduleName= 0
    while moduleName != "-1":
        moduleName = raw_input("Please enter module name: ")
        grade = raw_input ("Please enter students grade for " + moduleName+": ")
    students.append(student)**

    student.setFirstName(firstName) # Set this student's first name
    student.setLastName(lastName)
    student.setDegree(degree)# Set this student's last name
    student.setGrade(grade)
    student.setModuleName(moduleName)
    student.setStudentID(studentid)
    student.setAge(age)

    print "The student",firstName+' '+lastName,"ID number",studentid,"has been added to the system." 
```

### 我得到的输出：

我现在已经修复了循环，所以它可以正确中断......我现在唯一的问题是 moduleName 和grade 字段保存到我的全局列表中，但只保存最后一个输入（为-1），而不是输入的多个输入。 .. 如此迷茫。问题也可能出在我创建的这个函数中：

```
def viewStudent():
    print "Printing all students in database : "

    for person in students:
            print "Printing details for: " + person.getFirstName()+" "+ person.getLastName()
            print "Age: " + person.getAge()
            print "Student ID: " + person.getStudentID()
            print "Degree: " + person.getDegree()
            print "Module: " + person.getModuleName()
            print "Grades: " + person.getGrade() 
```

再次道歉，我不知道在论坛等上需要什么，所以请放轻松...在此先感谢！=D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:36:26.627

我建议用`while moduleName != "-1":`循环替换`while True:`循环，然后在询问模块名称后插入此代码：

```
if moduleName == '-1':
    break 
```

当你想要它时，这将打破 while 循环。

解决您的第二个问题，该`append`功能位于`else`整个`while`循环的一部分。这意味着它仅在功能中断时才起作用。获得输入后，您需要将其放在主`while`循环中，并摆脱`else`.

另外，我看不到`student`任何地方的定义-它是什么意思？

这是你想要的代码：

```
while True:
    moduleName = raw_input("Please enter module name: ")
    if moduleName == '-1':
        break
    grade = raw_input("Please enter students grade for " + moduleName+": ")
    students.append(student) 
```

# windows - DLL 重定向 - 在 XP 中工作，而不是在 Windows 7 中

> ID：14136160
> 
> 赞同：3
> 
> 时间：2013-01-03T09:33:25.703
> 
> 标签：windows, dll, manifest

在 Windows XP 上，我正在为指定的应用程序重定向 user32.dll，但在 Windows 7 上使用相同的设置，user32.dll 不会被重定向。

设置是这样的 - 一个包含以下内容的目录：

> app.exe
> app.exe.manifest
> user32.dll

app.exe.manifest 包含：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <assemblyIdentity
    version="0.0.0.0"
    name="Redirection"
    type="win32"
  />

  <file
    name="user32.dll"
  />
</assembly> 
```

在 Windows XP 上，app.exe 从应用程序文件夹加载 user32.dll。在 Windows 7 上，app.exe 从 system32 文件夹加载 user32.dll。

如何让 app.exe 从 Windows 7 上的应用程序文件夹中加载 user32.dll？[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374219%28v=vs.85%29.aspx)没有提到程序集工作方式的平台之间的任何差异，但肯定有一些差异会阻止重定向工作......

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:48:43.200

所以事实证明，从 Vista 开始的 Windows 平台会进行一些激活上下文缓存，即在应用程序第一次运行时查找清单。如果在第一次运行后添加或更改了清单，Windows 不会费心寻找它以节省加载时间。

所以我的场景确实有效，但是您需要通过修改应用程序二进制文件（例如时间戳）来强制 Windows 重新缓存激活上下文。

我试过了，我的 user32.dll 从应用程序目录加载到 Windows 7 中。

参考：http :
[//blogs.msdn.com/b/vistacompatteam/archive/2006/11/13/manifest-and-the-fusion-cache.aspx](http://blogs.msdn.com/b/vistacompatteam/archive/2006/11/13/manifest-and-the-fusion-cache.aspx)
[VB6 Manifest 在 Windows 7 上不起作用](https://stackoverflow.com/questions/4489165/vb6-manifest-not-working-on-windows-7)

# java-me - 非静态变量 this 不能从静态上下文中引用

> ID：14136171
> 
> 赞同：2
> 
> 时间：2013-01-03T09:34:08.870
> 
> 标签：java-me, lcdui

我正在和 java 我一起工作。我试图从 First.java 中另一个 displayble(form1) 中的 okCommand 切换到 Second.java 中的 displayable(form2)（请参阅我[之前](https://stackoverflow.com/q/14068709/839601)的问题）。

我有一个错误`non-static method getForm2() cannot be referenced from a static context`。我必须在 form2 声明以及 Second.java 中的 getForm2 方法中添加静态一词，然后它才能工作。

现在的问题是 form2 中的 backCommand 无法切换回 First.java 中的 form1 并弹出错误`non-static variable this cannot be referenced from a static context`。

我停了下来，花了一些时间来刷新自己关于如何使用 static 关键字的语言基础知识，我知道静态方法是类方法，非静态方法是实例方法，非静态方法不能除非创建了非静态方法的实例并且静态方法不能调用非静态方法，否则调用静态方法。

我真的不理解我应该理解的实现，我希望使用上面的示例进行一些澄清。

下面是来自 Second.java 的源代码，错误来自`form2.setCommandListener(this);`

```
 public static Form getForm2() {

    if (form2 == null) {                                 

        form2 = new Form("form");                                    
        form2.addCommand(getBackCommand());

        form2.setCommandListener(this);                                  
    }                         

    return form2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:37:52.583

您有一个`static`方法，但正在使用`this`. 但`this`不存在。它通常会引用该类的一个*实例*，但这里没有。

如果您的方法不是`static`并且您实例化了此类的一个实例，那么这将起作用。

例如

```
Second s = new Second();
Form f = s.getForm2(); // if this method wasn't static 
```

使该方法成为静态仅意味着命名空间。没有关联的实例，也没有`this`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T10:23:08.950

有几个选择。首先是创建一个静态实例`Second`并在以下位置使用它`getForm2`：

```
 //...
 // static instance
 private static Second instance = new Second(/* put constructor arguments here, if any */);
 //...
 public static Form getForm2() {

    if (form2 == null) {                                 

        form2 = new Form("form");                                    
        form2.addCommand(getBackCommand());

        form2.setCommandListener(instance); // --> replace "this" with "instance"
    }
    //... 
```

* * *

不过，从您描述的问题来看，我更喜欢另一种选择 - 回到您在[上一个问题](https://stackoverflow.com/q/14068709/839601)中的设计，并使用一个实例`Second`作为通过构造函数传递的参数`First`。

您的 First.java 将具有如下行：

```
 //...
 private final Second second; // instance needed for commandAction
 //...
 First(Second second) { // constructor with parameter
    this.second = second; // save the parameter
    //...
 } 
```

然后，`commandAction`First.java 中的方法可以使用如下代码：

```
switchDisplayable(null, second.getSecondForm());
// instead of Second.getSecondForm() 
```

# android - 切换片段

> ID：14136174
> 
> 赞同：0
> 
> 时间：2013-01-03T09:34:15.117
> 
> 标签：android, android-asynctask, android-fragments

我需要更改我在适配器`Fragment`中`View pager` 有 getItem 方法`View pager`

```
 @Override
    public Fragment getItem(int position) {

    fragmentPosition = position;
    Log.e("PageAdapter", "Creating fragment at: " + position);
    DefinedValues.thumbnailInfo.put("activity", DefinedValues.images);
    DefinedValues.thumbnailInfo.put("type", "info");
    DefinedValues.thumbnailInfo.put("page", position+ 1 + "");

    String request = Json.stringToJson(DefinedValues.thumbnailInfo);
    DefinedValues.thumbnailInfo.clear();

    StringAsyncRetriever net = new StringAsyncRetriever();
    net.setListener(MyPagerAdapter.this);
    net.execute(request, DefinedValues.GET_DATA);
    Log.d(TAG, "got item @ " + position);

    fragment1 myFragment = new fragment1();
    return myFragment;
} 
```

我需要在 AsyncTask 完成后将其更改为显示图像的那个

有 fragment1 类：

```
 public class fragment1 extends Fragment {

GridView gridView;
public ImageAdapter adapter;
public int position;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        //
        Bundle savedInstanceState) {

    adapter = new ImageAdapter(this.getActivity(), position);

    if (container == null) {
        Log.e("Null container", "Null");
        return null;
    }
    //Log.e("fragment1", "fragment1 reached!");
    View view =  inflater.inflate(R.layout.menu1_fragment, container, false);
    gridView = (GridView)view.findViewById(R.id.gridview1);

    gridView.setAdapter(adapter);
    DefinedValues.adapterContainer.add(adapter);
    //Log.d("Fragment1 adapter count: ", DefinedValues.adapterContainer.size() + "");

/*  gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            ImageView imageView = new ImageView(getActivity());
            LinearLayout.LayoutParams vp = new LinearLayout.LayoutParams
                    (LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
            imageView.setLayoutParams(vp);

            imageView.setImageBitmap(DefinedValues.imageContainer.get(position).getThumbnail());
            getActivity().addContentView(imageView, vp);
        }

    });
    */

    return gridView;
} 
```

那么如何仅在 asyncTask 结束时将 gridView 添加到片段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:04:40.357

你应该让`ViewPager`处理片段的变化。您可以在`getItem`. 只需隐藏该片段中的所有内容，并可选择渲染您正在执行的其他内容`FragmentDummy`。然后，将片段传递给您的 AsyncTask 或通过 AsyncTask 中的 id/tag 获取片段。然后，您可以在任务完成后在片段中显示正确的内容视图并隐藏片段的虚拟部分。

# excel-formula - 将记录插入新工作表

> ID：14136175
> 
> 赞同：0
> 
> 时间：2013-01-03T09:34:17.457
> 
> 标签：excel-formula

目前我有每周报告工作簿和进出口工作簿。

在每周报告中，我有 3 个工作表铁矿石、废钢和线材。

每次用户在每周报告的 3 个工作表中的任何一个中输入这些字段时

```
Index   Contract no Seller  Bank    Buyer   Issuing Bank    Product Vessel 
```

我需要在进出口工作簿中反映它。

可能吗？

![我的excel表样本](../Images/30463e967eeeb380324edee7907b2539.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:16:44.587

可能是这样的吗？

```
=IF([Weekly_report.xls]Sheet1!A2="";"";[Weekly_report.xls]Sheet1!A2) 
```

# html - 翡翠模板不能渲染带有html标签的内容？

> ID：14136178
> 
> 赞同：0
> 
> 时间：2013-01-03T09:34:36.030
> 
> 标签：html, tags, render, pug

我的玉模板是

```
div.article
 #{content} 
```

内容是`<p>Sample Test</p>`

所以渲染结果应该是

```
<div class="article">
  <p>Sample Text</p>
</div> 
```

但渲染结果是

```
 <div class="artichle">
    <<p>Sample Text</p>></<p>Sample Text</p>>
   </div> 
```

为什么会这样？如何正确呈现带有 html 标签的内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T10:56:04.017

使用标签文本的未转义变体：

```
- var html = "<script></script>"
| !{html} 
```

完整解释见[https://github.com/visionmedia/jade#tag-text](https://github.com/visionmedia/jade#tag-text)

在您的示例中，您将编写：

```
div.article
  !{content} 
```

请注意，您应该小心注入 html 非转义代码。根据您的用例，它可能包含跨站点黑客（在评论中注入重定向）

# android - 如何使用 android 将 Arraylist 中的数据调整为 viewflipper

> ID：14136179
> 
> 赞同：2
> 
> 时间：2013-01-03T09:34:36.007
> 
> 标签：android, sqlite

> **可能重复：**
> [如何在 android 中使用 ViewFlipper 显示来自 sqlite 的内容](https://stackoverflow.com/questions/14133943/how-to-display-content-from-sqlite-using-viewflipper-in-android)

我正在从 sqlite 获取数据，我想在 viewflipper 的帮助下根据 sqlite 中的记录一一显示数据，因为我正在使用哈希映射..更清楚地说，我现在在 sqlite 中有 2 条记录我想通过翻转显示我正在使用的第一条记录和第二条记录

```
 cache = new ArrayList<String>();
    while (cursor.moveToNext())
    {

         String temp_bookid = cursor.getString(0);
         Log.i("temp_bookid",temp_bookid);
         String temp_desc=cursor.getString(1);
         byte[] temp_image1 = cursor.getBlob(2);
         byte[] temp_image2 = cursor.getBlob(3);
         String temp_id=cursor.getString(4);
         String temp_name = cursor.getString(5);
         String temp_bname=cursor.getString(6);
         cache.add(temp_id);
         cache.add(temp_bname);
         cache.add(temp_bookid);
         cache.add(temp_name);
         cache.add(temp_desc);
         cache.add(temp_image1.toString());
         cache.add(temp_image2.toString());
            Log.i("temp_id of the page in sqlite", temp_id);

            TextView txtDesc = (TextView) findViewById(R.id.tDescription);
            text = (TextView) findViewById(R.id.tTitle);
            text.setText(temp_name);

            txtDesc.setText(temp_desc);

            ImageView img = (ImageView)findViewById(R.id.smallImage);

            img.setImageBitmap(BitmapFactory.decodeByteArray(temp_image1, 0,temp_image1.length));
            txtName1 = (TextView) findViewById(R.id.tvName);
            txtName1.setText(temp_bname);

            break;
    }   

        mContext = this;
        vf = (ViewFlipper) this.findViewById(R.id.vfShow);
        vf.setOnTouchListener(new OnTouchListener() {
        @Override
            public boolean onTouch(final View view, final MotionEvent event) {
                detector.onTouchEvent(event);
                Log.i("ew","ae");

                return true;
            }
        }); 
```

使用上面的代码我只能设置第一个记录数据，因为我正在使用中断；如果我删除 break 的声明；它正在显示最后一条记录..

任何人都可以建议我在 viewflipper 或任何类型的教程中设置数据的最佳方法。

# linux - 使用多宿主配置本地虚拟网络

> ID：14136180
> 
> 赞同：0
> 
> 时间：2013-01-03T09:34:44.643
> 
> 标签：linux, networking, multihomed

我需要测试一个连接数超过 64K 的应用程序。我想使用同一个主机。

今天我启动在 127.0.0.1 上侦听的服务器并从同一台机器连接到它，但当然它仅限于 64K 连接。

我想模拟一种情况，例如我有一台服务器和许多客户端连接到特定单个 IP 上的单个服务器。

```
Server Listen: 1.2.3.4

Client Connect to 1.2.3.4 From 2.1.2.1
Client Connect to 1.2.3.4 From 2.1.2.2
Client Connect to 1.2.3.4 From 2.1.2.3
Client Connect to 1.2.3.4 From 2.1.2.4 
```

因此，我需要设置一个具有多宿主的虚拟网络，以便客户端能够从多个寻址和侦听的服务器进行连接。

如何配置？在 Linux 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:20:08.587

第 1 步：将地址添加到您的环回；我将添加 10.0.0.1、10.0.0.2、10.0.0.3、10.0.0.4 和 10.0.0.5 到`lo`

```
[mpenning@tsunami ~]$ ip addr show lo
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 16436 qdisc noqueue state UNKNOWN
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
[mpenning@tsunami ~]$ sudo ip addr add 10.0.0.1/24 dev lo
[mpenning@tsunami ~]$ sudo ip addr add 10.0.0.2/24 dev lo
[mpenning@tsunami ~]$ sudo ip addr add 10.0.0.3/24 dev lo
[mpenning@tsunami ~]$ sudo ip addr add 10.0.0.4/24 dev lo
[mpenning@tsunami ~]$ sudo ip addr add 10.0.0.5/24 dev lo
[mpenning@tsunami ~]$ sudo ip addr show lo
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 16436 qdisc noqueue state UNKNOWN
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    inet 10.0.0.1/24 scope global lo
    inet 10.0.0.2/24 scope global secondary lo
    inet 10.0.0.3/24 scope global secondary lo
    inet 10.0.0.4/24 scope global secondary lo
    inet 10.0.0.5/24 scope global secondary lo
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
[mpenning@tsunami ~]$ 
```

第 2 步：[增加最大连接数](https://stackoverflow.com/questions/410616/increasing-the-maximum-number-of-tcp-ip-connections-in-linux)

第 3 步：开始大量连接...

```
from socket import socket, AF_INET, SOCK_STREAM
import select

class Server(object):
    def __init__(self, addr="0.0.0.0", port=2525):
        self.listen_addr = addr
        self.listen_port = port
        self.server = socket(AF_INET, SOCK_STREAM)
        self.server.setblocking(0)
        self.server.bind(self.socket_tuple)
        self.server.listen(5)

    def __repr__(self):
        return "TCP Server listening on %s:%s" % (self.listen_addr,
            self.listen_port)

    @property
    def socket_tuple(self):
        return (self.listen_addr, self.listen_port)

    def close(self):
        self.server.close()

class Client(object):
    def __init__(self, addr="0.0.0.0"):
        self.listen_addr = addr
        self.server_addr = None
        self.server_port = None
        self.client = socket(AF_INET, SOCK_STREAM)
        self.client.setblocking(0)
        finished = False
        while not finished:
            try:
                ### The point of my answer is here...
                self.client.bind((addr,0)) # <- Bind to specific IP and rnd port
                finished = True
            except:
                pass

    def __repr__(self):
        return "TCP Client %s->%s:%s" % (self.listen_addr,
            self.server_addr, self.server_port)

    def connect(self, socket_tuple=("0.0.0.0",0)):
        self.server_addr = socket_tuple[0]
        self.server_port = socket_tuple[1]
        self.client.connect_ex(socket_tuple)

    def close(self):
        self.client.close()

READ_ONLY = select.POLLIN | select.POLLPRI | select.POLLHUP | select.POLLERR
clients = list()
servers = list()
for server_addr, port in [('10.0.0.1', 2525), ('10.0.0.2', 2526)]:
    ss = Server(addr=server_addr, port=port)
    servers.append(ss)
    for client_addr in ['10.0.0.3', '10.0.0.4', '10.0.0.5']:
        for ii in xrange(0, 25000):
            cc = Client(addr=client_addr)
            connection = cc.connect(socket_tuple=ss.socket_tuple)
            finished = False
            print "    %s conns" % len(clients)
            while not finished:
                poller = select.poll()
                poller.register(ss.server, READ_ONLY)
                # Map file descriptors to socket objects...
                fd_to_socket = {ss.server.fileno(): ss.server,}
                events = poller.poll(1)
                for fd, flag in events:
                    s = fd_to_socket[fd]
                    if flag & (select.POLLIN|select.POLLPRI):
                        if s is ss.server:
                            # server socket is ready to accept a connection
                            connection, client_address = s.accept()
                            connection.setblocking(0)
                            fd_to_socket[connection.fileno()] = connection
                            poller.register(connection, READ_ONLY)
                            finished = True
            clients.append(cc)
            print cc

print "Total Clients:", len(clients)
for cc in clients:
    cc.close()
for ss in servers:
    ss.close() 
```

根据您的喜好调整上述值...但是，您应该记住，调整 linux 服务器以接受如此多的连接可能具有挑战性...但此时，这不是您要问的问题...

# mockups - 从现有站点创建模型的工具

> ID：14136186
> 
> 赞同：0
> 
> 时间：2013-01-03T09:35:08.620
> 
> 标签：mockups, mockup-tool

有人知道一种工具可以帮助轻松地从现有站点创建模型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:42:02.000

尝试查看以下应用程序集合：

[http://speckyboy.com/2010/01/11/10-completely-free-wireframe-and-mockup-applications/](http://speckyboy.com/2010/01/11/10-completely-free-wireframe-and-mockup-applications/) 或 [http://mashable.com/2012/06/07/mockup-tools/](http://mashable.com/2012/06/07/mockup-tools/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:22:28.813

MockGen 可以从现有网页生成 Balsamiq 和 ForeUI 模型。

可疯狂定制的输出。

[http://www.mockgen.com/desktop](http://www.mockgen.com/desktop) （我是开发者）

# outlook - 单击自定义按钮时未触发 Outlook 事件

> ID：14136188
> 
> 赞同：1
> 
> 时间：2013-01-03T09:35:32.510
> 
> 标签：outlook, vsto, add-in, outlook-addin, outlook-2010

我正在开发一个 Microsoft Outlook 插件，我在 Add-In tab name 中添加了一个按钮`OPENISMS`。我可以看到该按钮，但是单击该事件不会被触发。我不知道为什么它会以这种方式表现。请在下面找到添加按钮和附加事件的代码。任何帮助将不胜感激。

```
private void AddButtonToNewDropdown()
{
    Office.CommandBar commandBar = this.Application.ActiveExplorer().CommandBars["Standard"];
    Office.CommandBarControl ctl = commandBar.Controls["&New"];
    if (ctl is Office.CommandBarPopup) 
    {
        Office.CommandBarButton commandBarButton;
        Office.CommandBarPopup newpopup = (Office.CommandBarPopup)ctl;
        commandBarButton = (Office.CommandBarButton)newpopup.Controls.Add(1, missing, missing, missing, true);
        commandBarButton.Caption = "OpenISMS";
        commandBarButton.Tag = "OpenISMS";
        commandBarButton.FaceId = 6000;
        //commandBarButton.Enabled = false;
                      commandBarButton.OnAction = "OpenISMSThruMail.ThisAddIn.ContextMenuItemClicked";
        commandBarButton.Click += new Office._CommandBarButtonEvents_ClickEventHandler(ContextMenuItemClicked); 
    }

}
private void ContextMenuItemClicked(CommandBarButton Ctrl, ref bool CancelDefault)
{
    if (currentExplorer.Selection.Count > 0)
    {
        object selObject = currentExplorer.Selection[1];
        if (selObject is MailItem)
        {
            // do your stuff with the selected message here
            MailItem mail = selObject as MailItem;
            MessageBox.Show("Message Subject: " + mail.Subject);
        }
    }
} 
```

我正在从事件中调用`AddButtonToNewDropdown()`方法。`ThisAddIn_Startup`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:10:26.037

您需要`CommandBarButton`在范围内创建一个类成员变量 - 否则它将被垃圾收集，并且事件不会像您观察到的那样触发。

```
public class ThisAddIn
{
   Office.CommandBarButton commandBarButton;

   private void AddButtonToNewDropdown()
   {
     // ...
   }
} 
```

请参阅[有关类似问题的相关 SO 帖子](https://stackoverflow.com/a/9539705/175679)。

# python - 处理（在 python 中）IOError 的正确方法是什么：[Errno 4] Interrupted system call，由 multiprocessing.Queue.get 引发

> ID：14136195
> 
> 赞同：13
> 
> 时间：2013-01-03T09:36:38.160
> 
> 标签：python, error-handling, queue, multiprocessing, ioerror

当我使用 multiprocessing.Queue.get 时，有时由于 EINTR 会出现异常。

我肯定知道有时这种情况没有充分的理由发生（我在 tmux 缓冲区中打开另一个窗格），在这种情况下，我想继续工作并重试该操作。

我可以想象，在其他一些情况下，错误是有充分理由的，我应该停止运行或修复一些错误。

我怎样才能区分这两者？

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T16:08:05.743

当`EINTR`应用程序在等待其他输入时接收到信号时，许多系统调用都会返回错误。通常，这些信号可能是非常良性的，并且已经由 Python 处理，但底层系统调用最终仍会被中断。在进行 C/C++ 编码时，这是您不能完全依赖`sleep()`. Python 库有时会在内部处理此错误代码，但显然在这种情况下它们不是。

您可能有兴趣阅读讨论此问题的[线程。](https://groups.google.com/forum/?fromgroups=#!topic/comp.lang.python/rjz11HXE8bo)

一般的方法是简单地处理错误并再次重试操作 - 这对于队列上`EINTR`的方法应该是安全的。`get()`可以使用这样的东西，将队列作为参数传递并替换`get()`队列上方法的使用：

```
import errno

def my_queue_get(queue, block=True, timeout=None):
    while True:
        try:
            return queue.get(block, timeout)
        except IOError, e:
            if e.errno != errno.EINTR:
                raise

# Now replace instances of queue.get() with my_queue_get(queue), with other
# parameters passed as usual. 
```

通常你不需要担心`EINTR`Python 程序，除非你知道你正在等待一个特定的信号（例如`SIGHUP`）并且你已经安装了一个信号处理程序，它设置一个标志并依赖于代码的主体来拿起旗帜。在这种情况下，您可能需要跳出循环并检查信号标志（如果收到`EINTR`.

但是，如果您没有使用任何信号处理，那么您应该能够忽略`EINTR`并重复您的操作 - 如果 Python 本身需要对信号做一些事情，它应该已经在信号处理程序中处理了它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-02T11:07:08.393

老问题，现代解决方案：从 Python 3.5 开始，精彩的[PEP 475 - Retry system calls failed with EINTR](https://www.python.org/dev/peps/pep-0475/)已经实现并为您解决了问题。这是摘要：

> 标准库中提供的系统调用包装器应在失败时自动重试`EINTR`，以减轻应用程序代码这样做的负担。
> 
> 系统调用是指标准 C 库公开的与 I/O 或其他系统资源处理有关的函数。

基本上，系统会为你捕获并重试一段失败的代码，`EINTR`这样你就不必再处理它了。如果您的目标是较旧的版本，那么`while True`循环仍然是要走的路。但是请注意，如果您使用的是 Python 3.3 或 3.4，则可以捕获专用异常[`InterruptedError`](https://docs.python.org/3.3/library/exceptions.html#InterruptedError)，而不是捕获`IOError`和检查`EINTR`.

# sql - 如何将具有特定时间的当前日期分配给列？

> ID：14136197
> 
> 赞同：1
> 
> 时间：2013-01-03T09:36:47.430
> 
> 标签：sql, sql-server, sql-server-2005, datetime, ssis

如何为当前日期分配特定时间？

假设上午 8:00:00 到数据类型的列 EXIT_DT `datetime`？

我试过`GETDATE()`AS EXIT_DT 但它给了我当前的日期时间。我正在使用 Sql server 2005。有什么帮助吗？

假设今天是 2013 年 1 月 3 日，我希望我的结果作为日期时间数据类型返回，值为 1/3/2013 8:00:00 AM。如果我运行 ytd 语句，结果将是 1/2/2013 8:00:00 AM

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T10:06:39.313

此公式将始终在调用当天生成 08:00，并避免字符串操作：

```
select DATEADD(day,DATEDIFF(day,'20010101',GETDATE()),'2001-01-01T08:00:00') 
```

尽量避免与字符串相互转换的解决方案 - 将日期时间值视为字符串是最大的错误来源之一。

它的工作原理是计算自 2001 年 1 月 1 日以来经过的天数（作为整数）。然后将相同的天数添加到 2001 年 1 月 1 日的 08:00。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:03:05.057

你可以试试这个：

```
DECLARE  @dt datetime;

SET @dt=CONVERT(DateTime, CONVERT(VARCHAR,GETDATE(),101)+' 8:00:00')

SELECT CONVERT(VARCHAR, @dt, 101)+'  '+ LTRIM(RIGHT(CONVERT(VARCHAR(20),@dt, 100), 7)) 
```

有关格式，请访问[http://www.sql-server-helper.com/tips/date-formats.aspx 。](http://www.sql-server-helper.com/tips/date-formats.aspx)`datetime`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:44:38.433

使用 Convert 和 getdate() 来获取特定格式。

前任：

```
SELECT CONVERT(VARCHAR(30),GETDATE(),113) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:09:01.330

这有点愚蠢，但它有效

```
select cast(cast(getdate() as date) as datetime) + '08:00:00' 
```

它将 the 投射`getdate()`到`date`从而失去了几个小时，而不是将它投射到`datetime`并增加了 8 个小时。

如果你想避免 to 的隐式转换`varchar`，`datetime`你可以使用这个版本：

```
select cast(cast(getdate() as date) as datetime) 
     + convert(datetime,'08:00:00',114) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T10:14:44.523

这也有效。(1)。将今天的日期转换为`ISO format (yyyymmdd)` (2)。添加时间，（3）。转换回日期时间

```
Select convert(datetime, convert(varchar, getdate(),112) + ' ' + '8:00:00AM')
--Results
2013-01-03 08:00:00.000 
```

如果您需要特定格式，则需要再次转换回 varchar。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T14:01:35.110

```
-- AM/PM --
SELECT TO_CHAR(sysdate, 'MM/DD/YYYY HH:MI:SS AM') FROM dual
/

-- 24 hrs format --
SELECT TO_CHAR(sysdate, 'MM/DD/YYYY HH24:MI:SS') FROM dual
/ 
```

# jquery - 使用 jquery 添加表行

> ID：14136200
> 
> 赞同：0
> 
> 时间：2013-01-03T09:37:00.580
> 
> 标签：jquery, html

我尝试将行添加到表中，但这不起作用，甚至没有给出任何错误，错误在哪里？我添加了计数器变量，以便它增加 id ，以便值正确存储在数据库中

```
<html>
    <head>

    <%--<script type="text/javascript" src="jquery-1.3.2.min.js"></script>--%>

     <script type="text/javascript" src=" https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    </head>
    <body>
    <script type="text/javascript">
      $(document).ready(function () {
     var counter = 2;
    $("#addButton").click(function () {
     if (counter > 10) {
     alert("Only 10 rows allowed");
     return false;
    }
    $('#preq > tbody:last').append('<tr id="row'+counter+' "><td><input title="Enter Kind Of work '+counter+'" readonly="readonly" onclick="if(this.value!=''){this.value='';opendrop();}else{opendrop();}" id="other_work'+counter+'" name="other_work'+counter+'" type="text" size="30"    <?php if (isset($errors)) { echo 'value="'.htmlentities(@$_POST['other_work'+counter+'']).'"'; } ?> ></td> <td><input name="client_name'+counter+'" size="40" type="text" id="client_name'+counter+'"/></td><td><input name="firm_name'+counter+'" size="40" type="text" id="firm_name'+counter+'" />  </td>   </tr>');
      counter++;
     });

    </script>
    <table id="preq">
     <tbody>
      <tr>
    <td> 
    <input title="Enter Kind Of work 4" readonly="readonly" onclick="if(this.value!=''){this.value='';opendrop();}else{opendrop();}" id="other_work4" name="other_work4" type="text" size="30"    <?php if (isset($errors)) { echo 'value="'.htmlentities(@$_POST['other_work4']).'"'; } ?> >               
    </td>
     <td><input name="client_name4" size="40" type="text" id="client_name4"/>
    </td>
     <td><input name="firm_name4" size="40" type="text" id="firm_name4" />  </td>   
    </tr>
     </tbody>
    </table>

    <input type='button' value='Add Button' id='addButton' />

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:31:39.833

这是您问题的[答案](http://jsfiddle.net/jq9ng/)。

```
$("#preq tbody").append('<tr id="row"><td></td><td></td><td></td></tr>'); 
```

看看这个演示，这可能会帮助您在表格中添加行。看看这个 JQFAQ.com 并有更多的常见问题解答我希望这将帮助您获得更多的想法。

# html - 如何在跨度内移动文本

> ID：14136201
> 
> 赞同：1
> 
> 时间：2013-01-03T09:37:02.103
> 
> 标签：html, css

我有以下内容：

```
<li>
<a class="dw"><span>Design Goals</span></a>
</li>

.dw {
   background-image: url(/Content/images/icons/fugue/document-globe.png);
} 
```

在我的浏览器中查看时，我看到类似这样的内容

```
iii
iii  xxxxxxxxxxxxxxx
iii  xxxxxxxxxxxxxxx 
```

我代表图像和 x 文本“设计目标”。

有什么方法可以让我向下推背景图像或向上推文本，这样我就可以让它们排列得更多。我尝试向跨度添加填充和边距，但这似乎不起作用。我也尝试了不同的 line-height 组合，但这也不起作用。

我试过： background-position: center 但它看起来像这样：

```
 iii
       xxxxxxiiixxxxxx
       xxxxxxxxxxxxxxx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:40:32.173

使用**[`background-position`](https://developer.mozilla.org/en-US/docs/CSS/background-position)**.

例如：

```
background-position: center 100px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:49:45.650

使用 Div 代替 Span 因为 span 默认显示属性是内联的，div 显示属性是块。如果要向上推文本，请先给出 span 标签。

html

```
<li>
<span>Design Goals</span>
<div  class="dw" ><img src='http://wpcdn.padgadget.com/wp-content/uploads/2010/08/alphabet.jpg'><div>
</li> 
```

css

```
.dw {
height: 100px;
width: 200px;
} 
```

[看演示](http://jsfiddle.net/Dineshkani/L8HjE/)

在这里，我拆分图像，因此只有它出现在文本下方或使用跨度显示属性作为块来获取文本和图像作为第一个[参考](http://jsfiddle.net/Dineshkani/L8HjE/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:15:56.823

将样式应用于列表元素：

```
li {
    background-image: url(http://wpcdn.padgadget.com/wp-content/uploads/2010/08/alphabet.jpg);
}

<li><a href="#">Design Goals</a></li> 
```

# sql-server-2008 - 在 SQL Server Management Studio 中备份连接列表

> ID：14136203
> 
> 赞同：24
> 
> 时间：2013-01-03T09:37:13.857
> 
> 标签：sql-server-2008, ssms

我对 SQL Server Management Studio 中的可用连接列表有疑问。当您尝试建立连接时，会出现一个带有服务器名称的窗口。我已经保存了其中的 20 个，我只需要从下拉列表中进行选择。Management Studio 以不正确的方式关闭后，所有连接都消失了。

对于未来，有没有办法备份这些保存的连接？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-03T10:01:44.120

在“查看”菜单下，选择“已注册服务器”，将出现一个新面板。您可以通过右键单击并选择“新服务器注册”将服务器保存在“本地服务器组”（位于“数据库引擎”下）中。如果要将服务器组织成组，也可以选择“新建服务器组”。

以后，只需在打开 SQL Server Management Studio 时取消登录窗口，然后双击已保存的服务器之一以连接到它。

# php - 单击网页中加载的pdf文档时如何调用Javascript函数？

> ID：14136204
> 
> 赞同：0
> 
> 时间：2013-01-03T09:37:18.163
> 
> 标签：php, javascript, pdf

当我单击网页中加载的 pdf 文档时，我需要调用 javascript 函数。我写的代码如下。但它不起作用。

```
<script language="javascript" type="text/javascript">
function buttonEvent(msg){
    alert(msg);
}

</script>
<embed src="sample.pdf" id="buttonEmbed" width="500" height="600" type="application/pdf"
 onClick="buttonEvent('buttonClicked')"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:47:26.753

PDF 是通过插件加载的，而不是您的 DOM 模型的一部分。这就是为什么无法为嵌入节点侦听除 onload 之外的事件处理程序的原因。

**替代解决方案**

`display more`您可以在嵌入容器外的 PDF 顶部或底部添加一个按钮。将您的点击事件添加到此按钮。

# javascript - 如何触发 jquery ui 手风琴的更改事件？

> ID：14136205
> 
> 赞同：1
> 
> 时间：2013-01-03T09:37:19.360
> 
> 标签：javascript, jquery, jquery-ui, accordion

我知道如何使用 jquery ui Accordion 的 change 事件。

在我单击任何手风琴时，它的更改事件会被触发（因为这是手风琴的默认行为），并且我能够获取此事件中的所有数据，例如 newContent、newHeader 等。

但我想手动触发 Accordion 的更改事件，但我不知道该怎么做。

我也可以在加载手风琴时触发更改事件。

我的页面上有一个手风琴，我想在加载手风琴后立即为每个人触发“更改事件”，因为我的 ajax 代码是用“更改事件处理程序”编写的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:16:44.357

以下代码应该可以完成您想要的工作。

```
$("#accordion").accordion('activate', itemIndex); 
```

# c++ - 打开文件浏览器？

> ID：14136208
> 
> 赞同：1
> 
> 时间：2013-01-03T09:37:32.837
> 
> 标签：c++, winapi, gdi

我正在使用 Win32 和 GDI 制作 3D 渲染器，目前正在导入 .obj 文件。

显示文件资源管理器的最佳方式是什么，用户可以在其中选择 .obj 文件并关闭对话框。（并将文件名/位置存储在一个字符串中供我使用）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:41:44.207

您可以使用旧的 GetOpenFileName 函数：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms646927%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646927%28v=vs.85%29.aspx)。对于 Vista 及更高版本，您可以使用通用项目对话框：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb776913%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776913%28v=vs.85%29.aspx)

# android - CheckedTextView 不切换

> ID：14136213
> 
> 赞同：0
> 
> 时间：2013-01-03T09:37:49.433
> 
> 标签：android, android-listview, android-dialogfragment, checkedtextview

我有一个具有 CheckedTextView 的自定义列表视图。当我单击项目时，它不会切换对象的选中状态并反映在 ui 中。

dialog_categories.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/parentPanel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginEnd="8dip"
    android:layout_marginStart="8dip"
    android:background="@color/primary_white"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/title_template"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginEnd="16dip"
        android:layout_marginStart="16dip"
        android:gravity="center_vertical|start"
        android:orientation="horizontal"
        android:paddingTop="5dp" >

        <TextView
            android:id="@+id/textView1"
            style="?android:attr/textAppearanceLarge"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingLeft="10dp"
            android:text="@string/dialog_category_title"
            android:textColor="@color/primary_color"
            android:textSize="22sp" />

        <TextView
            android:id="@+id/all"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/dialog_category_checkbox"
            android:textColor="@color/primary_color" />

        <CheckBox
            android:id="@+id/checkBoxAll"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="6dp" />
    </LinearLayout>

    <View
        android:id="@+id/titleDivider"
        android:layout_width="match_parent"
        android:layout_height="2dip"
        android:background="@color/black" />

    <LinearLayout
        android:id="@+id/contentPanel"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:minHeight="64dp"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/listViewDialog"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </ListView>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/buttonPanel"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button_category_ok"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/dialog_category_btn_ok"
            android:textSize="14sp" />
    </LinearLayout>

</LinearLayout> 
```

dialog_list_item_category.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <CheckedTextView
        android:id="@+id/categories_checkbox"
        android:layout_width="fill_parent"
        android:layout_height="?android:attr/listPreferredItemHeight"
        android:checkMark="?android:attr/listChoiceIndicatorMultiple"
        android:gravity="center_vertical"
        android:onClick="toggle"
        android:text="sss" />

</RelativeLayout> 
```

CategoriesDialogFragment.java

```
public class CategoriesDialogFragment extends SherlockDialogFragment {
    CheckBox checkAll;
    ListView categoriesListView;
    CategoriesListAdapter adapter;
    static Category category;

    String[] categories = new String[] { "Hill Station", "Beach", "Historic",
            "Wild Life", "Waterfall", "River", "Archeology" };
    String[] categories_state = new String[] { "1", "0", "1", "1", "1", "1",
            "0" };

    public static CategoriesDialogFragment newInstance() {
        CategoriesDialogFragment frag = new CategoriesDialogFragment();
        Bundle args = new Bundle();
        frag.setArguments(args);
        return frag;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        final Dialog dialog = new Dialog(MainActivity.context);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);

        dialog.setContentView(R.layout.dialog_categories);

        categoriesListView = (ListView) dialog
                .findViewById(R.id.listViewDialog);

        List<Category> theCategories = new ArrayList<Category>();
        for (int i = 0; i < categories.length; i++) {
            Category pl = new Category(categories[i], false);
            theCategories.add(pl);
        }

        categoriesListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        adapter = new CategoriesListAdapter(MainActivity.context,
                R.layout.dialog_list_item_category, theCategories);

        categoriesListView.setAdapter(adapter);

        checkAll = (CheckBox) dialog.findViewById(R.id.checkBoxAll);
        checkAll.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {

                Toast.makeText(MainActivity.context, "Check",
                        Toast.LENGTH_SHORT).show();

                if (isChecked) {
                    for (int i = 0; i < adapter.getCount(); i++) {
                        category = adapter.getItem(i);
                        category.setChecked(true);
                    }
                    adapter.notifyDataSetChanged();
                } else {
                    for (int i = 0; i < adapter.getCount(); i++) {
                        category = adapter.getItem(i);
                        category.setChecked(false);
                    }
                    adapter.notifyDataSetChanged();
                }

            }
        });
        return dialog;

    }

    private static class CategoriesListAdapter extends ArrayAdapter<Category> {
        public Context mContext;

        List<Category> mCategories;

        public CategoriesListAdapter(Context context, int resource,
                List<Category> categories) {
            super(context, resource, categories);
            // TODO Auto-generated constructor stub
            this.mCategories = categories;
            this.mContext = context;

        }

        public int getCount() {
            return mCategories.size();
        }

        @Override
        public Category getItem(int position) {
            // TODO Auto-generated method stub
            return mCategories.get(position);
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            ViewHolder holder;

            if (convertView == null) {
                LayoutInflater viewInflater;
                viewInflater = LayoutInflater.from(getContext());
                convertView = viewInflater.inflate(
                        R.layout.dialog_list_item_category, null);

                holder = new ViewHolder();
                holder.categoryName = (CheckedTextView) convertView
                        .findViewById(R.id.categories_checkbox);

                convertView.setTag(holder);

            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.categoryName.setText(mCategories.get(position)
                    .getCategoryName());

            return convertView;
        }

        static class ViewHolder {
            CheckedTextView categoryName;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:50:09.953

您是否使用了正确的 xml？有 dialog_list_item_categories.xml 但在您的代码中您在任何地方都使用 R.layout.dialog_list_item_category

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:54:44.603

你能用`android.R.layout.simple_list_item_multiple_choice`代替`dialog_list_item_category.xml`吗？

**更新：** @Luksprog 的评论是解决方案：删除`RelativeLayout`它，它就像 with 一样工作`android.R.layout.simple_list_item_multiple_choice`。

# linux - 将 github 存储库的内容替换为文件夹的内容

> ID：14136215
> 
> 赞同：1
> 
> 时间：2013-01-03T09:37:59.990
> 
> 标签：linux, github

我正在尝试用文件夹的内容替换 github 存储库的内容。我已经尝试过`git push`，但它似乎没有做任何事情，除非我使用命令行单独添加每个文件。是否有任何命令可用于将存储库的内容替换为文件夹的内容？

我的存储库在这里：[https ://github.com/jarble/downloadedModules](https://github.com/jarble/downloadedModules)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:43:28.950

`git add`将您修改的文件添加到稍后提交的队列中

以下是添加文件并推送到存储库的步骤：

```
git add <file/folder>
git commit -m "Checkin in code"
git push -u origin master 
```

有关详细说明，请参阅[此答案](https://stackoverflow.com/a/6143352/1268844)

# asp.net - 删除 vs2012 消息

> ID：14136216
> 
> 赞同：3
> 
> 时间：2013-01-03T09:38:02.427
> 
> 标签：asp.net, visual-studio

在 VS2012 中，我收到很多消息，而不是错误，只是如下消息

“ Message2 Validation (ASP.Net): 属性 'placeholder' 不是元素 'TextBox' 的有效属性。”

由于我的文档类型是 html5，即使它们是 asp:Textbox，该属性也是有效的。为什么我会收到这些消息？是否需要在 VS 中更改设置以删除这些设置，因为它们看起来很烦人。

# network-programming - 蓝牙网状网络？

> ID：14136218
> 
> 赞同：24
> 
> 时间：2013-01-03T09:38:11.413
> 
> 标签：network-programming, bluetooth, arduino, network-protocols, mesh-network

我有一个想法，我想知道这是否可能。我用谷歌搜索了它，似乎找不到任何现有的解决方案。我正在考虑拥有一个蓝牙网状网络。我希望实现的布局是有一个中央站（带有蓝牙加密狗的 PC），然后是一堆蓝牙模块（最好是[这些](http://dx.com/p/jy-mcu-arduino-bluetooth-wireless-serial-port-module-104299)），它们都将与周围的模块形成一个网状网络。并非所有这些都在“中心站”的范围内，但需要通过其他节点与之通信。如果有任何区别，蓝牙模块将连接到 ATtiny85 芯片。如果你有问题，就问吧。

1.  这可能吗？
2.  上面的蓝牙模块可以吗？
3.  它们都必须单独设置还是可以进行某种邻居发现？
4.  会不会有安全隐患？
5.  网络规模的限制是什么？
6.  我应该从哪里开始？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-25T14:23:13.527

CSR 交付 BLE 网状网络解决方案

[http://www.csr.com/news/pr/2014/csr-mesh](http://www.csr.com/news/pr/2014/csr-mesh)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-01T18:03:32.807

不确定您是否找到了合理的解决方案，我是 BLE 的新手，并且也在考虑拥有一个 BLE 网格，它可以允许将信号传输到几英里左右。这样，传感器可以放置在偏远的农村地区，并利用多跳传感器，数据可以传输到中央控制站。但是，到目前为止，我还没有看到可以根据需要承担这两种角色的双模式传感器。

另一种方法是使用 TCP/IP 桥接器。这样，设备（可以是 iPhone 或 Android）会监听广告数据，创建 IP 数据包并将其发送到远程服务器。显然，要实现这一点，您需要有可用的蜂窝数据网络。但授予无处不在的数据网络或 Wi-Fi 覆盖，这个解决方案对我来说听起来更有希望。

注意：这里[http://www.bluetooth.com/Pages/low-energy-tech-info.aspx](http://www.bluetooth.com/Pages/low-energy-tech-info.aspx)他们谈论星型拓扑，下面是摘录：

**拓扑**- 蓝牙低功耗技术在每个从站的每个数据包上使用 32 位访问地址，允许连接数十亿台设备。该技术针对一对一连接进行了优化，*同时允许使用星形拓扑进行一对多连接*。通过使用快速连接和断开连接，数据可以在网状拓扑中移动，而无需维护网状网络的复杂性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-25T14:19:33.160

也看看 FruityMesh。它是基于标准蓝牙低功耗 4.1 连接的网状网络的开源实现。

他们将 Nordic nRF51 芯片组与 S130 SoftDevice 结合使用。

在 github 上找到：[https ://github.com/mwaylabs/fruitymesh/wiki](https://github.com/mwaylabs/fruitymesh/wiki)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-21T19:58:36.030

So bluetooth - as clearly pointed out in the comments - is not designed for mesh networking. Nor, honestly would you want to. It would be far to expensive both in fincances AND in processing time and battery power to handle such an operation.

Instead, why not use XBee? [https://www.sparkfun.com/search/results?term=xbee&what=products](https://www.sparkfun.com/search/results?term=xbee&what=products)

These XBee modules are not only designed to do EXACTLY what you want, but they are low cost and HEAVILY documented.

A much better choice for your wifi mesh.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-24T18:51:39.297

好吧，理论上应该可以使用 BLE 设备构建网状网络行为，尽管它不是这样设计的。

这个想法是利用 BLE 的设计这一事实，以便它可以在断开连接时工作。

因此，您可以处理与您的设备的两个连接：一个作为蓝牙主设备，另一个作为蓝牙从设备。然后你可以作为slave运行一次，并监听下一个设备的服务，看看是否有任何事件，如果有，成为master并将事件广播到前一个设备，直到事件到达主机。棘手的部分是调整时间，使其快速平稳地工作。

另一种不应该被破解的方法是为网状拓扑构建一个 ANT 网络，同时让 BLE 能够将每个节点连接到支持蓝牙的设备。你可以使用类似[nRF51422](https://www.nordicsemi.com/eng/Products/ANT/nRF51422)的东西来做这样的事情。

高温高压

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-06T01:13:38.580

据我了解，蓝牙旨在以低功耗进行数据传输。因此，与 802.15.4 相比，蓝牙显示出更短的通信范围，这意味着可以使用更多设备来构建网络。而且我认为 BLE 只是一个名称，只是一些预编程到芯片 ROM 中的代码。如果有足够的编码经验，任何人都可以修改 BLE 协议。

# c# - 如何使用javascript更新并重定向到上一页

> ID：14136221
> 
> 赞同：0
> 
> 时间：2013-01-03T09:38:21.833
> 
> 标签：c#, javascript, jquery, asp.net

我有一个新闻页面可以添加女巫评论。如果我单击评论，我会转到评论页面，我可以在其中选择删除评论。如果我删除评论，我想返回新闻页面并刷新页面，以便评论消失。

我尝试添加它，但没有达到删除功能

```
<asp:Button runat="server" ID="btnRemoveComment" Text="Ta bort" OnClientClick="JavaScript: window.history.back(1); return false;" /> 
```

评论页.aspx

```
<asp:Button runat="server" ID="btnRemoveComment" /> 
```

评论页.aspx.cs

```
protected override void OnLoad(EventArgs e)
{
  btnRemoveComment.Click += btnRemoveComment_Click;
}

private void btnRemoveComment_Click(object sender, EventArgs e)
{
  CommentFactory.RemoveComment(CurrentPage);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:49:23.390

一个按钮不能应用两个事件，它是 javascript 或代码隐藏。尝试在代码隐藏中重定向并使用 Ajax 进行动态更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:47:29.447

我不认为在新闻页面和评论页面之间来回切换是可以的。尝试这个

```
private void btnRemoveComment_Click(object sender, EventArgs e)
{
  CommentFactory.RemoveComment(CurrentPage);
  Response.Redirect("news.aspx");
} 
```

# apache-flex - 使用 ANT Build 运行 Flex 单元测试失败 - 加载初始内容时出错

> ID：14136223
> 
> 赞同：0
> 
> 时间：2013-01-03T09:38:24.253
> 
> 标签：apache-flex, ant, flex4, automation

我正在使用示例 Flex AIR 应用程序来自动化我的 Flex 单元测试并使用持续集成 ANT BUILD 运行它们。但是当我运行 ANT Build 时，我面临以下错误。这是我的控制台错误。

```
Buildfile: C:\Users\akishore\Adobe Flash Builder 4.6\TwitterClient-CI\build.xml
build:
clean:
   [delete] Deleting directory C:\Users\akishore\Adobe Flash Builder 4.6\TwitterClient-CI\deploy
   [delete] Deleting directory C:\Users\akishore\Adobe Flash Builder 4.6\TwitterClient-CI\report
init:
    [mkdir] Created dir: C:\Users\akishore\Adobe Flash Builder 4.6\TwitterClient-CI\deploy
    [mkdir] Created dir: C:\Users\akishore\Adobe Flash Builder 4.6\TwitterClient-CI\report
setup:
     [copy] Copying 1 file to C:\Users\akishore\Adobe Flash Builder 4.6\TwitterClient-CI\deploy
     [copy] Copying 1 file to C:\Users\akishore\Adobe Flash Builder 4.6\TwitterClient-CI\deploy\snapshots
compile:
     [java] Loading configuration file C:\Program Files\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0\frameworks\air-config.xml
     [java] C:\Users\akishore\Adobe Flash Builder 4.6\TwitterClient-CI\deploy\TwitterClient.swf (5691817 bytes)
execute_tests:
 [flexunit] Validating task attributes ...
 [flexunit] Generating default values ...
 [flexunit] Using default working dir [C:\Users\akishore\Adobe Flash Builder 4.6\TwitterClient-CI]
 [flexunit] Using the following settings for the test run:
 [flexunit]     FLEX_HOME: [C:\Program Files\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0]
 [flexunit]     haltonfailure: [false]
 [flexunit]     headless: [false]
 [flexunit]     display: [99]
 [flexunit]     localTrusted: [true]
 [flexunit]     player: [air]
 [flexunit]     port: [1024]
 [flexunit]     swf: [null]
 [flexunit]     timeout: [60000ms]
 [flexunit]     toDir: [C:\Users\akishore\Adobe Flash Builder 4.6\TwitterClient-CI\report]
 [flexunit] Setting up server process ...
 [flexunit] Starting server ...
 [flexunit] Opening server socket on port [1024].
 [flexunit] Waiting for client connection ...
 [flexunit] Executing 'C:\Program Files\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0\\bin\adl.exe' with arguments:
 [flexunit] 'C:\Users\akishore\Adobe Flash Builder 4.6\TwitterClient-CI\deploy\TwitterClient-app.xml'
 [flexunit] The ' characters around the executable and arguments are
 [flexunit] not part of the command.
 [flexunit] error while loading initial content 
```

# jquery - 折叠某些组 jqGrid

> ID：14136224
> 
> 赞同：5
> 
> 时间：2013-01-03T09:38:29.423
> 
> 标签：jquery, jqgrid

我正在使用带有分组列**的 jqGrid-4.4.1 。**

我很清楚[jqGrid 文档中的分组选项](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3agrouping)

```
....
groupingView: { 
              groupField: ['Group'],
              groupColumnShow: [false],
              groupCollapse: true

},
.... 
```

但是，这会折叠表中的所有组。我只想折叠几组而不是全部。

假设我在表中有 3 个组。然后我确实想只折叠其中的一个，其余的应该是打开的。

可能吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T21:25:34.090

我不知道任何允许单独组配置的配置参数，但一种可能的解决方案是从未分组的网格开始，然后使用以下方法折叠所需的组：

```
jQuery(tableName).jqGrid('groupingToggle',groupHeading); 
```

数据加载后。

如果您访问[演示页面](http://www.trirand.com/blog/jqgrid/jqgrid.html)，单击“分组”标题，然后单击“使用数组数据进行简单分组”，您可以使用以下方式切换第三组：

```
jQuery('#list48').jqGrid('groupingToggle','list48ghead_0_2') 
```

例如。

# android - android中edittext中的电话号码格式

> ID：14136226
> 
> 赞同：3
> 
> 时间：2013-01-03T09:38:34.063
> 
> 标签：android

如何在android的edittext中输入电话号码时以（xxx）xxx-xxxxx格式设置电话号码？

我想要 (,),- 字符会自动添加到特定位置。

**我写了代码，但它只适用于andorid 2.2版本，不适用于以上版本。** 我在stackoverflow中搜索了更多问题。我无法得到它。

请检查我的代码：

```
phone.addTextChangedListener(new TextWatcher () {

            @Override
            public void afterTextChanged(Editable chars) {
                // TODO Auto-generated method stub
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub
            }

            @Override
            public void onTextChanged(final CharSequence s, final int start, int lengthBefore,
                    int lengthAfter) {
                // TODO Auto-generated method stub
                count = start;

                /*if (phone.getText().length() <= 0) {
                    phone.append("(");
                    phone.setSelection(1);
                }else if (count == 3) {
                    phone.append(")");
                }else if (count == 7) {
                    phone.append("-");
                }

            */

            }
        });

phone.setOnKeyListener(new OnKeyListener (){

                @Override
                public boolean onKey(View arg0, int arg1, KeyEvent arg2) {
                    // TODO Auto-generated method stub
                    if(arg1 == KeyEvent.KEYCODE_DEL){
                        if(count > 0){
                            count = count - 1;
                        }
                    }else{
                        if(phone.getText().length() <= 0){
                            phone.append("(");
                        }else{
                            if(count  == 3){
                                phone.append(")");
                            }else if(count == 7){
                                phone.append("-");
                            }
                        }
                    }
                    return false;
                }

            });

        } 
```

**Logcat 显示为：**

```
01-03 15:07:23.529: W/InputManagerService(153): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40900f88
01-03 15:07:23.529: D/StatusBarPolicy(221): mFullChargeListener
01-03 15:07:25.749: V/AudioPolicyManager(84): startOutput() output 1, stream 1, session 1488
01-03 15:07:25.749: V/AudioPolicyManager(84): changeRefCount() stream 1, count 1
01-03 15:07:25.749: V/AudioPolicyManager(84): getDeviceForStrategy() from cache strategy 0, device 2
01-03 15:07:25.749: V/AudioPolicyManager(84): getNewDevice() selected device 2
01-03 15:07:25.749: V/AudioPolicyManager(84): setOutputDevice() output 1 device 2 delayMs 0
01-03 15:07:25.749: V/AudioPolicyManager(84): setOutputDevice() setting same device 2 or null device for output 1
01-03 15:07:25.749: V/AudioPolicyManager(84): releaseOutput() 1
01-03 15:07:25.769: V/AudioHardwareMSM72XX(84): open driver
01-03 15:07:25.769: V/AudioHardwareMSM72XX(84): get config
01-03 15:07:25.769: V/AudioHardwareMSM72XX(84): set config
01-03 15:07:25.769: V/AudioHardwareMSM72XX(84): buffer_size: 4800
01-03 15:07:25.769: V/AudioHardwareMSM72XX(84): buffer_count: 2
01-03 15:07:25.769: V/AudioHardwareMSM72XX(84): channel_count: 2
01-03 15:07:25.769: V/AudioHardwareMSM72XX(84): sample_rate: 44100
01-03 15:07:25.939: W/AudioFlinger(84): write blocked for 164 msecs, 61 delayed writes, thread 0xcdd0
01-03 15:07:26.009: V/AudioPolicyManager(84): stopOutput() output 1, stream 1, session 1488
01-03 15:07:26.009: V/AudioPolicyManager(84): changeRefCount() stream 1, count 0
01-03 15:07:26.009: V/AudioPolicyManager(84): getNewDevice() selected device 0
01-03 15:07:26.009: V/AudioPolicyManager(84): setOutputDevice() output 1 device 0 delayMs 0
01-03 15:07:26.009: V/AudioPolicyManager(84): setOutputDevice() setting same device 0 or null device for output 1
01-03 15:07:26.699: V/AudioPolicyManager(84): startOutput() output 1, stream 1, session 1489
01-03 15:07:26.699: V/AudioPolicyManager(84): changeRefCount() stream 1, count 1
01-03 15:07:26.699: V/AudioPolicyManager(84): getDeviceForStrategy() from cache strategy 0, device 2
01-03 15:07:26.699: V/AudioPolicyManager(84): getNewDevice() selected device 2
01-03 15:07:26.699: V/AudioPolicyManager(84): setOutputDevice() output 1 device 2 delayMs 0
01-03 15:07:26.699: V/AudioPolicyManager(84): setOutputDevice() setting same device 2 or null device for output 1
01-03 15:07:26.699: V/AudioPolicyManager(84): releaseOutput() 1
01-03 15:07:26.859: V/AudioPolicyManager(84): stopOutput() output 1, stream 1, session 1489
01-03 15:07:26.859: V/AudioPolicyManager(84): changeRefCount() stream 1, count 0
01-03 15:07:26.859: V/AudioPolicyManager(84): getNewDevice() selected device 0
01-03 15:07:26.859: V/AudioPolicyManager(84): setOutputDevice() output 1 device 0 delayMs 0
01-03 15:07:26.859: V/AudioPolicyManager(84): setOutputDevice() setting same device 0 or null device for output 1
01-03 15:07:27.499: I/StatusBarPolicy(221): BAT. status:5 health:2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:49:54.377

如果有帮助，请尝试使用此库：

[http://code.google.com/p/libphonenumber/](http://code.google.com/p/libphonenumber/)

或试试这个：

```
 String formattedNumber = PhoneNumberUtils.formatNumber(unformattedNumber); 
```

这将根据号码所在国家/地区的规则自动格式化号码。

您还可以使用以下方法就地格式化可编辑文本：

```
 PhoneNumberUtils.formatNumber(Editable text, int defaultFormattingType); 
```

请查看 PhoneNumberUtils 以获得更多选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T01:41:20.527

您可以注册一个将格式化电话号码的文本更改侦听器。[android.telephony 包](http://developer.android.com/reference/android/telephony/PhoneNumberFormattingTextWatcher.html)中有一个内置的。

它很容易使用：

```
 phoneNumberEditText.addTextChangedListener(new PhoneNumberFormattingTextWatcher()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:21:30.823

**在你的 xml 中试试这个。**

```
 <EditText android:id="@+id/editText1"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:layout_weight="1"
   android:ems="10"
   android:inputType="phone" >
    <requestFocus />
 </EditText> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T13:45:50.360

我认为android API可以做到这一点已经检查了 专门用于美国/美国格式化[FormatNanpNumber（String）](http://developer.android.com/reference/android/telephony/PhoneNumberUtils.html#formatNanpNumber%28android.text.Editable%29)方法的[PhoneNumberUtils 。](http://developer.android.com/reference/android/telephony/PhoneNumberUtils.html)

# objective-c - 按下快捷键时禁用菜单突出显示

> ID：14136232
> 
> 赞同：0
> 
> 时间：2013-01-03T09:39:28.690
> 
> 标签：objective-c, nsmenu

我想禁用当您按下分配给属于相关特定菜单的 NSMenuItem 的快捷键时发生的应用程序“菜单突出显示”。

问题是，在应用程序中，您经常使用键盘，并且一直突出显示菜单变得有点烦人，但我仍然希望在那里有菜单（包括快捷方式），因为它向用户显示哪些操作可以使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:44:15.953

声明一个自定义 NSMenuItem 子类并开始使用该自定义类而不是 NSMenuItem。

在此类中，您应该重写此方法：

```
- (BOOL)isHighlighted
{
    return NO;
} 
```

这样您就不会突出显示菜单项。

**编辑**

尝试这个：

```
[item setOnStateImage: item.offStateImage]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T19:47:05.637

FFR：在文档中查找以下方法：

```
- (BOOL)validateMenuItem:(NSMenuItem *)menuItem 
```

适用于选择菜单项和相关的命令键。

在您的 NSDocument 中提供一个正文，`validateMenuItem` 例如，

```
- (BOOL)validateMenuItem:(NSMenuItem *)menuItem 
{
    SEL theAction = [menuItem action];
    if (theAction == @selector(openPreferencesPanel:)) {
        return !_isCurrentlyModal;                   //A BOOL in MyDocument
    }
    return [super validateMenuItem:menuItem];           // Keep this for proper cut, paste, etc validation
} 
```

在您的情况下，上述选择器可能是`highlight:`. 检查笔尖/xib 并检查它。它可能附加到第一响应者。复制方法名称。

还可以查看更一般的项目（按钮等），还包括菜单项。

```
- (BOOL)validateUserInterfaceItem:(id <NSValidatedUserInterfaceItem>)anItem 
```

# javascript - 获取 jcarousel 中当前项目的 id

> ID：14136233
> 
> 赞同：1
> 
> 时间：2013-01-03T09:39:35.890
> 
> 标签：javascript, jquery

我希望在我的轮播中突出显示当前的点分页按钮，所以我试图将一个类添加到正在使用的任何特定的类中，由于某种原因这不起作用，它添加了没有问题但没有添加活动的非活动类，所以它似乎没有认出我。我只是 js 的新手，我错过了一些明显的东西吗？

```
jQuery(document).ready(function() {
jQuery('#right-carousel').jcarousel({
    start: 1, // Configuration goes here
    wrap: "circular",
    scroll: 1,
    auto:3,
    vertical:true,

    itemFirstInCallback: {
    onBeforeAnimation: function(carousel, item, index, action, c, o, i, s ) {
        if (carousel_2) {
            carousel_2[action]();
        }
        i = (i - 1) % $('#right-carousel li').size();
        jQuery('.jcarousel-pagination a').addClass('inactive');
            jQuery('.jcarousel-pagination a:eq('+i+')').removeClass('inactive').addClass('active');

    jQuery('.jcarousel-pagination a').bind('click', function() {
    carousel.scroll(jQuery.jcarousel.intval(jQuery(this).attr('id')));
    return false;
        }); 

            }
        }

    });

}); 
```

再补充一个细节，主要问题似乎是即使我在函数中声明它，i 也没有定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T03:25:17.217

如果您将分页点（.jcarousel-pagination）放入 jcarousel 容器中，此代码应该可以工作。它还应该与多个轮播一起使用：

```
jQuery(document).ready(function() {

function mycarousel_initCallback(carousel, state) {
    jQuery(carousel.container).find('.jcarousel-pagination a').bind('click', function() {
      carousel.scroll(parseInt(jQuery(this).attr('id')));
      return false;
    });

    jQuery(carousel.container).find('#mycarousel-next').bind('click', function() {
      carousel.next();
      return false;
    });

    jQuery(carousel.container).find('#mycarousel-prev').bind('click', function() {
      carousel.prev();
      return false;
    });
}

function mycarousel_visibleCallback(carousel, item, index, state){
  var dot = jQuery(carousel.container).find(".jcarousel-pagination a#" + index);
  dot.siblings().removeClass("active");
  dot.addClass("active");
}

jQuery('#right-carousel').jcarousel({
    start: 1, // Configuration goes here
    wrap: "circular",
    scroll: 1,
    auto:3,
    vertical:true,
    initCallback: mycarousel_initCallback,
    itemVisibleInCallback: mycarousel_visibleCallback
    });

}); 
```

# javascript - 定位动态创建的按钮

> ID：14136237
> 
> 赞同：0
> 
> 时间：2013-01-03T09:39:47.103
> 
> 标签：javascript, jquery, html, positioning

我创建了四个文本框，当我单击删除按钮时，它会添加另一组带有删除按钮的文本框，如下所示：

![图片](../Images/d8c38d6ea849d4d5c62d0766f9d9da8c.png)

这是我的剧本

```
$(document).ready(function() {
    $("#add").click(function () {
        $('.main').append("<div><br />" + $('.append_list').html() + '<button class="rmv_btn" onclick="$(this.parentNode).remove()">Remove</button></div>');
    });
}); 
```

如何在动态创建的第一个文本框旁边添加此按钮？

参考这个[问题](https://stackoverflow.com/q/14119764/1716774)

**输出图像**

![在此处输入图像描述](../Images/35b0a3e142945c76ea4ccaa6be7c4a02.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:09:04.077

看到这个：http: [//jsfiddle.net/MpEUZ/5/](http://jsfiddle.net/MpEUZ/5/)

```
$(document).ready(function() {
$("#add").click(function() {
    $('.main > :first-child').clone().appendTo('.main').find('input[type=text]').val('');
    $('.main .append_list:last').find('input[type=text]:first').after("<button class='rmv_btn' style='clear:both'> Remove </button>");

});
$('.main').on("click", ".rmv_btn", function() {
    $(this).parent().remove();
});
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:55:05.970

Create a temporary container in which you insert your cloned input list. Then find the first input in that temp container:

```
$(document).ready(function() {
    $("#add").click(function () {
        var container = $('<div />').addClass('justadded').appendTo('.main');
        $(container).append($('.append_list').html());
        var input = $(container).find('input:first');
        $('<button />').text("Remove").addClass('rmv_btn').attr('onclick', '$(this.parentNode).remove()').insertAfter(input);
        $(container).removeClass('justadded');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:53:58.993

This one should works :

```
$(document).ready(function() {
    $("#add").click(function () {
        var html = $($('.append_list').html());
        html.find('input').first().after('<button class="rmv_btn" onclick="$(this.parentNode).remove()">Remove</button></div>');

        $('.main').append("<div><br />" + html);
    });
}); 
```

I guess `$('.append_list')` is containing the good html for the inputs.

# ios - MonoTouch：无法创建 PSTitleValueSpecifier

> ID：14136238
> 
> 赞同：2
> 
> 时间：2013-01-03T09:39:52.167
> 
> 标签：ios, xamarin.ios, settings, monodevelop, title

我正在尝试`PSTitleValueSpecifier`在我的设置包中创建一个，但是当我运行应用程序并查看设置时它从未出现。根据[Apple 文档](http://developer.apple.com/library/ios/#documentation/PreferenceSettings/Conceptual/SettingsApplicationSchemaReference/Articles/PSTitleValueSpecifier.html#//apple_ref/doc/uid/TP40007015-SW1)，它需要一个名为`DefaultValue`但我无法在 MonoDevelop 中创建它，因为每次我键入`DefaultValue`它都会更改为另一个设置，例如自动更正。

我已经尝试添加它允许我添加的每个键，但我仍然无法得到这个显示。其余设置工作正常（我有 2 个文本字段）。这是一个已知问题还是最新版本有所改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:25:46.560

我使用 Xcode 打开了我的 plist 文件，并且能够在此处设置默认值。这成功了，我现在可以在设置中看到我的 PSTitleValueSpecifier。

# java - 无法在 primefaces 中显示对话框

> ID：14136241
> 
> 赞同：0
> 
> 时间：2013-01-03T09:40:08.267
> 
> 标签：java, jsf, primefaces

4 和 JSF 2.1 , Tomcat6 的示例应用程序。单击 ui:composition 中的图像时，我试图显示一个对话框。但它没有得到显示。如果我在不使用 ui:composition> 的情况下运行它，它工作正常。

这是我的代码

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <script type="text/javascript" src="scripts/jquery-1.7.1.min.js"></script> 
</h:head>
<h:body>
<p:dialog id="dialog" header="Login" widgetVar="dlg">  
    <h:form>
    <h:outputText value="hi"></h:outputText>

    <!-- <h:panelGrid columns="2" cellspacing="5" >
        <h:outputLabel value="OsName" style="color:black"></h:outputLabel>
        <h:inputText value="#{productBean.osName}"></h:inputText>

        <h:outputLabel value="OsFamily" style="color:black"></h:outputLabel>
        <h:inputText value="#{productBean.osFamily}"></h:inputText>

        <h:outputLabel value="OsDescription" style="color:black"></h:outputLabel>
        <h:inputText value="#{productBean.osDescription}"></h:inputText>

        <h:outputLabel value="OsGuid" style="color:black"></h:outputLabel>
        <h:inputText value="#{productBean.osGuid}"></h:inputText>

        <h:outputLabel value="MajorVersion" style="color:black"></h:outputLabel>
        <h:inputText value="#{productBean.majorVersion}"></h:inputText>

        <h:outputLabel value="minorVersion" style="color:black"></h:outputLabel>
        <h:inputText value="#{productBean.minorVersion}"></h:inputText>

        <h:outputLabel value="BuildVersion" style="color:black"></h:outputLabel>
        <h:inputText value="#{productBean.buildVersion}"></h:inputText>

        <h:outputLabel value="OsServicepack" style="color:black"></h:outputLabel>
        <h:inputText value="#{productBean.osServicepack}"></h:inputText>

        <h:outputLabel value="OsRevision" style="color:black"></h:outputLabel>
        <h:inputText value="#{productBean.osRevision}"></h:inputText>

        <h:commandButton value="Back" action="#{productBean.product}" styleClass="button1" ></h:commandButton>
        <h:commandButton value="Next" action="#{productBean.productcustomer}" styleClass="button1" ></h:commandButton>
    </h:panelGrid>
     -->
    </h:form>
</p:dialog>  

<ui:composition template="/pages/templates/layout.xhtml">
            <ui:define name="body" >
    <h:form prependId="false">
    <div class="widget">

  <p:dataTable var="car"   paginator="true" rows="10" >  

        <f:facet name="header">  
            List of Cars  
        </f:facet>  

         <p:columnGroup type="header">  
            <p:row styleClass="edit">  
                <p:column rowspan="3" headerText="Model" sortBy="Model" filterBy="Model" width="" /> 
                <p:column rowspan="3" headerText="Year" sortBy="Year" filterBy="Year"/>
                <p:column rowspan="3" headerText="Company" sortBy="Company" filterBy="Company"/>
                <p:column rowspan="3" headerText="Color" sortBy="Color" filterBy="Color"/>
                <p:column colspan="3" headerText="Actions" />
            </p:row>  

            <p:row styleClass="edit">  
                <p:column><f:facet name="header"><h:outputLink  onclick="showStatus()" title="Edit">
        <p:graphicImage  value="/images/b_edit.png" /></h:outputLink>
    </f:facet></p:column>    
                <p:column><f:facet name="header"><h:outputLink  onclick="showStatus()" title="Delete">
        <p:graphicImage  value="/images/b_drop.png" /></h:outputLink>
    </f:facet></p:column> 
                <p:column><f:facet name="header"><h:outputLink  onclick="dlg.show()" title="View">
        <p:graphicImage  value="/images/search-icon.png" /></h:outputLink>
    </f:facet></p:column> 
            </p:row> 

        </p:columnGroup> 

   </p:dataTable>
   </div>
   </h:form>

   </ui:define>

 </ui:composition>

</h:body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:10:48.037

Facelets 会跳过`<ui:composition>`标签之外的所有内容，因此在这种情况下对话框将不会出现在视图中。您还需要将其放在`<ui:composition>`标签中

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T11:02:23.170

您好，通过将其与布尔变量绑定来尝试呈现的属性。谢谢

# android - Android：wifi和蓝牙一起搜索

> ID：14136243
> 
> 赞同：0
> 
> 时间：2013-01-03T09:40:13.383
> 
> 标签：android, bluetooth, wifi, bonjour

目前我有一个关于同时使用 Android Wifi、蓝牙 API 的问题。

（请注意，这是应用程序开发的问题，而不是普通用户指南）

我在通过 Wifi 搜索设备服务的同时通过蓝牙搜索设备时遇到问题。

**欲了解更多信息：**

*   在 wifi 搜索中，我使用 Bonjour 协议（Apple 的 Zeroconf 实现，可以帮助定位本地网络设备提供的服务）。我使用的 Java 实现是[jmdns](http://jmdns.sourceforge.net)。在搜索会话期间，我创建了一个[MulticastLock](http://developer.android.com/reference/android/net/wifi/WifiManager.MulticastLock.html)以接收 Bonjour 的多播包。

*   在蓝牙搜索中，我只是使用 BluetoothAdapter 和 BroadcastReceiver 来获取蓝牙设备信息。

搜索结果出现问题，每当同时执行上述两个搜索会话时，Bonjour (Wifi) 搜索上的 mysearch 结果永远不会像只执行它时那样得到足够的结果。

*例如：* Bonjour 搜索与蓝牙一起搜索时只获得 1 个而不是 2 个设备的服务。但是，蓝牙搜索结果总是足够的。

这被尝试了很多次，我肯定确认没有与**网络强度**问题有关。

有没有人遇到过这个问题？

即使您的情况是使用Wifi和蓝牙，任何经验或客人对我都非常有帮助！

科伊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:02:50.873

我正在做与你正在做的几乎相同的事情。我的经历不同在于：

*   我不使用蓝牙发现，因为我知道我想连接什么设备。我只是启动一个客户端连接。
*   我使用 Asynctasks 进行后台操作。你在用什么？

* * *

两个可能的问题：

1.  **由于 Android 错误实现，多个 Asynctask 未并行执行**。在将我的 Android API 目标设置为最新的 SDK 后，我遇到了类似的错误（因为这是最佳实践）。现在，在 API13 之后，Android Asynctask 实现发生了变化，任务不再并行执行（所以我的 wifi 线程从未启动，例如，如果蓝牙线程正在运行！！！）。修复方法是添加几行代码以使默认执行程序再次并行，或者仅使用 API11 或更低版本作为目标版本。有关详细信息，请参阅此[线程](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/8M0RTFfO7-M)。

2.  **2\. OverTheAir 之间的干扰**。据我所知，蓝牙发现是您可以在蓝牙上进行的最昂贵的操作。这样2.4GHz的多用途芯片就可能**在空中**被淹没。内部WiFi和BT共存。请记住 2.4GHz 上的 WiFi 和蓝牙通道重叠。因此，我所说的同时在相同的主频率上进行发现可能效果**不佳**。你应该调查一下...

# bash - 从命令替换中退出 bash 脚本

> ID：14136244
> 
> 赞同：2
> 
> 时间：2013-01-03T09:40:19.833
> 
> 标签：bash

是否可以从使用命令替换调用的函数中退出脚本？

例如

```
#/bin/bash
function do_and_check()
{
    ls $1 || exit
}

p=$(do_and_check /etc/passwd)
q=$(do_and_check /xxx) 
```

运行结果是

```
bash -x yyy                                                                                                             
++ do_and_check /etc/passwd                                                                                                                  
++ ls /etc/passwd                                                                                                                             
+ p=/etc/passwd
++ do_and_check /xxx
++ ls /xxx
ls: cannot access /xxx: No such file or directory
++ exit
+ q=
+ echo /etc/passwd
/etc/passwd 
```

我本来希望退出让我脱离脚本，而不是脱离命令替换。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:42:38.013

这个：

```
p=$(do_and_check /etc/passwd) 
```

正在执行一个子shell，这就是您要退出的内容。我会在您的函数中设置退出值（设置为非零值），然后`$?`在命令替换后检查返回值。

# php - 时间不对，但日期没问题

> ID：14136249
> 
> 赞同：-3
> 
> 时间：2013-01-03T09:40:27.743
> 
> 标签：php, mysql

时区错误，但要插入我现在使用的数据库中（）；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T09:41:52.953

PHP 的[`date()`](http://php.net/manual/en/function.date.php)方法适用于设置的任何时区。要设置时区，请使用[`date_default_timezone_set()`](http://php.net/manual/en/function.date-default-timezone-set.php)

从[`date()`](http://php.net/manual/en/function.date.php)文档：

> `E_NOTICE`如果时区无效，则每次调用日期/时间函数都将生成一条消息，如果使用系统设置或 TZ 环境变量，则将生成一条`E_STRICT`or消息。`E_WARNING`也可以看看[`date_default_timezone_set()`](http://php.net/manual/en/function.date-default-timezone-set.php)

这[是支持的时区列表](http://php.net/manual/en/timezones.php)

* * *

尝试这个

```
date_default_timezone_set('Africa/Johannesburg');
$date = date('Y-m-d H:i:s');
echo $date; 
```

* * *

您应该注意，PHP 只会使用运行它的计算机上设置的时间。它不会使用客户端的本地时间。

MySQL 将使用系统时间和 mysql 配置中设置的任何时区。要在 MySQL 中设置时区，请使用

```
SET time_zone = timezonename; 
```

有关详细信息，请参阅[`time_zone`](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_time_zone)sys var 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:43:54.933

您的系统时间可能与服务器时间不同。那是因为您的服务器可能位于不同的位置，并且它的时区可能不同。

你可以设置时区

```
date_default_timezone_set('Africa/Johannesburg'); 
```

# python - 重命名包含名称的图片。_1 表示每个新的一天

> ID：14136254
> 
> 赞同：2
> 
> 时间：2013-01-03T09:40:48.007
> 
> 标签：python, list

我想重命名 Windows 目录中的图片。文件名应如下所示

2012-12-01_1 2012-12-01_2 2012-12-02_1 等等

对于每个新日期，新序列必须以 _1 开头。我尝试以我能想到的所有可能的方式比较列表元素，但没有运气。

我的时间来自：

```
datetime.date.fromtimestamp(os.path.getmtime(os.path.join(target,f)))
where f= each file 
```

我创建的列表如下所示： ['IMG_0288.JPG', 'IMG_0289.JPG', 'IMG_0290.JPG', 'IMG_0291.JPG', 'IMG_0292.JPG', 'IMG_0293.JPG', 'IMG_0294.JPG' , 'IMG_0295.JPG', 'IMG_0296.JPG', 'IMG_0297.JPG', 'IMG_0298.JPG', 'IMG_0299.JPG', 'IMG_0300.JPG', 'IMG_0301.JPG', 'IMG_0302.JPG', ' IMG_0303.JPG'、'IMG_0304.JPG'、'IMG_0305.JPG'、'IMG_0306.JPG'、'IMG_0315.JPG'、'IMG_0323.JPG'、'IMG_0324.JPG'、'IMG_0325.JPG'、'IMG_0326。 JPG'、'IMG_0327.JPG'、'IMG_0328.JPG'、'IMG_0330.JPG'、'IMG_0331.JPG'、'IMG_0333.JPG'、'IMG_0334.JPG'、'IMG_0335.JPG'、'IMG_0336.JPG' , 'IMG_0339.JPG', 'IMG_0340.JPG', 'IMG_0341.JPG'、'IMG_0342.JPG'、'IMG_0343.JPG'、'IMG_0344.JPG']

我尝试将 f 与 dir[0] 进行比较，然后将 dir[0] 与 cut 进行比较，但是它开始跳过所有其他元素。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:52:00.167

```
import itertools as it
import datetime
import os

get_day = lambda x: datetime.date.fromtimestamp(os.path.getmtime(os.path.join(target,f)))

for k, v in it.groupby(sorted(files, key=get_day), key=get_day):
    for i, f in enumerate(v, 1):
        os.rename(os.path.join(target, f),
                  os.path.join(target, '{0:%Y-%m-%d}_{}.JPG'.format(k, i))) 
```

# java - 将工作流添加到自定义 portlet（由 Plugins-SDK 创建）

> ID：14136259
> 
> 赞同：2
> 
> 时间：2013-01-03T09:41:18.837
> 
> 标签：java, liferay, liferay-6

我是liferay的新手。

我正在使用 Liferay 6.1.1 CE。

我想将工作流 (Kaleo) 添加到包含两个文本字段和一个按钮的 portlet。

Portlet 是通过 Plugins-SDK 创建的。

我已经浏览过这个博客：[如何在知识库文章或插件中的任何自定义资产上添加工作流功能](http://www.liferay.com/web/jonas.yuan/blog/-/blogs/5786756)

但我只是无法获得如此多的信息来满足我的需要。

帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T10:07:07.660

尝试关注它可能会对您有所帮助

[http://www.cignex.com/articles/applying-advanced-workflow-custom-assets-liferay-6](http://www.cignex.com/articles/applying-advanced-workflow-custom-assets-liferay-6)

[http://liferayzone.wordpress.com/2013/11/29/kaleo-workflow-configuration-for-custom-portlet-in-liferay-6-1/](http://liferayzone.wordpress.com/2013/11/29/kaleo-workflow-configuration-for-custom-portlet-in-liferay-6-1/)

下载工作流捆绑包并按照我在文档中指定的步骤进行操作。

[https://sourceforge.net/projects/meeralferay/files/LiferayWorkFlowPortlet](https://sourceforge.net/projects/meeralferay/files/LiferayWorkFlowPortlet)

# mfc - 如何在 mfc 应用程序中读取 .scd 数据文件

> ID：14136263
> 
> 赞同：-1
> 
> 时间：2013-01-03T09:41:29.683
> 
> 标签：mfc, exe, extractor, scd

我刚刚使用 pendrive 中的注册密钥从 3 Cds 购买并安装了一个应用程序。安装后，我得到了一个 MFC 应用程序 (.exe)。当我查看这些文件时，我发现了一个数据文件夹，其中我发现了许多 .scd 文件。数据可在应用程序内访问。

> 现在我想提取该 scd 文件并单独单独需要这些数据。

我尝试使用 FileViewPro、Scribus 和许多 exe 阅读器软件，但没有成功。

请有人帮我阅读 .scd 文件以从中提取数据。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:43:08.107

首先，请澄清您所指的MFC应用程序是什么？安装了吗？你怎么知道它是 MFC 应用程序？

其次，仅提供文件扩展名并不能提供有关文件的足够信息。它可以是 MD 调度程序、MS 系统管理、TurboTax 等等。

做你需要的唯一方法是找到一个应用程序，或者从文档中了解文件格式并编写你自己的应用程序。

如果文件是专有格式并且没有发布文档，则可能是不可能的。

# c# - 从 XML 文件中获取子节点

> ID：14136265
> 
> 赞同：5
> 
> 时间：2013-01-03T09:41:38.007
> 
> 标签：c#, .net, xml

我有一个如下的 XML 文件

```
<Attachment>
  <FileName>Perimeter SRS.docx</FileName>
  <FileSize>15572</FileSize>
  <ActivityName>ActivityNamePerimeter SRS.docx</ActivityName>
  <UserAlias>JameelM</UserAlias>
  <DocumentTransferId>7123eb83-d768-4a58-be46-0dfaf1297b97</DocumentTransferId>
  <EngagementName>EAuditEngagementNameNew</EngagementName>
  <Sender>JameelM@orioninc.com</Sender>
</Attachment> 
```

我读了这些 xml 文件，如下所示

```
var doc = new XmlDocument();

doc.Load(files);

foreach (XmlElement pointCoord in doc.SelectNodes("/Attachment"))
{

} 
```

我需要在 Attachment 节点中获取每个子节点值。如何从 xml 节点列表中获取这些 xml 元素？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T09:54:31.663

> 我需要在 Attachment 节点中获取每个子节点值。

你的问题很不清楚，但*看起来*很简单：

```
foreach (XmlNode node in doc.DocumentElement.ChildNodes)
{
} 
```

毕竟，在您向我们展示的文档中，`Attachment` *是*文档元素。不需要 XPath。

顺便说一句，如果您使用的是 .NET 3.5 或更高版本，LINQ to XML 是一个*比*`XmlDocument`旧的 DOM ( etc) API更好的 XML API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:47:45.980

试试这个

```
 var data = from item in doc.Descendants("Attachment")
             select new
             {
                  FileName= item.Element("FileName").Value,
                  FileSize= item.Element("FileSize").Value,
                  Sender= item.Element("Sender").Value
              };
 foreach (var p in data)
     Console.WriteLine(p.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:50:14.513

```
var doc = new XmlDocument();

doc.Load(files);

foreach (XmlElement pointCoord in doc.SelectNodes("/Attachment"))
{
    if(pointCoord!=null)
    {
        var valueOfElement=pointCoord.InnerText;
    }
} 
```

如果要针对元素名称（UserAlias 等）运行条件逻辑，请使用 XmlElement 的 Name 属性。

# objective-c - 为什么 [NSDate date] 返回 id？

> ID：14136271
> 
> 赞同：8
> 
> 时间：2013-01-03T09:41:47.343
> 
> 标签：objective-c, nsdate

为什么不返回`NSDate*`？

应该是创造功能吧？所有创建函数都返回类型为创建它的类的类。

现在，我做不到`NSDate.date.timeIntervalSince1970`:(

我认为编译器足够聪明，可以知道 NSDate.date 即使返回类型是 id 也会返回 NSDate？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T10:01:33.430

### 更新

从 iOS 7 开始，Apple 将`instancetype`大多数 Foundation 框架 API（以及其他框架）用作返回类型，因此现在例如`+date`of`NSDate`具有以下签名：

```
+ (instancetype)date 
```

我刚刚写了一篇关于它的[短文。](http://www.codepills.net/blog/2013/06/25/type-inference-for-everyone-ios7)

### 原始答案

构造函数和工厂方法返回`id`是为了允许子类在不覆盖的情况下使用它们。

想象一下，你有一个`NSDate`被调用的子类`NSMutableDate`。

如果你打电话

```
[NSMutableDate date] 
```

现在您希望返回一个`NSMutableDate *`对象，但如果`date`返回`NSDate *`，您将需要覆盖该方法以更改返回类型。

使用`id`允许这种灵活性。

实际上，当您定义自己的工厂方法时，clang 编译器具有`instancetype`派上用场的关键字。[我最近在这里](http://www.codepills.net/blog/2013/01/01/obj-c-infer-types-like-a-man-man/)谈到了这个具体问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T09:57:01.067

类工厂方法（例如`[NSMutableDate date]`,`[NSMutableArray array]`等）在内部使用`alloc`/ `init`，并返回任何`init`返回值。

`init`及其兄弟 ( `initWith...`) 总是返回一个`id`, 并且通过扩展，类工厂方法也是如此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T09:44:12.613

它是一种工厂方法，提供了一种创建新的自动释放对象的便捷方式。

请参阅此[Apple 指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW36)。

# c# - 是否可以在不运行类中的任何代码的情况下创建类的实例？（没有 ctor，没有字段初始化）

> ID：14136272
> 
> 赞同：6
> 
> 时间：2013-01-03T09:41:50.643
> 
> 标签：c#, class, initialization, createinstance

我创建了一个引擎，它接受实现接口的 3rd 方插件 (DLL)。

由于我无法控制插入的代码，因此我希望能够从正确的类（GetTypes 循环直到找到接口类）运行 1 个特定方法（从接口）。

由于任何人都可以创建在**Activator.CreateInstance**上执行的漂亮的构造函数代码，因此我可以使用**FormatterServices.GetUninitializedObject**来解决这个问题。但这在类中的字段上初始化代码时无济于事。

```
public class myclass : myinterface {

  public someotherclass name = new someotherclass()

  public myclass() {
     //Unknown code
  }

  //I only want this run.
  public string MyProperty{
    get {
      return "ANiceConstString";
    }
  }
} 
```

**两种方式（CreateInstance/ GetUninitializedObject**）的问题在于将运行某个其他类的构造函数。

在你开始分析我的需求之前。这仅在引擎初始化时运行以获得一组标准值。如果此 get'er 依赖于其他初始化值，则“插件”将被标记为失败，因为没有返回有效值。如果未标记为失败，稍后将使用**Activator.CreateInstance()**正确加载该类。

所以坚持这个问题：.Net 是否支持任何方式来创建 100% 未初始化的类？

更新答案。在发布我的问题之前，我对此进行了测试。

对于某个其他类无法运行的答案，我已经对其进行了测试，如果是静态的，它就会运行。

```
public class myclass : myinterface {

    static Tutle test;

    public myclass () {
         test = new Tutle();
    }

    public class Tutle {
        public Tutle() {
            MessageBox.Show("RUN!");
        }
    }
} 
```

CreateInstance 显示消息框。GetUninitializedObject 没有。

```
public class myclass : myinterface {

    static Tutle test = new Tutle();

    public myclass () {
    }

    public class Tutle {
        public Tutle() {
            MessageBox.Show("RUN!");
        }
    }
} 
```

CreateInstance 显示消息框。GetUninitializedObject 显示消息框。

有没有办法绕过静态字段初始化器和 ctors？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T09:55:01.400

简单地：

```
var obj = (myclass)FormatterServices.GetUninitializedObject(typeof(myclass)); 
```

那**将不会**运行构造函数/字段初始化程序。完全没有。它**不会**`someotherclass`为;运行构造函数。`name`将`null`。

但是，如果有必要，它会在标准 .NET 规则下执行任何存在的*静态构造函数。*

然而！我应该注意，此方法不适用于临时使用；它的主要目的是用于序列化程序和远程引擎。如果以这种方式创建这些类型很有可能无法正常工作，如果您随后没有采取措施将它们恢复到有效状态（任何序列化程序/远程处理引擎肯定会这样做）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T10:03:46.203

作为替代设计考虑：

```
[SomeFeature("ANiceConstString")]
public class myclass : myinterface {

  public someotherclass name = new someotherclass()

  public myclass() {
     //Unknown code
  }
} 
```

现在您无需实例化即可访问该功能；只需使用：

```
var attrib = (SomeFeatureAttribute)Attribute.GetCustomAttribute(
    type, typeof(SomeFeatureAttribute));
string whatever = attrib == null ? null : attrib.Name; 
```

和：

```
[AttributeUsage(
    AttributeTargets.Class | AttributeTargets.Struct | AttributeTargets.Enum)]
public sealed class SomeFeatureAttribute : Attribute
{
    private readonly string name;
    public string Name { get { return name; } }
    public SomeFeatureAttribute(string name) { this.name = name; }
} 
```

# razor - 在非 MVC 项目中使用 RazorEngine 3 呈现电子邮件会引发 TemplateCompilationException

> ID：14136275
> 
> 赞同：2
> 
> 时间：2013-01-03T09:42:01.350
> 
> 标签：razor, template-engine, razor-2

我正在尝试在 Windows 服务主机中呈现电子邮件。

我使用由 coxp 分叉的 RazorEngine 3，它支持 Razor 2。 [https://github.com/coxp/RazorEngine/tree/release-3.0/src](https://github.com/coxp/RazorEngine/tree/release-3.0/src)

这适用于几个电子邮件模板，但有一个给我带来了问题。

```
@model string

<a href="@Model" target="_blank">Click here</a> to enter a new password for your account. 
```

这会引发 CompilationException：名称“WriteAttribute”在当前上下文中不存在。因此，将字符串作为模型传入并将其放在 href 属性中会导致问题。

我可以通过以下方式更改此行来使其工作：

```
@Raw(string.Format("<a href=\"{0}\" target=\"_blank\">Klik hier</a>.", @Model)) 
```

但这使得模板非常不可读，并且更难传递给营销部门以进行进一步的样式设置。

我想补充一点，使用 Nuget 包引用 RazorEngine 不是解决方案，因为它基于 Razor 1，并且在进程的某个地方，system.web.razor 的 DLL 被版本 2 替换，这会破坏使用 RazorEngine 的任何代码。使用 Razor 2 从新功能中受益并保持最新似乎更有趣。

有关如何解决此问题的任何建议都会很棒。也非常欢迎分享您的经验。

更新 1

似乎调用 SetTemplateBaseType 可能会有所帮助，但是这个方法不再存在，所以我想知道如何能够绑定 templatebasetype？

```
//Missing method in the new RazorEngine build from coxp.
Razor.SetTemplateBaseType(typeof(HtmlTemplateBase<>)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:16:59.210

我使用 Windsor 来注入模板服务，而不是使用 Razor 对象。这是代码的简化部分，展示了如何设置基本模板类型。

```
 private static ITemplateService CreateTemplateService()
    {
        var config = new TemplateServiceConfiguration
                         {
                             BaseTemplateType = typeof (HtmlTemplateBase<>),
                         };
        return new TemplateService(config);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T09:19:50.420

剃刀引擎 3.1.0

基于**coxp**答案的一点修改示例，没有注入：

```
 private static bool _razorInitialized;

    private static void InitializeRazor()
    {
        if (_razorInitialized) return;
        _razorInitialized = true;
        Razor.SetTemplateService(CreateTemplateService());
    }

    private static ITemplateService CreateTemplateService()
    {
        var config = new TemplateServiceConfiguration
            {
                BaseTemplateType = typeof (HtmlTemplateBase<>),
            };
        return new TemplateService(config);
    }

    public static string ParseTemplate(string name, object model)
    {
        InitializeRazor();

        var appFileName = "~/EmailTemplates/" + name + ".cshtml";
        var template = File.ReadAllText(HttpContext.Current.Server.MapPath(appFileName));
        return RazorEngine.Razor.Parse(template, model);
    } 
```

# ssl - 续订过期的 SSL 证书未加载 Nginx

> ID：14136279
> 
> 赞同：1
> 
> 时间：2013-01-03T09:42:12.647
> 
> 标签：ssl, https, nginx, ssl-certificate

通过 Namecheap 我有我的 SSL 证书（POSITIVESSL Comodo），它在我的 Nginx 网络服务器上运行，为我的客户提供 https。在我的证书过期之前，这就像一个魅力。

现在我尝试安装一个新证书，但无论我尝试什么，旧证书正在加载。

我做了什么。

1.  删除了所有旧证书文件（.key、.crt、.csr）
2.  使用[本教程](https://support.comodo.com/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=3)创建新的密钥文件。
3.  将该文件输入到 Namecheap SSL 面板以生成新的 SSL 证书（该证书已到达，并显示在 2012 年 11 月 26 日至 2013 年 12 月 26 日期间有效。
4.  转到我的证书目录，放入我得到的 3 个 .crt 文件。
5.  使用[本教程](http://notes.rioastamal.net/2012/04/nginx-install-comodo-positivessl.html)，我将所有 .crt 文件捆绑到 1 个 .pem 文件中。
6.  检查我的 nginx.conf 以确认 .key 和 .pem 文件的所有路径都正确
7.  重启nginx

我什至尝试更改文件名，以确保它们不会与旧文件名冲突，但我的旧证书仍在加载中。我使用过以下工具：[http](http://www.digicert.com/help/) ://www.digicert.com/help/来测试证书，旧的证书仍在加载中。

除了 Nginx，我是否应该重新启动其他任何东西以确保正确加载新文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:21:16.573

问题已解决，DDOS 防护代理也需要更新。

# java - 如何在 JavaFX 中实现剪贴板

> ID：14136288
> 
> 赞同：-1
> 
> 时间：2013-01-03T09:42:43.340
> 
> 标签：java, javafx-2, clipboard

如何使剪贴板列表器连续监听 JavaFX 中的剪贴板变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:58:08.680

JavaFX 依赖于 Java 库来实现此类功能。

您可以在此处找到从 Java 使用剪贴板的示例：[收听剪贴板更改，检查所有权？](https://stackoverflow.com/questions/5484927/listen-to-clipboard-changes-check-ownership)

# php - 如何在 php 或 ajax 中插入或更新数据库后更新页面

> ID：14136291
> 
> 赞同：-3
> 
> 时间：2013-01-03T09:43:06.343
> 
> 标签：php, javascript, jquery, ajax, html

一个很好的例子就是脸书。在有人评论另一个人之后，所有人都可以看到更新弹出，而不仅仅是您自己的页面并且不需要刷新。我正在制作一个监控或过滤掉不良评论的项目。所以如果插入了不良评论数据库然后它给我通知并弹出数据..请任何帮助..谢谢我使用php作为服务器端语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:52:38.193

是的，总会有办法的。您可以使用 ajax 和 php 使用彗星编程和长轮询。

好的缺点是使用彗星你的其他http请求将是霍尔特所以对于彗星你必须需要重写最好的会话。

根据您的问题，我建议您使用 myisam 引擎，因为它会跟踪上次修改数据库时的时间戳，因此您将知道数据库何时更新。

示例彗星代码如下。

**索引.php**

```
<div id="content"></div>

<p id="form_container">
    <form action="" method="get" onsubmit="comet.doRequest($('#word').val());$('#word').val('');return false;">
        <input type="text" name="word" id="word" value="" />
        <input type="submit" name="submit" value="Send" />
    </form>
</p>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    var Comet = function (data_url)
    {
        this.timestamp = 0;
        this.url = data_url;  
        this.noerror = true;

        this.connect = function()
        {
            var self = this;

            $.ajax(
            {
                type : 'post',
                url : this.url,
                dataType : 'json', 
                data :
                {
                    'timestamp' : self.timestamp
                },
                success : function(response)
                {
                    self.timestamp = response.timestamp;
                    self.handleResponse(response);
                    self.noerror = true;          
                },
                complete : function(response)
                {
                    if (!self.noerror)
                    {
                        setTimeout(function(){ comet.connect(); }, 5000);           
                    }
                    else
                    {
                        self.connect(); 
                    }
                    self.noerror = false; 
                }
            });
        }

        this.disconnect = function() {}

        this.handleResponse = function(response)
        {
            $('#content').append('<div>' + response.msg + '</div>');
        }

        this.doRequest = function(request) {
            $.ajax(
            {
                type : 'post',
                url : this.url,
                data :
                {
                    'msg' : request
                }
            });
        }
    }

    var comet = new Comet('./backend.php');
    comet.connect();
</script>
```

**后端.php**

```
function get_date()
{
    $query = mysql_query("show table status from weefavr like 'request_responses'")or die(mysql_error());

    $row = array();
    while($result = mysql_fetch_assoc($query))
    {
        $row[] = $result;
    }
    return strtotime($row[0]['Update_time']);
}

$lastmodif    = isset($_POST['timestamp']) ? $_POST['timestamp'] : 0;
$currentmodif = get_date();

while ($currentmodif <= $lastmodif)
{
    usleep(10000);
    clearstatcache();
    $currentmodif = get_date();
}

$query_db = mysql_query("SELECT UNIX_TIMESTAMP(last_update.created) AS DATE,last_update.* FROM last_update WHERE UNIX_TIMESTAMP(last_update.created) BETWEEN '".$lastmodif."' AND '".$currentmodif."'")or die(mysql_error());

$row_db = array();
$response = array();
while($result_db = mysql_fetch_assoc($query_db))
{
    $response['msg'][]       = $result_db['title'];
}

$response['timestamp'] = $currentmodif;
$response['lastmodif'] = $lastmodif;
echo json_encode($response);
flush();
```

这个例子很有帮助，但正如我告诉你的那样，你的其他 HTTP 请求将不起作用。所以你需要对会话等做一些修改。

是的，Facebook、g mail、asana 和 zaarly 都是使用彗星编程的巨头。

希望这会有所帮助。随意问干杯...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:46:12.337

您需要从您的页面发出 AJAX 请求来实现这一点。

当用户执行操作时，您可以提交 ajax 请求并动态更新该用户的页面。其他人也会看到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:48:07.490

[这里](http://tutorialzine.com/2010/06/simple-ajax-commenting-system/)有一个不错的 PHP/MySQL/AJAX 教程和下载，应该可以帮助您入门。将此与您的服务器端过滤逻辑和定期 ajax 回调相结合，以保持每个人的页面更新，您应该能够实现您正在寻找的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:00:13.823

它将是 PHP 和 Ajax。如果您需要它，这里有一个基本[介绍](http://www.w3schools.com/php/php_ajax_intro.asp)。基本上，您需要有一个网页，通过 Javascript 异步轮询您的后端（PHP 页面）来提供新内容。你可以有一个 Javascript 计时器，或者更复杂的设置，比如后端“推送”到你的页面。我建议您查看此其他[页面](http://matthewaprice.com/simple-jquery-ajax-auto-refreshing-div/)以获取示例。

# asp.net - 在 SQL SERVER 中使用一个查询更新多个表

> ID：14136295
> 
> 赞同：2
> 
> 时间：2013-01-03T09:43:21.097
> 
> 标签：asp.net, sql-server, c#-4.0, database

我正在使用 SQL SERVER 2008 处理 asp.net(c#) 项目。我想使用一个查询更新三个表。请建议我如何做到这一点。感恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T09:44:27.827

**你不能**。更新语句适用于单个表。您必须为三个表编写三个不同的查询。

您可以使用事务来确保您的更新语句是原子的。

```
BEGIN TRANSACTION

UPDATE Table1
Set Field1 = '1';
Where Field = 'value';

UPDATE Table2
Set Field1= '2'
Where Field = 'value';

UPDATE Table3
Set Field1= '3'
Where Field = 'value';

COMMIT 
```

对于 C#，您可以使用[SqlTransaction](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)。来自同一链接的示例（已修改）

```
private static void ExecuteSqlTransaction(string connectionString)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();

        SqlCommand command = connection.CreateCommand();
        SqlTransaction transaction;

        // Start a local transaction.
        transaction = connection.BeginTransaction("SampleTransaction");

        // Must assign both transaction object and connection 
        // to Command object for a pending local transaction
        command.Connection = connection;
        command.Transaction = transaction;

        try
        {
            command.CommandText =
                "UPDATE Table1 Set Field1 = '1' Where Field = 'value';";
            command.ExecuteNonQuery();
            command.CommandText =
                "UPDATE Table2 Set Field1= '2' Where Field = 'value'";
            command.ExecuteNonQuery();

            command.CommandText =
                "UPDATE Table3 Set Field1= '3' Where Field = 'value'";
            command.ExecuteNonQuery();

            // Attempt to commit the transaction.
            transaction.Commit();
            Console.WriteLine("Both records are written to database.");
        }
        catch (Exception ex)
        {
            Console.WriteLine("Commit Exception Type: {0}", ex.GetType());
            Console.WriteLine("  Message: {0}", ex.Message);

            // Attempt to roll back the transaction. 
            try
            {
                transaction.Rollback();
            }
            catch (Exception ex2)
            {
                // This catch block will handle any errors that may have occurred 
                // on the server that would cause the rollback to fail, such as 
                // a closed connection.
                Console.WriteLine("Rollback Exception Type: {0}", ex2.GetType());
                Console.WriteLine("  Message: {0}", ex2.Message);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T09:46:35.200

编写三个查询并将它们全部放入一个事务中，无论是在存储过程中还是`TransactionScope`在您的 c# 代码中使用。

```
using System.Transactions;

using( var ts = new TransactionScope() ){

  // execute your queries

  ts.Complete();
} 
```

此处的完整示例：http: [//msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T09:46:08.007

一种方法是创建一个过程并在该过程中更新所有表。如果要插入所有三个或不插入它们，也可以使用事务。这是一个[例子](http://blog.sqlauthority.com/2010/06/02/sql-server-stored-procedure-and-transactions/)

您还可以从 C# 维护事务。这是一个示例 [事务存储过程 C#](https://stackoverflow.com/questions/1825833/transaction-stored-procedure-c-sharp)
示例

```
using (var connection = new SqlConnection("your connectionstring"))
{
    connection.Open();
    using (var transaction = connection.BeginTransaction())
    {
    try
    {
        using (var command1 = new SqlCommand("SP1Name", connection, transaction))
        {
            command1.ExecuteNonQuery();
        }
        transaction.Commit();
    }
    catch
    {
        transaction.Rollback();
        throw;
    }
  }
} 
```

# jsp - 如何在显示标签中添加排序图像？

> ID：14136303
> 
> 赞同：1
> 
> 时间：2013-01-03T09:44:00.327
> 
> 标签：jsp, struts, jsp-tags, displaytag

我正在使用显示标签来显示列表数据。这就是我在我的 jsp 中“设置”显示：表的方式。

```
<display:table  name="TABLE_DATA_LIST" uid="list" style="width:100%;table-layout: fixed;" requestURI="/list/something.action" export="false" defaultsort="2" defaultorder="ascending" cellpadding="0" cellspacing="0" partialList="true"    size="${TOTAL_RESULT}" htmlId="list" pagesize="${PAGE_SIZE}"> 
```

现在，除了所有列之外，我还希望将自定义图像附加到每一列，以便在单击它时可以对结果数据进行排序。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T07:39:18.377

它可以通过更新页面中的相应 CSS 类来更新。通常 CSS 类就像 `th.order1 a { background: url("../images/table-sort-down.png") no-repeat scroll right center transparent; padding-right: 14px;}` 您可以根据您的图像进行更新一样。

将有升序和降序两个等级。更改这些类将在用户排序时生成您的自定义图像。

# html - 没有箭头标记的谷歌地图嵌入

> ID：14136304
> 
> 赞同：0
> 
> 时间：2013-01-03T09:43:59.757
> 
> 标签：html, google-maps, google-maps-api-3, google-maps-embed

我正在尝试仅使用经度和纬度坐标（从 MySQL 数据库提供）嵌入谷歌地图。到目前为止，我已经相当成功，但我还有最后一个障碍我正在努力解决。这是我的嵌入代码：

```
<iframe width="250" height="193" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=<?=$result_array['lat']?>,<?=$result_array['long']?>&amp;aq=&amp;sll=<?=$result_array['lat']?>,<?=$result_array['long']?>&amp;sspn=0.000647,0.001246&amp;t=m&amp;gl=us&amp;ie=UTF8&amp;ll=<?=$result_array['lat']?>,<?=$result_array['long']?>&amp;spn=0.011505,0.018239&amp;z=15&amp;output=embed"></iframe> 
```

我已经到了只使用一组坐标的地步，我可以在地图上查明正确的位置，但是该位置标有箭头和相关的地标。有谁知道摆脱绿色箭头的方法？

这就是我所说的：http: [//jsfiddle.net/9fmwM/6/](http://jsfiddle.net/9fmwM/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:18:05.397

您可以使用 saddr 参数而不是 q 参数：

```
<iframe style="min-height: 99%; width: 100%;" 
        frameborder="0" scrolling="no" 
        marginheight="0" 
        marginwidth="0" 
        src="https://maps.google.com/maps?f=q&amp;saddr=37.42216,-122.083737&amp;source=s_d&amp;hl=en&amp;z=15&amp;output=embed"></iframe> 
```

[**http://jsfiddle.net/doktormolle/kUsCP/**](http://jsfiddle.net/doktormolle/kUsCP/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-09-14T13:54:54.973

[单击此处](https://developers.google.com/maps/documentation/embed/start)创建不带标记的嵌入谷歌地图，然后选择选项*仅显示一个区域的地图！*

# r - 在两行中绘制主标题

> ID：14136311
> 
> 赞同：7
> 
> 时间：2013-01-03T08:44:44.470
> 
> 标签：r, plotmath

我想把情节的标题分成两行，但这不起作用，为什么？我怎样才能让它工作？

```
CVal<-1 
SumEpsVal<-2 
plot(1:10, main=bquote(paste("C=", .(CVal), " \n ", sum(xi), "=", .(SumEpsVal) ))) 
```

这在这里有效：

```
plot(1:10, main=paste("C=1", "\n", "SumXi=2")) 
```

我猜 bquote 做错了什么...（查找 ?bquote）我试图改变 bqoute 中的环境（where-argument），但我不知道该采用哪个环境。

顺便提一句：

```
plot(1:10, main=bquote(paste("C=", .(CVal), "bla \n ", sum(xi), "=", .(SumEpsVal) ))) 
```

用“bla”做一些疯狂的事情。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T11:02:36.147

就我个人而言，我会按照已经建议的方式使用 mtext。但是，如果您真的希望它是单行的，则可以`bquote`使用以下方法“作弊” `atop`：

```
plot(1:10, main=
  bquote(atop(paste("C=",.(CVal)), paste(sum(xi),"=",.(SumEpsVal))))) 
```

它甚至将两条线整齐地对齐到中心。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-03T10:46:47.330

根本问题是 plotmath 不支持要输出的表达式中的换行符。

```
Control characters (e.g. \n) are not interpreted in character strings in plotmath, 
  unlike normal plotting. 
```

您确实需要分别创建和输出每一行。

例如 ：

```
Lines <- list(bquote(paste("C=", .(CVal))),
              bquote(paste(sum(xi), "=", .(SumEpsVal)))) 
```

现在输出每一行列表中的文本转换为表达式 do.call

```
mtext(do.call(expression, Lines),side=3,line=0:1) 
```

![在此处输入图像描述](../Images/18a5a338849d7ec9d693b6c7c815fdf2.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T10:22:01.997

实现此目的的一种方法是使用`mtext`在主标题下添加一个附加行，如下所示：

```
plot(1:10, main=bquote(paste("C=", .(CVal))))
mtext(bquote(paste(sum(xi), "=", .(SumEpsVal) )),side=3,line=0) 
```

可能有一个更漂亮的解决方案，但这可能足以满足您的需求。

# java - Cordova Phonegap 2.2.0 视频播放器插件

> ID：14136327
> 
> 赞同：1
> 
> 时间：2013-01-03T09:45:09.387
> 
> 标签：java, android, cordova, phonegap-plugins, cordova-2.0.0

我一直在寻找这个问题，但似乎找不到任何解决方案！

当用户单击我的 Android PhoneGap 应用程序中的 div 时，我试图打开 MP4 视频，但经过进一步研究，我发现 HTML5 视频标签不受支持，并被告知从此处下载插件调用 VideoPlayer。

[https://github.com/macdonst/VideoPlayer](https://github.com/macdonst/VideoPlayer)

当我运行这个插件时，我得到了与 VideoPlayer.java 文件的几个部分相关的错误。

我已经尝试添加一些插件代码，但仍然没有出现任何视频。

这个插件是否与最新版本的 PhoneGap 不兼容，如果不兼容，是否有任何 Java 专家可以帮助我弄清楚如何让它在 Phonegap 下本地运行？

我收到两个主要错误和一些警告，如下所示：

![在此处输入图像描述](../Images/3c20abc19237a792f21da4e8701b37a9.png)

该错误似乎与此行有关：

URLConnection con = new URL(url).openConnection();

我试图删除那段代码（因为不是要从 YT 加载视频，而是从我的本地资产加载视频），但让视频播放仍然没有乐趣。

config.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
       Licensed to the Apache Software Foundation (ASF) under one
       or more contributor license agreements.  See the NOTICE file
       distributed with this work for additional information
       regarding copyright ownership.  The ASF licenses this file
       to you under the Apache License, Version 2.0 (the
       "License"); you may not use this file except in compliance
       with the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

       Unless required by applicable law or agreed to in writing,
       software distributed under the License is distributed on an
       "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
       KIND, either express or implied.  See the License for the
       specific language governing permissions and limitations
       under the License.
-->
<cordova>
    <!--
    access elements control the Android whitelist.
    Domains are assumed blocked unless set otherwise
     -->

    <access origin="http://127.0.0.1*"/> <!-- allow local pages -->

    <!-- <access origin="https://example.com" /> allow any secure requests to example.com -->
    <!-- <access origin="https://example.com" subdomains="true" /> such as above, but including subdomains, such as www -->
    <access origin=".*"/>

    <log level="DEBUG"/>
    <preference name="useBrowserHistory" value="true" />
    <preference name="exit-on-suspend" value="false" />
<plugins>
    <plugin name="App" value="org.apache.cordova.App"/>
    <plugin name="Geolocation" value="org.apache.cordova.GeoBroker"/>
    <plugin name="Device" value="org.apache.cordova.Device"/>
    <plugin name="Accelerometer" value="org.apache.cordova.AccelListener"/>
    <plugin name="Compass" value="org.apache.cordova.CompassListener"/>
    <plugin name="Media" value="org.apache.cordova.AudioHandler"/>
    <plugin name="Camera" value="org.apache.cordova.CameraLauncher"/>
    <plugin name="Contacts" value="org.apache.cordova.ContactManager"/>
    <plugin name="File" value="org.apache.cordova.FileUtils"/>
    <plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/>
    <plugin name="Notification" value="org.apache.cordova.Notification"/>
    <plugin name="Storage" value="org.apache.cordova.Storage"/>
    <plugin name="FileTransfer" value="org.apache.cordova.FileTransfer"/>
    <plugin name="Capture" value="org.apache.cordova.Capture"/>
    <plugin name="Battery" value="org.apache.cordova.BatteryListener"/>
    <plugin name="SplashScreen" value="org.apache.cordova.SplashScreen"/>
    <plugin name="Echo" value="org.apache.cordova.Echo" />
    <plugin name="Globalization" value="org.apache.cordova.Globalization"/>
    <plugin name="VideoPlayer" value="com.phonegap.plugins.video.VideoPlayer"/>
</plugins>
</cordova> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:16:48.943

不要删除任何代码块。

我尝试使用相同的插件代码，它对我有用。

保留该`VideoPlayer.java`文件，因为它是与插件一起下载的，只需按此即可`ctr+shift+O` 导入此插件文件所需的相关包。

然后更改您的视频通话命令，

```
window.plugins.videoPlayer.play("file:///android_asset/www/res/videos/1.mp4"); 
```

使用 Cordova 2.2 第 3 步指令将更改为，

```
[3]   In your res/xml/config.xml file add the following line:

    <plugin name="VideoPlayer" value="com.phonegap.plugins.video.VideoPlayer"/> 
```

这对我有用。

如果您仍然面临问题，请告诉我。

谢谢。

# orchardcms - 将正文部分添加到自定义小部件 - 放置

> ID：14136331
> 
> 赞同：1
> 
> 时间：2013-01-03T09:45:35.957
> 
> 标签：orchardcms, orchardcms-1.6

这次我正在为 Orchard 的自定义小部件苦苦挣扎。这是一个包含两个字段的简单内容部分： - 背景颜色 - 大小

我希望能够将 HTML 内容添加到这个小部件；所以我添加了身体部分。这部分必须显示在我的小部件中。结果应该是这样的：

`<div class="size-small bg-color-red"> BODY PART HTML CONTENT </div>`

但不幸的是，正文部分总是显示在我的小部件*之前*或*之后*。

```
<Placement>
    <Place Parts_ContentTile="Content"/>
    <Place Parts_ContentTile_Edit="Content:7.5"/>
</Placement> 
```

**不太好的“解决方案”：** 解决此问题的一种方法是删除正文部分并将其替换为简单的文本字段。此文本字段在所需位置呈现。但随后 TinyMCE 编辑器不可用。

**来自 Ivan 的评论后更新：**
我尝试同时更改（内容类型和内容部分（单独）），但不幸的是，两次，TextField 内容都显示在小部件之后。这应该在 Placement.info 中修复吗？

另一种选择是在我的小部件模型中添加一个字符串字段。但随后无法显示 TinyMCE 编辑器。我对吗？

所以我觉得我对小部件、内容部分和展示位置的期望是不正确的。希望这里有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:25:14.513

使用时`TextField`，可以通过在字段的设置中`TinyMCE`指定来使用。`HTML flavor`

为此，您可以转到`Content`→（`Content Types`或`Content Parts`取决于您要更改的内容）→选择您的`ContentType`或`ContentPart`→展开`TextField`您正在使用的定义→`HTML`从旁边的下拉菜单中选择`Flavor`→单击`Save`按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:32:27.690

[Mark Z的](https://stackoverflow.com/users/1874947/mark-z)[这篇关于 SO](https://stackoverflow.com/a/13698360/267122)的帖子对我很有帮助！

我在我的模型中添加了一个字符串属性并添加了一个新的数据库迁移：

```
public int UpdateFrom3()
{
   // Adds a new Content column
   SchemaBuilder.AlterTable("ContentTileRecord", table => table.AddColumn("Content", DbType.String));

   return 4;
} 
```

之后，我将该字段添加到编辑器部件视图中：

```
@Script.Require("OrchardTinyMce")

<div class="editor-label">
   @Html.LabelFor(model => model.Content)
</div>

<div class="editor-field">
   @Html.TextAreaFor(model => model.Content, new { @class = "html tinymce" }) 
</div> 
```

Content 属性现在显示为 TextArea。由于类 'html 和 tinymce'，TinyMCE 编辑器被实例化。（不要忘记 Script.Require 调用）

由于 Content 属性包含 HTML，因此需要使用 @Html.Raw 帮助器来显示该属性的值。

```
@Html.Raw(Model.Content) 
```

# java - 用于链接到 servlet

> ID：14136333
> 
> 赞同：3
> 
> 时间：2013-01-03T09:45:39.353
> 
> 标签：java, servlets, href

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T09:47:12.353

那将击中`doGet`方法而不是`doPost`方法。像这样的锚链接是 HTTP GET 请求。

如果您希望发出 POST 请求，则需要使用 POST 方法向 servlet 提交表单。

将您的代码移至`doGet`代替`doPost`并尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T09:48:06.103

使用 doGet 方法。a href 将使用 GET 方法。

# javascript - 需要性能改进

> ID：14136336
> 
> 赞同：-3
> 
> 时间：2013-01-03T09:45:52.757
> 
> 标签：javascript, jquery, performance

我正在尝试 CasperJS。我正在尝试创建一个网络**刮板**。我需要**抓取**网站的所有页面并在 5 秒内（每页）获取数据。为此，我将不得不浏览所有类似的页面。转到适当的内容 div 并从那里获取数据。因此，如果该站点有 1000 个页面。我需要尽快完成整个操作。我无法控制 N/w 延迟、页面大小等参数。我能控制的只是解析机制。所以我希望它尽可能快。如果有很小的改进，那么它将推断为 URL 的数量

我正在尝试解析子元素并创建 CSS 路径。我需要确保解析不会花费很长时间。我听说标准的 java 脚本在性能方面比 JQuery 更有效。因此，我需要输入。

以下 JQuery 代码的标准 JS 等效项是什么，在解析方面性能高效。

```
function() {    
    var TAG_CSS_PATH = 'div#buttons ul li.tab';
    var selectOptions =  $(TAG_CSS_PATH);
    var results = [],i=0;
    selectOptions.each(function(index,value) {
        index=index+1;
        results.push(TAG_CSS_PATH+':nth-of-type('+index+')');
    });
    return results
} 
```

如果有人可以提供任何其他建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:50:57.880

这应该这样做：

```
function() {    
    var TAG_CSS_PATH = 'div#buttons ul li.tab',
        selectOptions = document.querySelectorAll(TAG_CSS_PATH),
        results = [],
        l = selectOptions.length + 1;
    for(var i = 1; i < l; i++){
        results.push(TAG_CSS_PATH+':nth-of-type('+i+')');
    }
    return results;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:00:40.707

jQuery 部分是 $selector 和 $each。这些可以如下更换。

```
function() {    
    var TAG_CSS_PATH = '#buttons ul li.tab',
        selectOptions =  document.querySelectorAll(TAG_CSS_PATH),
        results = [];

    for( var i = 1, ln = selectOptions.length + 1; i < ln; i++ ) {
        results.push(TAG_CSS_PATH+':nth-of-type('+ i +')');
    }

    return results;
} 
```

由于您正在存储选择器，因此对我来说似乎仍然非常低效（使用 nth-of-type 是昂贵的选择器）。选择器从右到左读取。

**CSS/选择器优化**
注意，这`div#buttons`似乎是多余的。如果你正确使用 CSS，你将只有*一个*匹配的元素`id='buttons'`。因此，通过正确使用 ID，您应该能够删除`div`选择器中的 。
此外，如果您的所有`.tab`s 都是`li`，那么您也可以删除`li`。如果你所有的 `li.tab`s 都在里面`ul`，你也可以删除`ul`。

# jquery - .contents() 给出错误：在 jquery-1.8.3 中访问属性“nodeType”的权限被拒绝

> ID：14136342
> 
> 赞同：2
> 
> 时间：2013-01-03T09:46:04.663
> 
> 标签：jquery

我想访问 iframe 内容并向其中添加文档对象，例如

```
$(iframe).contents().add(document).on(keydown,function(){}) 
```

它工作正常，`jquery-1.7`但它正在给予`error:Permission denied to access property 'nodeType'`

任何帮助表示赞赏。

# xml - 使用 XSLT 创建 Master Detail 格式的 XML

> ID：14136343
> 
> 赞同：2
> 
> 时间：2013-01-03T09:46:06.273
> 
> 标签：xml, xslt

我想使用 XSLT 1.0 将其中一个 xml 转换为主详细信息格式。我尝试使用此处的一些帖子获得见解，但无法正确理解。这里 MsgID 和 PartID 形成了唯一键。

源 XML：

```
<Parts>
 <Part>
  <MsgID>ABNHH877JJ</MsgID>
  <PartID>10</PartID>
  <Attr1>Part10-Attr1</Attr1>
  <Attr2>Part10-Attr2</Attr2>
 </Part>
 <Part>
  <MsgID>ABNHH877JJIUJ1</MsgID>
  <PartID>10</PartID>
  <Attr1>Part10-I-Attr1</Attr1>
  <Attr2>Part10-I-Attr2</Attr2>
 </Part>
 <Part>
  <MsgID>ABNHH877JJGHJ</MsgID>
  <PartID>20</PartID>
  <Attr1>Part20-Attr1</Attr1>
  <Attr2>Part20-Attr2</Attr2>
 </Part>
</Parts> 
```

所需的目标 XML：

```
<Parts>
 <Part>
  <MsgID>ABNHH877JJ</MsgID>
  <PartID>10</PartID>
  <Attrs>
       <Attr1>Part10-Attr1</Attr1>
       <Attr2>Part10-Attr2</Attr2>
  </Attrs>
    <Attrs>
       <Attr1>Part10-I-Attr1</Attr1>
       <Attr2>Part10-I-Attr2</Attr2>
  </Attrs>
 </Part>
 <Part>
  <MsgID>ABNHH877JJGHJ</MsgID>
  <PartID>20</PartID>
  <Attrs>
     <Attr1>Part20-Attr1</Attr1>
    <Attr2>Part20-Attr2</Attr2>
  </Attrs>  
 </Part>
</Parts> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:56:04.843

**一个*正确*、简短和高效的 XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kPartById" match="Part" use="PartID"/>

 <xsl:template match="@*|node()">
     <xsl:copy>
       <xsl:apply-templates select="@*|node()"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="Part[generate-id()=generate-id(key('kPartById', PartID)[1])]">
  <Part>
    <xsl:apply-templates select="*[not(starts-with(name(), 'Attr'))]"/>
    <xsl:apply-templates mode="attr" select="key('kPartById', PartID)"/>
  </Part>
 </xsl:template>

 <xsl:template match="Part" mode="attr">
  <attrs>
    <xsl:apply-templates select="*[starts-with(name(), 'Attr')]"/>
  </attrs>
 </xsl:template>
 <xsl:template match="Part"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Parts>
    <Part>
        <MsgID>ABNHH877JJ</MsgID>
        <PartID>10</PartID>
        <Attr1>Part10-Attr1</Attr1>
        <Attr2>Part10-Attr2</Attr2>
    </Part>
    <Part>
        <MsgID>ABNHH877JJIUJ1</MsgID>
        <PartID>10</PartID>
        <Attr1>Part10-I-Attr1</Attr1>
        <Attr2>Part10-I-Attr2</Attr2>
    </Part>
    <Part>
        <MsgID>ABNHH877JJGHJ</MsgID>
        <PartID>20</PartID>
        <Attr1>Part20-Attr1</Attr1>
        <Attr2>Part20-Attr2</Attr2>
    </Part>
</Parts> 
```

**产生了想要的正确结果：**

```
<Parts>
   <Part>
      <MsgID>ABNHH877JJ</MsgID>
      <PartID>10</PartID>
      <attrs>
         <Attr1>Part10-Attr1</Attr1>
         <Attr2>Part10-Attr2</Attr2>
      </attrs>
      <attrs>
         <Attr1>Part10-I-Attr1</Attr1>
         <Attr2>Part10-I-Attr2</Attr2>
      </attrs>
   </Part>
   <Part>
      <MsgID>ABNHH877JJGHJ</MsgID>
      <PartID>20</PartID>
      <attrs>
         <Attr1>Part20-Attr1</Attr1>
         <Attr2>Part20-Attr2</Attr2>
      </attrs>
   </Part>
</Parts> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:53:30.733

更正的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<Parts>
  <Part>
    <MsgID>ABNHH877JJ</MsgID>
    <PartID>10</PartID>
    <Attr1>Part10-Attr1</Attr1>
    <Attr2>Part10-Attr2</Attr2>
  </Part>
  <Part>
    <MsgID>ABNHH877JJ</MsgID>
    <PartID>10</PartID>
    <Attr1>Part10-I-Attr1</Attr1>
    <Attr2>Part10-I-Attr2</Attr2>
  </Part>
  <Part>
    <MsgID>ABNHH877JJGHJ</MsgID>
    <PartID>20</PartID>
    <Attr1>Part20-Attr1</Attr1>
    <Attr2>Part20-Attr2</Attr2>
  </Part>
</Parts> 
```

XSLT 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

  <xsl:template match="/Parts/Part">
    <xsl:copy>
      <xsl:apply-templates select="MsgID|PartID"/>
      <xsl:element name="Attrs">
        <xsl:apply-templates select="Attr1|Attr2"/>
      </xsl:element>

      <xsl:for-each select="following-sibling::Part[MsgID= current()/MsgID and PartID= current()/PartID]">
      <xsl:element name="Attrs">
        <xsl:apply-templates select="Attr1|Attr2"/>
      </xsl:element>
      </xsl:for-each>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/Parts/Part[MsgID = preceding-sibling::Part/MsgID and PartID = preceding-sibling::Part/PartID]"/>

</xsl:stylesheet> 
```

结果：

```
<?xml version="1.0" encoding="utf-8"?>
<Parts>
  <Part>
    <MsgID>ABNHH877JJ</MsgID>
    <Attrs>
      <Attr1>Part10-Attr1</Attr1>
      <Attr2>Part10-Attr2</Attr2>
    </Attrs>
    <Attrs>
      <Attr1>Part10-I-Attr1</Attr1>
      <Attr2>Part10-I-Attr2</Attr2>
    </Attrs>
  </Part>

  <Part>
    <MsgID>ABNHH877JJGHJ</MsgID>
    <Attrs>
      <Attr1>Part20-Attr1</Attr1>
      <Attr2>Part20-Attr2</Attr2>
    </Attrs>
  </Part>
</Parts> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-24T20:57:22.733

我一直在寻找这种转换（master-detail），得到了不同的解决方案，在这里分享给大家。

这就是想法，我需要打破 2 个字段 Key1 和 Key2（可能是一个或多个），并且我只需要制作一次 Header 和每个 entry-times 的详细信息。

```
<!-- start -->

<xsl:template match="/">

   <xsl:for-each select="/parentNode/entry">   
      <!-- Current Key values -->
      <xsl:variable name="Key1"><xsl:value-of select="properties/Key1"/></xsl:variable>
      <xsl:variable name="Key2"><xsl:value-of select="properties/Key2"/></xsl:variable>

      <!-- Previous key values -->
      <xsl:variable name="PrevKey1"><xsl:value-of select="preceding-sibling::entry[1]/properties/Key1"></xsl:value-of></xsl:variable>
      <xsl:variable name="PrevKey2"><xsl:value-of select="preceding-sibling::entry[1]/properties/Key2"></xsl:value-of></xsl:variable>

       <!-- Compare Values, if differents then put the header -->
       <xsl:if test="$PrevKey1 != $Key or $PrevKey2 != $Key">
            <!-- Put here whatever you want for the header, just this time -->
       </xsl:if>

       <!-- Put here whatever you want for the details, every iteration -->

   </xsl:for-each>

</xsl:template>
<!-- ends --> 
```

# php - similar_text 是如何工作的？

> ID：14136349
> 
> 赞同：54
> 
> 时间：2013-01-03T09:46:31.287
> 
> 标签：php, javascript, c

我刚刚找到了similar_text 函数并正在使用它，但是百分比输出总是让我感到惊讶。请参阅下面的示例。

我试图找到有关[php 中提到的算法的信息：`similar_text()`^(*Docs*)](http://php.net/manual/en/function.similar-text.php)：

```
<?php
$p = 0;
similar_text('aaaaaaaaaa', 'aaaaa', $p);
echo $p . "<hr>";
//66.666666666667
//Since 5 out of 10 chars match, I would expect a 50% match

similar_text('aaaaaaaaaaaaaaaaaaaa', 'aaaaa', $p);
echo $p . "<hr>";
//40
//5 out of 20 > not 25% ?

similar_text('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa', 'aaaaa', $p);
echo $p . "<hr>"; 
//9.5238095238095 
//5 out of 100 > not 5% ?

//Example from PHP.net
//Why is turning the strings around changing the result?

similar_text('PHP IS GREAT', 'WITH MYSQL', $p);
echo $p . "<hr>"; //27.272727272727

similar_text('WITH MYSQL', 'PHP IS GREAT', $p);
echo $p . "<hr>"; //18.181818181818

?> 
```

谁能解释这实际上是如何工作的？

**更新：**

感谢评论，我发现百分比实际上是使用相似字符数 * 200 / 长度 1 + 长度 2 计算的

```
Z_DVAL_PP(percent) = sim * 200.0 / (t1_len + t2_len); 
```

这就解释了为什么百分比高于预期。使用 95 个中有 5 个的字符串，结果是 10 个，这样我就可以使用了。

```
similar_text('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa', 'aaaaa', $p);
echo $p . "<hr>"; 
//10
//5 out of 95 = 5 * 200 / (5 + 95) = 10 
```

但我仍然无法弄清楚为什么 PHP 在翻转字符串时会返回不同的结果。dfsq 提供的 JS 代码没有这样做。查看 PHP 中的源代码我只能在以下行中找到不同之处，但我不是 ac 程序员。一些关于差异是什么的见解，将不胜感激。

在 JS 中：

```
for (l = 0;(p + l < firstLength) && (q + l < secondLength) && (first.charAt(p + l) === second.charAt(q + l)); l++); 
```

在 PHP 中：（php_similar_str 函数）

```
for (l = 0; (p + l < end1) && (q + l < end2) && (p[l] == q[l]); l++); 
```

来源：

```
/* {{{ proto int similar_text(string str1, string str2 [, float percent])
   Calculates the similarity between two strings */
PHP_FUNCTION(similar_text)
{
  char *t1, *t2;
  zval **percent = NULL;
  int ac = ZEND_NUM_ARGS();
  int sim;
  int t1_len, t2_len;

  if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "ss|Z", &t1, &t1_len, &t2, &t2_len, &percent) == FAILURE) {
    return;
  }

  if (ac > 2) {
    convert_to_double_ex(percent);
  }

  if (t1_len + t2_len == 0) {
    if (ac > 2) {
      Z_DVAL_PP(percent) = 0;
    }

    RETURN_LONG(0);
  }

  sim = php_similar_char(t1, t1_len, t2, t2_len);

  if (ac > 2) {
    Z_DVAL_PP(percent) = sim * 200.0 / (t1_len + t2_len);
  }

  RETURN_LONG(sim);
}
/* }}} */ 

/* {{{ php_similar_str
 */
static void php_similar_str(const char *txt1, int len1, const char *txt2, int len2, int *pos1, int *pos2, int *max)
{
  char *p, *q;
  char *end1 = (char *) txt1 + len1;
  char *end2 = (char *) txt2 + len2;
  int l;

  *max = 0;
  for (p = (char *) txt1; p < end1; p++) {
    for (q = (char *) txt2; q < end2; q++) {
      for (l = 0; (p + l < end1) && (q + l < end2) && (p[l] == q[l]); l++);
      if (l > *max) {
        *max = l;
        *pos1 = p - txt1;
        *pos2 = q - txt2;
      }
    }
  }
}
/* }}} */

/* {{{ php_similar_char
 */
static int php_similar_char(const char *txt1, int len1, const char *txt2, int len2)
{
  int sum;
  int pos1, pos2, max;

  php_similar_str(txt1, len1, txt2, len2, &pos1, &pos2, &max);

  if ((sum = max)) {
    if (pos1 && pos2) {
      sum += php_similar_char(txt1, pos1,
                  txt2, pos2);
    }
    if ((pos1 + max < len1) && (pos2 + max < len2)) {
      sum += php_similar_char(txt1 + pos1 + max, len1 - pos1 - max,
                  txt2 + pos2 + max, len2 - pos2 - max);
    }
  }

  return sum;
}
/* }}} */ 
```

Javascript 中的源代码：[类似于 javascript 的文本端口](http://phpjs.org/functions/similar_text/)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-09T01:06:09.193

这实际上是一个非常有趣的问题，感谢您给我一个谜题，结果证明是非常有益的。

让我先解释一下**similar_text**的实际工作原理。

* * *

## 类似文字：算法

这是一种基于递归的[分治算法](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)。它的工作原理是首先找到**两个输入之间的最长公共字符串，**然后将问题分解为围绕该字符串的子集。

您在问题中使用的示例实际上**都只执行算法的一次迭代**。唯一不使用一次迭代和给出不同结果的来自[php.net 评论](http://php.net/manual/en/function.similar-text.php#109507)。

这是一个简单的示例，用于了解 simple_text 背后的主要问题，并希望对它的工作原理有所了解。

* * *

## 类似文字：缺陷

```
eeeefaaaaafddddd
ddddgaaaaagbeeee

Iteration 1:
Max    = 5
String = aaaaa
Left : eeeef and ddddg
Right: fddddd and geeeee 
```

我希望这个缺陷已经很明显了。它只会直接检查两个输入字符串中*最长匹配字符串的左侧和右侧。*这个例子

```
$s1='eeeefaaaaafddddd';
$s2='ddddgaaaaagbeeee';

echo similar_text($s1, $s2).'|'.similar_text($s2, $s1);
// outputs 5|5, this is due to Iteration 2 of the algorithm
// it will fail to find a matching string in both left and right subsets 
```

老实说，我不确定应该如何处理这种情况。可以看出，字符串中只有2个字符不同。但是**eeee**和**dddd**都在两个字符串的两端，不确定[NLP](http://en.wikipedia.org/wiki/Natural_language_processing)爱好者或[其他文学](http://en.wikipedia.org/wiki/Plagiarism)专家对这种具体情况有什么看法。

* * *

## 类似文本：参数交换的结果不一致

您根据输入顺序遇到的不同结果是由于 alogirthm 的实际行为方式（如上所述）。我将对发生的事情进行最后的解释。

```
echo similar_text('test','wert'); // 1
echo similar_text('wert','test'); // 2 
```

在第一种情况下，只有一个迭代：

```
test
wert

Iteration 1:
Max    = 1
String = t
Left :  and wer
Right: est and 
```

我们只有一次迭代，因为空/空字符串在递归时返回 0。所以这结束了算法，我们得到了我们的结果：1

然而，在第二种情况下，我们面临着多次迭代：

```
wert
test

Iteration 1:
Max    = 1
String = e
Left : w and t
Right: rt and st 
```

我们已经有一个长度为 1 的公共字符串。左边子集的算法将以 0 个匹配结束，但在右边：

```
rt
st

Iteration 1:
Max    = 1
String = t
Left : r and s
Right:  and 
```

这将导致我们新的和最终的结果：2

我感谢您提出的这个非常有用的问题以及再次涉足 C++ 的机会。

* * *

## 类似文字：[JavaScript 版](http://phpjs.org/functions/similar_text/)

简短的回答是：**javascript 代码没有实现正确的算法**

```
sum += this.similar_text(first.substr(0, pos2), second.substr(0, pos2)); 
```

显然应该是`first.substr(0,pos1)`

**注意：**[eis](https://github.com/eis)在[之前的提交](https://github.com/kvz/phpjs/commit/587643eaaf07eb582cd3fc8df91fe7636d4cdcab#diff-bf1f73ce4cb7506e83763aabc6c4cb1e)中已经修复了 JavaScript 代码。谢谢[@eis](https://stackoverflow.com/users/365237/eis)

揭秘！

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-04T13:32:00.473

看起来该函数确实根据参数顺序使用不同的逻辑。我认为有两件事在起作用。

首先，看这个例子：

```
echo similar_text('test','wert'); // 1
echo similar_text('wert','test'); // 2 
```

似乎它正在测试“在 param2 中找到 param1 上的任何不同字符的次数”，因此如果您交换参数，结果会有所不同。它已被报告为一个[错误](https://bugs.php.net/bug.php?id=36261)，已被关闭为“按预期工作”。

现在，上述对于 PHP 和 javascript 实现都是*一样*的——参数顺序有影响，所以说 JS 代码不会这样做是错误的。这在错误条目中被认为是预期的行为。

第二 - 似乎不正确的是 MYSQL/PHP 单词示例。这样，javascript 版本给出了 3 与参数的顺序无关，而 PHP 给出了 2 和 3（因此，百分比同样不同）。现在，短语“PHP IS GREAT”和“WITH MYSQL”应该有 5 个共同的字符，与您比较的方式无关：H、I、S 和 T，各一个，加上一个空格。为了他们有3个字符，'H'，''和'S'，所以如果你看一下顺序，正确的答案应该是3个。我将 C 代码修改为可运行的版本，并添加了一些输出，因此可以看到那里发生了什么（[codepad 链接](http://codepad.org/hEGu5ujC)）：

```
#include<stdio.h>

/* {{{ php_similar_str
 */
static void php_similar_str(const char *txt1, int len1, const char *txt2, int len2, int *pos1, int *pos2, int *max)
{
  char *p, *q;
  char *end1 = (char *) txt1 + len1;
  char *end2 = (char *) txt2 + len2;
  int l;

  *max = 0;
  for (p = (char *) txt1; p < end1; p++) {
    for (q = (char *) txt2; q < end2; q++) {
      for (l = 0; (p + l < end1) && (q + l < end2) && (p[l] == q[l]); l++);
      if (l > *max) {
        *max = l;
        *pos1 = p - txt1;
        *pos2 = q - txt2;
      }
    }
  }
}
/* }}} */

/* {{{ php_similar_char
 */
static int php_similar_char(const char *txt1, int len1, const char *txt2, int len2)
{
  int sum;
  int pos1, pos2, max;

  php_similar_str(txt1, len1, txt2, len2, &pos1, &pos2, &max);

  if ((sum = max)) {
    if (pos1 && pos2) {
      printf("txt here %s,%s\n", txt1, txt2);
      sum += php_similar_char(txt1, pos1,
                  txt2, pos2);
    }
    if ((pos1 + max < len1) && (pos2 + max < len2)) {
      printf("txt here %s,%s\n", txt1+ pos1 + max, txt2+ pos2 + max);
      sum += php_similar_char(txt1 + pos1 + max, len1 - pos1 - max,
                  txt2 + pos2 + max, len2 - pos2 - max);
    }
  }

  return sum;
}
/* }}} */
int main(void)
{
    printf("Found %d similar chars\n",
        php_similar_char("PHP IS GREAT", 12, "WITH MYSQL", 10));
    printf("Found %d similar chars\n",
        php_similar_char("WITH MYSQL", 10,"PHP IS GREAT", 12));
    return 0;
} 
```

结果是输出：

```
txt here PHP IS GREAT,WITH MYSQL
txt here P IS GREAT, MYSQL
txt here IS GREAT,MYSQL
txt here IS GREAT,MYSQL
txt here  GREAT,QL
Found 3 similar chars
txt here WITH MYSQL,PHP IS GREAT
txt here TH MYSQL,S GREAT
Found 2 similar chars 
```

所以可以看到，在第一次比较中，函数找到了“H”、“”和“S”，但没有找到“T”，得到的结果是 3。第二次比较找到了“I”和“T”，但没有找到'H', ' ' 或 'S'，因此得到 2 的结果。

这些结果的原因可以从输出中看出：算法从第二个字符串包含的第一个字符串中获取第一个字母，对其进行计数，*然后从第二个字符串中丢弃之前的字符*。这就是为什么它会错过中间的字符，这就是当你改变字符顺序时造成差异的原因。

那里发生的事情可能是故意的，也可能不是。但是，这不是 javascript 版本的工作方式。如果您在 javascript 版本中打印出相同的内容，您会得到：

```
txt here: PHP, WIT
txt here: P IS GREAT,  MYSQL
txt here: IS GREAT, MYSQL
txt here: IS, MY
txt here:  GREAT, QL
Found 3 similar chars
txt here: WITH, PHP 
txt here: W, P
txt here: TH MYSQL, S GREAT
Found 3 similar chars 
```

显示 javascript 版本以不同的方式执行此操作。javascript 版本的作用是在第一次比较中发现“H”、“”和“S”的顺序相同，而第二次比较中的“H”、“”和“S”也相同——所以在在这种情况下，参数的顺序无关紧要。

由于 javascript 是为了复制 PHP 函数的代码，所以它需要具有相同的行为，所以我提交了基于 @Khez 的分析和修复的错误报告，现在已经合并。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-03T10:39:50.857

```
first String = aaaaaaaaaa = 10 letters
second String = aaaaa = 5 letters

first five letters are similar
a+a
a+a
a+a
a+a
a+a
a
a
a
a
a

( <similar_letters> * 200 ) / (<letter_count_first_string> + <letter_count_second_string>)

( 5 * 200 ) / (10 + 5);
= 66.6666666667 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T04:50:01.863

说明 int similar_text ( 字符串 $first , string $second [, float &$percent ] )

这会计算 Oliver [1993] 中描述的两个字符串之间的相似性。请注意，此实现不像 Oliver 的伪代码那样使用堆栈，而是使用递归调用，这可能会也可能不会加速整个过程。另请注意，该算法的复杂度为 O(N**3)，其中 N 是最长字符串的长度。参数

第一的

```
The first string. 
```

第二

```
The second string. 
```

百分

```
By passing a reference as third argument, similar_text() will calculate the similarity in percent for you. 
```

# c# - 如何在 sql server 2008 r2 中复制一行

> ID：14136352
> 
> 赞同：0
> 
> 时间：2013-01-03T09:47:02.953
> 
> 标签：c#, sql-server-2008, copy-paste

我正在使用带有框架 4.0 和 SQL Server 2008 R2 的 C#。我的程序适用于小数据，但是当数据变大时，我得到了超时异常。我试过：

```
public void CreateSqlCommand()
{
   SqlCommand cmd = new SqlCommand();
   cmd.CommandTimeout = 0;
   cmd.CommandType = CommandType.Text;
} 
```

但它仍然挂断，我在资源池“默认”中获得了不足的系统内存来运行此查询，问题不是如何增加超时，而是如何优化我的程序。

我有 6 个表 LS_CLIENT_INSEE_A、LS_CLIENT_INSEE_B 等，其中仅包含 2 列 ![在此处输入图像描述](../Images/8220617318970afc9034b16240ffe18e.png)

目标很简单，我只想复制现有行但使用不同的 NO_CLIENT。

```
 public void CopyInsee(string SourceClient, List<object> DestClient)
             {
                 List<object> List_A = oClInse.GetInseClient("LS_CLIENT_INSEE_A", SourceClient);
                 List<object> List_B = oClInse.GetInseClient("LS_CLIENT_INSEE_B", SourceClient);
                 List<object> List_C = oClInse.GetInseClient("LS_CLIENT_INSEE_C", SourceClient);
                 List<object> List_D = oClInse.GetInseClient("LS_CLIENT_INSEE_D", SourceClient);
                 List<object> List_N = oClInse.GetInseClient("LS_CLIENT_INSEE_N", SourceClient);
                 List<object> List_P = oClInse.GetInseClient("LS_CLIENT_INSEE_P", SourceClient);
                 List<object> List_N1 = oClInse.GetInseClient("LS_CLIENT_INSEE_N1", SourceClient);
                 List<object> List_N2 = oClInse.GetInseClient("LS_CLIENT_INSEE_N2", SourceClient);
                 List<object> List_N3 = oClInse.GetInseClient("LS_CLIENT_INSEE_N3", SourceClient);
                 List<object> List_N4 = oClInse.GetInseClient("LS_CLIENT_INSEE_N4", SourceClient);
                 List<object> List_N5 = oClInse.GetInseClient("LS_CLIENT_INSEE_N5", SourceClient);
                 List<object> List_N6 = oClInse.GetInseClient("LS_CLIENT_INSEE_N6", SourceClient);

                 foreach (var oItem in DestClient)
                 {
                     if (List_A.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_A", oItem.ToString(), List_A);
                     if (List_B.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_B", oItem.ToString(), List_B);
                     if (List_C.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_C", oItem.ToString(), List_C);
                     if (List_D.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_D", oItem.ToString(), List_D);
                     if (List_N.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_N", oItem.ToString(), List_N);
                     if (List_P.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_P", oItem.ToString(), List_P);
                     if (List_N1.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_N1", oItem.ToString(), List_N1);
                     if (List_N2.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_N2", oItem.ToString(), List_N2);
                     if (List_N3.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_N3", oItem.ToString(), List_N3);
                     if (List_N4.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_N4", oItem.ToString(), List_N4);
                     if (List_N5.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_N5", oItem.ToString(), List_N5);
                     if (List_N6.Count != 0) oClInse.RempliClientInse("LS_CLIENT_INSEE_N6", oItem.ToString(), List_N6);
                 }

             }

 public List<object> GetInseClient(string NomTable,  string IdClient)
        {
            try
            {
                using (var connectionWrapper = new Connexion())
                {
                    var connectedConnection = connectionWrapper.GetConnected();
                    string sql_SelectAll = "SELECT * FROM " + NomTable + " WHERE NO_CLIENT = @NO_CLIENT";
                    SqlCommand comm_SelectAll = new SqlCommand(sql_SelectAll, connectionWrapper.conn);
                    comm_SelectAll.Parameters.AddWithValue("@NO_CLIENT", IdClient);
                    List<object> oList = new List<object>();
                    SqlDataReader readerOne = comm_SelectAll.ExecuteReader();
                    while (readerOne.Read())
                    {
                        oList.Add(readerOne["NO_INSEE"].ToString());
                    }
                    readerOne.Close();
                    readerOne.Dispose();
                    return oList;
                }
            }
            catch (Exception excThrown)
            {
                if (!excThrown.Message.StartsWith("Err_")) { throw new Exception("Err_GetAllUsrClient", excThrown); }
                else { throw new Exception(excThrown.Message, excThrown); }
            }

        }

public void RempliClientInse(string NomTable, string IdClient, List<object> InseList)
        {
            try
            {
                using (var connectionWrapper = new Connexion())
                {
                    var connectedConnection = connectionWrapper.GetConnected();

                    string sSql = "";

                    foreach (var oItem in InseList)
                    {
                        if (sSql != "") sSql += " UNION ALL ";
                        sSql += "SELECT '" + oItem.ToString() + "', '" + IdClient + "'";
                    }   
                    string TempSqlInst = "INSERT INTO " + NomTable + "  ( NO_INSEE, NO_CLIENT )  " + sSql;

                        SqlCommand comm_InsertMod = new SqlCommand(TempSqlInst , connectionWrapper.conn);
                        comm_InsertMod.CommandTimeout = 0;
                        comm_InsertMod.ExecuteNonQuery();

                }
            }
            catch (Exception excThrown)
            {
                if (!excThrown.Message.StartsWith("Err_")) { throw new Exception("Err_Domaine_RempliInsee", excThrown); }
                else { throw new Exception(excThrown.Message, excThrown); }
            }            
        } 
```

所以也许不是先选择然后再插入，我可以同时做这两件事，以避免 TimeOutException 和内存不足问题。

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:52:59.913

我会为此使用纯sql。在 SQL 数据库中创建存储过程将其添加到您的 linq 2 sql 项目并从 c# 代码执行它。

# linux - debian：mysql-workbench安装错误[找不到-lpython2.7.a]

> ID：14136354
> 
> 赞同：0
> 
> 时间：2013-01-03T09:47:05.357
> 
> 标签：linux, python-2.7, debian, mysql-python, mysql-workbench

我正在尝试从 Linux debian 2.6.32-5-amd64 上的源代码安装[mysql-workbench-gpl-5.2.45](http://dev.mysql.com/get/Downloads/MySQLGUITools/mysql-workbench-gpl-5.2.45-src.tar.gz/from/http://cdn.mysql.com/)。问题出现在“make”步骤并带有错误消息：

```
/usr/bin/ld: cannot find -lpython2.7.a
collect2: ld returned 1 exit status
make[4]: *** [libgrt.la] Error 1
make[4]: Leaving directory `/home/user/data/workbench/mysql-workbench-gpl-5.2.45-src/library/grt/src'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/home/user/data/workbench/mysql-workbench-gpl-5.2.45-src/library/grt'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/user/data/workbench/mysql-workbench-gpl-5.2.45-src/library'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/user/data/workbench/mysql-workbench-gpl-5.2.45-src'
make: *** [all] Error 2 
```

错误前的最后一个 make 命令是：

```
make[4]: Entering directory `/home/user/data/workbench/mysql-workbench-gpl-5.2.45-src/library/grt/src'
/bin/bash ../../../libtool --tag=CXX   --mode=link g++  -Wextra -Wall -Wno-unused -Wno-deprecated    -DTIXML_USE_STL=1   -o libgrt.la -rpath /usr/local/lib/mysql-workbench grtpp_grt.lo grtpp_helper.lo grtpp_metaclass.lo grtpp_util.lo grtpp_value.lo grtpp_shell.lo grtpp_shell_lua.lo grtpp_shell_lua_help.lo grtpp_module.lo grtpp_module_cpp.lo grtpp_module_lua.lo grtpp_notifications.lo lua_context.lo serializer.lo unserializer.lo grtpp_undo_manager.lo changefactory.lo changelistobjects.lo diffchange.lo grtdiff.lo grtlistdiff.lo grtpp_module_python.lo grtpp_shell_python.lo grtpp_shell_python_help.lo python_context.lo python_grtdict.lo python_grtlist.lo python_grtobject.lo python_module.lo -llua5.1   -luuid -pthread -Wl,--export-dynamic -lgthread-2.0 -lgmodule-2.0 -lrt -lglib-2.0 -lxml2 -lsigc-2.0 -llua5.1   -luuid -L/usr/local/lib -lpython2.7.a ../../../library/base/libwbbase.la 

libtool: link: g++ -shared -nostdlib /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crti.o /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtbeginS.o  .libs/grtpp_grt.o .libs/grtpp_helper.o .libs/grtpp_metaclass.o .libs/grtpp_util.o .libs/grtpp_value.o .libs/grtpp_shell.o .libs/grtpp_shell_lua.o .libs/grtpp_shell_lua_help.o .libs/grtpp_module.o .libs/grtpp_module_cpp.o .libs/grtpp_module_lua.o .libs/grtpp_notifications.o .libs/lua_context.o .libs/serializer.o .libs/unserializer.o .libs/grtpp_undo_manager.o .libs/changefactory.o .libs/changelistobjects.o .libs/diffchange.o .libs/grtdiff.o .libs/grtlistdiff.o .libs/grtpp_module_python.o .libs/grtpp_shell_python.o .libs/grtpp_shell_python_help.o .libs/python_context.o .libs/python_grtdict.o .libs/python_grtlist.o .libs/python_grtobject.o .libs/python_module.o   -Wl,-rpath -Wl,/home/user/data/workbench/mysql-workbench-gpl-5.2.45-src/library/base/.libs -Wl,-rpath -Wl,/usr/local/lib/mysql-workbench /usr/lib/libgthread-2.0.so /usr/lib/libgmodule-2.0.so -lrt /usr/lib/libglib-2.0.so /usr/lib/libxml2.so /usr/lib/libsigc-2.0.so /usr/lib/liblua5.1.so -luuid -L/usr/local/lib -lpython2.7.a ../../../library/base/.libs/libwbbase.so -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5 -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib -L/lib/../lib -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../.. -L/usr/lib/x86_64-linux-gnu -lstdc++ -lm -lc -lgcc_s /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtendS.o /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crtn.o  -pthread -Wl,--export-dynamic   -pthread -Wl,-soname -Wl,libgrt.so.0 -o .libs/libgrt.so.0.0.0 
```

我检查了图书馆位置：

```
locate lpython2.7.a 
```

结果是：

```
/usr/local/lib/lpython2.7.a 
```

python2.7.3在这里下载：http: [//www.python.org/ftp/python/2.7.3/Python-2.7.3.tar.bz2](http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tar.bz2)

python2.7.3安装步骤：

```
tar -xvjpf Python-2.7.3.tar.bz2 && cd Python-2.7.3 && ./configure && make && make install 
```

任何想法为什么 WB 找不到图书馆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:54:10.380

问题已经解决了。在安装 mysql-workbench 之前，正确安装 python2.7 很重要。此处安装说明：[https ://gist.github.com/1069219](https://gist.github.com/1069219)

# objective-c - 在objective-c中使用十六进制

> ID：14136359
> 
> 赞同：-1
> 
> 时间：2013-01-03T09:47:25.920
> 
> 标签：objective-c, hex, bits

我无法在objective-c中做简单的事情——只是缺乏经验。也许有人可以指出我正确的方向。

我有两个`NSStrings`，以这种格式，信息从其他对象传递。因此，如果使用其他格式（例如。`NSData`）我需要转换它们。然而，即使转换为 NSData 我也不知道如何完成它。

```
NSString *year = @"FC"; ( 1111 1100 )
NSString minutes* = @"0"; ( 0000 0000 ) 
```

我需要从中删除第一部分`year`并将它们添加到`minutes`. 结果应该是这样的：

```
year = 3C ( 0011 1100 )
minutes = 30 ( 0011 0000 ) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:20:51.330

要将字符串转换为整数，请使用 C 标准库函数：

```
NSString *year = @"FC";
NSString *minutes = @"0";
int yearInt = strtol([year UTF8String], NULL, 16);
int minInt = strtol([minutes UTF8String], NULL, 16);

minInt += (year >> 6) & 0x03; 
```

等等

# php - 如何在站点名称上使用带有 Drupal 7 的 Lettering.js？

> ID：14136363
> 
> 赞同：3
> 
> 时间：2013-01-03T09:47:27.723
> 
> 标签：php, javascript, jquery, drupal

我正在尝试在我的新 Drupal 7 网站的站点名称上使用 Lettering.js。这是我到目前为止所做的：

1.  我从 Github 下载了文件，并将其放在我的主题中一个名为 scripts 的文件夹中。（所以它看起来像这样 /sites/all/themes/MyThemeName/scripts/jquery.lettering.js）

2.  然后我使用此语法“scripts[] = scripts/jquery.lettering.js”将脚本添加到我的主题信息文件中。查看页面源代码时，我可以看到正在加载脚本。

我遇到问题的部分是如何调用它。我一直在阅读[http://drupal.org/node/171213](http://drupal.org/node/171213)上的文档，但我仍然感到困惑。我假设我应该将调用放在 template.php 中，并且我可以使用 $site_name 来访问站点内的站点名称，但我不确定从那里去哪里。

感谢任何可以提供一些建议的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T08:28:44.690

扩展上一个答案。

可以使用 template.php 中的 drupal_add_js() 添加 javascript：

```
drupal_add_js($path_to_theme . '/scripts/jquery.lettering-0.6.1.min.js'); 
```

并且上面提到的附加脚本可以添加到 page.tpl.php 作为

```
<script>
(function ($) {
  Drupal.behaviors.headline_lettering = {
    attach:function (context, settings) {
      $(".lettering:not(.lettering-attached)", context)
         .addClass('lettering-attached')
         .lettering();
    }
  }
})(jQuery);
</script> 
```

我没有在脚本中添加 .h1，然后我只需要在任何文本中添加一个“字母”类，就会应用字母。

然后你可以使用[Kern.js](http://www.kernjs.com/)来调整每个字母的位置。它生成需要包含在页面中的 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:57:30.353

lettering.js 所做的就是将文本拆分为跨度。

```
<p>Hey</p> 
```

变成

```
<p><span class="char1">H</span><span class="char2">e</span><span class="char3">y</span></p> 
```

详情见源代码：[https ://github.com/davatron5000/Lettering.js/blob/master/jquery.lettering.js](https://github.com/davatron5000/Lettering.js/blob/master/jquery.lettering.js)

这可以通过预处理函数或使用 PHP 在模板中轻松完成：

```
$chars = str_split($site_name);
$letter_site_name = "";
for($i=0,$count=count($chars);$i<$count;$i++) {
   $letter_site_name = '<span class="char' . ($i+1) . '">' . $chars[$i] . '</span>';
} 
```

如果你想使用 lettering.js，你必须编写一个额外的 javascript。这个脚本必须定义一个 Drupal 行为，它可以在所有带有类 lettering 的标题上运行 letteringjs。

```
(function ($) {
  Drupal.behaviors.headline_lettering = {
    attach:function (context, settings) {
      $("h1.lettering:not(.lettering-attached)", context)
         .addClass('lettering-attached')
         .lettering();
    }
  }
})(jQuery); 
```

# html5-video - HTML 5 是否支持 IIS 平滑流式处理？

> ID：14136365
> 
> 赞同：1
> 
> 时间：2013-01-03T09:47:33.000
> 
> 标签：html5-video

HTML5 是否支持所有支持 HTML5 的浏览器的 IIS 平滑流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:55:38.207

Based on Microsoft's own readme (http://learn.iis.net/page.aspx/1046/iis-media-services-readme#issues) it would appear that Smooth Streaming is a server-side technology to deliver H.264 video.

Another quick Google query yields this:

[http://en.wikipedia.org/wiki/HTML5_video#Browser_support](http://en.wikipedia.org/wiki/HTML5_video#Browser_support)

Which is a list of which browsers will hypothetically work with it. Nothing like a bit of manual testing to double-check, though ;)

# ios - 画一些东西并将其复制到 iPad 上现有的 pdf 文档上

> ID：14136368
> 
> 赞同：1
> 
> 时间：2013-01-03T09:47:40.733
> 
> 标签：ios, ipad, pdf, drawing, edit

我想用手指制作一个简单的绘图并将其插入现有的 pdf 文件中。我完全不知道如何开始这个功能。

所以，第一步：制作图纸，第二步：编辑pdf文件并插入图纸，最后：保存文档。

我该如何开始？你推荐我什么图书馆？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:31:21.157

对于绘图，您可以使用此库： [https ://github.com/gtmtg/MGDrawingSlate](https://github.com/gtmtg/MGDrawingSlate)

对于创建 PDF，我可以推荐遵循本教程： http: [//klanguedoc.hubpages.com/hub/iOS-Create-PDF-using-UIKit](http://klanguedoc.hubpages.com/hub/iOS-Create-PDF-using-UIKit)

或者您可以创建一些 HTML 并从中生成 PDF：[https ://github.com/ocrickard/OCPDFGen](https://github.com/ocrickard/OCPDFGen)

要编写文件，您可以查看： [How to save/load text files in Objective-C for iPhone, using UITextView?](https://stackoverflow.com/questions/5100994/how-to-save-load-text-files-in-objective-c-for-the-iphone-using-uitextview)

# wordpress - Wordpress，如何从一个空的主题开始？

> ID：14136376
> 
> 赞同：3
> 
> 时间：2013-01-03T09:48:05.777
> 
> 标签：wordpress, wordpress-theming

我已经在 Wordpress 上工作了一个月来创建主题。否则，当我开始一个新项目时，我总是从我正在修改的现有主题开始。

我想要的是完美地清理一个主题并将我需要的网站添加到其中。

但是，我的 Wordpress 知识还不足以做到这一点。所以，我问你是否知道一本好书、网站等，它们在哪里简单地解释如何创建一个新主题（了解 Wordpress 的每个功能，解释 functions.php 文件中的每个功能，如何正确添加 Wordpress发布内容）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:09:29.923

罗曼问道：

> ...如何创建新主题（了解 Wordpress 的每个功能，解释 functions.php 文件中的每个功能，如何正确添加 Wordpress 帖子内容）。

从 codex [http://codex.wordpress.org/Main_Page](http://codex.wordpress.org/Main_Page)开始，它是

> WordPress 的在线手册和 WordPress 信息和文档的实时存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T14:38:34.633

您可以在此处下载**最简单的 wordpress 主题**：

[http://wordpress.org/extend/themes/simplest](http://wordpress.org/extend/themes/simplest)

在您查看这个并使用这个简单的主题创建一些主题之后 - 您将更好地理解 Wordpress Codex，并且您可以遵循 @markratledge 关于 Codex 的建议。

无论如何，我决定不阅读整个法典，我使用这个主题（“最简单”）作为我的主题的样板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:48:37.483

我所做的是创建所有文件并将它们保存在一个文件夹中，然后根据需要上传它们。我从这个简单的教程中复制了它们，虽然说它是为了创建一个设计的主题，但它只有基本的空白主题：

[http://blog.spoongraphics.co.uk/tutorials/how-to-build-a-custom-wordpress-theme-from-scratch](http://blog.spoongraphics.co.uk/tutorials/how-to-build-a-custom-wordpress-theme-from-scratch)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T03:37:25.007

你应该看看 Elliot Jay Stocks 的 Starkers：

*   简介：http: [//viewportindustries.com/products/starkers/](http://viewportindustries.com/products/starkers/)
*   演示：[http ://starkers.viewportindustries.com/](http://starkers.viewportindustries.com/)
*   Github：[https ://github.com/viewportindustries/starkers](https://github.com/viewportindustries/starkers)

它帮助我很多次从头开始。它有基本文件，没有 CSS。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-03T23:32:01.693

wordpress.org 将是您最好的起点，

> （了解 Wordpress 的每个功能，解释 functions.php 文件中的每个功能，如何正确添加 Wordpress 帖子内容）。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-12-06T18:01:03.460

您可以通过以下一些方法从头开始制作 WordPress 主题

> 1.  通过使用**Youtube**，但这不是很专业
> 2.  通过使用**谷歌**，是的，你会发现很多网站会向你展示这个过程，这是高效且免费的
> 3.  通过使用**Udemy**或**Lynda**，您将了解整个过程以及必要的知识，如 wordpress 的层次结构、wordpress 的工具和标准等。
> 4.  通过使用**wordpress.org**，这是学习 wordpress 最理想和最专业的方式，因为这是 WordPress 周围发生的所有事情的主要场所。

# jquery - 在响应式设计中隐藏 jQuery Supersized 画廊？

> ID：14136379
> 
> 赞同：1
> 
> 时间：2013-01-03T09:48:10.280
> 
> 标签：jquery, supersized

我正在使用[Supersized jQuery 插件](http://www.buildinternet.com/project/supersized/)，并尝试在屏幕尺寸小于 480 像素（即 iPhone 尺寸左右）时“禁用”或隐藏全屏图像。但是，我看不到这样做的方法 - 我尝试使用 CSS 没有成功（试图隐藏 #supersized ul 列表），但由于样式是内联的，我无法让它工作。

我已经复制粘贴了 Supersized 为画廊中使用的第一个列表项生成的 HTML，这样您就可以看到我必须使用的内容 - 是否有我可以使用的回调或其他什么？

```
<ul id="supersized" class="quality" style="visibility: visible;">
   <li class="slide-0 prevslide" style="visibility: visible; opacity: 1;"><a target="_blank"><img src="#" style="width: 1425px; left: 0px; top: -190.5px; height: 869.25px;"></a></li>
...
</ul> 
```

任何指针表示赞赏。

谢谢，

大须

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:31:15.043

我需要在我的类声明中添加 !important 才能使其工作，即

```
#supersized { display:none !important; left:-999999px !important; } 
```

# php - 来自网络应用程序的条码扫描仪不返回任何内容

> ID：14136386
> 
> 赞同：0
> 
> 时间：2013-01-03T09:48:35.110
> 
> 标签：php, web-applications, barcode, zxing

在 Android 设备上单击链接时，我们可以选择在 Barcode Scanner 应用程序中打开它，但是当我们扫描条形码时，它不会返回任何内容。

这是我们的链接：

```
<a href="zxing://scan/?ret=<?php echo urlencode("http://172.20.200/projekt/matjakt/Frontend/search.php?s={CODE}"); ?>&SCAN_FORMATS=UPC_A,EAN_13" class="scan"> 
```

此外，当在 iPhone 上单击链接时，扫描仪应用程序会打开，但只会显示白屏，因此我们无法扫描任何内容。

关于有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:56:17.047

Your return url is invalid. `http://172.20.200` does not make any sense. Either use a domain name or some valid IP. Your IP has three parts. But a valid IP should have four parts.

# jquery - 有人知道这种悬停动画效果是如何创建的吗？

> ID：14136387
> 
> 赞同：0
> 
> 时间：2013-01-03T09:48:40.393
> 
> 标签：jquery, animation, icons

嗨，我最近看到这种类型的动画使用了很多。我一直在尝试研究如何实现这一点并找到诸如 spritely 之类的插件，但只是想知道我是否遗漏了一些东西，或者是否有更好的方法来实现这种效果。

这是我正在谈论的那种动画的示例：

[http://byassociationonly.com/about/](http://byassociationonly.com/about/)

（橙色圆圈中的图标动画）

任何提示或建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:52:27.230

他们使用 css 来更改背景图像。当您将 div 悬停时，背景会切换为[动画 gif](http://byassociationonly.com/wp-content/themes/ByAssociationOnly/img/about3.gif)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:55:03.323

我查看了网站的源代码，他们是如何通过 CSS 使用 ":hover" 的。也可以使用 javascript，但我觉得使用 CSS 会容易得多。

CSS 代码示例：

```
#divName{
 background: url(linkToImage);
 background-repeat: no-repeat;
}
#divName:hover{
 background: url(linkToGIF);
 background-repeat: no-repeat;
} 
```

# sql - 按更近的距离获取 MIN MAX 分组

> ID：14136389
> 
> 赞同：2
> 
> 时间：2013-01-03T09:48:51.623
> 
> 标签：sql, postgresql

**商店**

```
id_shop | id_prod_ty | 位置

```

和

**产品**

```
编号 | 价格 | id_prod_ty | 距离

```

表 shop 包含 2 个商店，每个 id_prod_ty（产品类型）和一个位置。
表 products 包含许多具有不同价格和距离的记录

基本上我需要有一个查询，为每种产品和每个商店选择价格低和高，按更接近的价格分组（并且不靠近其他商店）

所以例如

**商店**

```
id_shop | id_prod_ty | 位置
  1 | 1 | 3
  2 | 1 | 7
  3 | 2 | 8
  4 | 2 | 4
……

```

**产品**

```
编号 | 价格 | id_prod_ty | 距离
1 | 10 | 1 | 1        
2 | 04 | 1 | 2
3 | 02 | 1 | 4
4 | 44 | 1 | 2
5 | 09 | 1 | 1
6 | 13 | 1 | 7
7 | 15 | 1 | 8
8 | 09 | 2 | 5
9 | 12 | 2 | 8
10 | 17 | 2 | 1
11 | 32 | 2 | 13
12 | 22 | 2 | 2
...

```

结果喊成这样

```
id_prod_ty | id_price_low | id_price_high | id_shop
1 | 3 (02) | 4 (44) | 1
1 | 6 (13) | 7 (15) | 2
2 | 8 (09) | 12 (22) | 4
2 | 9 (12) | 11 (32) | 3
...

```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:56:37.833

我想我理解这个问题。对于每个价格，您都试图根据距离和位置分配最近的商店。

该方法从加入职位和商店开始。然后它计算位置和距离之间的差异——这似乎是您正在使用的度量。每个价格 ID 将出现两次（每个商店一次）。使用窗口函数，它计算每个 id 的最小差异。

有了这个信息，查询可以确定哪个是最近的商店。此版本返回价格，而不是最低价格的 id。这是最终的未经测试的查询：

```
select id_prod_ty,
       MIN(case when diff = minDiff then price) as price_low,
       MAX(case when diff = minDiff then price) as price_high,
       s.id_shop
from (select p.id_prod_ty,
             s.id_shop,
             p.price,
             (p.distance - s.position) as diff,
             MIN(p.distance - s.position) over (partition by p.id) as minDiff
      from products p join
           shops s
           on p.id_prod_ty = s.id_prod_ty
    ) ps
group by id_prod_ty, id_shop 
```

这是一个获取 id 的变体。它使用窗口函数来查找最低和最高价格，然后将价格与这些值进行比较以获取 id：

```
select id_prod_ty,
       MIN(minPrice) as price_low,
       MIN(case when price = minPrice then id end) id_price_low,
       MAX(maxprice) as price_high,
       MIN(case when price = maxPrice then id end) id_price_high,
       id_shop
from (select *,
             MIN(IsThisShopPrice) over (partition by id_prod_ty, id_shop) as minPrice,
             MIN(IsThisShopPrice) over (partition by id_prod_ty, id_shop) as maxPrice,
      from (select p.id_prod_ty, s.id_shop, p.price, p.id,
                   (p.distance - s.position) as diff,
                   (case when (p.distance - s.position) = MIN(p.distance - s.position) over (partition by p.id)
                         then 'Y'
                         else 'N'
                    end) as IsThisShop
                   (case when (p.distance - s.position) = MIN(p.distance - s.position) over (partition by p.id)
                         then price
                    end) as IsThisShopPrice
            from products p join
                 shops s
                 on p.id_prod_ty = s.id_prod_ty
           ) ps
    ) ps
group by id_prod_ty, id_shop 
```

# sql - 是否可以在一个 SQL 请求中获得多个 COUNT？

> ID：14136393
> 
> 赞同：0
> 
> 时间：2013-01-03T09:49:10.973
> 
> 标签：sql, sql-server-2008, tsql, join

我需要帮助来编写一个简单的程序。让我解释一下我想要做什么。

我有 3 张桌子

1.  tJobOffer
2.  t应用
3.  tApplicationStatus

我想创建一个程序，返回一个 tJobOffer 列表，其中包含此 tJobOffer 的不同状态的统计信息。tApplicationStatus 链接到链接到 tJobOffer 的 tApplication。申请可以是候选/接受/拒绝/忽略/...

我创建了这个查询：

```
 SELECT 
        [T].[JobOfferId],
        [T].[JobOfferTitle],
        COUNT([A].[ApplicationId]) AS [CandidateCount]

    FROM        [tJobOffer] AS [T]
    LEFT JOIN   [tApplication] AS [A]
        INNER JOIN   [tApplicationStatus] AS [S]
            ON      [S].[ApplicationStatusId] = [A].[ApplicationStatusId]
            AND     [S].[ApplicationStatusTechnicalName] = 'CANDIDATE'
        ON      [A].[JobOfferId] = [T].[JobOfferId]

    GROUP BY
            [T].[JobOfferId],
            [T].[JobOfferTitle]

    ORDER BY [T].[JobOfferTitle] ; 
```

结果是

```
> 52ED7C67-21E1-49BB-A1F8-0601E6EED1EA  Announce a  0
> F26B228D-0C81-4DA8-A287-F8F997CC1F9C  Announce b  0
> 9DA60B23-F113-4C7F-9707-2B90C1556D5D  Announce c  2
> 258E11A7-79C1-47B6-8C61-413AA54E2360  Announce d  0
> DA582383-5DF4-4E1D-837C-382371BDEF57  Announce e  1 
```

结果是正确的。我得到了我的 tJoboffers 和状态候选人的统计数据。我有 2 位 Announce c 候选人和 1 位宣布 e 候选人。如果我将字符串“CANDIDATE”更改为“ACCEPTED”或“REFUSED”，我可以获得有关这些状态的统计信息。**是否有可能在一个请求中获得所有内容？**

就像是

```
> 52ED7C67-21E1-49BB-A1F8-0601E6EED1EA  Announce a  0   0   2
> F26B228D-0C81-4DA8-A287-F8F997CC1F9C  Announce b  0   0   1
> 9DA60B23-F113-4C7F-9707-2B90C1556D5D  Announce c  2   0   0
> 258E11A7-79C1-47B6-8C61-413AA54E2360  Announce d  0   0   0
> DA582383-5DF4-4E1D-837C-382371BDEF57  Announce e  1   1   0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T09:52:39.377

使用`SUM`和`CASE`

```
SELECT 
    [T].[JobOfferId],
    [T].[JobOfferTitle],
    SUM(CASE WHEN [S].[ApplicationStatusTechnicalName] = 'CANDIDATE' THEN 1 ELSE 0 END) AS [CandidateCount],
    SUM(CASE WHEN [S].[ApplicationStatusTechnicalName] = 'ACCEPTED' THEN 1 ELSE 0 END) AS [ACCEPTEDCount],
    SUM(CASE WHEN [S].[ApplicationStatusTechnicalName] = 'REFUSED' THEN 1 ELSE 0 END) AS [REFUSEDCount]
FROM    [tJobOffer] AS [T]
        LEFT JOIN   [tApplication] AS [A]
            ON      [A].[JobOfferId] = [T].[JobOfferId]
        LEFT JOIN   [tApplicationStatus] AS [S]
            ON      [S].[ApplicationStatusId] = [A].[ApplicationStatusId]
GROUP BY
        [T].[JobOfferId],
        [T].[JobOfferTitle]
ORDER BY [T].[JobOfferTitle] ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:56:23.190

是的。一种方法是使用 PIVOT 函数。另一种方法是在每次需要计数项目时使用 LEFT OUTER JOIN，如下所示：

```
SELECT a.JobID, COUNT(b.JobID), COUNT(c.JobID)
FROM AllVacancies as a
LEFT OUTER JOIN 
    (SELECT JobID from AllVacancies WHERE ApplicationStatus = 'CANDIDATE') as b
ON a.JobID = b.JobID
LEFT OUTER JOIN 
    (SELECT JobID FROM AllVacancies WHERE ApplicationStatus = 'ACCEPTED') as c
ON a.JobID = cJobID 
```

与您需要的类别一样多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:06:47.083

是的，您可以携带任意数量的物品

试试这个

```
SELECT COUNT(1),COUNT(2) FROM demoTable; 
```

这将为您提供第 1 列和第 2 列中的行数

通常这将导致相同的计数，除非您有任何允许的空值并且存在于任何列中。如果任何列有任何空值，那么它的计数可能会有所不同，所以基本上这个想法是在主键列上应用计数。

```
Select count(*) from demoTable ; 
```

此行也会产生计数值，但它适用于整个表，因此在任何特定列上应用计数会更好。

再次在准确性问题上，这必须应用于具有主键或非空约束的列。

再往前走，你不必拘泥于一张桌子

```
SELECT COUNT(1),COUNT(2) FROM ( joins or any selection from any no of table); 
```

请注意选择集中存在的列数

# html - 使用经典 asp 发送电子邮件

> ID：14136397
> 
> 赞同：1
> 
> 时间：2013-01-03T09:49:25.727
> 
> 标签：html, email, asp-classic, smtp, sendmessage

我有兴趣通过 ASP 页面发送电子邮件。我在互联网上照顾它，我发现了一些东西。

```
<%
    sch = "http://schemas.microsoft.com/cdo/configuration/" 

    Set cdoConfig = CreateObject("CDO.Configuration") 

    With cdoConfig.Fields 
        .Item(sch & "sendusing") = 2 ' cdoSendUsingPort 
        .Item(sch & "smtpserver") = "smtp.gmail.com" 
        .update 
    End With 

    Set cdoMessage = CreateObject("CDO.Message") 

    With cdoMessage 
        Set .Configuration = cdoConfig 
        .From = Request.Form("From")
        .To = Request.Form("To") 
        .Subject = Request.Form("Subject")
        .TextBody = Request.Form("Body") 
        .Send 
    End With 

       Set cdoMessage = Nothing 
       Set cdoConfig = Nothing 
   %> 
```

但它没有向我发送电子邮件，它说“流量无法连接到服务器”我应该在代码中更改什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:02:57.613

我认为您必须为 smtp 服务器设置用户名和密码，并将“smtpauthenticate”属性设置为 true：

```
.item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
.item("http://schemas.microsoft.com/cdo/configuration/sendusername") = usrName
.item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = pwd 
```

# html-table - 使用 XAJAX 在表中追加行 - 值被删除

> ID：14136399
> 
> 赞同：0
> 
> 时间：2013-01-03T09:49:32.890
> 
> 标签：html-table, row, xajax

我有这张 HTML 表格：

```
<table style="width: 100%;" class="allBorders">
    <tbody id="added_articles">
        <tr id="header_articles">
            <td>test</td>
            <td>&nbsp;</td>
        </tr>
    </tbody>
</table> 
```

并使用 XAJAX 我像这样附加新的 ROW

```
function addNewLine()
{
    global $objResponse;
    $uniqueID = time();
    $return = "<tr id='articles_".$uniqueID."'>";
    $return .= "<td><input type='text' id='v_$uniqueID' name='v[]' /></td>";
    $return .= "</tr>";
    $objResponse->append("added_articles", "innerHTML", $return);
    return $objResponse;
} 
```

每当我添加新行时，以前添加的行中的所有值都会被清除..

例子：

1.  添加第一行
2.  第一行的值设置为“TEST”
3.  添加第二行并删除第一行中的值......

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T13:08:01.650

我在使用此功能添加“tr”时遇到问题。

我使用的代码是..

```
 function Start($oid){
   $objResponse = new xajaxResponse();
   $userauth = Authorizer::getUserByID($oid); // I Save here DB rows return.
      while ( $rows = $userauth->fetchRow() ){
          $row[] = $rows['uid'];

        $userInfo = User::userInfo($rows['uid']);
   $useradd .= '              <tr class="spaceunder">
                                 <td>'. $rows['uid'] .'</td>
                                 <td>'. $rows['status'] .'</td>
                                 <td>'. $rows['perm'] .'</td>
                                 <td>'. $rows['dtauth'] .'</td>    
                              </tr>';

        $objResponse->addAlert($useradd);
        $objResponse->addAssign('userAdded', 'innerHTML', $useradd);

         return $objResponse->getXML();
     } 
```

我的 HTML 是...

```
 <table id ="userAdded" border="0" cellpadding="0" cellspacing="0" style="width:100%;height:100%;padding:5px 0px 0 0px;margin:0px 0px 0 0px;">
                <tr valign="top" style="height:37px;padding:1px 1px 1 1px;margin:0px 0px 0 0px;"> 
                   <td align="left">
                      <table width="100%" cellspacing="0" cellpadding="0" border="0">

                      </table>
                   </td>
                </tr>
            </table>' 
```

而且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T21:32:21.207

```
<div id="added_articles">
    <table style="width: 100%;" class="allBorders">
        <tbody>
            <tr id="header_articles">
                <td>test</td>
                <td>&nbsp;</td>`enter code here`
            </tr>
        </tbody>
    </table>
</div>

function addNewLine()
{
    global $objResponse;
    $return .= "<table style="width: 100%;" class="allBorders">";
    $return .= "<tr id='articles_".$uniqueID."'>";
        $return .= "<td><input type='text' id='v_$uniqueID' name='v[]' /></td>";
    $return .= "</tr></table>";
    $objResponse->append("added_articles", "innerHTML", $return);
        return $objResponse;
} 
```

# exception - elasticsearch搜索阶段执行

> ID：14136407
> 
> 赞同：6
> 
> 时间：2013-01-03T09:50:11.670
> 
> 标签：exception, search, elasticsearch, execution, phase

我有问题，我不知道该去哪里。长话短说，我的网页设计师让我高高在上，我不知道他做了什么，他拒绝接听他的电话。我可以访问主页，但在那之后，我完全被锁定并盯着我商店中每个产品的 SearchPhaseExecutionException。任何帮助将不胜感激，因为我完全不知道该怎么做。这是完整的错误日志，我可以发布解决此问题所需的任何其他信息：

```
 SearchPhaseExecutionException at /category/1
Failed to execute phase [query], total failure; shardFailures {[_na_][product][0]: No     active shards}{[_na_][product][1]: No active shards}{[_na_][product][2]: No active shards}{[_na_][product][3]: No active shards}{[_na_][product][4]: No active shards} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:03:21.620

在您的网站/农场的某个地方，您正在运行弹性搜索服务器。该服务器有一个名为 的索引`product`，我猜这个索引包含有关您商店中产品的信息。目前，此弹性搜索服务器遇到某种问题，导致索引不可用。通过查看弹性搜索服务器的日志文件可能会告诉您发生了什么，这与您的 Web 服务器的日志文件不同。您是否看到任何名为 的日志文件`elasticsearch.log`？

顺便说一句，由于可能需要多次迭代才能弄清楚发生了什么，因此将这个对话移动到[弹性搜索邮件列表](https://groups.google.com/forum/?fromgroups=#!forum/elasticsearch)或 freenode 上的#elasticsearch IRC 频道可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T21:16:02.680

有时由于数据而发生此错误，必须清理要搜索的数据，因为 elasticSearch 会因诸如“ [PREPARATION”甚至“ word：”之类的单词而崩溃，因为标点符号会使它发疯。

如果您不想清理数据，您可以捕获异常，它将继续

# java - Spring 3 应用程序上下文加载

> ID：14136408
> 
> 赞同：1
> 
> 时间：2013-01-03T09:50:12.773
> 
> 标签：java, spring, applicationcontext

我对 Spring 框架有点熟悉，但从项目架构的角度来看，我仍然有很多关于使用 Spring 的问题。现在我正在设置 Spring 3 和一个 Maven Web 应用程序，并愿意尝试所有花哨的组件扫描和自动装配功能，但这是我感到困惑的地方。

我正在尝试将项目分解为子模块。在某些时候，这些子模块可能包含`something-context.xml`在 中`classpath*:resource/META-INF`，例如当我想在一个单独的模块中定义一个与 datSource 相关的东西时。所以这很好，让我们从所有 jar 的类路径中加载上下文文件。

但在这里它变得模糊 - 假设我正在使用组件扫描。我显然在使用 spring `DispatcherServlet`，它需要加载一个 servlet 上下文，然后在 web.xml 中指定了一个全局应用程序上下文参数`contextConfigLocation`。

因此，现在 servlet 上下文配置启用了组件扫描功能，`com.mycom.project.controllers`并且全局加载`contextConfigLocation`的上下文具有加载组件扫描功能的上下文，包`com.mycom.project`也搜索`classpath*:META-INF/spring/*-context.xml`.

所以我的问题是 - 考虑到组件扫描用于 for`com.mycom.project.controllers`和，这个负载控制器是否两次`com.mycom.project`？或者它是否全部加载到一个巨大的容器中，或者全局声明的`contextConfigLocation`参数`DispatcherServlet`是某种访问问题？如`DispatcherServlet`将仅达到定义的内容，`servlet-context.xml`但无法使用其他任何内容？

如果我的假设是错误的，我可以就如何管理多模块项目问题提出建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:05:31.930

是的，你可能会遇到麻烦。请参阅此链接以了解如何解决您的问题。

[@Service 被构造了两次](https://stackoverflow.com/questions/4333390/service-are-constructed-twice)

创建模块时进行的方式对我来说似乎是有效的。每个模块都有一个 context.xml 文件，一旦加载应用程序，所有模块都会被加载。您的模块是独立的，也可以在不同的环境中使用。这几乎就是我也会这样做的方式。

# iphone - 像 FaceBook 一样滚动 UITableView

> ID：14136410
> 
> 赞同：2
> 
> 时间：2013-01-03T09:50:25.997
> 
> 标签：iphone, ios

如果您查看适用于 iOS 的 Facebook“应用程序”，则滚动`UITableView`速度非常快。似乎该应用程序正在将数据呈现到不同线程（而不是主线程）中的单元格中。

我也在开发一个类似的应用程序。但是我的应用滚动速度不好。我正在使用延迟加载图像。即使这样，滚动速度也很差。

是否可以在不同的线程中填充自定义`UITableViewCell`（不在主线程中）？？？？

谢谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:42:46.997

假设每个 UITableViewCell 都有以下任务

1.  **从服务获取数据**
2.  **从服务中获取图像**
3.  **调整图像大小以匹配容器大小**（如果你得到的图像很大，你应该这样做）
4.  **显示您的数据**。

你应该在后台执行 1 , 2 , 3

**但是您必须并且应该在主线程中执行 4。**

***不要为每个 tableview 单元格创建一个单独的线程，***然后再为任务 1 、 2 、 3 创建一个单独的线程。这真的是在浪费资源。

那么，如何在不为每一件事都创建线程的情况下完成所有这些背景工作。

使用**大中央调度**(GCD)

在 GCD 上阅读。

如果你想要一个快速的解决方法这里是

出色地。任务 4 有两件事要做。

*4(a) 更新表格单元格上的一些文本以获取我们得到的日期。4（b）显示获取和调整大小的图像。*

我正在服用
**1** 和 **4(a)**

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

       1\. DO 1 Here
       2\. Call a Call Back When your Task is Done
        example
        CallBack(Response);

});

CallBack(Response *)response{

   dispatch_async(dispatch_get_main_queue(), ^{

        Do your 4(a) Here
   });
} 
```

# php - 将模型中的数据加载到复选框列表中

> ID：14136411
> 
> 赞同：2
> 
> 时间：2013-01-03T09:50:26.530
> 
> 标签：php, yii

我需要为示例部门创建复选框列表内容，并且用户可以选中多个框。

使用 droppdownlist 我可以像这样加载值：

模型 ：

```
public function getsection(){
    return array (
        CHtml::listData(Csection::model()->findAll(),'section_id','ar_name'),
    ); 
} 
```

看法 ：

```
echo CHtml::activedropDownList(
  $models,
  'section_id', 
  $models->getsection(),
  array(
    'size'=>'4',
    'prompt'=>'أSelect Sections ',
    'multiple' => 'multiple',
  )
); 
```

那么我如何使用 checkboxlist 来做到这一点，以及如何处理控制器中的值，它是否像 droppdownlist ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:39:48.667

您可以使用 Chtml::activeCheckBoxList

```
echo Chtml::activeCheckBoxList($models, 'section_id', $models->getsection()); 
```

# yii - Yii 文档：生成 Html 帮助项目文件

> ID：14136414
> 
> 赞同：0
> 
> 时间：2013-01-03T09:50:44.103
> 
> 标签：yii, documentation-generation, html-help

我需要从 Yii Docs 构建系统生成**MS html 帮助项目文件**（即 html/js/image 文件加上 .hhp、.hhk 和 .hhc），但我还没有找到如何去做。我不需要编译的 CHM，只需要项目文件。我在 Ubuntu Linux 上工作

任何指针或直接帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:06:38.547

通过 pear 安装了 PHP 单元和 Selenium 扩展然后我继续使用命令在 yii/build 目录中运行 phing

```
cd yiidir/build
phing doc 
```

检查 API 子目录，它包含制作 CHM 所需的所有文件。因为我需要未编译的文件，所以我就在这里结束了，但你可以继续编译到 CHM

# java - 未知主机异常

> ID：14136416
> 
> 赞同：0
> 
> 时间：2013-01-03T09:50:54.713
> 
> 标签：java, exception, connection, unknown-host

为什么会抛出 UnknownHostException？

```
 parameters = "user=akirus&pass=1234&version=1";
    String result = excutePost("http://russianimperial.ru/minecraft/loginServer.php", parameters);

  public static String excutePost(String targetURL, String urlParameters) {
      HttpURLConnection connection = null;
      try {
          URL url = new URL(targetURL);
          connection = (HttpURLConnection)url.openConnection();

          connection.setRequestMethod("POST");
          connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
          connection.setRequestProperty("Content-Length", Integer.toString(urlParameters.getBytes().length));
          connection.setRequestProperty("Content-Language", "en-US");

          connection.setUseCaches(false);
          connection.setDoInput(true);
          connection.setDoOutput(true);

          DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
          wr.writeBytes(urlParameters);
          wr.flush();
          wr.close();

          InputStream is = connection.getInputStream();
          BufferedReader rd = new BufferedReader(new InputStreamReader(is));

          StringBuffer response = new StringBuffer();
          String line;
          while ((line = rd.readLine()) != null) {
              response.append(line);
              response.append('\r');
          }
          rd.close();

          String str1 = response.toString();
          return str1;
     }catch (Exception e) {
         e.printStackTrace();
         return null;
     }finally {
         if (connection != null)
             connection.disconnect();
     }
  } 
```

网址[http://russianimperial.ru/minecraft/loginServer.php](http://russianimperial.ru/minecraft/loginServer.php)有效。早些时候它工作得很好。`UnknownHostException`扔在这个地方`InputStream is = connection.getInputStream();`。在 javadoc 中编写的`connection.getInputStream()`协议不支持输入时可以抛出此异常，但我认为 http 支持输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:03:43.197

实际上，此代码会产生 UnknownHostException。但是看看完整的堆栈跟踪：

```
java.net.UnknownHostException: updaters
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:195)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:388)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:523)
    at sun.net.www.http.HttpClient.<init>(HttpClient.java:227)
    at sun.net.www.http.HttpClient.New(HttpClient.java:300)
    at sun.net.www.http.HttpClient.New(HttpClient.java:317)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:970)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:911)
    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:836)
    at sun.net.www.protocol.http.HttpURLConnection.followRedirect(HttpURLConnection.java:2113)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1367)
    at Host.excutePost(Host.java:43)
    at Host.main(Host.java:14) 
```

当 URL 连接尝试重定向时，您会收到此异常，并且重定向会转到一些不清楚的“更新程序”。所以它不是“russianimperials.ru”，而是它所做的重定向。为什么？这取决于一个页面，你也可能在传递参数的方式上做错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:52:45.103

看看[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html)：

UnknownHostException 是

> 抛出表示无法确定主机的 IP 地址

在问一个 SO 问题之前先做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:53:53.127

如果您查看客户端和服务器之间的交换，您会发现：

```
* Request
GET / HTTP/1.1
Host: russianimperial.ru
User-Agent: Java/1.6.0_26

 * Response
HTTP/1.1 302 Found
Server: nginx/0.8.55
Date: Thu, 03 Jan 2013 11:45:08 GMT
Content-Type: text/html; charset=iso-8859-1
Connection: keep-alive
Location: http://updaters/tds/go.php?sid=1
Content-Length: 286

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>302 Found</title>
</head><body>
<h1>Found</h1>
<p>The document has moved <a href="http://updaters/tds/go.php?sid=1">here</a>.</p>
<hr>
<address>Apache/2 Server at russianimperial.ru Port 80</address>
</body></html> 
```

如果您更改用户代理，或未设置用户代理，则没有重定向 但是，由于未知原因，Java 用户代理被此站点阻止并重定向到不存在的主机

更换用户代理，一切顺利

# wpf - WPF - 将窗口位置锚定到 TopLeft 以外

> ID：14136427
> 
> 赞同：0
> 
> 时间：2013-01-03T09:51:26.167
> 
> 标签：wpf, window, position, anchor

例如，我试图将 WPF 窗口（不是窗口内的控件）锚定到 TopRight，默认情况下，Windows 将所有窗口锚定到左上角。

我尝试了以下代码

```
 private void OnWindowSizeChanged(object sender, SizeChangedEventArgs e)
    {
        double delta = e.PreviousSize.Width - e.NewSize.Width;
        Left += delta;
    } 
```

它可以工作，但是在快速大小变化（例如动画）期间窗口会卡住/闪烁

我试着用谷歌搜索它，但没有找到一个好的解决方案，我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:00:23.407

[在这篇](https://stackoverflow.com/questions/1028024/snapping-sticky-wpf-windows)文章的帮助下，我设法解决了这个问题。

这是代码

```
public partial class MainWindow : Window
{
    private double right;

    public MainWindow()
    {
        InitializeComponent();
    }

    protected override void OnSourceInitialized(EventArgs e)
    {
        base.OnSourceInitialized(e);
        HwndSource source = PresentationSource.FromVisual(this) as HwndSource;
        right = Left + Width;
        source.AddHook(WndProc);
    }

    private IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
    {
        if (msg == (int)WindowMessage.WindowPositionChanging)
        {
            var windowPosition = (WindowPosition)Marshal.PtrToStructure(lParam, typeof(WindowPosition));
            bool isMove = !windowPosition.Flags.HasFlag(WindowPositionFlags.NoMove); //0x0002
            bool isSize = !windowPosition.Flags.HasFlag(WindowPositionFlags.NoSize); //0x0001

            if (isMove)
            {
                right = windowPosition.Left + windowPosition.Width;
            }
            else if (isSize)
            {
                windowPosition.Left = (int)(right - windowPosition.Width);
                windowPosition.Top = (int)Top;
                windowPosition.Flags = (WindowPositionFlags)((int)windowPosition.Flags & 0xfffd); //remove the NoMove flag
                Marshal.StructureToPtr(windowPosition, lParam, true);
            }

        }
        return IntPtr.Zero;
    } 
```

希望它可以帮助某人

# c# - 如果可能，如何使用来自 .net 应用程序的寡妇身份验证连接远程 SQLserver

> ID：14136433
> 
> 赞同：0
> 
> 时间：2013-01-03T09:51:58.040
> 
> 标签：c#, asp.net

目前我在应用程序的 app.config 文件中使用这个连接字符串

```
add name="LightSailEntities" connectionString="metadata=res://*/LightSailEntities.csdl|res://*/LightSailEntities.ssdl|res://*/LightSailEntities.msl;provider=System.Data.SqlClient;provider connection string='data source=abc.xyz.com;initial catalog=LightSail;user id=LightSail; password=yourpasswordhere;MultipleActiveResultSets=True;App=EntityFramework'" providerName="System.Data.EntityClient" 
```

.Net 应用程序的域和使用 .Net 应用程序的客户端域与 SQL Server 的域不同。我提到**“使用寡妇身份验证”**只是因为我可以访问安装了 SQL 服务器的服务器计算机（意味着我可以使用远程桌面连接）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:07:31.083

对于 Windows Auth，您不需要设置用户 ID 和密码，但您需要包含“Integrated Security=SSPI;”

尝试：

```
add name="LightSailEntities" connectionString="metadata=res://*/LightSailEntities.csdl|res://*/LightSailEntities.ssdl|res://*/LightSailEntities.msl;provider=System.Data.SqlClient;provider connection string='data source=dev.shopcube.com;initial catalog=LightSail;Integrated Security=SSPI;MultipleActiveResultSets=True;App=EntityFramework'" providerName="System.Data.EntityClient" 
```

这里有更多信息：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring (VS.71).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring(VS.71).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:44:06.107

您必须更改 ConnectionString 以使用`Integrated Security=SSPI`insetad of`user`和`password`

```
add name="LightSailEntities" 
connectionString="metadata=res://*/LightSailEntities.csdl|res://*/LightSailEntities.ssdl|res://*/LightSailEntities.msl;
provider=System.Data.SqlClient;
provider connection string='data source=dev.shopcube.com;initial catalog=LightSail;Integrated Security=SSPI;MultipleActiveResultSets=True;App=EntityFramework'" 
providerName="System.Data.EntityClient" 
```

之后，查看`Identity`适用于您的应用程序的设置`Application Pool`。
**必须授权该用户**使用Management Studio 的`Security\Logins`内部访问您的数据库。`Object Explorer`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:07:37.280

您可以使用以下代码：

```
SqlConnection conn = new SqlConnection(Configuration.DBConn); 
```

或者如果您使用 Linq2SQL：

`DBContext ctx = new DBContext(Configuration.DBConn);`

其中配置类 DBConn 字符串包含到 sql 的连接字符串，即：

`Data Source=XYZ\\DEV;Initial Catalog=YOURDB;Integrated Security=True;Connect Timeout=600;connection lifetime=600`

`Integrated Security=True`告诉您要使用 Windows 身份验证。

# ruby-on-rails-3 - 管理员用户的默认路由（设计）

> ID：14136435
> 
> 赞同：1
> 
> 时间：2013-01-03T09:52:00.687
> 
> 标签：ruby-on-rails-3, devise, routes

这里的小问题，我似乎无法将管理员用户路由到适当的位置。我已经设置设计并添加了列管理员并将其设置为布尔值。然后我将我的用户更新为 admin => true 并在控制台中验证了这一点。

当我登录到我的应用程序时，用户被路由到一个页面，而管理员用户应该被路由到另一个页面，这是我到目前为止所拥有的

```
 authenticated :current_admin_user do
  root :to => 'book#searchbook'
  end

  authenticated :user do
   root :to => 'search#index'
  end

  root :to => 'main#index' 
```

但是，当我以管理员用户身份登录时，我会被路由到“search#index”，就好像我是普通用户一样。我需要做什么才能将管理员用户路由到“book#searchbook”。我以前从来没有遇到过这个问题

任何帮助表示赞赏

编辑

好的，所以经过更多研究后，我需要为管理员用户指定 after_sign_in_path，到目前为止我有这个

```
def after_sign_in_path_for(resource)
  if current_admin_user
searchbook_path
  else
root_path
end
end 
```

但它仍然将我引导到用户登录页面

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:30:44.553

好的，好像我有很多失踪，所以如果其他人在这之前遇到过这样的问题，这就是我所做的

在我添加的用户模型中

```
def is_admin?
 self.admin == 1
end 
```

然后在我的应用程序控制器中我添加了这些方法

```
 def authenticate_admin_user!
  authenticate_user!
    unless current_user.admin?
    flash[:alert] = "This area is restricted to administrators only."
    redirect_to root_path
  end
 end

def current_admin_user
  return nil if user_signed_in? && !current_user.admin?
  current_user
end

def after_sign_in_path_for(resource)
if current_user.admin?
searchbook_path

else
 root_path
end
end 
```

然后在我添加 before_filter 的管理员用户只能访问的控制器中

```
before_filter :authenticate_admin_user! 
```

希望这对处于相同情况的其他人有所帮助（感谢杰森莱恩）

原来他在 9 个月前帮助我解决了同样的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:20:47.897

只需尝试实现以下代码..当我在控制器中使用此代码时..

```
def after_sign_in_path_for(resource_or_scope)
  if resource_or_scope.is_a?(User)
     return root_path
  else
    return search_path
  end
end 
```

# javascript - 每 2 秒的 iframe 高度 [动态]

> ID：14136436
> 
> 赞同：2
> 
> 时间：2013-01-03T09:52:05.490
> 
> 标签：javascript, html, css

我的问题是，当我加载 iframe 时，它​​会正确设置 iframe 的高度，并且在 iframe 中加载数据（内容）时也会自动设置高度，但是当页面加载到 iframe 并设置相对于页面内容的高度时，然后如果我减少或删除内容从加载的页面它不会降低 iframe 高度。（例如，当页面加载第一次高度设置`100px`并在页面 iframe 高度设置为动态加载数据`150px`时，当我减少数据时，它没有设置 iframe 的高度，它仍然存在`150px`）。这是我的代码：

```
function setIframeHeight(iframe) {
    if (iframe) {
        var iframeWin = iframe.contentWindow || iframe.contentDocument.parentWindow;
        if (iframeWin.document.body) {
            iframe.height = iframeWin.document.documentElement.scrollHeight || iframeWin.document.body.scrollHeight;
        }
        setInterval("setIframeHeight_id('" + iframe.id + "')", 2000);
    }
    return false;
}

function setIframeHeight_id(iframeid) {
    var iframe = document.getElementById(iframeid);
    if (iframe) {
        var iframeWin = iframe.contentWindow || iframe.contentDocument.parentWindow;
        if (iframeWin.document.body) {
            iframe.height = iframeWin.document.documentElement.scrollHeight || iframeWin.document.body.scrollHeight;
        }
    }
    return false;
}

function resizeIframe(nm) {
    setIframeHeight(document.getElementById(nm));
} 
```

HTML

```
 <iframe id="IframeData" scrolling="no" frameborder="0" width="100%" onload="resizeIframe('IframeData')" allowtransparency="true"></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:08:15.840

我强烈建议您使用 jQuery 而不是纯 JavaScript。它本身不会创造奇迹，但肯定会帮助您缩短代码。

当涉及到您的问题时，为什么不使用百分比大小而不是固定像素大小？假设您的 iframe 的高度设置为`100%`，而不是`150px`。通过这种方式，下次调整父容器的大小时，iframe 本身将拉伸到父容器的高度。

我希望这有帮助。

# grails - grails集成测试为域中的枚举提供java.lang.verify错误

> ID：14136441
> 
> 赞同：1
> 
> 时间：2013-01-03T09:52:21.610
> 
> 标签：grails

我在执行命令 test-app-integration -coverage 时使用 grails 2.2.0 它给出了错误

发生错误异常触发事件 [TestPhasesEnd]：无法创建类 [AdminController] 的新实例！（使用 --stacktrace 查看完整的跟踪） | 错误执行脚本TestApp时出错：org.springframework.beans.factory.BeanCreationException：创建名为“transactionManagerPostProcessor”的bean时出错：bean初始化失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“transactionManager”的 bean 时出错：设置 bean 属性“sessionFactory”时无法解析对 bean“sessionFactory”的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“sessionFactory”的 bean 时出错：调用 init 方法失败；嵌套异常是 java.lang.VerifyError: (class:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:32:42.830

将枚举移动到 src/groovy 作为解决方法。请参阅[此 jira 问题。](http://jira.grails.org/browse/GRAILS-9627)，应在 2.2.1 中修复。

# php - PHP regex 一起捕捉货币和数字

> ID：14136444
> 
> 赞同：-4
> 
> 时间：2013-01-03T09:52:27.600
> 
> 标签：php, regex

我是编码新手。

从句子中获取数字存在问题。我试图找到，但不幸的是什么也没找到。

例如： `usd5 for potatoes.`-> 我想用 php 捕获“usd5”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:58:55.243

试试这个

```
$str = 'usd5 for potatoes.';
$regex = '/(usd|gbp)\d/';
preg_match($regex, $str, $match);
var_dump($match); 
```

这个网站提供了一个很好的正则表达式介绍

[http://www.regular-expressions.info/tutorial.html](http://www.regular-expressions.info/tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:00:08.857

试试 this.u 会得到一个数组的结果

```
<?php

$str = 'usd5 for potatoes';

preg_match('/(?P<name>\w+)(?P<digit>\d+)/', $str, $matches);

print_r($matches);

?> 
```

你将从 $matches['name'] 获得货币，从 $matches['digit'] 获得价值

# url - 如何使用龙卷风获取 url 中的片段内容？

> ID：14136451
> 
> 赞同：1
> 
> 时间：2013-01-03T09:52:51.337
> 
> 标签：url, web, tornado

使用 sns 网站授权时。我的回调网址是 www.xxxxx.com/callback。服务器重定向到这个 url 向这个 url 添加一些东西，比如“http://www.xxxxx.com/callback#a=b&c=d”。所以我想知道如何获得#之后的东西。

请求对象是这样的：

`HTTPRequest( protocal='http', headers={...} )`

url 中没有关于片段内容的信息，我不知道如何从 HTTPRequest 对象中获取它，因为我看不到任何关于它的信息。

所以我想知道如何获取有关url的原始信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:44:04.340

片段，即`#`URL 中包含哈希 ( ) 之后的任何内容，不会发送到服务器。您可以在浏览器中通过 JavaScript 访问它。如果您确实需要在服务器端访问它，您可以使用 AJAX 请求发送它。

# android - 我的应用程序中的谷歌地图应用程序在该位置上带有标签

> ID：14136454
> 
> 赞同：2
> 
> 时间：2013-01-03T09:53:04.863
> 
> 标签：android, google-maps

我可以从我的应用程序中打开谷歌地图，并在我指向的位置上有一个指针。

相反，我想从我的应用程序中打开谷歌地图应用程序——就像用户点击地址时谷歌地图应用程序打开那个特定点一样。

为此我使用

```
startActivity(new Intent(android.content.Intent.ACTION_VIEW,  Uri.parse("geo:lat,lng?q=lat,lng"))); 
```

这里 lat=34.456373 和 lng=-45.464748

谷歌地图应用程序正在打开，但那个特定位置没有出现，而是我现在的位置出现了。如何纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:07:52.023

```
 String geoCode = "geo:0,0?q=" + PLACE_LATITUDE + ","+ PLACE_LONGITUDE + "(" + PLACE_NAME + ")";
 Intent sendLocationToMap = new Intent(Intent.ACTION_VIEW,
 Uri.parse(geoCode));
 startActivity(sendLocationToMap); 
```

[http://developer.android.com/guide/appendix/g-app-intents.html](http://developer.android.com/guide/appendix/g-app-intents.html)参考更多细节..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:15:41.367

```
 String uri = String.format("geo:%f,%f", latitude, longitude);
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
    context.startActivity(intent); 
```

看看这是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:26:32.430

```
lat.setText(String.valueOf(latitude));
                        lon.setText(String.valueOf(longitude));
                        String showMap = String.valueOf(latitude) + ","
                                + String.valueOf(longitude);
                        Intent intent = new Intent(Intent.ACTION_VIEW);
                        intent.setData(Uri.parse("geo:0,0?q=" + (showMap)));
                        try {
                            startActivity(intent);
                        } catch (Exception e) {
                            Toast.makeText(getApplicationContext(), "Error in gps "+e, Toast.LENGTH_LONG).show();
                        } 
```

# installshield - 添加 AskPath 对话框 Installshield

> ID：14136455
> 
> 赞同：0
> 
> 时间：2013-01-03T09:53:20.993
> 
> 标签：installshield

如何在我的 Installshield 项目中提示 AskPath 对话框？

我解释 ：

当用户选择自定义安装时，他可以选择功能和目标路径。但是当他点击默认安装时，它会将程序安装到默认位置。即使用户选择默认安装，我如何才能使“选择目标路径”可见/提示？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T07:58:11.880

您需要调整 Next 按钮控件的事件。根据各种条件，适当地选择下一个对话框。将 NewDialog 控件事件修改为参数“DestinationFolder”，用于与“Default”安装选项对应的条件。

# php - Encoding in result of Fql query

> ID：14136458
> 
> 赞同：1
> 
> 时间：2013-01-03T09:53:48.670
> 
> 标签：php, facebook, encoding, facebook-fql

```
 $fql = 'SELECT name from user where uid = ' . $user;
            $result = $this->facebook->api(array(
                                       'method' => 'fql.query',
                                       'query' => $fql,
                                     ));
var_dump($result); 
```

I select my name from facebook the result is not encoded right `Škofja Loka` is `Å kofja Loka` . I have tried to change this `utf_encode` and `utf_decode`, but it does not work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:40:54.720

`"Š"`不在 ISO-8859-1 中`utf8_decode/utf8_encode`，因此从 ISO-8859-1 转换为 ISO-8859-1 的，无法处理它。无论如何，您都不应该使用这些函数，PHP 完全可以使用 UTF-8，无需任何解码或编码。

看起来您所需要的只是 UTF-8 字符集的 http 标头：

```
<?php
//Before any output
header("Content-Type: text/html; charset=utf-8");

...

 $fql = 'SELECT name from user where uid = ' . $user;
            $result = $this->facebook->api(array(
                                       'method' => 'fql.query',
                                       'query' => $fql,
                                     ));
var_dump($result); 
```

# dojo - How to use dojo moveTo programmatically through javascript?

> ID：14136459
> 
> 赞同：2
> 
> 时间：2013-01-03T09:53:51.007
> 
> 标签：dojo

I can markup a Heading or ListItem to have a moveTo attribute and that transition works perfectly.

Is there a way perform a transition to a named view programmatically say, on a button click?

Somewhere on the net I found below code, but its not working. I need something similar to this -

```
function moveTo(){
var w = dijit.byId('currentView');
w.performTransition('#newView',1,"fade",null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:32:58.627

此代码示例在 ID 为“ButtonID”的按钮上注册了 onclick 事件处理程序。按下按钮后，将在 dijit 注册表中进行查找以找到显示的视图。

您可以在任何 dojox.mobile.View 上调用函数 performTransition(...)。

```
require(["dijit/registry"], function(registry) {
    dojo.ready(function() {
        // Button Listener
        registry.byId("ButtonID").on("click", function(){
            var oldView = dijit.registry.byId("ID_View1");
            oldView.performTransition("ID_View2", 1, "slide", null);
        });
}); 
```

**但是：** 以编程方式更改“moveTo”参数比在视图之间执行转换要困难得多。您必须做一些讨厌的事情来覆盖小部件的 moveTo 属性，例如 dojox.mobile.Heading 中的 Backbutton

```
var heading1 = dijit.registry.byId("ID_Heading");
heading1.destroyDescendants();
heading1.moveTo = viewId;
heading1.backButton = false;
heading1._setBackAttr("Zurück"); 
```

# sql - 是否可以在sql中用HS join替换NL join

> ID：14136463
> 
> 赞同：0
> 
> 时间：2013-01-03T09:53:58.707
> 
> 标签：sql, db2, query-optimization

您好我有一个非常大的查询，包括两个主表和 15 个子表。

```
ie, Main table say table_a join with some other 10 tables.
and another main table sat table_b join with some other 5 tables.

Table_a contains - 314988 rows and 
Table_b contains - 710989 rows. 
```

当我们加入时，我可以找到许多 NL 加入和 HS 加入。

有趣的事实是，一切都`HSjoin cost very less and NL join cost`非常非常高。

那么是否可以将连接从 NL 转换为 HS Join。

注意：它的所有索引.. 没有 TBSCAN 一切都是 IXSCAN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:02:19.310

您可以创建一个优化配置文件，您将在其中向优化器指示它应该使用哪些方法来访问给定查询的数据。

查看 DeveloperWorks 中的本教程：http: [//www.ibm.com/developerworks/data/library/techarticle/dm-1202storedprocedure/index.html](http://www.ibm.com/developerworks/data/library/techarticle/dm-1202storedprocedure/index.html)

# c# - Jquery datepicker is not working in MVC?

> ID：14136466
> 
> 赞同：0
> 
> 时间：2013-01-03T09:54:08.140
> 
> 标签：c#, jquery, asp.net-mvc-4, jquery-ui-datepicker

Here i am using a jquery datepicker from this sample [http://dev.jtsage.com/jQM-DateBox2](http://dev.jtsage.com/jQM-DateBox2). It is working fine but the problem is after clicking the submit button if there is any mandatory field validation error,the next time when i click the textbox jquery datepicker is not working means the script is not loading after submit click.it is throwing the error in firebug console like

```
TypeError: $(...).datebox is not a function
$('#txtstartdate').datebox('open'); 
```

Here is my code

```
$(document).ready(function () {
    $('#txtstartdate').live('click', function () {
        $('#txtstartdate').datebox('open');
        $("#txtstartdate").datebox("option", {
            mode: "calbox",
            highDatesAlt: ["2011-11-09", "2011-11-10"],
            highDates: ["2011-11-02", "2011-11-03"],
            pickPageOAHighButtonTheme: "b"
        });
    });
 }); 
```

and

```
@Html.TextBoxFor(m => m.StartDate, new { @name = "mydate", @id = "txtstartdate",  style = "height:20px; font-size:10px;", data_role = "datebox", data_options = "{\"mode\":\"calbox\",\"useButton\": false}" }) 
```

Any suggestion?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:16:38.533

由于萤火虫错误表明浏览器找不到脚本中使用的函数，您能否确保在提交调用后日期框的依赖项可用。
还尝试将依赖项与视图本身一起发送，以便在客户端每次呈现视图页面时，它都会在其中保存这些 js 文件。

# drag-and-drop - 使用 watir-webdriver 拖放黄瓜

> ID：14136467
> 
> 赞同：-1
> 
> 时间：2013-01-03T09:54:08.967
> 
> 标签：drag-and-drop, cucumber, watir-webdriver

我可以使用哪个命令来拖放黄瓜测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:07:03.113

来自[Watir-webdriver API 文档](http://watir.github.com/watir-webdriver/doc/Watir/Element.html#drag_and_drop_on-instance_method)：

```
a = browser.div(:id => "draggable")
b = browser.div(:id => "droppable")

a.drag_and_drop_on b 
```

# android - To mute microphone while recording audio

> ID：14136468
> 
> 赞同：3
> 
> 时间：2013-01-03T09:54:11.960
> 
> 标签：android, mute

I am currently working on an app which is running in the background and muting the microphone during incoming and outgoing calls.But am unable to mute the microphone when there is any type audio recording. It will be of great help if I am provided with any type of solutions.

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:38:13.737

`AudioManager::setMicrophoneMute`仅适用于语音通话（和 VoIP）。它可能会影响某些产品的录音，但不能保证它会，所以你不能依赖它。

它仍应将语音呼叫上行链路静音，以便即使正在进行录音，对方也听不到您在说什么。如果不是，我会认为这是您正在测试的设备实现中的一个错误。但是，您所说的内容最终会出现在您在本地进行的录制中（除非您使用的是`VOICE_DOWNLINK`AudioSource）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:57:51.497

我假设您谈论的是 Android 应用程序，但您的问题应该更简洁。无论如何，这是一篇关于静音麦克风的帖子，应该可以回答您的问题。 [setMicrophoneMute() 是如何工作的？](https://stackoverflow.com/questions/6874881/how-does-setmicrophonemute-work)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-10T08:57:47.320

如果您不想在录制视频时录制音频。你可以设置

`AudioManager.setStreamMute(AudioManager.STREAM_MUSIC, true);`

它也适用`AudioManager.STREAM_SYSTEM`于某些设备。

# c# - C#: How can I access the fields of an object from implicit operator overloading code?

> ID：14136470
> 
> 赞同：1
> 
> 时间：2013-01-03T09:54:24.677
> 
> 标签：c#, unity3d, implicit-conversion

I have a class that holds a bool, int and float value (plus the selected type and a name).

```
using UnityEngine;
using System.Collections;

[System.Serializable]
public class AnimXVariable {

        public string name = "variable";
        public enum VariableType { Bool, Int, Float };
        public VariableType type = VariableType.Bool;

        public bool boolVal = false;
        public int intVal = 0;
        public float floatVal = 0f;

        public AnimXVariable() {
                type = VariableType.Bool;
        }
        public AnimXVariable(VariableType newType) {
                type = newType;
        }
        public AnimXVariable(string newName, VariableType newType, bool val) {
                name = newName;
                type = newType;
                boolVal = val;
        }
        public AnimXVariable(string newName, VariableType newType, float val) {
                name = newName;
                type = newType;
                floatVal = val;
        }
        public AnimXVariable(string newName, VariableType newType, int val) {
                name = newName;
                type = newType;
                intVal = val;
        }       
        public AnimXVariable(bool newValue) {
                if(type == VariableType.Bool) boolVal = newValue;
        }
        public AnimXVariable(float newValue) {
                if(type == VariableType.Float) floatVal = newValue;
        }
        public AnimXVariable(int newValue) {
                if(type == VariableType.Int) intVal = newValue;
        }

        public static implicit operator AnimXVariable(bool val) {
                return new AnimXVariable(name, type, val); //The problem is I can't access the non-static members. If I simply return new AnimXVariable(val); it does work, but the name is gone...
        }

} 
```

I'm trying to use an implicit operator to make the following work:

```
AnimXVariable b = new AnimXVariable("jump", VariableType.Bool, false);
b = true; 
```

The problem is I can't access the non-static members. If I simply do return new AnimXVariable(val); it does work, but the name is gone... Is there any way to get information about the object inside the implicit operator code to make this work?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T09:57:00.717

> 问题是我无法访问非静态成员。

不，你不能——没有上下文。您只是想将`bool`值转换为`AnimXVariable`. 这就是*所有*的输入数据。您谈论“对象”-*没有*对象。

换句话说 - 使用隐式运算符，您*应该*能够编写：

```
AnimXVariable b = true; 
```

那意味着什么？名字会是什么？

我强烈建议您重新考虑尝试在这里使用隐式转换运算符。听起来您可能想要一个类似的*实例*方法：

```
public AnimXVariable WithValue(bool newValue)
{
    return new AnimXVariable(name, type, newValue);
} 
```

# mysql - how to calculate the difference between 2 rows using mysql

> ID：14136474
> 
> 赞同：0
> 
> 时间：2013-01-03T09:54:32.530
> 
> 标签：mysql

I have a table MeterReading in mysql and it has the following columns

```
meterid bigint(4),
reading bigint(4),
date date,
time time,
consumption,
primary key(meterid,reading) 
```

i am inserting the vlues to this table except consumption and my problem is how to update the table based on these values.

i tried the following query

```
update MeterReading a 
set consumption=(select reading-IFNULL((select MAX(reading) from MeterReading  where meterid=a.meterid AND (date < a.date OR date = a.date AND time < a.time )),0)); 
```

i want the result like:

```
 meterid | reading | date       | time     | consumption |
+---------+---------+------------+----------+-------------+
|       1 |     450 | 2012-10-05 | 06:05:05 |        450  |
|       1 |     550 | 2012-10-06 | 08:05:05 |        100  |
|       1 |     600 | 2012-10-07 | 09:05:05 |        50   |
|       1 |     700 | 2012-10-08 | 10:05:05 |        100  | 
```

please help me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:57:59.610

~~试试这个：~~

 ~~```
UPDATE MeterReading a 
LEFT JOIN
(
  SELECT meterid, MAX(reading) MaxReading
  FROM MeterReading
  GROUP BY meterid
) g ON g.meterid = a.meterid
SET a.consumption = IFNULL(g.MaxReading, 0) - a.reading ; 
```~~ 

**更新：**使用`IFNULL(g.MaxReading, 0) - a.reading`或者您可以使用`ABS(IFNULL(g.MaxReading, 0) - a.reading)`.

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/f2664/1)

 ~~* * *

**编辑：**因此，您需要使用当前读数值与下一行读数值之间的差异来更新每个复合键 ( `meterid`, `reading`) 的`consumption`值。如果是这样，您可以这样做：

```
UPDATE MeterReading m
INNER JOIN
(
  SELECT 
    m.*,
    @rownum := @rownum + 1 AS rank
  FROM meterreading m, (SELECT @rownum := 0) r
  ORDER BY m.date 
) t1  ON m.meterid = t1.meterid 
     AND m.reading = t1.reading
LEFT JOIN 
(
  SELECT 
    m.*,
    @rownum2 := @rownum2 + 1 AS rank
  FROM meterreading m, (SELECT @rownum2 := 0) r
  ORDER BY m.date 
) t2  ON  t1.rank - t2.rank = 1
SET m.consumption = (t1.reading - IFNULL(t2.reading, 0)); 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/39bd8/2)

这将使您的表`meterreading`在更新后看起来像：

```
| METERID | READING |                           DATE |                           TIME | CONSUMPTION |
-----------------------------------------------------------------------------------------------------
|       1 |     450 | October, 05 2012 02:00:00+0000 | January, 01 1970 06:05:05+0000 |         450 |
|       1 |     550 | October, 06 2012 02:00:00+0000 | January, 01 1970 08:05:05+0000 |         100 |
|       1 |     600 | October, 07 2012 02:00:00+0000 | January, 01 1970 09:05:05+0000 |          50 |
|       1 |     700 | October, 08 2012 02:00:00+0000 | January, 01 1970 10:05:05+0000 |         100 | 
```

**注意：**我使用`@rownum`变量来获取每一行的排名，问题是，这个排名是基于`Date`列的顺序，所以它会得到下一个日期的读数值。~~

# java - Java中读取图像文件的方式有什么区别？

> ID：14136475
> 
> 赞同：6
> 
> 时间：2013-01-03T09:54:40.360
> 
> 标签：java, image, image-processing, bufferedimage, color-channel

在 java 中有多种读取图像文件的方法，`BufferedImage`仅举`ImageIcon`几例。我想知道这些案例有什么区别？它们是否依赖于上下文，在特定情况下只能使用其中一个？

读取`JFileChooser`用户选择的图像并分离图像的颜色通道的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T09:57:52.923

一个好方法是使用不同的 ImageIO.read 方法，这些方法返回 BufferedImage 对象。

Image 是一个抽象类，所以我认为真正的问题是哪个子类对您的程序更有效。如果您需要硬件加速，请使用 VolatileImage。更多关于[这里](https://stackoverflow.com/questions/4178907/hardware-accelerate-bitmap-drawing-in-java/4179617#4179617)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T11:07:22.533

`ImageIcon`（和`Toolkit#createImage`/ `Toolkit#getImage`）使用后台加载过程。也就是说，在您调用这些方法后，它们将立即返回，并创建了一个后台线程来实际加载图像数据。

这些在通过慢速连接加载大图像时使用过，例如旧的 28k 调制解调器（啊，我记得那些日子）。这意味着您的应用程序可以在下载图像时继续运行。

您会在`Graphics`类中发现`drawImage`方法接受一个`ImageObserver`接口并`java.awt.Component`实现该接口，这使组件能够在图像实际完成加载后自动更新自身。

`ImageIO`另一方面，在图像完全加载之前不会返回。它还可以更轻松地引入新的读取器/写入器，使 API 比原始 API 更加灵活。 `ImageIO`还支持开箱即用的更广泛的图像。

`BufferedImage`也是一个更加灵活的图像类，尤其是在对图像应用效果时。

现在，我个人更喜欢`ImageIO`. 如果我知道我正在通过可能很慢的连接加载大图像或图像，我将创建自己的后台线程来加载它们。虽然有点复杂，但权衡大大超过了少量额外工作的重量 - 恕我直言

> 读取用户由 JFileChooser 选择的图像并分离图像的颜色通道的最佳方法是什么？

`ImageIO`毫无疑问。为了对使用 something 加载的图像进行任何认真的操作`ImageIcon`，您必须将该图像转换`BufferedImage`为

# android - osmdroid draw polygon on map

> ID：14136477
> 
> 赞同：0
> 
> 时间：2013-01-03T09:54:47.320
> 
> 标签：android, map, polygon, openstreetmap, osmdroid

I want to draw something like this: [gooogle maps example](https://google-developers.appspot.com/maps/documentation/javascript/examples/polygon-autoclose)
but using osmdroid with OpenStreetMaps.
I have a set of GPS points prepared but I cannot find ay working example
Has anyone done this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T11:10:26.177

PathOverlay 无法正确完成这项工作：它已针对绘制线条进行了优化，这在将其用于填充多边形时会导致问题（当多边形部分位于视图内部，部分位于视图外部时）。

您可以使用[OSMBonusPack](http://code.google.com/p/osmbonuspack/) Polgon 覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:32:02.123

PathOverlay 将为您提供多边形。您可能需要扩展 PathOverlay 来创建填充颜色。

# sql - 自动过滤 Rails 应用程序中的所有活动记录查询

> ID：14136480
> 
> 赞同：1
> 
> 时间：2013-01-03T09:54:57.520
> 
> 标签：sql, ruby-on-rails, activerecord, filter

在我们的 Rails 3 网站上，我们需要根据客户可以访问的产品过滤信息。

我们可以通过添加来做到这一点

```
["product_id in (?)",[allowed_products_array]] 
```

在每个具有product_id的类的应用程序的任何地方执行的每个查询中，但这将是很多更改，因此需要支持很多代码，所以我正在考虑以某种方式自动化这个过程

这种自动过滤器的最佳解决方案是什么？

我正在考虑为连接到产品的所有类添加全局 ActiveRecord 查询覆盖，但我不知道如何实现

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:00:34.533

为此使用 default_scope

[http://apidock.com/rails/ActiveRecord/Base/default_scope/class](http://apidock.com/rails/ActiveRecord/Base/default_scope/class)

在你的情况下…… 像

```
default_scope where("product_id in (?)",[allowed_products_array]) 
```

您可以将其提取到模块中并包含到您希望具有此功能的每个模型中。

# php - Check url before redirect symfony2

> ID：14136484
> 
> 赞同：7
> 
> 时间：2013-01-03T09:55:10.907
> 
> 标签：php, symfony, routing

```
if ($u = $this->generateUrl('_'.$specific.'_thanks'))
  return $this->redirect($u);
else
  return $this->redirect($this->generateUrl('_thanks')); 
```

I wan't to redirect to the `_specific_thanks` url when it exist. So How to check if a url exist?

When I did that, I had this error:

> Route "_specific_thanks" does not exist.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T10:01:13.150

我认为没有直接的方法来检查路线是否存在。但是您可以通过路由器服务查找路由是否存在。

```
$router = $this->container->get('router'); 
```

然后，您可以获得一个路由集合并调用`get()`给定的路由，如果它不存在则返回 null。

```
$router->getRouteCollection()->get('_'. $specific. '_thanks'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-02T14:41:29.480

`getRouteCollection()`在运行时使用*不是正确的解决方案*。执行此方法将需要重建缓存。这意味着路由缓存将在*每个*请求上重建，使您的应用程序比需要的慢得多。

如果要检查路由是否存在，请使用 try ... catch 构造：

```
use Symfony\Component\Routing\Exception\RouteNotFoundException;

try {
    dump($router->generate('some_route'));
} catch (RouteNotFoundException $e) {
    dump('Oh noes, route "some_route" doesn't exists!');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:03:19.033

尝试这样的事情，检查路线是否存在于所有路线的数组中：

```
 $router = $this->get('router');

    if (array_key_exists('_'.$specific.'_thanks',$router->getRouteCollection->all())){
        return $this->redirect($this->generateUrl('_'.$specific.'_thanks'))
    } else {
        return $this->redirect($this->generateUrl('_thanks'));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:09:44.423

你检查你的演员了吗？你确定路线吗？通常路线以

```
'WEBSITENAME_'.$specific.'_thanks'
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-01-03T09:57:25.627

尝试这个：

```
if ($u == $this->generateUrl('_'.$specific.'_thanks') ) 
```

# java - Java Change Calculation

> ID：14136485
> 
> 赞同：0
> 
> 时间：2013-01-03T09:55:11.887
> 
> 标签：java

Please I got a change algorithm calculation which adds up instead of subtracting the amount paid by the user . i want the program to be able to deduct the amount paid from the textbox using a set of currency buttons and when the amount is over paid, a balance should be returned back to the user. it instead adds up each time i click on any of the currency buttons using the message box. Thanks

These are the currency buttons:

```
 private void tenPoundButtonActionPerformed(java.awt.event.ActionEvent evt) {                                               
    // TODO add your handling code here:
    amountToPay -= 1000;
    calculate(amountToPay);
}                                              

private void twentyPoundButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                  
    // TODO add your handling code here:
    amountToPay -= 2000;
    calculate(amountToPay);
}                                                 

private void fiftyPoundButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                 
    // TODO add your handling code here:
    amountToPay -= 5000;
    calculate(amountToPay);
} 
```

this is the change algorithm :

```
 public void calculate(double amount) {

    if (amount > 0) {
        amountPaidTextBox.setText(pounds.format(amount/100));
    }
    else {
        amountPaidTextBox.setText("");

        if (amount < 0){
            double change;
            change = -amount;

            javax.swing.JOptionPane.showMessageDialog(this, "Your change is " + pounds.format(change / 100)

                    + coins (change), 
                    "change", JOptionPane.INFORMATION_MESSAGE);
        }
        else {
            javax.swing.JOptionPane.showMessageDialog(this, "Thank you, Exact Amount");
        }
    }
}

      String coins(double change) {
    String answer = ":";

    if (change >= 4000) // give two £20 note change
    {
        answer += "\nTwo £20 note";
        change -= 4000;
    }
    if (change >= 2000) // give a £20 note change
    {
        answer += "\nOne £20 note";
        change -= 2000;
    }
    if (change >= 1500) // give £15 note change, a £10 note and a £5 note.
    {
        answer += "\nOne £10 note,\nOne £5 note ";
        change -= 1500;
    }
    if (change >= 1000) // give a £10 note change
    {
        answer += "\nOne £10 note";
        change -= 1000;
    }
    if (change >= 500) // give a £5 note change
    {
        answer += "\nOne £5 note";
        change -= 500;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:54:54.723

我认为这将解决您的问题。

```
javax.swing.JOptionPane.showMessageDialog(this, "Your change is " + pounds.format(change / 100)+ coins (change), "change", JOptionPane.INFORMATION_MESSAGE); 
```

打电话时`coins(double change)`您时传递的是负参数。

假设如果你想扣除 2000 那么你正在通过`count=-2000`

`-2000/100 = -20`

因此在执行上述语句后，您将获得负值。如果您需要更多解释，请告诉我。

# c - Converting complex C Typedef statements to Delphi Records

> ID：14136486
> 
> 赞同：2
> 
> 时间：2013-01-03T09:55:12.973
> 
> 标签：c, delphi

For the use of a DLL I have only the C Header Files available. Now I am converting these header files to Delphi Interface Files. That works quite well till there occur complex C Typedef like this one:

```
 typedef struct _IFSDK_PAUSE
  {
    int version;
    FPDF_BOOL (*NeedToPauseNow) (struct _IFSDK_PAUSE* pThis);
    void*       user;
  } IFSDK_PAUSE; 
```

that converts to:

```
type
  IFSDK_PAUSE = record

    version: Integer;

    pThis: <----- Problem!!!

    user: Pointer;
  end 
```

How do I convert these complex Typedefs correctly?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T10:05:08.600

那是一个函数指针。它接收一个指向结构的指针，并返回一个`FPDF_BOOL`. 据推测，由于没有指定调用约定，默认调用约定`cdecl`适用。

有了这些信息，您可以像这样翻译到 Delphi：

```
type
  PIFSDK_PAUSE = ^IFSDK_PAUSE;
  TNeedToPauseNow = function(pThis: PIFSDK_PAUSE): FPDF_BOOL; cdecl;
  IFSDK_PAUSE = record
    version: Integer;
    NeedToPauseNow: TNeedToPauseNow;
    user: Pointer;
  end; 
```

请注意，与 C 不同，Delphi 过程类型隐含地是一个指针。

# sql - to_char function issue with date passing in the format of 'dd-mon-yyyy'

> ID：14136487
> 
> 赞同：5
> 
> 时间：2013-01-03T09:55:19.470
> 
> 标签：sql, oracle, oracle11g

My query is

`select TO_CHAR('03-JAN-2013', 'D') from dual;`

but an error occured as

```
ORA-01722: invalid number
01722\. 00000 -  "invalid number"
*Cause:    
*Action: 
```

But when query changed as `select TO_CHAR(sysdate, 'D') from dual;`

Result is right answer 5.

I can't understand why it is behaving like this, please help me.

Thanks in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:00:03.647

请在选择之前将字符串转换为日期。

```
SELECT TO_CHAR(CAST('03-JAN-2013' AS DATE), 'D') FROM DUAL; 
```

或者

```
SELECT TO_CHAR(TO_DATE('03-JAN-2013'), 'D') FROM DUAL; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T10:00:52.257

在调用函数之前`'03-JAN-2013'`，必须将字符串文字转换为数据类型：`date``TO_CHAR`

```
select TO_CHAR(to_date('03-JAN-2013', 'dd-MON-YYYY'), 'D') as res
 from dual

RES
-----
 5 
```

# c++ - 多边形操作 - 如何对找到的顶点进行排序

> ID：14136494
> 
> 赞同：1
> 
> 时间：2013-01-03T09:55:38.150
> 
> 标签：c++, geometry, polygon, operation

我在输入上有两个凹多边形，表示为两个点向量。我想对它做一些多边形操作——联合、交叉和差异。我找到了这些多边形之间的交点，并将它们插入到每个多边形的正确位置。然后我给出关于它的位置的信息（内部 - 它在另一个多边形内，外部 - 它在另一个多边形之外，交点 - 多边形的两条边相交的点）到每个顶点。现在我知道哪些点创建了这些多边形（外部和交叉点）等的联合，但我需要知道如何将它们按正确的顺序排序。在相交操作的情况下，我需要将这些排序点分成正确数量的集合，因为相交的结果可能不止一个多边形。

我正在使用 C++，但我不一定需要代码，我只需要如何对这些最终的多边形点进行排序。而且我不想为这些操作使用任何库，因为我已经有了自己的函数并想使用它们。

我看着这个问题[如何相交两个多边形？](https://stackoverflow.com/questions/1526352/how-to-intersect-two-polygons)还有一些其他的，但没有一个是解决点的最终排序。我还阅读了这篇文章[http://www.gvu.gatech.edu/~jarek/graphics/papers/04PolygonBooleansMargalit.pdf](http://www.gvu.gatech.edu/~jarek/graphics/papers/04PolygonBooleansMargalit.pdf)，但我可能不明白。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:24:27.347

如果您遵循我的评论中的所有建议：

*   区分交点和接触点
*   在两个多边形中的交叉点的两个等效项之间保持链接

**工会**的解决方案是：

1.  只考虑外部点、接触点和交叉点
2.  确保两个多边形中的点按***不同***方向排序（其中一组为顺时针方向，另一组为逆时针方向）
3.  从两个多边形中的任何一个中的随机点开始。
4.  对于两个多边形中的任何一个中的每个顶点，如果您访问过它，请保留它
5.  每次遇到一个交点时，请继续从另一个多边形中的下一个跟随点遍历相当于该交点的点。
6.  如果您回到从这里开始的点，则关闭两个多边形连接的组件之一。如果没有遍历所有顶点，则从任何未访问的顶点重复整个顶点。
7.  最后计算你找到的所有多边形的面积。面积最大的将是真正的工会。其余的将是工会的漏洞。

**加入**的解决方案将是：

1.  只考虑内部和交叉点
2.  确保两个多边形中的点按***相同***方向排序
3.  从两个多边形中的任何一个中的随机点开始。
4.  对于两个多边形中的任何一个中的每个顶点，如果您访问过它，请保留它
5.  每次遇到一个交点时，请继续从另一个多边形中的下一个跟随点遍历相当于该交点的点。
6.  如果您回到从这里开始的点，则关闭两个多边形连接的组件之一。如果没有遍历所有顶点，则从任何未访问的顶点重复整个顶点。

**编辑**：正如我已经提到的，我觉得我的多边形方向方法需要修改。但是，在网上搜索时，我发现了可能为您工作的算法描述：[The Vatti clipping algorithm](http://en.wikipedia.org/wiki/Vatti_clipping_algorithm)

**EDIT2 另** [一篇](http://www.inf.usi.ch/hormann/papers/Greiner.1998.ECO.pdf)描述这种裁剪算法的文章。

# sql - 这个 SQL 查询有什么问题？

> ID：14136499
> 
> 赞同：1
> 
> 时间：2013-01-03T09:56:14.847
> 
> 标签：sql

我收到用户代码“'TBL' 附近的语法不正确”未处理的 SQLException。我还尝试将 [PrioContextDb].[dbo].[RatingListTriangleModels] 替换为仅表名且不带括号。

```
using (SqlCommand command = new SqlCommand
                    ("delete from [PrioContextDb].[dbo].[RatingListTriangleModels] TBL where ( TBL.To1Id = @MY_ID and TBL.To2Id = @OTHER_ID ) or ( TBL.To2Id = @My_ID and TBL.To3Id = @OTHER_ID ) or ( TBL.To3Id = @My_ID and TBL.To1Id = @OTHER_ID )", cn))
                {
                    //
                    // Add new SqlParameter to the command.
                    //
                    command.Parameters.Add(new SqlParameter("MY_ID", myToid));
                    command.Parameters.Add(new SqlParameter("OTHER_ID", theirTradeObjectid));
                    var no = command.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:00:31.190

正如其他人所建议的那样，您需要删除`TBL`您的 SQL 语句。您也需要将其从所有条款中删除。

但看起来您也缺少`@`参数中的 ，这可能是您得到的下一个错误。

```
command.Parameters.Add(new SqlParameter("@MY_ID", myToid));
command.Parameters.Add(new SqlParameter("@OTHER_ID", theirTradeObjectid)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T09:58:32.507

请尝试删除别名 TBL。

```
delete from [PrioContextDb].[dbo].[RatingListTriangleModels] 
where ( To1Id = @MY_ID and To2Id = @OTHER_ID ) or 
  ( To2Id = @My_ID and To3Id = @OTHER_ID ) or 
  ( To3Id = @My_ID and To1Id = @OTHER_ID ) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T09:59:32.947

在keywrod`TBL`之后添加别名，如下所示：`DELETE`

```
delete TBL 
from [PrioContextDb].[dbo].[RatingListTriangleModels] TBL 
where ...
... 
```

# java - 无法比较两个日期java，使用SimpleDateFormat“dd/MM/YYYY hh:mm:ss a”将字符串转换为日期时无效转换

> ID：14136502
> 
> 赞同：1
> 
> 时间：2013-01-03T09:56:22.157
> 
> 标签：java, date, compare, simpledateformat

在我的应用程序中，我需要比较以下格式给出的两个不同日期。

输入：有 2 个字符串格式的输入日期。

```
String actual="11/12/2012 11:26:04 AM";
String expected="21/12/2012 09:49:12 AM"; 
```

我正在尝试使用下面的 java 代码进行比较。

* * *

```
SimpleDateFormat format= new SimpleDateFormat("dd/MM/YYYY hh:mm:ss a");
Date date1 = format.parse(actual);
System.out.println("Formated date1 is: "+format.format(date1).toString());       
// prints  :  01/01/2012 11:26:04 AM  Why????

Date date2= format.parse(expected);
System.out.println("Formated date2 is: "+format.format(date2).toString());        
// prints :  01/01/2012 09:49:12 AM  Why????

Calendar cal1 = Calendar.getInstance();
Calendar cal2 = Calendar.getInstance();
cal1.setTime(date1);
cal2.setTime(date2);
if( !(cal1.compareTo(cal2)<=0))
{
 result=false;
 String errMsg +="Actual:"+actual+" date is not before or equal to expected:"+expected+" date\n";
 System.out.println(errMsg);
} 
```

* * *

但是上面的代码没有按预期工作。请检查评论中提到的错误输出

我认为格式有问题。谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T09:58:32.920

你的格式应该是：

```
SimpleDateFormat format= new SimpleDateFormat("dd/MM/yyyy hh:mm:ss a"); 
```

注意`year`小写**y**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T09:58:08.633

尝试：

```
SimpleDateFormat format= new SimpleDateFormat("dd/MM/yyyy hh:mm:ss a"); 
```

Ys 应该是小写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:07:13.313

您可以使用[乔达时间](http://joda-time.sourceforge.net/)。它有非常好的方法，比如`isBefore()`

![在此处输入图像描述](../Images/5df850a79009bb94fb9cd7c4622c545f.png)

```
String actual = "11/12/2012 11:26:04 AM";
String expected = "21/12/2012 09:49:12 AM";

DateTimeFormatter fmt = DateTimeFormat.forPattern("dd/MM/YYYY hh:mm:ss a");
DateTime dateTime1 = fmt.parseDateTime(actual);
DateTime dateTime2 = fmt.parseDateTime(expected);

if (dateTime1.isBefore(dateTime2)) {
    System.out.println("awesome");
} 
```

# windows - ggplot字体系列在版本之间发生变化

> ID：14136504
> 
> 赞同：10
> 
> 时间：2013-01-03T09:56:32.417
> 
> 标签：windows, r, fonts, ggplot2

在下图中，您可以看到在两台不同（Windows）机器中创建的 ggplot 图的相同部分。在每个图表上方，我都写了相关包的版本。我没有`font family`在 ggplot 调用中使用任何设置。为什么我在最新版本中得到不同的字体？（这个变化让我想起了`Cleartype`设置对平滑字体边缘的影响）

![图片](../Images/3a3d1b1cd8cdce0c4cca13abb943a1b8.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T04:56:51.140

您可能想查看此页面[http://wiki.stdout.org/rcookbook/Graphs/Fonts/](http://wiki.stdout.org/rcookbook/Graphs/Fonts/)，了解有关使用 ggplot/ggplot2 处理字体问题的一些提示。还有一个示例`R`脚本将生成所有渲染字体的表格，以便您可以更轻松地在两个系统之间进行比较。

### make_font_table.R

```
fonttable <- read.table(header=TRUE, sep=",", stringsAsFactors=FALSE,
                        text='
Short,Canonical,
mono,Courier,
sans,Helvetica,
serif,Times
,AvantGarde
,Bookman
,Helvetica-Narrow
,NewCenturySchoolbook
,Palatino
,URWGothic
,URWBookman
,NimbusMon
URWHelvetica,NimbusSan
,NimbusSanCond
,CenturySch
,URWPalladio
URWTimes,NimbusRom
')

fonttable$pos <- 1:nrow(fonttable)

library(reshape2)
fonttable <- melt(fonttable, id.vars="pos", measure.vars=c("Short","Canonical"),
                  variable.name="NameType", value.name="Font")

# Make a table of faces. Make sure factors are ordered correctly
facetable <- data.frame(Face = factor(c("plain","bold","italic","bold.italic"),
                                      levels = c("plain","bold","italic","bold.italic")))

fullfonts <- merge(fonttable, facetable)

library(ggplot2)
pf <- ggplot(fullfonts, aes(x=NameType, y=pos)) + 
             geom_text(aes(label=Font, family=Font, fontface=Face)) +
             facet_wrap(~ Face, ncol=2)

pf 
```

你可以像这样运行它：

```
% R
> source ("make_font_table.R")
> pf 
```

   ![字体表的ss](../Images/50c939302101dc393c9bfb28108aa5c4.png)

**注意**：实际上只有一些字体（Timea、Helvetica、Courier）被渲染。

此外，您可能想查看[extrafont-package](https://github.com/wch/extrafont/blob/master/README.md)。最后，这篇[文章](http://blog.revolutionanalytics.com/2012/09/how-to-use-your-favorite-fonts-in-r-charts.html)展示了如何使用 extrafont-package 以便您在输出中获得更好看的字体。

# javascript - 如何防止在 $location 哈希搜索参数更改时创建新的控制器实例。

> ID：14136506
> 
> 赞同：1
> 
> 时间：2013-01-03T09:56:33.873
> 
> 标签：javascript, hash, angularjs

我的页面上有很多过滤器。我正在使用 $location.search 将搜索参数保存在哈希中。但是 Angular 在我想阻止的每个搜索参数更改上创建新的控制器实例。

我不想在每个 $location.search() 调用上创建新的控制器实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T10:15:02.897

创建路由定义时设置`reloadOnSearch`为`false`

```
angular.module('ngView', ['$routeProvider', function(routeProvider) {
  routeProvider.when('/my-path', {
    templateUrl: 'my-template.html',
    controller: 'MyController',
    reloadOnSearch : false
  });

}]); 
```

*   [路线](http://docs.angularjs.org/api/ng.%24route)
*   [路线提供者](http://docs.angularjs.org/api/ng.%24routeProvider)

# android - Android模拟器没有在eclipse上启动

> ID：14136509
> 
> 赞同：0
> 
> 时间：2013-01-03T09:56:52.637
> 
> 标签：android, c, eclipse

尝试`Android`从以下位置启动模拟器时出现以下错误`Eclipse`：

```
[2013-01-03 15:10:28 - Emulator] PANIC: Could not open: test 
```

请注意，它与错误不同：

```
[2011-07-10 15:32:26 - Emulator] PANIC: Could not open:C:\Users\Sam\.android/avd/Android2.1.ini 
```

其中，`ini`文件给出了错误。因此，解决方案`mklink`不适用于我的情况。

在我的情况下`test`是应用程序名称。

PS：我正在使用`Windows 7`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:59:41.950

```
I have seen the following solution somewhere.
Try this..

1) Create a environment variable called: ANDROID_SDK_HOME and set it to C:\Users\Administrator
2) Open Eclipse > Window > Preferences and click in Run/Debug and String Substitution
3) Add a new variable called: user.home and set it to C:\Users\Administrator
4) Create an AVD and run it. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:14:30.837

我以前也有同样的问题。我所做的只是以管理员权限打开 Eclipse。

IE，

```
Right-click eclipse and 
choose 'Run as administrator' 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T20:52:51.360

感谢另一篇文章，所以我再也找不到了，我使用了这种方法：

在 Windows 7 上（也许在 MAC 上？）：只需删除 USER/ 文件夹中的 .android 文件夹，然后瞧。

当您打开 eclipse 或 android studio 时，将重新创建 .android 文件夹，并且您的 avd 将运行良好。

PS：你不需要卸载android sdk manager程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T05:37:10.087

也许你可以在[这个答案](https://stackoverflow.com/a/16998114/1764416)中找到你的解决方案。程序员正在使用`D:`驱动器（他的库所在的位置），所以他将`.android`文件夹`D:\hisName\`从`C:\Users\hisName\`. 祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T10:00:20.427

> 1.  创建一个名为：ANDROID_SDK_HOME 的环境变量并将其设置为 C:\Users\Administrator
> 2.  打开 Eclipse > Window > Preferences 并单击 Run/Debug and String Substitution
> 3.  添加一个名为：user.home 的新变量并将其设置为 C:\Users\Administrator
> 4.  创建一个 AVD 并运行它。

*   [Android Emulator 无法启动，因为文件夹错误](https://stackoverflow.com/questions/6641498/android-emulator-cant-start-cause-of-wrong-folder)

*   [android 模拟器错误：[2011-08-02 11:14:01 - Emulator] PANIC：无法打开：C:\Users\hallo\.android/avd/myemu.ini](https://stackoverflow.com/questions/6936230/android-emulator-error2011-08-02-111401-emulator-panic-could-not-open-c)

*   [我在模拟器中有问题](https://stackoverflow.com/questions/6774368/i-have-problem-in-a-emulator)

# ruby - 如果文件名没有 _spec 后缀，RubyMine IDE 可以识别 rspec 测试吗？

> ID：14136510
> 
> 赞同：0
> 
> 时间：2013-01-03T09:56:53.540
> 
> 标签：ruby, rspec, rubymine

让我先说我是 Ruby 的新手。

我正在 RubyMine 中做一个关于 Ruby 的非常基础的教程，作为教程的一部分，我们在一个名为 thing.rb 的 .rb Ruby 文件中创建了一个类。除了课程之外，本教程还让我们将 Rspec 测试放在同一个 .rb 文件中。.rb 文件如下所示：

```
require 'rspec'

class Thing
    def value
        5
    end
end

describe Thing do
    it "should have a value of 6" do
        Thing.new.value.should eq(7)
    end
end 
```

如果我右键单击项目文件夹并“运行项目中的所有规范”，我会收到错误和消息，包括“找到 0 个文件”和“空测试套件”。如果我只运行 rb 脚本，我不会收到任何错误...脚本运行良好。

奇怪的是，如果我将第二个文件添加到名为 thing_spec.rb 的项目中，并且只放入上面的测试：

```
require 'rspec'
require_relative 'thing'

describe Thing do
    it "should have a value of 6" do
        Thing.new.value.should eq(7)
    end
end 
```

然后右键单击项目并选择“运行所有规范”，测试运行正常。注意我说的是测试（复数）...RubyMine 将运行 thing.rb 中的测试和 thing_spec.rb 中的测试。

为什么它不能识别 thing.rb 中的测试而无需添加第二个名为 thing_spec.rb 的文件？这对我来说毫无意义。无论如何我可以让它从 thing.rb 中运行 rspec 测试而不必创建第二个文件？

如果这很重要：我在 Mac 上工作，拥有 RubyMine 4.5 版，使用 ruby​​ 解释器 1.9.3，rspec 2.12.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:05:13.063

如果你进去`Run > Edit Configurations...`

并选择`All Specs in <Your Project>`你会看到文件名掩码：`**/*_spec.rb`

这意味着当您告诉 RubyMine 运行“所有规格”时，它只运行与正则表达式匹配的文件。

现在，当您添加第二个文件并加载另一个文件时`require_relative`，两个测试都会运行。

# ssl - 其他人拥有的停放子域上的 SSL 证书？

> ID：14136511
> 
> 赞同：0
> 
> 时间：2013-01-03T09:56:59.287
> 
> 标签：ssl, cross-domain, cpanel, whm

也许这是不可能的，但我有以下问题：

我拥有一个域，例如：mydomain.com。在该域上，我采用通配符 SSL。到目前为止没有问题。并且该域正在服务器上运行，该服务器具有子域上的在线软件，例如 soft.mydomain.com。

现在我有该软件的客户，我想将软件定制到他们的子域，例如 soft.customer1.com 和 soft.customer2.com。

我可以通过让他们创建一个指向我的服务器 IP 的 DNS A 记录来做到这一点，然后我将这些域停放在我的子域 soft.mydomain.com 上（经过测试，它可以工作）。

现在的问题是：我也可以在 soft.customer1.com 和 soft.customer2.com 上获取 SSL 证书吗？这样至少在使用 soft.customer1.com/login.php 时我也有一个安全的连接。

如果可能，在这种情况下谁必须请求实际的 SSL 证书。

我还可以完全访问 WHM 和 cpanel，运行 VPS。

我知道我可以使用 customer1.mydomain.com/login.php ，但我想知道是否可以按照我的建议进行操作。

并且还建议以这种方式工作？

预先感谢。

问候，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:32:15.713

Different domains can exist on a single SAN/UC certificate. Take a look at [http://www.ssl.com/certificates/ucc](http://www.ssl.com/certificates/ucc) to learn more about this certificate type.

It sounds like you have all the pieces except for this particular certificate. I hope it helps.

# ruby-on-rails - Rails：使用 Rubber 部署到 EC2 时出现弹性搜索错误

> ID：14136516
> 
> 赞同：2
> 
> 时间：2013-01-03T09:57:09.587
> 
> 标签：ruby-on-rails, amazon-ec2

运行时`cap rubber:create_staging`出现以下错误：

```
 * executing "sudo -p 'sudo password: '  bash -l /tmp/install_elasticsearch"
     servers: ["test5.foo.com"]
     [test5.foo.com] executing command
     command finished in 1640ms
failed: "/bin/bash -l -c 'sudo -p '\\''sudo password: '\\''  bash -l /tmp/install_elasticsearch'" on test5.foo.com 
```

一切似乎都很顺利。我尝试将 gem 更新到最新版本，但错误仍然存​​在。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T05:05:58.387

弹性搜索的端点已更改：/
**修复已解决：** [你去](https://github.com/wr0ngway/rubber/commit/ed796b761334f13dfc6f0b9c66314b404cf465f4) :)

# android - 如何在 Android 中使用 Hackbook 示例获取 Facebook 朋友的生日

> ID：14136517
> 
> 赞同：0
> 
> 时间：2013-01-03T09:57:14.960
> 
> 标签：android, facebook, facebook-graph-api

如何使用 Android 中的 Hackbook 示例应用程序获取 Facebook 朋友的生日，仅获取名称和图像.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:14:34.860

试试这个查询：（使用 FQL。我从未测试过等效的 Graph API，也不确定是否可能）

```
String queryBirthdays = "SELECT uid, name, birthday_date FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND birthday_date >= '01/03' AND birthday_date <= '06/03' ORDER BY birthday_date ASC";
Bundle bunEvents = new Bundle();
bunEvents.putString("method", "fql.query");
bunEvents.putString("query", queryBirthdays);
String responseEventsQuery = Utility.mFacebook.request(bunEvents); 
```

然后解析`responseEventsQuery`. 例如，像这样：

```
JSONArray JAEvents = new JSONArray(responseEventsQuery);

for (int i = 0; i < JAEvents.length(); i++) {
    JSONObject JOEvents = JAEvents.getJSONObject(i);
} 
```

**注意：**您可能必须使用这些参数：`01/03`并`06/03`在查询中获得必要的结果。[在Graph API Explorer](https://developers.facebook.com/tools/explorer/)中尝试查询（在 FQL 查询选项卡中）

# javascript - 我可以强制对话框只能在窗口内拖动吗？

> ID：14136518
> 
> 赞同：2
> 
> 时间：2013-01-03T09:57:19.373
> 
> 标签：javascript, jquery, css, jquery-ui, dialog

**html:**

```
 <div id="dialog" title="Past Issues">
    </div> 
```

**查询：**

```
$( "#dialog" ).dialog({
        height: 900,
        width:1200,
        modal: true,
}); 
```

问题是当前对话框可以拖到几厘米的窗口区域，是否可以设置包含窗口？或者默认设置已经是遏制：窗口？如果是，问题的根源是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:06:00.033

传递给对话框使用的可拖动小部件的默认`containment`选项确实是`document`，不是`window`。

[您可以通过使用data()](http://api.jquery.com/data/)获取对话框小部件来覆盖此默认值，然后访问其`uiDialog`成员并在那里修改可拖动的`containment`选项：

```
$("#dialog").dialog({
    height: 900,
    width: 1200,
    modal: true
}).data("ui-dialog").uiDialog.draggable("option", "containment", "window"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:21:27.087

试试这个，对于演示，我使用了一个`div`你可以替换它`window`

```
$("#dialog").dialog({
    open: function(event, ui) {
        var vDlg = $(event.target).parent();
        var vCont = $('#main');   // for window use - $(window);
        vDlg.draggable("option", "containment", vCont).appendTo(vCont);
        $(this).dialog("option", "position", "center");
    }
});​ 
```

[**在这里演示**](http://jsfiddle.net/8JBtk/)

# asp.net-mvc - MVC 是否可以自定义或覆盖视图？

> ID：14136533
> 
> 赞同：1
> 
> 时间：2013-01-03T09:58:00.027
> 
> 标签：asp.net-mvc, asp.net-mvc-4

这是一个典型的场景，每个应用模型都继承一个基类。这个基类包含一些属性，这些属性在以查询字符串形式出现的不同参数上表现不同。

我希望有一个集中的机制来处理这种情况，比如当控制器返回一个视图时，我捕获模型并提供属性中的值。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:17:01.157

哇，很开放的问题。如果您只想计算/获取一些额外信息以显示在特定视图中，您可以在控制器中使用**ViewBag**对象。

```
ViewBag.Greeting = "Welcome, " + User.FirstName; 
```

然后，在您的 Razor 代码中，您可以通过`@ViewBag.Greeting`（或`<%=ViewBag.Greeting%>`在 ASPX 中）访问它。ViewBag 继承自 ASP.NET 的**ViewData**对象，该对象（有效地）是动态类型的，并且将接受您扔给它的任何对象结构。简而言之，非常强大，易于使用，但可能会导致**运行时出现问题，而其他方法会在编译时遇到问题**。

当然，您可能会遇到问题，即您的类（或数据源）中的数据的格式不适合您的 View 使用。这在开发与现有生态系统交互的应用程序时非常常见（即您将编写的大部分代码）。在这种情况下，**视图模型**是你的朋友：[http ://en.wikipedia.org/wiki/View_model](http://en.wikipedia.org/wiki/View_model)

In addition to the **/Models** folder in your project, create a **/ViewModels** namespace and match these to your views. So, for your **/Views/Product/Details.cshtml** you create a **/ViewModels/Product/Details.cs** class and either pass in the id (or the model) as an argument. Make using you add a `using MyProject.ViewModels` in your controller though!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:07:14.907

您可以制作自己的 CustomActionResult 类。像这样的东西：

```
public class CustomActionResult : ActionResult
{
     public override void ExecuteResult(ControllerContext context) 
     {
          // your logic here
     }
}

public ActionResult YourAction() 
{
     return new CustomActionResult (viewModel);
} 
```

# excel - 如何链接excel表格的2个单元格？

> ID：14136540
> 
> 赞同：0
> 
> 时间：2013-01-03T09:58:08.243
> 
> 标签：excel

我想链接 Excel 表的 2 个单元格，以便根据第一个单元格的变化，第二个单元格会发生变化。我是excel表的新手，所以如果这是一个愚蠢的问题，请原谅我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:01:01.420

最简单的解决方案是选择第二个单元格，然后按`=`。这将开始公式创建过程。现在要么输入第一个单元格引用（例如，`A1`），要么单击第一个单元格并按 Enter。这应该使第二个单元格引用第一个单元格的值。

要详细了解不同的参考选项，请参阅 -[本文](http://www.expresscomputeronline.com/20021216/techspace1.shtml)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:11:39.813

**只需按照以下步骤操作：**

如果您希望 C1 的内容反映单元格 A1 的内容，您只需将 C1 中的公式设置为 =A1。从现在开始，您在 A1 中键​​入的任何内容也将显示在 C1 中。

**从另一个工作表链接 Excel 中的多个单元格：**

**第1步**

单击屏幕底部的工作表选项卡，其中包含要链接到的一系列先前单元格。范围是一个块或一组相邻的单元格。例如，假设您要将“Sheet1”中的一系列空白单元格链接到“Sheet2”中的一系列先前单元格。单击“表 2”选项卡。

**第2步**

确定先前范围的列宽和行高。在此示例中，假设“Sheet2”上的单元格 A1 到 A4 分别包含数字 1、2、3 和 4 的列表，这将是您的前一个单元格。这个先例范围是一列宽，四行高。

**第 3 步**

单击屏幕底部的工作表选项卡，其中包含您将在其中插入链接的空白单元格。在本例中，单击“Sheet1”选项卡。

**第4步**

选择要链接到前面的单元格的空白单元格范围。此范围的大小必须与前面的范围相同，但可以位于工作表上的不同位置。在区域的左上角单元格上单击并按住鼠标按钮，将鼠标光标拖动到区域的右下角单元格上，然后释放鼠标按钮以选择区域。在此示例中，假设您要将单元格 C1 到 C4 链接到前面的区域。单击并按住单元格 C1，将鼠标拖动到单元格 C4 并释放鼠标以突出显示该范围。

**第 5 步**

Type “=,” the worksheet name containing the precedent cells, “!,” the top left cell of the precedent range, “:” and the bottom right cell of the precedent range. Press “Ctrl,” “Shift” and “Enter” simultaneously to complete the array formula. Each dependent cell is now linked to the cell in the precedent range that’s in the same respective location within the range. In this example, type “=Sheet2!A1:A4” and press “Ctrl,” “Shift” and “Enter” simultaneously. Cells C1 through C4 on “Sheet1” now contain the array formula “{=Sheet2!A1:A4}” surrounded by curly brackets, and show the same data as the precedent cells in “Sheet2.”</p>

Good Luck !!!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:01:12.890

我找到了您的问题的解决方案，但在堆栈中不允许上传视频请参阅下面的链接，它可以更好地解释

[如何在 Excel 中链接两个（多个）工作簿和单元格...](http://www.youtube.com/watch?v=-foPogO3QNE)

# php - 如何在 CURL php 中使用 DELETE AND PUT 命令？

> ID：14136541
> 
> 赞同：-1
> 
> 时间：2013-01-03T09:58:16.247
> 
> 标签：php, curl, quickblox

我正在向 Quick blox API 发送自定义对象类的 DELETE 请求。但它没有删除记录。我正在使用 CURL php 发送请求。这是我的代码：

```
$url =" https://api.quickblox.com/data/TopPlace/50e3d8db535c123833015181.json" 
$ch = curl_init();  
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'DELETE');
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
$result = curl_exec($ch);
$status = curl_getinfo($ch, CURLINFO_HTTP_CODE); 
```

但执行此命令后，它不会删除数据。我回显 $status 它向我显示 422 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:02:40.853

您将收到 422 状态码。你查到了吗？

[引用维基百科：](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)

> 4xx 类状态码适用于客户端似乎出错的情况。除了响应 HEAD 请求时，服务器应该包含一个实体，其中包含对错误情况的解释，以及它是临时情况还是永久情况。这些状态码适用于任何请求方法。用户代理应该向用户显示任何包含的实体。

特别是对于 422：

> 422 Unprocessable Entity (WebDAV; RFC 4918)：请求格式正确，但由于语义错误而无法遵循。

[RFC 4918](https://www.rfc-editor.org/rfc/rfc4918)给出了更多细节：

> 422（Unprocessable Entity）状态码意味着服务器理解请求实体的内容类型（因此 415（Unsupported Media Type）状态码是不合适的），并且请求实体的语法是正确的（因此是 400（Bad Request） ) 状态码不合适）但无法处理包含的指令。例如，如果 XML 请求正文包含格式正确（即语法正确）但语义错误的 XML 指令，则可能会出现这种错误情况。

所以答案很可能是你的内容`$data`不是服务器所期望的。

还要确保检查该[QuickBlox API 中可能的 API 错误代码](http://quickblox.com/developers/Errors#Errors_Unprocessable_Entity)的文档：

*   [http://quickblox.com/developers/Errors#Errors_Unprocessable_Entity](http://quickblox.com/developers/Errors#Errors_Unprocessable_Entity)

由于您声明错误是

```
{"errors":{"base":["Forbidden. Need user."]} 
```

我天真的假设是您在使用该服务之前忘记了身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:55:37.820

为了使用 QuickBlox API，您必须创建会话。然后您将在 QuickBlox 环境中拥有 READ 访问权限。

为了创建/更新/删除记录，您必须登录并代表用户行事。

所以，有2种方法：

*   [使用用户参数创建会话](http://quickblox.com/developers/Authentication_and_Authorization#With_User_authorization)
*   创建会话，然后[登录](http://quickblox.com/developers/Authentication_and_Authorization#API_User_Sign_In)

另外，请注意您可以删除自己的对象，而不是其他用户的对象。

# oracle - 在 Oracle 中是数字

> ID：14136543
> 
> 赞同：0
> 
> 时间：2013-01-03T09:58:28.140
> 
> 标签：oracle

我正在使用 oracle 11g。我有一个`Number`作为数据类型的表。出于开发目的，我们创建了一个带有`varchar`类型的临时表。最初，数据将加载到临时表中。我们需要找出该列中只有数字的记录，因为数据可能包含噪声。有什么办法可以找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:05:55.573

您可以使用以下命令选择您的数据`regexp_like`：

```
SELECT *
FROM your_table t
WHERE REGEXP_LIKE (t.your_colonne, '^[0-9]+$'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T10:06:30.030

regexp_like函数可用于确定一个值是否仅由数字组成[。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions007.htm#SQLRF00501)这是一个例子：

```
with Your_table(your_column) as(
  select '123456' from dual union all  
  select 'a123452' from dual union all
  select '01456' from dual union all
  select '1j6-d' from dual
)
select your_column
  from your_table
 where regexp_like(your_column, '^[[:digit:]]+$') 
```

结果：

```
YOUR_COLUMN
--------------
123456
01456 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!4/d41d8/5661)

# oracle - 如果值不为空，则 SQLPLus 解码

> ID：14136547
> 
> 赞同：1
> 
> 时间：2013-01-03T09:58:42.893
> 
> 标签：oracle, sqlplus

我有一个 sqlplus 脚本，如果一个变量不为空，那么我想执行一个脚本并传递值。如果它为空，那么我想执行一个不同的脚本。我有以下内容：

```
col scr new_value script
set term off
select decode('&partitions', 'true', 'CreateTablesPartitions', 'CreateTables') scr from   dual;
set term on
@@&script &partitions 
```

它检查变量分区是否为真，然后执行 CreateTablePartitions。如何检查变量分区是否为空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:59:51.970

只需在解码字符串中添加 null 和要解码的值。

```
select decode('&partitions', 'true', 'CreateTablesPartitions',
              null, 'itsnull', 'CreateTables') scr 
from   dual; 
```

所以如果它为空，那么结果将是`itsnull`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:50:40.927

您可以`null`在解码中包含一个公认的值：

```
col scr new_value script
set term off
set verify off
select decode('&partitions', null, 'CreateTables',
    'CreateTablesPartitions') as scr from dual;
set term on
@@&script &partitions 
```

`CreateTables`...如果输入的`partitions`值为空，它将运行。

但是，因为您有`termout off`，所以您不会看到该值的提示。您可能想要使用位置变量（`&1`等），具体取决于您打算如何调用它，但假设您确实希望在运行时得到提示，您可以离开`termout on`并添加`noprint`到`column`命令（`col scr new_value script noprint`）中，这将给出输出中的一些空行；或`partitions`提前设置。您不能使用`define`，因为它不喜欢空值。

最干净的方法可能是使用[`accept`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#CACHDBHG)自己的提示：

```
accept partitions prompt "Enter partitions: "

col scr new_value script noprint
set verify off
set term off
select decode('&partitions', null, 'CreateTables',
    'CreateTablesPartitions') as scr from dual;
set term on
@@&script &partitions 
```

使用简单的虚拟脚本来调用，例如`CreateTables.sql`：

```
prompt In CreateTables 
```

...和`CreateTablesPartitions`：

```
prompt In CreateTablesPartitions with passed value "&1" 
```

...这给出了：

```
Enter partitions: 
In CreateTables 
```

... 和：

```
Enter partitions: Test
In CreateTablesPartitions with passed value "Test" 
```

# reporting-services - SSRS 自动化

> ID：14136548
> 
> 赞同：0
> 
> 时间：2013-01-03T09:58:44.070
> 
> 标签：reporting-services

我需要从许多不同查询定义的许多不同数据集中构建许多具有完全相同简单结构的不同报告。具体来说，我需要一个以表格形式显示存储在表格中的信息的报告。

有没有办法自动生成这些报告？对于每个表，我可以使用 VBA 或其他东西： - 根据查询“select [tablename].* from [tablename] 设置数据集 - 从 [tablename] 为报告命名 - 显示在表中检索到的所有字段？

非常感谢提前尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:40:19.310

我所看到的最接近这一点的是 Kimball Group 制作的 Data Profiler 报告：

[http://www.kimballgroup.com/data-warehouse-and-business-intelligence-resources/data-warehouse-books/booksmdwt/](http://www.kimballgroup.com/data-warehouse-and-business-intelligence-resources/data-warehouse-books/booksmdwt/)

您可以根据他们的“2 Columnlist”和“3 ColumnDetails”报告制作混搭以获得您想要的内容。

# ajax - Grails 2 - 太多的 Ajax 调用将使用户会话无效

> ID：14136558
> 
> 赞同：0
> 
> 时间：2013-01-03T09:59:49.450
> 
> 标签：ajax, grails-2.0, invalidation

*更新：对不起，我没有给出上下文。我正在使用安装了 spring 安全插件的 Grails 2.1.2。Js lib -> jQuery（最新）

我有一个提交大量同步 ajax 调用的页面（不是我的设计，抱歉）。在第 25 次调用之后，我从 firebug 看到我开始获取 http 302 状态，然后在没有用户会话时调用 ajax 处理程序（在我的情况下为 loing/authAjax）。我的特定处理程序发送一个 http 401。无论如何，为什么会话会过期？仅当我提交大量*同步*ajax 调用时才会发生这种情况。ajax调用次数有限制吗？它在任何地方都有记录吗？在这种情况下，进行异步调用不是一种选择，因为这些 ajax 调用会在同一个表上进行数据库更新，这会导致休眠锁异常。

我不是要求修复，我知道如何解决这个问题（通过一次 ajax 调用）。我要问的是为什么会话无效？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:43:50.637

您是否尝试在使用 jQuery 的调用中将缓存设置设置为 false ？302 表示您从浏览器缓存而不是服务器获取数据。希望这有帮助....

# jquery - 在外部按钮单击时停止 iFrame 中的 YouTube 视频

> ID：14136566
> 
> 赞同：19
> 
> 时间：2013-01-03T10:00:14.627
> 
> 标签：jquery, html, iframe, youtube

我知道有类似的问题，但我还不能让它发挥作用。

此代码显示了一个 iframe 内的 YouTube 视频。单击按钮 (emsbinstartbutton) 时，视频被隐藏并替换为占位符。如果此占位符 ( `threebytwo`) 已关闭，则视频应再次显示。

目前这工作正常，除了当视频被隐藏时它会继续播放（你可以听到音频，当你回去时你可以看到它仍在播放）。隐藏时应停止视频。

```
 <%@ Page Language="C#" MasterPageFile="~/Views/Shared/Widget.Master" Inherits="System.Web.Mvc.ViewPage<WidgetView>" %>

<%@ Import Namespace="WidgetData" %>
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    <%= Html.WidgetTitle(Model) %>
</asp:Content>
<asp:Content ID="WidgetStyle" ContentPlaceHolderID="StyleContent" runat="server">
    <%= Html.WidgetStyle(Model) %>
    <%= Html.WidgetScripts(Model) %>
    <script type="text/javascript">

        // when they click on the buy now button we will hide the title and show the widget
        //detach work to stop vid but can t get it back.....
        $(document).ready(function () {
            $("#emsbinstartbutton").click(function () {
               $("#divbuyonlineVid").hide();
                $(".divbuyonlineVid").hide();
                $("#threebytwo").show();
            });
        });

        // when they click on the x the widget should be hidden and the video shows again
        $(document).ready(function () {
            $("#closebtn").click(function () {
                $("#divbuyonlineVid").show();
                $(".divbuyonlineVid").show();
                $("#threebytwo").hide();               
            });
        });

    </script>
    <!-- playing with additional CSS needed to get the page behaving the way I want Will move this into the widget style once proven -->
    <style type="text/css">
        #threebytwo
        {
            display: none;
        }
        #emsbin2startbutton
        {
            cursor: pointer;
        }
    </style>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <div class="divbuyonlineVid">
        <!-- IMPORTANT the youtube video has to include &wmode=opaque at the end of the link so that the buynow button is above the video -->
        <img class="emsbinstarttext" id="emsbinstarttext" src="http://static.e-talemedia.net/content/images/DoveYoutubeMessage.png" />
        <img class="emsbinstartbutton" id="emsbinstartbutton" src="http://static.e-talemedia.net/content/images/DoveYoutubeBuyNowRed.png" />
        alt="" />
        <div class="divVidContainer">
            <iframe id="player" width="640" height="360" src="http://www.youtube.com/embed/AvywK19yVEk?feature=player_embedded&wmode=opaque&enablejsapi=1"
                frameborder="0" allowfullscreen></iframe>
        </div>
    </div>
    <div id="threebytwo" class="threebytwo">
        <img class="closebtn" id="closebtn" src="http://static.e-talemedia.net/content/images/DoveYoutubeExit.png" />
        <div class="threebytwomiddle">
            <ul>
                <% if (Model.ProductNotFound)
                   { %>
                <!-- List the retailers as we have none in stock -->
                <%= Html.WidgetProductNotFoundList(Model) %>
                <% }
                   else
                   { %>
                <%= Html.WidgetProductFoundList(Model) %>
                <% } %>
            </ul>
        </div>
    </div>
    <%= Html.WidgetImpressionCode2(Model) %>
    <%= Html.WidgetTrackingCode(Model) %>
</asp:Content> 
```

我尝试了以下方法：

### 使用 .detach 和 append

```
 // when they click on the buy now button we will hide the title and show the widget
        //detach work to stop vid but can t get it back.....
        $(document).ready(function () {
            $("#emsbinstartbutton").click(function () {
                $holdera = $("#divbuyonlineVid").detach();
                $holderb = $(".divbuyonlineVid").detach();
                $("#threebytwo").show();
            });
        });

        // when they click on the x the widget should be hidden and the video shows again
        $(document).ready(function () {
            $("#closebtn").click(function () {    
                $("#threebytwo").hide();
                alert($holdera);
                $("#divbuyonlineVid").append($holdera);
                alert($holderb);
                $(".divbuyonlineVid").append($holderb);
            });
        }); 
```

即使视频在点击时停止，但当我尝试返回（附加）时，我会弹出一个对象错误。

### 停止和停止视频

所以在 iframe 中，添加`&enablejsapi=1`：

```
 <iframe id="player" width="640" height="360" src="http://www.youtube.com/embed/AvywK19yVEk?feature=player_embedded&wmode=opaque&enablejsapi=1"
                frameborder="0" allowfullscreen></iframe> 
```

在 jQuery 中：

```
 $(document).ready(function () {
            $("#emsbinstartbutton").click(function () {
                $holdera = $("#divbuyonlineVid").hide();
                $holderb = $(".divbuyonlineVid").hide();
                $("#player").stop();
                $("#threebytwo").show();
            });
        }); 
```

这不会改变任何事情。并且：

```
 $(document).ready(function () {
            $("#emsbinstartbutton").click(function () {
                $("#divbuyonlineVid").hide();
                $(".divbuyonlineVid").hide();
                $("#player").stopvideo();
                $("#threebytwo").show();
            });
        }); 
```

单击按钮时，您仍然可以听到音频，但不会显示threebytwo。

我还添加了这个`<script>`：

```
<script type="text/javascript" src="http://www.youtube.com/player_api" ></script> 
```

谁能指出我正确的方向或看看我哪里出错了？

**编辑：shabeer90 描述了如何停止让我上路的 youtube 视频，但如果您只是想暂停它并将其保留在后台，则以下代码可能有用：**

**jQuery：**

```
 <script type="text/javascript">
        $(document).ready(function () {
            var obj = $('object')
     .wrap('<div id="test"></div>')
     .find('embed').attr('src', function (i, s) { return s + '&enablejsapi=1&version=3' }).end()
     .find('param[name=movie]').attr('value', function (i, v) { return v + '&enablejsapi=1&version=3' }).end()
     .detach()
     .appendTo($('#test'));

            $(document).ready(function () {
                $("#emsbinstartbutton").click(function () {
                    //Then assign the src to null, this then stops the video been playing
                    obj.find('embed')[0].pauseVideo();
                    $("body").append($("<div>").css({
                        position: "fixed"
        , width: "640px"
        , height: "425px"
        , "background-color": "#000"
        , opacity: 0.6
        , "z-index": 999
        , top: 0
        , left: 0
                    }).attr("id", "page-cover"));

                    $("#threebytwo").show();
                });
            });

            // when they click on the x the widget should be hidden and the video shows again
            $(document).ready(function () {
                $("#closebtn").click(function () {
                    //                     $("#divbuyonlineVid").show();
                    //                     $(".divbuyonlineVid").show();
                    $("#threebytwo").hide();
                    $("#page-cover").detach();
                });
            });

        });
    </script> 
```

**html:**

```
<div class="divbuyonlineVid">
        <img class="emsbinstarttext" id="emsbinstarttext" src="http://static.e-talemedia.net/content/images/DoveYoutubeMessage.png" />
        <img class="emsbinstartbutton" id="emsbinstartbutton" src="http://static.e-talemedia.net/content/images/DoveYoutubeBuyNowRed.png"
            alt="" />
        <div class="divVidContainer">
            <object width="640" height="385">
                <%--IMPORTANT - the embed video format has to change so that it is exactly like below with the /v/ and &amp;hl=en_US&amp;fs=1  and  &wmode=opaque for the mask--%>
                <param name="movie" value="http://www.youtube.com/v/fBZTbCrM2eQ&amp;hl=en_US&amp;fs=1&wmode=opaque ">
                </param>
                <param name="allowFullScreen" value="true"></param>
                <param name="allowscriptaccess" value="always"></param>
                <embed src="http://www.youtube.com/v/fBZTbCrM2eQ&amp;hl=en_US&amp;fs=1&wmode=opaque"
                    type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true"
                    width="640" height="385" wmode="Opaque"></embed>
            </object>

        </div>
    </div> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-03T10:05:47.333

您需要重置视频的链接，我遇到了类似的问题，这就是我解决它的方法，我在此过程中使用了 jQuery。

```
//First get the  iframe URL
var url = $('#YourIFrameID').attr('src');

//Then assign the src to null, this then stops the video been playing
$('#YourIFrameID').attr('src', '');

// Finally you reasign the URL back to your iframe, so when you hide and load it again you still have the link
$('#YourIFrameID').attr('src', url); 
```

检查这个[答案](https://stackoverflow.com/questions/2128535/stop-a-youtube-video-with-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-29T21:56:02.020

//在HTML中

```
<!--the button -->
<a class="button" data-open="videoModal" href="#">Example Video Modal</a>
<!--Modal Video -->
<div class="row" id="theVideo">
    <div id="videoModal" class="reveal" data-reveal data-close-on-click="true">
    <h2>This modal has video</h2>
        <div class="flex-video">
            <iframe id="youtubePlayer" width="854" height="480" src="https://www.youtube.com/embed/4z6aSO05YHg" frameborder="0" allowfullscreen allowscriptaccess="always"></iframe>
        </div>
        <button class="close-button" data-close aria-label="Close reveal" type="button" onClick="destroyVideo()">
        <span aria-hidden="true">&times;</span>
        </button>
    </div>
</div> 
```

//在apps.js中

```
function destroyVideo(){
    var url = $('#youtubePlayer').attr('src');
    $('#youtubePlayer').attr('src', '');
    $('#youtubePlayer').attr('src', url);
} 
```

//这项工作适用于 Foundation 6.2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T10:10:15.497

好吧，你只需要改变**iframe**标签的**source** `(src)` **属性值。**就是这么简单！:)

 **使用 javascript，您可以执行以下操作：

```
var stopButton = document.getElementById('video-close-button-id');

stopButton.onclick = function() {
  var myPlayer = document.getElementById("youtube-player-id"); 
  myPlayer.setAttribute("src", " ");
}; 
```

快乐编码。**

# javascript - 是/否-fancybox 上的表格

> ID：14136571
> 
> 赞同：1
> 
> 时间：2013-01-03T10:00:35.487
> 
> 标签：javascript, jquery, html, fancybox

我的问题是，如何确定用户是否按下“是”或“否”这是一个 html

```
<form id="delFrm" method="post">
    <label>Do you want delete?</label>
    <input type="submit" name="yes" id="yes" value="yes" />
    <input type="submit" name="no" id="no" value="no" />
</form> 
```

这里是 jquery/js

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#delFrm').submit(function(){
            var yes = true;//how to define it??????
            if(yes) {
                //sent ajax to delete the data
            } else {
                //close close the form on a fancybox
            }
            return false;
        });
    });
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:03:27.093

稍微改变你的标记：因为“否”按钮不需要执行 ajax 调用，你可以简单地写

```
<form id="delFrm" method="post">
    <label>Do you want delete?</label>
    <input type="submit" name="yes" id="yes" value="yes" />
    <button type="button" id="no">No</button>
</form> 
```

并且您的 js 代码可以简化为

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#delFrm').submit(function(evt){
            evt.preventDefault();
            //sent ajax to delete the data
        });
    });
</script> 
```

然后为“否”按钮创建另一个处理程序（关闭您的幻想框）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:06:37.257

您不需要更改您的 html 只需执行以下操作

```
<script type="text/javascript">
$(document).ready(function() {
    var answer = "";
    $('input[type=submit]').click(function(e) {
       e.preventDefault();
       answer = $(this).attr('name');
        if(asnwer == 'yes') {
            // sent ajax to delete the data
        } else {
            // close close the form on a fancybox
        }
        return false;
    });
});
</script> 
```

就这么简单..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:10:44.103

如果您必须调用执行某些语句来关闭 ajax 表单，请尝试此操作：

```
<form id="delFrm" method="post">
    <label>Do you want delete?</label>
    <input type="submit" name="yes" id="yes" value="yes" />
    <input type="button" name="no" id="no" value="no" />
</form> 
```

和

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#delFrm').submit(function(){

            //sent ajax to delete the data

            return false;
        });
        $('#no').click(function(){

            //close close the form on a fancybox

            return false;
        });
    });
</script> 
```

希望能帮助到你 ：）

# windows - QT- 在 Windows 7 中安装

> ID：14136589
> 
> 赞同：4
> 
> 时间：2013-01-03T10:01:39.373
> 
> 标签：windows, qt, configuration, installation

我有一个 c++ 项目，当我构建该项目时需要我安装 QT 一个对话框，希望我输入 qmake 命令。

我找到了一个需要使用的地方

```
MinGW_QT 
```

在工具选项中，但由于我下载了 QT 库 4.8.4，我无法找到 . C:\QT\4.8.4\MinGW\bin

我必须安装哪个库才能获得这个我也曾尝试安装

```
 Qt libraries 4.8.4 for Windows (minGW 4.4, 317 MB) from the QT webportal 
```

当我尝试运行它时提示

```
There is a problem with your MinQW instalation
w32api not found in c:\MinGW\bin\
Do you still want to continue? Yes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:05:40.153

如果您使用的是使用 MinGW 编译的 Qt 库，则需要安装 MinGW 来编译和链接 Qt 库。只需在某处下载并提取 MinGW 并将其路径添加到您的环境变量`PATH`。然后您需要将该编译器引入您的 Qt Creator 安装。转到“工具 -> 选项 -> 构建和运行”，然后在 toolchainn 选项卡中添加新的 MinGW 安装。

[我会建议来自https://sourceforge.net/projects/mingwbuilds](https://sourceforge.net/projects/mingwbuilds)的 MinGW-builds

# vba - 隐藏所有工作表行时如何获取行数？

> ID：14136591
> 
> 赞同：1
> 
> 时间：2013-01-03T10:01:45.090
> 
> 标签：vba, excel, hidden, rowcount

我通过使用以下代码行来隐藏行，不包括前两行，因为它们是标题。

```
For i=3 To ThisWorkBook.Sheets("ALL").Range("A1",ThisWorkBook.Sheets("ALL").Range("A65536").End(xlUp)).Rows.Count
    ThisWorkBook.Sheets("ALL").Rows(i).EntireRow.Hidden=True
Next 
```

现在要获取隐藏行数，我正在使用以下代码行

```
From i=3 To ThisWorkBook.Sheets("ALL").Range("A1",ThisWorkBook.Sheets("ALL").Range("A65536").End(xlUp)).Rows.Count
    ThisWorkbook.Sheets("ALL").EntireRow.Hidden=False
Next 
```

但我得到`rowcount`了 2。事实上，这张纸有 10 行。那么如何使隐藏的行可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:40:32.623

如果我正确理解了您的问题，这是解决您的问题的另一种方法，它将为您提供一些运行速度更快且易于管理的代码：

```
Option Explicit

Sub CountHiddenRows()

Dim wks As Worksheet
Set wks = ThisWorkbook.Sheets("ALL")

With wks

    Dim lngLastRow As Long
    lngLastRow = .Range("A" & .Rows.Count).End(xlUp).Row

    .Range("A3:A" * lngLastRow).EntireRow.Hidden = True

    Dim rngConsider As Range
    Dim lngHiddenRows As Long, lngRows As Long, lngVisibleRows As Long

    Set rngConsider = .Range("A1:A" & lngLastRow)

    lngRows = rngConsider.Rows.Count
    lngVisibleRows = rngConsider.SpecialCells(xlCellTypeVisible).Rows.Count
    lngHiddenRows = lngRows - lngVisibleRows

    MsgBox "There are " & lngHiddenRows & " hidden rows."

End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:25:37.713

`Worksheet.Rows.Count`始终返回工作表中的总行数。
在这里我会使用`Worksheet.UsedRange.Rows.Count`.
此外，当最后一行的第一个单元格为空时，您的代码可能会失败。
这是一个计算第 2 行和最后使用的行之间可见行数的小函数。

```
Function CountVisibleRows() As Integer
  Dim R As Integer
  For R = 2 To UsedRange.Rows.Count
    If Not Rows(R).Hidden Then CountVisibleRows = CountVisibleRows + 1
  Next R
End Function 
```

我通常在行数较少的情况下使用循环，因为我有更好的控制并且通常更快。
当我处理数千行时，要求 Excel 使用`SpecialCells`或其他功能会更快。

# google-app-engine - Google 应用引擎重定向到绝对 uri

> ID：14136592
> 
> 赞同：5
> 
> 时间：2013-01-03T10:01:48.443
> 
> 标签：google-app-engine, redirect

我正在使用带有 python 和 webapp2 的谷歌应用引擎，但我找不到使用绝对 uri 重定向到外部网站的方法。

例如：

```
class Landing(BaseHandler):
    def get(self):     
        self.render("landing.html")

    def post(self):
        name=self.request.get("name")
        if name == "yes"
            self.redirect("/")
        else:
            self.redirect("http://example.com") **This is the problem as I want to redirect to an absolute url. 
```

self.redirect 总是重定向到一个相对的 url。我怎样才能重定向到绝对网址？我认为它必须很容易，但我找不到方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:55:19.657

对我来说很好，**不仅重定向** **到**相对网址。请检查您的主机、浏览器和缓存的配置。

GAE 刚刚在我的开发和生产服务器上使用它将我重定向到 example.com

请注意 example.com 重定向到[http://www.iana.org/domains/example/](http://www.iana.org/domains/example/)

这可能会让你感到困惑。

尝试使用例如`self.redirect("http://www.facebook.com")`。这会将您重定向到 Facebook。简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:49:20.850

另外..我想我可能已经被您的代码中没有返回的事实所困扰 - 所以即使在您调用了 self.redirect(...) 位之后，如果您向 self 写任何其他内容，那可能搞乱你的重定向。

# java - 尝试在我的 Play2 应用程序中使用 Akka 未来并发挥承诺

> ID：14136594
> 
> 赞同：8
> 
> 时间：2013-01-03T10:01:56.457
> 
> 标签：java, playframework-2.0, akka, actor, promise

在阅读 play2 文档时，我发现了这一点：

> 由于 Play 2.0 的工作方式，动作代码必须尽可能快（即非阻塞）。那么如果我们还不能计算它，我们应该返回什么结果呢？回应应该是对结果的承诺！

哇！这当然让我对[playakka](http://www.playframework.org/documentation/2.0/JavaAkka)和[akka 感兴趣](http://resources.typesafe.com/docs/console/)。我目前正在构建一个与弹性搜索集成的自动完成应用程序，所以这将是一个完美的选择！

**控制器：**

```
public class AutoComplete extends Controller {

    @BodyParser.Of(value = BodyParser.Json.class)
    public static Result complete(final String term) {

        F.Promise<List<String>> list = Akka.future(new Callable<List<String>>() {
            public List<String> call() throws Exception {
                List<String> list = IndexService.find(term);
                return list;
            }
        });    

        return async(list.map(new F.Function<List<String>, Result>() {
            @Override
            public Result apply(List<String> list) throws Throwable {
                return ok(Json.toJson(list));
            }
        }));
} 
```

**服务：**

```
public static List<String> find(final String term) {

        IndexQuery < SearchWord > query = SearchWord.find.query();
        query.setQuery("{\n" +
                "    \"bool\": {\n" +
                "        \"should\": [\n" +
                "            {\n" +
                "                \"text\": {\n" +
                "                    \"search_word.ngrams\": {\n" +
                "                        \"operator\": \"and\",\n" +
                "                        \"query\": \""+term+"\"\n" +
                "                    }\n" +
                "                }\n" +
                "            },\n" +
                "            {\n" +
                "                \"text\": {\n" +
                "                    \"search_word.full\": {\n" +
                "                        \"boost\": 1,\n" +
                "                        \"query\": \""+term+"\"\n" +
                "                    }\n" +
                "                }\n" +
                "            }\n" +
                "        ]\n" +
                "    }\n" +
                "}");
        IndexResults<SearchWord> indexResults = SearchWord.find.search(query);

        List<String> list = new ArrayList<String>();
        for(SearchWord word : indexResults.getResults()){
            list.add(word.getWord());
        }

        return list;
    }
} 
```

**搜索词：**

```
@IndexType(name = "search_word")
public class SearchWord extends Index {

    // Find method static for request
    public static Index.Finder<SearchWord> find = new Index.Finder<SearchWord>(SearchWord.class);

    public enum WordType {
        NAME,
        STRONG_SEARCH_WORD,
        WEAK_SEARCH_WORD,
        BANNED
    }

    private String word;
    private WordType wordType;

    public SearchWord() {
    }

    public SearchWord(IndexWord indexWord) {
        super.id = ""+indexWord.getId();
        this.word = StringUtils.lowerCase(indexWord.getWord());
        this.wordType = WordType.valueOf(indexWord.getType());
    }

    public String getId() {
        return super.id;
    }

    public void setId(String id) {
        super.id = id;
    }

    public String getWord() {
        return word;
    }

    public void setWord(String word) {
        this.word = word;
    }

    public WordType getWordType() {
        return wordType;
    }

    public void setWordType(WordType wordType) {
        this.wordType = wordType;
    }

    @Override
    public Map toIndex() {
        HashMap map = new HashMap();
        map.put("id", super.id);
        map.put("word", word);
        map.put("word_type", wordType.toString());
        return map;
    }

    @Override
    public Indexable fromIndex(Map map) {
        if (map == null) {
            return this;
        }
        this.word = (String) map.get("word");
        this.wordType = WordType.valueOf((String)map.get("word_type"));
        return this;
    }

} 
```

该代码运行良好，但我必须说我不确定我是否正确实现了这一点。我真的很难理解文档。所以我的问题基本上是：

1.  我是否正确实施了 Future 和 Promise？
2.  创建一个自定义演员会更好，并在该演员中执行索引搜索，如文档中的示例：

=====

```
 return async(
        Akka.asPromise(ask(myActor,"hello", 1000)).map(
          new Function<Object,Result>() {
            public Result apply(Object response) {
              return ok(response.toString());
            }
          }
        )
      ); 
```

3.  也许你有一些我还没有找到的好例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:17:58.040

AFAIK，你的代码完全没问题。

我可能错了，但我认为第二个选项严格等同于第一个选项，因为该`Akka.future()`方法是该方法的包装器`Akka.promise()`。

来自[Play 2.0.4 的 Akka 类源代码](https://github.com/playframework/Play20/blob/2.0.4/framework/src/play/src/main/java/play/libs/Akka.java#L34)：

```
/**
 * Executes a block of code asynchronously in the application Akka Actor system.
 */
public static <T> Promise<T> future(java.util.concurrent.Callable<T> callable) {
    return asPromise(akka.dispatch.Futures.future(callable, system().dispatcher()));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T18:04:17.867

尽管您已经正确实现了 Promise 和 Future，但我不认为这段代码是“非阻塞的”......

似乎阻塞调用是

```
List<String> list = IndexService.find(term); 
```

虽然这现在包含在一个承诺/未来中，但它仍然是一个阻塞调用......如果你想真正做到非阻塞（具有所有好处），你必须让你的数据访问（查询）非- 阻止...

哦，一个非阻塞的动作方法应该返回一个结果的承诺，而不是一个结果......

这就是我应该如何编写您的代码：

```
@BodyParser.Of(value = BodyParser.Json.class)
public static F.Promise<Result> complete(final String term) {    
    scala.concurrent.Future<List<String>> listFuture = IndexService.find(term);

    F.Promise<List<String>> listPromise = F.Promise.wrap(listFuture);

    return listPromise.map(new F.Function<List<String>, Result>() {
       @Override
       public Result apply(List<String> list) throws Throwable {
          return ok(Json.toJson(list));
       }
    });
} 
```

希望这可以帮助！

# javascript - 通过 javascript 在 google chrome 和 safari 中打印时出现乱码

> ID：14136596
> 
> 赞同：3
> 
> 时间：2013-01-03T10:02:26.447
> 
> 标签：javascript, ajax, google-chrome, printing, safari

我有一个 JS 函数，当有人单击按钮时，它会打印我的 html 页面（页面的下半部分）的名为**divDisplay**的特定 div 的内容。当用户与页面交互时，这个 div 的内容是动态接收的（ ajax ）。打印在 FF、OPERA、IE 中完美运行，但在要打印的弹出窗口中的 chrome 和 safari 中，数据被打乱，没有颜色并且不在正确的位置（好像没有 css 格式）。

```
function jsPrintDiv(m) {

    glblPopupWindow = window.open("", "PrintWindow", "width=1024,height=768,top=50,left=50,toolbars=no,scrollbars=yes,status=no,resizable=yes");
    glblPopupWindow.document.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><link rel="stylesheet" type="text/css" href="styles.css"></head><body><div name="divDisplay" id="divDisplay">' + document.getElementById(m).innerHTML + '</div></body></html>');
    glblPopupWindow.document.close();
    glblPopupWindow.document.getElementById("divDisplay").style.top = "0px";

    glblPopupWindow.focus();
    glblPopupWindow.print();
    glblPopupWindow.close();

} 
```

**styles.css**与进行打印的原始 html 页面所具有的 css 文件相同。**doctype**也是如此。

**divDisplay**的CSS ：

```
#divDisplay {
    position: absolute;
    left: 0.2%;
    top: 305px;
    width: 99.6%;
    bottom: 0.5%;
    /* height: expression(document.body.offsetHeight - 314 + "px"); */
    overflow: auto;
    background-color: #AACCFF;
    font-family: palatino linotype;
    font: palatino linotype;

    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
} 
```

有什么想法我可能做错了吗？提前致谢！

**编辑：**

要打印的弹出窗口中的正确数据（firefox）：http: [//img208.imageshack.us/img208/8195/ffprint.jpg](http://img208.imageshack.us/img208/8195/ffprint.jpg)

要打印的弹出窗口中的加扰数据（chrome）：http: [//img152.imageshack.us/img152/6108/chprint.jpg](http://img152.imageshack.us/img152/6108/chprint.jpg)

**EDIT2：** 如果我注释掉

```
glblPopupWindow.print(); 
```

行，chrome正确显示它。不知道这是否有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:09:54.693

您显示的 Firefox 窗口不是 Firefox 的打印预览。屏幕截图是实际的弹出窗口，这就是它看起来正确的原因。如果您要在 Firefox 中打开该页面，然后转到“文件”->“打印预览”，我敢打赌它看起来与您在 Chrome 中看到的非常相似。

当您打印一个网页时，它的外观并不总是与您查看它时的外观相同。您可以为应打印的页面添加打印样式表，也可以将打印样式添加到现有工作表。在您的 CSS 中指定打印样式：

```
@media print {
    /* Your Styles Here */
} 
```

此外，浏览器可以以不同方式解释打印网页。为打印网站定义好的 css 真的很痛苦。祝你好运。

# asp.net - Visual Studio：当我签出任何文件时，我的 Web 应用程序中的会话丢失

> ID：14136600
> 
> 赞同：1
> 
> 时间：2013-01-03T10:03:02.200
> 
> 标签：asp.net, visual-studio

很奇怪，在结帐时，Visual Studio 会杀死会话，所以当我签​​出任何文件时，我必须一次又一次地重新登录到我的 asp.net 应用程序，这很烦人:(

我注意到 Visual Studio 2010 和 2012 中的上述行为，将其与 VSS 或 Team Foundation Server 一起使用。MSDN 文档[Checkout](http://msdn.microsoft.com/en-us/library/1yft8zkw.aspx)没有关于此类行为的任何详细信息。

想知道是我吗？还是我的代码？还是 Visual Studio 的功能？

还有其他人面临同样的问题吗？

![网络应用程序属性](../Images/11433bb367a544f04e5d03db37435ca6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:18:19.440

如果 Visual Studio 检测到某些文件中的更改，如果 Web 应用程序托管在内部开发服务器（甚至可能是 IIS Express）上，它将重新启动 Web 应用程序，这反过来会使您的用户会话无效。我不确定它是否适用于每种类型的文件，但我知道`cshtml`自 Visual Studio 2012 以来的视图对我来说会发生这种情况。显然，就像在 IIS 托管的 Web 应用程序中一样，对 的更改`web.config`也会导致重新启动。

您最好的选择是在外部托管您的网站，这意味着将其托管在 IIS 中，而不是在开发服务器 (Cassini) 中。您可以在 Web 应用程序的项目属性中配置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-07T11:28:36.470

有一种解决方法。我偶然发现了它：

[每当我在 TFS 中签出文件时，都会创建/删除 App_offline.htm](https://stackoverflow.com/questions/3965346/app-offline-htm-created-deleted-whenever-i-check-out-a-file-in-tfs)

标题具有误导性；然而，这一切都与结帐过程和烦人的会话丢失有关。

它确实适用于`VS 2013`和`VS 2015`。

**上面的答案非常难以访问，因此值得在这里创建一个答案。感谢版主的理解。**

# jquery - 谷歌图表工具不适用于 firefox/jquery

> ID：14136605
> 
> 赞同：0
> 
> 时间：2013-01-03T10:03:16.040
> 
> 标签：jquery, firefox, google-visualization

我正在与荒谬的问题作斗争。我决定在我的项目中包含谷歌图表，但它不起作用。

acutally 它单独工作，但它不适用于我在 Firefox 上的其他 jquery 代码。

它适用于谷歌浏览器，没有问题。但是当我删除`<script src="http://code.jquery.com/jquery-latest.js"></script>`这一行时，它会起作用。

在问这个问题之前，我读了这个，但我无法解决它：

[Google Charts API 使用 $(document).ready 方法显示空白屏幕](https://stackoverflow.com/questions/5197547/google-charts-api-and-jquery-problem)

[Google 图表工具不适用于 jQuery .load](https://stackoverflow.com/questions/7723693/google-chart-tool-does-not-work-with-jquery-load)

[google.setOnLoadCallback 和 jQuery $(document).ready()，可以混用吗？](https://stackoverflow.com/questions/556406/google-setonloadcallback-with-jquery-document-ready-is-it-ok-to-mix)

我的完整代码：适用于 chrome，不适用于 firefox（如果我不包含 jquery.js 则有效）

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Title</title>
        <link type="text/css" href="datepicker/ui.all.css" rel="stylesheet" />

    <link type="text/css" href="datepicker/demos.css" rel="stylesheet" />
    <link rel="shortcut icon" href="stok.ico" />
    <link href="Site.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="themes/base/jquery.ui.all.css">
    <link rel="stylesheet" href="uploadify/uploadify.css" type="text/css" />

  <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="js/jquery.uploadify.js"></script>
    <script src="ui/jquery.ui.core.js"></script>
    <script src="ui/jquery.ui.widget.js"></script>
    <script src="ui/jquery.ui.tabs.js"></script>
    <script src="ui/jquery.ui.mouse.js"></script>
    <script src="ui/jquery.ui.draggable.js"></script>
    <script src="ui/jquery.ui.position.js"></script>
    <script src="ui/jquery.ui.resizable.js"></script>
    <script src="ui/jquery.ui.dialog.js"></script>
    <script src="ui/jquery.ui.datepicker.js"></script>
    <script src="ui/jquery.ui.datepicker-tr.js"></script>
    <link rel="stylesheet" href="css/jq.css" type="text/css" media="print, projection, screen" />
    <link rel="stylesheet" href="themes/blue/style.css" type="text/css" media="print, projection, screen" />
    <link rel="stylesheet" href="blueimp/bootstrap.min.css">
    <link rel="stylesheet" href="blueimp/bootstrap-image-gallery.min.css">
    <script type="text/javascript" src="js/jquery.tablesorter.js"></script>
    <script type="text/javascript" src="js/docs.js"></script>
    <script src="js/jquery.form.js" type="text/javascript"></script>

        <script type="text/javascript">

    $(function() {      
        $("#tablesorter-demo").tablesorter({widgets: ['zebra']});

    }); 

    </script>
    <link rel="stylesheet" href="demos.css">
    <script>
    $(function() {
        $( "#tabs" ).tabs();
    });
    </script>

     <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>

    <script type="text/javascript">
      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([
        <?php 
        include "db-class.php";
include "func-class.php";
$db= new db;
$data=new data;
$db->connect();

$strSQL = "SELECT temsilci_bolge, count( id ) as sayi FROM garanti WHERE durum=1 GROUP BY temsilci_bolge";
$sonuc2 = mysql_query ( $strSQL );      
    while ( $satir = mysql_fetch_array( $sonuc2 ) )
{
?>

          ['<?php echo $satir["temsilci_bolge"];?>', <?php echo $satir["sayi"]; ?>],

<?php 

}

?>

        ]);

        // Set chart options
        var options = {'title':'Bölgelere Göre Arıza İstatistiği',
                       'width':600,
                       'height':500};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }

    </script>

</head>
<body>

<div id="dialog-confirm" title="Kaydı Silmek İstiyor musunuz ?" style="display:none;">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>Silme İşlemi Kalıcı Olarak Yapılacaktır. Emin misiniz?</p>
</div>

<div id="edit-confirm" title="Kaydı Değiştirmek İstiyor musunuz ?" style="display:none;">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>Gerçekten Düzenlemek İstiyor musunuz?</p>
</div>
 <div class="page">
        <div class="header">
          <div class="title" style="float:right">

                <h1>   xyz Group  </h1>

          </div>

            <h1><font size="+6">   AAAS</font> <font style="margin-top:5px !important; position:relative;">&reg;</font> </h1>
        <h1>Aaaaaa aaaaaa aaaaaa ssssssss</h1>
<br />

        </div>
        <div class="main">

<div id="return"></div>

            <div class="demo">

<div id="dialog" title="Sonuç">
    <p></p>
</div>

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Kayıt Ekleme</a></li>
        <li><a href="#tabs-silme">Kayıt Silme</a></li>
        <li><a href="#tabs-sonuc">Sonuçlar</a></li>
        <li><a href="#tabs-detay">Detaylı Arama</a></li>
        <li><a href="#tabs-ozel">Özel Kayıt Arama</a></li>
        <li><a href="#tabs-stat">Google Chart Stats</a></li>
    </ul>

    <div id="tabs-1">

    </div>

    <div id="tabs-sonuc">
    </div>

    <div id="tabs-detay">
      <div class="detay">Detay</div>  
    </div>

       <div id="tabs-ozel">

       <div class="ozel_sonuc">!!!!</div>

       </div>

      <div id="tabs-stat">

          <div id="chart_div" style="float:left;"></div>

        google charts

      </div> 
</div>

</div><!-- End demo -->

<div class="demo-description">
<p><img src="logo.jpg" width="100" height="92"/> 
</div><!-- End demo-description -->

        </div>
        <div class="clear">
        </div>
    </div>
    <div class="footer">
       AaaS</font><font style="margin-top:-15px;">&reg;</font> Copyright © 2012 </p>
    </div>

</body>
</html> 
```

# lotus-notes - 将工作集从旧的 Domino Designer 安装迁移到新的安装

> ID：14136608
> 
> 赞同：0
> 
> 时间：2013-01-03T10:03:20.787
> 
> 标签：lotus-notes, lotus-domino, lotus

我正在尝试将我的工作集迁移到新安装。在网上搜索时，我发现[了这个链接](http://blog.thimojansenit.nl/2011/05/recover-designer-working-sets.html)，它说通过复制文件**`<DATA FOLDER>\workspace\.metadata\.plugins\org.eclipse.ui.workbench\workingsets.xml`**，我们可以取回原来的工作集。我试过了，但它只恢复了我的工作集，它们是空的，里面没有数据库。

我在这里想念什么？有谁知道如何从旧安装中获取所有工作集并将其放入 Domino Designer 的新安装中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T17:00:22.187

我遇到过同样的问题。我从旧计算机上的同一个 Notes 8.5.3 版本迁移到新计算机，所以在阅读了上面的提示后，我决定只替换我新计算机上 C:\Lotus\Notes\Data\ 文件夹下的整个工作区文件夹带有旧 PC 上工作区文件夹的 PC。

有效！当我打开 Designer 客户端时，我的所有工作集都带有数据库图标。我对工作区文件夹一无所知，所以如果我要迁移到新版本，我可能会谨慎应用这种方法，但由于我还没有开始在新 PC 上工作，所以我准备重新安装必要时使用软件。

仅供参考，如果您不想在迁移到新 PC 或在同一台 PC 上安装另一个版本的 Notes 时丢失 Domino Administrator 客户端中的自定义命令，您只需从旧环境复制 domadmin.nsf 数据库文件并替换新环境中的那个（如果存在，如果您在新安装后没有启动该应用程序，它将不存在）。如果您已升级到新的 Notes 版本，请在新环境中的 Designer 中打开此 domadmin.nsf DB，并从 StdAdminDatabase 模板 (domadmin.ntf) 刷新其设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:58:46.463

设计器中的数据库作为 Eclipse 项目保存，因此您需要在工作区目录中复制项目目录。您可以在数据库标题之后的设计器中看到它们的目录名称。虽然，我不建议这样做，因为不同的设计师版本可能有不同的内容结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-19T17:38:38.810

[http://www.lotusguru.com/lotusguru/LGBlog.nsf/d6plinks/20100310-83ESQC](http://www.lotusguru.com/lotusguru/LGBlog.nsf/d6plinks/20100310-83ESQC)

Notes 客户端完全关闭，备份或恢复以下目录：

..data/workspace/.metadata/.plugins/..

*   com.ibm.designer.domino.ide.resources
*   org.eclipse.core.resources/.projects
*   org.eclipse.core.resources/.root
*   org.eclipse.core.resources/.safetable
*   org.eclipse.ui.workbench

# php - php和mysql使用日期范围不能显示

> ID：14136610
> 
> 赞同：0
> 
> 时间：2013-01-03T10:03:24.103
> 
> 标签：php, mysql, sql, select

我对select之间的mysql日期有疑问。在mysql表中，字段为varchar。日期范围是'21-01-2013'和'31-01-2013'，它可以显示记录，但是日期范围是'21-01-2013'和'20-02-2013'，它不能显示记录。

```
"SELECT * from away_from_office where (awaydatefrom between '21-01-2013' and '31-01-2013') "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:05:50.267

您应该首先使用将其转换为日期`STR_TO_DATE`，例如。

```
SELECT * 
from away_from_office 
where awaydatefrom between STR_TO_DATE('21-01-2013', '%d-%m-%Y') and  
                           STR_TO_DATE('31-01-2013', '%d-%m-%Y') 
```

如果该列与您显示的列具有相同的格式，也将其转换

```
WHERE STR_TO_DATE(awaydatefrom, '%d-%m-%Y') BETWEEN 
```

如果您有机会更改表格，或者您正在处理示例记录，请通过将列的数据类型更改为`DATE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:06:34.287

将列数据类型更改为`DATE`

[http://dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)

# ios - UIButton 在突出显示时不会剪辑其 imageView

> ID：14136612
> 
> 赞同：1
> 
> 时间：2013-01-03T10:03:29.023
> 
> 标签：ios, uiimageview, uibutton, clipping

我想创建一个按钮图像滑入/滑出按钮矩形的效果，最终效果应如下所示：

[滑动按钮](http://i.stack.imgur.com/EeEXd.png)

所以第一个刚刚开始它的“过渡”，第二个是一半，最后一个完全滑出。

为此，我将按钮的*clipsToBounds*属性设置为*YES*，然后为按钮的*imageView*设置动画：

```
- (void)setupButtons
{
self.buttonsYOffset = -60.0;
self.buttonsOriginalY = self.twitterButton.imageView.center.y;

self.twitterButton.clipsToBounds = YES;
self.twitterButton.imageView.center = CGPointMake(self.twitterButton.imageView.center.x, self.buttonsOriginalY + self.buttonsYOffset);
} 
```

和：

```
- (void)show
{
[UIView animateWithDuration:0.2 delay:0
    options:UIViewAnimationOptionCurveEaseOut
    animations:^ {
        self.twitterButton.imageView.alpha = 1.0;
        self.twitterButton.imageView.center = CGPointMake(self.twitterButton.imageView.center.x, self.buttonsOriginalY);
    }
    completion:^(BOOL success) {
    }
 ];
}

- (void)hide
{
[UIView animateWithDuration:0.2 delay:0.0
    options:UIViewAnimationOptionCurveEaseOut
     animations:^ {
         self.twitterButton.imageView.center = CGPointMake(self.twitterButton.imageView.center.x, self.buttonsOriginalY + self.buttonsYOffset);
     }
     completion:^(BOOL success) {

     }
 ];
} 
```

如果我在按钮处于“非活动”状态（未点击）时触发此代码，一切正常 - 它滑入和滑出就好了。

当我在点击按钮后立即触发*hide()*方法时，问题就开始了 - 它不会滑出 - 只是突出显示一秒钟，它的图像会在“打开”位置停留一段时间，然后跳到“关闭”位置立即地。

似乎按钮的 imageView 仅在按钮处于默认非活动状态时才使用？可以轻松修复吗？

# c++ - C++ 生成随机数

> ID：14136617
> 
> 赞同：0
> 
> 时间：2013-01-03T10:03:57.100
> 
> 标签：c++, random

> **可能重复：**
> [如何在 C++ 的循环中生成不同的随机数？](https://stackoverflow.com/questions/4926622/how-to-generate-different-random-number-in-a-loop-in-c)

这是我的代码：

```
 for(i=0;i<10;i++)
 {
    srand ( time(NULL) );
    cout<<time(NULL);
    max=100,min=0;
    for(j=0;j<3;j++)
    {
          cout<<(( (rand() % (max - min + 1)) + min)%5);
    }
 } 
```

现在我得到输出：

1357207288 0 1 4

1357207289 0 1 4

1357207290 0 1 4

等等。我想每次都得到不同的随机数。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T10:07:36.183

您重复获得相同结果的原因是因为您每次都使用相同的种子对其进行初始化。也就是说，由于您执行的操作如此之少，因此从循环的第一次迭代到最后一次迭代没有经过一秒钟。因此，`time(nullptr)`每次迭代都会返回相同的值。

要解决这个问题，请移出`srand ( time(NULL) );`循环，这意味着只设置一次随机种子。

```
 srand ( time(NULL) );
 for(int i=0;i<10;i++)
 {
    cout<<time(NULL);
    int max=100;
    for(int j=0;j<3;j++)
    {
          cout<<(( (rand() % (max - min + 1)) + min)%5);
    }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T10:11:33.273

您必须移出`srand()`循环，否则您会收到相同的数字。

```
srand ( time(NULL) );
for(i=0;i<10;i++)
{
cout<<time(NULL);
max=100,
for(j=0;j<3;j++)
{
      cout<<(( (rand() % (max - min + 1)) + min)%5);
}
} 
```

如果你不这样做，你将使用相同的种子，因为时间不会在你的程序执行所需的纳秒内改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:08:35.067

```
srand(time(NULL));
printf("%d", rand() % 10+1);
for(i=1; i<rand()% max_length; i++) {
  printf("%ld", rand() % 10);
} 
```

这将生成随机数（也是它们的随机长度）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T10:15:04.407

即使 srand() 退出循环，您也会得到相同的结果，因为在 C 中，rand 使用的生成算法只能通过调用此函数来保证。在 C++ 中，这个约束被放宽了，并且允许库实现在其他情况下推进生成器（例如调用 的元素`<random>`）。在循环中放置一个睡眠，看看会发生什么。

显然，在纯 C 中这不会发生。然而，boost 库为您提供了一些很好的 PRNG 功能。用它代替破碎的`srand(time(NULL));`

# iphone - bool _WebTryThreadLock(bool) 与 UITableView 崩溃

> ID：14136618
> 
> 赞同：0
> 
> 时间：2013-01-03T10:03:57.260
> 
> 标签：iphone, objective-c, ios, uitableview

我正在尝试在`UITableView`.

代码 ：-

```
- (void)requestTimeline:(int)count
{    
    NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1/statuses/user_timeline.json"];

    NSMutableDictionary *parameters = [[NSMutableDictionary alloc] init];
    [parameters setObject:@"abc" forKey:@"screen_name"];
    [parameters setObject:@"20" forKey:@"count"];
    [parameters setObject:@"1" forKey:@"include_entities"];

    TWRequest *request = [[TWRequest alloc] initWithURL:url parameters:parameters requestMethod:TWRequestMethodGET];

    [request performRequestWithHandler:^(NSData *responseData1, NSHTTPURLResponse *urlResponse, NSError *error)
    {
        if (responseData1 != nil)
        {
            NSError *error = nil;
            self.itemsToDisplay = [NSJSONSerialization JSONObjectWithData:responseData1 options:NSJSONReadingMutableLeaves error:&error];

            if (self.itemsToDisplay != nil)
            {
                [self.tableView reloadData];
            }
            else
            {
                NSLog(@"Error serializing response data %@ with user info %@.", error, error.userInfo);
            }
        }
        else
        {
            NSLog(@"Error requesting timeline %@ with user info %@.", error, error.userInfo);
        }
    }];
} 
```

`self`是`UITableViewController`的子类。

由于阻塞，推特请求将在另一个线程上执行，而不是在主线程上。这就是它崩溃的原因。

`//TWRequest.h`

```
// Issue the request. This block is not guaranteed to be called on any particular thread.
- (void)performRequestWithHandler:(TWRequestHandler)handler; 
```

崩溃报告：-

> bool _WebTryThreadLock(bool), 0xa8e4f50: 试图从主线程或web线程以外的线程获取web lock。这可能是从辅助线程调用 UIKit 的结果。现在崩溃...

如何解决这个问题？

谢谢...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T10:42:37.807

Web 视图只能在主线程中使用。大部分 UIKit —— tableView reloadData 命令也不是线程安全的

```
dispatch_async(dispatch_get_main_queue(), ^{ 
    //all you ever do with UIKit.. in your case the reloadData call
    [self.tableView reloadData];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:28:30.123

插入这个，可能有帮助：

```
[self.tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:48:21.577

解决了 ：

下面的代码也有效：

```
[[NSOperationQueue mainQueue] addOperationWithBlock:^{
                                [self.tableView reloadData];
                            }]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T11:01:14.610

尝试：

```
[self.tableView performSelectorInMainThread:@selector(reloadData)]; 
```

代替：

```
[self.tableView reloadData]; 
```

# php - redbeanphp 和表前缀

> ID：14136621
> 
> 赞同：4
> 
> 时间：2013-01-03T10:04:16.820
> 
> 标签：php, orm, redbean

我在我的 php 项目中使用 Redbeanphp ( [http://redbeanphp.com/ )。](http://redbeanphp.com/)我想为我的表使用表前缀。

Redbeanphp 从 3.0 版本开始不支持表前缀。但我想扩展 Redbeanphp 以在我的项目中支持表前缀。

我不想修改 redbeanphp 代码。但如果没有解决方案，我会这样做。

我已经尝试替换 Redbeanphp 的 QueryWriter 但 QueryWriter 类并不总是相同的（这取决于我的数据库的类型）。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T20:01:56.687

我现在得到了回应，所以我回答自己。

一旦redbean被初始化，你就可以配置一个新的工具箱。redbean 中的工具箱处理 3 个重要对象：查询编写器、Redbean OODB 和数据库适配器。您可以使用以下命令访问当前的 redbean 工具箱`R::$toolbox`

您可以执行以下代码：

```
R::configureFacadeWithToolbox(new RedBean_ToolBox(R::$redbean, R::$adapter, R::$writer)); 
```

这段代码什么都不做。因为您使用新工具箱配置 Redbean，但使用相同的 OODB、相同的数据库适配器和相同的查询编写器。但是在这段代码中，您可以用您自己的对象替换其中一个对象。

例如，用虚拟作家替换作家：

```
$writer = new MyQueryWriter();
R::configureFacadeWithToolbox(new RedBean_ToolBox(R::$redbean, R::$adapter, $writer)); 
```

问题如下：

*   您想用自己的查询编写器替换查询编写器来处理表前缀
*   查询编写器类并不总是相同的。Redbean 使用 5 个类作为查询编写器。该类取决于数据库类型。例如，如果您使用 Mysql 数据库，则查询编写器类是`RedBean_QueryWriter_MySQL`
*   您不想编写整个查询编写器。

Redbean 查询编写器可能的类是：

*   RedBean_QueryWriter_CUBRID
*   RedBean_QueryWriter_MySQL
*   RedBean_QueryWriter_Oracle
*   RedBean_QueryWriter_PostgreSQL
*   RedBean_QueryWriter_SQLiteT

所以，这是我的解决方案。我写了5个littles类。

```
class MyCubridQueryWriter extends RedBean_QueryWriter_CUBRID {

   public function safeTable($name, $noQuotes = false) {
      $name = prefix($name);
      return parent::safeTable($name, $noQuotes);
   }

} 

class MyMysqlQueryWriter extends RedBean_QueryWriter_MySQL {

   public function safeTable($name, $noQuotes = false) {
      $name = prefix($name)
      return parent::safeTable($name, $noQuotes);
   }

}

class MyOracleQueryWriter extends RedBean_QueryWriter_Oracle {

   public function safeTable($name, $noQuotes = false) {
      $name = prefix($name)
      return parent::safeTable($name, $noQuotes);
   }

} 

class MyPostgreSqlQueryWriter extends RedBean_QueryWriter_PostgreSQL {

   public function safeTable($name, $noQuotes = false) {
      $name = prefix($name)
      return parent::safeTable($name, $noQuotes);
   }

}

class MySQLiteTQueryWriter extends RedBean_QueryWriter_SQLiteT {

   public function safeTable($name, $noQuotes = false) {
      $name = prefix($name)
      return parent::safeTable($name, $noQuotes);
   }

} 
```

如您所见，每个类都扩展了一个 Redbean 查询编写器类。我们重写该`safeTable`方法。Redbean 总是`safeTable`在一个表名上使用。`prefix`功能很简单：

```
function prefix($table) {
    return "my_prefix_$table";
} 
```

所以现在，在我们的代码中。我们可以使用数组将 Redbean 查询编写器类映射到我们自己的类并替换它。我们到了 ：

```
$writerMapping = array(
    'RedBean_QueryWriter_CUBRID' => 'MyCubridQueryWriter',
    'RedBean_QueryWriter_MySQL' => 'MyMysqlQueryWriter',
    'RedBean_QueryWriter_Oracle' => 'MyOracleQueryWriter',
    'RedBean_QueryWriter_PostgreSQL' => 'MyPostgreSqlQueryWriter',
    'RedBean_QueryWriter_SQLiteT' => 'MySQLiteTQueryWriter'
);

$class = $writerMapping[get_class(R::$writer)];
$writer = new $class(R::$adapter);

R::configureFacadeWithToolbox(new RedBean_ToolBox(R::$redbean, R::$adapter, $writer)); 
```

等等。现在 Redbean 将使用你自己的作家，你可以做你想做的事！使用我们的`safeTable`方法，我们为数据库中的每个表名添加一个前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:28:52.603

我想在 Wordpress 中使用 RedBean 时遇到了这个问题。我的解决方案是创建另一个类（“wordpress redbean”的 WPR），如下所示：

```
class WPR {

    public static function __callStatic($method, $params)
    {
        global $wpdb;
        $prefix = $wpdb->base_prefix;

        foreach ($params as &$param)
            $param = preg_replace('/\{([a-zA-Z0-9_]+)\}/', $prefix . '$1', $param);

        // switch to wordpress database
        R::selectDatabase('WPR');

        // do the dang thing
        $res = call_user_func_array(array('R',$method),$params);

        // go back
        R::selectDatabase('default');

        // send it
        return $res;
    }
};

R::addDatabase('WPR', "mysql:host=".DB_HOST.";dbname=".DB_NAME, DB_USER, DB_PASSWORD); 
```

我还希望这个类使用与我的“常规”redbean 类不同的数据库，所以我在那里有 selectDatabase() 调用。如果您不需要它们，请将它们注释掉。

它的作用是充当 redbean 的代理，但是对于每个输入，它都会检查一些像 {this} 这样的子字符串，并将其扩展为带有前缀的完整数据库名称。这是您的用法示例： `$my_blog = WPR::find('{blogs}', 'domain=?', array('mydomain.com'));`或 `$allowed_hosts = WPR::getCol('SELECT domain FROM {blogs}');`

在这两种情况下，{blogs} 被转换为 wp_blogs

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:14:21.817

魔术师，

我和你有同样的问题。我尝试了您的解决方案，但无法正常工作。我编写了几个函数，用于将我的对象名称添加到表名中并返回，我认为这在我的情况下会起作用，但我仍然想让你的方式工作，因为它会更加透明。我有用于读写的无前缀表名。

我注意到 Oracle 支持在 RedBean 中没有开箱即用，所以我添加了对每个类名的检查以避免错误：

```
if (class_exists('RedBean_QueryWriter_MySQL', false)) {
    class MyMysqlQueryWriter extends RedBean_QueryWriter_MySQL {
    ...
} 
```

检查应该有效，我在加载前缀代码时将输出到我的 MySQL（我正在使用的）块中的日志。

另外，最后你写道：

```
$class = $writerMapping(get_class(R::$writer)); 
```

但您可能的意思是：

```
$class = $writerMapping[get_class(R::$writer)]; 
```

根据一些调试， my`R::$writer`之后发生了更改`configureFacadeWithToolbox`，但是，由于某种原因，表名没有被转换，并且我的自定义`safeTable`函数中没有任何内容正在执行。

如果您能提供更多关于您如何测试您的方法或我可能缺少什么的信息，我会很高兴听到。

（很抱歉，这条消息不是您问题的答案，但我真的找不到任何其他方式向您发送消息或评论您的答案。该死的堆栈溢出！（开个玩笑，我喜欢它。） )

# c# - Oracle 客户端与基于任务的异步模式 (async/await)

> ID：14136622
> 
> 赞同：9
> 
> 时间：2013-01-03T10:04:25.870
> 
> 标签：c#, .net, oracle, task-parallel-library, async-await

我想写一堆以异步/等待方式查询Oracle数据库的方法。由于 ODP.NET 似乎既不支持可等待的 *Async 方法也不支持 Begin/EndOperationName 对，我必须手动实现哪些选项？

到目前为止，我看到的所有 I/O 密集型异步方法的示例都只调用了 .NET 库中的其他异步方法，但没有说明在内部完成上下文切换的方式。文档说，在这些情况下，没有使用单独的线程，而且多线程开销显然只对 CPU 密集型操作有价值。所以我想使用 Task.Run() 不是一个选项，还是我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-15T10:54:46.560

只要我知道 Oracle ODP 是异步库的同步包装器。我发现这篇文章只是想知道同样的问题：为 Oracle ODP 调用引入异步模式会提高性能吗？（我在 IIS NET TCP 上使用 WCF）。

但是，正如上面所说，只要引入了异步模式，创建了一个新的Task，并且调用线程已经从线程池中，就无法进行任何改进，这只是一个开销。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-15T11:44:55.277

我正在使用这个

```
public static class TaskHelper
{
    public async static Task<T> AsAsync<T>(Func<T> function, TaskCreationOptions taskCreationOptions = TaskCreationOptions.None)
    {
        return await Task.Factory.StartNew(function, taskCreationOptions);
    }

    public async static Task AsAsync(Action action, TaskCreationOptions taskCreationOptions = TaskCreationOptions.None)
    {
        await Task.Factory.StartNew(action, taskCreationOptions);
    }
} 
```

任何同步函数都可以异步，你可以等待它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-05T12:45:43.007

您始终可以将**Task.Factory.StartNew** 与**TaskCreationOptions.LongRunning**一起使用，这样 .NET 将创建一个新线程而不是使用线程池线程。以下是您可以应用于您的操作的手动异步代码。

```
private static void ManualAsyncOperation()
        {

            Task<string> task = Task.Factory.StartNew(() =>
                {
                    Console.WriteLine("Accessing database .....");
                    //Mimic the DB operation 
                    Thread.Sleep(1000);

                    return "Hello wolrd";
                },TaskCreationOptions.LongRunning);

            var awaiter =task.GetAwaiter();
            awaiter.OnCompleted(() =>
                {
                    try
                    {
                        var result = awaiter.GetResult();

                        Console.WriteLine("Result: {0}", result);
                    }
                    catch (Exception exception)
                    {

                        Console.WriteLine("Exception: {0}",exception);
                    }
                });
            Console.WriteLine("Continuing on the main thread and waiting for the result ....");
            Console.WriteLine();

            Console.ReadLine();

        } 
```

# replication - 部分复制和分片的区别？

> ID：14136633
> 
> 赞同：3
> 
> 时间：2013-01-03T10:05:16.237
> 
> 标签：replication, sharding, database-replication, distributed-system

我想知道分片是否是部分复制的替代名称。我发现——

部分复制 – 每个数据项仅在某些但不是所有节点上都有副本（“分片”？）

纯部分复制。– 只有数据项子集的副本，但没有节点包含数据库的完整副本

混合部分复制。– 一组节点是完整副本，另一组节点是部分副本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T01:57:15.887

部分复制是一种有趣的方式，在这种方式中，您通过从主服务器到从服务器的复制来分发数据，每个从服务器都包含一部分数据。最终你会得到一个较小的数据库数组，只读的，每个都包含一部分数据。读取可以很好地分布式和并行化。

但是写的呢？

在 1 个大型懒惰主数据库中，这些仍然被阻塞，诸如缓冲区管理、锁定、线程锁/信号量和恢复任务之类的任务 - 是 OLTP 的真正瓶颈，它们使写入无法扩展......博客文章在这里：[http](http://database-scalability.blogspot.com/2012/08/scale-up-partitioning-scale-out.html) ://database-scalability.blogspot.com/2012/08/scale-up-partitioning-scale-out.html 。顺便说一句 - 你在这里的主题只是给了我另一个帖子的好主意。我会链接到这个问题并给你信用！:)

分片是数据在数据库数组中只出现一次的地方。每个数据库都是数据的完全所有者，从那里读取数据，将数据写入那里。这样，读取和写入是分布式和并行化的。可以实现真正的横向扩展。

分片处理起来很麻烦，维护起来非常困难。ScaleBase（我在那里工作），启用自动透明横向扩展，只需将它放在中间，你将在后面有 10 个 DB，它看起来像你的应用程序的 1。自动、透明的超级分片——在一个盒子里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T18:10:33.103

分片是一种对表进行水平分区的方法。它与复制无关。传统上，RDBMS 服务器位于系统中心，具有星形拓扑。这就是为什么它变成：

1.  单点故障

2.  系统性能瓶颈

要解决问题 #1，您使用复制：如果原始服务器死机，您将故障转移到副本。

要解决问题 #2，您可以：

1.  使用分片

    1.1 自己做分片

    1.2 使用你的RDBMS“开箱即用”的集群机制

2.  迁移到 NoSQL 解决方案

分片允许您通过在它们之间拆分数据来将数据库扩展到许多服务器。然而，分片是一种权衡。它限制了您的数据加入/相交/等。

如果您使用分片，您仍然会遇到问题 #1。因此，复制分片节点是一个很好的做法。

# linux - 创建和更改目录的一个命令

> ID：14136635
> 
> 赞同：42
> 
> 时间：2013-01-03T10:05:17.733
> 
> 标签：linux, directory, command, mkdir, cd

我只搜索**一个**命令——没有`&&`或没有`|`——它创建一个目录，然后立即将您的当前目录更改为新创建的目录。（这是某人为他的“linux-usage”考试而得到的一个问题，他做了一个新命令来做到这一点，但这并没有给他分数。）如果重要的话，这是在 debian 服务器上。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-11-03T19:36:06.290

我相信你正在寻找这个：

```
mkdir project1 && cd "$_" 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-03T10:08:39.167

为此目的在您的例如定义一个bash**函数**`$HOME/.bashrc`

```
 function mkdcd () {
     mkdir "$1" && cd "$1"
 } 
```

然后输入`mkdcd foodir`您的交互式外壳

^(所以严格意义上来说，如果没有包含一些（或至少一个）的*shell 函数*，你想要实现的目标是不可能的......换句话说，练习的目的是让你理解为什么函数（或别名）在一个壳....`&&``;`)

PS它应该是一个函数，而不是一个脚本（如果它是一个脚本，`cd`只会影响运行脚本的[sub-] shell，而不是交互式父shell）；不可能创建单个命令或可执行文件（不是 shell 函数）来更改调用交互式父 shell 的目录（因为每个进程都有自己的当前目录，您只能更改自己进程的当前目录，不属于调用 shell 进程）。

聚苯乙烯。在 Posix shell 中，您应该删除`function`关键字，并将第一行设为`mkdcd() {`

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-07-12T15:38:44.603

对于**oh-my-zsh**用户：`take 'directory_name'`
参考：[官方 oh-my-zsh github wiki](https://github.com/robbyrussell/oh-my-zsh/wiki/Cheatsheet)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-10-24T10:13:49.843

将以下内容放入您的 .bash_profile （或等效项）中将为您提供一个可以满足`mkcd`您需要的命令：

```
# mkdir, cd into it
mkcd () {
    mkdir -p "$*"
    cd "$*"
} 
```

[这篇文章](http://onethingwell.org/post/586977440/mkcd-improved)更详细地解释了它

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-09-09T10:59:41.340

我认为这是不可能的，但对于所有想知道不需要您创建自己的脚本的最简单方法（据我所知）的人来说：

```
mkdir /myNewDir/
cd !$ 
```

这样你就不需要写两次新目录的名字了。

`!$`检索最后`$`一个命令 ( `!`) 的最后一个 ( ) 参数。

（还有更多有用的快捷方式，如`!!`、`!*`或`!startOfACommandInHistory`。在网上搜索以获取更多信息）

遗憾的是`mkdir /myNewDir/ && cd !$`不起作用：它检索上一个命令的最后一个参数，而不是命令的最后一个`mkdir`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-08T20:38:22.317

也许我没有完全理解这个问题，但是

```
>mkdir temp ; cd temp 
```

创建临时目录，然后更改为该目录。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-26T08:22:42.413

```
mkdir temp ; cd temp ; mv ../temp ../myname 
```

你可以这样别名：

```
alias mkcd 'mkdir temp ; cd temp ; mv ../temp ../' 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-08-27T15:07:43.137

您没有说是否要自己命名目录。

```
cd `mktemp -d` 
```

将创建一个临时目录并更改为它。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-01-03T10:09:52.270

也许你可以使用一些 shell 脚本。

shell 脚本中的第一行将创建目录，第二行将更改为创建的目录。

# php - 在不使用 PHP 的情况下将 MySql 与 Android 连接

> ID：14136636
> 
> 赞同：8
> 
> 时间：2013-01-03T10:05:21.323
> 
> 标签：php, android, mysql, web-services

我想将`MySql`数据库与我的 android 应用程序连接起来。
但是，我不想/**不能****用于**这样做。**`PHP`**

 **几乎所有`MySql`在互联网上使用 android 连接的解决方案`PHP`。
我在某处读到，如果不想使用，`PHP`那么`web service`应该使用。

但我找不到任何相同的教程/示例示例。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:13:15.687

看来你混淆了一些东西。

Web 服务只是 Internet (Web) 上的一些代码，它允许您接收信息并将信息发送到服务器，每个示例将信息保存在数据库中。

PHP 只是一种语言，您可以在其中编写 Web 服务。

您可以使用多种语言向其他设备创建 Web 服务（阅读：公开您的数据库）。除其他外，您可以在 Java、.NET、Python 中轻松做到这一点......

如果您正在寻找一种在没有任何 Web 服务/API 的情况下连接到外部数据库的方法，那么 Android 不支持此功能的消息会让您失望。

一个简单的 Web 服务/一堆脚本的大多数示例都包含 PHP，因为这可能是最简单的并且可以在几乎任何服务器上使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T10:13:00.727

Web 服务，正如它的名字一样，是一种服务，这意味着您有一方在使用它（android 客户端）。如果你想要的只是一个持久存储，你可以使用 SQLite，它是一个存在于 android 中的符合 SQL 的解决方案。

如果可以通过 Android SSH 到服务器，您可以使用它连接到 mysql，因为唯一的其他解决方案涉及在您的 android 机器上本地安装 mysql 二进制文件，据我所知，在 Android 上这是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:21:30.107

使用 web 服务（例如用 PHP 编写）连接到远程数据库的一个主要原因是您不想将数据库登录凭据存储在应用程序中。因为否则很容易提取您对该数据库的登录名并以您可能没有计划的方式访问和编辑它（例如删除内容）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-20T07:42:12.887

它可以连接mysql数据库。

我已经完成了使用 php 文件。我使用了一个 spring 配置文件来建立与数据库的连接，并使用 dao 来访问数据库中的数据。

创建一个通过 Spring Framework 和 Servlet 访问服务器的 Web 应用程序。

创建一个 Android 客户端应用程序，向 Servlet 发出 get/post 请求，在 servlet 中处理结果并将响应返回给 Android 客户端应用程序（json 格式） 在 Android 客户端处理 json 格式的响应并将其用于您的应用**

# 3d - 如何找到平面多边形的系数（a，b，c，d）

> ID：14136637
> 
> 赞同：1
> 
> 时间：2013-01-03T10:05:23.583
> 
> 标签：3d, geometry, polygon, plane

给定平面的法线、平面的质心、bais 向量和平面上的一些（> 4）点，我想找出平面多边形的系数（a，b，c，d）。有没有比平面方程 ax + by + cz + d = 0 中的替换点更好的方法。

谢谢，哈沙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:08:12.727

方程将是

```
n_x x + n_y y + n_z z + d = 0 
```

哪里`N[n_x, n_y, n_z]`是法线向量。然后，您可以替换`B(b_x, b_y, b_z)`已知在平面上的任何点来求解`d`，

```
d = -( n_x b_x + n_y b_y + n_z b_z ) 
```

为什么这行得通？设`P(x,y,z)`为平面中的任意点。那么向量`P-B`必须平行于平面并垂直于其法线。垂线的点积为零。最后，

```
N dot (P -  B) = (N dot P - N dot B) 
    = n_x x + n_y y + n_z z - (n_x b_x + n_y b_y + n_z b_z) = 0 
```

在最后一行你可以识别

```
a = n_x   b = n_y    c = n_z   d = -(n_x b_x + n_y b_y + n_z b_z) 
```

如前所述。

# elmah - HttpTaskAsyncHandler 和 HTTP 上下文

> ID：14136638
> 
> 赞同：2
> 
> 时间：2013-01-03T10:05:29.497
> 
> 标签：elmah, asp.net-4.5, httptaskasynchandler

我刚刚开始学习 Task 的工作原理，并得到一个有趣的案例。我有**HttpTaskAsyncHandler**但如果我在 ProcessRequestAsync 中的代码调用某些任务，我将无法访问 HttpContext

```
 public class MyAsyncHandler : HttpTaskAsyncHandler, IReadOnlySessionState
    {
        public override async Task ProcessRequestAsync(HttpContext context)
        {
            //can use HttpContext here   
            await MyJob("data");
            //can use HttpContext here
        }

      public async Task MyJob(string data)
        {
            var func = Task.Factory.StartNew(() => Process(data));
            await func;
        }

        public string Process(string context)
        {
             **//can't use HttpContext here**
            Elmah.ErrorSignal.FromCurrentContext().Raise(ex);   
        }
} 
```

有可能修复吗？我知道 Process 方法会在其他方面调用，但无论如何。谢谢/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:24:18.200

您是正确的，您的任务中不存在 HttpContent ，因为它位于单独的线程中。因此，您需要在 Process 方法（新线程）中访问创建 Elmah 的新实例。您可以按照上一个问题中的第二个或第三个答案，[在控制台应用程序中使用 Elmah](https://stackoverflow.com/questions/841451/using-elmah-in-a-console-application)来完成您想要的。

# graph - Neo4j - 为图遍历添加逻辑

> ID：14136657
> 
> 赞同：2
> 
> 时间：2013-01-03T10:06:37.000
> 
> 标签：graph, neo4j, reachability, graph-traversal

简而言之，我的问题是——我是否可以修改 Neo4j 使用的遍历逻辑——在可达性计算期间，如何控制哪些边被遍历，哪些不被遍历。

详细描述：

我正在考虑从我们当前的数据库迁移到 neo4j，我想知道 neo4j 是否适合以下任务：

我们有大约 1000 万个简单节点的大图——它们的属性只有一个 id。
我们也有 3 种边缘 - “标准”、“打开”和“关闭”。"opening" 和 "closeing" 也有一个 "color" 属性，所以它们是匹配的。每个“开放”边都有一个匹配的“关闭”边“。例如，有一个颜色为“3”的开放边缘，所以也有一个颜色相同的关闭边缘。

我们需要解决两个节点之间的可达性问题，其中遍历规则相当简单：您可以随意通过标准边，也可以根据需要通过开放边，同时保持访问的“开放”边的顺序堆栈但是（这是棘手的部分）当你来到一个有几个“关闭”边缘的交叉点时，你必须穿过与遇到的最后一个“打开”边缘匹配的关闭边缘，然后从堆。

例如：

a -[标准]->B-[打开颜色：3]->C-[标准]->D-[关闭颜色：3]->E
还有
D-[关闭颜色：4]->F

请注意，D 有两个“闭合”边缘，颜色不同。根据上面定义的规则，A 可以访问 E，因为颜色堆栈的顶部有 [3]。
然而，A 无法到达 F。

可以为这样的图遍历逻辑配置 neo4j 吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:41:09.523

这可以通过实现您自己的 PathExpander 并传递给 TraversalDescription 来实现。正如 Michael Hunger 指出的那样：BranchState 可用于优化您的扩展器，这样您就不必检查每次扩展的完整路径，而是每个遍历分支携带的某种归结（不可变的）状态。扩展器可以将修改后的状态传递给每个下一步。

不幸的是，neo4j 手册缺乏使用分支状态的好例子。这听起来像一个很棒的用法！

# mysql - 用逗号分隔字段值的MYSQL查询到数组中

> ID：14136658
> 
> 赞同：0
> 
> 时间：2013-01-03T10:06:36.940
> 
> 标签：mysql, select

有什么办法，我可以将字段值（逗号分隔）放入数组或临时表中。

例如：我有`following`带值的字段`3,7,23,45`

我想在不使用 PHP 的情况下将它们放入一个数组中，或者放入一个临时表中。

因为我需要根据这些值进行一些联合查询。

任何帮助表示赞赏

谢谢

我的表名是：鞋子字段名如下

样本表值是这样的

```
   +----------+------------+

   用户 ID 关注
   +----------+------------+
    1 5,7,8,12
    2 5,2,1,67

```

现在，当我搜索 userId 1 时，我想将值`5,7,8,12`放入数组或临时表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:53:52.340

*假设*您有一个包含多个列的表 PersonList，这是您要加入以获取关注者列表名称的表。例如

人表

```
ID   Name
1    AAA
2    BBB 
```

有一个名为[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)的mysql函数，例如

```
SELECT a.userID, GROUP_CONCAT(b.Name)
FROM   Follower a
       INNER JOIN Person b
        ON FIND_IN_SET(b.id, a.following) > 0
GROUP BY a.userID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d3052/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:18:28.447

这是可能的，虽然不是特别快。最好的解决方案是重新设计数据库，将逗号分隔的列表移动到不同的表中，每个逗号分隔的元素对应一行。

但是，如果您想要一种 SQL 方式来执行此操作，那么类似以下的操作将执行此操作（这依赖于有一个名为 integers 的表，其中包含一个名为 i 的列，有 10 行，值为 0 到 9）。

```
SELECT DISTINCT shoes.userId , substring_index(substring_index(shoes.FollowingIdString, ',', anInt), ',', -1) AS SplitField
FROM shoes,
(SELECT a.i+b.i*10+c.i*100 AS anInt
FROM integers a, integers b, integers c) Sub1
HAVING SplitField IS NOT NULL 
```

# javascript - Javascript 日期格式/解析 toString() 'Dec 1, 2012'

> ID：14136663
> 
> 赞同：0
> 
> 时间：2013-01-03T10:06:47.870
> 
> 标签：javascript, string, date, datetime, format

我需要一个解决方案来转换、解析或格式化 Date() toString，如“2012 年 12 月 1 日”。我发现这个例子是字符串：'mmm d，yyyy'，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:33:01.553

您的问题不清楚是否要将字符串转换为日期，反之亦然。

要将`Date`对象转换为您要查找的格式：

```
function dateToString(d) {
  var month = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][d.getMonth()];
  return month + ' ' + d.getDate() + ', ' + d.getFullYear();
} 
```

要将指定格式的字符串转换为 a `Date`：

```
function stringToDate(s) {
  var match = s.match(/^(\w{3}) (\d{1,2}), (\d{4})$/);

  if (match) {
    var month = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'].indexOf(match[1]);
    return new Date(match[3], month, match[2]);
  } else {
    return undefined;
  }
} 
```

请注意，`stringToDate`需要[`Array.indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf). 并非所有浏览器都支持此功能，但可以对其进行填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:09:49.337

我会建议你手动解析日期。

使用此功能：

```
// 以 yyyy-mm-dd 格式解析日期
函数解析日期（输入）{
   var 部分 = input.match(/(\d+)/g);
   // new Date(year, month [, date [, hours[, minutes[, seconds[, ms]]]]])
   返回新日期（部分[0]，部分[1]-1，部分[2]）；// 月份是从 0 开始的
}

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:11:35.160

```
dateFormat(Date(), "mmm d, yyyy"); 
```

不工作？

参考这里：

[http://blog.stevenlevithan.com/archives/date-time-format](http://blog.stevenlevithan.com/archives/date-time-format)

好吧，对不起 - 刚刚看到，你必须包括：

[http://stevenlevithan.com/assets/misc/date.format.js](http://stevenlevithan.com/assets/misc/date.format.js)

让它像第一个链接中描述的那样工作......

# c++ - cpp中运算符重载时比较值

> ID：14136664
> 
> 赞同：-1
> 
> 时间：2013-01-03T10:06:53.223
> 
> 标签：c++, operator-overloading

这可能是一个愚蠢的问题，但是在重载运算符时，例如：

```
bool operator<(const node & a, const node & b){
  return a.value() < b.value();
} 
```

它只是比较值并在 a 小于 b 时返回 true 对吗？这是正确的方法吗？

编辑：在每个人开始生气之前：我将它用于我的 A* 实现中的优先级队列，其中 fscore 较小的节点具有最高优先级

编辑2：我已将 > 更改为 < 因为它更好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:07:43.580

是的，人们会因此而讨厌你，因为你超载`<`但又回来`>`了......

# android - 如何从存储在 json 文件中的图像名称中动态获取图像？

> ID：14136667
> 
> 赞同：2
> 
> 时间：2013-01-03T10:07:07.140
> 
> 标签：android, json

我已将图像名称（例如“Image1.png”）存储在`JSON`文件中。我已经使用`JSONParser`. 但问题是我无法在`ImageView`.

这是我写的代码：

```
ImageView imageView = (ImageView)findViewById(R.id.imageViewer);
for (int i = 0; i < posts.length(); i++) {
    JSONObject c = posts.getJSONObject(i);
    String varImage = c.getString(TAG_IMAGE);
    int resId = getResources().getIdentifier(varImage, "drawable" , getPackageName());                      
    imageView.setImageResource(resId);
    //code to add data in hash map
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:17:50.190

你可以使用下面的代码来获取drawable id：

```
try {
    Class res = R.drawable.class;
    Field field = res.getField("drawableName"); //Here you put your image name getting from json file
    int drawableId = field.getInt(null);
}
catch (Exception e) {
    Log.e("MyTag", "Failure to get drawable id.", e);
} 
```

获取drawable id后，就可以设置drawable为ImageView了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:12:14.950

这必须有效。

```
ImageView imageView = (ImageView)findViewById(R.id.imageViewer);
for (int i = 0; i < posts.length(); i++) {
    JSONObject c = posts.getJSONObject(i);
    String varImage = c.getString(TAG_IMAGE).substring(0, c.getString(TAG_IMAGE).lastIndexOf('.');
    int resId = getResources().getIdentifier(varImage, "drawable" , getPackageName());                      
    imageView.setImageResource(resId);
    //code to add data in hash map
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:50:59.630

尝试使用以下代码，让我知道它是否适合您。

```
 imageview= (ImageView)findViewById(R.id.imageView);

for (int i = 0; i < posts.length(); i++) {

String varImage = c.getString(TAG_IMAGE);

 String uri = "@drawable/"+ "varImage";

int imageResource = getResources().getIdentifier(uri, null, getPackageName());

Drawable res = getResources().getDrawable(imageResource);
imageView.setImageDrawable(res);
} 
```

# installation - 如何在 Squeeze 中安装 imagemagick Wheezy 版本

> ID：14136668
> 
> 赞同：0
> 
> 时间：2013-01-03T10:07:10.480
> 
> 标签：installation, debian

我有一个小问题，因为我想在 Squeeze 中安装 Imagemagick，但我需要最新版本。Squeeze 最多只支持 6.6.0.4-3，但 Wheezzy 最多支持 6.7.7.10，我需要这个版本。问题是我要安装的地方是生产服务器，我无法将源更改为测试包。

我想我必须编译和安装它，但我不知道我是否会对依赖项有任何问题。

有人可以帮我吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:42:28.020

从理论上讲，在实践中，您也许可以使用 [backports.debian.org][1] 获得用于挤压的 wheezy 包，似乎没有 imagemagick 反向移植。

但是，您可能会很幸运地尝试自己构建包。以下内容未经测试（因为我手头没有任何挤压机），但应该可以工作（以 root 身份）

```
# echo "add backports.debian.org to your apt-sources (for debhelper >=9)"
# echo "deb http://backports.debian.org/debian-backports squeeze-backports main" >> /etc/apt/sources.list
# aptitude update
# aptitude install debhelper/backports
# dget -u --build http://ftp.de.debian.org/debian/pool/main/i/imagemagick/imagemagick_6.7.7.10-5.dsc 
```

由于缺少构建依赖项，最后一个很可能会失败：只需安装那些缺少的 deps（它们将在您收到的错误消息中打印）一旦构建成功，您最终会`.debs`在您的工作目录中找到一些，其中形成一整套令人喘不过气来的 imagemagick 包 - 为挤压而构建！

# parsing - haskell用额外信息解析数据结构

> ID：14136676
> 
> 赞同：1
> 
> 时间：2013-01-03T10:07:41.583
> 
> 标签：parsing, haskell, return-value

我无法从解析中提取额外信息。

我有自己的数据结构要解析，而且效果很好。我为我的数据结构编写了解析器，`Parse MyDataStructure`它解析所有关于`MyDataStructure`.

问题是在我正在解析的字符串中，与 混合`MyDataStructure`，还有一些关于我应该做什么`MyDataStructure`的信息当然不是 的一部分`MyDataStructure`，即我无法将这些信息存储在 里面`MyDataStructure`。

现在的问题是我不知道如何存储这些信息，因为在 Haskell 中我无法更改一些全局变量来存储信息，并且我的解析器的返回值已经是`MyDataStructure`.

有没有一种方法可以在不更改的情况下以某种方式存储这些新信息，`MyDataStructure`即包括存储额外信息的字段（但额外信息不是其中的一部分，`MyDataStructure`所以我真的很想避免这样做）？

我希望我已经足够清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:53:12.990

正如@9000 所说，您可以使用元组。如果您发现自己需要通过许多函数传递它，使用[State Monad](http://www.haskell.org/haskellwiki/State_Monad)可能会使事情变得更容易。

# android - 适用于 Android 应用的 APK 生成器

> ID：14136680
> 
> 赞同：0
> 
> 时间：2013-01-03T10:07:45.597
> 
> 标签：android, apk

我计划编写一个独立的 GUI 应用程序，使用它可以生成要安装在 android 手机上的 APK 文件。

生成的 android 应用程序屏幕将具有固定的布局。在运行应用程序时，必须从我添加到应用程序的数据库中填充和填充布局。尽管每个数据库的内容不同，但表字段将相同。IE; 每次我生成一个 APK 时，唯一需要进入应用程序的变量就是数据库。

有人可以让我知道我是否能做到这一点吗？如果是，请让我知道如何进行此操作。

任何疑问，澄清，请告诉我。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:33:03.093

似乎您只需要数据库有所不同。将代码编译为 APK。您的 GUI 应用程序将创建一个新数据库，并将替换 APK 中的数据库。您可以像访问 ZIP 或 JAR 文件一样访问 APK 文件。为此，您将需要一个 ZIP 框架。（有一个名为[DotNetZip](http://dotnetzip.codeplex.com/) for .NET 的框架，我发现它对这类工作非常有用。我不知道有任何 Java 框架。）请注意，如果您有任何代码签名，那必须在之后发生插入新数据库。

**选项 2**

根据您的用例，如果应用程序可以通过某种方式（通过用户/凭据/设备 ID 等）识别自己，您可以让它在第一次运行时下载必要的数据库/数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:47:39.397

如果您只是更改数据库，您可以在 GUI 中包含您的源代码，还包括 Android apk 工具，在您更改数据库后使用脚本运行 apk 构建和签名（这将只是某种类型的替换/资产/）

您可以在此处了解有关从命令行手动签名的所有信息：（即脚本）

[http://developer.android.com/tools/publishing/app-signing.html#releasemode](http://developer.android.com/tools/publishing/app-signing.html#releasemode)

# c - 在使用 autotools 编译的项目上运行 valgrind 会输出多个堆摘要

> ID：14136681
> 
> 赞同：4
> 
> 时间：2013-01-03T10:07:50.103
> 
> 标签：c, valgrind, autotools, automake, libtool

我正在使用 automake 编译一个项目，但是当尝试在生成的可执行文件上运行 valgrind 时，它的行为不像预期的那样，在实际执行我要检查的代码之前运行了 8 次，以及该部分的堆摘要的代码根本不显示：

```
==4601== Memcheck, a memory error detector
==4601== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.                                                                                            
==4601== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info                                                                                          
==4601== Command: ./launcher -g ../data/params.txt                                                                                                                  
==4601==                                                                                                                                                            
==4605==                                                                                                                                                            
==4605== HEAP SUMMARY:                                                                                                                                              
==4605==     in use at exit: 0 bytes in 0 blocks                                                                                                                    
==4605==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated                                                                                                   
==4605==                                                                                                                                                            
==4605== All heap blocks were freed -- no leaks are possible                                                                                                        
==4605==                                                                                                                                                            
==4605== For counts of detected and suppressed errors, rerun with: -v                                                                                               
==4605== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)                                                                                             
==4604==                                                                                                                                                            
==4604== HEAP SUMMARY:                                                                                                                                              
==4604==     in use at exit: 0 bytes in 0 blocks                                                                                                                    
==4604==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated                                                                                                   
==4604==                                                                                                                                                            
==4604== All heap blocks were freed -- no leaks are possible                                                                                                        
==4604==                                                                                                                                                            
==4604== For counts of detected and suppressed errors, rerun with: -v                                                                                               
==4604== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)                                                                                             
==4606==                                                                                                                                                            
==4606== HEAP SUMMARY:                                                                                                                                              
==4606==     in use at exit: 0 bytes in 0 blocks                                                                                                                    
==4606==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated                                                                                                   
==4606==                                                                                                                                                            
==4606== All heap blocks were freed -- no leaks are possible                                                                                                        
==4606==                                                                                                                                                            
==4606== For counts of detected and suppressed errors, rerun with: -v                                                                                               
==4606== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)                                                                                             
==4608==                                                                                                                                                            
==4608== HEAP SUMMARY:                                                                                                                                              
==4608==     in use at exit: 0 bytes in 0 blocks                                                                                                                    
==4608==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated                                                                                                   
==4608==                                                                                                                                                            
==4608== All heap blocks were freed -- no leaks are possible                                                                                                        
==4608==                                                                                                                                                            
==4608== For counts of detected and suppressed errors, rerun with: -v                                                                                               
==4608== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)                                                                                             
==4607==                                                                                                                                                            
==4607== HEAP SUMMARY:                                                                                                                                              
==4607==     in use at exit: 0 bytes in 0 blocks                                                                                                                    
==4607==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated                                                                                                   
==4607==                                                                                                                                                            
==4607== All heap blocks were freed -- no leaks are possible                                                                                                        
==4607==                                                                                                                                                            
==4607== For counts of detected and suppressed errors, rerun with: -v                                                                                               
==4607== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)                                                                                             
==4610==                                                                                                                                                            
==4610== HEAP SUMMARY:                                                                                                                                              
==4610==     in use at exit: 0 bytes in 0 blocks                                                                                                                    
==4610==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated                                                                                                   
==4610==                                                                                                                                                            
==4610== All heap blocks were freed -- no leaks are possible                                                                                                        
==4610==                                                                                                                                                            
==4610== For counts of detected and suppressed errors, rerun with: -v                                                                                               
==4610== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)                                                                                             
==4613==                                                                                                                                                            
==4613== HEAP SUMMARY:                                                                                                                                              
==4613==     in use at exit: 0 bytes in 0 blocks                                                                                                                    
==4613==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated                                                                                                   
==4613==                                                                                                                                                            
==4613== All heap blocks were freed -- no leaks are possible                                                                                                        
==4613==                                                                                                                                                            
==4613== For counts of detected and suppressed errors, rerun with: -v                                                                                               
==4613== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)                                                                                             
==4614==                                                                                                                                                            
==4614== HEAP SUMMARY:                                                                                                                                              
==4614==     in use at exit: 0 bytes in 0 blocks                                                                                                                    
==4614==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated                                                                                                   
==4614==                                                                                                                                                            
==4614== All heap blocks were freed -- no leaks are possible                                                                                                        
==4614==                                                                                                                                                            
==4614== For counts of detected and suppressed errors, rerun with: -v                                                                                               
==4614== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)                                                                                             
[Program output appears here, nothing appears afterwards] 
```

以前，当使用标准 makefile 进行编译时，没有此类问题，valgrind 会完全显示我的预期。`makefile.am`我用于编译目录的内容如下所示：

```
lib_LTLIBRARIES = libfile_util.la libmath_util.la libgeneral_util.la libparamlist.la
libfile_util_la_SOURCES = file_util.c file_util.h
libmath_util_la_SOURCES = math_util.c math_util.h
libgeneral_util_la_SOURCES = general_util.c general_util.h
libparamlist_la_SOURCES = paramlist.c paramlist.h

bin_PROGRAMS = launcher
generator_CFLAGS = -I/usr/include/muParser
generator_SOURCES = generator.c generator.h
estimator_SOURCES = estimator.c estimator.h
estimator_iwls_SOURCES = estimator_IWLS.c estimator.h
estimator_piecewise_SOURCES = estimator_IWLS.c estimator_piecewise.c estimator.h
estimator_baseline_SOURCES = estimator_IWLS.c estimator_piecewise.c estimator_baseline.c estimator.h
launcher_CFLAGS = -I/usr/include/muParser
launcher_SOURCES = launcher.c generator.c estimator.c estimator.h generator.h
generator_LDADD = libfile_util.la libmath_util.la libgeneral_util.la libparamlist.la
launcher_LDADD = libfile_util.la libmath_util.la libgeneral_util.la libparamlist.la
estimator_iwls_LDADD = libfile_util.la libmath_util.la libgeneral_util.la libparamlist.la
estimator_piecewise_LDADD = libfile_util.la libmath_util.la libgeneral_util.la libparamlist.la
estimator_baseline_LDADD = libfile_util.la libmath_util.la libgeneral_util.la libparamlist.la 
```

这个问题与 automake 编译文件的方式有关吗？如果是这样，我在makefile中做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T20:37:16.387

因为`launcher`使用的是 libtool 库，所以构建目录中的文件只是一个 shell 脚本，它设置必要的环境变量来运行真正的二进制文件（通常隐藏在`.libs/`. 在该脚本上运行 valgrind 将调试执行脚本的 shell，而不是您真正的二进制文件。

在 libtool 二进制文件中执行任何命令的正确方法`valgrind`是`gdb`通过以下`libtool`命令：

```
libtool --mode=execute valgrind ./launcher -g ../data/params.txt 
```

您甚至可以将其缩写为：

```
libtool e valgrind ./launcher -g ../data/params.txt 
```

无论如何`launcher`编译，这都将起作用。

相关的 libtool 文档在[这里](http://www.gnu.org/software/libtool/manual/html_node/Debugging-executables.html#Debugging-executables)。

# windows-phone-7 - Windows Phone 8 分辨率修复

> ID：14136686
> 
> 赞同：0
> 
> 时间：2013-01-03T10:08:09.807
> 
> 标签：windows-phone-7, resolution

当我在 HTC 8x 上测试 WP7.1 应用程序时，它在系统托盘区域中有一些“空白”空间。我知道这是因为有了新的决议，但如何解决呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:22:32.473

只需将您的项目升级到 Windows Phone 8 并重新编译即可。如果您的布局中没有以像素为单位的硬编码大小，它应该会自动填充额外的空间。

# java - 在 Facebook 上执行邀请功能时出错

> ID：14136692
> 
> 赞同：0
> 
> 时间：2013-01-03T10:08:27.587
> 
> 标签：java, android, facebook

我已经在 Android 中使用 Facebook 创建了邀请用户到应用程序，为此使用了 Facebook SDK 并添加了人们给出的代码，这是我的代码

```
 final ImageView facebook1 = (ImageView) findViewById(R.id.facebook1);
        facebook1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v){
           // Perform action on click
            Facebook facebook1 = new Facebook("APP_ID");

            Bundle paramsOut = new Bundle(), paramsIn = this.getIntent().getExtras();
            paramsOut.putString("message", paramsIn.getString("message"));
            Singlemenuitem.this.mFacebook.dialog(this, "apprequests", paramsOut, new InviteListener(this));
            mFacebook.dialog(Singlemenuitem.this, "apprequests", params, new DialogListener() {

                public void onComplete(Bundle values) {
                    final String returnId = values.getString("request");

                    if (returnId != null) {
                        Toast.makeText(getApplicationContext(),
                                       "Request sent " + returnId,
                                       Toast.LENGTH_SHORT).show();
                    }
                }
                public void onFacebookError(FacebookError error) {}

                public void onError(DialogError e) {}

                public void onCancel() {}
            });
        } 
```

但是代替“InviteListener”创建类时出错，如果创建了类，那么也会出错。有什么指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:46:03.280

```
Bundle iviteBundleparams = new Bundle();
        iviteBundleparams.putString("message",
                "invite message");

//TODO:// if you have friend id then you can pass friend id and the request will send this particular friend id
//myIviteBundleparams.putString("to",
                                    friendId);
final ImageView facebook1 = (ImageView) findViewById(R.id.facebook1);
    facebook1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                try {

                            mFacebook.dialog(context,
                                    "apprequests", iviteBundleparams,
                                    new AppRequestsListener());
                        } 

                } catch (Exception e) {
                    // Log.e("VIAMO_FRIENDS", "" + e.toString());
                    e.printStackTrace();
                }

            }
        });

/*
     * callback for the apprequests dialog which sends an app request to user's
     * friends.
     */
    public class AppRequestsListener extends BaseDialogListener {

        /* Default constructor definition */
        public AppRequestsListener() {
            // TODO Auto-generated constructor stub
        }

        public void onComplete(Bundle values) {
            if (values.size() < 1) {
                Toast toast = Toast.makeText(getApplicationContext(),
                        "App request cancelled", Toast.LENGTH_SHORT);
                toast.show();
            } else {
                Toast toast = Toast.makeText(getApplicationContext(),
                        "App request sent", Toast.LENGTH_LONG);
                toast.show();

            }
        }

        public void onFacebookError(FacebookError error) {
            Toast.makeText(getApplicationContext(),
                    "Facebook Error: " + error.getMessage(), Toast.LENGTH_SHORT)
                    .show();
        }

        public void onCancel() {
            Toast toast = Toast.makeText(getApplicationContext(),
                    "App request cancelled", Toast.LENGTH_SHORT);
            toast.show();
        }
    } 
```

//这里 mFacebook 是你的 Facebook 对象 //Facebook mFacebook = new Facebook(APP_ID);

# excel - 按第一个分隔符拆分字符串

> ID：14136693
> 
> 赞同：2
> 
> 时间：2013-01-03T10:08:31.557
> 
> 标签：excel, excel-formula

我有一列包含一长串文件夹和文件名。文件夹和文件名各不相同。我想将列中的文件名提取到另一列中，但我很难在 Excel 中执行此操作。

列数据示例：（更改文件和文件夹以隐藏不应公开的详细信息）

```
c:\data\1\nc2\media\ss\system media\ne\d - wnd enging works v5.swf
c:\data\1\nc2\media\ss\special campaigns\samns dec 2012\trainerv5.swf
C:\Local\Messages\17362~000000001~20131231235910~4.MUF
c:\data\1\nc2\media\ss\system media\tl\nd - tfl statusv4.swf
c:\data\1\nc2\media\ss\system media\core\ss_bagage v2.swf 
```

我知道我应该能够从右边搜索到“\”的第一次出现，但我不知道语法。

非常感谢

更新：

公式`=RIGHT(B2,LEN(B2)-SEARCH("\",B2,1))`应该可以工作，但它显示的结果不正确。但是，如果我将其更改为搜索“。” 它拉出文件扩展名。所以我缺少一个关键项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:15:06.797

```
=RIGHT(A1,LEN(A1)-FIND("~",SUBSTITUTE(A1,"\","~",LEN(A1)-LEN(SUBSTITUTE(A1,"\",""))))) 
```

将它复制到任何列中说b向下拖动，你就完成了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:20:57.763

如果您有很多文件要解析，VBA 是一个更有效的选择。创建一个模块并添加以下内容：

```
Function GetFileName(file As String) As String

    Set fso = CreateObject("Scripting.FileSystemObject")

    GetFileName = fso.GetFileName(file)

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:42:22.353

有几种不同的方法可以获取字符串中最后一个斜杠之后的文本，包括以下公式。在此示例中，H15 是包含要搜索的字符串的单元格。如果找不到斜线，则返回“-”（破折号）字符。

```
 =iferror(RIGHT(H15,LEN(H15)-SEARCH("|",SUBSTITUTE(H15,"/","|",LEN(H15)-LEN(SUBSTITUTE(H15,"/",""))))),"-") 
```

该公式首先查找字符串中的斜线数。LEN 给出字符串的总长度，使用 SUBSTITUTE 消除原始字符串中的斜线后不带斜线的字符串的 LEN - 区别在于斜线的数量。

然后，用标记字符（我使用“|”）替换最后一个斜杠。通过搜索标记，您可以找到斜线后的位开始的位置。字符串的总长度减去标记开始的位置会告诉您从右侧取多少个字符，然后您就可以这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-18T18:26:59.020

如果您需要更通用的字符串解析并愿意使用一点 VBA，您可以使用[Jamie Bull 在他对 SuperUser 上的这个问题的回答中](https://superuser.com/questions/483419/how-to-split-a-string-based-on-in-ms-excel)`split`建议的函数。

他的函数将使用您选择的任何字符将字符串拆分为段并返回您选择的任何段。

为了方便参考，我在这里复制了 Jamie 的函数：

```
Function STR_SPLIT(str, sep, n) As String
    Dim V() As String
    V = Split(str, sep)
    STR_SPLIT = V(n - 1)
End Function 
```

# dynamics-crm-2011 - 通过在 CRM 2011 中的表单上添加其他实体的注释来删除注释的自动保存功能

> ID：14136696
> 
> 赞同：0
> 
> 时间：2013-01-03T10:08:37.510
> 
> 标签：dynamics-crm-2011, crm, autosave

在 CRM 2011 中，注释会自动创建并附加到失去焦点事件的主记录。要求是删除此自动保存功能。只有在主表单打开之前，用户才能编辑笔记。新添加的注释只有在保存主表单后才能保存。例如，如果用户添加一个便笺并关闭浏览器或不保存主表单，则该便笺不应附加到主记录，新便笺应被丢弃。

我正在考虑以下解决方案：

1.  创建新的自定义实体 TempNotesHolder

2.  与我们需要此功能的实体创建 1:N 关系，例如案例实体

3.  将实际案例的笔记部分设为只读（这是必需的，一旦创建笔记，用户就不想编辑/删除笔记的功能）

4.  为Case的创建事件编写插件并为TempNotesHolder创建一条记录并将其与case关联（TempNotesHolder中的RegardingId字段=incidentId）这将确保一个Case始终只有一个关联的TempNotesHolder记录。CRM 2011 中无法确保一个实体记录在关联实体中只有一个记录，即 1:1 关系。至少我不知道路。让我知道是否有人知道它。

5.  在案例表单上，在案例的注释部分下方添加一个 IFrame

6.  在案例表单加载事件中，使用 fetchXml 获取与案例关联的 TempNotesHolderId。（案例实体中没有引用关联的 TempNotesHolder 的实际字段，因此需要使用 fetchXml。我们可以如何将关联的 TempNotesHolderId 添加到案例实体，并放置该字段在 Case 表单上，使其隐藏，以避免 fetchXml)

7.  准备 url 以仅显示 TempNotesHolder 记录的注释。(/_controls/notes/notesdata.aspx?EnableInlineEdit=false&EnableInsert=true&id=&ParentEntity=

8.  将此 url 设置为新添加的 IFrame，以便关联 TempNotesHolder 的注释显示在 IFrame 中。它还将具有链接“添加新注释”。

9.  用户可以将不直接添加到案例记录的注释添加到 TempNotesHolder。

10.  接下来在Case的预保存事件上开发插件，并检查TempNoteHolder中是否有任何注释，如果有，将这些注释移动到Case记录中，并删除TempNoteHolderId的注释。这样，笔记将仅在主表单保存时保存到主记录。

11.  要在向 TempNotesHolder 添加少量注释后处理浏览器关闭事件，请在 Case pre Retrieve 事件上编写插件，检查关联的 TempNotesHolderId 是否存在任何注释，如果存在则删除这些注释。（由于 TempNotesHolderId 上有注释，这意味着由于某种原因这些注释没有移动到实际案例记录中，我们不再需要它们，所以删除它们。这将确保加载案例时，TempNotesHolder 注释部分始终为空白）

上述解决方案在第 8 步之前都很好。当我尝试在 TempNotesHolder 中添加注释时，它给了我错误，“TempNotesHolder 中不存在记录”。然后我检查了那个 GUID，当我为 TempNotesHolder 创建注释时，我很失望地知道 CRM 正在使用 IncidentId。然后我追踪了创建笔记的实际代码，以找出为什么它使用 IncidentId 而不是 TempNotesHolderId。我在“_static/_controls/notes/notes.htc”函数名“UpdateNote”中找到了以下代码

xml="0"+CrmEncodeDecode.CrmXmlEncode(value)+""+_parentCrmFormSubmit.crmFormSubmitId.value+""+this.parentEntityType+""+CrmEncodeDecode.CrmXmlEncode(currentTitle)+""+this.userId+""

CRM 在创建注释时将 _parentCrmFormSubmit.crmFormSubmitId.value 作为 objectid。

现在我坚持这个问题。任何克服这个阻碍问题的想法都值得赞赏。也欢迎任何其他主要要求的替代解决方案。

Pravin Pujari（Microsoft Dynamics CRM 2011 开发人员）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:16:41.437

我建议将解决方案简化如下：

1.  向 Case 添加一个名为 new_notetext 的字段。

2.  针对案例实体上的 Pre-Create 和 Pre-Update 消息创建一个插件。

3.  在插件中，输入 new_notetext 中的任何内容，并使用该文本向 Case 实体添加注释。然后清除字段 new_notetext，以便记录不会保存任何内容。

应该可以正常工作并且实现起来要简单得多。

# jquery - 每次从jQuery重启

> ID：14136700
> 
> 赞同：0
> 
> 时间：2013-01-03T10:08:55.373
> 
> 标签：jquery, each

我正在做一个 jQuery 幻灯片并预加载图像，然后将它们添加到另一个数组中。但是，我需要让幻灯片正常工作。我包括小提琴链接：http: [//jsfiddle.net/z6qkH/](http://jsfiddle.net/z6qkH/)。

所以你可能会问怎么了，幻灯片有效吗？是的，但我需要让它优化，因为现在它几乎因为一些循环问题而崩溃？我在 foreach 循环之后运行 SlideShow() 函数（我想）但这不起作用，因为我在开始时遇到了巨大的滞后。我想从头开始运行这个方法。我需要为此使用for循环吗？

```
 var img_load = new Array();

     img_load[0] = 'http://img.youtube.com/vi/KobO2FZYMtA/mqdefault.jpg';
     img_load[1] = 'http://img.youtube.com/vi/6FjdbO-CGC4/mqdefault.jpg';
     img_load[2] = 'http://img.youtube.com/vi/h-_cN3_zGuI/mqdefault.jpg';
     img_load[3] = 'http://img.youtube.com/vi/rPf0CTptt8o/mqdefault.jpg';

        /**
         * Foreach loop
         */
             function SlideShow()
             {
                $.each(img_load, function(i, val) { 
                $("#sImage").animate({opacity: 0.0}, 1000);
                /**
                 * Queue function will place the event in queue
                 * Changing image src after the above animate function is completed
                 */
                $("#sImage").queue(function(){
                    $("#sImage").attr("src", val);
                    $("#sImage").dequeue();                
                });

                $("#sImage").attr("src", val).animate({opacity: 1.0}, 1000);   

                /**
                 * Queue function will place the event in queue
                 * Here, queue function is used to hold the changing image for 1 second display
                 */            
                $("#sImage").queue(function(){                 
                    setTimeout(function(){
                        $("#sImage").dequeue();
                    }, 1000);
                });
            });
            SlideShow(); // Not good for some reason. I want to loop from start
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:50:27.703

我不得不说我不会真正采用这种方法进行轮播，但是网上有数百万的教程，所以我不会在这个问题上讨论它。您的问题是您在循环中触发整个函数，然后再次触发该函数等。

对您来说最快的解决方法是检查数组长度并仅在最后触发它。

在这里查看小提琴[http://jsfiddle.net/z6qkH/2/](http://jsfiddle.net/z6qkH/2/)

var img_load = new Array();

```
 img_load[0] = 'http://img.youtube.com/vi/KobO2FZYMtA/mqdefault.jpg';
 img_load[1] = 'http://img.youtube.com/vi/6FjdbO-CGC4/mqdefault.jpg';
 img_load[2] = 'http://img.youtube.com/vi/h-_cN3_zGuI/mqdefault.jpg';
 img_load[3] = 'http://img.youtube.com/vi/rPf0CTptt8o/mqdefault.jpg';

    /**
     * Foreach loop
     */
         function SlideShow()
         {
            var count = 0;
            $.each(img_load, function(i, val) {
            $("#sImage").animate({opacity: 0.0}, 1000);
            /**
             * Queue function will place the event in queue
             * Changing image src after the above animate function is completed
             */
            $("#sImage").queue(function(){
                $("#sImage").attr("src", val);
                $("#sImage").dequeue();                
            });

            $("#sImage").attr("src", val).animate({opacity: 1.0}, 1000);   

            /**
             * Queue function will place the event in queue
             * Here, queue function is used to hold the changing image for 1 second display
             */            
            $("#sImage").queue(function(){                 
                setTimeout(function(){
                    $("#sImage").dequeue();
                    if((img_load.length-1) == count){
                        SlideShow();
                    }
                           count++;
                }, 1000);
            });
        });

    }

$(document).ready(function()
{
    SlideShow();
});​ 
```

# r - ggplot2时间序列绘图：如何省略没有数据点的时段？

> ID：14136703
> 
> 赞同：17
> 
> 时间：2013-01-03T10:09:01.960
> 
> 标签：r, ggplot2

我有一个包含多天数据的时间序列。在每一天之间有一个没有数据点的时段。在使用 绘制时间序列时如何省略这些时间段`ggplot2`？

如下图所示的一个人工示例，我怎样才能摆脱没有数据的两个时期？

代码：

```
Time = Sys.time()+(seq(1,100)*60+c(rep(1,100)*3600*24, rep(2, 100)*3600*24, rep(3, 100)*3600*24))
Value = rnorm(length(Time))
g <- ggplot() 
g <- g + geom_line (aes(x=Time, y=Value))
g 
```

![在此处输入图像描述](../Images/6850e61f3504fcc4dabae91ad84867f0.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-03T10:23:38.520

首先，创建一个分组变量。在这里，如果时间差大于 1 分钟，则两组不同：

```
Group <- c(0, cumsum(diff(Time) > 1)) 
```

现在可以使用`facet_grid`和 参数创建三个不同的面板`scales = "free_x"`：

```
library(ggplot2)
g <- ggplot(data.frame(Time, Value, Group)) + 
  geom_line (aes(x=Time, y=Value)) +
  facet_grid(~ Group, scales = "free_x") 
```

![在此处输入图像描述](../Images/9f01656e7dbebc4b3c3b2638d93ae6ef.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T10:23:34.417

问题是 ggplot2 怎么知道你有缺失值？我看到两个选项：

1.  `NA`用值填充你的时间序列
2.  添加一个表示“组”的附加变量。例如，

    ```
    dd = data.frame(Time, Value)
    ##type contains three distinct values
    dd$type = factor(cumsum(c(0, as.numeric(diff(dd$Time) - 1))))

    ##Plot, but use the group aesthetic
    ggplot(dd, aes(x=Time, y=Value)) +
          geom_line (aes(group=type)) 
    ```

    给

    ![在此处输入图像描述](../Images/6bd3e22b5cdc5372a51ba16d7e422b4d.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T10:26:48.977

csgillespie 提到了 NA 填充，但更简单的方法是在每个块之后添加一个 NA：

```
Value[seq(1,length(Value)-1,by=100)]=NA 
```

其中 -1 避免了警告。

# linq - 使用 BLToolkit 的 SQL 请求和链接请求中的差异响应

> ID：14136705
> 
> 赞同：0
> 
> 时间：2013-01-03T10:09:08.217
> 
> 标签：linq, linq-to-sql, bltoolkit

我正在使用 BLToolkit 并发现了一个有趣的行为。我不明白为什么在链接中使用相同的请求会给我不同的结果： SQL 请求：

* * *

```
select TOP 1 * from table where  coverCode='1+4' 
                                             and effectiveDate <='20130103' 
                                              and  maxValue >= '1000'  
                                             order by maxValue asc, effectivedate desc 
```

* * *

该表实际上有两个结果：

*   A) (id): 1ffbe215-ff0e-47dd-9718-4130ffb62539 (maxValue): 1000 (effDate):2011-01-01 (price):40

*   B) (id): b787a74e-696b-493d-a4bc-5bb407e231b3 (maxValue):1000 (effDate):2011-01-01 (price):80

SQL 请求给了我 A 结果。同时使用Linq的请求：

```
db.Rate
   .Where(x=>x.coverCode == "1+4"
           && x.effectiveDate <= '20130103'
            && x.MaxValue >= '1000')
            .OrderBy(x => x.MaxValue)
            .ThenByDescending(x => x.effectiveDate) 
```

这个请求给了我 B 结果。谁能解释 linq 请求中的原因或问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:28:46.657

您可能想`db.LastQuery`在执行 LINQ 代码后检查您的权限。您将看到生成的 SQL，并且可以将其与您真正想要的 SQL 进行比较。

# batch-file - 如何在我的批处理脚本中获取中央时间？

> ID：14136707
> 
> 赞同：2
> 
> 时间：2013-01-03T10:09:14.280
> 
> 标签：batch-file

我必须基本上使用取决于当前中心时间的 if 条件。如何调用当前 CT ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:12:56.920

请参考[此批处理脚本](http://adminspeak.wordpress.com/tag/batch-script-time-zone/)来审核/添加/设置 Windows 机器上不同时区的时间。为了更方便访问，我在脚本下方发布：

```
@echo off
TITLE Check/Set Time Zone Configuration
COLOR 17

:OSCHK
FOR /F "tokens=4-5 delims=, " %%g IN ('wmic os get caption ^|find /I "Windows"') DO (IF /I "%%g"=="2003" (set OSVER=%%g) ELSE (IF /I "%%g"=="2008" (IF "%%g%%h"=="2008R2" (set OSVER=%%g%%h) ELSE set OSVER=%%g)))
FOR /F "tokens=3 delims= " %%g IN ('wmic os get caption ^|find /I "Windows"') DO (IF /I "%%g"=="7" set OSVER=%%g)

IF /I "%OSVER%"=="" (goto OSWARN) ELSE (goto TZRVW)

:OSWARN
echo.
echo.
echo *************************************
echo WARNING
echo *************************************
echo.
echo This script is designed to run on the following
echo Windows operating systems only:
echo Servers – 2003, 2008, 2008 R2
echo Clients – Windows 7
echo.
goto END

:TZRVW
cls
echo.
echo The time zone on this machine is:
FOR /F "skip=1 tokens=*" %%g IN ('wmic timezone get description ^|find " "') Do (@echo %%g)
goto TZQRY

:TZQRY
echo.
SET TZQRY=
SET /P TZQRY=Do you need to change the Time Zone? (y/n/q to quit): %=%
echo.
IF /I "%TZQRY%"=="y" (goto TZSEL) ELSE (IF /I "%TZQRY%"=="n" (goto END) ELSE (IF /I "%TZQRY%"=="q" (goto END)))
IF /I NOT "%TZQRY%"=="y" (IF /I NOT "%TZQRY%"=="n" (IF /I NOT "%TZQRY%"=="q" goto TZQRY0))

:TZQRY0
echo.
echo You made an invalid entry – please try again.
echo.
pause
goto TZRVW

:TZSEL
cls
echo.
echo Which Time Zone should this machine have?
echo 1\. Pacific Time
echo 2\. Mountain Time
echo 3\. Arizona
echo 4\. Central Time
echo 5\. Eastern Time
echo 6\. Other

echo.
SET SYSTZ=
SET /P SYSTZ= %=%
IF /I "%SYSTZ%"=="1" (goto TZPAC) ELSE (IF /I "%SYSTZ%"=="2" (goto TZMTN) ELSE (IF /I "%SYSTZ%"=="3" (goto TZARZ) ELSE (IF /I "%SYSTZ%"=="4" (goto TZCEN) ELSE (IF /I "%SYSTZ%"=="5" (goto TZEAS) ELSE (IF /I "%SYSTZ%"=="6" (goto TZOTH))))))
IF /I NOT "%SYSTZ%"=="1" (IF /I NOT "%SYSTZ%"=="2" (IF /I NOT "%SYSTZ%"=="3" (IF /I NOT "%SYSTZ%"=="4" (IF /I NOT "%SYSTZ%"=="5" (IF /I NOT "%SYSTZ%"=="6" (goto TZSEL0))))))

:TZSEL0
echo.
echo You have made an invalid entry – please try again.
echo.
pause
goto TZSEL

:TZPAC
IF /I "%OSVER%"=="2003" (control timedate.cpl,,/Z Pacific Standard Time) ELSE (IF /I "%OSVER%"=="2008" (tzone -Zone Pacific Time) ELSE (IF /I "%OSVER%"=="2008R2" (tzutil /s "Pacific Standard Time") ELSE (IF /I "%OSVER%"=="7" (tzutil /s "Pacific Standard Time"))))
goto TZRVW

:TZMTN
IF /I "%OSVER%"=="2003" (control timedate.cpl,,/Z Mountain Standard Time) ELSE (IF /I "%OSVER%"=="2008" (tzone -Zone Mountain Time) ELSE (IF /I "%OSVER%"=="2008R2" (tzutil /s "Mountain Standard Time") ELSE (IF /I "%OSVER%"=="7" (tzutil /s "Mountain Standard Time"))))
goto TZRVW

:TZARZ
IF /I "%OSVER%"=="2003" (control timedate.cpl,,/Z US Mountain Standard Time) ELSE (IF /I "%OSVER%"=="2008" (tzone -Zone Arizona) ELSE (IF /I "%OSVER%"=="2008R2" (tzutil /s "US Mountain Standard Time") ELSE (IF /I "%OSVER%"=="7" (tzutil /s "US Mountain Standard Time"))))
goto TZRVW

:TZCEN
IF /I "%OSVER%"=="2003" (control timedate.cpl,,/Z Central Standard Time) ELSE (IF /I "%OSVER%"=="2008" (tzone -Zone "Central Time (US & Canada)") ELSE (IF /I "%OSVER%"=="2008R2" (tzutil /s "Central Standard Time") ELSE (IF /I "%OSVER%"=="7" (tzutil /s "Central Standard Time"))))
goto TZRVW

:TZEAS
IF /I "%OSVER%"=="2003" (control timedate.cpl,,/Z Eastern Standard Time) ELSE (IF /I "%OSVER%"=="2008" (tzone -Zone Eastern Time) ELSE (IF /I "%OSVER%"=="2008R2" (tzutil /s "Eastern Standard Time") ELSE (IF /I "%OSVER%"=="7" (tzutil /s "Eastern Standard Time"))))
goto TZRVW

:TZOTH
echo.
echo Control Panel will now open so you
echo can set the time zone manually.
start control timedate.cpl
echo.
pause
goto TZRVW

:END
echo Exiting script…
echo.
ping localhost -n 5 >NUL
EXIT 
```

希望能帮助到你！

# c - 通过 ssh 从远程终端获取提示

> ID：14136712
> 
> 赞同：0
> 
> 时间：2013-01-03T10:09:38.557
> 
> 标签：c, ssh

我有一个简单的程序测试，它获取一个数字作为输入并在控制台上打印相同的数字。

```
#include<stdio.h>
int main(void)
{
   int i;
   printf("Test Pgm \n");
   printf("Enter a no:");
   scanf("%d",&i);
   printf("No Inputted:%d \n",i);
   return 0;
} 
```

//以上程序位于10.220.5.xx（不同机器）

```
##gcc -o test test.c 
```

在通过 ssh 调用另一台机器的测试 pgm frm 时，我在执行的机器上没有得到任何提示。

```
$ ssh user@10.220.3.xx '/home/user/test'
user@10.220.3.xx's password 
```

输入密码后，我什至看不到“Test Pgm”。如何远程获取提示并输入值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:13:45.983

尝试`fflush(stdout);`在`scanf()`.

此外，您必须检查 的返回值`scanf()`，如果给定非数字文本，它可能无法转换输入：

```
fflush(stdout);
if(scanf("%d", &i) == 1)
  printf("Number input: %d\n", i); 
```

# oracle - 在 Ubuntu 12.04.1 LTS 上安装 Oracle Database 11g Express Edition

> ID：14136713
> 
> 赞同：5
> 
> 时间：2013-01-03T10:09:39.840
> 
> 标签：oracle, installation, ubuntu-12.04

我一直在努力在 Ubuntu 12.04.1 LTS 版本上安装 Oracle 11g Express Edition。

我已按照以下步骤操作：

1.  [从 Oracle网站](http://www.oracle.com/technetwork/products/express-edition/downloads/index.html)下载 11g 速成版

2.  在组 dba 下创建了一个新用户“oracle”。使用它执行以下步骤。

3.  解压 oracle-xe-11.2.0-1.0.x86_64.rpm.zip 然后将 rpm 转换为 Ubuntu 包

    ```
    sudo alien --scripts -d oracle-xe-11.2.0-1.0.x86_64.rpm 
    ```

4.  创建文件并添加[此处](http://meandmyubuntulinux.blogspot.in/2012/05/installing-oracle-11g-r2-express.html?showComment=1357195285714#c4393074524447658792)`/sbin/chkconfig`指定的条目

5.  创建`/etc/sysctl.d/60-oracle.conf`并添加了与上述相同链接中指定的条目。

6.  以下步骤：

    *   `ln -s /usr/bin/awk /bin/awk`
    *   `mkdir /var/lock/subsys`
    *   `touch /var/lock/subsys/listener`
7.  `sudo dpkg --install oracle-xe_11.2.0-2_amd64.deb`（第 3 步中生成的 .deb）

8.  `sudo /etc/init.d/oracle-xe configure`（保留默认值）

9.  `~/.bashrc`在文件中设置以下环境变量

    ```
    export ORACLE_HOME=/u01/app/oracle/product/11.2.0/xe
    export ORACLE_SID=XE
    export NLS_LANG=`$ORACLE_HOME/bin/nls_lang.sh`
    export ORACLE_BASE=/u01/app/oracle
    export LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH
    export PATH=$ORACLE_HOME/bin:$PATH 
    ```

10.  以下步骤：

    ```
    chown -R oracle:dba /var/tmp/.oracle
    chmod -R 755 /var/tmp/.oracle
    chown -R oracle:dba /tmp/.oracle
    chmod -R 755 /tmp/.oracle 
    ```

11.  `sudo service oracle-xe start`（我在这一步中没有看到任何问题）

12\. sqlplus / as sysdba 并得到以下

> SQL*Plus：2013 年 1 月 3 日星期四 09:41:58 发布 11.2.0.2.0 生产版
> 
> 版权所有 (c) 1982, 2011, Oracle。版权所有。
> 
> **连接到空闲实例。**

现在在 SQLplus 上执行任何 SQL 语句时，我最终会出现以下错误

```
SQL> select * from dual;
select * from dual
*
ERROR at line 1:
ORA-01034: ORACLE not available
Process ID: 0
Session ID: 0 Serial number: 0 
```

我增加了[此处指定的交换内存](http://meandmyubuntulinux.blogspot.in/2011/09/installing-1-gb-swap-without.html)

* * *

```
 free -m 
```

* * *

```
 total       used       free     shared    buffers     cached
Mem:          1652       1596         56          0         53       1356
-/+ buffers/cache:        186       1466
Swap:         2943          0       2943 
```

你能在这里指导我吗？我一无所知。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T12:14:28.360

终于，经过一天的奋斗

这些成功了。

```
sudo rm -rf /dev/shm
sudo mkdir /dev/shm
sudo mount -t tmpfs shmfs -o size=2048m /dev/shm 
```

确保在配置数据库之前执行这些操作。

# php - php 数组到 xml 的转换，即使是嵌套数据

> ID：14136714
> 
> 赞同：4
> 
> 时间：2013-01-03T10:09:40.973
> 
> 标签：php, xml, arrays

我有一个需要转换为 xml 格式的数组。

```
[name] => ABC
[email] => email@email.com
[phones] => Array
                (
                 [phone] => Array
                          (
                                [0] => Array
                                    (
                                        [mobile] => 91454599193
                                        [land] =>  9999999 
                                    )

                                [1] => Array
                                    (
                                        [mobile] => 54520199193
                                        [land] =>  9999999 
                                    )

                                [2] => Array
                                    (
                                        [mobile] => 90424249194
                                        [land] =>  5555555 
                                    )

                                [3] => Array
                                    (
                                        [mobile] => 44224199195
                                        [land] =>  8888888 
                                    )

                            )
) 
```

我希望它采用以下格式

```
<name>ABC</name>
<email>email@email.com</email>
 <phones>
 <phone>
   <mobile>545450199193</mobile>
   <land>9999999</land>
</phone>
 <phone>
   <mobile>575199193</mobile>
   <land>9999999</land>
</phone>
</phones> 
```

请帮帮我....

这是我的函数，我是这样写的。我面临的问题是有数字的索引必须在 XML 节点中显示文本。例如：- 在电话数组下方，有索引 [0]、[1]。我希望在我的 XML 页面中将 [0]、[1] 替换为`<phone>`..

```
 function array_to_xml($value, &$xml_student_info) {
  foreach($value as $key => $value) {
    if(is_array($value)) {
        if(!is_numeric($key)){
            $subnode = $xml_student_info->addChild("$key");
            array_to_xml($value, $subnode);
        }
        else{
            array_to_xml($value, $xml_student_info);
         }
       }
        else {
            $xml_student_info->addChild("$key","$value");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:12:49.557

您可以使用递归来解决您的问题。递归可以很好地处理嵌套数据。

为此，您可以创建一个将值添加到父 XML 元素的函数。

然后该函数调用自身以防找到嵌套数据。然后它将首先将子元素添加到父元素，然后将添加的新元素作为父元素调用自身。

如果要添加的数据只是一个字符串，它仍然会创建孩子，但直接添加字符串值并离开。那是叶节点，最多在外面。

然后 add 函数只需要读取您解析的数据并找出要处理的四种情况中的哪一种：

1.  只需添加一个带有字符串值的新元素（命名元素的字符串）
2.  添加多个具有相同名称的新元素（命名元素的 0-n 索引数组）
3.  添加一个新子代，然后在其中添加 N 个新子代（命名元素的键控数组）
4.  将 N 个新子代添加到父代（编号（未命名）元素的键控数组）

对于这个答案，我认为使用匿名函数尝试一下会很好。为了让它递归，它需要引用自己。然后可以将它包装在另一个函数中，该函数将允许创建和导入一个`SimpleXMLElement`允许轻松创建 XML 的函数。进一步包装一次甚至允许将 XML 生成为字符串，但是我将其保留在外部以使用法清楚：

```
require('inc/simplexml_pretty_print.php');

$xml      = new SimpleXMLElement('<root/>');
$importer = $createArrayImporter($xml);
echo simplexml_pretty_print($importer($array)); 
```

在此示例`$array`中是您问题中的数组。它包含这四种情况，这些情况在函数中处理，当在上面的示例中`$add`调用时，将返回包装在另一个匿名函数中。`$createArrayImporter()`

在进入之前，让我们回顾一下输入数组：

```
$array = [
    'name'   => 'ABC',
    'email'  => 'email@email.com',
    'phones' =>
    [
        'phone' =>
        [
            [
                'mobile' => '9000199193',
                'land'   => ' 9999999 ',
            ],
            [
                'mobile' => '9000199193',
                'land'   => ' 9999999 ',
            ],
            [
                'mobile' => '9000199194',
                'land'   => ' 5555555 ',
            ],
            [
                'mobile' => '9000199195',
                'land'   => ' 8888888 ',
            ],
        ],
    ],
]; 
```

这将产生的输出：

```
<?xml version="1.0"?>
<root>
  <name>ABC</name>
  <email>email@email.com</email>
  <phones>
    <phone>
      <mobile>9000199193</mobile>
      <land> 9999999 </land>
    </phone>
    <phone>
      <mobile>9000199193</mobile>
      <land> 9999999 </land>
    </phone>
    <phone>
      <mobile>9000199194</mobile>
      <land> 5555555 </land>
    </phone>
    <phone>
      <mobile>9000199195</mobile>
      <land> 8888888 </land>
    </phone>
  </phones>
</root> 
```

以及如何递归函数：

```
$add = function (SimpleXMLElement $subject, $key, $value) use (&$add) 
```

主题是要向其中添加数据的 XML 元素，键是数组中的键，值也是可以嵌套或不嵌套的值。

因此，考虑到最直接的情况，您的键控（所有数组索引都是字符串）数组应该添加到根元素中。

```
 case $isKeyed:
            foreach ($value as $oneof_key => $oneof_value) {
                $add($subject, $oneof_key, $oneof_value);
            } 
```

这将传递嵌套的值。例如，下一层的第一个是`[name] => ABC`，所以是一个键控字符串：

```
 case $isString && $hasKey:
            return $subject->addChild($key, $value); 
```

这只是添加了带有作为键的字符串值的子元素。

下一个案例是

```
[phones] => Array
     (
         [phone] => Array
             (
                 ... 
```

这是一个命名元素的键控数组：

```
 case $isKeyed && $hasKey:
            $subject = $subject->addChild($key);
            // fall-through intended 
```

它需要将自己的键添加为与`$isString && $hasKey`案例相当的子元素，但随后需要进一步处理它的数组值。这也是具有索引子项（0-N 作为索引）的键控数组的嵌套情况，因此可以添加多个具有相同名称的元素：

```
 case $isKeyed:
            foreach ($value as $oneof_key => $oneof_value) {
                $add($subject, $oneof_key, $oneof_value);
            }
            return true; 
```

它将通过这种情况，并为没有键但只是编号的键控数组创建第四种情况。

这也是为什么我写他是三个半的情况，最后两个在彼此之间共享一些部分。

将其包裹在一个闭包中使其更易于访问，我将在这里仅在一个小示例中进行概述：

```
$createArrayImporter = function (SimpleXMLElement $subject) {

    $add = function (SimpleXMLElement $subject, $key, $value) use (&$add) {

         ...

    };

    return function (Array $array) use ($subject, $add) {

        $add($subject, null, $array);
        return $subject;
    };
}; 
```

所以这可以开始。您可以阅读我的[Gist of mine](https://gist.github.com/4445046)中的完整代码。

您在以下答案中找到了一个类似的示例，但更多是面向对象的，它也通过递归解决了这个问题：

*   [php：将数组导出到 xml 麻烦](https://stackoverflow.com/a/13219372/367456)

数组的格式——即使它看起来很相似——实际上与你的不同。

对于更多的指针，有：

*   [如何将数组转换为 SimpleXML](https://stackoverflow.com/q/1397036/367456)

它处理不同类型的数组到 XML 的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:54:01.523

问题是您不能在一个数组或对象中拥有相同的键。在 simplexml 的情况下，有一个保存 xml 的对象。解决方案是自己构建xml。

# ios - 从其他上下文更改后如何刷新我的 fetchedresultcontroller

> ID：14136717
> 
> 赞同：0
> 
> 时间：2013-01-03T10:09:47.603
> 
> 标签：ios, core-data, nsfetchedresultscontroller

在多上下文核心数据方面苦苦挣扎，我会很高兴得到任何帮助。

同步操作完成后，调用此块：

```
[[SyncEngine sharedEngine]setFinishedSyncCompletionBlock:^{
        //---setting FRC to nil did refresh tableview but it is kinda slow
       //  self.fetchedResultsController=nil;
        [self loadRecordsFromCoreData];
        [self.tableView reloadData];

    }]; 
```

在这里我可以看到新的托管对象在上下文中。但是调用 [self.tableView reloadData]; 在此之后不会刷新我的 tableview，或者 (void)controllerDidChangeContent:(NSFetchedResultsController *)controller 不会触发。

```
- (void)loadRecordsFromCoreData {
    NSLog(@"here loadRecordsFromCoreData");
    [self.managedObjectContext.parentContext performBlock:^{
       //---this is also a trial for resetting FRC
       // [self.managedObjectContext reset];
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Event"];

        // Edit the sort key as appropriate.
        fetchRequest.sortDescriptors = @[ [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO] ];

        NSArray *objects = [self.managedObjectContext.parentContext executeFetchRequest:fetchRequest error:NULL];
        NSArray *objectIDs = [objects valueForKey:@"objectID"];

        [self.managedObjectContext performBlock:^{

            NSArray *objects = [self.managedObjectContext objectsWithIDs:objectIDs];
          //  self.fetchedResultsController.managedObjectContext = self.managedObjectContext;
            NSLog(@"objects: %lu", (unsigned long)objects.count);
        }];
    }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:47:25.970

发生这种情况是因为在执行 loadRecordsFromCoreData 的块之前调用了 reload table 方法。只需进行一些更改，`[self.tableView reloadData];`然后`NSLog(@"objects: %lu", (unsigned long)objects.count);`在 `self.managedObjectContext performBlock`块中调用。

# c++ - C++ 名称解析

> ID：14136720
> 
> 赞同：7
> 
> 时间：2013-01-03T10:09:56.793
> 
> 标签：c++, namespaces, using

我想知道 C++ 中的`namespace`and`using`基本上我想知道它们的区别并弄清楚如何以最好的方式使用它。

正如我所看到的，（至少）有三种方法可以解析类名，我不确定如何在其中进行选择：

1.  `using namespace <namespace>`
2.  `using <namespace>::<what_to_use>`
3.  `<namespace>::<what_to_use> <use_it>`

我想知道优势，特别是如果以一种或另一种方式涉及性能，如果它只是句法和偏好问题，或者是否还有其他我没有考虑过的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T10:13:05.233

首先是***[using namespace 指令](http://msdn.microsoft.com/en-us/library/aewtdfs3%28v=vs.80%29.aspx)***，它将所有符号名称从当前命名空间中的指定命名空间带入，无论您是否需要/使用它们。当然不可取。

二是***[使用命名空间声明](http://msdn.microsoft.com/en-US/library/014batd5%28v=vs.80%29.aspx)***。它只会在您当前的命名空间中带来指定的符号名称。优点是您不必每次都输入完全限定的名称。

第三是符号的***完全限定名称***。缺点是您必须在使用符号的任何地方键入完全限定名称。

显然，第二和第三是更合适的。它们中的任何一个都没有性能差异。唯一的区别是您输入的字符数量。只需根据您的编码标准指定的内容进行选择。

**编辑：**
正如@Jerry 指出的那样，将声明与 ADL（参数依赖查找）结合使用可能会导致不良影响。
您可以在我的一个答案中找到详细的解释：

**[关于 Koenig 查找如何与命名空间一起工作以及为什么它是一件好事的详细解释？](https://stackoverflow.com/a/8111750/452307)**

在部分下，
**为什么要批评 Koenig 算法？**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T10:29:08.753

有一种情况（诚然，有些不常见），您使用的表单确实可以产生影响，而您想要使用的表单*是* `using namespace foo`，并且它最常应用于`std`命名空间（即，您编写`using namespace std;`.

最明显的示例是您正在为用户定义的类型编写排序。这*可能*会应用于用户也定义了自己的类型`swap`。

如果他们定义了一个交换，你就会遇到这样一种情况，如果他们没有定义一个，你想使用他们的交换，但如果他们没有定义一个，则使用 std::swap 。如果您直接在代码中使用，那么即使该类型定义了自己的交换，`std::swap`您最终也会使用。`std::swap`相反，如果您直接为该类型指定一个交换，并且没有提供任何交换，您的代码将无法编译。

为了解决这个问题，您可以执行以下操作：

```
using namespace std;

template <class Iter>
void my_sort(Iter first, Iter last) {
    // ...
    if (*last < *first)
        swap(*first, *last);
} 
```

如果有一个（通过参数相关查找）`swap`，如果没有为该`std::swap`类型定义（通过`using namespace std;`

这可能会对性能产生影响——如果他们专门为他们的类型编写了交换，您通常可以期望这是因为这样做，他们可以提供更好的性能。这意味着显式指定`std::swap`可能会起作用，但可能会导致性能下降。

否则，这几乎完全是方便和可读性的问题——我最喜欢给出全名（例如，`std::swap`），除非在上面这样的情况下，其中（在我编写代码时）至少有两种可能性可能是首选，我想给编译器足够的余地来选择正确的。

我发现使用声明/指令有用的另一次是命名空间非常嵌套的时候。如果您每次都使用完全限定的名称，Boost（举一个明显的例子）有一些名称太长而无法方便使用。对于（现在，谢天谢地，大部分已过时）Boost Lambda 库尤其如此，您在其中使用`_1`了占位符，`boost::lambda::placeholders::_1`如您坚持使用完全限定名称。这首先会破坏使用 lambda 库的大部分目的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T10:15:32.653

没有任何性能增益或损失。所有调用和变量都在编译时解析。

三者之间的选择有些主观。是的，`using namespace <ns>;`有时会因为污染全局命名空间而皱眉，*但*我认为用于小文件是安全的。

我倾向于将第二个用于测试目的，我预计会发生冲突，但我会在之后将其删除。这可能会变得更加混乱，因为您最终可能会得到限定名称和非限定名称的组合：

```
vector<std::string> x; 
```

因为您`using std::vector;`在顶部有 a，但没有`using std::string;`.

我更喜欢第三个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T10:18:34.587

对代码性能的影响为零，这纯粹是编译时的事情。它可能（理论上）对编译时间有一些影响，但我怀疑这会达到可衡量的比例。

`using namespace std`（或任何其他名称空间）绝对要避免在头文件中，它可以包含在任何地方，并且在其中引入符号可能会导致歧义。

通常，命名空间的存在是为了避免名称冲突并`using namespace`破坏此目的。也是如此`using the_namespace::some_id`，程度较轻。您的问题没有明确的答案，但我通常遵循以下规则：

1.  **永远不要**放入`using namespace`头文件。
2.  避免`using namespace`and `using`，除非它可以节省大量的打字。必要时使用命名空间别名（即`namespace abbrv = some_really::long_and::nested_namespace;`）。
3.  尝试限制`using`: 您可以将其放入函数和块以及命名空间范围中。也就是说，如果您的 .cpp 文件中有日志记录功能，请将`using std::cout;`and `using std::endl;`（或您正在使用的任何内容）放入函数体，而不是文件范围。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T10:14:27.373

主要原因是它可能导致歧义（对于编译器和人类阅读器），它还可能减慢编译本身的速度（但这并不是第一件事那么大的问题）

# java - 将许多“if else”语句转换为更简洁的方法

> ID：14136721
> 
> 赞同：112
> 
> 时间：2013-01-03T10:10:07.173
> 
> 标签：java, design-patterns

我的代码在这里检测是否`mimeType`等于某个[MIME](http://en.wikipedia.org/wiki/MIME)类型，如果是，它将进行一定的转换

```
public void convertToMp3(File src, File target,String mimeType){
    if(mimeType.equals("audio/mpeg")){
        ...
    }else if(mimeType.equals("audio/wav")){
        mp3ToWav();
    }else if(mimeType.equals("audio/ogg")){
        ...
    }else if(...){
    ... //More if and else here
} 
```

我已经缩短了我的代码，因为它有很多*else if*语句，什么设计模式适合删除许多*if*和*else*或*else if*语句？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-01-03T10:17:11.310

你可以有一个`Converter`接口。然后您可以为每个 Mimetype 创建一个类，例如：

```
public interface Converter {

    public void convertToMp3();
    public void convertToOgg();

}

public class MpegConverter implements Converter {

    public void convertToMp3() {
        //Code here
    }

    public void convertToOgg() {
        //Code here
    }

} 
```

每个转换器都需要一个这样的类。然后你可以像这样设置一个地图：

```
Map<String, Converter> mimeTypeMap = new HashMap<String, Converter>();

mimeTypeMap.put("audio/mpeg", new MpegConverter()); 
```

然后你的`convertToMp3`方法变成这样：

```
Converter converter = mimeTypeMap.get(mimeType);
converter.convertToMp3(); 
```

使用这种方法，您将来可以轻松添加不同的转换器。

所有未经测试，可能无法编译，但你明白了

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-03T10:28:27.840

如果您使用的是 JDK7 之前的版本，您可以为所有[MIME](http://en.wikipedia.org/wiki/MIME)类型添加一个枚举：

```
 public static enum MimeTypes {
      MP3, WAV, OGG
  }

  public class Stuff {
      ...
      switch (MimeTypes.valueOf(mimeType)) {
          case MP3: handleMP3(); break;
          case WAV: handleWAV(); break;
          case OGG: handleOGG(); break;
      }
  } 
```

并查看 Stack Overflow 问题*[Java - Convert String to enum](https://stackoverflow.com/questions/604424/java-convert-string-to-enum)*，了解如何将字符串转换为枚举。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-08T13:59:48.117

考虑使用 Strategy 设计模式和 a`Map`来分派到适当的策略。如果您需要额外的功能，除了特定`mimeType`的转换，或者转换器是大而复杂的代码并且您希望将每个转换器放在自己的`.java`文件中时，这将特别有用。

```
 interface Convertor {
    void convert(File src, File target);
 }

 private static void convertWav(File src, File target) {
    ...
 }

 ...

 private static final Map< String, Convertor > convertors = new ...;
 static {
    convertors.put("audio/wav", new Convertor {
       void convert(File src, File target) {
          convertWav(src, target);
       }
    });
    convertors.put("audio/ogg", new Convertor {
       void convert(File src, File target) {
          convertOgg(src, target);
       }
    });
    ...
 }

 public void convertToMp3(File src, File target, String mimeType){
     final Convertor convertor = convertors.get(mimeType);
     if (convertor == null ) {
        ...
     } else {
        convertor.convert(src, target);
     }
 } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-03T10:14:49.313

如果您**为每种情况运行相同的方法，**您应该检查[状态模式](http://sourcemaking.com/design_patterns/state)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-09T22:43:53.490

这绝对是一种策略设计模式。但是您的总体设计存在很大问题。使用 String 来识别类型并不是一个好的编程习惯。仅仅是因为它很容易编辑，而且你可能会犯语法错误，然后整个下午都在寻找编程错误。您可以避免使用地图<>。

我建议如下：

1.  扩展类文件。新类向 File 类添加了一个新属性 FileType 和一个新方法 convertTo(FileType)。这个属性持有它的类型：“audio”，“wav”......并且再次不要使用字符串，使用枚举。在这种情况下，我将其称为 FileType。随心所欲地扩展文件：WavFile、AudioFile...
2.  使用 Strategy dp 创建您的转换器。
3.  使用 Factory dp 来初始化转换器。
4.  由于每个 File 都知道自己的类型和目标类型（使用 convertTo() 方法指定目标类型），它将调用工厂自动获取正确的转换器！！！

这种设计是可扩展的，您可以根据需要添加尽可能多的 FileType 和转换器。您投票的答案具有误导性！！！！编码和黑客之间有很大的区别。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-03T10:14:20.120

如果您正在使用`JDK 7`，则可以使用`switch-case`构造：

请参阅：[为什么我不能打开字符串？](https://stackoverflow.com/questions/338206/switch-statement-with-strings-in-java)

对于以前的版本，`if-else`是唯一的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T10:28:44.673

如果您不使用 Java 7，则可以创建一个`enum`并将该值与`switch`case 一起使用。然后你只需要传递枚举值（而不是文件，我不知道你为什么这样做）。它看起来也会更整洁。

这些应该有助于您想要做的事情：

```
 [Java Enum Examples][1] - 
 [Java Switch Case examples][2] 
```

# php - 如何添加/删除新的 MANY_MANY 关系

> ID：14136724
> 
> 赞同：2
> 
> 时间：2013-01-03T10:10:18.180
> 
> 标签：php, yii

如何`MANY_MANY`在 Yii 中添加/删除新关系？例如，我与用户和项目有多对多的关系。并且关系设置在表中`'project_user_assignment'`。我需要从表中添加/编辑/删除关系`'project_user_assignment'`。

**用户模型**

```
 public function relations()
  {
    return array('projects' => array(self::MANY_MANY, 'Project', 'project_user_assignment(user_id, project_id)'),
        );
 } 
```

**项目模型**

```
 public function relations()
{
    return array(
        'users' => array(self::MANY_MANY, 'User', 'project_user_assignment(project_id, user_id)'),
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:13:50.923

为 project_user_assignment 表创建一个模型，您可以使用该模型添加/删除/编辑记录

# unit-testing - JUnit 4 与 TestNG - 2013 - 2014 年更新

> ID：14136731
> 
> 赞同：88
> 
> 时间：2013-01-03T10:10:56.750
> 
> 标签：unit-testing, junit, testng

JUnit 4 和 TestNG 曾经具有可比性。两种测试框架的优缺点是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-20T11:07:58.987

我今天比较了 TestNG 和 JUnit4，我可以指出我在测试框架方面的有限经验的主要优势是，TestNG 有一种更优雅的方式来处理带有数据提供者概念的参数化测试。

据我所知，使用 JUnit4，您必须为要测试的每组参数创建一个单独的测试类（使用 运行`@RunWith(Parameterized.class)`）。使用 TestNG，您可以在单个测试类中拥有多个数据提供者，因此您也可以将单个类的所有测试保存在单个测试类中。

到目前为止，这是我唯一可以指出 TestNG 优于 JUnit4 的地方。

Intellij IDEA 包括对 TestNG 和 JUnit 的开箱即用支持。但是，Eclipse 仅支持开箱即用的 JUnit，并且需要安装一个 TestNG 插件才能使其工作。

但是，我在使用 TestNG 时遇到的一个更烦人的问题是，`PowerMockTestCase`如果您使用 PowerMock 来模拟测试中的依赖项，那么您的测试类需要扩展。显然，有一些方法可以配置您的测试框架在通过特殊方法或`testng.xml`套件定义使用 PowerMock 时需要了解的对象工厂，但目前这些方法似乎被破坏了。我不喜欢让测试类扩展测试框架类，这似乎很老套。

如果您不使用 PowerMock，这当然不是问题，但总而言之，我觉得 JUnit4 得到了更好的支持。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-06-24T15:44:36.620

根据我对这两个框架的经验，testng 有一些方便的功能，JUnit 团队多年来一直拒绝实施。出于这个原因，我更喜欢它而不是 JUnit。转换为 testng 很容易，因为它基本上支持 JUnit 中的几乎所有内容（甚至还有一个用于 eclipse 的转换器插件），由于缺少这些功能，转换回 JUnit 并不是那么好。

*   在 testng`@BeforeClass`中，方法不是静态的，而是在该类中的测试运行之前执行，而不是在加载测试类时执行（JUnit 行为）。我曾经有一个 JUnit 项目，其中所有的数据库测试（几十个）一开始就初始化了数据库，这是非常愚蠢的行为。在 JUnit 社区中，对此有很多支持和反对的争论。它的要点是每个测试方法都应该有自己的测试夹具，因此你不应该有一个非静态的 beforeAll 样式方法，因为这将允许你偷偷地设置一个实例变量，然后在你的所有测试中使用它。有效，但对于集成测试来说真的很烦人。TestNG 在这里为用户提供了选择。根据设计，Junit 没有，这很烦人。

*   Testng 数据提供者比等效的 JUnit 更灵活一些。您可以为每个测试指定哪个数据提供者方法应该提供输入，而不是像在 JUnit 中那样为整个类采用一种适合所有方法的方法。因此，您可以在一类中为您的测试提供正面和负面案例数据提供者。很高兴拥有。

*   你可以用`@Test`in testng 标记一个类，这意味着：每个公共方法都是一个测试。在 Junit 中，您需要`@Test`在每个方法上复制/粘贴。

hamcrest 与 JUnit 捆绑的方式以及 JUnit 与 testng 捆绑的方式都令人烦恼。maven 中有没有这个问题的替代罐子。

我对这两个框架的最大担忧是它们似乎都停止了发展。发布的频率越来越低，并且往往具有越来越少的值得注意的功能。例如，整个 BDD 运动似乎对这两个框架都没有什么影响。此外，JUnit 可以简单地采用我上面列出的大部分内容。JUnit 不能实现这些东西并没有很好的技术原因；JUnit 背后的人只是选择不实现这些东西。这两个项目似乎也缺乏对未来方向的愿景，而且他们似乎很高兴在过去几年里只做一些小的调整。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-06-12T07:30:48.013

我一直在寻找将 TestNG 切换到 JUnit 的充分理由，我发现Tomek Kaczanowski 的[这张](http://kaczanowscy.pl/tomek/sites/default/files/testng_vs_junit.txt.slidy_.html#%281%29)幻灯片很好地解决了这个问题。Tomek 是《[实用单元测试](http://practicalunittesting.com/)》一书的作者，这本书似乎很受开发人员和测试人员的尊重。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-30T12:45:01.543

如果您从事 Java/Scala 项目并且 Gradle 是您选择的构建工具，请记住`ScalaTest`框架只`JUnitRunner`需要运行您的 scala 测试。换句话说，您可以选择：

*   Java JUnit 测试 + Scala 测试与 JUnitRunner 一起运行 => 更好的 Gradle 集成
*   Java testNG 测试 + Scala 测试使用 Scala Runner 运行 => 差的 Gradle 集成，因为从 Gradle 的角度来看，scala 测试运行器是单个批量任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T09:56:28.627

您可以使用 Mockito 作为您的模拟框架。它与 TestNG 很好地集成。您无需扩展任何类即可将 Mockito 与 TestNG 一起使用。通过这种方式，您测试代码的耦合度较低，如果出于任何原因需要使用其他模拟框架，这样做很容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-13T15:09:44.120

简而言之..

如果您的范围仅限于精细的单元测试，它们之间没有依赖关系，那么可以使用 JUnit。

如果您的范围需要功能测试，可能/可能不需要测试之间的依赖关系和数据（参数）共享，那么选择 TestNG。此外，TestNG 可以进行类似于 JUnit 的单元测试。所以你可以有一套单元测试和一套功能测试。

# jquery - 奇怪的 jQuery 动画延迟

> ID：14136734
> 
> 赞同：0
> 
> 时间：2013-01-03T10:11:17.137
> 
> 标签：jquery, jquery-animate

我正在开发一个简单的功能，以在用户单击关闭按钮时隐藏消息。奇怪的是，当我使用这段代码时，一切正常，除了一个奇怪的 7 秒延迟。我将 div 设置为在 1000 毫秒内转换为 0 不透明度，然后更改 z-index 以将其放在后面的所有内容中。除了不透明度过渡的延迟之外，这一切都很好。使用此代码时：

```
$(".x").bind("click",function() {
    $('#holder').animate({opacity: "0"}, 1000, "easeOutQuart");
      setTimeout(function() {
        $('#holder').css('z-index','-1');}, 1000); 
```

我得到了大约 7 秒的无法解释的延迟。如果我将代码更改为：

```
$(".x").bind("click",function() {
    $('#holder').css('display','none');
          setTimeout(function() {
            $('#holder').css('z-index','-1');}, 1000); 
```

效果立竿见影。显然 setTimeout 函数对显示来说是过度的，但我只是表明它与我所知道的时间问题无关。

有些人问为什么不使用 fadeOut() 并且没有理由不使用，但这并没有改变延迟问题。使用此代码仍有大约 7 秒的延迟：

```
$(".x").click(function () {
  $("#holder").fadeOut("slow");
  }); 
```

我尝试了很多方法，包括在动画之前添加 .stop() 调用。虽然延迟令人困惑，但该功能作为一个整体工作。当您单击 .x 时，#holder div 消失（延迟后），然后 z-index 更改为在我的其余 div 后面。我对这个功能和方法很满意，只是很困惑为什么会出现如此严重的延迟。我能想到的唯一需要注意的其他项目是代码都在一个 php 文件中并通过 . 想不出为什么那会改变它。

关于这个有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:16:40.647

这应该有效：

```
$(".x").bind("click",function() {
    $('#holder').animate({opacity: "0"}, 1000, "easeOutQuart",function(){
        $(this).css('z-index',-1);
    });
}); 
```

我不明白在 opacity 属性上使用“easeOutQuart”的目的，也不知道您期望什么效果。顺便说一句，我建议你使用`fadeOut()`而不是动画。

**更新**

不确定您的问题是什么，但可以尝试一下，具体取决于您的 html 代码：

```
$(".x").click(function (e) {
  e.stopPropagation();
  $("#holder").fadeOut("slow");
  }); 
```

# c# - jQuery“”错误

> ID：14136735
> 
> 赞同：-2
> 
> 时间：2013-01-03T10:11:22.503
> 
> 标签：c#, javascript, jquery

我有一个关于在 C# 字符串中嵌入 javascript/jQuery 的问题。请参阅此代码中事件中的`hideQuestion`函数。`onclick`我将此作为字符串添加到 C# 中（为清楚起见，请忽略添加的换行符）：

```
content += "$('#_question101')
   .append(\"
      <div class='ui-grid-c'>
         <div class='ui-block-a'>
            <a id='_bEdit1' href='#Question_01_01'
               onclick='aQ101(); hideQuestion('Question1', 'Question2');'
               data-role='button'>
               Aanpassen
            </a>
         </div>
      </div>\"
   );"; 
```

因为我已经使用过`"`，`'`所以我不能在我的函数中使用它们。有谁知道我怎样才能让这个工作？该功能不起作用，因为我已经使用了两者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:15:26.413

您在附加的内容中没有任何双引号，因此您不必担心，只需停止像这样转义它们：

```
$('#_question101').append("<div class='ui-grid-c'><div class='ui-block-a'><a id='_bEdit1' href='#Question_01_01' onclick='aQ101(); \"hideQuestion('Question1', 'Question2'\")' data-role='button'>Aanpassen</a></div></div>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:16:48.277

像这样使用

```
$('#_question101').append("<div class='ui-grid-c'><div class='ui-block-a'><a id='_bEdit1' href='#Question_01_01' onclick='aQ101();hideQuestion(\"Question1\", \"Question2\");'  data-role='button'>Aanpassen</a></div></div>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:16:56.187

干得好

```
$('#_question101').append("<div class='ui-grid-c'><div class='ui-block-a'><a id='_bEdit1' href='#Question_01_01' onclick='aQ101(); hideQuestion(\'Question1\', \'Question2\')' data-role='button'>Aanpassen</a></div></div>"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T10:58:33.170

一些注意事项：

1.  JavaScript 实际上支持三种不同的引号：`'`、`"`和```. 当您必须有多个级别的转义时，您可以使用这些来获得良好的效果。

2.  JavaScript 允许您使用 . 转义引号`\`。由于您的 JavaScript 实际上是一个 C# 字符串，它*也*用`\`.

3.  随着所有这些转义和引用切换的进行，很难找出问题所在。如你所知，在尝试了一些引用选择和引用转义调整之后，你发出了有效的 HTML，但你的程序中有一个错误！

鉴于这些，我建议您做一些事情：

1.  每次尝试新事物时，*请直接查看网页中的原始 HTML 源代码*。在您验证它之前，甚至不要费心点击您的按钮。继续尝试将```其用作您的报价级别之一，但在再次发回此处之前请检查结果。

2.  退后一步，重新思考你是如何做到这一点的。您是否意识到维护嵌入在嵌入在 C# 字符串中的 JavaScript 中的 HTML 中的 JavaScript 是多么困难？严重地。尝试通过使用不同的容器、类或文件来分离所有不同的关注点。

    *   *您可以首先*在一个单独的变量中构建您的 JavaScript 或 HTML 片段，然后在将其捆绑到下一个外层时对该字符串进行转义，反复执行此操作，直到您最终获得 C# 字符串。
    *   您可以将 HTML 或 JavaScript 存储在您在 C# 代码中读取的资源文件中，从而完全解决转义问题。
3.  尝试将事件 JavaScript 与动态 JavaScript 分开。与其将 Javascript 代码内联`onclick="oneMoreLevelOfEscapedJavascriptHere()"`，不如使用`.on('click', fnname()`? 这是连接 javascript 事件的行业公认的最佳实践方式。

4.  最后，为什么不使用为 Web 脚本设计的允许出现未转义 HTML 的文字块的环境/语言呢？然后，您可以避免整个间接级别。如果您已经在使用带有 C# 的 ASP.Net，那么有一种方法可以不必先将 HTML 粘贴到字符串中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T10:19:12.050

您可以在其中使用字符转义`\`

```
onclick='aQ101(); hideQuestion(\"Question1\", \"Question2\");' 
```

对于更新：

`content += "$('#_question101').append('<div class=\"ui-grid-c\"><div class=\"ui-block-a\"><a id=\"_bEdit1\" href=\"#Question_01_01\" onclick=\"aQ101(); **hideQuestion(\\'Question1\\', \\'Question2\\');**\" data-role=\"button\">Aanpassen</a></div></div>');";`

1`"` 级：2`'` 级：3`\"` 级：4 级：`\\'`

# python - 正则表达式，包括带有换行符的最后一个单词

> ID：14136736
> 
> 赞同：0
> 
> 时间：2013-01-03T10:11:30.620
> 
> 标签：python, regex

您好我正在尝试使用 RegEx 将日志文件拆分为稍后进入数据库的组。出于某种原因，我无法让最后一组包含字符串的最后一个单词和换行符。

我正在解析的日志文件如下所示：

```
12:00:01 GRP this is a test1
12:02:03 TES here something else has happend
12:32:22 MCH This processe is finished 
```

* * *

我想把它们分成三组

```
Time
3-letter code
Text 
```

目前在Python中我正在使用这个：

```
def parse (s):
    mO = re.search ('([0-9][0-9]:[0-9][0-9]:[0-9][0-9]) (\w*) (\w.+) ',s)
    if mO:
     print "1: "+mO.group(1)
     print "2: "+mO.group(2)
     print "3: "+mO.group(3) 
```

我得到的结果是：

```
1: 12:00:01
2: GRP
3: this is a
1: 12:02:03
2: TES
3: here something else has
1: 12:32:22
2: MCH
3: This processe is 
```

不断丢失新行附加到的字符串中的最后一个单词。我尝试在所有变体中添加 \n\r 但经过 1 天的搜索完全丢失。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:16:14.437

在`'(\w.+) '`中， 急切地`+`捕获（`()`）所有（`.`）个字符，直到找到*最后一个*空格。

```
 # Extra tail whitepace removed   
   mO = re.search ('([0-9][0-9]:[0-9][0-9]:[0-9][0-9]) (\w*) (\w.+)',s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:18:58.850

如果它是格式正确的日志文件（所有行看起来都一样），我不会使用正则表达式使其过于复杂并使用普通拆分

```
def parse(s):
  time, code_3_letter, message = s.split(None, 2)
  # ... 
```

[把事情简单化！](http://en.wikipedia.org/wiki/KISS_principle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:21:04.760

我在正则表达式和日志解析方面有很多经验。（这是我工作的一部分）

您想要做的不是使用正则表达式来搜索整个文件，而是要将文件的行输入到正则表达式中。这将为您提供更好的性能，而不是将整个文件放在内存中，一次只有 1 行。然后正则表达式也可以使用`match`，它比其他任何东西都快得多。我会这样做：

```
import re

def parse_logs(file_path):
    results = []
    regex = re.compile(r'(\d\d:\d\d:\d\d) (\S\S\S) (.+)')
    with open(file_path) as f:
        for line in f:
            ms = regex.match(line.strip())
            if not ms:
                continue
            results.append([ms.group(1), ms.group(2), ms.group(3)])
    return results 
```

或者，为了更好的方法，把它变成一个生成器：

```
def parse_logs(file_path):
    regex = re.compile(r'(\d\d:\d\d:\d\d) (\S\S\S) (.+)')
    with open(file_path) as f:
        for line in f:
            ms = regex.match(line.strip())
            if not ms:
                continue
            yield (ms.group(1), ms.group(2), ms.group(3)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-20T17:19:10.197

一个更简单、更短的正则表达式：

```
[0-2][0-9](:[0-9]{2}){2} [A-z]{3} .*$ 
```

这匹配一个有效时间（基于您的输入格式），后跟一个空格、三个字母*、另一个空格，然后匹配所有内容，直到行尾。这将允许捕获“文本”部分，即使它包含标点符号等。

* [Az] 将匹配小写字母，如果不希望使用 [AZ] 代替

# oracle - 错误：ORA-01861：文字与格式字符串不匹配

> ID：14136738
> 
> 赞同：-1
> 
> 时间：2013-01-03T10:11:33.630
> 
> 标签：oracle

有人可以找到上述代码的错误吗：

```
INSERT INTO FMS_LOG (FL_ID,FL_USER_ID, FL_OFFICE_ID, FL_DATETIME,
                     FL_IP,FL_FISCAL_YEAR,FL_USER_NAME,FL_USER_ADDRESS) 
VALUES 
( 105, 18, 18, 
  TO_DATE('03/Jan/2013 15:51:33PM','DD/MON/YY HH:MI:SSAM'), 
 '127.0.0.1',
 '2069/70', 
 'dordhankuta', 
 'balaju' ); 
```

FL_DATETIME 具有字段类型**DATE**

这是抛出错误：

```
ORA-01861: literal does not match format string 
```

服务器端代码：

```
 $this->db->query("
    INSERT INTO FMS_LOG (FL_ID,FL_USER_ID, FL_OFFICE_ID, FL_DATETIME, FL_IP,FL_FISCAL_YEAR,FL_USER_NAME,FL_USER_ADDRESS) 
    VALUES 
        (
        $next_id,
        $userinfo[user_id], 
        $userinfo[user_office_id],
        TO_DATE('".date('d/M/Y H:i:sA', time()+20700)."','DD/MON/YY HH:MI:SSAM'),
        '$client_ip',
        '$fiscal_year',
        '$userinfo[user_full_name]',
        '$address'
        )        
    "); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:15:52.270

首先，15PM 不存在。二、岁月面具应该是`yyyy`，不是`yy`

这有效：

```
select  TO_DATE('03/Jan/2013 15:51:33','DD/MON/YYYY HH24:MI:SS') from dual; 
```

如果您想使用 AM/PM，请确保时间在 1 到 12 之间，这样可以：

```
select  TO_DATE('03/Jan/2013 5:51:33PM','DD/MON/YYYY HH:MI:SSAM') from dual; 
```

# windows-8 - 在 Win8 Pro 中启动 nginx 失败使用 bat 文件

> ID：14136743
> 
> 赞同：2
> 
> 时间：2013-01-03T10:11:39.527
> 
> 标签：windows-8, batch-file, nginx, mariadb

这是我的 .bat 文件。

```
@echo "start or stop nginx,mysql service"
@echo "1.start DB"
@echo "2.stop DB"
@echo "3.start nginx"
@echo "4.stop nginx"
@echo "5.quit"
@echo off
:choose
set /p st="Choose："
if /i "%st%"=="1" goto open_as
if /i "%st%"=="2" goto close_as
if /i "%st%"=="3" goto open_nm
if /i "%st%"=="4" goto close_nm
if /i "%st%"=="5" goto exit
:open_as
net start MariaDB
goto choose
:close_as
net stop MariaDB
goto choose
:open_nm
@echo "start Nginx....................."
start d:\server\nginx\nginx
@echo "startFastCGI..................."
start d:\Server\RunHiddenConsole d:\server\php5.3.16\php-cgi.exe -b 127.0.0.1:9000
d:\server\memcached -d start
goto choose
:close_nm
taskkill /f /im nginx.exe
taskkill /f /im php-cgi.exe
d:\server\memcached -d stop
goto choose
:exit
pause && exit 
```

此文件在 Win7 中正常工作，但在 Win8 Pro 中不起作用。

MariaDb 和 memcached 都是系统服务。我可以使用“管理员模式”启动它们，但启动 nginx 失败，而 php-cgi.exe 启动成功。当我不使用“管理员模式”时，MariaDb 和 memcached 启动都会失败。Nginx 和 php-cgi.exe 启动成功。

我如何以一种模式启动它们？

# facebook - 从 joomla 模块将文章分享到 facebook

> ID：14136745
> 
> 赞同：0
> 
> 时间：2013-01-03T10:11:42.370
> 
> 标签：facebook, joomla

我在 joomla 1.5 上有模块，这个模块内容图片，它有这样的文章链接：

`<a href="www.cc.com/index.php?id-22"><img src="....></a>`

所以我需要当用户点击这张图片分享文章`<a href="www.cc.com/index.php?id-22"><img src="....></a>`到 facebook 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:18:04.370

我希望你使用 Facebook Graph API

请参阅下面提到的链接以更好地理解 [http://developers.facebook.com/docs/reference/php/facebook-api/](http://developers.facebook.com/docs/reference/php/facebook-api/)

从此链接下载 PHP SDK [https://github.com/facebook/php-sdk](https://github.com/facebook/php-sdk)

然后是一个文件夹名称“examples”，它包含 2 个文件 1.) example.php 2.) with_js_sdk.php

在两个文件中，顶部的代码如下 // 创建我们的应用程序实例（将其替换为您的 appId 和密码）。

```
$facebook = new Facebook(array(
  'appId'  => '103562503147391',
  'secret' => 'c753579eb3e805d0155fc5542c54260d',
)); 
```

您需要从这里创建自己的应用程序[https://developers.facebook.com/apps](https://developers.facebook.com/apps)并获取您自己的**appId**和**secret**。

下面提到的代码将在您的 Facebook 墙上发布链接

```
<?php
/**
 * Copyright 2011 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may
 * not use this file except in compliance with the License. You may obtain
 * a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations
 * under the License.
 */

require '../src/facebook.php';

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
  'appId'  => 'APP_ID',
  'secret' => 'APP_SECRET',
));

// Get User ID
$user = $facebook->getUser();

// We may or may not have this data based on whether the user is logged in.
//
// If we have a $user id here, it means we know the user is logged into
// Facebook, but we don't know if the access token is valid. An access
// token is invalid if the user logged out of Facebook.

   if($user) {

      // We have a user ID, so probably a logged in user.
      // If not, we'll get an exception, which we handle below.
      try {
        $ret_obj = $facebook->api('/me/feed', 'POST',
                                    array(
                                      'link' => 'www.example.com',
                                      'message' => 'Posting with the PHP SDK!'
                                 ));
        echo '<pre>Post ID: ' . $ret_obj['id'] . '</pre>';

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $login_url = $facebook->getLoginUrl( array(
                       'scope' => 'publish_stream'
                       )); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   
      // Give the user a logout link 
      echo '<br /><a href="' . $facebook->getLogoutUrl() . '">logout</a>';
    } else {

      // No user, so print a link for the user to login
      // To post to a user's wall, we need publish_stream permission
      // We'll use the current URL as the redirect_uri, so we don't
      // need to specify it here.
      $login_url = $facebook->getLoginUrl( array( 'scope' => 'publish_stream' ) );
      echo 'Please <a href="' . $login_url . '">login.</a>';

    } 

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:35:02.047

将您的网站连接到 Facebook 后，您可以将此 onclick 事件链接到您的图片链接 =>

```
onclick="FB.ui({method: 'stream.share', display:'button', u: 'http://www.cc.com/index.php?id-22' }, null);" 
```

# xslt - 如何使用 xslt（单引号）输出 html5-video 编解码器？

> ID：14136753
> 
> 赞同：0
> 
> 时间：2013-01-03T10:12:12.597
> 
> 标签：xslt, html5-video

我有两个问题可能太简单了，但我没有得到它或在这里找到解决方案。希望也许有人可以帮助我:)

我想输出 html5-video 元素，它似乎是 mime 类型和编解码器的一部分，必须这样写：

```
<source src="mymovie.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/> 
```

类型属性以单引号 (!) 开头。如果我不尊重这一点并将其放在双引号中并将编解码器放在单引号中，则在某些情况下 Internet Explorer 9 无法加载电影（表示不支持编解码器）。

**第一个问题：**如何让 XSLT 只将该属性放在单引号中？

**第二个问题：**是否有人对 IE 和双引号类型属性有同样的问题？而且这样真的有必要吗，这不违反规则吗？

非常感谢每一个答案！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:13:13.637

我认为您不能对单个属性值强制执行序列化格式。某些 XSLT 处理器可能允许您定义在序列化结果树时使用的属性值分隔符。您使用哪种 XSLT 处理器？

而且我认为，如果您在 XSLT 代码中编写文字结果元素为

```
<source src="mymovie.mp4" type="video/mp4; codecs=&quot;avc1.42E01E, mp4a.40.2&quot;"/> 
```

然后在序列化结果树时，XSLT 处理器可以自由使用单引号或双引号作为属性分隔符，但如果它使用双引号，它将正确转义属性值中的引号，因此结果看起来像

```
<source src="mymovie.mp4" type="video/mp4; codecs=&quot;avc1.42E01E, mp4a.40.2&quot;"> 
```

在 HTML 输出方法中，任何 HTML5 解析器都应该很好地使用它。

# vbscript - HP Elite 8300 SFF - 更改 Bios 引导顺序 WMI

> ID：14136756
> 
> 赞同：2
> 
> 时间：2013-01-03T10:12:30.353
> 
> 标签：vbscript, wmi, boot, bios

我使用这个 vbscript 从 Windows 更改 Bios 引导顺序设置：

```
function ErrCode(oReturn)
    Dim strReturn
    Select Case oReturn
        Case 0 strReturn = "Success"
        Case 1 strReturn = "Not Supported"
        Case 2 strReturn = "Unspecified Error"
        Case 3 strReturn = "Timeout"
        Case 4 strReturn = "Failed"
        Case 5 strReturn = "Invalid Parameter"
        Case 6 strReturn = "Access Denied"
        Case Else strReturn = "..."
    End Select
      ErrCode= strReturn
    end function

    Set objWMIService = GetObject("winmgmts:{impersonationlevel=impersonat​e}//./root/HP/InstrumentedBIOS")
    Set colItems = objWMIService.ExecQuery("select * from HP_BIOSSettingInterface",,48)

    For each objItem in colItems
    objItem.SetBiosSetting oReturn, "Boot Order", "Network Controller,Hard Drive,ATAPI CD-ROM Drive"  ,"<kbd/>"
    if oReturn then
        wscript.echo "Boot Order" & " Can not be set, Error="  & ErrCode(oReturn)
        wscript.quit(oReturn )
    end if
Next 
```

它给了我错误消息 6: **Access is denied**。

此脚本适用于 HP DC7900 和我们拥有的其他 HP。我是本地管理员，我正在尝试使用 Windows 7 64 位。

有人可以帮帮我吗？为什么我会收到拒绝访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T16:17:22.607

这个问题通常是由两件事引起的：

1：您的 BIOS 上可能有密码。如果是这样，[这里有一个适用于 HP 的 BIOS 密码破解程序](http://code.google.com/intl/de/query/#q=hp-bios-password-cracker) ，如果您找不到密码，它可能会有所帮助。

2：确保您以管理员身份运行脚本。如果 UAC 未禁用，则 Windows 可能不会以管理员身份启动脚本。尝试从提升的命令提示符运行您的脚本。（点击开始，在搜索区域输入“CMD”，右击，选择以管理员身份运行）。通过从提升的命令提示符启动它，您应该避免任何 Windows 权限问题。

# mysql - 如何在 MySQL 中强制设置不正确或不存在的外键索引

> ID：14136757
> 
> 赞同：0
> 
> 时间：2013-01-03T10:12:33.507
> 
> 标签：mysql, database-design, indexing, foreign-keys, mysql-workbench

我有一个包含 3 行的简单表：一个短文本、它自己的 ID 和另一个对象的 ID。

我想失去与另一个对象的关联。我想将其 ID 设置为 0（这样的对象不存在）。由于其他原因，我不能使用 NULL。

请帮我在 MySQL Workbench 中设置表或行以允许执行此类操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:14:39.720

您不能“强制”违反外键的值。这就是外键的全部意义所在。

你必须要么

*   修复任何不喜欢`NULL`的值并将值设置为`NULL`（这就是它的用途，这是正确的方法），
*   创建一个 ID 为 0 的虚拟对象，以便参考有效，或者
*   完全删除外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:57:36.007

不要使用诸如零之类的虚拟值来指示不存在的值。处理可选关联只有两种正确的方法。第一种是使用空值来指示给定实例中没有关联。第二个是修改你的模式以符合第六范式。

在第六范式中，将有一个额外的表，其中仅包含您的两个 id。在没有关联的情况下，不会有行。就这么简单。

更彻底地研究 Erlang。要么 Erlang 能够处理 NULLS，要么 Erlang 不能处理 SQL。不管你喜不喜欢，NULLS 是 SQL 的一部分。

# ios - Xcode 管理器 .ipa 文件未显示正常选项

> ID：14136758
> 
> 赞同：0
> 
> 时间：2013-01-03T10:12:38.883
> 
> 标签：ios, cocos2d-iphone, ipa

我正在开发使用一些`cocos2d`动画的应用程序。所以我将其导入`cocos2d project`到我的`Xcode`. 但是当我给`Product -> Archive`我时，我得到了以下屏幕。像，`Save Built Products`和`Export as Xcode Archive`

![在此处输入图像描述](../Images/92bbd0e92e5664fbfce5e5563bf42f07.png)

我无法为我的`Archive`. 谁能帮我找出我做错了什么。

我发现它的发生是因为我的项目中有**多个目标**。我**从**`Manage Schemes`. _ 但我仍然使用相同的选项获取`.archive`文件。`organizer`如果我从我的项目中删除这些目标，我会收到如下错误

![在此处输入图像描述](../Images/41bef480748cae6a501d46a0690acfb3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:57:14.420

您需要更改 cocos2d 项目的构建设置。更改`Skip Install Flags`为`YES`。

更多信息在这里，[Xcode 4：创建 IPA 文件而不是 .xcarchive](https://stackoverflow.com/questions/5265292/xcode-4-create-ipa-file-instead-of-xcarchive)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:53:27.533

我通过删除`cocos2d-ios.xcodeproj`并添加了我需要的文件夹解决了这个问题。我尝试了同样的事情，但在我将所有文件添加到`cocos2d project folder`. 我从这个[链接](http://www.cocos2d-iphone.org/forum/topic/21293)得到了答案。以下文件夹是我从文件夹中添加`cocos2d` **的**

```
- cocos2d
 - CocosDenshion/CocosDenshion
 - CocosDenshion/CocosDenshionExtras
 - 外部/kazmath

```

谢谢。

# android - 尝试解析 JSON 数据时出现 android JSONException

> ID：14136759
> 
> 赞同：1
> 
> 时间：2013-01-03T10:12:50.290
> 
> 标签：android, json, exception

我使用下面的类来获取一些 JSON 数据。奇怪的是，我不能仅从我需要测试应用程序的 url 解析 JSON（服务器端不是我维护的）：如果您单击[此链接](http://vm2156.dunkel.de/radioappservice/rest/metadata/content/votes/hr1/null)，您将能够在浏览器中看到 JSON 数据。但是当我尝试以编程方式解析它时，它会抛出一个 JSONException。

```
 01-03 11:08:23.615: E/JSON Parser(19668): Error parsing data org.json.JSONException:    Value <html><head><title>JBoss of type java.lang.String cannot be converted to JSONObject 
```

我尝试使用[http://ip.jsontest.com/](http://ip.jsontest.com/) 和[http://api.androidhive.info/contacts](http://api.androidhive.info/contacts)对其进行测试，**效果很好**！仅在尝试从我的第一个链接解析 JSON 时引发异常。我认为这可能是服务器问题，但我可以用浏览器查看 JSON 数据.. 只是无法解释。

```
 public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

/* default constuctor*/
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

   /* get JSON via http request */
    try {

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    /* try to parse the string to JSON Object*/
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

 /* return JSON String */
    return jObj;

      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:19:27.210

使用 BufferedReader 方法将为您获取该页面的 HTML 源代码，这就是您在字符串中看到诸如 <html><head><title> 之类的 HTML 标记的原因。相反，使用 EntityUtils 来获取 JSON 字符串：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpGet httpGet = new HttpGet(url);

try {
    HttpResponse httpResponse = httpClient.execute(httpGet);
    HttpEntity httpEntity = httpResponse.getEntity();

    int status = httpResponse.getStatusLine().getStatusCode();

    if (status == HttpStatus.SC_OK) {
        String jsonString = EntityUtils.toString(httpEntity);
        try {
            JSONObject jsonObject = new JSONObject(jsonString);
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

# javascript - 一次运行 2 个动画

> ID：14136770
> 
> 赞同：2
> 
> 时间：2013-01-03T10:13:35.360
> 
> 标签：javascript, jquery, animation, jquery-animate

我正在为孩子们创建一个射击游戏，其中数字从下到上，他们必须点击与问题匹配的正确的那个。

我目前使用此代码开始从底部到顶部移动的数字

```
var bWidth = $('#' + id).width();
var bHeight = $('#' + id).css('top', '400px').fadeIn(1000).animate({
    'top': '-100px'
}, 7000).fadeOut(1000); 
```

问题是当用户得到正确答案时，我会使用另一个动画来显示它是正确的，错误答案也是如此。

```
$(".character").click(function () {
    $(this).stop();
    if ($(this).hasClass("clock")) {
        if ($(this).hasClass("up")) {
            $(this).effect("explode", 300);
            count += 5;
        } else if ($(this).hasClass("down")) {
            $(this).effect("bounce", {
                times: 2,
                direction: 'left'
            }, 300, function() {
                $(this).slideUp('fast');
            });
            count -= 5;
        }
        $('#timer').text(count);
    } else {
        if ($(this).hasClass("wrong")) {
            $(this).effect("bounce", {
                times: 2,
                direction: 'left'
            }, 300, function() {
                $(this).slideUp('fast');
            });
            miss++;
            attempted++;
            $("#miss").html("Wrong: " + miss);
        } else {
            $(this).effect("explode", 300);
            hit++;
            attempted++;
            $("#hit").html("Right: " + hit);
            correctlabels();
        }
    }
}); 
```

我的问题是，当我单击数字时，在第二个动画开始之前会有一个很大的停顿，有时甚至根本不起作用。

我想知道是否有人可以向我展示解决此问题的方法，以便它顺利运行。谢谢！

这是一个帮助的小提琴：http: [//jsfiddle.net/pUwKb/19/](http://jsfiddle.net/pUwKb/19/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:36:00.647

`queue: false`在您的 animate() 选项中使用：

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

# xcode - 用 Xcode 连接犰狳

> ID：14136776
> 
> 赞同：3
> 
> 时间：2013-01-03T10:13:46.873
> 
> 标签：xcode, linker, armadillo

我有一个现有的大型 Xcode 项目，现在我想将犰狳库添加到它。

[http://arma.sourceforge.net/](http://arma.sourceforge.net/)

我已经下载了它（使用 macports）并使用 Cmake（就像一个 C++ 终端应用程序）让它工作。我没有在我的大型项目（iPad 应用程序）中使用 Cmake，所以我尝试链接库。我查看了使用 cmake 工作的 xcode-project 文件，并将其添加到我的项目中。

添加：头文件搜索路径：/opt/local/include 库搜索路径：/opt/local/lib 其他链接器标志：-larmadillo

我还将 libarmadillo.3.4.0.dylib 添加到“使用二进制文件链接库”

```
 ld: warning: ld: warning: ignoring file /opt/local/lib/libarmadillo.3.4.0.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (armv7s): /opt/local/lib/libarmadillo.3.4.0.dylibld: warning: ignoring file /opt/local/lib/libarmadillo.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (armv7s): /opt/local/lib/libarmadillo.dylib
    ignoring file /opt/local/lib/libz.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (armv7s): /opt/local/lib/libz.dylib

    Undefined symbols for architecture armv7s:
      "_deflateInit_", referenced from:
  _compress_data in libTestFlight.a(tf_compression.o)
      "_deflateEnd", referenced from:
  _compress_data in libTestFlight.a(tf_compression.o)
      "_deflate", referenced from:
  _compress_data in libTestFlight.a(tf_compression.o)
    ld: symbol(s) not found for architecture armv7s
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T14:49:13.630

尝试将 libz.lib 添加到您的构建目标：

> 使用库构建阶段将 libz 添加到您的链接二进制文件中

1.  在项目导航器中选择您的项目
2.  选择要为其启用 SDK 的目标
3.  选择构建阶段选项卡
4.  使用库阶段打开链接二进制文件
5.  单击 + 添加新库
6.  在列表中找到 libz.dylib 并添加
7.  重复步骤 2 - 6，直到您要使用 SDK 的所有目标都具有 libz.dylib

来源：[https ://testflightapp.com/sdk/doc/1.1/](https://testflightapp.com/sdk/doc/1.1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-12T01:25:38.540

我最近遇到了一个类似的问题——用 Xcode 链接犰狳。

我会告诉你我是如何修复它的。两个步骤是必要的：

1）xcode需要“看到”文件`libarmadillo.dylib`（我的，位于`/usr/lib/`）——它与`libarmadillo.3.81.1.dylib`直接使用不同。

为此，请在 xcode 库（我的，位于`/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/lib/`）上创建指向该文件的链接。

总之： `$ sudo ln -s /usr/lib/libarmadillo.dylib /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/lib/libarmadillo.dylib`

2）现在我需要“告诉”xcode 在编译命令中包含这个库。

为了那个原因：

1.  打开您的项目（确保在创建上述链接后执行此操作）
2.  去`TARGETS`（我只有一个所以...）
3.  点击`Build Phases`标签
4.  找到'Link Binary With Libraries'并点击+（添加项目）
5.  在新打开的窗口类型上`armadillo`，现在你应该看到`libarmadillo.dylib`你面前的图书馆，只需添加它！

PS 在使用犰狳的头文件中，我使用完整路径包含它（在我的情况下，`#include "/usr/include/armadillo"`）

就是这样，我希望我能帮助你。

# javascript - 表单提交时未调用 Javascript 闭包函数

> ID：14136781
> 
> 赞同：0
> 
> 时间：2013-01-03T10:14:16.157
> 
> 标签：javascript, html, forms, javascript-events

这让我很困惑。我有一个文本框。你输入一些东西，然后按回车。Javascript 以单独的形式创建一个只读输入元素。文本输入框旁边是删除它们的按钮。该表单底部还有一个提交按钮，用于提交所有只读文本输入。

由于单击表单内的按钮将提交表单（我只想删除包含按钮及其相应文本输入的父 div），因此在提交表单时会调用一个函数。此函数确定按下了哪种类型的按钮（删除或提交）并采取相应措施。

问题来了。当按下删除按钮时，该函数`destinations.enter`永远不会被调用。我为解决这个问题所做的是创建一个名为的全局函数`submitDestinations`，该函数复制`destinations.enter`. 如果改为调用此函数，则一切都会顺利进行。

有谁知道为什么`destinations.enter`不会在提交时运行，但`submitDestinations`会？我想相信它与闭包有关，因为函数范围似乎是这两个函数之间的唯一区别。不过，这是我第一次使用闭包，对它们的了解还很有限。

Javascript：

```
var destinations = (function(){
    var max_destinations = 7;
    var counter = 0;

    function increment(){
        counter += 1;
        if(counter > max_destinations){
            throw 'Too many destinations. (Max 7)'
        }
    }
    function decrement(){
        counter += 0;
        if(counter < 0){
            alert('Cannot have less than 0 destinations..')
            throw 'Too few destinations. Get out of the console!'
        }
    }
    return {
        add : function(form){
            try{
                var formInput = form.elements[0];
                var destination = formInput.value;
                // Dont do anything if the input is empty
                if(destination == ""){
                    return false;
                }else{
                    // increment the destinations counter
                    increment();
                }
            }catch(err){
                alert(err);
                return false;
            }
            // add the text value to a visual element
            var elem = document.createElement('div');
            elem.setAttribute('class','destination');
            // create the input
            var input = document.createElement('input');
            input.setAttribute('id','dest'+String(counter));
            input.setAttribute('class','destinationText');
            input.setAttribute('style','border: none');
            input.setAttribute('name','destinations');
            input.setAttribute('readonly','readonly');
            input.setAttribute('value',destination);
            // create the remove button
            var button = document.createElement('button');
            button.setAttribute('onclick','this.form.submitted=this;');//'return destinations.remove(this);');
            button.setAttribute('class','removeButton')
            button.setAttribute('id','but'+String(counter))
            var buttonText = document.createTextNode('Remove');
            button.appendChild(buttonText);
            // add the elements to the div
            elem.appendChild(input);
            elem.appendChild(button);

            var parent = document.getElementById('destinationsDiv');
            parent.appendChild(elem);
            // clear the input box
            formInput.value = '';
            return false;
        },
        enter : function(form){
            alert('hi')
            var button = form.submitted;
            if(button.id != 'submitBtn'){
                return remove(button);
            }else{
                return true;
            }
            return false;
        },
        remove : function(button){
            try{
                decrement();
            }catch(err){
                // do not allow less than 0 counter
                alert(err);
                return false;
            }
            // remove the button's parent div altogether
            var toDelete = button.parentNode;
            toDelete.parentNode.removeChild(toDelete);
            return false;
        }

    }
})(); 
```

和html：

```
 <div>
            <form id='hi' onsubmit="return destinations.add(this);">
                <input type="text" value="" />
            </form>
            <!--form id='submitDiv' method="post" onsubmit="alert(this.submitted);return submitDestinations(this);"-->
            <form id='submitDiv' method="post" onsubmit="alert(this.submitted);return destinations.enter(this);">
                <div id='destinationsDiv'>
                    <div>
                        <input id="dest1" class="destinationText" style="border: none" name="destinations" readonly="readonly" value="aadasd" \>
                        <button onclick="this.form.submitted=this;" class="removeButton" id="but1" \></button>
                    </div>
                    <div>
                        <input id="dest2" class="destinationText" style="border: none" name="destinations" readonly="readonly" value="Hi Stackoverflow" \>
                        <button onclick="this.form.submitted=this;" class="removeButton" id="but2" \></button>
                    </div>
                </div>
                <input type="submit" id='submitBtn' onclick="this.form.submitted=this;"/>
            </form>
        </div> 
```

如果我将以下 javascript 函数添加到全局范围并改为调用它，则一切正常。这与`destinations.enter`

```
function submitDestinations(form){
    var button = form.submitted;
    if(button.id != 'submitBtn'){
        return destinations.remove(button);
    }else{
        return true;
    }
} 
```

我在 html 中更改的只是提交时调用的方法：

```
 <div>
            <form id='hi' onsubmit="return destinations.add(this);">
                <input type="text" value="" />
            </form>
            <form id='submitDiv' method="post" onsubmit="alert(this.submitted);return submitDestinations(this);">
            <!--form id='submitDiv' method="post" onsubmit="alert(this.submitted);return destinations.enter(this);"-->
                <div id='destinationsDiv'>
                    <div>
                        <input id="dest1" class="destinationText" style="border: none" name="destinations" readonly="readonly" value="aadasd" \>
                        <button onclick="this.form.submitted=this;" class="removeButton" id="but1" \></button>
                    </div>
                    <div>
                        <input id="dest2" class="destinationText" style="border: none" name="destinations" readonly="readonly" value="Hi Stackoverflow" \>
                        <button onclick="this.form.submitted=this;" class="removeButton" id="but2" \></button>
                    </div>
                </div>
                <input type="submit" id='submitBtn' onclick="this.form.submitted=this;"/>
            </form>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T20:03:59.033

原来有一个命名冲突。我创建的文本输入的 name 属性设置为“destinations”，与我在提交时调用的 javascript 对象同名。因此，“onsubmit”中的 javascript 试图引用 DOM 元素并在其上调用 enter，而不是引用我的 javascript 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:58:29.610

destinations.enter() 的实现有错误。它调用 remove() 来删除按钮，但名称“remove”未绑定在定义destinations.enter() 的范围内。

看起来destinations.remove() 似乎从未在其他地方调用过，因此最简单的解决方法是将其移至destinations 构造函数中的私有函数，而不是使其成为destinations 对象上的方法。

修改后的版本有效，因为您已将 submitDestinations() 的主体更改为调用destinations.remove()，它绑定在该范围内。

# iphone - 无法在 iphone 中以编程方式拨打电话

> ID：14136786
> 
> 赞同：0
> 
> 时间：2013-01-03T10:14:32.163
> 
> 标签：iphone, openurl

我已经像这样以编程方式完成了调用。

```
NSString *phoneNumber = [[self.arrCategory objectAtIndex:0]objectForKey:@"MOBILE"]; 

NSString *phoneURLString = [NSString stringWithFormat:@"tel:%@", phoneNumber];
NSURL *phoneURL = [NSURL URLWithString:phoneURLString];
[[UIApplication sharedApplication] openURL:phoneURL]; 
```

但我不能从 iphone 打电话。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:21:42.377

现在只需用您的代码替换此代码，可能是因为在 phoneno 或 phone url 中使用了空格，所以它没有被调用..使用此代码..

```
 NSString *phoneNumber = [[self.arrCategory objectAtIndex:0]objectForKey:@"MOBILE"];
    NSArray* telComponents = [phoneNumber componentsSeparatedByCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]];
    phoneNumber = [telComponents componentsJoinedByString: @""];

    NSString* urlString = [NSString stringWithFormat: @"tel:%@", phoneNumber];
    NSURL* telURL = [NSURL URLWithString: urlString];

    if ( [[UIApplication sharedApplication] canOpenURL: telURL] )
    {
        [[UIApplication sharedApplication] openURL: telURL];
    }
    else
    {
        UIAlertView* alert = [[UIAlertView alloc] initWithTitle: NSLocalizedString( @"Dialer Error", @"" ) 
                                                        message: [NSString stringWithFormat: NSLocalizedString( @"There was a problem dialing %@.", @"" ), phoneNumber] 
                                                       delegate: nil 
                                              cancelButtonTitle: NSLocalizedString( @"OK", @"" ) 
                                              otherButtonTitles: nil];
        [alert show];
        [alert release];
    } 
```

**更新：**

试试这个也...

```
#import "RegexKitLite.h"

NSString * number = @"(555) 555-555 Office";
NSString * strippedNumber = [number stringByReplacingOccurrencesOfRegex:@"[^0-9]" withString:@""]; 
```

从 iphone sdk 查看此代码的链接 [- 从字符串中删除除数字 0-9 之外的所有字符](https://stackoverflow.com/questions/1160403/iphone-sdk-remove-all-characters-except-for-numbers-0-9-from-a-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:21:30.263

试试这个并检查：

```
 NSString *phoneNumber = [[self.arrCategory objectAtIndex:0]objectForKey:@"MOBILE"]; 
    NSString *phoneURLString = [@"tel://" stringByAppendingString:phoneNumber];
    NSURL *phoneURL = [NSURL URLWithString:phoneURLString];
    [[UIApplication sharedApplication] openURL:phoneURL]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:30:13.003

请从这里尝试我的示例代码，

[http://yuvarajmanickam.wordpress.com/2012/03/03/make-a-call-from-iphone-app/](http://yuvarajmanickam.wordpress.com/2012/03/03/make-a-call-from-iphone-app/)

请使用您的电话号码而不是 phoneNumber 字符串。请让我知道它是否对您有用。我希望它会帮助你。谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T11:23:23.940

尝试这个：

```
UIWebView *callWebview = [[UIWebView alloc] initWithFrame:CGRectMake(0,0, 0, 0)];
[self.view addSubview:callWebview];
NSString *phoneNumber = [[self.arrCategory objectAtIndex:0]objectForKey:@"MOBILE"]; 
    NSString *phoneWithoutSpaces = [[NSString stringWithFormat:@"tel://%@", phoneNumber] stringByReplacingOccurrencesOfString:@" " withString:@""];
NSURL *telURL = [NSURL URLWithString:phoneWithoutSpaces];
[callWebview loadRequest:[NSURLRequest requestWithURL:telURL]]; 
```

它对我有用。

# box2d-iphone - Box2d中如何防止碰撞后反弹？

> ID：14136788
> 
> 赞同：0
> 
> 时间：2013-01-03T10:14:34.453
> 
> 标签：box2d-iphone

我正在开发一个简单的游戏，很像打砖块的游戏。

现在在与砖块碰撞时，玩家应该反弹，它工作正常。但是在与硬币碰撞时，玩家不应该反弹，硬币应该消失。

为此，我尝试了硬币的负恢复原状并像这样改变了 b2MixRestitution：

```
/// Restitution mixing law. Feel free to customize this.
inline float32 b2MixRestitution(float32 restitution1, float32 restitution2)
{
    //return restitution1 > restitution2 ? restitution1 : restitution2;

    float mixRest = 0.0f;
    if(restitution1 > 0.0f && restitution2 > 0.0f)
        mixRest = (restitution1>restitution2)?restitution1:restitution2;
    else
        mixRest = (restitution1<restitution2)?restitution1:restitution2;

    return mixRest;
} 
```

但仍然球员自然反弹。

对于硬币，恢复原状为 -1.00f。对于玩家，恢复原状为 0.50f。

这甚至可能对 Box2d 中的身体进行负恢复吗？

我只是想知道这对于像硬币（静态）和玩家（动态）这样的两个物体是否可能发生碰撞，动态物体在碰撞后不会反弹。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:24:58.723

我认为你不应该使用 Box2d 的身体作为硬币。仅使用精灵。使用一些算法来检测玩家和硬币之间的碰撞。

例如，您可以比较链接到玩家身体和硬币精灵的精灵的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T12:46:11.193

您应该将硬币的固定装置设置为传感器/

# javascript - 使用 JavaScript 显示/隐藏多个 div

> ID：14136795
> 
> 赞同：0
> 
> 时间：2013-01-03T10:15:01.763
> 
> 标签：javascript, jquery

我想通过单击相应的链接来显示多个 div，我相信我已经实现了 - 但是，我也想创建一个隐藏 div 的链接类。

我希望有人可以生成以下脚本的修改版本，以便它使用目标对链接类进行编程以隐藏 div？

这是我正在使用的 jsFiddle：http: [//jsfiddle.net/XwN2L/1163/](http://jsfiddle.net/XwN2L/1163/)

HTML：

```
 <div class="buttons">
        <a  class="show" target="1">Option 1</a>
        <a  class="show" target="2">Option 2</a>
        <a  class="show" target="3">Option 3</a>
        <a  class="show" target="4">Option 4</a>
    </div>

    <div id="div1" class="targetDiv">Lorum Ipsum 1</div>
    <div id="div2" class="targetDiv">Lorum Ipsum 2</div>
    <div id="div3" class="targetDiv">Lorum Ipsum 3</div>
    <div id="div4" class="targetDiv">Lorum Ipsum 4</div>​ 
```

JavaScript：

```
 $('.targetDiv').hide();
    $('.show').click(function () {
        $('.targetDiv').hide();
        $('#div' + $(this).attr('target')).show();
    }); 
```

先感谢您。

更新：

[http://jsfiddle.net/XwN2L/1180/](http://jsfiddle.net/XwN2L/1180/)

这似乎有效，对不起，如果我的问题不够清楚。

HTML：

```
 <div class="buttons">
        <a  class="show" target="1">Option 1</a>
        <a  class="show" target="2">Option 2</a>
        <a  class="show" target="3">Option 3</a>
        <a  class="show" target="4">Option 4</a>
        <a  class="hide" target="1">Close 1</a>
        <a  class="hide" target="2">Close 2</a>
        <a  class="hide" target="3">Close 3</a>
        <a  class="hide" target="4">Close 4</a>
    </div>

    <div id="div1" class="targetDiv">Lorum Ipsum 1</div>
    <div id="div2" class="targetDiv">Lorum Ipsum 2</div>
    <div id="div3" class="targetDiv">Lorum Ipsum 3</div>
    <div id="div4" class="targetDiv">Lorum Ipsum 4</div>​ 
```

JavaScript：

```
 $('.targetDiv').hide();
    $('.show').click(function () {
        $('.targetDiv').hide();
        $('#div' + $(this).attr('target')).show();
    });

    $('.hide').click(function () {
        $('#div' + $(this).attr('target')).hide();
    }); 
```

再次感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:19:27.637

不确定这是否是你想要的，但你可以看看这个小提琴..

[http://jsfiddle.net/XwN2L/1165/](http://jsfiddle.net/XwN2L/1165/)

创建与类的链接`hide`..

并调用 click 函数

```
$('.hide').click(function () {
  $('.targetDiv').hide();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:28:56.253

您也可以这样做，因此您可以切换选项而不是使用额外的按钮来隐藏所有内容。

```
$('.targetDiv').hide();
    $('.show').click(function () {
        $('#div' + $(this).attr('target')).toggle('').siblings('.targetDiv').hide('');
    });​ 
```

[http://jsfiddle.net/W3HtS/1/](http://jsfiddle.net/W3HtS/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:41:31.927

当`a.show`标签包含属性时`href`，您使用的`target`属性将触发打开新的浏览器窗口或选项卡。我建议在这里使用[数据属性](https://developer.mozilla.org/en-US/docs/HTML/Global_attributes)。

如果您可以使用 css3，请考虑仅使用 css 的解决方案。不确定您的意思，但是这个 [**jsfiddle**](http://jsfiddle.net/KooiInc/TfMD)包含一个示例，其中 mousedown 操作显示了一个类似工具提示的框，使用数据属性作为其内容。

该示例中的CSS：

```
a.show:active:after{
    position:absolute;
    color:green;
    margin-top:1.0em;
    margin-left:-1em;
    background: white;
    z-index:2;
    content: 'Lorem Ipsum 'attr(data-target);
    border: 1px solid #999;
    padding: 3px;
} 
```

# arm - 如何在ARM/MIPS平台上查看XN/XI bit support的硬件支持

> ID：14136801
> 
> 赞同：-1
> 
> 时间：2013-01-03T10:15:09.290
> 
> 标签：arm, pax, dep

我在 ARM v6/v7 平台上验证 XN 位的硬件支持。为此，我在 ARM 上执行了 execstack.c。由于 ARM v6/v7 支持 XN 位，因此它正在崩溃。然后我在不支持 XI 位的 MIPS 目标（34Kc）上检查了相同的内容，因此程序必须正常执行，但这里程序也崩溃了。然后我删除了 XN 位代码并为 ARM 编译。然后程序也崩溃了，这不应该。

**Test Program** /* execstack.c - 测试栈上的代码是否可以执行

*/

```
typedef void (*fptr)(void);

char *testname = "Executable stack                         ";

void itworked( void )
{
      printf( "Vulnerable\n" );
        exit( 1 );
}

void doit( void )
{
       char buf[8192];
        fptr func;
        /* Put a RETN instruction in the buffer */
        buf[0] = '\xc3';
        /* Convert the pointer to a function pointer */
        func = (fptr)buf;
        /* Call the code in the buffer */
        func();
        /* It worked when the function returns */
        itworked();
}

int main( int argc, char *argv[] )
{
       int status;
        printf( "%s: ", testname );
        fflush( stdout );
        if( fork() == 0 ) {
                do_mprotect((unsigned long)argv & ~4095U, 4096, PROT_READ|PROT_WRITE|PROT_EXEC);
                doit();
        } else {
                wait( &status );
                if( WIFEXITED(status) == 0 ) {
                        printf( "Killed\n" );
                        exit( 0 );
               }
        }
        exit( 0 );
}

void itfailed( void )
{
        printf( "Ok\n" );
        exit( 2 );
}

int do_mprotect( const void *addr, size_t len, int prot )
{
        void *ptr;
        int retval;
        /* Allign to a multiple of PAGESIZE, assumed to be a power of two */
        ptr = (char *)(((unsigned long) addr) & ~(PAGESIZE-1));
         retval = mprotect( ptr, len, prot );
        if( retval != 0 && errno == EINVAL ) {
                perror( "could not mprotect():" );
                exit( 1 );
    }
         return retval;
} 
```

**/登录 MIPS 目标 /**

在 MIPS 目标上，execstack 测试用例在 coredump 下方给出，尽管我假设 MIPS 不支持 XI 位。

VDLinux#> ./execstack

可执行堆栈[53.272000] do_ri() : 发送 SIGILL 到 execstack, PID:386

被杀

**/登录ARM目标/**

VDLinux#> ./execstack

可执行堆栈[451.784000] execstack：0xbead5860 处未处理的页面错误 (11)，代码 0x80000007 被杀死

所以我有以下问题：

1.  如何验证 ARM v6/V7 上的 XN 位支持？
2.  如何验证 MIPS 34Kc 上的 XI 位支持
3.  在哪里可以检查 Linux 内核代码中的 XN 位支持。

谢谢， 吉里什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:59:18.483

我编写了以下汇编代码来测试 ARM 目标上的 XN 位支持。

```
.text
.global _start
_start:
mov   r0, #1        (output)    
add   r1, pc, #20   (string)
mov   r2, #12        strlen(string))
mov   r7, #4        (syscall number for write)
svc   0x0

mov   r0, #0        (output)    
mov   r7, #1        (syscall number for exit)
svc   0x0
.asciz  "Hello world\n   " 
```

从组装生成机器：

```
arm-linux-gnueabi-gcc -c -o arm_hello.o arm_hello.s
arm-linux-gnueabi-ld arm_hello.o -o arm_hello 
```

部分.text的反汇编：

```
root@oss:shellcode_2# arm-linux-gnueabi-objdump -d arm_hello 
arm_hello :     file format elf32-littlearm
00008054 <_start>:
8054:       e3a00001        mov     r0, #1
8058:       e28f1014        add     r1, pc, #20
805c:       e3a0200c        mov     r2, #12
8060:       e3a07004        mov     r7, #4
8064:       ef000000        svc     0x00000000
8068:       e3a00000        mov     r0, #0
806c:       e3a07001        mov     r7, #1
8070:       ef000000        svc     0x00000000
8074:       6c6c6548        .word   0x6c6c6548
8078:       6f77206f        .word   0x6f77206f
807c:       0a646c72        .word   0x0a646c72
8080:       00202020        .word   0x00202020 
```

C中的最终Shell代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <asm/unistd.h>

typedef void (*fptr) (void);

void
main ()
{
  unsigned char hellocode[] = "\x01\x00\xa0\xe3\x14\x10\x8f\xe2"
    "\x0c\x20\xa0\xe3\x04\x70\xa0\xe3"
    "\x00\x00\x00\xef\x00\x00\xa0\xe3"
    "\x01\x70\xa0\xe3\x00\x00\x00\xef" "hello world\n   \0";

  unsigned char buffcode[256] __attribute__ ((aligned (32)));
  fptr func;

  memcpy (buffcode, hellocode, 49);

  /* Convert the pointer to a function pointer */
  func = (fptr) buffcode;

  /* flush contents of instruction and/or data cache */
  syscall (__ARM_NR_cacheflush, buffcode, buffcode + 50, 0);

  /* Call the code in the buffer */
  (*func) ();
} 
```

**情况1：当堆栈可执行时：**

程序编译：

```
root@oss:shellcode_ final# arm-linux-gnueabi-gcc stack.c -z execstack -o stack_RWX 
```

读取 ELF 标头：

```
root@oss:shellcode_final# arm-v7a9v3r0-linux-gnueabi-readelf -l stack_RWX 
Elf file type is EXEC (Executable file)
Program Headers:
Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
GNU_STACK      0x000000 0x00000000 0x00000000 0x00000 0x00000 RWE 0x4 
```

运行程序：由于这里的堆栈是可执行的，所以 XN 位将被清除 (0)。程序将正常运行。

```
ARM_Target#> ./stack_RWX
hello world 
```

**情况 2：当堆栈不可执行时：**

程序编译：

```
root@oss:shellcode_ final# arm-v7a15v3r1-linux-gnueabi-gcc stack.c -o stack_RW 
```

读取 ELF 标头：

```
root@oss:shellcode_final# arm-linux-gnueabi-readelf -l stack_RW
Elf file type is EXEC (Executable file)
Program Headers:
Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
GNU_STACK      0x000000 0x00000000 0x00000000 0x00000 0x00000 RW  0x4 
```

运行程序：因为这里设置了 XN 位（它是 1），所以在每种情况下都会出现分段错误。

```
ARMtarget#> ./stack_RW
[   39.092000] stack_RW: unhandled page fault (11) at 0xbeca8760, code 0x8000000f
[   41.000000] [VDLP COREDUMP] SIGNR:11
Segmentation fault (core dumped) 
```

**在 ARM 中禁用 XN 位的补丁：** 我创建了一个补丁。在这个补丁中，我们注释了一段汇编代码。这是在 arch/arm/mm/proc-v7.S 中完成的

```
#ifdef CONFIG_XN_SUPPORT
   tst  r1, #L_PTE_XN
   orrne    r3, r3, #PTE_EXT_XN
#endif 
```

如果我取消选择 CONFIG_XN_SUPPORT 选项 PTE_EXT_XN 位将始终为 0。因此，无论堆栈是否可执行，都将执行所有二进制文件。

运行程序：

```
ARM_Target#> ./stack_RWX
hello world
ARM_Target#> ./stack_RW 
hello world 
```

**结论：**
Cortex-A15 ARMv7 支持 XN 位。

# iphone - 在代码签名身份列表中看不到分发配置

> ID：14136803
> 
> 赞同：-2
> 
> 时间：2013-01-03T10:15:14.767
> 
> 标签：iphone, ios, xcode, archive, provisioning-profile

我有一个分发配置文件并且我已经成功地存档了项目，但是当我尝试分发存档时，配置文件没有显示在代码签名身份列表中！我已经删除了存档，重新启动了 X Code，并多次创建了存档，但我仍然面临同样的问题。我在创建存档时使用的列表中看不到分发配置，但显示了具有相同标识符的开发配置。请看一下图片，请帮助！谢谢- ![在此处输入图像描述](../Images/2f11afb9c76d1351a6eb824e15ff6ed2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:39:31.443

为了在该列表中查看您的配置文件，您需要为该特定配置文件运行有效的 p12 证书。

尝试重新检查该配置文件的 p12 文件并再次运行它。

# android - Android：将int从一个活动传递到另一个活动时出错

> ID：14136805
> 
> 赞同：2
> 
> 时间：2013-01-03T10:15:20.980
> 
> 标签：android

我正在阅读我的数据库`Activity A`- Fetching `String`, `int`, `String`. 我将它传递给`Activity B`并希望在 3 个文本字段中显示它的`String`值得到正确显示，但是`int`给了我这个错误

```
01-03 15:39:48.252: E/ERROR(980): android.content.res.Resources$NotFoundException: String resource ID #0x1f4 
```

我的代码

活动一

```
Intent myintent2 = new Intent(MoneySummaryPage.this,EnterBankDetails.class);
myintent2.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
myintent2.putExtra("bank", updateBank);
myintent2.putExtra("amount", updateAmt);
myintent2.putExtra("Currency", updateCur);
myintent2.putExtra("constant", "1");
startActivity(myintent2); 
```

活动 B

```
 BankName =      (EditText)findViewById(R.id.bankNameLabel);
    BalanceAmount = (EditText)findViewById(R.id.balanceLabel);
    currencySpin = (Spinner)findViewById(R.id.currencySpinner);

    constantpass = getIntent().getExtras().getString("constant");

    BankName.setText(getIntent().getExtras().getString("bank"));
    BalanceAmount.setText(getIntent().getIntExtra("amount", 0)); 
```

`BalanceAmount`是该字段`Integer`，我在那里得到空白值。另外，我的第三个`String`是要填充在 Spinner 中吗？有人可以告诉我填充它的代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T10:16:10.017

试试这个，

```
 BalanceAmount.setText(getIntent().getIntExtra("amount", 0)+""); 
```

问题是，当您尝试向 setText() 提供 int 值时，系统会查找具有该 int id 的资源文件。它可能不理解 int 值和 int res 之间的区别（R.String.someValue 在 android 中被视为 int）。

现在使用上面的代码，int 现在转换为 String，因此您不会有任何问题，当然您正在将两行代码减少为一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T10:25:21.367

TextView 值应该是 String，而不是 int。

这是执行此操作的正确方法：

`int iAmount = getIntent().getIntExtra("amount", 0);` `BalanceAmount.setText(String.valueOf(iAmount));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:18:21.093

更新您`Spinner`使用的`View.invalidate()`方法。

或者`Adapter.notifyDatasetChanged()`方法

# ruby - Ruby 指向系统 ruby 而不是 ubuntu 中的 rvm

> ID：14136808
> 
> 赞同：0
> 
> 时间：2013-01-03T10:15:26.367
> 
> 标签：ruby, ubuntu, rvm

我使用 ubuntu`11.10`并且我已经安装了 rvm 并且已经安装了`ruby 1.9.3`. 我的系统默认有`ruby 1.9.1`. 因此，我的系统没有指向 rvm 安装的 ruby​​，而是指向默认的 ruby​​。我怎样才能改变这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:28:49.547

我敢打赌你没有正确配置你的路径。尝试

```
echo $PATH 
```

我有

```
/Users/matt/.rvm/rubies/ruby-1.9.3-p286/bin 
```

前

```
/usr/bin 
```

如果您不是这种情况，那么您可以将这个小脚本添加到您的 .bashrc

我这样做是因为有时我想使用系统红宝石，有时我想使用 rvm 红宝石。

```
rvmenv() {
    [[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # This loads RVM into a shell session.                                                                           
}
#rvmenv 
```

如果你想一直使用 rvm，你可以取消最后一行的注释，或者你可以运行

```
rvmenv 
```

在 shell 会话中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:46:53.687

RVM 要求你使用登录 shell，它默认没有打开，所以你需要手动做[https://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)

# jquery - jQuery Ui datepicker 仅在第一次点击时显示

> ID：14136818
> 
> 赞同：0
> 
> 时间：2013-01-03T10:16:03.223
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我正在使用 jQuery UI 日期选择器，基本上在页面加载时我第一次点击日期选择器显示的输入字段，但如果我再次点击它，什么也没有发生。

谁能告诉我哪里出错了？

```
$(document).ready(function() {
    $('#delDate').datepicker({ 
        dateFormat: 'dd-mm-yy',
        minDate: 0 
    });
});

<input type="text" name="delDate" id="delDate" value="" /> 
```

**如果您单击第一页上的图像，则有问题的页面在第 4 步，然后继续按下一步** [http://www.xperience-web.com/heywood/?page_id=32](http://www.xperience-web.com/heywood/?page_id=32)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:32:20.380

您的文档就绪代码似乎格式不正确。像这样写，然后再试一次：

```
$(function() {
    $('#delDate').datepicker({
        dateFormat: 'dd-mm-yy'
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:42:48.963

在花了很长时间试图解决这个问题后，我最终使用了一个不同的日期选择器，它第一次工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:23:04.383

为我工作，演示：http: [//jsfiddle.net/qZ6b5/](http://jsfiddle.net/qZ6b5/)

demo中缺少样式是因为只引用了jquery ui脚本，没有引用css文件。

html:

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<input type="text" name="delDate" id="delDate" value="" />​ 
```

js：

```
$('#delDate').datepicker({ 
        dateFormat: 'dd-mm-yy',
        minDate: 0 
    });​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:21:59.883

可能是您想将 0 更改为 null

[http://api.jqueryui.com/datepicker/#option-minDate](http://api.jqueryui.com/datepicker/#option-minDate)

# spring - Spring MVC 发送 HTML 和 JSON

> ID：14136822
> 
> 赞同：4
> 
> 时间：2013-01-03T10:16:18.017
> 
> 标签：spring, rest, spring-mvc

我需要在spring mvc中开发一个web应用程序，它可以通过输入参数以html、json和xml响应客户端，我如何使用spring mvc进行设计，我知道使用@ResponseBody我可以获得xml或json响应，但是如何获得 html 响应，我需要为 html 和 json 提供不同的方法，或者使用相同的方法是可能的？

> 示例：
> [http](http://blip.tv/file/6213507?skin=json) ://blip.tv/file/6213507?skin=json - 提供 json o/p
> 
> [http://blip.tv/file/6213507?skin=api](http://blip.tv/file/6213507?skin=api) - 提供 xml o/p
> 
> [http://blip.tv/file/6213507](http://blip.tv/file/6213507) - 提供 html o/p

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T07:40:40.107

我找到了一个很好的例子，使用[ContentNegotiatingViewResolver](http://www.mkyong.com/spring-mvc/spring-3-mvc-contentnegotiatingviewresolver-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:56:28.270

您可以通过扩展编写自己的视图类`org.springframework.web.servlet.view.AbstractView`

在这个类中覆盖以下方法 -

```
protected void renderMergedOutputModel(Map model,
                                   HttpServletRequest request,
                                   HttpServletResponse response)
                            throws Exception 
```

`response.setContentType("text/plain; charset=ISO-8859-1");` 并根据`skin`参数设置内容类型

# php - 在 html 标签中包含 php 文件

> ID：14136823
> 
> 赞同：-2
> 
> 时间：2013-01-03T10:16:24.387
> 
> 标签：php

我是 php 和 html 的新手，我想知道，包括一个 php 文件，其中 html 标签喜欢`<body>`或`<head>`在哪里会导致更好的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:25:00.430

不，你不能。因为 PHP 只能在服务器上运行，而 HTML 只能在 Web 浏览器上运行。假设您在 HTML 页面中输入以下内容：

```
<?php include('myfile.php'); ?> 
```

然后它会显示`<?php include('myfile.php'); ?>`，因为浏览器不知道如何翻译它。

如果你在你的 HTML 文件中输入这个：

```
<a href="myfile.php">Link to my file</a> 
```

然后它将使您能够下载该文件。

因此，最简单的方法是将您的 PHP 文件包含到另一个 PHP 文件（您的 PHP 文件包含 HTML 代码）中，即使在该文件中也没有需要服务器解释的 PHP 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:17:49.393

在哪里包含该文件并不重要。它只取决于该 php 文件的用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:18:06.323

您可以在任何地方包含 PHP 文件，如下所示

```
<?php require_once("file1.php"); ?>
<?php include_once("file1.php"); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:23:25.330

您可以在任何需要的地方包含 PHP 文件，而无需在任何特定 HTML 标记的内部或外部添加。对于初学者，我参考以下网站：[w3schools](http://www.w3schools.com/)。

PHP 教程请访问：[PHP](http://www.w3schools.com/php/default.asp) HTML 教程请访问：[HTML](http://www.w3schools.com/html/default.asp)

如果您需要任何进一步的帮助。您可以随时联系。

# java - 如何在 Struts2 中使用 sx:autocomplter 来实现 AJAX 目的？

> ID：14136827
> 
> 赞同：1
> 
> 时间：2013-01-03T10:16:32.437
> 
> 标签：java, ajax, jakarta-ee, struts2

我正在按照[本](http://www.mkyong.com/struts2/struts-2-autocompleter-example/)教程将 AJAX 构建到 Struts2 中：

我成功地完成了最后一步，我的界面与用户显示的界面完全相同，而且，我的第一个下拉框的 AJAX 工作得很好，但是，第二个下拉框根本没有任何 AJAX 工作。

第一个下拉列表和第二个下拉列表之间的区别在于它们如何利用项目列表。第一个下拉列表使用：

```
<sx:autocompleter list="{'1','12','13'}" 
```

对项目列表进行硬编码，而第二个使用以下方式：

```
<sx:autocompleter list="webframeworks" 
```

这实际上是我感到困惑的地方，struts2 如何知道 webframeworks 是 AutoCompleterAction 类中的一个字段并检索列表的值？

有两个观察：我注意到的一件事是“webframeworks”也是 AutoCompleterAction 类中的字段名称。第二个是第一个下拉菜单实际上是填充的，而第二个是空的。

我只是一个初学者，非常感谢提前帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:51:38.663

正如@UmeshAwasthi 指出的那样，自 2.1.x 版本以来，不推荐使用与 Struts2 集成的 Dojo。

这主要是因为集成的 Dojo 比官方的 Dojo 版本更旧，维护更少，有 bug 等。

您可以使用开箱即用的 Dojo、jQuery 或任何其他 AJAX 框架来完成这项工作，但我强烈建议您查看[Struts2-jQuery 插件](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)，这是一个完整的、编写良好的托管库，将允许您实现几乎所有类型的结果，而无需单独学习 jQuery。

只需单击展示的小部件菜单，然后单击自动完成程序，即可享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:23:43.733

在第二个示例中，数据来自服务器上的操作类。

```
 List<String> webframeworks = new ArrayList<String>(); 
```

上面的列表被填充到动作类中。因此，在第二种情况下，您指的是名称为**webframeworks**的列表。

就像你问它是怎么知道的；您正在使用 STRUTS 2 标记 (< **sx:autocompleter** ..)，因此 Struts 会在内部处理它。

# soa - 基于契约的 SOA 如何比定义的（远程访问）API 更灵活？

> ID：14136829
> 
> 赞同：0
> 
> 时间：2013-01-03T10:16:38.100
> 
> 标签：soa

我正在阅读一份强调 SOA 使用的未来 IT 开发战略。我~~知道，~~ **SOA**是网络上一些关于它的文章中的流行词。

作为程序员，我想了解为什么 SOA 应该比其他分布式计算架构更灵活？

*   SOA 基于在总线上发布的服务。但是，每个服务消费者都必须了解服务的意义/语义才能使用它。因此，必须修改客户端才能使用新服务。

    例如，如果谷歌地图发布交通信息，我的应用程序会*知道*有什么发布，以什么格式等，但它不会让我的路线规划器神奇地获得利用这些数据的功能。

*   SOA 是基于契约的。合同是否不仅仅是明确定义的（前、后）条件，可以由计算机自动检查？

    （就像一个函数检查它的输入，并在用户文档中记录它的期望，只是将验证移到函数之外。）

    如果双方都必须再次履行合同，这将如何提高灵活性？数据不会因为发布就自动完成。如果合同发生变化，客户也必须修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:28:33.940

我不同意你问题中表达的很多想法。

我不认为 SOA 是一个衰落的流行词。曾经有很多人被供应商带走并出售货物清单。那个时候结束了。如果这就是你的意思，那我就接受。但是 SOA 还活着并且很好。

我不同意 SOA 需要总线。重要的是把业务问题分解成服务，而不是总线。

您关于客户必须了解服务语义才能使用它们的陈述对于所有分布式组件都是正确的。

*每个*分布式组件都基于合约。一个接口，无论如何表达，*都是*一个契约：“把这些参数传给我，我保证我会返回这个值或者执行这个功能。” 如果合同发生变化，客户也必须如此。在您自己的代码和分布式组件中确实如此。

我认为 SOA 是赢家，因为它基于使用 HTTP（Internet 有线协议）的分布式组件。它简单且开放，与 CORBA、RMI 或 COM 等其他技术相比，这是一个巨大的优势。

它代表了更高层次的抽象，这对开发人员来说总是一件好事。如果 API 定义明确且稳定，他们就不必担心复杂性。他们可以专注于从能够很好地映射到他们的业务问题的服务菜单中进行选择，并协调它们以制定新的解决方案。

但它没有魔法。API 设计很难。选择 SOA 并使用合同并不能保证您会做得很好。

与其他开发 SOAP 服务的方法相比，“契约优先”的一个优势是它使“鸭子类型”成为可能。如果您从一个模式生成 WSDL，您就可以将用户与后台服务使用的对象模型的更改分离开来。如果您从对象模型生成模式和 WSDL，这两者是紧密耦合的。[Spring Web 服务站点](http://static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html)对此主题进行了很好的讨论。

# c++ - GCC 中的 std::put_time 实现状态？

> ID：14136833
> 
> 赞同：68
> 
> 时间：2013-01-03T10:16:48.117
> 
> 标签：c++, gcc, c++11, std, chrono

我试图使用 GCC 编译[这个示例程序](http://en.cppreference.com/w/cpp/chrono/time_point)（测试版本 4.5.1、4.6.3、4.8.4）：

```
#include <iostream>
#include <iomanip>
#include <ctime>
#include <chrono>

using std::chrono::system_clock;

int main()
{
    system_clock::time_point now = system_clock::now();
    std::time_t now_c = system_clock::to_time_t(
                            now - std::chrono::hours(24));
    std::cout << "One day ago, the time was "
              << std::put_time(std::localtime(&now_c), "%F %T") << '\n';
} 
```

[但它告诉我：](http://ideone.com/XR1eF4)

```
prog.cpp: In function 'int main()':
prog.cpp:14:18: error: 'put_time' is not a member of 'std' 
```

* * *

我想，可能它还没有实现。所以我试图检查这个函数的实现状态。我只找到了这个页面：

*   [http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)

但在那里我找不到任何关于`put_time`或`chrono`类似的注释。谁能指出我提供有关该库的实施状态信息的资源？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-03T10:44:49.437

请参阅gcc 4.8.0 的[TODO 扩展 iomanip 操纵器 std::get_time 和 std::](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54354) put_time。

另请参阅[获取时间的跨平台方式？](https://stackoverflow.com/a/11096995/341970)声称未在 4.7.0 中实现。

* * *

**更新：**正如 gcc 开发人员[Jonathan Wakely 在下面确认](https://stackoverflow.com/questions/14136833/stdput-time-implementation-status-in-gcc/14137287?noredirect=1#comment35569824_14142342)的那样：gcc 4.9 中仍然缺少`std::get_time`和操纵器。`std::put_time`

* * *

**更新：** Jonathan Wakely于2014 年 12 月 22 日[关闭了这张票：](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=54354#c9)

> 已为 GCC 5 修复

感谢[simonwo](https://stackoverflow.com/users/3729369/simonwo)让我知道这件事。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-03T15:52:29.493

您可能已经注意到您提供的链接没有列出图书馆的**任何**部分！但在表格下方它说：

> 可以在此[表中跟踪库实现的状态](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)

该表指出`std::get_time`和`std::put_time`操纵器尚未实现。

编辑：`put_time`现在在 GCC 开发主干上。

# design-patterns - 服务和存储库模式和关注点分离

> ID：14136835
> 
> 赞同：0
> 
> 时间：2013-01-03T10:16:55.777
> 
> 标签：design-patterns, repository-pattern

我在实体框架之上使用服务/存储库层设计模式。一切都很好，直到我想要一个查询来返回关于两个不同实体的数据的合并。

示例是我有两个实体`Document`和`ShoppingBasketItem`. 所以我现在有两个服务 a`DocumentService`和 a `ShoppingBasketService`。起初，我只是根据用户搜索列出了文档。但后来我想突出显示已经在用户购物篮中的文档。所以文档服务现在需要了解购物篮的概念。

真的，我希望 Document 服务与购物篮无关，明确分离关注点。

所以我的问题是，这是一个好方法吗？或者我是否应该创建一个新服务`DocumentBasketService`来处理有关文档和购物篮信息的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:13:56.550

> 所以我的问题是，这是一个好方法吗？

这取决于。

我对以这种方式定义服务的方法有一些保留。您希望实现 SoC，这是一件明智的事情，但我认为我们必须努力定义关注点。在这种情况下，关注点真的是领域对象吗？从你面临的问题来看，它看起来不像。

我已经一次又一次地看到这种实现：毕竟，定义一个与 DocumentRepository 一起工作的 DocumentService 似乎是合乎逻辑的。根据我的经验，他们最终会直接将部分/大部分调用转发到存储库并拥有庞大的服务合同，因为最终与 Documents 相关的所有内容都将在 DocumentService 中结束。

如果你在做面向服务，我通常采用的解决方案是让我的服务说“业务”而不是领域，让它们实现业务案例，而不是将它们归类为包装存储库。然后您可以在您的服务中实现 SoC，您的关注点是业务关注点：这些关注点的定义完全取决于您的业务案例，这意味着我无法帮助您。OTOH，如果您真的需要域服务，这条建议完全没用；正如我所说，这取决于您的需求。

因此，普遍有效的观点是：重新考虑您试图分离的问题以及您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:38:13.467

嗯，我可能想出了一个保持关注点明确分离的答案。

我在文档服务中添加了一个新方法，它接受文档 ID 列表作为参数，这些 ID 是用户购物篮中已经存在的文档。然后服务可以只突出显示文档，例如在文档上设置一个属性以指示它已经在用户的购物篮中。

这样，文档服务就不会查询购物篮，而且对它们一无所知。

因此，总结一下我的控制器操作调用到购物篮服务并获取用户购物篮中已经存在的 id 列表。然后它在传递 id 列表的文档服务上调用获取文档方法。

# android - Android活动生命周期和jni内存管理

> ID：14136837
> 
> 赞同：3
> 
> 时间：2013-01-03T10:16:59.893
> 
> 标签：android, memory, java-native-interface

我正在尝试制作一个使用一些 jni 代码的 android 应用程序。
这个 jni 代码分配了一些内存，这些内存必须被释放。假设
我有这个包含这段代码的类：

```
class MyJniClass{

public native void jni_init(); //this allocates some memory
public native void do_something(); //this also allocates some memory,  
which is linked to the memory allocated in jni_init()
public native void jni_destroy(); //this frees all the allocated  
memory in two previous functions

... // some other java code

} 
```

我的麻烦是，在活动生命周期的哪个位置调用`jni_init`和`jni_destroy`. 所以我开始研究活动生命周期的工作原理，我对结果有点困惑。我想这是由于我试图
深入了解 linux 进程级别的事实造成的。但是我使用的是jni，所以它是有道理的。

我创建了一个简单的活动，实现了所有生命周期回调并将一些日志记录到其中。我对构造函数做了同样的事情，我还添加了 jni 代码，它记录`pid`了进程。

所以，我发现 - 即使没有调用 onDestroy，活动也可以被销毁（这很清楚，我为此找到了很多解释）并且该过程仍在运行（通过使用时间线、ps 命令和 getpid jni 等应用程序进行验证称呼）。该进程正在运行，因此保持分配的内存似乎是合乎逻辑的。

问题是，在哪里分配内存。我不能使用`onCreate`，因为它可以在进程生命周期内多次调用，因此可能会发生内存泄漏。我也不想使用 onStart 进行分配和使用 onStop 进行释放，因为这是不必要的工作。我尝试了单例设计，它似乎可以工作，但我不想使用它，因为我需要 MyJniClass 是可重入的（我也想在服务中使用它）。所以我的问题是 - 是否有一些推荐的方法如何在 jni 应用程序中进行内存管理？

编辑：我看到我没有足够清楚地描述这其中最令人困惑的部分。以下是事件的顺序：

1）我使用启动器中的图标启动应用程序

2）新活动被创建（构造）

3) onCreate 被调用

4) onStart 被调用

5) onResume 被调用

6）我按下主页按钮

7) onSaveInstanceState 被调用

8) onPause 被调用

9) onStop 被调用

10) 我使用启动器中的图标启动应用程序（如步骤 1 所示）

11) 新活动被创建（构造）

12) onCreate 被调用

13) onStart 被调用

14) onResume 被调用

令人困惑的步骤是 11) 和 12)，因为进程 (pid) 仍然相同，但正如我从文档中了解到的那样，如果 11) 和 12) 发生，则应该终止前一个进程。

感谢并为所有的语法错误感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:03:43.750

从[这里](http://developer.android.com/guide/topics/manifest/activity-element.html#finish)

> 机器人：finishOnTaskLaunch
> 
> 是否应该关闭活动的现有实例（完成）>每当用户再次启动其任务（在主屏幕上选择任务）时 - 如果 > 它应该关闭，则为“true”，如果应该关闭，则为“false”不是。默认值为“假”。

它明确指出，如果您希望您的活动只存在一次，您应该在 AndroidManifest.xml 中更改此值。

您还可以更改其他值，这将影响活动生命周期行为。

# c - 嵌入式系统的对称加密算法

> ID：14136841
> 
> 赞同：11
> 
> 时间：2013-01-03T10:17:12.843
> 
> 标签：c, encryption, cryptography, embedded, avr

寻找在 C 中加密字节数组的建议和一些参考代码。问题是我必须与其他例程一起适应**1KByte**内存，而 MCU 只有 8MHz。所以尺寸和速度是关键。我已经检查了 Rijndael，但它为我的 MCU 提供了巨大的表格。基本上我要在PC上加密intel hex格式，可能只有数据区，然后在MCU中解密。

使用动态内存分配例程是不可取的。

我的谷歌搜索把我带到了 C# 实现中，使用库。

更新：

解密端约束：

```
RAM: 512 byte
MAX code size: 512-1024 words
CPU: 8 bit, 8MHz 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T10:21:17.310

我看到在嵌入式世界中使用的一个非常简单的加密算法是[XXTEA](http://en.wikipedia.org/wiki/XXTEA)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T15:42:58.550

Rijndael 中的所有表都被定义为 GF2 中的简化操作。因此，我很想说可以写例如。1k 中的 128 位 AES。

另请参阅：[https ://electronics.stackexchange.com/questions/13275/smallest-aes-implementation-for-microcontrollers](https://electronics.stackexchange.com/questions/13275/smallest-aes-implementation-for-microcontrollers)

但是任何选择的算法都是安全性的一个次要因素，例如。如果密钥与二进制文件一起分发。在这种情况下，揭示原始二进制文件的最简单机制是通过模拟器运行代码并存储内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-06T08:21:59.177

看看我调用的 XTEA 修改版本[`Simple Tea`](https://github.com/mihaigalos/Drivers/tree/master/AVR/Encryption)：

```
#include <avr/io.h>
#include "simple_tea.h"

uint8_t secret_data[] = {0xFE, 0x67};
SimpleTEA<sizeof(secret_data) / 2> tea;

int main()
{

    unsigned int rounds{16};
    uint8_t key[] = {0x45, 0x74, 0x32, 0x11, 0x98, 0x94, 0xAB, 0xCF, 0x90, 0xAE, 0xBA, 0xDC, 0x06, 0x16, 0x81, 0x95};

    secret_data[0] = PINB;
    tea.encrypt(rounds, secret_data, key);
    if (secret_data[0] & (PINB))
    {
        PORTC = 0x05;
    }
    secret_data[1] = PINB & (1 << 2);
    tea.decrypt(rounds, secret_data, key);
    if (secret_data[0] & (PINB))
    {
        PORTC = 0x50;
    }
} 
```

在 AVR 上产生 <250 字节的操作码（`if`这里的 s 只需要避免编译器完全优化`encrypt`和`decrypt`输出）：

```
➜  Encryption git:(master) ✗ avr-gcc -std=c++17  -Os -mmcu=atmega328p  main.cpp -o main
➜  Encryption git:(master) ✗ avr-size main                                             
   text    data     bss     dec     hex filename
    214       2       1     217      d9 main
➜  Encryption git:(master) ✗ avr-nm --size-sort -C -r --radix=d main
00000044 T main
00000022 T __do_copy_data
00000016 T __do_clear_bss
00000002 D secret_data
00000001 B tea 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-05T09:10:54.920

我读过椭圆曲线加密（ECC）是一种新事物，旨在为微型处理器带来强大的加密。

Google of:
elliptic curve cryptography 微控制器
在列表顶部对 8 位微控制器上的实现进行了讨论。

但也许考虑转移到 Stack Exchange。例如，这可能很有用：

[Stack Exchange Crypto - 4-8 位微控制器的密码学类型](https://crypto.stackexchange.com/questions/570/types-of-cryptography-for-a-4-8-bit-microcontroller)

# jsf-2 - 动态 ui 下的 actionListener:include 在 p:dialog 中不起作用

> ID：14136842
> 
> 赞同：0
> 
> 时间：2013-01-03T10:17:11.977
> 
> 标签：jsf-2, primefaces

我正在尝试实现 ap:dialog。里面有一个选择列表。根据所选项目，我需要更新对话框上的模板。这工作正常。但是如果我`<p:commandButton>`在动态呈现的模板中有一个，那么它的 actionListener 永远不会被触发。

示例：view.xhtml

```
<p:dialog modal="true" id="addSocialMediaAddressDialogPanel" widgetVar="addSocialMediaAddressDialog" width="500" >
<h:form id="addSocialMediaAddressForm">
    <h:messages />
    <p:selectOneMenu id="currentAddingSocialMedia" value="#{requestScope.selectedMedia}" >  
        <f:selectItems value="#{WebResource.getListByName('SOCIAL_MEDIAS')}" />
        <p:ajax update="addSocialMediaAddressContentPanel" process="@this" />
    </p:selectOneMenu>
    <p:outputPanel id="addSocialMediaAddressContentPanel">
        <ui:include src="#{contactBean.resolveTemplate(requestScope.selectedMedia)}"/>
    </p:outputPanel>    
</h:form>
</p:dialog> 
```

我有这样的模板

```
templates
    |_ twitter.xhtml
    |_ facebook.xhtml
    |_ googlePlus.xhtml 
```

推特.xhtml

```
<table>
    <tr>
        <td>
            <h:outputLabel  styleClass="standardText" value="Twitter Screen Name"/>
        </td>
        <td>
            <p:inputText id="twitterScreenName" value="#{requestScope.twitterScreenName}"/>
        </td>
    </tr>
    <tr>
        <td>
            <p:commandButton value="Add Account" actionListener="#{contactBean.addTwitterAccount(requestScope.twitterScreenName)}" styleClass="btn-blue" process="@form" update=":growl, :messageForm"/>
        </td>
    </tr>
</table> 
```

这是支持豆

```
@Component
@Scope("session")
public class ContactBean implements Serializable {

    private static String SOCIAL_MEDIA_ACCOUNTS_TEMPLATE_PARENT_DIRECTORY = "/templates/";

    public void addTwitterAccount(String screenName){
        //this contiains the implmentation
    }

    public String resolveTemplate(String socialMedia){
        if(socialMedia.equalsIgnoreCase("Twitter")){
            return SOCIAL_MEDIA_ACCOUNTS_TEMPLATE_PARENT_DIRECTORY + "twitter.xhtml";
        }
        if(socialMedia.equalsIgnoreCase("Facebook")){
            return SOCIAL_MEDIA_ACCOUNTS_TEMPLATE_PARENT_DIRECTORY + "facebook.xhtml";
        }
        else if(socialMedia.equalsIgnoreCase("Google+")){
            return SOCIAL_MEDIA_ACCOUNTS_TEMPLATE_PARENT_DIRECTORY + "googlePlus.xhtml";
        }
        return "";
    }
} 
```

在这种情况下，我无法触发任何 actionListener，它是模板目录下任何模板的一部分。我正在使用 JSF 2.1.7 和 Primefaces 3.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:05:51.187

罪魁祸首在这里：

```
<ui:include src="#{contactBean.resolveTemplate(requestScope.selectedMedia)}"/> 
```

这不仅在显示表单的初始 HTTP 请求期间进行评估，而且还在随后处理表单提交的 HTTP 请求期间进行评估。

这`selectedMedia`似乎是一个请求范围的变量，在初始请求结束时会丢失。因此，在处理表单提交的后续 HTTP 请求中，它将评估为`null`，并且在构建视图期间根本不会包含任何模板。这样 JSF 将无法运行`decode()`命令按钮组件，因此它的操作将永远不会被确定和排队。

您需要确保`selectedMedia`在后续 HTTP 请求中保留该变量。`<f:param>`其中一种方法是通过命令按钮内部或`<input type="hidden">`表单内部将其作为请求参数传递给后续请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:26:08.380

bean 中的 actionListener 方法应该有`ActionEvent`参数。看这个[教程](http://www.mkyong.com/jsf2/jsf-2-actionlistener-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-25T16:48:45.593

**删除`<h:form>`子模板中使用的**。在父模板中只保留一个`<h:form>`，并在您包含在父模板中的所有其他子模板中删除它`<ui:include>`

# linux - ds3234如何设置片选

> ID：14136847
> 
> 赞同：0
> 
> 时间：2013-01-03T10:17:47.130
> 
> 标签：linux, driver

我们正在编写一个 spi 驱动程序。如何为 linux ds3234 驱动程序设置“芯片选择引脚”？可以提供帮助的函数或头文件的名称将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:09:19.953

芯片选择引脚设置在探测驱动程序的板文件中，而不是驱动程序代码本身。例如，如果您正在为 Beagleboard 编写此 SPI 驱动程序，您将编辑位于 /arch/arm/mach-omap2 中的 board-omap3beagle.c 文件。编辑应该包括一个新的结构，其中包含驱动程序的模式、总线号和芯片选择号。例如：

```
static struct spi_board_info mcspi_board_info[] = {
    // spi 3.0
    {
        .modalias   = "driver1",
        .max_speed_hz   = 5000000, // 5 Mbps
        .bus_num    = 3,
        .chip_select    = 0,    
        .mode = SPI_MODE_0,
    },

    // spi 3.1
    {
        .modalias   = "driver2",
        .max_speed_hz   = 5000000, //  Mbps
        .bus_num    = 3,
        .chip_select    = 1,    
        .mode = SPI_MODE_3,
    },
}; 
```

然后在 __init 函数中注册驱动程序如下：

```
spi_register_board_info(mcspi_board_info,ARRAY_SIZE(mcspi_board_info)); 
```

当你调用这个注册函数时，驱动的probe函数就会被调用。查看 /Documentation/spi 中的文档。如果你只想编写一个用户空间实现，你可以使用 spidev 接口。这也记录在 /Documentation/spi 中。

# db2 - IBM DB2 9.7 中有多少并发会话是正常的？

> ID：14136856
> 
> 赞同：0
> 
> 时间：2013-01-03T10:18:09.460
> 
> 标签：db2, monitor

我正在使用 db2top 命令来分析我的 DB2 9.7 数据库。它显示了大约 1000 个会话，但我无法理解这些会话是什么。我们有几个并发测试人员测试应用程序。1000 个会话听起来合理吗？我们遇到了一些数据库连接意外断开的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:51:27.130

如果您只有少数并发测试人员超过 1000 个会话是不合理的。没有理由每个用户应该有超过 1 个连接。

您应该验证连接是否在使用后正确关闭，即使 SQL 执行中出现了一些错误。

你没有告诉任何你正在开发的系统类型，但一般来说，如果它是一个客户端-服务器系统，每个客户端应该使用最多 1 个连接，并在客户端程序关闭时释放它。在服务器应用程序上，您应该使用连接池，并且正在使用的最大连接数应该等于您拥有的最大并发用户数。

# jquery-ui - 如何在 jQuery Slider 插件中设置参数（宽度）

> ID：14136861
> 
> 赞同：3
> 
> 时间：2013-01-03T10:18:23.313
> 
> 标签：jquery-ui, jquery-plugins, jquery-slider

我正在使用这个[jQuery Slider 插件](http://egorkhmelev.github.com/jslider/)，我必须设置一个宽度，比如设置 from,to 在这个插件中我完全卡在这个插件中请帮助我克服这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:24:46.047

滑块采用父节点的宽度。因此，将输入放置在具有所需宽度的容器中

```
<div class="span8">
     <input id="SliderSingle" type="slider" name="price" value="20" />
</div> 
```

CSS

```
.span8 {
      width:500px;
} 
```

**编辑** 如果你想自定义你应该在第 154 行添加[的源](https://github.com/egorkhmelev/jslider/blob/master/js/jquery.slider.js)

```
settings: {
  from: 1,
  to: 10,
  step: 1,
  smooth: true,
  limits: true,
  round: 0,
  format: { format: "#,##0.##" },
  value: "5;7",
  width: '100%', // add this line
  dimension: ""
}, 
```

在第 237 行

```
this.domNode.css('width', this.OPTIONS.settings.width);
this.inputNode.after( this.domNode ); 
```

（未经测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:27:32.500

您应该将 class 的 css 设置为`jslider`所需的宽度，这就是我在使用相同插件时所做的。

# jsrender - 访问jsrender循环内的父项

> ID：14136866
> 
> 赞同：7
> 
> 时间：2013-01-03T10:18:30.487
> 
> 标签：jsrender

```
<select id="Test" TestAttr="{{:LocationId}}">              
       {{for #parent.parent.data.Location}}                         
                  <option value="{{:LocationId}}" {{if LocationId= *#parent.parent.data.LocationId*}}selected{{/if}}>{{:#parent.parent.data.LocationId}}</option>                            
       {{/for}}
</select> 
```

如何在**之间提到的if语句中获取父数组的LocationId。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T08:17:37.450

您可以引入将在循环内可见的变量（在官方文档中：[设置上下文模板参数，可在所有嵌套上下文中访问为 ~nameOfParameter](http://borismoore.github.com/jsrender/demos/step-by-step/11_accessing-parent-data.html)）

```
<select id="Test" TestAttr="{{:LocationId}}">  
    {{for #parent.parent.data.Location ~locationId=LocationId}}
       <option value="{{:~locationId}}"... 
```

* * *

***编辑后记：***

上面的链接指向以前的文档，现在已被取代。

有关当前文档，请参阅[访问父数据](https://www.jsviews.com/#parentdata)。

另请参阅此[stackoverflow 问题](https://stackoverflow.com/a/34953167/1054484)

# python - 蟒蛇错误？惰性对象具有隐藏状态

> ID：14136871
> 
> 赞同：2
> 
> 时间：2013-01-03T10:18:49.300
> 
> 标签：python, lazy-evaluation, enumerate

考虑一下（Python 3.3）：

```
a=enumerate([2,3,5])
print(list(a))
print(list(a)) 
```

你真的希望两个打印调用打印不同的东西吗？我也不。

如果将 list 替换为`set`,`tuple`或，也会发生同样的事情`dict`。如果你用or替换`enumerate`object也会发生这种情况，但奇怪的是，如果你用 替换它就不会。`map``filter``range`

也许这是一个特点。但这非常令人惊讶，没有记录（至少我无法找到任何关于它的信息），并且不一致（范围的工作方式不同）。你怎么看？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T10:19:51.367

`enumerate()`返回一个迭代器，其他调用也是如此。您只能循环遍历一个迭代器；然后用尽。

您可以使用生成器函数自己创建这样的迭代器：

```
def somelist_generator():
    somelist = [1, 2, 3]
    while somelist:
        yield somelist.pop() 
```

如果你要循环`somelist_generator()`，列表`somelist`将被清空。你只能这样做一次，因为`.pop()`删除元素：

```
>>> it = somelist_generator()
>>> for i in it:
...     print(i)
... 
3
2
1
>>> next(it)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration 
```

该`next()`调用尝试从`it`迭代器中获取另一个值；它已经是空的，因此`StopIteration`引发了异常。该异常表明没有更多元素要获取，这就是为什么您第二次尝试从迭代器获取任何内容时最终得到一个空列表的原因：

```
>>> list(it)
[] 
```

`range()`不返回迭代器*。*相反，它返回一个[范围对象](http://docs.python.org/3/library/stdtypes.html#ranges)，该对象代表一个内存有效的数字序列；只需要存储开始、结束和步幅，其他所有内容都可以从这 3 个点得出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T10:26:26.957

该行为记录在[http://docs.python.org/3/glossary.html#term-iterator](http://docs.python.org/3/glossary.html#term-iterator)

> 一个值得注意的例外是尝试多次迭代的代码。...使用迭代器尝试此操作只会返回与上一次迭代过程中使用的相同的耗尽迭代器对象，使其看起来像一个空容器。

# .net - 使用 paypal 进行付款，例如信用卡保留功能

> ID：14136876
> 
> 赞同：4
> 
> 时间：2013-01-03T10:19:05.603
> 
> 标签：.net, paypal

亲爱的 stackoverflow 成员，

我是一名开发人员，想为我们的一个客户实施在线支付服务（这是我第一次开发自定义支付服务模块），他们建议使用 PayPal。

我的场景是这样的：

网站将为用户提供创建他们需要资金来完成的项目，项目所有者应指定他需要多少资金以及收集这笔资金所需的时间：示例：“ **User-1** ”创建一个名为“ **Project-1** ”的新项目，他需要“ **1000美元**”来完成他的项目，而筹集这笔资金的时间是“ **1周**”。

现在其他用户可以通过向他的项目捐款不同的金额来帮助（支持）这个人：“1 美元”、“10 美元”、“100 美元”等......

我使用 PayPal 服务需要实现的是将“**支持者**”的钱存放在他们的账户或任何地方，在“ **1周**”期结束后，系统会评估是否达到目标预算与否，这意味着“ **Project-1** ”的筹款是否达到了“ **$1000** ”。

如果资金成功（达到“ **$1000** ”），资金将从支持者（捐赠者）账户中扣除并发送给项目所有者“ **User-1** ”（PayPal 和系统将收取费用），但如果基金失败，这笔钱不会被扣除，支持者（捐赠者）将有钱退回（取消对这笔钱的冻结）。

这是可以通过 PayPal 服务完成的吗？还是我应该调查另一种方法？

我在PayPal的文档和很多文章中尝试和搜索了allot，但都是指直接支付和退款操作，这将花费系统资金，因为PayPal会扣除支付和退款的费用。

我真的很感激在这件事上的任何帮助。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:58:19.293

授权和捕获在这里可能很有用，但这听起来像是一个更适合[自适应支付](https://www.x.com/sites/default/files/pp_adaptivepayments.pdf)的项目。特别[是 Preapproval](https://www.x.com/developers/paypal/documentation-tools/api/preapproval-api-operation)和[Pay](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)，分别在该 PDF 文档的第 8 章和第 6 章中介绍。

Adaptive Payments 平台以 Authorization 和 Capture 不具备的方式打开了 PayPal，并且在此类项目中非常有用。

它基本上是提到的亚马逊灵活支付平台的 PayPal 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:14:06.123

PayPal 确实支持授权功能。基本上，您从用户那里获得您想要的金额的授权，如 10 美元、100 美元等，如上所述，然后您可以稍后使用授权向用户收费。您可以使用 PayPal 帐户和信用卡进行授权。详细的文章可在此处获得。

使用 PayPal ExpressCheckout：[https ://developer.paypal.com/docs/classic/express-checkout/ht_ec-singleAuthPayment-curl-etc/](https://developer.paypal.com/docs/classic/express-checkout/ht_ec-singleAuthPayment-curl-etc/)

使用信用卡和 DirectPayment：[https ://developer.paypal.com/docs/classic/paypal-payments-pro/integration-guide/authorizations/](https://developer.paypal.com/docs/classic/paypal-payments-pro/integration-guide/authorizations/)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-13T16:43:10.130

对于像 PayPal 这样的众筹网站，有[这个文件](https://developer.paypal.com/docs/classic/lifecycle/crowdfunding/)

# database - 查询表达式 'ID = 4 中的字符串语法错误

> ID：14136879
> 
> 赞同：3
> 
> 时间：2013-01-03T10:19:14.127
> 
> 标签：database, ms-access-2007, vbe

我正在使用 Visual Basic 2010 express 来控制 Ms.Access 2007 数据库。我正在努力向数据库添加记录。

我在查询表达式 'ID = 4 中的字符串中出现语法错误

这是我的代码：

```
 If ComboBox1.Text = "" Or TxtJam.Text = "" Or TxtAudio.Text = "" Then
            MessageBox.Show("Data belum lengkap", "Error", MessageBoxButtons.OK, messageBoxIcon.Error)
        Else

            myqry = "UPDATE TblJadwal SET "
            myqry = myqry + " Hari = '" & ComboBox1.Text & "',"
            myqry = myqry + " Jam = '" & TxtJam.Text & "',"
            myqry = myqry + " Audio = '" & TxtAudio.Text & "'"
            myqry = myqry + "WHERE "

            myqry = myqry + "ID = " & TxtID.Text & "'"
            mycmd = New OleDbCommand(myqry, conn)
            mycmd.ExecuteNonQuery()
            Call Set1()
        End If 
```

和我的数据库

```
ID , autonumber
Hari, text 
Jadwal, text 
Jam, Text 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:21:12.350

这是问题所在：

```
"ID = " & TxtID.Text & "'" 
```

你`'`在最后添加一个。语法不正确。

您应该在开头也有一个，或者根本没有（如果 ID 是数字）。

```
"ID = '" & TxtID.Text & "'" 
```

或者：

```
"ID = " & TxtID.Text 
```

# jquery - 使用 Angular js 访问 DOM 元素兄弟

> ID：14136880
> 
> 赞同：1
> 
> 时间：2013-01-03T10:19:14.483
> 
> 标签：jquery, jquery-ui, angularjs

我在指令中有一个链接功能，其中我有一个切换功能来编辑当前活动的 DOM 元素的 css 内容。如何访问该 DOM 元素的父类或子类。

指令的一部分：

```
 link: function(scope, element, attrs) {

        var title = angular.element(element.children()[0]),
            opened = true;

        title.bind('click', toggle);

        function toggle() {
            opened = !opened;
                element.removeClass(opened ? 'closed' : 'opened');                  
                element.addClass(opened ? 'opened' : 'closed');
            element.siblings().removeclass('opened').addclass('closed');  // What to do here  

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:24:00.697

我会将您的链接功能更改为：

```
link: function(scope, element, attrs) {
    var title = angular.element(element.children()[0]),
        opened = true;

    title.bind('click', toggle);

    function toggle() {
        opened = !opened;
        element.parent().children().addClass("closed");
        element.parent().children().removeClass("opened");
        element.toggleClass("opened", opened);
        element.toggleClass("closed", !opened); //might be redundantdepending on the rest of your code

    }
} 
```

我认为您的操作顺序错误，如果您首先删除/添加所需的所有类，然后修改元素，您将得到您想要的结果。只需选择元素父元素，然后获取它的所有父子元素。.children() 仅选择父级的直接后代，而类似的 .find() 方法将遍历层次结构。根据是否有其他方法可以关闭元素，可能不需要冗余代码。

# wcf - 关于 WCF InstanceContextMode

> ID：14136888
> 
> 赞同：0
> 
> 时间：2013-01-03T10:19:49.193
> 
> 标签：wcf

我是 WCF 的新手。经常凝视 wcf 代码和文章。在查看了许多代码后，我经常坚持非常基本的事情，并且没有对以下问题进行详细讨论。所以这是我的几个基本问​​题....并寻找示例情况和示例代码的详细讨论。

什么是 InstanceContextMode？许多人使用 InstanceContextMode Single 或 PerCall 或 PerSession ？

当我应该选择 InstanceContextMode Single 或 PerCall 或 PerSession 时，我只需要深入了解？它基本上做什么？

简要告诉我何时打开 Single 会发生什么，或者在 PerCall 或 PerSession 的情况下会发生什么？Single 或 PerCall 或 PerSession 有什么区别

什么是默认 InstanceContextMode ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:41:59.643

[InstanceContextMode](http://msdn.microsoft.com/en-us/library/system.servicemodel.instancecontextmode.aspx)属性指示 WCF 将如何创建服务类的实例以及这些实例是否将在请求之间重用。

*   **PerSession**：（默认）将为每个 WCF 会话创建一个服务实例，用于支持会话的通道（否则，行为与 PerCall 相同）；如果您在服务类中为每个客户端会话维护状态，则此值很有用
*   **PerCall**：将为来自客户端的每个 WCF 操作（方法调用）创建一个新的服务类实例
*   **Single**：在宿主进程中只创建一个服务实例，它将为所有传入的请求提供服务；[除非服务的ConcurrencyMode](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.concurrencymode.aspx)行为设置为 ，否则所有调用都将序列化到服务`Multiple`。

对于大容量无状态服务，使用`Single`and`ConcurrencyMode.Multiple`可以减少分配的服务实例数量以及垃圾收集器的相关压力。但是，WCF 不要求/假设您的服务是无状态的，这就是为什么`PerSession`是默认的。

您可以通过在服务的默认构造函数中设置断点来验证不同实例上下文模式的行为。

# c# - 如何正确获取 MediaElement.DroppedFramesPerSecond？

> ID：14136891
> 
> 赞同：1
> 
> 时间：2013-01-03T10:19:53.637
> 
> 标签：c#, silverlight, mediaelement

如何正确使用`MediaElement.DroppedFramesPerSecond`？我不知道如何在更新时丢帧。没有与丢帧相关的事件。我必须创建一个计时器来手动查询丢帧。它并不优雅，但我如何确保计时器正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:46:36.057

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.droppedframespersecond%28v=vs.95%29.aspx)：

> 获取媒体每秒丢弃的帧数。

```
public double DroppedFramesPerSecond
{
    get
    {
        return (double)base.GetValue(MediaElement.DroppedFramesPerSecondProperty);
    }
} 
```

[MediaElement](http://msdn.microsoft.com/en-us/library/ms611595%28v=vs.95%29.aspx)类看起来像它获取每秒帧数、丢帧等信息。你应该看看[这个项目](https://slextensions.codeplex.com/)。

# c++ - C ++“for循环”将数据保存在数组中，然后写入文件唯一数据

> ID：14136892
> 
> 赞同：0
> 
> 时间：2013-01-03T10:19:58.507
> 
> 标签：c++

我有以下for循环：

```
ofstream myfile;
myfile.open ("proc.txt", ios::app);

for (unsigned int i=0; i<res.size(); ++i)
{
    std::cout << res[i] << std::endl;
    myfile << res[i] << "\n";
}

myfile.close(); 
```

如何将所有数据保存`res[i]`到数组或缓冲区中，然后在循环结束后整理日期，使其唯一，然后打印出来并保存到文件中（这样我就没有重复的数据）？

在我的示例中，我的代码输出显示了一些数字，例如：

`123456 123456 12345678`

但我只需要：

`123456 12345678`

我的完整代码如下：

```
#include <iostream>
#include <fstream>
#include <string>
#include <windows.h>
#include <algorithm>
#include <iterator>
#include <regex>

void find_locs(HANDLE process) {

    unsigned char *p = NULL;
    MEMORY_BASIC_INFORMATION info;

    for ( p = NULL;
        VirtualQueryEx(process, p, &info, sizeof(info)) == sizeof(info);
        p += info.RegionSize )
    {
        std::string buffer;

        if (info.State == MEM_COMMIT &&
            (info.Type == MEM_MAPPED || info.Type == MEM_PRIVATE))
        {
            DWORD bytes_read;

            buffer.resize(info.RegionSize);
            ReadProcessMemory(process, p, &buffer[0], info.RegionSize, &bytes_read);
            buffer.resize(bytes_read);

            const std::tr1::regex rx("(^[0-9]{8,10}$");
            std::tr1::match_results<std::string::const_iterator> res; 
            std::tr1::regex_search(buffer, res, rx);

            ofstream myfile;
            myfile.open ("proc.txt", ios::app);

            for ( unsigned int i=0; i<res.size(); ++i)
            {
                std::cout << res[i] << std::endl ;
                myfile << res[i] << "\n";
            }

            myfile.close;
        }
    }
}

int main(int argc, char **argv) {
    if (argc != 2) {
        fprintf(stderr, "Usage: %s <process ID>", argv[0]);
        return 1;
    }

    int pid;
    sscanf_s(argv[1], "%i", &pid);

    HANDLE process = OpenProcess(
        PROCESS_VM_READ | PROCESS_QUERY_INFORMATION,
        false,
        pid);

    find_locs(process);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:23:05.440

您可以写入 a`std:set<long>`或 a `std::list<long>`then sort 并运行 std::list::unique() 函数以删除所有重复的元素。

如我所见`res.size()`， res 已经是一种 STL 容器了吗？如果是，您可以简单地对 res 进行排序并调用 std::unique() 算法来删除重复的元素：

```
std::sort(res.begin(), res.end());
std::unique(res.begin(), res.end()); 
```

见参考：

*   [标准::设置](http://en.cppreference.com/w/cpp/container/set)
*   [标准::列表](http://en.cppreference.com/w/cpp/container/list)
*   [std::list::unique](http://en.cppreference.com/w/cpp/container/list/unique)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T10:26:50.883

将它放入 a`std::set`可能是最好的方法，因为它已经排序并消除了重复项。稍后您可以简单地对其进行迭代并打印

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:26:26.367

您可以将您的数据复制到一个集合中，然后将集合的内容写入您的文件中；就像是：

```
std::set<int> unique;
std::copy(res.begin(), res.end(), std::inserter(unique, unique.begin());
for (std::set<int>::const_iterator i = unique.begin(); i != unique.end(); ++i)
{
  myfile << *i << std::endl;
} 
```

# css - Center 3 divs 水平全屏

> ID：14136893
> 
> 赞同：0
> 
> 时间：2013-01-03T10:19:59.420
> 
> 标签：css, html, internet-explorer-6, fullscreen, center

请参考下图（浏览器屏幕）：A、B、C 和 D 是 div。A 和 C 具有固定的高度和宽度 = 100%。D是一个以B为中心的div。有人可以帮忙用css代码来完成这个吗？

如果可能，必须与 IE6 兼容。

![这是你的浏览器屏幕](../Images/678d50e3a81c413fd2f69509aca0706a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:04:26.603

试试这个 html & css: HTML:

```
<div class="box-wrap">
<div id="A">A</div>
<div id="B">
    <div id="D">D</div>
</div>
<div id="C">C</div>
</div> 
```

CSS：

```
.box-wrap{
border: 1px solid #000000;
height: 267px;
margin: 10px;
padding: 5px;
width: 357px;
}
#A{margin-bottom:5px;}
#C{margin-top:5px;}
#A,
#C{
background:#857a60;
height:70px;
width:100%;
}
#D{
background:#0096FF;
height: 93px;
margin: 0 auto;
width: 219px;
}
#B{
background: #857A60;
display: table-cell;
height: 117px;
position: static;
vertical-align: middle;
width: 357px;
} 
```

[http://jsfiddle.net/rakesh_vadnal/JjPcX/3/](http://jsfiddle.net/rakesh_vadnal/JjPcX/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:47:38.487

您可以使用各种 css 属性来获取它。这是一个使用您的依赖项更改此示例的示例

```
#A{
height: 100px;
background-color: orange;
}
#B{
height: inherit;
}
#D{
display: inline-block;
position: relative;
top: 50%;
left: 50%;
margin-top: 70px;
margin-left:-100px;
}
#C{
height: 100px;
background-color: green;
position: absolute;
bottom: 0px;
width: 100%;
} 
```

[看演示](http://jsfiddle.net/Dineshkani/8Qjsa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:50:25.667

HTML：

```
<body>
  <div id="a">
  </div>
  <div id="b">
     <div id="d">
     </div>
  </div>
  <div id="c">
  </div>
</body> 
```

CSS：

```
body{
width:500px;
background:red;   
}
div#a{
height:100px;
width:100%;
border:2px solid black;
margin-bottom:20px;
}
#b{
height:300px;
width:100%;
border:2px solid black;
}
#c{
margin-top:20px;
height:100px;
width:100%;
border:2px solid black;
}
div #d{
height:200px;
width:70%;
background:blue;
margin: 0 auto;
margin-top:50px;
} 
```

我不知道这是否与IE6兼容。你可以试试。我把边界只是为了测试目的。你可以在 CSS 中删除它。JS 小提琴链接：http: [//jsfiddle.net/sqrcE/](http://jsfiddle.net/sqrcE/)

# javascript - 通过 PhoneGap 移动地图上的标记，如 GPS

> ID：14136894
> 
> 赞同：1
> 
> 时间：2013-01-03T10:20:00.470
> 
> 标签：javascript, android, html, google-maps, cordova

在使用 HTML5 + PhoneGap 构建的应用程序上，

如何在谷歌地图上做一个标记，以便在设备的每次移动时移动到确切的位置，**就像在 GPS 中一样**

可以**通过JS**完成吗？如果没有，通过 Android 也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:29:21.387

我没有用 JS 移动标记，而是用 PhoneGap 移动了它，

看到这个问题：

[onlocationchanged 函数从未调用过-> PhoneGap](https://stackoverflow.com/questions/14196074/onlocationchanged-function-never-called-phonegap/14234210#14234210)

# android - 如何在android中显示歌曲的缩略图？

> ID：14136899
> 
> 赞同：4
> 
> 时间：2013-01-03T10:20:25.953
> 
> 标签：android, android-mediaplayer

我正在显示来自 SDCard 的所有歌曲以及 TITLE、ARTIST、ALBUM 等所有信息。

但是我遇到了歌曲缩略图的问题。如何获得歌曲缩略图。？

以下是我的代码。

```
public class AndroidListMediaActivity extends ListActivity {

 SimpleCursorAdapter adapter;
 MediaPlayer myMediaPlayer;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      String[] from = {
        MediaStore.MediaColumns.TITLE};
      int[] to = {
        android.R.id.text1};

      Cursor cursor = managedQuery(
        MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
        null,
        null,
        null,
        MediaStore.Audio.Media.TITLE);

      adapter = new SimpleCursorAdapter(this,
        android.R.layout.simple_list_item_1, cursor, from, to);
      setListAdapter(adapter);
  }

 @Override
 protected void onListItemClick(ListView l, View v, int position, long id) {
  Cursor cursor = adapter.getCursor();
  cursor.moveToPosition(position);

  String _id = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media._ID));
  String title = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.TITLE));
  String artist = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST));
  String album = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM));
  int duration = cursor.getInt(cursor.getColumnIndex(MediaStore.Audio.Media.DURATION));

  Uri playableUri
   = Uri.withAppendedPath(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, _id);
  myMediaPlayer = MediaPlayer.create(getBaseContext(), playableUri);
  String msgMediaPlayer;
  if(myMediaPlayer != null){
   myMediaPlayer.start();
   msgMediaPlayer = "Playing: " + playableUri + "\n";
  }else{
   msgMediaPlayer = "Cannot play: " + playableUri + "\n";
  }

  String info = msgMediaPlayer + "\n"
     + "_ID: " + _id + "\n"
     + "TITLE: " + title + "\n"
     + "ARTIST: " + artist + "\n"
     + "ALBUM: " + album + "\n"
     + "DURATION: " + duration/1000 + "s";

  Toast.makeText(this, info, Toast.LENGTH_LONG).show();
 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:28:23.517

使用以下示例对我有用。

```
public class Main extends ListActivity
{

String[] videoFileList = {
        "/sdcard/Video/1.mp4",
        "/sdcard/Video/2.mp4",
        "/sdcard/Video/3.mp4",
        "/sdcard/Video/5.mp4"
};

public class MyThumbnaildapter extends ArrayAdapter<String>
{

    public MyThumbnaildapter(Context context, int textViewResourceId,String[] objects) 
    {
        super(context, textViewResourceId, objects);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        // TODO Auto-generated method stub

        View row = convertView;
        if(row==null)
        {
            LayoutInflater inflater=getLayoutInflater();
            row=inflater.inflate(R.layout.second_list_item, parent, false);
        }

        TextView textfilePath = (TextView)row.findViewById(R.id.FilePath);
        textfilePath.setText(videoFileList[position]);
        ImageView imageThumbnail = (ImageView)row.findViewById(R.id.Thumbnail);

        Bitmap bmThumbnail;
        if(new File(videoFileList[position]).exists())
        {
            bmThumbnail = ThumbnailUtils.createVideoThumbnail(videoFileList[position], MediaStore.Images.Thumbnails.MINI_KIND);
            bmThumbnail=Bitmap.createScaledBitmap(bmThumbnail,150,150, true);
            imageThumbnail.setImageBitmap(bmThumbnail);
            textfilePath.setText(videoFileList[position]);
        }

        return row;
    }

}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setListAdapter(new MyThumbnaildapter(Main.this, R.layout.second_list_item, videoFileList));
} 
```

}

# iphone - 在 IOS 如何在客户帐户中创建分发证书

> ID：14136900
> 
> 赞同：0
> 
> 时间：2013-01-03T10:20:26.470
> 
> 标签：iphone, ios, ios4, iphone-sdk-3.0

我想创建用于上传应用程序的 IOS 分发证书。我有客户端签名用户名和密码，我在安装该证书后创建了分发证书我有一些警告消息“找不到有效的签名身份”。请任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:33:12.893

这背后有很多原因。我也陷入了这个问题。

看看我的[答案](https://stackoverflow.com/questions/2108503/code-sign-error-the-identity-iphone-developer-doesnt-match-any-valid-certifi/12294275#12294275)。

一个美丽的[问题](https://stackoverflow.com/questions/688809/how-to-create-a-private-key-for-iphone-distribution-certificate)就在这里。

如果您需要一些解释：

[如何创建 ios 证书。](https://www.vbulletin.com/forum/content.php/506-Creating-your-iOS-Certificates)

# android - 使用 Phonegap 和 Android 的地理位置

> ID：14136902
> 
> 赞同：1
> 
> 时间：2013-01-03T10:20:55.800
> 
> 标签：android, google-maps, cordova, jquery-mobile, geolocation

我在 phonegap 上设计一个移动应用程序。在这我试图获得用户的当前位置。但我没有在 Andriod Emulator 上获得地图。我使用了这段代码：

```
<!DOCTYPE HTML>

<html>

     <head>

<meta name="viewport" content="width=device-width; height=device-height; user-scalable=no" />

<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>PhoneGap Map</title>
<link rel="stylesheet" href="/master.css" type="text/css" media="screen" />
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
<script type="text/javascript">

function onLoad() {
document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError,{alert("error"),"enableHighAccuracy":true,"timeout":3000});

}

//GEOLOCATION
var onSuccess = function(position) {
    alert("Latitude: "  + position.coords.latitude   + "\n" +
          "Longitude:" + position.coords.longitude  + "\n");

    var myLat = position.coords.latitude;
    var myLong = position.coords.longitude;

    //MAP
    var mapOptions = {
        center: new google.maps.LatLng(myLat, myLong),
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),
                                  mapOptions);

};

// onError Callback receives a PositionError object
//
function onError(error) {
    alert("code: "    + error.code    + "\n" +
          "message: " + error.message + "\n");
}

     </script>

     </head>
     <body onload="onLoad()"> 
     <div>map</div>
     <div id="map_canvas" style="width:100px; height: 100px;" ></div>
     </body>
     </html> 
```

我不知道我在哪里错了。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:00:33.357

检查此代码...将cordova-1.8.1.js 更改为您的cordova2.0.js ...其余源代码可在线参考。如果它不起作用。然后你的phonegap配置有问题。

```
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
            <meta charset="utf-8">
                <title>Google Maps JavaScript API v3 Example: Info Window Simple</title>
                <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
                    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
                     <script type="text/javascript" charset ="utf-8" src="cordova-1.8.1.js"></script>
                    <script>
                        function initialize() {
                            var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
                            var mapOptions = {
                                zoom: 4,
                                center: myLatlng,
                                mapTypeId: google.maps.MapTypeId.ROADMAP
                            }

                            var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

                            var contentString = '<div id="content">'+
                            '<div id="siteNotice">'+
                            '</div>'+
                            '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
                            '<div id="bodyContent">'+
                            '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
                            'sandstone rock formation in the southern part of the '+
                            'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
                            'south west of the nearest large town, Alice Springs; 450&#160;km '+
                            '(280&#160;mi) by road. Kata Tjuta and Uluru are the two major '+
                            'features of the Uluru - Kata Tjuta National Park. Uluru is '+
                            'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
                            'Aboriginal people of the area. It has many springs, waterholes, '+
                            'rock caves and ancient paintings. Uluru is listed as a World '+
                            'Heritage Site.</p>'+
                            '<p>Attribution: Uluru, <a href="http://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
                            'http://en.wikipedia.org/w/index.php?title=Uluru</a> '+
                            '(last visited June 22, 2009).</p>'+
                            '</div>'+
                            '</div>';

                            var infowindow = new google.maps.InfoWindow({
                                                                        content: contentString
                                                                        });

                            var marker = new google.maps.Marker({
                                                                position: myLatlng,
                                                                map: map,
                                                                title: 'Uluru (Ayers Rock)'
                                                                });
                            google.maps.event.addListener(marker, 'click', function() {
                                                          infowindow.open(map,marker);
                                                          });
                        }

                        </script>
                    </head>
    <body onload="initialize()">
        <div id="map_canvas"></div>
    </body>
</html> 
```

# extjs - ExtJS 4：即使浏览器也不会提示将输入的数据保存到表单字段中

> ID：14136904
> 
> 赞同：0
> 
> 时间：2013-01-03T10:21:03.280
> 
> 标签：extjs, extjs4, extjs4.1

ExtJS 4.1.1a

简单的授权表格（登录和密码）。

与带有输入的标准 html 表单不同，即使浏览器也不会提示保存输入的登录名和密码值。

示例代码：http: [//jsfiddle.net/AllanStark/mKMfh/1/](http://jsfiddle.net/AllanStark/mKMfh/1/)

```
Ext.create('Ext.window.Window', {
  title: 'Test',
  height: 430,
  width: 335,
  bodyPadding: '20 0 0 0',
  draggable: false,
  resizable: false,
  closable: false,
  layout: {
    type: 'vbox',
    align: 'center'
  },
  bodyStyle: {
    background: '#FFFFFF'
  },
  items: [{
    xtype: 'image',
    width: 150,
    height: 150,
    src: 'images/logo.gif'
  },{
    xtype: 'form',
    url: 'login.php',
    standardSubmit: true,
    border: 0,
    width: 170,
    padding: '20 0 20 0',
    defaultType: 'textfield',
    layout: 'vbox',
    fieldDefaults: {
      labelAlign: 'top',
      msgTarget: 'qtip',
      width: '100%'
    },
    items: [{
      xtype:'textfield',
      fieldLabel: 'Login',
      name: 'login',
      allowBlank: false
    },{
      xtype:'textfield',
      fieldLabel: 'Password',
      name: 'pass',
      inputType: 'password',
      allowBlank: false,
      listeners: {
        specialkey: function(field, e){
          if (e.getKey() == e.ENTER) {
            var form = field.up('form').getForm();
            form.submit();
          }
        }
      }
    }],
    buttons: [{
      text: 'Ok',
      formBind: true,
      disabled: true,
      handler: function() {
        var form = this.up('form').getForm();
        form.submit();
      }
    },{
      text: 'Reset',
      handler: function() {
        this.up('form').getForm().reset();
      }
    }]
  }]
}).show();​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:10:17.400

要打开密码对话框，html-attribute 自动完成必须是“on”。在 Extjs 中它的“关闭”并且没有任何方法可以将其更改为“解决方法”。所以将此事件添加到密码和用户名的侦听器中：

```
后渲染：函数（cmp）{
   cmp.inputEl.set({
       自动完成：'开'
   });
}
```

```
Ext.create('Ext.window.Window', {
  标题：'测试'，
  身高：430，
  宽度：335，
  bodyPadding: '20 0 0 0',
  可拖动：假，
  可调整大小：假，
  可关闭：假，
  布局： {
    类型：'vbox'，
    居中对齐'
  },
  身材： {
    背景：'#FFFFFF'
  },
  项目： [{
    xtype：'图像'，
    宽度：150，
    身高：150，
    src：'图像/logo.gif'
  },{
    xtype：'形式'，
    网址：'login.php'，
    标准提交：真，
    边界：0，
    宽度：170，
    填充：'20 0 20 0'，
    默认类型：'文本字段'，
    布局：'vbox'，
    字段默认值：{
      标签对齐：'顶部'，
      msgTarget: 'qtip',
      宽度：'100%'
    },
    项目： [{
      xtype:'文本域',
      fieldLabel: '登录',
      名称：'登录'，
      允许空白：假，
      听众：{
        // ------
        后渲染：函数（cmp）{
            cmp.inputEl.set({
                 自动完成：'开'
            });
       }
       // ------
      }
    },{
      xtype:'文本域',
      fieldLabel: '密码',
      名称：'通过'，
      输入类型：'密码'，
      允许空白：假，
      听众：{
        特殊键：函数（字段，e）{
          if (e.getKey() == e.ENTER) {
            var form = field.up('form').getForm();
            form.submit();
          }
        },
        // ------
        后渲染：函数（cmp）{
            cmp.inputEl.set({
                 自动完成：'开'
            });
       }
       // ------
      }
    }],
    纽扣： [{
      文字：“好的”，
      表单绑定：真，
      禁用：真，
      处理程序：函数（）{
        var form = this.up('form').getForm();
        form.submit();
      }
    },{
      文本：'重置'，
      处理程序：函数（）{
        this.up('form').getForm().reset();
      }
    }]
  }]
}).show();​

```

# wcf - wcf ConcurrencyMode 的目的是什么

> ID：14136913
> 
> 赞同：0
> 
> 时间：2013-01-03T10:21:22.203
> 
> 标签：wcf

我是 WCF 的新手。经常凝视 wcf 代码和文章。在查看了许多代码后，我经常坚持非常基本的事情，并且没有对以下问题进行详细讨论。所以这是我的几个基本问​​题....并寻找示例情况和示例代码的详细讨论。

什么是并发模式？？实际上 ConcurrencyMode 做了什么......它决定了什么？可用的 ConcurrencyMode 很少，它们是 Multiple、Reentrant 和 Single

在什么样的情况下应该使用哪种并发模式。什么将是最好的选择。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:03:07.267

这取决于你需要什么。如果您需要在应用程序的整个生命周期内实例化您的服务的**单个**实例，您可能希望使用 single。例如，如果由于某种原因实例化该服务非常昂贵并且它没有被经常调用，那么您可能会这样做，因此您不必担心多个线程同时访问它。

```
 [ServiceBehavior(Namespace = "http://somenamespace", InstanceContextMode = InstanceContextMode.Single)]
public sealed class ServiceWithExpensiveDictionary : IServiceWithExpensiveDictionary, IDisposable
{
    private DataCacheFactory factory;
    private ConcurrentDictionary<string, DataCache> dataCacheDictionary;

    /// <summary>
    /// Constructor
    /// </summary>
    public ServiceWithExpensiveDictionary()
    {
        factory = new DataCacheFactory();

        dataCacheDictionary = new ConcurrentDictionary<string,DataCache>();
    } 
```

在上面的代码中，当我将昂贵的对象放入其中时，我希望服务的所有调用者都可以使用 ConcurrentDictionary 实例。

如果您打算让用户与您的 api 进行有状态的长时间运行的对话，则可以使用**session 。**

如果您的服务是无状态的并且服务实例化很便宜，您可能会使用**每次调用。**

这真的取决于你想做什么。

这里还有一个与此相关的好问题。它还涉及您可能也感兴趣的节流：-

[WCF ConcurrencyMode Single 和 InstanceContextMode PerCall](https://stackoverflow.com/questions/7122608/wcf-concurrencymode-single-and-instancecontextmode-percall)

# tfs - 如何配置 TFS 2012 燃尽图来跟踪错误？

> ID：14136921
> 
> 赞同：3
> 
> 时间：2013-01-03T10:21:49.667
> 
> 标签：tfs, burndowncharts

基于[这个答案](https://stackoverflow.com/a/10353521/117507)，TFS 11 燃尽图的模型适用于儿童故事的任务。

如何在 sprint 期间显示当前打开的 bug 的燃尽图，而无需为它们创建从属工作项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T22:59:53.660

它的目的是在将 bug 添加到 sprint 后立即将任务添加为 bug 的子级。这些任务将推动燃尽。Product Backlog Items 也是如此，通过 web ui 非常简单。错误本身的估计数据将在发布燃尽图中表示。

如果您希望错误本身作为任务运行，您可以：

*   使用任务工作项记录错误。这对于在当前 sprint 中进行的工作中发现的错误非常常见。实现“完成”只是一些额外的工作。
*   更新错误的工作项定义以具有正确的状态和字段，并将其添加到任务类别。这个[过程主要在这个问题中描述](https://stackoverflow.com/questions/12536132/how-to-add-bugs-to-tfs-2012-task-board)。

您还应该记住，在前一个 sprint 中完成的工作中发现的错误应该只在当前 sprint 中的 sprint 计划会议期间，或者当作为当前 sprint 的一部分修复它至关重要时才被发现。在第一种情况下，将其视为任何其他 PBI 并将其分解为任务。在第二种情况下，立即修复它，不要为烧毁而烦恼，这个错误很严重，应该立即*修复*。

# activerecord - 什么是动态 DAO？

> ID：14136929
> 
> 赞同：0
> 
> 时间：2013-01-03T10:22:27.933
> 
> 标签：activerecord, dao

这篇[博客](http://emmanuelbernard.com/blog/2007/01/07/activerecord-pattern-so-what/)讨论了使用动态 DAO 代替 activerecord。在静态类型语言的上下文中，“动态”DAO 到底是什么意思？这是否仅适用于 VM 上的静态类型语言或编译语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:56:28.343

DAO 和 ActiveRecord 都是访问数据库中数据的模式。DAO 代表“数据访问对象”。以下是相关 Wikipedia 页面的链接，以了解有关各个模式的更多信息。

*   活动记录：[http ://en.wikipedia.org/wiki/Active_record_pattern](http://en.wikipedia.org/wiki/Active_record_pattern)
*   DAO：[http ://en.wikipedia.org/wiki/Data_access_object](http://en.wikipedia.org/wiki/Data_access_object)

请注意，ruby gem activerecord 是“Active Record”模式的实现，它恰好与该模式具有相同的名称。

# c# - 如何将当前模型发送到 UIHint 视图

> ID：14136932
> 
> 赞同：0
> 
> 时间：2013-01-03T10:22:32.440
> 
> 标签：c#, asp.net-mvc-3

**介绍：**

我有一个带有字段调用值的网格，该字段可以由用户编辑。

在我的模型上，我有一个带有可能值的 IEnumerable 列表，如果用户尝试编辑时可能值 = 空（网格上的值字段），我应该默认显示一个文本框，但如果可能值有值，我将不得不显示一个具有所有可能值的下拉列表。

**问题：**

在编辑模式下使用 UIHint 我可以显示一个下拉列表，但我不知道如何将当前模型发送到覆盖视图...

**编码：**

模型：

```
public class FamilyParameter
{
    public FamilyParameter()
    {
        PossibleValues = new List<string>();
    }

    [DisplayName("Value")]
    [UIHint("_FamilyParameterValue")]
    public string Value { get; set; }

    public IEnumerable<string> PossibleValues { get; set; }

    }
} 
```

查看：Shared/EditorTemplates/_FamilyParameterValue.cshtml

```
@model Bpt.Domain.FamilyParameter
@Html.Telerik().DropDownList().Name("demo"); 
```

视图：主要

```
<div style="height:270px" >
    <table>
        <tr>
            <td width="100%"> 
                <br />

                @(Html.Telerik().Grid<FamilyParameter>()
                    .Name("GridParam")
                    .DataKeys(keys => keys.Add(param => param.Code))
                    .HtmlAttributes(new { style = "width: 420px;" })
                    .NoRecordsTemplate("No existen resultados...")
                    .DataBinding(
                        dataBinding => dataBinding.Ajax()
                            .Select("_EditMaterial_SelectParameters", Controllers.Valoration,Model)
                            .Update("_EditMaterial_UpdateParameters", Controllers.Valoration,Model)
                        )
                    .Columns(columns =>
                    {
                        columns.Bound(param => param.Code).Width("75px").HtmlAttributes(new { style = "text-align: left;" }).ReadOnly();
                        columns.Bound(param => param.Description).Width("200px").HtmlAttributes(new { style = "text-align: left;" }).ReadOnly();
                        columns.Bound(param => param.Value).Width("65px").HtmlAttributes(new { style = "text-align: left;" });
                        columns.Command(commands =>
                                        commands.Edit().ButtonType(GridButtonType.Image)
                            ).Width(60);
                    })
                    .Editable(editing => editing.Mode(GridEditMode.InLine))
                    .Scrollable(scrolling => scrolling.Height(140))
                    .Footer(false)
                    .Sortable()
                    .Resizable(resizing => resizing.Columns(true))
                    .Reorderable(reorder => reorder.Columns(true))
                )

            </td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:25:07.300

我已经解决了！！

也许不是最好的方法，但效果 100% 很好：

**这个怎么运作：**

在我的 UIHint 视图中，我创建了一个简单的 Div。每次用户在我的网格上进入编辑模式时，我都会执行一个带有 ajax 发布操作的 Javascript，这将返回一个 url。然后我将执行 url 以加载一个带有 DropDownList 和另一个带有 TextBox 的 PartialView。

希望能帮助到你！

**完整代码：**

查看：Shared/EditorTemplates/_FamilyParameterValue.cshtml

```
<div id="divFamilyParameterValue"> </div> 
```

控制器：

```
 public ActionResult FamilyPArameterValueDdl(string id)
        {
            var tmpParameter = DetailHvmModel.HvmModel.CurrentArticle.Family.Parameters.Where(e => e.Code == id).FirstOrDefault();
            return PartialView("_FamilyPArameterValueDdl",tmpParameter);
        }
    public ActionResult FamilyPArameterValueTextBox(string id)
    {
        var tmpParameter = DetailHvmModel.HvmModel.CurrentArticle.Family.Parameters.Where(e => e.Code == id).FirstOrDefault();
        return PartialView("_FamilyPArameterValueTextBox", tmpParameter);
    }

    public ActionResult _EditMaterial_EditParameters(string id)
    {

        var tmpParameter = DetailHvmModel.HvmModel.CurrentArticle.Family.Parameters.Where(e => e.Code == id).FirstOrDefault();
        string FamilyParameterValueView;
        // get the parameter that will edit 

        if(tmpParameter.PossibleValues.Any())
        {
              FamilyParameterValueView = Url.Action("FamilyPArameterValueDdl");
        }
        else
        {
             FamilyParameterValueView = Url.Action("FamilyPArameterValueTextBox");
        }

        return Json(new { familyParameterValueView = FamilyParameterValueView });
    } 
```

视图：主要

```
<div style="height:270px" >
    <table>
        <tr>
            <td width="100%"> 
                <br />

                @(Html.Telerik().Grid<FamilyParameter>()
                      .Name("GridParam")
                      .DataKeys(keys => keys.Add(param => param.Code))
                      .HtmlAttributes(new { style = "width: 420px;" })
                      .NoRecordsTemplate("No existen resultados...")
                      .DataBinding(
                          dataBinding => dataBinding.Ajax()
                                             .Select("_EditMaterial_SelectParameters", Controllers.Valoration,Model)
                                             .Update("_EditMaterial_UpdateParameters", Controllers.Valoration,Model)
                      )
                      .Columns(columns =>
                          {
                              columns.Bound(param => param.Code).Width("75px").HtmlAttributes(new { style = "text-align: left;" }).ReadOnly();
                              columns.Bound(param => param.Description).Width("200px").HtmlAttributes(new { style = "text-align: left;" }).ReadOnly();
                              columns.Bound(param => param.Value).Width("65px").HtmlAttributes(new { style = "text-align: left;" });
                              columns.Command(commands =>
                                              commands.Edit().ButtonType(GridButtonType.Image)
                                  ).Width(60);
                          })
                      .Editable(editing => editing.Mode(GridEditMode.InLine))
                      .Scrollable(scrolling => scrolling.Height(140))
                      .Footer(false)
                      .Sortable()
                              .ClientEvents(e => e.OnEdit("OnEditGridParam"))
                      .Resizable(resizing => resizing.Columns(true))
                      .Reorderable(reorder => reorder.Columns(true))
                      )

            </td>
        </tr>
    </table>
</div>

<script type="text/javascript">

    function OnEditGridParam(e) {
        var item = { id: e.dataItem.Code };
        $.ajax({
            url: "/Valoration/_EditMaterial_EditParameters",
            type: "POST",
            async: false,
            data: item,
            success: function (data, status, xhr) {

                $.post(data.familyParameterValueView, item, function (partial) { $('#divFamilyParameterValue').html(partial); });   

            },
            error: function (xhr, status, err) {
                alert(err);
            }
        }); 

    }

</script> 
```

查看：_FamilyParameterValueDdl.cshtml

```
@model Bpt.Domain.FamilyParameter

@(Html.DropDownListFor(e => e.Value, new SelectList(Model.PossibleValues), new { style="font-size:12px;" })) 
```

查看：_FamilyParameterValueTextBox.cshtml

```
@model Bpt.Domain.FamilyParameter

@Html.TextBoxFor(e => e.Value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:57:16.070

我注意到您使用的是 Telerik，我使用的是 Kendo，并且语法看起来相同，这是我使用的网格。

```
@(Html.Kendo().Grid(Model)
  .Name("grdDocumentManager")
  //Column Binding
  .Columns(columns =>
               {
                   columns.Bound(dm => dm.DocumentNote).Title("Note").Width("20px").ClientTemplate("#if(trim(DocumentNote) != \"\"){#" +
                                                    "<img src=\"/content/i_discuss.gif\" title=\"View Notes\" onclick=\"javascript:showWindow(#=DocumentId#, '#=CaseId#');\" width=\"16\" height=\"16\" border=\"0\" style=\"cursor:pointer;\">#}" +
                                                "else{#" +
                                                    "<img src=\"/content/i_rate.gif\" title=\"Add Note\" onclick=\"javascript:showWindow(#=DocumentId#, '#=CaseId#');\" width=\"16\" height=\"16\" border=\"0\" style=\"cursor:pointer;\">" +
                                                "#}#");
                   columns.Bound(dm => dm.DocumentId).Hidden(true);
                   columns.Bound(dm => dm.CaseId).Width("50px");
                   columns.Bound(dm => dm.PresidingJudge).ClientGroupHeaderTemplate("Presiding Judge: #=value#").Width("20px");
                   columns.Bound(dm => dm.MagistrateJudge).ClientGroupHeaderTemplate("Magistrate Judge: #=value#").Width("20px");
                   columns.Bound(dm => dm.CaseType).Width("20px");
                   columns.Bound(dm => dm.StatusValue).Width("20px").ClientTemplate("#=Status#").EditorTemplateName("StatusEditor").Title("Status");
                   columns.Bound(dm => dm.UserName).Width("20px").EditorTemplateName("UserNameEditor");
                   columns.Bound(dm => dm.CreationDate).Width("50px").Format("{0:g}");
                   columns.Bound(dm => dm.PageCount).Width("20px");
                   columns.Command(command => command.Edit()).Width(200);
               }
  )
  .Editable(e => e.Mode(GridEditMode.InLine))
  .DataSource(ds => ds.Ajax()
                    .Model(m => {
                                    m.Id(dm => dm.DocumentId);
                                    m.Field(dm => dm.CaseId).Editable(false);
                                    m.Field(dm => dm.CaseType).Editable(false);
                                    m.Field(dm => dm.CreationDate).Editable(false);
                                    m.Field(dm => dm.DocumentNote).Editable(false);
                                    m.Field(dm => dm.MagistrateJudge).Editable(false);
                                    m.Field(dm => dm.PresidingJudge).Editable(false);
                                    m.Field(dm => dm.PageCount).Editable(false);

                    })
                    .Update(update => update.Action("DocumentUpdate","Admin"))

             )
  ) 
```

如果您在列绑定上注意到它有一个名为 EditorTemplate 的属性，您可以在其中定义编辑器的名称（确保在编辑器中控件的名称与被绑定的属性名称相同）并且网格将生成正确的视图为了它。

# wcf - WCF中UseSynchronizationContext有什么用

> ID：14136934
> 
> 赞同：4
> 
> 时间：2013-01-03T10:22:42.883
> 
> 标签：wcf

我是 WCF 的新手。经常凝视 wcf 代码和文章。在查看了许多代码后，我经常坚持非常基本的事情，并且没有对以下问题进行详细讨论。所以这是我的几个基本问​​题....并寻找示例情况和示例代码的详细讨论。

当一个人应该打开 UseSynchronizationContext=true 或者什么时候应该去 UseSynchronizationContext=false 时 UseSynchronizationContext=false 是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:56:40.523

它与默认情况下 WCF 是否会尝试使用现有的线程同步上下文有关。这里有一个与此相关的有趣问题：-

[WCF InstanceContextMode.Multiple 问题](https://stackoverflow.com/questions/592458/wcf-instancecontextmode-multiple-issues)

还有一个关于同步上下文的代码项目在这里发布： -

[了解 SynchronizationContext（第一部分）](http://www.codeproject.com/Articles/31971/Understanding-SynchronizationContext-Part-I)

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.usesynchronizationcontext.aspx)看来，默认值为 true。

# javascript - 如何获取 javascript 对象的实际构造函数？

> ID：14136938
> 
> 赞同：2
> 
> 时间：2013-01-03T10:23:02.927
> 
> 标签：javascript

有没有办法获得用于实例化对象的实际调用函数？

```
function A(){}
A.prototype.test = function(){};

function B(){}
B.prototype = Object.create(A.prototype);

B.prototype.test = function(){};

var x = new B();
alert(x.constructor);   // alerts "A" 
```

我也对跨浏览器支持感兴趣

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:58:11.790

在这种继承之后，您需要显式设置“子类”的构造函数。

```
...
B.prototype = Object.create(A.prototype);
B.prototype.constructor = B;
... 
```

据我所知，没有办法自动执行此操作。甚至 Google 的 Closure 库也有这样的东西；

```
var inherit = function(subClass, superClass) {
    var temp = function() {};
    temp.prototype = superClass.prototype;
    subClass._super = superClass.prototype;
    subClass.prototype = new temp();

    subClass.prototype.constructor = subClass;
}; 
```

所以，如果你有一个带参数的构造函数，你可以简单地做类似的事情

```
var ParentClass = function(arg1, arg2) {
    this.arg1 = arg1;
    this.arg2 = arg2;
};

ParentClass.prototype.show = function() {
    console.log('Parent!');
    console.log('arg1: ' + this.arg1);
    console.log('arg2: ' + this.arg2);
};

var ChildClass = function(arg1, arg2, arg3) {
    ParentClass.call(this, arg1, arg2);
    this.arg3 = arg3;
};

inherit(ChildClass, ParentClass);

ChildClass.prototype.show = function() {
    console.log('Child!');
    console.log('arg1: ' + this.arg1);
    console.log('arg2: ' + this.arg2);
    console.log('arg3: ' + this.arg3);
}; 
```

**[例子](http://jsfiddle.net/nK28J/)**。

# wcf - WCF OperationContract 中 IsInitiating 和 IsOneWay 的含义

> ID：14136950
> 
> 赞同：3
> 
> 时间：2013-01-03T10:23:45.247
> 
> 标签：wcf

我是 WCF 的新手。经常凝视 wcf 代码和文章。在查看了许多代码后，我经常坚持非常基本的事情，并且没有对以下问题进行详细讨论。所以这是我的几个基本问​​题....并寻找示例情况和示例代码的详细讨论。

```
[OperationContract(IsInitiating=false, IsOneWay=false)]
bool Add_Contact(int sessionkey, string Newusrname); 
```

IsInitiating=false 或 true 是什么意思。我什么时候应该设置它为真或假？IsOneWay=false 或 true 的含义是什么。我什么时候应该设置它为真或假？

我相信我的问题是非常基本的，每次监控这个论坛时都有很多学者。我希望我能在很多情况下得到最好的答案，比如当一个人应该选择哪个选项而不是其他选项时，只需要很少的示例代码来模拟情况。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T11:35:13.290

**正在启动**

该`IsInitiating`参数指定关联方法实现的操作是否可以在服务器上发起会话。会话实例化是为每个客户端通道维护一个类的单独实例的能力。此属性控制是否允许某个操作成为创建会话时调用的第一个操作。该参数的默认值为`true`，表示指定的操作可以在通道上首先被调用。在这种情况下，对该方法的所有后续调用都无效（这意味着不会创建其他会话）。如果此参数设置为`false`，则客户端在调用此方法之前被强制调用其他方法。

当您尝试设置“操作顺序”时，这会派上用场，这意味着您需要首先调用特定方法，因为调用的其他方法取决于从第一个方法返回的内容。

例如，下面包含三个方法，或者服务操作。第一个操作创建会话并且必须是第一个调用的方法。最后的操作 Logout 关闭会话：

```
[ServiceContract]
public interface IBuyStock
{
[OperationContract(IsInitiating = true, IsTerminating = false)]
void Login(user);
[OperationContract(IsInitiating = false, IsTerminating = false)]
void BuyStock(string stocksymbol, int quantity);
[OperationContract(IsInitiating = false, IsTerminating = true)]
void Logout(user);
} 
```

一旦调用了启动方法，就可以对该方法进行后续调用，而不会影响其启动属性。

如果先调用启动方法以外的任何方法，则返回以下错误：

```
The operation ‘operationname’ cannot be the first operation to be called because
IsInitiating is false. 
```

必须先调用启动方法，然后才能调用其他操作。

**IsOneWay**

默认情况下，服务通信是双向的。双向服务通信意味着服务操作可以接收传入消息并发送回复。

IsOneWay 参数指定服务操作是否返回回复消息。此参数的默认值为`false`，表示该方法不返回回复消息。

以下示例说明了单向通信：

```
[ServiceContract]
public interface IBuyStock
{
[OperationContract(IsOneWay = true)]
void Login(user);
[OperationContract(IsOneWay = false)]
void BuyStock(string stocksymbol, int quantity);
} 
```

在单向通信中，客户端启动通信并继续执行代码，并且不等待服务的响应。在双向通信中，它在继续执行代码之前等待来自服务的响应。

使用单向通信的缺点是调用者无法知道服务是否成功处理了消息。

任何返回`IsOneWay`属性设置为的值的方法`false`都将返回异常。

**终止**

该`IsTerminating`属性指定调用的服务操作是否要终止通信会话。以下示例显示了最后一次调用 , `Logout()`将`IsTerminating`属性设置为`true`:

```
[ServiceContract]
public interface IBuyStock
{
[OperationContract(IsInitiating = true, IsTerminating = false)]
void Login(user);
[OperationContract(IsInitiating = false, IsTerminating = false)]
void BuyStock(string stocksymbol, int quantity);
[OperationContract(IsInitiating = false, IsTerminating = true)]
void Logout(user);
} 
```

当该`IsTerminating`属性设置为 时`true`，在发送回复消息后关闭会话（如果需要发送回复消息）。在客户端，`IsTerminating`值`true`告诉 WCF 仅在回复到达客户端后关闭通道。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-07T02:21:50.390

[OperationContract(IsInitiating = true, IsTerminating = false)]

> 块引用

在上面的代码中，当我们想要创建会话时，IsInitiating 属性设置为 true。

> 块引用

我们知道登录方法在其他方法之前首先被调用，因此我们将 IsInitiating = true 用于登录方法，而对于其他方法，我们将其设置为 false。

> 块引用

以同样的方式，我们使用 Isterminating=True 作为注销方法，然后会话被删除。

# delphi - 如何将对象添加到virtualtreeview

> ID：14136951
> 
> 赞同：0
> 
> 时间：2013-01-03T10:23:57.387
> 
> 标签：delphi, virtualtreeview

简而言之，我正在尝试将 Object 添加到 VirtualTreeView 但总是`EAccessViolation`在 CellText 处出现错误我想知道错误的原因我试图尽我所能但没有结果......

这是我的尝试：

```
 TForm1 = class(TForm)
 private

 public

 end;

 TPerson = class;

 PPersonNode = ^TPersonNode;
 TPersonNode = record
   PersonObj: TPerson;
 end;

 TPerson = class(TObject)
 private
   FName: string;
 public
   property Name: string read FName write FName;
 end;

 procedure TForm1.Button1Click(Sender: TObject);  
 var
   PersonRec: PPersonNode;
 begin
   PersonRec := VirtualStringTree1.GetNodeData(VirtualStringTree1.AddChild(nil));
   PersonRec.PersonObj := TPerson.Create;
   PersonRec.PersonObj.Name := 'aaa'; 
 end;

 procedure TForm1.VirtualStringTree1GetNodeDataSize(Sender: TBaseVirtualTree;
   var NodeDataSize: Integer);
 begin
   NodeDataSize := SizeOf(TPersonNode);
end;

procedure TForm1.VirtualStringTree1GetText(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Column: TColumnIndex; TextType: TVSTTextType;
var CellText: string);
var
   PersonRec: PPersonNode;
begin
   PersonRec := Sender.GetNodeData(Node);
   CellText := PersonRec.PersonObj.Name;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:22:17.580

看起来在创建 TPerson 对象之前触发了**OnGetText事件。**尝试首先检查该对象是否不为零：

```
procedure TForm1.VirtualStringTree1GetText(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Column: TColumnIndex; TextType: TVSTTextType;
var CellText: string);
var
   PersonRec: PPersonNode;
begin
   PersonRec := Sender.GetNodeData(Node);

   if PersonRec <> nil then  // <- check that the object has been created
     CellText := PersonRec.PersonObj.Name;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:52:50.547

我会改变这个：

```
procedure TForm1.Button1Click(Sender: TObject);  
var
 PersonRec: PPersonNode;
begin
 PersonRec := VirtualStringTree1.GetNodeData(VirtualStringTree1.AddChild(VirtualStringTree1.RootNode));
 PersonRec.PersonObj := TPerson.Create;
 PersonRec.PersonObj.Name := 'aaa'; 
end; 
```

还有这个：

```
procedure TForm1.VirtualStringTree1GetText(Sender: TBaseVirtualTree;
Node: PVirtualNode; Column: TColumnIndex; TextType: TVSTTextType;
var CellText: string);
var
 PersonRec: PPersonNode;
begin
 if Assigned(Node) then
 begin
  PersonRec := Sender.GetNodeData(Node);
  CellText := PersonRec.PersonObj.Name;
 end;
end; 
```

# c++ - 这个 for 循环是如何工作的？

> ID：14136954
> 
> 赞同：-1
> 
> 时间：2013-01-03T10:24:14.453
> 
> 标签：c++

我是编程新手，每当我使用 for 循环时，它都包含以下内容

```
 1\. Initialize
 2\. Condition 
 3\. Body 
 4\. Update 
 5\. Go to 2
 6\. Quit. 
```

但是，在 for 循环之前，在`cin>>number`做什么来代替更新？

```
int number = 0;
cout<<"please enter a number that is greater than 15"<<endl;
for (cin>>number; number <= 15; cin>>number)
{
    cout<<" Please enter a number that is greater than 15"<<endl;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T10:27:39.887

1.  **初始化**

    cin>>数字

    要求用户提供初始值。

2.  **健康）状况**

    数量<=15

    根据条件检查号码。

    如果数字小于 15，则转到 3，否则转到 6。

3.  **身体**

    cout<<"请输入一个大于15的数字"<< endl;

    这形成了每次执行的主体。

4.  **更新**

    cin>>数字

    再次要求用户输入一个数字。

5.  **前往 2**

6.  **退出**

* * *

此外，这是一种非常奇怪的编码风格。这种形式通常不使用循环结构。它们具有您提到的元素，但方式更清晰。

如果您的参考资料中有这样的代码，您可能应该参考其他内容。它可能不是开始学习 C++ 的最佳书籍。[在这里](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)查看一些书籍。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T10:26:36.190

这是一种奇怪的风格，但本质上它会在每次迭代时提示用户输入一个数字（而不是典型的初始化或循环计数器更新步骤），并根据 15 进行检查。**只要用户输入 < 15，它就会一直循环**。

如果我的优先级列表中的可读性很高（它应该是＃1或接近），我不会这样写。这种代码可能更好地表示为。

```
cin>>number;
while (number <= 15){
    cout<<" Please enter a number that is greater than 15"<<endl;
    cin>>number;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:44:59.470

更新阶段是`cin >> number`for 语句中的第二个阶段。

这是一种不寻常的做法，但它是对 number 的完全有效的更新。尽管 ++ 和 -- 更常见一些，但这显然完成了每次循环更新 number 的工作。人们经常会付出相当多的努力来避免初始化部分与更新部分相同，尽管我不知道为什么。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-03T10:43:01.483

"cin>>number" 接受数字 "number <= 15" 检查条件是数字大于或等于 15 然后再次

# c# - 根据当前区域设置的字符串格式

> ID：14136956
> 
> 赞同：0
> 
> 时间：2013-01-03T10:24:32.827
> 
> 标签：c#

在我的 C# 应用程序中，我使用字符串作为

```
string sTemp = "10.12;12.13;15.345"; 
```

现在我想知道有什么方法可以根据当前语言环境格式化这个字符串及其内容（特别是当它们是数字时）。最终我希望我的 sTemp 应该是法语语言环境中的“10,12;12,13;15,345”。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:31:10.900

```
string sTemp = "10.12;12.13;15.345";
string[] splitted = sTemp.Split(';');
IEnumerable<float> floats = splitted.Select(s => float.Parse(s, System.Globalization.CultureInfo.InvariantCulture));

string localized = floats.Select(f => f.ToString()).Aggregate((current, next) => current + ";" + next); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:31:07.577

用于[`String.Split(';')`](http://msdn.microsoft.com/en-US/library/b873y76a%28v=vs.80%29.aspx)拆分字符串双精度，[`double.Parse`](http://msdn.microsoft.com/en-us/library/t9ebt447.aspx)用 with [`CultureInfo.InvariantCulture`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)解析输入和[`double.ToString`](http://msdn.microsoft.com/en-us/library/shxtf045.aspx)with [`CultureInfo.CurrentCulture`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture.aspx)(或 "fr-FR") 解析输出：

```
string sTemp = "10.12;12.13;15.345";

var doubles = sTemp.Split(';')
    .Select(s => double.Parse(s, CultureInfo.InvariantCulture));

var locale = System.Globalization.CultureInfo.CreateSpecificCulture("fr-FR");
// or var locale = System.Globalization.CultureInfo.CurrentCulture;

var localeDoubleStrings = doubles.Select(d => d.ToString(locale));
foreach(string frDoubleStr in localeDoubleStrings)
    Console.WriteLine(frDoubleStr); 
```

[**演示**](http://ideone.com/ihOTBL)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:34:57.263

我猜您正在使用带有在这种情况下声明的内容的字符串，您需要对其进行格式化

例子

```
// this would be as per french culture
Console.WriteLine(string.Format(new CultureInfo("Fr-fr"), "{0};{1};{2};", 10.2, 15.6, 25.3));
// this would be invariant
Console.WriteLine(string.Format(CultureInfo.InvariantCulture, "{0};{1};{2};", 10.2, 15.6, 25.3)); 
```

所以你只需要说`CultureInfo.CurrentCulture`这对你有用。

*但是，如果您将它与内容一起使用，那么您必须使用如何构建字符串内容来更新问题*

# emacs - Ensime 远程调试

> ID：14136957
> 
> 赞同：3
> 
> 时间：2013-01-03T10:24:36.110
> 
> 标签：emacs, ensime

是否可以将 ensime 调试器附加到远程进程？我在手册中找不到任何相关内容。

[http://aemoncannon.github.com/ensime/index.html](http://aemoncannon.github.com/ensime/index.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:20:08.740

ensime-db-attach 提示输入主机名和端口。它应该允许您在远程进程上使用 ensime 的所有调试功能。

# c++ - C++ 视口缓存目录中的文件

> ID：14136959
> 
> 赞同：0
> 
> 时间：2013-01-03T10:24:45.970
> 
> 标签：c++, memory, optimization

在我的 C++ 应用程序中，我有一个表格小部件，用于显示目录中的文件列表。有足够的屏幕空间一次显示约 20 个文件。它包裹在视口周围，因此用户可以上下滚动以导航到列表中的其他文件。

列表中的每个文件都包含缓存在后台线程中的任意大小的元数据。尝试缓存包含大量元数据丰富文件的目录中的所有文件会迅速占用堆上的可用内存，从而产生严重后果。

当然，我不需要一次缓存所有文件；只有那些可见的。如果缓存那些包含在视口边界上方/下方的元数据的文件也会很好，这样向上和向下滚动就不会产生太多延迟。

我想这与许多包含视口（Web 浏览器、文本/十六进制编辑器）的 UI 应用程序必须解决的问题有关。是否有任何模式、算法或容器（`deque`想到）有助于解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:31:01.497

如果您的数据在例如 a`std::vector`中，那么您可以拥有作为向量索引的 a`first_visible`和`last_visible`变量。这两者（包括）之间的向量中的项目将是您需要缓存的项目（每边加上 X 额外）。

每当用户更改 UI 元素以显示新项目时，这些索引都会更新，并在需要时加载新数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:33:52.487

您可以查看[Flyweight](http://en.wikipedia.org/wiki/Flyweight_pattern)和[Proxy](http://en.wikipedia.org/wiki/Proxy_pattern)设计模式。

# c# - Windows 窗体项目在 TextBox 字段中的 XML 正确格式

> ID：14136966
> 
> 赞同：1
> 
> 时间：2013-01-03T10:25:23.307
> 
> 标签：c#, xml, textbox

在我的项目中，我有一个表格，`TextBox`在执行我的程序时，我想将`XML`字符串放入我的表格中`TextBox`- 没什么复杂的。
问题在于显示的格式`XML`是`TextBox`：

```
 <?xml version="1.0" encoding="utf-16" ?><IOTPMessage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Element1>value</Element1><Element2>value</Element2><Element3>value</Element3></IOTPMessage> 
```

我希望它看起来像`XML`易于阅读的正确外观（带有新行、制表符）：

```
<?xml version="1.0" encoding="utf-16" ?>
<IOTPMessage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <Element1>value</Element1>
      <Element2>value</Element2>
      <Element3>value</Element3>
</IOTPMessage> 
```

我将`XML`字符串放入文本框的方式：

```
TextBox someBox;
someBox.Append(XMLstring); 
```

老实说，我什至不知道从哪里开始——除了寻找我没有找到的合适的文章或样本之外，也许你们中的任何人都可以将我重定向到我可以找到解决方案的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:10:02.210

您可以使用`XmlTextWriter`以显示正确的`XML`消息，如下所示：

```
MemoryStream w = new MemoryStream();
XmlTextWriter writer = new XmlTextWriter(w, Encoding.Unicode);

XmlDocument document = new XmlDocument();
document.LoadXml(xmlString);
writer.Formatting = Formatting.Indented;
document.WriteContentTo(writer);

writer.Flush();
w.Seek(0L, SeekOrigin.Begin);

StreamReader reader = new StreamReader(w);
return reader.ReadToEnd(); 
```

# c# - 传递颜色的策略（避免参考？）

> ID：14136967
> 
> 赞同：5
> 
> 时间：2013-01-03T10:25:27.287
> 
> 标签：c#, colors, struct, ref

我在一个老化的 Windows 应用程序中重构代码，我遇到了一种模式，我不确定我是否喜欢：一个类有全局颜色变量，如下所示：

```
private Color myForegroundColor = Color.Azure;
private Color myBackgroundColor = Color.Empty;
// ...etc. 
```

其中有很多，它们通过 ref 传递给负责设置 UI 某些部分的方法。

我认为 a`Color`是一个结构，因此每种颜色都由 ref 传递，以避免在每次调用方法时创建它的新副本。IE 类似：

```
// Avoid creating a copy of myForgroundColor inside SetUpButton():
MyHelperClass.SetUpButton(ref myForegroundColor); 
```

我不禁感到`ref`整个班级和相关班级的这种用法很糟糕。感觉就像是一种“[代码味道](http://en.wikipedia.org/wiki/Code_smell)”，尽管我无法真正说出原因。

我看过一些关于类似问题的帖子，其中建议“*使用包含颜色的类，然后将其作为值类型传递*”，但目前尚不完全清楚如何最好地做到这一点。

我想做的是创建类似于以下内容的内容：

```
public class ColorContainer
{
    public UiSettingsContainer()
    {
        MyColor = Color.Black;
        MyNextColor = Color.Blue;
        // ..etc...
    }

    public Color MyColor { get; private set; }
    // ...etc....
} 
```

这会让我保留对颜色的控制，但对记忆的影响对我来说有点不清楚；如果我创建了此类的一个实例并将其传递给需要有关所包含颜色的信息的方法，那么`color`一旦实现方法使用它，是否会创建一个（它是一个结构）的副本？

我是否正确假设此代码会创建一个新副本，因此效率较低......

```
// Assumption: This creates a new copy of color in memory.
public void SetSomeColor(Color col){ 
    someComponent.color = col; 
}

// Calling it:
SetSomeColor(myColorContainerInstance.MyColor); 
```

...比这个代码，它只会利用现有的结构？：

```
// Question: Does this avoid creating a new copy of MyColor in memory?
public void SetSomeColor(ColorContainer container){ 
    someComponent.color = container.MyColor; 
}

// Calling it:
SetSomeColor(myColorContainerInstance); 
```

我目前倾向于类似于以下的解决方案，其中我在一个单独的类中收集颜色并重新组织代码，但继续使用`ref`. 但是，在这种情况下，`MyColor`必须是 中的公共字段`ColorContainer`，这意味着我将无法控制谁可以设置它的值：

```
// Assumption: This creates a new copy of color in memory.
public void SetSomeColor(ref Color col){ 
    someComponent.color = col; 
}

// Calling it:
SetSomeColor(ref myColorContainerInstance.MyColor); 
```

**这是一个好的解决方案，还是有更好的策略来处理这样的资源？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:37:32.720

整个事情闻起来像是[过早的优化](http://ericlippert.com/2012/12/17/performance-rant/)，特别是链接的第 3 和第 4 部分，所以...

另一种解决方案是只删除引用，并在`Color`需要时复制结构。结构本身并不太大（4 个`byte`成员和 4 个`bool`成员），除非您调用每秒数百万次更改颜色的代码，否则所需的时间和内存不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:16:20.693

“插槽”类比长期以来一直是我对这类事物的最爱之一。每个方法参数（也将赋值的右手视为参数）是一个槽。每个槽必须填充正确大小和“形状”（类型）的东西，以便调用方法（或处理分配）。

如果您的方法需要`ref Color`您使用指向`Color`内存中结构的任何大小的指针填充插槽。当然，我不是指 C 风格的指针，但它仍然是同一类东西 - 它是一个数字，表示您打算使用的资源的位置，即使它没有在代码中表示。在`Color`（没有参考）的情况下，您正在用`Color`结构本身填充它。

根据您编译的平台，您传递的值（通过颜色的 ref 传递）的长度将是 32 位或 64 位。颜色结构（[System.Windows.Media.Color](http://msdn.microsoft.com/en-us/library/system.windows.media.color%28v=VS.95%29.aspx)）本身的长度只有 32 位（如果您使用[System.Drawing.Color](http://msdn.microsoft.com/en-us/library/system.drawing.color%28v=vs.110%29.aspx) ，则长度为 64 位）使得这是一个没有吸引力的命题 - 使平均情况完全相同（就指针的副本数量和加载到堆栈上的东西的大小而言）作为按值传递结构 - 仅在 64 位结构/32 位平台配对中更好，仅在 32 位结构/64 中更差位平台配对。即使在尝试让它使用相同的实例之后，结构的实际值仍将被复制到其目标槽中。

现在，将颜色捆绑在一个类中（默认通过 ref 传递）会稍微改变这张图片。如果您的类包含 3 种颜色，则其中包含 96 位（或 192 位）颜色数据，传递最多 64 位信息以在内存中找到该信息的正确“包”的位置. 即使在打包之后，颜色仍然会被复制到它们的目标插槽中；但是现在我们已经增加了开销，因为必须使用[ldfld](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldfld.aspx)（加载字段）/[调用](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.call.aspx)（调用预先解析的方法 - 属性访问）+ ldfld/ [callvirt](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.callvirt.aspx)（调用运行时解析的方法 - 属性访问）+ ldfld 来实际获取值. 从性能的角度来看，这对您根本没有帮助，除非您打算传递大量数据然后不使用它。

长话短说 - 除非有一些你想要实现的颜色信息的逻辑分组，否则不要打扰。当堆栈帧被弹出时，堆栈上的值类型会立即被清除，所以除非您的程序运行在系统总内存不足约 8 个字节的位置，否则您实际上并没有通过 by ref 方法获得任何收益。颜色集合的包装类可能会使代码更清晰/更好，但不会提高性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T00:33:44.143

传递结构`ref`通常是一件好事，除非（1）需要传递值语义，或者（2）结构很小并且可以使用传递值语义。

如果一个人经常想要将一些变量（可能是结构本身）作为一个组来处理，那么声明一个透明的结构类型来保存它们可能会有所帮助，然后将其传递给`ref`.

请注意，通过 ref 传递结构与通过值传递类引用的成本基本相同。编写一个类来保存结构，纯粹是为了避免使用`ref`参数，并不容易获得性能上的胜利。在某些情况下，拥有一个类型可能很有用

```
class MutableHolder<T>
{ public T Value; } 
```

然后可以将引用语义应用于任何结构类型，但我只建议在需要在当前范围之外保留引用时这样做。在足够的情况下`ref`，应该使用`ref`.

# facebook - 获取完整的 Facebook 数据

> ID：14136971
> 
> 赞同：1
> 
> 时间：2013-01-03T10:25:48.177
> 
> 标签：facebook, json, facebook-graph-api

我可以使用 Facebook Graph API 下载我的完整 Facebook 数据吗？我已经尝试过 Graph API Explorer，但我只能看到所有这些，但都是独立的。是否可以仅在一个请求或一个 json 结构中获取所有数据？是否也可以包含我所有的朋友数据？

我的朋友确实向我展示了一个包含此类数据的 json 文件，它是一个相当大的文件（480Mb 未压缩，48Mb 压缩）。显然，我现在无法联系她了解更多详情。这有可能吗？如果我不能，我可以假设她早在 Facebook 更改隐私协议之前就下载了她的数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:30:34.940

您还可以在 facebook 本身中使用 netvizz 应用程序。它以 .gdf 格式为您提供整个网络。然后你可以在gephi中分析它（它只是另一种方式

# jquery - bootstrap typeahead return name 和 id

> ID：14136973
> 
> 赞同：8
> 
> 时间：2013-01-03T10:25:56.510
> 
> 标签：jquery, twitter-bootstrap, typeahead, bootstrap-typeahead

嗨！我正在使用 twitter bootstraps typeahead：

我正在调用一个使用 json_encode 返回响应的页面，该页面返回一个名称和一个 ID，

我希望预先输入的列表会显示名称列表，并且当我选择其中一个名称以将 id 值写入隐藏字段时。

调用工作正常，编写字段应该很容易。我不知道该怎么做是如何将名称与 id 分开。

现在，当我搜索某些内容时，在建议列表中我可以看到返回结果如下：

名称1：id1 名称2：id2

我只想看到名字，但也想携带 id 的值。

我怎样才能做到这一点？

```
 $(function(){
    $("#typeahead_<? print $key; ?>").typeahead(
        {
        source: function(query, process)
                    {
                    $.ajax({
                        url:    '/getAjaxProducts',
                        type:   'POST',
                        data:   'query=' + query,
                        dataType: 'JSON',
                        async: true,
                        success: function(data)
                                {
                                process(data);
                                }
                            });                 
                    }
        });
}); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-04T22:51:13.077

包含名称/ID 对的典型 JSON 文档将如下所示：

```
[
  {
    "id": 1
    "name": "firstName"
  },
  {
    "id": 2
    "name": "secondName"
  }
] 
```

这里的策略是构建一个对象字面量，在解析结果时将名称映射到 ID，同时仅使用名称来填充预输入：

```
var productNames = new Array();
var productIds = new Object();
$.getJSON( '/getAjaxProducts', null,
        function ( jsonData )
        {
            $.each( jsonData, function ( index, product )
            {
                productNames.push( product.name );
                productIds[product.name] = product.id;
            } );
            $( '#product' ).typeahead( { source:productNames } );
        } ); 
```

一旦用户从预输入中选择了一个项目，您可以使用以下命令引用所选项目：

```
$( '#product' ).val() 
```

您可以通过以下方式获取与所选项目关联的 ID：

```
productIds[$( '#product' ).val()] 
```

从您的问题来看，您的 JSON 文档的结构可能会有所不同，因此您将酌情更改解析，但适用相同的一般策略。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-16T11:01:15.723

很抱歉“复活”这篇文章，但我要疯了！

如果你们中的一些人在使用这些示例代码时遇到问题（它们都不起作用，都返回“未定义”而不是显示名称

只需添加

```
displayKey: 'name', 
```

用您的远程源返回的标签变量名称替换当然“名称”

（很难在上面找到最新的样本，在网上找到的大多数样本都是针对先前版本的 typeahead 并且与新版本不兼容...）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-26T06:04:16.527

```
......updater: function (item) {
        var item = JSON.parse(item);
        console.log(item.name); 
        $('#VehicleAssignedTechId').val(item.id);       
        return item.name;
    } 
```

在 typeahead 调用的更新程序上，您可以输入上述代码，该代码允许您在文本框中添加选择的值，或者您必须将其值放在其他隐藏字段中。

完整的ajax调用如下：

```
$('#VehicleAssignedTechName').typeahead({
    source: function(query, process) {
        var $url =SITE_URL+ 'api/vehicle_techfield_typeahead/' + query + '.json';
        var $items = new Array;
        $items = [""];
        $.ajax({
            url: $url,
            dataType: "json",
            type: "POST",
            success: function(data) {
                console.log(data);
                $.map(data, function(data){
                    var group;
                    group = {
                        id: data.id,
                        name: data.name,                            
                        toString: function () {
                            return JSON.stringify(this);
                            //return this.app;
                        },
                        toLowerCase: function () {
                            return this.name.toLowerCase();
                        },
                        indexOf: function (string) {
                            return String.prototype.indexOf.apply(this.name, arguments);
                        },
                        replace: function (string) {
                            var value = '';
                            value +=  this.name;
                            if(typeof(this.level) != 'undefined') {
                                value += ' <span class="pull-right muted">';
                                value += this.level;
                                value += '</span>';
                            }
                            return String.prototype.replace.apply('<div style="padding: 10px; font-size: 1.5em;">' + value + '</div>', arguments);
                        }
                    };
                    $items.push(group);
                });

                process($items);
            }
        });
    },
    property: 'name',
    items: 10,
    minLength: 2,
    updater: function (item) {
        var item = JSON.parse(item);
        console.log(item.name); 
        $('#VehicleAssignedTechId').val(item.id);       
        return item.name;
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-23T09:13:47.140

我的解决方案是：

```
var productNames = new Array();
var productIds = new Object();
$.getJSON( '/getAjaxProducts', null,
        function ( jsonData )
        {
            $.each( jsonData, function ( index, product )
            {
                productNames.push( product.id + product.name );
                productIds[product.id + product.name] = product.id;
            } );
            $( '#product' ).typeahead( { source:productNames } );
        } ); 
```

在我的例子中，product.id 是一个代码，因此在 typeahead 控件中显示它很有用。这样我就避免了重名风险。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-31T06:02:21.763

当我尝试处理用户名和 id 时，我遇到了同样的问题。我有一个棘手的修复，但后来我用正确的解决方案修复了它。

看看这个，

```
$('#search').typeahead({
 source: function(query, process) {
 var $url = "/controller/function/list_users/?q="+query;
 var $datas = new Array;
 $datas = [""];
 $.ajax({
 url: $url,
 dataType: "json",
 type: "GET",
 success: function(data) {
 $.map(data, function(data){
 var group;
 group = {
 id: data.id,
 name: data.user_name,
 toString: function () {
 return JSON.stringify(this);
 //return this.variable;
 },
 toLowerCase: function () {
 return this.name.toLowerCase();
 },
 indexOf: function (string) {
 return String.prototype.indexOf.apply(this.name, arguments);
 },
 replace: function (string) {
 var value = '';
 value += this.name;
 if(typeof(this.name) != 'undefined') {
 value += ' <span class="pull-right muted">';
 //value += this.name;
 value += '</span>';
 }
 return String.prototype.replace.apply('<div style="padding: 10px; font-size: 1em;">' + value + '</div>', arguments);
 }
 };
 $datas.push(group);
 });
process($datas);
 }
 });
 },
 property: 'user_name',
 items: 10,
 minLength: 2,
 updater: function (item) {
 var item = JSON.parse(item);
 $('#hiddenId').val(item.id);
 $('#username').val(item.name);
//you can perform your actions here
//example</p>
//location = '/controller/function/'+item.id+'/edit';
 //document.redirect = location;
}
}); 
```

也看看这个链接。

[http://vaisakhvm.wordpress.com/2013/07/31/twitter-bootstrap-typeahead-process-multiple-values/](http://vaisakhvm.wordpress.com/2013/07/31/twitter-bootstrap-typeahead-process-multiple-values/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-16T17:35:21.880

我注意到在使用此代码时，如果匹配包含字母“st”，则预输入建议会在预输入建议中包含样式标记。

例如，建议的匹配将显示

> style="padding: 10px; font-size: 1.5em;">标准

代替

> 标准

我将替换功能更改为：

```
replace: function (string) {
  return String.prototype.replace.apply(this.name, arguments);
} 
```

显然你失去了额外的格式，但它不会在“st”匹配上中断（我假设它也会在“di”或 div 标签的其他子字符串上中断。

# c# - 更改 ComboBox 的设计

> ID：14136975
> 
> 赞同：7
> 
> 时间：2013-01-03T10:26:05.180
> 
> 标签：c#, winforms, combobox

我需要将 Windows 窗体的设计更改为`ComboBox`：
![在此处输入图像描述](../Images/c7900c8afd85903f65ac4344a2880d2c.png)

我是否需要重新设计按钮并从 继承`UserControl`，并从零开始所有功能？

或者足以继承自`ComboBox`，而我需要做的就是更改图形？
如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:14:57.220

你必须使用winforms吗？在 .NET 的[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)中，更改组合框（和其他控件）的样式要容易得多。您可以在 Internet 上找到大量[教程](http://www.eidias.com/Blog/2012/2/20/customizing-wpf-combo-box-style)和/或[示例。](http://www.c-sharpcorner.com/uploadfile/mahesh/wpf-combobox/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:28:56.160

继承`ComboBox`并仅覆盖绘画功能就足够了。

```
protected override void OnPaint(PaintEventArgs e)
{
   // your drawing comes code here
} 
```

该参数为您提供了一个[`Graphics`](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)实例，您可以通过该实例绘制任何您喜欢的东西。线条，弧线，甚至图像。我不知道你展示的图形的确切定义，所以试着找出如何绘制它。

# java - 如何使用 java 在 selenium webdriver 中提示输入并使用结果？

> ID：14136977
> 
> 赞同：1
> 
> 时间：2013-01-03T10:26:08.993
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我想接受用户输入并根据他们的输入执行操作。假设以登录页面为例，用户需要输入登录凭据。我们如何将用户输入作为他的电子邮件和密码，然后使用该电子邮件 ID 和密码作为他的登录凭据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:50:15.067

独立于您对 Selenium 的使用从用户那里获取输入。您需要使用标准 Java 机制来获取用户输入（[这个问题](https://stackoverflow.com/questions/5287538/how-to-get-basic-user-input-for-java)显示了几个选项），将答案存储在变量中，然后将其传递给填写表单的 Selenium 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:35:23.573

据我了解您的问题，您只想从使用您的测试的用户那里获取登录凭据，并且您不想仅出于登录目的将其包含在您的自动化脚本中。

我不认为这解决了硒的用途。但是，如果你想这样做，我有一个建议。到达登录页面后，实现隐式等待的代码，直到您获得在用户提供凭据后单击登录后将出现的页面。您可以通过验证处于等待状态的页面上是否存在某些文本来检查这一点。

否则，如果您只是想抽象凭据并担心在脚本中对其进行硬编码，那么您可以使用一些 spredsheets、文本文件或 MS-Excel 文件来存储您的数据，并可以通过调用来将其用作资源文件定义方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-27T02:33:03.377

您甚至可以在脚本开始之前输入您的用户名和密码。见下面的代码

```
driver.findElementByXpath("xpath of username input box").sendkeys("Myusername");
driver.findElementByXpath("xpath of password input box").sendkeys("Mypassword"); 
```

这样，您将能够为用户输入登录凭据。

# php - 使用未知变量编写测试

> ID：14136981
> 
> 赞同：1
> 
> 时间：2013-01-03T10:26:30.507
> 
> 标签：php, phpunit

我正在尝试使用 PHPunit 进行测试。

我正在编写的测试之一需要扫描某个文件夹的目录子目录。

我想编写一个测试来检查以确保如果文件夹不存在它不会失败。

问题是它扫描的目录中可能有也可能没有文件夹。所以我很困惑我应该如何做到这一点。

我可以看到的一个选项是将所有内容移出目录，运行断言，然后将所有内容移回，但这对我来说似乎很乱。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:19:23.780

phpunit 实际上提供了一种使用[vfsStream](https://github.com/mikey179/vfsStream)模拟文件系统的方法。这在[PHPUnit 文档](http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.mocking-the-filesystem)中有描述（具体看示例 10.19 以了解它是如何使用的）。vfsStream 充当文件系统的包装器。

# sql - 如何检查 SQL 表中的数据完整性？

> ID：14136984
> 
> 赞同：4
> 
> 时间：2013-01-03T10:26:33.397
> 
> 标签：sql

我有一个用于记录实验室访问数据的表。表结构如下：

```
create table accesslog
(
    userid int not null,
    direction int not null,
    accesstime datetime not null
); 
```

这个实验室只有一个处于访问控制之下的大门。所以用户必须先“进入”实验室，才能“离开”。在我的原始设计中，我将“方向”字段设置为 1（用于进入实验室）或 -1（用于离开实验室）的标志。这样我就可以使用如下查询：

```
SELECT SUM(direction) FROM accesslog; 
```

获得实验室内的总用户数。从理论上讲，它有效；因为对于任何给定的用户 ID，“方向”将始终采用 1 => -1 => 1 => -1 的模式。

但是很快我发现日志消息会在从实验室门到服务器的传输路径中丢失，要么是由于网络繁忙，要么是硬件故障。当然我可以用序列号、ACK、重传、硬件冗余等来强制传输路径，但最后我可能还是会得到这样的东西：

```
userid   direction   accesstime
-------------------------------------
1         1          2013/01/03 08:30
1        -1          2013/01/03 09:20
1         1          2013/01/03 10:10
1        -1          2013/01/03 10:50
1        -1          2013/01/03 13:40
1         1          2013/01/03 18:00 
```

这是用户“1”的最新日志。很明显，我丢失了该用户在 10:50 到 13:40 之间进入实验室的一条日志消息。我查询这个数据的时候，他还在实验室，所以2013/01/03 18:00之后还没有退出日志；这是肯定的。

我的问题是：有没有办法“发现”这些数据与 SQL 命令不一致？我的系统内总共有 5000 名用户，实验室 24 小时运行，没有这样的“神奇时间”可以清除实验室。如果我必须逐行、逐个地编写代码来检查“方向”字段的连续性，那我会很糟糕。

我知道不可能用正确的数据“修复”日志。我只想知道“哦，我有一个 userid=1 的数据不一致问题”，这样我就可以添加一个标记的修改数据来纠正最终的统计数据。

任何建议都将不胜感激，即使更改表结构也可以。

谢谢。

编辑：对不起，我没有提到细节。

目前我正在使用混合 SQL 解决方案。上表是 MySQL，它只包含 24 小时内的日志，作为快速浏览的“实时”状态。

每天凌晨 03:00 将启动在 POSIX 上用 C++ 编写的预先安排的进程。此过程将计算统计数据，并通过专有协议 TCP 套接字将每日统计数据添加到 Oracle DB，然后从 MySQL 中删除旧数据。

Oracle 部分不是我处理的，我对此无能为力。我只是想确保每一天的最终统计数据是正确的。

数据量约为每天 200,000 条记录——我知道这听起来很疯狂，但这是真的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:41:29.433

您没有说明您的 DBMS，所以这是 ANSI SQL（适用于大多数现代 DBMS）。

```
select userid,
       direction,
       accesstime,
       case 
         when lag(direction) over (partition by userid order by accesstime) = direction then 'wrong'
         else 'correct'
       end as status
from accesslog
where userid = 1 
```

对于 accesslog 中的每一行，您将获得一列“状态”，指示该行是否“违反”规则。

您可以使用以下方法过滤掉那些无效的：

```
select *
from (
  select userid,
         direction,
         accesstime,
         case 
           when lag(direction) over (partition by userid order by accesstime) = direction then 'wrong'
           else 'correct'
         end as status
  from accesslog
  where userid = 1
) t
where status = 'wrong' 
```

我不认为有一种方法可以使用数据库中的约束来强制执行这种规则（尽管我觉得 PostgreSQL 的排除约束在这里*会*有所帮助）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:44:02.657

为什么不使用带有 WHERE 字段的 SUM() 来按 USER 进行过滤。

如果你得到的不是 0 或 1，那么你肯定有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T02:43:28.177

好的，我想通了。感谢 a_horse_with_no_name 提供的想法。

我的最终解决方案是这个查询：

```
SELECT userid, COUNT(*), SUM(direction * rule) FROM (
    SELECT userid, direction, @inout := @inout * -1 AS rule
    FROM accesslog l, (SELECT @inout := -1) r
    ORDER by userid, accesstime
) g GROUP by userid; 
```

首先，我使用@inout 创建了一个模式，它将为“规则”列中的每一行产生 1 => -1 => 1 => -1。比我通过计算乘积来比较方向字段和规则列。

某些用户有奇数记录也没关系；因为每个用户都应该遵循相同或相反的模式作为“规则”。所以乘积的总和应该等于 COUNT() 或 -1 * COUNT()。

通过检查 SUM() 和 COUNT()，我可以准确地知道哪个用户 ID 出错了。

# javascript - Chrome 不能再从脚本中记录可检查的 jQuery 对象

> ID：14136989
> 
> 赞同：3
> 
> 时间：2013-01-03T10:26:53.360
> 
> 标签：javascript, jquery, google-chrome, console, web-inspector

> **可能重复：**
> [如何在 Chrome 中控制台记录一个 jQuery DOM 元素？](https://stackoverflow.com/questions/13974740/how-do-i-console-log-a-jquery-dom-element-in-chrome)

在最新的稳定版 Chrome 23.0.1271.101 和 Chrome Canary 26.0.1373.0 中，从脚本运行以下代码：

```
$(function(){
    console.log( $('body') )
}) 
```

现在返回：

```
[<body>, prevObject: jQuery.fn.jQuery.init[1], context: #document, selector: "body"] 
```

将鼠标悬停在此注销上没有任何作用，它是不可检查的。

交互式控制台仍然有效，例如，键入：

```
console.log( $('body') ) 
```

将正确回应：

```
[<body>...</body>] 
```

当鼠标悬停在日志输出上时，可以检查它，就像以前版本的 Chrome 用于脚本一样。

*   有没有办法让 Chrome 根据以前版本的 Chrome 记录可检查的元素，并且交互式控制台仍然如此？
*   是否有没有此错误的新版或旧版 Chrome？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:29:45.650

要实现 Chrome 以前的功能，请附加`[0]`到该函数。

[正如JanDvorak](https://stackoverflow.com/users/499214/jan-dvorak)所指出的，这可能并非在所有情况下都有效，并且仅提供第一个元素，但在某些情况下有效。

```
$(function(){
    console.log($('body')[0]);
}); 
```

**更新**

从[这里](https://stackoverflow.com/questions/13974740/how-do-i-console-log-a-jquery-dom-element-in-chrome)，有一个由 pimvdb 制作的 jQuery 插件[jquery.chromelog](https://stackoverflow.com/users/514749/pimvdb)，[这](https://github.com/pimvdb/jquery.chromelog)似乎是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:34:38.570

作为一种解决方法，Safari 6.0.2 (7536.26.17) 中的检查器仍会记录可检查的 JQuery 对象。

# spring - Spring-Security OAuth2 设置 - 无法找到 oauth2 命名空间处理程序

> ID：14136990
> 
> 赞同：2
> 
> 时间：2013-01-03T10:26:58.827
> 
> 标签：spring, spring-security, oauth-2.0, xml-namespaces

我正在尝试使用 spring-security 为 OAuth2 设置我们的 REST 服务器。（服务器已经支持没有 OAuth 的 spring-security）。现在我尝试按照 sparklr 示例并将 spring-security-oauth 工件添加到我的 maven（mvn 依赖项：tree 显示它可用）以及命名空间配置到我的 spring-security-context.xml 但我得到的是：

```
Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/security/oauth2] 
```

浏览`http://www.springframework.org/schema/security/`我看到的只是 .xsd 文件，但没有 oauth2 文件夹。这怎么可能？我假设 sparklr 示例是一个工作版本，那么我做错了什么？

这是我的 spring-security-context 标头：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oauth="http://www.springframework.org/schema/security/oauth2"
    xmlns:sec="http://www.springframework.org/schema/security" 
    xsi:schemaLocation="
http://www.springframework.org/schema/security/oauth2 http://www.springframework.org/schema/security/spring-security-oauth2-1.0.xsd
http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd"> 
```

如果需要，这里是 Maven 设置：

```
 <dependency>
        <groupId>org.springframework.security.oauth</groupId>
        <artifactId>spring-security-oauth</artifactId>
        <version>1.0.0.RC2</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T10:33:56.220

您引用 OAuth2 但导入 OAuth 1\. 将依赖项替换为

```
<dependency>
    <groupId>org.springframework.security.oauth</groupId>
    <artifactId>spring-security-oauth2</artifactId>
    <version>1.0.0.RELEASE</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-04T10:57:45.420

您需要确保 spring-security-oauth2 jar 存在于类路径中并且它可以工作

```
<dependency>
  <groupId>org.springframework.security.oauth</groupId>
  <artifactId>spring-security-oauth2</artifactId>
  <version>2.4.0.RELEASE</version>
</dependency> 
```