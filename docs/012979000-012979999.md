# StackOverflow 问答 12979000-12979999

# jmeter - 在 Jmeter 分布式（远程）测试中，是否可以将结果文件存储在远程服务器上？

> ID：12979003
> 
> 赞同：5
> 
> 时间：2012-10-19T17:01:17.893
> 
> 标签：jmeter

我使用非 GUI 选项使用 Jmeter 从主服务器 A (Linux) 到从服务器 B (Linux) 执行分布式负载测试。这是我所做的：

```
./jmeter -n -t xxx.jmx -l results.log -R xxx.xxx.xxx.xxx 
```

默认情况下，Jmeter会将结果文件写入主服务器A。我想知道是否有办法将结果文件直接存储在远程服务器B上。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-24T00:30:56.453

这个想法是他们是愚蠢的奴隶，甚至可能没有在本地存储数据的手段。这些方法在远程处理器 (RMI) 上调用并从那里运行，但所有其他资源都保留在客户端。

您可以设置像 Jenkins 这样的 CI 服务器以分布式方式运行 jmeter 客户端。这将使您能够更好地控制测试的分布方式。我有一个 jenkins 设置，它在主服务器上运行 jmeter 客户端，对远程 (jmeter) 从站进行分布式测试，这些从站也是 jenkins 从站，与控制工作区的作业相关联。这意味着 jenkins 永远不会使用它们，但 jenkins 可以从工作区中获取结果文件，聚合它们，并使用 jmeter 插件 CMDrunner 生成图形。

另一种可能性是在您的样本结果前面加上当前从站的 IP 地址的唯一部分。这将允许您在结果查看器中聚合或单独显示它们，并可能编写脚本来分离结果并将它们存储回它们来自的从站。

您还可以使用 samba 或类似的工具来共享远程从驱动器，并将结果直接从主驱动器存储在那里。

如果您只有一个从属设备，那么这些中的任何一个都将很容易实现，但随着您添加更多从属设备，它们会变得更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:38:52.230

查看示例发件人替代实现。

在此处阅读相关段落：

*   [http://jmeter.apache.org/usermanual/remote-test.html](http://jmeter.apache.org/usermanual/remote-test.html)

原生它是这样工作的，一个选项是不使用分布式模式并在非 gui 模式下运行许多 jmeter 实例。

试试 jmeter 用户邮件列表，如果没有得到答复，可能会打开 bugzilla 增强请求。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-01-02T11:35:13.513

如果你想构建分布式负载测试系统，你可以尝试使用[Jagger](https://jagger.griddynamics.net/)

# sql-server - 利用 SQL datepart 来识别连续的时间段

> ID：12979008
> 
> 赞同：0
> 
> 时间：2012-10-19T17:01:39.293
> 
> 标签：sql-server

我有一个可以正常工作的存储过程，但不明白它为什么工作的理论。我通过使用日期部分和密集等级来识别连续的时间段（通过其他地方的帮助找到解决方案）。

```
 select 
            c.bom
            ,h.x
            ,h.z
            ,datepart(year, c.bom) * 12 + datepart(month, c.bom) -- this is returning a integer value for the year and month, allowing us to increment the number by one for each month
            - dense_rank() over ( partition by h.x order by datepart(year, c.bom) * 12 + datepart(month, c.bom)) as grp -- this row does a dense rank and subtracts out the integer date and rank so that consecutive months (ie consecutive integers) are grouped as the same integer

        from 
            #c c

            inner join test.vw_info_h h
            on h.effective_date <= c.bom
            and (h.expiration_date is null or h.expiration_date > c.bom) 
```

我从理论上理解分组功能发生了什么。

**乘以年 * 12 + 月如何工作？为什么我们将年份相乘？后端发生了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:41:28.743

日期的年份部分是一个整数值。由于一年有 12 个月，因此将年份值乘以 12 可得出到达该年第一个月所经过的*总月数。*

这是一个例子。取 2012 年 2 月 11 日的日期（CCYYMMDD 格式的 20120211）

2012 * 12 = 24144 个月，从时间本身开始。

24144 + 2 个月（二月）= 24146。

将年份值乘以一年中的月数可以让您建立与月份相关的偏移量，而无需进行任何编码来处理一年结束和另一年开始之间的边缘情况。例如：

11/2011 -> 24143 12/2011 -> 24144 01/2012 -> 24145 02/2012 -> 24146

# api - 用我的应用程序名称替换“通过 Graph API Explorer”标签

> ID：12979009
> 
> 赞同：1
> 
> 时间：2012-10-19T17:01:43.057
> 
> 标签：api, facebook-graph-api, post

我是 Facebook 应用程序开发的新手。我整天都在玩“如何在页面的墙上发布消息？”。我终于成功了，但每条消息都是“通过 Graph API Explorer”获得的。我试图找到如何将其更改为我的应用程序名称但没有成功。我试图查看是否可以在 api 命令中强制应用程序的值，但它没有考虑到它。也许我错过了一些东西:(如果有人可以提供帮助，那就太好了！

* * *

我还是很困惑。让我试着解释一下我想要做什么：我想在一个页面（作为页面）上自动发布一些在网站上定义的事件（在一种议程中）。我想我想念的是 Facebook 端的一切是如何协同工作的： 1\. 登录过程：由于应用程序将在 cron 中运行，因此不应显示登录对话框。2\. 访问令牌：应用程序还是第一页？3.权限：据我了解，我需要manage_pages（和publish_stream），但不清楚应该如何设置。

感谢任何澄清，也许是一个明确的例子：o）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:20:16.550

您需要用户使用其中一种[登录](https://developers.facebook.com/docs/concepts/login/)流程授权您自己的应用程序并授予您一种发布[权限](https://developers.facebook.com/docs/authentication/permissions/)-

如果它在帖子上显示“通过 Graph API Explorer”，则您的应用程序使您使用的是您在使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)工具测试 API 时检索到的访问令牌，而不是您自己的应用程序生成的访问令牌

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T09:27:15.813

好的，我想我终于找到了方法。我需要一个页面访问代码而不是应用程序访问代码。令牌必须在应用程序外部生成，作为长期存在的令牌。

*   使用以下代码获取代码：

`https://www.facebook.com/dialog/oauth?client_id={app_id}&redirect_uri={my_url}&scope=manage_pages,publish_stream`

app_id 是您的应用程序 ID my_url 是您的应用程序 URL 范围是您要授予的权限

在重定向的 URL 中，您将有一个 code 参数。复制它。

*   使用以下命令生成用户访问代码：

`https://graph.facebook.com/oauth/access_token?client_id={app_id}&redirect_uri={my_url}&client_secret={app_secret}&code={code}`

app_secret 是您的应用程序密钥代码是步骤 1 中的代码

您将获得用户访问令牌作为输出。这是一个短暂的生命。

*   使用以下方法将短期用户访问令牌转换为长期用户访问令牌：

`https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id={app_id}&client_secret={app_secret}&fb_exchange_token={short live access token}`

将“短期访问令牌”替换为您在第 2 步中获得的令牌。您将获得无限用户访问令牌作为输出。

*   获取页面访问令牌（这将是无限访问令牌，因为用户访问令牌现在也是无限访问令牌）：

`https://graph.facebook.com/me/accounts?access_token={infinite user access token}`

将“无限用户访问令牌”替换为您在步骤 3 中获得的值。

此命令将列出您管理的所有页面。输出包含您在“access_token”字段中需要的页面访问令牌。您可以在应用程序的任何 API 命令中使用此令牌。

最好的方法是通过服务器端程序（对我来说是 PHP）来完成所有这些步骤，因为应用程序的密钥应该保持“秘密”。

# java - 可能损坏的 java.util.Locale 导致 NullPointerException

> ID：12979020
> 
> 赞同：0
> 
> 时间：2012-10-19T17:02:46.897
> 
> 标签：java, session, tomcat, struts, locale

当我的 JSP 文件中出现 NullpointerException 时，这一切都开始了。导致它的行只有一个 Struts 1.3 标签： `<html:html>`

堆栈跟踪的根本原因是：

```
java.lang.NullPointerException
java.util.Locale.toString(Unknown Source)
org.apache.el.lang.ELSupport.coerceToString(ELSupport.java:377)
org.apache.el.lang.ELSupport.coerceToType(ELSupport.java:407)
org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:188)
org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:938)
org.apache.jsp.search_jsp._jspService(search_jsp.java:193)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
com.servlets.ShowAllJobsServ.doGet(ShowAllJobsServ.java:82)
javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176)
org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)
org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)
org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381) 
```

我开始研究，发现 Struts 从会话中检索一个 Locale 对象，以支持 i82n 功能。然后我想：也许会话中没有Locale，毕竟我还没有使用那个功能。我将测试该对象是否为空。所以我写道：

```
${empty sessionScope["org.apache.struts.action.LOCALE"]} 
```

它打印出来了`false`。

我从同一个对象调用了其他方法，包括 getCountry、getLanguage 和 hashCode。所有这些都导致 NullPointerException。我唯一能成功调用的是getClass。我现在很困惑。

我唯一的猜测是 Locale 对象没有被正确反序列化。我必须说我正在使用[MemcachedSessionManager](https://github.com/magro/memcached-session-manager)将 Tomcat 会话存储在 Memcached 服务器中，成功地存储了基本的 bean 甚至从 Hibernate 中提取的集合。

如果这还不够奇怪，它可以在我的机器™ 上运行，并且只会在我在 Windows Azure 上部署我的应用程序时造成这种混乱。

有什么线索吗？它甚至有任何意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:03:38.380

谈论愚蠢的错误。我在 Windows Azure 上的部署使用 JRE 7，而我在本地机器上使用 JRE 6。我猜 MemcachedSessionManager、Tomcat 6 和 Java 7 不能很好地协同工作：/

# c# - 如何检索与可配置产品关联的简单产品

> ID：12979021
> 
> 赞同：3
> 
> 时间：2012-10-19T17:02:51.997
> 
> 标签：c#, api, magento

嗨，我正在使用带有 c# 的 magento soap api v2。我一直在打电话

```
 var groupedProducts = magentoService.catalogProductLinkList(sessionId, "grouped", id, "productId"); 
```

确实返回分组产品，但我想检索简单的产品，例如与可配置 T 恤相关联的绿色大 T 恤。

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:49:50.213

不幸**的是，使用 magento SOAP api 是不可能的**。您无法通过 api 检索父产品的子产品。相信我，我前段时间自己解决了这个问题。我可以建议 2 个修复和 1 个解决方法。

**解决方法**- 尝试按 sku 或名称检索子产品。如果您的所有子产品都使用父产品的名称或 sku 作为前缀，这可以工作。我一开始就是这样解决的，只要客户没有引入与父名称不匹配的子产品名称，它就可以很好地工作。这是一些示例代码：

```
//fetch configurable products
filters filter = new filters();
filter.filter = new associativeEntity[1];
filter.filter[0] = new associativeEntity();
filter.filter[0].key = "type_id";
filter.filter[0].value = "configurable";

//get all configurable products
var configurableProducts = service.catalogProductList(sessionID, filter, storeView);

foreach (var parent in configurableProducts)
{
    filters filter = new filters();
    filter.filter = new associativeEntity[1];
    filter.filter[0] = new associativeEntity();
    filter.filter[0].key = "type_id";
    filter.filter[0].value = "configurable";
    filter.complex_filter = new complexFilter[1];
    filter.complex_filter[0] = new complexFilter();
    filter.complex_filter[0].key = "sku";
    filter.complex_filter[0].value = new associativeEntity() { key="LIKE", value=parent.sku + "%" };

    var simpleProducts = service.catalogProductList(sessionID, filter, storeView);

    //do whatever you need with the simple products

} 
```

**修复 #1** - 免费 - 编写您自己的 api 扩展。要检索您可以使用的子产品：

```
$childProducts = Mage::getModel('catalog/product_type_configurable')->getUsedProducts(null, $product); 
```

然后，您将结果发送给 api 调用者，一切都会好起来的。不过，我自己还没有尝试过，所以我不确定是否还有其他问题。

**修复 #2** - 付费 - 从 netzkollektiv 获取（优秀但昂贵的）[CoreAPI 扩展](http://www.netzkollektiv.com/produkte/magento-extensions/netzkollektiv-api-extension-fur-magento-core-api/)。这就是当解决方法对我停止工作并且从不后悔这个决定时我所做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T22:34:55.707

我认为您尝试使用默认的 magento SOAP api 是不可能的。

你可以做的是创建一个自定义 api

例如。

[如何使用 SOAP V2 为 Magento 设置自定义 api？](https://stackoverflow.com/questions/7519556/how-to-setup-custom-api-for-magento-with-soap-v2)

[http://www.magentocommerce.com/api/soap/create_your_own_api.html](http://www.magentocommerce.com/api/soap/create_your_own_api.html)

然后创建逻辑来检索与该可配置产品关联的所有简单产品。

```
$_product  = Mage::getModel('catalog/product')->load($id);
// check if it's a configurable product
if($_product->isConfigurable()){
   //load simple product ids
   $ids = $_product->getTypeInstance()->getUsedProductIds(); 
   OR
  $ids = Mage::getResourceModel('catalog/product_type_configurable')->load($_product);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-11T11:40:48.983

请注意，它应该是

```
... new associativeEntity() { key="like", ... 
```

并不是

```
... new associativeEntity() { key="LIKE", .... 
```

大写 LIKE 不起作用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-10T14:48:21.473

我在 Github 上找到了一个 Magento 扩展，其中包含此功能。

> 在同一响应中获取可配置的子产品信息。

[https://github.com/Yameveo/Yameveo_ProductInfo](https://github.com/Yameveo/Yameveo_ProductInfo)

# sql-server - SSMS 比 Provider=SQLNCLI.1 快

> ID：12979025
> 
> 赞同：0
> 
> 时间：2012-10-19T17:03:09.060
> 
> 标签：sql-server, tsql, vbscript, ssms, adodb

我在 VB 脚本中使用 SQL 本机客户端来执行查询。
连接字符串是

```
ConCI.Open("Provider=SQLNCLI.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=" & CIDBName & ";Data Source=" & CIServerName) 
```

查询是

```
SELECT COUNT(*) 
FROM statementheader WITH (nolock)
WHERE statementdate >=
(
    SELECT procdayend-1 
    FROM
    ARSystemAccounts
) 
AND currentbalance <= 0 
AND dateoftotaldue IS NOT NULL
AND systemstatus <> 14 
```

SSMS 需要 50 到 60 秒来执行此查询，但 VB 脚本需要很长时间。
为什么会这样，我该怎么办？

# asp.net-web-api - 异步操作过滤器：ASP.NET WEB API 中的 Async 和 AuthorizeAttribute

> ID：12979028
> 
> 赞同：20
> 
> 时间：2012-10-19T17:03:18.317
> 
> 标签：asp.net-web-api, async-await, action-filter

我在一个类中有我的身份验证逻辑，它派生自 System.Web.Http.AuthorizeAttribute （重写的 OnAuthorization 方法）。我从该方法调用数据库，我希望该调用是异步的（幸运的是，新的 ADO.NET 异步 API 允许这样做）。

然后我将此属性应用于控制器，以使对其的所有调用都通过身份验证过滤器。到目前为止，一切都很好。

但是这样做我遇到了以下问题。框架（ASP.NET Web API）似乎不知道我的意图是什么:)看起来它在我的过滤器的 OnAuthorizaion 方法完成（从异步调用返回）之前继续执行控制器的操作。因此框架中的异常a la“请求处理在所有未完成的异步操作完成之前完成..”

有没有开箱即用的方法来处理这个问题？

PS我的直觉说我正在创建自定义操作过滤器。然后我需要覆盖 ExecuteActionFilterAsync 并在那里进行身份验证，我自己处理所有与任务相关的东西，而没有框架方面的帮助..）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2018-10-18T18:26:48.763

`IAsyncAuthorizationFilter`异步使用和实现接口。

`public async Task OnAuthorizationAsync(AuthorizationFilterContext actionContext)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T21:48:51.860

好的，这就是我想出的（在用反射器窥视引擎盖后）：

```
public class SecurityFilterAttribute : FilterAttribute, IAuthorizationFilter
{
    public async Task<HttpResponseMessage> ExecuteAuthorizationFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
    { 
        await OnAuthentication(actionContext);

        return actionContext.Response ?? await continuation();
    }

    private async Task OnAuthentication(HttpActionContext actionContext)
    {
         //some lengthy I/O operations (XXXAsync/await)
    }
} 
```

这样，在应用于控制器/动作时，所有逻辑都将按正确的顺序执行，同时在 I/O 期间保持线程畅通。不过，对取消不是很尊重。但对于我的目的应该没问题..

无论如何，我真的很想知道是什么让 Web API 的创建者不走类似的路……想法？

# iphone - 用渐变抚摸 CGPath？

> ID：12979029
> 
> 赞同：1
> 
> 时间：2012-10-19T17:03:24.697
> 
> 标签：iphone, objective-c, ios, cocoa-touch, core-graphics

我已经研究了一段时间了，作为一个初学者，我似乎无法完成它。我想要做的是一个简单的渐变，并用它来描边一个 CGPath。我尝试将 CGContextSetStokePattern 与 PNG 一起使用，线条的宽度和一个像素高包含我想要的渐变，但这会平铺图案，而我宁愿让它像画笔一样沿着路径绘制。我能想到的最接近的东西是 Pokémon Ranger 的 Styler。

![在此处输入图像描述](../Images/32f0d134eb776d50041839574e7cb580.png)

本质上，我希望我的线条从中间的一种颜色开始，然后在边缘向另一种颜色移动。可能有一种简单的方法可以做到这一点，但我一生都无法弄清楚如何做。

非常感谢任何可以帮助我的人。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:09:10.203

没有内置支持以这种方式抚摸路径。

您可以尝试通过多次抚摸路径来伪造它，每个笔划的线宽都比之前的笔划窄，颜色也不同，也许还有不同的阴影设置。当然，反复抚摸它比抚摸它一次需要更长的时间。

# .net - 发生 KeyboardNavigation.TabNavigation Cycle 时的事件

> ID：12979030
> 
> 赞同：1
> 
> 时间：2012-10-19T17:03:28.457
> 
> 标签：.net, wpf, .net-4.0

我有一个 WPF 弹出窗口，其中有几个控件。用户可以很好地浏览控件。但是当到达最后一个控件时，tab 会将焦点移回 Popup 中的第一个控件。

我希望弹出窗口关闭并将焦点移到弹出窗口父级中的下一个控件，而不是循环回到起点。

我已经看到了 KeyboardNavigation.TabNavigation 选项，但无论我将它们设置为什么，焦点总是循环（或禁用选项卡）。

有没有办法获得 OnCycle 事件，以便我可以手动关闭弹出窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:31:25.847

没有事件可以告诉您焦点何时循环回来。您可以在第一个控件上添加[PreviewGotKeyboardFocus](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewgotkeyboardfocus.aspx)事件的处理程序，并`Popup`在最后一个控件当前具有键盘焦点时关闭。但是，如果用户从最后一个控件显式单击到第一个控件，这也会关闭弹出窗口。

我可能会在标签顺序中的最后一个控件之后放置一个不可见的控件。因此，当用户从最后一个控件中选择选项卡时，不可见的控件将获得焦点，并且您会知道关闭弹出窗口。

# mantis - 缩短 Mantis 中的版本号列表

> ID：12979031
> 
> 赞同：0
> 
> 时间：2012-10-19T17:03:29.137
> 
> 标签：mantis

我安装了一个用于所有产品的 Mantis 错误跟踪器。一个产品经历了一个快速的开发周期，每个新版本都会获得一个新的版本号（版本号递增）。由于我们的 QA 必须报告他们为引入该错误的构建发现的所有错误，因此我们还必须在每次进行新构建时向 Mantis 添加一个新版本号。因此，`Manage`-> `Manage Projects`->下的版本号列表*`Project name`*现在很长。

我只是试图删除一个非常旧的版本号，但这会从所有引用它的问题中删除该号码。（从数据库设计的角度来看是有意义的。）

有没有办法在不影响问题的情况下缩短版本列表？我们拥有的非常旧的版本号将永远不会再次使用，但我希望旧问题完好无损。我做了一堆谷歌搜索，但我总是被不相关的结果淹没。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:40:29.173

您是否尝试设置*过时*的 version 属性？
如[管理员指南](http://www.mantisbt.org/docs/master-1.2.x/en/administration_guide/admin.project.html)中所述：

> 每个项目可以有多个版本，这些版本标有已发布和过时等属性。

和 ：

> 一旦某个版本被标记为过时，它现在不再包含在更改日志中。

另请参阅这些问题：

1.  [不能在“查看问题”中选择过时版本作为过滤器](http://www.mantisbt.org/bugs/view.php?id=12636)
2.  [标记为过时的版本出现在更改日志页面上](http://www.mantisbt.org/bugs/view.php?id=11604)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:11:52.190

如果我正确理解您，您想要的是一种过滤“管理项目”页面中显示的版本的方法。

这不能在当前版本的 MantisBT (1.2.14) 中完成，并且需要更改代码。[我建议您在我们的跟踪器](http://mantisbt.org/bugs)上打开一个功能请求。如果您最终实现了该功能，请将其作为拉取请求提交到我们的[Github 存储库](https://github.com/mantisbt/mantisbt)。

# arrays - 将数组与标量相乘并在 VBA 中添加

> ID：12979034
> 
> 赞同：2
> 
> 时间：2012-10-19T17:03:47.003
> 
> 标签：arrays, excel, vba

我在 Excel 工作表中有两列数据，它们的大小相等，并且都只包含数字。

我正在尝试编写一个宏，它将这两个集合放入数组中，然后对它们执行计算。具体来说`ArrayA + 3*ArrayB`，然后将结果放回新列中的工作表中。以下是我到目前为止的代码。

```
Dim ArrayA As Variant
Dim ArrayB As Variant
Dim ArrayC As Variant

ArrayA = Worksheets("Sheet1").Range("A1:A5")
ArrayB = Worksheets("Sheet1").Range("B1:B5")

'this is where things go bad
ArrayC = ArrayA + 3 * ArrayB 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:43:15.513

您需要首先创建一个值数组。然后确保你在数组中循环。

```
Dim ArrayA As Variant
Dim ArrayB As Variant
Dim ArrayC() As Variant

ArrayA = Worksheets("Sheet1").Range("A1:A5").Value
ArrayB = Worksheets("Sheet1").Range("B1:B5").Value

'this is where things go bad
'ArrayC = ArrayA + 3 * ArrayB

'manually make array C the same size as array A
ReDim ArrayC(LBound(ArrayA, 1) To UBound(ArrayA, 1), 1 To 1)

Dim i As Long 'variable to count which section of the array we are on

' loop through each spot int he array and perform the math
For i = LBound(ArrayA, 1) To UBound(ArrayA, 1)
    ArrayC(i, 1) = ArrayA(i, 1) + 3 * ArrayB(i, 1)
Next i

Worksheets("Sheet1").Range("C1:C5").Value = ArrayC 
```

**注意**上面的代码未经测试，所以我可能在某处有错字。此外，在使用 redim 时，您可能需要声明 ArrayC 的数据类型而不是变量。我目前无法测试，因为我正在用手机接听电话。

# javascript - 将一维数组转换为二维数组

> ID：12979037
> 
> 赞同：0
> 
> 时间：2012-10-19T17:04:05.413
> 
> 标签：javascript, multidimensional-array

我想在我的代码中实现插件图表，图表代码就像

```
 chart = new Highcharts.Chart({
            },
            series: [{
                type: 'pie',
                name: 'criterin',
                data: [
                    ['Firefox',   45.0],
                    ['IE',       26.8],
                    {
                        name: 'Chrome',
                        y: 12.8,
                        sliced: true,
                        selected: true
                    },
                    ['Safari',    8.5],
                    ['Opera',     6.2],
                    ['Others',   0.7]
                ]
            }]
        }); 
```

我有从 ajax 函数获得的数组，其中包含要替换到图表中的信息。

例如，我警告样本数组和结果如下：

> `post work,0.64,quality,0.35`

如何使用我的数组与图表代码集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:25:12.117

所以，如果我对你的理解正确，你有一个看起来像这样的数组

```
['post work',0.64,'quality',0.35] 
```

你希望它看起来像这样：

```
[
    ['post work', 0.64],
    ['quality', 0.35]
] 
```

像这样的东西应该工作

```
function array1Dto2D(sourceArray) {
    var array2D = [];
    for (var i=0; i < sourceArray.length - 1; i+=2) {
        var pair = [sourceArray[i], sourceArray[i+1]];
        array2D.push(pair);
    }
    return array2D;
} 
```

并使用这样的东西（注意我不使用highcharts，但我认为您在问题中使用它的方式不正确，将空对象作为第一个参数）：

```
 chart = new Highcharts.Chart({
        series: [{
            type: 'pie',
            name: 'criterin',
            data: array1Dto2D(my1dsourcedata)
        }]
    }); 
```

# c# - 列表 在不同项目中使用 getter 时，返回类型更改为 T[]

> ID：12979043
> 
> 赞同：0
> 
> 时间：2012-10-19T17:04:21.507
> 
> 标签：c#, generics, setter, getter

基本上我在 Visual Studio 2010 中有两个项目。项目 1 包含一个 getter/setter 对，如下所示：

```
public class MyFirstType
{
    public string Name { set; get; }
    public List<T> OtherList {set; get; }
    public override String toString() { ... }
}

public class MyClass
{
    public List<MyFirstType> MyType { get; set; };
    public override String toString() { ... }
} 
```

在 project2 中，我尝试像这样使用这个 MyClass：

```
MyClass mclass = new MyClass();
List<MyFirstType> myTypeList = mclass.MyType; 
```

但是，我收到以下错误：

```
Cannot implicitly convert type 'MyType[]' to 'System.Collections.Generic.List<MyFirstType>' 
```

我只是不明白这里发生了什么。如果我在 project1 中使用这个构造，我会得到一个列表。

我知道列表在内部表示为 T[]。但是为什么这里的返回类型的行为会发生变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:10:49.827

如果项目 1 是 WCF 服务或通过 WCF 服务使用的类，则默认情况下 List 被转换为数组。如果是这样，您应该去服务参考并检查适当的选项（转换为列表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:07:12.503

最可能的原因是您有不止一个`MyClass`，而代码选择的不是您期望的。“F12”（去定义）通常会很快解决这些谜团。

# ios - 如何使用情节提要将两个 UINavigationControllers 指向一个视图控制器？

> ID：12979044
> 
> 赞同：4
> 
> 时间：2012-10-19T17:04:21.290
> 
> 标签：ios, uinavigationcontroller, ios6, uistoryboard

我正在尝试将两个 UINavigationControllers（代表选项卡栏应用程序中的不同选项卡）连接到单个 UICollectionViewController。集合视图控制器将根据哪个导航控制器是父级来填充不同的数据。当两个导航控制器都连接时，导航到第二个选项卡会显示黑屏，并且集合视图的控制器中的 viewWillAppear() 代码不会触发。导航到第一个选项卡时，所有内容都会触发并正确显示并填充数据。

故事板设置如下所示： ![故事板截图](../Images/2fc758451f0fab814604e253bdba2fb9.png)

导航控制器连接到集合视图控制器，如下所示： ![转接连接](../Images/f41dd253954a913bea60eafce219bcaf.png)

如果我断开两个导航控制器连接中的*任何*一个，则与集合视图的剩余连接将正常工作，并且集合项将按预期显示。 ![删除了一个连接的情节提要](../Images/02ab91071171c731d5770245f7b31c18.png)

这是重用集合视图的正确方法吗？我如何将带有 segues 的两个导航控制器连接到单个 UICollectionView 是否缺少一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T19:19:54.980

我看到这已经快一年了，所以我不确定你是否找到了答案，但我想如果需要我会帮忙回答。在不了解您的项目太多的情况下，我可以问您为什么希望 tabBarController 将其两个视图控制器都指向同一个？让我想知道为什么 tabBarController 是必要的。

建立一个测试项目，我目睹了你所做的同样的事情。我唯一能想到的是，当通过 Storyboard 实例化视图控制器时，它会创建它的一个实例并存储在 tabBarController 的 viewControllers[i] 属性中，其他选项卡可能无法在层次结构中访问该属性。最好从 Storyboard 复制视图控制器对象并将其粘贴到情节提要的另一个区域，并让 tabBarController 实例化同一视图控制器对象的新实例。这样，在您的 viewDidLoad 方法中，您可以知道 selectedIndex 是什么，并知道如何加载数据、更改界面等。复制/粘贴 Storyboard 视图控制器应该保持您设置的任何出口/操作的完整性。

希望有帮助...

# c# - Double.ToString() 如何显示比 Double 精度更高的字符？

> ID：12979054
> 
> 赞同：-9
> 
> 时间：2012-10-19T17:05:02.933
> 
> 标签：c#, .net, vb.net, double, floating-point-precision

```
?(1.0-0.9-0.1)
-0.000000000000000027755575615628914

?((double)1.0-(double)0.9-(double)0.1)
-0.000000000000000027755575615628914

?((double)1.0-(double)0.9-(double)0.1).GetType()
{Name = "Double" FullName = "System.Double"}

?((double)1.0-(double)0.9-(double)0.1).ToString()
"-2,77555756156289E-17" 
```

a 如何`Double.ToString()`显示更多的[双](http://msdn.microsoft.com/en-us/library/678hzkk9%28v=vs.80%29.aspx)精度（15-16）的字符（32）？

我希望这**仅**`MyObject.ToString()`代表*MyObject*而不是 ***`MyObject+SomeTrashFromComputer`***

 *****为什么**

```
?0.1
0.1
?0.2-0.1
0.1
?0.1-0.1
0.0 
```

**但**

```
?1.0-0.9-0.1
-0.000000000000000027755575615628914 
```

为什么

```
?1.0-0.1-0.9
0.0 
```

**但**

```
?1.0-0.9-0.1
-0.000000000000000027755575615628914 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:23:59.297

> Double.ToString() 如何显示比双精度（15-16）更多的字符（32）？

它不是显示 32，而是显示 17，前导零不算数。*浮点*意味着它可以将大小的变化与值的变化分开跟踪。

> 我希望 MyObject.ToString() 只代表 MyObject

确实如此，由于浮点数的机制，可能会有细微的差别，但真正的数字是由字符串精确表示的。

> 不是 MyObject+SomeTrashFromComputer

没有垃圾，有浮点不准确。它也以十进制形式存在，准确记`1/3`为十进制数。你不能，它涉及重复的小数位。双精度数以 2 为基数存储，因此甚至`0.1`会创建一个重复的“十进制”。

另请注意，您将获得两种不同的表示形式，因为您正在调用两种不同的显示方法。`ToString`具有特定的语义，而您的调试窗口可能具有不同的语义。如果你想知道是什么`E`意思，也可以查阅科学记数法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:24:02.370

检查这个[System.Double](http://msdn.microsoft.com/en-us/library/system.double.aspx)

> 请记住，浮点数只能逼近十进制数，并且浮点数的精度决定了该数字逼近十进制数的准确度。默认情况下，Double 值包含 15 位精度的十进制数字，但内部维护最多 17 位数字。浮点数的精度有几个后果：
> 
> 在特定精度下看起来相等的两个浮点数可能不相等，因为它们的最低有效数字不同。
> 
> 如果使用十进制数，使用浮点数的数学或比较运算可能不会产生相同的结果，因为浮点数可能不完全接近十进制数。
> 
> 如果涉及浮点数，则值可能不会往返。如果一个操作将原始浮点数转换为另一种形式，则称一个值往返，逆运算将转换后的形式转换回浮点数，并且最终的浮点数等于原始浮点数数字。往返可能会失败，因为在转换中丢失或更改了一个或多个最低有效数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:30:50.963

我认为您不清楚浮点数的两个方面；*精度*和*范围*。_

浮点表示的*精度*是它可以接近给定小数的程度。a 的精度`double`为 15-16 位。

浮点表示的*范围与该表示可以近似的数字的大小有关。*a 的范围`double`是 +/-5.0e-324 到 +/-1.7e308。

因此，在您的情况下，计算精确到 16 个字符，之后就不是预期的那样。

[一些](http://en.wikipedia.org/wiki/Floating_point#Representable_numbers.2C_conversion_and_rounding)看似简单的数字在标准浮点表示中是无法表示的。如果您要求绝对没有偏差，您应该使用不同的数据类型，例如`decimal`.***

# django - Django中的子查询

> ID：12979055
> 
> 赞同：0
> 
> 时间：2012-10-19T17:05:11.053
> 
> 标签：django, subquery

我有 2 个模型：

```
class Professors(models.Model):
    professors_name = models.CharField('professor', max_length=32, unique=True)
class Discipline(models.Model):
    auditorium = models.IntegerField('auditorium')
    professors_name = models.ForeignKey(Professors) 
```

在视图中：

```
disciplines = Discipline.objects.all() 
```

所以，我有许多礼堂和professionals_name_id。但我需要完整的教授姓名，而不是身份证。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:11:23.107

Django ORM 将始终返回对象而不是 id。你应该有这样的设计。

```
class Professor(models.Model):
    name = models.CharField('professor', max_length=32, unique=True)
class Discipline(models.Model):
    auditorium = models.IntegerField('auditorium')
    professor = models.ForeignKey(Professors) 
```

并用于`discipline.professor.name`单独检索名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:49:52.587

楷模：

```
# models usually named in the singular
class Professor(models.Model):
    professors_name = models.CharField('professor', max_length=32, unique=True) 
class Discipline(models.Model):
    auditorium = models.IntegerField('auditorium')
    # your pointer is to a professor, not to the name
    professor = models.ForeignKey(Professor) 
```

鉴于：

```
# select_related('professor') to avoid a second query when accessing professor
disciplines = Discipline.objects.select_related('professor') 
```

模板：

```
{% for disc in disciplines %}
{{ disc.auditorium }}: {{ disc.professor.name }}
{% endfor %} 
```

对于值：

```
Discipline.objects.values('auditorium', 'professor__name') 
```

# javascript - WebRequest 检查服务器

> ID：12979059
> 
> 赞同：1
> 
> 时间：2012-10-19T17:05:23.533
> 
> 标签：javascript, asp.net, html, vb.net, httpwebrequest

我正在尝试检查我的服务器（本地服务器）是启动还是关闭。我想传递我的服务器名称：myDEVServer12 (http://www.example.com/ss.asp)

```
Public Function CheckServer(ByVal ServerName As String) As Boolean
    Try
        Dim request As WebRequest = WebRequest.Create(ServerName)
        Dim response As WebResponse = request.GetResponse()
        imgServer1.ImageUrl = ("~/Images/green_light.png")
    Catch ex As Exception
        imgServer1.ImageUrl = ("~/Images/red_light.png")
        Return False
    End Try
    Return True
End Function 
```

我也尝试过使用ping。它可以工作，但页面需要很长时间才能加载（4 个服务器）

```
Dim ping As New Ping
Try
    Dim pingreply = ping.Send(lblServer1.Text, 2000)
    If pingreply.Status = IPStatus.Success Then
        imgServer1.ImageUrl = ("~/Images/green_light.png")
    Else
        imgServer1.ImageUrl = ("~/Images/red_light.png")
    End If
Catch ex As Exception
    imgServer1.ImageUrl = ("~/Images/red_light.png")
End Try 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:54:01.257

```
Dim myRequest As WebRequest = WebRequest.Create("http://www.google.com")
' Return the response. 
Dim myResponse As String = myRequest.GetResponse().ContentType().ToString()
MsgBox(myResponse) 
```

# c# - 无法使用数据库中的数据集检索数据

> ID：12979060
> 
> 赞同：0
> 
> 时间：2012-10-19T17:05:25.973
> 
> 标签：c#, web-services

我正在编写 Web 服务方法来检索用户的数据。为了清楚起见，我的数据库中有一个名为 User 的表，其中包含 ID、fName、lName、emailAddress、用户名、密码、reg_ID。如果我使用 ID 来检索数据，它会起作用，但是如果我在“where”子句中使用 emailAddress，它会给我以下错误。

**网络服务方法**

```
 [WebMethod(Description = "Returns Details of User with username")]
        public DataSet GetUser(string user)
        {
            DataSet dataSet = new DataSet();
            OleDbConnection oleConn = new OleDbConnection(connString);

            try
            {
                oleConn.Open();
                string sql = "SELECT * FROM [User] WHERE [username]=" + user;
                OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
                dataAdapter.Fill(dataSet, "User");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
            finally
            {
                oleConn.Close();
            }
            if (dataSet.Tables["User"].Rows.Count <= 0)
                return null;

                return dataSet;
        } 
```

**错误**

```
System.NullReferenceException: Object reference not set to an instance of an object.
   at UserManagement.UserRegistration.GetUser(String user) in C:\Users\smartamrit\Desktop\SystemSoftware\UserManagement\UserRegistration.asmx.cs:line 170 
```

第 170 行开始于 `if (dataSet.Tables["User"].Rows.Count <= 0`)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:10:55.927

如果查询未返回任何行，则不会将表添加到 DataSet。因此

```
dataSet.Tables["User"] 
```

可能为空。

您需要检查 Fill 方法的返回值以确保返回了行。

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/y4b211hz.aspx)，fill 方法返回一个整数，它表示：

> 在 DataSet 中成功添加或刷新的行数。这不包括受不返回行的语句影响的行。

此外，您的查询对 sql 注入开放（一个安全漏洞）。您需要将其更改为使用[参数化查询](http://software-security.sans.org/developer-how-to/fix-sql-injection-microsoft-.net-with-parameterized-queries)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:40:13.970

您是否在传递电子邮件 ID 时使用了单引号，或者在传递电子邮件 ID 时尝试使用 like 语句。您是否检查了 catch 块中是否引发了任何异常。

可能的原因是catch块中可能发生异常，它被抑制，然后if语句执行并抛出未找到用户表的错误。

# mysql - 在 Google Cloud SQL 中达到 10gb 限制后会发生什么

> ID：12979061
> 
> 赞同：1
> 
> 时间：2012-10-19T17:05:27.067
> 
> 标签：mysql, google-cloud-sql

我读过 Google Cloud SQL 推荐用于中小型应用程序。我想知道是否可以将我的数据分布在 Google Cloud SQL 中的多个实例中。假设在实例 1 中我有 10 个表，每个表 1Gb，一段时间后表 A 需要更多空间，比如 1.5Gb。现在在一个实例中没有足够的空间容纳所有这些数据，如何将表 A 数据分布到不同实例中？有可能这样做吗？

谢谢你，罗德里戈。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T17:13:56.147

根据[谷歌存储文档](http://support.google.com/drive/bin/answer.py?hl=en&answer=2736257)：

*如果您达到免费存储限制，您仍可以访问 Google Drive、Gmail 和 Picasa 中的所有内容，但您将无法创建或添加超出免费存储限制的任何新内容。*

# python - 在 pandas 中使用自定义偏移别名

> ID：12979062
> 
> 赞同：3
> 
> 时间：2012-10-19T17:05:29.400
> 
> 标签：python, pandas

通过子类化在 pandas 中实现自定义频率后`DateOffset`，是否可以为该频率“注册”一个偏移别名，以便可以在内置的 pandas 函数中使用别名，例如`date_range`和`resample`？

例如，假设我实现了一个自定义的每月两次的频率：

```
from pandas.tseries.offsets import DateOffset, CacheableOffset

class TwiceMonthly(DateOffset, CacheableOffset):
    def apply(self, other):
        # Some date logic here

    @property
    def rule_code(self):
        return 'TM' 
```

现在，`TwiceMonthly()`我想使用偏移别名 TM，而不是到处使用。

```
# Suppose s is a time series
s.resample('TM', how='sum') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:58:07.757

不幸的是，现在这是不可能的。别名是静态的。不过，这将是一个很好的功能。请在 github (https://github.com/pydata/pandas/issues/2085) 上查看。额外的反馈或 PR 将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-24T10:49:59.757

我刚刚遇到了同样的问题，并在此处的 pandas 文档中找到了我的解决方案：[https ://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#combining-aliases](https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#combining-aliases)

如果您记录日期的时间间隔与建议的时间间隔不同，则可以在 Pandas 中组合别名。

# apache - ZF2 重写子目录/Url 路由

> ID：12979065
> 
> 赞同：0
> 
> 时间：2012-10-19T17:05:35.620
> 
> 标签：apache, .htaccess, url-rewriting, zend-framework2

我的公用文件夹位于子目录中。所以我使用了两个 .htaccess 文件。

公共文件夹目录之外的第一个是：

```
RewriteEngine On
RewriteRule ^(.*)$ public/$1 [NC,QSA] 
```

public 文件夹中的第二个是默认的 Zend 一个：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

当我转到[http://mydomainname.com/myappname](http://mydomainname.com/myappname)时，我收到以下错误：

发生 404 错误

网页未找到。

请求的 URL 无法通过路由匹配。

，但是当我去[http://mydomainname.com/myappname/public时，这当然有效](http://mydomainname.com/myappname/public)

我不确定我的 .htaccess 是否需要修复，或者我是否需要修复我的路线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:38:18.533

我认为最简单的解决方案是将公用文件夹的内容移动到其父目录。

复制

```
myappname/public/css
myappname/public/images
myappname/public/js
myappname/public/index.php
myappname/public/.htaccess 
```

至

```
myappname/css
myappname/images
myappname/js
myappname/index.php
myappname/.htaccess 
```

确保`myappname/.htaccess`用默认的 zf2替换`public/.htaccess`

然后在`myappname/index.php`注释掉：

```
//chdir(dirname(__DIR__)); 
```

# sql-server - 什么决定了 SQL Server Management Studio 可以并行导入的表数

> ID：12979067
> 
> 赞同：2
> 
> 时间：2012-10-19T17:05:42.357
> 
> 标签：sql-server, ssms

在以下屏幕截图中，SSMS 一次只复制一个给定表的行：

![http://imgur.com/Kq72I](../Images/3404171165d0b7120213ac01378a9fc0.png)

它显然能够一次执行多个副本（在这种情况下，您会看到多个“复制行”行）。

什么决定了 SSMS 复制表时的并行度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:30:11.230

答案就在向导后面创建的 SSIS 包中。默认情况下，创建此包时每个数据流任务都按顺序运行，您可以看出这一点，因为每个任务都直接连接到具有优先约束的下一个任务。如果要保存包，在 BIDS 中打开它并删除优先约束，那么它将并行导入它们。

下一个级别将涉及数据库设计。SQL Server 只能为每个 IO 路径（通常是 LUN 或 RAID 阵列）打开一个 IO 线程，因此真正的并行性将受到核心数量和表所分布的磁盘数量的限制。

除此之外，您还有可能因外部 SSIS 进程与 SQL Server 数据库引擎争夺资源而降低并行度。

# c# - DirectoryEntry 返回不可用的值但不抛出任何异常，C#

> ID：12979071
> 
> 赞同：3
> 
> 时间：2012-10-19T17:05:49.537
> 
> 标签：c#, directoryentry

> **可能重复：**
> [如何知道我的 DirectoryEntry 是否真的连接到我的 LDAP 目录？](https://stackoverflow.com/questions/1063642/how-to-know-if-my-directoryentry-is-really-connected-to-my-ldap-directory)

我故意使用无效域调用 DirectoryEntry() 来测试我的 C# 应用程序如何处理服务器停机等情况。 DirectoryEntry() 不会引发异常 - 它返回（看似正常）但是在调试时，我不能查看 directoryEntry 的内容 - 它在变量扩展时超时。

直到我对 DirectorySearcher 对象执行操作后，程序才会挂起几分钟，然后返回异常“服务器无法运行”。似乎设置 clientTimeout 也无济于事。有什么建议么？

```
TimeSpan timeout = new TimeSpan(0, 0, 0, 15, 0);
string domain = "asdf";
DirectoryEntry myDirectoryEntry = new DirectoryEntry("LDAP://" + domain);
DirectorySearcher mySearcher = new DirectorySearcher(myDirectoryEntry);
mySearcher.ClientTimeout = timeout;
mySearcher.Filter = "(&(objectCategory=person)(objectClass=user));
searcher.FindAll();  //this takes minutes with invalid domain!!! 
```

# c# - 这两种类型的属性声明之间的根本区别是什么？

> ID：12979073
> 
> 赞同：2
> 
> 时间：2012-10-19T17:06:03.003
> 
> 标签：c#, properties

以下两个声明之间的主要区别是什么？

```
public string Name
{
  get { return "Settings"; }
} 
```

和

```
public const string Name = "Settings"; 
```

不是都防止被改变吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T17:07:50.217

第一个是仅提供 get 访问器的属性。这是*按实例*指定的。

第二个是编译时间常数。在编译时，它将被替换为`"Settings"`，因此它根本不是该类型的成员。

该`const`声明确实具有消除方法调用的优点（因为它只是一个编译时常量值），但是，属性调用可能会在运行时被 JIT 消除。

属性声明的优点是允许您稍后更改其工作方式，而不会破坏兼容性——甚至是二进制兼容性。为了查看 const 值的变化，需要对使用它的所有内容进行完全重新编译，即使它位于单独的程序集中。

基本上， a`public const`可能是一个好主意，但前提是这是一个*永远不会改变*的值——不是在程序运行期间永远不会改变的值，而是永远不会在任何地方、任何时间改变的值。 `Int32.MaxValue`是一个很好的例子 - 这具有基于`Int32`类型本身的特定含义 - 这不可能改变。因此，作为`public const`. 在你的情况下，可能是你*最终*`"Settings"`想要改变的东西——如果是这样的话，那么将它封装在一个属性中是有意义的。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:07:28.930

第一个是属性声明。第二个是实例变量声明。

两者都不能改变，但语义不同。就财产而言，没有任何改变。当您使用简写语法来声明属性 ( `public string Name { get; }`) 时，它会创建一个隐藏的实例变量来保存该属性的值，但是当您手动声明一个属性时，就像您在此处所做的那样，并且您不声明实例变量随之而来的是，没有要更改的数据。在给出的示例中，该属性不返回某些包含“设置”的变量的值，而是返回文字字符串。它与返回文字的方法几乎没有什么不同：它总是返回相同的值，但你不会将其称为“不可变”，因为“不可变”意味着有一些东西需要改变。

在实例变量的情况下，您正在创建一个属于该类的每个实例的字段。由于`const`，该字段的值不能被修改，但是存储了一个实际值，原则上可以修改，除非是`const`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T17:09:06.027

`const`运行时不存在变量。该字段的值将在编译时放置在使用该字段的任何位置。无论在何处使用名称，它都与复制粘贴“设置”相同。

另一方面，运行时存在只读属性。这意味着该类型中存在一个新属性，以及相关的元数据。每次调用该属性时，它将调用 getter 的方法，涉及相关的调用堆栈操作，并且该方法将简单地返回相同的值。

当可以使用`const`字段时，通常最好使用字段。只读属性的优点是您可以返回不是编译时文字的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T17:08:58.360

> 不是都防止被改变吗？

是的，（仅）在这方面它们是相同的。

但是这个属性很不寻常，所以比较似乎是人为的。

```
public string Name
{
  get { return "Settings"; }
} 
```

您通常不会将属性用于设计时常量。如果它在整个持续时间内确实是固定的，请使用您的第二个声明（常量，而不是属性）：

```
public const string Name = "Settings"; 
```*

# node.js - 使用 nodejs 的持久 cookie

> ID：12979081
> 
> 赞同：1
> 
> 时间：2012-10-19T17:06:32.470
> 
> 标签：node.js, cookies, express

我想使用 node.js 在我的浏览器中保存一些 cookie。任何人都知道我怎样才能实现这种行为？我的目的是当用户选中复选框（“让我保持登录”）时，复选框状态和 cookie 应该被存储。

# ios - NSManagedObject 的设置器创建 _CDSnapshot_Provence_

> ID：12979085
> 
> 赞同：0
> 
> 时间：2012-10-19T17:07:00.680
> 
> 标签：ios, core-data, nsmanagedobject

我有两个 NSManagedObject：

1.  数据输入
2.  普罗旺斯

它们之间有一个关系：DataEntered 必须有一个 Provence，而 Provence 可能有一个/多个 DataEntered。

一切运行良好，但在使用 Instruments 和 Allocations 时，每次我将 Provence 设置为 DataEntered 时，#Living 中都会出现一个新的 _CDSnapshot_Provence_：

```
Provence * provence = [[self fetchedResultsController] objectAtIndexPath:indexPath];
[self.dataEntered setAddress_provence:provence]; 
```

DataEntered 中 Provence 的 setter 由 CoreData 管理，没有自定义。

当我保存 DataEntered 时，保存正确。什么会导致创建多个生活_CDSnapshot_Provence_？

谢谢！

```
@class Provence;

@interface DataEntered : NSManagedObject

@property (nonatomic, retain) NSString * name;
@property (nonatomic, strong) Provence *address_provence;

@end

@class Provence;

@interface DataEntered : NSManagedObject

@property (nonatomic, retain) NSString * name;
@property (nonatomic, strong) Provence *address_provence;

@end

@class DataEntered;

@interface Provence : NSManagedObject

@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSSet *dataEnteredAddress_Provence;

@end

@interface Provence (CoreDataGeneratedAccessors)

- (void)addDataEnteredAddress_ProvenceObject:(DataEntered *)value;
- (void)removeDataEnteredAddress_ProvenceObject:(DataEntered *)value;
- (void)addDataEnteredAddress_Provence:(NSSet *)values;
- (void)removeDataEnteredAddress_Provence:(NSSet *)values;

@end

#import "Provence.h"
#import "DataEntered.h"

@implementation Provence

@dynamic name;
@dynamic dataEnteredAddress_Provence;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:50:17.210

我看到了完全一样的东西，我相信这是可以预料的。

请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdChangeManagement.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdChangeManagement.html)的 Apple 文档中的 **冲突检测和乐观锁定部分**

*“当 Core Data 从持久存储中获取一个对象时，它会拍摄其状态的快照。快照是一个对象持久属性的字典——通常是它的所有属性和它具有一对一的任何对象的全局 ID关系。”*

在同一链接上还有一个部分对阅读很有用 -**快照管理**

我遇到的问题是在我对所有托管对象进行故障处理或进行上下文重置后，让 Core Data 释放其内存分配。

我刚刚发布了一篇关于此主题和相关主题的博客文章： **Core Data issues with memory allocation** - [http://finalize.com/2013/01/04/core-data-issues-with-memory-allocation/](http://finalize.com/2013/01/04/core-data-issues-with-memory-allocation/)

希望这可以帮助。

斯科特

# android - 如何在 .xml 中存储不同屏幕尺寸的整数？

> ID：12979086
> 
> 赞同：0
> 
> 时间：2012-10-19T17:07:05.967
> 
> 标签：android

类似于你可以有两个文件夹`res/values`和`res/values-xlarge`，并且在每个文件夹中你可以有一个`dimens.xml`不同尺寸的文件......

我希望能够像这样存储一些整数（不是大小`dp`或类似的东西，只是普通整数）。这可以在 .xml 中执行吗？或者如果没有，我怎么能以编程方式做到这一点？

如果您必须知道原因：我正在显示一个列表，用户可以在其中选择一次显示结果的数量。对于较小的屏幕，我希望默认列表长度小于较大屏幕的默认列表长度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T17:14:14.680

是的，有一个完全一样的机制。只需在相关文件夹中创建一个 XML 文件，`res/values`而不是类似：

```
<resources>
    <dimen ...>
</resource> 
```

您可以提供[整数资源](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)：

```
<resources>
    <integer name="i">234</integer>
</resource> 
```

但是，在您的特定情况下，我还会考虑简单地更改相关布局文件是否更有意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T17:15:45.100

当然，你可以这样做。就像存储字符串 Ressource 一样，您可以存储[Integers](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)。

取自文档：

保存在 res/values/integers.xml 的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <integer name="big_screen_width">12000</integer>
    <integer name="small_screen_width">320</integer>
</resources> 
```

代码看起来像这样

```
Resources res = getResources();
int bigScreen = res.getInteger(R.integer.big_screen_width); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:09:15.990

您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)以编程方式存储内容。

# node.js - Node.js 的 MongoDB 本机驱动程序在查询“_id”时未返回结果

> ID：12979087
> 
> 赞同：0
> 
> 时间：2012-10-19T17:07:11.200
> 
> 标签：node.js, mongodb, express

我正在尝试查询我的数据库以获取匹配的“_id”，但结果返回为空，但在 mongodb shell 中，它返回了正确的结果。这是我正在使用的代码。

```
var collection = new mongodb.Collection(client, 'products');
collection.findOne({ _id : 50738ebbe3d87c6beaddb6f2 }, function(err, result){
  res.send(result);
  console.log(result);
}); 
```

我也试过用，

```
"ObjectId('50738ebbe3d87c6beaddb6f2')" 
```

但这也回来了'null'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:12:59.737

正确的语法是：

```
collection.findOne({ _id : new mongodb.ObjectID('50738ebbe3d87c6beaddb6f2') }, 
  function(err, result){
    res.send(result);
    console.log(result);
  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T01:02:42.063

这将正常工作。
您可以使用 BSON 从 HEX 字符串中获取 ObjectID。

```
var mongodb = require('mongodb');
var BSON = mongodb.BSONNative;

var o_id = BSON.ObjectID.createFromHexString(theidID);
collection.findOne({'_id' : o_id}, function(err, document) {
 console.log(document);
}); 
```

# c - 如何从 c 目录中仅获取 *.txt 文件名并将其写入 char ** 数组？

> ID：12979089
> 
> 赞同：2
> 
> 时间：2012-10-19T17:07:11.623
> 
> 标签：c, unix, char, arrays

它是我之前问题的扩展：[如何从 c 中的目录中仅获取 txt 文件？](https://stackoverflow.com/questions/12976733/how-can-i-get-only-txt-files-from-directory-in-c/12976945). 现在我想将这些文件名（我真的不知道目录中有多少）保存到`char **`数组中。我想出了一个解决方案（有点），但后来我意识到我不需要`char*`但是`char **`（我知道，愚蠢的我 :]）

无论如何，我用这段代码得到了分段错误[核心转储]：

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>
#include <dirent.h>
#include <stdbool.h>

char* allocMemory(int n)
{
    char *tab = (char *) malloc(n*sizeof(char));
    return tab;
}

void freeMemory(char **tab, int n, int m)
{
    int i=0;
    for(i=0; i<m; i++)
        free(tab[i]);
    free(tab);
    tab = NULL;
}

bool hasTxtExtension(char const *filename)
{
    size_t len = strlen(filename);
    return len > 4 && strcmp(filename + len - 4, ".txt") == 0;
}

char** getTxtFilenames(const char *dirname)
{
    DIR *directory = NULL;
    struct dirent *ent = NULL;
    int fileCounter = 0;

    char **txtFiles = allocMemory(1);
    char **moreTxtFiles = allocMemory(1);

    directory = opendir (dirname);
    if(directory == NULL)
        return NULL;
    int i = 0;

     while ((ent = readdir (directory)) != NULL)
     {
         if(hasTxtExtension(ent->d_name))
         {
             fileCounter ++;
             moreTxtFiles = (char**) realloc (txtFiles, fileCounter * sizeof(char*));

             if(moreTxtFiles[i] != NULL)
             {
                 txtFiles = moreTxtFiles;
                 txtFiles[i] = allocMemory(strlen(ent->d_name));
                 txtFiles[i][fileCounter - 1] = ent->d_name;
             }
             else
             {
                 freeMemory(txtFiles, 1, fileCounter);
                 return NULL;
             }
         }
         i ++;
     }

     if(closedir(directory) < 0)
        return NULL;

    return txtFiles;
}

int main(int argc, char **argv)
{
    char **txtFilenames = getTxtFilenames("dir");
    if(txtFilenames == NULL)
        return -1;
    printf("%s\n", txtFilenames[0][1]);
    return 0;
} 
```

**编辑：**

我也试过这个：（请注意，我对 C 中那些不可爱的 char 数组有点困惑，啊 :/）

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>
#include <dirent.h>
#include <stdbool.h>

char* allocMemory(int n)
{
    char *tab = (char *) malloc(n*sizeof(char));
    return tab;
}

void freeMemory(char *tab)
{
    free(tab);
    tab = NULL;
}

bool hasTxtExtension(char const *filename)
{
    size_t len = strlen(filename);
    return len > 4 && strcmp(filename + len - 4, ".txt") == 0;
}

char* getTxtFilenames(const char *dirname)
{
    DIR *directory = NULL;
    struct dirent *ent = NULL;
    int fileCounter = 0;

    char *txtFiles = NULL;
    char *moreTxtFiles = NULL;

    directory = opendir (dirname);
    if(directory == NULL)
        return NULL;

     while ((ent = readdir (directory)) != NULL)
     {
         if(hasTxtExtension(ent->d_name))
         {
             fileCounter ++;
             moreTxtFiles = (char*) realloc (txtFiles, fileCounter * sizeof(char));

             if(moreTxtFiles != NULL)
             {
                 txtFiles = moreTxtFiles;
                 txtFiles[fileCounter - 1] = ent->d_name;
             }
             else
             {
                 freeMemory(txtFiles);
                 return NULL;
             }
         }
     }

     if(closedir(directory) < 0)
        return NULL;

    return txtFiles;
}

int main(int argc, char **argv)
{
    char **txtFilenames = getTxtFilenames("dir");
    if(txtFilenames == NULL)
        return -1;
    printf("%s\n", txtFilenames[0]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:18:09.203

*   `txtFilenames[0][1]`是一个字符，而不是一个字符串。
*   `txtFiles[i][fileCounter - 1]`是一个字符，但是`ent->d_name`是一个字符串。

我不明白你为什么使用两个索引（`i`和`fileCounter`）。只需使用一个字符串数组。您还应该包括`<string.h>`.

解决方案更简单：

```
#include <direct.h>
#include <stdlib.h>
#include <string.h>

char **f(const char *s)
{
    char **p = NULL;
    DIR *dir;
    struct dirent *ent;
    size_t i = 0;

    dir = opendir(s);

    while ((ent = readdir(dir)) != NULL) {
        if (hasTxtExtension(ent->d_name)) {
            p = realloc(p, (i + 1) * sizeof(char *));
            p[i] = malloc(strlen(ent->d_name) + 1);
            strcpy(p[i], ent->d_name);
            ++i;
        }
    }

    closedir(dir);
    return p;
} 
```

以下是改进此代码的非详尽列表：

*   处理重新分配错误：如果`realloc`失败，则存在内存泄漏。
*   处理目录错误：特别是处理错误`s`目录路径的情况。
*   优化重新分配（不要`realloc`在每次迭代中使用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:39:11.960

除了 Kirilenko 指出的可疑索引之外，您的第一个（也是核心）错误是：

```
char **txtFiles = allocMemory(1);
char **moreTxtFiles = allocMemory(1); 
```

这似乎很无辜，但 allocMemory 被定义为：

```
char* allocMemory(int n)
{
    char *tab = (char *) malloc(n*sizeof(char));
    return tab;
} 
```

txtFiles 和 moreTxtFiles 都是指向指针的*指针*；不是指向字符的指针。您正在返回一个指向单个已分配字符的指针，然后将其存储在一个指针中，该指针期望它是一个指向指针的*指针*。

对于您的情况，不要使用 allocMemory 来分配列表条目。只需使用它来分配您的字符串。

# python - GData：如何避免硬编码登录信息

> ID：12979090
> 
> 赞同：0
> 
> 时间：2012-10-19T17:07:14.013
> 
> 标签：python, authentication, login, google-drive-api, gdata

我正在开发一个报告系统，它会在一夜之间自动更新结果并将它们放在谷歌驱动器上的文件中。它现在的工作方式是对登录名和密码信息进行硬编码，即使它有效，这也绝不是理想的。在 StackOverflow 中搜索并没有具体指出这个问题，这让我感到惊讶。一个包含相关代码部分的非常简化的示例如下所示：

```
import gdata.docs.service

class GDrive(object):
    def __init__(self, email, password)
        self.gd_client = gdata.docs.service.DocService()
        self.gd_client.ClientLogin(email, password)
    def upload(self):
        # Code to Upload file somewhere in GDrive.

gd = GDrive("the@email.address", "ThePassword")
gd.upload() 
```

可以做些什么来避免显式写入用户名和密码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:57:48.613

```
import gdata.docs.service
import sys

class GDrive(object):
    def __init__(self, email, password)
        self.gd_client = gdata.docs.service.DocService()
        self.gd_client.ClientLogin(email, password)
    def upload(self):
        # Code to Upload file somewhere in GDrive.

if __name__ == "__main__":
    username = sys.argv[1]
    password = sys.argv[2]

    gd = GDrive(username, password)
    gd.upload() 
```

现在从你的命令行运行，就像你的 python 脚本的名称在`script.py the@email.address ThePassword`哪里......`script.py`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:25:58.290

我会使用 OAuth2 协议。这是一种长时间（但不是永远）存储凭据的安全方式。

我的手机有一个简短的回答，但请检查：

[https://developers.google.com/drive/about-auth](https://developers.google.com/drive/about-auth)

这一点使得使用 Oauth2 变得更加容易：

[https://developers.google.com/api-client-library/python/platforms/google_app_engine#Decorators](https://developers.google.com/api-client-library/python/platforms/google_app_engine#Decorators)

# sql - 将枢轴与另一个复杂表连接

> ID：12979095
> 
> 赞同：6
> 
> 时间：2012-10-19T17:07:29.297
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的数据透视查询生成：

```
+-----------+----+----+---+---+---+---+---+
| client_id | 1  | 2  | 3 | 4 | 5 | 6 | 7 |
+-----------+----+----+---+---+---+---+---+
|    216436 |  9 |  0 | 0 | 0 | 0 | 0 | 0 |
|    110522 | 76 |  3 | 0 | 0 | 0 | 0 | 0 |
|    214981 |  0 |  1 | 0 | 0 | 0 | 0 | 0 |
|    216360 | 52 |  1 | 0 | 0 | 0 | 0 | 0 |
|    102574 |  1 |  0 | 0 | 0 | 0 | 0 | 0 |
|    211754 | 97 | 14 | 2 | 0 | 0 | 0 | 0 |
|    210734 |  8 |  4 | 0 | 0 | 0 | 0 | 0 |
|    100123 |  1 |  0 | 0 | 0 | 0 | 0 | 0 |
|    101840 |  2 |  0 | 0 | 0 | 0 | 0 | 0 |
+-----------+----+----+---+---+---+---+---+ 
```

这是查询：

```
 select client_id,
   [1],[2],[3],[4],[5],[6],[7] -- these are timestested (the amount of times tested)
   from
   (   SELECT DISTINCT CLIENT_ID
   , PATIENT_ID
   , count(*) over (partition by client_id, patient_id) AS patientcount

   from f_accession_daily) as SourceTable
   PIVOT
   (
   count(patient_id)
   for patientcount in ([1],[2],[3],[4],[5],[6],[7])
   ) as pivottable 
```

**我需要从该表中获取每次测试的最大/最小日期（对于 [1]、[2]、[3] 等）**：

```
+-----------+-------------+-------+------------+------------+
| client_id | TimesTested | count | maxRecDate | minRecDate |
+-----------+-------------+-------+------------+------------+
|    100034 |           2 |     1 | 6/25/2008  | 6/23/2008  |
|    100034 |           1 |    20 | 6/30/2008  | 6/19/2008  |
|    100038 |           3 |     1 | 7/25/2008  | 7/23/2008  |
|    100038 |           1 |     4 | 7/25/2008  | 7/1/2008   |
|    100050 |           1 |    15 | 8/11/2008  | 7/14/2008  |
|    100060 |           1 |     2 | 8/12/2008  | 7/29/2008  |
|    100070 |           1 |     3 | 8/15/2008  | 8/15/2008  |
|    100049 |           1 |     3 | 8/22/2008  | 7/11/2008  |
|    100029 |           3 |     2 | 8/25/2008  | 6/18/2008  |
+-----------+-------------+-------+------------+------------+ 
```

上表由以下方式生成：

```
SELECT a.client_id AS client_id
,a.patientcount TimesTested
   , count(a.patientcount)/a.patientcount AS count
   , max(f.received_date) AS maxRecDate
   , min(f.received_date) AS minRecDate
FROM
(
   SELECT DISTINCT CLIENT_ID
   , PATIENT_ID
   , count(*) over (partition by client_id, patient_id) AS patientcount

   from f_accession_daily

) AS a
JOIN F_ACCESSION_DAILY AS f ON a.CLIENT_ID = f.CLIENT_ID
   AND a.PATIENT_ID = f.PATIENT_ID

GROUP BY a.CLIENT_ID, a.patientcount 
```

**我需要得到的结果表：**

```
+-----------+----+----------+-----------+----+----------+-----------+---+----------+-----------+---+----------+-----------+-----+
| client_id | 1  | maxdate1 | mindate1  | 2  | maxdate2 | mindate2  | 3 | maxdate3 | mindate3  | 4 | maxdate4 | mindate4  |  5  |
+-----------+----+----------+-----------+----+----------+-----------+---+----------+-----------+---+----------+-----------+-----+
|    216436 |  9 | 1/1/2011 | 1/23/1985 |  0 | 1/1/2011 | 1/23/1985 | 0 | 1/1/2011 | 1/23/1985 | 0 | 1/1/2011 | 1/23/1985 | etc |
|    110522 | 76 | 1/1/2011 | 1/23/1984 |  3 | 1/1/2011 | 1/23/1984 | 0 | 1/1/2011 | 1/23/1984 | 0 | 2/1/2011 | 1/23/1984 |     |
|    214981 |  0 | 1/1/2013 | 1/23/1985 |  1 | 1/1/2013 | 1/23/1985 | 0 | 1/1/2013 | 1/23/1985 | 0 | 1/1/2013 | 1/23/1985 |     |
|    216360 | 52 | 1/1/2011 | 1/23/1985 |  1 | 1/1/2011 | 1/23/1985 | 0 | 1/1/2011 | 1/23/1985 | 0 | 1/1/2011 | 1/23/1985 |     |
|    102574 |  1 | 1/1/2011 | 1/23/1985 |  0 | 1/1/2014 | 1/23/1980 | 0 | 2/1/2011 | 1/23/1985 | 0 | 1/1/2011 | 1/23/1985 |     |
|    211754 | 97 | 1/1/2012 | 1/23/1985 | 14 | 1/1/2012 | 1/23/1985 | 2 | 1/1/2012 | 1/23/1985 | 0 | 1/1/2012 | 1/23/1985 |     |
|    210734 |  8 | 1/1/2011 | 1/23/1984 |  4 | 1/1/2011 | 1/23/1984 | 0 | 1/1/2011 | 1/23/1984 | 0 | 1/1/2011 | 1/23/1984 |     |
|    100123 |  1 | 1/1/2011 | 1/23/1985 |  0 | 1/1/2011 | 1/23/1985 | 0 | 1/1/2011 | 1/23/1985 | 0 | 1/1/2011 | 1/23/1987 |     |
|    101840 |  2 | 1/1/2011 | 1/23/1985 |  0 | 1/1/2011 | 1/23/1980 | 0 | 1/1/2011 | 1/23/1985 | 0 | 1/1/2011 | 1/23/1985 |     |
+-----------+----+----------+-----------+----+----------+-----------+---+----------+-----------+---+----------+-----------+-----+ 
```

**我如何加入这两个表？速度无所谓！非常感谢您的帮助。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:59:05.920

不是最漂亮的，但我完整地保留了您的原始查询并将其全部放在一个 [big] 语句中：

```
;WITH 
PivotQuery as (
    select client_id,
       [1],[2],[3],[4],[5],[6],[7]
       from
       (   SELECT DISTINCT CLIENT_ID
       , PATIENT_ID
       , count(*) over (partition by client_id, patient_id) AS patientcount

       from f_accession_daily) as SourceTable
       PIVOT
       (
       count(patient_id)
       for patientcount in ([1],[2],[3],[4],[5],[6],[7])
       ) as pivottable),

MinMaxTimes as (
    SELECT a.client_id AS client_id
    ,a.patientcount TimesTested
       , count(a.patientcount)/a.patientcount AS count
       , max(f.received_date) AS maxRecDate
       , min(f.received_date) AS minRecDate
    FROM
    (
       SELECT DISTINCT CLIENT_ID
       , PATIENT_ID
       , count(*) over (partition by client_id, patient_id) AS patientcount

       from f_accession_daily

    ) AS a
    JOIN F_ACCESSION_DAILY AS f ON a.CLIENT_ID = f.CLIENT_ID
       AND a.PATIENT_ID = f.PATIENT_ID

    GROUP BY a.CLIENT_ID, a.patientcount),

maxDates as (
SELECT client_id, [1] maxdate1, [2] maxdate2, [3] maxdate3, [4] maxdate4, [5] maxdate5, [6] maxdate6, [7] maxdate7
FROM MinMaxTimes t
PIVOT (max(maxRecDate)
for TimesTested IN ([1], [2], [3], [4], [5], [6], [7])
) as p),

minDates as (
SELECT client_id, [1] mindate1, [2] mindate2, [3] mindate3, [4] mindate4, [5] mindate5, [6] mindate6, [7] mindate7
FROM MinMaxTimes t
PIVOT (max(minRecDate)
for TimesTested IN ([1], [2], [3], [4], [5], [6], [7])
) as p)

SELECT p.client_id, 
    p.[1], max(maxdate1) maxdate1, max(mindate1) mindate1,
    p.[2], max(maxdate2) maxdate2, max(mindate2) mindate2,
    p.[3], max(maxdate3) maxdate3, max(mindate3) mindate3,
    p.[4], max(maxdate4) maxdate4, max(mindate4) mindate4,
    p.[5], max(maxdate5) maxdate5, max(mindate5) mindate5,
    p.[6], max(maxdate6) maxdate6, max(mindate6) mindate6,
    p.[7], max(maxdate7) maxdate7, max(mindate7) mindate7   
FROM PivotQuery p
LEFT OUTER JOIN maxDates a ON p.client_id = a.client_id
LEFT OUTER JOIN mindates i ON a.client_id = i.client_id
GROUP BY p.client_id, p.[1], p.[2], p.[3], p.[4], p.[5], p.[6], p.[7] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:35:46.380

无需加入这两个查询。此外，也不需要使用自联接。以下是在一个查询中选择所有必要数据的方法：

```
WITH counted AS (
  SELECT
    client_id,
    COUNT(*) AS TimesTested,
    MAX(received_date) AS maxdate,
    MIN(received_date) AS mindate
  FROM f_accession_daily
  GROUP BY
    client_id,
    patient_id
),
counted2 AS (
  SELECT
    client_id,
    TimesTested,
    CAST(COUNT(*) AS varchar(30)) AS count,
    CAST(MAX(maxdate) AS varchar(30)) AS maxdate,
    CAST(MIN(mindate) AS varchar(30)) AS mindate
  FROM counted
  GROUP BY
    client_id,
    TimesTested
),
unpivoted AS (
  SELECT
    client_id,
    ColumnName + CAST(TimesTested AS varchar(10)) AS ColumnName,
    ColumnValue
  FROM counted2
  UNPIVOT (
    ColumnValue FOR ColumnName IN (count, maxdate, mindate)
  ) u
),
pivoted AS (
  SELECT
    client_id,
    count1, maxdate1, mindate1,
    count2, maxdate2, mindate2,
    count3, maxdate3, mindate3,
    count4, maxdate4, mindate4,
    count5, maxdate5, mindate5,
    count6, maxdate6, mindate6,
    count7, maxdate7, mindate7
  FROM unpivoted
  PIVOT (
    MAX(ColumnValue) FOR ColumnName IN (
      count1, maxdate1, mindate1,
      count2, maxdate2, mindate2,
      count3, maxdate3, mindate3,
      count4, maxdate4, mindate4,
      count5, maxdate5, mindate5,
      count6, maxdate6, mindate6,
      count7, maxdate7, mindate7
    )
  ) p
)
SELECT *
FROM pivoted
; 
```

这是它的工作原理：

1.  第一个 CTE ( `counted`) 按 和 对数据进行分组`client_id`，`patient_id`并计算每个组的行数、最大日期和最小日期。

2.  第二个 CTE ( ) 按包含行计数（称为 ）的列`counted2`对先前的结果集进行分组，并再次计算行数并找到每组的最大和最小日期。生成的行集类似于您问题中的第二个表，除了只是（因为这是您的第一个查询计算的）。此外，所有聚合结果都将转换为字符串，以准备它们进行反透视。`client_id``TimesTested``count``COUNT(*)`

3.  以下 CTE`unpivoted`执行上述反透视，生成如下所示的行集：

    ```
    client_id  ColumnName  ColumnValue
    ---------  ----------  -----------
    211754     count1      97
    211754     maxdate1    1/1/2012
    211754     mindate1    1/23/1985
    211754     count1      14
    211754     maxdate1    1/1/2012
    211754     mindate1    1/23/1985
    ... 
    ```

4.  最终的 CTE`pivoted`执行最后一步，旋转前一个 CTE 的结果，最终产生您想要的输出。

# c# - WNDPROC 文档

> ID：12979099
> 
> 赞同：2
> 
> 时间：2012-10-19T17:07:45.210
> 
> 标签：c#, winforms

我正在阅读一些教程，我遇到了以下结构：

```
protected override void WndProc( ref Message m )
{
    ...

    base.WndProc( ref m );
} 
```

例如：

```
private const int WM_DWMCOMPOSITIONCHANGED = 0x31e; 
```

是什么意思`0x31e`。一些文档？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T17:09:34.453

这是您突出显示的常量的值。

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd388199%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd388199%28v=vs.85%29.aspx)

`WM_DWMCOMPOSITIONCHANGED`实际的十六进制值除了标识消息之外没有特殊含义。

Windows API 中还有许多其他窗口消息 - 所有消息都以开头，`WM_`然后还有一些消息。您可以打开`winuser.h`并查找它们，但您必须阅读各个消息文档才能了解它们的作用。`winuser.h`只包含常量的声明。

# asp.net - 无法转换类型为“System.Web.UI.LiteralControl”的对象错误

> ID：12979100
> 
> 赞同：8
> 
> 时间：2012-10-19T17:07:46.007
> 
> 标签：asp.net, asp.net-mvc

我收到此错误：无法将“System.Web.UI.LiteralControl”类型的对象转换为“System.Web.Controls.TextBox”</p>

我从 ASPX 页面中的查询字符串输入文本输入框，代码如下：

```
<EditItemTemplate>
                        <asp:TextBox ID="GV_Post_ID" runat="server" text='<%# Request.QueryString["Post_ID"] %>'></asp:TextBox>
                    </EditItemTemplate> 
```

但是当我运行它时，它会停在这里：

```
cmd.Parameters.Add("@Post_ID", SqlDbType.VarChar).Value = ((TextBox)GV_InlineEditing.Rows[0].Cells[2].Controls[0]).Text; 
```

我得到了上面的错误。这是后面的代码：

```
SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["DSRConnectionString"].ConnectionString);
            SqlCommand cmd = new SqlCommand();
            cmd.CommandText = "INSERT INTO RCA_Events(Post_ID, Date, Description) VALUES(@Post_ID, @Date, @Description)";
            cmd.Parameters.Add("@Post_ID", SqlDbType.VarChar).Value = ((TextBox)GV_InlineEditing.Rows[0].Cells[2].Controls[0]).Text;
            cmd.Parameters.Add("@Date", SqlDbType.VarChar).Value = ((TextBox)GV_InlineEditing.Rows[0].Cells[3].Controls[0]).Text;
            cmd.Parameters.Add("@Description", SqlDbType.VarChar).Value = ((TextBox)GV_InlineEditing.Rows[0].Cells[4].Controls[0]).Text; 
```

请注意，如果我从 ASPX 页面中删除查询字符串，然后手动插入该值，那么它可以工作。请。帮助。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T17:11:23.760

问题在这里：

`(TextBox)GV_InlineEditing.Rows[0].Cells[2].Controls[0]`

该单元格中的第一个控件不是`TextBox`您认为的那样。让我们假设`GV_InlineEditing.Rows[0]`安全地为您提供所需的行。做这样的事情：

```
TextBox myTextBox = GV_InlineEditing.Rows[0].FindControl("GV_Post_ID") as TextBox;
cmd.Parameters.Add("@Post_ID", SqlDbType.VarChar).Value = myTextBox.Text; 
```

该代码可以像这样更安全：

```
TextBox myTextBox = GV_InlineEditing.Rows[0].FindControl("GV_Post_ID") as TextBox;
if (myTextBox != null)
{
    cmd.Parameters.Add("@Post_ID", SqlDbType.VarChar).Value = myTextBox.Text;
}
else
{
    // Do something here.  Default value for the post id?
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-16T21:48:47.323

问题是当您使用 Gridviews 并将**Databound**字段转换为**ItemTemplates**时，您将例如一个文本框添加到**EditItemTemplate**，然后将其自己的 ID 添加到该文本框，例如 txtProduct，函数 .controls [ **0]**不会找不到它，它不知道您的文本框的 ID，因此在这种情况下，您必须提供要定位的 TextBox 的 ID。因此，您应该使用**.FindControl("txtProduct")而不是使用****.Controls[0]**。在您的情况下，而不是：

 **```
(TextBox)GV_InlineEditing.Rows[0].Cells[2].Controls[0].Text; 
```

你应该做这个：

```
(TextBox)GV_InlineEditing.Rows[0].Cells[2].FindControl("GV_Post_ID").Text; 
```**

# mysql - 为什么这个查询在插入记录时抛出错误

> ID：12979101
> 
> 赞同：3
> 
> 时间：2012-10-19T17:07:48.033
> 
> 标签：mysql, pdo

我使用以下查询创建了一个表

```
CREATE TABLE `events` (
 `event_id` bigint(20) NOT NULL AUTO_INCREMENT,
 `username` varchar(50) NOT NULL,
 `event_name` varchar(100) NOT NULL,
 `description` text,
 `event_date` datetime NOT NULL,
 `repeat` tinyint(4) NOT NULL,
 `share` varchar(100) DEFAULT NULL,
 `share_type` varchar(50) NOT NULL,
 PRIMARY KEY (`event_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

现在我正在尝试使用此查询插入记录

```
INSERT INTO events (username,event_name,description,event_date,repeat,share,share_type) VALUES ('bhavik','Will go home','','2012-11-11 18:10','0','','public'); 
```

错误我收到 **#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在 'username,event_name,description,event_date,repeat,share,share_type) VALUES ('bha' at line 1**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:11:01.747

repeat 是保留关键字

在插入语句中使用“重复”

```
INSERT INTO events (username,event_name,description,event_date,`repeat`,share,share_type) VALUES ('bhavik','Will go home','','2012-11-11 18:10','0','','public'); 
```

# spring - Spring Tiles：添加上下文信息（菜单、标题）

> ID：12979104
> 
> 赞同：1
> 
> 时间：2012-10-19T17:07:59.283
> 
> 标签：spring, tiles2

我想知道将上下文信息（如当前菜单或页面标题）添加到 spring 3 + tiles 2 应用程序的最佳方法是什么。

我希望系统尽可能易于扩展，例如，我的图块配置使用通配符，因为我不想为每个新的请求处理程序编写一个新条目：

```
<tiles-definitions>
<definition name="baseLayout" template="/WEB-INF/jsp/layout.jsp">
    <put-attribute name="title" value="Template" />
    <put-attribute name="header" value="/WEB-INF/jsp/header.jsp" />
    <put-attribute name="menu" value="/WEB-INF/jsp/menu.jsp" />
    <put-attribute name="body" value="/WEB-INF/jsp/content.jsp" />
    <put-attribute name="footer" value="/WEB-INF/jsp/footer.jsp" />
</definition>    
 <definition name="**-tile" extends="baseLayout">
    <put-attribute name="title" value="{1}" />
    <put-attribute name="body" value="/WEB-INF/jsp/{1}.jsp" />
</definition>
</tiles-definitions> 
```

所以我想剩下的唯一选择就是在模型中添加东西。我当然可以为每个请求处理程序添加一个新的模型条目（例如 MODEL_ID），如下所示：

```
@RequestMapping(value="/order/{orderId}.x")
public String showOrder(ModelMap model, @PathVariable long orderId) {
    // do stuff
    model.addAttribute(Context.MODEL_ID, Context.getOrderContext());
} 
```

然后在 title.jsp 中解释这个特定的 MODEL_ID 以显示标题，并在 menu.jsp 中解释以突出显示当前菜单项。

但是，我不喜欢将这些行添加到我所有控制器的所有请求方法中的想法。

我正在考虑编写一个拦截器，它试图根据视图或请求路径的名称来确定“上下文”，但是我必须重写拦截器中的所有 URL，并使它们与控制器保持同步。

将上下文信息添加到每个控制器以在常见磁贴中使用的正确或最简单的方法是什么？

# java - 如何在网格视图中将文件名显示为图像的标题

> ID：12979106
> 
> 赞同：1
> 
> 时间：2012-10-19T17:08:02.527
> 
> 标签：java, android, textview, imageview, caption

我现在正在开发一个 android 应用程序，并且我的 res/drawable-mdpi 文件夹中的图像显示在 gridview 中。我现在还在图像底部显示了标题，这些是我在 String[] 文本中的预设单词。我可以使用哪些代码行来显示正在显示的图像的文件名，而不是显示这些预设的单词（我希望应用程序本身找到文件的名称并显示它，而不是我必须手动输入文件名）。例如，如果我显示了一个蓝色框并且图像文件名为 blue_0.jpg，我怎样才能使标题显示为“blue_0.jpg”？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:22:20.773

您可以使用 Resource 类的[getResourceEntryName](http://developer.android.com/reference/android/content/res/Resources.html#getResourceEntryName%28int%29)。

# javascript - 即使未填写必填项，我的页面也不会停止前进到下一页

> ID：12979107
> 
> 赞同：1
> 
> 时间：2012-10-19T17:08:05.243
> 
> 标签：javascript

> **可能重复：**
> [我想在 JavaScript 中验证我的必填字段不为空](https://stackoverflow.com/questions/12975734/i-want-to-verify-in-javascript-that-my-required-fields-are-not-blank)

我早些时候发布了这个，但没有一个解决方案有效。我确实使用了一些建议，所以我可能更接近了。当用户提交时，即使未完成必填字段，它也会前进到下一页。我想要它，以便如果任何必填字段为空白，它不会前进。我应该如何更改我的代码来实现这一点？

```
 <script type="text/javascript">
    function insert() {
        if (window.XMLHttpRequest) {
            xmlhttp = new XLMHttpRequest();
        } else {
            xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
        }

        cn1 = 'child_name'+document.getElementById('child_name').value;
        ag2 = 'age'+document.getElementById('age').value;
        hm3 = 'hometown'+document.getElementById('hometown').value;
        bg4 = 'boy_girl'+document.getElementById('boy_girl').value;
        fn5 = 'first_name'+document.getElementById('first_name').value;
        ln6 = 'last_name'+document.getElementById('last_name').value;
        email = 'email'+document.getElementById('email').value;
        ad8 = 'address1'+document.getElementById('address1').value;
        ad9 = 'address2'+document.getElementById('address2').value;
        ct10 = 'city'+document.getElementById('city').value;
        st11 = 'state'+document.getElementById('state').value;
        zp12 = 'zip'+document.getElementById('zip').value;

        var flagInvalid = false;
        var tempArray = document.getElementsByClassName("required");
        for (var i = 0; i < tempArray.length; i++)
        {
            if (tempArray[i].value == ""){
                flagInvalid = true;
                break;
            }
        }

        if (flagInvalid == false) {
        xmlhttp.open('POST', 'payment.php', true);
        xmlhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xmlhttp.send(cn1&ag2&hm3&bg4&fn5&ln6&email$ad8&ad9&ct10&st11&zp12);

        } else {
            alert ("Please enter all required fields.");
        }

    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:18:59.690

看到[这个小提琴](http://jsfiddle.net/XfjPX/1/)。你的逻辑似乎工作正常。页面上还有其他事情吗？

只是`flagInvalid`总是出现“假”吗？所以总是进行ajax调用？

编辑：我有另一个想法。你是`insert()`从一个运行函数`button`吗？或者一个锚标签。如果您使用的`button`是这样的[小提琴](http://jsfiddle.net/XfjPX/2/)并且您的按钮位于 a 内，`form`那么它仍将运行该`insert()`功能，但会`form`立即提交，并且您的页面似乎正在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:23:08.083

尝试在此行上使用严格的比较运算符：

```
if (tempArray[i].value === ""){ 
```

# android - 使用 Sqlite 数据库。onCreate() 方法没有被执行

> ID：12979115
> 
> 赞同：0
> 
> 时间：2012-10-19T16:57:50.347
> 
> 标签：android, sqlite

我创建了一个`DatabaseInterface`用于 Sqlite 操作的类。 `DatabaseInterface.onCreate()`（我创建了一个表）当我创建这个类的一个对象时，方法没有被执行。

我`DatabaseInterface`在另一个类中创建了对象`FirstTimeActivity`

```
public class FirstTimeActivity extends Activity{

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    DatabaseInterface db = new DatabaseInterface(this);
    }
} 
```

下面是类的定义`DatabaseInteface`。该`OnCreate()`方法没有被执行，所以我的表没有被创建。数据库已经创建。

```
public class DatabaseInterface  extends SQLiteOpenHelper{

    private static String       DB_NAME = "SMS_DB";
    private static int          DB_VERSION = 1;

    private String TABLE_NAME       = "SENT_ITEMS";
    private String COLUMN_ID        = "S_NO";
    private String COLUMN_MESSAGE   = "MESSAGE";
    private String COLUMN_DATETIME  = "DATE_TIME";

    //creates the database
    public DatabaseInterface(Context context) {
            super(context, DB_NAME, null, DB_VERSION);
            Log.d("Creating Database: ", "Creating Database");
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
            Log.d("Creating Table: ", "Creating Table");
            String create_table = "CREATE TABLE "+ TABLE_NAME + " ("+ COLUMN_ID +" INTEGER PRIMARY KEY, " + COLUMN_MESSAGE + " TEXT, " + COLUMN_DATETIME + "TEXT NOT NULL); ";
            db.execSQL(create_table);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

    public void insertIntoDB(String message)
{
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();

    //get current date and time
    Calendar current_time = Calendar.getInstance();
    //current_time.getTime();
    String Cure = current_time.toString();
    Log.d("Current_Date_time: ", Cure);

    values.put(COLUMN_MESSAGE, message);
    values.put(COLUMN_DATETIME, "ad");

    db.insert("TEST", null, values);
    db.close(); // Closing database connection
}

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:09:40.830

直到您在 DatabaseInterface 对象上调用 getWritableDatabase() 后才真正创建数据库

** 编辑 **

有了新信息，问题似乎在于您的数据库已经创建，因此操作系统不需要执行 onCreate，因为它已经创建。重新考虑如何创建数据库以同时包含表创建，或者如果表不存在则手动插入表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T14:13:43.023

我有同样的问题。通过在手机模拟器上删除并重新安装应用程序解决了这个问题：

当我第一次执行 db.getWritableDatabase() 时，我的代码中有错误，数据库没有成功创建。如果我在 Android 设备监视器中浏览，App 文件夹下没有 .db 文件，所以我认为在修复我的错误后会调用 OnCreate。——它没有。然后我在模拟器上卸载了该应用程序，并使用正确版本的代码重新安装，调用了 Oncreate 函数并成功创建了 .db 文件。

# list - CSS – 具有动态列换行的单个列表

> ID：12979119
> 
> 赞同：11
> 
> 时间：2012-10-19T17:09:11.560
> 
> 标签：list, css, css-selectors

> **可能重复：**
> [CSS：如何将列表分成页面上的列？](https://stackoverflow.com/questions/6509106/css-ways-to-break-list-into-columns-on-page)

我一直在寻找这个解决方案但找不到它，所以我想我会发布我最终制作的内容。

我试图建立一个列表，在第 5 项之后，列表将换行并移动到另一列。这样它就可以根据用户需要多少项目而变得超级动态。

![在此处输入图像描述](../Images/2a7998da344420cf0b0c8f12d54bd4ac.png)

这是我想出的解决方案。

```
 li{
   position: relative;
   line-height: -6px;
}

 ol li:nth-child(6) {
    margin-top: -90px;
}

 ol li:nth-child(-n+5){
    margin-left: 0em;
 }

 ol li:nth-child(n+6){
   margin-left: 10em;
 }
```

```
 <ol>
      <li>Aloe</li>
      <li>Bergamot</li>
      <li>Calendula</li>
      <li>Damiana</li>
      <li>Elderflower</li>
      <li>Feverfew</li>
      <li>Ginger</li>
      <li>Hops</li>
      <li>Iris</li>
      <li>Juniper</li>
 </ol> 
```

这是小提琴：http: [//jsfiddle.net/im_benton/tHjeJ/](http://jsfiddle.net/im_benton/tHjeJ/)

你觉得我的解决方案怎么样？？什么是适用于 IE 的解决方案？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-19T19:17:42.543

尝试按照@tuff 的建议使用以下内容。

```
ol {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
    -webkit-column-count: 2;
    -webkit-column-gap: 20px;
    column-count: 2;
    column-gap: 20px;
} 
```

[http://jsfiddle.net/tHjeJ/6/](http://jsfiddle.net/tHjeJ/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:31:15.553

如果你只想要两列，这并不难你可以在你的列表中尝试这样的事情：

```
ol{ width:300px;}

li{
  width:50%;  
  float:left;
}​ 
```

如果 li 数除以列号，它实际上会在每列中包含相等数量的列表项。

**如果您希望数字像在您的图片上一样，您**可以为每一列使用包装 div，然后使用`start`列表中的属性...它将类似于`start="6"`

# javascript - 如何将动态对象推入数组？

> ID：12979121
> 
> 赞同：3
> 
> 时间：2012-10-19T17:09:18.953
> 
> 标签：javascript, arrays, object, loops, dynamic

> **可能重复：**
> [用于定义对象属性名称的 Javascript 表达式？](https://stackoverflow.com/questions/2855473/javascript-expression-to-define-objects-property-name)

我正在尝试将对象添加到数组中，但我希望名称和值是动态的。这是一个例子：

```
 (function(){
        var data = [];

        for(i=0; i<5; i++){
            data.push({'name' + i: i});
    }

        console.log(data);
    })() 
```

我想我不能对属性使用变量，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T17:11:23.760

如果要使用动态命名的属性，则需要使用数组访问表示法：

```
var temp = {};
temp['name' + i] = i;
data.push(temp); 
```

[在 IIFE 中：]

```
(function(){
    var data,
        temp,
        i;
    data = [];
    for (i = 0; i < 5; i += 1) {
        temp = {};
        temp['name' + i] = i;
        data.push(temp);
    }
    console.log(data);
}()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T17:11:40.110

修改后的代码：可以使用'[]'将基于变量值的键添加到对象中。[jsfiddle](http://jsfiddle.net/PuxVV/)

```
 (function(){
        var data = [], a;

        for(i=0; i<5; i++){
             a = {};
             a['name' + i] = i;
            data.push(a);
    }

        console.log(data);
    })() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T17:11:23.680

像这样：

```
for(i=0; i<5; i++){
    var obj = {};
    obj["name" + i] = i;
    data.push(obj);
} 
```

但我想知道您为什么要将索引硬编码到属性名称中。

由于您有一个数组，因此您已经有一个关联的索引。这也使得该属性难以查找。

如果您需要原始索引的关联，我会使用单独的属性。

```
for(i=0; i<5; i++){
    data.push({name: i, idx: i});
} 
```

# java - 如何用内容中的引号分割字符串

> ID：12979122
> 
> 赞同：1
> 
> 时间：2012-10-19T17:09:21.217
> 
> 标签：java, arrays, string, split

我有一个看起来像这样的字符串：

```
"["xxx","yyy","zzz"]" 
```

谁能给我一个关于如何将其转换为如下所示数组的提示：

```
somestring[0]="xxx"
somestring[1]="yyy"
somestring[2]="zzz" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:13:42.603

表达方式

```
"[\"xxx\",\"yyy\",\"zzz\"]".replaceAll( "[\\\"\\[\\]]", "" ).split( "," ); 
```

将产生一个数组：

```
a[0] = "xxx";
a[1] = "yyy";
a[2] = "zzz"; 
```

我希望...

[1小时后……]

我确定：

```
public static void main(String[] args) {
    for( String part : "[\"xxx\",\"yyy\",\"zzz\"]".replaceAll( "[\\\"\\[\\]]", "" ).split( "," )) {
        System.out.println( part );
    }
} 
```

输出：

```
xxx
yyy
zzz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:10:22.083

肮脏的黑客

```
String s1="[\"xxx\",\"yyy\",\"zzz\"]";
        String s2= s1.replaceAll("\"", "" );
        s2=s2.replace("[", "");
        s2=s2.replace("]", "");
        String ar[] =s2.split(","); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:19:36.067

查看输入字符串模式，`substring`也可以：

```
String inStr = "\"[\"xxx\",\"yyy\",\"zzz\"]\"";
String [] inArray = inStr.substring(0,inStr.length()-2).substring(2).split(",");
System.out.println(Arrays.toString(inArray)); 
```

将打印：

```
 ["xxx", "yyy", "zzz"] 
```

**如果您想删除引号 (")，请**编写如下：

```
String inStr = "\"[\"xxx\",\"yyy\",\"zzz\"]\"";
String [] inArray1 = inStr.substring(0,inStr1.length()-2)
                          .substring(2).replaceAll("\"","").split(",");
System.out.println(Arrays.toString(inArray1)); 
```

或者你可以这样做：

```
String inStr = "\"[\"xxx\",\"yyy\",\"zzz\"]\"";
String [] inArray = inStr.replaceAll( "[\\\"\\[\\]\"]", "").split( "," );
System.out.println(Arrays.toString(inArray0)); 
```

以上两个将打印：

```
 [xxx, yyy, zzz] 
```

# ruby-on-rails - Rails 跨子域的 HTTP 基本身份验证

> ID：12979126
> 
> 赞同：3
> 
> 时间：2012-10-19T17:09:37.177
> 
> 标签：ruby-on-rails, authentication, basic-authentication

我对登台/测试站点进行了一些非常基本的身份验证（这只是为了保护登台站点，我们在应用程序中使用 Devise 进行身份验证）：

```
authenticate_or_request_with_http_basic do |username, password|
  username == "xxx" && password == "xxx"
end 
```

这是一个使用多个子域的应用程序。身份验证工作正常，它会弹出一个对话框，您输入凭据，浏览器会提示您保存我所做的凭据，因为我不想每次都再次输入它们。

问题是每次导航到新的子域时都需要再次输入它们，这对测试人员来说不是很方便。http basic有什么办法解决这个问题吗？还是有更好的方法来保护临时站点？

谢谢。

# php - 识别 foreach 循环中的位置

> ID：12979130
> 
> 赞同：0
> 
> 时间：2012-10-19T17:09:44.837
> 
> 标签：php, foreach, position

我有一个 foreach 循环，我需要确定单个项目的位置。项目总是 9。我使用这个代码。有人有更优雅的解决方案吗？

```
<?php
    foreach( $fruit as $key => $apple ); 
?>
    <li class="<?php if( ($key == 0) || ($key == 3) || ($key == 6) ) echo 'first'; if( ($key == 1) || ($key == 4) || ($key == 7) ) echo 'middle'; if( ($key == 2) || ($key == 5) || ($key == 8) ) echo 'last'; ?>"
          //stuff
     </li>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:11:28.363

如果您需要原始位置，则很可能应该使用`for`循环而不是`foreach`. 您还可以使用模运算符摆脱长度逻辑语句。

```
<?php
    for($i = 0; $i < count($fruit); $i++) {
        $apple = $fruit[i];
        $remainder = $i % 3
?>

    <li class="<?php 
        if($remainder == 0) echo 'first';
        if($remainder == 1) echo 'middle';
        if($remainder == 2) echo 'last'; ?>"

    // stuff

    </li>

<?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:34:50.410

根据评论请求，虽然 PHP 是一种语言，但我所做的只是波特

```
<?php foreach( $fruit as $key => $apple ); ?>
      <?php $position = $key % 3; ?>     
    <li class="<?php if( $position == 0) echo 'first'; 
                     if( $position == 1) echo 'middle'; 
                     if( $position == 2) echo 'last'; ?>"
          //stuff
     </li>
<?php endforeach; ?> 
```

% 是整数除法的余数

```
0 / 3 = 0 remainder 0
1 / 3 = 0 remainder 1
2 / 3 = 0 remainder 2
3 / 3 = 1 remainder 0
...
8 / 3 = 2 remainder 2 
```

# debugging - 内核 oops 消息 - 地址

> ID：12979131
> 
> 赞同：1
> 
> 时间：2012-10-19T17:10:06.230
> 
> 标签：debugging, linux-kernel

在学习内核的过程中，我有两个问题：

1）我想知道内核糟糕消息中显示的地址是虚拟的还是物理的？（我认为这些应该是虚拟的，只要 CPU 使用虚拟地址空间运行并且 MMU 重新映射？）

2）我的平台是基于ARM的，它支持MMU，但是当我查看内核模块加载的地址时，我看到了：

```
# cat /sys/module/mydrv/sections/.data
0xbf00b4f4
# cat /sys/module/mydrv/sections/.text
0xbf006000 
```

这些地址不应该是 0xffffffffa0110000、0xffffffffa011b948 之类的吗？我的意思是在我的理解中虚拟内存地址应该更大，从而提供更大的虚拟地址空间？同样，我是新手，当然不完全了解 VM 和 MMU :)

感谢您的评论，谢谢。

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:25:02.847

1）我想知道内核糟糕消息中显示的地址是虚拟的还是物理的？（我认为这些应该是虚拟的，只要 CPU 使用虚拟地址空间运行并且 MMU 重新映射？）

OOPS/panic 堆栈跟踪中显示的地址都是虚拟的

2) 这些地址不应该是 0xffffffffa0110000、0xffffffffa011b948 之类的吗？我的意思是在我的理解中虚拟内存地址应该更大，从而提供更大的虚拟地址空间？同样，我是新手，当然不完全了解 VM 和 MMU :)

不，除非您使用新的 64 位 armv8 架构，否则您应该只看到 32 位地址 :-) 所以答案取决于您使用的架构以及您使用的是 3G/1G 还是 2G/2G 内核拆分。[大多数linux机器都配置成内核占用4G地址空间的高1G（0xc0000000-0xffffffff），进程使用低3G（0x00000000-0xbfffffff）。但是，有些机器配置了 2G/2G 拆分，内核占用上层 2G (0x80000000 - 0xffffffff)，进程使用下层 2G (0x00000000 - 0x7fffffff)。我认为内核配置 VMSPLIT_3G/VMSPLIT_2G 设置了这个]。

# python - 使用 python 示例进行网页抓取

> ID：12979132
> 
> 赞同：-1
> 
> 时间：2012-10-19T17:10:05.757
> 
> 标签：python, web-scraping

有人可以给我看代码吗，比如说每 30 分钟从谷歌获取[最新消息，然后使用 python 在我的网站上显示它们？](https://news.google.com/nwshp?hl=en)

我观看了 44 个视频教程并学习了基础知识。

一个例子是：

```
import urllib2
from BeautifulSoup import BeautifulSoup
# or if your're using BeautifulSoup4:
# from bs4 import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen('http://www.timeanddate.com/worldclock/astronomy.html?n=78').read())

for row in soup('table', {'class' : 'spad'})[0].tbody('tr'):
  tds = row('td')
  print tds[0].string, tds[1].string
  # will print date and sunrise 
```

但是像我这样的初学者无法理解这段代码如何帮助我解决上面的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T18:29:28.833

这是一个简单的例子，它每半小时从谷歌新闻中获取所有主要标题并将它们打印出来。至于在您的网站上显示它们取决于它的实施方式。例如，如果它从 MYSQL 数据库中获取内容，您可以轻松地使此脚本在每次下载新标题时更新数据库。

```
import mechanize
import cookielib
import lxml.html as lh
import time  

br = mechanize.Browser()
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

while True:
    r = br.open('https://news.google.com/')
    html = r.read()
    doc=lh.fromstring(html)
    for i in doc.xpath('.//*[@class="esc-lead-article-title"]'):
        print i.text_content()
    time.sleep(1800) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:17:09.240

每当你看到你不熟悉的东西的导入声明时，做一个快速的谷歌搜索总是明智的。我的产量

[美丽汤](http://www.crummy.com/software/BeautifulSoup/)。在这里，您可以阅读名为 beautiful soup 的 python 库的文档。

[这里的UrlLib2](http://docs.python.org/library/urllib2.html)是用来打开 URL 的库

阅读文档，它应该可以帮助您了解如何使用这个小片段来发挥您的优势:)。

# python - 将函数写入文件，没有得到

> ID：12979134
> 
> 赞同：1
> 
> 时间：2012-10-19T17:10:08.943
> 
> 标签：python, output

我正在尝试将 psutil.test() 写入文件，但我无法让它工作。有没有办法做到这一点？

这是我使用的代码：

```
import psutil
import tkMessageBox

def Sysinfo():
 test = psutil.test()
 tkMessageBox.showinfo(title='testing',message=test)
 FILE = open("sysinfo.txt","w")
 FILE.write(str(test))
 FILE.close()

Sysinfo() 
```

该文件包含“无”行。

在提示 psutils.test() 显示：

用户 PID %CPU %MEM VSZ RSS TTY 开始时间命令 root 1 0.0 0.1 3532 1944 ? 14:23 00:00 初始化根 2 0.0 ？? ? ? 14:23 00:00 kthreadd root 3 0.0 ? ? ? ? 14:23 00:00 ksoftirqd/0 根 5 0.0 ？? ? ? 14:23 00:00 kworker/u:0 root 6 0.0 ? ? ? ? 14:23 00:00 迁移/0 等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:22:08.827

试试这个：

```
def SysInfo():
  oldstdout = sys.stdout
  sys.stdout = open("sysinfo.txt","w")
  psutil.test()
  sys.stdout.close()
  sys.stdout = oldstdout
SysInfo() 
```

这会将标准输出重定向到文件，写入文件，然后给你正确的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:20:06.877

`psutil.test()`只打印结果，它没有返回语句。试试这个：

```
import inspect
import psutil
test_source_code = inspect.getsource(psutil.test)
print test_source_code 
```

您可以搜索这样的`return`语句：

```
test_source_code.find('return') yields `-1` 
```

以下是 psutil.test() 的结束方式：

```
 print_(templ % (user[:10],
                        pinfo['pid'],
                        pinfo['cpu_percent'],
                        memp,
                        vms,
                        rss,
                        pinfo.get('terminal', '') or '?',
                        ctime,
                        cputime,
                        pinfo['name'].strip() or '?')) 
```

提示：这是在终端中读取 python 代码的便捷方式。（先做`pip install pygments`！）

```
import pygments
from pygments.lexers import PythonLexer
from pygments.formatters import TerminalFormatter
from pygments import highlight

print hightlight(test_source_code, PythonLexer(), TerminalFormatter()) 
```

# linux - 256 色终端中的单声道控制台应用程序

> ID：12979140
> 
> 赞同：1
> 
> 时间：2012-10-19T17:10:25.477
> 
> 标签：linux, mono, console, terminal

单色应用程序是否支持 256 色终端？

我的程序在 256 色环境中给出了非常奇怪的输出。

如果它是 256 色，我应该只检查 $TERM 值并完全禁用颜色吗？

我的输出如下所示：

```
1%{8}%<%t37%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;7%;m1%{8}%<%t31%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;1%;mYou have not registered
1%{8}%<%t37%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;7%;m1%{8}%<%t31%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;1%;mMOTD File is missing
1%{8}%<%t37%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;7%;m1%{8}%<%t30%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;0%;mThetis joined #sanctuary.
1%{8}%<%t37%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;7%;m1%{8}%<%t36%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;6%;mPlugin - Factoids - Saved.
1%{8}%<%t37%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;7%;m1%{8}%<%t36%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;6%;mPlugin - Factoids - Saved.
1%{8}%<%t37%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;7%;m1%{8}%<%t30%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;0%;mChanMess 77 and still going...
1%{8}%<%t37%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;7%;m1%{8}%<%t36%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;6%;mPlugin - Factoids - Saved.
1%{8}%<%t37%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;7%;m1%{8}%<%t36%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;6%;mPlugin - Factoids - Saved. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-04T15:03:02.223

显然是一个很晚的反应，但我也遇到了这个问题，并且在搜索它时，唯一出现的相关结果就是这个问题。

我最终自己弄明白了——原来`$TERM`环境变量设置不正确。就我而言，它设置为`xterm-256color`. Mono 显然不喜欢这样。

将其设置为`xterm`将解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-04T21:53:25.777

阅读源代码[TermInfoDriver.cs](https://github.com/mono/mono/blob/master/mcs/class/corlib/System/TermInfoDriver.cs)显示 Mono 首先尝试在 terminfo 数据库中查找 $TERM，如果失败则硬编码为接受“xterm”或“linux”。如果在 terminfo 数据库中未找到 $TERM，或者如果 Mono 被错误地配置为查找 terminfo 数据库，则会发生故障。要检查前者，请使用[“infocmp”](http://invisible-island.net/ncurses/man/infocmp.1m.html)显示终端条目。

“标准 linux 终端”将是 Linux 控制台，它与“xterm”或“vt220”（它们不同）都不能很好地使用。同样，使用 infocmp 查看，例如`infocmp linux xterm`，`infocmp linux vt220`

回到最初的问题：打印出来的奇怪文本来自 terminfo 数据库。为使用数据库而编写的应用程序*通常*使用 terminfo 函数来解释数据并准备将其输出到终端。Mono 有自己的 terminfo 字符串解释器（可能正常工作），我记得有一些评论说它也有自己的终端仿真器（显示）。这些程序对他们不希望处理的字符串做奇怪的事情并不罕见，包括打印错误消息。“真正的”硬件终端通常会简单地忽略意外输入。

# networking - Whois 查询除 43 以外的端口

> ID：12979145
> 
> 赞同：1
> 
> 时间：2012-10-19T17:10:56.257
> 
> 标签：networking, proxy, whois

如何使用 43 旁边的端口通过公司代理后面的代理服务器使用 whois。

问题：我想whois一个域/ ip

为什么我不能这样做：

1) 防火墙允许 21/tcp, 22/tcp, 23/tcp, 119/tcp, 389/tcp, 554/tcp, 636/tcp, 2401/tcp, 7070/tcp, ICMP traceroute, ping

1）和http。Http虽然通过公司代理，但我不知道它做了什么......

那我该怎么做呢？

我正在考虑通过 whois 代理（例如[http://www.ip-adress.com/proxy_list/190.225.246.147:80](http://www.ip-adress.com/proxy_list/190.225.246.147:80)）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:35:22.663

最简单的解决方案可能是使用第三方 HTTP whois 服务，例如[http://whois.domaintools.com/](http://whois.domaintools.com/)，然后从生成的网页中抓取结果。我相信 WhoisXmlAPI 也是基于 HTTP 的；[http://www.whoisxmlapi.com/whoisserver/WhoisService?domainName=example.com](http://www.whoisxmlapi.com/whoisserver/WhoisService?domainName=example.com)

# sql - SQL 语句的索引

> ID：12979150
> 
> 赞同：4
> 
> 时间：2012-10-19T17:11:12.137
> 
> 标签：sql, indexing

我必须通过使用索引来优化一些 sql 查询。我对选择、插入和删除有疑问。很明显，索引在选择查询的情况下很有用。但是插入和删除查询会发生什么？使用索引是否会对它们的性能产生负面影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:13:11.997

是的。

索引是查询性能与写入性能之间的折衷。您应该通过分析最常用的查询，仔细选择所需的索引以获得所需的读取性能；同时关注插入/更新成本。

虽然索引有助于查询时的性能，但必须维护索引，并且在更新或插入时会产生成本。

这也是为什么（除了大小限制），我们不只是索引表的每一列：更新性能会停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:13:02.970

是的。应谨慎而适当地使用索引来优化读取查询。添加的索引越多，插入和删除的性能就会受到影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:14:10.513

是的，因为对于每个插入、更新或删除，数据库引擎不仅必须对表本身执行修改，还必须修改操作影响的任何索引。

这种影响的程度当然取决于索引（它有多宽，是集群还是非集群，需要多少磁盘 IO 来执行索引更新等。

因此，应谨慎添加索引，并且除了一些明显的情况（主键/唯一约束等）外，仅当存在性能问题（或可以可靠地预测）时。

# jquery - JQuery 在 Firefox 和 .ready() 中修改子窗口

> ID：12979159
> 
> 赞同：1
> 
> 时间：2012-10-19T17:11:33.480
> 
> 标签：jquery

我知道这里有无数关于打开子窗口和访问/修改 DOM 的帖子，我想我已经阅读了所有内容，但仍然无法使其正常工作。这适用于 IE：

```
// Find element with id="main_title" in child window and set its content to "2"
function generateRecipe () {
  var windowSize = "width=1300,height=1100,scrollbars=yes,menubar=yes,toolbar=yes";
  var win = window.open("template_without_img.html", "displayWindow", windowSize);
  $(win.document).ready(function () {
    $(win.document).contents().find('#main_title').html('2');
  });
} 
```

但它在 Firefox 16 中不起作用。为什么？我尝试了许多不同的变体，包括将代码放在子窗口的底部以访问父窗口中的值。

我终于找到了在 Firefox 16 中有效的一件事：

```
var win;
function generateRecipe () {
  var windowSize = "width=1300,height=1100,scrollbars=yes,menubar=yes,toolbar=yes";
  win = window.open("template_without_img.html", "displayWindow", windowSize);
  setTimeout(continueExecution, 1000);
}

function continueExecution() {
  $(win.document).contents().find('#main_title').html('2');
} 
```

我当然可以做到这一点，但我仍在学习 JQuery，并希望以正确的方式开始做这些事情，而不是依赖 hack。

Firefox 错误控制台这样说：

错误：使用不支持的第二个参数调用 gBrowser.addProgressListener。请参阅错误 608628。

那么这是 Firefox 16 中的某种错误吗？它是否与安全有关（父 HTML 文件和子 HTML 文件都在我的机器上）？还是我只是做错了什么？

更多信息。找到了其他可以在 Firefox 中使用的东西，但不幸的是它在 IE 中不起作用。使用 $(win).load() 而不是 $(win.document).ready()：

```
function generateRecipe () {
  var windowSize = "width=1300,height=1100,scrollbars=yes,menubar=yes,toolbar=yes";
  win = window.open("template_without_img.html", "displayWindow", windowSize);
  $(win).load(function() {
    $(win.document).contents().find('#main_title').html('2');
  });
} 
```

这太令人困惑了。我希望我知道发生了什么事。ready() 在 Firefox 中根本无法正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:15:10.733

使用内部 HTML

```
$(win.document).contents().find('#main_title').innerHTML('2'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:27:47.207

尝试：

```
var win = window.open('', 'window', '', '');
var txt = document.getElementById("main_title").innerHTML;
win.document.open();
win.document.write(''+ txt + '');
win.document.close(); 
```

# java - 是否可以在 Eclipse 中突出显示一个语句，然后按引号/等...以“包装”字符中突出显示的文本（如在 SublimeText 中）？

> ID：12979165
> 
> 赞同：11
> 
> 时间：2012-10-19T17:11:57.190
> 
> 标签：java, eclipse

我是从 Sublime Text 到 Eclipse 的。我最喜欢的 ST 功能之一是突出显示一段文本，然后可以通过按相应的键将其括在引号或括号中。

这可能很难解释功能，所以这里有一个 gif 示例：

![在此处输入图像描述](../Images/7489f1d4691d68d6232623c03471e91b.png)

因此，如您所见，如果您突出显示一段文本，然后在此示例中按下`(`它将突出显示的文本包裹在括号中。

当我在 Eclipse 中尝试此操作时，突出显示文本，然后按下`(`只是替换我突出显示的内容，而不是将其包装起来。

有没有办法在 Eclipse 中获得这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-20T13:48:22.497

突出显示文本，剪切（ctrl x），输入引号，粘贴文本（ctrl v）。

这是一种蹩脚的解决方案，但它更快，因为 eclipse 创建了两个引号并将光标放在中间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T19:10:51.867

我不认为默认情况下此功能在 Eclipse 中，但您可以尝试自己添加它。

选择要包围的块，然后按 Alt+Shift+Z。这将打开“环绕...”菜单。它建议一些预定义模板，但也允许添加新模板。这是 Eclipse 提供的最接近的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-27T09:50:13.903

我还没有找到一种方法来获得这个，但如果你想用引号括住文本，这里是如何。去：

```
Source -> Surround With...  -> Configure Templates 
```

创建一个新模板，`brackets`用作名称，并将其用作模式：

```
(${word_selection})${cursor} 
```

然后，您可以通过按`CTRL` **+** `SPACE`获得所需的功能，然后选择您的模板。

# timeout - asihttprequest 总是超时

> ID：12979166
> 
> 赞同：3
> 
> 时间：2012-10-19T17:12:02.027
> 
> 标签：timeout, asihttprequest

我是 asihttprequest 的新手，我只是简单地使用 asihttprequest：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setShouldAttemptPersistentConnection:NO];
[request setDelegate:self];
[request startAsynchronous]; 
```

但在我的`- (void)requestFailed:(ASIHTTPRequest *)`请求中，我经常收到超时错误。当我在 Windows 操作系统上连接到相同的 URL 时，它工作正常。所以我认为这不是我的服务器问题，也许是 asihttprequest，有人可以帮助我吗？

# ruby-on-rails - How number of gems influences on Rails app performance?

> ID：12979171
> 
> 赞同：5
> 
> 时间：2012-10-19T17:12:30.467
> 
> 标签：ruby-on-rails, ruby, performance, rubygems

I'm new to Rails and this maybe a dumb question, but I wonder how number of gems influences on Rails app performance? Does it become slower the more gems you add? Are all gems get called on every request?

I'm asking this question because, for example, in Django, you import every needed class/method/library in every .py file which calls it. In Rails you're not doing this, everything is "autoloaded", but I wonder, what is the cost of such "autoloading"?

Does it mean all gems get's called on every request?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T17:34:55.543

Autoloading is just a method to replace "import every needed class/method/library" with "if you put files in a particular place, we can find them".

The basic algorithm is something like "if you use a class or module and it's not found, before we tell you we can't find it, search for it in one of these paths."

Autoloading is orthogonal to finding gems, but rather in finding your application's code. In other words, your gems are loaded and required from your Gemfile once, at app startup, but the autoload mechanism operates not on gems, but on your app's code.

So to answer the first part of your question: gem loading is not directly related to autoloading. Including new gems to your app might make app startup a bit slower as the library is found and parsed, but they're loaded for all time after startup; it won't affect your per-request performance.

It's good to know that RubyGems are a part of *Ruby*, and autoloading is a part of *Rails*: Rails is a framework written on top of Ruby, the same way Django is a framework written on top of Python, but Ruby and Rails are very distinct. Gems are a part of Ruby and autoloading is a part of Rails.

Autoloading is meant to make development faster; instead of having to restart your server every time you make a change, if you follow the directory layout convention, your files (and only the files in your app) *will* be reloaded on every request. This is good, because you can just leave your server running as you develop.

It's worth noting that this is true *in development mode only*. In production mode, it will find the file if it's missing only once and remember it across requests, in order to save you the overhead of filesystem searching on every request. In fact, if you're using Rails 3.2 or above, it's become smart enough even in development mode to only reload the file if it's changed since the last request, making things even faster during development.

You don't *have* to use autoloading, btw: you can manually `require` the files you need, just like you talked about with Python. This is the standard Ruby way of doing things. This will circumvent autoloading that file entirely, since your constants are never "not found": this is good in that it will increase performance of your app, but bad because you'll have to restart your app every time you change your code.

tl;dr: don't worry about autoloading performance. It will help you in development mode at the cost of app performance, and be performant in production mode at the cost of development speed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:25:34.253

The number of gems *WILL* influence the performance of your Rails app in the following ways:

*   When starting up your app/loading the environment all gems have to be loaded. This loading obviously takes longer if there are more gems. You'll especially notice this during development, since you'll be loading your environment (hopefully) a lot of times (e.g. everytime you run a unit test).
*   More (loaded) code also needs more space and therefore your app will consume more memory if you use more gems.

Both points are rather subtle and you will not notice a difference between loading 5 or 10 gems. But once you reach numbers like 20 or 50 gems, you will start to notice...

# git - Git将克隆项目的新分支变成不同的项目

> ID：12979172
> 
> 赞同：2
> 
> 时间：2012-10-19T17:12:39.190
> 
> 标签：git

嗨，我有一个我很满意的项目。所以我克隆了它，目的是把它分开并做出重大改变，这将导致一个新项目。我真的很想把它与原始回购分开。所以我在一个名为“branch-a”的新分支上做了一些工作。我设置了一个不同的远程仓库并推送了“branch-a”的提交。我现在想合并到主分支并推送。

我的问题是：我现在有两个主分支吗？一个用于原始项目，一个用于新项目？我可以在不影响我克隆的原始项目的情况下将“branch-a”合并到 master 中吗？

我敢肯定这一切都很简单——只需要得到一些建议。还有更好的工作流程来做我正在做的事情（分叉）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:21:43.353

> 我现在有两个`master`分支吗？一个用于原始项目，一个用于新项目？

是的。`master`每个回购一个分支。

> 我可以在不影响我克隆的原始项目的情况下合并 ' `branch-a`'吗？`master`

是的。而且您仍然可以将 ' `branch-a`' 从第一个 repo 推送到第二个 repo。

将一个分支合并到另一个分支对分支源没有任何作用（您要合并到另一个分支中的那个`master`）。
它在具有两个父级的 master 上添加了一个新提交（除非合并是快进的，在这种情况下，`master HEAD`只是简单地移动到`a-branch HEAD`，再次完全不接触`a-branch`）

# bash - bash脚本计算几个整数值的平均值

> ID：12979174
> 
> 赞同：3
> 
> 时间：2012-10-19T17:12:51.123
> 
> 标签：bash, shell

我需要编写一个 bash 脚本来添加当前值并返回平均值。当我运行脚本时，`./average`我收到错误消息：`missing}`. 我不确定为什么脚本在运行时没有将平均值打印到屏幕上。

这是我到目前为止所写的：

```
#! /bin/csh
for var in "${sum[store1=100, store2= 75, store3= 74, store4= 100, store5= 100])}"

do
total= $sum(store1+store2+ store3+store4+store5))

echo $sum / 5
done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:22:41.060

固定：（更新）

```
#/bin/bash

total=0
list=(100 75 74 100 100)
for var in "${list[@]}"
do
    total=$((total + var))
done

average=$((total/5))
echo $average 
```

# java - 如何识别网络爬网中的提要？

> ID：12979176
> 
> 赞同：0
> 
> 时间：2012-10-19T17:12:56.307
> 
> 标签：java, rss, feed, atom-feed

我已经运行了一次网络爬虫并收集了很多 html 和 xml 页面。我的目的是从中提取所有 Rss/Atom 提要。我注意到许多网站只是在标题上使用“text/xml”作为内容类型，所以我无法识别来自任何其他类型 xml 的提要。所以我写了这段代码：

```
public boolean isFeed(String content){
    Document doc = Jsoup.parse(content);
    Elements feed = doc.getElementsByTag("feed");
    Elements channel = doc.getElementsByTag("channel");
    if(feed!=null){
        if(!feed.isEmpty()){
             return true;
        }
    }
    if(channel!=null){
        if(!channel.isEmpty()){
             return true;
        }
    }
    return false;
} 
```

这里有什么遗漏吗？有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:27:30.497

使用成熟的 XML 解析器解析文档。如果它不编译，它就不是 Atom。然后获取文档（根）元素。如果不是`<feed xmlns="http://www.w3.org/2005/Atom">`，则不是 Atom。当然使用适当的 API 来读取标签名称和命名空间，不要比较字符串。

采取类似的方法来发现 RSS。或者使用[罗马](http://rometools.org/)库为您解析文档。

# textmate - 我可以在 Textmate 中为每个文件类型设置主题吗？

> ID：12979182
> 
> 赞同：1
> 
> 时间：2012-10-19T17:13:15.820
> 
> 标签：textmate

我可以在 Textmate 中为每个文件类型设置主题吗？..或者至少改变字体当我同时在编程和编写乳胶之间切换时，我的眼睛正在杀死我！对于编程，我倾向于使用带有清晰字母的小字体（摩纳哥，没有反别名）但是当我写乳胶时，我需要更大的字体。

# ruby-on-rails - 使用delayed_job部署后，所有内存都被占用

> ID：12979183
> 
> 赞同：0
> 
> 时间：2012-10-19T17:13:23.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, vps, linode

我有一个带有 ubuntu 10.04 64 位的 linode 512 mb ram，带有一个 rails app + mongodb + nginx + unicorn。

我使用[太阳黑子 solr gem](http://sunspot.github.com/)和[delay_job gem](https://github.com/collectiveidea/delayed_job)

当我进行延迟工作的新部署时：

```
after "deploy:restart",   "delayed_job:start" 
```

服务器运行非常非常慢而且非常非常糟糕。

如果我在终端写：

```
free -m 
```

我得到：

```
 total       used       free     shared    buffers     cached
Mem:           487        481          5          0          1         16
-/+ buffers/cache:        463         23
Swap:          255        226         29 
```

我`Errno::ENOMEM (Cannot allocate memory...`在 Rails 日志中遇到错误。

**我的问题是我是否需要升级我的 linode 或更改为专用服务器以使用 delay_job gem**

我一直在查看[http://www.hetzner.de/en/](http://www.hetzner.de/en/)的专用服务器。

**如果我需要升级我的linode，我需要多少内存才能正确运行delayed_job gem？**

在我的本地 ubuntu 机器上延迟工作，4GB 内存工作正常。

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:36:31.927

是的，您需要增加 RAM。Unicorn 和延迟作业将导致至少 2 个运行 Rails 进程，以及 3 个在部署期间运行。

您的 Rails 实例可能是每个 200 MB。我认为 512 MB 适合没有后台进程的 Rails 部署，但我建议使用 1024。

# ios - xcode - 关闭自动布局时没有圆角

> ID：12979184
> 
> 赞同：0
> 
> 时间：2012-10-19T17:13:32.267
> 
> 标签：ios, xcode

我在我的设备（iphone 4、iOS 5.1）上测试了一个应用程序，但它给了我一个错误。在 Stackoverflow 上我发现这是因为 xcode 4.5 中的自动布局已打开。问题是当我关闭它时，应用程序的圆角消失了。这是一种常见的行为吗？以及如何在没有自动布局的情况下设置圆角。

self.view.layer.cornerRadius = 10.0f; 结果是：

![在此处输入图像描述](../Images/902ca3740f94840189bc3965b6abf90f.png)

我正在寻找整个应用程序的那些略圆的角落：

![在此处输入图像描述](../Images/f4384deec49154ddbfec31ad8fda57d3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:22:29.670

你的问题有点令人困惑，但是这个怎么样？

```
#import <QuartzCore/QuartzCore.h>    

self.view.layer.cornerRadius = 10.0f; 
```

# install4j - 是否可以轻松更改 install4j 中显示许可协议屏幕的分页行为？

> ID：12979188
> 
> 赞同：1
> 
> 时间：2012-10-19T17:13:44.020
> 
> 标签：install4j

在控制台模式下，“显示许可协议屏幕”将许可文本分成页面，唯一的选择是在每个页面中按“Enter”。我如何自定义此行为并为已经看过 1000 次许可协议并只想接受它的人添加类似“(Q)uit”的内容。

我是否必须编写某种自定义屏幕代码？或者，还有更好的方法？如果不是，是否可以将其添加为功能请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:22:25.240

您可以执行以下操作：

*   在“显示许可证”屏幕之前添加“可配置表单”
*   将新画面的“条件表达式”设置为`context.isConsole()`
*   将“控制台处理程序”表单组件添加到新屏幕并将其脚本设置为：

    ```
    if (!console.askYesNo("Show license?")) {
        context.goForward(2, true, true);
    }
    return true; 
    ```

然后，只有当用户确认此问题时，才会显示显示许可证屏幕。

# android - 如何使 ActionBar 上的项目成为左侧一项、中心一项和右侧一项？

> ID：12979191
> 
> 赞同：14
> 
> 时间：2012-10-19T17:14:02.090
> 
> 标签：android, actionbarsherlock

我是`actionbarsherlock`用来做的。我在操作栏中想要的示例：
[LOGIN] [COMPANY LOGO] [FILTER]

我在操作栏中得到的示例：
      [LOGIN] [COMPANY LOGO] [FILTER]

我在 res/menu 的`activity_main.xml`. 但是，操作栏上的那些按钮无法完全向左移动，即使我已删除默认应用程序徽标并将其设置为`false`：

```
getSupportActionBar().setDisplayShowTitleEnabled(false);
getSupportActionBar().setDisplayShowHomeEnabled (false); 
```

这是我在菜单中的代码`activity_main.xml`：

```
<item android:id="@+id/login"
      android:icon="@drawable/login_btn"
      android:layout_gravity="left"
      android:showAsAction="always"/>

<item android:id="@+id/logo"
      android:icon="@drawable/logo_btn"
      android:layout_gravity="center"
      android:showAsAction="always"/>

<item android:id="@+id/filter"
      android:icon="@drawable/filter_btn"
      android:layout_gravity="right"
      android:showAsAction="always"/> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-19T17:27:05.567

您应该为此创建自定义视图。例如 ( `layout/ab_custom.xml`)：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_gravity="fill_horizontal" >

    <ImageButton
        android:id="@+id/btn1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:src="@drawable/left" />

    <ImageButton
        android:id="@+id/btn2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:src="@drawable/center" />

    <ImageButton
        android:id="@+id/btn3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:src="@drawable/right" />

</RelativeLayout> 
```

然后在您的活动中`onCreate`调用此方法：

```
private void showActionBar() {
        LayoutInflater inflator = (LayoutInflater) this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflator.inflate(R.layout.ab_custom, null);
    ActionBar actionBar = getSupportActionBar();
    actionBar.setDisplayHomeAsUpEnabled(false);
    actionBar.setDisplayShowHomeEnabled (false);
    actionBar.setDisplayShowCustomEnabled(true);
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setCustomView(v);
} 
```

要控制您的项目，请使用以下命令：

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.btn1:
            //left button, do something
            return true;
        case R.id.btn2:
            //center button
            return true;
        case R.id.btn3:
            // right button
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    } 
```

* * *

**编辑：**修改了我的答案。最好使用`RelativeLayout as parent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:26:32.323

将项目包装在 RelativeLayout 中。然后使用：

```
android:layout_alignParentLeft
android:layout_alignParentCenter
android:layout_alignParentRight 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-16T17:50:05.717

添加到 Sabre 的答案并解决 snadandpepper 的评论。为了将 onClickListeners 设置为按钮，您可以执行以下操作。

```
private void showActionBar() {
        getSupportActionBar().setCustomView(R.layout.my_toolbar);
        ActionBar actionBar = getSupportActionBar();
        actionBar.setDisplayHomeAsUpEnabled(false);
        actionBar.setDisplayShowHomeEnabled (false);
        actionBar.setDisplayUseLogoEnabled(false);
        actionBar.setDisplayShowCustomEnabled(true);
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.getCustomView().findViewById(R.id.btn1).setOnClickListener(v -> {
            Log.d(TAG, "showActionBar: btn1 clicked");
        });
}
''' 
```

# button - 如何将操作放入 Bootstrap 拆分按钮的主按钮区域？

> ID：12979196
> 
> 赞同：1
> 
> 时间：2012-10-19T17:14:12.593
> 
> 标签：button, twitter-bootstrap

我猜这是一个新手问题，但尽管如此：

我正在实现一个 Bootstrap 拆分按钮，从他们的例子开始：

```
<div class="btn-group">
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    Action
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">
    <!-- dropdown menu links -->
  </ul>
</div> 
```

在我的代码中，下拉链接工作正常；我的问题是如何为按钮的主要部分分配一个动作——由“动作”文本组成的部分。我目前正在用`<a>`我在“下拉菜单链接”部分中使用的相同类型的标签替换“操作”；除了可以由某些 css 轻松处理的某些颜色和文本装饰样式外，这很好用。我只是想确保这是正确的方法，因为它没有在 Bootstrap 文档站点中明确涵盖（至少我已经找到）。

无论如何：这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:58:39.843

我会做这样的事情（无论如何，我认为这就是你所描述的）：

```
<div class="btn-group">
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    <a href="someaction">Action</a>
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">
    <!-- dropdown menu links -->
  </ul>
</div> 
```

如果没有 JavaScript，它不会比这更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T16:10:51.920

寻找同样的问题，我找到了你（和我）需要的东西。正如此[解决方案](https://stackoverflow.com/a/15243570/882769)所述，您可以使用链接并将其设置为按钮，而不是按钮。它将按照您想要的方式工作，链接将是完整的按钮，而不仅仅是链接的文本。

```
<div class="btn-group">
  <a href="#" class="btn">Action</a>

  <button class="btn dropdown-toggle" data-toggle="dropdown">
    <span class="caret"></span>
  </button>

  <ul class="dropdown-menu">
    <li>Test</li>
    <li>Test 2</li>
  </ul>
</div> 
```

# http - Mule 在 http 端点上创建 wsdl

> ID：12979198
> 
> 赞同：1
> 
> 时间：2012-10-19T17:14:27.533
> 
> 标签：http, wsdl, esb, mule

我想知道 Mule 是否会在 http 端点上创建一个 wsdl，以便我可以通过soapUI 访问它。我用肥皂信封传入 xml，如下所示。我没有创建 wsdl，但之后我有一个流程来读取和使用传入的这个 xml。我知道使用其他 ESB 工具可以说这个端点需要公开一个 wsdl，它会为你在构建。骡子会这样做吗？

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Header/>
<soapenv:Body>
    <lookup>
        <bookid>0028634748</bookid>
    </lookup>
</soapenv:Body> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:52:28.747

Mule 可以即时生成 WSDL，但它需要**一些东西**来推断 WSDL。它可以从纯 POJO 组件中完成，而无需 JAX-WS 注释，并且配置如下：

```
<flow name="bookLookupService">
    <http:inbound-endpoint address="http://localhost:8181/bls"
        exchange-pattern="request-response">
        <cxf:simple-service serviceClass="com.acme.BookLookupService" />
    </http:inbound-endpoint>
    <component class="com.acme.BookLookupServiceImpl" />
</flow> 
```

使用以下界面：

```
package com.acme;

public interface BookLookupService
{
    public static class BookLookup
    {
        private String bookid;

        public String getBookid()
        {
            return bookid;
        }

        public void setBookid(final String bookid)
        {
            this.bookid = bookid;
        }
    }

    public static class Book
    {
        private String bookid, name;

        public String getBookid()
        {
            return bookid;
        }

        public void setBookid(final String bookid)
        {
            this.bookid = bookid;
        }

        public String getName()
        {
            return name;
        }

        public void setName(final String name)
        {
            this.name = name;
        }
    }

    Book lookup(final BookLookup bookLookup);
} 
```

和实施：

```
package com.acme;

public class BookLookupServiceImpl implements BookLookupService
{
    public Book lookup(final BookLookup bookLookup)
    {
        final Book book = new Book();
        book.setName("LOTR");
        book.setBookid(bookLookup.getBookid());
        return book;
    }
} 
```

问题是 WSDL 将不符合上面的预期消息，您最终会得到如下消息：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:acme="http://acme.com/" xmlns:acme1="http://acme.com">
   <soapenv:Header/>
   <soapenv:Body>
      <acme:lookup>
         <acme:arg0>
            <acme1:bookid>ABC123</acme1:bookid>
         </acme:arg0>
      </acme:lookup>
   </soapenv:Body>
</soapenv:Envelope> 
```

如果您想对生成的 WSDL 进行更严格的控制，则必须使用 JAX-WS / JAXB 注释。

# python - 代码需要为更多可能性工作

> ID：12979199
> 
> 赞同：-2
> 
> 时间：2012-10-19T17:14:31.257
> 
> 标签：python

**问题**

```
is_match:
(str, str) -> bool 
```

第一个参数是拼图，第二个参数是视图。如果视图可能是给定拼图的视图，则返回 True。

**我的答案**

我想出了这个：

```
def is_match(puzzle, view):
    if len(puzzle) != len(view):
        return False
    if len(puzzle) == len(view):
        return True 
```

我也在网上找到了这个：

```
def is_match(given_puzzle, view):
    if len(given_puzzle) != len(view):
        return False
    unique_letters = set(ch for ch in view if ch != '^')
    for (a, b) in zip(given_puzzle, view):
        if a in unique_letters and a != b:
            return False
    return True 
```

我遇到的这个问题是，如果我输入：

```
is_match('blah', 'tr^^') 
```

对于两个给定的代码，它将返回 True。这一定是错误的，因为字符甚至不匹配字符串的长度，我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:24:57.517

根据之前关于这个“益智”游戏的一系列问题，我推断你想要这样的东西：

```
def is_match(puzzle,view):
    return all(p == v for p,v in zip(puzzle,view) if v != '^' ) 
```

*请注意，这是假设`puzzle`和`view`具有相同的长度。

这样做是同时迭代拼图和视图，从每个 as`p`和`v`（的魔力`zip`）中产生下一个字符。我检查以确保`v`不是`'^'`（占位符字符）。如果它不是占位符，我检查它是否等于`p`（来自 的字符`puzzle`）。如果在任何时候后一种检查失败，则函数返回`False`。否则，它返回`True`.

# css - CSS不透明度对父母而不是对孩子

> ID：12979202
> 
> 赞同：2
> 
> 时间：2012-10-19T17:14:40.577
> 
> 标签：css

> **可能重复：**
> [如何不为子元素应用不透明度？](https://stackoverflow.com/questions/4182304/how-to-not-apply-opacity-for-child-element)

设置不透明度的最佳做法是：0.5；到父元素，如：

```
<div>
<span></span>

<span></span>

<span></span>
</div> 
```

如果我为元素设置不透明度，这将为子元素设置相同的规则，有什么技巧可以避免子元素继承吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:19:05.870

您可以使用 css3 background-color:rgba(122,122,0,0.5); 最后一个值是不透明度，它不会强制子元素获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:21:36.317

使用 RGBA，

```
 background-color: rgba(0,0,255,0.5); 
```

# javascript - Angular.js ng-repeat 跨越多个 tr

> ID：12979205
> 
> 赞同：125
> 
> 时间：2012-10-19T17:14:47.900
> 
> 标签：javascript, html, angularjs

我正在将 Angular.js 用于一个应用程序，该应用程序使用隐藏的 trs 通过显示 tr 并在下面的 td 中向下滑动 div 来模拟滑出效果。当迭代这些行的数组时，这个过程使用 knockout.js 非常有效，因为我可以`<!-- ko:foreach -->`在两个 tr 元素周围使用。

使用角度，`ng-repeat`必须应用于 html 元素，这意味着我似乎无法使用标准方法重复这些双行。我对此的第一反应是创建一个指令来表示这些双 trs，但由于指令模板必须有一个根元素，但我有两个 ( `<tr></tr><tr></tr>`)，所以它不够。

如果有破解此问题的 ng-repeat 和 Angular 经验的人可以解释如何解决此问题，我将不胜感激。

（我还应该注意，附加`ng-repeat`到 tbody 是一个选项，但这会产生多个 tbody，我假设这是标准 HTML 的错误形式，但如果我错了，请纠正我）

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-10-19T20:19:23.130

使用`ng-repeat`on`tbody`似乎是有效的，请参阅[这篇文章](https://stackoverflow.com/questions/3076708/can-we-have-multiple-tbody-in-same-table)。

此外，通过[html 验证器](http://validator.w3.org/)`tbody`进行的快速测试允许在同一个表中包含多个元素。

**更新：**至少从 Angular 1.2 开始，有一个`ng-repeat-start`and`ng-repeat-end`允许重复一系列元素。请参阅[文档](http://docs.angularjs.org/api/ng.directive:ngRepeat)以获取更多信息，并感谢@Onite 的评论！

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-06-11T13:32:34.837

AngularJS 开发者@igor-minar 在[Angular.js ng-repeat across multiple elements](https://stackoverflow.com/questions/16900050/angular-js-ng-repeat-across-multiple-elements)中回答了这个问题。

`ng-repeat-start`Miško Hevery 最近通过和实现了适当的支持`ng-repeat-end`。从 1.0.7（稳定）和 1.1.5（不稳定）开始，此增强功能尚未发布。

### 更新

这现在在 1.2.0rc1 中可用。查看[官方文档](http://docs.angularjs.org/api/ng.directive:ngRepeat)和John Lindquist 的[截屏视频。](http://youtu.be/WX03ODuzkSY)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-08T15:15:01.383

拥有多个元素可能是有效的，但如果您尝试构建具有固定页眉/页脚的可滚动网格，则以下操作将无法正常工作。此代码假定以下 CSS、jquery 和 AngularJS。

HTML

```
<table id="tablegrid_ko">
        <thead>
            <tr>
                <th>
                   Product Title
                </th>
                <th>
                </th>
            </tr>
        </thead>

        <tbody ng-repeat="item in itemList">
            <tr ng-repeat="itemUnit in item.itemUnit">
                <td>{{itemUnit.Name}}</td>
            </tr>
        </tbody>
</table> 
```

CSS 为可滚动表格网格构建固定页眉/页脚

```
#tablegrid_ko {
    max-height: 450px;    
}
#tablegrid_ko
{
border-width: 0 0 1px 1px;
border-spacing: 0;
border-collapse: collapse;
border-style: solid;
}

#tablegrid_ko td, #tablegrid_ko th
{
margin: 0;
padding: 4px;
border-width: 1px 1px 0 0;
border-style: solid;
}

#tablegrid_ko{border-collapse:separate}
#tablegrid_ko tfoot,#tablegrid_ko thead{z-index:1}
#tablegrid_ko tbody{z-index:0}
#tablegrid_ko tr{height:20px}
#tablegrid_ko tr >td,#tablegrid_ko tr >th{
border-width:1px;border-style:outset;height:20px;
max-height:20px;xwidth:45px;xmin-width:45px;xmax-width:45px;white-space:nowrap;overflow:hidden;padding:3px}

#tablegrid_ko tr >th{
background-color:#999;border-color:#2c85b1 #18475f #18475f #2c85b1;color:#fff;font-weight:bold}
#tablegrid_ko tr >td{background-color:#fff}
#tablegrid_ko tr:nth-child(odd)>td{background-color:#f3f3f3;border-color:#fff #e6e6e6 #e6e6e6 #fff}
#tablegrid_ko tr:nth-child(even)>td{background-color:#ddd;border-color:#eaeaea #d0d0d0 #d0d0d0 #eaeaea}

div.scrollable-table-wrapper{
background:#268;border:1px solid #268;
display:inline-block;height:285px;min-height:285px;
max-height:285px;width:550px;position:relative;overflow:hidden;padding:26px 0}

div.scrollable-table-wrapper table{position:static}
div.scrollable-table-wrapper tfoot,div.scrollable-table-wrapper thead{position:absolute}
div.scrollable-table-wrapper thead{left:0;top:0}
div.scrollable-table-wrapper tfoot{left:0;bottom:0}
div.scrollable-table-wrapper tbody{display:block;position:relative;overflow-y:scroll;height:283px;width:550px} 
```

Jquery 绑定 tbody 的水平滚动，这不起作用，因为 tbody 在 ng-repeat 期间重复。

```
$(function ($) {

$.fn.tablegrid = function () {

        var $table = $(this);
        var $thead = $table.find('thead');
        var $tbody = $table.find('tbody');
        var $tfoot = $table.find('tfoot');

        $table.wrap("<div class='scrollable-table-wrapper'></div>");

        $tbody.bind('scroll', function (ev) {
            var $css = { 'left': -ev.target.scrollLeft };
            $thead.css($css);
            //$tfoot.css($css);
        });

    }; // plugin function

}(jQuery)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T08:18:23.683

正如我在此答案中所示，您可以这样做：[https ://stackoverflow.com/a/26420732/769900](https://stackoverflow.com/a/26420732/769900)

```
<tr ng-repeat="m in myData">
   <td>{{m.Name}}</td>
   <td>{{m.LastName}}</td>

   <td ng-if="$first" rowspan="{{myData.length}}">
       <ul>
           <li ng-repeat="d in days">
               {{d.hours}}
           </li>
       </ul>
   </td> 
</tr> 
```

# mysql - mysql_fetch_assoc 的 sql 服务器版本

> ID：12979206
> 
> 赞同：0
> 
> 时间：2012-10-19T17:14:55.570
> 
> 标签：mysql, sql, sql-server

我有一个与数据库交互的简短 PHP 脚本。该脚本目前是为 MySQL 编写的，但需要转换为 SQL Server。我没有使用 SQL Server 的经验，并且认为我已经正确完成了大部分操作，但是在脚本的一行中是：

`@mysql_fetch_assoc($result)`

与此等效的 SQL Server 是什么？

我是否需要编辑查询行？

```
$query = 'SELECT * FROM location WHERE dType="' . $ajax_var . '" AND oType="' . $ajax_var2 . '"'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:18:07.350

`mysql_fetch_assoc`返回一个列名的关联数组，它们逐行映射到它们各自的值。对于 SQL Server，您需要[sqlsrv_fetch_array](http://www.php.net/manual/en/function.sqlsrv-fetch-array.php)

不要害怕阅读文档。;)

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:18:13.477

[mssql_fetch_assoc()](http://us2.php.net/manual/en/function.mssql-fetch-assoc.php)是等效的。虽然不是推荐的方法。PDO 将是正确的方法。并且该函数是否`mssql_fetch_assoc()`存在于您的服务器上当然取决于您安装了哪些 PHP 扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:18:56.753

只改变Y，函数是mssql_fetch_assoc

[http://php.net/manual/es/function.mssql-fetch-assoc.php](http://php.net/manual/es/function.mssql-fetch-assoc.php)

# .net - 来自字符串的 MD5 哈希

> ID：12979212
> 
> 赞同：26
> 
> 时间：2012-10-19T17:15:26.893
> 
> 标签：.net, md5

需要从字符串中获取 MD5 哈希。
得到一个错误 MD5 为空。
我想从字符串中获取 32 个字符的 MD5 哈希。

```
using (System.Security.Cryptography.MD5 md5 = 
       System.Security.Cryptography.MD5.Create("TextToHash"))
{
    byte[] retVal = md5.Hash;
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < retVal.Length; i++)
    {
        sb.Append(retVal[i].ToString("x2"));
    }
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-19T17:17:32.387

> 需要从字符串中获取 MD5 哈希。

然后首先你需要以某种形式将你的字符串转换为二进制数据。你如何做到这一点取决于你的要求，但它可能是`Encoding.GetBytes`一些编码......你需要弄清楚*哪种*编码。例如，这个散列是否需要与在其他地方创建的散列相匹配？

> 得到一个错误 MD5 为空。

那是因为你使用[`MD5.Create`](http://msdn.microsoft.com/en-us/library/0412464z.aspx)不当。参数是*算法名称*。您几乎可以肯定只使用无[参数重载](http://msdn.microsoft.com/en-us/library/x53bfh67.aspx)。

我怀疑你想要类似的东西：

```
byte[] hash;
using (MD5 md5 = MD5.Create())
{
    hash = md5.ComputeHash(Encoding.UTF8.GetBytes(text));
}
// Now convert the binary hash into text if you must... 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-19T17:18:16.223

传递给的字符串[`Create`](http://msdn.microsoft.com/en-us/library/0412464z.aspx)不是“要散列的文本”，而是要使用的算法。我怀疑你想要：

```
using (System.Security.Cryptography.MD5 md5 = 
   System.Security.Cryptography.MD5.Create())
{
    byte[] retVal = md5.ComputeHash(Encoding.Unicode.GetBytes("TextToHash"));
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < retVal.Length; i++)
    {
        sb.Append(retVal[i].ToString("x2"));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:19:19.287

您获得`null`返回的原因是`string`该方法的参数指定`Create`了算法，而不是被散列的文本。没有 TextToHash 算法，因此您会得到`null`回报。

# magento - Magento base_url 不起作用

> ID：12979215
> 
> 赞同：1
> 
> 时间：2012-10-19T17:15:29.913
> 
> 标签：magento

我将生产的 Magento 应用程序复制到我的开发机器上。我更改了 core_config_data 表（2 行）中的 base_url。我删除了 magento 安装目录中的 /var/cache/* 。

但是当我访问 www.my_dev.com/shop 时，它会将我重定向到 www.my_production.com/shop。

这是 core_config_data （我将 URL 修改为假的）：

```
mysql> select * from core_config_data;
+-----------+---------+----------+-------------------------------+------------------------------------------------------+
| config_id | scope   | scope_id | path                          | value                                                |
+-----------+---------+----------+-------------------------------+------------------------------------------------------+
|         1 | default |        0 | general/region/display_all    | 1                                                    |
|         2 | default |        0 | general/region/state_required | AT,CA,CH,DE,EE,ES,FI,FR,LT,LV,RO,US                  |
|         3 | default |        0 | catalog/category/root_id      | 2                                                    |
|         4 | default |        0 | admin/dashboard/enable_charts | 1                                                    |
|         5 | default |        0 | web/unsecure/base_url         | http://www.my_dev.com/shop/ |
|         6 | default |        0 | web/secure/base_url           | http://www.my_dev.com/shop/ |
|         7 | default |        0 | general/locale/code           | en_US                                                |
|         8 | default |        0 | general/locale/timezone       | America/Los_Angeles                                  |
|         9 | default |        0 | currency/options/base         | USD                                                  |
|        10 | default |        0 | currency/options/default      | USD                                                  |
|        11 | default |        0 | currency/options/allow        | USD                                                  |
+-----------+---------+----------+-------------------------------+------------------------------------------------------+
11 rows in set (0.00 sec) 
```

我错过了什么？

谢谢。

三孔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:35:08.653

如果您像往常一样复制数据库，您应该将 app/etc/local.xml 中的数据库更改为开发数据库，​​其中安全和不安全的域是 www.my_dev.com/shop 这是我的常见错误匆忙做，再见恩里科

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:45:53.163

1.  转到数据库，检查 core_config_data 表。确保`web/unsecure/base_url`and`web/secure/base_url`设置为`http://www.my_dev.com/shop`and `https://www.my_dev.com/shop`（您也可以使用 http 而不是 https 用于后者）
2.  检查cookie域是否设置为正确的域或留空
3.  检查 .htaccess 是否有一些自定义重写（基本上您必须在那里搜索`www.my_production.com/shop`字符串并将其替换为您的生产 URL）。

让我知道这是否有帮助。如果没有，我们将寻找另一种解决方案。

# java - 删除重复项的数组问题

> ID：12979217
> 
> 赞同：0
> 
> 时间：2012-10-19T17:15:37.520
> 
> 标签：java

这是课堂作业。她让我们分两部分使用数组和数组列表。基本上，她向我们展示了如何使用 arraylist 比使用数组更容易。

我在让数组部分工作时遇到了很多麻烦。

> 1.  使用 main 方法创建一个名为 CustomerLister1 的类，该类实例化一个名为 customerName 的 String 对象数组。该数组应该有空间容纳六个 String 对象。使用初始化列表将以下名称放入数组中：
>     
>     
>     
>     ```
>     Chris  
>     Lois  
>     Meg  
>     Peter  
>     Stewie 
>     ```
>     
>     
> 2.  编写一个增强的 for 循环来显示名称数组。最后一个数组元素显示什么？为什么会有这个值？
>     
>     
> 3.  将字符串“Meg”和“Brian”分别添加到索引 3 和 4 中，以便数组包含以下元素：
>     
>     
>     
>     ```
>     Chris  
>     Lois  
>     Meg  
>     Meg  
>     Brian  
>     Peter  
>     Stewie 
>     ```
>     
>     
> 4.  编写一个增强的 for 循环来显示名称数组。
>     
>     
> 5.  编写第二个传统的 for 循环，检查字符串“Meg”的每个元素，如果在数组中找到，删除它，移动剩余元素，并显示名称数组。是否从阵列中正确删除了两个“Meg”实例？

这是我的代码

```
public class CustomerLister1
{

public static void main(String[] args)
{
    String[] customerName = new String[7];
    customerName[0] = "Chris";
    customerName[1] = "Lois";
    customerName[2] = "Meg";
    customerName[3] = "Peter";
    customerName[4] = "Stewie";

    for (int i = customerName.length-1;i > 3; i--)
    {
        customerName[i] = customerName[i - 2];
    }
    customerName[3] = "Meg";
    customerName[4] = "Brian";

    for (int m = 0; m <= customerName.length-1; m++)
    {
        if(customerName[m].equals("Meg"))
        {
            for(int j = m+1;j < customerName.length-1;j++)
            {
                customerName[j]= customerName[j-1];

            }

        }

    }

    for (String element : customerName)
    {

        System.out.println(element);
    }

}
} 
```

我试过弄乱元素位置。它不会打印正确，因为我有 meg 背靠背，它用第二个 meg 替换了第一个 meg。我可以在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:19:45.807

像这样更改您的 if 语句：

```
if(customerName[m].equals("Meg"))
{
    for(int j = m;j < customerName.length;j++)
    {
        if(j < customerName.length-2) {
            customerName[j]= customerName[j+1];
        } else {
            customerName[j]="";
        }
    }
m--;
} 
```

通过将 i 减 1，您将再次达到相同的索引。

AmitD 也是正确的；您需要 customerName[j+1]，而不是 [j-1]。

哦，你需要正确处理数组的末尾；不想在没有 customerName[7] 的情况下尝试设置 customerName[6] = customerName[7]。

编辑：啊，你需要从 m 开始 j，而不是 m+1。这样您就可以删除 customerName[m] 处的“Meg”，并将其前面的所有内容向后移动。

编辑：循环的 while 部分跳过了数组中的最后一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:26:57.560

如果您只删除其中一个`Meg`，可能是因为您跳过了第二个。

在删除后移动元素后，根据您的代码接下来检查什么元素？这是你需要检查的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:30:12.097

你不仅要向左移动一个元素，还要在最后一个索引处放置一个 nil 值。所以，我会提出类似的建议

```
for(int j = m+1;j < customerName.length-1;j++)
{
    customerName[j]= customerName[j+1];
}
customerName[customerName.length-1] = ""; 
```

# php - PHP文件中的Symfony2数据库配置

> ID：12979221
> 
> 赞同：5
> 
> 时间：2012-10-19T17:16:26.747
> 
> 标签：php, database, symfony, config

我一直在寻找一种方法来做到这一点，但无法弄清楚。

是否可以将 Symfony2 的数据库配置存储在 PHP 文件中？

我想这样做的原因主要是因为我通常将整个“应用程序”放在公共目录中，但也因为我尝试构建我的应用程序的方式。

那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:30:15.160

默认情况下，您的应用程序配置在 Yaml 中，但您可以配置 Symfony 的任何部分以使用您想要的任何配置类型。

要将您的应用程序配置为使用 PHP，您需要更改加载配置的代码`app/AppKernel.php`：

```
public function registerContainerConfiguration(LoaderInterface $loader)
{
    $loader->load(__DIR__.'/config/config_'.$this->getEnvironment().'.yml');
} 
```

您需要将其更改为`.php`并用 PHP 编写配置文件。

以下是`config.php`文件的外观：

```
$this->import('parameters.ini');
$this->import('security.yml');

$container->loadFromExtension('framework', array(
    'secret'          => '%secret%',
    'charset'         => 'UTF-8',
    'router'          => array('resource' => '%kernel.root_dir%/config/routing.php'),
    'form'            => array(),
    'csrf-protection' => array(),
    'validation'      => array('annotations' => true),
    'templating'      => array(
        'engines' => array('twig'),
        #'assets_version' => "SomeVersionScheme",
    ),
    'session' => array(
        'default_locale' => "%locale%",
        'auto_start'     => true,
    ),
));

// Twig Configuration
$container->loadFromExtension('twig', array(
    'debug'            => '%kernel.debug%',
    'strict_variables' => '%kernel.debug%',
)); 
```

你可以在这里阅读更多关于它的信息：http: [//symfony.com/doc/current/book/page_creation.html#application-configuration](http://symfony.com/doc/current/book/page_creation.html#application-configuration)

# java - 用 Java 处理数百万条数据库记录

> ID：12979229
> 
> 赞同：2
> 
> 时间：2012-10-19T17:17:11.470
> 
> 标签：java, spring, jdbc, batch-processing, spring-batch

我需要编写一个批处理作业，该作业从数据库表中获取行并根据特定条件写入其他表或使用特定值更新该行。我们使用 spring 和 jdbc 来获取结果集，并使用计划每周运行的独立 java 程序遍历和处理记录。我知道这不是正确的做法，但我们不得不将其作为临时解决方案。随着记录增长到数百万，我们最终会出现内存不足的异常，所以我知道这不是最好的方法。

你们中的任何人都可以推荐处理这种情况的最佳方法吗？

使用线程并为每个线程获取 1000 条记录并并行处理它们？

（或者）

使用任何其他批处理机制来执行此操作（我知道有 spring-batch 但从未使用过）

（或者）

还有其他想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T17:20:04.117

你已经知道你不能将一百万行带入内存并对其进行操作。

你必须以某种方式将它们分块。

为什么要把他们带到中间层？我会考虑编写存储过程并对数据库服务器上的数据进行操作。把它带到中间层似乎并没有给你带来任何东西。让您的批处理作业启动存储过程并在数据库服务器中就地进行计算。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T17:21:49.343

> 从数据库表中获取行并根据特定条件写入其他表或使用特定值更新该行的批处理作业。

这听起来像是你应该在数据库中做的事情。例如，要获取特定行并根据某些条件对其进行更新，SQL 具有[`UPDATE ... WHERE ...`语句](https://en.wikipedia.org/wiki/Update_%28SQL%29)。要写入另一个表，您可以使用[`INSERT ... SELECT ...`](https://en.wikipedia.org/wiki/Insert_%28SQL%29#Copying_rows_from_other_tables).

这些可能会变得相当复杂，但我建议尽你所能在数据库中执行此操作，因为将数据拉出以过滤它非常慢，并且违背了拥有关系数据库的目的。

注意：确保首先在非生产系统上对此进行试验，并实施您需要的任何限制，这样您就不会在糟糕的时候锁定生产表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:20:14.057

这实际上取决于您处理记录的内容和方式。

但一般来说，您不应该一次将它们全部加载到内存中，而是使用合理大小的块进行处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T18:42:07.267

总体上同意 Brendan Long 的观点。但是，我可能仍会尝试在存储过程中选择“数百万”数据集的子集。否则，您将炸毁数据库的事务日志。只要确保您仍然定期提交插入或更新。

如果您不想在存储过程中执行此操作，只需让弹簧批量加载您希望以某个固定块大小操作的记录的键（使用游标/分页阅读器），但让存储过程执行实际工作。通过这种方式，您可以最大限度地减少传递到中间层的数据，同时仍然获得弹簧批处理的好处和您的数据库在处理数据方面的性能。

# javascript - 替代 CSS only onclick 功能

> ID：12979239
> 
> 赞同：0
> 
> 时间：2012-10-19T17:17:48.393
> 
> 标签：javascript, css

替代 CSS only onclick functioni.html

当您单击任何选项卡时，它会直接将您带到选项卡菜单的开头。我不能使用 javascript 或 jquery，所以不能使用 onclick="false"。有没有一种 CSS 方法可以防止这种情况发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:44:58.300

您遇到的问题源于您使用 CSS`:target`选择器（需要`#item-1`在 URL 中使用）。设置`href="#item-1"`允许`:target`选择器以输入 URL 为代价来运行`#item-1`，这就是导致页面跳转的原因。`href`这是一个恶毒的 catch-22，使用属性无法绕过它。

我知道如何仅使用 CSS 复制选项卡功能的唯一方法是使用[“复选框黑客”](http://jsfiddle.net/ezhDQ/1/)的变体（用单选按钮代替复选框）。

本质上，使用`<label>Tab</label><input type="radio" />`您当前使用的元素集，`<a href="">Tab</a>`然后设置 CSS 样式规则以根据`checked`单选按钮的属性控制选项卡内容 div 的可见性。

特定于您的代码：

```
input[type=radio] {
   position: absolute;
   top: -9999px;
   left: -9999px;
   /* For mobile, it's typically better to position radio on top of clickable
      area and turn opacity to 0 instead. */
}

/* Default State */
.noint11_menu > li > div {
   display: none;
}

/* Toggled State */
input[type=radio]:checked ~ div {
   display: block;
} 
```

当您的标记为：

```
<li id="item-1">
    <label for="toggle-Shipping">Shipping</label>
    <input type="radio" id="toggle-Shipping" name="toggleTabs" checked="checked">
    <div>
        <p>Tab Content: Shipping</p>
    </div>
</li>
<li id="item-2">
    <label for="toggle-Payment">Payment</label>
    <input type="radio" id="toggle-Payment" name="toggleTabs">
    <div>
        <p>Tab Content: Payment</p>
    </div>
</li>
<li id="item-3">
    <label for="toggle-Returns">Returns</label>
    <input type="radio" id="toggle-Returns" name="toggleTabs">
    <div id="notice">
        <p>Tab Content: Returns</p>
    </div>
</li>
<li id="item-4">
    <label for="toggle-Tab4">Tab4</label>
    <input type="radio" id="toggle-Tab4" name="toggleTabs">
    <div>
        <p>Tab Content: Tab4</p>
    </div>
</li> 
```

这是一个演示它的小提琴：http: [//jsfiddle.net/ezhDQ/](http://jsfiddle.net/ezhDQ/)

请注意在小提琴中，我设置`<div class="footer">`为所有选项卡的页脚，而不是每个选项卡。这是因为您的标记使用`id`Facebook、Twitter、Skype、web 和收藏图像的属性。属性的目的`id`是识别页面上的一个特定元素（意味着`id`每个元素的属性必须是唯一的）。

如果您希望每个选项卡都有自己的页脚，请更改您的标记以改用该`name`属性。

此外，下面是您的页面，其中包含完全有效的 XHTML 过渡标记（从长远来看，这将有助于跨浏览器的一致性）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width;" />
    <link rel="stylesheet" type="text/css" href="http://www.ubreakirepair.com/parts.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="http://www.ubreakirepair.com/ebaysite/handheld.css" media="handheld" />
    <link rel="stylesheet" type="text/css" href="http://www.ubreakirepair.com/ebaysite/font.css" />
    <style type="text/css">
    .noint11_menu > li {
        list-style-type: none;
    }
    input[type=radio] {
       position: absolute;
       top: -9999px;
       left: -9999px;
       /* For mobile, it's typically better to position radio on top of clickable
          area and turn opacity to 0 instead. */
    }

    /* Default State */
    .noint11_menu > li > div {
       display: none;
    }

    /* Toggled State */
    input[type=radio]:checked ~ div {
       display: block;
    }
    </style>
</head>
<body>
    <div id="full">
        <div id="header100">
            <img id="header" alt="Our Logo" src="http://www.ubreakirepair.com/ebaysite/images/ubreakirepairheader.png" />
        </div>
        <div id="noint_box1">
            <table border="0" width="958">
                <tbody>
                    <tr>
                        <td width="948" height="27" valign="top" class="content4">
                            <div id="tab2" class="css-tabs">
                                <ul class="noint11_menu">
                                    <li id="item-1">
                                        <label for="toggle-Shipping">Shipping</label>
                                        <input type="radio" id="toggle-Shipping" name="toggleTabs" checked="checked" />
                                        <div>
                                            <p><img id="shippingtable" alt="Shipping Table" src="http://www.ubreakirepair.com/ebaysite/images/shippingtable.png" width="684px" height="242px" /></p>
                                            <div class="footer">
                                                <img alt="next section" src="http://www.ubreakirepair.com/ebaysite/images/line.png" width="976" height="9" />
                                                <p>
                                                    <a class="header3" href="http://contact.ebay.co.uk/ws/eBayISAPI.dll?ContactUserNextGen&amp;recipient=irepair">Please click here if you wish to contact us about this product</a>
                                                </p>
                                                <p class="header3">or</p>
                                                <p class="header3">use one of the links below</p>
                                                    <a href="http://www.facebook.com/ubreakirepair">
                                                        <img name="facebook" alt="Visit us on Facebook" src="http://www.ubreakirepair.com/ebaysite/images/facebook.png" />
                                                    </a>
                                                <a href="https://twitter.com/ubreak_irepair">
                                                    <img name="twitter" alt="Visit us at Twitter" src="http://www.ubreakirepair.com/ebaysite/images/Twitter.png" />
                                                </a>
                                                <a href="skype:ubreakirepair?chat">
                                                    <img name="skype" alt="Open Skype" src="http://www.ubreakirepair.com/ebaysite/images/skype.png" />
                                                </a>
                                                <a href="http://www.ubreakirepair.com/contactus.php">
                                                    <img name="web" alt="Contact Us" src="http://www.ubreakirepair.com/ebaysite/images/website.png" style="text-align:center" />
                                                </a>
                                                <p>
                                                    <a href="http://my.ebay.co.uk/ws/eBayISAPI.dll?AcceptSavedSeller&amp;mode=0&amp;preference=0&amp;sellerid=irepair">
                                                        <img name="fav" alt="Favorite Us at Ebay" src="http://www.ubreakirepair.com/ebaysite/images/fav.png" />
                                                    </a>
                                                </p>
                                            </div>
                                        </div>
                                    </li>
                                    <li id="item-2">
                                        <label for="toggle-Payment">Payment</label>
                                        <input type="radio" id="toggle-Payment" name="toggleTabs" />
                                        <div>
                                            <p>Tab Content 2</p>
                                            <div class="footer">
                                                <img alt="next section" src="http://www.ubreakirepair.com/ebaysite/images/line.png" width="976" height="9" />
                                                <p>
                                                    <a class="header3" href="http://contact.ebay.co.uk/ws/eBayISAPI.dll?ContactUserNextGen&amp;recipient=irepair">Please click here if you wish to contact us about this product</a>
                                                </p>
                                                <p class="header3">or</p>
                                                <p class="header3">use one of the links below</p>
                                                    <a href="http://www.facebook.com/ubreakirepair">
                                                        <img name="facebook" alt="Visit us on Facebook" src="http://www.ubreakirepair.com/ebaysite/images/facebook.png" />
                                                    </a>
                                                <a href="https://twitter.com/ubreak_irepair">
                                                    <img name="twitter" alt="Visit us at Twitter" src="http://www.ubreakirepair.com/ebaysite/images/Twitter.png" />
                                                </a>
                                                <a href="skype:ubreakirepair?chat">
                                                    <img name="skype" alt="Open Skype" src="http://www.ubreakirepair.com/ebaysite/images/skype.png" />
                                                </a>
                                                <a href="http://www.ubreakirepair.com/contactus.php">
                                                    <img name="web" alt="Contact Us" src="http://www.ubreakirepair.com/ebaysite/images/website.png" style="text-align:center" />
                                                </a>
                                                <p>
                                                    <a href="http://my.ebay.co.uk/ws/eBayISAPI.dll?AcceptSavedSeller&amp;mode=0&amp;preference=0&amp;sellerid=irepair">
                                                        <img name="fav" alt="Favorite Us at Ebay" src="http://www.ubreakirepair.com/ebaysite/images/fav.png" />
                                                    </a>
                                                </p>
                                            </div>
                                        </div>
                                    </li>
                                    <li id="item-3">
                                        <label for="toggle-Returns">Returns</label>
                                        <input type="radio" id="toggle-Returns" name="toggleTabs" />
                                        <div id="notice">
                                            <p>At uBreakiRepair customer satisfaction is paramount. If any item received,
                                                deemed to be faulty or damaged, it will be replaced or refunded. All repairs
                                                require specialised skill and we do not hold any responsibility for the
                                                damage incured in the course of repairing your device. We offer an installation
                                                service if you are not confident in the repair yourself.</p>
                                            <div class="footer">
                                                <img alt="next section" src="http://www.ubreakirepair.com/ebaysite/images/line.png" width="976" height="9" />
                                                <p>
                                                    <a class="header3" href="http://contact.ebay.co.uk/ws/eBayISAPI.dll?ContactUserNextGen&amp;recipient=irepair">Please click here if you wish to contact us about this product</a>
                                                </p>
                                                <p class="header3">or</p>
                                                <p class="header3">use one of the links below</p>
                                                    <a href="http://www.facebook.com/ubreakirepair">
                                                        <img name="facebook" alt="Visit us on Facebook" src="http://www.ubreakirepair.com/ebaysite/images/facebook.png" />
                                                    </a>
                                                <a href="https://twitter.com/ubreak_irepair">
                                                    <img name="twitter" alt="Visit us at Twitter" src="http://www.ubreakirepair.com/ebaysite/images/Twitter.png" />
                                                </a>
                                                <a href="skype:ubreakirepair?chat">
                                                    <img name="skype" alt="Open Skype" src="http://www.ubreakirepair.com/ebaysite/images/skype.png" />
                                                </a>
                                                <a href="http://www.ubreakirepair.com/contactus.php">
                                                    <img name="web" alt="Contact Us" src="http://www.ubreakirepair.com/ebaysite/images/website.png" style="text-align:center" />
                                                </a>
                                                <p>
                                                    <a href="http://my.ebay.co.uk/ws/eBayISAPI.dll?AcceptSavedSeller&amp;mode=0&amp;preference=0&amp;sellerid=irepair">
                                                        <img name="fav" alt="Favorite Us at Ebay" src="http://www.ubreakirepair.com/ebaysite/images/fav.png" />
                                                    </a>
                                                </p>
                                            </div>
                                        </div>
                                    </li>
                                    <li id="item-4" title="click for Tab 4">
                                        <label for="toggle-Tab4">Tab4</label>
                                        <input type="radio" id="toggle-Tab4" name="toggleTabs" />
                                        <div>
                                            <p>Tab Content 4</p>
                                            <div class="footer">
                                                <img alt="next section" src="http://www.ubreakirepair.com/ebaysite/images/line.png" width="976" height="9" />
                                                <p>
                                                    <a class="header3" href="http://contact.ebay.co.uk/ws/eBayISAPI.dll?ContactUserNextGen&amp;recipient=irepair">Please click here if you wish to contact us about this product</a>
                                                </p>
                                                <p class="header3">or</p>
                                                <p class="header3">use one of the links below</p>
                                                    <a href="http://www.facebook.com/ubreakirepair">
                                                        <img name="facebook" alt="Visit us on Facebook" src="http://www.ubreakirepair.com/ebaysite/images/facebook.png" />
                                                    </a>
                                                <a href="https://twitter.com/ubreak_irepair">
                                                    <img name="twitter" alt="Visit us at Twitter" src="http://www.ubreakirepair.com/ebaysite/images/Twitter.png" />
                                                </a>
                                                <a href="skype:ubreakirepair?chat">
                                                    <img name="skype" alt="Open Skype" src="http://www.ubreakirepair.com/ebaysite/images/skype.png" />
                                                </a>
                                                <a href="http://www.ubreakirepair.com/contactus.php">
                                                    <img name="web" alt="Contact Us" src="http://www.ubreakirepair.com/ebaysite/images/website.png" style="text-align:center" />
                                                </a>
                                                <p>
                                                    <a href="http://my.ebay.co.uk/ws/eBayISAPI.dll?AcceptSavedSeller&amp;mode=0&amp;preference=0&amp;sellerid=irepair">
                                                        <img name="fav" alt="Favorite Us at Ebay" src="http://www.ubreakirepair.com/ebaysite/images/fav.png" />
                                                    </a>
                                                </p>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                                <p>&nbsp;</p>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td valign="top" class="estimate">
                            <p>&nbsp;</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html> 
```

**更新**

这是拥有一个有效的水平标签条的一种方法（也在有效的 XHTML 中）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width;" />
    <link rel="stylesheet" type="text/css" href="http://www.ubreakirepair.com/parts.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="http://www.ubreakirepair.com/ebaysite/handheld.css" media="handheld" />
    <link rel="stylesheet" type="text/css" href="http://www.ubreakirepair.com/ebaysite/font.css" />
    <style type="text/css">
    li.noint11_menu {
        list-style-type: none;
        width: 10em;
    }
    input[type=radio] {
       position: absolute;
       top: -9999px;
       left: -9999px;
       /* For mobile, it's typically better to position radio on top of clickable
          area and turn opacity to 0 instead. */
    }

    /* Default State */
    li.noint11_menu > div {
       display: none;
    }

    /* Toggled State */
    input[type=radio]:checked ~ div {
        color: #EEE;
        display: block;
        margin-top: 13px;
        margin-bottom: 5px;
        position: absolute;
        left: 0;
        width: 700px;
        text-shadow: 1px 1px 1px black;
        font-family: 'MuliLight', Arial, sans-serif;
        font-size: 14px;
        text-decoration: none;
        text-align: center;
        padding: 5px 10px;
        background: #0272A7;
        box-shadow: inset 0px 0px 1px #EDF9FF;
        -moz-user-select: none;
        -moz-box-shadow: inset 0px 0px 1px #edf9ff;
        -webkit-box-shadow: inset 0px 0px 1px #EDF9FF;
    }

    div.css-tabs ul {
        width: 100%;
        height: 40px;
        position: absolute;
    }

    div.css-tabs ul li {
        float: left;
    }

    div.css-tabs {
        float: left;
    }

    div.footer {
        clear: both;
        position: fixed;
        bottom: 0;
        width: 100%;
    }

    div.footer div {
        margin: 0 auto;
    }

    </style>
</head>
<body>
    <div id="full">
        <div id="header100">
            <img id="header" alt="Our Logo" src="http://www.ubreakirepair.com/ebaysite/images/ubreakirepairheader.png" />
        </div>
        <div id="noint_box1">
            <div id="tab2" class="css-tabs">
                <ul>
                    <li id="item-1" class="noint11_menu">
                        <label for="toggle-Shipping">Shipping</label>
                        <input type="radio" id="toggle-Shipping" name="toggleTabs" checked="checked" />
                        <div>
                            <p><img id="shippingtable" alt="Shipping Table" src="http://www.ubreakirepair.com/ebaysite/images/shippingtable.png" width="684px" height="242px" /></p>
                        </div>
                    </li>
                    <li id="item-2" class="noint11_menu">
                        <label for="toggle-Payment">Payment</label>
                        <input type="radio" id="toggle-Payment" name="toggleTabs" />
                        <div>
                            <p>Tab Content 2</p>
                        </div>
                    </li>
                    <li id="item-3" class="noint11_menu">
                        <label for="toggle-Returns">Returns</label>
                        <input type="radio" id="toggle-Returns" name="toggleTabs" />
                        <div id="notice">
                            <p>At uBreakiRepair customer satisfaction is paramount. If any item received,
                                deemed to be faulty or damaged, it will be replaced or refunded. All repairs
                                require specialised skill and we do not hold any responsibility for the
                                damage incured in the course of repairing your device. We offer an installation
                                service if you are not confident in the repair yourself.</p>
                        </div>
                    </li>
                    <li id="item-4" class="noint11_menu" title="click for Tab 4">
                        <label for="toggle-Tab4">Tab4</label>
                        <input type="radio" id="toggle-Tab4" name="toggleTabs" />
                        <div>
                            <p>Tab Content 4</p>
                        </div>
                    </li>
                </ul>
            </div>
            <p>&nbsp;</p>
            <div class="estimate">
                <p>&nbsp;</p>
            </div>
        </div>
        <div class="footer">
            <div>
                <img alt="next section" src="http://www.ubreakirepair.com/ebaysite/images/line.png" width="976" height="9" />
                <p>
                    <a class="header3" href="http://contact.ebay.co.uk/ws/eBayISAPI.dll?ContactUserNextGen&amp;recipient=irepair">Please click here if you wish to contact us about this product</a>
                </p>
                <p class="header3">or</p>
                <p class="header3">use one of the links below</p>
                    <a href="http://www.facebook.com/ubreakirepair">
                        <img name="facebook" alt="Visit us on Facebook" src="http://www.ubreakirepair.com/ebaysite/images/facebook.png" width="48" />
                    </a>
                <a href="https://twitter.com/ubreak_irepair">
                    <img name="twitter" alt="Visit us at Twitter" src="http://www.ubreakirepair.com/ebaysite/images/Twitter.png" width="48" />
                </a>
                <a href="skype:ubreakirepair?chat">
                    <img name="skype" alt="Open Skype" src="http://www.ubreakirepair.com/ebaysite/images/skype.png" width="48" />
                </a>
                <a href="http://www.ubreakirepair.com/contactus.php">
                    <img name="web" alt="Contact Us" src="http://www.ubreakirepair.com/ebaysite/images/website.png" width="48" />
                </a>
                <p>
                    <a href="http://my.ebay.co.uk/ws/eBayISAPI.dll?AcceptSavedSeller&amp;mode=0&amp;preference=0&amp;sellerid=irepair">
                        <img name="fav" alt="Favorite Us at Ebay" src="http://www.ubreakirepair.com/ebaysite/images/fav.png" height="48" />
                    </a>
                </p>
            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T17:20:32.957

使用 null 内联 javascript 事件。

```
<a href="javascript://" ... /> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-19T17:33:44.607

为您的哈希位置添加空白目标 href="#item-1"：

```
<a name="item-1"></a> 
```

如果您将此添加到页面顶部，则当用户单击第一个选项卡时，它将转到**此空白目标锚标记所在的位置**。

对以下内容执行相同操作：

```
<a name="item-2"></a>
<a name="item-3"></a>
<a name="item-4"></a>
.... 
```

我不确定您可以访问页面的哪个部分，但尝试在完整的 div 标签之前添加它们并查看效果：

```
<a name="item-1"></a>
<a name="item-2"></a>
<a name="item-3"></a>
<a name="item-4"></a>
<div id="full"> 
```

如果这些额外的标签在您的页面上占用了不需要的物理空间，请使用 CSS 隐藏它们**display: none**

这有意义吗？

PS您的页面缺少通常的**正文**和**头部**标签，它们是通常的html页面结构的一部分......以及结束**/html**标签是的:)

# java - 非常简单的 Spring AOP 切入点

> ID：12979243
> 
> 赞同：2
> 
> 时间：2012-10-19T17:18:10.053
> 
> 标签：java, spring, spring-aop

切入点工作得`create()`很好，但我无法让`setStatus()`切入点工作，但我尝试......我已经尝试过`@Before`, `@After`, `@AfterReturning`，但没有。

根据调试器，这两种方法都被调用。

```
package com.baz;

@Aspect
public class ServiceAspect {
   @Pointcut("execution(* com.foo.ServiceImpl.create(..))")
    public void create() {}

    @Pointcut("execution(* com.bar.Subscription.setStatus(..))")
    public void setStatus() {}

    // works
    @AfterReturning(pointcut="create()", returning="retVal")
    public void afterCreate(Object retVal) {
        // omitted
    }

    // doesn't work
    @Before("setStatus()")
    public void status() {
        // omitted
    }

    // doesn't work
    @Before("setStatus() && args(status)")
    public void status(int status) {
        // omitted
    }

    // doesn't work
    @After("setStatus()")
    public void status() {
        // omitted
    }

    // doesn't work
    @AfterReturning(pointcut="setStatus()")
    public void status2() {
        // omitted
    }

    // doesn't work
    @AfterReturning(pointcut="setStatus()", returning="retVal")
    public void afterSetStatus(Object retVal) {
        // omitted
    }

    // doesn't work
    @Around("setStatus()")
    public Object aroundStatus(ProceedingJoinPoint pjp) throws Throwable {
        Object output = pjp.proceed();
        return output;
    }
} 
```

这些方法如下所示：

```
public class Subscription extends FooBar implements Baz {
    public void setStatus(int status) { /* ... */ }
}

public class ServiceImpl implements Service {
    public Subscription create(Session session, Subscription template) { /* ... */ }
} 
```

**编辑**

我试过同时使用`<aop:aspectj-autoproxy />`,`<aop:aspectj-autoproxy proxy-target-class="true"/>`和`<aop:aspectj-autoproxy proxy-target-class="false"/>`.

**编辑 2**

我试过`setStatus()`直接打电话`Subscription`，但也没有。

```
Subscription subscription = new Subscription();
subscription.setStatus(1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T07:58:25.473

> 订阅订阅 = 新订阅（）；
> 
> 订阅.setStatus(1);

对于要应用的方面，订阅应该是一个弹簧管理的 bean，即您应该`Subscription`从`ApplicationContext`以下获取类型的对象：

```
ClassPathXmlApplicationContext context = 
    new ClassPathXmlApplicationContext("classpath:META-INF/Spring.xml");
Subscription subscription = context.getBean(Subscription.class); 
```

`@Resource`或使用或`@Autowired`注释将它们注入。

然后，对`setStatus()`on`subscription`对象的调用将通过 Spring 框架创建的 AOP 代理，并执行与方法定义匹配的 AOP 通知中的代码。

在使用运算符创建对象时，获取 spring 管理的 bean 的另一种方法`new`是使用[`@Configurable`](http://vikdor.blogspot.com/2012/08/using-configurable-to-inject-resources.html)注解。

# php - 如何让我的 URL API 更安全

> ID：12979244
> 
> 赞同：0
> 
> 时间：2012-10-19T17:18:09.260
> 
> 标签：php, iphone, api, url

我已经实现了一个 PHP URL API，我从我的 iPhone 应用程序调用它，以便访问我服务器上的某些数据。我不确定如何制作，以便只允许我的应用程序调用 API。到目前为止，我非常简单的解决方案是在 URL 中传递一个密钥，但如果有人愿意，它很容易被捕获，然后被不受欢迎的用户使用。我该怎么办？感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:58:42.103

您在使用密钥的正确轨道上，但使用该密钥创建您通过 URL 而不是密钥传递的哈希。服务器具有相同的密钥，并且可以重新创建相同的散列。如果不匹配，则无效。

```
$key = 'my secret key';
$data_item1 = 'something';
$data_item2 = 'something else';

$random_key = mt_rand(100000,10000000);
$check = sha1($key . $data_item1 . $data_item2 . $random_key);

$submit_data = array(
    'data_item1' => $data_item1,
    'data_item2' => $data_item2,
    'check' => $check,
    'checkid' => $random_key
); 
```

服务器与应用程序具有相同的 $key。然后它可以将数据元素提交并运行相同的 sha1 并比较 sha1 结果。您不需要使用您提交的所有数据项来创建 sha1 哈希。重要的部分是从提交中遗漏一些“关键”数据以生成散列。这也验证了数据在传输过程中没有被更改或篡改，因为它充当一种校验和。

随机数据是为了确保每个请求都有不同的哈希，因此更难检测模式。这种方法应该足以阻止随意的黑客攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:21:45.727

要求用户名和密码怎么样？
一个简单（但不完美）的方法可能是[Basic access authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:47:51.960

通过 HTTPS 进行通信。我会让应用程序对服务器进行初步检查。如果服务器以某种方式响应（例如，使用特定的状态代码或响应字符串），则应用程序知道它是合法的。然后应用程序可以将信息发布到 PHP API，并可能使用用户名和密码进行身份验证（或者如果您真的想变得复杂，让服务器在初步检查时返回一个密码并使用该密码对服务进行身份验证）。

通过 HTTPS 进行通信，您可以确保所有内容都已加密。通过进行初步检查，您可以更加确信有人不会创建假 SSL 证书来放置在他们的假服务器上以获取您的身份验证详细信息。然后应用程序安全地完成响应。这个系统更复杂，所以这应该更安全。

顺便说一句，在代码中放置敏感的用户名和密码时要小心。如果有人反编译您的可执行文件，他们可能会看到它们。选择做一些更动态的事情，比如在与服务器进行初步检查后获取密码。

# java - 如何从 url Codenameone 创建图像

> ID：12979247
> 
> 赞同：3
> 
> 时间：2012-10-19T17:18:13.543
> 
> 标签：java, image, codenameone

我需要从具有图像 url 的字符串创建一个新的 Image 实例。
例如[http://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png](http://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png)

这种类型的 url 来自 JSONParser，我想用它们来填充多按钮列表的图标。

我使用此 Model 类的以下**getItemAt**方法将数据放在多按钮列表中。每个多按钮都有一个图标和一些线条。我将 Line1 命名为*name*并将 Line2 命名为*rating*。我想从字符串 url 制作一个图像，这样我就可以在 h.put("icon", defaultIcon) 行中更改多按钮图标代替 defaultIcon。

```
static class Model implements ListModel {
    public Object getItemAt(int index) {
        Hashtable h      = new Hashtable();
        Hashtable entry  = (Hashtable) results.elementAt(index);
        String    name   = (String) entry.get("name");
        Double    rating = (Double) entry.get("rating");
        String    url    = (String) entry.get("icon");

        h.put("name", name);
        h.put("icon", defaultIcon); // change defaultIcon with an Image from url String

        if (rating == null) {
            h.put("rating", "Not rated");
        } else {
            h.put("rating", "Rating: " + rating.toString());
        }

        return h;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T08:07:49.580

使用`ImageDownloadService.createImageToStorage`它将异步下载图像，将其放在适当位置的列表的哈希表中。刷新列表并将图像缓存在存储中，以防您再次请求它。

作为服务的一部分，它还可以将您的图像缩放到固定尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:44:15.400

您可以使用它从 url 获取图像

```
Image image = Toolkit.getDefaultToolkit().getDefaultToolkit().createImage(url); 
```

这也可以

```
Image image = ImageIO.read(url); 
```

# linq - Left Outer join LINQ 查询与 CRM 2011 中的四个实体和多个 where 子句

> ID：12979250
> 
> 赞同：1
> 
> 时间：2012-10-19T17:18:42.760
> 
> 标签：linq, linq-to-sql, linq-to-entities, dynamics-crm-2011

我在 Microsoft Dynamics CRM 2011 中有一个情况，这里我有一组帐户，其中包含与 permitCounty 相关的 Permit 和 permit ae，并且 permitCounty 与 County

我想得到像这个查询这样的输出。

但这不合适

```
strSearch="Some text";

var lstItems = (from county in x.De_countySet
                join permitcounty in x.de_permitcountySet on county.De_countyId equals permitcounty.de_CountyId.Id
                join permit in x.de_permitSet on permitcounty.de_PermitId.Id equals permit.de_permitId
                join account in x.AccountSet on permit.de_AccountId.Id equals account.AccountId into outer

                where permit.de_Type.Equals("Type1") && permit.statuscode.Equals("Active")                // Permit Type as Type1 and Status as Active
                where account.De_LegalName.Contains(strSearch) || account.Name.Contains(strSearch)        // Search in Legal Name and Account full name
                where county.de_CountyName.Contains(strSearch)                                            // Search in County Name

                orderby county.de_CountyName
                from account in outer.DefaultIfEmpty()
                select new clsTemp
                {
                    Name = account.Name,
                    De_LegalName = account.De_LegalName,
                    Address1_Line1 = account.Address1_Line1,
                    Address1_City = account.Address1_City,
                    Address1_PostalCode = account.Address1_PostalCode,

                    de_CountyName = county.de_CountyName              
                 }).ToList(); 
```

任何帮助表示赞赏。

维努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:15:29.113

这是编写组加入的另一种方法。请注意，包含的行`into`是唯一被替换的行：

```
strSearch="Some text";

var lstItems = (from county in x.De_countySet
                join permitcounty in x.de_permitcountySet on county.De_countyId equals permitcounty.de_CountyId.Id
                join permit in x.de_permitSet on permitcounty.de_PermitId.Id equals permit.de_permitId
                let outer = x.AccountSet.Where(account => permit.de_AccountId.Id == account.AccountId)

                where permit.de_Type.Equals("Type1") && permit.statuscode.Equals("Active")                // Permit Type as Type1 and Status as Active
                // "account" is not in scope and should cause a design-time error
                where account.De_LegalName.Contains(strSearch) || account.Name.Contains(strSearch)        // Search in Legal Name and Account full name
                where county.de_CountyName.Contains(strSearch)                                            // Search in County Name

                orderby county.de_CountyName
                from account in outer.DefaultIfEmpty()
                select new clsTemp
                {
                    Name = account.Name,
                    De_LegalName = account.De_LegalName,
                    Address1_Line1 = account.Address1_Line1,
                    Address1_City = account.Address1_City,
                    Address1_PostalCode = account.Address1_PostalCode,

                    de_CountyName = county.de_CountyName              
                 }).ToList(); 
```

当它以这种方式编写时，一个明显的错误就会暴露出来（`account`不在范围内）。也许还有其他问题。没有任何许可证的县不会显示，而拥有多个许可证但没有任何帐户的县将有多行空白帐户。这是您想要的功能吗？

**编辑：**第二次尝试：

```
strSearch="Some text";

var lstItems = (from county in x.De_countySet
                join permitcounty in x.de_permitcountySet on county.De_countyId equals permitcounty.de_CountyId.Id
                join permit in x.de_permitSet on permitcounty.de_PermitId.Id equals permit.de_permitId

                where permit.de_Type.Equals("Type1") && permit.statuscode.Equals("Active")                // Permit Type as Type1 and Status as Active

                where county.de_CountyName.Contains(strSearch)                                            // Search in County Name

                orderby county.de_CountyName
                from account in x.AccountSet.Where(account => 
                    permit.de_AccountId.Id == account.AccountId &&
                    (account.De_LegalName.Contains(strSearch) || 
                     account.Name.Contains(strSearch))).DefaultIfEmpty()   // Search in Legal Name and Account full name
                select new clsTemp
                {
                    Name = account.Name,
                    De_LegalName = account.De_LegalName,
                    Address1_Line1 = account.Address1_Line1,
                    Address1_City = account.Address1_City,
                    Address1_PostalCode = account.Address1_PostalCode,

                    de_CountyName = county.de_CountyName              
                 }).ToList(); 
```

# c++ - 类中的地图给出编译错误

> ID：12979254
> 
> 赞同：1
> 
> 时间：2012-10-19T17:18:58.583
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012

我正在尝试定义一个类

```
class BTree
{
private:
     map<std::string,BTree*> *node;
public:

    BTree(void);
    ~BTree(void);
    void Insert(BTree *);
}; 
```

在编译代码时，编译器给了我一个错误

```
error C2899: typename cannot be used outside a template declaration  
error C2143: syntax error : missing ';' before '<'  
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int  
error C2238: unexpected token(s) preceding ';'  
error C2899: typename cannot be used outside a template declaration 
```

我试图将地图更改为简单的东西，就像`map<int,int> node`它仍然给我同样的错误一样。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:20:39.067

这可能是因为您没有`std`在`using`. 该类型`map`不在全局命名空间中，因此`map`无法解析。尝试以下

```
class BTree {
private:
  std::map<std::string, BTree*> *node;

  ...
}; 
```

# c# - 在不使用签入方法的情况下在 VSS 6.0 中向文件写入注释

> ID：12979259
> 
> 赞同：0
> 
> 时间：2012-10-19T17:19:07.067
> 
> 标签：c#, visual-sourcesafe

我正在编写一个通过 c# 连接到 VSS 的应用程序，允许您签入和签出文件，但是我经常使用 move() 方法，并且想知道是否有任何方法可以在无需签出的情况下向这个移动的文件添加注释并重新签入，因为这些文件通常是 +2gb 并且需要很多额外的时间来完成。到目前为止，我所拥有的是使用 VSSVersion 评论属性，但它是一个只能获取的道具。我在这里遗漏了什么，或者真的没有办法给文件写评论吗？

此外，从 VSS 移出现在并不是一个完全可行的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:03:20.213

查看 msdn 网站，IVSSVersions`string Comment { get; }`只是一个“获取”属性。这样做的唯一方法是手动进入 VSS 并进行这些更改。由于微软似乎不再支持 VSS。唯一的解决方法是在每次调用 move 方法时写入一个标记为“comments”的 txt 文件。希望这可以帮助！

# java-me - 在手机上为 Nokia Series 40 手机调试 Java ME 应用程序

> ID：12979260
> 
> 赞同：0
> 
> 时间：2012-10-19T17:19:13.413
> 
> 标签：java-me, nullpointerexception, nokia-s40

我刚刚为 Series 40 平台创建了一个相当简单的 Java ME 应用程序。该应用程序在模拟器中完美运行，但是当我将它打包到我自己的 40 系列手机时，该应用程序失败并显示`NullPointerException`. 几乎我所有的代码都处理数组，因此很难判断错误发生在哪里，因为手机的错误报告不包含任何细节。

那么如何**在手机上**调试应用程序呢？（如果有人能想到应用程序在手机上失败的任何原因，而不是模拟器（我真的很难过）请分享。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T18:26:08.447

JavaME 的众多经验法则之一是“永远不要相信模拟器——总是在多个真实设备上进行测试”。

NullPointerExceptions 是最难定位的异常，但并非不可能。通过简单地在设备上输出错误消息，我已经完成了很多次。

```
String error = null;
Image myImage = null;

try {
    myImage = Image.createImage("someImage.png");
} catch (Exception e) {
    error = "Failed to load someImage.png: " + e.toString();
} 
```

然后在你的主循环中（对于 Canvas / GameCanvas 的东西），做

```
if (error!=null) g.drawString(error,0,0,0); 
```

然后开始在你的代码中插入大量的 try/catch 块，无论你在哪里创建对象。

如果上面的 myImage 没有加载，那么你会在尝试加载时得到 NullPointerException

```
g.drawImage(myImage,0,0,0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T20:20:40.280

要识别抛出异常的块，您可以将可能的区域包装在 try/catch 中。捕获 NullPointerException 并抛出一个更模糊的异常，这将帮助您缩小范围。所以可以抛出 ArithmeticException 等。

# ssh - gitolite 如何将远程用户映射到存储库用户？

> ID：12979262
> 
> 赞同：2
> 
> 时间：2012-10-19T17:19:25.260
> 
> 标签：ssh, key, public, gitolite

* * *

gitolite 如何将通过 gitolite 访问 git 的远程用户映射到 gitolite 用户（repo 用户）？这是来自 keydir 中的**公钥文件名**吗？是否必须将公钥文件命名为 **username.pub**。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:36:27.830

它是在 repo 中注册的公钥的*名称*`gitolite-admin`，用作`~git/.ssh/authorized-keys`文件中的参数（由 gitolite 在推送`gitolite-admin`repo 时检测到新用户时生成）

`~git/.ssh/authorized-keys` 如果该调用是使用在该文件中注册的用户公共 ssh 密钥完成的，那么这 将在每个 ssh 调用上调用 gitolite-shell。
该调用`gitolite-shell`将使用用户名作为参数来完成。

查看更多“ [gitolite 如何使用 ssh](http://sitaramc.github.com/gitolite/glssh.html) ”。

> 对于 gitolite 来说，限制用户使用特定命令非常重要。
> 如果您阅读**[`man sshd`](http://linux.die.net/man/8/sshd)**并查找`authorized_keys`文件格式，您会看到许多可以添加到公钥行的选项，这些选项以各种方式限制传入用户。
> 特别要注意该`command=`选项，它的意思是“无论传入用户要求做什么，都强制运行此命令”。
> 
> 另请注意，当authorized_keys 文件中有许多公钥（即行）时，每行可以有一组不同的选项和command= 值。
> 
> 如果没有这个 command= 选项，ssh 守护进程只会给你一个 shell，这不是我们想要的 gitolite 键（尽管我们很可能有其他用于获取 shell 的键）。

注意：该`command=`机制是[**ssh 强制命令**](http://oreilly.com/catalog/sshtdg/chapter/ch08.html#22858)。

![ssh 中的强制命令](../Images/d186f6e28971325a9074eb1b5f4d7a70.png)

> **这是使 gitolite 起作用的支柱；请确保您理解这一点。**
> 
> 如果你查看 authorized_keys 文件，你会看到这样的条目（我当然切掉了末端；它们是很长的行）：

```
command="[path]/gitolite-shell sitaram",[more options] ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA18S2t...
command="[path]/gitolite-shell usertwo",[more options] ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEArXtCT... 
```

> 首先，它找出该文件中的哪些公钥与传入的登录名匹配。
> 一旦找到匹配项，它将运行该行给出的命令；例如，如果我登录，它将运行`[path]/gitolite-shell sitaram`.
> 所以首先要注意的是，这样的用户没有得到“shell访问”，这很好！
> 
> 然而，在运行命令之前，sshd 会设置一个名为的环境变量`SSH_ORIGINAL_COMMAND`，其中包含您的工作站发出的实际 git 命令。如果您在授权密钥文件中
> 没有该部分，则该命令将运行。`command=`

当`gitolite-shell`获得控制权时，它会查看第一个参数（“ `sitaram`”、“ `usertwo`”等）来确定您是谁。然后它会查看`SSH_ORIGINAL_COMMAND`变量以找出您要访问的存储库，以及您是在阅读还是在写作。

# javascript - 在 1 个 HTML onclick 事件中使用 JS 和 ASP

> ID：12979267
> 
> 赞同：1
> 
> 时间：2012-10-19T17:19:39.407
> 
> 标签：javascript, html, events, asp-classic, onclick

如何从一个 HTML Button OnClick 事件中调用 ASP 函数和 Javascript 函数？-- 不使用 ASP.NET

```
onclick="SetDiv('titel', 'trSchrijver', 'boek')" 
```

JS

结合

```
onclick="<% boek.GetSchrijver %>" 
```

ASP

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:38:37.053

也许你想看看这个带有简单 AJAX 支持的经典 ASP 框架：http: [//ajaxed.org/](http://ajaxed.org/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T14:55:33.973

ASP Button 控件具有一个`OnClientClick`和一个`OnClick`属性。第一个用于定义要在客户端执行的 JavaScript 字符串，第二个用于定义在回发后要在服务器端执行的事件处理程序方法（ASP 函数）。您可以同时使用两者。

```
<asp:Button id="Button1"
   text="Execute ASP and JS"
   onClientClick="alert('I am JavaScript!')"
   runat="server" onclick="Button1_Click" /> 
```

在您的代码隐藏文件中：

```
void Button1_Click (object sender, EventArgs e)
{
  // Do C# stuff ...
} 
```

文档：
- [http://msdn.microsoft.com/library/system.web.ui.webcontrols.button.onclick.aspx](http://msdn.microsoft.com/library/system.web.ui.webcontrols.button.onclick.aspx)
- [http://msdn.microsoft.com/library/system.web.ui.webcontrols.button .onclientclick.aspx](http://msdn.microsoft.com/library/system.web.ui.webcontrols.button.onclientclick.aspx)

* * *

如果您不想使用 ASP Button 控件，则可以在普通 HTML 元素中使用 JS 函数 __doPostBack()。

```
<input type="button" id="btnSave"
  onclick="doSomething(); __doPostBack('btnSave ', 'parameter');"
  value="click me"/> 
```

在您的代码隐藏中：

```
public void Page_Load(object sender, EventArgs e)
{
  string parameter = Request["__EVENTARGUMENT"]; // parameter
  // Request["__EVENTTARGET"]; // btnSave
} 
```

请参阅我从中获取示例的[如何使用 __doPostBack() 。](https://stackoverflow.com/questions/3591634/how-to-use-dopostback)

# asp.net-mvc-3 - mvc3 的多个条件

> ID：12979268
> 
> 赞同：-2
> 
> 时间：2012-10-19T17:19:42.593
> 
> 标签：asp.net-mvc-3

我需要在此语法中添加第三个条件，以便 S139a 字段变得不可见。

```
<div style="float: left; width: 80px; visibility: visible">S139a:</div>
<div style="float: left;">@if (Model.xyz == 0)
{@Html.Raw("No")}
else
{@Html.Raw("Yes")}
</div>
<div style="clear: both;"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:33:13.413

您可以将显示`S139a`字段的代码包装在 中`if`，然后处理显示“否”或“是”。

```
@if (Model.SomeProperty == false)
{
    // Display the S139a field.  Then check xyz.
    if (Model.xyz == 0)
    { 
        @Html.Raw("No")
    }
    else
    { 
        @Html.Raw("Yes")
    }
} 
```

我正在做一些假设，因为我真的不知道该`S139a`字段是什么，或者您的代码的其余部分是什么样的。

# javascript - 更改所选菜单项 asp.net 母版页上的背景颜色

> ID：12979272
> 
> 赞同：0
> 
> 时间：2012-10-19T17:20:04.880
> 
> 标签：javascript, asp.net, web-applications

我在由无序列表构成的 MasterPage 中有一个菜单。我正在尝试使用 javascript 来更改选定的选项卡颜色。如果我在锚标签中有 href="#" 它工作正常，但如果我将实际链接放置到另一个页面，那么颜色选项卡会恢复到主页。选中后，我将列表项 ID 更改为 onlink。我一直在寻找死胡同的答案几天。有没有一个干净的解决方案？

stackoverflow 如何在他们的菜单中实现这一点？[问题] [标签] [用户] [徽章] [未答复]

菜单的 HTML

```
 <div id="navbar">
        <ul id="menulist">
            <li><a onclick="SelectedTab(this);" href="Default.aspx" id="onlink">Home</a></li>
            <li><a href="#" id="">View</a></li>
            <li><a onclick="SelectedTab(this);" href="About.aspx" id="">About</a></li>
            <li><a onclick="SelectedTab(this);" href="Contact" id="">Contact</a></li>
        </ul>
  </div> 
```

Javascript

```
 <script type="text/javascript">
    function SelectedTab(sender) {
        var aElements = sender.parentNode.parentNode.getElementsByTagName("a");
        var aElementsLength = aElements.length;
        var index;
        for (var i = 0; i < aElementsLength; i++) {
            if (aElements[i] == sender)        
            {
                index = i;
                aElements[i].id = "onlink";
            } else {
                aElements[i].id = "";
            }
        }
    }
</script> 
```

选定选项卡的 CSS

```
...stuff

#navbar ul li a#onlink
{
   background: #FFF;
   color: #465c71;
}
#navbar ul li a#onlink:hover 
{
   background: #FFF;
   color: #465c71;

...more stuff 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:33:55.753

当您实际移动到该页面时，您需要设置选定的链接。尝试这样的事情。

```
$(function(){
    var url=document.location.href;
    $("div#navbar ul#menulist li a").each(function(){
            var t=$(this).attr("href");
            if(t && url.indexOf(t)>0){
                $(this).addClass("onlink");
            }
    });
}); 
```

请检查`navbar`和`menulist`是否是渲染元素的 ID。否则，您要么需要使用 'ClientIdMode="Static"' `div`，`ul`要么使用`'<%= navbar.ClientID%>'`来获取 id。在此处查看工作示例：[jsfiddle](http://jsfiddle.net/amantur/LEa77/1/)

您还需要对您的`CSS`, 而不是：

```
 #navbar ul li a#onlink 
```

请用：

```
 #navbar ul li a.onlink 
```

# java - 无法在 JPA 图表编辑器中添加可嵌入类？

> ID：12979282
> 
> 赞同：0
> 
> 时间：2012-10-19T17:20:36.617
> 
> 标签：java, eclipse, jpa, eclipse-plugin

我`Eclipse IDE Plugin` `Dali Java Persistence Tools - JPA Diagram Editor`用于`JPA OR Mapping`图表。

我无法`Embeddable`在图表中查看和添加我的类。

1.  我需要为此做些什么配置`Eclipse`？
2.  `JPA OR Mapping`图表还有其他插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:44:58.630

目前在 Dali 工具中，您可以使用 JPA Details 和 JPA Structure 视图来编辑您的 Embeddable 类和属性。您还将在 Java 编辑器中获得代码协助和验证。正在为 Kepler 添加用于创建/编辑 Embeddables 的 JPA 图表编辑器支持。Kepler M3 的这项工作已经完成，如果您有任何建议，可以提供有关此错误的反馈。

*   [错误 364602 - JPA 图表编辑器可嵌入支持](https://bugs.eclipse.org/bugs/show_bug.cgi?id=364602)
*   [设计文档](http://wiki.eclipse.org/Embeddables_and_Mapped_Superclasses_in_JPA_Diagram_Editor)

# css - 浮动项目和 div 在 IE 中显示不同

> ID：12979286
> 
> 赞同：0
> 
> 时间：2012-10-19T17:20:45.660
> 
> 标签：css, internet-explorer, css-float

我正在研究 CSS 和 HTML 以尝试了解位置和浮动。我已经能够毫无问题地成功创建布局结构。但是，我注意到当我在 IE 9 中使用兼容模式时，页面的外观会发生变化。在 H1 和页脚 div 中的填充方面尤其如此。我尝试将页脚元素和浮动 div 的 div 和边距设置为 0，但没有运气。

我知道旧版本的 IE 中存在错误，但是，我想知道这里是否缺少一些简单的东西可以解决这个问题。

下面是我的 HTML 和 CSS 代码，以及来自 IE 9 的图像。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="Testing.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="StyleSheet1.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <form id="form1" runat="server">
    <div id="container">
        <div id="header">
        <h1>Header</h1>
        </div>
        <div id="leftnav">LeftNav</div>
        <div id="rightnav">RightNav</div>
        <div id="footer">Footer</div>
    </div>
    </form>
</body>
</html> 
```

下面是CSS：

```
#container
{
    width: 960px;
    margin: 0 auto;
    background-color: #FFFFCC;
    border: 1px solid black;
}

#leftnav
{
    float:left;
    width:160px;
    display:inline;
}

#rightnav
{
    float:left;
    display:inline;
    margin-left:5px;
}

#footer
{
    clear:both;
} 
```

我很感激对此的任何指示。

**注意**：我无法将图像直接发布到此消息中 - stackoverflow 限制新用户发布图像以防止垃圾邮件。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:32:46.937

尝试将此行添加到标题中：

```
<meta http-equiv="x-ua-compatible" content="ie=edge" /> 
```

它告诉 Internet Explorer 始终以受支持的方式呈现。

# php - 显示数据库值的总和 - PHP

> ID：12979291
> 
> 赞同：0
> 
> 时间：2012-10-19T17:21:09.330
> 
> 标签：php

嗨，我需要获取数据库字段 sbstart 的总和。我将代码更改为 SUM(sbstart) 但似乎不是一个有效的举措。如何显示总和？谢谢。

```
 <?php

$host = 'localhost';
$user = 'root';
$pass = '';
$db = 'regional_data';
@ $db = mysqli_connect($host, $user, $pass, $db);

if(mysqli_connect_errno())
{
    die('The connection to the database could not be established.');
}
$query = "SELECT SUM(sbstart) FROM newchk WHERE dist_chk ='$distUsr'";
$result = mysqli_query($db, $query);

while ($recS = mysqli_fetch_array($result)){

echo ($recS['sbstart']);    
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:22:57.533

改变

```
$query = "SELECT SUM(sbstart) FROM newchk WHERE dist_chk ='$distUsr'"; 
```

至（使用别名）

```
$query = "SELECT SUM(sbstart) as sub FROM newchk WHERE dist_chk ='$distUsr'"; 
```

然后

```
you doesn't need while loop because it return only one result.

$recS = mysqli_fetch_array($result);
echo $recS['sub']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:22:51.653

您需要使用其中一个`mysqli_fetch_assoc`来代替`mysql_fetch_array`，或者您需要使用`echo $recS[0]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:27:07.860

改变

```
$query = "SELECT SUM(sbstart) FROM newchk WHERE dist_chk ='$distUsr'"; 
```

到

```
$query = "SELECT SUM(sbstart) AS sum FROM newchk WHERE dist_chk ='$distUsr'"; 
```

和改变

```
echo ($recS['sbstart']); 
```

到

```
echo ($recS['sum']); 
```

# asp.net - 在 asp.net 中填充下拉列表的最简单方法（代码隐藏）？

> ID：12979297
> 
> 赞同：6
> 
> 时间：2012-10-19T17:21:42.123
> 
> 标签：asp.net, sql, c#-4.0

在 asp.net 中填充下拉列表的最简单方法是什么（代码隐藏）？我刚刚学会了如何使用数据表和数据适配器填充网格。可以使用数据表和数据适配器来填充 dropdonlist 吗？这是我的尝试..

```
public partial class page3 : System.Web.UI.Page
{
  public DataTable fillmydropdownlist()
  {
     DataTable drpdt = new DataTable();
     string q = "select flightdate from flightdetails";
     SqlCommand cmd = new SqlCommand(q,con);
     try
     {
         SqlDataAdapter da2 = new SqlDataAdapter(cmd);
     }
     catch { }
     return drpdt;
  }

  protected void Page_Load(object sender, EventArgs e)
  {
    dbOperation dbo = new dbOperation();
    DataTable dt = new DataTable();
    dt = dbo.fillmydropdownlist();
    DataTable drpdt= new DataTable();

    if (dt.Rows.Count > 0)
    {
        DropDownList1.DataSource = drpdt;
        DropDownList1.DataBind();
    }
    else
    {
        Response.Write("No Data");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T17:36:13.567

您可以使用 DataTextField 和 DataValueField 属性。

[ListControl.DataTextField 属性](https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.webcontrols.listcontrol.datatextfield?redirectedfrom=MSDN&view=netframework-4.8#System_Web_UI_WebControls_ListControl_DataTextField)

```
DropDownList1.DataSource = drpdt; 
DropDownList1.DataTextField="StringValue";
DropDownList1.DataValueField="CurrencyValue";
DropDownList1.DataBind(); 
```

或者一次添加一个 ListItem。

[ASP.Net DropDownList DataTextField 多列](http://web.archive.org/web/20141222172150/http://www.ezineasp.net/post/ASP-Net-DropDownList-DataTextField-Multiple-Columns.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:53:05.080

所有数据绑定控件都可以绑定到 DataTable 和任何实现 IEnumerable 的对象（例如字符串数组）。DropdownList 是一个数据绑定控件，所以答案是肯定的。

```
if (dt.Rows.Count > 0)
{
    DropDownList1.DataTextField = "FlightDescription";
    DropDownList1.DataValueField = "FlightID";
    DropDownList1.DataSource = drpdt;
    DropDownList1.DataBind();
} 
```

您还可以从 MarkUp 设置 DataXXXField 属性

```
<asp:DropdownList ID="DropDownList1" runat="server" 
                  DataTextField="FlightDescription" DataValueField="FlightID">
</asp:DropdownList> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T18:28:02.957

Win 和 codingbiz 建议的解决方案是最简单的，但仅适用于最简单的场景。并非每个 DropDown 都需要像这样绑定。有时我需要将两个（或更多）值绑定到 Listitem 的实例，这导致我通过遍历 DataTable 行来执行您的示例所做的事情，而是执行...

```
foreach (DataRow dr in dt.Rows) {
    DropDownList1.Items.Add(new ListItem(dr["flightdate"], dr["flightnum"] + ":" + dr["flightcarrier"]));
} 
```

稍后我可以执行`String.Split(":")(0)`or`String.Split(":")(1)`来获取第一个和第二个 ListItem 值。

总而言之，这实际上取决于您的需求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-09T18:54:47.013

Moojjoo的建议---

```
 private string FillBizNameCountyDdl()
    {
        string returnText;
        string nameAndCounty;
        string id;

        try
        {
            using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["connString"].ConnectionString))
            {
                conn.Open();
                using (SqlCommand cmd = new SqlCommand("Select *  FROM [tbl_name_county_web_search] ORDER BY main", conn))
                {
                    cmd.CommandType = CommandType.Text;
                    using (SqlDataReader reader = cmd.ExecuteReader())
                    {
                        if (reader.HasRows)
                        {
                            while (reader.Read())
                            {
                                nameAndCounty = reader["main"].ToString();
                                id = reader["id"].ToString();
                                ddlBizNameAndCounty.Items.Add(new ListItem(nameAndCounty, provId));                  
                            }
                        }                            
                    }
                }
            }
        }
        catch (Exception ex)
        {
            return ex.Message.Trim();
        }
        returnText = "Success";
        ddlBizNameAndCounty.Items.Insert(0, new ListItem("--Select Provider--"));
        ddlBizNameAndCounty.DataBind();
        return returnText;
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T05:00:37.693

```
<asp:DropDownList ID="DropDownList1" runat="server" DataTextField="StringValue" 
            DataValueField="CurrencyValue">
        </asp:DropDownList>

//C#:

DropDownList1.DataSource = drpdt; 
DropDownList1.DataBind(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-12T21:59:56.847

这对于后面的代码来说很简单。

```
private void Page_Init(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ddlProductID.DataSource = ProductsDB.GetProductsForDDL;
        ddlProductID.DataBind();
    }
} 
```

您的 DropDownList 在页面上可能看起来像这样。

```
<asp:DropDownList ID="ddlProductID" runat="server" AppendDataBoundItems="True" CssClass="DropDown" DataValueField="ProductID" DataTextField="Product" ViewStateMode="Enabled">
                                                                <asp:ListItem Value="">Select</asp:ListItem>
                                                            </asp:DropDownList> 
```

也许在这样的类中创建一些业务对象

```
public class ProductInfo()
{
    public ProductInfo() : base()
    {
    }

    public Int32 ProductID { get; set; } = 0;
    public string Product { get; set; } = string.Empty;
} 
```

使用静态方法编写另一个类，该方法返回类似于下面的列表，但使用 ADO.NET（DataReader 和存储过程）而不是企业库。如果有兴趣，我会改进我的答案。

```
public class ProductsDB()
{
    public static List<ProductInfo> GetProductsForDDL()
    {
        List<ProductInfo> objs = new List<ProductInfo>();
        Database db = new DatabaseProviderFactory().CreateDefault;

        using (DbCommand cmd = db.GetStoredProcCommand("SYSTEM_Products_DropDownList"))
        {
            using (IDataReader dr = db.ExecuteReader(cmd))
            {
                while (dr.Read())
                    objs.Add(new ProductInfo(Convert.ToInt32(dr("ProductID")), (string)IIf(IsDBNull(dr("Product")), "", dr("Product"))));
            }
        }

        return objs;
    }
} 
```

这将使您能够在应用程序的任何页面上列出产品，而无需复制和粘贴大量代码。

# arrays - VB2010 从数组字符串中提取特定字符

> ID：12979300
> 
> 赞同：0
> 
> 时间：2012-10-19T17:21:54.557
> 
> 标签：arrays, vb.net, character, extract, point

有没有办法指定我想从数组字符串中提取哪些字符？这不是，下面的代码，论坛只是不喜欢它作为文本。

```
For example:  abc1234blahblah  and I want to point from the left, characters [4-7] 
Character 4 = "1"
Character 5 = "2"
Character 6 = "3"
Character 7 = "4" 
```

然后我想把它们放到一个字符串中：“1234”

我正在处理的真正应用程序，文件路径的第一个目录始终以项目编号开头，因此我想提取作业编号并将其放入 VB 2010 的文本框中。示例：Q:\2456_customer_name....\ file.xls 我希望能够再次指向数字，但是如果我知道主目录将始终以作业编号开头，那么我应该能够仅指向字符 [4-7] 并将其放入一个字符串。我想我知道这个概念，但对 VB 的了解还不够，无法将其组合在一起。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:27:31.850

您可以使用[Substring 函数](http://msdn.microsoft.com/en-us/library/swz0961t%28v=vs.110%29.aspx)：

```
Dim a = "abc1234blahblah"
Dim b = a.Substring(3, 4) ' b now contains "1234" 
```

再想一想，文件所在的驱动器是否有可能像 UNC 路径一样`\\MyServer\SomeShare\9876_CustomerName\file.xls`？如果是这样，提取数字会有点棘手。我试图说明指定文件的所有可能方式：

```
Module Module1

    Function GetCustomerNumber(filename As String) As String
        Dim abspath = IO.Path.GetFullPath(filename)
        Dim dir = IO.Path.GetDirectoryName(abspath)
        Dim fileParentDirectory = dir.Split(IO.Path.DirectorySeparatorChar).Last
        Return fileParentDirectory.Substring(0, 4)
    End Function

    Sub Main()

        Dim a = "C:\5678_CustomerName\file.xls"
        Dim b = "\\se1234\Share001\5678_CustomerName\file.xls"
        Dim c = "\5678_CustomerName\file.xls"
        Dim d = ".\5678_CustomerName\file.xls"
        Dim e = "5678_CustomerName\file.xls"
        Console.WriteLine(GetCustomerNumber(a))
        Console.WriteLine(GetCustomerNumber(b))
        Console.WriteLine(GetCustomerNumber(c))
        Console.WriteLine(GetCustomerNumber(d))
        Console.WriteLine(GetCustomerNumber(e))

        Console.ReadLine()

    End Sub

End Module 
```

它为所有示例输出“5678”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:39:24.257

正则表达式会起作用

```
Dim numRegex As New Regex("\d+")
Dim number As String = numRegex.Match("abc1234blahblah").Value 
```

# android - 仅在没有文件资源管理器的情况下打开图库的意图

> ID：12979302
> 
> 赞同：0
> 
> 时间：2012-10-19T17:22:00.560
> 
> 标签：android

您好，我有以下代码可以打开图库，以便用户选择图像。

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select file to upload "), 1); 
```

我可以选择图库和文件资源管理器。我怎样才能只获得内置画廊的 android。我需要这个，因为我不希望用户选择图像以外的东西。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:34:13.667

我不认为这是可能的。文件资源管理器告诉 Android 它需要与 Gallery 相同的 Intent 来启动，因此 Android 会显示一个对话框供用户选择要使用的 Intent。

一旦他们选择了它，您就必须在您的应用程序中检查他们的选择以确保它是一张图片，如果不是，那么告诉他们并让他们再次选择。

# objective-c - NSOperation 在睡眠模式后暂停

> ID：12979303
> 
> 赞同：0
> 
> 时间：2012-10-19T17:22:02.343
> 
> 标签：objective-c, macos, amazon-s3, sleep, nsoperation

我正在使用 S3uploader OSx sdk（我修改了 IOS sdk）在我的应用程序中上传文件。对于我上传的任何文件（一个文件或一大块文件），我正在创建一个 NSOperation。此操作将调用 S3uploader sdk 来上传文件。当我的系统处于唤醒状态时，一切正常。但如果我进入睡眠模式并回来，NSOperation 似乎被挂起。它没有继续它的运作。我调试了一下，发现挂了

**-(S3UploadPartResponse *)uploadPart:(S3UploadPartRequest *)uploadPartRequest;**

功能。也许当我进入睡眠模式时，我正在调用这个函数，我不知道为什么它没有继续它的操作。我的应用程序中还有许多其他操作，例如计时器。当我从睡眠模式回来时，所有这些似乎都工作正常。所以我假设我的应用程序很清楚，系统已经从睡眠模式返回。

有人遇到过这样的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:56:41.287

除非您的应用程序播放音频、使用 GPS、MFI 等，否则您的应用程序将只能在后台运行大约 10 分钟，然后才会终止。

为了确保它得到 10 分钟，你应该做这样的事情 -

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        // Clean up any unfinished task business by marking where you.
        // stopped or ending the task outright.
        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    // Start the long-running task and return immediately.
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // Do the work associated with the task, preferably in chunks.

        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    });
} 
```

你可以在[App States and Multitasking 阅读更多关于它的信息。](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# command-line - Microsoft Visual Studio 2012 非常小的命令行

> ID：12979307
> 
> 赞同：8
> 
> 时间：2012-10-19T17:22:36.487
> 
> 标签：command-line, build, visual-studio-2012, font-size

今天安装了Microsoft Visual Studio 2012，遇到一个问题，启动项目时命令行字体很小，无法阅读。不知道怎么设置才能正常？感谢您的意见。

操作系统：Windows 8 64bit 捷克语

![在此处输入图像描述](../Images/95ff3a970848a96213e837c85b301694.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T17:39:12.947

右键单击窗口顶部并选择“默认值”，编辑大小设置，保存并再次加载命令窗口

# c++ - 减小 GSL 库的文件大小

> ID：12979315
> 
> 赞同：7
> 
> 时间：2012-10-19T17:23:09.863
> 
> 标签：c++, math, gsl

有没有办法减少编译的 GSL 库的文件大小？

我可以只编译一些子库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:22:00.693

我可以想到这些方法来解决这个问题 -

*   一个非常简单但非常有效的方法是使用动态链接。将代码静态链接到您的库或可执行文件会使它们变得更大。[这个](https://stackoverflow.com/questions/140061/when-to-use-dynamic-vs-static-libraries)讨论可能会给你一个更清晰的画面。GSL 是作为动态库构建的，因此在大多数情况下，您自己的可执行文件中实际上只有很少的 GSL 目标文件。
*   `-s`使用编译器优化 - 在编译时使用and`-Os`标志剥离二进制文件（使用 GCC）或使用`strip --strip-all`

# python - 使用 Python 检查 PostgreSQL 表中是否存在列

> ID：12979316
> 
> 赞同：2
> 
> 时间：2012-10-19T17:23:16.787
> 
> 标签：python, postgresql

我搜索了很长时间的答案并做了以下事情：

(1)

```
query = "SELECT COUNT(*) FROM %s WHERE user_name = %s" % (table_name, username)
result = conn.query(query).result()[0][0]
if result == 0:
    (do something) 
```

(2)

```
query = "SELECT 1 FROM %s WHERE user_name = %s" %(table_name, username)
result = conn.query(query).result()[0][0]
if result == ' ':
    (do something) 
```

(3)

```
query = "SELECT EXISTS (SELECT 1 FROM %s WHERE user_name = %s)" %(table_name, username)
result = conn.query(query).result()[0][0]
if result == 't':
    (do something) 
```

但一切都不起作用......错误总是：

```
column "Tom" does not exist 
```

因为它真的不存在，我只想检查它是否存在。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:38:10.163

```
sql = """SELECT count(*)
         FROM information_schema.columns
         WHERE table_name = '%s'
         AND column_name = '%s'
      """ % (thetable,thecolumn) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:38:17.643

你没有引用你的字符串。

你的查询看起来像这样，一旦它到达 PostgreSQL：

```
SELECT COUNT(*) FROM Table WHERE user_name = Tom 
```

`user_name`它将列与不存在的列进行比较`Tom`。

你想要的是这样的查询：

```
SELECT COUNT(*) FROM Table WHERE user_name = 'Tom' 
```

要做到这一点，您应该使用参数化语句，以避免任何 SQL 注入的可能性。使用 DBAPI 模块，它很简单：

```
cursor = conn.cursor()
cursor.execute('SELECT COUNT(*) FROM Table WHERE user_name = %s', user_name) 
```

如果您还需要动态表名，那么您必须像这样构造它：

```
cursor = conn.cursor()
query = 'SELECT COUNT(*) FROM %s WHERE user_name = %%s' % table_name
cursor.execute(query, user_name) 
```

但是您需要绝对确定表名是有效的。任何可以控制该变量的人都可以对您的数据库做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:27:11.060

永远记住：[EAFP](http://docs.python.org/glossary.html#term-eafp)

```
try:
   result = conn.query(query).result()
except ProgrammingError:  # Edumacated guess based on the documentation
   # however untested so psycopg2 raises some other instead
   pass # or do_something_when_it_does_not_exist()
else:
   (do something) 
```

# xcode - 使用 Xcode 4.5.1 调试时 NSOpenPanel 崩溃

> ID：12979323
> 
> 赞同：2
> 
> 时间：2012-10-19T17:23:45.647
> 
> 标签：xcode, osx-mountain-lion, xcode4.5, nsopenpanel

我有一个基于文档的应用程序。自从升级到 XCode 4.5.1（从 4.4）当我从 Xcode 调试应用程序时，NSOpenPanel 崩溃。当我直接启动程序时它不会崩溃。

我在两种情况下使用 NSOpenPanel：当用户从“文件”菜单中选择“打开”时（因为它是基于文档的应用程序，我自己的代码不涉及）和将一些数据导入到我的文档中（所以它得到由我自己的代码调用）。NSOpenPanel 在这两种情况下都会崩溃（对话框打开，但在我可以做任何事情之前，引发了异常）。

我做了干净，尝试将编译器从 Apple LLVM 切换到 LLVM GCC，将调试器从 LLDB 切换到 GDB 并返回，但没有任何变化。

这是我的导入代码：

```
long result;
NSArray *fileTypes = [NSArray arrayWithObjects: @"txt", @"csv", @"text",
                      NSFileTypeForHFSTypeCode( 'TEXT' ), nil];
NSOpenPanel *oPanel = [NSOpenPanel openPanel];

[oPanel setAllowsMultipleSelection:NO];
[oPanel setAllowedFileTypes:fileTypes];
[oPanel setMessage:@"Please select import file:"];

result = [oPanel runModal]; 
```

在 CodeSigning 检查期间它似乎在某处崩溃（我的应用程序没有代码签名）：

![堆栈跟踪](../Images/166e8fd4feb668495b67a010f7179fd4.png)

我必须建立一个新项目吗？任何帮助表示赞赏...

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T06:31:53.833

我找到了原因：我在“所有异常”上设置了一个断点。当我禁用它或选择“评估后自动继续”时，它可以工作。我猜它与App Sandbox有关。

# cocoa - 大规模的 CATiledLayer 工件

> ID：12979325
> 
> 赞同：0
> 
> 时间：2012-10-19T17:23:48.020
> 
> 标签：cocoa, catiledlayer

我正在使用 CATiledLayer 绘制地图图块，在缩放它时，我开始看到一些伪影，我猜这是由精度问题引起的。

我将我的 CATiledLayer 缩放到 2^18 (262'144x)，工件开始出现在大约 15'000x

我认为 CoreAnimation 会足够聪明来处理这些大尺度，但显然不是。

在我开始从头开始编写我的 tile 引擎实现来处理这个问题之前，我想知道您是否有任何建议。

这就是我设置图层的方式：

```
self.tiledLayer.tileSize = CGSizeMake(256, 256);
self.tiledLayer.levelsOfDetail = 1;
self.tiledLayer.levelsOfDetailBias = 10000; 
```

我的例子，绘制代码非常简单：

```
- (void)drawLayer:(CATiledLayer *)layer inContext:(CGContextRef)context
{
    CGRect rect = CGContextGetClipBoundingBox(context);
    CGContextSetFillColorWithColor(context, [NSColor colorWithCalibratedRed:((CGFloat)rand() / (CGFloat)RAND_MAX) green:((CGFloat)rand() / (CGFloat)RAND_MAX) blue:0 alpha:1].CGColor);
    CGContextFillRect(context, rect);
} 
```

这就是我在图层上设置比例的方式：

```
CGAffineTransform t = CGAffineTransformIdentity;

CGFloat scale = pow(2, self.zoomLevel); // self.zoomLevel ranges from 0 to 18
t = CGAffineTransformScale(t, scale, scale);

NSLog(@"%g", scale);

self.tiledLayer.affineTransform = t; 
```

**注意：**我发现工件只出现在图层的“远离原点”。如果我看原点附近的瓷砖，它们不会变形，如果我看远离原点（如果从中心截屏）它会变得更糟。

这是我看到的工件的示例：

![人工制品](../Images/9198817407686e1ffe0d9547bb8b0e1c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:41:54.483

好的，我刚刚在烹饪时找到了一个非常简单的解决方案，只需将比例取模为合理的值，然后循环并提示绘图代码。因此，例如，当比例达到 64 时，将其重置为 1 并将 64 分配给绘图代码，因此当比例为 2 时，绘图代码将在 128 处选择用于缩放的图块。

我明天会试试这个，看看我如何使用 CATiledLayer 缓存机制来确保流畅的体验。

**编辑：**我只花了几分钟来尝试这种方法，但实际上我遇到了缓存问题，因为当我将比例设置回预览值时，不会再次调用 drawInContext。我尝试调用 setNeedsDisplay，但它会破坏缩放的平滑度并使一切变得超级慢。

**编辑 2：**在修改了这个解决方案几个小时后，我无法获得平滑的缩放和平移。我尝试了一种简单的方法，在单个 NSView drawRect: 中绘制我的图块，它可以工作，但需要大量工作才能平滑和快速。所以我对这个问题持开放态度。

**编辑3：**我终于从头开始编写了自己的实现，没有这个错误。

# c# - 如何通过 .NET Web 服务将不同对象的列表作为 JSON 对象发回？

> ID：12979327
> 
> 赞同：0
> 
> 时间：2012-10-19T17:23:49.920
> 
> 标签：c#, .net, json

假设我有以下模型：

```
 AnimalModel   
    DogModel : AnimalModel
    CatModel : AnimalModel
    ElephantModel : AnimalModel 
```

我想在我的 Web 服务中将 List 作为 JSON 对象返回......我怎样才能做到最好？

请记住，通过上面的排序，ElephantModel 继承自 AnimalModel，但显然包含 AnimalModel 没有的不同类成员。（即TrunkSize），我认为这是导致错误的原因。

现在我有：

```
[WebGet(BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "?query={query}")]
List<AnimalModel> Animals (string query);

[WebGet(BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "?query={query}")]
ElephantModel Elephant (string query); 
```

如果我只是创建一个像 List 这样的函数并尝试将其发送回来，它似乎会出现问题。如果我先将它序列化为 JSON 字符串，它会传递该字符串——但随后我必须再次解析它。

但是，如果我只为 ElephantModel 或 CatModel 执行此操作，则效果很好！不需要序列化，另一端不需要解析......就像冠军一样工作。

当我尝试发送子模型继承的模型列表时，它会中断。但是，如果我可以将它序列化为适当的 JSON 字符串、发送它并接收该字符串以进行解析，那么我必须做一些更好的事情！

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:44:44.983

我建议使用[Json.NET](http://james.newtonking.com/pages/json-net.aspx)。序列化和反序列化是一件轻而易举的事。

```
//your object
Product product = new Product();
product.Name = "Apple";
product.Expiry = new DateTime(2008, 12, 28);
product.Price = 3.99M;
product.Sizes = new string[] { "Small", "Medium", "Large" };

//serialize it 
string json = JsonConvert.SerializeObject(product);

//will look like this :
//{
//  "Name": "Apple",
//  "Expiry": new Date(1230422400000),
//  "Price": 3.99,
//  "Sizes": [
//    "Small",
//    "Medium",
//    "Large"
//  ]
//}

//on the 'other end' you just deserialize it with one line of code!
Product deserializedProduct = JsonConvert.DeserializeObject<Product>(json); 
```

# c# - 将文件加载到富文本框中

> ID：12979331
> 
> 赞同：0
> 
> 时间：2012-10-19T17:24:05.240
> 
> 标签：c#

现在我的代码设置为当单击此按钮时，它会打开一个选择文件对话框并允许用户选择要打开的文件。

```
private void button1_Click(object sender, System.EventArgs e)
        {
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                richTextBox1.LoadFile(openFileDialog1.FileName, RichTextBoxStreamType.RichText);
            }
        } 
```

但是 - 我已经更改了我的程序，以便程序像这样简单地输出到默认文件 -

```
public void CreateInventory(CreateInventory createinventory)
{
    try
    {
        FileStream fileStream = new FileStream
        ("CreateInventory.bin", FileMode.Create,
        FileAccess.Write);
        IFormatter formatter = new BinaryFormatter();
        formatter.Serialize(fileStream, createinventory);
        fileStream.Close();
    }
    catch (ItemNotFoundException)
    {
        throw new ItemNotFoundException("Output not created - see logs");
    }
} 
```

如何切换按钮以直接加载该文件，而不是要求用户选择要加载的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:56:34.337

我不完全了解您的问题是什么，请告诉我更多关于您想要做什么的信息。

但我建议更改您的代码：

```
public void CreateInventory(CreateInventory createinventory)
    {
        try
        {
            using (FileStream fileStream = new FileStream("CreateInventory.bin", FileMode.Create, FileAccess.Write))
            {
                IFormatter formatter = new BinaryFormatter();
                formatter.Serialize(fileStream, createinventory);
            }
        }
        catch (Exception ex)
        {
            throw new ItemNotFoundException("Output not created - see logs", ex);
        }
    } 
```

1.  您不应该捕获异常并重新抛出相同的异常 - 您会丢失宝贵的信息（例如堆栈跟踪）。如果在调用者看来异常不正确，您可以将其包装起来，就像我在上面的代码中所做的那样。

2.  `IDisposable`将一次性（实现的类）类放在 using 语句中非常重要。

**为什么要使用“使用”？**

一次性类包含非托管资源（在本例中为文件句柄），它们不像托管资源那样被释放。当你完成它时，你应该释放它。`Dispose()`using 有另一个优点：即使范围结束或发生异常，它也会调用您。该文件被释放，其他进程可能可以访问该文件..

# javascript - 使用变量创建 json 对象

> ID：12979335
> 
> 赞同：24
> 
> 时间：2012-10-19T17:24:08.720
> 
> 标签：javascript, jquery, json, object

我正在尝试从我在表单中获取的变量创建一个 json 对象。

```
var firstName = $('#firstName').val();
var lastName  = $('#lastName').val();
var phone     = $('#phoneNumber').val();
var address   = $('#address').val(); 
```

到目前为止，我有下面的代码，但它不会验证或工作。我是新手，请帮忙！将 var 更改为此：

```
var jsonObject = 
                {
                 firstName: firstName, 
                 lastName: lastName,
                 phoneNumber:phoneNumber,
                 address:address
                } 
```

在 JSONlint 我收到此错误：

> 第 1 行的解析错误：varjsonObject={
> ^ Expecting '{', '['

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-20T20:36:14.093

如果您需要双引号 JSON 使用`JSON.stringify( object)`

```
var $items = $('#firstName, #lastName,#phoneNumber,#address ')
var obj = {}
$items.each(function() {
    obj[this.id] = $(this).val();
})

var json= JSON.stringify( obj); 
```

DEMO: [http://jsfiddle.net/vANKa/1](http://jsfiddle.net/vANKa/1)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-19T17:27:20.183

它被称为**Object Literal**

我不确定你想要你的结构是什么，但根据你上面的内容，你把值放在变量中试试这个。

```
var formObject =  {"formObject": [
                {"firstName": firstName, "lastName": lastName},
                {"phoneNumber": phone},
                {"address": address},
                ]} 
```

虽然这似乎更有意义（为什么你在上面的文字中有一个数组？）：

```
var formObject = {
   firstName: firstName
   ...
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-19T17:37:51.120

试试这个，看看如何从字符串创建对象。

```
var firstName = "xx";
var lastName  = "xy";
var phone     = "xz";
var adress    = "x1";
var obj = {"firstName":firstName, "lastName":lastName, "phone":phone, "address":adress};
console.log(obj); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-19T17:27:39.717

在执行类似`$('#lastName')`. 那是一个具有`id`“lastName”属性的元素。为什么要这样做？您想引用存储在局部变量中的值，完全不相关。试试这个（假设赋值`formObject`与变量声明在同一范围内） -

```
var formObject = {
    formObject: [
        {
            firstName:firstName,  // no need to quote variable names
            lastName:lastName
        },
        {
            phoneNumber:phoneNumber,
            address:address
        }
    ]
}; 
```

不过这看起来很奇怪：您正在创建一个对象“formObject”，其中包含一个名为“formObject”的成员，该成员包含一个对象数组。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-19T17:42:08.093

```
var formValues = {
    firstName: $('#firstName').val(),
    lastName: $('#lastName').val(),
    phone: $('#phoneNumber').val(),
    address: $('#address').val()
}; 
```

请注意，这将包含**解释对象字面量时**元素的值，而不是访问对象属性时的值。你需要为此编写一个吸气剂。

# sql - 别名行的动态查询

> ID：12979336
> 
> 赞同：2
> 
> 时间：2012-10-19T17:24:11.277
> 
> 标签：sql

```
SELECT
--DISTINCT
organizations.Name,users.FName, users.LName, UserTypes.Name, users.Email, Users.id,
(SELECT COUNT(MessageId)) As MsgsReceived,
(SELECT COUNT(MessageID)
WHERE Messages.Urgency = 1) AS LowMsgsReceived,
(SELECT COUNT(MessageID)
WHERE Messages.Urgency = 2) AS MedMsgsReceived,
(SELECT COUNT(MessageID)
WHERE Messages.Urgency = 3) AS HighMsgsReceived
FROM Users
INNER JOIN Recipients ON
Users.ID = Recipients.UserId
INNER JOIN Messages ON
Messages.ID = Recipients.MessageID
INNER JOIN UserTypes ON
Users.UserTypeID = UserTypes.ID
INNER JOIN Organizations ON
Users.OrganizationId = Organizations.Id
GROUP BY organizations.Name,users.FName, users.LName, UserTypes.Name, users.Email, Users.id, Messages.Urgency
ORDER BY Users.FName 
```

计数给了我收到的消息级别的错误结果。下面的查询给了我正确的计数，但有些行我不想在上面显示 null，而是显示 0，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:12:00.167

你也可以试试这个：

```
SELECT      --DISTINCT
            organizations.Name
            , users.FName
            , users.LName
            , UserTypes.Name
            , users.Email
            , Users.id
            , COUNT(MessageId) As MsgsReceived
            , SUM(CASE WHEN Messages.Urgency = 1 THEN 1 ELSE 0 END) AS LowMsgsReceived
            , SUM(CASE WHEN Messages.Urgency = 2 THEN 1 ELSE 0 END) AS MedMsgsReceived
            , SUM(CASE WHEN Messages.Urgency = 3 THEN 1 ELSE 0 END) AS HighMsgsReceived
FROM        Users
            INNER JOIN Recipients
                ON Users.ID = Recipients.UserId
            INNER JOIN Messages
                ON Messages.ID = Recipients.MessageID
            INNER JOIN UserTypes
                ON Users.UserTypeID = UserTypes.ID
            INNER JOIN Organizations
                ON Users.OrganizationId = Organizations.Id
GROUP BY    organizations.Name
            ,users.FName
            , users.LName
            , UserTypes.Name
            , users.Email
            , Users.id
            , Messages.Urgency
ORDER BY    Users.FName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:31:08.827

尝试这个

```
 Select u.fname, u.lName, u.Id,
        Count(m.Id) messagesRecvd,
        Sum(Case m.Urgency When 1 Then 1 End) LowMsgsRecvd,
        Sum(Case m.Urgency When 2 Then 1 End) MedMsgsRecvd,
        Sum(Case m.Urgency When 3 Then 1 End) HighMsgsRecvd
     From users u
        Left Join (Messages m Join Recipients r
                       On r.MessageId = m.Id)
            On r.UserId = u.Id
     Group By u.fname, u.lName, u.Id
     Order by u.fName 
```

# wpf - wpf 从派生控件派生

> ID：12979337
> 
> 赞同：2
> 
> 时间：2012-10-19T17:24:15.707
> 
> 标签：wpf, xaml, c#-4.0, user-controls, derived-class

我想从派生的用户控件派生一个控件，但 xaml 解决它时遇到问题。但是，首先是简单的场景。我有一个库 MyControls.dll。在那，我有一个基于 .cs 文件中的“UserControl”的控件，例如

```
public class MyUserControl : UserControl { ... } 
```

没问题。现在，我想创建一个由此派生的第二个（视觉）控件......所以，我在同一个 MyControls.dll 库中分别创建了一个名为 NewFromMyUserControl.xaml.cs 和 NewFromMyUserControl.cs 的新 UserControl，例如

```
public partial class NewFromMyUserControl : MyUserControl { ... } 
```

现在，在 Xaml 中，我...

```
<mylib:MyUserControl x:Class="MyControls.SubFolder1.NewFromMyUserControl"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mylib ="clr-namespace:MyControls" (blah blah) />
</mylib:MyUserControl> 
```

这没问题。为简单起见，“MyUserControl”或“NewFromMyUserControl”类中没有实际代码......只是测试派生实现。

现在，问题。我有另一个库“MyBaselineControls.dll”，其中包含我想要从中派生的实际用户控件......例如

```
public class MyBaselineUserControl : UserControl { ... } 
```

现在，我想将“MyUserControl”更改为从另一个派生而来，例如

```
from
    public class MyUserControl : UserControl { ... }
to
    using MyBaselineControls;
    public class MyUserControl : MyBaselineUserControl { ... } 
```

一旦这一行发生变化，编译器就会失败说明......

错误 2“MyControls.MyUserControl”不能是 XAML 文件的根，因为它是使用 XAML 定义的。第 1 行位置 19....等等等等

是否存在从另一个库派生的问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T18:09:30.197

不能从具有 XAML 定义的用户控件派生。只要您不在基类中定义 XAML，就可以了。可以在[此处](http://support.microsoft.com/kb/957231)找到有关您的错误的具体信息。

解决此问题的一种方法是派生自（或派生自is not的`Control`另一个类）并为您的基控件和派生控件定义控件模板。[本页](http://msdn.microsoft.com/en-us/library/ms745025.aspx)准确解释了从or继承时可以做什么，以及在决定要从哪个派生时应考虑哪些事项。`Control``UserControl``Control``UserControl`

* * *

**编辑**

由于您说两者`MyBaselineUserControl`都`MyUserControl`没有定义任何 XAML，所以事情应该可以工作。我自己试过了，没有任何问题。

我建议您确保您的基本用户控件实际上是在没有 XAML 的情况下创建的，即它们应该是使用**“添加 --> 类”**而不是“添加 --> 用户控件”创建的。

# ruby-on-rails - 如何找出现有 Rails 应用程序基于哪个 Rails 版本？

> ID：12979343
> 
> 赞同：41
> 
> 时间：2012-10-19T17:24:40.590
> 
> 标签：ruby-on-rails

一般来说，我的问题是标题中的问题：

如何找出现有 Rails 应用程序基于哪个 Rails 版本？

更具体地说，对于我的目的，我想知道在没有 gemfile 的情况下如何找出（我对 rails 比较陌生，并且习惯于在 gemfile 中看到带有所有 rails 3 应用程序的 rails 版本，但是我不确定旧版本。）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-05-04T18:06:37.963

使用命令：`rake about`. 此命令将输出以下信息以及更多信息（因此省略号：

```
About your application's environment
Rails version             4.2.0
Ruby version              2.2.2-p95 (x86_64-darwin14) 
RubyGems version          2.4.6
... 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-19T17:28:34.007

`rake gems`将打印出已安装、冻结的 gem、依赖项和版本等。

如果您使用的是 bundler，那么您可以使用它`bundle show`来列出您的应用程序正在使用的所有 gem。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-19T17:53:18.610

在我的项目`rake gems`中不显示 rails 版本，但它显示在`environment.rb`文件顶部：

```
RAILS_GEM_VERSION = '2.3.2' unless defined? RAILS_GEM_VERSION 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-05T20:51:31.457

执行这个命令

```
bundle show rails 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-06T15:49:16.763

通过打开`rails console`（例如，如果您在运行应用程序的服务器上），您可以致电`Rails.version`或`Rails.gem_version`获取简短信息或`Rails::Info`更全面地了解您的环境。

来源：[SO#59255712](https://stackoverflow.com/questions/59255712/rails-console-or-irb-find-out-the-rails-version-of-the-current-environment?noredirect=1&lq=1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-31T00:02:40.780

如果您正在使用`bundler`，则比`bundle show rails`is`bundle info rails`或`bundle info [gem-name-here]`. 这将打印版本、gem 用途摘要、gem 项目的链接（如果存在）以及 gem 的本地路径。超级方便。

（`bundle show [gem-name-here]`已弃用。）

# wpf - 在保存更改之前检索实体记录

> ID：12979344
> 
> 赞同：0
> 
> 时间：2012-10-19T17:24:43.540
> 
> 标签：wpf, linq, entity-framework

我只是无法在任何地方找到答案，我希望有人可以帮助我。我是 WPF 和实体框架的新手，所以可能做错了。

我遇到了一种情况，我正在创建新记录并将它们添加到实体集合中。我不想对其执行 SaveChanges() 以允许用户完成他们想做的所有事情，然后在离开表单之前进行最终保存。我的问题是，在将记录添加到实体集合后，我无法将它们检索出来以显示“直到”他们在实体上运行了 SaveChanges()。

这基本上是一个使用两个 DataGrid 的主子显示，但主网格源是一个正在构建的 List<>，因为需要将表中的一个字段转换为对用户更友好的显示。这一切都来自一个表，我只是根据 3 个字段（作为主）对数据进行分组，然后将子网格显示为该分组的详细信息。

此操作是“复制”操作，在此操作中，我使用现有的 DataGrid 显示数据并让用户将数据复制到“新”主组。我正在使用以下内容来创建这个新的记录组。

```
 RateGroupRow rgr = new RateGroupRow();
            rgr.StaffRole = rg.SelectedStaffRole;
            rgr.Department = rg.SelectedDepartment;
            rgr.PlanYear = rg.SelectedPlanYear;
            _rateGroupQuery.Add(rgr);

            foreach (var item in dgRateValues.Items)
            {
                if (item.GetType() == typeof(CommissionRate))
                {
                    CommissionRate cr = (CommissionRate)item;
                    CommissionRate newcr = new CommissionRate();
                    newcr.StaffRole = Common.StaffTextToStaffType(rgr.StaffRole);
                    newcr.Department = rgr.Department;
                    newcr.PlanYear = rgr.PlanYear;
                    newcr.Low = cr.Low;
                    newcr.High = cr.High;
                    newcr.Rate = cr.Rate;
                    Common.CommissionsEntities.CommissionRates.AddObject(newcr);
                }
            }
            //TODO:  Don't want to do this SaveChanges here but for now that's the only way I can get these new records to be displayed in the data selection.
            //Common.CommissionsEntities.SaveChanges();

            dgRateGroups.ItemsSource = null;
            dgRateGroups.ItemsSource = _rateGroupQuery;
            dgRateGroups.SelectedIndex = dgRateGroups.Items.Count - 2; 
```

将主记录添加到 _rateGroupQuery 后，DataGrid (dgRateGroups) 选择 SelectionChanged 查询数据的行以填充详细信息 DataGrid：

```
 dgRateValues.ItemsSource = null;
    _CurrentSelectedStaffRole = rateGroupRow.StaffRole;
    _CurrentSelectedDepartment = rateGroupRow.Department;
    _CurrentSelectedPlanYear = rateGroupRow.PlanYear;
    string StaffNameType = Common.StaffTextToStaffType(_CurrentSelectedStaffRole);

    var CommissionRatesItems =
        from cr in Common.CommissionsEntities.CommissionRates
        where cr.StaffRole == StaffNameType &&
              cr.Department == _CurrentSelectedDepartment &&
              cr.PlanYear == _CurrentSelectedPlanYear
        orderby cr.Low
        select cr;
    ObjectQuery<CommissionRate> CommissionRatesQuery = CommissionRatesItems as ObjectQuery<CommissionRate>;
    dgRateValues.ItemsSource = CommissionRatesQuery.Execute(MergeOption.AppendOnly); 
```

我没有从这个选择中得到任何记录。如果我在添加记录后调用“SaveChanges()”，那么一切正常。

那么有没有办法在这些新添加的记录被提交（SaveChanges）回数据库之前检索它们？

谢谢你，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:35:55.397

您可以取回它们，但不能在 ObjectQuery 中取回。相反，您必须通过 ObjectStateManager 并找到已添加的实体，然后从中构建您的绑定列表。这是一种痛苦，而且效果不佳。

幸运的是，如果您使用随 EF 4.1 及更高版本提供的 DbContext，那么数据绑定体验会好得多。DbContext 为每种类型的实体提供了一个 ObservableCollection，作为实体 DbSet 上的 .Local 属性。此集合具有连接到数据绑定的所有事件，并自动包括新添加的实体，同时也排除标记为删除的实体。更多信息和演练可以在这里找到：http: [//msdn.microsoft.com/en-us/data/jj574514.aspx](http://msdn.microsoft.com/en-us/data/jj574514.aspx)

# ant - 将 basedir 设置为父目录时，令牌未正确替换

> ID：12979346
> 
> 赞同：0
> 
> 时间：2012-10-19T17:25:00.917
> 
> 标签：ant

我有一个需要在父目录中运行的 Ant 任务。当我将 basedir 设置为父目录时，令牌没有被正确替换。

```
<project name="Flex Ant Tasks Build Script" default="compileFlex" basedir="../"> 

    <!-- load previously defined configuration properties file --> 
    <property file="local_build.properties" /> 

    <!-- delete and create the DEPLOY dir again --> 
    <target name="init">
        <delete dir="${DEPLOY_DIR}" /> 
        <mkdir dir="${DEPLOY_DIR}" /> 
    </target> 
```

和构建属性：

```
// this is the folder we want to publish the swf to 
DEPLOY_DIR = ${basedir}/output 
```

当 basedir 设置为“.”时 结果是：

```
[mkdir] Created dir: /Users/me/Documents/projects/MyProject/output 
```

当我将 basedir 设置为父级时，“../”结果是：

```
[mkdir] Created dir: /Users/me/Documents/projects/${DEPLOY_DIR} 
```

期望的结果是：

```
[mkdir] Created dir: /Users/me/Documents/projects/output 
```

**注意**：
构建脚本位于：

```
/Users/me/Documents/projects/MyProject/ 
```

因为我似乎无法在 Eclipse 项目之外导入任何 ANT 构建文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:43:23.413

问题是当我进入一个目录时，属性文件的路径变得无效。所以 ${DEPLOY_DIR} 永远不会被定义。如果我进入一个目录，我需要为其提供构建属性文件的正确路径：

```
<property file="MyProject/local_build.properties" /> 
```

# java - Java Swing 控件：最小化时非常小？

> ID：12979347
> 
> 赞同：0
> 
> 时间：2012-10-19T17:25:06.317
> 
> 标签：java, swing, layout, layout-manager, sizing

我在 GridLayout 中有一个带有一些控件的 Swing JFrame。

我的问题是当框架最小化时控件（文本字段）显得太小。我试图通过设置来避免这种情况：

```
setPreferredSize 
```

和

```
setSize 
```

但是，我必须最大化框架才能清楚地看到控件。

我该如何解决这个问题？

谢谢 ![在此处输入图像描述](../Images/589789c4a9826a8cb424c65accda8dec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:43:41.613

没有发布代码，但您可能没有构建具有指定列数的文本字段。`setPreferredSize`或者`setSize`不需要，试试这个：

```
JTextField tf = new JTextField(30) 
```

这将创建一个固定大小（列）30 的文本字段。这样您的文本字段将不会缩小或扩大。

# c# - C# Fluent Nhibernate Multitable Join on Or 条件

> ID：12979358
> 
> 赞同：1
> 
> 时间：2012-10-19T17:26:10.217
> 
> 标签：c#, nhibernate, join, fluent

我想用 CreateCriteria 执行这个查询，我不知道是否可以像这样在 JOIN 的 ON 部分添加 OR 子句：（TZ.CodigoPuesto1_id = CP.Id 或 TZ.CodigoPuesto2_id = CP.Id），这里是完整的查询：

```
SELECT TZ.* 
FROM ConfigLinea as CL 
    JOIN Puesto as P ON P.ConfigLinea_id = CL.Id 
    join CodigoPuesto as CP ON CP.Puesto_id = P.Id 
    Join Trazabilidad as TZ ON 
        (TZ.CodigoPuesto1_id = CP.Id or TZ.CodigoPuesto2_id = CP.Id) 
WHERE TZ.Codigo1 = '{0}' OR TZ.Codigo2 = '{1}' AND CL.Id = {2} 
```

到目前为止，我尝试了这个，但没有生成我需要的查询：

```
IList<Trazabilidad> result = session.CreateCriteria(typeof(Trazabilidad), "TZ")
     .CreateAlias("CodigoPuesto1", "CP1")
     .CreateAlias("CodigoPuesto2", "CP2")
     .Add(Expression.Disjunction() //esto es un OR
         .Add(Restrictions.Eq("TZ.Codigo1", codigo))
         .Add(Restrictions.Eq("TZ.Codigo2", codigo))
     )
     .Add(Expression.Disjunction() //esto es un OR
         .Add(Restrictions.Eq("P1.ConfigLinea", cl))
         .Add(Restrictions.Eq("P2.ConfigLinea", cl))
     )
     .List<Trazabilidad>(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:32:00.757

如果没有您的域模型，很难实际测试它，但我认为您会想要这样的东西。基本上，这个想法是使用 CreateAlias 的版本，它允许您将 ICriterion 作为参数传递。

```
IList<Trazabilidad> result = session.CreateCriteria(typeof(Trazabilidad), "TZ")
 .CreateAlias("CodigoPuesto1", "CP1")
 .CreateAlias("CodigoPuesto2", "CP2", JoinType.None, 
     Restrictions.Disjunction()
        .Add(Restrictions.EqProperty("TZ.Codigo1", "CP.Id"))
       .Add(Restrictions.EqProperty("TZ.Codigo2", "CP.Id"))
 )
 .Add(Expression.Disjunction() //esto es un OR
     .Add(Restrictions.Eq("P1.ConfigLinea", cl))
     .Add(Restrictions.Eq("P2.ConfigLinea", cl))
 )
 .List<Trazabilidad>() 
```

# .net - 使用 EditorFor 回发后的模型 null

> ID：12979363
> 
> 赞同：1
> 
> 时间：2012-10-19T17:26:44.740
> 
> 标签：.net, asp.net-mvc, razor

我正在使用编辑器模板，视图中的语法如下所示：

```
Html.EditorFor(m => m.Email) 
```

字符串编辑器模板如下所示：

```
@{
   var o = ViewData.ModelMetadata;
} 

@model string

@Html.TextBox(o.PropertyName,
              this.Model,
              new { @class="textinput-single-line", placeholder = o.Watermark }) 
```

问题是，在回发时，无论我在 TextBox 中输入什么内容，model.Email 都是空的。为什么文本框值没有正确绑定到模型？

**编辑：**这是 HTML 输出

```
 <fieldset>
          <legend>Log in Form</legend>
          <ol>
            <li>
              <div class="editor-for">
                <label class="label-single-line" for="Email_Email">Email</label>
                <input class="textinput-single-line" id="Email_Email" name="Email.Email" placeholder="" type="text" value=""/>
                <div class="clearboth"/>
              </div>
            </li>
            <li>
              <div class="editor-for">
                <span class="label-single-line"/>
                <input class="tickbox-single-line" id="RememberMe_RememberMe" name="RememberMe.RememberMe" type="checkbox" value="true"/>
                <input name="RememberMe.RememberMe" type="hidden" value="false"/>
                <label class="label-tickbox" for="RememberMe_RememberMe">Remember me?</label>
                <div class="clearboth"/>
              </div>
            </li>
          </ol>
          <input type="submit" value="Log in"/>
        </fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:28:23.913

在您的编辑器模板中使用`String.Empty`或。`""`视图引擎将为您找出正确的名称。

```
@Html.TextBox(String.Empty,
              this.Model,
              new { @class="textinput-single-line", placeholder = o.Watermark }) 
```

# javascript - 如何将脚本标签插入头部标签的顶部/开头？

> ID：12979366
> 
> 赞同：7
> 
> 时间：2012-10-19T17:26:57.410
> 
> 标签：javascript, append, native, appendchild

我想在头标签中的所有其余脚本之前插入一个脚本标签。我将如何使用本机 javascript 来做到这一点？

```
<head>
    //INSERT SCRIPT HERE
     <script type="text/javascript" src="common.js"></script>
     <script type="text/javascript" src="omni-controls.js"></script>
</head> 
```

当我使用它时，它只是附加在头标签中的所有标签之后。

```
document.getElementsByTagName("head")[0].appendChild(script); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T17:29:20.480

```
var head = document.getElementsByTagName("head")[0]

head.insertBefore(script, head.firstChild); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T17:29:36.067

获取 的`firstChild`，`<head>`然后使用[`insertBefore`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)。

这不会改变加载脚本的顺序（因为您将在解析其他脚本后将其插入到 DOM 中），因此这与仅使用`appendChild`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-16T20:30:26.700

```
document.head.insertBefore(script, document.head.firstElementChild); 
```

# sql - 从文本文件到 SQL Server 中的日期时间的日期数据

> ID：12979367
> 
> 赞同：1
> 
> 时间：2012-10-19T17:26:58.217
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我使用一个平面文件作为源，其中有几列属于日期格式，并且我已将所有数据放入预定义的 SQL Server 表中。

例子：-

平面文件

```
CaseNO|CaseType|Cate
1 |组织 |1\12\2012
2 |PGD |3\3\2011

```

在这里，当我用数据查看器检查它时，它看起来像 2012-12-1 00:00:00.0000000。但 OLE DB 连接会产生以下错误。

```
[OLE DB Destination [7546]] Error: There was an error with input column 
"CDate" (8799) on input "OLE DB Destination Input" (7559). The column status
returned was: "The value could not be converted because of a potential loss of data.". 
```

请指导我...感谢您的帮助。

343

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:15:20.693

看起来您已经将数据暂存到 sql server 表中。使用 SQL 命令而不是选择 OLEDB 源中的表。如下编写查询并映射到目的地。

SELECT Id,CaseType,convert(datetime,CDATE,101) as Cdate from

如果您直接使用平面文件加载到目标表。您应该使用派生列转换来解析它以提及格式 [dd/mm/yyyy] 并转换为数据时间。

谢谢， 戈达曼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:49:13.880

这可能是因为反斜杠。在转换之前尝试用“/”替换“\”。

这也可能是日期格式问题。根据排序规则等设置，“2012 年 1 月 2 日”可以解释为 1 月 2 日或 2 月 1 日。这不会导致问题，但是“2012 年 1 月 31 日”可能会导致类型转换错误错误排序规则，因为没有 31 个月。

# ios - iOS6屏幕旋转代码

> ID：12979372
> 
> 赞同：0
> 
> 时间：2012-10-19T17:27:14.583
> 
> 标签：ios, screen-rotation

我对这段代码有疑问：

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeLeft]; 
```

它在我的一个项目中运行良好，但在另一个项目中却不行。我在两个项目中都使用了相同的代码。唯一的区别是在第一个项目（它工作的地方）中，只有一个视图控制器，而在第二个项目中还有一个导航控制器。我确定这是问题所在，但我不知道为什么...

我花了很多很多时间来解决这个“轮换问题”，我太累了！

# c# - 请求 FocusNavigationDirection.Last 而不实际移动到那里

> ID：12979380
> 
> 赞同：0
> 
> 时间：2012-10-19T17:27:48.017
> 
> 标签：c#, .net, wpf, .net-4.0

这段代码：

```
this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Last)); 
```

将焦点移动到最后一个控件。

但是有没有办法只问最后一个控件是什么？没有实际搬到那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:31:16.533

您可以使用 Control.GetNextControl 方法，因为它以子控件的 Tab 顺序向前或向后提供下一个控件。

# java - Hadoop ArrayWritable 给了我一个 ClassCastException

> ID：12979387
> 
> 赞同：1
> 
> 时间：2012-10-19T17:28:46.673
> 
> 标签：java, hadoop, writable

**编辑：问题已解决**- 我有一个非常愚蠢的错误。

我有一个由 map、reduce、map 和 reduce 组成的 MapReduce 管道。我对第一个 reduce 使用 SequenceFileOutputFormat，对第二个 map 使用 SequenceFileInputFormat。我已经查看了它的用法，似乎我正在正确使用它。我放入其中的类型是 IntWritable 和 IntPairArrayWritable（使用来自 mahout 的 IntPairWritable 的自定义 ArrayWritable 子类）。问题是，在第二个映射中读取 IntPairArrayWritable 时，当我尝试获取单个 IntPairWritables 时，我得到了 ClassCastException。我不确定这是否是由于我使用 ArrayWritable 类的方式出错，还是我使用 SequenceFile{Input,Output}Format 有问题。我在这里和其他地方看了一堆例子，在我看来我做的都是对的，但我仍然遇到错误。有什么帮助吗？

具体情况：

这是我的第一个减速器类：

```
public static class WalkIdReducer extends MapReduceBase implements
        Reducer<IntWritable, IntPairWritable, IntWritable, IntPairArrayWritable> {

    @Override
    public void reduce(IntWritable walk_id, Iterator<IntPairWritable> values,
            OutputCollector<IntWritable, IntPairArrayWritable> output,
            Reporter reporter) throws IOException {
        ArrayList<IntPairWritable> value_array = new ArrayList<IntPairWritable>();
        while (values.hasNext()) {
            value_array.add(values.next());
        }
        output.collect(walk_id, IntPairArrayWritable.fromArrayList(value_array));
    }
} 
```

第二个映射器类：

```
public static class NodePairMapper extends MapReduceBase implements
        Mapper<IntWritable, IntPairArrayWritable, IntPairWritable, Text> {

    @Override
    public void map(IntWritable key, IntPairArrayWritable value,
            OutputCollector<IntPairWritable, Text> output,
            Reporter reporter) throws IOException {
        // The following line gives a ClassCastException;
        // See IntPairArrayWritable.toArrayList(), below
        ArrayList<IntPairWritable> values = value.toArrayList();
        // other unimportant stuff
    }
} 
```

第一个 MapReduce 的作业配置的相关部分：

```
 conf.setReducerClass(WalkIdReducer.class);
    conf.setOutputKeyClass(IntWritable.class);
    conf.setOutputValueClass(IntPairArrayWritable.class);
    conf.setOutputFormat(SequenceFileOutputFormat.class); 
```

对于第二个 MapReduce：

```
 conf.setInputFormat(SequenceFileInputFormat.class);
    conf.setMapperClass(NodePairMapper.class); 
```

最后，我的 ArrayWritable 子类：

```
public static class IntPairArrayWritable extends ArrayWritable
{
    // These two methods are what people say is all you need for
    // creating an ArrayWritable subclass
    public IntPairArrayWritable() {
        super(IntPairArrayWritable.class);
    }

    public IntPairArrayWritable(IntPairWritable[] values) {
        super(IntPairArrayWritable.class, values);
    }

    // Some convenience methods, so I can use ArrayLists in
    // other parts of the code
    public static IntPairArrayWritable fromArrayList(
            ArrayList<IntPairWritable> array) {
        IntPairArrayWritable writable = new IntPairArrayWritable();
        IntPairWritable[] values = new IntPairWritable[array.size()];
        for (int i=0; i<array.size(); i++) {
            values[i] = array.get(i);
        }
        writable.set(values);
        return writable;
    }

    public ArrayList<IntPairWritable> toArrayList() {
        ArrayList<IntPairWritable> array = new ArrayList<IntPairWritable>();
        for (Writable pair : this.get()) {
            // This line is what kills it.  I get a ClassCastException here.
            IntPairWritable int_pair = (IntPairWritable) pair;
            array.add(int_pair);
        }
        return array;
    }
} 
```

我得到的具体错误如下：

```
java.lang.ClassCastException: WalkAnalyzer$IntPairArrayWritable cannot be cast to org.apache.mahout.common.IntPairWritable
at WalkAnalyzer$IntPairArrayWritable.toArrayList(WalkAnalyzer.java:231)
at WalkAnalyzer$NodePairMapper.map(WalkAnalyzer.java:84)
at WalkAnalyzer$NodePairMapper.map(WalkAnalyzer.java:77)
at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:358)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:307)
at org.apache.hadoop.mapred.Child.main(Child.java:170) 
```

我很困惑为什么 ArrayWritable 的 get() 方法是一个实例`WalkAnalyzer$IntPairArrayWritable`- 我期待 get() 返回一个由 包含的元素组成的数组`IntPairArrayWritable`，如 API 中所述。

**编辑**

我发现了问题。这就是我为 IntPairArrayWritable 编写构造函数的方式。`super(IntPairArrayWritable.class);`我应该打电话的时候打电话`super(IntPairWritable.class);`。代码实际上应该如下所示：

```
public static class IntPairArrayWritable extends ArrayWritable
{
    // These two methods are what people say is all you need for
    // creating an ArrayWritable subclass
    public IntPairArrayWritable() {
        super(IntPairWritable.class);
    }

    public IntPairArrayWritable(IntPairWritable[] values) {
        super(IntPairWritable.class, values);
    }
} 
```

我想为 ArrayWritable 子类使用一个不太容易混淆的名称是个好主意，这样更容易发现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:18:20.013

检查 IntPairWritable 的导入语句。看起来您在 Mapper 中选择了错误的包名称，因此正在转换为不同的类，即使它的名称也是 IntPairWritable。

# android - 使用超级用户更改另一个应用程序的 SharedPreferences

> ID：12979388
> 
> 赞同：1
> 
> 时间：2012-10-19T17:28:48.627
> 
> 标签：android, sharedpreferences, su

我正在尝试使用超级用户来修改另一个应用程序的 SharedPreferences。

这是我的做法：

```
 Process suProcess = Runtime.getRuntime().exec("su");

        DataOutputStream os = new DataOutputStream(suProcess.getOutputStream());

        os.writeBytes("echo \"<?xml version='1.0' encoding='utf-8' standalone='yes' ?><map><string name='commentAuthorName'>toto</string></map>\" > /data/data/com.adobe.reader/shared_prefs/com.adobe.reader.preferences.xml' \n");

        os.writeBytes("exit\n");
        os.flush();
        os.close();

        suProcess.waitFor(); 
```

但是发生的事情是我的应用程序冻结了。

我做错了什么 ？

此外，是否有更好的方法来修改我不拥有的另一个应用程序的 SharedPreferences ？

提前致谢。

扎布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:37:38.123

尝试在preferences.xml 之后删除行尾的单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:03:26.647

好的，我现在知道为什么我的应用程序冻结了（准确地说，它冻结在：Process suProcess = Runtime.getRuntime().exec("su");）。

我正在开发的应用程序是 AIR for Android 的本机扩展。我正在从 Flash builder 启动我的应用程序，显然，这会导致冻结...

从设备正常启动应用程序时，一切正常。

# ruby-on-rails - Rails 服务器不会在配置/初始化程序中启动语法错误

> ID：12979389
> 
> 赞同：0
> 
> 时间：2012-10-19T17:28:50.087
> 
> 标签：ruby-on-rails

我刚刚开始使用 Rails，我已经第二次启动我的服务器，但我收到以下错误消息？我也没有修改 /config/initializers 中的任何 Ruby 文件。

```
george@ubuntu:~/Desktop/blog$ rails server
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on `http://0.0.0.0:3000`
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load': /home/george/Desktop/blog/config/initializers/session_store.rb:3: syntax error, unexpected ':', expecting $end (SyntaxError)
...sion_store :cookie_store, key: '_blog_session'
                              ^
    from /var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
    from /var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
    from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:588
    from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:587:in `each'
    from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:587
    from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
    from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
    from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `run_initializers'
    from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
    from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
    from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
    from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `send'
    from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/george/Desktop/blog/config/environment.rb:5
    from /home/george/Desktop/blog/config.ru:4:in `require'
    from /home/george/Desktop/blog/config.ru:4
    from /var/lib/gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /var/lib/gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /home/george/Desktop/blog/config.ru:1:in `new'
    from /home/george/Desktop/blog/config.ru:1 
```

config/initializers/session_store 的内容如下。

```
# Be sure to restart your server when you modify this file.

Blog::Application.config.session_store :cookie_store, key: '_blog_session'

# Use the database for sessions instead of the cookie-based default,
# which shouldn't be used to store highly confidential information
# (create the session table with "rails generate session_migration")
# Blog::Application.config.session_store :active_record_store 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:33:17.137

看起来您正在运行 ruby​​ 1.8 版。您需要升级到 1.9。

`key: 'value'`ruby 1.8 不支持哈希语法（它需要在哪里）`:key => 'value'`。

如果这不是一个选项，您可以手动更改所有这些哈希值，但请注意 Rails 对 ruby​​ 1.8 的支持即将耗尽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:39:28.420

试试 Blog::Application.config.session_store :cookie_store, :key => '_blog_session'

# sql - 在忽略大小写和特殊字符的两列中查找可能的重复项

> ID：12979390
> 
> 赞同：7
> 
> 时间：2012-10-19T17:28:52.947
> 
> 标签：sql, postgresql, duplicates, pattern-matching, case-insensitive

### 询问

```
SELECT COUNT(*), name, number
FROM   tbl
GROUP  BY name, number
HAVING COUNT(*) > 1 
```

它有时无法找到小写和大写之间的重复项。
例如：`sunny`并且`Sunny`不要显示为重复项。
那么如何在 PostgreSQL 中为两列找到所有可能的重复项。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-19T17:36:25.693

### [`lower()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-SQL)/[`upper()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-SQL)

使用其中之一将字符折叠为小写或大写。特殊字符不受影响：

```
SELECT count(*), lower(name), number
FROM   tbl
GROUP  BY lower(name), number
HAVING count(*) > 1; 
```

### [`unaccent()`](https://www.postgresql.org/docs/current/unaccent.html#id-1.11.7.52.8)

如果你真的想忽略变音符号，就像你的评论暗示的那样，安装附加模块[`unaccent`](https://www.postgresql.org/docs/current/unaccent.html)，它提供了一个删除重音的文本搜索字典以及通用功能`unaccent()`：

```
CREATE EXTENSION unaccent; 
```

使它非常简单：

```
SELECT lower(unaccent('Büßercafé')); 
```

结果：

```
busercafe 
```

这不会去除非字母。添加`regexp_replace()`像@Craig提到的那样：

```
SELECT lower(unaccent(regexp_replace('$s^o&f!t Büßercafé', '\W', '', 'g') )); 
```

结果：

```
softbusercafe 
```

您甚至可以在此基础上构建功能索引：

*   [PostgreSQL 是否支持“不区分重音”排序规则？](https://stackoverflow.com/questions/11005036/does-postgresql-support-accent-insensitive-collations/11007216#11007216)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T17:36:38.780

默认情况下，PostgreSQL 区分大小写。您可以通过将所有值转换为单个大小写来强制它在搜索期间不区分大小写：

```
SELECT COUNT(*), lower(name), number FROM TABLE 
GROUP BY lower(name), number HAVING COUNT(*) > 1 
```

*   **注意**：这还没有在 Postgres 中测试过

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:08:01.863

（从海报澄清后更新的答案）：“不重音”或剥离重音（dicratics）的想法通常是虚假的。`résumé`如果您正在匹配数据以找出是否有误入歧途的用户或应用程序，这没关系`resume`，但是将一个更改为另一个是完全错误的，因为它们是不同的词。即使那样，它也只是一种工作，并且应该与字符串相似性匹配系统（如[trigrams](http://www.postgresql.org/docs/current/static/pgtrgm.html)或[Levenshtein distances](http://www.postgresql.org/docs/current/static/fuzzystrmatch.html) ）结合使用。

“非重音”的概念假定任何重音字符都具有一个有效的等效非重音字符，或者至少任何给定的重音字符在单词的 ascii-ized 表示中最多被一个非重音字符替换。这根本不是真的。在一种语言中`ö`可能是“u”音，而在另一种语言中可能是长“oo”，而“ascii-ized”拼写约定可能反映了这一点。因此，在语言中，虚构的虚拟词“Tapö”的正确“非重音”可能是“Tapu”，而在另一种情况下，这个虚构的词可能被 ascii-ized 为“Tapoo”。在这两种情况下，“Tapo”的“非重音”形式都不会与人们在强制使用 ascii 字符集时实际编写的内容相匹配。

你可以用连字[的英文看到这个](http://en.wikipedia.org/wiki/English_terms_with_diacritical_marks)[`dæmon`](http://en.wikipedia.org/wiki/Daemon_%28disambiguation%29)，其中单词是 ascii-ized `daemon`。如果你去掉连字，你会得到`dmon`which would not match `daemon`，常见的拼写。这同样适用于`æther`它通常被asciiized to `aether`or `ether`。您也可以使用[ß](http://en.wikipedia.org/wiki/Typographic_ligature#German_.C3.9F)在德语中看到这一点，通常“扩展”为`ss`。

## 如果您*必须*尝试“取消重音”、“规范化”重音或“剥离”重音：

您可以使用字符类正则表达式去除除指定字符集之外的所有字符。在这种情况下，我们使用转义符[（根据手册](http://www.postgresql.org/docs/current/static/functions-matching.html)`\W`中字符类的简写）来排除“符号”，但不排除重音字符：`[^[:alnum:]_]`

```
regress=# SELECT regexp_replace(lower(x),'\W','','g') 
          FROM ( VALUES ('$s^o&f!t'),('Café') ) vals(x);
 regexp_replace 
----------------
 soft
 café
(2 rows) 
```

如果您也想过滤掉重音字符，您可以定义自己的字符类：

```
regress=# SELECT regexp_replace(lower(x),'[^a-z0-9]','','g')
          FROM ( VALUES ('$s^o&f!t'),('Café') ) vals(x);
 regexp_replace 
----------------
 soft
 caf
(2 rows) 
```

如果您实际上打算*用*一些重音字符替换类似的非重音字符，则可以`translate`按照[此 wiki 文章](https://wiki.postgresql.org/wiki/Strip_accents_from_strings,_and_output_in_lowercase)使用：

```
regress=# SELECT translate(
        lower(x),
        'âãäåāăąÁÂÃÄÅĀĂĄèééêëēĕėęěĒĔĖĘĚìíîïìĩīĭÌÍÎÏÌĨĪĬóôõöōŏőÒÓÔÕÖŌŎŐùúûüũūŭůÙÚÛÜŨŪŬŮ',
        'aaaaaaaaaaaaaaaeeeeeeeeeeeeeeeiiiiiiiiiiiiiiiiooooooooooooooouuuuuuuuuuuuuuuu'
    )
    FROM ( VALUES ('$s^o&f!t'),('Café') ) vals(x);

 translate 
-----------
 $s^o&f!t
 cafe
(2 rows) 
```

# styles - PHPexcel 无法从 xls 读取样式

> ID：12979394
> 
> 赞同：2
> 
> 时间：2012-10-19T17:29:19.607
> 
> 标签：styles, phpexcel

我无法通过 PHPexcel 从 xls 读取样式。我经常浏览解决方案，但到处都在写写 xls 的解决方案，但我喜欢阅读。我特别喜欢删除线，但它既不能读取这个也不能读取任何其他样式信息。我的代码如下，它可以正确读取所有数据，仅此而已。我确保在 xls 中设置文本样式。

```
require_once 'PHPExcel.php';
$filepath = "path/to/your/xls/file.xls";
$inputFileType = PHPExcel_IOFactory::identify($filepath);

$objReader = PHPExcel_IOFactory::createReader($inputFileType);
$objPHPExcel = $objReader->load($filepath);

$total_sheets = $objPHPExcel->getSheetCount();
$allSheetName = $objPHPExcel->getSheetNames(); 
$objWorksheet = $objPHPExcel->setActiveSheetIndex(0) ;
$highestRow = $objWorksheet->getHighestRow();
$highestColumn = $objWorksheet->getHighestColumn();
$highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn);

$headingsArray = $objWorksheet->rangeToArray('A1:' . $highestColumn . '1', null, true, true, true);
$headingsArray = $headingsArray[1];

print_r( $objWorksheet->toArray() ); 
```

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:32:00.267

PHPExcel 完全能够从 xls 文件中读取样式：您是否真的尝试过从单元格中获取样式详细信息，因为您的代码没有显示任何测试来检查样式是否已被读取？

```
$objWorksheet->toArray() 
```

从单元格中读取内容作为简单的 PHP 标量值。

要确定单元格的样式，您需要阅读该单元格的样式详细信息。

例如

```
$cellHasStrikeThrough = $objPHPExcel->getActiveSheet()->getStyle('B2')
    ->getFont()->getStrikethrough(); 
```

API 文档显示了用于读取样式信息的所有详细信息，例如颜色、填充、字体、边框等

**编辑**

单元格的包含也可以是富文本，内容的不同部分具有不同的样式。如果您使用从单元格中检索富文本值

```
$objPHPExcel->getActiveSheet()->getCellValue('B2'); 
```

将返回一个富文本对象。然后可以遍历富文本对象的每个块（或运行）检查该块的样式

# javascript - 依次运行两个ajax请求（成功后才调用）

> ID：12979401
> 
> 赞同：0
> 
> 时间：2012-10-19T17:29:38.470
> 
> 标签：javascript, ajax

我有一个关于多个 ajax 调用的简单问题，按顺序执行每个调用。我有一个发布当前页面表单的按钮（它将表单值写入会话），然后我想在设置这些会话变量后调用另一个页面（GET）。

问题是，我在一个函数中运行这两个调用，如果第一篇文章没有及时完成，则会话值不会出现在其他所需的脚本上。

这是我的按钮的功能：

```
function generateFP() {
    $.post("test.php", $("#webcto_form").serialize());
    loadPage('getpage.php?page=fpreq','page_contents');
} 
```

还有我的 loadPage 函数：

```
function loadPage(filename,id){
    $("#page_contents").load(filename);
} 
```

是否可以将简写 ajax ($.post/.load) 与成功结合使用？我想在成功提交表单后更改我的 generateFP 以调用 loadPage 函数。

我看过标准的 $.ajax 文档，解释了如何构建成功函数，但还没有找到使用我正在使用的语法的任何信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:37:08.333

jQuery Post 方法允许成功处理程序（[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)）：

```
function generateFP() {
    $.post("test.php", $("#webcto_form").serialize(), function(){
        loadPage('getpage.php?page=fpreq','page_contents');
    });
} 
```

或者，您可以修改您的 test.php 脚本以从您的第二个请求中返回您所追求的信息：

```
function generateFP() {
    $.post("test.php", $("#webcto_form").serialize(), function(data){
        console.log(data);
    });
} 
```

`data`test.php 脚本的输出在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:37:56.303

这应该适合你。您将在成功事件处理函数中调用 loadPage 函数。

```
function generateFP() {
    $.post("test.php", $("#webcto_form").serialize(), function(data){
       //this is the success callback function
       //data parameter holds the response returned from the post if you need it.
       loadPage('getpage.php?page=fpreq','page_contents');
    });  
} 
```

# php - PHP数组未设置问题

> ID：12979403
> 
> 赞同：-4
> 
> 时间：2012-10-19T17:29:43.440
> 
> 标签：php, arrays

我正在寻找取消设置数组键的解决方案。我怎样才能在没有任何 php 通知的情况下让它工作？

谢谢

注意：未定义的偏移量：102 行 test1.php 中的 2099

```
$words = array('one','two','three','four','five','six','seven','0987');

foreach ($words as $key => $value){
    if (preg_match('/[0-9]{4,7}/',$value)){
    unset($words[$key]);
    }
}

$array_a = array(
array('surname'=>'a'),
array('surname'=>'b'),
array('surname'=>'c')
);

$array_b = $words ;

for ($i = 0; $i < count($array_b); $i++){
    if ( count( $array_a[$i % count($array_a)] ) = 1 ){ 
        echo '<pre>';
        echo $array_a[$i % count($array_a)]['surname'] . '    ' . $array_b[$i];
        echo '</pre>';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:49:34.270

有趣的！您需要使用本机函数[isset()](http://php.net/manual/en/function.isset.php)。尝试这样的事情：

```
$key = $i % count($array_a);
if(isset($array_a[$key]) && is_array($array_b)){
    for ($i = 0; $i < count($array_b); $i++){
        isset($array_a[$key]['post']){
              echo '<pre>';
              echo $array_a[$key]['post'];
              echo '</pre>';
        } else {
             echo 'Some message error!';
        }
    }

} else {
    echo 'Some message error!';
} 
```

# java - Android ImageButton 因背景中的图像而变得太大

> ID：12979405
> 
> 赞同：1
> 
> 时间：2012-10-19T17:29:57.827
> 
> 标签：java, android, imagebutton

我正在将图像动态加载到屏幕上的图像按钮。图像不会提前知道，并且大小不同。

有谁知道如何确保图像按钮的大小不受分配给它的任何图像的影响。最好拉伸图像以适合按钮。我尝试使用 android:scaleType="fitXY" 并将 ewidth 和 height 设置为硬值（不推荐）。无论我做什么，图像都决定了按钮的大小，反之亦然！帮助！

我尝试了以下组合。这些图像随机来自互联网搜索。

```
 <ImageButton
                        android:id="@+id/ImageButton1"
                        android:layout_height="93px"
                        android:src="@drawable/image1"
                        android:layout_width="93px"
                        android:background="93px" />
                    <ImageButton
                        android:id="@+id/ImageButton4"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/image1"
                        android:scaleType="fitXY" /> 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T17:39:00.990

不要设置每个 ImageButton 的大小，而是将按钮放在容器布局中并设置容器的大小。例如：

```
<LinearLayout
        android:id="@+id/container"
        android:layout_width="80dp"
        android:layout_height="80dp" >

        <ImageButton
            android:id="@+id/ImageButton1"
            android:src="@drawable/image1"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:scaleType="fitXY" />
</LinearLayout> 
```

这应该会强制您的图像按钮不大于它所在的容器的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:39:43.103

您拥有的位图大小不同。所有这些都可以转换为可能适合您的应用程序的 newHeight 和 newWidth。所以现在大小将保持不变。使用下面的代码使其具有合适的宽度和高度

```
Bitmap yourBitmap;
Bitmap resized = Bitmap.createScaledBitmap(yourBitmap, newWidth, newHeight, true); 
```

# visual-studio-2012 - 等待并继续

> ID：12979409
> 
> 赞同：1
> 
> 时间：2012-10-19T17:30:19.010
> 
> 标签：visual-studio-2012, .net-4.5

`System.Json`我正在从 NuGet试用（Beta 版）。此外，为了了解这些新事物`async`，`await`刚刚开始使用 Visual Studio 2012 进行修补。

想知道是否使用`ContinueWith`if`await`块直到整个事情完成？

例如，这是不是：

```
JsonValue json = await response.Content.ReadAsStringAsync().ContinueWith<JsonValue>(respTask => JsonValue.Parse(respTask.Result)); 
```

与以下相同：

```
 string respTask = await response.Content.ReadAsStringAsync();
        JsonValue json = await Task.Factory.StartNew<JsonValue>(() => JsonValue.Parse(respTask)); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T18:23:21.863

这些相似但不相同。

`ContinueWith`返回一个`Task`表示延续的。所以，举个例子：

```
JsonValue json = await response.Content.ReadAsStringAsync()
    .ContinueWith<JsonValue>(respTask => JsonValue.Parse(respTask.Result)); 
```

只考虑表达式：

```
 response.Content.ReadAsStringAsync()
    .ContinueWith<JsonValue>(respTask => JsonValue.Parse(respTask.Result)); 
```

此表达式的结果是`Task`表示由 安排的延续`ContinueWith`。

所以，当你`await`表达：

```
 await response.Content.ReadAsStringAsync()
    .ContinueWith<JsonValue>(respTask => JsonValue.Parse(respTask.Result)); 
```

您确实`await`正在`Task`返回 by `ContinueWith`，并且在继续完成`json`之前不会对变量进行赋值`ContinueWith`：

```
JsonValue json = await response.Content.ReadAsStringAsync()
    .ContinueWith<JsonValue>(respTask => JsonValue.Parse(respTask.Result)); 
```

* * *

一般来说，我`ContinueWith`在编写`async`代码时会避免。没啥*毛病*，就是有点低级，语法也比较别扭。

在你的情况下，我会做这样的事情：

```
var responseValue = await response.Content.ReadAsStringAsync();
var json = JsonValue.Parse(responseValue); 
```

如果这是数据访问层的一部分，我也会使用`ConfigureAwait(false)`它，但由于您`response.Content`直接访问，我假设您稍后在此方法中需要 ASP.NET 上下文。

由于您是`async`/新手`await`，您可能会发现我的[`async`/ `await`intro](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)很有帮助。

# windows - 在 Windows 上使用 GSL 和 MinGW

> ID：12979410
> 
> 赞同：1
> 
> 时间：2012-10-19T17:30:28.373
> 
> 标签：windows, g++, mingw, gsl

[如此处所述，](https://stackoverflow.com/questions/1529509/using-gsl-with-cygwin-g)我让 GSL 使用 CygWin 工作，但我想使用 MinGW 生成可执行文件。我下载了 GnuWin32，通过将 GnuWin32\include 的内容放入 MinGW\include 并为 lib 和 bin 目录执行相同操作，我摆脱了一些错误，但我仍然收到错误，

```
undefined reference to 'gsl_sf_bessel_J0' 
```

我试图运行的代码是，

```
#include <gsl\gsl_sf_bessel.h>
#include <stdio.h>

int main(void)
{
  double x = 5.0 ;
  double y = gsl_sf_bessel_J0( x ) ;
  printf( "J0(%g) = %.18e\n", x, y ) ;
  return 0 ;
} 
```

我从[这里](http://sourceware.org/ml/gsl-discuss/2003-q3/msg00268.html)了解到链接器产生了此错误消息，但我不确定如何处理此信息。我想我需要在编译命令中添加一些东西，但我不确定要添加什么。现在我正在尝试使用该命令进行编译，

```
g++ gsltest.cpp -o gsltest.exe 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:40:08.623

天哪，路易丝。我想到了。利用，

```
g++ gsltest.cpp -o gsltest.exe -lgsl -lm 
```

[使用这个](http://www.udel.edu/it/research/training/scientific_programming_I/Scientific-Programming-I-UNIX.pdf)关于科学编程的幻灯片可以找到更多信息。

# ruby-on-rails - Rails 中间件：将中间件添加到 config.ru 或 config.middleware 数组？

> ID：12979411
> 
> 赞同：5
> 
> 时间：2012-10-19T17:30:30.370
> 
> 标签：ruby-on-rails, rack

我想澄清 config.ru 文件以指定机架中间件，而不是使用 config.middleware 数组。

如果 config.ru 通常如下所示：

```
require ::File.expand_path('../config/environment',  __FILE__)
use Rack::Deflater
run TestApp::Application 
```

我是否正确地说当我运行 TestApp::Application 时，我进入了 Rails 内部中间件？也就是说，它是否开始了 config.middleware 中定义的中间件链？

那么在 Rails 应用程序之外指定中间件的有效用途是对 Rails 本身外部的请求（或响应）进行处理？那么在这个例子中 Deflator 在 Rails 应用程序中间件开始之前对请求起作用？

使用 config.middelware 的有效用途是指定更多特定于 rails 的中间件，这些中间件可以放置在该链中的任何位置？

另外，当机架应用程序开始时，应用程序是什么？（这被传递到机架应用程序的初始化中？）。我一直认为 app 是 rails app 本身，但似乎 rails app 只是链条中的另一个中间件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T22:41:22.627

rails 应用程序不是 Rails 中间件，而是 Rack 应用程序。它是中间件链的底部（由`run`而不是表示`use`）。

我不太确定 app.config.middleware 数组运行的顺序与您在 config.ru 文件中放置的任何内容的顺序，但我希望该`require ::File.expand_path('../config/environment', __FILE__)`行需要一个文件，该文件循环通过中间件数组并`use`调用所有这些都将它们添加到机架的列表中。我会在 config.middleware 数组中指定中间件，以确保将其放置在您想要的位置。

我认为“Rails-specific”和“rack”中间件之间也没有区别。这一切都在一个巨大的链条中运行，直到您使用 rails 应用程序。事实上，Rails 的很多功能都是中间件的形式（如果你在`rake middleware`命令行中输入，你可以看到整个列表）。

# asp.net - 水晶报告 asp.net 移出文本

> ID：12979415
> 
> 赞同：0
> 
> 时间：2012-10-19T17:30:57.970
> 
> 标签：asp.net, html, crystal-reports, crystal-reports-2010

我有带有水晶报表的winform应用程序。它渲染得很好（见下图）。今天，我尝试用我的报告创建一个 WEB 表单，我收到了移出文本（出售下面的左图）。帮我取悦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:39:17.423

似乎 Crystal 报表文件中的列设置具有不正确的设置（宽度、文本换行等）以使报表在不同的“模式”下看起来相同，您应该指定此设置，因为 WinForms 和 WebForms 中的报表查看器不同

# c# - 过度使用 Interlocked.exchange？

> ID：12979416
> 
> 赞同：1
> 
> 时间：2012-10-19T17:31:08.407
> 
> 标签：c#, multithreading, .net-4.0, lockless

我试图了解 Interlocked.Exchange 的正确用法，所以我正在实现一个简单的排序 LinkedList 与添加和删除功能。

如果这不是线程安全列表，显然要找到插入点，您将有类似下面的内容来找到插入新节点的正确点。

```
 public void Insert(int newValue)
    {
        var prev = _header;
        Node curr = _header.Next;

        while(curr != null && curr.value > newValue )
        {
            prev = curr;
            curr = curr.Next;
        }
        var newNode = new Node(newValue, curr);
        prev.Next = newNode;
    } 
```

以下是我对您必须如何为并发列表执行此操作的看法。是否有太多 Interlocked.Exchange 正在进行？没有这个，插入仍然是线程安全的吗？成百上千的联锁操作会导致性能下降吗？

```
 public void InsertAsync(int newValue)
    {
        var prev = _header;
        Node curr = new Node(0, null);
        Interlocked.Exchange(ref curr, _header.Next);

        while (curr != null && curr.value > newValue)
        {
            prev = Interlocked.Exchange(ref curr, curr.Next);
        }
        //need some locking around prev.next first, ensure not modified/deleted, etc..
        //not in the scope of this question.
        var newNode = new Node(newValue, prev.Next);
        prev.Next = newNode;
    } 
```

我知道，例如，curr = curr.next 是原子读取，但我可以确定特定线程将读取 curr.next 的最新值，而无需 Interlocked？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T17:38:57.283

使用`Interlocked`方法做两件事：

1.  它执行一些通常不是原子的操作，并使它们有效地原子化。在`Exchange`您执行以下操作的情况下：`var temp = first; first=second; return temp;`但没有在您执行此操作时任何一个变量被另一个线程修改的风险。
2.  它引入了内存屏障。编译器、运行时和/或硬件优化可能会导致不同的线程具有技术上共享内存中的值的本地“副本”（通常是缓存变量的结果）。这可能导致一个线程需要很长时间才能“看到”另一个线程中的写入结果。内存屏障基本上同步了同一变量的所有这些不同版本。

因此，专门针对您的代码。您的第二个解决方案实际上不是线程安全的。每个单独`Interlocked`的操作都是原子的，但是对各种`Interlocked`调用的任意数量的调用都不是原子的。鉴于您的方法正在执行的所有操作，您的关键部分实际上要大得多；您需要使用`lock`或其他类似的机制（即信号量或监视器）来限制对代码段的访问仅限于单个线程。在您的特定情况下，我想整个方法都是关键部分。如果你真的非常小心，你可能会拥有几个更小的关键块，但要确保没有可能的竞态条件将是非常困难的。

至于性能，好吧，因为它是代码不起作用，所以性能是无关紧要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T17:41:32.003

实现无锁链表要比这复杂得多。我强烈建议你不要这样做。只需使用普通的旧显示器即可。如果这只是为了利益，那么您需要对无锁算法进行一些研究。

为了更直接地回答您的问题，联锁操作的成本取决于变量争用的数量。在无争用场景（例如单线程）中，成本极低。随着并发访问数量的增加，成本也会增加。原因是联锁操作并不是真正的无锁操作。它只是使用硬件锁而不是软件锁。出于这个原因，无锁算法的性能通常不如您直观预期的那样好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T17:36:50.713

您只是在保护分配，但无论如何它们都是原子的。您应该检查 Exchanged 是否确实成功。

但这仍然不会使您的列表线程安全，并发线程可能会在插入点之前插入一个大于 newValue 的新值。我认为这份清单甚至可能最终被打破。

# java - 如何使用 SVN/GIT 查找 Java 类接口何时以及为何发生更改

> ID：12979418
> 
> 赞同：0
> 
> 时间：2012-10-19T17:31:22.133
> 
> 标签：java, eclipse, git, svn, eclipse-jdt

**一般问题：如何使用 SVN/Git 查找 Java 类接口何时以及为何发生更改**

我正在使用 Eclipse JDT Core，在我的一个项目中完全是类 SingleNameReference。为了克服错误，我想从版本 org.eclipse.jdt.core_3.4.2.v_883_R34x.jar 切换到 org.eclipse.jdt.core_3.7.1.v_B76_R37x.jar

问题是，有人破坏了这个版本之间的接口。我想知道它发生的时间、原因以及我的替代方案是什么。

**具体问题：当有人删除代码和消息时，如何在 Eclipse Git repo 中找到它已完成的原因？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:13:08.653

看看[这个页面](https://github.com/eclipse/eclipse.jdt.core/blame/master/org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/ast/SingleNameReference.java)，向你展示了该类的责备输出（从而指出了变化）。对于 Eclipse 源文件，您很有可能直接在其源的 github 镜像中找到此类信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:26:02.870

你有没有尝试过：

```
git blame filename 
```

它将显示修改给定文件名中每一行的作者。

# java - 使用查询语言与 Java 来确定信息

> ID：12979419
> 
> 赞同：0
> 
> 时间：2012-10-19T17:31:23.217
> 
> 标签：java, sql, database

我有一个用 Java 编写的应用程序，我在其中访问 SQL 数据库中的数据。在一些特定的场景中，我能够查询数据库以获取信息，或者我可以在 java 中编写代码，以根据范围内的对象获取我需要的数据。我的问题是，尽可能使用查询或编写java代码来实现所需的效率更高。也许一个特定的场景会有所帮助。

我有一个场景，我查询数据库以获取列表。之后，我编写了一些 JAVA 代码以从列表中仅选择其中一个特定对象。在这种情况下，我使用 java 来建立我需要的对象。

另一种方法是查询数据库并在我的查询中将两个表连接在一起，只返回一个需要的对象。在这种情况下，我将使用查询语言来建立我需要的对象。

任何提示或建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:35:39.763

这样想。`SQL queries are much closer to data`比java代码。此外java需要加载所有数据来执行过滤。**如果你能写出高效的 SQL，SQL 总是比 Java 好。**

在涉及大量计算和业务逻辑的场景中，Java 过滤更可取。与数据库相比，我个人更喜欢用 Java 编写复杂的业务逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:43:02.417

你的问题有一些变幻莫测，所以很难具体。

一般而言，过早优化不是可行的方法。您最好以最直接的方式编写代码，然后使用生成的信息来决定哪些改进是必要的。

## 假设 #1

SQL 查询的结果列表很大。在这种情况下，最好使用 SQL 来限制结果。

## 假设 #2

结果列表很小。可能不会对性能产生太大影响，但事后使用 Java 操作列表会使代码更加复杂。

## 假设 #3

上述任何一种情况，但基础数据不会经常更改，或者经常被请求。您可以缓存数据，在 Java 中制作副本并操作这些副本以对其进行排序、过滤等。在某些情况下可能会更快，但会导致代码更复杂。

## 假设 #4

结果列表不是很大，而是复杂且执行缓慢的查询的结果。也许缓存结果，当您需要数据的变体（过滤或排序）时，使用 Java 复制缓存列表并对列表副本进行排序和/或过滤。或者在数据库中创建一个物化视图并查询它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:35:35.113

查询数据库很快，因为数据库就是在这方面设计的。此外，您只会在您的 java 代码中获得所需的信息，这样您就不需要任何额外的内存来存储其他不可用的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T17:35:49.013

通常情况下，数据库处理查询比使用 Java 过滤列表更快。使用应用程序代码的唯一好时机是过滤要求太复杂以至于无法用查询语言表达（极不可能），或者最终必须多次查询数据库才能获得所需的内容。

这两个问题都可以通过坐下来专注于设计智能查询来解决，再次导致数据库胜出。

# wpf - 如何在单元格更新之前进行验证过程？

> ID：12979421
> 
> 赞同：0
> 
> 时间：2012-10-19T17:31:24.973
> 
> 标签：wpf, infragistics, xamdatagrid

我正在使用 xamdatagrid，想要有一列来删除记录，这是一个复选框。

当用户点击复选框时，会弹出一个询问确认的窗口。但是如果用户说不，数据不应该被更新......所以把逻辑放在 CellUpdating(EditModeStart/EditModeEnd)

但是找不到终止更新过程的方法，请大家帮忙~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:27:30.587

在 EditModeEnding 中，我可以设置 AcceptChanges=false 来终止更新

# ubuntu - Xampp：我无法从 localhost 访问 phpMyAdmin

> ID：12979423
> 
> 赞同：4
> 
> 时间：2012-10-19T17:31:29.297
> 
> 标签：ubuntu, phpmyadmin, xampp, localhost

我试图为家庭开发设置 Xampp。它安装正确，我可以访问 xampp 页面，如演示、安全、状态......甚至使用 phytin-gui 来启动和停止服务器。

但是，当使用“ [http://localhost/phpmyadmin](http://localhost/phpmyadmin) ”访问 phpMyAdmin 时，我得到下一个错误：

```
Access forbidden!

New XAMPP security concept:

Access to the requested directory is only available from the local network.

This setting can be configured in the file "httpd-xampp.conf". 
```

我检查了我的 httpd-xampp.conf 并且似乎是正确的。我试图将拒绝全部更改为允许全部但不起作用。

我的主机文件将 localhost 指向 127.0.0.1，这是访问所有 xampp 文件的预期目标。

我在 ubuntu 12.04 机器上运行 XAMPP 1.8.1

有同样问题的人吗？我失去了将近 2 小时的谷歌搜索，但我发现的所有结果是，当尝试从其他网络或机器访问服务器时会发生此错误。但对我来说，情况是我直接在服务器上工作，所以它假设我可以默认访问 phpMyAdmin。

我的 httpd-xampp.conf

```
#
# New XAMPP security concept
#
<LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
    Order deny,allow
    Deny from all
    Allow from ::1 127.0.0.0/8 \
        fc00::/7 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 \
        fe80::/10 169.254.0.0/16

    ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</LocationMatch> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T02:56:38.410

`/opt/lampp/etc/extra`如果您在 下安装了 XAMPP ，请转到目录`/opt`，然后编辑`httpd-xampp.conf`以添加`Require all granted`，如下所示：

```
# since XAMPP 1.4.3
<Directory "/opt/lampp/phpmyadmin">
    AllowOverride AuthConfig Limit
    Order allow,deny
    Allow from all
    Require all granted
</Directory> 
```

您可能必须通过运行重新启动 LAMPP 服务器`/opt/lampp/lampp restart`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-13T12:20:27.223

我也在 XAMPP 自己的论坛中发现了这个问题。提到了`Require all granted`答案，但这无条件地授予访问权限。该线程继续提供[更好的解决方案](http://www.apachefriends.org/f/viewtopic.php?p=202339#p202339)：

> 只需更新您的 httpd-xampp.conf。将结尾替换为：
> 
> ```
> #
> # New XAMPP security concept
> #
> <LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
>     <RequireAny>
>         Require ip ::1 127.0.0.0/8 \
>         fc00::/7 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 \
>         fe80::/10 169.254.0.0/16
>     </RequireAny>
>     ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
> </LocationMatch> 
> ```
> 
> 然后重启你的lampp： sudo /opt/lampp/lampp restart

参考：[http ://httpd.apache.org/docs/2.4/mod/mod_authz_core.html#require](http://httpd.apache.org/docs/2.4/mod/mod_authz_core.html#require)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T22:02:22.857

我通过创建一个新的虚拟主机来解决这个问题`phpmyadmin`

将以下内容附加到`C:/xampp/apache/conf/httpd.conf`：

```
NameVirtualHost phpmyadmin.local

<VirtualHost phpmyadmin.local>
  ServerName phpmyadmin.local
  DocumentRoot "C:/xampp/htdocs/phpmyadmin"
  <Directory "C:/xampp/htdocs/phpmyadmin">
    AllowOverride All
    Allow from All
  </Directory>
</VirtualHost> 
```

将 更改为`DocumentRoot/Directory`安装版本的路径`phpmyadmin`。

在文本编辑器中打开`C:\Windows\System32\drivers\etc\hosts`文件并添加以下行：

```
127.0.0.1     phpmyadmin.local 
```

然后保存主机文件并重新启动`xampp`。

[https://stackoverflow.com/a/16617319/2395363](https://stackoverflow.com/a/16617319/2395363)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T09:26:54.090

此答案适用于 XAMPP 1.8.2[PHP: 5.4.25]

只需在 Require local 下面的 Require local 之前加上 # 标记，重要的是，在 xampp 控制面板中停止并启动 Apache。就是这样，它肯定可以工作

```
<LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
       #Require local

    ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</LocationMatch> 
```

# javascript - 在 Rails 和 Backbone 上使用 mixpanel 实现复杂的跟踪

> ID：12979424
> 
> 赞同：4
> 
> 时间：2012-10-19T17:31:32.127
> 
> 标签：javascript, ruby-on-rails, backbone.js, tracking, mixpanel

我的客户希望在他们的 Rails 3.2 应用程序上设置一个复杂的 mixpanel 跟踪系统，其中包含大量的主干.js 功能。

我想将 mixpanel 功能抽象到某种模块中（而不是让调用散布在整个现有代码库中）。

要求之一是在成功操作之前不会触发 mixpanel 调用，因此我认为我不能将 mixpanel 调用附加到 DOM 元素。

我的另一个想法是在 javascript 中创建某种中介对象，以订阅需要跟踪的各种主干事件。但是，我需要跟踪的事件中只有大约一半在主干中，这让我觉得我根本不认为我可以在 js 中使用 mixpanel。

也许是一个听 Rails 模型的 lib 类？

有什么想法或建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T00:03:22.710

大约六个月前，我们遇到了同样的问题，并决定构建一个开源 JavaScript 库，将 Mixpanel 的功能抽象到我们使用的所有分析服务中，包括 KISSmetrics、Google Analytics、Chartbeat 等。

您可以在[http://segmentio.github.com/analytics.js查看](http://segmentio.github.com/analytics.js)

结果是一个简单的 API，您可以在其中在一行代码中调用 analytics.track() 或 analytics.identify()，并将数据发送到所有不同的提供者。

该库还具有analytics.trackLink() 和analytics.trackForm() 等辅助函数，可以更轻松地跟踪出站点击和表单提交，这通常会导致页面在事件发送之前重新加载。这些功能会引入轻微的延迟以让事件消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T19:01:14.733

您当然可以在[ActiveRecord 回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)或[Observer](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)中使用其中一个[Ruby 库](https://mixpanel.com/docs/integration-libraries/ruby)，使用用户 ID 将其与它们相关联。`identify()`

`success`另一种选择是通过客户端上的 AJAX 执行操作，然后在回调中触发 mixpanel 事件。如果您需要将它们发送到不同的页面，您可以设置`window.location`超时后。

# python - 数据库中的平均分数（Django）

> ID：12979425
> 
> 赞同：3
> 
> 时间：2012-10-19T17:31:56.987
> 
> 标签：python, django

我有`Result.objects.all()`大约 15 个对象的数据库。结果有一个名为 score 的字段，范围为 1-5。`q = Result.objecets.get(id=1)`因此，如果我 preform`q.score`是 2。找到所有 15 个对象的所有分数的平均值的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T17:33:13.180

您可以使用 django[聚合](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)函数来执行此操作；

```
# Average price across all objects.
>>> from django.db.models import Avg
>>> Result.objects.all().aggregate(Avg('score'))
{'score__avg': 34.35} 
```

# spring - Spring 中的多个 Dispatcher servlet 示例和配置

> ID：12979426
> 
> 赞同：1
> 
> 时间：2012-10-19T17:31:58.500
> 
> 标签：spring, model-view-controller

有人可以给我一个多调度 servlet 示例的链接吗？我正在尝试在单个 Spring MVC 中运行两个应用程序。我在 google 中检查了不同的示例，并在 web.xml 中编写了所有内容，编写了两个 *-servlet.xml 文件。我有不同的jsp页面。为应用程序指定不同的 url。但是仍然有一个应用程序没有运行？

任何简短的示例链接或任何人都可以告诉我在 Spring MVC 中编写两个调度程序 servlet 时所需的配置文件。

谢谢你山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:30:09.280

是否需要维护 2 个单独的 spring 配置文件取决于您。您可以只保留一个 spring 配置 xml，但为了“模块化”，最好有单独的配置文件。同样，我不太确定您在这里所说的 2 个应用程序是什么意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T15:56:29.310

你的 url 模式应该是：

```
<url-pattern>/project1/*</url-pattern> and <url-pattern>/project2/*</url-pattern> 
```

# android - 安卓APP登录网站。为什么这行不通？

> ID：12979429
> 
> 赞同：1
> 
> 时间：2012-10-19T17:32:02.173
> 
> 标签：android, http, post, android-intent, request

我正在使用登录/通过发出 POST 请求并使用 Intent 打开站点。该站点正在打开，但未登录。出了什么问题？

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://mysite.co/login.php");

    try {

        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("pass", "mypass"));
        nameValuePairs.add(new BasicNameValuePair("user", "myuser"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }

    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://mysite.com"));
    startActivity(browserIntent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:36:41.773

如果您期望打开浏览器时会登录，IMO 这是不可能的。

这是因为`httpclient`登录请求不会在您的应用程序和浏览器应用程序之间共享，因此无法传递您在登录时收到的 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:38:32.883

问题是您正在登录应用程序中的网站。因此，所有 cookie（显示您是否已登录）都会存储在响应中。

您发送新的意图，打开浏览器。但是，浏览器无权访问保存在您的回复中的这些 cookie。因此，当它尝试访问网站时，该网站没有获得 cookie，并认为您没有记录它。

我会说你应该删除这段代码的整个第一部分，只剩下这样的东西：

```
 Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://mysite.com/login.php?user=myuser&pass=mypass"));
    startActivity(browserIntent); 
```

这样，浏览器将发送身份验证信息并接收 cookie 作为响应，并将其用于任何后续通信。

# svn - SVN 删除 . 从版本控制

> ID：12979436
> 
> 赞同：0
> 
> 时间：2012-10-19T17:32:47.247
> 
> 标签：svn

我不小心添加了“。” 到版本控制，然后`svn delete --keep-local .`尝试将其脱离版本控制。这只会让事情变得更糟。我怎样才能：

1.  纠正这种情况并
2.  签入所有文件而不发出命令`svn ci . -m''`，这似乎添加了“。” 到版本控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:54:55.003

1.  `svn ignore .``.`从`check in`操作中排除
2.  `svn st`之前的真实变化`check in`

我希望它对你有帮助。

# c++ - 为什么 EXC_BAD_ACCESS 而不仅仅是一个例外？

> ID：12979442
> 
> 赞同：-1
> 
> 时间：2012-10-19T17:33:14.083
> 
> 标签：c++

> **可能重复：**
> [如何防止 C++ 中的崩溃](https://stackoverflow.com/questions/12978234/how-to-prevent-crash-in-c)

```
typedef struct {
    int val;
} valStruct;

main()
{
    try {
        valStruct *s = NULL;
        int v = s->val;       // bad 
    }
    catch (...) {}
} 
```

对 MacOS 来说相当新。在调试器下运行我得到一个 EXC_BAD_ACCESS 中断。不难猜测这意味着发生了错误的内存访问，但我没有得到 C++ 异常，并且在上面的代码中我的 catch 不会被调用。

这似乎是一件坏事，几乎使 C++ 异常处理变得无用。除非这只是一个调试的事情。如果我在发布模式下运行，或更改设置，这是否会作为例外处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T17:37:11.527

很快：没有。分段错误（以及其他一些常见的编程错误）不够“高级”，无法被 C++ 异常处理程序捕获，因此程序只会崩溃。解决方案：不要依赖 C++ 异常神奇地使您免于思考和编写好的代码。他们不是为了那个。在取消引用它们之前，您应该真正检查指针是否为非 NULL 和类似的东西。

# solr - 荧光笔没有突出显示查询分析器中匹配的内容

> ID：12979449
> 
> 赞同：0
> 
> 时间：2012-10-19T17:33:47.407
> 
> 标签：solr, highlighting

我试图索引的内容包含应该被索引和匹配的美元符号，例如，`$1`.

我已经设置了我的架构来索引美元符号，并且能够成功地将它与查询分析器匹配；搜索`$1`匹配项`$1`。

但是，荧光笔似乎无法识别美元符号。当我提交查询时`$1`，结果确实包含突出显示的结果，但突出显示如下`$<em>1</em>`；美元符号未突出显示。

如何确保荧光笔突出显示查询分析器工具中匹配的全部内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:37:53.453

确认！问题是，在调整了我的一个字段之后，我仍然突出显示了旧的、未调整的字段。Solr 似乎正在做我期望它现在做的事情。

# sql - 在 Oracle SELECT 中转置非聚合字段

> ID：12979452
> 
> 赞同：1
> 
> 时间：2012-10-19T17:33:56.367
> 
> 标签：sql, oracle, select, pivot

对于这样结构的表：

```
"Object Attribute" Table - Links objects with all of their attributes and values;
Object ID       Attribute ID    Attribute String Value  ...
1337            123             Example Object Title
1337            124             Example Object Type
1337            125             Example Object Description
1337            126             Example Object Author
0001            123             (null)
0001            124             SomeType
0001            125             This is an example record
0001            126             Jiman
0002            123             Bar
0002            124             BarType
0002            125             This is another
0002            126             Jiman 
```

编辑：属性 ID 具有以下映射：

```
Attribute ID    Attribute Name
123             Title
124             Type
125             Description
126             Author 
```

我将如何编写返回一组转置数据的 Oracle 查询，其中 Title 字段为 NULL？

示例输出：

```
ID      Title       Type        Description             Author
0001    (null)      FooType     This is an example...   Jiman 
```

PIVOT 可以用来转置非聚合值（即那些字符串属性）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:56:09.337

最简单的方法，假设您希望在查询中硬编码从属性 ID 到属性名称的映射，并且您在编译时知道结果中想要的元素数量，就像

```
SELECT *
  FROM (
    SELECT object_id,
           MAX( CASE WHEN attribute_id = 123 THEN attribute_string_value ELSE NULL END) title,
           MAX( CASE WHEN attribute_id = 124 THEN attribute_string_value ELSE NULL END) type,
           MAX( CASE WHEN attribute_id = 125 THEN attribute_string_value ELSE NULL END) description,
           MAX( CASE WHEN attribute_id = 126 THEN attribute_string_value ELSE NULL END) author
      FROM your_table_name
     GROUP BY object_id )
  WHERE title IS NULL 
```

如果只需要支持11g，也可以使用`PIVOT`operator。

# r - 将数值变量分类为组/箱/中断

> ID：12979456
> 
> 赞同：29
> 
> 时间：2012-10-19T17:34:16.957
> 
> 标签：r, binning, categorization, bins

我正在尝试将数字变量（年龄）分类为由间隔定义的组，因此它不会是连续的。我有这个代码：

```
data$agegrp(data$age >= 40 & data$age <= 49) <- 3
data$agegrp(data$age >= 30 & data$age <= 39) <- 2
data$agegrp(data$age >= 20 & data$age <= 29) <- 1 
```

上面的代码在生存包下不起作用。它给了我：

```
invalid function in complex assignment 
```

你能指出错误在哪里吗？`data`是我正在使用的数据框。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-19T17:40:19.900

我会`findInterval()`在这里使用：

首先，组成一些样本数据

```
set.seed(1)
ages <- floor(runif(20, min = 20, max = 50))
ages
# [1] 27 31 37 47 26 46 48 39 38 21 26 25 40 31 43 34 41 49 31 43 
```

用于`findInterval()`对“年龄”向量进行分类。

```
findInterval(ages, c(20, 30, 40))
# [1] 1 2 2 3 1 3 3 2 2 1 1 1 3 2 3 2 3 3 2 3 
```

或者，如评论中所建议的，在`cut()`这里也很有用：

```
cut(ages, breaks=c(20, 30, 40, 50), right = FALSE)
cut(ages, breaks=c(20, 30, 40, 50), right = FALSE, labels = FALSE) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-12-23T02:28:13.290

我们可以使用`dplyr`：

```
library(dplyr)

data <- data %>% mutate(agegroup = case_when(age >= 40  & age <= 49 ~ '3',
                                             age >= 30  & age <= 39 ~ '2',
                                             age >= 20  & age <= 29 ~ '1')) # end function 
```

与其他方法相比，`dplyr`更容易编写和解释。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-08-22T19:40:30.147

这个答案提供了两种使用`data.table`包解决问题的方法，这将大大提高处理速度。如果一个人正在处理大型数据集，这一点至关重要。

**1s 方法**：对先前答案的改编，但现在使用`data.table`+ 包括`labels`：

```
library(data.table)

agebreaks <- c(0,1,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,500)
agelabels <- c("0-1","1-4","5-9","10-14","15-19","20-24","25-29","30-34",
               "35-39","40-44","45-49","50-54","55-59","60-64","65-69",
               "70-74","75-79","80-84","85+")

setDT(data)[ , agegroups := cut(age, 
                                breaks = agebreaks, 
                                right = FALSE, 
                                labels = agelabels)] 
```

**第二种方法**：这是一种更冗长的方法，但它也更清楚地说明了每个年龄段的确切内容：

```
setDT(data)[age <1, agegroup := "0-1"]
data[age >0 & age <5, agegroup := "1-4"]
data[age >4 & age <10, agegroup := "5-9"]
data[age >9 & age <15, agegroup := "10-14"]
data[age >14 & age <20, agegroup := "15-19"]
data[age >19 & age <25, agegroup := "20-24"]
data[age >24 & age <30, agegroup := "25-29"]
data[age >29 & age <35, agegroup := "30-34"]
data[age >34 & age <40, agegroup := "35-39"]
data[age >39 & age <45, agegroup := "40-44"]
data[age >44 & age <50, agegroup := "45-49"]
data[age >49 & age <55, agegroup := "50-54"]
data[age >54 & age <60, agegroup := "55-59"]
data[age >59 & age <65, agegroup := "60-64"]
data[age >64 & age <70, agegroup := "65-69"]
data[age >69 & age <75, agegroup := "70-74"]
data[age >74 & age <80, agegroup := "75-79"]
data[age >79 & age <85, agegroup := "80-84"]
data[age >84, agegroup := "85+"] 
```

虽然这两种方法应该给出相同的结果，但出于两个原因，我更喜欢第一种。(a) 写起来更短，(2) 年龄组以正确的方式排序，这对于可视化数据至关重要。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-13T17:34:06.990

假设您的年龄存储在标记为 的数据框列中`age`。您的数据框是`df`，并且您想要一个`age_grouping`包含您的年龄所在的“桶”的新列。

在此示例中，假设您的年龄范围为 0 -> 100，并且您希望每 10 年对他们进行一次分组。以下代码将通过将这些间隔存储在新`age grouping`列中来完成此操作：

```
df$age_grouping <- cut(df$age, c(0:100, 10)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-22T15:48:57.263

```
myData$age_grp <- myData$age
myData$age_grp <- ifelse((myData$age>=10 & myData$age<=18) , 'minnor',myData$age_grp)
myData$age_grp <- ifelse((myData$age>18 & myData$age<=21) , 'junior',myData$age_grp)
myData$age_grp <- ifelse((myData$age>21 & myData$age<=25) , 'major_1',myData$age_grp)
myData$age_grp <- ifelse((myData$age>25 & myData$age<=30) , 'major_2',myData$age_grp)
myData$age_grp <- ifelse((myData$age>30 & myData$age<=40) , 'major_3',myData$age_grp)
myData$age_grp <- ifelse((myData$age>40 & myData$age<=55) , 'major_4',myData$age_grp)
myData$age_grp <- ifelse((myData$age>55) , 'minnor',myData$age_grp)
myData$age_grp<-as.factor(myData$age_grp)
summary(myData$age_grp)
library(dplyr)
myData <- select(myData, -(age) ) 
```

# java - URLConnection 的 InputStream 数据不完整

> ID：12979458
> 
> 赞同：1
> 
> 时间：2012-10-19T17:34:24.867
> 
> 标签：java, inputstream

这是我显示问题的简单测试代码：

```
URL u = new URL(someURLString);
URLConnection c = u.openConnection();
InputStream is = c.getInputStream();

int amount = c.getContentLength(); //gives 75830, which is correct

int r = 0;
while (is.read() != -1) //count input
    r++;

//r is 65878, what the hell? 
```

显然有数据丢失。谁能解释这种行为？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T08:23:39.747

这个问题现在已经 6 个月大了，所以我不知道你是否在此期间解决了你的问题。但...

我在 Android 应用程序上运行 HttpUrlConnection 时遇到了同样的问题。**logcat**上的内容**不完整**！我将内容写入设备上的文件，它向我展示了整个内容。也许这似乎是 logcat 的一个问题，但我花了几个小时！

 *** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T17:38:13.987

`c.getContentLength();`- 返回内容长度标头字段的值。只需检查您收到的内容是否正确**

# jquery - jQuery .nothas？

> ID：12979461
> 
> 赞同：3
> 
> 时间：2012-10-19T17:34:39.507
> 
> 标签：jquery, jquery-selectors

有没有办法`.nothas()`在 jQuery 中做与选择器等效的操作？例如，如果我想向`TBODY`所有`TABLE`还没有的元素添加 a，那么做这样的事情会很好：

```
$("TABLE").nothas("TBODY").append("<TBODY />"); 
```

如果这可以仅限于直接后代，那就更好了，这样（在这种情况下）`TABLE`嵌入在`THEAD`单元格中的元素就不会被考虑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T17:36:31.603

jQuery 有[`:not`](http://api.jquery.com/not-selector/)和[`:has`](http://api.jquery.com/has-selector/)选择器：

```
$("table:not(:has(tbody))").append("<tbody />"); 
```

# linux - 成为root的Shell脚本？

> ID：12979465
> 
> 赞同：0
> 
> 时间：2012-10-19T17:34:45.163
> 
> 标签：linux, shell, unix, root

我们如何编写一个shell脚本成为root？那就是我不想在提示时输入密码，它应该在脚本本身内。我试图做，但没有这样做。是否可能，如果是，请解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T17:39:28.620

不要这样做。相反，学习您的特定系统的内置功能，以执行具有升级权限的命令。如果您碰巧在支持该文件的 Linux 上，请查看`sudo`该文件。`sudoers`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:58:51.353

可能最好的方法是使用[SUID](http://www.diablotin.com/librairie/networking/puis/ch05_05.htm) Shell 脚本，但它不安全，正确的方法是 sudo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:50:12.090

您可以为此使用期望脚本。或者，如果您希望以 root 用户身份执行命令，那么您可以使用“su -c”选项。

要将其合并到脚本中，您可以使用以下内容：-

```
#!/usr/bin/expect
spawn su
set timeout 60
expect "pass" {
sleep 1
send "<my_root_password>"
} timeout {
send_user "Error connecting"
}
interact 
```

为此，您需要期望机器中存在二进制文件。

# java - catch 块在 C++ 本机库中不起作用

> ID：12979466
> 
> 赞同：10
> 
> 时间：2012-10-19T17:34:51.570
> 
> 标签：java, c++, exception, java-native-interface, native

我正在用 c++ 编写一个 java 本机库，并在本机库本身中使用异常处理，但是一旦我抛出异常，库就会崩溃。这是我的简单测试程序，当我从 Java 测试中调用它时，只要抛出异常，它就会崩溃。捕获块不工作。任何我想念的想法。谢谢。

```
#include "Test.h"
#include <iostream>

JNIEXPORT void JNICALL Java_Test_helloWorld(JNIEnv *, jobject)
{
    std::cout<<"Hello World";
    try {
        throw 1;
    }
    catch(int )
    {
        std::cout<<" catch int block"<<std::endl;
    }
    catch(...)
    {
        std::cout<<" catch block"<<std::endl;
    }
} 
```

编译和链接：

```
g++ -m64 -fPIC -fexceptions -c test.cpp
g++ -shared -m64 -Wl,-soname,libtest.so -Wl,-shared-libgcc test.o -o libtest.so

$ java  -d64 -Djava.library.path=/home/vkumar/projects/test -cp $CLASSPATH Test
terminate called after throwing an instance of 'int'
terminate called recursively
Hello World^CAbort (core dumped) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:29:29.887

我试过你的例子，一切都很顺利。我的环境是带有 Oracle JDK 1.7 的 Ubuntu 12.04（64 位）。

所以，我的猜测是你的环境是罪魁祸首。由于您使用 option `-m64`，它可能是 32 位系统和 64 位 libtest.so 之间的不匹配。

请验证您的系统、JDK、gcc 等是否适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:29:49.997

看起来异常没有被捕获。尝试

```
int i=1;

try {
    throw i;
} 
```

可能是`int`尺寸问题还是什么？或者你忘了重新编译？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:50:05.837

JNIExport 或 JNICALL 是否扩展以定义 c 链接？如果是这样，那么您将在 ac 函数中引发 C++ 异常，我不确定该行为是否已定义。

也许尝试类似的东西

```
namespace 
{
  void impl() 
  {   
     ... yourCode ...
  } 
}

JNIEXPORT void JNICALL Java_Test_helloWorld(JNIEnv *, jobject)
{
   impl();
} 
```

# c++ - 读取两个整数然后打印它们的 while 循环

> ID：12979470
> 
> 赞同：0
> 
> 时间：2012-10-19T17:35:12.493
> 
> 标签：c++

我完全被困在“编程 - 使用 C++ 的原则和实践”的第 4 章上。问题是：

“编写一个由 while 循环组成的程序，该循环（每次围绕循环）读取两个整数，然后打印它们。当终止 '|' 时退出程序 已输入。”

这是我的代码：

```
{
int entryvariable = 0;
int numberofentries = 0;
vector<int>vector1;

while (cin>>entryvariable)
{
    vector1.push_back(entryvariable);
    ++numberofentries;

if (numberofentries % 2 == 0)
    cout<<vector1[numberofentries - 1] << vector1[numberofentries] << "\n";
} 
```

当然，这最终会崩溃。

我将如何解决此问题以使其正常工作？

（有人有这本书的答案吗？写得真好，但是如果你在自学的话是不可能检查你的答案的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:39:43.847

C++ 中的索引范围从`0`到`n - 1`. 您的代码假定您可以访问`vector1[n]`if `vector1.size() == n`。此外，您在每次迭代中只读取一个值。不过，您可以只读取两个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-14T16:56:32.720

```
int main()
{
vector<int>v;
int a=0; 
cin>>a; 
int b=0; 
while (v.size()<2) // insted of 2 it could be another figure for 
                   //   another number of printed figures
{
v.push_back(a); 
cin>>b;
a=b;
}
for (int i=0; i<v.size(); ++i)
cout<<v[i]<<'\n';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:45:05.323

您`vector1[numberofentries]`导致错误

一个向量从`0th`索引开始..

因此，当您`numberofentries`为 1 时，该值存储在`vector1[0]`not`vector1[1]`

当您`numberofentries`为 2 时，该值存储在`vector1[1]`not`vector1[2]`

所以你的代码应该是

`cout<<vector1[numberofentries - 2] << vector1[numberofentries-1] << "\n";`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T14:38:51.730

我正在做同样的练习，并发现这本书的 google 小组是询问有关练习和练习的问题的最佳场所，可以在[此处](https://groups.google.com/forum/?fromgroups=#!searchin/ppp-public/%2420chapter%24204%2420drill/ppp-public/aKxBPHfd0p8/DKC5AdNJTLAJ)找到与您的问题相关的线程。

希望这可以帮助。

# awk - lsf awk 命令引号

> ID：12979472
> 
> 赞同：2
> 
> 时间：2012-10-19T17:35:18.693
> 
> 标签：awk, lsf

当我在 bash 终端中运行此命令时，它可以工作：

```
awk '{ sum += $1 } END { print sum }' /user/dnaiel/test.txt > /user/dnaiel/sum.txt 
```

但是当我运行这个时：

```
bsub -q priority -R'rusage[mem=2000]' -oo bin${count}.out -eo bin${count}.err \
"awk '{ sum += $1 } END { print sum }' /user/dnaiel/test.txt > /user/dnaiel/sum.txt" 
```

这没用。我也尝试将 ' 更改为 \' 但也不起作用。

我收到以下错误：对于第一种情况：

```
awk: { sum +=  } END { print sum }
awk:           ^ syntax error 
```

对于我使用的情况\'

```
awk: '{
awk: ^ invalid char ''' in expression 
```

有什么想法让我弄乱了语法吗？我很困惑。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:43:30.677

请注意`$1`错误消息中的 消失了？

```
awk: { sum +=  } END { print sum }
awk:           ^ syntax error 
```

这是因为在 shell 中，当您使用 dbl-quotes 引用 FIRST 时，就像您所做的那样

```
bsub -q priority -R'rusage[mem=2000]' -oo bin${count}.out -eo bin${count}.err \
"awk '{ sum += $1 } END { print sum }' /user/dnaiel/test.txt > /user/dnaiel/sum.txt" 
```

任何 ${var} 引用都会扩展为它们的值。当单引号在 dbl 引用的字符串中时，它们失去了防止变量扩展的魔力。

如何修复，逃避你`$`的 s。不确定 bsub 是什么，但应该这样做：

```
bsub -q priority -R'rusage[mem=2000]' -oo bin${count}.out -eo bin${count}.err \
"awk '{ sum += \$1 } END { print sum }' /user/dnaiel/test.txt > /user/dnaiel/sum.txt"
# -------------^^^ 
```

IHTH

# java - Android 正确使用线程。连续随机弹出图像

> ID：12979482
> 
> 赞同：1
> 
> 时间：2012-10-19T17:36:01.137
> 
> 标签：java, android, game-engine, 2d-games

在活动开始时不断更改 imageview 图像。不使用 Thread 是否可行？至少告诉我如何正确使用 Thread 以及我应该如何启动它。请。，

这是一个像安卓游戏一样的鼹鼠。

* * *

我试图做简单的随机文本显示，但没有奏效。

```
public class NewGame extends Activity {

    gameThread gameOn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newgame);

        hView = (TextView) findViewById(R.id.HammersText);
        gameOn = new gameThread();
        gameOn.start();
    }
} 
```

* * *

```
public class gameThread extends Thread
{
    NewGame gameOn;

    public void run() {
        super.run();

        Random ramhole = new Random();
        int hole = ramhole.nextInt(8);

        Random ramletter = new Random();
        int letter = ramletter.nextInt(26);

        gameOn = new NewGame();

        gameOn.hView.setText("Hole = "+hole+"Letter = "+letter);
    }

} 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:45:24.437

使用 countdownTimer 而不是 Thread

```
new CountDownTimer(9000000, 5000) {

 public void onTick(long millisUntilFinished) {
       Random ramhole = new Random();
        int hole = ramhole.nextInt(8);

        Random ramletter = new Random();
        int letter = ramletter.nextInt(26);
        hView.setText("Hole = "+hole+"Letter = "+letter);
 }

 public void onFinish() {
   //Restart timer if you want.
 }
}.start(); 
```

您仍然可以使用 Threading 进行操作，但对于您正在尝试做的事情来说，这太过分了。同样在你的情况下，你不能做

```
gameOn = new NewGame(); 
```

Activity 总是需要被框架初始化。并且应该始终从 Ui 线程调用 setText api。也许这就是您的应用无法运行的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:51:42.180

您应该只在主 UI 线程上触摸 UI，因此如果您决定使用线程，那么您应该查看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

如果是我的游戏，我会为每个洞启动一个新的 AsyncTask。在 doInBackground 中，它会随机休眠一段时间，然后发布进度。在每个甚至 onProgressUpdate 中，它都会显示痣。在每一个奇怪的 onProgressUpdate 中，它都会隐藏痣（如果它没有被击打。）通过处理 onProgressUpdate 中的显示/隐藏，你会自动在主 UI 线程上，所以不用担心，每个洞都有一个单独的线程将允许你有一个更有活力的洞/痣的竞争环境。

# expect - 打印 Spawn 命令的输出

> ID：12979485
> 
> 赞同：0
> 
> 时间：2012-10-19T17:36:18.620
> 
> 标签：expect

我是 Expect 的新手，程序在我的机器上执行以登录远程 IBM 主机并执行脚本。但是输出不会显示在我的本地系统控制台或执行脚本的终端中。

示例代码：

```
expect -c "
     spawn ssh @hostname "./ibm_nettrace.sh;ls -ltr;mkdir netos;"
     expect eof
     " 
```

在这里，shell 脚本由于文件权限而失败。但是错误不会路由到我的控制台中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:47:54.813

我认为您需要像这样在引号内转义引号。

```
expect -c "
 spawn ssh @hostname \"./ibm_nettrace.sh;ls -ltr;mkdir netos;\"
 expect eof
 " 
```

或者，通过使用这样的单引号：

```
expect -c '
 spawn ssh @hostname "./ibm_nettrace.sh;ls -ltr;mkdir netos;"
 expect eof
 ' 
```

# android - Android - 有没有办法让应用程序 minSdkVersion="8" 但仍然适用于旧版本？

> ID：12979486
> 
> 赞同：2
> 
> 时间：2012-10-19T17:36:24.020
> 
> 标签：android, android-manifest

我目前有这个清单设置：

```
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="16"/> 
```

但我正在尝试实现谷歌云消息传递，它只与 sdkVersion = 8 兼容

我查看了我的用户细分，这里是旧版本：

```
Android 2.1 - 86
Android 3.0 - 11
Android 1.6 - 11
other - 7 
```

我不确定其他是什么意思。而且我也不确定版本 4 或 8 如何引用 Android 2.1

或者这是苹果和橘子？我有点困惑。我遇到的问题是我不希望用户升级应用程序然后让它无法在他们身上运行。

这会发生吗？有人请澄清我在这里做的更好的事情。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:41:16.153

您可以将 GCM 代码包含在 SDK 级别检查中，以便仅在 SDK 为 8 或更高版本时执行。

例如：

```
if ( android.os.Build.VERSION.SDK_INT >= 8 )
{
    // Do GCM Stuff here
} 
```

# ajax - gzipped jQuery ajax 在 Firefox 中失败，出现“401 UNAUTHORIZED”

> ID：12979489
> 
> 赞同：0
> 
> 时间：2012-10-19T17:36:30.840
> 
> 标签：ajax, jquery, gzip, mod-wsgi

不知道如何调试这个 - 我正在从我的 django 服务器发送一些 gzip 压缩的 json 数据。

（通过主干 fetch() 调用......这反过来又调用 jQuery.ajax）。在 django 服务器上，我设置：

*   响应['Content-Type'] = '应用程序/json'
*   响应['内容编码'] = 'gzip'

而且我没有为 ajax 调用设置任何其他选项（除了 Backbone.js 默认值）。这在 Chrome 中运行良好，但在 firefox 中，我看到请求在 firebug 中永远旋转，状态为**401 UNAUTHORIZED**。

这很有趣，因为它直接在我的本地测试服务器上的 django 上的 firefox 中工作，但当它通过 Apache 和 mod_wsgi 通过 SSL 连接运行时则不行。

我需要做一些特别的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:47:41.470

最好的调试方法是阅读错误信息。

测试环境中的一个错误是使登录无法在 Firefox 中正确授权，因此该页面未获得授权，并返回 401 错误。

# sql-server - 多租户 SQL Server 数据库和参数嗅探

> ID：12979493
> 
> 赞同：6
> 
> 时间：2012-10-19T17:36:37.617
> 
> 标签：sql-server, performance, entity-framework, multi-tenant, parameter-sniffing

我在 SQL Server 2012 中有一个多租户数据库，其中每个租户的行都由一`tenant_id`列标识（也称为[共享数据库、共享架构](http://msdn.microsoft.com/en-us/library/aa479086.aspx)方法）。一些租户，尤其是较新的租户，行数很少，而另一些则很多。

SQL Server 的查询优化器通常会根据第一次执行期间提供的参数构建查询计划，然后将这个计划重新用于所有未来的查询，即使提供了不同的参数。这称为[参数嗅探](http://www.sommarskog.se/query-plan-mysteries.html)。

我们的数据库存在的问题是 SQL Server 有时会根据指向较小租户的参数构建这些计划，这对于该租户来说效果很好，但是当它将缓存的计划重新应用到较大的租户时，它会灾难性地失败（通常是定时事实上）。通常，只有当我们的一个较大的租户与我们联系并告知我们遇到超时错误时，我们才会发现这种情况，然后我们必须进入系统并手动刷新所有查询计划以更正它。

您可以使用查询提示来防止 SQL Server 缓存查询计划 ( [`OPTIMIZE FOR UNKNOWN`](http://www.benjaminnevarez.com/2010/06/how-optimize-for-unknown-works/))，但这会导致一些额外的开销，因为每次调用查询时都会重新生成查询计划。另一个问题是我们使用的是实体框架，它无法指定`OPTIMIZE FOR UNKNOWN`查询的提示。

所以问题是——多租户数据库在参数嗅探方面的最佳实践是什么？有没有一种方法可以在数据库范围内禁用参数嗅探，而不必在每个查询中都指定它？如果是这样，这甚至是最好的方法吗？我应该以其他方式对数据进行分区吗？还有其他我没有想到的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:43:01.223

我遇到过类似的问题，并通过像这样传递我的参数成功地解决了它：

```
CREATE PROCEDURE [dbo].[InsertAPCheck]
@APBatchID  int = Null,
@BankAccountID  int = Null
AS
  /* copy parameters to temporary variables */
  SELECT @xAPBatchId = APBatchId, @xBankAccountID = @BankAccountID
 .
 .
 /* now run the meat of your logic using the temp variables */
 SELECT * FROM myTable where Id=@xAPBatchId.....etc. 
```

换句话说，在 1-1 的基础上为传入的每个参数创建一个局部变量，然后仅在 SP 的逻辑中引用这些新变量。我可能错过了 SQL Server 可以为我做的一些优化，但最重要的是我错过了当参数嗅探开始时我得到的真正可怕的性能。

在您的情况下，也许您可​​以尝试仅针对多租户 id 执行此操作（我假设它是所有 SP 的参数？），并让 SQL Server 优化其余参数（如果可以）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-06T21:19:14.187

对于动态 SQL，例如 Entity Framework 生成的 SQL，将注释注入到包含当前租户标识符的命令文本中。这实质上是按租户划分 SQL 的执行计划缓存，保持执行计划与租户隔离，但允许它们被同一租户重用。

要将注释注入命令文本，您可以子类化/实现`DbConnection/IDbConnection`并`DbCommand/IDbCommand`应用装饰器模式。调用`DbCommand/IDbCommand.Execute*`可以在调用内部方法之前附加注释的租户 ID，然后在返回后删除注释。使用装饰连接初始化实体框架或您使用的任何 ORM。

如果您有很多租户，则按租户大小类别对计划缓存进行分区可能是有意义的。否则，您将有效地执行相同的操作，`OPTION (RECOMPILE)`因为计划将在重用之前从缓存中过期。

# arrays - ReflectionException：类 ArrayCollection 不存在

> ID：12979497
> 
> 赞同：2
> 
> 时间：2012-10-19T17:36:43.833
> 
> 标签：arrays, symfony, doctrine-orm, jmsserializerbundle

我正在尝试为移动摘要序列化实体。我有这个实体类：

```
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use FOS\UserBundle\Entity\User as BaseUser;

/**
 * xxx\xxx\Entity\User
 *
 * @ORM\Table()
 * @ORM\Entity()
 * @ORM\Entity(repositoryClass="xxx\xxx\Entity\UserRepository")
 */
class User extends BaseUser
{
    /**
     *
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @var \Doctrine\Common\Collections\ArrayCollection
     *
     * @ORM\OneToMany(targetEntity="\xxx\xxx\Entity\Music", mappedBy="user")
     */
    protected $musics;

    /**
     * @var \Doctrine\Common\Collections\ArrayCollection
     *
     * @ORM\OneToMany(targetEntity="\xxx\xxx\Entity\Message", mappedBy="user")
     */
    protected $messages;

    /**
     * @var \Doctrine\Common\Collections\ArrayCollection
     *
     * @ORM\OneToMany(targetEntity="\xxx\xxx\Entity\Location", mappedBy="user")
     */
    protected $locations;

    public function __construct()
    {
        parent::__construct();
        $this->musics = new ArrayCollection();
        $this->messages = new ArrayCollection();
        $this->locations = new ArrayCollection();
    }
} 
```

现在，当我在我的`DefaultController.php`：

```
$user = $this->getUser();
$em = $this->getDoctrine()->getManager();

$array = $em->getRepository('xxxBundle:User')
    ->findLatest();

$serializer = $this->get('serializer');
$response = $serializer->serialize($array, 'json'); //THIS LINE THROWS EXCEPTION 
```

我有`use Doctrine\Common\Collections\ArrayCollection;`，`DefaultController.php`但似乎错误来自内部`JMSSerializerBundle`。

## 到目前为止我尝试了什么

*   我尝试将`Doctrine`注释定义为以 a 开头`\`，但这没有帮助
*   我已经清除了我的缓存一百万次
*   我搜索了类似的异常，但它们似乎都是由拼写错误引起的，我在过去 48 小时内检查了拼写错误，但找不到。

这些类是使用自动生成的`app/console`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T19:31:31.657

看看 GitHub 上的这个问题：[https ://github.com/schmittjoh/JMSSerializerBundle/issues/123](https://github.com/schmittjoh/JMSSerializerBundle/issues/123)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-10T13:39:38.673

此解决方案有效！我正在使用 JMSSerializerBundle 并且在序列化实体中我有`ManyToOne`关系。我使用了财产`$product`，当然`setter`还有`getter`为此。如果序列化程序尝试获取产品，我会收到相同的消息，因为它不了解如何将相关实体转换为字符串/整数。我使用自定义方法添加访问器`getProductId`并在此方法中返回

`$this->product->getId()`

`JMS\Serializer\Annotation as Serializer` `@Serializer\Accessor(getter="getProductId")`

相对而言，在`OneToMany`自定义`get`方法中，我将 ArrayCollection 作为 Array 返回`$this->statuses->toArray()`

您也可以为关系实体考虑转换器，但我没有尝试过（没时间）

# com - 进程外 COM 服务器的注册表项

> ID：12979501
> 
> 赞同：1
> 
> 时间：2012-10-19T17:36:55.037
> 
> 标签：com, out-of-process

我正在实现我的第一个进程外 COM 服务器（我的第一个 COM 服务器，就此而言）。我已按照步骤编写 IDL 文件、为代理/存根 DLL 生成代码、编译 DLL 并注册它。

当我检查注册表项时，我有

*   一个名为 的键`HKEY_CLASSES_ROOT/Interface/<GUID>`，其值是 (say)`IMyApp`和
*   一个名为 的键`HKEY_CLASSES_ROOT/Interface/<GUID>/ProxyStubClsid32`，其值为`<GUID>`，即*与键名中的值相同*

我不明白第二个键的值如何与键`<GUID>`名中的值相同，因为我目前的理解是

*   在`HKEY_CLASSES_ROOT/Interface/<GUID>`, GUID 是一个**接口**ID
*   的**值**不是`ProxyStubClsid32`接口ID，而是**类**ID，指实现上述接口的组件
*   `HKEY_CLASSES_ROOT/CLSID/<GUID>/InprocServer32`（其中 GUID 是上面的**类**ID）的值指向代理 DLL

那么，`HKEY_CLASSES_ROOT/Interface/<GUID>/ProxyStubClsid32`如果一个是接口 ID，另一个是类 ID，那么值如何保持相同的值 GUID？

编辑：我仍然希望得到这个答案。简而言之：既然组件和接口是两个不同的东西，那么相同的 ID 怎么能同时用于两者呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T14:53:34.230

您对在 COM 中使用 Guid 的方式的基本理解是正确的。首先值得注意的是，具有相同 guid 的接口和 coclass 不是问题。它们存在于不同的注册表项中，HKCR\Interface 与 HKCR\CLSID 并且在 COM 中始终清楚您是在查找 IID 还是 CLSID。

其次是您编写的 IDL。请注意，那里没有指定代理的 CLSID 的地方，只能在那里声明代理和存根支持的 IID。

接下来，您需要通过代理/存根自动生成的方式进行疯狂追逐。核心 Windows SDK 头文件是 RpcProxy.h，在文本编辑器中打开它来查看。宏汤很重，但确实有一些不错的评论来描述正在发生的事情。重要的 RPC 帮助函数是 NdrDllRegisterProxy()，它注册代理并在您使用 Regsvr32.exe 时调用。它的第三个参数指定代理的 CLSID。我会让您阅读并仅引用 .h 文件中的重要部分：

> 编译器开关：
> 
> ```
> -DPROXY_CLSID=clsid
>     Specifies a class ID to be used by the proxy DLL. 
> ```

您可以使用 Project + Properties、C/C++、Preprocessor、Preprocessor Definitions 设置指定此选项。请注意，您的项目**不会**指定它。

追逐汤然后让你找到这个：

```
// if the user specified an override for the class id, it is
// PROXY_CLSID at this point

#ifndef PROXY_CLSID
#define GET_DLL_CLSID   \
    ( aProxyFileList[0]->pStubVtblList[0] != 0 ? \
    aProxyFileList[0]->pStubVtblList[0]->header.piid : 0)
#else  //PROXY_CLSID
#define GET_DLL_CLSID   &PROXY_CLSID
#endif //PROXY_CLSID 
```

换句话说，如果您自己没有指定 CLSID（您没有），那么它将使用存根表中的第一个**IID**。

这使得 ProxyStubClsid32 guid 与您的第一个接口的 IID 相同。功能，而不是错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:40:17.260

初学者的困惑 (tm) 案例。通过调用注册的类`regsrv32`不是**我的**CLSID 的类。它是专门为代理/存根 DLL 生成的（友好名称 PSFactory 也表明了这一点）。因此，正如 Roman R. 所怀疑的那样，有两个班级，我认为只有一个班级。`/Embedding`我自己的 CLSID 在使用交换机调用时由 EXE 服务器注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T06:47:02.023

据我所知，所有代理/存根混乱现在都由 MIDL 管理（继承自 IDispatch 而不是 IUnknown，您可能已经这样做了，因为您拥有 ProxyStubClsid32 reg 密钥）。

唯一需要的是正确注册服务器（只是构建它或做 /RegServer 没有为我们正确注册它......以及许多其他人），这样做只需要调用 LoadTypeLibEx （在构建服务器或安装它）。

因此，只需使用此代码创建一个小 exe，并在构建和安装后调用它：

```
String^ l_TLB = l_Path + "\\MyServer.tlb";
IntPtr  l_TLBP = System::Runtime::InteropServices::Marshal::StringToBSTR(l_TLB);
ITypeLib *pTypeLib;
HRESULT hr = LoadTypeLibEx(static_cast<LPCOLESTR>(l_TLBP.ToPointer()), REGKIND_REGISTER, &pTypeLib);
if(SUCCEEDED(hr))
    pTypeLib->Release(); 
```

# ant - 如何在 Ant SCP 任务中转义 @

> ID：12979503
> 
> 赞同：1
> 
> 时间：2012-10-19T17:36:57.453
> 
> 标签：ant, escaping, sftp, scp

我想请你帮忙。当我的用户名包含 @ 符号时，如何使用 scp 任务？

我试图以多种方式逃避这个角色，但它不起作用。在以下示例中，我的用户名是 user@host.com

```
<scp file="test.txt" todir="&quot;user@host.com&quot;:password@ftp.host.com:/" trust="true" sftp="true"/>
<scp file="test.txt" todir="'user@host.com':password@ftp.host.com:/" trust="true" sftp="true"/>
<scp file="test.txt" todir="user\@host.com:password@ftp.host.com:/" trust="true" sftp="true"/> 
```

但是输出总是一样的：

```
neither password nor keyfile for user "user has been given.  Can't authenticate. 
```

请问，有没有强制任务正确解析这个字符串？非常感谢。

顺便说一句，我不知道为什么，但是对于我当前的提供商，如果不附加主机名就不可能创建用户名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:54:52.227

我在 build.xml 中使用了 SCP 任务，它的形式如下所示：

```
<scp file="package/ROOT.war" todir="user@example.com:~" trust="true" password="${password}"/> 
```

查看函数（第 370 行）处[的 SCP 任务的来源，该任务](http://svn.apache.org/viewvc/ant/core/trunk/src/main/org/apache/tools/ant/taskdefs/optional/ssh/Scp.java?view=markup)`parseUri(String uri)`似乎可以支持带有 @ 符号的用户名。限制似乎是路径中包含 : 或 @ 的路径，如此评论所示：

```
// user:password@host:/path notation
// everything upto the last @ before the last : is considered
// password. (so if the path contains an @ and a : it will not work) 
```

该代码似乎不支持此评论（如 [马丁·克莱顿](https://stackoverflow.com/users/183172/martin-clayton)所指出的）。您还可以看到当密码或密钥文件丢失时触发的错误。也许`user:password@host:/path`符号中的密码和带有@的用户名的组合会导致问题？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-12-03T06:27:27.433

当前 ant 版本的`-1.9.4`操作系统：-`16.04 Ubuntu`不起作用。

改成`1.9.3`指向`/usr/bin/ant` ssh 观察成功：

```
16.04 and ant 1.9.3 is working
14.04 ant 1.9.4 is working 
```

# php - PDO 错误：“SQLSTATE[HY000]: General error” 更新数据库时

> ID：12979510
> 
> 赞同：52
> 
> 时间：2012-10-19T17:37:25.177
> 
> 标签：php, pdo

使用 PDO 更新数据库时出现错误。我是 PDO 的新手，所以问题可能很小，我只是不明白。 *关于错误的有趣之处在于，该命令工作正常，并且数据库确实得到了更新。* 但它仍然向我返回一个错误。

**代码：**

```
try {
    $stmt = $pdo->prepare("UPDATE $page SET $section = :new_content WHERE $section = '$old_content'");
    $stmt->execute(array(
        'new_content' => $new_content
    ));
    $result = $stmt->fetchAll();
    echo "Database updated!";
}
catch(PDOException $e) {
    echo 'ERROR UPDATING CONTENT: ' . $e->getMessage();
} 
```

**错误：** 错误更新内容：SQLSTATE [HY000]：一般错误

我真的不知道问题可能出在哪里，因为它非常模糊，我无法找到有同样问题的人。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-10-19T18:10:43.720

您不使用 fetchAll()，如

```
$result = $stmt->fetchAll(); 
```

使用更新或插入查询。删除此语句应该可以解决问题。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-04-14T18:39:21.127

请注意，此错误的另一个可能原因是，如果您在现有父 $stmt 循环内使用变量 $stmt 进行第二次数据库调用。

```
 $stmt = $conn->query($sql);

    while ($row = $stmt->fetch()) {  //second use of $stmt here inside loop 
```

# jquery - Slickgrid：resetActiveCell() 无法按预期工作

> ID：12979511
> 
> 赞同：0
> 
> 时间：2012-10-19T17:37:28.360
> 
> 标签：jquery, slickgrid, tablecelleditor

1.当我离开网格时，我调用了resetActiveCell()，但单元格仍然被选中。是否有另一个语句可以取消选择最后一个选定的单元格？

2\. 我正在使用 longText 编辑器。当我离开网格并调用 resetActiveCell() 时，编辑器不会关闭。

有什么想法我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T01:50:09.403

有点晚了，但是...我两个都打电话。（假设您加载了选择模型插件）

```
var clearGridSelection = function () {
    grid.resetActiveCell();
    grid.getSelectionModel().setSelectedRows([]);
}; 
```

# ios - 如何制作不能被 dead_stripped 的目标文件？

> ID：12979516
> 
> 赞同：1
> 
> 时间：2012-10-19T17:37:50.183
> 
> 标签：ios, linker, mach-o, dead-code

生成**没有**设置`SUBSECTIONS_VIA_SYMBOLS`标志的 Mach-O 目标文件的最简单方法是什么，以便链接器（带有`-dead_strip`）稍后不会尝试将文本部分切割成片段并猜测使用了哪些片段？

我可以使用 llvm/gcc (4.2.1) 的命令行选项来阻止它`.subsections_via_symbols`首先发出，或者使用命令行工具从现有的目标文件中删除标志。

（根据 Mach-O 规范自己编写这样的工具是一种选择，但如果可能的话，我宁愿不要那么辛苦地重新发明轮子）。

**平台：** iOS，从 OSX 与 XCode 4.5 交叉编译。

* * *

**背景：**我们正在提供其他公司构建到应用程序中的静态库。当我们的库遇到问题时，它会生成一个崩溃报告，其中包含堆栈跟踪和某些其他关键信息（如果我们幸运的话）我们可以稍后进行分析。通常，部署的应用程序已被剥离调试信息，因此解释堆栈跟踪是一个问题。如果我们自己制作应用程序，我们只需保存剥离之前的 DWARF 调试数据，并使用它来解码传入崩溃报告中的地址。但是我们不能依赖应用程序制造商从他们的链接步骤中向我们提供此类数据。

我们正在做的是让崩溃报告包含所选函数的运行时地址；*从中我们*可以推断出链接器映射中的地址与崩溃报告中的地址之间的偏移量。我们将整个库逐步链接到单个 .o 中，然后再将其填充到 .a 中；因为它只做一件大事，所以当最终链接应用程序时，从其中删除未使用的功能不会节省太多。不幸的是，库中的一些*小*代码有时没有使用（主要功能的替代 API 入口点，用于解释我们的错误代码的小帮助函数等），如果应用程序开发人员链接到`-dead_strip`，它扰乱了崩溃报告的地址重建，即最终应用程序中的相对偏移量与我们增量链接操作的链接器映射不同。

我们不能现实地要求所有应用程序开发人员在他们的构建过程中禁用死代码剥离，所以如果我们可以将我们的 .o 标记为“不可死剥离”并让最终的应用程序链接尊重这一点，这似乎是一个更好的前进方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:18:06.207

我解决了。

*如果所有*输入对象都设置了MH_SUBSECTIONS_VIA_SYMBOLS，则增量链接操作的输出仅设置了它。并且从汇编程序输入生成的目标文件只有在有明确的指令集时才会设置。*因此，可以通过与空*的汇编程序输入链接来删除标志：

```
echo > empty.s
$(CC) $(CFLAGS) input.o empty.s -nostdlib -Wl,r -o output.o 
```

# ado.net - 无法更改连接字符串（ODP、Oracle、Linq to Entities）

> ID：12979519
> 
> 赞同：0
> 
> 时间：2012-10-19T17:37:58.500
> 
> 标签：ado.net, linq-to-entities, odp.net

我有一个 App.config 连接字符串，可以很好地将我连接到我的数据库：

```
<add name="SFEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=micahs_poc_dev_server.kci;PASSWORD=kierkegaard;PERSIST SECURITY INFO=True;USER ID=KIERKEGAARD&quot;" providerName="System.Data.EntityClient" /> 
```

我将 ODP 引用与 ADO.NET / Linq to Entities 方法结合使用。

当我想连接到我们网络上的不同数据库（具有相同架构）时，问题就来了。

```
<add name="SFEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=QA_ETL_TEST_SERVER.COM;PASSWORD=bigshotpassword;PERSIST SECURITY INFO=True;USER ID=CoolidgeCalvin&quot;" providerName="System.Data.EntityClient" /> 
```

当我只是更改服务器的名称时，我收到此错误：ORA-00942：表或视图不存在

我实际上可以在它引发异常之前运行几行代码：

```
 using (SFEntities ctx1 = new SFEntities())
        {
            var ds = ctx1.Connection.DataSource; // debugger: QA_ETL_TEST_SERVER.COM
            var db = ctx1.Connection.Database;
            var dstate = ctx1.Connection.State;
            var dsite = ctx1.Connection.Site;
            ctx1.Connection.Open();

            SF_CHANGE_ORDER cotest = new SF_CHANGE_ORDER();
            cotest.DELETE_FLAG = "D";
            var result = (from cp in ctx1.SF_CLIENT_PROJECT
                          select cp).ToList();  // <---   error here! 
```

我还尝试将格式更改为：

```
<add name="SFEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=(DESCRIPTION =(ADDRESS=(PROTOCOL=TCP)(HOST=155.32.75.11)(PORT=65550))(ADDRESS=(PROTOCOL=TCP)(HOST=155.32.75.11)(PORT=65550))(CONNECT_DATA=(SERVICE_NAME=QA_ETL_TEST_SERVER.COM)(FAILOVER_MODE=(TYPE=SELECT)(METHOD=BASIC)(RETRIES=180)(DELAY=5))));PASSWORD=bigshotpassword;PERSIST SECURITY INFO=True;USER ID=CoolidgeCalvin&quot;" providerName="System.Data.EntityClient" /> 
```

这基本上反映了我为此服务器拥有的 TNS 条目。我仍然收到“不存在”错误。

如果我使服务器名称变得愚蠢，我会收到一个 TNS 错误，指出服务器无法识别。所以我很确定它正在获取我想要的服务器名称并检查它是否存在。

我不认为这是一个表权限/创建问题，因为我可以在具有相同凭据（和相同 TNS 文件）的同一台机器上的两个数据库上很好地查询它们。

[注意：我更改了字符串中的服务器/用户/密码]

[编辑：尝试调出提琴手，但我没有看到任何消息通过]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:12:56.900

啊... VisualStudio 将模式名称隐藏在 Model .edmx 文件中。要使其工作，您必须以某种方式打开模型文件（使用记事本或搜索项目中的所有文档）并手动更改模式名称。嘘！

# php - PHP字符串给出语法错误

> ID：12979528
> 
> 赞同：0
> 
> 时间：2012-10-19T17:38:40.090
> 
> 标签：php, string

为什么我在此字符串中收到此类错误：

```
$query="SELECT Name,Lastname FROM $_SESSION['SESS_MAIN_BASE'] s,
     WHERE s.FK_ID_user={$id_user}
     AND DATE(s.time) BETWEEN '".$d_year1."-".$d_month1."-".$d_day1."' AND '".$d_year2."-".$d_month2."-".$d_day2."'"; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T17:41:59.637

代替

```
 $query="SELECT Name,Lastname FROM $_SESSION['SESS_MAIN_BASE'] s, 
```

和

```
$query="SELECT Name,Lastname FROM {$_SESSION['SESS_MAIN_BASE']} s, 
```

更好的是

```
$query= "SELECT Name,Lastname FROM %s s, WHERE s.FK_ID_user= '%d' AND DATE(s.time) BETWEEN '%d-%d-%d' AND '%d-%d-%d'";
$query = sprintf($query,$_SESSION['SESS_MAIN_BASE'],$id_user,$d_year1 ,$d_month1,$d_day1,$d_year2,$d_month2,$d_day2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:42:18.260

改变

```
$_SESSION['SESS_MAIN_BASE'] 
```

到

```
{$_SESSION['SESS_MAIN_BASE']} 
```

$_SESSION 变为空白，因为 [] 是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:42:09.713

试试这个：

```
$query="SELECT Name,Lastname FROM {$_SESSION['SESS_MAIN_BASE']} s, ";
$query.="WHERE s.FK_ID_user={$id_user}";
$query.="AND DATE(s.time) BETWEEN '".$d_year1."-".$d_month1."-".$d_day1."' AND";
$query.="'".$d_year2."-".$d_month2."-".$d_day2."'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T17:42:41.587

```
$query="SELECT Name,Lastname FROM $_SESSION['SESS_MAIN_BASE'] s,
     WHERE s.FK_ID_user=$id_user
     AND DATE(s.time) BETWEEN '$d_year1-$d_month1-$d_day1' AND '$d_year2-$d_month2-$d_day2'"; 
```

# c++ - 默认构造函数和 POD

> ID：12979529
> 
> 赞同：4
> 
> 时间：2012-10-19T17:38:47.047
> 
> 标签：c++

我明白了[POD](https://en.wikipedia.org/wiki/Passive_data_structure)的含义，并且我知道当我在 C++ 中将结构声明为

```
struct f {}; 
```

有一个默认构造函数、一个默认复制构造函数、一个默认析构函数等。（如果我理解正确的话）

我的问题是：如何在没有隐式构造函数/析构函数/等的情况下仅使用普通数据（如 4 个 int 值）声明 POD 结构。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T17:44:37.360

每个对象类型都有一个构造函数——否则你将如何构造它？——还有一个析构函数——否则它会如何被销毁？它们不会“妨碍”任何事情，因为在仅 POD 字段的情况下，默认实现是无操作的，就像您说的那样：

```
struct f {
    f() {}
    ~f() {}
    int a, b, c, d;
}; 
```

但是，如果您编写一个空的构造函数，则该类型将变为非 POD。C++11 通过默认解决了这个问题：

```
f() = default;
~f() = default; 
```

复制构造函数的情况略有不同，其中隐式生成的构造函数只是为 POD 类型做“正确的事情”的一种便利：

```
f(const f& other) : a(other.a), b(other.b), c(other.c), d(other.d) {} 
```

没有理由自己重写。如果要使类型不可复制，可以将复制构造函数标记为已删除`f(const f&) = delete;`或声明它`private`。

同样重要的是要注意成员函数不像成员变量那样存储在对象上。您可以将 a`class`或`struct`同时视为两件事：

1.  数据布局的描述

2.  包含用于操作该数据的函数和类型的*命名空间*

面向对象编程的 C++ 模型只是将这两件事结合在一个地方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T17:43:52.453

> 如何在没有隐式构造函数/析构函数/等的情况下使用纯数据（如 4 个 int 值）声明 POD 结构。

像这样：

```
struct f {
  int i1, i2, i3, i4;
}; 
```

编译器生成的构造函数不会妨碍它成为 POD。

### 9类[类]

> 10) POD struct ^(109)是一个非联合类，它既是普通类又是标准布局类，并且没有非 POD 结构、非 POD 联合（或此类类型的数组）类型的非静态数据成员）。类似地，POD 联合是一个既是普通类又是标准布局类的联合，并且没有非 POD 结构、非 POD 联合（或此类类型的数组）类型的非静态数据成员。POD 类是一个 POD 结构或 POD 联合的类。

所以，它必须是

a) 普通类和
b) 标准布局类。

如下所述：

> 7) 标准布局类是这样的类：
> — 没有非标准布局类（或此类类型的数组）或引用类型的非静态数据成员，
> — 没有虚函数 (10.3) 和虚基类（10.1），
> ——对所有非静态数据成员具有相同的访问控制（第 11 条），
> ——没有非标准布局的基类，
> ——要么在最派生类中没有非静态数据成员，要么在大多数具有
> 非静态数据成员的基类，或者没有具有非静态数据成员的基类，并且
> - 没有与第一个非静态数据成员相同类型的基类。

和

> 6) [...] 普通类是具有普通默认构造函数 (12.1) 并且可轻松复制的类

详述于：

### 12.1 构造函数 [class.ctor]

> 5) [...]**如果默认构造函数不是用户提供的**，并且如果：
> - 它的类没有虚拟函数 (10.3) 和虚拟基类 (10.1)，并且
> - 没有非静态数据成员它的类有一个大括号或相等初始化器，并且
> ——它的类的所有直接基类都有普通的默认构造函数，并且
> ——对于它的类的所有非静态数据成员，它们是类类型（或其数组） ，每个这样的类都有一个简单的默认构造函数。

由于上述所有条件均适用，因此该类是 POD。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T17:42:53.110

首先，所有这些隐式成员函数仅在概念上存在。在您实际尝试使用它们之前，它们不会真正影响任何东西。这意味着，如果您不希望他们这样做，他们不应该“妨碍”。

其次，非虚成员函数（无论是否显式声明）对类的数据布局没有影响。即他们在这方面没有“妨碍”（如果这就是你的意思）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T17:40:34.850

是的，POD 的定义明确排除了隐式生成的特殊成员函数。如果您指定其中之一与默认生成的**完全相同**：您的类型不再是 POD。在 C++11 中，这个问题是用`default`关键字解决的。

有了这一切，POD 的定义（通常）与 C 代码中的定义相同：

```
struct X { int a, b, c, d; }; 
```

# jquery - 将 JQuery 与 node.js 一起使用时出错

> ID：12979531
> 
> 赞同：7
> 
> 时间：2012-10-19T17:38:53.633
> 
> 标签：jquery, node.js, npm

我在 Windows 7 上运行了全新安装的 node.js，我正在尝试运行一个非常基本的 JQuery 脚本，名为`a.js`，其中仅包含：

```
require("jquery");
$().jquery; 
```

不幸的是，这不会与 JQuery 一起运行，给我一个 TypeError：

```
C:\Users\Ian>node a.js

C:\Users\Ian\node_modules\jquery\lib\node-jquery.js:10
    window.XMLHttpRequest.prototype.withCredentials = false;
                         ^
TypeError: Cannot read property 'prototype' of undefined
    at create (C:\Users\Ian\node_modules\jquery\lib\node-jquery.js:10:26)
    at C:\Users\Ian\node_modules\jquery\lib\node-jquery.js:9435:18
    at Object.<anonymous> (C:\Users\Ian\node_modules\jquery\lib\node-jquery.js:9437:2)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (C:\Users\Ian\a.js:1:63) 
```

我通过 Google 发现了一些关于此错误的错误报告，其中大部分建议降级 JQuery。但是，当我这样做时，我会得到一个不同的错误。以下是 JQuery 1.6.3：

```
C:\Users\Ian>node a.js

module.js:340
    throw err;
      ^
Error: Cannot find module 'location'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at create (C:\Users\Ian\node_modules\jquery\node-jquery.js:6:33)
    at C:\Users\Ian\node_modules\jquery\node-jquery.js:9065:18
    at Object.<anonymous> (C:\Users\Ian\node_modules\jquery\node-jquery.js:9067:2)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32) 
```

谁能建议可能出了什么问题？我尝试了各种重新安装该软件的方法，但都没有成功。我已经尝试过默认版本的 jquery`npm install -g`和`npm install`jquery@1.6.3。

编辑：[这个问题](https://stackoverflow.com/questions/12063058/keep-getting-error-for-browserless-jquery-in-node?rq=1)- 尚未得到解答 - 似乎相关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-02T20:44:13.797

如果你在节点 0.10.x ... 运行 sudo npm rebuild

[https://github.com/coolaj86/node-jquery/issues/35](https://github.com/coolaj86/node-jquery/issues/35)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T22:05:37.513

在 jquery-nodejs 项目的 git 页面中，说这在 Windows 上不起作用，所以问题出在你的操作系统上。 [https://github.com/coolaj86/node-jquery](https://github.com/coolaj86/node-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T18:03:48.097

您必须将模块分配给`$`变量：

```
var $ = require('jquery');
$().jquery; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T20:22:54.253

我在 REHL 上遇到了这个问题， sudo npm rebuild 为我解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-10T14:58:42.213

对于运行 Windows 的用户，**npm 重建**可能无法正常工作，您可能仍会看到类似以下内容：

```
C:\Projects\NODE\paragraphs\node_modules\jquery\lib\node-jquery.js:10
window.XMLHttpRequest.prototype.withCredentials = false;
                     ^
TypeError: Cannot read property 'prototype' of undefined 
```

感谢用户[NeverI](https://github.com/NeverI)为我找到[了这个解决方案：](https://github.com/UncoolAJ86/node-jquery/issues/52)

在 node-jquery.js（在 \node_modules\jquery\lib 下找到）中更改以下行：

```
if(window == null ) {
    window = require('jsdom').jsdom().createWindow(); 
```

到：

```
 if(!window || !window.document) {
    window = require('jsdom').createWindow();
    window.document = require('jsdom').jsdom(); 
```

# javascript - AngularJS - 在 ng-repeat 中使用 ng-show

> ID：12979532
> 
> 赞同：25
> 
> 时间：2012-10-19T17:38:54.553
> 
> 标签：javascript, angularjs, angularjs-ng-repeat, angularjs-ng-show

我在**ng-repeat**块中使用**ng-show**指令时遇到问题。

 ****布尔值似乎没有正确传递给 ng-show ......**

为了说明我的意思，这是我在 JSFiddle 中制作的示例的屏幕截图：

![在此处输入图像描述](../Images/f9bf89c15f3fad1bd2aa93a3f1ac5e69.png)

这是一些示例标记：

```
<table ng-controller="ActressController" class="table table-bordered table-striped">
    <tr ng-repeat="actress in actressList">
        <td>
            <span class="actress-name">{{ actress.name }}</span>
            <h4 ng-show="{ actress.name == 'Scarlett' }">Was in Avengers! <span class="note">(should only appear if Scarlett)</span></h4>
            <h2>{{ actress.name == 'Scarlett'}} <span class="note"><-- this statement is correct</span></h2>

        </td>

    </tr>
</table> 
```

这是一个示例控制器：

```
function ActressController($scope) {
    $scope.actressList = [
        {
            name: "Angelina"
        }, {
            name: "Scarlett"
        }, {
            name: 'Mila'
        }, {
            name: 'Megan'
        }
    ]        

} 
```

**关于我可能做错了什么的任何想法？**

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-19T17:43:58.310

在你`ng-show`不需要 { } 试试这个：

```
<h4 ng-show="actress.name == 'Scarlett'">Was in Avengers! <span class="note"> 
```

请参阅[此小提琴](http://jsfiddle.net/b004t06z/)以`ng-show`获取`ng-repeat`.**

# php - MySQLi bind_param 仅在填写所有字段时才有效

> ID：12979541
> 
> 赞同：0
> 
> 时间：2012-10-19T17:39:15.770
> 
> 标签：php, insert, mysqli

我创建了一个 PHP 站点，它使用具有基本功能的 MySQLi 将 HTML5 表单提交到我的数据库中。问题是，如果所有字段都已完成，它只会插入到数据库中。我怎样才能做到这一点，以便我可以将一些字段留空，但让它在其余部分正常工作？

```
//connection statements above

$first=$_POST['first'];
$last=$_POST['last'];
$signed=$_POST['signed'];
$cardnumb=$_POST['cardnumb'];
$perm=$_POST['permcard'];

$stmt = $mysqli->prepare("INSERT INTO information (first_name, last_name, signed, number, permanent) VALUES (?,?,?,?,?)");

$stmt->bind_param("sssss", $first, $last, $signed, $cardnumb, $perm);
$stmt->execute();
$stmt->close(); 
```

为了清楚起见，如果所有字段都已填写，则此代码可以正常工作。如果字段为空，它将不起作用。

有没有办法让这个工作与空字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:41:37.827

如果您不填写该字段，是否`$_POST['varname'];`返回`null`或空字符串？

如果它是一个空字符串，这应该仍然可以正常工作。

如果是，`null`那么只要允许字段`null`在数据库中，它就应该工作。

检查您的表格方案并确保允许字段为`null`.

# macos - 更改时用指南针编译scss文件

> ID：12979545
> 
> 赞同：1
> 
> 时间：2012-10-19T17:39:24.427
> 
> 标签：macos, plist, compass-sass, sass

我正在尝试在 scss 文件更改后立即对其进行编译。

我安装了指南针：

```
gem install compass 
```

我创建了一个 plist 文件，`~/Library/LaunchAgents/compile_scss.plist`：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>Compass</string>
    <key>ProgramArguments</key>
    <array>
        <string>compass</string>
        <string>compile</string>
        <string>/Users/name/localhost/compass/lala.scss</string>
    </array>
    <key>WatchPaths</key>
    <array>
        <string>/Users/name/localhost/compass/lala.scss</string>
    </array>
</dict>
</plist> 
```

我加载了它：

```
launchctl load ~/Library/LaunchAgents/compile_scss.plist 
```

然后，我更改了`lala.scss`文件。

**问题：没有创建lala.css文件...**

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:56:05.383

运行以下命令：`compass watch /directory/with/your/site`开始监视更改。

# css - CSS 添加背景图片的宽度和高度

> ID：12979556
> 
> 赞同：0
> 
> 时间：2012-10-19T17:40:18.327
> 
> 标签：css, size, background-image

是否有任何技巧或可能性添加 css background-image:; 图片宽度和高度？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:41:47.140

使用背景大小属性：

```
#your_div
{
  background:url(your_image.png);
  background-size:80px 60px;
  background-repeat:no-repeat;
} 
```

# java - 单例设计模式及其子类的默认构造函数

> ID：12979558
> 
> 赞同：1
> 
> 时间：2012-10-19T17:40:22.817
> 
> 标签：java

在我的编码中，我使用`Singleton`带有`Singleton Design Pattern`. 问题是为什么它的子类不允许使用默认构造函数？

我得到编译时错误：

```
Implicit super constructor Singleton() is not visible. Must explicitly invoke another constructor 
```

单例.java

```
public class Singleton {
    private static Singleton singleton;

    private Singleton() {
        System.out.println("I am user class");
    }

    public static Singleton getInstance() {
        if(singleton == null) {
            singleton = new Singleton();
        }
        return singleton;
    }

} 
```

子类.java

```
public class SubClass extends Singleton {
    public SubClass(){
        System.out.println("I am sub class");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T17:42:26.190

当您创建`SubClass`then 的实例时，它会自动调用其`constructor`的实例`SuperClass`来初始化其字段，并进一步调用`inheritance hierarchy`

现在因为你的`SuperClass`构造函数是私有的，所以它不能调用它。所以，你得到了那个例外..

`subclass`但这对一个类没有意义`singleton`，因为在那种情况下，`your class will no longer be singleton`.

你应该`re-think`了解你`design`和你正在尝试做的事情。以及`change`相应的设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:41:44.780

SingleTon 类不应该被继承，所以下面确保

```
private Singleton() { 
```

下面的代码

```
public SubClass(){
    System.out.println("I am sub class");
} 
```

等同于：

```
public SubClass(){
    super(); //Error here as super class constructor is private
    System.out.println("I am sub class");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:41:41.353

因为您的`Singleton`类无参数构造函数是`private`. 当您实例化子类时，它也会尝试实例化超类。但是你的超类有私有构造函数。它失败。

```
 private Singleton() {
        System.out.println("I am user class");
    } 
```

子类化是没有意义的`Singleton`。您可能需要重新考虑您的设计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T17:45:27.283

首先，子类化一个单例类打破了基础。`Singleton Pattern.` 其次，由于通过继承树调用构造函数的链，由于父类的构造函数是`private`.

您可能会添加一个带有一些参数的公共构造函数，以使子代从其父代继承。然后你可能会有很多`SubClass`. 任何`Subclass`实例**都是 IS-A** `Singleton`实例。这违背了单例模式的目的。这就是为什么你应该避免子类化一个单例类。

# javascript - 如何在没有事件侦听器的情况下在 JavaScript 中获取文件对象？

> ID：12979567
> 
> 赞同：0
> 
> 时间：2012-10-19T17:41:09.913
> 
> 标签：javascript

我想在不使用事件监听器的情况下从 html 文件输入类型获取 JavaScript 中的文件对象。有很多事件监听器使用更改事件的示例，但我缺少有关如何使用自定义函数获取文件以获取文件以进行进一步处理（websockets 等）的示例。有人有一个很好的例子吗？

# python - 使用 pandas 进行基本绘图

> ID：12979568
> 
> 赞同：0
> 
> 时间：2012-10-19T17:41:14.850
> 
> 标签：python, plot, pandas

我有一个基本（几乎是天真的）问题，用于在熊猫 df 上绘图。鉴于下面的 df，我正在尝试为“stats_value”和“read1_length”v/s“lib_name”做一个堆栈条图。

```
 temp1=

               parent_library_name lib_name stats_value  read1_length
    58                  None     CXYY         106           150
    311                 CXYY     CSGW         128           150
    432                 CXYY     CSNS         109           150
    552                 CXYY     CXPS         125           150
    671                 CXYY     CXOA         123           150
    1113                CXYY     CXOC         108           150
    1394                CXYY     CXOO         129           150
    1675                CXYY     CXOP         101           150
    1794                CXYY     CXSP         132           150
    1914                CXYY     CXOY         116           150
    2356                CXYY     CXSO          69           150
    2635                CXYY     CSHT          77           150
    2914                CXYY     CXSU          76           150 
```

尝试了以下事情：

```
c=temp1.set_index('lib_name')
c[['stats_value','read1_length']].plot(kind='bar',stacked=True)

Error:
TypeError: unsupported operand type(s) for +: 'numpy.float64' and 'str' 
```

尝试了一些简单的东西来测试：

```
c=temp1.set_index('lib_name')
c[['stats_value']].plot()

Error:
AttributeError: 'numpy.ndarray' object has no attribute 'find' 
```

所以我想我在这里错过了一些技巧。

最好的，-Abhi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:30:15.687

stats_value 的 dtype 不正确......再次绘图......

-一种

# ios - ios模拟器启动时出现黑屏/黑屏

> ID：12979570
> 
> 赞同：1
> 
> 时间：2012-10-19T17:41:19.980
> 
> 标签：ios, xcode

我正在尝试将用户信息输入到 coredata 中，以便可以将其发送到我的 php 并进行 MySQL 登录。但是，当我只测试 coredata 部分时，我得到的只是一个黑色/空白屏幕，没有 xcode 错误或错误报告（在自定义图像加载屏幕之后，应该有我的背景和按钮）。下面是我的代码，显然不包括情节提要和 xcdatamodeld（实际存储核心数据输入）。有什么我做错了吗？

Appdelegate.h

```
#import <UIKit/UIKit.h>

@class LoginViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    LoginViewController *viewController;
}
@property (strong, nonatomic) IBOutlet LoginViewController *viewController;
@property (strong, nonatomic) UIWindow *window;
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;
- (void)saveContext;

@end 
```

Appdelegate.m

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;
@synthesize viewController;

- (BOOL)application:(UIApplication *)application
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc]
                   initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

登录视图控制器.h

```
 #import <UIKit/UIKit.h>

    @interface LoginViewController : UIViewController {
        UITextField *username;
        UITextField *password;

    }
    @property (strong, nonatomic) IBOutlet UITextField *username;
    @property (strong, nonatomic) IBOutlet UITextField *password;
    - (IBAction)saveData:(id)sender;

@end 
```

登录视图控制器.m

```
#import "LoginViewController.h"
#import "AppDelegate.h"
#import "Contacts.h"

@interface LoginViewController ()

@end

@implementation LoginViewController

@synthesize username, password;

- (IBAction)saveData:(id)sender {

    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *context = [appDelegate managedObjectContext];

    NSManagedObject *newContact;

    newContact = [NSEntityDescription insertNewObjectForEntityForName:@"Contacts" inManagedObjectContext:context];

    [newContact setValue:username.text forKey:@"username"];
    [newContact setValue:password.text forKey:@"password"];

    username.text = @"";
    password.text = @"";

    NSError *error;
    [context save:&error];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}
@end 
```

联系人.h

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface Contacts : NSManagedObject

@property (nonatomic, retain) NSString * username;
@property (nonatomic, retain) NSString * password;

@end 
```

联系人.m

```
#import "Contacts.h"

@implementation Contacts

@dynamic username;
@dynamic password;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:52:38.613

原因是，您没有在窗口中添加任何视图控制器。

只需在其上添加您的登录控制器，

喜欢

```
 - (BOOL)application:(UIApplication *)application
 didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
      self.window = [[UIWindow alloc]
                initWithFrame:[[UIScreen mainScreen] bounds]];
      [self.window addSubView:viewController.view]; 
      // OR self.window.rootController = viewController;
      [self.window makeKeyAndVisible];
      return YES; 
```

}

# syntax - 如何使用降价按顺序编写两个单独的块引用？

> ID：12979577
> 
> 赞同：61
> 
> 时间：2012-10-19T17:41:43.797
> 
> 标签：syntax, markdown, quote

我需要按顺序放置两个块引用，但是降价将它们组合成一个块引用。我可以让它们分开的唯一方法是在它们之间放置一些垃圾文本。由于此文本字段允许我使用 Markdown，因此我可以演示：

```
> First Quote

> Second Quote 
```

结果是：

> 第一次报价
> 
> 第二次报价

使用垃圾文本时：

```
> First Quote

.   
> Second Quote 
```

结果是：

> 第一次报价

.

> 第二次报价

**我不能使用 HTML 标签或 HTML 实体。只有降价。**

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-25T10:29:51.097

`<!-- -->`您可以通过在块之间使用带有额外白线的注释标记来分隔没有 html 元素的块引用：

```
> Imagination is more important than knowledge.

<!-- -->
>  Never think of the future. It comes soon enough.

<!-- -->
> Anyone who has never made a mistake has never tried anything new. 
```

当然，您也可以使用任何您喜欢的 HTML 元素（如 @pepoloan 所述）：

```
> Imagination is more important than knowledge.

<div></div>
>  Never think of the future. It comes soon enough.

<div></div>
> Anyone who has never made a mistake has never tried anything new. 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-12-01T16:32:11.520

一个空的标题，`#`后跟一个空格也可以。

```
> Hello World

# 

> Goodbye world 
```

不幸的是，它并不比它好多少，`<!-- -->`但我更喜欢它，并使用它。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-19T17:47:58.377

>如果我尝试非破坏空间

>它换行；不要问我怎么

结果：

> 如果我尝试非破坏空间

> 它换行；不要问我怎么

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-19T17:48:04.747

尝试这个：

在引号之间使用 U+200B 字符，该字符被定义为用于分隔引号的零长度空格。

```
> Quote

​

> Quote 
```

它看起来像这样：

> > 报价

​</p>

> > 报价

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T02:12:16.197

您可以使用[pandoc](http://johnmacfarlane.net/pandoc/)，它将您的原始输入解析为两个连续的块引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-12T03:25:39.393

从实验中，我发现这些也有效。请注意，它们不是合法的 HTML 或 Markdown，但它们似乎可以完成这项工作：

```
<!

<$

</

<a 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-06-08T10:14:19.900

一种方法是`</>`在第一个块引用之后添加一个换行符。通过这种方式，也不会打印任何内容。

> 第一次报价

> 第二次报价

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2020-06-06T07:31:44.823

您有类似第一个块引用的内容，然后输入 2 并在第二次输入`#`时为标题提供一个符号，但将标题留空，然后在下一行中进行下一个引用。

> 这是一个报价

# 

> 这是另一个报价

# windows-8 - 点击视觉白色圆圈指示器窗口 8

> ID：12979585
> 
> 赞同：0
> 
> 时间：2012-10-19T17:42:15.847
> 
> 标签：windows-8

在大多数 Windows 8 应用程序中，当您点击应用程序内的任意位置时，您会看到一个白色圆圈的点击通知。出于某种原因，通知不会出现在我的应用程序中。指示是如何启用或禁用的？

我尝试了 IsHitTestVisible ，但在我的分组项目页面中看不到任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:30:59.017

[IsHitTestVisible](http://msdn.microsoft.com/en-us/library/system.windows.uielement.ishittestvisible.aspx)与白灰色轻敲短动画无关，这是一个外壳功能。当操作系统上下文中发生触摸事件时，所有应用程序都会显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:48:06.353

[这个问题与我最近的问题](https://stackoverflow.com/questions/15760450/disable-touch-feedback-by-code-in-windows-8-store-apps/)有点相关，所以如果有人试图解决同样的问题，我会在这里留下答案。

您可以通过以下方式禁用/启用视觉点击反馈：

```
PointerVisualizationSettings.GetForCurrentView().IsContactFeedbackEnabled = false; 
```

您也可以[在控制面板中永久删除它](http://answers.microsoft.com/en-us/windows/forum/windows_8-hardware/how-do-i-turn-off-pen-feedback-in-windows-8/4cbfb07b-6d19-4e86-b7fe-ae97dff3e0e2)。

# php - 如何在 PHP 中解析固定宽度的文本文件？

> ID：12979590
> 
> 赞同：2
> 
> 时间：2012-10-19T17:42:31.137
> 
> 标签：php, parsing

我有大量数据，如下所示：

```
 PHHI   GFSX MOS GUIDANCE  10/19/2012  1200 UTC                       
 FHR  24  36| 48  60| 72  84| 96 108|120 132|144 156|168 180|192      
      SAT 20| SUN 21| MON 22| TUE 23| WED 24| THU 25| FRI 26|SAT CLIMO
 N/X  66  80| 68  82| 66  82| 66  81| 66  80| 67  82| 67  81| 67999999
 TMP  69  79| 71  81| 69  80| 69  80| 69  79| 69  80| 70  80| 70      
 DPT  63  64| 66  63| 64  64| 65  64| 65  66| 66  68| 68  65| 66      
 WND  11  10| 10  12| 11   9|  9   8|  8   8|  8   8|  8   7|  7      
 P12   8   9| 11   9| 21  14| 20  10| 18  20| 28  28| 46  15| 32999999
 P24      14|     19|     14|     23|     19|     36|     40|      999
 Q12   0   0|  0   0|  0   0|  0   0|  0   0|  1   1|       |         
 Q24       0|      0|      0|      0|      0|      1|       |         

 PHJH   GFSX MOS GUIDANCE  10/19/2012  1200 UTC                       
 FHR  24  36| 48  60| 72  84| 96 108|120 132|144 156|168 180|192      
      SAT 20| SUN 21| MON 22| TUE 23| WED 24| THU 25| FRI 26|SAT CLIMO
 N/X 999  84|999  84|999  84|999  85|999  84|999  84|999  84|999999999
 TMP 999  83|999  82|999  83|999  83|999  83|999  83|999  83|999      
 ........etc 
```

我需要在 PHP 中对其进行处理，以便可以将其放入 MYSQL 数据库中。

在第一行中，需要第一个单词（电台名称）和日期/时间。根本不需要第二行和第三行。`|`性格无关紧要。最后两列有问题：

```
192      
SAT CLIMO
 67999999
 70      
 66      
  7      
 32999999
      999 
```

这些数字相互接触，但实际上它们是 2 个独立的变量。它应该看起来更像这样：

```
192      
SAT CLIMO
 67 999999
 70      
 66      
  7      
 32 999999
      999 
```

关于如何解析这个的任何提示？是否有任何用于解析固定宽度数据的辅助功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-13T20:52:17.750

这是 O'Reilly PHP Cookbook 中回答的经典 PHP 问题。

[解析固定宽度分隔的数据](http://docstore.mik.ua/orelly/webprog/pcook/ch01_11.htm)

`substr`工作正常。但是，`unpack`这是我最喜欢的，因为它在下面使用 C 函数并且速度更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:56:03.503

你可以试试

```
$file = "log.txt";
$list = $part = array();

foreach ( file($file) as $line ) {
    $line = trim($line);
    if (strpos($line, "|") === false) {
        continue;
    }
    $line = explode("|", $line) and $line = end($line);
    $list[] = substr($line, 0, 3) . " " . substr($line, 3);
}
var_dump($list); 
```

输出

```
array
  0 => string '192 ' (length=4)
  1 => string 'SAT  CLIMO' (length=10)
  2 => string ' 67 999999' (length=10)
  3 => string ' 70 ' (length=4)
  4 => string ' 66 ' (length=4)
  5 => string '  7 ' (length=4)
  6 => string ' 32 999999' (length=10)
  7 => string '       999' (length=10)
  8 => string ' ' (length=1)
  9 => string ' ' (length=1)
  10 => string '192 ' (length=4)
  11 => string 'SAT  CLIMO' (length=10)
  12 => string '999 999999' (length=10)
  13 => string '999 ' (length=4) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:58:09.700

过去我使用 substr() 函数从特定字段获取数据：

[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

例如：

```
//Index:

012345678

192      
SAT CLIMO
 67999999
 70      
 66      
  7      
 32999999
      999 
```

对于第一列，我会有类似的内容：

```
while($line = fgets($file)){

    $column1 = substr($line, 0, 3);
    $column2 = substr($line, 3, 6);
}

// for the line 32999999, you get:
// $column1 = 32
// $column2 = 999999 
```

您可以将这些索引设为常量，并且必须先尝试使用它才能通过一些字符计数来使其正确，但这将解决数字一起运行的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T17:45:45.280

我会在[`fscanf`](http://www.php.net/fscanf)这里使用该功能。

# objective-c - UItableview 可变节标题高度和内容

> ID：12979591
> 
> 赞同：0
> 
> 时间：2012-10-19T17:42:33.610
> 
> 标签：objective-c, ios, uitableview

有谁知道如何创建一个具有可变高度部分标题和内容的 UITableView，类似于 Facebook iPhone 应用程序？

所以我希望一些标题有文本（例如收藏夹、应用程序等）。但是有些部分的标题我只想要没有文本，而是 5 像素高的分隔符（例如，在 Facebook Messenger 应用程序分隔符中）。

例子：

```
FAVORITES <-- Header:
 fav1
 fav2
 fav3

APPS   <-- Header: this is all apps header
 app1  <-- these are the most used apps
 app2
=====  <-- Header: this is a header with no text (see Facebook Messenger)
 app3  <-- apps not used in a long time
 app4

FRIENDS <-- Header:
 Sam
 Tina 
```

所以我需要节标题的动态内容。这些部分每次都需要按特定顺序排列。最后，节标题需要有一定的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:51:13.943

您需要参考 UITableViewDelegate 和 UITableViewDatasource 文档。

具体这两种方法：

[– 表视图：heightForHeaderInSection：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForHeaderInSection%3a)

和

[- 表视图：viewForHeaderInSection：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aviewForHeaderInSection%3a)

# python - itertools.islice 不是生成器？

> ID：12979592
> 
> 赞同：2
> 
> 时间：2012-10-19T17:42:34.030
> 
> 标签：python, itertools

我有一个适用于生成器和生成器函数的代码。当我尝试使用 对生成器进行切片时`itertools.islice`，代码段不会生成任何输出。

我查看了代码，发现了以下代码片段：

```
if isinstance(result, dict):
    self.returned(result)
elif inspect.isgenerator(result):
    for x in result:
        self.returned(x)
else:
    self.returned(result) 
```

事实证明，`inspect.isgenerator`返回`False`for `itertools.islice`，这就是破坏代码的原因。`inspect.isgeneratorfunction`行为相同。

1.  不是`itertools.islice`生成器，还是生成器函数？
2.  我怎样才能找出`result`是生成器还是`itertools.islice`对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:50:38.157

基于

```
inspect.getmembers(itertools.islice) 
```

`islice`是迭代器，而不是生成器。更多信息[Python 的生成器和迭代器之间的区别](https://stackoverflow.com/questions/2776829/difference-between-python-generators-vs-iterators)

# android - Android-listView 中的自定义字体使滚动变得迟钝？

> ID：12979593
> 
> 赞同：2
> 
> 时间：2012-10-19T17:42:36.830
> 
> 标签：android, fonts, android-listview

我有一个`ListView`有一百个滚动良好的项目。我在其中一个中添加了一种自定义字体`TextView`，现在它不连贯。我已经尝试过 otf 和 ttf 字体。

这是我的代码（简化）：

```
public class ItemAdapter extends ArrayAdapter<ItemObject> implements
        SectionIndexer {

private Typeface myTypeface; // class variable

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {

            convertView = inflater.inflate(R.layout.item_row_layout, parent,
                    false);
            holder = new ViewHolder();
            holder.t1 = (TextView) convertView.findViewById(R.id.itemName);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        ItemObject io = getItem(position);
        String name = io.name;

        myTypeface = Typeface.createFromAsset(convertView.getContext().getAssets(), "fonts/listitemfont.ttf");

        holder.t1.setText(name);
        holder.t1.setTypeface(myTypeface);

        return convertView;
    } 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T17:45:58.430

*每次*调用时您都在创建相同的字体`getView()`，将此行移动到您的构造函数中：

```
myTypeface = Typeface.createFromAsset(convertView.getContext().getAssets(), "fonts/listitemfont.ttf"); 
```

而且您可能也不需要每次都重新设置字体，只需在创建 TextView 时。

```
if (convertView == null) {
    ...
    holder.t1 = (TextView) convertView.findViewById(R.id.itemName);
    holder.t1.setTypeface(myTypeface); // Move this here
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T17:45:32.840

每次调用 getView 时，您似乎都在创建一个新的字体（很多）。尝试`myTypeface = Typeface.createFromAsset(convertView.getContext().getAssets(), "fonts/listitemfont.ttf");`进入适配器的构造函数。

# java - java具有相同的类名和包名

> ID：12979596
> 
> 赞同：1
> 
> 时间：2012-10-19T17:42:42.210
> 
> 标签：java

在java中，我们可以有一个与包名同名的类名吗？例如，

```
 package abc;
 class abc{
 } 
```

注意：我知道类名应该以大写字母开头，所以在这种情况下请忽略它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:51:37.500

这完全没问题。您的班级`abc`将被称为`abc.abc`合格路径。

# java - Java ODBC 数据源（未定义符号：SQLAllocEnv）

> ID：12979601
> 
> 赞同：5
> 
> 时间：2012-10-19T17:42:56.683
> 
> 标签：java, mysql, odbc

我有以下 Java 代码。此代码的目的是建立与远程 MySQL 数据库 ProductionDb（我的 /etc/odbc.ini 文件中定义的数据源）的连接。

```
import java.sql.*;
import java.util.*;
import java.io.*;

public class Test {

    public static void main(String[] args) {

        try {
            Connection conn = null;
            PreparedStatement s = null;
            String driver = "sun.jdbc.odbc.JdbcOdbcDriver";

            Class.forName(driver).newInstance();
            conn = DriverManager.getConnection("jdbc:odbc:ProductionDb");

        } catch (Exception ex) {
            System.out.println(ex.getMessage());
        }
    }

} 
```

/etc/odbc.ini 文件是：

```
$ cat /etc/odbc.ini
[ProductionDb]
Driver = /usr/lib/odbc/libmyodbc.so
Description = Production Database
Server = [ hidden ] 
Port = 3306
User = [ hidden ] 
Password = [ hidden ] 
Database = ProductionDb 
```

顺便说一句 - 我正在使用 Java 7 和 Ubuntu：

```
 $java -version
    java version "1.7.0_09"
    Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
    Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode)

 $lsb_release -a
    No LSB modules are available.
    Distributor ID: Ubuntu
    Description:    Ubuntu 11.04
    Release:    11.04
    Codename:   natty 
```

当我尝试运行我的程序时，出现以下错误：

```
$java Test
java: symbol lookup error: /usr/lib/jvm/java-7-oracle/jre/lib/amd64/libJdbcOdbc.so: undefined symbol: SQLAllocEnv 
```

有谁知道我为什么会收到这个错误？这里有什么问题？

PS顺便说一句，我确实运行了 sudo apt-get install unixodbc-dev ， sudo apt-get install libmyodbc 和 sudo apt-get install libmysql-java :-)

**更新：**

我还尝试了以下答复之一（由 Benny Hill 提出）中建议的想法：使用 /etc/odbcinst.ini 以及 /etc/odbc.ini。仍然不起作用，我收到相同的错误消息。

```
$ cat /etc/odbc.ini
    [ProductionDb]
    Driver = MySQL Driver 
    Description = Production Database
    Server = [ hidden ] 
    Port = 3306
    User = [ hidden ] 
    Password = [ hidden ] 
    Database = ProductionDb

$ cat /etc/odbcinst.ini
    [MySQL Driver]
    Driver = /usr/lib/odbc/libmyodbc.so 
```

**附加说明：**

我可以通过 R 编程语言成功使用这个 ODBC 数据源。

```
> library(odbc)
> con = odbcConnect("ProductionDb") 
> con
RODBC Connection 1
Details:
  case=nochange
  DSN=ProductionDb 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T17:53:31.120

该错误是 libJdbcOdbc.so 在其他一些 .so 中查找函数“SQLAllocEnv”但未找到它的结果。调试的方法是运行命令**ldd /usr/lib/jvm/java-7-oracle/jre/lib/amd64/libJdbcOdbc.so**。这将向您显示链接的 .so 对象列表及其所在位置。

一般来说，它们应该在 /usr/lib 中，但是如果您自己编译了任何软件，您可能会发现其中一些库位于 /usr/local/lib 或其他位置。如果您有任何显示在 /usr/local/lib 中的内容，则可能这就是导致您的问题的原因。要进行测试，请将 /usr/local/lib 中的库重命名为其他名称（**sudo mv /usr/local/lib/mylib.so /usr/local/lib/mylib.so.SAVE**）。

现在运行你的程序，看看你是否仍然得到同样的错误。如果这能解决您的问题，那就太好了！如果没有，请告诉我们您是否收到相同的错误消息或是否收到新消息。

我希望您的 odbc.ini 文件看起来像这样：

```
[primary]
Description             = primary
Driver                  = iSeries Access ODBC Driver
System                  = XXX.XXX.XXX.XXX
UserID                  = XXXXXXXXXX
Password                = XXXXXXXXXX
Naming                  = 0
DefaultLibraries        = QGPL
Database                = XXXXXXXXXX
ConnectionType          = 0
CommitMode              = 2
ExtendedDynamic         = 0
DefaultPkgLibrary       = QGPL
DefaultPackage          = A/DEFAULT(IBM),2,0,1,0,512
AllowDataCompression    = 1
LibraryView             = 0
AllowUnsupportedChar    = 0
ForceTranslation        = 0
Trace                   = 0 
```

你的 odbcinst.ini 文件看起来像这样：

```
[iSeries Access ODBC Driver]
Description     = iSeries Access for Linux ODBC Driver
Driver          = /usr/lib/libcwbodbc.so
Setup           = /usr/lib/libcwbodbcs.so
NOTE1           = If using unixODBC 2.2.11 or later and you want the 32 and 64-bit ODBC drivers to share DSN's,
NOTE2           = the following Driver64/Setup64 keywords will provide that support.
Driver64        = /usr/lib/lib64/libcwbodbc.so
Setup64         = /usr/lib/lib64/libcwbodbcs.so
Threading       = 2
DontDLClose     = 1
UsageCount      = 1 
```

我的示例显示了我对远程 iSeries 的设置，但我相信您可以看到您需要为 MySQL 更改的内容。

即您的 odbc.ini "Driver = ..." 行是错误的。它应该类似于“Driver = mysql”，然后您需要在 odbcinst.ini 文件中定义 [mysql]。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T15:41:41.153

听起来像是缺少或不匹配的库。尝试调试 ldd 处理。

首先，检查什么

```
$ ldd /usr/lib/jvm/java-7-oracle/jre/lib/amd64/libJdbcOdbc.so 
```

说，是否所有列出的依赖项都存在？

然后，尝试设置 LD_DEBUG 并再次启动您的 Java 程序，以查看加载程序调试。

```
$ export LD_DEBUG=all
$ java Test 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-04T16:28:44.107

要解决此问题，请将以下内容添加到您的启动脚本或配置文件中：

```
export LD_PRELOAD=$LD_PRELOAD:/usr/lib/libodbc.so:/usr/lib/libodbcinst.so 
```

您的路径可能会有所不同，对我来说 /usr/lib64 中的 .so 文件。

“由于库“libodbc.so”和“libodbcinst.so”libJdbcOdbc.so 未从实现 JDBC-ODBC 桥的库中加载，因此存在错误。”

根据[https://code.google.com/p/queryconnector/source/browse/wiki/HowToInstall.wiki?spec=svn122&r=121](https://code.google.com/p/queryconnector/source/browse/wiki/HowToInstall.wiki?spec=svn122&r=121)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-27T16:02:06.300

我之前使用过带有 JDBC 的 MySQL，我知道的最简单的连接方法是使用 Connector/J，它是官方的 MySQL 驱动程序。它将与您的 ODBC 驱动程序执行相同的操作，并且不需要可能导致您的问题的本机内容。

从这里获取驱动程序：http: [//dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)

上一页的文档。

文档如何连接：[http ://dev.mysql.com/doc/refman/5.1/en/connector-j-usagenotes-connect-drivermanager.html#connector-j-examples-connection-drivermanager](http://dev.mysql.com/doc/refman/5.1/en/connector-j-usagenotes-connect-drivermanager.html#connector-j-examples-connection-drivermanager)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-27T11:45:37.930

进入目录：

```
/usr/lib/jvm/java-7-oracle/jre/lib/amd64/ 
```

并将文件重命名`libJdbcOdbc.so`为`libJdbcOdbcXXX.so`

这对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T09:25:36.557

作为一种解决方法，如果 SQLAllocEnv 在 /usr/lib/odbc/libmyodbc.so 中定义，您可以尝试在使用 JDBC 之前强制加载它

```
 try {
        System.load("/usr/lib/odbc/libmyodbc.so");
    } catch (UnsatisfiedLinkError e) {
      e.printStackTrace();
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-14T19:10:59.323

导出 LD_PRELOAD=$LD_PRELOAD:/usr/lib/libodbc.so:/usr/lib/libodbcinst.so

一旦我在 .bash_profile 中定义了它，就获取它，它对我来说很好用。

# c# - 错误''只有赋值、调用、递增、递减和新对象表达式可以用作语句''，第116行第30列

> ID：12979603
> 
> 赞同：3
> 
> 时间：2012-10-19T17:43:00.603
> 
> 标签：c#, .net, sql

好吧，我是一个新手，并且正在尝试编译一个 .NET 应用程序，但是我在重新编译时遇到了很多错误，尤其是这个错误：

> 只有赋值、调用、递增、递减和新对象表达式可以用作语句

在第 116 行，您有`{ SqlDataReader CS;1;0000; }`什么建议？

```
namespace ProBall
{
    using System;
    using System.Collections.Generic;
    using System.Configuration;
    using System.Data.SqlClient;
    using System.IO;
    using System.Net;
    using System.Runtime.InteropServices;

    public class DataManager
    {
        public static List<string> barcodes = new List<string>();
        private string connStr;
        private string queryStr;
        public static bool queueMessage;
        public static bool serverStatus = false;

        public DataManager()
        {
        }

        public DataManager(string connStr, string queryStr)
        {
            this.connStr = connStr;
            this.queryStr = queryStr;
        }

        public static IPAddress FindIPAddress(bool localPreference)
        {
            return FindIPAddress(Dns.GetHostEntry(Dns.GetHostName()), localPreference);
        }

        public static IPAddress FindIPAddress(IPHostEntry host, bool localPreference)
        {
            if (host == null)
            {
                throw new ArgumentNullException("host");
            }
            if (host.AddressList.Length != 1)
            {
                foreach (IPAddress address in host.AddressList)
                {
                    bool local = IsLocal(address);
                    if (local && localPreference)
                    {
                        return address;
                    }
                    if (!(local || localPreference))
                    {
                        return address;
                    }
                }
            }
            return host.AddressList[0];
        }

        public string FormatDates(string date)
        {
            string tmpDate = date;
            try
            {
                string[] nDate = null;
                string day = string.Empty;
                string month = string.Empty;
                string year = string.Empty;
                if (tmpDate.Contains("/"))
                {
                    nDate = date.Split(new char[] { '/' });
                    day = nDate[0];
                    month = nDate[1];
                    year = nDate[2].Split(new char[] { ' ' })[0];
                    return (month + "/" + day + "/" + year);
                }
                if (tmpDate.Contains("-"))
                {
                    tmpDate = date.Split(new char[] { ' ' })[0];
                }
            }
            catch (Exception er)
            {
                this.LogError(er.Message, "GENERIC");
            }
            return tmpDate;
        }

        public string GetUserName(string tableName = "employees")
        {
            return this.ReadValue(string.Concat(new object[] { "select id from ", tableName, " where CurrentlyLoggedIn = 1 and LastLoginStation = '", ReturnHostName(), "' and LastLoginStationIP = '", FindIPAddress(true), "'" }), ConfigurationSettings.AppSettings["kcam"]);
        }

        public static bool IsLocal(IPAddress address)
        {
            if (address == null)
            {
                throw new ArgumentNullException("address");
            }
            byte[] addr = address.GetAddressBytes();
            return (((addr[0] == 10) || ((addr[0] == 0xc0) && (addr[1] == 0xa8))) || (((addr[0] == 0xac) && (addr[1] >= 0x10)) && (addr[1] <= 0x1f)));
        }

        public void LogError(string message, string logType = "GENERIC")
        {
            StreamWriter ftmp = new StreamWriter(@"c:\coopnet\server\debug.txt", true);
            ftmp.WriteLine(message);
            ftmp.Close();
        }

        public bool LogOffUser(string tableName = "employees")
        {
            return this.SaveEntityData(string.Concat(new object[] { "update ", tableName, " set CurrentlyLoggedIn = 0  where LastLoginStation = '", ReturnHostName(), "' and LastLoginStationIP = '", FindIPAddress(true), "'" }), ConfigurationSettings.AppSettings["kcam"]);
        }

        public SqlDataReader ReadData()
        {
            SqlDataReader CS;1;0000;
            using (SqlConnection conn = new SqlConnection(this.connStr))
            {
                using (SqlCommand cmd = new SqlCommand(this.queryStr, conn))
                {
                    conn.Open();
                    using (SqlDataReader reader = cmd.ExecuteReader())
                    {
                        CS;1;0000 = reader;
                    }
                }
            }
            ; return CS; 1; 0000;
        }

        public bool ReadData(string query)
        {
            bool status = false;
            this.queryStr = query;
            using (SqlConnection conn = new SqlConnection(this.connStr))
            {
                using (SqlCommand cmd = new SqlCommand(this.queryStr, conn))
                {
                    conn.Open();
                    using (SqlDataReader reader = cmd.ExecuteReader())
                    {
                        if (reader.HasRows)
                        {
                            status = true;
                        }
                    }
                    return status;
                }
            }
        }

        public bool ReadData(string query, string connection)
        {
            bool status = false;
            using (SqlConnection conn = new SqlConnection(connection))
            {
                using (SqlCommand cmd = new SqlCommand(query, conn))
                {
                    conn.Open();
                    using (SqlDataReader reader = cmd.ExecuteReader())
                    {
                        if (reader.HasRows)
                        {
                            status = true;
                        }
                    }
                    return status;
                }
            }
        }

        public string ReadValue(string query, string connectionStr)
        {
            string value = string.Empty;
            this.queryStr = query;
            try
            {
                using (SqlConnection conn = new SqlConnection(connectionStr))
                {
                    using (SqlCommand cmd = new SqlCommand(this.queryStr, conn))
                    {
                        conn.Open();
                        using (SqlDataReader reader = cmd.ExecuteReader())
                        {
                            if (reader.HasRows)
                            {
                                reader.Read();
                                return reader[0].ToString();
                            }
                        }
                    }
                    return value;
                }
            }
            catch (Exception)
            {
                return value;
            }
            return value;
        }

        public static string ReturnHostName()
        {
            return Dns.GetHostName();
        }

        public bool SaveData()
        {
            try
            {
                bool status = false;
                using (SqlConnection conn = new SqlConnection(this.connStr))
                {
                    using (SqlCommand cmd = new SqlCommand(this.queryStr, conn))
                    {
                        conn.Open();
                        cmd.ExecuteReader();
                        status = true;
                    }
                }
                return status;
            }
            catch (Exception se)
            {
                this.LogError(se.Message, "GENERIC");
                return false;
            }
        }

        public bool SaveEntityData(string query, string connectionString)
        {
            try
            {
                Func<string, bool> performQuery = delegate (string querySql) {
                    this.connStr = connectionString;
                    this.queryStr = querySql;
                    return this.SaveData();
                };
                return performQuery(query);
            }
            catch (Exception e)
            {
                this.LogError("Error: " + e.Message, "GENERIC");
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:48:07.540

看起来您正在尝试将该值`CS;1;0000;`用作变量名，但根据 Language Spec [§2.4.2 Identifiers](http://msdn.microsoft.com/en-us/library/aa664670.aspx) ，这是无效的。您不能在变量名中使用分号，因为它们作为语句的结尾具有特殊含义。如果您将该变量重命名为`CS10000`或`CS_1_0000`应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:48:00.730

正如您可能已经猜到的那样：

```
SqlDataReader CS; 1; 0000;
CS;1;0000 = reader;
; return CS; 1; 0000; 
```

无效。您需要修复此问题才能编译您的代码。

尝试`;`用下划线或其他东西替换上面的代码：

```
SqlDataReader CS_1_0000;
CS_1_0000 = reader;
return CS_1_0000; 
```

在 .NET 中，分号表示一行的结尾。这也意味着以下代码将是有效的：

```
SqlDataReader CS; SqlDataReader cs2; 
```

这一行将创建两个变量。`CS`和`cs2`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T17:47:32.227

看看你的`public SqlDataReader ReadData()`方法。它有分号的问题。

`SqlDataReader CS;1;0000;`不是合法的语法。您不能命名变量 CS;1;10000; 将其称为 CS1000 并重复该方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T17:48:56.783

您应该使用变量名而不是“CS;1;0000;” （例如 tempReader）

# excel - 如果工作表的第一行没有列名，如何通过 ADODB 连接从 Excel 中检索数据？

> ID：12979605
> 
> 赞同：4
> 
> 时间：2012-10-19T17:43:02.237
> 
> 标签：excel, vba, adodb

我使用以下类型的代码从一些 Excel 工作簿中检索数据（路径是一个参数）

```
Dim strSQL  As String, conStr as String
Dim cnn As New ADODB.Connection
Dim rs As New ADODB.Recordset

conStr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source='" & path & "';" & _
             "Extended Properties=""Excel 12.0;HDR=YES;IMEX=1;"";"

strSQL = "SELECT [Field1], [Field2] FROM [Worksheet$] WHERE [Thing1] > 1"

cnn.open conStr   
rs.Open query, cnn, adOpenStatic, adLockOptimistic, adCmdText 
```

如果字段的名称位于工作表的第一行，则该代码可以正常工作。问题是我需要从数据表从另一行（第 10 行）开始的工作表中检索数据。

有没有办法指定我的数据表的第一行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T17:56:09.907

请参阅此[Microsoft 页面](http://support.microsoft.com/kb/257819)。你可以使用类似的东西：

```
strSQL = "SELECT [Field1], [Field2] FROM [Worksheet$$A10:B43] WHERE [Thing1] > 1" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T17:59:41.367

在查询中使用命名或未命名范围：

```
strQuery = "SELECT * FROM MyRange"

strQuery = "SELECT * FROM [Sheet1$A1:B10]" 
```

有关详细信息，请参阅这些 Microsoft 支持文章：

[如何将 ADO 与 Visual Basic 或 VBA 中的 Excel 数据一起使用](http://support.microsoft.com/kb/257819)

[ExcelADO 演示如何使用 ADO 在 Excel 工作簿中读取和写入数据](http://support.microsoft.com/kb/278973)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T17:57:12.600

您可以从第 10 行开始查询一系列单元格：

```
 "SELECT * FROM [Worksheet$A10:S100] WHERE [Thing1] > 1" 
```

很难找到范围的终点应该是什么。您可以输入一个大得离谱的数字，但是您必须在最后为 NULL 行添加特殊处理。

# java - APACHE POI - cloneStyleFrom 不复制 BorderStyle

> ID：12979609
> 
> 赞同：3
> 
> 时间：2012-10-19T17:43:10.760
> 
> 标签：java, apache, excel, jakarta-ee, apache-poi

我的库 apache poi 有问题，我想复制单元格的样式，为此我使用函数 cloneStyleFrom()，除了边框样式的副本外，所有的工作都很好。我不明白是我的错误还是这个函数没有实现边框样式的副本。

这是我的代码：

```
int stHashCode = oldCell.getCellStyle().hashCode();
XSSFCellStyle newCellStyle = styleMap.get(stHashCode);
if (newCellStyle == null) {
    newCellStyle = newCell.getSheet().getWorkbook().createCellStyle();
    newCellStyle.cloneStyleFrom(oldCell.getCellStyle());
    styleMap.put(stHashCode, newCellStyle);
}
    newCell.setCellStyle(newCellStyle); 
```

有人可以帮助我吗？我的错误在哪里？

谢谢

# python - 访问 python minidom 节点数据

> ID：12979612
> 
> 赞同：1
> 
> 时间：2012-10-19T17:43:23.773
> 
> 标签：python, xml, minidom

```
import xml.dom.minidom

document = """\
<parent>
    <child1>value 1</child1>
    <child2>value 2</child2>
    <child3>value 3</child3>
</parent>
"""

def getText(nodelist):
    rc = []
    for node in nodelist:
        if node.nodeType == node.TEXT_NODE:
            rc.append(node.data)
        else:
            print "not text: "+ node.toxml()

    return ''.join(rc)

def handleParent(family):
    handleChild(family.getElementsByTagName("parent")[0])

def handleChild(parent):
    print getText(parent.childNodes)

dom = xml.dom.minidom.parseString(document)
handleParent(dom) 
```

谁能告诉我为什么这段代码不会抓取子标签之间的值？这是来自这里的精简示例[http://docs.python.org/library/xml.dom.minidom.html](http://docs.python.org/library/xml.dom.minidom.html)

这是输出：

```
not text: <child1>value 1</child1>
not text: <child2>value 2</child2>
not text: <child3>value 3</child3> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:16:43.110

你需要更深一层。文本是`<childN>`.

```
def getText(nodelist):
    rc = []
    for outer in nodelist:
        for node in outer.childNodes:
            if node.nodeType == node.TEXT_NODE:
                rc.append(node.data)
            else:
                print "not text: "+ node.toxml()

    return ''.join(rc) 
```

# sql-server - CRM 2011 电子邮件哈希库

> ID：12979617
> 
> 赞同：2
> 
> 时间：2012-10-19T17:43:39.653
> 
> 标签：sql-server, dynamics-crm-2011

我刚刚从 4.0 升级到 CRM 2011，我在应用程序日志中看到很多错误，我认为是由于电子邮件路由器。错误文本是“30.0 秒的查询执行时间超过了 10 秒的阈值”。

这是它正在执行的查询：

```
WITH Candidates
        (
            ActivityId
        ) AS
        (SELECT  ActivityId
        FROM     EmailHashBase WITH (NOLOCK)
        WHERE    ActivityId IN
                (SELECT  ActivityId
                FROM     EmailHashBase WITH (NOLOCK)
                WHERE    HashType = 0
                    AND Hash IN (111682,1892164739,45,1824023892,54,3805,125879)
                GROUP BY ActivityId
                HAVING   COUNT(ActivityId) >= 7
                )
            AND HashType = 1
            AND Hash IN (969105075,1418975348,547970098,1044570065,-1578559672,1137188287,-1492206818,1365121987,1893861533,-1313312639,-1829169632,-1685403462,-518982188,1123523219,284291011,-981044541,1790111815,-808308608,-599769785,971845046)
        GROUP BY ActivityId
        HAVING   COUNT(ActivityId) >= 2
        )
SELECT   TOP 1 a.ActivityId
FROM     ActivityPointerBase AS a WITH (NOLOCK)
WHERE    a.ActivityId IN
            (SELECT ActivityId
            FROM    Candidates AS c
            WHERE(
                    (SELECT COUNT(*)
                            FROM    EmailHashBase AS h
                            WHERE   h.ActivityId = c.ActivityId
                                AND h.HashType   = 0
                    )
                    <= 7
                ) 
            )
ORDER BY a.ModifiedOn DESC 
```

直接对数据库运行此查询最多需要一分钟。我使用“Set Statistics IO ON”运行它并得到以下结果：

```
Table 'Worktable'. Scan count 0, logical reads 0, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'EmailHashBase'. Scan count 17696074, logical reads 53155625, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'ActivityPointerBase'. Scan count 1, logical reads 5060, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.

SQL Server Execution Times:
CPU time = 36567 ms,  elapsed time = 36562 ms. 
```

显然，EmailHashBase 有问题。我在 Hash 列上添加了一个非聚集索引并重建了索引，但我仍然得到很高的扫描和逻辑读取计数。

我无法更改查询。

关于我可以对桌子做些什么来解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:43:38.210

结果发现导致延迟的数据库调整顾问创建了一个索引。删除索引已解决问题。

# shell - 为什么 ls 命令结合 xargs 和 cp 只移动 10 个文件？

> ID：12979620
> 
> 赞同：0
> 
> 时间：2012-10-19T17:43:48.480
> 
> 标签：shell, copy, xargs

我有一个命令将文件从一个目录复制到另一个

```
FILE_COLLECTOR_PATH="/var/www/";
FILE_BACKUP_PATH='/home/'
ls  $FILE_COLLECTOR_PATH | head -${1} |  xargs -i basename {} | xargs -t -i cp $FILE_COLLECTOR_PATH{} "${FILE_BACKUP_PATH}{}-`date +%F%H%M%S%N`" 
```

我在一个shell脚本中循环它，比如，

```
#!/bin/sh
SLEEP=120
FILE_COLLECTOR_PATH="/var/www/";
FILE_BACKUP_PATH='/home/'
while true
do
ls  $FILE_COLLECTOR_PATH | head -${1} |  xargs -i basename {} | xargs -t -i cp $FILE_COLLECTOR_PATH{} "${FILE_BACKUP_PATH}{}-`date   +%F%H%M%S%N`"
 sleep ${SLEEP}
done 
```

但它似乎只移动了 10 个文件而不是目录中的所有文件，为什么？它应该假设移动所有文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:44:37.777

尝试做

```
ls -1 
```

而不是 just `ls`，因为`ls`默认情况下不会在`tail`每个文件的换行符（期望换行符）上显示文件`ls -1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:07:13.863

一般来说，[不要尝试解析`ls`脚本中](http://mywiki.wooledge.org/ParsingLs)的输出。您最终可能会遇到许多不同类型的微妙问题。几乎总是有更好的工具来完成这项工作。很多时候，这个工具是[`find`](http://linux.die.net/man/1/find). 例如，要生成目录中所有文件的列表并对每个文件执行某些操作，您可以执行以下操作：

```
find <search directory> -maxdepth 1 -type f -print0 | xargs -0i basename {} ... 
```

`-print0`and`-0`参数允许`find`并以正确处理特殊字符（如空格）的`xargs`方式传达文件名。

该`find`命令还有其他选项，您可能会在备份脚本中发现这些选项（这就是您正在构建的内容）。`-mmin`和之类的选项`-newer`将使您能够仅备份自上次迭代以来已更改的文件。

# r - 垂直组合多个矩阵

> ID：12979622
> 
> 赞同：4
> 
> 时间：2012-10-19T17:43:51.910
> 
> 标签：r

我有一个由生成的设计矩阵

```
 grp.ids <- as.factor(c(rep(1,8), rep(2,4), rep(3,2)))
 x <- model.matrix(~grp.ids) 
```

现在我希望将矩阵垂直连接`x`100 次。如果我只想做 2 次，那么调用 to`rbind(x,x)`就可以了。如何将这个过程重复 100 次？或者有没有其他函数可以直接生成这么大的设计矩阵（基于这个小矩阵块）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T17:47:54.597

你可以使用`do.call(rbind, replicate(100, x, simplify=FALSE))`

# c++ - 错误 C2234：引用数组非法

> ID：12979625
> 
> 赞同：1
> 
> 时间：2012-10-19T17:44:12.483
> 
> 标签：c++

我写了这样的代码：

```
 void Print(const int & dataArray[], const int & arraySize) {  // problem 
    for(int i = 0; i<arraySize; i++) {
        cout << dataArray[i] << " ";
    }
    cout << endl;
    } 
```

在 mian() 函数中：

```
`
int iArray[14] = { 7, 3, 32, 2, 55, 34, 6, 13, 29, 22, 11, 9, 1, 5 }; 
int numArrays = 14;
Print(iArray, numArrays);
....
` 
```

编译器说引用数组是非法的，为什么它是非法的？我看到<effective c++>，上面说推荐我们使用const和reference，我只是尝试实现它（我是初学者），我也想知道在`void Print(const int dataArray[], const int & arraySize)`参数中我使用const，&来限定arraySize，对吗？（或者它比 int arraySize 或 const int arraySize 好得多？），我也想使用 const,& 到 dataArray[]，但我失败了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T17:46:22.087

数组要求其元素是*默认可构造*的，而引用不是，因此引用数组是非法的。这个：

```
const int & dataArray[] 
```

是一个引用数组。如果你想引用一个数组，你需要这个：

```
const int (&dataArray)[] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T19:14:06.897

学究式地，引用数组非法的原因是标准明确禁止它们。

## C++03:8.3.2/4

> 不能有对引用的引用，**不能有引用数组**，也不能有指向引用的指针。

强调我的。

标准明确禁止引用数组（可能还有更多）的原因之一是数组的索引方式。假设你这样做：

```
Gizmo& gizmos[] = {...};
Gizmo&* g3 = &gizmos[2]; 
```

这里有几件事是错误的。首先，您有一个指向引用的指针，这是非法的。其次，为了评估`gizmos[2]`编译器必须进行隐式转换为指针，然后基于此进行指针运算。有多大`Gizmo&`？

根据标准，`sizeof`a 引用本身是未指定的。但是，当`sizeof`应用于*引用*时，结果是被引用类型的大小。

```
C++03:5.3.3/2 Sizeof 
```

> 当应用于引用或引用类型时，结果是被引用类型的大小。

尝试运行这段代码，看看会发生什么：

```
#include <iostream>
#include <iomanip>
using namespace std;
struct Gizmo { int n_[100]; };

int main()
{
    typedef Gizmo& GR;
    size_t n = sizeof(GR);
    cout << n << endl;
} 
```

当我在我的机器（MSVC10，Win7x64）上运行它时，结果是 400。

这就是为什么引用数组是非法的。

# python - 通过python删除mysql中的行

> ID：12979632
> 
> 赞同：3
> 
> 时间：2012-10-19T17:44:35.950
> 
> 标签：python, mysql, python-2.7

我正在尝试通过python在mysql中写一个表：

我想在 MYSQL 中创建表，但删除超过 3 行，换句话说我只想要 3 行。例如

```
emp_no   Num1   Num2   Num3
1          1      2      3
2          1      2      3
3          1      2      3 
```

* * *

这些应该删除

```
4          1      2      3
5          1      2      3
6          1      2      3
.
.
. 
```

我的代码是：

```
from __future__ import print_function
import mysql.connector
from mysql.connector import errorcode

cnx = mysql.connector.connect(user='',
                              host='localhost')
cursor = cnx.cursor()

DB_NAME = 'DB'
cnx.database = DB_NAME 

TABLES = {}
TABLES['History'] = (
    "CREATE TABLE `History` ("
    "  `emp_no` int(11) NOT NULL AUTO_INCREMENT,"
    "  `Num1` text NOT NULL,"
    "  `Num2` text NOT NULL,"
    "  `Num3` text NOT NULL,"
    "  PRIMARY KEY (`emp_no`)"
    ") ENGINE=InnoDB")

####################33
##
Num1=1
Num2=2
Num3=3

add_employee = ("INSERT INTO History "
               "(Num1, Num2, Num3) "
               "VALUES (%s, %s, %s)")

data_employee = (str(Num1), str(Num2), str(Num3))
### Insert new employee
cursor.execute(add_employee, data_employee)

emp_no = cursor.lastrowid

### Make sure data is committed to the database
cnx.commit()

### *** I use this line for deleting the rows ***
query2 = ("Delete FROM History "
    "WHERE  emp_no >  %s")
cursor.execute(query2, ('3',))

# this part is used for printing the table elements    
query = ("SELECT emp_no, Num1, Num2, Num3 FROM History ")

cursor.execute(query)
#print("last_name")

for (emp_no, Num1, Num2, Num3) in cursor:
 print("{} {} {}".format(
     emp_no, Num1, Num2, Num3))

cursor.close()
cnx.close()
## 
```

例如，当我运行 10 次时，结果总是：

```
1 1 2
2 1 2
3 1 2 
```

但是当我注释掉这部分时：

```
query2 = ("Delete FROM History "
        "WHERE  emp_no >  %s")
    cursor.execute(query2, ('3',)) 
```

我看到的很有趣：

```
1 1 2
2 1 2
3 1 2
4 1 2
5 1 2
6 1 2
7 1 2
8 1 2
9 1 2
10 1 2 
```

超过 3 的行仍然存在于 Mysql 中，只是在注释掉删除查询之前没有显示它们。

那么如何从mysql中完全删除特定行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:23:41.097

似乎您需要调用***commit***才能使 DELETE 操作永久生效，就像您在 INSERT 操作之后所做的那样。

# servicestack - 没有 cookie 的 ServiceStack 自定义 ISession/Factory

> ID：12979636
> 
> 赞同：1
> 
> 时间：2012-10-19T17:44:39.917
> 
> 标签：servicestack

我不使用 ServiceStack 身份验证（我有一个返回安全令牌的服务）。此外，为了验证（并跟踪）会话，我需要安全请求来提供该安全令牌以引用`Authorisation`Http Header 中的会话。

我实现并注册`ISession`并`ISessionFactory`调用`Plugins.Add(new SessionFeature());`以禁用身份验证。

问题是我不明白 cookie 是如何发挥作用的。我的服务类继承自`Service`并具有 IOC 的会话和`sessionfactory`设置，但会话 ID 已设置为看起来像 cookie 的内容。我原以为我的自定义会话将负责生成/提供会话密钥。

我在这里有什么误解？

多读一点，看起来我必须（以某种方式）替换 SessionFeature，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:17:07.850

通读[Session wiki](https://github.com/ServiceStack/ServiceStack/wiki/Sessions)以了解 ServiceStack 的 Sessions 是如何工作的。

基本上，当您注册`Plugins.Add(new SessionFeature())`ServiceStack 时，已经`ss-id/ss-pid`为客户端创建了 cookie。

使用浏览器或重复使用相同的 ServiceClient 时会自动设置 cookie。这些 cookie 用于访问 ServiceStack 中的动态/类型化用户会话。

# .htaccess - 使用 Vhost 摆脱 codeigniter 中的 index.php

> ID：12979642
> 
> 赞同：0
> 
> 时间：2012-10-19T17:44:57.913
> 
> 标签：.htaccess, codeigniter

我已经尝试了我能找到的所有可能的 htaccess 片段，但没有一个会起作用。我的 codeigniter 项目可以在 ci.mydomain.com 上找到，我已经以这种方式配置了虚拟主机

```
<VirtualHost *:80>
    ServerName ci.mydomain.com
    ServerAlias ci.mydomain.com
    ServerAdmin x@gmail.com
    DocumentRoot /var/www/codeigniter
</VirtualHost> 
```

我也设置了

```
$config['index_page'] = ''; 
```

我只是得到 404。怎么了？我正在使用最新版本 2.1.3

**更新**

```
<VirtualHost *:80>
    RewriteEngine on
    RewriteCond $1 !^(index\.php|images|robots\.txt)
    RewriteRule ^(.*)$ /index.php/$1 [PT]
    ServerName ci.domain.com
    ServerAlias ci.domain.com
    ServerAdmin d@d.com
    DocumentRoot /var/www/codeigniter
</VirtualHost> 
```

我试过这个，它对我有用。虽然我宁愿使用 .htaccess 文件。

编辑：伙计们，我提到我使用虚拟主机的原因是我怀疑这是导致问题的原因。但也许我错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:51:58.107

实际的主力是一个名为 的模块`mod_rewrite`，它允许您设置重写规则以将 url 重定向到 index.php 进行处理。

[有关如何进行此操作的更多详细信息，请参阅本文](http://www.fahdmurtaza.com/myblog/2008/08/22/codeigniter-clean-urls-apache-mod-rewrite-removing-indexphp-from-url-in-codeigniter-application.html)

## 更新：

看起来您使用的重写条件有点遵循旧规则。

我认为您缺少的两件事（其中一件不相关，但很有帮助）是：

1.  `RewriteBase`- 我发现指定重写基础对于帮助您的规则更好地工作有很长的路要走。从技术上讲，我认为它应该可以在没有它的情况下工作，但没有它我什么也没遇到。
2.  `RewriteCond`排除实际文件的语句 - 现在您的条件将掩盖很多实际文件，这可能不是您想要的。

那么我们如何解决这个问题呢？

```
RewriteBase / 
```

这将使您的重写引擎的根在`.com/`这简化事情之后启动，因为您不需要处理前导 /。

因此，您需要将主要重写规则更改为：

```
RewriteRule ^(.*)$ index.php/$1 [L] 
```

这将重定向`.com/anything/you/type`到`.com/index.php/anything/you/type`并且 php 脚本可以自动拾取它以传递给路由器。

但是，这取决于条件，否则您将陷入循环，因此在此行之上，您需要这些条件来防止隐藏实际的文件/文件夹：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

这`!-f`意味着“非-f”，其中-f 表示“是文件”，-d 表示“是目录”，所以基本上你是说只有在`%{REQUEST_FILENAME}`不是文件且不是目录时才匹配此规则.

然后任何指向实际文件的 url 都可以正常解析！（包括 index.php）。

因此，使用 .htaccess 中的以下行，您*应该*得到正确的重写：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

如果你在你的 apache 配置中启用了 mod_rewrite，你应该很高兴。

如果您在 Ubuntu 上使用 Apache2，启用此功能的命令很简单：

```
a2enmod rewrite
service apache2 reload 
```

重要的是，该模块实际上已启用`Rewrite*`您的 apache 中的所有规则都不会执行。

如果这仍然不起作用，您需要检查 apache 主配置以查看 .htaccess 文件中是否允许使用命令子集，通常安装设置为`All`可以在其中指定任何内容，但通常它被锁定以防止客户之间的安全重叠。您提到您正在使用 VPS，因此您可能不必执行此步骤，但我想我会为了其他人而提及它。

您要查找的选项如下所示：

```
AllowOverride All 
```

最后一件事主要是一个安全网：

Apache 提供了一种方法来保护现有模块的子句

```
<IfModule mod_rewrite.c>  
   ~~ Put Rewrite* Rules here ~~
</IfModule> 
```

## 更新 2

好的，我刚刚注意到虚拟主机。我认为问题在于您将重写条件放在`<VirtualHost >`块中，并且它们需要存在于`<Directory>`文件所在文件夹的块中。

您可以通过`Rewrite*`从您的 conf 中删除所有规则并将其添加到您的 .conf 文件中来做到这一点：

```
<Directory /var/www/codeigniter>
   RewriteEngine On
   RewriteBase /
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule ^(.*)$ index.php/$1 [L]
</Directory> 
```

或者`.htaccess`在其中添加一个文件`/var/www/codeigniter`：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

这些规则适用于目录，而不是 VHost 声明，并且 .htaccess`<Directory>`基本上是块的快捷方式。

**有用的链接**：

*   [Apache mod_rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# android - 更改 NumberPicker 的步长

> ID：12979643
> 
> 赞同：13
> 
> 时间：2012-10-19T17:45:01.550
> 
> 标签：android, android-widget

是否有可能以比在 OnScrollListener 事件中处理更方便的方式做到这一点？可惜它没有步长属性...

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-20T14:19:07.427

Android 中的 NumberPicker 有一个名为[setDisplayedValues](http://developer.android.com/reference/android/widget/NumberPicker.html#setDisplayedValues%28java.lang.String%5B%5D%29)的方法。您可以使用它来显示自定义值（它需要一个字符串数组），然后在需要值时映射它们。因此，如果您在一分钟选择器中需要 5 步，例如，您可以创建一个这样的数组：

```
String[] minuteValues = new String[12];

for (int i = 0; i < minuteValues.length; i++) {
    String number = Integer.toString(i*5);
    minuteValues[i] = number.length() < 2 ? "0" + number : number;
}

minutePicker.setDisplayedValues(minuteValues); 
```

然后，当您获得 中的值时`OnValueChangeListener`，只需将其转换回整数：

```
Integer.parseInt(minuteValues[newVal]); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-05-26T22:12:30.210

例如，要将步数设置为“5”，请使用[NumberPicker.Formatter](http://developer.android.com/reference/android/widget/NumberPicker.Formatter.html)：

```
 NumberPicker.Formatter formatter = new NumberPicker.Formatter() {
        @Override
        public String format(int value) {
            int temp = value * 5;
            return "" + temp;
        }
    };
    numberPicker.setFormatter(formatter); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-19T18:54:47.867

为什么不只是添加一个[OnValueChangeListener](http://developer.android.com/reference/android/widget/NumberPicker.OnValueChangeListener.html)类似的东西：

```
numberPicker.setOnValueChangedListener(new NumberPicker.OnValueChangeListener() {

     @Override
     public void onValueChange(NumberPicker picker, int oldVal, int newVal) {
         picker.setValue((newVal < oldVal)?oldVal-5:oldVal+5);
     }

}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-23T17:50:57.380

> Android 中的 NumberPicker 有一个名为[setDisplayedValues](http://developer.android.com/reference/android/widget/NumberPicker.html#setDisplayedValues%28java.lang.String%5B%5D%29)的方法。您可以使用它来显示自定义值（它需要一个字符串数组），然后在需要值时映射它们。

例如，您可以创建这样的函数：

```
public String[] getArrayWithSteps (int iMinValue, int iMaxValue, int iStep)
{ 
   int iStepsArray = (iMaxValue-iMinValue) / iStep+1; //get the lenght array that will return

   String[] arrayValues= new String[iStepsArray]; //Create array with length of iStepsArray 

   for(int i = 0; i < iStepsArray; i++)
   {
     arrayValues[i] = String.valueOf(iMinValue + (i * iStep));
   }

   return arrayValues;
} 
```

因此，您应该调用方法> [NumberPicker.setDisplayedValues](http://developer.android.com/reference/android/widget/NumberPicker.html#setDisplayedValues%28java.lang.String%5B%5D%29)，例如：

```
int min = 5;
int max = 180;
int step = 10;

String[] myValues = getArrayWithSteps(min, max, step); //get the values with steps... Normally 

//Setting the NumberPick (myNumberPick)
myNumberPick.setMinValue(0);
myNumberPick.setMaxValue((max-step) / min + 1); //Like iStepsArray in the function
//Because the Min and Max Value should be the range that will show. 
//For example, Min = 0 and Max = 2, so the NumberPick will display the first three strings in the array String (myValues); 
myNumberPick.setDisplayedValues(myValues);//put on NumberPicker 
```

要获取 NumberPick 中的值：

```
String sValue = String.valueOf(10+(myNumberPick.getValue()*5)); //->> (iMinValue + (myNumberPick.getValue()*iStep)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-23T07:36:08.540

这是 ajpolt 解决方案的更好方法

使用任何预定义的步长，它支持通过键盘设置自定义值。

```
 final NumberPicker np = (NumberPicker) dialogView.findViewById(R.id.numberPicker1);
    np.setMaxValue(1000); // max value 1000
    np.setMinValue(0);   // min value 0
    np.setValue(defValue);
    np.setWrapSelectorWheel(false);
    final int m_oldFocus = np.getDescendantFocusability();
    np.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
    np.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            np.setDescendantFocusability(m_oldFocus);
            return false;
        }
    });

    np.setOnValueChangedListener(new NumberPicker.OnValueChangeListener() {
        @Override
        public void onValueChange(NumberPicker numberPicker, int oldVal, int newVal) {
            int stepSize = 10;
            if(newVal%stepSize !=0){
                if(newVal < oldVal){
                    numberPicker.setValue(((int)(newVal/stepSize)) *stepSize);
                }else{
                    numberPicker.setValue((((int)(newVal/stepSize)) *stepSize ) +stepSize );
                }

            }else{
                numberPicker.setValue(newVal);
            }

        }
    }); 
```

*我知道这是 5 岁的问题，但可能对某人有用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-13T09:41:14.993

使用上述方法时，需要注意的是，选择器不仅允许用户通过滚动选择值，还可以通过键盘输入。

默认情况下，输入字段的输入类型设置为`TYPE_CLASS_NUMBER`，因此用户会看到数字键盘。似乎当您使用`setDisplayedValues`选择器时将类型更改为`TYPE_CLASS_TEXT`，但是，当您使用`setFormatter`输入类型时不会更改。

因此，在这种情况下使用格式化程序可能会导致意外行为。假设您希望用户只能选择值“0”或“5”。你可能有这样的代码：

```
NumberPicker numberPicker = (NumberPicker) findViewById(R.id.my_number_picker);
numberPicker.setMinValue(0);
numberPicker.setMaxValue(1);
numberPicker.setFormatter(v -> v == 0 ? "0" : "5"); 
```

然而，在这种情况下，用户会看到数字键盘，但只能输入“0”或“1”。

如果您改用：

```
numberPicker.setDisplayedValues(new String[] { "0", "5" }); 
```

用户将看到文本键盘，但可以按预期输入“0”或“5”。

如果您对文本键盘感到困扰，您可以使用反射来访问私有字段并将输入类型设置回数字（除非确实必要，否则当然不推荐）。如果您以 Gingerbread 等老歌为目标，则该字段称为“mInputText”或“mText”。

```
 try {
        Field inputField = NumberPicker.class.getDeclaredField("mInputText");
        inputField.setAccessible(true);

        EditText inputText = (EditText) inputField.get(numberPicker);
        inputText.setRawInputType(InputType.TYPE_CLASS_NUMBER);
    } catch (ClassCastException e) {
        // Just ignore this exception and do nothing.
    } catch (IllegalAccessException e) {
        // Just ignore this exception and do nothing.
    } catch (NoSuchFieldException e) {
        // Just ignore this exception and do nothing.
    } 
```

# c++ - 构造函数中的 this 指针

> ID：12979644
> 
> 赞同：0
> 
> 时间：2012-10-19T17:45:02.400
> 
> 标签：c++, class, this

下面的代码是一个类的构造函数，这个类有一个成员

```
int               ** busyhours      ; 
```

构造函数

```
Instructor::Instructor ( int id , string name )
{
  this->id   = id   ;
  this->name = name ;

  // initialize busyhours
  this->busyhours = new int * [DAYS_WORKING] ;
  for ( int i = 0 ; i < DAYS_WORKING ; i++ )
  {
       busyhours[i] = new int[HOURS_PER_DAY] ;
       for ( int j = 0 ; j < HOURS_PER_DAY ; j++ )
        busyhours[i][j] = 0 ;
  }
} 
```

busyhour 成员首先与此指针一起使用，但随后在没有此指针的情况下使用。我不明白为什么。感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T17:47:41.633

`this`是隐式的，仅当参数与成员变量同名时才需要

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:57:32.810

快速阅读[这篇文章](http://msdn.microsoft.com/en-us/library/y0dddwwd%28v=vs.80%29.aspx)，它应该清楚一些事情。

一般来说，我发现使用`this->`is c++ 更多的是个人喜好问题，但在某些情况下，您可以使用它来消除函数参数和成员变量之间的歧义。在您的示例中，我没有看到任何特殊原因为什么`this->`使用一次，然后再使用。这可能是因为`this->.`在 Visual Studio 中为您提供了 intelisense 弹出窗口，这可能只是第一次需要提醒作者成员变量的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T18:03:49.840

@WhozCraig 的想法大致正确，至少在我看来——但请注意，在这种情况下，您*不需要*重命名参数。您还可以使用带有 的值初始化`new`来消除显式归零数据，只留下：

```
Instructor::Instructor ( int id , string name )
   : id(id), name(name), busyhours(new int *[DAYS_WORKING])
{
  for (int i = 0; i < DAYS_WORKING; i++)
       busyhours[i] = new int[HOURS_PER_DAY]();
} 
```

当然，您几乎肯定应该将所有这些都扔掉，并使用`std::vector`而不是自己进行动态分配。

# android - 以编程方式连接和断开 Android 设备

> ID：12979650
> 
> 赞同：17
> 
> 时间：2012-10-19T17:45:18.357
> 
> 标签：android, usb, disconnect

我需要找到一种方法（使用 Android 应用程序）以编程方式连接和断开 Android 设备与主机的连接。

我正在使用 Galaxy Nexus。`/proc/kmsg`尽管我已经在内核中启用了详细的调试消息，并且为了查看它们已经启用了手机上的 root 访问权限来访问（以及 shell 命令） ，但我的目标是使所有内容尽可能接近库存`dmesg`。

我确信有一种方法可以利用 root 访问权限来做我需要做的事情，但是我所有的尝试都导致了 nix。

*   乱来`/proc/bus/usb`
*   乱来`/dev/bus/usb`
*   在 MTP/PTP 之间进行更改（无法以编程方式进行）
*   将 Android USB 小工具驱动程序制作成一个模块 <- ???

我将尝试弄清楚如何执行列表中的最后一个对象，因为这样我就可以在我的应用程序`rmmod`中`insmod`产生结果`*.ko`，这将连接和断开电话。我不确定这个选项的可行性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T23:56:27.693

解决方案是在接近截止日期时出现的，所以我几乎可以肯定这不是最好的做事方式，但它满足了我的要求。

构建 Modded 内核（允许挂钩特定功能）

*   修改内核配置以支持 Kprobes（将 CONFIG_KPROBES 设置为 Y）
*   **从android_setup()**定义中删除“static”关键字（driver/usb/gadget/android.c）
*   构建那个内核

构建内核模块（提供**连接和断开连接的实际功能**）

*   使用Kallsyms动态拉取android_setup()的绝对地址
*   使用 kprobes，钩住 android_setup()
*   设置两个定时器，每次调用 android_setup() 时执行
*   第一个计时器设置为从现在开始 2 秒，第二个设置为从现在开始 2.005 秒
*   两个计时器都将指向 struct usb_gadget 的指针作为它们的数据
*   在各自的回调函数中，调用 usb_gadget_connect() 和 usb_gadget_disconnect()，这会在 Samsung Galaxy Nexus 上强制物理断开然后重新连接

构建应用程序

*   必须有一个root设备
*   只需使用 SU 权限进行 shell 调用 - “insmod module_name”。在您调用 rmmod 之前，该模块将强制设备进入枚举循环，不断断开连接并重新连接。

如果您有兴趣重复这些结果，请阅读此处发布的文档并随时向我发送任何问题。

[https://docs.google.com/uc?export=download&id=0B9WchRkSOWwJbi10MGhLWUljT2s](https://docs.google.com/uc?export=download&id=0B9WchRkSOWwJbi10MGhLWUljT2s)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T15:43:29.897

互联网控制.java

```
public class InternetControl {
    public static void EnableInternet(Context context)
    {
        try {
            Log.i("Reached Enable", "I am here");
            setMobileDataEnabled(context,true);
        } catch (Exception e) {
            System.out.println(e.getMessage());
        } 
    }

    public static void DisableInternet(Context context)
    {
        try {
            Log.i("Reached Disable", "I am here");
            setMobileDataEnabled(context,false);
        } catch (Exception e) {
    System.out.println(e.getMessage());
        } 
    }

    private static void setMobileDataEnabled(Context context , boolean enabled) throws Exception{
           final ConnectivityManager conn = (ConnectivityManager)  context.getSystemService(Context.CONNECTIVITY_SERVICE);
           final Class connClass = Class.forName(conman.getClass().getName());
           final Field iConnectivityManagerField = connClass.getDeclaredField("mService");
           iConnectivityManagerField.setAccessible(true);
           final Object iConnectivityManager = iConnectivityManagerField.get(conn);
           final Class iConnectivityManagerClass =  Class.forName(iConnectivityManager.getClass().getName());
           final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
           setMobileDataEnabledMethod.setAccessible(true);
           setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
        }

} 
```

清单.xml

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET" /> 
```

启用或禁用功能是静态的，因此您可以使用调用
`classname.functionname();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T10:42:50.850

You can try to enable/disable some secured settings like `Settings.Secure.USB_MASS_STORAGE_ENABLED` or `Settings.Secure.ADB_ENABLED` (depending on what you call "connect" !)

This code should work (disabling USB mass storage):

`Settings.Secure.putInt(getContentResolver(),Settings.Secure.USB_MASS_STORAGE_ENABLED, 0);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T05:26:31.737

Settings.Secure.putInt(getContentResolver(),Settings.Secure.USB_MASS_STORAGE_ENABLED, 0);

# asp.net-mvc - 选择性地替换 Razor 中的内容

> ID：12979652
> 
> 赞同：0
> 
> 时间：2012-10-19T17:45:25.477
> 
> 标签：asp.net-mvc, razor, content-management-system

是否可以在 Razor 中执行以下操作：

```
@using(Html.CMSContent("TermsOfService")) 
{
    <text>
        <!-- Some default content goes here if the "TermsOfService"
             item doesn't exist in my content table in the database -->
    </text>
} 
```

处理视图时，如果 CMSContent 助手在我设置的某个数据库表中没有找到名为“TermsOfService”的内容项，它将输出默认内容。

否则，它将用数据库中的内容替换默认内容？

我正在尝试构建一个 CMS/应用程序混合体，以便营销部门可以根据需要覆盖我的应用程序中的文本。

**阐明**

我这样做的原因是让代码超级容易阅读和编写。我最终会在所有地方都有这些小内容块，所以我希望尽量减少开发人员必须输入多少才能获得此功能。

我也期待 99% 的时间，默认文本是要显示的内容。但我希望处理 1% 的情况，我们需要快速更改一些文本而无需重新部署应用程序。因此，让默认文本尽可能接近其上下文很重要（即，我不希望开发人员必须跳转到不同的文件来查看默认文本是什么 - 也不必跳转到顶部页）。

例如，当你这样做时，`@using(Html.BeginForm())`它会自动发出开始和结束`<form>`标签。我希望有这样聪明的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:52:59.683

Html.CMSContent("..") 返回什么？您能否将此帮助程序的返回值存储到变量中，然后检查调用是否返回数据库值，如果是则显示内容，否则显示默认文本？这是我描述的一些快速代码

```
 @{
      var terms = Html.CMSContent("TermsOfService");
 }

 @if (terms != null && terms != "") {
      @terms
 } else {
      @: Default Terms of Service
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:08:00.020

我想我知道我在找什么了。它使用 an`if`而不是`using`：

```
if(!Html.CMSContent("TermsOfService"))
{
     <text>
           Default content goes here
     </text>
} 
```

对于帮手：

```
public static bool CMSContent(this HtmlHelper Html, string BlockName)
{
     if (blockname in database)
     {
         var blockdata = (retrieve from database);
         Html.ViewContext.HttpContext.Response.Write(blockdata);
         return true;
     }
     else
     {
         return false;
     }

} 
```

虽然我不确定使用 Response.Write 是最好的方法。

# c# - ComboBox 在 SelectionChangeCommitted 上获得了新的 SelectedValue，但没有获得新的 SelectedText

> ID：12979657
> 
> 赞同：4
> 
> 时间：2012-10-19T17:45:38.280
> 
> 标签：c#, .net, winforms, combobox, selectedindexchanged

我有这个代码

```
private void FrmNovedadMedidas_SelectionChangeCommitted(object sender, EventArgs e)
        {
            ComboBox c = (ComboBox)sender;
            CargarMedidasPorIdTipoMedida(Convert.ToInt16(c.SelectedValue));
            this.txtBoxNombreTipoMedida.Text = c.SelectedText;
        } 
```

in`c.SelectedValue`获得了选择的新值（用户在 Combo 中选择的值）。但是在`c.SelectedText`我得到了 ComboBox 的旧值（我的意思是，在用户更改选择之前的那个值）。

是否有任何属性可以给我新的选定文本？我想避免每次都在绑定到 ComboBox 的 DataSet 中进行搜索。

我已阅读[此](https://stackoverflow.com/questions/8090847/get-the-new-value-or-index-with-selectionchangecommitted-event-of-datagridview-c)内容但不起作用，我`CommitEdit()`在 ComboBox 中没有

编辑：

`c.Text`也给我旧的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T18:15:34.710

我似乎记得这种情况与`DropDownStyle`组合框有关。

您能否尝试不同的样式，看看 Text 属性是否设置为里面的新值`SelectionChangeCommited`？

根据您的评论，似乎使用`DropDownList`样式可以解决问题。

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:50:17.937

我发现了一些东西。

```
c.GetItemText(c.SelectedItem) 
```

是否有直接属性，请发布。无论如何感谢自述文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:55:54.253

尝试`SelectedIndexChanged`ComboBox 上的事件与`SelectionChangeCommited`事件。然后用于`c.Text`获取用户刚刚选择的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-10T13:02:01.503

`c.SelectedValue()`为我返回`null`。

`c.GetItemText(c.SelectedItem)`虽然对我有用。更改下拉样式不是一种选择。

# python - 有什么方法可以使用 heredocs 在 python 中通过 ssh 允许 STDIN？

> ID：12979663
> 
> 赞同：1
> 
> 时间：2012-10-19T17:45:58.187
> 
> 标签：python, bash, ssh, stdin

我有一个接受 3 个参数的 bash 脚本。我需要 ssh 到远程终端并使用这些参数在那里执行 python 脚本。

```
 #!/bin/bash

    ssh -t -t -c blowfish -XC someServer << EOF
      python -u pythonToExecute.py $1 $2 $3
    EOF 
```

python 脚本采用这些参数，并基于某些组合，可能会要求用户指定一个操作（使用 raw_input）

我遇到的问题是 python 脚本在插入任何输入后挂起（假设 STDIN 存在问题）。

如果我在 ssh 调用中调用 python，python 脚本可以完美运行，但是我不能使用 bash 参数。

我不能使用 Paramiko、fabric 或任何其他外部模块/包。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:17:39.380

像下面这样打电话怎么样？

```
ssh someServer python -u pythonToExecute.py $1 $2 $3 
```

"I can't use the bash arguments." 是什么意思？方法 ？

# php - 用php对表格内容进行排序？

> ID：12979664
> 
> 赞同：1
> 
> 时间：2012-10-19T17:46:07.140
> 
> 标签：php, sorting

我有一张桌子，里面有我们的 Musician Finder 计划的乐队列表。我们希望按类型对它们进行排序，同时仍然只有一个包含所有信息的 .html 或 .php 文件。

我怎么会开始这样做？最好使用 php 并避免使用 JS，因为我们的大多数用户都没有脚本。这是测试页面的链接[HERE](http://www.whatzup.com/Musician_Finder/index2.php)。任何建议都会很棒，甚至只是其他人做过的一个例子。
这是[粘贴箱上的表格。](http://pastebin.com/6qCiXWA5)

谢谢

此外，避免 SQL 是我老板的首要任务。

编辑：所以显然这在 php 中是不可行的。我愿意使用 javascript。或 Jquery。如果这只是一个简单的表，我会很好，但显然我的更详细，我不知道从哪里开始，也没有在谷歌上找到任何东西。如果有人想对此提出任何建议，那就太好了，但老实说，没有人来这里阅读其他人不喜欢的内容，我在 stackoverflow 上提出了一个问题。哈哈。

再次编辑：好的，所以我正在寻找更多......为什么我不能在css中让每个类都有我的`<tr>`所有，然后使用JS函数将除了正确的类之外的所有类都更改为？这将非常简单。
`display:block;``display:none;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T18:02:04.150

@robert 是正确的，因为您无法在不使用一些 javascript 的情况下对页面上的元素进行排序。所以如果你想用php对你的表进行排序，你必须首先将表的内容放入某种数据集中，比如一个大数组。根据我对您要执行的操作的了解，您的表格的每一行都属于您的可排序类别之一。因此，在定义数组时，您必须指定每行所属的类别，然后对该字段进行排序。

所以你的数组定义可能是这样的：

```
$master_array[] = array( 
    'category' => 'acoustic',
    'tr_html' => '<tr><td> .... </td></tr>'
); 
```

然后在类别字段上对数组进行排序。一些谷歌搜索会帮助你。

然后在编写表格时，只需执行以下操作：

```
echo "<table>";
foreach( $master_array as $key => $val ) {
    echo $val["tr_html"];
}
echo "</table>"; 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:02:05.033

如果您在 php 中创建一个带有`$tbl = array(0 => $arr_row1, 1 => $arr_row2)`etc. 属性的“表”对象，那么您可以轻松地创建一个视图方法来使用循环在 html 中呈现 $tbl。（所有 $arr_rowx 都是具有与键相同的列名的关联数组。）

然后，您可以使用此方法在字符串列键上对 $tbl 进行排序或倒序：

```
public function order($str_key_name, $bool_reverse = false) {
    $code = "return strnatcmp(\$a['$str_key_name'], \$b['$str_key_name']);";
    usort($this->tbl, create_function('$a,$b', $code));
    if ($bool_reverse) $this->tbl = array_reverse($this->tbl);
    return $this->tbl;
} 
```

并在整数列上按顺序重新索引：

```
public function reIndex($str_index_name, $int_start_index = 0) {
    if ($this->tbl) {
        $num = count($this->tbl);
        for ($i = 0; $i < $num; $i++) 
            $this->tbl[$i][$str_index_name] = ($i + $int_start_index);
    }
    return $this->tbl;  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:31:34.180

我最终使用了 jquery。没有JS的任何人都无法排序哈哈。谢谢你们的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T18:00:07.737

在 JavaScript 中使用现有的表格插件可能是您的最佳解决方案，因为它可以避免返回服务器来执行 JavaScript 可以轻松完成的事情。但是看到您说 JavaScript 不是您的第一选择，那么如果您选择将所有数据存储在 PHP 数组中，那么您可以在 PHP 中执行此操作。

因此，您首先将所有数据放入 PHP 数组中。然后编写一个函数，该函数将按您希望的任何字段对数组进行排序。有许多可用的排序算法。

以默认顺序显示数据表并添加链接，让用户选择不同的列进行排序。在每个链接中，您设置要排序的列的名称，如下所示：

```
 <a href="mypage.php?sort=name">Sort By Name</a> 
```

然后，您可以简单地使用参数“sort”来决定如何对数组进行排序，然后再将其回显到 HTML 表中。

# java - jsf包括动态赋值、监听等

> ID：12979671
> 
> 赞同：2
> 
> 时间：2012-10-19T17:46:28.743
> 
> 标签：java, jsf, dynamic

我找到了很多关于如何使用 ui:include 的信息，现在想使用它。我在多个页面上有几个控件，它们执行完全相同的操作，但每个页面上的模型（值等）略有不同。有没有办法动态地分配值，也许是通过支持 bean 上的属性，控件的值？

例如：

```
<h:form id="formQInfo1">
   <h:outputText escape="false" value="#{surveyFormController.selectedQuestionResponse.questionInfo1.response}"/>
</h:form> 
```

现在我想从父 xhtml 页面的支持 bean 发送 selectedQuestionResponse 并将其分配给包含的 xhtml 页面。或者更好的是，我可以让实际值动态调用不同的支持 bean 吗？

如果我走错了方向并且有更好的方法可以做到这一点，我很想听听！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:56:21.447

具体的功能要求并不完全清楚，但是您提出问题的方式倾向于这个答案：

```
<ui:include src="/WEB-INF/some.xhtml">
    <ui:param name="selected" value="#{surveyFormController.selectedQuestionResponse}" />
</ui:include> 
```

然后`/WEB-INF/some.xhtml`可以按如下方式访问：

```
#{selected.questionInfo1.response} 
```

要更进一步，您可能需要查看标记文件和/或复合组件。这允许传递（动作）侦听器方法甚至转换器/验证器。

### 也可以看看：

*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)

# c# - C#合并PDF解决方案不使用iTextSharp

> ID：12979674
> 
> 赞同：3
> 
> 时间：2012-10-19T17:46:59.270
> 
> 标签：c#, pdf, merge

我有一些我想使用 C# 自动填写的 PDF。我知道 iTextSharp，但我不确定商业用途的许可问题，宁愿找到不同的解决方案。

基本上，我想打开一个 PDF，指定字段（或为文本框提供坐标）并能够插入文本（可能是小图像？）。然后我需要合并并保存pdf。

在我不必购买/担心许可证的情况下，有什么好的方法可以实现这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:03:26.017

不知道 iTextSharp 的优势是什么，但我找到了一个使用[PDFSharp](http://sourceforge.net/projects/pdfsharp/)完美运行的解决方案！由于 PDFSharp 的文档似乎有点轻，我还发现[这个线程](https://stackoverflow.com/questions/6240585/pdfsharp-filling-in-form-fields)非常有帮助......

如果这对任何人都有帮助，这是我的示例程序：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using PdfSharp.Fonts;
using PdfSharp.Pdf;
using PdfSharp.Pdf.IO;
using PdfSharp.Pdf.AcroForms;

namespace PDFSharpTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void goButton_Click(object sender, EventArgs e)
        {
            //TestPDF();  //uncomment this to find out whether acroform will work correctly         

            //open file
            PdfDocument pdf = PdfReader.Open(@"YOURFILEPATHandNAME", PdfDocumentOpenMode.Modify);

            //fix some odd setting where filled fields don't always show                   SetupPDF(pdf);

            //find and fill fields
            PdfTextField txtEmployerName = (PdfTextField)(pdf.AcroForm.Fields["txtEmployerName"]);
            txtEmployerName.Value = new PdfString("My Name");

            PdfTextField txtEmployeeTitle = (PdfTextField)(pdf.AcroForm.Fields["txtEmployeeTitle"]);
            txtEmployeeTitle.Value = new PdfString("Workin'");

            PdfCheckBoxField chxAttached = (PdfCheckBoxField)(pdf.AcroForm.Fields["chxAttached"]);
            chxAttached.Checked = true;

            //save file
            pdf.Save(@"NEWFILEPATHandNAMEHERE");
        }

        private void SetupPDF(PdfDocument pdf)
        {
            if (pdf.AcroForm.Elements.ContainsKey("/NeedAppearances") == false)
            {
                pdf.AcroForm.Elements.Add("/NeedAppearances", new PdfSharp.Pdf.PdfBoolean(true));
            }
            else
            {
                pdf.AcroForm.Elements["/NeedAppearances"] = new PdfSharp.Pdf.PdfBoolean(true);
            }
        }

        private void PDFTest()
        {
            OpenFileDialog ofd = new OpenFileDialog();
            if (ofd.ShowDialog() == DialogResult.OK)
            {
                PdfDocument _document = null;
                try { _document = PdfReader.Open(ofd.FileName, PdfDocumentOpenMode.Modify); }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message, "FATAL");             //do any cleanup and return             
                    return;
                }
                if (_document != null)
                {
                    if (_document.AcroForm != null)
                    {
                        MessageBox.Show("Acroform is object", "SUCCEEDED");
                        //pass acroform to some function for processing          
                        _document.Save(@"C:\temp\newcopy.pdf");
                    }
                    else
                    {
                        MessageBox.Show("Acroform is null", "FAILED");
                    }
                }
                else
                {
                    MessageBox.Show("Unknown error opening document", "FAILED");
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:55:23.303

这是一个免费的开源解决方案：[SharpPDF](http://sourceforge.net/projects/sharppdf/)

但老实说，iTextSharp 可能是你能找到的最好的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T20:16:53.963

您可以尝试 Docotic.Pdf 库来完成您的任务。该库不是免费的，但可能没有什么可担心的（许可方面）。

以下是在线提供的示例，可能会对您有所帮助：

*   [填写现有表格](https://bitmiracle.com/pdf-library/help/fill-existing-form.aspx)
*   [按名称查找控件](https://bitmiracle.com/pdf-library/help/find-control-by-name.aspx)

[Forms and Annotations 组中的其他示例](https://bitmiracle.com/pdf-library/help/samples.html)也可以证明对您的情况有用。

免责声明：我为图书馆的供应商工作。

# c - 释放图形时释放过多

> ID：12979677
> 
> 赞同：1
> 
> 时间：2012-10-19T17:47:15.760
> 
> 标签：c, memory-management, valgrind

我使用链表创建了一个图形数据结构。使用此代码：

```
typedef struct vertexNode *vertexPointer;
typedef struct edgeNode *edgePointer;

void freeGraph(vertexPointer); /* announce function */

struct edgeNode{
    vertexPointer connectsTo;
    edgePointer next;
};

struct vertexNode{
    int vertex;
    edgePointer next;
}; 
```

然后我创建一个图，其中有 4 个节点，比如说 A、B、C 和 D，其中：A 通过 B 连接到 D，A 通过 C 连接到 D。使用链表，我想它看起来像这样：

![图表是什么样子的](../Images/22292218d5b03d44576af5c54d882960.png)

最后，我尝试使用 freeGraph(graph) 释放图形。

```
void freeEdge(edgePointer e){
    if (e != NULL) {
        freeEdge(e->next);
        freeGraph(e->connectsTo);
        free(e);
        e = NULL;
    }
}

void freeGraph(vertexPointer v){
    if (v != NULL) {
        freeEdge(v->next);
        free(v);
        v = NULL;
    }
} 
```

这就是 valgrind 开始抱怨“大小为 4 的无效读取”、“地址 0x41fb0d4 是大小为 8 的块内的 4 个字节 free'd”和“无效的 free()”的地方。它还说它做了8个mallocs和9个frees。

我认为问题在于节点 D 的内存已经被释放，然后我试图再次释放它。但是我看不出有任何方法可以在不改变数据结构的情况下做到这一点。

如果可能，无需更改数据结构，防止这些错误并正确释放图形的最佳方法是什么？此外，如果此代码有任何其他问题，请告知。谢谢！

问候，分号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:05:08.357

缺乏了解所有参考资料使这有点困难。有点 hack，但面对同样的问题，我可能会使用指针集（唯一值列表，在本例中为指针）。

*   遍历整个图，仅当节点指针不存在时才将节点指针推入集合（这是“集合”的定义）
*   遍历集合，释放每个指针（因为它们是唯一的，所以没有双重释放问题）
*   设置`graph`为 NULL。

我确信对此有一个优雅的递归解决方案，但是面对所述的任务，这似乎是可行的，而且并不过于复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T18:14:37.373

您可以将它们分配到内存池中，而不是在全局堆上分配节点和边。要释放图形，请释放整个池。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T18:03:41.353

我会通过设计一种方法来解决这个问题，在释放它之前首先从图中干净地删除每个节点。要清楚地做到这一点，您必须弄清楚哪些其他节点正在引用您将要删除的节点并删除这些边。删除边缘后，如果您碰巧遇到了之前引用已删除节点的另一个节点，则该边缘将已经消失，您将无法再次尝试删除它。

最简单的方法是修改您的数据结构以保存对“传入”边缘的引用。这样你就可以做类似的事情：

```
v->incoming[i]->next = null; // do this for each edge in incoming
freeEdge(v->next);
free(v);
v = NULL; 
```

如果您不想更新数据结构，那么您将面临一个难题，即在图形中搜索与要删除的节点具有边的节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T18:07:15.893

这是因为您在这里进行了两次递归，并且它们相互踩踏。 `freeGraph`被调用一次以释放 D（例如，从 B），然后当初始调用`freeGraph`从 回来时`freeEdge`，您尝试释放`v`- 这已经在更深层得到处理。没有插图，这是一个糟糕的解释，但你去吧。

您可以摆脱一个递归，这样它们就不会“交叉”，或者您可以在每个空闲之前检查该节点是否已被递归的另一个分支处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T18:13:07.780

是的，问题是 D 可以通过两条路径到达并释放两次。

您可以分两个阶段进行： 阶段 1：将您到达的节点插入“集合”数据结构。阶段 2：释放“集合”数据结构中的节点。

该设置数据结构的可能实现，需要扩展您的数据结构：用布尔标志标记数据结构中的所有节点，这样您就不会将它们插入两次。对所有节点的第二个链表使用另一个“下一个”指针。一个简单的。

另一种实现，无需扩展您的数据结构：类似于 C++ std::set<>

另一个问题：当你从 A 开始时，你确定所有节点都可以到达吗？为避免此问题，请在创建时将所有节点插入“集合”数据结构中（那么您将不需要标记）。

# java - Log4j Windows 事件查看器日志记录

> ID：12979678
> 
> 赞同：0
> 
> 时间：2012-10-19T17:47:26.440
> 
> 标签：java, logging, log4j

我想让用户指定他们想要写入 Windows 事件查看器的级别，但是我还将日志写入控制台和输出文件。有没有办法将所有日志写入文件和控制台，只将更高级别的日志写入事件查看器，而不必有两个单独的 Logger 变量。

```
private static PatternLayout myLayout 
  = new PatternLayout("%-4r [%t] %-5p %c %x - %m%n");
// Read from INI file
private static boolean enableWindowsEventLogging;
static final Logger log4jLogger = Logger.getLogger(Main.class); 
private static NTEventLogAppender eventLogAppender = new NTEventLogAppender();
private static RollingFileAppender rollingFileAppender;
private static ConsoleAppender consoleAppender = new ConsoleAppender(myLayout);
    ....
if(enableWindowsEventLogging)
{
    switch(Integer.valueOf(thisProperties.getProperty("warningLevel")))
{
    case 1: log4jLogger.setLevel(Level.ALL); break;
    case 2: log4jLogger.setLevel(Level.FATAL); break;
    case 3: log4jLogger.setLevel(Level.ERROR); break;
    case 4: log4jLogger.setLevel(Level.WARN); break;
    case 5: log4jLogger.setLevel(Level.INFO); break;
    case 6: log4jLogger.setLevel(Level.DEBUG); break;
};
// Event viewer logging
log4jLogger.addAppender(eventLogAppender);
}else
log4jLogger.setLevel(Level.OFF);
    ....
rollingFileAppender = new RollingFileAppender(myLayout,"\\logs\\log4joutput.log", true); 
```

我正在使用 Apache log4j 1.2.12

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:54:03.323

是的，请记住，如果事件符合其条件，则事件会被拾取，`Logger`然后写入记录器的关联`Appenders`.

因此，将记录器设置为您希望从应用程序中捕获的最低级别（`DEBUG`），将 NT 附加程序设置为更高级别（`INFO`），将控制台和文件附加程序设置为较低级别（`DEBUG`）

# php - 在 php 中使用 exec 命令不起作用

> ID：12979681
> 
> 赞同：0
> 
> 时间：2012-10-19T17:47:33.803
> 
> 标签：php, exec, file-permissions, psexec

我必须使用 php 自动化一个过程，在该过程中我必须在文件中附加内容。该文件没有指定任何特定权限，但文件夹“abc”具有只读权限，因此当我尝试附加文件时，fopen() 会提示权限被拒绝。

但我可以手动编辑文件，也可以从命令提示符处编辑。所以我尝试了以下方法：

当我尝试 echo exec("echo Testing>>\\xx.xx.xx\C$\abc\test.txt"); 在我的脚本中，它不起作用。

如果在 cmd 上运行相同的命令 echo Testing>>\xx.xx.xx\C$\abc\test.txt 它可以工作。

我什至尝试过 psexec:- echo exec('C:/psexec \xx.xx.xx cmd /c \"echo Testing>>C:\abc\test.txt\"'); 当我再次在 cmd 上运行 C:/psexec \xx.xx.xx cmd /c "echo Testing>>C:\abc\test.txt" 时，它工作正常。

我做错了与 exec() 有什么关系吗？或者有没有其他方法可以编辑文件，因为我不应该更改文件夹权限，但仍然可以使过程自动化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:58:53.553

我假设您使用的是 Windows。在 Debian Linux 上，我会告诉您在适当的目录中授予用户 www-data 写入权限。

您可能需要授予本地 IIS 工作人员帐户对该目录的写入权限。本地 IIS 工作人员帐户的名称可能类似于 IUSR_[SERVERNAME]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:05:27.537

出于安全原因，一些虚拟主机决定删除函数 exec。

查看您的 php 信息并检查您的是否已禁用。

# ios6 - 奇怪的 UICollectionView 方向转换

> ID：12979684
> 
> 赞同：2
> 
> 时间：2012-10-19T17:47:46.880
> 
> 标签：ios6, uicollectionview, uicollectionviewcell

我正在使用集合视图在 iPad 应用程序中显示照片。细胞是 的子类`UICollectionViewCell`。单元格使用自动布局，四面都有固定的空间。

现在，当方向改变时，细胞起初变得非常小。然后它调整到适当的大小。但是应该可以保持一样的大小，这样真的很难看。

对这个问题有什么想法吗？

# installation - 解压由 InstallShield 创建的 MSI 并重新打包

> ID：12979688
> 
> 赞同：3
> 
> 时间：2012-10-19T17:47:58.607
> 
> 标签：installation, wix, compression, windows-installer, installshield

我有一个使用 InstallShield 创建的 MSI。我没有 InstallShield 项目。我想将此 MSI 解压缩到组件中，然后使用不同的安装程序（例如 Wix）重新创建安装。这样的事情可能吗？如果需要，我可以获取使用的 InstallShield 脚本（即检查产品是否已安装的脚本 - 安装了什么版本等）

此外，如果这是可能的，如果我最大的需求是实现非常高的压缩率，我应该尝试什么安装工具 - 即 MSI 应该尽可能小。我在 Windows 上，我的应用程序是 java 应用程序（不是 exe - 只是 jar 文件）。我对创建 Exes 不感兴趣。

顺便说一句，有谁知道 Oracle 对其 JRE 安装程序使用什么压缩。我使用了 6.12 JRE 安装程序——它的大小约为 15 MB——并安装了 java，然后使用不同的 zip 工具压缩了 jre 目录——其中大多数最终得到了一个 30MB 的 zip 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T18:41:24.820

Wix 确实有一个从 MSI 生成 Wix 源的工具，称为[Dark](http://wix.sourceforge.net/manual-wix3/dark.htm)。该工具的文档非常少，正如[Tim Lentine 所提到的](https://stackoverflow.com/a/12980354/94928)，您可能需要在运行它后进行一些调整，但它应该会给您一个良好的开端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:32:49.603

许多 MSI 创作工具（InstallShield、Advanced Installer 等）能够将现有 MSI “导入”到您正在使用的工具中以进行进一步修改（例如，使用 Advanced Installer 导入使用 InstallShield 创作的 MSI）。我没有使用过 Wix，所以我不知道该工具中是否存在此功能。

您也可以使用[Orca.exe](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370557%28v=vs.85%29.aspx)来查看和编辑 MSI。

根据我的经验，将 MSI 导入另一个工具可能会被击中或错过。有时一切都完美无缺，但如果您依赖脚本或其他自定义操作，有时（无论出于何种原因）这些操作并不能始终正确完成。

自从我这样做以来已经有几年了，但我记得在新的 MSI 能够按照我想要的方式工作之前，我花了一两天的时间“调整”新项目。

至于什么工具可以为您提供最大的压缩，请查看此[压缩未压缩的 MSI 文件](https://stackoverflow.com/questions/2712544/compressing-an-uncompressed-msi-file)，它可能会为您提供一些见解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T12:17:33.720

您是否只需要更新您丢失源的项目？您可以在向导模式下使用 InstallShield 打开 MSI，然后选择将 MSI 转换为 InstallShield 项目。

这将为您提供一个可以更新和重建的项目。不过，您可能需要进行大量清理才能恢复到真正的项目格式。

顺便说一句，使用像 Team Foundation Server 这样的系统有助于防止这种情况。

# groovy - 什么是 Groovy 等价于 Python 的 dir() 的无参数版本？

> ID：12979691
> 
> 赞同：2
> 
> 时间：2012-10-19T17:48:02.943
> 
> 标签：groovy, scope, introspection

在 Python 中，在运行时，您可以使用[**dir()**](http://docs.python.org/library/functions.html#dir)获取当前范围内的变量名称列表。有没有办法在 Groovy 中做同样的事情？

**dir(someobject)**也可用于检查对象，但这不是这个问题的内容。该功能已在[此处](https://stackoverflow.com/questions/10882469/whats-the-groovy-equivalent-to-pythons-dir)描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:20:56.523

在 groovy[脚本](http://groovy.codehaus.org/api/groovy/lang/Script.html)中，您可以检查[绑定](http://groovy.codehaus.org/api/groovy/lang/Binding.html)：

```
binding.variables.each{  
  println it.key 
  println it.value  
} 
```

没有直接等效于 Python 的`dir`. 但是，您至少可以使用[一种技术](http://glaforge.appspot.com/article/knowing-which-variables-are-bound-or-not-in-a-groovy-script)来查找哪些变量在范围内。

# xml - 这种 XML 格式是否正确？

> ID：12979693
> 
> 赞同：0
> 
> 时间：2012-10-19T17:48:05.737
> 
> 标签：xml

我以前从未使用过 XML。我正在尝试将单个 XML 文件发送到 SQL Server，在那里它（希望）能够被解构并插入到各种表中。

我正在构建测试。因此，每个测试有 X 个问题，每个问题有 X 个答案选项和 1 个正确答案的解释。以下 XML 示例是否有效？我错过了任何可以简化它的东西吗？

```
<test>
    <testid>1</testid>
    <qablock>
        <question>
            <question_number>1</question_number>
            <question_text>What is 1 + 1?</question_text>
        </question>
        <explanation>It's 2.</explanation>
        <options>
            <option>
                <option_number>1</option_number>
                <option_value>1</option_value>
                <is_correct>0</is_correct>
            </option>
            <option>
                <option_number>2</option_number>
                <option_value>2</option_value>
                <is_correct>1</is_correct>
            </option>
            <option>
                <option_number>3</option_number>
                <option_value>3</option_value>
                <is_correct>0</is_correct>
            </option>
            <option>
                <option_number>4</option_number>
                <option_value>4</option_value>
                <is_correct>0</is_correct>
            </option>
            <option>
                <option_number>5</option_number>
                <option_value>5</option_value>
                <is_correct>0</is_correct>
            </option>
        </options>
    </qablock>
    <qablock>
        <question>
            <question_number>2</question_number>
            <question_text>What is 2 + 2?</question_text>
        </question>
        <explanation>It's 4.</explanation>
        <options>
            <option>
                <option_number>1</option_number>
                <option_value>1</option_value>
                <is_correct>0</is_correct>
            </option>
            <option>
                <option_number>2</option_number>
                <option_value>2</option_value>
                <is_correct>0</is_correct>
            </option>
            <option>
                <option_number>3</option_number>
                <option_value>3</option_value>
                <is_correct>0</is_correct>
            </option>
            <option>
                <option_number>4</option_number>
                <option_value>4</option_value>
                <is_correct>1</is_correct>
            </option>
            <option>
                <option_number>5</option_number>
                <option_value>5</option_value>
                <is_correct>0</is_correct>
            </option>
        </options>
    </qablock>
</test> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:59:31.087

您所拥有的是完全有效的 XML。它没有关联的架构（即，您可以验证结构/确保您提供的 XML 文件在使用之前符合预期，这样您就不会得到意外的结果。

您可以添加一个 XML 标头 - 这会有所帮助，因为它会告诉解析器要使用什么字符集 - 还检查您是否使用您在标头中指定的编码保存 XML 文件（如果您需要对此进行更多解释，请告诉我）。

最后，尽管您所拥有的一切都很好，但我个人会稍微不同地编写 XML 以使其更小且更易于阅读。那里没有硬性规定，但一般来说，减小文件大小是好的，可读性也是好的。

最后，我可能会将其包装在测试元素中；这样，如果您想一次上传多个测试，这很容易做到（但如果您愿意，您仍然可以一次将其用于一个文件） - 同样没有硬性规定，但建立灵活性总是好的。

```
<?xml version="1.0" encoding="utf-8"?>
<tests>
    <test testid='1'>
        <qablock number='1'>
            <question>What is 1 + 1?</question>
            <explanation>It's 2.</explanation>
            <options>
                <option number='1' value='1' />
                <option number='2' value='2' correct='true' />
                <option number='3' value='3' />
                <option number='4' value='4' />
                <option number='5' value='5' />
            </options>
        </qablock>
        <qablock number='2'>
            <question>What is 2 + 2?</question>
            <explanation>It's 4.</explanation>
            <options>
                <option number='1' value='1' />
                <option number='2' value='2'/>
                <option number='3' value='3' />
                <option number='4' value='4' correct='true'  />
                <option number='5' value='5' />
            </options>
        </qablock>
    </test>
</tests> 
```

希望有帮助。

- - - - - -编辑 - - - - - - - -

这是一个使用 SQL 的 xml 数据类型的示例；

```
declare @x xml

set @x = '<tests>
    <test testid=''1''>
        <qablock number=''1''>
            <question>What is 1 + 1?</question>
            <explanation>It''s 2.</explanation>
            <options>
                <option number=''1'' value=''1'' />
                <option number=''2'' value=''2'' correct=''true'' />
                <option number=''3'' value=''3'' />
                <option number=''4'' value=''4'' />
                <option number=''5'' value=''5'' />
            </options>
        </qablock>
        <qablock number=''2''>
            <question>What is 2 + 2?</question>
            <explanation>It''s 4.</explanation>
            <options>
                <option number=''1'' value=''1'' />
                <option number=''2'' value=''2''/>
                <option number=''3'' value=''3'' />
                <option number=''4'' value=''4'' correct=''true''  />
                <option number=''5'' value=''5'' />
            </options>
        </qablock>
    </test>
</tests>'

select @x.value('(/tests/test/qablock[@number=''2'']/question/text())[1]','nvarchar(max)') Question
, @x.value('(/tests/test/qablock[@number=''2'']/options/option[@correct=''true'']/@number)[1]','nvarchar(max)') Answer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:00:01.063

有两种方法可以验证 XML

**形成良好**

这基本上与语法有关（您的 XML 格式正确，我对其进行了验证）。

来自[维基百科](http://en.wikipedia.org/wiki/XML)

格式良好的 XML 尊重这些规则

1.  它仅包含正确编码的合法 Unicode 字符。

2.  除非执行它们的标记描述角色，否则不会出现诸如“<”和“&”之类的特殊语法字符。

3.  分隔元素的开始、结束和空元素标记正确嵌套，没有丢失和重叠。
4.  元素标签区分大小写；开始和结束标签必须完全匹配。标签名称不能包含任何字符 !"#$%&'()*+,/;<=>?@[]^`{|}~，也不能包含空格字符，并且不能以 -、. 或一个数字。

5.  有一个包含所有其他元素的“根”元素。

[您可以在此处](http://www.xmlvalidation.com/)在线验证您的 XML

**有效的 XML**

一个有效的 XML 是关于你的 XML 中的内容，它就像一个问题应该至少有 1 个解释。

为此，您需要一个[DTD](http://www.w3schools.com/dtd/default.asp)或一个[模式](http://www.w3schools.com/schema/default.asp)，然后在线验证它

# ios - 具有不同旋转的OpenGL ES 2.0点精灵-在着色器中计算矩阵？

> ID：12979696
> 
> 赞同：5
> 
> 时间：2012-10-19T17:48:14.113
> 
> 标签：ios, matrix, opengl-es-2.0, shader, point-sprites

我正在尝试找到一个解决方案，它允许我围绕 z 轴旋转具有不同属性的点精灵（即统一不会这样做）。

在我的应用程序中，我每帧绘制了成百上千个点精灵，然后将它们存储在 VBO 中（很可能最终会超过 1,000,000）。因此，我正在寻找内存使用和性能之间的最佳折衷方案。

当前的顶点和片段着色器如下所示：

```
// VERTEX SHADER
attribute vec4 a_position;
attribute vec4 a_color;
attribute float a_size;
uniform mat4 u_mvpMatrix;
varying vec4 v_color;

void main()
{
    v_color = a_color;
    gl_Position = u_mvpMatrix * a_position;
    gl_PointSize = a_size;
}

// FRAGMENT SHADER
precision mediump float;
uniform sampler2D s_texture;
varying vec4 v_color;

void main()
{
    vec4 textureColor = texture2D(s_texture, gl_PointCoord);
    gl_FragColor = v_color * textureColor;
} 
```

我目前可以想象以下可能性：

*   `mat4 rotMatrix`为我的点精灵数据添加一个属性。将此传递给片段着色器并旋转每个片段：

    ```
    vec2 texCoord = (rotMatrix * vec4(gl_PointCoord, 0, 1)).xy
    gl_FragColor = v_color * texture2D(s_texture, texCoord); 
    ```

    *   优点：
        *   保持着色器简单。
        *   计算着色器之外的矩阵的简单代码（`GLKit`例如使用）。
    *   缺点：
        *   大大增加了我的点精灵数据的大小（对于 4x4 矩阵，从 16 字节/点增加到 80 字节/点；对于 3x3 矩阵，增加到 52 字节/点……我相信可以使用 3x3 旋转矩阵？）。这可能会导致我的应用程序提前 3-5 次崩溃！
        *   将更多的计算推到 CPU 上（每帧数十/千次矩阵计算）。

*   为我的点精灵数据添加一个`float angle`属性，然后在顶点着色器中计算旋转矩阵。如上所述将旋转矩阵传递给片段着色器。

    *   优点：

        *   使点精灵数据大小保持较小（从 16 到 20 字节/点）。

        *   将繁重的矩阵数学推送到 GPU。

    *   缺点：
        *   需要编写自定义 GLSL 函数来创建旋转矩阵。不是一个大问题，但我的矩阵数学生锈了，所以这可能容易出错，特别是如果我试图找出 3x3 矩阵解决方案......
        *   鉴于这必须发生在成百上千个顶点上，这是否会严重拖累性能（尽管由 GPU 处理）？

*   我可以实际处理角度属性的 1 个字节（255 个不同的角度就足够了）。有什么方法可以使用某种查找，这样我就不需要不必要地重新计算相同的旋转矩阵？在顶点着色器中存储常量是我的第一个想法，但我不想开始在我的着色器中放置分支语句。

关于好方法的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:57:59.640

我最终采用的解决方案是问题的第二个：计算顶点着色器中的旋转矩阵。这具有以下优点：

*   使点精灵数据大小保持较小。
*   旋转计算由 GPU 执行。

我猜测的缺点似乎并不适用。即使在第一代 iPad 上运行，我也没有注意到性能下降。GLSL 中的矩阵计算有些麻烦，但效果很好。为了其他尝试做同样事情的人的利益，这里是顶点着色器的相关部分：

```
//...
attribute float a_angle;
varying mat4 v_rotationMatrix;

void main()
{
    //...

    float cos = cos(a_angle);
    float sin = sin(a_angle);
    mat4 transInMat = mat4(1.0, 0.0, 0.0, 0.0,
                           0.0, 1.0, 0.0, 0.0,
                           0.0, 0.0, 1.0, 0.0,
                           0.5, 0.5, 0.0, 1.0);
    mat4 rotMat = mat4(cos, -sin, 0.0, 0.0,
                       sin, cos, 0.0, 0.0,
                       0.0, 0.0, 1.0, 0.0,
                       0.0, 0.0, 0.0, 1.0);
    mat4 resultMat = transInMat * rotMat;
    resultMat[3][0] = resultMat[3][0] + resultMat[0][0] * -0.5 + resultMat[1][0] * -0.5;
    resultMat[3][1] = resultMat[3][1] + resultMat[0][1] * -0.5 + resultMat[1][1] * -0.5;
    resultMat[3][2] = resultMat[3][2] + resultMat[0][2] * -0.5 + resultMat[1][2] * -0.5;
    v_rotationMatrix = resultMat;

    //...
} 
```

鉴于没有明显的性能影响，这个解决方案是理想的，因为不需要创建纹理贴图/查找并消耗额外的内存，并且它保持其余代码的简洁和简单。

我不能说为每个顶点计算矩阵没有缺点（例如减少电池寿命），并且在不同的情况下性能可能是一个问题，但它对我的需要有好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T05:00:57.323

Here is your pre-multiplied rotation matrix:

```
v_rotationMatrix = mat3(cos, sin, 0.0,
                        -sin, cos, 0.0,
                        (sin-cos+1.0)*0.5, (-sin-cos+1.0)*0.5, 1.0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T02:59:59.230

您是否考虑过使用不同的预先计算和旋转的纹理（纹理图集）？如果只有几个角度就足以达到您想要达到的效果，这将是一个非常快速的解决方案。

另一方面，在片段着色器中计算纹理坐标（间接纹理查找）会降低性能。这对您的情况可能并不重要，但值得牢记。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-29T21:15:56.733

FWIW，这是我得到的与 Stuart 的代码匹配的 3x3 预计算矩阵：

v_rotationMatrix = mat3(cos, -sin, 0.0, sin, cos, 0.0, (1.0-cos-sin)*0.5, (1.0+sin-cos)*0.5, 1.0);

请注意， glsl 矩阵采用列优先格式。

# c++ - 类定义和调用有困难

> ID：12979697
> 
> 赞同：2
> 
> 时间：2012-10-19T17:48:22.137
> 
> 标签：c++, class, opencv

在 c++ 中（使用 openCV），我在头文件中定义了我的调用，如下所示：

```
class myClass
{
public: 
    myClass ( cv::Mat& _mat );
    void initClass ( cv::Mat& img, cv::Mat& mask, myClass& src, myClass& dst );
} 
```

然后在相应的“cpp”文件中，我这样定义：

```
myClass::myClass ( cv::Mat& _mat )
{
    model = _model;
     ....
 }

void myClass::initClass ( cv::Mat& img, cv::Mat& mask, myClass& src, myClass& dst )
{
    //some work here
} 
```

然后我将它的头文件包含在“main.cpp”中，并尝试这样调用它：

```
cv::Mat test ( height, width, CV_8UC3 );
cv::Mat test2 ( height, width, CV_8UC3 );
myClass::myClass auM ( test );
myClass::myClass buM ( test );
myClass::initClass ( img, img, auM, buM ); 
```

但它在最后两行都给出了错误，说：

> > 无法确定要使用哪个重载函数“myClass::myClass”实例

对于线

```
myClass::myClass auM ( test );
myClass::myClass buM ( test ); 
```

和

> > 非静态成员引用必须相对于特定对象

为线

```
 myClass::initClass ( img, img, auM, buM ); 
```

我搜索并发现它与我的类定义有关，但我无法解决它。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:51:02.633

使用一个构造函数参数实例化一个类的语法是

```
myClass auM(test); 
```

你不需要“打电话” `myClass::myClass`。至于 menber 函数`initClass`，您将其称为静态方法。需要在实例上调用非静态成员函数：

```
auM.someMethod( arg1, arg2, .... ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:51:18.517

如果您只是想构建 myClass 的两个对象，auM 和 buM，那么您应该这样做

```
myClass auM ( test );
myClass buM ( test ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T23:34:29.863

我认为您应该再看一篇关于 C++ 中面向对象编程的教程，例如[这个](http://www.cplusplus.com/doc/tutorial/classes/)。正如 juanchopanza 所说，您的具体问题是基于静态和非静态成员之间的差异。这方面的信息可以在教程页面“Classes (II)”中找到。

简而言之：非静态成员（最常用的类型）属于一个类的对象（实例）。这意味着您需要先实例化类，然后才能访问变量或调用函数。像这样：

```
MyClass myObject();
myObject.nonStaticMemberFunction(); 
```

另一方面，静态成员属于一个类而不是该类的特定对象，它们可以通过访问类的名称来调用。像那样：

```
MyClass::staticMemberFunction(); 
```

这只是关于如何调用这些不同类型的函数的粗略概述，请查看教程，以真正了解差异。

还有一些我会在你的代码中改变的东西，我并不总是得到你想要实现的东西，但我会这样做：

```
// Never heard of a "call" keyword, must be a #define?!
// By convention most people use upper case class names, to
// distinguish classes from objects.
class MyClass 
{
public: 
    MyClass ( cv::Mat& _mat );
    // If your convention is to use underscores to mark function parameters,
    // you should stick to it.
    void initClass ( cv::Mat& _img, cv::Mat& _mask, myClass& _src, myClass& _dst );
}

MyClass::MyClass ( cv::Mat& _mat )
{
    // I don't know where these variables come from, but again:
    // if you use underscores, to mark function parameters, you
    // shouldn't use them with other variable types.
    model = _model;
    ....
 }

void MyClass::initClass ( cv::Mat& _img, cv::Mat& _mask, myClass& _src, myClass& _dst )
{
    //some work here
}

int main( int argc, const char* argv[] )
{
    cv::Mat test ( height, width, CV_8UC3 );
    cv::Mat test2 ( height, width, CV_8UC3 );
    MyClass auM ( test );
    MyClass buM ( test );
    // as "initClass is a non-static member, you have to instantiate
    // MyClass before calling it:
    MyClass cuM ( test );
    cuM.initClass ( img, img, auM, buM );
} 
```

我提到的约定对于程序运行并不重要。不过，我强烈建议您尽早习惯它们，因为它们大大提高了可读性和可维护性。

# jsf-2 - JSF Primefaces - 关闭对话框时显示另一个页面

> ID：12979699
> 
> 赞同：0
> 
> 时间：2012-10-19T17:48:42.430
> 
> 标签：jsf-2, primefaces

我有需要在记录保存后关闭对话框的要求。成功保存记录后，需要为用户获取其他一些 .xhtml 页面。有人可以帮助如何实现它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:50:33.880

只需在对话框中保存按钮的操作方法中返回有效的导航结果。

例如

```
<p:commandButton value="Save" action="#{bean.save}" /> 
```

和

```
public String save() {
    // ...

    return "other.xhtml";
} 
```

# python - Python set().issubset() 没有按预期工作

> ID：12979703
> 
> 赞同：5
> 
> 时间：2012-10-19T17:48:59.660
> 
> 标签：python, python-2.7, set

我正在尝试`set().issubset()`用于比较序列。正如您可以想象的那样，它没有按预期工作；）提前：对于长代码块感到抱歉。

```
class T(object):
  def __init__(self, value, attributes = None):
    self.value = value
    self.attributes = Attributes(attributes)

  def __eq__(self, other):
    if not isinstance(other, T):
      return False
    if self.value == other.value and self.attributes == other.attributes:
      return True
    else:
      return False

  def __ne__(self, other):
    if not isinstance(other, T):
      return True
    if self.value != other.value or self.attributes != other.attributes:
      return True
    else:
      return False

class Attributes(dict):
  def __init__(self, attributes):
    super(dict, self)
    self.update(attributes or dict())

  def __eq__(self, other):
    if self.items() == other.items():
      return True
    else:
      return False

  def __ne__(self, other):
    if not self.items() == other.items():
      return True
    else:
      return False

  def __cmp__(self, other):
    return self.items().__cmp__(other.items())

x = [T("I", {'pos': 0}), T("am", {'pos': 1}), T("a", {'pos': 2}), T("test", {'pos': 3})]
y = [T("a", {'pos': 2}), T("test", {'pos': 3})] 
xx = set(x)
yy = set(y)

assert y[0] == x[2], "__eq__ did fail, really?" #works
assert y[1] == x[3], "__eq__ did fail, really?" #works
assert xx-(yy-xx) == xx, "set subtract not working" #works, but is nonsense. see accepted answer
assert not xx.issubset(yy), "i am doing it wrong..." #works
assert yy.issubset(xx), "issubset not working :(" #FAILS! 
```

运行上面的代码使最后一个断言失败：

```
$ python
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import issubsettest
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "issubsettest.py", line 52, in <module>
    assert yy.issubset(xx), "issubset not working :("
AssertionError: issubset not working :(
>>> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T17:58:14.253

您的对象正在被他们的散列`id`（您没有覆盖`__hash__`）。当然，它们不是子集，因为它们`xx`包含`yy`独特的对象。

为了做到这一点，你需要想出某种`__hash__`功能。 `__hash__`应该始终为对象返回相同的值，这就是为什么通常认为您不会改变可散列对象的原因。例如，一种选择可能是：

```
class T(object):
    #<snip> ...

    def __hash__(self):
        return hash(self.value)

    #... </snip> 
```

`self.value`具有在对象的生命周期内无法改变的理解。（*注意，我并不认为这是一个好的选择。您使用的实际哈希实际上取决于您的实际应用程序*）

* * *

现在为什么 - 集合（和字典）背后的魔力和惊人的性能是它们依赖于哈希。基本上，每个可散列对象都会变成一个“唯一”（在完美世界中）数字。Python 将这个“唯一”数字转换为一个数组索引，它可以用来获取对象的句柄（这里的魔法有点难以解释，但对于本次讨论并不重要）。因此，与其通过将对象与“数组”（通常称为表）中的所有其他对象进行比较来查找对象 - 这是一项昂贵的操作，它还可以根据哈希值准确地知道在哪里查找对象（便宜） . 默认情况下，用户定义的对象由它们的`id`（内存地址）散列。创建集合`xx`时，python 会查看每个对象`id`s 并根据它们的 id 将它们放入 a 中。现在，当您这样做时`xx.issubset(yy)`，python 会查看所有的 id`xx`并检查它们是否都在`yy`。但是*它们都不在，`yy`*因为它们都是唯一的对象（因此具有唯一的哈希值）。

但你说，“为什么`xx-(yy-xx) == xx`工作？” 好问题。让我们把它分开。

首先，我们有`(yy - xx)`. 这将返回一个*空集*，因为同样没有元素 in`xx`也在其中`yy`（它们都散列到不同的值，因为它们都有唯一`id`的 s）。所以你真的在做

```
xx - set([]) == xx 
```

这应该很明显为什么会这样`True`。

# php - 带有错误报告的php异常处理

> ID：12979706
> 
> 赞同：0
> 
> 时间：2012-10-19T17:49:25.710
> 
> 标签：php, exception, exception-handling, error-handling

考虑这个示例代码：

```
<?    
try {
        throw new Exception('new');
    } catch (Exception $ex) {
        echo "caught";
    }
?> 
```

我认为这应该在运行时只输出字符串“caught”。但是，打开显示错误后，我看到网页上显示的异常`( ! ) Exception: new in test.php on line 2`以及范围内的调用堆栈和变量的转储。

关闭显示错误后，它不会显示异常通知。即使显示错误，try catch 块不应该阻止显示通知吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:35:37.513

如果您正在使用 xdebug，并且不想禁用 xdebug 或错误报告，并且不希望出现捕获异常的跟踪消息，则可以使用以下命令关闭异常跟踪的显示

```
xdebug.show_exception_trace = 0 
```

在你的 php.ini

# tfs - 禁用保存 TFS 工作项

> ID：12979708
> 
> 赞同：0
> 
> 时间：2012-10-19T17:49:41.073
> 
> 标签：tfs, tfs-workitem

我们正在使用 Team Foundation Server 2010\2012 来管理我们的需求。我们是经过 FDA 审核的公司。通常有人在完成状态后对需求（用户故事需求）进行更改。这是一面红旗。我们添加了一个名为“锁定”的状态。

问题是当满足特定条件时如何禁用工作项的保存功能？最好向用户显示一条消息，要求已锁定并且已禁用保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:02:51.840

[您可以在 VS ALM Rangers 的 Team Foundation Server Process Template Customization Guidance](http://vsartfsptguide.codeplex.com/)中找到一些有用的示例来实现这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:21:57.990

诀窍是添加另一个字段，当状态设置为“锁定”时将填充该字段。使用“ProhibitedValues”和“Allowed Values”的组合，当“Key Master”中的人员将状态设置为“Locked”时，该字段将设置为包含有效值。该字段的此值对所有其他用户无效。该字段中的无效值将阻止普通用户在锁定后保存。

如果需要，我很乐意提供示例。

# android - 唤醒屏幕且未禁用锁定屏幕时未显示 Android 活动

> ID：12979709
> 
> 赞同：7
> 
> 时间：2012-10-19T17:49:48.560
> 
> 标签：android, android-activity, android-screen, android-windowmanager

我有一个`BroadcastReceiver`以`Activity`. 如果在`Activity`屏幕打开时启动，它会显示并且一切都很好。但是，在 ICS 和 JB 设备上（我尚未测试 GB 或 HC，但 Froyo 不存在该问题）如果在`Activity`屏幕关闭时启动，则不会禁用锁屏，并且当手机已解锁（通过手动解锁或使用我为后 Froyo 设备输入的代码解锁）。

为什么，至少在 ICS 和 JB 设备上，如果没有下面提到的代码，锁屏不会被禁用，为什么在`Activity`启动时屏幕关闭时活动不显示？

这是代码：

在`BroadcastReceiver`：

```
Intent alarmAlert = new Intent(context, AlarmGoneOffActivity.class);
alarmAlert.putExtra(MyAlarmManager.ALARM_NUM_ID, alarm.ID);
alarmAlert.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | 
                    Intent.FLAG_ACTIVITY_NO_USER_ACTION);
context.startActivity(alarmAlert); 
```

在`AlarmGoneOffActivity.onCreate()`：

```
setContentView(R.layout.alarm_gone_off);

final Window win = getWindow();
win.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN | 
             WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD | 
             WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED | 
             WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON,
             WindowManager.LayoutParams.FLAG_FULLSCREEN | 
             WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD | 
             WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED | 
             WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
}

//so far all of my post froyo devices (ICS and JB no more GB)
// don't bypass the lockscreen unless we use this
if(Build.VERSION.SDK_INT > Build.VERSION_CODES.FROYO) {
    KeyguardManager  myKeyGuard = 
                    (KeyguardManager)getSystemService(Context.KEYGUARD_SERVICE);
    KeyguardLock myLock = myKeyGuard.newKeyguardLock("ShabbosAlarm");
    myLock.disableKeyguard();
} 
```

**编辑：**我真的不想使用`KeyguardLock.disableKeyguard()`，因为它会导致键盘保护被禁用，直到`KeyguardLock.reenableKeyguard()`不方便为止。有什么解决办法吗？

**Edit2：**我现在可以确认该问题仅存在于 ICS 及更高版本上。是否进行了某些更改以防止键盘锁被禁用？即使有，为什么`Activity`手动解锁屏幕时我的不显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-22T16:49:56.630

这是我用来实现此目的的基本实现。它适用于 2.3-4.3 的用户。我敢肯定，您可以从这里开始构建它。我创建了这个非常短暂的活动，只是为了处理这个事件 - 如果需要，您可以将它用作帮助类：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.WindowManager;

public class BlankActivity extends Activity {

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        getWindow().setFlags(
                WindowManager.LayoutParams.FLAG_FULLSCREEN | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD
                        | WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON,
                WindowManager.LayoutParams.FLAG_FULLSCREEN | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD
                        | WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);

        // Your code here - Or if it doesn't trigger, see below
    }

    @Override
    public void onAttachedToWindow() {

        // You may need to execute your code here

    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {

        } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {

        }
    }

    @Override
    public void onPause() {
        super.onPause();

        finish();
    }
} 
```

在清单中：

```
 <activity
        android:name="com.your.package.BlankActivity"
        android:clearTaskOnLaunch="true"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:excludeFromRecents="true"
        android:launchMode="singleInstance"
        android:noHistory="true"
        android:theme="@android:style/Theme.Translucent.NoTitleBar.Fullscreen" >
    </activity> 
```

与其他相关帖子相反，半透明主题没有引起问题，也不需要将布局添加到 Activity。

希望它也适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-01T15:28:42.313

这段代码对我有用。我把它放在 OnCreate 活动中

```
private fun wakeScreen() {
    val window = getWindow();
    window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON or
            WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD or
            WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED or
            WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON)
} 
```

在活动清单上，我把这个

```
<activity android:name=".Alarm.AlarmNotifActivity"
        android:showOnLockScreen="true"
        android:showWhenLocked="true"
        android:launchMode="singleInstance"/> 
```

希望它会有所帮助。

# file-upload - angularjs的文件上传器集成

> ID：12979712
> 
> 赞同：65
> 
> 时间：2012-10-19T17:49:56.860
> 
> 标签：file-upload, angularjs

AngularJS 是否存在具有良好集成（指令）的良好文件上传器？

我正在寻找易于设置样式并支持 HTML5 拖放等的东西。

有人可能会说它很容易使用现有的上传器并将其集成到 AngularJS 中——我会说：如果它很容易，那么应该有人已经做到了。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-21T23:52:34.643

实际上，我曾经推出过自己的上传器......但只是因为我不喜欢任何已经制作的 JQuery 。不幸的是，这是专有的，我不能在互联网上发布它......但是......我可以向你展示如何使用来自 Angular 的任何 JQuery 插件：

> 有人可能会说它很容易使用现有的上传器并将其集成到 AngularJS 中——我会说：如果它很容易，那么应该有人已经做到了。

假设我有一个 jQuery 插件，它通过选择一个 div 并调用`pluginUploadCall()`它来工作......

```
app.directive('myJqueryPluginUploader', function() {
   return {
      restrict: 'A',
      link: function(scope, elem, attr, ctrl) {
          // elem is a jQuery lite object
          // or a jQuery object if jQuery is present.
          // so call whatever plugins you have.
          elem.pluginUploadCall();
      }
   };
}); 
```

这就是它的使用方式。

```
<div my-jquery-plugin-uploader></div> 
```

Angular 实际上与 jQuery 集成得非常好，因此任何在 jQuery 中工作的插件都应该在 Angular 中很容易地工作。当你想让依赖注入保持活跃时，唯一的技巧就出现了，这样你就可以让你的 Angular 应用程序保持可测试性。JQuery 不太擅长 DI，因此您可能不得不跳过一些障碍。

如果你想自己动手，我可以告诉你我做了这样的事情：

```
app.directive('customUploader', function(){
    return {
       restrict: 'E',
       scope: {},
       template: '<div class="custom-uploader-container">Drop Files Here<input type="file" class="custom-uploader-input"/><button ng-click="upload()" ng-disabled="notReady">Upload</button></div>',
       controller: function($scope, $customUploaderService) {
          $scope.notReady = true;
          $scope.upload = function() {
             //scope.files is set in the linking function below.
             $customUploaderService.beginUpload($scope.files);
          };
          $customUploaderService.onUploadProgress = function(progress) {
             //do something here.
          };
          $customUploaderService.onComplete = function(result) {
             // do something here.
          };
       },
       link: function(scope, elem, attr, ctrl) {
          fileInput = elem.find('input[type="file"]');
          fileInput.bind('change', function(e) {               
               scope.notReady = e.target.files.length > 0;
               scope.files = [];
               for(var i = 0; i < e.target.files.length; i++) {
                   //set files in the scope
                   var file = e.target.files[i];
                   scope.files.push({ name: file.name, type: file.type, size: file.size });
               }
          });
       }
}); 
```

您创建的自定义`$customUploaderService`服务将在哪里发布文件并检查服务器上的进度。`Module.factory()``$http`

我知道这很模糊，很抱歉，我只能提供这些，但我希望这会有所帮助。

编辑：拖放文件上传有点 CSS 的技巧，顺便说一句......对于 Chrome 和 FF，你所做的就是把它放在一个包含的 div 中......然后做这样的事情：

```
<div class="uploadContainer">Drop Files Here<input type="file"/></div> 
```

```
div.uploadContainer {
   position: relative;
   width: 600px;
   height: 100px;
}

div.uploadContainer input[type=file] {
   visibility: hidden;
   position: absolute;
   top: 0;
   bottom: 0;
   left: 0;
   right: 0;
} 
```

...现在，您在该 div 上放置的任何内容都将真正被放置在文件上传中，并且您可以使 div 看起来像您想要的任何东西。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-08T09:38:29.063

你可以试试[AngularJS.ngUpload 。](http://twilson63.github.com/ngUpload/)

这是一个无 HTML5 的解决方案，使用不可见的 iFrame 进行文件上传。由于它不依赖 HTML5，它可以跨浏览器运行！

示例代码：

```
<form action='/server/upload/handler' ng-upload="callbackFunction">
   <!-- other form inputs goes here -->
   <input type="file" name="anyEasyName" />
   <input type="submit" class="upload-submit" value="Submit" />
</form>
<div>{{uploadReport}}</div> 
```

任何支持 click 事件的 html 元素都可以用来提交带有 ngUpload 指令的表单，只是这些元素必须使用**upload-submit** css 类进行标记（如上面 input[type=submit] 的情况。

下面的示例使用样式化的 div 来提交表单。

```
<form action='/server/upload/handler' ng-upload="callbackFunction">
   <!-- other form inputs goes here -->
   <input type="file" name="anyEasyName" />
   <div style="cursor: pointer; padding: 5px" class="upload-submit">Submit</div>
</form>
<div>{{uploadReport}}</div> 
```

你可以让你的 /server/upload/handler 吐出一个有效的 url，这样**{{uploadReport}}**就可以用来设置 <img> 标签的 src，像这样：

```
<img ng-src={{uploadReport}} /> 
```

并看到上传的图像立即出现！

上述示例的 ngController 是：

```
var UploadCtrl = function ($scope) {
     $scope.callbackFunction = function(contentOfInvisibleFrame) {
         $scope.uploadReport = contentOfInvisibleFrame;
     }
} 
```

ngUpload 指令可以在您的 AngularJS 应用程序模块中注册，即：

```
var mainApp = angular.module('MainApp', ["ngUpload", ...]); 
```

并添加到您的文档中：

```
<html ng-app="MainApp">

</html> 
```

AngularJS.ngUpload 在 ngController 的上下文中工作；这样您就可以在单个 ngController 中拥有尽可能多的上传者。例如：

```
<form action='/server/upload/handler' ng-upload="callbackFunction1">
   <!-- other form inputs goes here -->
   <input type="file" name="anyEasyName" />
   <input type="submit" class="upload-submit" value="Submit" />
</form>
Server response: {{uploadReport1}}

<form action='/server/upload/handler' ng-upload="callbackFunction2">
   <!-- other form inputs goes here -->
   <input type="file" name="anotherEasyName" />
   <input type="submit" class="upload-submit" value="Submit" />
</form>
Server response: {{uploadReport2}} 
```

由以下人员送达：

```
var UploadCtrl = function ($scope) {
     $scope.callbackFunction1 = function(contentOfInvisibleFrame) {
         $scope.uploadReport1 = contentOfInvisibleFrame;
     }

     $scope.callbackFunction2 = function(contentOfInvisibleFrame) {
         $scope.uploadReport2 = contentOfInvisibleFrame;
     }
} 
```

该指令的基于 NodeJS 的上传处理程序演示可以在[http://ng-upload.eu01.aws.af.cm](http://ng-upload.eu01.aws.af.cm)找到。

可以在项目网站 github.com/twilson63/ngUpload/tree/master/examples 上找到 ASP.Net MVC 和 NodeJS 示例代码

希望这可以帮助。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-24T15:46:23.710

I have put together a simple/light angular directive with polyfill for browsers not supporting HTML5 FormData here:

[https://github.com/danialfarid/ng-file-upload](https://github.com/danialfarid/ng-file-upload)

You can send other model object along with the file to the server. Here is the demo page:

[http://angular-file-upload.appspot.com/](http://angular-file-upload.appspot.com/)

```
<script src="angular.min.js"></script>
<script src="ng-file-upload.js"></script>

<div ng-controller="MyCtrl">
  <input type="text" ng-model="myModelObj">
  <input type="file" ngf-select ng-model="files" >
</div> 
```

controller:

```
Upload.upload({
    url: 'my/upload/url',
    data: {myObj: $scope.myModelObj},
    file: $scope.files
  }).then(function(data, status, headers, config) {
    // file is uploaded successfully
    console.log(data);
  }); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-07-13T22:51:20.583

如果你想处理多个文件，试试这个

[jQuery File Upload Angularjs 包装](http://blueimp.github.io/jQuery-File-Upload/angularjs.html)来自原作者（blueimp）

我认为它是迄今为止最强大的上传器。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-09-12T13:30:49.803

我最近写了一个支持原生多文件上传的指令。

示例用法：

```
<lvl-file-upload
    auto-upload='false'
    choose-file-button-text='Choose files'
    upload-file-button-text='Upload files'
    upload-url='http://localhost:3000/files'
    max-files='10'
    max-file-size-mb='5'
    get-additional-data='getData(files)'
    on-done='done(files, data)'
    on-progress='progress(percentDone)'
    on-error='error(files, type, msg)'/> 
```

你可以[在 github 上找到代码，在](https://github.com/logicbomb/ng-directives/)[我的博客](http://jasonturim.wordpress.com/2013/09/12/angularjs-native-multi-file-upload-with-progress/)上找到文档

# packaging - 构建 RPM 包以选择性地部署源

> ID：12979714
> 
> 赞同：3
> 
> 时间：2012-10-19T17:50:00.063
> 
> 标签：packaging, redhat, rpm, rhel

我对 RPM 相当陌生，但我一直在玩它，需要做一些事情。

我必须遵守规定我必须在每个环境中使用相同的 rpm 包，我不能使用 %pre 和 %post 来修改文件。

问题是我的安装没有进行制作，事实上我正在复制文本文件和 xml 文件的文件结构。然而，这些文件包含特定于环境的代码，但遗憾的是我必须遵循这些准则。

我考虑过的“解决方案”是使用几个源文件，source0 是 dev，source1 是 test，source2 是生产，而 source3 是灾难恢复。每个源都提取到具有环境名称的文件夹（这是需要的！）

$deploy_folder/dev_code

$deploy_folder/test_code

$deploy_folder/prd_code

我将获得一个环境变量，它告诉我环境。

到目前为止，我已经部署了所有源，然后使用条件删除了不必要的文件夹

如果 [[ $env_variable == "PRD" ]] ; 然后

rm -rf $buildroot/install/$deploy_folder/dev_code

rm -rf $buildroot/install/$deploy_folder/test_code

菲

*我已经稍微简化了上面的变量

这似乎在构建时起作用，但是当我执行 rpm -i 时，它不会部署所有代码然后删除最终目的地的其他文件夹。

显然，我可能没有以正确的精神使用 RPM，所以我这样做的方式是否正确？鉴于我的文件基本上都是特定于环境的，有没有更好的方法？

如何访问部署到最终目的地的代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:37:31.367

您要问的是用于开发、测试和生产环境的单个 rpm。在构建时，您显然需要构建所有文件。我假设您正在构建一切正常，即在 %build 部分中您已将文件复制到

```
$RPM_BUILD_ROOT/$deploy_folder/dev_code
$RPM_BUILD_ROOT/$deploy_folder/test_code
$RPM_BUILD_ROOT/$deploy_folder/prd_code 
```

之后将这些文件包含在使用 %files 部分生成的 rpm(s) 中。

您始终可以使用以下命令检查 build rpm 是否在正确位置包含文件：

```
rpm -qpl <rpm file.rpm> 
```

因为您希望在安装时基于环境变量的存在进行安装，所以可以使用 %post。这是安装 rpm 后使用的部分。如果您想在卸载期间进行一些清理，您可以使用 %postun（或 %preun）部分。假设 $TESTENV 是环境变量，其中 PRD 用于生产，DEV 用于开发，TEST 用于测试，可以使用 %post 部分中的以下部分：

```
if if [ "$TESTENV" = "PRD" ]; then
    rm -rf $deploy_folder/dev_code
    rm -rf $deploy_folder/test_code
fi
if [ "$TESTENV" = "DEV" ]; then
    rm -rf $deploy_folder/prd_code
    rm -rf $deploy_folder/test_code
fi
if [ "$TESTENV" = "TEST" ]; then
    rm -rf $deploy_folder/dev_code
    rm -rf $deploy_folder/prd_code
fi 
```

不推荐为 PRD、TEST、DEV 创建单个 rpm，但如果您的要求是这样，您的方法似乎没问题。

%pre、%post、%preun、%postun 是安装时使用的部分，可以在安装时检查环境变量。显然，您不能在构建时执行此操作，因此您必须使用这些部分。如果您必须避免使用它们，那么您可能希望放弃对所有产品、开发和测试使用单一 rpm 的想法。降低单个 rpm 是一个更好的主意。单个规范文件可以为 prod、test 和 devel 创建三个不同的 rpm，也可以作为 syb 包。另一种方法是为所有三个产品生成单独的 rpm，并从单个规范进行测试和开发（这不会区分不同的环境，并且 rpm 中没有类似文件的 3 个副本。

# salesforce - VisualForce - 自定义对象的自定义详细信息页面

> ID：12979716
> 
> 赞同：0
> 
> 时间：2012-10-19T17:50:05.760
> 
> 标签：salesforce, visualforce

我对 SalesForce 开发*真的很陌生。*比如，'前几天我刚刚接到了这个任务，我这辈子从来没有接触过销售团队' 新的。因此，对于我可能使用的任何不正确的术语，我提前道歉。

老实说，我认为不正确的术语可能是我的问题的一部分，但让我为你列出来。

为了给自己一个项目，以便我可以尝试学习一些基本概念，我在我们的沙箱中创建了一个名为“订单”的自定义对象 - 从理论上讲，它可以替代我们填写的订单现在出来。我添加了一些自定义字段，并创建了与现有对象的关联，例如 Account 和 Contact 等。这一切都很好。我可以创建这样的简单订单，直到我脸色发青。

走我！

我正在尝试从那里创建一个自定义订单详细信息页面，该页面将替换默认的订单详细信息视图（我想显示其他数据，如联系电子邮件、联系电话、帐户地址等）。我创建了一个新的 visualforce 页面并在其中添加了一些文本。但我没有任何运气弄清楚如何将它与订单对象一起使用。

我能找到的唯一一个关于创建自定义详细信息页面的教程涉及 Account 对象，它有一种简单的方法来编辑“按钮和链接”。我的自定义对象找不到与该功能相媲美的任何东西。我能找到的最好的东西是对象详细信息页面上的布局编辑器，但它只是让我移动东西，并没有教我如何做我想做的事。

我知道我可能错过了整个拼图的一些非常基本的部分，而且我可能跳过了很多我应该做的步骤，但如果有人能指出我正确的方向，我真的很感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T11:24:06.237

这是我会做的

A）创建一个自定义对象 CUST_ORDER（你已经做了）

2）使用标准控制器CUST_ORDER创建一个VF页面

3) 尝试显示 CUST_ORDER 中的一些字段

4）然后尝试显示相关对象的一些字段

这是 SFDC 工作簿[http://www.salesforce.com/us/developer/docs/workbook/index.htm](http://www.salesforce.com/us/developer/docs/workbook/index.htm)

这应该让您了解如何创建 VF 页面，如何显示来自相同和相关对象的字段。

你应该参考教程#9： http: [//www.salesforce.com/us/developer/docs/workbook/index.htm](http://www.salesforce.com/us/developer/docs/workbook/index.htm)

祝你好运，阿图尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T12:29:49.180

我同意 AtulRajguru9。此外，如果您还没有获得 force.com IDE，您应该在此处获取它[http://wiki.developerforce.com/page/Force.com_IDE](http://wiki.developerforce.com/page/Force.com_IDE) - 它使编码 sfdc 比尝试使用销售人员网站。

# git - Git over HTTPS 可以 ls-list 但不能克隆

> ID：12979720
> 
> 赞同：2
> 
> 时间：2012-10-19T17:50:19.517
> 
> 标签：git, curl, https, proxy, bitbucket

虽然这是一个常见问题，但这个问题与其他问题不同，当我发出 git ls-remote [https://myuser@bitbucket.org/myser/repo.git](https://myuser@bitbucket.org/myser/repo.git)时，它会要求我输入密码并给我结果：

```
tomaz:~/ $ git ls-remote https://tcanabrava@bitbucket.org/tcanabrava/randrepo.git
Password: 
1c8cd7266ad19de952db096a0f25ee16dc3cdace        HEAD
1c8cd7266ad19de952db096a0f25ee16dc3cdace        refs/heads/master 
```

但是当我发出 git clone ...

```
tomaz:~/ $ $git clone https://tcanabrava@bitbucket.org/tcanabrava/randrepo.git
Cloning into 'felipao'...
Password: 
error: RPC failed; result=22, HTTP code = 401
fatal: The remote end hung up unexpectedly 
```

而且我已经一遍又一遍地查看了这个特定错误的所有谷歌答案，没有什么可以解决它。

1.  我确定地址是正确的，它使用 ls-remote 列出了分支。
2.  已经设置了 postBuffer = 52428800
3.  代理很好，它使用 ls-remote 列出了分支
4.  不幸的是，使用 GIT_CURL_VERBOSE=1 运行时间太长，无法在此处发布 =(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-03T23:04:31.727

使用 Git 2.18（2018 年第二季度），您现在可以更好地控制`curl`Git 使用的内容。

用于宣传 Git 接受来自另一端的 gzip 编码的 HTTP 客户端代码；相反，只需让 cURL 库宣传和协商最好的库。

请参阅[提交 eaf6a1b](https://github.com/git/git/commit/eaf6a1b6e9e7ec1dd3c17037efd271e430264975)，[提交 1a53e69](https://github.com/git/git/commit/1a53e692afd417897d76bff4ce54bc05a3a976b2)（2018 年 5 月 22 日），作者为[Brandon Williams ( `mbrandonw`)](https://github.com/mbrandonw)。
^(（由[Junio C Hamano 合并`gitster`——](https://github.com/gitster)在[提交 13e8be9](https://github.com/git/git/commit/13e8be95dbcf93f84154695b6a1be9718ff9665b)中，2018 年 5 月 30 日）)

> ## remote-curl：接受 curl 支持的所有编码

> 配置`curl`为接受 curl 支持的所有编码，而不是只接受 gzip 响应。

> `zlib`这解决了使用没有“ ”功能构建的 curl 安装时的问题。由于[aa90b96](https://github.com/git/git/commit/aa90b9697f9275e4f9cb10d274495e7587f217c0)（在 HTTP 客户端中启用 info/refs gzip 解压缩，2012-09-19，Git 1.7.12.3）我们最终还是请求了“ `gzip`”编码，尽管`libcurl`无法对其进行解码。
> 更糟糕的是，我们最终没有得到一个明确的错误信息来表明这一点，而是回到了“愚蠢的”http，产生了一个令人困惑且难以调试的结果。

> 由于`curl`不做任何检查来验证它是否支持请求的编码，而是将 curl 选项设置为`CURLOPT_ENCODING`一个空字符串，指示 curl 应该发送一个 " `Accept-Encoding`" 标头，其中仅包含 curl 支持的编码。

* * *

> 不幸的是，使用 GIT_CURL_VERBOSE=1 运行时间太长，无法在此处发布

在 Git 2.28 之前，无论如何在这里发布[`GIT_CURL_VERBOSE`或`GIT_TRACE_CURL`](https://git-scm.com/docs/git#Documentation/git.txt-codeGITTRACECURLcode).

使用 Git 2.28（2020 年第三季度），重写`GIT_CURL_VERBOSE`对`GIT_TRACE_CURL`.

请参阅[Jonathan Tan ( ) 的](https://github.com/jhowtan)[提交 7167a62](https://github.com/git/git/commit/7167a62b9e2f648adc11411446f876f2458722a5)和[提交 373e9bd](https://github.com/git/git/commit/373e9bd66e2ba468f490e5e4ec1ccbe47853f8cd)（2020 年 5 月 11 日[）](https://github.com/jhowtan)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 0b925a4](https://github.com/git/git/commit/0b925a469eb903bfcfba73e6f1ff7e32f6190e62))^(中，2020 年 6 月 9 日）)[`jhowtan`](https://github.com/jhowtan)
^([`gitster`](https://github.com/gitster))

> ## [`http, imap-send`](https://github.com/git/git/commit/7167a62b9e2f648adc11411446f876f2458722a5): 停止使用`CURLOPT_VERBOSE`
> 
> ^(签字人：Jonathan Tan)

> 无论何时`GIT_CURL_VERBOSE`设置，都教 Git 表现得如同设置，`GIT_TRACE_CURL=1`而`GIT_TRACE_CURL_NO_DATA=1`不是设置`CURLOPT_VERBOSE`。

> **这是为了防止不经意间泄露敏感数据**。

> 特别是，`GIT_CURL_VERBOSE`既不编辑“ `Authorization`”标头，也不编辑`GIT_REDACT_COOKIES`.

> 统一跟踪机制还有一个未来的好处，就是对跟踪机制的任何改进都会使用户受益`GIT_CURL_VERBOSE`，并且`GIT_TRACE_CURL,`我们不需要记住两次实施任何改进。

* * *

仍然使用 Git 2.28（2020 年第三季度），在跟踪输出中编辑敏感信息的界面已得到简化。

请参阅[Jonathan Tan ( ) 的](https://github.com/jhowtan)[提交 827e7d4](https://github.com/git/git/commit/827e7d4da470e8b9b222b2cf3b4a3b7f8c3c671f)（2020 年 6 月 5 日[）](https://github.com/jhowtan)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 b8a5299](https://github.com/git/git/commit/b8a52995941fca5dee9179607f089c39ac559965))^(中，2020 年 6 月 22 日）)[`jhowtan`](https://github.com/jhowtan)
^([`gitster`](https://github.com/gitster))

> ## [`http`](https://github.com/git/git/commit/827e7d4da470e8b9b222b2cf3b4a3b7f8c3c671f): 编辑所有 cookie，教`GIT_TRACE_REDACT=0`
> 
> ^(签字人：Jonathan Tan)

> 在跟踪输出中（当`GIT_TRACE_CURL`为真时），默认编辑所有 HTTP cookie 的值。
> 现在，auth 标头（由于`GIT_TRACE_CURL`在[74c682d3c6](https://github.com/git/git/commit/74c682d3c63bff8860af5caf9bd38a5413568709)中实现（“ `[`http.c `](https`://github.com/git/git/blob/827e7d4da470e8b9b222b2cf3b4a3b7f8c3c671f/http.c）：实现`GIT_TRACE_CURL`环境变量”，2016-05-24，Git v2 .10.0-rc0 --[合并在](https://github.com/git/git/commit/2f84df2ca0f7a5174d2eb5f4ee52324ce8f807b9)[批次 #3](https://github.com/git/git/commit/5c589a73de4394ad125a4effac227b3aec856fa1)中列出））和 cookie 值（自此提交以来）在这些跟踪中默认编辑，还允许用户通过环境变量禁止这些编辑。

> 由于现在默认编辑所有 cookie 的值，**`GIT_REDACT_COOKIES`（以前允许用户选择单个 cookie 进行编辑）现在无效。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:45:59.343

These are exact symptomps of a curl 7.28 bug. If you are using curl 7.28 downgrade it or switch to SSH auth until the fix comes out.

More info:

*   [http://sourceforge.net/tracker/?func=detail&atid=100976&aid=3577557&group_id=976](http://sourceforge.net/tracker/?func=detail&atid=100976&aid=3577557&group_id=976)
*   [http://curl.haxx.se/mail/tracker-2012-10/0014.html](http://curl.haxx.se/mail/tracker-2012-10/0014.html)
*   [https://bugs.archlinux.org/task/32004](https://bugs.archlinux.org/task/32004)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:37:40.083

我有类似的问题。我不确定有什么帮助，但是：

1.  我将 Curl 降级到 7.25
2.  我用 .netrc 更改了 URL 格式（http://stackoverflow.com/questions/5796171/git-clone-over-https-401-error-and-not-asking-for-username-or-password/5810821#5810821）
3.  一切都在 git 1.7.10 下。我从 1.8.0-1 降级（通过 WebDav 拉取和克隆在此版本中不起作用。就使用 1.7 创建的存储库而言。如果有人知道原因，请在评论中写下）。

# php - 显示单词 Array 而不是数据库条目

> ID：12979722
> 
> 赞同：0
> 
> 时间：2012-10-19T17:50:19.340
> 
> 标签：php, sql, database, codeigniter

我正在尝试从我的数据库中打印选定的产品名称，但是我看到的只是单词“Array”而不是产品名称。它显示的次数与其找到的产品数量一样多，并且该数字是正确的，但它只显示“数组”......

这是我的代码：

```
public function lookup($product)
    {

        $camera = $this->db->query("SELECT name FROM products WHERE type = 'Camera' ");

        $laptop = $this->db->query("SELECT name FROM products WHERE type = 'Laptop' ");

        $data = array();

        switch($product)
        {
            case 'camera' : 
            foreach ($camera->result() as $row)
            {
                $entry = array();
                $entry['name'] = $row->name;
                $data[] = $entry;
            }
            return $data; break;

            case 'laptop' :
            foreach ($laptop->result() as $row)
            {
                $entry = array();
                $entry['name'] = $row->name;
                $data[] = $entry;
            }
            return $data; break;

        }   
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:52:08.847

你想`echo`阵列吗？您可能应该尝试`var_dump($array_var);`或使用循环，例如`foreach`遍历数组值并打印/回显每个值。

# node.js - 将值从 PhantomJS 传递给 node.js

> ID：12979723
> 
> 赞同：10
> 
> 时间：2012-10-19T17:50:21.720
> 
> 标签：node.js, phantomjs

我有一个通过[`exec()`](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)node.js 脚本中的调用执行的 phantomJS 脚本。现在我需要从 PhantomJS 脚本中返回一个字符串，以便可以在 node.js 中使用它。
有没有办法做到这一点？

**节点应用：**

```
child = exec('./phantomjs dumper.js',
    function (error, stdout, stderr) {
        console.log(stdout, stderr);      // Always empty
    }); 
```

**dumper.js（幻影）**

```
var system = require('system');
var page = require('webpage').create();
page.open( system.args[1], function (status) {
    if (status !== 'success') {
        console.log('Unable to access the network!');
    } else {

        return "String"; // Doesn't work
    }
    phantom.exit('String2'); //Doesn't work either
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T17:52:07.140

是的，只需从 PhantomJS 输出一个 JSON 字符串，`JSON.stringify(result)`并在 node.js 中使用`JSON.parse(stdout)`.

像这样的例子：

**节点.js：**

```
child = exec('./phantomjs dumper.js',
    function (error, stdout, stderr) {
        console.log(stdout, stderr);      // Always empty
        var result = JSON.parse(stdout);
    }
); 
```

**幻影JS：**

```
var system = require('system');
var page = require('webpage').create();
page.open( system.args[1], function (status) {
    if (status !== 'success') {
        console.log('Unable to access the network!');
    } else {

        console.log(JSON.stringify({string:"This is a string", more: []}));
    }
    phantom.exit();
}); 
```

这是一些关于如何使用 PhantomJS 进行抓取的[样板文件。](https://gist.github.com/3112441)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T03:32:10.260

更简单的方法（如果你有选择的话）是使用 NPM 模块[phantom](https://www.npmjs.com/package/phantom)而不是[phantomjs](https://www.npmjs.com/package/phantomjs)。这允许您直接在 nodejs 中访问浏览器，而不是维护单独的脚本。

# javascript - node.js 应用程序中的系统托盘图标

> ID：12979727
> 
> 赞同：18
> 
> 时间：2012-10-19T17:50:51.767
> 
> 标签：javascript, node.js, user-interface, icons, system-tray

这是我在 node.js 应用程序中需要的：

*   系统托盘图标
*   在应用程序工作期间更改此图标
*   点击图标后的菜单
*   创建带有登录/密码和确认按钮字段的窗口

这是我发现的：

*   [https://github.com/appjs/appjs](https://github.com/appjs/appjs) - 看起来不错，但仍然没有系统托盘支持（看起来它会在一段时间内完成）
*   [https://github.com/zcbenz/node-gui](https://github.com/zcbenz/node-gui) - 它看起来支持我需要的所有东西，但我无法安装它（我认为这个项目已经死了......）

你有什么建议？我需要一些**可靠**、**易于安装**和尽可能**跨系统**的东西。

//编辑

**自 11 月 6 日起，Appjs 具有基本的托盘图标支持。**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-18T04:38:58.503

对于登陆这里的任何其他人，请查看[https://github.com/rogerwang/node-webkit](https://github.com/rogerwang/node-webkit) - 一个很棒的包，允许您使用 JavaScript 等您喜欢的工具创建桌面应用程序，支持本机 shell 访问、托盘图标还有更多。

更新：该应用程序已移至[NWjs.io](http://nwjs.io)，但它是同样出色的概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T15:47:03.937

看看 Node-QT ( [https://github.com/arturadib/node-qt](https://github.com/arturadib/node-qt) ) 也许会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-10-12T21:04:11.897

我在 Linux 上使用过[系统托盘。](https://www.npmjs.com/package/systray)承诺也可以在 macOS 和 Windows 上运行。但我没有测试它。

来自官方文档的示例：

```
import SysTray from 'systray'

const systray = new SysTray({
    menu: {
        // you should using .png icon in macOS/Linux, but .ico format in windows
        icon: "<base64 image string>",
        title: "标题",
        tooltip: "Tips",
        items: [{
            title: "aa",
            tooltip: "bb",
            // checked is implement by plain text in linux
            checked: true,
            enabled: true
        }, {
            title: "aa2",
            tooltip: "bb",
            checked: false,
            enabled: true
        }, {
            title: "Exit",
            tooltip: "bb",
            checked: false,
            enabled: true
        }]
    },
    debug: false,
    copyDir: true, // copy go tray binary to outside directory, useful for packing tool like pkg.
})

systray.onClick(action => {
    if (action.seq_id === 0) {
        systray.sendAction({
            type: 'update-item',
            item: {
            ...action.item,
            checked: !action.item.checked,
            },
            seq_id: action.seq_id,
        })
    } else if (action.seq_id === 1) {
        // open the url
        console.log('open the url', action)
    } else if (action.seq_id === 2) {
        systray.kill()
    }
}) 
```

它不提供

> 创建带有登录/密码和确认按钮字段的窗口

但在我看来，这项任务是一项单独的任务。因此，此答案对于只需要系统托盘图标的其他人可能会有所帮助。

# jquery - 正则表达式在数字后分隔变量 - jQuery

> ID：12979728
> 
> 赞同：-2
> 
> 时间：2012-10-19T17:50:54.317
> 
> 标签：jquery, regex

我收到了以下格式的变量：

```
var fubar = e2s2 
```

现在，字母始终相同，但数字确实发生了变化。数字只能是 1-9。最终结果我需要这样的东西：

```
var foo = e2
var bar = s2 
```

我也会满足于这个数字。我只需要有数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:53:17.757

如果它始终采用这种形式，则不需要 RegEx。

```
var foo = fubar.substr(0,2),
    bar = fubar.substr(2); 
```

..或者，如果您只想要数字：

```
var foo = fubar.substr(1,1),
    bar = fubar.substr(3); 
```

如果您真的需要 RegEx 解决方案，如何：

```
var digits = fubar.replace(/\d/g, '').split(''),
    foo    = digits[0],
    bar    = digits[1]; 
```

一百万种方法来解决它。但是除非你真的需要它，否则请避免使用 RegEx。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:53:54.437

这与`split method`

`(?![1-9])`

**或者**

```
(?=[^1-9]) 
```

**笔记：**

用于`(?![1-9]|^)`避免包含在结果数组中的空格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:54:25.613

```
var fubar = 'e2s2' ;

var foo = fubar.substr(0,2) ;
var bar = fubar.substr(2); 
```

[小提琴](http://jsfiddle.net/sushanth009/SgSwG/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T17:55:55.033

使用正则表达式替换。以下代码将起作用

```
var fubar = "e2s2";
var a = fubar.replace(/\d/g, function(arg){ return arg+ ","}).split(",");
a.pop(); // removing last item.
var foo = a[0];
 var bar = a[1]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T18:14:52.363

如果元素的格式总是**一个非数字字符后跟一个数字字符**，则使用

```
elements = str.split(/(?=\D)/) 
```

获取数组中的完整元素；并仅获取数字（数字）数组，请使用

```
(numbers = str.split(/\D/)).splice(0, 1); 
```

# wordpress - 在 WordPress 自定义菜单中显示类别帖子的数量

> ID：12979730
> 
> 赞同：1
> 
> 时间：2012-10-19T17:51:00.447
> 
> 标签：wordpress

如果有人可以帮助我解决这个问题，我将不胜感激。我想知道的是如何在外观>菜单下的WordPress自定义菜单导航中添加wp_list_categories的show_count函数？如果在菜单中添加了该类别，是否甚至可以在该类别中包含帖子数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:18:32.603

You'd have to override the `WP_Nav_Walker`. Can't remember off the top of my head, but it's similar to how [this plugin](http://wordpress.org/extend/plugins/category-posts-in-custom-menu/) works ([source](http://plugins.svn.wordpress.org/category-posts-in-custom-menu/trunk/category-posts-in-custom-menu.php)).

Some reading:

*   [http://www.kriesi.at/archives/improve-your-wordpress-navigation-menu-output](http://www.kriesi.at/archives/improve-your-wordpress-navigation-menu-output)
*   [http://wp.tutsplus.com/tutorials/creative-coding/understanding-the-walker-class/](http://wp.tutsplus.com/tutorials/creative-coding/understanding-the-walker-class/)

# ruby - Jruby 中奇怪的语法错误不一致

> ID：12979732
> 
> 赞同：0
> 
> 时间：2012-10-19T17:51:04.613
> 
> 标签：ruby, rvm, jruby

我遇到了在 OS X 上运行的 Jruby 和生产 Ubuntu 主机之间的不一致。在我的生产主机上，我有以下内容：

```
~ $ java -version
java version "1.6.0_22"
Java(TM) SE Runtime Environment (build 1.6.0_22-b04)
Java HotSpot(TM) 64-Bit Server VM (build 17.1-b03, mixed mode)
~ $ rvm use jruby-1.6.8
Using /home/ubuntu/.rvm/gems/jruby-1.6.8
~ $ rvm list rubies

rvm rubies

=> jruby-1.6.8 [ x86_64 ]
 * ruby-1.9.2-p318 [ x86_64 ]

# => - current
# =* - current && default
#  * - default

~ $ irb
jruby-1.6.8 :001 > def foo(*args)
jruby-1.6.8 :002?>   end
 => nil 
jruby-1.6.8 :003 > foo(1,
jruby-1.6.8 :004 >         2,
jruby-1.6.8 :005 >         )
SyntaxError: (irb):5: syntax error, unexpected tRPAREN

    )
    ^
    from org/jruby/RubyKernel.java:1112:in `eval'
    from /home/ubuntu/.rvm/rubies/jruby-1.6.8/lib/ruby/1.8/irb.rb:158:in `eval_input'
    from /home/ubuntu/.rvm/rubies/jruby-1.6.8/lib/ruby/1.8/irb.rb:271:in `signal_status'
    from /home/ubuntu/.rvm/rubies/jruby-1.6.8/lib/ruby/1.8/irb.rb:155:in `eval_input'
    from org/jruby/RubyKernel.java:1439:in `loop'
    from org/jruby/RubyKernel.java:1212:in `catch'
    from /home/ubuntu/.rvm/rubies/jruby-1.6.8/lib/ruby/1.8/irb.rb:154:in `eval_input'
    from /home/ubuntu/.rvm/rubies/jruby-1.6.8/lib/ruby/1.8/irb.rb:71:in `start'
    from org/jruby/RubyKernel.java:1212:in `catch'
    from /home/ubuntu/.rvm/rubies/jruby-1.6.8/lib/ruby/1.8/irb.rb:70:in `start'
    from /home/ubuntu/.rvm/rubies/jruby-1.6.8/bin/irb:17:in `(root)' 
```

那是（我相信）有效的 Ruby 代码，但更重要的是，它似乎是有效的 jruby 代码，因为它在我的 OS X 机器上运行良好：

```
~ $ java -version
java version "1.6.0_35"
Java(TM) SE Runtime Environment (build 1.6.0_35-b10-428-11M3811)
Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01-428, mixed mode)
~ $ rvm use jruby-1.6.8
Using /Users/lwiman/.rvm/gems/jruby-1.6.8
~ $ rvm list rubies

rvm rubies

   jruby-1.6.4 [ x86_64 ]
   jruby-1.6.7 [ x86_64 ]
=> jruby-1.6.8 [ x86_64 ]
 * ruby-1.9.2-p290 [ x86_64 ]
   ruby-1.9.3-p194 [ x86_64 ]

# => - current
# =* - current && default
#  * - default

~ $ irb
jruby-1.6.8 :001 > def foo(*args)
jruby-1.6.8 :002?>   end
 => nil 
jruby-1.6.8 :003 > foo(1,
jruby-1.6.8 :004 >         2,
jruby-1.6.8 :005 >         )
 => nil 
jruby-1.6.8 :006 > 
```

任何解决此问题的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:15:49.683

解决了！（昨天工作了几个小时，放在 StackOverflow 上 20 分钟后解决。问题是 Jruby 出于某种原因默认为 Ruby 1.8 模式。我不完全确定它为什么在我的 OS X 计算机上工作，但是添加 `compat.version=1.9`到我的`.jrubyrc`文件中就可以了。见：[https ://github.com/jruby/jruby/wiki/ConfiguringJRuby](https://github.com/jruby/jruby/wiki/ConfiguringJRuby)

# javascript - 网页在模拟器中的 WebChromClient 不可用

> ID：12979734
> 
> 赞同：0
> 
> 时间：2012-10-19T17:51:09.590
> 
> 标签：javascript, android, emulation, android-webview

我的模拟器能够使用默认安装的浏览器应用程序查看 Internet 上的页面。

该网页已上线：

但是，我正在使用带有 webView 和 WebChromeClient 的简短脚本并收到错误

> 网页无法显示

对于我放入脚本的任何网页。

如何让活动显示网页？

![在此处输入图像描述](../Images/f4dc880452def3fb3e96d68620b5191a.png) 代码：

```
package com.example.com.android.jquery;

import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.util.Log;
import android.view.Menu;
import android.webkit.JsResult;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;

public class MainActivity extends Activity {
      private static final String LOG_TAG = "WebViewDemo";

        private WebView mWebView;

        private Handler mHandler = new Handler();

        @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            setContentView(R.layout.activity_main);
            mWebView = (WebView) findViewById(R.id.broswer);

            WebSettings webSettings = mWebView.getSettings();
            webSettings.setSavePassword(false);
            webSettings.setSaveFormData(false);
            webSettings.setJavaScriptEnabled(true);
            webSettings.setSupportZoom(false);

            mWebView.setWebChromeClient(new MyWebChromeClient());

            mWebView.addJavascriptInterface(new DemoJavaScriptInterface(), "demo");

            mWebView.loadUrl("http://www.leobee.com");
        }

        final class DemoJavaScriptInterface {

            DemoJavaScriptInterface() {
            }

            /**
             * This is not called on the UI thread. Post a runnable to invoke
             * loadUrl on the UI thread.
             */
            public void clickOnAndroid() {
                mHandler.post(new Runnable() {
                    public void run() {
                        mWebView.loadUrl("javascript:wave()");
                    }
                });

            }
        }

        /**
         * Provides a hook for calling "alert" from javascript. Useful for
         * debugging your javascript.
         */
        final class MyWebChromeClient extends WebChromeClient {
            @Override
            public boolean onJsAlert(WebView view, String url, String message, JsResult result) {
                Log.d(LOG_TAG, message);
                result.confirm();
                return true;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:54:24.380

检查您的应用互联网使用权限。

谢谢

# asp.net - 应用程序问题中的 IIS7 应用程序

> ID：12979756
> 
> 赞同：2
> 
> 时间：2012-10-19T17:52:17.983
> 
> 标签：asp.net, iis, iis-7

我在 IIS 中有一个工作的 asp.net 4.0 应用程序。我们将其称为“应用 A”。

我想在其中添加一个完全独立的 4.0 应用程序，该应用程序没有依赖关系或根本与之相关。我们将其称为“应用程序 B”。

我将 App B 移动到 App A 的根目录中并将其转换为 Web 应用程序，然后将其分配到其自己的单独应用程序池中。

当我尝试访问应用程序 B 时，它给了我错误（无法加载文件或程序集），即应用程序 B 中缺少的 DLL 仅在应用程序 A 中，并且在应用程序 B 中没有关系或依赖关系，因为它完全不同。

任何想法如何让 App B 在嵌套在其根目录中时与 App A 完全分开运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:37:47.150

这为我修复了它：

```
<location path="." inheritInChildApplications="false"> 
  <system.webServer>
    <!-- ... -->
  </system.webServer>
</location> 
```

[IIS 中的嵌套 ASP.NET“应用程序”继承父配置值？](https://stackoverflow.com/questions/4144117/nested-asp-net-application-within-iis-inheriting-parent-config-values)

# blackberry - Blackberry Developers Alpha 设备驱动程序

> ID：12979757
> 
> 赞同：1
> 
> 时间：2012-10-19T17:52:19.730
> 
> 标签：blackberry, blackberry-simulator, blackberry-webworks

我有 BB 10 Developers Alpha 设备。由于某种原因，我不得不从设备中滑动整个数据（从设置中滑动数据选项）。但之后我无法将我的设备连接到 BB 桌面管理器。主屏幕上的所有默认图标也都消失了，除了浏览器。

我尝试了来自 -

[http://supportforums.blackberry.com/t5/Testing-and-Deployment/BB10-Dev-Alpha-Device-Driver-or-how-to-restore-the-OS/td-p/1735097](http://supportforums.blackberry.com/t5/Testing-and-Deployment/BB10-Dev-Alpha-Device-Driver-or-how-to-restore-the-OS/td-p/1735097)

但无济于事。我怎样才能让设备恢复到正常状态。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T19:21:18.993

我有同样的问题。

1.  去[这里](https://developer.blackberry.com/blackberry10devalphas/update)
2.  在页面底部下载“Dev Alpha autoloader”
3.  执行所有指示

并**享受**！

# python - 等待 API 调用成功响应

> ID：12979760
> 
> 赞同：0
> 
> 时间：2012-10-19T17:52:30.527
> 
> 标签：python, json, httprequest, urllib2

我正在使用 Yahoo Api，除了添加了硬睡眠之外，我还实现了随机睡眠方法，但我仍然无法弄清楚如果我在第一次尝试时没有得到响应，我该如何等待或重试。

例如，我在下面放置的代码完全随机地在某些用户中失败。失败后，我在浏览器上获取 url，它就像一个魅力。所以我的问题是为什么？我该如何解决这个问题？或者我可以改进此代码以在艰难睡眠后执行另一个请求（仅当那是一个好方法时）

我忘了添加更多信息，我更改了代码以获取我的 http 成功代码：

```
print urlobject.getcode() 
```

它返回 200，但没有 json，因为有些人认为这可能是节流。

*注意：我已经从 url 中删除了我的 appid(Key)*

```
# return the json question for given question id
def returnJSONQuestion(questionId):
    randomSleep()
    url = 'http://answers.yahooapis.com/AnswersService/V1/getQuestion?appid=APPIDREMOVED8&question_id={0}&output=json'
    format_url = url.format(questionId)
    try:
        request = urllib2.Request(format_url)
        urlobject = urllib2.urlopen(request)
        time.sleep(10)
        jsondata = json.loads(urlobject.read().decode("utf-8"))
        print jsondata
    except urllib2.HTTPError, e:
        print e.code
        logging.exception("Exception")
    except urllib2.URLError, e:
        print e.reason
        logging.exception("Exception")
    except(json.decoder.JSONDecodeError,ValueError):
        print 'Question ID ' + questionId + ' Decode JSON has failed'
        logging.info("This qid didn't work " + questionId)
    return jsondata 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T19:33:10.900

好的，首先，有几点不能直接回答您的问题，但可能会有所帮助：

1) 我很确定在调用 urllib2.urlopen 和读取返回的 addinfourl 对象之间永远不需要等待。[http://docs.python.org/library/urllib2.html#examples](http://docs.python.org/library/urllib2.html#examples)上的示例没有任何此类睡眠。

2)

```
json.loads(urlobject.read().decode("utf-8")) 
```

可以简化为

```
json.load(urlobject) 
```

这更简单，更具可读性。基本上， .load 接受一个类似文件的对象作为参数，而 .loads 接受一个字符串。您可能认为必须先 read() 才能从 utf-8 解码数据，但这实际上没有问题，因为 .load 默认假定它正在读取的对象是 ascii 或 utf- 8 编码（参见[http://docs.python.org/library/json.html#json.load](http://docs.python.org/library/json.html#json.load)）。

3）对于您目前的目的可能无关紧要，但我认为您在这里的异常处理很糟糕。如果在“try:”块期间出现任何问题，则不会分配变量 jsondata。然后，当我们在 try/except 块结束后尝试返回它时，由于尝试使用未分配的变量，将引发 NameError。这意味着如果您的应用程序中的某个其他函数调用 returnJSONQuestion 并发生异常，那么外部函数看到的将是 NameError，而不是原始异常，并且外部函数生成的任何回溯都不会指向真正的问题发生了。当试图找出问题所在时，这很容易引起混乱。因此，如果你所有的'except'块都以'raise'结束会更好。

4) 在 Python 中，最好将注释说明函数的作用作为 docstrings（参见[http://www.python.org/dev/peps/pep-0257/#what-is-a-docstring](http://www.python.org/dev/peps/pep-0257/#what-is-a-docstring)）而不是作为函数上方的注释。

无论如何，要**实际回答您的问题**...

出于各种原因尝试打开 URL 时，您可能会收到看似随机的 URLError。在处理您的请求期间，服务器上可能存在错误；可能存在连接问题并且丢失了一些数据；也许服务器关闭了几秒钟，而其中一位管理员更改了设置或推送了更新；也许完全是另一回事。在进行了一些 Web 开发之后，我注意到一些服务器比其他服务器更可靠，但我认为对于大多数实际用途而言，您可能不需要担心原因。最简单的做法就是重试请求，直到成功。

考虑到以上所有内容，下面的代码可能会满足您的需求：

```
def returnJSONQuestion(questionId):
    """return the json question for given question id"""

    url = 'http://answers.yahooapis.com/AnswersService/V1/getQuestion?appid=APPIDREMOVED8&question_id={0}&output=json'
    format_url = url.format(questionId)
    try:
        request = urllib2.Request(format_url)

        # Try to get the data and json.load it 5 times, then give up
        tries = 5
        while tries >= 0:
            try:
                urlobject = urllib2.urlopen(request)
                jsondata = json.load(urlobject)
                print jsondata
                return jsondata
            except:
                if tries == 0:
                    # If we keep failing, raise the exception for the outer exception
                    # handling to deal with
                    raise
                else:
                    # Wait a few seconds before retrying and hope the problem goes away
                    time.sleep(3) 
                    tries -= 1
                    continue

    except urllib2.HTTPError, e:
        print e.code
        logging.exception("Exception")
        raise
    except urllib2.URLError, e:
        print e.reason
        logging.exception("Exception")
        raise
    except(json.decoder.JSONDecodeError,ValueError):
        print 'Question ID ' + questionId + ' Decode JSON has failed'
        logging.info("This qid didn't work " + questionId)
        raise 
```

希望这可以帮助！如果您要在程序中发出许多不同的 Web 请求，您可能希望将这个“异常重试请求”逻辑抽象到某个函数中，这样您就不需要样板重试逻辑与其他东西混合在一起。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T19:41:41.167

我遇到过很多这样的问题。我通常像这样实现我的 API 请求包装器或浏览器“get”：

```
def get_remote( url , attempt=0 ):
   try :
       request = urllib2.Request(format_url)
       urlobject = urllib2.urlopen(request)
       ...
       return data
   except urllib2.HTTPError , error:
       if error.code in ( 403 , 404 ):
           if attempt < MAX_ATTEMPTS :
                return get_remote( url , attempt=attempt+1 )
       raise 
```

根据 url 或尝试，我还将更改请求参数。例如，某些网站会阻止 Python 识别的浏览器——所以如果它们与正则表达式匹配，我会将用户代理换成 Firefox。或者：如果第一次尝试失败，我可能总是在第二次请求上尝试 Firefox/Safari，或者在后续尝试之间实现随机超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T19:28:53.700

我不知道失败的原因，这可能是一些雅虎限制（或者可能不是），但实际上，保存问题 ID 是个好主意，这会导致失败并稍后重试。

这很容易做到。稍微修改一下函数：

```
def returnJSONQuestion(questionId):
    randomSleep()
    jsondata = None
    url = 'http://answers.yahooapis.com/AnswersService/V1/getQuestion?appid=APPIDREMOVED8&question_id={0}&output=json'
    format_url = url.format(questionId)
    try:
        request = urllib2.Request(format_url)
        urlobject = urllib2.urlopen(request)
        time.sleep(10)
        jsondata = json.loads(urlobject.read().decode("utf-8"))
        print jsondata
    except urllib2.HTTPError, e:
        print e.code
        logging.exception("Exception")
    except urllib2.URLError, e:
        print e.reason
        logging.exception("Exception")
    except(json.decoder.JSONDecodeError,ValueError):
        print 'Question ID ' + questionId + ' Decode JSON has failed'
        logging.info("This qid didn't work " + questionId)
    return jsondata 
```

在任何失败的情况下，这个函数都会返回 None。所以，你可以检查结果，如果它是 None - 将问题 id 存储在某个列表中，然后重试大约 3 次。也许第二次会更幸运。

当然，您也可以修改函数，它会在出错时同时重试几次请求，但第一个解决方案对我来说看起来更可取。

顺便说一句，将 'User-Agent' 标头设置为某个真实的浏览器值——在这种情况下通常也是一个好主意，例如 Google 在许多情况下不会为此类“robo-parsers”返回结果

# javascript - 灯箱效果（使用最少的 javascript）问题

> ID：12979762
> 
> 赞同：0
> 
> 时间：2012-10-19T17:52:42.680
> 
> 标签：javascript, html, css, onclick, lightbox

我想在最低级别（并且没有外部 .js 文件）创建一个带有 javascript 的灯箱。我对JS很陌生，所以我不知道如何正确解决一些问题。

我有一组画廊风格格式的链接。像这个：

```
<a href = "javascript:void(0)" onclick = "document.getElementById('overlay').style.display='block';document.getElementById('popUpContainer').style.display='block';document.getElementById('post03').style.display='block'" class="box col3" id="pan03"></a> 
```

它以灯箱样式加载“面板”。像这些：

```
 <div id="popUpContainer">
  <div id="popUp">
    <div class="bigPan" id="post01"></div>
    <div class="bigPan" id="post02"></div>
    <div class="bigPan" id="post03"></div>
    <div class="bigPan" id="post04"></div>
    <div class="bigPan" id="post05"></div>
    <div class="bigPan" id="post06"></div>
    <div class="bigPan" id="post07"></div>
    <div class="bigPan" id="post08"></div>
    <div class="bigPan" id="post09"></div>
    <div class="bigPan" id="post10"></div>
    <div class="bigPan" id="post11"></div>
    <div class="bigPan" id="post12"></div>          
  </div>
 </div> 
```

CSS是这样的：

```
#overlay {
            width: 100%;
            height: 100%;
            display: none;
            position: fixed;
            background-color: #FFD365;
            z-index: 300;
            opacity: 0.7;

    }

    #close {
            width: 100%;
            height: 100%;
            z-index: 301;
            background-color: black;
    }

    #popUpContainer {
            position: absolute;
            display: none;
            left: 50%;
            top: 135px;
            padding: 0px;
    }

    #popUp {
            width: 800px;
            height: 520px;
            padding: 0px;
            position: relative;
            left: -50%;
            z-index: 400;
    }

    .bigPan {
            margin:0px;
            width: 100%;
            height: 100%;
            border-radius: 5px;
    }

    #post01 {background-color: #F47A44; display: none;}
    #post02 {background-color: #558F26; display: none;}
    #post03 {background-color: #E30613; display: none;}
    #post04 {background-color: #0E84B4; display: none;}
    #post05 {background-color: #4E2583; display: none;}
    #post06 {background-color: #95C11F; display: none;}
    #post07 {background-color: #009FE3; display: none;}
    #post08 {background-color: #D7007F; display: none;}
    #post09 {background-color: #E6332A; display: none;}
    #post10 {background-color: #E29924; display: none;}
    #post11 {background-color: #008D36; display: none;}
    #post12 {background-color: #EB5B93; display: none;} 
```

好的。一切正常，除了当我单击另一个链接以显示另一个面板时，它会加载之前加载的最后一个面板。这是问题的截图：

![在此处输入图像描述](../Images/52cc05d51aad132b49ba97d7a4aa084d.png)

所以我想解决这个问题，如果可能的话，我希望你帮助我使用`<script>`标签和数组来清理代码，我想。

先感谢您。

这是一个[jsFiddle](http://jsfiddle.net/eqhRG/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:05:51.663

也许尝试这样的事情？：

```
<script type="text/javascript">
    function showPopup(anchor) {
        console.clear();
        var target = anchor.getAttribute("href").replace("#", "");
        console.log("Anchor clicked to show div with id: " + target);

        document.getElementById("overlay").style.display = "block";
        document.getElementById("popUpContainer").style.display = "block";

        var popup = document.getElementById("popUp");
        var posts = popup.getElementsByTagName("div");

        for (var i = 0; i < posts.length; i++) {
            var post = posts[i];
            if (post.id == target) {
                console.log("div with id: " + post.id + " is being shown");
                post.style.display = "block";
            } else {
                console.log("div with id: " + post.id + " is being hidden");
                post.style.display = "none";
            }
        }
    }
</script>

<a id="pan03" href="#post03" onclick="showPopup(this);return false;">post03</a> 
```

我会试着弄一个 jsFiddle

**更新**：

这是jsFiddle：

[http://jsfiddle.net/3jB9p/1/](http://jsfiddle.net/3jB9p/1/)

**更新**：

叠加层自行关闭的代码：

```
<a id="overlay" href="#" onclick="closeOverlay(this);return false;"></a>

function closeOverlay(overlay) {
    overlay.style.display = "none";
    document.getElementById("popUpContainer").style.display = "none";
    document.getElementById("bigPan").style.display = "none";
} 
```

**更新**：

这是一个小提琴，它解决了我以前的一些问题并清理了代码：http: [//jsfiddle.net/eqhRG/2/](http://jsfiddle.net/eqhRG/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:06:27.453

当您不熟悉 JS 时，首先要意识到外部 javascript 文件是您的朋友。使用外部文件允许您编写易于使用和扩展的模块化、可重用代码。所以，我要问的第一件事是为什么你不能使用外部文件？

您遇到的问题似乎是由于您没有隐藏先前打开的面板这一事实引起的。

你*可以*把它改成这样：`<a href = "javascript:void(0)" onclick = "document.getElementById('overlay').style.display='block';document.getElementById('popUpContainer').style.display='block';document.getElementById('post03').style.display='block';;document.getElementById('post02').style.display='none'" class="box col3" id="pan03"></a>`

但是，如果您想四处移动面板或有很多面板，那将不是一个很好的解决方案。您可以将所有弹出窗口存储在一个数组中，并使用该数组来显示和隐藏您想要的弹出窗口。或者，您可以做很多灯箱插件所做的事情，将您的弹出 div 放在某个地方，隐藏，当您想要查看面板时，将面板的 HTML 替换为弹出窗口 HTML 并简单地显示面板和覆盖。使用`innerHTML`你可以很容易地做到这一点。

# c - 如何不在文本框中显示用户文本（密码）条目（如 su 命令）

> ID：12979763
> 
> 赞同：2
> 
> 时间：2012-10-19T17:52:47.597
> 
> 标签：c, gtk

我有一个`GtkEntry`，用户必须在其中提供密码。

我做了

```
gtk_entry_set_visibility(GTK_ENTRY(password_entry), FALSE); 
```

在纯文本中使用另一个符号而不是真实密码，但我希望在`GtkEtry`用户输入密码时不显示文本，就像 su 程序一样。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T18:40:43.860

在[docs](http://developer.gnome.org/gtk/2.24/GtkEntry.html#gtk-entry-set-visibility)的正下方`gtk_entry_set_visibility`，有**gtk_entry_set_invisible_char**，它有以下注释：

> [...] 如果您将 invisible char 设置为 0，那么用户将根本得不到任何反馈；他们键入时屏幕上不会有文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T19:07:50.063

如果你找不到更好的东西，你可以这样做：

将信号连接到“insert_text”上的 gtk_entry（或任何 gtk_editable），获取输入的字符，存储它，最后使用 g_signal_stop_emission_by_name(G_OBJECT(editable),“insert_text”)；隐藏字符

例如，此代码丢弃非数字字符：

```
g_signal_connect(G_OBJECT(form->field[i].control), "insert_text", G_CALLBACK(insert_text_handler), GINT_TO_POINTER(form->field[i].type_of));

void insert_text_handler(GtkEditable *editable, const gchar *text, gint length, gint *position, gpointer data)
{
    gint i;

    switch(GPOINTER_TO_INT(data)) {
        case TYPE_DIGIT:
            for (i = 0; i < length; i++) {
                if (!isdigit(text[i])) {
                    g_signal_stop_emission_by_name(G_OBJECT(editable), "insert_text");
                    return;
                }

... 
```

# email - 在不同电子邮件客户端的签名中插入图像的限制？

> ID：12979766
> 
> 赞同：1
> 
> 时间：2012-10-19T17:52:58.200
> 
> 标签：email, jakarta-ee, tinymce, gmail, yahoo

GMAIL 允许从本地系统/公共 Web 服务器在正文中插入图像，但对于将图像插入到签名中，它只允许来自公共 Web 服务器的图像而不是来自本地系统。将图像从本地系统插入到签名中是否有任何技术限制gmail 不允许吗？据我了解，如果 GMAIL 允许从本地系统在正文中插入图像，它也应该允许签名吗？对于信息，这是在 gmail 签名中插入图像的过程。 [http://email.about.com/od/gmailtips/qt/How-To-Add-An-Image-To-Your-Gmail-Signature.htm](http://email.about.com/od/gmailtips/qt/How-To-Add-An-Image-To-Your-Gmail-Signature.htm)

同样，雅虎无论如何都不允许在正文中插入插入图像。只有一个我发现我们可以在雅虎上做到这一点，即只能在 mozilla 上。使用 CTRL+C 复制图像，然后在 Text Rich Editor 上使用 CTRL+V。但 chrome/IE 似乎不支持这一点。

我使用 tinymce 作为图像签名的富文本编辑器。有没有办法我可以从本地系统上传上传抛出这些选项中的任何一个

```
 1)Thrugh browsing to the director where image exist
    OR
   2)Drag/'drop
    OR
   3)CONTROL +C/CONTROL+V 
```

# php - 如何在 Ubuntu 12.10 中从 Kohana 2（放置在项目文件夹中）迁移到 Kohana 3（安装的是一个模块）？

> ID：12979768
> 
> 赞同：0
> 
> 时间：2012-10-19T17:53:02.467
> 
> 标签：php, ubuntu, migration, kohana

更新到 Ubuntu 12.10 后，我发现 Kohana 2 不起作用。我只看到状态为 200 OK 的空白页面（system/core/Kohana.php 中的 ob_end_flush 不调用）。

那么，是否可以通过最少的项目更改迁移到 Kohana 3（该项目的所有开发人员都将使用 Kohana 2，我们使用一个 svn，所以我不想破坏他们从同一个 svn 部署的版本和生产） ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:04:29.300

在迁移到 Kohana 3 时，您必须做很多工作。

您的应用程序代码将大部分被重写。

Kohana 3 与 Kohana 2 有很多不同之处——类名、路由、模型、目录结构、控制器等等。

所以最好开始新项目并在新版本上实现相同的逻辑。

[这是](http://kohanaframework.org/3.0/guide/kohana/upgrading)Kohana 团队关于 2 -> 3 迁移的简短指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T01:20:06.620

我找到了解决方法：[https ://gist.github.com/2881489](https://gist.github.com/2881489)

如果您使用低于 2.4 的 Kohana，则必须将 2.4 的文件 Arr.php 放入您的 Kohana。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:03:22.007

看起来您有带有新 ubuntu 的新 php 版本，并且您可能正在使用某种已弃用的 php 代码。

您是否设置了适当的报告级别？

```
ini_set('display_errors',1); 
error_reporting(E_ALL); 
```

我的 kohana 2 在最新的 ubuntu 上运行良好。

如果报告仍然不起作用，请尝试调试您的应用程序并查找与新 php 版本相关的错误。

# java - 转换 joda 日期时间

> ID：12979773
> 
> 赞同：1
> 
> 时间：2012-10-19T17:53:19.870
> 
> 标签：java, jodatime

我有一个类似的字符串`"2007-03-12T04:27:00.000+01:00"`，我想将其转换为 datetime 对象并进行一些计算。目前我正在使用`joda.time`. 当我将其转换为 joda DateTime 对象并尝试打印时，它显示为`"2007-03-12T08:57:00.000+05:30"`. 如何打印具有相同时区的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:56:44.320

```
// get current moment in default time zone
DateTime dt = new DateTime();
// translate to London local time
DateTime dtLondon = dt.withZone(DateTimeZone.forID("Time Zone ID here"));//Europe/Paris 
```

[您可以在此处](http://joda-time.sourceforge.net/timezones.html)找到时区 ID 的详细列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:25:08.697

除非您指定所需的时区，否则 DateTime 默认为机器本地时区。[DateTime(Object)](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#DateTime%28java.lang.Object%29)构造函数使用偏移量来确定您的意思，但它不使用偏移量来设置时区。所以而不是：

```
 DateTime localDateTime = new DateTime("2007-03-12T04:27:00.000+01:00"); 
```

解析偏移量，得到合适的 DateTimeZone，交给 DateTime。

```
 DateTimeZone zone1 = DateTimeZone.forOffsetHoursMinutes(01, 00);
    DateTime localDateTime = new DateTime("2007-03-12T04:27:00.000", zone1); 
```

# .net - .Net 4.0 应用程序在 64 位上比 32 位慢（分析和可能的解决方案）（应用程序正在使用 NetAdvantage）

> ID：12979774
> 
> 赞同：8
> 
> 时间：2012-10-19T17:53:19.773
> 
> 标签：.net, performance, 64-bit, 32bit-64bit, infragistics

我们有用 VB .NET 4.0 / VS2010 编写的 .NET 应用程序，编译时所有项目都设置为 AnyCPU 设置，用于调试和发布配置。我们注意到，当此应用程序在 64 位环境（在 Windows Server 2003 R2 和 2008 R2 上测试）上运行时，应用程序所需的时间至少是 6-12 秒的两倍（绝对值约为 25 秒）在 32 位环境（Win XP 和 7）上启动几秒钟。

我应该补充一点，64 位系统是强大的服务器，绝对比其他经过测试的 32 位系统更强大。所有其他应用程序在 64 位上都更快，但不是我们糟糕的应用程序；）（我们确实在不同的时间、不同的负载下测试了这些应用程序，结果总是几乎相同。）

如上所述，该应用程序是使用 AnyCPU 构建的，它确实在 64 位操作系统下作为 64 位程序集运行（通过 TaskManager 检查）。该应用程序本身是一个 WinForms 应用程序，使用 NetAdvantage Forms v10.3 并定期查询和写入 MS SQL Server 2008。

不同的目标机器都在同一个网络上，所以数据库的路径（性能测试使用同一个数据库）是相同的，我不认为问题出在数据库或网络本身。

我确实注意到的一件事对我来说似乎很奇怪，那就是当我在 MainForm 启动期间使用秒表构建不同的“分析步骤”时，InitializeComponent 方法在 64 位上花费了两倍的时间，大约 4 秒而不是 1.5在 32 位上。

这是我们在两个系统上部署的完全相同的应用程序，没有不同的配置。

所以我有两个问题：

知道这可能是什么原因吗？

并且：确定“违规”代码的最佳方法是什么？目前我使用秒表并尝试缩小范围。但在我看来，就我们的应用程序而言，64 位机器上的一切都比较慢，所以我不太确定是否可以将其分解为特定的语句。

谢谢大家的帮助，非常感谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T03:02:05.280

事实证明，一旦我们从 AnyCPU 编译切换到专门的 x86，即也在 x64 位平台上以 x86 运行，我们又回到了“良好的速度”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-09T20:40:00.697

有同样的问题 - 是的，JIT 是罪魁祸首。通过明智地使用 msgbox，将其缩小到需要 10 秒才能启动的*方法*（通过在调用大方法之前调用消息框，然后作为大函数的第一行。）而且，是的，只有在编译为 AnyCPU，但不是在显式 x86 时；而不是在调试中运行时。

就我而言，它是一个 5000 行的 Windows Forms `InitializeComponent`。

为了证明这一点，运行（提升的）“ `c:\windows\<.net framework dir>\ngen.exe install <myassembly.exe>`”将编译一个原生镜像。如果这解决了它，那么是的，JIT 是罪魁祸首。

长期修复，或者：

*   每次部署程序时使用 ngen 来重建本机映像（或使用 ngen update 来重建，但显然只能安装一次）；（缺点是管理 ngen 图像和 ngen 所需的时间。这是我采取的路线，因为对于大型应用程序有整体性能提升。）

*   或者您可以将属性添加`<System.Runtime.CompilerServices.MethodImpl(MethodImplOptions.NoOptimization)>`到方法中。（在方法上禁用 JIT，因此执行速度较慢，*但*​​您无需支付 JITing 的初始开销，这对我们来说是昂贵的部分）

（我怀疑两者都做是徒劳的，因为这意味着放弃大型方法的原生形象而没有收获。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-28T17:15:02.490

我最近在应用程序中遇到了同样的性能问题。是的，将它编译为 x86 解决了这个问题；然后它在任一平台上都运行得很快。但启动响应时间缓慢的真正原因是由于 32 位到 64 位的迁移问题。我认为，当应用程序启动并通过 JIT 流程将代码转换为 IL 时，编译器会确定代码中存在问题（如非类型安全代码），在它可以在 64 位运行之前必须解决这些问题模式。我浏览了这篇文章，现在正试图通过应用程序来确定哪些部分导致了问题。请参阅这篇文章：http: [//msdn.microsoft.com/en-us/library/ms973190.aspx](http://msdn.microsoft.com/en-us/library/ms973190.aspx)。我可以不理会它，因为它可以工作，但理想情况下，如果问题得到解决，它会在 64 位模式下运行得更好。

# database - 为版本化数据设计数据模型

> ID：12979778
> 
> 赞同：13
> 
> 时间：2012-10-19T17:53:32.830
> 
> 标签：database, database-design, datamodel

我正在寻找有关设计围绕版本化数据的数据模型的最佳方法的一些输入。会有一对多和多对多的关系，这些关系都可以随着版本的变化而变化。

我正在寻找一些不同的策略，最终目标是有效比较，如果可能的话只存储增量。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-19T20:19:12.370

## 介绍

这实际上是一个相当困难的问题。

版本控制对象很容易。它们之间的版本连接并没有那么多——您必须做出一些设计决策。例如：

*   您是否需要在历史的任何时刻获取整个图表的“快照”？
*   您想要永久删除而不是恢复已删除对象和连接的能力吗？
*   您喜欢速度（并且不介意在版本之间复制整个图表）还是空间？

最重要的是，大多数“支持”表可能也需要“版本感知”。

## 设计

如果我是你，我可能会从以下起点开始：

![在此处输入图像描述](../Images/78eafd399139c9ef1dc62484eb719e9d.png)

*OBJECT 和 CONNECTION 之间的符号是[“类别”](https://stackoverflow.com/a/12037398/533120)（又名继承、子类、泛化层次结构等）。*

这种设计背后的基本思想是支持“快照”、“恢复”和“增量”功能：

*   整个图有一个全局版本（又名“生成”），我们只存储它们之间的增量。
*   每个对象都使用该全局代进行版本控制（与本地的、特定于对象的版本相反）。
*   连接是对象，这使得它们也被版本化。
*   每次一组对象进入存储库时，都会插入一个新的 GENERATION 并且：
    *   插入的对象被插入到 OBJECT 和 OBJECT_VERSION。
    *   修改后的对象被插入到 OBJECT_VERSION。
    *   已删除的对象被插入到 OBJECT_VERSION 中，DELETED = true。
    *   恢复的对象被插入到 OBJECT_VERSION 中，DELETED = false。顺便说一句，这使得删除/恢复周期可以重复多次。
    *   其余的对象都保持不变，所以我们不会浪费空间来复制未更改的数据。
*   无法真正修改连接。要将子对象“移动”到新的父对象，请删除旧连接（通过如上所述设置 DELETED）并插入新连接。事实上，删除是连接支持的唯一一种修改。

查询将是这样的：

*   要获得单个对象，请从其所有版本中选择仍不高于所需代的最高版本。如果此版本的 DELETED 为真，则此代中不存在对象。
*   要在所需的代获取整个图的快照，请对所有对象执行上述操作并创建内存图。消除一个或两个端点都被删除的连接。
*   要使对象连接到给定对象，请递归遍历 CONNECTION，但一旦遇到不符合上述条件的对象，就立即切断递归。

## 例子

假设您必须放置对象 A、B 和 C，其中 A 是 B 和 C 的父对象：

```
generation: 0

      A0
     /  \
   B0    C0 
```

添加新对象 D：

```
generation: 0 1

      A0
     / | \
   B0  C0 D1 
```

修改A和C并删除B：

```
generation: 0 1 2

      A0
      A2
     / | \
   B0  C0 D1
   B2* C2

   (*) OBJECT_VERSION.DELETED is true 
```

将 C 从 A 移动到 D：

```
generation: 0 1 2 3

      A0
      A2
     / |* \
   B0  C0  D1
   B2* C2  |
           C3 
```

ETC...

## 一些沉思

这种设计对不一致删除的异常情况是开放的：数据库不会保护自己不连接已删除和未删除的对象，或者在不删除连接的情况下将其中一个对象演变为已删除状态。在检查两个端点之前，您不会知道连接是否有效。如果您的数据是分层的，您可以使用“可达性模型”来代替：如果可以从某个根对象访问对象，则不会删除该对象。您永远不会直接删除该对象 - 您只需删除与它的所有连接。这对于文件夹/文件或类似的层次结构非常有效，您从“顶部”开始并向下搜索直到找到所需的对象。

“不可变”连接的替代方法是从 OBJECT_VERSION 继承 CONNECTION_VERSION 并将 PARENT_ID/CHILD_ID 放在那里，使用识别关系来确保[正确建模菱形依赖关系](https://stackoverflow.com/a/12350763/533120)。如果您需要跟踪移动历史，这可能很有用。

当然，这些只是粗略的笔触，我希望你能找到自己的方式......

# android - Android 4.0+平板关键词？

> ID：12979783
> 
> 赞同：1
> 
> 时间：2012-10-19T17:54:08.477
> 
> 标签：android

我听说 Android 开发人员可以使用一个关键字或方法来确定 Android 4.0+ 是否在平板电脑上运行（无需进行任何笨拙的屏幕尺寸比较）。我找不到它。

那么，这是真的吗？如果是这样，它是什么？

编辑：我看到人们给我的答案不是我想要的。我已经知道如何使用 kludgy 屏幕尺寸方法和使用 OS 方法来确定设备是平板电脑还是手机。我正在寻找一种从 API 级别 14 开始可用的方法，它会告诉我相同的信息——希望如此。我找不到它，所以我想知道它是否存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:58:32.467

平板电脑基本上只是意味着一个大（呃）屏幕，所以归根结底。有一种简单的方法可以查看它是否是平板电脑大小的屏幕：

```
if ( getResources().getConfiguration().isLayoutSizeAtLeast( Configuration.SCREENLAYOUT_SIZE_XLARGE ) )
{
    //Is a tablet.
} 
```

如果您也想捕捉较小的，您可以更改`Configuration.SCREENLAYOUT_SIZE_XLARGE`为。`Configuration.SCREENLAYOUT_SIZE_LARGE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:00:47.490

如 android 文档中所述，手机运行的 SDK 级别（整数）可用于：

android.os.Build.VERSION.SDK_INT；

这个 int 对应的枚举在 android.os.Build.VERSION_CODES 类中。

代码示例：

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
if (currentapiVersion >= android.os.Build.VERSION_CODES.FROYO){
    // Do something for froyo and above versions
} else{
    // do something for phones running an SDK before froyo
} 
```

编辑：此 SDK_INT 自 Donut (android 1.6 / API4) 起可用，因此请确保您的应用程序在使用时与 Cupcake (android 1.5 / API3) 不兼容，否则您的应用程序将崩溃（感谢程序员 Bruce 的精确度） .

[关联](https://stackoverflow.com/questions/3423754/retrieving-android-api-version-programmatically)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T18:01:11.590

Android 4+ 有[配置对象](http://developer.android.com/reference/android/content/res/Configuration.html)。您可以使用“isLayoutSizeAtLeast(int size)”方法进行检查。它不像我见过的其他一些例子那么笨拙。

# ruby-on-rails - 设计不在 Rails 3.2.8 中进行身份验证或没有 account_id 字段

> ID：12979784
> 
> 赞同：1
> 
> 时间：2012-10-19T17:54:12.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

登录后，用户被重定向到受 authenticate_user 保护的控制器！：

```
before_filter :authenticate_user! 
```

在 Rails 3.2.8 中，这不会进行身份验证并返回“已完成 401 未授权”。

但是，它适用于 Rails 3.2.7，但前提是我将 account_id 添加到表单 (HAML)

```
= f.hidden_field :account_id, :value => @account.id 
```

添加该隐藏字段后，我在日志中看到此查询：

```
User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'email@gmail.com' AND "users"."account_id" = 41 LIMIT 1 
```

但是，当我删除 account_id 隐藏字段时，不会执行对用户的查询，并且日志显示相同的“已完成 401 未授权”消息。

它在 Rails 3.2.8 中不起作用，无论有无 account_id。

我正在使用最新的设计 (2.1.2)

这个问题困扰了我很长时间，所以非常感谢任何帮助。

编辑：

我的 routes.rb 中有这个：

```
devise_for :users, :controllers => { :passwords => "passwords", :sessions => "sessions", :omniauth_callbacks => "users/omniauth_callbacks" } 
```

和我的初始化程序/devise.rb：

```
Devise.setup do |config|
  # ==> Mailer Configuration
  # Configure the e-mail address which will be shown in DeviseMailer.
  config.mailer_sender = "info@mydomain.com"

  # Configure the class responsible to send e-mails.
  # config.mailer = "Devise::Mailer"

  # ==> ORM configuration
  # Load and configure the ORM. Supports :active_record (default) and
  # :mongoid (bson_ext recommended) by default. Other ORMs may be
  # available as additional gems.
  require 'devise/orm/active_record'

  # omniauth stuff
  require "omniauth-facebook"
  require 'openid/store/filesystem'
  config.omniauth :facebook, "#key", "#secret"
  config.omniauth :open_id, :store => OpenID::Store::Filesystem.new('/tmp'), :name => 'google', :identifier => 'https://www.google.com/accounts/o8/id', :require => 'omniauth-openid'

  # ==> Configuration for any authentication mechanism
  # Configure which keys are used when authenticating a user. The default is
  # just :email. You can configure it to use [:username, :subdomain], so for
  # authenticating a user, both parameters are required. Remember that those
  # parameters are used only when authenticating and not when retrieving from
  # session. If you need permissions, you should implement that in a before filter.
  # You can also supply a hash where the value is a boolean determining whether
  # or not authentication should be aborted when the value is not present.
  config.authentication_keys = [ :email, :account_id ]

  # Configure which authentication keys should be case-insensitive.
  # These keys will be downcased upon creating or modifying a user and when used
  # to authenticate or find a user. Default is :email.
  config.case_insensitive_keys = [ :email ]

  # Configure which authentication keys should have whitespace stripped.
  # These keys will have whitespace before and after removed upon creating or
  # modifying a user and when used to authenticate or find a user. Default is :email.
  config.strip_whitespace_keys = [ :email ]
  config.stretches = 10

  config.reset_password_within = 2.hours
  config.navigational_formats = [:"*/*", "*/*", :html, :mobile]

  config.sign_out_via = :delete

end 
```

# php - Drupal $_SESSION 写入问题

> ID：12979785
> 
> 赞同：0
> 
> 时间：2012-10-19T17:54:19.357
> 
> 标签：php, session, drupal

我正在尝试使用外部文件来编写 Drupal 模块可访问的会话变量。

外部脚本如下所示：

```
define(DRUPAL_ROOT, getcwd());
include_once './includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);

session_start();

if(!isset($_SESSION['login']))
    $_SESSION['login'] = 'admin'; 
```

我还检查了这个脚本，看看它可以看到哪些 Drupal 变量，它可以看到 $_SESSION['messages']。然而，Drupal 只看到 $_SESSION['messages'] 而不是 $_SESSION['login']。我也试过这个：

```
$_SESSION['login'] = array('username' => 'admin'); 
```

我的模块尝试像这样访问这个变量：

```
if(!isset($_SESSION))
    session_start();
if($username = trim($_SESSION['login']))
    ... 
```

我得到的错误是索引“登录”未定义。有什么建议么？

# apache - 使用假想域访问本地 apache 服务器

> ID：12979787
> 
> 赞同：0
> 
> 时间：2012-10-19T17:54:22.193
> 
> 标签：apache, networking, dns, webserver, lan

实际上，我对服务器端的东西（除了一些 PHP）知之甚少，但我正在努力熟悉它，所以问题就在这里：

我刚刚下载了 Apache HTTP Server，它就像一个魅力。我什至在本地网络上尝试过，它仍然可以工作，但是当我需要访问文件时，我需要输入本地 IP 地址，如“192.168.1.33”，但我需要通过不存在的域名访问它网。整个网络是孤立的，没有连接到互联网。有什么办法吗？

例如，是否可以使用“myname.com”或“myname.local”等域访问我的服务器；

我试图在谷歌和这里都找到解决这个问题的方法，但是没有运气，但这可能是由于我缺乏知识，所以如果我问一些非常简单或愚蠢的问题，如果有的话，我会提前道歉一个可以帮助我的资源，我真的很感激给我指示；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:08:57.937

按照以下步骤通过 windows 在 apache 上配置自定义域：

打开记事本（以管理员身份）：c:\windows\System32\drivers\etc\hosts

在底部添加一行：

```
127.0.0.1     yourfakedomain.local 
```

然后，打开你的 apache 配置：/bin/apache/Apache/conf/httpd.conf

将这些行添加到底部：

```
<VirtualHost *:80>
  ServerName yourfakedomain.local
  ServerAlias www.yourfakedomain.local
  DocumentRoot "c:\path\to\your\code"
  DirectoryIndex index.php
</VirtualHost> 
```

注意：如果您将 apache 配置设置为在 httpd.conf 中读取，您也可以将 apache 配置放在 /bin/apache/conf/extra/httpd-vhosts.conf 文件中。

然后，优雅地重启 apache：

在命令提示符下：service httpd graceful

..或从您的 GUI 重新启动服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:27:22.967

解决方案是拥有自己的 dns 服务器来解决所有 .local dns 请求，以及指向该 dns 服务器的所有本地计算机。但是，您有更简单的解决方法，例如罗伯特的答案。

~~可能你也可以~~如果你有互联网访问权限，你可以使用指向私人地址的公共域托管，因为其他灵魂只适用于本地网络中的计算机。例如在 www.dot.tk 中创建：yourname.tk 指向您的本地地址：192.168.1.33。

# c++ - LZ4压缩64位的源代码兼容吗？

> ID：12979791
> 
> 赞同：5
> 
> 时间：2012-10-19T17:54:41.997
> 
> 标签：c++, compression, 64-bit

我刚刚下载了 LZ4-HC 压缩源并检查了它的 64 位兼容性。

我很少收到警告“从 '__int64' 转换为 'unsigned int'，可能丢失数据”

当我继续挖掘时，我注意到宏 ADD_HASH(p)。该宏的最后一部分是

```
HashTable[HASH_VALUE(p)] = (p) - base;

p - const BYTE*
base - const BYTE* const for 64-bit.   (const int b - for 32-bit)
HTYPE HashTable[];
HTYPE is U32 for 64-bit platform       (const BYTE* - for 32-bit) 
```

在 32 位上发生了什么——我们从指针中减去 const int 并存储到另一个指针中——足够安全。

现在 64：在我看来，在 64 上减去两个指针并将它们保存到 U32 根本不安全！

我的理解是，只有在保证“p”和“base”相距不远的情况下，LZ4 才兼容 64 位……现在我必须更深入地研究逻辑来检查这一点。

我错过了什么吗？有没有人检查这个库是否像它声称的那样完全兼容 64 位？图书馆代码的任何其他已知问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:17:04.190

LZ4 应该是 64 位兼容的。它已经被测试过无数次了。

LZ4-HC 有点复杂，可能还有一些编译器警告。随时在问题列表中通知他们：[http ://code.google.com/p/lz4/issues/list](http://code.google.com/p/lz4/issues/list)

2 个指针的减法应该是 size_t 类型。size_t 在 64 位 CPU 上是 64 位。因此，将结果转换为 32 位可能会产生溢出问题。

然而这不太可能。LZ4 适用于 64 KB 窗口。这意味着，任何超过 64KB 的引用都将被忽略。要使一个非常长的范围参考成为问题，它需要正好是 4GB + 几 KB。此外，由于列出了引用，因此必须在 < 64KB 和 > 4GB 之间使用相同的散列绝对零引用。这也是极不可能的。

即使这样，如果可以故意伪造这种情况，最终效果是压缩机将被“提示”到不匹配的位置。并将在比较操作中丢弃它。

所以唯一的缺点是在无用的比较中丢失几个 CPU 周期的风险。很公平。

尽管如此，当它“几乎免费”时，最好删除“编译器警告”。几乎免费被翻译成：没有性能损失，并且对代码复杂性的影响可以忽略不计。

# html - html - 如何在表格的 td 标记的背景颜色之上制作表格标记的背景图像？

> ID：12979793
> 
> 赞同：0
> 
> 时间：2012-10-19T17:54:44.300
> 
> 标签：html, css

我有这个代码：

```
 <table style="background-image:url('Images/thermometer.png');">
        <tr>
            <td width="299px" height="789px" style="background-color:#cc0000">
            </td>
        </tr>
    </table> 
```

但是背景颜色出现在背景图像的顶部。我怎样才能扭转这种局面？

谢谢。另请注意，我不能使用 html5 或 css3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:24:00.520

如果可以进行绝对定位，您可以在表格顶部使用图像的绝对定位。

```
<div style="position:relative;">
    <table style="position:absolute; left: 10px; top: 10px;">
        <tr>
            <td></td>
        </tr>
    </table>
    <img src="#.png" alt="" style="position:absolute; left: 10px; top: 10px;" />
</div> 
```

如果您需要图像随页面宽度一起拉伸，请将宽度设为 %。这样，您可以像这样分配父 div 的样式：

```
<div style="width: 50%;left: 25%; top: 10px;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:58:17.843

您可以将背景颜色放在表格父元素上

# php - 在 VB.Net 中使用 PHP Web 服务

> ID：12979795
> 
> 赞同：-2
> 
> 时间：2012-10-19T17:54:53.000
> 
> 标签：php, asp.net, vb.net, web-services

这是我从客户那里收到的关于他们如何从 PHP 访问 Web 服务的代码。我需要做同样的事情，但来自 VB.Net。没有可用的 WSDL，这是我从他们那里得到的所有代码。这甚至可能吗？

$Client = new SoapClient(NULL, array('location' => 'http://ipaddress/onyx/api/soap_api.php', 'uri' => 'not-used'));

print_r($Client->qty_available('124044'));

/* 输出：数组（[01] => 数组（[可用] => 333 [名称] => 联盟）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:20:42.997

如果返回的数据是自定义格式（我从问题中猜测），那么默认的 Web 服务内容可能无法在 .Net 中工作，您必须手动从请求中获取数据并根据它进行解析服务返回什么。如果它在标准 XML 中，您可能必须获取一次原始数据才能自己创建 WSDL。

这是我们用来测试我们的 .Net Web 服务之一的控制台应用程序的一些代码。基本上它发出请求并返回原始数据。您可以运行一次以获取返回的数据，然后编写代码来解析数据。我用您问题中的价值观替换了我们的价值观。

```
Module Module1

Sub Main()

    Dim x = System.Net.HttpWebRequest.Create("http://ipaddress/onyx/api/soap_api.php")

    x.Method = "POST"

    Dim MemStream As New System.IO.MemoryStream

    Dim ReqData As New IO.StreamWriter(MemStream, System.Text.Encoding.UTF8)
    ReqData.Write(My.Resources.Test2)
    ReqData.Flush()

    x.ContentLength = MemStream.Length
    x.ContentType = "text/xml; charset=utf-8"
    x.Headers.Add("SOAPAction", "not-used")

    Dim WebReq = x.GetRequestStream
    WebReq.Write(MemStream.GetBuffer, 0, MemStream.Length)
    WebReq.Flush()
    WebReq.Close()

    Dim Res As System.Net.HttpWebResponse = x.GetResponse

    If Res.StatusCode = Net.HttpStatusCode.OK Then
        Dim SR = New IO.StreamReader(Res.GetResponseStream)
        Console.WriteLine(SR.ReadToEnd)
    Else
        Console.WriteLine(Res.StatusCode & ", " & Res.StatusDescription)
    End If

    Console.ReadLine()

End Sub

End Module 
```

`My.Resources.Test2' 是我们使用的预先格式化的请求数据。这是您的情况的一个可能示例，它可能不正确。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
    <qty_available>
         124044
    </qty_available>
</soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:48:23.357

可能有 50 种不同的方法来解决这个问题，但如果您无法从客户那里获得一些基本文档，它们都涉及开发某种元数据。下面的链接有帮助吗？

[http://framework.zend.com/manual/1.12/en/zend.soap.autodiscovery.html](http://framework.zend.com/manual/1.12/en/zend.soap.autodiscovery.html)

# validation - 如何使用您的 RDF 模式验证 RDF

> ID：12979797
> 
> 赞同：4
> 
> 时间：2012-10-19T17:55:06.330
> 
> 标签：validation, rdf, jena, rdfs

我正在使用 Jena 框架来操作 RDF 文件，但我找不到使用您各自的 RDFSchema 验证 RDF 的方法。我正在尝试以下方法：

```
Model mod1 = new ModelMem();
Model modSchema = new ModelMem();
String baseURI = "http://iec.ch/TC57/2007/network";

String rdfPath = "file:D:\\modelo.rdf";
InputStream model = FileManager.get().open(rdfPath);

String rdfPathSchema = "file:D:\\Schema.rdf";
InputStream modelSchema = FileManager.get().open(rdfPathSchema);

mod1.read(model, baseURI, "RDF/XML-ABBREV");
modSchema.read(modelSchema,baseURI,  "RDF/XML-ABBREV");
InfModel infmodel = ModelFactory.createRDFSModel(mod1, modSchema);
ValidityReport validity = infmodel.validate();
return validity.isValid(); 
```

但它总是返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:01:40.477

您确定它并不总是仅仅因为您尝试过的所有输入都是有效的而返回 true 吗？您是否尝试过创建相对于架构明确无效的输入并对其进行测试？

不管 RDF Schema 不是 XML Schema 那样的严格模式，您可能想看看[Jena Eyeball](http://jena.apache.org/documentation/tools/eyeball-getting-started.html)，它是另一个基于 Jena 的用于检查 RDF 的工具，但不确定它是否能满足您的要求。

如果您仍有问题，请尝试在 Jena 邮件列表中询问 - users@jena.apache.org

### 编辑

请注意，仅当您以与架构不一致的方式使用某些内容时，验证才会返回 false。创建您可能认为无效的数据的拼写错误和其他用户错误可能仍然与 RDF 模式完全一致。

例如，假设您有一个简单的 RDF 模式，如下所示：

```
:ValidType a rdfs:Class .

:property a rdf:Property ;
          rdfs:domain :ValidType . 
```

所以这个模式表明你有一个类和一个具有该类域的属性。

然后，用户打错字并在他们的数据中包含以下内容：

```
:subj a :InvalidType . 
```

这本身并不矛盾，因为 RDF 有一个开放世界假设。声明某事物的类型未包含在您的 RDF 模式中不会导致验证失败，从验证的角度来看，这只是虚假信息。

但是，如果用户随后声明`:subj`使用了您定义的属性，如下所示：

```
:subj a :InvalidType ;
      :property "value" . 
```

现在验证应该返回 false，因为数据将与架构不一致，您声明`:property`唯一的域`:ValidType`但它与类型的资源一起使用，`:InvalidType`因此这是不一致的并且验证应该失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T00:17:43.373

严格来说，不是通过 Jena 或通过 RDFS 的解决方案，但有关[Pellet 的 ICV 功能](http://clarkparsia.com/pellet/icv/)的信息（移植到 Stardog，[在此处](http://stardog.com/docs/sdp/)描述）可能有用。但正如 Rob 所说，这真的归结为开放与封闭世界的事情，这让它有点棘手。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:19:42.650

我找到了使用 RDF Schema 验证 RDF 的解决方案。存在一个名为 CIMValidation 的工具。我们可以在应用程序 java 中使用它，只需将 .jar 添加到构建路径并使用 RDFSValidator 类。谢谢大家的回答。

# sql-server-2008 - 奇怪的 SQL Server 比较总是错误的

> ID：12979798
> 
> 赞同：2
> 
> 时间：2012-10-19T17:55:06.543
> 
> 标签：sql-server-2008, tsql

```
declare @test int
declare @test2 int = 3

select case when @test != @test2 then 1 else 0 end
select case when @test = @test2 then 1 else 0 end 
```

结果总是0。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:56:21.803

你还没有为它设置一个值`@test`，它就是`NULL`.

`@test`永远不会等于或不等于`@test2`，因为任何比较`NULL`都是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T18:16:21.710

此行为由 ANSI_NULLS 设置选项控制。事实上，如果你 SET ANSI_NULLS OFF 你会得到一个 1 的第一个选择。

NULL 是一个特殊值，它是一个未知值。您可以像这样阅读您的查询：

选择一个值，当未知值不等于 3 选择一个值，当未知值等于 3

由于该值是未知的，它可能匹配也可能不匹配，因此您不能假设它不相等，因为它们可能相等。由于您比较了一个未知值，因此就像您比较所有可能的值一样，并且由于有一个可能的值使其无效，因此该语句是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:57:54.427

如果我在声明没有默认值的变量时没有弄错，则分配的值为空。因此，在您的两个 SELECT CASE 语句中，您将 null 与实际值进行比较，并且比较将不起作用。

# jquery - 使用 jQuery 和 p+t 矩阵在表达式引擎中动态加载图像

> ID：12979799
> 
> 赞同：2
> 
> 时间：2012-10-19T17:55:06.157
> 
> 标签：jquery, expressionengine

我试图弄清楚每次单击按钮时如何使用 jquery 在矩阵字段中动态加载幻灯片。

我有这个矩阵字段，其中可以包含任意数量的图像。有少量但可变的条目（大约 5 个），每个条目在其矩阵字段中都有不同的幻灯片内容。

一种选择是我可以创建一个单独的模板，它只输出矩阵字段，然后通过 .load 的 id 选择性地拉入 <li>

$('#result').load('ajax/test.html #container');

但是这个模板只适用于最近的条目，并且会给其他人错误的幻灯片。

我想到的另一种方法是使用 jquery 动态更新矩阵参数。但是，我似乎无法在 js 中编写 EE 标签，然后对其进行解析：

$('ul#slides').html("{project_images limit='2' offset='0'}{/project_images}");

这只是呈现静态 html。

我觉得也许有一些方法可以做到这一点，也许使用我不知道的（javascript模板？）。

我最好的线索是来自 Brandon kelly 的简短帖子：[https ://getsatisfaction.com/pixelandtonic/topics/method_to_limit_matrix_results_for_slideshow](https://getsatisfaction.com/pixelandtonic/topics/method_to_limit_matrix_results_for_slideshow)

但我不确定下一步该怎么做...

有没有人对如何做到这一点有想法？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T18:34:28.133

上面的评论很重要；确保您的`{project_images}{/project_images}`标签对中确实有东西。

还要检查你的配置——在**Admin -> Security -> Output and Debugging**下，或者如果你喜欢使用基于文件的配置，或者在你的配置文件中——并确保将`Debugging`其设置为`1`（仅向超级管理员显示错误消息），**不要**（`0`永远不要显示错误消息）。设置为 0 会导致 Javascript 中的 EE 标记出现奇怪的问题，并且一直存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T20:04:22.270

您计划使用 jQuery .load() 加载其他内容，将其他矩阵内容加载为 html 片段将起作用。

为了确保为正确的条目加载矩阵数据，您可以将 entry_id 作为 url 段传递。

所以：

创建一个名为“ajax.group”的模板组并添加一个名为“matrix.html”的模板（这些名称是任意的）。然后，当您加载矩阵数据时，您会这样做

```
$('#result').load('/ajax/matrix/{entry_id} #container'); 
```

确保将此 jQuery 放在模板中的某个位置，其中 {entry_id} 将被解析并提供当前查看的条目 id。或者，您可以使用 url_title 或包含 entry_id 或 url_title 的基于段的变量。

然后，在 ajax/matrix 模板中，你会做类似的事情

```
<div id="container">
{exp:channel:entries channel="channel_name_here" entry_id="{segment_3}"}
    {matrix_custom_field_name offset="1"}
        {matrix_column_short_name_here}
    {/matrix_custom_field_name}
{/exp:channel:entries}  
</div> 
```

# xml - 以 XML 格式解析网站 RSS 提要

> ID：12979812
> 
> 赞同：0
> 
> 时间：2012-10-19T17:56:20.557
> 
> 标签：xml, parsing, hyperlink, feed

我有一个类似 www.google.com/feed 的链接，我想用 XML 解析这个链接，以获得 www.mywebsite.com/feed.xml

我该怎么做 ？我是 XML 世界的新手，所以如果有人可以给我一个解释该方法的链接......谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:50:57.803

例如`XDocument.Load("http://www.mywebsite.com/feed.xml");`在 C# 中

# java - html的java美化器

> ID：12979816
> 
> 赞同：0
> 
> 时间：2012-10-19T17:56:24.740
> 
> 标签：java, html

我正在寻找可以用来美化 html 的 Java 代码的东西。有些网站内置了它们。我希望它交替背景颜色，有一个下载源选项，并为 java 格式化。我希望这是一个 css 类或 iframe 格式。 *编辑* 我想在 blogspot.com 上使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T18:00:10.640

您可以查看[http://code.google.com/p/google-code-prettify/](http://code.google.com/p/google-code-prettify/) .. 我认为这是 stackoverflow 用于语法突出显示的内容。

如果这不适合您的喜好，有很多选择：

[http://alexgorbatchev.com/SyntaxHighlighter/](http://alexgorbatchev.com/SyntaxHighlighter/)

[http://craig.is/making/rainbows/](http://craig.is/making/rainbows/)

[http://code.google.com/p/jquery-chili-js/](http://code.google.com/p/jquery-chili-js/)

和其他我确定，只需搜索 javascript syntax highlighter

# javascript - JavaScript 数组的问题

> ID：12979820
> 
> 赞同：-3
> 
> 时间：2012-10-19T17:56:31.353
> 
> 标签：javascript, json

您能否看一下以下代码并告诉我为什么我无法运行该程序？

```
enter code here
 $(document).ready(function()
  {
  var comp=new Array("AAPL","MSFT","XRTX&");
  var t = setInterval(function(){getPrice();},200);});
  function getPrice() {
    for (var i=0;i<comp.length;i++){
    $.getJSON('https://finance.google.com/finance/info?client=ig&q='+comp[i]+'&callback=?', function(response){
  var stockInfo = response[0];
  var stockString = '<div id="stockprice">';
   stockString += 'Candente Copper: DNT $'+''+stockInfo.l+'';
   stockString += '</div>';
   $('#stockprice').replaceWith(stockString);
   $("#stockprice:contains('-')").addClass('red'); 
   $("#stockprice:contains('+')").addClass('green');
   }      
   });
   }​ 
```

我的 Array 对象或程序的其他部分有问题吗？请注意，代码可以在不调用数组元素的情况下正常工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:08:38.170

您`{`的 s, `}`s, `(`s 和`)`s 并不完全匹配。此外，为了让您的函数能够引用`comp`变量，它们必须都在相同的函数范围内，在这种情况下：`$(document).ready(function(){ ... });`. 你会注意到我也把你`setInterval`增加到了`2000`（2s）。

**[例子](http://jsfiddle.net/PqXCV/3/)**

```
$(document).ready(function()
{
   var comp = new Array("AAPL","MSFT","XRTX&");
   var t = setInterval(function(){getPrice();},2000);

    function getPrice() 
    {
       for (var i=0;i<comp.length;i++){
        $.getJSON('https://finance.google.com/finance/info?client=ig&q='+comp[i]+'&callback=?', function(response){
         var stockInfo = response[0];
         var stockString = '<div id="stockprice">';
         stockString += 'Candente Copper: DNT $'+''+stockInfo.l+'';
         stockString += '</div>';

         $('#stockprice').replaceWith(stockString);
         $("#stockprice:contains('-')").addClass('red');  
         $("#stockprice:contains('+')").addClass('green');
       });
      }
    }
});​ 
```

# python - 这个 python lxml 库有什么问题

> ID：12979827
> 
> 赞同：1
> 
> 时间：2012-10-19T17:57:02.280
> 
> 标签：python, lxml

我正在使用 xpath 读取一个 xml 文件，它返回 null 的问题。

**主要**的.py

```
#!/usr/bin/python
import sys
from util import xml_util

def main():

    try:
        xml = XMLReader('test.xml')
        x = xml.getitem('numbers/x')
    print x
        return 0
    except:
        return -1

if __name__ == '__main__':
    sys.exit(main()) 
```

xml_util.py

```
from lxml import etree

class XMLReader:
    "Parse file and read data using find(path)"
    def __init__(self,fname):
        self.tree = etree.parse(fname)
        self.root = self.tree.getroot()

    def getitem(self,path,converter=str):
        return converter(self.root.find(path).text)

    def getlist(self,path,converter=str):
        return [converter(item.text) for item in self.root.find(path)] 
```

测试.xml

```
<mystuff>
   <numbers>
        <x>3.14</x>
        <y>42</y>
        <z>11</z>
   </numbers>
</mystuff> 
```

XMLReader 类是从这篇文章[https://stackoverflow.com/questions/4357494/how-do-i-read-data-using-lxml-in-python](https://stackoverflow.com/questions/4357494/how-do-i-read-data-using-lxml-in-python)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:00:28.000

```
#!/usr/bin/python
import sys
from xml_util import XMLReader

def main():

    try:
        xml = XMLReader('test.xml')
        x = xml.getitem('numbers/x')
    print x
        return 0
    except:
        return -1

if __name__ == '__main__':
    sys.exit(main()) 
```

**编辑**

如果您仍然遇到问题并且您设置了一个模块`__init__.py`并尝试导入 xml_util 然后参考您的阅读器`xml_util.XMLReader`或将您的导入语句更改为`from util.xml_util import XMLReader`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:05:03.737

你的代码对我有用。我把它放在一个名为的文件中`main.py`：

```
#!/usr/bin/python
import sys
from lxml import etree

def main():

    try:
        xml = XMLReader('test.xml')
        x = xml.getitem('numbers/x')
        print x
        return 0
    except:
        return -1

class XMLReader:
    "Parse file and read data using find(path)"
    def __init__(self,fname):
        self.tree = etree.parse(fname)
        self.root = self.tree.getroot()

    def getitem(self,path,converter=str):
        return converter(self.root.find(path).text)

    def getlist(self,path,converter=str):
        return [converter(item.text) for item in self.root.find(path)] 
```

在与**相同**的目录中`main.py`，我添加`test.xml`了您提供的 XML。

壳：

```
$ ipython                                                                                                                          
Python 2.6.6 (r266:84292, Aug 28 2012, 10:55:56)                                                                                              

In [1]: from main import main                                                                                                                                           

In [2]: main()                                                                                                                                                            
3.14                                                                                                                                                                    
Out[2]: 0                                                                                                                                                               

In [3]: 
```

看起来您没有`test.xml`脚本在哪里寻找它。

正如其他人指出的那样，您在问题中提出的代码中存在缩进问题。粘贴代码后，我认为这是格式问题。我在其中添加了选项卡`print x`。

此外，可能是您`import`必须导入 XMLReader 的声明。尝试更改`from util import xml_util`为`from xml_util import XMLReader`.

# php - 带有 Xdebug 的 PHP 性能目标

> ID：12979830
> 
> 赞同：0
> 
> 时间：2012-10-19T17:57:11.187
> 
> 标签：php, performance, xdebug, profiler

我开始使用 Xdebug 和 WinCacheGrind 来更多地了解我编写的代码。

我目前正在测试一个使用 MySQL 存储为持久会话的购物车对象。

以下是对象在典型的“添加到购物车”操作中执行的步骤：

1.  构造一个填充有默认值的购物车会话
2.  使用 $_COOKIE['session_id'] AND $_SERVER['REMOTE_ADDR'] 在 MYSQL 中检查现有的购物车会话。如果是这样，mysql 行会填充购物车会话 *（12 毫秒）*
3.  在购物车中设置国家代码和州代码以进行进一步的运费计算。
4.  添加项目
5.  添加项目选项
6.  根据国家代码和州代码从 MYSQL 获取运输选项（常规、快递、次日）*（9.1 毫秒）*
7.  根据购物车中的商品重量计算每个选项的运费
8.  设置折扣*（0.1ms）*
9.  设置用户首选的运输选项，例如。常规的;
10.  在 MYSQL *(93ms)*中保存购物车会话，使用 php 函数序列化购物车内容。
11.  在 VIEW 中显示购物车值。

对 db 的唯一调用是在第 2、6、11 步。

当然会有额外的数据库调用来获取项目详细信息、项目选项和折扣代码。但是对于示例，我将其保持在最低限度。

对于这个 PHP 请求，XDebug 给出的结果是 **Cumulative Time : 130ms。**

不好吗？

我真正的问题是，请求应该以“毫秒”为单位有多快？我听说 YouTube 的目标是 200 毫秒 Total 但是，我不是谷歌，也没有从未来工程师那里回来的这支超超级天才激光智能 2055 团队......

谢谢您的帮助。

C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:22:02.843

不幸的是，XDebug 中的分析本身给 PHP 程序增加了显着的性能开销。

因此，您不应依赖 XDebug 为您的代码提供以毫秒为单位的绝对速度数字。（而且你在测试平台上的表现不太可能成为现实世界中不同硬件和不同用户数量的性能指标）

相反，您应该专注于使用分析器输出来向您显示程序的哪些部分花费的时间最多。这些是您的瓶颈——无论程序实际运行的速度有多快，某些部分将占用超过其公平份额的处理器时间，这些是您应该重点改进的方面。这就是 XDebug 的分析器旨在帮助您解决的问题。

至于分析 XDebug 的输出，我*强烈*建议放弃 WinCacheGrind 并下载[KCacheGrind](http://sourceforge.net/projects/precompiledbin/)。它是一个非常优秀的工具（主要是因为 WinCacheGrind 很久以前就停止了开发）。它具有一些出色的可视化工具，可以一目了然地了解您的代码的某些部分对整个系统的影响程度。

如果你真的需要知道你的绝对性能数据，你可以考虑从 XDebug 切换到 XHProf。XHProf 是 Facebook 为 PHP 编写的轻量级分析工具。它不像 XDebug 那样功能齐全（也没有成熟；直到最近才开始受到关注），但它更轻巧，并且在使用时对性能没有太大影响。我仍然会推荐 XDebug，因为它的功能要强大得多，但是这两种工具肯定都有它们的位置。

你可以在这里找到更多关于 XHProf 的信息：http: [//blog.cnizz.com/2012/05/05/enhanced-php-performance-profiling-with-xhprof/](http://blog.cnizz.com/2012/05/05/enhanced-php-performance-profiling-with-xhprof/)

# php - 实时实时通知 Jquery PHP

> ID：12979833
> 
> 赞同：1
> 
> 时间：2012-10-19T17:57:24.643
> 
> 标签：php, jquery, notifications, real-time

我试图实现一个实时通知，就像 facebook newsticker 和通知（在顶部）。我想知道存档这个的好解决方案是什么。我实现了一个聊天应用程序，在此之前我在特定时间触发了 AJAX GET 请求以存档实时，但它似乎并不好。我使用 firebug 检查了 facebook，没有触发 GET 请求（或者它被隐藏了？）

现在这是我的场景：

在 main.php 中，我有一个实时代码和一个通知按钮。

在bulletion.php 和User.php 当我执行添加用户时，它会转到公告或user.php。

当bulletin.php,user.php 在数据库中成功创建时，如何在main.php 中获得通知？

在我问之前，我也检查了这个问题。 [PHP/jQuery](https://stackoverflow.com/questions/8217628/notification-system-in-php-jquery) [Realtime 和 php 中的通知系统？](https://stackoverflow.com/questions/7115416/realtime-and-php)

我想知道，什么是长轮询 Ajax 和基于会话的通知。如何归档？我知道 Node.js 可以很好地实现实时，它可以与 PHP 结合吗？和内存缓存？

任何可以提供参考或示例的资源都可能很好。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T18:05:50.273

附带说明一下，在推送通知方面，PHP 并不是真正使用的最佳语言，它实际上是围绕典型的获取/响应流程构建的。

我对所有页面内容都使用 PHP，但是当涉及到任何类型的推送通知时，我真的很喜欢[http://www.nodejs.org/](http://www.nodejs.org/)和[http://socket.io/](http://socket.io/)来配合它。它们很容易设置，并且可以很好地配合您使用 php 完成大部分工作，然后使用 node 来处理推送通知之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:56:41.863

您是否考虑过使用 HTML5 WebSockets？查看[EventSockets和](https://www.eventsockets.com/)[Github](https://github.com/eventsockets/eventsockets-kickstart-php)上的 kickstart 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T18:01:16.177

我在[服务器发送事件](https://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events)标准方面取得了很大成功。它非常简单且运行良好，但仅在现代浏览器中受支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T18:01:41.543

[Meteor](http://meteorserver.org)是一个使用 PHP 和 JavaScript 将数据推送到浏览器的彗星服务器。它非常漂亮，值得一看，尽管设置/实现可能有点困难。

编辑：[快速演示在这里](http://meteorserver.org/examples/angst/)

# javascript - 显示选择的选项

> ID：12979836
> 
> 赞同：0
> 
> 时间：2012-10-19T17:57:46.780
> 
> 标签：javascript, html

我有一个下拉列表。用户选择语言后，将选择的语言发送到服务器。我想在选定的选项按钮上显示选定的值。

例如，用户选择了“de”，我希望在表单上显示“de”，而不是“en”。

我怎样才能做到这一点？谢谢

```
<form name="languages" method="post"> 
    <select name="langSelect" onchange=""> 
       <option>en (default)</option> 
       {% for ele in comments.languages.all %} 
           <option>{{ele.lang}}</option> 
       {% endfor %} 
    </select> 
    <div><a  onclick="submitform()">Submit</a></div> 
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:16:36.817

更好地使用 jQuery 来实现这一点，IE 可能有一些问题（一如既往）：[http ://www.impressivewebs.com/avoiding-problems-with-javascript-getelementbyid-method-in-internet-explorer-7/](http://www.impressivewebs.com/avoiding-problems-with-javascript-getelementbyid-method-in-internet-explorer-7/)

在 jQuery 中只需键入

```
$('[id=langSelect]').val(); 
```

获得价值和

```
val('myValue') 
```

设置它。所以你可以设置你的名字

```
$('[id=selectedOptionButton]').val($('[id=langSelect]').val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:01:24.060

选择框的值将包含选定的选项值。

```
var selectedValue = document.getElementById("langSelect").value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T18:13:32.583

首先，为什么您的按钮不是提交按钮？如果它提交您应该使用的表格`<input type="submit">Submit</input>`

如果你使用 jQuery，那么你可以说：

```
var selectedVal = $("#langSelect").val();
$("#languages submit").val(selectedVal); 
```

我会把它放在一个声明中，但为了清楚起见，我这样做了。

另一件事，您也应该使用 id 属性/而不仅仅是名称。

# java - 通过单击按钮同时显示图像和文本字符串

> ID：12979838
> 
> 赞同：0
> 
> 时间：2012-10-19T17:57:57.400
> 
> 标签：java, image, swing, jpanel, jlabel

> **可能重复：**
> [如何使用 Netbeans 中的图像路径在 JPanel 上显示图像](https://stackoverflow.com/questions/12964639/how-to-display-images-on-jpanels-using-image-paths-in-netbeans)

我准备了一个带有按钮和 Jpanels 的 GUI。当在 JFrame 中单击按钮时，需要发生 3 件事。两个大图像（由源包中的路径指定）必须出现在两个单独的 JPanel 上，而一小段文本（我将编写）则出现在一个空的 JLabel 中。问题是我不知道应该如何编写按钮处理代码。我也不知道是否需要实现一些初始化组件才能使其工作。这是一些示例代码：

```
package db.SuperMarioGFX;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JLabel;

/**
 *
 * @author speterson86
 */
public class EnemyGFX extends javax.swing.JFrame {

    /**
     * Creates new form EnemyGFX
     */
    public EnemyGFX() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     *
     * SuppressWarnings("unchecked"), followed by over 1000 lines of Generated
     * Code are below this, but not necessary to include in this code sample!
     */
    private void btnBeachKoopaActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
        /**
         * For 'Land[JPanel]' (Panel-container for a set of buttons, not for
         * displaying images)
         *
         * Note that "pbx" is short for "picture box". Unlike VB, I couldn't
         * find any so-called picture boxes when I was building my GUI in
         * Netbeans, so I hoped JPanels would be the next best thing to use for
         * displaying relatively large (roughly 400 x 400 pixels or less each)
         * images. Now, here's the 3 things I need to display on my EnemyGFX
         * JFrame when the btnBeachKoopa button is clicked on:
         *
         * Display "GFX01.png" in pbxDefaultBinFile[JPanel] 
         * Display "Yoshi'sIsland2.zst, Level #$106" text in lblSaveState[JLabel] 
         * Display "Land1.PNG" in pbxFixedBinFile[JPanel]
         *
         * So how would I go about making that happen?...
         */
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:01:50.250

如果这是我的项目，我会考虑

*   在程序启动时上传图像（如果不是太多图像，如果不是太大）并放入 ImageIcons。
*   在 JLabels 中显示已由 GUI 显示的 ImageIcon
*   在 JButton 的 ActionListener 代码中，通过`setIcon(...)`方法设置图像 JLabel 的 ImageIcon 和通过`setText(...)`.
*   事实上，如果图像和文本要彼此靠近并处于适当的方向，您实际上可以使用一个 JLabel 来保存图像和文本。
*   此外，您似乎正在使用代码生成器来生成 Swing 代码，例如 NetBeans 的 Matisse 拖放 GUI 创建器。由于您是 Swing 新手，因此我强烈建议您将其搁置一旁，先学习手动编写 Swing 代码，然后等您对 Swing 非常熟悉后，再使用您想要的代码生成器。这将在早期为您节省一个悲伤的世界。

如果您需要更具体的建议，那么正如我们之前建议的那样，请向我们展示您编写此代码的实际尝试（不是生成代码的框架——我们需要查看**您的**代码）以及您当前遇到的问题的详细描述代码尝试正在发生。

# php - php 文件到数组

> ID：12979840
> 
> 赞同：0
> 
> 时间：2012-10-19T17:58:02.290
> 
> 标签：php, arrays

我有一个包含一堆文本的文本文档，我想抓取“allVersions”中的每一行并将它们存储到一个数组中。

文本文件

```
bible.versions = {
// prebuild version array
versionData: null,

// versions by key
versionsByKey: {},

getVersion: function(key) {
    return this.versionsByKey[key];
},

allVersions: [
'ar_etr',
'ar_vady',
'el_tisch',
'en_kjv',
'en_wbtc',
'fr_s21',
'he_wlc'

],

loadingVersionIndex: -1,

loadingCallback: null,

loadNextVersion: function() { 
```

php

```
$myarray = file_get_contents('file.js'); 
```

结果数组

```
$myarray = array('ar_etr', 'ar_vady', 'el_tisch', 'en_kjv', 'en_wbtc', 'fr_s21', 'he_wlc'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:00:58.450

我认为您正在寻找 PHP 中的 File 函数。

[http://php.net/manual/en/function.file.php](http://php.net/manual/en/function.file.php)

此函数将整个文本文件读入一个数组，每个数组索引一行文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:05:45.520

如果您的文件应该是[json](http://en.wikipedia.org/wiki/JSON)，那么您可以使用[json_decode()](http://www.php.net/manual/en/function.json-decode.php)：

```
$myarray = json_decode(file_get_contents('file.js'), TRUE); 
```

的第二个参数`TRUE`创建`$myarray`一个数组而不是一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T18:00:49.327

```
$myarray = explode('\n', file_get_contents("filename.txt")); 
```

`file_get_contents()`返回包含文件的字符串，并`explode(<delimiter>, <string>)`根据分隔符将字符串拆分为数组。

但马特的回答更好：

```
file("filename.txt") 
```

# r - dcast 函数 (reshape2) 的问题 - 三变量组合

> ID：12979841
> 
> 赞同：1
> 
> 时间：2012-10-19T17:58:04.837
> 
> 标签：r, plyr, reshape2

我正在使用 reshape2 包来塑造我的数据并将其用于 t 检验。对我来说，在单独的列中可视化数据更容易。我有三种处理组合，其中“wat”嵌套在“spp”中，“ins”嵌套在水中。我的演示表包含 3 个响应变量，即“tyr”、“esc”和“esc_R”。我很想看看 ins 如何影响响​​应->“spp”中的“tyr”-> Bl，处理“wat”-> High（只是一个例子）。

这是我的数据： [demo.data](http://pastebin.com/sR2MvBBA)

```
## Use orderBy function to sort data
library(doBy)
demo <- orderBy(~spp+wat+ins, data = demo)
## Create an unique data frame for a specific variable
df.bl.ins.1 <- demo[demo$spp == "Bl", c(1:3, 4)]
df.bl.ins.2 <- df.bl.ins.1[df.bl.ins.1$wat == "High", ] 
```

然后我在执行 dcast 功能时遇到了麻烦。

```
df.bl.ins.tmp <- dcast(df.bl.ins.2, spp + wat ~ ins, value.var = "tyr") 
```

我在以下线程中发现了有趣的信息

1.  [Dason 的建议](https://stackoverflow.com/questions/12831524/can-dcast-be-used-without-an-aggregate-function)- 与 ToothGrowth 演示数据集配合得非常好。不幸的是，当表格有多个处理（超过 2 个）时，解决方案并不简单。我同意 Maiasaura 的建议，即创建唯一变量是解决此问题的关键。但是，我很难理解 function(x) 的作用或如何在我的表中使用它。

非常感谢这方面的任何帮助。

此外，如果您有其他建议可以在不操纵原始数据框（演示）的情况下进行 t-test，我会很高兴听到它。

提前致谢。

**编辑** 这是我所期待的，对于“tyr”。在以下格式中，我希望使用 t 检验比较“否”与“是”。

```
spp wat ins No  Yes
Bl  High    No  0.3036  0.1987
Bl  High    No  0.2577  0.1112
Bl  High    No  NA  0.199
Bl  High    No  0.3299  0.1886
Bl  High    No  0.3301  0.2332 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:46:33.970

Perhaps I don't understand exactly what you want to do, but I think you could run linear regression directly on your data. In this way, you could do t-tests on whether the coefficients of your model were zero or not. I think this might suffice, and serve also to tease apart the effects of each of your independent variables. Here is an example:

```
summary(lm(tyr~spp+wat+ins,data=read.table('http://pastebin.com/raw.php?i=sR2MvBBA')))
Coefficients:
             Estimate Std. Error t value Pr(>|t|)    
(Intercept)  0.286386   0.016500  17.356  < 2e-16 ***
sppMan      -0.159514   0.015811 -10.089  1.3e-11 ***
watLow      -0.005501   0.015858  -0.347 0.730861    
insYes      -0.066741   0.015858  -4.209 0.000185 *** 
```

* * *

This will get you a t test for just the groups that you showed in your example:

```
t.test(tyr~ins,data=df[df$spp=='Bl' & df$wat=='High',]) 
```

# ruby-on-rails - Rails 3.1，尝试链接到公共目录中的 XLS 文档时，没有路由匹配 [GET]“/”

> ID：12979844
> 
> 赞同：0
> 
> 时间：2012-10-19T17:58:10.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我在 PUBLIC 目录中使用带有 XLS 文档的 link_to 助手。

我最近将我的 rails APP 从版本 3.0.10 迁移到版本 3.1.8

自迁移以来，当我使用 link_to 帮助程序引用我的 XLS 文档时，我遇到了问题。

我收到以下错误： **Started GET "/public/IMCClients.xls" for 127.0.0.1 at 2012-10-19 13:11:35 -0400 ActionController::RoutingError (No route matches [GET] "/public/IMCClients. xls"):**

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:01:20.617

看看这是否有效`<% link_to "Link Name", root_path+"/IMCClients.xls" %>`

# php - 警告：PHP 中的 mysqli_connect。这是一个严肃的笔记吗？

> ID：12979846
> 
> 赞同：0
> 
> 时间：2012-10-19T17:58:25.820
> 
> 标签：php

```
Warning: mysqli_connect(): (HY000/2002): No connection could be made because the target     machine actively refused it. in E:\xampp\htdocs\ss\docs\regional.php on line 15
The connection to the database could not be established. 
```

这是一个严重的错误还是很容易被忽略？错误消息`'The connection to the database could not be established.'`是`expected to pop`但是`not the warning text`。在这种情况下如何删除它。下面是我使用的代码。

```
$db = mysqli_connect('localhost', 'root', '', 'regional_data');
if(mysqli_connect_errno()) {die('The connection to the database could not be established.');} 
```

编辑：我已经在开发区域停止了 SQL 来测试这个并且当时出现了消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:07:52.663

在您的开发环境中，打开 display_errors 的设置是完全合法的。这是查看事情是否出错的最简单方法。

在生产环境中，您不会将其设置为 on，因为用户通常不需要知道 PHP 是否出错 - 他甚至不应该知道，因为这些消息可能包含对攻击者有价值的信息。那只能通过专用的错误消息来传达，例如在您的内部`die()`

因此，如果您禁用 display_errors，输出中的警告将消失，但您确实希望在日志文件中包含此警告。不建议使用 an 来抑制警告`@`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:05:30.867

由于您拥有`error_reporting`和`display_errors`设置的方式，可能只会在您的开发环境中显示警告。

[错误报告](http://php.net/manual/en/function.error-reporting.php)

[ini_set('display_errors', 0)](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)

**编辑：**澄清一下，如果您的 error_reporting 级别在您的开发环境中包含警告，它们可以包含在显示到屏幕的错误中。要进行测试，请设置`displays_errors`为 0，如上所述，在 mysqli 连接之前。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T18:04:27.377

您可以通过调用以 开头的函数来抑制警告`@`，但最好确保修复错误的来源。

例如`$db = @mysqli_connect(...)`

# php - 当我添加评论时，我收到此警告

> ID：12979847
> 
> 赞同：0
> 
> 时间：2012-10-19T17:58:25.933
> 
> 标签：php, mysql, comments

大家好，我对这段代码有疑问

当 id 在数据库中添加评论和评论插入时，当我在同一页面上进行刷新时，我收到此警告：其中一个字段仍然为空，我认为第一个代码中的问题

```
 <?php 

    if ($_POST['add'] and $_POST['add']=='comm'){

    $comm_name      =strip_tags($_POST['comm_name']);
    $comm_country   =strip_tags(mysql_real_escape_string($_POST['comm_country']));
    $c              =strip_tags(mysql_real_escape_string($_POST['comm']));
    $comm_thread    =strip_tags(mysql_real_escape_string($_POST['comm_thread']));
    $status =$_POST['status'];
    $getidtopic=$_GET['id_topic'];
    $post_code=$_POST['post_code'];

    if ($comm_name=='' or $comm_country=='' or $c=='' or $post_code=='' ){
    echo "<script>alert(\"One of the fields are still empty
\");</script>";
    }else if ($_POST['post_code']==$_SESSION['code']) {

    $insertcomm=mysql_query("insert into comments values('','$comm_name','$comm_country','$comm','$comm_thread','$status') ")or die (mysql_error);
    echo "<script>alert(\"your comment has been adding\");</script>";

    }
    }

    ?> 
```

**这是评论的形式**

```
 <form action='' method='post' >
    <table  class='rightcol'  width='100%' cellpadding='0' cellspacing='5'>

    <tr>
    <td colspan='3' id='addcomm'>add comm</td>

    </tr>

    <tr>

    <td width='15%' ><div id='title_comm' value=''>name : </div></td>
    <td  ><input type='text' name='comm_name' value='<?if (!$insertcomm){
    echo $comm_name;
    }?>'/></td>
    </tr>

    <tr>
    <td width='15%' ><div id='title_comm'>country  </div></td>
    <td ><input type='text' name='comm_country' 
    value='<?if (!$insertcomm){echo $comm_country;}?>'/>
    </td>
    </tr>

    <tr>
    <td valign='top' width='15%'><div id='title_comm'>comment : </div></td>
    <td width='50%'>
    <textarea  cols='55' rows='12' name='comm'>
    <?if (!$insertcomm){echo $c;}?>
    </textarea></td>
    <td valign='top' ><div id='note_comm'>
  your comment will not insert if you try to use some thing bad
    </div></td>
    </tr>

    <tr>
    <td width='15%' ><div id='title_comm'><span style='color:red'>code : <br/>write these codes </span></div></td>
    <td ><input type='text' name='post_code'/></td>
    </tr>

    <tr>
    <td ><div id='code'>
    <?php 
    $text=rand(400,80000);
    echo $_SESSION['code']=$text;
    ?>

    </div></td>
    </tr>

    <td colspan='4' ><input type='submit' name='addcomm' id='add' value='add comm'/></td>

    </table>
    <input type='hidden' name='comm_thread' value='<?php echo $getidtopic;?>' />
    <input type='hidden' name='add' value='comm'/>
    <input type='hidden' name='status' value='2'/>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:28:10.913

您需要向我们展示表定义，以便更好地找出问题所在。我的猜测是您的 SQL 语句没有正确准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:09:51.350

那是因为，当你刷新页面时，`$_POST`字段被重置，字段为空，所以当页面执行它的 PHP 行时`if ($comm_name=='' or $comm_country=='' or $c=='' or $post_code=='' or $post_code=='' ){`，它会发现它们是空的。

# jquery - couchdb 通过 Ajax 复制大型文档

> ID：12979848
> 
> 赞同：1
> 
> 时间：2012-10-19T17:58:27.833
> 
> 标签：jquery, couchdb, replication, couchapp

我正在开发一个可能添加了大型文档的 couchapp。例如，我正在测试一个 446MB 的视频。用户 A 可以请求与可能具有此类大文件的用户 B 进行复制。然后从 ajax 调用启动复制。

我有几个问题：

*   一般来说，我是否以正确的方式进行此操作？
*   应该超时 = connection_timeout 吗？
*   超时是否与需要同步的每个文档或整个复制有关？
*   connection_timeout 是否与需要同步的每个文档或整个复制相关？
*   retries_per_request 是否意味着我总共有 (connection_timeout X retries_per_request) 用于整个复制？如果超过超时怎么办？
*   如果我被整个复制的最大时间困住了，我如何允许复制许多大型文档？

这是我的代码：

```
 $.ajax({
            url: "/_replicate",
            timeout : 6000000,
            type: "POST",

            data: JSON.stringify({"source": repFrom, "target": secureHome, 
                "userCtx": {"name": homeUser, "roles":["_admin", homeUser]}, 
                "continuous":continuousRep,
                "connection_timeout": 6000000,
                "retries_per_request": 20,
                "http_connections": 30}),
            contentType:"application/json",
            error: function(){
                alert(libLang.noSyncOnline); 
                $.mobile.hidePageLoadingMsg();
            },
            success: function(message){
                if(message){
                    alert(libLang.synced);
                    $.mobile.hidePageLoadingMsg();
                };
            }
        }); 
```

# c# - C# 比较日期时间和当前日期时间

> ID：12979854
> 
> 赞同：-10
> 
> 时间：2012-10-19T17:58:39.993
> 
> 标签：c#, asp.net

如何检查我的申请日期时间（例如 2012 年 10 月 18 日下午 4:09:41）是否在 30 小时前创建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T18:00:35.143

只需减去两个日期

```
TimeSpan diff = date2.Subtract(date1);
       if(diff.Hours > 30)
{
//do action;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T18:02:50.463

2 个日期的差异返回 TimeSpan。TimeSpan 具有小时、分钟和秒的属性。您可以使用：

```
int hours = (date2-date1).Hours; 
```

它返回小时。您可以在任何情况下使用可变小时数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T18:01:15.503

DateTime.Now.AddHours(-30) == "application datetime" (你的变量名)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T18:02:21.027

您可以简单地减去`DateTime`s 得到 a `TimeSpan`，然后查看`.Days`属性：

```
var span = secondDate.Subtract(firstDate);
var days = span.Days; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T18:02:26.663

```
DateTime appDate = new DateTime(2012, 10, 18, 16, 9, 41);
TimeSpan diff = DateTime.Now.Subtract(appDate);
if(diff.Hours > 30)
{
    // Application older than 30 hours
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T18:03:20.213

尝试这个

```
DateTime d2 = Convert.ToDateTime('10/18/2012 4:09:41 PM');
double hrs = DateTime.Now.Subtract(d2).TotalHours; 
```

# ruby-on-rails - 将现有身份验证迁移到 has_secure_password

> ID：12979856
> 
> 赞同：0
> 
> 时间：2012-10-19T17:58:44.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的应用程序中，我有两个不同的用户帐户。旧帐户类型使用自定义构建的身份验证系统。较新的实现了 has_secure_password。现在我已准备好将旧帐户类型移至同一系统。在数据库中，该用户类型有一个 hashed_pa​​ssword 列。

我让它工作，以便创建新用户工作，他们可以在新系统上正常登录。问题是我需要现有用户能够将他们的密码从 hashed_pa​​ssword 迁移到 password_digest。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-04T10:38:50.690

这是可能的，但你必须玩弄一下。假设您在想要迁移之前使用 MD5 对密码进行哈希处理。确保在迁移之前进行了备份 :)`migrated_password`向数据库添加一个布尔列，默认为 true。在您的迁移中，`User.update_all(migrated_password: false)`对现有用户执行类似操作。

使用当前的 MD5 哈希作为`has_secure_password`函数的输入。根据 migrated_pa​​ssword 列的值，更改您的登录代码以处理两个路径。如果密码被迁移（或迁移后注册的用户），您可以直接使用 has_secure_password 。

如果不是，则在将密码输入`authenticate`方法之前使用 MD5 对密码进行哈希处理。如果登录成功，则使用参数中的输入密码更改该用户的密码，并将 migrated_pa​​ssword 列更新为 false（将这两个操作包装在事务中）。

一定时间后，您可以删除 migrated_pa​​ssword 列和迁移代码，并让用户在仍需要访问但未及时迁移的情况下使用您的密码重置功能。

# python - 检查pythonlist中的日期时间并转换为字符串

> ID：12979868
> 
> 赞同：1
> 
> 时间：2012-10-19T17:59:59.917
> 
> 标签：python

```
lista = [datetimeobject,'test',32] 
```

如果列表中的任何元素是日期时间对象，我需要转换为日期格式（即；`2012-01-01`）并环绕引号“'”即；`'2012-01-01'`

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T18:05:43.343

你可以使用`repr(str())`：

```
In [17]: x=datetime.date(2012,2,5)

In [18]: str(x)              # actually returns repr(str(x)) in interactive prompt
Out[18]: '2012-02-05'

In [22]: print str(x)        # doesn't adds ''
2012-02-05

In [23]: print repr(str(x))  # get '' around solution
'2012-02-05' 
```

对象`datetime.datetime`：

```
In [31]: str(y)
Out[31]: '2012-02-05 00:00:00'

In [32]: print repr(str(y)[:10])
'2012-02-05' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T18:06:11.850

```
from datetime import datetime

convert_date = lambda dt: dt.strftime("'%Y-%m-%d'") if isinstance(dt, datetime) else dt
lista = [datetime.now(), 'test', 32]
map(convert_date, lista) 
```

回报：

```
["'2012-10-19'", 'test', 32] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T18:05:23.073

```
import datetime
found_datetimes = []
DATE_FORMAT = "%Y-%m-%d"

for item in lista:
    if isinstance(item, datetime.datetime):
        found_datetimes.append(datetime.datetime.strftime(item, DATE_FORMAT))

print found_datetimes 
```

# gpu - OpenACC 红黑 Gauss-Seidel 比 CPU 慢

> ID：12979870
> 
> 赞同：5
> 
> 时间：2012-10-19T18:00:04.290
> 
> 标签：gpu, openacc

我为拉普拉斯方程（一个简单的热板问题）添加了 OpenACC 指令到我的红黑 Gauss-Seidel 求解器中，但是 GPU 加速的代码并不比 CPU 快，即使对于大问题也是如此。

我还编写了一个 CUDA 版本，这比两者都快得多（对于 512x512，大约 2 秒，而 CPU 和 OpenACC 为 25 秒）。

谁能想到造成这种差异的原因？我意识到 CUDA 提供了最有潜力的速度，但 OpenACC 应该比 CPU 提供更好的解决更大问题的东西（比如 Jacobi 求解器，用于解决[此处](http://developer.nvidia.com/cuda/openacc-example-part-1)演示的同类问题）。

这是相关代码（完整的工作源代码在[这里](http://cl.ly/code/2Q1U0h261V1O)）：

```
#pragma acc data copyin(aP[0:size], aW[0:size], aE[0:size], aS[0:size], aN[0:size], b[0:size]) copy(temp_red[0:size_temp], temp_black[0:size_temp])
// red-black Gauss-Seidel with SOR iteration loop
for (iter = 1; iter <= it_max; ++iter) {
  Real norm_L2 = 0.0;

  // update red cells
  #pragma omp parallel for shared(aP, aW, aE, aS, aN, temp_black, temp_red) \
      reduction(+:norm_L2)
  #pragma acc kernels present(aP[0:size], aW[0:size], aE[0:size], aS[0:size], aN[0:size], b[0:size], temp_red[0:size_temp], temp_black[0:size_temp])
  #pragma acc loop independent gang vector(4)
  for (int col = 1; col < NUM + 1; ++col) {
    #pragma acc loop independent gang vector(64)
    for (int row = 1; row < (NUM / 2) + 1; ++row) {

      int ind_red = col * ((NUM / 2) + 2) + row;        // local (red) index
      int ind = 2 * row - (col % 2) - 1 + NUM * (col - 1);  // global index

      #pragma acc cache(aP[ind], b[ind], aW[ind], aE[ind], aS[ind], aN[ind])

      Real res = b[ind] + (aW[ind] * temp_black[row + (col - 1) * ((NUM / 2) + 2)]
                         + aE[ind] * temp_black[row + (col + 1) * ((NUM / 2) + 2)]
                         + aS[ind] * temp_black[row - (col % 2) + col * ((NUM / 2) + 2)]
                         + aN[ind] * temp_black[row + ((col + 1) % 2) + col * ((NUM / 2) + 2)]);

      Real temp_old = temp_red[ind_red];
      temp_red[ind_red] = temp_old * (1.0 - omega) + omega * (res / aP[ind]);

      // calculate residual
      res = temp_red[ind_red] - temp_old;
      norm_L2 += (res * res);

    } // end for row
  } // end for col

  // update black cells
  #pragma omp parallel for shared(aP, aW, aE, aS, aN, temp_black, temp_red) \
          reduction(+:norm_L2)
  #pragma acc kernels present(aP[0:size], aW[0:size], aE[0:size], aS[0:size], aN[0:size], b[0:size], temp_red[0:size_temp], temp_black[0:size_temp])
  #pragma acc loop independent gang vector(4)
  for (int col = 1; col < NUM + 1; ++col) {
    #pragma acc loop independent gang vector(64)
    for (int row = 1; row < (NUM / 2) + 1; ++row) {

      int ind_black = col * ((NUM / 2) + 2) + row;      // local (black) index
      int ind = 2 * row - ((col + 1) % 2) - 1 + NUM * (col - 1);    // global index

      #pragma acc cache(aP[ind], b[ind], aW[ind], aE[ind], aS[ind], aN[ind])

      Real res = b[ind] + (aW[ind] * temp_red[row + (col - 1) * ((NUM / 2) + 2)]
                         + aE[ind] * temp_red[row + (col + 1) * ((NUM / 2) + 2)]
                         + aS[ind] * temp_red[row - ((col + 1) % 2) + col * ((NUM / 2) + 2)]
                         + aN[ind] * temp_red[row + (col % 2) + col * ((NUM / 2) + 2)]);

      Real temp_old = temp_black[ind_black];
      temp_black[ind_black] = temp_old * (1.0 - omega) + omega * (res / aP[ind]);

      // calculate residual
      res = temp_black[ind_black] - temp_old;       
      norm_L2 += (res * res);

    } // end for row
  } // end for col

  // calculate residual
  norm_L2 = sqrt(norm_L2 / ((Real)size));

  if(iter % 100 == 0) printf("%5d, %0.6f\n", iter, norm_L2);

  // if tolerance has been reached, end SOR iterations
  if (norm_L2 < tol) {
    break;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:04:59.250

好吧，我找到了一个半解决方案，可以显着减少较小问题的时间。

如果我插入以下行：

```
acc_init(acc_device_nvidia);
acc_set_device_num(0, acc_device_nvidia); 
```

在我开始计时器之前，为了激活和设置 GPU，512x512 问题的时间下降到 9.8 秒，1024x1024 下降到 42 秒。增加问题规模进一步表明，即使是 OpenACC 也可以与在四个 CPU 内核上运行相比有多快。

有了这个改变，OpenACC 代码比 CUDA 代码慢了大约 2 倍，随着问题规模越来越大，差距越来越接近一点点（~1.2）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:38:39.370

我下载了您的完整代码并编译并运行它！没有停止运行和指导

> if(iter % 100 == 0) printf("%5d, %0.6f\n", iter, norm_L2);

结果是：

> 100、楠
> 
> 200，楠
> 
> ……

***我将所有Real***类型 的变量更改为***float***类型 ，结果是：

> 100, 0.000654
> 
> 200, 0.000370
> 
> ……，……
> 
> ……，……
> 
> 8800, 0.000002
> 
> 8900, 0.000002
> 
> 9000, 0.000001
> 
> 9100, 0.000001
> 
> 9200, 0.000001
> 
> 9300, 0.000001
> 
> 9400, 0.000001
> 
> 9500, 0.000001
> 
> 9600, 0.000001
> 
> 9700, 0.000001
> 
> 中央处理器
> 
> 迭代次数：9796
> 
> 总时间：5.594017 秒

NUM = 1024 结果是：

> 迭代次数：27271
> 
> 总时间：25.949905 秒

# c# - 如何将数据表内容显示到 datagridview 中？

> ID：12979872
> 
> 赞同：2
> 
> 时间：2012-10-19T18:00:07.890
> 
> 标签：c#, winforms

我有一个简单的 DataTable，如何将其中的所有内容显示到 gridview 中？

```
public void BindData(DataTable tbl)
{
    this.dataGridView1.DataSource = (...)?
} 
```

帮助表示赞赏

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T18:02:31.353

尝试这个：

```
gridview.datasource=tbl; 
```

# android - ListView 选择器不适用于 ListViewItem 的背景集

> ID：12979875
> 
> 赞同：5
> 
> 时间：2012-10-19T18:00:22.183
> 
> 标签：android, android-listview

我有一个`ListView`只有纯色的选择器集。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:id="@+id/assignmentSelectedItem" />
<ListView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/assignmentsListView"
    android:layout_marginLeft="2dp"
    android:layout_marginRight="2dp"
    android:listSelector="@drawable/assignment_list_selector" />
</LinearLayout> 
```

assignment_list_selector.xml -

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:state_pressed="true"
    android:drawable="@android:color/white" />
 <item android:drawable="@android:color/transparent"/>
</selector> 
```

在`ListView.Adapter`我的列表中，我的项目的视图背景设置为特定颜色。我的问题是，为什么选择器在为我的列表视图显示选定颜色时根本不起作用？如果是这样，任何关于允许我仍然设置视图的背景颜色的解决方法的建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T18:07:49.717

您可以在布局 .xml 文件中使用 ListView 属性`android:drawSelectorOnTop="true"`，以使列表视图将选择器绘制在列表项上而不是在它们下方。

如果您不想拥有项目的背景 + 列表选择器功能，您可以尝试另一种方法：使用透明列表选择器。并修改您的选择器以用作列表项的背景。例如

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@android:color/white" />
    <item android:drawable="@android:color/your_list_item_color"/>
</selector> 
```

# iphone - iOS 的线性规划库

> ID：12979876
> 
> 赞同：10
> 
> 时间：2012-10-19T18:00:23.583
> 
> 标签：iphone, ios, ipad, math, linear-programming

我正在寻找一个能够为我正在开发的应用程序解决 LP、IP、BIP、MIP 的 iOS 库。我找到了 GLPK，但不知道如何为 iOS 编译它，在网上搜索了一段时间后，我没有发现任何有趣的东西......如果有人可以帮助我如何为 iOS 编译 GLPK 或要么知道一些适用于 iOS 的开源 LP 求解器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T00:29:38.290

我使用 GMP（GNU 多精度算术库）进行 iOS 开发，它基本上是一个基于 C 的静态库，用于各种数学目的。我必须对一个大矩阵进行计算，所以我需要一个支持任意精度的库。我用 MacPorts 安装了它。MacPorts 是 Mac 上基于终端的包管理系统，类似于 Debian 上的 yum 或 apt。在您安装了适当的静态库后，我使用“sudo port install gmp”安装了 GPL，之后您可以在 Xcode 中的“Link Binary With Library”部分下查看静态库。按“添加其他..”按钮，转到 /opt/local/lib 文件夹，这是 MacPorts 的默认安装文件夹，然后检查您的静态库。在您的代码中添加一些标头，瞧，您可以进行计算。

在下图中，您也可以看到 libgsl，即 GNU 科学库，我也推荐它。

![在此处输入图像描述](../Images/9f711ae29b00fa82f61c18f983aa1d1f.png)

# ruby - 为类实例变量定义 attr_accessor - Ruby

> ID：12979879
> 
> 赞同：0
> 
> 时间：2012-10-19T18:00:28.097
> 
> 标签：ruby, attr-accessor, instance-eval

我正在尝试为类实例变量创建访问器。我`attr_accessor`从类中包含的模块调用该方法。请看下面的代码：

```
module Persistence
  def self.included(mod)
      mod.extend ClassMethods
      # Add accessor for class instance variable
      class << mod
          attr_accessor :persistent_data
      end
  end

  module ClassMethods
      def X
          persistent_data = 'data'
      end
  end
end 
```

上面的代码有效。但是，当我将调用的代码更改为`attr_accessor`：

```
 mod.instance_eval do
     attr_accessor :persistent_data
 end 
```

我明白了`NoMethodError: undefined method `persistent_data='`

两种方式不应该一样工作还是我的理解错了？我正在使用 REE 1.8.7

# ruby-on-rails - 使用 Rack 中间件中的记录器

> ID：12979883
> 
> 赞同：3
> 
> 时间：2012-10-19T18:00:35.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rack

我如何从我自己的在 Rails 应用程序上下文中运行的中间件中正确记录一些内容？或者，更一般地说，我如何检测堆栈上有一些日志记录中间件并使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:04:49.367

尝试使用机架通用记录器进行登录[http://rack.rubyforge.org/doc/Rack/CommonLogger.html](http://rack.rubyforge.org/doc/Rack/CommonLogger.html)

# java - 无法生成 使用 maven ear 插件进入

> ID：12979888
> 
> 赞同：5
> 
> 时间：2012-10-19T18:01:00.030
> 
> 标签：java, xml

我已经尝试了一切将其添加到我的 application.xml 文件中，但是 maven-ear-plugin 将无法识别我的 pom 文件中的应用程序名称属性 testEar。

```
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-ear-plugin</artifactId>
        <version>2.8</version>
        <configuration>
            <generateApplicationXml>true</generateApplicationXml>
            <applicationName>testEAR</applicationName>
            <earSourceDirectory>${basedir}/src/main/resources</earSourceDirectory>
            <resourcesDir>target/classes</resourcesDir>
            <defaultLibBundleDir>lib</defaultLibBundleDir>
            <modules>
                <JarModule>
                    <groupId>org</groupId>
                    <artifactId>test-client</artifactId>
                    <includeInApplicationXml>true</includeInApplicationXml>
                </JarModule>
            </modules>
            <archive>
                <manifest>
                    <addClasspath>true</addClasspath>
                </manifest>
            </archive>
        </configuration>
    </plugin>
</plugins> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T19:42:58.547

我确定默认情况下 maven ear 插件正在创建一个非 EE6 application.xml，它不支持 application-name。

我需要在 ear 插件中添加一个新的 xml 元素（版本）来指定 EE6。

```
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-ear-plugin</artifactId>
        <version>2.8</version>
        <configuration>
            <generateApplicationXml>true</generateApplicationXml>
            <applicationName>testEAR</applicationName>
            <earSourceDirectory>${basedir}/src/main/resources</earSourceDirectory>
            <resourcesDir>target/classes</resourcesDir>
            <version>6</version>
            <defaultLibBundleDir>lib</defaultLibBundleDir>
            <modules>
                <JarModule>
                    <groupId>org</groupId>
                    <artifactId>test-client</artifactId>
                    <includeInApplicationXml>true</includeInApplicationXml>
                </JarModule>
            </modules>
            <archive>
                <manifest>
                    <addClasspath>true</addClasspath>
                </manifest>
            </archive>
        </configuration>
    </plugin> </plugins> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-03T10:48:29.333

我遇到了同样的问题，就我而言，事实证明 Maven 没有生成 application.xml 文件。解决方案是从 pom.xml中**删除选项：**

> `<generateApplicationXml>true</generateApplicationXml>`

默认值为“true”，所以这行不是必需的......这以某种方式解决了这个问题

# c# - NServiceBus 标头的用途？

> ID：12979894
> 
> 赞同：2
> 
> 时间：2012-10-19T18:01:19.810
> 
> 标签：c#, messaging, nservicebus

[我在这里](http://www.nservicebus.com/faq/TechnicalMessageInformation.aspx%20/ "这里")看到了有关如何访问标头的描述，但似乎找不到任何有用的示例。一些教程包含访问标头的代码，但没有解释原因。任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T19:03:09.023

可能是您需要在消息中发送一些与正文本身没有直接关系的信息。这是与 HTTP 标头类似的概念。这方面的一个例子是，当一条消息被转发到错误队列时，有一些信息会随之发送，以帮助您了解哪里出了问题（包括异常）。

# javascript - 完全禁用父元素的焦点

> ID：12979895
> 
> 赞同：0
> 
> 时间：2012-10-19T18:01:19.750
> 
> 标签：javascript, css, keyboard, focus, blur

假设我有一个链接，当点击链接时会淡出整个页面。我淡出页面的原因是因为下一页即将加载，但尚未加载。我可以使用`pointer-events: none`它将禁用任何鼠标事件，直到加载下一页。

假设它是用键盘完成的，我可以使用以下方法来防止双输入，或者完全禁用其中的所有元素，例如，tab-enter 也会以这种方式被禁用。

```
parent.onkeydown = fals
parent.onkeyup = fals
parent.onkeypress = fals
function fals() {return false} 
```

这适用于短时间的加载，但如果加载时间较长，用户可能会注意到以下困难。

*   无法离开 a 标签。
*   无法使用几个可以控制浏览器的键盘快捷键。
*   能够从地址栏进入禁用区域。

除了为所有子元素设置 onfocus=blur 之外，是否有一种现代而巧妙的方法来防止这三个问题？我今天不关心IE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:11:45.897

我认为处理你所说的事情的普遍接受的方式是使用模态的，也就是说，当他们点击那个链接时，你会弹出一个框，上面写着“处理”或类似的东西，然后你创建一个全屏 div，其 z-index 高于其他所有内容，因此用户无法单击/与屏幕上的其他任何内容进行交互，直到您完成正在做的任何事情。

有关我正在谈论的示例，请参阅[http://twitter.github.com/bootstrap/javascript.html#modals 。](http://twitter.github.com/bootstrap/javascript.html#modals)

# twitter-bootstrap - 调用多个 Twitter Bootstrap 日期选择器时遇到问题

> ID：12979899
> 
> 赞同：1
> 
> 时间：2012-10-19T18:01:39.383
> 
> 标签：twitter-bootstrap, datepicker

我生成了一个包含多行的表，每行包含一个人的姓名和每个人的 Twitter Bootstrap Datepicker，以允许用户捕获每个人的生日。

日期选择器非常适合第一个表格行（显示的第一个人），但对所有其他行没有响应。

这是Javascript：

```
<script>
$(function(){ $('#datepicker').datepicker()});
</script> 
```

这是表格行：

```
<td> 
<div class='input-append date' id='datepicker' data-date='12-02-2012' data-date-format='mm-dd-yyyy'>
<input class='span5' size='16' type='text' placeholder='12-02-2012' readonly>
<span class='add-on'><i class='icon-calendar'></i></span>
</div>
</td> 
```

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:06:42.380

ID 是 DOM 中标识元素的唯一值。因为您有多个元素，所以您应该使用 CSS 类而不是 Id，然后将 #datepicker 更改为 .datepicker。

# 表示它是一个 ID，而 . 表示它是一个 CSS 类。

此外，仅供参考，datepicker 是一个 jQuery 组件，而不是 Bootstapper 组件。

# jquery - 第一次调用后没有调用jquery加载函数

> ID：12979920
> 
> 赞同：0
> 
> 时间：2012-10-19T18:02:58.057
> 
> 标签：jquery

我正在使用`JQuery`load() `$("#list").load("test.do");`。当我们第一次加载页面时它工作正常。但在那之后，如果我导航回某个其他模块并返回此页面。load 函数不会获取更新的内容，即不会再次调用 test.do。有什么帮助吗？

提前致谢

库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:12:43.237

```
$(document).ajaxComplete(function(){
   $("#list").load("test.do");
}); 
```

试试这个。将此添加到您的代码中。

# c# - .NET winforms Sub Classed UserControl 宽度不断增加

> ID：12979922
> 
> 赞同：1
> 
> 时间：2012-10-19T18:03:13.240
> 
> 标签：c#, winforms, visual-studio-2010, user-controls, windows-forms-designer

我创建了一个自定义 UserControl，然后创建了另一个控件，它是这个 Usercontrol 的子类，但它后面仍然有自己的设计器文件（基本控件仅用于一些基本功能......我不需要“设计”上面的任何东西，实际上它的高度设置为0）。

一切都在运行时按预期工作，但在设计时，似乎每当我在设计模式下打开子控件来处理它时，Visual Studio 会不断增加我的宽度，一次可能增加几百像素（或可能是某些因素）。在我知道之前，这个东西是 10,000 多像素宽，然后我必须在设计器中重新设置宽度，以便它易于管理。这在运行时不是问题，因为控件的宽度由它所在的父容器设置，并且控件锚定到父容器。只是在设计控件时很痛苦。这里只是一些小片段，可以更好地解释我所做的事情：

```
public partial class BaseRow : UserControl
{
    public BaseRow()
    {
        InitializeComponent();

        ...
    }
} 
```

然后我想实际创建从这个 BaseRow 继承的控件，但我可以在设计器中进行编辑。所以，我去添加 - > UserControl。然后在类代码中，我将默认创建的代码更改为从我的 BaseRow （继承自 UserControl）继承，所以它看起来像这样：

```
// changed the inheritance below from UserControl to BaseRow (which inherits from UserControl)
public partial class UnitRow : BaseRow
{
    public UnitRow()
    {
        InitializeComponent();
    }
} 
```

我最初在设计器的基类和子类中都将对象的宽度设置为 400。基 Row 在其构造函数中设置其 Anchor 属性：

`this.Anchor = AnchorStyles.Top | AnchorStyles.Left | AnchorStyles.Right;`

因为这些控件都将进入一个子类面板控件，该控件将控制添加到其中的行的宽度。

运行时一切正常。我创建的这些“行”控件的实际宽度设置正确，并根据其父子类面板控件进行适当更改。但是当我在设计时以设计模式打开行控件时，宽度不断变长。每次宽度等于或大于 10,000 时，我都会在“属性”窗口中手动将其更改回 400 的宽度。

它不会引起任何重大问题。但这是一种真正的痛苦。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T19:07:33.307

解决方法是在控件的 Load 事件处理程序中设置锚点：

```
 private void BaseRow_Load(object sender, EventArgs e)
    {
        if ( !DesignMode )
        {
            this.Anchor = AnchorStyles.Top | AnchorStyles.Left | AnchorStyles.Right;
        }
    } 
```

现在，当您拖放控件时，它不会在设计时设置锚点，但会在运行时工作。

# javascript - 大视频上传处理超时

> ID：12979923
> 
> 赞同：3
> 
> 时间：2012-10-19T18:03:13.477
> 
> 标签：javascript, ruby-on-rails, ajax, node.js

我正在开发一个 Rails 应用程序，用户可以在其中上传一些视频。带乘客的 Apache 是我的服务器。视频可以大到 500MB 或 1GB。视频上传后会转换为 mp4 并播放。

我正在使用[https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)上传文件。有了这个，我可以轻松上传高达 500MB 的视频文件。我想在上传完成后立即显示视频的 mp4 预览。我正在使用 ffmpeg 将视频转换为 mp4。此转换有时可能需要 10 多分钟，由于默认的 apache 超时，我的请求会在 5 分钟后超时。

因此，这里的问题是 ajax 上传仅在上传完成后 5 分钟内使请求保持活动状态。文件上传完成后，我需要请求保持活动状态约 10-20 分钟。很高兴知道是否有任何其他基于 javascipt 的解决方案可用于保持此请求活动，直到视频处理完成并且可以向用户显示预览。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T19:44:26.423

在视频被转码之前保持阻塞请求会给您的服务器带来负担。大多数服务器可以同时处理 40-80 个并发请求，具体取决于 Rails 堆栈的内存占用、安装的 gems 和 Apache 服务器设置。如果您允许 10 分钟的请求，这意味着同时上传的 40 个用户可能会关闭您的服务。

我的建议是使用 Ajax 每隔几秒钟轮询一次 Rails 服务器，如果工作完成转码。如果是这样，您可以刷新页面或添加更多 javascript 来初始化视频播放。

```
window.setInterval( function() {
  $.get('video_path').done(function(data, code, xhr) {
    location.reload(); // or some code for playing back the video
  });
}, 2000); 
```

另一个类似的解决方案可以使用第三方服务，如[Pusher](http://pusher.com/)或[PubNub](http://www.pubnub.com/)，它允许浏览器保持持久连接，然后允许 Rails 服务器在触发事件时通知客户端。像这样的推送服务通常使用[Node.Js](http://www.nodejs.org)来更好地进行异步处理并同时维护许多打开的连接。

第三种选择是将 Apache 切换到[Puma](http://puma.io/)并使用 Rails[新的流 API](http://tenderlovemaking.com/2012/07/30/is-it-live.html)。Puma 更适合处理并发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:09:01.023

这听起来像一个 Apache 配置指令（KeepAliveTimeout 和 TimeOut）。

`KeepAliveTimeout 1200 # 60sec * 20 min`

来自 Apache 的更多信息和语法：[http ://httpd.apache.org/docs/2.2/mod/core.html#keepalivetimeout](http://httpd.apache.org/docs/2.2/mod/core.html#keepalivetimeout)

另一种选择：您能否修改您的 JS/AJAX 以每 2 分钟重新请求一次，并检查预览是否存在？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-21T22:43:21.803

两个 tomcat 参数（注意！仅在 Tomcat 7.0 之后可用）允许您在运行请求时保持会话活动。此外，只有在请求完成后，会话超时才会重新开始计数：

```
org.apache.catalina.session.StandardSession.ACTIVITY_CHECK=true
org.apache.catalina.session.StandardSession.LAST_ACCESS_AT_START=false 
```

您可以在 server.xml 中设置两者或通过 JAVA_OPTS 传递它们：

```
-XX:MaxPermSize=252m -Dorg.apache.catalina.session.StandardSession.ACTIVITY_CHECK=true -Dorg.apache.catalina.session.StandardSession.LAST_ACCESS_AT_START=false 
```

# php - 禁用或检测默认配置

> ID：12979925
> 
> 赞同：0
> 
> 时间：2012-10-19T18:03:17.093
> 
> 标签：php, log4php

我有 php 文件，其中包含在几个项目中使用的类“FooClass”。我最近添加了使用 log4net 进行日志记录的方法，如下所示：

```
private static function log($message,$level=0)
{
    if(!isset(self::$logger))
    {
        if(!class_exists("Logger")) return;
        self::$logger = Logger::getLogger("DBw");
        if(!isset(self::$logger)) return;
    }
    //logging
} 
```

一些使用 FooClass 的文件可以通过使用 Logger::configure("config.xml") 来定义配置。但其他人没有定义它，在这种情况下，FooClass 开始使用 LoggerConfiguratorDefault，它将日志跟踪为“echo”。这是不可接受的。

我想看看其他文件是否没有定义配置，FooClass没有使用LoggerConfiguratorDefault记录。

如何禁用 LoggerConfiguratorDefault 或检测使用它并从函数返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:19:16.170

我处于相同的位置，情况略有不同：如果我访问一个值，我的配置对象会记录，但如果我访问记录器的配置文件的配置值，它就无法记录。

log4php类`Logger`有一个私有静态属性`$initialized`，可以通过私有静态方法访问`isInitialized()`。我通过使用反射来访问静态属性的值解决了我的问题，如果结果是`false`我返回了一个自我创建`NullLogger extends Logger`的，如果调用任何日志记录方法则什么都不做。

您的班级可能也可以这样做，但更好的解决方案是确保始终初始化 log4php。

我建议您在 Jira 项目中创建一个票证，以便更轻松地解决此问题。确实没有必要将`Logger::isInitialized()`方法设为私有。

# c# - 在某些 PC 上启动 Windows 应用商店应用程序时崩溃（必应地图）

> ID：12979927
> 
> 赞同：0
> 
> 时间：2012-10-19T18:03:23.177
> 
> 标签：c#, windows-runtime, bing-maps, winrt-xaml, windows-store-apps

当我在另一台 PC（不是我正在开发的 PC）上测试我的应用程序时，它在启动时崩溃。我观察到只有在没有安装 Visual Studio 的 PC 上才会发生崩溃。

我在我的应用程序中使用 Bing Maps SDK，所以问题可能与此有关：[问题讨论 -> 请参阅问答部分。](http://visualstudiogallery.msdn.microsoft.com/bb764f67-6b2c-4e14-b2d3-17477ae1eaca)

我已经尝试在 Release 中编译，但问题仍然存在。有没有什么解决方法，或者我们应该站在这里，等待MS发布新版本的SDK？

UPD：似乎 VS 不会将 Bing Map SDK 二进制文件留在 App 包的 Dependencies 文件夹中。如何强制 VS 在构建中包含二进制文件？

UPD2：问题已解决 - 这不是 Bing 地图错误，而是我的代码中的错误。在你对自己有 100% 的把握之前，永远不要责怪别人；）

# ruby - 使用 %w[] 创建空字符串数组

> ID：12979928
> 
> 赞同：17
> 
> 时间：2012-10-19T18:03:30.793
> 
> 标签：ruby, syntax

要创建一个带有空字符串`['a', '', 'b', '', 'c']`（不是一个空格字符串`' '`）的数组，使用`%W`I can use `%W[a #{} b #{} c]`，也可以连接数组，但是是否可以只使用空字符串创建数组`%w[]`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-11-27T05:55:41.143

几个选项

`%W[a b c #{''} z]`

`%W[a b c] << " "`

（我知道这不是使用`%w{}`语法，而是为了更好地衡量：

`'a,b,c,,z'.split(',')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-02T13:44:53.357

您可以使用

```
 %w[a \   b \  c].map(&:strip) 
```

,但我认为它不是很干净。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-11T12:40:30.573

尝试使用 %W 而不是 %w 并使用 \s 转义字符作为空字符串

```
 %W[a \s b ] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-22T21:49:23.260

您可以使用转义运算符 (\)，其后带有一个额外的空格字符。

```
>> %w(a \  b \  c)
=> ["a", " ", "b", " ", "c"] 
```

# paypal - PayPal Payments Pro - 跳过 IPN

> ID：12979936
> 
> 赞同：2
> 
> 时间：2012-10-19T18:03:50.790
> 
> 标签：paypal, paypal-ipn

是否可以通过 NVP 告诉 PayPal 不要向 IPN 处理程序发送响应？例如，我使用 IPN 支付通过我运行 FoxyCart 的商店收到的付款。但是，我现在设置的商店不使用第 3 方购物车，我只是使用 API 响应来处理所有事情。因此，我不希望 PayPal 向 IPN 发送响应。

我已经确定了 notify_url 参数的范围，但这似乎只会改变 IPN 响应的发送位置。

我希望这家商店根本不发送任何 IPN 响应，同时允许其他商店继续使用它一直以来的 IPN。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:37:52.123

这取决于您的帐户设置。

有两种类型的 IPN，一种是在账户级别设置的，只要资金进入您的账户就会触发，无论来源如何。如果禁用此功能，您将无法从任何一家商店获得任何 IPN。

另一种类型的 IPN 是基于正在进行的 API 调用。您需要检查您的 magento 支付模块配置以查看它是否正在生成第二种类型，并在此处禁用它。如果它已被禁用，则意味着您只能获得第一种类型的 IPN。如果是这种情况，您实际上需要修改您的 OTHER 购物车。

（一个更简单的选择可能是开设一个儿童贝宝帐户，而不是弄乱所有的购物车）

# facebook-fql - 在视频表上按 created_time 的 facebook FQL 过滤器无法按预期工作（即返回旧结果）

> ID：12979937
> 
> 赞同：2
> 
> 时间：2012-10-19T18:03:50.183
> 
> 标签：facebook-fql

我对视频表有以下查询，它返回旧结果。

```
SELECT owner, vid FROM video WHERE owner = 123456 AND created_time >  1347789391 
ORDER BY created_time DESC LIMIT 100 
```

对照片的类似查询按预期执行过滤器

```
SELECT owner, caption, FROM photo WHERE aid = 123456 AND created > 1347789391 
ORDER BY created DESC LIMIT 100 
```

有任何想法吗？
我寻找已知的错误，但找不到任何错误。我的解决方法是检查返回结果并自己进行过滤，但这当然不理想。

# java - 回收 JavaFX 动画

> ID：12979941
> 
> 赞同：1
> 
> 时间：2012-10-19T18:04:34.177
> 
> 标签：java, javafx-2

我正在尝试创建一个简单的动画，在 JavaFX 2.x 中将圆圈向左移动一个像素，动画有效，但每当我尝试第二次启动时，它就不再有效了。我已经尝试了几件事，这是代码：

```
public void handle(KeyEvent t) {
    if (t.getCode() == KeyCode.LEFT) {
        final KeyValue kv = new KeyValue(testPuck.translateXProperty(), -1); 
        final KeyFrame kf = new KeyFrame(Duration.millis(50), kv);
        timeLineToLeft.getKeyFrames().add(kf);
        timeLineToLeft.play();
    }
} 
```

我尝试检查时间线是否不等于 null，然后删除关键帧/键值并再次添加它们。但这也无济于事。对这个问题有任何帮助吗？关于这个主题的文档似乎很少。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:54:54.670

您的动画只有一个`KeyFrame`- 最后一个，`testPuck`位于 -1 点。因此，在第二次调用之后，您添加了 new `KeyFrame`，它将 puck 从点 -1 移动到点 -1 并且没有任何反应。

接下来试试：

注意我`Timeline`每次都重新创建，没有理由保留它：

```
public void handle(KeyEvent t) {
    if (t.getCode() == KeyCode.LEFT) {
       Timeline timeLineToLeft = new Timeline();
       final KeyValue kv = new KeyValue(testPuck.translateXProperty(), 
            testPuck.getTranslateX() -1);  // note we calculate new value every time
       final KeyFrame kf = new KeyFrame(Duration.millis(50), kv);
       timeLineToLeft.getKeyFrames().add(kf);
       timeLineToLeft.play();
} 
```

如果你真的想重用`Timeline`对象，请先清除它：

```
 timeLineToLeft.getKeyFrames().clear();
    //...
    timeLineToLeft.playFromStart(); 
```

# android - R.java 缺失，施工时关闭模拟器

> ID：12979943
> 
> 赞同：-6
> 
> 时间：2012-10-19T18:04:41.803
> 
> 标签：android, emulation, r.java-file

> **可能重复：**
> [如何重新生成 R 类？](https://stackoverflow.com/questions/2041083/how-to-regenerate-r-class)

我不知道所以是的，我确实在施工时关闭了模拟器，我的 R.java 不见了，如何修复它？我进行了研究，他们说这可能是一些大写字母，但我项目中的所有内容都是小写的，所以我不知道该怎么做。

我确实清理了我的项目超过 10 次，但什么也没有。

我也确实在每个文件中导入了所有 R 并清理了它，但没有结果。

**编辑**

当我将项目版本从 4.1 更改为 2.2 时出现错误，所以我改回 4.1 并且 R.java 又回来了，但是为什么它在 2.2 时消失了？因为我需要它是 2.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T18:07:02.663

尝试清理您的项目以重新生成 R 文件。在 Eclipse 中，可以在 Project -> Clean 下找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T18:32:24.893

确保您正在导入正确的 R 文件而不是 android.R

# java - Java 调度：Quartz 与其他？（即黑曜石）

> ID：12979944
> 
> 赞同：15
> 
> 时间：2012-10-19T18:04:45.347
> 
> 标签：java, quartz-scheduler, scheduling

我即将在我们的一个项目中加入**Quartz**。在寻找免费的 UI 来帮助我们监控其执行状态（作业等）时，我们看到了这篇文章：[why-you-shouldnt-use-quartz](http://java.dzone.com/articles/why-you-shouldnt-use-quartz)

作者说 Quartz 即使对于简单的任务也很复杂（我倾向于同意...），并提到[**Obsidian**](http://www.carfey.com/)是一个更好的选择，它包括开箱即用的漂亮 UI。确实，该 UI 在某种程度上比我为 Quartz ( [JWatch](http://code.google.com/p/jwatch/) ) 找到的最好的免费替代品要好。注：作者为黑曜石工作...

*   有人推荐黑曜石而不是石英？（或任何其他选择）？
*   你知道 Quartz 有什么更好的免费 UI 替代品吗？

谢谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T16:03:51.403

Quartz 程序是使用最广泛的程序，但是有一个大问题，因为您的前端非常昂贵。

但是石英的图形应用程序可以帮助其分析，例如 JWatch [https://github.com/royrusso/jwatch](http://code.google.com/p/jwatch/)在网络上具有图形用户界面（如您之前所说），Citrine [https:// /github.com/massdosage/citrine-scheduler](http://sourceforge.net/projects/citrine/) , MyScheduler [https://github.com/saltnlight5/myschedule](http://code.google.com/p/myschedule/) , Apache Click [http://click.apache.org/](http://click.apache.org/)是 Eclipse 的一个插件，可以帮助我们安装系统等等前端 ...

Obsidian 相当不错，只有一个问题，你必须支付第二个许可证，对于公司来说不是最好的解决方案，因为价格，但对于个人来说是一个很好的解决方案。

# java - Java继承：如何在Super中声明一个静态变量并在子类中实例化它

> ID：12979946
> 
> 赞同：0
> 
> 时间：2012-10-19T18:04:51.840
> 
> 标签：java, oop, inheritance

你将如何在 Super 中声明一个静态变量并在子类中实例化它

例子

```
class A
{
  static Queue<String> myArray;

  public void doStuff()
  {
     myArray.add(someMethod.getStuff());
  } 

}
class B extends A
{
  myArray = new LinkedList<String>();

}

class C extends A
{
  myArray = new LinkedList<String>();

} 
```

显然这行不通。但是你将如何声明一个变量？然后用超类中的变量做一些常见的功能；然后确保每个子类都有自己的静态 LinkedList？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T18:07:20.057

你不能按照这些思路做事。您可以做的最接近的是在超类中拥有一个抽象（非静态）方法并用它做一些事情。

但一般来说，你不能强制子类做*任何*静态的事情，你也不能像你试图做的那样从超类访问子类的静态字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:07:30.383

`Static variable`绑定到一个类而不是一个实例。如果您需要子类的单独静态变量，则需要在每个子类中声明它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T20:29:30.427

因为，您有特定于子类的属性要操作，所以您不能在超类中进行操作，而且这样做也不合逻辑。如前所述，您可以执行以下操作：

```
abstract class A {
      public abstract void doStuff();       
    }

class B extends A    {
  static List<String>myArray = new LinkedList<String>();

  public abstract void doStuff() {
      // do B stuff
  }

}

class C extends A  {
  static List<String>myArray = new LinkedList<String>();
  public abstract void doStuff() {
      // do C stuff
  }

} 
```

# java - 需要将多图从java发送到json中的javascript

> ID：12979951
> 
> 赞同：1
> 
> 时间：2012-10-19T18:05:05.207
> 
> 标签：java, json

我正在寻找有关如何最好地以 json 格式将多映射值从 java 发送到 javascript 的建议。除了使用带有键字段和数组列表的对象之外，还有其他选项我可以探索以 json 格式发送多映射值以便在浏览器上的 javascript 中进行处理吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:25:35.703

如果您打算处理所有值，您可能只想将其作为对列表发送。

否则，该映射到列表就是您的朋友。

为了清楚起见，一些代码。

```
// list of pairs
[["key1", "val11"],
 ["key1", "val12"] .....]

// map to lists
{ "key1": ["val11", "val12"], ...... } 
```

# excel - 有什么方法可以在excel宏中保存一行以供将来使用？

> ID：12979954
> 
> 赞同：1
> 
> 时间：2012-10-19T18:05:11.370
> 
> 标签：excel, excel-2003, vba

我正在构建一个宏来将一个长表拆分为多个小表，并且我希望将标题保存在一个变量中，以便能够快速将其粘贴到小表的顶部。

我做了一个宏来做第一个（很简单）

```
Sheets("Feuil1").Select
Rows("2:2").Select
Selection.Copy
Sheets("PageImpression").Select
Rows("2:2").Select
ActiveSheet.Paste 
```

如何将我`Selection.Copy`的变量保存在变量中，以及如何在需要时粘贴它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T18:15:37.183

答案是将行存储到变量中。然后在需要时调用该变量。此外，不需要复制/粘贴和选择等等:)

```
Option Explicit

Dim myHeader as Variant

myHeader = Sheets("Feuil1").Rows(2)

Sheets("PageImpression").Rows(2) = myHeader 
```

**更新**

要与`Range`对象一起使用，请执行以下操作：

```
Dim myHeader As Range

Set myHeader = Sheets(1).Rows(2)

Sheets(2).Rows(2).Value = myHeader.Value 
```

**更新 2**

更清洁（内存+节省时间）的方法是：

```
Option Explicit

Dim myHeader as Variant (or Range)

With Sheets("Feuil1")

    myHeader = .Range(.Range("A1"),.Range("A" & .Columns.Count).End(xltoLeft).Column))
    'for variable type Range, add "Set =" in front of line above

End With

Sheets("PageImpression").Range("A2") = myHeader
'For Range Sheets("PageImpression").Range("A2").Value = myHeader.Value 
```

# jquery-ui - jQuery UI Datepicker - 如何选择年份

> ID：12979955
> 
> 赞同：0
> 
> 时间：2012-10-19T18:05:12.617
> 
> 标签：jquery-ui, datepicker

有没有办法让用户在日期选择器上选择年份？在默认状态下，人们必须翻阅几个月才能到达不同的年份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:07:58.963

```
<script>
    $(function() {
        $( "#datepicker" ).datepicker({
            changeYear: true
        });
    });
</script> 
```

看这个[例子](http://jqueryui.com/datepicker/#dropdown-month-year)

# events - 批量API，邀请好友

> ID：12979957
> 
> 赞同：1
> 
> 时间：2012-10-19T18:05:19.467
> 
> 标签：events, facebook-page, facebook-batch-request

我正在尝试使用批处理 API 邀请页面的所有粉丝参加 facebook 活动。这是我第一次使用这个API，此时我没有什么可以测试这部分代码......有人可以告诉我如何在不使用真实页面的情况下进行测试，有真正的粉丝......或者告诉我是否它看起来正确吗？

```
 //Getting all the likers of the page
 $result = $facebookObj->api(array(
     'method' => 'fql.query',
     'query' => 'select uid,name from user where uid in ( select uid from page_fan where uid in (select uid2 from friend where uid1 = me()) and page_id = '.$fbPage.')'
 ));

//If liker are more than 50 we use batch request
if($numLikers >50){

    // split array into several part of 50 users accounts                        
    $splitLikers = array_chunk($result, 50);
    // count how many arrays are generated by the array_chunk
    $countSplit = count($splitLikers);

    //Start a loop through the numbers of groups of 50 users  (or less if last group contains less than 50 users                      
    for($a=0; $a<$countSplit; $a++){
       //Second loop to go through the 50 likers in one group                                  
       for($b=0; $b<count($splitLikers[$a]); $b++){
           // construct an array containing the whole group                                
           $queries[$a] = array('method' => 'POST', 'relative_url' => $event_fbID . "/invited/" . $splitLikers[$a][$b]['uid']);

       }
       //Send POST batch request with the array above                            
       $ret_val = $facebookObj->api('/?batch='.json_encode($queries[$a]), 'POST');
    }

}else{

    foreach ($result as $value) {
        $ret_val = $facebookObj->api($event_fbID . "/invited/" . $value['uid'],'POST');
        if($ret_val) {
            // Success
            $numInvited++;
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:28:35.393

您的代码看起来不错，但不要忘记您可能需要将访问令牌添加到批处理请求中

像：

```
$params['access_token']=[USER_ACCESS_TOKEN];

$ret_val = $facebookObj->api('/?batch='.json_encode($queries[$a]), 'POST', $params); 
```

对于测试，您可能希望创建一个添加了几个朋友的新页面并进行测试。

另请记住，您需要处理响应，批处理请求将响应与批处理数组长度相同的数组，并且每个对象可能是不同的代码，如果它被发送则为真。

[您也可以在Graph Explorer](http://developers.facebook.com/tools/explorer/?fql=select%20uid%2Cname%20from%20user%20where%20uid%20in%20%28%20select%20uid%20from%20page_fan%20where%20uid%20in%20%28select%20uid2%20from%20friend%20where%20uid1%20%3D%20me%28%29%29%20and%20page_id%20%3D%205330548481%29)中尝试您的 FQL 代码（点击此处）

看起来不错，但它显示了一个额外的结果。

# android - CSS3 变换：在 Droid 2 上完成旋转重置

> ID：12979971
> 
> 赞同：1
> 
> 时间：2012-10-19T18:06:29.667
> 
> 标签：android, css, rotation, transform, reset

我正在摩托罗拉 Droid 2 上进行测试。当我`-webkit-transform:rotate(1650deg)`完成时，图像会返回到原始位置`0deg`。

有没有办法阻止这种情况发生？试图发生的事情是将一个类应用于轮子，指定它需要转动多少度才能降落在某个数字上。

我不能为这个项目使用外部库，如 JQuery。

这是我正在使用的代码：

```
.wheelcontainer{
width: 313px;
height: 313px;
text-align:center;
display: block;
margin-top: 40px;
margin-left: auto;
margin-right: auto;
z-index: 10;
}

.wheel{
-o-transition: all 7s ease-out;
-ms-transition: all 7s ease-out;
-moz-transition: all 7s ease-out;
-webkit-transition: all 7s ease-out;

width: 313px;
height: 313px;
background: url('../images/wheel.png') no-repeat;
background-size: 100% 100%;
z-index:-1000;
position:relative;
transform-origin:50% 50%;
-ms-transform-origin:50% 50%; /* IE 9 */
-webkit-transform-origin:50% 50%; /* Safari and Chrome */
-moz-transform-origin:50% 50%; /* Firefox */
-o-transform-origin:50% 50%; /* Opera */
 }

 /*      ROTATIONS!     */

/*330*/
.threethirty_right{
z-index:-10000;
transform: rotate(1830deg);
-ms-transform: rotate(1830deg); /* IE 9 */
-webkit-transform: rotate(1830deg); /* Safari and Chrome */
-moz-transform: rotate(1830deg); /* Firefox */
-o-transform: rotate(1830deg); /* Opera */
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:47:14.177

解决了。Android 2.0 设备不支持转换。

[http://daneden.me/2011/12/putting-up-with-androids-bullshit/](http://daneden.me/2011/12/putting-up-with-androids-bullshit/)

# list - 将 int 与 List SML 进行比较

> ID：12979982
> 
> 赞同：0
> 
> 时间：2012-10-19T18:07:37.653
> 
> 标签：list, int, sml

我刚刚开始学习 SML 并且遇到了我的代码问题。我想将一个 int 与 List of int 进行比较并返回一个小于我的 int 的数字列表

```
 fun less(e, L): L =
  if L = [] then []
  else (hd[L] < e :: less tl(hd)) 
```

我想通过将其与列表 L 进行比较来返回所有小于 e 的数字的列表。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T18:29:50.587

```
hd[L] < e :: less tl(hd) 
```

首先`less tl(hd)`与just `less tl hd`or相同`(less tl) hd`。写作`f g(x)`并不意味着“将 g 应用于 x 并将 f 应用于结果”。为此，您需要编写`f (g x)`. 一般来说，在原子表达式周围加上括号不会改变任何东西，并且通过在左括号之前省略空格，你会使语法看起来像它不是的东西，所以你应该避免这种情况。

然后`tl hd`根本没有多大意义，因为`hd`它是一个函数并且`tl`需要一个列表。您可能打算申请`tl`，`L`而不是申请`hd`。

然后`hd [L]`取列表的第一个元素`[L]`。`[L]`是一个包含单个元素的列表：`L`. 所以写作和写作`hd [L]`是一回事`L`。你可能是想带头`L`。为此，您只需编写`hd L`不带括号的内容。

现在的问题是您试图将 的结果`(hd L) < e`（一个布尔值）添加到列表中。这将起作用（就像在编译和运行时没有错误一样），但它会产生一个布尔值列表（其中将包含 a`true`用于任何小于 e 的元素和 a`false`用于任何其他元素）。这不是你说的你想要的。为了得到你想要的，你应该有一个`if`如果它小于则将头部附加到列表中，`e`并且当它不是时不添加任何东西。

修复这些问题应该使您的代码按预期工作。

PS：通常首选使用模式匹配来找出列表是否为空，并将非空列表拆分为头部和尾部。在大多数情况下最好避免使用和函数`hd`，因此也是如此。但是，如果您还没有涉及模式匹配，那么现在就可以了。`tl``= []`

`filter`PPS：通过使用该函数，您可以更轻松且无需递归地做您想做的事。但是再说一遍：如果您还没有涉及到，那么您的方式现在就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T21:39:39.523

我错了，是你没有比较元素。你只满足空列表。就像是

> 如果 e < hd L 则 e::less(e, (tl L))

# javascript - 如果浏览器在 asp .net 中关闭，则从浏览器中注销？

> ID：12979993
> 
> 赞同：6
> 
> 时间：2012-10-19T18:07:59.323
> 
> 标签：javascript, asp.net, .net

我的要求有点复杂。用户正在使用 Web 浏览器访问数据库，如果用户关闭活动页面而不是注销会话，则在访问数据库时 - 该会话需要自动注销。有人能指导我怎么做吗？我使用 jquery - 在母版页中。

onbeforeunload - 我收到消息离开页面或留在此页面。即使我在登录并查看主页时也会收到此消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T19:22:27.513

这是示例代码

```
 window.onbeforeunload = function () {
   return 'You want to leave?';
};​​ 
```

[在此处](http://jsfiddle.net/syf89/)查看演示

我认为它可以发送一个 ajax 请求，你可以看到你的服务器用户关闭了浏览器的选项卡。

这也是一个名为 jquery.idle 的 jquery 插件，用于识别用户是否处于活动状态。

优雅地参考这篇[Detecting idle time in JavaScript](https://stackoverflow.com/questions/667555/detecting-idle-time-in-javascript-elegantly)会给你更多的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:56:37.450

您关闭浏览器或导航到网站内的不同页面？如果它关闭浏览器，则会话自动终止。

还要查看 global.asax 的 sesson_onEnd 事件。

# visual-studio - 如何解决 maskedInput 错误：对象不支持属性或方法“掩码”？

> ID：12979994
> 
> 赞同：0
> 
> 时间：2012-10-19T18:08:03.017
> 
> 标签：visual-studio, mask, maskedtextbox, maskedinput

*工具*

*   jquery.maskedinput-1.3.min.js (DigitalBush)
*   视觉工作室 2012 SP1
*   .NET 框架 4.5
*   MVC 运行时 v4.0.30319
*   Windows 7的
*   IE 9 64 位
*   jquery/1.7.1/jquery.min.js
*   完整的参考资料 MS 提供了一个新的 Web MVC 项目

*问题*

直到最近，我一直在成功使用 maskedInput。现在我得到错误：

**0x800a01b6 - Microsoft JScript 运行时错误：对象不支持属性或方法“掩码”**

我有两个元素，一个用于 10 位数字，一个用于 4 位，根据需要显示和隐藏它们。该错误发生在Pager初始化下函数第一行的页面初始化过程中。Microsoft JS 抱怨“掩码”未定义。这是我的代码。

![在此处输入图像描述](../Images/8a33d5a43bedbd9ae06e93071b71d530.png)

我不知道发生了什么导致无法识别口罩。我尝试重新排序 maskedInput 在其他脚本中的位置。我想知道这个插件现在是否与 Web 开发几乎每个方面的渐进式、狂热的变化不兼容。有没有人知道可能发生的事情及其解决方案？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:26:43.743

没关系！我有一个荷马时刻！我将应用程序移植到 VS 2012 ，但忽略了更新该参考链接！道歉！

# sql-server-2008 - SQL Server 全文索引如何实际索引目录中的单词？

> ID：12979996
> 
> 赞同：1
> 
> 时间：2012-10-19T18:08:08.170
> 
> 标签：sql-server-2008, optimization, integer, full-text-indexing

我一直在努力寻找有关全文索引用于索引分配给文档的全文目录的过程的答案，其中文档主键包含在索引中。我一直无法找到深入描述这一点的 MSDN 文章。

为什么我不能用它来搜索全文搜索列中的纯整数字符串？

在这里看到：（好吧，我是新用户，所以我自己重新制作了列，因为我无法发布图片）

```
 ID       FIRSTNAME   LASTNAME    ADDRESS            FULLTEXTCOLUMN
 1         JOHN        DOE        123 Main St.       1  JOHN DOE 123 Main St. 
 2         JANE        DOE        124 Summer St.     2  JANE DOE 124 Summer St.
                                                     ^ ----------^ --can't search 
```

例如，在[这个链接](http://www.codeproject.com/Articles/315101/SQL-Full-Text-Search-Programming)中，帖子的作者显示他在他的全文索引列中包含了主键 int-only 索引 --- 但是为什么呢？在为自己尝试`CONTAINS()`搜索 int 值后，搜索找不到任何没有附加文本的内容。

那么为什么这么多人在他们的目录中只显示整数字符串，如果它们不可搜索呢？我非常需要目录中的整数搜索选项，希望我只是遗漏了一些东西。

这是否意味着索引只分配给至少包含一个字母的字符串？

[这里](https://stackoverflow.com/questions/7394420/best-approach-for-doing-full-text-search-with-list-of-integers-documents)的这个问题描述的目录格式非常接近我试图欺骗系统在 SQL Server 中执行的操作（因为这是我唯一的数据库选项）。

谢谢你的帮助！

是的，这是我[在这里](https://stackoverflow.com/questions/12963490/why-is-there-no-delimited-integer-only-cataloging-option-in-sql-server)结束的问题，但我不在乎，因为这是一个“真实”的问题，而且很重要。我背后有一群人在想这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:38:52.923

经过大量测试（并关闭了 StopList，它阻止了对仅整数字符串的索引——文章的作者链接 DID 所做的）看起来它索引了每个由空格分隔的字符串，包括整数。我相信实际被索引的单词会使用有关该列中的行、列和单元格类型或位置的信息进入目录。

整个表中的所有内容都会获得一个关系索引，只要它是用空格分隔的。