# StackOverflow 问答 14670000-14670999

# c# - 使用 Jqgrid 的 MVC 视图

> ID：14670000
> 
> 赞同：1
> 
> 时间：2013-02-03T06:16:39.417
> 
> 标签：c#, asp.net-mvc, jqgrid

我在我的 C# MVC 应用程序中使用 Jqgrid。一切正常。但是，当应用程序运行时，视图会显示原始 HTML（div 标记等），然后使用 Jqgrid 重绘屏幕。有没有办法在网格完全绘制之前隐藏这些 div 标签？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:32:48.570

假设您的网格被封装在一个 id 为 myGrid 的 Div 中。

您可以做的是在文档就绪事件中使用 $('#myGrid').hide() 隐藏此 div 并连接到**jqGrid**的 gridComplete 事件并重新显示#myGrid。

坦率地说，我没有这样做，因为我从未遇到过您描述的场景，但根据所描述的，它应该可以工作..让我们知道它是怎么回事..

干杯

# html - 在 HTML 中选择 hr，似乎以相反的顺序选择？

> ID：14670003
> 
> 赞同：0
> 
> 时间：2013-02-03T06:17:24.850
> 
> 标签：html, xpath

我正在尝试选择`<div>`具有特定课程的 a 和`<hr>`之后的第一个课程之间的所有内容。

使用此查询：

`//div[@id='a']/*[preceding::div/@class='b' and following:hr[0]]`

而这个示例 HTML：

```
<div id="a">div a
    <div class="b">div b</div>
    <p>1</p>
    text1
    <a>2</a>
    text2
    <div>3</div>
    <hr>
    <div>4</div>
    <hr>
    <div>5</div>
    <hr>
</div> 
```

我得到了`div`with class "b" 和*last* `hr`之间的所有东西。选择 with`hr[*n*]`似乎以相反的顺序选择。`... and following::hr[last()]]`也可以选择最后一小时，这是我所期望的。在这个例子中，`... and following::hr[2]`最多会选择第一个`hr`，但实际上我不能保证会有多少。我怎样才能选择第一个`hr`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:04:31.617

嗯，首先，`following::hr[0]`它总是一个空序列，因为节点从 1 开始编号；所以这部分条件是假的，所以你的查询应该什么都不选。

但实际上你写`following:hr[0]`的，这应该是一个语法错误，除非你已经声明了命名空间前缀“following”。不知何故，我不认为您向我们展示的代码是您执行的代码。

现在假设您将其更改为`following::hr[1]`. 这将选择所有内容，前提是它有一个名为 hr 的后续元素，也就是说，直到最后的所有内容`hr`，这是您所描述的症状。

要选择第一个 hr 之前的节点，请选择前面没有 hr 的节点，即`not(preceding::hr)`.

除了我怀疑你所有的“跟随”和“之前”轴应该是`following-sibling`and `preceding-sibling`。

# arrays - 使用一个循环读取多个文件 perl

> ID：14670005
> 
> 赞同：0
> 
> 时间：2013-02-03T06:17:38.480
> 
> 标签：arrays, perl, loops

我有 2 个文件，每个文件有 50 行..

文件 1 文件 2

现在，我需要在单个 while 或 for 循环中逐行读取两个文件，我应该将相应的行推送到 2 个输出数组。我试过这样的事情。但它不工作。好心的帮助

```
#!/usr/bin/perl

   my @B =();
   my @C =();
   my @D =();
   my $lines = 0;
   my $i = 0;
   my $sizeL = 0;
   my $sizeR = 0;
  my $gf = 0; 
  $inputFile = $ARGV[0];
  $outputFile = $ARGV[1];
  open(IN1FILE,"<$inputFile") or die "cant open output file ";
  open(IN2FILE,"<$outputFile") or die "cant open output file";

  while((@B=<IN1FILE>)&&(@C= <IN2FILE>))
  {
  my $line1 = <IN1FILE>;
  my $line2 = <IN2FILE>;
  print $line2;
  } 
```

这里数组 2 没有得到构建.. 但我得到数组 1 的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T06:48:15.287

在您的循环条件下，您将整个文件读入它们的数组。然后将列表分配用作布尔值。这仅适用于一次，因为在评估条件后将读取文件。此外，循环内的 readlines 将返回 undef。

这是应该工作的代码：

```
my (@lines_1, @lines_2);
# read until one file hits EOF
while (!eof $INFILE_1 and !eof $INFILE_2) {
  my $line1 = <$INFILE_1>;
  my $line2 = <$INFILE_2>;
  say "from the 1st file: $line1";
  say "from the 2nd file: $line2";
  push @lines_1, $line1;
  push @lines_2, $line2;
} 
```

你也可以这样做：

```
my (@lines_1, @lines_2);
# read while both files return strings
while (defined(my $line1 = <$INFILE_1>) and defined(my $line2 = <$INFILE_2>)) {
  say "from the 1st file: $line1";
  say "from the 2nd file: $line2";
  push @lines_1, $line1;
  push @lines_2, $line2;
} 
```

或者：

```
# read once into arrays
my @lines_1 = <$INFILE_1>;
my @lines_2 = <$INFILE_2>;
my $min_size = $#lines_1 < $#lines_2 ? $#lines_1 : $#lines_2; # $#foo is last index of @foo
# then interate over data
for my $i ( 0 .. $min_size) {
  my ($line1, $line2) = ($lines_1[$i], $lines_2[$i]);
  say "from the 1st file: $line1";
  say "from the 2nd file: $line2";
} 
```

当然，我假设你做了`use strict; use warnings;`and `use feature 'say'`，并使用了 3-arg 形式的`open`词法文件句柄：

```
my ($file_1, $file_2) = @ARGV;
open my $INFILE_1, '<', $file_1 or die "Can't open $file_1: $!"; # also, provide the actual error!
open my $INFILE_2, '<', $file_2 or die "Can't open $file_2: $!"; 
```

我还敦促您使用描述性变量名称而不是单个字母，并在最内部的可能范围内声明您的变量——在开头声明 vars 几乎与使用糟糕的、糟糕的全局变量相同。

# java - JAVA从数据库中获取数据没有循环

> ID：14670009
> 
> 赞同：1
> 
> 时间：2013-02-03T06:17:56.560
> 
> 标签：java, oracle, cursor, fetch, resultset

我正在使用 JAVA 编写软件并使用 Oracle DB。

通常我们使用循环从数据库中获取值

```
Resultset rt = (Resultset) cs.getObject(1);

while(rt.next){
    ....
} 
```

但是从数据库中获取数千条数据时听起来会更慢。

我的问题是：

在 Oracle DB 中：我创建了一个像这样的过程，它是迭代数据并分配给游标。

```
Ex.procedure test_pro(sysref_cursor out info) as

open info select * from user_tbl ......

end test_pro; 
```

在 JAVA 代码中：正如我之前提到的，我迭代了一个`resultset`for 获取值，但是在数据库方面，即使我选择了值，为什么要使用循环来获取这些值？

（另一个事实在 .net 框架中，有使用数据库绑定的概念。Java 中的任何方式也是如此，绑定数据库过程，如 .net 的，无需迭代。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:22:26.327

如果您确定总会有一个结果，就像在这种情况下，您甚至可以跳过 if 并只调用 rs.next() 一次：

例如 ：

```
ResultSet resultset = statement.executeQuery("SELECT MAX (custID) FROM customer");  
resultset.next(); // exactly one result so allowed  
int max = resultset.getInt(1); // use indexed retrieval since the column has no name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T17:42:14.060

根据您要对该数据执行的操作和频率，对 ref_cursor 的选择可能是好是坏。Ref_cursors 旨在为非 Oracle 感知程序提供一种传递数据的方式，以用于报告目的。

在你的情况下，坚持循环，但不要忘记实现数组获取，因为这对性能有巨大的影响。数据库将行块传递到客户端的 jdbc 缓冲区，您的代码从该缓冲区获取行。当你到达缓冲区的末尾时，Jdbc 层会从数据库中请求下一组行，从而消除大量的网络往返。默认已经一次获取 10 行。对于较大的集合，如果内存可以提供空间，请使用更大的数字。

请参阅[Oracle® 数据库 JDBC 开发人员指南和参考](http://docs.oracle.com/cd/B19306_01/java.102/b14355/apxtips.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T06:22:54.550

是的，你可以在java中调用过程。 [http://www.mkyong.com/jdbc/jdbc-callablestatement-stored-procedure-out-parameter-example/](http://www.mkyong.com/jdbc/jdbc-callablestatement-stored-procedure-out-parameter-example/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T14:08:56.440

你无法避免循环。出于性能原因，您需要调整对 Statement 或 Resultset 对象的预取（100 是一个可靠的起点）。
为什么要这样做？它类似于读取流——你永远不知道它有多大——所以你一个接一个地按块/缓冲区读取......

# cross-browser - Soundcloud HTML5 播放器未在 IE9 中显示

> ID：14670010
> 
> 赞同：5
> 
> 时间：2013-02-03T06:18:00.337
> 
> 标签：cross-browser, internet-explorer-9, soundcloud

我已经在我的网站上放置了一个 Soundcloud HTML5 播放器，并且总体上对它非常满意。

但是，在 Windows 7 上的 IE9 中进行浏览器测试时，播放器未加载，并且我在调试控制台中看到以下错误：

```
SCRIPT429：自动化服务器无法创建对象
小部件-b8220e90.js，第 2 行字符 1738

```

我能够做的四处探索表明这与 IE9 安全设置和/或 ActiveX 有关，这让我不寒而栗。我让 IE9 在其默认安全设置下运行。

有什么办法可以让 HTML5 播放器在这种情况下显示，还是我需要回退到 Flash 播放器？

编辑：问题也出现在 IE8 中，这并不奇怪，但为了完整起见，我添加了

编辑：我在他们的新[现代 IE](http://www.modern.ie/)站点上使用 Microsoft 提供的 Win7/IE9 虚拟机并使用 IE9 中的默认安全设置看到了问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:51:43.153

我使用了您在上面指定的相同代码来尝试重现，但它在 IE9 中对我来说效果很好。在兼容模式下，它只是回退到旧的 Flash 小部件。你能看看这里并说它是否仍然不适合你吗？

[http://jsbin.com/otulas](http://jsbin.com/otulas)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T19:30:59.163

IE9 和 10 不喜欢第三方 cookie。SoundCloud 的 HTML5 小部件使用这些。

更多来自 SoundCloud：[http ://help.soundcloud.com/customer/portal/articles/1331463-why-is-my-widget-not-showing-up-in-internet-explorer-](http://help.soundcloud.com/customer/portal/articles/1331463-why-is-my-widget-not-showing-up-in-internet-explorer-)

来自 Microsoft 的更多信息：http: [//answers.microsoft.com/en-us/ie/forum/ie10-windows_8/soundcloud-html5-widget-wont-display-in-ie-9-or-10/79aaab55-44d8- 414f-9d06-939bbdf25676](http://answers.microsoft.com/en-us/ie/forum/ie10-windows_8/soundcloud-html5-widget-wont-display-in-ie-9-or-10/79aaab55-44d8-414f-9d06-939bbdf25676)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:24:02.547

这确实是 IE 中的一个问题，在 IE8 上进行测试，这是我发现的：

1.  Widget API Playground 不起作用。
2.  带有“/favorites”的 URL 不起作用，就像在 Widget API Playground 中一样。
3.  收到此错误：

    > “网页错误详细信息消息：对象不支持此属性或方法
    > 行：1
    > 字符：6061
    > 代码：0
    > URI：[https://w.soundcloud.com/player/api.js](https://w.soundcloud.com/player/api.js)

所以我确实取消了 JS 文件并得到它正在谈论这行代码：
`return r && r.instance ? r.instance : (i = a.indexOf(S(e)) > -1, s = new p(e), f.push(new d(s, e, i)), s)`

值得一提的是，播放器在没有任何 API 且不包含 API 脚本的情况下也能正常工作。

希望这对开发团队有所帮助。

# javascript - 找不到返回 404 的 Google Places REST 调用

> ID：14670011
> 
> 赞同：1
> 
> 时间：2013-02-03T06:18:12.057
> 
> 标签：javascript, rest, google-places-api

我想使用 REST 调用搜索谷歌地点。我正在根据 Google 的文档尝试以下 URL 格式，但我找不到 404。任何人都可以建议 Google Places 休息呼叫的正确格式。

```
https://maps.googleapis.com/maps/api/place/textsearch/output?query=newyork&key={MYKEY}&sensor=false 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T06:25:57.047

替换`output`为`json`或`xml`。将网址更改为：

```
https://maps.googleapis.com/maps/api/place/textsearch/json?query=newyork&key={MYKEY}&sensor=false 
```

参考：[Google Places API](https://developers.google.com/places/documentation/search)

# xml - 在 SQL Server 2005 中解析 XML

> ID：14670021
> 
> 赞同：1
> 
> 时间：2013-02-03T06:19:57.310
> 
> 标签：xml, tsql, parsing, sql-server-2005

在 SQL Server 2005 中，我试图将下面的 XML 解析为以下格式的详细信息，但我无法做到。感谢任何帮助。我想要我的选择输出

```
1 TagSold Tag        0   101 2
2 TagReg  Customer   101 0   4
3 TagAdj  Tag        0   105 2

<TagDistributor>
<stbLedgerEntryTypes>
    <stbLedgerEntryType type="TagSold">
        <vcMapping>Tag</vcMapping>
        <tiCustTrxnTypeID>0</tiCustTrxnTypeID>
        <tiTagTrxnTypeID>101</tiTagTrxnTypeID>
        <tiPaymentTypeID>2</tiPaymentTypeID>
    </stbLedgerEntryType>
    <stbLedgerEntryType type="TagReg">
        <vcMapping>Customer</vcMapping>
        <tiCustTrxnTypeID>101</tiCustTrxnTypeID>
        <tiTagTrxnTypeID>0</tiTagTrxnTypeID>
        <tiPaymentTypeID>4</tiPaymentTypeID>
    </stbLedgerEntryType>
    <stbLedgerEntryType type="TagAdj">
        <vcMapping>Tag</vcMapping>
        <tiCustTrxnTypeID>0</tiCustTrxnTypeID>
        <tiTagTrxnTypeID>105</tiTagTrxnTypeID>
        <tiPaymentTypeID>2</tiPaymentTypeID>
    </stbLedgerEntryType>
</stbLedgerEntryTypes></TagDistributor> 
```

我尝试了以下操作。我得到了输出。但在第一列中，我没有得到区分的属性值。我对第一行有疑问。

```
SELECT 
         a.b.query('.').value('@type', 'varchar(128)'),
         a.b.query('vcMapping').value('.', 'varchar(128)'),
         a.b.query('tiCustTrxnTypeID').value('.', 'int'),
         a.b.query('tiTagTrxnTypeID').value('.', 'int'),
         a.b.query('tiPaymentTypeID').value('.', 'int')
FROM    @ipv_xmlDistributorInfo.nodes('TagDistributor/stbLedgerEntryTypes/stbLedgerEntryType') a(b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:40:22.817

像这样的东西应该工作：

```
SELECT 
   x.value('(@type)[1]', 'varchar(100)') AS 'Type',
   x.value('(vcMapping)[1]', 'varchar(100)') AS 'vcMapping',
   x.value('(tiCustTrxnTypeID)[1]', 'int') AS 'tiCustTrxnTypeID',
   x.value('(tiTagTrxnTypeID)[1]', 'int') AS 'tiTagTrxnTypeID',
   x.value('(tiPaymentTypeID)[1]', 'int') AS 'tiPaymentTypeID'
FROM XMLTable x
CROSS APPLY x.myXMLField.nodes('/TagDistributor/stbLedgerEntryTypes/stbLedgerEntryType') 
  n(x) 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!3/3557c/1)。

祝你好运。

# c# - 如何获取包含反序列化对象列表（多值属性）的 Cmdlet 结果的属性（从 c# 执行 powershell cmdlet）

> ID：14670025
> 
> 赞同：0
> 
> 时间：2013-02-03T06:20:13.727
> 
> 标签：c#, serialization, powershell, powershell-2.0, powershell-remoting

我正在使用 c# 执行 PowerShell cmdlet 并解析 cmdlet 结果 (Collection[].Properties["PropertyName"].value) 以获得所需的值。

但有些结果包含反序列化对象的列表。但是 PowerShell 只是将这些转换为对象的 ArrayList，我无法获取它们的所有属性。

例如：Exchange 命令行管理程序 cmdlet 的 Get-MailboxDatabase 返回 Exchange 服务器上的邮箱数据库列表（集合）。我可以从 PSObject.Properties["PropertyName"].Value 中获取名称、服务器等属性。

它还包含一个数据库副本列表（如下所示）

类 MailboxDatabase { DatabaseCopy[] DatabaseCopies; }

PSObject.Properties["DatabaseCopies"].Value 只不过是一个对象数组列表。

但是所有 DatabaseCopy 属性都没有反序列化（或者我不确定如何获取它们）。

我只能看到名称（来自数组列表的 DatabaseCopy 的字符串）。

谁能帮助我如何获得多值结果的所有反序列化属性？

有关更多详细信息，您可以查看：[How to get DatabaseCopies from MailboxDatabase programmatically in C# (wrapped ExchangeMangementShell cmdlet in c#)?](https://stackoverflow.com/questions/14643469/how-to-get-databasecopies-from-mailboxdatabase-programmatically-in-c-sharp-wrap)

问候，梦想家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:46:57.933

cmdlet 应返回 PSObject 或 PSObject 列表。

我认为 DatabaseCopies 没有序列化，只是设置为纯字符串。所以它们不能被反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T06:42:36.767

即使来自 PowerShell，它们也以纯字符串的形式出现。

```
PS C:\> $md.type
PS C:\> $md.DatabaseCopies.gettype()

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
True     True     ArrayList                                System.Object

PS C:\> $md.DatabaseCopies[0].gettype()

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
True     True     String                                   System.Object

PS C:\> $md.gettype()
Method invocation failed because [Deserialized.Microsoft.Exchange.Data.Directory.SystemConfiguration.MailboxDatabase] doesn't contain a method named 'gettype'. 
```

所以，看来我别无选择。我将为我的用例寻找解决方法。

# javascript - Javascript 注释与代码在同一行：是或否？

> ID：14670033
> 
> 赞同：-6
> 
> 时间：2013-02-03T06:22:44.163
> 
> 标签：javascript, comments

所以这是我用 Javascript 编写的一些代码：

```
var panRate = 120; //Max speed of the camera
var panAccelerate = 0.01; //Amount speed increases each frame
var panDecelerate = 1.05; //Amount speed is divided by each frame 
```

那是犹太洁食吗，将注释与代码放在同一行？Firefox 和 Chrome 似乎没有任何问题，但这有可能破坏某些浏览器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T06:25:20.230

Javascript 有 2 种类型的注释，并且都适用于所有浏览器。

*   `// comment`表示“内联”注释。之后该行上的任何字符`//`都是注释。
*   `/* comment */`是“块”评论。`/*`任何带有and的字符`*/`都是注释，可以跨越多行。

两者在所有 javascript 实现中都普遍有效。

*风格*是这里唯一真正关心的问题。这是一个*更加*主观的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T06:25:22.253

> ...但这有可能破坏某些浏览器吗？

不，不是任何*远程*兼容 ECMAScript 规范的浏览器。我见过的任何浏览器都没有任何问题。这是**非常**基本的，如果浏览器有这个问题，你会担心更大的问题。所以不要担心这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T06:25:27.173

很好，注释掉的代码在反斜杠之后开始并在行尾结束。

# android - 以编程方式设置具有自定义颜色和圆角的android设置按钮

> ID：14670035
> 
> 赞同：3
> 
> 时间：2013-02-03T06:23:03.477
> 
> 标签：android, button

我现在正在开发一个绘图应用程序，用户可以选择他们定制的颜色。然后定制颜色按钮将显示所选颜色。但是，一旦将其设置为定制颜色，它就会变成方角。

我的编码如下：

## 我的问题是：

1.  如何设置`customBtn`为圆角并填充自定义颜色（最好以编程方式进行，因为自定义颜色将根据用户的选择进行更改）

2.  实际上，新的 float[] 数组的这 10 个代表什么？

非常感谢！！

## 编码：

```
 customColorCode = Color.argb(alphaSeekBar.getProgress(), redSeekBar.getProgress(), 
         greenSeekBar.getProgress(), blueSeekBar.getProgress());         

 RoundRectShape rs = new RoundRectShape(new float[] { 10, 10, 10, 10, 10, 10, 10, 10}, null, null);
 ShapeDrawable sd = new ShapeDrawable(rs);
 customBtn.setBackgroundDrawable(sd);
 customBtn.setBackgroundColor(customColorCode); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T09:54:31.170

1.  更改背景颜色以将不同颜色设置为按钮
2.  public RoundRectShape (float[] outerRadii, RectF inset, float[] innerRadii) 在 API 级别 1 RoundRectShape 构造函数中添加。指定一个外部（圆形）矩形和一个可选的内部（圆形）矩形。

参数 outerRadii 一个包含 8 个半径值的数组，用于外圆矩形。前两个浮点数用于左上角（其余对顺时针对应）。对于外部矩形上没有圆角，传递 null。inset 一个 RectF，它指定从内部矩形到外部矩形每一侧的距离。如果没有内部，则传递 null。innerRadii 一个包含 8 个半径值的数组，用于内部圆形矩形。前两个浮点数用于左上角（其余对顺时针对应）。对于内部矩形上没有圆角，传递 null。如果 inset 参数为 null，则忽略此参数。

# apache - 无匹配 启动 Apache 时出错

> ID：14670036
> 
> 赞同：0
> 
> 时间：2013-02-03T06:23:04.647
> 
> 标签：apache, virtualhost

尝试启动 Apache 时，我不断收到错误消息：

```
</VirtualHost> without matching <VirtualHost> section 
```

...参考下面列出的 Apache 配置文件的第 4 行：

```
<VirtualHost 74.117.238.120:80>
   ServerName www.mydomain.biz    
   DocumentRoot /var/www/mydomain
</VirtualHost>

<VirtualHost 74.117.238.120:80>
   ServerName codejerk.mydomain.biz   
   DocumentRoot /var/www/codejerk
</VirtualHost>

<VirtualHost 74.117.238.120:80>
   ServerName www.mydomain.tk   
   DocumentRoot /var/www/mydomain
</VirtualHost>

<VirtualHost 74.117.238.120:80>
   ServerName codejerk.mydomain.tk
   DocumentRoot /var/www/codejerk
</VirtualHost> 
```

'Listen' 和 'NameVirtualHost' 指令位于调用此指令的文件中：

```
Listen 80
NameVirtualHost 74.117.238.120:80 
```

这让我发疯——显然每个 VirtualHost 块都有一个开始和结束标签......

有人有想法么？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-16T10:53:23.307

当您使用 '\r\n' 而不是 unix 格式 '\n' 以 PC/Windows 格式保存 vHost 文件时，通常会发生这种情况。以 unix 格式再次保存这些文件可以解决问题。

此外，如果存在，还需要删除字节顺序标记 (BOM)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T21:43:35.603

我通过将 apache2/sites-available/default 和 /apache2/ports.conf 的内容合并到 apache2/apache2.conf 并删除包含这些文件的行来解决这个问题。

显然，包含这些其他文件的顺序有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-16T09:39:18.763

当您的配置文件有[BOM](https://en.wikipedia.org/wiki/Byte_order_mark)时，apache2 会显示此奇怪的消息。

大多数工具会隐藏/忽略 BOM，但您可以使用命令轻松检测到它`file`：

```
% file /etc/apache2/conf-available/maxclients.conf 
/etc/apache2/conf-available/maxclients.conf: UTF-8 Unicode (with BOM) text 
```

# jquery - 带有上一个和下一个图像的免费 jQuery 滑块滑到一边？

> ID：14670040
> 
> 赞同：2
> 
> 时间：2013-02-03T06:23:50.150
> 
> 标签：jquery, plugins

基本上，它看起来像这样：

![在此处输入图像描述](../Images/14512c651ad40449d309b10b0630c6a6.png)

我之前问过一个类似的[问题](https://stackoverflow.com/questions/14640473/free-jquery-slider-with-the-images-showing-on-the-sides)，但我只能找到“旋转器”：图像旋转而不是滑动到一边。

有人知道有这个功能的插件吗？

# facebook - 如果我对它们进行硬编码，Facebook 只会获取我的元标记。如果我从 smarty 传递变量，它不会读取它们

> ID：14670041
> 
> 赞同：1
> 
> 时间：2013-02-03T06:24:14.250
> 
> 标签：facebook, smarty, prestashop

我在网上商店工作。它是用 Prestashop 1.3.6 制作的 我正在尝试在产品页面中嵌入一个喜欢和发送按钮。我已经设置了我的 og 标签，并使用调试器对其进行了测试。我的问题是标签只有在我在 header.tpl 中硬编码时才会被 Facebook 读取。

如果我传递 smarty 变量，则标签显示为空。这有点让我发疯，因为我找不到有同样问题的人。

在两种情况下（硬编码和可变），标签都会出现在浏览器源代码中。但是只有当我对它们进行硬编码时，facebook才会读取它们。

这是我网站的链接，也许你能弄清楚。我不明白的是，在放置 og:tags 之前，facebook 将默认标题和描述标签从我的页面中移除。这些标签是通过变量传递的。所以我真的不明白为什么它不起作用。有任何想法吗 ？

提前非常感谢！

# c# - 如何在数据库中存储 system.net.mail 密码

> ID：14670058
> 
> 赞同：0
> 
> 时间：2013-02-03T06:28:35.797
> 
> 标签：c#, asp.net, database, password-encryption, system.net.mail

我需要存储将与 system.net.mail 一起使用的电子邮件密码。这些需要以纯文本形式检索和发送，但我不想将它们存储为纯文本。这与 Intranet 的安全性无关，我只是不希望结果在 CMS 中以纯文本形式显示。

我读过很多文章说应该使用 SHA1 来存储密码。从我读过的内容来看，散列并不好，因为无法检索纯文本。

我目前正在尝试这种方法：

```
public static string EncodePasswordToBase64(string password)
    {
        try
        {
            byte[] encData_byte = new byte[password.Length];
            encData_byte = System.Text.Encoding.UTF8.GetBytes(password);
            string encodedData = Convert.ToBase64String(encData_byte);
            return encodedData;
        }
        catch (Exception ex)
        {
            throw new Exception("Error in base64Encode" + ex.Message);
        }
    } 
```

和

```
public static string DecodeFrom64(string encodedData)
    {
        System.Text.UTF8Encoding encoder = new System.Text.UTF8Encoding();
        System.Text.Decoder utf8Decode = encoder.GetDecoder();
        byte[] todecode_byte = Convert.FromBase64String(encodedData);
        int charCount = utf8Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);
        char[] decoded_char = new char[charCount];
        utf8Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);
        string result = new String(decoded_char);
        return result;
    } 
```

但我似乎无法在我的数据库中找到正确的数据类型来存储值。它当前设置为*nvarchar(MAX)。*

单元格内容显示如下（每个值之间有空格）：

> QXB j LWV w MXB =

奇怪的是，当我单击并输入单元格以复制数据时，我得到的只是：

> 问

我应该为此列使用什么数据类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:28:10.707

好吧，你说得对，*散列*不是正确的方法。你真正想要使用的是**[对称加密](http://en.wikipedia.org/wiki/Symmetric-key_algorithm)**，它允许你加密数据库中的数据，然后在你的主程序中解密它。

AES 是推荐的标准。[这是一个](https://stackoverflow.com/questions/13901529/symmetric-encryption-aes-is-saving-the-iv-and-salt-alongside-the-encrypted-da)如何在 C# 中使用的示例。

我会阅读更多关于如何正确选择 IV 以避免[常见陷阱](https://codereview.stackexchange.com/a/14893)的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:41:29.613

你可以使用这样的东西..

//用于加密字符串。

```
public static string Encrypt(string toEncrypt, bool useHashing)
    {
        byte[] keyArray;
        byte[] toEncryptArray = UTF8Encoding.UTF8.GetBytes(toEncrypt);
        string key = "UglyRandomKeyLike-lkj54923c478";
        if (useHashing)
        {
            MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
            keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
            hashmd5.Clear();
        }
        else
            keyArray = UTF8Encoding.UTF8.GetBytes(key);

        TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
        tdes.Key = keyArray;
        tdes.Mode = CipherMode.ECB;
        tdes.Padding = PaddingMode.PKCS7;

        ICryptoTransform cTransform = tdes.CreateEncryptor();
        byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length);
        tdes.Clear();
        return Convert.ToBase64String(resultArray, 0, resultArray.Length);
    } 
```

// 解密字符串

```
public static string Decrypt(string cipherString, bool useHashing)
    {
        byte[] keyArray;
        byte[] toEncryptArray = Convert.FromBase64String(cipherString);
        string key = "UglyRandomKeyLike-lkj54923c478";
        if (useHashing)
        {
            MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
            keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
            hashmd5.Clear();
        }
        else
            keyArray = UTF8Encoding.UTF8.GetBytes(key);

        TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
        tdes.Key = keyArray;
        tdes.Mode = CipherMode.ECB;
        tdes.Padding = PaddingMode.PKCS7;

        ICryptoTransform cTransform = tdes.CreateDecryptor();
        byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length);

        tdes.Clear();
        return UTF8Encoding.UTF8.GetString(resultArray);
    } 
```

上述方法将加密您的密码，您可以将其存储在数据库的 varchar 字段中。第二种方法采用加密密码并以普通字符串返回我希望这就是您要查找的内容。我无法对您的问题发表评论。

# hadoop - 分组后从包中删除空值？

> ID：14670061
> 
> 赞同：1
> 
> 时间：2013-02-03T06:29:05.127
> 
> 标签：hadoop, apache-pig

我有以下内容：

（id：int，名称：chararray）

我按 id 分组，创建一个名称包。我看到在名称包中，可能有一个空值。如何从包中删除空值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:43:46.327

您可以使用嵌套在 FOREACH 中的 FILTER 从 GROUP BY 创建的包中删除元组。

```
inpt = LOAD '...' as (id: int, names: chararray);
grp = GROUP inpt BY id;
result = FOREACH grp {
   no_nulls = FILTER inpt BY names is not null;
  GENERATE group, no_nulls;
}; 
```

或者只是在分组之前过滤空名称：

```
inpt = LOAD '...' as (id: int, names: chararray);
no_nulls = FILTER input BY names is not null;
grp = GROUP no_nulls BY id; 
```

# php - CSV 文件中的特殊字符加载到 mysql 数据库

> ID：14670062
> 
> 赞同：0
> 
> 时间：2013-02-03T06:29:30.393
> 
> 标签：php, csv, utf-8, bulkloader

我有一个脚本，可以将 CSV 文件中的数据导入 mysql 数据库；

CSV 有这样的字符串

```
somethingcô-SOMETHING 
```

见ô,

现在，当我将它导入数据库时​​，它只保存“某事”部分。

我尝试了很多东西，htmleitities、mysql_real_escape_string 等，但没有一个将字符串转换为 UTF-8。

我试图手动转义，使用大量特殊字符，然后我发现然后读取文件“ô”不会读为“ô”，而是其他内容。

对此的任何帮助都将是巨大的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:55:28.737

这里有两件事浮现在脑海

1.  你在有问题的桌子上使用什么排序规则？
2.  使用从外部世界进入您的数据库的这种性质的数据总是有风险的。为什么不直接获取传入的原始字符串并在存储之前对其进行 base64_encode 呢？不用说，当您想使用该字符串时，您必须首先对其进行 base64_decode。

# jquery - 哪些代码可能会干扰页面的现有 jquery/CSS

> ID：14670065
> 
> 赞同：0
> 
> 时间：2013-02-03T06:31:07.433
> 
> 标签：jquery, html, css

我正在使用[Reveal.js创建一个在线演示文稿](http://lab.hakim.se/reveal-js/#/)

默认情况下，内容位于屏幕中间。我下载了源代码，在我的电脑上用记事本制作了我的演示文稿，非常完美。但是，当我将演示文稿放到我的网站上时，内容是水平居中的，但不是垂直的。

尽管源代码完全相同，但输出不同。这里是[output](http://derpina.ilovetrolls.org/2013/02/test.html)。内容不是垂直居中的。我尝试手动放置

```
 <div style="position: absolute;      
     top: 50%"
         >text</div> 
```

但输出远不及 50%……（它大约在顶部：40px，左：50px 左右（一些不相关的奇怪位置）

任何故障排除提示？

奇怪的是，当我将我在记事本中使用的源代码复制粘贴到我的电脑并在线粘贴时，输出不同。

这是[http://jsfiddle.net/uSGe4/](http://jsfiddle.net/uSGe4/)的工作代码。

内容默认垂直居中。但是当我在博客上粘贴完全相同的代码时，内容不是垂直居中的。[http://derpina.ivetrolls.org/2013/02/test.html#/](http://derpina.ilovetrolls.org/2013/02/test.html#/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:04:27.650

删除这个：

```
 .reveal.center,.reveal.center .slides,.reveal.center .slides section{
            min-height:auto!important
    } 
```

似乎在那之后工作

# c - 堆栈损坏的数组/分段错误？在 C 中

> ID：14670068
> 
> 赞同：-1
> 
> 时间：2013-02-03T06:32:04.253
> 
> 标签：c, arrays, segmentation-fault

这是一个简单的代码，它希望我搜索加起来等于目标值的整数对，但我看不出它有什么问题。请帮忙？！

```
#include<stdio.h>

int main(void) {
    int sortedarr[20], targetsum, mysum, i=0, k=19, count=0; /* Declaring variables */

    printf("\nEnter target value sum: ");
    scanf("%d", &targetsum);
    printf("Enter sorted array: ");
    scanf("%s", &sortedarr[20]);

    while(k>i) {
        mysum=sortedarr[k]+sortedarr[i];

        if(mysum==targetsum) {
            printf("(%d, %d)", sortedarr[i], sortedarr[k]);
            i++;
            k+=-1;
            count++;
        }
        else if(mysum>targetsum)
            k+=-1;
        else if(mysum<targetsum)
            i++;
    }

    if(count==0)
        printf("No pairs of integers");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:38:31.787

`scanf("%s", &sortedarr[20])`尝试将*字符串*读入`sortedarr`，从*最后一个*元素开始。一旦您的用户输入了多个`sizeof(int)`字符，这可能会导致分段错误。

你想要做的是这样的：

```
for (c=0; c < 20; c++) {
  scanf("%d", &sortedarr[c]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:06:33.880

scanf("%s", &sortedarr[20]);

这会超出数组的末尾写入，并且可能会破坏 targetsum。在先前的答案中，当循环最多运行到 19 时，避免了这个错误。

所以这个说法是错误的：“da string into sortedarr，从最后一个元素开始。”

在最后一个元素“之后”访问该数组。这可能会或可能不会破坏任何东西。这是无拘无束的。所以一切都可以而且将会发生。

# .net - FileLoadException 故障排除

> ID：14670070
> 
> 赞同：0
> 
> 时间：2013-02-03T06:32:32.707
> 
> 标签：.net

我使用 System.Xaml 序列化工作流，并且我在来自 System.Xaml.dll 程序集的测试类中收到以下异常。这很奇怪，因为它以前一直在工作，但突然停止工作。我猜我可能已经安装了一些导致冲突的新程序集。我的问题是如何确定尝试加载哪个程序集，以及加载时预期的版本。我猜 Microsoft.Activities 引用的 System.Workflow.Activities 版本不正确，但我不知道它需要哪个版本。

System.IO.FileLoadException：无法加载文件或程序集“Microsoft.Activities，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

在 System.Signature.GetSignature(Void* pCorSig, Int32 cCorSig, RuntimeFieldHandleInternal fieldHandle, IRuntimeMethodInfo methodHandle, RuntimeType declaringType) 在 System.Reflection.RuntimeMethodInfo.get_Signature() 在 System.Reflection.RuntimeMethodInfo.GetParametersNoCopy() 在 System.Reflection.RuntimePropertyInfo。 GetIndexParametersNoCopy() 在 System.Reflection.RuntimePropertyInfo.GetIndexParameters() 在 System.Xaml.Schema.TypeReflector.FilterProperties(PropertyInfo[] propList, List `1 knownMembers, Boolean skipKnownNegatives) at System.Xaml.Schema.TypeReflector.LookupAllMembers(ref ICollection`1 newProperties, ref ICollection`1 newEvents, ref List`1 knownMembers) 在 System.Xaml.Xaml.XamlType.GetAllMembers() 在 System.Xaml.XamlObjectReader.ObjectMarkupInfo.GetXamlSerializableProperties(XamlType 类型，SerializerContext 上下文) 在 System.Xaml.XamlObjectReader.ObjectMarkupInfo.AddRecordMembers System.Xaml.XamlObjectReader.ObjectMarkupInfo.AddRecordMembers（对象值，SerializerContext 上下文，TypeConverter 转换器）处的（对象值，SerializerContext 上下文，ParameterInfo[] methodParameters，XamlType xamlType）在 System.Xaml.XamlObjectReader.ObjectMarkupInfo.ForObjectInternal（对象值，SerializerContext上下文，TypeConverter 转换器）在 System.Xaml.XamlObjectReader.ObjectMarkupInfo.ForObject（对象值，SerializerContext 上下文，TypeConverter instanceConverter，布尔 isRoot）在 System.Xaml.XamlObjectReader。System.Xaml.XamlObjectReader.MemberMarkupInfo.ForSequence 处的 MemberMarkupInfo.ForSequenceItems（对象 sourceOrValue，XamlMember 属性，XamlType xamlType，SerializerContext 上下文，布尔 allowReadOnly）（对象源，XamlMember 属性，SerializerContext 上下文，布尔 isAttachable）

持续了很长时间……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:09:50.293

我能够通过下载最新版本的工作流管理器来解决这个问题。我想我在没有更新这个库的情况下更新了 Visual Studio 2012。

# java - Java class.getResourceAsStream() 返回不正确的字节

> ID：14670071
> 
> 赞同：3
> 
> 时间：2013-02-03T06:33:12.003
> 
> 标签：java, maven, resources, stream, classpath

我刚刚遇到了一个非常奇怪的 getResourceAsStream() 问题。

在我的产品项目 JUnit 测试中，我使用 getResourceAsStream() 读取测试数据，我发现 getResourceAsStream() 有时会替换一些字节：

```
byte[] fileBytes = FileUtils.readFileToByteArray(new File(
    "resources/test/parser/test-short-enc.xml"));

printBytes(fileBytes);

byte[] classPathBytes = IOUtils.toByteArray(ParserTest.class
    .getResourceAsStream("/test/parser/test-short-enc.xml"))

printBytes(classPathBytes); 
```

在此项目中，输出如下所示：

D0 9A D1 80 D0 B8 D0 BC D0 B8 D0 BD D0 B0 D0 BB D0 B8 **D1 81** D1 82 D0 B8 D0 BA D0 B0

D0 9A D1 80 D0 B8 D0 BC D0 B8 D0 BD D0 B0 D0 BB D0 B8 **D1 3F** D1 82 D0 B8 D0 BA D0 B0

之后，我决定创建一个小型的 bug 展示项目，并将其托管在 Github 作为示例。这是链接：[https ://github.com/snowindy/getResourceAsStream-Bug](https://github.com/snowindy/getResourceAsStream-Bug)

我基本上复制了所需的代码，运行后，我看不到问题重现：

D0 9A D1 80 D0 B8 D0 BC D0 B8 D0 BD D0 B0 D0 BB D0 B8 **D1 81** D1 82 D0 B8 D0 BA D0 B0

D0 9A D1 80 D0 B8 D0 BC D0 B8 D0 BD D0 B0 D0 BB D0 B8 **D1 81** D1 82 D0 B8 D0 BA D0 B0

printBytes 函数如下所示：

```
public static void printBytes(byte[] bv) {
    System.out.println();
    for (byte b : bv) {
        System.out.print(' ');
        System.out.print(String.format("%02X", b));
    }
} 
```

*会是什么？？*

我使用 eclipse，UTF-8 工作空间编码，文件包含西里尔字母“Криминалистика”，它是一个 UTF-8 无 BOM 文件。

我对这两个项目都使用 JavaSE-1.6 (jdk1.6.0_29)，我有 Windows 7 操作系统，windows-1252 系统编码。

**更新**

我终于能够重现该错误。我更新了项目，以便您可以对其进行测试：[https ://github.com/snowindy/getResourceAsStream-Bug](https://github.com/snowindy/getResourceAsStream-Bug)

仅当您在 maven pom.xml 中有此代码时，才会出现该错误。这意味着它是特定于 Maven 的

```
<build>
    <sourceDirectory>src</sourceDirectory>
    <resources>
        <resource>
            <directory>resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:49:43.087

好的，我有答案了。

此配置解决了问题：

```
<project>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
... 
```

我得到了这个答案的启发：[https ://stackoverflow.com/a/8979120/792313](https://stackoverflow.com/a/8979120/792313)

# c - 来自麦克风的连续语音识别pocketsphinx

> ID：14670072
> 
> 赞同：3
> 
> 时间：2013-02-03T06:33:22.923
> 
> 标签：c, qt, speech-recognition, speech-to-text, cmusphinx

如何使用pocketsphinx从麦克风执行连续语音识别。如何在C中使用gstreamer插件api？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T09:43:51.540

> 如何使用pocketsphinx从麦克风执行连续语音识别

为此有几个 API。其中之一是普通的 pocketsphinx API。您可以阅读 pocketsphinx/src/continuous.c 中的 pocketsphinx_continuous 源代码以了解如何使用它。您可以将 Continuous.c 中的源代码包含到您的应用程序中。

> 如何在 C 中使用 gstreamer 插件 api？

如果您想使用 gstreamer，您首先需要学习 gstreamer 基础知识。在这里您可以找到一些 gstreamer 文档。

[http://docs.gstreamer.com/display/GstSDK/Basic+tutorials](http://docs.gstreamer.com/display/GstSDK/Basic+tutorials)

不幸的是，很难在一个响应中涵盖所有内容，但项目的基本顺序是：

1.  使用音频 src、音频重采样、vader 和 pocketsphinx 创建管道
2.  连接到 pocketsphinx 插件信号，信号将为您提供识别的数据
3.  启动管道和主循环。
4.  等待识别的数据信号并执行所需的操作。

它与pocketsphinx/src/gst-plugin/livedemo.py 中的python 示例没有什么不同，只是您需要从C 中调用相同的方法。

# c - 是否可以使用 isdigit() 函数测试浮点数？

> ID：14670073
> 
> 赞同：1
> 
> 时间：2013-02-03T06:33:56.020
> 
> 标签：c

我需要询问用户的输入，他/她应该有能力写一个浮点数，我需要对这两个数字进行一些计算，但我在`isdigit`测试后遇到了问题......即使我输入一个整数它去`continue;`

这是我的代码：

```
#include <stdio.h>
#include <ctype.h>
char get_choice(void);
float calc(float number1, float number2);

int main()
{

    float userNum1;
    float userNum2;
    get_choice();

    printf("Please enter a number:\n");
    while ((scanf("%f", &userNum1)) == 1)
    {
        if (!isdigit(userNum1))
        {
            printf("Please enter a number:\n");
            continue;
        }

        printf("Please enter another number:\n");
        while ((scanf("%f", &userNum2) == 1))
        {
            if (!isdigit(userNum2))
            {
                printf("Please enter a number:/n");
                continue;
            }
            else if (userNum2 == '0')
            {
                printf("Please enter a numer higher than 0:\n");
                continue;
            }

        }

    }
    calc(userNum1, userNum2);
    return 0;
}

float calc(float number1, float number2)

{
    int answer;

    switch (get_choice())
        {
            case 'a':
                answer = number1 + number2;
                break;
            case 's':
                answer = number1 - number2;
                break;
            case 'm':
                answer = number1 * number2;
                break;
            case 'd':
                answer = number1 / number2;
                break;
        }
    return answer;
}

char get_choice(void)

{
    int choice;

    printf("Enter the operation of your choice:\n");
    printf("a. add        s. subtract\n");
    printf("m. multiply   d. divide\n");
    printf("q. quit\n");

    while ((choice = getchar()) == 1 && choice != 'q')
    {

        if (choice != 'a' || choice != 's' || choice != 'm' || choice != 'd')
        {
            printf("Enter the operation of your choice:\n");
            printf("a. add        s. subtract\n");
            printf("m. multiply   d. divide\n");
            printf("q. quit\n");
            continue;
        }

    }
    return choice;
} 
```

也为上传功能道歉，但由于我是新手，问题可能就在那里。干杯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T06:45:53.793

`isDigit()`只需要一个字符输入。检查输入是否正确的最佳方法是使用

```
if(scanf("%f", &userNum) != 1) {
    // Handle item not float here
} 
```

由于`scanf()`将返回正确扫描的项目数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T06:55:48.633

IsDigit() 函数仅检查字符是否为十进制数字。

让我们说：

```
int isdigit ( int c ); 
```

检查 c 是否为十进制数字字符。

十进制数字可以是：0 1 2 3 4 5 6 7 8 9。

如果 c 是十进制数字，isdigit() 函数将返回非零值；否则，它将返回 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T07:44:29.697

你也可以尝试这样的事情：

```
int get_float(char *val, float *F){
    char *eptr;
    float f;
    errno = 0;
    f = strtof(val, &eptr);
    if(eptr != val && errno != ERANGE){
        *F = f;
        return 1;
    }
    return 0; 
```

如果`val`指向浮点数函数返回 1 并将此数字放入`*F`，否则返回 0。

# mysql - 清除MySQL通用日志表，安全吗？

> ID：14670075
> 
> 赞同：19
> 
> 时间：2013-02-03T06:34:10.073
> 
> 标签：mysql, logging

我正在使用的服务器，一般的 mysql 日志表占用了将近 200GB 的空间，这是巨大的。所以，我打算用以下方法清除它：

```
TRUNCATE table mysql.general_log 
```

可以吗？它会引起任何问题吗？我担心服务器是实时的大型应用程序。谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2017-12-07T05:58:59.857

它肯定会导致问题，除非它被禁用然后你截断。如果在启用时截断。如果表很大，截断将锁定表，因为 mysql.general_log 引擎是 CSV 或 MyISAM ，同时新创建的条目将尝试写入通用日志表导致锁定。所以为了安全起见

```
mysql> SET GLOBAL general_log=OFF;
mysql> TRUNCATE table mysql.general_log;
mysql> SET GLOBAL general_log=ON; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T14:35:42.563

它不会引起问题，但您会丢失所有旧的日志条目，因此 Ravindra 的上述建议很好。

您可以使用以下方法进行备份：

mysqldump -p --lock_tables=false mysql general_log > genlog.sql

您是否需要始终保持常规登录？我通常只在解决性能问题时才打开它。MySQL 在那里记录一切（客户端连接、断开连接和每个语句）。在大多数系统中，日志会很快变得非常大。这也有一些性能开销。

# c# - 性能平均数据集

> ID：14670079
> 
> 赞同：-1
> 
> 时间：2013-02-03T06:35:30.907
> 
> 标签：c#, windows, multithreading, performance

我有一个守护进程，他每 2 分钟从一个服务器从 31 个 EEG 通道获取一个包含 X 量数据的文件，在开始获取文件的时间以及将平均数据写入磁盘的时间写入 MySQL 数据库，以及我发现有 Y 时间看起来像是处理文件的平均时间，我遇到的问题是，有些运行时间低于**D 时间的一半：**结果是一样的......进程正在运行在线程中，所以，我的问题是：

1.  我是否应该假设随机操作系统为该线程分配了一个完整的空任务处理器，并且运行速度是其他线程的两倍？

2.  我怎么能分辨出区别？

运行时间低于相对平均时间的一半

*   第一个节点：24/600 次运行。
*   第二个节点：50/600 次运行。

节点没有任何其他进程正在运行。

试图在进程本身之间强制垃圾收集器释放内存，结果相同。

这是水平轴上的一个节点运行数，与以秒为单位的时间。跑了

![是时候结束这个过程了](../Images/8863f63eced65ed143a2f15c06f426b2.png)

（平均 87.13）

另一个节点上的第二次测试运行如下：

![第二节点测试](../Images/2d02b079f382f37e6316457961fb70d0.png)

（平均=85.5）

相对平均慢一点，但随机 1/2 时间具有更好的平均性能。

如果您不赞成至少发表评论，为什么不是一个有效的问题，所以我不会再问这样的问题了 ¬_¬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:25:09.487

我不知道这是否真的是一个争用问题，比如 usr answer，但它正在编写答案文件，我使用的字符串缓冲区太慢而无法执行数据采集，我从：

```
 System.IO.StreamWriter sfile =   new System.IO.StreamWriter(path+file);
    for (int x = 0; x != chans; x++){
       for (int xx = 0; xx != maxsize; xx++){
           sql += data[x, xx] + "," + xx.ToString() + "," + tes + "," + x.ToString()+"\n";
       }
       sfile.Write(sql);
       sql = "";
     } 
```

到：

```
 System.IO.StreamWriter sfile =   new System.IO.StreamWriter(path+file);
    for (int x = 0; x != chans; x++){
       for (int xx = 0; xx != maxsize; xx++){
           sfile.Write(data[x, xx] + "," + xx.ToString() + "," + tes + "," + x.ToString()+"\n");
       }
     } 
```

看起来缓冲区不是一个很好的选择......现在所有测试都在大约**强文本** 16秒内运行。而不是 35（非常幸运的状态）到 92 秒（平均）

# c# - 如何比较两个文本框，如果两者都是空的，如何在c#中打印一个消息框

> ID：14670086
> 
> 赞同：0
> 
> 时间：2013-02-03T06:36:24.577
> 
> 标签：c#

我在这里比较两个文本框，如果两者都为空，则尝试打印错误消息

```
 int ina=int.Parse(txttea.Text);
         int inb = int.Parse(txtcoffee.Text);
         int inc=0, ind=0;
         if(this.txttea.Text=="" && this.txtcoffee.Text=="")
          {
            MessageBox.Show("select a item");
            txttea.Focus();
          } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:39:11.447

而不是`&&`你需要`||`的：

```
if(this.txttea.Text=="" && this.txtcoffee.Text=="") 
```

注意：问题与题目不符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:33:28.870

您的问题是如何验证`TextBox`if 是*empty*还是*white space*。

[`String.IsNullOrWhiteSpace Method`](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)如果您使用的是 .Net 3.5 或更高版本，最好的解决方法是使用

```
 if(string.IsNullOrWhiteSpace(txttea.Text) || 
    string.IsNullOrWhiteSpace(txtcoffee.Text))
          {
            MessageBox.Show("select a item");
            txttea.Focus();
            return;
          } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T06:50:43.870

应如下所示，请编辑您的问题以匹配下面提供的答案

```
 int ina=int.Parse(txttea.Text);
 int inb = int.Parse(txtcoffee.Text);
 int inc=0, ind=0;
 if(this.txttea.Text=="" || this.txtcoffee.Text=="")
 {
     MessageBox.Show("select an item");
     txttea.Focus();
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T07:03:13.373

解析空字符串`int.Parse`会给你一个例外。我的意思是：`int.Parse("")`结果：`Input string was not in a correct format.`

要解决该问题，请[`TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)改用：

```
int ina;
int inb;
if (int.TryParse(txttea.Text, out ina) && int.TryParse(txtcoffee.Text, out inb))
{
    //Ok, more code here
}
else
{
    //got a wrong format, MessageBox.Show or whatever goes here
} 
```

当然，您也可以单独测试它们[先 ina 然后 inb，反之亦然]：

```
int ina;
if (int.TryParse(txttea.Text, out ina))
{
    int inb;
    if (int.TryParse(txtcoffee.Text, out inb))
    {
        //Ok, more code here
    }
    else
    {
        //got a wrong format, MessageBox.Show or whatever goes here
    }
}
else
{
    //got a wrong format, MessageBox.Show or whatever goes here
} 
```

现在，关于比较空字符串，如果您想要在两者都为空时的消息：

```
if(this.txttea.Text == "" && this.txtcoffee.Text == "")
{
    MessageBox.Show("select a item");
    txttea.Focus();
} 
```

另一方面，如果您想在 AT LEAST ONE 为空时收到消息：

```
if(this.txttea.Text == "" || this.txtcoffee.Text == "")
{
    MessageBox.Show("select a item");
    txttea.Focus();
} 
```

# spring - 在 mongo 中存储 spring 集成路线以获得动态

> ID：14670097
> 
> 赞同：0
> 
> 时间：2013-02-03T06:38:59.277
> 
> 标签：spring, spring-integration

我有一个在多个组件之间连接的 mongo 存储库。我有一个传统的 java 应用程序，它读取 mongo 存储库并通过动态调用适当的 java 类来执行路由、转换。我打算将其移至 spring 但不想静态声明路由，因为这非常不灵活。是否有可能确保 spring 可以从 mongo 引用路由和转换并执行路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:30:43.237

尚不完全清楚您在寻找什么，但是，是的，创建自定义路由器、变压器和/或其他组件很容易。

# java - 将 JPanel 刷新为新的

> ID：14670100
> 
> 赞同：2
> 
> 时间：2013-02-03T06:39:33.287
> 
> 标签：java, swing, jpanel, layout-manager

例如，如果您单击 2 链接，是否可以有一个框架，该框架中的新面板刷新到下一个面板。

有没有简单的代码？

下图更好地说明了这一点。

![在此处输入图像描述](../Images/c659f9e75ff9ccda7b73ce77dafd480a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T06:42:26.753

你会想要使用[CardLayout](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html)，这就是它的设计目的。它将允许您根据需要切换不同的组件

查看[如何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)了解更多信息

> 有没有简单的代码？

这有点主观，但我想说`CardLayout`的是可能的孤子中最简单的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T06:56:12.707

试试这个，

```
 MainPanel.revalidate();
            MainPanel.add(SecondPanel);
            MainPanel.revalidate();
            firstPanel.setVisible(false);
            SecondPanel.setVisible(true);
            validate(); 
```

# python - 等价类的优化解决方案

> ID：14670103
> 
> 赞同：1
> 
> 时间：2013-02-03T06:39:52.603
> 
> 标签：python, algorithm, optimization, equality

假设有许多大写字母指定的测试用例，括号中的字母表示这些是相等的测试用例。我想要最小的字母 X。 **但是相等的测试用例没有传递关系。** 即（A,B）（A,D）不能得到（B，D）。

所以，当输入是： (A,B) (A,C) (A,D) (E) 显然输出应该是 (A,E) 而不是 (B,C,D,E)

当输入是： (A,B) (A,C) (A,D) (B,E) (C,F) (D,G) 在这种情况下输出应该是 (B,C,D) 而不是 (A ,E,FG)。

当输入为 (A,B,C) (B,D) (C,D) 时，输出为 (B,C) 或 (A,D)。

十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:02:58.753

这是一个可以为分支定界解决方案制定的优化问题。见： [http ://www.sce.carleton.ca/faculty/chinneck/po/Chapter12.pdf](http://www.sce.carleton.ca/faculty/chinneck/po/Chapter12.pdf)

# java - 确定等距游戏和不规则形状的绘制顺序（Java）

> ID：14670105
> 
> 赞同：2
> 
> 时间：2013-02-03T06:40:14.480
> 
> 标签：java, math, drawing, rendering, isometric

我在确定应该渲染对象的顺序时遇到了一些独特的麻烦，尤其是在玩家在墙后的情况下。我将尝试彻底解释，因此请准备大量信息。

我将事物从前渲染（这里推荐：[绘制等距游戏世界](https://stackoverflow.com/questions/892811/drawing-isometric-game-worlds)），也就是说，在大多数情况下，足够简单。我使用一个简单的比较器确定后面的内容：

```
private Comparator<Entity> spriteSorter = new Comparator<Entity>(){
    public int compare(Entity e1, Entity e2){
        if(e1.getPhysics().getY() > e2.getPhysics().getY()) return 1;
        if(e1.getPhysics().getY() < e2.getPhysics().getY())return -1;
        return 0;
    }
}; 
```

这使用实体的命中框来确定其渲染顺序，并且对于具有矩形命中框的实体（几乎所有我的角色都这样做），它可以完美地工作。实际的绘图调用如下所示：

```
ArrayList<Entity> spriteList = new ArrayList<>();
    spriteList.add(player);

    for(int i = 0; i < walls.size(); i++){
        spriteList.add(walls.get(i));
    }

    Collections.sort(spriteList, spriteSorter);
        for(int i = 0; i < spriteList.size(); i++){
        spriteList.get(i).render(g);
    } 
```

但这就是事情变得棘手的地方，我的所有角色都使用 Rectangle 的实例，并且它们的排序完全没有问题，但是我的墙壁（由于等距游戏的性质）不能使用矩形，因此使用 Polygon适合他们的尺寸。见图片：![这就是玩家和墙壁的碰撞箱的样子。](../Images/2ec2308458231ff6a38894f32c5ec1e6.png)

我必须使用多边形，因为如果我使用矩形，我会在墙壁附近得到一个愚蠢的无法通过的空间，如下所示： ![愚蠢的。](../Images/b36459dcd16b20eb5333ea8af6dfdeed.png)

不幸的是，由于多边形的性质，没有立即明显的测试来确定玩家是在墙的前面还是后面。第 3 行似乎是一个可能的测试候选人，但在墙的两边都有两个三角形可以通过`player.getPhysics.getY() > wall.getPhysics.getY()`测试并将他标记为在前面，而他可能同时在墙的前面和后面。

![格子](../Images/b1099aab1dedee9719e468986f6bd220.png)

那么，我如何设计一个测试来告诉我他什么时候在对角线后面呢？Java 中形状和多边形的本质似乎限制了我很多，但我确信有办法做到这一点。我玩过很多点，getCenterY() 已经相当接近了，但它仍然不完美。我尝试过的所有方法出现的问题案例如下所示：

![其实在后面，在前面渲染](../Images/fe498cd91adb0443e22b1814f9220a61.png)其实在后面，在前面渲染

或这个：

![其实在前面，渲染在后面](../Images/9ebf3504c019cb96037bf5187c6ba59b.png)实际上在前面，在后面渲染。

有人有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:46:01.197

假设你的角色位于 (x, y) 并且墙壁有一条从 (a, b) 到 (c, d) 的中心线。然后你可以使用行列式的符号

```
| x a c |
| y b d | = ab + ad + cy - ay - cb - xd
| 1 1 1 | 
```

来决定由这三个点组成的三角形是顺时针还是逆时针。您可以为相机而不是角色计算类似的行列式，并将结果相乘。如果产品是*正面的，*那么相机和人物在墙的*同一侧*，你想在墙*后*画人物。如果产品是*负片*，那么相机和角色在*对面*，你想在墙*前画角色。*

这种简化假设您的墙是线或线段，而不是旋转的矩形，但除非您的玩家实际上可以在墙内移动*，*否则差异应该无关紧要，除非相机看起来非常正面朝向墙的短边。因此，也许您毕竟想要一个大的矩形边界框来进行粗略排序，并且仅当玩家在这个（仍然可以通过的）边界框内时才使用上述内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T10:30:35.190

没那么容易！！！！为什么？因为您在场景中包含了其他精灵（不仅是 2 个。例如，您需要有 2 个玩家 + 1 个墙）。你如何订购它们进行渲染？您必须始终使用分别确定“前、后、后”位置的 x、y、z 工作。

**注意**：在对问题进行了 2（硬）个月的分析后，我终于为我的新 cocos2d-js 游戏找到并实现了“正确的渲染绘图”。解决方案包括为每个图块（易受影响的）映射哪些精灵是“前、后和后”。一旦这样做，您就可以按照“递归逻辑”绘制它们。

# android - 在android中执行setFocusable（false）后如何检索thr Focus

> ID：14670109
> 
> 赞同：2
> 
> 时间：2013-02-03T06:40:53.347
> 
> 标签：android, focus, android-edittext

我在我的项目中使用了 EditText。在 EditText 中输入值后，我想单击一个按钮。如果我单击按钮 EditText 将失去它的焦点。

```
load.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
// TODO Auto-generated method stub
   description.setFocusable(false);
   }
} 
```

如果我想更改该 EditText 的值意味着我能做什么，我做了以下操作，但它没有奏效，它无法获得焦点。

```
focus.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
// TODO Auto-generated method stub
   description.setFocusable(true);
   }
} 
```

提出任何建议来实现这一目标......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T07:11:15.703

记得打电话`setFocusableInTouchMode`：

```
focus.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        description.setFocusable(true);
        description.setFocusableInTouchMode(true);
        description.requestFocus(); 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T06:46:06.837

您将需要调用[View.requestFocus()](http://developer.android.com/reference/android/view/View.html#requestFocus%28%29)将焦点重新设置在 EditText 上：

```
focus.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
// TODO Auto-generated method stub
   description.setFocusable(true);
   description.requestFocus(); //<<< get Focus on EditText
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T06:53:21.473

```
focus.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
// TODO Auto-generated method stub
   description.setFocusable(true);// or use description.setEnable(true);
   description.requestFocus(); //<<< get Focus on EditText
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-21T20:17:37.727

尝试方法**setEnabled(boolean b)** 而不是 **setFocusable(boolean b)**

# hadoop - 安装 Hadoop 后无法识别更新主机的 .xml/文件

> ID：14670111
> 
> 赞同：2
> 
> 时间：2013-02-03T06:41:10.470
> 
> 标签：hadoop

`hadoop namenode -format`在安装 Hadoop 并执行命令后，我遇到了下面提到的错误。根据显示的日志，我发现我需要更新配置中的“主机”。但是，我无法找到需要更新的配置文件 (.xml) 的确切位置。

我在单个节点上的 Fedora 上安装。我正在寻求您的帮助来解决这个问题。请指出我在调试时可能有用的任何特定链接或文档。

[hadoop@hadoop ~]$ hadoop namenode -format

```
Warning: $HADOOP_HOME is deprecated.
13/02/03 11:33:09 INFO namenode.NameNode: STARTUP_MSG: 
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = java.net.UnknownHostException: hadoop: hadoop
13/02/03 11:34:27 INFO namenode.NameNode: SHUTDOWN_MSG: : 
SHUTDOWN_MSG: Shutting down NameNode at java.net.UnknownHostException: hadoop: hadoop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-22T23:07:38.700

配置文件在`$HADOOP_HOME/etc/hadoop`，`$HADOOP_HOME`大概在哪里`/usr/local/hadoop`。您的主机名可能有多个文件，您应该在那里检查。

此外，您应该检查`/etc/hosts`.

# python - 在文件中找不到项目

> ID：14670114
> 
> 赞同：0
> 
> 时间：2013-02-03T06:41:17.790
> 
> 标签：python, wxpython

这是我的代码：

```
for line in open(logfile):
        if "ESSID" in line:
            begin = line.replace(" ", "")
            mid = begin.replace("ESSID:", "")
            final = mid.replace('"', "")
            print final
            self.APList.SetStringItem(self.index, 0, final)
            line = open(ilogfile).readline()
            if begin in line:
                connect = "yes"
            else:
                connect = "no"
            self.APList.SetStringItem(self.index, 3, connect) 
```

这是它正在扫描的文件（嗯，其中之一。）：

```
wlp2s0    IEEE 802.11bgn  ESSID:"MomAndKids"
      Mode:Managed  Frequency:2.462 GHz  Access Point: E0:91:F5:7D:C9:14
      Bit Rate=18 Mb/s   Tx-Power=20 dBm
      Retry  long limit:7   RTS thr=2347 B   Fragment thr:off
      Encryption key:off
      Power Management:off
      Link Quality=62/70  Signal level=-48 dBm
      Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
      Tx excessive retries:0  Invalid misc:603   Missed beacon:0 
```

我要测试的主要代码：

```
line = open(ilogfile).readline()
            if begin in line:
                connect = "yes"
            else:
                connect = "no" 
```

我尝试使用“final”而不是“begin”并读取整个文件而不是第一行（同时使用“final”和“begin”变量。）都没有奏效。为什么这不起作用？

如需完整源代码，请访问： [https ://github.com/codywd/WiFiz/blob/master/main.py](https://github.com/codywd/WiFiz/blob/master/main.py)

编辑：缩进仅在stackoverflow中被破坏，而不是在实际代码中。

编辑 2：另一个文件包含以下内容：

```
wlp2s0    Scan completed :
          Cell 01 - Address: E0:91:F5:7D:C9:14
                    Channel:11
                    Frequency:2.462 GHz (Channel 11)
                    Quality=66/70  Signal level=-44 dBm
                    Encryption key:on
                    ESSID:"MomAndKids"
                    Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 Mb/s; 18 Mb/s
                              24 Mb/s; 36 Mb/s; 54 Mb/s
                    Bit Rates:6 Mb/s; 9 Mb/s; 12 Mb/s; 48 Mb/s
                    Mode:Master
                    Extra:tsf=00000278820a146f
                    Extra: Last beacon: 80ms ago
                    IE: Unknown: 000A4D6F6D416E644B696473
                    IE: Unknown: 010882840B162430486C
                    IE: Unknown: 03010B
                    IE: Unknown: 2A0104
                    IE: Unknown: 2F0104
                    IE: Unknown: 32040C121860 
```

相关部分位于该文件的顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:09:02.667

以下似乎工作正常：

```
line = open(ilogfile).readline()

if final.strip() in line.strip():
    connect = "yes"
else:
    connect = "no" 
```

# optimization - 在具有正权重周期的图中最大化利润

> ID：14670116
> 
> 赞同：0
> 
> 时间：2013-02-03T06:42:21.957
> 
> 标签：optimization, max, greedy, approximation, np-hard

我有一组顶点，每对顶点之间定义了一些利润，因此利润（i，j）可能不等于利润（j，i）。此外，存在**正权重周期**，利润可能为**负**。

这是一个寻找最大利润的NP-hard问题，所以问题是每个城市最多访问一个（不需要访问所有城市）的利润最大化。我尝试了以下算法来找到这个：

*   对完整顶点集的贪心算法。
*   Greedy with brute force：首先找到顶点的贪心序列。这给出了几乎形成簇的近似顶点集。现在连续设置 8 个城市并重新排列它们以使用蛮力找到最大利润。

但是当在 100 个顶点上尝试时，这些并没有给出很好的结果。

是否有任何其他概率或近似方法来最大化成本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:47:29.023

我不确定我是否理解这个问题，但你不能对边缘进行排序，然后找到最小生成树。kruskals 算法是如何工作的？

编辑如果存在负权重边缘，您可以在权重变为负数时停止。

# youtube - Windows Phone 8 中的 Youtube URL

> ID：14670120
> 
> 赞同：0
> 
> 时间：2013-02-03T06:43:26.310
> 
> 标签：youtube, windows-phone-8

如何在不使用浏览器的情况下在 Windows Phone 8 中启动 Youtube 应用程序。基本上我目前正在使用以下代码，它会将我带到默认浏览器而不是打开 Youtube 应用程序：

```
Dim webBrowserTask As New WebBrowserTask()
webBrowserTask.Uri = New Uri("http://www.youtube.com/embed/3aP3KBsh3Y8",UriKind.Absolute)
webBrowserTask.Show() 
```

我希望能够直接启动 Youtube 应用程序。到目前为止，我还没有想出一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T19:25:05.937

有一个稍微好一点的方法。使用 WebBrowserTask 但以这种格式给它 URL

```
String.Format("vnd.youtube:{0}?vndapp=youtube",youTubeId) 
```

其中 youTubeId 是 youtube 视频的 ID（在您的情况下为 3aP3KBsh3Y8）

# xml - 如何使用 WriteElementString？

> ID：14670122
> 
> 赞同：1
> 
> 时间：2013-02-03T06:44:23.590
> 
> 标签：xml, c#-4.0

我是使用 C# 处理 XML 文档的新手。

我的 C# 代码：

```
XmlNode root = xmlDoc.DocumentElement;
XmlElement childNode = xmlDoc.CreateElement("link:schemaRef");
root.AppendChild(childNode);

XmlAttribute type = xmlDoc.CreateAttribute("xlink:type");
type.Value = "simple";
childNode.Attributes.Append(type);

XmlAttribute type2 = xmlDoc.CreateAttribute("xlink:href");
type2.Value = "http://taxonomi.xbrl.se/se/fr/sme/rbf/2008-09-30/se-sme-rbf-2008-09-30.xsd";
childNode.Attributes.Append(type2); 
```

但使用该代码将生成如下 XML：

```
<schemaRef type="simple" href="http://taxonomi.xbrl.se/se/fr/sme/rbf/2008-09-30/se-sme-rbf-2008-09-30.xsd" /> 
```

但是，我想要生成的 XML 元素如下所示：

```
<link:schemaRef xlink:type="simple" xlink:href="http://taxonomi.xbrl.se/se/fr/sme/rbf/2008-09-30/se-sme-rbf-2008-09-30.xsd" /> 
```

* * *

我想我已经找到了我的问题的解决方案，下面是我的 C# 代码，作为我的临时解决方案：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(@"" + dir + "" + filename);

XmlNode root = xmlDoc.DocumentElement;

//##Insert XBRL link scheme
var schemaRefElement = xmlDoc.CreateElement("link", "schemaRef", "urn:linkbase");
schemaRefElement.SetAttribute("type", "http://www.w3.org/1999/xlink", "simple");
schemaRefElement.SetAttribute("href", "http://www.w3.org/1999/xlink","http://www.bi.go.id/xbrl/2012-06 18/view/Pelaporan%20Keuangan/Rincian%20aset%20non%20finansial/" + reportname + "/" + reportname + ".xsd");
root.AppendChild(schemaRefElement);
xmlDoc.Save(@"" + dir + "" + filename); 
```

但我仍在寻找其他最佳解决方案；实际上我更喜欢使用 LINQ。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:18:52.667

这个例子可以帮助你

```
XNamespace aw = "http://www.adventure-works.com";
XElement xmlTree = new XElement(aw + "Root",
    new XAttribute(XNamespace.Xmlns + "aw", "http://www.adventure-works.com"),
    new XAttribute(aw + "Att", "attribute content")
);
XAttribute att = xmlTree.Attribute(aw + "Att");
Console.WriteLine(att); 
```

输出：

> aw:Att="属性内容"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T14:59:24.780

尝试这个;

```
XmlDocument doc = new XmlDocument();
var mmd = doc.CreateElement("mmd");
var element = doc.CreateElement("link", "schemaRef", "http://www.xbrl.org/2003/linkbase");
            mmd.AppendChild(element);

XmlAttribute xmlAttribute = doc.CreateAttribute("xlink", "type", "http://www.w3.org/1999/xlink");
xmlAttribute.Value = "simple";
element.Attributes.Append(xmlAttribute);

xmlAttribute = doc.CreateAttribute("xlink", "href", "http://www.w3.org/1999/xlink");
xmlAttribute.Value = "http://taxonomi.xbrl.se/se/fr/sme/rbf/2008-09-30/se-sme-rbf-2008-09-30.xsd";
element.Attributes.Append(xmlAttribute); 
```

# python - 拦截返回

> ID：14670132
> 
> 赞同：2
> 
> 时间：2013-02-03T06:46:13.100
> 
> 标签：python, python-3.x

python中有没有办法拦截（和更改）已编译函数的返回值？

基本思想是：我有一个函数

```
def a (n, acc):
    if n == 0: return acc
    return a (n - 1, acc + n) 
```

我想修补它，使其行为如下：

```
def a (n, acc):
    if n == 0: return acc
    return lambda: a (n - 1, acc + n) 
```

是否可以编写一个函数`f`，例如`f (a)`在第二个代码片段中生成一个函数？

我可以通过`inspect`if python 可以找到其源代码然后返回新编译的修补函数来修补该函数，但这无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:35:23.013

如果我正确理解你想要什么，理论上是不可能的；您似乎正在描述的转换会对等效函数产生不同的影响，具体取决于可能不会以编译形式保留的源代码的表面细节。例如，考虑给定函数的以下两个版本：

```
def a (n, acc):
    print('called a(%d,%d)' % (n, acc))
    if n == 0: return acc
    return a (n - 1, acc + n)

def a (n, acc):
    print('called a(%d,%d)' % (n, acc))
    if n == 0: return acc
    ret = a (n - 1, acc + n)
    return ret 
```

显然它们在功能上是相同的。在源代码中，唯一的区别是前者`return`直接在某个表达式上使用，而后者将该表达式的结果保存到局部变量中，然后`return`在该变量上使用。在编译的形式中，根本不需要区别。

现在考虑“修补”版本：

```
def a (n, acc):
    print('called a(%d,%d)' % (n, acc))
    if n == 0: return acc
    return lambda: a (n - 1, acc + n)

def a (n, acc):
    print('called a(%d,%d)' % (n, acc))
    if n == 0: return acc
    ret = a (n - 1, acc + n)
    return lambda: ret 
```

很明显，这些是非常不同的：例如，如果`n`is`3`并且`acc`是 0，那么前者打印`called a(3,0)`并返回一个函数，该函数打印`called a(2,3)`并返回一个函数，该函数打印`called a(1,5)`并返回一个函数，该函数打印`called a(0,6)`并返回`6`，而后者打印`called a(3,0)`and`called a(2,3)`和`called a(1,5)`and`called a(0,6)`并且返回返回的函数返回的函数返回的函数`6`。

更广泛的区别在于，第一个“修补”函数在每次调用新返回值时执行一个计算步骤，而第二个“修补”版本在初始调用期间执行计算的所有步骤，并简单地安排一系列为了娱乐的后续电话。只要有副作用（例如打印消息，或者递归太深以至于溢出堆栈），这种差异就会很重要。*调用者*是否引入副作用也很重要：请注意，这些函数只会递归，直到其他一些代码重新定义`a`，此时计划继续重新调用`a`的版本与已经完成了所有的调用。

由于您无法区分两个“未打补丁”版本，因此您显然无法生成转换所暗示的不同“打补丁”版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:18:53.660

感谢您的意见。我没有看到明显的：

```
def inject (f):
    def result (*args, **kwargs):
        return lambda: f (*args, **kwargs)
    return result 
```

我接受了 davidchambers 的回答，他把我推向了正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T07:08:03.227

卢克的回答非常详细，但这可能仍然有帮助：

```
>>> def f(*args, **kwargs):
...     return lambda: a(*args, **kwargs)
...
>>> f(10, 0)()
55 
```

# ios - NSXMLParser 在 Objective-C 中解析数字和汉字

> ID：14670134
> 
> 赞同：0
> 
> 时间：2013-02-03T06:46:18.650
> 
> 标签：ios, objective-c, special-characters, nsxmlparser

这是我的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Tests>
    <Test case="1">
        <str>200000</str>
    </Test>
    <Test case="2">
        <str>200thousand</str>
    </Test>
    <Test case="3">
        <str>共20萬&lt;/str>
    </Test>
    <Test case="4">
        <str>20萬&lt;/str>
    </Test>
</Tests> 
```

这是解析器的一部分，这是非常标准的，因为我在大多数教程中都找到了它：

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { 
    if(!currentElementValue)
        currentElementValue = [[NSMutableString alloc] initWithString:string];
    else
        currentElementValue = 
            (NSMutableString *) [string stringByTrimmingCharactersInSet:
                [NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

然后我使用这一行将每个 currentElementValue 解析为 testObj 的每个变量

```
[testObj setValue:currentElementValue forKey:elementName]; 
```

该代码成功地将 XML 解析为 testObj。但是，问题是**在第 4 种情况下，“20”消失了。**即一旦一个元素以数字开头，然后是汉字，数字就消失了。

此外，如果我使用：

```
 [currentElementValue appendString:string]; 
```

代替：

```
 currentElementValue = 
            (NSMutableString *) [string stringByTrimmingCharactersInSet:
                [NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

元素可以显示所有字符，但以许多空格开头。

我想弄清楚为什么 numeric 会消失，并寻找解决方案来显示所有没有空格的字符。

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T08:07:14.867

`parser:foundCharacters:`请参阅委托方法的文档：

> 解析器对象可以向委托发送几个 parser:foundCharacters: 消息来报告元素的字符。因为字符串可能只是当前元素的全部字符内容的一部分，所以您应该将它附加到当前的字符累积中，直到元素发生变化。

所以你必须使用`appendString`in `foundCharacters`。额外的空白可能是由于您没有在`didStartElement`and中重置当前字符串`didEndElement`：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
     currentElementValue = nil;
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
     if (currentElementValue) {
         NSLog(@"%@ = %@", elementName, currentElementValue);
         currentElementValue = nil;
     }
} 
```

如有必要，您可以删除`didEndElement`.

# javascript - 更改选择框的 CSS 样式表 src onChange

> ID：14670135
> 
> 赞同：1
> 
> 时间：2013-02-03T06:47:02.840
> 
> 标签：javascript, jquery, onchange

```
<script type="text/javascript">
    function achat_change_themes() {
        var rel = $('link[title="chat_theme"]');
        var select = $('#achat_times').attr('value');
  if(select == "GrayScale") {
       rel.attr('src' , 'www.avacwebthemes.vacau.com/css/mario_theme.css');
    }
  else if (select == "Mario") {
     rel.attr('src' , 'www.avacwebthemes.vacau.com/css/mario_theme.css');
    }
  else if (select == "Eartone") {
     rel.attr('src' , 'www.avacwebthemes.vacau.com/css/mario_theme.css');
     }
  else if (select == "Dark") {
     rel.attr('src' , 'www.avacwebthemes.vacau.com/css/mario_theme.css');
     }
  else if (select == "Floral") {
     rel.attr('src' , 'www.avacwebthemes.vacau.com/css/mario_theme.css');
     }
  else if (select == "Military") {
     alert(www.avacwebthemes.vacau.com/css/mario_theme.css);
     }

  }
 </script> 
```

HTML 模拟

```
<select id="achat_themes" onChange="achat_change_themes();">
  <option value="GrayScale">GrayScale</option>
    <option value="Mario">Mario</option>
      <option value="EarthTone">EarthTone</option>
        <option value="Dark">Dark</option>
          <option value="Floral">Floral</option>
            <option value="Military">Military</option>
  </select> 
```

基本上我想要做的是在 select 的 change 事件上它会改变 head 中链接标签的 src ......例如

`<link type="text/css" rel="stylesheet" title="chat_theme" href="http://sourcefile.com/css/file.css">`

并且希望每次我在测试这个时提醒最后一个选择时更改它，只需 5 分钟的时间，并尝试使用 jQuery 的 javascript 函数。它没有运行任何建议？

我尝试取出整个内部代码，但我不断得到未定义的 achat_change_themes？我一定是写错了函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:46:34.607

I have a few suggestions, both trying to answer your questions directly and, if you don't mind, also trying to help improve your code:

**Suggestion 1:** I think you're looking for the 'href' property of the link, not 'src'.

**Suggestion 2:** I'm guessing it's just to make the point, but just in case (I've forgotten many things like this): make sure to change 'www.avacwebthemes.vacau.com/css/mario_theme.css' to the appropriate address when the time comes.

**Suggestion 3:** Use the javascript [switch statement](http://www.w3schools.com/js/js_switch.asp) in your function instead of a bunch of if's. It's way cleaner:

```
switch(select)  
{  
    case "Grayscale":     
    {
        rel.attr('href', 'www.avacwebthemes.vacau.com/css/mario_theme.css');  
        break;
    }

    case "Mario":  
    {
        rel.attr('href', 'www.avacwebthemes.vacau.com/css/mario_theme.css');  
        break;
    }
    //Etc
} 
```

**Suggestion 4:** If you are trying to get into jQuery, I'd recommend using something like the following code (the script block goes inside the body, not the head):

```
<script>
$(function() {
        $('#achat_themes').change( function() {
                var rel = $('link[title="chat_theme"]');
                switch($(this).val())
                {  
                    case "Grayscale":     
                    {
                        rel.attr('href', 'www.avacwebthemes.vacau.com/css/mario_theme.css');  
                        break;
                    }

                    case "Mario":  
                    {
                        rel.attr('href', 'www.avacwebthemes.vacau.com/css/mario_theme.css');  
                        break;
                    }
                    //Etc
                }
            });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:02:10.673

使用 jQuery change() 事件而不是 onChange：

`attr("src",link);`错了-您应该改为更改 href 。

而不是使用`attr("val")`来获取下拉列表的值，您需要 val()。

你也拼错`#achat_themes`了`#achat_times`。

Here's a fiddle with all of your problems fixed:

[http://jsfiddle.net/498Z5/](http://jsfiddle.net/498Z5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:20:14.747

Why don't you try this way:

Try the fiddle out: `[http://jsfiddle.net/Ng24P/](http://jsfiddle.net/Ng24P/)`

```
$(function () {
    $('#achat_themes').change(function () {
        changeTheme($(':selected').val());
    });
});

function changeTheme(theme) {
    var stylshit = $('[title="chat_theme"]');
        stylshit.attr('href','http://sourcefile.com/css/'+theme.toLowerCase()+'.css');
        alert(stylshit.attr('href'));
} 
```

# php - php读取带有空格的txt文件

> ID：14670138
> 
> 赞同：0
> 
> 时间：2013-02-03T06:48:13.110
> 
> 标签：php

我在 php.ini 中读取了一个 txt 文件。问题是我可以除了它的空间。我使用了 explode() 函数，但它不起作用。我尝试了所有的阅读方式，但都不对。

```
$a = file_get_contents($file_url, FILE_USE_INCLUDE_PATH);
$a = explode(" ",$a);//When I call this, all of value are added to $a[0] as an array
$a = explode("\n",$a[0]); // I called this to explode "enter" but it doesn't work too 
```

现在，调用上面的代码后，$a[0] 是“85”，$a[1] 是“94 16”。当我调用 $a[1][0] 时，我想要的是“9”而不是“94”。

txt 文件中的数据是一个三角形，如 IOI 1994 中的问题：

```
85
94 16
15 63 72
55 78 89 105
77 24 56 93 17
... 
```

这是我要使用的文件[http://www.mediafire.com/?kjdjflvf0665q03](http://www.mediafire.com/?kjdjflvf0665q03)

这是我用txt文件中的数据解决问题三角形的代码

```
$t = array();
$count = 0;
$l = strlen($a[0]);
$d = 0;//get the quantity of rows in txt file
while($l>0){
    $d++;
    $l = $l - $d;
}
$f = array();
$prevX = $prevY = $val = 0;
//add all of values to array $t[] as a type: $t[row][col]
for($i =0 ; $i<$d; $i++){
    for($j=0; $j<=$i; $j++){
        $t[$i][$j] = $a[0][$count++];
    }
}
//start the beginning points: $f[row+1][col] = ($t[row+1][col]+MAX(f[row][col],f[row][col-1]),prevX, prevY, $t[row+1][col]) 
$f[0][0] = array($t[0][0],$prevX,$prevY, $t[0][0]);
$f[1][0] = array(($t[1][0]+$f[0][0][0]),0,0,$t[1][0]);
$f[1][1] = array(($t[1][1]+$f[0][0][0]),0,0,$t[1][1]);
$i=2;
while($i<$d){
    for ( $j=0; $j <= $i; $j++ ){
        if(($j-1)<0){//check to except the value which not undefined, but may be not works exactly
            $f[$i][$j] = array(($f[$i-1][$j][0]+$t[$i][$j]),$i-1,$j,$t[$i][$j]);
        }
        else {
            if($j>($i-1)){//check to except the value which not undefined, but may be not works exactly
                $f[$i][$j] = array(($f[$i-1][$j-1][0]+$t[$i][$j]),$i-1,$j-1,$t[$i][$j]);
            }
            else{ 
                if($f[$i-1][$j][0]<$f[$i-1][$j-1][0]){
                    $f[$i][$j] = array(($f[$i-1][$j-1][0]+$t[$i][$j]),$i-1,$j-1,$t[$i][$j]);
                }
                else if($f[$i-1][$j][0]>$f[$i-1][$j-1][0]){
                    $f[$i][$j] = array(($f[$i-1][$j][0]+$t[$i][$j]),$i-1,$j,$t[$i][$j]);
                }
            }
        }
    }
    $i++;
}
//print_r($f);
$result=0;
$x = $y = $finalR = 0;
for($j=0;$j<$d;$j++){
    if($f[$d-1][$j][0]>$result){
        $result = $f[$d-1][$j][0];
        $x = $d-1;
        $y = $j;
        $finalR = $f[$d-1][$j][3];
    }
}
while($x>0){
    echo '(',$x,',',$y,')',$f[$x][$y][3],'<----';
    $x = $f[$x][$y][1];
    $y = $f[$x][$y][2];
}
echo '(0,0)', $f[0][0][3]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:16:32.123

不可能将 $a[1] 设为 "94 16" 而将 $a[1][0] 设为 94 是不可能的，因为 $a[1] 是字符串，而 $a[1][0] 中的 $a[1]是一个数组键。

It's easy enough to make two arrays, one for the row and one for the reference table

```
<?
$file = file('file.txt');
foreach($file as $i => $line)
{
    foreach(explode("\t",$line) as $num)
    {
        $num = trim($num);
        if($num!='')
        {
            $a[$i][] = $num;
        }
    }
}
echo '<pre>';
pre($a);

//full rows examples
pre(get_ref('0',$a));
pre(get_ref('1',$a));
pre(get_ref('2',$a));

//individual cells examples
pre(get_ref('0,0',$a));
pre(get_ref('1,0',$a));
pre(get_ref('1,1',$a));
pre(get_ref('2,0',$a));
pre(get_ref('2,1',$a));
pre(get_ref('3,2',$a));

function get_ref($ref,$a)
{
    $ref = explode(',',$ref);
    foreach($ref as $r)
    {
        $a = $a[$r];
    }
    if(is_array($a))
    {
        return(implode("\t",$a));
    }else{
        return($a);
    }

}

function pre($d)
{
    echo '<pre>';
    print_r($d);
    echo '</pre>';
}
?> 
```

# javascript - 在 Masonry 中使用 Django Endless Pagination

> ID：14670147
> 
> 赞同：2
> 
> 时间：2013-02-03T06:49:23.990
> 
> 标签：javascript, jquery, django, jquery-masonry, django-endless-pagination

我正在尝试将[Django Endless Pagination](https://django-endless-pagination.readthedocs.org/en/latest/)与[Masonry](http://masonry.desandro.com/)一起使用。

我一直遇到的问题是，砌体在第一页上工作得很好，但是当页面中填充新数据时，砌体不适用于新加载的元素。我考虑[添加项目](http://masonry.desandro.com/demos/adding-items.html)，但我认为在这种情况下这对我没有帮助。

那么，一旦加载了新元素，它们是一种重新初始化砌体的方法吗？

我只是想知道是否有其他人有类似的问题，是否有人有解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T11:22:05.830

如果有人有类似的问题，我终于找到了解决方案。我最终使用了`.masonry('reload')`. 在 never_on_scroll 之后，再次调用 reload 函数就更容易了。它可以解决问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-06T17:57:17.777

Django-Endless-Pagination`onCompleted`在其设置中有一个回调。在那里，执行以下操作：

```
var masonry = $(myMasonryObject).data('masonry');
if (masonry !== undefined) {
    masonry.reloadItems();
    masonry.layout();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T10:33:20.050

在上面的决定中，我发现了一些问题。当我滚动到页面末尾时，我看到了一些工件（项目相互叠加或在页脚上）。

我认为，这是因为我们在加载图像或其他东西之前调用了 masonry.reloadItems () 并且项目还没有它的实际大小。

此解决方案可以解决此问题：

```
 <script type="application/javascript">
    $.endlessPaginate({
      paginateOnScroll: true,
      paginateOnScrollMargin: 3840,
      onCompleted: function(context, fragment) {
        $(document).ready(function () {
            var gallery = $('.gallery');
            gallery.imagesLoaded(function () {
                var masonry = gallery.data('masonry');
                if (masonry !== undefined) {
                    masonry.reloadItems();
                    masonry.layout();
                }
            });
        });
      }
    });
  </script> 
```

# css - 网页字体“普通”字体粗细

> ID：14670151
> 
> 赞同：2
> 
> 时间：2013-02-03T06:49:50.670
> 
> 标签：css, fonts, google-webfonts

即使使用 Web 字体，假设 font-weight:normal 和 font-weight:400 是等价的是否仍然合理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T07:55:30.377

在价值上[`font-weight`](http://www.w3.org/TR/CSS21/fonts.html#propdef-font-weight)，`normal`顾名思义`400`。这不依赖于字体。

使用，即使字体实际上是粗体（或浅色或其他） ，也可以通过将字体声明为具有正常粗细（默认为 ，或将其设置为或）`@font-face`来作弊。Fontsquirrel @font-face 生成器这样做：它有效地将每个字体定义为一个字体系列。例子：`font-weight``normal``400`

```
/* Generated by Font Squirrel (http://www.fontsquirrel.com) on January 22, 2013 */
@font-face {
    font-family: 'source_sans_probold';
    src: url('sourcesanspro-bold-webfont.eot');
    src: url('sourcesanspro-bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('sourcesanspro-bold-webfont.woff') format('woff'),
         url('sourcesanspro-bold-webfont.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;

} 
```

这意味着一个元素可能具有 的`font-weight`值`400`，即使实际使用的字体是粗体设计。

`400`这与vs.的使用没有任何关系`normal`，而且不仅仅是字体粗细。FontSquirrel 与`font-style`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:02:19.893

这可能不是最终的答案，但现在必须这样做——我浏览了 Google Web Fonts 上的全部 617 种字体。从我所见，Normal 始终是 400。所有当前字体都指定 Normal，400。

我应该补充的一件事——有一些 WOFF 字体，例如 Open Sans Condensed，实际上根本没有“正常”样式。但是，这不应破坏 Normal = 400 的假设。

这是 Chrome 的一个有趣的陷阱。它默默地将 font-weight:700 替换为 font-weight:bold。它不会尝试使用其他字体粗细来做到这一点。即使如此，如果您依赖数值，最好进行静默测试以进行必要的替换。类似的东西

```
var sample = $('#fontSampleA');
var fontwt = sample.css('font-weight');
fontwt = ('normal' == fontwt)?400:(('bold' == fontwt)?700:(('book' == fontwt)?300:fontwt)); 
```

以防万一将来的版本开始尝试进行更多无声的“智能转换”。

# java - 我的应用程序没有看到 ContextLoaderListener

> ID：14670157
> 
> 赞同：0
> 
> 时间：2013-02-03T06:50:46.907
> 
> 标签：java, spring, jakarta-ee

我有一个使用 spring 3.0.3 的应用程序。所有需要的 jar 都已添加，但是当我在 Eclipse 中运行它时会发生此错误：java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener

我打开 org.springframework.web-sources-3.0.3.RELEASE.jar 可以看到 ContextLoader.java 文件！！！这是 web.xml 配置：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
    /WEB-INF/applicationContext.xml     

    </param-value>
</context-param>

<listener>
 <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:27:32.723

你是如何*运行*你的应用程序的？如果使用 tomcat，请确保所需的 jars 存在于 tomcat 的 lib 文件夹中，或者创建一个名为`lib` in `WEB-INF`directory 的目录并将所有 spring jar 放入其中。

将 jars 放在类路径上对于在 eclipse 中进行开发是可以的，但是对于运行应用程序，您的容器（tomcat 等）应该知道它，唯一的方法是将 jars 放在`lib`目录中。

# openssl - HAproxy SSL Segfault 与 1.5-dev17

> ID：14670160
> 
> 赞同：3
> 
> 时间：2013-02-03T06:52:01.517
> 
> 标签：openssl, load-balancing, haproxy

尝试在 1.5-dev17 上启用 ssl 时出现段错误

Ubuntu 服务器 12.04

尝试了几乎所有我能想到的变体，将私钥和 CA 捆绑包连接起来并用作单个 crt，还尝试了使用私钥和 ca 文件作为 CA 捆绑包的拆分 crt。

**/etc/haproxy/haproxy.cfg**

```
global
   maxconn 4096
   daemon

defaults
   mode   http
   contimeout   5000
   clitimeout   50000
   srvtimeout   50000
   option forwardfor
   retries 3
   option redispatch
   option http-server-close

frontend http
   bind *:80
   reqadd X-Forwarded-Proto:\ http
   default_backend unicorn

frontend https
   bind *:443 ssl crt /path/to/private.key ca-file /path/to/bundle.crt
   reqadd X-Forwarded-Proto:\ https
   default_backend unicorn

backend unicorn
   server unicorn 127.0.0.1:8080 check

listen stats :8081
   mode http
   stats enable
   stats scope unicorn
   stats realm Haproxy\ Statistics
   stats uri /
   stats auth haproxy:YOURPASSWORDHERE 
```

**gdb 输出**

```
Reading symbols from /usr/local/sbin/haproxy...done.
(gdb) run -f /etc/haproxy/haproxy.cfg
Starting program: /usr/local/sbin/haproxy -f /etc/haproxy/haproxy.cfg
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".

Program received signal SIGSEGV, Segmentation fault.
0x000000000045edc0 in bind_parse_ssl (args=<optimized out>, cur_arg=<optimized out>, px=<optimized out>, conf=<optimized out>, err=<optimized out>) at src/ssl_sock.c:2566
2566            list_for_each_entry(l, &conf->listeners, by_bind) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T13:20:27.353

你的配置不会让我崩溃 haproxy-1.5-dev17。但是，您是否没有任何机会在没有启用 ssl 支持的情况下进行第一次构建，然后只使用 ssl 进行部分重建？我的意思是，类似：

```
$ make TARGET=linux2628
...
$ make TARGET=linux2628 USE_STATIC_PCRE=1 USE_OPENSSL=1 
```

如果是这样，您的构建可能无效，因为某些需要重新编译的文件没有重新编译。

你能试试：

```
make TARGET=linux2628 USE_STATIC_PCRE=1 USE_OPENSSL=1 clean all 
```

# c# - GetHashCode 冲突

> ID：14670163
> 
> 赞同：0
> 
> 时间：2013-02-03T06:52:33.103
> 
> 标签：c#, hashcode, gethashcode

我**知道**`HashCode`用作唯一标识符不是很聪明，

但是假设我在同一个 HashCode 上有两个变量是我可以获得它们的唯一方法，

**我怎么能分辨出区别？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:54:35.460

文档中几乎涵盖了它。假设您只有哈希码：

> GetHashCode 方法的默认实现不保证不同对象的唯一返回值。此外，.NET Framework 不保证 GetHashCode 方法的默认实现，它返回的值在不同版本的 .NET Framework 之间是相同的。因此，此方法的默认实现不得用作散列目的的唯一对象标识符。

来自[http://msdn.microsoft.com/en-us/library/system.object.getashcode.aspx](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:01:43.520

您应该能够确定引用是否相等。

尝试使用[ReferenceEquals](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)函数来检查您是否有对同一对象的引用。

# xml - 如何将记录器消息值传递给 mule 中的 .xslt 文件

> ID：14670164
> 
> 赞同：0
> 
> 时间：2013-02-03T06:52:42.243
> 
> 标签：xml, xslt, xsd, wsdl, mule

在 configuration.xml 文件中，我实现了一个发布 wsdl 的流程，在此过程中我放置了一个返回客户端 IP 地址的记录器。这是我的代码：

```
<logger message="#[groovy:message.getInboundProperty('MULE_REMOTE_CLIENT_ADDRESS')]" level="INFO" doc:name="Logger"/> 
```

现在我想将 ip 地址传输（传递）到我的 .xslt 文件？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:20:42.637

如果您使用的是 Mule 3.3，则可以使用[MEL](http://www.mulesoft.org/documentation/display/MULE3USER/Mule+Expression+Language)并简化 logger 语句，如下所示：

```
<logger message="#[message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']]" level="INFO" doc:name="Logger"/> 
```

要将 IP 地址传递给 XSLT，请将其存储在一个变量中并传递它。

```
<set-variable variableName="remoteClientAddress" value = "#[message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']]"/> 
```

用记录仪显示

```
 <logger message="Remote client address is------> #[remoteClientAddress]" level="INFO" doc:name="Logger"/> 
```

将其传递给`XSLT`：

```
 <xm:xslt-transformer xsl-file="xsltFileName.xslt">
        <xm:context-property key="remoteClientAddress" value="#[remoteClientAddress]"/>
    </xm:xslt-transformer> 
```

在你的`XSLT`，声明一个参数变量

```
<xsl:param  name="remoteClientAddress" /> 
```

然后将此变量用作

```
<xsl:value-of select="$remoteClientAddress" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:22:04.717

对于与正确提取 IP 地址相关的问题，请使用 XSLT 函数，例如

```
 substring-before() , substring-after()  and tokenize() ( in XSLT 2.0) 
```

# mysql - mysql如何转储数据库的所有表结构并导入另一个

> ID：14670167
> 
> 赞同：1
> 
> 时间：2013-02-03T06:52:58.337
> 
> 标签：mysql

从命令行，如何导出 mysql 数据库中的所有表结构并导入另一个。我不需要该表...只是为了在新数据库中创建新表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:57:53.520

带有 no-data 选项的 mysqldump 应该可以满足您的需求。

`mysqldump --no-data`

[http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html#option_mysqldump_no-data](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html#option_mysqldump_no-data)

# angularjs - Underscore.js 导致 Angularjs $digest 中止

> ID：14670172
> 
> 赞同：1
> 
> 时间：2013-02-03T06:53:49.187
> 
> 标签：angularjs, underscore.js

我正在尝试按任意字段名称的第一个字母对对象数组进行分组，尽管我在其他时候尝试使用`underscore.js`.

这是一个示例 plunker：[http ://plnkr.co/edit/xt9ahm1dSLa0xVMxW5QA](http://plnkr.co/edit/xt9ahm1dSLa0xVMxW5QA)

我有一个项目列表 ( `$scope.items`)，并且在将它们通过一些过滤器之后，我正在使用`ng-repeat`它们来迭代它们。过滤器`underscore.js` `groupBy`用于返回具有每个组属性的对象（参见底部的示例`app.js`）。

当我尝试使用过滤器时，我遇到了`10 $digest() iterations reached, Aborting!`异常。

我对它发生的原因有所了解，过滤器必须修改底层对象内容，`AngularJS`然后尝试重新运行过滤器。我不确定这种修改发生在哪里：

*   `_.js`是我无法控制的内在因素吗？
*   在尝试处理过滤器中的数组之前，是否需要进行一些特殊设置？某种`scope.$unwatch`？
*   为什么Angularjs自己的`orderBy`不会导致这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-23T05:29:34.103

正如 BinaryMuse 所链接的，此[Google Groups 链接](https://groups.google.com/d/msg/angular/IEIQok-YkpU/InEXv61MrkMJ)解释了发生这种情况的原因。

# c# - 如何在 WPF c# 中的 2 个数组的 2 列中填充列表视图

> ID：14670173
> 
> 赞同：1
> 
> 时间：2013-02-03T06:54:01.987
> 
> 标签：c#, wpf, listview, listviewitem

我有一个列表视图项目

(XAML)

```
<ListView Name="myListView" BorderThickness="2,2,2,2" Margin="12,27,428,12">
        <ListView.View>
            <GridView>
                <GridViewColumn Width="150" Header="Column1" DisplayMemberBinding="{Binding Test1}"/>
                <GridViewColumn Width="150" Header="Column2" DisplayMemberBinding="{Binding Test2}"/>
            </GridView>
        </ListView.View>
        <ListViewItem>
        </ListViewItem>
    </ListView> 
```

并想用 2 个不同的数组填充它

```
string[] ApplicationNames
string[] ClassNames 
```

但我很难这样做。谁能指出我正确的方向？

我正在使用 WPF

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:40:17.917

您的问题的答案可能在[此处](https://stackoverflow.com/questions/5412797/how-to-bind-a-listview-to-multiple-collections-stored-in-a-single-viewmodel-in-w)找到。

`WPF Application`PS 如果您在 XAML 中开发 UI ，那么您正在开发一个`Winforms`. `Winforms`应用程序是通过`Windows Forms Application`在选择项目类型时选择来创建的`Visual Studio`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T08:07:29.197

XAML：

```
 <ListView Name="ResultListView">
      <ListView.View>
           <GridView>
              <GridViewColumn Width="Auto" DisplayMemberBinding="{Binding ApplicationName }" Header="File" />
              <GridViewColumn Width="Auto" DisplayMemberBinding="{Binding ClassName }"     Header="Location" />
           </GridView>
      </ListView.View>
 </ListView> 
```

我的对象.cs

```
class MyObject
{
    public string ApplicationName { get; set; }
    public string ClassName { get; set; }
}

ObservableCollection<MyObject> results = new ObservableCollection<MyObject>();
//Populate some data into results here
ResultListView.ItemsSource =results; 
```

# wpf - 向内部控件添加滚动条

> ID：14670175
> 
> 赞同：0
> 
> 时间：2013-02-03T06:54:17.063
> 
> 标签：wpf, scroll, wpf-controls, scrollview

我在这里遇到过类似的问题，但还没有找到解决方案。内部控件是一个表：

```
<UserControl x:Class="Labster7.Application.Modules.MassiveExecution.Windows.ExperimentDetailsTableView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             MinHeight="150"
             d:DesignHeight="300" d:DesignWidth="300" 
             xmlns:igDP="http://infragistics.com/DataPresenter"
             xmlns:fw="clr-namespace:Labster7.Application.Framework;assembly=Labster7.Application.Framework"
             xmlns:sys="clr-namespace:System;assembly=mscorlib" xmlns:igEditors="http://infragistics.com/Editors">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="..\Resources\Styles.xaml" />
                <ResourceDictionary>
                    <Style TargetType="ScrollViewer" BasedOn="{StaticResource CoolScrollViewerStyle}">
                        <Setter Property="HorizontalAlignment" Value="Stretch" />
                        <Setter Property="VerticalAlignment" Value="Stretch" />
                        <Setter Property="Visibility" Value="Visible"/>
                    </Style>
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <igDP:XamDataGrid DataSource="{Binding Path=TaskObjects, Mode=TwoWay}" MinHeight="100"
                          RecordsDeleting="DataPresenterBase_OnRecordsDeleting" 
                          RecordsDeleted="DataPresenterBase_OnRecordsDeleted" ScrollingMode="DeferredWithScrollTips">
            <igDP:XamDataGrid.Resources>
                <Style x:Key="CheckBoxedHeaderStyle" TargetType="{x:Type igDP:LabelPresenter}">
                    <Setter Property="ContentTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <CheckBox Name="HeaderCheckBox" Content="{Binding}" Click="OnClick" IsChecked="True" IsThreeState="False"/>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
                <Style TargetType="igEditors:XamCheckEditor">
                    <EventSetter Event="ValueChanged" Handler="XamCheckEditorValueChanged"/>
                </Style>
            </igDP:XamDataGrid.Resources>
            <igDP:XamDataGrid.FieldLayouts>
                <igDP:FieldLayout>
                    <igDP:FieldLayout.Fields>
                        <igDP:Field Name="IsSelected" Label="Selected" IsSelected="{Binding AllSelected}">
                            <igDP:Field.Settings>
                                <igDP:FieldSettings AllowEdit="{Binding IsEditable}" 
                                                    EditAsType="{x:Type sys:Boolean}" 
                                                    EditorType="{x:Type igEditors:XamCheckEditor}" 
                                                    LabelPresenterStyle="{StaticResource CheckBoxedHeaderStyle}" />
                            </igDP:Field.Settings>
                        </igDP:Field>
                        <igDP:Field Name="ExperimentName" Label="Experiment Name">
                            <igDP:Field.Settings>
                                <igDP:FieldSettings AllowEdit="False" />
                            </igDP:Field.Settings>
                        </igDP:Field>
                        <igDP:Field Name="Machines" Label="Machines">
                            <igDP:Field.Settings>
                                <igDP:FieldSettings AllowEdit="False" />
                            </igDP:Field.Settings>
                        </igDP:Field>
                        <igDP:Field Name="Status" Label="Status">
                            <igDP:Field.Settings>
                                <igDP:FieldSettings AllowEdit="False" />
                            </igDP:Field.Settings>
                        </igDP:Field>
                        <igDP:Field Name="StartTime" Label="Start Time"
                                    Converter="{fw:DateTimeToStringConverter FormatString=0:hh:mm:ss}">
                            <igDP:Field.Settings>
                                <igDP:FieldSettings AllowEdit="False" EditAsType="{x:Type sys:String}"/>
                            </igDP:Field.Settings>
                        </igDP:Field>
                        <igDP:Field Name="EndTime" Label="End Time"
                                    Converter="{fw:DateTimeToStringConverter FormatString=0:hh:mm:ss}">
                            <igDP:Field.Settings>
                                <igDP:FieldSettings AllowEdit="False" EditAsType="{x:Type sys:String}"/>
                            </igDP:Field.Settings>
                        </igDP:Field>
                    </igDP:FieldLayout.Fields>
                </igDP:FieldLayout>
            </igDP:XamDataGrid.FieldLayouts>
            <igDP:XamDataGrid.FieldLayoutSettings>
                <igDP:FieldLayoutSettings SelectionTypeRecord="Single"/>
            </igDP:XamDataGrid.FieldLayoutSettings>
        </igDP:XamDataGrid>
    </Grid>
</UserControl> 
```

（`CoolScroller`是已经在应用中成功使用的样式，比较长，暂时不加代码。）

包含窗口是：

```
<UserControl x:Class="Labster7.Application.Modules.MassiveExecution.Windows.ActivityEditorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:fw="clr-namespace:Labster7.Application.Framework;assembly=Labster7.Application.Framework"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:windows="clr-namespace:Labster7.Application.Modules.MassiveExecution.Windows" mc:Ignorable="d" d:DesignHeight="550"
             xmlns:igCa="http://infragistics.com/Chart">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="2"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0">
            <TextBox VerticalAlignment="Center" HorizontalAlignment="Center" Margin="10,10,10,10" Foreground="Red"  IsReadOnly="True"
                     Visibility="{Binding ShouldShowExperimentTable,Converter={fw:BoolToVisibilityConverter TrueValue=Hidden, FalseValue=Visible}}">
                Click 'Add test from DOE' to view the activity's experiments
            </TextBox>
            <DockPanel LastChildFill="True" Visibility="{Binding Path=ShouldShowExperimentTable, Converter={fw:BoolToVisibilityConverter TrueValue=Visible, FalseValue=Hidden}}">
                <!--<StackPanel DockPanel.Dock="Right" Orientation="Horizontal" MaxHeight="30" Margin="4">
                    <Label Content="Select all"/>
                    <igEditors:XamCheckEditor IsChecked="{Binding ExperimentDetailsTableViewModel.SelectAll}" IsThreeState="False" />
                </StackPanel>-->
                <windows:ExperimentDetailsTableView DockPanel.Dock="Top"
                                                    HorizontalAlignment="Stretch" 
                                                    Margin="3,3,3,3" 
                                                    VerticalAlignment="Stretch"
                                                    DataContext="{Binding Path=ExperimentDetailsTableViewModel}" />
            </DockPanel>
        </StackPanel>
        <GridSplitter Grid.Row="1" Background="SkyBlue" Height="2" HorizontalAlignment="Stretch" VerticalAlignment="Top"/>
        <Grid Grid.Row="2" HorizontalAlignment="Left" Width="Auto">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <StackPanel Grid.Row="1" Orientation="Horizontal" Grid.ColumnSpan="2">
                <!--<Label MinHeight="30" MinWidth="100" Content="{Binding Stopwatch.TimeElapsed}"/>-->
                <!--<ProgressBar MinHeight="30" Maximum="100" Minimum="0" 
                             Value="{Binding Progress, UpdateSourceTrigger=PropertyChanged}" 
                             Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Value, Mode=OneWay, Converter={StaticResource conv}}"/>-->
            </StackPanel>
            <igCa:XamChart  Grid.Row="2" HorizontalContentAlignment="Left" HorizontalAlignment="Left" Visibility="{Binding Path=ShowExperimentsStatusData, 
                            Converter={fw:BoolToVisibilityConverter TrueValue=Visible, FalseValue=Hidden}}"
                            MaxHeight="300" Width="Auto" Grid.ColumnSpan="2">

            </igCa:XamChart>
        </Grid>

    </Grid>
</UserControl> 
```

（我删除了图表系列，因为它是不相关的绑定。）
`windows:ExperimentDetailsTableView`是内部控件。我想要一个滚动条（首选样式，但我很灵活），当我将表格的区域设置得太小或表格有太多行无法在其当前区域显示时，它会出现。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:45:00.197

事实证明，删除图表后，滚动条突然起作用了。我想它与'restart VS'相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:33:25.270

你不能只使用 a`ScrollViewer`吗？

```
<ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
    <%-- your content --%> 
```

# ruby-on-rails - Phusion 乘客无法启动 Rails 应用程序

> ID：14670176
> 
> 赞同：0
> 
> 时间：2013-02-03T06:54:25.527
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nginx, passenger

任何帮助将不胜感激。我正在尝试在我的服务器上运行基本的 Rails 应用程序。

我正在运行 Ubuntu 和 nginx。理想情况下，我希望能够仍然运行 php 应用程序，所以 nginx+Phusion 似乎是要走的路。

> 缺少应用程序所需的源文件。您可能没有正确上传您的应用程序文件。请检查您的所有申请文件是否已上传。可能未安装所需的库。请安装此应用程序所需的所有库。有关错误的更多信息可能已写入应用程序的日志文件。请检查它以便分析问题。
> 
> 错误消息：没有要加载的文件--bundler
> 
> 异常类：LoadError
> 
> 0 /usr/lib/ruby/1.8/rubygems/custom_require.rb 31 在`gem_original_require' 1 /usr/lib/ruby/1.8/rubygems/custom_require.rb 31 in`require' 2 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/utils.rb 325 在`prepare_app_process' 3 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/rack/application_spawner.rb 156 in`initialize_server' 4 / var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/utils.rb 563 in `report_app_init_status' 5 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/rack/application_spawner.rb 154 in`initialize_server' 6 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server .rb 204 在`start_synchronously' 7 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server.rb 180 in`开始' 8 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/rack/application_spawner.rb 129 在`start' 9 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb 253 in`spawn_rack_application' 10 /var/lib/gems/1.8/gems/passenger -3.0.19/lib/phusion_passenger/abstract_server_collection.rb 132 在`lookup_or_add' 11 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb 246 in`spawn_rack_application' 12 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server_collection.rb 82 在`synchronize' 13 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server_collection.rb 79 in`同步' 14 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb 244 在`spawn_rack_application' 15 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb 137 in`spawn_application' 16 /var/lib/gems/1.8/gems/passenger-3.0.19/lib /phusion_passenger/spawn_manager.rb 275 在`handle_spawn_application' 17 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server.rb 357 in`**发送**'18 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server.rb 357 在`server_main_loop' 19 /var/lib/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server.rb 206 in`start_synchronously'20 /var/lib/gems/1.8/gems /passenger-3.0.19/helper-scripts/passenger-spawn-server 99

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:58:52.687

似乎您将乘客安装到系统 ruby​​ 安装，而不是通过 rvm 安装 1.9.3-p374 版本。尝试按照以下步骤操作：

```
rvm use 1.9.3-p374
gem install bundler passenger
passenger-install-apache2-module 
```

然后使用最后一个命令中的说明并使用它们配置您的 apache。此外，转到项目目录并执行

```
rvm use 1.9.3-p374
bundle install 
```

这应该够了吧。

# c# - 更新 SQL Server 中的标识列

> ID：14670177
> 
> 赞同：-5
> 
> 时间：2013-02-03T06:54:26.087
> 
> 标签：c#, sql-server-2012

我已将我的 asp.net Web 应用程序连接到 SQL Server 2012。我面临的问题是：我的表中有 5 行，标识列为 1、2、3、4、5。

现在，通常的情况是当我删除第 5 行并在删除后插入新行时，新行的 id 值应该是 5。但它的 id 值是 6。同样，当我删除这一行并插入时新行，它的值为 7。

所以请指导我如何在删除后获取正确的 id 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:57:52.973

你*得到*了正确的值..但是，如果你需要在删除后重置计数（坏主意），你需要这个：

你需要`dbcc checkident(tablename,RESEED,5)`

在此语句之后，插入的下一个值将`6`在标识列中。

参考：http: [//msdn.microsoft.com/en-us/library/ms176057.aspx](http://msdn.microsoft.com/en-us/library/ms176057.aspx)

# c# - 变量为 sql 列名

> ID：14670179
> 
> 赞同：0
> 
> 时间：2013-02-03T06:54:45.337
> 
> 标签：c#, sql-server, razor, asp.net-webpages

我有，

```
var car = db.QuerySingle("SELECT * FROM Stock WHERE Id = @0", carId); 
```

表“Stock”具有图像数据列 ImgF1、ImgF2、...、ImgF12。现在我想检索这些图像，如下所示

```
<ul>
@for(int i = 1; i < 12; i++){
    var imageName = "ImgF" + i;
    if(car.@imageName != null){
        <li>
            <img class="small_image" alt="image" src="@Href("~/Cars/XSThumbnail",carId, new{index = i})">
        </li>
    }else{

    }
} 
```

问题是 car.@imageName 或 car.imageName 不起作用，因为 imageName 不是列名，而只是列名的变量。

* * *

所以请，如果您有任何想法，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:01:29.357

在引擎盖下，该`QuerySingle`方法返回一个[DynamicRecord](http://msdn.microsoft.com/en-us/library/webmatrix.data.dynamicrecord%28v=vs.111%29.aspx)实例，[您可以](http://msdn.microsoft.com/en-us/library/gg569137%28v=vs.111%29.aspx)使用列名对其进行索引：

```
@for(int i = 1; i < 12; i++){
    var imageName = "ImgF" + i;
    if(car[imageName] != null){
        <li>
            <img class="small_image" alt="image" 
                 src="@Href("~/Cars/XSThumbnail",carId, new{index = i})">
        </li>
    }else{

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:01:13.570

尝试改变这个：

```
if(car.@imageName != null){ 
```

到

```
if(car[imageName] != null){ 
```

祝你好运。

# ruby-on-rails - Rails & Redcarpet：在 ApplicationHelper 中使用时未初始化的常量 Redcarpet::Render

> ID：14670184
> 
> 赞同：6
> 
> 时间：2013-02-03T06:55:29.533
> 
> 标签：ruby-on-rails, ruby, railscasts, redcarpet

我正在关注 RailsCasts 的[Syntax Highlighting Revised](http://railscasts.com/episodes/207-syntax-highlighting-revised)剧集。我将我的 ApplicationHelper 更新为如下所示：

```
require 'redcarpet'

module ApplicationHelper
  class HTMLwithPygments < Redcarpet::Render::HTML
    def block_code(code, language)
      Pygments.highlight(code, lexer:language)
    end
  end

  def markdown(text)
    renderer = HTMLwithPygments.new(hard_wrap: true, filter_html: true)
    options = {
      autolink: true,
      no_intra_emphasis: true,
      fenced_code_blocks: true,
      lax_html_blocks: true,
      strikethrough: true,
      superscript: true
    }
    Redcarpet::Markdown.new(renderer, options).render(text).html_safe
  end
end 
```

但是，我的网络应用程序返回

```
Routing Error

uninitialized constant Redcarpet::Render

Try running rake routes for more information on available routes. 
```

我正在使用 Rails 3.2.11，Redcarpet 在 Rails 控制台中响应良好。我最初没有包括，但我按照[此处](https://stackoverflow.com/questions/7085053/unitialized-constant-in-model)`require 'redcarpet'`的说明进行操作，但没有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T20:40:59.020

我删除了我的`Gemfile.lock`，然后又做`bundle install`了一次，效果很好。

# android - 拖放ShadowBuilder

> ID：14670188
> 
> 赞同：2
> 
> 时间：2013-02-03T06:55:51.837
> 
> 标签：android, drag-and-drop

我正在尝试利用影子生成器进行 android 拖放。我注意到它总是以半透明模式绘制。我应该怎么做才能在那里画一些坚硬的东西？我什至尝试过类似的东西

```
 Paint paint = new Paint();
  paint.setColor(0xFFFF0000);
  canvas.drawCircle(canvas.getWidth()/2,canvas.getHeight()/2,canvas.getHeight()/2,paint); 
```

但它仍然是半透明的。我的想法用完了....帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:43:46.890

您可以使用 setAlpha 来控制透明度：

```
paint.setAlpha(255); 
```

255 表示完全不透明，0 表示完全透明

# java - 为什么将 java 文件编译成 jar 文件后，图像路径不再起作用？

> ID：14670192
> 
> 赞同：0
> 
> 时间：2013-02-03T06:57:14.227
> 
> 标签：java, path, system

我有一个使用系统托盘图标的相对基本的 java 程序。我在编写代码时使用的路径如下`"../images/logo.png"`。但是，当我将其编译为 jar 文件时，图像不会显示在系统托盘中。相反，如果我将路径更改为`"./images/logo.png"`，那么当图像以 jar 文件形式出现时，图像会显示在系统托盘中，但在我测试时不会。

这不是一个大问题。但是，我很想知道为什么会出现这种不一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:04:09.933

当您将程序打包到 .jar 文件中时，您的构建很可能会将映像复制到与 .jar 文件相同的目录中。但是，在您的 ide 中调试时，您的图像文件位于下面的一个目录中。

另一种可能性是您只是在两种情况下以不同的方式设置您的[直接工作。](http://en.wikipedia.org/wiki/Working_directory)

顺便说一句，您可能有兴趣将图像嵌入到您的 jar 文件中，请参阅： [https ://stackoverflow.com/a/1096491/24954](https://stackoverflow.com/a/1096491/24954)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:05:00.103

这个答案取决于两件事。图像文件是否嵌入。

## 嵌入式资源

一旦你 Jar'ed 应用程序并且图像嵌入到应用程序中，正常的文件访问方法将不再起作用。

试图做类似...

```
new ImageIcon("../images/logo.png"); 
```

或者

```
new File("../images/logo.png"); 
```

不会工作。这是因为资源不再是文件系统上下文中的文件（它实际上是 Jar 中的 Zip 条目）。

相反，您需要使用`Class#getResource`which 将 a 返回`URL`到嵌入式资源。

```
new ImageIcon(getClass().getResource("../images/logo.png")); 
```

会更好地工作。但总的来说，建议使用资源的绝对路径，`new ImageIcon(getClass().getResource("/images/logo.png"));`因为它通常更难破解（恕我直言）

## 外部资源

图像的路径是相对于应用程序的执行点的。

在开发中，您可能不得不向上移动一个目录（`src`大概是从文件夹中移出）才能找到图像资源。这意味着您需要将 Jar 文件存储在一个文件夹中，该文件夹需要它升级一个级别才能找到图像资源。

如果可以的话，通常最好在可能的情况下将资源嵌入到 Jar 中。它使部署变得更容易，因为您减少了需要打包的文件数量，并使用户更难（有点）弄乱它；）

# matlab - 在数组中查找索引，使用索引作为查找，绘制 w/r/t 时间

> ID：14670197
> 
> 赞同：0
> 
> 时间：2013-02-03T06:57:58.110
> 
> 标签：matlab, octave

我正在寻找数组中的 n 个最大值，然后使用这些找到值的索引来*查找*另一个表示时间的数组。但我想知道如果我想将时间显示为连续变量，我该如何绘制它。我需要将数据归零吗？这对于我的用例来说不是更可取，因为我正在寻找节省内存。

假设我有数组 A，这是我正在寻找最大值的地方。然后我有数组 T，它代表时间戳。我希望我的情节显示连续时间，并且 plot() 不喜欢不同大小的参数。大多数人是如何处理这个问题的？

这是我到目前为止所得到的：

```
numtofind = 4;
A = m{:,10};
T = ((m{:,4} *  3600.0) + (m{:,5} * 60.0) + m{:,6});

[sorted, sortindex] = sort(A(:), 'descend');
maxvalues = sorted(1:numtofind);
maxindex = sortindex(1:numtofind);
corresponding_timestamps = T(maxindex);

%here i plot the max values against time/corresponding timestamps, 
%but i want to place them in the right timestamp and display time as continuous 
%rather than the filtered set:
plot(time_values, maxvalues); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:58:22.140

当您说“时间连续”时，您的意思是您希望时间从最小到最大吗？如果是这样，您可以排序`corresponding_timestamps`并使用它来重新排序`maxvalues`。即使你不这样做，你仍然`plot(time_values, maxvalues, '.')`可以得到一个不会用线条弄乱你的图表的散点图。

# .net - Salesforce oauth 授权端点错误

> ID：14670198
> 
> 赞同：-1
> 
> 时间：2013-02-03T06:58:09.387
> 
> 标签：.net, salesforce, oauth-2.0, windows-phone-8

oauth 授权端点错误（帮助！）我正在尝试导航到此端点，但出现错误：

> 网址不再存在。

[https://login.salesforce.com/services/oauth2/autho​rize?response_type=code&client_id="my clientID"&re...="my Uri"](https://login.salesforce.com/services/oauth2/autho%E2%80%8Brize?response_type=code&client_id=)

Salesforce 网络服务器代理流程的授权端点是否已更改，或者还有其他我遗漏的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:11:11.510

在那里。您可以将根 URL ( [https://login.salesforce.com/services/oauth2/authorize](https://login.salesforce.com/services/oauth2/authorize) ) 插入浏览器并查看它是否传回了 API 响应。您确定您的 URL 在您的应用中格式正确吗？是否有任何不必要的 URL 编码？

# vim - 如何制作 vim 文件类型插件

> ID：14670199
> 
> 赞同：2
> 
> 时间：2013-02-03T06:58:12.403
> 
> 标签：vim, plugins

我想制作一个`asm`vim 的文件类型插件（实际上）。在网上搜索了一会儿，发现应该在 ***~/.vim/ftplugin***文件夹中添加一个asm.vim。所以我在该文件夹中添加了新文件***asm.vim***并编写了以下代码：

```
map <F7> oTest<CR><Esc> 
```

一个很简单的vim脚本，只输出`Test`下一行的字符串。但我失败了，当我打开一个***xxx.asm***文件并按下`<F7>`按钮时，什么也没发生。代码有什么问题吗？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T09:14:48.427

你需要确保 Vim 实际检测到文件类型；`asm`在 中定义`$VIMRUNTIME/filetype.vim`，并且有语法，但还没有文件类型插件。检查

```
:set filetype? 
```

输出`asm`。如果没有，您需要进行检测。

你还需要有`:filetype plugin on`（在你的`~/.vimrc`）；否则，不会加载任何文件类型插件脚本。检查与`:scriptnames`。

另请注意，您不应在文件类型插件中定义*全局映射或命令。*使用`:noremap <buffer> <F7> ...`. 您可以使用 . 检查您的映射是否存在`:verbose map <F7>`。

# python - 自动刷新标签python

> ID：14670200
> 
> 赞同：0
> 
> 时间：2013-02-03T06:58:18.390
> 
> 标签：python, ubuntu, webkit, pygtk

```
# -*- Mode: Python; coding: utf-8; indent-tabs-mode: nil; tab-width: 4 -*-
### BEGIN LICENSE
# Copyright (C) 2012 Marios Papachristou mrmarios97@gmail.com
# This program is free software: you can redistribute it and/or modify it 
# under the terms of the GNU General Public License version 3, as published 
# by the Free Software Foundation.
# 
# This program is distributed in the hope that it will be useful, but 
# WITHOUT ANY WARRANTY; without even the implied warranties of 
# MERCHANTABILITY, SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR 
# PURPOSE.  See the GNU General Public License for more details.
# 
# You should have received a copy of the GNU General Public License along 
# with this program.  If not, see <http://www.gnu.org/licenses/>.
### END LICENSE

import gettext
from gettext import gettext as _
gettext.textdomain('quickbrowser')

from gi.repository import Gtk, WebKit # pylint: disable=E0611
import logging
logger = logging.getLogger('quickbrowser')

from quickbrowser_lib import Window
from quickbrowser.AboutQuickbrowserDialog import AboutQuickbrowserDialog
from quickbrowser.PreferencesQuickbrowserDialog import PreferencesQuickbrowserDialog

# See quickbrowser_lib.Window.py for more details about how this class works
class QuickbrowserWindow(Window):
    __gtype_name__ = "QuickbrowserWindow"

    def finish_initializing(self, builder): # pylint: disable=E1002
        """Set up the main window"""
        super(QuickbrowserWindow, self).finish_initializing(builder)

        self.AboutDialog = AboutQuickbrowserDialog
        self.PreferencesDialog = PreferencesQuickbrowserDialog
        self.goBack = self.builder.get_object('goBack')
        self.homeButton = self.builder.get_object('homeButton')
        self.refreshButton = self.builder.get_object('refreshButton')
        self.goButton = self.builder.get_object('goButton')
        self.currentaddresslabel = self.builder.get_object('currentaddresslabel')
        self.addressbar = self.builder.get_object('addressbar')
        self.viewwindow = self.builder.get_object('viewwindow')
        self.goForward = self.builder.get_object('goForward')
        self.zoomIn = self.builder.get_object('zoomIn')
        self.zoomOut = self.builder.get_object('zoomOut')
        self.webview = WebKit.WebView()
        self.viewwindow.add(self.webview)
        self.webview.show()

    def on_addressbar_activate(self, widget):
        address = widget.get_text()
        self.webview.open(address)

    def on_refreshButton_clicked(self, widget):
        self.webview.reload()

    def on_goBack_clicked(self,widget):
        self.webview.go_back();

    def on_goForward_clicked(self,widget):
        self.webview.go_forward();

    def on_zoomIn_activate(self,widget):
        self.webview.zoom_in();

    def on_zoomOut_activate(self,widget):
        self.webview.zoom_out();

    def on_goButton_clicked(self,widget):
        self.webview.open(self.addressbar.get_text()) 
```

我目前正在使用 python-webkit 在 Python 中开发 Web 浏览器。

上面的源代码是为了管理主窗口而编写的。

如何在标签内使用 webview.get_uri() 方法返回值不断显示当前 URL？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:14:24.590

```
while True:
    updateLocationBar() # ;) 
```

当然位置栏已经提供了这个？`self.webview.open()`您可以通过编写类似的包装器来调用您的标签修改函数

```
def self.webview.mysuperawesomeopen(uri):
    updateLocationBar()
    self.webview.open(uri) 
```

然后适当地修改调用。或者，如果您不想更改调用，只需移动现有`.open()`功能，例如

```
self.webview.openit = self.window.open
def self.window.open(uri):
    updateLocationBar()
    self.webview.openit(uri) 
```

**编辑：**您也可以在`self.window.open()`like上使用函数装饰器

```
def labelled(f):
    def labelgo(*args, **kwargs):
        updateLocationBar(*args, **kwargs)
        self.webview.open(*args, **kwargs)
    return labelgo

@labelled # You add this and leave the rest of self.window.open alone
def self.window.open(uri):
    ... 
```

如果您想进行概括，这将是一个更好的解决方案（并且您会使标记的装饰器更通用 - 我以这个简单为例）。

# java - Spring 测试 - @ContextConfiguration 排除基类上下文

> ID：14670201
> 
> 赞同：3
> 
> 时间：2013-02-03T06:59:09.433
> 
> 标签：java, spring, testing, junit

使用 spring 和 @ContextConfiguration 进行测试时，是否有排除某些基类上下文的选项？例如

```
@ContextConfiguration(locations = {"context1.xml", "context2.xml"})
public class Base{ 
```

和扩展类

```
public class someClass extends Base{ 
```

现在我希望 someClass 使用 context1.xml 但不是 context2.xml。有没有办法排除它？问题是：我的所有测试（300 个测试）都有一个基类。我希望他们**所有人**都使用 context1 ，这是一个覆盖原始上下文的模拟上下文。只有**一个**类应该使用原始上下文来对其进行测试（如果 Base 的位置中没有它，它将使用原始上下文）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T07:42:59.423

如前所述，排除上下文是不可能的。

但是，我建议您查看新的[Spring 3 bean 配置文件](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/new-in-3.1.html)。

通过指定/激活正确的配置文件，您应该能够以更清洁的方式实现相同的目标......

可以在[这里](http://dontpanic.42.nl/2011/07/advanced-unit-testing-with-your-spring.html)找到一篇关于使用 spring bean 配置文件进行单元/集成测试的好文章。

# haskell - 无可辩驳的模式在 Let 语句中失败了

> ID：14670205
> 
> 赞同：2
> 
> 时间：2013-02-03T06:59:32.453
> 
> 标签：haskell, design-patterns, let

我正在学习haskell，目前正在尝试从字符串中解析整数和浮点数。

但是，当在“342”或任何没有单个或多个非数字字符的“数字”上尝试我的 readNum 函数时，ghci 会向我报告：

> ***例外：parse.hs:125:18-46: 模式 (i, (a : as)) 的无可辩驳的模式失败

```
data Token
    = IntTok Int | FloatTok Float | EOF

readNum :: String->(Token, String)
readNum [] = (EOF, [])
readNum xs = let (i, (a:as)) = span isDigit xs   --This is line 125
                in (case a of
                        ('.') -> let (j, (b:c:bs)) = span isDigit as
                                        in (if ((toLower b) == 'e' && (c == '+' || c == '-' || (isDigit c)))
                                                then (let (k, d) = span isDigit bs in (FloatTok (read (concat [i,[a],j, [b],[c],k])::Float), d))
                                                else (FloatTok (read (concat [i,[a],j])::Float), (b:c:bs)))
                        _ -> (IntTok (read i::Int), (a:as))) 
```

`span isDigit xs`当返回一个空列表作为元组的第二个元素时，是否有更好的方法来处理这种情况？

-谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T08:12:29.733

您会收到错误消息，因为如果您使用像`"342"`then `span isDigit "342"`is just这样的简单 Integer `("342",[])`，则无法匹配`(l,a:as)`。应该始终匹配的模式称为无可辩驳的模式。正如您所发现的，let 绑定中的模式是无可辩驳的，所以...

您需要坚持在 let 绑定中始终匹配的模式。例如你可以做

```
readNum xs = let (i, ps) = span isDigit xs 
             in (case ps of 
                     ('.':as) -> let (j, qs) = span isDigit as in case qs of
                           b:c:bs -> if  ..........
                           _ -> error "not enough stuff after decimal number"
                     _ -> .... 
```

我给出了一个愚蠢的错误信息，但显然你应该在那里编写更明智的代码。

# java - 关于通过java根据条件移动序列化文件

> ID：14670207
> 
> 赞同：0
> 
> 时间：2013-02-03T06:59:36.320
> 
> 标签：java, file-io

仅当目标文件夹不包含该序列化文件时，我才必须制作一个程序将序列化文件从源文件夹复制到目标文件夹，因此第一个条件是检查我正在复制的文件是否已存在于目标文件夹中如果存在则不需要复制，如果不存在则复制，因此需要每秒检查文件是否存在

源文件夹是 C:\ter\ 目标文件夹是 C:\bvg\

要传输的文件是 gfr.ser

我已经提出了以下程序，但仍未实施检查，请告知我如何也实施此检查..

类 ScheduledTask 扩展 TimerTask {

```
public void run() {
    InputStream inStream = null;
    OutputStream outStream = null;

    try {
        File source = new File("C:\\ter\\");
        File target = new File("C:\\avd\\bvg\\");

        // Already exists. do not copy
        if (target.exists()) { 
            return;
        }

        File[] files = source.listFiles();
        for (File file : files) {
            inStream = new FileInputStream(file);
            outStream = new FileOutputStream(target + "/" + file.getName());

            byte[] buffer = new byte[1024];
            int length;
            // copy the file content in bytes
            while ((length = inStream.read(buffer)) > 0) {
                outStream.write(buffer, 0, length);
            }
            inStream.close();
            outStream.close();
        }
        System.out.println("File is copied successful!");
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

}

```
 the above approach is not working 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T07:05:30.313

你可以像这样使用类[`exists`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#exists%28%29)的方法[`java.io.File`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)。

```
 public void run() {
        InputStream inStream = null;
        OutputStream outStream = null;
        try {
            File source = new File("C:\\ter\\gfr.ser");
            File target = new File(" C:\\bvg\\gfr.ser");
            if (target.exists()){   // Already exists. do not copy
                 return;
            }
            inStream = new FileInputStream(source);
            outStream = new FileOutputStream(target);
            byte[] buffer = new byte[1024];
            int length;
            // copy the file content in bytes
            while ((length = inStream.read(buffer)) > 0) {
                outStream.write(buffer, 0, length);
            }
            inStream.close();
            outStream.close();
            System.out.println("File is copied successful!");
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

# python - 在 PySide tableview 中存储指向 JSON 树部分的“指针”

> ID：14670212
> 
> 赞同：0
> 
> 时间：2013-02-03T07:00:59.777
> 
> 标签：python, json, pyside

我有一些由大量嵌套的 JSON 表示的数据，我用 Python（特别是 PySide）解析和填充 UI。

我的 UI 本质上是两个窗格，左侧是带有扁平树的表格视图，右侧是树视图。单击表格视图中的单元格应重新填充右侧的树视图。

我遇到的问题是，如何在表格视图的模型中设置指向 JSON 数据中相应条目的指针？（即如何在我的平面列表中获得一个条目以指向我的 JSON 数据中的正确位置？）

我想到了使用 Win32 中旧 MFC 时代的技巧，其中您为 UI 设置任意项目数据，但是查看 Qt 表视图类，它们的项目数据函数似乎在做一些不同的事情。

有什么想法吗？

感谢您的时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:23:42.173

由于您的数据是跨视图共享的，因此使用单个模型更有意义。使您的主模型成为树模型。然后，您可以编写一个代理模型（从 子类[`QAbstractProxyModel`](http://qt-project.org/doc/qt-4.8/qabstractproxymodel.html)化），为您的`QTableView`. 您现在可以轻松获得指向主树模型的“指针”。

如果您只想显示树模型的一部分，可以使用[`setRootIndex`](http://qt-project.org/doc/qt-4.8/qtreeview.html#setRootIndex).`QTreeView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:25:53.117

将导航序列化为表示的值，并在您要访问该项目时对其进行解析。例如：

```
foo.1->bar -> data['foo'][1]['bar'] 
```

# android - 懒惰地填充 Android ViewFlipper 孩子

> ID：14670213
> 
> 赞同：0
> 
> 时间：2013-02-03T07:01:02.673
> 
> 标签：android, android-widget

我有一个 ViewFlipper，其中显示了大量从 sqlite 数据库加载的图像。如果我在启动时初始化每个 ViewFlipper 子项，则会在从数据库加载所有图像时出现不合理的延迟。相反，我想在用户从一个孩子转换到下一个孩子之前一次“懒惰地”填充视图。我需要在调用 setDisplayedChild(next)*之前*填充下一个视图，因为我已将动画应用于过渡。但是 ViewFlipper 似乎没有 getChildAt(int i) 方法可以让我做到这一点 - 你似乎只能 getDisplayedChild()。有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:10:36.660

通过在视图翻转器之外保留视图列表来修复它 - doh

# r - 从 .Rprofile 加载 R dev_mode 时出错

> ID：14670217
> 
> 赞同：1
> 
> 时间：2013-02-03T07:01:37.047
> 
> 标签：r, devtools, dev-mode

我目前正在 R 中进行大量开发，所以我想在 R 启动时启用 dev_mode。

我尝试添加`dev_mode()`到我的 .Rprofile，这里给出：

```
library("devtools")
library("testthat")

dev_mode() 
```

但是这样做会出现以下错误：

`Error in is_library(path) : could not find function "file_test"`

并且 dev_mode 在启动时未加载。有人知道如何解决这个问题吗？

R 2.15.1-2，开发工具 1.0，测试 0.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T09:20:08.323

`file_test`来自`utils`包，所以可能没有加载。尝试：

```
library(utils) 
```

在您的`.Rprofile`.

正如评论的那样，没有它，这对我有用...... YMMV......

# json - 改变 CakePHP 关联模型的方式

> ID：14670220
> 
> 赞同：0
> 
> 时间：2013-02-03T07:01:56.873
> 
> 标签：json, cakephp, restkit

我正在尝试拆分一些 JSON 字符串以便被这个[RestKit](http://restkit.org/)的 iPhone 库解析，但是 CakePHP 正在拆分一个不兼容的字符串。例如，下面的字符串是它当前正在拆分的内容：

```
1\. {"Question":{"id":"1","content":"Test","player_id":"1","points":"0","votes":"0","created":"0000-00-00 00:00:00"},"Player":{"id":"1","username":"player_test"}} 
```

我需要有类似的东西：

```
2\. {"Question":{"id":"1","content":"Test","player_id":"1","points":"0","votes":"0","created":"0000-00-00 00:00:00","Player":{"id":"1","username":"player_test"}}} 
```

请注意，玩家响应应该是问题的一部分。

模型在 Cake 上的设置方式是`'Question' belongs to 'Player'`后者`hasMany 'Question'`

我正在寻找告诉 Cake 输出类似于上面的响应 #2 的正确方法。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:05:59.517

您可以使用`afterFind()`Question 模型的回调将 Player 记录嵌套在 Question 记录中。或者获取后根据需要修改结果数组。[Hash](http://api.cakephp.org/class/hash)类的各种功能可能会帮助您重新格式化数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:03:50.763

您可以向 Question 模型添加自定义方法，以所需格式返回结果。这将使您的代码保持干净，并在您的模型中保留数据处理/格式化逻辑（在大多数情况下应该在该位置）；

例如，在您的 Question 模型中：

```
public function getQuestionsForPlayer($playerId)
{
    $results = $this->find('all', array(
        'fields' => array(/* fields */),
        'conditions' => array(/* ..... */
        /* etc */
    ));

    // Process your result to be in the right format
    // Hash::extract() and other Hash:: methods
    // may be helpful here as @ADmad mentioned

    return $processedResult;
} 
```

正如 ADmad 所提到的，Hash 实用程序可能会有所帮助。文档位于此处：

[http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html)

# ruby-on-rails-3.2 - Ember-Data 能否很好地扩展复杂 web 应用程序的非 CRUD 设置

> ID：14670225
> 
> 赞同：0
> 
> 时间：2013-02-03T07:02:31.067
> 
> 标签：ruby-on-rails-3.2, ember.js, crud, ember-data

我正在使用 EmberJS，现在计划将 ember-data 集成到模型中。我们使用 Rails/MongoDB 作为后端。我浏览了 Ember 网站上的示例和更新的文档，但在所有讨论/示例中都有一个共同点，即我们必须让数据在 CRUD 中流动，并且有效地 rails 将所有内容作为资源暴露在 router.rb 中

根据我的实际经验，触摸复杂后端的 REST API 可能不会对数据库中的每个模型都保持 CRUD。会有很多 REST API 在各种查询字符串上提供 JSON。数据存储如何准确地应用于此类情况。是否有任何活生生的例子/参考。

从广义上讲，从 Tom Dale 关于 Ember Data 的演讲中提取将有助于支持离线数据存储，但整个概念如何适用于依赖数据库查询的站点，这些查询比 Ember DS 的 find_by_id（Rails 等效项）更复杂。

对复杂服务的 DataStore 示例源/投影的任何引用都可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:46:40.617

如果事情变得非标准，我相信您会想要编写自己的适配器而不是使用 RESTAdapter。通过这样做，您可以定义适配器如何从服务器查询和加载记录。RESTAdapter 旨在用于基本查询，但可以扩展以进行小的修改。此链接显示了一个相当不错的自定义适配器。

[https://github.com/karmi/ember-data-elasticsearch/blob/master/ember-data/lib/adapter/elasticsearch_adapter.js](https://github.com/karmi/ember-data-elasticsearch/blob/master/ember-data/lib/adapters/elasticsearch_adapter.js)

您可能希望引用此链接，因为上述应用程序应该仍然可以工作，但事情仍在进行中，这显示了 API 的任何重大更改。

[https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md](https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md)

# python - 如何删除 Python 列表中不区分大小写的冗余？

> ID：14670227
> 
> 赞同：2
> 
> 时间：2013-02-03T07:02:37.000
> 
> 标签：python

如何删除此列表中的冗余：['#ffffff','#FFFFFF'] 我知道这不是冗余，但它们的值仍然与我处理 CSS 文件时相同。知道怎么做吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-03T07:06:39.267

你可能会想要这个：

```
l = list(set(i.lower() for i in l)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:06:05.540

希望这可以帮助：

```
l = ['#ffffff', '#FFFFFF', '#123456']
l = [i.lower() for i in l]
l = set(l) 
```

或者

```
l = ['#ffffff', '#FFFFFF', '#123456']
l = set(i.lower() for i in l) 
```

编辑：根据蛇和咖啡的建议重命名列表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T07:06:16.230

```
>>> colors = ['#ffffff','#FFFFFF']
>>> list(set(map(str.lower, colors)))
['#ffffff'] 
```

查看[地图](http://docs.python.org/2/library/functions.html#map)

或者

```
>>> list(set(color.lower() for color in colors))
['#ffffff'] 
```

# php - 如何在php中读取txt文件

> ID：14670233
> 
> 赞同：-3
> 
> 时间：2013-02-03T07:03:46.047
> 
> 标签：php

我的服务器中有一个数据目录，并且有很多文本文件，例如

```
text1.txt
abc.txt
def.txt 
```

现在我需要从每个文件中读取包含特定单词（如（emp_name））的特定行，并在我的 php 项目中回显整行。如何做到这一点任何帮助表示感谢提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:09:20.910

你的方向应该是这样的：

```
1\. firstly open the file , through fopen()
2\. then by file_get_contents() or fread() to get the content 
3\. then search for the desired word in the file 
```

**编辑：**
这样做：

```
<?php
$data = file_get_contents("input.txt"); //read the file
if(strpos($data,"str_to_find")==false){ //check if string exists in file
echo "str not found";
}
else 
echo "str found";

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:07:54.643

PHP代码：

```
$myFile = "testFile.txt";
$fh = fopen($myFile, 'r') 
```

如果你想逐字阅读

看看[这个](http://www.java-samples.com/showtutorial.php?tutorialid=982)_

[这](http://www.tizag.com/phpT/fileread.php)也是

# c# - 如何使用另一个用户控件事件刷新用户控件网格

> ID：14670236
> 
> 赞同：1
> 
> 时间：2013-02-03T07:04:14.377
> 
> 标签：c#, winforms, user-controls

我正在使用 C# 开发 Windows 应用程序。需要以下提到的场景的解决方案。我有包含两个用户控件的 Windows 窗体。第一个用户控件包含网格，当用户单击网格的任何行时，另一个用户控件显示所选单元格的详细信息。当我从详细信息控件中修改任何数据时，我需要刷新父控件中的数据网格。

我正在使用下面的代码来加载子控件。

```
private void GridInquiry_CellClick(object sender, DataGridViewCellEventArgs e)
{
    PanelParentControl.Controls.Clear();
    InquiryDetailsCls.InquiryID =  Convert.ToInt32(GridInquiry.SelectedRows[0].Cells[0].Value.ToString());
    CtrlInqDetails inqDetails = new CtrlInqDetails(InquiryDetailsCls.InquiryID, 1);
    inqDetails.Dock = DockStyle.Fill;
    PanelParentControl.Controls.Add(inqDetails);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:09:36.880

我可以向您推荐使用[C# 的通知中心](http://www.codeproject.com/Tips/438582/Csharp-NotificationCenter,)，通过它您可以创建一个全局事件，在代码中的任何位置注册此事件，并从代码中的任何位置触发此事件。

# xcode - 如何在 UITableViewcell 中找到特定单元格高度的高度？

> ID：14670239
> 
> 赞同：0
> 
> 时间：2013-02-03T07:04:24.840
> 
> 标签：xcode

我有一个`UITableView`，单元格有不同的随机高度。每个单元格都包含一个按钮，当按下按钮时，我想获得那个特定的单元格高度。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-06T11:50:46.780

```
(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

   //Here calculate your height
   return height;

} 
```

现在无论您想在哪里找到单元格高度

首先找到indexpath

```
 NSIndexPath *indexPath = [tableView indexPathForCell:cell] 
```

然后找到该索引路径上的单元格的高度，如下所示

```
 CGFloat cellHeight = [self tableView:tableView heightForRowAtIndexPath:indexPath]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T10:19:11.990

你可以试试这个。

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Calculate a height based on a cell
    if (!self.cutomCell)
    {
        self.cutomCell = [self.myTableView dequeueReusableCellWithIdentifier:@"CustomCell2"];
    }

    // Configure the cell
    self.cutomCell.introductionLabel.text   = self.infoArray[indexPath.row];

    // Layout the cell
    [self.cutomCell layoutIfNeeded];

    // Get the height for the cell
    CGFloat height = [self.cutomCell.contentView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize].height;

    return height;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:36:06.437

我认为您正在追求这样的东西；

```
-(IBAction)buttonPressed:(id)sender {

    UIButton *myButton = (UIButton *)sender;
    NSLog(@"%0.2f", myButton.superview.frame.size.height);

} 
```

**来自文档：** “视图可以嵌入其他视图并创建复杂的视觉层次结构。这在嵌入的视图（称为子视图）和执行嵌入的父视图（称为父视图）之间创建了父子关系。”

此外，您需要将您的按钮分配给上述方法。这可以在界面生成器中完成，或者可以在`cellForRowAtIndexPath`看起来类似于此的方式中完成：

```
UIButton *heightButton = (UIButton *)[cell viewWithTag:1];
[heightButton addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T07:14:45.510

`heightForRowAtIndexPath`不用于获取特定单元格的高度。虽然这是 UITableView 的 DataSource 方法，用于设置`UITableViewCell`加载时的高度：

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 60.0;  // Set the cell height
} 
```

# android - 如何在 Windows 7 上设置 cocos2d-x ..需要 n00bs 指南！！？

> ID：14670241
> 
> 赞同：-1
> 
> 时间：2013-02-03T07:04:57.873
> 
> 标签：android, windows, cocos2d-x

好吧，我在 Windows 7 ,64 位上，有 Windows 的 ADT 捆绑包。我对 Windows 7 上的所有教程（a）cocos2d-x 为 android 设置有点困惑，而且它们太旧了..在那之后cocos2d-x 已经更新，我不想尝试和试验我当前为 android 设置的完美环境......虽然我已经下载了 CDT 插件，没有别的......

如果有人帮助为 Windows 7 配置 cocos2d-x 会很好...

(a)
[http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)
[http://gameit.ro/2012/01/creating-an-iphone-and- android-cocos2d-x-hybrid-project-updated/](http://gameit.ro/2012/01/creating-an-iphone-and-android-cocos2d-x-hybrid-project-updated/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:16:35.507

[http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Chapter_1_-_How_to_Create_a_New_cocos2d-x_project_on_multi-platforms#4-Start-with-Android](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Chapter_1_-_How_to_Create_a_New_cocos2d-x_project_on_multi-platforms#4-Start-with-Android)

这完全适用于 Windows 7，但您需要两件事：

1.  您将需要具有管理员权限，否则它会创建许多程序本身无法访问的文件，事情变得非常艰难。

2.  您必须在计算机中为“NDK_ROOT”设置系统环境变量。这是一个如何这样做的例子 - [http://www.windows7hacker.com/index.php/2010/05/how-to-addedit-environment-variables-in-windows-7/](http://www.windows7hacker.com/index.php/2010/05/how-to-addedit-environment-variables-in-windows-7/)

经过一周的痛苦和努力，这对我有用。我希望这首先对你有用。祝你好运.. ：）

# android - 无法将更新的 Android 应用程序上传到 Play 商店。以前的证书指纹是空白的

> ID：14670255
> 
> 赞同：2
> 
> 时间：2013-02-03T07:06:58.303
> 
> 标签：android, apk, google-play

在我尝试将更新的 APK 上传到 Play 商店后，我收到此错误：

> **上传失败**
> 您上传的 APK 使用与之前的 APK 不同的证书进行签名。您必须使用相同的证书。您现有的 APK 使用具有指纹的证书进行签名：
> [ ]
> ，并且用于签署您上传的 APK 的证书具有指纹：
> [ SHA1: FB:BC:61:54:B3 :26:6C:73:92:68:65:EA:0C:81:69:81:2B:39:21:66]

所以我必须找到一个没有指纹的密钥库。我可以上传未签名的 APK 吗？我已经好几年没有更新这个应用程序了，但我仍在使用我曾经使用过的唯一密钥库。

**编辑**，我从 Play 商店下载了实时应用程序。我不知道如何获取签名指纹，但我使用的密钥库与实时应用程序在同一分钟到期（2036 年），所以它绝对是我尝试使用的密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:18:35.907

您不能在 GooglePlay 上上传未签名的 APK。

[http://developer.android.com/tools/publishing/preparing.html][1]

也许您的密钥库已过期。还记得当初生成时设置的有效期吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:14:53.920

这一定是谷歌的某种错误。在我打开支持票后，他们最终解决了问题。

我的 APK 现在上传，我没有修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-22T09:19:11.860

这个解决方案对我有用（但你应该找到你原来的密钥库）

`apk`1.从Play商店下载你的原版

2.将您的apk替换为`java\jdk...\bin`

3.`cmd windows`打开并移动到您的文件所在的目录`apk`

4.执行此命令`keytool -list-printcert -jarfile yourfile.apk`，此命令将返回有关您的文件的所有信息`apk (keystore and password)`

5.找到你的密钥库`(.jks)`

6.generate your new `apk`from your`keystore`

# asp.net-mvc-3 - 检查集合长度 - 不显眼的验证 - asp.net mvc 3、4

> ID：14670260
> 
> 赞同：4
> 
> 时间：2013-02-03T07:08:08.803
> 
> 标签：asp.net-mvc-3, unobtrusive-validation

我有[自定义的 ValidationAttribute 和实现的 IClientValidatable](https://github.com/ypapax/MyCollectionCountValidatorClient)。它使用（Html.BeginForm（））效果很好，但使用（Ajax.BeginForm（））不起作用。

客户端代码：

```
 $(function() {
        jQuery.validator.unobtrusive.adapters.addBool('collectionLength');
    }); 
```

服务器代码：

```
/// <summary>
/// Require a minimum length, and optionally a maximum length, for any IEnumerable
/// </summary>
sealed public class CollectionMinimumLengthValidationAttribute : ValidationAttribute, IClientValidatable
{
    const string errorMessage = "{0} must contain at least {1} item(s).";
    const string errorMessageWithMax = "{0} must contain between {1} and {2} item(s).";
    int minLength;
    int? maxLength;

    public CollectionMinimumLengthValidationAttribute(int min)
    {
        minLength = min;
        maxLength = null;
    }

    public CollectionMinimumLengthValidationAttribute(int min, int max)
    {
        minLength = min;
        maxLength = max;
    }

    //Override default FormatErrorMessage Method  
    public override string FormatErrorMessage(string name)
    {
        if (maxLength != null)
        {
            return string.Format(errorMessageWithMax, name, minLength, maxLength.Value);
        }
        else
        {
            return string.Format(errorMessage, name, minLength);
        }
    }

    public override bool IsValid(object value)
    {
        IEnumerable<object> list = value as IEnumerable<object>;

        if (list != null && list.Count() >= minLength && (maxLength == null || list.Count() <= maxLength))
        {
            return true;
        }
        else
        {
            return false;
        }
    }

     public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule { ValidationType = " CollectionMinimumLengthValidation", ErrorMessage = FormatErrorMessage("Error") };
        rule.ValidationParameters.Add("min", minLength);
        rule.ValidationParameters.Add("max", maxLength);

        yield return rule;
    }
} 
```

CollectionMinimumLengthValidation.js 文件：

```
jQuery.validator.addMethod("CollectionMinimumLengthValidation", function (value, element, param) {
    debugger;
    return false;
}); 
```

# c# - 使用 WebClient 下载时操作超时错误

> ID：14670261
> 
> 赞同：1
> 
> 时间：2013-02-03T07:08:13.137
> 
> 标签：c#, http

我收到操作超时异常。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Net;

namespace Timer1
{
    class Program
    {
        static void Main(string[] args)
        {

            Timer t = new Timer(TimerCallback, null, 0, 420000); // 7 minutes

        }
        private static void TimerCallback(Object o)
        {

            string url = string.Empty;
            WebClient client = new WebClient();
            url = @"http://myurl.com";
            client.DownloadString(url);

        }
    }
} 
```

有没有办法增加超时属性？请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T07:18:46.243

最简单的答案是使用`client.Timeout = 420000`( [WebRequest.Timeout](http://msdn.microsoft.com/en-us/library/system.net.webrequest.timeout.aspx) )，但如果您打算使用计时器来执行此操作，您不妨尝试使用异步版本。类似于[为 webClient.DownloadFile() 设置超时的内容](https://stackoverflow.com/questions/601861/set-timeout-for-webclient-downloadfile)

# php - 访问 public_html 文件夹外的 php 代码

> ID：14670263
> 
> 赞同：1
> 
> 时间：2013-02-03T07:08:32.470
> 
> 标签：php, html, twitter-bootstrap

我正在尝试使用 Twitter 引导程序作为前端和 PHP 作为背后的代码来设置一个新网站。

我使用的目录结构如下，相当标准

```
c:\xampp\htdocs\app
c:\xampp\htdocs\app\application\configs
c:\xampp\htdocs\app\application\modules
c:\xampp\htdocs\app\data\
c:\xampp\htdocs\app\data\logs
c:\xampp\htdocs\app\data\sessions
c:\xampp\htdocs\public_html\
c:\xampp\htdocs\public_html\css
c:\xampp\htdocs\public_html\js
c:\xampp\htdocs\public_html\img 
```

我的 Apache 配置相当简单，包括

```
<VirtualHost *:80>

ServerName vinner.localhost
DocumentRoot C:/xampp/htdocs/app/public_html
SetEnv APPLICATION_ENV "development"
<Directory C:/xampp/htdocs/app/public_html> 
    DirectoryIndex index.php index.html index.htm \
               default.php default.asp default.shtml default.html default.htm \        AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

以前我在 /public_html 文件夹中有我的 PHP 代码，但这显然不是很好的做法，所以我将它移到 c:\xampp\htdocs\app\application\modules 但是我不知道如何指向任何一个 POST直接查询 PHP 页面，或创建通用 PHP 模板/包含文件，以便轻松访问我的 PHP 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:18:32.567

您应该在“public_html”目录中有一个文件，通常称为“index.php”。然后，您的 Web 服务器规则（例如 .htaccess 或服务器配置）将所有请求（或者可能所有不针对“public_html”中存在的文件的请求）指向该“public_html/index.php”。这通常是“public_html”下唯一的 PHP 文件，但有时可能有多个用于不同目的（例如，不同的用于提供图像）。

从那里您可以使用相对路径包含其余代码，以下每个都是等效的（“public_html/index.php”中的代码）：

```
include __DIR__ . '/../application/[application-code].php'; 
```

和：

```
include dirname(__DIR__) . '/application/[application-code].php'; 
```

其中“应用程序代码”是应用程序的入口点，通常命名为“bootstrap.php”。

# c# - 比较 2 个相同索引处的 int 类型列表

> ID：14670264
> 
> 赞同：0
> 
> 时间：2013-02-03T07:08:43.243
> 
> 标签：c#, .net, list, loops

我有 2 个列表来跟踪网格上的 x 和 y 坐标。

我循环遍历高度然后宽度，然后使用 if 检查来查看 w 和 h 值是否在相同索引的列表中。

这是我得到的，但它工作不正常。

```
for (int h = yMin; h <= yMax; h++)
{
  for (int w = xMin; w <= xMax; w++)
  {
    if (x[w] == (w) && y[h] == (h)) 
    {
       //do some code
    }
  }
} 
```

我还尝试在列表上使用 .Contains 方法，但不会在相同的索引处比较它们......我不在乎它们在列表中的索引，只要它们在两者中的索引相同。

```
if (x.Contains(w) && y.Contains(h)) 
```

我正在寻找某种方法来测试它们在列表中找到的索引。该列表也可以包含超过 1 个相同的数字。

```
if (x.Contains(w) && y.Contains(h))
{
    if (x.FoundIndex(w). == y.FoundIndex(h))
    {
        // this would be awesome if it worked!!!!
    }
} 
```

只是关于变量的注释.. yMin 和 xMin 从 0 开始，for 循环在 do while 循环中，每次迭代都会将它们增加 1。yMax 和 xMax 是我们在网格内部查看的正方形的大小。

也许有一个更好的方法，我只是不知道。我试图找到一个坐标数据类型/对象，但没有成功。

我能想到的唯一方法是循环遍历 x 列表，并将每个索引与同一索引处的 y 列表进行比较。似乎应该有一种更清洁的方式来做到这一点。

请帮忙！

编辑 1：在考虑了我想要完成的事情之后，我能够把我的头绕在它周围并想出这个......这就是我的代码在我的程序中的样子，只是为了你@DJ KRAZE

```
for (int intCnt = 0; intCnt < lstXCoord.Count(); intCnt++)
{
    if (lstXCoord[intCnt] == intWidth)
    {
        if (lstYCoord[intCnt] == intHeight)
        {
            // do my code..
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:11:21.780

试试这个：

```
if (x.IndexOf(w) == y.IndexOf(h))
{
    // do your stuff
} 
```

# git - git diff - 只显示遥控器上的新内容

> ID：14670265
> 
> 赞同：10
> 
> 时间：2013-02-03T07:08:43.273
> 
> 标签：git, git-diff

我在 github 上有一个本地仓库和一个远程仓库。出于商业原因，它们不同步。我已经在我保留的本地做了很多工作，现在我正在手动将任何新的远程添加到我的本地。没有分支机构。

当我使用命令时，

```
git diff --color master..origin/master 
```

我得到了很好的结果，显示了变化......我添加到本地 repo 的内容标有 - 符号，并显示为红色；而遥控器上的内容显示为绿色并带有 + 号。

有没有办法**只显示远程**而不是本地的新内容？也就是说，向我显示遥控器上的任何新文件，并向我显示遥控器上文件中的任何新行或修改行（显示所有绿色+）

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-12T14:47:33.607

我相信您可以在命令的两个分支之间放置 3 个点，然后它只在第二个分支中执行相对于第一个分支的新功能，即

```
git diff master...feature 
```

查看功能的新功能，以及

```
git diff feature...master 
```

看看有什么新的主人。在您的情况下，功能可以`origin/master`并且应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:50:38.813

您可以与共同祖先进行区分：

```
git diff `git merge-base master origin/master` origin/master 
```

或者使用您之前的获取：

```
git diff origin/master@{1} origin/master 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-04T08:29:59.013

试试看`git help rev-list`。您可能正在寻找的选项是`--right-only`，所以也许这可以满足您的需求：

```
git diff --color --right-only master..origin/master 
```

# ruby-on-rails - Rails 自动完成多个类别

> ID：14670266
> 
> 赞同：0
> 
> 时间：2013-02-03T07:08:54.343
> 
> 标签：ruby-on-rails, jquery-ui, autocomplete

我正在关注[Railscasts #399](http://railscasts.com/episodes/399-autocomplete-search-terms)使用 jquery-ui 的自动完成功能在我的搜索框中实现自动完成功能。但是，我还希望能够包含每个搜索建议所属的类别并对建议进行分组，类似于 Pandora 在歌曲/艺术​​家/专辑上的匹配方式。

我的模型如下所示：

```
class SearchSuggestion < ActiveRecord::Base
  attr_accessible :popularity, :term, :type

  def self.terms_for(prefix)
     suggestions = where("term like ?", "#{prefix}_%")
     suggestions.order("popularity desc").limit(10).pluck(:term)
  end
end 
```

我的控制器是这样的：

```
class SearchSuggestionsController < ApplicationController
  def index
    render json: SearchSuggestion.terms_for(params[:term])
  end
end 
```

如何修改 terms_for 以便我可以在我的 json 中包含 :type 以自动完成可以处理的格式，我将如何渲染它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:17:47.280

我找到了一种方法来做我想做的事，所以我想我会回答我自己的问题。我发现了方便的收集方法，并像这样编写了我的函数：

```
def self.terms_for(prefix)
   suggestions = where("term like ?", "#{prefix}_%").order("popularity desc").limit(10)
   suggestions.collect {|suggestion| {"value" => suggestion["term"], "type" => suggestion["suggestion_type"] }}
end 
```

# python - Python 处理大量线程？

> ID：14670267
> 
> 赞同：2
> 
> 时间：2013-02-03T07:08:54.117
> 
> 标签：python, multithreading, parallel-processing, python-stackless

```
# data is a list  

Threading_list=[]

class myfunction(threading.Thread):

    def __init__(self,val):
        .......
    .......

     def run(self):
        .......
        ....... 

for i in range(100000):

    t=myfunction(data[i]) # need to execute this function on every datapoint 
    t.start()
    Threading_list.append(t)

for t in Threading_list:
    t.join() 
```

这将创建大约 100000 个线程，但我最多可以创建 32 个线程吗？这段代码可以做哪些修改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T07:55:15.550

很少需要创建如此多的 Python 线程。更重要的是，我很难想象其中的原因。有合适的架构模式来解决创建并行执行代码的任务，这些任务限制了线程的数量。其中之一是[反应堆](http://www.cse.wustl.edu/~schmidt/PDF/reactor-siemens.pdf)。

你想做什么？

请记住，由于[GIL](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)，Python 线程不会为计算任务带来任何性能提升，即使在多处理器和多内核系统上也是如此（顺便说一句，是否有 100000 个内核的系统？我怀疑。:)）。提升的唯一机会是如果计算部分是在用 C/C++ 编写的模块内执行的，这些模块在不获取 GIL 的情况下完成工作。通常 Python 线程用于并行执行包含阻塞 I/O 操作的代码。

**UPD：**注意到 stackless-python 标签。AFAIK，它支持微线程。但是，目前还不清楚您要做什么。

如果您只是尝试处理 100000 个值（对每个值应用一个公式？），最好编写如下内容：

```
def myfunction(val):
    ....
    return something_calculated_from_val

results = [myfunction(d) for d in data] # you may use "map(myfunction, data)" instead 
```

它应该会好得多，除非`myfunction()`执行一些阻塞 I/O。如果确实如此，`ThreadPoolExecutor`可能真的有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:04:22.997

[这是一个示例，它将通过ThreadPoolExecutor](http://docs.python.org/dev/library/concurrent.futures#concurrent.futures.ThreadPoolExecutor)使用 32 个线程来计算任意长度列表的平方。正如 Ellioh 所说，在某些情况下您可能不想使用线程，因此您可以轻松切换到[ProcessPoolExecutor](http://docs.python.org/dev/library/concurrent.futures#concurrent.futures.ProcessPoolExecutor)。

```
import concurrent.futures

def my_function(x):
    return 2**x

data = [1, 6, 9, 3, 8, 4, 213, 534]

with concurrent.futures.ThreadPoolExecutor(max_workers=32) as executor:
    result = list(executor.map(my_function, data))

print(result) 
```

# qt - Qt QLabel 无法调整大小

> ID：14670272
> 
> 赞同：0
> 
> 时间：2013-02-03T07:10:01.187
> 
> 标签：qt, user-interface, qlabel

我实现了 QLabel 很像 Qt 的 ImageViewer 示例，除了我使用 QGridLayout 来定位我的小部件。我还实现了类似的行来使用 QScrollBar 缩放我的 QLabel，但是 QLabel 并没有像在 QScrollArea 内那样缩放。我不确定它是否与某种 GridLayout 管理问题或其他问题有关。3 天以来，我一直在到处阅读并尝试不同的事情。下面我列出了我的代码的相关部分。

在我的查看器类构造函数中：

```
{
imageLabel1 = new QLabel;
imageLabel1->setSizePolicy(QSizePolicy::Minimum, QSizePolicy::Minimum);
imageLabel1->setScaledContents(true);

scrollArea1 = new QScrollArea;
scrollArea1->setWidget(imageLabel1);
scrollArea1->setWidgetResizable(true);

....
QGridLayout *centralLayout = new QGridLayout;
centralLayout->addWidget(scrollArea1, 0, 0);
...} 
```

和我的 scaleImage 方法：

```
void Viewer::scaleImage1(int factor)
{
  Q_ASSERT(imageLabel1->pixmap());
  scaleFactor *= (1 + factor);
  //imageLabel1->resize(scaleFactor* imageLabel1->pixmap()->size());

  imageLabel1->pixmap()->toImage().scaled(scaleFactor* imageLabel1->pixmap()->size(), Qt::KeepAspectRatio, Qt::FastTransformation);
  imageLabel1->adjustSize();

  adjustScrollBar(scrollArea1->horizontalScrollBar(), factor);
  adjustScrollBar(scrollArea1->verticalScrollBar(), factor);

  imageLabel1->update();
  } 
```

我的 scaleImage1 函数是一个公共插槽，它接收来自 0 到 2 之间的滚动条的信号，因此，在 scaleFactor 中，imageLabel1 被设计为能够放大到其原始大小的 3 倍。但是当我运行代码时，我没有观察到 imageLabel 在 QScrollArea 内变大，我在 imageViewer 演示中看到了这一点。imageLabel1 在加载时仅保留原始大小，并且不响应滚动条的 valueChange()。

我非常感谢您的建议/提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:06:49.397

我认为是因为您将 QSizePolicy::Minimum 设置为 imageLabel，请尝试使用[MinimumExpanding 或其他](http://doc.qt.digia.com/4.7-snapshot/qsizepolicy.html#Policy-enum)更适合您需求的方法。

# asp.net - 自动年龄计算 ASP.Net

> ID：14670273
> 
> 赞同：0
> 
> 时间：2013-02-03T07:10:06.237
> 
> 标签：asp.net, count, calculated-field, automatic-updates

请看下图。我想通过输入他们的生日信息来自动计算用户的年龄。更多解释见下图。 ![在此处输入图像描述](../Images/bdd7343d0a2f1bf38c82bd397eb1daab.png)

这是我的 register.aspx 页面的完整代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%@ Page Language="C#" Debug ="true" %>
<%@ Import Namespace="System.Data.OleDb" %>
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<head runat="server">
<script type="text/c#" runat="server">

  protected void AccessDataSource1_Inserted(object sender, SqlDataSourceStatusEventArgs e)
  {
      string query = "SELECT @@IDENTITY";
      OleDbCommand cmd = new OleDbCommand(query, (OleDbConnection)e.Command.Connection);
      int newid = (int)cmd.ExecuteScalar();  
      Response.Redirect("registerpage2.aspx?id=" + newid);
  }
</script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Register</title>
<style type="text/css">
.style1 {
    background-image: url('images/REGISTER.jpg');
}
#form2 {
    height: 75px;
    padding: 0px;
    margin: 0px;
    table-layout: auto;
    border-collapse: collapse;
    border-spacing: 0px;
}
.style2 {
    border-width: 0px;
}
.style4 {
    text-align: right;
}
.style5 {
    margin-bottom: 0px;
}
.style6 {
    text-align: center;
}
</style>
<script type="text/javascript">
<!--
function FP_swapImgRestore() {//v1.0
 var doc=document,i; if(doc.$imgSwaps) { for(i=0;i<doc.$imgSwaps.length;i++) {
  var elm=doc.$imgSwaps[i]; if(elm) { elm.src=elm.$src; elm.$src=null; } } 
  doc.$imgSwaps=null; }
}

function FP_swapImg() {//v1.0
 var doc=document,args=arguments,elm,n; doc.$imgSwaps=new Array(); for(n=2; n<args.length;
 n+=2) { elm=FP_getObjectByID(args[n]); if(elm) { doc.$imgSwaps[doc.$imgSwaps.length]=elm;
 elm.$src=elm.src; elm.src=args[n+1]; } }
}

function FP_preloadImgs() {//v1.0
 var d=document,a=arguments; if(!d.FP_imgs) d.FP_imgs=new Array();
 for(var i=0; i<a.length; i++) { d.FP_imgs[i]=new Image; d.FP_imgs[i].src=a[i]; }
}

function FP_getObjectByID(id,o) {//v1.0
 var c,el,els,f,m,n; if(!o)o=document; if(o.getElementById) el=o.getElementById(id);
 else if(o.layers) c=o.layers; else if(o.all) el=o.all[id]; if(el) return el;
 if(o.id==id || o.name==id) return o; if(o.childNodes) c=o.childNodes; if(c)
 for(n=0; n<c.length; n++) { el=FP_getObjectByID(id,c[n]); if(el) return el; }
 f=o.forms; if(f) for(n=0; n<f.length; n++) { els=f[n].elements;
 for(m=0; m<els.length; m++){ el=FP_getObjectByID(id,els[n]); if(el) return el; } }
 return null;
}
// -->
</script>
</head>

<body onload="FP_preloadImgs(/*url*/'images/hover home.jpg',/*url*/'images/hover LCUP.jpg',/*url*/'images/hover help.jpg')" style="margin: 0; background-color: #808080">

<form id="InputForm" runat="server" class="style5" style="height: 646px">

<table style="width: 941px; height: 646px" cellspacing="0" cellpadding="0" align="center" class="style1">
    <!-- MSTableType="layout" -->
    <tr>
        <td valign="top">
        <a href="default.htm">
        <img alt="" src="images/normal%20home.jpg" width="72" height="54" id="img1" onmouseout="FP_swapImgRestore()" onmouseover="FP_swapImg(1,1,/*id*/'img1',/*url*/'images/hover home.jpg')" class="style2" /></a></td>
        <td valign="top">
        &nbsp;</td>
        <td valign="top">
        &nbsp;</td>
        <td>&nbsp;</td>
        <td valign="top">
        <a href="http://www.lcup.edu.ph">
        <img alt="" src="images/normal%20lcup.jpg" width="47" height="54" id="img4" onmouseout="FP_swapImgRestore()" onmouseover="FP_swapImg(1,1,/*id*/'img4',/*url*/'images/hover LCUP.jpg')" /></a></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td valign="top" colspan="2" style="height: 58px; ">
        <img alt="" src="images/normal%20help.jpg" width="77" height="54" id="img5" onmouseout="FP_swapImgRestore()" onmouseover="FP_swapImg(1,1,/*id*/'img5',/*url*/'images/hover help.jpg')" /></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td valign="top">&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td style="height: 95px">&nbsp;</td>
        </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td valign="top">
    <asp:AccessDataSource runat="server" ID="AccessDataSource1" DeleteCommand="DELETE FROM [PendingRecords] WHERE [ID] = ?" InsertCommand="INSERT INTO [PendingRecords] ([Username], [Password], [FirstName], [LastName], [MiddleName], [Address], [Age], [Gender], [ContactNumber], [PlateNumber], [Color], [Brand], [LiscensedNumber], [SSSNumber], [TIN], [Type], [Model], [BirthDay], [BirthMonth], [BirthYear]) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)" UpdateCommand="UPDATE [PendingRecords] SET [Username] = ?, [Password] = ?, [FirstName] = ?, [LastName] = ?, [MiddleName] = ?, [Address] = ?, [Age] = ?, [Gender] = ?, [ContactNumber] = ?, [PlateNumber] = ?, [Color] = ?, [Brand] = ?, [LiscensedNumber] = ?, [SSSNumber] = ?, [TIN] = ?, [Type] = ?, [Model] = ?, [BirthDay] = ?, [BirthMonth] = ?, [BirthYear] = ? WHERE [ID] = ?" DataFile="_private/records.mdb" SelectCommand="SELECT * FROM [PendingRecords]" OnInserted="AccessDataSource1_Inserted">
        <DeleteParameters>
            <asp:parameter Name="ID" Type="Int32" />
        </DeleteParameters>
        <UpdateParameters>
            <asp:parameter Name="Username" Type="String" />
            <asp:parameter Name="Password" Type="String" />
            <asp:parameter Name="FirstName" Type="String" />
            <asp:parameter Name="LastName" Type="String" />
            <asp:parameter Name="MiddleName" Type="String" />
            <asp:parameter Name="Address" Type="String" />
            <asp:parameter Name="Age" Type="String" />
            <asp:parameter Name="Gender" Type="String" />
            <asp:parameter Name="ContactNumber" Type="String" />
            <asp:parameter Name="PlateNumber" Type="String" />
            <asp:parameter Name="Color" Type="String" />
            <asp:parameter Name="Brand" Type="String" />
            <asp:parameter Name="LiscensedNumber" Type="String" />
            <asp:parameter Name="SSSNumber" Type="String" />
            <asp:parameter Name="TIN" Type="String" />
            <asp:parameter Name="Type" Type="String" />
            <asp:parameter Name="Model" Type="String" />
            <asp:parameter Name="BirthDay" Type="String" />
            <asp:parameter Name="BirthMonth" Type="String" />
            <asp:parameter Name="BirthYear" Type="String" />
            <asp:parameter Name="ID" Type="Int32" />
        </UpdateParameters>
        <InsertParameters>
            <asp:parameter Name="Username" Type="String" />
            <asp:parameter Name="Password" Type="String" />
            <asp:parameter Name="FirstName" Type="String" />
            <asp:parameter Name="LastName" Type="String" />
            <asp:parameter Name="MiddleName" Type="String" />
            <asp:parameter Name="Address" Type="String" />
            <asp:parameter Name="Age" Type="String" />
            <asp:parameter Name="Gender" Type="String" />
            <asp:parameter Name="ContactNumber" Type="String" />
            <asp:parameter Name="PlateNumber" Type="String" />
            <asp:parameter Name="Color" Type="String" />
            <asp:parameter Name="Brand" Type="String" />
            <asp:parameter Name="LiscensedNumber" Type="String" />
            <asp:parameter Name="SSSNumber" Type="String" />
            <asp:parameter Name="TIN" Type="String" />
            <asp:parameter Name="Type" Type="String" />
            <asp:parameter Name="Model" Type="String" />
            <asp:parameter Name="BirthDay" Type="String" />
            <asp:parameter Name="BirthMonth" Type="String" />
            <asp:parameter Name="BirthYear" Type="String" />
        </InsertParameters>
    </asp:AccessDataSource>
        </td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td style="height: 33px;">&nbsp;</td>
        </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td style="height: 76px">&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td valign="top" colspan="8">
    <asp:FormView runat="server" id="InputForm1" DataSourceID="AccessDataSource1" DataKeyNames="ID" DefaultMode="Insert" Width="832px">
        <EditItemTemplate>
            ID:
            <asp:Label Text='<%# Eval("ID") %>' runat="server" id="IDLabel1" />
            <br />
            Username:
            <asp:TextBox Text='<%# Bind("Username") %>' runat="server" id="UsernameTextBox" />
            <br />
            Password:
            <asp:TextBox Text='<%# Bind("Password") %>' runat="server" id="PasswordTextBox" />
            <br />
            FirstName:
            <asp:TextBox Text='<%# Bind("FirstName") %>' runat="server" id="FirstNameTextBox" />
            <br />
            LastName:
            <asp:TextBox Text='<%# Bind("LastName") %>' runat="server" id="LastNameTextBox" />
            <br />
            MiddleName:
            <asp:TextBox Text='<%# Bind("MiddleName") %>' runat="server" id="MiddleNameTextBox" />
            <br />
            Address:
            <asp:TextBox Text='<%# Bind("Address") %>' runat="server" id="AddressTextBox" />
            <br />
            Birhtday:
            <asp:TextBox Text='<%# Bind("Birhtday") %>' runat="server" id="BirhtdayTextBox" />
            <br />
            ContactNumber:
            <asp:TextBox Text='<%# Bind("ContactNumber") %>' runat="server" id="ContactNumberTextBox" />
            <br />
            PlateNumber:
            <asp:TextBox Text='<%# Bind("PlateNumber") %>' runat="server" id="PlateNumberTextBox" />
            <br />
            Color:
            <asp:TextBox Text='<%# Bind("Color") %>' runat="server" id="ColorTextBox" />
            <br />
            Brand:
            <asp:TextBox Text='<%# Bind("Brand") %>' runat="server" id="BrandTextBox" />
            <br />
            LiscensedNumber:
            <asp:TextBox Text='<%# Bind("LiscensedNumber") %>' runat="server" id="LiscensedNumberTextBox" />
            <br />
            <asp:LinkButton runat="server" Text="Update" CommandName="Update" id="UpdateButton" CausesValidation="True" />
            &nbsp;
            <asp:LinkButton runat="server" Text="Cancel" CommandName="Cancel" id="UpdateCancelButton" CausesValidation="False" />
        </EditItemTemplate>
        <InsertItemTemplate>
            <div class="style6">
                <table style="width: 100%; text-align: right" align="right" cellspacing="0" cellpadding="0" id="form2" class="style2">
                    <tr>
                        <td style="text-align: right; height: 25px; width: 111px;">
                        Firstname:</td>
                        <td style="width: 280px; height: 25px;">
                        <div>
                            <asp:TextBox Text='<%# Bind("FirstName") %>' runat="server" id="FName" Width="267px" Height="10px" ValidationGroup="reg">
                            </asp:TextBox>
                        </div>
                        </td>
                        <td style="height: 25px; text-align: left; width: 3px;">
                        </td>
                        <td style="height: 25px; text-align: left;">
                        <asp:RequiredFieldValidator runat="server" ErrorMessage="!" id="RequiredFieldValidator1" style="text-align: left" ControlToValidate="FName" ValidationGroup="reg" ForeColor="#FF9933">
                        </asp:RequiredFieldValidator>
                        </td>
                        <td style="height: 25px; text-align: left;">&nbsp;</td>
                    </tr>
                    <tr>
                        <td style="width: 111px; height: 25px;">Lastname:</td>
                        <td style="width: 280px; height: 25px;">
                        <asp:TextBox runat="server" id="TextBox6" Width="267px" Height="10px" Text='<%# Bind("LastName") %>' ValidationGroup="reg">
                        </asp:TextBox>
                        </td>
                        <td style="height: 25px; text-align: left; width: 3px;">
                        &nbsp;</td>
                        <td style="height: 25px; text-align: left;">
                        <asp:RequiredFieldValidator runat="server" ErrorMessage="!" id="RequiredFieldValidator2" ControlToValidate="TextBox6" ValidationGroup="reg" ForeColor="#FF9933">
                        </asp:RequiredFieldValidator>
                        </td>
                        <td style="height: 25px; text-align: left;">&nbsp;</td>
                    </tr>
                    <tr>
                        <td style="width: 111px; height: 25px;">Middle Name:</td>
                        <td style="width: 280px; height: 25px;">
                        <asp:TextBox runat="server" id="TextBox7" Width="267px" Height="10px" Text='<%# Bind("MiddleName") %>' ValidationGroup="reg">
                        </asp:TextBox>
                        </td>
                        <td style="height: 25px; text-align: left; width: 3px;">
                        &nbsp;</td>
                        <td style="height: 25px; text-align: left;">
                        <asp:RequiredFieldValidator runat="server" ErrorMessage="!" id="RequiredFieldValidator3" ControlToValidate="TextBox7" ValidationGroup="reg" ForeColor="#FF9933">
                        </asp:RequiredFieldValidator>
                        </td>
                        <td style="height: 25px; text-align: left;">&nbsp;</td>
                    </tr>
                    <tr>
                        <td style="width: 111px; height: 25px;">Address:</td>
                        <td style="width: 280px; height: 25px;">
                        <asp:TextBox runat="server" id="TextBox8" Width="267px" Height="10px" Text='<%# Bind("Address") %>' ValidationGroup="reg">
                        </asp:TextBox>
                        </td>
                        <td style="height: 25px; text-align: left; width: 3px;">
                        &nbsp;</td>
                        <td style="height: 25px; text-align: left;">
                        <asp:RequiredFieldValidator runat="server" ErrorMessage="!" id="RequiredFieldValidator4" style="text-align: left" ControlToValidate="TextBox8" ValidationGroup="reg" ForeColor="#FF9933">
                        </asp:RequiredFieldValidator>
                        </td>
                        <td style="height: 25px; text-align: left;">&nbsp;</td>
                    </tr>
                    <tr>
                        <td style="width: 111px; height: 25px;">Contact No.:</td>
                        <td style="width: 280px; height: 25px;">
                        <asp:TextBox runat="server" id="TextBox9" Width="267px" Height="10px" Text='<%# Bind("ContactNumber") %>' ValidationGroup="reg">
                        </asp:TextBox>
                        </td>
                        <td style="height: 25px; text-align: left; width: 3px;">
                        &nbsp;</td>
                        <td style="height: 25px; text-align: left;">
                        <asp:RequiredFieldValidator runat="server" ErrorMessage="!" id="RequiredFieldValidator5" ControlToValidate="TextBox9" ValidationGroup="reg" Display="Dynamic" ForeColor="#FF9933">
                        </asp:RequiredFieldValidator>
                        <asp:RegularExpressionValidator runat="server" ErrorMessage="! 09######### - Must be 11 digits." id="RegularExpressionValidator1" ControlToValidate="TextBox9" ValidationExpression="^\d{11}$" ValidationGroup="reg" Display="Dynamic" ForeColor="#FF9933">
                        </asp:RegularExpressionValidator>
                        </td>
                        <td style="height: 25px; text-align: left;">&nbsp;</td>
                    </tr>
                    <tr>
                        <td style="width: 111px">Gender:</td>
                        <td style="width: 280px" class="style4">
                        <asp:RadioButtonList runat="server" id="RadioButtonList1" Width="200px" ValidationGroup="reg" RepeatDirection="Horizontal" RepeatColumns="2" RepeatLayout="Flow" Height="20px" SelectedValue='<%# Bind("Gender") %>'>
                            <asp:ListItem>Male</asp:ListItem>
                            <asp:ListItem>Female</asp:ListItem>
                        </asp:RadioButtonList>
                        </td>
                        <td style="text-align: left; width: 3px;">&nbsp;</td>
                        <td style="text-align: left">
                        <asp:RequiredFieldValidator runat="server" ErrorMessage="!" id="RequiredFieldValidator12" ValidationGroup="reg" ControlToValidate="RadioButtonList1" ForeColor="#FF9933">
                        </asp:RequiredFieldValidator>
                        </td>
                        <td style="text-align: left">&nbsp;</td>
                    </tr>
                    <tr>
                        <td style="width: 111px">Birthday:</td>
                        <td style="width: 280px" class="style4">
                        <asp:DropDownList runat="server" id="DropDownList2" SelectedValue='<%# Bind("BirthMonth") %>'>
                            <asp:ListItem>Month</asp:ListItem>
                            <asp:ListItem>January</asp:ListItem>
                            <asp:ListItem>February</asp:ListItem>
                            <asp:ListItem>March</asp:ListItem>
                            <asp:ListItem>April</asp:ListItem>
                            <asp:ListItem>May</asp:ListItem>
                            <asp:ListItem>June</asp:ListItem>
                            <asp:ListItem>July</asp:ListItem>
                            <asp:ListItem>August</asp:ListItem>
                            <asp:ListItem>September</asp:ListItem>
                            <asp:ListItem>October</asp:ListItem>
                            <asp:ListItem>November</asp:ListItem>
                            <asp:ListItem>December</asp:ListItem>
                        </asp:DropDownList>
                        <asp:DropDownList runat="server" id="DropDownList3" SelectedValue='<%# Bind("BirthDay") %>'>
                            <asp:ListItem>Day</asp:ListItem>
                            <asp:ListItem>1</asp:ListItem>
                            <asp:ListItem>2</asp:ListItem>
                            <asp:ListItem>3</asp:ListItem>
                            <asp:ListItem>4</asp:ListItem>
                            <asp:ListItem>5</asp:ListItem>
                            <asp:ListItem>6</asp:ListItem>
                            <asp:ListItem>7</asp:ListItem>
                            <asp:ListItem>8</asp:ListItem>
                            <asp:ListItem>9</asp:ListItem>
                            <asp:ListItem>10</asp:ListItem>
                            <asp:ListItem>11</asp:ListItem>
                            <asp:ListItem>12</asp:ListItem>
                            <asp:ListItem>13</asp:ListItem>
                            <asp:ListItem>14</asp:ListItem>
                            <asp:ListItem>15</asp:ListItem>
                            <asp:ListItem>16</asp:ListItem>
                            <asp:ListItem>17</asp:ListItem>
                            <asp:ListItem>18</asp:ListItem>
                            <asp:ListItem>19</asp:ListItem>
                            <asp:ListItem>20</asp:ListItem>
                            <asp:ListItem>21</asp:ListItem>
                            <asp:ListItem>22</asp:ListItem>
                            <asp:ListItem>23</asp:ListItem>
                            <asp:ListItem>24</asp:ListItem>
                            <asp:ListItem>25</asp:ListItem>
                            <asp:ListItem>26</asp:ListItem>
                            <asp:ListItem>27</asp:ListItem>
                            <asp:ListItem>28</asp:ListItem>
                            <asp:ListItem>29</asp:ListItem>
                            <asp:ListItem>30</asp:ListItem>
                            <asp:ListItem>31</asp:ListItem>
                        </asp:DropDownList>
                        <asp:DropDownList runat="server" id="DropDownList4" SelectedValue='<%# Bind("BirthYear") %>'>
                            <asp:ListItem>Year</asp:ListItem>
                            <asp:ListItem>1920</asp:ListItem>
                            <asp:ListItem>1921</asp:ListItem>
                            <asp:ListItem>1922</asp:ListItem>
                            <asp:ListItem>1923</asp:ListItem>
                            <asp:ListItem>1924</asp:ListItem>
                            <asp:ListItem>1925</asp:ListItem>
                            <asp:ListItem>1926</asp:ListItem>
                            <asp:ListItem>1927</asp:ListItem>
                            <asp:ListItem>1928</asp:ListItem>
                            <asp:ListItem>1929</asp:ListItem>
                            <asp:ListItem>1930</asp:ListItem>
                            <asp:ListItem>1931</asp:ListItem>
                            <asp:ListItem>1932</asp:ListItem>
                            <asp:ListItem>1933</asp:ListItem>
                            <asp:ListItem>1933</asp:ListItem>
                            <asp:ListItem>1934</asp:ListItem>
                            <asp:ListItem>1935</asp:ListItem>
                            <asp:ListItem>1936</asp:ListItem>
                            <asp:ListItem>1937</asp:ListItem>
                            <asp:ListItem>1938</asp:ListItem>
                            <asp:ListItem>1939</asp:ListItem>
                            <asp:ListItem>1940</asp:ListItem>
                            <asp:ListItem>1941</asp:ListItem>
                            <asp:ListItem>1942</asp:ListItem>
                            <asp:ListItem>1943</asp:ListItem>
                            <asp:ListItem>1944</asp:ListItem>
                            <asp:ListItem>1945</asp:ListItem>
                            <asp:ListItem>1946</asp:ListItem>
                            <asp:ListItem>1947</asp:ListItem>
                            <asp:ListItem Value="1948">1948</asp:ListItem>
                            <asp:ListItem>1949</asp:ListItem>
                            <asp:ListItem>1950</asp:ListItem>
                            <asp:ListItem>1951</asp:ListItem>
                            <asp:ListItem>1952</asp:ListItem>
                            <asp:ListItem>1953</asp:ListItem>
                            <asp:ListItem>1954</asp:ListItem>
                            <asp:ListItem>1955</asp:ListItem>
                            <asp:ListItem>1956</asp:ListItem>
                            <asp:ListItem>1957</asp:ListItem>
                            <asp:ListItem>1958</asp:ListItem>
                            <asp:ListItem>1959</asp:ListItem>
                            <asp:ListItem>1960</asp:ListItem>
                            <asp:ListItem>1961</asp:ListItem>
                            <asp:ListItem>1962</asp:ListItem>
                            <asp:ListItem>1963</asp:ListItem>
                            <asp:ListItem>1964</asp:ListItem>
                            <asp:ListItem>1965</asp:ListItem>
                            <asp:ListItem>1966</asp:ListItem>
                            <asp:ListItem>1967</asp:ListItem>
                            <asp:ListItem>1968</asp:ListItem>
                            <asp:ListItem>1969</asp:ListItem>
                            <asp:ListItem>1970</asp:ListItem>
                            <asp:ListItem>1971</asp:ListItem>
                            <asp:ListItem>1972</asp:ListItem>
                            <asp:ListItem>1973</asp:ListItem>
                            <asp:ListItem>1974</asp:ListItem>
                            <asp:ListItem>1975</asp:ListItem>
                            <asp:ListItem>1976</asp:ListItem>
                            <asp:ListItem>1977</asp:ListItem>
                            <asp:ListItem>1978</asp:ListItem>
                            <asp:ListItem>1979</asp:ListItem>
                            <asp:ListItem>1980</asp:ListItem>
                            <asp:ListItem>1981</asp:ListItem>
                            <asp:ListItem>1982</asp:ListItem>
                            <asp:ListItem>1983</asp:ListItem>
                            <asp:ListItem>1984</asp:ListItem>
                            <asp:ListItem>1985</asp:ListItem>
                            <asp:ListItem>1986</asp:ListItem>
                            <asp:ListItem>1987</asp:ListItem>
                            <asp:ListItem>1988</asp:ListItem>
                            <asp:ListItem>1989</asp:ListItem>
                            <asp:ListItem>1990</asp:ListItem>
                            <asp:ListItem>1991</asp:ListItem>
                            <asp:ListItem>1992</asp:ListItem>
                            <asp:ListItem>1993</asp:ListItem>
                            <asp:ListItem>1994</asp:ListItem>
                            <asp:ListItem>1995</asp:ListItem>
                            <asp:ListItem>1996</asp:ListItem>
                            <asp:ListItem>1997</asp:ListItem>
                            <asp:ListItem>1998</asp:ListItem>
                            <asp:ListItem>1999</asp:ListItem>
                            <asp:ListItem>2000</asp:ListItem>
                            <asp:ListItem>2001</asp:ListItem>
                            <asp:ListItem>2002</asp:ListItem>
                            <asp:ListItem>2003</asp:ListItem>
                            <asp:ListItem>2004</asp:ListItem>
                            <asp:ListItem>2005</asp:ListItem>
                            <asp:ListItem>2006</asp:ListItem>
                            <asp:ListItem>2007</asp:ListItem>
                            <asp:ListItem>2008</asp:ListItem>
                            <asp:ListItem>2009</asp:ListItem>
                            <asp:ListItem>2010</asp:ListItem>
                            <asp:ListItem>2011</asp:ListItem>
                            <asp:ListItem>2012</asp:ListItem>
                            <asp:ListItem>2013</asp:ListItem>
                        </asp:DropDownList>
                        </td>
                        <td style="text-align: left; width: 3px;">&nbsp;</td>
                        <td style="text-align: left">
                        <asp:RequiredFieldValidator runat="server" ErrorMessage="! Month" id="RequiredFieldValidator13" ControlToValidate="DropDownList2" ValidationGroup="reg" Display="Dynamic" InitialValue="Month" ForeColor="#FF9933">
                        </asp:RequiredFieldValidator>
                        <asp:RequiredFieldValidator runat="server" ErrorMessage="! Day" id="RequiredFieldValidator14" ValidationGroup="reg" ControlToValidate="DropDownList3" Display="Dynamic" InitialValue="Day" ForeColor="#FF9933">
                        </asp:RequiredFieldValidator>
                        <asp:RequiredFieldValidator runat="server" ErrorMessage="! Year" id="RequiredFieldValidator15" Display="Dynamic" ControlToValidate="DropDownList4" ValidationGroup="reg" InitialValue="Year" ForeColor="#FF9933">
                        </asp:RequiredFieldValidator>
                        </td>
                        <td style="text-align: left">&nbsp;</td>
                    </tr>
                    <tr>
                        <td style="width: 111px">Age:</td>
                        <td style="width: 280px" class="style4">
                        <asp:TextBox runat="server" id="TextBox1" Text='<%# Bind("Age") %>' Height="10px" Width="70px">
                        </asp:TextBox>
                        </td>
                        <td style="text-align: left; width: 3px;">&nbsp;</td>
                        <td style="text-align: left; vertical-align: middle; ">
                        <asp:RequiredFieldValidator runat="server" ErrorMessage="! Please specify your age." id="RequiredFieldValidator16" ControlToValidate="TextBox1" ValidationGroup="reg" Display="Dynamic" ForeColor="#FF9933">
                        </asp:RequiredFieldValidator>
                        <asp:RegularExpressionValidator runat="server" ErrorMessage="! Invalid Age" id="RegularExpressionValidator2" ControlToValidate="TextBox1" ValidationExpression="\d{2}" Display="Dynamic" ValidationGroup="reg" ForeColor="#FF9933">
                        </asp:RegularExpressionValidator>
                        </td>
                        <td style="text-align: left; vertical-align: middle; ">
                        <asp:ImageButton CommandName="Insert" runat="server" id="Submit" alt="" src="images/normalnext.jpg" width="146px" height="43px" style="float: right" ValidationGroup="reg" />
                        </td>
                    </tr>
                </table>
                <br />
                <br />
                <br />
                <br />
                <br />
                <br />
                <br />
                <br />
                <br />
                <br />
            </div>
            <br />
        </InsertItemTemplate>
        <ItemTemplate>
            <table style="width: 100%; text-align: right" align="right" cellspacing="0" cellpadding="0" id="form3" class="style2">
                <tr>
                    <td style="text-align: right; height: 25px;">Firstname:</td>
                    <td style="width: 280px; height: 25px;">
                    <div>
                        <asp:Label Text='<%# Bind("FirstName") %>' runat="server" id="FirstNameLabel" />
                    </div>
                    </td>
                    <td style="height: 25px">&nbsp;</td>
                </tr>
                <tr>
                    <td style="width: 108px; height: 25px;">Lastname:</td>
                    <td style="width: 280px; height: 25px;">
                    <asp:Label Text='<%# Bind("LastName") %>' runat="server" id="LastNameLabel" />
                    </td>
                    <td style="height: 25px"></td>
                </tr>
                <tr>
                    <td style="width: 108px; height: 25px;">Middle Name:</td>
                    <td style="width: 280px; height: 25px;">
                    <asp:Label Text='<%# Bind("MiddleName") %>' runat="server" id="MiddleNameLabel" />
                    </td>
                    <td style="height: 25px"></td>
                </tr>
                <tr>
                    <td style="width: 108px; height: 25px;">Address:</td>
                    <td style="width: 280px; height: 25px;">
                    <asp:Label Text='<%# Bind("Address") %>' runat="server" id="AddressLabel" />
                    </td>
                    <td style="height: 25px"></td>
                </tr>
                <tr>
                    <td style="width: 108px; height: 25px;">Contact No.:</td>
                    <td style="width: 280px; height: 25px;">
                    <asp:Label Text='<%# Bind("ContactNumber") %>' runat="server" id="ContactNumberLabel" />
                    </td>
                    <td style="height: 25px"></td>
                </tr>
                <tr>
                    <td style="width: 108px">Gender:</td>
                    <td style="width: 280px"><asp:RadioButton runat="server" id="Female0" Text="Female" /><asp:RadioButton runat="server" id="Male0" Text="Male" />
                    </td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <td style="width: 108px">Birthday</td>
                    <td style="width: 280px"><asp:DropDownList runat="server" id="DropDownList2" SelectedValue='<%# Bind("BirthMonth") %>'/><asp:DropDownList runat="server" id="DropDownList3" SelectedValue='<%# Bind("BirthDay") %>'/>   <asp:DropDownList runat="server" id="DropDownList4" SelectedValue='<%# Bind("BirthYear") %>'/>          </td>
                    <td>&nbsp;</td>
                </tr>

            </table>
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            &nbsp;
            <asp:LinkButton runat="server" Text="Edit" CommandName="Edit" id="EditButton" CausesValidation="False" />
            &nbsp;
            <asp:LinkButton runat="server" Text="Delete" CommandName="Delete" id="DeleteButton" CausesValidation="False" />
            &nbsp;
            <asp:LinkButton runat="server" Text="New" CommandName="New" id="NewButton" CausesValidation="False" />
        </ItemTemplate>
    </asp:FormView>
        </td>
        <td style="height: 296px">&nbsp;</td>
    </tr>
    <tr>
        <td style="width: 72px">&nbsp;</td>
        <td style="width: 72px">&nbsp;</td>
        <td style="width: 72px">&nbsp;</td>
        <td style="width: 230px">&nbsp;</td>
        <td style="width: 51px">&nbsp;</td>
        <td style="width: 29px">&nbsp;</td>
        <td style="width: 300px">&nbsp;</td>
        <td style="width: 37px">&nbsp;</td>
        <td style="width: 60px">&nbsp;</td>
        <td style="height: 88px; width: 18px">&nbsp;</td>
    </tr>
</table>

</form>

        </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:12:50.030

试试我在谷歌找到的这段代码，它应该可以解决问题：

```
DateTime now = DateTime.Now;
int age = now.Year - bday.Year;

if (now < bday.AddYears(age)) 
    age--; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:22:49.617

使用 javascript

```
function getAge(dateString) { //parameter date from form, should look like "03/21/1986"
    var today = new Date();
    var birthDate = new Date(dateString);
    var age = today.getFullYear() - birthDate.getFullYear();
    var m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }
    return age;
} 
```

# xml - 需要双击 - 简单的 Ajax 应用程序

> ID：14670291
> 
> 赞同：0
> 
> 时间：2013-02-03T07:14:30.160
> 
> 标签：xml, ajax

我刚开始学习 AJAX 并制作了一个简单的脚本。下面是脚本。

```
<!doctype html>
<html>
<head>
    <title>Welcome to the forum</title>
    <script>
        var XMLHttpRequestObject = false;

        if(window.XMLHttpRequest)
        {
            XMLHttpRequestObject = new XMLHttpRequest();
            XMLHttpRequestObject.overrideMimeType("text/xml");
        }
        else
        {
            document.getElementById("text").innerHTML = "Sorry, your browser does not support AJAX!";
        }

        function getData(dataSource)
        {
            XMLHttpRequestObject.open("GET", dataSource);
            XMLHttpRequestObject.onreadystatechange = function()
            {
                if(XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200)
                {
                    responseData = XMLHttpRequestObject.responseXML;
                    responseDataList = responseData.getElementsByTagName("os");
                }
            }

            XMLHttpRequestObject.send(null);
        }

        function displayMenuItems(dataSource,selectID)
        {   
            getData(dataSource);

            var i;
            for(i=0; i<responseDataList.length; i++)
            {
                document.getElementById(selectID).options[i] = new Option(responseDataList[i].firstChild.data);
            }
        }

    </script>
</head>

<body>
    <form>
        <select size="1" id="os">
            <option>Select and OS</option>
        </select>
        <input type="button" value="Display OS list" onclick="displayMenuItems('os.xml','os')" />
    </form>

    <div id="text">The Operating System you use will appear here!</div>
</body> 
```

当我单击按钮时，我期望在 HTML 列表中显示操作系统列表，但它仅在单击按钮两次后才会发生。我无法弄清楚问题是什么！:(

下面是 XML 脚本：

```
<?xml version="1.0"?>
<osList>
    <os>Ubuntu</os>
    <os>Fedora</os>
    <os>Windows</os>
</osList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:31:55.353

问题是时间问题。函数 displayMenuItems 调用 getData，然后立即尝试遍历 responseDataList，但尚未获取此列表。AJAX 不会阻塞，因此 getData 不会等待服务器响应，而是在 responseDataList 初始化之前返回。获取数据后，您需要在 displayMenuItems 中调用循环。您可以通过将其移动到另一个函数中并从 onreadystatechange 回调函数中调用它来做到这一点。

# ruby-on-rails - 虚拟红宝石 - 没有这样的文件或目录 - main.rb (LoadError)

> ID：14670292
> 
> 赞同：2
> 
> 时间：2013-02-03T07:14:35.870
> 
> 标签：ruby-on-rails, ruby, user-interface

我在windows7中安装了visual ruby​​。它安装正确。但是当我启动应用程序时，“visual ruby​​ project root”打开但没有文件夹显示在那里，所以我选择了选择文件夹并选择了一个示例项目并单击打开。现在可视化 ruby​​ 应用程序已打开，示例项目列表显示在左侧面板中。如果我选择任何项目并单击运行，则会出现以下错误。

```
C:/Users/abhiram/visualruby/examples$ ruby main.rb
ruby: No such file or directory -- main.rb (LoadError) 
```

我不知道如何解决它。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-14T06:18:41.150

在菜单中查找“项目设置”。有一个命令行显示当您按下“运行”按钮时将运行的程序。默认值为“ruby main.rb”，当按下“运行”按钮时，它只会执行该命令。 [http://visualruby.net](http://visualruby.net)

# apache - apache 403 在 OSX 上被禁止

> ID：14670293
> 
> 赞同：2
> 
> 时间：2013-02-03T07:14:35.543
> 
> 标签：apache, cgi

我无法在一个 OSX 系统上获得 apache 以允许执行 CGI 脚本。它适用于不同的 OSX 系统和 Ubuntu 系统。以下是 apache 配置文件中的相关指令：

```
User www
Group www
DocumentRoot "/opt/local/apache2/htdocs"
ScriptAlias /cgi-bin/ "/opt/local/apache2/cgi-bin"
<Directory "/opt/local/apache2/cgi-bin">
    AllowOverride All
    Options Indexes FollowSymLinks Includes ExecCGI
    Order allow,deny
    Allow from all
</Directory> 
```

目录 /opt/local/apache2/cgi-bin 归 www 拥有，权限为 755。但是当我转到 URL 时

```
localhost/cgi-bin/myCgiScript 
```

我收到 403 错误。我可以在 doc root 位置查看文档而不会出现 403 错误。我不明白为什么服务器无权执行 CGI 脚本。

# c - 预处理阶段和多个文件（基础）

> ID：14670295
> 
> 赞同：1
> 
> 时间：2013-02-03T07:14:52.880
> 
> 标签：c, c-preprocessor, preprocessor-directive

我有三个文件，想编译它。

第一个文件是 app.c

```
#include"sum.h"
int main (void)
{
    sum();
    return 0;
} 
```

第二个文件是 sum.h

```
#ifndef SUM_H
#define SUM_H
void sum ();
#endif 
```

第三个文件 sum.c

```
#include"sum.h"
void sum ()
{
return;
} 
```

我写下这些陈述：

```
#ifndef SUM_H
#define SUM_H
...
...
...
#endif 
```

防止内容的多重定义`sum.h`。

在编译期间`app.c`会进入预处理阶段然后`sum.c`进入预处理阶段我的问题当`sum.c`进入预处理器时如何知道`SUM_H`myapp的最后一个文件中定义的？我认为每个源文件分别进入预处理阶段和编译阶段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:37:56.380

是的，每个文件都是单独编译的，因此包含防护仅防止在同一[**翻译单元**](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)**中包含多个头文件，** **而不是跨不同的翻译单元**。[](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)

 ****`app.c`由预编译器预处理的时间仅检查是否已`SUM_H`在其中定义`app.c`。这避免了`sum.h`仅通过此当前翻译单元中的不同标题被多次包含。这是因为只要`sum.h`包含一次`SUM_H`就会被定义。****

# r - 将 stargazer 与 Rstudio 和 Knitr 一起使用

> ID：14670299
> 
> 赞同：23
> 
> 时间：2013-02-03T07:16:03.543
> 
> 标签：r, knitr, stargazer

我正在努力使用 RStudio 在 knitr 中使用 stargazer 输出。例如，我将下面的代码粘贴到 .Rmd 文件中，然后单击 Knit HTML。[ 和 ] 之间的第一个块被渲染为方程。第二块来自观星者。它仍然是代码。当我将第二个块 less [ 和 ] 粘贴到 Sweave 文件中，然后单击编译为 PDF 时，代码呈现为表格。我安装了 MikTex 和 Stargazer 版本 3。

[单击编译 PDF 时，将 stargazer 或 xable 表插入 knitr 文档](https://stackoverflow.com/questions/14407576/inserting-stargazer-or-xable-table-into-knitr-document)的答案 在 Sweave 文件 (Rnw) 中对我有用。在 Rmd 文件中，单击 Knit HTML 时不会呈现 tex。

如何将 stargazer 输出放入 Rmd 文件中，以便 Knit HTML 将乳胶代码转换为表格？（我是 Latex 的新手，不确定我可以删除哪些代码，所以对于长段表示歉意。）

```
\[
\begin{aligned}
\dot{x} &amp; = \sigma(y-x) \\
\dot{y} &amp; = \rho x - y - xz \\
\dot{z} &amp; = -\beta z + xy
\end{aligned}
\]

\[
\documentclass{article}

\begin{document}

% Table created by StarGazer v.3.0.1 by Marek Hlavac, Harvard University. E-mail: hlavac at fas.harvard.edu
% Date and time: Sun, Feb 03, 2013 - 11:34:52 AM
\begin{table}[htb] \centering 
  \caption{} 
  \label{} 
\footnotesize 

\begin{tabular}{@{\extracolsep{5pt}}lc} 
\\[-1.8ex]\hline 
\hline \\[-1.8ex] 
 & \multicolumn{1}{c}{\textit{Dependent variable:}} \\ 
\cline{2-2} 
\\[-1.8ex] & Rate \\ 
\hline \\[-1.8ex] 
 pole & $0.071^{***}$ \\ 
  & $(0.020)$ \\ 
  & \\ 
 post & $0.095^{***}$ \\ 
  & $(0.019)$ \\ 
  & \\ 
 Constant & $-5.784^{***}$ \\ 
  & $(1.667)$ \\ 
  & \\ 
\hline \\[-1.8ex] 
Observations & $46$ \\ 
Residual Std. Error & $2.378 (df = 43)$ \\ 
\hline 
\hline \\[-1.8ex] 
\textit{Note:}  & \multicolumn{1}{r}{$^{*}$p$<$0.1; $^{**}$p$<$0.05; $^{***}$p$<$0.01} \\ 
\normalsize 
\end{tabular} 
\end{table} 

\end{document}
\] 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2015-05-24T12:43:41.527

使用以下代码，您将获得一个工作版本

```
```{r, results='asis'}
stargazer(model)
``` 
```

转换为 pdf 时，以下代码非常适用于 stargazer 4.0：

```
```{r, results='asis'}
stargazer(model, header=FALSE, type='latex')
``` 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-13T16:48:02.697

由于该主题已经过时了，我假设手头的问题是以*某种方式将 stargazer 与 knitr 一起使用*，而不是本质上将 stargazer 对象转换为 HTML。

作为观星者的狂热粉丝，我提出了以下工作流程：

1.  将我的代码写在 .Rmd 文件中。
2.  将其编织成 .md。Stargazer 表在生成的降价文件中保留为 LaTeX 代码。
3.  使用[pandoc](http://johnmacfarlane.net/pandoc/)将 markdown 文件转换为 PDF。Pandoc 将 LaTeX 代码翻译成适当的表格。或者，可以使用带有 knitr 插件的 LyX 以 PDF 格式很好地输出观星表。

如果有人想要 MS Word 中的观星表，我发现最好的方法是使用[LaTeX2RTF](http://latex2rtf.sourceforge.net/)。虽然最上面的单元格有点扭曲，但修复它是删除错误的空单元格的问题。其余的表格被保留，可以粘贴/导入到 Word 中。

这两种策略有助于在 LaTeX 之外使用 stargazer。希望能帮助到你。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-23T15:36:06.377

除了前面的答案，也许作为一个更简单的解决方案，stargazer 可以在 html 代码中输出表格，这样当 Rmd 文件被编织成 html 时，会创建一个表格而不是 tex 代码。我相信该`stargazer`功能现在可以通过设置直接导出为html `type = 'html'`。

因此，例如，给定模型 fit `lm1`，您将在 Rmd 文件中使用以下代码：

`stargazer(lm1, type = 'html')`

无论您希望最终输出是 html 还是 pdf，这都有效。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-09-01T21:29:17.913

回到这个问题。

我想使用*相同*的降价文件在带有 knitr 的 RStudio 中生成 html 和 pdf 输出。也就是说，在 RStudio 中，我想按下 knit 按钮，并可以选择编织 HTMl 输出或 pdf 输出。目前，我对编写 word/OpenOffice 文档没有太大兴趣。

我使用了来自 Jake Russ的非常有用的[观星者备忘单。](http://jakeruss.com/cheatsheets/stargazer.html)这锻炼了观星者的大部分功能。它是一个 R MArkdown 文件，为那些产生 stargazer 输出的块设置了块选项 results='asis'。

stargazer 命令本身有一个参数“type”。默认值为 type='latex' 在 Jake Russ 的用于生成网页的备忘单中，始终使用 type='html'。

如果您尝试将其编织成 pdf，这根本不起作用。表格以长列表的形式出现，每行一个表格单元格，没有格式，占用很多页面，没有格式。

为了让我在 RStudio 中生成漂亮的 pdf，我可以做出的最小更改是全局替换所有

```
type='html' 
```

和

```
type='latex' 
```

（请注意，两者都出现在文档的文本中，以及 stargazer 命令中，因此需要小心！）

这行得通！据我所知，pdf 是网页的忠实复制品，这正是我想要的。

尝试编织 OpenOffice 文档，如果我离开

```
type='latex' 
```

输出中的每个表都由以下文本替换：-

```
% Table created by stargazer v.5.2 by Marek Hlavac, Harvard University. E-mail: hlavac at fas.harvard.edu % Date and time: Tue, Sep 01, 2015 - 22:22:29 
```

如果我恢复

```
type='html' 
```

然后每个表格都被写入，每行一个单元格，在页面的一侧没有格式化！

# c# - System.Windows.Controls.RichTextBox 每行不同的字体

> ID：14670302
> 
> 赞同：-1
> 
> 时间：2013-02-03T07:16:41.050
> 
> 标签：c#, fonts

我需要一个特定的a`font/style`中的每个，问题是我正在使用而不是它没有和Forms 一样。`line``RichTextBox``System.Windows.Controls.RichTextBox``System.Windows.Forms.RichTextBox``.Select()``.SelectionFont()` `methods`

所以我的问题是：如何在 a 中添加一行`System.Windows.Controls.RichTextBox`具有特定的`font/style`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:30:36.267

如果您`rich text box`在 WPF 中使用 WPF，请接受[FlowDocument](http://www.google.com/url?sa=t&rct=j&q=flowdocument&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=http://msdn.microsoft.com/en-us/library/system.windows.documents.flowdocument.aspx&ei=nx8OUZ_8F4rsrAfhiYCoDw&usg=AFQjCNFSwiDzYjuX8AfYRqvSnkctrEwHmA&bvm=bv.41867550,d.bmk)。您只需`FlowDocument`为每条线或世界设置样式，然后....简单示例：

```
 <RichTextBox >
            <FlowDocument>
                <Paragraph>
                    <Span FontSize="20">first line</Span>
                    <LineBreak></LineBreak>
                    <Span Foreground="Red" FontSize="20">sec line</Span>
                </Paragraph>
            </FlowDocument>
        </RichTextBox> 
```

# javascript - JS文件中的多个函数

> ID：14670304
> 
> 赞同：1
> 
> 时间：2013-02-03T07:16:49.613
> 
> 标签：javascript, jquery

我想对我的 JS 文件有多个功能。只是不知道该怎么做，因为我对 JavaScript 真的没有经验。这就是我所拥有的。

```
$(function(){
  $('.incentives').hide();

  $('.incentives-click').on("click", function(){
    $('.incentives').fadeToggle();
  });

    $('.incentivesB').hide();

  $('.incentivesB-click').on("click", function(){
    $('.incentivesB').fadeToggle();
  });

})(); 
```

我正在尝试添加一点，当我将鼠标悬停在它上面时会改变图像。

```
$(function onHover(){
    $(".button").attr('src', 'images/donate2.png');
)}

$(function offHover(){
    $(".button").attr('src', 'images/donate1.png');
)} 
```

**奖金**

还尝试在单击时使图像（.incentives-click）切换。我对如何解决这个问题有一个想法，但如果有人也想帮助解决这个问题，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:28:39.157

我编写了一个[jQuery 插件，它的功能与您需要的类似](http://www.leghumped.com/blog/2011/11/26/jquery-collapsible-panel-plugin/)。您应该能够以最小的努力对其进行修改以满足您的需求。

您还可以从 jQuery 插件样板之一开始，例如：

*   [jQuery Boilerplate.com](http://jqueryboilerplate.com/)
*   [jQuery插件样板](http://stefangabos.ro/jquery/jquery-plugin-boilerplate-oop/)
*   [我在 Github 上的 CollapsiblePanel 插件](https://github.com/Echilon/Miscellaneous/tree/master/CollapsiblePanel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:52:19.347

```
$(function(){
    $('.button').hover(function(){
        $(this).attr('src', 'images/donate2.png')
    }, function(){
        $(this). attr('src', 'images/donate1.png');
    });

    $('.button').on('click',function(){
        $(this).toggle(function(){
             #change_image1
        }, function(){
             #change_image2
        });
    });
}); 
```

# android - 尝试发布状态时 Facebook 会话关闭

> ID：14670307
> 
> 赞同：0
> 
> 时间：2013-02-03T07:17:42.547
> 
> 标签：android, facebook

这是我更新状态的代码：

```
new Session(context);
Session.setActiveSession(session);
Session.openActiveSession(context);
Log.e("session after setted",Session.getActiveSession().toString());

Request request = Request.newMeRequest(Session.getActiveSession(), new Request.GraphUserCallback() {
@Override
public void onCompleted(GraphUser user, Response response) {
    // If the response is successful
       if (Session.getActiveSession().isOpened()) {
            if (user != null) {
                session = Session.getActiveSession();
            postFromAlarm();
                Log.e("user","not null");
            }else{
            postFromAlarm();
            Log.e("user","null");
        }
        }  else{
        postFromAlarm();
        Log.e("not open session",Session.getActiveSession().toString());
        Log.e("session","not open");
        }
     }   
}); 
Log.e("request session",request.getSession().toString());
Request.executeBatchAsync(request); 
```

`Log.e("session after setted",Session.getActiveSession().toString());` 正在显示一个良好且健康的会话，可用于发布。因为在logcat中显示会话打开了，accesstoken好，app_id也好。

但是当我尝试发布时使用此会话，在该`onComplete()`方法中执行了这些行：

`Log.e("not open session",Session.getActiveSession().toString()); Log.e("session","not open");`

它表明：

`{Session state:CLOSED, token:null, appId:***************** }`

怎么了？我试过没有`new Session(context)`，但得到了相同的结果。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:57:49.203

首次使用创建会话时保存会话

```
SessionStore.save(mFacebook, getBaseContext()); 
```

并在同一用户执行发布操作时恢复会话

```
SessionStore.restore(mFacebook, getBaseContext()); 
```

`mFacebook`你的`Facebook`对象引用在哪里

# ios - 如何按浮点距离或整数价格排序？

> ID：14670317
> 
> 赞同：0
> 
> 时间：2013-02-03T07:18:53.827
> 
> 标签：ios, nsmutablearray, nssortdescriptor

我允许用户能够按价格（int）或距离（float）进行排序。

我有一个 NSdictionary 对象的 NSMutableArray 存储数据，如下所示：

```
({"asking_price" = 588832;
 distance = "2.0250673476224";
 id = 510cc41cc7e24c6c6d000000;
 "number_of_bathrooms" = 2; )} 
```

我的排序功能如下：

```
+(void) sort:(NSMutableArray *)classifieds:(NSString *)key:(Boolean)isAscending
{

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:key ascending:isAscending];
    [classifieds sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];
} 
```

我的问题是考虑距离是字典中的一个字符串，价格是一个整数，当我传入“距离”的键时，如何修改我的函数以实际在浮点数中进行排序，而当我传入“询问价格”

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T08:01:02.127

```
+(void) sort:(NSMutableArray *)classifieds:(NSString *)key:(Boolean)isAscending
{
    NSSortDescriptor *sortDescriptor;
    if ([key isEqualToString:@"distance"])
    {
        sortDescriptor = [[NSSortDescriptor alloc] initWithKey:key ascending:isAscending comparator:^NSComparisonResult(id obj1, id obj2) {
            if ([obj1 floatValue] < [obj2 floatValue])
                return NSOrderedAscending;
            else
                return NSOrderedDescending;
        }];
    }
    else
    {
        sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:key ascending:isAscending];
    }
    [classifieds sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:52:13.630

这可能是不可能的，因为您无法控制的函数不知道如何将 NSString 转换为原始数据类型。您几乎剩下 3 个选项：

1）想出自己的排序算法（用谷歌不太难）

2) 将距离更改为 int/float

3）创建一个 NSSortDescriptor 的子类并覆盖排序方法（与第一选择的结果几乎相同，除了您使用的代码是可重用的

# ruby-on-rails-3 - FactoryGirl 中保留的模型的 _localization 后缀

> ID：14670318
> 
> 赞同：0
> 
> 时间：2013-02-03T07:19:17.053
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, factory-bot

我的 Rails 应用程序中有两个模型：

```
class Item < ActiveRecord::Base
end

class ItemLocalization  < ActiveRecord::Base
end 
```

同样，我有两个工厂：

```
factory :item do
  sequence(:name) { |n| "item #{n}" }
  description "this is a description"      
  association :locale, :factory => :locale_deCH          
  item_group
end

factory :item_localization do
  sequence(:name) { |n| "item #{n}" }
  description "this is a description"      
  association :locale, :factory => :locale_deCH          
  item
  user
  reviewer
end 
```

当拥有带有 _localization 后缀的第二个工厂时，FactoryGirl 返回一个 DuplicationError：

```
 Rack::File headers parameter replaces cache_control after Rack 1.5.
    /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl/decorator.rb:10:in `method_missing': Factory already registered: item_localization (FactoryGirl::DuplicateDefinitionError)
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl/decorator/disallows_duplicates_registry.rb:6:in `register'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl.rb:65:in `block in register_factory'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl.rb:64:in `each'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl.rb:64:in `register_factory'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl/syntax/default.rb:20:in `factory'
        from /Users/user/Sites/ec/spec/factories.rb:62:in `block in <top (required)>'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl/syntax/default.rb:49:in `instance_eval'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl/syntax/default.rb:49:in `run'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl/syntax/default.rb:7:in `define'
        from /Users/user/Sites/ec/spec/factories.rb:1:in `<top (required)>'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `block in load'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:16:in `block in find_definitions'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:15:in `each'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:15:in `find_definitions'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/factory_girl_rails-4.1.0/lib/factory_girl_rails/railtie.rb:26:in `block in <class:Railtie>'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:34:in `call'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:42:in `each'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/railties-3.2.11/lib/rails/application/finisher.rb:59:in `block in <module:Finisher>'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from /Users/user/Sites/ec/config/environment.rb:5:in `<top (required)>'
        from /Users/user/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /Users/user/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /Users/user/Sites/ec/spec/spec_helper.rb:3:in `<top (required)>'
        from /Users/user/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /Users/user/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /Users/user/Sites/ec/spec/models/organization_spec.rb:1:in `<top (required)>'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `block in load_spec_files'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `each'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load_spec_files'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:22:in `run'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:80:in `run'
        from /Users/user/.rvm/gems/ruby-1.9.3-p327@rails329-ec/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:17:in `block in autorun' 
```

后缀“_localization”是否以某种方式保留？Rails 似乎没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T01:10:57.967

我发现了问题。它与“_localization”后缀无关。相反，在创建模型 ItemLocalization 时，Rails 在文件夹 test/factories 中创建了一个同名的工厂，我在 rspec/factories 下使用了同一个工厂。

从 test/factories 文件夹中删除所有文件解决了这个问题。

# c++ - GetLastError 在 SystemParametersInfo 中返回错误 2

> ID：14670319
> 
> 赞同：0
> 
> 时间：2013-02-03T07:19:17.683
> 
> 标签：c++, winapi

```
#include <iostream>
#include <windows.h>
using namespace std;

int main(){
    LPWSTR test = L"c:/aizen.png";
    int result = SystemParametersInfo(SPI_SETDESKWALLPAPER, 0, test, SPIF_UPDATEINIFILE);
    if(result)
        cout << "Wallpaper set!";
    else
        cout << "Error: " << GetLastError();
    cin >> result;
    return 0;
} 
```

该代码只是为了更改背景墙纸，但我不断收到错误：2，这意味着“找不到文件”。但是，文件在那里！我正在使用 microsoft visual studio 2010，我尝试以管理员身份运行、区分大小写、更改斜杠等。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:25:21.913

错误 2 是`File not found`。

首先，确保它`aizen.png`实际上位于驱动器的根文件夹中`C:\`（在 Vista 及更高版本上不太可能，因为非管理员用户通常没有那里的写入权限）。

如果文件确实存在，则问题很可能是您没有正确转义反斜杠：

```
LPWSTR test = L"c:\\aizen.png"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:02:12.557

问题是您将 UNICODE 字符串 - `LPWSTR`- 传递给采用 ANSI 的 API。

几乎所有 Win32 API（无论如何都接受字符串）有两个版本，一个以 ...A 结尾的 ANSI（8 位字符），一个以 ...W 结尾的宽字符，又名UNICODE（技术上不是“真正的”unicode，但这比这个回复更值得）。

如果您`#define`在编译时有 UNICODE d，那么简单的未修饰版本将 #defined 为 ...W 版本；否则它会被 #defined 定义为 ...A 版本。看看winuer.h，你会看到：

```
WINUSERAPI
BOOL
WINAPI
SystemParametersInfoA(
    __in UINT uiAction,
    __in UINT uiParam,
    __inout_opt PVOID pvParam,
    __in UINT fWinIni);
WINUSERAPI
BOOL
WINAPI
SystemParametersInfoW(
    __in UINT uiAction,
    __in UINT uiParam,
    __inout_opt PVOID pvParam,
    __in UINT fWinIni);
#ifdef UNICODE
#define SystemParametersInfo  SystemParametersInfoW
#else
#define SystemParametersInfo  SystemParametersInfoA
#endif // !UNICODE 
```

请注意，Windows 有*两个*SystemParametersInfo 函数；W 期望宽 LPWSTR 而 A 期望普通 LPSTR；以及是否定义了 UNICODE 选择哪个是“默认”。（您始终可以手动添加 A 或 W 以显式调用。）

在您的原始代码中可能发生的情况是，由于您没有定义 UNICODE，您最终会使用 ...A 版本，它需要一个 ANSI 字符串，但您传递的是一个 UNICODE 字符串 - 所以它不起作用.

您为使其正常工作所做的“一点改变”不仅仅是一点点：您现在将一个 ANSI 字符串传递给 ...A 版本的 API，因此它可以正常工作：

```
int result = SystemParametersInfo(SPI_SETDESKWALLPAPER, 0, (void*)"c:/aizen.jpg", SPIF_UPDATEINIFILE); 
```

或者，您可以使用 LPWSTR 显式调用 W 版本：

```
int result = SystemParametersInfoW(SPI_SETDESKWALLPAPER, 0, L"c:\\aizen.jpg", SPIF_UPDATEINIFILE); 
```

或者，您可以在应用程序的开头定义 UNICODE，使用 L"..." 字符串和 API 的普通版本 - 只需在 #include 之前在原始应用程序顶部添加 #define UNICODE 。（UNICODE 通常在 makefile 或编译器设置选项中定义，而不是在代码中显式定义，因此，如果您是 Win32 编程的新手，它可能会带来一些惊喜。）

请注意，*不*推荐使用 LPWSTR；如果有的话，情况正好相反；自 XP 左右以来，典型的 Win32 实践一直是全面使用 W 风格的字符串，因此它实际上是在 Win32 上被视为“弃用”的普通“...”字符串。（例如，许多 COM API 只使用宽字符串。）

大多数其他功能对此都有一些保护；如果您不小心尝试传递一个 ANSI 字符串来表示 SetWindowTextW，您将收到编译时错误，因为您传入的 LPSTR 与函数期望的预期 LPWSTR 类型不匹配。但是 SystemParamtersInfo 很棘手；它需要一个 void* 作为 data 参数，因此在编译时将接受 [几乎]*任何东西*，并且只有在运行时调用该函数时才会遇到错误。

--

[顺便说一句，这是大卫赫弗南在您第一次发布问题](https://stackoverflow.com/a/14634949/660175)时在回答您的问题时指出的-

> 一些可能的原因浮现在脑海中：
> ...
> 
> *   您的 ANSI/Unicode 编码不匹配。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T01:51:30.667

看起来很奇怪，如果您使用 MinGW c++ 编译器进行编译，它实际上会通过一些更改来编译它：

```
int main(){
        int result = SystemParametersInfo(SPI_SETDESKWALLPAPER, 0, (void*)"c:/aizen.jpg", SPIF_UPDATEINIFILE); 
```

这会起作用，显然 LPWSTR 已被弃用...... Visual Studio 可能存在权限问题。以管理员身份运行，然后重试。

# magento - MAGENTO - 在顶部栏中创建子菜单，链接到扩展设置页面（从系统>配置）

> ID：14670320
> 
> 赞同：0
> 
> 时间：2013-02-03T07:19:34.750
> 
> 标签：magento, hyperlink, backend

我在magento中创建了一个模块，有一个菜单和一个子菜单，并且在系统->配置中有一个设置。我想创建新的子菜单，链接到我的设置（系统-> 配置）。

我该怎么做？

# java - 一次复制五个不同的序列化文件

> ID：14670322
> 
> 赞同：-2
> 
> 时间：2013-02-03T07:20:33.400
> 
> 标签：java

我必须制作一个程序来将序列化文件从源文件夹复制到目标文件夹

源文件夹是 C:\ter\ (它有 5 个不同的序列化文件 gfr.ser,asd.ser,hgf.ser,kiu.ser,uew.ser) 目标文件夹是 C:\bvg\

要传输的文件是 gfr.ser,asd.ser,hgf.ser,kiu.ser,uew.ser

我想出了下面这个程序，但它只复制一个序列化文件 gfr.ser，请告知我如何一次复制所有五个序列化文件。

```
 class ScheduledTask extends TimerTask {

        public void run() {
            InputStream inStream = null;
            OutputStream outStream = null;
            try {
                File source = new File("C:\\ter\\");
                File target = new File(" C:\\bvg\\");

                  if (target.exists()){   // Already exists. do not copy
                     return;
                }
               File[] files = source.listFiles();
               for(File file:files){   
                   inStream = new FileInputStream(file);
                    outStream = new FileOutputStream(target);
                       }

                byte[] buffer = new byte[1024];
                int length;
                // copy the file content in bytes
                while ((length = inStream.read(buffer)) > 0) {
                    outStream.write(buffer, 0, length);
                }
                inStream.close();
                outStream.close();
                System.out.println("File is copied successful!");
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    public class Copycache {
        public static void main(String args[]) throws InterruptedException {
            Timer time = new Timer();
        ScheduledTask task = new ScheduledTask();
        time.schedule(task, new Date(), TimeUnit.SECONDS.toMillis(1));
        }

    } 
```

我想出了这种方法，但仍然无法正常工作，请告知，因为文件最终没有被复制...在堆栈跟踪下方...

```
java.io.FileNotFoundException: C:\bvg\ (Access is denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at com.bvb.ScheduledTask.run(Copycache.java:31)
    at java.util.TimerThread.mainLoop(Unknown Source)
    at java.util.TimerThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:29:51.933

如果要将源文件夹的所有文件复制到目标，可以查看以下链接中提到的解决方案。

[解决方案-链接](http://forums.devshed.com/java-help-9/copying-multiple-files-from-one-folder-to-another-564926.html)

这是我测试的工作解决方案：（我从另一个 StackOverFlow 答案中获取了一些代码片段）

参考：[StackOverFlow 答案](https://stackoverflow.com/questions/106770/standard-concise-way-to-copy-a-file-in-java)

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.nio.channels.FileChannel;
import java.util.TimerTask;

class ScheduledTask extends TimerTask {

    public static void main(String[] args) {
        new ScheduledTask().run();
    }

    public void run() {
        try {
            File source = new File("c:\\ter\\");
            File target = new File("c:\\bvg\\");

            if (target.exists()) { // Already exists. do not copy
                return;
            }
            else
            {
                target.mkdir();
            }
            File[] files = source.listFiles();
            for (File file : files) {
                File fileSource = new File(source + "\\"+file.getName());
                File fileTarget = new File(target + "\\"+file.getName());

                copyFile(fileSource,fileTarget);
                System.out.println("File is copied successful! :" + file.getName());
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void copyFile(File sourceFile, File destFile) throws IOException {
        if(!destFile.exists()) {
            destFile.createNewFile();
        }

        FileChannel source = null;
        FileChannel destination = null;

        try {
            source = new FileInputStream(sourceFile).getChannel();
            destination = new FileOutputStream(destFile).getChannel();
            destination.transferFrom(source, 0, source.size());
        }
        finally {
            if(source != null) {
                source.close();
            }
            if(destination != null) {
                destination.close();
            }
        }
    }
} 
```

# android - onActivityResult 没有被调用

> ID：14670323
> 
> 赞同：1
> 
> 时间：2013-02-03T07:20:35.323
> 
> 标签：android, android-intent, android-activity, onkeydown

当我从子活动返回时，不会在 mainActivity 中调用 onActivityResult。我在子活动中使用完成（）。你能告诉我原因吗？

提前致谢。

## 主要活动

```
private void goToHomePage() { 
    if(connected){
        basket.putString(key, "dummy");
        Intent i = new Intent(Splash.this,HomePage.class);
        i.putExtras(basket);
        startActivityForResult(i,0);  
    }else{
        alert(); 
    } 
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data); 
    basket = data.getExtras();  
    Log.i("Splash","on activity result...");
    if (resultCode == RESULT_OK){  
        switch(requestCode){ 
        case 0:

            wifi.disConnect();
            break;
        }

    }
} 
```

## 儿童活动

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        Log.i("HomePage","onKeyDown");
        sendBack("close"); 
    }
    return super.onKeyDown(keyCode, event);
}

public void sendBack(String command) { 
    Intent sendBack = new Intent(); 
    Bundle basket1 =new Bundle();
    basket1.putString("command", command);  
    sendBack.putExtras(basket1);
    setResult(RESULT_OK, sendBack);
    finish();   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:28:23.790

为什么你有

```
 // TODO Auto-generated method stub
super.onActivityResult(requestCode, resultCode, data); 
```

在你的`onActivityResult`？我想这不是必需的，并且控件正在到达此语句并在您的逻辑之前退出该方法。与其他评论一样，如果控制到达此语句，您是否已逐步检查调试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:48:32.743

当用户按下后退键时，您是否尝试将某些内容传递给主要活动？在这种情况下，试试这个：

1.  在子活动中，删除`onKeyDown()`.
2.  在子活动中，添加以下内容：

    ```
    @Override
    public void onBackPressed()
    {
        String command = "close";

        Intent sendBack = new Intent(); 
        Bundle basket1 =new Bundle();
        basket1.putString("command", command);  
        sendBack.putExtras(basket1);
        setResult(RESULT_OK, sendBack);
        finish(); 
        // Do not call super.onBackPressed() so as to ignore the default implementation.
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:26:47.793

这是我的错误，我在mainActivity的onPause中给出了finish()。当它移动到子活动时，它会关闭活动。再次感谢 ！

# c++ - 无法使用模板参数定义变量类型和大小的列表

> ID：14670326
> 
> 赞同：0
> 
> 时间：2013-02-03T07:20:53.903
> 
> 标签：c++, templates

我有一个列表作为具有两个模板参数的类的私有成员：`type`用于列表元素的数据类型和列表中元素`size`的数量。为此，我想使用我的两个模板参数来使用列表的填充构造函数。这是我的尝试：

```
#include <list>

template <typename type, unsigned int size>
class my_class {

   private:
      std::list<type> my_queue(size, 0);

   // More code here...

}; 
```

我的方法似乎遵循[此处](http://www.cplusplus.com/reference/list/list/list/)提供的信息和示例；但是当我编译这个时，我得到以下错误。

```
error: 'size' is not a type
error: expected identifier before numeric constant
error: expected ',' or '...' before numeric constant 
```

似乎它通过其默认构造函数而不是填充构造函数识别列表的声明。谁能帮我解决这个问题？

谢谢！

**编辑：**这是我修改后的更详细的来源。我现在在使用公共方法时遇到了麻烦。*注意：*这是我班级的头文件。

```
#include <list>

template <typename T, unsigned int N>
class my_class {

   private:

      std::list<T> my_queue;

   public:

      // Constructor
      my_class() : my_queue(N, 0) { }

      // Method
      T some_function(T some_input);
      // The source for this function exists in another file.

}; 
```

**编辑 2：**最终实施......谢谢你，@billz！

```
#include <list>

template <typename T, unsigned int N>
class my_class {

   private:

      std::list<T> my_queue;

   public:

      // Constructor
      my_class() : my_queue(N, 0) { }

      // Method
      T some_function(T some_input){
         // Code here, which accesses my_queue
      }

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:24:08.423

在 C++11 之前只能在构造函数中初始化成员变量，最好使用大写字符作为模板参数：

```
template <typename T, unsigned int N>
class my_class {
   public:
    my_class() : my_queue(N, 0) { }

   private:
      std::list<T> my_queue;

   // More code here...

}; 
```

编辑：

T some_function(T some_input); C++ 只支持包含模块，你需要`some_function`在声明 my_class 的同一个文件中定义。

# c++ - 显式模板实例化：MSVC 与 GCC

> ID：14670330
> 
> 赞同：5
> 
> 时间：2013-02-03T07:21:48.273
> 
> 标签：c++, templates, instantiation, explicit

我正在尝试处理 C++ 中的命名空间和模板。我可以在 MSVC 中编译以下代码（没有警告或错误），但是对于 CYGWIN/GCC 的各种排列，我一点运气都没有。任何帮助，将不胜感激。

在头文件中，我声明了一个模板化的子类，如下所示：

```
#include <gdal.h>
namespace sfms {

template <class _type, GDALDataType _gdal> class SmfsGrid_Typed : public SfmsGrid_Base {
public:
  SmfsGrid_Typed();
  SmfsGrid_Typed(const SmfsGrid_Typed<_type, _gdal> *toCopy);
  SmfsGrid_Typed(std::string filename);
  virtual ~SmfsGrid_Typed();
  virtual bool OpenRead();
  virtual bool OpenWrite();

protected:
  _type m_nodata_value;

  virtual SfmsGrid_Base *New() const;
  virtual SfmsGrid_Base *New(SfmsGrid_Base *toCopy) const;
  virtual void initCopy(SfmsGrid_Base *copy) const;
};

template SmfsGrid_Typed<double, GDT_Float64>;
template SmfsGrid_Typed<float, GDT_Float32>;
template SmfsGrid_Typed<int, GDT_Int32>;

typedef SmfsGrid_Typed<double, GDT_Float64> SmfsGrid_Double;
typedef SmfsGrid_Typed<float, GDT_Float32> SmfsGrid_Float;
typedef SmfsGrid_Typed<int, GDT_Int32> SmfsGrid_Int;
} 
```

在源文件中，我实例化了专门的模板类，如下所示：

```
void hi_there() {
//...
sfms::SmfsGrid_Typed<int, GDT_Int32> *grid = new sfms::SmfsGrid_Typed<int, GDT_Int32>(filey);
//...
sfms::SmfsGrid_Int *grid2 = new sfms::SmfsGrid_Int(filey);
//...
} 
```

GDALDataType 是一个枚举，但这似乎不是问题所在。

我已经尝试了命名空间内外的类声明，但没有成功。

包含模板实现的源文件在两个编译器中都可以编译。

我已经尝试删除显式模板实例化并包含相关的 C++ 源文件，但也没有任何乐趣。

我在各种不同的地方（在模板化的类 def'n 和我尝试创建对象的地方）尝试了 'template'、'typename' 和 'typedef' 关键字，但没有成功，但是各种有趣且经常误导的错误消息海合会，例如：

```
error: 'SmfsGrid_Typed' is not a member of 'sfms' 
```

当它显然是！:) 无论如何，任何有关将此代码从 MSVC 移植到 GCC 的帮助都会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T07:39:17.083

您的显式模板实例化看起来不对。尝试将其替换为

```
template class SmfsGrid_Typed<double, GDT_Float64>;
template class SmfsGrid_Typed<float, GDT_Float32>;
template class SmfsGrid_Typed<int, GDT_Int32>; 
```

（注意添加的 class 关键字）

# javascript - $(function(){}) 在正文而不是头部

> ID：14670333
> 
> 赞同：0
> 
> 时间：2013-02-03T07:22:47.663
> 
> 标签：javascript, html

`$(function(){})`和 jquery 的一样，`$(document).ready`所以我想知道是否可以将它放入 body 而不是 head ？我只看到将脚本放在页面的不同部分的行为是在不同的时间执行它。是真的？我可以将脚本放在页面中间的 div 中吗？它会影响 DOM 的加载方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T07:28:58.333

> 我只看到将脚本放在页面的不同部分的行为是在不同的时间执行它。是真的？

是的，但是您正在谈论的脚本只进行了一次函数调用（to `ready`）。无论哪种方式，当 DOM 准备好时，稍后都会调用回调。

> 我可以将脚本放在页面中间的 div 中吗？

是的。但同样，如果有问题的脚本只是调用`ready`（直接或通过快捷方式），那也没关系。我会劝阻你不要在你的标记中乱扔脚本；最好尽量保持两者在很大程度上分开。

> 它会影响 DOM 的加载方式吗？

仅当您`document.write`在脚本中使用时（即使那样，它也不会影响 DOM 的加载方式，但可能会影响它的内容）。

* * *

如果您可以选择`script`标记的位置（例如，您不是在编写 JavaScript 库或 jQuery 插件，您的脚本在您控制的页面上），那么几乎没有理由使用`ready`. 相反，请将您的脚本标签放在页面末尾，就在结束`</body>`标签之前。参考：

*   [Google Closure 工程师了解 DOM 何时准备就绪](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)
*   [YUI 网站加速最佳实践](http://developer.yahoo.com/performance/rules.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T07:25:20.043

的目的`document.ready`是等到 DOM 准备好，如果您将脚本放在正文结束标记之前或正在修改的 html 之后，那么您不需要，`document.ready`尽管它仍然可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T07:27:16.970

这会起作用，但这是不好的做法。如果可以的话，您应该将脚本放在网页的末尾而不是头部。当然，除非您有需要首先加载的内容（例如文档就绪功能）。

# mysql - 将 MySQL 文件转换为 SQLite 数据库

> ID：14670334
> 
> 赞同：0
> 
> 时间：2013-02-03T07:22:49.157
> 
> 标签：mysql, sqlite

我尝试了几种方法将[此处](http://wing.comp.nus.edu.sg/SMSCorpus/)找到的 SQL 文件转换为 SQLite 文件。方法包括[这个脚本](https://gist.github.com/943776)（它在 SQLite 中正确生成表但为空），[这个脚本](http://www.jbip.net/content/how-convert-mysql-sqlite)，我尝试将 MySQL 中的数据输出为 CSV，然后我尝试将其导入 SQLite，显然得到错误数量的列......

有没有简单的方法可以从 MySQL 转换为 SQLite？

# c# - 写入另一个文件后如何在pdf上保持相同的格式

> ID：14670336
> 
> 赞同：-1
> 
> 时间：2013-02-03T07:23:16.717
> 
> 标签：c#, itextsharp

我的代码从 Pdf 中读取文本并将其写入另一个 Pdf 并进行一些修改，但是第二个 Pdf 中的格式不一样，那么我怎样才能保持相同的格式和样式？

我的代码是：

```
string newFile = @"D:\Result.pdf";
            string file = @"D:\Source.pdf";

            string imagepath = @"D:\logo.jpg";
            Console.WriteLine("Welcome");

            string content="";
            // open the reader
            PdfReader reader = new PdfReader(file);
            iTextSharp.text.Rectangle size = reader.GetPageSizeWithRotation(1);
            Document document = new Document(size);

            FileStream fs = new FileStream(newFile, FileMode.Create, FileAccess.Write);
            PdfWriter writer = PdfWriter.GetInstance(document, fs);

            int n = reader.NumberOfPages;

            bool addimage = false;
            if (!File.Exists(file))
            {
                file = Path.GetFullPath(file);
                if (!File.Exists(file))
                {
                    Console.WriteLine("Please give in the path to the PDF file.");
                }
            }
            document.Open();
            for (int i = 1; i < n; i++)
            {
                while (addimage == false)
                {
                    iTextSharp.text.Image pic = iTextSharp.text.Image.GetInstance(imagepath);
                    pic.ScaleToFit(100f, 100f);
                    //pic.ScalePercent(24f);
                    pic.SetAbsolutePosition(document.PageSize.Width - 100f - 100f, document.PageSize.Height + 100f - 225f);
                    document.Add(pic);
                    addimage = true;
                }
                content=PdfTextExtractor.GetTextFromPage(reader, i);
                document.Add(new Paragraph(content));
                PdfContentByte cb = writer.DirectContent;
                cb.MoveTo(document.PageSize.Width / 2, document.PageSize.Height / 2);
                cb.LineTo(document.PageSize.Width / 2, document.PageSize.Height);
                cb.Stroke();
            }
            document.Close(); 
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:01:52.027

请下载[我的书第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)并查看表 6.1。你会发现你使用了错误的类来复制内容。您应该使用`PdfStamper`，或者`PdfCopy`如果您只想添加一个额外的页面作为现有 PDF 的封面（这就是我解释您的代码的方式）。但是，如果您的目的是按照您想要的内容编辑 PDF `reflow`，请阅读第 6 章的介绍：PDF 不是一种专为编辑而设计的格式。

请注意，本书中的示例是用 Java 编写的。[我们已在SourceForge 上](http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/)发布了这些示例的 C# 版本。

# android - 使用自定义 JAR 运行 APK 时出现 NoClassDefFoundError

> ID：14670338
> 
> 赞同：1
> 
> 时间：2013-02-03T07:23:25.917
> 
> 标签：android, apk, noclassdeffounderror

它编译得很好。加载到我的测试设备就好了。当我运行它时，它会崩溃并显示“抱歉，Bat 应用程序 Ear（进程 com.fleenlab.LWPA_EarOfBat）已意外停止。请重试。” 在设备屏幕上，一堆“解析失败”和“类链接失败”，然后是 logcat 中的“FATAL EXCEPTION....NoClassDefFound”。

JAR 是我在 Eclipse 上编写的普通 Java。

是的，这与许多其他人遇到的问题相同。

我尝试了那个流行的解决方案（[http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)）。我将我的 JAR 放在 libs 文件夹中。没运气。

我还尝试了变体解决方案：将 JAR 称为外部 JAR 并设置“订购和导出”复选框。仍然没有运气。

我什至反编译了 APK（使用 apktool）来查看类是否被正确打包。他们是。

更多信息 Android SDK 工具 R21.0.1 Android SDK 平台工具 R16.0.1 目标 API 8 Eclipse SDK 版本：3.7.2 Debian Squeeze

我受阻了。有什么线索吗？

（还不能发布图片，所以这里是文本形式的 logcat 转储的最后一点）

```
11-30 21:30:44.140: W/dalvikvm(926): Link of class 'Lorg/fleen/core/diamondGrammar/Bubble;' failed

11-30 21:30:44.140: W/dalvikvm(926): Unable to match class for part: 'Lorg/fleen/core/diamondGrammar/Bubble;)Ljava/util/List;'

11-30 21:30:44.140: I/dalvikvm(926): Failed resolving Lorg/fleen/core/diamondGrammar/DNode; interface 667 'Ljavax/swing/tree/TreeNode;'

11-30 21:30:44.140: W/dalvikvm(926): Link of class 'Lorg/fleen/core/diamondGrammar/DNode;' failed

11-30 21:30:44.140: I/dalvikvm(926): Failed resolving Lorg/fleen/core/diamondGrammar/Bubble; interface 678 'Lorg/fleen/core/diamondGrammar/DNode;'

11-30 21:30:44.140: W/dalvikvm(926): Link of class 'Lorg/fleen/core/diamondGrammar/Bubble;' failed

11-30 21:30:44.150: W/dalvikvm(926): Unable to match class for part: 'Lorg/fleen/core/diamondGrammar/Bubble;)Ljava/util/List;'

11-30 21:30:44.150: I/dalvikvm(926): Failed resolving Lorg/fleen/core/diamondGrammar/DNode; interface 667 'Ljavax/swing/tree/TreeNode;'

11-30 21:30:44.150: W/dalvikvm(926): Link of class 'Lorg/fleen/core/diamondGrammar/DNode;' failed

11-30 21:30:44.150: I/dalvikvm(926): Failed resolving Lorg/fleen/core/diamondGrammar/Bubble; interface 678 'Lorg/fleen/core/diamondGrammar/DNode;'

11-30 21:30:44.150: W/dalvikvm(926): Link of class 'Lorg/fleen/core/diamondGrammar/Bubble;' failed

11-30 21:30:44.150: W/dalvikvm(926): Unable to match class for part: 'Lorg/fleen/core/diamondGrammar/Bubble;)Ljava/util/List;'

11-30 21:30:44.150: I/dalvikvm(926): Failed resolving Lorg/fleen/core/diamondGrammar/DNode; interface 667 'Ljavax/swing/tree/TreeNode;'

11-30 21:30:44.150: W/dalvikvm(926): Link of class 'Lorg/fleen/core/diamondGrammar/DNode;' failed

11-30 21:30:44.150: I/dalvikvm(926): Failed resolving Lorg/fleen/core/diamondGrammar/Bubble; interface 678 'Lorg/fleen/core/diamondGrammar/DNode;'

11-30 21:30:44.150: W/dalvikvm(926): Link of class 'Lorg/fleen/core/diamondGrammar/Bubble;' failed

11-30 21:30:44.190: W/dalvikvm(926): Unable to match class for part: 'Lorg/fleen/core/diamondGrammar/Bubble;)Ljava/util/List;'

11-30 21:30:44.190: I/dalvikvm(926): Failed resolving Lorg/fleen/core/diamondGrammar/DNode; interface 667 'Ljavax/swing/tree/TreeNode;'

11-30 21:30:44.190: W/dalvikvm(926): Link of class 'Lorg/fleen/core/diamondGrammar/DNode;' failed

11-30 21:30:44.190: I/dalvikvm(926): Failed resolving Lorg/fleen/core/diamondGrammar/Bubble; interface 678 'Lorg/fleen/core/diamondGrammar/DNode;'

11-30 21:30:44.190: W/dalvikvm(926): Link of class 'Lorg/fleen/core/diamondGrammar/Bubble;' failed

11-30 21:30:44.190: W/dalvikvm(926): Unable to match class for part: 'Lorg/fleen/core/diamondGrammar/Bubble;)Ljava/util/List;'

11-30 21:30:44.240: D/dalvikvm(926): GC_CONCURRENT freed 634K, 53% free 2792K/5831K, external 716K/1038K, paused 2ms+4ms

11-30 21:30:44.560: D/dalvikvm(926): GC_CONCURRENT freed 368K, 51% free 2874K/5831K, external 716K/1038K, paused 2ms+2ms

11-30 21:30:44.660: W/dalvikvm(926): threadid=9: thread exiting with uncaught exception (group=0x40082560)

11-30 21:30:44.660: E/AndroidRuntime(926): FATAL EXCEPTION: Thread-10

11-30 21:30:44.660: E/AndroidRuntime(926): java.lang.NoClassDefFoundError: org.fleen.core.diamondGrammar.Grid

11-30 21:30:44.660: E/AndroidRuntime(926):  at com.fleenlab.LWPA_EarOfBat.LoopingTunnelFlowVFrameBlock_TF0000_Tight.initRootAndCore(LoopingTunnelFlowVFrameBlock_TF0000_Tight.java:90)

11-30 21:30:44.660: E/AndroidRuntime(926):  at org.fleen.loopingTunnelFlowVFrameSequence.LoopingTunnelFlowVFrameBlock_Abstract.<init>(LoopingTunnelFlowVFrameBlock_Abstract.java:100)

11-30 21:30:44.660: E/AndroidRuntime(926):  at com.fleenlab.LWPA_EarOfBat.LoopingTunnelFlowVFrameBlock_TF0000_Tight.<init>(LoopingTunnelFlowVFrameBlock_TF0000_Tight.java:43)

11-30 21:30:44.660: E/AndroidRuntime(926):  at com.fleenlab.LWPA_EarOfBat.LoopingTunnelFlowVFrameSeq_Tight.getBlock(LoopingTunnelFlowVFrameSeq_Tight.java:17)

11-30 21:30:44.660: E/AndroidRuntime(926):  at com.fleenlab.LWPA_EarOfBat.LoopingTunnelFlowVFrameSeq_Tight.<init>(LoopingTunnelFlowVFrameSeq_Tight.java:14)

11-30 21:30:44.660: E/AndroidRuntime(926):  at com.fleenlab.LWPA_EarOfBat.Generator.getSeq(Generator.java:110)

11-30 21:30:44.660: E/AndroidRuntime(926):  at com.fleenlab.LWPA_EarOfBat.Generator$Initializer.run(Generator.java:78) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T01:59:35.183

这是一个依赖关系。Grid 依赖于 TreeNode，它在 Swing 中，而不在 JAR 中。我的解决方案是摆脱 TreeNode。反正也不是很需要。现在工作正常。

我知道 logcat 说 NoClassDefFound 发生在 Grid 中，但问题实际上并不是缺少 Grid 类定义，而是 Grid 所指的类缺少定义。

# jquery - 自动点击，但被浏览器阻止

> ID：14670340
> 
> 赞同：0
> 
> 时间：2013-02-03T07:23:49.097
> 
> 标签：jquery, hyperlink

我有一个链接自动点击

和 jquery 代码，用于在页面加载时自动单击链接

```
 $('#links').click(); 
```

但是当我测试这个时。浏览器有阻止弹出（链接）

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:33:58.787

问题不在于您的 jquery，而在于您的链接/按钮的行为方式。您不能强制浏览器启用弹出窗口，这是一项客户端安全功能。也许您可以改用锚标记并将目标属性设置为空白。这应该在新选项卡/窗口中打开链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:21:30.910

```
$('#links').click(function(event){
   event.preventDefault();
   yourFunction();
}); 
```

如果您正在考虑对此做一些偷偷摸摸的事情，我建议您不要这样做。您似乎正在尝试使用您的功能触发弹出窗口。

如果您出于善意而这样做，那么我不明白为什么属性“target = _blank”不会起作用。

上面的代码允许你做的，是防止浏览器做你点击链接时通常做的事情。然后它会等待你的 JS 做它想做的任何事情。

如果您需要更多帮助，我建议您在函数中显示剩余的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:39:35.213

可能这可以帮助你：http: [//jsfiddle.net/LX7xs/](http://jsfiddle.net/LX7xs/)

```
$(window).click(function(){
   alert('click triggered.');
}).trigger('click'); 
```

当页面加载第一次`.trigger('click')`被触发并弹出警报时，使用此脚本。虽然 window 还持有点击事件。

# jwplayer - JW播放器，用超链接暂停图像覆盖，如何？

> ID：14670345
> 
> 赞同：1
> 
> 时间：2013-02-03T07:24:50.287
> 
> 标签：jwplayer

我想知道这可能吗？

我正在寻找的是当视频在 jw 播放器中暂停时，横幅或图像应该覆盖在播放器的中心。

如果是这样，那么我需要一个方向。

我已经通过将包含广告详细信息的 xml 提要传递给播放器来使用自定义 Flash 播放器执行此操作。

我们正在使用这样的提要

```
<ads><ad targeturl="linkhere"><image src="image-path" width="300" height="250"/></ad></ads> 
```

谢谢你的时间。

# php - 使用 google API 从 PHP 中的地址获取 lat&long

> ID：14670347
> 
> 赞同：-1
> 
> 时间：2013-02-03T07:25:18.470
> 
> 标签：php, codeigniter, google-maps

我目前正在使用谷歌地理编码 API 从地址获取 LatLong，但它不能正确显示结果。请告诉我的代码有什么问题。提前谢谢。

代码 ：

```
 $address1=$this->input->post("Deal_Address1")."<br>";
            $address2=$this->input->post("Deal_Address2")."<br>";
            $CompleteAddress=$address1."".$address2."<br>"; 
            $address=str_replace(' ','+',$CompleteAddress);
            $address=str_replace(',','+',$address);
            $url = "http://maps.google.com/maps/api/geocode/json?address=$address&sensor=false&region=Israel";
            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($ch, CURLOPT_PROXYPORT, 3128);
            curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
            $response = curl_exec($ch);
            curl_close($ch);
            $response_a = json_decode($response);
            //var_dump($response_a);
            if(isset($response_a->results[0])>0){
             $latitude = $response_a->results[0]->geometry->location->lat."<br>";
             $longitude = $response_a->results[0]->geometry->location->lng."<br>"; }else{
                 $latitude=0.00;
                 $longitude=0.00;
            }

$url=http://maps.google.com/maps/api/geocode/json?address=32+Lehi+Street+Jerusalem&sensor=false®ion=Israel 
```

在数组中获取结果：`object(stdClass)#19 (2) { ["results"]=> array(0) { } ["status"]=> string(12) "ZERO_RESULTS" }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:38:30.507

不要关心 ® ，它会在转储 $url 时由浏览器显示，因为他在使用＆符号时期望字符引用，并且会意外解析`**&regi**on`。

从和中删除尾随`<br>`的。`$CompleteAddress``$address1``$address2`

# menu - Android Admob 横幅和菜单设置

> ID：14670352
> 
> 赞同：0
> 
> 时间：2013-02-03T07:25:31.377
> 
> 标签：menu, admob

所以我将 AdMob 横幅集成到一个 android 应用程序中。横幅位于视图底部，工作正常，滚动时不与列表视图重叠，一切都很好。我认为底部位置是放置横幅的好地方，但是当点击菜单按钮时，菜单确实覆盖了横幅。我猜这是正常行为，但想确保它不会破坏 admob 策略，特别是：

> 广告不应放置在非常靠近按钮或用户在与您的应用程序交互时可能不小心点击的任何其他对象的下方或下方。

有没有人有类似的情况？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:50:37.397

我认为，除非你没有把它放在离菜单很近的地方，否则它会很好。

您只需要确保它不会干扰用户输入并产生不正确的点击。

它通常根据具体情况而定。

# java - 使用 java GUI 的多个时钟

> ID：14670354
> 
> 赞同：1
> 
> 时间：2013-02-03T07:26:13.863
> 
> 标签：java, multithreading, swing, user-interface

我正在做一个项目，我必须创建一组 6 个时钟，使用 java GUI 为不同的地方显示不同的时间。我已经成功创建了使用线程显示一个时钟的代码。但是如何创建 6 个不同的线程来处理 6 个时钟呢？这是创建单个时钟的以下类：

```
public class analogClockGUI extends JPanel implements Runnable{

    int secx,secy,lsecx,lsecy;               
    int minx,miny,lminx,lminy;          
    int hrx,hry,lhrx,lhry;
    int secRadius,minRadius,hrRadius,center;
    int pointx1,pointy1,pointx2,pointy2;

    double dhs,dhm,dhh;        
    Random rndm;               
    Thread t;
    Font clockFont;
    Date incre;
    int s,h,m;

    boolean off=false,drawFirst=true;
    Dimension dimension;
    Color wallColor,backColor=Color.black;

    int previousMin,previousSec;
    int change;    

    public analogClockGUI()
    {

        addMouseListener(new MouseAdapter()
        {

            public void mouseEntered(MouseEvent me)
            {
                dimension=getSize();

                if(change!=dimension.height)
                {
                    center=dimension.height/2;
                    setSize(new Dimension(dimension.height,dimension.height));
                }
                /*else
                {
                    center=dimension.width/2;
                    setSize(new Dimension(dimension.width,dimension.width));
                }*/
                drawFirst=true;
                change=dimension.height;     
                secRadius=(int)(0.7*center);
                minRadius=(int)(0.75*center);
                hrRadius=(int)(0.5*center);

            }
        });
        init();
    }

    public void init()
    {

        rndm=new Random();
        t=new Thread(this);
        dimension=getSize();
        center=dimension.height/2;

        secRadius=(int)(0.7*center);   
        minRadius=(int)(0.75*center);
        hrRadius=(int)(0.5*center);
        wallColor=new Color(rndm.nextInt(255),rndm.nextInt(255),rndm.nextInt(255));
        t.start();
    }
    public void run() throws NullPointerException
    {
        while(true)
        {
            s=new Date().getSeconds();//+incre.getSeconds(); 

            if(s!=previousSec)
            {

                dhs=Math.toRadians(s*6-90);
                secx=(int)(secRadius*Math.cos(dhs))+center;
                secy=(int)(secRadius*Math.sin(dhs))+center;

                pointx1=(int)((secRadius+center*0.15)*Math.cos(dhs))+center;
                pointy1=(int)((secRadius+center*0.15)*Math.sin(dhs))+center;

                m=new Date().getMinutes();
                dhm=Math.toRadians(m*6-90);
                minx=(int)(minRadius*Math.cos(dhm))+center;
                miny=(int)(minRadius*Math.sin(dhm))+center;

                pointx2=(int)((secRadius+center*0.15)*Math.cos(dhm))+center;
                pointy2=(int)((secRadius+center*0.15)*Math.sin(dhm))+center;

                h =new Date().getHours();
                dhh=Math.toRadians(h*30-90+((m-1)/2));
                hrx=(int)(hrRadius*Math.cos(dhh))+center;
                hry=(int)(hrRadius*Math.sin(dhh))+center;

                repaint();
                previousSec=s;
            }
            try
            {
                Thread.sleep(100);
                if(off)
                    break;
            }catch(InterruptedException e){}          
        }
    }
    public void upgate(Graphics g) throws NullPointerException
    {

        if(drawFirst==true)
        {

            clockFont=new Font("Serif",Font.PLAIN,(int)(0.2*center));
            drawFirst=false;
        }
        if(m!=previousMin){
            if(s==0)
            {

                wallColor=new Color(rndm.nextInt(255),rndm.nextInt(255),rndm.nextInt(255));
                g.setColor(wallColor);
                g.fillOval(0,0,2*center,2*center);
                g.setColor(backColor);
                g.fillOval((int)(0.1*center),(int)(0.1*center),(int)(center*1.8),(int)(center*1.8));

                clear(g);
                previousMin=m;
            }}
        drawPoints(g);
        g.setColor(Color.white);
        g.setFont(clockFont);

        g.drawString("12",(int)(0.9*center),(int)(0.25*center));
        g.drawString("6",(int)(0.95*center),(int)(1.885*center));
        g.drawString("9",(int)(0.11*center),(int)(1.06*center));
        g.drawString("3",(int)(1.805*center),(int)(1.07*center));
        g.drawString("1",(int)(1.369*center),(int)(0.36*center));
        g.drawString("2",(int)(1.674*center),(int)(0.645*center));
        g.drawString("4",(int)(1.665*center),(int)(1.485*center));
        g.drawString("5",(int)(1.372*center),(int)(1.778*center));
        g.drawString("7",(int)(0.545*center),(int)(1.777*center));
        g.drawString("8",(int)(0.227*center),(int)(1.485*center));
        g.drawString("10",(int)(0.212*center),(int)(0.675*center));
        g.drawString("11",(int)(0.522*center),(int)(0.365*center));

        if(lsecx!=0)
        {
            g.setColor(backColor);
            g.drawLine(center,center,lsecx,lsecy);

        }

        g.setColor(Color.green);
        g.drawLine(center,center,hrx,hry);
        g.drawLine(center+1,center,hrx,hry);
        g.drawLine(center-1,center,hrx,hry);
        g.drawLine(center,center+1,hrx,hry);
        g.drawLine(center,center-1,hrx,hry);
        g.drawLine(center+2,center,hrx,hry);
        g.drawLine(center-2,center,hrx,hry);
        g.drawLine(center,center+2,hrx,hry);
        g.drawLine(center,center-2,hrx,hry);

        //show the minute hand with bigger size
        g.setColor(Color.blue);
        g.drawLine(center,center,minx,miny);
        g.drawLine(center+1,center,minx,miny);
        g.drawLine(center-1,center,minx,miny);
        g.drawLine(center,center+1,minx,miny);
        g.drawLine(center,center-1,minx,miny);

        g.setColor(Color.red);
        g.drawLine(center,center,secx,secy);
        g.fillOval(center-3,center-3,6,6);       //center point

        if(m%5!=0)
        {
            g.setColor(Color.cyan);
            g.fillOval(pointx2-2,pointy2-2,4,4);

        }

        if(s%5!=0)
        {
            g.setColor(Color.red);
            g.fillOval(pointx1-2,pointy1-2,4,4);

        }

        lminx=minx;
        lminy=miny;
        lhrx=hrx;
        lhry=hry;
        lsecx=secx;
        lsecy=secy;

    }
    public void paint(Graphics g)  throws NullPointerException
    {
        g.setColor(wallColor);
        g.fillOval(0,0,2*center,2*center);
        g.setColor(backColor);
        g.fillOval((int)(0.1*center),(int)(0.1*center),(int)(center*1.8),(int)(center*1.8));
        upgate(g);
    }
    public void clear(Graphics g)  throws NullPointerException
    {
        if(lsecx!=0)
        {
            g.setColor(backColor);
            g.drawLine(center,center,lhrx,lhry);
            g.drawLine(center+1,center,lhrx,lhry);
            g.drawLine(center-1,center,lhrx,lhry);
            g.drawLine(center,center+1,lhrx,lhry);
            g.drawLine(center,center-1,lhrx,lhry);
            g.drawLine(center+2,center,lhrx,lhry);
            g.drawLine(center-2,center,lhrx,lhry);
            g.drawLine(center,center+2,lhrx,lhry);
            g.drawLine(center,center-2,lhrx,lhry);

            g.drawLine(center,center,lminx,lminy);
            g.drawLine(center+1,center,lminx,lminy);
            g.drawLine(center-1,center,lminx,lminy);
            g.drawLine(center,center+1,lminx,lminy);
            g.drawLine(center,center-1,lminx,lminy);

        }

    }
    public void drawPoints(Graphics g) throws NullPointerException
    {
        int x1,y1;
        double p;
        for(int i=1;i<=60;i++)
        {
            if(i%5!=0)
            {
                p=i*0.10472;
                x1=(int)((secRadius+center*0.15)*Math.cos(p))+center;
                y1=(int)((secRadius+center*0.15)*Math.sin(p))+center;
                g.setColor(Color.gray);
                g.fillOval(x1-2,y1-2,4,4);

            }
        }

    }
    public void stop() throws NullPointerException /*close the thread when applet stopped*/
    {
        off=true;
        t=null;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:31:24.333

您最大的问题出在您的`Thread#run`代码中……时钟的每个实例都使用相同的`Date`值。

```
public void run() throws NullPointerException {
    while (true) {
        // !! This is wrong !!
        // Each clock should have its own concept of it's start time, then each "second" you
        // should advance the time by a single second...
        s = new Date().getSeconds();//+incre.getSeconds(); 
```

您遇到的另一个问题是您不应该修改 UI 在线程内容中依赖的值...

```
 // This is a bad idea...
        if (s != previousSec) {

            dhs = Math.toRadians(s * 6 - 90);
            secx = (int) (secRadius * Math.cos(dhs)) + center;
            secy = (int) (secRadius * Math.sin(dhs)) + center;

            pointx1 = (int) ((secRadius + center * 0.15) * Math.cos(dhs)) + center;
            pointy1 = (int) ((secRadius + center * 0.15) * Math.sin(dhs)) + center;

            m = new Date().getMinutes();
            dhm = Math.toRadians(m * 6 - 90);
            minx = (int) (minRadius * Math.cos(dhm)) + center;
            miny = (int) (minRadius * Math.sin(dhm)) + center;

            pointx2 = (int) ((secRadius + center * 0.15) * Math.cos(dhm)) + center;
            pointy2 = (int) ((secRadius + center * 0.15) * Math.sin(dhm)) + center;

            h = new Date().getHours();
            dhh = Math.toRadians(h * 30 - 90 + ((m - 1) / 2));
            hrx = (int) (hrRadius * Math.cos(dhh)) + center;
            hry = (int) (hrRadius * Math.sin(dhh)) + center;

            repaint();
            previousSec = s;
        } 
```

问题是，UI 可能会在所有值更新之前更新，从而导致奇怪且不可预测的绘画技巧。

你真的需要 100 毫秒的更新吗？我最好将睡眠时间延长到 500 毫秒，将第二次更改稍早或稍晚。

你画画也吓到我了。非常小心，`JPanel`已经有一个名为`update(Graphics)`继承自的方法`Container`，你可能会遇到命名冲突，这会导致你的程序崩溃（就像`update`重绘引擎使用的那样）

很少需要`paint`直接覆盖，最好使用`paintComponent`. 这可确保在每个绘制周期中正确更新和准备组件。作为该过程的一部分，`paintComponent`还将清除图形上下文，因此不需要该`clear`方法（只要您尊重绘制链并调用`super.paintComponent`

**想法和解决方案**

我要做的是设置一个“ticker”类，其唯一职责是通知已注册的类“tick”已经发生。在这堂课中，我会使用`javax.swing.Timer`. 这将强制从事件调度线程的上下文中调用“tick”事件，确保对绘制方法所依赖的变量的更改在同一线程的上下文中更新。我可能会考虑使用 250 毫秒之类的延迟，以便在通知周期中添加一些额外的软糖。

无论是 use 还是 a `Thread`or `Timer`，当您更新“刻度”时，您最终都会遇到瓶颈。

我还会考虑将时钟的表面绘制为 a `BufferedImage`，因为除非组件的大小发生变化，否则它不太可能发生变化。这将使油漆更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:10:20.697

由于这些时钟仅在固定时间偏移量上有所不同，因此它们可能不需要单独的线程甚至单独的计时器任务。编写一个更大、更复杂的`paintComponent`方法来绘制具有不同时间偏移且使用相同基准时间值的多个时钟。

# ios - ios如何获取视图中的子视图列表？

> ID：14670355
> 
> 赞同：-2
> 
> 时间：2013-02-03T07:26:18.220
> 
> 标签：ios, xcode, uiview, subview

你们中的任何人都知道如何获得子视图列表吗？有没有办法将列表放入数组中？

```
NSMutableArray *subviews= .... //all my subviews 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T07:31:19.147

你可以这样做

```
- (void)listSubviewsOfView:(UIView *)view {

    // Get the subviews of the view
    NSArray *subviews = [view subviews];

    // Return if there are no subviews
    if ([subviews count] == 0) return;

    for (UIView *subview in subviews) {

        NSLog(@"%@", subview);

        // List the subviews of subview
        [self listSubviewsOfView:subview];
    }
} 
```

请通过此链接[How to list out all the subviews in a uiviewcontroller in iOS?](https://stackoverflow.com/questions/7243888/how-to-list-out-all-the-subviews-in-a-uiviewcontroller-in-ios)

# javascript - javascript如何在回调函数中获取this.variable

> ID：14670359
> 
> 赞同：4
> 
> 时间：2013-02-03T07:27:25.700
> 
> 标签：javascript, callback

在javascript中的以下自定义类中，在回调中，为什么this.obj除了局部变量obj有我想要的东西之外什么都没有？谢谢。

```
function ClassTest(director) {
  this.obj = {"test1": "test1"};
}

function test1(input, callback) {
  callback("success");
}

ClassTest.prototype.test = function() {
  var obj = this.obj;
  test1("niuniu",function(e){
    console.log(this.obj);  // undefined
    console.log(obj);  // this one has stuff
    });
}

// run 
new ClassTest().test() 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-03T07:31:05.350

因为里面的函数`test1`正在创建一个具有不同`this`上下文的新范围。典型的解决方案是`bind`缓存或缓存`this`：

捆绑：

```
test1("niuniu",function(e){
  console.log(this.obj);
}.bind(this)); 
```

缓存：

```
var self = this;
test1("niuniu",function(e){
  console.log(self.obj);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T08:52:44.290

至于这行代码：

```
console.log(obj);  // this one has stuff 
```

它起作用的原因与 JavaScript 闭包的工作方式有关。匿名函数中定义的代码可以访问其本地范围内的所有变量以及包含范围内定义的变量，因此`obj`是可用的。请参阅[JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)有关关闭的更多信息。

然而，关键字`this`是对当前范围的引用。因为您是`this.obj`从匿名函数内部访问的，所以`this`指的是匿名函数本身 - 它没有`obj`定义属性。在扩展`ClassTest`原型的封闭函数中，`this`指的是当前`ClassTest`对象，该对象确实`obj`定义了一个属性。

# opengl - 在纹理而不是屏幕上使用着色器

> ID：14670362
> 
> 赞同：0
> 
> 时间：2013-02-03T07:27:45.240
> 
> 标签：opengl, glsl, shader

我编写了一个简单的 GL 片段着色器，它对图像执行 RGB 伽玛调整：

```
uniform sampler2D tex;
uniform vec3 gamma;

void main()
{
    vec3 texel = texture2D(tex, gl_TexCoord[0].st).rgb;
    texel = pow(texel, gamma);
    gl_FragColor.rgb = texel;
} 
```

纹理绘制了大部分屏幕，我想到这是在屏幕上应用每个输出像素的调整，而不是纹理上的每个输入像素。虽然这并没有改变它的外观，但这个纹理与屏幕相比是很小的。

为了提高效率，如何让着色器处理纹理像素而不是屏幕像素？如果有帮助，我无论如何都会在每一帧上更改/重新加载这个纹理的数据，所以我不介意纹理是否被永久改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:55:59.220

> 我突然想到这是在屏幕上应用每个输出像素的调整

几乎。*每个输出片段*执行片段着色器（因此得名）。在写入像素之前，片段是光栅化的最小单位。被可见渲染几何体覆盖的每个像素都会变成一个或多个片段（是的，可能存在比被覆盖像素更多的片段，例如在绘制到抗锯齿帧缓冲区时）。

> 为了效率，

现代 GPU 甚至不会“注意到”略微减少的负载。这是一种微优化，处于不可测量的边缘。我的建议：不要担心。

> 如何让着色器处理纹理像素而不是屏幕像素？

您可以预处理纹理，首先通过纹理大小而不是抗锯齿的帧缓冲区对象将其渲染到中间纹理。但是，如果您的更改是*非线性*的，并且伽马调整正是如此，那么您不应该这样做。您希望在线性色彩空间中处理图像并尽可能晚地应用非线性变换。

# powershell - 从函数中退出循环

> ID：14670364
> 
> 赞同：0
> 
> 时间：2013-02-03T07:28:03.790
> 
> 标签：powershell, powershell-2.0

我想从一个被称为如下所示的函数中打破以下循环。

```
Function test {
    $i++
    IF ($i -eq 10) {continue}
}

$Computers = "13","12","11","10","9","8","7","6","5","4","3","2","1"
ForEach ($Computer in $Computers) {
    Test
    write-host "Fail"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T07:57:04.290

如果我跟着你...

```
Function test {
    $args[0] -eq 10
}

$Computers = "13","12","11","10","9","8","7","6","5","4","3","2","1"
ForEach ($Computer in $Computers) {
    if(Test $Computer) {break} else {$Computer}
} 
```

# php - PHP 文件和参数的 RewriteRule

> ID：14670367
> 
> 赞同：-4
> 
> 时间：2013-02-03T07:28:11.690
> 
> 标签：php, .htaccess, mod-rewrite

我正在创建一个网站，我希望它对 SEO 友好。我正在扩展页面`.php`，我想将其从 url 中隐藏。我还有另外两个页面名称`abc.php`，`xyz.php`根据 ulr 参数给出输出。

所以我想要这样的东西：

`mydomain.com/pagename.php`显示为`mydomain.com/pagename`

`mydomain.com/abc.php?id=name`显示为`mydomain.com/abc/name`

`mydomain.com/xyz.php?id=name`显示为`mydomain.com/xyz/name`

请帮我写一下`RewriteRule`。`.htaccess`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:39:13.840

您在这里有两个选择：

**选项 1**：使用`MultiViews`- 即使扩展名被省略，apache 也会将请求传递给您的 php 文件 - 然后在 php 中处理其余部分（解析`$_SERVER["REQUEST_URI"]`）。

**选项 2**：禁用`MultiViews`并使用 URL 重写：

```
Options -MultiViews
RewriteEngine On
RewriteRule ^(pagename|abc|xyz)/?$ $1.php [L,QSA]
RewriteRule ^(pagename|abc|xyz)/([^/]+) $1.php?id=$2 [L,QSA] 
```

# text - 如何用elisp处理一系列文件？

> ID：14670371
> 
> 赞同：4
> 
> 时间：2013-02-03T07:29:11.183
> 
> 标签：text, emacs, elisp

我是编程新手，所以请在这里耐心等待...

我有一个包含名为“foo01.txt”、“foo02.txt”等文件的目录和一个名为`MyFunction`. 我想将每个文件作为缓冲区打开，`MyFunction`在其上运行，将缓冲区写入其文件，终止缓冲区并继续处理系列中的下一个文件，直到所有文件都完成。

我认为我需要执行此操作的所有部分都在 Cookbook ( [http://emacswiki.org/emacs/ElispCookbook](http://emacswiki.org/emacs/ElispCookbook) ) 中进行了描述，但我并不真正了解如何将它们放在一起。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T10:32:02.743

# 回答

如果您正在寻找纯 elisp 的答案，您可以执行以下操作：

```
(defun process-file (f)
  (save-excursion 
    (find-file f)
    (my-function)     ; Call your function here.
    (write-file f)
    (kill-buffer (current-buffer))))

(defun process-files (dir) 
  (mapc 'process-file
        (directory-files dir t ".txt$"))) 
```

`process-files`将遍历给定目录中的每个文件并应用于`process-file`所有 .txt 文件。你可以这样称呼它：

```
(process-files "~/target-directory") 
```

您可以将其复制到 *scratch* 缓冲区中，然后玩弄各个部分。最有趣的功能是：

*   `mapc`- 将函数应用于列表中的每个项目
*   `directory-files`- 获取目录中的所有文件和文件夹，在本例中检索所有 .txt 文件
*   `find-file`- 在缓冲区中打开一个文件（这是您键入时运行的内容`C-x C-f`）

* * *

# 学习 Lisp

如果你是为了学习 Lisp 而学习 Lisp，我可以推荐[*Practical Common Lisp*](http://www.gigamonkeys.com/book/)。您将能够使用 Elisp 完成令人惊讶的大量书籍。否则，请下载像[SBCL](http://www.sbcl.org/)这样的 Common Lisp 环境。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T07:53:06.697

Emacs 的好处在于，由于 Emacs 的开放性，通常有很多方法可以解决给定的问题。

例如，您可以在 Emacs 中学习一个简单的技巧，它现在和将来都会对您有所帮助：

这是一个*可怕*的清单，例如来自`C-x f``/home/me/mydir/`

```
 /home/me/mydir:
  total used in directory 32 available 5575136
  drwxr-xr-x  10 me  brainers   340 Jan 18 15:50 .
  drwxr-xr-x  78 me  brainers  2652 Feb  2 18:08 ..
  -rw-r--r--   4 me  brainers   136 Apr  1  2012 a.txt
  -rw-r--r--  16 me  brainers   544 Feb  1 09:56 b.txt
  -rw-r--r--   6 me  brainers   204 Apr  6  2012 c.txt 
```

转到第一个（使用`up`和`down`键），即`a.txt`，然后执行

*   `C-x (`开始宏录制
*   `f`打开那个文件
*   `M-x myfunction`运行该*myfunction*函数
*   `C-x C-s`保存文件
*   `C-x k`关闭那个文件，回到*dired*
*   `down`转到下一个文件的键（`b.txt`在这种情况下）
*   `C-x )`结束宏

然后对于每个文件（从`b.txt`），做

*   `C-x e`要执行宏，它会对 执行相同的操作`b.txt`，然后指向`c.txt`。（`e`如果您在两次宏执行之间不做任何事情，您可以重新执行宏）

小心不要在您不想处理的东西上运行宏。

*笔记：*

*   如果您在创建宏的过程中犯了任何错误，Emacs 将中断录制过程（因此，`C-x )`会抱怨没有录制宏）。在这种情况下，必须从 重新启动宏`C-x (`。
*   `C-key`是*Control 键*，通常`M-key`是*Meta 键*`Alt-key`。并且`C-x k`意味着*Control x 然后 k key*。

# javascript - 视频 .mp4 不会在任何浏览器中显示

> ID：14670374
> 
> 赞同：3
> 
> 时间：2013-02-03T07:29:30.990
> 
> 标签：javascript, css, html, video

我试图获取存储在本地驱动器上的视频，以便在我制作的网页上播放。我试过在三个浏览器中打开页面，但它从不显示（更喜欢 chrome）。我已经直接在 chrome 中运行了视频（mp4），它们都可以正常工作。所以这不是支持问题。下面我附上了我的 HTML 和 JS。有与此相关的 CSS，但我不明白为什么会导致任何播放问题。我已经在这几个小时了，现在很卡住。另外，我使用 Aptana 进行开发并从那里运行它。

**如果有人想看看，这里是完整的代码：http: [//jsfiddle.net/pGzTR/](http://jsfiddle.net/pGzTR/)**

这是我用过的html：

```
<section id="main_section">
    <video id="myMovie" width="320" height="180">
        <source scr="a1/db.mp4"/>
    </video>
    <nav id="video_nav">
        <div id="buttons">
            <button type="button" id="playButton">Play</button>
        </div>
        <div id="defaultBar">
            <div id="progressBar"></div>
        </div>
        <div style="clear: both"></div>
    </nav>                        
</section> 
```

**scr="a1/db.mp4" 这是引用 html 和视频文件所在的文件夹。**

这是用于功能的 javascript

```
function doFirst(){
    barSize = 600;
    myMovie = document.getElementById('myMovie');
    playButton = document.getElementById('playButton');
    bar = document.getElementById('defaultBar');
    progressBar = document.getElementById('progressBar');   
    playButton.addEventListener('click', playOrPause, false);
    bar.addEventListener('click', clickBar, false);

}
function playOrPause(){
        if(!myMovie.paused && !myMovie.ended){
        myMovie.pause();
        playButton.innerHTML='Play';
        window.clearInterval(updateBar);
    }else{
        myMovie.play();
        playButton.innerHTML='Pause';
        updateBar=setInterval(update, 700)
    }
}
function update(){
    if(!myMovie.ended){
        size = parseInt((myMovie.currentTime*barSize)/myMovie.duration);
        progressBar.style.width = size +'px';
    }else{
        progressBar.style.width='0px';
        playButton.innerHTML='Play';
        window.clearInterval(updateBar);
    }
}
function clickBar(e){
    if(!myMovie.paused && !myMovie.ended){
        mouseX=e.pageX-bar.offsetLeft;
        newTime=mouseX*myMovie.duration/barSize;
        myMovie.currentTime=newTime;
        progressBar.style.width=mouseX+'px';
    }
}

window.addEventListener('load',doFirst,false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:38:56.023

请确保您已`MIME`为`.MP4`in`IIS`或您用于托管网站的任何服务添加类型。

编辑：

请确保`MP4`文件路径正确。在查看您的屏幕截图后，这对我来说似乎是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:55:58.487

您需要在`<source>`标签中定义视频的 MIME 类型。

```
<source src="vid.mp4" type="video/mp4"></source> 
```

# android - 使用意图加载静态html？

> ID：14670376
> 
> 赞同：0
> 
> 时间：2013-02-03T07:29:41.020
> 
> 标签：android

如何使用意图加载静态 html 字符串？

以下代码会导致运行时错误：

```
 public void onClick(View v)
                {
                String html = "<html><pre>this is text</pre></html>";
                Uri uri = Uri.parse( html );
                startActivity( new Intent( Intent.ACTION_VIEW, uri ) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:35:03.010

尝试`WebView`如下加载您的文本：

> ```
> WebView browser;
> String html = "<html><pre>this is text</pre></html>";  
> browser=(WebView)findViewById(R.id.webkit);    
> browser.loadData(html, "UTF-8"); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:20:22.460

这是完整的代码参考。我已经尝试过了，它有效。
用于加载 html 网页的 Android Intent 应用程序。使用 Uri.parse(url)

/activity_main.xml 创建一个按钮

```
<Button

        android:layout_width="wrap_content"

        android:layout_height="wrap_content"

        android:text="@string/intro"

       android:onClick="load" /> 
```

然后在 MainActivity.java 中声明该方法

```
public void load (View view) {
 String url = "http://www.fullchipdesign.com/verilog.htm";
 Intent intent= new Intent(Intent.ACTION_VIEW);
 intent.setData(Uri.parse(url));
 startActivity(intent);

} 
```

在此链接上完整使用 [http://www.fullchipdesign.com/tyh/android_app_list_intent_html.htm](http://www.fullchipdesign.com/tyh/android_app_list_intent_html.htm)

# c++ - 斜率为 0 时除以零错误

> ID：14670378
> 
> 赞同：0
> 
> 时间：2013-02-03T07:30:06.350
> 
> 标签：c++

我的代码：

```
#include "stdafx.h"
#include <vector>
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;
typedef pair<int,int> point;
int numTorres, numEdificios;
vector<point> towervec;
vector<point> skyvec;
typedef vector<point>::const_iterator tower_iter;
typedef vector<point>::const_iterator sky_iter;

int noofpaths = 0;

int findslope(const point & i, const point & j, const point & k) {
    int dx, dy, dx1, dy1;
    dx = j.first - i.first;
    dy = j.second - i.second;

    int a = dy / dx;
    dx1 = k.first - i.first;
    dy1 = k.second - i.second;

    int b = dy1 / dx1;

    if(a != b) {

        int length1 = (j.first - i.first) * (j.first - i.first) + (j.second - i.second) * (j.second - i.second);
        int length2 = (k.first - i.first) * (k.first - i.first) + (k.second - i.second) * (k.second - i.second);
        if(length1 < length2) {
            noofpaths++;
        }
    }
    return noofpaths;
}

int main() {
    int T;
    int n, m;
    cout << "enter the test cases" << endl;
    cin >> T;
    while(T--) {
        cout << "towers and skyscrapers" << endl;
        cin >> n >> m;

        for(int i = 0; i < n; i++) {
            point p;
            cin >> p.first >> p.second;
            towervec.push_back(p);
            skyvec.push_back(p);

        }
        for(int i = 0; i < m; i++) {
            point p;
            cin >> p.first >> p.second;
            skyvec.push_back(p);
        }

        for(tower_iter i = towervec.begin(); i != towervec.end(); i++) {
            for(tower_iter j = i + 1; j != towervec.end(); j++) {
                for(sky_iter k = skyvec.begin(); k != skyvec.end(); k++) {

                    int dx, dy;

                    noofpaths = findslope(*i, *j, *k);
                    cout << noofpaths;
                }
            }
        }
    }
    return 0;
} 
```

如何克服除以零错误。如果 dx=0 或 dy=0 或两者都等于 0，则代码中断。

如何解决此错误..例如取点 i=-1,-1 j=1,-1, k-1 ,-1 。我想找出这 3 个点是否共线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T07:31:57.710

设置 if 条件以检查变量是否为 0，从而将使用除法语句的变量设置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:05:49.960

使用叉积，平行向量为零。

```
#include <iostream>
#include <utility>

using namespace std;

typedef pair<int,int> point;

int SegmentsAreParallel(const point & i, const point & j, const point & k)
{
    int dx1, dy1, dx2, dy2;

    dx1 = j.first - i.first;
    dy1 = j.second - i.second;

    dx2 = k.first - i.first;
    dy2 = k.second - i.second;

    return dx1 * dy2 - dy1 * dx2 == 0;
}

int main()
{
  point p1(0, 0);
  point p2(1, 1);
  point p3(2, 2);
  point p4(-1, -1);
  point p5(1, -1);
  point p6(0, 10);
  point p7(0, 100);
  point p8(10, 0);
  point p9(100, 0);

  cout << SegmentsAreParallel(p1, p2, p3) << endl;
  cout << SegmentsAreParallel(p1, p2, p4) << endl;
  cout << SegmentsAreParallel(p1, p2, p5) << endl;
  cout << SegmentsAreParallel(p1, p6, p7) << endl;
  cout << SegmentsAreParallel(p1, p8, p9) << endl;
  cout << SegmentsAreParallel(p1, p6, p9) << endl;

  return 0;
} 
```

输出（[ideone](http://ideone.com/NS6MSU)）：

```
1
1
0
1
1
0 
```

# c# - TableLayoutPanel row1 中的 Foreach 项目

> ID：14670379
> 
> 赞同：2
> 
> 时间：2013-02-03T07:30:23.373
> 
> 标签：c#, winforms

在运行时，我将一些面板添加到 tbl1 行和列 1 ( `tbl1.Controls.Add(pnl,1,1)`)。现在我的问题是：如何循环到第 1 行第 1 列以仅选择“pnl”项目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T07:37:52.590

您可以执行以下操作

```
foreach ( Control c in this.TableLayoutPanel1.Controls )
{
    Console.WriteLine(this.TableLayoutPanel1.GetRow(c));
} 
```

看看这个 MSDN Link 以及[TableLayoutPanelClass](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)

# syntax - D FlipFlop VHDL 的 1Hz 时钟

> ID：14670381
> 
> 赞同：-1
> 
> 时间：2013-02-03T07:30:32.717
> 
> 标签：syntax, compiler-errors, vhdl

我正在尝试为 VHDL 中的 D 触发器实现 1hz 时钟。

下面是我的代码：

```
entity d_flip_flop is
    Port ( clk : in  STD_LOGIC;
           D : in  STD_LOGIC;
           Q : out  STD_LOGIC);
end d_flip_flop;

architecture Behavioral of d_flip_flop is
signal clk_div: std_logic; --divided clock
begin

--process to divide clock
clk_divider: process(clk) --clk is the clock port
variable clk_count: std_logic_vector(25 downto 0) := (others => '0');
begin
    if clk'event and clk = '1' then
        clk_count <= clk_count+1;
        clk_div <= clk_count(25);
    end if;
end process;

--main process  
main:process(clk_div)
    begin
        if clk'event and clk = '1' then
            Q <= D;
        end if;
end process;

end Behavioral; 
```

但是当我尝试编译时，却报如下错误：

> 错误：HDLParsers:808 - "F:/EE4218/XQ/d_flip_flop.vhd" 第 47 行。+ 在这种情况下不能有这样的操作数。

我已经检查了几个参考的语法，并没有发现任何问题。谁能指出错误的原因？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:36:30.670

布赖恩有最好的答案，无论如何都是二次幂。可以说，对于其他环绕值，您还应该使用`integer`for`clock_count`并将其包裹：

```
signal clk_div : std_logic := '0';

clk_divider: process(clk) --clk is the clock port
subtype t_clk_count: integer range 0 to 12345678; -- for example
variable clk_count: t_clk_count := 0;
begin
    if clk'event and clk = '1' then
        if clk_count+1 >= t_clk_count'high then
           clk_div <= not clk_div;
           clk_count <= 0;
        else
            clk_count <= clk_count+1;
        end if;
    end if;
end process; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:21:13.253

clk_count 用于表示一个数字，而不是一袋位。

所以使用类型系统而不是与之抗争，并将其声明为数字或至少是某种数字类型。

用于此目的的最佳工具是 numeric_std.unsigned，因为您需要从中提取一些信息。

所以`use ieee.numeric_std.all;`在`library ieee;`子句之后添加，声明为

```
variable clk_count: unsigned(25 downto 0) := (others => '0'); 
```

你就完成了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-03T08:57:42.163

在进程**clk_divider**修改以下行：

```
clk_count <= clk_count +1; 
```

至

```
clk_count := std_logic_vector(UNSIGNED(clk_count) + 1); 
```

这是因为**clk_count**被定义为“std_logic_vector”类型的*变量*。

# sql - 您应该如何使用仅包含日期的值针对“日期时间”类型的列构建 SQL 搜索条件？

> ID：14670382
> 
> 赞同：3
> 
> 时间：2013-02-03T07:30:35.660
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我的问题是，

我`DateTime`在 SQL 表中有一个类型的列，它包含类似的值

```
2013-02-01 10:00:00.000
2013-01-27 16:00:00.000
2013-02-01 14:00:00.000 
```

如果我只在`Where`子句中提及日期，如何通过查询获得结果，例如：

```
SELECT *
FROM   tablename
WHERE  columnName = '2013-02-01' 
```

执行此查询后，我想要此结果

```
2013-02-01 10:00:00.000
2013-02-01 14:00:00.000 
```

请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T09:43:32.197

将函数应用于列将使您的查询[不可分析](http://en.wikipedia.org/wiki/Sargable)，并且会弄乱您的[Cardinality Estimation](http://msdn.microsoft.com/en-us/library/ms181034%28v=sql.90%29.aspx)。

请改用间隔。

```
select *
from tablename
where columnName >= '20130201' and
      columnName < '20130202' 
```

注意：日期[格式`YYYY-MM-DD`并不总是按照您在 SQL Server 中的想法进行解释](http://www.sommarskog.se/wishlist.html#YYYYMMDD)。

为避免日期解释的歧义，请使用通用日期格式文字“YYYYMMDD”。

```
set language German
go
select convert(datetime, '1989-06-12'),
       convert(datetime, '19890612'),
       convert(datetime2, '1989-06-12'),
       convert(datetime2, '19890612'),
       convert(date, '1989-06-12'),
       convert(date, '19890612') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:31:41.543

由于您的数据是按时间存储的，因此您需要`Cast`的只是日期。

试试这个：

```
SELECT  * 
FROM tablename 
WHERE CAST(columnName as DATE) = '2013-02-01' 
```

根据您的 SQL Server 版本（如果它不支持 DATE 数据类型），您可以使用：

```
SELECT  * 
FROM tablename 
WHERE DATEADD(dd, 0, DATEDIFF(dd, 0, columnName)) = DATEADD(dd, 0, DATEDIFF(dd, 0, '2013-02-01')) 
```

编辑——正如其他人正确指出的那样，在上面的示例中，您失去了从该列上的表索引获得的任何性能。给定单个输入参数（在本例中为 2013-01-01），这应该是您要查找的内容：

```
SELECT *
FROM tablename
WHERE columnName >= CONVERT(datetime,'2013-01-01')
  AND columnName < DATEADD(dd, 1, CONVERT(datetime,'2013-01-01')) 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T08:02:36.820

```
SELECT *
FROM   tablename 
WHERE  CONVERT(VARCHAR, columnname, 103) = '01/01/2013' 
```

# python - GoogleAppEngine：如何使用 python 读取文本文件？

> ID：14670388
> 
> 赞同：2
> 
> 时间：2013-02-03T07:31:26.060
> 
> 标签：python, file, google-app-engine

我的项目结构看起来像

```
flask-appengine-template/
                        docs/
                        licenses/
                        src/
                            application/
                                        static/
                                        templates/
                                        models.py
                                        settings.py
                                        urls.py
                                        views.py
                                        english.txt
                        libs/
                            bs4/
                         app.yaml
                         src.py 
```

在我的 中`views.py`，我有一个读取文件的函数`english.txt`

```
 for words in open('english.txt', 'r').readlines():
            stopwords.append(words.strip()) 
```

当我运行它时`local environment`，我在日志中看到错误为

```
(<type 'exceptions.IOError'>, IOError(13, 'file not accessible'), <traceback object at 0x10c457560>) 
```

如何在 Google App Engine 中读取此文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T12:04:21.907

如果english.txt 只是一个单词列表，我建议将单词列表转换为python 列表，这样你就可以导入它。

如果english.txt 有更复杂的数据，请将其移至应用程序可用的bigtable 或其他数据库。

与标准 VPS 相比，AppEngine 是一个非常残缺的环境，我倾向于避免在底层操作系统上运行的功能，例如`open()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T18:51:36.073

您需要使用 os.path 来获得对文件路径的正确引用，类似于：

```
def read_words():
    import os.path
    folder = os.path.dirname(os.path.realpath(__file__))
    file_path = os.path.join(folder, 'english.txt')
    for words in open(file_path, 'r').readlines():
        stopwords.append(words.strip()) 
```

希望有帮助！

# offline - Firebase 是否允许应用以离线模式启动？

> ID：14670394
> 
> 赞同：32
> 
> 时间：2013-02-03T07:32:20.640
> 
> 标签：offline, offline-caching, offlineapps, firebase

我正在考虑使用 Firebase 使用 PhoneGap 和 HTML5 应用程序缓存编写移动应用程序。

让我们假设每个用户都有一个 TODO 项目列表。如果应用程序在手机离线时启动，它是否能够从上一个会话中加载数据并在建立连接时同步？如果是这样，我想知道这是如何实现的，因为我在 firebase.js 中找不到对 localStorage 的引用。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-03T08:09:57.263

简短的回答是：还没有。

一旦应用程序连接到 Firebase，客户端将在本地缓存数据，并且即使在网络连接丢失后也能够访问存在未完成的“on”回调的数据。但是，这些数据不会保存到磁盘，“离线模式”只会在应用程序仍在运行时工作。

未来将提供完整的离线支持。

*2016 年编辑：*现在可以对原生 iOS 和 Android 应用程序进行完全离线支持：[https ://www.firebase.com/blog/2015-05-29-announcing-mobile-offline-support.html](https://www.firebase.com/blog/2015-05-29-announcing-mobile-offline-support.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-05-21T22:54:10.367

为 JS 应用程序解决此问题的 Firebase 替代方案是 CouchDb（服务器）<=> PouchDb（JS 客户端）。如果你已经实现了一个干净整洁的客户端服务层，那么移植到 PouchDb 应该是相当简单的，因为它们都是 NoSQL/JSON 数据库。CouchDb 还支持索引的 map/reduce 视图。

PouchDb 是一个 Javascript API，它实现了一个**完全离线**的CouchDb 客户端。它可以自动检测并使用*本地存储*、*IndexDb*或*WebSQL*来在在线或离线时永久保存本地数据。PouchDb API 可用于访问本地或远程数据库（只需更改 URL）并在两者之间连接完全同步或过滤同步。有许多有用的 PouchDb 插件、代码示例和一个小型包装库来支持 AngularJS 的 Q Promise API。

使用 PouchDb，您可以在离线时安全地启动您的应用程序，然后在几天后重新启动您的应用程序并将所有 CUD 数据更改同步到服务器。这可能会导致更新冲突，因此 CouchDb 支持旨在检测和跟踪这种情况的记录版本控制。因此，您可能需要服务器端逻辑来解决这些冲突。这对于具有离线同步和 CouchDb 关键特性的分布式系统来说是不可避免的。我不确定 Firebase 是否支持此 MVCC 功能。

PouchDb 基本上是 Apache CouchDb 的重新实现，包括它的同步协议。CouchDb 和 PouchDb 都经过良好测试，免费且开源。开源意味着 CouchDb 服务器也可以部署为 Intranet 服务 - 可选择同步到外部云服务。有许多 CouchDb 托管服务提供商。

IBM 的 Cloudant 托管团队最近将他们的 BigCouch 集群功能添加到 Apache CouchDb 2.0 项目中，因此现在您可以从 Micro Db (PouchDb) => Single Server => Multi-Master (Replicated) => Big Couch Clustered / Geo Clustered 进行扩展。与 MongoDb 不同，CouchDb 安全地支持单服务器部署。

注意：PouchDb 也可以使用相同的协议同步到 CouchBase，但 Couchbase !== CouchDb。这是一个商业产品。

另一个很酷的技巧是 PouchDb 可以在 NodeJS 服务器中运行，以替代 CouchDb。我认为它（还没有）准备好用于生产，但对于单元测试非常方便。请参阅[express-pouchdb](https://github.com/pouchdb/express-pouchdb)。

### 链接：

*   [Apache CouchDb 项目](http://couchdb.apache.org/)
    *   [Couch Db - The Definitive Guide](http://guide.couchdb.org/) - 免费书籍。
*   [袋装数据库](http://pouchdb.com/)
    *   [PouchDB 的 AngularJS 包装器](https://angular-pouchdb.github.io/angular-pouchdb/#/)
*   [沙发底座](http://www.couchbase.com/)

### CouchDb 主机（2020 年 7 月更新）

*   [比较 CouchDb 主机](https://www.whoishostingthis.com/compare/couchdb/)
*   [云特](https://cloudant.com/)
*   [海维](https://www.hyve.com/managed-services/managed-technology/couchdb/)

### DIY

*   [如何在 Ubuntu 12.04 上安装 CouchDB 和 Futon - Digital Ocean](https://www.digitalocean.com/community/tutorials/how-to-install-couchdb-and-futon-on-ubuntu-12-04)
*   [使用 SSL/HTTPS 保护 CouchDB](http://www.mircozeiss.com/secure-couchdb-by-using-ssl-https/)

### 码头工人+沙发数据库：

*   [Docker 化 CouchDB 服务](https://docs.docker.com/examples/couchdb_data_volumes/)
*   [GitHub：又一个 Dockerized CouchDB](https://github.com/klaemo/docker-couchdb/)
*   [带有螺柱 SSL 终结器的 Dockerized CouchDB 1.6.0](https://registry.hub.docker.com/u/klaemo/couchdb-ssl/)

### 安全模型

迁移到 CouchDb 时需要考虑的一个问题是它具有更有限的访问控制模型。这部分是由于它的复制算法。这篇博客文章详细介绍了这一点（比*真正*的权威指南更好）。

*   [Matt Woodward 的 CouchDB 身份验证和安全权威指南](http://blog.mattwoodward.com/2012/03/definitive-guide-to-couchdb.html)
*   [CouchDB 安全概述](http://couchdb.readthedocs.org/en/latest/intro/security.html)
*   [superlogin](https://github.com/colinskow/superlogin)是一个优秀的 NodeJS Passport/Authentication API，它封装了 CouchDb，允许 PouchDb 离线应用程序支持社交 OAuth 登录或用户名/密码帐户。包括一个完整的[演示](https://github.com/colinskow/superlogin-demo)和客户端[ng-superlogin](https://github.com/colinskow/ng-superlogin) Angular API。

### 适配器

在实践中，您可能希望将 WebSQL 用于您的 PouchDB 存储，因为它的性能要好得多。- 这是[存储适配器的完整详细信息](http://pouchdb.com/adapters.html)

### PouchDb 附加功能

多产的 PouchDb 社区总是从开源之门中涌现出一系列令人震惊的新酷“圣诞树”好东西。

PouchDb 的最佳特性之一是所有开源[插件](http://pouchdb.com/external.html)(37) 和 UI 框架适配器 (12)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-12T07:55:05.297

很老的问题，但问题仍然存在。我只使用了几天的 firebase，我自己找不到这个问题的令人满意的解决方案，所以我想我会分享我最终做了什么。

在应用程序启动时，我检查我是否在线`navigator.onLine`。如果没有，我从本地存储中读取并从中恢复 firebase ref。

```
export const firebaseFromLocalStorage = (local, storeRef) => {
  // assuming data is array
  const localData = JSON.parse(localStorage.getItem(local)) || []
  localData.map(obj => {
    const key = obj['.key']
    delete obj['.key']
    storeRef
      .child(key)
      .set(obj)
  })
} 
```

然后照常进行。当应用程序上线时，它将与服务器同步其本地状态，就像它开始在线并暂时失去连接时一样。

当然，这意味着 localStorage 需要与您的 firebase ref 保持同步。我在每次获取操作时都这样做。

希望这可以帮助

# ruby-on-rails - 在 ActiveModel 对象上，如何检查唯一性？

> ID：14670396
> 
> 赞同：14
> 
> 时间：2013-02-03T07:32:52.163
> 
> 标签：ruby-on-rails, validation, activemodel, rails-activerecord

[在 Bryan Helmkamp 名为“重构 Fat ActiveRecord 模型的 7 种模式](http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/)”的优秀博客文章中，他提到了使用`Form Objects`抽象出多层表单并停止使用`accepts_nested_attributes_for`.

**编辑：请参阅[下面](https://stackoverflow.com/questions/14670396/on-an-activemodel-object-how-do-i-check-uniqueness#14671979)的解决方案。**

我几乎完全复制了他的代码示例，因为我有同样的问题要解决：

```
class Signup
  include Virtus

  extend ActiveModel::Naming
  include ActiveModel::Conversion
  include ActiveModel::Validations

  attr_reader :user
  attr_reader :account

  attribute :name, String
  attribute :account_name, String
  attribute :email, String

  validates :email, presence: true
  validates :account_name,
    uniqueness: { case_sensitive: false },
    length: 3..40,
    format: { with: /^([a-z0-9\-]+)$/i }

  # Forms are never themselves persisted
  def persisted?
    false
  end

  def save
    if valid?
      persist!
      true
    else
      false
    end
  end

private

  def persist!
    @account = Account.create!(name: account_name)
    @user = @account.users.create!(name: name, email: email)
  end
end 
```

我的代码中的不同之处之一是我需要验证帐户名称（和用户电子邮件）的**唯一性。**但是，`ActiveModel::Validations`没有`uniqueness`验证器，因为它应该是`ActiveRecord`.

我想有三种方法可以解决这个问题：

*   写我自己的方法来检查这个（感觉多余）
*   包括 ActiveRecord::Validations::UniquenessValidator （试过这个，没有让它工作）
*   或者在数据存储层添加约束

我更喜欢使用最后一个。但后来我一直想知道*我*将如何实现这一点。

我可以做类似的事情*（元编程，我需要修改其他一些领域）*：

```
 def persist!
    @account = Account.create!(name: account_name)
    @user = @account.users.create!(name: name, email: email)
  rescue ActiveRecord::RecordNotUnique
    errors.add(:name, "not unique" )
    false
  end 
```

但是现在我在课堂上运行了两项检查，首先我使用`valid?`，然后我使用`rescue`数据存储约束的语句。

有谁知道处理这个问题的好方法？或许为此编写我自己的验证器会更好（但是我会对数据库进行两个查询，理想情况下一个就足够了）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T18:28:35.317

如果这恰好是一次性要求，那么创建自定义验证器可能会有点过分。

一种简化的方法...

```
class Signup

  (...)

  validates :email, presence: true
  validates :account_name, length: {within: 3..40}, format: { with: /^([a-z0-9\-]+)$/i }

  # Call a private method to verify uniqueness

  validate :account_name_is_unique

  def persisted?
    false
  end

  def save
    if valid?
      persist!
      true
    else
      false
    end
  end

  private

  # Refactor as needed

  def account_name_is_unique
    if Account.where(name: account_name).exists?
      errors.add(:account_name, 'Account name is taken')
    end
  end

  def persist!
    @account = Account.create!(name: account_name)
    @user = @account.users.create!(name: name, email: email)
  end
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-03T11:29:41.687

Bryan 很友好地[在他的博客文章中评论了我的问题](http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/#comment-787150345)。在他的帮助下，我提出了以下自定义验证器：

```
class UniquenessValidator < ActiveRecord::Validations::UniquenessValidator
  def setup(klass)
    super
    @klass = options[:model] if options[:model]
  end

  def validate_each(record, attribute, value)
    # UniquenessValidator can't be used outside of ActiveRecord instances, here
    # we return the exact same error, unless the 'model' option is given.
    #
    if ! options[:model] && ! record.class.ancestors.include?(ActiveRecord::Base)
      raise ArgumentError, "Unknown validator: 'UniquenessValidator'"

    # If we're inside an ActiveRecord class, and `model` isn't set, use the
    # default behaviour of the validator.
    #
    elsif ! options[:model]
      super

    # Custom validator options. The validator can be called in any class, as
    # long as it includes `ActiveModel::Validations`. You can tell the validator
    # which ActiveRecord based class to check against, using the `model`
    # option. Also, if you are using a different attribute name, you can set the
    # correct one for the ActiveRecord class using the `attribute` option.
    #
    else
      record_org, attribute_org = record, attribute

      attribute = options[:attribute].to_sym if options[:attribute]
      record = options[:model].new(attribute => value)

      super

      if record.errors.any?
        record_org.errors.add(attribute_org, :taken,
          options.except(:case_sensitive, :scope).merge(value: value))
      end
    end
  end
end 
```

您可以在 ActiveModel 类中使用它，如下所示：

```
 validates :account_name,
    uniqueness: { case_sensitive: false, model: Account, attribute: 'name' } 
```

您遇到的唯一问题是您的自定义`model`类是否也有验证。当您调用时，这些验证不会运行`Signup.new.save`，因此您必须以其他方式检查这些验证。您始终可以`save(validate: false)`在上述方法中使用，但是当您更改或中的任何验证时`persist!`，您必须确保所有验证都在`Signup`类中，并保持该类是最新的。`Account``User`

# asp.net-mvc - ASP.Net MVC 回发不清除文本框

> ID：14670402
> 
> 赞同：1
> 
> 时间：2013-02-03T07:34:51.730
> 
> 标签：asp.net-mvc, textbox, postback

在 .cshtml 页面上，我在表单中有一个文本框。当我输入一些文本并按回车时，它会触发一个 POST 到同名（不同签名）的控制器。代码处理文本并创建模型并将其传递回同一页面，除了原始文本框外，现在还填充了一个网格（有条件地）。一切正常，除了文本框中的文本被保留。

这有点奇怪，考虑到这里的大多数问题都是关于在 POST 之后保留文本，并且表明不应自动保留文本。

我可能可以为文本框分配一个空字符串，但我只是想知道我是否有这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:02:53.000

即使是一个简单的文本框，html文本框也是一个输入控件，它有两个非常重要的属性，即

1.  姓名
2.  价值

浏览器会将此名称值对发送到服务器 ，并且服务器的默认行为是在完成任何它应该做的事情时将***所有对的集合返回给浏览器。***

此集合称为发布数据。（或有时形成数据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:31:35.863

是的，如果回发时一切正常，您可以清除代码中的文本框

如果出现问题（异常或验证），您可以什么都不做（就像您现在所做的那样）并且文本将再次出现，这在 UI 中是有意义的。

# android - 光标在 SQLite 中不起作用

> ID：14670406
> 
> 赞同：0
> 
> 时间：2013-02-03T07:35:14.350
> 
> 标签：android, sqlite

我在我的本地数据库（sqlite）中插入了一些日期。但是当我想选择这个数据时，光标不是构建 xml 并跳过这个块。我的 sqlite 中有一行。你知道吗？

这是我的代码：`

```
public void insertMessages(int msgid,String msgdesc, String date, int createdby,int to) {
    SQLiteDatabase myDatabase = this.getWritableDatabase();

            String query = "INSERT INTO Messages (_id,msgdesc,date,createdby,sendto) "+
                           " VALUES ("+msgid+",'"+msgdesc+"','"+date+"',"+createdby+","+to+")";
            SQLiteStatement st = myDatabase.compileStatement(query);

    try {
        st.execute();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    myDatabase.close();
    Log.i("insert","insert Messages completed");
}

public String getMessages(int to) {
        SQLiteDatabase myDatabase = this.getWritableDatabase();
        String xml = null;

        try {

            String query = "SELECT _id,msgdesc,date,createdby,sendto from Messages Where sendto="+to+"";    
            Cursor cs = myDatabase.rawQuery(query, null);

            xml = "<messagelist>";
            *****if (cs.moveToFirst()) {*****
                do {
                    xml += "<messages>";
                    xml += "<msgid>"+cs.getInt(cs.getColumnIndex("_id"))+"</msgid>";
                    xml += "<msgdesc>"+cs.getString(cs.getColumnIndex("msgdesc"))+"</msgdesc>";
                    xml += "<date>"+cs.getString(cs.getColumnIndex("date"))+"</date>";
                    xml += "<createdby>"+cs.getInt(cs.getColumnIndex("createdby"))+"</createdby>";
                    xml += "<to>"+cs.getInt(cs.getColumnIndex("sendto"))+"</to>";
                    xml += "</messages>";
                } while (cs.moveToNext());
            }
            xml += "</messagelist>";
            cs.close();

        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        myDatabase.close();

        Log.i("select","select completed");
        return xml;
    }` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:40:52.623

```
"SELECT _id,msgdesc,date,createdby,sendto from Messages Where sendto="+to+""; 
```

您必须用单引号分隔字符串常量。尝试这个

```
"SELECT _id,msgdesc,date,createdby,sendto from Messages Where sendto = '" + to + "'"; 
```

更好的是使用参数化查询。

[http://sqlite.phxsoftware.com/forums/t/83.aspx](http://sqlite.phxsoftware.com/forums/t/83.aspx)

# jsp - JSP 依赖抛出错误

> ID：14670407
> 
> 赞同：0
> 
> 时间：2013-02-03T07:35:20.417
> 
> 标签：jsp

当一个 bean 依赖于其他 bean 时，我正在尝试工作。

我写了以下一段代码

狮子.java

```
public class Lion 

{
private String Lname;

public String getLname() 
{
return Lname;
}
public void setLname(String lname)
{
Lname = lname;
}

} 
```

Zoo.java 包 com.example；

```
public class Zoo 
{
private Lion lion;
private String address; 
public Lion getLion() 
{
return lion;
}
public void setLion(Lion lion)
{
this.lion = lion;
}
public String getAddress()
{
return address;
}
public void setAddress(String address) 
{
this.address = address;
}

} 
```

和jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Zoo</title>
</head>
<body>
<jsp:useBean id="zoo" class="com.example.Zoo" scope="request" />
<jsp:setProperty name="zoo" property="address" value="bannerghatta" />
<jsp:setProperty name="zoo" property="lion" value="${lion}" />
<jsp:useBean id="lion" class="com.example.Lion" scope="request" />
<jsp:setProperty name="lion" property="Lname" value="Shera" />
</body>
</html> 
```

然而它抛出一个错误：-org.apache.jasper.JasperException：在“com.example.Lion”类型的 bean 中找不到关于属性“Lname”的任何信息

谁能解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:52:17.313

JSP 中的属性引用应该是 lname 而不是 Lname。有关更多信息，请查看[这篇文章](http://www.jpalace.org/docs/tutorials/jee/jsp_9.html)。

如需完整参考，请查看Sun 提供的[此 PDF 。](http://download.oracle.com/otn-pub/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/beans.101.pdf)（第 8.8 节 - 推断名称的大写。）。

# php - MYSQL 表中的 PHP 代码不显示

> ID：14670414
> 
> 赞同：4
> 
> 时间：2013-02-03T07:37:02.067
> 
> 标签：php, mysql, codeigniter

我正在尝试将 drupal 安装转换为由 Code Igniter 驱动的前端。这是一个实验项目，用于检查我可以获得的性能提升。但我面临的最大问题是 Drupal 中很少有字段存储 php 字符串。例如

```
<?php print "A"; ?>

This is normal 
```

现在我可以看到来自我在 Code Igniter 中运行的查询的文本“这是正常的”，但我没有看到保存在表中的 php 函数。通过phpmyadmin查看记录时可以看到文字。但不知何故不在 CI 查询结果中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:28:14.453

我希望你有解决方案。但以防万一您还没有尝试过：
我创建了一个包含两列的表
![表格内容](../Images/466f70295eba29be38eddcf20fac4e6b.png)

```

```
//$result Contains the data fetched from the table using a model.
foreach ($result as $key=>$val) {
   if($key == 'code') {
      $val = str_replace('<?php','',$val); //Remove PHP's opening tag.
      $val = str_replace('?>','',$val); //Remove PHP's closing tag.
      $val = rtrim($val); //Remove leading and trailing spaces.
      echo $key.': ';
      eval($val.';'); //Execute the PHP code using eval.
    } else {
       echo $key.': '.$val.PHP_EOL;
    }
 } 
```

我试过了 

1.  `echo $result['code']`
2.  `print_r($result)`
3.  `var_dump($result)`
4.  `highlight_string($result['code'])`
5.  `eval($result['code'])`
6.  最后`str_replace`是`eval($result['code'])`.

检查从以下获得的结果的屏幕截图：**here**
在那里你可以看到 1,2 和 5 产生的 Result 是空的。但是，当您针对空白空间检查元素时，它会清楚地显示回显/打印的字符串已被注释掉。

[**屏幕截图**](https://i.stack.imgur.com/uxm8E.png)。这与codeigniter无关。它由**HTML Parser**完成。所以解决办法就是去掉PHP的开始和结束标签，然后使用eval。我希望这有帮助。

            回答 #2

赞同：0

时间：2013-04-16T08:23:56.163

谢谢您的帮助。是的，最后的手段是 eval 函数，它帮助我实现了我想要它做的事情。

数据库中的数据具有 PHP 函数，只有 eval 函数能够将该部分视为 PHP 代码并在我获取视图中的数据时执行它。

```

# jquery - JSTL 显示与主键关联的外键值

> ID：14670420
> 
> 赞同：0
> 
> 时间：2013-02-03T07:38:13.777
> 
> 标签：jquery, sql, jstl

我在尝试使用 JSTL 显示子类别菜单时遇到问题。

我正在开发的网站有一个 CSS 列表菜单类型。菜单类别的名称是在具有主键的数据库中创建的，并且子菜单也在数据库中创建并且具有主键和（外键=“类别”）。我已设法检索并显示此主菜单，但我不知道当用户悬停主菜单时如何显示子菜单：

当前使用的代码：

```
//<div id='cssleftNav'>
     <ul>
         <c:forEach var = "category" items="${categories.rows}">
         <li class='has-sub'>                                            
         <a href="category?${category.id}"><span>${category.name}
         </span></a>            
         <ul>                                               
             <c:forEach var = "subcategory" items="${subcategories.rows}">
             <li>
                <a href="category?${subcategory.id}"><span>${subcategory.name}
                </span<</a>
             </li>
             </c:forEach>
         </ul>
         </li>
        </c:forEach> 
  </cssleftNav 
```

请帮忙。我已经有一段时间了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:09:13.970

你的数据模型很奇怪。您似乎松散了`${categories}`，`${subcategories}`并且没有以某种方式相互引用。

您需要确保它们相互引用。最终，您希望得到如下结果：

```
<ul>
    <c:forEach items="${categories}" var="category">
        <li>
            <a href="category?id=${category.id}">${category.name}</a>
            <ul>
                <c:forEach items="${category.categories}" var="subcategory">
                    <li>
                        <a href="category?id=${subcategory.id}">${subcategory.name}</a>
                    </li>
                </c:forEach>
            </ul>
        </li>
    </c:forEach>
</ul> 
```

这将需要一个模型，如：

```
public class Category {

    private Long id;
    private String name;
    private List<Category> categories;

    // ...
} 
```

顺便说一句，拥有`rows`财产也很奇怪。`${categories}`应该只是`List<Category>`您从数据库中获得的。

# c++ - C++ - 如何在不多次定义模板的情况下实现模板类的多个功能？

> ID：14670423
> 
> 赞同：2
> 
> 时间：2013-02-03T07:38:27.770
> 
> 标签：c++, templates

我想知道是否可以在不多次定义模板的情况下实现模板类的多个功能。

宣言：

```
template <class T>
class Test{
    private:
    T field;
    public:
    Test(T value);
    T& get();
    void set(T value);
}; 
```

执行：

```
template <class T> Test<T>::Test(T value){ set(value); }
template <class T> T& Test<T>::get(){ return field; }
template <class T> void Test<T>::set(T value){ field = value; } 
```

`template <class T>`多次复制有点容易出错。我想知道我是否可以做这样的事情：

```
template <class T>{
Test<T>::Test(T value){ set(value); }
T& Test<T>::get(){ return field; }
void Test<T>::set(T value){ field = value; }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T07:40:34.167

如果您不将其与类分开，则不必`template<class T>`每次都指定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T07:47:33.470

您可以直接在类定义中实现这些方法。

此外，您不需要将模板类的声明和实现分开。它对编译没有副作用。因为实现不是真正的实现。模板类不是类，它只是可用于创建类的模板。当您实例化这样的模板类时，例如**YourTemplate**，编译器会创建该新类。为了创建它，它必须查看所有模板化的成员函数（以便它可以使用模板来创建实际的成员函数，例如**YourTemplate::function1()**），因此这些模板化的成员函数必须在头文件中，以及模板类主体。

# c - ~ 运算符会更改数据类型吗？

> ID：14670426
> 
> 赞同：0
> 
> 时间：2013-02-03T07:39:08.423
> 
> 标签：c

当我阅读某人的代码时，我发现他费心编写显式类型转换。

```
 #define ULONG_MAX ((unsigned long int) ~(unsigned long int) 0) 
```

当我写代码

```
 1 #include<stdio.h>
  2 int main(void)
  3 {
  4         unsigned long int max;
  5         max = ~(unsigned long int)0;
  6         printf("%lx",max);
  7         return 0;
  8 } 
```

它也可以。它只是一种毫无意义的编码风格吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T08:07:57.767

您阅读的代码非常糟糕，有几个原因。

*   首先，用户代码不应该定义`ULONG_MAX`. 这是一个保留标识符，*必须*由编译器实现提供。

*   该定义不适合在预处理器中使用`#if`。基本整数类型的`_MAX`宏*必须*在那里可用。

*   `(unsigned long)0`只是废话。每个人都应该使用`0UL`，除非您*知道*您的编译器在这方面不符合所有最新的 C 标准。（我不知道。）

*   Even`~0UL`不应该用于该值，因为`unsigned long`可能（理论上）有填充位。`-1UL`更合适，因为它不处理值的位模式。它使用无符号整数类型的保证算术属性。`-1`将始终是无符号类型的最大值。所以`~`只能在您绝对确定`unsigned long`没有填充位的情况下使用。但是这样使用它是没有意义的。`-1`服务更好。

*   正如您所观察到的，“重铸”已知的表达式`unsigned long`只是多余的。我无法想象有任何编译器会对此产生错误。

当它们在预处理器中使用时，表达式的重铸*可能*是有意义的，但仅在非常有限的情况下，并且在那里它们的解释不同。

```
#if ((uintmax_t)-1UL) == SOMETHING
..
#endif 
```

这里左边的值在`UINTMAX_MAX`预处理器*和*后面的编译器阶段中赋值。所以

```
#define UINTMAX_MAX ((uintmax_t)-1UL) 
```

将是编译器实现的适当定义。

要查看预处理器的值，请观察`(uintmax_t)`内部没有强制转换而是未知标识符标记，`()`并且它的计算结果为`0`。减号然后被解释为二进制减号，所以我们有`0-1UL`它是无符号的，因此是类型的最大值。但是这个技巧只有在强制转换包含单个标识符标记时才有效，而不是在你的示例中它有三个，并且如果整数常量有一个`-`或`+`符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:50:07.680

他们试图确保值的类型`0`是`unsigned long`. 当您将零分配给变量时，它会被强制转换为适当的类型。

在这种情况下，如果`0`不碰巧是 an`unsigned long`那么该`~`运算符将应用于它碰巧是的任何其他类型，并且其结果将被强制转换。

`0`如果编译器决定它是 a`short`或，这将是一个问题`char`。

但是，运算符*后面*的类型`~`应该保持不变。所以他们对外部演员过于谨慎，但也许内部演员是合理的。

他们当然可以通过写来指定正确的零类型`~0UL`。

# node.js - Mongoose 不断打开与 MongoDB 的连接

> ID：14670431
> 
> 赞同：3
> 
> 时间：2013-02-03T07:39:53.930
> 
> 标签：node.js, mongodb, amazon-ec2, mongoose

我有一个在 EC2 中运行的 Node.js 应用程序连接到不断打开和关闭连接的 MongoDB。当我跟踪日志文件时，我看到源源不断的：

```
Sat Feb   2 23:29:06 [initandlisten] connection accepted from X.X.X.X:54291 #700437
Sat Feb  2 23:29:06 [conn700437] end connection X.X.X.X:54291
Sat Feb  2 23:29:06 [initandlisten] connection accepted from X.X.X.X:42206 #700438
Sat Feb  2 23:29:06 [conn700438] end connection X.X.X.X:42206
Sat Feb  2 23:29:06 [initandlisten] connection accepted from X.X.X.X:34255 #700439
Sat Feb  2 23:29:06 [conn700439] end connection X.X.X.X:34255
Sat Feb  2 23:29:07 [initandlisten] connection accepted from X.X.X.X:49641 #700440
Sat Feb  2 23:29:07 [conn700440] end connection X.X.X.X:49641
Sat Feb  2 23:29:08 [initandlisten] connection accepted from X.X.X.X:54293 #700441 
```

在应用程序启动过程中建立一次连接，如下所示：

```
app.configure('production', function() {
    mongoose.connect('connstring');
})

app.configure(function database() {    
    mongoose.connection.on('error', function (err) {
        console.log(err);
    });
}); 
```

我有两个问题。

首先，这正常吗？

其次，为什么连接池不会只打开几个连接？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:39:04.337

看起来他们可能在上一个 mongodb 驱动程序版本中为您的问题添加了修复：

[https://github.com/mongodb/node-mongodb-native/blob/master/HISTORY](https://github.com/mongodb/node-mongodb-native/blob/master/HISTORY)

1.2.11 2013-01-29 - Ping 策略现在重用套接字，除非它们被服务器关闭以避免开销

[https://npmjs.org/package/mongodb](https://npmjs.org/package/mongodb)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T14:37:17.547

是的，这很正常。驱动程序向您的节点发送 ping，以持续监控整个集群（包括辅助节点）的运行状况。

# python - 获取以前的变换 Maya

> ID：14670439
> 
> 赞同：0
> 
> 时间：2013-02-03T07:41:07.573
> 
> 标签：python, maya, mel

有没有办法使用节点来获取以前的转换或在我的情况下翻译？我已经写了一个简单的表达式来做到这一点，但我真的很想用节点来实现这一点。

$transx =`getattr 'objname.tx' -frame time -1;`

或者类似的东西我不完全记得，但它在表达式中使用了 getatrr 。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:12:31.473

表达式节点是节点，表达式节点内的*强 getAttr*会破坏节点流。**但是，是的，您可以使用frameCache**节点存储先前运行的值 。或者您可以将值存储在表达式的属性中。

```
node.tx = node.cacheTx;
node.cacheTx = objname.tx; 
```

这要快得多，因为它不会破坏属性评估流程。这两种机制都有一个缺陷，如果它在帧变化之间发生了变化，它们不会在时间上下文之外进行评估。这是 Maya 用户一直在做的事情，导致用户反馈不佳。实际上，对于这种实现非常复杂的自定义节点，您几乎无能为力。

之所以难，是因为 Maya 用户用实际行动成功打破了 Maya 时间机制。开发人员随后在用户压力下投降并允许这样做，但它破坏了 Mayas 时间评估周期，因此并非所有内容都可以通过时间上下文转换进行查询。使在 Maya 中制作差分方程求解器变得困难。当然，在这种特殊情况下，节点并不是特别难制作，但在大多数情况下实际工作的节点却很难。

# java-me - 混淆 j2me 项目中的图标

> ID：14670446
> 
> 赞同：0
> 
> 时间：2013-02-03T07:42:41.753
> 
> 标签：java-me, icons

我使用 Netbeans 作为 IDE 创建了一个基于 j2me 的项目。现在我想混淆我的这个项目的资源（图标，图像）。这样图像的名称或外观就会改变。这怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T00:07:15.187

您可以将图像文件名更改为没有扩展名并且只有一两个字母。然后更改代码以使用这些新名称而不是原始名称。
如果您的图像文件是 PNG，您可以在构建期间将 PLTE 块更改为错误的值，并在执行期间更正它们。
图像类没有轻松更改颜色的方法。一种解决方法可能是调用 getRGB 方法并迭代 rgbData 数组。更好的方法是读取文件内容、更改调色板字节并根据结果数据创建图像。首先让我们创建一个辅助方法来读取整个 InputStream 并返回一个字节数组及其内容：

```
private byte [] readStream (InputStream in) throws IOException
{
  ByteArrayOutputStream baos = new ByteArrayOutputStream();
  byte [] buff = new byte [1024];
  int size = in.read(buff);

  while (size >= 0) {
    baos.write(buff, 0, size);
    size = in.read(buff);
  }

  return baos.toByteArray();
} 
```

接下来我们必须找到字节数组中的调色板块在哪里。这是另一个辅助方法：

```
// return index where P of PLTE is found at buff array or -1
private int getPLTEIndex (byte [] buff) {
  int i = -1;
  // 4 == "PLTE".size()
  if (buff != null && buff.length >= 4) {
    boolean foundPalete = false;
    boolean endOfBuff = false;
    do {
      i++;
      foundPalete = buff[i] == 'P'
              && buff[i +1] == 'L'
              && buff[i +2] == 'T'
              && buff[i +3] == 'E';
      endOfBuff = (i +4 >= buff.length);
    } while (!foundPalete && !endOfBuff);
    if (endOfBuff) {
      i = -1;
    }
  }
  return i;
} 
```

最后，一种从颜色类型为 3 的 PNG 文件的调色板中更改颜色的方法：

```
private byte [] setRGBColor (byte [] buff, int colorIndex, int colorNewValue) {
  int i = getPLTEIndex(buff);
  if (i >= 0) {
    i += 4; // 4 == "PLTE".size()
    i += (colorIndex * 3); // 3 == RGB bytes
    if (i + 3 <= buff.length) {
      buff[i] = (byte) (((colorNewValue & 0x00ff0000) >> 16) & 0xff);
      buff[i +1] = (byte) (((colorNewValue & 0x0000ff00) >> 8) & 0xff);
      buff[i +2] = (byte) ((colorNewValue & 0x000000ff) & 0xff);
    }
  }
  return buff;
} 
```

以下是有关如何使用所有方法的示例：

```
InputStream in = getClass().getResourceAsStream("/e");
try {
  byte [] buff = readStream(in);
  Image original = Image.createImage(buff, 0, buff.length);
  buff = setRGBColor(buff, 0, 0x00ff0000); // set 1st color to red
  buff = setRGBColor(buff, 1, 0x0000ff00); // set 2nd color to green
  Image updated = Image.createImage(buff, 0, buff.length);
} catch (IOException ex) {
    ex.printStackTrace();
} 
```

如[http://smallandadaptive.blogspot.com.br/2010/08/manipulate-png-palette.html所示](http://smallandadaptive.blogspot.com.br/2010/08/manipulate-png-palette.html)

# ruby-on-rails - 尝试按照本书中的本教程进行操作，但页面上未显示提供的 CSS/图像

> ID：14670455
> 
> 赞同：0
> 
> 时间：2013-02-03T07:43:58.827
> 
> 标签：ruby-on-rails, ruby

尝试按照本书中的本教程进行操作，但提供的图像未显示在我`/views/layouts/ads.html.erb`看起来像这样的页面上

```
<!doctype HTML>
<html>
<head>
    <title>Ads: <%= controller.action_name %></title>
    <%= stylesheet_link_tag 'default.css' %>
</head>
<body>
    <div id="wrapper">
        <div id="header">
            <div>
                <h1>MeBay</h1>
                <ul id="nav">
                    <li><a href="/ads/">All Ads</a></li>
                </ul>
            </div>
        </div>

        <div id="content">
            <%= yield %>
        </div>
        <div id="clearfooter"></div>
    </div>
    <div id="footer"></div>
</body>
</html> 
```

中的 CSS`/app/assets/stylesheets`看起来像这样

```
html, body { height: 100%; }

body { background-color: #e6dacf; background-image: url('/images/bg.png'); background-position: top center; background-repeat: repeat-y; font-family: "Trebuchet MS", Arial, san-serif; font-size: 14px; margin: 0; padding: 0; text-align: center; }

a { color: #000; }
a:hover { background: #000; color: #e6dacf; }

div#wrapper { min-height: 100%; }
* html div#wrapper { height: 100%; }

div#header { background: url('/images/bgHeader.png'); height: 100px; padding: 8px 0 0 0; }
div#header div { margin: 0 auto; position: relative; width: 800px; }
div#header h1 { left: 0; margin: 0; position: absolute; }
div#header h1 { background: url('/images/logo.png') no-repeat; display: block; height: 0; margin: 0 auto; padding: 92px 0 0 0; overflow: hidden; width: 319px; }

ul#nav { float: right; list-style: none; margin: 0; padding: 69px 0 0 0; }
ul#nav li { background: #e6dacf; border: solid #000; border-width: 2px 2px 0 2px; float: left; margin: 0 0 0 2px; }
ul#nav a { display: block; padding: 3px 6px 0 6px; text-decoration: none; }
ul#nav a:hover { display: block; padding: 3px 6px 7px 6px; }
ul#nav a.current { padding-bottom: 8px; }
ul#nav a.current:hover { background: #e6dacf; color: #000; cursor: default; }

div#content{ margin: 0 auto; padding: 20px 0; text-align: left; width: 720px; height: 300px}
div#content img { border: 10px solid #000; float: right; margin: 18px 0 0 20px; }
div#content h2 { border: solid #999; border-width: 0 0 5px 0; font-size: 28px; margin: 0; padding: 0 0 10px 0; }
div#content p { margin: 0; padding: 4px 6px 10px 0; }

div#clearfooter { height: 110px; }

div#footer { background: url('/images/bgFooter.png'); height: 110px; margin: -110px auto 0 auto; } 
```

我把提供的图像放在`/app/assets/images`

这就是它应该的样子，也是它对我的样子

[http://imgur.com/a/VEyr](http://imgur.com/a/VEryr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:49:55.150

你应该调试这些类型的问题

*   [Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/)
*   [火狐的萤火虫](https://addons.mozilla.org/en-US/firefox/addon/firebug/)

两者都为解决 js / css 相关问题提供了出色的支持。在您的特定情况下，您需要检查工具中的网络或网络选项卡以查看 CSS 是如何加载的。您很可能会在加载样式表时看到错误。

该工具将向您显示它试图访问的 CSS 路径，您可以从那里调试它...

# javascript - 像 ExtJS 一样编写 jQuery UI

> ID：14670456
> 
> 赞同：9
> 
> 时间：2013-02-03T07:44:08.947
> 
> 标签：javascript, jquery, jquery-ui, class, abstraction

我正在尝试为 jQuery UI 开发一个抽象层，允许将小部件定义为与 ExtJS 类似（或类似）的对象。这是概念：

```
var mydialog = new $.ui.dialog({

modal:true,
renderTo:'body',
title:'The Windows Tittle',
content:'The content of the Window'

}); 
```

现在我可以说：

```
mydialog.show(); 
```

第一步（我认为）是向 jQuery 添加一个类创建函数，这允许创建类：

```
$.MYNAMESPACE.dialog = $.Class ({

constructor:function(){}

//methods and properties

}); 
```

真正的问题来了：我必须在前面的类定义中放入什么才能将真正的 $.ui.dialog 与我的链接？我的意思是我不想创建一个新的小部件，我只想重用预定义的 jQuery UI 小部件背后的代码，以便创建一个允许使用 jQuery UI 进行 OOP 的抽象层。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T22:07:51.157

你试过 jquery-ui 小部件工厂吗？您可能正在重新发明 wheel.js

[幻灯片](http://ajpiano.com/widgetfactory/#slide1)展示了您使用小部件工厂获得的结果

[官方启动页面](http://jqueryui.com/widget/)和[api](http://api.jqueryui.com/jQuery.widget/)

快速了解它在做什么。我想要一个带有一些自定义事件的新对话框

```
//this is instantiating the widget, does not need to be in the same file
$(function(){
  $(".some-selector").miDialog({autoopen:true //because we can});
});
//this is a definition, not an instantiation of the widget. aka, 
$.widget("mi.miDialog" //namespace
  ,$.ui.dialog //inherit from this jquery widget
  ,//start your widget definition
{ options:{autoopen:false,//overwrite parent default option, while still giving instance option to override our definition's override of parent
   someInstanceSafeOption: {why:"not",have:"a",subobject:"option"} },
//underscore functions are 'private' unless you dig into the prototype manually
_create :function(){
//you'll need this function.  guaranteed to run once.
// upcoming version call parent create
this._super(); 
//current version call parent create
$.ui.dialog.prototype._create(this.options);
this.element.addClass("mi-dialog"); //help with custom styling
  this._trigger("created"); //trigger custom events
//register for events here, as _create() will only run once per individual instance

},
_init:function(){
//this will run every time someone calls $('some-selector').miDialog();
//i have yet to use it much
},
publicFunction: function(some, params){
 //this function does whatever you want, and is called $('some-selector'.miDialog("publicFunction", some,params);
},
_destroy: function(){
//clean up after your widget's create function, if needed.
} 
```

# php - 将查询字段 n 行传递给数组

> ID：14670463
> 
> 赞同：0
> 
> 时间：2013-02-03T07:46:18.220
> 
> 标签：php, arrays, arraylist

我正在尝试将所有行获取到数组变量

我想要的数组是这样的

```
$data1 = array('fields'=>array(
        array(
          'id' => 1,
          'nama_file' => "sunset.jpg",
          'judul' => "Sunset",
          'isi' => "Matahari terbenam indah sekali",           
        ),
        array(
          'id' => 2,
          'nama_file' => "water_lilies.jpg",
          'judul' => "Bunga Lilly",
          'isi' => "Bunga lilly air sangat indah",           
        ),) 
```

我已经这样做了：

```
$q = $this->db->query('select id, nama_file, judul, isi from tfoto where dihapus ="T" ');
$data1=array('fields');
foreach($q->result() as $row) {

$data1['fields']=array('id'=>$row->id,'nama_file'=>$row->nama_file,'judul'=>$row->judul, 'isi'=>$row->isi);
} 
```

测试输出：

```
<?php 
foreach($fields as $field){ 
echo $field['nama_file'];
.
.
.
};?> 
```

我得到消息：非法字符串偏移 'nama_file';'judul'; 等等

我是 MySQL/PHP 的新手，如果这是一个非常基本的问题，请原谅我。我试着四处寻找，但我找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:50:08.870

这一行：

```
$data1['fields']=array('id'=>$row->id,'nama_file'=>$row->nama_file,'judul'=>$row->judul, 'isi'=>$row->isi); 
```

应该：

```
$data1['fields'][] = array('id'=>$row->id,'nama_file'=>$row->nama_file,'judul'=>$row->judul, 'isi'=>$row->isi); 
```

因为您必须将新数组附加到`$data1`而不是替换它。

# android - 显示来自网络使用 UIL 的 gif

> ID：14670466
> 
> 赞同：-4
> 
> 时间：2013-02-03T07:47:23.440
> 
> 标签：android, gif, universal-image-loader

有什么方法可以显示来自网络使用[UIL的 gif 照片](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:09:47.043

[ImageViewEx](https://github.com/frapontillo/ImageViewEx)可以显示来自网络的 gif。

# intellij-idea - How to include jQuery from Global Libraries into my page in Intellij IDEA?

> ID：14670469
> 
> 赞同：1
> 
> 时间：2013-02-03T07:48:29.707
> 
> 标签：intellij-idea

I cannot understand what is the advantages of having jQuery in *"Global Libraries"* list?

Can I somehow include any javascript Global Library into my html page or should I just copy/paste content of this library to new file in my project and include it manually to html page?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:42:35.813

Global libraries are needed for code completion in the web applications when there are no explicit includes in all the pages or when you are editing JS files that have access to other libraries, but there is no way to specify it directly in the script.

Of course you need to have a copy of the library in your project or reference its URL in HTML pages.

# c# - 枚举的类型

> ID：14670471
> 
> 赞同：0
> 
> 时间：2013-02-03T07:49:02.253
> 
> 标签：c#, enums

我正在尝试从这个方法中创建一个通用方法：

```
public static SelectList LanguagesToSelectList()
{
   return new SelectList(
        Enum.GetValues(typeof(Languages))
        .Cast<Languages>()
        .Select(g => new KeyValuePair<Languages, string>(
            g,
            Resources.Views_GamesAndApplications.ResourceManager.GetString("Language_" + g.ToString()
            )
        )), 
        "Key", 
        "Value"
        );
} 
```

这是我得到的：

```
public static SelectList ToSelectList(Enum enumType, ResourceManager resourceManager, string resourcePrefix)
{
    return new SelectList(
        Enum.GetValues(typeof(enumType))
        .Cast<enumType>()
        .Select(g => new KeyValuePair<enumType, string>(
            g,
            resourceManager.GetString(resourcePrefix + g.ToString())
            )), 
        "Key", 
        "Value");
} 
```

但是， enumType 不应该是 type `Enum`（也不应该是 type `Type`），我不知道应该是什么类型，或者我是否应该改写整个方法。

用法示例（符合给定答案）：

```
@Html.DropDownListFor(
    m => m.Language,  
    SelectListHelper.ToSelectList<Languages>   
      (Resources.Views_GamesAndApplications.ResourceManager,"Language_")) 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T07:55:32.190

```
public static SelectList ToSelectList<T>(ResourceManager resourceManager, string resourcePrefix)
    where T : struct 
{
    return new SelectList(Enum.GetValues(typeof(T)).Cast<T>()
                .Select(g => new KeyValuePair<T, string>(g, resourceManager.GetString(resourcePrefix + g.ToString()))), "Key", "Value");
}  

//Example:
var list = ToSelectList<Languages>(someResourceManager, "somePrefix"); 
```

# mysql - 在使用 group by 时显示与 group by 匹配相关的所有行数据

> ID：14670473
> 
> 赞同：1
> 
> 时间：2013-02-03T07:49:09.770
> 
> 标签：mysql, group-by

我想选择所有避免画廊名称重复的照片。但是使用 group by，我检索所有画廊名称，但我只得到一张与每个画廊相关的照片。becoz 组只显示一行。

如何在不重复画廊名称的情况下显示所有照片？任何替代方法？请帮助。

```
$sql=mysqli_query($db3->connection,"SELECT  *   from photo  group by   gallery_name ");
    while($row=mysqli_fetch_array($sql)){
        $pic_name=$row['p_name'];

        $gallery_name=$row['gallery_name'];
        echo "$gallery_name>$pic_name,";
    } 
```

第二种替代方法可以像这里一样，但我仍然得到画廊名称的重复

```
 $sql=mysqli_query($db3->connection,"SELECT gallery_name   from photo  group by   gallery_name ");
        while($row1=mysqli_fetch_array($sql1)){
            $gallery_name=$row1['gallery_name'];

        $sql=mysqli_query($db3->connection,"SELECT  *   from photo where gallery_name='$gallery_name' ");
        while($row=mysqli_fetch_array($sql)){
            $pic_name=$row['p_name'];

            $gallery_name1=$row['gallery_name'];
            echo "$gallery_name>$pic_name,";
        }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:54:49.203

使用`'ORDER BY'`而不是`"GROUP BY"`.

```
SELECT *
 ...
GROUP BY ... 
```

是错的。组用于计数、查找最小值和最大值以及其他组操作。其余的应该取决于您的 PHP 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:52:26.780

试试这个：：

```
SELECT  gallery_name, p_name   from photo group by gallery_name, p_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T07:52:40.237

我认为您可能希望使用`DISTINCT`and`ORDER BY`关键字：

```
SELECT DISTINCT p_name, gallery_name
FROM Photo
ORDER BY gallery_name, p_name 
```

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T08:04:16.147

如果您正在查找特定画廊的所有图片，请使用`WHERE`不带 group by 的子句，如下所示：

```
 SELECT  *   
  from photo  
  where gallery_name  = '$gallery_name'; 
```

# .net - 扩展实体框架模型以包含新类

> ID：14670474
> 
> 赞同：1
> 
> 时间：2013-02-03T07:49:18.950
> 
> 标签：.net, entity-framework, entity-framework-4, edmx

菜鸟问题

我在我的项目中使用实体框架，它在设计器中生成实体，例如：

```
public partial class CLMEntities : ObjectContext 
```

我希望 CLMEntities 继承项目中的另一个类以获得更多功能：

```
public class MoreFunctionality 
```

...当然我不能继承，因为它已经继承自`ObjectContext`

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T08:55:45.917

几个选项，取决于功能`MoreFunctionality`是什么：

1：使其成为通用[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)类而不是父类，如下所示：

```
public class MoreFunctionality<TEntities> where TEntities : ObjectContext
{
    private readonly TEntities _objectContext;

    public MoreFunctionality(TEntities objectContext)
    {
        this._objectContext = objectContext;
    }

    public TEntities ObjectContext
    {
        get { return this._objectContext; }
    }

    // Other behaviour
} 
```

...并传递装饰器而不是`ObjectContext`.

2：使其成为接口并使用[扩展方法](http://msdn.microsoft.com/en-gb/library/vstudio/bb383977.aspx)添加行为，如下所示：

```
public interface IMoreFunctionality
{
}

public partial class CLMEntities : ObjectContext, IMoreFunctionality
{
}

public static class MoreFunctionalityExtensions
{
    public static void SomeFunctionality(
        this IMoreFunctionality moreFunctionality)
    {
        // Do something...
    }

    public static void SomeMoreFunctionality(
        this IMoreFunctionality moreFunctionality)
    {
        // Do something else...
    }
} 
```

# php - 格式化标签 HTML PHP CSS

> ID：14670475
> 
> 赞同：0
> 
> 时间：2013-02-03T07:49:44.713
> 
> 标签：php, html, css, formatting

我已经离开编程很长一段时间了。令人惊讶的是，您忘记了最简单的事情。所以我试图通过制作简历生成器来预热我的网页设计/PHP。我在 Word 中制作了我的简历，我想尝试模仿文档格式。

我试着用表格来做这个，然后我把它刮掉了，因为它没有像我想要的那样工作，现在我正在使用 div 和 spans。

但这更加破坏了格式，所以我不知道该怎么办......

我的主要问题是让空格精确排列，就像 Microsoft Word 中的选项卡一样，与其他东西在同一行。

这是我正在使用的代码

```
function fieldFill($fieldL, $fieldR = 'NoneAtAll'){
$numOfSpaces = 50;
echo '<div class="left">' . $fieldL . '</div>';

//if ($fieldR != 'NoneAtAll'){
//    for($i = 0; $i <= $numOfSpaces - strlen($fieldL); $i++){
//        echo '&nbsp';
//        //echo $i;
if ($fieldR != 'NoneAtAll'){
        for($i = 0; $i <= $numOfSpaces; $i++){
            echo '&nbsp';
        }
    echo '<span class="rightt">' . $fieldR . '</span>';
    echo '<br></br>';
    }
} 
```

这是CSS部分

```
<style>
    .rightt {margin: 0 0 0 300px;}
    .name { font-size: 22pt;}
    .sections {
        padding: 15px 0px 0px 0px;
        font-size: 12pt;
        font-weight: bold;
        text-decoration: underline;
        }
    .years {
        font-size: 12pt;
        font-weight: bold;
        /*white-space:pre*/
        }
    .jobtits {
        font-size: 12pt;
        font-weight: bold;
    }
    </style> 
```

我知道那里已经有很好的简历生成器，但我这样做是为了练习。谢谢

来吧，我想模仿这种格式

![在此处输入图像描述](../Images/39af0986d6109ed787153db8237b95af.png)

截至今天，我发现这段代码

```
<div id="page-container">
            <div id="leftside">
                <div class="name">Name</div>
                Address
                <br>
                City
                <br>
                State

                <div class="sections">Objective</div>
                To do good stuff!
                <div class="sections">Education</div>
                A college    
                <div class="sections">Awards</div>
                Did some good stuff
                <div class="sections">Job Experience</div>
                <div class="jobtits">Some place</div>
                Was an editor
                <div class="jobtits">Another place</div>
                Did stuff there too.
                <div class="sections">Skills</div>
            </div>
            <div id="rightside">
                <div class="name">That's my name</div>
                Mobile: 334-223-3244
                <br>
                Home: 334-223-3244
                <br>
                Email: Email@me.com

                <div class="sections">Filler</div>
                Filler
                <div class="sections">Filler</div>
                2012-1030    
                <div class="sections">Filler</div>
                Filler
                <div class="sections">Job Experience</div>
                <div class="jobtits">Jul 00 - 32</div>
                Filler
                <div class="jobtits">Everybody's heard</div>
                About the bird.
                <div class="sections">Skills</div>
            </div>
        </div> 
```

大部分都在工作，但仍有部分需要重叠，例如目标线。我可能需要为此制作一个新的 div/table 吧？在将其变为动态之前，我正在遍历 html 静态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:57:08.283

SPAN 标签是内联元素，因此不会对其应用边距，请改用 DIV 标签。

# java - 如何在 JFrame 的圆圈内放置标签？

> ID：14670482
> 
> 赞同：0
> 
> 时间：2013-02-03T07:51:16.683
> 
> 标签：java, swing, jframe

我正在设计一个与 DFA 相关的程序..所以我想把 Q0 或 Q1 之类的东西放在圈子里，但我不知道怎么做..有人可以看看我的代码并告诉我怎么做吗？如果可以直接放置一个将出现在圆圈内的名称，那就太好了，因为我认为很难为 JLabel 设置位置。这是我的代码：

```
 import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class midterm extends JFrame
{
    JPanel mainpanel;
    JPanel gamepanel;
    JPanel controls;

    ExitButtonListener end=new ExitButtonListener();

    public midterm()
    {
        super("My DFA Design");
        setSize(700,700);
        setLocation(400,100);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);
        setResizable(false);

        panel();
        this.getContentPane().add(mainpanel);
        this.pack();
        setVisible(true);   
        setSize(400,400);
    }

    public static void main(String[] args)
    {
        midterm frame=new midterm();
    }

    void panel()
    {
        mainpanel=new JPanel();
        mainpanel.setLayout(new BorderLayout());

        gamepanel=new JPanel();
        gamepanel.setBorder(BorderFactory.createTitledBorder("Deterministic Finite Automata"));
        gamepanel.setLayout(new GridLayout(2,3));

        controls = new JPanel();
        controls.setLayout(new BorderLayout());
        controls.setBorder(BorderFactory.createTitledBorder("Control"));

        JButton newGame = new JButton("Reset");
        newGame.addActionListener(new NewButtonListener());
        controls.add(newGame, BorderLayout.NORTH);

        JButton exitGame = new JButton("Exit");
        exitGame.addActionListener(end);
        controls.add(exitGame, BorderLayout.SOUTH);

        mainpanel.add(gamepanel, BorderLayout.CENTER);
        mainpanel.add(controls, BorderLayout.EAST);

        mainpanel.setVisible(true);

        q1 c1=new q1();
        q2 c2=new q2();
        q3 c3=new q3();
        gamepanel.add(c1);
        gamepanel.add(c2);
        gamepanel.add(c3);      

    }

    class ExitButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent event)
        {
            System.exit(0);
        }
    }

    class NewButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent event)
        {

        }
    }

    class q1 extends JPanel
    {
        final int radius=25;
        public void paint(Graphics gr)
        {
            setBackground(Color.black);
            gr.drawOval((100/2-radius),(100/2-radius), radius*2, radius*2);
        }
    }

    class q2 extends JPanel
    {
        final int radius=25;
        public void paint(Graphics gr)
        {
            setBackground(Color.black);
            gr.drawOval((95/2-radius),(100/2-radius), radius*2, radius*2);
        }
    }

    class q3 extends JPanel
    {
        final int radius=25;
        public void paint(Graphics gr)
        {
            setBackground(Color.black);
            gr.drawOval((250/2-radius),(50/2-radius), radius*2, radius*2);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:15:04.510

可能，是，推荐，也许不是……

![在此处输入图像描述](../Images/18301791753abd3f39ec179404225b7e.png)

```
public class TestLabel {

    public static void main(String[] args) {
        new TestLabel();
    }

    public TestLabel() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridBagLayout());
            add(new CircleLable("1"));
            add(new JLabel("What is the capital of SegWay?"));
        }

    }

    public class CircleLable extends JLabel {

        public CircleLable() {
            init();
        }

        public CircleLable(String text) {
            super(text);
            init();
        }

        protected void init() {
            setHorizontalAlignment(CENTER);
            setVerticalAlignment(CENTER);
            setBorder(new EmptyBorder(2, 2, 2, 2));
        }

        @Override
        public Dimension getPreferredSize() {
            Dimension size = super.getPreferredSize();
            size.width = Math.max(size.width, size.height);
            size.height = size.width;
            return size;
        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            Insets insets = getInsets();
            int width = (getWidth() - (insets.left + insets.right));
            int height = getHeight() - (insets.top + insets.bottom);
            int radius = Math.max(width, height);

            int x = insets.left + ((width - radius) / 2);
            int y = insets.top + ((height - radius) / 2);

            g2d.drawOval(x, y, radius, radius);

            super.paintComponent(g2d);

            g2d.dispose();
        }

    }

} 
```

我对这个解决方案的问题是有很多可能出错的地方。添加一个图标，更改文本对齐等可以通过它关闭。

就个人而言，我会简单地使用自定义`JPanel`并呈现我自己的文本（确保组件首先是透明的），但这只是我......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:15:05.883

@MadProgrammer 的想法更好，但您可以将[dingbats](http://www.unicode.org/charts/PDF/U2700.pdf)用于带圆圈的数字：➀、➁、➂、...</p>

# html - 仅在所有浏览器中输入文本后才使占位符消失

> ID：14670483
> 
> 赞同：1
> 
> 时间：2013-02-03T07:51:30.437
> 
> 标签：html, forms, css

> **可能重复：**
> [HTML5 占位符在焦点上消失](https://stackoverflow.com/questions/8574356/html5-placeholder-disappears-on-focus)

在 Mac 上的 Safari 和 Chrome 中，当用户关注具有占位符属性的文本字段时，占位符将一直保留到输入字符为止。在 Firefox（可能还有其他一些浏览器）中，占位符将在选择文本字段后立即消失。有什么方法可以强制 Firefox 和其他浏览器保留占位符，直到用户像 Chrome 和 Safari 一样开始输入？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:24:43.257

根据我的收集，您所描述的行为是我们**应该**看到浏览器展示的行为。

这是[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-placeholder-attribute)所说的：

> **当元素的值为空字符串**或**控件未聚焦**（*或两者兼有*）时，用户代理应在删除换行符后向用户显示此提示，例如通过将其显示在空白的未聚焦控件中并以其他方式隐藏它.

不幸的是，它们似乎并不都符合规范（或者“或”足够模糊以至于被误解了）。您可以尝试使用 ( [-moz-placeholder](https://developer.mozilla.org/en-US/docs/CSS/:-moz-placeholder) ) 的浏览器替代方案，但可能不能强制 placeholder 属性以特定方式运行。

# c# - 为什么我不能在 WP7 单元测试项目中实例化我的页面之一？

> ID：14670486
> 
> 赞同：0
> 
> 时间：2013-02-03T07:52:01.173
> 
> 标签：c#, unit-testing, windows-phone-7

我正在尝试将单元测试合并到一个小型 WP7 录音应用程序中，以使自己熟悉这个概念。我已经阅读了一些有关该主题的内容，并且正在使用 Windows Phone Toolkit 测试框架。总的来说，我是 WP7 平台的新手，几乎完全是单元测试的概念。

我在 MSDN 博客上关注了[Amit Chatterjee 的示例](http://blogs.msdn.com/b/amit_chatterjee/archive/2011/06/26/unit-testing-the-windows-phone-7-applications.aspx)单元测试，并相信我的单元测试项目设置正确。但是，当我运行以下测试时：

```
[TestMethod]
[Description("Should always have this. Check if MainPage is created without problems.")]
public void CheckMainPageNotNull()
{
   AudioRecorder.MainPage recorder = new AudioRecorder.MainPage();
   Assert.IsNotNull(recorder);
} 
```

它失败。我知道 Assert 永远不应该失败，这主要是一个微不足道的测试，看看我是否正确设置了框架，而我显然没有。AudioRecorder 是主要项目的名称。单元测试报告员告诉我，我遇到了未处理的 XamlParseException：

> 在 AudioRecorder.MainPage.InitializeComponent() 在 AudioRecorder.MainPage...ctor( ) 在...等。

我已经`[assembly: InternalsVisibleTo("AudioRecorderUnitTests")]`设置好了`AssemblyInfo.cs`，老实说，我对我设置不正确的东西感到困惑。是否有人对 Windows Phone Toolkit 测试框架有任何见解或任何好的示例用于一个重要的示例？将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:27:52.300

我相信我终于找到了原因，如果不是一个实际的解决方案的话。我在主项目的 App.xaml 中定义了一个名为 AppNameUpper 的自定义 ApplicationResource。似乎当单元测试项目试图解析这个时，它抛出了一个异常。**删除该资源和对它的所有引用似乎已经解决了这个问题。**

我不明白我是如何将 ApplicationResources 与单元测试框架结合使用的，但这是另一个问题的问题，而且很可能需要更多的研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:36:40.237

问题可能是对`StaticResource`您在`App.xaml`. 由于未使用正在测试的应用程序的Application类，因此无法解析引用。即使您“新建”了它，它也不会起作用，因为它`Application.Current`是您的单元测试应用程序。

我建议不要从您的单元测试应用程序测试您的*视图*（页面），而是您的视图模型。

如果这对您来说不可能，您可能需要考虑在单元测试项目中声明相同的资源。不过，老实说，这样做会让它们越来越不像“单元测试”，而更像是维护的噩梦。

# ios - Facebook iOS SDK 拉取好友数据问题

> ID：14670496
> 
> 赞同：0
> 
> 时间：2013-02-03T07:53:31.350
> 
> 标签：ios, objective-c, sdk, facebook-ios-sdk

我正在尝试将 Facebook iOS SDK 3.1.1 实施到我的应用程序中，但遇到了问题。

当我尝试跑步时

```
NSString *query =
@"SELECT uid, name, pic_square FROM user WHERE uid IN "
@"(SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 25)";
// Set up the query parameter
NSDictionary *queryParam =
[NSDictionary dictionaryWithObjectsAndKeys:query, @"q", nil];
// Make the API request that uses FQL
[FBRequestConnection startWithGraphPath:@"/fql"
                             parameters:queryParam
                             HTTPMethod:@"GET"
                      completionHandler:^(FBRequestConnection *connection,
                                          id result,
                                          NSError *error) {
                          if (error) {
                              NSLog(@"Error: %@", [error localizedDescription]);
                          } else {
                              NSLog(@"Result: %@", result);
                          }
                      }]; 
```

我的应用程序崩溃`NSLog(@"Result: %@", result);`如果有人可以帮助我，那将不胜感激。我正在尝试使用每个朋友的用户数据返回用户的朋友列表。下面是调试导航视图。

谢谢，

韦斯

![调试导航](../Images/f0480ff7178f38e4cb249004ab25d558.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:59:42.370

您在这里可以期待的结果是一个包含您需要的所有朋友数据的字典。你可以这样理解它：

```
NSDictionary *resultDict = (NSDictionary *)result;
NSArray *friendsArr = [resultDict objectForKey:@"data"];
NSMutableArray *resultArr = [NSMutableArray array];
for (FBGraphObject *friendObj in friendsArr) {
    NSString *name = [friendObj objectForKey:@"name"];
    NSString *imageUrl = [friendObj objectForKey:@"pic_square"];
    long long uid = [[friendObj objectForKey:@"uid"] longLongValue];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T22:13:25.573

我通过将每个控制器和库添加回一个空项目来从头开始重建我的项目。现在看来一切正常。相同的代码相同的位置。

# svn - 无法将 Hudson 与 Subversion 连接以下载目录

> ID：14670503
> 
> 赞同：0
> 
> 时间：2013-02-03T07:55:04.210
> 
> 标签：svn, hudson

[我在https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql](https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql)安装了一个 SVN 存储库

我安装了带有 SVN 插件的 Hudson。现在我想创建一个工作，从 SVN 存储库下载文件。

当我在“存储库 URL”字段中提供“ [https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql ”时，一切正常。](https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql)但是当我提供“ [https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql/trunk](https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql/trunk) ”时，我收到以下错误：

错误：无法签出[https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql/trunk](https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql/trunk) org.tmatesoft.svn.core.SVNCancelException：svn：E200015：在 org.tmatesoft.svn.core.internal.wc 取消身份验证。 SVNErrorManager.cancel(SVNErrorManager.java:37) 在 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.cancel(SVNErrorManager.java:32) 在 org.tmatesoft.svn.core.internal.wc.DefaultSVNAuthenticationManager.getFirstAuthentication( DefaultSVNAuthenticationManager.java:177) 在 org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:580) 在 org.tmatesoft.svn.core.internal.io.dav.http。 HTTPConnection.request(HTTPConnection.java:286) 在 org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:274)

任何想法我做错了什么？我确定 URL

[https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql/trunk](https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql/trunk)

在我的 TortoiseSVN 客户端中运行良好

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:05:29.773

嗯，没关系。我创建了一个新工作，在工作配置和凭证屏幕上都输入了[https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql/trunk ；](https://advisorycenter.unfuddle.com/svn/advisorycenter_mssql/trunk)它工作正常。不过，这在我看来像是 Hudson 3.0.0 中的一个小缺陷。因此，如果您有同样的问题，只需开始一个新的工作项目。

# android - USSD阅读回复

> ID：14670514
> 
> 赞同：9
> 
> 时间：2013-02-03T07:56:16.100
> 
> 标签：android, ussd

我一直在阅读无线电日志以检索 USSD 回复而不是aidl，尽管我还不确定哪个更适合我的目的。我仍然希望捕获菜单以及简单的交换。

无论如何，我现在可以以编程方式阅读回复，但它们仍会出现在屏幕上的系统对话框中，我需要按 OK 关闭。

有没有一种程序化的方式来关闭这个系统对话框？

我正在写的是一些代码，它们将在没有人机交互的情况下在使用的 android 上执行我自己的 USSD（即来自运营商的第 3 方）（没有人在场按 OK）。它更多地用于向服务器发送信息而不是接收信息。很久以前我在一个旧的 Wavecom 调制解调器上做过这个，所以发现在 Android 中做这个有多么困难，我很沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T13:33:56.793

尽管文档很少，但这个应用程序实际上在拦截 USSD 响应方面做得很好： [https ://github.com/alaasalman/ussdinterceptor](https://github.com/alaasalman/ussdinterceptor)

# java - 当我在 Java 中左键单击 TrayIcon 时，如何显示 PopupMenu？

> ID：14670516
> 
> 赞同：1
> 
> 时间：2013-02-03T07:56:44.793
> 
> 标签：java, mouselistener, trayicon, tray

目前，当我右键单击 SystemTray 中的 TrayIcon 时，会显示 PopupMenu。但是，当我左键单击 TrayIcon 时，我希望它做同样的事情。

我想我可以通过在 TrayIcon 上使用 mouseListener 来完成此操作，但我不知道在 mouseClicked 事件中调用什么方法来实现所需的结果。

```
icon = new TrayIcon(img, tooltip, popup);

     icon.addMouseListener(
           new MouseAdapter() {
              public void mouseClicked(MouseEvent e) {
                 popup.setEnabled(true);
              }
           }); 
```

当我左键单击 TrayIcon 时，使用 setEnabled() 方法不会出现弹出菜单。它实际上没有明显的效果。我想知道我应该在 mouseClicked() 主体中使用什么方法，以便在左键单击时显示弹出窗口。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T06:33:54.257

基本上，在您的鼠标侦听器中，您需要确定按下了哪个按钮（以及可选的，多少次）。

关键的代码是这个......

```
if (e.getButton() == MouseEvent.BUTTON1 && e.getClickCount() == 1) { ... } 
```

我还包含了一些额外的代码，以确保弹出窗口不覆盖任务栏并显示在屏幕的可视区域内（这是我的一个 nit 选择；））

```
public class TestTrayIcon02 {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }
                try {
                    final TrayIcon ti = new TrayIcon(ImageIO.read(getClass().getResource("/Smiley.png")), "Have a nice day");
                    final JPopupMenu popup = new JPopupMenu();

                    JMenuItem mi = new JMenuItem("Get me some");
                    mi.addActionListener(new ActionListener() {
                        @Override
                        public void actionPerformed(ActionEvent e) {
                            SystemTray.getSystemTray().remove(ti);
                            System.exit(0);
                        }
                    });

                    popup.add(mi);
                    ti.addMouseListener(new MouseAdapter() {
                        @Override
                        public void mouseClicked(MouseEvent e) {
                            if (e.getButton() == MouseEvent.BUTTON1 && e.getClickCount() == 1) {
                                Rectangle bounds = getSafeScreenBounds(e.getPoint());
                                Point point = e.getPoint();
                                int x = point.x;
                                int y = point.y;
                                if (y < bounds.y) {
                                    y = bounds.y;
                                } else if (y > bounds.y + bounds.height) {
                                    y = bounds.y + bounds.height;
                                }
                                if (x < bounds.x) {
                                    x = bounds.x;
                                } else if (x > bounds.x + bounds.width) {
                                    x = bounds.x + bounds.width;
                                }
                                if (x + popup.getPreferredSize().width > bounds.x + bounds.width) {
                                    x = (bounds.x + bounds.width) - popup.getPreferredSize().width;
                                }
                                if (y + popup.getPreferredSize().height > bounds.y + bounds.height) {
                                    y = (bounds.y + bounds.height) - popup.getPreferredSize().height;
                                }
                                popup.setLocation(x, y);
                                popup.setVisible(true);
                            }
                        }
                    });

                    SystemTray.getSystemTray().add(ti);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        });
    }

    public static Rectangle getSafeScreenBounds(Point pos) {

        Rectangle bounds = getScreenBoundsAt(pos);
        Insets insets = getScreenInsetsAt(pos);

        bounds.x += insets.left;
        bounds.y += insets.top;
        bounds.width -= (insets.left + insets.right);
        bounds.height -= (insets.top + insets.bottom);

        return bounds;

    }

    public static Insets getScreenInsetsAt(Point pos) {
        GraphicsDevice gd = getGraphicsDeviceAt(pos);
        Insets insets = null;
        if (gd != null) {
            insets = Toolkit.getDefaultToolkit().getScreenInsets(gd.getDefaultConfiguration());
        }
        return insets;
    }

    public static Rectangle getScreenBoundsAt(Point pos) {
        GraphicsDevice gd = getGraphicsDeviceAt(pos);
        Rectangle bounds = null;
        if (gd != null) {
            bounds = gd.getDefaultConfiguration().getBounds();
        }
        return bounds;
    }

    public static GraphicsDevice getGraphicsDeviceAt(Point pos) {

        GraphicsDevice device = null;

        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice lstGDs[] = ge.getScreenDevices();

        ArrayList<GraphicsDevice> lstDevices = new ArrayList<GraphicsDevice>(lstGDs.length);

        for (GraphicsDevice gd : lstGDs) {

            GraphicsConfiguration gc = gd.getDefaultConfiguration();
            Rectangle screenBounds = gc.getBounds();

            if (screenBounds.contains(pos)) {

                lstDevices.add(gd);

            }

        }

        if (lstDevices.size() > 0) {
            device = lstDevices.get(0);
        } else {
            device = ge.getDefaultScreenDevice();
        }

        return device;

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:34:41.007

你试图做的显然是不可能的：

你不能`PopupMenu`用它的`show`方法来展示它，因为你需要指定 a`JComponent`但你`TrayIcon`不是一个（很奇怪，尽管它`TrayIcon`仍然可以做到，所以显然有**一种**方法，尽管不要问我..）。因此，正如 MadProgrammer 建议的那样，您应该尝试`JPopupMenu`改用。不要将它添加到您`TrayIcon`的，因为那是不可能的，而是`JPopupMenu`通过将 a 添加`MouseListener`到您的`TrayIcon`. 这应该够了吧：

```
final TrayIcon tray = new TrayIcon( img, tooltip, null);
final JPopupMenu menu = new JPopupMenu();
... // your menu initialization.
tray.addMouseListener( new MouseAdapter() {
    @Override
    public void mouseClicked(MouseEvent evt) {
        menu.setLocation( evt.getPoint() );
        menu.setVisible( true );
    }
} 
```

# vb.net - 使用 Now() 解析日期格式

> ID：14670519
> 
> 赞同：0
> 
> 时间：2013-02-03T07:57:10.897
> 
> 标签：vb.net

我需要使用我正在尝试使用的 vb.net 比较 winforms 中的日期

```
If Now() = DateTime.Parse("17.01.2013 08:47:10 PM") 
```

问题是我的日期是 dd/mm/yyyy 格式，但是当这个应用程序在格式为 mm/dd/yy 的系统上运行时，它会出现问题。

如何以 dd/mm/yyyy 格式提供系统日期（使用 NOW() 获得），以便与我的给定日期进行比较？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:04:55.843

尝试使用`DateTime.ParseExact`或`TryParseExact`：

```
Dim date As Datetime = DateTime.ParseExact(_
    "17.01.2013 08:47:10 PM", "dd.MM.yyyy hh:mm:ss tt", CultureInfo.InvariantCulture) 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:03:59.043

尝试这样的事情：

```
if (Now().ToString("MM/dd/yy") = myDate) 
```

注意 vb 格式中的“MM”和“mm”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T18:08:11.127

我尝试使用格式“yyyy-MM-dd HH:mm:ss”，因为它适用于任何日期格式以及 SQL。见下文：

```
Private Shared Sub DateCompare()

    Dim myDate As Date = "12/07/2013 21:31:34"

    Dim nowDateString As String = Format(Now, "yyyy-MM-dd HH:mm:ss")
    Dim myDateString As String = Format(myDate, "yyyy-MM-dd HH:mm:ss")

    If nowDateString = myDateString Then
        MessageBox.Show("Matches")
    End If

End Sub 
```

# mysql - MySQL 需要关于我的表结构的建议 - PHP

> ID：14670520
> 
> 赞同：0
> 
> 时间：2013-02-03T07:57:23.823
> 
> 标签：mysql, database, database-design

基本上，我正在研究将学生课程注册存储在 MySQL 表中。

输入将是这样的：

```
Course Name       ####
Course Number     ####
Session           #
Year              #### 
```

然而，我的困境源于学生选择不同数量的课程并随着时间的推移增加课程。难以预测列数和输入新数据的位置。

我正在考虑在我的 MySQL 表中有一个名为 COURSES 的列并将条目分隔为：、、、`COMM%121%1%2012`等`ECON%121%1%2012`。`COMP%121%1%2012`因此，它将是两个分隔符，一个用于课程名称、编号、会话和年份 (%)，另一个用于不同的学生正在学习的课程 (,)。

我愿意接受任何建议和/或批评。如果您还可以的话，还可以包含针对此类结构或您提供的命题的 PHP 查询提示。例如，选择一个条目的部分（姓名、编号、会话和年份），以及如果学生更改/放弃一门课程，将如何更新数据输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T08:02:37.760

您的架构似乎已损坏，这就是您无法弄清楚如何解决问题的原因。学生到课程是典型的多对多关系，因此您需要一个额外的表，其中包含 a和 a 的`Student_courses`外键。动态添加列根本不是一个好选择。`Student``Course`

# c# - 在出现 OnlyOnFaulted 时使用 TPL 时出现未处理的异常

> ID：14670522
> 
> 赞同：2
> 
> 时间：2013-02-03T07:57:40.313
> 
> 标签：c#, exception-handling, task-parallel-library, unobserved-exception

这是来自“C# 5.0 in a Nutshell”的示例代码

```
TaskCreationOptions atp = TaskCreationOptions.AttachedToParent;
Task.Factory.StartNew (() =>
{
    Task.Factory.StartNew (() => { throw null; }, atp);
    Task.Factory.StartNew (() => { throw null; }, atp);
    Task.Factory.StartNew (() => { throw null; }, atp);
})
.ContinueWith (p => Console.WriteLine (p.Exception),
                TaskContinuationOptions.OnlyOnFaulted); 
```

我在我的 VS2012 设置中检查了“CLR 异常”：“用户未处理时中断”选项并运行此代码提供了 VS 的“用户代码未处理 NRE 异常”弹出窗口`throw null;`

我试图在 ContinueWith 和稍后的 Wait 上尝试捕获异常，但仍然得到未处理的异常。

我觉得打开“CLR exceptions”的解决方案：“break on user-unhandled” off 似乎是错误的，因为我实际上处理了这个异常。那么管理它的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T08:20:13.467

调试器停止执行的*原因*是“中断用户未处理的异常”将[中断任何未由用户代码（“我的代码”）中的处理程序处理的异常。](http://msdn.microsoft.com/en-us/library/038tzxdw.aspx)

由于捕获异常的 TPL[不被视为用户代码](http://msdn.microsoft.com/en-us/library/h5e30exc(v=vs.100).aspx)，因此调试器将考虑用户代码未处理的异常。

问题是，TPL 没有任何其他方式来触发[TaskContinuationOptions.OnlyOnFaulted](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcontinuationoptions.aspx)，所以恐怕你可能会看到异常。

希望异常不是您正常流程的一部分。如果不是这样，那么在调试器中将异常视为未处理实际上可能对调试任务流中的错误是一件好事。

# jquery - setTimeout + animate 返回意外的标识符？

> ID：14670525
> 
> 赞同：0
> 
> 时间：2013-02-03T07:57:55.170
> 
> 标签：jquery

我有以下内容：

```
 setTimeout(function()
    $('.golden').animate({
      opacity: "1",
      top: "84px"
    }, 'slow');
  }, 1000 ); 
```

它返回`Unexpected identifier`。

但如果我这样做：

```
 $('.golden').animate({
      opacity: "1",
      top: "84px"
    }, 'slow'); 
```

有用。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T08:00:13.543

您没有正确的语法。用这个 ：

```
 setTimeout(function() { // <= you were missing { to open the function block
    $('.golden').animate({
      opacity: "1",
      top: "84px"
    }, 'slow');
   }, 1000 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:04:48.667

语法问题

采用

```
setTimeout(function() 
{ $('.golden').animate({  opacity: "1", top: "84px" }, 'slow'); }, 
1000 ); 
```

# ios - 如何在所有使用自定义 UINavigationBar 的界面中使用自定义 UIBarButtonItem

> ID：14670527
> 
> 赞同：0
> 
> 时间：2013-02-03T07:58:12.330
> 
> 标签：ios, uibarbuttonitem

如何在所有使用自定义 UINavigationBar 的界面中使用自定义 UIBarButtonItem

没有在每个界面都写一遍。

统一设置有统一的方法吗？

```
UIImage image = [UIImage imageNamed:imagePath];
UIButton button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0.0, 0.0, image.size.width, image.size.height);
[button setImage:image forState:UIControlStateNormal];
[button setImage:[UIImage imageNamed:highLightImagePath] forState:UIControlStateHighlighted];
[button addTarget:self action:selector forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

很多界面backBarButtonItem需要自定义，代码都一样，不想写N遍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:37:12.957

您可以将其添加到单例全局变量文件中，例如

全局变量.h

```
+(UIBarButtonItem*)customButton; 
```

全局变量.m

```
+(UIBarButtonItem*)customButton{
    UIImage *image = [UIImage imageNamed:imagePath];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(0, 0, image.size.width, image.size.height);
    [button setImage:image forState:UIControlStateNormal];
    [button setImage:[UIImage imageNamed:highLightImagePath] forState:UIControlStateHighlighted];
    [button addTarget:self action:selector forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem* btn = [[UIBarButtonItem alloc] initWithCustomView:button];
    return btn;
} 
```

`GlobalVariable.h`然后，在您希望按钮出现的视图中导入并调用

```
self.navigationItem.leftBarButtonItem = [GlobalVariable customButton]; 
```

您可以将 GlobalVariable 保留在那里，以防您还需要其他变量。

# iphone - 无法从 splashviewcontroller 返回到应用程序 monotouch 的起点

> ID：14670528
> 
> 赞同：1
> 
> 时间：2013-02-03T07:58:23.730
> 
> 标签：iphone, xamarin.ios, splash-screen

我们知道，当我们想要显示自定义启动画面时，我们可以使用 splashviewcontroller （有关更多信息，请参阅[带有繁重代码的启动画面 monotouch](https://stackoverflow.com/questions/14621022/splash-screen-with-heavy-codes-in-monotouch)。我将此代码用于此建议并且效果很好。但我不不知道应用程序何时进入splashviewcontroller，繁重的代码完成了如何设置它进入应用程序的起点。

```
public override bool FinishedLaunching (UIApplication app, NSDictionary options)
{
    window = new UIWindow (UIScreen.MainScreen.Bounds);
    SplashViewController splash= new SplashViewController ();
    window .RootViewController = splash;
    window.MakeKeyAndVisible ();
    return true;
} 
```

在splashviewcontroller.cs

```
public override void ViewDidLoad ()
{
    base.ViewDidLoad ();
    UIActivityIndicatorView uai= new UIActivityIndicatorView (UIActivityIndicatorViewStyle.Gray);
    View .AddSubview (uai);
    uai.StartAnimating ();
    splashImage .StartAnimating ();
    ThreadPool.QueueUserWorkItem (o =>heavyCode ());
}

public void heavyCode ()
{
    int j=0;
    for (int i=0; i<1000000; i++) {
        j++;
    }
    //Should go to start point of application :-S
} 
```

我是 monotouch 的新开发人员，也许这是一个愚蠢的问题，但在某些日子里让我感到困惑。

我将heavyCode方法更改为：

```
public void heavyCode ()
{
    int j=0;
    for (int i=0; i<1000000; i++) {
        j++;
    }
    HomeScreen homescreen = new HomeScreen ();
    App.Delegate .Window .RootViewController = homescreen ;
} 
```

我得到了这个例外：

```
FATAL UNHANDLED EXCEPTION: MonoTouch.Foundation.ModelNotImplementedException 
```

# javascript - QTip 在下载所有内容之前显示我的 ajax 内容

> ID：14670530
> 
> 赞同：0
> 
> 时间：2013-02-03T07:58:35.327
> 
> 标签：javascript, jquery, qtip

我在我的项目中使用 QTip，我遇到了一个非常令人沮丧的问题。

我有一个包含大约 20 个元素的页面。站在它们上方时，qtip 会生成一个 ajax 请求并在 qtip 中显示这些元素时获取有关这些元素的更多详细信息。

问题是 qtip 似乎在下载附加页面的所有内容并导致奇怪的工件之前显示了提示。对于每个附加内容，这是第一次发生。第二次显示提示没有问题。

这是我如何调用 qtip ：

```
 $(".challenge_button").each(function (index, domEle)
    {
       $(domEle).qtip({
            content: {
                url: '/main/challenge_get_info/' + $(this).data("challenge-id") +'/'
            },
            position: {
                adjust: { x: -50, y: -10, screen: true },
                corner: {
                    target: 'bottomRight',
                    tooltip: 'topLeft'
                }
            },
            style: {
                name: $(this).data("state"),
                width: {
                    max: 500,
                    min: 370
                },
                tip: true
            },
            show: {
                    ready: false,
                    delay: 500,
                    effect:
                        {type : 'fade', length : 400 }
                }
        });
    }); 
```

# django - 如何更改 Django Form-Wizard 中模板的布局？

> ID：14670531
> 
> 赞同：0
> 
> 时间：2013-02-03T07:58:48.890
> 
> 标签：django, django-forms, django-templates

我正在使用 Django 的表单向导包来创建一个 4 步表单。我为这四个步骤中的每一个都创建了表格。它工作正常。就我而言，我创建了 4 个单独的模板，表单向导的每个步骤都使用自己的模板。

但是我创建的这些模板中的每一个都基本相同。下面是每个代码中的代码。我从其他地方剪切并粘贴了这个。它有效，但我不完全理解如何或为什么：

```
<form action="" method="post">{% csrf_token %}
<table>
{{ wizard.management_form }}
{% if wizard.form.forms %}
    {{ wizard.form.management_form }}
    X
    {% for form in wizard.form.forms %}
        {{ form }}
    {% endfor %}
{% else %}
    Y
    {{ wizard.form }}
{% endif %}
</table>
{% if wizard.steps.prev %}
<button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">{% trans "Previous Step" %}</button>
{% endif %}
<input type="submit" value="{% trans "Next Step" %}"/>
</form> 
```

我需要做的是在第 2 步（共 4 步）中更改表单的布局。我不希望表单的输入元素像当前那样堆叠在一起。我想通过操纵 .

但我不知道该怎么做。有人可以向我展示他们使用实际命名的表单元素而不仅仅是 {{wizard.form}} 的模板吗？请记住，如果出现验证错误，我仍然需要在此网页上显示该错误。如何完成这一切？一个简单的例子来说明您的模板是什么样子的将是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:17:58.620

如果您想控制表单的呈现，您应该[手动呈现表单域](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#customizing-the-form-template)。毕竟，您的表单仍然是标准的 Django 表单。

* * *

> 但是我创建的这些模板中的每一个都基本相同。

您当然不应该为每个步骤重复相同的模板。

将您的模板用作基本模板并在您为要自定义布局的步骤提供的模板中扩展此基本模板会更简洁。这样，您甚至可以轻松地为某些步骤嵌入额外的 CSS 或 JS。

所以而不是

```
{% for form in wizard.form.forms %}
  {{ form }}
{% endfor %} 
```

您将在基本模板中创建以下块

```
{% block form %}
  {{ wizard.form }}
{% endblock %} 
```

这样，您可以通过简单地覆盖表单块来自定义某些步骤的表单呈现。

```
{% extends "base_step.html" %}
{% block form %}
  {{ wizard.form.example_field_to_show }}
  ...
{% endblock %} 
```

# python - 使用runit时如何设置python路径

> ID：14670534
> 
> 赞同：1
> 
> 时间：2013-02-03T07:59:16.707
> 
> 标签：python, ubuntu, environment-variables, daemon

我正在使用 runit 来管理 Ubuntu 12.04 上的进程。我在运行时在日志中收到以下错误：

```
sv up test/ 
```

我认为这是一个python路径问题。

```
ImportError: No module named htcommon.ht_redis
Traceback (most recent call last):
  File "/home/ubuntu/workspace/htFrontEnd/htanalytics/ht_rpc_server.py", line 17, in <module>
    from htpData import HTPItemBase, HTPUserBase
  File "/home/ubuntu/workspace/htFrontEnd/htanalytics/htpData.py", line 9, in <module>
    from htcommon.ht_redis import HTRedisConnection
ImportError: No module named htcommon.ht_redis] 
```

我还设置了路径，`/etc/environment`也设置了`.bashrc`.

下面是我的运行脚本。

```
#!/bin/sh
exec 2>&1
exec export PYTHONPATH=$PYTHONPATH:/home/ubuntu/workspace/htFrontEnd/heythat
exec export PYTHONPATH=$PYTHONPATH:/home/ubuntu/workspace/htFrontEnd/heythat/htanalytics
exec /usr/bin/python /home/ubuntu/workspace/htFrontEnd/htanalytics/ht_rpc_server.py >> /tmp/ht_rpc_server.log 2>&1
root@aws-rpc-server-east-staging-20130203070552:/etc/sv# 
```

当我从命令行运行该过程时，我没有遇到任何问题并且它可以工作。

```
/usr/bin/python /home/ubuntu/workspace/htFrontEnd/heythat/htanalytics/ht_rpc_server.py 
```

为什么runit不起作用？为什么找不到路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T22:57:15.387

看起来这个脚本有一些潜在的问题。我不认为“出口”可以“执行”。至少，它在我的 bourne 版本中失败了。exec 命令用被调用的命令替换当前进程（你的脚本），除非被调用的命令失败，否则它不会返回。因此，无论如何“执行”导出是没有意义的。它们也可以折叠成一行。所以，你的脚本应该看起来更像这样：

```
#!/bin/sh
export PYTHONPATH=$PYTHONPATH:/home/ubuntu/workspace/htFrontEnd/heythat:/home/ubuntu/workspace/htFrontEnd/heythat/htanalytics
exec /usr/bin/python /home/ubuntu/workspace/htFrontEnd/htanalytics/ht_rpc_server.py >> /tmp/ht_rpc_server.log 2>&1 
```

# windows-8 - Windows 8 磁贴不更新

> ID：14670541
> 
> 赞同：0
> 
> 时间：2013-02-03T08:00:21.283
> 
> 标签：windows-8, microsoft-metro, windows-store-apps

当我使用新项目按照教程进行操作时，以下代码有效：http: [//www.amazedsaint.com/2011/09/hellotiles-simple-c-xaml-application.html](http://www.amazedsaint.com/2011/09/hellotiles-simple-c-xaml-application.html)

但是，当我将相同的代码插入到我的真实项目中时，我无法更新应用程序的磁贴。

1.  我已经重建了包。
2.  我已卸载并重新部署该应用程序。
3.  我已更新宽徽标图像文件。
4.  我已经验证在创建新项目时相同的代码可以工作。
5.  我已按照链接教程的建议验证了应用清单。

这在一种解决方案中如何正常工作，但在另一种解决方案中却不行？

```
 public MainPage()
    {
        this.InitializeComponent();

        ClearTileNotification();
        SendTileTextNotification("Why isn't this working!");
    }

    void ClearTileNotification()
    {
        // the same TileUpdateManager can be used to clear the tile since 
        // tile notifications are being sent to the application's default tile
        TileUpdateManager.CreateTileUpdaterForApplication().Clear();
    }

    void SendTileTextNotification(string text)
    {
        // Get a filled in version of the template by using getTemplateContent
        var tileXml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileWideText03);

        // You will need to look at the template documentation to know how many text fields a particular template has       

        // get the text attributes for this template and fill them in
        var tileAttributes = tileXml.GetElementsByTagName("text");
        tileAttributes[0].AppendChild(tileXml.CreateTextNode(text));

        // create the notification from the XML
        var tileNotification = new TileNotification(tileXml);

        // send the notification to the app's default tile
        TileUpdateManager.CreateTileUpdaterForApplication().Update(tileNotification);
    } 
```

# android - Android中的音频指纹识别

> ID：14670543
> 
> 赞同：1
> 
> 时间：2013-02-03T08:00:41.013
> 
> 标签：android, arduino, audio-fingerprinting

我正在开发一个使用语音识别来控制 arduino 机器人的 android 项目。我想要一个离线语音识别单元来识别几个单词。因此想到了为此目的实施音频指纹识别。那么无论如何我可以用它来识别一些简单的单词吗？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T13:20:14.343

您需要实现的更多的是与音频识别/分类相关。使用音频指纹识别您将无法获得想要的结果。

假设您有 5 个单词，您需要记录这些单词（尽可能多地记录并尽可能由不同的人发音）。然后，您需要从这些录音中提取音频特征（例如 MFCC），并训练具有 5 个类（每个单词一个）的分类器（例如 SVM）。

# c++ - C++ 重载运算符 +

> ID：14670548
> 
> 赞同：2
> 
> 时间：2013-02-03T08:02:05.567
> 
> 标签：c++, memory, overloading, destructor

我正在尝试为我的班级重载 operator + ，如下所示：

```
MyClass MyClass::operator +(const MyClass& rval) const {
 MyClass ret(m_src); // m_src is member of MyClass: char* m_src;
 ret.Add(rval); // this->m_src + rval, this method work correctly 
 return ret; // so, in ret.m_src I have correct value
} // but after this C++ call destructor for ret 
```

析构函数：

```
delete[] m_src; // because in some methods I allocate dynamic memory 
```

因此，析构函数清除内存和函数返回垃圾。我怎样才能避免这种情况？如果我删除析构函数，函数工作正常，但在这种情况下我有内存泄漏:(

PS：不幸的是，我无法更改重载+的原型。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T08:03:41.410

您可以通过替换来避免这种情况：

```
char *m_src; 
```

经过：

```
std::string m_src; 
```

在你的课`MyClass`上。

作为`char *`一个班级成员，你得到的东西很容易搞砸手动内存管理，你只需用基于 RAII 的隐式内存管理替换它，`std::string`并为自己省去所有这些麻烦。`std::string`而这正是C++存在的目的。

* * *

如果你不能使用标准库`std::string`类（*虽然我根本不明白为什么*），你需要确保你遵循**[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:43:33.220

你需要的是一个复制构造函数`m_src`

```
MyClass::MyClass( const MyClass& ref ) {
    m_src = new char[/*get len from ref*/];
    memcpy( m_src, ref.m_src, /* len from ref */ * sizeof(char) );
} 
```

现在您可以更改`operator+`使用复制构造函数

```
MyClass MyClass::operator +(const MyClass& rval) const {
    MyClass ret(rval); // use copy constructor
    ret.Add(rval); // this->m_src + rval, this method work correctly 
    return ret; // so, in ret.m_src I have correct value
} 
```

# c# - 网络响应不返回实际网页源

> ID：14670554
> 
> 赞同：1
> 
> 时间：2013-02-03T08:03:41.073
> 
> 标签：c#, httpwebrequest, httpwebresponse

几天前，我成功地从[http://www.kse.com.pk/phps/mktSummary.php](http://www.kse.com.pk/phps/mktSummary.php)链接提取网页源，现在当我尝试做同样的事情时，它返回以下响应

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><meta http-equiv="Content-Script-Type" content="text/javascript"><script type="text/javascript">function setCookie(c_name, value, expiredays) { var exdate = new Date(); exdate.setDate(exdate.getDate()+expiredays); document.cookie = c_name + "=" + escape(value) + ((expiredays==null) ? "" : ";expires=" + exdate.toGMTString()) + ";path=/"; } function getHostUri() { var loc = document.location; return loc.toString(); } setCookie('YPF8827340282Jdskjhfiw_928937459182JAX666', 'xxx.xxx.xxx.xxx', 10); setCookie('DOAReferrer', document.referrer, 10); location.href = getHostUri();</script></head><body><noscript>This site requires JavaScript and Cookies to be enabled. Please change your browser settings or upgrade your browser.</noscript></body></html> 
```

以上链接用作本网站的框架：[http](http://www.kse.com.pk) : //www.kse.com.pk 我正在使用此代码

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.kse.com.pk/phps/mktSummary.php");
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
Stream resStream = response.GetResponseStream();
source = new StreamReader(resStream).ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:06:47.753

试试这个：

```
string webPage = "";
using (var wc = new WebClient())
{
    webPage = wc.DownloadString("http://www.kse.com.pk/phps/mktSummary.php");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T00:30:47.830

在 WebRequest 中添加这些行解决了我的问题

```
request.UserAgent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)";
request.Headers.Add("Cookie: YPF8827340282Jdskjhfiw_928937459182JAX666=xxx.xxx.xxx.xxx;"); 
```

替换`xxx.xxx.xxx.xxx`为你的ip地址

# ruby-on-rails - Rails 在哪里加载控制器、模型等？

> ID：14670561
> 
> 赞同：1
> 
> 时间：2013-02-03T08:04:31.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3

控制器、模型等从 active_support/dependencies.rb 加载。但是通过控制器和模型并要求dependencies.rb加载它们中的每一个的代码在哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:54:33.893

如果您将以下代码放在控制器文件中（最好在类之外）：

```
Rails.logger.info("*"*80)
Rails.logger.info(caller)
Rails.logger.info("*"*80) 
```

并在生产模式下启动您的应用程序，您可以看到导致控制器被急切加载的初始化调用的完整堆栈跟踪。在开发中，控制器不是预先加载的。

最关键的一行检查 Rails 配置并决定是否预先加载所有文件。

[railties-3.2.11/lib/rails/application/finisher.rb:53](https://github.com/rails/rails/blob/v3.2.11/railties/lib/rails/application/finisher.rb#L53)

这称为 railties [eager_load！](https://github.com/rails/rails/blob/v3.2.11/railties/lib/rails/engine.rb#L433)方法

# php - 使用 php 在 javascript 中读取 URL 内容

> ID：14670567
> 
> 赞同：0
> 
> 时间：2013-02-03T08:05:03.913
> 
> 标签：php, javascript, jquery

我想在 javascript 中读取 URL 的内容。该 URL 不在我的域中，因此我需要一个可以跨域访问的中间层。我尝试使用 PHP 函数读取 URL 并使用 jquery 将结果返回给 javascript，但它不起作用。

这是我的试验：

我创建了一个名为“phpjs_test.php”的 php 文件

```
<?php
function get_data(){
  $url='http://asmary.dreameg.com/texttable.txt';
  $ch = curl_init($url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
  $content = curl_exec($ch);
  $content = htmlspecialchars($content);
  curl_close($ch);
  $content = nl2br($content);
  return $content;
}
?> 
```

这是javascript代码：

```
<script>
        $(document).ready(function () {
            //httpQuery("http://asmary.dreameg.com/texttable.txt");
            getOutput();
        });

        function getRequest() {
            var req = false;
            try {
                // most browsers
                req = new XMLHttpRequest();
            } catch (e) {
                // IE
                try {
                    req = new ActiveXObject("Msxml2.XMLHTTP");
                } catch (e) {
                    // try an older version
                    try {
                        req = new ActiveXObject("Microsoft.XMLHTTP");
                    } catch (e) {
                        return false;
                    }
                }
            }
            return req;
        }

        function getOutput() {
            var ajax = getRequest();
            ajax.onreadystatechange = function() {
                if (ajax.readyState == 4) {
                    document.getElementById('output').innerHTML = ajax.responseText;
                }
            };
            ajax.open("GET", "phpjs_test.php", true);
            ajax.send(null);
        } 
```

我对 PHP 完全陌生，所以我什至不知道 PHP 函数是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:30:43.117

您应该只使用 jQuery ajax 方法而不是创建 XMLHTTPRequest，您不必费心为 IE 添加更多代码，而且您已经加载了 jQuery 库。此外，如果您在 PHP 文件中将标头设置为 Allow-Origin-Access 并指定您请求的其他域，那么您可以发出 AJAX 请求并获得响应，否则它将不返回任何内容或在您的开发工具网络选项卡中返回将显示 403 - 禁止。

[访问控制允许来源语法](https://stackoverflow.com/questions/12744278/access-control-allow-origin-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:22:53.917

将 PHP 文件更改为：

```
<?php
$url='http://asmary.dreameg.com/texttable.txt';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$content = curl_exec($ch);
curl_close($ch);
$content = explode('~',$content);

foreach($content as $c)
{
    $records[] = explode('|',$c);
}
$content = json_encode($records);
echo $content;
?> 
```

Javascript 会收到这样的 json 数组

```
[["1","name1","10","city1"],["2","name2","20","city2"],["3","name3","30","city3"],["4","name4","40","city4"],["5","name5","50","city5"],["6","name6","60","city6"],["7","name7","7","city7"],["8","name8","80","city8"],["9","name9","90","city9"],["10","name10","100","city10"],["11","name11","11","city11"],["12","name12","12","city12"],["13","name13","13","city13"],["14","name14","14","city14"],["15","name15","15","city15"],["16","name16","16","city16"],["17","name17","17","city17"],["18","name18","18","city18"],["19","name19","19","city19"],["20","name20","20","city20"],[""]] 
```

# kinect - Kinect 关节角度

> ID：14670568
> 
> 赞同：0
> 
> 时间：2013-02-03T08:05:04.350
> 
> 标签：kinect, angle

我在 Kinect 中工作，我试图找到关节之间的角度，例如：Z 和 Y 坐标中的肘部角度。我发现这段代码用于计算 X 和 Y 坐标中的角度，但效果不佳，因为我不知道“旋转偏移”是什么。 [http://www.embedded101.com/Blogs/JamesYWilson/tabid/70/entryid/167/Default.aspx](http://www.embedded101.com/Blogs/JamesYWilson/tabid/70/entryid/167/Default.aspx)

我读到了stackoverflow中的一些代码，例如波纹管，但效果不佳，我不明白他们如何不忽略z值。

```
/// <summary>
/// Return the angle between 3 Joints
/// Regresa el ángulo interno dadas 3 Joints
/// </summary>
/// <param name="j1"></param>
/// <param name="j2"></param>
/// <param name="j3"></param>
/// <returns></returns>
public static double AngleBetweenJoints(Joint j1, Joint j2, Joint j3)
{
    double Angulo = 0;
    double shrhX = j1.Position.X - j2.Position.X;
    double shrhY = j1.Position.Y - j2.Position.Y;
    double shrhZ = j1.Position.Z - j2.Position.Z;
    double hsl = vectorNorm(shrhX, shrhY, shrhZ);
    double unrhX = j3.Position.X - j2.Position.X;
    double unrhY = j3.Position.Y - j2.Position.Y;
    double unrhZ =j3.Position.Z - j2.Position.Z;
    double hul = vectorNorm(unrhX, unrhY, unrhZ);
    double mhshu = shrhX * unrhX + shrhY * unrhY + shrhZ * unrhZ;
    double x = mhshu / (hul * hsl);
    if (x != Double.NaN) 
    {
        if (-1 <= x && x <= 1)
        {
            double angleRad = Math.Acos(x);
            Angulo = angleRad *(180.0 / Math.PI);
        }
        else
            Angulo = 0;

    }
    else
        Angulo = 0;

    return Angulo;

}

/// <summary>
/// Euclidean norm of 3-component Vector
/// </summary>
/// <param name="x"></param>
/// <param name="y"></param>
/// <param name="z"></param>
/// <returns></returns>
private static double vectorNorm(double x, double y, double z)
{

    return Math.Sqrt(Math.Pow(x, 2) + Math.Pow(y, 2) + Math.Pow(z, 2));

} 
```

请问有人可以帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:56:17.630

我找到了我正在寻找的方法:)

```
public static double myMethodZY(Joint j1, Joint j2, Joint j3)
    {
        Vector3 a = new Vector3(0, j1.Position.Y- j2.Position.Y, j1.Position.Z- j2.Position.Z);
        Vector3 b = new Vector3(0, j3.Position.Y - j2.Position.Y, j3.Position.Z - j2.Position.Z);
        a.Normalize();
        b.Normalize();
        double dotProduct = Vector3.Dot(a,b);
        double angle= Math.Acos(dotProduct);
        angle =  angle * 180 / Math.PI;
        //angle = 180 - angle;
        return angle;
    } 
```

# sql - 如何优化这个动态 SQL 查询？

> ID：14670570
> 
> 赞同：0
> 
> 时间：2013-02-03T08:05:14.493
> 
> 标签：sql, oracle, select, union

我在使用以下查询时遇到了困难。我一直在尝试优化它，也许让它更具可读性。假设我有 3 个表 orders_returned、orders_completed、orders_delivered 以及匹配列 oder_id、customer_id。根据选择的选项，我可能需要检索已交付、然后返回并最终完成的订单（所有三个表中出现相同的 order_id），这些订单具有相同的 customer_id。此外，我可能只需要检索已交付和退回的订单，在这种情况下，我会*`AND order_id IN (SELECT order_id FROM ORDERS_COMPLETED)`*从*WHERE*子句中省略。例如，**获取客户 John 和 Tim 交付和退回的订单** 到目前为止，我的查询如下所示：

```
SELECT order_id
FROM
(
    SELECT order_id, customer_id
    FROM ORDERS_RETURNED
    UNION
    SELECT order_id, customer_id
    FROM ORDERS_COMPLETED
    UNION
    SELECT order_id, customer_id
    FROM ORDERS_DELIVERED
)
WHERE 
    customer_id IN ('customer1', 'customer2', ...)
    AND order_id IN (SELECT order_id FROM ORDERS_RETURNED)
    AND order_id IN (SELECT order_id FROM ORDERS_COMPLETED)
    AND order_id IN (SELECT order_id FROM ORDERS_DELIVERED) 
```

我还在学习 SQL，想看看是否有更好的选择。

**编辑**：我正在使用 Oracle 数据库。还有一个 Orders 表，它有不同的 order_ids 和一些其他不相关的列。它不存储 customer_ids。此外，订单可能出现在一个表中，也可能只出现在其中两个表中，所以我认为连接在这里没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T08:34:42.740

由于您有一个 Order 表，我假设您也将 CustomerId 存储在该表中。假设是这样，试试这个：

```
SELECT DISTINCT O.OrderId
FROM Orders O
   LEFT JOIN Orders_Completed OC ON O.OrderId = OC.OrderId
   LEFT JOIN Orders_Delivered OD ON O.OrderId = OD.OrderId
   LEFT JOIN Orders_Returned ORE ON O.OrderId = ORE.OrderId
WHERE O.CustomerId IN (...)
   AND OD.OrderId IS NOT NULL AND ORE.OrderId IS NOT NULL AND OC.OrderId IS NULL 
```

此特定查询将返回所有不同的订单，其中客户在 (...) 中的订单已交付和退回，但尚未完成。切换使用 IS NULL 和 IS NOT NULL 以获得所需的输出。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:22:34.087

您应该使用联接而不是内部/嵌套查询。

请尝试以下方法::

```
SELECT A.order_id, A.customer_id FROM ORDERS_RETURNED A 
INNER JOIN ORDERS_COMPLETED B ON A.order_id = B.order_id AND A.customer_id = B.customer_id
INNER JOIN ORDERS_DELIVERED C ON A.order_id = C.order_id AND A.customer_id = C.customer_id
Where A.customer_id IN ('customer1', 'customer2', ...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T14:12:54.330

你可以这样做：

```
with data
     as (select customer_id,
                order_id,
                nvl(max(case status when 'RETURNED' then 'Y' end), 'N') returned,
                nvl(max(case status when 'COMPLETED' then 'Y' end), 'N') completed,
                nvl(max(case status when 'DELIVERED' then 'Y' end), 'N') delivered
           from (select 'RETURNED' status, order_id, customer_id
                   from orders_returned
                 union all
                 select 'COMPLETED' status, order_id, customer_id
                   from orders_completed
                 union all
                 select 'DELIVERED' status, order_id, customer_id
                   from orders_delivered)
          group by customer_id, order_id)
select *
  from data
 where returned = 'Y'
   and delivered = 'Y'
   and customer_id in ('xx', 'xxx') ; 
```

或者

```
with data
     as (select customer_id,
                order_id,
                max(returned) returned,
                max(completed) completed,
                max(delivered) delivered
           from (select 'Y' returned, null completed, null delivered, order_id, customer_id
                   from orders_returned
                 union all
                 select null, 'Y', null, order_id, customer_id
                   from orders_completed
                 union all
                 select null, null, 'Y', order_id, customer_id
                   from orders_delivered)
          group by customer_id, order_id)
select * 
```

从返回的数据 = 'Y' 和交付 = 'Y' 和 customer_id in ('xx', 'xxx');

例如：[http ://sqlfiddle.com/#!4/3e2fb/2](http://sqlfiddle.com/#!4/3e2fb/2)

# c# - bindingsource 上的 CancelEdit 不会取消对象的所有已编辑字段

> ID：14670579
> 
> 赞同：4
> 
> 时间：2013-02-03T08:07:06.423
> 
> 标签：c#, data-binding, inotifypropertychanged, bindingsource, bindinglist

我有一个`bindingList<T>`bindinglist 的每个对象都实现`INotifyPropertyChanged`，在我的 WinForm 中我使用了一个 BindingSource 并设置它的数据源，`BindingList<T>`然后将一些文本框绑定到 BindingList 中每个项目的属性（我使用这个 winform 进行 CRUD 操作）：

```
tbName.DataBindings.Add("Text", myBindingSource, "Name", true);
tbFamily.DataBindings.Add("Text", myBindingSource, "Family", true); 
```

我还有一个取消编辑的按钮。但是当我正在编辑一条记录并单击取消按钮时，只有最后一次编辑的字段取消，我想取消整行并将所有值恢复为编辑前的值，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-08T02:19:37.157

要取消对 Current 对象所做的编辑`BindingSources`，BindingSource 中包含的类型需要实现[IEditableObject 接口](http://msdn.microsoft.com/en-us/library/system.componentmodel.ieditableobject%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:46:30.350

我有同样的问题没有任何答案。简单的方法是在按下取消按钮时重新加载 bindingSource。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T07:07:48.693

你不能通过 BindingSource.CancelEdit 来做到这一点。相反，您可以在编辑模式下取消绑定单个绑定控件（例如 TextBoxes），然后如果用户决定取消新输入的值，则再次将它们绑定到绑定源。否则，如果一切顺利并且用户决定保存它们，请将 BindingList 上的旧值替换为新值并保留它们。

# tomcat6 - 独立服务器的 Tomcat 6 配置

> ID：14670582
> 
> 赞同：0
> 
> 时间：2013-02-03T08:07:24.367
> 
> 标签：tomcat6

我有一个可以在 Windows 上运行我的 tomcat 6（本地）的网络应用程序。我有 bouhgt 专用服务器并在其上安装了 tomcat 6。Ubuntu 安装在服务器上。现在，如果我尝试输入我的 webapps http:\{ipaddress}{web-app} 浏览器会打开标题网页。然后出现用于输入日志名称和密码的对话窗口。但是在按下按钮登录浏览器时，Chrome 表示访问 servlet {servletname} 服务器返回状态代码：500 内部服务器错误。我应该如何为 Internet 配置 tomcat6？我认为 catalina 不会从 servlet 返回外部请求的答案。我想使用 tomcat6 作为独立服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:17:13.747

你的问题不清楚老兄！因为我的服务器上有有效的 IP，所以我已经配置了 tomcat 7 并且可以从 Internet 访问。尝试查看 tomcat 日志（通常在 /var/log/tomcat6(or 7)/...

# ruby-on-rails - Rails：DoubleRenderError - “在此操作中多次调用渲染和/或重定向”

> ID：14670585
> 
> 赞同：8
> 
> 时间：2013-02-03T08:07:40.400
> 
> 标签：ruby-on-rails, redirect, devise, super, internal-server-error

我想由`role_ids`用户重定向：

*   如果等于 2，则重定向到`workers_path`.
*   如果等于 1，则重定向到`tasksadmins_path`.

我定义了接下来的事情：

```
class ApplicationController < ActionController::Base
  include ApplicationHelper

  protect_from_forgery
  before_filter :authenticate_user!

  def stored_location_for(user)
    nil
  end

  def after_sign_in_path_for(user)
     if current_user.role_ids == [2]
       return redirect_to(workers_path)
     else
       return redirect_to (tasksadmins_path)
     end
  end
end 
```

但是当我登录时，我收到了错误：

```
AbstractController::DoubleRenderError in UserSessionsController#create

Render and/or redirect were called multiple times in this action. Please note 
that you may only call render OR redirect, and at most once per action. Also 
note that neither redirect nor render terminate execution of the action, so 
if you want to exit an action after redirecting, you need to do something 
like "redirect_to(...) and return".
Rails.root: /home/alon/alon/todolist

Application Trace | Framework Trace | Full Trace
app/controllers/user_sessions_controller.rb:5:in `create'
Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"jRNZkIXvToEhl9YVxaQoa2hLJiSaHI6JAdfpUNAQMJI=",
 "user"=>{"email"=>"worker216@gmail.com",
 "password"=>"[FILTERED]",
 "remember_me"=>"0"},
 "commit"=>"Sign in"} 
```

这是我的`user_session_controller.rb`：

```
class UserSessionsController < Devise::SessionsController
  include ApplicationHelper

  def create
      response = super

      require "uri"
      require "net/http"

      ## get the user id from the database
      user_id = session['warden.user.user.key'][1][0];

      ## get the row by id
      user = User.find(user_id)

      # ============================
      # Ensure that a user exists
      # ============================

      code, body = http_request(Net::HTTP::Put.new("/api/v1/users/external/#{user_id}"), email: user.email);
      if code != 200
         Rails.logger.error("Unable to register user #{current_user.email} at Licensario");
      end

      response
   end
end 
```

这是我的`routes.rb`：

```
TODOLIST::Application.routes.draw do

    devise_for :users, :controllers => { :sessions => 'user_sessions'} do
        get '/users/sign_out' => 'devise/sessions#destroy'
    end

    resources :tasksadmins
    resources :workers
    root to: "workers#index"
end 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-03T08:44:59.397

你不应该`redirect_to`在`after_sign_in_path_for`. 您应该返回网址：

```
 def after_sign_in_path_for(user)
     if current_user.role_ids == [2]
       return workers_url
     else
       return tasksadmins_url
     end
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:51:20.497

我添加到“创建”下一行：

**一开始，我写道：**

```
resource = warden.authenticate!(:scope => resource_name) 
```

**然后我在“创建”函数的末尾写道：**

```
sign_in(resource_name, resource)

if current_user.role_ids == [2]
   respond_with resource, :location => workers_path
else
   respond_with resource, :location => tasksadmins_path
end 
```

**所以我的创作看起来是这样的：**

```
class UserSessionsController < Devise::SessionsController
    include ApplicationHelper

    def create

        resource = warden.authenticate!(:scope => resource_name)

        require "uri"
        require "net/http"

        ## get the user id from the database
        user_id = session['warden.user.user.key'][1][0];

        ## get the row by id
        user = User.find(user_id)

        # ============================
        # Ensure that a user exists
        # ============================

        code, body = http_request(Net::HTTP::Put.new("/api/v1/users/external/#{user_id}"), email: user.email);
        if code != 200
           Rails.logger.error("Unable to register user #{current_user.email} at Licensario");
        end

        sign_in(resource_name, resource)

        if current_user.role_ids == [2]
           respond_with resource, :location => workers_path
       else
           respond_with resource, :location => tasksadmins_path
       end

    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-30T14:42:25.537

[我在使用devise](https://rubygems.org/gems/devise) gem 进行管理员帐户管理时遇到了这个问题，但我的是在生产服务器上。

> AbstractController::DoubleRenderError（在此操作中多次调用渲染和/或重定向。请注意，您只能调用渲染或重定向，每个操作最多调用一次。另请注意，重定向和渲染都不会终止操作的执行，因此如果你想在重定向后退出一个动作，你需要做一些类似“redirect_to(...) and return”的事情。）：

问题是我想登录到管理仪表板，而不是在浏览器中输入**admin_dashboard** URL，我在浏览器中输入了**admin_sign_in** URL，同时，一个管理员帐户已经登录。所以当我尝试登录时它不起作用，因为我无法同时将 2 个帐户登录到管理仪表板。

**这是我解决它的方法：**

1.  在浏览器中输入管理仪表板的 URL，这使我登录到以前的帐户
2.  从管理仪表板上的帐户注销
3.  然后使用我想要的帐户登录到管理仪表板。

就这样。

**我希望这有帮助**

# x86 - 使用 Intel Last Branch Record 的开销是多少？

> ID：14670586
> 
> 赞同：11
> 
> 时间：2013-02-03T08:07:47.453
> 
> 标签：x86, intel, trace, branch-prediction, intel-pmu

Last Branch Record 是指寄存器对 (MSR) 的集合，这些寄存器对 (MSR) 存储与最近执行的分支相关的源地址和目标地址。[http://css.csail.mit.edu/6.858/2012/readings/ia32/ia32-3b.pdf](http://css.csail.mit.edu/6.858/2012/readings/ia32/ia32-3b.pdf)文档有更多信息，以防您感兴趣。

*   a) 有人可以知道 LBR 减慢了常见程序的程序执行速度 - CPU 和 IO 密集型吗？
*   b) 当 LBR 跟踪打开时，分支预测是否会关闭？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T13:04:07.480

[英特尔代码执行跟踪资源](http://multicoreinfo.com/research/intel/Code.pdf)一文（Arium 工作人员、Craig Pedersen 和 Jeff Acampora，2012 年 4 月 29 日）列出了分支跟踪的三种变体：

*   **DebugCtlMSR 和相应的 LastBranchToIP 和 LastBranchFromIP MSR 以及 LastExceptionToIP 和 LastExceptionFromIP MSR 中的**最后一个分支记录 (LBR)标志。****

***   **使用缓存作为 RAM 或系统 DRAM 的**分支跟踪存储 (BTS) 。****

    ***   **架构事件跟踪 (AET)**从 XDP 端口捕获并存储在外部连接的 In-Target Probe 中。**** 

 ****如第 2 页所述，**LBR**将信息保存在 MSR 中，“不会妨碍任何实时性能”，但仅对非常短的代码有用（“有效的跟踪显示非常浅，通常可能只显示数百条指令。”） . 仅保存有关 4-16 个分支的信息。

**BTS**允许捕获多对分支“From”和“To”，并将它们存储在高速缓存（Cache-as-RAM，CAR）或系统 DRAM 中。在 CAR 的情况下，跟踪深度/长度受缓存大小（以及一些常数）的限制；DRAM 走线长度几乎是无限的。该论文估计，由于额外的内存存储，BTS 的开销从 20% 到 100% 不等。Linux 上的 BTS 很容易与提议的[perf 分支记录](http://events.linuxfoundation.org/slides/2011/linuxcon-japan/lcj2011_nagai.pdf)（还没有在 vanilla 中）或[btrax 项目](http://btrax.sourceforge.net/)一起使用。`perf branch`演示文稿给出了一些关于 BTS 组织的提示：有 BTS 缓冲区，其中包含“from”、“to”字段和“predicted flag”。因此，使用 BTS 时不会关闭分支预测。此外，当 BTS 缓冲区被填充到最大大小时，会产生中断。内核中的 BTS 处理模块（perf_events 子系统或 btrax 内核模块）应将数据从 BTS 缓冲区复制到其他位置以防此类中断。

因此，在 BTS 模式下，有两个开销来源：缓存/内存存储和来自 BTS 缓冲区溢出的中断。

**AET**使用外部代理来保存调试和跟踪数据。该代理通过扩展调试端口 (XDP) 连接并与目标内探针 (ITP) 连接。根据本文，AET 的开销“会对系统性能产生重大影响，可能会大几个数量级”，因为 AET 可以生成/捕获更多类型的事件。但是收集的数据存储在调试平台的外部。

论文的“摘要”说： </p>

> **LBR**没有开销，但非常浅（4-16 个分支位置，具体取决于 CPU）。跟踪数据在复位后立即可用。
> 
> **BTS**更深，但对 CPU 性能有影响，并且需要板载 RAM。一旦 CAR 初始化，跟踪数据就可用。
> 
> **AET**需要特殊的 ITP 硬件，并且并非在所有 CPU 架构上都可用。它具有在板外存储跟踪数据的优点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-10T21:12:03.233

这是一个老问题（也有老答案），但它确实出现在今天的搜索中。

在 2021 年，您要用于硬件跟踪的是英特尔® 处理器跟踪 (IPT)。
请记住，问题显然与 Intel/AMD 台式机 CPU 有关。AFAIK 有类似的 ARM CPU 解决方案，此处未介绍。

我在 Windows 中使用自定义驱动程序同时使用了 LBR 和 IPT 设置，而后者是迄今为止开销最少的。某处以两位数或更少百分比的方式进行进程跟踪。

同样在答案中说：

> LBR 没有开销，..

从技术上讲是正确的，但说起来不切实际，因为实际读取存储寄存器时会产生开销。通常，您会将其设置为在每个分支记录上中断。因此，我们正在讨论为每个通过陷阱/单步标志激活线程的单个分支（调用、jmp、jcc、int 等）指令处理中断/异常/陷阱的开销。

IPT 的最大缺点是仅在 Intel CPU 上可用，而 LBR 功能也由 AMD CPU 支持。

不幸的是，AFAIK（上次我检查过）IPT 功能尚不被任何商业 VM 软件支持。这意味着您很可能只能在直接硬件上进行 IPT 会话。除非您真的想在 VM 中进行跟踪，否则这没什么大不了的。就此而言，LBR 可能具有相同的限制。

Some Linuxes have native kernel support for IPT. A good starting point for Windows is Alex Ionescu's WinIPT project:
[https://ionescu007.github.io/winipt/](https://ionescu007.github.io/winipt/)****

# replaceall - Mathematica 替换

> ID：14670591
> 
> 赞同：0
> 
> 时间：2013-02-03T08:08:35.990
> 
> 标签：replaceall

我试图用函数替换一些表达式，但有些术语没有改变。输入：

b + 2 *a /。(b*m_ + a*n_) :> chi[m, n]

出去

2 a + b

但如果不是 1 我放 3*b

3 * b + 2 * a /。(b*m_ + a*n_) :> chi[m, n]

输出是正确的

志[3, 2]

诡异的

如果我写 1.*b 效果会更好

(1.*b + 2 *a) /. (b*m_ + a*n_) :> chi[m, n]

出去

智[1., 2]

必须做什么样的假设才能避免提出这一点？是的，最简单的方法是从模式中消除 1，但在这个例子中，我简化了太多只是为了解决问题。我的情况是如何写出大约五十个这样的形式的总和

Sqrt[Pi] *V* (m*b^2+n*a^2)^(-3/2),

其中 m 和 n 是整数和 b,a,V 常数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:49:17.463

子表达式`b`与模式不匹配`b*m_`。要查看这一点，请检查`FullForm`of`b`和 of，例如`2*b`. Mathematica 模式匹配句法形式，而不是语义。你和我可能知道这和Mathematica 不`b`一样`b*1`，或者至少在将表达式匹配到模式时不应用它。

**编辑**

不，`1*b`也不起作用，Mathematica 会`b`在模式匹配之前对其进行评估。的规则`1.0*b`显然是不同的。有多种方法可以编写模式来匹配`1*b`，最简单的方法是编写单独的规则，例如`{b,a*n_}->chi[1,n]`.

# jquery - 在单个提交事件单击时显示两个警报框

> ID：14670592
> 
> 赞同：0
> 
> 时间：2013-02-03T08:08:43.073
> 
> 标签：jquery, html

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js" type="text/javascript"></script>
<script>    
    $('#form_131 > input[type=submit]').click(function(){       
        alert('Jquery alert');
    });

</script>
<script type="text/javascript" charset='utf-8'> 
function testrun()
{
    alert('Test run javascript');
}
</script>
</head>
<body>
<form id="form_131">    
    <input type="text">
    <input type="submit" onclick="testrun()">
</form>
</body>
</html> 
```

我有一个类似这样的代码。我无法控制提交按钮的 onclick 事件，因为它是由 CMS 在服务器端自动生成的。我需要为该框添加点击事件并向文本添加一些验证。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:13:37.383

你可以做两件事：

从以下位置调用您的验证函数`testrun`：

```
<script>    
function validateText(){      
   alert('Jquery alert');
}
function testrun()
{
    validateText();
    alert('Test run javascript');
}
</script> 
```

或准备就绪功能：

```
<script>   
 $(document).ready(function(){ 
    $('#form_131 > input[type=submit]').click(function(){       
      alert('Jquery alert');
   }); 
});
function testrun()
{       
    alert('Test run javascript');
}
</script> 
```

# css - Wordpress Map 导致填充问题

> ID：14670593
> 
> 赞同：0
> 
> 时间：2013-02-03T08:09:01.560
> 
> 标签：css, wordpress, map, padding

[http://www.betterboink.com/?page_id=2](http://www.betterboink.com/?page_id=2) -> 在这个带有地图的页面上似乎有一些重叠，这会破坏 iPad 上的滚动。有没有办法解决这个问题？由于某种原因，它在#page 布局的右侧添加了空间，但它只发生在具有地图的页面上。

这是我在 iPad 上看到的图像的链接以及我希望解决的间距问题...

[http://imgur.com/o4vHz2J](http://imgur.com/o4vHz2J)

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:20:47.193

我认为你的问题来自

```
#address_search {
    width: 600px;
} 
```

如果您从该元素中删除宽度并添加`float: right; margin: 0;`到`#address_search .search_item INPUT`它可能会被修复。

# mongodb - 使用 shell 从 Mongodb 中删除记录

> ID：14670595
> 
> 赞同：6
> 
> 时间：2013-02-03T08:09:13.413
> 
> 标签：mongodb

我有一个包含学生数据的简单集合，我需要根据一些参数删除一些记录。我从 mongoshell 执行了以下操作

```
for(i=0;i<200;i++) {
    var rec = db.grades.find({student_id:i,type:'homework'}).sort({score:1}).limit(1)
    db.grades.remove(rec)
} 
```

理想情况下，它应该删除所有 student_ids 类型作业的最低分数。显然，只有 find 参数中的最后 2 条记录（student_id：199）被清除，其余的仍然存在。

```
db.grades.find({student_id:10,type:'homework'}).sort({score:1}).limit(1)
{ "_id" : ObjectId("50906d7fa3c412bb040eb5a1"), "student_id" : 10, "type" : "homework", "score" : 6.094174990746648 } 
```

是因为 JS / Mongo 的异步特性吗？解决相同问题的其他替代方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T03:58:17.483

`rec`不是文档，*它*是数据库游标。您实际上需要从中获取文档：

```
for(i=0;i<200;i++) {
    var cur = db.grades.find({student_id:i,type:'homework'}).sort({score:1}).limit(1);
    var actualDoc = cur.next();
    db.grades.remove(actualDoc);
} 
```

否则，您将尝试根据光标属性删除文档，这不是您想要的。另请参阅[http://docs.mongodb.org/manual/core/read-operations/#cursors](http://docs.mongodb.org/manual/core/read-operations/#cursors)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T08:39:55.783

您需要先查询集合并返回集合中的所有文档，然后再遍历它，例如

```
var collection = grades.find({'type':'homework'}).sort({'student_id',1, 'score':1}) 
```

然后遍历变量“集合”中的记录，删除得分最低的文档。您也有一个问题，将 i 作为值分配给 student_id 而不分配集合中的文档。根据您的代码，您正在根据学生 ID 遍历集合。您无需执行此操作即可遍历集合。只需查询所有作业类型的记录，然后根据参数删除。如果您需要将 student_id 的值分配给一个变量（提示：作为删除记录的参数），只需将 student_id 分配给一个变量，如下所示：

```
var id = ['student_id'] 
```

或者（这就是我这样做的方式），您可以先按 student_id 对所有记录进行排序，然后按分数排序。分数应按降序排列。

然后使用 for 循环遍历集合，并在 student_id 更改时删除记录。要识别 student_id 的变化，将该值存储在循环外和循环内的变量中（作为 2 个单独的变量），然后在循环遍历集合时更新它们。然后比较变量，如果变量的值不相等，则删除记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T02:05:29.187

```
var oldid=-1;
var cursor=db.grades.find({'type':'homework'}).sort({'student_id':1,'score':1});
while (cursor.hasNext()) { 
    var doc = cursor.next(); 
    var id = doc['student_id']; 
    if (oldid!=id) 
    {
        db.grades.remove(doc);
        oldid=id; 
    } 
 } 
```

# mysql - 在 MySQL 数据库中存储文件路径并使用 vb2008 检索它

> ID：14670600
> 
> 赞同：0
> 
> 时间：2013-02-03T08:09:54.193
> 
> 标签：mysql, vb.net, picturebox

我有一个带有列表框和图片框的表单。lisbox 使用数据库中的文件名填充。如果用户从列表框中选择一项，则图片应出现在图片框上。在 MySQL 数据库中，我有一个 Pix 表，其中包含字段`pixName(varchar)`, `pLocation(varchar)`。在 pLocation 我保存了图片的文件路径。

```
Call Connection()
    With Me
        STRSQL = "Select pLocation From Pix where pixName = " & lstPix.SelectedItem & "'"
        Try
            myCmd.Connection = myConn
            myCmd.CommandText = STRSQL
            reader = myCmd.ExecuteReader
            If reader.Read Then
                Dim path = reader.GetString(0)
                picBox.ImageLocation = path
            End If
        Catch ex As Exception
            MsgBox("no picture")
        End Try
    End With 
```

运行它时没有错误，但是当我在列表框中选择一个时，它显示“无图片”。我怎样才能让它工作？另外，我可以使用相同的代码在表单内以 wmp 播放视频吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:33:44.460

很明显，您的查询缺少撇号。将查询更改为：

```
STRSQL = "Select pLocation From Pix where pixName = '" & lstPix.SelectedItem.ToString() & "'" 
```

更好的解决方案是改用参数：

```
STRSQL = "Select pLocation From Pix where pixName = @pixName"
myCmd.Parameters.AddWithValue("@pixName",lstPix.SelectedItem.ToString()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T08:29:38.373

用这个

```
dim kol as string

OpenFileDialog1.ShowDialog()

kol = OpenFileDialog1.FileName.Replace("\", "\\")

TextBox1.Text = kol 
```

mysql（插入和更新代码）

# r - 在箱线图中绘制一个新的点值。R和ggplot2

> ID：14670603
> 
> 赞同：-1
> 
> 时间：2013-02-03T08:10:27.530
> 
> 标签：r, ggplot2, boxplot

我有一个名为 msq 的简单数据框：

```
 sex wing    index
1   h   54      67.4
2   m   60.5    67.9
3   m   60      64.5
4   m   59      66.6
5   m   63.5    63.3
6   m   63      66.7
7   m   61.5    71.8
8   m   62      67.9
9   m   63      67.8
10  m   62.5    72.7
11  m   61.5    70.3
12  h   54.5    70.7
13  m   60      61.1
14  m   63.5    50.9
15  m   63      72.1 
```

我的意图是用 ggplot 制作一个箱线图，我使用这个代码可以正常工作：

```
gplot(msq, aes("index",index))+ geom_boxplot (aes(group="sex")) 
```

然后绘制一个应该在图中独立存在的异常值（值 73.9）。问题是，如果我将它包含在数据集中，箱线图会“吸收”它，从而使错误线更长......我一直在寻找 Hmisc 和 stat_summary 但我无法得到任何明确的想法。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T09:28:29.123

您可以使用`geom_point`将点添加到使用`ggplot2`.

```
library(ggplot2)
ggplot(msq, aes(sex, index)) +   # Note. I modified the aes call
  geom_boxplot() +
  geom_point(aes(y = 73.9)) # add points 
```

![在此处输入图像描述](../Images/4b0a27ad02aec22533f70cfa780199bd.png)

# python - 在python中创建简单的字典

> ID：14670604
> 
> 赞同：0
> 
> 时间：2013-02-03T08:10:35.937
> 
> 标签：python, dictionary

> 人1酒2
> 
> 人1酒1
> 
> 人2酒1
> 
> 人2酒2
> 
> 人2酒3
> 
> 人2酒4
> 
> 人2酒5

以上是我在单独的文本文件中的输入。我想在 Python 中创建以下输出字典：

> 输出 = {'wine1': ['person1', 'person2'], 'wine2':['person1','person2'], 'wine3':['person2'], 'wine4':['person2'] , 'wine5':['person2'] }

如何创建此输出？

我做错了什么：

```
def read(text): 
    wine_wishes = dict() 
    final_assignments = dict()
    with open(text) as infile:
        for line in infile: 
            line = line.split() 
            try: 
                wine_wishes[line[1]]
            except: 
                wine_wishes[line[1]] = [line[0]] 
```

结果我得到了不正确的输出： {'wine4': ['person2'], 'wine5': ['person2'], 'wine1': ['person1'], 'wine2': ['person1'], '酒3'：['person2']}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T08:25:36.530

你可以使用[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

d = defaultdict(list)
for line in infile:
    if line.strip(): # skip blank lines
        person, wine = line.split()
        d[wine].append(person)

from pprint import pprint
pprint(dict(d)) 
```

### [输出](http://ideone.com/4o9ygv)

```
{'wine1': ['person1', 'person2'],
 'wine2': ['person1', 'person2'],
 'wine3': ['person2'],
 'wine4': ['person2'],
 'wine5': ['person2']} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:25:24.510

您需要使 dict 中的每个值成为一个列表，*并在每个键的第一个之后附加条目到字典中已经存在的列表中*。

```
def read(text): 
    wine_wishes = dict() 

    with open(text) as infile:
        for line in infile: 
            line = line.split()
            if line[1] not in wine_wishes:
                wine_wishes[line[1]] = []

            wine_wishes[line[1]].append(line[0]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T08:29:17.657

正如 JF Sebastian 提到的，`collections.defaultdict`可以用来完成

> D.get(k,d) 如果 k 不在 D 中，则设置 D[k]=d

但是有一种方法`setdefault`，`dict`它具有相同的效果。

```
 for line in infile: 
        line = line.split()
        wine_wishes.setdefault(line[1], []).append(line[0]) 
```

编辑：这与这个问题无关。我刚刚发现`split`是 nut 完全理解。

> 分裂（...）
> 
> > S.split([sep [,maxsplit]]) -> 字符串列表
> > 
> > 返回字符串 S 中的单词列表，使用 sep 作为分隔符字符串。如果给出了 maxsplit，则最多完成 maxsplit 拆分。**如果 sep 未指定或为 None，则任何空白字符串都是分隔符，并从结果中删除空字符串**。

因此，我们不需要使用`strip`删除前导和尾随空格或将空格分隔符传递给`split`. `line.split()`足够的。

# c - 在 pthread create 中传递的结构参数被破坏

> ID：14670606
> 
> 赞同：0
> 
> 时间：2013-02-03T08:10:55.113
> 
> 标签：c, multithreading, gnu

我有一个名为 command 的结构，看起来像这样。枚举中的第一个值是 AND_COMMAND

```
struct command
{
  enum command_type type;
  int status;
  char *input;
  char *output;
  union
  {
    struct command *command[2];
    char **word;
    struct command *subshell_command;
  } u;
}; 
```

当我调用 pthread_create 时，我以 command_t 的形式向它传递一个命令（即强制转换为 (void *)）。

```
typedef struct command *command_t; 
```

我的线程采用这个（void *）command_t，将其转换回（command_t）并尝试使用该结构。

```
void execute_thread(void *c) {
  command_t command = (command_t) c; 
```

但是，当我将结构传递给 execute_thread 时，第一个值被清零。如果我有一个 SIMPLE_COMMAND 的 command_type 和 -1 的状态，当它被传递到线程时 command_type 是 AND_COMMAND 和 0 的状态。但是，结构中的其他值都没有改变。更奇怪的是何时发生这种数据修改。我能够在 gdb 中捕捉到这种现象：

```
445   command_t command = (command_t) c;
(gdb) p *((command_t) c)
$6 = {type = SIMPLE_COMMAND, status = -1, input = 0x605370 "abc", output = 0x605390 "def", u = {
command = {0x6052e0, 0x0}, word = 0x6052e0, subshell_command = 0x6052e0}}
(gdb) n
(gdb) p *((command_t) c)
$7 = {type = AND_COMMAND, status = 0, input = 0x605370 "abc", output = 0x605390 "def", u = {command = {
  0x6052e0, 0x0}, word = 0x6052e0, subshell_command = 0x6052e0}} 
```

似乎 c 指向的结构在将其转换之前不会改变，`(command_t) c;`我完全被这种行为弄糊涂了。我不认为投射指针会改变它指向的值。有人可以指出，哈哈，这里可能发生了什么？我会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:13:26.727

> 更奇怪的是何时发生这种数据修改。我能够在 gdb 中捕捉到这种现象：

这里的措辞让我相信问题不是确定性的。即，有时它不会发生，或者在您碰巧在问题中的gdb中捕获时它不会发生。

如果是这种情况（即使不是），我怀疑您的问题是您正在丢弃分配给`struct command`主线程（或任何创建线程的`execute_thread()`线程）中的内存。您没有向我们展示线程创建代码，但是如果您使用局部变量并将其地址传递给创建的线程，那么确保局部变量的生命周期不会在第二个线程之前到期可能会很棘手开始使用它。您可能希望传入`struct command`已在堆上分配的 a：

```
struct command* thread_data = malloc(sizeof(struct command));
struct_command_init(thread_data);

pthread_create(/* ... */, thread_data);
// ... 
```

并在`execute_command()`线程中：

```
void* execute_command(void* p)
{
    struct command cmd = *(struct command*)p;
    free(p);

    // use cmd to get at the structure data passed in...
} 
```

请记住，各种指针引用的数据`struct command`也需要明确管理它们的生命周期和所有权。

# c# - 未反映 SQL Server CE 3.5 数据库 .sdf 上的更新

> ID：14670608
> 
> 赞同：0
> 
> 时间：2013-02-03T08:11:28.633
> 
> 标签：c#, .net, sql-server-ce

我正在使用 C# VS2008，我查看了与此相关的其他问题。

我的问题是使用表适配器和数据集对 SQL Server CE 数据库进行的任何更新都不会反映在数据库文件中。

是的，我正在查看`Root/bin/debug/xyz.sdf`文件

是的，我也尝试过`DS.AcceptChanges()`方法

我正在使用 SdfBrowser（免费软件）软件打开相关的 sdf 文件

什么可能出错？

```
//Instantiate dataset and TA
    ztATdbLocalDataSet1 assetInfoDS = new ztATdbLocalDataSet1();
    ztATdbLocalDataSet1TableAdapters.AssetInfoDataTableTableAdapter assetInfoTAdpt =     new ZTraka_App.ztATdbLocalDataSet1TableAdapters.AssetInfoDataTableTableAdapter();

try
            {
                assetInfoTAdpt.UpdateAssetMain(tag_id, asset_location, asset_category, asset_desc, asset_tag_created, asset_model, asset_quantity, asset_image, asset_comments, asset_id);
                assetInfoTAdpt.UpdateAssetInfoStat(tag_id, asset_lastchecked, asset_lastloc, asset_maint_due, tag_expiry, asset_status, asset_alarms, asset_value, asset_id);
                //assetInfoDS.AcceptChanges();

                textBlockTagNotifyMessage.Text = "Asset Info saved !";
                textBlockSearchWarning.Visibility = Visibility.Hidden;
             } 
```

编辑：更新...我刚刚发现我在更新方法中传递的字符串参数以某种方式神秘地将其转换为 AnsiString（这是 SQL CE 数据库的无效数据类型）。好的。我找到了问题，现在有什么解决方案？

# c++ - C++ 私有和受保护的虚方法

> ID：14670612
> 
> 赞同：10
> 
> 时间：2013-02-03T08:12:10.587
> 
> 标签：c++

似乎最好将虚拟方法设为私有，以便将以下两个客户端的接口分开 - 1\. 实例化对象并调用方法的客户端 2\. 从类派生并可能想要覆盖该方法的客户端。简单地说——第一个客户端不需要知道一个方法是否是虚拟的。他将调用基类公共非虚拟方法，而后者又将调用私有虚拟方法。例如，请参见下面的代码。

现在，在虚拟方法需要对其基类的相应虚拟方法进行超级消息传递的情况下，例如 Save 方法 - 它必须通过继承链中的所有虚拟方法才能保存对应于每个级别的数据派生——我们别无选择，只能使用受保护的虚拟方法——除非有一种方法可以保证在不使用超级消息传递的情况下在所有派生级别保存数据（我不知道）。

我想知道上述推理是否正确。

确保使用滚动条查看整个代码。

```
#include <iostream>
using namespace std;

class A {

    string data;    

protected:

    virtual void SaveData()= 0;

public:

    A():data("Data of A"){}

    void Save(){
        cout << data << endl;        
        SaveData();
    }
};

class B : public A {

    string data;

protected:

    virtual void SaveData() { cout << data << endl;}

public:

    B():data("Data of B") {}

};

class C : public B {

    string data;
protected:

    virtual void SaveData() {
        B::SaveData();
        cout << data << endl;
    }

public:

    C():data("Data of C") {}
};

int main(int argc, const char * argv[])
{
    C c;
    c.Save();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T08:45:52.783

是的，如果您需要调用另一个类的 SaveData，则需要从该类访问它 - 所以`public`或`protected`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-03T14:37:37.153

你完全正确：

*   NVI（非虚拟接口）要求`virtual`方法不是`public`
*   调用基类方法要求它不`private`

因此`protected`是显而易见的解决方案，至少在 C++03 中是这样。不幸的是，这意味着您必须相信派生类开发人员不会忘记调用“super”。

* * *

在 C++11 中，您可以使用`final`来防止派生类覆盖`virtual`方法；这意味着尽管您被迫引入一个新的钩子，例如：

```
class Base {
public:
    void save() {
        // do something
        this->saveImpl();
        // do something
    }
private:
    virtual void saveImpl() {}
};

class Child: public Base {
private:
     virtual void saveImpl() final {
         // do something
         this->saveImpl2();
         // do something
     }
     virtual void saveImpl2() {}
}; 
```

当然，每次都必须想出一个新名称是很麻烦的……但至少你可以保证它`Child::saveImpl`会被调用，因为它的任何子项都不能覆盖它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T08:53:03.883

很难说出您在问什么，但是从示例中，您不需要使方法受到保护。它实际上可以是私有的。有关细节的详细信息，请参阅这篇文章：[私有纯虚函数有什么意义？](https://stackoverflow.com/questions/3970279/what-is-the-point-of-a-private-pure-virtual-function).

只要您不从派生类（或外部类）调用私有成员，就可以了。覆盖私人成员是可以的。您可以覆盖父母的私人信息确实听起来很顽皮和错误，但是在 c++ 中您可以这样做。

以下应该没问题：

```
#include <iostream>
using namespace std;

class A {

    string data;    

private:

    virtual void SaveData()= 0;

public:

    A():data("Data of A"){}

    void Save(){
        cout << data << endl;        
        SaveData();
    }
};

class B : public A {

    string data;

private:

    virtual void SaveData() { cout << data << endl;}

public:

    B():data("Data of B") {}

}; 
```

# android - Android App 中 MySQL 查询的错误返回值

> ID：14670620
> 
> 赞同：0
> 
> 时间：2013-02-03T08:13:18.050
> 
> 标签：android, mysql, servlets, android-arrayadapter

我正在尝试构建一个非常简单的 android 应用程序，该应用程序在使用 MySQL 查询从 MainActivity 类接收到数据库的值后在 GridView 中显示一些数据。我已经在 MySQL 服务器上测试了查询，它们是正确的，但是当我在应用程序中运行它们时，它们都只返回*一行*，而实际上每次运行时 winScheduleQuery 和 lossScheduleQuery 都应该返回 0 到 10 之间的任何位置行左右，这对于 teamQuery 结果的每一行。因此，显然正在发生一些奇怪的事情，但我无法弄清楚。这是运行查询的活动类....

```
public class ViewTeamsActivity extends Activity {

      ArrayList<String> scheduleData = new ArrayList<String>();
      String dcode;

      private void initClasses(String dcode){
        String teamResult = "";
        MySQLClient mc = 
            new MySQLClient("http://someServletURL/servlet/EMBLServices");
        try {
          String teamQuery = 
            "SELECT coach, tno FROM team WHERE dcode='" + dcode + "'";

          teamResult = mc.runSQL(teamQuery);
          String[] rows = teamResult.split("\n");
          Log.d("NUMBER_OF_COACHES", rows.length + "");
          String winResult = "";
          String lossResult = "";
          for(int i = 1; i < rows.length; i++){
            String[] cols = rows[i].split(",");
            String winScheduleQuery = 
                      "(SELECT * FROM schedule WHERE dcode='" + dcode + "' AND hometeam=" + cols[1] + 
                            " AND (homescore > awayscore))" +
                            " UNION ALL " +
                            "(SELECT * FROM  schedule WHERE dcode='" + dcode + "' AND awayteam=" + cols[1] + 
                            " AND (awayscore > homescore))";

            String lossScheduleQuery = 
                      "(SELECT * FROM schedule WHERE dcode='" + dcode + "' AND hometeam=" + cols[1] + 
                      " AND (homescore < awayscore))" +
                      "UNION ALL" +
                      "(SELECT * FROM schedule WHERE dcode='" + dcode + "' AND awayteam=" + cols[1] + 
                      " AND (awayscore < homescore))";

            winResult = mc.runSQL(winScheduleQuery);
            lossResult = mc.runSQL(lossScheduleQuery);
            String[] winRows = winResult.split("\n");
            String[] lossRows = lossResult.split("\n");
            scheduleData.add(cols[0] + "");
            scheduleData.add(winRows.length + "");
            scheduleData.add(lossRows.length + "");

            Log.d("Win query", winScheduleQuery);
            Log.d("Loss query", lossScheduleQuery);

          }
        } catch (Exception e) {
            Log.d("MyAppException",e.getMessage());
          } 

      }

      /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.activity_view_teams);

        if (android.os.Build.VERSION.SDK_INT > 9) {
          StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
          StrictMode.setThreadPolicy(policy);
        }

        dcode = getIntent().getStringExtra("DCODE");
        initClasses(dcode);

        GridView scheduleDataGridView = (GridView)findViewById(R.id.gridview);
        ArrayAdapter<String> teamArrayAdapter = 
          new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, scheduleData);    
        scheduleDataGridView.setAdapter(teamArrayAdapter);
      }
} 
```

SQLClient 类使用换行符 (\n) 拆分它从 servlet 接收的行，这就是为什么我将 lossResult、winResult 和 teamResult 拆分为 '\n' 以将查询结果分成行。日志报告“NUMBER_OF_COACHES”是正确的，所以 teamQuery 工作正常，问题是 lossScheduleQuery 和 winScheduleQuery。日志还报告 winScheduleQuery 和 lossScheduleQuery 正如我认为的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:09:02.463

我想到了。我正在使用由其他人编写的 MySQLClient 类，由于某种原因，它不接受用于选择语句的大括号......

# c# - 如何将动态 DataTable 绑定到 DataList？

> ID：14670623
> 
> 赞同：1
> 
> 时间：2013-02-03T08:13:51.027
> 
> 标签：c#, asp.net, datalist

**后面的代码：**

```
DataTable dt = new DataTable();
dt.Columns.Add(new DataColumn("Rego No", typeof(string)));
foreach (var item in list)
{ 
    dt.Columns.Add(new DataColumn(string.Format("{0:dd/MM}",item),typeof(string)));
    //enter code here 
}
dlcalender.DataSource = dt;
dlcalender.DataBind(); 
```

**ASPX：**

`DataTable`列像日期一样是动态的。我正在绑定，`DataTable`但没有显示任何内容。

你能指导我如何显示标题列表`DataTable`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:18:50.687

问题是您已经创建了列，但没有在 DataTable 中插入任何行，这就是为什么在浏览器中运行站点时看不到任何结果的原因

我认为您还应该了解[DataList](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist%28v=vs.100%29.aspx)控件在 ASP.NET 中的工作原理。

您需要为只会出现**一次**的信息创建一个 HeaderTemplate并为将要**重复**的项目创建一个 ItemTemplate 。

您不能将 DataTable 绑定到 HeaderTemplate，因为它不知道要为标题使用哪一行；

在下面的示例中，我将字符串属性用于标题，将 DataTable 用于重复项：

**ASPX：**

```
<asp:DataList ID="dlcalender" runat="server">
    <FooterTemplate>
    </FooterTemplate>
    <HeaderTemplate>
        <asp:Label ID="head1" runat="server" Text='<%# Heading1 %>' />
        <asp:Label ID="head2" runat="server" Text='<%# Heading2 %>' />
        <asp:Label ID="head3" runat="server" Text='<%# Heading3 %>' />
        <asp:Label ID="head4" runat="server" Text='<%# Heading4 %>' />
    </HeaderTemplate>
    <ItemTemplate>
        <%# DataBinder.Eval(Container.DataItem,"Rego No")%>
        <%# DataBinder.Eval(Container.DataItem,"Column1") %>
        <%# DataBinder.Eval(Container.DataItem,"Column2")%>
        <%# DataBinder.Eval(Container.DataItem,"Column3")%>
    </ItemTemplate>
</asp:DataList> 
```

**后面的代码：**

```
public string Heading1 { get; set; }
public string Heading2 { get; set; }
public string Heading3 { get; set; }
public string Heading4 { get; set; }

protected void Page_Load(object sender, EventArgs e)
{
    Heading1 = "Heading 1";
    Heading2 = "Heading 2";
    Heading3 = "Heading 3";
    Heading4 = "Heading 4";

    var list = new List<string> { "Column1", "Column2", "Column3" };

    var table = new DataTable();
    table.Columns.Add(new DataColumn("Rego No", typeof(string)));

    foreach (var item in list)
        table.Columns.Add(item, typeof(string));

    //Now add some rows(which will be repeated in the ItemTemplate)
    table.Rows.Add("0", "Row 0", "Row 0", "Row 0");
    table.Rows.Add("1", "Row 1", "Row 1", "Row 1");
    table.Rows.Add("2", "Row 2", "Row 2", "Row 2");

    dlcalender.DataSource = table;
    dlcalender.DataBind();
} 
```

另外，您为什么不只使用网格视图？显示表格数据要好得多，我相信这就是您所拥有的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:45:53.953

与 linq。

```
dlcalender.DataSource = dt.select(p=>new{
c1=p.columns[0],
c2=p.columns[1],
......
}); 
```

并使用

```
<%# Eval("c1") %>
<%# Eval("c2") %>
...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-16T06:02:19.900

由于您在运行时动态创建了数据列，因此您还必须在运行时将它们添加到 gridview 中，例如：

```
DataTable dt = new DataTable();
dt.Columns.Add(new DataColumn("Rego No", typeof(string)));
 foreach (var item in list)
  { 
    dt.Columns.Add(new DataColumn(string.Format("{0:dd/MM}",item),typeof(string)));
    //enter code here 

dlcalender.Columns.Add(string.Format("{0:dd/MM}",item), string.Format("{0:dd/MM}",item));
  }
dlcalender.DataSource = dt;
dlcalender.DataBind(); 
```

在上面的代码中，我已将列添加到数据列表中，同时将其添加到数据表中。

如果您不想全部添加，可以过滤它们。

# javascript - 用于电子邮件验证的正则表达式（最少字符）

> ID：14670628
> 
> 赞同：-4
> 
> 时间：2013-02-03T08:15:42.533
> 
> 标签：javascript, regex

如何在 javascript 中编写用于电子邮件验证的正则表达式，以便“@”之前的字符的最小长度为 5（这些字符可以是 AZ/az/0-9_- 之间的任何字符）

> 示例：Sr_369@gmail.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T09:22:25.167

要回答您的问题，正则表达式将是

```
/^[\w-]{5,}@.*$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:37:19.837

我总是在这个网站上使用正则表达式

[http://regexlib.com/Search.aspx?k=email](http://regexlib.com/Search.aspx?k=email)

并将其与 JavaScript 一起使用

```
function emailValidation()
{
var emailRegEx =/^([a-zA-Z0-9])(([a-zA-Z0-9])*([\._-])?([a-zA-Z0-9]))*@(([a-zA-Z0-9\-])+(\.))+([a-zA-Z]{2,4})+$/

if (document.testForm.textBox.value.search(emailRegEx )==-1) //if match failed
{
alert("invalid Email!!!");
}
else
{
alert("valid Email.");
}
} 
```

# php - PHP：来自JPEG EXIF的字符串被视为整数

> ID：14670629
> 
> 赞同：0
> 
> 时间：2013-02-03T08:16:00.890
> 
> 标签：php, integer, exif

善良，我对此很陌生，可能缺少一些明显的东西。

我正在建立一个电子商务网站。产品都是独一无二的，单独拍照，也离线销售。订单量低，我希望能够通过简单地添加或删除目录中的图像文件来管理在线库存。为此，我将产品代码和产品尺寸（决定价格）存储在 JPEG 文件的 EXIF 数据中。目的是每隔一小时左右生成一个 CSV 文件并将其导入到商店软件中。

但是，我不知道为什么不能对从 EXIF 数据中提取的字符串执行计算。

这是我的错误代码：

```
 $dir    = '.';
    $all_names = scandir($dir);
    $ignore = array(".", "..", "sold", "onhold", "exifread.php");
    $files = array_diff($all_names, $ignore);

    foreach ($files as $file) {

    $exif = exif_read_data($file, 0, true);

    $ifd0 = $exif[IFD0];

    $size = $ifd0['Comments'];
    $prod_code = $ifd0['Author'];
    $time_taken = $ifd0['DateTime'];
    $price_per_m2 = 102;
    $gst = 1.1;
    $total_price = ($size * $price_per_m2) * $gst;

    echo "$file;$size;$prod_code;$time_taken;$total_price<br />\n";
    }

    ?> 
```

$size 被视为整数，但大小均以 m2 为单位，有两位小数（例如 3.45）。

我尝试使用 str_replace 删除“。” 并乘以 1.02 而不是 102，但是虽然 $size 正确回显（例如 345），但乘法 ($total_price) 表明 $size 仍被视为整数（例如 3）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:39:34.103

EXIF 数据被编码为 UTF-16LE。您需要先通过 iconv 等将其转换为 ASCII，然后才能在计算中使用它，这样它就不会在第一个 NUL 时被截断。

# c - 为什么未设置 DBUS_SESSION_BUS_ADDRESS 时 g_file_copy 返回 Operation not supported

> ID：14670630
> 
> 赞同：4
> 
> 时间：2013-02-03T08:16:10.297
> 
> 标签：c, linux, network-programming, glib, gio

以下代码可以作为普通用户会话正常工作：

```
#include <gio/gio.h>
int main()
{
        const gchar *uri = "https://stackoverflow.com/questions/5758770/";
        GFile *in;
        GFile *out;
        GError *error = NULL;
        gboolean ret;
        g_type_init();
        in = g_file_new_for_uri(uri);
        out = g_file_new_for_path("/tmp/a");
        ret = g_file_copy(in, out, G_FILE_COPY_OVERWRITE,
                          NULL, NULL, NULL, &error);
        if (!ret)
                g_message("%s", error->message);
        return 0;
} 
```

（取自[glib-network-connection-example](https://stackoverflow.com/questions/5758770/glib-network-connection-example)）

但是当 'su -' 到另一个用户并执行相同的二进制文件时，我收到以下错误：

**** 消息：不支持操作**

strace转储如下：

```
execve("./uri_copy", ["./uri_copy"], [/* 24 vars */]) = 0
brk(0)                                  = 0x2318000
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fc8757f3000
access("/etc/ld.so.preload", R_OK)      = -1 ENOENT (No such file or directory)
open("/etc/ld.so.cache", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=113424, ...}) = 0
mmap(NULL, 113424, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7fc8757d7000
close(3)                                = 0
open("/usr/lib/libgio-2.0.so.0", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\300\21\3\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=7332859, ...}) = 0
mmap(NULL, 3481536, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc875281000
mprotect(0x7fc8753cd000, 2093056, PROT_NONE) = 0
mmap(0x7fc8755cc000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x14b000) = 0x7fc8755cc000
mmap(0x7fc8755d2000, 4032, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7fc8755d2000
close(3)                                = 0
open("/usr/lib/libgobject-2.0.so.0", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0p\256\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=1571328, ...}) = 0
mmap(NULL, 2416416, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc875033000
mprotect(0x7fc87507f000, 2097152, PROT_NONE) = 0
mmap(0x7fc87527f000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x4c000) = 0x7fc87527f000
close(3)                                = 0
open("/usr/lib/libglib-2.0.so.0", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\220\230\1\0\0\0\0\0"..., 832) = 832
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fc8757d6000
fstat(3, {st_mode=S_IFREG|0755, st_size=4565491, ...}) = 0
mmap(NULL, 3279624, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc874d12000
mprotect(0x7fc874e31000, 2097152, PROT_NONE) = 0
mmap(0x7fc875031000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x11f000) = 0x7fc875031000
close(3)                                = 0
open("/lib/libpthread.so.0", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\340l\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=776444, ...}) = 0
mmap(NULL, 2212768, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc874af5000
mprotect(0x7fc874b0c000, 2097152, PROT_NONE) = 0
mmap(0x7fc874d0c000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x17000) = 0x7fc874d0c000
mmap(0x7fc874d0e000, 13216, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7fc874d0e000
close(3)                                = 0
open("/lib/libc.so.6", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\3\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0 \30\2\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=10464009, ...}) = 0
mmap(NULL, 3820672, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc874750000
mprotect(0x7fc8748eb000, 2097152, PROT_NONE) = 0
mmap(0x7fc874aeb000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x19b000) = 0x7fc874aeb000
mmap(0x7fc874af1000, 15488, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7fc874af1000
close(3)                                = 0
open("/usr/lib/libgthread-2.0.so.0", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0000\6\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=10190, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fc8757d5000
mmap(NULL, 2100144, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc87454f000
mprotect(0x7fc874550000, 2093056, PROT_NONE) = 0
mmap(0x7fc87474f000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0) = 0x7fc87474f000
close(3)                                = 0
open("/usr/lib/libffi.so.6", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0@\30\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=160444, ...}) = 0
mmap(NULL, 2128152, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc874347000
mprotect(0x7fc87434e000, 2097152, PROT_NONE) = 0
mmap(0x7fc87454e000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x7000) = 0x7fc87454e000
close(3)                                = 0
open("/usr/lib/libgmodule-2.0.so.0", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\240\21\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=48372, ...}) = 0
mmap(NULL, 2107576, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc874144000
mprotect(0x7fc874147000, 2093056, PROT_NONE) = 0
mmap(0x7fc874346000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x2000) = 0x7fc874346000
close(3)                                = 0
open("/lib/libdl.so.2", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\260\16\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=110348, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fc8757d4000
mmap(NULL, 2109720, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc873f40000
mprotect(0x7fc873f42000, 2097152, PROT_NONE) = 0
mmap(0x7fc874142000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x2000) = 0x7fc874142000
close(3)                                = 0
open("/lib/librt.so.1", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\300\"\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=197331, ...}) = 0
mmap(NULL, 2128888, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc873d38000
mprotect(0x7fc873d3f000, 2093056, PROT_NONE) = 0
mmap(0x7fc873f3e000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x6000) = 0x7fc873f3e000
close(3)                                = 0
open("/lib/libz.so.1", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\360 \0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=102874, ...}) = 0
mmap(NULL, 2188616, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc873b21000
mprotect(0x7fc873b37000, 2097152, PROT_NONE) = 0
mmap(0x7fc873d37000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x16000) = 0x7fc873d37000
close(3)                                = 0
open("/lib/libresolv.so.2", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\260:\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=397849, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fc8757d3000
mmap(NULL, 2189936, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc87390a000
mprotect(0x7fc87391e000, 2093056, PROT_NONE) = 0
mmap(0x7fc873b1d000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x13000) = 0x7fc873b1d000
mmap(0x7fc873b1f000, 6768, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7fc873b1f000
close(3)                                = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fc873909000
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fc873908000
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fc873907000
arch_prctl(ARCH_SET_FS, 0x7fc873908700) = 0
mprotect(0x7fc874aeb000, 16384, PROT_READ) = 0
mprotect(0x7fc873b1d000, 4096, PROT_READ) = 0
mprotect(0x7fc874d0c000, 4096, PROT_READ) = 0
mprotect(0x7fc873f3e000, 4096, PROT_READ) = 0
mprotect(0x7fc874142000, 4096, PROT_READ) = 0
mprotect(0x7fc8757f4000, 4096, PROT_READ) = 0
munmap(0x7fc8757d7000, 113424)          = 0
set_tid_address(0x7fc8739089d0)         = 3023
set_robust_list(0x7fc8739089e0, 24)     = 0
futex(0x7fff6deb5014, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 1, NULL, 7fc873908700) = -1 EAGAIN (Resource temporarily unavailable)
rt_sigaction(SIGRTMIN, {0x7fc874afb7d0, [], SA_RESTORER|SA_SIGINFO, 0x7fc874b047b0}, NULL, 8) = 0
rt_sigaction(SIGRT_1, {0x7fc874afb850, [], SA_RESTORER|SA_RESTART|SA_SIGINFO, 0x7fc874b047b0}, NULL, 8) = 0
rt_sigprocmask(SIG_UNBLOCK, [RTMIN RT_1], NULL, 8) = 0
getrlimit(RLIMIT_STACK, {rlim_cur=8192*1024, rlim_max=RLIM64_INFINITY}) = 0
brk(0)                                  = 0x2318000
brk(0x2339000)                          = 0x2339000
getresuid([0], [0], [0])                = 0
getresgid([0], [0], [0])                = 0
openat(AT_FDCWD, "/usr/lib/gio/modules", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3
stat("/usr/lib/gio/modules/giomodule.cache", {st_mode=S_IFREG|0644, st_size=317, ...}) = 0
open("/usr/lib/charset.alias", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/lib/gio/modules/giomodule.cache", O_RDONLY) = 4
fstat(4, {st_mode=S_IFREG|0644, st_size=317, ...}) = 0
read(4, "libgvfsdbus.so: gio-vfs,gio-volu"..., 317) = 317
close(4)                                = 0
getdents(3, /* 17 entries */, 32768)    = 704
stat("/usr/lib/gio/modules/libgvfsdbus.so", {st_mode=S_IFREG|0755, st_size=1008539, ...}) = 0
stat("/usr/lib/gio/modules/libgiognutls.so", {st_mode=S_IFREG|0755, st_size=528214, ...}) = 0
stat("/usr/lib/gio/modules/libgiolibproxy.so", {st_mode=S_IFREG|0755, st_size=38152, ...}) = 0
stat("/usr/lib/gio/modules/libgiognomeproxy.so", {st_mode=S_IFREG|0755, st_size=61385, ...}) = 0
stat("/usr/lib/gio/modules/libgsettingsgconfbackend.so", {st_mode=S_IFREG|0755, st_size=80091, ...}) = 0
stat("/usr/lib/gio/modules/libgioremote-volume-monitor.so", {st_mode=S_IFREG|0755, st_size=520847, ...}) = 0
stat("/usr/lib/gio/modules/libdconfsettings.so", {st_mode=S_IFREG|0755, st_size=197917, ...}) = 0
getdents(3, /* 0 entries */, 32768)     = 0
close(3)                                = 0
stat("/usr/lib/gio/modules/libgvfsdbus.so", {st_mode=S_IFREG|0755, st_size=1008539, ...}) = 0
futex(0x7fc8741430c8, FUTEX_WAKE_PRIVATE, 2147483647) = 0
open("/usr/lib/gio/modules/libgvfsdbus.so", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0`\311\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=1008539, ...}) = 0
mmap(NULL, 2296960, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc8736d6000
mprotect(0x7fc873705000, 2097152, PROT_NONE) = 0
mmap(0x7fc873905000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x2f000) = 0x7fc873905000
close(3)                                = 0
open("/etc/ld.so.cache", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=113424, ...}) = 0
mmap(NULL, 113424, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7fc8736ba000
close(3)                                = 0
open("/usr/lib/libgvfscommon.so.0", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0 .\1\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=935965, ...}) = 0
mmap(NULL, 2338440, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc87347f000
mprotect(0x7fc8734b5000, 2093056, PROT_NONE) = 0
mmap(0x7fc8736b4000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x35000) = 0x7fc8736b4000
close(3)                                = 0
open("/lib/libpcre.so.1", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\300\23\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=270107, ...}) = 0
mmap(NULL, 2356392, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc87323f000
mprotect(0x7fc87327e000, 2097152, PROT_NONE) = 0
mmap(0x7fc87347e000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x3f000) = 0x7fc87347e000
close(3)                                = 0
open("/lib/libudev.so.1", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0@L\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=1088628, ...}) = 0
mmap(NULL, 2173032, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc87302c000
mprotect(0x7fc87303d000, 2097152, PROT_NONE) = 0
mmap(0x7fc87323d000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x11000) = 0x7fc87323d000
close(3)                                = 0
open("/lib/libutil.so.1", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\360\16\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=33117, ...}) = 0
mmap(NULL, 2105600, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fc872e29000
mprotect(0x7fc872e2b000, 2093056, PROT_NONE) = 0
mmap(0x7fc87302a000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1000) = 0x7fc87302a000
close(3)                                = 0
mprotect(0x7fc87302a000, 4096, PROT_READ) = 0
mprotect(0x7fc87323d000, 4096, PROT_READ) = 0
munmap(0x7fc8736ba000, 113424)          = 0
munmap(0x7fc8736d6000, 2296960)         = 0
munmap(0x7fc87347f000, 2338440)         = 0
munmap(0x7fc87323f000, 2356392)         = 0
munmap(0x7fc87302c000, 2173032)         = 0
munmap(0x7fc872e29000, 2105600)         = 0
open("/usr/lib64/gconv/gconv-modules.cache", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/lib64/gconv/gconv-modules", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=56302, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fc8757f2000
read(3, "# GNU libc iconv configuration.\n"..., 4096) = 4096
read(3, "lias\tCSISO141JUSIB1002//\tJUS_I.B"..., 4096) = 4096
read(3, "odule\t\tcost\nalias\tISO-IR-110//\t\t"..., 4096) = 4096
read(3, "9-14//\nalias\tL8//\t\t\tISO-8859-14/"..., 4096) = 4096
read(3, "CSEBCDICES//\t\tEBCDIC-ES//\nalias\t"..., 4096) = 4096
read(3, "IBM284//\nalias\tEBCDIC-CP-ES//\t\tI"..., 4096) = 4096
brk(0x235a000)                          = 0x235a000
read(3, "ias\t864//\t\t\tIBM864//\nalias\tCSIBM"..., 4096) = 4096
read(3, "lias\tCSIBM939//\t\tIBM939//\nmodule"..., 4096) = 4096
read(3, "alias\tcsGB2312//\t\tEUC-CN//\nalias"..., 4096) = 4096
read(3, "//\t\tISO-2022-CN-EXT//\nmodule\tISO"..., 4096) = 4096
read(3, "st\nalias\tISO-IR-55//\t\tISO_5428//"..., 4096) = 4096
read(3, "\tARMSCII-8//\t\tARMSCII-8\t1\n\n#\tfro"..., 4096) = 4096
read(3, "2//\t\tIBM1112\t\t1\n\n#\tfrom\t\t\tto\t\t\tm"..., 4096) = 4096
read(3, "module\tIBM9448//\t\tINTERNAL\t\tIBM9"..., 4096) = 3054
read(3, "", 4096)                       = 0
close(3)                                = 0
munmap(0x7fc8757f2000, 4096)            = 0
futex(0x7fc874af08f8, FUTEX_WAKE_PRIVATE, 2147483647) = 0
write(2, "** Message: Operation not suppor"..., 36** Message: Operation not supported
) = 36
exit_group(0)                           = ?
+++ exited with 0 +++ 
```

我已将问题缩小到未设置 DBUS_SESSION_BUS_ADDRESS 变量。

我想知道为什么上述解决方案需要 dbus，因为在 glib/gio 文档中没有提到这一点，并且是否有不需要 dbus 的下载文件解决方案，或者，我可以将 DBUS_SESSION_BUS_ADDRESS 设置为可以做到的东西无论我如何切换到另一个用户的会话，都可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:26:12.463

通过 GIO 访问本地文件不需要 DBus，但是通过 gvfsd 进行网络文件访问，而 DBus 用于在您的程序和守护程序之间进行通信。更多技术细节可以在[GNOME 2.22 Release Notes](https://help.gnome.org/misc/release-notes/2.22/#sect:gvfs-gio)中找到。

这个问题中给出的答案[Access another user's D-Bus session](https://stackoverflow.com/questions/6496847/access-another-users-d-bus-session)应该可以解决您的问题。

# algorithm - 查找字符串中最常见子字符串的算法

> ID：14670632
> 
> 赞同：26
> 
> 时间：2013-02-03T08:16:29.243
> 
> 标签：algorithm, language-agnostic

是否有任何算法可用于查找字符串中最常见的短语（或子字符串）？例如，以下字符串将“hello world”作为其最常见的两个词短语：

`"hello world this is hello world. hello world repeats three times in this string!"`

在上面的字符串中，最常见的字符串（在空字符串字符之后，重复无数次）是空格字符`。`

 `有没有办法在这个字符串中生成一个常见的子字符串列表，从最常见到最不常见？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-03T08:24:56.457

这与 Nussinov 算法的任务类似，实际上更简单，因为我们不允许对齐中的任何间隙、插入或不匹配。

对于长度为 N 的字符串 A，定义一个`F[-1 .. N, -1 .. N]`表格并使用以下规则填写：

```
 for i = 0 to N
    for j = 0 to N
      if i != j
        {
          if A[i] == A[j]
            F[i,j] = F [i-1,j-1] + 1;
          else
            F[i,j] = 0;
        } 
```

例如，对于**BA** O **BA** B：

![算法图](../Images/c5f774053d0d1c5ac4d35350a6e10424.png)

这是`O(n^2)`及时的。表中的最大值现在指向最长的自匹配子序列的结束位置（i - 一次出现的结束，j - 另一个）。一开始，假定数组是零初始化的。我添加了条件来排除最长但可能不有趣的自我匹配对角线。

再想一想，这张表在对角线上是对称的，所以只计算它的一半就足够了。此外，数组是零初始化的，因此分配零是多余的。剩下的

```
 for i = 0 to N
    for j = i + 1 to N
      if A[i] == A[j]
         F[i,j] = F [i-1,j-1] + 1; 
```

更短但可能更难以理解。计算表包含所有匹配项，短匹配和长匹配。您可以根据需要添加进一步的过滤。

在下一步中，您需要从非零单元格向上和向左对角线恢复字符串。在此步骤中，使用一些 hashmap 来计算同一字符串的自相似匹配数也很简单。对于普通字符串和普通最小长度，只有少量表格单元格将通过此映射处理。

我认为直接使用hashmap实际上需要O（n ^ 3），因为必须以某种方式比较访问结束时的键字符串是否相等。这种比较可能是 O(n)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-03T08:35:55.597

Python。这有点快速和肮脏，数据结构完成了大部分工作。

```
from collections import Counter
accumulator = Counter()
text = 'hello world this is hello world.'
for length in range(1,len(text)+1):
    for start in range(len(text) - length):
        accumulator[text[start:start+length]] += 1 
```

Counter 结构是一个哈希支持的字典，旨在计算您看到某物的次数。添加到不存在的密钥将创建它，而检索不存在的密钥将为您提供零而不是错误。因此，您所要做的就是遍历所有子字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T15:44:31.523

只是伪代码，也许这不是最漂亮的解决方案，但我会这样解决：

```
function separateWords(String incomingString) returns StringArray{
  //Code
}

function findMax(Map map) returns String{
  //Code
}

function mainAlgorithm(String incomingString) returns String{
    StringArray sArr = separateWords(incomingString);
    Map<String, Integer> map; //init with no content
    for(word: sArr){
        Integer count = map.get(word);
        if(count == null){
            map.put(word,1);
        } else {
            //remove if neccessary
            map.put(word,count++); 
        }
   }
   return findMax(map);
} 
```

其中 map 可以包含一个键值对，如 Java HashMap 中的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T12:53:23.377

Perl，`O(n²)`解决方案

```
my $str = "hello world this is hello world. hello world repeats three times in this string!";

my @words = split(/[^a-z]+/i, $str);
my ($display,$ix,$i,%ocur) = 10;

# calculate

for ($ix=0 ; $ix<=$#words ; $ix++) {
  for ($i=$ix ; $i<=$#words ; $i++) {
    $ocur{ join(':', @words[$ix .. $i]) }++;
  }
}

# display 

foreach (sort { my $c = $ocur{$b} <=> $ocur{$a} ; return $c ? $c : split(/:/,$b)-split(/:/,$a); } keys %ocur) {
  print "$_: $ocur{$_}\n";
  last if !--$display;
} 
```

显示最常见子字符串的 10 个最佳分数（如果出现平局，首先显示最长的单词链）。改为只有结果`$display`。有迭代。`1`
`n(n+1)/2`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-06T10:19:54.267

由于对于长度 >= 2 的字符串的每个子字符串，文本至少包含一个长度为 2 的子字符串，因此我们只需要研究长度为 2 的子字符串。

```
val s = "hello world this is hello world. hello world repeats three times in this string!"

val li = s.sliding (2, 1).toList
// li: List[String] = List(he, el, ll, lo, "o ", " w", wo, or, rl, ld, "d ", " t", th, hi, is, "s ", " i", is, "s ", " h", he, el, ll, lo, "o ", " w", wo, or, rl, ld, d., ". ", " h", he, el, ll, lo, "o ", " w", wo, or, rl, ld, "d ", " r", re, ep, pe, ea, at, ts, "s ", " t", th, hr, re, ee, "e ", " t", ti, im, me, es, "s ", " i", in, "n ", " t", th, hi, is, "s ", " s", st, tr, ri, in, ng, g!)

val uniques = li.toSet
uniques.toList.map (u => li.count (_ == u))
// res18: List[Int] = List(1, 2, 1, 1, 3, 1, 5, 1, 1, 3, 1, 1, 3, 2, 1, 3, 1, 3, 2, 3, 1, 1, 1, 1, 1, 3, 1, 3, 3, 1, 3, 1, 1, 1, 3, 3, 2, 4, 1, 2, 2, 1)

uniques.toList(6)
res19: String = "s " 
````

# svn - SVN结帐到其他服务器

> ID：14670634
> 
> 赞同：0
> 
> 时间：2013-02-03T08:16:46.030
> 
> 标签：svn, ftp

我有四台电脑在使用：

1.  我的桌面，我在上面写代码
2.  我的服务器，我在其上签出 SVN 存储库，测试编写的代码并提交修订
3.  SVN 服务器
4.  我最终将使用的服务器

在开发过程中，我经常在桌面和服务器上工作。当我想将最新版本放到终端服务器上时，我必须通过 FTP 来完成，因为它不支持 SVN。所以我必须这样做：

1.  查看
2.  使用 FTP 上传

如果我只用一个命令就能做到这一点会很有用，比如：

1.  使用 FTP 结帐到其他服务器

有没有这样的命令？还是比我现在做的更快的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:42:33.987

在您的桌面上创建一个 ftp 挂载到服务器，这样您就可以直接从桌面到服务器目录进行检出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:00:25.927

将 HEAD + FTP|SCP|RSync 从存储库端导出到提交后挂钩中的目标

# jquery - 没有缩略图的 img 画廊，通过点击打开

> ID：14670635
> 
> 赞同：0
> 
> 时间：2013-02-03T08:16:51.593
> 
> 标签：jquery, html, css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T08:24:47.830

# android - WebView在线加载网站，离线加载本地文件

> ID：14670638
> 
> 赞同：75
> 
> 时间：2013-02-03T08:17:25.837
> 
> 标签：android, webview, local, offline, auto-update

我实际上是使用 Java 编程的新手，但我一直在关注我的问题的几种解决方案，但没有找到适合我的情况的解决方案，而且我似乎无法正确获取代码。

我想要一个`WebView`在手机在线时打开一个在线页面（例如谷歌）并在手机离线时打开一个本地 HTML 页面。

同时，虽然我希望手机在在线时覆盖本地页面，以便离线本地页面始终更新到手机最后一次连接到互联网时。

关于如何做到这一点的任何想法？一些简单的指向正确方向可能会有所帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-02-03T09:53:07.260

对我来说，这听起来像是一个简单的 webview 缓存机制。

以下应该做你正在寻找的东西：

```
WebView webView = new WebView( context );
webView.getSettings().setAppCacheMaxSize( 5 * 1024 * 1024 ); // 5MB
webView.getSettings().setAppCachePath( getApplicationContext().getCacheDir().getAbsolutePath() );
webView.getSettings().setAllowFileAccess( true );
webView.getSettings().setAppCacheEnabled( true );
webView.getSettings().setJavaScriptEnabled( true );
webView.getSettings().setCacheMode( WebSettings.LOAD_DEFAULT ); // load online by default

if ( !isNetworkAvailable() ) { // loading offline
    webView.getSettings().setCacheMode( WebSettings.LOAD_CACHE_ELSE_NETWORK );
}

webView.loadUrl( "http://www.google.com" ); 
```

该方法`isNetworkAvailable()`检查活动的网络连接：

```
private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService( CONNECTIVITY_SERVICE );
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return activeNetworkInfo != null && activeNetworkInfo.isConnected();
} 
```

最后，不要忘记将以下三个权限添加到您的`AndroidManifest.xml`:

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-05-23T18:53:44.813

以下是 WebView 无法本地缓存的情况。如果页面标题包含以下字段，WebView 将无法缓存该页面的内容。Cache-Control: no-store, no-cache Pragma: no-cache

在这种情况下，您将不得不修改服务器上的页面属性来解决缓存问题。

# jquery - jQuery $.ajax 作为本地 HTML 文件运行，避免 SOP（同源策略）

> ID：14670639
> 
> 赞同：0
> 
> 时间：2013-02-03T08:17:42.380
> 
> 标签：jquery, ajax, local-files

我创建了一个包含`foo.html`以下内容的 HTML 文件：

```
 <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script> 
      $.ajax({url:"http://foo.com/mdata",
        error: function (results) {
          alert("fail");
        },
        success: function (result) {
          alert("sucesses");
        }
      });
    </script> 
```

当我在网络浏览器中加载这个 HTML 文件时，它总是显示一个失败的对话框。

1.  知道为什么会这样吗？
2.  还有什么是调试这个的最佳方法？

PS：

假设这`http://foo.com/mdata`是一个有效的 Web 服务路径。

编辑#1

**解决方案**

[使用 $.getJson http://jsfiddle.net/dpant/EK3W8/](http://jsfiddle.net/dpant/EK3W8/)的类似代码对我来说工作得很好

我也确实将内容保存为 .html 文件，并且从 file:// 到 Web 服务的请求似乎也有效。

```
<!DOCTYPE html>
<html>
<head>
  <style>img{ height: 100px; float: left; }</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div id="images">

</div>
<script>
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
  {
    tags: "mount rainier",
    tagmode: "any",
    format: "json"
  },
  function(data) {
    $.each(data.items, function(i,item){
      $("<img/>").attr("src", item.media.m).appendTo("#images");
      if ( i == 3 ) return false;
    });
  });</script>

</body>
</html> 
```

看起来大多数浏览器都支持 CROS，因此您可以编写一个脚本将其保存为 .html 并在浏览器中打开它，它会成功执行 Ajax 请求 **只要您发出请求的服务器支持它 **。在这种情况下，我的 Web 服务器（服务）不支持 CROS（并且 Apache 的默认配置不支持它）。

许多网络服务都启用了 CROS，例如[http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=](http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=)？因此请求成功通过。

几个链接：

[http://enable-cors.org/](http://enable-cors.org/)

[https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

[http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T08:28:41.533

它总是失败有两个原因：

*   您需要一个响应您的请求的网络服务器（200 = 成功，404 即错误）在[Linux](http://www.unixmen.com/install-lamp-with-1-command-in-ubuntu-1010-maverick-meerkat/)上您可以轻松设置一个，在[Windows](http://bitnami.org/stack/wamp)和[Mac](http://bitnami.org/stack/mamp)上查看 Bitnami
*   您不能通过 AJAX 调用不同的域。如果您在 www.example.com 上运行脚本，则不能要求 www.example.net[查看相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:05:40.103

实际上，我们正在尝试跨域发送 AJAX 请求，这样它就会发生。我试过这段代码。在我的机器上它显示成功。

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script> 
    $.support.cors = true;
      $.ajax({url:"http://www.google.co.in/",
        error: function (xhr, ajaxOptions, thrownError) {

            alert("fail");
            alert(xhr.status);
            alert(thrownError);
       },
        success:function(result){
              alert("sucesses");
        }
      });

    </script> 
```

添加代码后代码可以正常`$.support.cors=true`工作，它肯定会为您工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:02:37.430

正如我所知道的，在内容脚本中，您不能执行任何跨域 XHR。您必须在诸如背景、弹出窗口甚至选项的扩展页面中执行它们。

有关内容脚本限制的更多信息，请参阅Google 开发人员指南中的[内容脚本页面。](http://code.google.com/chrome/extensions/content%5Fscripts.html)

有关 xhr 限制的更多信息，请参阅[XHR 页面](http://code.google.com/chrome/extensions/xhr.html)。

# machine-learning - 为什么后验与 P(X=x|C=c_i)P(C=c_i) 成正比？

> ID：14670640
> 
> 赞同：-1
> 
> 时间：2013-02-03T08:17:44.017
> 
> 标签：machine-learning

当我们试图最大化后验时，我们应用贝叶斯规则将它们转换为后验概率！ [这是大多数教科书通常声称的](http://i.stack.imgur.com/41UR2.png)

我怎么能确定确实如此？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:55:45.343

在这些情况下，你正在做

```
argmax_{c_i} p(C=c_i|X=x) 
```

这是给出证据的最可能的类别。由于在这种情况下 x 是固定的（您试图为其找到最佳类别的数据），因此 P(X=x) 也是固定的，它是数据的概率。

# c# - 位数组到字符串并返回位数组

> ID：14670645
> 
> 赞同：2
> 
> 时间：2013-02-03T08:18:04.807
> 
> 标签：c#, string, bytearray, bitarray, huffman-code

可能的重复[将字节数组转换为字符串并在 C# 中再次返回](https://stackoverflow.com/questions/1422314/converting-byte-array-to-string-and-back-again-in-c-sharp)

我正在使用霍夫曼编码从[这里压缩和解压缩一些文本](http://snipd.net/huffman-coding-in-c)

那里的代码构建了一个霍夫曼树来使用它进行编码和解码。**当我直接使用代码时**一切正常。

对于我的情况，我需要获取压缩内容，将其存储并在需要时解压缩。

编码器的输出和解码器的输入是`BitArray`。

当我尝试将其转换`BitArray`为`String`并`BitArray`使用以下代码对其进行解码时，我得到了一个奇怪的答案。

```
Tree huffmanTree = new Tree();
huffmanTree.Build(input);

string input = Console.ReadLine();
BitArray encoded = huffmanTree.Encode(input);

// Print the bits
Console.Write("Encoded Bits: ");
foreach (bool bit in encoded)
{
    Console.Write((bit ? 1 : 0) + "");
}
Console.WriteLine();

// Convert the bit array to bytes
Byte[] e = new Byte[(encoded.Length / 8 + (encoded.Length % 8 == 0 ? 0 : 1))];
encoded.CopyTo(e, 0);

// Convert the bytes to string
string output = Encoding.UTF8.GetString(e);

// Convert string back to bytes
e = new Byte[d.Length];
e = Encoding.UTF8.GetBytes(d);

// Convert bytes back to bit array
BitArray todecode = new BitArray(e);

string decoded = huffmanTree.Decode(todecode);

Console.WriteLine("Decoded: " + decoded);

Console.ReadLine(); 
```

[本教程](http://snipd.net/huffman-coding-in-c)的原始代码输出为：

![在此处输入图像描述](../Images/4ae6572d2a6481b67a19f1cac8e058c5.png)

我的代码的输出是：

![在此处输入图像描述](../Images/91a8e7221694cb99c93c5888c56298aa.png)

我哪里错了朋友？帮助我，提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T10:00:18.190

您不能将任意字节填充到字符串中。这个概念只是未定义。使用编码进行转换。

```
string output = Encoding.UTF8.GetString(e); 
```

`e`此时只是二进制垃圾，它*不是*UTF8 字符串。所以在它上面调用 UTF8 方法是没有意义的。

解决方案：不要转换和反向转换到/从字符串。这不是往返。你为什么首先这样做？如果您*需要*字符串，请使用可往返的格式，例如 base-64 或 base-85。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:24:31.277

我很确定 Encoding 不会往返 - 也就是说，您不能将任意字节序列编码为字符串，然后使用相同的 Encoding 来获取字节并*始终*期望它们是相同的。

如果您希望能够从原始字节到字符串并返回到相同的原始字节，则需要使用 base64 编码，例如

[http://blogs.microsoft.co.il/blogs/mneiter/archive/2009/03/22/how-to-encoding-and-decoding-base64-strings-in-c.aspx](http://blogs.microsoft.co.il/blogs/mneiter/archive/2009/03/22/how-to-encoding-and-decoding-base64-strings-in-c.aspx)

# java - 在 jar 的所有类中查找变量的引用

> ID：14670649
> 
> 赞同：0
> 
> 时间：2013-02-03T08:19:28.037
> 
> 标签：java, reflection, netbeans

如何通过反射在jar的所有类中找到静态变量的所有引用...

猜猜任何人有任何想法......

（类似于在 netbeans 中查找使用选项）

提前致谢....

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-03T08:26:30.327

我想您可以使用以下两个帖子找到您要查找的内容...一个是访问类的所有静态字段...另一个是获取所有类的包...

[使用反射查找包的类](https://stackoverflow.com/questions/520328/can-you-find-all-classes-in-a-package-using-reflection)

[通过反射访问静态字段](https://stackoverflow.com/questions/850148/accessing-java-static-final-ivar-value-through-reflection)

# c++ - 静态变量的基本类型定义/别名

> ID：14670651
> 
> 赞同：-4
> 
> 时间：2013-02-03T08:19:33.967
> 
> 标签：c++

我如何才能将其输入到更基本的东西中，例如 ProjectInstance：

```
((ProjectType*)NamespaceOne::NamespaceTwo::ClassName::StaticVariable)->x=0; 
```

这是一个静态类，每次都通过命名空间+强制转换来调用它很烦人。

如何将其简化为某种别名，以便我可以将其称为

```
ProjectInstance->x=0; 
```

我最初的想法是这样的：

```
#typedef ((ProjectType*)NamespaceOne::NamespaceTwo::ClassName::StaticVariable) ProjectInstance 
```

其中 ProjectInstance 是转换为 ProjecType* 的 StaticVariable 的别名。

```
NamespaceOne::NamespaceTwo::ClassName::StaticVariable 
```

StaticVariable 是 BaseType 的一个实例。ProjectType 扩展了 BaseType，我只是将 StaticVariable 转换为 ProjectType，因为 ProjectType 类中有一个附加变量“x”。

我要避免的事情：在我需要访问此静态变量的每个类中声明一个指针/函数。

到目前为止，解决方案是“使用命名空间”，虽然我之前知道这一点，但它是迄今为止最好的发布解决方案。

所以我们把原来的代码行剪成：

```
 ((ProjectType*)ClassName::StaticVariable)->x=0; 
```

我有另一个解决方案：

```
 ClassName::ProjectStaticVariable->x=0; 
```

通过在“ClassName”类中创建一个新指针，我能够进一步减少它。

有没有更好的方法可以进一步减少这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:24:05.613

您可以将某些功能用作：

```
ProjectType* ProjectInstance()
{
  return static_cast<ProjectType*>(NamespaceOne::NamespaceTwo::NamespaceThree::StaticVariable);
} 
```

并将其用作：

```
ProjectInstance()->x = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:27:15.570

`using directive`本地打电话？

```
using namespace NamespaceOne::NamespaceTwo::NamespaceThree;
// do something to StaticVariable 
```

# android - 如何通过编程检查android中的移动网络范围

> ID：14670652
> 
> 赞同：1
> 
> 时间：2013-02-03T08:19:36.290
> 
> 标签：android, mobile, network-programming, range

嗨朋友我想以编程方式检查设备范围是否在范围内然后想向用户显示您在移动网络范围内的消息提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:23:27.577

执行此操作所需的 API 是[android.telephony.SignalStrength](http://developer.android.com/reference/android/telephony/SignalStrength.html)，其中包含电话信号强度相关信息。

它从 API 级别 7 开始可用，即 Android 2.1.x 或更高版本。

# html - 将文本放在图像上时的 z-index 问题

> ID：14670654
> 
> 赞同：2
> 
> 时间：2013-02-03T08:19:52.110
> 
> 标签：html, css

我将首先提供 CSS 和 HTML 源代码。

[jsFiddle](http://jsfiddle.net/TCKH5/)

[活生生的例子在这里](http://www.sobafire.com/__v2/)

问题是，`h2`除非我`z-index: -1;`在`images`. 但是，它使文本出现，然后图像丢失了，我看着`body background`.

`z-index`除了顶部的固定导航栏外，没有什么感人的东西。

这可能是什么原因，你能看看吗？

附言。写`z-index: 2;`在`H2`标签上也不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T08:32:45.350

如果你想要`z-index:2`作品`<h2>`，你应该添加`position:relative;`or`position:absolute;`或`position:fixed`。

你可以看到[`z-index`](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:36:41.463

我改变你的 HTML 和 CSS

HTML 中的更改：将**img****移动**到标签中

 **```
 <div class="spotlight-area">
    <div class="spotlight">

            <div class="spotlight-item width-2 height-2">
                <a href="#" class="spotlight-info">
                    <h2 class="large">
                        Random text
                    </h2>
                    <img src="http://www.sobafire.com/__v2/themes/default/images/news/spotlight-big.jpg" alt="haber">
                </a>

            </div>

            <div class="spotlight-item width-1 height-1">
                <a href="#" class="spotlight-info">
                    <h2>
                        Random Text
                    </h2>
                </a>

                <img src="http://i.imgur.com/TAxDMus.jpg" alt="haber">
            </div>

            <div class="spotlight-item width-1 height-1">
                <a href="#" class="spotlight-info">
                    <h2>
                        Random Text
                    </h2>
                    <img src="http://i.imgur.com/TAxDMus.jpg" alt="haber">
                </a>

            </div>

            <div class="spotlight-item width-1 height-1">
                <a href="#" class="spotlight-info">
                    <h2>
                        Random Text
                    </h2>
                    <img src="http://i.imgur.com/TAxDMus.jpg" alt="haber">
                </a>

            </div>

            <div class="spotlight-item width-1 height-1">
                <a href="#" class="spotlight-info">
                    <h2>
                        Random Text
                    </h2>
                    <img src="http://i.imgur.com/TAxDMus.jpg" alt="haber">
                </a>

            </div>

            <div class="spotlight-item width-1 height-1">
                <a href="#" class="spotlight-info">
                    <h2>
                        Random Text
                    </h2>
                    <img src="http://i.imgur.com/TAxDMus.jpg" alt="haber">
                </a>

            </div>

    </div>
</div> 
```

CSS：

在 CSS 上更改：删除**位置：绝对；**从**img**并将其添加到**.spotlight-area .spotlight .spotlight-item:hover .spotlight-info h2**从**.spotlight-area .spotlight-info { 中**删除**填充并将****边距**添加到**.spotlight-area .spotlight .spotlight-item：**悬停具有相似值**的 .spotlight-info h2**

 ******```
.spotlight-area {
width: 790px;
margin: 0px auto;
padding: 0px;
}
.spotlight-area img, .spotlight-area embed {
max-width: 100%;
height: auto;
min-height: 50px;
}

.spotlight-area .spotlight {
display: block;
border-top: 1px solid #3b3b3b;
border-left: 1px solid #3b3b3b;
float: left;
margin-bottom: 4px;
}

.spotlight-area .spotlight .width-1 { width: 262px }
.spotlight-area .spotlight .width-2 { width: 525px }
.spotlight-area .spotlight .height-1 { height: 174px }
.spotlight-area .spotlight .height-2 { height: 349px }
.spotlight-area .spotlight .spotlight-item {
float: left;
position: relative;
border-bottom: 1px solid #3b3b3b;
border-right: 1px solid #3b3b3b;
overflow: hidden;
 }

 .spotlight-area .spotlight .spotlight-item:hover .spotlight-info h2 {
color: #ffc203;
 }
 .spotlight-area .spotlight .spotlight-item img {
width: 100%;
height: 100%;

top: 0;
left: 0;
margin: 0;
border: 0;
    z-index: -1; /* tricky part */
}

.spotlight-area .spotlight-info {
display: block;
height: 100%;
min-height: 50px;
}

.spotlight-area .spotlight-info a {
display: block;
height: 100%;
min-height: 50px;
padding: 20px;
}

.spotlight-area .spotlight .spotlight-item .spotlight-info h2 {
display: inline-block;
max-width: 480px;
font-size: 30px;
line-height: 32px;
color: #f0f0f0;
    position: absolute;
    margin:20px;
} 
```

在我的测试这个改变工作********

# android - Android 谷歌加号登录按钮

> ID：14670656
> 
> 赞同：3
> 
> 时间：2013-02-03T08:19:55.147
> 
> 标签：android, google-plus

在[Google Sign Button](https://developers.google.com/+/mobile/android/sign-in)之后，我在我的 android 设备上实现了它。

单击按钮时，它会显示一个弹出窗口，询问您的许可： **知道您在 Google 上的身份。**

怎么办？看起来这没有给我任何东西。它不向我提供 access_token 或任何用户数据。

到底有什么好处呢？

*请不要告诉我如何获取 access_token 这不是问题所在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T14:05:31.460

您必须实现 ConnectionCallbacks。而在onConnected()中，你可以开始从google plus账户中获取你想要的用户数据。这是我的函数示例代码：

```
 @Override
public void onConnected(Bundle connectionHint) {
    // We've resolved any connection errors.
    mConnectionProgressDialog.dismiss();
    String accountName = mPlusClient.getAccountName();
    Person p = mPlusClient.getCurrentPerson();
    String displayName = p.getDisplayName();
    google_text.setText(String.format("email:%s\ndisplay name:%s",accountName, displayName));

} 
```

您可以在 Google 的链接中查看更多个人数据：[个人](http://developer.android.com/reference/com/google/android/gms/plus/model/people/Person.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T20:00:00.113

您的类必须实现 ConnectionCallbacks 并且提供的方法之一是 onConnected() 方法。当流程到达您的 onConnected() 方法的实现（这意味着您已成功建立与 google 的连接）时，您可以调用 mPlusClient.getCurrentPerson()。返回类型是 Person 类的实例，您可以在其中找到有关选择 google plus login 的人的任何信息。

# sql - 如何从oracle数据库中检索基于日期的记录

> ID：14670657
> 
> 赞同：2
> 
> 时间：2013-02-03T08:19:57.793
> 
> 标签：sql, oracle

我有一个带有日期列的表格。我需要根据给定的日期从中获取记录。

目前，当我使用查询时：

```
select * from workingemployee_data where created_date like '20-Jan-2012' 
```

我得到了那些在 2012 年 1 月 20 日创建日期的记录

但我想获取那些在给定日期（即 2012 年 1 月 20 日）前 10 天创建的记录。

请就此向我提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T08:26:28.987

这给出了今天和 10 天前之间的所有记录：

```
SELECT *
FROM workingemployee
WHERE created_date BETWEEN sysdate - INTERVAL '10' DAY
                       AND sysdate 
```

这给出了 10 天前输入的所有记录：

```
SELECT *
FROM workingemployee
WHERE created_date = sysdate - INTERVAL '10' DAY 
```

`sysdate`如果需要，请替换为确切的日期。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T08:41:40.197

1.  你为什么用`like`而不用`=`？
2.  假设它`created_date`是 type `DATE`，依赖于隐式转换是不好的做法`NLS_DATE_FORMAT`（这是比较日期和字符串时发生的情况）
3.  `dd-mon-yyyy`不是一种很好的查询格式，因为它根据月份数字的`NLS_LANGUAGE`更好使用而有所不同`mm`

所以，要么使用[@mvp 的答案](https://stackoverflow.com/a/14670702/1083652)，要么做这样的事情：

```
SELECT *
FROM workingemployee
WHERE trunc(created_date) = to_date('20-01-2013', 'dd-mm-yyyy') - 10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-20T09:39:31.273

SELECT * FROM workingemployee WHERE created_date > sysdate - INTERVAL '10' DAY;

# batch-file - 需要批处理文件来计算子目录中的文件数

> ID：14670660
> 
> 赞同：0
> 
> 时间：2013-02-03T08:20:23.477
> 
> 标签：batch-file

我想要一个批处理文件来计算子目录中的文件。并将此计数保存到文本文件中。

这里概述了我到底想要什么：

一个文件夹包含多个文件夹，因此我需要将所有子文件夹文件计数到文本文件中。

O/p 将是：

文件夹 1：23

文件夹 2：34

文件夹 3：12

我想你明白了我的意思。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:06:21.937

这是一个稍微不同的方法。

下面的脚本遍历指定目录的子目录，调用`DIR /A-D`每个子目录，并从 ' 的输出摘要中提取文件计数`DIR`以将其与子目录的名称一起显示。

```
@ECHO OFF
SET "rootpath=%~1"
FOR /D %%D IN ("%rootpath%\*") DO (
  FOR /F %%K IN ('DIR /A-D "%%D" 2^>NUL ^| FIND "File(s)" ^|^| ECHO 0') DO (
    ECHO %%D: %%K
  )
) 
```

父目录的路径应该来自命令行。

该脚本仅计算直接位于子目录中的文件。但是，如果需要，它可以很容易地扩展为返回存储在子目录树中的所有文件的计数。这是一种方法：

```
@ECHO OFF
SET "rootpath=%~1"
FOR /D %%D IN ("%rootpath%\*") DO (
  **SET cnt=0**
  FOR /F %%K IN ('DIR /A-D **/S** "%%D" 2^>NUL ^| FIND "File(s)" ^|^| ECHO 0') DO (
    SET /A cnt+=%%K
  )
  **SETLOCAL EnableDelayedExpansion
  ECHO %%D: !cnt!
  ENDLOCAL**
) 
```

修改后的版本与原始版本几乎相同，除了`DIR`现在可能包含多个摘要的输出。该脚本从每个摘要中提取文件计数并将所有计数相加以获得目录树中的总文件计数。在显示结果时，在这种情况下需要启用延迟扩展，因为总计数存储在环境变量 ( `cnt`) 中，并且在这种情况下使用“正常”（立即）扩展无法正确评估环境变量。

另一个注意事项是，两个版本都显示在显示子目录名称时包含路径。如果您只想要名称（就像您似乎根据您对另一个答案的评论之一所做的那样），请使用`ECHO %%~nxD: ...`而不是`ECHO %%D: ...`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T08:49:39.840

**编辑**

我已经重新设计了这个。该示例使用两个批处理文件；`test.cmd`和`filecount.cmd`

`test.cmd`仅迭代目录，并调用`filecount.cmd`每个目录。

您只需显式运行该`test.cmd`文件，该文件依次调用`filecount.cmd`文件计数，并生成如下所示的输出，这是我刚才简短测试的实际输出。如果您不想计算主目录中的文件数，只需从第一个批处理文件中省略该行。

```
.: 7
folder1: 3
folder2: 2
folder3: 5 
```

该示例假定批处理文件与您计算文件的目录位于同一目录中。

测试.cmd：

```
@echo off
setlocal

call filecount .

for /f %%f in ( 'dir /AD /b' ) do (
    call filecount %%f
)

:EOF
endlocal 
```

文件计数.cmd：

```
@echo off
setlocal enabledelayedexpansion

set /a i=0

for /f %%f in ( 'dir /b /A-D %1' ) do (
    set /a i=i+1
    @rem echo %%f !i!
)

echo %1: %i%

:EOF
endlocal 
```

`filecount.cmd`只是回显到屏幕上，因此您可以根据需要将该输出重定向到文件。

这是一个粗略的例子，不能递归地抓取一个目录结构，但你可以稍微修改一下来完成它。正如我在原始（预编辑）答案中所说，在某些时候，批处理语言（可能）并没有给你足够的力量，你需要看看像 vbscript 或 javascript 这样的东西。

# php - 将点放在php中的变量中的解决方案是什么？

> ID：14670661
> 
> 赞同：-1
> 
> 时间：2013-02-03T08:20:31.730
> 
> 标签：php

我想在php中使用这个变量和点，但服务器删除它的点，有什么解决方案吗？

```
$file=adetails.php; 
```

我无法将点更改为另一个字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T08:22:21.707

引用你的字符串，不要依赖魔法常数。

`$file=adetails.php;`意味着`$file = "adetails" . "php";`。是“`.`丢失”，因为它是连接运算符而不是字符串的一部分。

你要`$file = "adetails.php";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T08:24:01.903

您似乎正在为一个变量分配一个值，而我从您的问题`adetails.php`中得到它是您想要分配给的字符串值`$file`。如果是这种情况，您需要将该字符串括在引号中：

```
$file="adetails.php"; 
```

# php - MySQL Query – 有没有更好的方法？

> ID：14670664
> 
> 赞同：0
> 
> 时间：2013-02-03T08:21:19.200
> 
> 标签：php, mysql, codeigniter

在我的博客上，我有一个功能可以统计每个月发布了多少博客帖子，这些可以显示在子菜单中。

它按年循环，然后按月进行另一个嵌套循环。每次运行此查询以计算每月发布的文章数量。

这是查询：

```
Select * from DM_blog blog where  blog.id IN 
    ( SELECT entry_id FROM DM_tags_target tagstarget WHERE tagstarget.parent_id IN 
    ( SELECT id FROM DM_tags tags WHERE tags.tag = '".$data['page']['id']."' AND tags.type = 'blog_target' )) AND blog.publish < '".date("Y-m-d H:i:s")."' and blog.status = '0'  and YEAR(blog.publish) = '".$year."' and MONTH(blog.publish) = '".$month."'" 
```

有一个更好的方法吗？我可以一次完成所有月份，而不必一年进行 12 次查询吗？完整代码在这里：

```
$this->benchmark->mark('blog_submenu_start');
    $dates = $this->blog_model->menu_dates($data);
    if($dates['years']){
        $i = 0;
        foreach($dates['years'] as $year){
            if($data['segments']['modal'] == $year['YEAR(blog.publish)']){
                $data['date_submenu']['year'][$year['YEAR(blog.publish)']]['class'] = 'selected';
                $selected = true;
            }else if(date("Y") == $year['YEAR(blog.publish)'] && $selected == false){
                $data['date_submenu']['year'][$year['YEAR(blog.publish)']]['class'] = 'selected';
                $selected = true;
            }

            // find the start month
            if($dates['first_entry'][0]['YEAR(blog.publish)'] == $year['YEAR(blog.publish)']){
                if($dates['first_entry'][0]['MONTH(blog.publish)'] < 2){
                    $limit_s['start'] = '1';
                    $limit_s['end'] = 13;
                }else{
                    $limit_s['start'] = $dates['first_entry'][0]['MONTH(blog.publish)'];
                    $limit_s['end'] = 12;
                }
            }else{
                $limit_s['start'] = 1;
                $limit_s['end'] = 13;
            }
            // run through the months
            $this->benchmark->mark('blog_submenu_dates_'.$year['YEAR(blog.publish)'].'_start');
            for($x=$limit_s['start'];$x<=$limit_s['end'];$x++){
                $this->benchmark->mark('blog_submenu_dates_'.$year['YEAR(blog.publish)'].'_'.$x.'_start');
                $this->benchmark->mark('blog_submenu_dates_'.$year['YEAR(blog.publish)'].'_'.$x.'_mysql_start');
                $count = $this->blog_model->month_count($year['YEAR(blog.publish)'],$x,$data);
            $this->benchmark->mark('blog_submenu_dates_'.$year['YEAR(blog.publish)'].'_'.$x.'_mysql_end');
                if($last == false){
                    $this->benchmark->mark('blog_submenu_dates_'.$year['YEAR(blog.publish)'].'_'.$x.'_selected_start');
                    if($data['segments']['modal'] == $year['YEAR(blog.publish)'] and $data['segments']['para_one'] == $x){
                        $data['date_submenu']['year'][$year['YEAR(blog.publish)']]['months'][$x]['class'] = 'selected';
                    }
                    $this->benchmark->mark('blog_submenu_dates_'.$year['YEAR(blog.publish)'].'_'.$x.'_selected_end');
                    $this->benchmark->mark('blog_submenu_dates_'.$year['YEAR(blog.publish)'].'_'.$x.'_assign_start');
                    $data['date_submenu']['year'][$year['YEAR(blog.publish)']]['months'][$x]['month'] = $x;
                    $data['date_submenu']['year'][$year['YEAR(blog.publish)']]['months'][$x]['display_full'] = date('F',strtotime($year['YEAR(blog.publish)'].'-'.$x.'-01')); 
                    $data['date_submenu']['year'][$year['YEAR(blog.publish)']]['months'][$x]['display_short'] = date('M',strtotime($year['YEAR(blog.publish)'].'-'.$x.'-01')); 
                    $data['date_submenu']['year'][$year['YEAR(blog.publish)']]['months'][$x]['count'] = $count;
                    $data['date_submenu']['year'][$year['YEAR(blog.publish)']]['months'][$x]['sef'] = $year['YEAR(blog.publish)'].'/'.$x.'/';
                    $this->benchmark->mark('blog_submenu_dates_'.$year['YEAR(blog.publish)'].'_'.$x.'_assign_end');
                    if(date("Y") == $year['YEAR(blog.publish)'] and date("m") == $x || date("n") == $x){
                        $last = true;
                    } // end date
                    $i++;
                    $this->benchmark->mark('blog_submenu_dates_'.$year['YEAR(blog.publish)'].'_'.$x.'_end');
                } // end last false
            } // end for
            $this->benchmark->mark('blog_submenu_dates_'.$year['YEAR(blog.publish)'].'_end');
        }
    }
    $this->benchmark->mark('blog_submenu_end'); 
```

$this->blog_model->month_count - 这个函数如下：

```
function month_count($year,$month,$data=false){
    $query = $this->db->query("Select * from DM_blog blog where  blog.id IN 
    ( SELECT entry_id FROM DM_tags_target tagstarget WHERE tagstarget.parent_id IN 
    ( SELECT id FROM DM_tags tags WHERE tags.tag = '".$data['page']['id']."' AND tags.type = 'blog_target' )) AND blog.publish < '".date("Y-m-d H:i:s")."' and blog.status = '0'  and YEAR(blog.publish) = '".$year."' and MONTH(blog.publish) = '".$month."'");
    return $query->num_rows(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:30:49.230

您可以添加 group by 子句以按年和月对结果进行分组。

```
Select * from DM_blog blog where  blog.id IN 
( SELECT entry_id FROM DM_tags_target tagstarget WHERE tagstarget.parent_id IN 
( SELECT id FROM DM_tags tags WHERE tags.tag = '".$data['page']['id']."' AND tags.type =     'blog_target' )) AND blog.publish < '".date("Y-m-d H:i:s")."' and blog.status = '0'  GROUP BY     YEAR(blog.publish), MONTH(blog.publish) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:29:15.910

您可以使用 GROUP BY 表达式：

```
SELECT id, YEAR(blog.publish), MONTH(blog.publish)
  FROM DM_blog blog 
 WHERE  blog.id IN 
( SELECT entry_id 
    FROM DM_tags_target tagstarget 
   WHERE tagstarget.parent_id IN 
         ( SELECT id 
             FROM DM_tags tags
            WHERE tags.tag = '".$data['page']['id']."' 
              AND tags.type = 'blog_target' 
          )
) 
AND blog.publish < '".date("Y-m-d H:i:s")."' 
AND blog.status = '0'  
GROUP BY YEAR(blog.publish), MONTH(blog.publish) 
```

它会给你按年和月分组的结果

# paypal - Paypal Payments - 从他们那里存储什么？

> ID：14670665
> 
> 赞同：1
> 
> 时间：2013-02-03T08:21:19.840
> 
> 标签：paypal, payment-gateway, payment

我想知道，如果您编写了一个使用贝宝付款作为付款方式的网站（您被重定向到他们的网站进行付款的付款，而不是网络支付专业版）。

我可以存储哪些详细信息？是否只是他们的贝宝电子邮件地址可以提供给我，或者关于他们的贝宝帐户的其他详细信息也通过他们的 API 发送给我，这些 API 可以存储在我的网站上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:31:34.070

大多数情况下，只有与交易有关的详细信息才能在通常的过程中检索到，因为即使您在收到付款时在您的贝宝帐户中看到交易详细信息时也会出现这种情况。但是，如果您能提供有关您希望查找的内容的更多信息，这将对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T08:39:48.300

如前所述，您将获得交易的详细信息，例如电子邮件地址、姓名、送货地址和购物车的内容。

不过，您可以从表单中发送自定义参数，例如电话号码。

Paypal，默认情况下不要求用户提供电话号码，因此通常不会向您发送电话号码。但是，零售商拥有客户电话号码通常很有用。

如果您的购物车由您的网站填充，然后要求客户在提交到 Paypal 网站之前填写简短的姓名、电话号码、电子邮件表单，您可以将这些额外的表单字段发送到 Paypal 并让它们返回到您的服务器进行存储/检查。

但是...我发现它非常不稳定！当我这样做时，我的帐户似乎有问题，PP 技术团队无法解释为什么它只是有时有效！我最终放弃了，找到了一个集成了信用卡和 Paypal 的支付网关，现在我所有的支付都通过相同的渠道和回调方法，无论类型如何。

[http://www.securehosting.com](http://www.securehosting.com)我现在使用。

# android - Android：splitActionBarWhenNarrow 的问题

> ID：14670674
> 
> 赞同：3
> 
> 时间：2013-02-03T08:22:27.067
> 
> 标签：android, user-interface, android-actionbar

我正在尝试在我的应用程序中使用 ui 选项： splitActionBarWhenNarrow，但似乎我遇到了不想要的行为。

**编辑：**附加一个带有更多代码的小[要点。](https://gist.github.com/daniel-c05/48d6b204aa18986542ff)

这是活动清单中的代码：

```
<activity
        android:name="com.example.HomeActivity"
        android:uiOptions="splitActionBarWhenNarrow"
        android:label="@string/app_name" > 
```

这是我打算更改 ActionBar 样式的唯一活动。在活动代码中，我禁用了 actionBar 标题和图标，因此选项卡可以合并为唯一的顶部操作栏。

```
 private void setupActionBar() {
    final ActionBar mActionBar = getActionBar();

    mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    mActionBar.setDisplayShowHomeEnabled(false);
    mActionBar.setDisplayShowTitleEnabled(false);

    mActionBar.addTab(mActionBar.newTab().setIcon(R.drawable.tab_one).setTabListener(this));
    mActionBar.addTab(mActionBar.newTab().setIcon(R.drawable.tab_two).setTabListener(this));
    mActionBar.addTab(mActionBar.newTab().setIcon(R.drawable.tab_three).setTabListener(this));
    } 
```

这运作良好；但是，似乎底部操作栏并没有一直到活动的底部，而是在顶部操作栏下方。

这是我编写的代码后的样子，我怎样才能让它一路下降，例如在 Android 的股票消息应用程序上？

编辑，重新附加图像。

[以下是上面代码的](https://www.dropbox.com/s/rrhdv5il80xvzyx/Screenshot_2013-02-18-08-09-22.png)[当前](https://www.dropbox.com/s/nq7o18sqy97dsw9/Screenshot_2013-02-17-08-41-07.png)外观，以及我希望它的外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:00:50.280

[我在此处](https://github.com/enyachoke/Actionbartabs)发布了一个带有选项卡和操作栏的工作演示应用程序

检查一下，希望它有帮助

# android - getJSONfromURL - 空指针异常

> ID：14670677
> 
> 赞同：1
> 
> 时间：2013-02-03T08:22:46.400
> 
> 标签：android, json, nullpointerexception

我做了一个活动“消息”，它应该从给定的 URL 获取 JSON 数据。我尝试制作一个循环来打印 json 数据，但问题出在其他地方。我正在`NullPointerException`使用`JSONArray`“json”。

**消息类：**

```
public class Messages extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    TextView tv = (TextView) findViewById(R.id.tv_messages);
    JSONArray json = JSONfunctions.getJSONfromURL("http://docs.blackberry.com/sampledata.json");

    tv.setText(json.length());
} 
```

**JSON函数类：**

```
public class JSONfunctions {

    public static JSONArray getJSONfromURL(String url) {
        InputStream is = null;
        String result = "";
        JSONArray jArray = null;

        // http post
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        // convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        } catch (Exception e) {
            Log.e("log_tag get data string ",
                    "Error converting result " + e.toString());
        }

        try {

            jArray = new JSONArray(result);
        } catch (JSONException e) {
            Log.e("log_tag create object ",
                    "Error parsing data " + e.toString());
        }

        return jArray;
    }
} 
```

**错误：**

> 08：11：43.683：http连接错误android.os.NetworkOnMainThreadException 08：11：43.693：错误转换结果java.lang.NullPointerException：lock == null 08：11：43.703：解析数据时出错org.json.JSONException：结束08:11:43.723 的字符 0 处的输入：关闭 VM 08:11:43.733：threadid=1：线程以未捕获的异常退出（组=0x40a70930） 08:11:43.923：ATAL 异常：主 08:11:43.923 ：java.lang.RuntimeException：无法启动活动ComponentInfo {com.example.sound/com.example.sound.Messages}：java.lang.NullPointerException 08：11：43.923：在android.app.ActivityThread.performLaunchActivity（ActivityThread。 java:2180) 08:11:43.923: 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 08:11:43.923: 在 android.app.ActivityThread.access$600(ActivityThread.java:141) 08:11 ：43.923: 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234) 08:11:43.923: 在 android.os.Handler.dispatchMessage(Handler.java:99) 08:11:43.923: 在 android.os .Looper.loop(Looper.java:137) 08:11:43.923: 在 android.app.ActivityThread.main(ActivityThread.java:5039) 08:11:43.923: 在 java.lang.reflect.Method.invokeNative(Native方法) 08:11:43.923: 在 java.lang.reflect.Method.invoke(Method.java:511) 08:11:43.923: 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java: 793) 08:11:43.923: 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 08:11:43.923: 在 dalvik.system.NativeStart.main(本机方法) 08:11:43.923 ：引起：java.lang.NullPointerException 08:11:43.923：在 com.example.sound.Messages.onCreate(Messages.java:18) 08:11:43.923：在 android.app.Activity。performCreate(Activity.java:5104) 08:11:43.923: 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080) 08:11:43.923: 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)

**第 18 行是：**

```
tv.setText(json.length()); 
```

在出现上述错误之前，我也得到了很多：

```
Unexpected value from nativeGetEnabledTags: 0 
```

我正在使用的 URL（出于测试目的，[http://docs.blackberry.com/sampledata.json](http://docs.blackberry.com/sampledata.json)）已启动并正常工作。我是 Android 开发和 JSON 的新手。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T08:33:22.773

这是因为您要么在不允许的 android 版本 >= 3.0 的主线程上执行网络操作。

要解决此问题，请使用

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
 StrictMode.setThreadPolicy(policy); 
```

或者

```
Use AsyncTask 
```

[从http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)读取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:57:22.040

感谢@TGMCians，ASyncTask 完成了这项工作。这是我的活动现在的样子：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.TextView;

public class Messages extends Activity {
    String THEURL = "http://docs.blackberry.com/sampledata.json";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_messages);
        new RetrieveMessages().execute(THEURL);
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        finish();
    }
    private class RetrieveMessages extends AsyncTask<String, Void, String> {
        protected String doInBackground(String... urls) {
            HttpClient client = new DefaultHttpClient();
            String json = "";
            try {
                String line = "";
                HttpGet request = new HttpGet(urls[0]);
                HttpResponse response = client.execute(request);
                BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
                while ((line = rd.readLine()) != null) {
                    json += line + System.getProperty("line.separator");
                }
            } catch (IllegalArgumentException e1) {
                e1.printStackTrace();
            } catch (IOException e2) {
                e2.printStackTrace();
            }
            return json;
        }

        protected void onProgressUpdate(Void... progress) {

        }

        protected void onPostExecute(String result) {
            TextView tv = (TextView) findViewById(R.id.tv_messages);
            tv.setText(result);
        }
    }
} 
```

# ios - 在 UITableView 和呈现的 UIViewController 之间共享数据模型？

> ID：14670680
> 
> 赞同：0
> 
> 时间：2013-02-03T08:23:40.387
> 
> 标签：ios, objective-c, model-view-controller, model

我有一个 UITableView ，它在点击单元格时以模态方式呈现 UIViewController 。UIViewController 从与点击的单元格对应的模型对象接收数据，并显示一个界面来编辑这些数据。当用户完成编辑时，点击按钮关闭 UIViewController，并将编辑写入模型对象。

以下代码会出现任何内存或设计问题吗？

在呈现 UITableView 子类实现时，充当呈现的 UIViewController 的委托：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    UINavigationController *navigationController = segue.destinationViewController;
    navigationController.delegate = this;
    navigationController.dataModel = someDataModel;
}

// delegate callback
- (void) onViewControllerDone: (UIViewController *)controller {
    [self.tableView reloadData];
} 
```

在呈现的 UIViewController 子类实现中：

```
- (IBAction) done: (id)sender {
    // directly modify dataModel passed into UIViewController with data from UI
    [self.dataModel.someProperty setString: self.textView.text];

    [self.delegate onViewControllerDone:self];
} 
```

将数据模型传递到视图中并让视图进行更改，这听起来很有趣。我是 Objective-C / iOS 开发的新手，不确定是否有更好/首选的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:01:39.890

在我看来，尽管您的问题可能有更优雅的方法，但您正在做的事情没有任何缺陷。一种选择是通过委托将信息传递回原始控制器，例如，一旦您完成了对某个字段的编辑，委托就会立即收到通知并对数据模型进行所需的更改。这样，就不会来回传递模型引用，并且您实际上可以确保只有一个控制器负责编辑其内容。就像是：

```
- (void)doneEditing {
   if ([_delegate respondsToSelector:@selector(fieldChanged:)]) {
      [_delegate fieldChanged:self.newFieldValue];
   }
} 
```

# asp.net - iis服务器部署奇怪的循环

> ID：14670681
> 
> 赞同：1
> 
> 时间：2013-02-03T08:23:57.830
> 
> 标签：asp.net, iis

我在尝试使用站点时创建了站点的部署包，但出现以下错误：

此请求的查询字符串长度超过了配置的 maxQueryStringLength 值。

地址栏看起来像这样。这在视觉工作室中不会发生

```
http://localhost/MyServer/Login.aspx?ReturnUrl=%2fMyServer%2fLogin.aspx%3fReturnUrl%3d%252fMyServer%252fLogin.aspx%253fReturnUrl%253d%25252fMyServer%25252fLogin.aspx%25253fReturnUrl%25253d%2525252fMyServer%2525252fLogin.aspx%2525253fReturnUrl%2525253d%252525252fMyServer%252525252fLogin.aspx%252525253fReturnUrl%252525253d%25252525252fMyServer%25252525252fLogin.aspx%25252525253fReturnUrl%25252525253d%2525252525252fMyServer%2525252525252fLogin.aspx%2525252525253fReturnUrl%2525252525253d%252525252525252fMyServer%252525252525252fLogin.aspx%252525252525253fReturnUrl%252525252525253d%25252525252525252fMyServer%25252525252525252fLogin.aspx%25252525252525253fReturnUrl%25252525252525253d%2525252525252525252fMyServer%2525252525252525252fLogin.aspx%2525252525252525253fReturnUrl%2525252525252525253d%252525252525252525252fMyServer%252525252525252525252fLogin.aspx%252525252525252525253fReturnUrl%252525252525252525253d%25252525252525252525252fMyServer%25252525252525252525252fLogin.aspx%25252525252525252525253fReturnUrl%25252525252525252525253d%2525252525252525252525252fMyServer%2525252525252525252525252fLogin.aspx%2525252525252525252525253fReturnUrl%2525252525252525252525253d%252525252525252525252525252fMyServer%252525252525252525252525252fLogin.aspx%252525252525252525252525253fReturnUrl%252525252525252525252525253d%25252525252525252525252525252fMyServer%25252525252525252525252525252fLogin.aspx%25252525252525252525252525253fReturnUrl%25252525252525252525252525253d%2525252525252525252525252525252fMyServer%2525252525252525252525252525252fLogin.aspx%2525252525252525252525252525253fReturnUrl%2525252525252525252525252525253d%252525252525252525252525252525252fMyServer%252525252525252525252525252525252fLogin.aspx%252525252525252525252525252525253fReturnUrl%252525252525252525252525252525253d%25252525252525252525252525252525252fMyServer%25252525252525252525252525252525252fLogin.aspx%25252525252525252525252525252525253fReturnUrl%25252525252525252525252525252525253d%2525252525252525252525252525252525252fMyServer%2525252525252525252525252525252525252f 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:42:09.107

只是预感：可能是匿名用户无法访问您的登录页面。所以它重定向到登录页面，然后重定向到登录页面。

查看 web.config 以设置正确的访问权限。

```
<location path="login.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T10:51:27.640

似乎您有循环导航。请提供您正在访问的`page load`事件代码`login.aspx`和第二页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T08:45:37.000

看起来您在 Visual Studio 中的解决方案是从一个模板构建的，该模板内置了某种基于表单的身份验证。我很确定您可以在 web.config 中禁用它。

# php - 无法在 codeigniter 中使用 where 和 join 条件获得结果

> ID：14670685
> 
> 赞同：1
> 
> 时间：2013-02-03T08:24:28.757
> 
> 标签：php, mysql, codeigniter

我正在尝试获得类似的结果`select * from bookdetails where display_id = $id with few foreign key join condition`

我已经编写了以下查询，但它显示的错误如下：

> 致命错误：在 C:\xampp\htdocs\project 中第 432 行的非对象上调用成员函数 num_rows()，即 *if ($query->num_rows() > 0)...

模型.php

```
public function get_all_book_list_atHomeTop($id, $limit, $start)
{
    $this->load->database();  
    $this->db->limit($limit, $start);  
    $this->db->get_where('bookdetails', array('display_id' => $id));  

    //-------join condition ------------------

    //------------Ends here Join condition  
    $query = $this->db->get(); 

    if ($query->num_rows() > 0)
    {
        foreach ($query->result() as $row)
        {
            $data[] = $row;
        }
        return $data;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T08:27:38.610

您在`get()`函数中缺少表名：

```
 $query = $this->db->get('bookdetails'); 
```

`get_where()`或者您可以简单地用开头的语句替换它：

```
$query = $this->db->get_where('bookdetails',array('display_id'=>$id)); 
```

# xml - 客户端如何知道 REST 中对象的正确结构？

> ID：14670692
> 
> 赞同：1
> 
> 时间：2013-02-03T08:25:07.070
> 
> 标签：xml, rest, jax-rs

我正在使用带有 RESTEasy 的 Java 和 JBoss7。我创建了我的 RESTful 服务和一个客户端来测试我的服务：

```
ClientRequest request = new ClientRequest(
         "http://localhost:8080/test/rest/cars");
request.accept(MediaType.APPLICATION_XML);

String input = "<car><carId>10.99</carId><carName>Ford</carName></car>";

request.body(MediaType.APPLICATION_XML, input);
ClientResponse<String> response = request.post(String.class);
System.out.println("Output from Server .... \n");
System.out.println(response.getStatus()); 
```

这完美！这里唯一的问题是在客户端。我必须像你看到的那样发送硬编码的 XML，`String input = "<car><carId>10.99</carId><carName>Ford</carName></car>";`因为客户端没有我拥有的对象。

客户端将模仿它从 get 方法接收到的 XML 表示，这对于庞大而复杂的资源可能很难做到。

*   有没有办法让客户端知道他们想要发送的对象的正确结构，或者他们必须发送类型化的 XML？

*   我可以给客户端一些类似于 WSDL 或 XSD 的东西，或者这会违反 REST 的约束吗？

*   我见过人们会使用 Xsteam 和 unmarshalling 的解决方案，但他们假设客户端具有资源的类表示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:16:43.873

**不要在客户端代码中硬编码 XML 消息**。XML 是在服务和客户端之间传递的内容。

让我们假设一种情况，您将相同的服务暴露在不同的位置，其中一个只理解 XML 格式，而另一个只理解 JSON。如果您要使用带有硬编码消息的客户端，您将只能调用与 XML 对话的服务。记住 REST 是关于资源的表示。

> 因为客户没有我拥有的对象。客户端将模仿他从 get 方法接收到的 XML 表示，这对于庞大而复杂的资源可能很难做到。
> 
> 有没有办法让客户端知道他们想要发送的对象的正确结构，或者他们必须发送类型化的 XML？

考虑您的客户端是一个通常与对象一起工作的 Java 应用程序。对象代表资源（例如`car`），这就是您的客户在内部使用的。

当需要调用服务时，您只需将这些对象编组为 XML。当服务响应时，您将 XML 解组为对象。

根据使用的`Accept`和`Content-Type`标头，只需选择适当的编组器/解组器即可。然后，您甚至可以将某些内容作为 XML 发送并作为 JSON 接收回来。

当然，[RESTeasy 客户端](http://architects.dzone.com/news/three-forms-resteasy-client)可以使用与服务端相同的注解，甚至可以在服务和客户端之间重用一些 Java 类型（类），但是当客户端使用其他技术编写时，这些 Java 类将变得无用: C#, Python, C++ 等

为什么客户应该关心服务使用的类型？它应该只关心表示。在内部，客户端可以使用它想要的任何类型（独立于服务），并在需要与服务交谈时与适当的表示进行通信。

> 我可以给客户一些类似于 WSDL 或 xsd 的东西，或者这会违反 REST 的约束吗？

这有点棘手。

REST 是一种用于构建分布式系统的软件架构风格。不幸的是，不同的人对这种“风格”的理解不同，因此存在大量所谓的 RESTful API，它们简单地描述了使用什么方法、在什么 URL 上以及向前发送回什么“类型”。

正如 Roy T. Fielding 自己所强调的那样，这是执行 REST 的错误方式：[REST API 必须是超文本驱动的](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)。

RESTful 客户端不需要事先了解要访问的 URL 或用于通信的“类型”。了解交换中使用的媒体类型就是它所需要的（我不是在谈论`application/xml`它只是说明了消息的格式，没有语义或内部内容的描述）。

因此，为什么服务要提供 WSDL？实际上（虽然 WSDL 2.0 可以描述 RESTful 服务）它实际上是我们正在谈论的[WADL 。](http://en.wikipedia.org/wiki/Web_Application_Description_Language)但是 REST 社区实际上并没有考虑到 WADL，所以这也是[“风格”的问题](http://www.infoq.com/news/2007/06/rest-description-language)。

如果您正在“按书”执行 REST，则不需要 WADL。如果您实际上只有一个基于 HTTP 的接口，我假设您可以提供一个 WADL 来简化其他程序员在开发客户端时的生活。

> 我见过人们会使用 Xsteam 和 unmarshalling 的解决方案，但他们假设客户端具有资源的类表示。

RESTeasy 支持 JAXB 编组，因此应该不费吹灰之力。

# css - 定位父选择器 css3

> ID：14670696
> 
> 赞同：0
> 
> 时间：2013-02-03T08:25:41.503
> 
> 标签：css, sass

> **可能重复：**
> [活动孩子的父母的复杂 CSS 选择器](https://stackoverflow.com/questions/45004/complex-css-selector-for-parent-of-active-child)

我有以下html：

```
<ul>
  <li><href ="#">One</a></li>
  <li><href ="#" class="active">Two</a></li>
  <li><href ="#">Three</a></li>
</ul> 
```

我想定位一个 li，他有一个活动类别的子主播：

我相信这样的事情会在 css4 中起作用：

```
li! > a.active { 
```

我有以下不工作的 sass：

```
ul{
  li{
    a.active &{
      //whatever
    }
  }
} 
```

针对有某个班级的孩子的父母的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:44:33.830

由于在当前的 CSS 中没有办法做到这一点，像 SASS 和 LESS 这样的编译器只能做这么多。[如果您还没有看过，请在https://stackoverflow.com/a/1014958/1947535](https://stackoverflow.com/a/1014958/1947535)阅读 Dan 对 CSS 中父选择器的回答（尽管您可能已经给出了 CSS4 规范片段）

# android - Android apitrace 无法运行

> ID：14670706
> 
> 赞同：2
> 
> 时间：2013-02-03T08:27:25.323
> 
> 标签：android, opengl-es

我想在 android 上使用 apitrace 项目。我按照[自述文件中的说明进行操作](https://wiki.mozilla.org/B2G/Debugging_OpenGL)。

但是在创建的地方找不到任何痕迹。我运行这个命令

```
adb shell TRACE_FILE=/data/test.trace LD_PRELOAD=/data/egltrace.so am start -n APP_NAME 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T14:45:33.250

我尝试按照*apitrace*原始发行版的 Dalvik.markdown 中的说明进行操作，但没有成功。

说明说要设置两个属性：`wrap._process_name_`和`debug.apitrace.procname`。根据这些说明，必须将前者设置为`LD_PRELOAD=/data/egltrace.so`。启动应用程序时，我仍然不会在 logcat 中生成任何跟踪或任何与 apitrace 相关的消息。

通过将`LD_PRELOAD`指令放入脚本并将其用作包装器，我取得了更大的成功。这是我使用的脚本，称为*/data/apitrace.sh*：

```
LD_PRELOAD=/data/egltrace.so exec $@ 
```

您还可以设置`TRACE_FILE`环境变量以指定应写入跟踪文件的路径。否则它将是_/data/app_process.trace_。例如：

```
TRACE_FILE=/data/apitraces/mytrace.trace LD_PRELOAD=/data/egltrace.so exec $@ 
```

我相信 apitrace 负责在文件名中添加数字以防止覆盖现有的数字。因此，您将拥有*mytrace.trace*、*mytrace.1.trace*等。

因此，有了这个脚本，我设置了如下属性：

```
adb shell setprop wrap._process_name_ /data/apitrace.sh
adb shell setprop debug.apitrace.procname _process_name_ 
```

然后我启动应用程序。我在 logcat 中看到如下内容：

```
I/dalvikvm( 5980): Exec: /system/bin/sh -c /data/apitrace.sh /system/bin/app_process /system/bin --application '--nice-name=_process_name_' com.android.internal.os.WrapperInit 25 17 'android.app.ActivityThread'
D/apitrace( 5991): apitrace: loaded
D/apitrace( 5991): apitrace[5991]: enabled for _process_name_
D/apitrace( 5991): apitrace: tracing to /data/app_process.trace 
```

我正在使用基于 Android 4.2.2 的 CyanogenMod 10.1.3。

# android - 取消注册应用程序后阻止Android发送通知？

> ID：14670715
> 
> 赞同：1
> 
> 时间：2013-02-03T08:28:07.563
> 
> 标签：android, push-notification, google-cloud-messaging

我对 Google 通知服务器有一个奇怪的问题。当我安装/注册应用程序时，我会从 Google 获得一个设备 ID，我将使用它从服务器发送通知。我从服务器向所有注册的设备发送通知。问题是，每当设备取消注册应用程序并再次注册时，设备都会收到 2 个通知。发生这种情况是因为现在我有 2 个不同的设备 ID。我第一次安装应用程序时获得了第一个，当我取消注册并再次注册该应用程序时获得了第二个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:20:50.630

如果您使用旧设备令牌发送通知，则响应应包含规范注册 ID，它告诉您应该从数据库中删除旧注册 ID。此外，当应用程序注销时，它应该向您的服务器发送一条注销消息，服务器应该从数据库中删除注册 id。如果用户卸载了应用程序（在这种情况下无法通知您的服务器）然后再次安装，您应该只依赖规范注册 ID。最后一件事 - 如果您在用户取消注册之后再次注册之前尝试将通知发送到旧的注册 ID，您应该会从 Google 收到一条错误消息，表明重新注册 ID 已不再注册（我不记得您是否'

# bash - 在 bash 脚本中模拟用户输入

> ID：14670716
> 
> 赞同：58
> 
> 时间：2013-02-03T08:28:19.267
> 
> 标签：bash, input, emulation, user-input

我正在创建自己的 bash 脚本，但我现在被困住了。基本上，该脚本将用于在 CentOS 中自动设置服务器。一些软件通常要求用户输入密码。我希望脚本将我生成并存储为变量的密码而不是询问用户。

当安装过程中出现“新密码：”消息时，如何使脚本将存储在变量中的值`$key`，就像用户使用 bash 脚本键入一样？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-03T08:30:39.590

你应该发现'expect'命令会做你需要它做的事情。它广泛可用。

*   [有关示例，请参见此处](http://www.thegeekstuff.com/2010/10/expect-examples/)
*   [更多示例在这里](https://likegeeks.com/expect-command/)

**一个非常粗略的例子：**

```
#!/usr/bin/expect
set pass "mysecret"

spawn /usr/bin/passwd

expect "password: "
send "$pass"
expect "password: "
send "$pass" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T08:38:31.727

这是我写的一个片段；询问用户密码并将其设置在 /etc/passwd 中。你可以稍微操纵它来获得你需要的东西：

```
echo -n " Please enter the password for the given user: "
read userPass
useradd $userAcct && echo -e "$userPass\n$userPass\n" | passwd $userAcct > /dev/null 2>&1 && echo " User account has been created." || echo " ERR -- User account creation failed!" 
```

# database - 如何使用 SYSCS_DIAG.LOCK_TABLE（表始终显示为空）检查 Derby 锁？

> ID：14670722
> 
> 赞同：1
> 
> 时间：2013-02-03T08:28:28.563
> 
> 标签：database, glassfish, glassfish-3, derby

我正在尝试调试 Glassfish（EJB 应用程序）下的 Derby 死锁问题。我想在各个点查看锁表，所以我编写了以下代码。问题是在我调用它的每个地方，锁表总是以空的形式返回。我错过了什么？

```
private void dumpLockTable()
{
    try ( Connection connection = dataSource.getConnection() )
    {
        PreparedStatement ps = connection.prepareStatement( "SELECT * FROM SYSCS_DIAG.LOCK_TABLE" );
        ResultSet rs = ps.executeQuery();
        ResultSetMetaData rsmd = rs.getMetaData();
        int columns = rsmd.getColumnCount();            
        StringBuilder sb = new StringBuilder();
        sb.append( "Lock Table\n" );
        while( rs.next() )
        {
            for ( int col = 1; col <= columns; col++ )
            {
                sb.append( rs.getString( col ) );
                sb.append( "\t|" );
            }
            sb.append( "\n" );
        }
        logger.info( sb.toString() );
    }

    catch ( SQLException sqle )
    {
        logger.throwing( LOG_CLASS_NAME, "dumpLockTable", sqle );
    }
} 
```

这是 Glassfish 3.1.2.1 下的 Derby 10.8。我正在通过以下方式获取数据源：

```
@Resource(mappedName="jdbc/myderbyjndi")
private DataSource dataSource; 
```

所有其他 Derby 活动都是通过实体 bean 和实体管理器进行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:36:12.747

你的代码对我来说看起来不错；我不确定它有什么问题。

但也许当你运行它时，那时根本没有任何锁被持有。

您可以通过使用“ij”工具和两个“ij”会话来开始诊断过程：

1.  在第一个会话中，连接到数据库并使用 LOCK TABLE 语句锁定一些表
2.  在第二个会话中，连接到数据库并运行 SELECT * FROM SYSCS_DIAG.LOCK_TABLE

看看能不能在这样的场景下看到 LOCK_TABLE 诊断表的内容。一旦可以，您就可以使用相同的技术（在运行代码时在 ij 会话中人为地持有锁）来进一步调试您的子例程代码。

[在wiki](http://wiki.apache.org/db-derby/LockDebugging)和[docs](http://db.apache.org/derby/docs/10.9/devguide/cdevconcepts30291.html)中有一些关于诊断 Derby 锁定行为的好建议。

您可能想为[这个 Derby 增强请求](https://issues.apache.org/jira/browse/DERBY-666)投票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:03:35.713

我从 Derby 邮件列表中得到了一个答案，我认为我应该添加它以确保完整性。显然，实体管理器实际上并没有立即将命令发送到数据库（我认为这听起来很熟悉，但我已经忘记了），所以这可以解释为什么锁表没有显示任何锁。如果我在执行锁表转储之前添加一个 entityManager.flush()，我会得到一个很好的锁列表。现在我可以调试导致死锁的序列。

# windows - 使 Windows 上的字体像 Mac/Linux 一样渲染：禁用字体提示和/或在客户端处理抗锯齿

> ID：14670724
> 
> 赞同：4
> 
> 时间：2013-02-03T08:29:06.610
> 
> 标签：windows, fonts, antialiasing, truetype, princexml

是否可以通过 javascript 或任何其他客户端代码在 Windows 上关闭“字体提示”？

我希望 Windows 上的浏览​​器能够模仿它们在 Mac 上的外观 - 因为我使用的是 HTML 到 PDF 工具 (PrinceXML)，我认为这是迄今为止市场上最好的，但它可以像 Mac 一样呈现字体。因此，Windows 用户将创建基于 HTML 的设计，然后由 PDF 转换工具呈现这些设计。但是字体在 PDF 上的外观与在基于 Windows 的浏览器中的不同——我希望它们看起来相同。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-01T13:10:39.027

我不确定您所说的“像 Mac 一样渲染字体”是什么意思，但 Prince 文档[说它](https://www.princexml.com/doc/6.0/fonts/)使用 Times New Roman、Arial 和 Courier New，并提供了有关如何更改的说明。

# retina-display - Chrome for iPad 视网膜图标

> ID：14670728
> 
> 赞同：1
> 
> 时间：2013-02-03T08:29:48.080
> 
> 标签：retina-display, apple-touch-icon, chrome-ios

我注意到，虽然视网膜`apple-touch-icons`在 Safari 中工作，但 iPad 版 Chrome 似乎只呈现最低分辨率的图标。与 Safari 和 iPad 版 Chrome 中显示的页面完全相同：

![图标在 Safari 中看起来很棒](../Images/4a7c2e9b81a433bd452fb0b9d9a3cb2e.png) ![图标在 Chrome 中显得模糊，因为它不使用高分辨率版本](../Images/e6271d69e4149d143234e51d6e8270e2.png)

```
<link rel="apple-touch-icon" href="{$cdnUrl}/images/apple/apple-touch-icon-57.png">
<link rel="apple-touch-icon-precomposed" href="{$cdnUrl}/images/apple/apple-touch-icon-57.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="{$cdnUrl}/images/apple/apple-touch-icon-72.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="{$cdnUrl}/images/apple/apple-touch-icon-114.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="{$cdnUrl}/images/apple/apple-touch-icon-144.png"> 
```

有没有办法告诉 Chrome for iPad 应该使用哪个版本的图标？

# mongodb - 将地理空间路径与 MongoDB 进行比较

> ID：14670729
> 
> 赞同：2
> 
> 时间：2013-02-03T08:30:15.847
> 
> 标签：mongodb, geospatial, bson

我正在开发一个移动应用程序，该应用程序定期跟踪用户的位置，以允许他在地图上绘制旅程的路径。我们想添加一个可选功能，该功能将告诉他该应用程序的其他用户在他所查看的时间范围内进行了类似的旅程，无论是今天的通勤时间还是旅行的最后一个月。我们将其称为“路径匹配”。

这些数据目前以二进制格式记录到 iOS 和 Android 上应用程序的私有存储目录​​中的文件中，可以轻松快速地扫描以读取位置。每个文件包含一天的位置，一般运行到 80KB 左右。

为了能够实现路径匹配功能，我们显然需要开始将这些位置日志上传到我们正在运行 PHP 的服务器（当然需要用户许可）。有人建议 MongoDB 的地理空间能力 - 但我有几个问题也许人们可以帮助我：

1.  似乎我们可以更改我们的位置记录以使用 BSON。第一个字段是设备或用户 ID，然后是特定日期的位置列表。然后可以将该文件上传到我们的服务器并推送到 MongoDB 存储中。然而，在线文档似乎只涉及导入由 mongodump 创建的 BSON 文件。格式是否足够稳定，任何应用程序都可以编写 MongoDB 直接读取的 BSON 文件？

2.  MongoDB 是否能够对包含多个位置的文档或在形成跨多个文档的路径的位置运行地理空间查询？或者这是否让您觉得在 PHP 方面需要数据库之外的过多逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T04:15:43.060

1.  格式是完全稳定的，但没有太多工具可以做你描述的事情。通常，您会将其上传到后端，并且最终`$_POST['locations']`会出现在一个关联数组的数组中。对其进行清理并将其保存到数据库中，例如：

    $locs = sanitize($_POST['locations']); $doc = array('path' => array('type' => 'LineString', 'coordinates' => $locs), 'user' => $userId); $collection->insert($doc);

    在上面的例子中，我使用了一些最新的地理资料（[http://docs.mongodb.org/manual/release-notes/2.4/#new-geospatial-indexes-with-geojson-and-improved-spherical -geometry](http://docs.mongodb.org/manual/release-notes/2.4/#new-geospatial-indexes-with-geojson-and-improved-spherical-geometry)），你需要一个夜间构建来获得它，但它应该在大约一个月内进入稳定构建。如果您在那之前需要它，您可以使用较旧的地理 API：[http](http://docs.mongodb.org/manual/core/geospatial-indexes/) ://docs.mongodb.org/manual/core/geospatial-indexes/ 。

    MongoDB 不读取 BSON 文件，但您可以使用 mongorestore 手动加载它们。不过，我强烈建议让驱动程序为您做低级的事情！

2.  您可以拥有一个包含一条线（在新的地理资料中）和一组点（在旧的地理资料中）的文档。我不确定“跨多个文档的路径”是什么意思。

    编辑添加：根据您的评论，您可能想尝试`{path : {$near : {$geometry : userPath}}}`查找“附近”路径。您还可以尝试围绕用户的路径制作一个多边形并在多边形内查询 docs $。

# facebook - facebook 的 $_REQUEST[ "signed_request" ] 可以伪造吗

> ID：14670737
> 
> 赞同：0
> 
> 时间：2013-02-03T08:30:58.920
> 
> 标签：facebook, request, facebook-canvas

我有 my_app ，它只能作为 facebook 画布应用程序访问，我正在寻找 my_app 将在加载阶段执行的可靠测试，以验证它是否被加载到 facebook iframe 中。

在合法的 facebook iframe 中，$_REQUEST["signed_request"] 是可读的。但我想知道另一个网页是否会以某种方式尝试加载 my_app 并发送假的“signed_request”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:45:54.183

签名的请求使用特定于您的应用的密钥进行签名。除非有人设法从 FB 服务器窃取了该密钥，并且您验证了签名请求是有效的（带有`parse_signed_request`），否则您应该是安全的。

# php - jQuery fadeOut() 在 PHP 回显中不起作用

> ID：14670738
> 
> 赞同：1
> 
> 时间：2013-02-03T08:31:01.043
> 
> 标签：php, jquery, fadeout

我一直在尝试，搜索，尝试，研究一整夜，看看如何在成功的 PHP 登录后让页面淡出，然后在成功淡出后重定向到受保护的页面。

这是我目前所拥有的，尽管它是我一直在尝试的众多更改中的最新更改之一：

链接：ournewlife.com/002/login.php

和代码：

```
<?php

session_start();

if ($_GET['login']) {
     // Only load the code below if the GET
     // variable 'login' is set. You will
     // set this when you submit the form

if (in_array($_POST['entryphrase'], array('enter', 'goin', 'entrezvous', 'opensesame'))) {
         // Load code below if both username
         // and password submitted are correct

         $_SESSION['loggedin'] = 1;
          // Set session variable

          echo "<script type='text/javascript'>";
          echo "$('#ournewform').fadeOut(2222);";  
          echo "</script>";

//        header("Location: protected.php");
         exit;
         // Redirect to a protected page

     } else echo "";
     // Otherwise, echo the error message

}

?>

<form action="?login=1" method="post" id="ournewform">
    <input type="text" id="ournewlogin" name="entryphrase" class="fontface" />
</form> 
```

我还尝试在从单独的 .js 文件中按回车键后加载转换，但是 PHP 不会更新会话，并且当它重定向时，登录尚未得到验证，并且会将我吐回登录页面.

我在这里有什么遗漏吗？我只是想在有效登录后淡出页面，然后成功进入受保护的页面。

我现在注释掉了重定向行，以便我可以在 jQuery 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:42:09.253

你可以试试这样的。

```
$(document).ready(function() {
    $('#ournewform').fadeOut(2222);
    window.location ='newpage.html';
}); 
```

在您的 php 脚本中，您可以将其分配给一些变量，例如

```
<?php
$script = "$(document).ready(function() {
               $('#ournewform').fadeOut(2222);
               window.location ='newpage.html';
           });"; 
```

然后在您的`<body>`标签中，最好在页面底部，在关闭标签之前，您可以在标签内打印变量`<script>`，例如：

```
<?php if(isset($script):?>
<script type='text/javascript'><?php print $script;?></script>
<?php endif;?> 
```

将 javascript 放在页面底部将确保在表单加载后触发淡出事件。

您还可以使用`setTimeOut`函数将淡出延迟几毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:46:54.020

尝试将 Javascript 代码与 PHP 分开。如果你先测试条件是否满足然后注入javascript代码会更优雅：

```
<?php

session_start();

if ($_GET['login']) {
     // Only load the code below if the GET
     // variable 'login' is set. You will
     // set this when you submit the form

if (in_array($_POST['entryphrase'], array('enter', 'goin', 'entrezvous', 'opensesame'))) {
         // Load code below if both username
         // and password submitted are correct

         $_SESSION['loggedin'] = 1;
          // Set session variable
?>

<script type='text/javascript'>
      $('#ournewform').fadeOut(2222);      
</script>

<?php }
else echo "";
     // Otherwise, echo the error message
?> 
```

并且不要忘记在标题部分包含 Jquery 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T08:47:06.013

要达到这种效果，您需要做的是：使用 ajax 函数并登录用户，根据响应，您可以选择淡出登录框或显示错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T08:36:42.853

您缺少 jquery 插件和文档就绪处理程序：

```
 echo "<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>";
      echo "<script type='text/javascript'>";
      echo "$(function(){";
      echo "$('#ournewform').fadeOut(2222);";  
      echo "});";
      echo "</script>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T16:35:53.027

我在别处寻找这个问题的答案，但几乎没有找到任何帮助。但是，我确实在这里找到了一个登录脚本：

[http://codecanyon.net/item/simple-secure-login-v3/2748367?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=phpcodemonkey](http://codecanyon.net/item/simple-secure-login-v3/2748367?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=phpcodemonkey)

我仍然很难淡出，但似乎这种形式使用了 ajax 等，因此它可能会有更多用处。我正在尝试在此处的另一个线程上收集解决方案：

[ajax登录提交后淡出](https://stackoverflow.com/questions/14790172/fadeout-after-ajax-login-submission)

# qt - 如何更改 Qt 中分配的 QtObjects 的顺序？

> ID：14670741
> 
> 赞同：0
> 
> 时间：2013-02-03T08:31:35.457
> 
> 标签：qt

我正在使用 QtCreator，并在单个小部件中创建了带有 LineEdit 对象的 GUI。当我想返回一个小部件的对象时，我调用：

```
QList<QLineEdit *> boxes = ui->gridLayoutWidget->findChildren<QLineEdit *>(); 
```

不幸的是，这些对象在 QList 中的顺序取决于它们在“ui”文件中出现的顺序。我怎么能去改变订单？

例如，我的 ui 文件如下所示：

```
<layout class="QGridLayout" name="gridLayout">
 <item row="5" column="8" alignment="Qt::AlignHCenter|Qt::AlignVCenter">
  <widget class="QLineEdit" name="le_e7">
  </widget>
 </item>
 <item row="8" column="2" alignment="Qt::AlignHCenter|Qt::AlignVCenter">
  <widget class="QLineEdit" name="le_g3"> 
```

等等。我有遵循“a1、a2、a3 等”约定的 QLineEdit 对象。但是它们看起来像上面的代码一样乱序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:08:53.387

您可以对 QList 进行排序，使用[qSort](http://doc.qt.digia.com/4.7-snapshot/qtalgorithms.html#qSort-2)并提供您自己的*lessThan*函数（函子或 lambda），它将按照您需要的顺序对列表进行排序。

# magento - Magento：从包装器中删除页脚

> ID：14670743
> 
> 赞同：0
> 
> 时间：2013-02-03T08:31:44.300
> 
> 标签：magento, layout, themes, footer

我需要弄清楚如何从包装器中删除页脚并将其添加到页面末尾。我想使用一个宽度为浏览器分辨率 100% 的页脚，这在包装时是不可能的。

我想我需要在我的主题中更改 page.xml。还是local.xml？我想以正确的方式做到这一点...

在 page.xml 我发现：

```
 <block type="page/html_footer" name="footer" as="footer" template="page/html/footer.phtml">
        <block type="page/html_wrapper" name="bottom.container" as="bottomContainer" translate="label">
            <label>Page Footer</label>
            <action method="setElementClass"><value>bottom-container</value></action>
        </block>
        <block type="page/template_links" name="footer_links" as="footer_links" template="page/template/links.phtml"/>
        <block type="page/switch" name="store_switcher" as="store_switcher" template="page/switch/stores.phtml"/>
    </block> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:10:25.023

尝试使页脚容器绝对，使其跳出正常流，然后将宽度设置为屏幕大小的 100%。我更喜欢你的 magento 安装有我的“页脚容器”类。html结构：

```
<div class="wrapper">
    <div class="page">
        <div class="footer-container">
            <div class="footer">
                <ul>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>
        </div>
    </div>
</div> 
```

样式.css

```
.footer-container{
    position: absolute;
    width: 100%;
    left: 0;
} 
```

之后，您需要设置内部 div 宽度并将其居中：

```
.footer{
    width: 900px;  /* set width you want */
    margin: 0 auto;
} 
```

# c - 编译我的 C 程序时出现警告（char 格式，不同类型的 arg）

> ID：14670745
> 
> 赞同：-1
> 
> 时间：2013-02-03T08:32:01.790
> 
> 标签：c, char, stack, warnings, postfix-notation

我还没有学过指针，所以当有人问同样的问题时，我不知道其他答案在说什么：S ...

```
while(1)
{
    /* intializing variables for the while loop */
    temp1 = 0;
    temp2 = 0;
    val = 0;
    for(counter = 0; counter < 256; counter++)
    {
        input[counter] = ' ';
    }

    scanf("%s", &input);                                            /* gets user input */

    if(input[0] == 'p')                                             /* if user inputs p; program pops the first top element of stack and terminates the loop */
    {                                                               /* and the program overall                                                               */
        printf("%d", pop(stack));
        break;
    }
    if(input[0] == '+' || input[0] == '-' || input[0] == '*')       /* if operator is inputted; it pops 2 values and does the arithemetic process */
    {
        if(stackCounter == 1 || stackCounter == 0)                  /* If user tries to process operator when there are no elements in stack, gives error and terminates */
        {
            printf("%s", "Error! : Not enough elements in stack!");
            break;
        }
        else
        {
            temp1 = pop(stack);
            temp2 = pop(stack);

            push(stack, arithmetic(temp2, temp1, input[0]));
        }
    }
    else                                                            /* if none of the above, it stores the input value into the stack*/
    {
        val = atoi(input);                                          /* atoi is used to change string to integer */
        push(stack, val);
    }
} 
```

它是一个程序，用于执行与具有有限堆栈的后缀相同的操作。其他功能一切正常。当我在 Visual Studio 上编译和运行时，它可以正常工作，但是当我在 linux（用于测试我的程序）上运行它时，它就不起作用了。它只是给了我：“c：52：警告：char 格式，不同类型的 arg（arg 2）”。

我假设它是导致问题的 scanf 或 atoi 函数......

有没有什么方法可以通过更改几个字母来轻松修复这个程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:35:11.450

`&`读取字符数组时不应使用与号 ( )。改变： `scanf("%s", &input);`一切`scanf("%s", input);` 都应该没问题。

`input`已经是指向将存储字符数组的内存块开头的指针，无需获取其地址。

# java - 从 AsyncTask 将数组 [] 返回到主 Activity

> ID：14670753
> 
> 赞同：6
> 
> 时间：2013-02-03T08:33:20.980
> 
> 标签：java, android, arrays, android-listview, android-asynctask

当我试图从该数组创建一个 ListView 时，我试图将一个数组从我的 AsyncTask 返回到我的 Activity。不幸的是，程序会出现错误，因为它不允许我返回数组。我的代码如下：

主菜单类：

```
public class MainMenu extends Activity {
String username;
public String[] returnValue;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_menu);
    username ="user1";  

if (checkInternetConnection()) {

    try {
        MainAsyncTask mat = new MainAsyncTask(MainMenu.this);
        mat.execute(username);
    } catch (Exception e) {
        e.printStackTrace();
    }
} else {
    Toast.makeText(getApplicationContext(),"No internet connection. Please try again later",Toast.LENGTH_SHORT).show();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main_menu, menu);
    return true;
}

private boolean checkInternetConnection() {
    ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    if (conMgr.getActiveNetworkInfo() != null
            && conMgr.getActiveNetworkInfo().isAvailable()
            && conMgr.getActiveNetworkInfo().isConnected()) {
        return true;
    } else {
        return false;
    }
}} 
```

主异步任务：

```
public class MainAsyncTask extends AsyncTask<String, Void, Integer> {
    private MainMenu main;
    private String responseText, http;
    private Ipaddress ipaddr = new Ipaddress(http);
    private Context context;

    public MainAsyncTask(MainMenu main) {
        this.main = main;
    }

    protected Integer doInBackground(String... arg0) {
        int responseCode = 0;
        try {
            HttpClient client = new HttpClient(main.getApplicationContext());
            Log.e("SE3", ipaddr.getIpAddress());
            HttpPost httpPost = new HttpPost(ipaddr.getIpAddress()
                    + "/MainServlet");

            List<NameValuePair> nvp = new ArrayList<NameValuePair>();

            JSONObject json = new JSONObject();
            json.put("username", arg0[0]);

            Log.e("SE3", arg0[0]);

            nvp.add(new BasicNameValuePair("data", json.toString()));
            httpPost.setEntity(new UrlEncodedFormEntity(nvp));

            HttpResponse response = client.execute(httpPost);

            if (response != null) {
                if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                    try {
                        BufferedReader reader = new BufferedReader(
                                new InputStreamReader(response.getEntity()
                                        .getContent()));
                        StringBuilder sb = new StringBuilder();
                        String line;
                        while ((line = reader.readLine()) != null) {
                            sb.append(line);
                        }
                        responseText = sb.toString();
                    } catch (IOException e) {
                        Log.e("SE3", "IO Exception in reading from stream.");
                        responseText = "Error";
                    }
                } else {
                    responseText = "Error";
                }
            } else {
                responseText = "Response is null";
            }
        } catch (Exception e) {
            responseCode = 408;
            responseText = "Response is null";
            e.printStackTrace();
        }
        return responseCode;
    }

    protected void onPostExecute(Integer result) {
        if (result == 408 || responseText.equals("Error")
                || responseText.equals("Response is null")) {
            Toast.makeText(main.getApplicationContext(),
                    "An error has occured, please try again later.",
                    Toast.LENGTH_SHORT).show();
        } else {
            JSONObject jObj;
            try {
                jObj = new JSONObject(responseText);
                String folderString = jObj.getString("folder");

                String [] folders = folderString.split(";");    
                //I need to return folders back to MainMenu Activity
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

我的问题是我应该如何修改，以便我能够在我的连接保持不变的情况下读取我的 Array。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T08:37:11.900

我建议您`MainAsyncTask`这样声明：

```
public class MainAsyncTask extends AsyncTask<String, Void, String[]> { 
```

然后修改`doInBackground`以执行您现在正在执行的所有处理`onPostExecute`（零件除外`Toast`）并让它返回`String[]`（或者`null`如果有错误）。您可以将结果代码存储在的实例变量中`MainAsyncTask`并`null`在错误时返回。然后`onPostExecute`可以访问与当前代码相同的信息。最后，如果没有错误，只需在主活动中调用一个方法`onPostExecute`来进行 UI 更新，并将`String[]`结果传递给它。

# scala - 使用 scala 在 play 2.0 中使用位标志

> ID：14670758
> 
> 赞同：0
> 
> 时间：2013-02-03T08:33:56.470
> 
> 标签：scala, playframework, playframework-2.0

谁能帮我在play 2.0中使用scala使用标志位？

我在每个字节上有 7 个选项复选框（0 - 注释
1 - 测试注释
2 - facebook
3 - 电话
4 - 谷歌
5 - 跳过
6 - 奖金小
7 - 奖金大
）

我想用列名选项（整数）存储数据库表。

我已经经历了[这个](http://www.cs.cf.ac.uk/Dave/C/node13.html#SECTION001321000000000000000) ，但我仍然不清楚我该怎么做。提前感谢您的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:55:41.440

Unless you are going to have huge number of records, I would avoid to do it that way. Your approach limits your options by storage (what happens if/when you need to add new set of options...). Verifing your data manually will be more painful.
Simpler way would be have either one column for each option or if starts not to be feasible (option2) have lookup table with all options one line has.
In any case, how you store data should be independent and separated of how you use play. To enter or edit data would be variation of contacts demo application...

# android - 我的自定义 ttf 字体文件不适用于 android 2.2

> ID：14670766
> 
> 赞同：0
> 
> 时间：2013-02-03T08:35:26.053
> 
> 标签：android, truetype

```
Paint paint = new Paint();
paint.setColor(Color.WHITE);
paint.setTextSize(fontSize);      
paint.setAntiAlias(true);    

Typeface t = Typeface.createFromAsset(context.getAssets(), name)
paint.setTypeface(t);
FontMetricsInt fm = paint.getFontMetricsInt();
if (fm.bottom-fm.top <= 0)
{
    Log.v("Cocos2dxBitmap", "invalid font metrics "+fm.bottom+", "+fm.top);
    return;
} 
```

此代码在 android 2.2 上失败，适用于以上任何版本，我不使用较低版本对其进行测试。

我没有找到任何与此相关的信息，我想这与我的 ttf 文件格式有关。

希望有人能就这个问题给我指教，谢谢。

编辑：我已将 ttf 更改为著名的中文字体 wqy.ttf，仍然有同样的问题。

# python - django 在模型中创建用户方法

> ID：14670768
> 
> 赞同：1
> 
> 时间：2013-02-03T08:35:43.193
> 
> 标签：python, django, model

嗨，我是 django 和 python 的新手。我想扩展 django`User`模型并在模型中添加一个方法，然后我从视图中`create_user`调用此方法。`create_user`但是，我收到一条错误消息。

我的模型：

```
from django.db import models
from django.contrib.auth.models import User

class Basic(models.Model):
    user = models.OneToOneField(User)
    gender = models.CharField(max_length = 10)

    def create_ck_user(acc_type, fb_id,fb_token):
        # "Create a user and insert into auth_user table"
        user = User.objects.create_user(acc_type,fb_id,fb_token)
        user.save()

class External(models.Model):
    user = models.OneToOneField(Basic)
    external_id = models.IntegerField()
    locale = models.CharField(max_length = 40)
    token = models.CharField(max_length = 250) 
```

鉴于，我做了这样的事情：

```
Basic.create_ck_user('acc_type' = 'fb', 'fb_id' = fb_id, 'fb_token' = fb_token) 
```

错误表明：

```
keyword can't be an expression (views.py, Basic.objects.create_ck_user('acc_type' = 'fb', 'fb_id' = fb_id, 'fb_token' = fb_token)) 
```

编辑：添加@classmehtod 后，将view.py 更改为：

```
...    
if (request.method == 'POST'):
            acc_type = request.POST.get('acc_type')
            fb_id = request.POST.get('fb_id')
            fb_token = request.POST.get('fb_token')

            Basic.create_ck_user(acc_type,fb_id,fb_token)
... 
```

错误消息显示：

> create_ck_user() 正好需要 3 个参数（给定 4 个）

检查错误详细信息，它包括“请求”变量，尽管我只传递了 3 个变量`acc_type`：`fb_id`和`fb_token`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:43:04.033

尝试

```
Basic.create_ck_user('fb', fb_id, fb_token) 
```

调用函数/方法时不会分配给字符串。您分配给变量。但是由于您在函数定义中使用了位置参数，所以您甚至不需要它们。

无论如何，分配给字符串永远不会起作用......字符串是不可变的对象。

此外，您希望此方法成为类方法。否则，您需要在调用它之前创建一个 User 实例。

```
# inside class definition  
    @classmethod
    def create_ck_user(cls, acc_type, fb_id,fb_token):
        # "Create a user and insert into auth_user table"
        user = cls.objects.create_user(acc_type,fb_id,fb_token)
        user.save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:23:42.080

看看这里： [https ://docs.djangoproject.com/en/dev/topics/auth/default/#creating-users](https://docs.djangoproject.com/en/dev/topics/auth/default/#creating-users)

只需查看文档，您就可以找到很多答案。

# performance - AVL树上的二叉搜索树

> ID：14670770
> 
> 赞同：7
> 
> 时间：2013-02-03T08:36:03.817
> 
> 标签：performance, data-structures, tree, binary-search-tree, avl-tree

据我所知，[AVL](http://en.wikipedia.org/wiki/AVL_tree)树和二[叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)之间的时间复杂度在平均情况下是相同的，在最坏的情况下 AVL 会击败 BST。这给了我一个提示，AVL 在与它们交互的所有可能方式上总是优于 BST，在平衡实现方面可能会增加一点复杂性。

有什么理由有人应该首先使用 BST 而不是 AVL？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-03T14:20:59.480

首先，获得最佳性能*并不是*编程的最终目标。因此，即使选项 B 总是比 A 更快并且消耗的内存更少，但这并不意味着它总是更好的选项，如果它更复杂的话。更复杂的代码需要更长的时间来编写，更难理解并且更有可能包含错误。因此，如果更简单但效率较低的选项 A 对您来说足够好，那么这意味着它是更好的选择。

现在，如果你想在没有平衡的情况下将 AVL 树与简单二叉搜索树 (BST) 进行比较，那么 AVL 会消耗更多的内存（每个节点都必须记住它的平衡因子）并且每次操作会更慢（因为你需要保持平衡因素，有时执行旋转）。

正如您所说，没有平衡的 BST 有一个非常糟糕（线性）的*最坏情况*。但是如果你知道这种最坏的情况不会发生在你身上，或者如果在极少数情况下操作很慢你还可以，那么没有平衡的 BST 可能比 AVL 更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-07T09:18:10.553

由于检查和更新平衡因子和旋转节点会增加开销，因此与非平衡 BST 相比，AVL 树中的插入和删除可能非常慢。

由于紧密平衡，搜索永远不会花费类似线性的时间，因此您可能希望在搜索比更新树更频繁的操作的情况下使用 AVL 树。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T14:01:13.413

我的假设是：当您提到 BST 时，您的意思是没有平衡的 BST。

可以说，如果您需要一个可导航的数据结构并且您知道您的数据不会是最坏的情况（已排序）并且有点小，那么 BST（没有平衡）就足够了。

但很可能这是一种罕见的情况。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-04T18:35:38.830

AVL 树也是一个 BST，但它可以重新平衡自己。这种行为使它在最坏的情况下更快。它不断地重新平衡自己，所以在最坏的情况下，当普通 BST 需要 O(n) 时，它会消耗 O(log n) 时间。因此，您的问题的答案是：实现 AVL 树总是比简单的 BST 更好。

# android - 当我单击 ListView 的一项时，我想关闭 AlertDialog

> ID：14670773
> 
> 赞同：1
> 
> 时间：2013-02-03T08:36:24.990
> 
> 标签：android, listview, android-alertdialog, onitemclick

我是安卓应用开发者。我想显示 AlertDialog 包括 Listview。

当我单击 ListView 的一项时，我想关闭 AlertDialog。但是，（1）代码不起作用。

我能怎么做？

请告诉我一些建议。预谢谢！

```
final String[] items = new String[101] ;

for(int m = 0 ; m < items.length ; m++)
{
    items[m] = Integer.toString(m) ;  
}

Dialog dialog = new Dialog(this);
AlertDialog.Builder builder = new AlertDialog.Builder(this);

builder.setTitle("sample list title "); 

ListView modeList = new ListView(this); 

ArrayAdapter<String> modeAdapter = new ArrayAdapter<String>(this, 
        android.R.layout.simple_list_item_single_choice, android.R.id.text1, items);

modeList.setAdapter(modeAdapter);
modeList.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 

modeList.setOnItemClickListener(new OnItemClickListener()
{
        public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
        {
            makeToast("..test   " + position  );  
            // dialog.dismiss(); ----------------------------(1) 

        }
 }); 

builder.setView(modeList);

dialog = builder.create();
dialog.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:18:33.697

下面使用：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
        builder.setTitle(getText(R.string.title));
        builder.setSingleChoiceItems(list, position, new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int position)
            {
                // do something
                dialog.dismiss();
            }
        }); 
```

# django-forms - 错误：“unicode”对象没有属性“get”

> ID：14670776
> 
> 赞同：2
> 
> 时间：2013-02-03T08:36:36.623
> 
> 标签：django-forms

我遇到了一个错误，我快疯了！

我创建了一个与模型关联的表单。每次，当在我的 views.py 上执行 form.is_valid() 函数时，django 都会显示以下错误：

`Exception Type: AttributeError`

`Exception Value: 'unicode' object has no attribute 'get'`

模型.py

```
from django.db import models

class Register(models.Model):
    email = models.CharField(max_lenght=100) 
```

表格.py

```
from django.form import ModelForm
from models.models import Register

class RegisterForm(ModelForm):
    class Meta:
        model = Register 
```

视图.py

```
from django.shortcuts import render_to_response
from models.models import Register
from register.forms import RegisterForm

def register(request):
    if 'user_email' in request.POST:
        form = RegisterForm(request.POST['user_email'])
        if form.is_valid():
            form.save()
            retunr render_to_response('registered.html')

    return render_To_response('main.html') 
```

PS_1：我在另一个页面中显示表单的值以检查它是否只包含电子邮件，没关系，它只包含电子邮件。

PS_2：request.POST 肯定包含“user_email”。

拜托，你能帮我解决它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:41:22.243

这一行：

```
form = RegisterForm(request.POST['user_email']) 
```

是不正确的。`Form`s 应该传递完整的映射。

```
form = RegisterForm(request.POST) 
```

然后字段名称将不同，但这是一个单独的问题（因为您似乎没有在页面中*输出*表单）。

# java - ExecutorService.shutdown。当任务队列为空时，如何关闭执行程序？

> ID：14670785
> 
> 赞同：2
> 
> 时间：2013-02-03T08:37:19.857
> 
> 标签：java, threadpool

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

public class Main
{
    public static void main(String[] args)
    {
        final ExecutorService executor = Executors.newFixedThreadPool(10);
        executor.execute(new Runnable()
        {
            @Override
            public void run()
            {
                for (int i = 0; i < 10; i++)
                    executor.execute(new Runnable()
                    {
                        @Override
                        public void run()
                        {
                             System.out.println("run");
                        }
                    });
            }
        });
        executor.shutdown();
        try
        {
            executor.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);
        }
        catch (InterruptedException e)
        {
            e.printStackTrace();
        }
    }
} 
```

我得到`RejectedExecutionException`是因为内部`executor.execute`调用 after `shutdown`。在这种情况下，我该如何等待执行人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T08:47:12.803

你必须知道什么时候不会有更多的任务。这不是它可以为你猜到的东西。将关机移到第一个任务中，它将按您的预期运行。即仅当您知道您不会添加更多任务时才调用关机。

另一种方法是使用

```
final ExecutorService executor = new ThreadPoolExecutor(0, 10, 1, TimeUnit.SECONDS, new LinkedBlockingQueue<Runnable>()); 
```

这不会关闭执行程序，但会停止所有线程，并且您可以在不再需要执行程序时丢弃它。注意：如果您稍后添加更多任务，它将根据需要启动线程。

```
final ThreadPoolExecutor executor = new ThreadPoolExecutor(10, 10, 100, TimeUnit.MILLISECONDS, new LinkedBlockingQueue<Runnable>());
for (int i = 0; i < 1000; i++)
    executor.submit(new Callable<Void>() {
        @Override
        public Void call() throws Exception {
            Thread.sleep(2);
            return null;
        }
    });
while (executor.getQueue().size() > 0) {
    System.out.println("Queue " + executor.getQueue().size() + ", Pool size " + executor.getPoolSize());
    Thread.sleep(200);
}
executor.setCorePoolSize(0);
while (executor.getPoolSize() > 0) {
    System.out.println("Pool size " + executor.getPoolSize());
    Thread.sleep(200);
}
System.out.println("Pool size " + executor.getPoolSize()); 
```

印刷

```
Queue 946, Pool size 10
Queue 32, Pool size 10
Pool size 10
Pool size 0 
```

然后退出。注意：如果任何线程仍在运行，程序将不会退出。

# android - 网页浏览器打不开链接

> ID：14670788
> 
> 赞同：0
> 
> 时间：2013-02-03T08:37:39.493
> 
> 标签：android, listview, listadapter

我已经制作了 ListView 适配器并在每一行中实现了唯一的 URL，并且在 XML 中使用相同的按钮 id，现在每当我尝试单击按钮时，它都会显示**Force Close**。

**PS：**我是新手

```
public class ResultListBaseAdapter extends BaseAdapter  {
    private static ArrayList<ItemResults> ItemResultsarraylist;
    public static String[] metador = new String[100];
    String manu;
    String mat;

    private LayoutInflater l_Inflater;
    private Context context;
    protected Context activity;

    public ResultListBaseAdapter() {
    }

    public ResultListBaseAdapter(Context context, ArrayList<ItemResults> resultc) {
        ItemResultsarraylist = resultc;
        l_Inflater = LayoutInflater.from(context);
        this.context=context;
    }

    public int getCount() {
        return ItemResultsarraylist.size();
    }

    public Object getItem(int position) {
        return ItemResultsarraylist.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = l_Inflater.inflate(R.layout.item_results_view, null);
            holder = new ViewHolder();
            holder.txt_date = (TextView) convertView.findViewById(R.id.date);
            holder.txt_type = (TextView) convertView.findViewById(R.id.type);
            holder.txt_subject = (TextView) convertView.findViewById(R.id.subject);
            holder.txt_teacher = (TextView) convertView.findViewById(R.id.teacher);

            holder.url =(Button) convertView.findViewById(R.id.btns);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.txt_date.setText(ItemResultsarraylist.get(position).getDate());
        holder.txt_type.setText(ItemResultsarraylist.get(position).gettype());
        holder.txt_subject.setText(ItemResultsarraylist.get(position).getsubject());
        holder.txt_teacher.setText(ItemResultsarraylist.get(position).getteacher());

        holder.url.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v )
            {
                mat=ItemResultsarraylist.get(position).geturl1();
                System.out.println("Mat value is"+mat);
                Uri uri = Uri.parse(mat);
                Intent intent = new Intent(Intent.ACTION_VIEW, uri); 
                System.out.println("Uri is "+intent);
                activity.startActivity(intent);
            }
        });
        return convertView;
    }       
    static class ViewHolder {
        TextView txt_date;
        TextView txt_type;
        TextView txt_subject;
        TextView txt_teacher;
        Button url;

    }
} 
```

当我点击按钮时，这里有我的 logcat 详细信息

```
02-03 14:38:08.379: I/System.out(556): Mat value ishttp://docs.google.com/gview?embedded=true&url=http://baseballglovessubhash.com/pdf/pic6.pdf
02-03 14:38:08.379: I/System.out(556): Uri is http://docs.google.com/gview?embedded=true&url=http://baseballglovessubhash.com/pdf/pic6.pdf
**02-03 14:38:08.379: D/AndroidRuntime(556): Shutting down VM
02-03 14:38:08.389: W/dalvikvm(556): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-03 14:38:08.449: E/AndroidRuntime(556): FATAL EXCEPTION: main
02-03 14:38:08.449: E/AndroidRuntime(556): java.lang.NullPointerException
02-03 14:38:08.449: E/AndroidRuntime(556):  at com.android.nxgen.ResultListBaseAdapter$1.onClick(ResultListBaseAdapter.java:105)
02-03 14:38:08.449: E/AndroidRuntime(556):  at android.view.View.performClick(View.java:2408)
02-03 14:38:08.449: E/AndroidRuntime(556):  at android.view.View$PerformClick.run(View.java:8816)
02-03 14:38:08.449: E/AndroidRuntime(556):  at android.os.Handler.handleCallback(Handler.java:587)
02-03 14:38:08.449: E/AndroidRuntime(556):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-03 14:38:08.449: E/AndroidRuntime(556):  at android.os.Looper.loop(Looper.java:123)
02-03 14:38:08.449: E/AndroidRuntime(556):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-03 14:38:08.449: E/AndroidRuntime(556):  at java.lang.reflect.Method.invokeNative(Native Method)
02-03 14:38:08.449: E/AndroidRuntime(556):  at java.lang.reflect.Method.invoke(Method.java:521)
02-03 14:38:08.449: E/AndroidRuntime(556):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-03 14:38:08.449: E/AndroidRuntime(556):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-03 14:38:08.449: E/AndroidRuntime(556):  at dalvik.system.NativeStart.main(Native Method)** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:14:18.700

我猜是你的问题。

```
activity.startActivity(intent); //Problem is here you never initialize the activity. 
```

试试这个。

```
holder.url.setOnClickListener(new OnClickListener()
{
    public void onClick(View v )
    {
        mat=ItemResultsarraylist.get(position).geturl1();
        System.out.println("Mat value is"+mat);
        Uri uri = Uri.parse(mat);
        Intent intent = new Intent(Intent.ACTION_VIEW, uri); 
        System.out.println("Uri is "+intent);
        context.startActivity(intent); //Change here activity to context.
    }
}); 
```

**或者**

```
public ResultListBaseAdapter(Context context, ArrayList<ItemResults> resultc) {
        ItemResultsarraylist = resultc;
        l_Inflater = LayoutInflater.from(context);
        this.context=context;
        this.activity = context;
} 
```

# java - java中的ArrayIndexOutOfBoundsException

> ID：14670790
> 
> 赞同：-2
> 
> 时间：2013-02-03T08:38:31.743
> 
> 标签：java, arrays

```
import java.io.*;
import java.util.Scanner;

public class ws1qn2 
{

    public static void main(String[] args) throws IOException
    {
        Scanner input=new Scanner(System.in);
        int a;
        int d;
        System.out.println("Please enter the number of characters the word has: ");
        d=input.nextInt();
        a=d-1;
        char word[]=new char[a];
        for (int b=0;b!=a;b++)
        {
            System.out.println("Please enter character no."+b+1);
            String str;
            str=input.next();
            char c=str.charAt(b);
            word[a-b]=c;
        }
        for (char reverse : word)
        {
            System.out.print(reverse);
        }
    }
} 
```

这是我运行程序时发生的情况：

```
Please enter the number of characters the word has: 
3
Please enter character no.01
s
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 2
    at ws1qn2.main(ws1qn2.java:22)

Process completed. 
```

帮助？它看起来像堆栈溢出，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:43:32.660

您的问题如下：您将 word 初始化为长度数组`d-1`，在您的情况下为 2，但是 Java 数组的索引为 0，因此长度为 2 的数组仅上升到索引 1：

然后您尝试访问`word[2]`以将其设置为`c`，这会使您的数组索引超出范围

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T08:44:40.710

`str`每次都被读取，它的大小似乎应该是 1。你不应该这样做`char c=str.charAt(b);`，而是你应该总是得到他的第一个字符`char c=str.charAt(0);`

当 b 为零时的另一个问题`a-b`是`a`，因此`words[a-b]`超出了`words`size的数组的范围`a`。您应该从此处的索引中减去 1：`words[a-b-1]`

# python - iterparse 无法解析字段，而其他类似的都可以

> ID：14670792
> 
> 赞同：2
> 
> 时间：2013-02-03T08:39:02.213
> 
> 标签：python, xml, xml-parsing, iterparse

我使用 Python`iterparse`来解析 nessus 扫描的 XML 结果（.nessus 文件）。解析在意外记录上失败，但类似的记录已被正确解析。

XML 文件的一般结构是很多记录，如下所示：

```
<ReportHost>
  <ReportItem>
    <foo>9.3</foo>
    <bar>hello</bar>
  </ReportItem>
  <ReportItem>
     <foo>10.0</foo>
     <bar>world</bar>
</ReportHost>
<ReportHost>
   ...
</ReportHost> 
```

换句话说，很多主机（`ReportHost`）有很多要报告的项目（`ReportItem`），而后者有几个特征（`foo`，`bar`）。我将着眼于为每个项目生成一个具有其特征的行。

解析在文件中间的一行中失败（`foo`在这种情况下`cvss_base_score`）

```
<cvss_base_score>9.3</cvss_base_score> 
```

而大约 200 条类似的行已被解析而没有问题。

相关的代码如下——它设置了上下文标记（`inReportHost`它`inReportEvent`告诉我我所在的 XML 文件的具体位置，并根据上下文分配或打印一个值）

```
import xml.etree.cElementTree as ET
inReportHost = False
inReportItem = False

for event, elem in ET.iterparse("test2.nessus", events=("start", "end")):
    if event == 'start' and elem.tag == "ReportHost":
        inReportHost = True
    if event == 'end' and elem.tag == "ReportHost":
        inReportHost = False
        elem.clear()
    if inReportHost:
        if event == 'start' and elem.tag == 'ReportItem':
            inReportItem = True
            cvss = ''
        if event == 'start' and inReportItem:
            if event == 'start' and elem.tag == 'cvss_base_score':
                cvss = elem.text
        if event == 'end' and elem.tag == 'ReportItem':
            print cvss
            inReportItem = False 
```

`cvss`有时具有 None 值（在`cvss = elem.text`分配之后），即使相同的条目已在文件中较早地被正确解析。

如果我在分配下面添加一些类似的东西

```
if cvss is None: cvss = "0" 
```

然后解析许多进一步`cvss`分配它们的正确值（而其他一些是无）。

当采取`<ReportHost>...</reportHost>`which 导致错误的解析并通过程序运行它时 - 它工作正常（即按预期`cvss`分配）。`9.3`

我迷失在我的代码中出现错误的地方，因为有大量相似的记录，有些是正确处理的，有些是不正确的（有些记录是相同的，但处理方式仍然不同）。我也找不到有关失败记录的任何具体信息-早晚相同的记录都可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T10:23:58.007

从[iterparse() 文档](http://docs.python.org/2/library/xml.etree.elementtree.html#functions)：

> 注意：iterparse() 只保证它在发出“start”事件时看到了起始标记的“>”字符，因此定义了属性，但此时 text 和 tail 属性的内容是未定义的。这同样适用于子元素；它们可能存在也可能不存在。如果您需要一个完全填充的元素，请寻找“结束”事件。

完全解析后，仅在“结束”事件上删除`inReport*`变量并处理 ReportHost。使用 ElementTree API 获取必要的信息，例如`cvss_base_score`从当前的 ReportHost 元素。

要保留内存，请执行以下操作：

```
import xml.etree.cElementTree as etree

def getelements(filename_or_file, tag):
    context = iter(etree.iterparse(filename_or_file, events=('start', 'end')))
    _, root = next(context) # get root element
    for event, elem in context:
        if event == 'end' and elem.tag == tag:
            yield elem
            root.clear() # preserve memory

for host in getelements("test2.nessus", "ReportHost"):
    for cvss_el in host.iter("cvss_base_score"):
        print(cvss_el.text) 
```

# javascript - 带有异步函数的 for 循环耗尽内存

> ID：14670793
> 
> 赞同：2
> 
> 时间：2013-02-03T08:39:07.823
> 
> 标签：javascript, node.js, asynchronous

在你开始大喊“不要将 for 循环与异步函数一起使用！”之前 让我声明一下，我**确实**知道如何使用异步函数编写一个循环，从回调中调用下一次迭代。

但是，如果我对回调或仅在前任完成后处理一次迭代不感兴趣，那该怎么办。就我而言，我从 xml 文件中导入大量记录并将它们写入 mongoDB。对我的“写”函数的正常调用是这样的：

```
asyncWrite( record, function(err, result) {
    ...
}); 
```

现在正如我所说，我对回调不感兴趣（不会发生错误！）也不对串行过程感兴趣。所以我使用了一个for循环并省略了回调：

```
for( i=0; i<max; i+=1) {
    asyncWrite( record_arr[i] );
} 
```

对于小型来说`max`，这非常有效。但随着`max`变大（> 100.000），我最终得到一个“内存不足”错误。防止这种情况的唯一方法是返回“正常”异步循环（回调中的递归函数调用）。

还有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T10:07:38.257

在 for 循环完成工作之前，不会执行异步函数。它刚刚收集了一个太乞求的队列。因为队列已满，所以`max`你得到了错误。您可以通过在循环内部`out of memory`插入来查看内存泄漏情况。`console.log(process.memoryUsage());`您需要使用块来处理此任务。

# php - Mysqli 增强的调试能力有哪些？

> ID：14670803
> 
> 赞同：6
> 
> 时间：2013-02-03T08:40:50.770
> 
> 标签：php, mysql, debugging, mysqli

在[mysqli 概述页面上](http://php.net/manual/en/mysqli.overview.php)有一个好处列表，旨在引诱我进入 mysqli 领域。我什至不明白其中许多的含义，但是对我来说真的很有趣：增强的调试功能。

根据我的经验，准备好的语句（被认为是主要的并且主要使用 mysqli 功能）使调试动态 SQL 变得非常困难 - 您不能将准备好的查询中的常规查询复制到控制台中。
所以，我很想知道这些功能是什么以及如何使用它们。
是在调试 SQL 还是在其他方面？
如何使用它？
什么是实际用例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T09:58:45.433

我*认为*它指的是这些：

*   [http://php.net/manual/en/mysqli.debug.php](http://php.net/manual/en/mysqli.debug.php)
*   [http://php.net/manual/en/mysqli.dump-debug-info.php](http://php.net/manual/en/mysqli.dump-debug-info.php)

它们不存在于 mysql api，只有 mysqli。

除其他外，您可以[创建跟踪文件](http://dev.mysql.com/doc/refman/5.0/en/making-trace-files.html)：

```
mysqli_debug("d:t:o,/tmp/client.trace"); 
```

我将跟踪理解为调试 MySQL 内部行为。如果您怀疑 MySQL 的工作方式存在问题，您可以使用它。对于调试 SQL，我会使用更轻量级的措施，即使跟踪也显示了这些措施。

[您可以在此页面](http://php.net/manual/en/mysqlnd-ms.debugging.php)上看到此类跟踪输出的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:52:19.523

关于准备好的语句，理论上，您会在发送参数之前知道您的 kwery 格式错误。因此，您不必怀疑是您的查询还是用户数据被窃听，您会立即知道。

关于一般查询，由于 mysqli 与 MySQL5 同步，而 mysql_old API 仅支持到 MYSQL 4，您将获得更好的错误消息，或者至少是最具描述性的。

此外，您可以使用 try\catch 语法来检测 mysql 错误，并且处理异常而不是`or die....`or更容易`if(mysql_error())`。

从您拥有的文档中：

```
<?php
define("MYSQL_CONN_ERROR", "Unable to connect to database.");

// Ensure reporting is setup correctly
 mysqli_report(MYSQLI_REPORT_STRICT);

    // Connect function for database access
   function connect($usr,$pw,$db,$host) {

   try {
       $mysqli = new mysqli($host,$usr,$pw,$db);
       $connected = true;
    } catch (mysqli_sql_exception $e) {
       throw $e;
    }
}

try {
   connect('username','password','database','host');
   echo 'Connected to database';
} catch (Exception $e) {
    echo $e->errorMessage();
} 
```

`mysqli_report(MYSQLI_REPORT_STRICT)`根据文档，关键功能是：

> MYSQLI_REPORT_STRICT
> 
> ```
> Throw a mysqli_sql_exception for errors instead of warnings. 
> ```

`mysqli_debug`正如eis所说，还有一个功能/方法。

# regex - 在系列中的两个其他字符串之间查找字符串

> ID：14670804
> 
> 赞同：2
> 
> 时间：2013-02-03T08:40:51.273
> 
> 标签：regex

抱歉标题模棱两可，因为我想不出如何表达这个问题。

我有一个包含数百行的 CSV 文件，其中包含数千个 LDAP 专有名称。示例行之一可能如下所示：

```
CN=John Doe,OU=Miami,DC=contoso,DC=com; CN=Spamela Anderson,OU=Los Angeles,DC=contoso,DC=com; CN=Cosmo Kramer,OU=Subfolder,OU=Subfolder,OU=ParentFolder,DC=FABRIKAM,DC=com; CN=Bob Barker,DC=contoso,DC=com
CN=Luke Skywalker,OU=Tattoine,DC=contoso,DC=com; CN=Brad Pitt,OU=Hollywood,DC=contoso,DC=com; CN=Mickey Mouse,OU=Users,DC=contoso,DC=com
CN=Ted Nugent,OU=Houston,DC=FABRIKAM,DC=com; CN=Carl Sagan,DC=Uranus,DC=contoso,DC=com 
```

我想删除`FABRIKAM.COM`域中的任何专有名称`(dc=fabrikam,dc=com)`。在示例中，我想去掉：

```
;CN=Cosmo Kramer,OU=Subfolder,OU=Subfolder,OU=ParentFolder,DC=FABRIKAM,DC=com 
```

我试过使用：

```
CN=(.*)?,DC=fabrikam,DC=com 
```

但这会发现从行的*开头*第一次出现“CN=”直到出现“DC=fabrikam,dc=com”（在我的示例中还包括 John Doe 和 Spamela Anderson）。

有没有办法在“DC=fabrikam,DC=com”的***左边找到第******一次出现***的“CN= ”作为边界？

 *（我使用 Notepad++ 或 Programmer's Notepad）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:43:43.440

如果您可以假设`;`从未出现在值中并且仅用于分隔不同的记录，那么您可以使用以下方法：

```
CN=[^;]*,DC=fabrikam,DC=com 
```

请注意，上面的正则表达式可能会从多行中获取匹配项。

`\n`如果文件用于分隔行，这是一个快速修复：

```
CN=[^;\n]*,DC=fabrikam,DC=com 
```*

# java - 如何在java中水平拉伸文本

> ID：14670805
> 
> 赞同：0
> 
> 时间：2013-02-03T08:40:54.533
> 
> 标签：java, swing, graphics

> **可能重复：**
> [如何在java中调整文本大小](https://stackoverflow.com/questions/13440201/how-to-resize-text-in-java)

是否可以水平拉伸java中的文本。我知道它应该在那里，但我无法弄清楚。字体大小影响文本的高度和宽度。我尝试使用 FontMetrics，但它只给了我文本的宽度。但我只需要更改文本宽度，使其看起来好像被拉伸了。

如果有人知道这样做，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T08:49:13.880

可能还有其他方法可以实现相同的结果，例如将文本转换为形状并使用 a `AffineTransformation`，但这是手头的...

![在此处输入图像描述](../Images/c3d40b7f47440db5d12f33405227710f.png)

```
public class StretchText {

    public static void main(String[] args) {
        new StretchText();
    }

    public StretchText() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private BufferedImage imgTet;

        public TestPane() {
            Font font = UIManager.getFont("Label.font");
            FontMetrics fm = getFontMetrics(font);
            String text = "This is a test";
            int width = fm.stringWidth(text);
            int height = fm.getHeight();
            imgTet = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
            Graphics2D g2d = imgTet.createGraphics();
            g2d.setColor(Color.BLACK);
            g2d.drawString(text, 0, fm.getAscent());
            g2d.dispose();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.drawImage(imgTet, 0, 0, getWidth(), imgTet.getHeight(), this);
            g2d.dispose();
        }

    }

} 
```

# .net - XAP 文件未使用 https 加载

> ID：14670806
> 
> 赞同：0
> 
> 时间：2013-02-03T08:41:01.943
> 
> 标签：.net, silverlight, iis, https, xap

我刚刚将一个silverlight 4 应用升级到silverlight 5。使用的目标框架是4.5。一旦我在 IIS 中发布代码，它就可以通过 http 正常加载。但是 xap 文件无法使用 https 正确加载。在浏览器屏幕中显示 100% 已加载。屏幕永远留在那里。

任何人都可以在这个话题上提供帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:08:18.000

一个建议：在这种情况下，使用浏览器的开发工具来跟踪错误（IE 上 F12，查看控制台，可能有错误）。

最常见的原因是在 http/https 中以不同方式调用 Web 服务的错​​误。

您的 IIS 服务器是否配置良好，您的服务器上是否安装了 .net 4.5？

# java - 在方法参数中声明变量

> ID：14670813
> 
> 赞同：0
> 
> 时间：2013-02-03T08:42:14.270
> 
> 标签：java, println

是否可以在 Java`String`的语句中声明对象？`.print()`例如：

```
System.out.println(String str = "phew"); 
```

这不起作用。那么，这是否意味着它是“非法的”。如果可能，我该怎么做？如果它实际上是非法的，为什么它是非法的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T08:46:14.800

您不能**声明**变量，但可以**定义**它们：

```
String a; // declaration
System.out.println(a = "abc"); // allowed, defining and passing it as argument

System.out.println(String a = "abc"); // illegal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T08:43:42.450

我怀疑你的意思是

```
System.out.println(new String("new")); 
```

但你可以做

```
System.out.println("new"); 
```

如果你想做的不止这些，你能说一下具体是什么吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T08:47:24.680

您可以在 println 中分配变量，但不能在其中声明变量。

```
String str;
System.out.println(str=new String("str")); // will work 
```

*赋值运算符返回它正在分配的东西*

...

```
System.out.println(String Phew="phew"); // will not work 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T08:50:32.967

你可以这样试试

字符串 s; System.out.println(s = "我叫迪帕克");

但我不明白什么样的算法会导致你实现这样的东西。:) 究竟是什么，在每条语句需要一个断路器之后，在它用于除赋值以外的其他操作之前需要声明变量。

希望这会给你带来平静。

# python - 无法将字符串转换为浮点数

> ID：14670836
> 
> 赞同：1
> 
> 时间：2013-02-03T08:46:07.043
> 
> 标签：python, string, csv

我对python很陌生，我只需要它，所以我分析了一些生物数据。
请帮助我如何解决以下错误，
`could not convert string to float`
我正在尝试绘制（时间，距离）

以下是一些示例数据：

```
Nematode No.    1           1              2          2
No. of jumps    Time (sec)  Distance (mm)    Time        Distance
1              0.195781141  0.893988392    1.25388    0.56569
2              2.386623538  1.073359412    3.5848484  1.55656
3              2.915538343  1.227371636    4.284848   2.34454545
4              4.993603286  0.653631116    6.4545454  3.65445
5              8.002735854  0.986036142    2.35554    0.2548545
6             10.84267517   0.939671599    4.245454   0.5484848 
```

**我的代码**（还）

```
from mmap import mmap,ACCESS_READ

from xlrd import open_workbook
from pylab import *
from xlrd import open_workbook,XL_CELL_TEXT
import csv
from scipy import stats

values = csv.reader(open('simple.csv', 'rb'), delimiter=',',skipinitialspace=True)

for column in values:
    print column[1],column[2]

Time = column[1]
Distance = column[2]

plot(Time,Distance)
show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:32:44.647

```
import numpy as np
import matplotlib.pyplot as plt

x, y = np.loadtxt("simple.csv", skiprows=1, unpack=True)
plt.plot(x, y)
plt.show() 
```

第一行包含您的列名，不能转换为浮点数，因为它们不是以数字开头的，因此在尝试绘制数据时应该跳过第一行。

对于更新的数据：跳过带有标题的前 2 行并绘制第 2、3 列：

```
x, y = np.loadtxt("simple.csv", skiprows=2, usecols=[1, 2], unpack=True) 
```

# java - java - 如何在运行时在java中设置ArrayList的泛型类型？

> ID：14670839
> 
> 赞同：9
> 
> 时间：2013-02-03T08:46:19.573
> 
> 标签：java, generics, reflection

好的，所以我正在设置我自己的 XML 序列化（我知道还有其他的，甚至是 Java 内置的，但我自己这样做是为了学习，因为使用它非常棒）。我已经序列化了。我目前正在进行反序列化（读取 XML 文件并根据文件中的数据组装对象），并且在设置泛型类型时遇到了问题。经过广泛的研究，我想出了如何获取类的泛型类型，以便在序列化时编写它们，但我不知道如何做到这一点：

```
Class c = Class.forName(string);
ArrayList<c> list = new ArrayList<c>(); 
```

我在 C# 中看到了一些答案，但显然 C# 比 Java 更通用，我无法在 Java 中复制这些解决方案。即使有反思，这甚至可以做到吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-03T08:49:26.063

你不能。

Java 中的泛型只是编译时语法糖。它使您不必`Object`像过去恐龙在 JVM 中漫游时那样来回转换所有内容，并为您提供一些编译时类型检查。

**编辑添加：**在运行时保留了*一些*元数据，您可以通过反射来*检查*泛型类，但与您想要的完全不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T08:51:10.673

您不能在运行时设置泛型类型。所有泛型类型信息在编译时被删除。

请参阅以下文章以了解类型擦除：

[类型擦除 StackOverflow](https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens)

[类型擦除教程](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T08:55:19.743

否则你可以做什么（如果你的类数量有限）..你通过使用'instance of'运算符并根据你的arraylist中的那个位置来检查对象

```
if(obj instance of abc)
    ArrayList<abc> al = new ArrayList<abc>(); 
```

你可以嵌套 if else 或 switch

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T20:39:11.607

不，泛型仅在编译时，仅用于编译时类型检查，以允许您避免可以在编译时证明安全的强制转换。

想想看。如果你能做你想做的，那将是完全没有用的。比如说，拥有的全部意义`ArrayList<String>`在于，当您从中获取一个元素时，编译器可以在编译时推断它具有 type `String`，因此它允许您将其分配给`String`代码中的类型而无需强制转换。此外，如果您尝试向其中添加元素，编译器可以在编译时检查它是否属于 type `String`，否则不会让您这样做。

但是您需要一个在编译时未知的类型参数。因此，当您从中获取元素时，编译器对其类型一无所知，因此您只能将其分配给 type `Object`。而当你尝试往里面放东西时，编译器不知道它应该允许什么类型，所以它必须允许所有类型？那么泛型就没有意义了。

因此，您应该只使用上限类型作为类型参数。像`ArrayList<Object> list = new ArrayList<Object>();`

# css - 文本与单元格的顶部和底部对齐

> ID：14670842
> 
> 赞同：7
> 
> 时间：2013-02-03T08:46:57.853
> 
> 标签：css, html-table

假设我有这样的代码：

```
<table>
<tr>
    <td>
        <div id="top">top</div>
        <div id="bot">bottom</div>
    </td>
</tr>
</table> 
```

我正在尝试通过 CSS 将 #top 与单元格顶部对齐，将 #bot 与底部对齐。

```
#top { vertical-align:top; }
#bot { vertical-align:bottom; } 
```

以上似乎不起作用 - 它似乎根本没有任何效果。这是代码的链接：http: [//jsfiddle.net/vKPG8/28/](http://jsfiddle.net/vKPG8/28/)

关于为什么会发生这种情况以及如何解决的任何解释？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-15T18:33:43.703

使用 position: absolute 的公认解决方案不是针对此问题的跨浏览器兼容解决方案，因为 Firefox 不允许（并且根据规范不应该）允许在表格单元格或带有 display:table-cell 的元素中进行绝对定位。

似乎没有真正可靠的纯 css 方法来解决这个问题，尽管我确实有一个适用于这种情况的纯 css 修复程序。本质上，我所做的是插入一个足够高的 before 元素，以将文本的底行强制到底部，因为它具有 vertical-align: bottom 集。这本质上与放置 padding-top 相同，所以它不是一个很大的解决方案。

演示：http: [//jsfiddle.net/Be7BT/](http://jsfiddle.net/Be7BT/)

```
td {width:200px;height:100px;border:solid 1px;}
#top { 
    display: inline-block;
    vertical-align:top;
    width: 100%;
}
#bot {
    display: inline-block;
    vertical-align:bottom;
    width: 100%;
}
#bot:before{
    content: '';
    display: inline-block;
    height: 100px;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T08:54:02.717

`vertical-align`用于内联元素并且`div`是块元素。尝试使用`position: absolute`和。`top: 0``bottom: 0`

```
td {
  position: relative;
  width: 200px;
  height: 100px;
  border: solid 1px;
} 
```

```
#top, #bot { position: absolute; }
#top { top: 0; }
#bot { bottom: 0; } 
```

演示： http: [//jsbin.com/iyosac/1/edit](http://jsbin.com/iyosac/1/edit)
在这里查看更多信息：[http ://css-tricks.com/what-is-vertical-align/](http://css-tricks.com/what-is-vertical-align/)

```
td {
  position: relative;
  width: 200px;
  height: 100px;
  border: solid 1px;
}

#top, #bot { position: absolute; }
#top { top: 0; }
#bot { bottom: 0; }
```

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <table>
    <tr>
      <td>
        <div id="top">top</div><br/>
        <div id="bot">bottom</div>
      </td>
    </tr>
  </table>
</body>
</html>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-23T08:37:52.260

我有一个更好的主意，使用嵌套表：

```
<table width="100px" height="100px" border=1>
    <tr>
        <td valign="top">top</td>
    </tr>
    <tr height=100%>
        <td valign="bottom">bottom
        </td>
    </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-12T00:10:57.627

这样做的方法是`rowspan`：

```
<table><tr>
    <td rowspan=2>tall<br>tall<br>tall<br>tall<br>
    <td valign="top">top</td>
</tr><tr>
    <td valign="bottom">bottom</td>
</tr></table> 
```

# asp.net - WinForms 和 ASP.NET 自定义控件的通用代码

> ID：14670843
> 
> 赞同：4
> 
> 时间：2013-02-03T08:47:03.413
> 
> 标签：asp.net, .net, winforms, custom-controls

假设我想开发一个自定义的纯图形控件，用于 WinForms 和 ASP.NET。该控件将根据某些属性设置和相关规则呈现图像。

显然，我可以将代码从 WinForms 版本复制到 ASP.NET 版本，但这意味着如果发现错误或更改规则，我有两个版本要更新。

我可以编写一个核心类，其中包含所需的各种属性和规则，WinForms 和 ASP.NET 控件类将具有指向该核心类的属性，例如：

```
public class MyControlCore
{
    // all properties and control rules

    public void PaintTo(Graphics graphics)
    {
        // rendering of control
    }
}

public class MyWinFormsControl: Control
{
    public MyWinFormsControl(Control parent): base(parent)
    {
        CoreControl = new MyControlCore();
    }

    public MyControlCore CoreControl { get; private set; }

    protected override OnPaint(object sender, PaintEventArgs e)
    {
        CoreControl.PaintTo(e.Graphics);
    }
} 
```

这会起作用，但在属性网格中我会得到一个`CoreControl`包含自定义属性的属性。有没有办法让属性网格显示`MyControlCore`属性，而不是`CoreControl`带有子属性的属性？

我在想我也许可以通过`TypeDescriptionProvider`相关的课程来完成这个，但我不确定如何进行，以及它是否会给我我想要的结果。我意识到这只会对我的设计师有所帮助，但这很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:21:12.443

还有另一种选择。您可以使用[部分类](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.110%29.aspx)并将公共代码放在一个文件中，您可以从两个项目链接到该文件。

# java - android将日期转换为时间戳

> ID：14670849
> 
> 赞同：1
> 
> 时间：2013-02-03T08:47:56.603
> 
> 标签：java, android

以下代码在我的 java 应用程序中运行良好。但是，当我使用 java 为 Android 制作相同的应用程序时，它在以下粗体行“ **Timestamp rtnTS = new Timestamp(theDate.getTime());** ”中显示错误“*构造函数 Timestamp(long) is undefined ”*

 **```
public static Timestamp createTimeStamp(String strTime, String strFormat) throws Exception
{
    strTime = strTime.trim();

    SimpleDateFormat formatter = new SimpleDateFormat(strFormat);
    java.util.Date theDate = new java.util.Date();
    theDate = (java.util.Date) formatter.parse(strTime);
    **Timestamp rtnTS = new Timestamp(theDate.getTime());**
    return rtnTS;
} 
```

请任何人帮助解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T08:49:24.747

你有没有进口这些。

```
import java.sql.Timestamp;
import java.util.Date; 
```

像这样使用。

```
import java.sql.Timestamp;
import java.util.Date;

public class GetCurrentTimeStamp 
{
    public static void main( String[] args )
    {
       java.util.Date date= new java.util.Date();
       Log.v("Time",new Timestamp(date.getTime()));
    }
} 
```

从这里阅读[http://developer.android.com/reference/java/sql/Timestamp.html](http://developer.android.com/reference/java/sql/Timestamp.html)**

# python - 如何将数字输入数组python？

> ID：14670850
> 
> 赞同：1
> 
> 时间：2013-02-03T08:47:57.193
> 
> 标签：python, arrays

我是 Python 的新手，我试图弄清楚将数字列表输入到数组中。这就是我所做的：向用户询问一个号码

```
iNum = int(input("Please enter your number: ")) 
```

找到长度

```
iLen=len(str(iNum)) 
```

将数字输入数组

```
a=[]
for i in range(0,iLen,1):
    a[i].append=iNum%10
    iNum=iNum//10 
```

它不起作用，我不明白为什么..我什至尝试做 a[i]=iNum%10。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T08:54:03.537

您的代码有几个令人困惑的地方。你的最终目标到底是什么？您想要数组中单个数字的所有数字吗？或者您希望用户输入多个数字？

即使有那些让我感到困惑的事情，我仍然可以看到一些事情是错误的：

```
a[i].append=iNum%10 
```

这注定要从一开始就失败：由于`a`已被声明为空（`a = []`），因此没有`a[i]`元素。您可以在 IDLE 等交互式环境中试用此代码：

```
>>> a = []
>>> a[0] = 'hello'
Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    a[0] = 'hello'
IndexError: list assignment index out of range 
```

您可能打算`append`在列表上调用该方法。但是，要调用该方法，不要使用等号，而是使用括号。像这样：

```
a.append(iNum % 10) 
```

另一件需要注意的事情是你的电话`range`有点多余。由于以 1 为步长从 0 迭代到某个数字非常常见，因此这是默认设置。

```
range(iLen) 
```

综上所述，我们最终得出以下结论：

```
a=[]
for i in range(iLen):
    a.append(iNum%10)
    iNum=iNum//10 
```

如果要将单个数字的数字放入列表中，只需`list`在字符串上使用该函数，如下所示：

```
>>> list('123')
['1', '2', '3'] 
```

在 Python 中，您可以使用循环遍历字符串的字符`for`。因此，如果要将每个字符转换为整数，甚至可以执行以下操作：

```
a = []
for digit in str(iNum):
    a.append(int(digit)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:20:50.713

> 我需要从用户那里获取一个数字，而不是打印每个数字出现在数字中的计数。

```
#! /usr/bin/python3.2

n = input ("Please enter your number: ")

for digit in map (str, range (10) ):
    print ('{} appears {} times in your number.'. \
        format (digit, len ( [c for c in n if c == digit] ) ) ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T08:50:45.487

`.append()`是一种将项目附加到列表末尾的方法。你写的方式不对：

```
a.append(iNum % 10) 
```

做你想做的事情的一种更简单的方法是使用列表理解：

```
number = input("Please enter your number: ")  # You want to keep it as a string
a = [int(digit) for digit in number] 
```

甚至更短`map()`：

```
a = map(int, number) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T08:49:34.193

This:`a[i].append=iNum%10`是错误的，因为您将可调用方法的引用绑定到`int`对象。除此之外，当您`append`进入列表时，它会自动将一个对象插入到列表的末尾。如果您想将某些内容放在列表中的特定位置，请考虑使用该`insert()`方法。

要立即修复您的代码，请像这样调用它：`a.append(iNum%10)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-02T16:46:44.803

方法一：

```
sizeofarray=int(input())
arr=[]

for _ in range(sizeofarray):
    inputvalue = int(input("Enter value: "))
    arr.append(inputvalue) 
```

或者

方法二：

```
arr=[int(i) for i in input().split()]

#Note For Method 2 the values in spaces example: 4 8 16 32 64 128 256
#The result array will look like this arr = [4,8,16,32,64,128,256] 
```

# c - 虚警概率和 ROC 曲线图

> ID：14670855
> 
> 赞同：4
> 
> 时间：2013-02-03T08:49:13.063
> 
> 标签：c, implementation, probability, false-positive, roc

如何为使用视频的对象检测应用程序绘制每个窗口的误报率与未命中率（或误报概率）和 ROC（接收器操作曲线）的关系图？如何确定误报和命中的数量？一个例子是很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:39:58.250

它很简单。将所有真阳性 (H0) 值存储在一个数组中，将所有真阴性 (H1) 值存储在另一个数组中。

对两个列表进行排序。

从两个列表中查找最大值和从两个列表中查找最小值。将范围除以适当的数字（例如 1000），这将是您的步骤。

现在按步长值从最小值步进到最大值。

对于每个评估值，在 h0 和 h1 数组中找到大于该值的点。将此索引除以 h0/h1 数组中的值数，然后乘以 100（给您一个百分比）。

*   错误拒绝 (fr) = h0 指数百分比。
*   错误接受 (fa) = 100 - (h1 指数百分比)。

绘制 fa 反对，100 - fr。

要计算 EER，您需要找到上面计算的 fr 和 fa 之间的最小距离。

```
float diff = fabsf( fr - fa );
if ( diff < minDiff )
{
    minDiff = diff;
    minFr   = fr;
    minFa   = fa;
} 
```

最后，EER 计算如下：

```
float eer = (minFr + minFa) / 2.0f; 
```

**编辑**：您为 H0 和 H1 获得的值只是分数值，表示您的匹配正确的“可能性”。您必须在某处计算这些数字，因为您必须根据此分数决定是否识别您的对象。

H0 列表是您在确定匹配时获得的分数。H1 列表是当你有明确的不匹配时你得到的分数。

# documentation - SpecFlow ScenarioOutline“丢失”示例名称

> ID：14670861
> 
> 赞同：1
> 
> 时间：2013-02-03T08:49:30.027
> 
> 标签：documentation, specflow, gherkin, scenarios

我正在尝试从我的 specflow 功能文件中生成文档（pdf 格式）。我正在使用 Nuget 上的 gerkin 库来解析文件。

我有一些场景大纲，每个场景大纲有 2 个示例表（根据 Cucumber 书完全可以）：

```
Scenario Outline: My scenario

Given "<this>" first value
When I enter some second "<value>"
Then the result must be equal to "<expected result>"

Examples: Some first list of values // My example name
| this | value | expected result |
| 0    | 1     | 2               |

Examples: Some second list of values  // My example name
| this | value | expected result |
| A    | B     | C               | 
```

我遇到的问题是当你解析这个文件时。您可以访问所有给定的示例，但只能访问一个示例名称。因此，当您构建文档时，您无法判断它是来自第一组示例还是来自第二组示例。我注意到像“Pickles”这样的其他工具也有同样的问题。

这是一些尝试获取每个示例名称的代码：

```
foreach( var feature in file.Feature.FeatureElements )
{
    var example = ( ( ScenarioOutline ) ( x ) ).Example;

    // this value always remain the same and is incorrect according to my feature file.
    var exampleName = example.Name != exampleName
} 
```

我认为问题可能出在 SpecFlow 库本身，而不是用于解析的 gerkin 库 - 似乎 NUnit 在创建测试用例时也看不到第二个示例名称。

以前有人处理过这个吗？

PS：有人请标记scenariooutline。它与场景不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T23:51:26.040

Specflow 不支持场景大纲中的多个示例块。为什么不把你的第二个例子列表放到第一个？IE

```
Examples:
| this | value | expected result |
| 0    | 1     | 2               |
| A    | B     | C               | 
```

如果您明确希望为您可以拥有的不同类型的输入（即所有数字或所有字符）提供不同的测试场景，那么我将创建两个不同的场景大纲，例如

```
Scenario Outline: Calculate the result for numeric input

Given "<this>" first value
When I enter some second "<value>"
Then the result must be equal to "<expected result>"

Examples:
| this | value | expected result |
| 0    | 1     | 2               | 
```

和：

场景大纲：计算字母输入的结果

```
Given "<this>" first value
When I enter some second "<value>"
Then the result must be equal to "<expected result>"

Examples:
| this | value | expected result |
| A    | B     | C               | 
```

# gcc - 结构数组中的 gcc 成员初始化

> ID：14670864
> 
> 赞同：3
> 
> 时间：2013-02-03T08:49:36.680
> 
> 标签：gcc, embedded

创建 if 数组以及使用 GCC 时，如何仅初始化结构的一个成员？例如：

```
#define UNUSED OxFF
typedef struct inputs{
    uint8_t state;
    uint8_t limit;
    uint8_t value;
} INPUT_TYPE;

//create array but just care that all members .state are UNUSED
INPUT_TYPE Node1[5] ={ Node1.state = UNUSED } 
```

初始化是指数组而不是结构的成员。当然可以使用循环，但我不想在运行时使用“input_init”函数进行初始化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T09:04:51.417

初始化某些成员的语法是 C99 特性。你很接近，试试这个：

```
#define UNUSED OxFF
typedef struct inputs{
    uint8_t state;
    uint8_t limit;
    uint8_t value;
} INPUT_TYPE;

INPUT_TYPE Node1[5] = {
    {.state = UNUSED},
    {.state = UNUSED},
    {.state = UNUSED},
    {.state = UNUSED},
    {.state = UNUSED}
}; 
```

请参阅：[如何根据 C 编程语言标准初始化结构](https://stackoverflow.com/q/330793/1175253)

编辑：

由于我不够清楚，我编辑了答案。

数组初始化如何工作，在这里得到了回答：[如何将数组的所有成员初始化为相同的值？](https://stackoverflow.com/q/201101/1175253)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T06:32:19.640

我终于在[http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Designated-Inits.html#Designated-Inits](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Designated-Inits.html#Designated-Inits)找到了它， 它结合了两种情况。

`INPUT_TYPE Node1[5] = { [0 ... 4].state = UNUSED }`它在大型阵列中很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T09:19:40.773

由于`UNUSED`是一个非零值，因此如果需要，您需要为数组的每个元素指定初始化程序：

```
INPUT_TYPE Node1[5] = { 
    {.state = UNUSED}, 
    {.state = UNUSED}, 
    {.state = UNUSED}, 
    {.state = UNUSED}, 
    {.state = UNUSED}
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T09:13:55.417

为什么不使用构造函数进行初始化：

```
#define UNUSED OxFF
typedef struct inputs{
    uint8_t state;
    uint8_t limit;
    uint8_t value;

   inputs(){state = UNUSED, limit, value;};

} INPUT_TYPE; 
```

?

# php - 如何修改此代码以检查远程主机上的文件是否存在？

> ID：14670865
> 
> 赞同：0
> 
> 时间：2013-02-03T08:49:37.313
> 
> 标签：php

我正在尝试使用下面的代码检查单个网站上是否存在多个文件，但遇到了一个问题，即仅测试顶部 URL，即使它是有效的 URL，我仍然得到*URL 不存在*

我将如何修改代码以正确返回结果并检查文本文件中所有给定的 url。

```
<?php 
$site = "http://site.com"
$urls = file('urls.txt',FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

$found = false;
foreach($urls as $url)
   if($_POST['url'] == $site . $url)
      $found = true;

if($found)
   echo "URL exists";
else
   echo 'URL doesn\'t exist';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:59:26.443

一点点逻辑变化——根据您的需要进行定制。

```
<?php 

$site = "http://site.com"
$urls = file('urls.txt',FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

foreach($urls as $url)

   // TEST URL EXISTENCE HERE (not sure if just looking at $_POST will tell you if its a remote url?

   if($_POST['url'] == $site . $url) {
       echo "URL exists";
   } else {
       echo 'URL doesn\'t exist';
   }

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:01:11.883

试试这个。请注意，您可能必须跳过行尾，因此请使用 rtim()。此外，如果您希望 urls.txt 针对多个输入 url 进行测试，该脚本也将完成该操作。

```
<?php 
$site = "http://site.com"
$urls = file('urls.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

foreach($urls as $url) {
  //if you want to test multiple input urls, they might be in input array, say url[]
  //we can check for the array here
  if(is_array($_POST['url'])) {
    foreach($_POST['url'] as $post_url) {
      //You may want to skip line endings, so use rtrim
      if($post_url == ($site . rtrim($url)) {
        print 'Url found - '.$post_url.'<br>';
      } else {
        print 'Url not found - '.$post_url.'<br>';
      }
    }
  } else {
    //You may want to skip line endings, so use rtrim
    if($POST['url'] == ($site . rtrim($url)) {
      print 'Url found - '.$POST['url'].'<br>';
    } else {
      print 'Url not found - '.$POST['url'].'<br>';
    }
  }  
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:17:01.127

将检查远程服务器上的 url 列表的代码：

```
<?php 
$site = "http://site.com"
$urls = file('urls.txt',FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

foreach($urls as $url) {
  $headers = get_headers($site . $url, 1);
  $status_parts = explode(" ", $headers[0]);
  $status_code = $status_parts[1];
   if ($status_code == 200)
     echo "URL exists";
   else if ($status_code == 404)
     echo 'URL doesn\'t exist';
   else
     // error or something else?
}
?> 
```

有几点需要注意：

1.  [有类似的问题](https://stackoverflow.com/questions/408405/easy-way-to-test-a-url-for-404-in-php)
2.  您可能想要记录 url int eh 响应，而不是仅仅输出它是否存在。

# python - Ajac 调用被阻止 - Web2py 框架

> ID：14670867
> 
> 赞同：0
> 
> 时间：2013-02-03T08:49:53.593
> 
> 标签：python, ajax, jquery, web2py, web2py-modules

我有一个在主机 A 上运行的网络应用程序，它在另一台主机 B 上运行一些命令，我​​想在 A 上的网页上显示在 B 上运行的命令的输出，即我想创建一种实时在 A 上的网页上流式传输 B 的控制台。

为此，我将 B 控制台的输出重定向到 A 上的套接字，并将输出保存在 A 上的文件中。

我触发了一个 ajax 调用，该调用启动了从 B 开始的进程（使用 web2py 控制器）。这个 ajax 调用还处理了 B 的控制台到 A 的套接字的重定向。

从网页中，我触发了另一个 ajax，它读取存储套接字数据的文件。

现在我面临的问题是，当我触发 secodn ajax 调用时，它不会返回网页，直到返回第一个 ajax 调用。

我想知道这是正确的做法。我也想知道，我面临的问题是由于 ajax 或 web2py 框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:20:27.660

默认情况下，会话文件在每次请求时都会被锁定，因此来自同一客户端的新请求会被阻止，直到前一个请求完成并且会话文件被解锁（请参阅[此处](http://web2py.com/books/default/chapter/29/04#session)）。要避免此问题，您可以执行以下操作之一：

*   在您的应用程序代码中，当请求 Ajax 函数时，立即调用`session.forget(response)`. 这将解锁会话文件（并因此阻止为该请求保存会话）。您可以在 Ajax 函数本身的开头包含这一行，也可以在模型文件的前面包含它：

    ```
    if request.function in [list, of, ajax, functions]:
        session.forget(response) 
    ```

*   将会话存储在数据库或 cookie 中，在这种情况下，不会有要锁定的会话文件。

*   如果您不使用基于参数的重写系统，您可以使用基于模式的重写系统来禁用特定路由的自动会话连接。在 routes_in 中，您可以指定 3 元组，而不是指定标准的 2 元组。元组的前两个元素和往常一样（传入模式和重写模式），第三个元素应该是`dict(web2py_disable_session=True)`. 这将阻止框架自动连接该路由的会话（您仍然可以在应用代码中手动连接会话）。从理论上讲，这比第一个选项更有效，因为它完全防止会话文件被锁定（使用第一个选项，框架仍然最初锁定会话文件，然后您的应用程序代码稍后将其解锁） .

# url-rewriting - Yii URL 重写并添加另一种语言

> ID：14670868
> 
> 赞同：1
> 
> 时间：2013-02-03T08:49:58.310
> 
> 标签：url-rewriting, yii, lang

我正在使用 yii 和我的网站结构，如下所示：

主文件夹是“ar”

```
ar
├───assets
├───css
├───images
├───protected
└───themes 
```

帖子链接类似于：

www.example.com/ar/post/view/id/499 **_** _

当我构建站点时，不需要构建具有多语言支持的站点，所以我犯了一个错误并在文件夹“ar”中创建了应用程序，该文件夹是“arabic”的缩写:(。

现在我需要在网站上添加英语，我不希望网址是这样的：

www.example.com/ar/en/post/view/id/499 **_** _

而且我不想重命名主文件夹“ar”，因为我不想丢失当前站点的帖子链接。

那么，你有什么建议我来解决我的问题？当我们制作多语言网站时，最好的思考方式是什么？

**当语言是英语**时，我可以使用 .htaccess 文件或 Yii URL Manager 来重写 url ，他发现 url 是这样的：www.example.com/ar/en/post/view/id/499**将**其转换为像**这样**：www.example.com/en/post/view/id/499

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:19:15.123

您不必更改网址。只需将 ar 的内容移动到父目录，并在适用的情况下修复路径。移动文件夹时，将文件夹`ar`留空并添加`en`文件夹。在每个文件夹中放置 .htaccess ：

```
RewriteEngine on
RewriteRule .* ../index.php 
```

您的文件夹布局应如下所示：

```
ar
en
... possibly more languages
assets
css
images
protected
themes 
```

此配置的优点是您不需要主 Web 文件夹中的 htaccess`/`

对于这种布局的重写规则，我在其他问题中回答：

[url 中的 Yii urlManager 语言](https://stackoverflow.com/questions/2574181/yii-urlmanager-language-in-url/4625710#4625710)

# linux - 在 OS X / iOS 中的 mmap 后文件更改

> ID：14670869
> 
> 赞同：3
> 
> 时间：2013-02-03T08:50:24.957
> 
> 标签：linux, macos, memory, mmap, darwin

如果在我使用`mmap`和 flag对文件进行内存映射后`MAP_PRIVATE`，我在同一进程中对底层文件进行了更改，会发生什么情况？`mmap`记忆会接受变化吗？

在 Linux 中，手册页说：

> MAP_PRIVATE：创建私有写时复制映射。映射的更新对映射同一文件的其他进程不可见，并且不会传递到基础文件。未指定在 mmap() 调用之后对文件所做的更改是否在映射区域中可见。

所以在 Linux 中，答案是“未指定”。

但是在 Mac OS X 中它只说：

> MAP_PRIVATE：修改是私有的（写时复制）。

我做了一个快速示例工具，似乎表明进行更改不会影响私有映射。但没有其他证据证明这一点。

# perl - cpan 问题“运气不好......仍然失败”

> ID：14670871
> 
> 赞同：0
> 
> 时间：2013-02-03T08:50:40.697
> 
> 标签：perl, cpan

在使用以下配置 cpan 时`o conf init`：我收到以下错误：

```
If you're accessing the net via proxies, you can specify them in the
CPAN configuration or via environment variables. The variable in
the $CPAN::Config takes precedence.

Your ftp_proxy? [n]
Your http_proxy? [n]
Your no_proxy?

If your proxy is an authenticating proxy, you can store your username
permanently. If you do not want that, just press RETURN. You will then
be asked for your username in every future session.

Your proxy user id?
Your /root/.cpan/sources/MIRRORED.BY is older than 60 days,  I'm trying to fetch one
CPAN: LWP::UserAgent loaded ok
Fetching with LWP:
  ftp://ftp.oss.eznetsols.org/cpan/MIRRORED.BY

Use of uninitialized value in hash element at /usr/lib/perl5/vendor_perl/5.8.8/LWP/Protocol.pm line 55, <STDIN> line 29.

Use of uninitialized value in pattern match (m//) at /usr/lib/perl5/vendor_perl/5.8.8/LWP/Protocol.pm line 58, <STDIN> line 29.

Use of uninitialized value in concatenation (.) or string at /usr/lib/perl5/vendor_perl/5.8.8/LWP/Protocol.pm line 38, <STDIN> line 29.

Use of uninitialized value in string eq at /usr/lib/perl5/vendor_perl/5.8.8/LWP/UserAgent.pm line 195, <STDIN> line 29.

Fetching with LWP: ftp://ftp.oss.eznetsols.org/cpan/MIRRORED.BY.gz
Use of uninitialized value in hash element at /usr/lib/perl5/vendor_perl/5.8.8/LWP/Protocol.pm line 55, <STDIN> line 29.

Use of uninitialized value in pattern match (m//) at /usr/lib/perl5/vendor_perl/5.8.8/LWP/Protocol.pm line 58, <STDIN> line 29.

Use of uninitialized value in concatenation (.) or string at /usr/lib/perl5/vendor_perl/5.8.8/LWP/Protocol.pm line 38, <STDIN> line 29.

Use of uninitialized value in string eq at /usr/lib/perl5/vendor_perl/5.8.8/LWP/UserAgent.pm line 195, <STDIN> line 29.

CPAN: Net::FTP loaded ok
Fetching with Net::FTP:
  ftp://ftp.oss.eznetsols.org/cpan/MIRRORED.BY
Fetching with Net::FTP
  ftp://ftp.oss.eznetsols.org/cpan/MIRRORED.BY.gz

Trying with "/usr/bin/links -source" to get
    ftp://ftp.oss.eznetsols.org/cpan/MIRRORED.BY
ELinks: Host not found

Trying with "/usr/bin/links -source" to get
  ftp://ftp.oss.eznetsols.org/cpan/MIRRORED.BY.gz
ELinks: Host not found

Trying with "/usr/bin/wget -O -" to get
    ftp://ftp.oss.eznetsols.org/cpan/MIRRORED.BY
--2013-02-04 00:37:43--  ftp://ftp.oss.eznetsols.org/cpan/MIRRORED.BY
Resolving n... failed: Temporary failure in name resolution.
wget: unable to resolve host address `n'

Trying with "/usr/bin/wget -O -" to get
  ftp://ftp.oss.eznetsols.org/cpan/MIRRORED.BY.gz
--2013-02-04 00:37:43--  ftp://ftp.oss.eznetsols.org/cpan/MIRRORED.BY.gz
Resolving n... failed: Temporary failure in name resolution.
wget: unable to resolve host address `n'

Issuing "/usr/kerberos/bin/ftp -n"
ftp: ftp.oss.eznetsols.org: unknown host
Not connected.
Local directory now /root/.cpan/sources
Not connected.
Not connected.
Not connected.
Not connected.
Bad luck... Still failed!
Can't access URL ftp://ftp.oss.eznetsols.org/cpan/MIRRORED.BY.

Please check, if the URLs I found in your configuration file
(ftp://ftp.oss.eznetsols.org/cpan/) are valid. The urllist can be edited.
E.g. with 'o conf urllist push ftp://myurl/'

Could not fetch MIRRORED.BY
Trying to get away with old file:
1238021  144 -rw-r--r--  1 0        0          135245 Oct  3 02:42 /root/.cpan/sources/MIRRORED.BY 
```

这似乎是代理问题。

我尝试了以下事情，但没有成功。

1.  检查了`ping`[它有效]
2.  `/etc/resolve.conf`入口： `nameserver my IP address`
3.  尝试添加代理服务器： `o conf http_proxy http://proxy.mycorp.com:8080/`

请告诉我，如何处理这个问题。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T09:54:35.290

CPAN （无效地）说 FTP 服务器似乎已关闭。

```
$ wget ftp://ftp.oss.eznetsols.org
--2013-02-03 20:51:09--  ftp://ftp.oss.eznetsols.org/
           => ‘.listing’
Resolving ftp.oss.eznetsols.org (ftp.oss.eznetsols.org)... 111.90.255.253
Connecting to ftp.oss.eznetsols.org (ftp.oss.eznetsols.org)|111.90.255.253|:21... failed: Connection refused. 
```

[CPAN 镜像列表](http://www.cpan.org/SITES.html)中不存在该 FTP 服务器，但您的镜像列表已过期。

尝试不同的 CPAN 镜像。`o conf urllist shift http://cpan.pair.com/`例如。

# wpf - 通讯录，我想在列表框中查看我的联系人，我该如何绑定

> ID：14670877
> 
> 赞同：0
> 
> 时间：2013-02-03T08:51:38.817
> 
> 标签：wpf

我试图在 WPF 中做一个地址簿。如何将我的联系人数据绑定到列表框？这是我的联系课程：

```
public class Contact
{

    private string name;

    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    private string familyname;

    public string FamilyName
    {
        get { return familyname; }
        set { familyname = value; }
    }

    private string phonenumber;

    public string PhoneNumber
    {
        get { return phonenumber; }
        set { phonenumber = value; }
    }

} 
```

这个我的 Xaml：我有 3 个用于姓名、家庭姓名和电话号码的文本框；用于创建新联系人的列表框和按钮

```
<Window x:Class="PhoneBookTest10.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="AddressBook" Height="350" Width="525" FontStyle="Italic">
    <Grid>
        <ListBox Height="188" HorizontalAlignment="Left" Margin="25,28,0,0" Name="listBox1" VerticalAlignment="Top" Width="197" />
        <Label Content="Name" Height="28" HorizontalAlignment="Left" Margin="259,64,0,0" Name="label1" VerticalAlignment="Top" />
        <TextBox Height="23" HorizontalAlignment="Right" Margin="0,69,28,0" Name="textBox1" VerticalAlignment="Top" Width="120" DataContext="{Binding}" />
        <Label Content="FamilyName" Height="28" HorizontalAlignment="Left" Margin="259,121,0,0" Name="label2" VerticalAlignment="Top" />
        <TextBox DataContext="{Binding}" Height="23" HorizontalAlignment="Right" Margin="0,126,28,0" Name="textBox2" VerticalAlignment="Top" Width="120" />
        <Label Content="PhoneNumber" Height="28" HorizontalAlignment="Left" Margin="259,188,0,0" Name="label3" VerticalAlignment="Top" />
        <TextBox DataContext="{Binding}" Height="23" HorizontalAlignment="Right" Margin="0,193,28,0" Name="textBox3" VerticalAlignment="Top" Width="120" />
        <Button Content="Create New Contact" Height="32" HorizontalAlignment="Left" Margin="25,226,0,0" Name="button1" VerticalAlignment="Top" Width="197" />
    </Grid>
</Window> 
```

这是我的主窗口：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        contacts.Add(new Contact()
        {
            Name = "James",
            FamilyName = "mangol",
            PhoneNumber = "01234 111111"
        });
        contacts.Add(new Contact()
        {
            Name = "Bob",
            FamilyName = "angol",
            PhoneNumber = "01234 222222"
        });
        contacts.Add(new Contact()
        {
            Name = "Emma",
            FamilyName = "pangol",
            PhoneNumber = "01234 333333"
        });
    }
    protected List<Contact> contacts = new List<Contact>();

    public List<Contact> Contacts 
    {
        get{return contacts;}

        set{ contacts = value;}

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:22:11.447

嗨，首先我想说你需要在编码之前了解绑定和 MVVM。从你的代码看来，你对它没有太多的了解。所以在实施之前先探索一下

```
<Grid>
    <ListBox ItemsSource="{Binding Contacts}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="5"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="5"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Label Grid.Row="0" Grid.Column="0" Content="Name"/>
                    <Label Grid.Row="2" Grid.Column="0" Content="FamilyName"/>
                    <Label Grid.Row="4" Grid.Column="0" Content="PhoneNumber"/>
                    <TextBox Grid.Row="0" Grid.Column="2" Text="{Binding Name}"/>
                    <TextBox Grid.Row="2" Grid.Column="2" Text="{Binding FamilyName}"/>
                    <TextBox Grid.Row="4" Grid.Column="2" Text="{Binding PhoneNumber}"/>
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid>

    public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        Contacts = new ObservableCollection<Contact>();
        Contacts.Add(new Contact()
        {
            Name = "James",
            FamilyName = "mangol",
            PhoneNumber = "01234 111111"
        });
        Contacts.Add(new Contact()
        {
            Name = "Bob",
            FamilyName = "angol",
            PhoneNumber = "01234 222222"
        });
        Contacts.Add(new Contact()
        {
            Name = "Emma",
            FamilyName = "pangol",
            PhoneNumber = "01234 333333"
        });
    }
    public ObservableCollection<Contact> Contacts {get;set;}

}
public class Contact:INotifyPropertyChanged
{

    private string name;

    public string Name
    {
        get { return name; }
        set { name = value; Notify("Name"); }
    }

    private string familyname;

    public string FamilyName
    {
        get { return familyname; }
        set { familyname = value;Notify("FamilyName"); }
    }

    private string phonenumber;

    public string PhoneNumber
    {
        get { return phonenumber; }
        set { phonenumber = value; Notify("PhoneNumber"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void Notify(string propName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }
} 
```

我希望这能帮助你给出一个想法。

# c# - Web 网格中的可点击行，带有 razor/javascript

> ID：14670878
> 
> 赞同：1
> 
> 时间：2013-02-03T08:52:00.110
> 
> 标签：c#, javascript, razor, webgrid

使用 webgrid 帮助器，我使用了一些 JavaScript 来使整行可点击，并且效果很好，但是 JavaScript 中的 href 链接我需要合并 razor。

这里的javascript代码：

```
<script type="text/javascript">
$(function(){
    $('tbody tr').live('hover', function(){
        $(this).toggleClass('clickable');
    }).live('click', function(){
        location.href = '/Messages/Reply/' + $(this).find('td:first').text();   
    }); 
});
</script> 
```

但是这段代码正在获取第一个单元格中的值并在链接中使用该值，我想发送一个未显示在 webgrid 中的不同值。在这种情况下，为每条消息生成一个名为“messageGuiD”的 guid。

我尝试用 messageGuiD 替换 'td:first' 并使用逗号、句点、冒号和任何东西来让它工作但没有成功。我最接近的是我将 messageGuiD 字段作为 webgrid 的一部分并使用样式来制作它隐藏了（显示：无），并且它可以将 messageGuiD 发送到 URL，但这会使标题不合适并且对表格格式有一些副作用......

webgrid 助手从数据库生成了一个表，在这种情况下它是一个消息收件箱，这里是一个生成的 html 示例：

```
<table class="table" data-swhgajax="true" data-swhgcontainer="contentgrid" data- swhgcallback="addCheck">
<thead>
    <tr class="header">
        <th scope="col">
<a data-swhglnk="true" href="/Messages/Inbox?sort=FromUser&amp;sortdir=ASC">From</a>             </th>
        <th scope="col">
<a data-swhglnk="true" href="/Messages/Inbox?sort=messageSubject&amp;sortdir=ASC">Subject</a>            </th>
        <th scope="col">
<a data-swhglnk="true" href="/Messages/Inbox?sort=DateSent&amp;sortdir=ASC">Date Sent</a>            </th>
        <th scope="col">
        </th>
    </tr>
</thead>
<tbody>
    <tr class="rows">
        <td class="mfrom">benatssu</td>
        <td class="msubject"><a href="/Messages/Reply/msg-c75b7310-3708-42b2-bb6a-084ac97dd63c">hello</a></td>
        <td class="mdate">Feb 4, 2013<br>8:02 PM</td>
        <td class="mdel"><input type="checkbox" name="deleteMsg" value="msg-c75b7310-3708-42b2-bb6a-084ac97dd63c"></input></td>
    </tr>
</tbody>
</table> 
```

用户可以通过单击链接到主题列的主题来打开他们的消息，获取 webgrid 助手中使用的链接的代码如下：

```
format: @<a href="~/Messages/Reply/@item.messageGuiD">@item.messageSubject</a> 
```

JavaScript 中 td:first 的问题在于它生成与第一个单元格中的内容的链接，在我的情况下，这里是消息来自谁，并且会生成一个链接 /Messages/Reply/benatssu 即使我将主题移至第一列，链接将变为 /Messages/Reply/hello。

一种方法是让 messageGuiD 显示在第一列中，链接变为 Messages/Reply/msg-c75b7310-3708-42b2-bb6a-084ac97dd63c （这是我想要的），但随后我在表格中显示了一个丑陋的长数字.

无论如何，这个问题已经持续了足够长的时间，如果有人知道一种不复杂的方法来让 JavaScript 从数据库中读取值，那就太棒了，如果没有那么没关系，代码可以使用到主题名称的较小链接，它只是整行可选更漂亮。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:02:09.217

```
$(this).find('td:eq(1) a').attr('href'); 
```

或者你可以使用类

```
 $(this).find('td.msubject a').attr('href'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-02T03:25:31.283

use the id of the A tag to store the messageGuiD - then modify the jquery> $(this).find('td > a').attr('id')

format: @@item.messageSubject

the idea is here... [Get attr('id') from a <td> using jQuery](https://stackoverflow.com/questions/3896636/get-attrid-from-a-td-using-jquery)

# resources - Ogre3D 和 CEGUI 在 TaharezLook.scheme 中找不到资源组“schemes”

> ID：14670880
> 
> 赞同：0
> 
> 时间：2013-02-03T08:52:19.323
> 
> 标签：resources, ogre3d, cegui

也许有人可以找到我的问题的答案。几个月前，我尝试遵循 OGre3D wiki 中的基本教程 #7 但放弃了，因为我无法解决这个问题。我再次拿起它，我在任何地方都找不到任何帮助。我已经使用了很多很多次的搜索引擎，其中包括精确的短语。

```
#ifndef __BasicTutorial7_h_
#define __BasicTutorial7_h_

#include "BaseApplication.h"
#if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
#include "../res/resource.h"
#endif

#include <CEGUI/cegui/include/CEGUI.h>
#include <CEGUI/cegui/include/RendererModules/Ogre/CEGUIOgreRenderer.h>

class BasicTutorial7 : public BaseApplication
{
public:
    BasicTutorial7(void);
    virtual ~BasicTutorial7(void);

protected:
    CEGUI::OgreRenderer* mRenderer;

    virtual void createScene(void);

    virtual void createFrameListener(void);

    // Ogre::FrameListener
    virtual bool frameRenderingQueued(const Ogre::FrameEvent& evt);

    // OIS::KeyListener
    virtual bool keyPressed( const OIS::KeyEvent &arg );
    virtual bool keyReleased( const OIS::KeyEvent &arg );
    // OIS::MouseListener
    virtual bool mouseMoved( const OIS::MouseEvent &arg );
    virtual bool mousePressed( const OIS::MouseEvent &arg, OIS::MouseButtonID id );
    virtual bool mouseReleased( const OIS::MouseEvent &arg, OIS::MouseButtonID id );

    bool quit(const CEGUI::EventArgs &e);
};

#endif // #ifndef __BasicTutorial7_h_

    #include "BasicTutorial7.h"
CEGUI::MouseButton convertButton(OIS::MouseButtonID buttonID)
{
    switch (buttonID)
    {
    case OIS::MB_Left:
        return CEGUI::LeftButton;

    case OIS::MB_Right:
        return CEGUI::RightButton;

    case OIS::MB_Middle:
        return CEGUI::MiddleButton;

    default:
        return CEGUI::LeftButton;
    }
}
//-------------------------------------------------------------------------------------
BasicTutorial7::BasicTutorial7(void)
{
}
//-------------------------------------------------------------------------------------
BasicTutorial7::~BasicTutorial7(void)
{
}
//-------------------------------------------------------------------------------------
void BasicTutorial7::createScene(void)
{
mRenderer = &CEGUI::OgreRenderer::bootstrapSystem(); //Fire up CEGUI.
/* The code in this comment block I added after following another small tutorial on cegui's wiki. All it gave me was a access violation exception no matter what path I specified. If you wish to get the error I'm getting, remove this code or keep it commented when you copy & paste into your compiler for testing.
CEGUI::DefaultResourceProvider* rp = static_cast<CEGUI::DefaultResourceProvider*>
(CEGUI::System::getSingleton().getResourceProvider());

rp->setResourceGroupDirectory("schemes", "C:/Users/t/Documents/Visual Studio 2010/OgreSDK/include/CEGUI/datafiles/schemes/");
rp->setResourceGroupDirectory("imagesets", "C:/Users/t/Documents/Visual Studio 2010/OgreSDK/include/CEGUI/datafiles");
rp->setResourceGroupDirectory("fonts", "C:/Users/t/Documents/Visual Studio 2010/OgreSDK/include/CEGUI/datafiles");
rp->setResourceGroupDirectory("layouts", "C:/Users/t/Documents/Visual Studio 2010/OgreSDK/include/CEGUI/datafiles");
rp->setResourceGroupDirectory("looknfeels", "C:/Users/t/Documents/Visual Studio 2010/OgreSDK/include/CEGUI/datafiles");
rp->setResourceGroupDirectory("lua_scripts", "C:/Users/t/Documents/Visual Studio 2010/OgreSDK/include/CEGUI/datafiles");
*/
CEGUI::Imageset::setDefaultResourceGroup("imageset"); //Add the resource groups.
CEGUI::Font::setDefaultResourceGroup("fonts");
CEGUI::WidgetLookManager::setDefaultResourceGroup("looknfeel");
CEGUI::WindowManager::setDefaultResourceGroup("layouts");
CEGUI::Scheme::setDefaultResourceGroup("schemes");

CEGUI::SchemeManager::getSingleton().create("TaharezLook.Scheme"); //Set the skin for CEGUI.
CEGUI::System::getSingleton().setDefaultMouseCursor("TaharezLook", "MouseArrow"); //Set the mouse cursor skin. First parameter specifies the resource group, the second the actual Image.

CEGUI::WindowManager &wmgr = CEGUI::WindowManager::getSingleton();
CEGUI::Window *sheet = wmgr.createWindow("DefaultWindow", "CEGUIDemo/Sheet"); 

CEGUI::Window *quit = wmgr.createWindow("TaharezLook/Button", "CEGUIDemo/QuitButton" );
quit->setText("Quit");
quit->setSize(CEGUI::UVector2(CEGUI::UDim(0.15, 0), CEGUI::UDim(0.05,0) ) );

sheet->addChildWindow(quit);
CEGUI::System::getSingleton().setGUISheet(sheet);
quit->subscribeEvent(CEGUI::PushButton::EventClicked, CEGUI::Event::Subscriber(&BasicTutorial7::quit, this ) );

mSceneMgr->setAmbientLight(Ogre::ColourValue(1, 1, 1));
mSceneMgr->setSkyDome(true, "Examples/CloudySky", 5, 8);
Ogre::Entity* ogreHead = mSceneMgr->createEntity("Head", "ogrehead.mesh");
Ogre::SceneNode* headNode = mSceneMgr->getRootSceneNode()->createChildSceneNode(Ogre::Vector3(0, 0, -300));
headNode->attachObject(ogreHead);

Ogre::TexturePtr tex = mRoot->getTextureManager()->createManual(
"RTT",
Ogre::ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME,
Ogre::TEX_TYPE_2D,
512,
512,
0,
Ogre::PF_R8G8B8,
Ogre::TU_RENDERTARGET);

Ogre::RenderTexture *rtex = tex->getBuffer()->getRenderTarget();

Ogre::Camera *cam = mSceneMgr->createCamera("RTTCam");
cam->setPosition(100, -100, -400);
cam->lookAt(0, 0, -300);
Ogre::Viewport *v = rtex->addViewport(cam);
v->setOverlaysEnabled(false);
v->setClearEveryFrame(true);
v->setBackgroundColour(Ogre::ColourValue::Black);

CEGUI::Texture &guiTex = mRenderer->createTexture(tex);

    CEGUI::Imageset &imageSet =
      CEGUI::ImagesetManager::getSingleton().create("RTTImageset", guiTex);
    imageSet.defineImage("RTTImage",
                         CEGUI::Point(0.0f, 0.0f),
                         CEGUI::Size(guiTex.getSize().d_width,
                                     guiTex.getSize().d_height),
                         CEGUI::Point(0.0f, 0.0f));

CEGUI::Window *si = CEGUI::WindowManager::getSingleton().createWindow("TaharezLook/StaticImage", "RTTWindow");

si->setSize(CEGUI::UVector2(CEGUI::UDim(0.05f, 0), CEGUI::UDim(0.04f,0) ) );
si->setPosition(CEGUI::UVector2( CEGUI::UDim(0.05f, 0), CEGUI::UDim(0.0f,0) ) );

si->setProperty("Image", CEGUI::PropertyHelper::imageToString(&imageSet.getImage("RTTImage")));

    sheet->addChildWindow(si);

}
//-------------------------------------------------------------------------------------
void BasicTutorial7::createFrameListener(void)
{
    Ogre::LogManager::getSingletonPtr()->logMessage("*** Initializing OIS ***");
    OIS::ParamList pl;
    size_t windowHnd = 0;
    std::ostringstream windowHndStr;

    mWindow->getCustomAttribute("WINDOW", &windowHnd);
    windowHndStr << windowHnd;
    pl.insert(std::make_pair(std::string("WINDOW"), windowHndStr.str()));

    mInputManager = OIS::InputManager::createInputSystem( pl );

    mKeyboard = static_cast<OIS::Keyboard*>(mInputManager->createInputObject( OIS::OISKeyboard, true ));
    mMouse = static_cast<OIS::Mouse*>(mInputManager->createInputObject( OIS::OISMouse, true ));

    mMouse->setEventCallback(this);
    mKeyboard->setEventCallback(this);

    //Set initial mouse clipping size
    windowResized(mWindow);

    //Register as a Window listener
    Ogre::WindowEventUtilities::addWindowEventListener(mWindow, this);

    mRoot->addFrameListener(this);

}
//-------------------------------------------------------------------------------------
bool BasicTutorial7::frameRenderingQueued(const Ogre::FrameEvent& evt)
{
   if(mWindow->isClosed())
        return false;

    if(mShutDown)
        return false;

    //Need to capture/update each device
    mKeyboard->capture();
    mMouse->capture();

    //Need to inject timestamps to CEGUI System.
    CEGUI::System::getSingleton().injectTimePulse(evt.timeSinceLastFrame);

    return true;

}
//-------------------------------------------------------------------------------------
bool BasicTutorial7::keyPressed( const OIS::KeyEvent &arg )
{

CEGUI::System &sys = CEGUI::System::getSingleton();
sys.injectKeyDown(arg.key);
sys.injectChar(arg.text);

return true;

}
//-------------------------------------------------------------------------------------
bool BasicTutorial7::keyReleased( const OIS::KeyEvent &arg )
{
    CEGUI::System::getSingleton().injectKeyUp(arg.key);
                return true;
}
//-------------------------------------------------------------------------------------
bool BasicTutorial7::mouseMoved( const OIS::MouseEvent &arg )
{
CEGUI::System &sys = CEGUI::System::getSingleton();
sys.injectMouseMove(arg.state.X.rel, arg.state.Y.rel);
// Scroll wheel.
if (arg.state.Z.rel)
    sys.injectMouseWheelChange(arg.state.Z.rel / 120.0f);
return true;
}
//-------------------------------------------------------------------------------------
bool BasicTutorial7::mousePressed( const OIS::MouseEvent &arg, OIS::MouseButtonID id )
{

CEGUI::System::getSingleton().injectMouseButtonDown(convertButton(id));

return true;

}
//-------------------------------------------------------------------------------------
bool BasicTutorial7::mouseReleased( const OIS::MouseEvent &arg, OIS::MouseButtonID id )
{
    CEGUI::System::getSingleton().injectMouseButtonUp(convertButton(id));
                return true;
}
//-------------------------------------------------------------------------------------
bool BasicTutorial7::quit(const CEGUI::EventArgs &e)
{
mShutDown = true;
return true;

}

#if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
#define WIN32_LEAN_AND_MEAN
#include "windows.h"
#endif

#ifdef __cplusplus
extern "C" {
#endif

#if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
    INT WINAPI WinMain( HINSTANCE hInst, HINSTANCE, LPSTR strCmdLine, INT )
#else
    int main(int argc, char *argv[])
#endif
    {
        // Create application object
        BasicTutorial7 app;

        try {
            app.go();
        } catch( Ogre::Exception& e ) {
#if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
            MessageBox( NULL, e.getFullDescription().c_str(), "An exception has occured!", MB_OK | MB_ICONERROR | MB_TASKMODAL);
#else
            std::cerr << "An exception has occured: " <<
                e.getFullDescription().c_str() << std::endl;
#endif
        }

        return 0;
    }

#ifdef __cplusplus
}
#endif 
```

我正在使用的教程：[基本教程 7](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Basic%20Tutorial%207)

当我运行 Ogre 时，我得到这个错误：

> “OGRE_EXCEPTION(5:ItemIdentityException)：在 ResourceGroupManager::openResource 中找不到名为“schemes”的资源组，位于 ..\OgreMain\src\OgreResourceGroupMananger.cpp（第 688 行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T19:07:08.010

在该`resources.cfg`文件中，您必须告诉 Ogre 在哪里可以找到您的应用程序所需的所有资源。这是通过指定资源组及其内容来完成的。

你没有告诉 Ogre 在哪里可以找到 CEGUI UI 方案所需的资源，因此你看到了错误。本教程清楚地列出了您需要添加到[本节](http://www.ogre3d.org/tikiwiki/Basic+Tutorial+7#Defining_CEGUI_resource_groups)中的 resources.cfg 文件的内容。

# java - 平板电脑的客户端服务器框架

> ID：14670885
> 
> 赞同：1
> 
> 时间：2013-02-03T08:53:29.730
> 
> 标签：java, objective-c, websocket, client-server, multiplayer

我需要为平板电脑创建一个多人游戏，并且一直在寻找一个客户端服务器框架，我可以在服务器端使用 Java 和 Objective C 或 Java 来使用客户端。该游戏的动作并不激烈，一次只有少数玩家使用，而不是数百万玩家。

我查看了 WebSockets，但似乎它的目标是浏览器而不是平板电脑，尽管还有[一个框架用于](http://code.google.com/p/unitt/wiki/UnittWebSocketClient)在客户端执行 Objective C Objective C。

我对 Web 应用程序有相当多的经验，但从未做过客户端服务器游戏。任何想法从哪里开始将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:34:58.223

许多实时游戏，例如第一人称射击游戏，编写了他们自己的基于 UDP 的自定义协议。

过去，非实时游戏通常会直接通过 TCP 编写自己的协议，但如今，在非实时游戏中使用 HTTP 已经很普遍了。虽然 HTTP 最常在浏览器中用于承载 HTML 页面，但它实际上足够通用，几乎可以在任何需要 RESTful 属性的服务器-客户端情况下使用。使用 POST 创建，GET 读取，PUT 更新，DELETE 删除，得到整个 CRUD；使用 URL 来识别资源；和 cookie 来跟踪状态；用于身份验证的 HTTP Auth；和 HTTPS 以防止窥探。Websockets 将服务器发起的推送添加到 HTTP 协议。使用 HTTP 的优点是它的行为易于理解且标准化（因此，许多高质量的预写模块支持该协议）。另一个优点是 HTTP 与语言和设备无关，因此在网络访问方面将您的游戏移植到浏览器或其他平台应该变得相当简单。HTTP 也有很好理解和很好支持的技术，可以让你的游戏扩展、负载平衡、缓存等，这是你编写自己的应用层协议所没有的。

很少需要也不建议开发自己的应用程序协议，但如果需要，您可以直接在 TCP 上编写自定义应用程序层协议。这通常是高度专业化的，所以在不知道游戏的类型和网络要求的情况下，我无法告诉您是否会从 TCP 级别的框架中受益。

# javascript - Kinect 中的可拖动图像事件

> ID：14670896
> 
> 赞同：0
> 
> 时间：2013-02-03T08:56:19.223
> 
> 标签：javascript, dom-events, kineticjs

我正在创建一个脚本，其中图像是可拖动的，并且可以在双击时更改图像源。

移动图像可以正常工作，当双击图像（事件是 dblclick）时，图像会发生变化，但同时显示为双倍，其中另一个相同的图像出现在原始位置。

代码是：

```
var picture = new Image();
picture.onload = function() {
   var picture = new Kinetic.Image({
   x: 10,
   y: 10,
   image: picture,
   draggable: true,
   width: 100,
   height: 200
});

picture.on('dblclick', function() {
   picture.src = 'images/picture2.jpg';
});

layer.add(picture);
stage.add(layer);

}

picture.src = 'images/picture1.jpg'; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:34:32.193

那是因为每次更改 image.src 时，都会触发 image onload 事件。和 onload 事件创建一个新的动力学图像并添加到图层。这是我的源代码版本。

```
$( function() {
    var stage = new Kinetic.Stage({
      container: 'container',
      width: 578,
      height: 200
    });
    var layer = new Kinetic.Layer();

    var yoda = new Kinetic.Image({
      x: 140,
      y: stage.getHeight() / 2 - 59,
      width: 106,
      height: 118,
      draggable:true
    });

    var images =[
        'http://www.html5canvastutorials.com/demos/assets/yoda.jpg',
        'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg',
        'http://www.html5canvastutorials.com/demos/assets/wood-pattern.png'
    ];
    var imgIndex = 0;
    var imageObj = new Image();
    imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg';

    imageObj.onload = function() {
        yoda.setImage(imageObj);
        layer.draw();
    };

    yoda.on('dblclick',function() {
        imageObj.src = images[ imgIndex++ % 3 ];
    })

    layer.add(yoda);
    stage.add(layer);

}); 
```

我相信您遵循该网站的教程，但它并不总是正确的。另外，请记住不要在图像和动力学对象的源上使用相同的可变图片。这很令人困惑

# php - BigCommerce PHP API 连接失败

> ID：14670897
> 
> 赞同：0
> 
> 时间：2013-02-03T08:56:46.330
> 
> 标签：php, bigcommerce

我将尝试使用 PHP 为我的 bigcommerce 商店编写一个小集成。但是，我似乎无法通过简单地建立连接来超越第一阶段。

我已经阅读了具有相同问题的人的各种主题，但没有提供的答案似乎对我有用。

我在我的 Windows 7 机器上运行 AMPPS 并编写了一个简单的 PHP 脚本来从 BigCommerce 商店获取时间。这是我的 php 文件。

```
<?php

require_once 'Bigcommerce/Api.php';

Bigcommerce_Api::setCipher('RC4-SHA');
Bigcommerce_Api::verifyPeer(false);

Bigcommerce_Api::configure(array(
'store_url' => 'https://store-hxxhy.mybigcommerce.com',
'username' => 'admin',
'api_key' => '4bf35c13c9b383ab9df15c48d250841bfb03e416'
));

$ping = Bigcommerce_Api::getTime();

if ($ping) 
{
echo $ping->format('H:i:s');
}

?> 
```

我没有收到任何错误，但我也收到空白回复。我查看了我的 bigcommerce 商店中的请求日志，发现它返回了 401 错误。

我的想法很新鲜，所以任何帮助都会很棒。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:00:00.873

配置客户端后设置密码列表。

```
require_once 'Bigcommerce/Api.php';

Bigcommerce_Api::configure(array(
'store_url' => 'https://store-xxxx.mybigcommerce.com',
'username' => 'test',
'api_key' => 'xxxxx'
));
Bigcommerce_Api::setCipher('RC4-SHA');
Bigcommerce_Api::verifyPeer(false);
$products = Bigcommerce_Api::getProducts();

foreach($products as $product) {
    echo $product->name;
    echo $product->price;
} 
```

这应该让你去......干杯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T09:05:58.640

在努力发现我的代码总是出错的地方之后，我发现最好自己对错误进行适当的检查，比如

```
$ping = Bigcommerce_Api::getTime();

if (!$ping ) {
$error = Bigcommerce::getLastError();
print_r($error);
} 
```

这应该告诉你错误到底在哪里，尽管还有其他方法可以找出它为什么不起作用。如果我们得到控制台的错误响应，我们都知道它是最好的。这使您可以更快地找到解决方案，您可以在此处找到有关错误代码的更多信息 [http://developer.bigcommerce.com/docs/api/v2/response_codes](http://developer.bigcommerce.com/docs/api/v2/response_codes)

我希望这有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-14T16:56:28.123

我已经运行了这些命令

作曲家需要 bigcommerce/api 作曲家更新作曲家需要 phpunit/phpunit

但这仍然出现致命错误：第 8 行的 D:\xampp\htdocs\bigcommerce-api-php\Tests\ApiTest.php 中未找到 Class 'PHPUnit_Framework_TestCase'

另外，这个配置代码`store.mybigcommerce.com', 'username' =- 'admin', 'api_key' =- 'd81aada4xc34xx3e18f0xxxx7f36ca'))`

必须在 vendor/autoload.php 上？在这段代码之间：`require_once **DIR**。'/作曲家' 。'/autoload_real.php';

返回 ComposerAutoloaderInit4248087c0febd66e99bdb31c874f1d0f::getLoader();`

# html - 继承自 HTML 标签的 HTML Div 大小，100%

> ID：14670898
> 
> 赞同：0
> 
> 时间：2013-02-03T08:56:52.543
> 
> 标签：html, css

无法将 HTML 大小划分为 100%。它产生了 100% 的窗口大小，但即使 HTML 比窗口大，它也不会继承它的大小，这一切的问题是我只需要一个分区就可以像 body 或 HTML 一样大。我的CSS是：

```
body, html{
    width: 100%;
    height: 100%;
    margin: 0 auto;

    }

#leftNav{
    background-image: url("images/nav_bar.png");
    background-repeat: no-repeat;
    background-position: top left; 
    width: 20%;
    height: inherit;
    position: relative;
    float: left;
    background-color: #000000;
    } 
```

这就是它目前的样子：http: [//i.imgur.com/99VUULm.png](http://i.imgur.com/99VUULm.png)

这就是我想要的样子：http: [//i.imgur.com/2JNZG1f.png](http://i.imgur.com/2JNZG1f.png)

我不希望其余内容与 HTML 大小相同，只需 leftNav。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:00:20.307

如果您希望它滚动，则需要根据您是否希望它水平和/或垂直滚动​​来设置固定的宽度和/或高度。body 和 HTML 的父级是窗口，因此将其设置为 100% 意味着它始终是窗口的全宽和全高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:06:48.580

尝试添加

```
position: fixed; 
```

到#leftNav。另外，我很确定 body 和 html 的宽度和高度是多余的，甚至可能搞砸了。

如果这不是你要找的，请告诉我..

# jpa - OpenJPA 不获取 OneToOne 关系

> ID：14670900
> 
> 赞同：0
> 
> 时间：2013-02-03T08:57:40.283
> 
> 标签：jpa, openjpa

我正在使用 OpenJPA 2.2.1 并遇到以下问题：

```
TypedQuery<OdpObjectScheduleEntity> q = em.createQuery(
    "SELECT s FROM OdpObjectScheduleEntity s WHERE s.updateFreq IS NOT NULL",
    OdpObjectScheduleEntity.class);
List<OdpObjectScheduleEntity> result = q.getResultList(); 
```

这是`OdpObjectScheduleEntity`：

```
package ru.focusmedia.odp.server.datastore.jpa.entity;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.OneToOne;
import javax.persistence.Table;

import ru.focusmedia.odp.server.datastore.api.objects.OdpObjectScheduleRecord;

@Entity
@Table(name = "object_schedules")
public class OdpObjectScheduleEntity implements OdpObjectScheduleRecord {
    // fetch=FetchType.EAGER is the default. 
    // I've also tried explicitly setting it, no difference.
    @OneToOne(optional = false) 
    @Column(nullable = false)
    @Id
    private OdpObjectEntity object;

    @Column(name = "update_freq_seconds", nullable = true)
    private Integer updateFreq;

    protected OdpObjectScheduleEntity() {
        // for JPA
    }

    public OdpObjectScheduleEntity(OdpObjectEntity object, Integer updateFreq) {
        this.object = object;
        this.updateFreq = updateFreq;
    }

    @Override
    public OdpObjectEntity getObject() {
        return object;
    }

    @Override
    public Integer getUpdateFreq() {
        return updateFreq;
    }

    public void setUpdateFreq(Integer updateFreq) {
        this.updateFreq = updateFreq;
    }

    @Override
    public String toString() {
        return "OdpObjectScheduleEntity [object=" + object + ", updateFreq="
                + updateFreq + "]";
    }
} 
```

但是 的元素`result`看起来好像对象是懒惰地获取的，例如`OdpObjectScheduleEntity [object=OdpObjectEntity [id=23851, name=null, parent=null, odpClass=null], updateFreq=120]`. 我是否遗漏了一些明显的东西，或者这是 OpenJPA 中的错误？我可以通过做一些可怕的事情来解决这个问题

```
for (OdpObjectScheduleEntity schedule : result) {
    // simply schedule.getObject() doesn't work
    schedule.getObject().toString();
} 
```

有没有更好的方法来强制加载关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:32:26.257

我从来没有使用过 OpenJPA，所以我不能告诉你到底出了什么问题，但你可以尝试使用`JOIN FETCH`：

```
TypedQuery<OdpObjectScheduleEntity> q = em.createQuery(
    "SELECT s FROM OdpObjectScheduleEntity s LEFT JOIN FETCH s.object WHERE s.updateFreq IS NOT NULL",
    OdpObjectScheduleEntity.class);
List<OdpObjectScheduleEntity> result = q.getResultList(); 
```

有关更多信息，请参见例如[http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_fetch_joins](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_fetch_joins)

# objective-c - 目标c NSXMLParser委托类不触发委托方法

> ID：14670904
> 
> 赞同：1
> 
> 时间：2013-02-03T08:58:26.047
> 
> 标签：objective-c, nsxmlparser

我按照网络上的简单[教程](http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser)使用 NSXMLParser 解析 xml。委托对象初始化，但从不触发 NSXMLParser 委托方法。我做错了什么？我在 windows 上使用 GNUSetup。

这是我调用解析器的地方：

```
-(BOOL) loadXmlPath :(NSString*)filePathXml:(NSString*) filePathWrite
{
    if([fileMgr fileExistsAtPath:filePathXml] == YES)
    {
        NSLog(@"%@",filePathXml);       
        NSURL *xmlURL = [NSURL fileURLWithPath:filePathXml]; 
        NSXMLParser *nsXmlParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlURL];
        if(nsXmlParser)
        {
             NSLog(@"done setup parser");
        }
        else
        {
             NSLog(@"fail setup parser");
        }
        // create and init our delegate
        XMLParser *parser = [[XMLParser alloc] initXMLParser];
        [nsXmlParser setShouldProcessNamespaces:NO]; // We don't care about namespaces
    [nsXmlParser setShouldReportNamespacePrefixes:NO]; //
    [nsXmlParser setShouldResolveExternalEntities:NO]; // We just want data, no other stuff
    // set delegate
    [nsXmlParser setDelegate:parser];
    // parsing...
    BOOL success = [nsXmlParser parse];
      // test the result
    if (success) {
         NSLog(@"parsing document!");
         // get array of users here
    } else {
        if ([nsXmlParser parserError]) {
            NSError *err = [nsXmlParser parserError];
            NSString *serror = [err localizedDescription];
            NSLog(@"Error parsing document!%@\n",serror);
        }
        NSLog(@"Error parsing document!");
    }
    }
    return NO;
} 
```

XmlParser.h

```
#import <Foundation/Foundation.h>

@interface XMLParser : NSObject 
{
    NSXMLParser *parser;

}
-(XMLParser *) initXMLParser;
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict;
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string;
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName;

@end 
```

XmlParser.m

```
#import "XMLParser.h"
@implementation XMLParser

- (XMLParser *) initXMLParser {
   self = [super init];
    NSLog(@"Init xml parser");

  return self;
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

     NSLog(@"Enter parser 1");
    if ( [elementName isEqualToString:@"name"]) {
    NSLog(@"%@",elementName);

        return;
    }

    if ( [elementName isEqualToString:@"person"] ) {

        return;
    }

    if ( [elementName isEqualToString:@"lastName"] ) {

        return;
    }

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    NSLog(@"Enter parser 2");

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    NSLog(@"Enter parser 3");

    if (( [elementName isEqualToString:@"addresses"]) ||
        ( [elementName isEqualToString:@"address"] )) return;

    if ( [elementName isEqualToString:@"person"] ) {

        return;
    }

}

@end 
```

它永远不会到达解析器方法。但它确实到达了 initXMLParser 。我在这里做错了什么？我也进入了：[errlocalizedDescription] 这个消息：

> NSXMLParserErrorDomain 3

这是什么意思 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:10:07.940

在你的`XmlParser.h`你需要表明你实现了解析器委托

这条线

```
@interface XMLParser : NSObject 
```

应该

```
@interface XMLParser : NSObject <NSXMLParserDelegate> 
```

**编辑：**

你的init也是错的，应该如下

```
- (XMLParser *) initXMLParser {
  self = [super init];
    NSLog(@"Init xml parser");

  return self;
} 
```

`[super init]`你忘记给self赋值

# php - Ajax 和编码帮助 - 我通过 php 将更新提交到数据库，它可以工作 - 但我的页面更新没有

> ID：14670906
> 
> 赞同：0
> 
> 时间：2013-02-03T08:59:10.660
> 
> 标签：php, ajax, dom, mysqli

所以我有这个表格：

```
echo '<form id="target" action="edit-property.php?Property='.$property.'" method="post">';
echo "Address: ".'<input type="text" name="address" value="'.$propAddress.'" />';
echo '<input type="submit" value="Update">';
echo "</form>"; 
```

在提交时，我用这个函数更改了数据库条目（我还在学习从 mysql 到 mysqli 的变化，所以我不确定我是否做对了，我也不完全知道如何绑定参数更新表格，但这不是我的问题）

```
$property = $_GET['Property']
if (isset($_POST['address']) && !empty($_POST['address'])) {
$mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
    if (!$mysqli) {
        die('There was a problem connecting to the database.');
    }
    else {
        $address = mysqli_real_escape_string($mysqli, $_POST['address']);
        $id = intval($property);
        if($id) {
        $query =("UPDATE Properties
            SET Address = '$address'
            WHERE Id = '$id'");
            if (mysql_query($query)){
                echo '1';
                exit;
            }
            else {
                echo '0';
                exit;
            }
            $mysqli->close(); 
        }
    }
} 
```

好的。这样就可以了（如果我在这里做了一些愚蠢的事情，请随时纠正我，我发现我通过批评学习得最好，stackoverflow 帮助我提高了很多！）

但这是我的困境。我想在页面上更新而不必刷新页面。

我遇到了下面的代码，对其进行了修改以适合我，但不幸的是它不起作用。恐怕我不知道为什么：

```
<script>
var id = <?=$id?>;
// when the DOM is ready
$(document).ready(function() {
    $('#target').submit(function(e) {
        // prevent normal, boring, tedious form submission
        e.preventDefault();
        // send it to the server out-of-band with XHR
        $.post('edit-property.php?Property=' + id, function() {
            data: $(this).val(),
            success: function(resp) { 
                if(resp == '1') {
                    alert('Saved successfully');
                } else {
                    alert('Oops, something went wrong!');
                }
            }
        });
    });
});
</script> 
```

不幸的是，这是一个谜——无法正常工作。我可能做错了什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:28:00.707

我认为您误解了此调用的语法，并且您已将一些用于 的参数包装`$.post`到您可能希望用于完成的多余“函数”中。

```
$.post('edit-property.php?Property=' + id, 
            /*function() {*/
            data: $(this).val(),
            success: function(resp) { 
                if(resp == '1') {
                    alert('Saved successfully');
                } else {
                    alert('Oops, something went wrong!');
                }
            /*}*/
        }); 
```

# javascript - 文本框中的不同字体

> ID：14670909
> 
> 赞同：1
> 
> 时间：2013-02-03T09:00:09.433
> 
> 标签：javascript, jquery, html, css

![在此处输入图像描述](../Images/677e061a6c7059da64f073f2332bcf47.png)

我在 html 中创建了一个表单，并将 CSS 写入文本字段。我将字体系列 ARIAL 设置为文本框。现在我需要将阿拉伯语字体设置为默认的特定文本框。并非在所有文本框中。

我使用了以下代码

```
@font-face {
    font-family:'Traditional Arabic';
    src: url('trado.ttf');
    src: local('trado Regular'), local('trado'), url('trado.ttf') format('truetype');
}
input[type=text].firstnamearabic, input[type=text].secondnamearabic, input[type=text].familynamearabic {
    border-bottom: 1px solid #000;
    font-family:"Traditional Arabic" !important;
} 
```

但是，当我打字时，默认的英文字母只会出现。阿拉伯字母不来了。

我在那个特定的文本框中看到了不同的字体样式。但它没有出现在阿拉伯语字幕中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:53:20.957

css 格式化输出，而不是输入。

要使用阿拉伯字母或网页中的任何字母或任何软件，您需要将键盘设置为 utf-8 阿拉伯语输出。

不要使用转换拉丁字母的字体；如果您的用户输入阿拉伯语，这些都是笨拙且不可靠的，他们的操作系统设置为阿拉伯语键盘输入的可能性非常高（99％），因此在 css 中使用的字体绝对无关紧要（我相信 Arial 可以安全用于任何 utf-8 字母输入）

所以基本上你需要的是你的 html 和你的 db 被设置为接收 utf-8，这样无论用户输入什么，它都会被你的应用程序记录下来。

虽然我认为阿拉伯语是从右到左的，但您还需要为您的输入相应地设置文本方向。但是我不知道如何检测用户是否以阿拉伯语/拉丁语输入（也就是说，如果您希望灵活地允许用户使用两者中的任何一个）

注意：如果您使用设置为阿拉伯语的键盘进行输入，请从 css 中删除阿拉伯语字体，如果有，然后添加正确的文本方向，如果您对不适当的答案感到抱歉！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:05:25.113

设置字体系列不应更改字符或键盘功能的标识。“A”仍然是一个 A，一个拉丁字母，与字体无关。所以一切都应该像使用 Arial 时一样工作，只是字母样式不同（拉丁语和阿拉伯语）。这似乎正在发生。

例如，您可以在 Windows 中选择阿拉伯语键盘布局，然后按键将生成阿拉伯字母——完全独立于字体设置。

通常，最好对不同语言的文本使用相同的字体，尤其是当文本看起来像这里一样可比时。由于 Arial 也涵盖了阿拉伯字母，因此这是一个好的开始。

# css - 调节 CSS 中子元素的不透明度

> ID：14670911
> 
> 赞同：0
> 
> 时间：2013-02-03T09:00:13.977
> 
> 标签：css, opacity

我正在使用一个名为 #search-container 的 div

我使用它的不透明度为 0.6。

使它有一些不透明度

```
#search-container
                               {
                                border-radius: 15px;
                                moz-border-radius: 15px;

                                position:absolute;
                                height:45%; 
                                width:55%; 
                                left: 3%;top:30%; 
                                background-color: #000; 
                                opacity:0.6;  
                                } 
```

现在我在 ID 为 #city 的搜索容器下放置一个文本框

我正在为#city 使用 CSS

```
#city
                                   {

                                    height:20%; 
                                    width:40%; 
                                    opacity:1;  
                                    } 
```

但是，文本框的不透明度仍然等于搜索容器

似乎孩子与其居住的父母具有相同的不透明度

我怎样才能使文本框看起来实心，我希望 div #search-container 不透明，但文本框应该是实心的..

有没有办法做到这一点？？？

一些帮助将是可观的...在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:25:17.197

CSS 元素不透明度通过子元素相乘，所以如果我在白色背景上的 50% 不透明度黑色 div 内有一个 50% 不透明度的红色 div，我将能够通过红色和白色看到一些黑色整件事情。

如果您只需要背景颜色不透明度，则可以将`rgba()`其用作背景来解决此问题，但 IE6- 不支持。背景图像/图像不透明度可以使用 PNG 或 SVG 图像来完成。如果您绝对需要完整的元素不透明度，那么您还可以使用包装器 div 来制作半透明元素和不透明元素的兄弟姐妹，并使用绝对定位 ( *yuck* )。

# c - DevC++和gcc的区别问题

> ID：14670919
> 
> 赞同：-1
> 
> 时间：2013-02-03T09:00:52.837
> 
> 标签：c, gcc, dev-c++

在 gcc 中，在 linux 上，我使用这个操作没有问题：

```
s->voti->next 
```

但在 DevC++ 中，在 Windows 上，它会导致分段错误:(

为什么？我究竟做错了什么？:(

[在这里](http://nopaste.me/paste/742398834510e1e98d0ee7)找到完整的代码

*   **第 82 行**（**cur=cur->next**应该等于**s->voti = s->voti->next**）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:14:12.640

我认为这不是一个好问题，但第 187 行的函数调用在`new_node->voti`传递给`insertMateria`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:54:50.503

Dev-C++*不是*编译器。它是一个 IDE。它与 MinGW GCC 打包在一起（即它*是*GCC），这取决于您使用的 Dev-C++ 版本，但是，它可能是非常旧的 GCC 版本。

综上所述，这不是编译器之间的区别。如果取消引用无效指针（未初始化或未分配有效地址的指针），则后续行为未定义。“未定义”包括行为在不同平台、不同编译器、不同编译器选项甚至同一机器上相同代码上的不同执行上会不同的可能性。

也就是说，在这种情况下，您的代码（在您发布的行之前）有问题，而不是编译器。它在 Linux 和 Windows 上可能都不正确，但“未定义”的行为与预期的完全不同。

# php - 如何让javascript打开php文件？

> ID：14670920
> 
> 赞同：0
> 
> 时间：2013-02-03T09:01:03.690
> 
> 标签：php, javascript, ajax

该`Photo.php`文件应显示一条消息。

但是当我添加`?page=2`到地址时，它不会调用 Photos 函数来打开`Photo.php`文件。

```
function Photos() {
            var opt = <?php echo $_GET['page'];?>
            alert(opt);
            if(window.XMLHttpRequest)
            {
                xmlhttp = new XMLHttpRequest();
            }
            else
            {
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                if(xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("Results").innerHTML = xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET","Photo.php?page="+opt,true);
            xmlhttp.send();
        }
            function showCat(option){
                 ....
           }

<?php 
                   if(isset($_GET['page'])){
            echo '<script type="text/javascript">'
            ,'myPhotos();'
            , '</script>';
        }
                echo 'Results go here'; 
                ?> 
```

**照片.php**

```
if(isset($_GET["page"])){
    echo "photo";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T09:04:44.303

> `xmlhttp.open("GET","Photo.php?page"+opt,true);`

我觉得你`=`在里面少了一个...

```
xmlhttp.open("GET","Photo.php?page="+opt,true);
// Here --------------------------^ 
```

至少，它看起来是这样的。看起来您正在接受一个`GET`参数，然后调用`Photo.php`并传入一个查询字符串，其中`page`是查询参数的名称。

旁注：所有 URL 参数都必须正确编码。所以你也应该在`encodeURIComponent`那里使用：

```
xmlhttp.open("GET","Photo.php?page="+encodeURIComponent(opt),true); 
```

（从技术上讲，键和值都必须是 URI 编码的，但是 URI 编码的版本`"page"`是`"page"`，所以......）

* * *

顺便说一句，所有现代浏览器现在都有相当有用的调试工具。例如，在 Chrome 中，您可以打开开发人员工具并查看“网络”选项卡，以*准确*查看您向服务器发送的内容以及发送回的内容。对这类事情非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:56:23.640

正如阿卡姆注意到的那样；您忘记在字符串变量周围加上引号：

```
var opt = <?php echo $_GET['page'];?> 
```

应该：

```
var opt = '<?php echo $_GET['page'];?>'; 
```

这应该会导致在 Firebug 控制台中发现的 JavaScript 错误。Firebug 是一个非常方便的插件，可以解决 JavaScript 或网络问题。在控制台中，您可以找到带有请求和响应标头以及 JavaScript 错误的 xmlhttpreqest，如果您需要查看 JavaScript 对象的详细信息，您可以 console.log(myObject) 到控制台，单击它可以显示更多详细信息。

我不确定 chrome 是否具有相同的功能，但如果您没有 Firefox 或者只是更喜欢 Chrome，那么按 F12 将打开开发人员工具，与 Opera 和 Internet Explorer 中相同，尽管我个人更喜欢带有 firebug 插件的 Firefox。

# ear - EAR 文件（java）必须包含什么？

> ID：14670924
> 
> 赞同：2
> 
> 时间：2013-02-03T09:01:24.473
> 
> 标签：ear

我正在探索 Java EE 6 部署选择。我了解 WAR 文件是什么，并且从概念上讲，我了解 EAR 文件的目的是将 WAR 模块和/或其他 Jar 资源打包在一起，以便整个部署可以无缝。

我的问题是，EAR 必须包含的最低限度是多少。我的调查使我相信必须至少存在一个 WAR 模块，因为 EAR 只不过是一个包装器和附加配置 xml。

此外，是否有权威的论文显示所有配置文件和可以包含的 xml 元素？（有时当我直接深入并查看配置选项时，我会发现更容易掌握概念。）

非常感谢你的协助

# java - 是否有任何 REST 服务自动化框架？

> ID：14670928
> 
> 赞同：1
> 
> 时间：2013-02-03T09:01:31.190
> 
> 标签：java, rest

我们希望使用简单的 HTTP GET/POST 请求通过基于 REST 的服务公开我们的数据，以便客户端能够通过基于 REST 的 API 发送查询，并以 JSON/XML 格式返回响应。是否有任何自动化框架可以定义输入和输出格式，并且框架将生成基本的发送/接收模块（用 Java 或任何其他语言），并带有用于业务逻辑的空白框？

更新：我刚刚阅读了[Play Framework](http://www.playframework.org/)，

我认为，
Jersey + JPA 将是更快的 REST 服务开发的更好选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:48:22.097

经过一番搜索，我发现[Jersey](http://jersey.java.net/) with Jackson 可以在一定程度上自动化构建 REST 服务

还有其他选择，

Spring DATA，Spring Rookie，但他们考虑将 JPA 用于数据库。

# java - XSLT：如何过滤掉具有特定命名空间的所有元素

> ID：14670936
> 
> 赞同：3
> 
> 时间：2013-02-03T09:04:15.723
> 
> 标签：java, xslt, xpath

========= 更新 =========

非常感谢 Tomalak 提供了正确的 XSL 语法，并感谢 Ian Roberts 指出为了在我的 XSLT 中使用名称空间，我需要在一开始就在我的 DocumentBuilderFactory 中调用“setNamespaceAware(true)”。

========= 结束更新 =========

问：如何编写一个 XSLT 样式表来过滤掉“ [http://foo.com/abc](http://foo.com/abc) ”命名空间中的所有元素和/或所有节点树？

我有一个如下所示的 XML 文件：

源 XML：

```
<zoo xmlns="http://myurl.com/wsdl/myservice">
  <animal>elephant</animal>
  <exhibit>
    <animal>walrus</animal>
    <animal>sea otter</animal>
    <trainer xmlns="http://foo.com/abc">Jack</trainer>
  </exhibit>
  <exhibit xmlns="http://foo.com/abc">
    <animal>lion</animal>
    <animal>tiger</animal>
  </exhibit>
</zoo> 
```

期望的结果 XML：

```
<zoo xmlns="http://myurl.com/wsdl/myservice">
  <animal>elephant</animal>
  <exhibit>
    <animal>walrus</animal>
    <animal>sea otter</animal>
  </exhibit>
</zoo> 
```

XSLT（感谢 Tomalak）：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:a="http://foo.com/abc"
    exclude-result-prefixes="a"
>
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
          <xsl:apply-templates select="@* | node()" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="a:* | @a:*" />
</xsl:stylesheet> 
```

先感谢您！

成功通过命名空间进行 XSLT 过滤的 JAVA 程序：

```
import java.io.*;
import org.w3c.dom.*; // XML DOM
import javax.xml.parsers.*; // DocumentBuilder, etc
import javax.xml.transform.*; // Transformer, etc
import javax.xml.transform.stream.*; // StreamResult, StreamSource, etc
import javax.xml.transform.dom.DOMSource;

public class Test {

    public static void main(String[] args) {
        new Test().testZoo();
    }

public void testZoo () {
    String zooXml = Test.readXmlFile ("zoo.xml");
    if (zooXml == null)
        return;

    try {
        // Create a new document builder factory, and make sure it[s namespace-aware 
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        dbf.setNamespaceAware(true);
        DocumentBuilder docBuilder = dbf.newDocumentBuilder ();

        // Read XFDD input string into DOM
        Document xfddDoc = 
            docBuilder.parse(new StringBufferInputStream (zooXml));

        // Filter out all elements in "http://foo.com/abc" namespace
        StreamSource styleSource = new StreamSource (new File ("zoo.xsl"));
        Transformer transformer =
            TransformerFactory.newInstance().newTransformer (styleSource);

        // Convert final DOM back to String
        StringWriter buffer = new StringWriter ();
        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,  "yes"); // Remember: we want to insert this XML as a subnode
        transformer.setOutputProperty(OutputKeys.INDENT,  "yes");
        transformer.transform(new DOMSource(xfddDoc), new StreamResult (buffer));
        String translatedXml = buffer.toString();
    }
    catch (Exception e) {
        System.out.println ("convertTransactionData error: " + e.getMessage());
        e.printStackTrace ();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T09:38:57.090

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:a="http://foo.com/abc"
    exclude-result-prefixes="a"
>
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
          <xsl:apply-templates select="@* | node()" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="a:* | @a:*" />
</xsl:stylesheet> 
```

空模板匹配节点但不输出​​任何内容，有效地删除了它们匹配的内容。

# r - 在理解 rbinom 输出时感到困惑

> ID：14670939
> 
> 赞同：1
> 
> 时间：2013-02-03T09:04:41.870
> 
> 标签：r

```
 p1 <- c(.25,.025,.025,.1,.2,.4)

  T <- sample(1:6,size=N,replace=TRUE, prob=someprobabilityvector)
  Y <- rbinom(N,1,p1[c(T)]) 
```

大家好，我是 R 和一般编程的新手，需要一些帮助来理解一些基本的东西。有人可以向我解释一下上面向量 Y 中发生了什么。我弄清楚`p1[c(T)]`上面做了什么。但不知道向量 Y 在做什么。提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:16:15.170

代码的第一行创建了一个包含六个概率的向量：

```
p1 <- c(.25,.025,.025,.1,.2,.4) 
```

在第二行中，您`N`从数字 1 到 6 中随机选择值（带替换）。每个值的概率在 中指定`someprobabilityvector`。因此，该函数将返回一个长度向量，`N`包括 1 到 6 之间的值

```
T <- sample(1:6,size=N,replace=TRUE, prob=someprobabilityvector) 
```

在第三行中，生成`N`来自二项式分布的随机数，其中包含一次试验和指定的概率`p1[c(T)]`。`c(T)`等同于`T`: 包含从 1 到 6 的值的向量。向量用于索引向量`p1`。因此，`p1[c(T)]`将返回一个包含来自 vector 的`N`值的向量`p1`。

```
Y <- rbinom(N,1,p1[c(T)]) 
```

由于指定的二项式分布只有一次试验，因此向量`Y`将包含零和一。

# c - 链表行为 - 帮助我理解

> ID：14670948
> 
> 赞同：1
> 
> 时间：2013-02-03T09:06:12.937
> 
> 标签：c, pointers, linked-list, malloc, free

我正在学习链表，我不明白释放字符串时的行为变化。这是代码：

```
#include <stdio.h>
#include <stdlib.h>

struct node {
    char*          data;
    struct node*   next;
    };

void Push(struct node** headRef, char *data)
{
    struct node* newNode = malloc(sizeof(struct node));
    newNode->data = data;
    newNode->next = *headRef;  // The '*' to dereferences back to the real head
    *headRef = newNode;        // ditto
}

int main(int argc, const char * argv[])
{

    char* auxStr;
    struct node* list;
    struct node* auxPtr;
    int i=5;

    while (i<9)
    {
        auxStr=malloc(sizeof("String:%d"));
        sprintf(auxStr, "String:%d",i);
        Push(&list, auxStr);
        i++;
    }

    auxPtr=list;

    i=0;
    while (auxPtr)
    {
        printf("Node:%d - Data:%s\n",i++,auxPtr->data);
        auxPtr=auxPtr->next;
    }

    return 0;
} 
```

这导致：

> ```
> Node:0 - Data:String:8
> Node:1 - Data:String:7
> Node:2 - Data:String:6
> Node:3 - Data:String:5 
> ```

现在，当我第一次添加 free(auxStr) 时：

```
while (i<9)
{
    auxStr=malloc(sizeof("String:%d"));
    sprintf(auxStr, "String:%d",i);
    Push(&list, auxStr);
    free(auxStr);
    i++;
} 
```

我现在得到：

```
Node:0 - Data:String:8
Node:1 - Data:String:8
Node:2 - Data:String:8
Node:3 - Data:String:8 
```

有人可以解释为什么吗？我知道它可能不是最有效的代码释放多次，但我看到了这种行为，这让我感到困惑。感谢您的帮助，以帮助我更好地理解这个概念。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:10:17.240

你得到[**未定义的行为**](http://en.wikipedia.org/wiki/Undefined_behavior)。

您正在释放内存 ( `auxPtr`) 但您仍然碰巧有一个指向它的指针 - 就像`data`在相关节点中一样。这称为[**悬空引用**](http://en.wikipedia.org/wiki/Dangling_pointer)。

这些数据会发生什么是未定义的，它恰好为每个新分配重用相同的地址（但同样，任何事情都可能发生）。

因此，稍后打印数据时 - 输出未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:10:59.463

您不是通过 strncpy 复制数据字符串 - 相反，您只是将指针分配给稍后释放的相同字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:11:13.650

如[here](https://stackoverflow.com/questions/2558754/dangling-pointer-reason-for-value-change-after-free)所示，在释放它后访问一个指针是未定义的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T09:11:52.633

您的每个数据都`struct node`指向同一地址。释放时`auxPtr`，您正在访问一个不再分配的内存位置。在 C 中，它会导致*未定义的行为*。动态分配数据可能是一个更好的主意，如下所示。

```
#include <assert.h>
#include <stdlib.h>
#include <string.h>

void Push(struct node **head, const char *data, size_t size)
{
  struct node *elt;

  elt = malloc(sizeof *elt);
  assert(elt != NULL);

  elt->data = malloc(size);
  assert(elt->data != NULL);
  memcpy(elt->data, data, size);

  elt->next = *head;
  *head = elt;
} 
```

此外，您的列表中没有空指针。你应该先分配`list`。

# java - Google HTTP Java 客户端的 POST 请求错误

> ID：14670953
> 
> 赞同：2
> 
> 时间：2013-02-03T09:06:45.430
> 
> 标签：java, android, httpurlconnection, google-http-client

我在我的 Android 项目中使用 Google Http Java Client 库。我有以下基本代码，用于在 Android 应用程序上向服务器发送 POST 请求：

```
 final GenericUrl url = new GenericUrl(postURL);
    final HttpContent content = new JsonHttpContent(JSON_FACTORY, jsondata);
    // requestFactory initiated statically as class object
    HttpRequest request = requestFactory.buildPostRequest(url, content); 
    HttpResponse response = request.execute(); 
```

'RequestFactory' 在包含 POST 方法的类中被定义为静态的。

```
 static final HttpRequestFactory requestFactory = HTTP_TRANSPORT
        .createRequestFactory(new HttpRequestInitializer() {
            @Override
            public void initialize(HttpRequest request) {
                request.setParser(new JsonCParser(JSON_FACTORY));
                HttpHeaders headers = new HttpHeaders();
                headers.setContentType("application/json");
                request.setHeaders(headers);
            }
        }); 
```

相同的 requestfactory 用于没有引起任何问题的 GET 请求。只有 POST 方法会导致 400。我检查了服务器，没有任何东西被发送到它。日志中的消息如下：错误请求

## 错误请求 - 无效标头

* * *

HTTP 错误 400。请求的标头名称无效。

com.google.api.client.http.HttpResponseException：400 错误请求错误请求

## 错误请求 - 无效标头

* * *

HTTP 错误 400。请求的标头名称无效。

在 com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1095)

我尝试了故障排除。库的 NetHttpRequest 类中的连接对象有一个带有 EOFException 的 HttpEngineFailure 对象，这让我认为连接没有被关闭，这是一个最佳实践问题而不是错误。

另一方面，我在 Android API 2.2 模拟器上进行了尝试，并且 POST 请求在那里正常工作。表明这是一个 HttpUrlConnection 问题。

我在产品组页面上问了这个问题，但没有得到回复，所以我想也许这里的一些 Java/Android 专家可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T09:36:34.547

而不是创建`JsonHttpContent`你可以做这样的事情：

```
HttpRequest request = getHttpRequestFactory()//
        .buildPostRequest(new GenericUrl(apiUrl), ByteArrayContent.fromString("application/json", mJsonObject.toString()));
    request.setParser(new JacksonFactory().createJsonObjectParser()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:22:15.767

不同版本的 Android 使用不同版本的 HttpConnection，因此行为不同。这完全取决于您使用的是什么 HttpTransport。

从[文档](http://code.google.com/p/google-http-java-client/wiki/Android#HTTP_Transport)：

如果您正在构建针对 Gingerbread 或更高版本的应用程序，则应使用 NetHttpTransport。这基于 Android SDK 中内置的 HttpURLConnection，在所有 Java SDK 中都可以找到。但是，在之前的 Android SDK 中，HttpURLConnection 的实现存在缺陷，因此首选 Apache HTTP 客户端。所以对于那些 SDK，请使用 ApacheHttpTransport。如果您正在构建一个需要使用所有 Android SDK 的 Android 应用程序，只需调用 AndroidHttp.newCompatibleTransport() ，它将根据 Android SDK 级别决定使用这两个。

# android - 向位置管理器添加多个接近警报

> ID：14670956
> 
> 赞同：2
> 
> 时间：2013-02-03T09:06:58.093
> 
> 标签：android, android-intent, locationmanager

我无法向我的位置监听器添加一个以上的接近警报。我已经搜索了互联网，但没有发现任何帮助。如果我做错了什么，请告诉我。这是我的代码片段

```
 locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    locationManager.addProximityAlert(30.0, 70.0, 1000, -1, PendingIntent.getActivity(Map.this, 0, new Intent(android.content.Intent.ACTION_VIEW,Uri.parse("http://www.google.com")), 0));

    locationManager.addProximityAlert(40.0, 50.0, 1000, -1, PendingIntent.getActivity(Map.this, 10, new Intent(android.content.Intent.ACTION_VIEW,Uri.parse("http://www.google.com")),0)); 
```

当我给 30.0 和 70.0 时，从我的模拟器控制中什么都没有发生，但是当我给 40.0 和 50.0 时，我的待定意图触发器。我想将这两个位置都添加到我的位置管理器的邻近警报中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:54:13.907

您应该使用`BroadcastReceiver`和`BroadcastMessages`管理多个接近警报。添加第二个警报`40.0, 50.0`时，会覆盖第一个警报。一个很好的解决方案就[在这里](https://stackoverflow.com/a/4952165/2015318)。

# java - 我可以使用 pack() 仅调整框架的高度吗？

> ID：14670957
> 
> 赞同：0
> 
> 时间：2013-02-03T09:07:17.443
> 
> 标签：java, swing, layout-manager, grid-layout, flowlayout

我正在编写一个程序，该程序会显示一个 JDialog 框，其中列出了配置文件中的多个选项。每次打开时选项的数量可能会有所不同，因此我需要能够动态调整窗口的高度，而不是宽度。窗口看起来最好使用 FlowLayout 并定义窗口的宽度，以便数据所在的 JPanel 正确包装。但我无法动态调整高度。我尝试使用 pack 方法，但它会将所有面板排成一行，就像 FlowLayout 的本意一样。我尝试了 GridLayout，但它将所有面板的大小重新调整为相同的大小，并且外观令人无法接受。我也尝试过 BoxLayout，但无法让它工作。

是否有更好的布局管理器可以使用或使宽度静态化？

这是我的代码。每个面板和框都在构造函数上方定义，我只是没有复制该代码：

```
public ReSizeMe()
    {
        curConfig = new Config();
        config = curConfig.getConfig();

        setBox = new JDialog();

        setBox.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);  //  Set as 480, 600
        setBox.setLayout(new FlowLayout());

        this.buildSetFrame();

        //setBox.pack();
        setBox.setVisible(true);
    }

    public void buildSetFrame()
    {
        intPanel   = new JPanel();
        butPanel   = new JPanel();
        optPanel   = new JPanel();
        editPanel  = new JPanel[maxOptions];
        optWrapper = new JPanel[maxOptions];

        intPanel.setLayout(new FlowLayout());
        optPanel.setLayout(new GridLayout(10, 1));   //  trying different things here too.

        optText = new JTextField[maxOptions];
        editButton = new JButton[maxOptions];
        delButton = new JButton[maxOptions];

        intPanel.setBorder(BorderFactory.createTitledBorder("Modify Interface"));

        apply  = new JButton("Apply");
        newOpt = new JButton("New Option");
        help   = new JButton("Help");
        close  = new JButton("Close");

        intPanel.add(ethIntLabel);
        intPanel.add(ethIntName);

        butPanel.add(apply);
        butPanel.add(newOpt);
        butPanel.add(close);

        ethIntName.setText(config.getProperty("EthIntName"));

        setBox.add(welcomeMsg);
        setBox.add(intPanel);
        setBox.add(optPanel);

        buildOptions();

        setBox.add(butPanel);
    }

    void buildOptions()
    {
        for (int i = 0; i < maxOptions; i++)
        {
            editable = Boolean.parseBoolean(config.getProperty("option." + i + ".edit"));

            if (config.getProperty("option." + i + ".name") == null)
            {
                break;
            }
            else if (editable != false && 
                     config.getProperty("option." + i + ".name") != null && 
                     !config.getProperty("option." + i + ".name").isEmpty())
            {

                editPanel[i]  = new JPanel();
                optWrapper[i] = new JPanel();
                optText[i]    = new JTextField(20);
                editButton[i] = new JButton("Edit");
                delButton[i]  = new JButton("Delete");

                editButton[i].setActionCommand(Integer.toString(i));
                delButton[i].setActionCommand(Integer.toString(i));

                optText[i].setText(config.getProperty("option." + i + ".name"));
                optText[i].setEditable(false);
                editPanel[i].add(editButton[i]);
                editPanel[i].add(delButton[i]);
                optWrapper[i].add(optText[i]);
                optWrapper[i].add(editPanel[i]);
                optPanel.add(optWrapper[i]);
            }
        } 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T09:13:29.180

是的，`Box`应该工作得很好：

```
Box box = Box.createVerticalBox();
box.add(...)
box.add(Box.createVerticalStrut(5)); // spacing
<etc.>

add(box); 
```

# ios - SKProductsRequest 添加一个包含应用内购买价格的标题

> ID：14670960
> 
> 赞同：0
> 
> 时间：2013-02-03T09:08:31.347
> 
> 标签：ios, in-app-purchase, storekit

我有和 appdelegate 在 init 方法期间请求 AppStore 产品详细信息，并且我想将应用内购买产品的价格显示到弹出框内的按钮中。

我已经设置了正确返回产品数组的请求，以及包含价格的字符串。我的问题是弹出视图控制器在 AppStore 回复之前创建视图，并且标题标签初始化为 (null)。如果我可以延迟按钮标题集，我会确定请求确实得到了回复，但这会使应用程序崩溃。

我的要求是

```
- (void)requestProUpgradeProductData {
NSSet *productIdentifiers = [NSSet setWithObject:@"com.thePrintLabs.product"];
productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
productsRequest.delegate = self;
[productsRequest start]; 
```

}

然后我阅读了回复：

```
NSArray *products = response.products;
proUpgradeProduct = [products count] == 1 ? [[products firstObject] retain] : nil;
if (proUpgradeProduct)
{
NSLog(@"Product title: %@" , proUpgradeProduct.localizedTitle);
NSLog(@"Product description: %@" , proUpgradeProduct.localizedDescription);
NSLog(@"Product price: %@" , proUpgradeProduct.price);
NSLog(@"Product id: %@" , proUpgradeProduct.productIdentifier);

NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setMaximumFractionDigits:2];
priceWeek = [NSString stringWithString:[formatter stringFromNumber:proUpgradeProduct.price]];
} 
```

在 popOverViewController 我这样做是为了设置按钮标题：

```
myAppDelegate *delegate = (myAppDelegate*)[[UIApplication sharedApplication] delegate];
button = [UIButton buttonWithType:UIButtonTypeCustom];
button2 = [UIButton buttonWithType:UIButtonTypeCustom];
[button addTarget:self
           action:@selector(button1Week:)
 forControlEvents:UIControlEventTouchDown];
NSString *priceWeekly = [NSString stringWithFormat:@"Weekly %@",delegate.priceWeekly];
[button setTitle:priceWeekly forState:UIControlStateNormal]; 
```

我的按钮总是用（null）初始化。请求成功后可以更新按钮吗？

# c# - 如何比较两个文本框？

> ID：14670964
> 
> 赞同：0
> 
> 时间：2013-02-03T09:09:08.413
> 
> 标签：c#, .net, winforms, exception-handling

我正在尝试比较两个文本框以查看它们是否为空，但出现异常错误：

> 输入字符串的格式不正确

代码：

```
private void btncalc_Click(object sender, EventArgs e)
{
    try
    {
        int ina= int.Parse(txttea.Text);
        int inb= int.Parse(txtcoffee.Text);
        int inc = 0, ind = 0;
        if (this.txttea.Text == "" && this.txtcoffee.Text == "")  // this not working
        {
            MessageBox.Show("select a item");
            txttea.Focus();
        }
        if (cbxwithoutsugar.Checked)
        {
            inc = (ina * 20);
        }
        else
        {
            inc = (ina * 8);
        }
        if (cbxcoldcoffee.Checked)
        {
            ind = (inb * 10);
        }
        else
        {
            ind = (inb * 5);
        }
        txtamount.Text = (Convert.ToInt32(inc) + Convert.ToInt32(ind)).ToString();
    }
    catch (Exception a)
    {
        MessageBox.Show(a.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:21:02.273

您应该*首先*检查文本框是否为空，*然后才*尝试获取值。
另外，像这样使用**[String.IsNullOrEmpty](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)**：

```
 if (String.IsNullOrEmpty(txttea.Text) || String.IsNullOrEmpty(txtcoffee.Text)) 
    {
        MessageBox.Show("select a item");
        txttea.Focus();
    }
    int ina= int.Parse(txttea.Text); // See comment below about TryParse
    int inb= int.Parse(txtcoffee.Text);
    int inc = 0, ind = 0; 
```

此外，使用**[TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)**而不是 Parse （并且修剪始终是避免 WhiteSpace 的好主意）：

```
int ina;
if (!Int32.TryParse(txttea.Text.Trim(), out ina))
{
   MessageBox.Show("Value is not a number");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T09:22:57.293

尝试使用 TryParse 方法，因为如果有空格，您的代码将失败，使用 TryParse，您无需尝试捕获，只需将两个整数比较为零，例如：

```
int ina =0 , inb =0;

int.TryParse(txttea.Text, out ina);
int.TryParse(txtcoffee.Text, out inb);

if (ina == 0 && this.inb == 0)  // this not working
{

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T09:25:43.247

当您需要一个数字时，我建议您使用 NumericUpDown 而不是 TextBox。这样您就可以使用 Value 来获取咖啡和茶的数量。

```
private void btncalc_Click(object sender, EventArgs e)
{
    try
    {
        int ina= numtea.Value;
        int inb= numcoffee.Value;
        int inc = 0, ind = 0;
        if (ina == 0 && inb == 0)  // this not working
        {
            MessageBox.Show("select a item");
            numtea.Focus();
        }
        if (cbxwithoutsugar.Checked)
        {
            inc = (ina * 20);
        }
        else
        {
            inc = (ina * 8);
        }
        if (cbxcoldcoffee.Checked)
        {
            ind = (inb * 10);
        }
        else
        {
            ind = (inb * 5);
        }
        txtamount.Text = (inc + ind).ToString();
    }    
} 
```

这是一个很好的用户友好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T09:20:59.740

我有一种感觉，您指示为“不工作”的行不是问题，但整数解析是问题。异常不是可以从逻辑测试中抛出的异常，而是可以从格式错误的整数解析中抛出的异常。尝试注释掉解析行，看看错误是否仍然发生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T09:22:51.473

首先，您正在解析文本框的文本。然后你再次检查他们的文本值是否为空。这不是多余的吗？

如果文本区域中的文本不是数字，则应该存在解析异常。它将显示在消息框中。我认为您可以尝试放置一些记录语句来打印解析整数的值。

# ios - 分段控制：titleForSegmentAtIndex 每次都返回 null

> ID：14670965
> 
> 赞同：0
> 
> 时间：2013-02-03T09:09:18.583
> 
> 标签：ios, objective-c, ios6, uisegmentedcontrol

我有一个分段控件（通过故事板添加）并设置了两个段（在故事板中设置）。当它被点击时，它会触发我的 'segmentedIndexChanged:' 方法，但在该方法中，我无法获取 .selectedSegmentedIndex 或 titleForSegmentedAtIndex 的值（它总是返回 null）

```
-(IBAction) segmentedIndexChanged {

    NSLog(@"index, text value: %@ , %@", self.mySegControl.selectedSegmentIndex, [mySegControl titleForSegmentAtIndex:mySegControl.selectedSegmentIndex]

 );
    switch (self.mySegControl.selectedSegmentIndex) {
        case 0:

            NSLog(@"segmented 1 selected");
            break;
        case 1:
            NSLog(@"segmented 2  selected");

            break;

        default:
            break;
    }

} 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:12:40.267

您确定插座已连接到控制器吗？您可以通过打印检查`NSLog(@"%@", self.mySegControl)`

此外，通常，IBActions 应该具有 的形式`- (IBAction)action:(id)sender`，这样您就可以访问发送者（在本例中为分段控件），而无需对其进行出口。

# wampserver - 安装 wamp 服务器时出现应用程序错误

> ID：14670966
> 
> 赞同：2
> 
> 时间：2013-02-03T09:09:24.307
> 
> 标签：wampserver

我试图安装用于 64 位操作系统的 wamp server 2.2 .. 有一个应用程序错误说“应用程序无法正确启动 (0xc000007b)。单击确定关闭应用程序。” 但是当我去 Mozilla Firefox 去本地主机时，它不会打开。请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T20:00:23.500

应用程序错误应用程序无法正确启动（0xc000007b）错误代码表示“STATUS_INVALID_IMAGE_FORMAT”

我知道这有两个可能的原因：

1-在大多数情况下，当 64 位窗口在搜索路径中达到 32 位 dll 时，就会发生此错误。特别是在这种情况下，关于 wamp 服务器 64 位，它可能是由路径中 msvcr100.dll 的 32 位版本引起的。只需下载它的 64 位版本并将文件复制到“C:\wamp\bin\apache\Apache2.4.4\bin”在这里你可以下载这个 dll 的 64 位[http://www.dll-files.com/ dllindex/dll-files.shtml?msvcr100](http://www.dll-files.com/dllindex/dll-files.shtml?msvcr100) 在此之后单击系统托盘 Apache/Service/install 服务中的 wamp 图标来解决问题。

2-exe文件由于磁盘错误而损坏。在这种情况下，请尝试使用 fdisk。如果 fdisk 在磁盘上发现错误并且问题未修复，则重新安装程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:25:06.173

如果应用程序没有正确启动，您就不能期望 localhost 正常工作。确保您在 64 位操作系统上安装了 64 位版本，或者您可以尝试 xampp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:40:51.167

由于windows版本不匹配。卸载 Wamp Server 2.2 并下载 Wamp Server 64 位版本。

[下载](http://www.wampserver.com/en/#wampserver-64-bits-apache-2-4)

# ruby-on-rails - 如何获取所有喜欢某个对象的用户？

> ID：14670968
> 
> 赞同：0
> 
> 时间：2013-02-03T09:09:36.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有`User`和`Community`模型。

`Community`此命令将被用户喜欢模型

```
 if current_user.voted_up_on? @community
        current_user.dislikes @community
    else
        current_user.likes @community
    end 
```

我现在正在尝试获取所有喜欢@community 的用户。我正在尝试这样做。但它不会返回正确的用户。
我怎样才能解决这个问题？

```
@users =  User.where(:id => @community.likes.map(&:voter_id)).order("last_active_at DESC").limit(10) 
```

我为此 [https://github.com/ryanto/acts_as_votable使用名为“acts_as_votable”的 gem](https://github.com/ryanto/acts_as_votable)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:19:17.310

试试这个：

`@users = @community.likes.map(&:voter)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:44:27.547

那将返回 AR::Relation

```
# Note: I'm not sure that polymorphic fields are: "votable_type" and "votable_id"

class Community
  ...
  def last_liked(limit = 10)
    User.includes(:votes).where(["votes.votable_type = ? AND votes.votable_id = ?", self.class.name, self.id]).order("users.last_active_at DESC").limit(limit)
  end
end 
```

# wordpress - 用于自定义帖子类型的 Wordpress 永久链接挂钩

> ID：14670973
> 
> 赞同：0
> 
> 时间：2013-02-03T09:10:11.663
> 
> 标签：wordpress, hook

我有页面的永久链接挂钩，并且想为自定义帖子类型编写相同的功能，我尝试更改`page_link`为`custom_post_type`，但它不起作用

```
add_filter('page_link', 'rating_permalinkas', 10, 3);
add_filter('page_type_link', 'rating_permalinkas', 10, 3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:14:30.550

将其更改为

```
add_filter('post_link', 'rating_permalinkas', 10, 3);
add_filter('post_type_link', 'rating_permalinkas', 10, 3); 
```

# go - Go中的递归锁定

> ID：14670979
> 
> 赞同：34
> 
> 时间：2013-02-03T09:11:12.347
> 
> 标签：go

Go 的`sync`包有一个`Mutex`. 不幸的是它不是递归的。在 Go 中实现递归锁的最佳方法是什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-03T10:21:28.403

很抱歉没有直接回答你的问题：

恕我直言，如何在 Go 中实现递归锁的最佳方法是不实现它们，而是重新设计你的代码以首先不需要它们。我认为，对他们的渴望很可能表明正在使用错误的方法来解决某些（此处未知）问题。

作为上述主张的间接“证明”：对于涉及互斥锁的/某些常见情况，递归锁是否是一种常见/正确的方法，它迟早会包含在标准库中。

最后，最后但并非最不重要的是：Go 开发团队的 Russ Cox 在这里写的[https://groups.google.com/d/msg/golang-nuts/XqW1qcuZgKg/Ui3nQkeLV80J](https://groups.google.com/d/msg/golang-nuts/XqW1qcuZgKg/Ui3nQkeLV80J)：

> 递归（又名可重入）互斥锁是个坏主意。使用互斥体的根本原因是互斥体保护不变量，可能是内部不变量，例如“p.Prev.Next == p for all elements of the ring”，或者可能是外部不变量，例如“我的局部变量 x 等于 p.Prev 。”
> 
> 锁定互斥锁会断言“我需要保留这些不变量”，也许“我会暂时破坏这些不变量”。释放互斥体断言“我不再依赖那些不变量”和“如果我破坏了它们，我已经恢复了它们。”
> 
> 了解互斥锁保护不变量对于确定需要互斥锁的位置和不需要互斥锁的位置至关重要。例如，使用原子递增和递减指令更新的共享计数器是否需要互斥锁？这取决于不变量。如果唯一不变量是计数器在 i 递增和 d 递减后具有值 i - d，则指令的原子性确保了不变量；不需要互斥锁。但是如果计数器必须与其他一些数据结构同步（也许它计算列表中元素的数量），那么单个操作的原子性是不够的。其他东西，通常是互斥体，必须保护更高级别的不变量。这就是 Go 中的 map 操作不能保证是原子的原因：在典型情况下它会增加开销而没有好处。
> 
> 让我们看一下递归互斥锁。假设我们有这样的代码：

```
 func F() {
             mu.Lock()
             ... do some stuff ...
             G()
             ... do some more stuff ...
             mu.Unlock()
     }

     func G() {
             mu.Lock()
             ... do some stuff ...
             mu.Unlock()
     } 
```

> 通常，当对 mu.Lock 的调用返回时，调用代码现在可以假定受保护的不变量保持不变，直到它调用 mu.Unlock。
> 
> 当从 F 或当前线程已经拥有 mu 的任何其他上下文中调用时，递归互斥锁实现将使 G 的 mu.Lock 和 mu.Unlock 调用成为无操作。如果 mu 使用了这样的实现，那么当 mu.Lock 在 G 内部返回时，不变量可能成立，也可能不成立。这取决于 F 在调用 G 之前做了什么。也许 F 甚至没有意识到 G 需要这些不变量并且已经破坏了它们（完全有可能，尤其是在复杂代码中）。
> 
> 递归互斥锁不保护不变量。互斥锁只有一项工作，而递归互斥锁不做。
> 
> 他们有更简单的问题，比如你写的

```
 func F() {
             mu.Lock()
             ... do some stuff
     } 
```

> 您永远不会在单线程测试中找到错误。但这只是更大问题的一个特例，即它们根本不保证互斥体旨在保护的不变量。
> 
> 如果您需要实现可以在有或没有持有互斥锁的情况下调用的功能，最明确的做法是编写两个版本。例如，代替上面的 G，你可以写：

```
 // To be called with mu already held.
     // Caller must be careful to ensure that ...
     func g() {
             ... do some stuff ...
     }

     func G() {
             mu.Lock()
             g()
             mu.Unlock()
     } 
```

> 或者如果它们都未导出，则 g 和 gLocked。
> 
> 我确信我们最终会需要 TryLock；请随时为此向我们发送 CL。超时锁定似乎不太重要，但如果有一个干净的实现（我不知道有一个），那么它可能会没问题。请不要发送实现递归互斥锁的 CL。
> 
> 递归互斥锁只是一个错误，只不过是 bug 的舒适之家。
> 
> 拉斯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T14:28:38.077

[您可以很容易地从sync.Mutex](http://golang.org/pkg/sync/#Mutex)和[sync.Cond](http://golang.org/pkg/sync/#Cond)中进行递归锁定。有关一些想法，请参见[此处的附录 A。](http://www.hdfgroup.org/HDF5/doc/TechNotes/ThreadSafeLibrary.html)

**除了**Go 运行时没有公开任何 goroutine Id 的概念之外。这是为了阻止人们用 goroutine 本地存储做愚蠢的事情，并且可能表明设计者认为如果你需要一个 goroutine Id，那么你做错了。

如果你真的想的话，你当然可以[用一点 C 从运行时中挖掘出 goroutine Id 。](https://groups.google.com/d/msg/golang-nuts/Nt0hVV_nqHE/9Qj8zRlZWZ4J)您可能想阅读该主题以了解为什么 Go 的设计者认为这是一个坏主意。

* * *

## 回答 #3

> 赞同：-10
> 
> 时间：2013-02-03T17:08:41.077

正如已经确定的那样，从并发的角度来看，这是一个悲惨、可怕、可怕和可怕的想法。

无论如何，由于您的问题实际上是关于 Go 的类型系统，因此您将如何使用递归方法定义类型。

```
type Foo struct{}

func (f Foo) Bar() { fmt.Println("bar") }

type FooChain struct {
    Foo
    child *FooChain
}

func (f FooChain) Bar() {
    if f.child != nil {
        f.child.Bar()
    }
    f.Foo.Bar()
}

func main() {
    fmt.Println("no children")
    f := new(FooChain)
    f.Bar()

    for i := 0; i < 10; i++ {
        f = &FooChain{Foo{}, f}
    }
    fmt.Println("with children")
    f.Bar()
} 
```

[http://play.golang.org/p/mPBHKpgxnd](http://play.golang.org/p/mPBHKpgxnd)

# iphone - 从 App Delegate 中提取的全局变量

> ID：14670981
> 
> 赞同：0
> 
> 时间：2013-02-03T09:11:25.977
> 
> 标签：iphone, ios, objective-c, xcode

我试图在我的视图控制器中的多个方法中使用变量整数。secondsLeft 变量工作正常，但 otherNumber 变量不起作用。我得到错误：初始化元素不是编译时常量。关于我应该如何做到这一点的任何想法？谢谢你！

```
@interface ViewController ()

@end

@implementation ViewController
@synthesize countDown,Timerlbl;

int secondsLeft = 500;

int otherNumber =[(AppDelegate *)[UIApplication sharedApplication].delegate otherNumber]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:41:22.557

问题是您已声明`otherNumber`为全局变量，并且编译器希望初始分配是编译时常量。`[delegate otherNumber]`导致选择器调用，这不是编译时常量。

解决方案是将分配移动到代码中。例如：

```
- (id)init
{
    self = [super init];
    if(self) {
        otherNumber = [(AppDelegate *)[UIApplication sharedApplication].delegate otherNumber];
    }

    return self;
} 
```

另外需要注意的是，全局变量在 Objective-C 中通常是不可取的。`@property`值通常更推荐。不仅如此，你的`ViewController`类现在还依赖于你的`AppDelegate`. 由于您`AppDelegate`最有可能负责实例化您的`ViewController`，因此请考虑将其注入`otherNumber`. 例如：

```
@interface ViewController ()
@property (nonatomic, assign) int otherNumber;
@end

- (id)initWithSomeNumber:(int)otherNumber
{
    self = [super init];
    if(self) {
        self.otherNumber = otherNumber;
    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:19:23.313

我假设这`AppDelegate`是您的应用程序委托类的名称？

您是否尝试过为您的 AppDelegate 添加导入，像这样...

```
#import "AppDelegate.h"

@interface ViewController () 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:48:58.947

你不能像这样声明一个变量，因为编译器不能创建一个实例`AppDelegate`并询问它的值`otherNumber`应该是什么。

根据它的使用方式，最好不要定义`otherNumber`变量，而是在`AppDelegate`每次使用时检索它。这可能意味着更多的输入，但这确实意味着您将始终获得最新的正确值`otherNumber`

此外，通常在定义整数变量时使用`NSInteger`而不是使用它是一个好主意。`int`

# c++ - Valgrind 说无效写入，但我只是分配给一个字符串

> ID：14670983
> 
> 赞同：3
> 
> 时间：2013-02-03T09:11:45.553
> 
> 标签：c++, valgrind

我已经在这呆了半天了，不明白 Valgrind 为何不高兴。

Valgrind 抱怨道：

```
==25658== Invalid write of size 4
==25658==    at 0x40242F: MyObject::copy(MyObject const&) (MyObject.cpp:96)
==25658==    by 0x402264: MyObject::operator=(MyObject const&) (MyObject.cpp:40) 
```

MyObject.cpp:96 在我的复制功能中

```
 94 void MyObject::copy(const MyObject & other)
 95 {
 96         myVariable = other.myVariable; 
```

MyObject.cpp:40 在赋值运算符中

```
 36 MyObject & MyObject::operator=(const MyObject & other)
 37 {
 38         if (this != &other)
 39         {
 40                 copy(other);
 41         }
 42         return *this; 
 43 } 
```

MyVariable 是 String 类型

```
 17 class MyObject
 18 {
 19         public:
 20 
 21         /** My Variable */
 22         string myVariable; 
```

我看不出 Valgrind 会发现这段代码有问题的任何原因。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:50:10.170

原来这是我写的超出了数组的范围。

洋柴，谢谢你的评论。这就是问题所在。该对象从未被初始化，因为它被分配给了一个无效的数组索引。

# ios - 在 UIImageView 上添加圆形遮罩层

> ID：14670985
> 
> 赞同：30
> 
> 时间：2013-02-03T09:12:39.283
> 
> 标签：ios, objective-c, core-graphics

我正在构建一个照片过滤器应用程序（如 Instagram、Camera+ 等等），可能主屏幕是一个`UIImageView`向用户展示图像的屏幕，以及一个带有一些过滤器和其他选项的底栏。
其中一个选项是**blur**，用户可以用手指捏住或移动代表非模糊部分（半径和位置）的圆圈 - 该圆圈之外的所有像素都将被模糊。

当用户触摸屏幕时，我想在我的图像上方添加一个代表模糊部分的半透明层，并带有一个代表非模糊部分的完全透明的圆圈。

所以我的问题是，如何添加这一层？我想我需要在我的图像视图上方使用一些视图，并使用一些蒙版来获得我的圆形？我真的很感激这里的一个很好的提示。

**还有一件事**
我需要的圆不会被剪直，而是有一种渐变淡入淡出。像Instagram这样的东西：
![在此处输入图像描述](../Images/a481dde9bbf6096449fd34fbfc7ac431.png)

**非常重要**的是要以良好的性能获得这种效果，我会成功获得这种效果，`drawRect:`但在旧设备（iphone 4，iPod）上性能非常糟糕

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-03-15T09:49:05.430

# 锋利的面具

每当您想绘制由一个形状（或一系列形状）组成的路径作为另一个形状中的孔时，关键几乎总是使用“奇偶缠绕规则”。

从[可可绘图指南的](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CocoaDrawingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40003290-CH201-SW1)[缠绕规则](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CocoaDrawingGuide/Paths/Paths.html#//apple_ref/doc/uid/TP40003290-CH206-BAJIJJGD)部分：

> > 缠绕规则只是一种算法，它跟踪有关构成路径整体填充区域的每个连续区域的信息。一条射线从给定区域内的点绘制到路径边界外的任何点。然后使用确定是否应填充该区域的规则来解释交叉路径线（包括隐式线）的总数和每条路径线的方向。

我很欣赏如果没有规则作为上下文和图表以使其更容易理解，描述并没有真正的帮助，所以我敦促您阅读我上面提供的链接。为了创建我们的圆形遮罩层，下图描述了奇偶缠绕规则允许我们完成的工作：

### 非零绕组规则

![非零绕组规则](../Images/a343c6d192fdff0bde6a5e6f6bf33713.png)

### 偶数缠绕规则

![偶数缠绕规则](../Images/3cb003d7b4c48690c5845d577e494065.png)

现在只需使用[CAShapeLayer](https://developer.apple.com/documentation/quartzcore/cashapelayer)创建半透明蒙版即可，该蒙版可以通过用户交互重新定位、扩展和收缩。

## 代码

```
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()
@property (strong, nonatomic) IBOutlet UIImageView *imageView;
@property (strong) CAShapeLayer *blurFilterMask;
@property (assign) CGPoint blurFilterOrigin;
@property (assign) CGFloat blurFilterDiameter;
@end

@implementation ViewController

// begin the blur masking operation.
- (void)beginBlurMasking
{
    self.blurFilterOrigin = self.imageView.center;
    self.blurFilterDiameter = MIN(CGRectGetWidth(self.imageView.bounds), CGRectGetHeight(self.imageView.bounds));

    CAShapeLayer *blurFilterMask = [CAShapeLayer layer];
    // Disable implicit animations for the blur filter mask's path property.
    blurFilterMask.actions = [[NSDictionary alloc] initWithObjectsAndKeys:[NSNull null], @"path", nil];
    blurFilterMask.fillColor = [UIColor blackColor].CGColor;
    blurFilterMask.fillRule = kCAFillRuleEvenOdd;
    blurFilterMask.frame = self.imageView.bounds;
    blurFilterMask.opacity = 0.5f;
    self.blurFilterMask = blurFilterMask;
    [self refreshBlurMask];
    [self.imageView.layer addSublayer:blurFilterMask];

    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    [self.imageView addGestureRecognizer:tapGesture];

    UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(handlePinch:)];
    [self.imageView addGestureRecognizer:pinchGesture];
}

// Move the origin of the blur mask to the location of the tap.
- (void)handleTap:(UITapGestureRecognizer *)sender
{
    self.blurFilterOrigin = [sender locationInView:self.imageView];
    [self refreshBlurMask];
}

// Expand and contract the clear region of the blur mask.
- (void)handlePinch:(UIPinchGestureRecognizer *)sender
{
    // Use some combination of sender.scale and sender.velocity to determine the rate at which you want the circle to expand/contract.
    self.blurFilterDiameter += sender.velocity;
    [self refreshBlurMask];
}

// Update the blur mask within the UI.
- (void)refreshBlurMask
{
    CGFloat blurFilterRadius = self.blurFilterDiameter * 0.5f;

    CGMutablePathRef blurRegionPath = CGPathCreateMutable();
    CGPathAddRect(blurRegionPath, NULL, self.imageView.bounds);
    CGPathAddEllipseInRect(blurRegionPath, NULL, CGRectMake(self.blurFilterOrigin.x - blurFilterRadius, self.blurFilterOrigin.y - blurFilterRadius, self.blurFilterDiameter, self.blurFilterDiameter));

    self.blurFilterMask.path = blurRegionPath;

    CGPathRelease(blurRegionPath);
}

... 
```

![代码约定图](../Images/24bbd893dc003cbde82fb622c72f506b.png)

（此图可能有助于理解代码中的命名约定）

* * *

# 渐变蒙版

Apple 的[Quartz 2D Programming Guide](https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007533-SW1)的[Gradients 部分](https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_shadings/dq_shadings.html#//apple_ref/doc/uid/TP30001066-CH207-TPXREF101)详细介绍了如何绘制径向渐变，我们可以使用它来创建带有羽化边缘的蒙版。这涉及通过子类化或实现其绘图委托来直接绘制[CALayer的内容。](https://developer.apple.com/documentation/quartzcore/calayer)这里我们对它进行子类化以封装与它相关的数据，即原点和直径。

## 代码

> 模糊滤镜蒙版.h

```
#import <QuartzCore/QuartzCore.h>

@interface BlurFilterMask : CALayer
@property (assign) CGPoint origin;      // The centre of the blur filter mask.
@property (assign) CGFloat diameter;    // the diameter of the clear region of the blur filter mask.
@end 
```

> BlurFilterMask.m

```
#import "BlurFilterMask.h"

// The width in points the gradated region of the blur filter mask will span over.
CGFloat const GRADIENT_WIDTH = 50.0f;

@implementation BlurFilterMask

- (void)drawInContext:(CGContextRef)context
{
    CGFloat clearRegionRadius = self.diameter * 0.5f;
    CGFloat blurRegionRadius = clearRegionRadius + GRADIENT_WIDTH;

    CGColorSpaceRef baseColorSpace = CGColorSpaceCreateDeviceRGB();
    CGFloat colours[8] = { 0.0f, 0.0f, 0.0f, 0.0f,     // Clear region colour.
                            0.0f, 0.0f, 0.0f, 0.5f };   // Blur region colour.
    CGFloat colourLocations[2] = { 0.0f, 0.4f };
    CGGradientRef gradient = CGGradientCreateWithColorComponents (baseColorSpace, colours, colourLocations, 2);

    CGContextDrawRadialGradient(context, gradient, self.origin, clearRegionRadius, self.origin, blurRegionRadius, kCGGradientDrawsAfterEndLocation);

    CGColorSpaceRelease(baseColorSpace);
    CGGradientRelease(gradient);
}

@end 
```

> ViewController.m（无论您在何处实现模糊过滤器遮罩功能）

```
#import "ViewController.h"
#import "BlurFilterMask.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()
@property (strong, nonatomic) IBOutlet UIImageView *imageView;
@property (strong) BlurFilterMask *blurFilterMask;
@end

@implementation ViewController

// Begin the blur filter masking operation.
- (void)beginBlurMasking
{
    BlurFilterMask *blurFilterMask = [BlurFilterMask layer];
    blurFilterMask.diameter = MIN(CGRectGetWidth(self.imageView.bounds), CGRectGetHeight(self.imageView.bounds));
    blurFilterMask.frame = self.imageView.bounds;
    blurFilterMask.origin = self.imageView.center;
    blurFilterMask.shouldRasterize = YES;
    [self.imageView.layer addSublayer:blurFilterMask];
    [blurFilterMask setNeedsDisplay];

    self.blurFilterMask = blurFilterMask;

    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    [self.imageView addGestureRecognizer:tapGesture];

    UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(handlePinch:)];
    [self.imageView addGestureRecognizer:pinchGesture];
}

// Move the origin of the blur mask to the location of the tap.
- (void)handleTap:(UITapGestureRecognizer *)sender
{
    self.blurFilterMask.origin = [sender locationInView:self.imageView];
    [self.blurFilterMask setNeedsDisplay];
}

// Expand and contract the clear region of the blur mask.
- (void)handlePinch:(UIPinchGestureRecognizer *)sender
{
    // Use some combination of sender.scale and sender.velocity to determine the rate at which you want the mask to expand/contract.
    self.blurFilterMask.diameter += sender.velocity;
    [self.blurFilterMask setNeedsDisplay];
}

... 
```

![代码约定图](../Images/73fafeab2e62bcb7071b4483c7f51046.png)

（此图可能有助于理解代码中的命名约定）

* * *

### 笔记

确保托管您的图像的`multipleTouchEnabled`属性设置为/ ：`UIImageView``YES``true`

![多点触控启用](../Images/4e7f803337b6c406f883e4eced1d69a6.png)

* * *

### 笔记

为了清楚地回答 OPs 问题，这个答案继续使用最初使用的命名约定。这可能会稍微误导其他人。'Mask' 是这个上下文不是指图像掩码，而是更一般意义上的掩码。这个答案不使用任何图像遮罩操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:39:59.170

听起来您想使用`GPUImageGaussianSelectiveBlurFilter`包含在[GPUImage](https://github.com/BradLarson/GPUImage "GPU图像")框架中的内容。它应该是实现您想要的更快更有效的方法。

您可以将该`excludeCircleRadius`属性连接到[UIPinchGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPinchGestureRecognizer_Class/Reference/Reference.html)以允许用户更改非模糊圆圈的大小。然后将“excludeCirclePoint”属性与[UIPanGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html)结合使用，以允许用户移动非模糊圆的中心。

在此处阅读有关如何应用过滤器的更多信息：

[https://github.com/BradLarson/GPUImage#processing-a-still-image](https://github.com/BradLarson/GPUImage#processing-a-still-image)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-14T20:56:18.083

在 Swift 中，如果有人需要它（也添加了平移手势）：

**BlurFilterMask.swift**

```
import Foundation
import QuartzCore

class BlurFilterMask : CALayer {

    private let GRADIENT_WIDTH : CGFloat = 50.0

    var origin : CGPoint?
    var diameter : CGFloat?

    override init() {
        super.init()
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    override func drawInContext(ctx: CGContext) {
        let clearRegionRadius : CGFloat  = self.diameter! * 0.5
        let blurRegionRadius : CGFloat  = clearRegionRadius + GRADIENT_WIDTH

        let baseColorSpace = CGColorSpaceCreateDeviceRGB();
        let colours : [CGFloat] = [0.0, 0.0, 0.0, 0.0,     // Clear region
            0.0, 0.0, 0.0, 0.5] // blur region color
        let colourLocations : [CGFloat] = [0.0, 0.4]
        let gradient = CGGradientCreateWithColorComponents (baseColorSpace, colours, colourLocations, 2)

        CGContextDrawRadialGradient(ctx, gradient, self.origin!, clearRegionRadius, self.origin!, blurRegionRadius, .DrawsAfterEndLocation);

    }

} 
```

**ViewController.swift**

```
func addMaskOverlay(){
    imageView!.userInteractionEnabled = true
    imageView!.multipleTouchEnabled = true

    let blurFilterMask = BlurFilterMask()

    blurFilterMask.diameter = min(CGRectGetWidth(self.imageView!.bounds), CGRectGetHeight(self.imageView!.bounds))
    blurFilterMask.frame = self.imageView!.bounds
    blurFilterMask.origin = self.imageView!.center
    blurFilterMask.shouldRasterize = true

    self.imageView!.layer.addSublayer(blurFilterMask)

    self.blurFilterMask = blurFilterMask
    self.blurFilterMask!.setNeedsDisplay()

    self.imageView!.addGestureRecognizer(UIPinchGestureRecognizer(target: self, action: "handlePinch:"))
    self.imageView!.addGestureRecognizer(UITapGestureRecognizer(target: self, action: "handleTap:"))
    self.imageView!.addGestureRecognizer(UIPanGestureRecognizer(target: self, action: "handlePan:"))
}

func donePressed(){
    //save photo and add to textview
    let parent : LoggedInContainerViewController? = self.parentViewController as? LoggedInContainerViewController
    let vc : OrderFlowCareInstructionsTextViewController = parent?.viewControllers[(parent?.viewControllers.count)!-2] as! OrderFlowCareInstructionsTextViewController
    vc.addImageToTextView(imageView?.image)
    parent?.popViewController()
}

//MARK: Mask Overlay
func handleTap(sender : UITapGestureRecognizer){
    self.blurFilterMask!.origin = sender.locationInView(self.imageView!)
    self.blurFilterMask!.setNeedsDisplay()
}

func handlePinch(sender : UIPinchGestureRecognizer){
    self.blurFilterMask!.diameter = self.blurFilterMask!.diameter! + sender.velocity*3
    self.blurFilterMask!.setNeedsDisplay()
}

func handlePan(sender : UIPanGestureRecognizer){

    let translation = sender.translationInView(self.imageView!)
    let center = CGPoint(x:self.imageView!.center.x + translation.x,
        y:self.imageView!.center.y + translation.y)
    self.blurFilterMask!.origin = center
    self.blurFilterMask!.setNeedsDisplay()
} 
```

# python - Django 脚本中“排序”命令的 subprocess.call() 将 \M 添加到我的文件末尾

> ID：14670990
> 
> 赞同：0
> 
> 时间：2013-02-03T09:12:56.880
> 
> 标签：python, django, linux, unix, sorting

我在搞乱Django。我的一个应用程序（在管理/命令文件夹内）中有一个自定义管理脚本，它有一个 subprocess.call() 行。我正在执行“sort A.csv -o A_sorted.csv”调用。写入的已排序文件在每一行的末尾都充满了“^M”。我发现从命令行运行排序命令或从不在 Django 中运行的普通 python 脚本中通过 subprocess.call() 调用相同命令时不会发生这种情况。

关于为什么会发生这种情况以及我能做些什么来防止这种情况发生的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:17:42.843

极不可能`sort`自行将行尾从 Unix 更改为 Windows。更有可能`A.csv`已经包含 Windows 行尾，并且`sort`仅保留它们。如果首先创建`A.csv`的是您的脚本，请仔细检查正在使用的换行符约定。

# php - 如何更换所有的 节点？

> ID：14670994
> 
> 赞同：-2
> 
> 时间：2013-02-03T09:13:46.070
> 
> 标签：php, xml, rss, domdocument

我正在为学校分配创建在线商店的任务。有一个页面，管理员可以在其中更新物品库存和/或出售物品。每次商品上架或下架时，都会调用一个函数来使用最新的销售商品更新 RSS 提要。

这是 RSS XML 结构：

```
<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>Project2 RSS Feed</title>
        <language>en-us</language>
        <link>http://people.rit.edu/~cns3946/539/project2/project2.rss</link>
        <description>Project 2 RSS Feed</description>
        <item>
            <title>Far Cry 3</title>
            <link>http://people.rit.edu/cns3946/539/project2/index.php?item_num=3</link>
            <description>
            <![CDATA[a boring description goes here....]]></description>
            <price>59.99</price>
            <salePrice>49.99</salePrice>
            <pubDate>Sun, 03 Feb 2013 01:20:04 -0500</pubDate>
        </item>
        <item>
            <title>Tales of the Abyss 3DS</title>
            <link>http://people.rit.edu/cns3946/539/project2/index.php?item_num=13</link>
            <description><![CDATA[a boring description goes here....]]></description>
            <price>39.99</price>
            <salePrice>29.99</salePrice>
            <pubDate>Sun, 03 Feb 2013 01:20:04 -0500</pubDate>
        </item>
        <item>
            <title>Resistance: Fall of Man</title>
            <link>http://people.rit.edu/cns3946/539/project2/index.php?item_num=17</link>
            <description><![CDATA[a boring description goes here....]]></description>
            <price>19.99</price>
            <salePrice>9.99</salePrice>
            <pubDate>Sun, 03 Feb 2013 01:20:04 -0500</pubDate>
        </item>
    </channel>
</rss> 
```

每次调用该函数时，它都会附加到文件中。我希望能够删除所有节点，然后将新的销售项目附加到文件中。我试过使用 removeChild 并无法弄清楚。如果您对我如何完成这项工作有任何提示或指示，您能告诉我吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:19:57.277

像这样的东西应该工作：

```
$dom = new DOMDocument;
$dom->load('your_file_name.xml');
//loop thru each item node
foreach ($dom->getElementsByTagName('item') as $item) {
    //remove the item node
    $item->parentNode->removeChild($item);
}
echo $dom->saveXml(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:20:47.807

```
$items = $domdocument->getElementsByTagName("item");
while($items->length > 0)
    $items->item(0)->parentNode->removeChild($items->item(0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:24:01.777

你可以像这样使用 preg_replace 但它用于字符串

```
$str=preg_replace("~<item(.*?)>(.*?)</item>~si",""," ".$str." "); 
```

它是从字符串中删除所有项目

# android-layout - 是否可以为所有产品只创建一个 xml 布局，而产品描述会根据在 android 中选择的产品而变化？

> ID：14670996
> 
> 赞同：0
> 
> 时间：2013-02-03T09:13:54.727
> 
> 标签：android-layout, android-activity, android-menu

我正在尝试为我的第一个 Android 课程创建一个 POS Andriod 应用程序。对于菜单，我为我们的客户实现了一个滚动视图来选择他们的产品。当点击产品时，它会转到另一个屏幕，其中可以找到产品详细信息（图像和描述）和“添加到购物车”。我所做的是为每个提供的产品创建了那个菜单屏幕，以及许多活动屏幕及其各自的布局 xml 文件。我的问题是，有没有更有效的方法来解决这个问题？我的意思是，是否可以为所有产品只创建一个 xml 布局，而产品描述会根据选择的产品而变化？我已经尝试搜索有关此的指南，但我不确定我是否一直在搜索正确的关键字。

谢谢你。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:08:09.647

您可以使用以下方法修改布局的内容

```
 TextView description = (TextView) findViewById(R.id.description);
   description.setText("My cool product");

   description.setCompoundDrawablesRelativeWithIntrinsicBounds
     (null, R.drawable.product1, null, null); 
```

# api - 电子邮件有一点吗？

> ID：14670998
> 
> 赞同：0
> 
> 时间：2013-02-03T09:13:56.203
> 
> 标签：api, email

我希望能够使用 api 输入电子邮件地址，例如 abc@gmail.com 获取隐藏的电子邮件地址，例如 xyz@cloaked.com（最好 cloaked.com 是我们自己的域），最后获得电子邮件的统计信息发送到伪装的地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:25:25.567

如果您希望它在您自己的域上更容易。设置一个 MX 记录和你自己的邮件服务器，然后使用邮件服务器 API 设置你想要的任何随机的地址。

一些恶意服务器（例如 exim）可以配置为在 SQL 数据库中查找以查找转发邮件，我不知道任何用于请求或配置转发器的标准化 API，我见过的最接近标准的是 /等/别名