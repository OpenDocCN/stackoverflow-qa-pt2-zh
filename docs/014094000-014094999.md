# StackOverflow 问答 14094000-14094999

# java - 根据Java中的组合框进行SQL查询

> ID：14094000
> 
> 赞同：-1
> 
> 时间：2012-12-30T19:42:53.853
> 
> 标签：java, sql, swing, variables, combobox

```
final JComboBox destination= new JComboBox();
destination.setModel(new DefaultComboBoxModel(new String[] {"city1", "city2", "city3"}));
destination.setBounds(413, 11, 147, 20);
int selectedIndex1=destination.getSelectedIndex();
contentPane.add(destination); 
```

和

```
final JComboBox departure= new JComboBox();
departure.setModel(new DefaultComboBoxModel(new String[] {"city1", "city2", "city3"}));
departure.setBounds(413, 11, 147, 20);
int selectedIndex1=departure.getSelectedIndex();
contentPane.add(departure); 
```

我正在为我的家庭作业编写一个巴士预订系统，但我无法用 Java 编写正确的 SQL 查询。

我有 3 个组合框。

我想编写一个 SQL 查询来显示可用的公交车及其时间。我的意思是这样的：

```
select busid,bustime
from table1
where des=destination.getSelectedItem()
   && dep=departure.getSelectedItem()
   && date=date.getSelectedItem() 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:16:51.110

我建议您花时间阅读[JDBC](http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)跟踪...

您的查询仍需要正确“引用”

```
String query = "select busid,bustime from table1 where des='" + destination.getSelectedItem() + "' AND dep='" + departure.getSelectedItem() + "' AND date='" + date.getSelectedItem() + '"; 
```

它已经开始了一段时间，但我不记得`&&`是 SQL 中的有效运算符......

当然，你真的应该使用准备好的语句

```
PreparedStatement stmt = null;
try {
    stmt = con.prepareStatement("select busid,bustime from table1 where des=? AND dep=? AND date=?");
    stmt.setString(1, destination.getSelectedItem());
    stmt.setString(2, departure.getSelectedItem());
    // I'm assuming this is String, but it could be a Date
    stmt.setString(3, date.getSelectedItem());

    stmt.execute();
} catch (SQLException exp) {
    exp.printStackTrace();
} finally {
    try {
        stmt.close();
    } catch (Exception exp) {
    }
} 
```

# objective-c - XCode 中缺少网点

> ID：14094003
> 
> 赞同：1
> 
> 时间：2012-12-30T19:43:29.037
> 
> 标签：objective-c, ios, xcode4.2, xcode4.5, outlet

我正在做我的第一个 iOS 应用程序，它应该类似于以下屏幕截图：

![在此处输入图像描述](../Images/f3ffcd9bc258caeb12500ff797af8d45.png)

尽管如此，根据我在 Xcode 中的项目截图，我似乎缺少一些连接，例如“窗口”和“代表”作为“文件的所有者”：

![在此处输入图像描述](../Images/9c1d6df3a3d3b5b2ed08616fb6cc729b.png)

我正在关注这本书 iOS 编程 - 大书呆子牧场指南，并且由于这本书使用的是旧版本的 XCode -4.2 我想 - 我想我的问题与此有关。

谁能帮我找出如何创建那些缺失的连接？如何将其添加到`window`部分和部分中？我真的需要添加它们吗？`Window``Outlets``delegate``File's Owner``Referencing Outlets`

提前非常感谢！

编辑：这是我的头文件：

```
#import <UIKit/UIKit.h>

@interface QuizAppDelegate : UIResponder <UIApplicationDelegate>
{
    int currentQuestionIndex;
    // The model objects
    NSMutableArray *questions;
    NSMutableArray *answers;

    // The view objects
    IBOutlet UILabel *questionField;
    IBOutlet UILabel *answerField;
}

@property (strong, nonatomic) UIWindow *window;

- (IBAction)showQuestion:(id)sender;
- (IBAction)showAnswer:(id)sender;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:07:05.750

您可能没有在标题中正确指定“IBOutlets”。或者您可能没有在 IB 或标题中正确指定对象的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:46:26.557

控制单击并按住圆圈并拖动到要创建连接的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T01:25:30.853

每个视图控制器都有一个 .h 和 .m 文件，我在您的头文件中可以看到您正在将 IBOutlet(s) 添加到 App Delegate 中，这是错误的。请将它们添加到相应的 View Controller 中。

然后打开故事板或 xib 文件并将插座附加到 UI 元素。

# java - JAVA中的指针。可能的？

> ID：14094004
> 
> 赞同：0
> 
> 时间：2012-12-30T19:43:29.020
> 
> 标签：java, pointers

我发现了一种情况，我需要像 C++ 这样的指针，但在 JAVA 中。我将解释确切的情况，以便有人可以帮助我：

我正在开发一个视频游戏。在里面，有一些箱子可以给你一些物品。您拥有的项目数量保存在一个不重要的一般对象中。情况是我只想创建一个通用的箱子对象，我可以在其中指示哪个对象将给玩家，当你打开它时，它会汇总通用对象中的数量。问题是我不想在胸部对象内使用一个巨大的开关，在其中我检查哪种对象将被总结。而不是它，我想给对象一个指向通用对象的整数的指针，以便轻松地求和。

这在JAVA中可能吗？如果没有......任何提示以简单的方式做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T19:47:23.127

使玩家的物品栏（可能是“非重要的一般对象”）动态，而不是将所有内容存储为单独的字段。例如，使用从项目类型标识符到计数的映射，而不是存储指向计数的“指针”，而是将项目类型标识符存储在您的胸部对象中，并使用它来增加库存中的正确计数。

如果您绝对必须将所有内容存储在单独的字段中，请将它们设为对象而不是具有 getCount/setCount 方法的普通整数。然后把那个物体放到你的胸口。但是如果你这样做，你可能需要一个大开关来在第一次实例化时将正确的对象传递给胸部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:47:12.187

我真的不能说我理解您的要求（英语不是我的母语），但在我看来，界面就是您正在寻找的。回到您的问题，有一些调整允许开发人员以直接模式（堆内存）访问非 JVM 内存。有关详细信息，请参阅 Apache DirectMemory。

# java - 为什么单个“if”比“switch”慢？

> ID：14094005
> 
> 赞同：12
> 
> 时间：2012-12-30T19:43:32.517
> 
> 标签：java, performance, if-statement, switch-statement

> **可能重复：**
> [Java 中 if/else 与 switch 语句的相对性能差异是什么？](https://stackoverflow.com/questions/2086529/what-is-the-relative-performance-difference-of-if-else-versus-switch-statement-i)

给定以下两种方法：

```
public static int useSwitch(int i) {
    switch (i) {
    case 0:
        return 1;
    default:
        return 0;
    }
}

public static int useIf(int i) {
    if (i == 0)
        return 1;
    return 0;
} 
```

测试表明，执行速度比版本`switch`略快（在我的机器上每次调用 1.4 纳秒） 。`if`

我一直相信转换的好处只有在至少`ifs`可以避免一些情况下才会发挥作用，

为什么`switch`比单快`if`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T19:52:09.860

通过检查字节码，结果符合预期：

**转变**

```
public static useSwitch(I)I
 L0
  ILOAD 0
  TABLESWITCH
    0: L1
    default: L2
 L1
  INVOKESTATIC Tests.a()I
  IRETURN
 L2
  INVOKESTATIC Tests.b()I
  IRETURN 
```

**如果**

```
public static useIf(I)I
 L0
  ILOAD 0
  IFNE L1
 L2
  INVOKESTATIC Tests.a()I
  IRETURN
 L1
  INVOKESTATIC Tests.b()I
  IRETURN 
```

现在我没有看到任何特定原因应该比另一个慢（在任何情况下都不是显着的数量）。这肯定与特定的 JVM 实现以及它如何执行这些操作码有关。根据常识，`TABLESWITCH`除非有足够的案例使其构造有价值，否则指令应该较慢，但这只是**普遍的想法**。每个 JVM 都可以以不同的方式实现它，所以这只是猜测。

您确定以一致的方式描述所有内容吗？（通过给 JVM 时间来预热，通过将结果保持在置信范围内以及使分析足够正确以供使用的所有其他事情）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:33:47.503

这种类型的比较在[If-else 与 switch 中进行了分析——哪个更好？](http://www.ashishpaliwal.com/blog/2009/08/if-else-vs-switch-%E2%80%93-which-is-better/). 但是，尝试使用 gcj 编译为本机代码，并将获得的结果与使用字节码的结果进行比较。

# local-storage - 使用 Firebase 进行会话管理？

> ID：14094010
> 
> 赞同：23
> 
> 时间：2012-12-30T19:44:15.060
> 
> 标签：local-storage, firebase

我正在使用需要身份验证和会话处理的 Firebase 构建一个基本的 webapp。浏览 Firebase Auth 的文档后，我决定在 Facebook 登录上使用[电子邮件/密码选项。](https://www.firebase.com/docs/security/simple-login-email-password.html)

成功登录后，我们会得到一个`token`可以在页面刷新时再次用于登录或在新选项卡上使用`auth()`. 但是，为此我们需要将令牌保存在客户端的某个地方。浏览实现身份验证和会话处理的 Firefeed的[源代码](https://github.com/firebase/firefeed/blob/master/www/js/firefeed.js)`token`，将其保存在`localStorage`用户的浏览器中。

这种方法有多安全？因为`localStorage`使用浏览器的任何人都可以看到数据。有没有更好的选择呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-30T20:03:15.240

简单登录返回的令牌是有时间限制的、用户特定的令牌。如果受到攻击，它们最坏的情况是允许攻击者在有限的时间内冒充该用户。它们不包含用户的密码或其他敏感数据。

localstorage 只能通过保存它的主机域上的 Javascript 访问，因此您访问的其他站点将无法访问它（假设浏览器或您的站点没有受到损害，但如果有，则所有赌注都关闭...)

因此，简短的回答是，这种方法非常安全。

# unix - 我正在执行一个 shell 脚本，这里的值没有被分配给变量，而是被回显的文件列表

> ID：14094014
> 
> 赞同：0
> 
> 时间：2012-12-30T19:44:25.247
> 
> 标签：unix

请在下面找到代码。我无法理解出了什么问题以及在哪里。

```
date1='20120101'
echo ${date1}
date_with_slash=`nawk -v var=${date1} 'BEGIN {print substr(var,7,2)}'`/`nawk -v var=${date1} 'BEGIN {print substr(var,5,2)}'`/`nawk -v var=${date1} 'BEGIN {print substr(var,1,4)}'`
echo ${date_with_slash}

Value_Range='VALLLLLUUUUEEE'
echo $Value_Range
Value_Range = `sqlplus -s lode/lode@oropl_gw <<EOF
set serveroutput on
declare

    Value_Range varchar2(20):='val';
    ddate varchar2(20):=${date_with_slash};
    begin
    select to_char(sysdate + 2 - (select trunc(sysdate)- to_date('${date_with_slash}','dd/mm/yyyy') from dual),'yyyymmdd') into Value_Range from dual;
    dbms_output.put_line(Value_Range);
    end;
    /
    exit
    EOF`
echo date1 is ${date1}
echo value is ${Value_Range} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:10:09.373

您必须删除作业中的空格`=`：

```
Value_Range=`sqlplus -s lode/lode@oropl_gw <<EOF 
```

请参阅：[Bash 脚本变量声明 - 找不到命令](https://stackoverflow.com/questions/2268104/basic-bash-script-variable-declaration-command-not-found/2268117#2268117)

# grails - Grails，rejectIfNoRule = true 时的无限循环

> ID：14094015
> 
> 赞同：0
> 
> 时间：2012-12-30T19:44:36.960
> 
> 标签：grails

`rejectIfNoRule = true` 当我尝试打开主页“/”时，我在 Grails 应用程序中遇到无限循环问题，我被重定向到“/login/auth”并出现错误

> 错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。

问题的根源似乎位于 org.codehaus.groovy.grails.plugins.springsecurity.RequestmapFilterInvocationDefinition.java 中的初始化方法中，其中以下异常被静音。

```
Exception initializing; this is ok if it's at startup and due to GORM not being initialized yet since the first web request will re-initialize. Error message is "Cannot load Requestmaps, \"requestMap.className\" property is not set 
```

不幸的是，第一个请求是这个无限循环的请求，那么我该如何为 GORM 初始化 Requestmap？

环境：

*   Groovy 版本：2.0.6
*   圣杯 2.2.0
*   JVM：1.7.0_07 供应商：甲骨文公司
*   操作系统：Linux
*   弹簧安全核心：1.2.7.3
*   弹簧安全用户界面：0.2

我的 Config.groovy：

*   grails.plugins.springsecurity.securityConfigType = "请求映射"
*   grails.plugins.springsecurity.rejectIfNoRule = true

请求图：

```
new Requestmap(url: '/js/**', configAttribute: 'IS_AUTHENTICATED_ANONYMOUSLY').save()
new Requestmap(url: '/css/**', configAttribute: 'IS_AUTHENTICATED_ANONYMOUSLY').save()
new Requestmap(url: '/images/**', configAttribute: 'IS_AUTHENTICATED_ANONYMOUSLY').save()
new Requestmap(url: '/login/**', configAttribute: 'IS_AUTHENTICATED_ANONYMOUSLY').save()
new Requestmap(url: '/logout/**', configAttribute: 'IS_AUTHENTICATED_ANONYMOUSLY').save()
new Requestmap(url: '/', configAttribute: 'IS_AUTHENTICATED_ANONYMOUSLY').save() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T19:56:08.467

> 错误消息是“无法加载请求映射，\”requestMap.className\”属性未设置

这是您的错误的原因 - 当您在数据库中存储请求映射时，您需要一个条目来`Config.groovy`告诉 spring 安全插件`Requestmap`域类的名称

```
grails {
  plugins {
    springsecurity {
      securityConfigType = SecurityConfigType.Requestmap

      // fully qualified class name of the Requestmap class
      requestMap.className = 'com.example.Requestmap'

      // these next two are the defaults but good to make them explicit anyway
      requestMap.urlField = 'url'
      requestMap.configAttributeField = 'configAttribute'
    }
  }
} 
```

# python - 尝试在 pygame 中对背景进行 blit 时，我收到此错误消息

> ID：14094016
> 
> 赞同：1
> 
> 时间：2012-12-30T19:44:49.680
> 
> 标签：python, pygame, blit

昨天我是 pygame 的新手，在尝试将任何东西放到屏幕上时，我一直遇到这个问题。我正在运行 mac osx 10.6.8。我在 textwrangler 中把它全部写出来，并在终端中执行它`python2.7-32 filename.py`

```
Traceback (most recent call last):
  File "adventure.py", line 35, in <module>
    screen.blit(background(0, 0))
TypeError: 'pygame.Surface' object is not callable 
```

这是[我的python程序](http://pastebin.com/CJ6yJWFC)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:50:54.313

尝试更改`screen.blit(background(0, 0))`为`screen.blit(background,(0, 0))`（没有逗号，您将`background`其视为函数/可调用而不是参数。将其视为调用以参数命名`background`的函数`(0, 0)`。）。`screen.blit`的两个必需参数是 a`source`和 a ，因此在提供两个参数 ( is , is )`destination`之后放置一个逗号。`background``source``background``destination``(0, 0)`

# asp.net-mvc-3 - 通过 MVC 视图上的超链接显示的图像

> ID：14094025
> 
> 赞同：0
> 
> 时间：2012-12-30T19:46:07.133
> 
> 标签：asp.net-mvc-3, image-processing

我有一个 MVC3 应用程序，它有一个带有表格的视图和单击以显示图像的链接。由于大小，客户不希望图像直接显示在网格中。

我将图像存储在 SQL Server 数据库中。我见过的从数据库中检索 byte[] 并显示它的每个示例都涉及首先保存到文件。有没有办法用内存流来响应。直接写它并绕过文件 i/o？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T23:14:07.020

请检查这个答案[Display image from database in asp mvc](https://stackoverflow.com/questions/880515/display-image-from-database-in-asp-mvc)

而不是使用图像

```
<img src='<%= Url.Action( "show", "image", new { id = ViewData["imageID"] } ) %>' /> 
```

使用和操作链接

```
@Html.ActionLink("View Image", "Action", "Controller", new { id = ViewData["imageID"] } ) 
```

只需将 ViewData["imageID"] 替换为图像的 id

# java - TD下的jsoup和具体元素

> ID：14094026
> 
> 赞同：1
> 
> 时间：2012-12-30T19:46:17.883
> 
> 标签：java, android, href, jsoup, html-table

我正在开发一个基于 Jsoup Parsing 的应用程序。我喜欢这门课，因为它非常有用，但刚才我遇到了一个问题。我无法理解如何选择 html 页面的特定元素，现在我将通过一个示例来表示。

```
<table>
<tr>

<td class=default1>
   <a href "pickthisurl.com"> text </a>
   <a><href="uselesslink.com">text </a>
</td>
<td class=default1>
   <a href "pickthisurl.com">text </a>
   <a><href="uselesslink.com">text </a>
</td>
<td class=default1>
   <a href "pickthisurl.com">text</a>
   <a><href="uselesslink.com">text</a>
</td>

<tr>
</table> 
```

所以，我需要的是该类的每个 td 下第一个的 url。我正在尝试类似的东西

元素链接 = doc.select("td.default1 > a[href]");

但是这段代码选择（并且是正确的）所有链接元素！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T23:30:47.553

试试这个。

```
Elements td = doc.select("td.default1");
for(Element el : td)
{
   el.select("a[href]").first();
} 
```

# cordova - Phonegap 网络状态

> ID：14094031
> 
> 赞同：2
> 
> 时间：2012-12-30T19:46:37.820
> 
> 标签：cordova

我正在尝试检查我的 phonegap 应用程序（使用 phonegap 2.2.0）中的网络状态，但是我正在显示一个警告，说连接类型：未定义。当我执行 console.log 时，它返回 0。

我正在使用 phonegap 提供的代码，并在 onDeviceReady 之后调用它。这是我使用的代码：

```
function checkConnection() {
var networkState = navigator.connection.type;

var states = {};
states[Connection.UNKNOWN]  = 'Unknown connection';
states[Connection.ETHERNET] = 'Ethernet connection';
states[Connection.WIFI]     = 'WiFi connection';
states[Connection.CELL_2G]  = 'Cell 2G connection';
states[Connection.CELL_3G]  = 'Cell 3G connection';
states[Connection.CELL_4G]  = 'Cell 4G connection';
states[Connection.NONE]     = 'No network connection';

alert('Connection type: ' + states[networkState]);

} 
```

有没有人遇到过这个问题或有任何想法如何解决它？目前我正在使用 WiFi 连接，即使在 3G 连接上，它也会返回相同的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T23:26:06.190

请检查以下步骤：

*   首先检查权限。确保您已添加

    ```
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    ```

    在你的 AndroidManifest.xml

*   其次检查正确的插件配置。如果您使用旧的 Phonegap 教程（Pre 1.6 版本）和新的 Phonegap/Cordova 框架，您应该将 res/xml/plugins.xml 更改为：

    ```
    <plugin name="Network Status" value="org.apache.cordova.NetworkManager"/> 
    ```

    成为：

    ```
    <plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/> 
    ```

*   最新版本的 Phonegap/Cordica 存在以下错误：

    ```
     navigator.connection.type 
    ```

    将其更改为：

    ```
    navigator.network.connection.type. 
    ```

    您也可以使用较旧的 2.1 版本或等待 2.3 版本

*   ***长镜头，您在执行函数checkConnecting()***之前是否使用了 deviceready 事件？

*   最坏的情况是更改您的代码并像这样尝试：

    ```
    <!DOCTYPE HTML>
    <html>
      <head>
          <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
          <script type="text/javascript" charset="utf-8">

        var deviceInfo = function(){
          alert(navigator.network.connection.type);
        }

        function init(){
            document.addEventListener("deviceready", deviceInfo, true);
        }
      </script>
      </head>
      <body onload="init();">

      </body>
    </html> 
    ```

# android - 如何退出应用内结算版本 3 并安装适用于 Android 应用内结算订阅的 IAB V2？

> ID：14094032
> 
> 赞同：1
> 
> 时间：2012-12-30T19:46:39.380
> 
> 标签：android, in-app-purchase, in-app-billing

我将给出一个相当冗长的解释，以防其他人遇到同样的问题......

我正在我的 Android 应用程序中实施 Google 应用程序内计费，并打算为应用程序用户提供“订阅”。我安装并编写了 Google 的应用内结算版本 3 (IAB V3) 并使用 Google 的测试帐户让一切正常运行。然后我在开发者仪表板中设置产品并更改代码中的 SKU 以指向我的新订阅产品。推出它只是为了在您尝试购买订阅时收到“未找到项目”消息。搜索论坛，看到很多人说“只需，等几个小时，它就会开始工作”。好吧，我等了一夜，但仍然出现“找不到项目”的错误。然后我意识到 IAB V3 不支持订阅——Doh！

我需要使用 IAB V2 重写。在 SDK 管理器中，我只看到“Google Play Billing Library - 3”。如何安装第 2 版以便获得应用内计费订阅？我已在 SDK 管理器中删除了 Google Play Billing Library 第 3 版并进行了刷新。“过时”已被选中，但它仍然不提供版本 2 进行安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:02:11.217

我遇到了同样的问题，我实际上是在使用 V2 并切换到 V3。V2和V3的区别就像白天和黑夜，我再也回不去了。V3 更易于理解和使用。

您可以在 V3 中实现自定义订阅，只需在 x 天过去之前不消费即可。然后消费该项目并提示您的用户购买新的 x 天订阅。缺点是您必须要求用户再次购买订阅。

V3 订阅将很快推出，因此您可以轻松更新代码并上传新版本。

示例代码：

```
 IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() 
    {
      public void onQueryInventoryFinished(IabResult result, Inventory inventory) 
      {
        if(inventory.hasPurchase("android.test.purchased")) 
        {
          java.util.Date expirationDate = your expiration Date;
          java.util.Date purchaseDate   = new java.util.Date(inventory.getPurchase("android.test.purchased").getPurchaseTime());

          if(purchaseDate.compareTo(expirationDate)<=0) //expired
          {
            mHelper.consumeAsync(inventory.getPurchase("android.test.purchased"), mConsumeFinishedListener);
            mySharedPrefs.edit().putBoolean("isSubscribed",false).commit();
          }
       }
     }
   }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:58:50.713

不知道为什么您的 SDK 管理器找不到它我仍然拥有它，因为我最初拥有它。

这是给你的压缩版本：

[http://blog.blundell-apps.com/wp-content/uploads/2012/02/in-app-billing-v02.zip](http://blog.blundell-apps.com/wp-content/uploads/2012/02/in-app-billing-v02.zip)

您可以将其解压缩到：

`android-sdk-macosx/extras/google/play_billing/in-app-billing-v02`

Google Play 演示有其他选择，我的教程就是其中之一 :-)

[http://blog.blundell-apps.com/simple-inapp-billing-payment/](http://blog.blundell-apps.com/simple-inapp-billing-payment/)

和机器人媒体有一个库：

[http://www.robotmedia.net/2011/06/android-billing-library-in-app-billing-made-simple/](http://www.robotmedia.net/2011/06/android-billing-library-in-app-billing-made-simple/)

（我的意思是您可以从 SDK-Manager 之外的其他地方获取 SDK 代码）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:18:44.253

如果您还没有回滚，看起来 IAB V3 现在开始支持订阅

[http://developer.android.com/google/play/billing/billing_overview.html](http://developer.android.com/google/play/billing/billing_overview.html)

# mysql - Rails AR + Mysql - 排除电影类型无法按预期工作

> ID：14094034
> 
> 赞同：0
> 
> 时间：2012-12-30T19:46:52.720
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord, squeel

假设我有一个包含流派的电影数据库，我想显示除某些特定流派之外的所有电影。我已经建立了所有协会并且工作得很好。

为此，我遇到了名为[Squeel](https://github.com/ernie/squeel)的 gem ，并编写了这段代码

```
movies = Movie.joins(:movie_genres).approved

# This is just an array of id's
included_genres = params[:genres][:included_genres]
excluded_genres = params[:genres][:excluded_genres]

if included_genres

  # This works just fine
  movies = movies.where(movie_genres: {genre_id: included_genres})

  # This works too but IMO MySQL IN operator is faster.
  #movies = movies.where{movie_genres.genre_id.eq_any included_genres}

end

if excluded_genres

  # Here is where the problems occurs, it generates perfectly nice SQL 
  # but for some reason it doesn't work as expected.
  movies = movies.where{movie_genres.genre_id.not_eq_any excluded_genres}

  # If we do it this way, it will only not match those movies 
  # that have all the selected genres at once, i need to match 
  # all movies that have atleast one of the inputted genres
  #movies = movies.where("genre_id NOT IN (?)", excluded_genres)
  #movies = movies.where{movie_genres.genre_id.not_eq_all excluded_genres}    

end

movies = movies.group(:id) 
```

所以，是的，多亏了 Squeel，我们得到了这个 SQL：

```
SELECT `movies`.* FROM `movies` 
INNER JOIN `movie_genres` ON `movie_genres`.`movie_id` = `movies`.`id` 
WHERE ((`movie_genres`.`genre_id` != 10 OR `movie_genres`.`genre_id` != 12)) 
GROUP BY `movies`.`id`; 
```

这没有包括类型，因为它们按预期工作。

因此，结果，where 条件看起来甚至不适用，因为我认为有或没有它没有区别。

看截图： ![显示 sql 查询工作的 Mysql 终端输出](../Images/146817f2e2c4bd1cb565d04c3985d668.png)

有谁知道为什么它不起作用，我应该从哪里开始挖掘？

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:58:22.033

问题在于逻辑，而不是 sql。使用“或”逻辑，您希望获得满足任何条件的行，因此对于您的查询，您将获得 id 为 10 的行，因为 10 ！= 12。使用 WHERE IN - 很好的方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T22:35:33.947

通过使用命名范围解决了这个问题

```
scope :excluding_genres, 
  lambda { |genres| { 
    :conditions => 
       ['movies.id NOT IN 
       (SELECT movies.id FROM movies 
        LEFT JOIN movie_genres ON movies.id = movie_genres.movie_id 
        WHERE movie_genres.genre_id IN (?))', genres] 
  }} 
```

# ruby-on-rails - 使用 Jquery 在 Rails 3 中使用 Ajax 刷新部分

> ID：14094036
> 
> 赞同：1
> 
> 时间：2012-12-30T19:47:05.013
> 
> 标签：ruby-on-rails, ruby, ajax, jquery

我有一个包含一堆物品的容器的部分。如果我通过 ajax 添加一个项目，我想在这个容器中反映它而不刷新页面。我在寻找一种 jquery/ajax 方式来刷新页面上的那个部分时遇到问题。我相信有一个简单的方法我只是想念它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T19:49:25.653

**.js.erb**

```
$('#container_id').html('<%= escape_javascript(render(:partial => "partial", :formats => [:html])) %>'); 
```

* * *

**完整示例：**

```
# CommentsController

def refresh_comments
  @comments = Comment.last_in(10.second) # fetch collection
  respond_to do |format|
    format.html { } # by default renders views/comments/refresh_comments.html.erb as template
    format.js { } # by default renders views/comments/refresh_comments.js.erb as template
  end
end

# views/comments/refresh_comments.js.erb

$('#post_comments').html('<%= escape_javascript(render(:partial => "comments_thread", :formats => [:html])) %>');

# * where: "post_comments" - is a DOM id of container.
#          "comments_thread" - name of partial. :formats => [:html] says that you render _comments.html.erb

# Look JQuery API for details. 
```

# graphics - 计算相机光线方向到 3d 世界像素

> ID：14094042
> 
> 赞同：8
> 
> 时间：2012-12-30T19:47:36.887
> 
> 标签：graphics, camera, pixel, trace

我想计算从相机到具有给定高度的像素位置（在世界坐标中）的光线方向，如[本文](http://gl.ict.usc.edu/Research/HeadCam/SIG2010_HeadMount_Paper.pdf)所述。相机图像大小为 640,480。我校准了相机的内在参数并且不扭曲每个图像。我测量了相机和背景平面之间的物理距离（29 厘米），如下所示：

![场景](../Images/1728a4afb5ad7f80cf8535ad8063c064.png)

1 厘米转换为 25 像素（假设为二次像素）。我的第一种方法是根据像素和相机位置进行计算，如下所示：

```
float3 pixPos = (float3)(u, v, z);
float3 camPos = (float3)(height/2, width/2, 29*25);
float3 ray = normalize(pixPos-camPos); 
```

其中 u,v 是从 0,0 到 height,width 的图像坐标，z 是我的（已经估计的）高度值。这似乎不是正确的方法。我已经在 SO 上进行了搜索并找到[了这个答案](https://stackoverflow.com/questions/10432600/calculate-ray-direction-vector-from-screen-coordanate)，但是那里描述的解决方案不包括像素高度（此处为 z）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T20:17:53.160

几年前，当我写毕业论文时，我也在解决同样的问题。这是它的一部分，它描述了如何创建用于光线跟踪的相机。

首先，您需要定义相机的坐标系。它是正交坐标系，这意味着所有三个基向量都相互垂直并且具有相同的大小（不必是“一个”）。您还需要指出，如果您的相机坐标系是[右手或左手](http://en.wikipedia.org/wiki/Cartesian_coordinate_system#Orientation_and_handedness)（我将谈论左手）。首先，您需要定义`up vector`（矢量向您显示屏幕上的 y 轴）和`camera direction vector`（从眼睛位置到投影平面中间的矢量）。然后，您将通过 and 计算（或`left vector`右向量，如果需要）（屏幕上 x 轴的确切位置）。现在，因为只有相机方向向量和左向量肯定是垂直的，`cross product``up vector``camera direction vector``one more cross product``camera direction vector`和`left vector`（图像上的矢量 y）。

所以你会得到像这样的相机协调系统

![左手相机协调系统](../Images/9067b9c77295f2ca151da7871e373ca3.png)

不，您必须定义，在世界坐标中您的投影屏幕有多大。这有时可能很棘手，因此您也可以通过两个角度![phi 和 theta 角](../Images/4eaf98d341f3748b5a83d005cbd3704b.png)(`phi`和`theta`) 和与眼睛位置的距离（我们称之为`d`）来定义它。

你会得到![你矢量](../Images/7f99cc4c9c774566d58d1acfafbbbd91.png)和![v 向量](../Images/1188d2d56d017d03574cb862ddaebf87.png)。（`x`向量是定义屏幕上 x 轴的向量，因此它是`left vector`右向量，取决于惯用手）通过这两个向量的线性组合，`u`您`v`可以计算投影屏幕上的任何位置。系数![α](../Images/eca6afb2d0bb142046757b039100849b.png) `alpha`和![测试版](../Images/9fc93480e6e2374150d7ebe034a4a7ce.png)虽然表示距`the point`投影屏幕中间的距离。

所以![阿尔法系数](../Images/c2510b8eb65a1f69857e8a822bcf68aa.png)和![贝塔系数](../Images/1d1a8b21b01fac02929a02c73e9d6276.png)， where`s`和`r`are`x`和`y`计算图像上的坐标，`imageWidth`和`imageHeight`是适当的大小。

所以你可以在这张图片上看到

![投影平面](../Images/1651e827fb25a1ac4436afd3bd1e1156.png)

投影平面上任意一点的最终位置为![投影平面上的点](../Images/0ba7e97b43aa2dee1adaede3dc6087af.png)。

然后请求向量的计算是![想要的向量](../Images/50c9814072fa5b47f3e856dfa003984a.png)。

# asp.net - 尝试通过 ajax 访问 Web 服务时出现 HTTP 500 错误

> ID：14094045
> 
> 赞同：2
> 
> 时间：2012-12-30T19:47:44.893
> 
> 标签：asp.net, ajax, jquery

我在单个 Visual Studio 解决方案中有两个简单的项目，以了解 ajax 请求的工作原理。一个是 Web 服务，第二个是使用 Web 服务的项目。以下是相关的代码片段。

**Web 服务 #1st 项目**

*自定义类。*

```
public class JSONResponse
{
    public string message{ get; set; }
    public JSONResponse()
    {
        message = string.Empty;
    }
}
public class returnData
{
    public string UserValue { get; set; }
    public returnData()
    {
        UserValue = string.Empty;
    }
} 
```

*网络方法*

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class Service1 : System.Web.Services.WebService
{

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public JSONResponse returnData(returnData objEnter)
    {            
        JSONResponse jsObj = new JSONResponse();
        jsObj.message =  objEnter.UserValue;
        return jsObj;
    }
} 
```

**消费应用程序 #2nd 项目**

*Javascript对象创建*

```
 $(document).ready(function () {
        $("#btnSubmit").click(function () {
            debugger;
            var objEnter = {
                UserValue: $("#txtMsg").val()
            }
            pushToServer(objEnter, "returnData", "objEnter");
            // pushToServer(object,function to call,name of the object);
        });
    }); 
```

*AJAX 请求*

```
 function pushToServer(dataToPass, functionToCall, jsonObjectName) {
            debugger;
            $.ajax({
                url: "http://localhost:12016/DisplayError.asmx/" + functionToCall,
                type: "POST",
                dataType: "json",
                data: "{" + jsonObjectName + ":" + JSON.stringify(dataToPass) + "}",
                timeout: 30000,
                //async: false,        
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    return data;
                    alert(data);
                },
                error: function (result) {
                    //alert(e);
                    alert(result.status + ' ' + result.statusText);
                }
            });
        } 
```

但是在通过提琴手检查时，我得到以下**HTTP 500 Error**。

```
[InvalidOperationException: Request format is unrecognized for URL unexpectedly ending in &#39;/returnData&#39;.]
   System.Web.Services.Protocols.WebServiceHandlerFactory.CoreGetHandler(Type type, HttpContext context, HttpRequest request, HttpResponse response) +546417
   System.Web.Services.Protocols.WebServiceHandlerFactory.GetHandler(HttpContext context, String verb, String url, String filePath) +212
   System.Web.Script.Services.ScriptHandlerFactory.GetHandler(HttpContext context, String requestType, String url, String pathTranslated) +47
   System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig) +203
   System.Web.MapHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +128
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184 
```

**Chrome 控制台**出现以下错误，

```
XMLHttpRequest cannot load http://localhost:12016/DisplayError.asmx/returnData. Origin http://localhost:12196 is not allowed by Access-Control-Allow-Origin. 
```

Web 服务在端口 12016 上运行，项目在端口 12196 上。

我无法理解导致错误的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:32:34.813

在 .NET Framework 1+ 中，出于安全原因[，默认情况下 HTTP GET 和 HTTP POST 都被禁用。](http://support.microsoft.com/default.aspx?scid=kb;en-us;819267)确保更改应用程序 web.config 以启用 Web 服务调用的 Get/Post：

```
<configuration>
    <system.web>
    <webServices>
        <protocols>
            <add name="HttpGet"/>
            <add name="HttpPost"/>
        </protocols>
    </webServices>
    </system.web>
</configuration> 
```

由于[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您的 ajax 调用也有可能失败。将您的应用程序放在两个不同的端口上，浏览器会假定它们是不同的域并阻止 ajax 调用服务！您可以在同一域上托管两个应用程序，也可以在 Web 服务应用程序中启用[CORS ：](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin","*");
} 
```

# java - 如何将文件序列化为字节或其他 java 结构并在 RPC 中发送

> ID：14094047
> 
> 赞同：1
> 
> 时间：2012-12-30T19:47:55.120
> 
> 标签：java, file, serialization, tcp, zeromq

我需要读取一个包含简单脚本的文件，例如“test.sh”或“test.cmd”。

使用 Java，我需要对其进行序列化并通过 TCP/IP（使用 JAXB + ZeroMQ）通过 TCP/IP 将其发送到网络中的另一个节点。

获取文件并将其序列化为字节，然后将其转换回另一端的文件（接收序列化字节的节点）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T20:45:55.753

假设文件足够小以适合内存而没有任何问题，那么该`InputStream.read(byte[] b, int off, int len)`方法可能就是您正在寻找的方法。该方法`len`从输入流中最多读取字节数据到`b`指定偏移量的字节数组中，`off`并返回实际读取的字节数。该方法不提供任何保证，仅保证只要尚未到达文件末尾且没有错误，就会读取至少一个字节，因此您必须循环调用此方法并检查返回值为了更新后续调用的偏移量。

将数据写回文件就像调用`OutputStream.write(byte[] b)`.

# java - 有没有办法从 Spring 的 task:scheduled-tasks 中获取元数据？

> ID：14094049
> 
> 赞同：0
> 
> 时间：2012-12-30T19:47:59.493
> 
> 标签：java, spring, scheduled-tasks

我正在使用 xml 格式的 Spring[计划任务](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)（特别是在 25.4.3 The 'scheduled-tasks' 元素下）

有没有办法从此任务调度程序获取元数据，例如“最后执行时间”、“最后完成时间”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:41:17.777

不，不是我知道的。但如果它确实让我感到惊讶，因为它只是 Java 5 执行程序服务的一个薄层。

我们曾经有类似的要求（找出计划任务接下来将在什么时间运行）并最终`org.springframework.scheduling.config.ScheduledTaskRegistrar`通过反射深入研究。也许这是一个起点。

# php - 使用 'count' php-side 计算行数有什么缺点吗

> ID：14094051
> 
> 赞同：0
> 
> 时间：2012-12-30T19:48:07.320
> 
> 标签：php, mysql

只是想知道我在计算查询中返回的行数时是否会遇到任何问题，如下所示。

```
$stm = $dbh->prepare("SELECT * FROM `mytable`");
$stm->execute();

$data = $stm->fetchAll(PDO::FETCH_ASSOC);

echo "rows: ".count($data); 
```

与使用相反

```
$stm = $dbh->prepare("SELECT COUNT(*) FROM `mytable`");` 
```

性能方面，这更好，并且对于相对较小的数据库（不超过 1k 行）会导致任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T19:52:49.683

使用 SQL`select count(*) ...`只返回一行，而`select * ...`返回多行。所以会有很大的通信开销。此外，如果您没有`where`子句，服务器可能只查找行数。相反，PHP 必须完全计算行数。

对于小型数据库，您可能不会注意到差异，但从一开始就注意性能并没有什么坏处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T19:53:02.307

使用`COUNT(*)`会好很多。MySQL 不需要访问所有数据，数据也不会发送到客户端。

阅读[`COUNT(*)`](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count)MySQL 手册。

# sqlite - SQLite 的 F# 类型提供程序？

> ID：14094052
> 
> 赞同：12
> 
> 时间：2012-12-30T19:48:09.600
> 
> 标签：sqlite, f#, type-providers, f#-3.0

我已经搜索了上个月左右，但无济于事。Fsharpx、F# powerpack、codeplex、github、fssnip.net、hubfs.net、System.Data.SQLite、dba.stackexchange.com、F# 和 SQLite 论坛、博客等都是空的。截至今天，公共领域中不存在 SQLite 的 F# 类型提供程序。你能证明我错了吗？

假设没有人可以证明我错了，我的下一步是为 SQLite 创建一个 F# 类型提供程序，我对自己的能力不是很有信心（我会完成它，但它不会很漂亮，它会比熟悉 F# 的人付出更多的努力），但这将迫使我学习如何。我是 F# 的学生，还不是专业人士。我也从未在公共领域中或为公共领域创造过任何东西。我应该在 GitHub 上尝试吗？还是这种矫枉过正，解决方案将足够简单，可以在此线程中发布各种代码的答案/解决方案（以及 fssnip.net 上的最终、最终优雅的解决方案）？

PS - 我希望 GlennFerrieLive 对这篇文章感兴趣，因为他[为 FSharp Type Providers 做了一个项目想法？[关闭]](https://stackoverflow.com/questions/7869983/project-ideas-for-fsharp-type-providers)

顺便说一句 - 非常感谢本网站和其他网站上所有非常乐于助人的人，F# 很棒，感谢 Don Syme！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-02T12:46:01.023

只是让您知道，[我的 SQL 类型提供程序](https://github.com/fsprojects/SQLProvider)现在支持 SQLite，请随时贡献和帮助测试，它还没有准备好生产。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-30T21:13:36.647

Entity Framework 支持 sqlite，因此您应该能够`.edmx`为您的数据库模式创建一个文件，然后使用[EDMX 类型提供程序](http://msdn.microsoft.com/en-us/library/hh361038.aspx)来生成您的类型。

您可以通过[System.Data.SQLite 插件](http://system.data.sqlite.org/)`.edmx`使用 Visual Studio 中提供的设计时支持来创建文件- 请参阅之前的 SO 帖子：[How to create an Entity Framework model from an existing SQLite database in Visual Studio 2008 ?](https://stackoverflow.com/questions/2514785/how-to-create-an-entity-framework-model-from-an-existing-sqlite-database-in-visu)

最后，CodeProject 有一篇关于在 Visual Studio 中使用 SQLite 的好文章；它与 F# 无关，但可能对一般背景信息有用：[Using SQLite Embedded Database with Entity Framework and Linq-to-SQL](http://www.codeproject.com/Articles/236918/Using-SQLite-embedded-database-with-entity-framewo)。

# sql - ON 条件是否限制连接选择的工作量？

> ID：14094054
> 
> 赞同：3
> 
> 时间：2012-12-30T19:48:30.440
> 
> 标签：sql, sql-server

我使用 Microsoft SQL Server，但我想这个问题适用于所有 SQL 语言。如果我有：

```
SELECT OrderHeaderID
    ,isNull(Qty,0) AS Qty
FROM OrderHeader
LEFT JOIN (
    SELECT OrderHeaderID
    ,Sum(Qty) AS Qty
    FROM OrderDetail
    GROUP BY OrderHeaderID
) OrderDetail
ON OrderDetail.OrderHeaderID = OrderHeader.OrderHeaderID
WHERE Criteria = 'X' 
```

那么在应用标准之前，是否会对所有 OrderDetail 行执行 GROUP BY？换句话说，我应该注意将标准应用于 GROUP BY 以及外部 SELECT 吗？

顺便说一句，如果您看到这行代码有任何改进，请也发表评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T20:04:13.640

关于您的第一个问题，很难说出优化器在编译查询时发现了什么。我认为您的内部聚合首先执行。

关于你的第二个问题，这两种选择可能更容易理解

```
SELECT OrderHeader.OrderHeaderID
      ,isNull(Sum(OrderDetail.Qty),0) AS Qty
 FROM OrderHeader
      LEFT JOIN OrderDetail
        ON OrderDetail.OrderHeaderID = OrderHeader.OrderHeaderID
WHERE OrderHeader.Criteria = 'X'
GROUP BY OrderHeader.OrderHeaderID 
```

或者

```
select OrderHeaderId,
       IsNull(
         (Select sum(qty) from OrderDetails d 
           where d.OrderHeaderId = OrderHeader.OrderHeaderId)
         ,0) as qty
  from OrderHeader
 where Criteria='X' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:01:05.793

数据库可以自由地执行查询，只要它返回正确的结果。这就是为什么 SQL 被称为声明性语言的原因：您指定您想要的，而不是您想要的方式。

`Criteria = 'X'`但是，在这种情况下，如果您移至`left join`. 然后查询将包括没有任何 OrderDetails 的 OrderHeaders。所以数据库不能自由地做你建议的重构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T20:07:42.390

答案是“是” - 将左连接表的非键条件移动到`ON`子句中将提高性能，因为行将尽早从结果中删除，而不是在所有连接后让 where 子句过滤它进行，尤其是在对其他表进行进一步连接时。

# c++ - 将float转换为int，当int超出范围时，设为max int或min int

> ID：14094056
> 
> 赞同：1
> 
> 时间：2012-12-30T19:48:32.710
> 
> 标签：c++, sse, typeconverter

我想找到一种方法，当溢出范围时转换`float`为max或 min 。`int``int``int``int`

现在我有这样的方法

```
float x, mul = 1e5; 
int y; 

if (x * mul > (float)max_int_value)
    y = max_int_value;
else if (x * mul < (float)min_int_value)
    y = min_int_value;
else
    y = (int)x * mul; 
```

但我认为这很慢（需要两个比较），我想在转换许多值时使用 SSE 来加快速度。

我想得到一个更快的方法，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T06:06:29.300

您可以使用此代码计算具有 4 个浮点数的向量。您必须在开头包含“emmintrin.h”

```
float x[4]; // input vector
float y[4]; // result vector

__m128 mMaxInt = _mm_set1_ps((float)max_int_value);
__m128 mMinInt = _mm_set1_ps((float)min_int_value);
__m128 mMul = _mm_set1_ps(1e5);
__m128 mX = _mm_loadu_ps(x);
__m128 mY;

mY = _mm_mul_ps(mX, mMul);
mY = _mm_max_ps(mMinInt, mY);
mY = _mm_min_ps(mMaxInt, mY);

_mm_store_ps(y, mY); 
```

# java - 如何使用 sphinx 从 JSGF 语法中检索标签？

> ID：14094057
> 
> 赞同：2
> 
> 时间：2012-12-30T19:48:39.250
> 
> 标签：java, sphinx, cmusphinx, jsapi

我用 Java 编写了一个应用程序，它利用 CloudGarden API 来解析 JSAPI 语法，从语法规则返回标签，然后相应地处理这些标签。CloudGarden API 的问题在于它对 Windows 的依赖。我需要一个可以执行相同任务的跨平台库。我不需要语音合成，也不需要语音识别。本质上，一个字符串被传递给包含一些转录语音的程序。我需要针对我的语法文件解析这个字符串以检索动作标签（JSGF 语法规则中 { } 之间的文本）。然后我的程序使用检索到的动作标签来执行其他功能。

我一直在寻找一个可以解析符合 JSAPI 的 JSGF 语法文件的免费库。我发现的唯一现实的替代方案是语音识别引擎 Sphinx/CMUSphinx。我一直在研究 Sphinx，它把我带到了他们文档中的 ActionTagsParser 类。我不知道如何解析语法和检索标签。谁能指出我正确的方向或向我解释？

谢谢你，诺亚

编辑：

是否需要为要解析的语法配置 Sphinx？在以下代码中，RuleParse 始终计算为 NULL。RuleGrammar 和文本是有效的。

```
 try {
        if(recognizer == null){
            recognizer = new BaseRecognizer();
            recognizer.allocate();
        }

        rg.setEnabled(true);
        recognizer.commitChanges();

        RuleParse p = rg.parse(text, null);
        if (p == null) {
            return null;
        }

        return p.getTags();
    } catch (Exception ex) {
        ex.printStackTrace();
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-24T14:52:00.270

根据该项目的论坛，解析标签的能力已被删除。

[论坛帖子讨论它不是一个功能。](http://sourceforge.net/p/cmusphinx/discussion/sphinx4/thread/55ca3a3d/#bb60)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:03:31.420

我们删除了标签，请参阅下面的 Travis 回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T19:09:38.707

我昨天写了一个库，这可能是你需要的：

链接-> [https://github.com/goxr3plus/JSFG-Grammar-Rules-Parser-Library-for-Sphinx4-5](https://github.com/goxr3plus/JSFG-Grammar-Rules-Parser-Library-for-Sphinx4-5)

使用它的示例代码（**您可以在 github 上找到更多示例**）：

```
List<String> rules;

rules = JSGFGrammarParser.getAllGrammarRules(JSGFGrammarParserTester.class.getResourceAsStream("grammar1.gram"), false);
System.out.println("Grammar Rules , without definitions: " + rules + "\n");

rules = JSGFGrammarParser.getAllGrammarRules(JSGFGrammarParserTester.class.getResourceAsStream("grammar1.gram"), true);
System.out.println("Grammar Rules , with definitions: " + rules + "\n"); 
```

# c - 三元运算符和类型转换的混淆

> ID：14094060
> 
> 赞同：7
> 
> 时间：2012-12-30T19:49:08.863
> 
> 标签：c, type-conversion, ternary-operator, void-pointers

我经历了这个问题 -

为什么 : 的结果与 :`1 ? (int *)0 : (void *)0`
的结果不同 `1 ? (int *)0 : (void *)1`

它有什么不同？应该是`0`或`(int*)0`。
如何检查结果？
我们可以在哪里使用这种类型的表达？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-30T19:59:14.510

唯一的区别在于类型：第一个返回 an `int *`，第二个返回 a `void *`。

从 C11 标准，§6.5.15*条件运算符*，¶6：

> 如果第二个和第三个操作数都是指针，或者一个是空指针常量而另一个是指针，则结果类型是指向一个类型的指针，该类型由两个操作数引用的类型的所有类型限定符限定。**此外，如果两个操作数都是指向兼容类型或兼容类型的不同限定版本的指针，则结果类型是指向复合类型的适当限定版本的指针；如果一个操作数是空指针常量，则结果具有另一个操作数的类型**；否则，一个操作数是指向 的指针**`void`**或限定版本**`void`**，在这种情况下，结果类型是指向 的适当限定版本的指针**`void`**。

（强调我的）

请记住，指向 non- 的指针`void`不能是*空指针常量*，而只能是*空指针*。C11 §6.3.2.3*指针*，¶3：

> 值为 0 的整数常量表达式，或转换为 type 的此类表达式**`void *`**称为*空指针常量*。^(66))如果将空指针常量转换为指针类型，则生成的指针（称为*空指针*）保证与指向任何对象或函数的指针不相等。
> 
> ^(66) 宏**`NULL`**在**`<stddef.h>`**（和其他头文件）中定义为空指针常量；见 7.19。)

所以在这里：

```
1 ? (int *) 0 : (void *) 0 
```

`(int *) 0`只是一个*空指针*，`(void *) 0`而是一个*空指针常量*，因此结果具有类型`int *`（“*如果一个操作数是空指针常量，则结果具有另一个操作数的类型*”）。

在这里：

```
1 ? (int *) 0 : (void *) 1 
```

没有*空指针常量*（只有*空指针*，第一个），因此结果具有复合类型`void *`("*如果两个操作数都是指向兼容类型或兼容类型的不同限定版本的指针，则结果类型是指向复合类型的适当限定版本*")。

结果有不同的类型，但它们都是*空指针*。另请注意，结果*永远不会* `0`像您在问题中所说的那样，它始终是一个指针。

不幸的是，没有标准的方法来查看 C 中的差异，C++ 对此有一些支持（`typeinfo`）但结果不同。

> 我们可以在哪里使用这种类型的表达方式？

我想不出语言的这个晦涩角落的有用和具体用途。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T20:55:36.730

所以[effeffe](https://stackoverflow.com/a/14094142/1119701)已经回答了为什么这两种表达方式不同：

```
1 ? (int *) 0 : (void *) 0  // yield (int *) 0
1 ? (int *) 0 : (void *) 1  // yield (void *) 0 
```

现在回答这个问题：

> 如何检查结果？

`gcc`您可以使用扩展`typeof`和`__builtin_types_compatible_p`内置功能：

```
// The two expressions differ
printf("%d\n", __builtin_types_compatible_p(typeof(1 ? (int *) 0 : (void *) 0), typeof(1 ? (int *) 0 : (void *) 1)));

// First expression yield (int *) 0
printf("%d\n", __builtin_types_compatible_p(typeof((int *) 0), typeof( 0 ? (int *)0 : (void *)0  )));

// Second expression yield (void *) 0
printf("%d\n", __builtin_types_compatible_p(typeof((void *) 0), typeof( 1 ? (int *)0 : (void *)1  ))); 
```

# string - 放入变量中的所有值都被视为字符串吗？

> ID：14094063
> 
> 赞同：1
> 
> 时间：2012-12-30T19:49:18.417
> 
> 标签：string, variables, python-3.x, int

在python中，如果我为x（x = 1）分配一个1，那么那个1是否每次都被视为一个字符串？

我不明白为什么数字不被视为数字并且必须转换为可识别的整数以进行数学运算。不断地来回更改变量值似乎很麻烦。

谢谢你

第 2 部分：圆程序区域的一些代码：

```
def chooseDim ( ):
    **choice = input ('Do you need to find radius or area? ')
    if choice == 'A' or 'a':
        area = 0                [This part of the prog is the culprit, specifically the
        area = int(area)         "choice" variable prior to the If conditional. The If 
        areaSol ( )**           keeps reading the condition as True no matter what value
                                "choice" is. It has to do w/the "or" condition. When I let
                                "choice" be one value, it's fine, but if I code
                                "if choice = 'A' or 'a'"  the prog evals the If as True                  
                                every time. Am I not coding the "or" statement right?]

    elif choice == 'R' or 'r':

        radSol ( )

    else:
        print ('Please enter either A/a or R/r.')
        chooseDim ( ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:08:53.000

不，你说的不正确。Python 是动态类型的，这意味着虽然变量*没有*类型，但它的值确实有类型。您可以通过使用该函数轻松检查该`type`值的类型：

```
>>> x = 1
>>> type(x)
<class 'int'>
>>> x = '1' # storing a different value in x
>>> type(x)
<class 'str'>
>>> type(1) # type() works on the value, so this works too
<class 'int'>
>>> type('1')
<class 'str'> 
```

然而，Python 也是强类型的，这意味着不会进行动态类型转换。这就是在执行算术运算时必须将字符串显式转换为数字的原因：

```
>>> 1 + '1' # int does not allow addition of a string
Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    1 + '1'
TypeError: unsupported operand type(s) for +: 'int' and 'str'

>>> '1' + 1 # on the other hand, int cannot be converted to str implicitely
Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    '1' + 1
TypeError: Can't convert 'int' object to str implicitly 
```

### 编辑

要响应您发布的代码，您的 if 是这样的：

```
if choice == 'A' or 'a': 
```

这会检查是否`choice == 'A'`（如果`choice`等于`'A'`），**或者**是否`'a'`评估为`True`。作为`'a'`一个非空字符串，它总是会计算为真，所以条件总是真。你想写的是这样的：

```
if choice == 'A' or choice == 'a': 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:51:37.743

不，所有值都不会转换为字符串。Python 虽然是“动态类型”的，因为变量在其生命周期内可能包含不同类型的值，但通常对操作非常严格（例如，您不能只将数字连接到字符串上）。如果将数字分配给变量，则该值将是数字。

如果您对特定代码有问题，发布它怎么样？

# html - 我怎样才能浮动 div 以便它们扩展到它们的容器之外？

> ID：14094069
> 
> 赞同：2
> 
> 时间：2012-12-30T19:50:03.537
> 
> 标签：html, css, css-float

```
<div class="story-container">
  <div class="story-box">
    <h3>News Item #2</h3>
    <h2>This is my second news item!!</h2>
  </div>
  <div class="story-box">
    <h3>Technical Development</h3>
    <h2>See Muppets on Your Band-Aid With New AR App</h2>
  </div>
  <div class="clear"></div>
</div> 
```

我的 CSS 是：

```
.story-container {
    background: none repeat scroll 0 0 blue;
    margin: 0 auto;
    width: 1000px;
}

.story-box {
    float: left;
    margin-right: 10px;
} 
```

我希望`story-box`'s 在每个外部旁边，但目前他们不这样做。我怎样才能做到这一点？

**编辑**

我想`story-box`和容器一样是 1000px。这样，它`story-box`占据了容器的整个宽度，然后下一个在技术上超出了界限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:55:11.337

与其依靠`float`/`clear`来扩展`story-container`你的界限，不如添加一个新类`story-row`并将其宽度设置为非常大。

```
<div class="story-container">
  <div class="story-row">            
      <div class="story-box">
        <h3>News Item #2</h3>
        <h2>This is my second news item!!</h2>
      </div>
      <div class="story-box">
        <h3>Technical Development</h3>
        <h2>See Muppets on Your Band-Aid With New AR App</h2>
      </div>
  </div>
</div>
​

.story-container {
    background: none repeat scroll 0 0 blue;
    margin: 0 auto;
    width: 1000px;
    height: 100px;
    position: relative;
    overflow: hidden;
}

.story-row {
  width: 2000px; /* num of stories by 1000px */
  position: absolute;
}

.story-box {
    float: left;
    margin-right: 10px;
    position: relative;
    width: 1000px;
    height:100px;
} 
```

[http://jsfiddle.net/39uR8/17/](http://jsfiddle.net/39uR8/17/)

现在，如果您想使用 javascript 或其他方式将下一个故事滚动到视图中，您只需`story-row`每次调整 -1000px 的位置即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:27:44.910

给`width`你一个`.story-box`

编辑：`width: 490px;`如果你想要半宽试试

![在此处输入图像描述](../Images/2dcd8d385b03aeea2fca70edeb618385.png)

或者`width: 990px;`有这个： ![在此处输入图像描述](../Images/92d8958d3dcb57ddeaa3a745fb1500bd.png)

# java - 为什么我的 jar 无法从任务调度程序打开

> ID：14094071
> 
> 赞同：0
> 
> 时间：2012-12-30T19:50:08.503
> 
> 标签：java, windows-7

我在登录后尝试启动一个 jar。此操作由 Windows 中的任务计划程序执行。当我从他自己的目录运行这个 jar 时，它可以正常工作。当我登录时，JVM 给我以下错误：“找不到主类”和我的 jar 目录。我已经在清单中设置了主类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:19:10.583

我可以建议您使用描述的类路径和其他环境属性创建 .bat 文件。缺少 JAVA_HOME 属性的最常见问题。
带有描述的 JAVA_HOME 的 .bat 文件将帮助您避免任何此类问题。

另一种方法 - 只需检查 JAVA_HOME 是否设置为您的系统环境设置。

# c++ - 浮点运算性能 C++

> ID：14094072
> 
> 赞同：4
> 
> 时间：2012-12-30T19:50:10.420
> 
> 标签：c++, performance, performancecounter

> **可能重复：**
> [浮点除法与浮点乘法](https://stackoverflow.com/questions/4125033/floating-point-division-vs-floating-point-multiplication)

最近，我编写了一个程序来计算我的计算机计算实际乘法、除法和加法所需的时间。

为此，我使用了函数 QueryPerformanceFrequency 和 QueryPerformanceCounter 来获取时间间隔。

我已经使用 6,000,000 次迭代测试了我的程序：6000000 次乘法、除法和求和（使用浮点变量），并得到以下结果：

```
O.S = Windows Vista (TM) Home Premium, 32-bit (Service Pack 2)
Processor = Intel Core (TM)2 Quad CPU Q8200
Processor Freq = 2.33 GHz

Compiler = Visual C++ Express Edition

    nº iterations                              time in micro seconds
    6000000 x real    mult + assignment ->     15685.024214 us
    6000000 x real     div + assignment ->     51737.441490 us
    6000000 x real     sum + assignment ->     15448.471803 us
    6000000 x real           assignment ->     12987.614348 us

    nº iterations                              time in micro seconds 
    6000000 x real                mults ->      2697.409866 us
    6000000 x real                 divs ->     38749.827143 us
    6000000 x real                 sums ->      2460.857455 us

    1 Iteration                          time in nano seconds
    real                 mult ->         0.449568 ns
    real                  div ->         6.458305 ns
    real                  sum ->         0.410143 ns 
```

除法是否可能比乘法慢六倍，加法实际上等于乘法（~0.42 ns）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:55:08.857

是的。如果您曾经手动进行过除法，那么您就会知道它涉及很多子操作。

至于加法与乘法的速度大致相同：它们与设置操作数和存储结果有关，而不是实际计算。通过使用 SSE 指令进行加法和乘法编译（在 x86 上），您可能能够在它们之间获得更多差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:10:29.823

使用现代 CPU，乘法的速度与加法的速度大致相同。

在英特尔的 Sandy Bridge 上，使用 SSE 进行乘法运算的时间是加法运算时间的 4/3。但是考虑到 ILP，可以同时处理多条指令，它们实际上需要相同的时间。在同一个 CPU 上，使用 ILP，单精度除法需要 7-14 倍的时间！

资料来源：[Agner Fog 的说明表](http://www.agner.org/optimize/)。在他的网站上有很多非常好的读物。

# ios - 在 Cocos2d 中自动调整布局大小

> ID：14094074
> 
> 赞同：3
> 
> 时间：2012-12-30T19:50:14.657
> 
> 标签：ios, cocos2d-iphone, autolayout, cclayer

我正在尝试在 Cocos 2D 中制作一个菜单，如果它的大小发生变化，它将自动重新布局。使用 UIKit，您可以设置自动调整大小选项（以编程方式或通过 Interface Builder），我喜欢做类似的事情。Cocos2D 中是否存在用于布置 CCLayers（或 CCNodes）的选项？

# batch-file - AutoHotKey 的键盘快捷键

> ID：14094084
> 
> 赞同：0
> 
> 时间：2012-12-30T19:51:24.157
> 
> 标签：batch-file, autohotkey

我知道如何为单个键设置键盘快捷键。

例如：`windows`+`z`将打开该命令。

```
#z::Run www.autohotkey.com 
```

如果用户按`z``z`两次执行不同的命令，有没有办法？

```
zz::Run www.google.com 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:04:17.613

我找到了更好的方法，

它不会是同一个键，但我们可以使用多个按键。

```
1::
Input Key, L1

if Key=z
    {
        ;your code
}
if Key=u
    {
        ;your code
} 
```

# java - 重命名预编译类文件的导入 (Java)

> ID：14094086
> 
> 赞同：3
> 
> 时间：2012-12-30T19:51:27.823
> 
> 标签：java, class, minecraft, bytecode-manipulation, import

**问题是什么？** 我是一名 Minecraft 服务器管理员/服务器主机/插件开发人员，但发现在核心游戏的每个新版本上都必须更新我自己的个人插件是一件绝对的烦恼。并非总是这样，过去我已经让插件跨 20 个版本工作而没有中断。可以想象，每个月必须坐下来更新 40 个插件是我生活中不必要的烦恼，因为我过去从未这样做过。

**是什么导致了这个问题？** 在每个新版本中，它们都要求您在编译的 jar 文件中使用不同的导入，从而强制破坏任何过时（但可能仍在工作）的 jar 文件。相信我。我可以阅读错误日志并知道何时需要实际下载新更新。我现在不需要保护自己。这只是一个游戏，我没有太多的兴趣。

**那么我想怎么做呢？** 为此，我想制作一个简单的程序来自动更新我所有的插件。（插件以打包的 .jar 文件的形式出现。）它需要执行以下操作：

1.  获取 X_Folder 中所有 jar 文件的列表
2.  对于每个 jar 文件，将所有类都封装起来。
3.  对于每个类文件，搜索 Y_STRING 的任何实例并将其替换为 Z_STRING。
4.  确保所有内容都正确放回 jar 文件中。
5.  完毕。

**问题？** 我将如何编写类文件编辑方法？我什至不知道如何开始。

**免责声明** 很抱歉听起来我还没有开始研究这个。我只是，没有任何字节码操作的经验。我看过一些例子，但还没有看到任何关于重命名导入的内容。希望这里有人可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T20:48:06.390

> 1.  获取 X_Folder 中所有 jar 文件的列表
> 2.  对于每个 jar 文件，将所有类都封装起来。
> 3.  对于每个类文件，搜索 Y_STRING 的任何实例并将其替换为 Z_STRING。
> 4.  确保所有内容都正确放回 jar 文件中。
> 5.  完毕。

1）这是基本的文件操作。查看[`java.io.File#listFiles()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#listFiles%28%29)或其重载。

2) JAR 文件是具有特定内容的 ZIP 文件。查看[`java.util.jar.JarFile`](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarFile.html)或[`java.util.zip.ZipInputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipInputStream.html)；遍历其条目 ( [`JarFile#entries()`](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarFile.html#entries%28%29)) 并解压缩 ( ) 中的每个类文件[`JarFile#getInputStream(ZipEntry)`](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarFile.html#getInputStream%28java.util.zip.ZipEntry%29)。

3) 类文件是二进制格式，但它的文档非常好。一般布局记录在维基百科上：[http ://en.wikipedia.org/wiki/Java_class_file#General_layout](http://en.wikipedia.org/wiki/Java_class_file#General_layout)

特别感兴趣的是常量池，它从类文件的第 10 个字节开始，枚举类文件中引用的所有常量。它再次记录在 Wikipedia 上：[http](http://en.wikipedia.org/wiki/Java_class_file#The_constant_pool) ://en.wikipedia.org/wiki/Java_class_file#The_constant_pool 。它的条目数存储在字节 8 和 9（大端）中。

常量池中特别感兴趣的是字符串和类引用。

字符串由第一个字节标识`1`。接下来的两个字节是字符串的字节长度，剩下的字节是 UTF-8（几乎）。与 UTF-8 不同，更高的平面存储为代理对（6 个字节而不是 4 个），并且代码点 0 被非规范化存储。

类引用只不过是指向常量池的指针，指向类的完全限定名。完全限定名称使用正斜杠而不是点来存储，以分隔完全限定名称 ( `java/lang/Object`)。它被标记为类型 7。

常量池中的其他条目：类型 3,4,9-12 是四字节，类型 7 和 8 是两字节。类型 5 和 6 是 8 字节，但它们也占用常量池中的两个插槽。

如果常量池的字节长度发生变化，类文件的其余部分似乎并不介意。在常量池末尾添加条目似乎也很安全（确保更新常量池长度）。

4) 由于 jar 文件只是一个 zip 文件，因此您只需将原始文件与更新后的内容重新打包即可。我不希望这可以就地实现，因此您可能需要一些文件改组。研究[`java.util.zip.ZipOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipOutputStream.html)实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:15:29.430

> 我可以反编译他们的插件，将它们加载到 IDE 中并手动更新它们，但我希望有一个更全局的解决方案，你知道吗？此外，这是学习 Java 新技能的好机会。

我认为你应该学习的技能是：

*   构建工具（例如 Ant 或 Maven），允许您从源代码重新构建，将代码加载到 IDE 中，以及

*   如何使用流编辑器（例如 sed 或 awk）来更新您的源代码或使用宏预处理器（例如 cpp 或 m4）来生成源代码。

但是，鉴于 Minecraft 平台的性质，我不建议将其作为学习 Java/Java 技能的好地方。当然，破解/调整/按摩字节码文件是大多数专业 Java 开发人员通常不需要或使用的技能。

# jquery - 使用 Jquery onClick 如何更改多个元素？

> ID：14094089
> 
> 赞同：2
> 
> 时间：2012-12-30T19:51:49.310
> 
> 标签：jquery, replacewith

好的，我一直在尝试研究如何做到这一点并且失败了。我认为使用 Jquery replaceWith 是可能的，但不知道如何实现它。

基本上我有这些导航图标：

```
<li><a href="#navclose" class="open"><span>MAINSTREAM</span><img src="images/stacks/mainstream.png" alt="MAINSTREAM" /></a></li>
    <li><a href=""><span>THOUGHT&nbsp;MENU</span><img src="images/stacks/thoughtmenu.png" alt="THOUGHTMENU" /></a></li>
            <li><a href="#"><span>Redrawing&nbsp;the&nbsp;Maps</span><img src="images/stacks/redrawnmaps.png" alt="Photoshop" /></a></li> 
```

单击每个图标时，我希望它更改信息（将网页加载到主 iframe 内容中），我要更改的项目是 URL 'http://www.redrawingthemaps.org.uk/' 和日期信息' 2012 年 6 月在这里发起：

```
 <div id="navclose">
    <div id="navfunction" >
    <div id="searchbar"><ul class="navfunction2">
    <li>http://www.redrawingthemaps.org.uk/</li>
    </ul></div>
    <ul class="navfunction">
    <li style="margin-right:-2px;"><a href="#navclose" class="close">Close</a></li>
    <li><a href="http://www.redrawingthemaps.org.uk/" target="_blank">Open In New Window</a>    </li>
    <li>Initiated June 2012</li>
    </ul>
    </div>
    <div id="navcontent"><iframe src="http://www.redrawingthemaps.org.uk/" width="1000px" height="3000px" frameborder="0"></iframe></div>
    </div>

<script>
    $(function() {
    $('a.open').click(function() {
        $($(this).attr('href')).slideDown(500);
        return true;
    });
$(function() {
    $('a.close').click(function() {
        $($(this).attr('href')).slideUp(500);
        return false;
    });});
});});
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:58:40.060

**更新了你所有的可能性**

根据文本类型查找包含文本的所有 html 元素并进行更改。

如果您需要多次更改，请创建一个函数。

```
var old = "http://www.redrawingthemaps.org.uk";
var new = "New data";

$('li:contains("'+old+'")').each(function() {
    $(this).html(new);
});

$('a[href="'+old+'"]').each(function() {
    $(this).attr("href",new);
});

$('iframe[src="'+old+'"]').each(function() {
    $(this).attr("src",new);
}); 
```

# python - Scrapy 反向爬行

> ID：14094093
> 
> 赞同：0
> 
> 时间：2012-12-30T19:52:08.337
> 
> 标签：python, scrapy, web-crawler

蜘蛛从一个页面中抓取一些特定的链接。然后它在每个页面中搜索一个 youtube 链接和一个名称以识别它（页面标题）。它确实找到了我需要的所有链接，但是顺序很奇怪。

蜘蛛从下到上收集所有页面信息。我怎样才能让它从上到下？

我的蜘蛛： http: [//pastebin.com/5qLKr6ky](http://pastebin.com/5qLKr6ky)

输出： http: [//pastebin.com/j4h4aRMs](http://pastebin.com/j4h4aRMs)

起始页：它在蜘蛛中（我不能发布超过 2 个链接，因为我是新用户）

我希望输出的顺序与起始页中的顺序相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:14:04.923

如果您查看其中一个链接页面的页面源，它​​包含指向上一个和下一个视频的链接。这些链接采用这种形式：

```
<div class="entry clearfix">
...
<b>Next:</b> The TCP/IP Model  &gt;&gt;</a><br />
<center><iframe width="640" height="360" src="http://www.youtube.com/embed/lSK1d8fZyEw?rel=0" frameborder="0" allowfullscreen></iframe></center></p>
</div> 
```

因此，您会收到重复的条目（尽管链接不同）。您可能需要开发一个更明确的 xpath 来过滤掉这些其他链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:56:26.470

我不知道scrapy，但我知道你可以很简单地通过调用来反转python中的列表或其他可迭代对象[`reversed`](http://docs.python.org/2/library/functions.html#reversed)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T21:39:49.340

哦，您的意思是您需要生成的 Youtube 链接按照它们放置在起始页上的顺序？

链接是随机顺序的，因为 Scrapy 并行发出请求

```
class ProfessormesserSpider(BaseSpider):

    allowed_domains = ['www.professormesser.com']
    start_urls = ['http://www.professormesser.com/n10-005/free-network-plus/']

    def parse(self, response):
        # extract urls from start page and REMEMBER THEIR ORDER(!!!)
        hxs = HtmlXPathSelector(response)
        for i, link in enumerate(hxs.xpath("//td[@valign='center']/div/descendant::a/@href")):
            # "i" is the link's order
            yield yield Request(url=link, callback=self.parse_item, meta={'i': i})

    def parse_item(self, request):
        order = response.request.meta["i"]
        ... 
```

# c# - C#上跨平台RPC的解决方案

> ID：14094096
> 
> 赞同：0
> 
> 时间：2012-12-30T19:52:12.337
> 
> 标签：c#, .net, wcf, rpc, remoting

我正在开发一个有四个阶段的游戏服务器：AccountServer、CharServer、InterServer 和 ZoneServer，它们是不同的进程，可能会留在不同的机器上。它们需要相互通信以同步数据、处理服务器更改和各种其他“时间关键”操作。

为此，我正在寻找一种 .Net 的 RPC 方法。它必须在 Linux、MacOS 和 Windows 上都可以工作）并且最好使用 TCP/Unix 套接字/命名管道上的二进制数据。我已经考虑了一些解决方案：

*   .Net Remoting：它被称为遗留，我不太了解它的性能影响，不支持轻松的身份验证。
*   WCF：使用 SOAP，速度很慢，因为我每秒应该接到几个电话
*   CORBA：看起来很有希望，但我没有找到 .Net 的任何实现

还有其他解决方案吗？

# objective-c - 为什么这个声音循环不会停止？

> ID：14094100
> 
> 赞同：1
> 
> 时间：2012-12-30T19:52:55.273
> 
> 标签：objective-c, audio, avfoundation, uialertview, avaudioplayer

我在我的应用程序中制作了一个声音循环，当用户按下出现的“确定”按钮时，我想停止`UIAlertView`它。

我有两个问题：

* * *

## 第一的

当我打开断点并为所有异常设置断点时，会出现异常`[audioPlayer play]`但日志上没有显示错误，并且应用程序不会在通过异常“F8-ing”后崩溃，除非没有声音。

* * *

## 第二

我遇到的另一个问题是用户点击“确定”按钮后音频文件不会停止，并且断点显示它确实读取了`[audioPlayer stop]`调用。我不知道是什么导致了这些错误，我所做的似乎无济于事。

* * *

## 代码

```
AVAudioPlayer *audioPlayer;

-(void)done {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Timer Done" message:nil delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
    [alert show];

    [self playAlert];
}

-(void)playAlert {
    NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"Alarm" ofType:@"caf"];
    NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
    audioPlayer.numberOfLoops = -1; //infinite

    [audioPlayer play];
}

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 1) {
        if ([audioPlayer isPlaying]) {
            [audioPlayer stop];
        }
    }
} 
```

请让我知道我能做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:28:06.403

一个明显的问题是您将 nil 作为 UIView 委托传递，因此您将永远不会被回调。

IE

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Timer Done" message:nil delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Ok", nil]; 
```

应该：

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Timer Done" message:nil delegate:self cancelButtonTitle:nil otherButtonTitles:@"Ok", nil]; 
```

另一个问题是 buttonIndex 从零开始。所以在回调中你应该检查零而不是一。

# java - HornetQ：核心 API 生产者和异步消费者问题

> ID：14094101
> 
> 赞同：2
> 
> 时间：2012-12-30T19:53:00.813
> 
> 标签：java, jakarta-ee, jms, hornetq

嗨，我对 HornetQ 比较陌生。我编写了一个测试包，它有一个嵌入式 HornetQ 服务器，带有一个生产者和一个异步消费者。希望我已经正确地完成了实施。现在问题如下...

1.  当我通过 prodcuer 向队列发送消息时，它返回成功，但是当尝试从队列中消费消息时，似乎没有消息被消费。就像消费者不活跃一样。

2.  当我尝试使用该`setSendAcknowledgementHandler`方法时，出现错误：

    ```
    java.lang.IllegalStateException: You can't set confirmationHandler on a connection with confirmation-window-size < 0\. Look at the documentation for more information.
        at org.hornetq.core.protocol.core.impl.ChannelImpl.setCommandConfirmationHandler(ChannelImpl.java:330)
        at org.hornetq.core.client.impl.ClientSessionImpl.setSendAcknowledgementHandler(ClientSessionImpl.java:943)
        at org.hornetq.core.client.impl.DelegatingSession.setSendAcknowledgementHandler(DelegatingSession.java:493)
        at componentsII.QueueProducer.SendMessage(QueueProducer.java:9)
        at componentsII.StartClients.main(StartClients.java:11) 
    ```

检查下面的课程。

**连接和会话**

```
public class QueueConnection {

    private static org.hornetq.api.core.TransportConfiguration transport;
    private static org.hornetq.api.core.client.ClientSessionFactory sharedfactory;
    public static org.hornetq.api.core.client.ClientSession sharedSession;
    private static java.util.HashMap<String,Object> maps;
    private static boolean started= false;

    public static void setMaps(String []key, Object[] value){
        maps= new java.util.HashMap<String, Object>() ;

        if(key.length!=value.length){
            maps=null;
        }else{
            for(int x=0;x<value.length;x++){
                maps.put(key[x], value[x]);
            }
        }

    }

    private static org.hornetq.api.core.client.ClientSession session(){
        try{
        if(sharedSession==null){
            sharedSession=factory().createSession(true,true,0);
        }
        }catch(org.hornetq.api.core.HornetQException e){
            e.printStackTrace();
        }catch(Exception e){
            e.printStackTrace();
        }
        return sharedSession;
    }

    public static synchronized int size(String queueName){
        int count = 0;
        try {
            org.hornetq.api.core.client.ClientSession.QueueQuery result;
            result = sharedSession.queueQuery(new org.hornetq.api.core.SimpleString(queueName));
            count = (int) result.getMessageCount();
        } catch (org.hornetq.api.core.HornetQException e) {
            e.printStackTrace();
        } 
        return count;
    }
    public static void startSession(){
        try{

            if (session() != null || started!=true){
                session().start();
                started=true;
                System.out.println("Client Session started");
            }else{
                System.out.println("Client Session already started"); 
            }
        }catch(org.hornetq.api.core.HornetQException e){
            e.printStackTrace();
        }catch(Exception e){
            e.printStackTrace();
        }
    }

    public static void stopSession(){
        try{
            if (session() != null ){
            session().stop();
            factory().close();
            sharedSession=null;
            sharedfactory=null;
            System.out.println("Client Session stopped");
            }
        }catch(org.hornetq.api.core.HornetQException e){
            e.printStackTrace();
        }catch(Exception e){
            e.printStackTrace();
        }
    }

    private static org.hornetq.api.core.TransportConfiguration TransportConfigs(){
        transport=new org.hornetq.api.core.TransportConfiguration(org.hornetq.core.remoting.impl.netty.NettyConnectorFactory.class.getName(),maps);
        return transport;
    }

    private static org.hornetq.api.core.client.ClientSessionFactory factory(){
        try{
            if(sharedfactory==null){
                org.hornetq.api.core.client.ServerLocator locator=org.hornetq.api.core.client.HornetQClient.createServerLocator(true,TransportConfigs());
                locator.setAckBatchSize(0);
                locator.setReconnectAttempts(3);
                locator.setConfirmationWindowSize(2);
                sharedfactory=locator.createSessionFactory();
            }
        }catch(Exception e){
            e.printStackTrace();
        }
        return sharedfactory;
    }
} 
```

**消费者**

```
public class QueueConsumer {

    public static void Recieve(String queuename){
        try {
          org.hornetq.api.core.client.ClientConsumer consumer = QueueConnection.sharedSession.createConsumer(queuename);
              consumer.setMessageHandler(new msghandler());
        } catch (org.hornetq.api.core.HornetQException e) {
            e.printStackTrace();
        } catch(Exception e){
            e.printStackTrace();
        }
    }

    private static class msghandler implements org.hornetq.api.core.client.MessageHandler {
        @Override
        public void onMessage(org.hornetq.api.core.client.ClientMessage msg) {
            System.out.println("Message consumed ~"+msg.getStringProperty("myMsg"));

        }
    }
} 
```

**制片人**

```
public class QueueProducer {

    public static void SendMessage(String queuename,String msg){
        try{
            QueueConnection.sharedSession.setSendAcknowledgementHandler(new acknowledegeHandler());
            org.hornetq.api.core.client.ClientProducer producer= QueueConnection.sharedSession.createProducer(queuename);
            org.hornetq.api.core.client.ClientMessage message = QueueConnection.sharedSession.createMessage(org.hornetq.api.core.client.ClientMessage.TEXT_TYPE,true);
            message.putStringProperty("myMsg", msg);
            producer.send(queuename,message);
            System.out.println("Message Sent to "+queuename);

        }catch(org.hornetq.api.core.HornetQException e){
            e.printStackTrace();
        }catch(Exception e){
            e.printStackTrace();
        }
    }

    private static class acknowledegeHandler implements org.hornetq.api.core.client.SendAcknowledgementHandler{
        @Override
        public void sendAcknowledged( org.hornetq.api.core.Message msg) {
            System.out.println("Received acknowledgement for message ~: "+msg.getStringProperty("myMsg"));
        }
    }
} 
```

**初始化客户端**

```
public class StartClients {

    private static void initialize(){
        String keys[]={org.hornetq.core.remoting.impl.netty.TransportConstants.HOST_PROP_NAME,org.hornetq.core.remoting.impl.netty.TransportConstants.PORT_PROP_NAME};
        Object values[]={"localhost",5664};

        QueueConnection.setMaps(keys,values);
        QueueConnection.startSession();
    } 
    public static void main(String []args){

        new Thread(){@Override
            public void run(){
                System.out.println("Producer Thread");
                StartClients.initialize();
                String QueueName= "queues.Queue1";

                for(int a=1;a<10;a++){
                    QueueProducer.SendMessage(QueueName, "Message "+a+" to the embedded HornetQ Server");
                }
                System.out.println("Queue "+QueueName+" has "+QueueConnection.size(QueueName)+" messages on send");
                QueueConnection.stopSession();
            }}.start();

        new Thread(){@Override
            public void run(){
                try{
                    sleep(5000);
                    System.out.println();
                    System.out.println("Consumer Thread");
                    StartClients.initialize();
                    String QueueName= "queues.Queue1";
                    QueueConsumer.Recieve(QueueName);
                    System.out.println("Queue "+QueueName+" has "+QueueConnection.size(QueueName)+" messages after consumption");
                    QueueConnection.stopSession();
                }catch(java.lang.InterruptedException e){
                    e.printStackTrace();
                }catch(Exception e){
                    e.printStackTrace();
                }
            }}.start();

    }
} 
```

**嵌入式服务器**

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.hornetq.api.core.TransportConfiguration;
import org.hornetq.core.config.Configuration;
import org.hornetq.core.config.CoreQueueConfiguration;
import org.hornetq.core.config.impl.ConfigurationImpl;
import org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory;
import org.hornetq.core.remoting.impl.netty.TransportConstants;
import org.hornetq.core.server.JournalType;
import org.hornetq.core.server.embedded.EmbeddedHornetQ;

public class QueueServer {
    public static void StartServer(){

        try {

             //Connection configurations
            Map<String, Object> params = new HashMap<String, Object>();
            params.put(TransportConstants.HOST_PROP_NAME, "localhost");
            params.put(TransportConstants.PORT_PROP_NAME, 5664);
            params.put(TransportConstants.USE_NIO_PROP_NAME, true);
            params.put(TransportConstants.TCP_NODELAY_PROPNAME, true);
            params.put(TransportConstants.NIO_REMOTING_THREADS_PROPNAME,3);

            Map<String, Object> params2 = new HashMap<String, Object>();
            params2.put(TransportConstants.HOST_PROP_NAME, "localhost");
            params2.put(TransportConstants.PORT_PROP_NAME, 5665);
            params2.put(TransportConstants.USE_NIO_PROP_NAME, true);
            params2.put(TransportConstants.TCP_NODELAY_PROPNAME, true);
            params2.put(TransportConstants.NIO_REMOTING_THREADS_PROPNAME,3);

            Map<String, Object> params3 = new HashMap<String, Object>();
            params3.put(TransportConstants.HOST_PROP_NAME, "localhost");
            params3.put(TransportConstants.PORT_PROP_NAME, 5666);
            params3.put(TransportConstants.USE_NIO_PROP_NAME, true);
            params3.put(TransportConstants.TCP_NODELAY_PROPNAME, true);
            params3.put(TransportConstants.NIO_REMOTING_THREADS_PROPNAME,3);

            Map<String, Object> params4 = new HashMap<String, Object>();
            params4.put(TransportConstants.HOST_PROP_NAME, "localhost");
            params4.put(TransportConstants.PORT_PROP_NAME, 5667);
            params4.put(TransportConstants.USE_NIO_PROP_NAME, true);
            params4.put(TransportConstants.TCP_NODELAY_PROPNAME, true);
            params4.put(TransportConstants.NIO_REMOTING_THREADS_PROPNAME,3);

            //Server configurations
            Configuration config= new ConfigurationImpl();
            HashSet<TransportConfiguration>transports= new HashSet <TransportConfiguration>();
            transports.add(new TransportConfiguration(NettyAcceptorFactory.class.getName(),params));
            transports.add(new TransportConfiguration(NettyAcceptorFactory.class.getName(),params2));
            transports.add(new TransportConfiguration(NettyAcceptorFactory.class.getName(),params3));
            transports.add(new TransportConfiguration(NettyAcceptorFactory.class.getName(),params4));

            //Queues Configurations
            List<CoreQueueConfiguration> queueConfigs = new ArrayList<CoreQueueConfiguration>();
            String queueName="queues.Queue";
            for(int x=1;x<5;x++){
                queueConfigs.add(new CoreQueueConfiguration(queueName.concat(String.valueOf(x)),queueName.concat(String.valueOf(x)), null, true));
            }

            //Set Configurations
            config.setAcceptorConfigurations(transports);
            config.setQueueConfigurations(queueConfigs);
            config.setJournalType(JournalType.NIO);
            config.setSecurityEnabled(false);

            //Starting server
            EmbeddedHornetQ embedded = new EmbeddedHornetQ();
            embedded.setConfiguration(config);
            embedded.start();
            Thread.sleep(6000000);
            embedded.stop();

        } catch (Exception ex) {
            Logger.getLogger(QueueServer.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
    public static void main(String [] args){
        StartServer();    
    }
} 
```

我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:00:40.393

您需要在 ClientSessionFactory 中定义与确认窗口大小相关的结算器方法。

你可以在这里查看文档

[http://docs.jboss.org/hornetq/2.2.5.Final/user-manual/en/html/client-reconnection.html](http://docs.jboss.org/hornetq/2.2.5.Final/user-manual/en/html/client-reconnection.html)

以防万一检查

[HornetQ 消息传递开发者指南](http://link.packtpub.com/5vjVUt)

# php - 使用脚本更新下拉列表

> ID：14094103
> 
> 赞同：0
> 
> 时间：2012-12-30T19:53:12.257
> 
> 标签：php, jquery, json

昨天我在这个论坛上问了一个关于如何根据另一个下拉列表更新 HTML 下拉列表（选择列表）的问题。不幸的是，某些用户并不清楚。但没问题，我发现它是如何工作的。所以，让我们从脚本开始，我把它上传到了 pastebin： http: [//pastebin.com/sFhbPAFj](http://pastebin.com/sFhbPAFj)

我的目标是什么？

在第一个下拉列表（lecturer_id）中，我有一些讲师的姓名和 ID。此信息来自 PostgreSQL 数据库。例如，一个选项列表可以是：

X

第二个列表应包含讲座教授的课程。另一个例子：

数学

此信息也来自数据库，但它应该是动态的。就像如果我选择 Y 老师，第二个列表应该是其他课程的更新。

问题是，我不知道如何将这些数据从我的 PHP 应用程序传输到上面的脚本，另一方面，我不知道如何从 jQuery 脚本中获取讲师 ID 到我的 PHP 代码中。（我需要该 ID 来填充课程列表）

我希望这次我的问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:00:07.597

最好使用AJAX。就像是：

```
$("#teacher_select").change(function(){
id = $(this).val();
$.ajax({
              type: "GET",
              url: "some.php/?id=" + id, // perform a query for all courses taught by this teacher and return html
              success: function(data){
                           $("#course_select").html(data);
                           }
            });
}); 
```

您还可以返回一个 json 对象并在客户端（即在`success`函数中）转换为 HTML，在这种情况下不要忘记添加`dataType:"json"`.

编辑：要检索加载的第一位教师的课程，只需使用响应`onload`事件的相同 ajax 请求 - 或在 JQuery 中`$(document).ready();`- 这将为您提供当前所选教师的课程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:58:53.617

您可以使用 jQuery ajax 函数调用带有教师 ID 的数据库来获取课程并更新第二个下拉列表。

顺便说一句，你所有的 javascript 都是用户 jQuery。使用`for`你可以使用 jQuery `each`。

# visual-c++ - 谷歌稀疏散列与杂音散列函数

> ID：14094104
> 
> 赞同：0
> 
> 时间：2012-12-30T19:53:49.800
> 
> 标签：visual-c++, hashmap, murmurhash

如何在谷歌稀疏散列图中使用杂音散列函数？你能否给我一步一步的说明如何使用杂音散列函数？我正在使用视觉 C++。

目前我在谷歌稀疏散列图中使用 std::hash 散列函数。使用 std::hash 和 murmur 哈希实现的 goole 稀疏哈希映射之间是否存在性能差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T22:30:32.243

您需要为`sparse_hash_map`模板提供哈希函数。我检查了[https://sites.google.com/site/murmurhash/](https://sites.google.com/site/murmurhash/)；它的接口与 不同`std::hash<>`，因此您需要编写适配器类。这是一个工作示例（请记住，适配器仅涵盖某些情况）：

```
#include <iostream>
#include <sparsehash/sparse_hash_map>

using google::sparse_hash_map;      // namespace where class lives by default
using namespace std;

// 64-bit hash for 64-bit platforms
// copied from https://sites.google.com/site/murmurhash/
uint64_t MurmurHash64A ( const void * key, int len, unsigned int seed )
{
  const uint64_t m = 0xc6a4a7935bd1e995;
  const int r = 47;

  uint64_t h = seed ^ (len * m);

  const uint64_t * data = (const uint64_t *)key;
  const uint64_t * end = data + (len/8);

  while(data != end)
  {
    uint64_t k = *data++;

    k *= m; 
    k ^= k >> r; 
    k *= m; 

    h ^= k;
    h *= m; 
  }

  const unsigned char * data2 = (const unsigned char*)data;

  switch(len & 7)
  {
  case 7: h ^= uint64_t(data2[6]) << 48;
  case 6: h ^= uint64_t(data2[5]) << 40;
  case 5: h ^= uint64_t(data2[4]) << 32;
  case 4: h ^= uint64_t(data2[3]) << 24;
  case 3: h ^= uint64_t(data2[2]) << 16;
  case 2: h ^= uint64_t(data2[1]) << 8;
  case 1: h ^= uint64_t(data2[0]);
          h *= m;
  };

  h ^= h >> r;
  h *= m;
  h ^= h >> r;

  return h;
} 

// simple hash adapter for types without pointers
template<typename T> 
struct MurmurHasher {
    size_t operator()(const T& t) const {
        return MurmurHash64A(&t, sizeof(t), 0);
    }    
};

// specialization for strings
template<> 
struct MurmurHasher<string> {
    size_t operator()(const string& t) const {
        return MurmurHash64A(t.c_str(), t.size(), 0);
    }    
};

struct eqstr
{
  bool operator()(const char* s1, const char* s2) const
  {
    return (s1 == s2) || (s1 && s2 && strcmp(s1, s2) == 0);
  }
};

int main()
{
  sparse_hash_map<const char*, int, MurmurHasher<const char*>, eqstr> months;

  months["january"] = 31;
  months["february"] = 28;
  months["march"] = 31;
  months["april"] = 30;
  months["may"] = 31;
  months["june"] = 30;
  months["july"] = 31;
  months["august"] = 31;
  months["september"] = 30;
  months["october"] = 31;
  months["november"] = 30;
  months["december"] = 31;

  cout << "september -> " << months["september"] << endl;
  cout << "april     -> " << months["april"] << endl;
  cout << "june      -> " << months["june"] << endl;
  cout << "november  -> " << months["november"] << endl;

  sparse_hash_map<string, int, MurmurHasher<string>> years;
  years["2012"] = 366;
  cout << "2012      -> " << years["2012"] << endl;
} 
```

Performance will probably depend on your data patterns, so you should do the tests yourself.

# security - 从信息亭使用 Facebook

> ID：14094106
> 
> 赞同：1
> 
> 时间：2012-12-30T19:54:32.180
> 
> 标签：security, facebook-login, facebook-oauth

我们公司开发了照片亭，允许用户拍摄自己的照片（使用突出显示位置的自定义框架）并将其发布到 facebook 上（使用 facebook.com/dialog/oauth 进行登录/授权）。我们太多的用户收到额外的安全问题（可能是因为他们离家有些距离）。有没有办法让我们的公司、应用程序或 IP 地址注册为“受信任”，以避免额外的安全问题？

# objective-c - 2个不同的数据源

> ID：14094107
> 
> 赞同：0
> 
> 时间：2012-12-30T19:54:33.000
> 
> 标签：objective-c, ios, datasource, uipickerview

我正在制作一个应用程序，我想`UITextView`用两个不同的`UIPickerView`.

# 我的代码

* * *

## 控制器.h

```
UIPickerView *inputType;
UIPickerView *inputFormat; 
```

* * *

## 控制器.m

```
inputFormat=[[UIPickerView alloc] initWithFrame:CGRectZero];
inputType=[[UIPickerView alloc] initWithFrame:CGRectZero];
txtFormat.inputView=inputFormat;
txtType.inputView=inputType; 
```

* * *

我的问题现在来了：

我想用不同的数据填充选择器，但我不知道该怎么做。
我知道如何为一个选择器设置数据源，但不是为两个。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:59:04.947

看一下委托方法

* * *

## UIPickerViewDelegate

```
– numberOfComponentsInPickerView:
– pickerView:numberOfRowsInComponent: 
```

* * *

您可以通过测试变量来确定哪个`UIPickerView`要求它的内容。`pickerView`只需将一个插座连接到两个`UIPickerView`s。因此，您可以选择相同的对象作为两个选取器视图的数据源。

* * *

## 例如

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    if (pickerView == self.firstPickerView) {
        return 10;
    } else if (pickerView == self.secondPickerView) {
        return 15;
    }
} 
```

# android - android系统毫秒转换

> ID：14094117
> 
> 赞同：0
> 
> 时间：2012-12-30T19:56:14.490
> 
> 标签：android, time, system

我有一个小时和分钟的时间。像 21:30 和 21:35 我想启动一个秒表，它将在 21:30 开始并在 21:35 停止

通过搜索网络，我发现它必须通过检查 `SystemClock.currentThreadTimeMillis()`存储在线程中的第二个来完成。但我只有小时和分钟以及如何在 SystemClock.currentThreadTimeMillis() 中转换，因为 SystemClock.currentThreadTimeMillis() 来自全时数据。

我不需要代码，但只想对应该这样做的逻辑有一个好的建议，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T19:58:57.203

您可以尝试使用 Calendar 类并从中提取小时和分钟。

```
Calendar.getInstance().getTime() 
```

# android - 如何使用 AndEngine (Android) GLES 2 移动精灵纹理

> ID：14094125
> 
> 赞同：0
> 
> 时间：2012-12-30T19:57:34.987
> 
> 标签：android, andengine, textures

我用 TextureOptions.REPEATING_BILINEAR 选项创建了纹理。现在我需要不断移动精灵内部的纹理位置，以便在不改变精灵位置的情况下创建滑动效果。

我试过了

```
sprite.getTextureRegion().setTextureX(20); 
```

没有任何成功。它仅在创建精灵之前有效。

如何正确实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:05:02.630

您不应该在纹理区域内移动纹理，如果要制作移动效果，您可以创建一个精灵表并使用动画精灵来获得该效果，或者如果它是您想要移动的背景，则使用视差背景

# javascript - Jquery 动画滚动到顶部停止按钮具有翻转状态？

> ID：14094126
> 
> 赞同：1
> 
> 时间：2012-12-30T19:57:37.830
> 
> 标签：javascript, jquery, html, dreamweaver, flash-cs5

请保持温和，因为我不是编码员，而且非常初学者。我已经想出如何使一个位于长页面底部的按钮使页面滚动回顶部，但以动画方式。大哇我在这里你说，但对我来说并不容易。

我的按钮包含在一个 div 中并且确实有翻转状态。起初它看起来是黑色的，翻过来后它看起来是橙色的。自从将动画添加到顶部功能后，我失去了翻转状态？

任何人对如何解决这个小问题有任何想法？这确实是我完成网站所需要克服的最后一个问题。这是该页面的链接：

[http://www.infomaticfilms.com/jack/jrimg/g_and_d.htm](http://www.infomaticfilms.com/jack/jrimg/g_and_d.htm)

任何帮助都会像往常一样非常感激。

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:36:59.753

我建议您不要使用 Dreamweaver 来创建您的页面。javascript MM代码不可读，因此很难帮助您解决问题..

您有 2 种替代方法来更改悬停时的图像。

1) Derek 和 Titanium 推荐的 CSS。2）更改您的脚本以使用 jQuery 更改悬停时的图像。

[jQuery工具](http://api.jquery.com/toggle/)

[jQuery悬停](http://api.jquery.com/hover/)

如果您希望您的页面更快地加载，请使用 CSS。

我强烈建议您学习纯 xhtml 和 css 以使用 Dreamweaver 之类的编辑器。你花时间修复 DD 创建的蹩脚代码，你可以学习 html/html5 和 css insted，最终得到更好的结果。

如果您需要纯 html 和 css 方面的帮助，请随时与我联系

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:37:28.880

用这个：

```
<a href="#top">
<img src="images/jr_img_projectPage_top_button.gif"
onmouseout="this.src='images/jr_img_projectPage_top_button.gif'" 
onmouseover="this.src='images/jr_img_projectPage_top_button_ro.gif'"></a> 
```

另一种方法是使用 CSS ：

```
.top {
    clear: both;
    height: 57px;
    margin-bottom: 24px;
    width: 84px;
    background: url("images/jr_img_projectPage_top_button.gif");
}

.top:hover {
    background: url("images/jr_img_projectPage_top_button_ro.gif");
} 
```

# shell - 从网页执行shell脚本，输出到网页

> ID：14094130
> 
> 赞同：0
> 
> 时间：2012-12-30T19:58:19.363
> 
> 标签：shell, web

我想在我的家庭 Mac 上设置一个网页，匿名用户可以访问该页面，输入一个 url 并让该 URL 由 shell 脚本（单行）处理，然后查看网页上的输出。我正在运行 OS X 10.8.6 并希望尽可能使用内置的 Apache 服务器。

我将如何：

从网页调用 shell 脚本（甚至是单个命令行命令）并将该页面上文本字段的内容通过管道传输到脚本

脚本完成后是否更新网页并显示脚本的所有输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:11:45.967

查看[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)以进行同步执行。对于异步执行，您可以使用 ajax 调用来获取 exec 的结果。

请注意，无法确保此操作安全。确保只有您可以访问该网页。

# c# - 解析字符串并将每个名称（以换行符分隔）读入列表对象

> ID：14094136
> 
> 赞同：-2
> 
> 时间：2012-12-30T19:58:48.067
> 
> 标签：c#

我的目标：用户将选择“以换行符分隔的设备名称”列表，我的代码可以正常工作。当我尝试遍历列表并将它们输入到“设备”类型的新列表中时，就会出现问题

```
class Appliance{
  public string name;
  public string Firmware;
  public stirng cpu_10sec;
  public string mem;
} 
```

这是我尝试构建“DatapowerList”的代码

```
string f = txt_ListofAppliances.Text;
List<Appliance> DatapowerList = new List<Appliance>();

using (StreamReader sr = new StreamReader(f))
{
  Appliance Datapower;
  While ((Datapower.name = sr.ReadLine()) != null)
  {
     DatapowerList.Add(Datapower);
  }
 } 
```

我收到错误“使用未分配的局部变量‘Datapower’

如果这是一个新手问题，我深表歉意，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:11:12.610

您必须创建`Appliance`.

改变

```
Appliance Datapower; 
```

至

```
Appliance Datapower = new Appliance(); 
```

您可以将代码简化为

```
string temp = default(string);
While ((temp = sr.ReadLine()) != null)
{
  DatapowerList.Add(new Appliance {name=temp});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:34:33.240

另一种选择是使用[File.ReadLines](http://msdn.microsoft.com/en-us/library/dd383503.aspx)：

```
foreach (var s in File.ReadLines(f))
{
    DatapowerList.Add(new Appliance { name = s });
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T20:14:36.433

您有几个选择供您选择。在您提供的示例中，您必须先创建设备实例，`Datapower`然后才能为其中一个字段分配值：

```
using (StreamReader sr = new StreamReader(f))
{
    Appliance Datapower = new Appliance(); //Notice the "= new Appliance()" on this line.
    while ((Datapower.name = sr.ReadLine()) != null)
    {
        DatapowerList.Add(Datapower);
    }
} 
```

作为我个人的偏好，我不喜欢在 while/if/etc 中分配值。陈述。对我来说，它从代码中带走了一小层可读性。我会做类似以下的事情：

```
using (StreamReader sr = new StreamReader(f))
{
    while (true)
    {
        string s = sr.ReadLine();
        if (s != null)
        {
            //If the line that was read isn't null, add a new instance of Appliance
            // to the list. You can assign the "name" field a value when you create
            // the instance by using the following format: "new Object() { variable = value }
            DatapowerList.Add(new Appliance() { name = s });
        }
        else
            break;
    }
} 
```

# python - python正则表达式字母连续

> ID：14094137
> 
> 赞同：3
> 
> 时间：2012-12-30T19:58:49.113
> 
> 标签：python, regex, expression

我想在Python中编写一个正则表达式来检查一个字符串是否连续不包含超过2个相同的字母，例如木有效，木无效我试过了

```
[a-zA-z]{,2} 
```

但这不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T20:01:26.237

最简单的方法是使用两次反向引用：

```
r"([a-zA-Z])\1\1" 
```

这将检查与您要求的相反的内容，因此否定结果。如果您将其用作较大正则表达式的一部分，请记住在需要时更改反向引用索引。

# cocos2d-iphone - 适用于 iPad 的 cocos2d 吉他弦

> ID：14094148
> 
> 赞同：0
> 
> 时间：2012-12-30T20:00:16.550
> 
> 标签：cocos2d-iphone, guitar

我开始使用 Cocos2D 并且到目前为止学到了很多东西。但是我找不到如何模拟 ccDrawLine 以使其行为像吉他弦，这意味着，当触摸 ccDrawLine 时，它​​会播放声音并将 ccDrawLine 移动到用户触摸它的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:11:03.580

我将通过使用免费且简单的矢量艺术工具（例如 Inkscape）来解决此问题。它将允许您制作一些具有不同厚度/纹理的逼真的字符串。将字符串作为不同的精灵导入您的应用程序。Cocos2d 有很多选项可以轻松检测诸如“isTouchOnNode”之类的东西，非常适合您的场景。具体来说，[http](http://kobold2d.com) : //kobold2d.com 为轻松检测和选择节点提供了奇迹。

我目前无法访问 Xcode，所以这可能不是逐字代码：

```
/* if you use Kobold2d */

CCSprite* Gstring = [CCSprite spriteWithFile:@"Gstring.png"];
KKInput* input = [KKInput sharedInput];
if ([input isAnyTouchOnNode:Gstring touchPhase:KKTouchPhaseAny])
{
// play a sound.
// this code will become extremely complicated
// if you want a realistic sound
} 
```

请记住，如果您打算制作一个声音/音乐重的应用程序，cocos2d 可能不是最好的引擎。它有一个来自 CocosDenshion 的非常基本的“SimpleAudioEngine”，它不是为处理吉他可以发出的许多重叠声音而设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:16:43.997

我没有使用 Cocos2D 的经验，但是模拟吉他弦的过程可能是这样的：

*   画你的线；
*   在字符串周围添加一个有效的“触摸区域”（因为小字符串可能不够粗，无法可靠地记录触摸）；
*   当您在触摸区域的范围内检测到触摸时，为线条设置动画以模拟弹奏并播放声音（并将其淡出以模拟振动的减慢）。

要考虑的另一件事可能是重叠声音的可能性。如果用户快速触摸相同的字符串怎么办？前一个声音应该在新声音开始之前停止。或者，更自然地，当用户的手指仍然放在琴弦上时，不应该播放任何声音，而应该只在用户“拨动”琴弦（即结束触摸）后才发出声音。

我不确定 Cocos2D 是否有自己的触摸事件处理程序（我想它会），但也许这篇 SO 帖子可能会有所帮助：[我如何检测 UIImageView 的触摸事件](https://stackoverflow.com/questions/855095/how-can-i-detect-the-touch-event-of-an-uiimageview)

编辑：事实证明，Cocos2D 确实有自己的触摸事件处理程序。请参阅：[如何在 cocos2d 中检测触摸？](https://stackoverflow.com/questions/637743/how-can-i-detect-touch-in-cocos2d)

# opencv - 通过 Python 中的程序捕获图像时出错

> ID：14094153
> 
> 赞同：0
> 
> 时间：2012-12-30T20:00:53.547
> 
> 标签：opencv, python-2.6

我是 Python opencv 的新手。谁能帮我解决错误

```
import cv

cv.NamedWindow("w1", cv.CV_WINDOW_AUTOSIZE)
camera_index = 1
capture = cv.CaptureFromCAM(camera_index)

def repeat():
global capture #declare as globals since we are assigning to them now    global camera_index
frame = cv.QueryFrame(capture)
cv.ShowImage("w1", frame)
c = cv.WaitKey(100)
if(c=="n"): #in "n" key is pressed while the popup window is in focus
    camera_index += 1 #try the next camera index
    capture = cv.CaptureFromCAM(camera_index)
    if not capture: #if the next camera index didn't work, reset to 0.
        camera_index =1
        capture = cv.CaptureFromCAM(camera_index)

while True:
repeat() 
```

这是我得到的错误 -

```
OpenCV Error: Null pointer (NULL array pointer is passed) in cvGetMat, file /home/paraste/OpenCV-2.3.1/modules/core/src/array.cpp, line 2382
Traceback (most recent call last):
  File "dualcamara.py", line 10, in <module>
img = cv.GetMat(cv.QueryFrame(capture), 500)
cv2.error: NULL array pointer is passed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T03:26:59.490

似乎要么失败，`cv.CaptureFromCAM()`要么`cv.QueryFrame()`失败（也许`camera_index`是错误的？），因此你得到一个`frame`导致该错误的 NULL 。您应该检查这两个函数的结果并确保它们成功（在这种情况下我只是打印一条消息，您当然可以做其他事情）：

```
capture = cv.CaptureFromCAM(camera_index)
if not capture:
     print "Failed to initialize capture"

frame = cv.QueryFrame(capture)
if not frame:
     print "Failed to get frame" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T01:25:59.953

`cv.QueryFrame()`可能返回 None 并且您没有处理这种可能性。我发现`cv.QueryFrame()`有时会在开头返回 None ，所以我简单地说：

```
if frame == None:
    return 
```

这样，即使您的第一次调用失败，或者调用间歇性失败，您的循环也会继续并在捕获图像时提供图像。我在使用 python 2.7 的 Mac Book Pro 上遇到了同样的问题，这为我解决了。

# java - 避免多个 if 条件

> ID：14094157
> 
> 赞同：5
> 
> 时间：2012-12-30T20:01:17.563
> 
> 标签：java, php

> **可能重复：**
> [在程序中替换或替换 if..else if..else 树的最佳方法是什么？](https://stackoverflow.com/questions/519422/what-is-the-best-way-to-replace-or-substitute-if-else-if-else-trees-in-program)

如何避免多个 if 条件？例如：

```
Public void search(String a,b,c,d,e)
String aTerm; 
```

现在传递参数的单个和多个组合中的哪个包含“aTerm”？例如，输出可能如下：

```
1 - aTerm appears in "a" only
2 - aTerm appears in "a,c", and "e"
3 - aTerm appears in "d" and "e" 
```

对于每个单个或可能的组合，我想调用一个特定的函数。我写了很多 if 条件，但看起来很糟糕。例如：

```
If(aTerm. equalsIgnoreCase(a)){ call function a();}
If(aTerm. equalsIgnoreCase(b)){ call function b();}
If(aTerm. equalsIgnoreCase(b) and aTerm. equalsIgnoreCase(b)){ call function ab();}
…………………… and so on…………………………. 
```

有没有更清洁的方法呢？解决方案可以是 PHP 或 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:05:35.527

构建一个字符串并通过字符串的名称调用该方法：

```
// Psuedo-code
str = "";
If( aTerm.equalsIgnoreCase(a)) str += "a";
If( aTerm.equalsIgnoreCase(b)) str += "b";
If( aTerm.equalsIgnoreCase(c)) str += "c";
If( aTerm.equalsIgnoreCase(d)) str += "d";
If( aTerm.equalsIgnoreCase(e)) str += "e";
call function named by str 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:09:01.907

多态可以代替 ifs/switch：

```
interface LogicWithMatcher {
    boolean match(String aTerm);
    void yourFunction();
}

class MatcherA implements LogicWithMatcher() {...}
class MatcherB implements LogicWithMatcher() {...}
class MatcherC implements LogicWithMatcher() {...}
class MatcherD implements LogicWithMatcher() {...}
class MatcherE implements LogicWithMatcher() {...} 
```

如果您必须将一个函数与给定的输入匹配：

```
public LogicWithMatcher search(String yourString) {
    LogicWithMatcher[] logics = {new MatcherA(), new MatcherB ...}
    for (LogicWithMatcher logic : logics) {
        if (logic.match(yourString)) 
            return logic;
    return null;
}

String yourString = "....."
LogicWithMatcher logic = search(yourString);
if (logic != null) 
    logic.yourFunction();
else
    print("nothing matched"); 
```

或者，如果您给定的输入可能匹配多个函数：

```
public void runFunctionsFor(String yourString) {
    LogicWithMatcher[] logics = {new MatcherA(), new MatcherB ...}
    for (LogicWithMatcher logic : logics) {
        if (logic.match(yourString)) 
            logic.yourFunction();
}

String yourString = "....."
runFunctionsFor(yourString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T20:12:05.077

我可能会做这样的事情：

```
public class YourClass {
    static Runnable[] targets = new Runnable[32];

    public void search(String a, String b, String c, String d, String e) {
        int tgt = 0;
        if(a.indexOf(aTerm) >= 0) tgt |= 1;
        if(b.indexOf(aTerm) >= 0) tgt |= 2;
        if(c.indexOf(aTerm) >= 0) tgt |= 4;
        if(d.indexOf(aTerm) >= 0) tgt |= 8;
        if(e.indexOf(aTerm) >= 0) tgt |= 16;
        targets[tgt].run();
    }
} 
```

然后，只需将要运行的各种函数包装在`Runnable`s 中，并将它们存储在`targets`. 我很确定这比使用反射的效果要好得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T20:33:48.517

> 有没有更清洁的方法呢？

我认为简短的回答是“不”。

有多种方法可以在 Java 中对此进行编码，以避免显式的 if/else 语句链，但最终结果通常比原始代码更复杂。在我看来，“干净”的代码应该意味着代码易于（更容易）阅读。

在您的示例中，您有一个固定的方法签名和一个固定的谓词结构。IMO，if/else 链是 Java 中的自然解决方案。

# g-wan - 禁用静态内容缓存 gwan

> ID：14094161
> 
> 赞同：0
> 
> 时间：2012-12-30T20:02:27.707
> 
> 标签：g-wan

有没有办法禁用 G-wan 的静态内容缓存？G-wan 上一般有禁用缓存吗？

我阅读了 gwan.com 上的 PDF，发现它有一个微型缓存功能，这不会让我误会，这很棒。在开发环境中，它只是不需要并且适得其反。由于需要最新的动态和静态内容。

无论我是更新文件还是等待一两分钟，它似乎仍然会发送缓存的内容。我什至尝试删除 gzip 目录，希望它能向我发送最新版本。在我清除文件然后保存然后粘贴回代码并再次保存后，它适用于某些文件。

禁用缓存是目前开发环境的最佳选择，如果有人能提供一些知识，将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:09:14.227

我听到了，缓存是开发人员的敌人。:) 不过，我不太确定 G-WAN 的实施是否应该改变。如果不是服务器，浏览器可能会接管并从缓存中发送。上个月，我什至遇到了 Flash Player 缓存 SWF 的问题，导致工作中出现各种问题。

消除缓存的最简单方法似乎是在 URL 的末尾添加一个（臭名昭著的）缓存中断字符串。（嗯，这不适用于 Flash 播放器，但那是另一回事了。）

如果您使用的是最新的 3.12.26 版本，您的测试可能会出现其他问题。G-Wan 团队将很快发布一个新的稳定版本。

# elasticsearch - elasticsearch双引号不起作用

> ID：14094162
> 
> 赞同：5
> 
> 时间：2012-12-30T20:02:48.267
> 
> 标签：elasticsearch

我正在尝试使用 elasticsearch 搜索特定短语，即“foo bar”。我的查询类似于以下查询：

```
curl -X GET "http://localhost:9200/objects/object/_search" -d '{
  "query": {
    "bool": {
      "must": [
        {
          "query_string": {
            "query": "\"foo bar\"",
            "default_field": "_all"
          }
        }
      ]
    }
  }
}' 
```

我的索引中有两个对象，看起来类似于：

```
{
  sub_sections: [
    {
      name: "foo"
    },
    {
      name: "bar"
    }
  ]
} 
```

和

```
{
  sub_sections: [
    {
      name: "foo bar"
    }
  ]
} 
```

当我在查询中使用双引号时，我只希望返回与短语匹配的最后一个对象。但是，始终返回两个对象。到目前为止，我已经尝试过`auto_generate_phrase_queries`++ 之类的选项，但没有运气。

这是预期的行为吗？我怎样才能只返回具有完全匹配词组的文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T15:45:20.893

默认情况下，两个示例的索引方式完全相同。当同一字段的多个实例被索引时，它们将按顺序索引，一个字段的最后一项与下一个字段的第一项之间没有间隙。这就是短语搜索跨越字段实例的原因。`position_offset_gap`您可以通过在[映射](http://www.elasticsearch.org/guide/reference/mapping/core-types.html)中设置为非零值来增加字段之间的差距。有关快速演示，请参阅[https://gist.github.com/4420794](https://gist.github.com/4420794)。

# c# - 如何通过c#在windows phone中设置BlockArrow的位置（边距）

> ID：14094163
> 
> 赞同：1
> 
> 时间：2012-12-30T20:02:55.013
> 
> 标签：c#, graphics, windows-phone

如主题中如何通过 c# 在 windows phone 中设置 BlockArrow 的位置。

我试过了：（indic 是 BlockArrow 实例的名称）

```
indic.SetValue(BlockArrow.MarginProperty, 500d); //no possibility to say which margin I meant here 
```

然后：

```
indic.Margin.Left = 400d; 
```

但它说：`Cannot modify the return value of 'System.Windows.FrameworkElement.Margin' because it is not a variable`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:12:28.810

我认为你必须做类似的事情

```
var margin = indic.Margin;
margin.Left = 400d;
indic.Margin = margin; 
```

# java - JMenu 在单个选项卡上工作

> ID：14094169
> 
> 赞同：-1
> 
> 时间：2012-12-30T20:03:45.763
> 
> 标签：java, swing, jtabbedpane, jmenubar

我有一个`JMenuBar`，我有一个`JTabbedPane`，当我创建多个选项卡时，`JMenuBar`它会在所有选项卡上执行，例如，我打开一个文件，它会在每个选项卡中打开同一个文件。

但是我只希望它在当前选项卡上打开一个文件。我添加了一个`ChangeListener`所以它知道它在哪个选项卡中，但是即使它有效，它似乎也没有帮助。

```
tabbedPane.addChangeListener(new ChangeListener() {
    public void stateChanged(ChangeEvent e) {
        System.out.println("Tab=" + tabbedPane.getSelectedIndex());
    }
});
getContentPane().add(tabbedPane, "Center");
pack(); 
```

我希望能够打开多个选项卡，而菜单栏仅对应于当前选项卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T23:48:38.203

让提供每个选项卡内容的对象导出它自己的特定实例[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)。当用户更改选项卡时，使用设置全局菜单`setAction()`中每个可用的所需操作。[这里](https://stackoverflow.com/a/4039359/230513)`JMenuItem`有一个相关的例子。

# ruby-on-rails - 将 Rails 从 3.0.9 升级到 3.2 时出错

> ID：14094170
> 
> 赞同：1
> 
> 时间：2012-12-30T20:03:58.370
> 
> 标签：ruby-on-rails, gem, runtime-error

我按照 Railscast 指南更新到 Rails 3.2，在我的 gem 文件中将我的 rails 更改为 3.2.0 并进行捆绑更新，它成功安装了所有东西，但是当我运行任何东西时，我得到这个非常长的错误消息。这是第一部分。

```
WARNING:  #<ArgumentError: Illformed requirement ["#<Syck::DefaultKey:0x007fa232a830f0> 3.2.0"]>
# -*- encoding: utf-8 -*-

Gem::Specification.new do |s|
  s.name = %q{actionmailer}
  s.version = "3.2.0" 
```

这是我能够挑选出的错误消息的另一部分

```
WARNING:  Invalid .gemspec format in '/Users/connorphillips/.rvm/gems/ruby-1.9.2-p320/specifications/rails-3.2.0.gemspec'
WARNING:  #<ArgumentError: Illformed requirement ["#<Syck::DefaultKey:0x007fa2327b5e68> 3.2.0"]>
# -*- encoding: utf-8 -*-

Gem::Specification.new do |s|
  s.name = %q{railties}
  s.version = "3.2.0" 
```

然后我运行 rails s，只是想看看我是否会收到相同的消息，我这样做了，但最后这是我被告知要做的

```
WARNING:  Invalid .gemspec format in '/Users/connorphillips/.rvm/gems/ruby-1.9.2-p320/specifications/railties-3.2.0.gemspec'
Could not find activemodel-3.2.0 in any of the sources
Run `bundle install` to install missing gems. 
```

# c# - 如何监视文件夹以了解 Windows 应用程序后台的更改？

> ID：14094173
> 
> 赞同：6
> 
> 时间：2012-12-30T20:04:17.730
> 
> 标签：c#, visual-studio, windows-store-apps

我正在编写一个主要在后台运行的 Windows 8 应用程序。这个应用程序将特定于计算机（即没有平板电脑或手机，以防万一）。它需要能够在后台运行时监视指定的文件夹，并在该文件夹发生更改时得到通知。因为它是一个 Windows Store 应用程序，所以我不能使用 a `FileSystemWatcher`，这在我的情况下是完美的。此外，我不能使用计时器来观看文件夹，因为这些更改将每 10-15 秒发生一次，并且计时器不支持短于 15 分钟的时间。我还有什么其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:56:58.010

由于您不能使用每 15 秒左右触发一次的计时器，所以我唯一可以推荐的是运行一个简单的循环，在循环之前它会根据系统时钟检查系统时间，然后在每个循环中检查差异在当前系统时钟和最初存储的值之间。当您到达 15 秒时，循环停止并启动检查文件夹的代码。如果循环中的代码很简单并且使用了`Sleep`调用，那么它几乎不会占用任何系统资源。

我希望这可以帮助你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:41:18.887

您是否查看过 Windows 应用程序后台任务？这里有个问题： [Windows 8 Live Tile Background Agent Using C#](https://stackoverflow.com/questions/12549854/windows-8-live-tile-background-agent-using-c-sharp)

# c++ - Double/Float TO Rational（X/Y 形式）

> ID：14094177
> 
> 赞同：3
> 
> 时间：2012-12-30T20:05:08.380
> 
> 标签：c++

我应用以下方法将 Double/Float 形式转换为有理形式。

对于前。

```
a=0.125
Find t=1000 
Find k=GCD(t,a*t);
Print (a*t/k) "/" t/k 
```

它为 0.125 提供了正确的 o/p，但对于 0.12 则没有。问题在于找到t。请帮我解决这个问题。这是代码，

```
#include<iostream>
#include<stdio.h>
#include<stdlib.h>
using namespace std;
int gcd(int a,int b)
{
  if(b==0)
  return a;
  else
  return gcd(b,a%b);
}
void DoubleToRational(float a)
{
  int t=1;
  while((float)t*a!=(int)(t*a))
  {
   //cout<<t*a<<" "<<(float)t*a<<" "<<(int)(t*a)<<endl; // For Checking
   t=t*10;
  }
  int k=gcd(t*a,t);
  cout<<(int)t*a/k<<" / "<<t/k;
}
int main()
{
  DoubleToRational(0.125); //0.021 seconds Works Perfectly
 // DoubleToRational(0.12); //Didnt Work ????
  return 0;
} 
```

**另外，我不希望这种方法在精度很高时有效。在这种情况下，请建议修改/其他方法。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T20:07:07.560

该数字`0.125`可以用二进制浮点数精确表示。但数字`0.12`不能。所以你正在寻找最接近的可表示数字的有理值`0.12`。绝对不是`3/25`。事实上，[最接近的双精度值](http://pages.cs.wisc.edu/~rkennedy/exact-float?number=0.12)是`0.12`：

```
0.11999 99999 99999 99555 91079 01499 37383 83054 73327 63671 875 
```

要在这项任务中取得任何合理进展，您可能需要使用十进制数据类型而不是二进制类型（如`double`.

如果以上内容对您没有任何实际意义，那么我建议您好好阅读：[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

# php - 对数组进行分组并打印其值

> ID：14094178
> 
> 赞同：-4
> 
> 时间：2012-12-30T20:05:09.510
> 
> 标签：php, arrays, multidimensional-array, grouping

```
$galleries = array (
    '0' => array ('post_id' => 300, 'photo_id' => 1),
    '1' => array ('post_id' => 300, 'photo_id' => 2),
    '2' => array ('post_id' => 300, 'photo_id' => 3),
    '3' => array ('post_id' => 301, 'photo_id' => 4),
    '4' => array ('post_id' => 301, 'photo_id' => 5),
    '5' => array ('post_id' => 302, 'photo_id' => 6),
    '6' => array ('post_id' => 302, 'photo_id' => 7),
    '7' => array ('post_id' => 302, 'photo_id' => 8),
    '8' => array ('post_id' => 302, 'photo_id' => 9),
    '9' => array ('post_id' => 303, 'photo_id' => 10),
    '10' => array ('post_id' => 303, 'photo_id' => 11),
    '11' => array ('post_id' => 304, 'photo_id' => 12),
) 
```

我想`post_id`用 HTML 或 PHP 将它分组并打印成这样的：

```
300 = 1,2,3
301 = 4,5
302 = 6,7,8,9
303 = 10,11
304 = 12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:09:35.540

```
$galleries = array (
    '0' => array ('post_id' => 300, 'photo_id' => 1),
    '1' => array ('post_id' => 300, 'photo_id' => 2),
    '2' => array ('post_id' => 300, 'photo_id' => 3),
    '3' => array ('post_id' => 301, 'photo_id' => 4),
    '4' => array ('post_id' => 301, 'photo_id' => 5),
    '5' => array ('post_id' => 302, 'photo_id' => 6),
    '6' => array ('post_id' => 302, 'photo_id' => 7),
    '7' => array ('post_id' => 302, 'photo_id' => 8),
    '8' => array ('post_id' => 302, 'photo_id' => 9),
    '9' => array ('post_id' => 303, 'photo_id' => 10),
    '10' => array ('post_id' => 303, 'photo_id' => 11),
    '11' => array ('post_id' => 304, 'photo_id' => 12),
);
// written on the go, untested
$grouped = array();
foreach ($galleries as $gallery) {
    $grouped[$gallery['post_id']][] = $gallery['photo_id'];
}

foreach ($grouped as $key => $values) {
    echo $key . ' = ' . implode(',', $values) . "\n";
} 
```

你是什​​么意思“在 HTML 或 PHP 中”？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:12:52.833

```
<?php // RAY_temp_mvetter.php
error_reporting(E_ALL ^ E_NOTICE);

$galleries = array (
    '0' => array ('post_id' => 300, 'photo_id' => 1),
    '1' => array ('post_id' => 300, 'photo_id' => 2),
    '2' => array ('post_id' => 300, 'photo_id' => 3),
    '3' => array ('post_id' => 301, 'photo_id' => 4),
    '4' => array ('post_id' => 301, 'photo_id' => 5),
    '5' => array ('post_id' => 302, 'photo_id' => 6),
    '6' => array ('post_id' => 302, 'photo_id' => 7),
    '7' => array ('post_id' => 302, 'photo_id' => 8),
    '8' => array ('post_id' => 302, 'photo_id' => 9),
    '9' => array ('post_id' => 303, 'photo_id' => 10),
    '10' => array ('post_id' => 303, 'photo_id' => 11),
    '11' => array ('post_id' => 304, 'photo_id' => 12),
)
;
/*
I want o group post_id and print it in HTML or in PHP to something like this:

300 = 1,2,3
301 = 4,5
302 = 6,7,8,9
303 = 10,11
304 = 12
*/

// COLLAPSE THE ARRAY
$old_post_id = FALSE;
foreach ($galleries as $arr)
{
    $out[$arr['post_id']] .= $arr['photo_id'] . ',';
}

// REMOVE THE TRAILING COMMAS
foreach ($out as $key => $str) $out[$key] = rtrim($str, ',');
print_r($out); 
```

# c++ - 使用索引向量擦除另一个向量的索引

> ID：14094180
> 
> 赞同：4
> 
> 时间：2012-12-30T20:05:20.320
> 
> 标签：c++, vector

我有两个向量，一个是我想擦除的另一个向量的索引向量。目前我正在做以下事情：

```
#include <vector>
#include <iostream>
#include <string>

int main() {
        std::vector<std::string> my_vec;
        my_vec.push_back("one");
        my_vec.push_back("two");
        my_vec.push_back("three");
        my_vec.push_back("four");
        my_vec.push_back("five");
        my_vec.push_back("six");

        std::vector<int> remove_these;
        remove_these.push_back(0);
        remove_these.push_back(3);

        // remove the 1st and 4th elements
        my_vec.erase(my_vec.begin() + remove_these[1]);
        my_vec.erase(my_vec.begin() + remove_these[0]);

        my_vec.erase(remove_these.begin(), remove_these.end());

        for (std::vector<std::string>::iterator it = my_vec.begin(); it != my_vec.end(); ++it)
                std::cout << *it << std::endl;

        return 0;
} 
```

但我认为这是不优雅和低效的。此外，我认为我必须小心对`remove_these`向量进行排序并从末尾开始（这就是我在索引 0 之前擦除索引 3 的原因）。我想要一个擦除命令，比如

```
my_vec.erase(remove_these.begin(), remove_these.end()); 
```

但是这当然行不通，因为`my_vec.erase()`期望迭代器引用相同的向量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T20:13:02.787

从标准序列中擦除元素的已知习语是*擦除/删除习语*。您首先调用`remove`算法，将您想要保留的所有元素移动到序列的前面，然后`erase`将删除的元素移到序列的后面。在*C++11*中，它看起来像这样：

```
std::vector< std::string > strings;
strings.erase(
    std::remove_if(
        strings.begin(), strings.end()
      , []( std::string const& s ) -> bool
        {
            return /*whether to remove this item or not*/;
        }
    )
  , strings.end()
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T20:14:19.837

```
 std::sort(remove_these.begin(), remove_these.end());

    int counter = 0;
    auto end = std::remove_if(my_vec.begin(), my_vec.end(),
                             [&](const std::string&) mutable {
        return std::binary_search(remove_these.begin(), remove_these.end(), counter++);
    });
    my_vec.erase(end, my_vec.end()); 
```

这`remove_if`与 lambda 函数一起使用，如果`counter`在向量中找到当前元素的索引（由变量跟踪） ，则返回 true `remove_these`。该向量已排序，以便`binary_search`可以用作优化。如果要删除的元素列表很小，则不对其进行排序并仅在 lambda 中使用它可能会更快：

```
 return std::find(remove_these.begin(), remove_these.end(), counter++) != remove_these.end(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T22:31:32.960

在您的情况下，我认为有两个问题值得考虑：

*   您正在使用具有连续索引的容器，因此每次删除一个元素时，它之后的所有元素都会被重新索引（这就是您必须在示例代码中以相反顺序进行删除的原因），
*   该容器也恰好[连续存储其元素](https://stackoverflow.com/questions/2096571/how-is-c-stdvector-implemented)，因此任何删除都可能触发重新分配，并且*至少*会引发元素的副本以满足连续性约束。

鉴于这两个问题，在某些情况下将您希望保留的元素复制到新容器中可能会很有趣，而不是进行删除。在您的情况下，复制元素似乎不是一个大问题，因为许多实现`std::string`使用[写时复制策略](https://stackoverflow.com/questions/1466073/how-is-stdstring-implemented)，但您可能希望自己验证这一点。

要考虑的另一件事是，要删除的索引集可以很好地存储在位向量中。它相当有效，并且大大简化了算法。不过，您需要跟踪删除的元素的有效数量。

我个人会选择一个简单的循环，但 C++ 提供了许多方法来实现类似的结果。这是循环版本：

```
 std::vector<bool> remove_these(my_vec.size(), false):
    remove_these[0] = remove_these[4] = true;

    std::vector<std::string> my_result;
    my_result.reserve(my_vec.size() - 2);

    for (int i = 0; i < remove_these.size(); ++i)
        if (!remove_these[i])
             my_result.push_back(my_vec[i]); 
```

注意`reserve`在向量填充期间避免多次重新分配的使用。

现在，剩下要做的就是将上面的代码包装在一个函数中，该函数将预先将 int 向量转换为 bool 向量：

```
template <typename IT>
void erase(std::vector<std::string> &my_vec, IT begin, IT end){
    std::vector<std::string> res;
    std::vector<bool> r(my_vec.size(), false);
    res.reserve(my_vec.size() - (end - begin));
    for (IT it = begin; it != end; ++it)
        r[*it] = true;
    for (int i = 0; i < r.size(); ++i)
        if (!r[i])
            res.push_back(my_vec[i]);
    my_vec = res;
} 
```

就是这样。该算法的时间复杂度约为*O(N+M)*，其中 N 和 M 是 和 的`my_vec`大小`remove_these`。或者，可以将第二个循环替换为`remove_if`.

事实上，如果 stl 提供了一个函数来迭代一个序列，`remove_if`并调用一个谓词函数，参数是该迭代器的键和值，我们可以通过给它提供`my_vec`反向迭代器和一个 lambda 来检查给定的关键是 in `remove_these`，但时间复杂度会比上面的解决方案高一点。

# java - 为什么Java允许多对多关系？

> ID：14094182
> 
> 赞同：-1
> 
> 时间：2012-12-30T20:05:49.040
> 
> 标签：java, associations, uml

我正在学习 UML，并注意到 Java 的平台特定模型允许多对多关联，我隐约理解为什么，但我只是想知道是否有人可以用一个例子解释为什么会这样以及为什么它有用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:08:37.633

我不确定 Java 有什么问题，但多对多关联在建模许多想法时很有用。

假设我们有学生和老师。每个老师都有很多学生，每个学生都有很多老师。显然，对这样一个领域进行建模，多对多关系会派上用场。

Java 非常灵活，因此它允许对多对多关系进行建模（例如，通过将 Student[] 数组添加到 Teacher 类，将 Teacher[] 数组添加到 Student 类定义 - 对于 Student-Teacher 示例），我不知道Java 为这种关系的简单建模提供了特殊的支持。

# matlab - 如何比较两种颜色？

> ID：14094184
> 
> 赞同：3
> 
> 时间：2012-12-30T20:06:52.613
> 
> 标签：matlab, image-processing, opencv, colors, computer-vision

**问题：如何比较两种颜色，可能是用两个不同的相机拍摄的？**

**设想 ：**

我有一个参考图像，它有不同颜色的方块。它可以用 iPhone 相机拍摄或从 PDF 文件中复制。以下是从 PDF 复制的示例参考图像：

![在此处输入图像描述](../Images/d80ef5c08307795f15c70b19b6c53f9f.png)

**现在其他人用自己的相机拍摄**相似图像（彩色方块）的图像。下面给出了一个示例测试图像：

![在此处输入图像描述](../Images/41ececf2aee7b370851e15f80c14e534.png)

对于测试图像中的每个正方形，我需要检查哪个是参考图像中最接近的正方形。

**我的理解 ：**

在 SOF 中有几个与之相关的类似问题。以下是我得到的要点：

1 - 找到正方形的 RGB 值并找到所有正方形之间的欧几里德距离，然后选择最小的那个。

但是有几个人说是RGB不是很好的颜色表现

2 - 使用 HSV 或 Lab 执行上述方法。

3 - DeltaE方法（我不太了解）

**在这里，在我的问题中，图像是用两个不同的相机拍摄的。那么上述方法是否适用于此类问题？**

**如果没有，任何人都可以分享一个比较从两个不同相机拍摄的颜色的好方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:22:05.727

RGB欧几里德距离不适合匹配不同的颜色。想象一下，您从黑色 (0,0,0) 开始，然后纯蓝色、纯红色和纯绿色在您的方案中都是相同的，因此相同。

转换为 HSV/HSL 类型的色彩空间可帮助您将整体亮度与颜色分开，并识别具有不同饱和度的相似颜色。

如果您需要它完全准确，您可能还需要在图像中找到一个白色区域并使用它来校正背景光的颜色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:32:48.020

我会使用一个**设计**为（大约）感知统一的色彩空间。从我在维基百科上的记忆引导的简短搜索中，我个人会选择[CIE L*u*v*](http://en.wikipedia.org/wiki/CIELUV)并使用欧几里得范数。这与使用 L*a*b* 而不是 L*u*v*的[最简单的 \delta E](http://en.wikipedia.org/wiki/Color_difference)非常相似。我相信eiter（或任何更复杂的\delta E）应该做得很好。

正如 Martin 所指出的，如果相机不平衡，白平衡也可能起到一定的作用......

# javascript - 在 Objective-C 中从 JavaScript 调用变量 NSString

> ID：14094189
> 
> 赞同：0
> 
> 时间：2012-12-30T20:07:26.650
> 
> 标签：javascript, objective-c, cocoa, webview, nsstring

我想`NSString`在 WebView 中从 JavaScript 中捕获一个变量。
在这种情况下，变量将是应用程序的路径。

* * *

## 我的代码

```
 - (NSString *)pathBundle {
    return [[NSBundle mainBundle] bundlePath];
 }

+ (BOOL)isSelectorExcludedFromWebScript:(SEL)selector { return NO; }
+ (BOOL)isKeyExcludedFromWebScript:(const char*)name { return YES; } 
```

现在，我尝试在 JavaScript 中调用它，`alert(app.pathBundle_);`但警报消息显示`undefined`.

我已经设法实现了一个 Objective-C 函数来通过 JavaScript ( `- (void)changeTitle:(NSString *)Value { ... }`) 更改窗口标题，但`NSString`结果似乎没有从 Cocoa 传递到 JS。

有人可以知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:44:18.350

好的，我刚刚找到了解决方案。这是我的工作代码：

```
- (NSString *)pathBundle:(NSString *)Value {
    return [[NSBundle mainBundle] bundlePath];
}

- (NSString *)pathResources:(NSString *)Value {
    return [[NSBundle mainBundle] resourcePath];
} 
```

在 JavaScript 中，我这样称呼它：

```
alert(Stz.pathBundle_());
alert(Stz.pathResources_()); 
```

圣诞快乐和新年快乐 ：）

# console - 类似于 getchar 的功能

> ID：14094190
> 
> 赞同：41
> 
> 时间：2012-12-30T20:07:33.957
> 
> 标签：console, go, getchar

是否有类似于 C 的 Go 函数`getchar`能够在控制台中处理制表符？我想在我的控制台应用程序中完成某种完成。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-31T06:32:47.127

C的`getchar()`例子：

```
#include <stdio.h>
void main()
{
    char ch;
    ch = getchar();
    printf("Input Char Is :%c",ch);
} 
```

去等效：

```
package main

import (
    "bufio"
    "fmt"
    "os"
)

func main() {

    reader := bufio.NewReader(os.Stdin)
    input, _ := reader.ReadString('\n')

    fmt.Printf("Input Char Is : %v", string([]byte(input)[0]))

    // fmt.Printf("You entered: %v", []byte(input))
} 
```

最后注释的行仅显示当您按下`tab`第一个元素时是 U+0009（'CHARACTER TABULATION'）。

但是，对于您的需要（检测选项卡），C`getchar()`不适合，因为它需要用户按 Enter。你需要的是像 @miku 提到的 ncurses 的 getch()/readline/jLine 之类的东西。有了这些，您实际上就在等待一个按键。

所以你有多种选择：

1.  使用`ncurses`/`readline`绑定，例如[https://code.google.com/p/goncurses/](https://code.google.com/p/goncurses/)或类似[https://github.com/nsf/termbox](https://github.com/nsf/termbox)

2.  滚动您自己的起点，请参见[http://play.golang.org/p/plwBIIYiqG](http://play.golang.org/p/plwBIIYiqG)

3.  用于`os.Exec`运行 stty 或 jLine。

参考：

[https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/zhBE5MH4n-Q](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/zhBE5MH4n-Q)

[https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/S9AO_kHktiY](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/S9AO_kHktiY)

[https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/icMfYF8wJCk](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/icMfYF8wJCk)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-24T15:04:00.110

假设您想要无缓冲的输入（无需按回车键），这可以在 UNIX 系统上完成：

```
package main

import (
    "fmt"
    "os"
    "os/exec"
)

func main() {
    // disable input buffering
    exec.Command("stty", "-F", "/dev/tty", "cbreak", "min", "1").Run()
    // do not display entered characters on the screen
    exec.Command("stty", "-F", "/dev/tty", "-echo").Run()
    // restore the echoing state when exiting
    defer exec.Command("stty", "-F", "/dev/tty", "echo").Run()

    var b []byte = make([]byte, 1)
    for {
        os.Stdin.Read(b)
        fmt.Println("I got the byte", b, "("+string(b)+")")
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-24T21:46:10.653

感谢 Paul Rademacher - 这有效（至少在 Mac 上）：

```
package main

import (
    "bytes"
    "fmt"

    "github.com/pkg/term"
)

func getch() []byte {
    t, _ := term.Open("/dev/tty")
    term.RawMode(t)
    bytes := make([]byte, 3)
    numRead, err := t.Read(bytes)
    t.Restore()
    t.Close()
    if err != nil {
        return nil
    }
    return bytes[0:numRead]
}

func main() {
    for {
        c := getch()
        switch {
        case bytes.Equal(c, []byte{3}):
            return
        case bytes.Equal(c, []byte{27, 91, 68}): // left
            fmt.Println("LEFT pressed")
        default:
            fmt.Println("Unknown pressed", c)
        }
    }
    return
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-07T15:09:21.817

这里的其他答案建议如下：

*   使用 cgo

    *   效率低下
    *   [“cgo 不是围棋”](https://dave.cheney.net/2016/01/18/cgo-is-not-go)
*   `os.Exec`的`stty`

    *   不便携
    *   效率低下
    *   容易出错
*   使用使用的代码`/dev/tty`

    *   不便携
*   使用 GNU readline 包

    *   如果它是 C readline 的包装器或使用上述技术之一实现，则效率低下
    *   否则还可以

但是，对于简单的情况，只需使用来自[Go 项目的 Sub-repositories](https://golang.org/pkg/#subrepo)的包就很容易了。

基本上，使用[`terminal.MakeRaw`](https://godoc.org/golang.org/x/crypto/ssh/terminal#MakeRaw)and[`terminal.Restore`](https://godoc.org/golang.org/x/crypto/ssh/terminal#Restore)将标准输入设置为原始模式（检查错误，例如，如果 stdin 不是终端）；那么您可以直接从 读取字节`os.Stdin`，或者更有可能通过 a读取字节`bufio.Reader`（为了提高效率）。

例如，像这样：

```
package main

import (
    "bufio"
    "fmt"
    "log"
    "os"

    "golang.org/x/crypto/ssh/terminal"
)

func main() {
    // fd 0 is stdin
    state, err := terminal.MakeRaw(0)
    if err != nil {
        log.Fatalln("setting stdin to raw:", err)
    }
    defer func() {
        if err := terminal.Restore(0, state); err != nil {
            log.Println("warning, failed to restore terminal:", err)
        }
    }()

    in := bufio.NewReader(os.Stdin)
    for {
        r, _, err := in.ReadRune()
        if err != nil {
            log.Println("stdin:", err)
            break
        }
        fmt.Printf("read rune %q\r\n", r)
        if r == 'q' {
            break
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-29T03:41:23.460

1-您可以使用`C.getch()`：

这适用于 Windows 命令行，只读取一个字符而不输入：（
在 shell（终端）内运行输出二进制文件，而不是在管道或编辑器内。）

```
package main

//#include<conio.h>
import "C"

import "fmt"

func main() {
    c := C.getch()
    fmt.Println(c)
} 
```

2- 对于 Linux（在 Ubuntu 上测试）：

```
package main

/*
#include <stdio.h>
#include <unistd.h>
#include <termios.h>
char getch(){
    char ch = 0;
    struct termios old = {0};
    fflush(stdout);
    if( tcgetattr(0, &old) < 0 ) perror("tcsetattr()");
    old.c_lflag &= ~ICANON;
    old.c_lflag &= ~ECHO;
    old.c_cc[VMIN] = 1;
    old.c_cc[VTIME] = 0;
    if( tcsetattr(0, TCSANOW, &old) < 0 ) perror("tcsetattr ICANON");
    if( read(0, &ch,1) < 0 ) perror("read()");
    old.c_lflag |= ICANON;
    old.c_lflag |= ECHO;
    if(tcsetattr(0, TCSADRAIN, &old) < 0) perror("tcsetattr ~ICANON");
    return ch;
}
*/
import "C"

import "fmt"

func main() {
    fmt.Println(C.getch())
    fmt.Println()
} 
```

请参阅：
[Linux 中与 getch() 和 getche() 等效的是什么？](https://stackoverflow.com/questions/7469139/what-is-equivalent-to-getch-getche-in-linux)
[为什么我在 Linux 上找不到 <conio.h>？](https://stackoverflow.com/questions/8792317/why-cant-i-find-conio-h-on-linux)

* * *

3-这也有效，但需要“输入”：

```
package main

import (
    "bufio"
    "fmt"
    "os"
)

func main() {
    r := bufio.NewReader(os.Stdin)
    c, err := r.ReadByte()
    if err != nil {
        panic(err)
    }
    fmt.Println(c)
} 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2017-05-14T14:47:16.243

您还可以使用 ReadRune：

```
reader := bufio.NewReader(os.Stdin)
// ...
char, _, err := reader.ReadRune()
if err != nil {
    fmt.Println("Error reading key...", err)
} 
```

符文类似于字符，因为 GoLang 并没有真正的字符，为了尝试和支持多种语言/unicode/等。

# php - PDO 从 localhost 连接到 web sql？

> ID：14094194
> 
> 赞同：0
> 
> 时间：2012-12-30T20:07:44.030
> 
> 标签：php, mysql, pdo, mysqli, connection

我正在尝试做一些测试，我正在使用 MAMP 并尝试连接到我服务器上的 SQL 数据库。我以前没有使用过 PDO，并且很难追踪错误代码的含义。我得到这个：

```
SQLSTATE[HY000] [2003] Can't connect to MySQL server on 'hostname' (60) 
```

我的连接功能：

```
 function getConnection() {
    $dbhost="hostname";
    $dbuser="user";
    $dbpass="password";
    $dbname="somedb";
    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    return $dbh;
  } 
```

我在哪里尝试执行查询：

```
 function getTypes() {
    $sql = "SELECT id, name FROM type";
    try {
      $db = getConnection();
      $stmt = $db->query($sql);
      $types = $stmt->fetchAll(PDO::FETCH_OBJ);
      $db = null;
      echo '{"wine": ' . json_encode($types) . '}';
    } catch(PDOException $e) {
      echo '{"error":{"text":'. $e->getMessage() .'}}';
    }
    echo 'getTypes';
  } 
```

**编辑：**我可以使用与 mysqli 相同的凭据进行连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:09:09.600

您的 mysql 服务器正在侦听**本地 unix 套接字**或绑定到**localhost** ( `127.0.0.1`)。确保 mysql 服务器正在侦听`hostname`.

注意：连接用户（`user`此处）必须`GRANT`从您的客户端 IP 访问（）数据库（`somedb`）；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:15:56.837

这是一个安全问题。为了避免您的数据库被淹没或充满垃圾，配置设置说“只有本地 ip 可以访问数据库”。所有共享主机都这样做，如果您有专用服务器，这样做是一个好习惯。

在 Linux 上的 /var/mysql/my.conf 中，你有类似的东西：

```
skip-external-locking
# Instead of skip-networking the default is now to listen only on
# localhost which is more compatible and is not less secure.
bind-address            = 127.0.0.1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T20:13:49.787

您是否连接到正确的端口？

```
$dbh = new PDO("mysql:host=$dbhost;port=PORT;dbname=$dbname", $dbuser, $dbpass); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T20:19:27.413

如果你运行 PHP 脚本的服务器是运行 SQL Server 的服务器，你不需要使用`hostname`连接，你需要参考本地系统。您在配置中拥有的`hostname`内容不会解析为有效 SQLServer 的 IP，如果您在其中引用`localhost`，它将引用正在运行的服务器本身，并按照需要进行连接。您可以使用以下任一方法：

`localhost`||`127.0.0.1`

# php - 使用 PHP 解析 Adf.ly URL

> ID：14094196
> 
> 赞同：-1
> 
> 时间：2012-12-30T20:08:00.003
> 
> 标签：php, parse-url

我有一个这样的链接： `http://adf.ly/2323070/http://www.fileflyer.com/view/O33TOYUAFMIFF`

我只想获取 URL 的这一部分： `http://www.fileflyer.com/view/O33TOYUAFMIFF`

**注意** URL 编号可以更改，因此 URL 的语法为： `http://adf.ly/{NUMBERS}/{URL}`

如何解析此 URL？

谢谢！对不起我的英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:14:04.110

一个简单的正则表达式`#https?://(www\.)?adf\.ly/\d+/(.*)#i`应该可以解决问题。这也支持 https://adf.ly`（如果存在）和 http://www.adf.ly。

```
<?php
    $url = "http://‌‌‌‌‌‌"."adf.ly/2323070/http://www.fileflyer.com/view/O33TOYUAFMIFF";
    preg_match("#https?://(www\.)?adf\.ly/\d+/(.*)#i", $url, $matches);
    var_dump($matches[2]);
?> 
```

输出

`string(43) "http://www.fileflyer.com/view/O33TOYUAFMIFF"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:13:41.583

像这样的正则表达式`#http://adf.ly/(\d+)/(.*)#i`应该可以解决问题。例如：

```
<?php
$theinput = 'http://adf.ly/2323070/http://www.fileflyer.com/view/O33TOYUAFMIFF';
$regexp = '#http://adf.ly/(\d+)/(.*)#i';
if (preg_match($regexp, $theinput, $matches)) {
    echo "Number: " . $matches[1] . "<br>\n";
    echo "URL: " . $matches[2] . "<br>\n";
}
else {
    echo "No match!";
} 
```

# css - 如何在 CSS 中向上移动背景图像，同时不移动文本？

> ID：14094198
> 
> 赞同：-1
> 
> 时间：2012-12-30T20:08:07.077
> 
> 标签：css, header, navigation, background-image

我在 CSS 中导航的活动状态遇到问题。我希望有一个与容器对齐的箭头，指向活动链接，但除非我将文本与背景图像一起向上移动，否则它不会对齐。箭头需要从文本偏移。对于任何反馈，我们都表示感谢！谢谢！

```
#mainNav ul li.current a,
#mainNav ul li.current-cat a,
#mainNav ul li.current_page_item a,
#mainNav ul li.current-menu-item a,
#mainNav ul li.current-post-ancestor a,
#mainNav ul li.current_page_parent a,
#mainNav ul li.current-category-parent a,
#mainNav ul li.current-category-ancestor a,
#mainNav ul li.current-portfolio-ancestor a,
#mainNav ul li.current-projects-ancestor a
{
  background: url(http://www.jamiestarcevich.com/wp-content/uploads/2012/12/triangle.png);
  background-repeat: no-repeat;
  background-position:center top;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:14:26.577

您可以使用像素或百分比，而不是一般`center,top`来将箭头准确定位在您想要的位置

如果您需要箭头空间，请使用`padding-left`（或者`padding-right`如果 RTL）

旁注：查看您的代码，您可能需要考虑使用 CSS 扩展，例如[LESS](http://lesscss.org/)，它支持嵌套规则，因此您不必一次又一次地重复元素

# string - 查找为给定字符集存储的单词

> ID：14094199
> 
> 赞同：-1
> 
> 时间：2012-12-30T20:08:33.147
> 
> 标签：string, algorithm

我在一次采访中被问到这个问题。我得到了字符（假设是 char 数组 strAlphabets:) 't' 'u' 'v' 'm' 'n' 'o' 和 'p' 我必须用一个、两个或全部读出所有可能的单词它的特征。为此，我还被要求以我想要的任何结构存储一些可能的单词，其中包含一个、两个……或所有字符。

例如，首先我应该存储一些单词，如moon、top、pot、no、vot 等......然后如果用户给出't'、'p'和'o'作为输入，那么我应该输出“top”和“pot”我已经存储的单词。

知道如何实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:24:15.120

像这样？（请不要评论任何语法错误，将其视为伪代码）

```
bool IsAWord(string word, char[] alphabet)
{
 foreach(char c in word)
   if (alphabet.indexof(c)==-1)
     return false;

 return true;
}

void SolveThePuzzle (string[] words, char[] alphabet)
{
  foreach (string word in words)
    if (IsAWord(word,alphabet))
      Console.Writeln(word+' is a word');
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-30T21:18:06.037

你必须有这样的算法的字典。在生成所有可能的排列（或其中的一部分）之后，您必须使用这本字典。

# c++ - C++ 编译时类型检查

> ID：14094214
> 
> 赞同：4
> 
> 时间：2012-12-30T20:09:37.640
> 
> 标签：c++, templates

想知道是否有可能有一个模板函数，它可以根据类型是否派生自特定类而分支。以下是我的大致想法：

```
class IEditable {};

class EditableThing : public IEditable {};

class NonEditableThing {};

template<typename T>
RegisterEditable( string name ) {
    // If T derives from IEditable, add to a list; otherwise do nothing - possible?
}

int main() {
    RegisterEditable<EditableThing>( "EditableThing" );  // should add to a list
    RegisterEditable<NonEditableThing>( "NonEditableThing" );  // should do nothing
} 
```

如果有人有任何想法，请告诉我！:)

编辑：我应该补充一点，我不想实例化/构造给定的对象只是为了检查它的类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T20:25:34.160

这是一个实现`std::is_base_of`：

```
#include <type_traits>

template <typename T>
void RegisterEditable( string name ) {
    if ( std::is_base_of<IEditable, T>::value ) {
        // add to the list
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T20:14:46.050

正如@Lightness 所指出的， type_traits 就是答案。

C++11 包含了`boost`type_trait：[http ://en.cppreference.com/w/cpp/types/is_base_of](http://en.cppreference.com/w/cpp/types/is_base_of)

# c - 使用命名管道向正在运行的进程发送命令

> ID：14094216
> 
> 赞同：0
> 
> 时间：2012-12-30T20:09:42.197
> 
> 标签：c, named-pipes

我有一个作为服务运行的程序，它从控制台获取标准输入，并将反馈打印到屏幕上。可以认为是下面这个简单的例子，而`printf()`函数实际上是一些更复杂的函数。

```
//keyin.c
int main(int argc, char *argv[])
{
    char buf[80];
    int i = 1;

    while(i++){ 
    printf("enter %d string: \n", i);
    scanf("%s", buf);
    printf("print %d string: %s \n\n", i, buf);
    sleep(2);
    }

    return 0;
} 
```

现在我想使用命名管道作为输入，这样我就可以使用另一个程序通过写入管道来将所需的命令传递给服务，而不是在控制台中输入。

我通过以下方式创建了一个命名管道：

```
mknod MYFIFO p 
```

然后我通过以下方式重定向输入：

```
root@ubuntu: ./keyin < MYFIFO 
```

然后我通过以下方式将命令写入管道：

```
root@ubuntu: echo "test" > MYFIFO 
```

我希望服务接受“测试”，将其打印出来，然后等待下一个输入，但是，在第一次运行之后，它会无限地打印出“测试”，并且即使我删除了也不会再次响应管道文件它。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:07:57.843

您应该检查`scanf()`. 请注意，每次获得相同的重复缓冲区时，`scanf()`都会返回一个负值。

```
int main(int argc, char *argv[]){
   char buf[80];
   int i = 1;
       while(i++){
       if(scanf("%s", buf) > 0){
           printf("print %d string: %s \n\n", i, buf);
       }
       sleep(2);
    }
    return 0;
} 
```

另外，请注意，命名管道与普通管道或控制台不同，其行为**会**有所不同。

# jquery - 使用 jQuery 在某个索引处插入 html 内容

> ID：14094218
> 
> 赞同：1
> 
> 时间：2012-12-30T20:09:50.653
> 
> 标签：jquery

我在这里遇到了一个奇怪的情况。我有三个链接正在使用 ajax 加载内容。第一次按下这三个链接中的一个时，内容会向下滑动，但我希望下一个 li 根据它们在主菜单中的位置向左/向右设置动画。现在它们被附加到#content 元素中。

我想要的是从一开始就给加载的内容一个特定的索引..作为出现在主菜单中的索引..

[你可以在http://www.open mind.ro/](http://www.openminded.ro/)看到一个例子

这是我现在正在使用的脚本：

```
// JavaScript Document
$(document).ready(function(){
    $("#main-menu a").click(function(e){
        e.preventDefault();

        var $a = $(this);
        var $clicked = $a.attr('href').substr(1);

        if($('#logo').hasClass('unmoved')) {
            $('#logo').animate({marginTop:'30px'}, 500, function(){
                $a.removeClass('unmoved').addClass('moved');
            }); 
        }

        $("#main-menu .active").removeClass('active');
        $a.addClass('active');

        if($('#content ul li.' + $clicked).length == 0) {
            $.ajax({
                url: '/resources/ui' + $(this).attr('href') + '.php',
                cache: false
            }).done(function(html) {
                if($('#content ul').html().trim().length == 0) {
                    $("#content ul").html(html).find('li').slideDown(500);
                } else {
                    $("#content ul").css('width',($("#content ul").width() + 900) + 'px');
                    $('#content ul').append(html).find('li.' + $clicked);
                    $a.trigger('click');
                }
            });
        } else {
            $('#content ul').animate({left:-$('#content ul li.' + $clicked).index() * 900 + 'px'}, 500, 'easeInQuart');
        }

    });
}); 
```

现在，如果您按顺序按链接，一切正常：关于我们/投资组合/联系但如果您从投资组合链接开始，然后按关于我们..您会看到关于我们在投资组合之后，但它必须在它之前..我想从一开始就设置它的索引..

当我加载它时，我想在索引 0、投资组合 1 和联系人 2 处设置关于我们，而不依赖于这三个链接之一是否已被按下

有解决办法吗？或者我必须以艰难的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:46:12.057

问题似乎出在这一行：

> $('#content ul').append(html).find('li.' + $clicked);

它会盲目地将下一段文本附加到之前的任何内容的末尾，因此如果您先单击“联系”，它将位于“关于我们”的左侧。

还有其他类似的问题也会出现，例如尝试双击任何一个链接，您可能会看到文本加载两次。（ `if($('#content ul').html().trim().length == 0)`在第一次 click&ajax 请求正在进行时仍然是 true，所以第二次点击会触发 ajax 请求，现在有两次内容。）

## 理念一

解决所有这些问题的一种方法是忘记使用 ajax 而只是预加载所有内容。

## 想法 2

如果你需要使用 ajax...
因为你知道总是有 3 个文本部分，我建议你预先加载所有的`<li>`标签，然后在每个按钮被点击时填写它们。我使用`.data()`jquery 中的方法将按钮链接到正确的容器。

你的 index.php 页面可以像这样开始：

```
<div id="main-menu">
    <a data-container=".about-us" href="/about-us">About us</a>
    <a data-container=".portfolio" href="/portofolio">Portofolio</a>
    <a data-container=".contact" href="/contact">Contact</a>
</div>
<div id="content">
    <ul>
        <li class="module about-us"></li>
        <li class="module portfolio"></li>
        <li class="module contact"></li>
    </ul>
</div>

$('#main-menu a').click(function() {
    var target = $(this).data('container');
    $.ajax({
        // request setup ...
    }).done(function(html) {

        $(target, '#content').html(html);

        // animate and stuff ...
    });
}); 
```

# java - 准备好的语句连接错误

> ID：14094220
> 
> 赞同：0
> 
> 时间：2012-12-30T20:10:12.423
> 
> 标签：java, jdbc, prepared-statement

我正在尝试使用 Prepared Statement 插入记录（到嵌入式 Java 数据库中）。我希望在单击保存按钮 (JButton) 时输入信息。我是 Java 新手，从未尝试过使用准备好的语句。

我无法让我的连接 (con) 知道它是一个连接。以下代码用于我放置在动作侦听器中的准备好的语句。

请让我知道我做错了什么。非常感谢您的参与。我希望我正确地编写了代码。

```
String sql = "INSERT INTO Users (UserId, fName, lastName, userName, password) VALUES (?, ?, ?, ?, ?)";
PreparedStatement stmt = con.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);

stmt.setString(2, "fName" );
stmt.setString(3, "lastName" );
stmt.setString(4, "userName" );
stmt.setString(5, "password" );
stmt.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T20:12:04.400

这个片段：

```
Connection con = DriverManager.getConnection(host, uName, uPass); 
```

将表明`Connection` `con`仅在本地定义。使其成为类成员变量并使用：

```
con = DriverManager.getConnection(host, uName, uPass); 
```

* * *

您似乎没有在您的第一个参数中设置`PreparedStatement`：

```
stmt.setString(1, UserId); 
```

您还确定要为参数设置文字值吗？

**更新：**

由于第一个参数是自动生成的，您可能需要：

```
String sql = "INSERT INTO Users (fName, lastName, userName, password) VALUES (?, ?, ?, ?)";

PreparedStatement stmt = ...   
stmt.setString(1, fName);
stmt.setString(2, lastName);
stmt.setString(3, userName);
stmt.setString(4, password); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:32:25.300

问题不在于准备好的语句。它比这更基本。

> con.prepareStatement... con 带有下划线并表示它找不到变量

这意味着`con`不在范围内。我们不知道你实际上做了什么，但这里有一个例子：

```
if (foo) {
    Connection con = DriverManager.getConnection(host, uName, uPass);
}
String sql = "INSERT INTO Users (UserId, fName, lastName, userName, password) " +
             "VALUES (?, ?, ?, ?, ?)";

// Compilation error     vvv
PreparedStatement stmt = con.prepareStatement(sql, 
                                              Statement.RETURN_GENERATED_KEYS); 
```

问题是它`con`是一个局部变量，它在声明它的块的末尾超出了范围。如果您尝试使用超出范围的变量，编译器会说它找不到它。本质上，它不知道您在说什么变量....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:24:20.170

用于创建连接对象以连接数据库。像这样尝试...

```
Connection con = DriverManager.getConnection(DB_host, DB_UserName, DB_UserPassword); 
```

它将为 Connection 类创建本地对象 con。

从您的陈述中，我了解到您正在使用**UserId**作为自动增量字段。您无需明确输入值。

因此，您将您的语句修改为

```
String sql = "INSERT INTO Users (fName, lastName, userName, password) VALUES (?, ?, ?, ?)";
PreparedStatement stmt = con.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);
stmt.setString(1, "fName" );
stmt.setString(2, "lastName" );
stmt.setString(3, "userName" );
stmt.setString(4, "password" );
stmt.executeUpdate(); 
```

试试看。希望它对你有用。

# c++ - GCC 标准库 XCode 4.5

> ID：14094221
> 
> 赞同：0
> 
> 时间：2012-12-30T20:10:14.310
> 
> 标签：c++, gcc, dll, std

如何在 XCode 4.5 中使用 GCC 标准库？当我写作时，`std::decimal::decimal128 a;`我得到一个错误，因为 XCode`std`是标准 C++ 库，而不是 GCC 标准库。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:51:57.413

对于 gcc 的十进制操作是编译器内置的。[TR 24732](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1312.pdf)指定的 C 扩展被转移到 C++。尽管某些操作是从库链接的，但没有任何库可以从另一个编译器中使用。因此，我认为它不会帮助您使用不同的标准库。通常，您可以使用该选项更改[clang](http://clang.llvm.org/)的标准 C++ 库。`-stdlib=...`

在某些时候，有一个公开的 C++ [TR 24733](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2009/n2849.pdf)实现，但目前似乎无法访问。我有点希望我能在明年的某个时候提供一个开放的实现，但由于这是我实际工作的一部分，所以我不能决定是否以及如果可以的话，什么时候可以提供这项工作。使用例如 IBM 的[decNumber](http://speleotrove.com/decimal/decnumber.html)库的基本实现相当简单。但是，即使使用 decNumber，完成一个完整的实现也需要一些工作。

# python - 如何从另一个 Python 文件运行不在目录中的 Python 文件？

> ID：14094224
> 
> 赞同：7
> 
> 时间：2012-12-30T20:10:19.563
> 
> 标签：python, python-3.x, exec

假设我有一个文件 foo.py，并且在文件中我想执行一个文件 bar.py。但是，bar.py 与 foo.py 不在同一个目录中，它在一个名为 baz 的子目录中。会`execfile`工作吗？怎么样`os.system`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T20:22:03.503

只需添加一个空`__init__.py`文件来`baz`表示一个模块，然后`foo.py`：

```
from baz import bar 
```

当然，除非您有充分的理由不制作`baz`模块（并使用 execfile）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T21:40:43.330

导入 sys，通过在运行时附加路径来更改“sys.path”，然后导入有帮助的模块

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T20:22:42.967

问题意味着您想将这些作为脚本运行，所以是的：您可以在 2.X 或[子](http://docs.python.org/3.1/library/subprocess.html)进程中使用 execfile （调用解释器并将脚本作为参数传递）。您只需要提供文件的绝对路径。

```
# Python 2.X only!
execfile ('c:/python/scripts/foo/baz/baz.py') 
```

当然，从字面上看是很脆弱的。如果 baz 始终是 foo 的子目录，则可以从 foo 的**文件**中派生它：

```
baz_dir = os.path.join(os.path.dirname(__file__), "baz")
baz_file = os.path.join(baz_dir, "baz.py")
execfile(baz_file) 
```

如果这两个文件都位于您的 python 可以看到的位置 - 即文件夹位于[sys.path](http://docs.python.org/2/tutorial/modules.html#the-module-search-path)或已使用[站点](http://docs.python.org/2/library/site.html)添加到搜索路径中，您可以从 foo 导入 baz 并直接调用它的函数。如果您需要实际对来自 baz 的信息采取行动，而不是仅仅触发一个动作，这是一个更好的方法。 [只要每个文件夹中有一个**init** .py](http://docs.python.org/3.2/tutorial/modules.html#the-module-search-path)你就可以

```
import baz
baz.do_a_function_defined_in_baz() 
```

# django - Django中另一个类的id

> ID：14094227
> 
> 赞同：0
> 
> 时间：2012-12-30T20:10:37.397
> 
> 标签：django

我有 2 个模型：

```
class Producer(models.Model):
    def __unicode__(self):
            return self.name
    def get_absolute_url(self):
        return "/prod/%i/" % self.id 
    name = models.CharField(max_length=10, unique=True)

class Car(models.Model):
    def __unicode__(self):
            return self.name
    def get_absolute_url(self):
        return "/prod/%s/car/%i" % Producer.id, self.id 
    name = models.CharField(max_length=10, unique=True)
    prod = models.ForeignKey(Producer) 
```

在`/sitemap.xml`我有一个错误：`type object 'Producer' has no attribute 'id'`。如何进入`get_absolute_url`（汽车类）`id`的方法`Producer`？谢谢。我尝试`Producer_id`，`Producer__id`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:12:50.760

它应该是：

```
def get_absolute_url(self):
    return "/prod/%s/car/%s" % (self.prod.id, self.id) 
```

还可以查看您的代码，还可以进行两项改进：

1.  模型类方法应该在字段之后
2.  您应该使用[reverse-resolution-of-urls](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-resolution-of-urls)而不是对 url 进行硬编码，`/prod/%s/car/%s`这是一种不好的做法。

# parsing - 使用 Go 解析 Go 时间戳

> ID：14094228
> 
> 赞同：10
> 
> 时间：2012-12-30T20:10:41.840
> 
> 标签：parsing, time, go

`Go`打印时间

```
time.Now().String() 
```

作为

```
2012-12-18 06:09:18.6155554 +0200 FLEST 
```

或者

```
2009-11-10 23:00:00 +0000 UTC 
```

[http://play.golang.org/p/8qwq9U_Ri5](http://play.golang.org/p/8qwq9U_Ri5)

我该如何解析它？

我想 我不在这些国家，我想我可以得到所有类型的时区`FLEST`。`Finland Latvian Estonian Standard Time`我找不到一种统一的方式或模式来解析它`time.Parse`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-30T20:37:40.207

尽管`time.Parse()`接受诸如 之类的格式字符串，但使用time 中定义的[常量](http://godoc.org/time#_constants)`2006-01-02 15:04:05 -0700 MST`之一可能更简单。

```
const (
    ANSIC       = "Mon Jan _2 15:04:05 2006"
    UnixDate    = "Mon Jan _2 15:04:05 MST 2006"
    RubyDate    = "Mon Jan 02 15:04:05 -0700 2006"
    RFC822      = "02 Jan 06 15:04 MST"
    RFC822Z     = "02 Jan 06 15:04 -0700" // RFC822 with numeric zone
    RFC850      = "Monday, 02-Jan-06 15:04:05 MST"
    RFC1123     = "Mon, 02 Jan 2006 15:04:05 MST"
    RFC1123Z    = "Mon, 02 Jan 2006 15:04:05 -0700" // RFC1123 with numeric zone
    RFC3339     = "2006-01-02T15:04:05Z07:00"
    RFC3339Nano = "2006-01-02T15:04:05.999999999Z07:00"
    Kitchen     = "3:04PM"
    // Handy time stamps.
    Stamp      = "Jan _2 15:04:05"
    StampMilli = "Jan _2 15:04:05.000"
    StampMicro = "Jan _2 15:04:05.000000"
    StampNano  = "Jan _2 15:04:05.000000000"
) 
```

如果您使用字符串作为存储或编码时间的一种方式（例如使用限制性编码格式），您可能需要考虑使用[Unix time](http://godoc.org/time#Unix)。这样，您可以只存储一个`int64`（或两个，如果您保持纳秒数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-30T20:23:19.157

```
package main

import (
"fmt"
"time"
)

func main() {
    fmt.Println(time.Now())
    date := "2009-11-10 23:00:00 +0000 UTC"
    t, err := time.Parse("2006-01-02 15:04:05 -0700 MST", date)
        if err != nil {
                fmt.Println("parse error", err.Error())
        }
        fmt.Println(t.Format(time.ANSIC))
} 
```

游乐场：[http ://play.golang.org/p/hvqBgtesLd](http://play.golang.org/p/hvqBgtesLd)

[请参阅http://golang.org/src/pkg/time/format.go?s=15404:15450#L607](http://golang.org/src/pkg/time/format.go?s=15404:15450#L607)处的源代码

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-01T14:07:48.567

time.String 的文档给出了它使用的格式：“2006-01-02 15:04:05.999999999 -0700 MST”。首先是使用相同的格式进行解析。

不过，时区可能对您来说是个问题。如果您必须解析您知道使用 time.String 生成但在其他时区生成的时间，则您必须拥有其他时区的 zoneinfo。请参阅 LoadLocation 下的文档。如果您无法获取 zoneinfo，无法将其安装在您的系统上，或者无法冒在某个新的未知时区失败的风险，那么 time.String 格式不适合您。您将必须获取不同格式的时间戳，或从字符串中删除时区并使用修改后的格式解析修改后的字符串。

# c# - Youtube API 上传被中止

> ID：14094230
> 
> 赞同：1
> 
> 时间：2012-12-30T20:11:09.007
> 
> 标签：c#, .net, youtube-api

我正在尝试使用 C# 将视频上传到 Youtube。它确实适用于非常小的视频，但对于较大的视频，上传每次都会中止。那是我的代码：

```
public void VideoAPIUpload(Video video)
{
    YouTubeRequestSettings settings = new YouTubeRequestSettings("example app", "AI39si4mUhdQfat8Dsd54qDjKSXYYnYxTaIX5PNurJetTvcAPagRvbSSR2o5xDH_obI4TEDvNieOhHEUmD9_cw0qPD51zj_wpA", "Minecraftexpertenerten@gmail.com", "mutter123") { Timeout = -1 }; ;
    settings.Maximum = -1;
    YouTubeRequest request = new YouTubeRequest(settings);
    Google.YouTube.Video newVideo = new Google.YouTube.Video();
    newVideo.Title = video.title;
    newVideo.Tags.Add(new MediaCategory("Autos", YouTubeNameTable.CategorySchema));
    newVideo.Keywords = video.tags;
    newVideo.Description = video.description;
    newVideo.YouTubeEntry.Private = false;
    newVideo.Tags.Add(new MediaCategory("mydevtag, anotherdevtag",
      YouTubeNameTable.DeveloperTagSchema));

    // alternatively, you could just specify a descriptive string
    // newVideo.YouTubeEntry.setYouTubeExtension("location", "Mountain View, CA");

    newVideo.YouTubeEntry.MediaSource = new MediaFileSource("funny_video.flv",
      "video/x-flv");
    Google.YouTube.Video createdVideo = request.Upload(newVideo);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:24:11.127

.NET GData 库有一个默认的客户端超时，当上传特别大的视频或使用慢速连接时，很容易触发它。

请参阅[http://code.google.com/p/google-gdata/issues/list?can=1&q=timeout](http://code.google.com/p/google-gdata/issues/list?can=1&q=timeout)了解许多类似报告的示例，以及会增加超时的相关代码更改。

# javascript - 如何按给定的比例因子放大 Javascript 数组？

> ID：14094235
> 
> 赞同：1
> 
> 时间：2012-12-30T20:11:32.310
> 
> 标签：javascript, arrays

我正在尝试编写一个 Javascript 函数，通过给定的整数比例因子放大 2D Javascript 数组。“放大”数组的宽度和高度应该是原始数组宽度和高度的两倍，如下例所示。

```
function magnifyArray(arr, scaleFactor){
    // magnify arr by the given scale factor
}

var arr1 = [
    [0, 1],
    [1, 0]
]

var arr2 = magnifyArray(arr1, 2);
console.log(arr2);
//arr2 should now be:
//[[0, 0, 1, 1],
//[0, 0, 1, 1],
///[1, 1, 0, 0],
//[1, 1, 0, 0]
//] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T20:20:59.787

哦，丑陋的

```
function mag(matrix, scale) {
    var rows = matrix.length, cols = matrix[0].length;
    var mat = [];
    for (var i = 0; i < rows; i++) {
        var row = [];
        for (var j = 0; j < cols; j++) {
            for (var k = 0; k < scale; k++) {
                row.push(matrix[i][j]);
            }
        }
        for (var k = 0; k < scale; k++) {
            mat.push(row);
            // or use mat.push(row.slice(0)); to clone duplicate rows
        }
    }
    return mat;
} 
```

请注意，当我复制行时，我不会克隆数组对象。如果您稍后修改一行，这可能会导致意外结果，但否则会提高效率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T20:34:26.477

这种递归方法适用于具有任意维数的数组：

```
function mag(arr, scale) {
    var res = [];
    if(!arr.length)
        return arr;
    for (var i = 0; i < arr.length; i++) {
        var temp = mag(arr[i], scale);
        for (var k = 0; k < scale; k++) {
            res.push(temp.slice ? temp.slice(0) : temp);
        }
    }
    return res;
} 
```

对于非数组，它将返回对象本身。

小提琴：http: [//jsfiddle.net/Q2T4J/4/](http://jsfiddle.net/Q2T4J/4/)

**[编辑]**：添加 .slice(0) 以将数组元素复制到新的数组对象（这对于您的场景可能不是必需的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T20:21:20.610

对于简单值数组的数组，magnifyArray 将生成您的示例结果。

```
function replicateEntries( a , x ) {
    var i, j, result = new Array();
    for ( i = 0 ; i < a.length ; ++i ) {
        for ( j = 0 ; j < x ; ++j ) result.push( a[i] );
    }
    return result;
}

function magnifyArray( a , x ) {
    var i, rows = new Array();
    for ( i = 0 ; i < a.length ; ++i ) {
        rows.push( replicateEntries( a[i] , x ) );
    }
    return replicateEntries( rows , x );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T20:16:26.713

您将不得不以艰难而无聊的方式进行操作，因为其中不包含任何内容。

例如 ：

```
var a =
[
[0, 1],
[1, 0]
];
var scale = 2;
​var b =​ [];
for (var i=0; i<a.length; i++) {
    var bi = [];
    var ai = a[i];
    for (var j=0; j<ai.length; j++) {
        for (var k=0; k<scale; k++)  bi.push(ai[j]);
    }
    for (var k=0; k<scale; k++)b.push(bi);
}​ 
```

# node.js - 403/禁止使用 Express 3 / 节点的错误自定义页面

> ID：14094236
> 
> 赞同：5
> 
> 时间：2012-12-30T20:11:38.570
> 
> 标签：node.js, express

如何创建可以处理 Express 的 403 错误的路由？我有捕捉 404/500 的默认路由，但它似乎在去路由器之前就停止了。只需将转储堆栈到屏幕。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T21:46:40.017

要在 express 中捕获错误，请使用具有四个参数的中间件：

```
app.use(handleErrors);

function handleErrors(err, req, res, next) {
  res.send('This is your custom error page.');
} 
```

为确保错误是 403 错误，您可以执行以下操作：

```
app.use(handle403);

function handle403(err, req, res, next) {
  if (err.status !== 403) return next();
  res.send('403 error');
} 
```

# python - psycopg2 以字符串形式返回数字

> ID：14094238
> 
> 赞同：0
> 
> 时间：2012-12-30T20:12:02.620
> 
> 标签：python, psycopg2

每次我尝试使用 psycopg2（另存为数字）返回数字时，它们最终都是字符串数据类型。

如何以 int、float 或 double 形式返回它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T23:43:33.623

[常见问题解答](http://initd.org/psycopg/docs/faq.html#faq-float)描述了执行此操作的方法。您基本上注册了一个类型处理程序。`Numeric`在该页面上搜索。根据常见问题解答，您可以这样做：

```
DEC2FLOAT = psycopg2.extensions.new_type(
    psycopg2.extensions.DECIMAL.values,
    'DEC2FLOAT',
    lambda value, curs: float(value) if value is not None else None)
psycopg2.extensions.register_type(DEC2FLOAT) 
```

# iphone - 获取 iPhone 的 IP 地址

> ID：14094247
> 
> 赞同：1
> 
> 时间：2012-12-30T20:13:03.480
> 
> 标签：iphone, objective-c, ios, ip

我正在尝试获取设备的 IP 地址，但没有成功。我在 Google 和 SO 上能找到的所有方法都不起作用。

例如，最近的答案

[https://stackoverflow.com/a/14084031/975959](https://stackoverflow.com/a/14084031/975959)

我收到编译错误：

> 使用未声明的标识符“getifaddrs”

和

> 使用未声明的标识符“freeifaddrs”

我和问这个问题的人有同样的问题。 `gethostname()`return`*****s-iPhone`并在此行中使用它`struct hostent *host = gethostbyname(...)`返回`NULL`

我正在设备上工作，但我猜编译错误与它无关。

有什么想法吗？

## 附言

如果重要的话，我使用的是 Base SDK 6.0，部署目标 5.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T20:15:41.253

你必须包括那些

```
#include <sys/types.h>
#include <sys/socket.h>
#include <ifaddrs.h>
#include <net/if.h>
#include <netdb.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T00:05:17.223

1.  转到项目的目标
2.  选择“构建设置”部分
3.  搜索“与标准库的链接”
4.  将其设置为是

# c# - DSACryptoServiceProvider 的 .NET 4.0 DsaKeyValue 必需/可选参数查询

> ID：14094255
> 
> 赞同：1
> 
> 时间：2012-12-30T20:14:01.167
> 
> 标签：c#, cryptography, dsa, keyczar

我对加载 XML 的必需/可选要求有点困惑`DSACryptoServiceProvider`。

从[这个](http://www.w3.org/TR/xmldsig-core/)网站，以下是架构：架构定义：

```
 <element name="DSAKeyValue" type="ds:DSAKeyValueType"/> 
   <complexType name="DSAKeyValueType"> 
     <sequence>
       <sequence minOccurs="0">
         <element name="P" type="ds:CryptoBinary"/> 
         <element name="Q" type="ds:CryptoBinary"/>
       </sequence>
       <element name="G" type="ds:CryptoBinary" minOccurs="0"/> 
       <element name="Y" type="ds:CryptoBinary"/> 
       <element name="J" type="ds:CryptoBinary" minOccurs="0"/>
       <sequence minOccurs="0">
         <element name="Seed" type="ds:CryptoBinary"/> 
         <element name="PgenCounter" type="ds:CryptoBinary"/> 
       </sequence>
     </sequence>
   </complexType> 
```

但是，根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/hh868316.aspx)，DsaKeyValue XML 定义如下：

```
<DSAKeyValue>

  <!-- Child elements -->
  P,
  Q,
  G?,
  Y,
  J?,
  Seed,
  PgenCounter

</DSAKeyValue> 
```

从 XML 导入时，我得到了错误的数据。以下是我的代码：

```
JsonDictionary privateKeyDictionary = (JsonDictionary) JsonReader.Parse(privateKey);
//FYI: this private signing key was generated using Keyczar.

var dsaParameterArray = privateKeyDictionary["publicKey"] as JsonDictionary;

    DSACryptoServiceProvider signer = new DSACryptoServiceProvider(1024);

    var pArray = Encoding.UTF8.GetBytes(dsaParameterArray["p"].ToString());
    string p = Convert.ToBase64String(pArray);

    var qArray = Encoding.UTF8.GetBytes(dsaParameterArray["q"].ToString());
    string q = Convert.ToBase64String(qArray);

    var gArray = Encoding.UTF8.GetBytes(dsaParameterArray["g"].ToString());
    string g = Convert.ToBase64String(gArray);

    var yArray = Encoding.UTF8.GetBytes(dsaParameterArray["y"].ToString());
    string y = Convert.ToBase64String(yArray);

    xml = String.Format("<DSAKeyValue><P>{0}</P><Q>{1}</Q><G>{2}</G><Y>{3}</Y><J/><Seed/><PgenCounter/></DSAKeyValue>", p, q, g, y);
    doc = new XmlDocument();
    doc.LoadXml(xml);
    signer.FromXmlString(doc.InnerXml); 
```

综上所述，我的问题是我的密钥中没有“J”、“Seed”和“PgenCounter”，因此我没有提供它们。根据 W3C，这是可选的。但是，我的密钥中确实有一个“x”，但不确定那是什么。

根据 W3C，Seed 和 PgenCounter 标签是可选的。但是，MSDN 根据需要对其进行了定义。

我试过删除 J、Seed 和 PgenCounter 标签，但这似乎没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T23:52:07.783

这是我为此示例生成的测试 Dsa 密钥的 Mono 示例输出：

```
<DSAKeyValue
    <P>jTBkDXQ38ZCYNzCK8gmweKsJ/mTqtDkf9TMNJnJycC4Hel2B/owSoOBGclAXhFLkvGqOC+zz8uMz7X2K31rvTpFxhTD7j6MDiVkjQEhFIacb6+TUn71x0KdN3nZo0CR8QgkkU10bkjHq2409S34pU6d8fZaMUFyOFZtSbkxFGV8=</P>
    <Q>6N/tEzeK0DS5nS/PBg944efSlPs=</Q>
    <G>OCsUHXdniP4HpLV537LsaetSI3DQRI8dyQUOdhpCFk00t+/Sadokn2rt0dYkL1KCGTc74Z9fXpCKA0ae3aqh63GvV6Uznjn8Mm75jeS9O03YyNmTMKTi1mcTFVipLanaWskqR9o3+DaTY6Puk7UkL9dDEsF+njAE412DCihej0Q=</G>
    <Y>gjzX/7ggD8ax1inJv+7GsDNcLWr7wvxLvBETO0BxrMYABP4cH4xF/w63dghNgXOSEFKZ8SFQZpdDhG6LLlysIzOW/KvEE/L2/xkT4tWZUAhxYkVbdjfphVkH4IVqrKbpUUsHcTj/7qc7FtEepWLlywIMNW3dTeeaP3DuKnMIn7w=</Y>
    <J>mzWoXBr+3jptO5/JOYh+bNckQgwuwHhCyqbGCJotoVpZzTts10rWEOdf0wQGtWTCXnpU/so1P8S6ZItvflYJxX77fZxv9iEOLcaNIUwBbgv2Jf5kRFx9xAz0yafHQTSyzZJW7bcc+mU2SaG6</J>
    <Seed>NfC0CEI+/bzAnuyGgUo2PHTLyw8=</Seed>
    <PgenCounter>OA==</PgenCounter>
    <X>pK0LlCD6PLynniOKtW/S+iyR3F8=</X>
</DSAKeyValue> 
```

这包括私有参数。如果我只包含公共参数，则输出为：

```
<DSAKeyValue>
    <P>6run4SADV/kR/oEUmYXCTIqwWHG9yE+vMlnAbh4+I1YYTTCZ7Mf9BKZ6Z4WlSk+7WcnX+idT0HI5lOht+f5p32Z7aV86f89fLz4FTB+6r5B/cF8hhNe3mdGVpzzInwh2o16H9ejaB4chgOMASgeeBdNSzgVfj2RRWOZVX8wXWKU=</P>
    <Q>mfCvMD98ObtyBO1bJ6rIno2Wxws=</Q>
    <G>kgwCcpUWTyGaps8P/ePGj+CZUKSl2kxeJUSABYkgOa5I7OVIWrEgNl5fxCrs7qjXwJ+P+hQFe3HeHZWXONGgHpuakvDtp+G0wXuNUIF4vVwmZ0ff63TMFHGdUQXhsJPtK4ZK3LppSvWXACSzvZETH35A79nm4WRXlAIcHpxyeyg=</G>
    <Y>3fUEqW303wicxGJwsq1DoGKtvNUc3Eo33fpsdHMtZj+SyOH5ihvgKE7qd8yQxZH5qMI+5SFTokdwD8lh1jwmIq+Rrf2hi3RjZqNx+Lf3c6xRW3vDZSeTKwW/2xPiA+5z1rpO1/o2Bo5vV8i0ML3ik0VZasNVouo3C9KSX7Ya2cw=</Y>
    <J>AAAAAYZbcc5kA7nb5725pbY/qaTakYrxutdCZKEbtFu8KeXYFLCyw3FWlhmvMsStoAkleCnop0bBIoI3FLSEq5ZqUGcBfpNsV4qCs6tKcS7aZ8OFWpXncrYF1pwpaKpdzjDCaV69CEgkDCdQHw4gbA==</J>
    <Seed>n6ylLBasoS2Xqoc+QvBAXxQaFsc=</Seed>
    <PgenCounter>Dg==</PgenCounter>
</DSAKeyValue> 
```

请注意缺少的“X”值，即私钥。

您不应该尝试手动解析这些。相反，请使用该[`DsaCryptoServiceProvider.FromXmlString`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.dsa.fromxmlstring.aspx)方法。此外，除非我误读了输出，否则这*与*W3C 标准兼容，尽管我在上面发表了评论。

编辑

这是我用来生成密钥的代码。请记住，这是在 Mac OS X 上使用 Mono，但我认为它在 Windows 上的 .NET 中也可以正常工作。

```
using System;
using System.Security.Cryptography;

namespace DsaParametersToy
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            var dsa = new DSACryptoServiceProvider(1024);
            var dsaparams = dsa.ToXmlString(false);
            Console.WriteLine (dsaparams);
        }
    }
} 
```

# javascript - JavaScript替换字符串中的多个数字

> ID：14094258
> 
> 赞同：1
> 
> 时间：2012-12-30T20:14:15.360
> 
> 标签：javascript, replace

我试图制作一个 JavaScript 函数，用更大的数字替换一个数字，但我无法让它工作。

我尝试了很多没有运气的事情。

```
<script type="text/javascript">
function change(text) {
 var array = {"1":"6", "2":"7", "3":"8", "4":"9", "5":"0", "6":"1", "7":"2", "8":"3", "9":"4", "0":"5",}

 for (var val in array)
    text = text.replace(new RegExp(val, "g"), array[val]);

 return text;
}

document.write(change('123456789'));
</script> 
```

这会返回`123401234`，但应该会返回`6789012345`

我也试过这个：

```
function change_new(text) { text = text.replace(/1/g, "6").replace(/2/g, "7").replace(/3/g, "8").replace(/4/g, "9").replace(/5/g, "0").replace(/6/g, "1").replace(/7/g, "2").replace(/8/g, "3").replace(/9/g, "4").replace(/0/g, "5"); return text; } 
```

结果相同。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T20:17:11.017

您不能使用多个替换呼叫，否则您将替换已替换的号码。使用带有函数的替换作为替换：

```
var numbers = {"1": "6", "2": "7", ...};
text = text.replace(/\d/g, function(match) {
    return numbers[match[0]]; // [0] is the entire matched text, which is one digit
}); 
```

# php - 将 Wordpress 帖子排除在各自的类别中

> ID：14094260
> 
> 赞同：0
> 
> 时间：2012-12-30T20:14:23.267
> 
> 标签：php, wordpress, categories

长标题，我知道 :) 但无论如何，我想做的是从其各自的类别中隐藏一个帖子。所以假设我提交了一篇文章并将其归档在新闻类别下，如果需要，我希望它不会出现在其各自的类别页面中。奇怪的要求，我知道..

我这样做的方法是创建一个名为“hide”且具有任何值的自定义字段，然后将 div 类“post”的 CSS 样式回显到`display:none`. 这是 PHP if 语句：

```
<?php } if($hide) { ?>

echo '<style type="text/css"> .post {display:none;} </style>';

<?php } ?> 
```

当输入自定义字段“隐藏”的任何值时，这成功隐藏了 div“帖子”，但问题是......它隐藏**了**我所有的帖子！因为我的所有帖子都显示在 div 类“post”下，并且回显的 css 样式被应用于所有 .post div，而不仅仅是我输入自定义字段的那个。

查看我的 Wordpress 帖子，每个帖子都有单独的数字和 div 值。从理论上讲，我可以手动输入每个 div 的 id 并在输入每个帖子后隐藏每个帖子，但这会花费太长时间。

在这一点上，老实说，我不知道如何解决这个问题，所以它只隐藏了我输入自定义字段的帖子。任何帮助将不胜感激！:)

更新：我忘了提到我还使用其他自定义字段来显示帖子。这是我完整的 php 代码的外观：

```
<?php } if (is_category('audio')) { ?>
<div class="entry-summary">
<?php if (has_post_thumbnail()){ ?>
<?php if($audiohover == '5') { ?>
<div class="view view-fifth">
<?php the_post_thumbnail(); ?>
<div class="mask">
<a href="<?php echo esc_url_raw( $url ); ?>" class="info" target="_blank"><img src="else" /></a>
</div>
</div>

<?php } elseif($audiohover == '6') { ?>
<div class="view view-fifth">
<?php the_post_thumbnail(); ?>
<div class="mask">
<a href="<?php echo esc_url_raw( $url ); ?>" class="info" target="_blank"><img src="else" /></a>
</div>
</div>              

<?php } elseif($audiohover == '4') { ?>
<div class="view view-fifth">
<?php the_post_thumbnail(); ?>
<div class="mask">
<a href="<?php the_permalink(); ?>?fromwhere=audio"" class="info"><img src="img" /></a>
</div>
</div>

<?php } if($hide) { ?>

<?php } ?>

<?php } ?>

<?php } ?> 
```

**我想要实现的目标摘要：我想选择是否在其各自的类别页面中显示帖子。示例：我在“新闻”类别下发布了一些内容。当我进入新闻类别页面时，我希望能够选择在新闻类别下提交的帖子是否可见。我现在这样做的方式是通过自定义字段。阅读问题，看看为什么它不能正常工作！:(**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:02:34.287

你可以试试这个：

```
$hide = get_post_meta( $post->ID, 'hide', TRUE );

if ( $hide != '' ) {
  // Don't display
}
else {
  // Display post
} 
```

**更新**

您更新中的所有代码都针对一个类别，在这种情况下`audio`，因此该条件应位于顶部，如下所示：

```
<?php
if ( is_category( 'audio' ) ) {
$hide = get_post_meta( $post->ID, 'hide', TRUE );
  if ( $hide != '' ) {
  // Don't display
}
else { ?>

<div class="entry-summary">
<?php if ( has_post_thumbnail() ) { ?>
    <?php if ( $audiohover == '5' ) { ?>
      <div class="view view-fifth">
        <?php the_post_thumbnail(); ?>
        <div class="mask">
          <a href="<?php echo esc_url_raw( $url ); ?>" class="info" target="_blank"><img src="else" /></a>
        </div>
      </div>

      <?php
    }
    elseif ( $audiohover == '6' ) {
      ?>
      <div class="view view-fifth">
        <?php the_post_thumbnail(); ?>
        <div class="mask">
          <a href="<?php echo esc_url_raw( $url ); ?>" class="info" target="_blank"><img src="else" /></a>
        </div>
      </div>

      <?php
    }
    elseif ( $audiohover == '4' ) {
      ?>
      <div class="view view-fifth">
        <?php the_post_thumbnail(); ?>
        <div class="mask">
          <a href="<?php the_permalink(); ?>?fromwhere=audio"" class="info"><img src="img" /></a>
        </div>
      </div>

      <?php  } } } }?> 
```

也就是说，如果我理解正确的话。

# java - 在 JavaFX WebView 加载页面之前显示加载图像

> ID：14094264
> 
> 赞同：3
> 
> 时间：2012-12-30T20:14:44.623
> 
> 标签：java, javafx-2

我在桌面应用程序中使用 JavaFX 2.2，并且已经实现了 WebView 组件。我从桌面应用程序加载了 www.google.com。问题是我希望在页面加载之前显示一个 .gif 图像。现在，它显示一个白屏，然后显示页面。有没有办法做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T20:39:39.800

在加载准备好之前，您可以收听`WebEngine#loadWorker.stateProperty`并显示上面的动画 gif 。`WebView`

恕我直言，更好的是聆听并向`WebEngine#loadWorker.progressProperty`用户显示真实的加载进度。

```
 StackPane root = new StackPane();
    final ProgressBar progress = new ProgressBar(); // or you can use ImageView with animated gif instead

    WebView webView = new WebView();
    root.getChildren().addAll(webView, progress);
    final WebEngine engine = webView.getEngine();
    engine.load("http://stackoverflow.com/questions/14094264/display-loading-image-before-javafx-webview-loads-the-page");

    // updating progress bar using binding
    progress.progressProperty().bind(engine.getLoadWorker().progressProperty());

    engine.getLoadWorker().stateProperty().addListener(
            new ChangeListener<State>() {
                @Override
                public void changed(ObservableValue ov, State oldState, State newState) {
                    if (newState == State.SUCCEEDED) {
                         // hide progress bar then page is ready
                         progress.setVisible(false);
                    }
                }
            });

    Scene scene = new Scene(root, 500, 500);
    primaryStage.setScene(scene);
    primaryStage.show(); 
```

# c# - 在c#中卸载外部类库？

> ID：14094265
> 
> 赞同：0
> 
> 时间：2012-12-30T20:14:45.270
> 
> 标签：c#, .net, dll, mef

> **可能重复：**
> [从 AppDomain 卸载 .DLL 需要帮助 - 即使使用 ShadowCopy 仍无法正常工作](https://stackoverflow.com/questions/5034654/help-needed-with-unloading-dlls-from-appdomain-still-not-working-even-with-s)

在我的项目中，我使用 MEF 框架来提供可扩展性；主程序可以通过另一个 Lib.dll 类库进行扩展。

问题是我需要在不关闭主程序的情况下将这个**Lib.dll**与另一个交换。

那么如何卸载这个 Lib.dll 来交换它呢？

**更新**

主程序的形式为：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel.Composition;
using System.ComponentModel.Composition.Hosting;

namespace SimpleCalculator3
{

    public interface ICalculator
    {
        String Calculate(String input);
    }

    public interface IOperation
    {
        int Operate(int left, int right);
    }

    public interface IOperationData
    {
        Char Symbol { get; }
    }

    [Export(typeof(IOperation))]
    [ExportMetadata("Symbol", '+')]
    class Add : IOperation
    {
        public int Operate(int left, int right)
        {
            return left + right;
        }
    }

    [Export(typeof(IOperation))]
    [ExportMetadata("Symbol", '-')]
    class Subtract : IOperation
    {

        public int Operate(int left, int right)
        {
            return left - right;
        }

    }

    [Export(typeof(ICalculator))]
    class MySimpleCalculator : ICalculator
    {
        [ImportMany]
        IEnumerable<Lazy<IOperation, IOperationData>> operations;

        public String Calculate(String input)
        {
            int left;
            int right;
            Char operation;
            int fn = FindFirstNonDigit(input); //finds the operator
            if (fn < 0) return "Could not parse command.";

            try
            {
                //separate out the operands
                left = int.Parse(input.Substring(0, fn));
                right = int.Parse(input.Substring(fn + 1));
            }
            catch
            {
                return "Could not parse command.";
            }

            operation = input[fn];

            foreach (Lazy<IOperation, IOperationData> i in operations)
            {
                if (i.Metadata.Symbol.Equals(operation)) return i.Value.Operate(left, right).ToString();
            }
            return "Operation Not Found!";
        }

        private int FindFirstNonDigit(String s)
        {

            for (int i = 0; i < s.Length; i++)
            {
                if (!(Char.IsDigit(s[i]))) return i;
            }
            return -1;
        }

    }

    class Program
    {
        private CompositionContainer _container;

        [Import(typeof(ICalculator))]
        public ICalculator calculator;

        private Program()
        {
            //An aggregate catalog that combines multiple catalogs
            var catalog = new AggregateCatalog();
            //Adds all the parts found in the same assembly as the Program class
            catalog.Catalogs.Add(new AssemblyCatalog(typeof(Program).Assembly));
            //catalog.Catalogs.Add(new DirectoryCatalog("C:\\Users\\SomeUser\\Documents\\Visual Studio 2010\\Projects\\SimpleCalculator3\\SimpleCalculator3\\Extensions"));

            //Create the CompositionContainer with the parts in the catalog
            _container = new CompositionContainer(catalog);

            //Fill the imports of this object
            try
            {
                this._container.ComposeParts(this);
            }
            catch (CompositionException compositionException)
            {
                Console.WriteLine(compositionException.ToString());
            }
        }

        static void Main(string[] args)
        {
            Program p = new Program(); //Composition is performed in the constructor
            String s;
            Console.WriteLine("Enter Command:");
            while (true)
            {
                s = Console.ReadLine();
                Console.WriteLine(p.calculator.Calculate(s));
            }

        }
    }
} 
```

并且扩展的 Lib.dll 是形式

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel.Composition;

namespace ExtendedOperations {

    [Export(typeof(SimpleCalculator3.IOperation))]
    [ExportMetadata("Symbol", '%')]
    public class Mod : SimpleCalculator3.IOperation
    {
        public int Operate(int left, int right)
        {
            return left % right;
        }
    }

} 
```

就是这样，我想动态更改 Lib.dll 中的代码并在主程序运行时构建它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T21:00:39.773

您可以将文件加载到另一个 AppDomain 中，在不需要时可以将其卸载。

```
AppDomainSetup ads = new AppDomainSetup();
ads.PrivateBinPath = Path.GetDirectoryName("C:\\some.dll");
AppDomain ad2 = AppDomain.CreateDomain("AD2", null, ads);
ProxyDomain proxy = (ProxyDomain)ad2.CreateInstanceAndUnwrap(typeof(ProxyDomain).Assembly.FullName, typeof(ProxyDomain).FullName);
bool ok = proxy.LoadDll("C:\\some.dll");
AppDomain.Unload(ad2);

public class ProxyDomain : MarshalByRefObject
{
    public bool LoadDll(string assemblyPath)
    {
         Assembly myDLL = Assembly.LoadFile(assemblyPath);
        //use your dll here
    }
} 
```

# c++ - C++ 问题，返回一个函数。'*' 标记之前的错误预期主表达式

> ID：14094266
> 
> 赞同：0
> 
> 时间：2012-12-30T20:15:15.967
> 
> 标签：c++, qt4

我无法弄清楚为什么我不能返回我的函数。有任何想法吗？

我得到的错误是；'*' 标记和 ')' 标记之前的预期主表达式。

（不确定这是 C++ 还是 Qt 错误，我不是这两个方面的专家）

```
int MainWindow::createPacket(const QString &source)

    {
        QGraphicsView *editor = new QGraphicsView;
        int tabIndex = packet->addTab(editor, source); 
        packet->setCurrentIndex(tabIndex);

        return paintEvent(QPaintEvent*); <<<<<<<<< The line the error appears on.
    }

    void MainWindow::paintEvent(QPaintEvent*)
    {
        QPainter painter(this);
        painter.setRenderHint(QPainter::Antialiasing);
        painter.setPen(Qt::black);

        QRect rect = QRect(10, 20, 70, 40);
        painter.drawText(rect, Qt::AlignCenter,
                         "Source");
        painter.drawRect(rect);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:16:46.137

`QPaintEvent*`是一种类型。当你调用一个函数时，你不会将对象作为参数传递，而不是类型。

另外，由于参数 to`paintEvent`没有被命名，也没有被使用，为什么它在那里呢？为什么不简单地使用：

```
void MainWindow::paintEvent()
{
   //...
} 
```

代码无效，我无法想象它是如何工作的，或者你期望发生什么。这是基本的东西，在你开始使用 Qt 之前，我建议你先学习 C++（这并不意味着居高临下，只是一个建议）。

一个有效的调用将是，例如：

```
QPaintEvent* qpaintEventPointer = NULL;
paintEvent(qpaintEventPointer); 
```

但这是无效的，因为`paintEvent`返回`void`，而调用上下文返回`int`。

要返回一个函数本身，您需要返回一个函数指针，而不是`int`像您所做的那样，并且您不需要完整的签名，只需一个`return paintEvent`...

**[底线。](https://stackoverflow.com/q/388242/673730)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:50:06.643

即使您调用`MainWindow::paintEvent()`正确，此函数也不会返回任何内容，并且应该在系统需要绘制您的小部件时自动调用（请参阅[文档](http://doc.qt.digia.com/4.2/qwidget.html#paintEvent)）

我不确定您要做什么，但要触发重绘，您要调用 repaint()，而不是 paintEvent()。

# c# - 从 C# 代码中找出活动的 Jquery 选项卡索引是什么

> ID：14094267
> 
> 赞同：0
> 
> 时间：2012-12-30T20:15:19.053
> 
> 标签：c#, jquery, asp.net, tabs

我在两个单独的 Jquery 选项卡面板上有两个 aspx 按钮。我想从后面的 c# 代码中获取活动 Jquery 选项卡的索引，以便该选项卡中的按钮变得不可见。任何帮助将不胜感激。ASP：

```
 <asp:HiddenField ID="hiddenFGetActiveTab" runat="server"/>
            <button ID="btnGetActiveTab"></button>
            <div id="tabs">
            <ul>        
            <li><a href="#tabs-1"></a></li>        
            <li><a href="#tabs-2"></a></li>
            </ul>
            <div id="tabs-1" style="border: 1px solid #E5E5E5;">
            <asp:UpdatePanel ID="updatePanelSearchCustomer" runat="server" UpdateMode="Conditional">
            <contentTemplate>
            <asp:Button ID="btnCustSearch" runat="server" Text="Search" ToolTip="Click to Search" OnClick="btnCustSearch_Click" />
            <asp:Button ID="btnAddCustomer" runat="server" Text="Add New" CommandName="insert" Visible="True" ToolTip="Add to Workbasket" OnClick="addToWorkBasket_Click" />
            <asp:GridView ID="gridCustSearch" OnRowCreated="gridCustLicSearch_RowCreated runat="server"></asp:GridView>
            </ContentTemplate>
            </asp:UpdatePanel>                 
            </div>
            <div id="tabs-2" style="border: 1px solid #E5E5E5;">
            <asp:Button ID="btnSearchLicense" runat="server" Text="Search" ToolTip="Click to Search" />
            <asp:Button ID="btnAddLicense" runat="server" Text="Add to Workbasket" Visible="False" ToolTip="Add to Workbasket" OnClick="btnAddLicense_Click" />
            <asp:UpdatePanel ID="updatePanelLicenseSearchFields" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
            <asp:GridView ID="gridLicSearch" runat="server" OnRowCreated="gridCustLicSearch_RowCreated"></asp:GridView>
            </ContentTemplate>
            </asp:UpdatePanel>
            </div>
            </div> 
```

查询：

```
 <link href="../css/jquery-ui-1.9.2.custom.css" rel="stylesheet" />
            <script src="../js/jquery-1.8.3.js"></script>
            <script src="../js/reflection.js"></script>
            <script src="../js/jquery-ui-1.9.2.custom.js"></script>
            <script type="text/javascript">

            $(document).ready(function () {

            $(function () {
            $("#tabs").tabs({ event: "click" });

            });

            $('#btnGetActiveTab').click(function (event) {
            event.preventDefault();
            varTab = $("#tabs").tabs("option", "selected");
            document.getElementById("<%= hiddenFGetActiveTab.ClientID %>").value = varTab;
            //$("#hiddenFGetActiveTab").val(varTab);
            //alert(varTab);
            alert(document.getElementById("<%= hiddenFGetActiveTab.ClientID %>").value);
            });

            function tabChanged(tabIndex) {
            varTab = $("#tabs").tabs("option", "selected");
            $("#hiddenFGetActiveTab").val(varTab);
            alert(document.getElementById("<%= hiddenFGetActiveTab.ClientID %>").value);
            }
            }); 
```

C#代码背后：

```
 protected void gridCustLicSearch_RowCreated(object sender, GridViewRowEventArgs e)
            if (activeTabIndex == Tab-1)
            {
            //Make First button visible
            //do other stuff

            }
            else if (activeTab == Tab-2)
            {   
            //Make Second button visible
            //do other stuff

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:54:31.530

在没有看到您的任何代码的情况下，我建议您使用`<asp:HiddenField`...
每当您更改选项卡时，将隐藏字段设置为当前选项卡的索引。

然后，在代码隐藏中，您可以查看当前选择了哪个选项卡并根据需要启用/禁用某些东西......

简短示例：
在您的 aspx 页面中添加以下内容：

```
<asp:HiddenField ID="hdnField" runat="server" /> 
```

当您更改选项卡时（在 Javascript 中）：

```
function tabChanged(tabIndex)
{
    $("#hdnField").val(tabIndex);
} 
```

在代码隐藏中：

```
if (hdnField.Value == "1")
   .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:28:26.020

猜猜`ui.newTab.index()`会成功的。

请检查标签索引并相应地为您的按钮设置可见性。

比如像，

```
document.getElementById('<%=Button1.ClientID%>').style.display = 'block' 
```

你不必为此去服务器端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T21:04:26.770

我认为这可能会有所帮助 [http://api.jqueryui.com/tabs/#event-activate](http://api.jqueryui.com/tabs/#event-activate)

如果您可以处理选项卡激活事件，您可以设置一个带有状态的隐藏字段，或者对服务器进行 Ajax 调用以将数据发送到服务器会话。

另一种方法可能是，当您发布帖子时，检查 Active 选项 [http://api.jqueryui.com/tabs/#option-active](http://api.jqueryui.com/tabs/#option-active) 以将索引添加到发布的数据。

# c++ - 在opengl中使用特殊键让我的电脑真的很慢

> ID：14094269
> 
> 赞同：-1
> 
> 时间：2012-12-30T20:15:33.080
> 
> 标签：c++, performance, opengl, rotation, glut

我编写了一个 opengl 代码，在对象上绘制一些对象、灯光和纹理。箭头等特殊键旋转我的纹理映射对象。但如果我继续旋转它们约 10 秒，我什至无法关闭 opengl 窗口。我没有发布我的代码，它有点长，我不知道它的哪一部分会减慢它的速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:19:36.203

根据您在评论部分的回答，我想我知道发生了什么。

> glutSpecialFunc 调用我的箭头处理函数。在箭头处理程序中： if(GLUT_KEY_UP) {//rotate glutPostRedisplay();} if(GLUT_KEY_DOWN ....) ...... 以此类推

这不是在 glut 程序中处理键盘事件的正确方法。您实际上导致渲染循环中完成的工作量根据用户按键的数量而变化。

而不是发布重新显示以响应击键，您应该有一个主绘图循环，该循环继续独立于键盘活动重绘场景。您还需要有用于位置（x、y、z）的状态变量和用于查看旋转的角度。绘图例程使用这些状态变量中的 x、y、z 和旋转信息简单地绘制您的场景。

然后，对于您的键盘处理，您只需根据您在程序中支持的击键来适当地更改这些状态​​变量。主绘图循环将自动响应这些更改，因为它与键盘处理程序自由异步运行。

# javascript - jQuery - 检测鼠标是否还在？

> ID：14094272
> 
> 赞同：11
> 
> 时间：2012-12-30T20:16:03.697
> 
> 标签：javascript, jquery, plugins, mouse

我想知道是否有一种方法可以检测鼠标在 jQuery 中是否空闲 3 秒。有没有我不知道的插件？因为我不相信会有原生的 jQuery 方法。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-30T20:19:37.260

您可以监听`mousemove`事件，在它发生时启动超时并取消任何现有的超时。

```
var timeout = null;

$(document).on('mousemove', function() {
    clearTimeout(timeout);

    timeout = setTimeout(function() {
        console.log('Mouse idle for 3 sec');
    }, 3000);
}); 
```

[**演示**](http://jsfiddle.net/mw2gD/)

这在没有 jQuery 的情况下也可以很容易地完成（这里仅绑定事件处理程序是 jQuery 特定的）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-30T20:19:29.727

不需要插件，甚至根本不需要 jQuery：

```
(function() {
    var idlefunction = function() {
          // what to do when mouse is idle
        }, idletimer,
        idlestart = function() {idletimer = setTimeout(idlefunction,3000);},
        idlebreak = function() {clearTimeout(idletimer); idlestart();};
    if( window.addEventListener)
        document.documentElement.addEventListener("mousemove",idlebreak,true);
    else
        document.documentElement.attachEvent("onmousemove",idlebreak,true);
})(); 
```

# c# - 如何在 Directx 游戏中模拟鼠标点击

> ID：14094278
> 
> 赞同：1
> 
> 时间：2012-12-30T20:16:43.420
> 
> 标签：c#, c++, mouse, simulation, simulate

我有一个用 Directx 编写的游戏（不是我的，它是 mmo 游戏）。游戏窗口未激活（未最小化，只是位于其他窗口的后面，但如果可能，也可以将其最小化）。

我想模拟鼠标点击 x，y 位置。当我在游戏中单击时，Spy++ 不会在消息中显示任何内容。

现在我这样做了：

```
private void start_Click(object sender, EventArgs e)
    {
        IntPtr ActualWindow = GetActiveWindow();

        ShowWindow(hWnd, ShowWindowCommands.Restore); //show game window
        Thread.Sleep(50);                             //a little slow down
        ClickOnPoint(hWnd, new Point(692, 87));       //click on x,y
        Thread.Sleep(50);                             //again a little slow down
        ShowWindow(hWnd, ShowWindowCommands.Minimize);//minimize game window
        ShowWindow(ActualWindow, ShowWindowCommands.Restore);//restore last active window
//sleep is needed for click, if i will do it too fast game will not detect the click
    }

private void ClickOnPoint(IntPtr wndHandle, Point clientPoint)
    {
        POINT oldPoint;
        GetCursorPos(out oldPoint);

        ClientToScreen(wndHandle, ref clientPoint);

        /// set cursor on coords, and press mouse
        SetCursorPos(clientPoint.X, clientPoint.Y);
        mouse_event(0x00000002, 0, 0, 0, UIntPtr.Zero); /// left mouse button down
        Thread.Sleep(18);
        mouse_event(0x00000004, 0, 0, 0, UIntPtr.Zero); /// left mouse button up
        Thread.Sleep(15);

        /// return mouse 
        SetCursorPos(oldPoint.X, oldPoint.Y);
    } 
```

它是恢复游戏窗口点击点并最小化游戏窗口。

它很好用，但就在我不移动鼠标的时候......

我搜索别的东西。我想点击鼠标而不真正移动它。甚至有可能在游戏中做到这一点？我没有要单击的按钮的句柄，因为它是游戏...

PS对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:30:29.953

我用于模拟鼠标单击非活动窗口的一些代码如下所示：

```
[DllImport("user32.dll", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool PostMessage(int hWnd, uint Msg, int wParam, int lParam);

// int MouseX
// int MouseY
// public static readonly uint WM_LBUTTONUP = 0x202;
// public static readonly uint WM_LBUTTONDOWN = 0x201;

int lparam = MouseX & 0xFFFF | (MouseY & 0xFFFF) << 16;
int wparam = 0;
PostMessage(windowHandle, WM_LBUTTONDOWN, wparam, lparam);      
Thread.Sleep(10);  
PostMessage(windowHandle, WM_LBUTTONUP, wparam, lparam); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-23T21:12:53.797

您可以尝试使用 Sendiput。这是文档：[https ://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx)

这是我的例子：

包括：

```
 #include <stdio.h>
    #include <cstdlib>
    #include <windows.h>
    #include <winuser.h>
    #include <conio.h>

    INPUT input;
    int x = 889;
    int y = 451;

`// Mouse click up
    input.type = INPUT_MOUSE;
    input.mi.mouseData = 0;
    input.mi.dx = x * float(65536 / GetSystemMetrics(SM_CXSCREEN)); //x being coord in pixels
    input.mi.dy = y * float(65536 / GetSystemMetrics(SM_CYSCREEN)); //y being coord in pixels
    input.mi.dwFlags = (MOUSEEVENTF_ABSOLUTE | MOUSEEVENTF_LEFTDOWN);
    input.mi.time = 0;
    SendInput(1, &input, sizeof(input));`
`   
//Mouse click down
    input.type = INPUT_MOUSE;
    input.mi.mouseData = 0;
    input.mi.dx = x * float(65536 / GetSystemMetrics(SM_CXSCREEN)); //x being coord in pixels
    input.mi.dy = y * float(65536 / GetSystemMetrics(SM_CYSCREEN)); //y being coord in pixels
    input.mi.dwFlags = (MOUSEEVENTF_ABSOLUTE | MOUSEEVENTF_LEFTUP);
    input.mi.time = 0;
    SendInput(1, &input, sizeof(input));`

And You can do something like this to make sure you are in the focused window:

    HWND hWnd = ::FindWindowEx(0, 0, "YourGame - Use Spy++", 0);

    DWORD dwThreadID = GetWindowThreadProcessId(hWnd, NULL);
    AttachThreadInput(dwThreadID, GetCurrentThreadId(), true);

    SetForegroundWindow(hWnd);
    SetActiveWindow(hWnd);
    SetFocus(hWnd);

    AttachThreadInput(GetWindowThreadProcessId(GetForegroundWindow(), NULL),GetCurrentThreadId(), TRUE); 
```

# eclipse - 如何使用 Eclipse 调试 Web 应用程序？

> ID：14094284
> 
> 赞同：1
> 
> 时间：2012-12-30T20:17:21.670
> 
> 标签：eclipse, debugging, google-app-engine, gwt, web-applications

我想调试我大学同学的 web 应用程序，因为我正在开发 android 应用程序，它将与 web 应用程序交互。

我正在使用“调试”视角，并且使用 andorid 或普通 Java 应用程序我没有问题.. 但是使用 Web 应用程序我无法调试.. 我在调试视角中放置了断点和“调试为 Web 应用程序”......但它不起作用......

这是我的控制台

初始化 App Engine 服务器

```
30-dic-2012 20.06.21 com.google.apphosting.utils.jetty.JettyLogger info
INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
30-dic-2012 20.06.33 com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed C:\Users\alfo888_ibg\workspace\TablePlus\war\WEB-INF/appengine-web.xml
30-dic-2012 20.06.34 com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed C:\Users\alfo888_ibg\workspace\TablePlus\war\WEB-INF/web.xml
30-dic-2012 20.06.44 com.google.apphosting.utils.jetty.JettyLogger info
INFO: jetty-6.1.x
30-dic-2012 20.06.48 com.google.appengine.api.datastore.dev.LocalDatastoreService init
INFO: Local Datastore initialized: 
    Type: High Replication
    Storage: C:\Users\alfo888_ibg\workspace\TablePlus\war\WEB-INF\appengine-generated\local_db.bin
30-dic-2012 20.06.49 com.google.appengine.api.datastore.dev.LocalDatastoreService load
INFO: Time to load datastore: 297 ms
30-dic-2012 20.06.53 com.google.apphosting.utils.jetty.JettyLogger info
INFO: Started SelectChannelConnector@0.0.0.0:8888
30-dic-2012 20.06.53 com.google.appengine.tools.development.DevAppServerImpl start
INFO: The server is running at localhost:8888
30-dic-2012 20.06.53 com.google.appengine.tools.development.DevAppServerImpl start
INFO: The admin console is running at localhost:8888/_ah/admin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:13:55.943

尽管我没有使用过 appengine。

要本地调试 gwt 应用程序，我执行以下过程

1.  mvn gwt:debug（[或使用 IDE 工具以调试模式启动应用程序](https://developers.google.com/appengine/docs/java/tools/devserver#Running_the_Development_Web_Server)）
2.  右键单击您的项目，选择调试为 -> 调试配置...

创建一个新的 java 远程 web 应用程序作为示例：

![在此处输入图像描述](../Images/abac90d0ebd9936dac1c4a0c55d25e53.png)

现在应该达到您的断点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:19:12.180

上面的解决方案看起来不错，但还需要通过 JPDA 端口从调试器连接到服务器（例如，通过下面端口 4000 上的运行时参数设置它）。

例如.. 在 Tomcat 或 Jetty 上运行您的 Web 应用程序之前，您需要设置您的 java opts：

如果您通过控制台运行 Web 应用程序，您可以执行以下操作：

```
set JAVA_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4000,server=y,suspend=n" 
```

如果您在 Tomcat 上运行您的应用程序，那么您可以在您的 Tomcat 配置中使用“Java”选项卡的这些说明。（见下图）

Java 选项：

```
-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4000,server=y,suspend=n 
```

![在此处输入图像描述](../Images/55a2a49d1a4260534de9b2e25432eabb.png)

然后在 IDE 中，您可以运行调试器来调试端口 4000 上的目标 VM。（如下面的屏幕截图所示）

![在此处输入图像描述](../Images/13e7d44dc3b5382d6d6d5310bbcd675b.png)

此页面向您详细展示了如何执行此操作：

[http://www.eclipsezone.com/eclipse/forums/t53459.html](http://www.eclipsezone.com/eclipse/forums/t53459.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T00:49:00.907

您应该使用调试标志启动 Web 应用程序。在 Tomcat 中，您必须设置标志`jpda`并重新启动。在 Jetty 中应该是类似的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T20:43:00.200

这个问题已经[详细讨论过了](http://code.google.com/p/appengine-maven-plugin/issues/detail?id=3)，新版本的[appengine-maven-plugin](http://code.google.com/p/appengine-maven-plugin/) 1.7.5-SNAPSHOT 刚刚发布，它允许设置参数以远程调试应用程序。

[安东尼在这里](https://stackoverflow.com/a/14142536/173514)解释了如何做到这一点

# visual-studio - bindingRedirect 不适用于 Visual Studio 2012 测试项目？

> ID：14094288
> 
> 赞同：1
> 
> 时间：2012-12-30T20:17:56.663
> 
> 标签：visual-studio, asp.net-mvc-4, vs-unit-testing-framework

我刚刚创建了一个带有 Visual Studio 2012 测试应用程序的 ASP.NET MVC 4 应用程序。然后我添加了一些 bindingRedirect 之类的，

```
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="*****" publicKeyToken="*****"/>
        <bindingRedirect oldVersion="*.*.*.*-*.*.*.*" newVersion="*.*.*.*"/>
      </dependentAssembly>          
    </assemblyBinding>
  </runtime>
</configuration> 
```

在控制台应用程序中测试相同，但在我运行 Visual Stdio 2012 测试项目时不起作用。

可能是此[线程](http://forums.asp.net/t/1865767.aspx)中所述的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T12:58:08.640

我遇到过同样的问题。它似乎是 VS2012 Update 3 的补丁（更新 2 仍然有错误）

# oracle - 克隆除一个属性外的行

> ID：14094289
> 
> 赞同：0
> 
> 时间：2012-12-30T20:18:01.113
> 
> 标签：oracle

说我有那种桌子

```
 COMMAND     XCODE     YCODE
1.INPUT       1000      1001
2.INPUT       2000      2001
3.INPUT       3000      3001
4.INPUT       4000      4001 
```

我想插入完全相同的行，但有一点不同，如下

```
 COMMAND      XCODE     YCODE
1.INPUT        1000      1001
2.INPUT        2000      2001
3.INPUT        3000      3001
4.INPUT        4000      4001
5.OUTPUT       1000      1001
6.OUTPUT       2000      2001
7.OUTPUT       3000      3001
8.OUTPUT       4000      4001 
```

我只想要一个可以一次处理所有插入的查询。它可能是数百行。我只是举了一个4行的例子..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T20:21:53.533

使用插入...选择：

```
INSERT INTO table (COMMAND, XCODE, YCODE)
SELECT ('OUTPUT', XCODE, YCODE)
FROM table; 
```

我从未使用过 Oracle，但希望这是足够标准的工作。

# c++ - 标准::向量 ::清晰，恒定的时间？

> ID：14094302
> 
> 赞同：7
> 
> 时间：2012-12-30T20:19:53.170
> 
> 标签：c++, vector, primitive-types

> **可能重复：**
> [当 T 是原始类型时，std::vector<T>::clear() 的复杂性是多少？](https://stackoverflow.com/questions/11235975/what-is-the-complexity-of-stdvectortclear-when-t-is-a-primitive-type)

如果我有`std::vector`一个原始类型，并且我调用`clear()`（这种方式`push_back`从 的开头开始`capacity`），`clear()`调用将在恒定时间还是线性时间内完成？文档说它会破坏所有元素，但如果元素是 int，则不应该有任何东西可以破坏，对吧？

* * *

编辑：我找到了一个副本，其中有一张海报，他详细解释了实现可以检查析构函数是否微不足道，并给出了一个具有该检查的编译器的示例（GCC）。

> [当 T 是原始类型时， std::vector<T>::clear() 的复杂性是多少？](https://stackoverflow.com/questions/11235975/what-is-the-complexity-of-stdvectortclear-when-t-is-a-primitive-type)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T20:23:29.520

这取决于向量是如何实现的，但是具有简单析构函数的对象数组（包括诸如内置整数类型的 POD `int`）应该能够通过一次调用安全地释放，`vector<T>::allocator_type::deallocate`而无需循环元素并单独调用析构函数。`std::vector`可以使用或编译器内部的实现`type_traits`来确定是否`T`有一个普通的析构函数，并相应地释放内部数组。您需要检查您的实现的源代码以了解它的作用，但大多数主流实现`std::vector`将为您提供具有琐碎析构函数的类型的常量时间释放（或至少对于整数类型和其他 POD 的常量时间）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T20:24:05.700

该标准不保证`std::vector::clear`.

# sql - 这是在存储过程中使用 UNION ALL 的正确方法吗？

> ID：14094304
> 
> 赞同：5
> 
> 时间：2012-12-30T20:20:08.147
> 
> 标签：sql, sql-server, stored-procedures, sql-server-2008-r2, union

这是`UNION ALL`存储过程的正确方法吗？

```
ALTER PROCEDURE [GetHomePageObjectPageWise]
      @PageIndex INT = 1
      ,@PageSize INT = 10
      ,@PageCount INT OUTPUT
      ,@whereStoryID varchar(2000)
      ,@whereAlbumID varchar(2000)
      ,@wherePictureID varchar(2000)
AS
BEGIN
      SET NOCOUNT ON;

      SELECT StoryID
      , AlbumID
      , StoryTitle
      , NULL AS AlbumName
      , (SELECT URL FROM AlbumPictures WHERE (AlbumID = dbo.Stories.AlbumID) AND (AlbumCover = 'True')) AS AlbumCover
      , Votes
      , NULL AS PictureId
      , 'stories' AS tableName
      , NEWID() AS Sort 

INTO #Results1
FROM Stories WHERE StoryID IN (SELECT StringVal FROM funcListToTableInt(@whereStoryID))

      SELECT    NULL AS StoryID
      , AlbumID
      , NULL AS StoryTitle
      , AlbumName
      , (SELECT URL FROM AlbumPictures AS AlbumPictures_3 WHERE (AlbumID = Albums.AlbumID) AND (AlbumCover = 'True')) AS AlbumCover
      , Votes
      , NULL AS PictureId
      , 'albums' AS tableName
      , NEWID() AS Sort
INTO #Results2
FROM Albums WHERE AlbumID IN (SELECT StringVal FROM funcListToTableInt(@whereAlbumID))

        SELECT NULL AS StoryID
        , NULL AS AlbumID
        , NULL AS StoryTitle
        , NULL AS AlbumName
        , URL
        , Votes
        , PictureID
        , 'pictures' AS tableName
        , NEWID() AS Sort
        INTO #Results3
FROM AlbumPictures AS AlbumPictures_1
WHERE PictureID IN (SELECT StringVal FROM funcListToTableInt(@wherePictureID))

SELECT * INTO #Results4 FROM #Results1
UNION ALL
SELECT * FROM #Results2
UNION ALL
SELECT * FROM #Results3

SELECT ROW_NUMBER() OVER
            (
                  ORDER BY [Sort] DESC
            )AS RowNumber
            , * INTO #Results
            FROM #Results4

      DECLARE @RecordCount INT
      SELECT @RecordCount = COUNT(*) FROM #Results

      SET @PageCount = CEILING(CAST(@RecordCount AS DECIMAL(10, 2)) / CAST(@PageSize AS DECIMAL(10, 2)))

      SELECT * FROM #Results
      WHERE RowNumber BETWEEN(@PageIndex -1) * @PageSize + 1 AND(((@PageIndex -1) * @PageSize + 1) + @PageSize) - 1

      DROP TABLE #Results
      DROP TABLE #Results1
      DROP TABLE #Results2
      DROP TABLE #Results3
      DROP TABLE #Results4
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:02:30.593

以下是一些评论：

(1) 我更喜欢表值变量 ( `declare @Results as table . . .`) 而不是临时表。

(2) 通常，编写单个查询可能比单独的查询更好。因此，无论如何，您都可以消除中间结果表。SQL 引擎旨在优化执行路径。给他们一个工作的机会。也就是说，有时他们会出错，中间表是可取的/必要的。

(3) 你的分类没问题，但你确实需要小心。如果 Sort 具有重复的值，您将面临获得重复值的风险，并且不同的迭代会导致问题。

(4) 既然您实际上只是从查询中返回结果，为什么不直接定义查询（可能作为视图）并完全消除存储过程？存储过程使 SQL Server 不太可能出于分页目的缓存结果。

(5) 我还想知道您是否可以删除`from`子句中的函数调用，因为它们也会对性能产生负面影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T22:08:58.323

这些天我喜欢使用非物化`CTE`s 而不是临时表——尽管在某些情况下（比如数据需要索引）我会使用临时表。

主要是很多化妆品的东西，我真的会改变所有的方式，希望将来让它更具可读性**（这没有经过测试，因为我没有你的数据副本）**

```
ALTER PROCEDURE [GetHomePageObjectPageWise]
      @PageIndex        INT = 1
      ,@PageSize        INT = 10
      ,@PageCount       INT OUTPUT
      ,@whereStoryID    VARCHAR(2000)
      ,@whereAlbumID    VARCHAR(2000)
      ,@wherePictureID VARCHAR(2000)
AS
BEGIN
     SET NOCOUNT ON;

    WITH Results1 AS
        (
        SELECT 
            StoryID,
            AlbumID,
            StoryTitle,
            [AlbumName] = NULL,
            [AlbumCover] = 
                (
                SELECT URL 
                FROM AlbumPictures 
                WHERE (AlbumID = dbo.Stories.AlbumID) AND (AlbumCover = 'True')
                ),
            Votes,
            [PictureId] = NULL,
            [tableName] = 'stories',
            [Sort] = NEWID()
        FROM Stories 
        WHERE 
                StoryID IN 
                (
                SELECT StringVal 
                FROM funcListToTableInt(@whereStoryID)
                )
        )
    , Results2 AS
        (
        SELECT    
            [StoryID] = NULL ,
            AlbumID,
            [StoryTitle] NULL,
            AlbumName,
            [AlbumCover] = 
                (
                SELECT URL 
                FROM AlbumPictures AS AlbumPictures_3 --<<<DO YOU NEED THIS ALIAS?
                WHERE (AlbumID = Albums.AlbumID) AND (AlbumCover = 'True')
                ),
            Votes,
            [PictureId] = NULL,
            [tableName] = 'albums',
            [Sort] = NEWID()
        FROM Albums 
        WHERE 
            AlbumID IN 
                (
                SELECT StringVal 
                FROM funcListToTableInt(@whereAlbumID)
                )
        )       
    , Result3 AS  
        (
        SELECT 
            [StoryID] = NULL, 
            [AlbumID] = NULL,
            [StoryTitle] = NULL,
            [AlbumName] = NULL,
            URL,
            Votes,
            PictureID,
            [tableName] = 'pictures',
            [Sort] = NEWID()
        FROM AlbumPictures --AS AlbumPictures_1 <<<DO YOU NEED THIS ALIAS?
        WHERE 
            PictureID IN 
                (
                SELECT StringVal 
                FROM funcListToTableInt(@wherePictureID)
                )
        )
    , Result4 AS  
        (
        SELECT * FROM Results1 UNION ALL
        SELECT * FROM Results2 UNION ALL
        SELECT * FROM Results3
        )
    , Results AS
        (
        SELECT 
                [RowNumber] = ROW_NUMBER() OVER (ORDER BY [Sort] DESC),
            x.* 
        FROM Results4   x
        )
 SELECT * 
 FROM Results
 WHERE RowNumber BETWEEN(@PageIndex -1) * @PageSize + 1 AND(((@PageIndex -1) * @PageSize + 1) + @PageSize) - 1;
 DECLARE @RecordCount INT = @@RowCount; 

 SET @PageCount = CEILING(CAST(@RecordCount AS DECIMAL(10, 2)) / CAST(@PageSize AS DECIMAL(10, 2)));

END 
```

我通常使用 Aaron Bertrand 的建议来编写存储过程 这篇博文是我的清单，也是我用来尝试统一我使用的所有 Sproc 的样式的模板：

[https://sqlblog.org/2008/10/30/my-stored-procedure-best-practices-checklist](https://sqlblog.org/2008/10/30/my-stored-procedure-best-practices-checklist)

* * *

我认为正如 Gordon 建议的那样，您可以将大量逻辑从存储过程中移出并创建一个`VIEW`这样的：

```
CREATE VIEW [console].[vw_mySimpleView]
AS

BEGIN
    SET NOCOUNT ON;

    WITH Results1 AS
        (
        SELECT 
            StoryID,
            AlbumID,
            StoryTitle,
            [AlbumName] = NULL,
            [AlbumCover] = 
                (
                SELECT URL 
                FROM AlbumPictures 
                WHERE (AlbumID = dbo.Stories.AlbumID) AND (AlbumCover = 'True')
                ),
            Votes,
            [PictureId] = NULL,
            [tableName] = 'stories',
            [Sort] = NEWID()
        FROM Stories 
        )
    , Results2 AS
        (
        SELECT    
            [StoryID] = NULL ,
            AlbumID,
            [StoryTitle] NULL,
            AlbumName,
            [AlbumCover] = 
                (
                SELECT URL 
                FROM AlbumPictures 
                WHERE (AlbumID = Albums.AlbumID) AND (AlbumCover = 'True')
                ),
            Votes,
            [PictureId] = NULL,
            [tableName] = 'albums',
            [Sort] = NEWID()
        FROM Albums 
        )       
    , Result3 AS  
        (
        SELECT 
            [StoryID] = NULL, 
            [AlbumID] = NULL,
            [StoryTitle] = NULL,
            [AlbumName] = NULL,
            URL,
            Votes,
            PictureID,
            [tableName] = 'pictures',
            [Sort] = NEWID()
        FROM AlbumPictures
        )
    , Result4 AS  
        (
        SELECT * FROM Results1 UNION ALL
        SELECT * FROM Results2 UNION ALL
        SELECT * FROM Results3
        )
SELECT *
FROM Results4;

GO 
```

那么 Sproc 会短很多：

```
ALTER PROCEDURE [GetHomePageObjectPageWise]
      @PageIndex        INT = 1
      ,@PageSize        INT = 10
      ,@PageCount       INT OUTPUT
      ,@whereStoryID    VARCHAR(2000)
      ,@whereAlbumID    VARCHAR(2000)
      ,@wherePictureID VARCHAR(2000)
AS
BEGIN
     SET NOCOUNT ON;

    SELECT * 
    FROM 
        (
        SELECT 
            [RowNumber] = ROW_NUMBER() OVER (ORDER BY [Sort] DESC),
            x.* 
        FROM 
            (
            SELECT *
            FROM [dbo].[vw_mySimpleView] 
            WHERE 
                StoryID IN 
                    (
                    SELECT StringVal 
                    FROM funcListToTableInt(@whereStoryID)
                    )
                            OR  
                            AlbumID IN 
                                   (
                                   SELECT StringVal 
                                   FROM funcListToTableInt(@whereAlbumID)
                                   )
            )   x
        )
    WHERE RowNumber BETWEEN(@PageIndex -1) * @PageSize + 1 AND(((@PageIndex -1) * @PageSize + 1) + @PageSize) - 1;
    DECLARE @RecordCount INT = @@RowCount; 

    SET @PageCount = CEILING(CAST(@RecordCount AS DECIMAL(10, 2)) / CAST(@PageSize AS DECIMAL(10, 2)));

END 
```

# c# - 如何从字符串中删除重复的子字符串？

> ID：14094305
> 
> 赞同：3
> 
> 时间：2012-12-30T20:20:23.327
> 
> 标签：c#, string

你将如何从 C# 中的字符串中删除任何重复的子字符串？例如，在这个字符串中：

```
This is a test test string 
```

重复的“测试”将被删除创建结果：

```
This is a test string 
```

或在

```
shift+shift+shift+shift+d 
```

“shift+shift+shift+”将被删除，导致

```
shift+d 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:22:20.847

我希望通过您的问题本身，通过改变句子重复单词将被删除并且单词重复字符将被删除。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApp
{
    internal class Program
    {
        private static void Main()
        {
            var input = new[] {"This is TEST TEST string", "shift+shift+shift+D"};
            foreach (string data in input)
            {
                bool contains = data.Contains((char)0x20);
                Console.WriteLine(contains ? StripFromSentence(data.TrimEnd(new[] {(char) 0x20})) : StripFromWord(data));
            }
            Console.ReadLine();
        }

        private static string StripFromWord(string word)
        {
            char[] chr = word.ToCharArray();
            var ap = new HashSet<char>();
            foreach (char s in chr)
                ap.Add(s);
            return ap.Aggregate(string.Empty, (current, c) => current + c);
        }

        private static string StripFromSentence(string sentence)
        {
            string[] strings = sentence.Split(new[] {(char) 0x20});
            var ap = new HashSet<string>();
            foreach (string s in strings)
                ap.Add(s);
            return ap.Aggregate(string.Empty, (current, word) => current + (word + (char)0x20));
        }
    }
} 
```

# haskell - 使用 Cabal 安装 HTF 时遇到问题

> ID：14094319
> 
> 赞同：4
> 
> 时间：2012-12-30T20:21:53.893
> 
> 标签：haskell, ghc, cabal, htf

我正在尝试安装 HTF。但是在`cabal install HTF`我得到这个之后：

```
Resolving dependencies...
Configuring HTF-0.10.0.7...
Warning: This package indirectly depends on multiple versions of the same
package. This is highly likely to cause a compile failure.
package regex-base-0.93.2 requires mtl-2.0.1.0
package aeson-0.6.0.2 requires mtl-2.1.2
package HTF-0.10.0.7 requires mtl-2.1.2
package mtl-2.0.1.0 requires transformers-0.2.2.0
package transformers-base-0.4.1 requires transformers-0.3.0.0
package mtl-2.1.2 requires transformers-0.3.0.0
package monad-control-0.3.1.4 requires transformers-0.3.0.0
Building HTF-0.10.0.7...
Preprocessing library HTF-0.10.0.7...
ghc: could not execute: cpphs
cabal: Error: some packages failed to install:
HTF-0.10.0.7 failed during the building phase. The exception was:
ExitFailure 1 
```

我尝试安装其他版本，但遇到了不同的问题。例如，`cabal install 'HTF <= 0.1'`我得到以下信息：

```
Resolving dependencies...
Downloading QuickCheck-1.2.0.1...
Configuring QuickCheck-1.2.0.1...
Building QuickCheck-1.2.0.1...
Preprocessing library QuickCheck-1.2.0.1...
[1 of 8] Compiling Test.QuickCheck  ( Test/QuickCheck.hs, dist/build/Test/QuickCheck.o )
[2 of 8] Compiling Test.QuickCheck.Batch ( Test/QuickCheck/Batch.hs, dist/build/Test/QuickCheck/Batch.o )
[3 of 8] Compiling Test.QuickCheck.Utils ( Test/QuickCheck/Utils.hs, dist/build/Test/QuickCheck/Utils.o )
[4 of 8] Compiling Test.QuickCheck.Poly ( Test/QuickCheck/Poly.hs, dist/build/Test/QuickCheck/Poly.o )
[5 of 8] Compiling Debug.QuickCheck.Poly ( Debug/QuickCheck/Poly.hs, dist/build/Debug/QuickCheck/Poly.o )
[6 of 8] Compiling Debug.QuickCheck.Utils ( Debug/QuickCheck/Utils.hs, dist/build/Debug/QuickCheck/Utils.o )
[7 of 8] Compiling Debug.QuickCheck ( Debug/QuickCheck.hs, dist/build/Debug/QuickCheck.o )
[8 of 8] Compiling Debug.QuickCheck.Batch ( Debug/QuickCheck/Batch.hs, dist/build/Debug/QuickCheck/Batch.o )
Registering QuickCheck-1.2.0.1...
Installing library in /home/xxx/.cabal/lib/QuickCheck-1.2.0.1/ghc-7.4.1
Registering QuickCheck-1.2.0.1...
Downloading HTF-0.1...
Configuring HTF-0.1...
Building HTF-0.1...
Preprocessing library HTF-0.1...
[1 of 8] Compiling Test.Framework.Utils ( Test/Framework/Utils.hs, dist/build/Test/Framework/Utils.o )
[2 of 8] Compiling Test.Framework.Process ( Test/Framework/Process.hs, dist/build/Test/Framework/Process.o )

Test/Framework/Process.hs:45:48:
    Ambiguous type variable `a0' in the constraints:
      (Show a0)
        arising from a use of `show' at Test/Framework/Process.hs:45:48-51
      (Control.Exception.Exception a0)
        arising from a use of `Control.Exception.handle'
        at Test/Framework/Process.hs:45:5-28
    Probable fix: add a type signature that fixes these type variable(s)
    In the expression: show e
    In the first argument of `return', namely
      `([], show e, error (show e))'
    In the expression: return ([], show e, error (show e))
cabal: Error: some packages failed to install:
HTF-0.1 failed during the building phase. The exception was:
ExitFailure 1 
```

我也得到了类似于之后的第一个结果`cabal install 'HTF <= 0.9'`。我试过`ghc-pkg check`了，它给了我一个破损包裹的清单。我重新安装了软件包并重复尝试再次安装 HTF，结果相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T21:00:28.540

第一个问题是你已经`regex-base`建立了反对`mtl-2.0.1.0`，因此

```
package regex-base-0.93.2 requires mtl-2.0.1.0
package aeson-0.6.0.2 requires mtl-2.1.2 
```

`HTF`将取决于多个版本的`mtl`. 这很少奏效。

解决方案是`$ ghc-pkg unregister regex-base`. 如果`ghc-pkg`警告说这会破坏其他包，你也必须重建它们。如果手动操作太多，您可以考虑删除整个用户 package-db（我希望这些包都是用户安装的，如果它们是全局安装的，则无法删除整个全局 db）并重建所有内容与`cabal install world`.

`regex-base`删除后，将不再依赖任何东西，`mtl-2.0.1.0`并且依赖关系不会引起冲突；在实际安装之前`HTF`，您应该检查一下

```
cabal install HTF --dry-run 
```

如果仍然存在冲突，那应该会检测到它们，并且您可以通过取消注册更多包来帮助解决它们。

下一个问题是

```
ghc: could not execute: cpphs 
```

这看起来好像你`cpphs`的`PATH`. 要么你没有安装它，这种情况你需要在安装之前安装它`HTF`，或者它的安装目录需要添加到`PATH`.

# sql - 如何组合这两条 SQL 语句？

> ID：14094327
> 
> 赞同：2
> 
> 时间：2012-12-30T20:22:29.033
> 
> 标签：sql, sql-server, sql-server-2005

我有 2 个 SQL 查询，它们都获取不同 ID 的计数。

```
select @cntCM_CMQ = count(*)
from dbo.CaseWorkflow cw 
join vew_CasePersonnelSystemIDs vcps on cw.ID_Case = vcps.ID_Case
join dbo.WorkflowStates ws on ws.ID_WorkflowState = cw.ID_WorkflowState
where CMSUID = @nSUID and ws.ID_WorkflowType = 3    -- CMQ

select @cntCM_PRWK = count(*)
from dbo.CaseWorkflow cw 
join vew_CasePersonnelSystemIDs vcps on cw.ID_Case = vcps.ID_Case
join dbo.WorkflowStates ws on ws.ID_WorkflowState = cw.ID_WorkflowState
where CMSUID = @nSUID and ws.ID_WorkflowType = 1    -- PAPERWORK 
```

看来我应该能够将它们组合成一个选择（也许用一个`CASE`语句），但我似乎无法破解它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T20:28:25.280

像这样的东西？

```
select sum(case when ws.ID_WorkflowType = 1 then 1 else 0 end) as cntCM_PRWK
     , sum(case when ws.ID_WorkflowType = 3 then 1 else 0 end) as cntCM_CMQ
from dbo.CaseWorkflow cw 
join vew_CasePersonnelSystemIDs vcps on cw.ID_Case = vcps.ID_Case
join dbo.WorkflowStates ws on ws.ID_WorkflowState = cw.ID_WorkflowState
where CMSUID = @nSUID 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T20:29:03.453

```
select 
SUM(Cast(Case when ws.ID_WorkflowType = 3 then 1 else 0 end as int) as CMQ
,SUM(Cast(Case when ws.ID_WorkflowType = 1 then 1 else 0 end as int) as Paperwork

from dbo.CaseWorkflow cw 
join vew_CasePersonnelSystemIDs vcps on cw.ID_Case = vcps.ID_Case
join dbo.WorkflowStates ws on ws.ID_WorkflowState = cw.ID_WorkflowState
where CMSUID = @nSUID 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-30T20:27:01.110

```
select 
    @cntCM_CMQ = count(case when ws.ID_WorkflowType = 3 then ws.ID_WorkflowType end)
    , @cntCM_PRWK = count(case when ws.ID_WorkflowType = 1 then ws.ID_WorkflowType end)
from 
    dbo.CaseWorkflow cw 
    join vew_CasePersonnelSystemIDs vcps on cw.ID_Case = vcps.ID_Case
    join dbo.WorkflowStates ws on ws.ID_WorkflowState = cw.ID_WorkflowState
where 
    CMSUID = @nSUID 
    and ws.ID_WorkflowType in (1, 3) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-30T20:27:22.880

这样做有一个窍门。本质上，您用来为您感兴趣的行`Case`选择一个`1`值，然后`Sum`为获得计数的行选择一个值。案例默认为`null`如果没有案例匹配，则被忽略`Sum`

```
Select
  @cntCM_CMQ = Sum(Case ws.ID_WorkflowType When 3 Then 1 End),
  @cntCM_PRWK = Sum(Case ws.ID_WorkflowType When 1 Then 1 End) 
From
  dbo.CaseWorkflow cw 
    inner join 
  vew_CasePersonnelSystemIDs vcps 
    on cw.ID_Case = vcps.ID_Case
    inner join 
  dbo.WorkflowStates ws 
    on ws.ID_WorkflowState = cw.ID_WorkflowState
Where
  CMSUID = @nSUID 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-30T20:53:16.023

与其他帖子类似的替代方案。

Bob Duells 的帖子可能是最具可读性的。

```
SELECT 
    [cntCM_PRWK]    = COUNT(CASE WHEN ws.ID_WorkflowType = 1 THEN ws.ID_WorkflowState ELSE NULL END),
    [cntCM_CMQ]     = COUNT(CASE WHEN ws.ID_WorkflowType = 3 THEN ws.ID_WorkflowState ELSE NULL END)
FROM 
    dbo.CaseWorkflow cw 
    INNER JOIN vew_CasePersonnelSystemIDs vcps 
            ON cw.ID_Case = vcps.ID_Case
    INNER JOIN dbo.WorkflowStates ws 
            ON ws.ID_WorkflowState = cw.ID_WorkflowState
WHERE CMSUID = @nSUID 
```

# webrtc - 手动交换 WebRTC RTCPeerConnection 信号

> ID：14094334
> 
> 赞同：2
> 
> 时间：2012-12-30T20:23:53.323
> 
> 标签：webrtc

我读到 RTCPeerConnection 不关心选择交换信号的传输机制（websocket、google channel 等）。您是否认为有可能收集这些信号，使用 JSON 对其进行编码，并要求用户使用外部机制（聊天、电子邮件等）将它们发送给其他对等方，以完全绕过对远程的需求服务器？

我做了一点 POC，这似乎只有在两个对等点都在同一台机器上时才有效；任何线索？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:51:37.280

是的。只要每个客户收到另一个客户的 SDP（包括 ICE 候选人），您就应该能够建立一个`PeerConnection`. WebRTC 与应用程序开发人员采用的信令机制分离。但是必须传输这些信号，以便每个客户端都知道应该注意哪个 IP-Port 组合。

现在要求用户手动交换和处理这些信号可能会变成一项乏味的任务。我建议使用[Socket.io](http://socket.io/#how-to-use)设置一个简单的服务器，它可以让您轻松地中继信号。您也可以随时使用 AJAX 轮询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T16:05:42.917

是的，您可以通过电子邮件或任何其他传输方式发送。我认为用户的结果不会是最好的，但这是一种方法。

我会向您解释，收到 SDP 报价的用户必须在浏览器中输入它，获得 SDP 答案，然后将其发送回发起请求的用户。但我假设当你说它在本地工作时，你正在做所有这些。

您也必须等待 ICE 候选人，因为您只发送一次报价和答复，以便允许同行连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T21:17:00.387

是的。一些兴趣点是 setLocalDescription()、setRemoteDescription()、createOffer() 和 createAnswer()。

这是一个概念验证： [https ://github.com/cjb/serverless-webrtc/](https://github.com/cjb/serverless-webrtc/)

现场演示： [http ://cjb.github.io/serverless-webrtc/serverless-webrtc.html](http://cjb.github.io/serverless-webrtc/serverless-webrtc.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T09:30:18.890

不 - 据我了解，您不能简单地通过电子邮件发送会话描述。

ICE 建立了对等点之间的最佳路由，我认为 ICE 候选者的数量可能会根据双方客户当前的网络情况而有所不同。

如果收到候选冰和会话描述，然后客户端移动物理位置（例如，加入不同的 wifi 网络），它将使冰候选无用 - 意味着客户端无法连接。

我不是专家，所以很容易出错。该答案仅来自我在使用 webrtc 为 2 个客户端设置自己的信号系统时获得的 webrtc 知识......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T22:22:50.857

是的你可以。SDP 只是一堆文本，所以你可以选择任何你想要的媒介。SDP 的一个重要部分是 ICE 候选人，我建议将其作为 SDP 的一部分；所以它都可以作为一个大字符串通过您选择的介质（ajax、websockets 等）发送。

请注意，您通过调用 createOffer 获得的第一个 SDP 不会包含 ICE 候选者。您必须等到“onicecandidate”回调至少被调用一次才能获得一些 ICE 候选人。然后你在你的对等连接上再次调用 createOffer，它将包含所有信息（ICE 候选人加上 SDP 的其余部分）。

另请注意，onicecandidate 将根据需要被调用多次，直到找出所有本地 ICE 候选人，因此您可以等待所有这些候选人到那时生成完整的 SDP 报价以发送到另一方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-28T16:27:35.373

免责声明：我在 Pusher 工作。

是的，您可以通过任何交通工具发送它。然而，如今 websockets 是一个不错的选择，因为大多数[浏览器都支持它](http://caniuse.com/websockets)。

正如@Vishnu 提到的，您可以设置一个 socket.io 服务器，或者如果您不想经历设置的麻烦，您可以使用 Pubnub 或[Pusher](http://pusher.com)等托管解决方案。如果您有兴趣，我使用 Pusher 和 Webosckets (+fallbacks)编写了一个[webRTC 信令教程。](http://pusher.com/tutorials/webrtc_chat)

[http://pusher.com/tutorials/webrtc_chat](http://pusher.com/tutorials/webrtc_chat)

# ruby-on-rails - rspec 在哪个环境中执行测试？

> ID：14094335
> 
> 赞同：1
> 
> 时间：2012-12-30T20:23:58.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

在 Rails 中，如果我使用 rspec 运行测试，rspec 会自动将环境更改为`:test`并开始执行测试吗？一旦完成测试，环境会变回`:development`吗？我可以在哪里找到有关此的更多信息的任何指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T20:26:15.433

`test`除非您像这样更改它，否则测试将始终运行`RAILS_ENV=development rspec spec/`

`development`然后是服务器和控制台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T20:25:54.420

是的，它在 :test 环境中运行。

它不会“改变”，您可以运行多个环境（例如，您可以让您的开发服务器同时运行和执行测试）

# android - Android - 如何通过单击按钮打开 Activity

> ID：14094341
> 
> 赞同：-1
> 
> 时间：2012-12-30T20:24:45.947
> 
> 标签：android, android-intent, android-activity, onclick

如何通过单击按钮（ButStart）打开 Activity（GameProcess）？

我已经对其进行了编辑并加以体现。你看到了什么错误？当我点击按钮（ButStart）时它崩溃了。

```
package com.makeandroid.klikomania;

public class KlikomaniaActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Button Butstart = (Button)findViewById(R.id.butstart);
    final Button Butrez = (Button)findViewById(R.id.butrez);

    Butstart.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(KlikomaniaActivity.this,GameProcess.class); 
             startActivity(intent);
        }
    });
}

} 
```

这是 GameProgress 活动：

```
package com.makeandroid.klikomania;

public class GameProcess extends Activity {

 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gameprocess);

        }
 } 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.makeandroid.klikomania"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity android:name="com.makeandroid.klikomania.GameProcess"></activity>
    <activity
        android:name="com.makeandroid.klikomania.KlikomaniaActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:13:37.213

可能你`button Butstart`是`null`。检查您的“butstart”ID`main.xml`

# mysql - 分组方式：例如返回 '3' 而不是 3 行

> ID：14094356
> 
> 赞同：2
> 
> 时间：2012-12-30T20:26:29.613
> 
> 标签：mysql, sql, group-by

对于学校作业，我必须“*按产品对销售该产品的销售人员数量进行有序概述。* ”

我有三列：（`VerkoperNr`销售员 ID）、`ProductNr`（产品 ID）和`Aantal`（金额）

* * *

数据库：

![数据库](../Images/71bc82e1ebe6c3005a8b3305833e8431.png)

我的查询：`SELECT ProductNr, COUNT(VerkoperNr) FROM Omzet GROUP BY ProductNr, VerkoperNr`。这将返回：

![结果](../Images/43a8061e4117b1c870bfef279d1ad9f0.png)

但是，我不需要推销员销售产品的次数，我需要知道有多少推销员销售了该特定产品。所以`ProductNumber 16386`应该有`COUNT(VerkoperNr) of 3`，而不是返回 3 行（每行是销售员销售该产品的次数）

* * *

**简而言之：** 我需要一个查询来返回 3 而不是三行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T20:42:41.890

你只是想`GROUP BY ProductNr`，不是`GROUP BY ProductNr, VerkoperNr`。否则你的查询很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:39:05.573

你会得到`ProductNumber 16386 with COUNT(VerkoperNr) of 3` [SQL Fiddle](http://www.sqlfiddle.com/#!2/bf05d/1)

```
SELECT DISTINCT(ProductNr), COUNT(VerkoperNr) FROM Omzet GROUP BY VerkoperNr 
```

这也应该有效：

```
SELECT VerkoperNr, count(ProductNr) 
FROM table_name GROUP BY VerkoperNr 
```

[SQL 文件](http://www.sqlfiddle.com/#!2/bf05d/4)

# jsf - 重置

> ID：14094358
> 
> 赞同：1
> 
> 时间：2012-12-30T20:26:35.050
> 
> 标签：jsf

在我的 JSF 应用程序中，我有 h:selectOneMenu 和 h:selectOneListBox 标记可以正常工作，但我不知道如何将它们重置回第一个条目，这是默认设置。

我的 xhtml 代码示例如下：

```
<h:selectOneMenu id="physmenu" value="#{index.physics}" style="height:25px; width:180px;">   
    <f:selectItems value="#{index.physicsMap}"/>   
</h:selectOneMenu> 
```

对应的bean的一部分是：

```
@ManagedBean(name="index")   
@SessionScoped  
public class MyIndexBean implements Serializable {   
    // Other private variables   
    private String itemValue;   
    private String itemLabel;   
    private String physics;   

    Map<String,String> physicsMap = new LinkedHashMap<String,String>();

    private void initPhysics() {   
        // Loop through data read from an input file   
        // Get itemValue and itemLabel for each line of input read   

        physicsMap.put(itemLabel, itemValue); // Store these in physicsMap each time in the loop   

        // Other code   

        }    
    }   

    public Map<String,String> getPhysicsMap() {   
        return physicsMap;   
    }   

    // ----- Getter and setter for physics for the index page -----   

    public String getPhysics() {   
        return physics;   
    }   

    public void setPhysics(String physics) {   
        this.physics = physics;   
    }   

    public void resetPhysics(ActionEvent event) {   
        physicsMap.clear();   
    }   
} 
```

同样，对于 h:selectOneListBox，以类似的方式，在我的 Java 代码中的几个地方，我有一个我创建的对象数组，而不是 LinkedHashMap。

当我从文件中读取数据时，我想将它保存在内存中并以某种方式重置 JSF 用来指定哪个是选定项的指针，但我不知道如何访问该指针。最后的 ActionEvent 方法只是清除 Map，所以用处不大。

首次访问页面时，会显示第一个菜单项，完全符合我的要求，但是如果更改了它，则单击提交按钮，然后当我重新访问该页面时，仍会显示新选择的值，我看不到如何重置它到第一个菜单项。JSF 如何跟踪指向页面上显示的 Map 中所选值的索引，以及如何重置它，或者如果我愿意，以编程方式将其设置为另一个值？

这是一个困扰我一段时间的问题，我找不到解决方案。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:38:28.180

选定的值为`#{index.physics}`。你需要成功`null`。

另一种方法是将 bean 放在请求或视图范围内。我不认为会话范围是达到目的的正确范围。另请参阅[如何选择正确的 bean 范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# javascript - 滑入更换主体

> ID：14094359
> 
> 赞同：0
> 
> 时间：2012-12-30T20:26:49.083
> 
> 标签：javascript, jquery, ajax

我正在尝试制作正确的动画。

我正在做的是，单击一个按钮，通过 AJAX 加载另一个页面。

该页面已成功加载，并且正文已替换为其他页面的正文。

```
$("#csubmit").click(function() {
    $.ajax({
        url: "body.html",
        type: 'GET',
        success: function(html) {
            $('body').html(html);
        }
    });
    return false ;
}); 
```

但是，我想要一个效果，比如新内容应该向上/向下滑动以替换正文。

有没有一种简单的方法可以做到这一点，也许一个 jquery 插件已经可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:28:48.050

它支持开箱即用 - [http://api.jquery.com/category/effects/sliding/](http://api.jquery.com/category/effects/sliding/)

# php - php递归目录创建

> ID：14094360
> 
> 赞同：3
> 
> 时间：2012-12-30T20:26:57.087
> 
> 标签：php, file-io

我必须创建递归目录并为每个文件夹创建一个文件。我想要这样：

```
   模块/
   模块/默认
   模块/默认/test_module
   模块/默认/test_module/a
   模块/默认/test_module/a/test_module.php
   模块/默认/test_module/m
   模块/默认/test_module/m/test_module.php
   模块/默认/test_module/c
   模块/默认/test_module/c/test_module.php
   模块/根
   模块/根/test_module
   模块/根/test_module/a
   模块/根/test_module/a/test_module.php
   模块/根/test_module/m
   模块/根/test_module/m/test_module.php
   模块/根/test_module/c
   模块/根/test_module/c/test_module.php
   模板
   模板/默认
   模板/默认/test_module
   模板/默认/test_module/test_module.tpl
   模板/根
   模板/根/test_module
   模板/根/test_module/test_module.tpl

```

但是这段代码生成如下：

```
   |-- 模块
   | |-- 默认
   | | |-- 根
   | | | `-- 测试模块
   | | | |-- 一个
   | | | | `-- test_module.php
   | | | |-- c
   | | | | `-- test_module.php
   | | | `--米
   | | | `-- test_module.php
   | | `-- 测试模块
   | | |-- 一个
   | | | `-- test_module.php
   | | |-- c
   | | | `-- test_module.php
   | | `--米
   | | `-- test_module.php
   | |-- 根
   | | |-- 索引
   | | | `--c
   | | | `-- index.php
   | | |-- 模块
   | | | |-- 一个
   | | | | `--modules.php
   | | | |-- c
   | | | | `--modules.php
   | | | `--米
   | | | `--modules.php
   | | `-- 用户
   | | |-- 一个
   | | | `-- 用户.php
   | | |-- c
   | | | `-- 用户.php
   | | `--米
   | | `-- 用户.php
   | `-- 模板
   | `-- 根
   | |-- 默认
   | | `-- 测试模块
   | | `-- test_module.tpl
   | `-- 测试模块
   | `-- test_module.tpl

```

代码是：

```
 protected function createFiles($files, $parent_directory = null)
    {
        echo $parent_directory."\n</br>\n";
        if (!$parent_directory) {
            $parent_directory = www;
        }
        foreach ((array)$files as $key => $value) {
            if (is_array($value)) {
                if (!is_dir($parent_directory . $key)) {
                    mkdir($parent_directory . $key,0777);
                    chmod($parent_directory.$key,0777);
                }
                $parent_directory .= $key . '/';
                $this->createFiles($value, $parent_directory);
            } else {
                $parent_directory_=$parent_directory.$key . '/';
                if(!is_dir($parent_directory_)){
                    mkdir($parent_directory_,0777);
                    chmod($parent_directory_,0777);
                }
                $alias = explode('.',$value);
                $alias = $alias[0];
                $defaultAjaxContent = <<<AJAX
    <?php
       class {$alias} extends ajax{
       /**
        * Autocreated
        **/
       public function initAjax(){

       }
   }
   ?>
   AJAX;
                $file = fopen($parent_directory_.$value, 'w+');
                $write = fwrite($file, $defaultAjaxContent);
                if (!$write) {
                    throw new AjaxCatcher("{$parent_directory_}{$value} oluşturulurken beklenmedik bir hata oluştu. Lütfen tekrar deneyiniz. ");
                }
            }
        }
        //$file = fopen($files['default_ajax']);
        return 1;
    } 
```

不使用递归 mkdir 的原因：

```
$dirs = array();
        $dirs['modules']['default'][$alias]['a'] = $alias . ".php";
        $dirs['modules']['default'][$alias]['m'] = $alias . '.php';
        $dirs['modules']['default'][$alias]['c'] = $alias . '.php';

        $dirs['modules']['root'][$alias]['a'] = $alias . '.php';
        $dirs['modules']['root'][$alias]['m'] = $alias . '.php';
        $dirs['modules']['root'][$alias]['c'] = $alias . '.php';

        $dirs['templates']['root'][$alias] = $alias . '.tpl';
        $dirs['templates']['default'][$alias] = $alias . '.tpl';

        $this->createFiles($dirs); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:50:21.953

我认为具有递归的 mkdir 仍然是最好的主意，您需要做的就是连接嵌套的数组键：

```
 $dirs = array();
    $dirs['modules']['default'][$alias]['a'] = $alias . ".php";
    $dirs['modules']['default'][$alias]['m'] = $alias . '.php';
    $dirs['modules']['default'][$alias]['c'] = $alias . '.php';

    $dirs['modules']['root'][$alias]['a'] = $alias . '.php';
    $dirs['modules']['root'][$alias]['m'] = $alias . '.php';
    $dirs['modules']['root'][$alias]['c'] = $alias . '.php';

    $dirs['templates']['root'][$alias] = $alias . '.tpl';
    $dirs['templates']['default'][$alias] = $alias . '.tpl';

    // concat the keys (flatten the array)...
    function prefixKey($prefix, $array) {
        $result = array();
        foreach ($array as $key => $value) {
            if (is_array($value)) {
                $result = array_merge($result, prefixKey($prefix . $key . '/', $value));
            } else {
                $result[$prefix . $key] = $value;
            }
        }   
        return $result;
    }

    // this is your function, use the prefixKey function to get the required
    // pathstructure directly from your array...
    function createFiles($dirs) {
       $pathStructure = prefixKey('', $dirs);
       // here you have the flatten keys (the path), the value is the file
       foreach($pathStructure as $path => $file) {
            // use mkdir with 
            if(!is_dir($path)) {
                mkdir($path, 0777, true);
            }
            // and so on
       }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:54:30.950

看一下命令[`touch`](http://php.net/manual/en/function.touch.php)。

如果您有一组必须创建的文件列表（没有内容），您可以迭代调用它的数组。

您将需要更改代码以提供文件名的一维数组。

```
$dirs = array();
$dirs[] = "modules\default\$alias\a\$alias.php";
...
$dirs[] = "templates\default\$alias\$alias.tpl";

foreach($dirs as $file) {
    touch($file);
} 
```

请注意，存在*与*权限相关的限制，因此如果您发现未创建文件，请立即阅读。

另外值得注意的是，您的示例中缺少`fclose()`您。您应该查看[`file_put_contents()`](http://php.net/manual/en/function.file-put-contents.php)它为您处理的`fopen/fwrite/fclose`问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T20:55:35.090

你可以试试

```
class Maker {

    function createFiles($config, $path = null) {
        foreach ( $config as $k => $v ) {
            if (is_array($v)) {
                mkdir($path . DIRECTORY_SEPARATOR . $k, 0777);
                chmod($path . DIRECTORY_SEPARATOR . $k, 0777);
                $this->createFiles($v,$path . DIRECTORY_SEPARATOR . $k);
            }
            else
            {
                touch($path . DIRECTORY_SEPARATOR . $v); //create the file
            }
        }
    }
}

$alias = "test_module";
$dirs = array();
$dirs['modules']['default'][$alias]['a'] = $alias . ".php";
$dirs['modules']['default'][$alias]['m'] = $alias . '.php';
$dirs['modules']['default'][$alias]['c'] = $alias . '.php';

$dirs['modules']['root'][$alias]['a'] = $alias . '.php';
$dirs['modules']['root'][$alias]['m'] = $alias . '.php';
$dirs['modules']['root'][$alias]['c'] = $alias . '.php';

$dirs['templates']['root'][$alias] = $alias . '.tpl';
$dirs['templates']['default'][$alias] = $alias . '.tpl';

$maker = new Maker();
$maker->createFiles($dirs, __DIR__ . "/test"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T15:54:11.473

我的决心：

```
protected function createModuleFiles($alias){
        //Default kısmına php controller dosyası oluşturulacak.
        $dirs = array();
        $dirs['modules/default/'.$alias.'/a'] = $alias . ".php";
        $dirs['modules/default/'.$alias.'/m'] = $alias . '.php';
        $dirs['modules/default/'.$alias.'/c'] = $alias . '.php';

        $dirs['modules/root/'.$alias.'/a'] = $alias . '.php';
        $dirs['modules/root/'.$alias.'/m'] = $alias . '.php';
        $dirs['modules/root/'.$alias.'/c'] = $alias . '.php';

        $dirs['templates/root/'.$alias] = $alias . '.tpl';
        $dirs['templates/default/'.$alias] = $alias . '.tpl';

        $this->createFiles($dirs);

    }

protected function createFiles($files){
        foreach($files as $key=>$value){
            if(!is_dir($key)){
                mkdir(www.$key,0777,true);
            }
            chmod(www.$key,0777);
            $alias = explode('.',$value);
            $alias = $alias[0];
            $type = end(explode('/',$key));
            switch($type){
                case 'a';
                case 'c';
                case 'm';
                    $content = $this->default_contents($alias,$type);
                break;
                default:
                    $content = $this->default_contents($alias,'tpl');
                    break;
            }
            $file = fopen(www.$key.'/'.$value, 'w+');
            $write = fwrite($file, $content);
            if (!$write) {
                throw new AjaxCatcher("".www.$key.'/'.$value." an error. ");
            }

        }

        return 1;
    } 
```

# c# - 在 Visual Basic 中而不是在 C# 中运行 XNA 4.0 的 Visual Studio

> ID：14094366
> 
> 赞同：0
> 
> 时间：2012-12-30T20:27:30.200
> 
> 标签：c#, vb.net, visual-studio-2010, xna

我的 Visual Studios 2010 express 在 Visual Basic 中运行 XNA 4.0，而不是像我需要的那样在 C# 中运行。每当我为 XNA 游戏创建一个新项目时，它都会在 Visual Basic 而不是 C# 下运行它，即使我的机器上安装了 C#。我能够在 Visual Basic 和 C# 中编译和运行一个基本程序，只是每次我尝试在 Visual Studios 中为 Windows 游戏（或任何其他游戏）创建一个新项目时，它都会使用 VB 创建它C# 的。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T22:42:52.743

听起来您在制作 XNA 项目时选择了错误的语言。

当您创建一个新项目时，在“已安装的模板”列表中，确保选择“ **Visual C#** ”选项卡中的“XNA Game Studio 4.0”。“Visual Basic”中还有一个“XNA Game Studio 4.0”，看起来就是你按下的那个。

# c# - 检测 .NET 版本的最佳实践

> ID：14094368
> 
> 赞同：0
> 
> 时间：2012-12-30T20:28:00.663
> 
> 标签：c#, .net

我创建了一个使用 .NET 3.5 的应用程序。但是，某些 Windows XP 机器会出现以下错误：

> 无法加载文件或程序集 'System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 或其依赖项之一。该系统找不到指定的文件。

这是因为他们安装了旧于 3.5 的版本。我怎样才能体面地检查 .NET 版本？我的意思是我不能从我的应用程序本身检查它，因为它在程序启动时正在寻找 3.5 DLL 文件。

我想到的是使用 .NET 2.0 创建一个非常简单的程序，然后检查安装了哪些版本（这个程序作为启动器）。不过我想听听你的意见。

# android - WebView.loadUrl() 仅适用于每第二次调用

> ID：14094373
> 
> 赞同：0
> 
> 时间：2012-12-30T20:28:40.287
> 
> 标签：android, android-webview

我有一个包含 WebView 的活动：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    webView = new WebView(this);
    setContentView(webView);
    webView.getSettings().setUserAgentString(MY_CLIENT);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.getSettings().setUseWideViewPort(true);
    webView.setWebViewClient(new MyWebViewClient());
} 
```

我的活动定义了 2 个菜单项，这将导致加载 2 个不同的 URL URL1 和 URL2：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_url1:
        webView.loadUrl(URL1);
        return true;
    case R.id.menu_url2:
        webView.loadUrl(URL2);
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

但是，仅在第二次选择相应的菜单项时才加载 URL。在 MyWebViewClient.onPageStarted() 和 MyWebViewClient.onPageFinished() 中设置断点显示，在第一次点击时，onPageFinished() 被调用，但 url 没有加载到 WebView 中。在第 2 次单击时，调用 onPageStarted()，然后调用两次 onPageFinished()，并将 url 加载到 WebView 中。如果我然后尝试加载另一个 URL，则该过程重新开始，并且需要再次单击两次。

我的目标 Android SDK 是 17，最小 SDK 是 8。我在 Nexus 7 上进行测试。

我该怎么做才能使 WebView 为第一次点击加载 URL？以及如何调试此类问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:16:37.237

看起来问题与我尝试加载的 URL 有关 - 其​​他 URL 工作得很好。因为对于我要加载的那些，我总是必须执行两次 loadURL() 调用，我现在只是在代码中完全这样做 - 奇怪的解决方法，但到目前为止有效。我必须查看网址，我想...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T06:22:52.920

尝试添加

```
webView.reload(); 
```

在你打电话之前

```
webView.loadUrl(...); 
```

这个解决方案可以帮助我解决像你这样的问题

# android - 使用多个数据源填充 Android ListView（使用加载器）

> ID：14094377
> 
> 赞同：2
> 
> 时间：2012-12-30T20:29:36.603
> 
> 标签：android, android-contentprovider, listadapter, android-cursorloader

我有三个数据库表：`Stacks`、`Dates`和`Z`，`Stacks`我的主表在哪里，并且`Dates`和`Z`是“子”表，具有外键列，链接到 的主键列`Stacks`。（请原谅我的术语，如果需要，我可以提供架构。）

以后我将只提及`Stacks`and `Dates`，以减少我的解释的复杂性，但如果它是相关的，`Z`将以与 完全相同的方式使用`Dates`。

在一个典型的例子`ListFragment`中，我使用[参考页面](http://developer.android.com/reference/android/app/LoaderManager.html)`ListView`上讨论的实现来构建一个- 创建一个空适配器，然后在我的查询完成时换出（查询输入和换入）。`LoaderManager` `Cursor``onCreateLoader()``onLoadFinished()`

我查询`Stacks`表（使用 URI，因为我的 DB 前面是`Content Provider`使用`Simple Content Provider` [library](https://github.com/mitmel/SimpleContentProvider)实现的），因为我想绑定到`getView()`适配器中每个列表项的值大多在这里找到，这很好用。

但是，我也希望绑定`Dates`表中的一些值，尽管我不确定如何执行此操作。在使用加载器之前，我会`SQLiteOpenHelper`在适配器中创建一个新的，并直接在getView() 方法中访问辅助项，即`Cursor`从`Dates`表中返回s。这很慢，我很确定事后看来这是个坏主意：P

**有没有一种标准的方法来实现这一点，使用多个数据源（理想情况下使用加载器）填充列表视图？**

编辑：

*   对于每个关联的表，该`Dates`表可能有多个记录（具有不同的值）`Stack`。
*   我有一个 ContentProvider 可以访问所有三个表，具体取决于 URI
*   我也很乐意使用多个加载器，因为我怀疑无论如何我都必须这样做，因为我需要在片段中显示与`ListView`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:48:49.660

如果您需要逐行执行此操作，您基本上有两种选择：

1.  在您的 中预先做所有事情`ContentProvider`，例如通过使用子查询或更复杂的查询。
2.  在`getView()`您的`Adapter`. 这类似于加载远程图像的工作方式。

两种方法都有其优势。#1 可能更简单，但如果您的列表中有很多项目，则可能不够快。#2 速度很快，因为您只会查询相关日期，但是在滚动时取消（或避免进行）查询可能会很痛苦。

当您必须执行未知数量的加载时，加载程序没有意义。

# python - 我应该使用“self”来定义我不需要从外部访问的类实例的变量/对象吗？

> ID：14094378
> 
> 赞同：6
> 
> 时间：2012-12-30T20:29:37.903
> 
> 标签：python, oop, python-2.7, python-2.x

我不是一个完整的初学者，但对**Python**相当陌生。今天在做一个项目的时候，我有一个想法，想知道“ **self** ”的用法；关于我过去一段时间一直在阅读的内容，但我仍然无法弄清楚它是否总是必要的。我的问题仅涉及类的实例和实例参数/变量。**这个问题与影响所有实例的类变量无关**。

**示例**：

```
class C:
    def __init__(self, parent = None):
        super(C, self).__init__(parent)
        self.some_temp_var = AnotherClass()
        self.important_property = self.some_temp_var.bring_the_jewels()

ins_c = C()
print ins_c.important_property 
```

在上面的代码中，我在两个变量声明（**some_temp_var**和**important_property ）之前都使用了****self**。

 ****稍后我**需要**从外部（创建实例的地方）访问 **important_property**，甚至可能对其进行修改。

但我不需要访问 AnotherClass() 的实例和/或指向它的变量（**some_temp_var**）。我只需要一次 it 类的实例，并且只需要执行一次它的方法 bring_the_jewels 来填充**important_property**的值。

在声明该变量之前我还应该使用 self 吗？

```
self.some_temp_var = ....
self.important_property = .... 
```

或者可以是：

```
some_temp_var = ....
self.important_property = .... 
```

感谢您的帮助。

*附言。我做了很长的研究。由于缺乏我的英语和/或 CS 知识，我可能没有找到当前存在的重复项，但是我进行了搜索，并且进行了很多搜索。在将此问题称为“重复”或“不具建设性”之前，请通读。这是一个有明确答案的问题，非常重要，也很复杂。感谢您的理解。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T20:34:04.367

如果您不使用`self.some_temp_var`，那么您正在定义一个局部变量，该变量将在构造函数之后被垃圾收集。

所以是的，`self`如果你想定义一个应该与实例一起存在的实例属性，你需要。无论您需要它是公共的还是私有的，都是命名的问题。`_`为受保护或`__`私有添加前缀。

如果`some_temp_var`只是构造函数的临时对象，并且您再也不需要它，那么不，您不需要`self`. 它是关于持久性和成员属性的。您不需要`self`在单个方法中使用变量的纯粹事实。

考虑一下……如果`some_temp_var`您构建了一些巨大的数据结构以得出真正的结果值怎么办？您不想用来`self`存储临时变量，因为在您删除它或实例之前它不会释放内存。您希望在不再需要它时对其进行清理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T20:34:11.250

看起来你根本不需要这个变量：

```
class C:
    def __init__(self, parent=None):
        super(C, self).__init__(parent)
        self.important_property = AnotherClass().bring_the_jewels() 
```

回应您的评论：

> 我需要把自己。如果它要在`__init__`.

不，你没有。然后使用常规变量，对象将在`__init__`退出后被垃圾收集。

```
class C:
    def __init__(self, parent = None):
        super(C, self).__init__(parent)
        some_temp_var = AnotherClass()
        self.important_property = some_temp_var.bring_the_jewels() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-30T20:46:43.333

Python 并没有真正区分“公共”和“私有”变量。您使用'self.something = value'分配给self中的名称的任何内容都将成为该实例的实例变量。

Python 确实有两个相关的约定：

1) Python 字段或方法以下划线('_') 为前缀，告诉用户“这不是这个类之外的问题”。单个下划线是一种或多或少识别诸如 C# 之类的语言将什么称为“受保护”变量的常规方法：它是实现的内部变量，除了此类和派生类外，应单独保留。双下划线就像 C# 的“私有”变量：它是内部的，即使是派生类也应该单独使用，它不能被覆盖

```
class Example(object):
    def __init__(self)
       self._protected= "protected"
       self.__private = "private"
       self.public = "public"

class Derived(Example):
    pass

d = Derived()
print d._protected
>> protected
print d.__private
>> AttributeError: 'Derived' object has no attribute '__private' 
```

严格来说，单下划线*只是一种印刷约定*。双下划线实际上会破坏类中的名称以防止继承。

2）如果AnotherClass实际上要挂起，并且如果操作AnotherClass实例会影响AnotherClass的状态，则您的示例可能是使用属性装饰器的情况。

```
class C:
    def __init__(self, parent = None):
        super(C, self).__init__(parent)
        self._private = AnotherClass()

    @property
    def public(self):
       return self._private.some_method_on_AnotherClass()

    @public.setter
    def set_pub(self, val)
       self._private.set_value_on_AnotherClass(val) 
```****

# sql - 获取每个subscriber_id 的每月最大（日期）记录。每月不返回重复的 ID

> ID：14094381
> 
> 赞同：2
> 
> 时间：2012-12-30T20:30:20.177
> 
> 标签：sql, oracle, oracle11g

我有一个包含列的表（没有索引）：`unique_id`, `subscriber_id`, `note`, `date_note_created (mm/dd/yyyy hh:mm:ss am)`, `officer_making_note`. A`subscriber_id`每月可以有多个由不同官员制作的笔记。

我想有效地创建一个视图，该视图保存每个月的最后一条记录，每个`subscriber_id`记录都像这样`'%some string%'`。

```
select * from 
(select subscriber_id, note, date_note_created, officer_making_note
from table
where user_id = v_sub_id
and date_note_created between to_date(v_monthstart, 'mm/dd/yyyy') 
and to_date(v_monthend, 'mm/dd/yyyy')
AND (LOWER (note) LIKE '%z%' 
or (note) LIKE '%a%'
or lower(note) like '%b%' 
or lower(note) like '%c%' 
or lower(note) like '%d%')
order by date_note_created desc)
where rownum = 1; 
```

上面的代码显示了我为实现这一目标所做的工作，`subscriber_id`为期一个月，没有重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:52:22.483

我的猜测是您使用的是 Oracle。这使您可以访问分析功能。

`where`由于您要查找多个月份和所有订阅者，因此我已删除子句和订阅者 ID中对月份的限制。我还添加了一个月份标识符（作为“YYYY-MM”格式的字符串）：

```
select *
from (select subscriber_id, note, date_note_created, officer_making_note, to_char(date_note_created, 'YYYY-MM') as mon
             row_number() over (partition by subscriber_id, to_char(date_note_created, 'YYYY-MM')
                                order by date_note_created desc) as seqnum
      from table
      where /* user_id = v_sub_id and */
            /* date_note_created between to_date(v_monthstart, 'mm/dd/yyyy') and to_date(v_monthend, 'mm/dd/yyyy') AND */
            (LOWER (note) LIKE '%z%' or (note) LIKE '%a%' or lower(note) like '%b%' or lower(note) like '%c%' or lower(note) like '%d%'
            )
     )
where seqnum = 1 
```

要创建视图，您只需使用`create view as`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:43:21.567

尝试`ROW_NUMBER`窗口函数，如下所示：

```
select *
from ( 
   select subscriber_id
        , note, date_note_created, officer_making_note
        , ROW_NUMBER () OVER (PARTITION BY subscriber_id
                              ORDER BY date_note_created DESC) as rn
   from table
   where user_id = v_sub_id
      and date_note_created between to_date(v_monthstart, 'mm/dd/yyyy') 
      and to_date(v_monthend, 'mm/dd/yyyy')
      and (   lower(note) LIKE '%z%' 
           or lower(note) LIKE '%a%'
           or lower(note) like '%b%' 
           or lower(note) like '%c%' 
           or lower(note) like '%d%')
   )  xx
where rn = 1; 
```

# javascript - 使用 ASP.NET 和 HTML5 Canvas 创建浏览器游戏

> ID：14094385
> 
> 赞同：0
> 
> 时间：2012-12-30T20:31:31.087
> 
> 标签：javascript, asp.net, html

我打算编写一个基于 ASP.NET/C# 的浏览器游戏，它在 ASP.NET 服务器上运行，并使用 HTML 5 Canvas 进行图形（2D 位图，没有 3D 图形）。

是否可以将位图 (png/gif) 和其他数据（二维数组 [int, string] 的字典）发送到 HTML 5 Canvas，并将 MouseClick 坐标发送回 ASP.NET 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:55:03.847

# 将单个图像加载到画布

你有这个画布

```
<canvas id="myCanvas"></canvas> 
```

通过创建一个新的 Image 对象并在图像加载后将图像添加到画布上来加载图像。drawImage() 方法将图像对象渲染到画布上。

```
<script type="text/javascript">
    var context = $("#myCanvas")[0].getContext("2d");
    var img = new Image();
    img.src = "some-image.jpg";
    img.onload = function() {
        context.drawImage(img, 100, 100);
    }
</script> 
```

获取鼠标在窗口中的位置，并通过 AJAX 将坐标发送到您的处理页面：

```
<script type="text/javascript">
    $(document).bind("click", function () {
        // Add a click-handler to the image.
        $("#myCanvas").bind("click", function (e) {
            var $canvas = $(e.target);
            var offset = $canvas.offset();
            var xpos = e.clientX - offset.left;
            var ypos = e.clientY - offset.top;

            $.post("Process.aspx", { x: xpos, y: ypos } );
        });
    });
</script> 
```

# 将一组图像加载到画布

加载一个图像数组，然后在每个图像加载时调用一个函数。

图像将出现在网格中。

```
// array of images
var imgArray = [
    "image01.jpg", "image02.jpg", "image03.jpg",
    "image04.jpg", "image05.jpg", "image06.jpg",
    "image07.jpg", "image08.jpg", "image09.jpg"
];

var preArray = [];    // array of preload images
var count = 0;    // count of loaded images

for (var i in imgArray) {
    preArray[i] = new Image();
    preArray[i].src = imgArray[i];
    preArray[i].onload = function() {
        count++;
        // when the last image was loaded
        if (count == imgArray.length) {
            // draw preload array to the grid
            imageLoaded(preArray);
        }
    }
}

function imageLoaded(img) {
    // grid for canvas
    var xpos = 100;    // margin-left
    var ypos = 100;    // margin-top
    var offset = 70;    // offset for images
    var cols = 3;    // number of columns in a grid

    //creates a grid
    for(var i in img) {
        var xoffset = xpos +  offset * (i % cols);
        var yoffset = ypos +  offset * Math.floor(i / cols);
        context.drawImage(img[i], xoffset, yoffset);
    }
} 
```

# jquery - 旋转后计算新的 x 和 y 坐标

> ID：14094386
> 
> 赞同：1
> 
> 时间：2012-12-30T20:31:49.580
> 
> 标签：jquery, jcanvas

我正在围绕它的中心旋转一个 jCanvas 层，但之后我需要计算它的新 x 和 y 坐标。我正在使用下面的代码，尽管它返回错误的值：

```
var rotation = layer.rotate * Math.PI / 180;

//object's middle
var middleX = layer.x + layer.width / 2;
var middleY = layer.y + layer.height / 2;

//new coords (wrong)
var newX = middleX * Math.cos(rotation) - middleY * Math.sin(rotation);
var newY = middleX * Math.sin(rotation) + middleY * Math.cos(rotation); 
```

对于简单的旋转 - 例如 90 度，我可以像这样得到新角的 x 和 y：

```
var middleX = layer.x + layer.width / 2;
var middleY = layer.y + layer.height / 2;
var newX = middleX - layer.height / 2;
var newY = middleY - layer.width / 2; 
```

但是更复杂的情况呢？

编辑：

我找到了这个公式，但它只有在我顺时针旋转时才能正常工作。逆时针旋转呢？

```
var newX = (layer.x - middleX) * Math.cos(rotation) - (layer.y - middleY) * Math.sin(rotation) + middleX;
        var newY = (layer.x - middleX) * Math.sin(rotation) + (layer.y - middleY ) * Math.cos(rotation) + middleY; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T23:52:43.043

您即将围绕中心旋转并获得新的角坐标。假设您想获得角度不是 90 度的最大边界框：

```
var theta = layer.rotate*Math.PI/180.;

// Find the middle rotating point
var midX = layer.x + layer.width/2;
var midY = layer.y + layer.height/2;

// Find all the corners relative to the center
var cornersX = [layer.x-midX, layer.x-midX, layer.x+layer.width-midX, layer.x+layer.width-midX];
var cornersY = [layer.y-midY, layer.y+layer.height-midY, midY-layer.y, layer.y+layer.height-midY];

// Find new the minimum corner X and Y by taking the minimum of the bounding box
var newX = 1e10;
var newY = 1e10;
for (var i=0; i<4; i=i+1) {
    newX = min(newX, cornersX[i]*Math.cos(theta) - cornersY[i]*Math.sin(theta) + midX);
    newY = min(newY, cornersX[i]*Math.sin(theta) + cornersY[i]*Math.cos(theta) + midY);
}

// new width and height
newWidth = midX - newX;
newHeight = midY - newY; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-28T11:15:10.890

```
 var theta = layer.rotate*Math.PI/180.;
    // Find the middle rotating point
    var midX = layer.x+ layer.width/2;
    var midY = layer.y+ layer.height/2;
    // Find all the corners relative to the center
    var cornersX = [layer.x-midX, layer.x-midX, layer.x+layer.width-midX, layer.x+layer.width-midX];
    var cornersY = [layer.y-midY, layer.y+layer.height-midY, midY-layer.y, midY-(layer.y+layer.height)];
    // Find new the minimum corner X and Y by taking the minimum of the bounding box
    var newX = 1e10;
    var newY = 1e10;
    for (var i=0; i<4; i=i+1) {
        newX = cornersX[i]*Math.cos(theta) - cornersY[i]*Math.sin(theta) + midX
        newY = cornersX[i]*Math.sin(theta) + cornersY[i]*Math.cos(theta) + midY
    } 
```

# javascript - 为什么jslint限制一行中的字符数？

> ID：14094387
> 
> 赞同：1
> 
> 时间：2012-12-30T20:32:11.700
> 
> 标签：javascript, visual-studio-2012, jslint

我正在处理的一些项目有一个 jslint 规则，它限制一行中的字符数（通常是 100 个字符）。在某些情况下，它使我的 javascript 代码看起来很丑，但我相信他们这样做是出于某些原因。那么，应用该规则的充分理由是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T20:37:28.950

一般来说，长行更难阅读。就我个人而言，在到达代码编辑器的边缘之前，我最多可以输入 150 个字符，但我可以通过最大化窗口来获得更多。但其他人可能在他们的环境中拥有较小的屏幕或窗口。强制执行大约 100 作为建议的“不要超过此长度”限制，以适应大多数人在不水平滚动的情况下查看整行代码的能力。

# c# - 在 Windows Phone 8 中，如何获取按钮的背景颜色属性？

> ID：14094388
> 
> 赞同：1
> 
> 时间：2012-12-30T20:32:23.730
> 
> 标签：c#, .net, xaml, windows-phone-8

在 Windows Phone 8 中，如何获取按钮的背景颜色属性？

```
<Button x:Name="btn" HorizontalAlignment="Left" Background="#FFF30808"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T20:54:24.650

好的。不知道这是否是最快的方法，但它是

```
Color MyColor = ((SolidColorBrush)btn.Background).Color; 
```

# java - 使用 shell 在 java 中运行机器人

> ID：14094393
> 
> 赞同：1
> 
> 时间：2012-12-30T20:32:58.317
> 
> 标签：java, eclipse, shell, irc

您好，我最近从[http://shellmix.com/index.php/free-account/free-shell-account](http://shellmix.com/index.php/free-account/free-shell-account)获得了一个 shell ，我进行了设置。所以然后我把我的机器人（pircbot 用 Ja​​va 中的 Eclipse 编码）放在 Filezilla 中，[http](http://pastebin.com/suJDwJfu) ://pastebin.com/suJDwJfu是我迄今为止在腻子中所做的。我只希望它托管我的机器人并始终在线。我的代码在 Eclipse 中运行良好，因此我将其放入 .jar 中并更改了 meta.inf 以使其正常工作。现在我只需要帮助运行它。所以请看看我的错误并告诉我该怎么做。

编辑：我修复了我的清单，所以现在我收到了这个错误： http: [//pastebin.com/EuK5P6Lv](http://pastebin.com/EuK5P6Lv)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:27:38.640

您的类必须有`public static void main(String args[])`方法，这意味着您可以从命令行执行该类。

然而，这并没有使它成为 jar 的主要执行类。主类设置在**META-INF/MANIFEST.MF**中。通常它应该有一行：

```
Main-Class: classname 
```

但随后与实际课程。

因此，使用 zip 程序打开 jar，然后检查**MANIFEST.MF**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:41:05.420

请确保以下几点：

1.  你有一个静态的主要方法：

    `public static void main(String[] args) { //Your code to run }`

2.  您已经使用**Eclipse->Export->Runnable Jar**导出了 jar并选择了特定的`main`功能。

![在此处输入图像描述](../Images/e5813766aec55ec5b13b1be2adefc226.png)

![在此处输入图像描述](../Images/b21197a6d152f659ade237d7d398fe9e.png)

![在此处输入图像描述](../Images/5e311db43f17bac7dec6d758f43905d6.png)

# javafx-2 - JavaFX 2 显示带有代码的选项卡

> ID：14094395
> 
> 赞同：1
> 
> 时间：2012-12-30T20:33:25.583
> 
> 标签：javafx-2, fxml

我想通过按下按钮来显示一个标签。我试过了

```
SingleSelectionModel<Tab> selectionModel = tabPane.getSelectionModel();
selectionModel.select(tab); 
```

但它不起作用。

# java - Android 字符串比较，子字符串

> ID：14094406
> 
> 赞同：0
> 
> 时间：2012-12-30T20:34:56.427
> 
> 标签：java, android

我的 Android 应用程序在`if`声明期间崩溃，我找不到错误。

这是我的代码片段，我该如何解决？

```
 public String formatResult(String inVal) {

         String tmp = inVal.substring(inVal.length() - 2, inVal.length());

         if (tmp.equals(".0") == true){

             return inVal.substring(inVal.length(),inVal.length()-2);
         } else {

             return inVal;
         }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:40:00.923

`inVal.substring(inVal.length(),inVal.length()-2);`

不是很有效，因为：

```
public String substring(int beginIndex,
                        int endIndex) 
```

IndexOutOfBoundsException - 如果 beginIndex 为负数，或者 endIndex 大于此 String 对象的长度，或者**beginIndex 大于 endIndex。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:42:09.487

“inVal”可以少于 2 个字符。调试项目并观察 inVal，在任何情况下使用 if 语句来控制 inVal 是否长于 2。

你可以改变：

```
if (tmp.equals(".0") == true) 
```

到：

```
if (tmp.equals(".0")){ 
```

另一件事是，您是否真的要返回：

```
inVal.substring(inVal.length(),inVal.length()-2); 
```

或者您想返回：

```
inVal.substring(inVal.length()-2, inVal.length()); 
```

EndIndex 不能小于 StartIndex。如果要从头到尾-2：

```
string a;
for(int i = inVal.length; i>=inVal.length-2; i--) {
    a += inVal.charAt(i);
} 
```

这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T20:44:50.333

```
String a = editboxa.getText().toString();
String b = editboxb.getText().toString();
if(a.equals(b))
    //do something
else
    //do something 
```

# c++ - 是`std::vector 的时间复杂度 ::clear` *真的*没有指定？

> ID：14094408
> 
> 赞同：13
> 
> 时间：2012-12-30T20:35:13.793
> 
> 标签：c++, std, language-lawyer

在[这个问题](https://stackoverflow.com/questions/14094302/stdvectorintclear-constant-time)`std::vector<T>::clear`的处理过程中，发现 C++ 标准似乎没有时间复杂度要求。

23.2.3 下的表 100 说：

> 销毁`a`. 使所有引用的元素的引用、指针和迭代器失效，`a`并且可能使过去的迭代器失效。帖子：`a.empty()`退货`true`

而且……就是这样。在 23.3.6 下没有专门针对它的条目，也没有*明确*表明以下适用于`clear`：

> `[C++11: 23.3.6.1/1]:`向量是支持随机访问迭代器的序列容器。此外，**它还支持（摊销）恒定时间的最后插入和擦除操作；在中间插入和擦除需要线性时间**。存储管理是自动处理的，但可以给出提示以提高效率。*[..]*

所以……这真的是真的吗？还是我只是错过了它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-30T22:36:25.803

这似乎是[DR 704](http://cplusplus.github.com/LWG/lwg-defects.html#704)（以及相关的[DR 1301](http://cplusplus.github.com/LWG/lwg-closed.html#1301)）的意外结果，它删除了措辞`clear()`相当于`erase(begin(), end())`因为`erase()`需要 MoveAssignable，在擦除每个元素时不需要它。删除定义`erase()`也删除了复杂性要求。这可能可以在编辑上处理；我已经向委员会提出了这个问题。

NB`std::deque::clear()`也`std::forward_list::clear()`受到影响。`std::list::clear()`确实有复杂性保证。

**编辑：**现在是[http://cplusplus.github.com/LWG/lwg-active.html#2231](http://cplusplus.github.com/LWG/lwg-active.html#2231)

# c# - 为什么使用偏离 sender 和 eventargs 的事件处理程序方法签名是个坏主意？

> ID：14094409
> 
> 赞同：5
> 
> 时间：2012-12-30T20:35:27.753
> 
> 标签：c#, event-handling, code-analysis

VS 2012 中的代码分析工具对我的代码提出了一些问题。大多数都很好，[这个](http://msdn.microsoft.com/en-us/library/ms182133.aspx)（CA1009 正确声明事件处理程序）但是我不明白其中的原因。

如果我不需要任何数据，只是为了知道发生了什么事情，在我看来，我通过使用带有不需要的参数的事件来混淆我的真实意图。

例如，假设我想列出所有符合给定条件的客户。如果我的存储库已更新，我需要重新检查数据。

所以我创建了一个存储库类，然后给它一个带有以下签名的 DataChanged 事件：

```
public event Action DataChanged; 
```

然后在其中一个使用 repo 的课程中​​我可以做

```
repository.DataChanged += UpdateMatchingCustomers;

private void UpdateMatchingCustomers() {
    MatchingCustomers = ...
} 
```

为什么这是个坏主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T20:38:57.290

我认为主要思想是有人可能希望使用相同的事件处理程序方法来处理来自多个源的事件，并且具有匹配的签名很有帮助：

*   强制存在`sender`确保处理程序可以区分不同的事件源
*   让所有事件数据对象派生自`EventArgs`确保始终有适当的类型可用于数据参数

此外，拥有事件数据的基类并强制执行它可以确保扩展事件源的类可以使用现有事件发送比基类更多的数据，这确保了它是可能的（当然，这有点牵强，但我在实际程序中至少做过一次）。

如果某个事件没有遵循他们预期的模式，如果微软的一些优秀设计师（他们肯定喜欢他们的设计师）破产，我也不会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:05:03.977

我会争论 EventArgs 参数，有优点和缺点。

但是发送者是必须的，如果同一个处理程序附加到多个对象，那么这就是您确定哪个实例引发事件的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T21:53:20.080

这可能看起来有点奇怪，但这条规则是有道理的，最好声明你的事件，这样你就不必创建新的委托：

```
public event EventHandler<CalculaMontosEventArgs> CantidadesEvent = delegate { };
public class CalculaMontosEventArgs : EventArgs
{
    public decimal Total { get; set; }

    public CalculaMontosEventArgs(decimal total)
    {
        Total = total;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-26T08:15:12.773

从性能来看，这个设计规则毫无意义，要在委托或操作中传达值类型，您需要生成一个包含值类型的引用类型......

好的，为了用户的可读性和维护，这很重要，它为类似的东西添加了上下文和含义

公共行动 MyAction；但是，代码注释也可以做到这一点......

# html - 使用 CSS/HTML 在页面上创建空白的正确方法是什么？

> ID：14094410
> 
> 赞同：0
> 
> 时间：2012-12-30T20:36:14.067
> 
> 标签：html, css, google-chrome

我正在创建一个网站，而不是不同的页面，一个页面连续滚动，其中链接指向页面下方的锚点......

我一直在页面上的“内容区域”之间创建空间，并在 HTML（等）中使用换行符，
但这似乎非常过时并且只是“错误”......这是最好的做法吗？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:40:43.507

尝试`min-height:100%`您的内容区域。这应该迫使它们至少有一个窗口高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:15:12.833

HTML 段落？它们之间的间距可以用`margin-top`或来确定`margin-bottom`。

```
<p>
Content A
</p>
<p>
Content B
</p> 
```

# jquery - 获取动态添加元素的位置

> ID：14094412
> 
> 赞同：1
> 
> 时间：2012-12-30T20:36:42.517
> 
> 标签：jquery, socket.io, dynamically-generated

我正在做一个棋盘游戏。比赛完成后，棋盘会动态添加，并且根据每个玩家的屏幕大小为每个玩家确定大小。这意味着要正确放置棋子我需要知道棋盘在 DOM 中的位置

```
$(document).on('click', '#boardOverlay', function(event){

    event.preventDefault();

    var offset = $(this).offset();

    alert("offset.left: " + offset.left + " offset.top: " + offset.top );

    var move = {};

    var mouseX = event.pageX - offset.left; 
    var mouseY = event.pageY - offset.top;

    move.Y = Math.floor(mouseX / board.piece_length);
    move.X = Math.floor(mouseY / board.piece_length);

    socket.emit('move', move, board.color);

}); 
```

在执行警报语句之前，Chrome 向我抛出了这个错误

```
> Uncaught TypeError: Cannot read property 'clientTop' of null    jquery.min.js:4 
```

我究竟做错了什么？我已经研究了[偏移量](http://api.jquery.com/offset/)和[位置](http://api.jquery.com/position/)，并认为偏移量是正确的选择，但两者都没有运气。

**注意：**该`.on()`方法有效，因为如果我将板留在左上角并假设值为 0 `offset.left`，`offset.top`则此功能可以正常工作。

**更新：**这是抛出错误的 JQuery 行

```
clientTop  = docElem.clientTop  || body.clientTop  || 0; 
```

这是非缩小版的第 9264 行

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-30T21:45:49.480

Maybe try accessing the attributes directly:

```
$(document).on('click', '#boardOverlay', function(event){
 var top = $(this).css("top");
 var left = $(this).css("left");
}); 
```

# assembly - xmm 寄存器 sse x64 里面的值

> ID：14094414
> 
> 赞同：0
> 
> 时间：2012-12-30T20:36:56.033
> 
> 标签：assembly, 64-bit, nasm, sse

我正在编写项目以使用 x64 程序集进行学习。我正在使用 nasm 编译器。我知道 xmm 寄存器可以存储 4 x 32 位或 2x64 位。例如，我想知道如何将 4 个浮点值（32 位）放入 xmm1 中。我的函数有标题`curve(float * x, float * y, int a, int b)`，x 是指向 5 元素数组的指针。我正在寻找一些信息，但我仍然不知道如何正确地做到这一点。提前感谢您的帮助！（ps。如果您有任何教程，包括有关 sse 的信息，那将非常有帮助）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:14:55.037

您可以使用 movdqa、movdqu、movaps、movups、movapd、movupd 指令之一将值从内存加载到 128 位 SSE 寄存器 (xmm)。movdqa、movaps、movapd 需要 16 字节对齐的内存访问（并且速度更快）。

顺便说一句，使用 SIMD 一次只做一点需要大量代码更改。更好的选择是一次做 4 个（因为 SIMD 有 4 个单精度浮点通道）。然后你可以（或多或少）用相同的向量指令替换每个常规指令。

# android - FB.getLoginStatus 永远不会在移动浏览器中触发回调

> ID：14094416
> 
> 赞同：4
> 
> 时间：2012-12-30T20:37:14.433
> 
> 标签：android, facebook, ipad, mobile

我正在使用`FB.getLoginStatus`（根据文档），它在所有桌面浏览器中都按预期工作，但由于我无法推断的原因，当从 iPad 或 Android 调用它时，调用只是简单地消失在 la-la 土地上（经过测试在各种设备和操作系统版本上）。

我不知道如何调试它。没有引发异常（我可以发出警报），所以，我完全被难住了。关于如何找出问题可能是什么的所有建议，或者更好的解决方案！将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T05:14:20.797

最常见的问题是移动网站 URL 未添加到应用设置中，检查[https://developers.facebook.com/apps/YOURAPPID/summary/](https://developers.facebook.com/apps/YOURAPPID/summary/)并向下滚动到移动 Web 部分。

另外：如果您在本地开发，请记住，例如 192.168.0.123 != localhost，这是最近花费了我近一个小时的经典（所有 URL/IP 都必须在 facebook.com 上的设置中，否则 FB .getLoginStatus 或任何其他身份验证事件不会触发！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:57:42.200

我遇到了完全相同的问题，然后意识到我正在使用 domainname.com 而不是 www.domainname.com 测试我的移动版本。Facebook 只会将信息重定向到其中一个，而不是两者。

# c++ - 了解成员初始化器列表

> ID：14094418
> 
> 赞同：2
> 
> 时间：2012-12-30T20:37:24.747
> 
> 标签：c++, qt, class

这是 Qt mainwindow.cpp 中自动生成的函数代码。

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{

} 
```

这会是一样的吗？

```
MainWindow::MainWindow(QWidget *parent)
{
    QMainWindow = parent;
    ui = new Ui::MainWindow;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T20:41:11.557

不，我相信`QMainWindow`它是一个基类，所以`QMainWindow=parent`根本不是替代品。至于`ui`任务。在第一种情况下，它将用 初始化`new Ui::MainWindow`，而在第二种情况下，它将在初始化后分配。在复杂对象的情况下，它可能会导致显着的性能损失，并且在构造后也可能无法正确初始化对象。

# iphone - 如何知道用户上传到 SoundCloud 的次数？

> ID：14094419
> 
> 赞同：1
> 
> 时间：2012-12-30T20:37:24.777
> 
> 标签：iphone, ios, upload, soundcloud

在我的应用程序中，用户可以将他们制作的录音上传到 SoundCloud。有没有办法让我知道通过我的应用上传了多少首歌曲？当用户尝试上传歌曲时，他们必须登录并询问“允许 'APPNAME' 访问您的帐户吗？” 所以我假设有一些方法。但我无法以编程方式或在 SoundCloud 的网站上找到它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:41:59.057

使用*网络抓取*，在 soundcloud-profile 的页面上有一个带有类的列表项`sc-ministats sc-ministats-large`和`sc-ministats-sounds`. 例如：`<li title="12 sounds" class="sc-ministats sc-ministats-large sc-ministats-sounds"> 12 </li>`

抓取某人个人资料的网页并解析 li 元素的值。也许看看这个：[How to parse HTML on iOS](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T04:24:40.427

您可以访问`api.soundcloud.com/apps/:app_id/tracks`以获取该应用程序上传的所有曲目，但它不会告诉您总数。

# android - Android TabHost - setIndicator 方法

> ID：14094429
> 
> 赞同：0
> 
> 时间：2012-12-30T20:38:34.723
> 
> 标签：android

我正在尝试使用 TabHost 创建应用程序接口。这是我正在使用的示例：[示例](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/) 我一步一步地遵循它，但我在 Main 类中遇到了我无法处理的错误。这是我的代码：

```
import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class Main extends TabActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

TabHost tabHost = getTabHost();

TabSpec settings = tabHost.newTabSpec("Settings");

settings.setIndicator("Settings", getResources().getDrawable(R.drawable.icon_settings_tab));
Intent settingsIntent = new Intent(this, Settings.class);
settings.setContent(settingsIntent);

TabSpec recorder = tabHost.newTabSpec("Recorder");
recorder.setIndicator("Recorder", getResources().getDrawable(R.drawable.icon_recorder_tab));
Intent recorderIntent = new Intent(this, Recorder.class);
recorder.setContent(recorderIntent);

TabSpec player = tabHost.newTabSpec("Player");
player.setIndicator("Recorder", getResources().getDrawable(R.drawable.icon_player_tab));
Intent playerIntent = new Intent(this, Player.class);
player.setContent(playerIntent);

tabHost.addTab(settings);
tabHost.addTab(recorder);
tabHost.addTab(player); 
} 
```

对于以下行：

```
settings.setIndicator("Settings",   getResources().getDrawable(R.drawable.icon_settings_tab)); 
```

我收到此错误：

```
Multiple markers at this line
- Syntax error on token ")", delete this token
- Syntax error, insert ";" to complete FieldDeclaration
- Syntax error on token ".", { expected
- Return type for the method is missing
- Syntax error, insert "}" to complete ClassBody
- The method getDrawable(int) is undefined for the type Main
- Syntax error on token(s), misplaced construct(s)
- Return type for the method is missing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:42:11.640

在 Java 中，您不能在方法之外编写任何语句。您只能声明变量。

[http://www.tutorialspoint.com/java/java_basic_syntax.htm](http://www.tutorialspoint.com/java/java_basic_syntax.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:49:26.563

您需要包含所有代码

```
TabHost tabHost = getTabHost(); 
```

进入一个方法，以`}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T20:56:21.520

把所有的代码

```
TabHost tabHost = getTabHost();

TabSpec settings = tabHost.newTabSpec("Settings");

settings.setIndicator("Settings", getResources().getDrawable(R.drawable.icon_settings_tab));
Intent settingsIntent = new Intent(this, Settings.class);
settings.setContent(settingsIntent);

TabSpec recorder = tabHost.newTabSpec("Recorder");
recorder.setIndicator("Recorder", getResources().getDrawable(R.drawable.icon_recorder_tab));
Intent recorderIntent = new Intent(this, Recorder.class);
recorder.setContent(recorderIntent);

TabSpec player = tabHost.newTabSpec("Player");
player.setIndicator("Recorder", getResources().getDrawable(R.drawable.icon_player_tab));
Intent playerIntent = new Intent(this, Player.class);
player.setContent(playerIntent);

tabHost.addTab(settings);
tabHost.addTab(recorder);
tabHost.addTab(player); 
```

`onCreate()`方法里面

结果你会得到这个：

```
import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

    public class Main extends TabActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

       TabHost tabHost = getTabHost();

    TabSpec settings = tabHost.newTabSpec("Settings");

    settings.setIndicator("Settings", getResources().getDrawable(R.drawable.icon_settings_tab));
    Intent settingsIntent = new Intent(this, Settings.class);
    settings.setContent(settingsIntent);

    TabSpec recorder = tabHost.newTabSpec("Recorder");
    recorder.setIndicator("Recorder", getResources().getDrawable(R.drawable.icon_recorder_tab));
    Intent recorderIntent = new Intent(this, Recorder.class);
    recorder.setContent(recorderIntent);

    TabSpec player = tabHost.newTabSpec("Player");
    player.setIndicator("Recorder", getResources().getDrawable(R.drawable.icon_player_tab));
    Intent playerIntent = new Intent(this, Player.class);
    player.setContent(playerIntent);

    tabHost.addTab(settings);
    tabHost.addTab(recorder);
    tabHost.addTab(player);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

 } 
```

# android - Chrome移动忽略溢出

> ID：14094433
> 
> 赞同：1
> 
> 时间：2012-12-30T20:38:51.597
> 
> 标签：android, html, css, jquery-mobile

我正在为android创建一个webapp。我一直在使用 JQM 的 phonegap，但我遇到了一个问题。

我正在实现一个滑入式菜单，为此我在互联网上找到了一个简单的示例。

[http://www.aldomatic.com/jqm/fb-menu-style/](http://www.aldomatic.com/jqm/fb-menu-style/)

这个简单的菜单从左侧滑入，该部分效果很好，但是当我尝试将其滑入时，我遇到了问题。整个页面滚动，尽管我有

```
#mobileViewport {
    overflow: hidden;
} 
```

（body 标签的 id 为`mobileViewport`

我也尝试将其添加到 html 标签中，但无济于事。

这是一个错误吗？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T04:13:03.693

默认情况下，JQM 页面是**绝对**定位的，位于其包含元素的流程之外（如果包含元素是静态定位的）。

因此，添加`overflow:hidden`包含元素（主体）不会有帮助。

如果您申请`position:relative`，`#mobileViewport`应该会导致 JQM 移动页面现在正确地从包含元素流出，并且`overflow:hidden`应该可以工作。

但是，我怀疑这可能不是一个好主意，并且必然会导致其他 CSS 显示问题。（我记得有一次自己玩过这个，并且有其他问题作为副作用）

可能更好的主意是将溢出：隐藏添加到 JQM 页面元素本身。

```
<body class="ui-mobile-viewport">
  <div id="mypage" data-role="page" class="ui-page">
  ...
  </div>
</div>

#mypage {
   overflow:hidden;
} 
```

注意：如果您有页脚，则可能希望将其应用于`overflow:hidden`子`.ui-content` 元素。

# c# - 解析带有可点击内容页面的 pdf 文件

> ID：14094442
> 
> 赞同：4
> 
> 时间：2012-12-30T20:40:02.283
> 
> 标签：c#, c#-4.0, pdf, pdf-parsing

假设我们有一个包含可点击内容页面的 pdf 文件。（我说的是章节和子章节）如何在 C# 中解析某个文件以及应用程序如何实现它正在阅读的 pdf 是否有章节/内容等？

这是指向没有可点击目录的 pdf 的链接 [https://docs.google.com/open?id=0B1EbI-EMJxmkODE1Mm5WbFpEdXc](https://docs.google.com/open?id=0B1EbI-EMJxmkODE1Mm5WbFpEdXc) 我似乎没有找到带有可点击目录的 pdf，但我找到了有关如何操作的指南在这里做 [http://everythingyoumightneed.blogspot.com/2013/01/how-to-create-pdf-with-clickable-links.html](http://everythingyoumightneed.blogspot.com/2013/01/how-to-create-pdf-with-clickable-links.html)

所以我的问题是：应用程序如何区分哪个是哪个以及如何解析具有可点击链接的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T09:19:14.983

您的问题与试图找出 PDF 文件中段落和列的位置没有什么不同；PDF 通常不会这样标记目录页面。因此，即使使用 PDF 库（例如 mkl 指出的 iTextSharp），这也不是一件容易的事。

有了这样的库，您将能够看到 PDF 文件中的页面和页面上的文本。但是，例如，如果这是一本书，则目录页可能是 PDF 文件中的第一页、第二页、第三页或第 x 页，因为它前面出现了各种其他页面（封面、第二封、版权、贡品、你的名字...）。

因此，发现是否存在目录的算法必须能够在 PDF 文件的前 x 页中的某处发现它。由于没有标准标签突出目录中的文本，因此必须通过分析该页面上的文本格式来完成。

有两件事可能会有所帮助（如果有的话）：

1) 在许多 PDF 文件中，表格中的项目是内容，就像你说的可点击一样。因此，您可以查看 PDF 文件并尝试找到包含大量超链接项目的第一页。

2) 在许多 PDF 文件中，目录反映在书签中。因此，您还可以检查书签结构，看看是否可以使用它来计算书中有多少章。

请记住，这两个功能都是可选的，如果它们存在，则不会标准化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:45:09.647

由于 PDF 是一种二进制格式，您必须使用 pdflib 之类的 pdf 库才能读取 pdf 文件。

[pdf库](http://www.pdflib.com)

您也可能想查看此 CodeProject 站点以获取一些示例 [在 C# 中将 PDF 转换为文本](http://www.codeproject.com/Articles/12445/Converting-PDF-to-Text-in-C)

# linux - x86程序集从文件读取字节到堆栈但gdb找不到字节

> ID：14094443
> 
> 赞同：0
> 
> 时间：2012-12-30T20:40:02.983
> 
> 标签：linux, assembly, x86

我有一些汇编代码从文件中读取 4 个字节并将它们存储在堆栈中，然后将这 4 个字节显示到标准输出，代码工作正常但是当我使用 gdb 查看代码在做什么并试图找到那些 4堆栈上的字节我找不到它们..

```
(gdb) p $esp                                                                  
$1 = (void *) 0xbffff6bc                                                            
(gdb) x/4 $esp                                                                                     
0xbffff6bc: 0 1 0 -1073743777 
```

文件的前 4 个字节是：

```
cat nummers.txt|od -c
0000000   3  \n   1  \n   2  \n   3  \n
0000010 
```

编码：

```
%macro write 2
    mov eax,4       ; write syscall
    mov ebx,STDOUT  ; stdout
    mov edx,%2      ; number of bytes
    mov ecx,%1      ; buffer
    int 80h     ; call kernel
%endmacro

section .data   
    filename    db 'nummers.txt' ; just use lenth of string
    filename_len    equ $-filename   ; here we use a constant
    STDOUT      equ 1    ; stdout

section .bss
    buffer      resb 4
section .text
global _start   
    _start:

    ;; read first byte from file to know how many elements there are
    mov eax,5       ; syscall open
    mov ebx,filename    ; filename
    mov ecx,0       ; read-only
    int 80h     ; call kernel

    sub esp,4       ; subtract 4 bytes from stack.
    mov eax,3       ; syscall read
    mov ebx,eax     ; file descriptor
    mov ecx,esp         ; location for storing 4 bytes
    mov edx,4       ; read 4 bytes
    int 80h     ; call the kernel

    mov eax,4
    mov ebx,STDOUT
    mov ecx,esp
    mov edx,4
    int 80h
    call ret        
    ret:    
    mov eax,1
    mov ebx,1
    int 80h 
```

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:04:54.010

即使在这个简短的汇编程序中，您也几乎达到了可能的最高错误计数。文件名不以 0 字节结尾。您没有检查公开通话的结果。您尝试在文件大小为 8 时读取 4 个字节。最后您正在重用 esp，希望它的值没有改变。

# asynchronous - Chrome 扩展：处理异步 sendMessage。

> ID：14094447
> 
> 赞同：2
> 
> 时间：2012-12-30T20:41:01.780
> 
> 标签：asynchronous, google-chrome-extension, sendmessage

我正在开发一个提取元数据的 chrome 扩展。解析元数据的代码包含在内容脚本中。background.js 和 content.js 通过 sendMessage 请求和响应进行通信。我遇到了 sendMessage 请求的异步性质的问题，我不确定如何解决它（即使在阅读了关于该问题的一连串讨论之后）。任何建议或方向将不胜感激。我怀疑我不知道如何将这些转换为回调。

背景.js：

```
function onContextClick(info, tab) {    
  if( info["selectionText"] ){  
    var x = getMeta(tab);   
    //do stuff with x       
  }
}

function getMeta (tab) {
chrome.tabs.sendMessage(tab.id, {fetchTag: "meta,name,author,content"}, function(response) {
    //alert(response.data);
    //one thing I tired was to put my "do stuff" embedded here, but that didn't work either         
    return response.data; 
    });
}

var menu_id = chrome.contextMenus.create({"title": "Get Meta", "contexts":["selection"], "onclick": onContextClick}); 
```

内容.js：

```
function fetchTag(string) {
    var param = string.split(",");
    return $(param[0] + "["+param[1]+ "=\"" + param[2] + "\"]").attr(param[3]); 
    }

chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse) {
    if (request.fetchTag.length > 0)        
    sendResponse({data: fetchTag(request.fetchTag)});
  }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-11-16T16:55:00.380

来自：[https ://developer.chrome.com/extensions/runtime#event-onMessage](https://developer.chrome.com/extensions/runtime#event-onMessage)

> 有响应时调用的函数（最多一次）。参数应该是任何 JSON-ifiable 对象。如果您在同一个文档中有多个 onMessage 侦听器，那么只有一个可以发送响应。当事件侦听器返回时，此函数无效，除非您从事件侦听器**返回 true**以指示您希望异步发送响应（这将保持消息通道对另一端开放，直到调用 sendResponse ）。

```
chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse) {
    if (request.fetchTag.length > 0)        
    sendResponse({data: fetchTag(request.fetchTag)});
    return true;
}); 
```

然后它将与异步代码一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-25T20:09:57.633

就我而言，

1.  按照文档的建议简单地添加`return true`并没有帮助
2.  设置`listener`in `onMessage`to`async`和 use`await`以等待异步响应并使用它发送它`sendResponse`没有帮助

没有帮助我的意思是 Chrome 控制台中发生以下错误：

```
Unchecked runtime.lastError: The message port closed before a response was received. 
```

经过一些实验，我发现以下方法可以很好地异步发送响应。

```
// content.js
chrome.runtime.sendMessage({ type: "GET_FOO" }, function (response) {
  console.log(response.foo);
}); 
```

```
// background.js

// replace with a real call that
// needs to run asynchronously
async function getFoo() {
  return "bar"
}

async function sendFoo(sendResponse) {
  const foo = await getFoo()
  sendResponse({ foo })
}

chrome.runtime.onMessage.addListener(
  function (request, sender, sendResponse) {
    if (request.type === "GET_FOO") {
      sendFoo(sendResponse)
      return true
    }
  }
); 
```

在 Chrome 92.0.4515.159（官方版本）（x86_64）上测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T21:14:57.637

您可以使用***闭包***。这样。

```
function onContextClick(info, tab) {    
  if( info["selectionText"] ){  
    getMeta(tab, function(x){
      console.log(x);
      //do stuff with x
    });
  }
}

function getMeta (tab, callback) {
chrome.tabs.sendMessage(tab.id, {fetchTag: "meta,name,author,content"}, function(response) {
    //alert(response.data);
    //one thing I tired was to put my "do stuff" embedded here, but that didn't work either
    callback(response.data);
    });
} 
```

# php - 如何更新 phpunit？

> ID：14094452
> 
> 赞同：5
> 
> 时间：2012-12-30T20:41:15.900
> 
> 标签：php, phpunit, pear

我已经尝试了**一切**，包括[https://stackoverflow.com/a/8740349/251311](https://stackoverflow.com/a/8740349/251311)以及所有可能的频道升级和清除缓存命令。但仍然：

```
$ sudo pear install -a -f phpunit/PHPUnit
downloading PHPUnit-3.6.12.tgz ...
Starting to download PHPUnit-3.6.12.tgz (120,240 bytes)
..........................done: 120,240 bytes
install ok: channel://pear.phpunit.de/PHPUnit-3.6.12 
```

尽管：

```
$ pear list-upgrades
Channel pear.php.net: No upgrades available
pear.phpunit.de Available Upgrades (stable):
============================================
Channel         Package            Local           Remote          Size
pear.phpunit.de PHPUnit            3.6.12 (stable) 3.7.10 (stable) 115kB
pear.phpunit.de PHPUnit_MockObject 1.1.1 (stable)  1.2.2 (stable)  19.9kB
pear.phpunit.de PHPUnit_Selenium   1.2.8 (stable)  1.2.11 (stable) 38kB
pear.phpunit.de PHP_CodeCoverage   1.1.4 (stable)  1.2.7 (stable)  155kB
pear.phpunit.de PHP_TokenStream    1.1.4 (stable)  1.1.5 (stable)  9.7kB
pear.phpunit.de Text_Template      1.1.3 (stable)  1.1.4 (stable)  3.6kB 
```

## 奖

如果有人暗示可能导致 PEAR 无法将 phpunit 升级到可能的最新版本（使用 PEAR），将获得 100 分奖励。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T20:56:49.970

好吧，我使用的是 ubuntu lts 10.04，它有 php 5.3.2 版本。

虽然 phpunit 3.7 依赖于 php >= 5.3.3 （尽管它没有在任何地方明确显示）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T17:56:20.823

我将我的 Ubuntu 更新到 12.10，它给了我 PHP 5.4.x，然后也更新了 PHPUnit 的版本。我相信你需要 5.4.x 的 PHP 才能使用最新的 PHPUnit。尝试将 PHP 更新为 5.4.x，然后再次尝试 PHPUnit 更新。

# java - Java：重复调用函数时性能提高的原因是什么？

> ID：14094455
> 
> 赞同：5
> 
> 时间：2012-12-30T20:41:37.460
> 
> 标签：java, performance, garbage-collection, instrumentation, jvm-hotspot

当我遇到一个奇怪的结果时，我正在对对象分配进行一些性能测试。我有以下java代码：

```
public static long TestMethod(){
    int len = 10000000;
    Object[] obs = new Object[len];
    long t = System.nanoTime();
    for (int i = 0; i < len; i++) {
        obs[i] = new Object();
    }
    return System.nanoTime() - t;
}

public static void main(String... args) throws InterruptedException {
    for(int i = 0; i < 10; i++){
        System.gc();
        System.gc();//Wait for the gc to be finished
        Thread.sleep(1000);
        System.out.println(TestMethod());
    }
} 
```

**预期**：由于向操作系统请求更大的内存空间和热点增强，第一次调用会比第二次调用慢。但第二和第三几乎是一样的。

**观察结果**：

```
11284734000
799837000
682304000
304736000
380770000
392786000
374279000
381611000
379174000
407256000 
```

在第三次和第四次迭代之间仍然有相当大的加速。是什么导致了这种加速？在测试其他功能时，如何确保我的测量准确，我是否必须在测量前调用该功能四次以上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T20:58:59.363

> 是什么导致了这种加速？

它很可能是 JIT 编译，但也可能是代码加载和/或堆热身效应的贡献。

> 在测试其他功能时，如何确保我的测量准确，我是否必须在测量前调用该功能四次以上？

你需要做这样的事情。没有其他方法可以从您的测量中消除 JVM 预热效应，并且仍然获得具有代表性的结果。为 Java 编写有效的“微基准”很困难，您需要在尝试之前阅读所有问题。从这个开始：[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java?lq=1)

* * *

我还要注意其他几件事：

1.  你试图从你的测量中消除垃圾收集的成本（我假设这就是你似乎正在做的）*似乎*失败了。看起来您在执行`testMethod`. 这将解释您的“稳态”结果中约 7% 的可变性。

2.  将分配对象的成本与释放它的成本分开可能会给您带来误导性的结果。分配对象的“总”成本包括在回收时将内存归零的成本……这是由垃圾收集器完成的。

3.  事实上，最有用的度量是分配/收集周期的每个对象的摊销成本。这（令人惊讶的是）取决于 GC 运行时的非垃圾量......这是您的基准测试没有考虑到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T20:47:55.267

正如您所说，有多种因素可以加快函数的执行速度：

*   最重要的是，[JIT](http://en.wikipedia.org/wiki/Just-in-time_compilation)可能会在您的应用程序期间发生在不同的程度或时刻（这就是为什么在没有给 JVM 足够的时间进行预热的情况下进行分析会导致误导性结果的原因）
*   对操作系统的内存请求
*   为您分配的对象重用堆上的内存

您无法确定每一步何时发生，也无法知道何时将代码片段编译为本机代码，但假设这发生在第一次调用不正确之前，它可能恰好发生在时间介于第三次和第四次迭代或其他。不幸的是，这些细节隐藏在 JVM 实现中。

# linux - 将超级键映射到 xorg.conf 中的控件？

> ID：14094456
> 
> 赞同：6
> 
> 时间：2012-12-30T20:41:39.617
> 
> 标签：linux, x11, xorg, keymapping

我一直在尝试在 Macbook 上的 X 中切换我的超级键和控制键，并且成功了一半。如果可能，我想避免创建自定义 .Xmodmap，因为每次加载自定义地图时都会弹出一个临时的 100% cpu 错误。

经过一番挖掘，我最终将 Option "XkbOptions" "altwin:ctrl_win" 放在了我的 01-keyboard-layout.conf 文件中，这让我走到了一半：例如，left 命令现在映射到 133 Control_L。

但是，控制键保持不变。左控制，例如仍然映射到 37 Control_L。

浏览 evdev.lst （和一堆谷歌搜索）发现没有相关的 XkbOption 将控制键变成超级，现在我很卡住。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T01:29:59.070

好的，我终于让它工作了。

首先，这两个资源对于任何想要深入研究这个烂摊子的人来说都是惊人的：

[http://madduck.net/docs/extending-xkb/](http://madduck.net/docs/extending-xkb/) & [http://www.charvolant.org/~doug/xkb/html/index.html](http://www.charvolant.org/~doug/xkb/html/index.html)

对于专门尝试进行此切换的任何人，这就是我所做的：

1) 在 /usr/share/X11/xkb/symbols 中为您的新映射创建一个文件 2) 将其放入其中：

```
// Control is SWAPPED with Win-keys 
partial modifier_keys
xkb_symbols "cmd_n_ctrl" {
    key <LWIN> {        [       Control_L               ]       };
    key <RWIN> {        [       Control_R               ]       };
    key <LCTL> {       [       Super_L         ]       };
    modifier_map Control { <LWIN>, <RWIN> };
    modifier_map Mod4 { <LCTL> };
}; 
```

3：编辑 /usr/share/X11/xkb/rules 中的 evdev 以包括：

```
altwin2:cmd_n_ctrl               =       +altwin2(cmd_n_ctrl) 
```

（在选项 = 符号部分下）

4：将您的新选项添加​​到 evdev.lst（相同的目录）：

```
altwin2:cmd_n_ctrl 
```

（在选项部分下）

5：现在编辑您的 01-Keyboard conf 文件以包含您创建的新选项。我的看起来像这样：

```
Section "InputClass"
        Identifier "keyboard-layout"
        Driver "evdev"
        MatchIsKeyboard "yes"
        Option "XkbLayout" "us, ru, ca, fr"
        Option "XkbOptions" "altwin2:cmd_n_ctrl"
EndSection 
```

6：重新启动，你应该很好去。

上述资源可以更好地解释所有这些，或者您可能遇到的任何障碍。可能有更好的方法来做到这一点（可能不会改变 /usr/share 的内容），但到目前为止，这就是让我开始并运行的原因。

希望能帮助困在这个地方的其他人！

# windows - WinSock.h & WinSock2.h 用哪个？

> ID：14094457
> 
> 赞同：12
> 
> 时间：2012-12-30T20:41:41.013
> 
> 标签：windows, sockets, tcp, ip, winsock

有谁知道 WinSock.h 和 WinSock2.h 之间的区别。我知道他们不使用相同的库 (.lib)，但我不知道 WinSock2 是否只添加了新功能，或者它是否也改进了 WinSock 1 的功能。我正在使用 IP/TCP 套接字并希望使用 select() 管理超时。我还使用多个线程同时管理多个客户端。我应该继续使用 WinSock 1.1 还是应该迁移到 WinSock 2？提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-30T20:50:19.793

您可能应该使用`winsock2.h`.

几点：

*   `winsock.h`应该`wsock32.lib`和`winsock2.h`应该一起使用`ws2_32.lib`
*   `winsock.h`并且`winsock2.h`不应该在同一个项目中，`winsock2.h`替换`winsock.h`而不是扩展它。
*   `winsock.h`仅当您针对 Windows 95 / Windows NT 3.5 等旧版本的 Windows 时才应使用。

## 微软实施

**Winsock 的1.1** ( `winsock.h`) 版在 Windows for Workgroups（代号为 Snowball）的附加包（称为 Wolverine）中提供。它是 Windows 95 和 Windows NT 3.5 及更高版本的一个组成部分（Windows NT 的初始商业版本 3.1，仅包括基于 AT&T UNIX System V“Streams”的专有且相当不完整的 TCP/IP 实现“API。

**Winsock 2.1** ( `winsock2.h`) 版是在 Windows 95 的附加程序包中提供的。它是 Windows 98、Windows NT 4.0 和所有后续 Windows 版本的组成部分。*Winsock 2.x 的最新版本已与新的 Windows 版本一起提供或作为服务包的一部分提供。*

## Winsock2 是否添加了功能？

Winsock 2 可通过一种称为分层服务提供程序 (LSP) 的机制进行扩展。Winsock LSP 可用于广泛的有用目的，包括 Internet 家长控制、Web 内容过滤、QoS 等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-30T20:46:40.070

Winsock.h 用于保持从 16 位版本的 Windows 开始的代码编译。您应该始终使用 Winsock2.h 并在新项目中链接到 ws2_32.lib。

# ipad - UImages 加载速度

> ID：14094459
> 
> 赞同：1
> 
> 时间：2012-12-30T20:41:48.757
> 
> 标签：ipad, ios5

我的应用程序中需要大量小图像（约 200 张）。图像的分辨率为 20-200 x 20-200 像素。加载时间为 30-40 秒 :( 如何加速？

我需要所有图像，所以我认为必须“延迟加载”。我使用 NSOperations ......这很酷，用户界面在应用程序加载图像时工作......但是 35 秒。加载代码：

```
 - (void)loadImage
{
    NSString* documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString* path = [documentsDirectory stringByAppendingPathComponent: name];
    image = [UIImage imageWithContentsOfFile:path];
} 
```

如果我使用 Main Bundle 会更快吗？或者我把小文件打包成一个大文件？（其他我的应用程序加载 10 张高清图像 2 秒）

重新，汤姆。

# ruby-on-rails-3 - 找到最接近整数的最有效方法？

> ID：14094463
> 
> 赞同：3
> 
> 时间：2012-12-30T20:42:27.880
> 
> 标签：ruby-on-rails-3, postgresql-9.2

我有一个预定义的 6 位数字，以及一个带有“数字”字段（整数）的条目模型，每月将有数千个随机生成的条目。我需要找到最接近预定义的 6 位数字的条目的最佳方法。

这基本上是一场比赛。在月初，会选择一个随机的 6 位数字，人们可以进入并获得一个随机数字——在月底，数字最接近的人获胜。

任何人都知道找到最近入口的最有效方法是什么？

我正在使用 Postgres 9.2 和 Rails 3.2.9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:48:51.557

获胜者将拥有最接近于零的predefined_number 和 selected_number 之间的差值。

只需查询按 abs(predefined_number - selected_number) 排序的选取号码。名单上的第一个是获胜者。

# c# - 实体框架 6 alpha 2 - 异步模式

> ID：14094467
> 
> 赞同：5
> 
> 时间：2012-12-30T20:42:55.873
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, azure-sql-database, entity-framework-6

我最近有一个使用 MVC 4、.NET 4.5 并使用 EF 5.0（数据库优先）使用 EF 5.0 DbContext Generator 的项目。然后我通过 Nuget Manager 升级到 EF 6.0 alpha 2。我想使用新的异步模式，但由于某种原因我没有 .ToListAsync() 可用。我以类似的方式引用上下文：

```
public class HomeController : Controller
{
    TestContext db = new TestContext();

    public async Task<ActionResult> Index()
    {
        var keywords = await db.Keywords.ToListAsync();

        return View(keywords);
    }
} 
```

这在 Database First 中不可用，而仅在 Code First 中可用？我怎样才能使上面的例子起作用？我正在使用 SQL Azure。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T20:59:07.370

异步。扩展方法在 EF 相关的`System.Data.Entity.IQueryableExtensions`静态类中定义。所以你必须添加：

```
using System.Data.Entity; 
```

在您的控制器类文件的开头，以便能够调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:47:32.710

我认为您可以像这样使用 Task.Run

```
public async Task<ActionResult> Index()
{
    var keywords = await Task.Run(() => db.Keywords.ToList());

    return View(keywords);
} 
```

# java - Eclipse 4 和 RCP

> ID：14094470
> 
> 赞同：0
> 
> 时间：2012-12-30T20:43:16.237
> 
> 标签：java, eclipse, eclipse-rcp

我正在尝试从 vogella 网站上制作[Eclipse 教程。](http://www.vogella.com/articles/EclipseRCP/article.html)当我尝试创建新应用程序时，出现以下错误：

```
org.eclipse.swt.SWTException: Widget is disposed
at org.eclipse.swt.SWT.error(SWT.java:4361)
at org.eclipse.swt.SWT.error(SWT.java:4276)
at org.eclipse.swt.SWT.error(SWT.java:4247)
at org.eclipse.swt.widgets.Widget.error(Widget.java:468)
at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:340)
at org.eclipse.swt.widgets.Text.getText(Text.java:1327)
at org.eclipse.ui.dialogs.WizardNewProjectCreationPage.getProjectNameFieldValue(WizardNewProjectCreationPage.java:296)
at org.eclipse.ui.dialogs.WizardNewProjectCreationPage.getProjectName(WizardNewProjectCreationPage.java:282)
at org.eclipse.ui.dialogs.WizardNewProjectCreationPage.getProjectHandle(WizardNewProjectCreationPage.java:267)
at org.eclipse.e4.internal.tools.wizards.project.E4NewProjectWizard$1.getProject(E4NewProjectWizard.java:121)
at org.eclipse.e4.internal.tools.wizards.project.E4NewProjectWizard.performFinish(E4NewProjectWizard.java:213)
at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:827)
at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:432)
at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:624)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
at org.eclipse.jface.window.Window.open(Window.java:801)
at org.eclipse.ui.internal.handlers.WizardHandler$New.executeHandler(WizardHandler.java:259)
at org.eclipse.ui.internal.handlers.WizardHandler.execute(WizardHandler.java:279)
at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:290)
at org.eclipse.ui.internal.handlers.E4HandlerProxy.execute(E4HandlerProxy.java:76)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
at org.eclipse.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java:229)
at org.eclipse.e4.core.internal.di.InjectorImpl.invoke(InjectorImpl.java:210)
at org.eclipse.e4.core.contexts.ContextInjectionFactory.invoke(ContextInjectionFactory.java:131)
at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.executeHandler(HandlerServiceImpl.java:171)
at org.eclipse.ui.internal.handlers.LegacyHandlerService.executeCommand(LegacyHandlerService.java:500)
at org.eclipse.ui.internal.actions.CommandAction.runWithEvent(CommandAction.java:157)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

我也有这个错误：

```
Resource '/com.example.e4.rcp.wizard/plugin.xml' already exists 
```

我为 RCP 和 RAP 开发人员使用 Eclipse 版本：Juno Service Release 1 Build id：Windows 7 64 位上的 20120920-0800，

谁能告诉我，问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:37:01.130

可能重复：[这里](https://stackoverflow.com/questions/5144590/org-eclipse-swt-swtexception-widget-is-disposed-from-table-refresh)

尝试遵循第二个建议：

> 创建新工作区

..因为你也有插件错误。

# twitter-bootstrap - 外部流体网格堆叠，但内部应保持完整

> ID：14094472
> 
> 赞同：1
> 
> 时间：2012-12-30T20:43:24.027
> 
> 标签：twitter-bootstrap

我在具有嵌套流体网格的 Bootstrap 布局的移动屏幕上遇到问题。我想让外部流体网格将其列堆叠在一个狭窄的屏幕上，但内部网格应该保持完整。可以在这里找到一个演示（**更新**：删除嵌套的容器流体，但还没有解决问题）：http: [//jsfiddle.net/uLDQM/10/](http://jsfiddle.net/uLDQM/10/)

我想要什么：

```
Desktop:
1 2  3 4

Mobile
1 2
3 4 
```

但是我有：

```
Desktop:
1 2  3 4

Mobile
1
2
3
4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T23:28:40.663

如果这对您的设计可行，这是一种可能性：http: [//jsfiddle.net/panchroma/uLDQM/9/](http://jsfiddle.net/panchroma/uLDQM/9/)

我正在使用媒体查询来覆盖小屏幕的默认行为：

```
@media (max-width: 767px){
.span6 .row-fluid .span6 {
width: 48.93617021276595%;
float:left;
}  

.span6 .row-fluid [class*="span"]:first-child {
margin-right: 2%;
}  

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:44:36.877

这不能解决您的问题，但我认为您的嵌套网格的正确 HTML 是这样的：http:
[//jsfiddle.net/panchroma/uLDQM/4/](http://jsfiddle.net/panchroma/uLDQM/4/)

请注意，我已将您的 2 个嵌套容器流体 div 注释掉，如下所示。

```
<div class="container-fluid">
<div class="row-fluid">
    <div class="span6 outer">
        <!-- <div class="container-fluid"> -->
            <div class="row-fluid">
                <div class="span6 inner">
                    1
                </div>
                <div class="span6 inner">
                    2
                </div>
            </div>
      <!--  </div> -->
    </div>
    <div class="span6 outer">
        <!-- <div class="container-fluid"> -->
            <div class="row-fluid">
                <div class="span6 inner">
                    3
                </div>
                <div class="span6 inner">
                    4
                </div>
            </div>
       <!--  </div> -->
    </div>
</div>
</div>​ 
```

有关完整详细信息，请参阅[http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T13:01:02.017

内部和外部跨度的宽度可以变化的变体，并且可以有多个嵌套列。使用 .inner div 将您想要的每对列包装在移动显示器上的同一行上

[http://jsfiddle.net/panchroma/n2RNx/](http://jsfiddle.net/panchroma/n2RNx/)

桌面显示器
1 2 1a 2a 1b 2b 1c 2c

移动显示
1 2
1a 2a
1b 2b
1c 2c

```
<div class="container-fluid">
<div class="row-fluid">
    <div class="span8 outer">

            <div class="row-fluid">

                <div class="inner"> 
                   <div class="span2">1</div>
                <div class="span2">2</div>
               </div><!-- end inner -->

                 <div class="inner"> 
                   <div class="span1">1a</div>
                <div class="span1">2a</div>
               </div><!-- end inner -->

                <div class="inner"> 
                   <div class="span1">1b</div>
                <div class="span1">2b</div>
               </div><!-- end inner -->

                <div class="inner"> 
                   <div class="span2">1c</div>
                <div class="span2">2c</div>
               </div><!-- end inner -->

            </div> <!-- end nested fluid-row -->

    </div><!-- end outer -->

    <div class="span4 outer">

            <div class="row-fluid">
                <div class="inner"> 
                   <div class="span6">3</div>
                <div class="span6">4</div>
               </div><!-- end inner -->
            </div><!-- end nested row -->

    </div><!-- end outer -->
  </div><!-- end parent row -->

</div><!-- end container -->​ 
```

# scala - foreach 中的泛型类型有什么意义？

> ID：14094477
> 
> 赞同：20
> 
> 时间：2012-12-30T20:44:18.230
> 
> 标签：scala, generics, types, foreach

我很好奇 -方法`U`声明中泛型类型`Traversable`的意义`foreach`何在？

```
def foreach[U](f: A => U): Unit 
```

既然返回类型`Function1`是协变的，为什么不能这样：

```
def foreach(f: A => Any): Unit 
```

?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T21:19:58.947

不是 Martin Odersky，我只能猜测 :-) 看着 Scaladoc `foreach`，我看到了：

```
 /** Applies a function `f` to all elements of this $coll.
   *
   *  @param  f   the function that is applied for its side-effect to every element.
   *              The result of function `f` is discarded.
   *              
   *  @tparam  U  the type parameter describing the result of function `f`. 
   *              This result will always be ignored. Typically `U` is `Unit`,
   *              but this is not necessary.
   *
   *  @usecase def foreach(f: A => Unit): Unit
   */ 
```

So the return type of `f` doesn't matter and its result is always discarded. This, to me, suggests that using a generic type parameter here to mark the return type is just a documentation subtlety, saying "the return type can be anything, really anything, you like". Whereas a return type of `Any` may suggest to (some) readers some sort of limitation to the function types applicable here.

Another aspect is that Scala was very consciously designed to be generic from the ground up. So - to me - using a generic type parameter here is consistent with the general philosophy of the language, while using `Any` - although technically usable - would be a definitely non-generic approach which would be at odds with the rest of the language.

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-12-30T21:13:38.893

也许允许你从 a 继承`Traversable`，并利用返回值`U`from `f: A => U`？

```
trait TraversableWithHandler[+A, E <: Option[Throwable]] extends Traversable[A] {
  override def foreach[U](f: A => U): Unit
  def handleError(t: E) 
} 
```

例如，从内部`jQuery`返回的等价于，任何不同的值都是 a 。`false``foreach``break``continue`

**用例**

```
breakable { 
  List(1,2,3).foreach(_ match { 
    case 1 => println("ok")
    case 2 => 
      println("Sort of, soft interrupt?")
      return false
    case 3 => break
  })
} 
```

因为下一个代码（并行），永远不会中断（在这种情况下，stackless throwable 解决方案似乎不理想？）：

```
import scala.util.control.Breaks._

breakable { 
  (0 to 100).toList.par.foreach(_ match { 
    case n if (n <= 50) => 
      println("#" * 100)
      try { break } catch { 
        case t: Throwable => println("" + t); break 
      }
    case n if (n > 50) => 
      println("" + n)
    case _ => "ok" 
  }) 
} 
```

# java - JavaFX FXML 控制器类访问主类中的函数？

> ID：14094484
> 
> 赞同：2
> 
> 时间：2012-12-30T20:45:28.167
> 
> 标签：java, controller, javafx-2, javafx, fxml

我正在使用 JavaFX 制作一个登录应用程序，当用户单击按钮时该应用程序会切换到新场景。在控制器类中，如何在主应用程序中访问我的 ReplaceSceneContent() 函数？这是我到目前为止的代码，它给出了一条错误消息：

```
public class MainScreenController implements Initializable {

private FXMLStephensPetrochko application; 
public void setApp(FXMLStephensPetrochko app){
    this.application = app;
}
@Override
public void initialize(URL url, ResourceBundle rb) {
}
public void Pressed (ActionEvent e){
    try{
        application.replaceSceneContent("LoggedIn.fxml");
    }catch (Exception exc) {
        exc.printStackTrace();
    }
    System.out.println("Button Pressed!");

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T05:54:43.620

```
public void setApp(FXMLStephensPetrochko app){
    this.application = app;
} 
```

此 setter 方法不会自动注入主应用程序实例。要从控制器类访问 main 中定义的方法，请参见[此处的示例代码](https://stackoverflow.com/questions/14059954/calling-view-method-in-controller/14063918#14063918)

# javascript - 在任何地方按键到文本字段？

> ID：14094486
> 
> 赞同：2
> 
> 时间：2012-12-30T20:45:39.737
> 
> 标签：javascript, jquery

我想模仿新 Myspace 中的功能。发生的情况是您可以简单地开始输入，并且 UI 更改为“搜索”。输入的字符现在位于一个大文本字段中，并自动完成显示结果。

如何检测页面上任意位置的按键，而不是特定文本字段中的按键？然后，如何显示文本和/或将焦点放在输入文本的文本字段上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:00:57.263

尝试这个

```
function keydown(){
    //key was pressed
}  
document.onkeydown=keydown; 
```

演示：http: [//jsfiddle.net/enve/djsQ8/1/](http://jsfiddle.net/enve/djsQ8/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T22:28:55.540

HTML 代码

```
<input type="text" value="type here"/><br/>
<textarea>type here</textarea><br/>
<input type="text" value="don't type here" class="searchbox"/><br/> 
```

​ JavaScript (jQuery) 代码

```
$( document ).on( 'keydown', function( ev ) {
    var nodeName = ev.target.nodeName;

    if ( 'INPUT' == nodeName || 'TEXTAREA' == nodeName ) {
        return;
    }
    $( '.searchbox' ).val( '' ).trigger( 'focus' );
} );​ 
```

这是小提琴：http: [//jsfiddle.net/bukfixart/PThCS/](http://jsfiddle.net/bukfixart/PThCS/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T21:05:03.183

仅适用于第一次。可能这就是你想要的。使用 jQuery 会更容易更好。但首先，一个纯 JavaScript。

**更新**- 不。只根据需要发布 jQuery，检查 JavaScript 的小提琴

```
var firstTyped = false,
    field = $('#field');

function startTyping(evt) {
    evt = evt || window.event;
    if (firstTyped) {
        $(document).unbind('keypress', startTyping);                      
    }
    firstTyped = true;
    field
        .fadeIn(200)
        .focus()
}
$(document).keypress(startTyping); 
```

就像谷歌搜索一样。您也可以最初隐藏该字段，然后在第一个字符类型上显示。

[http://jsfiddle.net/OMS_/ztKLA/](http://jsfiddle.net/OMS_/ztKLA/)

**更新**：

对于您在评论中提到的场景，我认为以下**伪代码**可能有用

```
$(yourform).submit(function() {
    ....
    // Submit Successful
    // Reset the text field and bind the event again:
    field.val('').hide();
    $(document).keypress(startTyping);
}); 
```

# python - 用于二维条目数组的 Django 网格形式

> ID：14094489
> 
> 赞同：0
> 
> 时间：2012-12-30T20:45:46.340
> 
> 标签：python, django, django-forms

我有两个列表（这些只是小例子）：

```
Attackers = ['John', 'Mary']
Defenders = ['Steve', 'Bill', 'Dave'] 
```

我的目标是创建一个 2D 网格表单，其中包含适当数量的输入（复选框），表示两个列表之间的所有可能关系。

我很难在模型和视图级别上如何做到这一点。我已经研究过内联表单集和模型表单集，但我不确定如何继续。

编辑：

```
{% for at in atts %}
    {% for def in defs %}
        <input type="text" name="{{ at }}_{{ def }}" value="{{ at }}_{{ def }}" >
    {% endfor %}
    <br>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:04:48.553

为每一对创建一个复选框。将这些对以正确的顺序放入表单中（假设 HTML 倾向于从左到右，然后是向下布局），并在模板中适当地显示它。

**要创建复选框：**您的表单有一个称为字段的字段集合，这是一个将字段名称映射到字段对象的字典。您将希望以编程方式填充它。如果你在 django 中打开表单代码/检查 shell 中的表单对象，你会看到（除非我记错了）还有一个字段列表或元组，它控制着迭代的顺序。如上所述，您将希望以正确的顺序填充它。

**要显示它**：迭代模板中的表单。您将希望在表单中包含一些信息，或者以其他方式传递给模板，以描述网格的形状，以便您的模板代码可以确定在哪里放置行边界。

# c++ - 为什么 std::remove 不删除我数组的最后一个元素

> ID：14094492
> 
> 赞同：1
> 
> 时间：2012-12-30T20:46:02.957
> 
> 标签：c++

> **可能重复：**
> [STL 删除没有按预期工作？](https://stackoverflow.com/questions/6456870/stl-remove-doesnt-work-as-expected)

抱歉，我是 C++11 和迭代器的新手。这应该删除数组中的所有数字 3，但不会删除最后一个。为什么？

```
#include <algorithm>
#include <array>
#include <iostream>

int main() {

   std::array<int, 8> a{{9, 3, 4, 5, 33, 5, 6, 3}};

   int N(3);

   std::remove(a.begin(), a.end(), N);

   for (int i : a) {
      std::cout << i << '\n';
   }

} 
```

我得到输出：

```
{ 9, 4, 5, 33, 5, 6, 6, 3 }
                        ^
                        |
             // the last 3 is still there 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T20:51:07.220

`std::remove`对迭代器进行操作；因此，它无法真正从容器中*删除元素。*这就是为什么它通常与`erase`：

```
a.erase(std::remove(a.begin(), a.end(), N), a.end()); 
```

正如其他人所指出的，这不适用于`array`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-30T20:51:17.587

算法不了解底层容器。它们只是根据给定的迭代器进行迭代，并独立于容纳它们的容器访问元素。这就是为什么有一种叫做**erase-remove idiom**的东西，它采用以下模式：

```
container.erase(std::remove(it1, it2, value), std::end(container)); 
```

`std::remove`将保留的元素移动到前面（感谢 K-ballo）并将迭代器返回到未移动元素的开头。然后，`erase`从那一刻到最后，抹去一切。

由于`std::array`封装了一个固定大小的数组，我会将您的示例修改为`std::vector`：

```
std::vector<int> v{9, 3, 4, 5, 33, 5, 6, 3};
v.erase(std::remove(std::begin(v), std::end(v), 3), std::end(v)); 
```

唯一需要注意的是 and 的更一般形式`.begin()`，`.end()`它也适用于内置数组。这包含在 C++11 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T21:02:32.547

正如其他人指出的那样，`std::remove()`不会删除任何元素。如果你需要使用`std::array<...>`你仍然可以使用`std::remove()`并且只是捕获相应的迭代器来确定序列的结束。我不知道您如何获得声称的输出（带有花括号和逗号），但这是我将如何实现它：

```
auto end = std::remove(a.begin(), a.end(), 3);
std::cout << "{ ";
if (a.begin() != end) {
    std::copy(a.begin(), end - 1, std::ostream_iterator<int>(std::cout, ", "));
    std::cout << end[-1];
}
std::cout << "}\n"; 
```

# jquery - 清除最后 li 内容的样式

> ID：14094496
> 
> 赞同：1
> 
> 时间：2012-12-30T20:46:29.540
> 
> 标签：jquery, html, css

```
 <ul>
        <li><a href="url">Title</a></li>  
        ... trimmed
        <li> 
            <div class="pagination">
                <ul>
                   <li class="PagedList-skipToNext">
                         <a href="/NextPage">> Next</a>
                   </li>
                </ul>
             </div> 
        </li>
    </ul> 
```

我有一个如上所述的列表，在`li`标签内列表的底部有一个寻呼机，它采用`li`顶部的样式但是我想要`>Next`文本格式，没有任何样式。

我试图覆盖样式，但没有运气。

如何清除`.pagination`块的样式？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:50:42.763

不幸的是，没有办法为文档的一部分“清除样式”（哦，我多么希望有）。您必须继续覆盖样式，直到一切看起来都很好，或者更改影响寻呼机​​的样式，以便它们不会首先影响它（例如，通过向所有其他列表元素添加类并定位那些） .

您可以使用 Firebug 或 Chrome 的开发人员工具快速查看哪些样式规则正在影响您的寻呼机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T20:58:25.470

只需覆盖您在`.pagination`类中定义的任何样式：

```
.pagination a
{
  font-size: 10pt;
  color: red;
  /* any other property you want to override here... */ 
} 
```

或者只是向该锚标记添加一个新类，例如`<a href="/NextPage" class="next">> Next</a>`：

```
.next
{
    font-size: 10pt;
    color: red;
} 
```

# ruby-on-rails-3 - 关于在生产环境中使用 PG 数据库，我需要了解什么？

> ID：14094503
> 
> 赞同：0
> 
> 时间：2012-12-30T20:47:39.980
> 
> 标签：ruby-on-rails-3, sqlite, postgresql

我在开发中使用 SQlite3 数据库，在生产中使用 PostgreSQL 数据库（Heroku）。我遇到了一些可能与PG数据库直接相关或不直接相关的问题，但我想知道我需要警惕什么以及两者之间有什么区别。

例如，是否有某些东西（无论是语法还是其他任何东西）不适用于 PG 数据库，但适用于 SQlite3 数据库？

日志中的这块错误是否与PG数据库有关？

```
2012-12-30T20:27:15+00:00 heroku[router]: at=info method=POST path=/books host=fast-journey-7822.herokuapp.com fwd=71.7.18.2 dyno=web.1 queue=0 wait=7ms connect=8ms service=30ms status=500 bytes=643
2012-12-30T20:27:15+00:00 app[web.1]: Started POST "/books" for 71.7.18.2 at 2012-12-30 20:27:15 +0000
2012-12-30T20:27:15+00:00 app[web.1]: Processing by BooksController#create as HTML
2012-12-30T20:27:15+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"yXWQ/0j0AbCJ8Ytw3p7kvL0qgYFe0LTfSevhLChzk94=", "book"=>{"user_id"=>"1", "status"=>"f", "queued"=>"f", "title"=>"", "author"=>""}, "commit"=>""}
2012-12-30T20:27:15+00:00 app[web.1]: Completed 500 Internal Server Error in 1ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T21:05:41.927

如果您在所有环境中运行相同的数据库，则此问题无关紧要。

# eclipse - 使用什么 Eclipse 版本：Java、Python 和 Android

> ID：14094506
> 
> 赞同：0
> 
> 时间：2012-12-30T20:48:48.580
> 
> 标签：eclipse

我想安装eclipse在Java、Python、Android平台上开发。什么是最合适的？有什么优点\缺点？

*   在 Windows 7 上
*   在 Mac OSX 10.7 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:58:57.617

实际上我不推荐使用 Eclipse 来开发所有这些语言。

我使用以下内容：

**Java** ->[面向 Java EE 开发人员的 Eclipse IDE](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)

**Python** -> [PyCharm](http://www.jetbrains.com/pycharm/) / [PyScripter](http://code.google.com/p/pyscripter/)

**Android** -> [ADT Bundle](http://developer.android.com/sdk/index.html)（Google 为 Android 开发的基于 Eclipse 的新 IDE）

* * *

如果您坚持对所有这些语言使用 Eclipse，那么请使用[面向 Java EE 开发人员的 Eclipse IDE 以及](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)面向 Python的[PyDev](http://pydev.org/)插件和面向 Android 的[Android SDK 工具](http://developer.android.com/sdk/installing/index.html)。

# bash - grep 间距错误

> ID：14094508
> 
> 赞同：0
> 
> 时间：2012-12-30T20:48:50.937
> 
> 标签：bash, shell

大家好，我对 grep 有疑问。我不知道shell脚本中是否还有其他搜索代码。我正在尝试备份存储在我的 Flash Disk 中的文件夹 AhmetsFiles ，但同时我必须按它们的扩展名对它们进行分组并将它们保存到 [extensionName] 文件夹中。

[艾哈迈茨档案](http://ul.to/rro8u9h7)

> 一个例子：/media/FlashDisk/AhmetsFiles/lecture.pdf 必须存储在 /home/$(whoami)/Desktop/backups/pdf

问题是我无法复制名称包含空格的文件。（讲座 2.pptx） 在此介绍之后我的代码。

```
 filename="/media/FlashDisk/extensions"
    count=0
    exec 3<&0
    exec 0< $filename

    mkdir "/home/$(whoami)/Desktop/backups"

    while read extension
    do
        cd "/home/$(whoami)/Desktop/backups"
        rm -rf "$extension"
        mkdir "$extension"
        cd "/media/FlashDisk/AhmetsFiles"
        files=( `ls | grep -i "$extension"` )
        fCount=( `ls | grep -c -i "$extension"` )
        for (( i=0 ; $i<$fCount ; i++ ))
        do
            cp -f "/media/FlashDisk/AhmetsFiles/${files[$i]}" "/home/$(whoami)/Desktop/backups/$extension"
        done
        let count++
    done

    exec 0<&3

    exit 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:55:00.503

您的循环比它需要的要复杂得多，不需要`ls`or`grep`或`files`and`fCount`变量：

```
 for file in *.$extension
    do
        cp -f "/media/FlashDisk/AhmetsFiles/$file" "$HOME/Desktop/backups/$extension"
    done 
```

这适用于空格。

我假设您实际上想解释`$extension`为文件扩展名，而不是文件名中间的一些随机字符串，就像您的原始代码一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:54:04.697

你为什么不

```
grep -i "$extension" | while IFS=: read x ; do
  cp ..
done 
```

反而？

另外，我相信您可能更喜欢类似的东西`grep -i ".$extension$"`（将其锚定到行尾）。

另一方面，最优化的方法可能是

```
cp -f /media/FlashDisk/AhmetsFiles/*.$extension "$HOME/Desktop/backups/$extension/" 
```

# image - 提取图像的一部分

> ID：14094516
> 
> 赞同：0
> 
> 时间：2012-12-30T20:50:09.890
> 
> 标签：image, windows-phone

我正在将一些图像下载到手机中，所有这些图像都是 480x360 像素。现在其中一些并没有用完完整的 360 高度，例如它们的高度可能只有 240 像素（因此顶部和底部填充了 60 像素黑色）。有没有人有任何建议我可以提取图像的主要部分，以便新图像为 480x240？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:57:36.817

如果您知道使用了图像的哪一部分，您可以使用[WritableBitmapExtension 库](http://writeablebitmapex.codeplex.com/)简单地裁剪图像。以下是如何裁剪图像的示例：

```
WriteableBitmap wb = new WriteableBitmap(480, 360); // Load your image here instead
wb = wb.Crop(0, 0, wb.PixelWidth, 240); // Keep only the top part of the image (240 px) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T22:16:55.930

Johan Falk 的回答听起来是最好的，但只是为了有一个替代方案，当我需要在 Windows Phone 中进行一些图像处理时，FJCore 就起作用了。 [http://code.google.com/p/fjcore/](http://code.google.com/p/fjcore/)

# iphone - 在 iPhone 应用程序上创建注销按钮？

> ID：14094523
> 
> 赞同：0
> 
> 时间：2012-12-30T20:50:42.890
> 
> 标签：iphone, objective-c, ios, ios6, nsuserdefaults

我有一个使用故事板的应用程序。布局是：导航控制器 > 登录视图控制器 > 选项卡栏控制器，每个选项卡都有一个导航控制器，指向该选项卡的 UIViewController。我正在尝试创建一个注销按钮，该按钮将删除 TabBarController 并返回到登录视图控制器。我的代码如下：

```
// In log out function
[self.tabBarController dismissViewControllerAnimated:YES completion:nil];
[self performSelector:@selector(patchSelector) withObject:nil afterDelay:0.3];

-(void)patchSelector{
    [self.tabBarController.navigationController popToRootViewControllerAnimated:YES];
} 
```

我不断收到以下错误：

```
*** Terminating app due to uncaught exception 'UIViewControllerHierarchyInconsistency', reason: 'presentedViewController for controller is itself on dismiss for 
```

我尝试阅读以下内容：

[没有可见的dismissModalViewControllerAnimated界面：完成](https://stackoverflow.com/questions/12782742/no-visible-interface-for-dismissmodalviewcontrolleranimatedcompletion)

[http://www.touchthatfruit.com/viewwillappear-and-viewdidappear-not-being-ca](http://www.touchthatfruit.com/viewwillappear-and-viewdidappear-not-being-ca)

[UITabbarController 关闭模式 UINavigationController](https://stackoverflow.com/questions/11328651/uitabbarcontroller-dismiss-modal-uinavigationcontroller)

但是，以上都没有帮助解决我遇到的错误。我在这有什么遗漏吗？该错误似乎表明当前的 vc 正在清理中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:01:08.843

`[self dismissModalViewControllerAnimated:YES];`当我删除我的第一个UINavigationController （登录屏幕之前的那个）并将上面的第一行更改为此：最简单的解决方案。不知道为什么我原来的问题是，但我至少能够以这种方式解决它！

# javascript - Backbone.js 中的集合不触发事件

> ID：14094524
> 
> 赞同：2
> 
> 时间：2012-12-30T20:50:48.070
> 
> 标签：javascript, backbone.js, backbone-events

我试图在给定集合中的模型更改被触发时实现一个动作，但是每当我尝试在我的集合上的 、 或 事件上放置一个侦听`change`器`add`时`remove`，都不会触发任何事件。当我将更改事件附加到模型的`initialize`函数（只是为了测试）时，该`change`事件被成功触发。下面的视图本身不会更改代码，但我希望它在对集合进行更改时重新呈现自己。我的设置可能有问题，但我想听听您的建议。下面是我的代码：

**contact.js（模型）：**

```
define([
  'jquery',
  'underscore',
  'backbone'
], function($, _, Backbone){

  var ContactModel = Backbone.Model.extend({
        urlRoot: '/contacts'
    });

  return ContactModel;
}); 
```

**联系人.js（集合）：**

```
define([
  'jquery',
  'underscore',
  'backbone',
  'models/contact'
], function($, _, Backbone, Contact){

  var ContactCollection = Backbone.Collection.extend({
    url: '/contacts',
    model: Contact
  });

  return ContactCollection;

}); 
```

**contactlist.js（查看）：**

```
define([
  'jquery',
  'underscore',
  'backbone',
  'text!templates/contactlist.html',
  'collections/contacts'
], function($, _, Backbone, contactListTemplate, Contacts){

  var ContactListView = Backbone.View.extend({
    el: '.contact-list',
    render: function(options) {
        var that = this;
        var contacts = new Contacts();
        contacts.on("add", function() {
            console.log('change');
        });
        contacts.fetch({
            success: function(contacts) {
                var results = contacts.models;
                if (options.query || options.query === '') {
                    var results = [];
                    var query = options.query.toUpperCase();
                    for (var contact in contacts.models) {
                        if (contacts.models[contact].get('firstname').toUpperCase().indexOf(query) !== -1 ||
                                contacts.models[contact].get('lastname').toUpperCase().indexOf(query) !== -1 ||
                                contacts.models[contact].get('email').toUpperCase().indexOf(query) !== -1 ||
                                contacts.models[contact].get('phonenumber').toString().toUpperCase().indexOf(query) !== -1)
                        {
                            results.push(contacts.models[contact]);
                        }
                    }
                    options.idclicked = null;
                }
                if (!options.idclicked && results[0]) {
                    options.idclicked = results[0].get('id');
                    Backbone.history.navigate('/contacts/' + results[0].get('id'), {trigger: true});
                }
                var template = _.template(contactListTemplate, {contacts: results, idclicked: options.idclicked});
                that.$el.html(template);
                $(document).ready(function() {
                    $('.contact-list').scrollTop(options.scrolled);
                });
            }
        });
    },
    events: {
        'click .contact': 'clickContact'
    },
    clickContact: function (ev) {
        $('.contact-clicked').removeClass('contact-clicked').addClass('contact');
        $(ev.currentTarget).addClass('contact-clicked').removeClass('contact');
        window.location.replace($(ev.currentTarget).children('a').attr('href'));
    }
  });

  return ContactListView;

}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T21:56:13.350

自 Backbone 1.0（[更改日志](http://backbonejs.org/#changelog)）以来，这个问题的答案不再是 100% 准确。

在 Backbone 1.0+ 中，如果要触发事件，则必须`{ reset: true }`传入方法。见下文。`.fetch()``reset`

调用`fetch`集合现在将触发 3 个不同的事件：

* * *

```
collection.fetch(); //triggers the following events 
```

1.  `request`：在发出ajax请求之前触发
2.  `add`：（多次）随着数据中的每个项目被添加到集合中，此事件将被多次触发。
3.  `sync`: 集合上的数据与数据提供者同步后触发（数据添加到集合，ajax 请求完成）

* * *

要恢复到旧式主干事件，您需要调用

```
collection.fetch({ reset: true }); //triggers the following events 
```

1.  `request`：在发出ajax请求之前触发
2.  `reset`：当所有数据都放入集合时触发。
3.  `sync`: 集合上的数据与数据提供者同步后触发（数据添加到集合，ajax 请求完成）

* * *

*快速查看您的集合正在触发*哪些事件的最佳方法是绑定到`all`事件并记录参数：

```
collection.on('all', function() {
    console.log(arguments);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T20:58:06.517

运行`fetch()`时，集合将触发它的`reset`事件，而不是`add`.

```
contacts.on("reset", function() {
    console.log('reset');
}); 
```

这将在获取完成后立即运行，在您的`success`回调之前。

`change`当模型本身的属性发生更改时运行，您在发布的代码中的任何地方都不会这样做。

通常我也不会`.models`直接访问。我会这样做：

```
var results = contacts.toArray();
if (options.query || options.query === ''){
  results = contacts.filter(function(contact){
    return _.any(['firstname', 'lastname', 'email', 'phonenumber'], function(attr){
      return contact.get(attr).toString().toUpperCase().indexOf(query) !== -1;
    });
  }); 
// ... 
```

### 更新

就像现在一样，您在渲染时创建集合。这不是一个好主意，因为理想情况下，您希望能够再次渲染而无需再次获取所有数据。

我会将集合创建逻辑移动到视图的`initialize`函数中，如下所示：

```
initialize: function(options){
  this.collection = new Contacts();
  this.collection.on('reset add remove', this.render, this);
} 
```

这样，随着集合的变化，渲染会自动触发。这很复杂`options`，所以我会尝试更改您传递这些参数的方式。也许添加一个“setOptions”函数来保存渲染时使用的选项。理想情况下`render`，将重新呈现与调用前相同的页面，它通常没有参数。

# javascript - keydown 上的换行符

> ID：14094526
> 
> 赞同：0
> 
> 时间：2012-12-30T20:50:57.197
> 
> 标签：javascript, jquery, textarea, onkeydown

我有一个文本区域，每次输入时，如果有东西写，我希望它变成空白。但我的问题是；在第一次输入它换行符，然后你继续从第二行开始写。它只发生在第一次进入。清空textarea没有问题，你从第二行继续写，就是问题所在。

```
onkeydown= if(event.keyCode == 13){

    sendMessage();
}

function sendMessage(user){

    var message = $('#textarea').val();
    $('#textarea').val('');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T20:55:06.940

```
if(event.keyCode == 13) {
    sendMessage();
    if (event.preventDefault) event.preventDefault();
    return false;
} 
```

`keydown`在输入字符之前发生`textarea`，因此您只需调用[`preventDefault`](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)事件，以便在调用清除文本区域的函数后它不会输入换行符。`return false`如果上面的代码内联在 HTML 中，那么单独使用就足够了，这并不是真正推荐的。请参阅下面的更新解决方案：

* * *

对于不显眼和向后兼容，我建议使用 jQuery 完成所有操作：

```
$('#textarea_ID').keydown(function(e) {
    if (e.which == 13) {
        e.preventDefault();
        var message = $(this).val();
        $(this).val('');
        //rest of your function using `message` here
    }
}); 
```

[**小提琴**](http://jsfiddle.net/y8VQw/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:57:16.960

在 jQuery 中，使用`which`代码的属性。然后返回 false 与`e.preventDefault();`

```
var field = $('.classname');

field.keydown(function(e){
    if(e.which==13){
        sendMessage();
        e.preventDefault();
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T20:58:17.257

只需添加`return false;`到您的`keydown`功能。这可以防止执行键的默认操作（在这种情况下为换行符）。

您可能还想包含一些代码来处理 Internet Explorer 获取键码的方式。您的新功能将是：

```
onkeydown = function (e) {
    // Gets keycode cross browser
    e = window.event ? window.event : e;
    var keycode = e.keyCode !== null ? e.keyCode : e.charCode;

    // Checks if it was the enter key that was pressed (enter = keycode 13)
    if (keycode === 13) {
        // Calls function to do stuff
        sendMessage();
        // Cancels the default action of the (enter) key
        return false;
    }
} 
```

# django - CSRF 令牌验证

> ID：14094527
> 
> 赞同：0
> 
> 时间：2012-12-30T20:51:04.677
> 
> 标签：django

如果我从按钮发送 AJAX POST 请求。我是否需要在我的视图中验证 CSRF 令牌，或者 Django 在接受 POST 时是否会自动为您执行此操作？如果没有，我如何自己手动验证？

另外，当您创建表单并传入请求时，表单对象会自动进行此验证是否正确？

jQuery：

```
<script>
$(document).ready(function() {  
  $('#button1').click(function(){
    $.post("/", { 
      unique_id : "{{ unique_id }}",
      csrfmiddlewaretoken: '{{ csrf_token }}'
    });
  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:06:13.210

如果你`'django.middleware.csrf.CsrfViewMiddleware',`在`MIDDLEWARE_CLASSES`你的项目中，`settings.py`那么`CsrfViewMiddleware`会自动验证`csrf_token`. [文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-it-works)中也提到了这一点：

> 对于所有未使用 HTTP GET、HEAD、OPTIONS 或 TRACE 的传入请求，必须存在 CSRF cookie，并且“csrfmiddlewaretoken”字段必须存在且正确。如果不是，用户将收到 403 错误。
> 
> 此检查由 CsrfViewMiddleware 完成。

# rest - 如何保护 RESTful API

> ID：14094529
> 
> 赞同：18
> 
> 时间：2012-12-30T20:51:06.117
> 
> 标签：rest, authentication, playframework, authorization

我一直在寻找一种方法来保护我的 RESTful API。这看起来很简单，但似乎没有那么简单。首先，我正在编写一个连接到 Play Framework 服务器的 iOS 应用程序。这些都与 Google、Facebook、Twitter 或 LinkedIn 没有任何关系（我知道这很令人震惊）。哦，我目前的计划不需要自定义应用程序来使用我的 API，它暂时只是我的应用程序。

**基本认证**

看起来很简单的是一个基本的用户/传递一个 /auth 方法来管理一个 cookie 会话。这可能会引起一些抱怨太简单或太弱，但大多数情况下它将身份转移到快速验证的会话密钥。我最初的设置是每天使会话过期，但这导致 iOS 应用程序每天强制登录被证明是一件烦人的事情。

**身份验证**

我在 iOS 板上发布了一个问题，并收到了一个直截了当的 OAuth 指示。我对 OAuth 的研究开始了，但天哪，这太复杂了，而且似乎没有任何服务器端示例……只是很多人抱怨它是多么令人沮丧。所有客户端示例都显示连接到 Google、Facebook、Twitter 和 LinkedIn。哦，乔伊！

在看了 Eran Hammer 对 OAuth1 和 OAuth2 的吐槽之后，继续下去似乎没有结果，他的 OZ 想法（看起来很干净）在 node.js 中还只是处于早期阶段。

**问题**

所以，我向广大 StackOverflow 社区提出的问题是……您如何保护您的 REST API？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T22:51:23.290

我建议考虑最大玩家使用的方法，即 Amazon Web Services 或 Windows Azure - [HMAC](http://en.wikipedia.org/wiki/HMAC)。尽管它在实施中并不舒适，但您可以看到它是值得信赖的技术。

一般的想法是在 iOS 中使用密钥对请求的部分（即标头）进行签名，并尝试在 Play 应用程序上重新计算它以验证该请求是真实的且未被操纵。如果它不会失败，您可以（几乎）确定，这是从使用有效密钥的某人发送的。

查看[Windows 的文档](http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx) 以了解概念（我认为对于常见任务，您可以使用较少数量的元素用于签名）。

还有其他[有趣的帖子](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)（基于 AWS 身份验证）更好地描述了整个过程。

**编辑**

当然，您应该意识到 iOS 中的身份验证和保护 API 请求是不同的事情，即使您的会话每 15 分钟到期一次，您也不能确定*有人*不会*偷听*然后能够发送来自外部的虚假请求。签署每个请求应将风险降至最低。

另一方面，如果您为签署请求准备*明确*的规则并编写简短的文档（我什至为您自己推荐），您可以将其交付给其他开发人员，他将能够在（几乎) 任何支持 SHA256 的平台，因此您将准备好从 3-rd 方应用程序中使用的 API - 如果您决定在未来发布它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:30:29.890

只需做一些简单的事情，通过 HTTPS 在自定义标头中发送授权代码/密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T22:59:18.737

由于 Play Framework 使用 Java，您可以使用[Apache Shiro](http://shiro.apache.org/)

我还没有使用它..（我打算虽然）所以我不知道它是否是最好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T09:52:38.510

那么基本身份验证方法的唯一问题是用户必须每天登录？为什么不为用户提供在设备上保存用户名/密码的选项？这样他就可以在安全性和便利性之间做出选择。

# r - 在 r 中创建时变协变量的工作流程

> ID：14094533
> 
> 赞同：2
> 
> 时间：2012-12-30T20:51:30.220
> 
> 标签：r, workflow, survival-analysis

我有一个长格式的巨大数据文件——下面提供了其中的一部分。每个 ID 可以有几行，其中 status 是最终状态。但是我需要使用时变协变量进行分析，因此需要创建两个新的时间变量并更新状态变量。我已经为此苦苦挣扎了一段时间，我无法弄清楚如何有效地做到这一点，因为每个 ID 最多可以有四行。时变变量为`NUM.AFTER.DIAG`。如果`NUM.AFTER.DIAG==0`那么它很容易，在哪里`time1=0`和`time2=STATUSDATE`。但是，`NUM.AFTER.DIAG==1`那时我需要在哪里创建一个新行`time1=0`，`time2=DOB-DATE.DIAG`并且`NUM.AFTER.DIAG=0`还要确保`STATUS="B"`。然后第二行将`time1=time2`来自前一行，并且`time2=STATUSDATE-DATE.DIAG-time1`从这一行开始。同样，如果有更多行，则需要相互减去不同的行。此外，如果 NUM.AFTER.DIAG==0 但有多行，则可以删除所有额外的行。

有什么想法可以有效解决这个问题吗？我看过 john Fox 展开命令，但它假定所有间隔都是宽格式开始的。

编辑：请求的表。至于审查变量：“D”=事件（死亡）

![在此处输入图像描述](../Images/22429fc9b574252f2b8900d24a7ef89c.png)

```
 structure(list(ID = c(187L, 258L, 265L, 278L, 281L, 281L, 283L, 
    283L, 284L, 291L, 292L, 292L, 297L, 299L, 305L, 305L, 311L, 311L, 
    319L, 319L, 319L, 322L, 322L, 329L, 329L, 333L, 333L, 333L, 334L, 
    334L), STATUS = c("D", "B", "B", "B", "B", "B", "D", "D", "B", 
    "B", "B", "B", "D", "D", "D", "D", "B", "B", "B", "B", "B", "D", 
    "D", "B", "B", "D", "D", "D", "D", "D"), STATUSDATE = structure(c(11153, 
    15034, 15034, 15034, 15034, 15034, 5005, 5005, 15034, 15034, 
    15034, 15034, 6374, 5005, 7562, 7562, 15034, 15034, 15034, 15034, 
    15034, 7743, 7743, 15034, 15034, 4670, 4670, 4670, 5218, 5218
    ), class = "Date"), DATE.DIAG = structure(c(4578, 4609, 4578, 
    4487, 4670, 4670, 4517, 4517, 4640, 4213, 4397, 4397, 4397, 4487, 
    4213, 4213, 4731, 4731, 4701, 4701, 4701, 4397, 4397, 4578, 4578, 
    4275, 4275, 4275, 4456, 4456), class = "Date"), DOB = structure(c(NA, 
    13010, NA, NA, -1082, -626, 73, 1353, 13679, NA, 1626, 3087, 
    -626, -200, 2814, 3757, 1930, 3787, 6740, 13528, 14167, 5462, 
    6557, 7865, 9235, -901, -504, -108, -535, -78), class = "Date"), 
        NUM.AFTER.DIAG = c(0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 
        0, 0, 0, 0, 0, 1, 2, 3, 1, 2, 1, 2, 0, 0, 0, 0, 0)), .Names = c("ID", 
    "STATUS", "STATUSDATE", "DATE.DIAG", "DOB", "NUM.AFTER.DIAG"), row.names = c(NA, 
    30L), class = "data.frame") 
```

编辑：我确实想出了一个解决方案，虽然可能不是很有效。

```
 u1<-ddply(p,.(ID),function(x) {

  if (x$NUM.AFTER.DIAG==0){

    x$time1<-0
    x$time2<-x$STATUSDATE-x$DATE.DIAG
    x<-x[1,]

  }
  else {

      x<-rbind(x,x[1,])
      x<-x[order(x$DOB),]
      u<-max(x$NUM.AFTER.DIAG)
      x$NUM.AFTER.DIAG<-0:u
      x$time1[1]<-0
      x$time2[1:(u)]<-x$DOB[2:(u+1)]-x$DATE.DIAG[2:(u+1)]
      x$time2[u+1]<-x$STATUSDATE[u]-x$DATE.DIAG[u]
      x$time1[2:(u+1)]<-x$time2[1:u]
      x$STATUS[1:u]<-"B"
      }
  x
}
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T03:15:49.020

好的，我尝试了一些方法，但我不确定我是否完全了解您的转换过程，所以如果有错误请告诉我。一般来说，当有很多个体时，它`ddply`会很慢（即使是），主要是因为最后它必须将所有个体的所有数据集放在一起和（或）它们，这对于大量对象来说需要很长时间。`.parallel = TRUE``rbind``rbind.fill``data.frame`

所以这里有一个建议，`dat.orig`你的玩具数据集在哪里：

我首先将任务分成两部分：1） `NUM.AFTER.DIAG == 0` 2）`NUM.AFTER.DIAG == 1`

1）似乎如果`NUM.AFTER.DIAG == 0`除了计算 time2 并在 ID 出现多次（如 ID 333）时提取第一行之外，第 1 部分没有太多工作要做）：

```
## erase multiple occurences
dat <- dat.orig[!(duplicated(dat.orig$ID) & dat.orig$NUM.AFTER.DIAG == 0), ]
dat0 <- dat[dat$NUM.AFTER.DIAG == 0, ]
dat0$time1 <- 0
dat0$time2 <- difftime(dat0$STATUSDATE, dat0$DATE.DIAG, unit = "days")
time.na <- is.na(dat0$DOB)
dat0$time1[time.na] <- dat0$time2[time.na] <- NA

> dat0
    ID STATUS STATUSDATE  DATE.DIAG        DOB NUM.AFTER.DIAG time1      time2
1  187      D 2000-07-15 1982-07-15       <NA>              0    NA    NA days
3  265      B 2011-03-01 1982-07-15       <NA>              0    NA    NA days
4  278      B 2011-03-01 1982-04-15       <NA>              0    NA    NA days
5  281      B 2011-03-01 1982-10-15 1967-01-15              0     0 10364 days
7  283      D 1983-09-15 1982-05-15 1970-03-15              0     0   488 days
10 291      B 2011-03-01 1981-07-15       <NA>              0    NA    NA days
11 292      B 2011-03-01 1982-01-15 1974-06-15              0     0 10637 days
13 297      D 1987-06-15 1982-01-15 1968-04-15              0     0  1977 days
14 299      D 1983-09-15 1982-04-15 1969-06-15              0     0   518 days
15 305      D 1990-09-15 1981-07-15 1977-09-15              0     0  3349 days
17 311      B 2011-03-01 1982-12-15 1975-04-15              0     0 10303 days
26 333      D 1982-10-15 1981-09-15 1967-07-15              0     0   395 days
29 334      D 1984-04-15 1982-03-15 1968-07-15              0     0   762 days 
```

2) 有点棘手，但您实际上所要做的就是再插入一行并计算时间变量：

```
## create subset with relevant observations
dat.unfold <- dat[dat$NUM.AFTER.DIAG != 0, ]
## compute time differences
time1 <- difftime(dat.unfold$DOB, dat.unfold$DATE.DIAG, unit = "days")
time1[time1 < 0] <- 0
time2 <- difftime(dat.unfold$STATUSDATE, dat.unfold$DATE.DIAG, unit = "days")

## calculate indices for individuals
n.obs <- daply(dat.unfold, .(ID), function(z) max(z$NUM.AFTER.DIAG) + 1)
df.new <- data.frame(ID = rep(unique(dat.unfold$ID), times = n.obs))
rle.new <- rle(df.new$ID)
ind.last <- cumsum(rle.new$lengths)
ind.first <- !duplicated(df.new$ID)
ind.first.w <- which(ind.first) 
ind.second <- ind.first.w + 1
ind2.to.last <- unlist(sapply(seq_along(ind.second), 
                function(z) ind.second[z]:ind.last[z]))

## insert time variables
df.new$time2 <- df.new$time1 <- NA
df.new$time1[ind.first] <- 0
df.new$time1[!ind.first] <- time1
df.new$time2[!ind.first] <- time2
df.new$time2[ind2.to.last - 1] <- time1 
```

这给了我：

```
> df.new
    ID time1 time2
1  258     0  8401
2  258  8401 10425
3  284     0  9039
4  284  9039 10394
5  319     0  2039
6  319  2039  8827
7  319  8827  9466
8  319  9466 10333
9  322     0  1065
10 322  1065  2160
11 322  2160  3346
12 329     0  3287
13 329  3287  4657
14 329  4657 10456 
```

这应该`STATUS`以类似的方式适用于变量和其他变量。当这两个步骤分别工作时，您只需`rbind`在最后执行一个步骤。

# phpmyadmin - 使用 mamp 进入 phpmyadmin

> ID：14094534
> 
> 赞同：41
> 
> 时间：2012-12-30T20:51:38.067
> 
> 标签：phpmyadmin, mamp

我正在使用 MAMP，并试图进入 phpmyadmin。loaclhost/phpmyadmin 不工作.. sql 灯为绿色，因此已启用。

我已将 Document Root 更改为 /Users/troycosentino/Sites/easyuniv/，当我从 MAMP 打开起始页时，它看起来是由苹果创建的页面，而不是 MAMP。

有任何想法吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-30T21:11:36.413

如果我转到 localhost:8888/MAMP，它会给我 MAMP 屏幕，我可以从中转到 phpmadmin。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-02-22T15:39:03.150

如果 MAMP 运行了 MySQL 服务器和 Apache 服务器。
您可以通过 url 访问 phpMyAdmin`http://localhost/phpMyAdmin/`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-30T21:14:38.847

试试这个 localhost:8888/MAMP/?language=English

单击 phpMyAdmin 选项卡，您就拥有了它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-14T06:55:16.327

在 Windows 上注意大写字母：

```
http://localhost/phpMyAdmin/ 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-02-28T01:25:06.453

您可以通过下面的链接直接访问它，确保它包含相同的大写字母。

```
127.0.0.1/phpMyAdmin 
```

或者，如果您愿意

```
localhost/phpMyAdmin 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-17T17:54:59.327

在 macOS MAMP 上，您需要转到

```
http://localhost:8888/phpMyAdmin/?lang=en 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-12T05:43:27.350

尝试这个：

```
localhost/MAMP 
```

并从导航菜单中选择：*工具> PhpMyAdmin*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-04T19:17:28.813

我的 htdocs 文件夹中只有个人项目。

我不知道为什么会这样，但它对我有用：

在 httpd.conf 文件夹中（如果您不知道它已经是什么，请执行命令 + 空格并搜索它），将您的根文件夹更改为：

```
DocumentRoot "/Applications/MAMP/bin” 
```

用“#”注释掉你的旧文档根目录，它看起来像：

```
#DocumentRoot "/Applications/MAMP/htdocs” 
```

然后，对目录路径重复这些更改：

```
<Directory "/Applications/MAMP/bin”&gt;
#DocumentRoot "/Applications/MAMP/htdocs” 
```

停止/重新启动 MAMP。为了更好地衡量，尝试在浏览器中加载本地服务器，它不应该工作。

然后，撤消上述所有操作并将您的文档和目录根目录更改回其原始目录。

停止/重新启动 MAMP。尝试再次导航到 localhost/phpmyadmin 或 localhost:8888/phpmyadmin。

不知道究竟是为什么，但它似乎触发了 MAMP 的行为。希望有帮助

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-26T00:15:14.713

我如何让它工作是在 MAMP 上单击 WebStart（飞机符号）。然后在 MySQL 部分下单击“您可以使用 phpMyAdmin 管理您的 MySQL 数据库”行中的 phpMyAdmin。

# google-apps-script - 脚本有时有效，有时无效？

> ID：14094535
> 
> 赞同：2
> 
> 时间：2012-12-30T20:51:53.420
> 
> 标签：google-apps-script, google-drive-api

我创建了一个脚本，其中列出了 Google Drive 位置的内容，但是我收到了失败通知。请注意，我并不总是收到失败通知，并且我无法可靠地重新创建问题。

```
// Expose contents of Drive to File Cabinet URL
function showFolderInSite() {
var folders = DocsList.getFolderById("FOLDERID").getFolders();
var files = DocsList.getFolderById("FOLDERID").getFiles();
var page = SitesApp.getPageByUrl("LINKTOFILECABINET");
var attachments = page.getAttachments();

// Remove dups
for(i in attachments){
attachments[i].deleteAttachment();
} 
// Iterate files
for(i in files){
page.addWebAttachment(files[i].getName(), '', files[i].getUrl());
}
// Iterate folders
for(i in folders){
page.addWebAttachment(folders[i].getName(), '', folders[i].getUrl());
} 
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T18:25:32.547

是的，这也发生在我身上，我不知道为什么，我不得不改变我编写应用程序的方式并将它作为一个小工具插入到我的网站上！

# titanium - Appcelerator 钛合金：如何在 xml 中将 TableViewStyle 设置为 GROUPED

> ID：14094541
> 
> 赞同：0
> 
> 时间：2012-12-30T20:53:15.100
> 
> 标签：titanium, tableview, appcelerator, appcelerator-mobile

我已经尝试了各种方法（也尝试将样式设置为 GROUPED）：

```
<Alloy>
    <Window title="Add Remember">
        <TableView id="table" style="Ti.UI.iPhone.TableViewStyle.GROUPED">
        <!-->
            <TableViewSection headerTitle="Title">
                <TableViewRow><TextField hintText="Title" id="title"></TextField></TableViewRow>
            </TableViewSection>

            <TableViewSection headerTitle="Location">
                <TableViewRow><TextField hintText="Location" id="location"></TextField></TableViewRow>
            </TableViewSection>

            <TableViewSection headerTitle="Notes">
                <TableViewRow><TextArea hintText="Notes"></TextArea></TableViewRow>
            </TableViewSection>
        </!-->
        </TableView>
    </Window>
</Alloy> 
```

但没有shebang。

我还注意到，在控制器文件中以编程方式设置它是有效的，但前提是我还没有向 TableView 添加任何部分或行（这就是上面注释掉部分和行的原因）。

如何在 xml.xml 中设置此属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:12:20.277

好的，解决方法是`style="1"`在xml中为TableView设置；这也适用于未注释的部分和行。我通过登录`Ti.UI.iPhone.TableViewStyle.GROUPED`控制台发现了这一点；显然宏在 xml 中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:28:10.893

我这样做：

在`form.xml`：

```
<TableView class="form">
  ...
</TableView> 
```

在`app.tss`：

```
".form": {
  style: Ti.UI.iPhone.TableViewStyle.GROUPED
} 
```

# macos - Erlang 和 wxWidgets - 可能的错误

> ID：14094542
> 
> 赞同：1
> 
> 时间：2012-12-30T20:53:15.803
> 
> 标签：macos, erlang, wxwidgets

我在 Mac OSX 10.7 上，但我相信这也会出现在 10.8+

尝试运行（在 erlang 内）

```
wx:demo(). 
```

这将产生以下输出：

beam.smp[2733:f0b] CFURLCreateWithString 传递了这个无效的 URL 字符串：'/System/Library/CoreServices/CommonCocoaPanels.bundle'（文件系统路径而不是 URL 字符串）。创建的 URL 不适用于大多数文件 URL 函数。应该使用 CFURLCreateWithFileSystemPath 或 CFURLCreateWithFileSystemPathRelativeToBase 代替。

现在演示运行得很好，但为什么要输出这一行呢？

它与 erlang 无关，经过一番浏览后，似乎这是一个 wxWidgets 错误，因为人们在 python 中也有同样的问题，并且由于输出中的 CommonCocoaPanels.bundle，它以 Mac OSX 为中心。

它现在真的只是一个烦恼，因为一切都运行得很好。但这很可能是一个错误，不是吗？

如何修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T00:31:20.070

你用的是哪个版本的`wxWidgets`？我使用`wxWidgets 2.8.12`under `Mac OS 10.6.8`，自定义构建`Carbon`with `-arch i386`。

> 在 wxWidgets 2.8.x 中，Carbon 是推荐的库，因为它更稳定。Cocoa 在 wxWidgets 2.8.x 中是不完整的。如果您对使用 Cocoa 感兴趣，您应该从 wxWidgets 2.9.x 开始，其中 Cocoa 更完整。

框架本身看起来对 Max OS 有点陌生（可能是因为 Carbon），一小部分 API 被破坏了（这不会阻止程序实际运行 - 只是一些小烦恼）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T05:55:06.653

供我将来参考，以及其他人的参考..

以下将在不显示上述错误消息的情况下工作。

> ```
> P = wx:new(),
> F = wxFrame:new(P, 1, "main", [{size, {600,600}]),
> 
> WindowOpts = [{size, {600,600}}, {style, ?wxSUNKEN_BORDER}],
> W = wxWindow:new(F, ?wxID_ANY, WindowOpts),
> 
> wxFrame:connect(F, close_window, [{skip,true}]),
> wxWindow:connect(W, paint, [{skip, true}]),
> wxFrame:show(F),
> wxFrame:centre(F). 
> ```

奇怪的是，即使我逐行进行了所有的试错调试，也没有简单的方法可以深入了解它。原来是包含一个：

> process_flag(trap_errors, true)

会产生那个错误。我很肯定没有什么崩溃会调用标志的动作。

深度错误。后果不大。

让我们希望他们在 3.0 升级中修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T07:56:19.790

据我所知，wxErlang 目前在 MacOS 上被破坏了，维护者承诺在 wxWidgets 3.0 发布后修复它。

# php - 一个 !empty 输入可以成为函数的一部分 - PHP

> ID：14094546
> 
> 赞同：0
> 
> 时间：2012-12-30T20:53:49.920
> 
> 标签：php, string

我想要实现的是，如果有一个非空输入 + 另一个输入会出现。这就是输入的样子。

```
<input type="file" name="image[]" /> 
```

我想做的是这样的

```
if (!empty($input)){
    //Add another input
} 
```

我认为您可以理解，我只是想知道这是否可以实现，因为我是 php 新手，我不知道这是否可能。如果我犯了任何语法错误，我很抱歉英语不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:57:52.833

当然！通过查看，[`$_POST`](http://php.net/manual/en/reserved.variables.post.php)您[`$_FILES`](http://php.net/manual/en/features.file-upload.php)可以了解输入是否包含某些内容。然后你可以制作它`if`并根据需要渲染一个额外`<input>`的。

请注意，尽管 PHP 是服务器端代码。它在浏览器中提交表单时运行，因此浏览器向服务器发出请求。如果您希望立即显示附加输入，则在填充第一个输入后，您将需要使用 JavaScript。这也是很有可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:58:26.880

我的猜测是，你想要交互性。在这种情况下，您将需要使用 JavaScript，它是一种**[客户端语言](https://softwareengineering.stackexchange.com/q/171203/38223)**。

您将一个事件挂钩到输入，并在每次更改时检查它是否为空。如果是，则显示另一个输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T21:09:03.743

您可以使用以下命令查看文件是否为空：

```
if ($_FILES['image']['size'] > 0) 
```

# php - AUTO_INCREMENT 在两个地方

> ID：14094551
> 
> 赞同：1
> 
> 时间：2012-12-30T20:54:28.113
> 
> 标签：php, mysql, sql, auto-increment

我遇到了以下 sql 语句，您可以看到 AUTO_INCREMENT 在两个不同的地方。你能解释一下不同之处吗，我知道第一个是自动递增 id。但是第二个是什么意思？

```
CREATE TABLE `categories`(
    `id` int(11) NOT NULL AUTO_INCREMENT,
     `name` varchar(100) NOT NULL,
     `image_path` varchar(200) NOT NULL,
      PRIMARY KEY(`id`)
) ENGINE = InnoDB; 
```

第二个说法。

```
CREATE TABLE `categories`(
     `id` int(11) NOT NULL AUTO_INCREMENT,
     `name` varchar(100) NOT NULL,
     `image_path` varchar(200) NOT NULL,
     PRIMARY KEY(`id`)
) ENGINE = InnoDB  DEFAULT CHARSET = latin1 AUTO_INCREMENT=4 ; 
```

我引用[了 http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)。但我什么也找不到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T20:57:50.043

第二`AUTO_INCREMENT`个语句中的第一个数字将在 id 中使用，设置为 4。

```
`id` int(11) NOT NULL AUTO_INCREMENT 
```

设置列名并告诉数据库在添加新行时自动增加数字。

```
) ENGINE = InnoDB  DEFAULT CHARSET = latin1 AUTO_INCREMENT=4 ; 
```

设置用于表的引擎、字符集以及它应该从 4 开始编号，而不是 1。

[`CREATE TABLE`](http://dev.mysql.com/doc/refman/5.0/en/create-table.html)更详细地解释了这一点。

> *   自动递增
> 
> 表的初始 AUTO_INCREMENT 值。在 MySQL 5.0 中，这适用于 MyISAM 和 MEMORY 表。从 MySQL 5.0.3 开始，它也支持 InnoDB。

# java - 'IF' 语句中的 Java 布尔值不起作用

> ID：14094558
> 
> 赞同：0
> 
> 时间：2012-12-30T20:54:49.530
> 
> 标签：java, if-statement, boolean, statements

不幸的是，下面的代码片段无法正常运行。它附加到 JLabel 以便在单击时注意到 PlayerOne 或 PlayerTwo 是否正在播放，并相应地重新排列它们的布尔值

[例如：当 mouseClicked 时：如果 playerOne 为 true，则执行某些操作，并将 playerOne 设置为 false，将 playerTwo 设置为 true]。

因此，当 mouseClicked 被激活时，它会交换它们的值！

```
 public void mouseClicked(MouseEvent arg0) {
            if(playerOne = true){
                playerOne = false;
                playerTwo = true;
                boxOne.setIcon(xIcon);                  
            } else { if(playerTwo = true){
                playerOne = true;
                playerTwo = false;
                boxOne.setIcon(oIcon);
            }} 
```

在此先感谢，汤姆！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:56:01.487

```
if(playerTwo = true) 
```

`==`不是`=`。

有一个 1 或 2 的“currentPlayer”整数不是更简单吗？这也将防止两个玩家同时活跃的（可能是不可能的）状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T20:56:54.187

您在此处使用作业

```
if (playerTwo = true) 
```

用。。。来代替

```
if (playerTwo == true) 
```

或更好

```
if (playerTwo) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T21:01:06.727

在java中，测试两个项目之间相等性的操作数是==而不是'='，这是一个赋值；赋值返回分配的值，所以你的：

```
if (playerOne = true) 
```

将始终为真，因为 playerOne 将被分配给`true`，然后 if 将变为`if (true)`并且关联的语句将始终被执行。

重构代码的最佳方法是：

```
 public void mouseClicked(MouseEvent arg0) {
        if(playerOne) {
            playerOne = false;
            playerTwo = true;
            boxOne.setIcon(xIcon);                  
        } else if(playerTwo) {
            playerOne = true;
            playerTwo = false;
            boxOne.setIcon(oIcon);
       }
    } 
```

因为这`something == true`将是多余的。

# ruby-on-rails-3 - Rails 将类添加到 content_tag_for ：li

> ID：14094561
> 
> 赞同：1
> 
> 时间：2012-12-30T20:55:12.030
> 
> 标签：ruby-on-rails-3

以下索引代码工作正常：

```
 <ul id="sortable1" class="connectedSortable" data-update-url="<%= sort_tasks_url %>">
<% current_user.tasks.each do |task| %>
      <%= content_tag_for :li,  task do %>
            <%= task.taskstatus.statuscode %>
            <%= " - " %>
            <%= link_to h(task.taskname), task %>
            <%= " - " %>
            <%= task.taskdesc %>
        <% end %>
<% end %> 
```

但是，我不知道如何为每个 li 行添加一个类。我收到一个语法错误：

```
<%= content_tag_for(:li, :class => 'ui-state-highlight'),  task do %> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T02:42:45.247

弄清楚了：

```
<%= content_tag_for( :li, task, :class => "ui-state-highlight") do %> 
```

# cydia - 使用 Theos 创建 Cydia Tweak 时带有转储头的编译器错误

> ID：14094562
> 
> 赞同：1
> 
> 时间：2012-12-30T20:55:12.797
> 
> 标签：cydia, logos, theos, cydia-substrate

我正在尝试为 iPhone 上的应用程序编写调整。我在 Objective C 和 iPhone 开发方面有很好的背景，但我从来没有做过任何 Cydia 越狱调整，除了一些关于使用 rpetrich 转储头文件进行调整的教程。我希望使用 PoedCrackMod 来解密，使用 class-dump-z 来获取标头，然后使用 theos/logos 来修补破解的应用程序。

我已经开始运行 PoedCrackMod 来解密应用程序。这会产生一个 .ipa 文件，然后我可以提取该文件以获得 .app 文件，其中包含实际的应用程序二进制文件。

我可以使用

```
class-dump-z -k -k -H -g -o ~/dumped_headers/ Foo 
```

继续获取头文件目录。我将这些标头复制到 $THEOS/include/Foo。（我应该在这里使用 -g 选项 [仅显示导出的类]，还是我也可以挂钩非导出的类？）

此时，我应该能够创建一个如下所示的tweak.xm 文件：

```
#import <Foo/Foo.h> 
```

作为参考，makefile 看起来像：

```
include theos/makefiles/common.mk

TWEAK_NAME = FooTweak
FooTweak_FILES = Tweak.xm

include $(THEOS_MAKE_PATH)/tweak.mk 
```

当我继续尝试编译我的 Tweak（此时它应该什么都不做）时，我想出了各种重复的声明错误。这是正常的，还是我做错了什么？

如果是正常的，我该如何纠正呢？我试过注释掉重复的声明，在这种情况下我可以编译它。我已经插入了 20 多个在调用该方法时创建 UIAlertViews 的钩子，但它们似乎都没有触发 - 让我相信我没有钩住没有被调用的方法，但我要么在做转储标头或将标头导入到我的调整中是否有错误？

有没有人对我可能做错了什么有任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T09:26:28.800

**不使用** `#import <Foo/Foo.h>`

反而

[文件]tweak.xm：

```
#import <substrate.h>

@interface FooToBeHookedHeader : NSObject {} // We take NSObject here as to avoid any errors.
- (void)fooMethod1; // Only put the methods you are hooking
- (void)fooInheritedMethod; // Inherited method (if hooking) as we are using NSObject up there :)
@end

%hook FooToBeHookedHeader
- (void)fooMethod1 {
// Do hooking stuff
} 
- (void)fooInheritedMethod {
// Do hooking stuff
}
%end

// Include any instance variables which you are modifying if any :)
// ~ SuperDev 
```

还包括在您的 FooTweak.plist 中挂钩的 App/Framework 的标识符

# java - Java 在 Netbeans 中导入 org-jdesktop-layout

> ID：14094566
> 
> 赞同：5
> 
> 时间：2012-12-30T20:55:40.113
> 
> 标签：java, swing, import, layout-manager, jdesktop

我已将 org-jdesktop-layout.jar 添加到我项目的 netbeans 中的库中。我在以下位置找到了这个 .jar 文件：`C:\Program Files\NetBeans 7.0.1\platform\modules`

但是，仍然无法识别以下代码行：

```
org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane()); 
```

我想我错过了正确的导入声明。什么是正确的导入语句？如果还有其他有用的信息，请告诉我！还有什么决定了导入语句的前缀？

**编辑**：以下代码似乎来自较旧的 GUI 库。我有两个选择，转换为更新的 GUI 标准或访问旧的 GUI 标准？我以前从来没有做过这样的事情。我能做些什么？

```
org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .addContainerGap()
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                    .add(jButton1)
                    .add(layout.createSequentialGroup()
                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                            .add(jLabel1)
                            .add(jLabel2))
                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                            .add(layout.createSequentialGroup()
                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                                .add(capFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 69, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                                .add(wtFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 69, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))))
                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        ); 
```

我认为这可能是一个较旧的图书馆...在此先感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T15:21:13.627

# php - 检测文件从服务器中删除的原因

> ID：14094580
> 
> 赞同：3
> 
> 时间：2012-12-30T20:57:32.517
> 
> 标签：php, linux, ubuntu, lamp, delete-file

我正在开发 LAMP/php 上的文档管理应用程序，它可以让您向我们的服务器添加和删除 PDF。它工作得很好，除了一个烦人的问题 - 你周一上传的文件可能会在周二消失，我无法诊断原因。似乎整个目录都被删除了 - 我怀疑某个地方有一个不完整的字符串被传递给一个 unlink 或其他东西，但我已经禁用了我能找到的从服务器中删除文件的每一行代码，我仍然遇到麻烦。如何诊断这些随机消失文件的原因？是否有任何实用程序可用于记录对文件或目录的任何尝试删除或更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:20:17.620

理想情况下，您想找到您的错误...

```
find codebase/ -type f -exec grep -il "unlink" '{}' \; 
```

如果您想要一个hacky修复程序，请更新您的apache用户以拥有一个umask，使其能够创建文件，但不能删除它们......

```
sed -i 's/^\(start|[a-z|-]*)\)/\1\n    umask 0222/' `which apachectl` 
```

这也会在错误日志中生成权限被拒绝错误...

# c# - 图像 XAML 标记 (Win8) 不适用于某些路径

> ID：14094588
> 
> 赞同：1
> 
> 时间：2012-12-30T20:58:45.587
> 
> 标签：c#, xaml, windows-8, visual-studio-2012

Image 标签的 Source 属性仅适用于添加到解决方案资源管理器中的“资产”文件夹的文件。

我在 Assets 目录中有两个文件：Logo.png 和 Logo2.png，但只有 Logo.png 被添加到解决方案资源管理器的“Assets”中。此图像正常工作：

```
<Image Source="/Assets/Logo.png"/> 
```

虽然此图像未显示：

```
<Image Source="/Assets/Logo2.png"/> 
```

像“C:\Users\user\Pictures\img.jpg”这样的文件路径也不起作用。是否可以访问解决方案资源管理器的“资产”文件夹中未指定的图像？

编辑：

这是我所做的：

1.  在 VS2012 中创建新项目：Visual C# -> Windows Store -> Blank App (XAML)
2.  打开 MainPage.xaml
3.  从工具箱中选择图像并在设计模式下绘制图像元素
4.  Source 属性的唯一工作值是“/Assets/Logo.png”。这些不起作用：'C:\images\img.jpg'、'/Assets/Logo2.png'、'Project_name;component/Assets/Logo.png'、'Project_name;component/Assets/Logo2.png'等.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:01:16.827

这是您要使用的格式：

```
Project;component/ImagePath 
```

其中 Project 是您要引用的程序集（大多数情况下为项目）的名称，“component”指定所引用的程序集是从本地程序集引用的。

所以对于 Logo2，你会这样做：

```
<Image Source="ImageDemo;component/Assets/Logo2.png" Name="custLogo"/> 
```

其中“ImageDemo”是项目名称，“Assets/Logo2.png”是项目内的路径。

至于绝对路径，以下对我来说很好：

```
<Image Source="C:\Images\001.jpg"></Image> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T23:14:56.227

好的，这是我发现的：

Windows 应用商店应用程序 (Win8) 对文件的访问权限有限。所以我只能使用应用程序附带的文件。但是，如果用户在文件选择器中选择它们，则可以获取用户的文件。

[这里](http://code.msdn.microsoft.com/windowsapps/0f5d56ae-5e57-48e1-9cd9-993115b027b9)也有一个很棒的示例。

# javascript - If..else.. 带有选择框值 javascript 和 html

> ID：14094590
> 
> 赞同：2
> 
> 时间：2012-12-30T20:58:56.607
> 
> 标签：javascript, html

我有一个包含三个不同选项的选择框（4 个实际上是空白选项），单击按钮后，我需要一个警报框来显示消息。这是一些代码。

HTML：

```
<select id="item1" name="Item 1">
      <option></option>
      <option value="1">Camera</option>
      <option value="2">Microphone</option>
      <option value="3">Tripod</option>
    </select>

    <button onclick="message()">Go!</button> 
```

Javascript：

```
 <SCRIPT language = javascript>

function message() {

var s = document.getElementById('item1');
var item1 = s.options[s.selectedIndex].value;

if (item1 = 1) {
    alert("it equals camera")
}
else if (item1 = 2) {
    alert("it equals microphone")
}
else if (item1 = 3) {
    alert("it equals tripod")
}
}

</SCRIPT> 
```

每次我单击按钮时，警报框都会显示“它等于相机”。我可以选择麦克风并单击按钮，它仍然会这样说。

如果我把

```
alert(item1) 
```

在函数中它显示 1、2 或 3。所以我假设它与 if..else.. 语句有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T21:02:19.083

在 JavaScript 中我们应该使用`===`，这也*检查数据类型*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T21:02:09.537

记住使用`==`而不是`=`

```
if(item == 1) 
```

代替

```
if(item = 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T21:02:16.397

在 JavaScript（几乎所有其他花括号语言）中，单曲`=`总是意味着*assignments*。因此，您将值分配`1`给`item1`.

您需要*比较运算符*，即`==`.

```
function message() {
    var s = document.getElementById('item1');
    var item1 = s.options[s.selectedIndex].value;

    if(item1 == '1') {
        alert("it equals camera")
    } else if(item1 == '2') {
        alert("it equals microphone")
    } else if(item1 == '3') {
        alert("it equals tripod")
    }
} 
```

以下是一些改进代码的其他建议：

*   不要使用不推荐使用的`language`属性`<script>`。对 JavaScript 或者如果你想明确一点就`<script>`很好。`<script type="text/javascript>`
*   不要使用内联事件。而不是`onclick="..."`使用该方法注册事件处理程序[`addEventListener()`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T20:59:46.460

代替

```
if (item1 = 1) { 
```

和

```
if (item1 == 1) { 
```

（其他的也一样）

`item = 1`更改`item1`和 返回的值`1`，其评估与`true`测试相同。

但请注意，您可以更有效地

*   使用开关
*   或直接读取值

例如 ：

```
document.getElementById('item1').onchange = function(){
    alert("it equals " + this.options[this.selectedIndex].innerHTML);        
}​​​​​​​​ 
```

[示范](http://jsfiddle.net/LEKsf/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T21:47:15.740

为什么不使用这种方法，当您的选择器获得更多项目时会更容易？

```
var s = document.getElementById("item1");
var item1 = s.options[s.selectedIndex].text;
window.alert('it equals '+item1); 
```

**编辑：** [JSFiddle](http://jsfiddle.net/QBSRj/)

**编辑2：**更改`=`以`==`解决您的问题。而不是使用`s.options[s.selectedIndex].value`你可以简单地使用`s.selectedIndex`. 这也将返回 1、2 或 3，这更容易理解。

# c - 有消息时 MPI_Iprobe 将标志设置为 0

> ID：14094595
> 
> 赞同：0
> 
> 时间：2012-12-30T20:59:12.543
> 
> 标签：c, mpi, openmpi

我正在尝试探测消息以便在 MPI 进程（8 个进程）之间进行通信。第一个到达代码特定部分的进程将向所有其他进程发出信号，其他进程将在到达那里时终止。

这是我已经实现的：（欢迎任何更简单的解决方案）

```
if(depth == size){
    endTime = MPI_Wtime();
    MPI_Iprobe(MPI_ANY_SOURCE, 0, MPI_COMM_WORLD, &stat, MPI_STATUS_IGNORE);
    if(!stat){
        printf("Execution completed in %.5f seconds.\n", endTime - beginTime);
        for (ctr = 0; ctr < mpi_processors; ctr++) {
            if(ctr == mpi_my_pid) continue;
            MPI_Isend(&stat, 1, MPI_INT, ctr, 0, MPI_COMM_WORLD, &req);
            printf("sent to %d from %d\n",ctr,mpi_my_pid);

        }
    }
    return 1;
} 
```

代码是不言自明的。`stat`是一个虚拟变量，仅用于“发送”消息，也用作`Iprobe`. 问题是，stat 在所有进程中*始终*为零，这意味着探测不会返回任何等待接收的消息。但我可以确认 MPI_Isend 正确运行并发送消息。

我是在做一些根本错误的事情，还是在某个我看不到的地方存在一个简单的错误？

谢谢，

能。

# mediaelement.js - 无法在 FF 中播放，在 IE8 中无法播放 - 响应式

> ID：14094596
> 
> 赞同：0
> 
> 时间：2012-12-30T20:59:17.823
> 
> 标签：mediaelement.js

我试图让 MediaElements 在多个浏览器上响应地工作。我正在此链接上对其进行测试。 [http://testing.grappler.tk/mediaelement-js/](http://testing.grappler.tk/mediaelement-js/)

它在 Chrome 中运行良好。它不会在 FF 中播放，当我在 IE8 中对其进行测试时，它看起来像这样。在 IE8+9 中，播放按钮消失了。 ![http://pix.am/oIFU.png](../Images/83df611c2860c91803875b21490af2ed.png) 感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:36:13.767

我追踪了 Firefox 的解码操作。在时间码 0 的集群中，您似乎有一个时间码为 -6 的块。**编辑**：负的原始时间码是无效的，这会导致其余的解码失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:34:34.830

我不确定 IE8，但对于 Firefox，您的 WebM 文件将作为 Firefox 无法理解的 Content-Type application/octet-stream 出现。您必须按照[http://mediaelementjs.com/](http://mediaelementjs.com/)上的步骤 0 中所述设置内容类型。

`<br>`此外，您的代码在标签内有额外的`<video>`标签，可能会抛出 IE。`<object>`除非您想在关闭 JavaScript 的情况下支持非 HTML5 浏览器（IE8 及以下），否则您不需要该代码。删除该代码可以简化事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T11:01:09.213

在花了更多时间在不同情况下测试代码后，我发现 IE9 按钮问题是由于 WordPress 主题使用的一些 css 造成的。

IE8 问题是由于加载了主题的 FitVids。FitVids 试图做出`object`响应，但没有必要。

Firefox 无法播放视频的问题是由 MiroVideoConverter 引起的。尝试另一个转换器后，它工作正常。

# erlang - 记忆中的记录

> ID：14094597
> 
> 赞同：0
> 
> 时间：2012-12-30T20:59:19.487
> 
> 标签：erlang, mnesia

我在 Erlang mnesia 数据库中有以下小表。当我使用如下的dirty_select函数时：

```
mnesia:dirty_select(user, [{#user{id = '$1', name = martin}, [], ['$1']}]). 
```

我得到错误：

```
* 1: record user undefined 
```

用户表有一行，用户 id 作为主键，'martin' 作为用户名。当我使用以下命令时，它运行良好：

```
mnesia:dirty_read(user, 1). 
```

输出是：

```
[{user,1,martin}] 
```

上述错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T22:58:00.390

如果您在使用 erlang shell 时遇到此错误，则需要定义记录。记录是编译时构造，shell 无权访问它们的定义。

```
1> rd(user, {id, name}).
user
2> #user{id=1, name="foo"}.
#user{id = 1,name = "foo"}
3> mnesia:dirty_select(user, [{#user{id = '$1', name = martin}, [], ['$1']}]).
... 
```

定义记录后，dirty_read 操作将使用记录语法打印结果。

# java - Java上通过参数获取类型

> ID：14094600
> 
> 赞同：2
> 
> 时间：2012-12-30T20:59:43.857
> 
> 标签：java, generics, gson

当然，我对所有这些 Java 东西都很陌生，所以我有一个问题，我正在尝试反序列化在 WCF 服务上获得的响应，一切正常，但是，我正在尝试制作一个通用函数来做到这一点.

基本上我所做的是

```
public List<msg> GetService(String method){
    List<msg> response = new ArrayList<msg>();

    Type msgType = new TypeToken<List<msg>>(){}.getType();

    //Obtaining result
    response = uJSON.fromJson(serviceResponse, msgType);
    //uJSON is an instance of Gson library, for deserializing it just needs
    //the service response and a Class<T> or Type to reflect the obtained message
} 
```

我想要做的是获得类型“msg”泛型，这意味着......

```
public <thing> void GetInstanceService(String method){
     List<thing> response = new ArrayList<thing>();

     Type rType2 = new TypeToken<List<thing>>(){}.getType(); //Got java.util.List<thing>

     //And when I'm trying to deserialize I just obtain a List of object 
     //[java.lang.Object@5c7a987e, java.lang.Object@74b1a7a0]

     type2 = uJSON.fromJson(new String(entity), rType2);
} 
```

但我是这样打电话的。

```
comm.<msgType>GetInstanceService("listTestType"); 
```

所以，当我调用“GetInstanceService”时，“thing”是“msgType”类型， `List<thing>`并且响应不应该`List<msgType>`是`List <Object>`？

此外，当我试图通过“类型”参数显式传递类型时，它只会导致我这样的编译时间错误。

```
public void GetInstanceService(Type type){
    List<type> type2 = new ArrayList<type>();  //Compilation time error

    //Or
    msgType oType = new msgType();
    Class classType = oType.getClass();
    List<classType> type3;    //Compilation time error
} 
```

那么，如果这些尝试都无效，我该如何设置反序列化的类型呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T22:00:11.960

Guava 类[`TypeToken`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/reflect/TypeToken.html)不支持这种使用模式。您正在使用类型变量创建类型标记，并且没有足够的信息可以`List<String>`从`List<T>`. 您应该创建一个`TypeToken`拥有所有必需编译时信息的实例。

文档说：

> 请注意，实际类型参数由子类携带是至关重要的。下面的代码是错误的，因为它只捕获了方法签名的`<T>` 类型变量；`listType()`while`<String>`在擦除中丢失：
> 
> ```
> class Util {
>   static <T> TypeToken<List<T>> listType() {
>     return new TypeToken<List<T>>() {};
>   }
> }
> 
> TypeToken<List<String>> stringListType = Util.<String>listType(); 
> ```

但是如上所述，您可以实例化`TypeToken`at 调用站点，其中所有类型信息都可用，然后将其作为参数传递。像这样的东西：

```
public <thing> void GetInstanceService(String method, TypeToken<List<thing>> token){
     List<thing> response = new ArrayList<thing>();

     Type rType2 = token.getType();

     type2 = uJSON.fromJson(new String(entity), rType2);
}

comm.GetInstanceService("listTestType", new TypeToken<List<msgType>>() {}); 
```

**更新**

Paul Bellora 指出，您还可以接受一个参数`TypeToken<thing> token`，并从中构造一个`TypeToken<List<thing>>`内部方法`token`：

```
public <thing> void GetInstanceService(String method, TypeToken<thing> token) {
     List<thing> response = new ArrayList<thing>();

     Type rType2 = new TypeToken<List<thing>>() {}
         .where(new TypeParameter<thing>() {}, token); // where() binds "thing" to token
         .getType();

     type2 = uJSON.fromJson(new String(entity), rType2);
}

comm.GetInstanceService("listTestType", new TypeToken<msgType>() {}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T21:29:55.067

由于所谓的*类型擦除*，您需要的类对象在运行时不可用。

但是，有一个标准的解决方法：将*类型标记*传递给您的方法，如下所示：

```
public <T> List<T> getService(String method, Class<T> c) {
    // the caller has passed in the class object
    List<T> list = new ArrayList<T>();
    // fill list
    return list;
} 
```

# ruby-on-rails - NoMethodError：未定义的方法“保存”导轨控制台

> ID：14094603
> 
> 赞同：5
> 
> 时间：2012-12-30T21:00:11.843
> 
> 标签：ruby-on-rails, railstutorial.org

我正在从 ruby​​.railstutorial.org 学习 RoR，我创建了一个模型，当我尝试向其中添加数据并通过 rails 控制台保存时，我遇到了错误。（我使用 mysql ）

Rails 控制台

```
 User.new(username: "test", password: "test123", password_confirmation: "test123", email: "test@fs.in", role: "admin" )
 => #<User id: nil, username: "test", password: "test123", email: "test@fs.in", role: "admin", created_at: "2012-01-01 00:00:00", updated_at: "2012-01-01 00:00:00", password_confirmation: "test123"> 
```

User.save 给出以下错误

```
NoMethodError: undefined method `save' for #<Class:0x0000000422b628> from /home/ramadas/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/activerecord-3.2.9/lib/active_record/dynamic_matchers.rb:50:in `method_missing'
from (irb):15
from /home/ramadas/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
from /home/ramadas/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
from /home/ramadas/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我的模特

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation, :role, :username
  validates :username, presence: true , length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX } , uniqueness: { case_sensitive: false }
  before_save { |user| user.email = email.downcase }
  before_save { |user| user.username = username.downcase }
  validates :password, presence: true, length: { minimum: 4 }
  validates :password_confirmation, presence: true
end 
```

我已经检查了所有可能发生的错误，但没有找到解决方案。请帮助我弄清楚并解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-30T21:05:19.260

你打电话`User.save`还是`User.new(username:...).save`？

类/模型`User`上没有`save`定义方法，但类的实例有（来自`ActiveRecord::Base`）。

尝试以下操作：

```
user = User.new(username:...)
user.save 
```

# linux - CUDA 设备似乎被阻止

> ID：14094607
> 
> 赞同：1
> 
> 时间：2012-12-30T21:00:52.473
> 
> 标签：linux, cuda, nvidia, hpc

我正在运行一个小型 CUDA 应用程序：QuickSort 基准算法（参见[此处](http://www.cse.chalmers.se/research/group/dcs/gpuqsortdcs.html)）。我有一个带有 NVIDIA 660GTX（设备 0）和 8600GTS（设备 1）的双系统。

在 Windows 8 和 Visual Studio 下，应用程序在设备 0 上编译和运行完美无缺。在 Linux（Ubuntu 12.04 LTS）下，应用程序使用 nvcc 和 gcc 编译，但突然停止运行，返回一个`(unspecified launch failure)`.

我有两个问题：

1.  出现此错误后，我的 GPU 无法执行其他一些操作，例如，在`bandwidhtTest`执行第一次数据传输时运行 SDK 示例块，但运行`deviceQuery`继续执行良好。**如何重置我的 GPU？**我已经尝试过该`cudaDeviceReset()`方法，但它没有帮助
2.  **如何在 linux 下找到问题所在？**有人知道或以前见过吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:11:07.737

1.  如果 GPU 兼容，您可以使用 nvidia-smi 实用程序重置它

2.  以我的知识和经验，`(unspecified launch failure)`通常裁判会出现分段错误。您是否指定了要使用的正确 GPU？尝试使用 cuda-memcheck 查看是否有任何内存超出范围的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T16:37:35.097

我发现使用

> cuda-memcheck -b ...

防止设备锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T21:26:38.673

根据我的经验，XID 31 总是由访问错误指针（又名内存访问冲突）引起的。

我会先追寻这条路。[使用cuda memcheck](https://developer.nvidia.com/cuda-memcheck)运行您的应用程序。像这样`cuda-memcheck you_app args to your app`，看看它是否发现任何错误的内存访问。`cuda-gdb`还可以尝试使用[Nsight Eclipse Edition](http://www.nvidia.com/object/nsight.html)单步执行代码。

# c# - 使用这个的简单构造函数

> ID：14094610
> 
> 赞同：1
> 
> 时间：2012-12-30T21:01:10.410
> 
> 标签：c#

我正在检查一些代码，我发现了下面这段代码，我只想确定我对第二个构造函数的理解。所以，请确认我是这个正确的理解`:this()`

**当使用第二个构造函数创建 User 时，它将始终继承分配的 Roles 属性，因为 Roles 属性未在第二个构造函数内的任何地方分配，我假设它留待稍后在代码中的某个地方使用。**

```
protected User()
{
    Roles = new HashedSet<Role>();
}

public User(string username, string email, string password, string hashAlgorithm)
   : this()
{
    UserName = username;
    Email = email;
    SetPassword(password, hashAlgorithm);
    IsApproved = true;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T21:07:32.243

“this()”只是调用第一个构造函数。请参阅以下 MSDN 主题中的最后两个代码片段：

[http://msdn.microsoft.com/en-us/library/ms173115.aspx](http://msdn.microsoft.com/en-us/library/ms173115.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T21:08:16.490

该语法`: this()`将调用不带参数的构造函数，在本例中为示例中的第一个构造函数。这确保在调用任一构造函数时以相同的方式初始化角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T21:05:53.743

你的理解是正确的，除了`Roles`不是继承的，只是`User`类的其他属性。

[这（） MSDN](http://msdn.microsoft.com/en-us/library/dk1507sz.aspx)

[你什么时候使用这个关键字](https://stackoverflow.com/a/23502/649524)

# javascript - 击中一个词然后突出显示

> ID：14094616
> 
> 赞同：0
> 
> 时间：2012-12-30T21:02:02.517
> 
> 标签：javascript, jquery

我已经尝试了几个小时来完成这项工作。

如果正确，我需要一个函数来突出显示字符。

例如，单词是“halluluja”，我有一个输入字段。

当用户点击“h”时，必须将“halleluja”中的“h”变为红色，如果用户点击“ha”之后，它必须突出显示a。等等。

我用 substr 尝试了一些东西，但没有任何运气。

```
'typing':function(e){
         var c = w.length; //The word length, ex. halleluja
         for ( i=0;i<e.length;i++){ //foreach each
            var o = e.substr(0, e.length); var l = w.substr(i,i+1); //my typing substr, and the char substr
            if ( o.toLowerCase() == l.toLowerCase()){ //correct
                //highlight the letter.
            }
         }
      }, 
```

单词容器在这里输出该容器中的单词。

```
 document.getElementById('wordContainer').innerHTML = w; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:13:36.433

试试这个：http: [//jsfiddle.net/tqHRA/](http://jsfiddle.net/tqHRA/)

html:

```
<div id="preview">hello world</div>

<input type='text' id='txt' />​ 
```

JavaScript：

```
var source = 'hello world';

$(document).ready(function(){
    $('#txt').keyup(function(){
         var text = $(this).val();
         var replaced = source.replace(text, '<span class="highlight">' + text + '</span>');
         $('#preview').html(replaced);
    });
});​ 
```

# java - 如何访问对象内的二维数组？

> ID：14094617
> 
> 赞同：2
> 
> 时间：2012-12-30T21:02:01.610
> 
> 标签：java, object, casting

由于方法调用，我得到了一个对象。它是具有行和列的栅格/网格/矩阵。但是方法的返回类型是一个对象。

在调试时，我可以看到里面的二维数组。但我无法把它变成任何东西。

```
Object vPixels = pixelblock3.getPixelDataByRef(0);
Integer[][] wPixels = (Integer[][]) vPixels; 
```

我在第二行得到一个 ClassCastException： `[[B cannot be cast to [[Ljava.lang.Integer;`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:08:56.203

只是一个猜测：尝试：

```
int[][] wPixels = (int[][]) vPixels; 
```

或者

```
byte[][] wPixels = (byte[][]) vPixels; 
```

我认为 [[B, "B" 表示原始字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:11:37.300

了解对象类型的简单技巧：

```
Object vPixels = pixelblock3.getPixelDataByRef(0);
Class cls = vPixels.getClass();
System.out.println("The type of the object is: " + cls.getName()); 
```

然后您可以转换为适当的类型。

编辑：正如 Luigi 指出的那样 [[B 表示 byte[][] 所以他的答案是正确的。

# c++ - 将所有重音字母更改为 C++ 中的普通字母

> ID：14094621
> 
> 赞同：14
> 
> 时间：2012-12-30T21:02:25.323
> 
> 标签：c++, c, string

## 问题

如何在 C++（或 C）中将所有重音字母更改为普通字母？

那样的话，我的意思是`eéèêaàäâçc`会变成`eeeeaaaacc`.

## 我已经尝试过的

我试过手动解析字符串并一个一个地替换它们，但我认为必须有一种我不知道的更好/更简单的方法（这样可以保证我不会忘记任何重音字母） .

我想知道标准库中是否已经有一个映射，或者是否所有重音字符都可以使用一些数学函数（例如`floor(charCode-131/5) + 61)`）轻松映射到“正常”字母。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-06T17:03:35.483

```
char* removeAccented( char* str ) {
    char *p = str;
    while ( (*p)!=0 ) {
        const char*
        //   "ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ"
        tr = "AAAAAAECEEEEIIIIDNOOOOOx0UUUUYPsaaaaaaeceeeeiiiiOnooooo/0uuuuypy";
        unsigned char ch = (*p);
        if ( ch >=192 ) {
            (*p) = tr[ ch-192 ];
        }
        ++p; // http://stackoverflow.com/questions/14094621/
    }
    return str;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-30T21:05:08.097

我只在理论上知道。基本上，您执行 Unicode 规范化，然后进行一些分解，清除所有变音符号，然后重新组合。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-30T22:08:39.730

您应该首先定义“重音字母”的含义，如果您所拥有的是一些扩展的 8 位 ASCII 以及高于 128 的代码的国家代码页，或者说一些 utf8 编码的字符串，那么必须做的事情会有很大不同。

但是，您应该看看[libicu](http://site.icu-project.org/)，它提供了良好的基于​​ unicode 的重音字母操作所必需的内容。

但它不会为你解决所有问题。例如，如果您收到一些中文或俄文信件，您应该怎么做？如果你得到土耳其大写字母 I 该怎么办？去掉这个“我”上的点？这样做会改变文本的含义......等等。这种问题对于unicode来说是无穷无尽的。即使是传统的排序顺序也取决于国家...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-30T21:15:04.680

假设值只是`char`s，我将创建一个具有所需目标值的数组，然后将每个字符替换为数组中的相应成员：

```
char replacement[256];
int n(0);
std::generate_n(replacement, 256, [=]() mutable -> unsigned char { return n++; });
replacement[static_cast<unsigned char>('é')] = 'e';
// ...
std::transform(s.begin(), s.end(), s.begin(),
               [&](unsigned char c){ return replacement[c]; }); 
```

由于问题也用 C 标记：使用 C 时，您需要创建合适的循环来执行相同的操作，但从概念上讲，它只是以相同的方式。同样，如果您不能使用 C++ 2011，您只需使用合适的函数对象而不是 lambda 函数。

显然，`replacement`阵列可以只设置一次，并且使用比上面概述的更智能的方法。但是，该原则应该有效。但是，如果您需要替换 Unicode 字符，事情会变得更有趣：一方面，数组会相当大，此外，字符可能需要更改多个单词。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-30T21:47:51.967

以下是您可以使用[ISO/IEC 8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)（基于 ASCII 的标准字符编码）执行的操作：

*   如果代码范围是从`192 - 197`替换为`A`
*   如果代码范围是从`224 - 229`替换为`a`
*   如果代码范围是从`200 - 203`替换为`E`
*   如果代码范围是从`232 - 235`替换为`e`
*   如果代码范围是从`204 - 207`替换为`I`
*   如果代码范围是从`236 - 239`替换为`i`
*   如果代码范围是从`210 - 214`替换为`O`
*   如果代码范围是从`242 - 246`替换为`o`
*   如果代码范围是从`217 - 220`替换为`U`
*   如果代码范围是从`249 - 252`替换为`u`

假设 x 是数字的代码，对大写字母执行以下操作：

*   `y = floor((x - 192) / 6)`
*   如果`y <= 2`那么`z = ((y + 1) * 4) + 61`否则`z = (y * 6) + 61`

对小写字母执行以下操作：

*   `y = floor((x - 224) / 6)`
*   如果`y <= 2`那么`z = ((y + 1) * 4) + 93`否则`z = (y * 6) + 93`

最终答案`z`是所需字母表的 ASCII 码。
请注意，此方法仅在您使用[ISO/IEC 8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)时有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-30T22:23:17.407

恐怕这里没有捷径可走。

在应用程序中，我使用内部代码页表解决了这个问题，每个代码页表（如 1250、1251、1252 等）都包含实际的代码页字母和非变音符号等效项。表是使用 c# 自动生成的，它包含一些真正让这变得容易的类（实际上有一些启发式方法），java 也允许快速实现它。

这实际上是用于带有代码页的多字节数据，但它可以用于 UNICODE 字符串（只需在所有表中搜索给定的 unicode 字母）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-02T01:50:13.377

我的用例需要对一长串字符串进行不区分大小写的排序，其中一些字符串可能有变音符号。因此，例如，我希望“Añasco Municipio”出现在“Anchorage Municipality”之前，而不是在“Abbeville County”之前出现，因为它正在做一个幼稚的比较。

我的字符串是用 UTF-8 编码的，但它们有可能包含一些扩展的 ascii 字符，而不是正确的 UTF-8 Unicode。我本可以将所有字符串都升级为 UTF-8，然后使用一个可以进行 UTF-8 字符串比较的库，但我希望能够完全控制速度和决定如何将变音字符映射到非变音字符。（我的选择包括将阳性序数指示符视为“o”，将版权字符视为 c。）

下面的“双字节”代码是 UTF-8 序列。“单字节”代码扩展为 ascii。

这是我得到代码的地方：

[http://www.ascii-code.com/](http://www.ascii-code.com/)

[http://www.endmemo.com/unicode/unicodeconverter.php](http://www.endmemo.com/unicode/unicodeconverter.php)

```
void SimplifyStringForSorting( string *s, bool changeToLowerCase )
{
    // C0 C1 C2 C3 C4 C5 E0 E1 E2 E3 E4 E5 AA // one-byte codes for "a"
    // C3 80 C3 81 C3 82 C3 83 C3 84 C3 85 C3 A0 C3 A1 C3 A2 C3 A3 C3 A4 C3 A5 C2 AA // two-byte codes for "a"

    // C8 C9 CA CB E8 E9 EA EB // one-byte codes for "e"
    // C3 88 C3 89 C3 8A C3 8B C3 A8 C3 A9 C3 AA C3 AB // two-byte codes for "e"

    // CC CD CE CF EC ED EE EF // one-byte codes for "i"
    // C3 8C C3 8D C3 8E C3 8F C3 AC C3 AD C3 AE C3 AF // two-byte codes for "i"

    // D2 D3 D4 D5 D6 F2 F3 F4 F5 F6 BA // one-byte codes for "o"
    // C3 92 C3 93 C3 94 C3 95 C3 96 C3 B2 C3 B3 C3 B4 C3 B5 C3 B6 C2 BA // two-byte codes for "o"

    // D9 DA DB DC F9 FA FB FC // one-byte codes for "u"
    // C3 99 C3 9A C3 9B C3 9C C3 B9 C3 BA C3 BB C3 BC // two-byte codes for "u"

    // A9 C7 E7 // one-byte codes for "c"
    // C2 A9 C3 87 C3 A7 // two-byte codes for "c"

    // D1 F1 // one-byte codes for "n"
    // C3 91 C3 B1 // two-byte codes for "n"

    // AE // one-byte codes for "r"
    // C2 AE // two-byte codes for "r"

    // DF // one-byte codes for "s"
    // C3 9F // two-byte codes for "s"

    // 8E 9E // one-byte codes for "z"
    // C5 BD C5 BE // two-byte codes for "z"

    // 9F DD FD FF // one-byte codes for "y"
    // C5 B8 C3 9D C3 BD C3 BF // two-byte codes for "y"

    int n = s->size();
    int pos = 0;
    for ( int i = 0 ; i < n ; i++, pos++ )
    {
        unsigned char c = (unsigned char)s->at( i );
        if ( c >= 0x80 )
        {
            if ( i < ( n - 1 ) && (unsigned char)s->at( i + 1 ) >= 0x80 )
            {
                unsigned char c2 = SimplifyDoubleCharForSorting( c, (unsigned char)s->at( i + 1 ), changeToLowerCase );
                if ( c2 < 0x80 )
                {
                    s->at( pos ) = c2;
                    i++;
                }
                else
                {
                    // s->at( pos ) = SimplifySingleCharForSorting( c, changeToLowerCase );
                    // if it's a double code we don't recognize, skip both characters;
                    // this does mean that we lose the chance to handle back-to-back extended ascii characters
                    // but we'll assume that is less likely than a unicode "combining character" or other
                    // unrecognized unicode character for data
                    i++;
                }
            }
            else
            {
                unsigned char c2 = SimplifySingleCharForSorting( c, changeToLowerCase );
                if ( c2 < 0x80 )
                {
                    s->at( pos );
                }
                else
                {
                    // skip unrecognized single-byte codes
                    pos--;
                }
            }
        }
        else
        {
            if ( changeToLowerCase && c >= 'A' && c <= 'Z' )
            {
                s->at( pos ) = c + ( 'a' - 'A' );
            }
            else
            {
                s->at( pos ) = c;
            }
        }
    }
    if ( pos < n )
    {
        s->resize( pos );
    }
}

unsigned char SimplifyDoubleCharForSorting( unsigned char c1, unsigned char c2, bool changeToLowerCase )
{
    // C3 80 C3 81 C3 82 C3 83 C3 84 C3 85 C3 A0 C3 A1 C3 A2 C3 A3 C3 A4 C3 A5 C2 AA // two-byte codes for "a"
    // C3 88 C3 89 C3 8A C3 8B C3 A8 C3 A9 C3 AA C3 AB // two-byte codes for "e"
    // C3 8C C3 8D C3 8E C3 8F C3 AC C3 AD C3 AE C3 AF // two-byte codes for "i"
    // C3 92 C3 93 C3 94 C3 95 C3 96 C3 B2 C3 B3 C3 B4 C3 B5 C3 B6 C2 BA // two-byte codes for "o"
    // C3 99 C3 9A C3 9B C3 9C C3 B9 C3 BA C3 BB C3 BC // two-byte codes for "u"
    // C2 A9 C3 87 C3 A7 // two-byte codes for "c"
    // C3 91 C3 B1 // two-byte codes for "n"
    // C2 AE // two-byte codes for "r"
    // C3 9F // two-byte codes for "s"
    // C5 BD C5 BE // two-byte codes for "z"
    // C5 B8 C3 9D C3 BD C3 BF // two-byte codes for "y"

    if ( c1 == 0xC2 )
    {
        if ( c2 == 0xAA ) { return 'a'; }
        if ( c2 == 0xBA ) { return 'o'; }
        if ( c2 == 0xA9 ) { return 'c'; }
        if ( c2 == 0xAE ) { return 'r'; }
    }

    if ( c1 == 0xC3 )
    {
        if ( c2 >= 0x80 && c2 <= 0x85 ) { return changeToLowerCase ? 'a' : 'A'; }
        if ( c2 >= 0xA0 && c2 <= 0xA5 ) { return 'a'; }
        if ( c2 >= 0x88 && c2 <= 0x8B ) { return changeToLowerCase ? 'e' : 'E'; }
        if ( c2 >= 0xA8 && c2 <= 0xAB ) { return 'e'; }
        if ( c2 >= 0x8C && c2 <= 0x8F ) { return changeToLowerCase ? 'i' : 'I'; }
        if ( c2 >= 0xAC && c2 <= 0xAF ) { return 'i'; }
        if ( c2 >= 0x92 && c2 <= 0x96 ) { return changeToLowerCase ? 'o' : 'O'; }
        if ( c2 >= 0xB2 && c2 <= 0xB6 ) { return 'o'; }
        if ( c2 >= 0x99 && c2 <= 0x9C ) { return changeToLowerCase ? 'u' : 'U'; }
        if ( c2 >= 0xB9 && c2 <= 0xBC ) { return 'u'; }
        if ( c2 == 0x87 ) { return changeToLowerCase ? 'c' : 'C'; }
        if ( c2 == 0xA7 ) { return 'c'; }
        if ( c2 == 0x91 ) { return changeToLowerCase ? 'n' : 'N'; }
        if ( c2 == 0xB1 ) { return 'n'; }
        if ( c2 == 0x9F ) { return 's'; }
        if ( c2 == 0x9D ) { return changeToLowerCase ? 'y' : 'Y'; }
        if ( c2 == 0xBD || c2 == 0xBF ) { return 'y'; }
    }

    if ( c1 == 0xC5 )
    {
        if ( c2 == 0xBD ) { return changeToLowerCase ? 'z' : 'Z'; }
        if ( c2 == 0xBE ) { return 'z'; }
        if ( c2 == 0xB8 ) { return changeToLowerCase ? 'y' : 'Y'; }
    }

    return c1;
}

unsigned char SimplifySingleCharForSorting( unsigned char c, bool changeToLowerCase )
{
    // C0 C1 C2 C3 C4 C5 E0 E1 E2 E3 E4 E5 AA // one-byte codes for "a"
    // C8 C9 CA CB E8 E9 EA EB // one-byte codes for "e"
    // CC CD CE CF EC ED EE EF // one-byte codes for "i"
    // D2 D3 D4 D5 D6 F2 F3 F4 F5 F6 BA // one-byte codes for "o"
    // D9 DA DB DC F9 FA FB FC // one-byte codes for "u"
    // A9 C7 E7 // one-byte codes for "c"
    // D1 F1 // one-byte codes for "n"
    // AE // one-byte codes for "r"
    // DF // one-byte codes for "s"
    // 8E 9E // one-byte codes for "z"
    // 9F DD FD FF // one-byte codes for "y"

    if ( ( c >= 0xC0 && c <= 0xC5 ) || ( c >= 0xE1 && c <= 0xE5 ) || c == 0xAA )
    {
        return ( ( c >= 0xC0 && c <= 0xC5 ) && !changeToLowerCase ) ? 'A' : 'a';
    }

    if ( ( c >= 0xC8 && c <= 0xCB ) || ( c >= 0xE8 && c <= 0xEB ) )
    {
        return ( c > 0xCB || changeToLowerCase ) ? 'e' : 'E';
    }

    if ( ( c >= 0xCC && c <= 0xCF ) || ( c >= 0xEC && c <= 0xEF ) )
    {
        return ( c > 0xCF || changeToLowerCase ) ? 'i' : 'I';
    }

    if ( ( c >= 0xD2 && c <= 0xD6 ) || ( c >= 0xF2 && c <= 0xF6 ) || c == 0xBA )
    {
        return ( ( c >= 0xD2 && c <= 0xD6 ) && !changeToLowerCase ) ? 'O' : 'o';
    }

    if ( ( c >= 0xD9 && c <= 0xDC ) || ( c >= 0xF9 && c <= 0xFC ) )
    {
        return ( c > 0xDC || changeToLowerCase ) ? 'u' : 'U';
    }

    if ( c == 0xA9 || c == 0xC7 || c == 0xE7 )
    {
        return ( c == 0xC7 && !changeToLowerCase ) ? 'C' : 'c';
    }

    if ( c == 0xD1 || c == 0xF1 )
    {
        return ( c == 0xD1 && !changeToLowerCase ) ? 'N' : 'n';
    }

    if ( c == 0xAE )
    {
        return 'r';
    }

    if ( c == 0xDF )
    {
        return 's';
    }

    if ( c == 0x8E || c == 0x9E )
    {
        return ( c == 0x8E && !changeToLowerCase ) ? 'Z' : 'z';
    }

    if ( c == 0x9F || c == 0xDD || c == 0xFD || c == 0xFF )
    {
        return ( ( c == 0x9F || c == 0xDD ) && !changeToLowerCase ) ? 'Y' : 'y';
    }

    return c;
} 
```

# java - 为嵌入式表创建休眠条件时出错

> ID：14094627
> 
> 赞同：0
> 
> 时间：2012-12-30T21:03:02.560
> 
> 标签：java, hibernate, hibernate-criteria

我的项目中有以下课程。

员工类

```
@XmlRootElement
@Entity
@Table(name = "emp", catalog = "emps")
public class Employee implements java.io.Serializable {

    //other entity variables
    private Set<Title> titles = new HashSet<Title>(0);

    @XmlTransient
    @OneToMany(targetEntity = Title.class, fetch = FetchType.EAGER, mappedBy = "employee", cascade=CascadeType.ALL)
    public Set<Title> getTitles() {
        return this.titles;
    }

    public void setTitles(Set<Title> titles) {
        this.titles = titles;
    }

} 
```

标题

```
@Entity
@Table(name = "titles", catalog = "emps")
public class Title implements java.io.Serializable {

    private TitleId id;
    private Employee employee;
    private Date fromDate;
    private Date toDate;

    public Title() {
    }

    public Title(TitleId id, Employee employee) {
        this.id = id;
        this.employee = employee;
    }

    public Title(TitleId id, Employee employee, Date toDate) {
        this.id = id;
        this.employee = employee;
        this.toDate = toDate;
    }

    @EmbeddedId
    @AttributeOverrides({
            @AttributeOverride(name = "empNo", column = @Column(name = "emp_no", nullable = false)),
            @AttributeOverride(name = "title", column = @Column(name = "title", nullable = false, length = 50)),
            @AttributeOverride(name = "fromDate", column = @Column(name = "from_date", nullable = false, length = 10)) })
    public TitleId getId() {
        return this.id;
    }

    public void setId(TitleId id) {
        this.id = id;
    }

    //rest of the code

} 
```

标题 ID

```
@Embeddable
public class TitleId implements java.io.Serializable {

    private int empNo;
    private String title;
    private Date fromDate;

    public TitleId() {
    }

    public TitleId(int empNo, String title, Date fromDate) {
        this.empNo = empNo;
        this.title = title;
        this.fromDate = fromDate;
    }

    @Column(name = "emp_no", nullable = false)
    public int getEmpNo() {
        return this.empNo;
    }

    public void setEmpNo(int empNo) {
        this.empNo = empNo;
    }

    @Column(name = "title", nullable = false, length = 50)
    public String getTitle() {
        return this.title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    @Column(name = "from_date", nullable = false, length = 10)
    public Date getFromDate() {
        return this.fromDate;
    }

    public void setFromDate(Date fromDate) {
        this.fromDate = fromDate;
    }

    public boolean equals(Object other) {
        if ((this == other))
            return true;
        if ((other == null))
            return false;
        if (!(other instanceof TitleId))
            return false;
        TitleId castOther = (TitleId) other;

        return (this.getEmpNo() == castOther.getEmpNo())
                && ((this.getTitle() == castOther.getTitle()) || (this
                        .getTitle() != null && castOther.getTitle() != null && this
                        .getTitle().equals(castOther.getTitle())))
                && ((this.getFromDate() == castOther.getFromDate()) || (this
                        .getFromDate() != null
                        && castOther.getFromDate() != null && this
                        .getFromDate().equals(castOther.getFromDate())));
    }

    public int hashCode() {
        int result = 17;

        result = 37 * result + this.getEmpNo();
        result = 37 * result
                + (getTitle() == null ? 0 : this.getTitle().hashCode());
        result = 37 * result
                + (getFromDate() == null ? 0 : this.getFromDate().hashCode());
        return result;
    }

} 
```

我需要创建一个条件来查找用户的名字、姓氏和头衔。名字和姓氏在我的标准中工作正常。以下代码显示了我如何为标题创建标准。“jobTitle”是我传递给它的参数。

```
Criteria employeeSearchCriteria = getSession().createCriteria(Employee.class);
employeeSearchCriteria.setFirstResult(0);
employeeSearchCriteria.setMaxResults(6);
employeeSearchCriteria.createAlias("titles.TitleId", "titleId");
employeeSearchCriteria.add(Restrictions.eq("titleId.title", jobTitle)); 
```

当我运行代码时，它会抛出一个 Query Exception 说`org.hibernate.QueryException: could not resolve property: TitleId of: Title`。任何人都可以在这件事上帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:33:10.773

我在这里猜测，但尝试在类`Title`中将 getter 方法名称从`getId()`更改为`getTitleId()`。

否则，我只能说我看到的所有示例都`@EmbeddedId`显示了如何在字段本身上执行此操作，而不是像您那样在 getter 上执行此操作。所以你也可以尝试对字段进行注释（尽管 Hibernate 建议不要混合方法和字段映射注释）。

# javascript - 如何更改 Twitter 推文中的文本？

> ID：14094629
> 
> 赞同：1
> 
> 时间：2012-12-30T21:03:24.250
> 
> 标签：javascript, twitter, replace, greasemonkey

我正在关注这个 Twitter 帐户，该帐户在不同时区的军事时间发布推文。我正在尝试在 Firefox 中使用带有 GreaseMonkey 插件的 javascript 来将文本更改为适当的时区和常规时间。问题是我似乎无法让它工作。

我关注的帐户： [https ://twitter.com/pso2_emg_bot](https://twitter.com/pso2_emg_bot)

我使用的脚本：

```
// ==UserScript==
// @name        PSO2 Emg Bot Script
// @namespace   Twitter
// @description Convert time to EST
// @include     https://twitter.com/*
// @version     1
// ==/UserScript==

function replaceText(){
var theDiv = document.getElementsByClassName("js-tweet-text");
var theText = theDiv .innerHTML;

// Replace words
theText = theText.replace("4:00~4:30", "2:00 P.M. ~ 2:30 P.M.");
theText = theText.replace("14:00~14:30", "12:00 A.M. ~ 12:30 A.M.");
theText = theText.replace("15:00~15:30", "1:00 A.M. ~ 1:30 A.M.");
theText = theText.replace("16:00~16:30", "2:00 A.M. ~ 2:30 A.M.");

theDiv.innerHTML = theText;
} 
```

目前它还不完整，因为我只需要在包含所有时间以供脚本搜索之前让它工作。如果有人能告诉我我做错了什么以及如何解决它，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T00:09:32.457

*   您已经定义了一个函数，`function replaceText()`但是您的脚本中没有调用该函数的任何内容，因此没有执行任何操作。
*   请注意，它`theDiv`实际上将包含一个 div 数组，因此您不能以这种方式设置或设置它的 innerHTML。
*   在您提到的推特页面中，时间由一个字符分隔，它不是〜，而是屏幕字体显示能力之外的东西。使用复制+粘贴来正确获取。
*   第11行还有一个语法错误，你在里面留了一个空格`theDiv .innerHTML;`

Twitter 已加载 jQuery，因此在您的情况下，使用它而不是 vanilla JS 可能会更容易。

```
//...
// ==/UserScript==

var $ = unsafeWindow.$;
var theDivs = $(".js-tweet-text");

theDivs.each(function(){
    var theText = $(this).text();

    theText = theText.replace("7:00～7:30", "7:00 P.M. ~ 7:30 P.M.");
    //other replacements you want to make.
    //consider using a regular expression instead of one line for each hour.
    $(this).text(theText);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T00:57:35.490

几件事：

1.  推文是通过 AJAX 添加的，因此您需要使用支持 AJAX 的脚本。下面，我将展示如何使用[waitForKeyElements() 实用程序](https://gist.github.com/2625891)来执行此操作。
2.  不要使用`innerHTML`. 它会破坏事情（加上它更慢）。使用[jQuery](http://jquery.com/)或“DOM 技术”（如下所示）。
3.  `.replace()`使用正则表达式来获取时间，因此不需要大量不同的语句。

综上所述，这是**一个完整的工作脚本**：

```
// ==UserScript==
// @name        _PSO2 Emg Bot Script
// @namespace   Twitter
// @description Convert time to EST
// @include     https://twitter.com/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require     https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

waitForKeyElements ("p.js-tweet-text", ChangeSpecialTimeStrs);

function ChangeSpecialTimeStrs (jNode) {
    var node    = jNode[0];

    //-- Search only in the first-level text nodes of this paragraph.
    for (var K = 0, numC = node.childNodes.length;  K < numC;  ++K) {
        var childNode = node.childNodes[K];
        if (childNode.nodeType === Node.TEXT_NODE) {
            if (childNode.nodeValue.length > 8)  {
                //-- Anything shorter can't have our kind of string.
                childNode.nodeValue  = childNode.nodeValue.replace (
                    /*-- This matches strings like: "5:00~15:30"
                        Where "~" may be unicode FF5E
                    */
                    /\b(\d{1,2}):(\d{2})(?:~|\uFF5E)(\d{1,2}):(\d{2})\b/gi,
                    shiftHourStr
                );
            }
        }
    }
}

function shiftHourStr (
    matchedStr,                 //- Housekeeping supplied by .replace()
    hour1Str, minute1Str,       //- Payload vals from () groups
    hour2Str, minute2Str,       //- Payload vals from () groups
    matchOffset, totalString    //- Housekeeping supplied by .replace()
) {
    //-- Return a string with a format like: "12:00 A.M. ~ 12:30 A.M."
    const tzOffsetHours = 10;
    var newHr1Arry      = getHourOffset (hour1Str, tzOffsetHours);
    var newHr2Arry      = getHourOffset (hour2Str, tzOffsetHours);
    var outputStr       = newHr1Arry[0]     //-- Hour value
                        + ":" + minute1Str
                        + newHr1Arry[1]     //-- AM or PM
                        + " ~ "
                        + newHr2Arry[0]     //-- Hour value
                        + ":" + minute2Str
                        + newHr2Arry[1]     //-- AM or PM
                        ;
    return outputStr;
};

function getHourOffset (hourVal, hoursOffset) {
    var amPmStr     = "A.M.";
    var newHourVal  = parseInt (hourVal, 10) + hoursOffset;

    if (newHourVal > 23) {
        newHourVal -= 24;
    }
    if (newHourVal >= 12) {
        newHourVal -= 12;
        amPmStr     = "P.M.";
    }
    if (newHourVal == 0) {
        newHourVal  = 12;
        amPmStr     = "A.M.";
    }
    return [newHourVal, " " + amPmStr];
} 
```

# javascript - JavaScript 递归函数有助于删除连字符

> ID：14094634
> 
> 赞同：0
> 
> 时间：2012-12-30T21:04:16.850
> 
> 标签：javascript, recursion

我一直在研究递归脚本，它基于标记动态创建下拉导航。

这是我到目前为止所拥有的，但我试图删除下拉列表中每个项目之前的连字符，除非它位于嵌套的子链接中。有没有人有任何想法？

以下是递归脚本的设置方式，调用位于底部。

```
var loadLinks = function runLinks(currDom, currPrependedChar) {

        var dom = currDom;
        var children = dom.children;

        for (var i = 0; i < dom.children.length; ++i) {

            var currentLink = children[i];

            switch (currentLink.nodeName) {
                case 'A':
                    var option = document.createElement('option');
                    option.innerHTML = currPrependedChar + currentLink.text;
                    option.value = currentLink.href;
                    select.appendChild(option);
                    break;
                default:
                    if (currentLink.nodeName === 'UL') {
                        currPrependedChar += currPrependedChar;
                    }
                    loadLinks(currentLink, currPrependedChar);
                    break;
            }
        }
    }

    loadLinks(nav, '- '); 
```

这是它在 JSFiddle 上的运行方式，您可以看到带有连字符的选择导航 - [http://jsfiddle.net/4jeaZ/](http://jsfiddle.net/4jeaZ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:39:23.677

只需跟踪当前级别：

```
var loadLinks = function runLinks(currDom,currPrependedChar, currLevel) {
...
option.innerHTML = (currLevel++ < 1 ? '' : currPrependedChar) + currentLink.text;
...
currLevel < 2 || (currPrependedChar += currPrependedChar);
...
loadLinks(currentLink, currPrependedChar, currLevel);
...
loadLinks(nav, '- ', 0); 
```

[http://jsfiddle.net/userdude/4jeaZ/5/](http://jsfiddle.net/userdude/4jeaZ/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:21:13.737

您可以向 runLinks 函数添加一个额外的参数，以便它知道当前的前置字符和子链接前置字符。

```
 var loadLinks = function runLinks(currDom, currPrependedChar, subPrependedChar) {

        var dom = currDom;
        var children = dom.children;

        for (var i = 0; i < dom.children.length; ++i) {

            var currentLink = children[i];

            switch (currentLink.nodeName) {
                case 'A':
                    var option = document.createElement('option');
                    option.innerHTML = currPrependedChar + currentLink.text;
                    option.value = currentLink.href;
                    select.appendChild(option);
                    break;
                default:
                    if (currentLink.nodeName === 'UL') {
                        currPrependedChar += subPrependedChar;
                    }
                    loadLinks(currentLink, currPrependedChar, subPrependedChar);
                    break;
            }
        }
    }

    loadLinks(nav, '', '- '); 
```

# solr - Alfresco 4.2b 搜索不适用于 Solr

> ID：14094637
> 
> 赞同：3
> 
> 时间：2012-12-30T21:04:49.877
> 
> 标签：solr, alfresco

我在露天搜索时遇到了一些麻烦，它不起作用（对于管理员或用户）

服务器版本最初是 4.0d 社区版。我尝试在我的开发虚拟机上将其升级到 4.2b 社区版（嵌入所有组件的默认安装程序）。

我的证书有一些问题（我无法访问[https://example.com:8443/solr](https://example.com:8443/solr)）所以我使用该程序升级了 alf_data 中的证书[http://wiki.alfresco.com/wiki/Replacing_Default_Certificate](http://wiki.alfresco.com/wiki/Replacing_Default_Certificate)并且它有效好

我重建了所有索引 [http://deepak-keswani.blogspot.fr/2012/07/how-to-rebuild-solr-indexes-in-alfresco.html](http://deepak-keswani.blogspot.fr/2012/07/how-to-rebuild-solr-indexes-in-alfresco.html) （文件夹大小相同，所以我认为数据是已编入索引，如果有人了解我如何使用 solr 文件夹进行自定义搜索，我将不胜感激）

我在 tomcat/webapps/alfresco/WEB-INF/classes/log4j.properties 和 tomcat/webapps/share/WEB-INF/classes/log4j.properties log4j.logger.org.alfresco.repo.search.impl 中激活了日志。 solr.SolrQueryHTTPClient=debug 但日志文件中没有出现任何内容。

我激活了另一个日志：我在 shared/classes/alfresco/extension/ 中添加了一个包含该内容的文件 dev-log4j.properties：

```
log4j.logger.org.alfresco.web.scripts=debug
log4j.logger.org.alfresco.repo.web.scripts=debug
log4j.logger.org.alfresco.repo.jscript=debug
log4j.logger.org.alfresco.repo.jscript.ScriptLogger=debug 
```

我有一个日志结果

```
21:42:39,375 DEBUG [org.alfresco.repo.jscript.Search] Failed to execute search: ((PATH:"/app:company_home/st:sites/*/*//*" AND (testours  AND (+TYPE:"cm:content" +TYPE:"cm:folder"))) AND -TYPE:"cm:thumbnail" AND -TYPE:"cm:failedThumbnail" AND -TYPE:"cm:rating") AND NOT ASPECT:"sys:hidden"
org.alfresco.repo.search.impl.lucene.LuceneQueryParserException: 11300004 Request failed 500 /solr/alfresco/afts?wt=json&fl=DBID%2Cscore&rows=502&df=keywords&start=0&locale=fr&fq=%7B%21afts%7DAUTHORITY_FILTER_FROM_JSON&fq=%7B%21afts%7DTENANT_FILTER_FROM_JSON
    at org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:398)
    at org.alfresco.repo.search.impl.solr.SolrQueryLanguage.executeQuery(SolrQueryLanguage.java:49)
    at org.alfresco.repo.search.impl.solr.SolrSearchService.query(SolrSearchService.java:348)
    at org.alfresco.repo.search.SearcherComponent.query(SearcherComponent.java:78)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.alfresco.repo.management.subsystems.SubsystemProxyFactory$1.invoke(SubsystemProxyFactory.java:72)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy12.query(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at net.sf.acegisecurity.intercept.method.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:80)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.alfresco.repo.security.permissions.impl.ExceptionTranslatorMethodInterceptor.invoke(ExceptionTranslatorMethodInterceptor.java:46)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.alfresco.repo.audit.AuditMethodInterceptor.invoke(AuditMethodInterceptor.java:159)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy12.query(Unknown Source)
    at org.alfresco.repo.jscript.Search.query(Search.java:803)
    at org.alfresco.repo.jscript.Search.query(Search.java:686)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.mozilla.javascript.MemberBox.invoke(MemberBox.java:155)
    at org.mozilla.javascript.NativeJavaMethod.call(NativeJavaMethod.java:243)
    at org.mozilla.javascript.optimizer.OptRuntime.call1(OptRuntime.java:66)
    at org.mozilla.javascript.gen.c3._c20(file:/home/alfresco-4.0.d/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/slingshot/search/search.get.js:1013)
    at org.mozilla.javascript.gen.c3.call(file:/home/alfresco-4.0.d/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/slingshot/search/search.get.js)
    at org.mozilla.javascript.optimizer.OptRuntime.callName(OptRuntime.java:97)
    at org.mozilla.javascript.gen.c3._c22(file:/home/alfresco-4.0.d/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/slingshot/search/search.get.js:1057)
    at org.mozilla.javascript.gen.c3.call(file:/home/alfresco-4.0.d/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/slingshot/search/search.get.js)
    at org.mozilla.javascript.optimizer.OptRuntime.callName0(OptRuntime.java:108)
    at org.mozilla.javascript.gen.c3._c0(file:/home/alfresco-4.0.d/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/slingshot/search/search.get.js:1060)
    at org.mozilla.javascript.gen.c3.call(file:/home/alfresco-4.0.d/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/slingshot/search/search.get.js)
    at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:393)
    at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2834)
    at org.mozilla.javascript.gen.c3.call(file:/home/alfresco-4.0.d/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/slingshot/search/search.get.js)
    at org.mozilla.javascript.gen.c3.exec(file:/home/alfresco-4.0.d/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/slingshot/search/search.get.js)
    at org.alfresco.repo.jscript.RhinoScriptProcessor.executeScriptImpl(RhinoScriptProcessor.java:492)
    at org.alfresco.repo.jscript.RhinoScriptProcessor.execute(RhinoScriptProcessor.java:198)
    at org.alfresco.repo.processor.ScriptServiceImpl.execute(ScriptServiceImpl.java:212)
    at org.alfresco.repo.processor.ScriptServiceImpl.executeScript(ScriptServiceImpl.java:174)
    at org.alfresco.repo.web.scripts.RepositoryScriptProcessor.executeScript(RepositoryScriptProcessor.java:102)
    at org.springframework.extensions.webscripts.AbstractWebScript.executeScript(AbstractWebScript.java:1305)
    at org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:86)
    at org.alfresco.repo.web.scripts.RepositoryContainer$3.execute(RepositoryContainer.java:422)
    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:433)
    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecute(RepositoryContainer.java:491)
    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecuteAs(RepositoryContainer.java:529)
    at org.alfresco.repo.web.scripts.RepositoryContainer.executeScript(RepositoryContainer.java:345)
    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:377)
    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:209)
    at org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:118)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:61)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.AprEndpoint$SocketWithOptionsProcessor.run(AprEndpoint.java:1771)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

当我尝试网址时：

> [https://example.com:8443/solr/alfresco/afts?wt=json&fl=DBID%2Cscore&rows=502&df=keywords&start=0&locale=fr&fq=](https://example.com:8443/solr/alfresco/afts?wt=json&fl=DBID%2Cscore&rows=502&df=keywords&start=0&locale=fr&fq=) {!afts}AUTHORITY_FILTER_FROM_JSON&fq={!afts}TENANT_FILTER_FROM_JSON

我从 tomcat 发出了 500 页：

> Etat HTTP 500 - null java.lang.NullPointerException at org.antlr.runtime.ANTLRStringStream.(ANTLRStringStream.java:75) at org.alfresco.repo.search.impl.parsers.FTSQueryParser.buildFTS(FTSQueryParser.java:108) at org.alfresco.solr.AlfrescoSolrDataModel.getFTSQuery(AlfrescoSolrDataModel.java:986) 在 org.alfresco.solr.query.AlfrescoFTSQParserPlugin$AlfrescoFTSQParser.parse(AlfrescoFTSQParserPlugin.java:80) 在 org.apache.solr.search.QParser.getQuery( QParser.java:131) 在 org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:89) 在 org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:174) 在 org .apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131) 在 org.apache.solr.core.SolrCore.execute(SolrCore.java:1316) 在 org.apache.solr.servlet。SolrDispatchFilter.execute(SolrDispatchFilter.java:338) at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:241) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at org .apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve .java:123) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) 在 org.apache.catalina.org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)。 Valves.ErrorReportValve.invoke(ErrorReportValve.java:99) 在 org.apache.catalina.valves.AccessLogValve。在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 调用(AccessLogValve.java:929) .coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run (JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread。运行（线程.java：722）CoyoteAdapter.service(CoyoteAdapter.java:407) at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) at org .apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)CoyoteAdapter.service(CoyoteAdapter.java:407) at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) at org .apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread 的 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 运行 (JIoEndpoint.java:310) .run(Thread.java:722)在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread 的 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 运行 (JIoEndpoint.java:310) .run(Thread.java:722)

然后使用我的新日志参数，我尝试重建它。

我有很多消息[http://depositfiles.com/files/4w85yegap](http://depositfiles.com/files/4w85yegap)但我没有看到任何元素

我试着用 Luke (Lucene Index Toolbox) 打开它，但我不知道如何使用它......但它说我有 40k 个文档，这些文档可能是真的（但我无法检查它们是否被很好地索引）

**更新**

我用 alfresco 4.0d 重试了它，它可以工作。（我会对新版本有问题，但它解决了我的部分问题）。我的快速升级程序是关闭、备份并将 4.0d 移动到另一个目录，然后复制 alf_data，更正证书。有什么线索吗？

有人有解决方案或提示可以继续吗？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:30:59.507

一旦 solr 与 alfresco 4.0d 一起工作（证书问题，您可以获取较新版本的证书或生成自己的证书）。我使用该程序将 alfresco 升级到 4.2b：[http ://www.fossoffice.com/en/2012/10/31/alfresco-community-upgrade/](http://www.fossoffice.com/en/2012/10/31/alfresco-community-upgrade/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T21:58:10.483

你 100% 确定 solr 索引重建真的成功了吗？

我已经看到由已从字典中删除的类型实例导致的类似搜索错误。

您是否在 4.2 系统上部署了与 4.0 相同的扩展类型？

如果有疑问，请停止系统，擦除索引并再次重建。在重建过程中放松并观察日志中的异常。就我而言，这些错误提示了缺少类型。在这种情况下，要么在重建索引之前删除相应的节点，要么使这些类型在新系统的数据字典中可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T04:26:11.407

我想，您的查询不正确。

((PATH:"/app:company_home/st:sites/*/*//*" AND (testours AND (+TYPE:"cm:content" +TYPE:"cm:folder"))) AND -TYPE:" cm:thumbnail" AND -TYPE:"cm:failedThumbnail" AND -TYPE:"cm:rating") AND NOT ASPECT:"sys:hidden"

原因：testours 不是 Lucene Query 中的关键字。并且无需添加“/*/*//*”进行任何级别的搜索。仅添加**//***将起作用。**路径：“/app:company_home/st:sites//*”**

你得到的错误 - Etat HTTP 500 - null java.lang.NullPointerException at org.antlr.runtime.ANTLRStringStream.(ANTLRStringStream.java:75)

当您尝试在浏览器上点击此链接 [https://example.com:8443/solr/alfresco/afts?wt=json&fl=DBID%2Cscore&rows=502&df=keywords&start=0&locale=fr&fq=](https://example.com:8443/solr/alfresco/afts?wt=json&fl=DBID%2Cscore&rows=502&df=keywords&start=0&locale=fr&fq=) {!afts}AUTHORITY_FILTER_FROM_JSON&fq={!afts} TENANT_FILTER_FROM_JSON

-- 这是因为，您忘记在其中添加**“查询”**参数 **q** ="SOME_LUCENE_QUERY"。

试试这个.. [https://example.com:8443/solr/alfresco/afts](https://example.com:8443/solr/alfresco/afts)？**q=TYPE:"cm:folder"** &wt=json&fl=DBID%2Cscore&rows=502&locale=fr&indent=on

# hibernate - JBoss AS 7：persistence.xml 给出“未设置‘hibernate.dialect’时连接不能为空”

> ID：14094643
> 
> 赞同：1
> 
> 时间：2012-12-30T21:05:08.853
> 
> 标签：hibernate, jpa, jboss7.x

`persistence.xml`在 Maven 项目（JAR 打包）的 JUnit 测试中使用以下内容时有效：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0">

    <persistence-unit name="test">
        <class>be.test.site.model.User</class>
        <class>be.test.site.model.SignIn</class>

        <properties>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://127.0.0.1:3306/test?useServerPrepStmts=false" />
            <property name="javax.persistence.jdbc.user" value="root" />
            <property name="javax.persistence.jdbc.password" value="root" />

            <property name="hibernate.hbm2ddl.auto" value="create" />
        </properties>
    </persistence-unit>
</persistence> 
```

使用的代码是：

```
EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("test"); 
```

当我`persistence.xml`在 WAR ( `/WEB-INF/classes/META-INF/persistence.xml`) 中部署它时，JBoss AS 7.1.1 给了我：

```
21:36:49,270 INFO  [org.jboss.as.jpa] (MSC service thread 1-8) JBAS011401: Read persistence.xml for test
21:36:49,559 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
21:36:49,599 INFO  [org.jboss.as.jpa] (MSC service thread 1-1) JBAS011402: Starting Persistence Unit Service 'webapp.war#test'
21:36:49,748 INFO  [org.hibernate.annotations.common.Version] (MSC service thread 1-1) HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
21:36:49,754 INFO  [org.hibernate.Version] (MSC service thread 1-1) HHH000412: Hibernate Core {4.0.1.Final}
21:36:49,755 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-1) HHH000206: hibernate.properties not found
21:36:49,757 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-1) HHH000021: Bytecode provider name : javassist
21:36:49,778 INFO  [org.hibernate.ejb.Ejb3Configuration] (MSC service thread 1-1) HHH000204: Processing PersistenceUnitInfo [
    name: test
    ...]
21:36:50,083 WARN  [org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator] (MSC service thread 1-1) HHH000181: No appropriate connection provider encountered, assuming application will be supplying connections
21:36:50,103 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.persistenceunit."webapp.war#test": org.jboss.msc.service.StartException in service jboss.persistenceunit."webapp.war#test": Failed to start service
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0]
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: test] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    ... 3 more
Caused by: org.hibernate.HibernateException: Connection cannot be null when 'hibernate.dialect' not set
    at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:97)
    at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:67)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:176)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2270)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2266)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1735)
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:84)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904)
    ... 9 more 
```

编辑：它在 Apache Tomcat 7.0.30 中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T07:59:16.767

我有同样的问题，我的本地数据库已损坏，我的数据库的本地服务器已停止。我不得不重新启动数据库服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T09:32:43.263

也有同样的问题（使用 maven 和 jboss），由于某种原因，eclipse（或其他东西）在一个 maven 项目中生成了一个大部分为空的 persitence.xml。只好删了。

# r - 在R中绘制以下阴影区域

> ID：14094644
> 
> 赞同：1
> 
> 时间：2012-12-30T20:47:29.683
> 
> 标签：r, data-visualization

> **可能重复：**
> [对两点之间的核密度图进行着色。](https://stackoverflow.com/questions/3494593/shading-a-kernel-density-plot-between-two-points)

假设正常的pdf，如何在R中绘制这个图？

![在此处输入图像描述](../Images/4eb3974b1dd81e3d2c97330b74136cff.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T21:02:29.130

[不久前，我在 StackOverflow 上](https://stackoverflow.com/questions/3494593/shading-a-kernel-density-plot-between-two-points/3494767#3494767)回答了一些密切相关的问题。这个问题确实是重复的，应该关闭。通过仔细阅读和研究现有示例，可以回答所有这些*我如何在曲线下着色的问题。*`help(polygon)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-30T21:00:47.550

获取阴影区域的代码如下：

```
plot(dnorm,-4,4,xlab="x",ylab="pdf")
xvals <- seq(-2,1,length=50)
dvals <- dnorm(xvals)
polygon(c(xvals,rev(xvals)),c(rep(0,50),rev(dvals)),col="gray") 
```

结果：

![在此处输入图像描述](../Images/046dd26153985ee1e0a3d5b3f88f9580.png)

# web-services - delphi中的WSDL导入问题

> ID：14094652
> 
> 赞同：3
> 
> 时间：2012-12-30T21:05:54.403
> 
> 标签：web-services, delphi, wsdl, delphi-7, soap-client

我有一个 WSDL 网址： [http ://www.persiansms.info/webservice/smsService.php?wsdl](http://www.persiansms.info/webservice/smsService.php?wsdl)

当我尝试使用 Delphi WSDL Importer 生成接口时，Delphi 会生成此警告：

```
 // ************************************************************************ //
  // The following types, referred to in the WSDL document are not being represented
  // in this file. They are either aliases[@] of other types represented or were referred
  // to but never[!] declared in the document. The types from the latter category
  // typically map to predefined/known XML or Embarcadero types; however, they could also
  // indicate incorrect WSDL documents that failed to declare or import a schema type.
  // ************************************************************************ //
  // !:int             - "http://www.w3.org/2001/XMLSchema"[]
  // !:ArrayOf_xsd_long - "http://www.w3.org/2001/XMLSchema"[]
  // !:string          - "http://www.w3.org/2001/XMLSchema"[]
  // !:array           - "http://www.w3.org/2001/XMLSchema"[] 
```

那么，数组是什么？WSDL 文档从未提及它的类型，例如：

```
<part name="note" type="xsd:array"/> 
```

我很困惑，这是delphi中的错误吗？还是 WSDL 文档不完整？AC# 程序与它配合得很好，但我没有源代码。

那我该怎么办？有可能找出那是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T00:19:04.637

我们可以用这种类型解决这个问题，应该用“Array;”替换 ：

T2dArray = WideString 数组的数组；

也许它可以帮助别人。我正在测试它，它仍然有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T23:49:08.957

我的旧 BDS2006（德语）在生成的代码中添加了注释

```
// ************************************************************************ //
// Die folgenden Typen, auf die im WSDL-Dokument Bezug genommen wird, sind in dieser Datei
// nicht repräsentiert. Sie sind entweder Aliase(@) anderer repräsentierter Typen oder auf sie wurde Bezug genommen,
// aber in diesem Dokument nicht deklariert (!). Die Typen aus letzterer Kategorie
// sind normalerweise mit vordefinierten/bekannten XML- oder Borland-Typen verbunden; sie könnten aber auch ein Anzeichen
// für ein falsches WSDL-Dokument sein, das einen Schema-Typ nicht deklariert oder importiert..
// ************************************************************************ //
// !:string          - "http://www.w3.org/2001/XMLSchema"
// !:array           - "http://www.w3.org/2001/XMLSchema"
// !:int             - "http://www.w3.org/2001/XMLSchema"
// !:ArrayOf_xsd_long - "http://www.w3.org/2001/XMLSchema" 
```

这意味着：在 WSDL 文档中引用的以下类型在其中没有表示（声明？）。它们要么是包含的其他类型的别名 (@)，但未在本文档中声明 (!)。后一类的类型通常与预定义/已知的 XML 或 Borland 类型相关联，但也可以指示未声明或导入模式类型的无效 WSDL 文档。

对不起，异国情调的翻译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T16:58:33.243

问题是由于 WSDL RPC 编码和 Delphi 不支持它（甚至不支持 XE3），如下面的 wsdl 摘录所示：

```
<binding name="sms_webserviceBinding" type="tns:sms_webservicePort">
  <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="send_sms_array"> 
```

它确实适用于 C# 客户端，因为支持 RPC，如下所示：

```
public interface sms_webservicePort {

    [System.ServiceModel.OperationContractAttribute(Action="urn:sms_webservice#sms_webservice#send_sms_array", ReplyAction="*")]
    [System.ServiceModel.XmlSerializerFormatAttribute(Style=System.ServiceModel.OperationFormatStyle.Rpc, SupportFaults=true, Use=System.ServiceModel.OperationFormatUse.Encoded)]
    [return: System.ServiceModel.MessageParameterAttribute(Name="send_sms_array")]
    string send_sms_array(string username, string password, string sender_number, string receiver_number, string note, string ersal_flash, string onlysend, int date); 
```

在使用 NetBeans 7.x 的 Java 中，可以得到更明确的信息：

> 选定的 wsdl 是 rpc 编码的。您必须选择 JAX-RPC 客户端。

# java - 删除存储的数据后如何清除 *.lobs 文件？

> ID：14094654
> 
> 赞同：1
> 
> 时间：2012-12-30T21:05:58.137
> 
> 标签：java, blob, hsqldb

我在支持将图像存储在 hsqldb 中的程序时遇到问题。可以添加和删除图像。但删除 *.lobs 文件后不会减少。所以在同一时间 *.lobs 文件达到相当大的大小。有人知道清理这个文件的任何方法吗？你能给我一个真实的例子吗？或者可能存在另一个没有这个错误的数据库系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:04:56.897

尝试版本 2.3.0 的最新快照 jar。

[http://www.hsqldb.org/repos/org/hsqldb/hsqldb/SNAPSHOT/](http://www.hsqldb.org/repos/org/hsqldb/hsqldb/SNAPSHOT/)

执行 CHECKPIONT 时，*.lobs 文件中的空格可用于新的 lob。如果文件末尾附近有任何空白空间，则文件将被截断。

在检查点之前，不会重复使用任何空间。这是为了在系统崩溃的情况下允许数据恢复。

# ruby-on-rails-3 - 如何在 JRUBY 上为 SSL 配置 PUMA

> ID：14094655
> 
> 赞同：0
> 
> 时间：2012-12-30T21:06:00.237
> 
> 标签：ruby-on-rails-3, jruby, puma

我有一个 jruby rails 应用程序，它可以在没有 SSL 的 Puma 上正常工作。根据 Puma 的 wiki，我必须提供证书文件和密钥文件。我从 GoDaddy 获得了我的证书文件，因为我在 osx 上，所以我使用 Keychain 应用程序从证书中提取了私钥。我正在使用以下命令启动 Puma：

```
bundle exec puma -b 'ssl://0.0.0.0:3000?key=file://Users/me/key.p12&cert=file://Users/me/server.x.ca.crt' -t 3:8 
```

之后，我收到一堆关于重新定义的 SSL 常量的警告，比如这个

```
/Users/me/.rvm/gems/jruby-1.7.1/gems/jruby-openssl-0.8.2/lib/shared/jruby-openssl.rb:16 warning: already initialized constant OPENSSL_VERSION_NUMBER 
```

然后这个消息：

> Puma 1.6.3 开始...
> * 最小线程：3，最大线程：8
> * 环境：开发
> IOError：sun.net.ftp.FtpProtocolException：欢迎消息：
>    在 org/jruby/RubyFile.java:333 处初始化，在 org/ 处
>       打开jruby/RubyIO.java:1179
>       打开在 org/jruby/RubyKernel.java:333
>       读取在 org/jruby/RubyIO.java:3611
>       读取在 org/jruby/RubyIO.java:3708
>       运行在 /Users/me/.rvm/ gems/jruby-1.7.1/gems/puma-1.6.3-java/lib/puma/cli.rb:359
>       每个在 org/jruby/RubyArray.java:1612
>       在 /Users/me/.rvm/gems/ 运行jruby-1.7.1/gems/puma-1.6.3-java/lib/puma/cli.rb:314
>       (root) 在 /Users/me/.rvm/gems/jruby-1.7.1/gems/puma-1.6.3-java/bin/puma:10
>       加载在 org/jruby/RubyKernel.java:1046
>       (root) 在/Users/me/.rvm/gems/jruby-1.7.1/bin/puma:1在 /Users/me/.rvm/gems/jruby-1.7
>       的 org/jruby/RubyKernel.java:1066
>       （根）处进行评估。 1/bin/ruby_noexec_wrapper:14

彪马退出。该应用程序在我的开发机器上运行。我没有使用任何 FTP，所以我对这个错误消息感到困惑。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:18:12.180

Jruby上的 Puma 1.6.x 似乎[不适用于 SSL](http://github.com/puma/puma/issues/127)（请参阅页面底部最后 Evan Phoenix 的评论）。我现在使用 Apache 作为反向代理来处理 Puma 前面的 SSL。

# database-design - 如何跟踪购买的物品？

> ID：14094658
> 
> 赞同：0
> 
> 时间：2012-12-30T21:06:13.457
> 
> 标签：database-design

我想跟踪用户购买特定商品的次数。我的`item`桌子目前看起来像这样：

```
ID  |  NAME  |  USER_ID  |
1   |  bread |  1        |
2   |  milk  |  1        |
3   |  bread |  2        | 
```

跟踪购买的物品的推荐方法是什么？`counter`每次购买商品时，我是否只需添加一列并增加价值？

```
ID  |  NAME  |  USER_ID  |  COUNTER  |
1   |  bread |  1        |  5        |
2   |  milk  |  1        |  1        |
3   |  bread |  2        |  3        | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:20:19.900

我建议在购买更多产品时插入新行，而不是更新产品的计数器。

```
PID  |  NAME  | CREATED_ON
1    |  bread | 05-12-2012 9:45 AM
2    |  milk  | 05-12-2012 11:09 AM

ID  |  PID  |  USER_ID  | CREATED_ON
1   |  1    |   1       | 31-12-2012 10:05 AM
2   |  2    |   1       | 31-12-2012 10:05 AM
3   |  1    |   2       | 31-12-2012 11:05 AM 
```

## 为什么 ？

1.  您始终可以将特定日期（通过过滤器）汇总到获取计数/实施视图以执行相同操作。

2.  在性能和事务方面，最好插入一行而不是更新现有计数。

3.  最后，建议您添加一个 CREATED_ON 列（默认 GETDATE()）作为记录时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:08:46.670

如果您只需要知道计数，那么请务必这样做。一些应用程序可能需要另一个表来列出每个“购买”，例如，能够判断每个项目的购买时间（以防用户多次购买相同的项目）。

那张桌子也不应该被命名`user_item`还是什么？这个名字`item`让我想到了一个表，其中包含每种类型的项目（面包、牛奶）的信息，并且与用户无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T21:18:52.963

我会考虑把它分成两个表：项目和购买

物品：

```
ID  |  NAME  | 
1   |  bread | 
2   |  milk  | 
```

购买：

```
ID  |  ITEM_ID  |  USER_ID  | 
1   |    1      |     1     |
2   |    2      |     1     | 
3   |    1      |     2     | 
```

至于特定用户购买每件商品的数量（查找用户＃1购买的“牛奶”数量）：

```
select count(*) from purchase where USER_ID = 1 and ITEM_ID = 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T21:19:07.377

我会有3张桌子：

```
create table users (
  id number primary key,
  name varchar
)

create table items (
  id number primary key,
  description varchar,
  price double
) 
```

第三张桌子是：

```
create table purchases (
  id number primary key,
  user_id number,
  item_id number,
  date timestamp, 
  foreign key user_id references users(id),
  foreign key item_id references items(id)
) 
```

因此您可以检查用户购买商品的次数

```
select count(*) from purchases where user_id = 123 and item_id = 456; 
```

# jsf - 在 ActionListener 中访问 HttpServletRequest

> ID：14094659
> 
> 赞同：0
> 
> 时间：2012-12-30T21:06:22.700
> 
> 标签：jsf, weblogic, portlet, jsf-1.2

我有`ActionListener`一个 JSF 按钮，如下所示，

```
<h:commandButton id="id1" action="#{Mybean.Submit}" value="Click">
    <f:actionListener binding="#{Mybean.actionListenerImpl}" type="bean.ActionListenerImpl" />
</h:commandButton> 
```

`ActionListener`实现如下，

```
public void processAction(ActionEvent event) throws AbortProcessingException {
    FacesContext fc = FacesContext.getCurrentInstance();
    HttpServletRequest req = (HttpServletRequest)fc.getExternalContext().getRequest();
    PortletBackingContext pbc = PortletBackingContext.getPortletBackingContext(req);
    pbc.fireCustomEvent("test", "test");
} 
```

但这引发了以下异常：

```
java.lang.ClassCastException: com.bea.portlet.container.ActionRequestImpl cannot be cast to javax.servlet.http.HttpServletRequest
    at bean.ActionListenerImpl.processAction(ActionListenerImpl.java:18) 
```

我需要访问以`HttpServletRequest`获取`PortletBackingContext`可以触发自定义事件的对象。

我在 weblogic 10.3.0 中使用 JSF 1.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:12:13.523

我通过访问“javax.servlet.request of ActionRequest.

# debugging - Facebook 为我的网址返回 502 错误，但不是为我的其他网址返回 502 错误？

> ID：14094661
> 
> 赞同：2
> 
> 时间：2012-12-30T21:06:35.477
> 
> 标签：debugging, response, facebook-social-plugins, gateway

您好 Facebook 调试器工具在我的网址上返回 502 错误

> [http://www.tfuhq.com/guides/player/how-to-pick-your-username-for-transformers-universe/](http://www.tfuhq.com/guides/player/how-to-pick-your-username-for-transformers-universe/)

但返回 200 代码：

> [http://www.tfuhq.com/guides/](http://www.tfuhq.com/guides/)

为什么是这样？

# facebook - 只有 iOS 原生 Facebook 登录有效

> ID：14094662
> 
> 赞同：0
> 
> 时间：2012-12-30T21:06:41.587
> 
> 标签：facebook, ios6

我已经在我的 ios 应用程序中实现了 Facebook sdk 3.2。我想用它来识别用户并使用他的基本信息。我的代码基于 SDK 附带的“HelloFacebookSample”。一切似乎都运行良好，直到我注意到登录功能仅适用于 iOS 构建的 fb 帐户管理。当我的设置中没有 FB 帐户时，我的应用程序打开 safari 我登录并批准该应用程序，一切似乎都很好，但是当应用程序返回时，我显示为已注销。我已经用示例对我的应用程序代码进行了三次检查，但找不到差异，所以我想知道问题是否可能出在 fb 网站上的应用程序设置中？

我将不胜感激任何可以为我指明解决方案方向的线索；）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:22:48.867

想通了：D 我的应用程序委托中缺少以下方法

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
return [FBSession.activeSession handleOpenURL:url];
} 
```

# .htaccess - 使用 htaccess 替换 URI 中的文件名

> ID：14094668
> 
> 赞同：0
> 
> 时间：2012-12-30T21:07:59.313
> 
> 标签：.htaccess, mod-rewrite

在我的网站中，主要的 PHP 脚本名为`index.php`. 所有 URI 看起来都与此类似：

> index.php?section=FrontPage&l=ES_LA&view=多个

在[`htaccess`](http://httpd.apache.org/docs/2.2/howto/htaccess.html)文件中并使用[`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)扩展名，我设法删除了`.php`PHP 扩展名，因此 URI 如下所示：

> index?section=FrontPage&l=ES_LA&view=multiple

我现在要做的是在路径中`index.php`替换为。`example`

我试过使用：

```
RewriteRule ^example$ index.php 
```

但是当我尝试访问`example?section=FrontPage&l=ES_LA&view=multiple`服务器时返回[404 Not Found 状态代码](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.5)。

我怎样才能解决这个问题？

# facebook - Facebook 发布到用户的墙上

> ID：14094673
> 
> 赞同：1
> 
> 时间：2012-12-30T21:08:16.553
> 
> 标签：facebook, api, facebook-graph-api

任何有关如何制作内容的指南，当用户使用 Facebook 登录我的网站时，它会自动使用他们的 Facebook 帐户发布状态，例如“John 刚刚加入 mysite.com”，这样他们所有的朋友都会看到。有这样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:18:59.233

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Facebook post</title>
  </head>
  <body onload="publishWallPost('{{ page.slug }}')">
    <script>
    window.fbAsyncInit = function() {
        FB.init({appId: 'Your Super Cool App ID', status: true, cookie: true, xfbml: true});
            };
        (function() {
            var e = document.createElement('script'); e.async = true; e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
        }());
    </script>

    <script>
    <!--
    function publishWallPost(slug) {
        var attachment = {'name':'My Super Cool Website','description':'This is a test of the Facebook Broadcast System.  If this was real, you would be reading something useful.','media':[{'type':'image','src':'http://MySuperCoolWebsite.com/images/facebook_image.png','href':'http://www.MySuperCoolWebsite.com/' + slug + '/'}]};
        FB.ui({
            method: 'stream.publish',
            message: 'I just found this Super Cool Website!',
            attachment: attachment,
            user_message_prompt: 'post this to your wall?'
        });
    }
    //-->
    </script>
  </body>
</html> 
```

# ruby-on-rails - 带有 has_many 的表格（它可以有 N 个）

> ID：14094674
> 
> 赞同：0
> 
> 时间：2012-12-30T21:08:33.727
> 
> 标签：ruby-on-rails, forms, associations

我有这两个模型：

****通过熟练程度**拥有**_many**语言的**用户****

 ****和

****通过熟练程度**拥有**_many**用户的**语言****

 ****当我有一个创建新用户的表单时，我想知道如何让用户在他的注册中添加 N 种语言。因此，以某种方式拥有一个动态表单，让用户可以根据需要添加任意数量的语言。

我怎么能那样做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:40:44.780

您可以使用 cocoon [https://github.com/nathanvda/cocoon](https://github.com/nathanvda/cocoon)或 nested_form [https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)

这些将允许您在用户表单中动态添加和删除语言的字段集。

或者您可以使用 selected - [https://github.com/tsechingho/chosen-rails](https://github.com/tsechingho/chosen-rails) - 提供一个不错的自动完成多选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:13:00.870

观看这三个 Railscast 以深入了解您正在尝试做什么：

[http://railscasts.com/episodes/73-complex-forms-part-1](http://railscasts.com/episodes/73-complex-forms-part-1)

[http://railscasts.com/episodes/74-complex-forms-part-2](http://railscasts.com/episodes/74-complex-forms-part-2)

[http://railscasts.com/episodes/75-complex-forms-part-3](http://railscasts.com/episodes/75-complex-forms-part-3)

他们准确地处理它。********

# c# - 无法从 GitHub 编译 SignalR

> ID：14094682
> 
> 赞同：0
> 
> 时间：2012-12-30T21:09:19.680
> 
> 标签：c#, signalr

我刚刚从[GitHub下载](http://en.wikipedia.org/wiki/GitHub)[了 SignalR](http://www.asp.net/signalr)，因为我想使用[WinRT](http://en.wikipedia.org/wiki/Windows_Runtime)客户端示例，但我无法编译源代码，因为 katana 目录是空的。我该如何解决这个问题并编译项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:59:24.250

阅读自述文件，它描述了如何构建 SignalR。[https://github.com/SignalR/SignalR#building-the-source](https://github.com/SignalR/SignalR#building-the-source)

此外，我们的源代码中没有 WinRT 示例...

# ios - 在 reloadItemsAtIndexPaths 之后避免 UICollectionView 的动画

> ID：14094684
> 
> 赞同：96
> 
> 时间：2012-12-30T21:09:28.217
> 
> 标签：ios, animation, ios6, uiview, uicollectionview

UICollectionView 在调用 reloadItemsAtIndexPaths 之后为项目设置动画（淡入淡出动画）。

有没有办法避免这个动画？

iOS 6

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2014-08-20T11:46:15.990

值得注意的是，如果你的目标是 iOS 7 及以上，你可以使用新`UIView`方法`performWithoutAnimation:`。我怀疑在后台这与此处的其他答案（暂时禁用`UIView`动画/核心动画操作）大致相同，但语法很好而且干净。

所以特别是对于这个问题......

**目标-C：**

```
[UIView performWithoutAnimation:^{
    [self.collectionView reloadItemsAtIndexPaths:indexPaths];
}]; 
```

**迅速：**

```
UIView.performWithoutAnimation {
    self.collectionView.reloadItemsAtIndexPaths(indexPaths)
} 
```

当然，此原则可以应用于您希望确保更改***不***被激活的任何情况。

* * *

## 回答 #2

> 赞同：163
> 
> 时间：2013-02-25T14:07:45.727

你也可以试试这个：

```
UICollectionView *collectionView; 
```

...

```
[UIView setAnimationsEnabled:NO];

[collectionView performBatchUpdates:^{
    [collectionView reloadItemsAtIndexPaths:indexPaths];
} completion:^(BOOL finished) {
    [UIView setAnimationsEnabled:YES];
}]; 
```

## 编辑：

我还发现，如果包装`performBatchUpdates`在 UIView 动画块中，则使用 UIView 动画而不是默认动画，因此您可以将动画持续时间设置为 0，如下所示：

```
[UIView animateWithDuration:0 animations:^{
    [collectionView performBatchUpdates:^{
        [collectionView reloadItemsAtIndexPaths:indexPaths];
    } completion:nil];
}]; 
```

如果您想在插入和删除期间使用 iOS 7 弹性动画，这将非常酷！

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2018-02-09T03:07:49.710

> UICollectionView 在调用 reloadItemsAtIndexPaths 之后为项目设置动画（淡入淡出动画）。
> 
> 有没有办法避免这个动画？
> 
> iOS 6

我假设您使用的是 FlowLayout。由于您试图摆脱淡入淡出动画，请尝试以下操作：

```
import UIKit

class NoFadeFlowLayout: UICollectionViewFlowLayout {

    override func initialLayoutAttributesForAppearingItem(at itemIndexPath: IndexPath) -> UICollectionViewLayoutAttributes? {
        let attrs = super.initialLayoutAttributesForAppearingItem(at: itemIndexPath)
        attrs?.alpha = 1.0
        return attrs
    }

    override func finalLayoutAttributesForDisappearingItem(at itemIndexPath: IndexPath) -> UICollectionViewLayoutAttributes? {
        let attrs = super.finalLayoutAttributesForDisappearingItem(at: itemIndexPath)
        attrs?.alpha = 1.0
        return attrs
    }

} 
```

这是一个非常古老的问题，因此您可能不再针对 iOS 6。我亲自在 tvOS 11 上工作并且有同样的问题，所以这里是为任何遇到同样问题的人准备的。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-19T10:56:37.333

我[在 UICollectionView 上写了一个类别](https://gist.github.com/4571986)来做到这一点。诀窍是在重新加载时禁用所有动画：

```
if (!animated) {
    [CATransaction begin];
    [CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];
}

[self reloadItemsAtIndexPaths:indexPaths];

if (!animated) {
    [CATransaction commit];
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-01-03T07:02:35.857

```
extension UICollectionView {
    func reloadWithoutAnimation(){
        CATransaction.begin()
        CATransaction.setValue(kCFBooleanTrue, forKey: kCATransactionDisableActions)
        self.reloadData()
        CATransaction.commit()
    }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-05-31T09:46:08.260

这是一个`performBatchUpdates`没有动画的 Swift 3 版本`UICollectionView`。我发现这对我来说更有效，`collectionView.reloadData()`因为它减少了插入记录时的单元格交换。

```
func appendCollectionView(numberOfItems count: Int){

        // calculate indexes for the items to be added
        let firstIndex = dataItems.count - count
        let lastIndex = dataItems.count - 1

        var indexPaths = [IndexPath]()
        for index in firstIndex...lastIndex {
            let indexPath = IndexPath(item: index, section: 0)
            indexPaths.append(indexPath)
        }

   UIView.performWithoutAnimation {

        self.collectionView.performBatchUpdates({ () -> Void in
            self.collectionView.insertItems(at: indexPaths)
        }, completion: { (finished) -> Void in

        })
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-25T16:54:33.213

```
- (void)reloadCollectionViewAnimated:(BOOL)animated  {

    if (animated) {
        [self.collectionView performBatchUpdates:^{
            [self.collectionView reloadSections:[NSIndexSet indexSetWithIndex:0]];
        } completion:^(BOOL finished) {

        }];
    } else {
        [CATransaction begin];
        [CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];
        [self.collectionView reloadSections:[NSIndexSet indexSetWithIndex:0]];
        [CATransaction commit];
    }

} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-06-08T01:56:42.757

只是为了增加我的 0.02 美元，我尝试了所选答案的两个版本，并且原始方式更适合我的目的。我正在开发一个无限滚动日历视图，它允许用户在给定的一周输入日历，然后来回滑动并选择单独的日子来过滤列表。

在我的实现中，为了在旧设备上保持性能，代表日历视图的日期数组必须保持相对较小，这意味着保留大约 5 周的日期，用户在第 3 周的中间。使用第二种方法的问题是，在第二步中，您必须在没有动画的情况下将集合视图滚动回中间，这使得由于某种原因而被阻塞的基本动画呈现出非常锯齿状的外观。

我的代码：

```
[UIView setAnimationsEnabled:NO];
[self.collectionView performBatchUpdates:^{
    [self.collectionView deleteItemsAtIndexPaths:indexPathDeleteArray];
    [self.collectionView insertItemsAtIndexPaths:indexPathAddArray];

} completion:NULL];
[UIView setAnimationsEnabled:YES];

NSIndexPath *newIndexPath = [NSIndexPath indexPathForItem:14 inSection:0];
[self.collectionView scrollToItemAtIndexPath:newIndexPath atScrollPosition:UICollectionViewScrollPositionLeft animated:NO]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-22T13:58:39.377

```
 func reloadRowsWithoutAnimation(at indexPaths: [IndexPath]) {
        let contentOffset = collectionView.contentOffset
        UIView.setAnimationsEnabled(false)
        collectionView.performBatchUpdates {
            collectionView.reloadItems(at: indexPaths)
        }
        UIView.setAnimationsEnabled(true)
        collectionView.setContentOffset(contentOffset, animated: false)
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-20T18:37:54.337

而不是使用`reloadData()`以下尝试重新加载所有可见单元格而不使用动画。

```
self.collectionView.reloadItems(at: self.collectionView.indexPathsForVisibleItems) 
```

# ios - iOS - int (unsigned int) 最大值为2147483647，unsigned int 不起作用？

> ID：14094686
> 
> 赞同：6
> 
> 时间：2012-12-30T21:09:31.947
> 
> 标签：ios, integer, int, unsigned

32 位整数的最大值为：2^31-1 = 2147483647。但只有负数和正数。因为数字的一半是负数。所以真正的最大值是 2^32-1 = 4294967295。但在这种情况下，我们只使用正数。

好的，正常的 int 既是负数又是正数。我只想使用正数，因为我希望最大值为：4294967295。我将使用“unsigned int”而不是“int”

但这行不通！最大值仍然是 2147483647。

这是一个简单的随机数生成器的代码：

```
-(Action for my button) {

unsigned int minNumber;

unsigned int maxNumber;

unsigned int ranNumber;

minNumber=[self.textFieldFrom.text intValue]; //getting numbers from my textfields
maxNumber=[self.textFieldTo.text intValue]; //Should i use unsigned intValue?

ranNumber=rand()%(maxNumber-minNumber+1)+minNumber;

NSString *str = [NSString stringWithFormat:@"%d", ranNumber];

self.label.text = str;

} 
```

这会将 : 2147483647 视为最大值。

怎么了？当我从我的文本字段中获取数字时，我应该使用 unsigned intValue 吗？

乔纳森

* * *

在这里您可以阅读有关此号码的信息。：[http ://en.wikipedia.org/wiki/2147483647](http://en.wikipedia.org/wiki/2147483647)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T21:36:20.747

问题是`intValue`它返回 a `int`（不是`unsigned int`）并在 2,147,483,647 处达到最大值。如果您需要大于`INT32_MAX`，则使用`long`变量和`NSString`方法`longLongValue`而不是`intValue`。

是的，`%d`已签名，但如果您使用`%u`它并不能解决`intValue`. 使用`long long`变量和`longlongValue`方法将解决这个问题。例如：

```
NSString *string = @"2147483650";

unsigned int i = [string intValue];
NSLog(@"i = %u", i); // returns 2147483647

NSUInteger j = [string integerValue];
NSLog(@"j = %u", j); // returns 2147483647

long long k = [string longLongValue];
NSLog(@"k = %lld", k); // returns 2147483650 
```

* * *

因此，查看您的原始代码，可能是：

```
long long minNumber;

long long maxNumber;

long long ranNumber;

minNumber = [self.textFieldFrom.text longLongValue];
maxNumber = [self.textFieldTo.text longLongValue];

ranNumber = arc4random_uniform(maxNumber-minNumber+1) + minNumber;

NSString *str = [NSString stringWithFormat:@"%lld", ranNumber];

self.label.text = str; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-30T21:21:27.180

%d 修饰符被解析为有符号整数。

# objective-c - 如何复制已创建的窗口？

> ID：14094687
> 
> 赞同：0
> 
> 时间：2012-12-30T21:10:15.057
> 
> 标签：objective-c, xcode, macos, interface-builder

所以我正在为 OS X 制作一个 xcode 应用程序，到目前为止一切进展顺利。但是，现在我遇到了障碍。我的应用程序主要是一个窗口，我需要多次创建该窗口，就像 Safari、TextEdit 等应用程序以及所有这些应用程序都具有“文件”>“新建”功能一样。我是 Xcode 的新手，我想知道是否有一种简单的方法（希望是 3-4 行代码）来做到这一点。如果有人可以向我解释，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:32:51.290

启动一个新的 OS X 项目并选择 "Create Document Based Application" 。这将创建一个`NSDocument`子类。

如果您想使用 Core Data ，也请选择它。这将创建一个`NSPersistentDocument`子类。

![新项目设置](../Images/228a496391e3bbbcc91d736d52f795c6.png)

这将为您提供应用程序的基础以及您要求的所有功能。

查看[基于文档的应用程序编程指南](https://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011179 "基于文档的应用程序编程指南")和[NSPersistentDocument 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSPersistentDocument_Class/Reference/Reference.html)

无论您做什么，都不要尝试自己烘烤。那里有疯狂。

项目模板`info.plist`正确设置以使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:41:12.133

不管我告诉你什么，不幸的是，它不会只涉及“3-4 行代码”。

如果您使用的是非基于文档的应用程序，您将需要考虑创建一个窗口的代码。如果您没有使用与窗口一致的窗口控制器，则应该实现一个。然后你可以实现一个动作来创建你的窗口控制器的一个新实例，从而创建一个新窗口。当然，如果您有兴趣将与窗口相关的信息保存到文件中，则需要添加更多的基础设施。

这使我想到了您的另一个选择，即创建一个基于文档的应用程序。这里最大的优势是，如果您有兴趣将窗口内容保存到文件中，则提供了执行此操作的基础设施。这在一定程度上涉及重新开始，但是由于您已经让应用程序的胆量工作，您只需将这些胆量转移到为您提供的文档子类中。您还需要向项目提供描述文档类型的元信息，包括描述它的文件扩展名。

在您的努力中向您致以最良好的祝愿。

# ios - UITapGestureRecognizer 以编程方式在我的视图中触发点击

> ID：14094691
> 
> 赞同：21
> 
> 时间：2012-12-30T21:11:03.337
> 
> 标签：ios, uigesturerecognizer

**编辑：更新以使问题更明显**

**编辑 2：使问题更准确地解决了我的实际问题。如果他们在屏幕上的文本字段中点击任何地方，我实际上希望采取行动。因此，我不能简单地监听文本字段中的事件，我需要知道它们是否点击了视图中的*任何位置。***

我正在编写单元测试，以断言当手势识别器识别出*我的视图特定坐标内*的点击时会采取特定操作。我想知道我是否可以以编程方式创建将由 UITapGestureRecognizer 处理的触摸（在特定坐标处）。 **我试图在单元测试期间模拟用户交互。**

UITapGestureRecognizer 在 Interface Builder 中配置

```
//MYUIViewControllerSubclass.m

-(IBAction)viewTapped:(UITapGestureRecognizer*)gesture {
  CGPoint tapPoint = [gesture locationInView:self.view];
  if (!CGRectContainsPoint(self.textField, tapPoint)) {
    // Do stuff if they tapped anywhere outside the text field
  }
}

//MYUIViewControllerSubclassTests.m
//What I'm trying to accomplish in my unit test:

-(void)testThatTappingInNoteworthyAreaTriggersStuff {
  // Create fake gesture recognizer and ViewController
  MYUIViewControllerSubclass *vc = [[MYUIViewControllersSubclass alloc] init];
  UITapGestureRecognizer *tgr = [[UITapGestureRecognizer initWithView: vc.view];

  // What I want to do:
  [[ Simulate A Tap anywhere outside vc.textField ]]
  [[  Assert that "Stuff" occured ]]
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T22:44:26.237

我认为您在这里有多种选择：

1.  可能最简单的方法是将 a 发送`push event action`到您的视图，但我认为这不是您真正想要的，因为您希望能够选择点击动作发生的位置。

    > [yourView sendActionsForControlEvents: UIControlEventTouchUpInside];

2.  您可以使用`UI automation tool`XCode 工具提供的那个。这个[博客](http://blog.manbolo.com/2012/04/08/ios-automated-tests-with-uiautomation)很好地解释了如何使用脚本自动化你的 UI 测试。

3.  也有这个[解决方案](http://www.cocoawithlove.com/2008/10/synthesizing-touch-event-on-iphone.html)解释了如何在 iPhone 上合成触摸事件，但要确保你只将它们用于单元测试。这对我来说听起来更像是一种技巧，如果前两点不能满足您的需求，我会将此解决方案视为最后的手段。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-03-10T16:00:48.793

有一种更简单的方法可以在单元测试中使用单行触发 UITapGestureRecognizer 的触摸。假设您有一个包含对点击手势识别器的引用的 var，您所需要的只是以下内容：

```
singleTapGestureRecognizer?.state = .ended 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T22:58:36.380

在（iTunes-）合法路径上，您尝试做的事情非常困难（但并非完全不可能）。

* * *

让我先草拟*正确*的方法；

这样做的正确方法是使用 UIAutomation。UIAutomation 完全符合您的要求，它模拟各种测试的用户行为。

* * *

现在很难;

您的问题归结为实例化一个新的 UIEvent。(Un) 幸运的是，由于明显的安全原因，UIKit 没有为此类事件提供任何构造函数。但是，过去确实有一些解决方法，但不确定它们是否仍然有效。

看看 Matt Galagher 的精彩博客，它起草了一个[关于如何合成触摸事件的解决方案](http://www.cocoawithlove.com/2008/10/synthesizing-touch-event-on-iphone.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-11T21:56:36.860

如果在测试中使用，您可以使用名为[SpecTools](https://github.com/manGoweb/SpecTools)的测试库来帮助解决所有这些问题，或者直接使用它的代码：

```
// Return type alias
public typealias TargetActionInfo = [(target: AnyObject, action: Selector)]

// UIGestureRecognizer extension
extension  UIGestureRecognizer {

    // MARK: Retrieving targets from gesture recognizers

    /// Returns all actions and selectors for a gesture recognizer
    /// This method uses private API's and will most likely cause your app to be rejected if used outside of your test target
    /// - Returns: [(target: AnyObject, action: Selector)] Array of action/selector tuples
    public func getTargetInfo() -> TargetActionInfo {
        var targetsInfo: TargetActionInfo = []

        if let targets = self.value(forKeyPath: "_targets") as? [NSObject] {
            for target in targets {
                // Getting selector by parsing the description string of a UIGestureRecognizerTarget
                let selectorString = String.init(describing: target).components(separatedBy: ", ").first!.replacingOccurrences(of: "(action=", with: "")
                let selector = NSSelectorFromString(selectorString)

                // Getting target from iVars
                let targetActionPairClass: AnyClass = NSClassFromString("UIGestureRecognizerTarget")!
                let targetIvar: Ivar = class_getInstanceVariable(targetActionPairClass, "_target")
                let targetObject: AnyObject = object_getIvar(target, targetIvar) as! AnyObject

                targetsInfo.append((target: targetObject, action: selector))
            }
        }

        return targetsInfo
    }

    /// Executes all targets on a gesture recognizer
    public func execute() {
        let targetsInfo = self.getTargetInfo()
        for info in targetsInfo {
            info.target.performSelector(onMainThread: info.action, with: nil, waitUntilDone: true)
        }
    }

} 
```

库和代码片段都使用私有 API，如果在测试套件之外使用，可能会导致拒绝......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-11-23T22:30:22.963

@Ondrej 的回答已更新为 Swift 4：

```
// Return type alias
typealias TargetActionInfo = [(target: AnyObject, action: Selector)]

// UIGestureRecognizer extension
extension  UIGestureRecognizer {

    // MARK: Retrieving targets from gesture recognizers

    /// Returns all actions and selectors for a gesture recognizer
    /// This method uses private API's and will most likely cause your app to be rejected if used outside of your test target
    /// - Returns: [(target: AnyObject, action: Selector)] Array of action/selector tuples
    func getTargetInfo() -> TargetActionInfo {
        guard let targets = value(forKeyPath: "_targets") as? [NSObject] else {
            return []
        }
        var targetsInfo: TargetActionInfo = []
        for target in targets {
            // Getting selector by parsing the description string of a UIGestureRecognizerTarget
            let description = String(describing: target).trimmingCharacters(in: CharacterSet(charactersIn: "()"))
            var selectorString = description.components(separatedBy: ", ").first ?? ""
            selectorString = selectorString.components(separatedBy: "=").last ?? ""
            let selector = NSSelectorFromString(selectorString)

            // Getting target from iVars
            if let targetActionPairClass = NSClassFromString("UIGestureRecognizerTarget"),
                let targetIvar = class_getInstanceVariable(targetActionPairClass, "_target"),
                let targetObject = object_getIvar(target, targetIvar) {
                targetsInfo.append((target: targetObject as AnyObject, action: selector))
            }
        }

        return targetsInfo
    }

    /// Executes all targets on a gesture recognizer
    func sendActions() {
        let targetsInfo = getTargetInfo()
        for info in targetsInfo {
            info.target.performSelector(onMainThread: info.action, with: self, waitUntilDone: true)
        }
    }

} 
```

用法：

```
struct Automator {

    static func tap(view: UIView) {
        let grs = view.gestureRecognizers?.compactMap { $0 as? UITapGestureRecognizer } ?? []
        grs.forEach { $0.sendActions() }
    }
}

let myView = ... // View under UI Logic Test
Automator.tap(view: myView) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-13T04:39:46.867

我遇到了同样的问题，试图模拟对表格单元格的点击以自动测试处理点击表格的视图控制器。

控制器有一个私有的 UITapGestureRecognizer 创建如下：

```
gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self
  action:@selector(didRecognizeTapOnTableView)]; 
```

单元测试应该模拟触摸，以便手势识别器会触发动作，因为它源自用户交互。

建议的解决方案在这种情况下都不起作用，所以我解决了它装饰 UITapGestureRecognizer，伪造控制器调用的确切方法。因此，我添加了一个“performTap”方法，该方法以控制器本身不知道该动作来自何处的方式调用该动作。这样，我可以为控制器制作一个独立于手势识别器的测试单元，只需要触发的动作。

这是我的类别，希望对某人有所帮助。

```
CGPoint mockTappedPoint;
UIView *mockTappedView = nil;
id mockTarget = nil;
SEL mockAction;

@implementation UITapGestureRecognizer (MockedGesture)
-(id)initWithTarget:(id)target action:(SEL)action {
    mockTarget = target;
    mockAction =  action;
    return [super initWithTarget:target action:action];
    // code above calls UIGestureRecognizer init..., but it doesn't matters
}
-(UIView *)view {
    return mockTappedView;
}
-(CGPoint)locationInView:(UIView *)view {
    return [view convertPoint:mockTappedPoint fromView:mockTappedView];
}
-(UIGestureRecognizerState)state {
    return UIGestureRecognizerStateEnded;
}
-(void)performTapWithView:(UIView *)view andPoint:(CGPoint)point {
    mockTappedView = view;
    mockTappedPoint = point;
    [mockTarget performSelector:mockAction];
}

@end 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-05-09T22:10:04.163

好的，我已将上述内容转换为有效的类别。

有趣的位：

*   类别不能添加成员变量。你添加的任何东西都会变成静态的类，因此会被 Apple 的许多 UITapGestureRecognizers 破坏。
    *   因此，使用 associated_object 来实现魔法。
    *   NSValue 用于存储非对象
*   苹果的`init`方法包含重要的配置逻辑；我们可以猜测设置了什么（点击次数，触摸次数，还有什么？
    *   但这是注定的。因此，我们在保留模拟的 init 方法中进行调配。

头文件很简单；这是实现。

```
#import "UITapGestureRecognizer+Spec.h"
#import "objc/runtime.h"

/*
 * With great contributions from Matt Gallagher (http://www.cocoawithlove.com/2008/10/synthesizing-touch-event-on-iphone.html)
 * And Glauco Aquino (http://stackoverflow.com/users/2276639/glauco-aquino)
 * And Codeshaker (http://codeshaker.blogspot.com/2012/01/calling-original-overridden-method-from.html)
 */
@interface UITapGestureRecognizer (SpecPrivate)

@property (strong, nonatomic, readwrite) UIView *mockTappedView_;
@property (assign, nonatomic, readwrite) CGPoint mockTappedPoint_;
@property (strong, nonatomic, readwrite) id mockTarget_;
@property (assign, nonatomic, readwrite) SEL mockAction_;

@end

NSString const *MockTappedViewKey = @"MockTappedViewKey";
NSString const *MockTappedPointKey = @"MockTappedPointKey";
NSString const *MockTargetKey = @"MockTargetKey";
NSString const *MockActionKey = @"MockActionKey";

@implementation UITapGestureRecognizer (Spec)

// It is necessary to call the original init method; super does not set appropriate variables.
// (eg, number of taps, number of touches, gods know what else)
// Swizzle our own method into its place. Note that Apple misspells 'swizzle' as 'exchangeImplementation'.
+(void)load {
    method_exchangeImplementations(class_getInstanceMethod(self, @selector(initWithTarget:action:)),
                                   class_getInstanceMethod(self, @selector(initWithMockTarget:mockAction:)));
}

-(id)initWithMockTarget:(id)target mockAction:(SEL)action {
    self = [self initWithMockTarget:target mockAction:action];
    self.mockTarget_ = target;
    self.mockAction_ = action;
    self.mockTappedView_ = nil;
    return self;
}

-(UIView *)view {
    return self.mockTappedView_;
}

-(CGPoint)locationInView:(UIView *)view {
    return [view convertPoint:self.mockTappedPoint_ fromView:self.mockTappedView_];
}

//-(UIGestureRecognizerState)state {
//    return UIGestureRecognizerStateEnded;
//}

-(void)performTapWithView:(UIView *)view andPoint:(CGPoint)point {
    self.mockTappedView_ = view;
    self.mockTappedPoint_ = point;

// warning because a leak is possible because the compiler can't tell whether this method
// adheres to standard naming conventions and make the right behavioral decision. Suppress it.
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    [self.mockTarget_ performSelector:self.mockAction_];
#pragma clang diagnostic pop

}

# pragma mark - Who says we can't add members in a category?

- (void)setMockTappedView_:(UIView *)mockTappedView {
    objc_setAssociatedObject(self, &MockTappedViewKey, mockTappedView, OBJC_ASSOCIATION_ASSIGN);
}

-(UIView *)mockTappedView_ {
    return objc_getAssociatedObject(self, &MockTappedViewKey);
}

- (void)setMockTappedPoint_:(CGPoint)mockTappedPoint {
    objc_setAssociatedObject(self, &MockTappedPointKey, [NSValue value:&mockTappedPoint withObjCType:@encode(CGPoint)], OBJC_ASSOCIATION_COPY);
}

- (CGPoint)mockTappedPoint_ {
    NSValue *value = objc_getAssociatedObject(self, &MockTappedPointKey);
    CGPoint aPoint;
    [value getValue:&aPoint];
    return aPoint;
}

- (void)setMockTarget_:(id)mockTarget {
    objc_setAssociatedObject(self, &MockTargetKey, mockTarget, OBJC_ASSOCIATION_ASSIGN);
}

- (id)mockTarget_ {
    return objc_getAssociatedObject(self, &MockTargetKey);
}

- (void)setMockAction_:(SEL)mockAction {
    objc_setAssociatedObject(self, &MockActionKey, NSStringFromSelector(mockAction), OBJC_ASSOCIATION_COPY);
}

- (SEL)mockAction_ {
    NSString *selectorString = objc_getAssociatedObject(self, &MockActionKey);
    return NSSelectorFromString(selectorString);
}

@end 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-11-21T23:00:52.273

```
CGPoint tapPoint = [gesture locationInView:self.view]; 
```

应该

```
CGPoint tapPoint = [gesture locationInView:gesture.view]; 
```

因为应该从手势目标的确切位置检索 cgpoint，而不是试图猜测它在视图中的位置

# sqlite - SQLite。按特定顺序更新主键的值

> ID：14094693
> 
> 赞同：0
> 
> 时间：2012-12-30T21:11:09.127
> 
> 标签：sqlite, sql-order-by, sql-update, primary-key, between

我有下表：

```
CREATE TABLE dataTable(
    ParentID INTEGER,
    MyIndex INTEGER,
    // other stuff
    PRIMARY KEY (ParentID, MyIndex )
); 
```

尝试减少特定范围内的值的“MyIndex”列的值。为此，我认为有以下声明：

```
UPDATE dataTable 
SET MyIndex = (MyIndex - ?)
WHERE ((ParentID = ?) AND (MyIndex BETWEEN ? AND ?)) 
```

虽然我认为如果首先减少具有较高“MyIndex”值的项目可能会与尚未减少的项目重叠，这可能会带来问题。因此，例如，如果值为 (5, 4, 3) 并减 1，则当 5 变为 4 时，可能存在主键违规。但如果这些值按 3、4、5 顺序修改，那将不是问题。

所以我试图改用以下语句：

```
UPDATE dataTable 
SET MyIndex = (MyIndex - ?)
WHERE ((ParentID = ?) AND (MyIndex BETWEEN ? AND ?)) 
ORDER BY MyIndex ASC 
```

但是我收到了这个错误：“靠近“ORDER”：语法错误”。ORDER BY 有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:16:48.767

您的第一个查询将正常工作，因为直到更新结束才强制执行约束完整性。 UPDATE 语句不支持 ORDER BY。

# javascript - 如何在 JavaScript 中以各种可能的方式动态创建新的 div、更改它、移动它、修改它？

> ID：14094697
> 
> 赞同：87
> 
> 时间：2012-12-30T21:11:23.147
> 
> 标签：javascript, dom

我想在页面加载时创建新的 div。这些 div 将显示为一个有序组，该组会根据 JSON 文件中的外部数据而变化。我需要使用 for 循环来执行此操作，因为需要 100 多个 div。

因此，我需要能够更改每个创建的 div 的高度、宽度、顶部/左侧等。然而，`document.getElementById("created_div").style.whatever`什么也没做，我什至看不到一个新的 div 出现。我已将新 div 的高度/宽度设置为 500 像素，将背景设置为“红色”等，但肯定不会出现新的 div。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：444
> 
> 时间：2012-12-30T21:54:11.800

*   [创建](https://developer.mozilla.org/en-US/docs/DOM/document.createElement) `var div = document.createElement('div');`
*   [添加](https://developer.mozilla.org/en-US/docs/DOM/node.appendChild) `document.body.appendChild(div);`
*   [样式操作](https://developer.mozilla.org/en-US/docs/DOM/element.style)
    *   定位`div.style.left = '32px';` `div.style.top = '-16px';`
    *   [课程](https://developer.mozilla.org/en-US/docs/DOM/element.className) `div.className = 'ui-modal';`
*   修改
    *   [ID](https://developer.mozilla.org/en-US/docs/DOM/element.id) `div.id = 'test';`
    *   [内容（使用 HTML）](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML) `div.innerHTML = '<span class="msg">Hello world.</span>';`
    *   [内容（使用文本）](https://developer.mozilla.org/en-US/docs/DOM/node.textContent) `div.textContent = 'Hello world.';`
*   [移动](https://developer.mozilla.org/en-US/docs/DOM/node.removeChild) `div.parentNode.removeChild(div);`
*   访问
    *   [按身份证](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById) `div = document.getElementById('test');`
    *   [按标签](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName) `array = document.getElementsByTagName('div');`
    *   [按班级](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName) `array = document.getElementsByClassName('ui-modal');`
    *   [通过 CSS 选择器（单个）](https://developer.mozilla.org/en-US/docs/DOM/document.querySelector) `div = document.querySelector('div #test .ui-modal');`
    *   [通过 CSS 选择器（多）](https://developer.mozilla.org/en-US/docs/DOM/document.querySelectorAll) `array = document.querySelectorAll('div');`
*   关系（包括文本节点）
    *   [孩子们](https://developer.mozilla.org/en-US/docs/DOM/node.childNodes) `node = div.childNodes[i];`
    *   [兄弟](https://developer.mozilla.org/en-US/docs/DOM/node.nextSibling) `node = div.nextSibling;`
*   关系（仅限 HTML 元素）
    *   [孩子们](https://developer.mozilla.org/en-US/docs/DOM/element.children) `element = div.children[i];`
    *   [兄弟](https://developer.mozilla.org/en-US/docs/DOM/element.nextElementSibling) `element = div.nextElementSibling;`

这涵盖了 DOM 操作的基础知识。请记住，要使新创建的节点在文档中可见，需要将元素添加到正文或包含正文的节点。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-30T21:21:12.537

你试过[jQuery](http://api.jquery.com/)吗？香草 javascript 可能很难。尝试使用这个：

```
$('.container-element').add('<div>Insert Div Content</div>'); 
```

`.container-element`是一个 JQuery 选择器，它使用“容器元素”类标记元素（大概是您要插入 div 的父元素）。然后该`add()`函数将 HTML 插入到容器元素中。

# objective-c - NSMutableArrays 为空

> ID：14094701
> 
> 赞同：1
> 
> 时间：2012-12-30T21:11:51.773
> 
> 标签：objective-c, xcode, cocoa, nsmutablearray, nsviewcontroller

我有一个 NSViewController 子类：

```
@property (retain) NSMutableArray* entities;
@property (retain) NSMutableArray* tiles; 
```

在我的`-init`方法中，两个数组都是用创建的`+new`，并且每个都被赋予一个对象。之后，我打电话给`NSLog(@"%@, %@", entities, tiles);`，它给了我预期的结果：

```
2012-12-30 15:07:04.160 Project Land III[2177:303] (
"<RBEntity: 0x100508170>"
), (
"<RBTile: 0x100508470>"
) 
```

不过，我可以单击视图上的一个按钮，该按钮调用相同的日志函数，它会输出以下内容：

```
2012-12-30 15:07:06.071 Project Land III[2177:303] (null), (null) 
```

几天来，我一直以某种形式被困在这个问题上。为什么世界上的数组是空的？

我很高兴发布更多代码，请告诉我！

界面：

```
#import <Cocoa/Cocoa.h>
#import "RBEntity.h"
#import "RBTile.h"

@interface RBMainViewController : NSViewController {
    NSMutableArray* _entities;
    NSMutableArray* _tiles;
}

@property (retain) NSMutableArray* entities;
@property (retain) NSMutableArray* tiles;

- (IBAction)log:(id)sender;

@end 
```

我的`-init`方法：

```
- (id)init {
    self = [super init];
    self.entities = [NSMutableArray new];
    self.tiles = [NSMutableArray new];
    [self.entities addObject:[RBEntity entityWithLocation:NSMakePoint(4, 5) type:FACEEATER]];
    [self.tiles addObject:[RBTile tileWithLocation:NSMakePoint(10, 2) type:GRASS]];
    NSLog(@"%@, %@", self.entities, self.tiles);
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T02:39:57.490

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:28:12.183

为这些属性之一编写自定义 getter/setter，并在此处放置一个断点以查看谁在重置该值。如果这没有解决问题，并且您的属性仍在重置，则您可能正在从您`NSViewController`尚未初始化的实例访问它们`init`的实例访问它们，因此这些属性始终未初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T21:14:44.673

我相信您将需要在课堂上使用`self.entites`和`self.tiles`处理这些对象。

**编辑（添加界面后）**

你需要在你的界面中有一些东西，比如：

```
@interface RBMainViewController : NSViewController{
    NSMutableArray* _entities;
    NSMutableArray* _tiles;
}

@property (retain) NSMutableArray* entities;
@property (retain) NSMutableArray* tiles;

- (IBAction)log:(id)sender;

@end 
```

然后您需要将其添加到实现中：

```
@synthesize entities = _entities;
@synthesize tiles = _tiles; 
```

# afnetworking - 在 AFIncrementalStore 中保存对象时出错。ResponseObject 是一个 NSArray 而不是 NSDictionary 尽管 JSON 响应有效

> ID：14094702
> 
> 赞同：0
> 
> 时间：2012-12-30T21:11:58.443
> 
> 标签：afnetworking, afincrementalstore

全部，

最近两天我正在尝试解决一个问题，但似乎无能为力。如果要求显而易见，请提前道歉。

在一个非常简单的数据模型中，我尝试插入一个新的对象用户。（属性：name、password 和 id 分别是一个 NSString、一个 NSString 和一个 NSNumber）。新对象在 API 和外部 MySQL 服务器中成功创建。但是，在 HTTPrequest 的完成块中，当（我认为）填充后备存储时，它会尝试创建资源标识符。

这是应用程序在尝试从表示字典中获取 allKeys 时在此方法中崩溃的原因：

(NSString *)resourceIdentifierForRepresentation:(NSDictionary *)representation ofEntity:(NSEntityDescription *)entity fromResponse:(NSHTTPURLResponse *)response 从服务器返回的 JSON 响应如下：

[{"id":20,"name":"john doe","password":"secret"}]

任何人的线索？如果我今年能解决这个问题，将不胜感激！！！

旁注：马特干得好！

附带问题：当连接恢复时，AFIS 将如何处理本地存储、本地更改以及与服务器的同步？

全部，

在此先感谢并享受 2013 年！！！

[更新]

问题是我得到了一个 NSArray 而不是 NSDictionary。我可以通过更改 AFIS savecontext 中的代码以传递 responseObject[0] 来简单地修复它，但是我不想更改 AFIS 代码，而且我仍然觉得奇怪的是，当我有一个有效的 JSON 响应时我没有得到一个 NSDictionary

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T09:02:30.570

您可以覆盖 AFIS 用于从 json 数据中获取结果对象的方法。

```
- (id)representationOrArrayOfRepresentationsOfEntity:(NSEntityDescription*)entity
                              fromResponseObject:(id)responseObject 
```

响应对象应该是索引为 0 的字典数组。

# c# - 隐式运算符在转换为自定义类型时出错

> ID：14094703
> 
> 赞同：0
> 
> 时间：2012-12-30T21:12:04.637
> 
> 标签：c#, implicit-conversion

当我尝试将返回类型转换为对象或我自己定义的一种自定义类型时，为什么隐式运算符会出现问题？

当我尝试转换并返回像这样的简单类型时，我没有问题`int`，就像这样

```
public static implicit operator int(MyClass a)
        {
            return 123;
        } 
```

但是，当我尝试将类型转换为对象或自定义类型时，会出现错误。例如，如果我有这样的事情，我会得到一个编译时错误，说“*用户定义的转换为 System.Object ”：*

```
public static implicit operator object(MyClass a)
{
   return new {};
} 
```

如果我有这个，我会得到同样的错误：

```
public static implicit operator CustomTestObject(MyClass a)
{
   return new CustomTestObject();
} 
```

使用隐式运算符时，如何将其转换为我自己的自定义类型以返回？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T21:13:49.363

您不能声明到您自己的基类之一的隐式转换。`System.Object`始终是您的（直接或间接）基类。通过继承，已经有到基类的隐式转换。那么怎么会有*两个*隐式转换呢？C# 规范有一个很好的理由来禁止这一点！

# wpf - wpf 数据网格度假村错误

> ID：14094706
> 
> 赞同：0
> 
> 时间：2012-12-30T21:12:23.203
> 
> 标签：wpf, datagrid, collectionview

我现在被困在这里 3 周了，我快死了 :-)

当我刷新我的收藏时，SortDescription 不起作用。这是我在互联网上阅读的 wpf 中的一个已知错误。

但我似乎无法让它工作......我的经验似乎并不那么远:-)有人可以帮助我并告诉我如何重新排序我的数据网格......

xml:

```
<XmlDataProvider x:Key="SmsData" XPath="/response/conv/sms" >

    </XmlDataProvider>

    <local:RowColorConverter x:Key="RowColorConverter" />

    <CollectionViewSource x:Key="SmsView"  Source="{StaticResource SmsData}" >
        <CollectionViewSource.SortDescriptions>
            <scm:SortDescription PropertyName="date" Direction="Descending" />
            <scm:SortDescription PropertyName="time" Direction="Descending" />

        </CollectionViewSource.SortDescriptions>

        <CollectionViewSource.GroupDescriptions>
            <dat:PropertyGroupDescription PropertyName="recipient" />

        </CollectionViewSource.GroupDescriptions>
    </CollectionViewSource>

   ...

   <DataGrid  ItemsSource="{Binding}" DataContext="{StaticResource SmsView}"   Name="dataGrid1">

    ... 
```

我通过代码绑定数据提供者，它是我从互联网 url 获取的 xml 文件。

CS：

```
 public void makeConnection()
{

            ...

            XmlDocument doc = new XmlDocument();
            doc.Load(readStream);

            //refreshing my data
            xdp = FindResource("SmsData") as XmlDataProvider;
            xdp.Document = doc;

            //re-sort => this not working
            if (dataGrid1.ItemsSource != null)
            {

               CollectionViewSource cvs = FindResource("SmsView") as CollectionViewSource;

               cvs.GroupDescriptions.Clear();
               cvs.GroupDescriptions.Add(new PropertyGroupDescription("recipient"));
               cvs.SortDescriptions.Clear();
               cvs.SortDescriptions.Add(new SortDescription("date",ListSortDirection.Descending));
       cvs.SortDescriptions.Add(new SortDescription("time",ListSortDirection.Descending));
               cvs.View.Refresh();
                 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:06:01.017

在您的 C# 代码中创建一个 ListCollectionView 并使用 xml 文档填充它。将 ListCollectionView 设为公共并为其提供 get 和 set 访问器，然后将 DataGrid 与 ItemsSource="{Binding SmsListCollectionView}" 绑定。一旦我使用了 CollectionViewSource 并且 GetDefaultView 方法返回了一个不可排序的视图。我将所有内容都切换到 ListCollectionView，从那以后我就再也没有问题了。

关于刷新，我认为您还可以，[请参阅此 SO question 及其解决方案。](https://stackoverflow.com/questions/7215409/how-to-refresh-reload-datagrid-in-wpf)

# google-app-engine - 连接到谷歌云 sql 时 Appengine rdbms 失败

> ID：14094722
> 
> 赞同：2
> 
> 时间：2012-12-30T21:13:59.550
> 
> 标签：google-app-engine, google-cloud-sql

我们使用来自 appengine 的 google cloud sql，并且从我们的后端实例中经常收到以下错误。

```
 File "/base/data/home/apps/s~app-prod/140-backend.363823736662468595/users/reports/__init__.py", line 360, in get_document_types
  cursor.execute('SELECT DISTINCT document_type FROM receipt WHERE ho_key=%s AND document_type IS NOT NULL', (str(ho.key())))
File "/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms.py", line 499, in execute
  self._DoExec(request)
File "/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms.py", line 375, in _DoExec
  response = self._conn.MakeRequest('Exec', request)
File "/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms.py", line 873, in MakeRequest
  response = self._MakeRetriableRequest(stub_method, request)
File "/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms.py", line 897, in _MakeRetriableRequest
  response = self.MakeRequestImpl(stub_method, request)
File "/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms_apiproxy.py", line 68, in MakeRequestImpl
  raise OperationalError('could not connect: ' + str(e)) 
```

OperationalError：无法连接：ApplicationError：1002

其他人有这方面的经验吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-21T23:03:12.793

此错误和堆栈跟踪表明您正在使用旧且已弃用的 google.appengine.api.rdbms 接口。

您应该将其替换为 MySQLdb 模块，该模块被记录为在 Python 中[从 App Engine 连接到 Cloud SQL的最佳方式。](https://cloud.google.com/appengine/docs/python/cloud-sql/)因为这两个接口都符合[PEP 249](https://www.python.org/dev/peps/pep-0249/)，所以它应该是一个替代品。如上面关于 GAE 的链接所述，您将希望使用`MySQLdb.connect(unix_socket="/cloudsql/project:instance", ...)`.

# python - Python、matplotlib 和 pygame.. 情节失去格式

> ID：14094727
> 
> 赞同：1
> 
> 时间：2012-12-30T21:15:01.857
> 
> 标签：python, matplotlib, pygame

我正在使用 matplotlib 和 pygame 写入帧缓冲设备，该设备是 160x128 LCD 设备。

当我绘制图表，将其保存为 PNG 并将其加载到 LCD 时，它看起来很完美；

```
matplotlib.use('Agg')
TFTxSize = 2.28
TFTySize = 1.63
ax = fig.add_subplot(111)
fig.set_size_inches(TFTxSize, TFTySize)
pylab.plot(temp,linewidth=2, antialiased=True)
pylab.savefig('gp.png', facecolor=fig.get_facecolor(),bbox_inches='tight',     dpi=80,pad_inches=0.03)
pil_im = Image.open('gp.png')
pil_out = pil_im.rotate(90)
pil_out.save("gp.png")
img = pygame.image.load('gp.png')
screen.blit(img,(0,0))
pygame.display.flip() 
```

我正在考虑尝试更动态地将其保存到内存而不是写入文件。我发现试过这个；

```
canvas = agg.FigureCanvasAgg(fig)
canvas.draw()
renderer = canvas.get_renderer()
raw_data = renderer.tostring_rgb()
size = canvas.get_width_height()
surf = pygame.image.fromstring(raw_data, size, "RGB")
surfnew = pygame.transform.rotate(surf, 90)
screen.blit(surfnew, (0,0))
pygame.display.flip() 
```

它确实有效，但是它有点大……我丢失了一些格式，当我将它保存到磁盘时，我可以用第一段代码来完成。“<strong>bbox_inches='tight'” 和 “<strong>pad_inches=0.03” 知道如何在代码底部输入这两个格式选项吗？

# javascript - 使用 jQuery 获取标签内的文本

> ID：14094733
> 
> 赞同：1
> 
> 时间：2012-12-30T21:15:16.710
> 
> 标签：javascript, jquery

从下面的 HTML 中，我想`<label></label>`用 jQuery 获取文本，但排除标签中跨度内的文本。

```
<label for="name">Name<span class="required">Required</span></label>
<input type="text" class="requiredField" name="name" /> 
```

我正在尝试以下操作：

```
jQuery('.requiredField').each(function() {  
    var labelText = jQuery(this).prev().text();
} 
```

它也接收跨度内的文本`.required`（即NameRequired），但我只想获得“名称”。我怎样才能排除它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:52:26.173

一种有效的方法：
创建一个您可以一次又一次地调用的方法，而`fn`不必在任何地方都做： `clone``remove`

```
jQuery.fn.onlyText = function() {
    return this
            .clone()
            .children()
            .remove()
            .end()
            .text();
};

// And then your code

jQuery('.requiredField').each(function() {  
    var labelText = jQuery(this).prev().onlyText();
}); 
```

[http://jsfiddle.net/OMS_/x7xPB/](http://jsfiddle.net/OMS_/x7xPB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:27:34.950

这应该有效：

```
jQuery('.requiredField').each(function() {  
    labelTextCopy = jQuery(this).prev().clone();
    copyChild = labelTextCopy.children();
    copyChild.remove();
    console.log(labelTextCopy.text());
})​ 
```

JSFiddle：http: [//jsfiddle.net/5xRLg/5/](http://jsfiddle.net/5xRLg/5/)

# php - PHP：使用 1980 年至今的年份数创建数组

> ID：14094736
> 
> 赞同：2
> 
> 时间：2012-12-30T21:15:34.533
> 
> 标签：php, arrays

我有以下数组……</p>

```
'type' => 'select',
    'options' => array(
        array('name' => '1980', 'value' => '1980'),
        array('name' => '1981', 'value' => '1982'),
        array('name' => '1983', 'value' => '1983'),
        …
        …
        array('name' => '2011', 'value' => '2011'),
        array('name' => '2012', 'value' => '2012'),
    ) 
```

知道如何“动态地”编写那个东西，以便`options`数组自动填充从 1980 年到 2012 年的年份数字吗？

```
'type' => 'select',
    'options' => array(
        // create array's from 1980 till date('Y') automatically
    ) 
```

现在我对所有这些行进行了硬编码，我想这可以更有效、更简单地完成。

提前谢谢你，马特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T21:17:13.343

```
$years = array();    
for ($y = 1980, $now = date('Y'); $y <= $now; ++$y) {
    $years[$y] = array('name' => $y, 'value' => $y);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T21:28:45.060

当您将其分配给数组时，您可以即时生成它：

```
$array = array('type' => 'select',
    'options' => array_map(function($year) {
            return array('name' => $year, 'value' => $year);
        }, range(1980, 2012))
); 
```

如果你移开模糊，你可以看到它实际上是在使用[`range`^(*Docs*)](http://php.net/range)函数和[`array_map`^(*Docs*)](http://php.net/array_map)函数。所以没什么特别的。

# cuda - 推力：transform_reduce：unary_op.operator 中的 cudaMalloc

> ID：14094739
> 
> 赞同：0
> 
> 时间：2012-12-30T21:15:46.693
> 
> 标签：cuda, gpgpu, thrust

在我的`unary_op.operator`中，我需要创建一个临时数组。
我想`cudaMalloc`这是要走的路。
但是，它是性能高效还是有更好的设计？

```
struct my_unary_op
{
    __host__ __device__ int operator()(const int& index) const
    {
        int* array;
        cudaMalloc((void**)&array, 10*sizeof(int));

        for(int i = 0; i < 10; i++)
            array[i] = index;

        int sum=0;
        for(int i=0; i < 10 ; i++)
            sum += array[i];

        return sum;
    };

};
int main()
{
    thrust::counting_iterator<int> first(0);
    thrust::counting_iterator<int> last = first+100;

    my_unary_op unary_op = my_unary_op();

    thrust::plus<int> binary_op;

    int init = 0;
    int sum = thrust::transform_reduce(first, last, unary_op, init, binary_op);

    return 0;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T22:10:32.173

您将无法`cudaMalloc()`在`__device__`函数中编译，因为它是仅主机函数。但是，您可以使用普通`malloc()`或`new`（在计算能力 >= 2.0 的设备上），但在设备上运行时这些不是很有效。有两个原因。第一个是并发运行的线程在内存分配调用期间被序列化。第二个是调用以块的形式分配全局内存，这些块的排列方式使得当内存加载和存储指令由一个扭曲中的 32 个线程运行时，它们并不相邻，因此您无法获得正确合并的内存访问。

您可以通过在`__device__`函数中使用固定大小的 C 样式数组（即`int array[10];`）来解决这两个问题。小型、固定大小的数组有时可以由编译器优化，以便将它们存储在寄存器文件中，以实现极快的访问。如果编译器将它们存储在全局内存中，它将使用本地内存。本地内存存储在全局内存中，但它以这样的方式交错，当一个 warp 中的 32 个线程运行加载或存储指令时，每个线程访问内存中的相邻位置，从而使事务能够完全合并。

如果您在运行时不知道 C 数组的大小，请在数组中分配一个最大大小并保留其中一些未使用的大小。

我认为固定大小的数组使用的内存总量将取决于 GPU 上并发处理的线程总数，而不是内核启动的线程总数。在[这个答案](https://stackoverflow.com/q/6490572/442006)中，@mharris 展示了如何计算最大可能的并发线程数，对于 GTX580，它是 24,576。因此，如果固定大小的数组是 16 个 32 位值，则该数组可能使用的最大内存量为 1536KiB。

如果您需要范围广泛的数组大小，您可以使用模板来编译具有多种不同大小的内核。然后，在运行时，选择一个能够容纳您需要的大小的。但是，如果您只是分配可能需要的最大值，那么内存使用量将不会成为您可以启动的线程数的限制因素。

# c# - WindowsFormsHost 中带有 WebBrowser 的 WPF 应用程序 - 加载网站速度非常慢

> ID：14094741
> 
> 赞同：1
> 
> 时间：2012-12-30T21:15:49.563
> 
> 标签：c#, wpf, browser

我有一个 WindowsFormsHost，它在 WPF 应用程序中包含一个 WebBrowser 控件。我的问题是，如果我第一次尝试加载一个网站，它的速度会非常慢。我也尝试使用 WPF WebBrowser，但它也有同样的问题。在一个只有一个 WebBrowser 和一个大的 WebBrowser 的小型示例应用程序中，问题是相同的，所以我的任何功能都不会影响加载时间。在我经常使用的谷歌浏览器中，我没有这个问题。我应该考虑设置 WebBrowser 的任何属性吗？这与在 WPF 应用程序中使用 WebBrowser 有关吗？任何建议表示赞赏。

谢谢。

简单的示例应用程序：

```
<Window x:Class="WebBrowserIntoWPFConceptTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="468" Width="840" xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon" xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars">
<Grid x:Name="grid">
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="80*"/>
        <RowDefinition Height="20*"/>
    </Grid.RowDefinitions>

    <!--<WebBrowser Grid.Row="0"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                x:Name="wb"/>-->
    <Button Grid.Row="1" 
            Grid.Column="0"
            Width="50" 
            Height="50"
            VerticalAlignment="Bottom"
            Click="Button_Click"/>
    <Button Grid.Row="1"
            Grid.Column="1"
            Width="50" 
            Height="50" Click="Button_Click_1" />
</Grid> 
```

```
namespace WebBrowserIntoWPFConceptTest 
```

{公共部分类MainWindow：窗口{私有WindowsFormsHost winFormHost；System.Windows.Forms.WebBrowser wf_wb;

```
 public MainWindow()
    {
        InitializeComponent();
        wf_wb = new System.Windows.Forms.WebBrowser();
        winFormHost = new WindowsFormsHost();
        winFormHost.Child = wf_wb;
        Grid.SetColumn(winFormHost, 0);
        Grid.SetRow(winFormHost, 0);
        Grid.SetColumnSpan(winFormHost, 2);
        grid.Children.Add(winFormHost);
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        Uri uri = new Uri("http://www.google.com");
        wf_wb.Navigate(uri);
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        HtmlDocument htmlDoc = (HtmlDocument)wf_wb.Document;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:31:51.287

WebBrowser 是 IE 的包装器。因此，如果您尝试 IE 并且它很慢，那么 WebBrowser 也会很慢。可能是某种病毒使它变慢了。所以用virusscanner扫描你的电脑。

我没有听说过这样的问题。但是，我自己（在 IE 和 mozilla 中）遇到了浏览器问题，其中页面没有加载并且运行病毒扫描最终修复了它。

如果那没有帮助，请检查 ouf CefSharp 项目[https://github.com/chillitom/CefSharp](https://github.com/chillitom/CefSharp)我会告诉你使用它，因为它更像是“WPF”。它允许您使用 WebBrowser 完成所有操作。

# python - 将 Sage 矩阵分配给 R 中的变量

> ID：14094742
> 
> 赞同：1
> 
> 时间：2012-12-30T21:16:07.957
> 
> 标签：python, r, sage

从终端会话中的 sage (v5.4.1) 我尝试在 R 中分配一个值：

```
sage: r.assign('"M"',5)
[1] 5 
```

这样可行。我也可以

```
sage: b=4
sage: r.assign('"M"',b)
[1] 4 
```

但我想为 M 分配一个来自 sage 的矩阵。

```
sage: r.assign('M',sage_M)
Error: object 'sage6' not found 
```

错误的类型取决于 M 之前是否在 R 中定义。如果没有，则错误如图所示，否则不可预测。我要设计的矩阵大小为 5x17，类型为：

```
sage: type(sage_M)
<type 'sage.matrix.matrix_integer_dense.Matrix_integer_dense'> 
```

任何人都知道是否有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:24:48.340

好的，它的工作原理是提供展平为列表的矩阵，而不是在 R 中再次将其放入矩阵中。

# objective-c - iPhone本地通知仍然显示旧消息

> ID：14094743
> 
> 赞同：0
> 
> 时间：2012-12-30T21:16:08.193
> 
> 标签：objective-c

我目前正在创建一个使用本地通知的应用程序。以前，我将消息编码为 XXXX，然后几周后，我将消息编码为 YYYY。现在，当我在我的应用程序上进行测试运行时。有时我会收到带有消息 XXXX 的通知，有时我会收到带有消息 YYYY 的通知。任何人都知道是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:59:51.140

找到了答案。显然，我仍然有显示 XXXX 的旧通知

# ucma - UCMA 4.0 不工作

> ID：14094744
> 
> 赞同：2
> 
> 时间：2012-12-30T21:16:13.273
> 
> 标签：ucma

我正在浏览 UCMA 4.0 SDK 提供的快速入门示例。我们在同一台机器上安装了 lyncserver 2013 和 Visual Studio 2012。我们正在尝试手动配置选项来记录 IM 消息，使用“RegisterForIncomingCall”事件来监听流量。应用程序成功启动，但未触发事件。我们正在使用快速启动“ManualProvisioning”项目，除了那个配置。我们确实禁用了防火墙，并尝试通过 OCS 记录器进行跟踪。到目前为止还没有运气。还有什么我们可以尝试调试这个问题的吗？

任何答复表示赞赏。

谢谢

# wordpress - 禁用 wordpress 主题的移动视图

> ID：14094745
> 
> 赞同：0
> 
> 时间：2012-12-30T21:16:25.913
> 
> 标签：wordpress

我正在寻找一种在我的 iPhone 上查看我的网站时禁用移动视图的方法。是否有插件或一些代码可以做到这一点？

我的主题是starkers-master，没有办法这样做

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T05:18:26.277

如果您的主题提供了您不想要的移动检测和移动布局，请首先确保没有主题选项来禁用它。如果没有，您应该能够通过将其注释掉来删除移动检测代码，这应该可以解决问题。

处理移动主题使用的最佳方法是检测设备并默认为适当的布局，但还提供用户覆盖，以便他们可以通过手机选择加入整个网站（甚至是桌面上的移动网站）。这是通过在设备上存储用户选择的 cookie 并使用它来覆盖移动检测结果来完成的。

嗯。快速浏览一下 starkers 的源代码让我觉得它并不是一个真正的移动组件，而只是一个响应式主题。看起来有一个简单的解决方法......

编辑 parts/shared/html-header.php 并删除第 11 行。很容易找到，因为它有一个标识它的注释：

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Remove if you're not building a responsive site. (But then why would you do such a thing?) --> 
```

看起来这会删除主题的响应行为（假设评论是正确的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-06T15:25:57.457

如果您是自托管 Wordpress 并安装了 Jetpack，您可能必须通过以下方式禁用移动主题视图：

喷气背包 > 设置

转到“写作”选项卡并查找“针对智能手机优化您的网站”并将其禁用。

这似乎等同于 wordpress.com 上的 Settings > Appearance > Mobile Theme 开关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T22:12:05.607

我认为最好为移动设备使用不同的主题而不是禁用它。在这种情况下，目录中有很多插件，`WordPress`我个人使用并推荐[**WPtouch**](http://wordpress.org/extend/plugins/wptouch/)，因为它会自动将您的 WordPress 网站转换为移动设备，并在从流行的移动 Web 浏览设备查看时完成 ajax 加载文章和流畅的效果。如果您想查看预览，`WPtouch`则可以`http://heera.it`使用手机访问。

或者，您可以使用以下代码（使用`mobile_device_detect.php`脚本）

```
include('mobile_device_detect.php');
$mobile = mobile_device_detect();
if ($mobile==true) {
    // do something here, maybe redirect to a page with a message
} 
```

为此，首先您必须从[detectmobilebrowsers.mobi](http://detectmobilebrowsers.mobi/)获取代码并将其上传到您的主题目录。完成后，只需打开`header.php`文件并将代码放在文件顶部即可。

也[**看看这个**](http://code.google.com/p/php-mobile-detect/)。

## 更新：

在作者提到的公认答案中`A quick glance at the starkers source makes me think it is not really a mobile component but just a responsive theme.`，我意识到这是一个响应式主题，但`OP`在问题中没有提及任何有关它的内容，我误解了这个问题并回答了。因此，作为将来的参考，我没有删除答案，请记住，它可能对其他人有帮助。

*这个答案可能对那些想要为移动设备使用不同主题的人有所帮助。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-24T13:22:46.723

只需转到外观 > 主题编辑器，我就可以在我的 wordpress 网站上禁用移动视图。然后从屏幕右侧的 Theme Files 中选择 header.php 找到并注释掉该行`<meta name="viewport" content="width=device-width, initial-scale=1">`

就像这样`<!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->`

保存您的更改，仅此而已

我相信这种方法应该适用于任何主题。就我而言，我使用的是 Astra 主题

# button - 将按钮添加到 itemTpl sencha touch

> ID：14094748
> 
> 赞同：0
> 
> 时间：2012-12-30T21:16:46.787
> 
> 标签：button, sencha-touch-2, dataview

我是煎茶触摸的新手。我有一个问题。如何添加按钮并将事件触发到项目模板？请指导我解决方案

这是我的编码

```
 Ext.define('bluebutton.view.BlueButton.CouponList', {
        extend: 'Ext..DataView',
        xtype: 'couponlistcard',
        requires: [
            'Ext.field.Select',
            'Ext.field.Search',
            'bluebutton.view.BlueButton.MemberDetail',
             'Ext.plugin.ListPaging',
            'Ext.plugin.PullRefresh'

        ],
        config: {

            styleHtmlContent: true,
            scrollable: 'vertical',

             store : { xclass : 'bluebutton.store.BlueButton.MemberList'},
            grouped: true,
            indexBar: true,
             autoLoad: false,
           disclosure: true,
           cls:'customHeader',

            id :'memberlist',
            items: [
                {

                }

            ],
            emptyText: '<p class="no-search-results">No member record found matching that search</p>',
            itemTpl: Ext.create(
                'Ext.XTemplate',

   '<div style="float:left;width=33%;margin:2px;"><div class="demo-weather">',
                            '<tpl for=".">',
                                '<div class="day">',
                                    '<div class="date">{memberId}</div>',
                                    '<tpl for="weatherIconUrl">',
                                        '<img src="{value}">',
                                    '</tpl>',
                                    '<span class="temp">{memberId}&deg;<span class="temp_low">{memberId}&deg;</span></span>',
                                    'button here?????'
                                '</div>',
                            '</tpl>',
                        '</div></div>'

            ),

        },

    }); 
```

顺便说一句，我正在使用 MVC 模型。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:52:21.897

列表模板不是为使用组件而设计的，但是您应该能够在数据视图中使用它们。另一种方法是将按钮的 div 添加到模板中，然后使用模板上的成员函数可以创建按钮并将其呈现到 div。

# r - 如何将数字标签添加到向量

> ID：14094754
> 
> 赞同：0
> 
> 时间：2012-12-30T21:17:19.407
> 
> 标签：r, tags

我想知道如何标记数据集中的数字。为了说明，这是我得到的：

```
> U
     [,1]
[1,] 5.019720
[2,] 3.849288
[3,] 3.434410
[4,] 3.418294
[5,] 3.723506
[6,] 3.108474
[7,] 2.534136 
```

但我想要的是，

```
 1        2        3        4        5 
5.019765 3.849315 3.434434 3.418317 3.723531 
   6        7 
3.108500 2.534188 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T21:33:24.347

您似乎想构造一个命名向量。一种简单的方法是使用`setNames()`：

```
x <- runif(5)
x
[1] 0.1350252 0.6986387 0.9814024 0.1204727 0.2901325 
```

现在添加名称：

```
setNames(x, 1:5)
        1         2         3         4         5 
0.1350252 0.6986387 0.9814024 0.1204727 0.2901325 
```

* * *

当然，这相当于：

```
names(x) <- 1:5
x
        1         2         3         4         5 
0.1350252 0.6986387 0.9814024 0.1204727 0.2901325 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T21:34:51.750

Andrie 打败了我，他的方法更胜一筹，但这是另一种方法（这显示了如何将矩阵对象 [with dimensions] 转换为向量）：

```
U <- matrix(rnorm(6), ncol=1)
U2 <- c(U)
names(U2) <- 1:length(U2)
U2 
```

给予：

```
 1         2         3         4         5         6 
-1.081053 -0.122568  1.650224 -2.217643  2.018205  1.451843 
```

# logging - 在 Wicket 中记录用户操作

> ID：14094755
> 
> 赞同：2
> 
> 时间：2012-12-30T21:17:47.290
> 
> 标签：logging, user-interface, wicket, event-sourcing

我正在试验 Wicket 和事件溯源。我正在尝试记录用户操作，以便我们可以重放它们或将它们用于测试或演示目的。

你会推荐什么策略？

例如，我可以定义动作类并将它们放在 onsubmit 等中。或者覆盖检票口的所有“动作”组件，例如链接、按钮、文本字段。等等。

有什么好的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T11:26:45.833

**警告：**这**不是**问题的解决方案。它**可能**仅适用于 ajax，但我也不确定。

您可以使用[IComponentInstantiationListener](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/application/IComponentInstantiationListener.html)来检查创建的新组件以及是否可点击。然后你可以附加一个日志行为。这样，您可以轻松地在一个地方打开和关闭您的日志记录，而不必为每个 Link-、Button 和 Whatnot-class 子类化来进行日志记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T17:05:30.380

使用自 1.2 以来随 Wicket 一起提供的[请求记录器](https://ci.apache.org/projects/wicket/apidocs/7.x/org/apache/wicket/protocol/http/IRequestLogger.html)（尽管多年来其实现发生了很大变化）。这以（在 6.0 中，请参阅 wicket-extensions）JSON 格式记录请求目标和响应以进行解析。请注意，根据用户数量，这可能会生成笨拙的日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T12:20:14.743

Wicket 本身并没有为这样的事情提供挂钩，但根据您使用的其他技术，您可以在持久层中执行此操作 - 例如使用 JPA 的 @PreRemove、@PreUpdate、@PrePersist。另一种方法是面向方面的编程（AOP）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T15:37:06.770

考虑到每个用户操作都是一个 http 请求 ajax 或经典，您可以使用您需要的一些标识符记录每个请求（每个请求都有一个组件路径）。在 Wicket 1.4 中，您扩展了请求周期，在 1.5+ 中添加了请求周期侦听器。

见[https://cwiki.apache.org/WICKET/requestcycle-in-wicket-15.html](https://cwiki.apache.org/WICKET/requestcycle-in-wicket-15.html)

# c++ - 为集合的每个元素添加值的模板函数

> ID：14094764
> 
> 赞同：2
> 
> 时间：2012-12-30T21:19:10.030
> 
> 标签：c++, templates

我正在阅读[C++ 模板：完整指南](https://rads.stackoverflow.com/amzn/click/com/0201734842)，在第 4 章（4.2 非类型函数模板参数）中是模板函数的示例，可与 STL 容器一起使用，为集合的每个元素添加值。这是完整的程序：

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>

template<typename T, int VAL>
T addValue(T const& x)
{
    return x + VAL;
}

int main()
{
    std::vector<int> source;
    std::vector<int> dest;
    source.push_back(1);
    source.push_back(2);
    source.push_back(3);
    source.push_back(4);
    source.push_back(5);

    std::transform(source.begin(), source.end(), dest.begin(), (int(*)(int const&)) addValue<int, 5>);
    std::copy(dest.begin(), dest.end(), std::ostream_iterator<int>(std::cout, ", "));

    return 0;
} 
```

我不得不做出那个丑陋的演员，因为这本书说：

```
Note that there is a problem with this example: addValue<int,5> is a function template, and function templates are considered to name a set of overloaded functions (even if the set has only one member). However, according to the current standard, sets of overloaded functions cannot be used for template parameter deduction. Thus, you have to cast to the exact type of the function template argument:

std::transform (source.begin(), source.end(),  // start and end of source 
                dest.begin(),                  // start of destination 
                (int(*)(int const&)) addValue<int,5>);  // operation 
```

我的问题是运行程序时出现分段错误。我在 Mac 上使用 Clang 构建它。
演员表不正确还是问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:23:05.567

演员表不是你的问题，你正在将元素输出到一个空的`vector`. 相反，您可以`resize`使用所需的空间：

```
dest.resize(source.size()); 
```

或者更好的是让我们`transform`弄清楚：

```
std::transform(
    source.begin(), source.end()
  , std::back_inserter( dest ) // needs <iterator>
  , &addValue<int, 5> // cast should not be needed
); 
```

尽管如果您**确实**知道它将占用多少空间，则`resize`-ing 向量将具有更好的性能，因为它将避免在添加项目时进行内部重新分配。另一种选择是调用`reserve`以避免内部重新分配：

```
dest.reserve(source.size());
// dest is still empty

std::transform(
    source.begin(), source.end()
  , std::back_inserter( dest ) // needs <iterator>
  , &addValue<int, 5> // cast should not be needed
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T21:28:04.257

分段错误的问题是它`dest`是空的，但您正在为它分配值！有两种方法可以确保您可以实际分配元素：

1.  您可以设置数据`dest`之前的大小`std::transform()`：`dest.resize(source.size())`。
2.  `dest`您可以指示算法在使用`std::back_insert_iterator<...>`:的末尾插入对象`std::transform(source.begin(), source.end(), std::back_inserter(dest), function)`（这`function`是获取函数对象的合适方法）。

就个人而言，无论如何我都不会使用指向函数的指针，因为编译器很可能不会通过指向函数的指针来内联函数调用。相反，我会使用一个合适的函数对象：

```
template <int N>
struct addValue {
    template <typename T>
    T operator()(T value) const { return value + N; }
}; 
```

...然后就使用

```
std::transform(source.begin(), source.end(), std::back_inserter(dest), addValue<5>()); 
```

# jquery - 链接在 jquery 'tabs+accordion' 中不起作用的奇怪错误

> ID：14094766
> 
> 赞同：3
> 
> 时间：2012-12-30T21:19:14.757
> 
> 标签：jquery, tabs, hyperlink, accordion

我是新来的——到处寻找答案却找不到。

我正在使用来自 Codecanyon 的这个很棒的 tabs+accordion 插件，但是我试图放入内容区域的链接不起作用。

我正在尝试修复的实时站点在这里 - [http://lrg-international.com/site/](http://lrg-international.com/site/) - 您会注意到选项卡区域中的“了解更多”按钮没有点击。它们可以悬停，但单击它们不会执行任何操作。

谁能告诉我为什么此测试页面上“响应式”选项卡中“链接 1”之后的所有链接都不可点击/悬停？似乎与块级元素有关，但我可能完全走错了路。

我已经向开发人员询问过这个问题，因为它是一个付费插件，但他没有回复。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T01:09:45.583

在 David 和 Beetroot 的大力帮助下，探索了各种途径，结果证明它与 jquery-ui 'tabs' 脚本发生冲突。开发人员告诉我删除这个：

```
jQuery(document).ready(function(){ 
jQuery(function() { 
jQuery(".tabs").tabs(".panes > div"); 
}); 

}); 
```

来自 custom.js

Guess 插件需要为它们的元素提供更多独特的名称！

感谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T22:41:57.083

如果这是一个冒泡问题，那么文档末尾的以下脚本`<head>` *可能会*解决它。

```
<script>
$(window).on('load', function() {
    $(".buttonLRG").on('click', function(e){
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation();
        location.href = $(this).attr('href');
    });
});
</script> 
```

或者，可能

```
<script>
$(window).on('load', function() {
    $("div.tabs").on('click', ".buttonLRG", function(e){
        e.preventDefault();
        location.href = $(this).attr('href');
    });
});
</script> 
```

或者 ：

```
<script>
$(function() {
    $(document).on('click', ".buttonLRG", function(e) {
        e.preventDefault();
        location.href = $(this).attr('href');
    });
});
</script> 
```

或者 ：

```
<script>
$(function() {
    $(document).on('click', 'section[role="tabpanel"]', function(e) {
        alert("at least we're handling the click");
        e.preventDefault();
        var $button = $(".buttonLRG").filter(":visible");
        location.href = $button.attr('href');
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T22:10:54.563

在您的可下载示例中，问题似乎是元素在当前显示的内容“下方”移动，但仍会阻止该区域中嵌入内容的交互。

在“官方”演示页面上，也可以注意到该问题，但他们巧妙地格式化了第一个选项卡，因此它不会与下面的图像重叠。

**编辑：**测试实时网站我发现将`.js .tabs > section`选择器 更改`visibility: hidden;`为`display: none;`并更改`.tabs > section[aria-expanded="true"]`选择器`visibility: visible;`以`display: block;`解决问题。你可以试试。似乎“冒泡”问题可能会起作用，因此请同时尝试这个和另一个答案。

# json - 用 Pig 解析“复杂”JSON

> ID：14094768
> 
> 赞同：0
> 
> 时间：2012-12-30T21:19:35.953
> 
> 标签：json, hadoop, apache-pig

假设我有一些中等复杂的 JSON，比如

```
{
    "revenue": 100,
    "products":[
            {"name": "Apple", "price": 50},
            {"name": "Banana", "price": 50}
    ]
} 
```

显然这有点做作，但是使用 JsonLoader 将其映射到猪的最佳方法是什么。

我试过了

```
a = LOAD 'test.json' USING
    JsonLoader('revenue:int,products:[(name:chararray,price:int)]'); 
```

或者

```
a = LOAD 'test.json' USING
    JsonLoader('revenue:int,products:[{(name:chararray,price:int)]}'); 
```

但是，当我 时`DUMP A`，我得到`(100,)`了两者。

我也试过

```
a = LOAD '/json/complex.json'
    USING JsonLoader('revenue:int,products:[{name:chararray,price:int}]'); 
```

哪个错误`ERROR 1200: <line 1, column 28> mismatched input 'chararray' expecting LEFT_PAREN`。

解析这个以备将来使用的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:02:44.800

为了后代，

```
a = LOAD 'test.json' USING
    JsonLoader('revenue:int,products:{(name:chararray,price:int)}'); 
```

# xaml - ScrollViewer 中是否可以有非滚动行？

> ID：14094769
> 
> 赞同：4
> 
> 时间：2012-12-30T21:19:44.227
> 
> 标签：xaml, winrt-xaml, windows-store-apps, scrollviewer, non-scrolling

因为我需要在 Scroll Viewer 中有一部分（但不是全部）页面，所以我有一个 winrt-xaml 布局，如下所示：

```
<Page>
    <StackPanel>
        <Grid>
        </Grid>

        <ScrollViewer>
            <Grid>
            </Grid>
        </ScrollViewer>
    </StackPanel>
</Page> 
```

我有第二个网格的列标题，它位于滚动查看器内。如果我将列标题*放在*网格之外（将它们放在外部网格的最后一行），即使不是不可能，也很难使它们与内部网格中的列对齐。但是，如果我将它们留在内部网格中（在 ScrollViewer 内），它们可能会滚动到视线之外。

SO：是否可以将第一行冻结到位？或者，OTOH，毕竟，是否可以轻松地将“Grid1”（外部网格）中的列宽与“Grid2”（内部网格）中的列宽无缝对齐？

## 更新

我不明白为什么，但是在 Juan 的回答中使用选项 #2 并不太有效。唯一的问题是“经度”和“颜色”标签都显示在它们应该在的右侧 - 所有其他标签都完美对齐，并且它们的水平对齐属性设置为“左”，所以我没有不明白为什么这两个人不合作。这是xml：

团队名字

```
<TextBlock Foreground="Yellow" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="1" FontSize="28" VerticalAlignment="Center" HorizontalAlignment="Center">Title</TextBlock>
<TextBlock Foreground="Yellow" Grid.Row="2" Grid.Column="1" FontSize="28" VerticalAlignment="Center">Address</TextBlock>
<TextBlock Foreground="Yellow" Grid.Row="2" Grid.Column="3" FontSize="28" VerticalAlignment="Center" HorizontalAlignment="Left" >Latitude</TextBlock>
<TextBlock Foreground="Yellow" Grid.Row="2" Grid.Column="5" FontSize="28" VerticalAlignment="Center" HorizontalAlignment="Left">Longitude</TextBlock>
<TextBlock Foreground="Yellow" Grid.Row="2" Grid.Column="6" Grid.ColumnSpan="2" FontSize="28" VerticalAlignment="Center">Color</TextBlock>
</Grid> 
```

```
 <StackPanel Orientation="Horizontal" Grid.Row="0">
            <TextBlock x:Name="textBlockLocation1" FontSize="20" Margin="4" HorizontalAlignment="Right">Location 1</TextBlock>
            <TextBox x:Name="textBoxTitle1" Margin="4" MinWidth="200"></TextBox>
        </StackPanel>
        <StackPanel Orientation="Horizontal" Grid.Row="1">
            <TextBlock x:Name="textBlockLocation2" FontSize="20" Margin="4" HorizontalAlignment="Right">Location 2</TextBlock>
            <TextBox x:Name="textBoxTitle2" Margin="4" Width="200"></TextBox>
        </StackPanel>
        <StackPanel Orientation="Horizontal" Grid.Row="2">
            <TextBlock x:Name="textBlockLocation3" FontSize="20" Margin="4" HorizontalAlignment="Right">Location 3</TextBlock>
            <TextBox x:Name="textBoxTitle3" Margin="4" Width="200"></TextBox>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Grid.Row="3">
            <TextBlock x:Name="textBlockLocation4" FontSize="20" Margin="4" HorizontalAlignment="Right">Location 4</TextBlock>
            <TextBox x:Name="textBoxTitle4" Margin="4" Width="200"></TextBox>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Grid.Row="4">
            <TextBlock x:Name="textBlockLocation5" FontSize="20" Margin="4" HorizontalAlignment="Right">Location 5</TextBlock>
            <TextBox x:Name="textBoxTitle5" Margin="4" Width="200"></TextBox>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Grid.Row="5">
            <TextBlock x:Name="textBlockLocation6" FontSize="20" Margin="4" HorizontalAlignment="Right">Location 6</TextBlock>
            <TextBox x:Name="textBoxTitle6" Margin="4" Width="200"></TextBox>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Grid.Row="6">
            <TextBlock x:Name="textBlockLocation7" FontSize="20" Margin="4" HorizontalAlignment="Right">Location 7</TextBlock>
            <TextBox x:Name="textBoxTitle7" Margin="4" Width="200"></TextBox>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Grid.Row="7">
            <TextBlock x:Name="textBlockLocation8" FontSize="20" Margin="4" HorizontalAlignment="Right">Location 8</TextBlock>
            <TextBox x:Name="textBoxTitle8" Margin="4" Width="200" LostFocus="CheckForAllRecordsValid" ></TextBox>
        </StackPanel>

        <TextBox x:Name="textBoxAddress1" Grid.Row="0" Grid.Column="1" MinWidth="240" Margin="4"></TextBox>
        <TextBox x:Name="textBoxAddress2" Grid.Row="1" Grid.Column="1" Margin="4"></TextBox>
        <TextBox x:Name="textBoxAddress3" Grid.Row="2" Grid.Column="1" Margin="4"></TextBox>
        <TextBox x:Name="textBoxAddress4" Grid.Row="3" Grid.Column="1" Margin="4"></TextBox>
        <TextBox x:Name="textBoxAddress5" Grid.Row="4" Grid.Column="1" Margin="4"></TextBox>
        <TextBox x:Name="textBoxAddress6" Grid.Row="5" Grid.Column="1" Margin="4"></TextBox>
        <TextBox x:Name="textBoxAddress7" Grid.Row="6" Grid.Column="1" Margin="4"></TextBox>
        <TextBox x:Name="textBoxAddress8" Grid.Row="7" Grid.Column="1" Margin="4" LostFocus="CheckForAllRecordsValid" ></TextBox>

        <TextBox x:Name="textBoxLatitude1" Grid.Row="0" Grid.Column="3" Margin="4" MinWidth="120"></TextBox>
        <TextBox x:Name="textBoxLatitude2" Grid.Row="1" Grid.Column="3" Margin="4" ></TextBox>
        <TextBox x:Name="textBoxLatitude3" Grid.Row="2" Grid.Column="3" Margin="4" ></TextBox>
        <TextBox x:Name="textBoxLatitude4" Grid.Row="3" Grid.Column="3" Margin="4" ></TextBox>
        <TextBox x:Name="textBoxLatitude5" Grid.Row="4" Grid.Column="3" Margin="4" ></TextBox>
        <TextBox x:Name="textBoxLatitude6" Grid.Row="5" Grid.Column="3" Margin="4" ></TextBox>
        <TextBox x:Name="textBoxLatitude7" Grid.Row="6" Grid.Column="3" Margin="4" ></TextBox>
        <TextBox x:Name="textBoxLatitude8" Grid.Row="7" Grid.Column="3" Margin="4" LostFocus="CheckForAllRecordsValid" ></TextBox>

        <TextBox x:Name="textBoxLongitude1" Grid.Row="0" Grid.Column="5" Margin="4" MinWidth="120"></TextBox>
        <TextBox x:Name="textBoxLongitude2" Grid.Row="1" Grid.Column="5" Margin="4"></TextBox>
        <TextBox x:Name="textBoxLongitude3" Grid.Row="2" Grid.Column="5" Margin="4"></TextBox>
        <TextBox x:Name="textBoxLongitude4" Grid.Row="3" Grid.Column="5" Margin="4"></TextBox>
        <TextBox x:Name="textBoxLongitude5" Grid.Row="4" Grid.Column="5" Margin="4"></TextBox>
        <TextBox x:Name="textBoxLongitude6" Grid.Row="5" Grid.Column="5" Margin="4"></TextBox>
        <TextBox x:Name="textBoxLongitude7" Grid.Row="6" Grid.Column="5" Margin="4"></TextBox>
        <TextBox x:Name="textBoxLongitude8" Grid.Row="7" Grid.Column="5" Margin="4" LostFocus="CheckForAllRecordsValid"></TextBox>

        <ComboBox x:Name="cmbxColor1" Grid.Row="0" Grid.Column="6" Margin="4,4,0,4" MinWidth="200" Height="36" HorizontalAlignment="Left" SelectionChanged="CmbxColor1_OnSelectionChanged"/>
        <ComboBox x:Name="cmbxColor2" Grid.Row="1" Grid.Column="6" Margin="4,4,0,4" MinWidth="200" Height="36" HorizontalAlignment="Left"/>
        <ComboBox x:Name="cmbxColor3" Grid.Row="2" Grid.Column="6" Margin="4,4,0,4" MinWidth="200" Height="36" HorizontalAlignment="Left"/>
        <ComboBox x:Name="cmbxColor4" Grid.Row="3" Grid.Column="6" Margin="4,4,0,4" MinWidth="200" Height="36" HorizontalAlignment="Left"/>
        <ComboBox x:Name="cmbxColor5" Grid.Row="4" Grid.Column="6" Margin="4,4,0,4" MinWidth="200" Height="36" HorizontalAlignment="Left"/>
        <ComboBox x:Name="cmbxColor6" Grid.Row="5" Grid.Column="6" Margin="4,4,0,4" MinWidth="200" Height="36" HorizontalAlignment="Left"/>
        <ComboBox x:Name="cmbxColor7" Grid.Row="6" Grid.Column="6" Margin="4,4,0,4" MinWidth="200" Height="36" HorizontalAlignment="Left"/>
        <ComboBox x:Name="cmbxColor8" Grid.Row="7" Grid.Column="6" Margin="4,4,0,4" MinWidth="200" Height="36" HorizontalAlignment="Left" LostFocus="CheckForAllRecordsValid" />

        <TextBlock Grid.Row="0" Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="7,10,6,10" >or</TextBlock>
        <TextBlock Grid.Row="1" Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="7,10,6,10">or</TextBlock>
        <TextBlock Grid.Row="2" Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="7,10,6,10">or</TextBlock>
        <TextBlock Grid.Row="3" Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="7,10,6,10">or</TextBlock>
        <TextBlock Grid.Row="4" Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="7,10,6,10">or</TextBlock>
        <TextBlock Grid.Row="5" Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="7,10,6,10">or</TextBlock>
        <TextBlock Grid.Row="6" Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="7,10,6,10">or</TextBlock>
        <TextBlock Grid.Row="7" Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="7,10,6,10">or</TextBlock>

        <TextBlock Grid.Row="0" Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="6,10">and</TextBlock>
        <TextBlock Grid.Row="1" Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="6,10">and</TextBlock>
        <TextBlock Grid.Row="2" Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="6,10">and</TextBlock>
        <TextBlock Grid.Row="3" Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="6,10">and</TextBlock>
        <TextBlock Grid.Row="4" Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="6,10">and</TextBlock>
        <TextBlock Grid.Row="5" Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="6,10">and</TextBlock>
        <TextBlock Grid.Row="6" Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="6,10">and</TextBlock>
        <TextBlock Grid.Row="7" Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="6,10">and</TextBlock>
    </Grid>
</ScrollViewer> 
```

## 更新 2

由于我仍然有对齐问题（上面的网格列并不总是在宽度上与下面的网格列对齐），因此我根据要求在此处发布了我的 Grid XAML。一、顶格：

```
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="320"></ColumnDefinition>
        <ColumnDefinition Width="{Binding ElementName=Col1Grid2, Path=ActualWidth}"></ColumnDefinition>
        <ColumnDefinition Width="{Binding ElementName=Col2Grid2, Path=ActualWidth}"></ColumnDefinition>
        <ColumnDefinition Width="{Binding ElementName=Col3Grid2, Path=ActualWidth}"></ColumnDefinition>
        <ColumnDefinition Width="{Binding ElementName=Col4Grid2, Path=ActualWidth}"></ColumnDefinition>
        <ColumnDefinition Width="{Binding ElementName=Col5Grid2, Path=ActualWidth}"></ColumnDefinition>
        <ColumnDefinition Width="{Binding ElementName=Col6Grid2, Path=ActualWidth}"></ColumnDefinition>
    </Grid.ColumnDefinitions>
<Grid.RowDefinitions>
    <RowDefinition Height="120"></RowDefinition>
    <RowDefinition Height="Auto"></RowDefinition>
    <RowDefinition Height="Auto"></RowDefinition>
    <RowDefinition Height="Auto"></RowDefinition>
</Grid.RowDefinitions> 
```

...现在，第二个（内部）网格：

```
<Grid x:Name="gridDynamicRowsParent">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="320"></ColumnDefinition>
        <ColumnDefinition x:Name="Col1Grid2" Width="Auto"></ColumnDefinition>
        <ColumnDefinition x:Name="Col2Grid2" Width="Auto" />
        <ColumnDefinition x:Name="Col3Grid2" Width="Auto"></ColumnDefinition>
        <ColumnDefinition x:Name="Col4Grid2" Width="Auto"></ColumnDefinition>
        <ColumnDefinition x:Name="Col5Grid2" Width="Auto"></ColumnDefinition>
        <ColumnDefinition x:Name="Col6Grid2" Width="*"></ColumnDefinition>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
    <RowDefinition Height="*"></RowDefinition>
    <RowDefinition Height="*"></RowDefinition>
    <RowDefinition Height="*"></RowDefinition>
    <RowDefinition Height="*"></RowDefinition>
    <RowDefinition Height="*"></RowDefinition>
    <RowDefinition Height="*"></RowDefinition>
    <RowDefinition Height="*"></RowDefinition>
    <RowDefinition Height="*"></RowDefinition>
    </Grid.RowDefinitions> 
```

此外，控件是“橡胶”——当我输入一个它们不够宽的值时，它们会横向扩展以容纳一些额外的空间；我不想要这个 - 控件（TextBoxes）应该保持相同的宽度......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:36:00.330

您可以针对您的情况尝试两种不同的方法：

1.  为列创建一个 SharedSizeGroup （[参见这篇文章](http://blogs.microsoft.co.il/blogs/guy/archive/2009/06/30/wpf-grid-shared-size-groups.aspx)- 很多之间的一个 - 作为示例）

2.  命名第二个网格中的列并设置第一个网格中的列以将它们的 Width 绑定到相应列的 ActualWidth 属性，如下所示：

    ```
    <Page>
         <StackPanel>
             <Grid Name="Grid1">
                <Grid.ColumnDefinitions>
                   <ColumnDefinition Width="{Binding ElementName=Col1Grid2, Path=ActualWidth}"/>
                   <ColumnDefinition/>
                </Grid.ColumnDefinitions>

          <ScrollViewer>
            <Grid Name="Grid2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Name="Col1Grid2" Width="*"/>
                        <ColumnDefinition Name="Col2Grid2" Width="Auto"/>
                    </Grid.ColumnDefinitions>
          </ScrollViewer>
       </StackPanel>
     </Page> 
    ```

看看您是否可以使用这些选项中的任何一个获得所需的行为。祝你好运！

# mysql - 将具有相同地址的人分组

> ID：14094770
> 
> 赞同：-1
> 
> 时间：2012-12-30T21:19:45.483
> 
> 标签：mysql

以下是我的 sql 查询，在其中我试图获取地址相同的人的姓名，但我面临的问题是查询显示正确的计数，但所有姓名都没有按以下方式分组. 请让我知道如何修改以下查询，以便我可以通过下面提到的方式获取地址，并且 count(address) = 1 也应该被忽略。谢谢，

```
+----------+
 约翰 | 9 号街，H#4
 扎梅| 9 号街，H#4
 罪孽 | 9 号街，H#4
 林恩 | 8 号街，H#9
 锡 | 8 号街，H#9
+----------+

```

```
SELECT *,count(address) FROM `student` 
group by address
order by  count(address) desc 
```

**SQLFIDDLE：** [http ://sqlfiddle.com/#!2/6d6ca/2](http://sqlfiddle.com/#!2/6d6ca/2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:22:30.177

尝试这个：

```
 SELECT name, count(address) FROM student 
 GROUP BY address 
 ORDER BY count(address), name DESC 
```

编辑：你的意思是这个 group_concat 吗？

```
 SELECT GROUP_CONCAT(DISTINCT name ORDER BY name DESC SEPARATOR ' ')as name, 
    adress FROM student 
   GROUP BY adress 
  ORDER BY count(adress), name DESC 
```

[**在这里演示**](http://sqlfiddle.com/#!2/4dcf4/10)

# c# - 从 Process.Start() 获取所需输出的问题

> ID：14094771
> 
> 赞同：1
> 
> 时间：2012-12-30T21:19:55.033
> 
> 标签：c#, command-line

我正在开发一个应用程序，它调用几个命令行应用程序对一些视频文件进行一些后期处理。

现在，我正在尝试使用[Comskip](http://www.kaashoek.com/comskip/)从我的有线卡调谐器中识别视频录制中的广告插播。这运行得很好，但是我在获取所需的屏幕输出时遇到了问题。

```
String stdout = null;

using (var process = new Process())
{
    var start = new ProcessStartInfo(comskip, cmdLine);

    start.WindowStyle = ProcessWindowStyle.Normal;
    start.CreateNoWindow = true;
    start.UseShellExecute = false;
    start.RedirectStandardOutput = true;

    process.StartInfo = start;

    process.Start();
    process.WaitForExit();

    stdout = process.StandardOutput.ReadToEnd();
} 
```

我期望`stdout`抓取屏幕上显示的内容，就像手动启动应用程序时一样（下面的屏幕截图），这是应用程序正在执行的操作的连续馈送，并且混合在输出中的是提供 % 进度的行，我想用它来更新进度条

![命令行输出](../Images/b61df107ef3862e3047518b8f9e8d833.png)

但是运行上面的代码只会给我：

> 使用的命令行是： "C:\Users\Chris\Google Drive\Tools\ComSkip\comskip.exe" "C:\Users\Chris\Desktop\ComSkip Tuning Files\Modern Family.wtv" "--ini=C: \Users\Chris\Desktop\ComSkip 调整文件\comskip_ModernFamily.ini"
> 
> 根据命令行将 ini 文件设置为 C:\Users\Chris\Desktop\ComSkip Tuning Files\comskip_ModernFamily.ini 使用 C:\Users\Chris\Desktop\ComSkip Tuning Files\comskip_ModernFamily.ini 作为初始值。

我还尝试重定向`StandardError`流并抓取`process.StandardError.ReadToEnd();`，但如果我使用这些选项运行，该过程似乎会挂起。

我是否遗漏了一些东西来捕捉我想要的东西，或者这个应用程序的输出流是否有可能转到其他无法访问的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:25:04.510

请参阅 上的[文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx)`RedirectStandardOutput`。在读取输出之前等待子进程结束可能会导致挂起。

特别是，该示例说不要做你所做的事情：

```
 Process p = new Process();
 // Redirect the output stream of the child process.
 p.StartInfo.UseShellExecute = false;
 p.StartInfo.RedirectStandardOutput = true;
 p.StartInfo.FileName = "Write500Lines.exe";
 p.Start();
 // Do not wait for the child process to exit before
 // reading to the end of its redirected stream.
 // p.WaitForExit();
 // Read the output stream first and then wait.
 string output = p.StandardOutput.ReadToEnd();
 p.WaitForExit(); 
```

您应该使用事件`OutputDataReceived`，并可能`ErrorDataReceived`更新处理程序中的进度条。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T21:27:00.560

您必须设置以下内容：

```
 process.StartInfo.RedirectStandardOutput = true;
     process.StartInfo.RedirectStandardError = true;
     process.StartInfo.UseShellExecute = false;
     process.OutputDataReceived += new DataReceivedEventHandler(ReadOutput);
     process.ErrorDataReceived += new DataReceivedEventHandler(ErrorOutput);

     process.Start();
     process.BeginOutputReadLine();
     process.BeginErrorReadLine();
     process.WaitForExit(); 
```

`ReadOutput`并在和中捕获输出`ErrorOutput`

```
 private static void ErrorOutput(object sender, DataReceivedEventArgs e)
  {
     if (e.Data != null)
     {
        stdout = "Error: " + e.Data;
     }
  }

  private static void ReadOutput(object sender, DataReceivedEventArgs e)
  {
     if (e.Data != null)
     {
        stdout = e.Data;
     }
  } 
```

# visual-studio-2012 - 在 Visual Studio 2012 中禁用动画

> ID：14094774
> 
> 赞同：1
> 
> 时间：2012-12-30T21:20:26.290
> 
> 标签：visual-studio-2012, parallels

当我点击 Ctrl-Tab 时，“活动工具窗口/文件”弹出动画就位。它让我大吃一惊。与VS2005不同，工具/选项/环境下没有“禁用动画”，这是唯一出现的参考谷歌搜索。

有没有办法禁用这种行为？

所以事实证明这与 Visual Studio 或 Windows 无关。这是 Parallels 的事情——我在 Mac 上运行 VS2012。

[http://forum.parallels.com/showthread.php?t=262509](http://forum.parallels.com/showthread.php?t=262509)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T15:45:25.903

打开工具->选项->常规取消选中“根据客户端性能自动调整视觉体验”取消选中“启用丰富的客户端视觉体验”

这会将 C:\Users\myname\Documents\Visual Studio 2012\Settings\CurrentSettings.vssettings 中的 Animations 属性值切换为 false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:46:02.683

It is no longer accessible but the setting still exists in the VS settings file. Close VS2012 first. Locate your settings file, mine is stored in C:\Users\myname\Documents\Visual Studio 2012\Settings\CurrentSettings.vssettings

Open the file with a text editor and search for "anim". There's an "AnimationSpeed" setting, mine is 5\. And an "Animations" setting, mine is true. Try changing it to false, save and start VS again. Or tinker with the speed, my setting of "5" doesn't do anything that does my head in. So I don't really know how to test if changing these settings has any effect, but you'll quickly find out.

If you see no effect at all then tinker with the Windows animation settings.

# stylecop - 如何永久排除特定的 styleCop 规则？

> ID：14094776
> 
> 赞同：0
> 
> 时间：2012-12-30T21:20:31.443
> 
> 标签：stylecop

我有一些不需要遵循的规则，所以我正在寻找一种方法 - 如何从我将在 Visual Studio 2010 中制作的每个项目中禁用这些特定规则。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:24:58.733

您可以使用将由多个解决方案共享的*父设置文件。*stylecop 将在路径中的每个父目录中搜索要应用的设置文件。把一个放在一个共同的父目录中。

或者您可以使用与 StyleCop.dll 位于同一目录中的*全局设置文件。*

详情在这里：

[http://stylecop.codeplex.com/wikipage?title=Sharing%20StyleCop%20Settings%20Across%20Projects](http://stylecop.codeplex.com/wikipage?title=Sharing%20StyleCop%20Settings%20Across%20Projects)

# java - JOGL FBObject 多重采样

> ID：14094789
> 
> 赞同：1
> 
> 时间：2012-12-30T21:21:47.527
> 
> 标签：java, opengl, 3d, jogl, multisampling

我正在使用**JOGL**开发一个简单的 OpenGL 3D 图形引擎。现在，我已经实现了一个简单的渲染管道，它将场景渲染到 FBO 上，然后将其传递给着色器，将 FBO 的颜色纹理渲染到屏幕上，可以选择应用一些后期处理效果，例如模糊。

在不使用 FBO 的情况下，使用 JOGL 很容易实现美观的多重采样。例如，因为我在 Swing 中托管我的 GL 面板，所以我使用 a`GLJPanel`并像这样创建它，以启用多重采样：

```
GLCapabilities caps = new GLCapabilities(null);
caps.setSampleBuffers(true);
caps.setNumSamples(8);
GLJPanel gljp = new GLJPanel(caps); 
```

这非常简单，并且会产生漂亮的结果。但是，当必须首先将几何图形绘制到 FBO 时，这并不是很有用。最好的方法是在 FBO 上附加一个 GL_TEXTURE_2D_MULTISAMPLE，渲染场景，然后在第二遍的片段着色器中执行多重采样。

尽管 JOGL 提供了一个相当广泛的**FBObject**类来帮助管理 FBO，但我没有找到一种方法让它渲染到多采样纹理（它只允许使用`TextureAttachment`对象，这些对象被硬编码为只能使用 TEXTURE_2D 资源）。因此，我只使用提供的 FBObject 作为骨架，但使用普通 gl.gl* 调用完成大部分工作。我知道这不是 hacky 或任何东西，也许一个“更清洁”的解决方案只是扩展`TextureAttachment`和创建一个专用于多采样纹理的类。

我只是想知道 - 我是否遗漏了什么，或者 JOGL 真的不支持具有多重采样纹理的 FBO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T20:36:17.633

如果有人在寻找相同的答案，我实际上只是完全停止使用 FBObjects，我目前正在使用普通的旧`gl.gl*`命令来管理我的帧缓冲区（包括我的新延迟渲染器的 GBuffer）。

# delphi - 我的程序 Delphi 未检测到转义键

> ID：14094794
> 
> 赞同：-3
> 
> 时间：2012-12-30T21:22:32.550
> 
> 标签：delphi, keypress

我希望我的程序检测是否按下 ESC 键来做某事，但它没有检测到它！即使焦点设置在另一个组件上，我也想在整个运行时检测转义键按下！我试过这段代码

```
if key=#27 then
 begin
  //do something
 end; 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T21:32:32.363

您正在使用哪个事件处理程序？如果它连接到控件，则当按下某个键且**控件**具有焦点时将触发该事件。

**如果您希望在您的应用程序**获得焦点时按下某个键时触发事件，请将TApplicationEvents 组件拖放到表单上并添加一个 OnMessage 事件处理程序，如下所示：

```
procedure TfrmMain.ApplicationEvents1Message(var Msg: tagMSG;
  var Handled: Boolean);
begin
  case Msg.message of
    WM_KEYDOWN:
      if Msg.wParam = 27 then
      begin
        // Do something
      end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T21:42:52.330

为了将我上面写的内容正式化为答案，借用 Delphi 3 的 OnKeyDown 帮助

*如果用户按 Esc，以下代码将中止打印作业。请注意，您应该将 KeyPreview 设置为 True 以确保调用 Form1 的 OnKeyDown 事件处理程序。*

```
procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
  begin
    if (Key=VK_ESCAPE) and Printer.Printing then
      begin
        Printer.Abort;
        MessageDlg('Printing aborted', mtInformation, [mbOK],0);
      end;
  end; 
```

# javascript - 闭包，for循环

> ID：14094798
> 
> 赞同：2
> 
> 时间：2012-12-30T21:23:08.523
> 
> 标签：javascript, loops, for-loop, closures

编码：

```
function updateProfil() {
  $.getJSON("./index_logg2.php", null, processCustom); 
}

function processCustom(data) {
  $.each(data, function(k, v) {
    $(".panel").append('<center><img src="images/custom/'+ v +' "title="Click to set it" "></center><br />');
    /*
    $(".panel").click(function() {
      var data= ???
      $.post("./index_logg2.php", { data: ??? }, updateProfil ); 
    });
    */
  });
} 
```

我能够动态地可视化图像，但我希望能够在单击图像时（动态地）捕获图片名称。

我知道我必须使用 1\. javascript 闭包，2\. for 循环 inseatad 的 for - in 循环。包含图像名称的 JSON 如下所示：

```
["1.jpg","2.png","3.gif","somename.jpg", "someothername.jpg" .............] 
```

请你帮我解决这个问题。先感谢您 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:06:14.260

当您希望在单击图像时发生某些事情时，您可以执行以下操作：

```
 $("img").click(function () {
       alert("you clicked "+this.src);
   }); 
```

这是一个演示：

[http://codepen.io/hoganlong/pen/gLleJ](http://codepen.io/hoganlong/pen/gLleJ)

对于 div 命名面板中的项目，您将使用：

```
 $("#panel img").click(function () {
       alert("you clicked "+this.src);
   }); 
```

# python - mysql中的正则表达式字符串替换

> ID：14094800
> 
> 赞同：1
> 
> 时间：2012-12-30T21:23:13.110
> 
> 标签：python, mysql, sql, regex

是否有一种简单的方法可以在 mysql 中执行以下操作：

```
"Value ( some stuff here) " --> "Value" 
```

类似的东西`REPLACE("(*)","")`？我将如何去做这件事并去除剩余的空白？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:41:00.680

尝试：

```
"/s*/(.*/)/s*" 
```

这将匹配前导空格、括号中的文本和尾随空格。

查看 UDF（用户定义的函数）。你会想要像 oracle 的 REGEXP_REPLACE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:55:46.043

在 mysql 中，您不能用正则表达式帮助替换行项。因此，您必须从定义的列中选择所有值“Value (some stuff here)”。使用 python 工具在客户端处理它们。之后，您需要更新 mysql 数据库中的所有行。

或者您可以阅读此答案[How to do a regular expression replace in MySQL?](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)

# python-2.7 - 从 Python 中表示其名称的字符串构造一个可调用对象

> ID：14094802
> 
> 赞同：4
> 
> 时间：2012-12-30T21:23:44.123
> 
> 标签：python-2.7, callable

假设我有这样的课

```
class MyClass(AnotherClass):
  def __init__(self, arg1, arg2):
    self.arg1 = arg1
    self.arg2 = arg2

  def f(self):
    #dostuff 
```

我有字符串“我的班级”

```
str = "my class" 
```

我可以做这个：

```
class_name_from_str = str.title().replace(" ", "") # now class_name_from_str is "MyClass" 
```

我怎样才能使 class_name_from_str 可调用？我想要这样的东西：

```
callable_obj = some_process(class_name_from_str)
o = callable_obj(arg1, arg2)
o.f() 
```

顺便说一句，我正在使用 Python 2.7

**更新**：正如[Matti Virkkunen](https://stackoverflow.com/users/227267/matti-virkkunen)在评论中建议的那样，一个好的解决方案是创建一个字典来映射字符串和类

```
my_calls_dict = {'my class' : MyClass, 'my other class' : MyOtherClass} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T21:27:28.073

这有点取决于您的班级所在的位置。如果它在当前模块中

```
globals()[class_name] 
```

应该让你上课。如果它在模块中，请将 globals() 替换为模块（`__import__()`如果您希望模块名称也是动态的，则可以通过 - 导入）。

这将是考虑这是否是一个好主意的好时机。例如，制作名称和相应类的字典不是更清楚吗？如果你`.title().strip()`的东西是你实际代码的一部分，老实说我想不出它可能会做什么。

# java - 创建对 ImageView 的引用会导致应用程序崩溃

> ID：14094803
> 
> 赞同：0
> 
> 时间：2012-12-30T21:23:55.663
> 
> 标签：java, android, crash, imageview

我正在创建一个启动画面（.jpg 格式），它填满整个屏幕，按下时会启动一个新的 .jpg 文件`Activity`。我现在的问题是当我引用 ImageView 时应用程序崩溃了。

我的 Welcomescreen.java 类：

```
public class Welcomescreen extends Activity implements OnClickListener {

ImageView wd;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //PROGRAMM CRASHES IN THIS LINE
    wd = (ImageView) this.findViewById(R.id.lwd);   

    // Fullscreen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.welcomescreen);

    // when Image is clicked
    wd.setOnClickListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.welcomescreen, menu);
    return true;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()){
    case R.id.lwd:
        startActivity(new Intent("com.tm.talesof.MENU"));
        break;
    }
}

} 
```

这是我的 .xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Welcomescreen">

<ImageView 
    android:src="@drawable/smalltest"
    android:id="@+id/lwd"
    android:layout_height="match_parent"
    android:layout_width="match_parent"
    />

</RelativeLayout> 
```

应用程序在 .java 类中的注释行崩溃。如果我删除该行，一切都很好，但没有显示图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:26:39.710

您尚未发布 LogCat 错误，但您必须先`setContentView()` *致电* `findViewById()`：

```
// Fullscreen
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);

setContentView(R.layout.welcomescreen);
wd = (ImageView) this.findViewById(R.id.lwd); 
```

我不确定如果你指出它为什么会崩溃，但我知道它会在`onCreate()`你第一次引用你的 ImageView 时崩溃`wd.setOnClickListener(this)`。

# javascript - 如何防止调用 jQuery 函数

> ID：14094804
> 
> 赞同：1
> 
> 时间：2012-12-30T21:24:31.957
> 
> 标签：javascript, jquery, onclick, click

> **可能重复：**
> [如何防止其他事件处理程序，从第一个处理程序，在 jQuery](https://stackoverflow.com/questions/8118489/how-to-prevent-other-event-handlers-from-first-handler-in-jquery)

我有两个这样的 jQuery 函数：

```
$('#click-me').live('click', function(event) {
    alert("Hello World");
    event.preventDefault();
});
$('#click-me').live('click', function(event) {
    alert("Goodbye World");
}); 
```

听起来可能很奇怪，但是假设我不希望第二个功能（执行“再见世界”警报），我该怎么做？event.preventDefault 没有帮助。

谢谢彼得

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T21:27:03.633

您可以使用它`event.stopImmediatePropagation()`来防止所有后续处理程序被触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:33:34.737

尝试类似的东西

```
var goodbyeCallback = function(event) {
   alert("Goodbye World");
}

$('#click-me').live('click', function(event) {
    alert("Hello World");
    $('#click-me').die('click', goodbyeCallback);
});
$('#click-me').live('click', goodbyeCallback); 
```

回调触发时的顺序可能有问题；你不能把他们加入一个回调吗？

顺便说一句：[jQuery 文档](http://api.jquery.com/live/)说它已`.live()`被弃用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T21:33:52.290

而不是`live()`使用`on()`and `off()`：

```
$('#click-me').on('click', canBeOnOrOff);

function canBeOnOrOff(event) {
  alert('goodbye world');

  // this removes the event handler from the click event
  $('#click-me').off('click', canBeOnOrOff);
} 
```

# php - 使用 shell_exec 传递管理员用户名和密码

> ID：14094806
> 
> 赞同：1
> 
> 时间：2012-12-30T21:24:35.620
> 
> 标签：php, powershell, shell-exec

我有一个 Powershell 脚本，当我直接在 Web 服务器（Windows 2008R2、IIS）上运行时，它会成功完成。我现在正在尝试从 php 页面启动脚本。脚本启动，我可以在任务管理器中看到该过程。

当我从 php 页面使用 shell_exec 调用脚本时，它失败并出现错误

```
"Exception calling "FindOne" with "0" argument(s): "An operations error occurred." 
```

我可以从任务管理器中看到该脚本以用户 IUSR 身份运行。我很确定这是脚本失败的原因，因为要成功完成它需要以域管理员身份运行。

我正在使用以下命令调用脚本

$username = 页面上当前登录的用户（针对 AD 进行身份验证）
$newPword1 = 新用户密码

```
$query = shell_exec("powershell -command $psScriptPath '$username' '$newPword1' < NUL"); 
```

Powershell脚本：

```
#*=============================================================================
#* PARAMETER DECLARATION
#*=============================================================================

param([string]$username,[string]$pword)

#*=============================================================================
#* INITIALISE VARIABLES
#*=============================================================================
# Increase buffer width/height to avoid Powershell from wrapping the text before
# sending it back to PHP (this results in weird spaces).
$pshost = Get-Host
$pswindow = $pshost.ui.rawui
$newsize = $pswindow.buffersize
$newsize.height = 3000
$newsize.width = 400
$pswindow.buffersize = $newsize

#*=============================================================================
#* SCRIPT BODY
#*=============================================================================

$root = [ADSI]'LDAP://<server>/<DNtoOU>'
$searcher = new-object System.DirectoryServices.DirectorySearcher($root)
$searcher.filter = "(&(objectCategory=person)(sAMAccountName=$username))"
$user = $searcher.findone()

$userDN = $user.path

$user=[ADSI]$($userDN)
$user.SetPassword($pword)
$user.setinfo()
write-host "success" 
```

是否可以像使用上述命令一样传递域管理员用户名/密码来运行 powershell，从而允许脚本成功运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:44:52.383

# php - 如何隐藏媒体流网址

> ID：14094810
> 
> 赞同：-4
> 
> 时间：2012-12-30T21:24:50.750
> 
> 标签：php, javascript, mysql, html

我有一个这样的链接：[http ://example.com/temp/test/index.php?v=](http://example.com/temp/test/index.php?v=) **de72800bf2682d7d1b808e48cf351543db88c7a0** 我有一个这样的数据表行：ID=1, Title="short movie", direct_url="http: //example.com/temp/test/Ideas(short_film).webm", "indirect_url = " **de72800bf2682d7d1b808e48cf351543db88c7a0** " 我想这样做：如果我转到我上面提到的链接，该页面将是视频标签：

```
<video src="**http://example.com/temp/test/index.php?v=de72800bf2682d7d1b808e48cf351543db88c7a0**"></video> 
```

它开始从直接 url [http://example.com/temp/test/Ideas(short_film).webm](http://example.com/temp/test/Ideas(short_film).webm)播放视频，但它不会出现在页面中，所以没有人可以使用直接链接。我可以通过什么方式做到这一点？也许Javascript，也许php可以帮助我，但我不知道。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:28:42.530

是否要阻止捕获或保存视频？**不可能的**

是否要隐藏 URL？**不可能**
那是不可能的，因为浏览器需要访问它。并且该信息保存在某个地方（例如，在网络流量列表中）。

即使您会找到其他流式传输/发送视频信息的方式，它也不会直接进入浏览器。信息通过许多站点传递，其中一个站点可以复制数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:28:34.690

你不能。如果我的浏览器可以请求 URL，我可以看到 URL。您将不得不研究保护您的内容的其他方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T21:40:15.283

你当然可以用 php 做到这一点。

如果用户打开的页面包含 `<video src="**http://example.com/temp/test/index.php?v=de72800bf2682d7d1b808e48cf351543db88c7a0**"></video>`

您的 index.php 应该执行查找以确定*不应通过网络访问*的视频文件的路径，打开该文件，然后将其流式传输到浏览器。

# android - 当我尝试将意图发送到另一个活动（android）时，应用程序崩溃了

> ID：14094818
> 
> 赞同：0
> 
> 时间：2012-12-30T21:26:17.880
> 
> 标签：android, eclipse, android-intent, android-listview

每当我尝试进行其他活动时，应用程序都会崩溃。这是我的源代码：

主.Java

```
public class Main extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // storing string resources into Array
        String[] adobe_products ;
        adobe_products = getResources().getStringArray(R.array.adobe_products);

        // Binding resources Array to ListAdapter
        this.setListAdapter(new ArrayAdapter<String>(this, R.layout.row,R.id.weekofday, adobe_products));

        ListView lv = getListView();

        // listening to single list item on click

        lv.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {

              // selected item
              String product = ((TextView) view).getText().toString();

              // Launching new Activity on selecting single List Item
              Intent i = new Intent(getApplicationContext(), SingleListItem.class);
              // sending data to new activity
              i.putExtra("product", product);
              startActivity(i);

          }
        });

    }
} 
```

SingleListItem.java

```
public class SingleListItem extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.row);

        TextView txtProduct = (TextView) findViewById(R.id.title);
        TextView txtProduct2 = (TextView) findViewById(R.id.product_label2);
        Intent i = getIntent();
        // getting attached intent data
        String product = (String) i.getStringExtra("product");
        // displaying selected product name
        txtProduct.setText(product);
        txtProduct.setTextColor(Color.RED);

        if(product.equals("Odilo Globocnik"))
        {
            txtProduct2.setText(R.string.Odilo_Globocnik);
            txtProduct2.setTextColor(Color.BLUE);
        }
        else if (product.equals("Josef Kramer"))
        {
            txtProduct2.setText(R.string.Josef_Kramer);
            txtProduct2.setTextColor(Color.BLUE);
        }
        else if (product.equals("Paul Blobel"))
        {
            txtProduct2.setText(R.string.Paul_Blobel);
            txtProduct2.setTextColor(Color.BLUE);
        }
        else if (product.equals("Friedrich Jeckeln"))
        {
            txtProduct2.setText(R.string.Friedrich_Jeckeln);
            txtProduct2.setTextColor(Color.BLUE);
        }

    }
} 
```

行.XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal">
<ImageView
android:id="@+id/icon"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/ic_launcher"/>
<TextView
android:id="@+id/weekofday"
android:layout_width="wrap_content"
android:layout_height="wrap_content"/>
</LinearLayout> 
```

单项列表.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <TextView
        android:id="@+id/product_label2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
    />

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
    />
</LinearLayout> 
```

清单有：

```
<activity android:name=".SingleListItem"
                    android:label="Single Item Selected">

        </activity> 
```

日志猫：

```
12-30 23:13:55.129: E/AndroidRuntime(19016): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-30 23:13:55.129: E/AndroidRuntime(19016):    at android.app.ListActivity.onContentChanged(ListActivity.java:243)
12-30 23:13:55.129: E/AndroidRuntime(19016):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:210)
12-30 23:13:55.129: E/AndroidRuntime(19016):    at android.app.Activity.setContentView(Activity.java:1657)
12-30 23:13:55.129: E/AndroidRuntime(19016):    at com.example.booktest.Main.onCreate(Main.java:20)
12-30 23:13:55.129: E/AndroidRuntime(19016):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-30 23:13:55.129: E/AndroidRuntime(19016):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1617)
12-30 23:13:55.129: E/AndroidRuntime(19016):    ... 11 more
12-30 23:15:35.189: W/dalvikvm(19093): threadid=1: thread exiting with uncaught exception (group=0x40018560)

12-30 23:15:35.199: E/AndroidRuntime(19093): FATAL EXCEPTION: main
12-30 23:15:35.199: E/AndroidRuntime(19093): java.lang.ClassCastException: android.widget.LinearLayout
12-30 23:15:35.199: E/AndroidRuntime(19093):    at com.example.booktest.Main$1.onItemClick(Main.java:40)
12-30 23:15:35.199: E/AndroidRuntime(19093):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
12-30 23:15:35.199: E/AndroidRuntime(19093):    at android.widget.ListView.performItemClick(ListView.java:3513)
12-30 23:15:35.199: E/AndroidRuntime(19093):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
12-30 23:15:35.199: E/AndroidRuntime(19093):    at android.os.Handler.handleCallback(Handler.java:587)
12-30 23:15:35.199: E/AndroidRuntime(19093):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-30 23:15:35.199: E/AndroidRuntime(19093):    at android.os.Looper.loop(Looper.java:130)
12-30 23:15:35.199: E/AndroidRuntime(19093):    at android.app.ActivityThread.main(ActivityThread.java:3737)
12-30 23:15:35.199: E/AndroidRuntime(19093): 
```

我知道我的变量名称不好。我会尽快更改它们。

编辑：新目录：

```
12-30 23:51:19.759: E/AndroidRuntime(19744): Caused by: java.lang.NullPointerException
12-30 23:51:19.759: E/AndroidRuntime(19744):    at com.example.booktest.SingleListItem.onCreate(SingleListItem.java:22)
12-30 23:51:19.759: E/AndroidRuntime(19744):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-30 23:51:19.759: E/AndroidRuntime(19744):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1617)
12-30 23:51:19.759: E/AndroidRuntime(19744):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:32:56.353

```
java.lang.ClassCastException: android.widget.LinearLayout
    at com.example.booktest.Main$1.onItemClick(Main.java:40) 
```

您的应用程序在此处崩溃：

```
String product = ((TextView) view).getText().toString(); 
```

因为`view`是 LinearLayout 而不是 TextView。尝试：

```
String product = ((TextView) view.findViewById(R.id.weekOfDay)).getText().toString(); 
```

* * *

**另外**
可以看到这是一个不同的LogCat，这里的问题是：

```
Caused by: java.lang.NullPointerException
    at com.example.booktest.SingleListItem.onCreate(SingleListItem.java:22) 
```

如果您查看第 22 行的 SingleListItem，您会发现：

```
txtProduct.setText(product); 
```

`txtProduct`空也是如此。这意味着`findViewById(R.id.title)`无法在您的布局中找到任何具有 id 的视图`@+id/title`。让我们看看你正在加载什么视图：

```
this.setContentView(R.layout.row); 
```

嗯，`row.xml`没有`title`（或`product_label2.xml`）的 TextView。您加载了错误的布局，请使用：

```
this.setContentView(R.layout.singleitemlist); 
```

* * *

现在我无法引导您完成调试应用程序的每一步。但是根据我上面的建议，您应该了解如何阅读 LogCat。堆栈跟踪（LogCat 错误）将直接导致问题。

请单击复选标记以接受此答案作为原始问题的解决方案，如果您无法解决未来的错误，请提出新问题。祝你好运！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T22:19:08.870

山姆的回答是 100% 正确的，你的`Main`活动也有另一个错误。

```
Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-30 23:13:55.129: E/AndroidRuntime(19016):    at android.app.ListActivity.onContentChanged(ListActivity.java:243) 
```

因为您扩展了 ListActivity，所以 Android 代码正在寻找具有特定 ID 的 ListView。你需要改变：

主要的.xml

```
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
/> 
```

对此：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
/> 
```

如果您了解我们是**如何****从您的 LogCat**中得出这些答案的，那将是非常宝贵的一课，并且您将来可以自己修复更多错误，然后再需要再次发布 :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T22:11:05.640

我不确定这是否是您`extras`从`Intent`.

尝试这个：

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
   product = extras.getString("product");
} 
```

# python - Python-Scrypt 不安装在 Windows 7 64 位

> ID：14094824
> 
> 赞同：0
> 
> 时间：2012-12-30T21:27:06.527
> 
> 标签：python, scrypt

我的机器上似乎没有安装 Scrypt。我在[这里](https://bitbucket.org/mhallin/py-scrypt/issue/4/windows-7-issues-python-2x)安装了适用于 Windows 的版本。我使用Visual Studio免费版，安装OpenSSL 32位，编译BCrypt成功；但 SCrypt 返回此错误：

```
> setup.py install
running install
running build
running build_ext
building 'scrypt' extension
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\amd64\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -DHAVE_CONFIG_H -Iscrypt-1.1.6 -Iscrypt-1.1.6/lib -Iscrypt-1.1.6/lib/scryptenc -Iscrypt-1.1.6/lib/crypto -Iscrypt-1.1.6/lib/util -Ic:\OpenSSL-Win32\include -IC:\Python27\include -IC:\Python27\PC /Tcsrc/scrypt2.c /Fobuild\temp.win-amd64-2.7\Release\src/scrypt2.obj
scrypt2.c
scrypt-1.1.6/lib\scryptenc/scryptenc.h(32) : fatal error C1083: Cannot open include file: 'stdint.h': No such file or directory
error: command '"C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\amd64\cl.exe"' failed with exit status 2
Exit code: 1 
```

更新：复制了库，现在我得到另一个错误：

```
running install
running build
running build_ext
building 'scrypt' extension
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\amd64\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -DHAVE_CONFIG_H -Iscrypt-1.1.6 -Iscrypt-1.1.6/lib -Iscrypt-1.1.6/lib/scryptenc -Iscrypt-1.1.6/lib/crypto -Iscrypt-1.1.6/lib/util -Ic:\OpenSSL-Win32\include -IC:\Python27\include -IC:\Python27\PC /Tcsrc/scrypt2.c /Fobuild\temp.win-amd64-2.7\Release\src/scrypt2.obj
scrypt2.c
src/scrypt2.c(72) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int',possible loss of data
src/scrypt2.c(73) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data
src/scrypt2.c(87) : error C2143: syntax error : missing ';' before 'type'
src/scrypt2.c(92) : error C2065: 'value' : undeclared identifier
src/scrypt2.c(92) : warning C4047: '=' : 'int' differs in levels of indirection from 'PyObject *'
src/scrypt2.c(96) : error C2065: 'value' : undeclared identifier
src/scrypt2.c(96) : warning C4047: 'return' : 'PyObject *' differs in levels of indirection from 'int'
src/scrypt2.c(99) : error C2143: syntax error : missing '{' before '*'
src/scrypt2.c(132) : error C2143: syntax error : missing ';' before 'type'
src/scrypt2.c(136) : error C2065: 'value' : undeclared identifier
src/scrypt2.c(136) : warning C4047: '=' : 'int' differs in levels of indirection from 'PyObject *'
src/scrypt2.c(139) : error C2065: 'value' : undeclared identifier
src/scrypt2.c(139) : warning C4047: 'return' : 'int *' differs in levels of indirection from 'int'
src/scrypt2.c(142) : error C2061: syntax error : identifier 'ScryptMethods'
src/scrypt2.c(142) : error C2059: syntax error : ';'
src/scrypt2.c(142) : error C3409: empty attribute block is not allowed
src/scrypt2.c(142) : error C2513: '/*global*/ ' : no variable declared before '='
src/scrypt2.c(151) : error C2065: 'ScryptMethods' : undeclared identifier
src/scrypt2.c(151) : warning C4047: 'function' : 'PyMethodDef *' differs in levels of indirection from 'int'
src/scrypt2.c(151) : warning C4024: 'Py_InitModule4_64' : different types for formal and actual parameter 2
error: command '"C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\amd64\cl.exe"' failed with exit status 2 
```

Update2：不想使用 GCC 编译：

```
>setup.py build -c mingw32
running build
running build_ext
building 'scrypt' extension
C:\MinGW64\bin\gcc.exe -mno-cygwin -mdll -O -Wall -DHAVE_CONFIG_H -Iscrypt-1.1.6 - Iscrypt-1.1.6/lib -Iscrypt-1.1.6/lib/scryptenc -Iscrypt-1.1.6/lib/crypto -Iscrypt-1.1.6/lib/util -Ic:\OpenSSL-Win32\include -IC:\Python27\include -IC:\Python27\PC -c  src/scrypt2.c -o build\temp.win-amd64-2.7\Release\src\scrypt2.o
gcc: error: unrecognized command line option '-mno-cygwin'
error: command 'gcc' failed with exit status 1 
```

`-mno-cygwin`并且没有`gcc --help`

编辑 n:

```
>setup.py build -c mingw32
running build
running build_ext
building 'scrypt' extension
C:\MinGW64\bin\gcc.exe -mdll -O -Wall -DHAVE_CONFIG_H -Iscrypt-1.1.6 -Iscrypt-1.1.6/lib -Iscrypt-1.1.6/lib/scryptenc -Iscrypt-1.1.6/lib/crypto -Iscrypt-1.1.6/lib/util -Ic:\OpenSSL-Win32\include -IC:\Python27\include -IC:\Python27\PC -c src/scrypt2.c -o  build\temp.win-amd64-2.7\Release\src\scrypt2.o
C:\MinGW64\bin\gcc.exe -mdll -O -Wall -DHAVE_CONFIG_H -Iscrypt-1.1.6 -Iscrypt-1.1.6/lib  -Iscrypt-1.1.6/lib/scryptenc -Iscrypt-1.1.6/lib/crypto -Iscrypt-1.1.6/lib/util -Ic:\OpenSSL-Win32\include -IC:\Python27\include -IC:\Python27\PC -c scrypt- 1.1.6/lib/crypto/crypto_aesctr.c -o build\temp.win-amd64-2.7\Release\scrypt- 1.1.6\lib\crypto\crypto_aesctr.o
In file included from scrypt-1.1.6/lib/crypto/crypto_aesctr.c:34:0:
c:\OpenSSL-Win32\include/openssl/aes.h:1:1: error: expected identifier or '(' before  '.' token
In file included from scrypt-1.1.6/lib/crypto/crypto_aesctr.h:34:0,
from scrypt-1.1.6/lib/crypto/crypto_aesctr.c:38:
c:\OpenSSL-Win32\include/openssl/aes.h:1:1: error: expected identifier or '(' before '.' token
In file included from scrypt-1.1.6/lib/crypto/crypto_aesctr.c:38:0:
scrypt-1.1.6/lib/crypto/crypto_aesctr.h:51:5: warning: 'struct crypto_aesctr' declared   inside parameter list [enabled by default]
scrypt-1.1.6/lib/crypto/crypto_aesctr.h:51:5: warning: its scope is only this definition or declaration, which is probably not what you want [enabled by default]
scrypt-1.1.6/lib/crypto/crypto_aesctr.h:57:32: warning: 'struct crypto_aesctr' declared inside parameter list [enabled by default]
scrypt-1.1.6/lib/crypto/crypto_aesctr.c:41:2: error: unknown type name 'AES_KEY'
scrypt-1.1.6/lib/crypto/crypto_aesctr.c:54:20: error: unknown type name 'AES_KEY'
scrypt-1.1.6/lib/crypto/crypto_aesctr.c:82:1: error: conflicting types for 'crypto_aesctr_stream'
In file included from scrypt-1.1.6/lib/crypto/crypto_aesctr.c:38:0:

scrypt-1.1.6/lib/crypto/crypto_aesctr.h:50:6: note: previous declaration of 'crypto_aesctr_stream' was here
scrypt-1.1.6/lib/crypto/crypto_aesctr.c: In function 'crypto_aesctr_stream':
scrypt-1.1.6/lib/crypto/crypto_aesctr.c:97:4: warning: implicit declaration of function    'AES_encrypt' [-Wimplicit-function-declaration]
scrypt-1.1.6/lib/crypto/crypto_aesctr.c: At top level:
scrypt-1.1.6/lib/crypto/crypto_aesctr.c:113:1: error: conflicting types for  'crypto_aesctr_free'
In file included from scrypt-1.1.6/lib/crypto/crypto_aesctr.c:38:0:
scrypt-1.1.6/lib/crypto/crypto_aesctr.h:57:6: note: previous declaration of 'crypto_aesctr_free' was here
error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:31:33.477

`stdint.h`是 C99 的一部分。Microsoft 的 C 编译器不支持 C99。您可能必须使用像[MinGW](http://www.mingw.org/)这样的其他编译器或使用类似[msinttypes](https://code.google.com/p/msinttypes/)的东西。

# graphics - 像素着色如何对环境光遮蔽体积起作用？

> ID：14094825
> 
> 赞同：0
> 
> 时间：2012-12-30T21:27:06.753
> 
> 标签：graphics, rendering, gpu, pixel-shader

我试图理解[这里](http://graphics.cs.williams.edu/papers/AOVHPG10/AOV-tr.pdf)描述的环境光遮蔽技术，但我无法理解像素着色器到底在做什么。

像素着色器是否在属于遮挡体积表面的点上调用？谁能解释一个简单的场景（比如从内部看到的立方体角）像素如何获得它们的 AO 值？

（从[游戏](https://gamedev.stackexchange.com/questions/46510/how-does-pixel-shading-work-for-ambient-occlusion-volumes)堆栈交换交叉发布）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T03:34:19.343

基本上，Pixel Shader 负责根据 poligon 面向虚拟光源的角度来反射对象中的光。在这种情况下，通过像素着色器模拟每个纹理中的光及其数量，可以实现 AO。注意：像素着色是实时的，所以如果物体或观察点移动，光线也会移动并制作出逼真的纹理。

# java - 玩2模板如何访问list类型的实体成员

> ID：14094827
> 
> 赞同：1
> 
> 时间：2012-12-30T21:27:16.613
> 
> 标签：java, frameworks, playframework-2.0

我的实体是：UserShoppingList、Product 和 Category 如下：

```
package models;

import java.util.*;

import play.db.ebean.*;
import play.data.validation.Validation;
import play.data.validation.Constraints.*;

import javax.persistence.*;

import com.avaje.ebean.Ebean;

/**
 * Entity managed by Ebean
 */

@Entity
public class UserShoppingList extends Model{

      @Id
      public Long id;

      @Required
      public String listName;

      @ManyToOne
      public User user;

      @ManyToMany
      public List<Product> products = new ArrayList<Product>();

      //getters and setters

//(I have included them, not shown here)

package models;

import java.util.*;

import play.db.ebean.*;
import play.data.validation.Constraints.*;
import javax.persistence.*;

/**
 * Product entity managed by Ebean
 */

@Entity
public class Product extends Model{
     @Id
     public Long Id;

     @ManyToOne
     public Category category;

     @Required
     public String brandName;

     @Required
     public String productName;

    // -- Queries

     public static Model.Finder<Long,Product> find = new Model.Finder(Long.class, Product.class);

package models;

import java.util.List;

import javax.persistence.*;

import play.db.ebean.*;
import play.data.validation.*;
import play.db.jpa.*;

/**
 * Category entity managed by JPA
 */
@Entity 

public class Category {
     @Id
     public Long id;

     @Constraints.Required
     public String categoryName;

     // --getters and setters 
```

我的模板：

```
@(shoppinglist: List[models.Product], categorylist: List[Category], 
userShoppingListsForm: Form[models.UserShoppingList])

@import helper._

@main("Shopping list products") {

    var productlist = shoppinglist.getProducts()

    <h1>Shopping List</h1>

    @for(c <- categorylist){

    <ul>

            <li class = "categoryrow">@categorylist.getCategoryName()</li>

            @for(p <- productlist) {

            <ul>
                <li class="productcolumn">  
                    @p.getBrandName()
                </li>

                <li class="productcolumn">  
                    @p.getProductName()
                </li>               

                <li class="command">
                    id = @p.getId()!
                    @form(routes.ShoppingLists.deleteProduct(id)) {
                    <input type="submit" value="Delete">
                    }
                </li>

            </ul>

            }

        </ul>

        }

        <h2>Add a product to list</h2>

        @form(routes.ShoppingLists.newUserShoppingList()) {

            @inputText(userShoppingListsForm("listName")) 

            <input type="submit" value="Create">

        }

} 
```

我收到以下错误：

> 值`getCategoryName`不是`java.util.List[models.Category]`

有人可以建议我为基于 Java 的 Play 2 框架创建模板以访问本身是列表的实体成员（例如：“UserShoppingList”中的产品吗？

非常感谢任何帮助。太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:10:46.847

您想对列表元素使用 getter，但您试图整体使用它`List`

可能这是正确的解决方案：

```
<li class = "categoryrow">@c.getCategoryName()</li> 
```

# php - 根据mysql查询自动从数组中选择选项作为默认值

> ID：14094834
> 
> 赞同：-1
> 
> 时间：2012-12-30T21:27:41.117
> 
> 标签：php, mysql

我允许我的用户选择小时、分钟和上午/下午选项。稍后，我希望他们能够编辑此选项。为了这个问题，我将专注于小时，因为同样的逻辑也适用于其他人。

当我的用户最初选择他们的时间时，他们会从一个选项中选择一个值。代码如下所示：

```
 <select>
               <?

        foreach($timehours as $key => $value){
        echo "<option name=\"hour1\" value=\"$key\">$value</option>";
        }
            ?>

 </select> 
```

$timehours 列表如下所示：

```
 $timehours = array(
'01:'          => "1",
'02:'          => "2",
'03:'          => "3",
'04:'          => "4",
'05:'          => "5",
'06:'          => "6",
'07:'          => "7",
'08:'          => "8",
'09:'          => "9",
'10:'          => "10",
'11:'          => "11",
'12:'          => "12",
); 
```

（我正在转换时间，这就是为什么它是这样的，并且我有一个 substr 可以从将它放入下拉列表之前的时间切断“ : ”。所以不要介意它的那部分）

假设用户选择了 08:30pm 并且使用 $hour 从数据库调用了 08 部分。

我尝试了以下代码

```
 <select>
               <?

        foreach($timehours as $key => $value){
        echo "<option name=\"hour1\" value=\"$key\">$hour</option>";
        }
            ?>

 </select> 
```

结果是每个选项都是“08”（列出了12次）。我尝试将 $key 更改为 $hour，我得到的只是“08”的一个选项。

我想要做的是在下拉列表中显示所有 12 小时选项（），但我想将 selected="selected" 添加到该特定选项？我是新手，不知道从哪里开始——这是我第一个真正的 PHP 项目。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:45:30.027

1st of all you should use single quote inside double-quote and vice verse. 2nd, you should put name for select, and not for option.

so your code should look like that:

```
 <select name = 'hour1'>
           <?

    foreach($timehours as $key => $value){
    echo "<option value='$key'>$value</option>";
    }
        ?>

 </select> 
```

P.S. Mix quotes just to make it easier to read

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:33:37.157

正确一：

```
<select name='hour1'>
foreach($timehours as $key => $text){
    if($key==$hour){
        echo "<option selected value=\"$key\">$text</option>";
    }else{
        echo "<option value=\"$key\">$text</option>";
    }
 }
</select> 
```

# python - Mac OS 上的 Python ioctl 错误

> ID：14094835
> 
> 赞同：2
> 
> 时间：2012-12-30T21:27:41.997
> 
> 标签：python, macos, sockets, system-calls, ioctl

我正在尝试在 Mac 上运行以下函数并且它正在抛出

```
struct.pack('iL', bytes, names.buffer_info()[0])
IOError: [Errno 102] Operation not supported on socket 
```

它在linux上工作得很好。谁能告诉我发生了什么事？

* * *

代码：

```
def _get_interface_list():
max_iface = 32  # Maximum number of interfaces(Aribtrary)
bytes = max_iface * 32
is_32bit = (8 * struct.calcsize("P")) == 32  # Set Architecture
struct_size = 32 if is_32bit else 40

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
names = array.array('B', '\0' * bytes)
outbytes = struct.unpack('iL', fcntl.ioctl(
    s.fileno(),
    0x8912,  # SIOCGIFCONF
    struct.pack('iL', bytes, names.buffer_info()[0])
))[0]
namestr = names.tostring()
return namestr 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T00:55:19.107

问题是 Mac OS X 和其他 BSD 系统不支持`SIOCGIFHWADDR`. 您必须使用**[getifaddrs](http://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man3/getifaddrs.3.html)**，现在 Linux 也支持它，尽管 Python 似乎没有公开它。但是，您可以使用**[ctypes](http://docs.python.org/2/library/ctypes.html)**来完成此操作。我希望**[这个例子](http://kbyanc.blogspot.com.br/2010/11/python-enumerating-ip-addresses-on.html)**（BSD 风格的许可证）对你有所帮助。

此外，您可以通过使用**[netifaces](http://pypi.python.org/pypi/netifaces)**来避免所有麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-28T23:08:35.190

在 OS X 10.9 上，SIOCGIFCONF 的标志值是 0xc00c6924。

*更新*

我做了一些小测试，并没有抛出任何错误。我不确定它是否 100% 工作，但我也从 Apple 找到了这个：[https ://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man4/ip.4.html](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man4/ip.4.html) `where "addr" is the local IP address of the desired interface or INADDR_ANY to specify the default interface. An interface's local IP address and multicast capability can be obtained via the SIOCGIFCONF and SIOCGIFFLAGS ioctls. Normal applications should not need to use this option.`

# c++ - 在 OpenGL 中导入和显示 .fbx 文件

> ID：14094837
> 
> 赞同：4
> 
> 时间：2012-12-30T21:28:09.110
> 
> 标签：c++, opengl, import, fbx

我一直在尝试使用`FBX SDK.Untill`. 我设法加载了文件，但我卡在了必须显示它的部分。问题：

1.  这些指数到底是什么？
2.  我应该如何显示顶点？

这是我制作的课程：

`3dModelBasicStructs.h`

```
struct vertex
{
float x,y,z;
};

struct texturecoords
{
float a,b;
};

struct poligon
{
int a,b,c;
}; 
```

`Model.h`

```
#ifndef MODEL_H
#define MODEL_H
#define FBXSDK_NEW_API

#define MAX_VERTICES 80000
#define MAX_POLIGONS 80000

#include <fbxsdk.h>
#include "3dModelBasicStructs.h"
#include <iostream>
#include <GL/glut.h>
using namespace std;

class Model
{

     public:

         Model(char*);
         ~Model();

         void ShowDetails();

         char* GetModelName();
         void  SetModelName( char* );
         void  GetFbxInfo( FbxNode* );
         void  RenderModel();
                     void  InitializeVertexBuffer( vertex* );

      private:

          char Name[25];

          vertex vertices[MAX_VERTICES];
          poligon poligons[MAX_POLIGONS];

          int *indices;
          int numIndices;

          int numVertices;

};

#endif 
```

`Model.cpp`

```
#include "Model.h"

Model::Model(char *filename)
{
cout<<"\nA model has been built!";

numVertices=0;
numIndices=0;

FbxManager *manager = FbxManager::Create();

FbxIOSettings *ioSettings = FbxIOSettings::Create(manager, IOSROOT);
manager->SetIOSettings(ioSettings);

FbxImporter *importer=FbxImporter::Create(manager,"");
importer->Initialize(filename,-1,manager->GetIOSettings());

FbxScene *scene = FbxScene::Create(manager,"tempName");

importer->Import(scene);
importer->Destroy();

FbxNode* rootNode = scene->GetRootNode();
this->SetModelName(filename);
if(rootNode) { this->GetFbxInfo(rootNode); }

}

Model::~Model()
{
cout<<"\nA model has been destroied!";
}

void Model::ShowDetails()
{
cout<<"\nName:"<<Name;
cout<<"\nVertices Number:"<<numVertices;
cout<<"\nIndices which i never get:"<<indices;

}

char* Model::GetModelName()
{
return Name;
}

void Model::SetModelName(char *x)
{
strcpy(Name,x);
}

void Model::GetFbxInfo( FbxNode* Node )
{

int numKids = Node->GetChildCount();
FbxNode *childNode = 0;

for ( int i=0 ; i<numKids ; i++)
{
    childNode = Node->GetChild(i);
    FbxMesh *mesh = childNode->GetMesh();

    if ( mesh != NULL)
    {
//================= Get Vertices ====================================
        int numVerts = mesh->GetControlPointsCount();

        for ( int j=0; j<numVerts; j++)
        {
            FbxVector4 vert = mesh->GetControlPointAt(j);
            vertices[numVertices].x=(float)vert.mData[0];
            vertices[numVertices].y=(float)vert.mData[1];
            vertices[numVertices++].z=(float)vert.mData[2];
            cout<<"\n"<<vertices[numVertices-1].x<<" "<<vertices[numVertices-    1].y<<" "<<vertices[numVertices-1].z;
this->InitializeVertexBuffer(vertices);
        }
//================= Get Indices ====================================
        int *indices = mesh->GetPolygonVertices();
        numIndices+=mesh->GetPolygonVertexCount();
    }
    this->GetFbxInfo(childNode);
}
}

void Model::RenderModel()
{
glDrawElements(GL_TRIANGLES,36,GL_INT,indices);
}
void Model::InitializeVertexBuffer(vertex *vertices)
{
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3,GL_FLOAT,0,vertices);
//glDrawArrays(GL_TRIANGLES,0,36);
} 
```

可悲的是，当我尝试使用drawelements时出现此错误：新begging.exe中0x77e215de处的未处理异常：0xC0000005：访问冲突读取位置0xcdcdcdcd。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-30T21:57:52.103

> 2）我应该如何显示顶点？

像这样的问题表明，您应该学习一些 OpenGL 教程。这些是基础知识，您需要了解它们。

对于您的问题，这是一个好的开始，但您需要完成整个教程 [http://opengl.datenwolf.net/gltut/html/Basics/Tut01%20Following%20the%20Data.html](http://opengl.datenwolf.net/gltut/html/Basics/Tut01%20Following%20the%20Data.html)

> 1）这些指数到底是什么？

你有一个顶点列表。顶点的索引是它在该列表中的位置。您可以使用其索引绘制顶点数组`glDrawElements`

### 因评论而更新

假设您有一个具有共享顶点的立方体（在 OpenGL 中不常见，但我懒得写下 24 个顶点）。

![立方体顶点](../Images/33620e419c6bb89468687da88d1eb3ed.png)

我将它们放在我的程序中的一个数组中，形成了它们位置的列表。你从一个文件中加载它们，我正在给它们写一个 C 数组：

```
GLfloat vertices[3][] = {
    {-1,-1, 1},
    { 1,-1, 1},
    { 1, 1, 1},
    {-1, 1, 1},
    {-1,-1,-1},
    { 1,-1,-1},
    { 1, 1,-1},
    {-1, 1,-1},
}; 
```

这给出了顶点索引（数组中的位置），在图片中它看起来像

![带索引的立方体顶点](../Images/ca5ff823d8909324ffa01ae41a28ebcf.png)

要绘制一个立方体，我们必须告诉 OpenGL 在哪些顶点，以什么顺序构成一个面。那么让我们来看看这些面孔：

![带面边的立方体](../Images/bb6a2c137a99c369659270f2223a4302.png)

我们将用三角形构建那个立方体。3 个连续的指数组成一个三角形。对于立方体，这是

```
GLuint face_indices[3][] = {
    {0,1,2},{2,3,0},
    {1,5,6},{6,2,1},
    {5,4,7},{7,6,5},
    {4,0,3},{3,7,4},
    {3,2,6},{6,7,2},
    {4,5,0},{1,0,5}
}; 
```

您可以通过将 OpenGL 指向顶点数组来绘制它

```
glVertexPointer(3, GL_FLOAT, 0, &vertices[0][0]); 
```

并在带有顶点的数组上发出批处理调用。有 6*2 = 12 个三角形，每个三角形由 3 个顶点组成，构成一个包含 36 个索引的列表。

```
glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_INT, &face_indices[0][0]); 
```

# zsh - 无法在 archlinux 上使用 zsh 获取自动跳转脚本

> ID：14094848
> 
> 赞同：3
> 
> 时间：2012-12-30T21:29:13.990
> 
> 标签：zsh, archlinux

[ArchLinux 上的autojump](https://github.com/joelthelion/autojump)出于某种原因在`zsh`.
虽然如果我切换到`bash`它工作正常。

```
$ sudo pacman -S autojump 
```

自动跳转：不起作用`zsh`

```
$ source /usr/etc/profile.d/autojump.sh
$ j
zsh: command not found: j

$ source /usr/etc/profile.d/autojump.bash
$ j
zsh: command not found: j 
```

自动跳转：适用于`bash`

```
$ bash
(bash) $ source /usr/etc/profile.d/autojump.bash
(bash) $ j
autojump: ... 
```

* * *

我的环境：

```
$ echo $SHELL
/bin/zsh

$ zsh --version 
zsh 5.0.2 (x86_64-unknown-linux-gnu) 
```

我在 OS X 上使用 autojump with `zsh`，所以它对我来说也不像是 zsh 特定的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T23:02:08.440

你不应该使用自动[跳转吗？**zsh**](https://github.com/joelthelion/autojump/blob/master/bin/autojump.zsh)代替？

尽管据我所知，唯一要做`autojump.sh`的就是采购`autojump.zsh`或`autojump.bash`从某个地方采购，因此它应该与`.sh`. 如果 arch 的维护者打了补丁就可以工作`autojump.sh`：它不希望在`/usr/etc`.

如果它不起作用`autojump.zsh`，请发布doing 的输出`(set -x ; source /usr/etc/profile.d/autojump.zsh)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T19:57:23.447

通过 安装时没有`/usr/etc/profile.d/autojump.zsh`推送。我不知道为什么会这样。`autojump``pacman`

但是，我执行了手动用户安装，并在我的 zsh 配置中添加了自动跳转插件，该插件负责获取文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T04:59:49.403

我已经尝试了上述方法，但我通过添加解决了这个问题

```
 source ~/.autojump/etc/profile.d/autojump.zsh 
```

因为我没有找到 /usr/etc/profile.d/autojump.zsh

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T01:03:38.763

无论采购 .zsh 版本，我都在 ZSH 中反复遇到 Autojump 问题。我从来没有找到一个像样的解决方案，最终选择坚持使用 ZSH 并**停止使用**Autojump。

我个人的解决方案是从 Autojump 切换到[FASD](https://github.com/clvv/fasd)。它通过“z”别名具有与**Autojump相同的功能。**它还允许专门跳转到文件或目录。

**FASD**一直是我的 ZSH 设置的可靠部分，并且超越了 Autojump 的功能。[我在Civet.ws](http://www.civet.ws/2012/07/fasd-the-commandline-shortcuts-i-always-wanted/)的博客上详细记录了我对 FASD 的体验

# c# - 如何从asp.net应用程序中的部署中检测开发环境

> ID：14094849
> 
> 赞同：0
> 
> 时间：2012-12-30T21:29:39.633
> 
> 标签：c#, asp.net

> **可能重复：**
> [如果站点在 localhost 或 127.0.0.1 上运行，如何检查 ASP.NET MVC 视图](https://stackoverflow.com/questions/3209669/how-to-check-in-asp-net-mvc-view-if-site-is-running-on-localhost-or-127-0-0-1)

我在 web.config 中使用两个连接字符串条目，并且我使用 HttpContext.Current.Request.UserHostAddress 来检测部署和开发环境：

```
public static SqlConnection GetSqlConnection()
{
    if (HttpContext.Current.Request.UserHostAddress != "127.0.0.1")
    ...
    else
    ...
} 
```

但问题就在这里，有时 HttpContext.Current 为空并引发异常（即：当计划任务从 global.asax 在 asp.net 中运行时）。有什么通用的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T21:32:08.880

您应该在环境之间更改配置文件中的连接字符串。这就是为什么它们首先存储在配置文件中的原因，因此您不必这样做。

我更喜欢将连接字符串放在一个单独的文件中，根本不部署它。其他特定于环境的配置也可以这样做。另一种方法是使用 XML 转换作为构建作业的一部分，以便在部署到生产环境时更改连接字符串。

# objective-c - 应用程序崩溃而没有错误

> ID：14094852
> 
> 赞同：3
> 
> 时间：2012-12-30T21:29:56.300
> 
> 标签：objective-c, debugging

在我的应用程序中，我有四个按钮。当我按下四个按钮中的两个时，应用程序冻结。奇怪的是没有出现错误，调试器窗口中也没有任何内容。我是 iOS 开发的新手，所以我不知道如何解决这个问题。该应用程序在应用程序开始崩溃之前运行良好，而且我没有更改任何代码，所以我不知道发生了什么。有人可以帮我吗？

这是按钮按下位置的代码。它一直工作正常，所以我不知道为什么它突然不起作用：

```
- (IBAction)showMapView:(id)sender
{
    P2OViewController *pvc = [[P2OViewController alloc]init];
    [self.navigationController pushViewController:pvc
                                         animated:YES];
}

- (IBAction)showTableView:(id)sender
{
    TableViewController *tableView = [[TableViewController alloc]init];
    [self.navigationController pushViewController:tableView
                                         animated:YES];
} 
```

所以我添加了全局断点，什么都没有发生。该应用程序仍在运行，调试器导航器说它仍在运行。所以我猜该应用程序正在冻结，而不是崩溃。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:48:28.237

我建议您检查 IBActions 和代码之间的连接。像这样的无法解释的错误可能是由 IB 中的连接丢失或不正确引起的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T14:28:56.440

似乎是内存问题。不要在每次单击按钮时创建一个 p20viewcontroller 对象和 tableviewcontroller 对象，而是尝试在程序开始的某个地方只创建一次这些对象。

按钮单击应该只包含导航到下一个屏幕的代码。不要在每次按钮单击时创建一个新对象。

# c# - EntityFramework 5.0 中的虚拟删除

> ID：14094855
> 
> 赞同：0
> 
> 时间：2012-12-30T21:30:28.477
> 
> 标签：c#, sql-server-2012, .net-4.5, entity-framework-5

我的问题是..

我会问我的用户，他是否要删除记录。如果他说是，

我不会真正从表中删除行，但会用 true 更新表的 Deleted 列。但在此之前，我想像在删除行案例中一样检查外键约束，这意味着该值是否被其他表使用。我应该说我的用户该行被其他表使用所以不能删除？

有什么想法我该怎么做。

目前我这样做是为了删除..

```
public bool Delete(dynamic entity)
{
    try
    {
        //here I want to check, whether this is being used by some other table or not. Foreign key constaint
        entity.Deleted = true;
        this.SaveChanges();
        return true;
    }
    catch { return false; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:29:59.203

我的回答适用于实体框架 5.0 和 Code First。该解决方案需要两个部分。首先，您的每个数据类都必须实现一个公开“已删除”属性的接口（我们称之为 IVirtualDelete）。

```
public interface IVirtualDelete{
  bool Deleted {get; set;}
} 
```

其次，您需要覆盖 DBContext 中的 SaveChanges 方法。

调用 SaveChanges 时，请查看 context.ChangeTracker.Entities() 以查找具有 System.Data.EntityState.Deleted 状态且实体实现您的 IVirtualDelete 接口的那些。在对象上设置 Deleted，并将实体状态更改为 Modified。

```
public override int SaveChanges() {
  foreach (var item in this.ChangeTracker.Entries().Where(x=> x.EntityState == EntityState.Deleted)){
    var entity = item.Entity as IVirtualDelete;
    if(entity != null){
      entity.Deleted = true;
      item.EntityState = EntityState.Modified;
    }
  }
  return base.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:39:15.123

这就是“关于它”。EF 没有方法将删除覆盖到更新中，最后可以说这不好，因为机制可能会有所不同（删除的时间戳等）。所以，你所做的就是人们在这种情况下所做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:33:05.460

您可以尝试更改实体的主键值并保存。

如果存在任何子记录 - 您将收到某种级联更新错误并返回 false。

如果更新成功 - 您没有子记录，您可以将主键值更改回原始值，设置 Deleted = true 并重新保存。

当然，如果您将身份作为主键或有具有“删除级联”用户可见场景的子表，则这不适用。

# c# - 从 ef 表达式树中删除条件

> ID：14094857
> 
> 赞同：1
> 
> 时间：2012-12-30T21:30:42.663
> 
> 标签：c#, entity-framework

我正在使用实体框架来处理 MVC 应用程序中的数据库：我使用启动表单中的多个字段为应用程序创建了一个搜索引擎，并设置了来自用户角色的权限，因此创建 select 语句的例程正在增长，所以有时我会遇到这种情况。在我做出选择之前：

1.  var orders = db.Orders.Where(ord => ord.Channel == 1 || ord.Channel == 2);

    在源代码中，在某些情况下，用户类型、过滤器组合等，我必须更改此过滤器或删除此条件

2.  订单 = db.Orders.Where( ord => ord.Channel == 1 );

    这只是一个简单的例子，因为这样做我会丢失我在 Linq 表达式树中完成的其他过滤器，并导致我经常要求添加功能，因此很难重新组织所有代码以测试所有先决条件向表达式树添加条件，所以我想知道是否可以在 linq 表达式树中添加语句之后和在 sql 查询中解析和转换树之前删除语句

卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:16:31.407

假设我正确理解了您的问题，我相信最简单的方法是推迟创建查询，直到您收集了知道查询应该是什么样子所需的所有数据，即在这种情况下，这意味着您只构建查询在您已经知道是否确实需要应用该条件之后。

如果您无法推迟创建查询（在我看来这就是您要说的），但您仍然可以预见到以后可能需要删除哪些条件，我会考虑引入一个布尔值查询中的哨兵，例如基于您的查询片段：

```
var orders = db.Orders.Where( ord => 
    (isFirstConditionRelevant && ord.Channel == 1) 
    || (isSecondConditionRelvant && ord.Channel == 2)); 
```

变量 'isFirstConditionRelevant' 和 'isSecondConditionRelevant' 最初将设置为 true 并由查询表达式捕获，但如果您需要相应的条件，您可以稍后（例如，在执行查询之前）设置为 false没有效果。请注意，使用这种方法，查询的 SQL 翻译仍将包含条件，但它还将包含每个哨兵的参数，当服务器执行查询时，该参数将短路布尔逻辑。

另请注意，条件中的任何常量（例如，'ord.Channel == 1' 中的'1'）都将在 SQL 中转换为常量。我建议使用变量，因为这会在 SQL 查询中引入参数，从而增加查询计划可以在服务器上重用的机会。

另一种可能有用的方法是利用对查询中表达式变量的引用的支持，例如，您可以将 Expression> 类型的变量传递给 Where 子句，稍后将变量的值替换为正确的谓词. 如果我没记错的话，LINQ to Entities 通过将 AsQueryable 运算符应用于查询中的集合，支持使用表达式变量作为​​嵌套集合的谓词条件。否则，您可以利用 LINQ 工具包提供的对 AsExpandable 的支持。您将在 LINQ Kit 主页中找到有关此的更多信息以及使用对表达式变量的引用的示例：[http](http://www.albahari.com/nutshell/linqkit.aspx) ://www.albahari.com/nutshell/linqkit.aspx 。

我会考虑的第四个也是最复杂的方法是在执行查询之前使用我自己的访问者（例如，从 System.Linq.Expressions.ExpressionVisitor 派生）重写 LINQ 表达式树（在这种情况下从谓词中删除条件） . 我没有一个非常方便的表达式访问者。相反，我可以提供一些解决问题不同部分的文章的指针：

1.  StackOverflow 中的这个线程描述了如何使用表达式访问者进行一些查询重写：[使用 LINQ ExpressionVisitor 将原始参数替换为 lambda 表达式中的属性引用](https://stackoverflow.com/questions/11164009/using-a-linq-expressionvisitor-to-replace-primitive-parameters-with-property-ref)。
2.  Alex James 的这篇很棒的博客文章描述了如何编写一个拦截查询提供程序，它将在执行查询之前调用您的表达式重写访问者：http: [//blogs.msdn.com/b/alexj/archive/2010/03/ 01/tip-55-how-to-extend-an-iqueryable-by-wrapping-it.aspx](http://blogs.msdn.com/b/alexj/archive/2010/03/01/tip-55-how-to-extend-an-iqueryable-by-wrapping-it.aspx)。
3.  以下文章描述了一个可用于根据规则重写表达式的库：http: [//www.codeproject.com/Articles/24454/Modifying-LINQ-Expressions-with-Rewrite-Rules](http://www.codeproject.com/Articles/24454/Modifying-LINQ-Expressions-with-Rewrite-Rules)。

希望这可以帮助！

# ajax - Grails Ajax 渲染列表动作

> ID：14094858
> 
> 赞同：3
> 
> 时间：2012-12-30T21:30:46.080
> 
> 标签：ajax, jquery, grails, grails-2.0

尝试使用 ajax呈现所有**联系人（**[这是一个片段](http://i.stack.imgur.com/a1ZCI.png)）

因此，单击时，它将`div`在更新操作中列出联系人。我已经测试了一个基本的日期函数（*请参阅注释掉的渲染操作控制器*）以确保 ajax 部分可以工作并且确实可以工作，但是处理我遇到的列表并转圈圈

*普惠制*：

```
<g:remoteLink controller="event" action="showContacts" update="divContactList">Show Contacts!</g:remoteLink>

<div id="divContactList">Show contacts Here...
    <g:each in="${contactList}" status = "i" var="contact">
       <p>${contact.forname}</p>            
       <p>${contact.email}</p>
    </g:each>
</div> 
```

*控制器*：

```
def showContacts = {
    def contactList = Contact.findAllByUser(lookupPerson())
//        render "The time is now ${new Date()}"
    render([contactList: contactList])        
} 
```

因此，总体而言，它没有显示网页中的联系人列表中的任何内容，我们将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T00:58:16.380

_templateName.gsp：

```
<g:each in="${contactList}" status = "i" var="contact">
       <p>${contact.forname}</p>            
       <p>${contact.email}</p>
    </g:each> 
```

普惠制：

```
<g:remoteLink controller="event" action="showContacts" update="divContactList">Show Contacts!</g:remoteLink>

<div id="divContactList">Show contacts Here...
    <g:render template="layouts/templateName" model="[contactList: contactList]" />
</div> 
```

控制器：

```
def showContacts = {
    def contactList = Contact.findAllByUser(lookupPerson())
//        render "The time is now ${new Date()}"
    render(template: 'layouts/templateName', model:[contactList: contactList])        
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T22:37:01.833

单击远程链接将向*showContacts*操作发送 AJAX 调用，获取 HTML 答案并使用返回的答案[更新](http://grails.org/doc/latest/guide/theWebLayer.html#updatingContent)*divContactList*的内容。showContacts操作将呈现一个具有相同名称的模板，*并将*contactList 作为模型的一部分传递给它。如果您希望 AJAX 调用呈现联系人列表，您可以尝试以下[选项](http://grails.org/doc/latest/guide/theWebLayer.html#ajaxOnTheServer)之一：

1.  以内容为中心的 Ajax - 让*showContacts*操作呈现一个显示联系人列表的模板
2.  以数据为中心的 Ajax - 让*showContacts*操作发送表示联系人列表的 JSON/XML 响应，并让客户端 JavaScript 代码将此 JSON/XML 呈现为联系人列表

# objective-c - 使用 NSXML Parser Cocoa 进行解析

> ID：14094861
> 
> 赞同：0
> 
> 时间：2012-12-30T21:31:11.037
> 
> 标签：objective-c, xml, cocoa, nsxmlparser

我正在尝试从 Cocoa 中的 xml 解析以下信息。

```
<level>
  <entity>
    <name>red</name>
    <id>0</id>
    <body>false</body>
    <x>0.0</x>
    <y>0.0</y>
    <rotation>0.0</rotation>
  </entity> 
```

这是我到目前为止没有遵循苹果的 nsxml 解析器指南的内容。

```
NSString* currentElement;

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{

currentElement = elementName;

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

 if([currentElement isEqualToString:@"name"]){
     NSLog(@"Name found: %@", string);
 }

 } 
```

在我找到的字符方法中，它记录了语句，但唯一返回的是“找到的名称：”，其余为空白。

我这样做是否正确以在我的 xml 中获取以下标签？我想提取每个标签。

例如：

```
NSString* name = THE_NAME;
int x = [THE_X_VALUE, intValue]; 
```

等等

谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-09T10:44:54.000

NSXMLParser 是那些在纸上听起来不错的类之一，但当你真正开始使用它时会让你发疯。如果您真的想继续这条无趣的道路，请实现 parser:didStartElement: 然后祈祷 parser:foundCharacters: 交付货物。以我的经验，NSXMLParser 就像一个大小孩，他会打破拼图，然后把碎片一个接一个地交给你。起初这似乎很棒：“哦，看，我有一块！还有一个！还有一个！” 但很快你就会感到困惑：“哦，看，我有 5.0！现在，是旋转还是 y 坐标？” 谁知道？不是 NSXMLParser，这是肯定的。

至于最后一行代码：提取字符串的数值，NSDecimalNumber 非常好用。

```
if([currentElement isEqualToString:@"x"]){
    NSDecimalNumber *dec = [NSDecimalNumber numberWithString:string];
    CGFloat x = dec.floatValue;
} 
```

# java - 解释蛮力算法

> ID：14094864
> 
> 赞同：1
> 
> 时间：2012-12-30T21:32:00.107
> 
> 标签：java, algorithm

我有一个蛮力算法，但从未完全理解它。我对正在发生的一些事情有一个模糊的把握，但每次我试图准确地跟踪发生的事情时，我都会迷失方向（例如，`index`变量有点令人困惑）。也欢迎任何有关如何使算法更高效的提议。

**注意**- 我已经有了算法，它可以编译和工作。请不要指责我试图将其用于恶意目的，因为我没有将其用于此目的，而且我从未打算这样做。我只是想知道它是如何工作的。

```
public class BruteForceTest
{
    public String username = new String();
    public static String password = "ZZZZZ";
    public static char[] charset = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".toCharArray();
    private static char[] currentGuess = new char[1];

public static void bruteForce()
    {
        String attempt = new String();
        Date start = new Date();
        while (true)
        {
            if (attempt.equals(password))
            {
                Date end = new Date();
                System.out.println("Password: " + attempt + "\nTotal time to crack: " + ((end.getTime() - start.getTime()) / 1000) + " seconds." + "\n");
                break;
            }
            attempt = in.toString();
            // System.out.println("Tried: " + attempt);
            in.increment();
        }
    }

    public BruteForceTest()
    {
        Arrays.fill(currentGuess, charset[0]);
    }

    public void increment()
    {
        int index = currentGuess.length - 1;
        while (index >= 0)
        {
            if (currentGuess[index] == charset[charset.length - 1])
            {
                if (index == 0)
                {
                    currentGuess = new char[currentGuess.length + 1];
                    Arrays.fill(currentGuess, charset[0]);
                    break;
                }
                else
                {
                    currentGuess[index] = charset[0];
                    index--;
                }
            }
            else
            {
                currentGuess[index] = charset[Arrays.binarySearch(charset, currentGuess[index]) + 1];
                break;
            }
        }
    }

    public String toString()
    {
        return String.valueOf(currentGuess);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T21:37:43.647

[暴力破解](http://en.wikipedia.org/wiki/Brute-force_search)是一种启发式技术，这意味着，本质上，您将尝试通过利用计算机比人脑快得多的优势来分析每一种可能的情况。例如，您不是在尝试推断出密码或国际象棋游戏中的下一个最佳移动；您只需测试每种可能的情况并使用正确的情况（或根据某些度量标准的最佳情况，具体取决于蛮力算法要完成的任务）。

您的代码只是简单地检查所有可能保存的密码值，并检查它是否找到它。如果没有，它会继续下一个可能的组合，直到它完成为止。

这也是[最坏情况](http://en.wikipedia.org/wiki/Best,_worst_and_average_case#Worst-case_versus_average-case_performance)的演示，因为密码被定义为`ZZZZZ`，将是算法作为解决方案尝试的最后一件事（假设最大密码长度定义为五个字符。）

此外，就您担心人们认为您将此算法用于恶意目的而言，我不会太担心。几乎没有任何计算机系统实际上会受到这种攻击，并且在您真正遇到密码之前很久就会被锁定。

# android - 用于 MapsForge 地图的 Android zoomToSpan

> ID：14094866
> 
> 赞同：1
> 
> 时间：2012-12-30T21:32:10.730
> 
> 标签：android, zooming

MapsForge 地图是否存在 zoomToSpan 方法？如果不存在，我该如何实施？是否有一些代码示例或算法描述？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:25:39.590

您可以使用以下方法扩展 MapView（MapsForge 版本 0.3.1）：

```
public synchronized void fitToBoundingBox(final BoundingBox pBoundingBox, final int pMaximumZoom) {
    int width = this.getWidth();
    int height = this.getHeight();
    if (width <= 0 || height <= 0) {
        this.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                MapView.this.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                fitToBoundingBox(pBoundingBox, pMaximumZoom);
            }
        });
    } else {
        Projection projection1 = this.getProjection();
        GeoPoint pointSouthWest = new GeoPoint(pBoundingBox.minLatitude, pBoundingBox.minLongitude);
        GeoPoint pointNorthEast = new GeoPoint(pBoundingBox.maxLatitude, pBoundingBox.maxLongitude);
        Point pointSW = new Point();
        Point pointNE = new Point();
        byte maxLvl = (byte) Math.min(pMaximumZoom, this.getMapZoomControls().getZoomLevelMax());
        byte zoomLevel = 0;
        while (zoomLevel < maxLvl) {
            byte tmpZoomLevel = (byte) (zoomLevel + 1);
            projection1.toPoint(pointSouthWest, pointSW, tmpZoomLevel);
            projection1.toPoint(pointNorthEast, pointNE, tmpZoomLevel);
            if (pointNE.x - pointSW.x > width) {
                break;
            }
            if (pointSW.y - pointNE.y > height) {
                break;
            }
            zoomLevel = tmpZoomLevel;
        }
        this.getMapViewPosition().setMapPosition(new MapPosition(pBoundingBox.getCenterPoint(), zoomLevel));
    }
} 
```

很可能您有一组应显示在地图上的叠加层。您必须找到经度和纬度的“最小”和“最大”值，然后调用上面的方法：

```
mapView.fitToBoundingBox(new BoundingBox(minLat, minLng, maxLat, maxLng), 20); 
```

[在这里](https://groups.google.com/forum/?fromgroups=#!topic/mapsforge-dev/MChsbAK1vl4)找到了这个解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T22:33:05.973

假设您已经在模拟器中显示了地图，我已经给出了地图中缩放视图功能的示例代码。希望这可以帮助

保持 Main.xml 文件如下：

```
 <?xml version="1.0" encoding="utf-8"?>
     <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
         android:layout_width="fill_parent" 
         android:layout_height="fill_parent">

         <com.google.android.maps.MapView 
             android:id="@+id/mapView"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:enabled="true"
             android:clickable="true"
             android:apiKey="0l4sCTTyRmXTNo7k8DREHvEaLar2UmHGwnhZVHQ"
             />

         <LinearLayout android:id="@+id/zoom" 
             android:layout_width="wrap_content" 
             android:layout_height="wrap_content" 
             android:layout_alignParentBottom="true" 
             android:layout_centerHorizontal="true" 
             /> 

     </RelativeLayout> 
```

和 mapsActivity 如下：

```
 package net.learn2develop.GoogleMaps;

     import com.google.android.maps.MapActivity;
     import com.google.android.maps.MapView;
     import com.google.android.maps.MapView.LayoutParams;  

     import android.os.Bundle;
     import android.view.View;
     import android.widget.LinearLayout;

     public class MapsActivity extends MapActivity 
     {    
         MapView mapView; 

         /** Called when the activity is first created. */
         @Override
         public void onCreate(Bundle savedInstanceState) 
         {
             super.onCreate(savedInstanceState);
             setContentView(R.layout.main);

             mapView = (MapView) findViewById(R.id.mapView);
             LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom);  
             View zoomView = mapView.getZoomControls(); 

             zoomLayout.addView(zoomView, 
                 new LinearLayout.LayoutParams(
                     LayoutParams.WRAP_CONTENT, 
                     LayoutParams.WRAP_CONTENT)); 
             mapView.displayZoomControls(true);

         }

         @Override
         protected boolean isRouteDisplayed() {
             // TODO Auto-generated method stub
             return false;
         }
     } 
```

# r - 删除第一个出现的数据帧 R

> ID：14094873
> 
> 赞同：2
> 
> 时间：2012-12-30T21:32:51.883
> 
> 标签：r, dataframe

所以我一直在玩 R 中的数据框，尽管我仍然在 Python 中思考太多，似乎无法找到解决我的问题的方法。

我有一个数据框，其中一列是用户 ID。我想删除所有第一次出现的数字，例如：

```
1,2,3,4,3,4,2,1,3,4,6,7,7 
```

我想要这样的输出：

```
 3,4,2,1,3,4,7 
```

user_id 第一次出现的地方我会删除它，但即使重复也会保留所有其他人。

使用 python 我可能会使用枚举或循环它。对于 R，我看到了一些看起来很酷的函数，但我不确定如何将它与数据框一起使用，比如 rle。

任何指针都会非常有帮助，因为现在我对解决这个问题的最佳方法有点迷茫。

谢谢你们

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T21:36:27.957

该功能`duplicated()`将在这里有所帮助：

```
x <- c(1,2,3,4,3,4,2,1,3,4,6,7,7)
> x[duplicated(x)]
[1] 3 4 2 1 3 4 7 
```

* * *

这是有效的，因为`duplicated()`返回一个逻辑向量，指示该元素是否重复：

```
duplicated(x)
 [1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE 
```

然后，您使用此逻辑向量从 x 中子集（提取）您想要的值。但请注意，在提取过程中，我**保留**了所有重复的值，而不是删除它们。

要删除所有重复的值（不是您想要的，但无论如何我都会说明），请尝试否定：

```
x[!duplicated(x)]
[1] 1 2 3 4 6 7 
```

# objective-c - 为什么这个for循环没有被调用？

> ID：14094876
> 
> 赞同：0
> 
> 时间：2012-12-30T21:33:04.367
> 
> 标签：objective-c, for-loop

您好，感谢您的帮助

为什么这个 for 循环没有被调用。（内容是一个 nsmutableArray）

```
 NSString *setBiz = [[NSString alloc]init];
setBiz = @"MomAndPop";
 NSLog(@"??????????listby???????????%@\n",setBiz);

for (NSDictionary *key in self.contents) {
    NSLog(@"hi inside loopppp");  //I never see this ????????

     NSString *c = [key objectForKey:@"BizName"];
    NSString *string = [NSString stringWithFormat:@"%@", key];  //random test 

    if ([c isEqualToString:setBiz]) {
        NSLog(@"gotch you");
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:36:12.607

最可能的答案是其中`self.contents`没有元素。

将其放在循环之前以输出循环中的元素数：

`NSLog(@"self.contents.count: %lu", self.contents.count);`

# javascript - 如何从模板而不是 html 中获取 dom 元素

> ID：14094889
> 
> 赞同：-1
> 
> 时间：2012-12-30T21:34:41.337
> 
> 标签：javascript, templates

这是[jsfiddle](http://jsfiddle.net/yahyaKACEM/8zdFM/12/) ，首先按原样尝试脚本，然后注释最后一行并取消注释它之前的那一行，这将为我提供我想要的功能但使用错误的数据，基本上我想grub一个模板并将数据插入其中将其插入页面中的另一个元素之前。问题是我使用的方法需要我使用一个对象或 elementNode 来插入它，但是在获取模板后我留下了 html 导致错误：

> 错误：NOT_FOUND_ERR：DOM 异常 8

的HTML：

```
<section class="container well">
    <header></header>    
    <section id="section">
        <h4 id="heading">heading 4</h4>
        <div id="div_1" class="divs">
            <a href="#">file_1.jpg</a>
            <button class="btn btn-mini btn-danger pull-right">&#10006;</button>
        </div>
        <div id="div_2" class="divs">
            <a href="#">file_2.jpg</a>
            <button class="btn btn-mini btn-danger pull-right">&#10006;</button>
        </div>
        <div id="div_3" class="divs">
            <a href="#">file_3.jpg</a>
            <button class="btn btn-mini btn-danger pull-right">&#10006;</button>
        </div>
        <div id="div_4" class="divs">
            <a href="#">file_4.jpg</a>
            <button class="btn btn-mini btn-danger pull-right">&#10006;</button>
        </div>
        <div class="clearfix">
            <button class="btn btn-primary pull-right add">
                 Add items
            </button>
        </div>
    </section>
    <footer></footer>
</section>
<script type="template" id="template">
    <div id="{{id}}">
        <a href="#">{{fileName}}</a>
    </div>
</script>​ 
```

我的 JavaScript 代码：

```
$(document).on('click', '.add', function(e){
    e.preventDefault();
    e.stopPropagation();
    target   = document.getElementById($('.divs')[0].id);
    template = document.querySelector('#template').innerHTML;
    div      = template
                       .replace(/{{id}}/g, '0')
                       .replace(/{{fileName}}/g, 'file_0');
    //target.parentNode.insertBefore(document.createTextNode('AZERTY'), target);
    target.parentNode.insertBefore(div, target);
}); 
```

再次感谢jsfiddle并提前致谢[。](http://jsfiddle.net/yahyaKACEM/8zdFM/12/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:44:10.557

您不能将`div`包含 HTML 代码的字符串插入到 DOM 中，就好像它是一个元素一样。相反，您可以创建另一个 div 并将其设置为`innerHTML`.

```
$(document).on('click', '.add', function(e){
    e.preventDefault();
    e.stopPropagation();
    target   = document.getElementById($('.divs')[0].id);
    template = document.querySelector('#template').innerHTML;
    div      = template
                        .replace(/{{id}}/g, '0')
                        .replace(/{{fileName}}/g, 'file_0');
    outerDiv = document.createElement('div');
    outerDiv.innerHTML = div;
    target.parentNode.insertBefore(outerDiv, target);
}); 
```

正如对另一个答案的评论所指出的那样，您可能希望在模板中跳过包含 div，因为您最终会得到两个不必要的 div。相反，您可以简单地

```
 <a href="#">{{fileName}}</a> 
```

作为模板，然后

```
div = document.createElement('div');
div.id = '0';
div.innerHTML = template.replace(/{{fileName}}/g, 'file_0');
target.parentNode.insertBefore(div, target); 
```

在脚本中。另一种选择是将 HTML 字符串直接插入到目标中：

```
 target.innerHTML = div + target.innerHTML; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:41:19.883

这是一篇关于使用 jQuery 操作模板的文章 - 有几个链接和很多好的建议：

*   [如何使用 <script type="text/template"> 使用 jquery 创建嵌入式 HTML 模板](https://stackoverflow.com/questions/6932694/how-can-i-create-an-embeded-html-template-using-script-type-text-template-us)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T21:46:39.763

```
 $('.add').on('click', function(e){
      e.preventDefault();
      e.stopPropagation();
      target   = document.getElementById($('.divs')[0].id);
      template = document.querySelector('#template').html();
      div      = template.replace(/{{id}}/g, '0').replace(/{{fileName}}/g, 'file_0');
      divtag = document.createElement('div');
      divtag.innerHTML = div;
      divtag.id = template.id;
      target.parentNode.insertBefore(divtag, target);
 } 
```

这应该工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T22:24:30.940

这是答案：

代码：

```
$(document).on('click', '.add', function(e){
    e.preventDefault();
    e.stopPropagation();
    target   = document.getElementById($('.divs')[0].id);
    template = document.querySelector('#template').innerHTML;
    div      = template
                        .replace(/{{id}}/g, '0')
                        .replace(/{{fileName}}/g, 'file_0.jpg');
    new_div  = document.createElement('div');
    new_div.setAttribute('class', 'divs');
    new_div.setAttribute('id', 'div_' + i);
    new_div.innerHTML = div;
    target.parentNode.insertBefore(new_div, target);
}); 
```

感谢斯图尔特。

# javascript - jQuery(window).height() 在移动浏览器上不起作用

> ID：14094890
> 
> 赞同：7
> 
> 时间：2012-12-30T21:34:41.923
> 
> 标签：javascript, jquery, mobile, viewport

我有一个使用 jQuery(window).height() 的整页幻灯片，它在大多数浏览器上都可以正常工作，但是我在我的手机（Android 浏览器和 Dolphin）上查看了它，幻灯片不断增长，远远超出了视口。这是我的代码：

```
var height = jQuery(window).height();
jQuery('.slide').each(function(index, element) {
    if(height > 600) jQuery(this).height(height);
    else jQuery(this).height(600);
});
jQuery(window).on('resize orientationChanged', function() {
    jQuery('.slide').each(function(index, element) {
        if(height > 600) jQuery(this).height(height);
        else jQuery(this).height(600);
    });
}); 
```

有什么想法可能导致它吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-21T22:45:22.307

所以在这个问题问了 3 年后，jquery 窗口高度仍然不能在移动设备上工作，只需用 javascript 替换 jquery，它就对我有用。

替换jQuery

```
var bodyh = jQuery("body").height();
var windowh = jQuery(window).height(); 
```

用 javascript

```
 var bodyh = document.body.clientHeight;
 var windowh = window.innerHeight; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-30T11:36:08.767

如果 HTML 文档没有 DOCTYPE 声明，则它不是有效的 HTML。如果在窗口上未指定 doctype，则 JQuery 无法正确计算窗口高度/文档高度。

该声明是对 Web 浏览器的指示，说明您的页面中使用的 HTML 版本。

因此，如果您没有指定它，请将 DOCTYPE 声明添加到您的 HTML 页面并查看输出。

```
<!DOCTYPE HTML>
<html>
   //...
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T12:00:30.977

html 文档类型可能存在问题。这是移动设备的示例文档类型。在您的代码中更改它并尝试。

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>My Page name</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
```

请参阅下面的链接更多详细信息。 [http://www.microsoft.com/en-GB/developers/articles/jquery-mobile-101](http://www.microsoft.com/en-GB/developers/articles/jquery-mobile-101)

# twitter - 添加回调 url 时 Twitter API oAuth 签名失败

> ID：14094893
> 
> 赞同：5
> 
> 时间：2012-12-30T21:34:44.733
> 
> 标签：twitter, oauth, callback

我正在使用此代码/指导[另一个 twitter oAuth cURL 访问令牌请求，该请求无法](https://stackoverflow.com/questions/3295466/another-twitter-oauth-curl-access-token-request-that-fails/3327391#3327391)测试我对 API 的请求的签名。我仍在尝试完成[此步骤 1](https://dev.twitter.com/docs/auth/implementing-sign-twitter)

*注意：密钥只是随机的，它们不是真实的:)*

当我尝试在没有 oauth_callback 的情况下发出请求时，我得到了来自 api 的有效响应

> [https://api.twitter.com/oauth/request_token?oauth_consumer_key=nHb2kSQ2CD9MW1MdW5VeQ&oauth_nonce=1356902849&oauth_signature=MbvhwGiNPKQR0klUPx9fsmUtdJY%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=190284&oau_version=1900284](https://api.twitter.com/oauth/request_token?oauth_consumer_key=nHb2kSQ2CD9MW1MdW5VeQ&oauth_nonce=1356902849&oauth_signature=MbvhwGiNPKQR0klUPx9fsmUtdJY%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1356902849&oauth_version=1.0)

当我添加 oauth_callback 字符串（必须让用户使用重定向签名！）我得到“无法验证 oauth 签名和令牌”

> [https://api.twitter.com/oauth/request_token?oauth_callback=http%3A%2F%2F127.0.0.1%2Ftest%2F&oauth_consumer_key=nHb2kSQ2CD9MW1MdW5VeQ&oauth_nonce=1356902915&oauth_signature=2WTaI9jXNBaDd7f8AqIe6y3%2Beno%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1356902915&oauth_version=1.0](https://api.twitter.com/oauth/request_token?oauth_callback=http%3A%2F%2F127.0.0.1%2Ftest%2F&oauth_consumer_key=nHb2kSQ2CD9MW1MdW5VeQ&oauth_nonce=1356902915&oauth_signature=2WTaI9jXNBaDd7f8AqIe6y3%2Beno%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1356902915&oauth_version=1.0)

我的意思是这两个 URL 之间没有区别，它们都经过相同的执行并且它们尊重签名方法。如何解决？

是的，我`http://127.0.0.1/test/`在 twitter 应用程序设置中添加了回调 url。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:51:56.887

你有没有在推特应用设置中设置回调地址？

如果您不进行设置，api 可能会失败。

[从这里](https://dev.twitter.com/apps)检查它：

![在此处输入图像描述](../Images/36a5d4d8452f69b2956ca5f1a71654a9.png)

还要检查您的时间是否同步（使用 NTP 服务器）；见：[https ://dev.twitter.com/discussions/1043](https://dev.twitter.com/discussions/1043)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-02T03:49:00.970

同意 twitter API 的文档记录很差:)

**遵循这条规则：**

1.  如果您的**oauth_callback**不包含任何查询字符串 = 不需要任何时髦。
2.  如果您的**oauth_callback**有任何查询字符串参数 = **URL**单独编码查询字符串参数。

希望这能解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T15:14:52.310

我解决了这个问题。问题是，即使回调 URL 是使用查询字符串方法或标题正确发送的，正如您在链接上看到的那样，在从基本字符串创建签名时，它也被双重转义。由于文档对此非常糟糕，我认为您不应该像其他 oauth_* 参数（又名百分比编码“&”）一样双重转义它。

# php - 使用 PHP PDO 时获取最终的 SQLite 表达式

> ID：14094896
> 
> 赞同：0
> 
> 时间：2012-12-30T21:34:52.790
> 
> 标签：php, sqlite, pdo, backtrace

我在对 SQLite 数据库的某些查询中遇到了一些奇怪的结果。因此，我希望看到发送到数据库的真实查询。我正在使用 PDO，我能得到的最接近的是

```
$statement->debugDumpParams(); 
```

但这只是一个抽象的表示，而不是最终的查询。

有什么办法可以查看实际发送到数据库驱动程序的内容？似乎有一个 C 接口[trace()](http://www.sqlite.org/c3ref/profile.html)，但据我所知，我无法从 PHP 中访问它。

# jquery - 基于包含图像的jQuery切换

> ID：14094901
> 
> 赞同：0
> 
> 时间：2012-12-30T21:35:39.180
> 
> 标签：jquery

我试图在带有类的图像`.default`在 DOM 中时显示块，但我需要在页面加载时隐藏`.full`和。`.del`由于我的切换无法正常工作，因此有关如何使其工作的任何建议。

```
$(document).ready(function() {
    $('.itemcontrols .full').css("display", "none");
    $('.itemcontrols .del').css("display", "none");

    var toggle = $('.item .default');

    if (toggle.length > 1) {
        $(toggle).parent().find('.itemcontrols .full').css("display", "block");
        $(toggle).parent().find('.itemcontrols .del').css("display", "block");   
    } else {

    }
});

<div class="item item1 ui-state-default">
    <img src="9228321128.png" alt="" class="default">     
    <div class="itemcontrols">
        <div id="add1">
            <img src="img/photo_24.png" class="icon">
        </div>
        <div class="full">
            <img src="img/resize_24.png" class="icon">
        </div>
        <div class="del">
            <img src="img/trash_24.png" class="icon">
        </div>
    </div>
</div> 
```

我还必须添加 .default 不是在每个 .item div 中，所以这就是为什么我试图根据它是否存在进行切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:48:40.503

试试这个

```
if (toggle.length >= 1) 
```

[http://jsfiddle.net/ergec/aEkqY/](http://jsfiddle.net/ergec/aEkqY/)

# php - PHP mySQL从子类构造父数据

> ID：14094902
> 
> 赞同：3
> 
> 时间：2012-12-30T21:35:39.607
> 
> 标签：php, oop, mysqli

我有一个包含 3 个表的数据库。`person`, `player`, 和`coach`. 该`person`表包含`player`和`coach`的共同点，例如`firstName`、`lastName`和`email`。,`player`和`coach`表然后有一个链接返回到`person`带有`personId`字段的表。每个访问该站点的人都有一个`person`条目。此外，一些用户可能也有`player`或`coach`条目。数据库以这种方式设置以保持规范化。

在我的代码中，我有一个`person`、`player`和`coach`类。和`player`继承`coach`自`person`。下面是`person`和`player`类的截断版本。

```
class person{  
    private $firstName;
    private $lastName;

    public function __construct($firstName, $lastName){
        $this->firstName = $firstName;
        $this->lastName = $lastName;
    }
}

class player extends person{
    private $position;
    private $jersey;

    public function __construct($firstName, $lastName, $position, $jersey){
        parent::__construct($firstName, $lastName);
        $this->position = $position;
        $this->jersey = $jersey;
    }
} 
```

作为提醒，我对 OOP 很陌生，所以如果有我不知道的事情，请多多包涵。

（附带问题，上面考虑的类是什么，视图？）

现在为了填充这些，我使用我理解的模型类（对吗？）。

```
class personModel{
    public function getPerson($personId){
        $sql = "SELECT * FROM `person` WHERE `personId` = '$personId'";
        //skipping some sql stuff in here
        return new person($sql['firstName'], $sql['lastName']);
    }
} 
```

但现在我的问题的核心是，我该如何实现`playerModel`？

```
class playerModel{
    public function getPlayer($playerId){
        //would I do a join SQL here?
        //or would I call personModel::getPerson()
        //or do both these options couple the two classes too tightly?
    }
} 
```

某种`factory`课程会是另一种选择吗？如果是这样，那将如何进行？

我需要能够构造`person`、`player`和`coach`对象，因为我有属于所有这些类别的用户。

非常感谢任何反馈，如果我需要澄清任何事情，我会经常回来查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:28:04.570

我将从您的附带问题开始，因为术语是谈论 OOP 时的第一个重要部分：

*   您的课程`person`，`player`并且`coach`是模型。模型的目的是将现实的重要部分投射到程序中，以便您（作为程序员）可以直观地使用有关业务领域的术语。
*   视图不是标准的 OOP 术语，有时它是数据库内部的抽象，因此您可以使用视图来处理一个或多个表，而不是直接使用表。有时它是模型的 GUI。

您的类与其说是模型`personModel`，`playerModel`不如说是持久性控制器，或者如您所说的工厂。如果您想学习 OOP 以及从关系数据库中加载/保存模型的可能性，您可以轻松编写自己的代码，类似于 SQL 代码。一个类`DBManagement`可以通过诸如`loadPersons()`. 该操作查询数据库，构建所有人员对象并返回它们。同样，保存可以与`updatePerson(person $person)`.

稍后您可以使用某种 ORM（对象关系映射器）持久性框架（我自己没有使用 PHP 的经验，但[学说 ORM](http://www.doctrine-project.org/projects/orm.html)可能很有趣。在 Java 或 .Net 中经常使用[Hibernate](http://www.hibernate.org/)）。

另外，我建议您以另一种方式设计模型。事实上，你有正确的想法来让`player`和`coach`继承`person`，这样你就可以共享像`firstName`. 但是在这种情况下，该模型不够灵活，无法允许您在上一句中提到的内容，即某些用户属于所有类别。一个特殊的情况是当一个人，实际上是一个球员，将成为教练。例如，如果 Martin 是一名球员，但现在将成为一名教练，那么您必须将一个 Martin 对象换成另一个。这意味着马丁和以前不一样了，仅仅因为他成为了一名教练，这听起来很奇怪，不是吗？

相反，您可以定义，每个用户**始终**是`person`. 有些用户是`coach`es，有些是`player`s，有些是两者，有些不是。但总是一个`person`.

一些用于说明的伪代码：

```
class Person {
    string firstName;
    string lastName;
    List<PersonRole> roles;
}

abstract class PersonRole {}

class Coach extends PersonRole {}

class Player extends PersonRole {
    int position;
    string jersey;
} 
```

这样，每个用户（=Person）都可以对每个角色都没有。如果用户具有角色，那么在该角色对象中，您可以保存该用户的特定角色属性。当然，一个人的角色列表会随着时间的推移而改变，具体取决于该人实际拥有的角色。

一个简洁的副作用是该模型更符合您的数据库架构，因此您应该可以轻松地将关系数据库架构转换为模型实例，反之亦然。

# .htaccess - 重写 Opencart 中的所有主页链接

> ID：14094904
> 
> 赞同：0
> 
> 时间：2012-12-30T21:35:43.557
> 
> 标签：.htaccess, hyperlink, url-rewriting, opencart

我正在使用安装在 /products 子目录中的 OpenCart 1.5.4。我在根目录中安装了一个 wordpress 站点。我将它们的皮肤相同，因此它看起来像同一个站点。

我想重写主页链接的所有实例（尤其是面包屑）以转到我的根目录（而不是我的 OC 安装所在的子目录 (/products)）。

根据一些研究，我了解到最好的方法是在 HTACCESS 文件中。我对操作 htaccess 文件非常陌生。标准 htaccess 文件具有以下重写规则：

```
RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

如何添加规则以更改主页链接：

www.myurl.com/products/index.php?route=common/home

至：

www.myurl.com/

最后，在当前安装中，此文件称为 .htaccess.txt。我是否必须从服务器中删除此文件，删除 .txt 并上传名为 .htaccess 的文件才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T01:33:55.513

您不能`http://www.myurl.com/`同时为 Wordpress 和 OpenCart 使用 URL，因为它们都使用 index.php 文件。您可以使用一种解决方法来使事情看起来更好：

您需要`.htaccess`在您的网站根文件夹中有一个文件，并在该`.htaccess`文件中添加以下行：

```
RewriteEngine On

RewriteRule ^cart.php?route=([a-zA-Z0-9_-]+)$ products/index.php?route=$1 
```

这将使您的 OpenCart 可以从 URL 访问：`http://www.myurl.com/cart.php?route=common/home`而不是`www.myurl.com/products/index.php?route=common/home`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T05:57:48.283

你的设置和我的设置一样，是这样的……

*   根目录中的自定义 HTML - hxxp://mysite.loc/
*   /store 文件夹中的 OpenCart - hxxp://mysite.loc/store

我有一个类似于 Jay Gilford 在他的回答中提到的 mod。
所以我的 OC 链接是

[http://mysite.loc/store](http://mysite.loc/store)

代替

`http://mysite.loc/store/index.php?route=common/home`

使用此设置，您仍然可以从任何商店链接的面包屑路径中找到**主页**链接。喜欢`Home > Category > Product`

就我而言，我所做的是，我已将**Home**文本重命名为**Store**文本。并从 OC 菜单中删除了**Home** Link 菜单。这很简单，但我认为很实用。

然后我将我的**主页**链接添加到面包屑路径和我的 OC 菜单。所以我的面包屑轨迹是这样的......

`Home > Store> Category > Product`

**主页**链接被硬编码到包含面包屑的每个 .tpl 页面。就像`catalog/view/theme/default/template/product/product.tpl`. 您可以通过将面包屑放在标题中来进一步修改它。

就我而言，我已将其硬编码到我的
`catalog/view/theme/default/template/product/product.tpl`和其他相关`.tpl`文件中

```
<div class="breadcrumb">
  <a href="/">Home</span></a>&raquo;
  <?php foreach ($breadcrumbs as $breadcrumb) { ?>
  <?php echo $breadcrumb['separator']; ?><a href="<?php echo $breadcrumb['href']; ?>"><?php echo $breadcrumb['text']; ?></a>
  <?php } ?>
</div> 
```

`Home`我通过这样做重命名了原始链接；

```
 changed
 $_['text_home']   = 'Home';

 to

 $_['text_home']   = 'Store';//Or whatever you like

 from the file. catalog/language/english.php - in my case. 
```

**我知道这是几个月前问过的，只是为未来的读者发布这个**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T22:02:24.940

要删除此处`index.php?route=common/home`的[指南](https://stackoverflow.com/questions/10813809/remove-index-phproute-common-home-from-opencart/10902883#10902883)。至于 .htaccess 代码，您需要将其上传到您的 opencart 安装目录并`.txt`从名称中删除 ，使其变为`.htaccess`

# php - Wikipedia API 忽略引用错误或脚注

> ID：14094911
> 
> 赞同：0
> 
> 时间：2012-12-30T21:37:06.320
> 
> 标签：php, preg-replace, wikipedia-api

我提出这个要求：

```
http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=self-administration&prop=revisions&rvprop=content&rvparse=&rvsection=0 
```

**我的目标是从文章的介绍中获取纯文本。**

它在 XML 文件中返回了一些 HTML。在删除引用之后`strip_tags`，`preg_replace,`我得到了这个：

> 自我给药，在医学意义上，是受试者向他、她或自己给予药理学物质的过程。[...] 引用错误：此页面上有标签，但如果没有 {{Reflist}} 模板或标签，引用将不会显示；请参阅帮助页面。

我想删除

> 引用错误：此页面上有标签，但如果没有 {{Reflist}} 模板或标签，引用将不会显示；请参阅帮助页面。

如何使用 php（`preg_replace`？）或在我的初始查询（忽略错误？）中解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:47:38.690

```
$bad = ' <br /><strong class="error">Cite error: There are <code>&lt;ref&gt;</code> tags on this page, but the references will not show without a <code>&#123;&#123;Reflist&#125;&#125;</code> template or a <code>&lt;references /&gt;</code> tag; see the <a href="/wiki/Help:Cite_errors/Cite_error_refs_without_references" title="Help:Cite errors/Cite error refs without references">help page</a>.</strong> ';

$good = str_replace($bad, '', $intro); 
```

# java - 计算一个数字在有序数组中出现的次数

> ID：14094914
> 
> 赞同：6
> 
> 时间：2012-12-30T21:37:59.707
> 
> 标签：java

我的老师给了我下一个任务：

```
On a sorted array, find the number of occurrences of a number.
The complexity of the algorithm must be as small as possible. 
```

这是我想到的：

```
public static int count(int[] a, int x)
{
    int low = 0, high = a.length - 1;

    while( low <= high )
    {
        int middle = low + (high - low) / 2;

        if( a[middle] > x ) {
            // Continue searching the lower part of the array
            high = middle - 1;
        } else if( a[middle] < x ) {
            // Continue searching the upper part of the array
            low = middle + 1;
        } else {
            // We've found the array index of the value
            return x + SearchLeft(arr, x, middle) + SearchRight(arr, x, middle);
        }
    }

    return 0;
} 
```

`SearchLeft`并`SearchRight`迭代数组，直到数字不显示。

我不确定我是否已经为这个问题编写了更快的代码，我想看看其他意见。

**编辑：**在评论和答案的帮助下，这是我目前的尝试：

```
public static int count(int[] array, int value)
{
    return SearchRightBound(array, value) - SearchLeftBound(array, value);
}

public static int SearchLeftBound(int[] array, int value)
{
    int low = 0, high = array.length - 1;

    while( low < high )
    {
        int middle = low + (high - low) / 2;

        if(array[middle] < value) {
            low = middle + 1;
        }
        else {
            high = middle;
        }
    }

    return low;
}

public static int SearchRightBound(int[] array, int value)
{
    int low = 0, high = array.length - 1;

    while( low < high )
    {
        int middle = low + (high - low) / 2;

        if(array[middle] > value) {
            high = middle;
        }
        else {
            low = middle + 1;
        }
    }

    return low;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T21:43:11.457

> SearchLeft 和 SearchRight 迭代数组，直到数字不显示。

这意味着如果整个数组都填充了目标值，那么您的算法就是`O(n)`.

如果您`O(log n)`对第一次和最后一次出现的`x`.

```
// search first occurrence
int low = 0, high = a.length - 1;
while(low < high) {
    int middle = low + (high-low)/2;
    if (a[middle] < x) {
        // the first occurrence must come after index middle, if any
        low = middle+1;
    } else if (a[middle] > x) {
        // the first occurrence must come before index middle if at all
        high = middle-1;
    } else {
        // found an occurrence, it may be the first or not
        high = middle;
    }
}
if (high < low || a[low] != x) {
    // that means no occurrence
    return 0;
}
// remember first occurrence
int first = low;
// search last occurrence, must be between low and a.length-1 inclusive
high = a.length - 1;
// now, we always have a[low] == x and high is the index of the last occurrence or later
while(low < high) {
    // bias middle towards high now
    int middle = low + (high+1-low)/2;
    if (a[middle] > x) {
        // the last occurrence must come before index middle
        high = middle-1;
    } else {
        // last known occurrence
        low = middle;
    }
}
// high is now index of last occurrence
return (high - first + 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T21:40:33.100

好吧，这本质上是二分搜索+走向解决方案区间的边界。你可以加快速度的唯一方法可能是缓存最后的低和高值，然后使用二进制搜索来查找边界，但这真的只对非常大的间隔很重要，在这种情况下你不太可能跳就在其中。

# java - 将 jersey 项目转换为标准 servlet 应用程序的起点

> ID：14094915
> 
> 赞同：0
> 
> 时间：2012-12-30T21:38:07.800
> 
> 标签：java, google-app-engine, jersey

我正在尝试实现[此处](https://github.com/blueimp/jQuery-File-Upload/wiki/Google-App-Engine-Java)显示的示例。

该示例似乎适用于我不使用或不熟悉的球衣设置。将其转换为标准的 java servlet 项目有多难（idk 如何命名）

我应该采取什么步骤。似乎大多数 @ 注释都需要更改为 servlet。

这似乎也与标准的 appengine 上传设置非常不同，后者都发生在一个 servlet 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T21:46:22.040

将代码重新编写为标准 servlet 并删除球衣将是大量工作。Jersey 带走了这么多样板代码。例如 JSON 转换由 jersey 完成，否则必须自定义实现。

而且您肯定可以将多个 servlet 部署到 gae，这应该以哪种方式成为标准？

只看第一种方法：

```
 @GET
  @Path("/url")
  public Response getCallbackUrl() {
    String url = blobstoreService.createUploadUrl("/rest/file");
    return Response.ok(new FileUrl(url)).build();
  } 
```

仅使用标准 servlet 时，您需要执行以下操作：

1.  web.xml 中的 Servlet 定义和映射到 /url
2.  实现一个 HttpServlet，覆盖 doGet() 方法
3.  发送响应代码 200 OK
4.  设置适当的 HTTP 响应标头
5.  将响应转换为 JSON 并将其写入响应

# c# - 将字符串列表项添加到 int 数组

> ID：14094923
> 
> 赞同：0
> 
> 时间：2012-12-30T21:39:34.803
> 
> 标签：c#, arrays, string, list, int

您好，我需要从字符串列表中获取字符串项目并将其添加到我尝试这样的 int 数组，但它写给我错误不能隐式地将 int 类型转换为 int [] 但在序列中我只将一个 int 添加到数组中的一项所以请问有什么问题

```
private void buttonGenerateO_Click(object sender, EventArgs e)
            {
            List<string> AgentNumbers = new List<string>();
            List<string> AgentRide = new List<string>();
            int pocet = AgentNumbers.Count;
            int[][] dvouRozmernePole = new int[2][];
            dvouRozmernePole[0] = new int[pocet];
            dvouRozmernePole[1] = new int[pocet];

        foreach (string AgeNumb in AgentNumbers)
        {
            for (int i = 0; i < dvouRozmernePole[0].Length; i++)
                dvouRozmernePole[i] = Convert.ToInt32(AgeNumb);

        }

        foreach (string AgeRide in AgentRide)
        {
            for (int i = 0; i < dvouRozmernePole[1].Length; i++)
                dvouRozmernePole[i] = Convert.ToInt32(AgeRide);

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:44:07.467

看看这个声明：

```
int[][] dvouRozmernePole = new int[2][]; 
```

`dvouRozmernePole`数组*数组也是*如此。现在看这里：

```
dvouRozmernePole[i] = Convert.ToInt32(AgeNumb); 
```

您正在尝试为 分配一个`int`值`dvouRozmernePole[i]`，但您不能这样做，因为它应该是一个`int[]`.

我怀疑你想要：

```
dvouRozmernePole[0][i] = Convert.ToInt32(AgeNumb); 
```

话虽如此，鉴于这些行：

```
List<string> AgentNumbers = new List<string>();
List<string> AgentRide = new List<string>();
int pocet = AgentNumbers.Count;
int[][] dvouRozmernePole = new int[2][];
dvouRozmernePole[0] = new int[pocet];
dvouRozmernePole[1] = new int[pocet]; 
```

...无论如何，您总是会有空列表，因此没有要转换的值。

你*真的*需要使用数组吗？在任何地方使用`List<T>`几乎肯定会更简单。

LINQ 也可以使这更简单。例如：

```
int[] numbers = AgentNumbers.Select(x => int.Parse(x)).ToArray();
int[] rides = AgentRide.Select(x => int.Parse(x)).ToArray();
int[][] dvouRozmernePole = { numbers, rides }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:43:36.280

错误很明显。在声明中

```
dvouRozmernePole[i] = Convert.ToInt32(AgeNumb); 
```

您将整数分配给数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T21:43:55.313

`dvouRozmernePole`是一个数组`int[]`，而`Convert.ToInt32`返回一个`int`. 因此在：

```
dvouRozmernePole[i] = Convert.ToInt32(AgeNumb); 
```

`dvouRozmernePole[i]`是一个`int[]`，而您正在尝试分配一个`int`.

看起来你想要：

```
dvouRozmernePole[0][i] = Convert.ToInt32(AgeNumb); 
```

然后

```
dvouRozmernePole[1][i] = Convert.ToInt32(AgeRide); 
```

你可以改为：

```
int[][] dvouRozmernePole = new int[2][]
{
    AgentNumbers.Select(num => Convert.ToInt32(num)).ToArray(),
    AgentRide.Select(ride => Convert.ToInt32(ride)).ToArray()
}; 
```

初始化数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T21:44:30.667

dvouRozmernePole 是一个整数数组

所以`dvouRozmernePole[i]`期望和 int[] 而不是 int 值

尝试

你的意思是

```
 for (int i = 0; i < dvouRozmernePole[0].Length; i++)
           dvouRozmernePole[0][i] = Convert.ToInt32(AgeNumb);
    }

    foreach (string AgeRide in AgentRide)
    {
        for (int i = 0; i < dvouRozmernePole[1].Length; i++)
            dvouRozmernePole[1][i] = Convert.ToInt32(AgeRide);

    } 
```

# class - Joomla 3.0 组件 $params = $app->getParams();

> ID：14094930
> 
> 赞同：1
> 
> 时间：2012-12-30T21:40:21.700
> 
> 标签：class, joomla, joomla3.0

我正在使用 Joomla 3.0，但由于一个小问题，此时我无法使用组件。

这是错误，我可以通过将 Legacy 添加到类中轻松解决的所有其他错误，就像`JView`这样`JViewLegacy`

但是对于下面的错误，我找不到解决方案：

任何帮助都会很棒！

错误：

```
Fatal error: Call to a member function getParams() on a non-object in 
/var/www/g35003/mywebsite.nl/HTML/administrator/components/
com_taxonomy/taxonomy.php on line 16 
```

代码行 16 被标记。

```
defined( '_JEXEC' ) or die( 'Restricted access' );

global $mainframe;
$params = $app->getParams();  /** <-- Line 16 */
require_once (JPATH_COMPONENT.DS.'controller.php');
$controller = new TaxonomyController();
$controller->execute(JRequest::getCmd('task'));
$controller->redirect(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T22:03:42.053

`global $mainframe;`我相信自 Joomla 2.5 以来已被弃用。要获取参数，可以使用以下代码：

```
$params = JComponentHelper::getParams('com_taxonomy');
$test = $params->get('param_name'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:07:12.363

尝试这个

```
defined( '_JEXEC' ) or die( 'Restricted access' );

$app    = &JFactory::getApplication();
$params = $app->getParams();  /** <-- Line 16 */
require_once (JPATH_COMPONENT.DS.'controller.php');
$controller = new TaxonomyController();
$controller->execute(JRequest::getCmd('task'));
$controller->redirect(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T12:38:35.257

为了在我的视图中获取菜单项的参数，我使用了以下内容：

```
$menu = JFactory::getApplication('site')->getMenu()->getActive();
$this->params = $menu->params; 
```

# javascript - JQuery ajax 调用 - 无法传递 url 参数

> ID：14094932
> 
> 赞同：1
> 
> 时间：2012-12-30T21:40:39.280
> 
> 标签：javascript, jquery, ajax

对不起这个“新手”问题。

这是我的问题：

我正在使用 JQuery 1.8.2 并尝试发出 ajax 请求：

这是有效的：

```
 $.ajax({
        url: 'http://191.168.0.133/rest/interface/test/1',
        dataType: 'json',
        timeout: 5000,
        success: function(data, status){
                $.each(data, function(i,item){
                        var registrationInfo = '<h1>' + item.testID+ '</h1>';
                        output.append(registrationInfo);
                    });
                },
        error: function(){
                output.text('There was an error loading the data.');
            }
        }); 
```

但我希望 URL 参数由变量传递。以下不工作，但总是以错误功能“加载数据时出错”结束。

```
 var testURL = 'http://191.168.0.133/rest/interface/test/1';
    $.ajax({
        url: testURL,
        dataType: 'json',
        timeout: 5000,
        success: function(data, status){
                $.each(data, function(i,item){
                        var registrationInfo = '<h1>' + item.testID+ '</h1>';
                        output.append(registrationInfo);
                    });
                },
        error: function(){
                output.text('There was an error loading the data.');
            }
        }); 
```

我要疯了。谁能帮我一把？提前致谢 ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T21:48:58.333

我认为在网址后添加分号可以解决您的问题。

如果有分号，那么我建议发布一个[jsfiddle](http://jsfiddle.net/)并尝试是否可以将其归结为导致错误的基本差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:52:02.887

您提到的代码似乎很好。我想你可能会忽略其他东西......无论如何，只是为了指导你一些建议：

*   你说它不工作......你的意思是你得到一个语法错误？您可以在浏览器控制台中检查它。F12 键在大多数浏览器中打开控制台。或者从浏览器菜单中打开错误控制台并查看。或者错误函数是否执行

*   您可能希望在每个“语句”（如变量声明、变量赋值）的末尾加上一个分号，以避免由于 JavaScript 的“自动分号插入”特性而引起初学者的混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T07:45:10.477

我能够解决这个问题。

虽然 $.ajax 命令仍然不起作用，但我切换到 $.getJSON 并且这有效：

```
 var testURL = 'http://191.168.0.133/rest/interface/test/1';
    $.getJSON(testURL, function(data){
            $.each(data, function(i,item){
                    var registrationInfo = '<h1>' + item.testID+ '</h1>';
                    output.append(registrationInfo);
                });
            }; 
```

仍然没有线索，为什么 $.ajax 不起作用，因为 getJSON 只是 ajax 命令的简写。

# jquery - 选择标签点击，jquery 没有“通知”

> ID：14094941
> 
> 赞同：0
> 
> 时间：2012-12-30T21:41:47.203
> 
> 标签：jquery, option, onclicklistener

我在这里遇到一个问题。首先是可视化代码：

```
<input type="radio" name="user_by_list" value="" id="userbylist"/>
<div id="userbylist1">
    <select>
        <option value="1">1</option>
        <option value="2">2</option>
    </select>
</div>
<input type="radio" name="user_by_text" value="" id="userbytext"/>
<div id="userbytext1">
    <input type="text" value=""/>
</div> 
```

这是我的 jQuery 代码：

```
$("#userbylist").click(function () {
    $("#userbytext").prop('checked', false); // for unchecking the opposite radiobutton
});
$("#userbytext").click(function () {
    $("#userbylist").prop('checked', false); // for unchecking the opposite radiobutton
});

$("#userbylist1").click(function () { // for clicking the whole div
    $("#userbylist").prop('checked', true); // checking #userbylist radiobutton 
    $("#userbytext").prop('checked', false); // unchecking #userbytext radiobutton
});
$("#userbytext1").click(function () { // for clicking the whole div
    $("#userbytext").prop('checked', true); // checking #userbytext radiobutton
    $("#userbylist").prop('checked', false); // unchecking #userbylist radiobutton
}); 
```

现在，问题是，当我单击选择标签以检查该 div 的单选按钮时，它不起作用，但是当我单击文本输入区域时，它工作正常。当您单击整个 div 时，它会根据功能进行检查和取消检查，因此也可以正常工作。我已经尝试为所有选项设置类，并在整个`<select>`标签上设置一个 id。这里有什么帮助吗？

PS。如果您不明白，尽管我已尽力解释问题，但我已经设置了[一个示例页面](http://craftersinn.net/example.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:09:28.713

我认为单击不起作用的原因是因为选项菜单弹出窗口阻止了单击的向上部分发生在与向下部分发生的相同元素上。

作为替代方案， .change() 将在所选值发生更改时运行该函数，而 .mousedown() 将在您将鼠标放在选项列表上时立即运行该函数：

```
 $("#userlist2").change(function () {
      $("#userlist").prop('checked', true);
      $("#usertext").prop('checked', false);
    });

    ...

    <select id="userlist2" name="userlist2">
      <option value="none">Select user</option>
      <option value="none">-----------</option>
      <option value="1">Mike007</option>
      <option value="2">UrbanSurban01</option>
    </select> 
```

# java - 内容提供程序出错

> ID：14094942
> 
> 赞同：0
> 
> 时间：2012-12-30T21:41:52.910
> 
> 标签：java, android, database

我还在学习编程，我有一个关于我正在编写的程序的问题，它给了我一个奇怪的错误。

我的应用程序在数据库中存储 3 个字符串和 1 个 BLOB（一张图片）。

画面如下：

图片的链接在这里：http: [//i.stack.imgur.com/RPxDO.png](http://i.stack.imgur.com/RPxDO.png)

我遇到的问题是在输入任何其他数据（即无聊的项目、人名）之前，您必须先拍照，否则程序将崩溃。如果您先拍照，那么填写其余部分没有问题。

下面的代码是：

```
public class AddItem extends Activity implements View.OnClickListener {

    // GUI
    private EditText itemName;
    private AutoCompleteTextView personName;
    private Button setFinish, setDate, camera;
    private TextView getDate; 
    private ImageView window;

    // URI
    private Uri addUri;

    // Date
    private int yr, month, day;

    // DatePicker ID
    static final int DATE_DIALOG_ID = 1;

    // For Camera
    final static int cameraData = 0;
    private Bitmap bmp;

    // ----------------------------------------------------

    public ArrayList<String> contactNameA = new ArrayList<String>();
    public ArrayList<String> contactNumberA = new ArrayList<String>();
    String[] nameStringArray = null;
    String[] phoneStringArray = null;

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_item);

        // Method Calls -----------------------------------------------------
        // ------------------------------------------------------------------

        init(); // initialize the parameters

        tabSetter(); // Create the tabs

        calenderSet();

        autoCompleteBox();

        // Listeners --------------------------------------------------------

        setFinish.setOnClickListener(this);

        camera.setOnClickListener(this);

        setDate.setOnClickListener(this);

        // ------------------------------------------------------------------

        // For pictures ---------
        InputStream is = getResources().openRawResource(R.drawable.take_camera);
        bmp = BitmapFactory.decodeStream(is);
        window.setImageBitmap(bmp);

        Bundle extras = getIntent().getExtras();

        addUri = (savedInstanceState == null) ? null : (Uri) savedInstanceState
                .getParcelable(BorrowMeContentProvider.CONTENT_ITEM_TYPE);

        if (extras != null) {
            addUri = extras
                    .getParcelable(BorrowMeContentProvider.CONTENT_ITEM_TYPE);

            fillData(addUri);
        }

    }

        // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    private void autoCompleteBox() {

        ContentResolver cr = getContentResolver();

        Uri contacts = Uri.parse("content://contacts/people");

        Cursor mCursor = cr.query(contacts, null, null, null, null);

        if (mCursor.moveToFirst()) {

            String nameOfContact;
            String phoneNumberContact;

            int nColumn = mCursor.getColumnIndex("name");
            int pColumn = mCursor.getColumnIndex("number");
            Log.d("START", "Entering method");
            Log.d("int Name", Integer.toString(nColumn));
            Log.d("int Number", Integer.toString(pColumn));

            do {

                nameOfContact = mCursor.getString(nColumn);
                phoneNumberContact = mCursor.getString(pColumn);
                if ((nameOfContact != " " || nameOfContact != null)
                        && (phoneNumberContact != " " || phoneNumberContact != null)) {

                    contactNameA.add(nameOfContact);
                    contactNumberA.add(phoneNumberContact);

                }

            } while (mCursor.moveToNext());

        }

        nameStringArray = (String[]) contactNameA.toArray(new String[contactNameA.size()]);
        phoneStringArray = (String[]) contactNumberA.toArray(new String[contactNameA.size()]);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_dropdown_item_1line, nameStringArray);

        personName.setAdapter(adapter);

    }

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    private void init() {

        personName = (AutoCompleteTextView) findViewById(R.id.nameOfPerson);
        itemName = (EditText) findViewById(R.id.borrowItemFeild);

        setFinish = (Button) findViewById(R.id.finishThis);

        camera = (Button) findViewById(R.id.cameraButton);
        window = (ImageView) findViewById(R.id.imageWindow);

        setDate = (Button) findViewById(R.id.dateChange);
        getDate = (TextView) findViewById(R.id.textDate);

    }

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    @Override
    public void finish() {

        super.finish();
    }

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this, mDateSetListener, yr, month, day);

        }
        return null;
    }

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {

            yr = year;
            month = monthOfYear;
            day = dayOfMonth;

            getDate.setText((month + 1) + "/" + day + "/"
                    + year);

            /*
             * Toast.makeText( getBaseContext(), "Date Selected: " + (month + 1)
             * + "/" + day + "/" + year, Toast.LENGTH_SHORT).show();
             */
        }
    };

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    private void calenderSet() {
        // Call calendar object to get date
        Calendar today = Calendar.getInstance();

        // Set the parameters to the current date, so the user doesn't have to
        // scroll from the default date
        yr = today.get(Calendar.YEAR);
        month = today.get(Calendar.MONTH);
        day = today.get(Calendar.DAY_OF_MONTH);
    }

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    // Handles the clicks for all the various views
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        //TabHost th = (TabHost) findViewById(R.id.tabhost);

        switch (v.getId()) {

        case (R.id.finishThis):

            if (personName.getText().toString().equals("")) {
                Toast.makeText(this, "Name can't be blank", Toast.LENGTH_SHORT)
                        .show();
            } else if (itemName.getText().toString().equals("")) {
                Toast.makeText(this, "Borrowed item can't be blank",
                        Toast.LENGTH_SHORT).show();

                // Sets back to tab 0 to ensure user fills out info
                //th.setCurrentTab(0);

            } else if (getDate.getText().toString().equals("Select Date")) {
                Toast.makeText(this, "Please select a date", Toast.LENGTH_SHORT)
                        .show();
                // Sets back to tab 0 to ensure user fills out info
                //th.setCurrentTab(0);

            } else {
                finish();
            }

            break;

        case (R.id.cameraButton):

            Intent i = new Intent(
                    android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(i, cameraData);

            break;

        case (R.id.dateChange):

            showDialog(DATE_DIALOG_ID);

            break;

        }

    }

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    private void fillData(Uri uri) {
        String[] projection = { BorrowMeTable.COLUMN_NAME,
                BorrowMeTable.COLUMN_DATE, BorrowMeTable.COLUMN_ITEM,  BorrowMeTable.COLUMN_IMAGE};
        Cursor databaseCursor = getContentResolver().query(uri, projection, null, null,
                null);
        if (databaseCursor != null) {
            databaseCursor.moveToFirst();

            personName.setText(databaseCursor.getString(databaseCursor
                    .getColumnIndexOrThrow(BorrowMeTable.COLUMN_NAME)));
            itemName.setText(databaseCursor.getString(databaseCursor
                    .getColumnIndexOrThrow(BorrowMeTable.COLUMN_ITEM)));

            getDate.setText(databaseCursor.getString(databaseCursor
                    .getColumnIndexOrThrow(BorrowMeTable.COLUMN_DATE)));

            try {
                byte[] imageByteArray = databaseCursor.getBlob(databaseCursor.getColumnIndex(BorrowMeTable.COLUMN_IMAGE));
                ByteArrayInputStream imageStream = new ByteArrayInputStream(imageByteArray);
                bmp = BitmapFactory.decodeStream(imageStream);
                window.setImageBitmap(bmp);
            } catch (Exception e) {

            }
            databaseCursor.close();
        }
    }

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        saveState();
        outState.putParcelable(BorrowMeContentProvider.CONTENT_ITEM_TYPE,
                addUri);
    }

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    @Override
    protected void onPause() {
        super.onPause();
    saveState();
    }

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    private void saveState() {
        ContentValues values = new ContentValues();
        String date = getDate.getText().toString();
        String item = itemName.getText().toString();
        String name = personName.getText().toString();

        // Only save if either item or person name
        // is available

        if (item.length() == 0 && name.length() == 0) {
            return;
        }

        if (bmp == null) {

            values.put(BorrowMeTable.COLUMN_ITEM, item);
            values.put(BorrowMeTable.COLUMN_NAME, name);
            values.put(BorrowMeTable.COLUMN_DATE, date);        

        } else {
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
            byte[] byteArray = stream.toByteArray();
            values.put(BorrowMeTable.COLUMN_ITEM, item);
            values.put(BorrowMeTable.COLUMN_NAME, name);
            values.put(BorrowMeTable.COLUMN_DATE, date);
            values.put(BorrowMeTable.COLUMN_IMAGE, byteArray);

        }

        // The resolver statement goes here - moved it into the IF above to see if error is corrected.
        if (addUri == null) {
            // New Entry
            addUri = getContentResolver().insert(
                    BorrowMeContentProvider.CONTENT_URI, values);
        } else {
            // Update Entry
                    getContentResolver().update(addUri, values, null, null);

        }

    }

    // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == RESULT_OK) {
            Bundle extras = data.getExtras();
            bmp = (Bitmap) extras.get("data");
            window.setImageBitmap(bmp);
        }
    }
} 
```

这是我的内容提供者：

```
public class BorrowMeContentProvider extends ContentProvider {

    private BorrowMeDatabaseHelper database;

    private static final int BORROWME = 10;
    private static final int BORROWME_ID = 20;

    private static final String AUTHORITY = "com.fthatnoise.borrow.me.contentprovider";

    private static final String BASE_PATH = "me";
    public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY
            + "/" + BASE_PATH);

    public static final String CONTENT_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE
            + "/BORROWME";
    public static final String CONTENT_ITEM_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE
            + "/BORROWMETYPE";

    private static final UriMatcher sURIMatcher = new UriMatcher(
            UriMatcher.NO_MATCH);
    static {
        sURIMatcher.addURI(AUTHORITY, BASE_PATH, BORROWME);
        sURIMatcher.addURI(AUTHORITY, BASE_PATH + "/#", BORROWME_ID);
    }

    // -------------------------------------------------------------

    @Override
    public boolean onCreate() {
        database = new BorrowMeDatabaseHelper(getContext());
        return false;
    }

    // -------------------------------------------------------------

    @Override
    public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {

        SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

        checkColumns(projection);

        queryBuilder.setTables(BorrowMeTable.DATABASE_TABLE);

        int uriType = sURIMatcher.match(uri);
        switch (uriType) {
        case BORROWME:
            break;
        case BORROWME_ID:

            queryBuilder.appendWhere(BorrowMeTable.COLUMN_ID + "="
                    + uri.getLastPathSegment());
            break;
        default:
            throw new IllegalArgumentException("Error in URI: " + uri);
        }

        SQLiteDatabase db = database.getWritableDatabase();
        Cursor cursor = queryBuilder.query(db, projection, selection,
                selectionArgs, null, null, sortOrder);

        cursor.setNotificationUri(getContext().getContentResolver(), uri);

        return cursor;
    }

    // -------------------------------------------------------------

    @Override
    public String getType(Uri uri) {
        return null;
    }

    // -------------------------------------------------------------

    @Override
    public Uri insert(Uri uri, ContentValues values) {

        int uriType = sURIMatcher.match(uri);
        SQLiteDatabase sqlDB = database.getWritableDatabase();
        long id = 0;

        switch (uriType) {
        case BORROWME:
            id = sqlDB.insert(BorrowMeTable.DATABASE_TABLE, null, values);
            break;
        default:
            throw new IllegalArgumentException("Error in URI: " + uri);
        }

        getContext().getContentResolver().notifyChange(uri, null);
        return Uri.parse(BASE_PATH + "/" + id);
    }

    // -------------------------------------------------------------

    @Override
    public int delete(Uri uri, String selection, String[] selectionArgs) {
        int uriType = sURIMatcher.match(uri);
        SQLiteDatabase sqlDB = database.getWritableDatabase();
        int rowsDeleted = 0;
        switch (uriType) {
        case BORROWME:
            rowsDeleted = sqlDB.delete(BorrowMeTable.DATABASE_TABLE, selection,
                    selectionArgs);
            break;
        case BORROWME_ID:
            String id = uri.getLastPathSegment();
            if (TextUtils.isEmpty(selection)) {
                rowsDeleted = sqlDB.delete(BorrowMeTable.DATABASE_TABLE,
                        BorrowMeTable.COLUMN_ID + "=" + id, null);
            } else {
                rowsDeleted = sqlDB.delete(BorrowMeTable.DATABASE_TABLE,
                        BorrowMeTable.COLUMN_ID + "=" + id + " and " + selection,
                        selectionArgs);
            }
            break;
        default:
            throw new IllegalArgumentException("Error in URI: " + uri);
        }
        getContext().getContentResolver().notifyChange(uri, null);
        return rowsDeleted;
    }

    // -------------------------------------------------------------

    @Override
    public int update(Uri uri, ContentValues values, String selection,
            String[] selectionArgs) {

        int uriType = sURIMatcher.match(uri);
        SQLiteDatabase sqlDB = database.getWritableDatabase();
        int rowsUpdated = 0;
        switch (uriType) {
        case BORROWME:
            rowsUpdated = sqlDB.update(BorrowMeTable.DATABASE_TABLE, values, selection,
                    selectionArgs);
            break;
        case BORROWME_ID:
            String id = uri.getLastPathSegment();
            if (TextUtils.isEmpty(selection)) {
                rowsUpdated = sqlDB.update(BorrowMeTable.DATABASE_TABLE, values,
                        BorrowMeTable.COLUMN_ID + "=" + id, null);
            } else {
                rowsUpdated = sqlDB.update(BorrowMeTable.DATABASE_TABLE, values,
                        BorrowMeTable.COLUMN_ID + "=" + id + " and " + selection,
                        selectionArgs);
            }
            break;
        default:
            throw new IllegalArgumentException("Error in URI: " + uri);
        }
        getContext().getContentResolver().notifyChange(uri, null);
        return rowsUpdated;
    }

    // -------------------------------------------------------------

    private void checkColumns(String[] projection) {
        String[] available = { BorrowMeTable.COLUMN_ITEM,
                BorrowMeTable.COLUMN_NAME, BorrowMeTable.COLUMN_DATE,
                BorrowMeTable.COLUMN_ID, BorrowMeTable.COLUMN_IMAGE };
        if (projection != null) {
            HashSet<String> requestedColumns = new HashSet<String>(
                    Arrays.asList(projection));
            HashSet<String> availableColumns = new HashSet<String>(
                    Arrays.asList(available));

            if (!availableColumns.containsAll(requestedColumns)) {
                throw new IllegalArgumentException(
                        "Unknown columns in projection");
            }
        }
    }

} 
```

最后，如果我不先拍照并在任何文本字段中输入数据后尝试拍照，则会收到错误消息 -

```
12-30 15:58:21.042: E/AndroidRuntime(22646): FATAL EXCEPTION: main
12-30 15:58:21.042: E/AndroidRuntime(22646): java.lang.IllegalArgumentException: Unknown URI me/9
12-30 15:58:21.042: E/AndroidRuntime(22646):    at android.content.ContentResolver.update(ContentResolver.java:988)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at com.fthatnoise.borrow.me.AddItem.saveState(AddItem.java:400)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at com.fthatnoise.borrow.me.AddItem.onSaveInstanceState(AddItem.java:348)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at android.app.Activity.performSaveInstanceState(Activity.java:1147)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1216)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:3129)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at android.app.ActivityThread.handleStopActivity(ActivityThread.java:3188)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at android.app.ActivityThread.access$900(ActivityThread.java:141)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at android.os.Looper.loop(Looper.java:137)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at java.lang.reflect.Method.invokeNative(Native Method)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at java.lang.reflect.Method.invoke(Method.java:511)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-30 15:58:21.042: E/AndroidRuntime(22646):    at dalvik.system.NativeStart.main(Native Method) 
```

这可能很简单，任何帮助都会很棒。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:23:18.530

```
java.lang.IllegalArgumentException: Unknown URI me/9
    at android.content.ContentResolver.update(ContentResolver.java:988) 
```

看来您的 URI 格式不正确。我在 ContentProviders 方面不是最好的，但我相信你想使用这样的东西：

```
URI uri = ContentUris.withAppendedId(BorrowMeContentProvider.CONTENT_URI, id);
getContentResolver().update(uri, values, null, null); 
```

`id`您要更新的行的主键在哪里，在这种情况下是`9`。

# c++ - 制作一个不断变化的随机整数？

> ID：14094947
> 
> 赞同：4
> 
> 时间：2012-12-30T21:42:59.057
> 
> 标签：c++, random, integer

如何创建一个不断变化的伪随机整数？这样，我可以输入：

```
cout << randomInt << endl;
cout << randomInt << endl;
cout << randomInt << endl; 
```

并且程序将返回如下内容：

```
45.7
564.89
1.64 
```

（我不确定这是否有任何意义。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T21:49:09.083

创建一个表示随机数的类：

```
class Random {
}; 
```

然后重载`operator<<`：

```
std::ostream& operator<<(std::ostream& os, const Random& random) {
    return os << generate_random();
} 
```

用于：

```
int main() {
    Random random;
    std::cout << random; 
    std::cout << random; 
    std::cout << random; 
    return 0;
} 
```

显然，您需要实现`generate_random`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-30T21:46:14.493

Using the new [C++11 pseudo-random number generation classes](http://en.cppreference.com/w/cpp/numeric/random):

```
#include <random>
#include <iostream>
int main()
{
    std::random_device rd;
    std::mt19937 gen(rd());
    std::uniform_int_distribution<> dis(1, 6);
    for(int n=0; n<10; ++n)
        std::cout << dis(gen) << ' ';
    std::cout << '\n';
} 
```

The above simulates ten dice rolls.

If you want floating-point values instead of integers, use [`std::uniform_real_distribution`](http://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution) instead of [`std::uniform_int_distribution`](http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T21:45:02.557

This is exactly what `std::rand` is for:

```
#include <cstdlib>
#include <ctime>
#include <iostream>

int main()
{    
    std::srand(static_cast<unsigned>(std::time(0))); // seed

    for (int i = 5; i--;) std::cout << std::rand() % 5 << '\n';

    // Output are random integers
} 
```

***[Demo](http://ideone.com/2xeeLh)***

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-30T22:04:57.007

使用单个隐式转换创建一个类

```
class t { operator int() { return 42; } };

int main()
{
    t test; std::cout << t <<'\n';
    return test;
} 
```

当然，无论您想要什么其他成员，都没有其他转换运算符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-30T21:51:01.920

这与其他随机代码不能很好地配合......

```
#include <ctime>
#include <cstdlib>

struct RandomInt {
  RandomInt() {
    static bool initialized = (srand(std::time(0)), true);
  }
  operator int() {
    return std::rand();
  }
};
#include <iostream>
std::ostream& operator<<( std::ostream& stream, RandomInt x ) {
  return stream << static_cast<int>(x);
}

int main() {
  RandomInt randomInt;
  std::cout << randomInt << "\n";
  std::cout << randomInt << "\n";
  std::cout << randomInt << "\n";
} 
```

这几乎是个坏主意。

# java - Java Jung 图形编辑器

> ID：14094949
> 
> 赞同：0
> 
> 时间：2012-12-30T21:43:09.307
> 
> 标签：java, extend, extends, jung

我有存储在数据库中的邻接矩阵，我想使用 Java [Jung](http://jung.sourceforge.net/doc/index.html)图形包交互式地编辑它们。交互式图形编辑可以在示例[GraphEditorDemo](http://jung.sourceforge.net/doc/api/index.html)中看到。我已经完成了一个方法，该方法将从邻接矩阵中的信息创建图形对象。现在我想把它放在一起以交互方式编辑这些图（创建/删除顶点/边，修改边权重和容量......）。我想在不重新发明轮子的情况下有效地做到这一点。

那么，创建/扩展交互式图形编辑器的最佳方法是什么？

1.  我可以延长`GraphEditorDemo`吗？

我认为这不是一个有效的选项，因为我无法控制 GraphEditorDemo 中的顶点/边工厂，这与我的图表及其在数据库中的工厂不同。

1.  除了扩展之外，我还必须使用哪些其他选项才能使用所有这些代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T22:12:46.233

我认为实现所需的最佳选择是直接查看 GraphEditorDemo 类的源代码，以了解它是如何使用该库的。

[提示：那里](http://grepcode.com/file/repo1.maven.org/maven2/net.sf.jung/jung-samples/2.0.1/edu/uci/ics/jung/samples/GraphEditorDemo.java)有可用的资源，并且似乎得到了很好的评论。

# c# - 非重复随机字母数字代码

> ID：14094956
> 
> 赞同：1
> 
> 时间：2012-12-30T21:44:00.947
> 
> 标签：c#, random

我的一个客户想为他的物品使用一个唯一的代码（长篇故事......），他问我一个解决方案。该代码将由 4 部分组成，其中第一部分是发送商品的邮政编码，第二部分是供应商注册号，第三部分是发送商品的年份，最后一部分是三除法字母数字唯一字符。

如您所见，前三个部分是静态字段，同一年同一发件人永远不会改变。所以我们可以说最后一部分是那一年的标识符部分。这部分是 3 位字母数字，表示从 000 开始，以 ZZZ 结束。

问题是我的客户出于某些合理的原因，希望这部分不是连续的。例如，这不是他想要的：

> 06450-05-2012-000
> 
> 06450-05-2012-001
> 
> 06450-05-2012-002
> 
> ...
> 
> 06450-05-2012-ZZY
> 
> 06450-05-2012-ZZZ

最后一部分应该随机产生，如：

> 06450-05-2012-A17
> 
> 06450-05-2012-0BF
> 
> 06450-05-2012-002
> 
> ...
> 
> 06450-05-2012-T7W
> 
> 06450-05-2012-22C

但它也应该是非重复的。因此，一旦生成了可能的 id，就应该从选择池中丢弃该可能性。

我正在寻找一种有效的方法来做到这一点。

1.  如果我只记录选定的可能性并对照它们检查新创建的可能性，那么在最坏的情况下，它总是会继续产生已经选择的可能性，尤其是在接近尾声时。
2.  如果我一次创建所有可能性并将它们记录在表或文件中，则每次创建项目后可能需要一段时间，因为它会查找未选择的记录。顺便说一句，26 个字母 + 10 个数字意味着 46.656 种可能的组合，并且有可能添加第 4 格，这意味着 1.679.616 种可能的组合。

有没有更有效的方法可以推荐？我将使用 C# 进行编码，使用 MS SQL 进行数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T22:08:05.920

如果您希望为每个 zip-supplier-year 元组创建远远少于`36^3`条目，您可能应该为最后一个字段选择一个随机值，然后检查它是否存在，如果存在则重复。

即使您创建了最大可能条目数的一半，新条目的预期值仍然只有一个失败。假设您的数据库是根据整体标识符编制索引的，那么付出的代价并不是太大。

也就是说，如果您希望使用除少数可能的标识符之外的所有标识符，那么您可能应该提前创建所有可能的记录。这听起来可能成本很高，但内存中存储未使用记录的每个空间最终都会存储一条真实记录。

我希望第一种情况更有可能，但如果不是，或者如果两者有其他组合，请添加更多信息的评论，我会修改我的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T22:08:23.070

我认为选项取决于将要使用的代码数量：

1.  如果您希望在一年内使用其中的大部分，那么最好预先生成。如果做得对，查找应该非常快。无论如何，您的数据库中每年将有 1.679.616 个项目，因此您必须正确地做这些事情。

    另一方面，您期望使用它们中的大多数是否很好？如果突然出现比预期更多的项目，它可能会让您没有代码。

2.  如果您希望只使用少量，那么随机+存在检查可能是一种方法，但是目前还不清楚最好的数量应该是多少（我很确定可以计算出来）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T22:30:35.773

如果它不必是随机的，您也许可以简单地选择一个固定但“不可预测”的加数，它与`26 + 10 == 36 == 2²·3²`. `2`这意味着，只需选择一个固定加数，该加数既不也可整除`3`。

然后在每次需要新的序列号时，继续将此固定编号添加到您之前的序列号中。这当然是模`46656`（或`1679616`）完成的。

数学保证您不会两次获得相同的数字（在没有更多“免费”数字之前）。

作为补充，您可以使用它，`const int addend = 26075`因为它是`5`modulo `6`。

# enterprise-library-5 - “Microsoft Enterprise Library 5.0 的可扩展性动手实验室”中的错误

> ID：14094959
> 
> 赞同：0
> 
> 时间：2012-12-30T21:44:08.077
> 
> 标签：enterprise-library-5, logging-application-block

我正在浏览 Microsoft Enterprise Library 5.0 的可扩展性动手实验室，并在“实验室 2：自定义日志记录跟踪侦听器”课程中发现了一个错误。它适用于实验室的练习 2,3 和 4。我在 CodePlex 网站上搜索了问题跟踪器，但找不到与此错误相关的任何内容。

问题概述：

尝试通过企业库配置工具添加跟踪侦听器时，我收到验证错误：“字段 ListenerDataTypeName 缺少必需的值”。因此配置工具不会保存配置文件。

寻找建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:34:53.373

自己找到了解决方案，请参阅以下博客文章以获取修复的完整描述：

[http://mvvmdevotee.wordpress.com/2012/12/30/fixing-an-error-in-extensibility-hands-on-labs-for-microsoft-enterprise-library-5-0/](http://mvvmdevotee.wordpress.com/2012/12/30/fixing-an-error-in-extensibility-hands-on-labs-for-microsoft-enterprise-library-5-0/)

# python - Python - 如何从类方法中获取类名 - 使用@classmethod

> ID：14094961
> 
> 赞同：27
> 
> 时间：2012-12-30T21:44:09.880
> 
> 标签：python, class-method

我有以下代码：

```
class ObjectOne(object):
    @classmethod
    def print_class_name(cls):
        print cls.__class__.__name__

    def print_class_name_again(self):
        print self.__class__.__name__

if __name__ == '__main__':
    obj_one = ObjectOne()
    obj_one.print_class_name()
    obj_one.print_class_name_again() 
```

输出是：

```
type
ObjectOne 
```

我希望输出为：

```
ObjectOne
ObjectOne 
```

但我想通过装饰器将其保留`test_cls`为类方法。`@classmethod`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-30T21:46:18.003

A classmethod receives the class as its argument. That's why you're calling it `cls`. Just do `cls.__name__`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-30T21:45:58.780

It's `cls.__name__`. `cls` already points to the class, and now you're getting the name of *its* class (which is always `type`).

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-12-28T14:28:13.033

我有一个类似的问题，想要获取日志记录的类名和函数/方法名。

```
__name__ :  gives the program name
__class__.__name__ gives the class name 
```

inspect.stack()[0][3] 给出模块名称。（你必须进口检查）。

干杯

# django - 如何将 Facebook 页面与 Django 模型链接？

> ID：14094965
> 
> 赞同：0
> 
> 时间：2012-12-30T21:44:40.730
> 
> 标签：django, django-models

将facebook链接存储为更好吗

```
facebook = models.URLField (with the complete url) 
```

或者

```
facebook = models.CharField (with only the page name facebook.com/page/[this]) 
```

还是完全不同的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:12:55.487

您必须使用`URLField`. 还要确保 a`URLField`是否用于 facebook url，那么您必须检查用户输入的是 facebook url 还是其他 url，例如 Google url（这也是一个有效的 url）

[您还可以使用URLValidator](https://docs.djangoproject.com/en/dev/ref/validators/#urlvalidator)编写自定义验证方法来进一步检查发布的链接是否处于活动状态

```
from django.core.validators import URLValidator

validate = URLValidator(verify_exists=True)
validate(facebook_url) 
```

# javascript - 使用 RequireJS 优化器进行部分优化

> ID：14094966
> 
> 赞同：2
> 
> 时间：2012-12-30T21:44:47.627
> 
> 标签：javascript, requirejs, amd, bower

我正在尝试使用 RequireJS 优化大量 javascript 文件，但我无法解决如何使用优化器正确构建脚本并以所需方式将它们加载到浏览器中。

虽然下面的描述相当具体，但我想很多其他人也遇到了同样的挑战。（或者他们在要求上做出了更明智的选择！）

我正在使用[bower](https://github.com/twitter/bower)下载脚本目录，并且我想将这些脚本（或其中的一部分）包含在我的网页中。

此外，在测试时，我基本上不想让浏览器检索单独的 Bower 脚本。本地测试框架串行响应请求，所以这很慢。我想使用 RequireJS 优化器或其他方法将所有下载的 bower 脚本合并到一个文件中。

相比之下，我自己的代码被分解成一长串 Coffeescript 文件，我想使用[RequireJS CS 插件](https://github.com/jrburke/require-cs)为浏览器编译它们。

在开发时，我希望我的浏览器加载如下内容：

*   `components.js`
*   `main.js`
    *   `csmain.coffee`
    *   `my_module.coffee`

`components.js`将由 Bower 目录中的以下文件组成，`components`例如

*   jquery: jquery/jquery
*   jqueryui：
    *   jquery-ui/ui/jquery.ui.core
    *   jquery-ui/ui/jquery.ui.datepicker
*   放大：
    *   放大/核心/amplify.core
    *   放大/请求/amplify.request
*   引导程序：
    *   引导程序/js/引导程序转换
    *   引导程序/js/引导程序警报
    *   引导/js/引导按钮
    *   引导程序/js/引导程序轮播
    *   bootstrap/js/bootstrap-collapse
*   lodash: lodash/lodash

在生产环境中，浏览器会加载一个文件，比如`all.js`.

所以我的问题是：如果我使用 RequireJS 进入浏览器`main.js`并构建脚本来实现部分和完全优化的构建。我在这个问题上花费了不成比例的时间，而且来自 RequireJS 的莫名其妙和神秘错误的数量非常长——以至于我无法识别出严重的禁止性问题。它似乎不是这项工作的工具，但我很乐意得到纠正。

我所拥有的优化脚本类似于以下内容（以 YAML 表示法）：

```
baseUrl: "../media/my-scripts/"
optimize: none
out: build/all.js
stubModules:
 - cs
 - coffee-script
paths:
  cs: "../../scripts/components/require-cs/cs"
  'coffee-script': "../../scripts/components/require-cs/coffee-script"
  usf: "./main"
  components: "../compiled/components"
name: usf
logLevel: 0
shim: # ... 
```

似乎我希望解决的问题相当简单，但解决方案却没有出现。RequireJS，虽然很出色，但比我需要的要复杂得多。[Almond.js](https://github.com/jrburke/almond)是加载模块的替代方案 - 但问题在于缺乏替代的合适优化器。

我将不胜感激有关可以使用哪些选项`r.js`来实现上述目标的任何想法，或者可能存在哪些合适的替代优化解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:40:06.273

~~没有找到答案，我写了[YAMDO](https://github.com/brianmhunt/yamdo)来解决这个问题~~ **编辑**我已经弃用了那个项目，并开始依赖于很棒的[Browserify](http://browserify.org/)项目。

# jquery - 当用户开始在 jQuery 中填写表单时启动计时器

> ID：14094968
> 
> 赞同：1
> 
> 时间：2012-12-30T21:44:53.320
> 
> 标签：jquery, forms, timer

我对 jQuery 很陌生，我想做一些我认为不应该那么复杂的事情：我想在用户开始填写表单时启动一个 60 秒的计时器。当定时器达到 0 时，它会触发其他功能。

到目前为止我得到了什么：

```
$('form').click(function(){
        $(function(){
          var count = 60;
          countdown = setInterval(function(){
            $("p#timer").html(count);
            if (count == 0) {
              $("p#sentence").html("Time's up! You lost.");
              $("form").addClass('lost');
              clearInterval(countdown);
            }
            count--;
          }, 1000);
        });
    }); 
```

这段代码有效并且完全符合我的要求。*唯一*的问题是，当用户单击表单的另一部分（例如，另一个输入）时，它会启动与第一个不同步的第二个计时器并覆盖它。基本上，每次用户单击表单时，都会启动另一个计时器，并且事情会变得很糟糕。

现在，看到这一点，这段代码就可以做到这一点似乎很合乎逻辑。然而，我只是不知道该怎么做才能防止它发生。

我试图给表单一个类并在用户单击后将其删除：

```
$('form.timer_idle').click(function(){
        $(this).removeClass('timer_idle');
        $(function(){
          var count = 60;
          countdown = setInterval(function(){
            $("p#timer").html(count);
            if (count == 0) {
              $("p#sentence").html("Time's up! You lost.");
              $("form").addClass('lost');
              clearInterval(countdown);
            }
            count--;
          }, 1000);
        });
    }); 
```

我希望它会起作用，但它没有。第一次单击后确实删除了 .timer_idle 类，但它并没有阻止脚本在之后运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:47:46.727

jQuery 具有[`one`](http://api.jquery.com/one/)仅为第一个事件注册处理程序的功能。

代替：

```
$('form').click(function(){ 
```

和：

```
$('form').one('click',function(){ 
```

这个函数和其他函数一样是文档，但似乎只有少数人知道它的存在。

**提示：**

当您向*id-selector*提供额外详细信息*“帮助”* jQuery 选择器引擎时，它会阻止 jQuery 使用本机函数：*`document.getElemenyById`*

 *```
$("p#sentence").html("Time's up! You lost."); 
```

最好是：

```
$("#sentence").html("Time's up! You lost."); 
```

[文档](http://api.jquery.com/id-selector/)：

> 对于 id 选择器，jQuery 使用 JavaScript 函数 document.getElementById()，效率极高。当另一个选择器附加到 id 选择器时，例如 h2#pageTitle，jQuery 在将元素识别为匹配之前执行额外的检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:49:48.977

尝试调用：

```
$('form.timer_idle').unbind('click'); 
```

这将删除之前绑定的点击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T22:01:08.263

这个问题可以简单地通过使用一个标志来解决

```
var started = false;

$('form').click(function(){
    if(started){
        return;
    }

    started = true;

    // start timer to count down
}); 
```

​</p>*

# ruby - 为什么在此 RSpec 脚本中未正确传递对象引用？

> ID：14094972
> 
> 赞同：0
> 
> 时间：2012-12-30T21:45:25.900
> 
> 标签：ruby, rspec

我不得不说我对 Ruby 和 RSpec 都是新手。无论如何，我完成了一个 RSpec 脚本，但在重构后它失败了。这是原始工作版本：

```
describe Site do
  browser = Watir::Browser.new :ie
  site    = Site.new(browser, "http://localhost:8080/site")

  it "can navigate to any page at the site" do
    site.pages_names.each do |page_name|
      site.goto(page_name)
      site.actual_page.name.should eq page_name
    end
  end
  browser.close
end 
```

这是修改后的版本 - 我想报告测试期间访问的所有页面：

```
describe Site do
  browser = Watir::Browser.new :ie
  site    = Site.new(browser, "http://localhost:8080/site")

  site.pages_names.each do |page_name|
    it "can navigate to #{page_name}" do
      site.goto(page_name)
      site.actual_page.name.should eq page_name
    end
  end
  browser.close
end 
```

后一种情况的问题是，在与“it”方法关联的代码块中，站点被评估为 nil。但是当我这样做时：

```
...
s = site
it "can navigate to #{page_name}" do
  s.goto(page_name)
  s.actual_page.name.should eq page_name
end
... 
```

nil 问题消失了，但测试失败，原因是“浏览器已关闭”显然我缺少一些非常基本的 Ruby 知识——因为浏览器引用在修改后的脚本中无法正常工作。我哪里做错了？应该应用什么重构来完成这项工作？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:52:01.690

我使用 Site 和 Watir 的假类复制了上面的代码。它工作得很好。那么我唯一的结论是问题必须出在上述任何一个类中。我注意到 Site 实例只需要访问您的第一个工作版本中的一个页面，但必须访问非工作版本中的多个页面。那里可能存在涉及实例内部发生突变的问题。

看看这是否有所作为：

```
describe Site do
    uri = "http://localhost:8080/site" 
    browser = Watir::Browser.new :ie 
    page_names = Site.new(browser, uri).page_names 

    before(:each) { @site = Site.new(browser, uri) }
    after(:all) { browser.close }

    pages_names.each do |page_name|
      it "can navigate to #{page_name}" do
        @site.goto(page_name)
        @site.actual_page.name.should eq page_name
      end
    end  
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:19:33.977

重要的是要了解 RSpec 和许多 ruby​​ 程序一样，有两个运行时阶段：

1.  在第一阶段，RSpec 加载您的每个规范文件，并执行每个`describe`和`context`块。在此阶段，您的代码的执行定义了您的示例、钩子等。但您的示例和钩子在此阶段不会执行。
2.  一旦 RSpec 完成加载规范文件（并且所有示例都已定义），它就会执行它们。

所以......将您的示例精简为更简单的形式，这就是您所拥有的：

```
describe Site do
  browser = Watir::Browser.new :ie

  it 'does something with the browser' do
    # do something with the browser
  end

  browser.close
end 
```

虽然在视觉上看起来浏览器实例已被实例化，然后在示例中使用，然后关闭，但实际情况如下：

1.  浏览器实例被实例化
2.  该示例已定义（但未运行）
3.  浏览器已关闭
4.  （稍后，在定义了所有示例之后...）示例运行

正如 O.Powell 的回答所示，您可以在`after(:all)`挂钩中关闭浏览器以延迟关闭，直到该示例组中的所有示例都运行后。也就是说，我会质疑您在示例定义时是否真的需要浏览器实例。通常，当示例在运行时需要它们时，而不是在示例定义阶段，您最好懒惰地创建资源（例如浏览器实例）。

# jquery - 将复选框状态保存到 cookie 而不单击

> ID：14094975
> 
> 赞同：1
> 
> 时间：2012-12-30T21:45:47.180
> 
> 标签：jquery, cookies, checkbox

我用它来存储我的复选框的状态

```
$("input.box").each(function() {
    var mycookie = $.cookie($(this).attr('name'));
    if (mycookie && mycookie == "true") {
        $(this).prop('checked', mycookie);
    }
});
$("input.box").change(function() {
    $.cookie($(this).attr("name"), $(this).prop('checked'), {
        path: '/',
        expires: 365
    });
}); 
```

我在一个新函数中使用它来检查我的一个复选框：

```
if(code18 == 092) {
    $(".validate-status").text("Correct!");
    $('#code18correct').show();
    $('input[name=code18box]').prop('checked', true);
} 
```

它可以工作，它会选中该框，但问题是，因为我没有单击它，它不会将其保存到 cookie 中。想不出如何解决这个问题。

有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:50:49.490

设置属性后只是[`trigger`](http://api.jquery.com/trigger/)复选框的处理程序：`change``checked`

```
$('input[name=code18box]').prop('checked', true).change();
// which is the same as
$('input[name=code18box]').prop('checked', true).trigger('change'); 
```

或者使用更好的性能版本[`.triggerHandler()`](http://api.jquery.com/triggerHandler/)：

```
$('input[name=code18box]').prop('checked', true).triggerHandler('change'); 
```

# image - 如何确定 Twitter 用户是否有默认的个人资料图片

> ID：14094980
> 
> 赞同：1
> 
> 时间：2012-12-30T21:46:08.643
> 
> 标签：image, twitter, profile

我知道您可以使用以下网址找到 Twitter 用户的个人资料图片：

[https://api.twitter.com/1/users/profile_image?screen_name=twitterapi&size=bigger](https://api.twitter.com/1/users/profile_image?screen_name=twitterapi&size=bigger)

但是如何判断是默认图片还是用户上传的图片呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:48:20.440

[https://dev.twitter.com/docs/user-profile-images-and-banners](https://dev.twitter.com/docs/user-profile-images-and-banners)

> 未上传个人资料图像的用户可以通过其用户对象的 default_profile_image 字段具有真值来识别。

# javascript - JQuery 点击绑定和 Facebook JS SDK 怪异

> ID：14094985
> 
> 赞同：0
> 
> 时间：2012-12-30T21:46:30.903
> 
> 标签：javascript, jquery, ajax, facebook, click

我有一个使用 FB javascript SDK 通过 ajax 加载图片的应用程序。一切正常，但是当用户点击图片并成功上传时，我想取消点击它，这样用户就无法再次上传。

该函数如下所示：

```
function postImage(fbimgurl, token, obj) {

obj.click(false); //I think this should turn off clicking but it does not 

$.ajax({

       //ajax code here. This works fine

} 
```

它最初是在页面加载时 Facebook 连接成功时绑定的：

```
FB.getLoginStatus(function (response) {

   if (response.status =='connected') {

var fbaccesstoken = response.authResponse.accessToken;

 $('.pic').each(function(){  
  var picurl = $(this).attr('fullurl'); 
  $(this).on('click', function() { postImage(picurl, fbaccesstoken, $(this)) }); 
});

} 
```

我怀疑在上传图像后再次调用“已连接”响应，因此它重新绑定了 postImage 函数。我对么？我试图将此函数绑定到脚本中其他地方的图片 div，但它似乎只有在我将它放在 Facebook 响应中时才有效，可能是因为访问令牌或其他一些我不明白的异步内容。当函数成功时，解除绑定这个对象的最好方法是什么，所以它不能被重新点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:00:34.197

您可以通过使用事件对象上的目标从单击处理程序函数内部解除绑定。

```
$('.pic').each(function(){  
  var picurl = $(this).attr('fullurl'); 
  $(this).on('click', function( event ) { 
      postImage(picurl, fbaccesstoken, $(this));
      $(event.target).unbind('click');  
  }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T01:00:24.430

我通过将 obj.off() 放入函数中解决了这个问题。由于某种原因，使用“点击”失败。诡异的。

# php - mysqli_stmt_prepare 从函数内返回 false

> ID：14094990
> 
> 赞同：2
> 
> 时间：2012-12-30T21:46:55.397
> 
> 标签：php, function, mysqli

我正在尽我最大的努力对我的登录脚本进行面向对象并检查我的网站。因此，我创建了一个名为“attempt_login”的函数。此函数通过包含的外部 php 文件提供的“mysqli_connect”函数使用数据库连接，并返回 $link 变量。

但是，当在我的“attempt_login”中达到“mysqli_stmt_prepare”功能时。它总是返回 false，因此 if 语句永远不会运行。

mysql_connect.php

```
require_once '../conf.php';

$link = mysqli_connect($mysql_server,$mysql_user,$mysql_pass,$mysql_db);

if(mysqli_connect_error())
{
    //Fail
    echo mysqli_connect_error();

}else{
//Success

}

return $link; 
```

来自“attempt_login”的代码失败：

```
 $link = require_once 'functions/mysql/mysql_connect.php';

print_r($link);

$stmt = mysqli_stmt_init($link);

    echo mysqli_stmt_error($stmt);
    echo mysqli_error();

     //This if statement always fails.
if(mysqli_stmt_prepare($stmt,"SELECT member_salt FROM members WHERE username=?" ) )
{

    mysqli_stmt_bind_param($stmt,'s',$login_details['username']);

    mysqli_stmt_execute($stmt);

    $member_salt = NULL;

    mysqli_stmt_bind_result($stmt,$member_salt);

    mysqli_stmt_close($stmt);

} 
```

调用函数非常简单。

```
attempt_login($login_details); 
```

我尝试了很多方法来做到这一点，但它似乎只在它不在函数内时才有效。这违背了我试图将其用于功能的目的。如果我将错误输出移到 if 语句之后，它将打印：

> 没有选择数据库

即使在链接中明确设置了一个。我也可以做一个 print_r($link); 它确实为 mysql 服务器打印了正确的数据。

它对于过程和面向对象的 mysqli 样式也有同样的问题，并且对于“mysqli_prepare”也失败了。

我确实有 mysql 在该站点上工作，但是在函数中运行任何内容的任何尝试都失败了。

我已经搜索了几个小时试图找到答案，但找不到任何东西。我期待着您的回音！提前谢谢了。

~特拉维斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:24:04.270

我会说你还没有选择数据库。

要么`$mysql_db`未设置，`../conf.php`要么存在拼写错误，要么`$mysql_db`在 中不可见`mysql_connect.php`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:53:39.353

您似乎没有传递`$stmt`给您的函数，我建议您在[scopes](http://php.net/manual/en/language.variables.scope.php)上阅读此内容。

# css - CSS过渡一个计数器？

> ID：14094992
> 
> 赞同：5
> 
> 时间：2012-12-30T21:47:05.867
> 
> 标签：css, css-transitions

我在页面上有一个进度条。目前，我的栏受 a 影响，`transition`因此当进度更改时，它会平滑地移动到新值。

该条还包含其进度，以百分比表示。

我面临的“问题”是显示的数字会在条形宽度转换时从一个值跳到另一个值，所以我想知道 CSS 是否有任何方法可以“转换”这个数字。

我能想到的唯一解决方案是使用

```
counter-reset: tmpcounter 50;
content: counter(tmpcounter);
transition: counter-reset 0.5s ease; 
```

当然，这是行不通的。即使这样做了，它也只适用于伪元素，所以当值发生变化时，我无法用 JavaScript 修改它。

我错过了什么，还是不值得担心这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T10:21:38.260

我不确定我是否理解跳跃数字的问题。但是这个[类似温度计的进度条](http://codepen.io/mishunov/pen/bdpCA)的例子会有帮助吗？

# android - Eclipse android 设备选择器不显示我的手机

> ID：14094998
> 
> 赞同：3
> 
> 时间：2012-12-30T21:47:48.533
> 
> 标签：android, eclipse, android-emulator, eclipse-plugin, device

我正在使用 Eclipse 的 android 插件，当我尝试使用 adb 运行我的程序但我的设备未列出时。我检查了usb调试模式。我清理缓存，但没有解决。

（使用 windows 8/我的手机 Htc one x (4.1.1) 和 samsung s3 (4.1.1)。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-10T12:55:49.953

我安装了[HTC Sync Manager](http://www.htc.com/www/software/htc-sync-manager/)然后它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:03:35.493

可能需要开启开发板USB调试

在您的手机上，转到设置-> 应用程序设置-> 开发-> 启用第一个选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T21:49:46.003

您是否为您的设备[下载](http://developer.android.com/tools/extras/oem-usb.html)了 USB 驱动程序？

[专](http://samsung.com/us/support/owners/product/SCH-I535MBBVZW)为三星 S III 设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T22:05:41.343

使用命令行，输入`adb devices`您的`SDK_FOLDER/platform-tools`文件夹。

如果检测到您的设备，则以管理员身份运行 eclipse。如果未检测到您的设备，请尝试更新驱动程序（在 中找到`SDK_FOLDER/extras/google/usb_driver`）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-29T11:41:28.643

如果您想在 HTC 等安卓设备上运行您的应用程序，那么首先您必须在此处下载并安装 HTC 同步管理器表格[HTC 同步管理器](http://www.htc.com/www/software/htc-sync-manager/)。之后按照下面的图片步骤。

![在此处输入图像描述](../Images/684522f8170696199ba0a805e3a277bf.png) ![在此处输入图像描述](../Images/2bd0ccfcc277b3f8743df601aac63e3e.png)