# StackOverflow 问答 13531000-13531999

# javascript - JSON字符串到Highcharts

> ID：13531000
> 
> 赞同：2
> 
> 时间：2012-11-23T14:24:00.183
> 
> 标签：javascript, jquery, ajax, highcharts

我正在处理来自返回 JSON 字符串的 Web 服务的 REST 响应。AJAX 的结果响应是我得到了很多信息，我使用 JQuery.parseJSON(result) 从每个 JSON 标记中获取值。

从这个结果响应中，我需要对其进行格式化，使其适合 Highchart。Highchart 需要将其格式化为：

```
series: [{
    name: 'Tokyo',
    data: [7.0, 6.9, 9.5, 14.5, 18.2],
    name: 'LA',
    data: [7.0, 6.9, 9.5, 14.5, 18.2]
}] 
```

对我来说，遍历结果数据并创建像 Highchart 想要的 JSON 字符串的最佳方式是什么？下面是解决这个问题的开始，但我无法完成。

```
success: function (result) {
    var resultobj = jQuery.parseJSON(result);
    for (i = 0; i < resultobj.length; i++) {
        var objt = resultobj[i];
        // what TODO?????
        highchartresultarray.push(objt.name);
    } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:09:34.747

我不熟悉Highcharts，但基于问题中的系列数组（我认为这是一个小错误，因为您已经展示了一个具有多个同名属性的对象 - 每个名称和数据属性都应该封装在它们自己的从外观上看各个对象）和您提供的示例数据，我制作了一个简单的函数，它应该会给您预期的结果 - 该函数的前提是创建一个空数组来保存您的对象，然后遍历原始数据将您需要的位从原始数据放入一个空对象中，并在每次迭代时将填充的对象放入容器数组中——我没有很好地解释事情！所以这是代码 -

```
function highchartdata(data) {

highchartarray = [];

$.each(data,function(i,v){

    var highchartobj = {};

    highchartobj.data = v.data.split(',');

    highchartobj.name = v.name;

    highchartarray.push(highchartobj);

});

return highchartarray; 
```

};

这是一个工作小提琴 - [http://jsfiddle.net/nuqJD/10/](http://jsfiddle.net/nuqJD/10/)

# iphone - 单击 MKAnnotationView 中的按钮

> ID：13531002
> 
> 赞同：2
> 
> 时间：2012-11-23T14:24:10.400
> 
> 标签：iphone, ios, delegates, mkmapview

我正在使用 MKMapView 开发应用程序

有一些注释，当您单击注释图像时，会显示详细信息

为此，我构建了我的自定义@interface 注释：NSObject 并添加了一个布尔值“bClicked”

现在我希望用户能够单击详细视图中的详细信息按钮，但我制作的代码不起作用：

```
#pragma mark - MKMapViewDelegate

 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    MKAnnotationView *annotationView = nil;

    int index = 0;

    BOOL bFound = FALSE;

    for (int i=0;i<[shopAnnotations count];i++)
    {
        if (annotation == [shopAnnotations objectAtIndex:i])
        {
            index = i;
            bFound = TRUE;
            break;
        }
    }

    if (bFound==FALSE)
    {
        //ADLog(@"bFound FALSE annotation %p",annotation);
        return annotationView; // <-- nil
    }

    Annotation *shopAnnotation = [shopAnnotations objectAtIndex:index];

    annotationView = [_mapView dequeueReusableAnnotationViewWithIdentifier:shopAnnotation.identifier];

    if (!annotationView)
        annotationView = [[[MKAnnotationView alloc] initWithAnnotation:shopAnnotation reuseIdentifier:shopAnnotation.identifier] autorelease];

    for (UIView*view in annotationView.subviews)
    {
        [view removeFromSuperview];
    }

    annotationView.image = shopAnnotation.Image;
    annotationView.alpha = 1.0f;
    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;

    annotationView.userInteractionEnabled = YES;

    if (shopAnnotation.bClicked==TRUE)
    {

        UIView *detailView = [[UIView alloc ] initWithFrame:CGRectMake(0, -50, 290, 56)];
        detailView.userInteractionEnabled = YES;
        detailView.superview = annotationView;
        [detailView release];

        UIImageView *bg = [[UIImageView alloc ] initWithImage:[UIImage imageNamed:@"bulle_carte.png"]];

        [bg setFrame:CGRectMake(0, 0, 290, 56)];
        bg.superview = detailView;

        [bg release];

        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

        [button setFrame:CGRectMake(250, 3, 35, 35)];

        [button setImage:[UIImage imageNamed:@"fleche_bleue_d.png"] forState:UIControlStateNormal];
        button.tag = [shopAnnotation.identifier intValue];
        [button addTarget:self action:@selector(btnDetailPressed:) forControlEvents:UIControlEventTouchUpInside];

        button.superview = detailView;

        button.userInteractionEnabled = YES;

        [annotationView setRightCalloutAccessoryView:detailView];

    }

return annotationView;
}

- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view    calloutAccessoryControlTapped:(UIControl *)control
{
NSLog(@"calloutAccessoryControlTapped");
}

-(void)btnDetailPressed:(id)sender
{
NSLog(@"btnDetailPressed");
} 
```

当我单击按钮或在 DetailView 内部时，不会调用/触发 btnDetailPressed 或 calloutAccessoryControlTapped。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T00:10:20.530

使用`MKMapViewDelegate`'s 方法`mapView:didSelectAnnotationView:`：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[YOUR_CUSTOM_CLASS class]]) {
        //customize it
    }
}

- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    if ([view isKindOfClass:[YOUR_CUSTOM_CLASS class]]) {
        //do something
    }
} 
```

[苹果的文档](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#jumpTo_10)

# jquery - 元素位置

> ID：13531003
> 
> 赞同：2
> 
> 时间：2012-11-23T14:24:16.233
> 
> 标签：jquery, html, css

我开始建立一个分类广告网站，但在此过程中遇到了一些问题。
在[这个](http://mediaheart.ro/new/index.html)网页上，这是我将用于该网站的模板，我在定位 2 个元素时遇到了一些问题，这些元素在除 .. IE 7 之外的所有浏览器上都出现在它们的位置之外：)

Firebug 什么也没告诉我，因为我尝试了几种技巧将它们移动到它们的位置，但没有成功。

可能是什么问题呢 ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:26:52.273

添加这个：

```
td {
    vertical-align: top;
} 
```

默认`vertical-align`值为`baseline`，这是您的问题的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:35:26.620

使你`<tbody>`的`vertical-align`等于`top`

# java - Java OutOfMemoryError 奇怪的行为

> ID：13531004
> 
> 赞同：55
> 
> 时间：2012-11-23T14:24:17.253
> 
> 标签：java, out-of-memory

假设我们有 256M 的最大内存，为什么这段代码可以工作：

```
public static void main(String... args) {
  for (int i = 0; i < 2; i++)
  {
      byte[] a1 = new byte[150000000];
  }
  byte[] a2 = new byte[150000000];
} 
```

但是这个抛出了一个OOME？

```
public static void main(String... args) {
  //for (int i = 0; i < 2; i++)
  {
      byte[] a1 = new byte[150000000];
  }
  byte[] a2 = new byte[150000000];
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-23T15:05:45.097

为了使事情保持正确，请考虑使用以下代码运行此代码`-Xmx64m`：

```
static long sum;
public static void main(String[] args) {
  System.out.println("Warming up...");
  for (int i = 0; i < 100_000; i++) test(1);
  System.out.println("Main call");
  test(5_500_000);
  System.out.println("Sum: " + sum);
}

static void test(int size) {
//  for (int i = 0; i < 1; i++)
  {
    long[] a2 = new long[size];
    sum += a2.length;
  }
  long[] a1 = new long[size];
  sum += a1.length;
} 
```

取决于你是做热身还是跳过它，它会吹还是不吹。这是因为 JITted 代码正确地`null`排除了 var，而解释代码则没有。在 Java 语言规范下，这两种行为都是可以接受的，这意味着您可以任由 JVM 摆布。

^(`Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode)`在 OS X 上 测试。)

## 字节码分析

查看带有`for`循环的字节码（简单代码，没有`sum`变量）：

```
static void test(int);
  Code:
   0: iconst_0
   1: istore_1
   2: goto  12
   5: iload_0
   6: newarray long
   8: astore_2
   9: iinc  1, 1
   12:  iload_1
   13:  iconst_1
   14:  if_icmplt 5
   17:  iload_0
   18:  newarray long
   20:  astore_1
   21:  return 
```

并且没有：

```
static void test(int);
  Code:
   0: iload_0
   1: newarray long
   3: astore_1
   4: iload_0
   5: newarray long
   7: astore_1
   8: return 
```

在这两种情况下都没有显式`null`退出，但请注意，在*no-for* example 中，实际上重用了相同的内存位置，与*example*相比。如果有的话，这将导致与观察到的行为相反的期望。

## 一个转折...

根据我们从字节码中学到的知识，尝试运行这个：

```
public static void main(String[] args) {
  {
    long[] a1 = new long[5_000_000];
  }
  long[] a2 = new long[0];
  long[] a3 = new long[5_000_000];
} 
```

**没有 OOME 抛出**。注释掉 的声明`a2`，它又回来了。我们**分配更多**，但**占用更少**？看字节码：

```
public static void main(java.lang.String[]);
  Code:
     0: ldc           #16                 // int 5000000
     2: istore_1      
     3: ldc           #16                 // int 5000000
     5: newarray       long
     7: astore_2      
     8: iconst_0      
     9: newarray       long
    11: astore_2      
    12: ldc           #16                 // int 5000000
    14: newarray       long
    16: astore_3      
    17: return 
```

用于 的位置 2`a1`被重新用于`a2`。OP 的代码也是如此，但现在我们用对无害的零长度数组的引用覆盖该位置，并使用另一个位置来存储对我们巨大数组的引用。

## 把它们加起来...

Java 语言规范没有指定*必须*收集任何垃圾对象，JVM 规范只说带有局部变量的“框架”在方法完成时作为一个整体被销毁。因此，我们目睹的所有行为都是书本上的。对象的*不可见*状态（在*keppil*链接的文档中提到）只是描述在某些实现和某些情况下发生的事情的一种方式，但绝不是任何类型的规范行为。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-23T14:50:04.057

这是因为 while`a1`不在括号之后的范围内，它处于一种称为*不可见*的状态，直到方法返回。

大多数现代 JVM 不会在变量`a1`离开`null`作用域后立即将其设置为事情。因此，`a1`在方法返回之前不能进行垃圾回收。

您可以通过添加行来检查这一点

```
a1 = null; 
```

在括号内，这使程序运行良好。

*隐形*一词和解释取自这篇旧论文：[`http://192.9.162.55/docs/books/performance/1st_edition/html/JPAppGC.fm.html`](http://tinyurl.com/byyh9pb).

# python - 将自定义字段添加到包含源记录的 django 查询集

> ID：13531007
> 
> 赞同：0
> 
> 时间：2012-11-23T14:24:34.973
> 
> 标签：python, django

是否可以在 django 中向查询集添加一个字段，该字段将执行以下操作：

```
 fitting_set_items_list = FittingSetItem.objects.exclude(fitting_pack = None).exclude(fitting_pack = '').order_by('usage_type')
    fitting_pack_list = FittingPack.objects.filter(fittingsetitem__in=fitting_set_items_list).add_field({'fitting_set_item': fittingsetitem}) 
```

这样我可以使用：

```
for fitting_pack_item in fitting_pack_item_list:
    fitting_set_item = fitting_pack_item.fitting_set_item 
```

它有我最初来自的 FittingSetItem。

总的想法是许多 FittingSetItems 可以指向一个 FittingPack，所以我希望能够知道我的 FittingPack 来自哪个 FittingSetItem，我看到的最简单的方法是在 FittingPack 上有反向 FK。这将允许我在可能模棱两可的 FK 关系上来回走动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:04:15.517

我认为这就是您所寻求的，如果`FittingSetItem.fitting_pack`是`ForeignKey`

```
fitting_packs = FittingPack.objects.filter(fittingsetitem__fitting_pack__isnull=False) 
```

它获取由套装项目链接的配件包。您可以添加`.distinct()`或替换`fittingsetitem`为`fitting_set_item`.

# matlab - 如何在 MATLAB 中找到数组中的最大值及其索引？

> ID：13531009
> 
> 赞同：42
> 
> 时间：2012-11-23T14:24:41.597
> 
> 标签：matlab, max, matrix-indexing

假设我有一个数组，`a = [2 5 4 7]`. 返回最大值及其索引的函数是什么？

例如，在我的情况下，该函数应返回 7 作为最大值和 4 作为索引。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-11-23T14:26:41.337

功能是`max`。要获得第一个最大值，您应该这样做

```
[val, idx] = max(a); 
```

`val`是最大值，`idx`是它的索引。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-03-31T15:53:13.547

对于矩阵，您可以使用：

```
[M,I] = max(A(:)) 
```

I 是包含最大元素的 A(:) 的索引。

现在，使用 ind2sub 函数提取 A 对应于最大元素的行和列索引。

```
[I_row, I_col] = ind2sub(size(A),I) 
```

来源：[https ://www.mathworks.com/help/matlab/ref/max.html](https://www.mathworks.com/help/matlab/ref/max.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-09-04T12:41:56.013

如果是二维数组（矩阵），您可以使用：

```
[val, idx] = max(A, [], 2); 
```

idx 部分将包含包含每行的最大元素的列号。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-07-05T14:53:31.387

**3D案例**

修改 Mohsen 对 3D 数组的回答：

```
[M,I] = max (A(:));
[ind1, ind2, ind3] = ind2sub(size(A),I) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-23T14:34:01.097

您可以使用 max() 来获取最大值。max 函数还可以返回向量中最大值的索引。为此，请将调用 max 的结果分配给一个二元素向量，而不仅仅是一个变量。

例如 z 是你的数组，

```
>> [x, y] = max(z)

x =

7

y =

4 
```

这里，7 是第 4 个位置（索引）的最大数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-21T11:27:28.467

这将返回矩阵中的最大值

```
max(M1(:)) 
```

这将返回该值的行和列

```
[x,y]=ind2sub(size(M1),max(M1(:))) 
```

对于最小值，只需将单词 max 与 min 交换即可。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-14T18:20:39.607

例如：

```
max_a = max(a)
a.index(max_a) 
```

# asp.net-mvc-3 - 如何在asp.net mvc 3的标题中显示公司

> ID：13531012
> 
> 赞同：0
> 
> 时间：2012-11-23T14:24:55.363
> 
> 标签：asp.net-mvc-3, linq, entity-framework, c#-4.0

我有这样的看法：

```
 model IEnumerable<MvcApplication4.Models.Order>

@{
    ViewBag.Title = "Index";
}

 <h2> 
```

**显示公司名称**

```
<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            Customer
        </th>
        <th>
            EmployeeID
        </th>
        <th>
            OrderDate
        </th>
     </tr>

@foreach (var item in Model)
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Customer.CompanyName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EmployeeID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.OrderDate)
        </td>
      </tr>
}

</table> 
```

我想在我用粗体标记的地方显示 CompanyName。目前它正在 foreach 循环中显示。但是，我希望与此视图相同的一个字段提取 CompanyName 并将其显示在我的标题之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:38:28.963

怎么放

```
@{
    if (Model.Any()) {
        Model.First().Customer.CompanyName
    }
} 
```

你的粗体字在哪里？

# javascript - 画布中线的宽度是否取决于它的大小

> ID：13531016
> 
> 赞同：0
> 
> 时间：2012-11-23T14:25:11.837
> 
> 标签：javascript, html, html5-canvas

我遇到了以下问题。在几张相同粗细的画布上画线后，显示的线条粗细相同（见打印屏幕）

画布的大小不一样。我想知道显示线条的粗细是否取决于画布的尺寸？以及是否可以在不确定其宽度的情况下在画布上绘制。

这是屏幕

![在此处输入图像描述](../Images/783c2dbfb976fa770c6d7101b430d739.png)

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:30:37.240

画布大小属性（宽度和高度）确定画布中的逻辑像素数。画布的 CSS 大小必须等于画布大小才能获得精确的 1 对 1 像素映射

# android - listview item onclick into pageview in next activity

> ID：13531019
> 
> 赞同：0
> 
> 时间：2012-11-23T14:25:18.140
> 
> 标签：android

我有一个包含项目苹果，香蕉，橙色的列表视图...在第二个屏幕活动中，当我点击苹果上的特定项目时，它导航到详细信息屏幕

这里的输出必须看起来像苹果..如果我滑动页面然后是香蕉，然后是 nextswipe orage

苹果-->香蕉-->橙子

但是我得到了像apple-->apple-->apple这样的输出。

```
 Intent detailIntent =new Intent(SecondScreen.this, Details.class);            

    startActivity(detailIntent);

    public class MyApplication extends Application {

        ArrayList<String> totalvalue  = new ArrayList<String>();

    }

    public class Details extends FragmentActivity{

        MyApplication app;
        ViewPager pager;
      MyFragmentPagerAdapter pagerAdapter;     
     public static int position ;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.detail);    
        app = ((MyApplication) getApplicationContext());
        pager = (ViewPager) findViewById(R.id.pager);

        FragmentManager fm = getSupportFragmentManager();      
        pagerAdapter = new MyFragmentPagerAdapter(fm,app.totalvalue);   
          pager.setAdapter(pagerAdapter);

      }

    public static class MyFragmentPagerAdapter extends FragmentPagerAdapter {

        private static  ArrayList<String> temperList;

        public MyFragmentPagerAdapter(FragmentManager fm, ArrayList<String> totalvalue ) {
             super(fm);
             this.temperList = totalvalue;
        }

        public Fragment getItem(int position) {

            return ThingFragment.newInstance((temperList.get(position)));
        }

        @Override
        public int getCount(){

        return temperList.size();

        }

         private static class ThingFragment extends Fragment {       
                private String name1;
             static ThingFragment newInstance(String string ) {

                    ThingFragment f = new ThingFragment();
                    Bundle args = new Bundle();

            args.putString("name",temperList.get(position) );
                    f.setArguments(args);

                    return f;
                }

                @Override
                public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    name1 = getArguments().getString("name");
                }

                @Override
                public View onCreateView(LayoutInflater inflater, ViewGroup container,                       Bundle savedInstanceState) {

                    View v = inflater.inflate(R.layout.myfragment_layout, container, false);
                    TextView t = (TextView)v.findViewById(R.id.prodcutt);
                    t.setText(""+ name1);
                    return v;
            }

        }

    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:42:20.967

`args.putString("name",temperList.get(position) );`在你的内部不应该是可能的`ThingFragment`，因为它是静态的。

那应该是`args.putString("name",string);`

此外`temperList`，您的适配器不应该是静态的（没有理由，您将它作为参数传递）只是让它`final`-`private final ArrayList<String> temperList;`

如果这不能解决问题，请发布更多结构化的分隔代码，以便我们可以了解您的应用程序是如何构建的。适配器看起来不错，因此您可能会在某个时候写入/覆盖数组。

# java - 连接到 MySQL Web 数据库并使用 Pictures Android 列出结果

> ID：13531021
> 
> 赞同：0
> 
> 时间：2012-11-23T14:25:21.633
> 
> 标签：java, php, android, mysql, while-loop

这是一个关于 Android 功能的快速问题。

我想在android上开发一个应用程序，这样做时我打算购买一个android设备。

我知道有一些方法和教程可以连接到 MySQL 数据库。我想要做的是通过应用程序（安全地）连接到数据库，运行 MySQL 查询（PHP 文件），然后获取结果。这一切都是可能的，但是当它返回时，是否就像执行 while/for 循环然后生成结果并放入一些其他数据一样简单？例如图片等？

我只是想它可能更复杂。

例如，我有 MONSTERS 表：

```
id    name    colour     picture
1     bob     red        bobsred.png
2     greg    green      gregsgreen.png 
```

...例子...

我希望结果是这样的：

```
BOB   (picture)
GREG  (picture) 
```

每个都是按钮，然后转到不同的页面/表单或类似的东西。

让我重申一下，我不是在寻找代码，而是寻找一些 Android 开发人员来确认它的可能性！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:30:17.333

是的，这完全有可能。可能有很多方法可以做到这一点。将有丰富的代码示例供您使用谷歌搜索。

通过 GET 将您的值传递给 PHP。以 JSON 或 XML 或任何让您开心的方式返回。循环并构建您的显示表。

# mouseevent - openCVsharp中的鼠标单击事件

> ID：13531033
> 
> 赞同：4
> 
> 时间：2012-11-23T14:25:58.487
> 
> 标签：mouseevent, opencvsharp

我正在尝试使用 openCVsharp 方法在 c# 中获取鼠标位置并打开窗口。

首先我定义一个回调函数：

```
public void mc(MouseEvent me, int x, int y, MouseEvent me2) {} 
```

然后在启动阶段，我打开窗口并为其分配回调函数：

```
CvMouseCallback mo = new CvMouseCallback(mc);
Cv.NamedWindow("capture");
Cv.SetMouseCallback("capture", mo); 
```

但是在打开的窗口中单击鼠标不会调用回调。

我试图用谷歌搜索它，但没有找到 opencvsharp 的示例代码或说明。而且由于在openCV中它只是一个常规的回调方法——不需要那个CVmousecallback——我不知道如何在openCVsharp上执行这个。

有人在 openCVsharp 中做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-29T15:11:08.913

这对我有用：

```
Mat img = ...;
Window foo = new Window("bar", img); // class OpenCvSharp.CPlusPlus.Window
foo.OnMouseCallback += new CvMouseCallback(mc); 
```

我也第一次尝试了 SetMouseCallback 方法，但它也对我不起作用。

# ios - Xcode：“由于缺少入口点，场景无法访问”但找不到

> ID：13531035
> 
> 赞同：89
> 
> 时间：2012-11-23T14:26:02.450
> 
> 标签：ios, xcode, storyboard, warnings

Xcode 4.5.2 给了我以下警告：

```
Unsupported Configuration    
Scene is unreachable due to lack of entry points and does not have an identifier 
for runtime access via -instantiateViewControllerWithIdentifier:. 
```

不幸的是，我无法确定犯罪现场。在问题导航器中选择警告不会突出显示情节提要中的任何内容。我有一个相当复杂的故事板（30 多个场景）。

有什么建议么？

![警告截图](../Images/f64cae426f2b5f76c1f79eb46a87a94d.png)

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-11-23T19:50:56.620

在情节提要中，选择每个视图控制器（下图中的红色箭头）并查看情节提要 ID 字段（红色椭圆形）。所有 Storyboard ID 字段都不应为空。当你找到一个，那就是罪魁祸首。

![在此处输入图像描述](../Images/402684590648be10689730363f627928.png)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2014-04-25T16:44:10.257

虽然这个线程很旧，但我没有看到描述什么对我有用的答案，所以这里......

我遇到了这个错误，对故事板的视觉检查显示所有视图控制器似乎都连接到根视图控制器。

我尝试在故事板中命名所有 17 个视图控制器（如@bobnoble 的回答）。我使用了基于视图控制器的长名称的命名约定，例如“jvc”代表“Jobs View Controller”。当我尝试构建时，我收到一条错误消息，指出其中一个视图控制器具有重复的名称。跟踪事情，我发现我有一个视图控制器的实际*副本*，正好堆叠在它的孪生之上。我怀疑这是我没有完全退出的用户界面实验造成的剪切和粘贴损坏。

无论如何，删除未连接的双胞胎解决了我的问题。之后，我删除了所有 VC 名称，因为它们没有在代码中引用。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-12-05T22:05:13.340

我只是在一个简单的单场景故事板中遇到了这个确切的错误，我所要做的就是检查故事板中第一个视图控制器的“是初始视图控制器”复选框。我怀疑 Xcode 在这种情况下默认会为您选中此框，但现在不再这样做了。

![选中底部的框](../Images/67c602098cc150e0591868cbd5a81060.png)

选中您的故事板中恰好一个视图控制器的框，您应该会很好。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-11-23T20:05:21.853

恐怕您必须检查所有 30 个，并检查它们是否具有 Storyboard ID 或该视图控制器的 segue。两者之一是必需的，两者也是一个选项。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-06-24T08:59:07.160

此问题可能发生在以下情况之一：

**案例一：** 如果情节提要中没有一个场景被标记为**"isInitialViewController"**。

修复：识别根视图控制器并在您的 SB 中将其标记为**“isInitialViewController”**。在这种情况下，故事板 ID 不是强制性的。

**案例二**

在某些情况下，您不需要在情节提要中有 initialViewController。例如：使用多个故事板时。

修复：在这种情况下，请确保正确给出**“故事板 id”**，并使用此 id 引用故事板中使用的第一个场景。例如：

```
UIStoryboard *myStoryBoard = [UIStoryboard storyboardWithName:@"MyStoryBoardName" bundle:nil];
MyViewController *myViewController = (MyViewController *)[myStoryBoard instantiateViewControllerWithIdentifier:@"MyViewControllerId"]; 
```

在这种情况下，**“storyboard id”**是强制性的。

**案例三**

你已经连接了你的 initialViewController。但是您仍然会收到此警告。这是因为情节提要中的某些场景可能没有与**“segue”**相关联，而且它们也没有**“情节提要 id”**。扫描你的故事板，看看是否需要**“segue”**。如果缺少，请连接segue。如果不需要 segue，请确保您需要提供**“故事板 ID”**，因为这是从代码中引用场景的唯一方法，如上面的示例代码所示。

希望这可以帮助

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-05-12T06:59:33.267

**您不需要`Storyboard ID`为所有场景或`UINavigationController`**

好吧，我有大约 50-60 个场景，我刚刚收到这些警告，所以我意识到只有未与 segue 连接的控制器（场景）或 NavigationController 需要设置`Storyboard ID`。

[![在此处输入图像描述](../Images/e93f16f51feabc4963120429fe8e466e.png)](https://i.stack.imgur.com/5YYSQ.png)

您可以看到上图中`UINavigationController`与 segue 无关，这是该警告的罪魁祸首。

只需给它一个 Storyboard ID 即可删除此警告。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-11-26T04:32:49.610

我遇到过同样的问题。我的故事板上有很多视图，带有导航和标签栏控制器。对我来说，这只是一个警告，让您知道某些视图没有关联。 **确保您的所有视图都以某种方式连接到根视图控制器**。我从头开始这个项目以消除此警告，并在未连接视图时注意到相同的警告。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-12-23T08:05:41.413

找到犯罪现场的最简单方法：

**转到问题导航器（在左侧面板中，靠近搜索按钮），然后双击错误。将弹出一个窗口，其中包含位于窗口中间的违规场景。**

（这实际上通常是正确的——双击任何错误通常会导致一个包含错误居中的弹出窗口——一个巧妙的小技巧！）

旁注：有时，对于作为导航控制器（即初始视图控制器）的根视图控制器的场景，XCode 会错误地给出此错误。简单的修复是给这个根视图控制器一个 Storyboard ID，编译（错误应该消失），然后删除 storyboardID（不再有错误）。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-02-18T17:52:22.470

查看导致此问题的控制器或场景的最简单方法是：

*   `.storyboard`在 Project Navigator 中按住 Ctrl 并单击您的并选择`Open As > Source Code`. 这将调出 Storyboard 的底层 XML。
*   在此视图中，警告将明确与 XML 中与违规场景相关的行相关。

现在，就我而言，警告特别烦人，因为“违规场景”有一个标识符和一个segue！我能够通过删除场景然后撤消删除来解决问题。不优雅，但工作。在执行此操作之前，我保存了我的故事板。回想起来，我应该制作一个副本并`diff`写下前后对比。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-11-26T19:29:01.170

对我来说，这不是因为 a`Storyboard ID`或 a `Segue`。我收到此警告是因为我没有设置`View Controller's Custom Class`.

`View Controller`在上选择`Storyboard`，然后在 中`Utilities Pane`，选择`Identity Inspector`图标。在 下`Custom Class`，查看`Class`字段内的值。

如果它只是说`UIViewController`，那么你需要输入类名。这将是构成您的自定义子类的文件`.h`的名称。`.m``UIViewController`

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-04-16T16:32:47.600

我今天来到了这个问题。我正在使用 Xcode 6.3，OP 问题的答案现在非常简单：

选择您希望成为第一个的 View Controller，显示 Attributes Inspector，然后在 View Controller 部分下，确保

是初始视图控制器

被检查。瞧！

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-07-31T21:22:45.697

使用 Xcode 7，这可以轻松处理。无需手动遍历所有场景即可找到有问题的场景。首先转到**Report navigator**，您可以在其中获取有关已知问题的更多详细信息。问题描述可能如下所示：

Base.lproj/Main.storyboard：**fPh-fe-F5F**：警告：由于缺少入口点，场景无法访问，并且没有通过 -instantiateViewControllerWithIdentifier 进行运行时访问的标识符：。

使用此信息，您可以复制对象 ID，在本例中为**fPh-fe-F5F**，并在工作区搜索此字符串的出现。字符串将在 Main.storyboard 文件中找到。双击搜索结果，将打开 Main.storyboard 并选择场景。一旦您知道有问题的场景，您可以通过设置故事板 ID 或设置“是初始视图控制器”轻松解决问题

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-11-23T14:39:26.377

您可以只设置一个标识符。在右窗格的属性检查器中，您会找到一个名为“标识符”的字段。只要把任何字符串放在那里，这应该可以

您可以单击导航控制器并在属性检查器下单击按钮“是初始视图控制器”，这也应该可以工作。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-03-23T18:03:27.107

我遇到了同样的问题，并通过在情节提要 ID 上添加所有 viewController 和 NavigationController 的任何标识符来解决；错误将立即删除

请享用！！！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-04-09T15:40:33.790

也许这个 XQuery 会帮助你找到那些讨厌的场景

```
for $i in .//scene/objects/*[1][not(@storyboardIdentifier) or @storyboardIdentifier= '']/@id      (: find every scene that has an empty storyboardIdentifier :)
where count(.//segue[@destination= $i])= 0 and $i!= ./document/@initialViewController             (: filter the results to the scenes that are not destinations of a segue and exclude the initialViewController :) 
return ($i, $i/../@customClass)                                                                   (: return the storyboard-id and the customClass, if any :) 
```

如果您安装了 xqilla，您可以将查询保存到一个文件并像使用它一样使用它

```
xqilla <xqueryfile> -i <path to your storyboard> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-04-04T10:05:26.417

我不知道这是否还没有被提及，但是您可能会收到此警告的另一个原因是您是否有一个错误的方向。例如，在我的项目中，我收到了这个警告，但实际上我的所有控制器都已连接。然而，其中一个有一个转场，基本上是试图从孩子那里呈现父母，而不是父母呈现孩子。这引起了同样的警告。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-04-16T12:02:07.133

当我在 Storyboard 中有一个未设置任何内容的 UIViewController 时，我收到了此警告。我通过设置 Storyboard ID 来避免这个警告。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-06-01T14:56:50.263

我有同样的问题，但我意识到我正在使用容器视图，而不是删除默认视图控制器，我删除了它的 segue。所以视图控制器保留在情节提要中，警告也是如此。因此，如果在您不需要容器视图的默认视图控制器时未正确删除它，则会弹出警告，这是其中一种情况。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-06-18T22:19:35.227

我尝试了上述所有方法均无济于事。我在 IB 中正确连接了所有内容，其中一个`UIViewController`指定了根视图控制器。我没有标识符，但将它们添加到我的所有控制器中。

我可以让警告消失的唯一方法是执行上述所有操作（包括重新启动计算机和干净构建）*，然后*切换到我在 git 中的项目的无错误分支并再次返回。

不确定哪个操作修复了它，或者哪个操作组合，但它本身并不是干净的构建。这可能是 Main.storyboard 的副产品，它总是在打开时发生变化，这意味着我必须`git commit -m "Stupid storyboard"`比我想要的更频繁。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-08-03T17:31:03.163

这对我有用：

1.  在文本编辑器中打开故事板。
2.  将版本从 3.0 更改为 2.0 保存并关闭它。
3.  在 Visual Studio 中再次打开它。它将自动转换并打开文档。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-08-27T06:02:11.273

我得到了同样的错误：对我来说，错误是我没有在我的故事板中启动视图控制器。

修复它删除了该警告。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-03-03T10:43:04.043

简单地给所有 MVC 一个故事板 id 对我有用。

# c# - 使用单点触控的像素完美图像

> ID：13531036
> 
> 赞同：4
> 
> 时间：2012-11-23T14:26:09.570
> 
> 标签：c#, ios, xamarin.ios

背景：

我需要对如何使用 MonoTouch 在 iOS 设备上呈现像素完美的图像有一个基本的了解。目前我对 iOS 生态系统的了解有限，过去 18 年来一直是 windows 平台的开发人员。据我了解，无论是视网膜显示器还是旧的“iPhone 3g”显示器，都有一个通用的坐标系可以呈现相同的视图。

问题是：

使用 MonoTouch 生成和显示图像而不会出现模糊或失真的最佳方法是什么？

// AnkMannen

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T19:51:22.110

您需要了解的第一件事是 iOS 的视网膜显示系统。

所有控件都以坐标布局，就好像它们是 3GS/iPad 2 或更早版本一样。配备视网膜显示屏的设备（例如 iPhone 4、5 和 iPad 3）都使用这些相同的坐标，但屏幕尺寸是原来的两倍。

对于您的图像，请使用 PNG。您将拥有 2 套，一套用于较小的显示器，一套用于视网膜显示器。Apple 使用文件命名约定：

*   `yourImage.png`- 更小的 3GS 图像
*   `yourImage@2x.png`- 更大的视网膜显示图像

让我们假设图像是 150 像素 x 50 像素的较小尺寸。要从 C# 正确显示它：

```
//This code is in the ViewDidLoad method of a UIViewController
var imageView = new UIImageView(new RectangleF(0, 0, 150, 50));
imageView.Image = UIImage.FromFile ("yourImage.png");
View.AddSubView(imageView); 
```

iOS 将加载适当大小的图像（按照命名约定）并将其放置在屏幕的左上角。保持正确的尺寸`imageView`也可以防止任何失真。在 Retina 显示器上，iOS 将加载较大的 300x100 图像，并且并排看起来与较小尺寸的屏幕相同（除了更清晰）。

# nsis - Nsis 安装程序图标图像丢失

> ID：13531038
> 
> 赞同：0
> 
> 时间：2012-11-23T14:26:23.460
> 
> 标签：nsis

我在 NSIS 中做了一个安装程序。当我在 Windows 7 上安装它时，一切都很完美。

当我在 Windows XP 上执行相同操作时，安装程​​序的图标不见了。此外，当安装程序完成时，快捷方式图标图像也会丢失。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:42:15.113

如果我没记错的话，XP 的最大图标大小是 32x32。

如果您使用的是为 Win7 制作的大于 32x32 且不包括替代尺寸（32x32、16x16）的图标，则该图标可能无法在 XP 上正确显示。

# java - PhoneGap 2.2.0 Android SplashScreen - 抛出错误“无法解决飞溅或不是字段”

> ID：13531039
> 
> 赞同：1
> 
> 时间：2012-11-23T14:26:23.923
> 
> 标签：java, android, cordova, splash-screen

我是 Java 和 Android 开发的新手。我想在我的 PhoneGap 2.2.0 Android 应用程序中显示启动画面，但是当我添加

```
 super.setIntegerProperty("splashscreen", R.drawable.splash); 
```

到我的主类（扩展 DroidGap） Eclipse 抛出错误“无法解决飞溅或不是字段”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T14:39:40.563

`R``res`是 Android SDK 在使用文件夹中的资源编译应用程序时创建的类。确保启动图像文件存在于`/res/drawable/splash.png`（或所需的等效文件夹）中。

注意：图片名称必须全部小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:40:07.330

R.drawable.splash 指 res/drawable 中名为 splash.png 的文件（或分辨率特定的可绘制文件夹）

创建该文件，它将正确编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T18:41:30.043

我正在使用 Phonegap 版本 3，但仍然遇到同样的问题。

从 greg84 开始，我觉得非常重要的是要注意它实际上是在寻找一个名为的文件`splash.png`或在以下位置定义的任何文件：

```
R.drawable.splash 
```

所以如果这是

```
R.drawable.jamie 
```

你需要包括在`*\app\platforms\android\res\drawable\jamie.png`

希望这能消除我刚刚遇到的 1 个半小时的困惑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T07:04:29.490

问题是下面代码中的“R”类包。

```
super.setIntegerProperty("splashscreen", R.drawable.splash); 
```

当你在 R 上按 ctrl+space 时，它​​会显示 import android.R 但你必须导入 MainActivity.java(assume) 所在的同一个包。此外，默认情况下没有启动变量，你可以创建一个新的并你也可以使用名为'ic_launcher'的预定义变量。然后你的代码行将是->

```
super.setIntegerProperty("splashscreen", R.drawable.ic_launcher); 
```

希望问题能得到解决..干杯

# ios - iOS“完成”按钮关闭模式或完成编辑？

> ID：13531047
> 
> 赞同：0
> 
> 时间：2012-11-23T14:26:58.177
> 
> 标签：ios, edit, dismiss

在 iOS 中，我有一些模态场景可以通过工具栏中的“完成”按钮关闭。

但是其中一个模态场景包括一个可编辑的 UITableView。所以我还有一个标准的编辑按钮（在导航栏中）。在编辑时，该按钮被重命名为“完成”（并以蓝色突出显示）。

现在有两个标记为“完成”的按钮可以做两件非常不同的事情。我可以将解雇者重命名为“取消”，但这似乎是一种非标准用法。它会与其他场景（不涉及编辑）不一致，后者通过“完成”按钮关闭。

有人机界面推荐吗？什么是“最干净”的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:31:11.930

最简单的解决方案是在编辑时不显示您的“完成”（关闭）按钮，因此它看起来像这样：

不编辑：....[Edit][Done] <- (Done-dismiss)

编辑：........[完成] <-（完成编辑）

您可以做的另一件事是在左侧设置“完成”（编辑）按钮（以及隐藏“完成”（关闭）按钮），以便用户注意到它是不同类型的“完成”

注意：从用户体验的角度来看，在同一视图上同时显示两个看起来相同的“完成”按钮是非常错误的，即使它们位于不同的位置

# java - 编译项目中包含哪些 Maven 依赖范围？

> ID：13531050
> 
> 赞同：3
> 
> 时间：2012-11-23T14:27:06.017
> 
> 标签：java, eclipse, maven, dependencies, m2e

例如，如果我将 BukkitApi jar 设置为依赖范围设置为提供、编译、系统、运行时或测试的 maven 项目的依赖项

bukkitAPI 将在哪些范围内包含在编译输出中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T14:55:41.233

短版：默认情况下，maven 输出（在默认`target`目录中）除了当前项目/模块的编译代码之外不包含任何内容。也就是说，没有任何依赖关系。

Long(er) 版本：具有默认`jar`包装且没有自定义阶段配置。这是 maven 在 java 项目中的行为方式：

1.  `compile`阶段：目录`.java`中的文件`src/main/java/`被编译为`.classes`目录中的`target`文件。范围的依赖项`compile`被下载到您的本地存储库。
2.  阶段：与`package`1 相同，另外您将在目录中获得一个`jar`文件`target`
3.  `install`阶段：与 2 相同，您将在本地存储库中获得一个文件`jar`。

因此，`.jar`默认情况下，依赖项中的文件不包含在任何内容中！

### 那么，如何在“输出”中包含依赖项，这些范围是什么意思？

现在，例如，使用`assembly`插件在`package`阶段的输出中包含依赖项（请参阅[使用 Maven 在 jar 中包含依赖](https://stackoverflow.com/questions/1729054/including-dependencies-in-a-jar-with-maven)项），您通常会得到以下默认行为：

*   `provided`： 不包含
*   `compile`（默认）：包括
*   `system`： 不包含
*   `runtime`： 包括
*   `test`： 不包含

查看[此链接](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)以供参考。

**编辑：**只需尝试使用不同范围值 on 的这个 pom `guice`，您就会看到依赖项包含在`fake-1.0-SNAPSHOT-jar-with-dependencies.jar`when 范围为`compile`and`runtime`中（此示例不需要任何源文件）

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.linagora</groupId>
    <artifactId>fake</artifactId>
    <version>1.0-SNAPSHOT</version>
    <name>fake</name>
    <dependencies>
        <dependency>
            <groupId>com.google.inject</groupId>
            <artifactId>guice</artifactId>
            <version>2.0</version>
            <scope>compile</scope>
            <!-- system scope needs 'systemPath' attribute as well
                <systemPath>/path/to/guice/guice-3.0.jar</systemPath>
                <scope>system</scope>
            -->
            <!-- <scope>runtime</scope> -->
            <!-- <scope>test</scope> -->
            <!-- <scope>provided</scope> -->

        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T14:40:33.633

这不是 Maven 的工作方式。依赖项只是指定类路径（用于编译、运行时、测试）。但默认情况下，依赖项不包含在输出中。您将必须发送所有依赖项 jar（至少是具有范围编译和运行时的那些）。

看看依赖插件。它提供了复制依赖项的目标。

要创建要装运的捆绑包，请查看组装插件（例如，创建 zip 文件）。它甚至提供了一种创建一体式罐子的方法，如果这是您所追求的。

# entity-framework - EntityFramework 模型一、外键合成主键

> ID：13531052
> 
> 赞同：0
> 
> 时间：2012-11-23T14:27:12.867
> 
> 标签：entity-framework, entity-framework-5, ef-model-first

我有一个 Entity Framework 5 Model First 项目，包含以下表格：

```
Extension
  Id : Int32, PK
  Number: String

User
  Id: Int32, PK
  Name: String

UserExtensionMap
  UserId : Int32 (FK -> User.Id), PK
  ExtensionId : Int32 (FK -> Extension.Id), PK 
```

将上述表和关联设置为 UserExtensionMap 时，我收到 UserId 和 ExtensionId 未映射的错误。

所以我右键单击 UserExtensionMap 表并选择表映射并得到以下屏幕 ![映射](../Images/08d9a9be87a9e137b968e0f74c671db2.png)

我可以设置地图`Users.Id to UserExtensionUser.Id`，`Extensions.Id to UserExtension.ExtensionId`但没有任何东西可以将 Extensions.Number 和 User.Username 映射到 - 我很困惑！

尝试编译时出现错误：

`Error 3024: Problem in mapping fragments starting at line 119:Must specify mapping for all key properties (UserExtensionMaps.ExtensionId, UserExtensionMaps.UserId) of the EntitySet UserExtensionMaps.`

当我为 UserExtensionMap 删除上述这些地图时，我收到错误消息：

`Error 3027: No mapping specified for the following EntitySet/AssociationSet - UserExtensionMaps.`

我的模型 XML 文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="3.0" xmlns:edmx="http://schemas.microsoft.com/ado/2009/11/edmx">
  <!-- EF Runtime content -->
  <edmx:Runtime>
    <!-- SSDL content -->
    <edmx:StorageModels>
    <Schema Namespace="Server.Store" Alias="Self" Provider="System.Data.SqlServerCe.4.0" ProviderManifestToken="4.0" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/11/edm/ssdl">
  <EntityContainer Name="ServerStoreContainer">
    <EntitySet Name="Users" EntityType="Server.Store.Users" store:Type="Tables" Schema="dbo" />
    <EntitySet Name="Extensions" EntityType="Server.Store.Extensions" store:Type="Tables" Schema="dbo" />
  </EntityContainer>
  <EntityType Name="Users">
    <Key>
      <PropertyRef Name="Id" />
    </Key>
    <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="Username" Type="nvarchar" Nullable="false" />
  </EntityType>
  <EntityType Name="Extensions">
    <Key>
      <PropertyRef Name="Id" />
    </Key>
    <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="Number" Type="nvarchar" Nullable="false" />
  </EntityType>
</Schema></edmx:StorageModels>
    <!-- CSDL content -->
    <edmx:ConceptualModels>
      <Schema Namespace="Server" Alias="Self" p1:UseStrongSpatialTypes="false" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns:p1="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns="http://schemas.microsoft.com/ado/2009/11/edm">
        <EntityContainer Name="ServerEntities" p1:LazyLoadingEnabled="true" >
          <EntitySet Name="Users" EntityType="Server.User" />
          <EntitySet Name="Extensions" EntityType="Server.Extension" />
          <EntitySet Name="UserExtensionMaps" EntityType="Server.UserExtensionMap" />
          <AssociationSet Name="ExtensionUserExtensionMap" Association="Server.ExtensionUserExtensionMap">
            <End Role="Extension" EntitySet="Extensions" />
            <End Role="UserExtensionMap" EntitySet="UserExtensionMaps" />
          </AssociationSet>
          <AssociationSet Name="UserUserExtensionMap" Association="Server.UserUserExtensionMap">
            <End Role="User" EntitySet="Users" />
            <End Role="UserExtensionMap" EntitySet="UserExtensionMaps" />
          </AssociationSet>
        </EntityContainer>
        <EntityType Name="User">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Type="Int32" Name="Id" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Type="String" Name="Username" Nullable="false" />
          <NavigationProperty Name="UserExtensionMaps" Relationship="Server.UserUserExtensionMap" FromRole="User" ToRole="UserExtensionMap" />
        </EntityType>
        <EntityType Name="Extension">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Type="Int32" Name="Id" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Type="String" Name="Number" Nullable="false" />
          <NavigationProperty Name="UserExtensionMaps" Relationship="Server.ExtensionUserExtensionMap" FromRole="Extension" ToRole="UserExtensionMap" />
        </EntityType>
        <EntityType Name="UserExtensionMap" >
          <Key>
            <PropertyRef Name="ExtensionId" />
            <PropertyRef Name="UserId" />
          </Key>
          <NavigationProperty Name="Extension" Relationship="Server.ExtensionUserExtensionMap" FromRole="UserExtensionMap" ToRole="Extension" />
          <Property Type="Int32" Name="ExtensionId" Nullable="false" />
          <NavigationProperty Name="User" Relationship="Server.UserUserExtensionMap" FromRole="UserExtensionMap" ToRole="User" />
          <Property Type="Int32" Name="UserId" Nullable="false" />
        </EntityType>
        <Association Name="ExtensionUserExtensionMap">
          <End Type="Server.Extension" Role="Extension" Multiplicity="1" />
          <End Type="Server.UserExtensionMap" Role="UserExtensionMap" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Extension">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserExtensionMap">
              <PropertyRef Name="ExtensionId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="UserUserExtensionMap">
          <End Type="Server.User" Role="User" Multiplicity="1" />
          <End Type="Server.UserExtensionMap" Role="UserExtensionMap" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserExtensionMap">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
      </Schema>
    </edmx:ConceptualModels>
    <!-- C-S mapping content -->
    <edmx:Mappings>
    <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2009/11/mapping/cs">
  <EntityContainerMapping StorageEntityContainer="ServerStoreContainer" CdmEntityContainer="ServerEntities">
    <EntitySetMapping Name="Users">
      <EntityTypeMapping TypeName="IsTypeOf(Server.User)">
        <MappingFragment StoreEntitySet="Users">
          <ScalarProperty Name="Id" ColumnName="Id" />
          <ScalarProperty Name="Username" ColumnName="Username" />
        </MappingFragment>
      </EntityTypeMapping>
    </EntitySetMapping>
    <EntitySetMapping Name="Extensions">
      <EntityTypeMapping TypeName="IsTypeOf(Server.Extension)">
        <MappingFragment StoreEntitySet="Extensions">
          <ScalarProperty Name="Id" ColumnName="Id" />
          <ScalarProperty Name="Number" ColumnName="Number" />
        </MappingFragment>
      </EntityTypeMapping>
    </EntitySetMapping>
  </EntityContainerMapping>
</Mapping></edmx:Mappings>
  </edmx:Runtime>
  <!-- EF Designer content (DO NOT EDIT MANUALLY BELOW HERE) -->
  <Designer xmlns="http://schemas.microsoft.com/ado/2009/11/edmx">
    <Connection>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="MetadataArtifactProcessing" Value="EmbedInOutputAssembly" />
      </DesignerInfoPropertySet>
    </Connection>
    <Options>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="ValidateOnBuild" Value="true" />
        <DesignerProperty Name="EnablePluralization" Value="True" />
        <DesignerProperty Name="IncludeForeignKeysInModel" Value="True" />
        <DesignerProperty Name="CodeGenerationStrategy" Value="None" />
      </DesignerInfoPropertySet>
    </Options>
    <!-- Diagram content (shape and connector positions) -->
    <Diagrams></Diagrams>
  </Designer>
</edmx:Edmx> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:56:48.137

在生成数据库代码之前，我看不到表映射字段`right click model -> Generate Database from model`，这样做之后映射就可以了。

不确定这是否是错误，但它是可重复的并且确实解决了问题。

# ruby-on-rails - 两个模型的 Ruby on Rails 关系

> ID：13531056
> 
> 赞同：0
> 
> 时间：2012-11-23T14:27:18.273
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, rails-migrations

我有两种不同的型号。

**项目型号**

```
class Item < ActiveRecord::Base
    belongs_to :category
    attr_accessible :make, :model, :name, :purchasedfrom, :qrcode, :serialnumber, :category_id
end 
```

**事件模型**

```
class Event < ActiveRecord::Base
    belongs_to :category
    attr_accessible :name, :location_id, :category_id
end 
```

我无法弄清楚如何执行以下操作：

*   An`Event`有多个`Item`可以在`Event`.
*   `Event`历史仍然显示特定`Items`事件。

*   将显示来自事件的项目：**localhost/event/:id/items**

我一生都无法弄清楚这一点。如果我能在这个问题上得到一些指导，我将不胜感激！提前感谢您的所有帮助。

我已经看到了`:through`我相信我必须在这里使用的用法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:56:07.247

如果我正确理解了您的问题，您可以在这里在事件模型中编写类似的内容。

```
class Event
  def items
    category.items
  end
end 
```

然后在控制器中，

```
@event = Event.find(params[:id])
@items = @event.try(:items) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:06:54.790

我认为您想要做的是：

```
class Item < ActiveRecord::Base
    belongs_to :event
end 
```

对于事件：

```
class Event < ActiveRecord::Base
    has_many :items
end 
```

然后你应该能够通过调用来查看事件的项目：

```
@event = Event.find_by_id(:id)
@event.items.all 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:04:44.863

如果一个`Category`可以有很多`Events`，我认为您必须添加`event_id`才能`Item`确切地知道确切的`Items`内容`Event`。（在这种情况下添加关系）。

或者在`Event`and`Item`和 has_and_belongs_to_many 之间连接表，如果一个`Item`可以在多个上`Events`

编辑：

如果是这样，请添加表`events_items`、关系`has_and_belongs_to_many :items`（in`Event`和`:events`in ），`Item`并阅读**.**`has_and_belongs_to_many`

否则，如果您正在寻找`Items`某个已经存在的内容，`Event`您会发现所有**内容**`Items`都与您正在调查的内容相同。 **`Events``Category``Event`**

# flash - 将 SVG 转换为 Flash

> ID：13531058
> 
> 赞同：0
> 
> 时间：2012-11-23T14:27:29.340
> 
> 标签：flash, svg

我在这里有一个 SVG：

*移除*

SVG 使用 JavaScript 修改以添加阴影。

但是，由于 IE8 中不支持 SVG 并且此 SVG 无法与 SVG Web 一起使用，我不得不将其转换为 flash。

我对闪存一无所知，想知道是否有人可以简要概述一下我需要做什么。

我将用于修改地图的数据插入到 SVG 之前的对象中。这个对象可以发送到Flash并被Flash读取吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T22:03:38.077

总之，SVG+JS -> Flash 转换没有解决方案，手工创建吧。尽管有仅转换 SVG 的解决方案。

我所寻求的解决方案是向用户显示一条消息，为他们提供可以使用的选项，包括 ChromeFrame，这是一个 IE 插件，可以在 IE8 中呈现 SVG。

# javascript - 如何获取可能已定义或未定义的表格单元格的 Javascript 集合

> ID：13531062
> 
> 赞同：1
> 
> 时间：2012-11-23T14:27:47.737
> 
> 标签：javascript, dom

> **可能重复：**
> [检查 JavaScript 中属性的存在](https://stackoverflow.com/questions/13248664/checking-existence-of-properties-in-javascript)

我正在尝试在`i.e. this.tBodies[0].rows[0].cells`不使用 jQuery 的情况下获取表格 tbody 单元格 ( ) 的第一行。如果没有，我不希望造成错误。以下似乎可行，但有更好的方法吗？

```
var tbody_cells = (this.tBodies
  && this.tBodies
  && this.tBodies[0].rows
  && this.tBodies[0].rows[0])
? this.tBodies[0].rows[0].cells
:undefined; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:30:38.880

您可以使用[querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)：

```
this.querySelectorAll('tr:first-child td'); 
```

这不适用于 IE7，但你真的在乎吗？

如果你关心并且经常不得不做这种事情，我建议使用一个实用程序库，即[jQuery](http://jquery.com/)，它使这变得容易并为你解决许多兼容性陷阱：

```
$('tr:first-child td', this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:31:16.503

使用 try catch 块：

```
var result;
try{
result = this.tBodies[0].rows[0].cells;
}catch(e if e instanceof ReferenceError){
result = undefined;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:35:35.060

其实我不知道桌子是否总是准备好。

```
<html>
<body>
    <table id="tbl">
        <tbody>
            <tr>
                <td>
                </td>
                <td>
                </td>
            </tr>
        </tbody>
    </table>
</body>
</html>

function getTblCells() {

    var cells = document.getElementById("tbl").children[0].children[0].children;

    return children ? children : [];
} 
```

您也可以给第一行一个 id 并检查该行是否存在（如果您怀疑它的存在），然后进行“有孩子”检查。

# java - 客户端中域对象中的注释拉取完整的休眠依赖项

> ID：13531068
> 
> 赞同：0
> 
> 时间：2012-11-23T14:28:14.060
> 
> 标签：java, hibernate, client-server, hibernate-annotations

我想在我的客户端和服务器应用程序之间共享一些域对象。

从 Hibernate 4 开始，Hibernate 注释被集成在 hibernate-core 中（以前是一个单独的 jar），参见[http://in.relation.to/Bloggers/NoMoreHibernateannotationsModule](http://in.relation.to/Bloggers/NoMoreHibernateannotationsModule)

我*真的*更喜欢使用注释（而不是切换到基于 xml 的映射）。

同时，我*真的*很想避免将休眠核心依赖项与客户端捆绑在一起（这将通过 java web start 通过 http 传输给用户，理想情况下是在每次启动时）。

我必须回到 Hibernate 3.x 吗？运行客户端需要这些注释依赖项还是我只需要它们来编译客户端？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:27:53.150

您不需要在类路径中具有类的注释即可加载类。

也就是说，Hibernate 实体包含集合和对其他实体的引用。集合是 Hibernate 集合的实例，并且引用可以是 Hibernate 代理，如果它们是延迟加载的。因此，如果您将 Hibernate 实体从服务器序列化到客户端，则客户端将需要其类路径中的 Hibernate jar 才能加载它们。

如果您想在客户端避免 Hibernate 依赖，您应该考虑将 DTO 传输到客户端而不是 Hibernate 实体。

# python - Python图像创建循环

> ID：13531071
> 
> 赞同：0
> 
> 时间：2012-11-23T14:28:26.380
> 
> 标签：python, image, loops

下面的代码创建了赛道的一维图像：

```
def displayTrack(position):

    output=''#value given to output
    track=[' ']*20# track is initially just a bunch of empty spaces
    track[position]= 'r'#AND track also contains an r icon
    print(' -'*20)#these are the top and bottom borders
    print('0 1 2 3 4 5 6 7 8 9 A B C D E F G H I J')#these represent each individual cell

    for i in range(len(track)):
        output= output +track[i] +'|'#append a "|" before and after each empty space " "
    print (output)#print the result
    print(' -'*20) 
```

如果您运行此代码，您将能够查看图像。如果您查看字符“r”，您会看到字符“r”的右侧有“|” 特点。我需要实现一个“|” 在跑步者的左侧也是如此。我需要使用类似于上面的方法，因为许多变量和图像的初始状态取决于其他变量等。

我知道问题存在于 output= '' 的命运中。相反，如果输出不是空格，或者根本不是字符，那么图像将正确显示，但我不知道如何做到这一点。有人可以帮我一把吗？任何和所有的帮助表示赞赏。

如果有任何不清楚的地方，请告诉我，我会尽快更改。

编辑：所以我发现新代码应该是这样的：有 3 处更改：

1）输出='|' 而不是 '' 2) 在包含连字符和字母数字字符的字符串中，末尾的空格被移到开头。这解决了所有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:45:16.650

这是你想要的吗 ？目前尚不清楚，因为您的原始布局很奇怪。

```
def displayTrack(position):

    output='|'#value given to output
    track=[' ']*20# track is initially just a bunch of empty spaces
    track[position]= 'r'#AND track also contains an r icon
    print(' -'*20)#these are the top and bottom borders
    print(' 0 1 2 3 4 5 6 7 8 9 A B C D E F G H I J')#these represent each individual cell

    for i in range(len(track)):
        output= output +track[i] +'|'#append a "|" before and after each empty space " "
    print (output)#print the result
    print(' -'*20) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:39:21.367

您的评论#append a "|" 每个空格“”之前和之后都具有误导性。它之前的语句是添加轨道的一部分和一个“|”。它不看字符是否是一个空格，并且在它之前没有放置任何东西。空格前有 | 的唯一原因是因为它们遵循的位置后面有一个。

要将某些内容放在其他内容之前，请从 output = '|' 开始 代替 ''。在这种情况下，您可能还想在其他行之前放置一个额外的空间，以保持排列整齐。例如：打印(''+'-'*20)

# objective-c - SecKeychainFindInternetPassword 不起作用

> ID：13531073
> 
> 赞同：3
> 
> 时间：2012-11-23T14:28:29.193
> 
> 标签：objective-c, xcode, macos, keychain

我在存储和读取钥匙串时遇到问题。首先，我尝试在方法 SecKeychainFindInternetPassword 中为 accountname 存储使用类似“account_name”的字符，然后运行。但现在我想在里面存储一个变量。但是，如果我运行此代码，程序将找不到钥匙串项。请帮我。（对不起我的英语不好，我是德国学生）

```
-(void)StorePasswordKeychain:(void*)password :(UInt32)passwordLength
{
char *userString;

userString = (char *)[_username UTF8String];
SecKeychainAddInternetPassword(
                               NULL,
                               StrLength("myserver.com"),
                               "myserver.com",
                               0,
                               NULL,
                               StrLength(userString),
                               userString,
                               0,
                               nil,
                               0,
                               kSecProtocolTypeHTTPS,
                               kSecAuthenticationTypeHTMLForm,
                               passwordLength,
                               password,
                               NULL
                               );
}

-(OSStatus)GetPasswordKeychain:(void *)passwordData :(UInt32 *)passwordLength
{
OSStatus status;
char *userString;

userString = (char *)[_username UTF8String];
status = SecKeychainFindInternetPassword(
                                NULL,
                                StrLength("myserver.com"),
                                "myserver.com",
                                0,
                                NULL,
                                StrLength(userString),
                                userString,
                                0,
                                nil,
                                0,
                                kSecProtocolTypeHTTPS,
                                kSecAuthenticationTypeHTMLForm,
                                passwordLength,
                                passwordData,
                                NULL
                                );
return status;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:02:23.593

两个建议.. 不要将 null 传递给 itemRef （最后一个参数）。然后你会有一个指向你想要修改的钥匙串的指针。

此外，您应该真正检查错误代码以查看您的添加功能是否有效。

```
OSStatus result = SecKeychainAddInternetPassword(
                           NULL,
                           StrLength("myserver.com"),
                           "myserver.com",
                           0,
                           NULL,
                           StrLength(userString),
                           userString,
                           0,
                           nil,
                           0,
                           kSecProtocolTypeHTTPS,
                           kSecAuthenticationTypeHTMLForm,
                           passwordLength,
                           password,
                           NULL
                           );
if(result != noErr){
    NSLog(@"Error AddPassword result=:%d", result );
} 
```

这是我的示例程序，其代码与您提供的代码相同，并且运行良好。

```
int main(int argc, const char * argv[])
{

@autoreleasepool {

    char *inputpassword = "topsecret";
    UInt32 inputpassLength = strlen(inputpassword);
    OSStatus status;
    NSString *_username = @"account_name";

    char *userString;

    userString = (char *)[_username UTF8String];
    status = SecKeychainAddInternetPassword(
                                   NULL,
                                   StrLength("myserver.com"),
                                   "myserver.com",
                                   0,
                                   NULL,
                                   StrLength(userString),
                                   userString,
                                   0,
                                   nil,
                                   0,
                                   kSecProtocolTypeHTTPS,
                                   kSecAuthenticationTypeHTMLForm,
                                   inputpassLength,
                                   inputpassword,
                                   NULL
                                   );

    NSLog(@"Adding Status:%d", status);

    UInt32 returnpasswordLength = 0;
    char *passwordData;

    status = SecKeychainFindInternetPassword(
                                             NULL,
                                             StrLength("myserver.com"),
                                             "myserver.com",
                                             0,
                                             NULL,
                                             StrLength(userString),
                                             userString,
                                             0,
                                             nil,
                                             0,
                                             kSecProtocolTypeHTTPS,
                                             kSecAuthenticationTypeHTMLForm,
                                             &returnpasswordLength,
                                             (void *)&passwordData,
                                             NULL
                                             );

    NSLog(@"Retrieving status:%d", status);

    NSLog(@"Password:%@", [[NSString alloc] initWithBytes:passwordData
                                                   length:returnpasswordLength
                                                 encoding:NSUTF8StringEncoding]);

}
return 0;
} 
```

# c# - ASP.net 初学者真的很困惑 StaticObjects 以及如何声明它

> ID：13531076
> 
> 赞同：1
> 
> 时间：2012-11-23T14:28:47.027
> 
> 标签：c#, asp.net, static, application-start, application-state

我是 ASP.net 的初学者，我对应用程序状态做了一些研究。我知道在`Application_start`事件中声明新的应用程序状态。

但是当我查看 MSDN 库时（不幸的是，这根本没有帮助）。我找到了这段：

> 或者，您可以通过 Web 应用程序的 Global.asax 文件中的声明将对象添加到 StaticObjects 集合。然后可以从应用程序中任何位置的代码访问以这种方式定义的应用程序状态。以下示例显示了应用程序状态值的对象声明：
> 
> ```
> <object runat="server" scope="application" ID="MyInfo" 
>     PROGID="MSWC.MYINFO">
> </object> 
> ```
> 
> 您只能在 Global.asax 文件中将对象添加到 StaticObjects 集合。如果您尝试通过代码直接添加对象，该集合将引发 NotSupportedException。
> 
> 您可以访问存储在应用程序状态中的对象的成员，而无需引用应用程序集合。下面的代码示例演示如何引用应用程序状态的 StaticObjects 集合中定义的对象的成员。请注意，在 Global.asax 中定义的标签标识符用作变量名。

我真的不知道该怎么做`add objects to the StaticObjects collection via an <object runat="server"> declaration in your Web application's Global.asax file.`

1.  如何添加`<object>`标签？
2.  首先什么是`<object>`标签？
3.  什么是`StaticObject`收藏？
4.  如何在`Global.asax`（C# 代码）中添加“标签”？

我知道我的问题非常原始，但我真的很想很好地理解事物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:39:34.240

MSDN 并不总是正确的，尤其是一些示例代码往往很奇怪。

XML 代码可以放入`web.config`文件中，同时`global.asax.cs`包含不同应用程序生命周期事件的处理程序，因此您可以通过编程方式获得类似的结果，例如在`Application_Start`事件处理程序中。

# jquery - mysql数据表如何在获取记录计数时为字段名称加一

> ID：13531084
> 
> 赞同：0
> 
> 时间：2012-11-23T14:29:06.393
> 
> 标签：jquery, mysql, datatable, counter, fetch

我在这里有这段代码：

```
while ($record = mysql_fetch_array($itemavailablequeryres))
{
echo "
<tr>
<td>$record['itemid']</td>
<td>$record['code']</td>
<td>$record['name']</td>
<td><input type='checkbox' name='input'></td>
</tr> ";
} 
```

现在 HTML 中的输出将是：

```
 <tr>
                    <td>1</td>
                    <td>105</td>
                    <td>t-racks</td>
                    <td>Mic splitter</td>
                    <td><input type='checkbox' name='input'></td>
                </tr> 
```

对于数据库的每条记录。

如何实现一个计数器，以便输入名称在每条记录后为 +1？

所以输出将是：

```
<tr>
...
<td><input type='checkbox' name='input1'></td>
...
</tr>
<tr>
...
<td><input type='checkbox' name='input2'></td>
...
</tr>
<tr>
...
<td><input type='checkbox' name='input3'></td>
...
</tr>
<tr>
...
<td><input type='checkbox' name='input4'></td>
...
</tr> 
```

等等，取决于获取了多少记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:30:55.370

您可以创建一组复选框

```
<td><input type='checkbox' name='input[]'></td> 
```

如果你还想用柜台做

你可以这样做

```
$row =1;
while ($record = mysql_fetch_array($itemavailablequeryres))
{
   echo "
    <tr>
    <td>$record['itemid']</td>
    <td>$record['code']</td>
    <td>$record['name']</td>
    <td><input type='checkbox' name='input{$row}' ></td>
    </tr> ";
    $row++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:32:16.133

在您的代码中添加一个计数器：

```
$i = 1;
while ($record = mysql_fetch_array($itemavailablequeryres))
{
    echo "
    <tr>
    <td>$record['itemid']</td>
    <td>$record['code']</td>
    <td>$record['name']</td>
    <td><input type='checkbox' name='input "'. $i . '"'></td>
    </tr> ";
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T14:40:39.590

你可以用 count 做这样的事情：

```
$count=0;
while {
 $count++;
 echo '<td><input type="checkbox" name="input'.$count.'"></td>';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T14:33:28.647

你可以这样做：

```
$counter=1;
while ($record = mysql_fetch_array($itemavailablequeryres))
{
echo "
<tr>
<td>$record['itemid']</td>
<td>$record['code']</td>
<td>$record['name']</td>
<td><input type='checkbox' name='input'".($counter++)."></td>
</tr> ";
} 
```

# configuration - AllegroGraph memoryLimit 查询选项

> ID：13531088
> 
> 赞同：0
> 
> 时间：2012-11-23T14:29:19.413
> 
> 标签：configuration, allegrograph

我在哪里可以设置[这里](http://www.franz.com/agraph/support/documentation/current/change-history.html#header4-273)`memoryLimit`提到的 AllegroGraph 的查询选项？

我正在使用 AllegroGraph 4.9，当我通过 WebView 执行我的 SPARQL 查询之一时，不断收到 QUERY_MEMORY_LIMIT_REACHED 错误。

日志说：

```
Query has reached memory limit of 4,294,967,296 when requesting 1,089,870,432 additional bytes.
<LISP query plan(?) goes here>
Consider restructuring your query or increasing the value of the :memoryLimit query option. 
```

我将尝试改进我的查询，但我也想知道该`memoryLimit`选项的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:24:47.197

AllegroGraph 允许您在配置文件或每个特定查询中指定多个配置选项。为了在查询中指定一个选项，AllegroGraph 扩展了 PREFIX 语法。例如，要更改内存限制，您可以预先挂起：

```
PREFIX franzOption_memoryLimit: <franz:8g> 
```

不需要这样做并不常见，因此如果您可以在查询中包含更多详细信息，我们可以帮助诊断和改进事情。另一个有用的选项是记录查询：

```
PREFIX franzOption_logQuery: <franz:yes> 
```

请通过 support@franz.com 联系 AllegroGraph 支持以获取更多帮助。

# php - 缩短特定字符串的函数

> ID：13531090
> 
> 赞同：2
> 
> 时间：2012-11-23T14:29:27.050
> 
> 标签：php, string

我有这个字符串：

```
$str="http://ecx.images-amazon.com/images/I/418lsVTc0aL._SL110_.jpg"; 
```

是否有内置的php函数可以通过删除`._SL110_.jpg`部分来缩短它，这样结果将是：

```
http://ecx.images-amazon.com/images/I/418lsVTc0aL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:52:35.630

不，没有任何内置的 URL 缩短 php 函数，如果你想做类似的事情，你可以使用子字符串或创建一个生成短链接并将长和短值存储在数据库中某处的函数，并且只显示短的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:33:39.780

好吧，这取决于您是否需要正则表达式替换（如果您不知道完整的值），或者您是否可以执行如下简单的 str_replace：

```
$str = str_replace(".SL110.jpg", "", "http://ecx.images-amazon.com/images/I/418lsVTc0aL._SL110_.jpg"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:36:18.550

您可以使用 preg_replace()。

例如`preg_replace("/\.[^\.]+\.jpg$/i", "", $str);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T14:34:00.123

不，它不是（至少不是直接的）。此类 URL 缩短器通常会生成唯一 ID 并记住您的原始 URL 和生成的 ID。当你输入这样的 url 时，你会启动一个脚本，它会查找给定的 ID，然后重定向到目标 URL。

如果您只想剪切字符串的某些部分，然后**假设**文件名格式如您所示，只需查找第一个点并`substr()`到那个地方。或者

```
$tmp = explode('.', $filename);
$shortName = $tmp[0]; 
```

如果后缀`._SL110_.jpg`总是在那里，那么就`str_replace('._SL110_.jpg', '', $filename)`可以工作。

**编辑**

以上只是文件名的示例。整个代码将是：

```
$url = "http://ecx.images-amazon.com/images/I/418lsVTc0aL._SL110_.jpg";
$urlTmp = explode('/', $url);
$fileNameTmp = explode( '.', $urlTmp[ count($urlTmp)-1 ] );

$urlTmp[ count($urlTmp)-1  ] = $fileNameTmp[0];
$newUrl = implode('/', $urlTmp );

printf("Old: %s\nNew: %s\n", $url, $newUrl); 
```

给出：

```
Old: http://ecx.images-amazon.com/images/I/418lsVTc0aL._SL110_.jpg
New: http://ecx.images-amazon.com/images/I/418lsVTc0aL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T14:37:59.677

我建议使用：

```
$tmp = explode("._", $str); 
```

然后根据`$tmp[0]`您的目的使用，如果您确保要删除的部分始终由“._”（点下划线）符号分隔。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T15:05:04.050

你可以这样做`substr($data,0,strpos($data,"._"))`，如果你想要的是剥离“._”之后的所有内容

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-23T15:11:39.233

你可以试试

```
$str = "http://ecx.images-amazon.com/images/I/418lsVTc0aL._SL110_.jpg";
echo "<pre>"; 
```

一种。

```
echo strrev(explode(".", strrev($str), 3)[2]) , PHP_EOL; 
```

B.

```
echo pathinfo($str,PATHINFO_DIRNAME) . PATH_SEPARATOR . strstr(pathinfo($str,PATHINFO_FILENAME),".",true), PHP_EOL; 
```

C。

```
echo preg_replace(sprintf("/.[^.]+\.%s$/i", pathinfo($str, PATHINFO_EXTENSION)), null, $str), PHP_EOL; 
```

输出

```
http://ecx.images-amazon.com/images/I/418lsVTc0aL 
```

[看演示](http://eval.in/3841)

# ssas - 有没有办法使用 DAX 比较 PowerPivot 中的多个列？

> ID：13531092
> 
> 赞同：3
> 
> 时间：2012-11-23T14:29:31.333
> 
> 标签：ssas, sql-server-2012, powerpivot, dax

假设我在 PowerPivot 中有一个如下所示的表：

![用于说明问题的示例 PowerPivot 表](../Images/8acaa6baa75c70d88492b123066ecb39.png)

对于每一行，我想找到第 1、2 和 3 列的最小值，并将该值显示在“MinColumn”列中。内置的 MIN 函数似乎只对列进行操作，而不是对行进行操作。

除了某种嵌套的 IF 表达式之外，还有什么方法可以做到这一点？如果我们有很多列要比较，那会很快变得非常混乱。

PowerPivot/DAX 做了一些很棒的基于列的东西（考虑到它使用 xVelocity，这是可以预料的），但是当您开始查看行级功能时，它似乎变得复杂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:47:03.383

另一种选择是将计算下推到源。

例如，如果您的源是数据库表，您可以在将数据拉入 PowerPivot 之前创建一个视图（或简单地使用命名查询）并计算 MIN（跨 3 个其他列）。

注意：TSQL 版本也会相当难看，PIVOT + MIN() OVER()

# jquery - 如何禁用 jQuery Overlay 的所有动画和效果？

> ID：13531095
> 
> 赞同：0
> 
> 时间：2012-11-23T14:29:36.317
> 
> 标签：jquery, animation, overlay

我正在使用[jQueryOverlay](http://jquerytools.org/documentation/overlay/index.html)来处理我正在做的事情，并且我想禁用动画和效果。现在（默认行为）似乎从右下角移动到屏幕中心，我想要关闭它。只是为了在屏幕中央显得简单。我将速度设置为“0”，但动画仍然存在。是否有任何属性可以禁用动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:34:22.273

There is a method to disable all effects from jquery :

```
 jQuery.fx.off = true; 
```

Maybe there is such an extension in the overlay object ?

# git - 如何使我的提交历史记录与 git rebase 一起使用？

> ID：13531099
> 
> 赞同：3
> 
> 时间：2012-11-23T14:30:04.467
> 
> 标签：git, git-rebase

我有一段看起来像这样的历史

```
H o updated ctools, ds
G M─┐ merged module file
F │ o find page 
E o │ work on download restriction
D o─┘ Report downloading/emailing WIP
C o migration: find and replace URLs throughout notes
B o various local things
A o initial commit 
```

再往后，A 从远程主机上下来。现在遥控器已经移动，我想使用 git rebase 来更新我的历史记录，以了解最新的远程更改。

所有这些提交都在**不在**远程主机中的代码上，但是 git rebase 会让我失败，因为它似乎不明白如何处理**D:G**：在**G**合并的侧分支。Git rebase 尝试按顺序应用它们，而不进行合并，即，`A B C D E F H...`但**F**不会应用于**E**。我计划需要多次 rebase 以使我的代码保持在最新起源的开发之上，所以我想要一个持久的解决方案。

我如何告诉 git 可以在**G**找到冲突的答案？或者我该怎么做才能让 git rebase 能够回复提交？如果这让事情变得更容易，我很乐意将**D:G 压缩**到**D'中。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:46:09.310

Git 与 master 合并是您方案中的最佳选择，因为 rebase 不是为合并提交而设计的（G 是您的问题）。但是，如果您真的想要并且`git rebase -p`没有产生预期的结果，您可以：

1.  rebase AE（然后是 A'-E'）
2.  在 D' 上单独重新应用 F（通过cherrypick 或其他方式）成为 F'
3.  合并 E' 和 F' 成为 G'
4.  Cherrypick H 在 G' 的顶部

此处首选合并的其他原因：

1.  您尝试变基的那些提交可能已经属于远程上的某个功能分支，将其中的很多变基到另一个远程分支只会导致大量重复提交，这可能会让其他人感到困惑。

2.  如果这些提交仅在您的本地分支中，则通过重新定位（但不一定是推送）它们，您实际上是在“保留”它们，直到它们最终被推送或合并。这可能会对其他人造成干扰，因为它看起来像是在短时间内突然出现了大量的提交；合并应该是工作流中的常规活动。

也就是说，如果您出于任何原因（例如使用 git-svn）计划进行定期变基（例如使用 git-svn），最好的方法是为您希望变基的提交维护线性历史记录和/或将它们限制为少量. 对于涉及合并的一系列提交，这些合并需要从前向后折叠（如迷你变基）。

# preprocessor - 在 OpenCL 编译器参数中转义空间

> ID：13531100
> 
> 赞同：4
> 
> 时间：2012-11-23T14:30:10.220
> 
> 标签：preprocessor, opencl

我正在尝试将参数传递给其中包含空格的 OpenCL 编译器，但我找不到如何让它正确处理空格（即不仅仅是将它们解释为下一个参数的开始）。我的代码是这样的：

`status = clBuildProgram(output_program, 1, devices, "-D OutputType=unsigned char", 0, 0);`

显然，这会导致编译器错误

`Error in processing command line: Don't understand command line argument "char"!`

有谁知道正确的语法以使其理解我希望它定义`OutputType`为`unsigned char`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-06T12:02:11.510

即使这个问题很老，我仍然不时遇到它。AMD 的 OpenCL 工具链仍然不能处理在命令行中定义的宏中的空格，而它现在似乎可以与 NVIDIA 一起使用。

简单的解决方案是用 \t 替换所有空格。

制表符算作编译器的空白，但不算作预处理器的标记分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T11:06:24.793

This is a bug in the command line space handling, it is not (at least on recent NVIDIA platforms) working as a standard Unix (or at least Windows) commandline should.

I've tried putting many braces, including `\' \" \\" \\'` and the backtick ```. I've even tried escaping the space itself (`-D OutputType=unsigned\ char`). This does not help, the command line string is probably simply chopped to tokens based on positions of spaces, and noone seems to care about braces.

One solution is to read the source code in a string, and prefix it with a single-line:

```
#define OutputType unsigned char 
```

There is, however, one simpler solution. You need to include the following macro in your files:

```
#define MKTWOWORD(a,b) a b 
```

And then you can use any of:

```
status = clBuildProgram(output_program, 1, devices,
    "-D OutputType=MKTWOWORD(unsigned,char)", 0, 0);

status = clBuildProgram(output_program, 1, devices,
    "-D OutputType=MKTWOWORD(unsigned,int)", 0, 0);

status = clBuildProgram(output_program, 1, devices,
    "-D OutputType=MKTWOWORD(signed,int)", 0, 0);

status = clBuildProgram(output_program, 1, devices,
    "-D OutputType=int", 0, 0); 
```

The advantage is that you have to do string processing only on the commandline and not on the whole source code.

It's a bummer, but getting the MKTWOWORD macro inside the source code using the -D option is not possible, as it would result in a chiken-or-egg problem. You just have to include that in your kernels.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:12:30.243

您是否尝试过使用 \" 来逃避它们：

```
status = clBuildProgram(output_program, 1, devices, "-D OutputType=\"unsigned char\"", 0, 0); 
```

?

# java - 如何使用 BufferedReader (Java) 中断读取操作？

> ID：13531104
> 
> 赞同：1
> 
> 时间：2012-11-23T14:30:28.893
> 
> 标签：java, bufferedreader

您好，虽然我阅读了很多其他答案，但我不明白如何在不发送输入的情况下关闭 BufferedReader。这是我程序的阻塞部分：

```
public class AuctionClientUserListener extends Thread {

    private PrintWriter out;
    private BufferedReader stdIn;
    private int udpPort;
    private boolean running = true;
    private boolean listening = true;

    // needs server connection out
    public AuctionClientUserListener(BufferedReader stdIn,PrintWriter out,int udpPort) {
        this.stdIn = stdIn;
        this.out = out;
    }

    public void run() {
        String fromUser;

        while(true) {
            if(!listening) {
                break;
            }
            try {

                fromUser = stdIn.readLine(); // BLOCKS

                if (fromUser != null) {
                        System.out.println("Me: " + fromUser);

                        // check if to send udp port
                        String[] spinput = fromUser.split(" ");
                        if(spinput[0].equals("!login")) {
                            fromUser+=" "+udpPort;
                        }

                        out.println(fromUser);

                        if(fromUser.equals("!end")) {
                            listening = false;
                        }
                }
            } catch(Exception e) {
                listening = false;
            }
        }
        running = false;
    }

    public boolean running() {
        return running;
    }

    public void endListening() {

        this.listening =  false;
    }
} 
```

当我从主线程调用“endListening()”时，程序终止——但不是在用户输入任何内容之前。我想让程序立即终止 - 如何中断这个 BufferdReader （像 BufferedReader(new InputStreamReader(System.in)) 一样创建）？

我试图在主线程的这个线程上调用 stdIn.close() 和 thread.interrupt()，但它不起作用。我还尝试关闭主线程中的 InputStreamReader。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:56:06.497

您可以在调用之前检查[是否有可用数据](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/InputStream.html#available%28%29)`BufferedReader.readLine()`，即

```
while(true) {
    if (!listening) break;
    if (System.in.available() > 0) {
        try {
            fromUser = stdIn.readLine();
            // etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:56:20.300

您必须使用`thread.interrupt`信号通知线程以中断其进程。准备好捕获`InterruptedException`线程启动的。

[http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:56:33.317

我认为你可以使用 stdIn.close() 关闭你的 BufferedReader；

# android - 静态最终常量为空

> ID：13531107
> 
> 赞同：5
> 
> 时间：2012-11-23T14:30:41.107
> 
> 标签：android, junit

我有一个扩展自的类`ServiceTestCase`来测试我的 Android 服务实现。

```
public class MainCoreServiceTest extends ServiceTestCase<CoreService> {

    protected static final String DB_PATH = "/data/data/"
            + CoreService.class.getPackage().getName() + "/databases/"
            + DatabaseManager.DB_NAME;

    // More code
} 
```

我面临的问题是，如果我只运行一个测试方法，一切都很好，但是如果我启动整个类（包含几个测试方法）然后在第二个测试方法上我得到一个`ExceptionInInitializerError`，我发现这是`DB_PATH`因为无效的。这是发生这种情况的方法：

```
private void wipeOutDB() {

    // Erase DB file
    File dbFile = new File(DB_PATH);
    if (dbFile.exists()) {
        assertTrue(dbFile.delete());
    }

    // Erase journal file
    dbFile = new File(DB_PATH + "-journal");
    if (dbFile.exists()) {
        assertTrue(dbFile.delete());
    }
} 
```

`new File(DB_PATH)``DB_PATH`当为空时显然失败

我不会在任何地方修改这个常量（无论如何我不能修改它，因为它是最终的），所以我不理解这种行为。

如果我将此常量移动到另一个类/接口，它工作正常。

谁能解释一下这种行为？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:53:24.670

您得到的异常意味着无法初始化 DB_PATH - 因此`null`稍后会出现。我猜你用来初始化 DB_PATH 的部分之一是空的，可能在这个：`CoreService.class.getPackage().getName()`.

另请参阅：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ExceptionInInitializerError.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ExceptionInInitializerError.html)

# pdf - .Net compact framework 3.5 的报告工具

> ID：13531109
> 
> 赞同：1
> 
> 时间：2012-11-23T14:30:51.233
> 
> 标签：pdf, compact-framework, report, reporting, .net-cf-3.5

我正在寻找 .NET compact Framework 3.5 的报告工具。我需要一个可以从之前设计的报告中生成 pdf 的工具。我发现了一个 somone 声称他们在移动设备上使用 fyireporting 的主题，但是当我尝试使用 Visual Studio 时出现此错误

> “'System.Xml.XmlDocument' 类型在未引用的程序集中定义。您必须添加对程序集 'System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 的引用。”

我无法添加它，因为它不是紧凑框架中的 dll。.net CF 是否有任何报告工具？

# php - 在 php 中使用复选框来存储值

> ID：13531111
> 
> 赞同：0
> 
> 时间：2012-11-23T14:30:54.133
> 
> 标签：php, html

我想根据顺序选择的复选框存储值。但是我有一个错误，因为未定义的索引：productadd 等等。

设计部分：

```
<table  width="600" style=" border-color:#799647; border-bottom-color:#799647; border-left-color:#799647; border-right-color:#799647; border-top-color:#799647;" border="2" >
    <tr style="border-color:#799647; background-color:#CAF9C5;">

        <td style="border-color:#799647;"><h4  style="color:Green;">Page Name</h4></td>
        <td style="border-color:#799647;"><h4  style="color:Green;">Add</h4></td>
        <td style="border-color:#799647;"><h4  style="color:Green;">Edit</h4></td>
        <td style="border-color:#799647;"><h4  style="color:Green;">View</h4></td>
        <td style="border-color:#799647;"><h4  style="color:Green;">Delete</h4></td>

        </tr>
        <tr style="border-color:#799647; background-color:#F5F2BF;">
        <td align="center"><label>Products</label><input type="checkbox" name="screen[]" value="Products Master" align="absmiddle" /></td>
        <td style="border-color:#799647;"><input type="checkbox" id="Productsadd" name="Productsadd" value="Yes" /></td>
        <td style="border-color:#799647;"><input type="checkbox" id="Productsedit" name="Productsedit" value="Yes" /></td>
        <td style="border-color:#799647;"><input type="checkbox" id="Productsview" name="Productsview" value="Yes" /></td>
        <td style="border-color:#799647;"><input type="checkbox" id="Productsdelete" name="Productsdelete" value="Yes" /></td> </tr>

        <tr style="border-color:#799647; background-color:#F5F2BF;">
        <td><label>SerialNO</label><input type="checkbox" name="screen[]" value="SerialNO" /></td>
        <td style="border-color:#799647;"><input type="checkbox" id="SerialNOadd" name="SerialNOadd" value="Yes" /></td>
        <td style="border-color:#799647;"><input type="checkbox" id="SerialNOedit" name="SerialNOedit" value="Yes" /></td>
        <td style="border-color:#799647;"><input type="checkbox" id="SerialNOview" name="SerialNOview" value="Yes" /></td>
        <td style="border-color:#799647;"><input type="checkbox" id="SerialNOdelete" name="SerialNOdelete" value="Yes" /></td> </tr>

        <tr style="border-color:#799647; background-color:#F5F2BF;">
        <td><label>Vechile Make</label><input type="checkbox" name="screen[]" value="Vechile Make" /></td>
        <td style="border-color:#799647;"><input type="checkbox" name="Vechileadd" value="Yes" /></td>
        <td style="border-color:#799647;"><input type="checkbox" name="Vechileedit" value="Yes" /></td>
         <td style="border-color:#799647;"><input type="checkbox" name="Vechileview" value="Yes" /></td>
        <td style="border-color:#799647;"><input type="checkbox" name="Vechiledelete" value="Yes" /></td> </tr>

        <tr style="border-color:#799647; background-color:#F5F2BF;">
        <td><label>Retailer</label><input type="checkbox" name="screen[]" value="Retailer" /></td>
        <td style="border-color:#799647;"><input type="checkbox" name="Retaileradd" value="Yes" /></td>
        <td style="border-color:#799647;"><input type="checkbox" name="Retaileredit" value="Yes" /></td>
        <td style="border-color:#799647;"><input type="checkbox" name="Retailerview" value="Yes" /></td>
        <td style="border-color:#799647;"><input type="checkbox" name="Retailerdelete" value="Yes" /></td> </tr>
 </table> 
```

当我以前单击保存按钮时，将执行以下代码。但是我在 switch case 函数中出现错误。php代码：

```
if(isset($_POST['Save']))
{
    $post['userid'] =($_POST['userid']);

    if(!empty($_POST['userid']))
     {  
    // if(is_array($_POST['Products'])) 
    // {
        foreach($_POST['screen'] as $post['Pagename'])
        {
        //  myfun($post['Pagename']);
switch($post['Pagename'])
    {
        case "Products Master": 
                                $post['addition'] =($_POST['Productsadd']);
                                $post['edit'] =($_POST['Productsedit']);
                                $post['vieww'] =($_POST['Productsview']);
                                $post['del'] =($_POST['Productsdelete']);
                                break;  

        case "SerialNO": 
                                $post['addition'] =($_POST['SerialNOadd']);
                                $post['edit'] =($_POST['SerialNOedit']);
                                $post['vieww'] =($_POST['SerialNOview']);
                                $post['del'] =($_POST['SerialNOdelete']);
                                break;  
        case "Vechile Make": 
                                $post['addition'] =($_POST['Vechileadd']);
                                $post['edit'] =($_POST['Vechileedit']);
                                $post['vieww'] =($_POST['Vechileview']);
                                $post['del'] =($_POST['Vechiledelete']);
                                break;  
        case "Retailer": 
                                $post['addition'] =($_POST['RetailerOadd']);
                                $post['edit'] =($_POST['Retaileredit']);
                                $post['vieww'] =($_POST['Retailerview']);
                                $post['del'] =($_POST['Retailerdelete']);
                                break;  

        default : 
                            ?>
                            <script type="text/javascript">
                            alert("Nothing selected.!!");document.location='userrights.php';
                            </script>
                                <?  

}
                    //echo $post['Pagename'];
        $news->addNews($post);
    //   }  
     }

        ?>
            <script type="text/javascript">
            alert("Created Sucessfully..!!");document.location='userrights.php';
            </script>
            <?
}
}
  ![this is my visual screen][1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:36:01.203

这将通过在访问它之前检查是否设置了索引来修复它。

但是，我建议您考虑使用数组代替复选框，将它们分组到集合中以便于解析：

```
if(isset($_POST['Save']))
{
    $post['userid'] = isset($_POST['userid']) ? $_POST['userid'] : null;

    if(!empty($_POST['userid']))
     {  
    // if(is_array($_POST['Products'])) 
    // {
        foreach($_POST['screen'] as $post['Pagename'])
        {
        //  myfun($post['Pagename']);
switch($post['Pagename'])
    {
        case "Products Master": 
                                $post['addition'] = isset($_POST['Productsadd']) ? $_POST['Productsadd'] : null;
                                $post['edit'] = isset($_POST['Productsedit']) ? $_POST['Productsedit'] : null;
                                $post['vieww'] = isset($_POST['Productsview']) ? $_POST['Productsview'] : null;
                                $post['del'] = isset($_POST['Productsdelete']) ? $_POST['Productsdelete'] : null;
                                break;  

        case "SerialNO": 
                                $post['addition'] = isset($_POST['SerialNOadd']) ? $_POST['SerialNOadd'] : null;
                                $post['edit'] = isset($_POST['SerialNOedit']) ? $_POST['SerialNOedit'] : null;
                                $post['vieww'] = isset($_POST['SerialNOview']) ? $_POST['SerialNOview'] : null;
                                $post['del'] = isset($_POST['SerialNOdelete']) ? $_POST['SerialNOdelete'] : null;
                                break;  
        case "Vechile Make": 
                                $post['addition'] = isset($_POST['Vechileadd']) ? $_POST['Vechileadd'] : null;
                                $post['edit'] = isset($_POST['Vechileedit']) ? $_POST['Vechileedit'] : null;
                                $post['vieww'] = isset($_POST['Vechileview']) ? $_POST['Vechileview'] : null;
                                $post['del'] = isset($_POST['Vechiledelete']) ? $_POST['Vechiledelete'] : null;
                                break;  
        case "Retailer": 
                                $post['addition'] = isset($_POST['RetailerOadd']) ? $_POST['RetailerOadd'] : null;
                                $post['edit'] = isset($_POST['Retaileredit']) ? $_POST['Retaileredit'] : null;
                                $post['vieww'] = isset($_POST['Retailerview']) ? $_POST['Retailerview'] : null;
                                $post['del'] = isset($_POST['Retailerdelete']) ? $_POST['Retailerdelete'] : null;
                                break;  

        default : 
                            ?>
                            <script type="text/javascript">
                            alert("Nothing selected.!!");document.location='userrights.php';
                            </script>
                                <?  

}
                    //echo $post['Pagename'];
        $news->addNews($post);
    //   }  
     }

        ?>
            <script type="text/javascript">
            alert("Created Sucessfully..!!");document.location='userrights.php';
            </script>
            <?
}
}
  ![this is my visual screen][1] 
```

# c# - Mono SQLite 无法打开数据库

> ID：13531115
> 
> 赞同：2
> 
> 时间：2012-11-23T14:31:02.213
> 
> 标签：c#, sqlite, mono, locking

我编写了一个简单的 Mono C# 应用程序，用于使用`Mono.Data.Sqlite`包中的 Mono 实现写入 SQLite 数据库：

```
using System;
using Mono.Data.Sqlite;

class MainClass
{
    public static void Main (string[] args)
    {
        using (var dbConnection = new SqliteConnection (@"Data Source=/var/log/gmblog;Version=3;"))
        {
            dbConnection.Open();

            string sql = @"INSERT INTO ""queue"" (""data"") VALUES(""Test"")";
            using (var insertCommand = new SqliteCommand (sql, dbConnection))
            {
                insertCommand.ExecuteNonQuery();
            }
        }
    }
} 
```

这工作正常，直到我从另一个应用程序插入`sqlite3`并保持该应用程序运行：

```
sqlite> insert into queue ("data") VALUES("test2"); 
```

现在 C# 程序挂起，直到它给出以下错误：

```
Unhandled Exception: Mono.Data.Sqlite.SqliteException: The database file is locked 
```

`sqlite3`我从其他实例或从我创建的 C++ 应用程序写入表没有任何问题。

如果我关闭该`sqlite3`实例，则 C# 应用程序将再次运行。

执行 INSERT 后执行已获得读卡器锁的`lsof /var/log/gmblog`节目：`sqlite3`

```
sqlite3 15578  cup    3ur  REG   8,17    13312 4988505 /var/log/gmblog 
```

在 INSERT 之前它没有这个锁：

```
sqlite3 15578  cup    3u   REG   8,17    13312 4988505 /var/log/gmblog 
```

但正如我指出的那样，当其他应用程序正在使用数据库时，其他应用程序没有任何问题写入表。

关于我的 C# 代码有什么问题的任何想法？它是 SQLite 的 Mono 实现中的错误吗？

**25/11 更新**

请注意，这是`dbConnection.Open();`导致数据库锁定错误的原因，而不是`insertCommand.ExecuteNonQuery();`. 即以下代码也不起作用：

```
using System;
using Mono.Data.Sqlite;

class MainClass
{
    public static void Main (string[] args)
    {
        using (var dbConnection = new SqliteConnection (@"Data Source=/var/log/gmblog;Version=3;"))
        {
            dbConnection.Open();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T15:23:17.917

请参阅[SQLiteConnection 文档](http://www.devart.com/dotconnect/sqlite/docs/Devart.Data.SQLite~Devart.Data.SQLite.SQLiteConnection.html)：“如果 SQLiteConnection 超出范围，则不会关闭。因此，您必须通过调用 Close 显式关闭连接。”。该示例显示连接在 finally 块中关闭。我在您的代码示例中看不到您关闭连接的任何地方。

您还应该能够使用在对象超出范围时自动调用 close 的“使用”块：

```
using (var dbConnection = new SqliteConnection (@"..."))
{
    dbConnection.Open();

    string sql = @"INSERT INTO ""queue"" (""data"") VALUES(""Test"")";
    using (var insertCommand = new SqliteCommand (sql, dbConnection))
    {
        insertCommand.ExecuteNonQuery();
    }
} 
```

这可以确保所有内容都得到正确和及时的发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T11:58:37.270

我在 sqlite 的多线程网站上找到了类似的[讨论。](http://www.sqlite.org/cvstrac/wiki?p=MultiThreading)我知道您在那里不是多线程，而是试图获得写锁 - 但讨论仍然有一些有用的提示可能会有所帮助。

> 然后每个线程继续插入许多记录，假设是 1000。您将遇到的问题如下：一个线程将通过对文件设置锁定来控制数据库。这很好，但是当锁处于活动状态时，其余线程将继续为每次尝试的 INSERT 失败。
> 
> ```
> Solution 
> ```
> 
> 测试我最初没有做的 SQLITE_BUSY。这里有一些伪代码来说明一个解决方案：

```
 while (continueTrying) {
    retval = sqlite_exec(db, sqlQuery, callback, 0, &msg);
    switch (retval) {
      case SQLITE_BUSY:
        Log("[%s] SQLITE_BUSY: sleeping fow a while...", threadName);
        sleep a bit... (use something like sleep(), for example)
        break;
      case SQLITE_OK:
        continueTrying = NO; // We're done
        break;
      default:
        Log("[%s] Can't execute \"%s\": %s\n", threadName, sqlQuery, msg);
        continueTrying = NO;
        break;
    }
  } 
```

您可能还想尝试连接字符串上的 busy_timeout 参数，如此[处](http://sqlite.org/capi3ref.html#sqlite3_busy_timeout)和[此处](http://www.mono-project.com/SQLite)所示。

> busy_timeout 参数被实现为对 sqlite(3)_busy_timeout 的调用。默认值为 0，表示如果数据库被锁定，则立即抛出 SqliteBusyException。

# ajax - 通过 AJAX 加载使用 Open Graph 标签的 facebook Like 按钮

> ID：13531116
> 
> 赞同：0
> 
> 时间：2012-11-23T14:31:02.467
> 
> 标签：ajax, facebook-graph-api, facebook-like, facebook-opengraph

> **可能重复：**
> [使用 jquery 和 ajax 添加 facebook 元标记](https://stackoverflow.com/questions/5167759/use-jquery-and-ajax-to-add-facebook-meta-tag)

在我的网站中，我在网格上布置了一组项目。单击一个项目通过 AJAX 加载其详细信息。在详细视图中，我有一个产品标题、图片、描述。

在这个视图中，我想要一个 Like 按钮，它当然应该在通过 AJAX 加载的内容上触发 Like。**（注意：此内容也可以不使用 AJAX 访问）**

如果不需要指定要共享的标题和图片，这很简单：只需在详细视图中包含一个 fb:like 标记，并在 href 属性中设置适当的值。

但是，我还需要使用 OpenGraph 标记指定的图片和标题。

这些标签需要具有不同的值，具体取决于单击的项目。

这是我尝试过的解决方案：

*   与文档中一样，JS SDK 在主页中异步加载，并且 FB.init 也在那里调用（**使用 parse : false**）
*   *head*包含适合主页的带有*title*、*url*和*image*值的 OG 标签
*   当通过 AJAX 加载产品的详细信息时，我在响应中包含一些 JS（请参见下面的代码片段），它会更新 og 标签以向它们提供引用产品的值
    *   最后，我调用 FB.XFBML.parse()

我得到的结果是，在调用 FB.XFBML.parse()**之前，OG 标签已完美更新。**但是按下 Like 按钮会为主页创建一个“like”，**就好像 FB.init 调用保留了 OG 标签的先前值并忽略了我通过 JS 设置的当前值**

我在这里和谷歌上看了很多问题，但令人惊讶的是，我找不到与这个类似的案例。

这是我对 FB.init 的调用

```
 window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      channelUrl : '*correct value hidden for privacy*', // Channel File for x-domain communication
      status     : true,
      cookie     : true,
      xfbml      : false  // I want to parse them once the OG tags are properly set
    });

    // No additional code after init in my case
  }; 
```

这是我在 AJAX 响应中放入的 JS，就在要插入的 HTML 之后

```
<script type="text/javascript">
    og_tags( <?php echo CJavaScript::encode( $this->shareData() ); ?> );        
    $(document).ready( function() {
        FB.XFBML.parse();
    });
</script> 
```

这是函数的定义

```
function og_tags( params ) {
    var head = $('head');
    for ( var p in params )
        place_og_tag( { 'name' : p, 'value' : params[p] }, head );
}

function place_og_tag( opts, head ) {
    var name = "og:" + opts.name;
    var $tag = $( 'meta[property="' + name + '"]', head );
    if ( $tag.length == 0 )
        head.append( $('<meta property="' + name + '" content="' + opts.value + '" />') );
    else
        $tag.attr('content', opts.value );
} 
```

非常感谢您的帮助，因为我已经为此苦苦挣扎了好几天。非常感谢！

# java - 单个休眠会话中的多个事务（使用 Spring）

> ID：13531122
> 
> 赞同：12
> 
> 时间：2012-11-23T14:31:25.650
> 
> 标签：java, spring, hibernate, transactions

是否可以使用 Hibernate + Spring 对以下内容进行建模。

*   公开课
*   开始交易
*   做一些工作
*   犯罪
*   开始交易
*   更多的工作
*   犯罪
*   关闭会话

我使用 Spring TransactionTemplate，它同时执行会话 + 事务生命周期范围。

原因是有时我在业务流程中有几个阶段，我想在每个阶段完成后提交。但是我想继续使用相同的持久对象。如果我每个事务都有一个单独的会话，那么我会得到瞬态/分离异常，因为原始会话已关闭。

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T16:35:22.130

是的，Hibernate 的 Sessions 可以开始并提交多个事务。您需要做的是将打开的会话存储在某处，然后重用它。请注意， Session 不是线程安全对象，但如果您确定它不会有并发问题，您只需将会`TransactionSynchronizationUtils`话绑定到线程资源，然后在需要时取消绑定，您可以[在这里](https://github.com/jtalks-org/poulpe/tree/master/poulpe-view/poulpe-web-controller/src/main/java/org/jtalks/poulpe/web/osod)找到一个示例，或者您可以查看 OSIV 及其标准实现。

这是一个非常复杂的事情，它会容易得多，因此最好立即关闭会话并且不要重用它，因为它可能会带来麻烦：

*   缓存内的对象不会自动被驱逐，因此您的 Session 将增长到 OutOfMemory。
*   会话内部的对象不会被刷新，除非它们是脏的，因此对象被另一个用户更改的机会越来越大。确保只有一个用户会更改可写对象。
*   如果在其中一个步骤中发生异常，您必须确保关闭会话。在 Session 内部发生异常后，该对象不可重用。
*   如果事务回滚，则 Spring 会清除会话，因此您的所有对象都将分离。如果至少有一个事务被回滚，请确保丢弃所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:30:21.773

您可以使用 OpenSessionInView 模式来实现这一点。Spring 提供了一个 javax.servlet.Filter 实现，如果您在 servlet 环境中工作，您可以使用它（问题没有这么说）。这将确保您的 Hibernate 会话在请求期间保持打开状态，而不仅仅是单个事务。

这个[类](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)的 Javadoc非常全面，可能是一个很好的起点。

# jquery - 增量滑块按钮忽略 if/else 语句

> ID：13531126
> 
> 赞同：0
> 
> 时间：2012-11-23T14:31:32.230
> 
> 标签：jquery, if-statement

> **可能重复：**
> [创建增量按钮，如果边距大于 2800 像素则关闭](https://stackoverflow.com/questions/13530079/creating-increment-button-that-shuts-off-if-margin-greater-then-2800-pxs)

我有一个滑块，我正在通过制作`slider_container` `margin-left`负数来推进它，所以`-700`. 当这`margin-left`是`-3500px`最后一张幻灯片时，我希望右键停止`700`从容器中减去。这就是我试图做到这一点的方式，但它似乎不起作用，它只是不断地经过最后一张幻灯片。

```
$("#right").click(function () {
    if ($("#slider_container").css("marginLeft") < -1000) {
        $("#slider_container").animate({
            marginLeft: 0
        }, 450); 
    }
    else {
        $("#slider_container").animate({
            marginLeft: "-=700px"
        }, 450); 
    }
}); 
```

我在[这里设置了一个 JSFiddle](http://jsfiddle.net/6M73x/10/)，单击任何缩略图以查看滑块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:49:38.360

问题是您正在将字符串与数字进行比较。

```
console.log(typeof($("#slider_container").css("marginLeft"))); 
```

上面的代码将返回您的**字符串**，并且您将其与数字（-1000）进行比较，因此条件将始终为假。

您可以手动将字符串转换为数字：

```
$("#slider_container").css("marginLeft").replace("px", ""); 
```

或使用诸如[JSize 之](http://www.bramstein.com/projects/jsizes/)类的插件，它正是这样做的。

# java - 如何在 Eclipse IDE 中显示巨大的变量

> ID：13531130
> 
> 赞同：2
> 
> 时间：2012-11-23T14:31:52.870
> 
> 标签：java, eclipse

我的一些变量很大（包括有这么多行的表）。当我尝试通过 Eclipse 中的**变量视图查看变量**时，它显示了其中的一部分，而不是全部。所以，我需要使用**system.out.println("myVariable");** 看看我的变量包含什么，这不是一种有效的方法。

有没有办法克服这个问题？还是您提供比 sys.out.println 更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:43:04.587

我建议的最好方法是使用显示视图：

```
 menu -> window -> show view -> debug ->display 
```

在显示视图中，键入变量名称，右键单击并选择`display`。如果简短，请在此处使用该`sysout`语句，然后再次右键单击并选择显示。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T06:10:26.410

在*变量*窗口中，我们有一个带有变量列表的网格和一个下面带有变量含义的字段。右键单击此字段=>“最大长度...”

# mysql - 通过主键列关联

> ID：13531131
> 
> 赞同：0
> 
> 时间：2012-11-23T14:31:53.730
> 
> 标签：mysql

我有两个表，其中的数据行不相等，我需要通过“3rd-party”列进行关联。此第 3 方列是两个表的 DATETIME 主键。

这是表格

```
|XKey       |XColumn            |
|-------------------------------|
|2012-01-00 |0.17
|2012-02-00 |0.24
|2012-03-00 |0.33
|2012-04-00 |0.41
|--------------------------------

Y TABLE
=======

|YKey       |YColumn            |
|-------------------------------|
|2012-01-01 |0.21
|2012-01-15 |0.12
|2012-02-01 |0.26
|2012-02-15 |0.27
|2012-03-01 |0.14
|2012-03-15 |0.11
|2012-04-01 |0.74
|2012-04-15 |0.66
|2012-05-01 |0.14
|-------------------------------- 
```

y 表中的值应与 x 表中的相应值相关，其 xkey 值小于或等于相应的 ykey 值。

这个准备好的语句只是产生空值！我可以忽略什么？

```
SET @sql_run =  CONCAT(
        'SET @correl = (SELECT (1/(?-1))*SUM(((a.'
        ,XColumn
        ,' - ?)/?)*((b.'
        ,YColumn
        ,' - ?)/?)) FROM '
        ,XTable
        ,' a JOIN '
        ,YTable
        ,' b ON a.'
        ,XKey
        ,' <= b.'
        ,YKey
        ,' GROUP BY a.'
        ,XKey
        ,', b.'
        ,YKey
        ,' HAVING COUNT(a.'
        ,XKey
        ,') < 2 ORDER BY a.'
        ,XKey
        ,', b.'
        ,YKey
        ,')'
        );      
PREPARE statement_run FROM @sql_run ;
EXECUTE statement_run USING @num, @x_avg, @x_std, @y_avg, @y_std ;
DEALLOCATE PREPARE statement_run ; 
```

调整了 xtable 中的日期值后，现在出现错误“子查询返回多行”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:42:00.920

您的 XKey 日期值无效。尝试将它们设置为每月的第一天而不是 0。

# jsf - richfaces a4j:ajax action never executes

> ID：13531145
> 
> 赞同：2
> 
> 时间：2012-11-23T14:32:41.200
> 
> 标签：jsf, richfaces, ajax4jsf

I have this

```
<h:inputText id="betOpTxt" validatorMessage="cannot be less than 10"
                           style="text-align: right; width: 100%" 
                           value="#{amtAction.amount}">
    <f:validateDoubleRange minimum="10" />
    <rich:validator />                  
    <a4j:ajax execute="@this" action="#{amtAction.performCalculation}" event="blur" />
</h:inputText> 
```

The action of `a4j:ajax` never executes. I wonder what is wrong Please help (i within the `richfaces` mobile implementation)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T15:56:53.350

这是因为在 a4j:ajax 中没有称为*“action”的属性。*改用*“listener”*属性。

# php - 数据库搜索页面的 PHP 语法错误帮助

> ID：13531148
> 
> 赞同：0
> 
> 时间：2012-11-23T14:32:58.503
> 
> 标签：php, html

当我在我的网络服务器上运行这个 PHP 页面时，它不会在搜索按钮和文本框区域周围正确显示。

PHP 不是我的专长，所以如果有人可以为我投下他们熟练的眼睛并告诉我错误在哪里，这将是一个很大的帮助。

先感谢您...

```
<html>
<head>
</head>
<body vlink="#0000FF" alink="#0000FF"> 
<? include 'vars.php'; ?> 
<? include 'searchfunct.php'; ?> 
<table width="500" border="0" align="center" cellpadding="0" cellspacing="0"   bgcolor="#66FFCC"> 
<tr> 
<td> <p align="center"> <font face="Arial"><a href="search.php">Search</a></font></p> 
  <form action="search.php" method="get"> 
    <div align="center"><font face="Arial"> 
      <input maxLength="100" size="60" value**="<?= htmlspecialchars(stripslashes($_GET["search"])); ?>" name="search">** 
      <input type="submit" value="Search" > 
      </p> 
      </font> </div> 
  </form></td> 
</tr> 
</table> 
<div align="left"> 
<?
$search=stripslashes($_GET["search"]);
$page=$_GET["page"];
if($search!="")
fSearch($search,$page,$server,$user,$pass,$database,$Logging,$ResultsPerPage);
?> 
</div> 
<br>
<br>
<div style="color:#CCCCCC; text-align:center;">Developed By Stefano Alimonti And  Stefano Fantin</div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:34:54.407

禁用 php 短标签可能是个问题

您可以替换 `<?=`为`<?php echo`

并`<?`与`<?php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:38:54.580

正如`<? and <?=`php 的最新版本中已弃用的那样，我已将其替换为`"<?php"`and`"<?php echo"`

更新的 html 将是

```
<html>
<head>
</head>
<body vlink="#0000FF" alink="#0000FF"> 
<?php include 'vars.php'; ?> 
<?php include 'searchfunct.php'; ?> 
<table width="500" border="0" align="center" cellpadding="0" cellspacing="0"   bgcolor="#66FFCC"> 
<tr> 
<td> <p align="center"> <font face="Arial"><a href="search.php">Search</a></font></p> 
  <form action="search.php" method="get"> 
    <div align="center"><font face="Arial"> 
      <input maxLength="100" size="60" value="<?php echo htmlspecialchars(stripslashes($_GET["search"])); ?>" name="search">** 
      <input type="submit" value="Search" > 
      </p> 
      </font> </div> 
  </form></td> 
</tr> 
</table> 
<div align="left"> 
<?php
$search=stripslashes($_GET["search"]);
$page=$_GET["page"];
if($search!="")
   fSearch($search,$page,$server,$user,$pass,$database,$Logging,$ResultsPerPage);
?> 
</div> 
<br>
<br>
<div style="color:#CCCCCC; text-align:center;">Developed By Stefano Alimonti And  Stefano Fantin</div> 
</body>
</html> 
```

如果它仍然给出错误，请在评论中发布确切的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:42:13.323

此标记看起来不正确：

```
<input maxLength="100" size="60" value**="<?= htmlspecialchars(stripslashes($_GET["search"])); ?>" name="search">** 
```

尝试：

```
<input maxLength="100" size="60" value="**<?php htmlspecialchars(stripslashes($_GET['search'])); ?>**" name="search"> 
```

# python - 使用 Python Flask 检查 cookie

> ID：13531149
> 
> 赞同：43
> 
> 时间：2012-11-23T14:33:08.377
> 
> 标签：python, session, cookies, flask

我想`country`通过这个 Flask 调用获得一个 cookie（例如）。

```
data = request.cookies.get("country") 
```

如何判断 cookie 是否存在？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-23T14:35:56.947

`request.cookies`是`dict`，所以：

```
from flask import request

if 'country' in request.cookies:
    # do something
else:
    # do something else 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-07T17:58:51.340

```
request.cookies.get('my_cookie') 
```

应该工作。如果它不起作用，当您调用此行时，您可能无法访问请求对象。

尝试在顶部导入烧瓶

```
import flask 
```

然后打电话

```
cookie = flask.request.cookies.get('my_cookie') 
```

如果 cookie 存在，它将被分配`cookie`，如果不存在，则`cookie`等于`None`

# objective-c - 为捏合手势设置 UIScrollView 的原点

> ID：13531150
> 
> 赞同：1
> 
> 时间：2012-11-23T14:33:25.507
> 
> 标签：objective-c, ios, uiview, uigesturerecognizer, uipinchgesturerecognizer

我正在创建一个滚动视图来显示一个非常大的视图，并且我需要滚动和缩放功能（就像图像查看器一样）。以下是我已采取的步骤：

1.  在界面生成器中，我将滚动查看器放入视图控制器。
2.  我在滚动查看器中添加了捏合手势识别器。
3.  我已将手势识别器的操作连接到处理手势事件的代码。
4.  加载视图控制器后，我将视图的原点更改为中心（`viewer`是我的滚动查看器）：`self.viewer.contentOffset = CGPointMake(384, 512);`
5.  在我的处理程序代码中，我这样处理事件：

（`startScale`一开始是1.0）

```
- (IBAction)handlePinch:(UIPinchGestureRecognizer *)sender {
    if(sender.state == UIGestureRecognizerStateEnded){
        startScale *= sender.scale;
    }else{
        float result = sender.scale * startScale;

        self.viewer.transform = CGAffineTransformMakeScale(result, result);
    }
} 
```

当我运行应用程序时，手势被识别并且缩放工作正常，但是，整个视图相对于`0,0`屏幕的点（左上角）进行缩放。我希望它相对于我正在应用手势的中间点进行缩放，就像放大照片的自然捏合手势一样。

我也尝试过设置`self.viewer.frame`原点，但没有任何改变。我搜索了这个问题并发现了这些：

[如何设置 UIView 的原点参考？](https://stackoverflow.com/questions/10012406/how-to-set-a-uiviews-origin-reference)（已经尝试过）

[https://stackoverflow.com/questions/13163279/pinch-punch-gestures-center](https://stackoverflow.com/questions/13163279/pinch-punch-gestures-center)（关于我的问题，但未答复）

[UIPinchGestureRecognizer 用于在 xcode 中缩放和平移图像](https://stackoverflow.com/questions/9954582/uipinchgesturerecognizer-for-zooming-and-panning-an-image-in-xcode)（看起来有点矫枉过正，对我来说太复杂了，我不确定这是否真的有助于我的情况）

如何使用滚动视图实现自然捏合，我做错了什么？

谢谢，坎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:36:50.753

好吧，问题的答案很简单：完全取消捏合手势。使用 UIScrollView 的好处是它在内部处理平移/缩放，您无需执行任何操作

编辑：为确保内容正确缩放，您将需要一个`UIView`（称为`contentView`或任何您想要的）放置所有内容的位置，然后在您的委托方法上`UIScrollView`执行此操作：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return contentView;
} 
```

这应该可以解决您的问题

编辑 2：还记得为您设置最小/最大缩放比例`UIScrollView`

# windows-8 - switch languages for globalization tests (win 8 / winjs)

> ID：13531154
> 
> 赞同：1
> 
> 时间：2012-11-23T14:33:43.073
> 
> 标签：windows-8, globalization, winjs

I am working on globalization for my Windows 8 app.

Currently i am using **resjson files**, but i can test these only in 1 language. i would like to switch languages.

my filesystem looks like this:

[http://www.jonathanantoine.com/wp-content/uploads/2012/03/resourceFolder.png](http://www.jonathanantoine.com/wp-content/uploads/2012/03/resourceFolder.png)

Please tell me how i can switch languages for testing issues?

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:26:38.973

转到控制面板，添加语言（在时钟、语言和区域下）。将您的所有语言添加到此列表中。要切换语言，请从此列表中更改语言的顺序。你的测试语言应该是最重要的。

# c# - How to effictively send custom email with MvcMailer?

> ID：13531158
> 
> 赞同：0
> 
> 时间：2012-11-23T14:34:03.030
> 
> 标签：c#, asp.net-mvc-3, mvcmailer

I need to send like 100 000 mails, so I need my process to be efficient.

We are using MvcMailer because the enables us to use Razor as the template engine.

My problem : the resulting email is in 2 part:

*   A common part for everyone
*   A custom part for each recipients

Because there is a custom part I have to create a new mail for everyone. But MvcMailer is running the view engine for every mail, so the common part is rendered 100 000, and that is not acceptable.

My only idea so far :

*   use the EmailBody method for rendering the common part at the very beginning of my process (in this common part there'll be something like "{USER-CONTENT}")

    string commonContent = mailer.EmailBody("Common");

*   Populate my mail body with only the user content and do

    myMail.Body = commonContent.Replace("{USER-CONTENT}",myMail.Body)

But it's still a dirty solution : creating my own template language inside Razor.

Do you have a better idea ?

# javascript - 打印 html div 而不会在两个页面之间破坏其内容

> ID：13531159
> 
> 赞同：3
> 
> 时间：2012-11-23T14:34:04.100
> 
> 标签：javascript, html, css

当我使用 window.print() 打印我的网页时，结果将是几页。我有一些不能在两页之间中断的 html div 元素。虽然，因为页面内容是动态创建的，我无法知道我的 div 何时会被破坏。

是否有任何 css 或 javascript 可以用来告诉特定的 div 不能在两个页面之间被破坏？

我看到了我可以在我的 div 周围使用的 css 规则“page-break-before”，但即使在可以避免的情况下也会导致分页（不必要地增加总打印页数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:59:24.263

你最好的选择是这个（但有兼容性问题）

```
.noBreak { page-break-inside: avoid;  } 
```

当前兼容性（[来源](https://developer.mozilla.org/en-US/docs/CSS/page-break-inside)）：

```
Chrome     Firefox (Gecko)    Internet Explorer    Opera     Safari (WebKit)
1.0        19.0 (19)          8.0                  7.0       1.3 (312) 
```

其他 SO 讨论：[page-break-inside 的替代方案：由于兼容性问题而避免](https://stackoverflow.com/questions/1246636/alternative-to-page-break-insideavoid-because-of-compatibility-issues)

[W3学校](http://www.w3schools.com/cssref/pr_print_pagebi.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:42:36.270

需要连接另一个 css 进行打印：

```
<link type="text/css" rel="stylesheet" media="print" href="PATH_TO_CSS" /> 
```

并编写仅用于打印的样式。

# ajax - How do I express in JQuery all class but not this one?

> ID：13531161
> 
> 赞同：1
> 
> 时间：2012-11-23T14:34:15.147
> 
> 标签：ajax, jquery

I want to disable right click on the page in general but on each image has a custom jquery dialog. Now the img id is passed to the event so while the menu is the same it will give different results per image.

so I want to bind my generic context menu for non images for all except img class="image"...

so how do I express $(!.image) ???

**EDIT** I looked up the not function. I am using it like this: However I still get general help even on photos.

```
<script>
  $(document).ready(function() {

  $('*').not('.public-photo').bind("contextmenu", function (event) {
      $("div.custom-menu").hide();
            event.preventDefault();
            $("<div class='custom-menu'>General Help</div>")
                .appendTo("body")
                .css({top: event.pageY + "px", left: event.pageX + "px"});
        });
        $('*').not(".public-photo").bind("click", function (event) {
             $("div.custom-menu").hide();
        });
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:36:18.237

To get every element excluding images, try this:

```
$('*:not(.image)').dialog({
    // dialog setup...
}); 
```

Or alternatively:

```
$('*').not('.image') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:35:52.873

```
$('.yourSelector').not('.image') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:36:23.563

You can do it using the [`:not()`](http://api.jquery.com/not-selector/) selector, like this:

```
$(':not(.image)') 
```

Or the [`.not()`](http://api.jquery.com/not/) method like this:

```
$('<your container>').not('.image') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T14:39:14.543

对于除 img 类图像之外的所有图像：

使用 CSS 而不是伪选择器：

```
$('*:not(img.image)') 
```

使用 jquery not 方法

```
$('*').not('img.image') 
```

# ruby-on-rails - Ruby on Rails，在 R 中打开数据库文件时出错

> ID：13531167
> 
> 赞同：0
> 
> 时间：2012-11-23T14:34:44.417
> 
> 标签：ruby-on-rails

我[将此示例用于文件上传器。](https://github.com/tors/jquery-fileupload-rails-paperclip-example) 保存文件后，我想用 R 分析它并将 r-plot 保存在数据库中。

那是我的upload.rb：

```
Paperclip::interpolates :array_type_folder do |attachment, style|
  attachment.instance.upload_content_type
end
  has_attached_file :upload,

                    :url =>"/system/Files/:array_type_folder/:basename.:extension",
                    :path =>":rails_root/public/system/Files/:array_type_folder/:basename.:extension"

  after_save :do_picture_analyse
def do_picture_analyse
   require 'rinruby'
    myr = RinRuby.new(echo=false)      
    myr.fileurl=upload.url(:original)
    puts "#{myr.fileurl}"
    myr.eval <<EOF
       s=read.table(fileurl)
       jpeg(filename=':rails_root/public/system/Files/Pictures/probe.jpeg',width=250, height=250)
       hist(s$V1) 
       dev.off()

    EOF
end 
```

由于这一行，我可以在数据库中看到文件的 url（仅供我测试）

```
 myr.fileurl=upload.url(:original)
    puts "#{myr.fileurl}" 
```

当我上传文件probe2.cel并用R分析它时出现这种错误：

```
/system/Files/11/probe2.cel?1353680334 (that is the result of puts "#{myr.fileurl}") 
Error in file(file, "rt") : could not open the connection
Error:
In file(file, "rt") :
   '/system/Files/11/probe2.cel?1353680334' no such file or directory
Error in hist(s$V1) : Object 's' not found 
```

它似乎无法连接到数据库并且找不到文件。我该如何处理？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:24:59.660

我认为您得到的错误是无法建立与文件的连接（不确定，因为它是 R）。

我看到两个可能的原因：

*   文件无法打开：我认为`url`这里是错误的，你应该使用文件路径
*   文件无法保存：我不确定您在`jpeg(filename='...')`

所以如果你写

```
myr.fileurl = upload.path
myr.new_filepath = "#{Rails.root}/public/system/Files/Pictures/probe.jpeg"

myr.eval <<EOF
   s=read.table(fileurl)
   jpeg(filename=new_filepath, width=250, height=250)
   hist(s$V1) 
   dev.off()
EOF 
```

那样有用吗？

希望这可以帮助。

# android - activity2启动后如何继续定时器（在activity1中启动）？

> ID：13531171
> 
> 赞同：1
> 
> 时间：2012-11-23T14:34:54.250
> 
> 标签：android

我在`activity1`. 而在定时器任务中，我长时间连续运行一些代码。然后我有时需要`activity2`像下面这样开始。

```
Intent intent = new Intent();
intent.setClass(Tomato.this, History.class);
startActivity(intent); 
```

但随后发生错误：

```
FATAL EXCEPTION: timer-1 
```

有人可以帮忙吗？

**更远：**

我再次测试，发现并不是每次都出现这个错误。现在我什至不能重复它。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:55:57.560

> “我长时间连续运行一些代码”

这通常是当您决定此代码应在服务中运行时。查看 Service SDK 文档，您将获得本地服务的示例。

如果计时器只是您需要访问跨活动的东西，您可以实现一个单例来保存它的一个实例。

# php - PHP getimagesize, Mysql fetch from DB and update field

> ID：13531173
> 
> 赞同：1
> 
> 时间：2012-11-23T14:35:11.067
> 
> 标签：php, mysql, sql-update, getimagesize

I've been a lot around this site the last couple of days, and found a lot of useful tips for a newbie to php as I am (this is my second day :) ) Therefore I'll sure hope you gurus can help me finishing this script.

What do I have: I have this table within my Mysql:

```
------------------------------![Sql Tabels][1]
---------------------- 
```

**Would should it do:** The script have to get some table rows where the "diemensions" field is emty `IS NULL` Now the script have to find the image size and spit it out in this format **width**x**height** the x between the width and height is important.

Where the image is not to be grabt, it should just pass by, and take the next one.

**When it's done:** It have grabt the image size and updated the "dimensions" field in the DB

**Sources for my code:** [How to determine the picture size, then selectively insert into the database? php](https://stackoverflow.com/questions/4183120/how-to-determine-the-picture-size-then-selectively-insert-into-the-database-ph)

[Update MySql Field (if field is not empty, go to next one)](https://stackoverflow.com/questions/11176410/update-mysql-field-if-field-is-not-empty-go-to-next-one)

[http://dk1.php.net/manual/en/function.getimagesize.php](http://dk1.php.net/manual/en/function.getimagesize.php)

**The PHP it self**

```
<pre><code>
<?php
    #  first we check, if gd is loaded and supports all needed imagetypes
    function gd_get_info() {
        if (extension_loaded('gd') and
            imagetypes() & IMG_PNG and
            imagetypes() & IMG_GIF and
            imagetypes() & IMG_JPG and
            imagetypes() & IMG_WBMP) {

            return true;
        } else {
            return false;
        }
    }

    $username = "";
    $password = "";
    $database = "";
    $db_hostname = "";

    mysql_connect("$db_hostname","$username","$password") or die(mysql_error());
    mysql_select_db("$database") or die(mysql_error());

    //check if the starting row variable was passed in the URL or not
    if (!isset($_GET['startrow']) or !is_numeric($_GET['startrow'])) {
      //we give the value of the starting row to 0 because nothing was found in URL
      $startrow = 0;
    //otherwise we take the value from the URL
    } else {
      $startrow = (int)$_GET['startrow'];
    }

    // Retrieve all the data from the "example" table
    $result = mysql_query("SELECT * FROM tx_gallery_previews WHERE dimensions IS     NULL     ORDER BY gallery_id ASC LIMIT $startrow, 10") or die(mysql_error());  

    // store the record of the "example" table into $row
    while($row = mysql_fetch_array($result)){
    //$row = mysql_fetch_array($result)) 

    $pid = $row['preview_id'];
    $gid = $row['gallery_id'];
    $imgfile = $row['preview_url'];
    $dimens = $row['dimensions'];

    /*
    echo $row['gallery_id'];
    echo $row['preview_url']. "\r\n<br />"; */
    extract($row);
    //print $pid. " ".$imgfile." ";
    //print "".$dimens."<br />";

    $blah = getimagesize("$imgfile");
    $type = $blah['mime'];
    $width = $blah[0];
    $height = $blah[1];

    if (isset($width)) {
    echo  $pid. " ".$imgfile." ".$width. "x".$height. "\n"."<br />";

    mysql_query("UPDATE into tx_gallery_previews         (preview_id,gallery_id,preview_url,dimensions) VALUES          ($pid,$gid,$imgfile,$width."x".$height)
        ON DUPLICATE KEY UPDATE dimensions=VALUES('"$width."x".$height"')");

    } 
         else{ echo "$pid <img src=\"$imgfile\" width=\"90\">Image not found"."<br />"; }

    }

    // close connection 
    mysql_close($connection);

    $prev = $startrow - 10;

    //only print a "Previous" link if a "Next" was clicked
    if ($prev >= 0)
        echo '<a href="'.$_SERVER['PHP_SELF'].'?startrow='.$prev.'">Previous</a> ';

    //now this is the link..
    echo '<a href="'.$_SERVER['PHP_SELF'].'?startrow='.($startrow+10).'">Next</a>';
    ?>
    </pre></code> 
```

**Seen but couldn't make it work** [http://dk1.php.net/manual/en/function.getimagesize.php](http://dk1.php.net/manual/en/function.getimagesize.php) Post by "james dot relyea at zifiniti dot com 07-Feb-2009 08:49" But seems to be the right ideer for my script.

XXXXXXXXXXXXXXXXX When you answer this topic, please explane wich part does what.

Best Regards

Joakim

# c# - C#中的数据模型验证

> ID：13531192
> 
> 赞同：0
> 
> 时间：2012-11-23T14:36:10.297
> 
> 标签：c#, .net, data-annotations, validation

我有 ac# 应用程序（实际上它运行到 Windows 服务或类似于 Windows 应用程序）。

从 XML 文件中接收一次服务/应用程序运行的配置。

这个 XML 文件实际上只是我在 XML 中序列化/反序列化的数据。这是我生成它的其他应用程序之一。

在运行业务代码之前，我想确保配置文件是有效的。

我的意思是“这个字符串不能为空”，“这个时间跨度必须有一个大于 XYZ 的值”，......

因此，只能通过查看字段内容进行验证（无需访问其他内容）。

它让我想起了很多我在 asp.Net MVC 中使用的数据注释，我想如果简单的 c# 代码有类似的东西，而不必加载整个 asp.net MVC dll。

我的另一个选择是实现一种方法“Validate()”，如果一个字段不正确，它会抛出异常，但我会有很多`if(String.IsNullOrEmpty()`其他的虚拟验证。

我不想为自己实现一个使用反射的大型验证器，仅用于小型配置文件验证有点矫枉过正。

生成这些文件的应用程序也可能有兴趣使用这些相同的验证。

编辑：我必须使用 .Net 3.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:42:06.287

这个问题看起来像下面的 SO 问题的重复。

[在 MVC 之外使用 ASP.Net MVC 数据注释](https://stackoverflow.com/questions/3089760/using-asp-net-mvc-data-annotation-outside-of-mvc)

编辑：正如您所说，ValidationContext 不可用，我建议您编写一些自定义代码，使用反射并为您评估属性上的所有属性。

有关如何完成的示例，请参阅此问题的答案。

[ASP.Net MVC 2 控制器的 TryValidate 不验证模型中的 List<> 项](https://stackoverflow.com/questions/4465432/asp-net-mvc-2-controllers-tryvalidate-doesnt-validate-the-list-items-within)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:43:24.853

我使用了 IDataErrorInfo（在 wpf 应用程序中将使用相同的类）。并使用自定义方法在这里检查每个可能的属性。

这是方法：

```
 public Boolean IsModelValid()
    {
        Boolean isValid = true;
        PropertyInfo[] properties = GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance);

        foreach (PropertyInfo p in properties)
        {
            if (!p.CanWrite || !p.CanRead)
            {
                continue;
            }
            if (this[p.Name] != null)
            {
                isValid = false;
            }
        }
        return isValid;
    } 
```

# angularjs - How to run AngularJS example

> ID：13531197
> 
> 赞同：6
> 
> 时间：2012-11-23T14:36:27.263
> 
> 标签：angularjs

I've done as described here: [http://docs.angularjs.org/tutorial/step_00](http://docs.angularjs.org/tutorial/step_00) but can't run the phonecat example as AngularJS. It runs like a bunch of html files. For example, the app/index-async.html page gives me following error in Chrome's console:

```
Uncaught Error: No module: myApp 
```

This file contains

```
angular.bootstrap(document, ['myApp']); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T06:08:19.440

The bootstrap part needs to be called after the element you're bootstrapping to is loaded. You can either put the bootstrap code at the end of your html, or you can use something like document ready from JQuery.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T09:56:58.037

我有同样的问题。使用 reguirejs 加载 Angular 时，**您必须从 html 中删除 ng-app 指令**并在调用后添加它，`angular.bootstrap(document, ['myApp'])`如下所示：

`$(html).addClass('ng-app');`

检查这个种子项目：[https](https://github.com/tnajdek/angular-requirejs-seed) ://github.com/tnajdek/angular-requirejs-seed特别是 index.html 和 app/js/main.js

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-18T21:14:39.433

确保您的 Web 服务器正在运行。

如果您正在运行 node.js：
1\. 运行`node scripts\web-server.js`以启动 Web 服务器
2\. 在您的浏览器中，导航到`http://localhost:8000/app/index.html`

如果您正在运行其他一些 http 服务器：（我在您列出的 AngularJS 教程中使用了 WAMP）：
1\. 确保 /angular-phonecat 存储库已克隆到您的 wamp/www 文件夹中。
2\. 在浏览器中导航到 http://localhost:[port-number]/angular-phonecat/app。

**提示：**
使用 WINDOWS 命令​​行更改目录 -

```
cd /d c:\wamp\www 
```

使用 GIT BASH 更改目录 -

```
$ cd /c/wamp/www 
```

**附加说明：** 在 Git Bash 中，要显示您当前所在的目录，请使用`$ pwd`

# html - Html：一个空的 p 元素到底是什么意思（就渲染而言）？

> ID：13531200
> 
> 赞同：1
> 
> 时间：2012-11-23T14:36:47.303
> 
> 标签：html

空的 p 元素是什么意思？为什么渲染成现在的样子？

```
<p>Something...</p>
<p></p>
<p>Something else...</p> 
```

`<p></p>`: Chrome 会忽略它 - 但它声称给它一个`-webkit-margin-after:1em`，但它以某种方式与以下段落的文本重叠（参见开发者模式）

`<p style='margin-top:2em'>`: Chrome 显示上边距

`<p style='font-size:2em'>`: Chrome 显示它，即使它是空的？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:35:50.157

根据 HTML 4.01 规范，空[`p`元素](http://www.w3.org/TR/REC-html40/struct/text.html#edef-P)应该被浏览器忽略，作者不应该使用它们。因此，询问浏览器对此做了什么，就是询问它们在处理不应使用的构造时如何行为不端（未能遵循建议）。需要针对每个浏览器和版本分别进行实验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:53:32.037

在 chrome 和其他浏览器中测试。但是没有发现任何差异。如果没有内容

. 该标签未显示在任何浏览器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:05:06.727

引用[developer.mozilla.org/en-US/docs/CSS/margin_collapsing](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing) [感谢 Llepwryd 的评论，它提供了急需的信息]

> 空块：如果没有边框、内边距、内联内容、高度或最小高度将块的上边距与其下边距分开，则其上边距和下边距折叠。

所以：

`<p></p>`: 没有内容或高度，上下边距折叠成 1em。开发人员模式显示 2em 的边距，与下一段的文本重叠 - 我猜这是一个错误？

`<p style='margin-top:2em'>`: 同上，除了边距折叠到 2em。

`<p style='font-size:2em'>`：一些猜测 - 边距为 1em，*其中边距`em`等于段落的字体大小*，因此 1em 的边距*等于*2em 的常规文本。现在同上，折叠边距，第一段和第三段之间有 2em 的间距。

# javascript - jQuery(window) Ajax 导航

> ID：13531203
> 
> 赞同：1
> 
> 时间：2012-11-23T14:37:05.403
> 
> 标签：javascript, jquery, ajax

打开页面时，我需要调整图像大小。在 ajax 导航之前，我用函数`jQuery(window)`表示我想在进入新页面时调整函数大小。但是现在使用 ajax navigationIi 只需加载我页面的一部分，因此`jQuery(window)`什么也不返回。

```
// start page KO PART
jQuery(window).load(function(){ 
    redimensionnement(); 
}); 
// KO PART END

// resize window OK --
jQuery(window).resize(function(){ 
    redimensionnement(); 
}); 
```

你有什么想法可以解决我的问题吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:50:52.420

在您的 Ajax 请求完成时加载图像，并且在加载图像时调整图像大小。这是示例代码，可以帮助您如何跟踪加载的图像。

```
// create an image object
 objImage = new Image();

 // set what happens once the image has loaded 
objImage.onLoad=imagesLoaded(objImage);

 // preload the image file
 objImage.src='images/image1n.gif';

 // function invoked on image loaded
 function imagesLoaded(obj)
 {    
    var w = obj.width();
    var h = obj.height();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:16:19.610

我认为您需要将其绑定在 onload 中；

```
// start page KO PART
jQuery(window).load(function(){ 
    redimensionnement(); 
    // resize window OK --
        jQuery(window).resize(function(){ 
    redimensionnement(); 
    });
}); 
// KO PART END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T01:16:10.073

我找到了解决方案！

所以，当我们进入我的图像页面时，为了调整我的图像大小，我测试它是否像这样在我的 ajax 循环中加载：

```
 //ajax loop for full ajax navigation
   $.ajax({
   url: link,
   dataType:'html',
   success: function(data){

        //update of my contain
        var contenu = $(data).find("#contenu");
        $('#contenu').html(contenu).fadeIn('200');

        //TEST OF LOAD IMAGE, if yes, start my resize fonction
        $("#map-carte-1").load(function(){
       redimensionnement();
    });

}); 
```

# regex - How to Match Paragraphs in Text with regx

> ID：13531204
> 
> 赞同：2
> 
> 时间：2012-11-23T14:37:07.433
> 
> 标签：regex, extract, match, paragraph

I need to extract all paragraphs from a text using regxp, so I figure to match first paragraph and iterate through all others, the problem I'm facing is I'm unable to make regxp to successfully match first paragraph, I would be forever grateful for help!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T14:41:08.970

段落是一篇文章的不同部分，由换行、缩进或编号表示

所以，你可以这样做

```
(\n|^).*?(?=\n|$) 
```

将此`regex`与单行选项一起使用

# cassandra - Astyanax - 尝试连接到 cassandra 时出现 TokenRangeOfflineException

> ID：13531205
> 
> 赞同：0
> 
> 时间：2012-11-23T14:37:12.043
> 
> 标签：cassandra, playorm, astyanax

这就是我通过 Astyanax 连接到 Cassandra 的方式：

```
Builder builder = new AstyanaxContext.Builder()
        .forCluster(clusterName)
        .forKeyspace(keyspace2)
        .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
            .setDiscoveryType(NodeDiscoveryType.RING_DESCRIBE)
        )
        .withConnectionPoolConfiguration(new ConnectionPoolConfigurationImpl("MyConnectionPool")
            .setMaxConnsPerHost(2)
            .setInitConnsPerHost(2)
            .setSeeds("localhost,localhost")
        )
        .withConnectionPoolMonitor(new CountingConnectionPoolMonitor());
            AstyanaxConfigurationImpl config = new AstyanaxConfigurationImpl();
        config.setDefaultWriteConsistencyLevel(ConsistencyLevel.CL_QUORUM);
        config.setDefaultReadConsistencyLevel(ConsistencyLevel.CL_QUORUM);
        builder = builder.withAstyanaxConfiguration(config); 
```

如果在种子中我只输入“localhost”，它就可以正常工作。如果我输入“localhost，localhost”或“localhost”，它会给我下面的异常。我会错过什么？问题不在于主机，地址是正确的......如果我使用 CL_Quorum，是否有任何我应该注意的配置？

```
java.lang.RuntimeException: com.netflix.astyanax.connectionpool.exceptions.TokenRangeOfflineException: TokenRangeOfflineException: [host=localhost(127.0.0.1):9160, latency=10(10), attempts=1] UnavailableException()
    at com.alvazan.orm.layer9z.spi.db.cassandra.CursorKeysToRows.execute(CursorKeysToRows.java:157)
    at com.alvazan.orm.layer9z.spi.db.cassandra.CursorKeysToRows.loadCache(CursorKeysToRows.java:100)
    at com.alvazan.orm.layer9z.spi.db.cassandra.CursorKeysToRows.nextImpl(CursorKeysToRows.java:65)
    at com.alvazan.orm.layer0.base.CursorRow.nextImpl(CursorRow.java:33)
    at com.alvazan.orm.api.z8spi.iter.AbstractCursor.next(AbstractCursor.java:10)
    at com.alvazan.orm.layer0.base.BaseEntityManagerImpl.find(BaseEntityManagerImpl.java:132)
    at com.alvazan.orm.layer0.base.BaseEntityManagerImpl.saveMetaData(BaseEntityManagerImpl.java:235)
    at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.rescan(BaseEntityManagerFactoryImpl.java:102)
    at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.setup(BaseEntityManagerFactoryImpl.java:131)
    at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstanceImpl(BootstrapImpl.java:64)
    at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstance(BootstrapImpl.java:35)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:57)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:52)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:45)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:24)
    at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.init(PlayOrmConfiguration.java:39)
    at com.s1mbi0se.dmp.da.dao.TestUserDao.testFindAllUsers(TestUserDao.java:73)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: com.netflix.astyanax.connectionpool.exceptions.TokenRangeOfflineException: TokenRangeOfflineException: [host=localhost(127.0.0.1):9160, latency=10(10), attempts=1] UnavailableException()
    at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:165)
    at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)
    at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:27)
    at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$1.execute(ThriftSyncConnectionFactoryImpl.java:131)
    at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:52)
    at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:229)
    at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4.execute(ThriftColumnFamilyQueryImpl.java:457)
    at com.alvazan.orm.layer9z.spi.db.cassandra.CursorKeysToRows.execute(CursorKeysToRows.java:155)
    ... 39 more
Caused by: UnavailableException()
    at org.apache.cassandra.thrift.Cassandra$multiget_slice_result.read(Cassandra.java:9722)
    at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_multiget_slice(Cassandra.java:613)
    at org.apache.cassandra.thrift.Cassandra$Client.multiget_slice(Cassandra.java:597)
    at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:463)
    at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:460)
    at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:55)
    ... 45 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:20:18.200

我认为这与另一个问题有关。您只想使用 localhost 或种子列表。我们基本上会做一些检测，如果您只使用一个节点，我们会在使用 localhost 或写入和读取失败时使用 CL_ONE 来保持一致性。我们为 2 个或更多种子执行 CL_QUOROM。您是否需要我们对其进行修改以支持单个远程节点？

谢谢，院长

# r - 在 R 中合并 4 个矩阵

> ID：13531206
> 
> 赞同：0
> 
> 时间：2012-11-23T14:37:15.533
> 
> 标签：r

我在 R 中有 4 个矩阵（Counts_CRep1、Counts_CRep2、Counts_NRep1、Counts_NRep2），我想合并为 1。

矩阵如下所示：

```
 [,1]
ENSG00000000003     0
ENSG00000000005     0
ENSG00000000419     0
ENSG00000000457     0 
```

结果我想有类似的东西

```
 Counts_CRep1 Counts_CRep2 Counts_NRep1 Counts_NRep2 
ENSG00000000003           0           0            0            0
ENSG00000000005           0           0            0            0
ENSG00000000419           0           0            0            0
ENSG00000000457           0           0            0            0 
```

......

关于我该怎么做的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:41:15.973

你可以使用`cbind`

```
cbind(Counts_CRep1, Counts_CRep2, Counts_NRep1, Counts_NRep2) 
```

或者`data.frame`

```
data.frame(Counts_CRep1, Counts_CRep2, Counts_NRep1, Counts_NRep2) 
```

使用后一种技术，对象的名称将自动用作列名（除非列名存在于对象中）。

# iphone - 每当 TextField 内容更改时，我都想获取内容（NSString）

> ID：13531207
> 
> 赞同：0
> 
> 时间：2012-11-23T14:37:19.023
> 
> 标签：iphone, textfield

```
- ( BOOL ) textField: ( UITextField * )textField shouldChangeCharactersInRange: ( NSRange )range replacementString: ( NSString * )string {

NSString *strCurrent;
if ( range.length > 0 ) {   // deleting
    int iNumberOfDeletedCharacter = [ string length ];
    int iNumberOfRestCharacter = [ [ textField text ] length ] - iNumberOfDeletedCharacter;
    strCurrent = [ [ textField text ] substringToIndex: iNumberOfRestCharacter - 1 ];
}
else {  // adding
    strCurrent = [ [ textField text ] stringByAppendingString: string ];
}

MyNSLog( @"%@", strCurrent ); 
```

}

此代码在输入 2 字节语言的字符时存在删除部分的问题。你知道简单的方法吗？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:50:47.503

从您的问题中不清楚您要达到的目标。如果要在编辑后计算结果字符串：

```
NSString *editedText = [textField.text stringByReplacingCharactersInRange:range withString:string]; 
```

# java - 需要对低内存系统上的 Runtime.getRuntime.exec() 进行故障排除的输入？

> ID：13531211
> 
> 赞同：0
> 
> 时间：2012-11-23T14:37:53.377
> 
> 标签：java, linux, tomcat6

在我们的 Web 应用程序中，我们正在使用 Process myProcess = Runtime.getRuntime.exec(cmd)。它目前使用托管在 Ubuntu Linux 上的 Tomcat 进行部署。

这个应用程序在我的开发机器上运行良好（Core2 duo ,2GB RAM OS:UBUNTU 11.04）。

但是，当我在虚拟服务器（1GB RAM，Xeon 处理器）上托管相同内容时，Runtime.getRuntime.exec(cmd) 调用失败。它无法创建子进程。

创建了相同的子流程，我们在我的开发机器上得到了预期的输出。

在应用程序中，我们调用部署在 tomcat 中的 servlet 中的 java 类执行良好，输出也很好。下面是相同的代码片段。

```
from the servlet
uploadservlet.java
+-----------+   
CalculateDuration dur=new CalculateDuration();
Map<String, Integer> durationmap=dur.conversion(al);
+-------------+

Caclulateduration.java
+------------------+
{
     conversion(ArrayList<String> b)
     {

      StringBuilder sb = new StringBuilder();
          sb.append( "hello.o"); /* Name of the sample executable */         
       ...

          Process p = Runtime.getRuntime().exec(sb.toString() ); //struck at this line.subprocess not created on my vps system 

      ...

          +------------------+ 
```

独立 Caclulated.java 在虚拟服务器上运行。

这个问题可能是因为虚拟服务器上的物理内存不足（导致 getRunTime 失败）还是我在这里遗漏了一些东西。任何工具、命令或方法都可以根除此问题。

感谢您的意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:24:40.083

Java `Runtime.exec()`1.7 之前的版本`fork()/exec()`用于生成进程。分叉意味着复制当前进程，作为一个 Java 应用程序可能是巨大的。为了能够 fork() 应用程序，您需要有足够的可用**虚拟**地址空间。多少足够取决于您的操作系统的内存过量使用设置。

为了避免所有这些麻烦，Java 1.7 (Sun/OpenJDK/...) 支持`vfork()/exec()`和`posix_spawn()`. `posix_spawn()`直接产生一个新进程，同时`vfork()`在父子之间共享内存，直到即将到来`execve()`，所以它们不应该需要太多的虚拟地址空间来工作。

# ios - SKPSMTP消息库

> ID：13531218
> 
> 赞同：0
> 
> 时间：2012-11-23T14:38:32.193
> 
> 标签：ios, xcode, skpsmtpmessage

当我导入 SKPSMTPMessage 库时，我收到了您在照片中看到的错误：

![在此处输入图像描述](../Images/f3b4dfd3ac64c8e30e15f00db7a77deb.png)

关键是我不知道这意味着什么。我做了一个干净的，我已经添加了编译源下的文件，我已经添加了 CFNetwork 框架。知道是什么意思吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:46:46.533

您会收到各种“重复符号错误”，因为在您包含的文件（“ `Base64Transcoder.m`”）和您包含的 SDK（DropBox SDK）中都定义了相同的符号。所以编译器不知道你在运行时真正想使用哪个符号。

我建议至少暂时从您的项目中 *删除*“ ”，以查看是否所有这些重复符号错误都消失了。`Base64Transcoder.m`

# html - IE7 - 新行上的浮动元素

> ID：13531221
> 
> 赞同：1
> 
> 时间：2012-11-23T14:38:49.947
> 
> 标签：html, css, layout, internet-explorer-7, css-float

（很抱歉，这可能是这个错误的第 10 个版本，但我已经用谷歌搜索了这个问题的各种形式，并尝试了各种版本的建议修复，但到目前为止我还没有得到有效的修复。）

我正在尝试将 2 个按钮浮动到标题栏的右侧。它们必须浮动，因为一个或两个都不能显示（它们是在页面上重新显示隐藏元素的按钮）

这是将所需布局与 IE7 版本进行比较的图像。

[Skydrive 上的小 JPG 图像](http://sdrv.ms/Ux1lug)

如您所见，两个按钮（以及仅包含空格的填充 div）都位于标题栏下方，而不是在标题栏内部。

这是页面...

```
 <div class="divHeaderBar">
                Welcome To James Hay Online
                <div id="filler" style="display: inline-block; *display: inline; float: right; width: 20px; height: 10px; z-index: 60;"> </div>
                <div id="divShowApplyOnline" class="" style="display: inline-block; *display: inline; float: right; margin-top: 5px; height: 10px; width: 20px; z-index: 60; cursor: pointer;"
                    onclick="javascript:ShowApplyOnline()" runat="server">
                    <img title="Show the Apply Online section" src="/portal/images/details_open.png"
                    alt="Show the Apply Online section" />
                </div>
                <div id="divShowMainFeature" class="" style="display: inline-block; *display: inline; float: right; margin-top: 5px; height: 10px; width: 20px; z-index: 60; cursor: pointer;"
                    onclick="javascript:ShowMainFeature()" runat="server">
                    <img title="Show the News Feature section" src="/portal/images/details_open.png"
                    alt="Show the News Feature section" />
                </div>
            </div> 
```

这是样式表中的一点样式...

```
.divHeaderBar {
   background-color:       #008DA9;
   color:                  White;
   font-weight:            bold;
   font-size:              10pt;
   line-height:            30px;
   text-indent:            10px;
} 
```

我试过摆弄 position: absolute 和 right: 0，我也试过使用包含 div 和 float:left 但到目前为止我试过的都没有成功。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T14:40:49.143

切换标记位置应该有助于：

```
 <div class="divHeaderBar">
        <div id="filler" style="display: inline-block; *display: inline; float: right; width: 20px; height: 10px; z-index: 60;"> </div>
        <div id="divShowApplyOnline" class="" style="display: inline-block; *display: inline; float: right; margin-top: 5px; height: 10px; width: 20px; z-index: 60; cursor: pointer;"
            onclick="javascript:ShowApplyOnline()" runat="server">
            <img title="Show the Apply Online section" src="/portal/images/details_open.png"
            alt="Show the Apply Online section" />
        </div>
        <div id="divShowMainFeature" class="" style="display: inline-block; *display: inline; float: right; margin-top: 5px; height: 10px; width: 20px; z-index: 60; cursor: pointer;"
            onclick="javascript:ShowMainFeature()" runat="server">
            <img title="Show the News Feature section" src="/portal/images/details_open.png"
            alt="Show the News Feature section" />
        </div>
        Welcome To James Hay Online
    </div> 
```

正确的浮动元素首先出现 - 然后是其他所有元素。这样，IE7 应该正确浮动它们。

**提示：**：考虑将您的 HTML、CSS 和 Javascript 分开。内联 CSS 和内联事件处理程序不是一个好主意。关注点分离将提高可读性和可维护性。

# salesforce - 客户门户用户可以在 salesforce 中创建记录吗？

> ID：13531229
> 
> 赞同：0
> 
> 时间：2012-11-23T14:39:28.560
> 
> 标签：salesforce

我想通过客户门户为标准 sobject 帐户的子对象创建一个 sobject 记录。但是，当我单击“新建”时，标准编辑页面会显示在客户门户网站上，但是当我单击保存时输入不同的字段值后，只需在下面给我一条消息：

**权限不足 您没有执行您请求的操作所需的访问级别。如果需要访问，请联系记录的所有者或您的管理员。**

我应该怎么做才能从客户门户创建记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:06:47.837

您必须调整自定义对象权限。如果您有管理员配置文件，请执行以下操作：

*   转到“设置”->“管理用户”->“配置文件”
*   选择您要编辑的个人资料
*   在下一页单击“编辑”按钮并向下滚动到“自定义对象权限”
*   为了创建新的对象记录，您必须具有“读取”和“创建”访问权限
*   如果不是这种情况 - 选中该复选框并单击“保存”按钮

# mysql - 如何将 TEXT 类型的列转换为 VARCHAR？

> ID：13531230
> 
> 赞同：30
> 
> 时间：2012-11-23T14:39:29.700
> 
> 标签：mysql

`TEXT`有没有办法`VARCHAR(X)`轻松转换包含数据的列？列中没有任何现有记录的长度超过`X`。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-23T14:41:06.397

是肯定的

`ALTER TABLE table_name MODIFY column_name VARCHAR(X)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T14:41:43.470

对于 MS SQL：

```
ALTER TABLE table_name
ALTER COLUMN column_name datatype(value) 
```

对于 MySQL

```
ALTER TABLE table_name
MODIFY column_name datatype(value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-20T09:18:16.357

我用它来大规模更改我的数据库。执行它，然后复制所有行，粘贴到查询字段中，删除标题并运行。

更改 DB=itsd 中所有表的 ENGINE、CHARSET 和 COLLATION：

```
SELECT CONCAT("ALTER TABLE ", TABLE_SCHEMA, '.', TABLE_NAME," ENGINE=INNODB, 
 CHARSET=utf8, COLLATE=utf8_general_ci;") AS ExecuteTheString
 FROM INFORMATION_SCHEMA.TABLES 
 WHERE TABLE_SCHEMA="itsd"
    AND TABLE_TYPE="BASE TABLE"; 
```

转换 DB=itsd 中所有表的 CHARSET 和 COLLATION：

```
SELECT CONCAT("ALTER TABLE ", TABLE_SCHEMA, '.', TABLE_NAME," CONVERT TO 
 CHARACTER SET utf8;") AS ExecuteTheString
 FROM INFORMATION_SCHEMA.TABLES
 WHERE TABLE_SCHEMA="itsd"
    AND TABLE_TYPE="BASE TABLE"; 
```

将 DB=itsd 中所有表的所有 TEXT 字段更改为 VARCHAR(255)：

```
 SELECT CONCAT('ALTER TABLE ', table_schema, '.', table_name, ' MODIFY COLUMN ', 
 column_name, ' VARCHAR(255);')
 FROM information_schema.columns
 WHERE TABLE_SCHEMA = 'itsd'
    AND DATA_TYPE = 'text' 
    AND TABLE_TYPE="BASE TABLE"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-17T07:22:08.310

对于 postgres

```
ALTER TABLE "table_name" ALTER COLUMN "column_name" TYPE VARCHAR(x); 
```

# mercurial - Mercurial 中最后一个命令的回滚

> ID：13531239
> 
> 赞同：1
> 
> 时间：2012-11-23T14:39:57.883
> 
> 标签：mercurial

我刚跑：

```
hg add .* 
```

匹配所有`../something`文件，这是我当然不想要的！撤消此命令的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:21:39.377

不完全是我所追求的，但让我的生活更轻松：

```
hg forget "set:added()" 
```

这将取消标记工作存储库中添加的所有文件。显然，我还取消了前面命令中添加的所有文件的标记，所以正如我所说，这不完全是我所追求的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T22:03:49.060

如果您有很多不想重新提交的未提交添加，您可以使用一个 mercurial 文件集，该文件集仅*在父目录的子目录中*挑选出待处理的添加（在错误的同一目录中使用它）命令已发出）：

```
hg forget "set:../** and added()" 
```

Mercurial 不记得您用来引用文件的路径，因此这将忘记刚刚添加的所有文件（在父目录下）；但是如果您深入一个大型存储库，它将限制您丢弃的内容的范围。

您的问题与[最近的问题类似，](https://stackoverflow.com/q/13510787/699305)但在这里我们对错误添加的文件名有一个额外的条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T17:26:32.463

没有内置方法可以撤消`hg add`命令。

潜在的问题是`hg add`操纵所谓的“dirstate”（“工作目录状态”的缩写。这是存储未决更改（例如计划提交的文件）的位置——并且该存储是未版本化的。

不过，有一个扩展可以帮助您：[hg-multiundo](https://bitbucket.org/hstuart/hg-multiundo)将备份 Mercurial 触及的所有文件，包括 dirstate。这意味着您可以使用它来撤消类似`hg add`或什至`hg revert --no-backup`.

# c++ - 使用 native_handle() + pthread_cancel() 取消 std::thread

> ID：13531241
> 
> 赞同：7
> 
> 时间：2012-11-23T14:40:03.147
> 
> 标签：c++, gcc, c++11, pthreads, stdthread

我正在将 pthreads 的先前线程包装器转换为 std::thread。但是 c++11 没有任何方法可以取消线程。尽管如此，我还是需要取消线程，因为它们可能在外部库中执行非常冗长的任务。

我正在考虑在我的平台上使用为我提供 pthread_id 的 native_handle。我在 Linux（Ubuntu 12.10）中使用 gcc 4.7。这个想法是：

```
#include <iostream>
#include <thread>
#include <chrono>

using namespace std;

int main(int argc, char **argv) {
    cout << "Hello, world!" << endl;

    auto lambda = []() {
        cout << "ID: "<<pthread_self() <<endl;
        while (true) {
            cout << "Hello" << endl;
            this_thread::sleep_for(chrono::seconds(2));
        }
    };

    pthread_t id;
    {
        std::thread th(lambda);

        this_thread::sleep_for(chrono::seconds(1));

        id = th.native_handle();
        cout << id << endl;
        th.detach();
    }
    cout << "cancelling ID: "<< id << endl;

    pthread_cancel(id);

    cout << "cancelled: "<< id << endl;

    return 0;
} 
```

线程被 pthreads 抛出的异常取消。

我的问题是：

这种方法会有什么问题（除了不便携）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T11:34:22.427

不，我认为您不会遇到以下问题：

*   不便携
*   必须仔细编程 _very_very_ 被取消线程的所有对象都被销毁......

For example, the Standard says that when a thread ends variables will be destroyed. If you cancel a thread this will be much harder for the compiler, if not impossible.

I would, therefore recommend *not* to cancel a thread if you can somehow avoid it. Write a standard polling-loop, use a condition variable, listen on a signal to interrupt reads and so on -- and end the thread regularly.

# python - Python：捕获特定异常

> ID：13531247
> 
> 赞同：76
> 
> 时间：2012-11-23T14:40:19.060
> 
> 标签：python, exception

我想捕捉一个特定的`ValueError`，而不是任何一个`ValueError`。
我试过这样的事情：

```
try: maquina['WPF'] = macdat(ibus, id, 'WPF')
except: ValueError, 'For STRING = ’WPF’, this machine is not a wind machine.':
    pass 
```

但它引发了一个`SyntaxError: can't assign to literal.`
然后我尝试了：

```
try: maquina['WPF'] = macdat(ibus, id, 'WPF')
except ValueError, e:
    if e != 'For STRING = ’WPF’, this machine is not a wind machine.':
        raise ValueError, e 
```

但它引发了异常，即使它是我想要避免的异常。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-23T14:43:51.990

in `except ValueError,e`,`e`是异常的一个实例，而不是字符串。因此，当您测试是否`e`不等于特定字符串时，该测试始终为 False。尝试：

```
if str(e) != "..." 
```

反而。

例子：

```
def catch(msg):
    try:
        raise ValueError(msg)
    except ValueError as e:  # as e syntax added in ~python2.5
        if str(e) != "foo":
            raise
        else:
            print("caught!")

catch("foo")
catch("bar") 
```

通常，如果可以提供帮助，您并不想依赖错误消息——它有点太脆弱了。如果您可以控制 callable `macdat`，而不是引发`ValueError`in `macdat`，您可以引发自定义异常，该异常继承自`ValueError`：

```
class MyValueError(ValueError): pass 
```

然后，您只能抓住`MyValueError`并让其他`ValueError`人继续前进，以被其他人（或不被其他人）抓住。Simple`except ValueError`仍然会捕获这种类型的异常，因此它应该在其他代码中表现相同，这些代码也可能从这个函数中捕获 ValueErrors。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T14:47:50.883

最后一个的方法是正确的（但是打印 repr(e) 看看为什么它不起作用）。

但是，如果您希望异常信息正确，则不应引发新异常（就像您现在所做的那样），而应引发相同的异常。否则，更多捕获它的代码，或者如果没有捕获到错误消息，会将您的代码显示为源代码，而它应该是原始源代码。

为此，请使用不带参数的 raise（当然，在 except 块内，否则没有“当前”异常）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-17T16:04:19.850

您可以使用：`type(e)`并`e.args`为此。它返回一个元组，将元组与您自己的匹配。

# php - 回显一个带有 onclick 窗口重定向的按钮，其中包含一个变量

> ID：13531248
> 
> 赞同：0
> 
> 时间：2012-11-23T14:40:22.960
> 
> 标签：php, html

我正在做的是永远找到文件，我正在回显一个表格行，其中包含文件的名称、大小和删除它的按钮。删除按钮通过 GET 将文件名发送到 php 文件，但我很难在回显中获取文件名变量。请帮忙。

代码：

```
foreach(glob("*.*") as $files){
    echo '<tr><td>'
     . $files
     . "</td><td>"
     . filesize($files)
     . "Kb"
     . "</td><td>"
     . '<input type="button"  value="Delete" 
               onClick=\"window.location=\http://scripting.maxtstuff.com/logintest/delete.php/?df=true&ftdn=$files />"'
     . "</td></tr>";
} 
```

我试图实现的结果是一个重定向到[http://scripting.maxtstuff.com/logintest/delete.php/?df=true&ftdn=test.html](http://scripting.maxtstuff.com/logintest/delete.php/?df=true&ftdn=test.html)的按钮， 然后我的 php 文件将删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:46:48.407

Try `onclick="window.location.href=\'http://scripting.maxtstuff.com/logintest/delete.php/?df=true&ftdn='.$files.'\';"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:54:21.443

这是你的问题：`'....df=true&ftdn=$files />"'`。PHP 不解析由单引号分隔的字符串，仅此而已。您可以通过使用运算符连接来解决*此*问题`.`：

```
'...df=true&ftdn='.$files.'" />'; 
```

或者通过使用双引号分隔您的字符串：

```
"...df=true&ftdn=$files\" />"; 
```

请注意，在最后一种情况下，您必须转义字符串中的所有双引号，或者用单引号替换它们（HTML 也接受这些）。

# google-app-engine - JPA + 谷歌 SQL + GWT + Eclipse

> ID：13531256
> 
> 赞同：2
> 
> 时间：2012-11-23T14:41:00.577
> 
> 标签：google-app-engine, gwt, jpa-2.0, google-cloud-sql

我正在尝试运行一个简单的项目。我正在努力解决一些问题。我在数据库实例中创建了一个简单的表。然后，按照谷歌教程，我在 Eclipse 中设置了我的项目。

我在从 localhost 运行时引发此错误：

```
[EL Severe]: 2012-11-23 14:23:16.915--ServerSession(1241461653)--Exception [EclipseLink-0] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345):     org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-60] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The method [set] or [get] is not defined in the object [com.shared.Main].
Internal Exception: java.lang.NoSuchMethodException: com.shared.Main.get(java.lang.String)
Mapping: org.eclipse.persistence.mappings.DirectToFieldMapping[id-->main.ID]
Descriptor: RelationalDescriptor(com.shared.Main --> [DatabaseTable(main)])

Exception [EclipseLink-60] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The method [set] or [get] is not defined in the object [com.shared.Main].
Internal Exception: java.lang.NoSuchMethodException: com.shared.Main.get(java.lang.String)
Mapping: org.eclipse.persistence.mappings.DirectToFieldMapping[name-->main.NAME]
Descriptor: RelationalDescriptor(com.shared.Main --> [DatabaseTable(main)]) 
```

似乎eclipse链接找不到我的对象的getter和setter...有什么线索吗？我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">

    <persistence-unit name="transactions-optional" transaction-type="RESOURCE_LOCAL">
        <provider></provider>
        <mapping-file>META-INF/eclipselink-orm.xml</mapping-file>
        <properties>
            <property name="datanucleus.NontransactionalRead" value="true"/>
            <property name="datanucleus.NontransactionalWrite" value="true"/>
            <property name="datanucleus.ConnectionURL" value="appengine"/>
            <property name="javax.persistence.jdbc.driver" value="com.google.appengine.api.rdbms.AppEngineDriver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:google:rdbms://myinstance/test_jpa"/>
            <property name="javax.persistence.jdbc.user" value="myuser"/>
            <property name="javax.persistence.jdbc.password" value="mypassword"/>
        </properties>
    </persistence-unit>
</persistence> 
```

我的eclipse-orm.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings version="2.4" xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.eclipse.org/eclipselink/xsds/persistence/orm http://www.eclipse.org/eclipselink/xsds/eclipselink_orm_2_4.xsd">
    <entity class="com.shared.Main" access="VIRTUAL">
        <attributes>
            <id name="id" attribute-type="int">
                <generated-value strategy="AUTO"/>
            </id>
            <basic name="name" attribute-type="String">
            </basic>
        </attributes>
    </entity>
</entity-mappings> 
```

我的对象：

```
package com.shared;

import java.io.Serializable;
import javax.persistence.*;

/**
 * The persistent class for the main database table.
 * 
 */
@Entity
@Table(name="main")
public class Main implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(unique=true, nullable=false)
    private int id;

    @Column(length=50)
    private String name;

    public Main() {
    }

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:10:50.433

您的共享文件夹（也）存在于客户端上。客户对数据库一无所知。SQL 等。从共享到服务器中删除所有数据库关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:46:57.750

删除persistance.xml中orm文件的链接，问题已解决：

```
<mapping-file>META-INF/eclipselink-orm.xml</mapping-file> 
```

并将直接映射添加到类

```
<class>org.my.package.MyClass</class> 
```

# android - 同一个数据库的多个 DatabaseHelper

> ID：13531257
> 
> 赞同：1
> 
> 时间：2012-11-23T14:41:01.777
> 
> 标签：android, database, multithreading

也许我遗漏了一些东西，但我的问题是：我可以使用自己的 DatabaseHelper 实例从代码的不同点访问数据库吗？还是拥有一个可以从任何地方（线程、活动等）访问的唯一全局静态 DatabaseHelper 更好？在这种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:39:59.950

如果您使用多个线程，最好有一个实例，因为线程同步将自动应用。该单个实例是单例还是包装在 a`ContentProvider`中取决于您。

# clock - 在不改变占空比的情况下将时钟除以 3？

> ID：13531260
> 
> 赞同：2
> 
> 时间：2012-11-23T14:41:08.517
> 
> 标签：clock, verilog, flip-flop

我搜索了很多，但我没有找到一个好的解决方案。大多数答案仅在占空比为 50% 时才有效，但我正在寻找一种适用于占空比为 40% 等时钟的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:12:07.750

## 同步

您会发现使用同步设计很难做到这一点，因为触发器只能在时钟边沿上切换。

典型的除以 3 电路将：

1.  使用正时钟边沿并具有 33% 的输出占空比

2.  如果输入为 50%，则使用上升沿和下降沿并具有 50% 的占空比

不幸的是，对于一般输入占空比，例如 40%，如果您勾勒出时钟边沿的位置，您会发现它们出现在：

```
0,0.4,1,1.4,2,2.4,3 
```

但是对于 40% 除以 3，您需要 1.2 (=0.4*3) 和 1.8 分隔的边，但您无法获得此类差异。（你只有0.4,0.6,1.0,1.4,1.6等差异）

## 异步

用不同的占空比除以 3 的标准方法是简单地例化延迟锁定环或锁相环电路。

例如，如果您使用的是 Altera FPGA，请查看 AltPLL 宏功能，它具有设置目标占空比的选项，并且可以在很宽的输入占空比范围内工作。

但是，请注意，当您配置 PLL 时会设置输出占空比，并且不会跟踪输入占空比。

# r - 子集 ffdf 对象（子集 vs ffwhich）

> ID：13531265
> 
> 赞同：4
> 
> 时间：2012-11-23T14:41:29.327
> 
> 标签：r, subset, flat-file

我正在执行大型 ffdf 对象的子集，我注意到当我使用*subset.ff*时，它会生成大量的 NA。我通过使用*ffwhich*尝试了另一种方法，结果更快，并且没有生成 NA。这是我的测试：

```
library(ffbase)
# deals is the ffdf I would like to subset
unique(deals$COMMODITY)
ff (open) integer length=7 (7) levels: CASH CO2 COAL ELEC GAS GCERT OIL
  [1]   [2]   [3]   [4]   [5]   [6]   [7] 
CASH  CO2   COAL  ELEC  GAS   GCERT OIL   

# Using subset.ff
started.at=proc.time()
deals0 <- subset.ff(deals,deals$COMMODITY %in% c("CASH","COAL","CO2","ELEC","GCERT"))
cat("Finished in",timetaken(started.at),"\n")
Finished in 12.640sec
# NAs are generated
unique(deals0$COMMODITY)
ff (open) integer length=8 (8) levels: CASH CO2 COAL ELEC GAS GCERT OIL <NA>
  [1]   [2]   [3]   [4]   [5]   [6]   [7]   [8] 
CASH  CO2   COAL  ELEC  GAS   GCERT OIL   NA    

# Subset using ffwhich
started.at=proc.time()
idx <- ffwhich(deals,COMMODITY %in% c("CASH","COAL","CO2","ELEC","GCERT"))
deals1 <- deals[idx,]
cat("Finished in",timetaken(started.at),"\n")
Finished in 3.130sec
# No NAs are generated
unique(deals1$COMMODITY)
ff (open) integer length=7 (7) levels: CASH CO2 COAL ELEC GAS GCERT OIL
  [1]   [2]   [3]   [4]   [5]   [6]   [7] 
CASH  CO2   COAL  ELEC  GAS   GCERT OIL 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:33:02.447

`subset.ff`可能正在使用`[`和您的标准，但不包括`!is.na(.)`子句。“[”的默认值是返回标准向量为 TRUE 或 NA 的项目。常规的子集函数添加了一个`!is.na(.)`子句，但也许 ffbase 的作者没有解决这个问题。

# android - 预蜂窝设备上的 state_activated

> ID：13531272
> 
> 赞同：15
> 
> 时间：2012-11-23T14:41:56.067
> 
> 标签：android, listview

您不能使用以下状态可绘制作为列表视图项的背景。

```
<item android:drawable="@drawable/ic_launcher" android:state_activated="true"/> 
```

在 Pre Honeycomb 设备上，因为那里不支持此选择器，并且 android 版本不跟踪激活的项目。

如何模仿这种行为？尤其是在使用片段时（在一个片段的左侧列出，并根据选择的内容在右侧显示详细视图），此指标非常重要。

**我知道这个问题之前在[这里](https://stackoverflow.com/questions/11748615/state-activated-pre-honeycomb)被问过，但是那里接受的答案链接到博客文章，该文章在“步骤 4”中指出不可能激活指示器，而只是禁用使用以防止错误。这导致没有显示我正在搜索的指标。**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-13T15:49:26.400

我用一个小技巧解决了这个问题：通过滥用`state_checked`自 Android 版本 1 以来就存在的属性，可以模拟`state_activated`行为。无需自己修改 List 适配器或保存状态。

我写了一个详细的例子，其中包含了所有必要的代码来复制并将它发布在一个[github 存储库](https://github.com/theomega/ActivatedStateDemo)上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-22T15:24:56.943

就像 Chris Jenkins 建议的那样，我只是在我的`getView`覆盖中添加了一些代码：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    // ...

    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
        convertView.setBackgroundColor(Color.WHITE);
        if (listView.isItemChecked(position)) {
            convertView.setBackgroundColor(Color.LTGRAY);
        }
    }
} 
```

在我的情况下，是否自动处理了被检查的项目（使用 CHOICE_MODE_MULTIPLE 和 v7 ActionMode.Callback 和 setOnItemLongClickListener 调用回调）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:48:52.397

只需将适配器中选定列表项的背景更改为“已激活”可绘制对象。

所以在我的适配器中获取视图方法可能看起来像这样：

```
getView(int pos, View convertView, ViewGroup parent){
//... etc get view etc
    if(mSelectedItemPos == pos){
        v.setBackgroundDrawable(ctx.getResources().getDrawable(R.drawable.list_item_selected_state);
        //or v.setBackgroundResource(R.drawable.list_item.....);
    } else {
        v.setBackgroundDrawable(ctx.getResources().getDrawable(R.drawable.list_item_selector);            
    }
} 
```

如果我想支持视图上的选定/激活状态，这就是我所做的一切。更多的工作，但可以像你想要的那样灵活。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T15:17:22.357

我之前通过以下方式手动完成了它：

创建一个数组来保存列表的选定状态，在适配器构造函数中对其进行初始化，然后在您的 getView 方法（以防当前选定的项目滚动出视图）和您的 onItemClick 方法（以更改当前选择并打开关闭旧的）。

```
public static boolean selectedStatus[];  // array to hold selected state
public static View oldView;        // view to hold so we can set background back to normal after 
```

**构造** *函数初始化数组*

```
public class MyCursorAdapter extends SimpleCursorAdapter {
    private LayoutInflater mInflater;
    private int layout;

    public MyCursorAdapter(Context context, int layout, Cursor c,
        String[] from, int[] to, int flags) {
            super(context, layout, c, from, to, flags);
            mInflater = LayoutInflater.from(context);
            this.layout = layout;
            selectedStatus = new boolean[c.getCount()];
            for (int i = 0; i < c.getCount(); i++) {
            selectedStatus[i] = false;  // Start with all items unselected
        }
    }
} 
```

***当孩子滚动出视图时需要***getView****

 ***```
@Override 
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null)
         convertView = View.inflate(context, layout, null);

    if(selectedStatus[position] == true){
        v.setBackgroundResource(R.color.blue);                          
    } else {
        v.setBackgroundResource(R.color.black);
    }
    return v; 
} 
```

**onItemClick** *更改数组和屏幕上的选定项目*

```
lv.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {           

        mRowId = id;
        EventDisplayFragment eventdisplay = new EventDisplayFragment();
        getFragmentManager().beginTransaction()
                .replace(R.id.rightpane, eventdisplay).commit();
        if(MyCursorAdapter.oldView != null){
            MyCursorAdapter.oldView.setBackgroundResource(R.color.black);   // change the background of the old selected item back to default black                 }
        MyCursorAdapter.oldView = v;                                        // set oldView to current view so we have a reference to change back on next selection
        for (int i = 0; i < selectedStatus.length; i++) {
            if(i == position){                              // set the current view to true and all others to false
                    selectedStatus[i] = true;
                } else {
                    selectedStatus[i] = false;
                }
            }
        }
        v.setBackgroundResource(R.color.blue);
        return true;
    }
}); 
```***

# sql - Vertica 和连接

> ID：13531279
> 
> 赞同：16
> 
> 时间：2012-11-23T14:42:05.990
> 
> 标签：sql, join, vertica

我正在调整一个网络分析工具以`Vertica`用作数据库。我遇到了真正的问题`optimizing joins`。我尝试为我的一些查询创建预连接投影，虽然它确实使查询变得非常快，但它减慢了数据加载到事实表中的速度。

我们用来将数据从临时表加载到事实表的简单`INSERT INTO ... SELECT * FROM`方法从大约 5 秒到需要 20 多分钟。

因此，我放弃了所有预加入投影并尝试使用数据库设计器来设计查询特定的投影，但这还不够。即使使用这些投影，一个简单的连接也需要约 14 秒，而使用预连接投影则需要约 1 秒。

我的问题是：预加入投影会减慢数据插入速度是否正常，如果不是，那么罪魁祸首可能是什么？如果它是正常的，那么它对我们来说就是一个阻碍，我们可以使用其他技术来加速连接吗？

我们在一个 5 节点集群上运行 Vertica，每个节点都有 2 个四核 CPU 和 32 GB 内存。我的示例查询中的表分别有 188,843,085 和 25,712,878 行。

EXPLAIN 输出如下所示：

```
EXPLAIN SELECT referer_via_.url as referralPageUrl, COUNT(DISTINCT sessio
n.id) as visits FROM owa_session as session JOIN owa_referer AS referer_vi
a_ ON session.referer_id = referer_via_.id WHERE session.yyyymmdd BETWEEN 
'20121123' AND '20121123' AND session.site_id = '49' GROUP BY referer_via_
.url  ORDER BY visits DESC LIMIT 250;

Access Path:
+-SELECT  LIMIT 250 [Cost: 1M, Rows: 250 (STALE STATISTICS)] (PATH ID: 0)
|  Output Only: 250 tuples
|  Execute on: Query Initiator
| +---> SORT [Cost: 1M, Rows: 1 (STALE STATISTICS)] (PATH ID: 1)
| |      Order: count(DISTINCT "session".id) DESC
| |      Output Only: 250 tuples
| |      Execute on: All Nodes
| | +---> GROUPBY PIPELINED (RESEGMENT GROUPS) [Cost: 1M, Rows: 1 (STALE 
STATISTICS)] (PATH ID: 2)
| | |      Aggregates: count(DISTINCT "session".id)
| | |      Group By: referer_via_.url
| | |      Execute on: All Nodes
| | | +---> GROUPBY HASH (SORT OUTPUT) (RESEGMENT GROUPS) [Cost: 1M, Rows
: 1 (STALE STATISTICS)] (PATH ID: 3)
| | | |      Group By: referer_via_.url, "session".id
| | | |      Execute on: All Nodes
| | | | +---> JOIN HASH [Cost: 1M, Rows: 1 (STALE STATISTICS)] (PATH ID: 
4) Outer (RESEGMENT)
| | | | |      Join Cond: ("session".referer_id = referer_via_.id)
| | | | |      Execute on: All Nodes
| | | | | +-- Outer -> STORAGE ACCESS for session [Cost: 463, Rows: 1 (ST
ALE STATISTICS)] (PUSHED GROUPING) (PATH ID: 5)
| | | | | |      Projection: public.owa_session_projection
| | | | | |      Materialize: "session".id, "session".referer_id
| | | | | |      Filter: ("session".site_id = '49')
| | | | | |      Filter: (("session".yyyymmdd >= 20121123) AND ("session"
.yyyymmdd <= 20121123))
| | | | | |      Execute on: All Nodes
| | | | | +-- Inner -> STORAGE ACCESS for referer_via_ [Cost: 293K, Rows:
26M] (PATH ID: 6)
| | | | | |      Projection: public.owa_referer_DBD_1_seg_Potency_2012112
2_Potency_20121122
| | | | | |      Materialize: referer_via_.id, referer_via_.url
| | | | | |      Execute on: All Nodes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-26T21:38:59.057

要加速加入：

*   将会话表设计为在“yyyymmdd”列上进行分区。这将启用分区修剪

*   将列“yyyymmdd”的条件添加到 _referer_via_ 并对其进行分区，如果可能的话（很可能不是）

*   在会话的已用（超级）投影中，列 site_id 尽可能接近按列表排序的开头

    *   将两个表分别在 referer_id 和 id 上进行分段。

在集群中拥有更多节点确实有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:54:18.007

> 我的问题是：预加入投影会减慢数据插入速度是否正常，如果不是，那么罪魁祸首可能是什么？如果它是正常的，那么它对我们来说就是一个阻碍，我们可以使用其他技术来加速连接吗？

我猜受影响的数量会因您正在使用的数据集和结构而异。但是，由于这是您更改的变量，我相信可以肯定地说预加入投影导致了缓慢。您正在以插入时间为代价获得查询时间。

如果以下任何一个错误，请有人纠正我。我是靠记忆和与他人交谈时获得的信息。

您可以通过几种方式在没有预连接投影的情况下加快连接速度。在这种情况下，推荐人 ID。我相信，如果您使用连接谓词对两个表的预测进行分段，这会有所帮助。您可以做任何事情来过滤数据。

查看您的解释计划，您正在执行哈希连接而不是合并连接，您可能想要查看它。

最后，我想通过解释计划或系统表了解您的查询是否实际使用了数据库设计器推荐的投影。如果没有，请在查询中明确指定它们，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T16:34:26.827

这是我的观点，来自使用列数据库的学术背景，包括 Vertica（数据库系统最近的博士毕业生）。

> Blockquote 我的问题是：预连接投影会减慢数据插入速度是否正常，如果不是，那么罪魁祸首可能是什么？如果它是正常的，那么它对我们来说就是一个阻碍，我们可以使用其他技术来加速连接吗？块引用

是的，更新预测非常慢，理想情况下，您应该只大批量进行以摊销更新成本。根本原因是每个投影都代表数据的另一个副本（作为投影一部分的每个表列）。

单行插入需要向投影中的每一列添加一个值（一个属性）。例如，在具有 20 个属性的表中插入单行至少需要 20 次列更新。更糟糕的是，每一列都经过排序和压缩。这意味着在列中插入新值需要**对大块数据进行多次操作**：读取数据/解压缩/更新/排序/压缩数据/写回数据。Vertica 对更新进行了多项优化，但无法完全隐藏成本。

投影可以被认为相当于传统行存储（MySQL、PostgreSQL、Oracle 等）中的多列索引。与传统 B-Tree 索引相比，投影的优势在于读取它们（使用它们来回答查询）比使用传统索引要快得多。原因是多方面的：不需要像非聚集索引那样访问头数据，由于压缩而更小等。另一方面是它们更难以更新。权衡...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-28T06:57:33.963

我认为您的查询可以使用更多的明确性。也不要在[BETWEEN 之间使用那个 Devil](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)试试这个：

```
EXPLAIN SELECT 
    referer_via_.url as referralPageUrl, 
    COUNT(DISTINCT session.id) as visits 
FROM owa_session as session 
JOIN owa_referer AS referer_via_ 
    ON session.referer_id = referer_via_.id
WHERE session.yyyymmdd <= '20121123' 
AND session.yyyymmdd > '20121123' 
AND session.site_id = '49' 
GROUP BY referer_via_.url
-- this `visits` column needs a table name
ORDER BY visits DESC LIMIT 250; 
```

我会说我真的很困惑为什么你会使用相同`DATE`的`BETWEEN`可能想调查一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-20T22:06:55.583

你似乎有很多陈旧的统计数据。 [响应](https://my.vertica.com/docs/6.1.x/HTML/index.htm#15574.htm)STALE 统计数据很重要。因为这就是您的查询缓慢的原因。如果没有有关基础数据的统计信息，Vertica 的查询优化器无法选择最佳执行计划。响应 STALE 统计信息只会提高 SELECT 性能而不是更新性能。

如果您定期更新表格，请记住在 VERTICA 中还需要考虑其他事项。请检查我发布到这个[问题](https://stackoverflow.com/a/15909022/2262959)的答案。我希望这有助于提高您的更新速度。

如该答案中所述，探索 AHM 设置。如果您以后不需要在表中选择已删除的行，最好不要保留它们。有一些方法可以只保留最新版本的数据。或手动清除已删除的数据。让我知道事情的后续。

# php - PHP 使用什么根据应用程序中的事件在文件中记录信息

> ID：13531282
> 
> 赞同：1
> 
> 时间：2012-11-23T14:42:11.013
> 
> 标签：php, logging, message, event-log

我创建了一个应用程序，它多次调用 mysql 数据库并执行查询。我想要做的是创建/使用一个类，它允许我记录与用户所做的相关的信息。我希望它包含日期、时间以及将特定消息写入文件的能力。

我应该使用什么具有这种功能？

我听说`KLogger`（在这里找到：[http](http://codefury.net/projects/klogger/) ://codefury.net/projects/klogger/ ）是一个很好的类，但是*PHP：syslog*呢？（在这里找到：http: [//php.net/manual/en/function.syslog.php](http://php.net/manual/en/function.syslog.php)）

还是写我自己的日志类更合适？（可能只是为了获得一些好的经验）或者也许还有其他我错过的并且没有提到更合适的？

我需要的一个例子是..用户向数据库添加一个条目。我想在某个指定目录中写入一个名为*log.txt*的文件，该文件会说：

```
"2012/23/11 9:31AM User added entry to this table" 
```

一如既往地非常感谢任何见解。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:20:07.803

不要编写自己的日志类。这已经完成了一千次，像[log4php](http://logging.apache.org/log4php/quickstart.html)这样的日志框架非常灵活、易于使用且成熟。

顺便说一句，您可能会考虑使用[OWASP 日志备忘单](https://www.owasp.org/index.php/Logging_Cheat_Sheet)来进行完整且仍然合法的日志记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:54:25.607

您也许可以自己使用`fwrite()`.

对应于提出的请求，您可以使用一个简单的函数编写不同的东西。

```
function trackUser($message)
{
   $fp = fopen('log.txt', 'w');
   fwrite($fp, date().' '.time().' '.$message); 
   fclose($fp);
} 
```

# c - module_param() 宏的扩展：具有单个成员或位域的结构？

> ID：13531286
> 
> 赞同：0
> 
> 时间：2012-11-23T14:42:20.703
> 
> 标签：c, gcc, gnu, sizeof, bit-fields

> **可能重复：**
> [什么是“:-!!” 在 C 代码中？](https://stackoverflow.com/questions/9229601/what-is-in-c-code)

linux内核`module_param()`宏扩展成几条指令，其中一些使用数字（大小）计算如下（我只在这里粘贴相关代码）：

`sizeof(struct { int:- ! !(((00400|00040|00004)) < 0 || ((00400|00040|00004)) > 0777 || (((00400|00040|00004)) & 2)); })`

有人可以启发我这是在`int:- ! !(NUMBER)`做什么吗？

实际上，我有几个问题：1）为什么要定义一个带有单个成员的结构？2）为什么不命名该成员？（或者是成员的名字......“int”，就像类型一样？） 3）那个`int:- ! !(NUMBER)`表达式的含义是什么？那是一个结构字段吗？位域？4) 上述sizeof()的含义和最终结果是什么？

非常感谢。

# jquery - jQuery'流利的'幻灯片

> ID：13531291
> 
> 赞同：-3
> 
> 时间：2012-11-23T14:42:42.723
> 
> 标签：jquery, slide

我正在使用 jQuery 滑动一些随机文本。当将鼠标悬停在图像上时会出现此文本，但图像（触发幻灯片）与此文本不匹配 - 在我的情况下是“加图像”。所以让我解释一下这个例子：

![](../Images/0602ef5d31c52c9d8c0822c1ae8bcbd2.png)

我希望它是这样的（加上幻灯片时的文字）：

![](../Images/f748a2f82b9e7e88869c48d0d7476fe1.png)

我的代码：

```
<div style="">
    <a href="java script:void(0)"><img style="float:left;" id="dodaj_obrazek_4" src="imgs/add.png" onmouseover="wys_obrazek(4)"></a>
    <div style="float: left; display: none;" id="dodaj_obr_4">
        <a onmouseout="sch_obrazek(4)" style="color:#414040;" href="java script:void(0)">Dodaj obrazek</a>
    </div>
</div> 
```

触发滑动的函数：

```
function wys_obrazek(liczba) {
    if ($('#dodaj_obr_' + liczba).is(':hidden')) {
        $('#dodaj_obr_' + liczba).show('slide', {
            direction: 'right'
        }, 1000);
    }
}

function sch_obrazek(liczba) {
    if ($('#dodaj_obr_' + liczba).is(':visible')) {
        $('#dodaj_obr_' + liczba).hide('slide', {
            direction: 'right'
        }, 1000);
    }
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:10:54.663

原因是 JQuery 正在按顺序对它们进行动画处理，一种选择是像这样包装所有组件：

```
 <div style="width:500px; overflow:hidden;">
    <div id="dodaj_obrazek_wrap_4">
       <a href="java script:void(0)"><img style="float:left;" id="dodaj_obrazek_4" src="imgs/add.png"></a>
       <div style="float: left;" id="dodaj_obr_4">
          <a style="color:#414040;" href="java script:void(0)">Dodaj obrazek</a>
      </div>
   </div>
</div>​ 
```

然后 JQuery 变为。

```
function wys_obrazek(liczba) {
    var item = $('#dodaj_obrazek_wrap_' + liczba);
    if (item.is(':hidden')) {
        item.animate({
      marginLeft: parseInt( item.css('marginLeft'),10) == 0 ?
            item.outerWidth() : 0 });
    }
}

function sch_obrazek(liczba) {
    var item = $('#dodaj_obrazek_wrap_' + liczba);
    if (item.is(':visible')) {
       item.animate({
      marginLeft: parseInt( item.css('marginLeft'),10) == 0 ?
        item.outerWidth() : 0
    });
    }
} 
```

作为示例，请参见[此处](http://jsfiddle.net/X286T/1/)

**更新**

我找不到在隐藏/显示中使用幻灯片的参考，所以我自己添加了一个。

# php - SQL 主键 PHP 和查询速度

> ID：13531293
> 
> 赞同：-1
> 
> 时间：2012-11-23T14:42:52.903
> 
> 标签：php, sql, primary-key

我有一个简单的问题，但我在互联网上找不到答案。我有一个名为 result 的 SQL 表，只有 2 个字段：名称和内容。由于每个名称都是唯一的，因此我将主键放在字段名称上。

我想在 Php 中做的是指定一个名称并获取其内容：

```
$req = $bdd->prepare('SELECT contents FROM result WHERE name = :name');
$req->execute(array('name' => $inputName));
$donnees = $req->fetch();
$result=$donnees['contents'];
echo $result; 
```

当然这段代码有效，但我想知道的是我是否必须在我的 PHP 代码上指定名称是主键，或者它已经知道它，因此我的查询的执行速度是最大的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:06:27.130

处理数据库的主键（或任何键）不是 php 的工作。您的执行速度将达到最大值，因为主键意味着将为该列创建索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:12:30.103

不要过早优化。

首先，您需要一个真实世界的用例，然后您需要对其进行分析/基准测试以找到瓶颈，*然后*考虑优化什么以及如何优化。

分析 sql 查询可以使用`EXPLAIN SELECT ...`- 但如果 name 已被索引，则对于您的简单查询将不是必需的。

如果您想将此结果表用作缓存 - 这可能不是最佳解决方案。考虑使用内存中的键值存储，如 memcache。

# r - 将回归线添加到绘图（plotmeans）

> ID：13531295
> 
> 赞同：3
> 
> 时间：2012-11-23T14:42:55.690
> 
> 标签：r, plot, linear-regression, mean, gplots

我的问题是我想用平均值和标准差创建图。

`plotmeans`我在包中找到了该函数`gplots`，现在我想在该图中添加一条趋势线。我尝试这样做，`abline`但它不起作用。我会非常感谢一些帮助。

我的数据如下所示：

```
year <- c(2004, 2004, 2004, 2005, 2005, 2005, 2006, 2006, 2006, 2007, 2007, 2007, 2008, 2008, 2008, 2009, 2009, 2009)
value <- c(116,114,115,110,110,109,100,99,102,95,96,95,90,91,94,70,71,73)
df <- data.frame(year, value); head(df)
library(gplots)

plotmeans(value ~ year, data= df, p = 0.99, connect= FALSE)
abline(h=c(100), col= "blue", lty= 2)
abline(lm(value ~ year, data= df)) 
```

所以第一个`abline`工作正常，但 lm 行不行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T15:08:30.577

在图中，x 轴上的值被重新编码为因子水平。因此，您必须转换`year`为一个因子并使用它的数值。结果用于`lm`函数。

```
df$year2 <- as.numeric(factor(year))    

library(gplots)
plotmeans(value ~ year, data= df, p = 0.99, connect= FALSE)
abline(h=c(100), col= "blue", lty= 2)
abline(lm(value ~ year2, data= df)) 
```

![在此处输入图像描述](../Images/ab8b12a5fc901c6ba0349fd111efff2f.png)

# objective-c - 如何为 UIAlertView 文本字段设置最大字符串长度

> ID：13531299
> 
> 赞同：3
> 
> 时间：2012-11-23T14:43:05.250
> 
> 标签：objective-c, ios, xcode, uialertview, textfield

如何设置在 a 中创建的文本字段的最大字符串长度`UIAlertView`？我正在使用 Xcode 4.5 并在 10.8 (OS X) 上构建应用程序目前我`UIAlertView`在用户单击按钮时启动该应用程序。用户将扫描他们的 RFID 徽章，我希望将输入文本字段`UIAlertView`限制为 10（十）个字符，这样用户就不能伪造关联过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:48:14.087

您可以在 textField 的委托方法中检查文本的长度：

```
textField:shouldChangeCharactersInRange:replacementString: 
```

如果您不想更改，请返回 NO。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
   if (textField.text.length - range.length + string.length > 10) {
      return NO;
   }
   return YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T23:16:13.430

看起来上面的答案*几乎*是正确的。

键入单个字符时，range.length（对于此方法）似乎始终为零，而位置增加。

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

      NSLog(@"Range: %@", NSStringFromRange(range));
      return ( range.location < 10 );

 } 
```

*编辑：*如果你做的不是单字符输入，例如粘贴一行等，长度可能会更长。

# mysql - mysql - 我如何加入两个计数的总和？

> ID：13531302
> 
> 赞同：3
> 
> 时间：2012-11-23T14:43:29.977
> 
> 标签：mysql, join, count

我目前有一个匹配结果表

```
+----------+----------+--------+-----------+--------+-----------+-----------+-----------+
| hometeam | awayteam | p1home | p2home... | p1away | p2away... | homescore | awayscore |
+----------+----------+--------+-----------+--------+-----------+-----------+-----------+ 
```

我用相当笨重的东西查询

```
SELECT
(SELECT COUNT(hometeam)
FROM fixture_data
WHERE (p1home = '$playerID' OR p2home = '$playerID' OR...)
AND hometeam = '$teamname')
+
(SELECT COUNT(awayteam)
FROM fixture_data
WHERE (p1home = '$playerID' OR p2home = '$playerID' OR...)
AND awayteam= '$teamname')
AS matches_played 
```

获取特定球员 $playerID 为特定球队参加的比赛数 $teamname

桌上玩家很简单

```
+----------+-----------+-----------+
| playerID | firstname | surname   |
+----------+-----------+-----------+ 
```

打电话后的那一刻

```
SELECT * FROM players 
```

我通过 PHP 为每个玩家调用初始查询，因为我正在努力将这两个查询连接到一个单独的 MYSQL 查询中以生成一个表

```
+----------+-----------+-----------+----------------+
| playerID | firstname | surname   | matches_played |
+----------+-----------+-----------+----------------+ 
```

这可能吗？还是我当前使用 PHP 的解决方案会尽可能高效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:50:14.817

我建议将这些查询组合成一个：

```
SELECT COUNT(*) AS matches_played
FROM fixture_data
WHERE (p1home = '$playerID' OR p2home = '$playerID' OR...)
AND ( awayteam= '$teamname' OR hometeam = '$teamname') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:52:57.283

如果您将球员列表从比赛表中取出并将其放入单独的球员、球队、比赛表格中，您可以让自己更轻松。那么你的总和将是加入三个并计算比赛的问题。球员是在家还是在客场，甚至有多少人参加了一场给定的比赛，都无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:52:27.330

这应该工作：

```
SELECT p.playerID, p.firstname, p.surname, COUNT(*)
  FROM players p, fisture_data f
 WHERE p.playerID='$playerID'
    AND (((p.playerID = f.p1home OR p.playerID=f.p2home...) AND f.hometeam='$teamname')
        OR ((p.playerID = f.p1away OR p.playerID=f.p2away...) AND f.awayteam='$teamname'))
GROUP BY p.playerID, p.firstname, p.surname 
```

但是模型不是最优的，您应该创建一个新表来存储链接球员/比赛/球队。

# android - 如何避免我在服务中获得的意图为空？

> ID：13531304
> 
> 赞同：1
> 
> 时间：2012-11-23T14:43:31.447
> 
> 标签：android, service

我有一项在后台运行的服务。他返回 START_STICKY 因为它侦听一些事件，这些事件发生得非常快（来自传感器的数据）。在某些情况下，我的服务被杀死：我的意图为空，根据文档，当我的服务因他的进程消失而被杀死时，可能会发生这种情况。

[http://developer.android.com/reference/android/app/Service.html#onStart%28android.content.Intent,%20int%29](http://developer.android.com/reference/android/app/Service.html#onStart%28android.content.Intent,%20int%29)

我想知道如何避免它。任何帮助将不胜感激。

**更新**

```
 private void startForeground() {
    String title = "Warning";//getString(R.string.note_title);
    String text = "App still working";//getString(R.string.note_msg);

    Intent intent = new Intent(this, DriverActivity.class);

    PendingIntent pending = PendingIntent.getActivity(this, 0, intent, 0);

    Bitmap bitmap = BitmapFactory.decodeResource(
            getResources(),
            R.drawable.ic_launcher);
    Notification.Builder builder = new Notification.Builder(this)
            .setSmallIcon(R.drawable.ic_launcher)
            .setLargeIcon(bitmap)
            .setContentTitle(title)
            .setContentText(text)
            .setContentIntent(pending);

    Notification notification = builder.getNotification();
    notification.flags |= Notification.FLAG_NO_CLEAR;
    startForeground(NOTIFICATION_ID, notification);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:46:27.437

首先，您需要确定服务终止的原因。两个最可能的动机是：

*   服务引发异常并被 Android 终止
*   服务被 Android 终止，因为它运行了很长时间（通常在 30 分钟到 1 小时之间）而没有被声明为前台服务

**异常** 这种类型的问题您可以通过查看 logcat 轻松识别。纠正将取决于报告的原因。

**前台** 您可以通过使用以下方式将服务设置为前台来解决此问题：

```
 startForeground(message, notification); 
```

在您的服务中。

问候。

# php - 提取 ZIP 文件目录 - PHP

> ID：13531305
> 
> 赞同：2
> 
> 时间：2012-11-23T14:43:32.873
> 
> 标签：php, file-upload, zip, directory

我希望用户能够上传图像或单个图像的 ZIP 文件。目录将存储在一个 zip_upload 文件中，单个图像存储在另一个文件中。我已经掌握了上传过程。但是在服务器上存储文件和目录时会出现问题。

一个有问题的场景：

用户上传了一个名为 A 的 .zip 文件，其中包含 2 个目录，一个名为 B，另一个名为 C。我的问题是如何检查是否有其他目录与 B 或 C 同名。请注意我没有将 A 存储为目录，而是将内部目录 B 和 C 存储。

我一直在使用[PHP Zip Extensions](http://php.net/manual/en/book.zip.php)

我当前的代码：

```
if($continue == "zip"){
  $target_path = "/var/www/....".$filename;
  // change this to the correct site path
  echo "target: ".$target_path."<br/>";
  //if directory already exists
  //say that it already exists, please try again
  $flag = 1;
//else
  //upload the file
  //$flag = 0;
if($flag == 1){
  if(move_uploaded_file($source, $target_path)) {
    $zip = new ZipArchive();
    $x = $zip->open($target_path);
    if ($x === true) {
      $zip->extractTo("/var/www/...");
      // change this to the correct site path
      $zip->close();
      unlink($target_path);
    }
    $message = "Your .zip file was uploaded and unpacked.";
  } else {
    $message = "There was a problem with the upload. Please try again.";
  }
} else {
  $message = "Already a directory called ".$filename. ". Please rename and retry. Note: Please rename the folder within the zip file.";
} 
```

谁能给我指出一个解决方案或替代方案来做我想做的事？

# iphone - 像 UIImagePickerController 这样的旋转行为

> ID：13531308
> 
> 赞同：0
> 
> 时间：2012-11-23T14:43:37.357
> 
> 标签：iphone, rotation, orientation, uiimagepickercontroller, viewcontroller

我需要创建自己的 ImagePicker，因为 UIImagePickerController 无法满足我的需求。这个 ImagePicker 的外观和行为应该与原始 UIImagePickerController 类似，但在相机预览和按钮之间有一个 UIView，以便我可以将图像（例如网格）显示为覆盖图像。

为此，我将使用 AV Foundation 框架，无论出于何种原因，它（对我而言）比我想要实现的旋转行为更容易理解。这就是问题所在：在原始 UIImagePickerController 中，“拍照”按钮始终位于 iPhone 的主页按钮旁边，但其内容会旋转到正确的方向。“闪光灯”和“切换相机”按钮始终位于顶部边缘。

我怎样才能实现这种行为？我需要多少 ViewControllers / Views 以及层次结构如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:53:35.853

它可以在一个视图中完成；）对我来说合理的每个按钮和一个父视图听起来一个......所以4！？

应用变换视图 (CGAffineTransformRotate) 以对抗设备旋转

```
view.transform = CGAffineTransformMakeRotation(angle); 
```

# c#-4.0 - SignalR 组未获取数据

> ID：13531314
> 
> 赞同：5
> 
> 时间：2012-11-23T14:44:12.793
> 
> 标签：c#-4.0, session, asp.net-mvc-4, signalr, signalr-hub

嗨，我遇到了一个问题，我的 signalR 客户在一个组中没有收到发送的信息。

我以两种方式尝试过，但都不起作用。

在加载的网页上，客户端将调用服务器以获取组名，然后调用集线器上的方法将用户加入该组。

脚本......

```
 var connectionOpen = false;
        var myHub;
        $(function () {
            myHub = $.connection.myHub;
            myHub.client.showMessage = alertMessage;
            $.connection.hub.start(function () {
                connectionOpen = true;
                joinGroup();
            });
        });

        function joinGroup() {
            $.ajax({
                url: 'Controller/GetGroupName,
                type: 'POST',
                success: function (group) {
                    if (connectionOpen == true)
                        tileHub.server.joinGroup(group);
                }
            });
        }

function alertMessage(string value){
alert(value);
} 
```

控制器

```
[HttpPost]
public JsonResult GetGroupName()
{
    return Json("Foo");
} 
```

我的集线器

```
public void JoinGroup(string groupName)
{
    Groups.Add(Context.ConnectionId, groupName);
} 
```

我已经多次单步执行代码，我可以看到我连接正常并加入了该组，但是当我尝试发送回该组时没有任何反应

我从我的控制器使用这个发送到组

```
GlobalHost.ConnectionManager.GetHubContext<myHub>().Clients.Group("Foo").showMessage("Hello"); 
```

这是我尝试过的第二种方式，我也尝试过从集线器发送到群组，但仍然没有乐趣。

任何帮助将不胜感激...

**更新** 感谢 David Fowler 已修复此问题....

这是一个错误，因为我使用 HubName 属性给集线器一个不同的名称，然后使用 longPolling 传输给集线器一个不同的名称。删除该属性可以让 this 知道工作。还提供了修复程序，请参阅[https://github.com/SignalR/SignalR/issues/1039](https://github.com/SignalR/SignalR/issues/1039)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:37:18.287

一些事情：

1.  确保您阅读了这篇文章的“重新加入群组”部分。[http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)。
2.  您真的需要进行 ajax 调用才能从服务器中找出组名吗？不能直接在页面中渲染吗？
3.  如果您将“Foo”硬编码为无处不在的组名，它会失败吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:49:28.543

在dfowler的anwser中找到：[https](https://github.com/SignalR/SignalR/issues/1039) ://github.com/SignalR/SignalR/issues/1039 <在评论中没有看到。

解决方案是：从 Hub 中删除 HubName 属性。

# android - 如何在没有 Eclipse 的情况下保存和查看 LogCat 错误？日志猫？

> ID：13531319
> 
> 赞同：1
> 
> 时间：2012-11-23T14:44:49.947
> 
> 标签：android, logcat

我正在开发一个应用程序，但遇到了一个奇怪的错误。我不能总是在我的手机中重现它（galaxy nexus with 4.2）......它有时会发生，而且当我在 Eclipse 中尝试应用程序时，我绝对从来没有实现过它（我可以通过控制台轻松看到 Logcat查看）我收到的唯一消息是一个悲伤的对话框，告诉我我的应用程序已停止。

所以我搜索了解决方案，人们说要安装一些像[aLogCat](https://play.google.com/store/apps/details?id=org.jtb.alogcat&hl=en)这样的应用程序来实现这一点。我在我的应用程序中编写了一些“Log.d()”，但我在任何地方都看不到它。

那么，问题来了……如何从我的应用程序问题中获取更多信息？有人使用过 aLogcat 或任何其他日志阅读器吗？为什么我的日志在 eclipse Logcat 控制台中查看，但在我的手机中没有（我只能看到 GC_CONCURRENT 和 D/dalvikm 之类的东西......）

在此先感谢并对我的英语感到抱歉:)

**更新**我也在用我的手机来测试我的应用程序和 adb 模拟器，但是使用模拟器我从来没有发生过任何崩溃。实际上，我不能强迫这种崩溃，因为我随机使用它并且总是与我的手机一起使用。我尝试通过手机调试我的应用程序，但无法正确连接。如果有人可以帮助我也会感激。我有一个银河系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:13:22.183

我将尝试回答这个问题...

听起来您正在使用手机（而不是模拟器）来运行您的应用程序并且您看到不一致的崩溃，对吗？使用诸如 Bugsense (http://www.bugsense.com/) 之类的东西可能对您有价值。当您的应用程序崩溃时，像这样的许多服务会向您发送崩溃报告，因此如果您使用自己的个人手机进行测试，这可能是一个好主意，因为当崩溃发生时您可能会或可能不会靠近计算机。

# ajax - ajax后退按钮的swfaddress不起作用

> ID：13531320
> 
> 赞同：1
> 
> 时间：2012-11-23T14:44:58.577
> 
> 标签：ajax, button, back, swfaddress

我在这里搜索但没有得到足够的答案。我正在使用以下测试用例，但后退/前进按钮无法正常工作：

```
 function handleChange(evt){

    if (evt.pathNames[0] == '!text'){

      $('div#ajax').load('text.php');

    } else if (evt.pathNames[0] == 'contact') {
        //load contact page
    } else {
        //load default page
    }

}

SWFAddress.addEventListener(SWFAddressEvent.CHANGE, handleChange); 
```

我在 Ajax 调用中找不到太多关于此功能的信息，请问有什么建议吗？似乎，Gmail 有类似的东西，但用于邮箱导航..

谢谢，伊万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:06:50.543

终于我明白了。它工作正常，但我的测试是错误的。

前进/后退按钮运行良好，但是，“空白”主页的后退按钮不起作用，因为根本没有匹配空白参数的规则。现在看起来像这样：

```
function handleChange(evt){

var path = evt.path;

switch(path) {

  case '':  // go home
      $('#ajax_ramec').html('<div style="margin-left: 50%; margin-top:50%; text-aligtn:center"><img src="'+baseURL+'/public/images/template/loading_small.gif" /></div>').load(baseURL+'/index/uvod');

  break;

  case '!domov':    // go home
      $('#ajax_ramec').html('<div style="margin-left: 50%; margin-top:50%; text-aligtn:center"><img src="'+baseURL+'/public/images/template/loading_small.gif" /></div>').load(baseURL+'/index/uvod');

  break;

  case '!pridaj':
      $('#ajax_ramec').html('<div style="margin-left: 50%; margin-top:50%; text-aligtn:center"><img src="'+baseURL+'/public/images/template/loading_small.gif" /></div>').load(baseURL+'/pridaj');
  break;

  case '!uprav':
          $('#ajax_ramec').html('<div style="margin-left: 50%; margin-top:50%; text-aligtn:center"><img src="'+baseURL+'/public/images/template/loading_small.gif" /></div>').load(baseURL+'/uprav');
  break;

  case '!oprojekte':
          $('#ajax_ramec').html('<div style="margin-left: 50%; margin-top:50%; text-aligtn:center"><img src="'+baseURL+'/public/images/template/loading_small.gif" /></div>').load(baseURL+'/index/oprojekte');
  break;      

  case '!kontakt':
          $('#ajax_ramec').html('<div style="margin-left: 50%; margin-top:50%; text-aligtn:center"><img src="'+baseURL+'/public/images/template/loading_small.gif" /></div>').load(baseURL+'/kontakt');
  break;

  case '!podmienky':
          $('#ajax_ramec').html('<div style="margin-left: 50%; margin-top:50%; text-aligtn:center"><img src="'+baseURL+'/public/images/template/loading_small.gif" /></div>').load(baseURL+'/index/podmienky');
  break; 
```

}

# jquery - jQuery左位置百分比和if语句

> ID：13531323
> 
> 赞同：1
> 
> 时间：2012-11-23T14:45:13.563
> 
> 标签：jquery, if-statement, slider, percentage

我是 jquery 的新手，正在尝试构建一个完整的页面响应滑块。它工作正常，只是我希望在每张幻灯片/百分比值上发生不同的事情。我所有的幻灯片都在“滑块”中，宽度为 100%，所以：

幻灯片 1 - （当可见时）'slider' 左 0
幻灯片 2 - 'slider' 左 -100percent
幻灯片 3 - 'slider' 左 -200percent
等等

第一个 if 语句工作正常，但第二个没有效果，我也尝试过 'position' 而不是 'offset'

```
$('#next').click(function(){
    $('#slider').animate({'left': '-=100%'},
        function() {
            var pos = $('#slider').offset();
            if (pos.left < 0) {
                $('#div1').show();
                } 
            else if (pos.left == '-700%') {
                $('#div1').hide();
                } 
     });    
}); 
```

任何帮助深表感谢！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:48:04.860

`offset()`被 jQuery 规范化为总是返回`px`值；无论您对元素应用了什么 CSS。

`top`和值是数字，而`left`不是字符串，仅供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:48:24.487

您可以使用 jquery 以像素为单位的滑块宽度，`$('#slider').width()`并将其与百分率相乘，即可得到百分比。

```
100% >> $('#slider').width()
700% >> $('#slider').width() * 7 
```

# c# - 如何禁用 Windows 照片和传真查看器上的下一个和上一个图像按钮？

> ID：13531325
> 
> 赞同：0
> 
> 时间：2012-11-23T14:45:17.073
> 
> 标签：c#, tiff

我编写了一个简单的代码来打开多个 .tiff 文件，但我想禁用下一个和上一个按钮。可能吗？有任何想法吗？

```
string Path = @"....\Desktop\Test Image.tif";

        Process p = new Process();

        p.StartInfo.FileName = "rundll32.exe";

        //Arguments
        p.StartInfo.Arguments = @"C:\WINDOWS\System32\shimgvw.dll,ImageView_Fullscreen " + Path;
        p.Start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:32:02.020

也许使用一些 Win32 API（FindWindow、SendMessage）。您可以获得按钮的 hWnd 并在它们上使用 SendMessage。

# c# - 在 C# wpf 项目中以编程方式添加图像执行 DataGrid - 如何？

> ID：13531327
> 
> 赞同：7
> 
> 时间：2012-11-23T14:45:27.873
> 
> 标签：c#, wpf, image, binding, datagrid

我有个问题。

我想在没有 VS Designer 的情况下用 C# 以编程方式编写所有东西。

因此，我正在创建一个图像和 DataGrid（并将其添加为 MainWindow Grid 的子项）：

```
 Image img = new Image();
  Uri uri = new Uri(@"C:\d1.jpg");
  img.Source = new System.Windows.Media.Imaging.BitmapImage(uri);

  DataGrid dg = new DataGrid();
  grid1.Children.Add(dg); 
```

然后我想添加 4 列，例如 3 列文本和 1 列图像。因此，首先我需要使用示例数据创建一个 DataTable 和 DataRow：

```
 DataTable dt = new DataTable();

  dt.Columns.Add("Column1");
  dt.Columns.Add("Column2");
  dt.Columns.Add("Column3");
  dt.Columns.Add("Column4", typeof(Image)); // type of image!

  DataRow dr = dt.NewRow();
  dr[0] = "aaa";
  dr[1] = "bbb";
  dr[2] = "ccc";
  dr[3] = img; // add a sample image

  dt.Rows.Add(dr); 
```

现在我有一个包含 4 列和 1 行数据的 DataTable。

然后我需要做的就是像这样设置 DataGrid 的 ItemsSource：

```
dg.ItemsSource = dt.DefaultView; 
```

我做错了什么？为什么在最后的网格上有 System.Windows.Controls.Image 连续而不是真实图像？我需要绑定它还是什么？

我需要以编程方式完成的所有事情，无需设计师。

如何显示真实图像而不是那个字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T23:16:08.290

仍然不知道如何以编程方式 100% 做到这一点，但我想通了。

最重要的是DataGrid（或GridView）不支持Image。为什么？不要问我。所以我将图像更改为 BitmapImage，它就像一个魅力。

所以有我的修改：

```
 Uri uri = new Uri(@"C:\d1.jpg");
        BitmapImage bmp = new System.Windows.Media.Imaging.BitmapImage(uri);

        ...

        DataGrid dg = new DataGrid();
        dg.AutoGenerateColumns = false;

        DataGridTemplateColumn col1 = (DataGridTemplateColumn)this.FindResource("dgt");
        dg.Columns.Add(col1);

        DataGridTextColumn col2 = new DataGridTextColumn();
        col2.Header = "Column2";
        col2.Binding = new Binding("Column2");
        dg.Columns.Add(col2);

        ...

        DataTable dt = new DataTable();
        dt.Columns.Add("Column1", typeof(BitmapImage));
        dt.Columns.Add("Column2");

        DataRow dr = dt.NewRow();
        dr[0] = bmp;
        dr[1] = "test";
        dt.Rows.Add(dr);

        ...

        dg.ItemsSource = dt.DefaultView;
        grid1.Children.Add(dg); 
```

但我需要将资源添加到 XAML（不知道如何编程）。所以有一个代码：

```
<Window.Resources>
    <DataGridTemplateColumn x:Key="dgt" Header="Column1" Width="SizeToCells">
        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <Image Source="{Binding Column1}" />
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
</Window.Resources> 
```

一切正常！

GridView 或 ListView 也是如此。希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-04T02:32:02.000

这里有一个超级简单的例子，对我帮助很大

[http://www.c-sharpcorner.com/Forums/Thread/80586/displaying-images-in-datagrid-in-wpf-C-Sharp.aspx](http://www.c-sharpcorner.com/Forums/Thread/80586/displaying-images-in-datagrid-in-wpf-C-Sharp.aspx)

我为 MVVM 修改了示例代码

看法

```
 <DataGrid x:Name="dgGrid" ItemsSource="{Binding collection}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Image">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Image Height="25" Width="50" Source="{Binding path}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
        <DataGridTextColumn Header="Name" Binding="{Binding name}"/>
    </DataGrid> 
```

实体

```
public class File
{
    public string path{ get; set; }
    public string name{ get; set; }
} 
```

视图模型

```
var collection = new ObservableCollection<File>();
collection.Add(new File() { path=@"C:\Users\homeIcon.png", name="Home" }); 
```

# html - 垂直对齐和行高之谜

> ID：13531330
> 
> 赞同：1
> 
> 时间：2012-11-23T14:45:50.457
> 
> 标签：html, css

它刚刚开始让我发疯，因为我不明白为什么以下 CSS 模板的垂直对齐仅在空的 html 文件中起作用：

```
<head>
<style>
        #mylist li {
                display: inline-block;
                list-style: none;
                text-align: center;
                height: 250px;
                padding: 5px;                   
        }
        #mylist .imgcont {
                height: 150px;
                width: 150px;
                line-height: 150px;
                border: 1px solid red;
                padding: 5px;
                overflow: hidden;       
        }
        #mylist img {
                height:120px;
                vertical-align:middle;
        }
</style>
</head>
<body>
<ul id="mylist">
    <li>
        <div class="imgcont">
          <img src="someimg.jpg" />
        </div>
    </li>
    <li>
        <div class="imgcont">
          <img src="anotherimg.jpg" />
        </div>
    </li>
</ul>
</body> 
```

*   在“空”html 中，表示`<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">`顶部带有**垂直对齐的裸 html 模板，并且图像**在 div 容器中垂直居中
*   当我进行**逐字复制**并插入更复杂的 html（标题标签中的样式，正文标签顶部的 ul-list）时，**突然垂直对齐被忽略**，图像被放置在容器的顶部。根本无法理解这里有什么不同。

我什至尝试添加样式“clear:both”但没有效果。

任何的想法 ？

**更新 - 为这两种情况添加了屏幕截图** ![纯html中的垂直对齐](../Images/e397837b1f7dfaf910c7423e4a6dc99c.png) ![上面的例子合并了一些复杂的 html，vertical-align 被忽略](../Images/f491e2c40a006936d170e25b66dc85db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:37:36.833

如果有帮助，您可能会找到以下代码，否则请提供一些屏幕截图来说明您得到的和您期望的..

```
#mylist .imgcont {
            height: 150px;
            width: 150px;
            line-height: 150px;
            border: 1px solid red;
            padding: 5px;
            overflow: hidden; 
            display:table-cell;
            vertical-align:middle;
            text-align:center;     
    } 
```

它给了我以下输出：

![在此处输入图像描述](../Images/74b39981c2aafa97cfa65c4aebb40aec.png)

# c - fopen 不适用于 XCode

> ID：13531331
> 
> 赞同：4
> 
> 时间：2012-11-23T14:45:52.500
> 
> 标签：c, text-files

XCode中的函数`fopen(FILE *fp)`不起作用，我将文本文件放在根目录中，但不起作用，这很奇怪，因为从终端执行正常，但从IDE执行不行。

我使用的语法是这样的：

```
FILE *fp=fopen("name.txt", "r");
if(fp==NULL)
{
    printf("the text file can't be opened");
    exit(0);
}
else
    return fp; 
```

并且总是返回`NULL`。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-23T14:50:50.173

那么通过xcode运行时的工作目录是什么？
默认情况下 IIRC 它没有设置，这可能是 IDE 和终端之间的区别。

-- 设置工作目录：

转到：产品 > 方案 > 编辑方案...

转到：
选项选项卡并选择一个工作目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:52:17.170

这是因为您的根目录不是 IDE 的工作目录。更改配置以使用根目录作为 IDE 的工作目录，或者将 name.txt 放在 IDE 的工作目录中。

# c++ - 从数组中获取块

> ID：13531332
> 
> 赞同：2
> 
> 时间：2012-11-23T14:45:53.237
> 
> 标签：c++, arrays

我有以下数组

```
 75.7740   70.6046   82.3458   43.8744   48.9764
   74.3132    3.1833   69.4829   38.1558   44.5586
   39.2227   27.6923   31.7099   76.5517   64.6313
   65.5478    4.6171   95.0222   79.5200   70.9365
   17.1187    9.7132    3.4446   18.6873   75.4687 
```

我想得到例如从 (1,1) 到 (2,2) 子数组

```
3.1833   69.4829  
27.6923   31.7099 
```

当我对子数组进行一些计算时，我也想影响大数组。

例如我有一个矩阵类

```
template<class T>
class Matrix {
private:
    unsigned rows, cols;
    T* data_;
        .....
} 
```

测试

```
MatrixXd u(5, 5);
MatrixXd d(2, 2);
....
u.subblock(1,1,2,2) = d*d
or
u(1,1,2,2) = d*d 
```

我已经重载了一些运算符，如 ()/*-+ 等，但我不知道我可以操作子数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:58:53.277

```
u.subblock(1,1,2,2) = d*d 
```

要获得如上述工作的一行，您可以定义一个辅助类：

```
template<class T>
class SubMatrix {
private:
    Matrix<T> *origin;
    unsigned int sr, sc, er, ec; // start and end row and column
        .....
}; 
```

然后你的`Matrix::subblock`函数返回一个`SubMatrix`被`operator =`重载的 a `Matrix`（并且一个采用 a`SubMatrix`和可能的其他运算符，以及一个`operator =`采用`Matrix`a`SubMatrix`等）。

然后，此帮助程序类将在给定窗口中读取/写入原始矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:56:35.027

一种可能的设计是让子矩阵成为主矩阵相关部分的*视图。*换句话说，视图不会管理自己的存储，而是简单地重用主矩阵的存储。当视图被修改时，主矩阵也会被修改。

数值 Python 使用这种设计取得了很大的成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:05:07.383

如果你问怎么写，那是一回事。

如果您想要一个已经编写好的解决方案，请查看 Boost 的[multi_array](http://www.boost.org/libs/multi_array/)。通过一些存储开销优化，您可以获得 N 维矩阵。

您将使用的特定类是[boost::multi_array_ref](http://www.boost.org/doc/libs/1_52_0/libs/multi_array/doc/reference.html#multi_array_ref)和[boost::const_multi_array_ref](http://www.boost.org/doc/libs/1_52_0/libs/multi_array/doc/reference.html#const_multi_array_ref)

*（注意：来自经验的公平警告......这些还没有准备好像`unique_ptr`此时那样存储 C++11 只移动类型。）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T16:09:26.507

实际问题是您的矩阵类支持太多操作。所需的最低操作如下所示：

```
class MatrixI {
public:
  virtual int SizeX() const=0;
  virtual int SizeY() const=0;
  virtual float Map(int x, int y) const=0;
} 
```

因此，要使这一切正常工作，您应该根据上述接口实现您的操作 +、* 等：

```
class Matrix {
public:
   /* +,* -operations here */
private:
   MatrixI *ptr; // owned ptr
}; 
```

那么子矩阵就是从 MatrixI 到 MatrixI 的运算：

```
class SubMatrix : public MatrixI {
public:
SubMatrix(MatrixI *orig, int pos_x, int pos_y, int sx, int sy);
/* implement minimum required functions here */
private:
  MatrixI *orig;
  int pos_x, pos_y;
  int sx,sy;
}; 
```

# c++ - 为什么静态成员函数_declared_是静态的，而在C++中却是_defined_？

> ID：13531335
> 
> 赞同：18
> 
> 时间：2012-11-23T14:46:05.177
> 
> 标签：c++, static, scope, static-methods

这是一个最小的工作示例：

啊：

```
class A{
        static int a_member_function();
}; 
```

A.cpp

```
#include "A.h"
int A::a_member_function(){return 5;}

int main(){ return 1;} 
```

这段代码编译并运行，但是，在我看来：

```
static int A::a_member_function(){return 5;} 
```

可以很容易地用于定义类 A 的静态成员函数。事实上，有这个要求似乎实际上是相当有用的，因为它会提醒 .cpp 文件的读者 a_member_function 是静态的。

但是，这显然不起作用：

```
error: cannot declare member function ‘static int A::a_member_function()’ to have static linkage [-fpermissive] 
```

那么*为什么*它不起作用呢？这个决定背后的原因是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-23T14:56:58.390

背后的原因是 C++ 精神试图尽量减少其关键字的数量并保持与 C 的向后兼容性：`static`在那个位置具有完全不同的含义。

这一切都可以追溯到 C。C 中的“静态”函数是编译单元（.c 文件）独有的函数。它们不能被其他编译单元访问（这是在 C 中进行封装的一种方式）。这种用法在 C++ 中仍然有效。您也可以对全局变量执行相同的操作以限制其范围。

虽然，在 C++ 中，您还希望`static`出于不同的原因声明成员函数：这些函数属于类，但不需要运行所述类的实例（我敢打赌，您已经知道，我只是想完整）。

将成员函数定义为`static`会导致矛盾：该函数必须在其翻译单元之外访问。

在 C 和 C++ 之间还有另一种关键字重用的情况，即`auto`C++11 中的关键字，但它不太可能成为问题。

**注意：** 同样的事情发生`virtual`在声明中而不是定义中的关键字。

# java - Java：为什么我不能使用 BufferedReader 将分隔字符串写入文件？

> ID：13531341
> 
> 赞同：1
> 
> 时间：2012-11-23T14:46:23.407
> 
> 标签：java

我在分隔字符串时遇到了一个奇怪的问题（我最终想用 < 和 > 字符分隔），然后我可以将它输出到屏幕，但是当我尝试写入文本文件时，我得到一个 arrayIndexOutOfBoundsException。

```
 System.out.println(s[index]);
    String[] finalSplit = s[index].split("\\>");
    System.out.println(s[index]+finalSplit.length);
    System.out.println(finalSplit[1]);
    bufOut.write(finalSplit[1]); 
```

上面的示例输出如下：

```
 <env:MessageSentDateTime>2011-11-17T11:22:33.456Z</env:MessageSentDateTime>
    <env:MessageSentDateTime>2011-11-17T11:22:33.456Z</env:MessageSentDateTime>2
    2011-11-17T11:22:33.456Z</env:MessageSentDateTime

    Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1
          at Main.main(main.java:81) 
```

如果我不进行拆分，那么我可以将整个内容写入文本文件，但我只想要中间的信息。

有人对我哪里出错有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:05:55.580

我不确定，`BufferedOutStream`你用的是哪个。下面工作正常（你需要传递`byte[]`给`write`方法）：

```
String s=
    "<env:MessageSentDateTime>2011-11-17T11:22:33.456Z</env:MessageSentDateTime>";
String[] finalSplit  = s.split("\\>");
BufferedOutputStream bos = new BufferedOutputStream(
                                 new FileOutputStream(new File("delimited.txt")));
bos.write(finalSplit[1].getBytes());
bos.close(); 
```

它写道：`2011-11-17T11:22:33.456Z</env:MessageSentDateTime`在`delimited.txt`文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:02:05.033

排队

```
System.out.println(finalSplit[1]); 
```

您正在访问不存在的元素 1，因为拆分已全部移至 finalSplit[0]。更改拆分分隔符（例如“>”）

# javascript - 点击事件在 iPad/iPhone/Android 上对动态构建的元素不起作用

> ID：13531343
> 
> 赞同：1
> 
> 时间：2012-11-23T14:46:36.370
> 
> 标签：javascript, android, ios, dom-events, createelement

这就是我构建 DOM 的方式：

```
var projectOverlay = document.createElement("div");
projectOverlay.className = "projectOverlay";
projectOverlay.onclick = function(){openSlider($(this))};   
project.appendChild(projectOverlay); 
```

所以...`openslider(elem)`功能在所有浏览器中都可以正常工作，除了移动设备（Android 手机、iPhone、iPad 等...）。有没有其他方法可以将事件绑定到尚未创建的元素，或者我在这里做错了什么？

[现场示例](http://www.wheniamplaying.com/mmrApp/)- 单击联系人以获取项目，然后尝试单击其中一个项目以展开它。单击关于将带您回到主页。那仍然很乱​​，但是该网站仍处于早期开发阶段...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T08:09:34.700

尝试在 appendChild 之后移动 click 事件绑定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:27:54.137

在我的项目中遇到了同样的问题。动态创建的元素没有得到点击事件，除了在 iOS6 上（所以那里可能已经修复了一些东西）。我发现的解决方法是强制对包含动态创建的元素的 div 进行转换。页面加载时，包含我动态创建的元素的 div 确实存在。假设它有一个值为“container”的id属性，代码如下

```
var container = document.getElementById("container");
container.style.webkitTransitionDuration = "0";
container.style.webkitTransform = "translateY(0px)"; 
```

然后容器下动态创建的元素正在获取点击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:00:35.857

一些手机和浏览器没有在 JavaScript 中实现“onclick”事件。您应该使用对触摸更友好的事件，例如“touchstart”、“touchmove”和“touchend”。

更多信息：[https ://developer.mozilla.org/en-US/docs/DOM/Touch_events](https://developer.mozilla.org/en-US/docs/DOM/Touch_events)

# java - Java：使用 GridLayout 输入矩阵

> ID：13531346
> 
> 赞同：1
> 
> 时间：2012-11-23T14:46:40.957
> 
> 标签：java, swing, input, matrix, grid-layout

我正在尝试编写一个可以使用 GridLayout 输入任何大小的矩阵的函数，但我被卡住了，因为我找不到提取 JTextField 值以填充“mat”变量的合适方法（请参阅下面的 FIXME） .

```
 /**
     * @mat: matrix declared in main (e.g: mat[][] = new int[3][3];)
     * @rows: number of matrix rows (e.g: int rows = 3;)
     * @columns: number of matrix columns (e.g: int columns = 3;)
     */
    public static int[][] inputMatrix(int[][] mat, int rows, int columns)
    {
        JPanel panel = new JPanel();     
        panel.setLayout(new GridLayout(rows,columns));

        for (int a=0; a<(rows*columns); a++)
        {
            panel.add(new JTextField(a));
        }

        if (JOptionPane.showConfirmDialog(null, panel, "Enter the matrix", JOptionPane.OK_CANCEL_OPTION)
                                        == JOptionPane.OK_OPTION)
        {
            for(int a=0; a<(rows*columns); a++){
                for(int b=0; b<rows; b++){
                    for(int c=0; c<columns; c++){
                        /* FIXME: find how to extract JTextField values. */
                        mat[b][c] = JTextField.a.getText();
                    }
                }
            }
        }

        return mat;
    } 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:00:56.623

*   使用[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)而不是一堆`JTextField`放置的`GridLayout`

或者

*   在那里添加`putClientProperty`并添加[标识符`Row`a`Column`来自`GridLayout`](https://stackoverflow.com/a/9007348/714968)

*   放到`JTextField`_`HashMap`

*   我会更喜欢`putClientProperty`（你可以多玩号码或附加信息..，单独`putClientProperty`的数量不会以某种方式减少）

*   取决于（不清楚）设计，您可以添加`ActionListener`到`JTextField`（加速器是`ENTER key`）或`DocumentListener`

虚拟示例、代码示例`JButton`和`ActionListener`,`putClientProperty`可从所有方法访问或`Listeners`添加到`JTextField`

在循环

```
buttons[i][j].putClientProperty("column", i);
buttons[i][j].putClientProperty("row", j);
buttons[i][j].addActionListener(new MyActionListener()); 
```

并从 ActionListener 获取（例如）

```
public class MyActionListener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        JButton btn = (JButton) e.getSource();
        System.out.println("clicked column " + btn.getClientProperty("column")
                + ", row " + btn.getClientProperty("row"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:07:10.203

假设您有一个 3 行 x 3 列的网格。由于 GridLayout 按行添加，因此第二行的第一项将是您添加到网格的第四项。您可以通过调用 panel.getComponent(3) 检索此项目（零索引，因此第 4 个项目位于索引 3 处）。

所以 - 你可以只使用 getComponent，根据列数和矩阵中的 i、j 坐标做一些数学运算来找出正确的索引。

# svcutil.exe - Why SvcUtil.exe does not generate References.cs if I pass /reference parameter?

> ID：13531347
> 
> 赞同：2
> 
> 时间：2012-11-23T14:46:41.440
> 
> 标签：svcutil.exe

I observe strange behavior of SvcUtils.exe.

If I pass there /reference parameter, it does not generate *.cs file for some reason.

```
C:\test>"C:\Program Files\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools\SvcUtil.exe" /t:code http://localhost/Api/Common.svc /r:Api.dll
Microsoft (R) Service Model Metadata Tool
[Microsoft (R) Windows (R) Communication Foundation, Version 4.0.30319.17929]
Copyright (c) Microsoft Corporation.  All rights reserved.

Attempting to download metadata from 'http://localhost/Api/Common.svc' using WS-Metadata Exchange or DISCO.
Generating files...
C:\test\output.config 
```

At the same time, if I remove the parameter, it generates it normally.

```
C:\test>"C:\Program Files\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools\SvcUtil.exe" /t:code http://localhost/Api/Common.svc
Microsoft (R) Service Model Metadata Tool
[Microsoft (R) Windows (R) Communication Foundation, Version 4.0.30319.17929]
Copyright (c) Microsoft Corporation.  All rights reserved.

Attempting to download metadata from 'http://localhost/Api/Common.svc' using WS-Metadata Exchange or DISCO.
Generating files...
C:\test\CommonService.cs
C:\test\output.config 
```

Why? How to get the classes from Api.dll that are used in Api.svc to be generated in CommonService.cs?

UPD. Let me add some details that seem to me obvious but nevertheless important. The Api.dll assemply includes classes marked with **[DataContract]** attribute with properties marked with **[DataMember]** attribute. These classes are returned from methods visible in Api.svc. My goal is to **reuse** the classes from Api.dll in generated proxy code.

Why I find this behavior strange? It generates proxy classes normally for services without reuse, but if I add /r parameter to reuse classes, it refuses to generate code at all. So the question is what is done wrong? What could be done wrong to get this behavior and how to do it right to achieve the goal?

UPD2\. The most strange is that updating references from Visual Studio with checked "reuse" option works perfectly.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:57:56.637

我遇到了同样的问题。我实际上使用的是 svcutil，因为 Visual Studio 给了我错误，即无法创建 WCF 引用的代码并且没有提供更多信息。我最终在 VS 中启用了警告，这给了我更多信息。事实证明，我正在引用一个本身引用 WCF 服务的程序集。因此，某些类型被包含两次。然后类型的映射失败。我所做的是配置引用了哪些程序集。因此，我只选择了 WCF 服务，然后选择了标准的 .NET 系统程序集。我还禁用了生成数据合约（我启用它只是为了尝试）并且能够构建。

简而言之：确保您要使用的类型只被引用一次。

# css - IE6, Absolute Position, 100% Width

> ID：13531350
> 
> 赞同：2
> 
> 时间：2012-11-23T14:46:49.560
> 
> 标签：css, internet-explorer-6

Another problem with IE6.. It's my code:

**HTML:**

```
<div class="a">
    <div class="b">
        <div class="c">
            <span style="display:block; background:yellow; height: 170px; width:100%;"></span>
            <div class="d">
Hello World!            </div>
        </div>
    </div>
</div> 
```

**CSS:**

```
.a{
    background: black;
    float: right;
    height: 200px;
    margin: 0 2px;
    width: 200px;
}

.b{
    padding: 15px 10px;
}

.c{
    position: relative;
}

.d{
    background-color: green;
    bottom: 0;
    color: white;
    opacity: 0.85;
    position: absolute;
    left: 0;
    width: 100%;
    zoom: 1;
}

.e{
    font-weight: bold;
    padding: 7px;
} 
```

([live demo on jsfiddle.net](http://jsfiddle.net/Acp5V/7/)).

Check it in modern browsers and IE6\. You see something like that:

![fiddle in IE6](../Images/7231211141cff1ab635ee14bc12fe491.png)

How to fix it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:19:52.523

尝试这个：

HTML：

```
<div class="a">

            <span style="display:block; background:yellow; height: 170px; width:100%;"></span>
            <div class="d">
Hello World!            </div>

</div> 
```

CSS：

```
.a{
    border: 1px solid black;
    border-width: 15px 10px;
    height: 170px;
    margin: 0 2px;
    width: 180px;
    position: relative;
    float: right;
}
.d{
    background-color: white;
    bottom: 0;
    color: black;
    opacity: 0.85;
    position: absolute;
    left: 0;
    width: 100%;
}

.e{
    font-weight: bold;
    padding: 7px;
} 
```

# c# - Lambda 表达式 Linq-to-SQL 从记录 5 到 10 获取

> ID：13531353
> 
> 赞同：0
> 
> 时间：2012-11-23T14:47:06.983
> 
> 标签：c#, asp.net, sql-server, linq, lambda

我一直在尝试获得以下信息：

我有一张包含 20 个元素的表格。我正在尝试编写一种获取许多记录的方法，并带有某种偏移量。

例如：我想获得 5 个元素，从第 6 个开始......这意味着我想要记录 nr 6、7、8、9 和 10。

这些数字不是表中的列或 ID！我想以特定方式对表格进行排序，结果 id 被打乱。

到目前为止，这是我的查询：

```
project1_category[] categories = db.project1_categories.Select(c => c)
                                                       .OrderBy(c => c.Category)
                                                       .ToArray(); 
```

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T14:48:47.090

您需要使用`Skip`和`Take`：

```
project1_category[] categories = db.project1_categories.OrderBy(c => c.Category)
                                                       .Skip(5)
                                                       .Take(5)
                                                       .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:49:49.607

你需要使用`Skip`

[Enumerable.Skip 方法](http://msdn.microsoft.com/en-us/library/bb358985.aspx)

和`Take`

[Enumerable.Take 方法](http://msdn.microsoft.com/en-us/library/bb503062.aspx)

```
var categories = db.project1_categories.Select(c => c).
    OrderBy(c => c.Category).Skip(5).Take(5).ToArray(); 
```

# android - 如何让我的动画从屏幕底部到顶部？

> ID：13531354
> 
> 赞同：2
> 
> 时间：2012-11-23T14:47:16.473
> 
> 标签：android, animation, imageview, surfaceview

这是我的xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <SurfaceView
        android:layout_width="match_parent"
        android:layout_height="10dp"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="0dp" />

</RelativeLayout> 
```

我想让这个观点随着时间的推移而增长。

这是动画的代码

```
SurfaceView surfaceViewTimer = (SurfaceView) findViewById(R.id.surface_view_timer);
Animation surfaceGrowingAnimation = new TranslateAnimation
    (0, 0, Animation.ZORDER_TOP, 300);
surfaceGrowingAnimation.setDuration(5000);

surfaceViewTimer.startAnimation(surfaceGrowingAnimation); 
```

我想让这个动画从屏幕底部到顶部。目前它是从上到下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:15:28.533

您可以使用`ScaleAnimation`.

例如，修改布局以使表面占据整个屏幕：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<SurfaceView
    android:id="@+id/surface"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="0dp"
    android:background="@color/red"
     /> 
```

然后在 Y 轴上从 0 缩放到 1：

```
 SurfaceView surface = (SurfaceView) findViewById(R.id.surface);

    ScaleAnimation animation = new ScaleAnimation(1.0f, 1.0f, 0.0f, 1.0f);
    animation.setDuration(5000);
    surface.startAnimation(animation); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:43:47.973

你可以这样做`TranslateAnimation`：

```
 final SurfaceView surface = (SurfaceView) findViewById(R.id.surface);

    surface.post(new Runnable() {
        @Override
        public void run() {
            TranslateAnimation translation = new TranslateAnimation(0f, 0f, surface.getHeight(), 0f);
            translation.setDuration(2000);
            surface.startAnimation(translation);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T17:04:31.497

您可以通过结合缩放和平移动画来做到这一点。平移动画将有助于改变视图的位置，而动画中的缩放将有助于改变大小。并在您的代码中使用 Accelerate_Decelerate 插值器。插值器将提供所需的效果。您可以尝试使用不同类型的可用插值器来实现效果。

# html - the sound within is not recognized

> ID：13531356
> 
> 赞同：0
> 
> 时间：2012-11-23T14:47:26.237
> 
> 标签：html, html5-audio, filepath

I am following a w3school [audio tutorial](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_audio)

The issue is that the audio file is not found. When I click on the link where the browser is looking for the audio it is showing:

```
file:///D:/________mySite/sounds/Silence.mp3 
```

Which is indeed the place where the .mp3 is.

Any ideas how to resolve this?

The code is:

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Kawasaki - ultimate superbikes</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<link href="default.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
<!-- start header -->
<audio controls="controls" autoplay="autoplay" loop="loop">
  <source src="sounds/Silence.ogg" type="audio/ogg">
  <source src="sounds/Silence.mp3" type="audio/mp3">
 Your browser does not support the audio element.
</audio>
</body>
</html> 
```

# powershell - 创建可重复使用的脚手架

> ID：13531357
> 
> 赞同：0
> 
> 时间：2012-11-23T14:47:27.330
> 
> 标签：powershell, t4, t4scaffolding

我按照使用[T4 Scaffolding包](http://nuget.org/packages/T4Scaffolding)[创建自定义脚手架](http://average-uffe.blogspot.ca/2011/06/basics-in-t4scaffolding-in-visual.html)的说明进行操作，效果很好。然而，在这个过程中，我发现我需要构建许多可重用的组件，这些组件将在多个脚手架和模板之间共享。

我知道我可以构建一个类库并在 GAC 中注册它以使其可供 powershell 脚本和 T4 模板访问，但在团队环境中，这并不总是可行的。我更愿意将可重用组件签入源代码管理并以某种方式使其可访问。

我采用的一种方法是将 T4 模板拆分为多个文件，然后`include`将它们全部放入主模板中。

```
<#@ include file="Extensions.cs.t4" #> 
```

但是，如果我在任何一个模板中定义一个类，该类将成为一个嵌套类，因此不能是静态的（例如）。

有没有办法构建可重用的类、方法、扩展并使自定义脚手架可以访问它们，而无需将它们安装到 GAC？T4Scaffolding 包具有许多[可在自定义脚手架中访问的实用功能](http://mvcscaffolding.codeplex.com/wikipage?title=T4Scaffolding%27s%20cmdlets%20for%20use%20in%20custom%20scaffolders&referringTitle=Documentation)。他们是如何做到的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:45:25.890

[我想我是在这个答案](https://stackoverflow.com/a/9084847/99373)的帮助下想出来的。我必须用我所有的共享代码构建一个程序集。然后，在 Powershell 脚本中，我只需要：

```
import-module "d:\path\to\assembly.dll" 
```

希望对某人有所帮助。如果有人有更好的想法，请分享。

# ios - iOS Quartz PDF add file and destination links to a new pdf

> ID：13531358
> 
> 赞同：0
> 
> 时间：2012-11-23T14:47:27.330
> 
> 标签：ios, pdf, hyperlink, anchor, quartz-graphics

i use this code below to parse a PDF file and extract three different types of URI's/data.

**1) Normal URL**

**2) Anchor within the PDF**

**3) A file link example "../other.pdf"**

See Code here: [http://pastebin.com/LMJtVGZw](http://pastebin.com/LMJtVGZw)

--

Due to a user requirement i create a PDF file within my application and i need to insert the three mentioned types of URI's/data.

**1) Normal URL can be created with these lines of code**

[http://pastebin.com/HdetkSvT](http://pastebin.com/HdetkSvT)

**2) Anchor, this code doen't work and i'm not able to parse it (See case #2 above)** [http://pastebin.com/DfZwsK33](http://pastebin.com/DfZwsK33)

**3) A file link example "../other.pdf"**

I have no idea :-(

I hope someone can help me to get #2 and #3 working.

Thank you guys!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:29:24.933

对于第二部分，您粘贴的代码仅包含`CGPDFContextAddDestinationAtPoint`

定义锚点的代码。这实际上不会在 PDF 文件中生成任何内容（它与 HTML 不同，其中锚点存在于 HTML 代码中的某处）。

您是否还用于`CGPDFContextSetDestinationForRect`设置实际的链接注释？这是应该在文件中生成实际 PDF 对象的那个...

# java - 当 MouseListener 处于活动状态时键盘失去焦点

> ID：13531359
> 
> 赞同：1
> 
> 时间：2012-11-23T14:47:28.977
> 
> 标签：java, focus, keylistener, mouselistener

我正在制作一个两人游戏小程序。两名球员都需要控制他们的飞盘以防止球与墙壁发生碰撞。一名玩家通过鼠标移动控制他的光盘，并通过键盘上下控制其他控件。问题是第二个玩家无法控制他的光盘，因为由于 MouseMotionListener，键盘键无法保持焦点。我不知道如何解决这个问题。这是代码：

```
public void init()
{
handle = new HandlerClass();

addMouseMotionListener(handle);
addKeyListener(handle);
}

private class HandlerClass implements MouseMotionListener,KeyListener
{       
public void mouseMoved(MouseEvent event)
{
    MouseY=event.getY();

    if(MouseY<=0)
        MouseY=0;
    else
        if(MouseY>=getHeight()-radius*2-1)
            MouseY=getHeight()-radius*2-1;

}
public void keyPressed(KeyEvent event)
{
    switch(event.getKeyCode())
    {
    case KeyEvent.VK_UP:

        if(keyboardY<=0)
        {
            keyboardY=0;
        }

        keyboardY=keyboardY+1;
        break;

    case KeyEvent.VK_DOWN:

        System.out.println("down key pressed");
        if(keyboardY>=getHeight()-radius*2-1)
        {
            keyboardY=getHeight()-radius*2-1;
        }
        keyboardY-=1;
        break;
    }
 } 
```

**编辑：** 我通过添加解决了键盘失去焦点的问题，`setFocusable(true);`但现在游戏像地狱一样闪烁。我不知道游戏中发生了什么。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:22:38.697

对键盘和鼠标操作使用不同的侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:42:19.957

使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) over `KeyListener`，它提供了指定不同焦点上下文的能力。

In regard to you second question, it sounds like you're painting directly onto a top level container. I'd post a separate question with example code.

# java - How to do an ItemReaderAdapter without initializingBean

> ID：13531360
> 
> 赞同：0
> 
> 时间：2012-11-23T14:47:29.343
> 
> 标签：java, spring, spring-batch

In the final step of my job, it would be easier for me to call an existing DAO that would query and return a complex graph of object i need to persist with an ItemWriter as an XML. I use XStream with annotation.

Every example of ItemReaderAdapter i see implements the initializingBean to initialize the collection of objects i need to iterate thru (Basically,do the query on the DB).

This would work great if my data would be in the DB when the afterPropertiesSet() is invoked(at the start of the job!), but the data i have to read is persisted in the steps of the current job. How can i use ItemReaderAdapter in this case?

Summary:

step 1 : read an xml and write the objects in the DB (trxA)

step 2 : read a flatFile and write the object in the DB (trxB)

step 3 : business logic on trxA

step 4 : business logic on trxB

step 5 : (this is the one ;-)) call the DAO that will return an unifiedObject of trxA and trxB.

basically, i need to know : Is there a way i can tell my adapter to initialize at the start of the step instead of the start of the job?

Regards

Edit: to be clear, here is an example taken in a book

```
public class ProductServiceAdapter implements InitializingBean {
  private ProductService productService;
  private List<Product> products;
public void afterPropertiesSet() throws Exception {
  this.products = productService.getProducts();
}
public Product nextProduct() {
  if (products.size()>0) {
    return products.remove(0);
  } else {
    return null;
  }
} 
```

The DAO access is done in the afterPropertieSet() so it does not work in my case.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:37:32.930

如果您想在步骤开始时做“事情”，请使用它并实现 beforeStep()

[步骤执行监听器](http://static.springsource.org/spring-batch/2.0.x/reference/html-single/index.html#stepExecutionListener)

然后你像这样配置它

```
<step id="concreteStep">
<tasklet>
    <chunk reader="itemReader" writer="itemWriter" commit-interval="5"/>
    <listeners>
        <listener class="com.Listener"/>
    <listeners>
</tasklet></step> 
```

# emacs - Force expansion of macro in macrolet's environment

> ID：13531362
> 
> 赞同：1
> 
> 时间：2012-11-23T14:47:46.580
> 
> 标签：emacs, macros, lisp, elisp

Here's what I'm trying to do:

```
(defun test-macrolet ()
  (macrolet
      ((%test 
        (x)
        (message "%%test is called")
        `(message "x: %s" ,x))
       (%aref (array place)
              `(aref ,array ,place)))
    ;; it doesn't expand to (message "x: %s" 100)
    (message "expanded: %s" (macroexpand-all '(%test 100)))
    (%test 100)
    (%aref (%test 100) 0))) 
```

I'm calling this function from inside another macro, where I'd like to expand all inner macros where some had to be defined locally. To, perhaps, give you a better idea, I want this:

```
(iter (for i from 0 to 10)
      (when (oddp i) (collect i))) 
```

to expand in environment where macros `for` and `collect` are defined, but I don't want these macros to be defined globally (obviously, not the best names to put into global name space).

I hoped that by defining a local macro with `macrolet` I could expand the form containing macros defined locally, and then return the expansion, but `macroexpand` and `macroexpand-all` act as if they don't recognize locally defined macros (and don't expand them).

Well, hope I'm making myself clear...

**EDIT**

Thanks to an answer the respondent decided to remove, I've started to search for ways of obtaining lexical environment in Emacs Lisp. I found this example function:

```
(defun byte-compile-make-lambda-lexenv (form)
  "Return a new lexical environment for a lambda expression FORM."
  ;; See if this is a closure or not
  (let ((args (byte-compile-arglist-vars (cadr form))))
    (let ((lexenv nil))
      ;; Fill in the initial stack contents
      (let ((stackpos 0))
    ;; Add entries for each argument
    (dolist (arg args)
      (push (cons arg stackpos) lexenv)
      (setq stackpos (1+ stackpos)))
    ;; Return the new lexical environment
    lexenv)))) 
```

in bytecomp.el. Which on the surface of it means that the environment is just a alist made of function (macros in my case) names and their "position on the stack", I don't quite understand the second part, but will experiment and we'll see...

**EDIT 2**

OK, this seems like it would work:

```
(defun test-macrolet ()
  (macrolet
      ((%test 
        (x)
        (message "%%test is called")
        `(message "x: %s" ,x))
       (%aref (array place)
              `(aref ,array ,place)))
    (%test 100)
    (%aref (%test 100) 0)
    (message "expanded: %S" 
             (macroexpand
              '(%test 100)
              (cons `(,@(list (intern "%test")) . 
                      (lambda (y)
                        (message "Called from environment '%s'" y)
                        `(message "Final expansion '%s'" ,y)))
                    macroexpand-all-environment)))))

(test-macrolet)
"expanded: (message \"Final expansion '%s'\" 100)" 
```

Sorry for the sloppy code. Some more info: `macroexpand-all-environment` is the variable where compiler / interpreter stores current environment. The environment object contains `(expander-name . expander-function)` pairs, where the car of the pair is the symbol which was encountered at this step of macro expansion and cdr is the function which should handle the expansion.

**EDIT 3**

As this seems to be very confusing to readers, here's why I don't want to return a form containing a `macrolet`, but rather expand everything before generating the code.

While processing the top-level form, I'm creating a bunch of objects, well, I'll call it an AST (abstract syntax tree), but it's not really that, it's just some complex model of the code I'm going to generate from the macro. If macros are expanded repeatedly, the AST will be lost in subsequent expansions, besides, I will not be able to properly generate the next step of expansion and will not be able to do certain manipulations on the code, as for example, some forms rely on their stray logical parts will be present deeper inside the "foreign" expressions. It is really easier for me to generate the code then to rely on the macro expansion mechanism in many cases. So, for example, answering to @6502:

> what should (for...) expand to given that the for form is closed before the body?

It is not expanded in the regular sense of the word. The form is parsed, the parts of it are extracted into a special object, that is being later used in generating the final code. For example:

```
(iter (for var in '(1 2 3 4))
      (when (oddp var) (collect (next var))) 
```

Will first create an object, that registers two variables `var` and an autogenerated variable, where the result is stored, let's call it `--0` (because that's how I indeed generate the names). I can only find out that I need `--0` variable only after parsing the second expression inside `iter`. So, if I expanded `for` very early into some `let` expression, and only after that first expansion had I discovered that I need to add one more variable - that would be too late. I.e. the expansion of the above should look something like this:

```
(let (--0 var (--1 '(1 2 3 4)))
  (while --1
     (setq var (car --1) --1 (cdr --1))
     (if (oddp var) (setq --0 (cons (cadr --l) --0))))
  --0) 
```

If I had to generate a `macrolet` with half-expanded previous expression, I would've not known which variable do I have to collect into, how to generate the `next` expression and so on.

> Also why does collect need to be a macro and not just a local function?

There's no requirement it be either, I just need it to signal during macro expansion process to me so that I could generate appropriate code. It, technically, doesn't expand into anything (hypothetically, it could be even ignored during expansion, if some code analysis will show it creates unreachable code, for example).

**EDIT 4**

This is getting really long, sorry. Besides the schema and the state of expansion that I must preserve during the entire expansion process, there another reason. Consider two following examples:

```
(iter (for (key . value) in some-hash-table)
      (message "key: %s => value: %s" key value)) 
```

This code is not expected to generate a `(while ...)` loop, because it is inefficient to do so, and it is better to use a `(maphash ...)` here. However:

```
(iter (for (key . value) in some-hash-table)
      (for (key-2 . value-2) in some-other-hash-table)
      (message "key: %s => value: %s" (list key key-2) (list value value-2))) 
```

Will require generating an additional form for collecting the keys of the second hash table (or the firs one, whichever is smaller) and quite a bit of code will have to go into the section preceding the first `(maphash ...)` expression that could've been generated earlier. So, if I generated a macrolet here, I would be stuck in a situation, where I have to generate the code, which has already been generated, i.e. I'd had stale expression, that I would need to go back and reparse (if I'm lucky and I can somehow still reach there).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:32:12.697

我仍然不确定您要做什么。但是您编写的代码`macroexpand-all`不是在宏扩展时运行，而是在运行时运行，这就是为什么 %text 在那个时候不存在（与第二个相反`(%test 100)`，应该宏扩展就好了）。

我认为您想要的内容如下：

```
(defmacro iter (&rest elems)
  `(macrolet ((for (..) ...)
              (collect (..) ...))
     ,@elems)) 
```

`for`如果你说你真的需要在和`collect`宏的各种扩展期间保持一些本地状态，那么你应该完全放弃`macrolet`并使用更像;

```
(defmacro iter (&rest elems)
  (let (..some.local.state..)
    (let ((body (macroexpand-all `(progn elems)
                                 `((for  . ,(lambda (..) ...))
                                   (loop . ,(lambda (..) ...))
                                   ,@macroexpand-all-environment))))
     ...))) 
```

它只是复制`macrolet`内部所做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:42:39.783

您应该做的只是从包含`macrolet`. 从宏返回的内容已经再次进行宏扩展，因此很少需要自己进行显式宏扩展。

`macrolet`并且`symbol-macrolet`在大多数情况下使您免于代码遍历，因为编译器会为您正确处理宏隐藏进行遍历。

我记得唯一需要显式扩展宏的情况是宏必须在外部级别生成不同的代码，具体取决于是否使用了另一个本地宏。

你的例子对`iter`我来说没有多大意义......`(for...)`鉴于`for`表格在正文之前关闭，应该扩展什么？如果列表只是一个语法要求（例如 or 发生了什么`dolist`） ，`dotimes`那么`for`它不是一个宏，而是由`iter`显式处理的东西，因为这是唯一可以接受的位置。

宏仅在代码位置进行检查，并且仅当它们可以放置在其有效性上下文中的**任何**代码位置时才应使用 IMO 。它们是抽象的，而不是随机的 s 表达式块。

另外为什么`collect`需要一个宏而不仅仅是一个本地函数？

# python - Python script to generate JUnit report from another testing result

> ID：13531364
> 
> 赞同：19
> 
> 时间：2012-11-23T14:47:49.857
> 
> 标签：python, junit, jenkins

I have an acceptance test case, the result is plain text. I want to use Jenkins to show the result, and the JUnit format is suitable for me.

So I want to check whether there is existing python code to generate JUnit-format XML, so that I can easily just add my parsing code.

[Related question](https://stackoverflow.com/questions/4922867/junit-xml-format-specification-that-hudson-supports).

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T14:52:02.277

上面的Corey 建议使用junitxml，但我和larrycai 在同一条船上，因为我没有编写单元测试来测试Python 代码。我正在编写 Python 脚本来进行黑盒系统测试，并且只想在 JUnit XML 中输出结果，而无需重新发明轮子。

我简要查看了上面 larrycai 建议的 David Black 的“python junit xml 输出模块”，但最终选择了另一个类似的包。不确定哪个更好，因为我只尝试过这个，但它最终对我来说效果很好。

仅相差一个字符，但封装为“junit-xml”： [https ://pypi.python.org/pypi/junit-xml/1.0](https://pypi.python.org/pypi/junit-xml/1.0)

当心...他的自述文件中的示例有错误并且不起作用。我在 github 上报告了错误（pypi 页面中包含 github 链接）。他的“prettyprint”arg 处理也有一个错误，但我会建议您参考我也在 github 上报告的问题 #3，其中包含了我的修复。如果您下载源代码，您可以查看他的 test.py 单元测试，但这也是我的测试脚本，我在其中测试/实验了几个示例（使用 Python 3.3）：

```
#junit-xml 1.0 downloaded from https://pypi.python.org/pypi/junit-xml
from junit_xml import TestSuite, TestCase

#Good article that has examples of how Jenkins parses JUnit XML to display output:
#http://nelsonwells.net/2012/09/how-jenkins-ci-parses-and-displays-junit-output/

#One version of JUnit XML schema: http://windyroad.org/dl/Open%20Source/JUnit.xsd

def testBasicToConsole():
    ''' Perform the very basic test with 1 suite and 1 test case, output to console.
        This is the example from the above referenced pypi webpage, but corrected to
        actually work.
    '''

    test_cases = [TestCase('Test1', 'some.class.name', 123.345, 'I am stdout!', 'I am stderr!')]
    ts = [TestSuite("my test suite", test_cases)]
    # pretty printing is on by default but can be disabled using prettyprint=False
    print(TestSuite.to_xml_string(ts, prettyprint=False))

def testBasicInfoToConsole():
    ''' Actually, even more basic than the test above, with classname, stdout, and stderror
        removed to demonstrate they are optional.  For system testing we often won't use them.
        Output to console.
    '''

    test_cases = [TestCase('PathCheck: ApplicationControl', '', .0523, '', '')]
    ts = [TestSuite("DirectorITG2", test_cases)]
    # pretty printing is on by default but can be disabled using prettyprint=False
    print(TestSuite.to_xml_string(ts))

def testFailureInfoToConsole():
    ''' 1 suite and test case with failure info added. Output to console.
    '''

    test_cases = TestCase('FileCheck: DesktopNotificationCenter', '', .0451, '', '')
    test_cases.add_failure_info('Invalid File \'DNC.exe\'.')
    ts = [TestSuite("DirectorITG2", [test_cases])]
    # pretty printing is on by default but can be disabled using prettyprint=False
    print(TestSuite.to_xml_string(ts))

def testMultiTestCasesToConsole():
    ''' Demonstrates a single test suite with multiple test cases, one of which
        has failure info. Output to console.
    '''

    test_cases = [TestCase('FileCheck: DesktopNotificationCenter', '', .0451, '', '')]
    test_cases.append(TestCase('FileCheck: PropertyServer', '', .0452, '', ''))
    test_cases[0].add_failure_info('Invalid File \'DNC.exe\'.')
    ts = [TestSuite("DirectorITG2", test_cases)]
    # pretty printing is on by default but can be disabled using prettyprint=False
    print(TestSuite.to_xml_string(ts))

def testMultiTestSuitesToConsole():
    ''' Demonstrates adding multiple test suites. Output to console.
    '''

    test_cases = [TestCase('FileCheck: DesktopNotificationCenter', '', .0451, '', '')]
    ts = [TestSuite("FileChecks", test_cases)]
    ts.append(TestSuite("ProcessChecks", [TestCase('ProcessCheck: ApplicationControl', '', 1.043, '', '')]))
    # pretty printing is on by default but can be disabled using prettyprint=False
    print(TestSuite.to_xml_string(ts))

def testMultiTestCasesToFile():
    ''' Demonstrates a single test suite with multiple test cases, one of which
        has failure info. Output to a file with PrettyPrint disabled (Jenkins-friendly).
    '''

    test_cases = [TestCase('DesktopNotificationCenter', 'Integration.FileCheck', .0451, '', '')]
    test_cases.append(TestCase('PropertyServer', 'Integration.FileCheck', .5678, '', ''))
    test_cases[0].add_failure_info('Invalid File \'DNC.exe\'.')
    ts = [TestSuite("GII_2013_R1", test_cases)]
    # open the file, then call the TestSuite to_File function with prettyprint off.
    # use raw text here to protect slashes from becoming escape characters
    with open(r'C:\Users\Administrator\.jenkins\workspace\IntegrationTests\FileCheck.xml', mode='a') as lFile:
        TestSuite.to_file(lFile, ts, prettyprint=False)
        lFile.close()

if __name__ == '__main__':
    ''' If this module is being run directly, run all of the example test functions.
        Test functions output JUnit XML for various scenarios to either screen (Console)
        or file.

    '''
    testBasicToConsole()
#    testBasicInfoToConsole()
#    testFailureInfoToConsole()
#    testMultiTestCasesToConsole()
#    testMultiTestSuitesToConsole()
#    testMultiTestCasesToFile()

else:
    ''' Function calls for an external run of this script.

    '''
    testMultiTestCasesToFile() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T15:07:44.367

您可以使用[`junitxml`](https://launchpad.net/pyjunitxml)（Python JUnit XML 报告器）

在 PyPI 上：http: [//pypi.python.org/pypi/junitxml](http://pypi.python.org/pypi/junitxml)

如果您有一个`unittest`名为`suite`. 您可以运行它，并将结果写入一个 xml 文件，如下所示：

```
import junitxml

fp = file('results.xml', 'wb')
result = junitxml.JUnitXmlResult(fp)
result.startTestRun()
TestSuite(suite).run(result)
result.stopTestRun() 
```

或发现测试并将 xml 打印到标准输出：

```
python -m junitxml.main discover 
```

* * *

另一种选择是使用[`nose`](https://nose.readthedocs.org)和运行您的套件：

```
nosetests --with-xunit 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:58:13.937

[`collective.recipe.xmltestreport`构建配方包](http://pypi.python.org/pypi/collective.xmltestreport)正是这样做的。它获取测试运行器输出并创建适合 JUnit 的 XML 文件。但是，它是特定于[构建](http://www.buildout.org/)的并使用[`zope.testrunner`测试运行程序包](http://pypi.python.org/pypi/zope.testrunner)。

如果切换到 buildout 不是您的选择，您可以研究它的[源代码](https://github.com/collective/collective.xmltestreport/tree/master/collective/xmltestreport)以提取重要部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T02:14:21.470

在这里，我从 github [https://github.com/kyrus/python-junit-xml得到了另一个包](https://github.com/kyrus/python-junit-xml)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T00:51:10.933

我找到了一个 python 模块[https://bitbucket.org/db_atlass/python-junit-xml-output-module/](https://bitbucket.org/db_atlass/python-junit-xml-output-module/)，看起来很适合我的需要。谢谢大卫布莱克那里

```
# code snippet for the usage
""" a short example of how to use this module """
test_cases = []
for i in range(0, 5):
    type_c = ""
    if i % 2 == 0:
        type_c = "failure"
    test_cases.append(TestCase(i, str(i) + "contents", type_c) )

junit_xml = JunitXml("demo test example", test_cases) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-06T11:58:28.290

这里有很好的答案：（有很多方法可以做到） [Jenkins 中的 Python 单元测试？](https://stackoverflow.com/questions/11241781/python-unittests-in-jenkins)

恕我直言，最好的方法是**编写 python unittest 测试**并**安装 pytest**（类似于'yum install pytest'）来安装 py.test。然后**像这样运行测试： 'py.test --junitxml results.xml test.py'**。您可以运行任何 unittest python 脚本并获取 jUnit xml 结果。

[https://docs.python.org/2.7/library/unittest.html](https://docs.python.org/2.7/library/unittest.html)

在 jenkins 构建配置 构建后操作 使用 result.xml 和您生成的任何更多测试结果文件添加“发布 JUnit 测试结果报告”操作。

# android - Android: strange error in Manifest

> ID：13531365
> 
> 赞同：7
> 
> 时间：2012-11-23T14:47:50.777
> 
> 标签：android, android-manifest, manifest

I was modyfing my android app, and I was trying it on real device (Run Application in eclipse) and all was working good. So When I was satisfied of my changes, I opened the Manifest in order to modify the version for releasing it, but WITHOUT ANY CHANGES in Manifest an error occurred at line:

```
<uses-permission android:name="android.permission.INSTALL_PACKAGES" /> 
```

the error is:

```
Permission is only granted to system apps 
```

How is this possible? I builded my application many times using this line.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-23T15:06:55.323

谢谢大家。我解决了这个奇怪的问题

```
 Project > Clean 
```

现在一切都恢复正常了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:52:55.230

您可能不会自己安装软件包，甚至不要问这个问题。

用于`Intent`此目的：

```
Intent installIntent = new Intent(Intent.ACTION_VIEW );
installIntent.setDataAndType(
    Uri.parse("file://" + context.getFilesDir().getAbsolutePath() + "/" + file_name_to_install),
    "application/vnd.android.package-archive");
startActivity(installIntent); 
```

如果您使用的是 Eclipse，很可能它使用了旧版本/过时版本的 Manifest，当您打开它时，更改会重新加载并显示错误消息。只需删除违规权限并使用意图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-21T07:53:55.613

如果您已经更改了棉绒偏好，则清洁将起作用。否则检查以下解决方案。

[权限仅授予系统应用程序](https://stackoverflow.com/questions/13801984/permission-is-only-granted-to-system-app)

它说要更改您的 Lint 设置

**在 Eclipse 中：**

> 窗口 -> 首选项 -> Android -> Lint 错误检查。

在列表中找到带有 的条目`ID = ProtectedPermission`。将 Severity 设置为低于 Error 的值。这样您仍然可以使用 Eclipse 编译项目。

**在 Android Studio 中：**

```
File -> Settings -> Inspections 
```

在 下`Android Lint`，找到`Using system app permission`。取消选中该复选框或选择低于错误的严重性。

# php - Sonata admin - “order by” does't work for Entity

> ID：13531366
> 
> 赞同：4
> 
> 时间：2012-11-23T14:47:59.230
> 
> 标签：php, sorting, symfony, admin, sonata-admin

I can't make to work a entity sorting in the sonata admin listing, here is my entity:

```
class User extends BaseUser {
/**
* @ORM\ManyToOne(targetEntity="Region", inversedBy="users")
*/
protected $preferredRegion;
} 
```

And here is the configureListFields definition:

```
 protected function configureListFields(ListMapper $listMapper) {
     $listMapper->add('preferredRegion', NULL, array('label' => 'Preferred Region',  'sortable' => 'preferredRegion'))
 } 
```

When clicking on the table head column to sort it by my entity name I get this error:

An exception has been thrown during the rendering of a template ("[Semantical Error] line 0, col 25 near 'AS __order_by': Error: Entity\User has no field or association named AS")

How can I make this sort to work for the entity so it sorts alphabetically by my entity name?

Thank you

Julian Mancera

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T18:38:48.223

尝试：

```
$listMapper->add('preferredRegion.id', NULL, array('label' => 'Preferred Region')); 
```

如果可行，您可以在该表中放置其他列的 .title、.name 而不是 .id。

# jquery - put tinymce toolbar on external div

> ID：13531368
> 
> 赞同：1
> 
> 时间：2012-11-23T14:48:01.277
> 
> 标签：jquery, html, css, tinymce, html-editor

How can I put tinymce toolbar on external div? I try this successfull:

[TinyMCE Toolbar location](https://stackoverflow.com/questions/10819966/tinymce-toolbar-location)

It put toolbar on external but it doesn't load css theme for displaying toolbar, because css are load in iframe, so toolbar isn't shown.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:54:43.780

几个月前，这对我来说一直是个问题。您需要做的就是将外部工具栏移动到您想要的位置。我在我的一个插件中编写了一个函数。在我的页面上，我创建了一个带有“externalToolbarWrapper”类的 div，我在其中插入了工具栏。这是那个功能。您可能需要稍微调整一下，但认为它会对您有所帮助。

```
 showExternalToolbar: function(){

        if (this.editor.getParam('theme_advanced_toolbar_location') != 'external') return;

        if (!document.getElementById('externalToolbarWrapper')) $(document.body).prepend('<div id="externalToolbarWrapper"></div>');

        var $toolbar = $('#'+this.editor.id + '_external');

        // inserts the external toolbar in the external wrapper
        $('#externalToolbarWrapper').append('<div id="replacementDiv"></div>');

        $('#replacementDiv').replaceWith($toolbar.show());
        $toolbar.css('top','0px');
        $toolbar.css('display','block');

        $('#' + this.editor.id + '_external_close').remove();
        $('#' + this.editor.id +'_toolbargroup').css('width', innerWidth || 800); // innerwidth is an integer value
    }, 
```

如果您不想将上面的代码放在自己的插件中，则应该调用上面的代码 onInit（在此处使用[setup 配置参数](http://www.tinymce.com/wiki.php/Configuration%3asetup)）

```
 setup : function(ed) {
      ed.onInit.add(function(ed) {
          // place your code here
      });
   }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:39:22.917

伙计们，如果你想试试这个，它更容易更短

```
setup:function(ed){
    ed.onInit.add(function(ed, evt){
        $toolbar = $('#'+ed.id+'_external');
        $toolbar.hide().appendTo('yourExternalDiv');
    });
} 
```

“穆西夫·穆拉”

# iphone - Make a flash effect

> ID：13531369
> 
> 赞同：0
> 
> 时间：2012-11-23T14:48:01.713
> 
> 标签：iphone, ios, cocos2d-iphone

Can we make something like flash effect in cocos2d? I mean increase color to some value in N seconds and then decrease it to alpha. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:38:40.810

您可以使用：[粒子设计器](http://particledesigner.71squared.com)

# javascript - Assign dynamic value to a variable on reasizing window - javascript

> ID：13531370
> 
> 赞同：0
> 
> 时间：2012-11-23T14:48:02.383
> 
> 标签：javascript, jquery, variables, dynamic, resize

I need to assign a dynamic value to a variable. Specifically, I would like to assign the window width and detect if window has been resized.

To assign window width I know it would be as follows:

```
var windowWidth = $(window).width(); 
```

But I dont't know how to get window width when it has been resized, so that variable would always have the current window width.

Is that possible? I can't find the way to do that!

Than you very much in advanced!

Jur.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:50:08.310

```
$(window).on('resize', function() {
    var w = $(window).width();
}); 
```

[**演示**](http://jsfiddle.net/RtP45/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:51:08.983

如果您这样做是为了检查窗口何时被调整大小，为什么不向窗口调整大小事件添加事件处理程序呢？

```
$(window).resize(function() {
    alert("resized");
}); 
```

如果您只希望函数在调整大小完成后运行一次，请尝试以下操作：

```
var resizeTimer;
var windowWidth;
$(window).resize(function() {
   clearTimeout(resizeTimer);
   resizeTimer = setTimeout(function() {
       windowWidth = $(window).width();
       alert("New width: " + windowWidth);
   }, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:50:18.280

您可以使用此事件：

```
window.onresize = function(event) {
    windowWidth = $(window).width();
} 
```

# google-chrome-extension - Manifest file is invalid

> ID：13531372
> 
> 赞同：1
> 
> 时间：2012-11-23T14:48:04.767
> 
> 标签：google-chrome-extension

I successfully uploaded a new version of my extension [to the chrome app](https://chrome.google.com/webstore/detail/producteev-auto-login/dbmjalgigkhfhmckigghggodkafpfdfl/related) store, and I'm suddenly getting `Manifest file is invalid` errors when I try to install it.

[Here is the source code](https://github.com/ripper234/producteev-auto-login) (specifically, I tried to upload [this package](https://github.com/ripper234/producteev-auto-login/blob/master/releases/1.4.zip)).

How do I fix it? The one thing I tried to change is make the extensino's icon disappear, according to [this answer](https://stackoverflow.com/a/13041001/11236). I tried several things like not using a `browser_action` or using a `page_action` instead ... but I keep getting an error when I try to install the extension through the app store (no error on upload though!)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-19T22:22:04.663

当我在短时间内连续发布太多次时，我会遇到这个问题。我相信您的浏览器正在缓存下载的包（即使用以前下载的版本），然后根据新发布的打包元数据验证包。

它应该在 10 分钟左右后自行纠正。

这对我来说也是一个非常烦人的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:54:23.540

几分钟后，这似乎已经解决了。奇怪的。

# xml - Getting a random venue using actionscript with no repeat

> ID：13531375
> 
> 赞同：0
> 
> 时间：2012-11-23T14:48:22.480
> 
> 标签：xml, actionscript-3, random, random-access

Hi users of stack overflow I am currently struggling with randomizing my data via as3 and xml.

I can load in the xml fine and generate a random venue however when I click on the random button I have created, the same node is shown twice! Basically I just want to randomly select data with **no repeat** of the previous venue if this makes sense.

My xml:

```
<gallery>
<venue>
        <name>1</name>
        <description>1</description>
        <picture>images/1.jpg</picture>
        <thumb>thumbs/1.jpg</thumb>
        <address>1</address>
        <website>http://1.co.uk</website>
</venue>

<venue>
        <name>2</name>
        <description>2</description>
        <picture>images/2.jpg</picture>
        <thumb>thumbs/2.jpg</thumb>
        <address>2</address>
        <website>http://2.co.uk</website>
</venue>

<venue>
        <name>3</name>
        <description>3</description>
        <picture>images/3.jpg</picture>
        <thumb>thumbs/3.jpg</thumb>
        <address>3</address>
        <website>http://3.co.uk</website>
</venue>
</gallery> 
```

My current code:

```
var xml:XML = <venues>
<venue name="" description="" address="" website="" picture=""/>
<venue name="" description="" address="" website="" picture=""/> 
<venue name="" description="" address="" website="" picture=""/>
<venue name="" description="" address="" website="" picture=""/>
</venues>;

var Gallerylist:XMLList = new XMLList(xml.venue);

function RandomGallery(e:Event)
{
    var rand:int = Gallerylist.length() * Math.random();
    myTextBoxTitle.text = myXML.venue.name[rand]
    myTextBoxDes.text = myXML.venue.description[rand]
    myTextBoxAddress.text = myXML.venue.address[rand]
    myTextBoxWeb.text = myXML.venue.website[rand]
    myVenueImage.source = myXML.venue.picture[rand]
}
randomBTN.addEventListener(MouseEvent.MOUSE_DOWN, RandomGallery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:59:26.877

创建一个包含所有场地名称的数组。如果数据集太大，或者刚开始为您的示例使用硬编码值以使其工作，您可以通过编程方式执行此操作。当您单击随机按钮时，弹出名称并使用它来选择下一个。这将避免必须检查哪些已被使用，而您只需从数组中剩余的尚未查看的中进行选择。当用户选择最后一个并且数组为空时，重新初始化并继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:11:45.983

如果您不介意直接打乱您的 xml 以避免制作名称的新副本，您可以使用像[FicherYates](http://bost.ocks.org/mike/shuffle/)这样的打乱功能来打乱您的数据。

您可以制作一个多合一功能，每次单击新场地时都会拾取它，并在到达终点时重新启动。

这是一个函数示例，每次响应点击事件时都会选择一个随机元素：

```
var xml:XML = <venues>
<venue name="" description="" address="" website="" picture=""/>
<venue name="" description="" address="" website="" picture=""/> 
<venue name="" description="" address="" website="" picture=""/>
<venue name="" description="" address="" website="" picture=""/>
</venues>;

var fnShuffle:Function = function(xl:XMLList):Function {
 var len:int=xl.length();
 var lastUsedIndex:int;

 return function(e:MouseEvent):void{
   var i:int;

   if (len<=0) {
     // restart over since you have reached the end of the list
     len = xl.length();
     i = int(Math.random() * (len--));

     // in case of a new round you don't want to redisplay the last one again
     if (i == lastUsedIndex) i = len; 
   } else {
     i = int(Math.random() * (len--));
   }

   var myRandomVenue:XML = xl[i];
   var tmp:XML = xl[len];
   xl[i] = tmp;
   xl[len] = myRandomVenue;
   lastUsedIndex = len;

   // here do what you want with your randow venue
   trace(myRandomVenue);
 }
}

this.addEventListener(MouseEvent.CLICK, fnShuffle(xml.venue)); 
```

每次单击 TextArea 时，您都可以在 wonderfl 现场看到它： [http ://wonderfl.net/c/aQ1D](http://wonderfl.net/c/aQ1D)

# msmq - Immediate and scheduled business transactions - MSMQ/NServiceBus/MS Sql Service Broker/Windows Task Scheduler?

> ID：13531383
> 
> 赞同：4
> 
> 时间：2012-11-23T14:48:57.373
> 
> 标签：msmq, nservicebus, service-broker, msmq-wcf

I have this scenario, guys-

A typical large-scale CMS application in which the following business transactions appear:

*   Users publish content immediately.
*   Users schedule content to be published.
*   Automatic process runs ,say, in 10 minutes interval, collects **scheduled** and **ready** (simply a status of the BO)content and sends it to publishing.

This is oversimplified description of the actual system. By saying **publishing** I mean a complex process consisting of 4 main sub-systems: building invocation arguments, generating html content by running another web app(asp.net), committing the transactional parties, and signaling the users about the publishing results. So the system looses ability to run the whole process in a single Mega-transaction, i.e. it's possible but not practical from the scalability/performance points of view.

There are several options for the sub-systems to communicate each other, like making use of MSMQ, SQL Service Broker, NServiceBus, and a chain of plain WCF one-way invocations (which is currently implemented). So, guys, I'm looking for some possibly more reliable and scalable solution for this processing because looks like the system will be getting more busy with growing number of users and , therefore, more content to be generated. Especially, once, mobile versions' support is requested by the clients.

One of my considerations is to queue all the users **immediate** requests using MSMQ where a dedicated WCF service will dispatch them next to the content generation module (web app). And so will do the windows scheduled task. I can't see how these messaging platforms could be useful but not residing them before the html generation. This really confuses me.

Can't figure out what technology will fit best for this on my own.Any help, considerations, sharing your experience will help me, guys.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:28:21.953

您肯定需要一些业务流程处理。

您的*即时*请求将转化为*命令*消息。处理完命令后，您可以发布*事件*消息，您的流程中的下一步可以选择这些事件消息以继续该流程。因此，您甚至可能不需要调度。

我做过类似的事情：

电子邮件 -> 内容引擎 -> 文档转换 -> 工作流引擎 -> 索引 -> 工作流引擎

不涉及调度。要完成某件事，您发送一个*命令*，当命令处理完成时，端点发布和*事件*以及订阅该事件的任何端点都将收到副本并知道如何继续。我有一个简单的表结构来跟踪流程的数据以及适当的状态。

对于系统的某些部分，您可能需要更*即时*加工。当您遇到这种情况时，您可以多次安装您的端点服务，并让一个充当“优先”端点。举个例子。在我们的文档转换器端点中，我们必须转换每个电子邮件正文。由于我们每天收到数千人，他们会排很多队。这是在后台完成的，没有真正关心它何时发生。另一方面，索引 Web 应用程序的用户需要立即从网站转换某些文档。发送到同一个转换端点会导致临时转换有时会在数千个其他转换请求之后等待。所以没有反应。解决方案是简单地安装另一个转换器实例（相同的二进制文件）并为端点配置单独的队列，然后让来自 Web 服务器的所有转换请求消息路由到 ad-hoc 端点。问题解决了 ：）

附带说明：即使您确实使用了 Web 服务接口或 WCF，将其*放在*服务总线端点之后也是一个好主意，因为端点会为您购买很多东西（重试/毒队列等）

由于您似乎处于评估阶段，您可能想看看我的 FOSS 服务总线：[http ://shuttle.codeplex.com/](http://shuttle.codeplex.com/)

这就是我们在所描述的系统上使用的。如果有必要，有一个单独的调度程序组件（尽管我们没有在项目中使用它）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T15:01:13.727

您可以使用 NServiceBus 中的 saga 功能对发布过程进行建模，包括调度部分，因为它能够在一定延迟后可靠地执行操作，几乎没有开销。

如果您很乐意将用户的即时请求排入队列，那么您可以轻松地将 NServiceBus 用作您的 API，而不是自己将某些东西与 MSMQ、WCF 和 Windows 计划任务拼凑在一起。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T17:21:01.040

如果所有参与者都是 SQL Server 实例（或由此类实例支持），那么 Service Broker 具有很大的优势。由于集成在 SQL 引擎中，这意味着您必须在数据库和消息存储之间进行本地分布式事务（即每次将消息入队或出队时）都成为普通的简单事务，因为数据库*是*消息存储。当您考虑备份/恢复时，这也有优势，因为您可以对数据*和*消息进行一致的备份（数据库备份包含所有消息的备份），您只需要一种解决方案即可实现高可用性/灾难恢复：数据库解决方案（集群、镜像）也是消息传递 HA/DR 的故事，因为数据库*是*消息存储。内置激活消除了配置（更重要的是，在 HA/DR 故障转移情况下监控和故障转移）外部激活机制的需要。更不用说内置激活没有延迟*，同时*它也可以适应尖峰，外部计划的激活可能会遇到问题（外部任务必须池化，并且必须平衡池化的频率和所需的延迟并考虑尖峰）

# ruby-on-rails - 删除 public/index.html 后出现错误 404

> ID：13531385
> 
> 赞同：1
> 
> 时间：2012-11-23T14:49:09.470
> 
> 标签：ruby-on-rails, apache, deployment

我只是想用 Ubuntu 12.04、Apache 和 PhusionPassenger 在我的新 VPS 服务器上测试一个简单的 rails 应用程序。

公共目录中的默认 index.html 文件一切正常。

但是，如果我删除此文件并尝试从视图目录中渲染文件，则会出现 404 错误。在我的本地机器上一切正常......

我想，也许它与资产管道有关，所以我尝试了“rake assets:precompile”，但没有帮助。

编辑：我已经设置了正确的根路径，包括动作和方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:51:14.680

也许你还没有在你的应用程序中设置 root_path。你可以这样设置`:root => "controller_name#action_name"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:32:20.903

我找到了解决问题的方法：

日志文件显示“application.css 未预编译”。

而不是：`rake assets:precompile`我用过`bundle exec rake assets:precompile`，现在效果很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:05:22.417

index.html 文件是根 URL 的默认替代文件。

因此，当您删除它时，就没有处理根 url (/) 的路由。

要设置根 URL (/)，这些路由中的任何一个都可以：

```
root :to => 'controller#action'
root => 'controller#action'
get '/' => 'controller#action' 
```

# jsf - Primefaces confirmation dialolog in tab view does not hide after action is fired

> ID：13531389
> 
> 赞同：2
> 
> 时间：2012-11-23T14:49:34.473
> 
> 标签：jsf, jsf-2, primefaces

I have got an issue with my confirmation dialog. It just does not close after clicking the confirm-button. This only occurs, if my form is in a tab view. (Excatly the some code works fine, if my form is not in a tab view but only a panel or something like that.)

```
 <h:form id="timingTableForm">
            <p:dataTable var="item" value="#{requestBean.rmRequest.timingList}" id="timingDataTable" editable="true">
             // some dataTable 
            </p:dataTable>
            <p:confirmDialog closable="true" appendToBody="true" id="confirmDialog" message="#{msg.conf_deleteyesno}" header="#{msg.conf_header}" severity="alert" widgetVar="confirmation">  
                <p:commandButton id="confirm" value="#{msg.btn_yessure}" update="timingTableForm" oncomplete="confirmation.hide()" actionListener="#{requestBean.deleteTiming}" process="@this"/>  
                <p:commandButton id="decline" value="#{msg.btn_notyet}" onclick="confirmation.hide()" type="button" />   
            </p:confirmDialog>
        </h:form> 
```

If I change "oncomplete" to "onclick" it works fine also, but I want the dialog to disapear not until the server side operation is finished.

When I push the confirm-button something strange happens within the resulting HTML:

```
<div id="mainTabView:timingTableForm:confirmDialog" class="ui-confirm-dialog ui-dialog ui-widget ui-widget-content ui-overlay-hidden ui-corner-all ui-shadow" style="width: auto; height: auto;">

<div id="mainTabView:timingTableForm:confirmDialog" class="ui-confirm-dialog ui-dialog ui-widget ui-widget-content ui-corner-all ui-shadow ui-overlay-visible" style="width: auto; height: auto; left: 994.5px; top: 186px; visibility: visible; z-index: 1006;"> 
```

A new div with the same ID as my confirm-dialog is rendered. The result is one hidden confirm diolog (as expected) but there is also a new dialog that is still visible. If i push the confirm button again I have 2 hidden conform dialogs and 1 visible dialog and so on...

Am I doing something wrong? Can you spot any error? Or could this be a bug in primefaces?

*   Primefaces 3.4.1
*   Running on GlassFish 3.1.2
*   Browser Firefox 16.0.2

Thank you in advance, Fant

* * *

**Actually i found a solution for my problem:**

The problem only occurs, if I try to update the whole form which also contains the confirm dialog. If I only update some specific areas in this form, it works fine.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T17:31:19.627

对话框不应放置在任何表单内，而应放置在任何表单外并拥有自己的表单。

```
<h:form id="timingTableForm">
    <p:dataTable var="item" value="#{requestBean.rmRequest.timingList}" id="timingDataTable" editable="true">
     // some dataTable 
    </p:dataTable>
</h:form>

<p:confirmDialog closable="true" appendToBody="true" id="confirmDialog" message="#{msg.conf_deleteyesno}" header="#{msg.conf_header}" severity="alert" widgetVar="confirmation">  
    <h:form>
        <p:commandButton id="confirm" value="#{msg.btn_yessure}" update="timingTableForm" oncomplete="confirmation.hide()" actionListener="#{requestBean.deleteTiming}" process="@this"/>  
        <p:commandButton id="decline" value="#{msg.btn_notyet}" onclick="confirmation.hide()" type="button" />   
    </h:form>
</p:confirmDialog> 
```

这是因为对话框的 HTML 表示可能在真实的 HTML DOM 树中移动到当前表单之外（正如您明确所做的那样`appendToBody="true"`），这可能会导致异步请求和更新期间的“wtf”行为，正如您所经历的那样。

# php - 不允许使用 HTTP 动词 POST 访问路径“/rpc.php”

> ID：13531391
> 
> 赞同：4
> 
> 时间：2012-11-23T14:49:43.880
> 
> 标签：php, asp.net-mvc, tinymce, spell-checking

> **可能重复：**
> [在.net 应用程序中实现拼写器页面时如何解决错误[不允许用于访问路径的 HTTP 动词 POST]](https://stackoverflow.com/questions/6274121/how-to-resolve-errorthe-http-verb-post-used-to-access-path-is-not-allowed-whil)

我正在使用 Tiny MCE 在 ASP.NET MVC4 中编辑内容文本。

我想使用拼写检查器。为此，我必须指定一个 php 文件。当我在本地主机中指向该文件的路径时，它返回一个错误 **“不允许使用 HTTP 动词 POST 访问路径'/rpc.php'”**。

我是否应该指定从 asp.net mvc 访问 php 文件的任何权限。

有没有其他方法可以解决这个问题。

# ruby - 在 cygwin 上安装 webdriver gem 时出错

> ID：13531392
> 
> 赞同：4
> 
> 时间：2012-11-23T14:49:48.330
> 
> 标签：ruby, cygwin, selenium-webdriver

尝试安装时出现以下`webdriver gem`错误`Cygwin`：

“gem install selenium-webdriver-2.26.0.gem”：（注意我想在 Cygwin 下使用 Ruby 安装 Webdriver gem）。

```
$ gem install selenium-webdriver-2.26.0.gem
Building native extensions.  This could take a while... 
ERROR:  Error installing selenium-webdriver-2.26.0.gem:
ERROR: Failed to build gem native extension.

/usr/bin/ruby.exe extconf.rb checking for ffi.h... *** extconf.rb
failed *** Could not create Makefile due to some reason,
    probably lack of necessary libraries and/or headers.  Check the
    mkmf.log file for more details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/usr/bin/ruby
        --with-ffi_c-dir
        --without-ffi_c-dir
        --with-ffi_c-include
        --without-ffi_c-include=${ffi_c-dir}/include
        --with-ffi_c-lib
        --without-ffi_c-lib=${ffi_c-dir}/lib
        --with-libffi-config
        --without-libffi-config
        --with-pkg-config
        --without-pkg-config 
     /usr/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an  executable file.
(RuntimeError) You have to install development tools first.
        from /usr/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
        from /usr/lib/ruby/1.9.1/mkmf.rb:931:in `block in have_header'
        from /usr/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
        from /usr/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
        from /usr/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from /usr/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
        from /usr/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from /usr/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
        from /usr/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
        from /usr/lib/ruby/1.9.1/mkmf.rb:930:in `have_header'
        from extconf.rb:14:in `<main>'

Gem files will remain installed in
/usr/lib/ruby/gems/1.9.1/gems/ffi-1.2.0 for inspection. Results
logged to
/usr/lib/ruby/gems/1.9.1/gems/ffi-1.2.0/ext/ffi_c/gem_make.out 
```

请指导我我需要做些什么来解决这个问题？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:55:06.493

答案是 Cygwin 不支持安装 webdriver gem（有关详细信息，请参阅我对 Selenium 家伙的问题：[http](http://code.google.com/p/selenium/issues/detail?id=4812) ://code.google.com/p/selenium/issues/detail?id=4812 ），所以我尝试了改为安装在 Ruby 命令提示符窗口上。

# c# - 结合功能 表达式

> ID：13531395
> 
> 赞同：5
> 
> 时间：2012-11-23T14:50:05.473
> 
> 标签：c#, expression-trees

> **可能重复：**
> [组合两个表达式（Expression<Func<T, bool>>）](https://stackoverflow.com/questions/457316/combining-two-expressions-expressionfunct-bool)

我有一个采用单个`Expression<Func<bool>>`参数的方法

```
void MethodOne(Expression<Func<bool>> expression) 
```

我有多个`Expression<Func<bool>>`. 我如何动态地将这些表达式组合成一个单一的`Expression<Func<bool>>`使用`Expression.OrElse`（即建立一个表达式树）？

例如，如果我有两个表达式，例如

```
() => objectA.PropertyOneIsSet 
```

和

```
() => objectB.PropertyTwoIsSet 
```

我希望最终结果是：

```
() => objectA.PropertyOneIsSet || objectB.PropertyTwoIsSet 
```

所以我可以将它传递给我上面的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T15:51:59.293

您可以创建 ExpressionVisitor 来组合查询。查看此 msdn 博客以获取更多信息：[组合谓词](http://blogs.msdn.com/b/meek/archive/2008/05/02/linq-to-entities-combining-predicates.aspx)（答案 3）。他在谈论 EF，但你可以在你的情况下使用它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T14:56:05.267

您可以使用 expression.Any(x => x.CallMethod) 来实现此目标。

# android - 从电子邮件活动返回后，Android 键盘仍然可见

> ID：13531399
> 
> 赞同：5
> 
> 时间：2012-11-23T14:50:16.363
> 
> 标签：android, android-activity

我有一个在 TabHost 中运行的 Activity（扩展 Activity）。我从用户操作启动 Android 电子邮件客户端。如果我点击电子邮件客户端中的“放弃”按钮，电子邮件客户端会退出，但屏幕键盘仍然可见。

我的应用程序上没有 EditTexts，所以不知道为什么键盘会一直亮着。我已经尝试了几次迭代[如何在完成一项活动后移除键盘？](https://stackoverflow.com/questions/7339515/how-do-i-remove-the-keyboard-after-i-finish-an-activity)但是没有运气。有什么想法吗？

代码示例

```
package com.test.launchmail;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.view.inputmethod.InputMethodManager;
import android.widget.Toast;

public class myEmail extends Activity
{
    private final String TAG = "** Email **";

    public static void send (Context ctx, String addy, String subject, String body)
    {
        // check to make sure the entry has a phone number
        try
        {
            // use the builtin chooser for users mail app
            Intent sendIntent = new Intent(Intent.ACTION_SEND);
            sendIntent.setType("text/plain");

            sendIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String [] {addy});
            sendIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
            sendIntent.putExtra(android.content.Intent.EXTRA_TEXT, body);
            ctx.startActivity (Intent.createChooser(sendIntent, "Send via which Application?"));

        }
        catch (Exception e) 
        {
            Toast.makeText (ctx, "No activity was found to handle this action",Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    protected void onPostResume()
    {
       // This executes, but keyboard still visible. 
        Log.d ("myEmail", "hiding");
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow (mainApp.tabHost.getCurrentTabView ().getApplicationWindowToken (),imm.HIDE_IMPLICIT_ONLY);

       super.onResume ();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T19:32:27.857

好悲伤多么令人恼火。我搜索了一整天，终于找到了隐藏在 29 种不同方法下的答案。每个人都声称通过不同的 InputMethodManager 变体取得了成功。对于它的价值，这个对我[有用 Close/hide the Android Soft Keyboard](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard/9494042#9494042)。

它希望有一天有一个标准的 API 调用来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T18:27:59.600

尝试将您的清单文件放入所需的活动（您没有显示键盘的活动）中：`windowSoftInputMode="stateHidden"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-27T12:15:28.707

我的解决方案是在导航到电子邮件活动之前执行以下操作：

1.  确保键盘隐藏在我的应用程序屏幕上（使用流行的 stackoverflow 方法）
2.  最重要的是，确保屏幕上的 EditText 不再具有焦点。 `contactSearchView.clearFocus()`

# linux - ld.so.preload 和登录

> ID：13531401
> 
> 赞同：1
> 
> 时间：2012-11-23T14:50:22.833
> 
> 标签：linux, login, ld

我将库添加到 ld.so.preload 和 ld.so.conf.d 的路径当我运行二进制文件或在二进制文件上运行 ldd 时，一切似乎都正常。尝试登录时出现问题：输入用户后，但在密码之前，我收到错误，即找不到库并且不会预加载。此外，输入密码（正确的密码）后，我收到“身份验证失败”错误。Strace 显示登录确实读取 ld.so.preload，但不读取 ld.so.cache。正在搜索标准文件夹以查找库，而不是来自 ld.so.cache 的那些。这是错误还是功能？这意味着我必须将库复制到“标准文件夹”？或者有没有办法解决它？

问候

# php - 在 CSV 文件中显示外语

> ID：13531402
> 
> 赞同：0
> 
> 时间：2012-11-23T14:50:28.067
> 
> 标签：php

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

我创建了`CSV`为所选`PHP`文件创建的脚本，该`PHP`文件包含不同语言的内容。我的脚本生成正确的 CSV 文件，但对于其他语言，CSV 文件包含不可读的文本。

**PHP 到 CSV 脚本的标头部分**

```
// Send to browser to download
header("Content-Disposition: attachment; filename=$csvFile");
header("Content-Type: application/csv");
readfile("$csvFile"); 
```

我也试过

```
header("encoding: utf-8"); 
```

和

```
header("charset: utf-8"); 
```

很奇怪，我使用数组变量并存储 CZ 语言，然后 csv 生成正确的格式，似乎在从 php 文件中读取内容时，它会将外语文本转换为混乱文本，因为我 print_r 内容数组 & yap 它被弄乱了。现在转到为什么从 php 文件读取内容时内容变得混乱？

# android - Android：页面滑动时不会触发 OnItemClickListener 事件（FragmentActivity 和 ListFragment）

> ID：13531404
> 
> 赞同：1
> 
> 时间：2012-11-23T14:50:30.667
> 
> 标签：android, onitemclicklistener, android-fragmentactivity

我有一个包含 6 个片段的片段活动。每个片段都是同一类的实例（TalkListFragment - 它扩展了 ListFragment）。现在在第一个页面中，当单击一个项目时会触发该事件。一旦滑动另一个页面，然后单击该项目，什么都不会发生。我`listView.setDescendantFocusability(ListView.FOCUS_BLOCK_DESCENDANTS);`在 XML 文件中也做了同样的事情。

这是代码

```
 public class TalkFragmentListActivity extends FragmentActivity implements OnClickListener, OnPageChangeListener
{
    private SwipePagerAdapter pageAdapter = null;
    private ViewPager viewPager = null;
        .
        .
            private void initializePaging()
    {
        foodFragment = new TalkListFragment();
        foodFragment.setTitle("Food");
        foodFragment.setUrl("");
        shoppingFragment = new TalkListFragment();
        shoppingFragment.setTitle("Shopping");
        shoppingFragment.setUrl("");
        eventsFragment = new TalkListFragment();
        eventsFragment.setTitle("Events");
        eventsFragment.setUrl("");
        nightlifeFragment = new TalkListFragment();
        nightlifeFragment.setTitle("Night Life");
        nightlifeFragment.setUrl("");
        serviceFragment = new TalkListFragment();
        serviceFragment.setTitle("Service");
        serviceFragment.setUrl("");
        conceirgeFragment = new TalkListFragment();
        conceirgeFragment.setTitle("Conceirge");
        conceirgeFragment.setUrl("");

        pageAdapter = new SwipePagerAdapter(getSupportFragmentManager());
        pageAdapter.addFragment(foodFragment);
        pageAdapter.addFragment(shoppingFragment);
        pageAdapter.addFragment(eventsFragment);
        pageAdapter.addFragment(nightlifeFragment);
        pageAdapter.addFragment(serviceFragment);
        pageAdapter.addFragment(conceirgeFragment);

        viewPager = (ViewPager) super.findViewById(R.id.talk_list_pager);

        viewPager.setAdapter(this.pageAdapter);
        viewPager.setOffscreenPageLimit(2);
        viewPager.setCurrentItem(0);

        viewPager.setOnPageChangeListener(this);
    } 
```

这是 TalkList 类：

```
 public class TalkListFragment extends ListFragment implements OnClickListener, OnItemClickListener
    {
        private TalkListAdapter adapter = null;
        private ListView listView = null;
            .
            .
                @Override
            public void onActivityCreated(Bundle savedInstanceState)
            {
                super.onActivityCreated(savedInstanceState);

                TalkFragmentListActivity activity = (TalkFragmentListActivity) getActivity();
                adapter = new TalkListAdapter(activity, R.layout.talks_fragment_item, getTalkList());
                listView = (ListView) activity.findViewById(android.R.id.list);
        //      listView = (ListView) activity.findViewById(R.id.talk_items_listview);
                setListAdapter(adapter);
                listView.setOnItemClickListener(this);
                listView.setDescendantFocusability(ListView.FOCUS_BLOCK_DESCENDANTS);
.............
}

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id)
    {
        if (listView != null)
        {
            TalkListAdapter adptr = (TalkListAdapter) parent.getAdapter();
            Talk talk = (Talk) adptr.getItem(position);
            Intent i = new Intent(view.getContext(), TalkDetailActivity.class);
            i.putExtra("talk", talk);
            this.startActivity(i);
        }
    } 
```

现在程序在第一页上表现良好，但是当页面被刷过时，ItemOnClick 永远不会工作。ItemClickListener 上有很多问题，但我找不到这个特定问题的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:33:39.940

换行：

```
listView = (ListView) activity.findViewById(android.R.id.list); 
```

和：

```
listView = getListView(); 
```

使用第一行代码，您正在父活动中搜索当前片段的`ListView`. 这适用于第一个片段，因为在最初的那一刻，第一个片段`ListView`被正确地找到并在您的侦听器中使用。`ListView`当您滑动到第二个片段并再次在父活动中搜索 a时，您将“找到”前一个片段`ListView`（它不在屏幕上，但仍然存在于`ViewPager`更好的性能中）。正是在这个不可见`ListView`的地方设置了`OnItemClickListener`，但实际上你会点击`ListView`你在可见片段中看到的另一个（并且它没有监听器）。通过使用`getListView()`，您将始终正确引用片段的`ListView`. 还有[一个`ListFragment`有自己的`ListView`项目点击](http://developer.android.com/reference/android/app/ListFragment.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)回调，我建议使用它而不是自己设置监听器。

# ruby-on-rails-3 - Rails、CanCan 和控制器

> ID：13531410
> 
> 赞同：0
> 
> 时间：2012-11-23T14:51:02.450
> 
> 标签：ruby-on-rails-3, cancan

我的应用程序中有一个`Employee`模型。一个员工*属于一个公司*，一个公司*有很多员工*。现在我有两个员工控制器；一个正常`employees_controller`的和命名空间的控制器，供公司管理`/company/employees_controller`. 这是因为员工应该能够编辑他们的账户，但公司也应该如此。他们能够编辑的信息是完全不同的，因此公司会通过 编辑员工，`company/employees_controller`而员工会通过`employees_controller`. 有没有办法在*CanCan*中指定控制器？在我拥有的公司的能力范围内 `can :manage, Employee, :company_id => user.id if user.status? :confirmed`。但我只希望公司能够通过命名空间控制器管理员工`company/employee_controller`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:07:44.023

在询问之前可能应该做一些更好的研究：[https ://github.com/ryanb/cancan/wiki/Authorization-for-Namespaced-Controllers](https://github.com/ryanb/cancan/wiki/Authorization-for-Namespaced-Controllers)

# visual-studio-2010 - 重用现有 VS 项目作为新项目的基础或启动器或使用模板的选项

> ID：13531420
> 
> 赞同：1
> 
> 时间：2012-11-23T14:51:21.593
> 
> 标签：visual-studio-2010, visual-studio, projects-and-solutions, project-template

我为学生写了很多示例项目（主要是 C++ 和一些 C#）。很多时候，示例项目在很大程度上是相似的，除了添加了我碰巧正在教授的关键特性或技术。我喜欢使项目尽可能简单（例如，每个项目 1 个功能）。

大多数项目都有一个相似的起点（样板代码），我将该“启动项目”点复制到一个新文件夹中，并开始将该副本作为我的新项目进行工作。接下来，我需要更改解决方案/项目/文件名以表示示例代码演示的内容。

有没有更优雅的方式来做到这一点？

有没有快速生成模板的方法？ASFAIK VS2010 中的模板导出向导不适用于 c++ 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:55:51.257

只需转到`File`-->`Export template`并让向导引导您。

如果您需要一些额外的调整，您将能够解压缩模板，修复它，然后再次压缩它。

# c - 通过在 C 中的指针数组中打印字符串的元素来投射错误

> ID：13531426
> 
> 赞同：-4
> 
> 时间：2012-11-23T14:52:05.923
> 
> 标签：c, arrays, string, pointers, casting

第一：我是一个有指针的初学者。
我只想打印指针数组中字符串的字符。它工作正常，但我在 Eclipse Juno (Mac OS X) 中遇到了两个问题：
1\. 赋值使指针从整数而不进行强制
转换 2\. 格式 '%c' 需要类型 'int'，但参数 2 的类型为 'char *'

```
#include<stdio.h>
#include<string.h>

int main(void)
{
    char *words[] = {"word1", "word2", "word3", "word4", "word5"};
    char *tempWord,*tempChar;
    int i, j, numElems2;

    int numElems = sizeof words / sizeof words[0];
    for(i = 0; i < numElems; ++i)
    {
        tempWord = words[i];
        numElems2 = strlen(tempWord);

        for(j = 0; j < numElems2; ++j)
        {
            tempChar = tempWord[j];
            printf("%c", tempChar);
        }
        printf("\n");
    }

    return 0;
} 
```

我理解第一个问题，但不知道如何解决。第二个问题我不明白。'char' 与 'int' 有什么关系？

也许有人可以给我一些建议。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T14:53:56.510

`tempChar`需要是 a `char`，而不是`char *`您目前拥有的 a 。

您的两条警告消息都告诉您这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T15:00:29.590

我不确定这段代码应该做什么，但是，首先 tempChar 必须是 char 而不是 *char 类型，如果你想用 printf 打印字符串，你需要使用“%s”...

# php - 无法使用 php 的 PDO 将数据插入数据库

> ID：13531428
> 
> 赞同：1
> 
> 时间：2012-11-23T14:52:19.323
> 
> 标签：php, mysql, insert, pdo

我制作了一个表单，一旦提交就应该将数据插入数据库。如果我在查询字符串中使用变量名称，例如 INSERT INTO 表（名称，注释）VALUES（$name，$comment），它可以工作，但是如果我使用 pdo 准备好的语句，它就不起作用，这是我目前拥有的代码：

```
move_uploaded_file($_FILES["file"]["tmp_name"], "../img/" . $_FILES["file"]["name"]);
$stmt = $conn->prepare('INSERT INTO instructors (name, bio, picture) VALUES (:name, :bio, :picture)');
$stmt->bindParam(':name', $_POST['name']);
$stmt->bindParam(':bio', $_POST['bio']);
$stmt->bindParam(':picture', $_POST['file']['name']);
$stmt->execute(); 
```

文件上传并移动到我所说的目录，但没有数据插入数据库。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:44:50.407

尝试

```
move_uploaded_file($_FILES["file"]["tmp_name"], "../img/" . $_FILES["file"]["name"]);
$stmt = $conn->prepare('INSERT INTO instructors (name, bio, picture) VALUES (:name, :bio, :picture)');
$stmt->bindParam(':name', $_POST['name']);
$stmt->bindParam(':bio', $_POST['bio']);
$stmt->bindParam(':picture', $_POST['filename']);// Only 1 set of []s in $_POST[]
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T14:59:36.653

我相信你应该这样做：

```
move_uploaded_file($_FILES["file"]["tmp_name"], "../img/" . $_FILES["file"]["name"]);
$stmt = $conn->prepare('INSERT INTO instructors (name, bio, picture) VALUES (:name, :bio, :picture)');

$stmt->execute(array(
    ':name'=> $_POST['name'],
    ':bio'=> $_POST['bio'],
    ':picture'=> $_POST['file']['name']
)); 
```

# c++ - 如何在寄存器中加载负值 - 汇编语言

> ID：13531432
> 
> 赞同：0
> 
> 时间：2012-11-23T14:52:33.383
> 
> 标签：c++, assembly, inline-assembly

说我有以下代码：

C++ 代码和内联汇编代码如下：

方程：

```
X=40+5 
Y=3*12 ---> X=45 Y=36 
```

测试

`if x < y - print x+y`

`else print x-y`

```
int main()
{   
 int x=5,y=3,z=0;
 x=x+40;
 y=y*12;
 if(x<y) //45<36 - cond. is NOT met
      z=x+y; 
 else
     z=x-y; 
 cout << "z:" << z << endl; // z=9
     x=5,y=3,z=0;
 __asm
 {
     pushad
         mov eax,0
         mov ebx,0
         mov eax,x
         add eax,40
         mov ebx,y
         imul ebx,12
         cmp eax,ebx
         jb First ;cond is NOT met
         jmp Second ;we jump to Second label
 First: add eax,ebx
         mov z,eax
 Second: sub eax,ebx
         mov z,eax
     popad

 }
 cout << "z:" << z << endl; //z=9
 return 0;
} 
```

两个结果都产生 z=9，但是如果我分别在 C++ 和汇编代码中更改 y=-3（`int x=5,y=-3,z=0;`AND in `x=5,y=-3,z=0;`）我必须得到 z=81，但是内联汇编的输出是 z=45，所以我不能正确加载 ebx 寄存器中的负值（-3）...我的问题是如何在 ebx 中加载 -3 ，以便得到 45-(-36)=81 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:06:43.137

我认为您遇到的问题是`jb`使用无符号比较；你可能想`jl`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T15:11:23.350

两个问题 - 正如其他人指出的那样，一个是您使用了基于无符号比较的分支指令。

另一种是，执行完里面的代码`First`，然后再执行里面的代码`Second`。你通常希望有一个无条件`jmp`的 to after `Second`。此刻，您添加然后立即再次减去。

所以你可能想要：

```
 cmp eax,ebx
        jge Second ;cond is not met (I've removed one branch and reversed the test)
First:  add eax,ebx
        jmp Store
Second: sub eax,ebx
Store:  mov z,eax ;shared by both paths 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T15:07:07.757

使用`JL`而不是`JB`. 一种是有符号比较，另一种是无符号比较。

# java - Java - 如何知道打印机是否是网络打印机？

> ID：13531434
> 
> 赞同：2
> 
> 时间：2012-11-23T14:52:37.930
> 
> 标签：java, networking, printing

我知道如何列出操作系统中安装的所有打印机：

```
PrintService[] printServices = PrintServiceLookup.lookupPrintServices(null, null); 
```

但 a`PrintService`没有有关打印机位置的信息。

有什么方法可以查看打印机是否是网络打印机？或有共享名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-17T16:58:30.223

3年后...

我使用**[JNA](https://github.com/java-native-access/jna)**和[这个扩展](https://stackoverflow.com/questions/15476914/how-can-i-get-a-printers-make-and-model-in-java/34322066#34322066)来添加`PRINTER_INFO_2`支持。

另外，我用作`WinspoolExt.PRINTER_ENUM_LOCAL | WinspoolExt.PRINTER_ENUM_CONNECTIONS`标志。

`PRINTER_INFO_2.pShareName`并`PRINTER_INFO_2.pServerName`拥有我需要的信息。

# android - 访问片段中方法内的 Ui 元素，在 android 中显示空指针异常

> ID：13531437
> 
> 赞同：2
> 
> 时间：2012-11-23T14:52:44.077
> 
> 标签：android

我有两个片段。一个片段，我用另一个片段动态替换第二个片段。从第一个片段中调用新片段中的方法。新片段中的方法为在oncreateView方法中访问的ui元素设置文本。但未访问它显示空指针异常。

代码是：

```
public class MachinesForm extends Fragment implements OnClickListener {

  TextView ws_name, ws_info, last_update, engine_hours, model_num, ser_num,

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    View v = inflater.inflate(R.layout.fleet_machineinfo, null);
    Log.d("", ""+v);
    ws_name = (TextView) v.findViewById(R.id.txt_info);
    ws_info = (TextView) v.findViewById(R.id.tv_quickinfo);
    return v;
  }

  void setting_machineinfo(int wid, String mid) {
    c = DBAdapter.getMacinfowithws(wid, mid);
    c_hours = DBAdapter.getLastHoursValuesOfMachine(mid);
    c.moveToFirst();
    c_hours.moveToFirst();
    name = c.getString(c.getColumnIndex("WS_Name"));
    System.out.println("name: " + name);//i got name
    Log.d("",""+ws_name);
    ws_name.setText(name); //here shows nullpointer exception
    System.out.println("ok");
  }
} 
```

# ios - iOS 应用签名

> ID：13531438
> 
> 赞同：0
> 
> 时间：2012-11-23T14:52:51.003
> 
> 标签：ios

好的，问题来了。

我有一个已经签名的 iPhone 应用程序。我可以将它安装在我想要的任何 iOS 设备上，即使它的 UDID 未链接到我的开发者帐户？即我可以将我的应用程序的 .ipa 拖到 iTunes 并与其他设备同步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:56:19.730

如果你只是打算走官方的方式，那就不要了。苹果说：“嘿，开发者，让你付钱给我们，以便在你自己的设备上运行你**自己的代码****。”**

如果你有可能越狱你的手机，那么它是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:54:59.757

你不能。如果你想这样做，你必须确保事先注册了设备签名

如果它签名了，为什么不把它贴在商店里然后从那里拿到呢？

# java - 使用 HttpUrlConnection 获得一个非常普遍的 IOException

> ID：13531442
> 
> 赞同：0
> 
> 时间：2012-11-23T14:53:10.357
> 
> 标签：java, android, android-asynctask, web-scraping, httpurlconnection

我在使用 HttpUrlConnection 时遇到了一些问题，当我运行设备（Gingerbread HTC Desire）时，LogCat 显示非常笼统：

`11-23 14:26:19.394: WARN/System.err(6591): java.io.IOException: Error connecting`

我添加了 AsyncTask 来尝试解决问题，但似乎没有区别。我在底部显示了完整的 logcat，这是有问题的类（缩短了一点并将 url 设置为 google（结果相同）：

```
public class JSoupHelper {
    private static final String LOGIN_URL = "http://www.google.co.uk";

    public JSoupHelper() {
        new Login().execute(LOGIN_URL);
    }
    private class Login extends AsyncTask<String, String, InputStream>{
        @Override
        protected InputStream doInBackground(String... params) {
            String url = params[0];
            Log.d("JSoup-LoginHelper","Starting background AsyncTask on "+url);
            try {
                InputStream is = OpenHttpConnection(url);
                return is;
            } catch (IOException e) {
                e.printStackTrace();
            }
            return null;
        }
    }
     private InputStream OpenHttpConnection(String urlString) throws IOException {
        InputStream in = null;
        URL url = new URL(urlString);
        Log.d("JSoup-OHTTPSC","Connecting to "+urlString);
        try{
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setInstanceFollowRedirects(true);
            conn.setDoInput(true);
            conn.connect();
            Log.d("JSoup-OHTTPSC","Connected to "+urlString);

            int response = conn.getResponseCode();
            if (response == HttpsURLConnection.HTTP_OK) {
                in = conn.getInputStream();
            }
            conn.disconnect();
        }
        catch (Exception ex)
        {
            throw new IOException("Error connecting");
        }
        return in;
    }
} 
```

日志猫：

```
11-23 14:25:59.214: DEBUG/JSoup-LoginHelper(6591): Starting background AsyncTask on http://www.google.co.uk
11-23 14:25:59.234: DEBUG/JSoup-OHTTPSC(6591): Connecting to http://www.google.co.uk
           ~~~~ 20 secs pass ~~~~
11-23 14:26:19.394: WARN/System.err(6591): java.io.IOException: Error connecting
11-23 14:26:19.394: WARN/System.err(6591): at com.example.untitled1.JSoupHelper.OpenHttpsConnection(JSoupHelper.java:67)
11-23 14:26:19.394: WARN/System.err(6591): at com.example.untitled1.JSoupHelper.access$100(JSoupHelper.java:12)
11-23 14:26:19.394: WARN/System.err(6591): at com.example.untitled1.JSoupHelper$Login.doInBackground(JSoupHelper.java:40)
11-23 14:26:19.394: WARN/System.err(6591): at com.example.untitled1.JSoupHelper$Login.doInBackground(JSoupHelper.java:34)
11-23 14:26:19.394: WARN/System.err(6591): at android.os.AsyncTask$2.call(AsyncTask.java)
11-23 14:26:19.394: WARN/System.err(6591): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
11-23 14:26:19.394: WARN/System.err(6591): at java.util.concurrent.FutureTask.run(FutureTask.java:138)
11-23 14:26:19.394: WARN/System.err(6591): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
11-23 14:26:19.394: WARN/System.err(6591): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
11-23 14:26:19.394: WARN/System.err(6591): at java.lang.Thread.run(Thread.java:1027)
11-23 14:26:23.077: INFO/htcfs-main(6749): main() 
```

我的目标是实际获取一个 InputStream 并通过 HttpsUrlConnection 使用 JSoup 对其进行解析，使用 post 登录，然后保存 cookie 和会话变量，然后使用 cookie 我可以对网站进行一些适当的抓取并将结果存储到 Sqlite db ...但一步一步（尤其是在我缺乏调试技能和一般 Java 技能的情况下）。

提前致谢。

# java - 创建复合输入组件

> ID：13531443
> 
> 赞同：1
> 
> 时间：2012-11-23T14:53:15.017
> 
> 标签：java, jsf-2, primefaces, custom-component, composite-component

我正在尝试创建一个作为输入组件的复合组件，类似于本教程中介绍的组件：[JSF 中的复合输入组件](http://weblogs.java.net/blog/cayhorstmann/archive/2010/01/30/composite-input-components-jsf)

该组件使用来自 primefaces 的 p:autocomplete 和 ap:selectonemenu，以及可选的 p:inputText 来接收一些额外的文本，然后它将返回到支持 bean 的对象，该对象将这些信息整齐地包装到 Web 应用程序的其他部分使用。不幸的是，我似乎永远无法恢复这些值。这是代码：

组件 xhtml：

```
<cc:interface componentType="personselector">

    <!-- Subject ID for contact filtering -->
    <cc:attribute name="subjectId" type="java.lang.String" required="false"/>
    <!-- Whether or not to show the individual contacted free form field -->
    <cc:attribute name="showIndividualContacted" type="java.lang.Boolean" required="false" default="false"/>
    <!-- Whether or not to show the phone selector -->
    <cc:attribute name="showPhoneSelector" type="java.lang.Boolean" required="false" default="true"/>
    <!-- The style class to apply to the parent div -->
    <cc:attribute name="styleClass" type="java.lang.String" required="false"/>
    <!-- An optional listener for a newly selected person -->
    <cc:attribute name="personSelectedListener" method-signature="void actionListener(javax.faces.event.ActionEvent)" required="false"/>
    <!-- The label to display next to the person selector -->
    <cc:attribute name="personLabel" type="java.lang.String" required="false" default="Person"/>
    <!-- The label to display next to the individual contacted field -->
    <cc:attribute name="individualLabel" type="java.lang.String" required="false" default="Individual Contacted"/>
    <!-- The label to display next to the phone number selector -->
    <cc:attribute name="phoneLabel" type="java.lang.String" required="false" default="Phone Number"/>
    <!-- Whether or not to limit the phone number results to a certain type of number, valid options are "phone" or "fax" -->
    <cc:attribute name="limitPhones" type="java.lang.String" required="false"/>
</cc:interface> 

<cc:implementation>

    <div id="#{cc.clientId}" class="personselector #{cc.attrs.styleClass}">
        <h:panelGrid columns="2" styleClass="person-selector-grid">
            <h:outputLabel styleClass="personselector-ui-label" value="#{cc.attrs.personLabel}" />
            <p:autoComplete id="personSelector" value="#{cc.personSelected}" completeMethod="#{cc.searchPeople}" 
                var="item" itemLabel="#{item.name}" itemValue="#{item}" size="51" converter="personSearchConverter" 
                onSelectUpdate="@this" selectListener="#{cc.handlePersonSelect}" 
                styleClass="personselector-ui-autocomplete personselector-mainperson">

                <p:ajax event="itemSelect" listener="#{cc.handlePersonSelect}" process=":#{cc.clientId}" update="phoneNumberSelector" />

                <p:ajax event="itemSelect" listener="#{cc.attrs.personSelectedListener}" disabled="#{empty cc.attrs.personSelectedListener}"/>

                ... auto complete formatting ...

            </p:autoComplete>

            <h:outputLabel value="#{cc.attrs.individualLabel}" styleClass="personselector-ui-label" rendered="#{cc.attrs.showIndividualContacted}"/>
            <p:inputText id="individualField" value="#{cc.individualName}" styleClass="personselector-individual-contacted personselector-ui-textfield" 
                                rendered="#{cc.attrs.showIndividualContacted}"/>

            <h:outputLabel value="#{cc.attrs.phoneLabel}" styleClass="personselector-ui-label"/>
            <p:selectOneMenu id="phoneNumberSelector" value="#{cc.phoneNumber}" editable="true" var="n" style="width:150px" 
                                            styleClass="personselector-ui-selectone personselector-phone-selector">
                <f:selectItems value="#{cc.findPersonContactNumbers}" var="number" itemValue="#{number.number}"/>

                <p:column>
                    #{n.descr}
                </p:column>
                <p:column>
                    #{n.number}
                </p:column>
            </p:selectOneMenu>
        </h:panelGrid>
    </div>
</cc:implementation> 
```

组件的支持 bean：

```
@FacesComponent("personselector")
public class PersonSelector extends UIInput implements NamingContainer{

public static final String PHONE_LIMIT ="phone";
public static final String FAX_LIMIT = "fax";

//Required for since we're extending UIInput and not UINamingContainer
@Override
public String getFamily() { return "javax.faces.NamingContainer"; }

//Returns this component as a submitted value rather than the individual sub component key values
// See http://weblogs.java.net/blog/cayhorstmann/archive/2010/01/30/composite-input-components-jsf
@Override
public Object getSubmittedValue() { return this; }

//Convert from the component to the SelectedPerson object we want to return
@Override
protected Object getConvertedValue(FacesContext context, Object newSubmittedValue) {
    AutoComplete personSelector = (AutoComplete) findComponent("personSelector");
    UIInput individualField = (UIInput) findComponent("individualField");
    SelectOneMenu phoneSelector = (SelectOneMenu) findComponent("phoneNumberSelector");
    PersonSearchData person = (PersonSearchData) personSelector.getValue();
    String individual = (String) individualField.getValue();
    PhoneNumber phone = (PhoneNumber) phoneSelector.getValue();
    if(person != null || !StaticTools.isNullOrEmpty(individual) || phone!= null){
        SelectedPerson sp = new SelectedPerson();
        sp.setAlternateName(individual);
        sp.setPersonSelected(person);
        sp.setPhoneNumberSelected(phone);
        return sp;
    } else {
        return null;
    }
}

@Override
public void encodeBegin(FacesContext context) throws IOException{
    SelectedPerson ps = (SelectedPerson) getValue();
    if(ps != null){
        AutoComplete personSelector = (AutoComplete) findComponent("personSelector");
        UIInput individualField = (UIInput) findComponent("individualField");
        SelectOneMenu phoneSelector = (SelectOneMenu) findComponent("phoneNumberSelector");

        personSelector.setValue(ps.getPersonSelected());
        personSelected = ps.getPersonSelected();

        individualField.setValue(ps.getAlternateName());
        individualName = ps.getAlternateName();

        phoneSelector.setValue(ps.getPhoneNumberSelected());
        phoneNumber = ps.getPhoneNumberSelected();
    }

    super.encodeBegin(context);
}

/** The state of the component. */
private Object[] state;

/** The person selected. */
private PersonSearchData personSelected;

/** The individual name. */
private String individualName;

/** The phone number selected. */
private PhoneNumber phoneNumber;

/** The subject id for filtering results. */
private String mySubjectId;

/** The limitation placed on the phone results. */
private String myPhoneLimit;

/* (non-Javadoc)
 * @see javax.faces.component.UIComponentBase#saveState(javax.faces.context.FacesContext)
 */
@Override
public Object saveState(final FacesContext context){
    if (state == null) {
        state = new Object[4];
    }

    state[0] = super.saveState(context);
    state[1] = personSelected;
    state[2] = individualName;
    state[3] = phoneNumber;
    return state;

}

/* (non-Javadoc)
 * @see javax.faces.component.UIComponentBase#restoreState(javax.faces.context.FacesContext, java.lang.Object)
 */
@Override
public void restoreState(final FacesContext context, final Object state) {
    this.state = (Object[]) state;
    super.restoreState(context, this.state[0]);
    personSelected =  (PersonSearchData) this.state[1];
    individualName = (String) this.state[2];
    phoneNumber = (PhoneNumber) this.state[3];
}

public String getMySubjectId(){
    if(mySubjectId == null){
        mySubjectId = (String) getAttributes().get("subjectId");
    }
    return mySubjectId;
}

/**
 * Find respondent contacts.
 * 
 * @param query
 *            the query
 * @return the list
 */
public List<PersonSearchData> searchPeople(String query) {
    ... find people from the database...
}

/**
 * Find matching contacts.
 * 
 * @param queryLength   the query length
 * @param firstName     the first name
 * @param lastName      the last name
 * @return the list
 */
public List<PersonSearchData> findMatchingPeople(int queryLength,
        String firstName, String lastName) {
    ... filter people ...
}

/**
 * Handle respondent select.
 * 
 * @param event
 *            the event
 */
public void handlePersonSelect(SelectEvent event) {
    PersonSearchData data = (PersonSearchData) event.getObject();

    setPersonSelected(data);
}

/**
 * Gets the find respondent contact numbers.
 * 
 * @return the find respondent contact numbers
 */
public List<SelectItem> getFindPersonContactNumbers() {
    PersonSearchData respondentContact = getPersonSelected();

    return findContactNumbers(respondentContact, getMyPhoneLimit(), getPhoneNumber());
}

/**
 * Find contact numbers.
 *
 * @param psd the psd
 * @param phoneLimit the phone limit
 * @param current the current
 * @return the list
 */
public List<SelectItem> findContactNumbers(PersonSearchData psd,
        String phoneLimit,
        PhoneNumber current) {
    ... find phone/fax numbers from the database ...
}

... getters and setters ...
} 
```

用法：

```
<h:form>
        <ppa:personselector id="mySelector" value="#{homePageBacking.sp}"/>
        <h:commandButton action="#{homePageBacking.displayData}" value="Submit Me"/>
    </h:form> 
```

不幸的是，我永远不会取回提交的值。如果我使用我在这里实现的状态保存，我会从自动完成中取回 PersonSelected，但我永远不会取回选定的电话号码或个人姓名（它们返回为空）。如果我不使用状态保存，那么一切都会返回 null。

# java - JSF HashMap 错误输出 我参与了一个 JSF 项目，并且正在尝试为购物车制作视图。用户的购物车可以包含存储在 cartBean 中的哈希映射（键 = id，值 = 数量）中的票。在 cart.xhtml 我尝试输出门票，在这里你可以看到代码： <h:form>问问题 问问题 2012-11-23T14:53:21.497 568 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我参与了一个 JSF 项目，并且正在尝试为购物车制作视图。用户的购物车可以包含存储在 cartBean 中的哈希映射（键 = id，值 = 数量）中的票。在 cart.xhtml 我尝试输出门票，在这里你可以看到代码： <h:form><c:foreach var="tickets" items="#{cartBean.showTickets()}">* * *

[![](img/dummy/event2.jpg)](event.xhtml)

#### [Party Hard!](event.xhtml)

05\. Nov 2012

35 €<h:outputtext value="#{tickets.key}" escape="false"><h:commandbutton value="x" action="#{cartBean.removeFromCart(tickets.key)}"></h:commandbutton></h:outputtext></c:foreach></h:form>在我尝试从购物车中删除一张票之前，这很好。如果我有两个不同的 id 键，它们会正确显示在购物车中。当我尝试删除 ID 为 1 的票时，只有 ID 为 2 的票仍保留在购物车中，这是正确的。但是，当我首先删除 id 2 时，它会在购物车中显示票 2，尽管它已从哈希图中删除。刷新站点后，它会正确显示 id 为 1 的票证，但那里出了什么问题？ 请帮我！ 我发现 forEach 每次都从 2 而不是实际 id 开始有问题 javajsfhashmapkey 4 2 回答 2 This answer is useful 0 经过大量的网络搜索后，我终于找到了解决方案。在此处输入链接描述， 您可以看到问题 1 的一些问题与我的类似。解决方案是使用，因此您必须将地图写入 Arraylist，然后迭代列表。这里的代码是如何完成的： public List<entry<string, integer="">> getTicketsList() { return new ArrayList(tickets.entrySet());} 顺便提一句。门票是我在你的 html 文件中的哈希映射，你必须使用 <ui:repeat value="#{cartBean.ticketsList}" var="tickets">cartBean 是我的 bean，ticketList 是我的 arrayList。希望你对某人有帮助，快乐修复 B） 于 2012-11-26T11:38:01.823 回答 This answer is useful 0 我发现 forEach 每次都从 2 而不是实际 id 开始有问题 于 2012-11-23T16:25:34.673 回答 Related 1 jquery - jQuery UI 的问题：可调整大小 3 algorithm - 分组组合算法 2 css - CSS - 仅在 Safari 中出现背景图像错误 2 php - Joomla 2.5 分页覆盖 1 android - 如何从其他类获取宽度屏幕 0 objective-c - Objective c：如何在应用程序开始运行时禁用 ESC 键盘功能 1 ruby-on-rails-3 - 如何在 Rails 4.0 的生产环境中引用 CSS 背景图像？ 1 grails - 将 json 对象从 grails 控制器传递给呈现 d3 图表的 gsp？ 1 javascript - 导航元素的滑动背景仅适用于 2 个元素，而不是更多 1 r - 在 data.table 中进行自索引时出错 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</ui:repeat></entry<string,></h:form>

> ID：13531444
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, jsf, hashmap, key

我参与了一个 JSF 项目，并且正在尝试为购物车制作视图。用户的购物车可以包含存储在 cartBean 中的哈希映射（键 = id，值 = 数量）中的票。在 cart.xhtml 我尝试输出门票，在这里你可以看到代码：

```
<h:form>    
        <c:forEach var="tickets" items="#{cartBean.showTickets()}">

            <hr/>
            <div class="eight columns">
                <div class="two column count">
                    <h:outputText style="font-size:30px;" value="#{tickets.value}"/>
                </div>
                <div class="two columns eventimg">
                    <a href="event.xhtml"><img src="img/dummy/event2.jpg" /></a>
                </div>
                <div class="six columns eventinfo">
                    <h4><a href="event.xhtml">Party Hard! </a></h4>
                    <p>05\. Nov 2012</p>
                    </div>
                <div class="two columns price">
                    <font style="font-size:30px;">35 &euro;</font>
                </div>
                <div class="eight columns">
                    <h:outputText value="#{tickets.key}"  escape="false"/>
                    <h:commandButton value="x" action="#{cartBean.removeFromCart(tickets.key)}"/>

                </div>
            </div>

        </c:forEach>
        </h:form> 
```

在我尝试从购物车中删除一张票之前，这很好。如果我有两个不同的 id 键，它们会正确显示在购物车中。当我尝试删除 ID 为 1 的票时，只有 ID 为 2 的票仍保留在购物车中，这是正确的。但是，当我首先删除 id 2 时，它会在购物车中显示票 2，尽管它已从哈希图中删除。刷新站点后，它会正确显示 id 为 1 的票证，但那里出了什么问题？

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:38:01.823

经过大量的网络搜索后，我终于找到了解决方案。[在此处输入链接描述，](http://drewdev.blogspot.co.at/2008/08/cforeach-with-jsf-could-ruin-your-day.html) 您可以看到问题 1 的一些问题与我的类似。解决方案是使用，因此您必须将地图写入 Arraylist，然后迭代列表。这里的代码是如何完成的：

```
public List<Entry<String, Integer>> getTicketsList() {
        return new ArrayList(tickets.entrySet());} 
```

顺便提一句。门票是我在你的 html 文件中的哈希映射，你必须使用`<ui:repeat value="#{cartBean.ticketsList}" var="tickets">` cartBean 是我的 bean，ticketList 是我的 arrayList。希望你对某人有帮助，快乐修复 B）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:25:34.673

我发现 forEach 每次都从 2 而不是实际 id 开始有问题

# c# - 根据扩展属性值设置扩展 TreeViewItem 的样式

> ID：13531452
> 
> 赞同：0
> 
> 时间：2012-11-23T14:53:47.223
> 
> 标签：c#, wpf, treeview

我扩展了 TreeViewItem 类以允许我在树视图项中存储额外的数据。我希望能够根据我添加的扩展属性之一的值设置树视图项的样式。

到目前为止，我有：

```
namespace GX3GUIControls
{
    public class GX3TreeViewItem : TreeViewItem
    {

        public bool Archived { get; set; }
        public object Value { get; set; }
    }
}

<src:GX3ClientPlugin.Resources>
        <Style TargetType="{x:Type Controls:GX3TreeViewItem}">
            <Style.Triggers>
                <DataTrigger Archived="True">
                    <Setter Property="Background" Value="Gray" />
                    <Setter Property="FontStyle" Value="Italic" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </src:GX3ClientPlugin.Resources> 
```

但我收到错误 - 错误 1 ​​在“DataTrigger”类型中找不到属性“存档”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:57:54.550

DataTrigger 没有 Archived 属性，但您可以通过 Binding 属性将 Achived 属性绑定到它，如下所示`<DataTrigger Binding="{Binding Path=Archived}" Value="True">`

要在 Achived 属性更改时通知您的视图，您可以：

`GX3TreeViewItem`1.在您的-class:中实现 INotifyPropertyChanged 接口`public class GX3TreeViewItem : TreeViewItem, INotifyPropertyChanged`，创建一个引发 PropertyChanged 事件的方法：

```
private void PropertyChanged(string prop)
{
   if( PropertyChanged != null )
   {
      PropertyChanged(this, new PropertyChangedEventArgs(prop);
   }
} 
```

并将此方法放在您的属性的设置器中：

```
private bool _achived;
public bool Achived
{
   get
   {
      return _achived;
   }
   set
   {
      _achived = value;
      PropertyChanged("Achived");
   }
} 
```

2.或者让你的财产成为一个[`DependencyProperty`](http://www.wpftutorial.net/dependencyproperties.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:06:43.243

这不是实现这一点的正确方法。你应该看看[MVVM Pattern](http://en.wikipedia.org/wiki/Model_View_ViewModel)。

您的 UI 不是“存储额外数据”的合适位置。UI 就是 UI，数据就是数据。这是来自 winforms 或其他非 WPF 背景的人在 WPF 中使用错误的方法和错误的心态所犯的最严重的错误。

这要么不起作用（因为你对你`ItemContainerGenerator`的`TreeView`类一无所知，或者需要额外的工作来覆盖此类的默认行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:02:55.277

老实说，您似乎做错了。这些属性应该在您的数据上。

你可以做这样的事情，

```
Style="{Binding Path=Archived, Converter={StaticResource GetStyle}}" 
```

GetStyle 是一个 IValueConverter，无需扩展 TreeView imo。

# javascript - 在同步函数运行时显示视觉指示器

> ID：13531455
> 
> 赞同：0
> 
> 时间：2012-11-23T14:54:03.067
> 
> 标签：javascript, jquery

我有一个名为的函数`compute()`，它执行大量计算，然后更新由`click()`事件触发的 HTML 表的值。这不是 ajax 调用，只是几个`for`循环。

我想做的是提供一个计算正在运行的视觉指示器。比如修改表格的不透明度。我认为像下面这样的东西可以工作：

```
$("#mytable").css("opacity", "0.5");
compute();
$("#mytable").css("opacity", "1"); 
```

但是当我使用这段代码时，不透明度似乎没有被修改。

关于如何做到这一点的任何提示？

提前谢谢了 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:58:09.197

`compute();`那是因为在修改不透明度和功能之间没有更新 UI 。UI 会更新一次，而不是在每一行代码之后（这会减慢一切）。

您可以使用超时来绕过它：`setTimeout(compute, 0);`.

这样你的 UI 在运行之前得到更新`compute()`。您必须将第三行（将不透明度修改回 1）放在该函数中，因为它将在`compute()`完成之前运行。

```
$("#mytable").css("opacity", "0.5");
setTimeout(compute, 0);

function compute() {
    ...

    $("#mytable").css("opacity", "1");
} 
```

起初它可能看起来很脏，但它是确保您的 UI 更新的真正方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:57:46.563

JavaScript 的所有客户端实现都是单线程的，因此您不能真正期望函数调用`compute`在执行下一条语句时继续运行。
但是，如果您愿意，可以使用[web worker](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)来生成一个后台线程。

在第二次阅读您的问题后，我必须说@tomdemuyt 很可能是正确的：它很可能`compute`执行得如此之快以至于不透明度在一瞬间改变了两次，如此之快以至于您几乎没有注意到它的变化。另外，由于这是一个事件处理程序，您可能需要考虑这一点：

```
function compute(e)
{
    $(this).css({opacity:'.5'});
    //rest of your code
    $(this).css({opacity:'1'});
}
$('#mytable').on('click',compute); 
```

这只是更整洁的IMO - 这可能不适用于您的代码，但以防万一......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:57:46.263

这很可能是因为您的 compute() 函数执行得如此之快，以至于您没有察觉到不透明度的变化。

尝试在 compute() 中设置断点，让我们知道不透明度是否发生了变化。

# macos - 在可可中获取键盘输入

> ID：13531460
> 
> 赞同：1
> 
> 时间：2012-11-23T14:54:32.503
> 
> 标签：macos, cocoa, keyboard-events, keydown

可可新手在这里。
我尝试从键盘获取输入并在将其写入 nstextfield 之前对其进行检查。
从搜索中我发现`keydown()`并且`NSFirstResponder`是​​我需要的。但我无法理解如何实现这些东西，以及一般来说这些东西是如何`NSFirstResponder`工作的。

有人可以帮我举个例子或一些资料吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:50:57.427

不要在文本字段中获取原始事件。而是在您的控制器中实现此委托：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

返回 NO 或 YES 以拒绝/允许该更改

# restkit - 使用 sendObject 时如何告诉 RestKit 使用哪个映射

> ID：13531463
> 
> 赞同：1
> 
> 时间：2012-11-23T14:54:52.333
> 
> 标签：restkit

我是 RestKit 的新手，所以这个问题可能很愚蠢：当使用 [objectManager sendObject:...] 时，我如何告诉 RestKit 它应该使用哪个映射来处理结果？更具体地说：我将 GET 和 POST 数据发送到服务器，该服务器返回 JSON 编码消息：

```
{"purchaseresult":{"status":"ok","errormsg":""}} 
```

我使用的 Objective-C 代码如下所示：

```
RKObjectMapping *purchaseResultMapping = [RKObjectMapping mappingForClass:[PurchaseResult class]];
[purchaseResultMapping mapKeyPathsToAttributes:@"status", @"status", @"errormsg", @"errorMessage",nil];
[objectManager.mappingProvider setMapping:purchaseResultMapping forKeyPath:@"purchaseresult"];
[[RKObjectManager sharedManager].mappingProvider setErrorMapping:purchaseResultMapping];

[objectManager sendObject:queryParams toResourcePath:@"/purchase/post" usingBlock:^(RKObjectLoader* loader) {
    loader.method = RKRequestMethodPOST;
    loader.resourcePath = @"/purchase/post";
    loader.params = queryParams;
    loader.objectMapping = purchaseResultMapping;
}]; 
```

这会返回一个 RestKit 错误：

restkit.network:RKObjectLoader.m:216 在映射过程中遇到错误：预期为“__NSDictionaryI”类型的类的对象映射，提供者为“PurchaseResult”返回一个

有什么想法我在这里做错了吗？

谢谢克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:05:49.813

您发送的对象是 NSDictionary，因此 RestKit 正在寻找 NSDictionary 的对象映射，但您提供的是 PurchaseResult 映射。如果您发送 PurchaseResult 的实例或为 NSDictionary 类提供映射，则应避免此错误。

替代方法如下：

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/purchase/post" usingBlock:^(RKObjectLoader *loader) {
  loader.delegate = **Your loader delegate here**;
  loader.method = RKRequestMethodPOST;
  loader.params = queryParams;
}]; 
```

只要确保您已经为返回的对象定义了映射，您应该会很好。

# c# - 反映属性“列表”时出现错误

> ID：13531470
> 
> 赞同：2
> 
> 时间：2012-11-23T14:55:13.830
> 
> 标签：c#, xml, xml-serialization

我正在尝试使用以下代码将自定义对象序列化为 xml：

```
MatchList matchList = converter.Convert(excelStream);
XmlSerializer xmlSerializer = new XmlSerializer(typeof(MatchList));
StringWriter stringWriter = new StringWriter();
xmlSerializer.Serialize(stringWriter, matchList);
string serializedXml = stringWriter.ToString();
txtResult.Text = serializedXml; 
```

但是我在第二行得到了上面的异常：

匹配列表对象定义为：

```
public class MatchList
{
   public Header Header { get; set; }

   [XmlArray("Lists")]
   [XmlArrayItem("List")]
   public virtual List<List> Lists { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-27T08:39:48.657

如果您的对象中有不需要序列化的属性，请添加该属性

```
[XmlIgnore] 
```

在它的上面。要查找有问题的属性，请通过单击异常消息中的“查看详细信息...”进行挖掘，并一直单击“内部异常”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:02:28.430

```
[XmlArray("Lists")]
[XmlArrayItem("List")]
public virtual List<object> Lists { get; set; } 
```

并将可序列化类型的标记 knownTypeAttribute 添加为`object`

# php - htaccess 中的友好网址

> ID：13531472
> 
> 赞同：0
> 
> 时间：2012-11-23T14:55:23.410
> 
> 标签：php, .htaccess, web

> **可能重复：**
> [StackOverflow，如 URL 路由](https://stackoverflow.com/questions/6292205/stackoverflow-like-url-routing)

我有一个问题没有解决。

因为我可以重定向到 url 友好的 404.php 错误拼写错误。

我想保持...

```
damain/news/1/xxxxxx-xxxx-xxxx

domain/news/1

domain/news/1/djfdkjfsdjffjss 
```

显示同一页面。当唯一正确的 url 是第一个 ( `http://dominio.com/news/1/xxxxxx-xxxx-xxxx`) 并且如果您编写第二个到第三个 error404 重定向 url。

Htaccess，与 php，与规范元？？？

PD：对不起我的写作。但是我是西班牙人，我的英语不是很好，我希望你能理解这个消息

# perl - 如何强制 selectrow_array 返回错误的值？

> ID：13531479
> 
> 赞同：2
> 
> 时间：2012-11-23T14:55:40.117
> 
> 标签：perl, dbi

我记得 DBI 方法有问题`selectrow_array`。当我不够整洁时，我从中得到的不是我问的列的值，而是列数（或不需要的东西，我记不清了）。现在我尝试重构一些代码，并且我想确保在每个可能的地方，我只得到预期值。所以我尽量避免意外并找出不良行为是什么。从 DBI 文档中，我读到这可能确实是有问题的情况：

> 如果在标量上下文中为具有多于一列的语句句柄调用，则未定义驱动程序将返回第一列的值还是最后一列的值。所以不要那样做。此外，在标量上下文中，如果没有更多行或发生错误，则返回“undef”。无法将“undef”与返回的“undef”区分开来，因为第一个字段值为 NULL。由于这些原因，如果您在标量上下文中使用“selectrow_array”，或者干脆不这样做，您应该谨慎行事。

我仍然不能强制`selectrow_array`返回除了值之外的任何东西`col1`（这就是我所期望的）

```
my $query = 'SELECT col1, col2, col3 FROM table WHERE id = 112233';

my ( $c ) = ( $dbh->selectrow_array( $query ) );
my $x = ask_from_db();
my $y = $dbh->selectrow_array( $query );
my $z = ( $dbh->selectrow_array( $query ) );
my @A = $dbh->selectrow_array( $query );

say "C: $c"; # C: col1
say "X: $x"; # X: col1
say "Y: $y"; # Y: col1
say "Z: $z"; # Z: col1
say "A: @A"; # A: col1 col2 col3

sub ask_from_db {
  return $dbh->selectrow_array( $query );
} 
```

我在上面问的每一种方式，都给了我很好的结果。我应该如何运行查询以获得错误的结果？

结果错误！=`col1`值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:28:03.697

文档中的“未定义驱动程序将返回第一列还是最后一列的值”的意思是返回的列是由数据库驱动程序定义的，而不是`DBI`.

所以 Postgres 驱动程序可能决定总是返回第一列，而 mysql 驱动程序可能总是返回最后一列，或者返回的列可能取决于查询。

所以不要调用`selectrow_array`是标量上下文 - 总是在列表上下文中调用它：

```
my @row = $sth->selectrow_array($query) 
```

并且您将避免文档中提到的所有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T17:08:43.667

结果的差异将基于驱动程序的实施。

```
wantarray ? @row : $row[0] 
```

对比

```
wantarray ? @row : $row[-1] 
```

您会使用不同的驱动程序来获得不同的结果。也就是说，我想你会很难找到一个不返回第一个的司机。

如果您想确保获得第一个，请使用：

```
( $dbh->selectrow_array( $query ) )[0] 
```

# jquery - 具有相同类和动态 ID 的按钮的 jquery 选择器

> ID：13531482
> 
> 赞同：0
> 
> 时间：2012-11-23T14:55:52.660
> 
> 标签：jquery

我有一个具有相同类和动态 ID 的按钮列表。当用户单击按钮时，我希望该按钮的文本更改为“已添加”。该功能的其余部分工作正常，但成功的结果根本没有改变。在我获得成功结果之前：

```
$('.addalbum').text('Added'); 
```

但它将列表上的每个按钮都更改为添加。我只希望更改所选项目旁边的按钮。我正在尝试访问选择器中按钮的 id，但到目前为止还没有骰子。

**jQuery**

```
$('.addalbum').click(function() {

        var album_id = $('.addalbum').attr('id');

        $.ajax({
                    url: '/album/addAlbumToList',
                    type: 'POST',
                    data: data-is-here,
                    success: function (result) {
                        $('.addalbum' + album_id).text('Added');                    
                    }
                });
        e.preventDefault();
}); 
```

**HTML/PHP**

```
<button class="addalbum" id="add<?php echo $a->album_id; ?>">Add album</button>
so the IDs are #add123, #add124, etc. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:58:24.090

在点击处理程序中，您可以使用 来引用项目本身`$(this)`，所以不要这样：

```
var album_id = $('.addalbum').attr('id'); 
```

你会这样写：

```
var album_id = $(this).attr('id'); 
```

您也可以为它创建一个变量，因为您在几个地方使用它：

```
var $album = $(this),
album_id = $album.attr('id');

// success handler
$album.text('Added'); 
```

*我在这里使用 $album 来表示它是一个 jQuery 集合*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:58:59.303

您需要`$(this).attr('id')`而不是`$('.addalbum')`在 ajax 调用之前保存。

```
$('.addalbum').click(function() {

        var album = $(this);

        $.ajax({
                    url: '/album/addAlbumToList',
                    type: 'POST',
                    data: data-is-here,
                    success: function (result) {
                        album.text('Added');                    
                    }
                });
        e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:59:14.170

您可以使用`this`来引用单击的按钮。

```
$('.addalbum').click(function() {
    var button = $(this);
    $.ajax({
        url: '/album/addAlbumToList',
        type: 'POST',
        data: data-is-here,
        success: function (result) {
            button.text('Added');                    
        }
    });
    e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T14:59:40.893

如果 ID 是唯一的，为什么不

```
$('#' + album_id).text('Added'); 
```

或更好

```
$('.addalbum').click(function() {

        var thisbutton = $(this);

        $.ajax({
                    url: '/album/addAlbumToList',
                    type: 'POST',
                    data: data-is-here,
                    success: function (result) {
                        thisbutton.text('Added');                    
                    }
                });
        e.preventDefault();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T15:01:18.320

我想你已经糊涂了。您正在将album_id 添加到.addalbum，但是addalbum 类没有动态ID，就像您在该字段中一样`id="add<?php echo $a->album_id; ?>"` 可能这就是您没有得到它的原因。

# android - 无法使用 Valgrind 运行 Java Android 程序

> ID：13531496
> 
> 赞同：12
> 
> 时间：2012-11-23T14:56:35.267
> 
> 标签：android, android-ndk, valgrind

我正在尝试像这样（在 adb shell 中）在 Valgring 下启动一个 Java 程序：

```
valgrind am start -a android.intent.action.MAIN -n com.me.myapp/.MainActivity 
```

我越来越：

```
==2362== Memcheck, a memory error detector
==2362== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==2362== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
==2362== Command: am
==2362== 
/system/bin/sh: am: No such file or directory 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-07T21:51:14.487

你必须创建一个脚本，我们称之为 start_valgrind.sh

```
#!/system/bin/sh

PACKAGE="com.example.hellojni"

# Callgrind tool
#VGPARAMS='-v --error-limit=no --trace-children=yes --log-file=/sdcard/valgrind.log.%p --tool=callgrind --callgrind-out-file=/sdcard/callgrind.out.%p'

# Memcheck tool
VGPARAMS='-v --error-limit=no --trace-children=yes --log-file=/sdcard/valgrind.log.%p --tool=memcheck --leak-check=full --show-reachable=yes'

export TMPDIR=/data/data/$PACKAGE

exec /data/local/Inst/bin/valgrind $VGPARAMS $* 
```

应该复制到设备。

**一旦您在本地文件系统的某个地方的start_valgrind.sh**文件中拥有上述脚本，您就可以使用以下脚本（我们称之为**bootstrap_valgrind.sh**）来完成所有工作（将 start_valgrind.sh 脚本复制到手机，运行它，通过 Valgrind 启动你的应用程序）。

```
#!/usr/bin/env bash

PACKAGE="com.example.hellojni"

adb push start_valgrind.sh /data/local/
adb shell chmod 777 /data/local/start_valgrind.sh 

adb root
adb shell setprop wrap.$PACKAGE "logwrapper /data/local/start_valgrind.sh"

echo "wrap.$PACKAGE: $(adb shell getprop wrap.$PACKAGE)"

adb shell am force-stop $PACKAGE
adb shell am start -a android.intent.action.MAIN -n $PACKAGE/.HelloJni

adb logcat -c
adb logcat

exit 0 
```

**警告：确保使用 setprop 设置的属性名称，即 (wrap.com.yourcompany.yourapp) 的长度小于 31 个字符。
否则，您将收到错误“无法设置属性”，因为您不能设置长度大于 31 的属性名称，这是属性名称中允许的最大字符数。
此外，属性值应 <= 91 个字符：[https ://stackoverflow.com/a/5068818/313113](https://stackoverflow.com/a/5068818/313113)**

* * *

有关**如何为 Android (ARM) 构建 Valgrind，**请从此处查看我的脚本：[https ://stackoverflow.com/a/19255251/313113](https://stackoverflow.com/a/19255251/313113)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-19T03:24:44.853

1) 我使用以下脚本生成 Inst 文件夹 [Android valgrind 构建失败](https://stackoverflow.com/questions/16450650/android-valgrind-build-fails/19255251#19255251)

2）我正在做的错误是我没有授予对 inst 下的所有文件夹的写入权限 MemCheck 工具在 lib/valgrind 下。

我的发现将 Generated Inst(bin,share,inclide,lib) 文件夹下的所有文件夹复制到 /data/local/Inst 遍历每个文件夹并将权限设置为 CHMOD 777 *

如果我没有复制所有这些文件夹 1 文件夹/Inst 面临 memcheck 权限，如果没有将权限设置为 chmod 777 到 Hirearchy 中的所有文件夹，则面临类似 Memcheck Tool Not Found for arm-linux 的问题

# windows - 无法在 Windows 7 上以管理员身份运行 InstallShield 应用程序

> ID：13531499
> 
> 赞同：1
> 
> 时间：2012-11-23T14:57:04.240
> 
> 标签：windows, admin, installshield

我在 Windows 7 上以管理员身份登录时安装了 InstallShield。InstallShield 的右键单击弹出菜单中缺少“以管理员身份运行”，但对于 Visual Studio 和其他应用程序则存在。

这个问题有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:52:26.650

操作系统会阻止包含[某些关键字的应用程序。](http://www.isosoft.org/taoffi/post/2010/06/09/Windows-Vista-Windows-7-To-pin-or-not-to-pin-that-ise280a6.aspx)[这](http://social.technet.microsoft.com/Forums/en/w7itproui/thread/68ed3447-7570-4245-b336-6bd0c69966d7)是关于此限制的另一个讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:41:58.303

问题是：在 Windows 7 Ultimate 中，某些应用程序的上下文菜单中有“以管理员身份运行”项，而其他应用程序则没有。

需要“以管理员身份运行”才能使用 InstallShield 中 Redistributables 页面上的“下载所选项目”或“下载所有项目...”菜单项。

这是似乎对我有用的解决方案：

1.  右键单击桌面上的快捷方式。
2.  单击上下文菜单中的“疑难解答兼容性”项。
3.  “检测问题”运行后，选择“故障排除程序”选项。
4.  选中“程序需要额外权限”项，然后单击“下一步”按钮。
5.  单击“启动程序...”并检查功能。
6.  如果满意，请单击“程序兼容性”对话框中的“下一步”。
7.  单击“是，保存此程序的这些设置”。

如果有其他解决方案，您会分享吗？

# ios - 更改 SKProduct/SKPayment 代表

> ID：13531500
> 
> 赞同：1
> 
> 时间：2012-11-23T14:57:14.130
> 
> 标签：ios, cocoa-touch, in-app-purchase

我实施应用内购买。我将所有方法都放在单独的类 IAPHelper 中，出于某些原因，我希望在其他类中有 SKProductsRequestDelegate。有什么办法可以将代表更改为我在 IAPHelper 中安装的其他班级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:54:46.673

如果 IAPHelper 知道其他类，当然:)

```
//In eg appDelegate
IAPHelper *helper = [[IAPHelper alloc] init];
helper.productsDelegate = self; 
```

...

```
//in IAPHelper
-(void)setProductsHelper:(id)newHelper {
    self.productsRequest = newHelper;
} 
```

* * *

例如

# javascript - 从 7 个输入条件中搜索以查看 json 文件

> ID：13531502
> 
> 赞同：2
> 
> 时间：2012-11-23T14:57:27.657
> 
> 标签：javascript, jquery, json, jquery-ui-map

我会尽力解释。

我有一个包含 7 个输入（年龄、国家、城市……）的表单，在 JSON 文件中我有很多人。我需要使用表单中的所有条件搜索该 json 文件。例如西班牙&25 岁。

我在数组中有输入数据，但我无法或不知道如何比较该标准并从 JSON 文件中检索信息。

下面的代码：

```
 <!-- Google Maps -->
<script src="assets/js/jquery.ui.map.full.min.js"></script>
<script src="assets/js/jquery.ui.map.extensions.js"></script>
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script type="text/javascript">
  $(function(){
    $('#mapa').gmap({'callback': function() {
      var self = this;
      parsejson = function(arrayvalues){
        $.getJSON( 'mapa.json', function(data) { 
          $.each(arrayvalues, function(x, val) {
            if (val.value !== "") {
              console.log(val.value);
              $.each( data.markers, function(i, marker) {
                console.log('marker ' + marker);
                // PROBLEM IS HERE, DON'T KNOW HOW TO SOLVE

              });
            };
          });

          // Draw markers in map

          // $.each( data.markers, function(i, marker) {
          //   self.addMarker({ 
          //     'position': new google.maps.LatLng(marker.latitude, marker.longitude), 
          //     'bounds': false
          //   }).click(function() {
          //     self.openInfoWindow({'content': marker.content }, this);
          //   });
          // });
        });

      };

      self.getCurrentPosition(function(position, status) {
        if ( status === 'OK' ) {
          var clientPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
          self.addMarker({'position': clientPosition, 'bounds': false});
          self.option('center', clientPosition);
          self.option('zoom', 12);
          self.addShape('Circle', { 
            'strokeColor': "#008595",
            'strokeOpacity': 0.8,
            'strokeWeight': 2,
            'fillColor': "#008595",
            'fillOpacity': 0.35,
            'center': clientPosition,
            'radius': 500,
            'clickable': false
          });
        }
        else {
          console.log("else");
          var clientPosition = new google.maps.LatLng(40.463667, -3.74922);
          self.option('center', clientPosition);
          self.option('zoom', 4);
        }
      });
    }});
  });

  // Search form actions
  $('#searcher-form').submit(function(e) {
    e.preventDefault();
    var $inputs = $(this).serializeArray();

    parsejson($inputs);
  });
</script>
<!-- End of Google Maps --> 
```

JSON 文件如下所示：

```
{"markers":[
{
    "fromcountry":"Spain",
    "fromcity":"San Cristóbal de la Laguna",
    "livecountry":"Spain",
    "livecity":"San Cristóbal de la Laguna",
    "age":25,
    "profession":"Diseñador"
    "title":"La Laguna",
    "latitude":28.469294910391532,
    "longitude":-16.329975128173828,
    "content":"Mooola"
},
{
    "fromcountry":"Spain",
    "fromcity":"Madrid",
    "livecountry":"Spain",
    "livecity":"Santa Crus de Tenerife",
    "age":30,
    "profession":"Programador"
    "title":"Los Majuelos",
    "latitude":28.44038127509586,
    "longitude":-16.311674416065216,
    "content":"Mooola"
} 
```

]}

表单中的数组给了我这个：

```
Object {name: "regsearchcountry", value: "whatever"}
Object {name: "regsearchcity", value: "whatever"}
Object {name: "regsearchlivecountry", value: ""}
Object {name: "regsearchlivecity", value: "whatever"}
Object {name: "regsearchagefrom", value: ""}
Object {name: "regsearchageto", value: "whatever"}
Object {name: "regsearchprofession", value: ""} 
```

我需要将表单字段与 JSON 中的某些字段进行比较，而不是所有数据。所以我需要将所有这些表单字段与 JSON 进行比较，如果一个为空，则比较其余的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:23:07.733

您只需要遍历 json 文件中的记录，并根据您的输入记录检查每条记录。

在循环的每次迭代中，您需要对输入记录字段进行另一个循环，一次将它们与当前记录比较一个属性。

如果您正在寻找完全匹配的内容，您可以通过在一个字段不匹配时立即继续下一条记录来加快速度。

```
var records = [
    { name : 'bob', age : 22 },
    { name : 'john', age : 32 }
    /* lots of other records */
];

var input = {
    name : 'john',
    age : 32
};

var compare, match, result;

    // loop through all the records
for(var i = 0, len = records.length; i < len; i++) {

    compare = records[i];

    match = true;

            // loop through each property (name, age etc)
    for(prop in input) {

                    // as soon as something is wrong, break out and try the next one
        if(input[prop] !== compare[prop]) { 

            match = false;
            break;

        }

    }

            // if we got through without anything being wrong, we found the result!
    if(match) {

        result = compare;
        break;

    }

}

// result should be set to a matching result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:33:15.170

使用 linq.js 这是从[http://linqjs.codeplex.com/复制粘贴的示例](http://linqjs.codeplex.com/)

```
var jsonArray = [
    { "user": { "id": 100, "screen_name": "d_linq" }, "text": "to objects" },
    { "user": { "id": 130, "screen_name": "c_bill" }, "text": "g" },
    { "user": { "id": 155, "screen_name": "b_mskk" }, "text": "kabushiki kaisha" },
    { "user": { "id": 301, "screen_name": "a_xbox" }, "text": "halo reach" }
]
// ["b_mskk:kabushiki kaisha", "c_bill:g", "d_linq:to objects"]
var queryResult = Enumerable.From(jsonArray)
    .Where(function (x) { return x.user.id < 200 })
    .OrderBy(function (x) { return x.user.screen_name })
    .Select(function (x) { return x.user.screen_name + ':' + x.text })
    .ToArray();
// shortcut! string lambda selector
var queryResult2 = Enumerable.From(jsonArray)
    .Where("$.user.id < 200")
    .OrderBy("$.user.screen_name")
    .Select("$.user.screen_name + ':' + $.text")
    .ToArray(); 
```

# java - 在 Java 中将字符串解析为日期时出错

> ID：13531512
> 
> 赞同：6
> 
> 时间：2012-11-23T14:58:20.447
> 
> 标签：java, parsing, date

是的，另一个 Java 日期帖子 :)

我的问题：

简单的标准代码，用于测试插入的日期是否为请求的形式（dd/MM/yyyy）：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
try {

   sdf.parse(strDate); 

} catch(ParseException e) {

   // err

} 
```

> strDate = "10-12-2012" ----> sysout = err (ok)
> 
> strDate = "2012-11-10" ----> sysout = err (ok)
> 
> strDate = "15/10/2011" ----> sysout = 解析（确定）

*问题：*

> strDate = "2012/12/15" ----> sysout = 这个日期，我预计错误结果解析为 "Tue Jun 03 00:00:00 CET 21"

谁知道？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T15:06:54.960

只需将[**setLenient**](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)设置为**false**。

来自 API：

[setLenient 方法：](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)

> 指定日期/时间解析是否宽松。通过宽松的解析，解析器可以使用启发式方法来解释不精确匹配该对象格式的输入。使用严格的解析，输入必须匹配这个对象的格式。

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
try {
  sdf.setLenient(false);
  System.out.println(sdf.parse("2012/12/15")); 
} catch(ParseException e) {
  e.printStackTrace();
} 
```

# ruby-on-rails - 禁用设计可确认邮件

> ID：13531515
> 
> 赞同：19
> 
> 时间：2012-11-23T14:58:30.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, devise-confirmable

最近我将该`confirmable`模块添加到我的用户类中。我的应用程序中已经有一个相当不错的邮件系统（Sidekiq、Sendgrid...），所以我创建了自己的“确认帐户”邮件。现在的问题是禁用 Devise 发送其默认电子邮件。有没有办法完全禁用设计邮件系统？

**添加：**

*   我想维护`confirmable`模块，因为我正在使用它的属性和路由。
*   我不能使用`skip_confirmation!`，因为我希望用户确认他们的帐户。
*   我只想禁用`Devise`邮件。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-23T15:19:08.677

使用来源，卢克：

```
# lib/devise/models/confirmable.rb

# A callback method used to deliver confirmation
# instructions on creation. This can be overriden
# in models to map to a nice sign up e-mail.
def send_on_create_confirmation_instructions
  send_devise_notification(:confirmation_instructions)
end 
```

所以在你的模型中重写这个方法什么都不做。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T15:22:29.370

尝试在您的模型中覆盖以下设计方法：

```
def confirmation_required?
  !confirmed?
end 
```

或使用`skip_confirmation!`：

```
user = User.new(params) 
user.skip_confirmation! 
user.save! 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-23T15:14:32.510

使用skip_confirmation！保存任何对象之前的方法。

```
def create
  @user = User.new(params[:user])
  @user.skip_confirmation!
  @user.save!
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T14:59:58.243

我认为只是删除

```
:confirmable 
```

从用户模型应该这样做

或者您是否尝试过禁用

```
config/environments/development.rb

config.action_mailer.default_url_options = { :host => 'localhost:3000' } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-04T05:54:00.367

我推荐你

User.skip_reconfirmation！

即跳过确认邮件并更新电子邮件以不使用“确认！”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-16T11:27:49.507

从设计模型ex中删除（`:confirmable`）：-这里我的设计模型是用户在这里我像这样使用。

```
class User < ActiveRecord::Base  
     devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable,:omniauthable

end 
```

# jquery - 使用 jQuery 从下拉列表中更改正文类

> ID：13531518
> 
> 赞同：-2
> 
> 时间：2012-11-23T14:58:34.820
> 
> 标签：jquery

如何使用 jQuery 从下拉列表中更改 body 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:03:55.057

```
$('select').change(function() {
     $('body').addClass($(this).val());
}); 
```

如果你谷歌“jQuery 输入更改”，你会找到`.change()`方法。如果您在 Google 上搜索“jQuery 更改类”，您会遇到多种允许您添加、删除和修改类的方法。

添加一点创造力，*哇哦*你神奇地发明了远远超出爱因斯坦能力的东西。

Google 是开发人员最有价值的工具。拥有权利的同时也被赋予了重大的责任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:04:19.167

```
$(document).ready(function(){
  // On load

  $('#MyDropDownId').change(function(){ // on change event
    $('body')
    .removeClass() // remove the classes on the body
     // or removeClass('class1 class2 ...') in order to not affect others classes
    .addClass( $(this).val() ); // set the new class
  })

}) 
```

**假设 ：**

```
<select id="MyDropDownId">
  <option value="class1">First Class</option>
  <option value="class2">2nd Class</option>
</select> 
```

阅读有关[JQuery 更改的更多信息](http://api.jquery.com/change/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:05:29.157

假设你想`change the body class on change event of dropdown`

**[现场演示](http://jsfiddle.net/rajaadil/LxkY3/2/)**

```
<select id="dropdownId" >
  <option>class1</option>
  <option>class2</option>
  <option>class3</option>    
</select>

$('#dropdownId').change(function() {
    $('body').attr('class', $(this).val());
}); 
```

# database - 在实体管理器中实现更新并使用 JSF 托管 Bean 调用它

> ID：13531521
> 
> 赞同：0
> 
> 时间：2012-11-23T14:58:56.140
> 
> 标签：database, netbeans, javabeans, entitymanager

我正在使用带有 jdk 版本 6 和 primefaces 3.4.1 的 netbeans 7.2.1。我已经创建了一个数据库，并从数据库中创建了实体，然后从实体中创建了 JSF 页面。

我现在有一个 jsf 托管 bean，它通过从数据库中提取用户并根据他们的用户名是否包含在某个字符串中来连接它们来为程序创建一个思维导图。

思维导图中有一个双击工具，我想用它来更新数据库，但由于某种原因它不起作用。我没有收到错误消息，只是没有任何变化。

这是我试图用来实现更新功能的：

```
package jpa.session;

import java.util.List;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.NoResultException;
import javax.persistence.PersistenceContext;
import jpa.entities.Enginetable;

@Stateless
public class EnginetableFacade extends AbstractFacade<Enginetable> {
    @PersistenceContext(unitName = "Networks0.75PU")
    private EntityManager em;

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

    public EnginetableFacade() {
        super(Enginetable.class);
    }        

    public Enginetable setUserdetails( Enginetable user ) {
        try 
        {        
            return em.merge(user); 
        } 

        catch (NoResultException nre) 
        {
            return null;
        }
    }

} 
```

But it doesn't work. Note that I have no problem accessing the database but haven't included the code here.

This is the relevant method:

```
 public void onNodeDblselect(SelectEvent event) {
        this.user.setConnections( this.user.getConnections() + "-" + this.selectedNode.getLabel() );
        this.selectedNode = (MindmapNode) event.getObject();
        this.ejbFacade.setUserdetails( this.user );
    } 
```

This is the call from the xhtml

```
 <p:mindmap value="#{mmBean.root}" style="width:100%;height:600px">
        <p:ajax event="dblselect" listener="#{mmBean.onNodeDblselect}" update="output" />
    </p:mindmap> 
```

Please, any advice would be fantastic.

This is the full code for the bean:

```
package jsf;

import java.io.Serializable;
import java.sql.*;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ViewScoped;
import javax.inject.Named;
import javax.persistence.Version;
import jpa.entities.Enginetable;
import jpa.session.EnginetableFacade;
import org.primefaces.event.SelectEvent;
import org.primefaces.model.mindmap.DefaultMindmapNode;
import org.primefaces.model.mindmap.MindmapNode;

/**
 *
 * @author AOL
 */
@Named(value = "mmBean")
@ViewScoped
public class mmBean implements Serializable{

    @EJB
    private jpa.session.EnginetableFacade ejbFacade;
    private MindmapNode root;

    private MindmapNode selectedNode;

    PreparedStatement pst = null;

    private List<Enginetable> elements;
    private List<Enginetable> filteredElements;
    private List<Enginetable> userlist;

    private Enginetable selectedElement;
    private Enginetable[] selectedElements; 

    private Enginetable current;

    private Enginetable nodeentity = new Enginetable();
    private Enginetable user = new Enginetable();
    private String connections;
    private String[] strConnections;
    private String[] userConn;
    private List<String> indirectConn = new ArrayList<String>();
    private String[]  iConn;

    private Object rootlabel;

    //ADDED BY AODHÁN
    Connection con = null;
    Statement st = null;
    ResultSet rs = null;

    String url = "jdbc:mysql://localhost:8080/networkdb";
    String theuser = "Aodhan";
    String password = "Cavelcade1988";

    /**
     * Creates a new instance of MmBean
     */
    public mmBean() {
    }

    @PostConstruct
    public void init() {

        this.userlist = this.getFullList();
        Enginetable entity;

        //remoteuser=null;

        // filteredElements = new ArrayList<Enginetable>();
        this.user = this.userlist.get(0);

        this.userConn = this.user.getConnections().split("-");

        root = new DefaultMindmapNode(user.getStartnode(), "Google", "006666", false);

        this.rootlabel = this.root.getLabel();
        for( int i = 0 ; i < this.userlist.size() ; i++){

                    entity = this.userlist.get(i);

                    if ( !rootlabel.equals(entity.getStartnode() ) && Arrays.asList(this.userConn).contains( entity.getStartnode() ) ) {
                        connections = entity.getConnections();
                        iConn = connections.split("-");
                        boolean addAll;
                        addAll = this.indirectConn.addAll(Arrays.asList(iConn));
                    }

        }

        for( int i = 0 ; i < this.userlist.size() ; i++){

                    entity = this.userlist.get(i);

                    if ( !rootlabel.equals(entity.getStartnode() ) ) {

                if ( Arrays.asList(this.userConn).contains( entity.getStartnode() ) )  { 

                                root.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "33FF00"));

                            } 

                                else if ( !Arrays.asList(this.userConn).contains( entity.getStartnode() ) && this.indirectConn.contains( entity.getStartnode() ) ){

                                    root.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "00FFFF"));

                                } 

                else{

                                    root.addNode(new DefaultMindmapNode( entity.getStartnode() , "Malicious Software: ", "CC0000"));

                }

            }

        }

    }

    public MindmapNode getRoot() {
        return root;
    }

    public MindmapNode getSelectedNode() {
        return selectedNode;
    }
    public void setSelectedNode(MindmapNode selectedNode) {
        this.selectedNode = selectedNode;
    }

    public void onNodeSelect(SelectEvent event) {
        MindmapNode node = (MindmapNode) event.getObject();

            for( int i = 0 ; i < this.userlist.size() ; i++){
                    Enginetable entity;
                    Object label = node.getLabel();

                    entity = userlist.get(i);
                    if ( entity.getStartnode() == label ){
                        this.nodeentity = entity;
                    }

            }
    //load children of select node and add via node.addNode(childNode);
    //populate if not already loaded
            if(node.getChildren().isEmpty()) {
               this.setChildNodes( node ); 
            }
        }

    public void onNodeDblselect(SelectEvent event) {
        this.user.setConnections( this.user.getConnections() + "-" + this.selectedNode.getLabel() );
        this.selectedNode = (MindmapNode) event.getObject();
        this.ejbFacade.setUserdetails( this.user );
    }

    public void setUserlist(List<Enginetable> elements) {
        this.userlist = elements;
    }

    public List<Enginetable> getUserlist() {
        return this.userlist;
    }

    public void setUser(Enginetable element) {
        this.user = element;
    }

    public Enginetable getUser() {
        return this.user;
    }

    public void setFilteredElements(List<Enginetable> filteredElements) {
        //this.filteredElements = filteredElements;
        this.elements=filteredElements;
    }

    public List<Enginetable> getFilteredElements() {
        return filteredElements;
    }

    public void setSelectedElements(Enginetable[] selectedElements) {
        this.selectedElements = selectedElements;
    }

    public Enginetable[] getSelectedElements() {
        return selectedElements;
    }

    public void setSelectedElement(Enginetable selectedElement) {
        this.selectedElement = selectedElement;
    }

    public Enginetable getSelectedElement() {
        return selectedElement;
    }

    private EnginetableFacade getFacade() {
        return ejbFacade;
    }  

    // ADDED BY AODHÁN

    public List<Enginetable> getListByUsername(String user){
       return this.ejbFacade.getEnginetableByUsername(user);
    } 

    public List<Enginetable> getListByUserID( int id ){
       return this.ejbFacade.getEnginetableByUserid(id);
    } 

    public List<Enginetable> getFullList(){
       return this.ejbFacade.getFullEnginetable();
    } 

    public Enginetable setUserdetails( Enginetable user ){
       return this.ejbFacade.setUserdetails( user );
    } 

    public void setChildNodes( MindmapNode node ){

        Object label = node.getLabel();
        this.rootlabel = this.root.getLabel();
        this.strConnections = nodeentity.getConnections().split("-");

        for( int i = 0 ; i < this.userlist.size() ; i++){

            Enginetable entity;

            entity = this.userlist.get(i);

            if ( !label.equals(entity.getStartnode() ) && !this.rootlabel.equals( entity.getStartnode() ) ) {

                if ( Arrays.asList(this.userConn).contains( entity.getStartnode() ) && !Arrays.asList(this.strConnections).contains( entity.getStartnode() ) ){

                    node.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "33FF00"));

                }   

                else if ( !Arrays.asList(this.userConn).contains( entity.getStartnode() ) && this.indirectConn.contains( entity.getStartnode() ) ){

                    node.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "00FFFF"));

                } 

                else if ( Arrays.asList(this.userConn).contains( entity.getStartnode() ) && Arrays.asList(this.strConnections).contains( entity.getStartnode() ) ){

                    node.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "0066FF"));

                }

        else if ( !Arrays.asList(this.userConn).contains( entity.getStartnode() ) && Arrays.asList(this.strConnections).contains( entity.getStartnode() ) ){

                    node.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "FFCC00"));

                } 

                else if ( !Arrays.asList(this.userConn).contains( entity.getStartnode() ) && !Arrays.asList(this.strConnections).contains( entity.getStartnode() ) ){

                    node.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "CC0000"));

                } 

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:14:39.267

I realised what the problem was, and it was twofold, it seems.

```
 public void onNodeDblselect(SelectEvent event) {
        this.user.setConnections( this.user.getConnections() + "-" + this.selectedNode.getLabel() );
        this.selectedNode = (MindmapNode) event.getObject();
        this.ejbFacade.setUserdetails( this.user );
    } 
```

I was calling this.selectedNode before it was defined, here.

```
public Enginetable setUserdetails( Enginetable user ) {
    try 
    {        
        return em.merge(user); 
    }  

    catch (NoResultException nre) 
    {
        return null;
    }
} 
```

It doesn't like this return statement, so I broke it up.

```
public Enginetable setUserdetails( Enginetable user ) {
    try 
    {        
        em.merge(user); 
        em.flush();
        return user;
    } 

    catch (NoResultException nre) 
    {
        return null;
    }
} 
```

I will have to make the page update, but that is a html problem.

# postgresql - 从命令行使用 postgresql 获取身份验证失败错误

> ID：13531527
> 
> 赞同：5
> 
> 时间：2012-11-23T14:59:21.767
> 
> 标签：postgresql, centos

当我尝试像这样从命令行登录时

```
psql -h dbserver -U testuser test 
```

然后我得到这个错误

```
psql: FATAL:  Ident authentication failed for user "testuser" 
```

这是我的

> 纳米 -w /var/lib/pgsql/data/pg_hba.conf

```
# TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD

# "local" is for Unix domain socket connections only
local   all         all                               ident
# IPv4 local connections:
host    all         all         127.0.0.1/32          password
# IPv6 local connections:
host    all         all         ::1/128               ident
host    all     all     192.168.0.1/24  password 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T15:37:42.737

使用身份验证时，您不能使用`-U`in指定非默认用户。您不会以该用户身份运行，因此身份验证将失败。`psql``ident``psql`

您必须使用`sudo -u testuser psql test`或更改`pg_hba.conf`以便身份验证（至少`testuser`在 db 上`test`）使用`md5`密码身份验证，并为`testuser`with设置密码（`ALTER USER ... PASSWORD`如果他们还没有密码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T14:31:35.927

我在中看到以下错误`/var/lib/pgsql/data/pg_log/postgresql-Wed.log`：

> 日志：提供的用户名 (DB_USER) 和经过身份验证的用户名 (SHELL_USER) 不匹配 致命：用户“DB_USER”的身份验证失败

我的解决方案是将所有身份验证方法更改`/var/lib/pgsql/data/pg_hba.conf`为**md5**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-10T18:16:52.613

如上所述，此问题可能有两个原因 - testuser 不存在 - 密码错误或用户身份验证失败。

这是我在 Windows 中为解决此问题所做的工作：

1.  **通过 pgAdmin 检查**：转到您的程序并搜索 pgAdmin 并运行。通常这将在[http://127.0.0.1:51865/browser/运行](http://127.0.0.1:51865/browser/)

检查服务器“PostgreSQL”下的登录/组角色选项卡。检查用户是否存在。您也可以通过命令**“psql -U postgres”**登录到“postgres”用户 并运行命令**“\du”来执行此操作**

如果用户 testuser 不存在，则创建它。

2.  将 pg_hba.conf 中的身份验证方法更改为 md5。或者，
    使用以下命令更改用户的密码：ALTER USER ... PASSWORD。

# asp.net-mvc-3 - MVC3 使用 .resx 进行图像本地化

> ID：13531532
> 
> 赞同：6
> 
> 时间：2012-11-23T14:59:49.180
> 
> 标签：asp.net-mvc-3, localization, resx

[一段时间以来，我一直很高兴地按照这些说明](http://afana.me/post/aspnet-mvc-internationalization-part-2.aspx)`.resx`在我的 MVC3 应用程序中使用文件对文本进行本地化，但现在已经到了我也需要对图像进行本地化的地步。

VS2010中的`.resx`编辑器可以让您轻松地将图像添加为资源，它只是将其转储到与文件位于同一目录的名为 Resources 的文件夹中`.resx`，我可以通过调用以与视图中的字符串相同的方式引用图像`@ResXfileName.ResourceName`，但这会返回一个`System.Drawing.BitMap`对象，我希望它只会给我图像的路径，这样我就可以将它推到图像标签的 src 属性中，但我根本不知道如何获取路径！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T15:16:10.780

## 解决方案1：语言环境文件夹结构

最好（也是最简单）的方法是添加一个新的`HtmlHelper`扩展方法，该方法返回语言环境名称（或 LCID），然后您可以将其与任何东西（图像、脚本等）一起使用。最好的方法当然是在这样的文件夹结构中拥有本地化文件：

```
/images
    /en-US
        image1.png
    /en-GB
        image1.png
    /es-ES 
```

            image1.png

这就是你将如何使用它：

```
<img src="/images/@Html.Locale/backgrounds/back.png" /> 
```

这是这种扩展方法的一个例子。

```
public MvcHtmlString Locale(this HtmlHelper helper)
{
    // in case you're setting UI culture
    return MvcHtmlString.Create(System.Threading.Thread.CurrentThread.CurrentUICulture.Name);
} 
```

如果这种简化在您的情况下不起作用并且您需要对图像进行特定调用，则创建一个`UrlHelper`名为`Image`或`File`在其中为它提供服务器应用程序相对路径的方法，其中一些标记被您的语言环境名称或 LCID 替换。

## 解决方案 2：资源文件链接

您还可以将图像路径放在资源文件中，并在视图中使用这些值来为图像（或其他文件）提供正确的路径。

```
public MvcHtmlString Resource(this UrlHelper helper, string classKey string resourceKey)
{
    return MvcHtmlString.Create(helper.ViewContext.HttpContext.GetGlobalResourceObject(classKey, resourceKey));
} 
```

然后在您看来，将其用作：

```
<img src="@Url.Resource("images", "header")" /> 
```

# wpf - 使用 PRISM 构建数据库感知应用程序

> ID：13531534
> 
> 赞同：0
> 
> 时间：2012-11-23T14:59:58.560
> 
> 标签：wpf, mvvm, architecture, prism

我正在使用 WPF、MVVM 和 PRISM 构建应用程序。该应用程序是一个密集的 CRUD 应用程序，并且使用实体框架访问数据库。我想使用模块构建应用程序，但我不知道在哪里放置数据访问代码（更准确地说，我不知道在哪里放置存储库接口）。如果他们进入基础设施项目。那么所有模块都将依赖于此，它似乎不是正确的地方。另一方面，如果接口进入它们各自的模块，那么模块之间会有很多相互依赖，这是不好的。
问题：设计数据库感知模块化 PRISM MVVM 应用程序的最佳方式，也许是我案例的最佳解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:26:04.947

我想你可以看看[MEF](http://blogs.msdn.com/b/brada/archive/2008/09/29/simple-introduction-to-composite-applications-with-the-managed-extensions-framework.aspx)。它允许您拥有所需的抽象和模块化级别，同时一切都以无缝方式协同工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:13:54.247

我建议您阅读[官方 Prism 指南](http://compositewpf.codeplex.com/releases/view/55580)。

我使用这种分离：

*   `MyApp`- 贝壳项目
*   `MyApp.Infrastructure`- 所有共享**界面**- 包括您的`IRepository`
*   `MyApp.DAL`- 包含所有 DAL 类，以及`Repository`实现
*   `MyApp.Modules.SimpleModule`
*   `MyApp.Modules.AnotherModel`
*   等等

关于模块的主要内容 - 它们不应该相互依赖**，**但它们可以依赖于共享模块（例如`MyApp.Infrastructure`）。

# sql - 从选项卡控件上的文本框中获取文本

> ID：13531535
> 
> 赞同：-1
> 
> 时间：2012-11-23T15:00:00.553
> 
> 标签：sql, vb.net, winforms, visual-studio-2010, tsql

我有一个带有标签控件的表单，其中有**4 个标签页**，每个标签页都有**自己的**texboxes 和组合框，然后我在 tabcontrol 之外有一个按钮**，****它**从这些框中输入的所有值构建一个**SQL**字符串，即使有些是空白的，问题是当我按下按钮时，我得到一个**空引用异常**，即使当我使用**Try..Catch**或**错误恢复**时，编译器也拒绝创建文本字符串。这是我的代码：

 ******```
Private Sub btnUpdate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)     Handles btnUpdate.Click
    If Me.BankGuidTextBox.Text = vbNullString Then
        Me.BankGuidTextBox.Text = Guid.Empty.ToString
    End If
    If Me.BankNumTextBox.Text = vbNullString Then
        Me.BankNumTextBox.Text = 0
    End If
    If Me.NameTextBox.Text = vbNullString Or Me.CodeTextBox.Text = vbNullString Then
        GoTo outofsub
    End If
    Try
        Dim strSQL3 As String
        strSQL3 = "USE MSILHR" & vbCrLf & _
            "UPDATE employee SET Code = '" & Me.CodeTextBox.Text & "', Name = '" &  Me.NameTextBox.Text & "', Latinname = '" & Me.LatinNameTextBox.Text & "', Barcode = '" & Me.BarcodeTextBox.Text & "', FirstName = '" & Me.FirstNameTextBox.Text & "', LastName = '" & Me.LastNameTextBox.Text & "', idFather = '" & Me.IdFatherTextBox.Text & "', idMother = '" & Me.IdMotherTextBox.Text & "', idBirthDate = '" & Me.IdBirthDateDateTimePicker.Text & "', idBirthplace = '" & Me.IdBirthPlaceTextBox.Text & "', idSex = '" & Me.IdSexComboBox.SelectedValue & "', idMaritalstat = '" & Me.IdMaritalstatComboBox.SelectedValue & "', idSmoker = '" & Me.IdSmokerComboBox.SelectedValue & "', idMilitary = '" & Me.IdMilitaryComboBox.SelectedValue & "', idRegistry = '" & Me.IdRegistryTextBox.Text & "', idNum = '" & Me.IdNumTextBox.Text & "', idAddress = '" & Me.IdAddressTextBox.Text & "', idNationality = '" & Me.IdNationalityTextBox.Text & "', idReligion = '" & Me.IdReligionComboBox.SelectedItem & "', idTel = '" & Me.IdTelTextBox.Text & "', idMobile = '" & Me.IdMobileTextBox.Text & "', idNotes = '" & Me.IdNotesTextBox.Text & "', jStartDate = '" & Me.JStartDateDateTimePicker.Text & "', jQuitDate = '" & Me.JQuitDateDateTimePicker.Text & "', jQuitReason = '" & Me.JQuitReasonTextBox.Text & "', jSocialSec = '" & Me.JSocialSecTextBox.Text & "', jSocialdin = '" & Me.JSocialdinDateTimePicker.Text & "', jSocialdout = '" & Me.JSocialdoutDateTimePicker.Text & "', jHoliday1 = '" & Me.JHoliday1ComboBox.SelectedValue & "', jHoliday2 = '" & Me.JHoliday2ComboBox.SelectedValue & "', jEmpStat = '" & Me.JEmpStatComboBox.SelectedValue & "', jEmail = '" & Me.JEmailTextBox.Text & "', jPrevvacs = '" & Me.JPrevvacsTextBox.Text & "', jAdminvacs = '" & Me.JAdminvacsTextBox.Text & "', jHealthvacs = '" & Me.JHealthvacsTextBox.Text & "', jUnpaidvacs = '" & Me.JUnpaidvacsTextBox.Text & "', DepartmentGuid = '" & Me.DepartmentGuidComboBox.SelectedValue.ToString & "', JobTitleGuid = '" & Me.JobTitleGuidComboBox.SelectedValue.ToString & "',SalarycalctypeGuid = '" & Me.SalarycalctypeGuidComboBox.SelectedValue.ToString & "', TeamGuid = '" & Me.TeamGuidComboBox.SelectedValue.ToString & "', WorkDays = '" & Me.WorkDaysTextBox.Text & "', DaHours = '" & Me.DaHoursTextBox.Text & "', OverTimeHourPrice = '" & Me.OverTimeHourPriceTextBox.Text & "', CutSalary = '" & Me.CutSalaryTextBox.Text & "',BasicSalary = '" & Me.BasicSalaryTextBox.Text & "', SpecialSalary = '" & Me.SpecialSalaryTextBox.Text & "',CurrencyGuid = '" & Me.CurrencyGuidComboBox.SelectedValue.ToString & "', BankGuid = '" & Me.BankGuidTextBox.Text & "', BankNum = '" & Me.BankNumTextBox.Text & "', PeriodGUID = '" & Me.EmpperiodCombo.SelectedValue.ToString & "'" & vbCrLf & _
            "WHERE GUID = '" & Me.GUIDTextBox.Text & "'"

        '"update employee set Picturepath = (select name from types where type = '660')+'\" & Me.NameTextBox.Text & "' where code = '" & Me.CodeTextBox.Text & "' AND Name = '" & Me.NameTextBox.Text & "'"
        Dim dbConnection As New SqlConnection(connectionString)
        ' A SqlCommand object is used to execute the SQL commands.
        Dim cmd As New SqlCommand(strSQL3, dbConnection)

        ' Open the connection, execute the command, and close the connection.
        ' It is more efficient to ExecuteNonQuery when data is not being 
        ' returned.
        dbConnection.Open()
        cmd.ExecuteNonQuery()
        dbConnection.Close()

        MessageBox.Show("Record is updated.", _
            "Data Addition Status", _
            MessageBoxButtons.OK, MessageBoxIcon.Information)

    Catch sqlExc As SqlException
        MessageBox.Show(sqlExc.ToString, "SQL Exception Error!", _
            MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try
    'Me.EmployeeTableAdapter.Fill(Me.MSILHRDataset.employee)

    ResetUI()
outofsub:
    MsgBox("you need to add more information!", MsgBoxStyle.Information, "Error")
End Sub 
```

**好的新更新：** 我输入了一些数据，将一些文本框留空，但确保所有组合框都在其中选择了值，然后按下更新按钮我遇到了同样的问题，**但**我重新将当前选项卡更改为任何其他选项卡（从其他四个），然后切换回上一个选项卡，我按下按钮，**它工作了！！？？**就好像表单不会**提交**用户输入的值，直到焦点发生变化或者它很疯狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:24:49.240

您只是在捕获 SqlException。
您还需要捕获一般异常。

```
Catch sqlExc As SqlException
    MessageBox.Show(sqlExc.ToString, "SQL Exception Error!", _
        MessageBoxButtons.OK, MessageBoxIcon.Error)
Catch exc As Exception
  MessageBox.Show(exc.ToString, "General Exception Error!", _
        MessageBoxButtons.OK, MessageBoxIcon.Error) 
```

不知道为什么你会得到一个空异常。
但它没有被捕获，因为它不是 SqlException。
在那根弦上把它分解，看看它在哪里断裂。
从表面上看，它看起来应该可以工作。
我怀疑其中一个控件返回 null 而不是 string.empty。******

# ios - 如何为签名绘制平滑的 UIBezierPath？

> ID：13531536
> 
> 赞同：1
> 
> 时间：2012-11-23T15:00:01.253
> 
> 标签：ios, uibezierpath

目前我已经实现了一个`SignatureViewController`使用 a `PanGestureRecognizer`、一个 BezierPath 和方法`moveToPoint:`和`addLineToPoint:`，因为它可以在网上找到一千次。但是曲线绘制不平滑，这对签名来说是个问题。

谁能给我一个 ObjC 示例，展示如何计算该方法的控制点

```
- (void)addCurveToPoint:(CGPoint)endPoint controlPoint1:(CGPoint)controlPoint1 controlPoint2:(CGPoint)controlPoint2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:38:56.753

`UIBezierPath`通过使用这个属性`miterLimit`，我们可以平滑曲线。

通过以下链接，这与您的要求相似。 [UIBezierPath 未绘制平滑曲线](https://stackoverflow.com/questions/10896557/uibezierpath-not-drawing-a-smooth-curve)

希望对你有帮助。

# jsf - 获取数据后访问并刷新dataTable

> ID：13531537
> 
> 赞同：1
> 
> 时间：2012-11-23T15:00:09.667
> 
> 标签：jsf, primefaces, java-ee-6

我的 JSF 页面和（可能）支持 bean 有一些问题。我有自己的模板，我用一些页面填充内容区域。我有带有命令按钮的搜索页面，我想从数据库（JPA）中获取数据，然后填充数据表。看看我的 searchpeople.xhtml：

```
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="template.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="content">
        <h:form id="sampleform">  
            <p:accordionPanel activeIndex="-1" id="accordingpanle">  
                <p:tab title="User options" >   
                    <p:growl id="growl" showDetail="true" showSummary="true"/> 
                    <p:commandButton id="searchbutton" action="#{mb_person.search}" value="Szukaj" update="personsearchresulttable" />
                </p:tab>
            </p:accordionPanel>

            <p:dataTable id="personsearchresulttable" var="person" value="#{mb_person.people}" widgetVar="personTable" style="margin-top: 10px" >  
                <p:column headerText="Id" style="width:10%">
                    <h:outputText value="#{person.id}" />  
                </p:column>
                <p:column headerText="Name" style="width:20%">  
                    <h:outputText value="#{person.name}" />  
                </p:column>  
                <p:column headerText="Surname" style="width:20%">  
                    <h:outputText value="#{person.surname}" />  
                </p:column>  
                <p:column headerText="Company">  
                    <h:outputText value="#{person.companyName}" />  
                </p:column> 
                <p:column style="width:4%" headerText="Open">  
                    <h:link outcome="persondetails" value="Open">
                        <!--<f:param name="personid" value="#{person.id}"/>-->
                        <f:param name="personid" value="10076"/>
                    </h:link>
                </p:column>  
            </p:dataTable>  
        </h:form>  
    </ui:define>
</ui:composition> 
```

还有我的 EJB 注入的 backingbean。

```
@ManagedBean(name="mb_person")
public class MB_Person implements Serializable{

    @EJB
    private PersonFacade personFacade;
    private List<PersonAndCompany> people = new ArrayList<PersonAndCompany>();

    public MB_Person() {
    }

    public List<PersonAndCompany> getPeople() {
        return people;
    }

    public void setPeople(List<PersonAndCompany> people) {
        this.people = people;
    }

    public void search() {
        int[] range = {0,5};
        setPeople(personFacade.findPersonWithMoreThanXProjects(20));
        setPeople(personFacade.findPersonAndCompanyName(range));

        for(PersonAndCompany p:people){
            System.out.println(p.getName());
        }
    }
    public String goToPersonDatailPage(int id){
        return "persondetails.jsf?personid="+id;
    }
} 
```

我尝试了小测试并打印出方法搜索中的所有数据，我收到了很好的结果。有人可以帮助我如何使用 ajax 更新 dataTable？在这种形式中，我遇到了一个异常 **，无法找到从“sampleform:accordingpanle:searchbutton”引用的标识符为“personsearchresulttable”的组件。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:13:38.547

[`NamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)相对于父组件搜索相对客户端 ID 。[`<p:accordionPanel>`](http://www.primefaces.org/docs/api/3.4/org/primefaces/component/accordionpanel/AccordionPanel.html)本身就是`NamingContainer`一个. 因此，相对客户端 ID`personsearchresulttable`将在`<p:accordionPanel>`. 但是，它实际上在面板之外，在`<h:form>`.

您需要将相对客户端 ID 更改为绝对客户端 ID。

```
update=":sampleform:personsearchresulttable" 
```

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)

# php - Mysql中的分组/连接列

> ID：13531539
> 
> 赞同：0
> 
> 时间：2012-11-23T15:00:18.373
> 
> 标签：php, mysql, sql

**更新**

我自己解决了这个问题：http: [//dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_concat-ws](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_concat-ws)

如果有人需要做同样的事情并登陆这里，我更新了下面的代码。

我有一个小型 MySQL 数据库，我在其中搜索用户

```
SELECT *, kunde.id as kundeid
FROM kunde
INNER JOIN $bartype ON ($bartype.brugerid = kunde.id)
WHERE  $bartype.barid ='$barid[Barid]' AND
    (email LIKE '%$keyword%') OR
    (fornavn LIKE '%$keyword%') OR
    (efternavn LIKE '%$keyword%') OR
    (CONCAT_WS(' ', fornavn, efternavn) LIKE '%$keyword%')
LIMIT 0, 50; 
```

现在我的搜索功能有效，但仅适用于任何一个`'%$keyword%' LIKE fornavn or '%$keyword%' LIKE efternavn or '%$keyword%' LIKE email`。

所以我想对 LIKE 结果进行分组，以便在一个字符串中搜索“fornavn efternavn”时，它仍然会显示来自同一行的这两列的结果。

这有意义吗？是否可以修改我的 SQL 语句来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:42:53.793

为了做你想做的事，你可能想尝试一个`UNION`声明。union 语句将从一个查询中获取结果并将其添加到另一个查询的结果中，同时保留顺序（在我的示例中，具有电子邮件的结果将首先出现，然后是 fornavn，然后是 efternavn）。这样做也将消除您`AND/OR`可能阻止搜索结果出现的逻辑。

```
SELECT *, kunde.id as kundeid
FROM kunde
INNER JOIN $bartype ON ($bartype.brugerid = kunde.id)
WHERE  $bartype.barid ='$barid[Barid]' AND
    email LIKE '%$keyword%'
UNION ALL
SELECT *, kunde.id as kundeid
FROM kunde
INNER JOIN $bartype ON ($bartype.brugerid = kunde.id)
WHERE  $bartype.barid ='$barid[Barid]' AND
    fornavn LIKE '%$keyword%'
UNION ALL
SELECT *, kunde.id as kundeid
FROM kunde
INNER JOIN $bartype ON ($bartype.brugerid = kunde.id)
WHERE  $bartype.barid ='$barid[Barid]' AND
    efternavn LIKE '%$keyword%' 
```

另一方面，像这样的动态 SQL 对于 SQL 注入来说已经成熟了。我可以建议你看看[PHP PDO](http://php.net/manual/en/book.pdo.php)

**更新**

在您发表评论后，这里有一个更新的查询，它可能能够同时为您执行两个搜索：

```
SELECT *, kunde.id as kundeid
FROM kunde
INNER JOIN $bartype ON ($bartype.brugerid = kunde.id)
WHERE  $bartype.barid ='$barid[Barid]' AND
    email LIKE '%$keyword%'
UNION ALL
SELECT *, kunde.id as kundeid
FROM kunde
INNER JOIN $bartype ON ($bartype.brugerid = kunde.id)
WHERE  $bartype.barid ='$barid[Barid]' AND
    fornavn + ' ' + efternavn LIKE '%$keyword%' 
```

# ruby - 是否可以在 site_prism 中加载 html 文件？

> ID：13531540
> 
> 赞同：1
> 
> 时间：2012-11-23T15:00:18.233
> 
> 标签：ruby, site-prism

我需要加载一个 html 作为 SitePrism 对象。这可能吗？根据我在文档中看到的，您只能使用某些 url 进行导航。我是否需要将 html 存储在我的应用程序的相对路径中，然后使用 site_prism 加载该 url？还是你们看到其他更清洁的方法来做到这一点？

谢谢！罗德里戈·J·马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:04:15.307

如果你的意思是传递一个包含页面 HTML 的字符串，不，你不能。如果您的意思是访问包含 html 的本地文件，是的，您可以，如下所示：

```
class Home < SitePrism::Page
  set_url "file:///Users/bob/Desktop/html/home.htm"
end 
```

# jquery - 从 ajax 加载的内容元素的事件中关闭 jQueryUI 对话框

> ID：13531541
> 
> 赞同：1
> 
> 时间：2012-11-23T15:00:19.893
> 
> 标签：jquery, jquery-ui

我使用 .load() 传递 url 加载内容。在返回并成功加载到 jq ui 对话框中的内容内部，是带有 id cancel123 的简单链接。我只是想通过单击链接关闭此 jqueryUiDialog w ID testDialog。我无法弄清楚我错过了什么，并尝试以 48 种不同的方式来做到这一点。请帮忙

```
 function InitializeDialog($element, title, url) {

            $element.dialog({
                autoOpen: false,
                width: 500,
                resizable: true,
                draggable: true,
                title: title,
                model: true,
                show: 'slide',
                closeText: 'x',
                //dialogClass: 'alert',
                closeOnEscape: true,
                modal: true,
                open: function (event, ui) {
                    //Load the Partial View Here using Controller and Action
                    $element.load(url);
                    $("#cancel123").bind('click', function (event) {
                        $('#testDialog').dialog('close');
                        alert('close this');
                    });

                },

                close: function () {
                    $(this).dialog('close');
                }
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:04:15.633

您可以像这样将其绑定到文档：

```
$(document).on("click", "#cancel123", function(event) {
    $('#testDialog').dialog('close');
    alert('close this');
}); 
```

另一种方式（我认为它更好）：

```
$element.load(url, function() {
    $("#cancel123").bind('click', function (event) {
        $('#testDialog').dialog('close');
        alert('close this');
    });
}); 
```

# stored-procedures - 在计算平均值时处理 NULL 值

> ID：13531546
> 
> 赞同：0
> 
> 时间：2012-11-23T15:00:35.373
> 
> 标签：stored-procedures, null, sql-server-2008-r2, average

我有一个存储过程，它根据参数计算几个值的平均值。

这是代码片段：

```
WHILE @@FETCH_STATUS = 0  
BEGIN               
    SELECT 
       @valFound = AVG(FilterSurface) 
    FROM 
       [tblVAR_FilterSurface] 
    WHERE 
       refDate >= DATEADD(DAY, -30, @refDate) 
       AND refDate <= DATEADD(DAY, 0, @refDate) 
       AND patientId = @patientId

    INSERT INTO __TEMP(PatientId, RefDate, ModifyDate, FilterSurface) 
    VALUES(@patientId, @refDate, @modifyDate, @valFound);   

    SET @valFound = NULL

    FETCH NEXT FROM db_cursor INTO @patientId, @refDate, @modifyDate   
END 
```

有时，当系统尝试计算 NULL 值的平均值并将结果分配给`@valFound`变量时，此存储过程会失败。我认为问题在于将结果分配给这些变量。

如何修改我的存储过程以正确处理空值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:38:50.323

将选择更改为 @valFound = avg(isnull(FilterSurface, 0)) 或将 where 子句更改为包含且 FilterSurface 不为空，具体取决于您是否要将空值计为零或排除它们

# android - Android：列出所有录制的文件

> ID：13531547
> 
> 赞同：0
> 
> 时间：2012-11-23T15:00:39.367
> 
> 标签：android

我想获取使用默认录音机录制的所有声音的数组列表。这怎么可能？我正在使用以下代码从 sdcard 中获取所有声音，但它根本不包含具有 3ga 扩展名的录制声音。

```
String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";
String[] projection = {
  MediaStore.Audio.Media._ID,
  MediaStore.Audio.Media.ARTIST,
  MediaStore.Audio.Media.TITLE,
  MediaStore.Audio.Media.DATA,
  MediaStore.Audio.Media.DISPLAY_NAME,
  MediaStore.Audio.Media.DURATION
};
Cursor cursor = ((Activity) ctx).managedQuery(
  MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
  projection,
  selection,
  null,
  null
);
if(cursor != null) {
  while(cursor.moveToNext()){
    songs.add(new Song(cursor.getString(0), cursor.getString(4)));
  }
} 
```

# google-chrome-extension - 如何调试“图库系统错误，请稍后重试”？

> ID：13531548
> 
> 赞同：1
> 
> 时间：2012-11-23T15:00:50.147
> 
> 标签：google-chrome-extension

尝试将此文件上传：[https](https://github.com/ripper234/explainxkcd/blob/master/releases/0.2.zip) ://github.com/ripper234/explainxkcd/blob/master/releases/0.2.zip到商店，我不断收到此错误：

**图库系统错误，请稍后重试。**

同时，更新另一个扩展对我来说效果很好。

我已经发布到[Chromium Apps Google Group](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-apps/gsgFZPuSt7s)了。在此期间我还可以尝试调试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:56:42.330

我遇到了同样的问题，但我找到了解决方案。

这都是关于压缩方法的。

您应该选择压缩方法为“存储”。

我试过你的文件，是的，它有效，它已成功上传。

这就是我对 Winrar 的意思，

![在此处输入图像描述](../Images/d46e6e367258d7600b26def7147be074.png)

# javascript - 只有一个连接不会丢失消息

> ID：13531552
> 
> 赞同：0
> 
> 时间：2012-11-23T15:01:12.427
> 
> 标签：javascript, python, google-app-engine, sendmessage, channel

我有一个带有基本控制器、基本 html 和基本 javascript 文件的应用程序。在这三个中创建一个具有唯一客户端 ID (create_channel) 的令牌，然后我将令牌传递给模板并在 javascript 文件中创建连接。

然后我向这个连接发送一条消息。如果我留在同一页面，它运行良好并且我看到了消息，但是如果我转到其他页面，base.js 将再次加载并启动新连接，所以我永远看不到我从服务器发送的消息。

知道如何解决这个问题吗？我只想创建一个连接，但基础文件加载更多次......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:07:15.710

每个“用户”都必须有一个 ID。我使用会话 ID。然后，仅当它尚不存在时，您才针对它创建令牌。

```
channel_token = self.session.get('channel_token')
    if channel_token is None: # if the session user does not have a channel token
        user_id = str(uuid.uuid4()).replace("-",'')
        channel_token = channel.create_channel(user_id)
        self.session['channel_token'] = channel_token
        self.session['user_id'] = user_id 
```

因此，当您转到其他页面时，如果该 user_Id 已经有可用的频道，则不会创建新频道。当用户导航离开时，您每次都会断开/连接。无论他们在哪个页面上，您都可以使用`user_id`发送消息。

# php - PHP var_dump 和循环给出不同的结果

> ID：13531554
> 
> 赞同：0
> 
> 时间：2012-11-23T15:01:15.017
> 
> 标签：php, foreach, var-dump

我有以下代码：

```
var_dump($cursor);
foreach($cursor as $obj) {
    echo "<div class='item' id='" . $obj['_id'] . "'>";
        echo "<span class='listnick'>" . $obj['nick'] . "</span>";
    echo "</div>";
} 
```

var_dump 的结果如下：

```
array(2) {
  [0]=>
  &array(9) {
    ["_id"]=>
    object(MongoId)#9 (1) {
      ["$id"]=>
      string(24) "50af8dcd9cc231534400000c"
    }

    ["nick"]=>
    string(6) "safari"

  }
  [1]=>
  array(9) {
    ["_id"]=>
    object(MongoId)#8 (1) {
      ["$id"]=>
      string(24) "50af8dca9cc2315644000009"
    }
    ["nick"]=>
    string(6) "chrome"
  }
} 
```

所以很明显foreach应该打印出“safari”和“chrome”，但问题真的很奇怪：

有时它会返回两次“safari”并省略“chrome”，反之亦然。我尝试将 var_dump 和 foreach 循环放在附近，以确保它们是相同的，并且两个命令之间的对象没有变化，但我真的不知道发生了什么。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:21:50.823

请注意 safari 是如何引用数组的：&array。

这可能是因为有一个 $obj 是引用的 foreach：

```
foreach($cursor as &$obj) {
   ..
}
//unset($obj); 
```

在 PHP 中，$obj 的作用域不会随着循环的执行而结束，因此每当您使用引用进行循环时，您都应该取消设置。

这也可能是由于在某处使用了引用分配：

```
$cursor[] =& $safari; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:27:33.297

这是 2 个不同的代码......一个是使用`&`参考，它会修改数组输出，另一个不是

```
array(2) {
  [0]=>
  &array(9) {
  ^----------------------------- Reference sign 
    ["_id"]=>
    object(MongoId)#9 (1) {
      ["$id"]=>
      string(24) "50af8dcd9cc231534400000c"
    }

    ["nick"]=>
    string(6) "safari"

  } 
```

发生的事情的典型例子

```
$a = $b = array(array("_id" => new MongoId(),"nick" => "chrome"));

foreach ( $a as $k => &$v )
    $k == "nick" and $v['nick'] = "Safari";

foreach ( $b as $k => $v )
    $k == "nick" and $v['nick'] = "Safari";

var_dump($a);
var_dump($b); 
```

输出

```
array (size=1)
  0 => 
    &array (size=2)
      '_id' => 
        object(MongoId)[1]
          public '$id' => string '50af93a2a5d4ff5015000011' (length=24)
      'nick' => string 'Safari' (length=6) <------ changed

array (size=1)
  0 => 
    array (size=2)
      '_id' => 
        object(MongoId)[2]
          public '$id' => string '50af93a2a5d4ff5015000012' (length=24)
      'nick' => string 'chrome' (length=6) <------- not changed 
```

如果修改了尼克而不是两个，你能看到那个吗

# perl - 为什么我得到：未定义的子例程

> ID：13531558
> 
> 赞同：2
> 
> 时间：2012-11-23T15:01:28.900
> 
> 标签：perl, mod-perl

我正在尝试将现有的 perl 文件移动到新服务器，但出现错误（error_log 文件）。它在旧服务器上工作。

当我访问：[http://2x.29.xx.xx/admin/web.pl](http://2x.29.xx.xx/admin/web.pl)

我收到一个错误：

> [错误] 在 /var/www/path/web.pl 第 40 行调用了未定义的子例程 &web_main::main。

**web.pl**文件，它看起来像这样：

```
#!/usr/bin/perl -w

use strict;
use warnings;

use lib '/var/www/web';

our $var = '/var/www/web';
our $var1; 
our $var2; 
use web_main qw($var $var1 $var2);

web_main::main();  # Line 40 
```

**web_main.pm**文件（在 /var/www/web 中），看起来像这样：

```
#!/usr/bin/perl -w

package web_main;

use strict;
use warnings;

sub main
{

  # Lots of code here... removed for brevity
} 
```

不知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:35:22.613

我不是 Perl 方面的专家，但也许您需要导出主子例程？您可以使用[导出器](http://perldoc.perl.org/Exporter.html)。

# reporting-services - 如何在 SRSS 2008 中显示具有 2 列值的表中的饼图

> ID：13531567
> 
> 赞同：1
> 
> 时间：2012-11-23T15:02:04.483
> 
> 标签：reporting-services, ssrs-2008, ssrs-tablix

首先，对不起标题，但我想不出更好的标题。

这就是我想做的。

我在 SRSS 2008 中有一个 Tablix。这些行是员工。在其中我有 2 列：

*   谈话时间
*   保持时间

其中是整数，值以秒为单位。

我想在 Tablix 中添加一个带有饼图的列（是的，很少），以便以图形方式显示 TalkTime 与 HoldTime 的比例。我不想要任何标题、图例等，而只是一个快速的视觉效果：如果通话时间是 750 秒，保持时间是 250 秒，它应该在饼图中显示 3 个四分之一和 1 个四分之一，蓝色和红色，说。你明白了。

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:59:38.040

这可以完成，但不能在详细信息行中完成。如果要将图表添加到详细信息行，请向详细信息行添加一些分组（以使报表仍然像以前一样工作）。

您可以将图表添加到表格中的单元格，删除磁贴和分类帐，将通话时间和保持时间添加到图表数据中的值。

# java - 如何将值从一个类对象保存到另一个类对象

> ID：13531569
> 
> 赞同：1
> 
> 时间：2012-11-23T15:02:19.827
> 
> 标签：java, hibernate, struts2

我有两个类（Pojos）名称`Soldbookdetails.java`，`Bookdetails.java`我想做的是，我必须从 Bookdetails 表（`Soldbookdetails.java`）中获取数据并将相同的数据保存到我的 Soldbookdetails 表（`Soldbookdetails.java`）中。

**动作类.java**

```
private Double[] id;//With getter and setter
private Double[] quantity;  //With getter and setter
Bookdetails book=new Bookdetails();//pojos,//With getter and setter
Soldbookdetails sbook=new Soldbookdetails();//pojos,//With getter and setter 
BookdetailsDAO dao=new BookdetailsDAO(); 
SoldBooksTransactionDAO dao2=new SoldBooksTransactionDAO(); 
------------ 
```

（注意：*我的两个 pojo 都是一样的，只是他们的类名不同*）

**我的问题**：我无法将记录保存`Bookdetails.java`到`Soldbookdetails.java`。（参见我上面的`ActionClass.java`类，在执行方法中，我提到了错误）。

通过 Bookid 获得记录后，我无法将记录保存到我的`Soldbookdetails.java`.

请帮我解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:29:25.950

您的`saveSoldbooks(Soldbookdetails s)`方法将对象`Soldbookdetails`作为参数，但您传递的是 class 对象`Bookdetails`。

您可以做的事情是您可以添加一个将`Bookdetails`对象的属性复制到`Soldbookdetails`对象的方法（没有 id 字段）。然后您应该尝试保存`Soldbookdetails`使用现有方法的对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T15:26:56.327

虽然将已售书籍和书籍放在分开的表格中是（IMO）良好的性能问题，但我认为您不需要为它们创建单独的 IDENTICAL 类。考虑将您的类 BookDetails 设为抽象并将其注释为[MappedSuperclass](http://docs.oracle.com/javaee/5/api/javax/persistence/MappedSuperclass.html)：

```
@MappedSuperclass
public abstract class BookDetails{
    // fields
    // getters
    // setters
}

@Entity
@Table(name="SoldBooks")
public class SoldBookDetails extends BookDetails{
    // Currently blank
}

@Entity
@Table(name="BookDetails")
public class TradingBookDetails extends BookDetails{
    // Currently blank
} 
```

虽然目前您的课程是相同的，但将来您可能会决定创建其他书籍类型（例如用于购买书籍以存储或向客户提供书籍的其他表格和课程），当然，SoldBooks 可能会出现不同的逻辑和其他人，在这种情况下，这种“抽象”将简化维护。

我目前看到的对您的 saveSoldBook 的唯一更改是更改它的参数类型或在方法的主体中提供类型检查，只要参数类型是 BookDetails，您就可以在函数中传递从它派生的任何变量 -因此，TraidingBookDetails、SoldBookDetails 等（所需的更改取决于您在此方法中的逻辑和 DAO 本身）。

# javascript - 如何在 chrome 扩展中获取 scrollMaxX 和 scrollMaxY

> ID：13531570
> 
> 赞同：-2
> 
> 时间：2012-11-23T15:02:24.377
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-devtools

我正在编写一个扩展来获取页面的 scrollMaxX 和 scrollMaxY 值，但根据 w3schools.com 上的文档，chrome 浏览器似乎不支持此属性。它在 Firefox 中为我工作。请建议我如何为 chrome 浏览器获取这些值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-02-01T17:43:09.297

> `document.body.scrollHeight`描述为 - Element.scrollHeight 只读属性是元素内容高度的度量，包括由于溢出而在屏幕上不可见的内容。
> 
> scrollHeight 值等于元素需要的最小高度，以便在不使用垂直滚动条的情况下适应视口中的所有内容。

您可以去掉视口的内部高度：

> `document.body.scrollHeight`浏览器窗口视口的高度（以像素为单位），包括水平滚动条（如果已渲染）。

所以你的答案是

```
document.body.scrollHeight - window.innerHeight 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-08-08T13:24:32.570

这在 IE、Chrome 和 Firefox 中对我有用：

```
function getScrollMaxY(){
    return ( 'scrollMaxY' in window ) ? window.scrollMaxY : (document.documentElement.scrollHeight - document.documentElement.clientHeight);
} 
```

# arrays - 在 MATLAB 中替换 3D 矩阵的元素

> ID：13531573
> 
> 赞同：2
> 
> 时间：2012-11-23T15:02:30.740
> 
> 标签：arrays, matlab, 3d, matrix, replace

我有一个由 3 个矩阵 500x500 元素组成的 3D 矩阵。现在，我想取第三个矩阵并用 0 替换它的所有值，比方说，大于 100。如果我有一个矩阵 a，我的代码就是：

```
a(a>100)=0 
```

但是，就我而言，我需要采用 3D 矩阵的第三个矩阵，即 a(:,:,3)。如果我现在尝试使用相同的代码：

```
a(:,:,3)(a(:,:,3)>100)=0 
```

我收到消息“()-索引必须出现在索引表达式的最后。”

关于我如何表达的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T15:15:10.357

关于什么

```
 a(:,:,3) = (a(:,:,3)<100).*a(:,:,3); 
```

?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T15:18:28.987

您可以为此使用线性索引：

```
id = find(A(:,:,3)>100)+2*size(A, 1)*size(A, 2);
A(id)=0 
```

或者，您可以`reshape`排列`A`为 2D 并且：

```
AA = reshape(A, 500*500, 3);
AA(AA(:,3)>100,3) = 0;
A = reshape(AA, 500, 500,3); 
```

它使用 Acorbe 的原始代码，但适用于 2D 矩阵而不是 3D :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T15:32:27.240

只是添加另一种选择：

```
A(cat(3, false(size(A,1),size(A,2),2), A(:,:,3)>100)) = 0; 
```

或者，您可以像这样在 3D 中分配索引变量：

```
id(:,:,3) = A(:,:,3)>100;
A(id) = 0; 
```

它具有更简洁的语法。

现在进行一些速度测试：

```
clc, clear all

b = 250*rand(500,500, 3);

% Me 1
tic
for ii = 1:1e2
    A=b;
    clear id
    id = cat(3, false(size(A,1),size(A,2),2), A(:,:,3)>100);
    A(id) = 0;
end
toc

% Acorbe
tic
for ii = 1:1e2
    A=b;
    A(:,:,3) = (A(:,:,3)<100).*A(:,:,3);
end
toc

% angainor 1
tic
for ii = 1:1e2
    A=b;
    clear id
    id = find(A(:,:,3)>100) + 2*size(A, 1)*size(A, 2);
    A(id)=0;
end
toc

% Me 2
tic
for ii = 1:1e2
    A=b;
    clear id
    id(:,:,3) = A(:,:,3)>100;
    A(id) = 0;
end
toc

% angainor 2
tic
for ii = 1:1e2
    A=b;
    clear id
    AA = reshape(A, [], 3);
    AA(AA(:,3)>100,3) = 0;
    A = reshape(AA, size(A,1), size(A,2), 3);
end
toc 
```

结果：

```
Elapsed time is 1.612787 seconds. % me #1
Elapsed time is 1.223496 seconds. % Acorbe
Elapsed time is 1.606858 seconds. % angainor #1
Elapsed time is 1.510153 seconds. % me #2
Elapsed time is 0.964423 seconds. % angainor #2 
```

似乎赢家是angaior :)

# oracle - Oracle：将带有 blob 的表导出到可以再次导入的 .sql 文件

> ID：13531576
> 
> 赞同：14
> 
> 时间：2012-11-23T15:03:00.630
> 
> 标签：oracle, export, blob, oracle-sqldeveloper

我有一个包含两个字段的“图像”表：

*   名称 VARCHAR2
*   数据块

我想将该表导出到可以在另一个系统上导入的 .sql 文件。我尝试使用 Oracle SQL Developer 的“数据库卸载”助手来执行此操作。但是，生成的文件中确实只有名称的内容，但没有数据。因此，在导入之后，我最终会得到所有名称，但数据字段到处都是空的。

我真的更喜欢它只是一个文件（我看到了一些例子，包括将数据转储到 fs 上每个字段的一个文件......）

是否可以使用 SQL Developer 生成这样的脚本？还是有其他方法/工具可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T15:53:41.103

我认为 SQL Developer 不可能做到这一点（但我不经常使用它）。

我正在使用的 SQL 客户端 - [SQL Workbench/J](http://www.sql-workbench.eu) - 可以做到这一点。

有几种方法可以导出这些数据。

### 生成专有脚本

它可以创建一个 SQL 脚本，该脚本使用特殊的（特定于工具的）表示法来引用外部文件，例如：

```
INSERT INTO images
  (name, data)
VALUES
  ('foobar', {$blobfile='blob_r1_c2.data'}); 
```

上述语句只能用 SQL Workbench 再次执行。它与任何其他 SQL 客户端都不兼容。

### 使用 utl_raw

另一种选择是使用“blob 文字”，但由于 Oracle 对字符文字的 4000 字节的限制，这仅适用于***非常***小的 blob 值：

```
INSERT INTO images
  (name, data)
VALUES
  ('foobar', to_blob(utl_raw.cast_to_raw('......'))); 
```

其中`cast_to_raw`调用的字符文字将包含 BLOB 的十六进制值。由于每个“blob 字节”需要 2 个字符，因此您不能用它来处理大于 2000 字节的 BLOB。但该语法几乎适用于所有 Oracle SQL 工具（如果它们可以处理行很长的脚本）。

### SQL*Loader 输入文件

第三种选择是将数据导出到可以使用 SQL*Loader 导入的文本文件中：

文本文件将包含如下内容：

```
名称数据
foob​​ar blob_r1_c2.data

```

连同以下 SQL*Loader 控制文件：

```
选项（跳过=1）
加载数据字符集 'WE8ISO8859P15'
INFILE 'images.txt'
附加
进入表格图像
由 '\t' 尾随 NULLCOLS 终止的字段
(
  姓名，
  lob_file_data 填充器，
  数据 LOBFILE(lob_file_data) 由 EOF 终止
)

```

这可以使用 SQL*Loader 加载，因此不需要 SQL Workbench 来导入数据。

更多细节在[手册中](http://www.sql-workbench.eu/manual/command-export.html)

**编辑**

正如 Alex 在他的评论中指出的那样，您也可以使用 DataPump 导出 - 但这需要您有权访问服务器上的文件系统。以上方案都是将数据存储在客户端。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-04T14:05:01.383

如果您绝对需要使用单个 .sql 文件来导入 BLOB，您可以使用 PL/SQL 生成脚本：

```
set serveroutput on
declare
  lob_in blob;
  i integer := 0;
  lob_size integer;
  buffer_size integer := 1000;
  buffer raw(32767);
begin
  select
    data, dbms_lob.getlength(data)
    into lob_in, lob_size
  from images
  where name = 'example.png';

  for i in 0 .. (lob_size / buffer_size) loop
    buffer := dbms_lob.substr(lob_in, buffer_size, i * buffer_size + 1);
    dbms_output.put('dbms_lob.append(lob_out, hextoraw(''');
    dbms_output.put(rawtohex(buffer));
    dbms_output.put_line('''));');
  end loop;
end; 
```

它的输出将是 BLOB 的内容，编码如下：

```
dbms_lob.append(lob_out, hextoraw('FFD8FFE0...0000'));
dbms_lob.append(lob_out, hextoraw('00000000...0000'));
...
dbms_lob.append(lob_out, hextoraw('007FFFD9')); 
```

您可以使用 PL/SQL 将其加载到已插入的行中：

```
declare
  lob_out blob;
begin
  select data into lob_out
  from images
  where name = 'example.png'
  for update;

  dbms_lob.append(lob_out, hextoraw('FFD8FFE0...0000'));
  dbms_lob.append(lob_out, hextoraw('00000000...0000'));
  ...
  dbms_lob.append(lob_out, hextoraw('007FFFD9'));
end; 
```

请记住，生成的 .sql 文件会很大。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T15:14:10.023

谢谢你的回答。我使用了第三种选择。首先我下载了​​ SQL Workbench/J。然后我使用以下命令进行导出：

```
WbExport -type=text -file='c:\temp\Images' delimiter='|' -decimal=',' -sourcetable=Images -formatfile=oracle; 
```

这产生了一个 Images.txt 文件和许多 Images_r*_c2.data 文件和一个 Images.ctl 文件。

然后我可以使用以下命令导入：

```
sqlldr myuser@myhost/mypassword control=Images.ctl 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-06T17:47:41.330

这在 SQL 开发人员中绝对是可能的。

*   首先，您需要在源位置选择适当的表导出表。

> 工具 > 数据库导出

*   选择输出格式`loader` 而不是插入，我们通常使用的excel。

遵循这些步骤将创建`sqlldr`控制文件和数据文件，`create table`如果您选择该选项，还可以创建 ddl。您可以使用它们`sqlldr`在目标中导入（）数据。

这是一个更好的解决方案，并且在提取和分发方面是可移植的。它提供了交付组件以通过代码存储库部署的灵活性。

这是一个逐步解释它的链接。

[使用 Oracle SQL Developer 导出多个 BLOB](https://www.thatjeffsmith.com/archive/2014/05/exporting-multiple-blobs-with-oracle-sql-developer/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-06T11:28:52.600

除了 .sql 之外，SQL 工作台还为 blob 数据使用了一种特殊的文件格式。如果你能接受这样的文件，一个更简单的解决方案是使用 Oracle 的[Original import and export](https://docs.oracle.com/cd/B28359_01/server.111/b28319/exp_imp.htm#g1070082)。（它已被弃用，但与 Oracle 的 DataPump 不同，它不需要服务器上的访问权限。）

这是关于导出部分的一个很好的[教程](http://www.thegeekstuff.com/2016/02/oracle-exp-examples/)。

# android - 如何将具有所有相关资源的单个活动从一个项目导出到另一个项目？

> ID：13531579
> 
> 赞同：1
> 
> 时间：2012-11-23T15:03:16.063
> 
> 标签：android, layout, android-activity, resources, drawable

我有一个带有要导出的 Activity 的 Android 应用程序项目。不幸的是，所有资源（可绘制、布局、字符串、样式）都与其他项目的资源合并。

如何将我需要的 Activity 与所有依赖资源一起取出到另一个项目中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:26:44.487

您将需要手动执行此操作。在 Eclipse（或任何其他支持 Android 的 IDE、AFAIK）中没有“导出”活动及其资源的选项。在 Eclipse 中，活动及其资源只是一篮子文件；Eclipse 不知道它们有特定的关系。

# r - Roxygen 文档

> ID：13531581
> 
> 赞同：0
> 
> 时间：2012-11-23T15:03:29.910
> 
> 标签：r, roxygen

> **可能重复：**
> [S3 方法的 R-oxygen 文档在检查时产生错误](https://stackoverflow.com/questions/13530009/r-oxygen-documentation-of-s3-method-produces-error-while-check)

我的问题[S3 方法的 R-oxygen 文档会产生错误，而检查](https://stackoverflow.com/questions/13530009/r-oxygen-documentation-of-s3-method-produces-error-while-check?lq=1)已被关闭，因为它是其他的“完全重复”......很好。但是我在发布我的问题之前当然检查了这些问题，但我没有找到答案！至于这里的人，一定要先关闭一个话题！

当我不使用标签@method 时，我会在检查期间收到警告（上一篇文章）。

如果我使用@method，我会在检查过程中遇到错误（见下文）。

```
* checking whether package ‘embryogrowth’ can be installed ... ERROR
Installation failed.
See ‘/Users/marcgirondot/Documents/Espace de travail
R/EGR/embryogrowth/embryogrowth.Rcheck/00install.out’ for details.

> system("cat '/Users/marcgirondot/Documents/Espace de travail 
 R/EGR/embryogrowth/embryogrowth.Rcheck/00install.out'")

* installing *source* package ‘embryogrowth’ ...
** R
** data
**  moving datasets to lazyload DB
Error : object 'as.mcmc' not found whilst loading namespace 'embryogrowth'
ERROR: lazydata failed for package ‘embryogrowth’
* removing ‘/Users/marcgirondot/Documents/Espace de travail
R/EGR/embryogrowth/embryogrowth.Rcheck/embryogrowth’ 
```

马克·吉伦多

我尝试基于包尾中定义的 as.mcmc 创建一个方法 as.mcmc.mcmcComposite。这是代码：

```
#' as.mcmc Extract mcmc object from a result to be used with coda package
#' @title Extract mcmc object from a result to be used with coda package
#' @author Marc Girondot
#' @return A mcmc.list object
#' @param x A result object
#' @description Take a mcmcComposite object and create a mcmc.list object
#' @examples
#' # Try
#' @method as.mcmc mcmcComposite
#' @export

as.mcmc.mcmcComposite <-
function(x) {
    return(x$resultMCMC)
} 
```

# c++ - 提升属性树获取第一个元素

> ID：13531582
> 
> 赞同：0
> 
> 时间：2012-11-23T15:03:32.063
> 
> 标签：c++, boost, boost-propertytree

我想知道是否有一些方便的方法可以使用路径方法访问列表的已知索引。

我的梦想方法

```
float v = pt.get<float>("root.list[0]); 
```

当前已知方法（或类似方法）

```
 ptree::value_type listElement;
 BOOST_FOREACH(listElement,tree.get_child("root.list")){
                return listElement.second.get<float>();
            } 
```

列表格式（json）

```
{
root:{
 list:[1,2,3,4,5]
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:56:11.573

您应该能够使用 访问列表中的元素范围`boost::property_tree::equal_range`。对于您使用的 JSON 格式，列表中的每个项目都没有关联的名称元素。这意味着在访问范围内的子元素之前，必须先获取父节点。

下面的代码是一个粗略的示例，您可以修改：

输入 Json 文件（in.json）：

```
{
    "root" :
    {
        "list" : [1,2,3,4,5]
    }
} 
```

打印列表的第 n 个元素的函数：

```
void display_list_elem( const ptree& pt, unsigned idx )
{
    // note: the node elements have no name value, ergo we cannot get
    // them directly, therefor we must access the parent node,
    // and then get the children separately

    // access the list node
    BOOST_AUTO( listNode,  pt.get_child("root.list") );

    // get the children, i.e. the list elements
    std::pair< ptree::const_assoc_iterator,
               ptree::const_assoc_iterator > bounds = listNode.equal_range( "" );

    std::cout << "Size of list : " << std::distance( bounds.first, bounds.second ) << "\n";
    if ( idx > std::distance( bounds.first, bounds.second ) )
    {
        std::cerr << "ERROR Index too big\n";
        return;
    }
    else
    {
        std::advance( bounds.first, idx );

        std::cout << "Value @ idx[" << idx << "] = " 
                  << bounds.first->second.get_value<std::string>() << "\n";
    }

    std::cout << "Displaying bounds....\n";
    display_ptree( bounds.first->second, 10 );
} 
```

# ruby - 使用 Nokogiri 添加格式化中断

> ID：13531585
> 
> 赞同：2
> 
> 时间：2012-11-23T15:03:59.847
> 
> 标签：ruby, nokogiri

我正在尝试将一些元素添加到已经存在的 XML 文档中。以下代码成功地添加了所需的节点和内容，但它不会格式化插入的元素。所有添加的元素都在一行中结束，而不是在每个元素之后都有换行符和缩进。

关于如何添加此格式的任何建议？

代码是：

```
doc.xpath("//tei:div[@xml:id='versionlog']", {"tei" => "http://www.tei-c.org/ns/1.0"}).each do |node|
  new_entry = Nokogiri::XML::Node.new "div", doc
  new_entry["xml:id"] = "v_#{ed_no}"
  head = Nokogiri::XML::Node.new "head", doc
  head.content = "Description of changes for #{ed_no}"
  new_entry.add_child(head)
  para = Nokogiri::XML::Node.new "p", doc
  para.content = "#{version_description}"
  new_entry.add_child(para)
  node.add_child(new_entry)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:52:28.133

为什么 XML 不在一行很重要？具有“漂亮打印”的 XML 纯粹是装饰性的，并且在重新加载 XML 时 XML 规范或解析器不需要。就个人而言，我建议您不要格式化您的传输速度和减少磁盘大小，但 YMMV。

您可以通过 XML 美化器运行 XML，或者与 Nokogiri 一起玩游戏：

```
new_entry.add_child(para.to_xml + "\n") 
```

换行符将作为标签之间的文本节点添加，但它是良性的，对于 XML 传递其有效负载的能力并不重要。

如果您坚持，“[我如何使用 Nokogiri 漂亮地打印 HTML？](https://stackoverflow.com/questions/1898829/how-do-i-pretty-print-html-with-nokogiri/7839017#7839017) ”描述了如何到达那里。

# php - PDO 成功，但什么也不返回？

> ID：13531588
> 
> 赞同：2
> 
> 时间：2012-11-23T15:04:11.250
> 
> 标签：php, pdo

好的，所以我正试图深入了解 PDO。到目前为止，我喜欢它！:) 但我只是遇到了一些事情，我不太明白。

所以考虑下面的代码。将跟踪回声放在代码中，在 catch 内没有回声。所以那里没有错误（或者我认为）。如果我在执行（）之后立即回显 $success，它会给我 TRUE。所以现在，尝试在 $success 的条件下进行跟踪，尝试打印 $userData 或直接 $userID 什么都不返回。但是放一个 hello world 的回声会打印出这个东西。

我下一步要调试什么？我假设如果我的 SQL 语句有任何问题，那也会被捕获并显示出来，所以我迷路了！

```
try 
  { 
     $dbh = DatabaseHelpers::getDatabaseConnection(); 

     $stmt = $dbh->prepare('SELECT UserId FROM Users WHERE ' 
             . 'Username=:Username ' 
             . 'AND Password=:hashedPassword ' 
             . 'LIMIT 1'); 

     $hashedPassword = DatabaseHelpers::passHash ($password); 

     $stmt->bindParam(':Username', $Usernname, PDO::PARAM_STR); 
     $stmt->bindParam(':hashedPassword', $hashedPassword, PDO::PARAM_STR); 

     $success = $stmt->execute(); 

     if ($success) 
     { 
        $userData = $stmt->fetch(); 
        $userID = $userData['UserId']; 
     } 

     $dbh = null; 
  } 
  catch (PDOException $e) 
  { 
     $e
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:06:04.930

我猜你这里有一个错字：`$Usernname`应该是`$Username`.

在这一行：

```
$stmt->bindParam(':Username', $Usernname, PDO::PARAM_STR); 
```

这可能就是它什么都不返回的原因——您要查找的用户名基本上是一个空字符串。

# objective-c - 使用按钮关闭弹出框并委托执行

> ID：13531595
> 
> 赞同：0
> 
> 时间：2012-11-23T15:04:25.923
> 
> 标签：objective-c, uipopovercontroller, uiapplicationdelegate

我写了一些代码来隐藏按下按钮的弹出窗口，但是......它不起作用（没有什么新东西）。我有一个主视图（我称之为 A），里面有一个按钮，按下按钮会显示一个弹出框（我称之为 B）。弹出框有另一个按钮，我想用它来关闭弹出框并在 A 中执行某些操作。换句话说，A 是我的主视图，按下按钮我显示弹出框 (B) 以执行登录（可以填写凭据在）。

按下登录按钮（弹出窗口中的那个）我调用一个服务来检查凭据，如果用户通过身份验证，我想关闭弹出窗口并更新我的主视图（A）。

下面是我的代码

Popover 头文件 (B)

```
#import <UIKit/UIKit.h>
@protocol MyPopoverDelegate <NSObject>
    - (void) didLoginButton;
@end

@interface login : UIViewController
@property (nonatomic, assign) id<MyPopoverDelegate> delegate;

- (IBAction) doLogin;

@end 
```

Popover 实现文件（B）

```
#import "login.h"
@implementation login
@synthesize delegate;

....
..

- (IBAction) doLogin {
   [self.delegate didLoginButton];
} 
```

该按钮与 doLogin 操作链接，并且工作正常（在弹出框内）。我里面有一些逻辑，它运作良好。

主视图头文件（一）

```
#import <UIKit/UIKit.h>
#import "login.h"

@interface ViewController : UIViewController <UIPopoverControllerDelegate, MyPopoverDelegate> {
   UIPopoverController *myPopoverController;
}

@property (nonatomic, retain) UIPopoverController *myPopoverController;
....
..

@end 
```

主视图实现文件（一）

```
@synthesize delegate;
..
...

- (void) didLoginButton {
    if ([myPopoverController isPopoverVisible]) {
         NSLog(@"dismiss ok");

         [myPopoverController dismissPopoverAnimated:YES];
     }
}

....
.. 
```

运行我的代码并在弹出窗口出现的主视图中按下登录按钮。按下弹出框内的按钮没有任何反应。

基本上，我在主视图文件中设置的 didLoginButton 方法永远不会被触发，当然，弹出框总是可见的。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:12:47.017

设置委托

```
 BViewController.delegate = mainAViewController; //or self 
```

在呈现弹出框之前。如果这不是您的问题，请提供您的 B 创建和演示中的一些代码。

# php - 如何在 Facebook 中获取未过期的 access_token？

> ID：13531596
> 
> 赞同：0
> 
> 时间：2012-11-23T15:04:28.183
> 
> 标签：php, facebook, facebook-graph-api

[我在页面https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)中获得了我的访问令牌，并且我的应用程序能够在 Facebook 页面的墙上发布。

但是`access_token`一个小时后过期。

我怎样才能得到一个没有过期的`access_token`？

编辑：否决选民：我已经发布了我自己的答案，如果您阅读了它，您就会知道我的解决方案在 FB 文档和 SO 中都找不到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T20:01:57.167

对于所有投反对票并投赞成票的人，我想让你知道这里没有明确的答案。

在试图理解 FB 令人困惑的文档之后，这个问题的答案非常简单：

1.  将您的应用设置为**Native/Desktop**，这样您就可以获得一个 60 天的令牌（稍后您将把它变成永久的）。通过转到[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)编辑设置 > 高级 > 在应用类型中选择本机/桌面来执行此操作。

2.  转到[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)选择您的应用，然后**获取访问令牌**

3.  在**扩展权限**选项卡中，选择`manage_pages`并`publish_stream`

4.  现在您有一个 60 天的临时令牌。

5.  要获取您的永久令牌，请转到此处并使用您的临时令牌：`https://graph.facebook.com/me/accounts?access_token=REPLACE_THIS_WITH_YOUR_TEMPORARY_TOKEN`

看哪，您将看到您作为管理员的所有 Facebook 页面的**永久访问令牌。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:50:19.330

您应该使用长期用户访问令牌的刷新。

[https://developers.facebook.com/docs/howtos/login/extending-tokens/](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

# php - JQuery Datatables 将数据序列化到mysql数据库中

> ID：13531600
> 
> 赞同：0
> 
> 时间：2012-11-23T15:04:50.097
> 
> 标签：php, jquery, mysql, serialization, datatable

我真的是 javascript 和 JQuery 的新手，我正在使用 JQuery 数据表。我已经阅读了该页面 100 次并比较了 html 源代码，我设法弄清楚如何将唯一选中的字段传递到 sData 数组中......无论如何......

我有这个数组：

```
var sData 
```

当我提交表单时，它会提醒我选择了哪些行，它给出了如下内容：

```
1=1&2=2&10=10&18=18 
```

* * *

在此之前，我使用简单的表格，每行都有一个按钮，为我保留了我选择的按钮，所以这一步对我来说真的很困惑......

我使用此查询将它们添加到数据库中：

```
if (isset($_POST['addtolist']) ) 
{
    $itemid=mysql_real_escape_string($_POST['itemid']);
    $AddToListQuery = "
                    INSERT INTO
                    reservelist
                   (itemid, projectid)
                    VALUES
                   ('$itemid', '" . mysql_real_escape_string($_SESSION['projectidtoreserve']) . "')
                   ";      
    mysql_query($AddToListQuery, $conn);
    header('Location: pm_reserving.php');
    exit();
} 
```

并且每次单击指定表格行的按钮后都会执行。

但现在我不知道如何将这个 sData 数组传递给查询......

我不能`sData`像现在这样使用它，而是将它输入数据库，因为它没有任何意义：/...我与这个 sData 有什么关系？

**现在编辑**
我的 JQuery 代码：

```
 $('#form').submit( function() {
            var sData = $('input', oTable.fnGetNodes()).serialize();
            alert( "The following data would have been submitted to the server: \n\n"+sData );

        } );

        oTable = $('#table1').dataTable(); 
```

我的表格：

```
<form id="form" action="" method="post">
<button type=submit name=addtolist>Button</button> 
```

当我提交表单时，我会收到上面提到的警报（但现在有 id1=1&id2=2 等）。

PHP：

```
if (isset($_POST['addtolist']) ) 
{
    $x=1;
    $values=array('+sData');
    while(isset($_POST['id'.$x]))
    {
        $values[$x-1]=$_POST['id'.$x];
        $AddToListQuery = "
                        INSERT INTO
                        reservelist
                       (itemid, projectid)
                        VALUES
                       ('". mysql_real_escape_string($_POST['id'.$x]) ."', '" . mysql_real_escape_string($_SESSION['projectidtoreserve']) . "')
                       ";
        $x++;
    }
    mysql_query($AddToListQuery, $conn);
    header('Location: pm_reserving.php');
    exit();
} 
```

这个 PHP 循环可能是一个很大的失败......但我需要这个 sData 变量来放入 PHP 变量......哦，天哪，我在这方面很蹩脚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:30:00.403

如果您`sData`使用 GET 或 POST 传递，恢复它的方法是这样的：

如果 URL 是（例如在 GET 中）：`www.url.com?key=value&key2=value2`

在 PHP 中，您将其读取为：

```
$value=$_GET['key'];  // if you used POST it's $value=$_POST['key'];
$value2=$_GET['key2']; 
```

因此，在您的示例中，它将是：

```
$id1=$_GET['1'];
$id2=$_GET['2'];
.... 
```

如您所见，这并不理想，因为您需要知道 id 才能读取 id ...更好的格式`sData`是：

```
id1=1&id2=2&id3=10&id4=18 
```

你会读到：

```
$id1=$_GET['id1']; //gets a 1
$id2=$_GET['id2']; //gets a 2
$id3=$_GET['id3']; //gets a 10
$id4=$_GET['id4']; //gets a 18 
```

一个简单的阅读方法是：

```
$x=1;
$values=array();
while(isset($_GET['id'.x])){
     $values[$x-1]=$_GET['id'.x];
     $x++;
}

echo "Number of Ids=".($x-1);
print_r($values); 
```

编辑：如果您提交表单，这一切如何运作。

```
<form id="form" action="example.php" method="post">
<input type="text" id="id1" name="id1" value="1" />
<input type="text" id="id2" name="id2" value="2" />
<button type=submit name=addtolist>Button</button> 
```

如果你只是提交这个，变量`id1`和`id2`将使用 POST 提交到`example.php`. 现在这个 PHP 应该这样做：

例子.php

```
$x=1;
$values=array();
while(isset($_POST['id'.x])){
     $values[$x-1]=$_POST['id'.x];
     $x++;
}

echo "Number of Ids=".($x-1);
print_r($values); 
```

即使您使用更多变量，如果它们都被命名为 id+number，这将起作用，其中 number 在每个新变量（id1、id2、id3、id4 ....）中不断增加 1

在此之后，$values 数组包含所有传递的变量！您可以在查询中或任何您需要的地方使用它们。

# ajax - JSF 'Tab' bean 范围

> ID：13531611
> 
> 赞同：1
> 
> 时间：2012-11-23T15:05:28.420
> 
> 标签：ajax, jsf, myfaces, conversation-scope, orchestra

我需要为两个页面创建一个包含两个页面和一个支持 bean 的 webapp。我试过`@SessionScoped`了，但是当我在浏览器中打开其他选项卡时，我看到的数据与上一个选项卡中的数据相同。

我尝试使用`MyFaces Orchestra`，但在每个 AJAX 请求上都会创建支持 bean。

如何解决问题？

事先感谢，伊利亚

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T15:39:05.220

在网络浏览器中，如果您打开一个新选项卡，它将传递相同的会话相关 cookie，因此将在相同的会话上下文中打开。你需要打开一个新的窗口来获得一个新的会话。

# r - R中数值函数的数值积分

> ID：13531614
> 
> 赞同：0
> 
> 时间：2012-11-23T12:28:46.180
> 
> 标签：r, integral

我正在尝试应用[此解决方案](https://stats.stackexchange.com/questions/6940/calculating-p-value-from-an-arbitrary-distribution)来找到从数据实验定义的任意分布中的 p 值。我已经使用 R 中的[密度](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/density.html)函数估计了这个分布。现在，我想整合这个函数来应用@mpiktas 提出的解决方案。然而，[积分](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/integrate.html)函数需要一个函数作为输入，而不是两个向量*x*和*y*以及定义函数的值，这就是密度提供的值。

*关于如何根据 R 中的x* - *y*值处理这种数值积分的任何想法？

# google-apps-script - Google Apps 脚本：访问允许用户编辑其回复的表单键

> ID：13531616
> 
> 赞同：4
> 
> 时间：2012-11-23T15:05:45.450
> 
> 标签：google-apps-script, google-docs, google-forms

借助 Google Apps for Education 域，我们可以创建允许用户编辑其回复的表单。

这会向提交者发送一个链接，其中包含可用于编辑其响应的 url。本质上，这是表单的 url，最后有一个唯一的键。

在提交时，我希望能够收集此密钥并将其与每个用户的表单数据一起存储。

我们正在创建一个校友网站（所有用户都将通过我们的域进行身份验证），我们希望更新我的个人资料页面。用户第一次提交时，这将是空白的。但是当他们回来时，我想要一个脚本来根据提交的条目搜索用户名，如果找到用户，将他们定向到允许他们更新个人资料的链接。

在首次提交时，Google 会自动将 url 发送给用户。但是，几年后他们不太可能还会有这封电子邮件，所以如果我们可以为他们提供链接，对用户来说会容易得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:40:30.093

我有类似的问题。一种解决方法是实现一个 Gmail 插件（如果所有用户都是 gmail 用户）。该插件可以解析消息（提取器），并获取密钥/或整个 URL。但是您需要将它保存在某个数据库中，以便以后访问。

如果我们有一些方法来列出表单键，那应该会好得多！

# html - 在jsp中渲染图像的问题

> ID：13531617
> 
> 赞同：0
> 
> 时间：2012-11-23T15:05:50.207
> 
> 标签：html, jsp, jeditorpane, image-rendering

我无法在 jsp 中渲染图像。其他一切工作正常，即所有数据都在渲染。它只是导致问题的图像。我知道路径是正确的

```
<img src="https://localhost/genesis/images/client-logo1.png" alt="Image not available"> 
```

或者

```
<img src="/images/client-logo1.png" alt="Image not available"> 
```

下面的代码呈现了jsp

```
HttpServletResponse charResponse = null;
     Locale locale = ProxyContextHolder.getProxyContext().getLocale();
    try {
        View view = jspViewResolver.resolveViewName(viewNameWithExtension , locale);
        StringWriter sw = new StringWriter();
        Object request = (ProxyContextHolder.getProxyContext()).getRequest();
        Object response = (ProxyContextHolder.getProxyContext()).getResponse();
        if (request != null &&  request instanceof HttpServletRequest
            && response != null &&  response instanceof HttpServletResponse) {
            HttpServletRequest httpReq = (HttpServletRequest) request;
            HttpServletResponse httpResp = (HttpServletResponse) response;
            charResponse = new CharResponseWrapper(httpResp);
            view.render(modelMap, httpReq, charResponse);
            html = charResponse.toString();
            //httpReq.getRequestDispatcher(viewNameWithExtension).include(httpReq, charResponse);
           // html = charResponse.toString();
        }
    } 
```

我尝试了一些方法，但似乎没有任何效果。jsp 被加载到 jeditorPane 中，并从中创建图像。

我最多只能看到一些带有太阳和山脉的破碎或未渲染的图像......不确定它是什么

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:45:55.373

/image 前缀是否由您为 jsp 列出的代码解析？我觉得应该放着不管...

# scala - Scala 抽象类

> ID：13531622
> 
> 赞同：3
> 
> 时间：2012-11-23T15:06:08.273
> 
> 标签：scala

我是 scala 的新手，我不确定如何调用抽象类来创建所需的对象。任何帮助都会很棒

```
abstract class Expr{
    case class Number(n:Double) extends Expr
    case class Sum(e1:Expr, e2: Expr) extends Expr
    case class Subtract(e1: Expr, e2: Expr) extends Expr
    case class Divide(e1: Expr, e2: Expr) extends Expr
    case class Abs(e1: Expr) extends Expr
    case class Mod(e1: Expr, e2: Expr) extends Expr
    def eval(e:Expr): Double = e match{
        case Number(n) => n;
        case Sum(e1,e2) => eval(e1) + eval(e2);
    }
}
object main{
    def main(args: Array[String])  {
        val e = Expr();
        println("hello");
    }
} 
```

所以我希望能够创建 Expr 对象并在其上使用 eval。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T15:33:04.077

您可以通过添加`{}`以指示空类体来实例化 Expr。因此，如果您编写，您的代码将起作用

```
val e = Expr() {};
val n = e.Number(1.0);
val sum = e.Sum(n, n);
println(e.eval(sum)); 
```

但我不明白为什么案例类必须驻留在 Expr 类中。为什么不写这样的东西：

```
abstract class Expr {}

object Eval {
  def apply(e : Expr) = e match{
    case Number(n) => n;
    case Sum(e1,e2) => Eval(e1) + Eval(e2);
  }
}

case class Sum(e1 : Expr, e2 : Expr) extends Expr 
```

然后你可以更好地引用它们：

```
Eval(Sum(Number(1), Number(1))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T15:56:17.877

那个怎么样：

```
abstract class Expr {
  def eval: Double
}
case class Number(n:Double) extends Expr {
  def eval = n
}
case class Sum(e1:Expr, e2: Expr) extends Expr {
  def eval = e1.eval + e2.eval
}
case class Subtract(e1: Expr, e2: Expr) extends Expr {
  def eval = e1.eval - e2.eval
}

object Eval {
  def apply(e : Expr) = e.eval
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T00:39:13.823

根据 Odersky 的说法，如果您是 scala 的新手，那么您应该在大多数情况下使用特征，除非您知道为什么要特别使用抽象类。

[使用抽象类而不是特征有什么好处？](https://stackoverflow.com/questions/1991042/scala-traits-vs-abstract-classes)

上面的例子对特征是合法的，然后可以“混合”在一起。

```
scala> trait Expr
defined trait Expr

scala> case class Number(n:Double) extends Expr
defined class Number 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T15:32:42.013

[更新]

顺便说一句，我更喜欢@JensEgholm Eval 对象（使用 apply 方法）而不是我将 eval 添加到下面的 main 的建议。我的观点是，您的 eval 代码应该是便于访问的 Scala 对象的一部分，而不是任何 Scala 抽象类的一部分。

[原来的]

这看起来像是 Odersky 的 Programming in Scala 中的示例/模板代码（顺便说一句，我强烈推荐）

如果是这样，则您错误地复制了模板。后面没有大括号`abstract class Expr` 那一行是一个完整的抽象类声明。eval 方法也应该放在你的主要对象中。尝试这个：

```
abstract class Expr
case class Number(n:Double) extends Expr
case class Sum(e1:Expr, e2: Expr) extends Expr
case class Subtract(e1: Expr, e2: Expr) extends Expr
case class Divide(e1: Expr, e2: Expr) extends Expr
case class Abs(e1: Expr) extends Expr
case class Mod(e1: Expr, e2: Expr) extends Expr

object main{
  def eval(e:Expr): Double = e match{
      case Number(n) => n;
      case Sum(e1,e2) => eval(e1) + eval(e2);
  }
    def main(args: Array[String])  {
      val n = Number(1.0);
      val m = Number(2.0);
        println(eval(Sum(n,m)));
    }
} 
```

该程序应打印“3.0”。

# charts - jqPlot stackSeries：真，未捕获类型错误：无法读取未定义的属性“0”

> ID：13531626
> 
> 赞同：1
> 
> 时间：2012-11-23T15:06:38.877
> 
> 标签：charts, jqplot

我想显示 3 个数据系列。

每当我在中设置`stackSeries: true`选项时，我都会得到

```
Uncaught TypeError: Cannot read property '0' of undefined 
```

或者

```
Uncaught TypeError: Cannot read property '1' of undefined 
```

尝试显示数据时。

当我删除`stackSeries: true`属性时，会呈现图表。怎么了？

## 更新

```
$(document).ready(function(){
    var bar1 = [
    <?php
        if(!empty($bar1)){
            $i = 0;
            foreach($bar1 as $bar){
                $i++;
                if(!empty($bar['jobs']['date_published'])){
                    if($i == count($bar1))
                        echo '[\''.$bar['jobs']['date_published'].'\', '.$bar[0]['count'].']';
                    else
                        echo '[\''.$bar['jobs']['date_published'].'\', '.$bar[0]['count'].'], ';
                }
            }
        }
    ?>
    ];
    var bar2 = [
    <?php
        if(!empty($bar2)){
            $i = 0;
            foreach($bar2 as $bar){
                $i++;
                if(!empty($bar['jobs']['date_published'])){
                    if($i == count($bar2))
                        echo '[\''.$bar['jobs']['date_published'].'\', '.$bar[0]['count'].']';
                    else
                        echo '[\''.$bar['jobs']['date_published'].'\', '.$bar[0]['count'].'], ';
                }
            }
        }
    ?>
    ];
    var bar3 = [
    <?php
        if(!empty($bar3)){
            $i = 0;
            foreach($bar3 as $bar){
                $i++;
                if(!empty($bar['jobs']['date_published'])){
                    if($i == count($bar3))
                        echo '[\''.$bar['jobs']['date_published'].'\', '.$bar[0]['count'].']';
                    else
                        echo '[\''.$bar['jobs']['date_published'].'\', '.$bar[0]['count'].'], ';
                }
            }
        }
    ?>
    ];
    <?php   
        if(!empty($bar1) && !empty($bar2) && !empty($bar3))
            echo 'var labels = ["Bar 1", "Bar 2", "Bar 3"];';
        else if(!empty($bar1) && !empty($bar2))
            echo 'var labels = ["Bar 1", "Bar 2"];';
        else if(!empty($bar2) && !empty($bar3))
            echo 'var labels = ["Bar 2", "Bar 3"];';
        else if(!empty($bar1) && !empty($bar3))
            echo 'var labels = ["Bar 1", "Bar 3"];';
        else if(!empty($bar1))
            echo 'var labels = ["Bar 1"];';
        else if(!empty($bar2))
            echo 'var labels = ["Bar 2"];';
        else if(!empty($bar3))
            echo 'var labels = ["Bar 3"];';
    ?>
    optionsObj = {
        //stackSeries: true,
        seriesColors:[<?php if(!empty($bar1)) echo '"#4bb2c5",';
                            if(!empty($bar2)) echo '"#F78181",';
                            if(!empty($bar3)) echo '"#9AFE2E",';
                            echo '"#4bb2c5"'; ?>],
        animate:true,
        legend:{
            show:true,
            location:"sw",
            rowSpacing:"0px",
            labels:labels
        },
        title:{
            text:"Jobs",
            fontSize:"12px"                     
        },
        seriesDefaults:{
            showMarker: true,
            pointLabels: { show: true },
            renderer: $.jqplot.BarRenderer,
            rendererOptions: {
                barWidth: 2
            }
        },
        axes:{
            xaxis:{
                pad:1,
                tickOptions:{
                    fontSize:"10px"
                },
                renderer:$.jqplot.DateAxisRenderer
            },
            yaxis:{autoscale: true}
        },
        highlighter: {show: true},
        grid:{drawGridlines:true}
    };
    <?php $empty = false;
            if(!empty($bar1) && !empty($bar2) && !empty($bar3)){ ?>
            $.jqplot('chart1', [bar1, bar2, bar3], optionsObj);
    <?php } else if(!empty($bar1) && !empty($bar2)){ ?>
            $.jqplot('chart1', [bar1, bar2], optionsObj);
    <?php } else if(!empty($bar2) && !empty($bar3)){ ?>
            $.jqplot('chart1', [bar2, bar3], optionsObj);
    <?php } else if(!empty($bar1) && !empty($bar3)){ ?>
            $.jqplot('chart1', [bar1, bar3], optionsObj);
    <?php } else if(!empty($bar1)){ ?>
            $.jqplot('chart1', [bar1], optionsObj);
    <?php } else if(!empty($bar2)){ ?>
            $.jqplot('chart1', [bar2], optionsObj);
    <?php } else if(!empty($bar3)){ ?>
            $.jqplot('chart1', [bar3], optionsObj);
    <?php } ?>

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-21T18:17:11.360

我发现如果我的数据集在任何地方都有不连续性，那么堆叠图会引发错误。

例如，这个数据系列会抛出一个错误：

```
[
[[0,22],[1,22],[2,22]],
[[0,33],[2,33]],
] 
```

这个不会：

```
[
[[0,22],[1,22],[2,22]],
[[0,33],[1,33],[2,33]],
] 
```

注意两者的区别。对于第二个系列，第一个在 X=1 处没有数据点。解决方法是确保您的所有系列在所有可能的 X 值处都有值，将任何缺失的值设置为零：

```
[
[[0,22],[1,22],[2,22]],
[[0,33],[1,0],[2,33]],
] 
```

# matlab - 如何在原始图像中找到特定的裁剪图像？

> ID：13531637
> 
> 赞同：1
> 
> 时间：2012-11-23T15:07:15.757
> 
> 标签：matlab, crop

我正在执行以下步骤：

*   我在原始图像中插入标记`img1`以获得带水印的图像`img2`。
*   我裁剪带水印的图像以获得`img3`.
*   我想裁剪原始图像的特定部分`img1`以获得相同的部分，如`img3`.

我的问题是如何找到裁剪部分在原始图像中的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:49:50.817

您可以使用互相关[http://www.mathworks.ch/ch/help/images/ref/normxcorr2.html](http://www.mathworks.ch/ch/help/images/ref/normxcorr2.html)

这是一个示例[http://www.mathworks.ch/products/demos/image/cross_correlation/imreg.html](http://www.mathworks.ch/products/demos/image/cross_correlation/imreg.html)

如果裁剪后的图像已调整大小，我认为您的问题更类似于这个[http://thydzik.com/matlab-scaled-image-normalized-cross-correlation/](http://thydzik.com/matlab-scaled-image-normalized-cross-correlation/)

# python - django - 拥有模型类如何获取所有字段的列表、它们的类型和传递的参数？

> ID：13531643
> 
> 赞同：1
> 
> 时间：2012-11-23T15:07:29.080
> 
> 标签：python, django, introspection, django-haystack

假设我有以下模型：

```
class Note(models.Model):
    user = models.ForeignKey(User)
    pub_date = models.DateTimeField()
    title = models.CharField(max_length=200)
    body = models.TextField()

    def __unicode__(self):
        return self.title 
```

我需要一个可以像这样工作的函数：

```
print inspectModelClass(Note)

>>> {user:('ForeignKey', {null:False, unique:False, blank:False...}), pub_date:('DateTimeField',{null:False, unique:False,...})...} 
```

我不知道如何仅列出 django.model.field 的实例，如何获取它们的名称、正确的类型（BooleanField、CharField 等）以及它们的属性，如 null、unique、max_chars 等。

你能帮我解决这个问题吗？

我需要这个的原因是拥有这样的功能，我可以为 django-haystack 动态创建索引类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:14:35.097

您可以使用元数据类轻松获取模型字段属性。

```
MyModel._meta.fields 
```

返回字段列表。此列表中的每个字段都有您熟知的属性（`name`等`verbose_name`）

# asp.net - 我应该在 CreateSalt 类中使用什么大小？

> ID：13531647
> 
> 赞同：0
> 
> 时间：2012-11-23T15:07:43.373
> 
> 标签：asp.net, asp.net-mvc, hash, asp.net-mvc-4, salt

> **可能重复：**
> [用户密码盐的最佳长度是多少？](https://stackoverflow.com/questions/184112/what-is-the-optimal-length-for-user-password-salt)

我应该在 CreateSalt 类中使用什么大小？

```
private static string CreateSalt(int size) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:23:12.303

本周刚刚完成了完全相同的事情，我决定使用 .Net 4 中的 RNGCryptoServiceProvider 类生成的字节 [8] 盐。

似乎是一个不错的尺寸，以避免与其他盐的碰撞。

硅

# ant - 从 Ant 和 Ivy 启动 jetty 9 时出现异常

> ID：13531649
> 
> 赞同：1
> 
> 时间：2012-11-23T15:07:47.910
> 
> 标签：ant, jetty, jndi

我正在尝试使用 ivy（不是 maven）从 Ant 启动 Jetty 9 并获得以下异常

“org.eclipse.jetty.ant.WebApplicationProxyImpl.AntWebAppContext”类的对象不是“org.eclipse.jetty.webapp.WebAppContext”类型。对象类和类型类来自不同的加载器。

码头-env.xml ---

```
<Configure class="org.eclipse.jetty.webapp.WebAppContext">
<New id="jdbc/datasource" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg>java:comp/env/jdbc/datasource</Arg>
    <Arg>
        <New class="com.inet.tds.TdsDataSource">
            <!--<Set name="driverClassName">com.inet.tds.TdsDriver</Set>-->
            <Set name="serverName">serverDetails
            </Set>
            <Set name="user">user</Set>
            <Set name="password">password</Set>
        </New>
    </Arg>
</New> 
```

如果我将配置表单“org.eclipse.jetty.webapp.WebAppContext”中的类更改为“org.eclipse.jetty.ant.WebApplicationProxyImpl.AntWebAppContext”，则会得到 ClassNotFoundException org.eclipse.jetty.ant.WebApplicationProxyImpl.AntWebAppContext -即使我的类路径中包含 jar。

# java - 在 Java 中，如何每 X 秒执行一次代码？

> ID：13531650
> 
> 赞同：0
> 
> 时间：2012-11-23T15:07:47.707
> 
> 标签：java, timer, execute

我正在制作一个非常简单的蛇游戏，我有一个名为 Apple 的对象，我想每隔 X 秒移动到一个随机位置。所以我的问题是，每 X 秒执行此代码的最简单方法是什么？

```
apple.x = rg.nextInt(470);
apple.y = rg.nextInt(470); 
```

谢谢。

编辑：

好吧，确实有一个像这样的计时器：

```
Timer t = new Timer(10,this);
t.start(); 
```

它的作用是在游戏开始时绘制我的图形元素，它运行以下代码：

```
@Override
    public void actionPerformed(ActionEvent arg0) {
        Graphics g = this.getGraphics();
        Graphics e = this.getGraphics();
        g.setColor(Color.black);
        g.fillRect(0, 0, this.getWidth(), this.getHeight());
        e.fillRect(0, 0, this.getWidth(), this.getHeight());
        ep.drawApple(e);
        se.drawMe(g); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T16:41:05.667

我会使用执行人

```
ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
    Runnable toRun = new Runnable() {
        public void run() {
            System.out.println("your code...");
        }
    };
ScheduledFuture<?> handle = scheduler.scheduleAtFixedRate(toRun, 1, 1, TimeUnit.SECONDS); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T05:20:38.233

使用计时器：

```
Timer timer = new Timer();
int begin = 1000; //timer starts after 1 second.
int timeinterval = 10 * 1000; //timer executes every 10 seconds.
timer.scheduleAtFixedRate(new TimerTask() {
  @Override
  public void run() {
    //This code is executed at every interval defined by timeinterval (eg 10 seconds) 
   //And starts after x milliseconds defined by begin.
  }
},begin, timeinterval); 
```

文档：[Oracle 文档 Timer](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#scheduleAtFixedRate(java.util.TimerTask,%20long,%20long))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T15:10:46.387

最简单的就是使用`sleep`.

```
 apple.x = rg.nextInt(470);
        apple.y = rg.nextInt(470);
        Thread.sleep(1000); 
```

循环运行上面的代码。

这将为您提供**大约**（可能不准确）一秒的延迟。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T15:23:23.737

你应该有某种游戏循环来负责处理游戏。*您可以每隔x*毫秒触发在此循环中执行的代码，如下所示：

```
while(gameLoopRunning) {
    if((System.currentTimeMillis() - lastExecution) >= 1000) {
        // Code to move apple goes here.

        lastExecution = System.currentTimeMillis();
    }
} 
```

在此示例中，if 语句中的条件将`true`每 1000 毫秒计算一次。

# python - Gstreamer 消息从视频源（网络摄像头）发出新帧信号

> ID：13531652
> 
> 赞同：4
> 
> 时间：2012-11-23T15:07:57.363
> 
> 标签：python, gstreamer, v4l2

我正在尝试使用 gstreamer 将来自网络摄像头的流保存为一系列图像。到目前为止，我已经编写了这段代码......

```
#!/usr/bin/python
import sys, os
import pygtk, gtk, gobject
import pygst
pygst.require("0.10")
import gst

 def __init__(self):
      #.... 
      # Code to create a gtk Window
      #....
      self.player = gst.Pipeline("player")
      source = gst.element_factory_make("v4l2src", "video-source")
      sink = gst.element_factory_make("xvimagesink", "video-output")
      caps = gst.Caps("video/x-raw-yuv, width=640, height=480")
      filter = gst.element_factory_make("capsfilter", "filter")
      filter.set_property("caps", caps)
      self.player.add(source, filter, sink)
      gst.element_link_many(source, filter, sink) 
```

在此之后，我试图在总线上创建一个信号来侦听来自源或接收器的任何消息，以指示已发送或接收新帧，以便可以保存它。

```
 bus = self.player.get_bus()
      bus.add_signal_watch()
      bus.connect("message::any", self.save_file,"Save file") 
```

其中 save_file 是我的回调，我想保存文件。

```
def save_file(self, bus, msg):
      print  "SAVED A NEW FILE" 
```

我有两个问题，

1.  如何调用此回调。message::any 不起作用。
2.  调用此消息时，如何访问图像缓冲区。

更新（2012 年 4 月 12 日）：

几个链接供参考

1.  v4l 的 python 接口。但这对我不起作用。当我尝试使用 12.04 Ubuntu 时，它似乎崩溃了。 [http://code.google.com/p/python-video4linux2/](http://code.google.com/p/python-video4linux2/)

2.  感兴趣的人的网络摄像头查看器代码。但这不是我想要的，因为它使用 gst-launch 并且不提供我想要的管道控制级别。[http://pygstdocs.berlios.de/pygst-tutorial/webcam-viewer.html](http://pygstdocs.berlios.de/pygst-tutorial/webcam-viewer.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:55:22.053

Gstreamer Bus 不打算用于此目的。放在那里的消息表示一些特殊事件，如流结束、元素状态更改等。流经元素的缓冲区（图像）通常不会在总线上生成任何消息。

您可以考虑几种可能性：

*   在videosink之前制作“tee”元素并将“multifilesink”并行连接到videosink（您可能希望看到一些图像编码器，如pngenc或jpegenc并将其中一个放在multifilesink之前）
*   像以前一样，但是使用“appsink”，它允许你处理缓冲区并用它们做任何你想做的事情
*   如果要打开和关闭倾倒，请考虑使用“阀门”元素

您可能希望在附加接收器上将“同步”属性设置为 false（这会导致缓冲区尽快转储而不同步到时钟）。还可以考虑在 tee 之后添加一些队列（没有这种死锁可能会在 ready->paused 转换期间发生）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T22:37:24.617

我不确定我多年后的回复是否对您有用。但希望，这对其他人有用。

要接收您已收到缓冲区的消息，您可以使用 gstreamer [probes](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/manual/html/chapter-dataaccess.html)。

它可能是类似的东西：

```
def make_pipeline(self):
    CLI2 = [
    'v4l2src ! video/x-raw,format=RGB,width=640,height=480,framerate=30/1 ! ',
    'videoconvert ! x264enc bitrate=128 ! mpegtsmux name="mux" ! hlssink name="sink"',
    ]
    gcmd = ''.join(CLI2)
    self.pipeline = Gst.parse_launch(gcmd)
    self.hlssink = self.pipeline.get_by_name("sink")
    self.hlssink.set_property("target-duration",2)
    self.hlssink_pad = self.hlssink.get_static_pad("sink")
    probe_id = self.hlssink_pad.add_probe(Gst.PadProbeType.EVENT_UPSTREAM,probe_callback) 
```

然后，探测回调函数可以是：

```
def probe_callback(hlssink_pad,info):
    info_event = info.get_event()
    info_structure = info_event.get_structure()
    do_something_with_this_info
    return Gst.PadProbeReturn.PASS 
```

因此，每次在源焊盘或接收焊盘上发生事件时，都会在主线程中调用探测回调函数。

希望这可以帮助！

# xcode - git vs xcode 快照

> ID：13531655
> 
> 赞同：7
> 
> 时间：2012-11-23T15:08:29.097
> 
> 标签：xcode, git, snapshot

我正在通过 itunesU 视频学习在 iOS 中编程，并且一直在使用 xcode。我在 xcode 中发现了创建快照的功能，到目前为止，我用它来为我的项目在每个主要里程碑上拍摄快照。

然后我来到关于使用 git 进行版本控制的章节，并按照他们的指示到“git init”，它给出了这个响应“重新初始化 /Users/username/Developer/Calculator/Calculator/.git/ 中的现有 Git 存储库”而不是“在 /Users/...etc 中初始化的空 git 存储库”，这让我认为快照已经完成了。

我的问题是：在运行“git init”之前，我是否以任何方式搞砸了我在 xcode 中创建的快照？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T20:08:52.690

我认为您只是遇到了一个消息实例，它并不真正意味着它所说的内容。

快照和 git 存储库是完全独立的。快照存储在：

```
~/Library/Application Support/Developer/Shared/SnapshotRepository.sparseimage 
```

默认情况下，项目 git 存储库位于：

```
$SRCROOT/.git 
```

$SRCROOT 是您项目的“根”文件夹。

对我来说，这不是真正的对抗或“一个或另一个”。我两个都用。我有 XCode 设置以在每次构建成功后拍摄快照：

```
Xcode->Preferences...->Behaviors->Build->Succeeds->Create Snapshot 
```

并提交给 git：

```
Xcode->File-Source Control->Commit... 
```

在每一次“大变革”完成之后。

这样，我可以使用 git 管理“大东西”（分支、合并、回滚）并调查小的“我刚刚破坏了什么？” 带有快照的东西。我很少需要回滚快照。顺便说一句，我能回忆起的唯一一次是拙劣的全球搜索和替换。

唯一的缺点是 Xcode 不允许您使用差异编辑器将当前代码与之前的 Snapshot 进行比较。要将当前代码与之前的快照进行比较，您必须：

1.  打开组织者
2.  点击项目图标
3.  点击你的项目
4.  单击要比较的快照
5.  单击底部的“导出快照”图标
6.  将抽屉调整为有用的宽度并进行比较

比较快照并不像比较以前的 .git 版本那么容易，但是当一个小改动破坏了当前构建中的某些内容时，它为我节省了很多时间。

射线

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:13:07.487

这里没有vs。您可以在 xcode [http://repeatgeek.com/tools/using-git-with-xcode-part-i/中使用 GIT](http://repeatgeek.com/tools/using-git-with-xcode-part-i/)

# ruby-on-rails-3 - 从模板中的视图呈现表单

> ID：13531657
> 
> 赞同：0
> 
> 时间：2012-11-23T15:08:34.603
> 
> 标签：ruby-on-rails-3, backbone.js, coffeescript, backbone-forms

我正在评估backbone.js、backbone-forms 和Rails，但我遇到了一些问题......

我有一个视图，我在其中创建了一个新模型和一个表单，我想用其他 html 元素显示这个表单，所以我使用了一个模板。

```
expedients_new.js.coffee
------------------------

class Globalbackbone.Views.ExpedientsNew extends Backbone.View

template: JST['expedients/new']

render: ->

@form = new Backbone.Form({
    model: @model
}).render();

console.log(@model.procedencia) 
console.log(@form) 
$(@el).html(@template(expedient: @model, form: @form ))
this 
```

这个视图使用了一个模板，在这个模板中，我想在那里渲染表单，但是我不知道该怎么做......

```
new.jst.eco
-----------

<h1>BackBones with GlobalWeb</h1>

<h2>Adding New Expedient</h2>

<%=@expedient.date%>
<hr>
<%=@form.el%>
<hr>
<%=@form%> 
```

提前致谢，

问候

## 编辑

我期望表单的当前浏览器输出是：[object HTMLFormElement]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:17:47.203

使用[说明](https://github.com/powmedia/backbone-forms#usage)表明这`@form`将是一个主干视图：

```
var form = new Backbone.Form({
    model: user
}).render(); 
```

这意味着这`@form.el`将是您需要插入到 DOM 中的 DOM 元素：

```
$('body').append(form.el); 
```

如果您查看[source](https://github.com/powmedia/backbone-forms/blob/master/src/form.js#L8)，您会发现它`Backbone.Form`是一个`Backbone.View`子类：

```
var Form = (function() {
  return Backbone.View.extend({
    //... 
```

您的代码试图将其`@form`视为包含 HTML 的字符串：

```
<%=@form%> 
```

所以你最终得到一个标准的字符串化版本的 DOM 元素：`[object HTMLFormElement]`.

如果你有这样的想法，我认为你会有更好的运气：

```
@$el.append(@template(expedient: @model))
@$el.append(@form.el) 
```

并在您的模板中：

```
<h1>BackBones with GlobalWeb</h1>

<h2>Adding New Expedient</h2>

<%=@expedient.date%>
<hr> 
```

然后你的表单应该出现在`<hr>`.

# c - 多线程C程序中的共享字段是否大量使用CPU？

> ID：13531658
> 
> 赞同：1
> 
> 时间：2012-11-23T15:08:43.463
> 
> 标签：c, multithreading, unix

我正在编写一个使用一定比例 CPU 的小程序。基本策略是我会不断检查 CPU 使用率，如果使用率高于给定值，则让进程休眠。

此外，由于我使用的是 MacOS（没有像 Linux 那样的 proc/stat，C# 中没有 PerformanceCounter），我必须`top`在另一个线程中执行命令并从中获取 CPU 使用率。

问题是即使我给出了一个很小的值作为参数，我的 CPU 使用率也一直很高。并且经过多次实验，似乎是由多线程共享字段引起的。

这是我的代码（代码 1）和实验：

（代码2）一开始我以为是shell命令使用率很高，所以在里面注释掉了无限循环`run()`，只留下`getCpuUsage()`运行。但是，CPU 使用率几乎为零。

（代码3）然后，我又写了一个`run()`独立于cpuUsage的函数，打算使用50%的CPU。它运作良好！我认为代码 1 和代码 3 之间的唯一区别是`cpuUsage`. 所以我想知道线程之间的共享字段是否会大量使用CPU？

代码 1

```
const char CPU_COMMAND[] = "top -stats cpu -l 1 -n 0| grep CPU\\ usage | cut -c 12-15";

int cpuUsage; // shared field that stores the cpu usage

// thread that continuously check CPU usage
// and store it in cpuUsage
void getCpuUsage() {
    char usage[3];
    FILE *out;
    while (1) {
        out = popen(CPU_COMMAND, "r");
        if (fgets(usage, 3, out) != NULL) {
            cpuUsage = atof(usage);
        } else {
            cpuUsage = 0;
        }
        pclose(out);
    }
}

// keep the CPU usage under ratio
void run(int ratio) {
    pthread_t id;
    int ret = pthread_create(&id, NULL, (void *)getCpuUsage, NULL);
    if (ret!=0) printf("thread error!");

    while (1) {
        // if current cpu usage is higher than ration, make it asleep
        if (cpuUsage > ratio) {
            usleep(10);
        }
    }

    pthread_join(id, NULL);
} 
```

* * *

代码 2

```
// keep the CPU usage under ratio
void run(int ratio) {
    pthread_t id;
    int ret = pthread_create(&id, NULL, (void *)getCpuUsage, NULL);
    if (ret!=0) printf("thread error!");

    /*while (1) {
        // if current cpu usage is higher than ration, make it asleep
        if (cpuUsage > ratio) {
            usleep(10);
        }
    }*/

    pthread_join(id, NULL);
} 
```

* * *

代码 3

```
void run() {
    const clock_t busyTime = 10;
    const clock_t idleTime = busyTime;

    while (1) {
        clock_t startTime = clock();
        while (clock() - startTime <= busyTime);
        usleep(idleTime);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:22:13.367

> 多线程C程序中的共享字段是否大量使用CPU？

是的，多个 CPU 上的多个线程对共享内存位置的持续读取/写入会导致缓存线在 CPU 之间不断移动（缓存反弹）。IMO，这是幼稚的“并行”应用程序可扩展性差的最重要原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:23:08.073

好的。Code1 创建了一个线程，该线程尽可能快地执行 popen。所以这个线程用完了所有的cpu时间。另一个线程（主线程）确实在睡觉，但不是正在弹出的线程......

Code2 还启动这个使用 cpu 的线程，然后等待它完成（加入），这永远不会发生。

Code3 运行一段时间，然后休眠相同的时间，所以它应该用完大约 50%。

所以基本上你应该做什么（如果你真的想使用 top 来达到这个目的），你调用它，然后休眠让我们说 1 秒或 100 毫秒，看看你在 code1 中的主循环是否调整。

```
while (1) {
    usleep (100*1000);
    out = popen(CPU_COMMAND, "r"); 
```

# ios - UISlider 不更新

> ID：13531664
> 
> 赞同：3
> 
> 时间：2012-11-23T15:09:16.733
> 
> 标签：ios, objective-c

我正在尝试为分配的音乐播放器编写代码，但我一直在尝试让滑块在歌曲播放时更新。我已经做到了，如果用户滑动滑块，歌曲将快退/快进到歌曲的那部分。有谁知道为什么在播放歌曲时滑块不会不断更新？

这是.h文件

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
#import <MediaPlayer/MediaPlayer.h>

@interface AS3MPViewController : UIViewController <MPMediaPickerControllerDelegate>{
    IBOutlet UIButton *playButton;
    IBOutlet UIButton *stopButton;
    IBOutlet UIButton *pauseButton;
    IBOutlet UISlider *volumeSlider;
    AVAudioPlayer *musicPlayer;
    IBOutlet UIButton *pickSongButton;
    IBOutlet UISlider *timeSlider;
    NSTimer *timer;
}

@property (nonatomic, retain) UIButton *playButton;
@property (nonatomic, retain) UIButton *stopButton;
@property (nonatomic, retain) UIButton *pauseButton;
@property (nonatomic, retain) UISlider *volumeSlider;
@property (nonatomic, retain) AVAudioPlayer *musicPlayer;
@property (nonatomic, retain) UIButton *pickSongButton;
@property (nonatomic, retain) UISlider *timeSlider;
@property (nonatomic, retain) NSTimer *timer;

- (IBAction) play;
- (IBAction) stop;
- (IBAction) pause;
- (IBAction) changeVolume: (UISlider *)sender;
- (IBAction) chooseSong: (UIButton *)sender;
- (IBAction) changeTime: (UISlider *)sender;
- (void)setTimeSliderOptions;

@end 
```

这是.m文件

```
#import "AS3MPViewController.h"

@interface AS3MPViewController ()

@end

@implementation AS3MPViewController

@synthesize playButton = _playButton;
@synthesize stopButton = _stopButton;
@synthesize pauseButton = _pauseButton;
@synthesize musicPlayer = _musicPlayer;
@synthesize volumeSlider = _volumeSlider;
@synthesize pickSongButton = _pickSongButton;
@synthesize timeSlider = _timeSlider;
@synthesize timer;

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"animals001"     ofType:@"mp3"];

    NSURL *fileURL = [[NSURL alloc] initFileURLWithPath:filePath];

    self.musicPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:nil];

    [self.musicPlayer prepareToPlay];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction) play {
    [self.musicPlayer play];

}

- (IBAction) stop {
    [self.musicPlayer stop];
    self.musicPlayer.currentTime = 0;
}

- (IBAction) pause {
    [self.musicPlayer pause];
}

- (IBAction) changeVolume: (UISlider *)sender {
    self.musicPlayer.volume = [sender value];
}

- (IBAction)chooseSong:(UIButton *)sender {
    MPMediaPickerController *mediaPicker = [[MPMediaPickerController alloc] initWithMediaTypes:MPMediaTypeAnyAudio];

    [mediaPicker setDelegate:self];
    [mediaPicker setAllowsPickingMultipleItems:NO];

    mediaPicker.prompt = NSLocalizedString(@"Add Some Songs To Play", "Prompt In Media Item Picker");

    [self presentModalViewController: mediaPicker animated:YES];
}

- (void) mediaPickerDidCancel:(MPMediaPickerController *)mediaPicker {
[self dismissModalViewControllerAnimated:YES];
}

- (void) mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:    (MPMediaItemCollection *)mediaItemCollection {

    MPMediaItem *item = [[mediaItemCollection items] objectAtIndex:0];
    NSURL *url = [item valueForProperty:MPMediaItemPropertyAssetURL];

    //AVPlayerItem *playerItem = [[AVPlayerItem alloc] initWithURL:url];
    //AVPlayer *player = [[AVPlayer alloc] initWithPlayerItem:playerItem];

    self.timeSlider.maximumValue = [self.musicPlayer duration];

    self.musicPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];

    [self.musicPlayer play];

    timer = [NSTimer scheduledTimerWithTimeInterval:0.1f target:self selector:@selector(songCurrentTime) userInfo:nil repeats:YES];

    [self dismissModalViewControllerAnimated:YES];
}

- (IBAction)changeTime: (UISlider *)sender {
    self.musicPlayer.currentTime = self.musicPlayer.duration * sender.value;
}

- (void)songCurrentTime {
    timeSlider.value = (self.musicPlayer.currentTime / self.musicPlayer.duration);
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T16:30:04.653

检查您已将 IBAction 方法与带有 ValueChanged EX 的滑块连接的连接：

```
- (IBAction)changeTime: (UISlider *)sender { 
```

在 IB 连接时检查此方法是否与 ValueChanged 连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:35:20.343

我认为您的问题是您正在从主线程以外的线程更新滑块的值。尝试修改 songCurrentTime 方法，使其在主线程上调用另一个更新滑块值的方法。

```
- (void)songCurrentTime {
[self performSelectorOnMainThread:@selector(songCurrentTimeMain) withObject:nil waitUntilDone:YES];
}

- (void)songCurrentTimeMain {
timeSlider.value = (self.musicPlayer.currentTime / self.musicPlayer.duration);
} 
```

当然，要获得正确的结果，请确保滑块的最小值为 0，最大值为 1。

此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:51:15.660

`timeSlider`和`self.timeSlider`不是一回事。您声明的大多数 iVar 都是不必要的（并且具有误导性），因为您使用属性名称的下划线形式来合成您的属性。例如，您有一个`timeSlider`由`_timeSlider`iVar 支持的属性，而`timeSlider`iVar 则完全不同。

使用`self.timeSlider.value = ...`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T15:16:54.370

设置滑块值时，该值始终小于或等于 1，因为`self.musicPlayer.currentTime`始终小于或等于`self.musicPlayer.duration`。相反，试试这个

```
timeSlider.value = self.musicPlayer.currentTime; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T15:23:57.763

我在[本](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-music-library-access/)教程中做了类似的事情，我添加滑块的方式与您所做的相同，除了我使用了

**musicPlayer.currentPlaybackTime**

作为分配给滑块的值。

(self.musicPlayer.currentTime / self.musicPlayer.duration) 的结果可能是对您的滑块值的不准确分配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-12T14:57:32.437

对我来说，问题不同，我需要为滑块设置初始值，但在设置最大值和最小值之前更新滑块值是一个愚蠢的错误。

错误代码 ：

```
float value = [self getSliderDefaultValue];
[slider setValue:value animated:NO];
slider.maximumValue = numberOfSteps;
slider.minimumValue = 0; 
```

工作代码：

```
slider.maximumValue = numberOfSteps;
slider.minimumValue = 0;
float value = [self getSliderDefaultValue];
[slider setValue:value animated:NO]; 
```

希望它会帮助别人！！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-12T21:12:41.147

在我的情况下，我的 UISlider 上有透明的视图，我俯瞰着它。

# .net - 如何使用 NHibernate 从 SAS 读取数据集？

> ID：13531668
> 
> 赞同：0
> 
> 时间：2012-11-23T15:09:32.157
> 
> 标签：.net, nhibernate, sas

我需要将数据集从 SAS 读取到 .NET 应用程序中，最好是通过 NHibernate。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:35:33.310

对 NHibernate 一无所知，但通过 .NET 访问 SAS 数据集通常是通过 OLEDB 连接或 ADO（或 ADO.NET）完成的。SAS 文档包含必要的信息，例如参见 [http://support.sas.com/documentation/cdl/en/oledbpr/63701/HTML/default/viewer.htm#titlepage.htm](http://support.sas.com/documentation/cdl/en/oledbpr/63701/HTML/default/viewer.htm#titlepage.htm)

所有这些都需要在您从中读取它们的机器（或您可以连接到的机器）上安装 SAS。

Alan Churchhill (http://savian.net/) 还编写了一个不需要安装 SAS 的 .NET 阅读器，但它不是免费的。

# ios6 - iOS 6：扫描 Wifi 信息

> ID：13531670
> 
> 赞同：2
> 
> 时间：2012-11-23T15:09:34.270
> 
> 标签：ios6, wifi

我想检索有关 iPad 应用程序中当前可用接入点的信息。据我所知，有一种方法可以通过越狱设备实现这一点（参见[iOS wifi scan, signal strength](https://stackoverflow.com/questions/12054818/ios-wifi-scan-signal-strength)）。

由于我使用的是iOS 6，我想知道是否有人知道是否可以在*不越狱*设备的情况下在iOS 6中完成对wifi信息的扫描？

# javascript - 可以检查网络请求是来自点击还是在地址栏中输入？| Chrome 扩展程序

> ID：13531671
> 
> 赞同：1
> 
> 时间：2012-11-23T15:09:36.503
> 
> 标签：javascript, google-chrome, google-chrome-extension

是否可以检查是否有人单击了网站上的链接，或者将其键入地址栏中并按 Enter。

可能有一面旗帜或其他东西吗？

我需要在 chrome.webRequest.onBeforeRequest.addListener() 中执行此操作

# java - 为什么@Deprecated 在这里不起作用？

> ID：13531672
> 
> 赞同：2
> 
> 时间：2012-11-23T15:09:53.787
> 
> 标签：java, annotations

我有一个这样的java程序：

```
public class Demo {
        /**
         * @deprecated use of func is discouraged.
         */
        @Deprecated
        static void func() {}

        public static void main(String[] args){
                func();
        }
} 
```

为什么当我尝试使用 编译它时`javac`，它没有给我任何警告。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T15:12:39.903

[http://docs.oracle.com/javase/7/docs/technotes/guides/javadoc/deprecation/deprecation.html](http://docs.oracle.com/javase/7/docs/technotes/guides/javadoc/deprecation/deprecation.html)

它说

> 使用注释会导致 Java 编译器在使用已弃用的类、方法或字段时生成警告。如果不推荐使用的编译单元使用不推荐使用的类、方法或字段，编译器会抑制不推荐使用的警告。这使您能够构建旧版 API 而不会生成警告。

如果你编译你的类，你会看到你正在使用一个不推荐使用的方法。问题是当您编译使用不推荐使用的方法的类时。

# python - execfile 在它的工作目录中来自其他文件

> ID：13531673
> 
> 赞同：1
> 
> 时间：2012-11-23T15:10:02.483
> 
> 标签：python, python-import, working-directory, execfile

我有这样的结构：

```
c
|-myMain.py
|-.....\someDir
              |-startup.py
              |-subDir
                     |-x.py 
```

我发现了几个类似的问题，答案让我想到了这一点：

```
#myMain.py
import os
if __name__ == '__main__':
    os.chdir("c:\\......\\someDir")
    execfile("startup.py")

#startup.py
from subDir import x
if __name__ == '__main__':
    x.doSomething() 
```

问题是当我运行 myMain.py 时，startup.py 中的导入失败：

```
ImportError: No module named subDir 
```

但是，当我直接运行 startup.py 时它可以工作。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:14:56.893

为了让 python 被`subDir`视为有效的 python 结构，您必须将其设为[package](http://docs.python.org/2/tutorial/modules.html#packages)。`__init__.py`您可以通过在该目录中包含一个文件来使其成为一个包。该文件可以为空。

一旦`subDir`有了这样的文件，该语句`from subDir import x`应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T21:56:37.740

未来的读者：

Pradyumna[从这里](https://stackoverflow.com/a/14094933/7656164)的回答为我解决了这个问题：

> 导入 sys，通过在运行时附加路径来更改“sys.path”，然后导入有帮助的模块

[即 sys.path.append(execfile 的目录)]

# windows - STDIN_FILENO 在 Windows 中未声明

> ID：13531677
> 
> 赞同：6
> 
> 时间：2012-11-23T15:10:41.013
> 
> 标签：windows, compiler-errors, stdin

我有一些代码使用在 Linux 中编译和运行良好的 select 函数。但我正在尝试将其移植到 Windows 并收到此错误，我不知道如何处理。它说

```
STDIN_FILENO: undeclared identifier 
```

我无法为此提出或找到任何解决方案。有没有办法让 STDIN_FILENO 在 Windows 中工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-20T18:31:52.903

[MSDN 建议](http://msdn.microsoft.com/en-us/library/zs6wbdhx.aspx)使用`_fileno(stdin)`, where`_fileno`在`<stdio.h>`.

但是请注意：

> 如果**stdout**或**stderr**不与输出流相关联（例如，在没有控制台窗口的 Windows 应用程序中），则返回的文件描述符为 -2。在以前的版本中，返回的文件描述符是 -1。此更改允许应用程序将此情况与错误区分开来。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T15:19:59.643

STDIN_FILENO 是标准 POSIX 的定义，

试试0！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T09:32:33.067

我很抱歉这么晚才回答，但我已经`unistd.h`在 gcc 编译器上解决了这个问题。所以，尝试添加

```
#include <unistd.h> 
```

有用的参考[链接](http://pubs.opengroup.org/onlinepubs/7908799/xsh/unistd.h.html)。

# c++ - OpenCV 凹槽检测

> ID：13531682
> 
> 赞同：8
> 
> 时间：2012-11-23T15:11:04.300
> 
> 标签：c++, opencv, image-processing, line, mathematical-morphology

![在此处输入图像描述](../Images/cbf3148a21f08e28b42ec056eb9056aa.png)我有一张有很多凹槽的表面的照片。在大多数情况下，凹槽的边缘形成平行线，因此 Canny 和 Hough 变换可以很好地检测线并进行一些表征。然而，在几个地方，凹槽被损坏，边缘不再平行。

我正在寻找一种简单的方法来检查某个边缘是否是直线，或者是否与直线有任何间隙或偏差。我正在考虑线性插值中的 R 平方参数之类的东西，但在这里我需要一个更依赖于位置的参数。您还有其他想法如何表征边缘吗？

我附上了一张精巧边缘检测后的开槽图片。在这里，边缘是直线，开槽很好。不幸的是，我目前无法获得凹槽损坏的图片。但是，在凹槽损坏的图片中，线条会有很大的间隙（至少是图片大小的 10%）或不平行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T03:15:16.657

**我在下面分享**的技术的核心是**[`cv::HoughLinesP()`](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html?highlight=houghlinesp#houghlinesp)用于在灰度图像中查找线段。**

 **应用程序首先将输入图像加载为灰度。然后它执行基本的预处理操作以增强图像的某些特征，旨在改善通过以下方式执行的检测`cv::HoughLinesP()`：

```
#include <cv.h>
#include <highgui.h>

#include <algorithm>

// Custom sort method adapted from: http://stackoverflow.com/a/328959/176769
// This is used later by std::sort()
struct sort_by_y_coord 
{
    bool operator ()(cv::Vec4i const& a, cv::Vec4i const& b) const 
    {
        if (a[1] < b[1]) return true;

        if (a[1] > b[1]) return false;

        return false;
    }
};

int main()
{
    /* Load input image as grayscale */

    cv::Mat src = cv::imread("13531682.jpg", 0);

    /* Pre-process the image to enhance the characteristics we are interested at */

    medianBlur(src, src, 5);

    int erosion_size = 2;
    cv::Mat element = cv::getStructuringElement(cv::MORPH_CROSS,
                                       cv::Size(2 * erosion_size + 1, 2 * erosion_size + 1),
                                       cv::Point(erosion_size, erosion_size) );
    cv::erode(src, src, element);
    cv::dilate(src, src, element);

    /* Identify all the lines in the image */

    cv::Size size = src.size();
    std::vector<cv::Vec4i> total_lines;
    cv::HoughLinesP(src, total_lines, 1, CV_PI/180, 100, size.width / 2.f, 20);

    int n_lines = total_lines.size();
    std::cout << "* Total lines: "<< n_lines << std::endl;

    cv::Mat disp_lines(size, CV_8UC1, cv::Scalar(0, 0, 0));

    // For debugging purposes, the block below writes all the lines into disp_lines
    // for (unsigned i = 0; i < n_lines; ++i)
    // {
    //     cv::line(disp_lines, 
    //              cv::Point(total_lines[i][0], total_lines[i][2]),
    //              cv::Point(total_lines[i][3], total_lines[i][4]), 
    //              cv::Scalar(255, 0 ,0));
    // }
    // cv::imwrite("total_lines.png", disp_lines); 
```

此时，检测到的所有线段都可以写入文件以进行可视化：

![](../Images/b74164df36c1886cb8d630f9a264b841.png)

在这一点上，我们需要对我们的线向量进行排序，因为`cv::HoughLinesP()`不这样做，并且我们需要排序的向量能够通过测量和比较线之间的距离来识别线组：

```
 /* Sort lines according to their Y coordinate. 
       The line closest to Y == 0 is at the first position of the vector.
    */

    sort(total_lines.begin(), total_lines.end(), sort_by_y_coord());

    /* Separate them according to their (visible) groups */ 

    // Figure out the number of groups by distance between lines
    std::vector<int> idx_of_groups;   // stores the index position where a new group starts
    idx_of_groups.push_back(0); // the first line indicates the start of the first group 

    // The loop jumps over the first line, since it was already added as a group
    int y_dist = 35; // the next groups are identified by a minimum of 35 pixels of distance  
    for (unsigned i = 1; i < n_lines; i++)  
    {
        if ((total_lines[i][5] - total_lines[i-1][6]) >= y_dist) 
        {
            // current index marks the position of a new group
            idx_of_groups.push_back(i); 
            std::cout << "* New group located at line #"<< i << std::endl;           
        }
    }

    int n_groups = idx_of_groups.size();
    std::cout << "* Total groups identified: "<< n_groups << std::endl; 
```

上面代码的最后一部分只是将行向量的索引位置存储在一个新的行中，`vector<int>`这样我们就知道哪些行开始一个新的组。

例如，假设存储在新向量中的索引是：`0 4 8 12`。请记住：它们定义了每个组的*开始*。这意味着组的结束行是：`0, 4-1, 4, 8-1, 8, 12-1, 12`。

知道了这一点，我们编写以下代码：

```
 /* Mark the beginning and end of each group */

    for (unsigned i = 0; i < n_groups; i++)  
    {
        // To do this, we discard the X coordinates of the 2 points from the line, 
        // so we can draw a line from X=0 to X=size.width

        // beginning
        cv::line(disp_lines, 
                 cv::Point(0, total_lines[ idx_of_groups[i] ][7]),
                 cv::Point(size.width, total_lines[ idx_of_groups[i] ][8]), 
                 cv::Scalar(255, 0 ,0));

        // end      
        if (i != n_groups-1)
        {
            cv::line(disp_lines, 
                     cv::Point(0, total_lines[ idx_of_groups[i+1]-1 ][9]),
                     cv::Point(size.width, total_lines[ idx_of_groups[i+1]-1 ][10]), 
                     cv::Scalar(255, 0 ,0));
        }
    }
    // mark the end position of the last group (not done by the loop above)    
    cv::line(disp_lines, 
             cv::Point(0, total_lines[n_lines-1][11]),
             cv::Point(size.width, total_lines[n_lines-1][12]), 
             cv::Scalar(255, 0 ,0));

    /* Save the output image and display it on the screen */

    cv::imwrite("groups.png", disp_lines);

    cv::imshow("groove", disp_lines);
    cv::waitKey(0);
    cv::destroyWindow("groove");

    return 0;
} 
```

结果图像是：

![](../Images/6c1df76c373ce3b3c55aeac2a5113662.png)

**这不是一个完美的匹配**，但它很接近。在这里和那里进行一些调整，这种方法可以变得更好。我将首先为 编写一个更智能的逻辑`sort_by_y_coord`，它应该丢弃 X 坐标之间距离较小的线（即小线段），以及在 X 轴上未完全对齐的线（如第二组中的线）输出图像）。在您花时间评估应用程序生成的第一张图像之后，此建议更有意义。

祝你好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T18:00:12.530

立即想到的是[霍夫变换](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html)。这是行空间中的投票方案，它采用每条可能的行并给你一个分数。在我上面链接的代码中，您可以简单地设置一个阈值，该阈值大约为搞砸凹槽/线条的 10%。**

# jquery - jQuery load() 和 SEO - 导航的硬链接

> ID：13531684
> 
> 赞同：2
> 
> 时间：2012-11-23T15:11:19.997
> 
> 标签：jquery, seo, load

想象一个完全静态的网站，它使用 jQuery .load() 在每个页面上包含网站的主导航：

page1.html、page2.html、page3.html、... page100.html、nav.html（网站导航html）

使用 jQuery 加载主导航可能有利于可管理性（只需编辑一个包含的文件“nav.html”，重复代码较少）但不利于 SEO（爬虫无法在 page1.html、page2.html 等上看到导航）因此无法抓取该网站）。

这是我的问题：如果在每个页面上都有一个指向“nav.html”的硬编码链接，这会帮助爬虫找到网站导航并解决 SEO 问题吗？假设我们不能使用 php 或任何其他服务器端选项来包含 html。爬虫是否需要直接链接到另一个页面而不是过渡页面（在本例中为 nav.html）？爬虫会迷路吗？？

干杯。

P。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:21:21.190

按照 user1394965 的建议查看渐进式增强，或者，查看这篇很棒的文章，教我们使用 pushstate 或 history.js 来使用 ajax 内容，同时可被 google 抓取：D

[http://html5.gingerhost.com/](http://html5.gingerhost.com/)

我与那个网站无关，只是把它加了书签，因为发现它非常容易理解。

# java - 调用基础重绘方法？

> ID：13531688
> 
> 赞同：1
> 
> 时间：2012-11-23T15:11:30.963
> 
> 标签：java, user-interface, overriding, method-hiding

我有两节课：

```
public abstract class A extends JPanel {

    @Override
    public void repaint() {
        super.repaint();
        //my own implementation of A repaint
    }

    private void method2() {
         //I need to call the repaint method of A here
    }

}

public class B extends A {

    @Override
    public void repaint() {
        super.repaint();
        //my own implementation of B repaint
    }
} 
```

在简短的搜索中，我发现无法从基类调用基覆盖方法，问题是，如何在 A 中调用 A 的`repaint`方法？我知道 a 可以创建基本方法，而另一种方法可以显式扩展，如此处所述，但是，因为[这](http://bytes.com/topic/c-sharp/answers/598200-overriding-methods-but-force-base-classs-method-called)是一个必须对所有孩子通用的方法，才能遵循 java 设计模式，并且最最重要的是，如果另一个程序员继续我的工作，他会寻找重绘方法，有什么建议吗？

**编辑：**对不起，我忘了提到 A 类是抽象的，所以 A 的所有实例也是 B （想象一下，A 类的孩子更多，所以我不能完全在 B 中完成实现，因为我需要 A) 的所有子项中的这种行为，而且，我需要这样做是因为我需要在执行的某些部分刷新 A 的视图，但我只想绘制 A 的相应部分而不刷新这些孩子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:16:28.160

我建议您不要覆盖该`repaint()`方法。您可能想要做的是实际覆盖该`paint(Graphics g)`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:24:42.780

```
public abstract class A extends JFrame {

    @Override
    public void repaint() {
        myRepaint();
    }

    private void myRepaint() {
        super.repaint();
        //my own implementation of A repaint
    }

    private void method2() {
         myRepaint();
    }

}

public class B extends A {

    @Override
    public void repaint() {
        super.repaint();
        //my own implementation of B repaint
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:25:48.900

无法显式调用您的 impl 是一件好事。它允许子类根据自己的需要更改 impl。允许它会破坏 java 的整个 OO 设计。

但是，您可以这样做：

```
public void repaint() {
    repaintImpl();
}

private void repaintImpl() {
    // whatever
} 
```

并调用`repaintImpl()`您想要“调用基本重绘方法”的位置。

# ios - MonoTouch 应用程序 iOS 使用 Xcode 签名

> ID：13531689
> 
> 赞同：2
> 
> 时间：2012-11-23T15:11:31.147
> 
> 标签：ios, xcode, xamarin.ios, signing

我有个问题。我用 MonoTouch 开发了一个 iOS 应用程序，太棒了！！！但现在我的客户问我想用他的证书签署他的应用程序。

有解决办法吗？有可能从 monotouch 创建一个 xcode 源？？？

我已经阅读了一个 –xcode 命令，但我发现了一个小文档

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:59:59.300

该`--xcode`选项已弃用。曾几何时，调试一些问题很有用，但今天存在更好的选择。

至于签名，您可以使用`codesign`命令行工具对应用程序进行（重新）签名。

例如，只需查看您的构建输出（来自 MonoDevelop 的错误列表板），即可查看 MonoDevelop 用于签署您的应用程序的确切命令行。您的客户只需要对选项进行细微调整即可重新签名。

# javascript - 为什么这个简单的切换不起作用？

> ID：13531690
> 
> 赞同：0
> 
> 时间：2012-11-23T15:11:32.400
> 
> 标签：javascript, jquery

好的，首先 - 它不是`toggle()`这样的。

这段代码应该像滑块一样工作。1 div 正在显示，单击一个按钮，下一个 div 显示，单击另一个按钮，第一个 div 显示。

到目前为止，这可行，但向后退却行不通。所以按钮可以显示第二个 div，但点击我制作的“更少”按钮只会使第二个 div 消失，而第一个 div 仍然隐藏。

这是代码：

```
$('.more').click(function() {
    $('.c1')
        .animate({ left: "-828px" }, 600, 'easeInOutQuint')
        .delay(300, function() {
            $('.c2').animate({ left: "0px" }, 600, 'easeInOutQuint'); 
        }
    );
});

$('.less').click(function() {
    $('.c2')
        .animate({ left: "828px" }, 600, 'easeInOutQuint')
        .delay(300, function(){
            $('.c1').animate({ left: "0px" }, 600, 'easeInOutQuint'); 
        }
    );
}); 
```

我错过了什么？我怎么能这样做，以便我基本上不会重复相同的代码两次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:16:22.357

您是否尝试过使用回调函数而不是延迟？

```
$('.more').click(function(){
    $('.c1').animate({ left:"-828px"}, 600, 'easeInOutQuint',function(){
       $('.c2').animate({left:"0px"}, 600, 'easeInOutQuint'); 
    });
});
$('.less').click(function(){
    $('.c2').animate({ left:"828px"}, 600, 'easeInOutQuint',function(){
       $('.c1').animate({left:"0px"}, 600, 'easeInOutQuint'); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:52:45.240

你对`.delay`.

在 jquery 文档中：

> 描述：设置一个定时器来延迟队列中后续项目的执行。

其参数为：`duration [, queueName]`.

另外，从[SO 回答](https://stackoverflow.com/a/8401335/310276)：

> delay() 函数仅适用于在元素上排队的操作

所以我认为你最好的选择是，正如@nicolast 所说，使用回调。[在这里](http://jsfiddle.net/jDFxN/3/)它正在工作。最后的代码是：

```
$('.more').click(function() {
    $('.c1')
        .animate({ left: "-400px" }, 600, function() {
            $('.c2').animate({ left: "0px" }, 600);
        }
    );
});

$('.less').click(function() {
    $('.c2')
        .animate({ left: "400px" }, 600, function(){
            $('.c1').animate({ left: "0px" }, 600);
        }
    );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:33:33.103

这重现作品。按下更多时：c1 变为 -100px，然后 c2 变为 0px 当按下更少时：c2 变为 100px，之后 c1 变为 0px

```
$('.more').click(function() {
    $('.c1')
    .stop()
    .animate({ left: "-100px" }, 600, 'linear')
    .delay(300, function() {
        $('.c2').stop().animate({ left: "0px" }, 600, 'linear'); 
    });
});

$('.less').click(function() {
    $('.c2')
    .stop()
    .animate({ left: "100px" }, 600, 'linear')
    .delay(300, function(){
        $('.c1').stop().animate({ left: "0px" }, 600, 'linear'); 
    });
}); 
```

# c++ - ZeroMQ 是否允许多个服务器套接字？

> ID：13531693
> 
> 赞同：4
> 
> 时间：2012-11-23T15:11:44.313
> 
> 标签：c++, networking, zeromq

本机 C 套接字 API 返回`accept()`一个新的套接字描述符，该描述符绑定到某个远程套接字。这很好，因为我可以创建一个线程，传递套接字并建立一个点对点，或者更好地通过互联网建立一个线程到线程的连接。这正是我想要的：来自客户端的一个线程应该连接到服务器上的一个目标线程。因此，我不需要工作池或负载平衡，甚至不需要异步操作。服务器线程保存历史。ZeroMQ 看起来很棒，但据我了解，它不会在接受时拆分套接字。

有没有办法与 ZerMQ 建立这种同步的线程对线程连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T06:59:10.033

您正在询问如何将特定解决方案（将套接字移交给线程）复制到更广泛的问题（如何编写可扩展的服务器）。

“每个套接字一个线程”设计仅适用于请求-答复的一种模式，例如 HTTP。而真正大量的用例是用于数据分发（发布-订阅）或任务分发（管道）。都不适合一对一的模型。

当你学习一个新工具时会问“这个工具如何做我的旧工具做的事情”，这是一个常见的错误，但你不会得到这样的好结果。相反，花时间实际了解该工具的工作原理，然后利用这些知识重新思考您的问题和最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:02:12.707

我以为 Zmq 会为你处理这个多重连接；我更喜欢通过在线程回调函数中处理连接来创建线程间通信，这意味着我的主 zmq 连接是在单独的线程中创建的；它可以在线程内进行单独的连接控制。

# vaadin - 使用 Vaadin 完全导出 CSV 文件后显示通知

> ID：13531696
> 
> 赞同：3
> 
> 时间：2012-11-23T15:11:57.263
> 
> 标签：vaadin, export-to-csv

我有以下代码：

```
Button export = new Button("CSV");
export.addListener(new ClickListener() 
{
    public void buttonClick(ClickEvent event) 
    {
        CsvExport csvExport;
        csvExport = new CsvExport(_table);
        csvExport.setDisplayTotals(false);
        csvExport.setDoubleDataFormat("0");
        csvExport.excludeCollapsedColumns();
        csvExport.setReportTitle("Document title");
        csvExport.setExportFileName("Nome_file_example.csv");
        csvExport.export();

        getWindow().showNotification("Document saved", "The document has been exported.");
    }
} 
```

我希望通知仅在文件导出和下载后出现，但实际上通知不起作用，可能是因为它没有“等待”声明

```
csvExport.export(); 
```

完成。如果我评论它，通知就会起作用。

有人有什么建议吗？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:25:40.340

您需要将工作拆分为一个单独的线程，然后提供一种“稍后”通知用户的方法。

所以，首先，创建一个线程......如果你在 Java EE 上，使用内置的线程池，否则使用其他东西（我们在 tomcat 上，我们推出了自己的，以便我们更好地控制）。

然后，当你完成后，同步你的线程，回到你的 UI 类（我们使用 Groovy 的闭包，但你可以创建你自己的监听器），并调用该方法来通知你的用户。`window.showNotification('All Done')`

所以这是棘手的部分，你已经通知了你的用户，但是 Vaadin 已经发回了“点击”响应......所以服务器部分认为它已经通知了用户，但它还不能向用户显示...... . 您的页面上需要一个[进度指示器](http://demo.vaadin.com/sampler#ProgressIndicators)，因为它每 5 秒询问服务器是否有任何更改。

还有一些[“推送”插件](https://www.google.com/search?q=vaadin%20push)，但我发现我们正在启动线程的大多数地方，我们想要显示“加载”动画，所以进度指示器效果很好。

# mysql - 获得最后插入的最有效方法

> ID：13531698
> 
> 赞同：0
> 
> 时间：2012-11-23T15:12:07.557
> 
> 标签：mysql, sql, performance

这两种方法中哪一种更有效地从大型帐户表中检索 account_balance？

```
SELECT account_balance FROM accounts 
    WHERE account_no ='12345' 
    AND transaction_date =(SELECT MAX(transaction_date) FROM accounts);

SELECT account_balance FROM accounts 
    WHERE account_no ='12345'
    ORDER BY transaction_date DESC LIMIT 1 
```

或者如果有比这两个更好的方法，我想知道。

编辑： transaction_date 实际上是一个时间戳。不知道一开始对你们来说是不是很明显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:18:39.250

根据您检索的信息的重要性，您可能还需要使用表锁。这将确保在获取最新行时不会发生其他事务。

在效率方面，我会选择前一个查询（`account_no`在子查询中并假设它`transaction_date`是唯一的），因为后者很可能需要一个文件排序（除非你有一个索引`transaction_date`是有序的`DESC`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:20:24.627

首先，您应该运行`EXPLAIN`您的查询以找出 MySQL 如何“攻击”问题。

假设它`transaction_date`是索引的（按降序排列），后一个选项更快，因为它避免了对同一个表的（独立）子查询。否则，如果您将 account_no 条件移动到子查询中，前者会更快。

# javascript - 像windows 8一样在css中拆分报纸栏

> ID：13531699
> 
> 赞同：2
> 
> 时间：2012-11-23T15:12:08.937
> 
> 标签：javascript, html, css, layout

我正在构建一个没有滚动条的交互式 Web 应用程序，它看起来像 Windows 8 的现代 UI。我使用[http://metroui.org.ua/](http://metroui.org.ua/)来构建布局。但是有一个问题，我想建立报纸栏目布局（可能是3），这里描述：

*   当我添加一个块（正方形或水平矩形）时，在 1 列中显示为线性布局（从左到右，从上到下）。最重要的是，当一列已满时，该块将被添加到下一列。
*   我尝试使用 3 个 div，但我无法自动将块移动到下一列（不使用 javascript）。

谁能给我一些解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:34:20.523

老实说，它并不清楚你在这里问什么。您提供的模板链接是响应式的并使用媒体查询，如果您向此布局添加新列，您需要了解这一切是如何工作的，我认为这里的问题是您不知道！？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:29:10.427

CSS3 提供了一种将任何 HTML 节点的内容转换为任意数量的列的方法。有用于控制列数及其宽度、相对高度（“填充”或内容如何在现有列之间划分）、列之间的间距、“规则”（分隔线或边框）等的属性。

作为起点，请参阅[w3schools.com CSS3 多列](http://www.w3schools.com/css3/css3_multiple_columns.asp)参考页面。

但是，像往常一样，在广泛使用的浏览器中，仅 IE 不支持 column-CSS3 属性。

一种跨浏览器解决方案是[Columnizer jQuery 插件](http://welcome.totheinter.net/columnizer-jquery-plugin/)。

# javascript - 带有javascript模板的jquery mobile multipage，并不总是“刷新”

> ID：13531701
> 
> 赞同：0
> 
> 时间：2012-11-23T15:12:24.037
> 
> 标签：javascript, jquery-mobile, handlebars.js

我有一个多页 jQuery 移动页面。

当我从第 1 页转到第 2 页时，我看到了我使用把手动态创建的模板。

模板：

```
<script id="history-template" type="text/x-handlebars-template">
        <div data-role="collapsible" id="share_history" >
       <h3>{{share_title}}</h3>
       {{#each historyItem}}
          <h2>Shared with {{shared_with}}</h2>
          {{#list people}}{{firstName}} {{lastName}}, {{role}}{{/list}}
      {{/each}}
    </div>
</script> 
```

的JavaScript：

```
var context = {
    share_title: "View Share History",
    historyItem:  [
            {
                shared_with: "with a group",
                people: [
                    {firstName: "Bob", lastName: "Wong", role: "Dad" },
                    {firstName: "Tina", lastName: "Turner", role: "Guardian" },
                    {firstName: "Modest", lastName: "Mouse", role: "Dad" }
                ]
            },
            {
                shared_with: "with 3 people",
                people: [
                    {firstName: "Baily", lastName: "Wong", role: "Dad" },
                    {firstName: "Gina", lastName: "Turner", role: "Guardian" },
                    {firstName: "Modest", lastName: "Mouse", role: "Dad" }
                ]
            }
        ]

};

var source   = $("#history-template").html();
var template = Handlebars.compile(source);

Handlebars.registerHelper('list', function(people, options) {
var out = "<ul class=>";

for(var i=0, l=people.length; i<l; i++) {
out = out + "<li>" + options.fn(people[i]) + "</li>";
}

return out + "</ul>";
});

    var html    = template(context);

    $('#share').html(html);
$.mobile.changePage('#add-edit'); 
```

当我从第 1 页转到第 2 页（在我的多页布局中）时，它可以工作（很好）。

**但是**，如果我单击后退按钮，**然后**返回到第 2 页，我会看到我的内容...减去 jQuery mobile 添加的附加标记（即我看到内容但看不到我的 jQuery mobile 外观/主题）。

**编辑**

对于我的示例，我必须执行以下操作：

```
$('#share').html(html).trigger( "create" ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:14:43.277

您需要在 html 元素上触发 create 事件，例如

```
el.trigger('create'); 
```

# r - 基于athor列在R中搜索df列

> ID：13531702
> 
> 赞同：1
> 
> 时间：2012-11-23T15:12:28.030
> 
> 标签：r

df

```
App1             App2
PS(id-123)       id-345
HR(id-345)       id-789
Web(id-567)      id-123
Trading(id-789)  id-345 
```

ETC

数据框中的列没有排序，或者可能匹配也可能不匹配相同的行值。例如，在第一行，PS(id-123) 与 id-345 不匹配。App1 和 App2 上的值可自由输入。

我需要通过 App2，如果 App2 上的值与应用程序中括号之间的值匹配，则需要将 App2 中的值替换为 App1 中的值。

这就是我最终的 df 应该是什么样子：

```
App1             App2      App3
PS(id-123)       id-345    HR(id-345)
HR(id-345)       id-789    Trading(id-789)
Web(id-567)      id-123    PS(id-123)
Trading(id-789)  id-345    HR(id-345) 
```

根据来自 Apps2 的值搜索 App1，如果匹配，则将值放入 App3 列？

任何想法如何在 R 中解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T15:26:07.403

这很简短，适用于您当前的数据：

```
transform(df, App3 = App1[sapply(App2, grep, App1)])
#              App1   App2            App3
# 1      PS(id-123) id-345      HR(id-345)
# 2      HR(id-345) id-789 Trading(id-789)
# 3     Web(id-567) id-123      PS(id-123)
# 4 Trading(id-789) id-345      HR(id-345) 
```

为了使它更健壮一点，您可以将`App2`上面替换为`paste0("(", App2, ")")`，也可以替换`sapply`为`vapply`和预期的输出：`integer(1)`.

**编辑：**

由于似乎某些 id 没有匹配项，因此基于的方法`match`可能更合适：

```
transform(df, App3 = App1[match(App2, sub(".*\\((id-.+)\\)", "\\1", App1))]) 
```

where`sub(".*\\((id-.+)\\)", "\\1", App1)`用于从`App1`列中提取有趣的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:49:11.357

弗洛德尔的更优雅，但这可能有助于理解这些步骤。

```
> idx <- sapply(dat$App2, function(x) grep(x, dat$App1) )
> dat$App3b <- dat$App1[idx]
> dat
             App1   App2            App3           App3b
1      PS(id-123) id-345      HR(id-345)      HR(id-345)
2      HR(id-345) id-789 Trading(id-789) Trading(id-789)
3     Web(id-567) id-123      PS(id-123)      PS(id-123)
4 Trading(id-789) id-345      HR(id-345)      HR(id-345) 
```

# html - 将横幅定位在网站左侧并将横幅与内容对齐

> ID：13531704
> 
> 赞同：0
> 
> 时间：2012-11-23T15:12:33.587
> 
> 标签：html, css, banner

我将内容设置为 1024px 宽度并与中心对齐。现在我想要在左侧的横幅。因为横幅可以有不同的大小，所以我必须将横幅对齐到右侧。横幅用锚包裹着。在下面的示例中，我使用了 div 而不是图像。

HTML：

```
<div id="content">
    <div id="banner">
        <a href="#"><div id="background">banner</div></a>
    </div>
    <div id="maincontent">      
        SSSSSSSSSSSSSSSSSSSSSSSSS
        OOOOOOOOOOOOOOOOOOOOOOOOO
        MMMMMMMMMMMMMMMMMMMMMMMMM
        EEEEEEEEEEEEEEEEEEEEEEEEEEE
        CCCCCCCCCCCCCCCCCCCCCCCCC
        OOOOOOOOOOOOOOO
        NNNNNNNNNNNNNNNNNNNNNNN
        TTTTTTTTTTTTTTTTTTTTT
        EEEEEEEEEEEEEEEEEEEEE
        NNNNNNNNNNNNNNNNNNNNNNNNNN
        TTTTTTTTT
    </div>
</div> 
```

CSS：

```
#content {
  width: 400px;
  margin: 0 auto;    
  background-color: red;
  position: relative;
}

#background {
    width: 20px;
    height: 100px;    
    background-color: blue;
    color: white;
}

#banner{
    position: absolute;
    left: -200px;
    width: 200px;
    height: 100px;
    background-color: yellow;    
    text-align: right;
} 
```

[JSFiddle](http://jsfiddle.net/uwRRP/)

`text-align: right;`没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:15:46.067

从`width: 20px`_`#background`

# api - 在 node.js 中管理基于命令的 TCP 套接字 API 上的连接

> ID：13531708
> 
> 赞同：4
> 
> 时间：2012-11-23T15:12:51.253
> 
> 标签：api, node.js, sockets, asynchronous, tcp

我构建了一个基于 expresss.js 的 RESTful API，它使用 JSON 通过 TCP 套接字与远程服务器通信。请求的 URL 被转换为适当的 JSON 消息，打开一个新的 TCP 套接字并发送消息。然后，当收到来自同一连接的消息时，会触发一个事件，评估 JSON 回复并返回新的 JSON 消息作为 GET 请求的结果。

**可能的路径：**

1.  异步（当前正在使用）- 为每个请求打开与服务器的连接。
2.  同步 - 创建一个包含所有请求的队列并等待响应，阻塞代码。
3.  跟踪 - 一次发送所有请求并异步接收答案。在请求上使用跟踪器 ID 将每个请求与其答案相关联。

**最好的方向是什么？有没有解决这种应用程序的通用模式？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:53:45.827

# 1（异步，每个请求的新连接）可能是最容易实现的。

如果您想有效地重用套接字，您应该提出自己的“保持活动”机制 - 本质上是使用同一个套接字流式传输多个请求和答案。

我可能会使用双 CRLF ('\n\r\n\r') 作为每个 JSON 请求的分隔符，为每个请求触发一个“请求”事件，然后简单地异步写回答案。可以使用无定界符的流式传输，但当您从套接字接收到部分 JSON 字符串时，它需要额外的解析。

# android - 填充字符串数组 Android

> ID：13531712
> 
> 赞同：0
> 
> 时间：2012-11-23T15:13:19.780
> 
> 标签：android, json

我在填充字符串数组时遇到问题。我应该使用从数据库中获取的数据来填充它吗？数据提取的过程是有效的，正如 LogCat 所证明的那样，所以我认为问题出在填充上。这是Java代码片段。

```
 for(int i=0; i<jArray.length();i++){
   JSONObject json_data = jArray.getJSONObject(i);

   result_string =  json_data.getString("nome")+" "+json_data.getString("cognome")+ 
         ":presente "+json_data.getString("dettagli");
    farmacisti[i] = jArray.getString(i);
 } 
```

当我在 LogCat 中检查 string 中的内容时`stringaFarmacisti`，我得到了这个：

> [Ljava.lang.String; @ 4126d308

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:16:43.883

可能您需要用 result_string 填充数组...

```
for(int i=0; i<jArray.length();i++){
        JSONObject json_data = jArray.getJSONObject(i);

        result_string =  json_data.getString("nome")+" "+json_data.getString("cognome")+ ": presente "+json_data.getString("dettagli");

        farmacisti[i] = result_string;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:17:58.363

采用

```
System.out.println("farmacisti: " + Arrays.toString(farmacisti)); 
```

看看`farmacisti`数组里面有什么。

# php - 请为此启动设置有效的 PHP 可执行文件

> ID：13531714
> 
> 赞同：1
> 
> 时间：2012-11-23T15:13:26.153
> 
> 标签：php, eclipse

我刚刚开始使用 Eclipse 来开发 PHP。我做了本书中的第一个项目，在大家的帮助下进展顺利。

然后我打开了第二个项目。在尝试配置运行路径时（Eclipse 总是开始指向我的服务器的根目录），不知何故，我让 IDE 处于无法摆脱的状态。**当我尝试运行标题为“启动错误”**的项目时，它会弹出一个对话框，并在框中显示：**“请为此启动设置有效的 PHP 可执行文件”**。我认为这与我尚未使用的调试器有关。我的代码很简单，在文件一中：

```
<?php 
   include('helloObj.php');
   $hello= new hello();

   $hello->prntMessage();
?> 
```

在文件二中：

```
<?php 

class Hello {
    var $message;

    function __construct() {
        $this->message= "Hello World!";
    }

    /**
      * Function that prints the value of the instance variable 
      * $message
      */
    function prntMessage() {
        echo $this->message;
    }
}

?> 
```

这是从网络上的教程中复制的（并且在我的浏览器中运行良好），所以我认为这不是原因。

另外，如果有人能告诉我在 Eclipse 中配置 PHP 运行路径的推荐方法，我也将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T16:12:50.680

请执行下列操作：

1.  `Run -> Debug Configurations`

2.  选择您的 PHP 调试器。我选择了 XDebug

3.  找到您的 PHP 可执行文件 ( `php.exe`)。在 XAMPP 中，它位于`C:\xampp\php\php.exe`

4.  指向您的 PHP 文件。

5.  按底部的调试。

脚本应该运行。

# javascript - 改变主干视图

> ID：13531715
> 
> 赞同：0
> 
> 时间：2012-11-23T15:13:26.673
> 
> 标签：javascript, jquery, view, backbone.js

我有一个关于主干处理视图的方式的问题。假设我有以下代码：

```
<div id="container">
   <div id="header">
   </div>
</div> 
```

在此之后，我将标题更改为主干视图。

在完成视图并将另一个视图添加到同一个 div 之后，我现在如何再次从标题 div 中删除该视图？

我尝试只覆盖存储视图的变量。这导致视图被更改为新视图......但旧视图的所有事件处理程序仍将附加到它。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:18:19.270

[http://documentcloud.github.com/backbone/#View-setElement](http://documentcloud.github.com/backbone/#View-setElement)

这不会自动删除原始 div - 您会想以某种方式自己执行此操作，但是通过使用 setElement 您将视图的元素设置为您传递的任何内容..并且所有事件都将根据需要附加. 然后，您需要将该元素附加到它需要去的任何地方。

---让我们再试一次----

所以，首先要记住的是视图引用 DOM 元素。它们不是超级紧密绑定的。因此，您可以直接使用 $el 下的 jquery 对象。

```
var containerView = new ContainerView();

var headerView = new HeaderView();
var anotherHeaderView = new AnotherHeaderView();

containerView.$el.append(headerView.$el);
containerView.$el.append(anotherHeaderView.$el);

anotherHeaderView.$el.detach();

containerView.$el.prepend(anotherHeaderView.$el); 
```

或者您可以创建方法来为您控制它。

```
var ContainerView = Backbone.View.extend({
    addView: function (view) {
        var el = view;
        if(el.$el) { //so you can pass in both dom and backbone views
            el = el.$el;
        }
        this.$el.append(el);
    }
}); 
```

也许按视图顺序设置视图？

```
var ContainerView = Backbone.View.extend({
    initialize: function () {
        this.types = {};
    },
    addView: function (view, type) {
        var el = view;
        if(el.$el) { //so you can pass in both dom and backbone views
            el = el.$el;
        }
        this.types[type] = el;
        this.resetViews();
    },
    removeView: function (type) {
        delete this.types[type];
        this.resetViews();
    },
    resetViews: function () {
        this.$el.children().detach();
        _.each(['main_header', 'sub_header', 'sub_sub_header'], function (typekey) {
            if(this.types[typekey]) {
                this.$el.append(this.types[typekey]);
            }
        }, this);
    }
}); 
```

# python - Python 运行二进制文件并拦截文件写入（使用子进程）

> ID：13531716
> 
> 赞同：1
> 
> 时间：2012-11-23T15:13:27.017
> 
> 标签：python, subprocess

我有一个简单的命令行实用程序，可以在控制台和文件系统上产生输出。虽然我非常了解如何捕获控制台输出，但我不知道如何截取文件——我事先知道文件名。

我想在不接触文件系统的情况下将执行保持在“内存中”，因为我会立即解析和删除创建的文件，这会造成不必要的瓶颈（尤其是当我需要运行这个小工具数百万次时）。

所以，总而言之，我正在努力实现以下目标：

1.  使用 python 的[子进程运行二进制文件](http://docs.python.org/2/library/subprocess.html)
2.  捕获工具的输出和它创建的文件的内容（在当前工作目录中，预先知道名称）
3.  理想情况下，在不接触文件系统的情况下运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:17:31.310

由于您只需要支持 Linux，因此一种可能性是使用命名管道。这个想法是将输出文件预先创建为命名管道，并让您的进程从管道读取工具的输出。

例如，参见[命名管道简介](http://www.linuxjournal.com/article/2156)。

Python API 是[`os.mkfifo()`](http://docs.python.org/2/library/os.html#os.mkfifo).

# optimization - 在 numpy 中矢量化 linalg.eig()

> ID：13531717
> 
> 赞同：5
> 
> 时间：2012-11-23T15:13:27.853
> 
> 标签：optimization, numpy, linear-algebra

我有一个 m*m*n numpy 数组（称为 A），我想找到`A[:,:,n]`该数组中每个子矩阵的特征值。我可以`linalg.eig()`相对容易地在一个循环中做到这一点，但确实应该有一种方法来矢量化它。类似 a 的东西`ufunc`，但它可以处理子向量而不是单个元素。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:42:18.747

特征值和特征向量的计算不能向量化，因为通常没有办法为不同的矩阵共享工作。`np.linalg.eig`（对于真实输入）只是一个包装器[`dgeev`](http://www.netlib.no/netlib/lapack/double/dgeev.f)，根据文档，每次调用只接受一个矩阵，并且计算相当昂贵，因此对于不小的矩阵，python循环的开销可以忽略不计。

但是，如果您对许多非常小的矩阵执行此操作，它可能会变得太慢。有[几个](https://stackoverflow.com/q/13432129/1191119)与此相关的问题，解决方案通常最终是一个编译的扩展。正如 enigmaticPhysicist 在评论中所说，以与 ufunc 相同的方式处理子向量和子矩阵的想法通常会很有用。这些被称为通用 ufunc，并且已经在 numpy 的[开发版本](https://github.com/numpy/numpy/pull/3220)中。我发现形状矩阵的速度快了大约 8 倍`(1000, 3, 3)`：

```
In [2]: np.__version__
Out[2]: '1.8.0.dev-dcf7cac'

In [3]: A = np.random.rand(1000, 3, 3)

In [4]: timeit np.linalg.eig(A)
P100 loops, best of 3: 9.65 ms per loop

In [5]: timeit [np.linalg.eig(Ai) for Ai in A]
10 loops, best of 3: 74.6 ms per loop

In [6]: a1 = np.linalg.eig(A)

In [7]: a2 = [np.linalg.eig(Ai) for Ai in A]

In [8]: all(np.allclose(a1[i][j], a2[j][i]) for j in xrange(1000) for i in xrange(2))
Out[8]: True 
```

# jquery - 在 div 加载到 DOM 时使用微调器

> ID：13531719
> 
> 赞同：1
> 
> 时间：2012-11-23T15:13:35.673
> 
> 标签：jquery, jstree

> **可能重复：**
> [如何在 jQuery 中显示加载微调器？](https://stackoverflow.com/questions/68485/how-to-show-loading-spinner-in-jquery)

我有一个`div`里面有很多东西，并且不能顺利加载到 DOM 中。有没有一种方法可以像您在 AJAX 调用中看到的那样添加微调器？这是我当前的代码。

```
<h4>Network Printers</h4>
<div id="demo1" class="demo">
    <ul class="printer-tree">
        <li>Many List Items</li>
    </ul>
</div>
<div class="spinner" style="display:none;"></div> 
```

```
$(function () {
    $("#demo1").jstree({ 
        "plugins" : [ "themes", "html_data", "checkbox", "sort", "ui" ]
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:25:25.837

根据文档，您可以将事件绑定到树的创建，如下所示：

```
$(function () {

    $("div.spinner").show();

    $("#demo1").bind("loaded.jstree", function (event, data) {
        // tree has been loaded
        $("div.spinner").hide();
    }).jstree(
        { 
            "plugins" : [ "themes", "html_data", "checkbox", "sort", "ui" ]
        }
    );

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:17:29.160

我想你可以！

首先，您的语法似乎无效。div 的开始标签没有关闭；您缺少一个`>`.

您可以默认启用微调器，并在使用回调加载内容时禁用它。我对此一无所知，`jstree`但根据它的[文档](http://www.jstree.com/documentation/core)，您可以在某些方法中设置回调。

# node.js - node.js 套接字响应顺序和恢复套接字挂起

> ID：13531727
> 
> 赞同：4
> 
> 时间：2012-11-23T15:14:19.450
> 
> 标签：node.js, sockets, sqlite, sequence

通过套接字连接使用 node.js 查询 sqlite3 数据库时，我遇到以下 2 个问题：

1.  使用 node.js http 客户端我请求 node.js http 服务器，结果的顺序混淆了

2.  有时我的套接字挂断，它无法重现

这是服务器代码：

```
var http = require('http');
var url = require('url');
var sqlite3 = require('sqlite3').verbose();
var counter = 0;

//create sqlite database for testing
var db = new sqlite3.Database("db.sqlite3");
db.serialize(function() {
  db.run("DROP TABLE IF EXISTS test");
  db.run("CREATE TABLE IF NOT EXISTS test (ID INTEGER)");

  var stmt = db.prepare("INSERT INTO test VALUES (?)");
  for (var i = 1; i <= 10; i++) {
      stmt.run(i);
  }
  stmt.finalize();
});
db.close();

//run server
http.createServer(function (req, res) {

    var queryData = url.parse(req.url, true).query;
    res.writeHead(200, {"Content-Type": "text/plain; charset=utf-8"});//, "connection": "keep-alive"

    var db = new sqlite3.Database(new Buffer(queryData.SQLServerAddress, "base64").toString('utf8'));
    db.serialize(function() {
        db.each(new Buffer(queryData.SQLStatement, "base64").toString('utf8'), function(err, row) {
            counter++;
            console.log(counter + " / " + JSON.stringify(row));
            res.end(JSON.stringify(row).toString());
        });
    });
    db.close();
    counter = 0;
}).listen(1337, '127.0.0.1');

console.log('Server running...'); 
```

这是客户端代码：

```
var http = require('http');

for(i=1;i<=10;i++){
    var SQLServerAddress = new Buffer("db.sqlite3").toString('base64');
    var SQLStatement = new Buffer("SELECT * FROM test WHERE ID=" + i).toString('base64');

    var options = {
        host: "127.0.0.1",
        port: 1337,
        path: "/?SQLServerAddress=" + SQLServerAddress + "&SQLStatement=" + SQLStatement
    };

    callback = function(response){
        var str = "";
        response.on("data", function (chunk){
            str += chunk;
        });

        response.on("end", function (){
            console.log(str);
        });
    }
    http.request(options, callback).end();
} 
```

我将请求重复 10 次作为“压力测试”，有点……

所以我在控制台中收到的是例如

服务器端控制台：

```
1 / {"ID":1}
2 / {"ID":2}
3 / {"ID":5}
4 / {"ID":4}
1 / {"ID":3}
2 / {"ID":6}
1 / {"ID":7}
2 / {"ID":9}
3 / {"ID":10}
4 / undefined 
```

和客户端控制台：

```
{"ID":1}
{"ID":2}
{"ID":5}
{"ID":4}
{"ID":3}
{"ID":6}
{"ID":7}
{"ID":9}
{"ID":10}

events.js:68
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: socket hang up
    at createHangUpError (http.js:1263:15)
    at Socket.socketCloseListener (http.js:1314:23)
    at Socket.EventEmitter.emit (events.js:123:20)
    at Socket._destroy.destroyed (net.js:357:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我的问题是：

1.  如何以正确的顺序保持结果？
2.  我该怎么做才能防止套接字挂断？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:01:52.750

Node.js 是一个基于异步事件的环境。

因此，运行一个调用函数的 for 循环只是将这些函数添加到处理队列中，而不是等待它们完成。

因此，您的所有请求都是并行启动的，并且无法保证哪个会先结束/传输。如果要保证顺序，则必须同步传输请求。下面的代码未经测试，但您应该明白，只有在一个请求结束后才会启动下一个请求（这不是放在 for 循环中）。

```
var count = 0;
callback = function(response){
    var str = "";
    response.on("data", function (chunk){
        str += chunk;
    });

    response.on("end", function (){
        if (count++ < 10){
          http.request(options, callback).end();
        }
        console.log(str);
    });
}
http.request(options, callback).end(); 
```

不幸的是，我不确定从套接字挂断错误中恢复的最佳方法是什么，但是您可以尝试用 try/catch 包围 http.request 方法，如果前一个请求导致错误，则只需启动一个新请求。

# eclipse - Eclipse - SVN 派生文件在后台提交

> ID：13531728
> 
> 赞同：1
> 
> 时间：2012-11-23T15:14:21.500
> 
> 标签：eclipse, svn, commit, ignore, derived

我在 Eclipse 中有几个项目，有时我将文件标记为派生，因此 SVN 会忽略该文件并且它不会被提交。有一段时间这对我有用，但不知何故我现在有一些问题。其中一些文件是从我的帐户提交的。Svn 历史告诉我我确实提交了这些文件，但我 100% 确定我没有提交。

我在历史记录中提交了 3 个文件，但对话框只显示了其中的 2 个。当我将版本化文件放在派生上时有问题吗？所以他们以某种方式在后台承诺？因为这就是我的样子。我从未在我的提交对话中看到这些文件，但 Eclipse (4.2.1) Subversive (SVNKit 1.7.5v1) 确实以某种方式提交了它们。

有没有更好的方法在进一步提交时忽略这些文件？他们需要进行版本控制，我确实对这些不应该提交的文件进行了一些本地更改。所以 svn ignore 不是一个选项。

# android - 当 EditText 被移动/调整大小时，windowSoftInputMode adjustPan 不起作用

> ID：13531735
> 
> 赞同：3
> 
> 时间：2012-11-23T15:14:56.927
> 
> 标签：android, android-layout, android-widget

我想使用 EditText 让用户在 Scrollview 的不同位置编辑输入（如电子表格中的单元格）。调用软键盘时，只要 Edittext 位于其原始位置（在 Layout.xml 中给出），它就会移动屏幕。一旦我更改了大小、位置、背景等内容，调用的键盘就不会移动屏幕，而是会在 Edittext 挡道时覆盖它。当我使用adjustResize时也是如此。除了在每个可能的选项上添加单独的 EditText 之外，还有其他解决方案吗？

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T06:15:39.600

这一切都与视图的焦点有关，当系统知道哪个视图具有焦点时，事情就会起作用，在滚动视图的情况下，焦点在滚动视图上，因此事情不会相应地工作。可以查看[此](https://stackoverflow.com/questions/12369140/android-how-to-track-if-soft-keyboard-is-openned/12369315#12369315)以获取更多信息。

# z3 - z3 中的 unsat 核心功能

> ID：13531738
> 
> 赞同：2
> 
> 时间：2012-11-23T15:15:08.640
> 
> 标签：z3

假设我使用 API 阅读了 SMTLIB 公式：

```
context ctx;
...
expr F = to_expr(ctx, Z3_parse_smtlib2_file(ctx,argv[1],0,0,0,0,0,0)); 
```

该表达式`F`是以下形式的断言的合取：

```
(and (< (+ x y) 3)
     (> (- x1 x2) 0)
     (< (- x1 x2) 4)
     (not (= (- x1 x2) 1))
     (not (= (- x1 x2) 2))
     (not (= (- x1 x2) 3))) 
```

我想使用帖子中的以下代码片段从这个连词中提取每个单独的断言：[如何使用未饱和核心的 z3 拆分子句并尝试再次找出未饱和核心](https://stackoverflow.com/questions/13270696/how-to-use-z3-split-clauses-of-unsat-cores-try-to-find-out-unsat-core-again)

```
 F = F.simplify();
    for (unsigned i = 0; i < F.num_args(); i++) {
        expr Ai = F.arg(i);
        // ... Do something with Ai, just printing in this example.
        std::cout << Ai << "\n";
    } 
```

使用后`F.arg(i)`，原来的从句`(< (+ x y) 3)`变成了`(not (<= 3 (+ x y)))`。这是我的

a) 问题：我怎样才能把子句`(not (<= 3 (+ x y)))`放在`(< (+ x y) 3)`？

b) 问题：在这种情况下，我认为符号的`<=`意思是暗示，而不是小于。我对吗？

c）问题：由于子句`(not (<= 3 (+ x y)))`模型是真还是假，我怎样才能得到算术值，例如`x = 1, y = -1`？

非常感谢任何建议。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T06:57:55.463

表达式`(< (+ x y) 3)`转换为`(not (<= 3 (+ x y)))`when `F = F.simplify()`。在您使用的代码片段中，该方法`simplify()`用于“扁平化”嵌套的“and”。也就是说，公式`(and (and A B) (and C (and D E)))`被展平为`(and A B C D E)`. 然后，可以使用 for 循环轻松遍历所有合取项。但是，它`simplify()`还将在输入公式中执行其他转换。请记住，所有转换都保持等效性。即输入和输出公式在逻辑上是等价的。如果`simplify()`不希望应用的转换，我建议您避免使用此方法。如果还想遍历嵌套的“and”，可以使用辅助`todo`向量。这是一个例子：

```
expr_vector todo(c);
todo.push_back(F);
while (!todo.empty()) {
    expr current = todo.back();
    todo.pop_back();
    if (current.decl().decl_kind() == Z3_OP_AND) {
        // it is an AND, then put children into the todo list
        for (unsigned i = 0; i < current.num_args(); i++) {
            todo.push_back(current.arg(i));
        }
    }
    else {
        // do something with current
        std::cout << current << "\n";
    }
} 
```

# c++ - 如何在 Symbian 上检索 SMS 收件箱消息，最好使用 j2me？

> ID：13531750
> 
> 赞同：0
> 
> 时间：2012-11-23T15:16:04.930
> 
> 标签：c++, python, qt, java-me

我想创建一个移动应用程序，从手机读取 SMS 消息并将它们发送到服务器。我了解 j2me 无法从收件箱文件夹中读取 SMS 消息。所以这就留下了使用不熟悉的 Symbian 的选项。

我的问题是我可以在 Symbian 上使用 j2me 吗？我能否实现 SMS 消息的读取和发送到服务器？

其次，在对 symbian 进行编程时，该采取哪种方法？

1.  QT
2.  C++
3.  Python

请帮助我提供可以帮助我加快完成这项任务的材料的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:23:41.017

AFAIK 你不能使用 J2ME 从收件箱中读取（甚至在 Symbian 平台上也不能）。您可以使用 Symbian 本机 API ( [example](http://www.developer.nokia.com/Community/Wiki/Reading_SMS_from_Inbox) )，也可以使用 Qt (with [QtMessaging](http://www.developer.nokia.com/Community/Wiki/Read_and_send_SMS_messages_using_the_Qt_Messaging_API) )。

你也可以使用 Python 来做同样的事情。它真的只是一个偏好问题。您可以使用 C++ API 进行更多控制，但使用 Python，您可以获得可读性和简单性*。*诺基亚对所有这些都有很好的文档（[甚至对于 Python API](http://www.developer.nokia.com/Community/Wiki/How_read_SMS_in_the_inbox)）。

希望这可以帮助

# sql-server - Visual Studio 2012 数据库项目图视图

> ID：13531754
> 
> 赞同：1
> 
> 时间：2012-11-23T15:16:17.457
> 
> 标签：sql-server, visual-studio-2012

我开始使用 Visual Studio 2012 并创建了一个新的数据库项目。它似乎非常有用，但我找不到任何选项来在图表视图中查看我的表格。我可以在哪里看到所有表以及它们的关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T02:27:49.107

Visual Studio 数据库项目中没有这样的功能，而且从来没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:46:11.053

在“数据源”窗格中，如果单击名为“使用设计器编辑数据集”的图标，则可以创建图表。这可能是你能得到的最接近的。

# ios - 在 TabBar 应用程序中从 ActionSheet 显示 NavigationController

> ID：13531756
> 
> 赞同：0
> 
> 时间：2012-11-23T15:16:20.827
> 
> 标签：ios

我是 iOS 新手。主要是在Android上开发。目前接管了一个 iOS 应用程序，我必须更新它的几个功能。

这个应用程序是基于 TabBar 的。几个导航控制器被推入标签栏，管理它们之间的切换。然而，现在其中一个选项卡会打开一个带有几个选项的 ActionSheet。

我必须在其中一个 ActionSheet 按钮单击时打开一个新的 NavigationController。

这是一个定义单击了哪个按钮的片段：

```
switch (buttonIndex) {
    case 0:
        [self openMyNavigationController];
        break;
    case 1:
        break;
    case 2:
        break;            
    default:
        break;
} 
```

我不知道 openMyNavigationController 方法应该如何

开始是这样的：

```
UIViewController *myViewController = [[MyViewController alloc ] nitWithNibName:@"MyViewController" bundle:nil];

UINavigationController *navMyViewController = [[UINavigationController alloc] initWithRootViewController:myViewController]; 
```

我应该怎么做才能在屏幕上显示新创建的 NavigationController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:35:41.943

如果我正确理解你的问题，我想你需要

```
[self.navigationController pushViewController: myViewController animated:YES]; 
```

将新的视图控制器推送到您的导航堆栈。

但是我认为您为应用程序设计的内容是错误的，不是 iOS 标准。Tabbar 不是像按钮那样“做一个动作”（我也做过一些android项目，但不一样。如果你真的想做一个按钮，你需要使用工具栏而不是标签栏），它是用于切换的页。我认为您需要阅读 [iOS User Interface](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006556-CH1-SW1)。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:39:05.110

您可以模态地使用 rootViewController 呈现该 navigationController：

```
[self presentModalViewController:navController animated: YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:46:19.030

我将一个新的 NavigationController 链接到选项卡项。我还为该选项卡打开了 ActionSheet 菜单，这基本上是客户想要的，但从用户的角度来看，这最终是愚蠢的，因为另一个 ViewControllers 的按钮应该放在新打开的选项卡上......我希望客户改变主意。

# javascript - 使用 Javascript (Jquery?) + Zurb Modal 停止 HTML5 音频

> ID：13531760
> 
> 赞同：0
> 
> 时间：2012-11-23T15:16:28.190
> 
> 标签：javascript, jquery, html, css, html5-audio

这是我的目标：在 Zurb 模态窗口消失时停止自动播放音频。

我是做这些东西的新手，尤其是javascript！

我有一个 Zurb Modal 窗口，用作在页面加载时弹出的启动屏幕。我在自动播放的窗口中有 HTML5 音频（这是一个请求 - 我不喜欢自动播放！）。单击背景时窗口消失，但音频继续播放。我不知道如何让音频停止！如果有人有想法，我将非常感激听到它。

```
<script type="text/javascript" src="js/jquery.reveal.js"></script>

<div id="myModal" class="reveal-modal">  

    <audio controls="controls" autoplay="autoplay">
        <source src="audio/splash-loop-01.mp3" type="audio/mpeg">
        <source src="audio/splash-loop-01.ogg" type="audio/ogg">
        Your browser does not support the audio element.
    </audio>
</div>
<div class="close-reveal-modal">CLOSE ME</div>​&lt;!-- USE THIS TO CLOSE WINDOW -->

<script>
$(document).ready(function (){
    $('#myModal').reveal();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:21:51.103

```
$(document).ready(function (){

    $('.close-reveal-modal').click(function(){

    audioPlayer.pause();
    audioPlayer.src = '';
    audioPlayer.load();

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:21:21.327

要暂停音频，请将其放在您的`document.ready`:

```
$('.close-reveal-modal').click(function(){
    var myAudio = document.getElementsByTagName("audio")[0];
    if(myAudio != undefined){
        myAudio.pause();
    }
} 
```

# c++ - 如何“以声明方式”填充“树”结构

> ID：13531761
> 
> 赞同：6
> 
> 时间：2012-11-23T15:16:35.913
> 
> 标签：c++, visual-studio-2008, data-structures, tree

我想定义一个“节点”类/结构，然后在代码中声明这些节点的树，这样代码的格式化方式反映了树结构，并且没有“太多”样板。

请注意，这不是关于数据结构的问题，而是关于我可以使用 C++ 的哪些特性来获得与下面的示例类似的声明性代码风格。

可能使用 C++0X 这会更容易，因为它在构造对象和集合方面具有更多功能，但我使用的是 Visual Studio 2008。

**示例树节点类型：**

```
struct node
{ 
  string name;
  node* children;

  node(const char* name, node* children);
  node(const char* name);
}; 
```

**我想做的事：**

**声明一棵树，使其结构反映在源代码中**

```
node root =
  node("foo",
  [
    node("child1"),
    node("child2", 
    [
      node("grand_child1"),
      node("grand_child2"),
      node("grand_child3"
    ]),
    node("child3")
  ]); 
```

**注意：我不想做的事情：**

**声明一大堆临时对象/colls并“向后”构造树**

```
node grandkids[] = node[3] 
{
  node("grand_child1"),
  node("grand_child2"),
  node("grand_child3"
};

node kids[] = node[3]
{
  node("child1"),
  node("child2", grandkids) 
  node("child3")
};

node root = node("foo", kids); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:59:59.930

如果您不介意过度复制节点并使用括号`()`而不是方括号，`[]`那么这应该可以工作。

实际上，您可以通过将指针存储在`node_group`而不是副本中来避免复制，但是由于这是星期五下午而且我很懒惰，所以我将其留给您。

```
struct node
{
    std::string name;
    std::vector<node> children;

    node(const char* n)
        :   name (n)
    {
    }

    node(const char* n, const class node_group& group);
};

struct node_group
{
    std::vector<node> children;
};

node::node(const char* n, const class node_group& group)
    :   name (n)
    ,   children (group.children)
{
}

node_group operator ,(const node& n1, const node& n2)
{
    node_group group;
    group.children.push_back (n1);
    group.children.push_back (n2);
    return group;
}

node_group operator ,(const node_group& gr, const node& n2)
{
    node_group group (gr);
    group.children.push_back (n2);
    return group;
}

int main ()
{
    node root ("foo",
                (node("child1"),
                node("child2",
                    (node("grand_child1"),
                    node("grand_child2"),
                    node("grand_child3"))
                    ),
                node("child3"))
              );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:46:14.017

[http://en.wikipedia.org/wiki/Expression_templates](http://en.wikipedia.org/wiki/Expression_templates)

使用这种技术，您可以获得如下语法：

```
Node root("bob") =
  (node("child1")
    <<(
      node("grandkid"),
      node("grandkid2")
    )
  ),
  node("child2"); 
```

在哪里重载`operator,`并`operator<<`构建用于构建根节点的表达式树。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:11:19.797

为您想要使用的语法编写解析器并不难。这是一个简单但有效的代码。我让自己`node`稍微改变你的对象，它不使用指针数组来存储子对象，但是`std::vector`

这种方法的优点是您可以从运行时提供的文本构建树，例如从配置文件中读取。另请注意，`ostream& operator<<(ostream&, const node&)`以相同的格式打印您的树，这对于序列化您的树（将它们写入文件或通过网络发送）或单元测试非常方便。

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <ctype.h>
    #include <string>
    #include <vector>
    #include <iostream>

    using namespace std;

    struct node
    { 
      string name;
      vector<node*> children;

      node(const string& name, const vector<node*> children);
      node(const string& name);
    };

    ostream& operator<<(ostream& o, const node& n) {
        o << "node('" << n.name << "'";
        if (n.children.size()) {
            o << ", [";
            for (size_t i = 0; i < n.children.size(); ++i)
                o << (i ? "," : "") << *(n.children[i]);
            o << "]";
        }
        o << ")";
        return o;
    }

    node::node(const string& s, const vector<node*> children)
    : name(s), children(children) {}

    char* parseNode(node** n, const char *ss);

    char *skipSpace(const char *ss) {
        char *s = (char *) ss;
        while (isspace(*s))
            ++s;
        return s;
    }

    void expected_error(const char* s) { 
        fprintf(stderr, "Error: expected '%s'\n", s);
        exit(1);
    }

    char *expect(const char *expected, char *s) {
        char *ex = skipSpace(expected);
        s = skipSpace(s);
        for ( ; *ex && *s; ++ex, ++s)
            if (*ex != *s) expected_error(expected);
        if (*ex) expected_error(expected);
        return s;
    }

    char *expectString(string& str, const char *ss)
    {
        char *s = skipSpace(ss);
        s = expect("'", s);
        char *start = s++;
        while (*s != '\'')
            ++s;
        str = string(start, s - start);
        return ++s;
    }

    char * parseChildren(vector<node*>& children, char *s) {
        s = expect("[", s);
        s = skipSpace(s);
        while (*s != ']') {
            node *n = 0;
            s = parseNode(&n, s);
            children.push_back(n);
            s = skipSpace(s);
            if (*s == ',')
                ++s;
            else break;
        }
        s = expect("]", s);
        return s;
    }

    char* parseNode(node** n, const char *ss) {
        char *s = (char *) ss;
        s = expect("node", s);
        s = expect("(", s);
        string name;
        s = expectString(name, s);
        vector<node*> children;
        s = skipSpace(s);
        if (*s == ',') 
            s = parseChildren(children, ++s);
        *n = new node(name, children);
        s = expect(")", s);
        return s;
    }

    int main()
    {
        node * n = 0;
        parseNode(&n,
    " node('foo',"
    "  ["
    "    node('child1'),"
    "    node('child2', "
    "    ["
    "     node('grand_child1'),"
    "     node('grand_child2'),"
    "     node('grand_child3')"
    "    ]),"
    "   node('child3')"
    " ])"
    );
        cout << *n;
        return 0;
    } 
```

# java - 程序化登录

> ID：13531762
> 
> 赞同：1
> 
> 时间：2012-11-23T15:16:40.497
> 
> 标签：java, jakarta-ee, glassfish, ejb

我在 Glassfish 3.1.2 中使用带有用户名、密码和领域的 ProgrammaticLogin，它运行良好。无论如何，当我调用 context.getCallerPrincipal() 时，我得到 org.glassfish.security.common.PrincipalImpl 和 context.getCallerPrincipal().getName() ，它返回用户名。

有什么方法可以通过 ProgrammaticLogin 传递 Principle，因此它可以在我的 ejb 中传递并从 SessionContext - context.getCallerPrincipal() 中获得？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:58:59.653

我猜您处于无法通过注释进行资源注入的环境中。您可以尝试通过手动 JNDI 查找来获取所需 EJB 的实例。

例子：

```
InitialContext init = new InitialContext();
YourBean bean = (YourBean) init.lookup(JNDI_NAME_OF_YOUR_BEAN); 
```

现在您应该能够将 Principal 传递给您的 bean。

# matlab - 获取在基本工作空间 MATLAB 中定义的对象列表

> ID：13531765
> 
> 赞同：2
> 
> 时间：2012-11-23T15:16:58.613
> 
> 标签：matlab

在 data.m 文件中，我在加载模型时定义了 simulink.parameters 变量，数据被加载到工作区中，我想获取 data.m 文件中定义的变量列表

我试过 ：

```
a = whos('-file', 'data'); 
```

但这仅用于 MAT 文件，m 文件是否有等价物？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:43:27.913

创建一个函数

```
function ret_val=mywhos(path_to_file)

run(path_to_file)
ret_val=setxor('path_to_file',who()); 
```

这应该可以完成这项工作。通过这种方式，您可以在函数工作区中读取文件，然后列出所有加载的变量并排除传递给函数本身的参数。返回的只是 data.m 文件中包含的函数名称。

调用它

```
vars=mywhos('data'); 
```

# c - 计算数组中的唯一数字并将它们放入二维数组中

> ID：13531768
> 
> 赞同：0
> 
> 时间：2012-11-23T15:17:12.217
> 
> 标签：c, arrays, labview

我正在尝试计算已经使用冒泡排序方法排序的数组中的唯一数字。

我想将结果存储在 LabVIEW 中的二维数组中。

我尝试了很多东西，但由于某种原因它不起作用。

这是我的代码：

```
// COUNT NUMBERS
int colorCount[256][2];

int m, n;
int getal;
int first = 1;
int prevG, prevP;
int tel = 0;
for (m = 0 ; m<12; m++){

    getal = Dnum[m];

    if( first == 1){

        colorCount[0][0] = getal;
        colorCount[0][1] = 1;
        first = 0;
        prevP = 0;
    }
    else{
        if( prevG == getal){
            tel = colorCount[prevP][1];
            colorCount[prevP][1] =  tel++;     
        } 
        else{
            prevP++;
            colorCount[prevP][0] = getal;
            colorCount[0][1] = 1;
        }
    }
    prevG = getal;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:05:08.617

最后一行 colorCount[0][1] = 1; 是不正确的。那条线应该是

```
colorCount[prevP][1] = 1; 
```

# ruby-on-rails - 模型创建依赖于其他模型创建

> ID：13531771
> 
> 赞同：0
> 
> 时间：2012-11-23T15:17:29.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, model

我有一个项目模型：

```
class Item < ActiveRecord::Base
  attr_accessible :author, :title
end 
```

还有一个 Book 模型：

```
class Book < ActiveRecord::Base
  attr_accessible :item_id, :plot

  belongs_to_ :item
end 
```

我希望能够通过使用创建一本书

```
Book.new(:title=>"Title", :author=>"Author", :plot=>"BlaBla")
Book.save 
```

它将创建一个带有标题和作者的项目，并使用创建的项目 ID 创建一本书。

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:29:03.283

您需要使用`:after_create`回调和 virtual_attributes 如下。

在你的书模型中写下这个

```
attr_accessor :title, :author

attribute_accessible :title, :author, :plot

after_create :create_item

def create_item
  item = self.build_item(:title => self.title, :author => self.author)
  item.save
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:56:36.567

使用 before_save 或 before_create

```
class Book
  attr_accessor :title, :author

  before_save :create_item

  #before_create :create_item

  def create_item
    if self.title.present? && self.autor.present?
      item = Item.new(:title => self.title, :author => self.author)
      item.save(:validate => false)
      self.item = item # or self.item_id = item.id
    end
  end
end 
```

# android - 如何保持数据结构和 XML 文件同步

> ID：13531774
> 
> 赞同：1
> 
> 时间：2012-11-23T15:17:43.837
> 
> 标签：android, xml, data-structures

我正在编写一个包含列表、子列表和项目数据结构的应用程序。

我想保存（`onPause`）和恢复（`onCreate`）这些数据从/到 XML 文件 - 所以以后我将能够发送和共享它。
用户可以操作数据结构（添加、删除、更新等）。

我的问题是：保持 XML 和数据结构一致的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-04T13:35:33.510

此类问题的常用方法（通常，不仅仅是在 Android 上）是以更新和检索最有效和最可靠的方式将数据存储在本地，并生成交换格式（如 xml、json 等） .) 需要时从存储的存储数据中提取。

在 Android 上（以及在大多数情况下，如果不是所有其他环境），xml 不是本地存储的糟糕选择，因为它相对难以有效更新（例如，当有任何变化时，通常需要重写整个 xml 文件）。

对于 Android，只要内存中的数据发生更改，您通常会将“数据结构”存储在本地数据库（默认为 SQLite）中。当您想要共享该数据时，您可以从数据库中的数据生成交换格式。XML 当然是可能的，但 JSON 更典型。

# python - Python：Matplotlib 补丁和等高线图

> ID：13531775
> 
> 赞同：3
> 
> 时间：2012-11-23T15:17:47.147
> 
> 标签：python, matplotlib

使用 PatchCollection 时，有没有办法让圆的填充变得透明？我绘制了一个圆圈，并尝试将 facecolor 设置为“无”，但它覆盖了绘制在其顶部的等高线图。我想看到圆的轮廓，其后面的轮廓仍然可见。

立体网是使用 mplstereonet-0.2 第三方软件绘制的。这是绘制图像的脚本部分：

```
hold(True)

fig, ax = plt.subplots(subplot_kw = dict(projection = 'stereonet')) # Schmidt by default

cax = ax.density_contourf(strike, dip, measurement = 'poles')

ax.pole(strike, dip, 'k^', markersize = 3)
ax.grid(True)

patches = []
circle = Circle((0, 0), 0.5, facecolor = 'none', fill = False)
patches.append(circle)
p = PatchCollection(patches)
ax.add_collection(p)

cbar = fig.colorbar(cax, cmap = cm)
cbar.set_clim(0, 25) 
```

![在此处输入图像描述](../Images/4c7e8874e51ec3d5d2edfad754f5662a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:59:29.507

我解决了这个问题，但感谢任何可能正在研究这个问题的人。

解决方案：

```
 p = PatchCollection(patches, match_original = True) 
```

这将使轮廓在形状后面可见。

![在此处输入图像描述](../Images/7c26a452844af7a831a97b7a0a3a7903.png)

# pytest - 如何为某些测试停用 django 插件？

> ID：13531780
> 
> 赞同：8
> 
> 时间：2012-11-23T15:18:00.390
> 
> 标签：pytest, pytest-django

我正在为 Django 运行一些测试，并为使用 Selenium 的网站运行一些其他测试。

我对测试框架的选择是惊人的[Pytest](http://pytest.org/latest)。

为了测试 Django，我目前已经安装了[pytest-django 插件](http://pypi.python.org/pypi/pytest-django)，并且 Django 的测试按预期运行，**但是**现在我回到了我以前不需要 Django 插件的测试。

我开始测试，Django 插件被自动拾取。
我检查了文档并找到[了](http://pytest.org/latest/plugins.html#deactivating-unregistering-a-plugin-by-name)解释如何禁用\停用插件的文章，但是当我运行此命令时：

```
py.test -p no:django 
```

我收到一条错误消息，指出我的“DJANGO_SETTINGS_MODULE”不在 sys.path 上。

还

命令如：

```
py.test --traceconfig 
```

或者

```
py.test --version 
```

给我同样的错误。看起来 Django 插件越来越深入了？当我只是检查版本或“已安装的插件”时，为什么会调用它？

问题：有什么方法可以在不卸载的情况下暂时停用此插件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T21:16:33.767

这应该有效。当我安装 pytest-2.3.4 并运行时，`py.test -p no:django --version`我没有遇到 DJANGO_SETTINGS 问题。当我离开`-p no:django`禁用时，我明白了。如果它不起作用，请链接到 pastebin 上的完整跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:22:37.103

IIRC这是由于多种因素的结合：

*   在启动时 py.test 查找 setuptool 入口点“pytest11”
*   入口点在被激活或停用之前被导入
*   pytest-django（已发布，目前为 1.4）预先加载了 Django 导入
*   很多 Django 需要在导入时配置设置模块

不幸的是，这在 pytest-django 的发布版本中是不可避免的。最初的答案是：不，在不同的 virtualenvs 中运行 pytest-django 和其他测试。

然而，这也是我们开始研究避免这些问题的插件版本的原因。我认为目前最好的版本是[https://github.com/flub/pytest_django](https://github.com/flub/pytest_django)的 pytest23 分支。 这个版本的功能非常完整，当然与发布的版本相比，它只需要更多的打磨，主要是在测试和文档。

我相信/希望在接下来的几周内这个分支将被合并和发布，我只需要让 Andreas 看一下并同意。我认为它肯定足够稳定，可以开始使用。

# ios - 查询一个 NSDictionary

> ID：13531789
> 
> 赞同：0
> 
> 时间：2012-11-23T15:18:29.550
> 
> 标签：ios, key-value

我对查询 NSDictionary 的正确或最有效的方式感到困惑。我有一个由字典填充的可变数组。看起来像这样...

```
<array>
    <dict>
        <key>title</key>
        <string>entry1</string>
        <key>checkedState</key>
        <string>NO</string>
    </dict>
    <dict>
        <key>title</key>
        <string>accessoriesImage</string>
        <key>checkedState</key>
        <string>NO</string>
    </dict>
    <dict>
        <key>title</key>
        <string>activationCharge</string>
        <key>checkedState</key>
        <string>NO</string>
    </dict> 
```

还有几个静态条目：

```
static NSString *kTitleKey = @"title";
static NSString *kCheckedState = @"checkedState"; 
```

而我想要的是测试 Title 并且它是 checkState 然后采取行动。即如果Title = entry1 并且它的checkedState = NO 然后将它的checkedState 设置为YES。像这样的东西，但这是错误的——我知道这是错误的——我只是不明白。

```
if [([[attributesArray valueForKey:kTitleKey] isEqualToString:@"All"] && [[attributesArray valueForKey:kCheckedState] isEqualToString:@"NO"]) {
[attributesArray setValue:kCheckedState = @"NO" forKey:@"entry1"];
} 
```

是的，我看过 Apple 文档中的键值编码，但我不明白。这就是我在这里的原因。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:22:51.780

```
for(id dict in array /*your original plist is an array for you*/) {
    if([dict[kTitleKey] isEqualTo:@"entry1"]) {
        if([dict[kCheckedKey] isEqualToString:@"YES"]) {
             //process
        }
    }
} 
```

**注意：这要求数组包含 MUTABLE 字典 **

** 另外：我会在您的 plist 中将 'checked' 设为布尔值... */

# c# - 为什么在使用 Powershell 方法时，MSMQ 上的消息计数返回 0？

> ID：13531792
> 
> 赞同：2
> 
> 时间：2012-11-23T15:18:30.767
> 
> 标签：c#, wcf, iis, wmi, msmq

我正在开发在 IIS 上运行的 WCF 服务，我需要为 MSMQ 中的每个私有队列计算消息 i =。最快的方法似乎是powershell方法。

基准在这里：

[http://www.codeproject.com/Articles/346575/Message-Queue-Counting-Comparisions](http://www.codeproject.com/Articles/346575/Message-Queue-Counting-Comparisions)）

在 Visual Studio 2012 上调试时，它运行良好，但在我的本地 IIS 7.5 服务器上部署时，它返回 0。

这是我正在使用的方法：

```
private int GetPowerShellCount()
{
    return GetPowerShellCount(".\\private$\pingpong", Environment.MachineName, "", "");
}

private  int GetPowerShellCount(string queuePath, string machine,string username, string password)
{
    var path = string.Format(@"\\{0}\root\CIMv2", machine);
    ManagementScope scope;
    if (string.IsNullOrEmpty(username))
    {
            scope = new ManagementScope(path);
    }
    else
    {
        var options = new ConnectionOptions {Username = username, Password = password};
        scope = new ManagementScope(path, options);
    }
    scope.Connect();
    if (queuePath.StartsWith(".\\")) queuePath=queuePath.Replace(".\\",string.Format("{0}\\",machine));

    string queryString = String.Format("SELECT * FROM Win32_PerfFormattedData_msmq_MSMQQueue");
    var query = new ObjectQuery(queryString);
    var searcher = new ManagementObjectSearcher(scope, query);
    IEnumerable<int> messageCountEnumerable =
        from ManagementObject queue in searcher.Get()
        select (int)(UInt64)queue.GetPropertyValue("MessagesInQueue");
    //IEnumerable<string> messageCountEnumerable =
    //  from ManagementObject queue in searcher.Get()
    //  select (string)queue.GetPropertyValue("Name");
    var x = messageCountEnumerable.First();
    return x;
} 
```

请注意，我没有使用用户/密码参数，所以它都是本地的（WCF 服务和 MSMQ 在同一台机器上）。

为什么部署到 IIS 时返回 0？你觉得我应该尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:43:45.723

您的问题可能与 IIS 特定行为有关。

看看 Tom Hollander 的博客：[MSMQ、WCF 和 IIS：让它们玩得更好（第 1 部分）](http://blogs.msdn.com/b/tomholl/archive/2008/07/12/msmq-wcf-and-iis-getting-them-to-play-nice-part-1.aspx)

> 一般来说，消息队列可以随心所欲地调用。但是，当您在 IIS 7 WAS 中托管启用 MSMQ 的服务时，队列名称*必须*与服务的 .svc 文件的 URI 匹配。在此示例中，我们将在名为 MsmqService 的应用程序中托管服务，并使用名为**MsmqService.svc** 的 .svc 文件，因此队列必须名为**MsmqService** **/MsmqService.svc**。

# expressionengine - 使用循环生成动态通道字段名称？

> ID：13531794
> 
> 赞同：1
> 
> 时间：2012-11-23T15:18:47.033
> 
> 标签：expressionengine

基于变量生成通道字段存在一些问题。以下是我对 PHP 解决方案的尝试：

```
{related_entries id="image_gallery"}
    <?php for ($i = 1; $i <= 15; $i++) { ?>
        {image_<?php echo $i; ?>}
    <?php } ?>
{/related_entries} 
```

不幸的是，ExpresssionEngine 不会渲染这些标签，而只是将它们输出为：{image_1} {image_2} {image_3}...等。

我尝试了其他一些循环插件也没有运气，但我认为有一个插件或方法可以帮助我。

**额外问题：**理想情况下，我需要一种方法，我还可以检查通道字段是否实际上有任何数据，例如：{if image_x}{image_x}{/if}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:06:23.290

确保您已将 PHP 设置为解析模板首选项中的输入。这应该够了吧。

# asp.net - EPIserver 没有用于 UI Admin 部分的 CSS

> ID：13531795
> 
> 赞同：0
> 
> 时间：2012-11-23T15:18:47.937
> 
> 标签：asp.net, web-config, episerver

将 EPI6 站点移动到我的本地计算机并为 IIS7.5（而不是 IIS6）重新配置后，我遇到了问题。

UI Admin/Edit 后端没有 CSS。我怀疑这是由于虚拟路径映射造成的，我发现它们都映射到 %ProgramFiles% 但在我的本地计算机上 EPI 安装在 %ProgramFiles(86)% 上。所以我改变了它并确保所有物理路径都有效。他们做到了。

所以我觉得很聪明，并希望 CSS 能够正确加载，但没有发生任何变化。

我试过 ctrl F5 看看它是否是一个缓存问题，我已经重新启动了 IISExpress。但仍然没有CSS。

关于我可能忘记的事情的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:10:31.883

*   使用 Firebug Net-tab 或等效的 F12 Web 浏览器工具检查以准确查看哪些路径没有正确响应。
*   检查有问题的 Program Files 目录在磁盘上的权限。
*   将 Web.config 与默认的 EPiServer IIS7 web.config 进行比较，以查看您将所有处理程序放在正确的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T11:15:40.207

我解决了这个问题。这不是权限问题，而是配置错误。使用 IIS6 将 fom 升级到 IIS7.5 时，我忘记在 Web.Config 中进行更改：

IIS6版本

```
 <location path="App_Themes/Default" /> 
```

到：

IIS7.5版本

```
 <location path="App_Themes/Default">
        <system.webServer>
            <handlers>
                <clear />
                <add name="wildcard" path="*" verb="*" type="EPiServer.Web.StaticFileHandler, EPiServer" />
            </handlers>
        </system.webServer>
    </location> 
```

# mysql - %b-%Y 的 STR_TO_DATE 解析

> ID：13531796
> 
> 赞同：0
> 
> 时间：2012-11-23T15:18:47.833
> 
> 标签：mysql

我需要以 JAN-1980 到 1980-01-01 的格式解析日期，即添加日期始终是指定月份的第一个日期。

我怎么能对他呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:25:43.437

像这样的东西，

```
SELECT STR_TO_DATE(CONCAT(`colName`, '-01'),'%b-%Y-%d')
FROM table1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/851d1/2)

来源

*   [STR_TO_DATE](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:25:35.023

Concat`-01`在您的日期，转换为日期，然后格式化回您想要的格式，例如如下：

```
 DATE_FORMAT(STR_TO_DATE(CONCAT('JAN-1980','-01'),'%b-%Y-%d'), '%Y-%m-%d') 
```

# c - 使用自行设计的 C 编译器构建代码

> ID：13531801
> 
> 赞同：1
> 
> 时间：2012-11-23T15:19:00.843
> 
> 标签：c, compiler-construction

作为我大学项目的一部分，我们应该开发一个 C 编译器。词法分析器和解析器部分已经结束 - Flex 和 Bison 工具使我们的艰巨任务变得更加简单。现在我们陷入困境的是我们无法继续进行该项目。一旦我们手头有这三个文件，具体如何进行：

*   y.tab.h
*   y.tab.c
*   lex.yy.c

我们还设法通过在 DOS 提示符下使用以下命令生成可执行文件

> gcc lex.yy.c y.tab.c -o example1

我得到了可执行的example.exe......现在如何继续让编译器运行？如何获得它来构建用户 C 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:55:26.563

您应该检查您是否`example.exe`可以阅读 C 程序并报告任何语法错误。

如果不能，请修复您的`.y`和/或`.l`文件，然后重试。

如果可以的话，太好了，你有一个可以工作的解析器。现在把它变成一个工作编译器。不断向文件中添加代码（称为语义操作）`.y`，实现越来越多的编译器功能。首先，确保您可以报告*语义*错误，例如无效类型或缺少声明。然后实现汇编代码生成。

当`.y`文件变得太大时，将一些代码转换为函数并将它们移动到单独的`.c`文件中。

# android - 获取应用程序的可用语言

> ID：13531806
> 
> 赞同：13
> 
> 时间：2012-11-23T15:19:25.877
> 
> 标签：android, localization

我只想获取我的 android 应用程序的可用语言，即我在 res 文件夹中有一个名为 values- 的文件夹（例如 values-en、values-fr）的那些语言。

我不想存储语言代码，我想列出表单 values-* 的“res”的所有子文件夹，并从它们的名称中获取语言代码。（最终检查代码是否在 Locale.getAvailableLocales() 返回的数组中，以确保它是正确的）。此处说明了这个想法[如何获取可用的语言（不是全部，只是我的应用程序上可用的语言）](https://stackoverflow.com/questions/5706765/how-to-get-the-available-languages-not-all-of-them-just-the-languages-availabl)。

我试过使用

```
getResources().getAssets().list("res"); getResources().getAssets().list("/res"); 
getResources().getAssets().list("/res/"); 
```

但他们都没有工作。

您知道如何列出“res”文件夹的子文件夹吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:19:53.997

我不知道这样做的直接方法，但我对 assets 文件夹做了类似的事情，应该可以正常工作。我在 Windows 上使用 IntelliJ IDEA 和 ANT 进行构建，但您应该能够将其用于 Eclipse 或其他 IDE 和 *nix/OSX。

在编译之前，我使用 ANT 构建方面运行 dir 命令以列出资产文件夹中的所有文件并将输出通过管道传输到文本文件：

```
dir /assets /s /b > /res/raw/filelist.txt 
```

然后，我将 filelist.txt 读入哈希图中，让我可以非常轻松快捷地找到任何文件（我在数十个资产子文件夹中有数百个文件，而 AssetManager 脑残无法处理）。

```
public class AssetsFileManager {

   private static Map<String, String> files = new HashMap<String, String>();

   static{

        BufferedReader in = new BufferedReader(new InputStreamReader(this.getResources.openRawResource(R.raw.filelist)))
        String line = "";
        while ((line = in.readLine()) != null) {               
           map.put(line.substring(line.lastIndexOf("\\")+1), line);
        }
        in.close();
   }
} 
```

注意转义的反斜杠，`\\`

这给了我一个以文件名和完整路径为键的映射作为值。

您可以轻松地采用这种方法来获取您的文件夹列表。例如，您可能会使用`dir /ad /b /s`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:58:24.143

我不确定这是否可行，但您可以使用所有可能的语言`Locale.getAvaliableLocales()`并尝试为`app_name`列表中的每个语言环境获取一些资源（例如）。[这](https://stackoverflow.com/a/6526588/958370)是一种可能的方法。

# unit-testing - 确保在方法 B 之后调用方法 A 的单元测试

> ID：13531808
> 
> 赞同：1
> 
> 时间：2012-11-23T15:19:32.430
> 
> 标签：unit-testing

我有一个与某个对象交互的代码，然后应该调用它的 finish() 方法。

```
void completeTransaction(PaymentTransaction transaction) {  
    recordTransaction(transaction.getId());

    transaction.finish();
} 
```

PaymentTransaction 是一些第三方类，之后的行为`finish()`是未定义的——它可能会抛出异常或只是静默失败。

我需要编写一个单元测试，然后才通过：

1.  `recordTransaction(transaction.getId())`叫
2.  `transaction.finish()`叫
3.  `transaction.finish()`*后*调用 *`recordTransaction(transaction.getId())`*

 *满足上述条件的测试应该禁止这样的代码：

```
void completeTransaction(PaymentTransaction transaction) {
   transaction.finish();
   recordTransaction(transaction.getId()); //oops
} 
```

第一个条件的测试用例：

```
void testCompleteTransaction_TransactionRecorded() {
    completeTransaction(transactionMock);
    // assert that recordTransaction(transaction.getId()) 
    // called with correct argument 
```

completeTransaction(PaymentTransaction transaction) } 对于第二个：

```
void testCompleteTransaction_TransactionCompleted() {
    completeTransaction(transactionMock);
    // assert that transaction.finish() called
} 
```

我想知道如何通过测试用例强制执行第三个条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:06:29.577

如果在调用时未设置某些内部标志，您可以传入一个`PaymentTransaction`覆盖的假文件`finish()`，`getId()`这样会`finish()`引发异常。`getId()`

```
public class FakePaymentTransaction {
    private bool _getIdWasCalled = false;

    public override void finish () {
        if (!_getIdWasCalled) {
            throw new Exception ("getId wasn't called first!");
        }
    }

    public override /* your return type */ getId() {
        _getIdWasCalled = true;
        // Some other logic to return your specified return type
    }
} 
```

现在，当您将其传递给您的 SUT 时，您将查看调用是否以正确的顺序进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T17:05:21.120

您想要的是一个可以验证调用顺序是否符合预期的模拟。您可以按照 James D'Angelo 的回答中的建议为特定案例推出自己的案例，或者您可以创建一个更通用的类似工作的案例。

或者，您可以使用良好的模拟框架提供的设施。

例如，Mockito 有一个[InOrder](http://mockito.googlecode.com/svn/branches/1.4/javadoc/org/mockito/InOrder.html)验证器，它可以验证来自单个模拟或多个模拟的模拟方法的调用顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:00:49.023

你的测试用例没有意义：

方法按照您在代码中的顺序调用：在单元测试中，您不仅应该调用某些方法，还应该测试正确的结果。

但如果你想找点乐子：

```
public testNonsenseTest() {
     int i  = 0;
     PaymentTransaction transaction = new PaymentTransaction();
     int transactionId = transaction.getId());
     recordTransaction(transactionId);
     i++;
     assertEquals(1, i);
     transaction.finish();
     i++;
     assertEquals(2, i);

} 
```*

# macos - 在mac上使用QJson解析数据

> ID：13531811
> 
> 赞同：0
> 
> 时间：2012-11-23T15:19:55.190
> 
> 标签：macos, qt, qjson

我正在做 Qt 项目。我已经成功安装了 QJson。并使用解析器解析数据。我的代码编译成功，但在运行时它给了我以下错误：

dyld：库未加载：libqjson.0.dylib

引用自：/Users/sanjay/untitled1-build-desktop-Qt_4_8_3_in_PATH_ *System* _Debug/untitled1.app/Contents/MacOS/untitled1

原因：找不到图片

我在 Qt 创建器中添加了库作为外部库。它在我的 .pro 文件中添加了以下代码：

macx: LIBS += -L$$PWD/../build/_preferred_pa​​th_/lib/ -lqjson

INCLUDEPATH += $$PWD/../build/_preferred_pa​​th_/include/qjson

DEPENDPATH += $$PWD/../build/_preferred_pa​​th_/include/qjson

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:57:52.883

如果您的应用程序编译成功，则说明 pro 文件中定义的项目配置正确（包括 LIBS 配置）。

在这种情况下，您的应用程序在运行时失败，这意味着在库路径中找不到 libqjson.0.dylib。首先使用 otool 工具 (http://tech-queries.blogspot.com/2011/04/dynamic-library-dependency-on-mac-os-x.html) 检查 json 库如何与您的库链接。该工具将帮助您检测问题，检测后您可以：

*   将 libqjson.0.dylib 复制到适当的位置
*   使用 install_name_tool 工具的正确链接[http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/install_name_tool.1.html](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/install_name_tool.1.html)

库步骤的重新链接可以在 pro 文件中设置为构建后步骤。这是示例：

```
macx {
    QMAKE_POST_LINK = install_name_tool -change libqjson.0.dylib @loader_path/relative_path_to_library/libqjson.0.dylib  your_binary_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:26:21.567

在终端中，输入：

```
otool -L /Users/sanjay/untitled1-build-desktop-Qt_4_8_3_in_PATH_System_Debug/untitled1.app/Contents/MacOS/untitled1 
```

它会告诉您每个依赖库的预期位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:30:24.503

确保该库位于您的应用程序的应用程序文件中。给出完整的路径名，如 LIBS += "lib/libqjson.dylib"

我使用了上述指令，它对我有用。

# javascript - Webkit 和 Mozilla 更改滚动条

> ID：13531813
> 
> 赞同：1
> 
> 时间：2012-11-23T15:20:01.810
> 
> 标签：javascript, jquery, css, html

> **可能重复：**
> [Firefox 中的滚动条颜色更改](https://stackoverflow.com/questions/3890471/scrollbar-color-change-in-firefox)

我目前正在使用`::-webkit-scrollbar`并`::-webkit-scrollbar-track`更改滚动条样式，但我知道这不会出现在 Firefox 上。我曾尝试用 moz 替换 webkit，但这并没有做任何事情。

我已经尝试过 jQuery，但是很难在现场使用其他 jquery mods 等实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:25:09.770

对于任何其他浏览器，没有等效的 webkit 伪选择器。唯一的选择是基于 javascript/jQuery 的。

例如，[jScrollPane](http://jscrollpane.kelvinluck.com/basic.html)。

# php - php ($foo > 0) 或 ($foo >= 1)

> ID：13531814
> 
> 赞同：2
> 
> 时间：2012-11-23T15:20:02.717
> 
> 标签：php

我一直想知道检查数字为 1 或更大时的最佳做法是什么。

```
IF($foo > 0) 
```

或者

```
IF($foo >= 1) 
```

我应该使用哪一个？它们似乎都工作相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:22:48.443

最终正确的是：

```
if ($foo >= 1) { } 
```

它清晰、简洁，适用于你扔给它的任何数字类型（所有两个）。

*以下是仅整数*比较的一些替代方案；顺便说一句，它们都没有产生更好的性能（事实）或可读性（在我看来）。

```
if ($foo) { 
    // anything that's not zero, regardless of sign
}

if ($foo != 0) {
    // same as above, but forces the left operand to be casted to number
}

if ($foo > 0) {
    // anything that's above zero and therefore greater or equal to one
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T15:29:42.377

```
 -1      0       0.5      1
IF($foo > 0)         false   false   true     true
IF($foo >= 1)        false   false   false    true
IF($foo)             true    false   true     true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:29:38.773

如果您的要求是检查一个值*是否大于或等于 1*，那么这里甚至不需要做出决定。从逻辑和语义上来说，**唯一**的选择是。`x >= 1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T23:45:49.027

这取决于您使用的是整数还是浮点数。

根据性能优势选择一个没有什么意义。

看到 Jelmer 的说法后，我写了一个基准测试，看看是否有有意义的差异。

这是我运行的基准测试的确切代码：

```
<?php

echo '&gt;= VS &gt;<br/>';

for($j = 0; $j < 100; $j++)
{

    $start = microtime(true);

    for($i = 1000000; $i > 0; $i--)
    {

    }

    $midpoint = microtime(true);

    for($i = 1000000; $i >= 1; $i--)
    {

    }

    $end = microtime(true);

    $with_equals = $end - $midpoint;
    $no_equals = $midpoint - $start;

    echo $with_equals.' VS '.$no_equals.'<br/>';

    if($with_equals < $no_equals)
    {
        $with_equals_wins++;
    }
    elseif($with_equals > $no_equals)
    {
        $no_equals_wins++;
    }

}

echo '<br/>TOTAL WINS<br/>&gt;= - '.$with_equals_wins.' VS &gt; - '.$no_equals_wins; 
```

在我运行 Windows 7 x64 和 XAMPP 1.7.3 的 Intel i7 Sandy Bridge 笔记本电脑上，我运行了几次基准测试并得到以下结果：（我确保关闭 Turbo Boost 以使 CPU 时钟稳定）

```
TOTAL WINS
>= - 26 VS > - 74

TOTAL WINS
>= - 21 VS > - 79

TOTAL WINS
>= - 22 VS > - 78 
```

请注意，我的结果与 Jelmer 得到的结果相反。

如果有任何类型的甚至稍微有意义的性能差异，那么它可能取决于代码运行的特定硬件和软件环境。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-23T16:11:55.970

在性能方面，您希望使用`>=`而不是`>`.

我的伪基准：

```
for 100000x {
    time result of 5 > 0
}

for 100000x {
    time result of 5 >= 1
} 
```

编辑：正如威廉在评论中建议为整个 for 循环计时，这正是发生的事情。我把所有的时间加在一起，这给了我与一次计时整个 for 循环完全相同的结果。所以基本上我也是这么做的。（仅供参考。我以威廉的建议为基准，结果相同。相信我，我是一名工程师）

我的结果：

```
 >                 >=
x100000 | 198.63224029541 | 191.68829917908
In MS 
```

因此，当谈到速度并且您使用整数时（请参阅上面的精彩答案！），`>=`会更快。但是，考虑后果！这只是`7ms`通过`100.000`测试。但是，当您有几百万条记录要检查时...

**编辑**

在多次运行基准测试后，我得到了更大的差异。差异之类`10`的，`15`甚至是`20`ms！没有任何改变，显然我的处理器很忙，但很高兴与你们分享。

# php - CakeEmail 不发送变量

> ID：13531815
> 
> 赞同：1
> 
> 时间：2012-11-23T15:20:06.227
> 
> 标签：php, cakephp, cakephp-2.0

我无法获取电子邮件的内容。`$content`变量未填充。

`$this->request->data['message']`来自允许 HTML 的文本区域输入。

控制器

```
debug($this->request->data['mensagem']); // Output: <p>\n\ttssseste<\/p>\n

App::uses('CakeEmail', 'Network/Email');

$email = new CakeEmail();
$email->emailFormat('html');
$email->from(array('noreply@domain.com' => 'System'));
$email->to($this->AuthExtended->user('email'));
$email->subject(__('Sample email'));
$email->template('test_email');
$email->viewVars(array('content' => $this->request->data['mensagem']));
$email->send(); 
```

查看/电子邮件/html/test_email.ctp

```
<?php echo $content; ?> 
```

我收到了电子邮件，但没有内容。如果我`test_email.ctp`改为：

```
Foo <?php echo $content; ?> 
```

我只得到`Foo`而不是`Foo`plus `$content`。

**更新**

在`$email->viewVars(array('content' => $this->request->data['mensagem']));`我尝试使用`debug($email->viewVars());`which show 我的“发布”变量进行调试之后，视图中没有任何内容。

```
array(
    'content' => 'foo bar here'
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:54:43.820

要发送模板电子邮件，请使用：

$email->template('test_email_view', 'test_email');

这里 test_email_view 是查看文件，将其放在 app/View/Emails/html/test_email_view.ctp 中，并将您想要在电子邮件正文中查看的代码放在这里

和 test_email 是你的布局文件 app/View/Layouts/Emails/html/test_email.ctp 并把 echo $this->fetch('content');

# java - 将模拟注入到由被测类继承的类中？

> ID：13531817
> 
> 赞同：1
> 
> 时间：2012-11-23T15:20:09.643
> 
> 标签：java, mockito

我正在为扩展 B 类的 A 类编写单元测试。我正在使用 Mockito，我想模拟 org.slf4j.logger 两个类都可以使用。问题是当 A 类调用 B 类的方法时，模拟的记录器没有注入到 B 类中，所以我得到了一个 NPE。有没有办法成功测试这个？

```
public class ClassA extends ClassB {

    @Inject
    private static final Logger LOGGER = LoggerFactory.getLogger(ClassA.class);

    public void classAMethod { 
        LOGGER.debug("u wot m8");
        this.classBMethod();
}

public class ClassB {

    @Inject
    private static final Logger LOGGER = LoggerFactory.getLogger(ClassB.class);

    public void classBMethod { 
        LOGGER.debug("u wot m8");
    }

}

public class ClassATest { 

    @InjectMocks 
    private ClassA classA = new ClassA
    @Mock
    private Logger mockLogger;

    @Test
    public void testClassA() {
          classA.classAMethod ();
          verify(mockLogger, (times, 2)).debug(Mockito.anyString());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T20:41:09.867

Mockito 无法注入静态最终字段。事实上，没有人可以，因为根据定义，final 字段不能被分配两次。而且 Mockito 无论如何都不会注入静态字段。只有实例字段。

请参阅[文档](http://docs.mockito.googlecode.com/hg/latest/index.html?org/mockito/Mockito.html)：

> 但是，静态或最终字段将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:32:01.603

如果您使用的是 Java EE 6 @Inject，它将无法在 CDI 容器之外工作，这是规范的一部分。如果这是一个单元测试，您必须自己提供。

# sql-server - 更新查询被用户取消

> ID：13531818
> 
> 赞同：9
> 
> 时间：2012-11-23T15:20:10.037
> 
> 标签：sql-server, sql-server-2005, ssms, where-clause

我有一张有数百万行的表。

不小心我在一个没有 where 子句的表上写了一个更新查询并单击了执行。

它开始执行。两秒钟后，我意识到查询是错误的，我点击了 ' `Stop`' 按钮`Sql Server Management Studio`。查询执行被停止，这一切都发生在 7 秒内。

现在我很想知道是否有任何行受到影响。如果有的话，它们是什么？如何找到它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T15:24:24.690

单个更新语句不会更新某些行。全部为行或无

这是SQL Server 非常尊重的[ACID属性中的](http://en.wikipedia.org/wiki/ACID)[原子性。](http://en.wikipedia.org/wiki/Atomicity_%28database_systems%29)

> 原子性要求每个事务都是“全有或全无”：如果事务的一部分失败，则整个事务失败，数据库状态保持不变。原子系统必须保证每种情况下的原子性，包括电源故障、错误和崩溃。

然后提交在语句的末尾，所以当你取消时没有提交

# generics - 表达式返回类型可以是泛型的吗？

> ID：13531820
> 
> 赞同：0
> 
> 时间：2012-11-23T15:20:27.080
> 
> 标签：generics, expression

我正在使用表达式。是否有可能有一个通用的返回类型，所以我想返回传递给我的表达式的任何属性类型。

```
 public PropertyMapping(Expression<Func<TEntity, int>> expression)
    {
        this.expression = expression;

        if (this.expression != null)
        {
            this.expressionMemberName =((MemberExpression)this.expression.Body).Member.Name;
        }
     } 
```

我不想创建 StringPropertyMapping、IntPropertyMapping、DoublePropertyMapping 等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:28:59.100

您需要将属性类型的类型参数添加到您的`PropertyMapping`类中。如果它嵌套在定义`TEntity`类型参数的类中，它将变为`PropertyMapping<TProperty>`：

```
public class SomeClass<TEntity>
{
   public class PropertyMapping<TProperty>
   {
      public PropertyMapping(Expression<Func<TEntity, TProperty>> expression)
      {
         ... 
```

如果它是顶级类，它将变为`PropertyMapping<TEntity, TProperty>`：

```
public class PropertyMapping<TEntity, TProperty>
{
   public PropertyMapping(Expression<Func<TEntity, TProperty>> expression)
   {
      ... 
```

# android - 将预定义的框架布局多次添加到相对布局中

> ID：13531822
> 
> 赞同：-1
> 
> 时间：2012-11-23T15:20:43.707
> 
> 标签：android, android-layout, android-framelayout

我有一个框架布局，它由一个edittext 和一个按钮（用于删除字段）组成，当用户单击一个按钮时，我想将其多次添加到相对布局中。

我已经搜索过，但我只是找不到如何以编程方式执行此操作。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" >

    <EditText
        android:id="@+id/inputbox"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:textSize="25sp"
        android:textStyle="bold"
        android:hint="@string/inputhint"
        android:ems="10"
        android:imeOptions="actionNext"
        android:singleLine="true" />

    <Button
        android:id="@+id/buttonremove"      
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="10dp"
        android:layout_gravity="right|center_vertical"
        android:background="@drawable/remove" />

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:41:11.543

当容器是具有垂直方向的 LinearLayout 而不是 RelativeLayout 时，这样做会容易得多。

```
ViewGroup container = (ViewGroup) findViewById(R.id.container);
getLayoutInflater().inflate(R.layout.input, container, true); 
```

只需检索 LinearLayout （容器），然后以容器为父级来扩展布局。设置为 true 时，它​​将`attachToRoot`自动添加到容器中。

# database - 如何将 MVC4 中的示例会员模块与 codefirst 创建的数据库一起使用？

> ID：13531824
> 
> 赞同：1
> 
> 时间：2012-11-23T15:20:48.967
> 
> 标签：database, asp.net-mvc-4, ef-code-first, sql-server-express, membership

我正在使用 MS SQL Server Express 数据库开发 MVC4 项目。

这是我所做的：

我启动了一个 MVC4 项目，其中包含成员模块（AccountsController.cs、AccountModel.cs 和查看文件）

接下来，我添加了一些模型、控制器、上下文和初始化程序来播种一些测试数据。使用 ef-codefirst，这创建了我的 context.mdf 数据库，它工作正常。

我遇到的问题是我现在有 2 个数据库。一个来自标准成员模块，另一个是使用 ef-codefirst 创建的。我似乎不知道如何使用会员模块来处理从我的 ef-codefirst 创建的数据库，因为我需要将所有内容都放在 1 个数据库中。

我整天都在寻找示例或解决方案，其中 mvc4 模板中的准备就绪会员模块与代码首先创建的数据库结合使用，但经过这么多小时后，我不知道该做什么和不该做什么所以希望有人得到一些提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:45:27.027

因此，经过一周的压力，我遇到的问题原来是因为迁移。 **启用迁移后，您只能使用 1 个数据库上下文类。** 我开始时没有迁移，然后使用 EF 创建数据库表并使用初始化程序将数据播种到它们。接下来我添加了迁移，将我自己的上下文中的所有内容添加到模板成员模块中的现有上下文中，然后就没有任何效果了。迁移没有创建任何表或修改任何表。所以我开始了一个新项目，只有 1 个上下文类和迁移，一切正常。

# variables - python3变量扩展“a”*x在列表中添加空元素

> ID：13531825
> 
> 赞同：0
> 
> 时间：2012-11-23T15:20:59.053
> 
> 标签：variables, csv, python-3.x, expansion

如何使用 python3 变量扩展将空元素添加到列表中。

```
>>> "a"*5  
'aaaaa' 
```

这会初始化一个包含 3 个元素的列表。

```
l = ['']  
>>> l  
['']  
>>> l.append('')  
>>> l.append('')  
>>> l  
['', '', ''] 
```

当我尝试添加 5 个空元素时，我只得到一个。

```
>>> l=['' * 5]  
>>> l  
[''] 
```

我正在将此列表写入 csv，我想要一种廉价的方法来添加空列、连续元素。我将行构建为列表中的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:20:59.053

这只是语义问题。我在哪里做乘法。

```
>>> l = [''] * 5  
>>> l  
['', '', '', '', ''] 
```

或者

```
>>> l=[]  
>>> l.extend([''] * 5)  
>>> l  
['', '', '', '', ''] 
```

# excel - Excel VBA从sheet1复制单元格并将它们插入标题sheet2

> ID：13531826
> 
> 赞同：0
> 
> 时间：2012-11-23T15:20:59.087
> 
> 标签：excel, vba, insert, copy

我想从 sheet1 复制一些单元格并将它们插入到 sheet2 的标题之间。我写了下面的代码和一个按钮来执行它，但问题是每次我点击按钮时，它都会插入新的标题。我怎样才能改变它？

```
lastColumnS1 = ActiveSheet.Cells.SpecialCells(xlCellTypeLastCell).Column

Sheets("Sheet1").Select
Range(Cells(1, 3), Cells(1, lastColumnS1)).Select
Selection.Copy

Sheets("Sheet2").Select
lastColumn3 = ActiveSheet.Cells.SpecialCells(xlLastCell).Column
Range("B1").Select    
Selection.Insert Shift:=xlToRight  
Range(Cells(2, lastColumn3), Cells(3, lastColumn3)).Select
Selection.Cut
lastColumn3_ = ActiveSheet.Cells.SpecialCells(xlLastCell).Column
Range(Cells(2, lastColumn3_), Cells(3, lastColumn3_)).Select
ActiveSheet.Paste 
```

样本数据

```
Sheet1:

ID   Name   x    y    z 
1    AA 
2    BB

Sheet2:

ID  Name
3   KK 
6   LL

desired result of Sheet2:

ID   x    y    z    Name
3                    KK
6                    LL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:06:14.323

您用于获取最后使用的列的方法并不总是有效。事实上，它似乎在每次使用时都会增加。以下将正确检索最后一列：

```
ActiveSheet.Cells.Find("*", SearchOrder:=xlByColumns, LookIn:=xlValues, SearchDirection:=xlPrevious).Column 
```

# drupal - Drupal 7 查看上下文过滤器或逻辑

> ID：13531828
> 
> 赞同：5
> 
> 时间：2012-11-23T15:21:03.427
> 
> 标签：drupal, views

上下文过滤器应用于 AND 逻辑。有没有办法在 OR 逻辑中有两个或多个上下文过滤器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T16:36:41.653

在视图 7.x-3.5 中，这可能无法使用 UI。

假设您的模块名称是`my_module`

将以下内容添加到您的 my_module.module 文件中

```
<?php
function my_moudle_views_api() {
  return array(
    'api' => 3,
  );
}
?> 
```

和

以下到 my_module.views.inc

```
<?php
function eb_mine_views_query_alter(&$view, &$query) {
  if ($view->name == 'statuser') {
    dsm($query, 'before');
    $query->where[0]['type'] = 'OR';
    dsm($query, 'after');
  }
}
?> 
```

来源：[http ://drupal.org/node/1451218#comment-6136692](http://drupal.org/node/1451218#comment-6136692)

而在早期版本的视图中，上下文过滤器的 AND/OR 选项将由视图中的第一组静态过滤器的选项决定。

```
Grouping of contextual filters
Even though contextual filters do not appear in the "and/or" user interface for sorting and grouping regular filters, contextual filters are always added to the first group of filters. Thus the order of the groups can cause the contextual filter to have entirely different effects on the results of a view that has contextual filters. Even though differences might not be apparent through the user interface.

Multiple contextual filters are therefore always in the same "and/or" group of filters, and can not be placed in different groups. There is an effort to add this feature. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T02:14:43.943

这是一个允许“将参数传递到普通过滤器 [UI]”的补丁 [https://drupal.org/node/357082](https://drupal.org/node/357082)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-20T20:48:30.173

如果你坚持只有一个 UI 选项，那么这个模块就可以了。我已经对其进行了测试，尽管似乎确实存在问题的可能性，但它会定期维护。当我将它安装在我的自定义 Drupal 发行版上时，它似乎并没有破坏任何东西（尽管我确实修改了一些代码以消除我的自定义代码出现一些问题的可能性）。

[https://www.drupal.org/project/views_contextual_filters_or](https://www.drupal.org/project/views_contextual_filters_or)

此外，如果您希望进一步隔离此模块的行为（使其仅适用于特定视图或适用于特定内容类型的视图），代码本身很容易导出到您自己的模块。

# java - 允许未来的开发者阻止我的记录器

> ID：13531829
> 
> 赞同：-1
> 
> 时间：2012-11-23T15:21:09.430
> 
> 标签：java, logging, logback

我正在使用 logback 进行日志记录，并且没有设置记录器，只有根记录器：

```
<root>
    <level value="ALL" />
    <appender-ref ref="FILE" />
    <appender-ref ref="STDOUT" />
</root> 
```

在课堂上它看起来像这样：

```
Logger log = LoggerFactory.getLogger(foo.bar.MyClass.class); // foo.bar is package definition 
```

未来的开发人员可以通过为我的包定义规则来阻止我的日志记录，如下所示：

```
<logger name="foo.bar" level="OFF" /> 
```

或者，我必须像这样在类中定义我的记录器：

```
Logger log = LoggerFactory.getLogger("MyCoolLogger"); 
```

由于给定的名称，人们可以禁用它：

```
<logger name="MyCoolLogger" level="OFF" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:23:00.267

是的。

Logback loggers 从其父 loggers 继承 settigns，因此`foo.bar.MyClass`将从其继承设置`foo.bar`

# android - Eclipse - Android 应用程序 - 方形瓷砖菜单

> ID：13531834
> 
> 赞同：1
> 
> 时间：2012-11-23T15:21:23.613
> 
> 标签：android, android-layout, button, menu, tiles-game

Eclipse- Android 应用程序我正在尝试制作一个“方形”按钮菜单 - 连续 3 个按钮 - 每个按钮都有一个背景图像......

我能够使列的重量相等，但我不知道如何使按钮的高度始终等于它们的宽度，因为： - 我将来会在应用程序中添加更多行，所以我不希望布局特定于一定数量的行；即：无论行数是多少，按钮都应该是方形的（当然，在任何设备屏幕尺寸上） - 我希望背景图像能够根据按钮自行调整；即：按钮保持正方形，背景图像符合它

到目前为止，这是我的代码：（只有三行具有相同的 bg 图像

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:id="@+id/scrollView1"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:overScrollMode="never" >

<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
   >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"

         >

        <Button
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="@drawable/velocity_icon"
                />
         <Button
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="@drawable/velocity_icon"
                />
          <Button
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="@drawable/velocity_icon"
                />

    </LinearLayout>

     <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        >

        <Button
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="@drawable/velocity_icon"
                />
         <Button
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="@drawable/velocity_icon"
                />
          <Button
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="@drawable/velocity_icon"
                />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
       >

        <Button
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="@drawable/velocity_icon"
                />
         <Button
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="@drawable/velocity_icon"
                />
          <Button
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="@drawable/velocity_icon"
                />

    </LinearLayout>
</LinearLayout>

    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T14:40:54.093

我认为您必须自定义一个列表视图才能将菜单添加到

对于您想要始终是方形的形状，您必须使用九个补丁，请参见[此处](http://developer.android.com/tools/help/draw9patch.html)

# mysql - 繁重的 Mysql 操作和时间限制

> ID：13531835
> 
> 赞同：0
> 
> 时间：2012-11-23T15:21:30.073
> 
> 标签：mysql

有一个性能问题，我坚持使用基于 PHP 和 MySql 的应用程序。该应用程序用于数据迁移，其中必须上传数据，并且在经过各种处理（清除外来字符、重复检查、生成 ID）后，必须将其插入到一个中央表中，然后再插入到 5 个不同的表中。在那里，会生成一个 id，并且该 id 必须更新到中央表。有不同的记录集和验证规则。我面临的问题是，当我插入 say(4K) 行文件（包含 20 列）时，它在 15 分钟内工作正常，它被插入到任何地方。但是，当我再次插入相同的记录时，此时插入需要一个小时（理想情况下，它应该通过将先前插入的数据标记为重复来插入）。浏览日志文件后，我注意到有一个 Mysql 选择语句，我在其中检查重复项并获取重复的 ID。然后我在 for 循环中调用一个函数，它基本上是将记录插入 5 个表并将 id 更新到中央表。这个调用函数是整个过程的主要时间。PS记录必须逐条插入记录..请提出一些解决方案..

//这是示例代码

```
$query=mysql_query("SELECT DISTINCT p1.ID

FROM table1 p1, table2 p2, table3 a
WHERE p2.datatype =0
AND (p1.datatype =1 || p1.datatype=2)
AND p2.ID =0 
AND p1.ID = a.ID
AND p1.coulmn1 = p2.column1
AND p1.coulmn2 = p2.coulmn2
AND a.coulmn3 = p2.column3");
$num=mysql_num_rows($query);
for($i=0;$i<$num;$i++)      {
$f=mysql_result($query,$i,"ID");
//calling function
RecordInsert($f);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:26:20.523

如果没有您的代码，我只能为您提供解决方案的一般指南。基本上，在开始插入之前获取所有现有值。插入时，检查此缓存列表以查看是否存在重复，而不是进行查询。插入后，将插入的项添加到缓存项列表中，以防它再次出现。如果您的表可能会在脚本运行时添加到脚本之外，那么只需锁定您正在使用的表，直到完成。

# r - 错误：找不到功能“滞后”

> ID：13531836
> 
> 赞同：4
> 
> 时间：2012-11-23T15:21:32.623
> 
> 标签：r, gam

在下面找到运行时`model0`，我收到一条错误消息“ eval(expr, envir, enclos) 中的错误：找不到函数“Lag”。在发布此消息之前，我已经扫描了这个论坛和网络，但找不到相关的解决方案。我相信我的模型中的错误可能不是由于`Lag`下面显示的其他模型（1 和 2）可以运行而不会遇到任何问题。

我的主要动机是通过循环遍历解释变量及其滞后列表来运行 GAM 模型。

```
library(quantmod)
library(gamair) 
library(mgcv) 
data(chicago) 

names(chicago)

varlist0 <- c("pm10median", "pm25median", "o3median", "so2median")

model0<- lapply(varlist0, function(x) {
  gam(substitute(death ~ s(time,bs="cr",k=200)+ s(tmpd,bs="cr") + Lag(i,0:4) , list(i = as.name(x))),family=quasipoisson,na.action=na.omit, data=chicago)

}) 
```

**Gam + Lag 没有错误信息：**

```
model1<- gam(death ~ s(time,bs="cr",k=200)+ s(tmpd,bs="cr") + Lag(pm10median, 0:4),family=quasipoisson,na.action=na.omit, data=chicago) 
```

**带有 Lag 且没有错误消息的 Lm：**

```
hsb2 <- read.csv("http://www.ats.ucla.edu/stat/data/hsb2.csv")
varlist <- names(hsb2)[8:11]   
models <- lapply(varlist, function(x) {
    lm(substitute(read ~ Lag(i,0:4) , list(i = as.name(x))), data = hsb2)
}) 
```

我无法破译此错误的原因。我在第一个模型中做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:33:42.250

我不能说确切的原因，但它与`mgcv`评估公式的环境有关。比`substitute`执行以下操作更安全的方法：

```
varlist0 <- c("pm10median", "pm25median", "o3median", "so2median")
model0 <- lapply(varlist0,function(v) {
    f <- sprintf("death ~ s(time,bs='cr',k=200)+s(tmpd,bs='cr') + Lag(%s,0:4)",v)
    gam(as.formula(f),family=quasipoisson,na.action=na.omit,data=chicago)
}) 
```

# php - 验证意外{

> ID：13531837
> 
> 赞同：-6
> 
> 时间：2012-11-23T15:21:36.907
> 
> 标签：php, mysql, validation

当我试图验证我的数据时，我得到了这个错误，我不明白为什么它是“意外”

```
//Requests fields from form on previous page  
 $CDID = $_REQUEST['CDID'];
 $CDTitle = isset($_REQUEST['CDTitle']) ? $_REQUEST['CDTitle'] :null;
 $CDYear = isset($_REQUEST['CDYear']) ? $_REQUEST['CDYear'] :null;
 $catID = isset($_REQUEST['catID']) ? $_REQUEST['catID'] :null;
 $pubID = isset($_REQUEST['pubID']) ? $_REQUEST['pubID'] :null;

if(empty($CDTitle) || (empty($CDYear) || (empty($catID) || (empty($pubID)){
die("<p> You must enter all fields</p>\n");} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:23:08.513

您的 if 语句应为：

`if(empty($CDTitle) || empty($CDYear) || empty($catID) || empty($pubID)){`

你有太多的括号，所以 php 期望看到更多的右括号来关闭你的条件。我已经删除了不必要的括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:22:44.490

多余的括号..

改变：

```
if(empty($CDTitle) || (empty($CDYear) || (empty($catID) || (empty($pubID)){ 
```

至：

```
if(empty($CDTitle) || empty($CDYear) || empty($catID) || empty($pubID)){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:23:57.167

） 失踪 ：

```
if(empty($CDTitle) || (empty($CDYear) || (empty($catID) || (empty($pubID)){ 
```

应该 ：

```
if(empty($CDTitle) || (empty($CDYear)) || (empty($catID)) || (empty($pubID))){ 
```

或者

```
if(empty($CDTitle) || empty($CDYear) || empty($catID) || empty($pubID)){ 
```

# php - 从我的网站打印内容的最佳方式

> ID：13531842
> 
> 赞同：0
> 
> 时间：2012-11-23T15:22:06.200
> 
> 标签：php, html, mysql, css, printing

我的网站是企业的内部网，该网站包含存储在 MySQL 数据库中的客户、定价等数据，但这不是重点。

该网站需要能够使用不同的数据（如客户姓名、地址等）生成账单......

问题很简单，我应该使用哪种方式来生成这些页面？我试图生成一个 html 页面，但打印与浏览器的关系太大，有些保留一些没有的东西，我不喜欢这样。

我应该生成 pdf 页面吗？如何生成？谢谢你的回答

编辑：该网站是使用 PhP 和 Javascript 构建的

页面需要包含大量数据，因此无法通过 html 打印处理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:25:11.367

一般来说，打印复杂文档的最佳方式是在服务器端从 HTML 页面生成 PDF，然后提供 PDF。

这似乎是流行的选择：[http ://www.tcpdf.org/](http://www.tcpdf.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:47:55.707

这里有一些你可以使用的库（没有特别的顺序）

*   [mPDF](http://www.mpdf1.com/mpdf/index.php)（使用[FPDF](http://www.fpdf.org/) / [HTML2FPDF](http://html2fpdf.sourceforge.net/)）
*   [dompdf](https://github.com/dompdf/dompdf)
*   [TCPDF](http://www.tcpdf.org/)
*   [Zend PDF](https://github.com/zendframework/ZendPdf) ([文档](http://framework.zend.com/manual/1.12/en/zend.pdf.html))
*   [PDFlib 库](http://www.php.net/manual/en/intro.pdf.php)
*   [jsPDF](https://github.com/MrRio/jsPDF)（完整的 javascript pdf 生成器）

最后不是代码解决方案，但另一个非常便宜的解决方案是在客户端机器上安装“打印到 PDF”应用程序并教人们如何“打印到 pdf”。例如，谷歌 Chrome 浏览器在打印目的地菜单中内置了“另存为 PDF”（点击`CTRL-P`，然后`Change...`点击位于下方的按钮`Destination`）。还有像[dopdf](http://www.dopdf.com/)这样的免费软件，我相信你能找到更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T15:24:41.473

您确实应该生成pdf。打印 html 充其量是古怪的，你没有万无一失的方法。进行分页或强制横向打印。

您当然可以为我们定制一个仅打印的 css，但这仍然非常有限。

除非最终用户禁用该特定选项，否则许多浏览器总是会在每页的页眉和页脚上打印一个 tekst。

PDF 是提供打印的唯一不错的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T15:26:14.683

如果您想在这些报告中使用特定格式，您可以使用以下库即时创建 pdf：fpdf 或 fpdi（以导入 pdf 模板）。虽然可以选择创建适合您需求的 html 内容，但它可能对布局更自由。PDF 格式更正式，可以将内容放在论文的确切位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T15:32:33.393

解决这个问题的好方法是找一些在线服务来做这件事，我努力寻找答案，最后我得到了 pdfcrowd.com。

这个网站提供了一个api，你可以用它来生成pdf文件，没有任何复杂的代码，很简单，你唯一需要做的就是注册并获取api和序列号来激活api，你不需要支付任何费用' 当然，如果你想要更多，你知道你必须做什么......

希望对你有帮助，对不起，我的英语不好......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T15:27:10.633

[FPDF](http://www.fpdf.org/)或[TCPDF](http://www.tcpdf.org/)可以派上用场。

# android - Holo 主题 - EditText 和 Spinner 中的不同文本大小

> ID：13531845
> 
> 赞同：5
> 
> 时间：2012-11-23T15:22:26.673
> 
> 标签：android, styling, font-size

我对文本大小`EditText`和`Spinner`默认的浅色**Holo**主题有疑问。由于某种原因，默认情况下它们并不相同。

假设我有这个示例布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="EditText default" />

    <EditText
        style="@android:style/Widget.Holo.Light.Spinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="EditText spinner style" />

    <Spinner
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@android:array/imProtocols" />
</LinearLayout> 
```

...这导致：

![](../Images/6727cca13e650903ed2b0a320660c060.png)

从截图中你可以看到：

1.  `Spinner`默认情况下，（3）中的文本大小 比（1）中的**小**`EditText`一点。
2.  如果我将`Spinner`样式应用于`EditText`(2)，那么它的字体与 Spinner 具有相同的“较小”大小。
3.  由于某种原因， `Spinner`-styled`EditText`也没有任何**左填充**。

## 我想要达到的目标

我创建了一个自定义日期时间选择器组件，该组件源自`RelativeLayout`并包含两个`EditText`s。单击后，第一个显示日期选择器对话框，第二个显示时间选择器对话框。

现在，我想将这两个`EditText`s 设置为类似 a 的样式`Spinner`，类似于 ICS **Google Calendar**，如下所示：

![](../Images/94d9fe723d7b513f33118bdb034e28b6.png)

第二行是事件`EditText`的*位置*。*我在其中输入了与From*输入中相同的日期值，这是某种类型的 View（可能也是 EditText），在单击时会显示 DatePickerDialog。

如您所见，*From*和*To*输入中的文本大小与 location 中的相同，`EditText`左侧填充也相同。

**如何在保持相同字体大小和左填充的同时为 EditText 实现类似 Spinner 的外观？**

**在哪里（在 android 样式 XML 文件中）我可以找到各种视图和小部件（在这种情况下为 EditText 和 Spinner）的 textSize、填充等的实际默认值是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T20:30:03.367

好吧，由于没有其他人回答，这就是我所做的：

我已经应用试错法来确定 EditText 的实际文本大小和左填充，然后手动设置这些参数：

```
<style name="PickerEditText" parent="@android:style/Widget.Holo.Light.Spinner">
    <item name="android:paddingLeft">12dp</item>
    <item name="android:textAppearance">?android:attr/textAppearanceMediumInverse</item>
</style> 
```

这是一个肮脏的解决方案，但它似乎甚至适用于系统中不同的文本大小设置，所以现在我坚持使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:54:07.297

[https://github.com/android/platform_packages_apps_contacts/blob/master/res/layout/date_picker.xml](https://github.com/android/platform_packages_apps_contacts/blob/master/res/layout/date_picker.xml)

上面的链接正是他们的做法。[与接受的答案](https://stackoverflow.com/a/13691167)非常相似。我什至会走与他们在实际应用程序中不同的路线，更像是接受的答案。

# python - 使用 Python 到 SSH，使用文件中的已知主机，提取命令的结果

> ID：13531847
> 
> 赞同：-1
> 
> 时间：2012-11-23T15:22:29.473
> 
> 标签：python, ssh

我想连接到 中列出的远程主机`~/.ssh/config`，运行命令（`ps`特别是）并提取输出。

哪个是可以做到这一切的最简单的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:32:56.933

我建议你[Paramiko](https://github.com/paramiko/paramiko)，一个 python 原生 ssh 库。

关于如何使用它的（非常）基本示例（基于 ssh-key 的连接）：

```
import paramiko

client = paramiko.SSHClient()

client.set_missing_host_key_policy(paramiko.AutoAddPolicy())

client.connect('127.0.0.1')

stdin, stdout, stderr = client.exec_command('date')

for line in stdout:
    print line,
print 
```

输出：

```
Fri Nov 23 17:36:09 EET 2012 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:12:52.050

可能最简单的方法是在命令行中使用“while”循环 - 这假设您不一定需要使用 Python ...

对于包含主机地址列表的文件 (hostlist.txt)：

```
#!/bin/bash

while read p; do 
    ssh user1@$p ps
done < hostlist.txt 
```

如果你真的想使用 Python，你可以设置一个类似的循环，并可能使用 Python 的`subprocess`模块来调用 ssh ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:00:17.870

我会简单地做

```
def remote_ps(host):
    import subprocess
    sp = subprocess.Popen(['ssh', host, 'ps'], stdout=subprocess.PIPE)
    out, err = sp.communicate()
    return sp.wait(), out 
```

# audio - 将较大的音频文件编码为 .mpg 时，av_write_frame 失败

> ID：13531848
> 
> 赞同：1
> 
> 时间：2012-11-23T15:22:30.353
> 
> 标签：audio, ffmpeg, video-encoding, libavcodec, avcodec

我正在将实时渲染的视频数据和现有的 .wav 文件编码为 mpg 文件。

为此，我首先编写所有音频帧，然后是来自渲染引擎的视频帧。对于较小的 .wav 文件（< 25 秒），一切正常。但是，一旦我使用更长的 .wav 文件，av_write_frame（在写入音频帧时）在写入大约 100 帧后就会返回 -1。它永远不是失败的同一帧，也永远不是最后一帧。我测试过的任何播放器都可以完美播放所有测试文件。

我正在关注[复用示例](http://ffmpeg.org/doxygen/trunk/muxing_8c-source.html)（或多或少）。

这是我编写音频帧的函数：

```
void write_audio_frame( Cffmpeg_dll * ptr, AVFormatContext *oc, AVStream *st, int16_t sample_val )
{
AVCodecContext *c;
AVPacket pkt = { 0 }; // data and size must be 0;
AVFrame *frame = avcodec_alloc_frame();
int got_packet;

av_init_packet(&pkt);
c = st->codec;

get_audio_frame(ptr, ptr->samples, ptr->audio_input_frame_size, c->channels);
frame->nb_samples =  ptr->audio_input_frame_size;
int result = avcodec_fill_audio_frame(frame, c->channels, c->sample_fmt,
                        (uint8_t *) ptr->samples,
                         ptr->audio_input_frame_size *
                        av_get_bytes_per_sample(c->sample_fmt) *
                        c->channels, 0);
if (result != 0)
{
    av_log(c, AV_LOG_ERROR, "Error filling audio frame. Code: %i\n", result);
    exit(1);
}

result = avcodec_encode_audio2(c, &pkt, frame, &got_packet);
if (result != 0)
{
    av_log(c, AV_LOG_ERROR, "Error encoding audio. Code: %i\n", result);
    exit(1);
}

if (c->coded_frame && c->coded_frame->pts != AV_NOPTS_VALUE)
    pkt.pts= av_rescale_q(c->coded_frame->pts, c->time_base, st->time_base);
pkt.flags |= AV_PKT_FLAG_KEY;

pkt.stream_index= st->index;
av_log(c, AV_LOG_ERROR, "Got? %i Pts: %i Dts: %i Flags: %i Side Elems: %i Size: %i\n", 
        got_packet, pkt.pts, pkt.dts, pkt.flags, pkt.side_data_elems, pkt.size);

/* write the compressed frame in the media file */
result = av_write_frame(oc, &pkt);
if (result != 0) 
{
    av_log(c, AV_LOG_ERROR, "Error while writing audio frame. Result: %i\n", result);
    exit(1);
}
} 
```

所以*“写入音频帧时出错。结果：-1”*是我在一些帧之后总是得到的。

这是我的 get_audio_frame 函数：

```
void get_audio_frame( Cffmpeg_dll* ptr, int16_t* samples, int frame_size, int nb_channels, int16_t sample_val ) 
{
    fread( samples, sizeof( int16_t ), frame_size * nb_channels, ptr->fp_sound_input );
}; 
```

最后，这是我编写所有音频帧的循环（不要担心 .wav 标头，我在该循环之前跳过了它）：

```
while (!feof(ptr->fp_sound_input))
    {
        write_audio_frame( ptr, ptr->oc, ptr->audio_st, -1 );
    } 
```

如您所见，我正在输出数据包中的几乎所有内容并检查是否存在任何可能的错误。除了 av_write_frame 在我编码较长的音频文件一段时间后失败之外，一切似乎都很好。我正在跟踪的所有数据包值对于所有帧都是 100% 相同的（显然，数据指针除外）。此外，如前所述，对于较短的 fp_sound_input 文件，相同的过程可以完美地工作。avcodec_encode_audio2() 和 avcodec_fill_audio_frame() 也永远不会失败。

我用于编码的编解码器是 CODEC_ID_MPEG2VIDEO（视频）和 CODEC_ID_MP2（音频）。.wav 文件保存在 PCM 16 LE 中（都使用完全相同的编码）。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:55:43.367

尝试使用`av_interleaved_write_frame`而不是`av_write_frame`

# c++ - getline 的分段错误

> ID：13531865
> 
> 赞同：-3
> 
> 时间：2012-11-23T15:23:39.790
> 
> 标签：c++, segmentation-fault

我正在编写简单的程序来解决填字游戏。我正在使用 getline 从输入中加载填字游戏，但我收到奇怪的“分段错误”消息，我真的不知道该怎么处理它。这是代码：

```
#include <iostream>
#include <string>
#include <stdlib.h>
using namespace std;

int** allocateCross(int rows, int columns)
{
    int ** cross = new int*[rows];
    for(int i=0;i<rows;i++)
    {
        cross[i] = new int[columns];    
    }
    return cross;
}
void changeValue(int **cross, int rowPosition, int columnPosition, int value)
{
    cross[rowPosition][columnPosition] = value;
}
void printCross(int ** cross, int rows, int columns)
{
    for(int i=0;i<rows;i++){
        for(int j=0;j<columns;j++){
            cout << cross[i][j];
        }
        cout << endl;
    }

}
void setCross(int ** cross, int rows,int columns, int spaces[], int numberOfSpaces)
{
        for(int i=0;i<6;i++){
        for(int j=0;j<6;j++){
            changeValue(cross, i, j, 0);

        }
        for(int i=0;i<(numberOfSpaces*2);i=i+2)
        {
            changeValue(cross, spaces[i], spaces[i+1],1);
        }

    }
}
int testString(string stringToTest, const string allowedChars)
{
    size_t found = stringToTest.find_first_not_of(allowedChars);
    if(found != string::npos)
        return false;
    else
        return true;
}

void wrongInput()
{
    cout << "Wrong input." << endl;
    exit(0);
}
int main()
{
    string line;
    string top;
    string line_r;
    bool stringTester;
    int columns = 0;
    int rows = 0;
    getline(cin,line);
    if(line!="Enter crossword:")
        wrongInput();
    getline(cin,line);
    stringTester = testString(line,"+-");
    if(stringTester != true)
        wrongInput();
    top = line;
    top.erase(top.begin());
    top.erase(top.begin()+(top.size()-1));
    rows = top.size();
    top = line;
    getline(cin,line);
    while(line != top)
    {
        columns++;
        getline(cin,line);
    }

    int ** cross = allocateCross(rows,columns);
    //int spaces[]={};
    setCross(cross,rows,columns,spaces,0);
    printCross(cross,rows,columns);

    return 0;
} 
```

唯一重要的部分是 while 循环。当我输入此输入时：

```
Enter crossword:
+----+
|  * |
|    |
| *  |
+----+ 
```

一切都很好，直到我进入脚本应该停止的第二个++----+，然后我得到分段错误。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T15:32:33.473

首先，阅读所写的评论。

问题似乎在这里：

```
for(int i=0;i<6;i++){
    for(int j=0;j<6;j++){
        changeValue(cross, i, j, 0);
    }
} 
```

为什么这个值 ( `6`) 是硬编码的？为什么`6`而不是`42`？示例中的填字游戏有三行四列 (3x4)，但循环通过 6x6 矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:36:13.547

下面的代码看起来不对。它是否会导致实际的崩溃我不能说，但首先你`+`从顶行的开头和结尾删除，然后你等待一条等于修改后的顶行的行，它永远不会出现。

```
top.erase(top.begin());
top.erase(top.begin()+(top.size()-1));
....
while(line != top) 
```

此外，尝试了解布尔值是什么以及它们是如何工作的。你的`testString`函数应该这样写：

```
bool testString(string stringToTest, const string allowedChars)
{
    return stringToTest.find_first_not_of(allowedChars) != string::npos;
} 
```

这三行：

```
stringTester = testString(line,"+-");
if(stringTester != true)
    wrongInput(); 
```

可以简化为

```
if(!testString(line,"+-"))
    wrongInput(); 
```

# android - mac os x 10.6.8 和“adb devices”无法列出 android 设备

> ID：13531868
> 
> 赞同：1
> 
> 时间：2012-11-23T15:23:43.660
> 
> 标签：android, adb

我可以访问：

*   三星 Galaxy Nexus (Android 4.0.4)
*   HTC Incredible S (Android 4.0.4)
*   HTC 野火 (Android 2.2.1)

对于我的生活，我无法在 Mac OS X 10.6.8 上的 adb 中显示任何内容。我确保所有设备都打开了 USB 调试，我没有安装 EasyTether（这似乎是设备未列出的一个普遍原因）。

我尝试从 Android SDK 中删除我能找到的所有内容并再次下载 - 但我仍然什么也没看到。

到目前为止，必须花费 5 个小时寻找各种修复。

我只是一直看到这个：

```
sh-3.2# adb devices
List of devices attached 

sh-3.2# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:36:42.607

对我有用的是编辑位于 HOME/.android 目录中的 adb_usb.ini 。在那里我添加了设备的供应商 ID，键入“adb kill-server”、“adb start-server”，它显示在 adb devices 之后。要发现供应商 ID，您可以检查“/var/log”下的内核日志文件。

# java - Android：部署冻结（Java 堆空间）

> ID：13531875
> 
> 赞同：1
> 
> 时间：2012-11-23T15:24:09.387
> 
> 标签：java, android, eclipse, memory, heap-memory

今天我尝试将我的 android 应用程序从我的 mac 部署到 USB 连接设备。它一直有效，但今天日食冻结并返回；

```
Unable to execute dex: Java heap space
Java heap space 
```

几分钟后。

我的 eclipse.ini 具有以下内存属性：

`-XX:MaxPermSize=1536m -Xms40m -Xmx1536m`

这还不够吗？是的，我的 RAM 是运行 Mountain Lion 的 8GB。

干杯!

# mysql - 如何按 MySQL 中字段值中的最后一项分组？

> ID：13531877
> 
> 赞同：1
> 
> 时间：2012-11-23T15:24:18.677
> 
> 标签：mysql

我在 MySQL 表中有一个名为“ColorCode”的字段，其值如下：

```
28373 GYY green
23423 HH red
23423 HH green  
2343 QWE red    
SKDJF blue  
green 
```

显示每种颜色出现次数的 SQL 语句是什么，类似于受 PHP 影响的伪代码：

```
SELECT COUNT(*) FROM products GROUP BY END(EXPLODE(ColorCode)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T15:28:17.673

丑陋，但像这样

```
group by RIGHT(ColorCode, LOCATE(' ', REVERSE(ColorCode)) 
```

如果您经常运行此查询，请务必考虑将“最后一个”值拆分为自己的字段，以便至少可以对其进行索引。大型桌子上的性能将非常糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:30:14.530

这个怎么样：

```
GROUP BY SUBSTRING_INDEX(ColorCode,' ',-1); 
```

~~不过，这不适用于您的最后一个示例。~~

显然它**也**适用于您的最后一个示例！:D

这是一个演示：[http ://sqlfiddle.com/#!2/d41d8/4088](http://sqlfiddle.com/#!2/d41d8/4088)

# ios - 将 CMSampleBufferRef 缓冲到 CFArray

> ID：13531878
> 
> 赞同：4
> 
> 时间：2012-11-23T15:24:20.670
> 
> 标签：ios, avfoundation, quicktime

我正在尝试将我从 iPhone 的摄像机收到的 150 个 CMSampleBufferRef 收集到一个数组中。不知何故，相机在 13 个缓冲区后停止调用委托。我尝试使用 NSMutableArray、CFArray。没有任何帮助。我怀疑它与记忆有关，但我对记忆警告一无所知。

我很乐意为此提供帮助。
提前谢谢。

```
 session = [[AVCaptureSession alloc]init];
            //Quality Preset
            if ([session canSetSessionPreset:AVCaptureSessionPresetLow]) {
                session.sessionPreset = AVCaptureSessionPresetLow;
            }

            [session beginConfiguration];
            AVCaptureDevice *videoDevice = [AVCaptureDevice   defaultDeviceWithMediaType:AVMediaTypeVideo];
            AVCaptureDeviceInput *newVideoDeviceInput = [AVCaptureDeviceInput deviceInputWithDevice:videoDevice error:nil];

            AVCaptureVideoDataOutput *output = [[AVCaptureVideoDataOutput alloc] init];

            output.videoSettings = @{ (NSString *)kCVPixelBufferPixelFormatTypeKey : @(kCVPixelFormatType_32BGRA) };
            dispatch_queue_t queue = dispatch_queue_create("MyQueue", NULL);
            [output setSampleBufferDelegate:self queue:queue];

            [session addOutput:output];
            [session addInput:newVideoDeviceInput];
            AVCaptureConnection *conn = [output connectionWithMediaType:AVMediaTypeVideo];

            if (conn.supportsVideoMinFrameDuration)
                conn.videoMinFrameDuration = CMTimeMake(1, 10);
            if (conn.supportsVideoMaxFrameDuration)
                conn.videoMaxFrameDuration = CMTimeMake(1, 10);

            [session commitConfiguration];

            arr = CFArrayCreateMutable( NULL, 150, &kCFTypeArrayCallBacks );
            counter=0;
            [session startRunning]; 
```

那是我的 StartRecording 方法。

```
 - (void)captureOutput:(AVCaptureOutput *)captureOutput
        didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
               fromConnection:(AVCaptureConnection *)connection {
            if (counter==150) {
        [self StopRecording:nil];
        return;
    }
            CFArrayInsertValueAtIndex(arr, counter, sampleBuffer);

            counter= (counter+1)%150;

        }
        @end 
```

这就是缓冲区收集方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T10:05:24.217

你想做什么？AVFoundation 将 CMSampleBuffer 传递给硬件编码器。我的理论是当它没有检测到传入的帧时，它只是停止传递你的帧。相反，尝试将 CVPixelBufferRef 存储在 CVPixelBufferPool 中。

```
CVPixelBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
```

# iphone - 用户点击 UILocalNotification：它可以将数据传递给应用程序吗？

> ID：13531884
> 
> 赞同：5
> 
> 时间：2012-11-23T15:24:46.093
> 
> 标签：iphone, ios, uilocalnotification

我正在创建一个本地`UILocalNotification`并将其作为横幅显示给用户。是否可以设置它，以便当用户点击它并返回应用程序时，应用程序将收到有关特定类型通知的某种数据？我想在应用程序中打开一个特定的视图控制器。我认为最好的方法是本质上向应用程序发送一个 URL，或者有没有办法访问该应用程序，`UILocalNotification`以便我可以测试哪种类型是并采取正确的行动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T19:25:12.830

要从传递给 iOS 应用程序的本地 NSUserNotification 获取数据，您需要做的就是实现以下方法：`- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification`.

问题是，当应用程序在后台发布本地通知时（即当用户点击通知然后返回应用程序时）以及应用程序当时在前台时，都会调用此方法当本地通知触发时（毕竟它是在计时器上）。那么应该如何判断应用程序在后台还是前台时触发了通知呢？这很简单。这是我的代码：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {
    UIApplicationState state = [application applicationState];
    if (state == UIApplicationStateInactive) {
        // Application was in the background when notification was delivered.
    } else {
        // App was running in the foreground. Perhaps 
        // show a UIAlertView to ask them what they want to do?
    }
} 
```

此时您可以处理基于`notification.userInfo`NSDictionary 的通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:27:45.600

我们需要实现 NSUserNotificationCenterDelegate 并定义这个方法：

```
- (void)userNotificationCenter:(NSUserNotificationCenter *)center didActivateNotification:(NSUserNotification *)notification 
```

例子：

这就是我在“通知程序”应用程序中所做的。

```
- (void) userNotificationCenter:(NSUserNotificationCenter *)center didActivateNotification:(NSUserNotification *)notification
{
NSRunAlertPanel([notification title], [notification informativeText], @"Ok", nil, nil);
}

- (void) userNotificationCenter:(NSUserNotificationCenter *)center didDeliverNotification:(NSUserNotification *)notification
{
notifications=nil;
[tableView reloadData];
[center removeDeliveredNotification: notification];
} 
```

当通知被激活时（用户点击），我只是用一个面板通知用户（我可以使用一个 hud 窗口）。在这种情况下，我会立即删除传递的通知，但这不是通常发生的情况。通知可能会保留有一段时间并在 1/2 小时后被删除（这取决于您正在开发的应用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T20:11:10.857

1 - 在你的项目中定义一些类来实现 NSUserNoficationCenterDelegate 协议（记录[在这里](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUserNotificationCenterDelegate_Protocol/Reference/Reference.html)）

```
@interface someObject : NSObject  <NSUserNotificationCenterDelegate>
{ 
- (void)userNotificationCenter:(NSUserNotificationCenter *)center didActivateNotification:(NSUserNotification *)notification;
} 
```

2 - 将定义为#1 的对象的实例设置为默认通知中心的代表。

```
[[NSUserNotificationCenter defaultNotificationCenter] setDelegate: someObject]; 
```

现在，只要用户点击/单击通知，您就会被调用 didActivateNotification。您将拥有您创建的原始通知。因此，您需要的任何信息都应该可供您使用。

如果您想要/需要特殊信息（通知标题、消息等除外），您可能需要在安排发送通知之前在通知中设置其他应用程序特定信息。例如：

```
NSUserNotification* notification = [[NSUserNotification alloc] init];
NSDictionary* specialInformation = [NSDictionary dictionaryWithObjectsAndKeys: @"specialValue", @"specialKey", nil];
[notification setUserInfo:specialInformation]; 
```

# eclipse - 是否可以使用环境变量而不是“链接资源”？

> ID：13531886
> 
> 赞同：2
> 
> 时间：2012-11-23T15:25:00.530
> 
> 标签：eclipse, flexbuilder

我们的项目文件有一个绝对路径，我试图用链接资源替换这些实例，以使开发环境在不同工作站之间可移植。

我们的 Windows 工作站已经设置了许多有用的环境变量来确定构建项目部分所需的各种资源的位置。

现在我发现从 Flex Builder（即 Eclipse）中无法使用这些环境变量，但每个用户都必须进入 Workspace>General settings 并设置“Linked Resources”，这适用于所有意图并且用途与环境变量完全相同，但用于 Eclipse。这是一个额外的重复步骤，考虑到此信息已在工作站上可用。有没有办法告诉 Eclipse 使用环境变量而不是链接资源，或者创建引用环境变量的链接资源？

我认为唯一方便的解决方案可能是自动创建链接资源的批处理文件，但这对我来说似乎很笨拙且容易出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T17:46:47.707

是的！您可以在项目属性对话框`${ENV-name}`的 Eclipse *Linked Resources表中使用该令牌。*例如，如果您指定`${ENV-TEMP}`它将解析为环境变量的值`TEMP`。

（奇怪的是，我在网上的任何地方都找不到对`${ENV}`语法的解释，但我只是猜测它可能使用`${ENV-name}`语法，类似于如何`${project_loc}/..`转换为`PARENT-1-project_loc`...）

# c++ - 构建 C++ 项目时出错未定义的引用

> ID：13531890
> 
> 赞同：0
> 
> 时间：2012-11-23T15:25:22.550
> 
> 标签：c++

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我不知道这是什么问题：

```
/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/crt1.o: In function `_start':
(.text+0xc): undefined reference to `__libc_csu_fini'
/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/crt1.o: In function `_start':
(.text+0x11): undefined reference to `__libc_csu_init' 
```

我正在用 Cmake 构建一个 C++ 项目。无论如何我可以检查错误的详细信息吗？

# c# - 正则表达式匹配 xml 属性值

> ID：13531891
> 
> 赞同：-4
> 
> 时间：2012-11-23T15:25:23.270
> 
> 标签：c#, xml, regex, parsing

我想获取这个 xml 属性的整数值`limit=\"25\"`

我试过这个：`Match match = Regex.Match(response.Content, "(?<=limit=))\\d+");` 给我一个错误：“太多）的。

而这个：`Match match = Regex.Match(response.Content, @"limit=([0-9])$"` 这什么都不返回，匹配不成功

从这个xml：

```
<issues type="array" limit="25" total_count="251" offset="0">
<issue>
<id>4317</id> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:29:01.363

您的第一个正则表达式中有太多 )。数一数。

由于属性值周围的引号，您的第二个失败。试试`"limit=\"([0-9])\"$"`吧。

很多人会告诉您改用 XML 解析器。我强烈建议，如果您要做的不仅仅是从众所周知的 XML 中提取非常小的数据，因为 XML 本身不能用正则表达式解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:30:45.123

`Regex`可用于解析 XML，因为它的格式很**严格**，但不**建议**使用它

采用`LINQ2XML`

```
XElement doc=XElement.Parse(response.Content);       
var value=doc.Attribute("limit").Value; 
```

**或者**

```
var value=Regex.Match(response.Content, @"limit=""(\d+)""",RegexOptions.Singleline).Groups[1].Value; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T15:57:46.280

最好用

字符串 TheStringNeededToBeParsed = "... xml ";

TheStringNeededToBeParsed .IndexOf(...

# objective-c - iOS 的按钮轮播

> ID：13531898
> 
> 赞同：0
> 
> 时间：2012-11-23T15:26:02.817
> 
> 标签：objective-c, ios

我需要一个 UIButton 或 UIImageView 的轮播，就像所附图像中的那样。我在 Cocoa Controls 中搜索过，但没有类似的东西。

![在此处输入图像描述](../Images/399f782e5c48956765041a128c700a93.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:35:55.323

iOS SDK 中没有轮播类。但是你总是可以寻找 3rd 方库。

[像这个](https://github.com/nicklockwood/iCarousel)

您发布的示例图像似乎是通过大量 3D 工作创建的。我不认为你可以通过从 XCode 中拖动控件来创建相同的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:40:36.960

[iCarousel](http://www.cocoacontrols.com/platforms/ios/controls/icarousel)可能是一个好的开始。

没有“循环”配置，但也许您可以使用该库来实现您想要的。

# ajax - 404 错误 admin-ajax.php 页面

> ID：13531901
> 
> 赞同：0
> 
> 时间：2012-11-23T15:26:10.003
> 
> 标签：ajax, wordpress, http-status-code-404

我正在尝试使用我自己开发的插件将产品从亚马逊导入到我的 Wordpress 网站。该插件使用 Wordpress Ajax 函数循环遍历所有产品并为每个产品创建一个帖子。

该插件几乎可以正常工作，但导入所有产品需要一段时间，并且每次导入确切的 496 个项目后，Firebug 控制台都会为 admin-ajax.php 文件提供 404 错误。

请参阅： http: [//only-media.nl/404.PNG](http://only-media.nl/404.PNG)的屏幕截图。

奇怪，因为它在导入前 496 个项目期间确实有效，但随后出现 404 错误。该插件需要导入800个产品，所以还没有完成。谁知道解决办法？？？我在 hostgator 托管，不知道这是有用的信息，但仍然..

编辑：我想我修好了。似乎脚本返回了 404 错误，因为 Ajax 脚本需要很长时间才能完成和响应。因为当我打开错误报告时，脚本会在每个循环中返回一个未声明变量的错误，以及成功添加的所有产品。关闭错误报告后，添加 400 个产品后，我再次收到 404 错误。所以我想我必须在每个循环中返回一个响应。我要试试。

# actionscript-2 - 如何选择 Button(as2) 的状态？

> ID：13531904
> 
> 赞同：1
> 
> 时间：2012-11-23T15:26:15.423
> 
> 标签：actionscript-2

还有一次我需要你的帮助。

我正在一个有很多按钮的项目中工作，其中包含文本字段。我需要更改这些文本字段的文本。我怎样才能使用 as2 做到这一点？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:31:14.767

TextFieldNameHere.text = "测试";

或者

TextFieldNameHere.text = StringVariableNameHere

# css - 如何将 a:after 应用于链接，而不是锚点？

> ID：13531906
> 
> 赞同：3
> 
> 时间：2012-11-23T15:26:28.317
> 
> 标签：css

我想用 CSS 将一个字符应用到我的一些 HREF 的末尾，我找到了一种可行的方法，但它也将字符应用到了锚点。我不想要我的主播上的角色。到目前为止，我只能将属性应用到整个 DIV，我不能让它坚持一个简单的类，我只能选择性地应用到 HREF。

这是我所拥有的：

```
#sample a:after {
position: absolute; /* Prevent underline of arrow */
padding-left:2px; /* Add a little space between text and arrow */
content: "\00bb"; /* Unicode hex for &raquo; */
} 
```

有什么建议么？

我的 DIV 确实有一些链接样式，我需要移动它吗？例子：

```
#sample a:hover {
    color:#CCCCFF; 
    text-decoration:underline; 
    margin-top:20px;
} 
```

我的老板说：让网站上的所有链接都有字符，除了我们说不应该有的链接。当然，他没有工作的例子可以给我看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:30:03.407

只需使用`a[href] {`这意味着定位所有具有`href`属性集的锚元素。更多信息可以在[W3C 规范](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)中找到。

[例子。](http://jsfiddle.net/EMEYY/)

**HTML**

```
<a href="#link" id="link">link</a>
<br />
<a id="anchor">anchor</a>​ 
```

**CSS**

```
a[href]:after {
  position: absolute; /* Prevent underline of arrow */
  padding-left:2px; /* Add a little space between text and arrow */
  content: "\00bb"; /* Unicode hex for &raquo; */
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T17:37:34.193

通常，在 CSS 中引用链接的最跨浏览器方式是使用`:link`和`:visited`伪元素（分别代表未访问和已访问的链接）而不是选择器`a`：

```
#sample :link:after, #sample :visited:after 
```

在这种情况下，您也可以使用更简单的方法来使用属性选择器，就像您也使用`:after`伪类一样（它的支持比属性选择器的限制要少一些）：

```
#sample a[href]:after 
```

最简单的是，不要将`a`元素用于链接以外的目的。`<a name=...>`已弃用 of ，取而代之的是在某些自然元素上使用该属性`id`。

**补充**：问题也是关于防止选定链接的箭头。这可以实现，以便您使用`class=noarrow`这些链接上的属性来指示选择，并添加一个 CSS 规则，将生成的内容设置为空：

```
#sample :link.noarrow:after, #sample :visited.noarrow:after {
  content: ""; 
} 
```

`:not(...)`由于浏览器支持方面的问题，这可能是比使用选择器更好的方法。但在现代浏览器上，以下方法也有效：不使用两条规则，而只使用一条排除特定类的规则：

```
#sample :not(.noarrow):link:after, #sample :not(.noarrow):visited:after {
  content: "\00bb"; /* Unicode hex for &raquo; */
  padding-left: 2px;
} 
```

如何防止箭头下划线（生成的内容）是另一个问题。问题中使用的技巧似乎不适用于 IE。此外，它使箭头覆盖文本。我对这个问题没有很好的答案，我认为最好将它作为一个单独的问题进行讨论（除非你可以在现有问题中找到它的讨论）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T15:28:30.120

我会为锚点添加一个类名并覆盖链接上使用的声明的 CSS。

# symfony - Symfony2 - 如何通过操作而不是对象来管理角色权限

> ID：13531908
> 
> 赞同：0
> 
> 时间：2012-11-23T15:26:28.340
> 
> 标签：symfony, permissions, role

我想管理我的角色的权限。您应该知道我的角色存储在数据库中。一般来说，权限是针对每个对象的，我会喜欢为每个动作做权限。你怎么知道的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:54:08.840

我认为对于您的用例，[ACL](http://symfony.com/doc/current/cookbook/security/acl.html)最适合。

设置有点复杂，但有很多好处。

# android - android viewpagerindicator，如何设置指标计数

> ID：13531912
> 
> 赞同：0
> 
> 时间：2012-11-23T15:26:45.433
> 
> 标签：android, android-viewpager, viewpagerindicator

我正在使用 Jake Wharton 的 viewpagerindicator。因为我想使用无限的 ViewPager，也就是说我只有 4 页，但我为 pager 设置了 400 页。我使用 currId%4 为寻呼机获取正确的内容。但现在的问题是，如何自己设置指标计数。现在 ViewPager 下面有 400 个指标，我只需要其中的 4 个。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:36:48.237

你可以在你的`FragmentPagerAdapter`里面设置这个`getCount()`：

```
 @Override
    public int getCount() {
        return 4;
    } 
```

# c# - 以正确的方式做 DRY 的事情

> ID：13531918
> 
> 赞同：2
> 
> 时间：2012-11-23T15:27:09.127
> 
> 标签：c#, .net, oop

我有一个解决方案，其中有两个项目，每个项目都生成一个单独的 dll，供另一个 Windows 应用程序使用。这些项目中的每一个都有一个名为 MyActions 的类，只有一个方法，像这样

**项目1**

```
 public class MyActions
    {
        public SomeTypeA DoJob(string str1, string str2)
        {
        }
    } 
```

**项目 2**

```
 public class MyActions
    {
        public SomeTypeB DoJob(string str1)
        {
        }
    } 
```

这两个类的两种返回类型如下

```
 public class SomeTypeA 
    {
         public string stringA { get; set; }
         public int someInt { get; set; }
    }

public class SomeTypeB 
{
     public string someStringA { get; set; }

} 
```

这些单独项目的两个类中的方法 DoJob 几乎 80% 的代码是相同的。Project1 是一个`MyActions`类的`DoJob`方法有一些特定于 Project1 的额外位的那个。现在这里是转折点。Project1 最终将被废弃，它的 dll 将不再被使用。我想以最好的方式编写代码，以确保没有重复代码，这样我就不必做一旦 Project1 停止，任何修改以删除 Project2 中的任何不需要的代码。

我正在考虑使用继承并覆盖 DoJob 方法。如果它们的返回类型不同并且具有不同的输入参数，那将如何工作？也许将 Project1 的 MyActions 类中的参数之一推送到其构造函数？我还考虑在 Project1 中添加指向 Project2 的 MyActions 类的链接。但不确定如何继续实施，而不是重复自己或以后可能遇到无法预料的问题。任何提示，建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:44:25.293

如果（且仅当）两个类中的两个方法的参数和返回类型实际上不同，则分解出逐行相同的代码，假设它是一个块，并在其中创建一个静态方法一个新的静态类，传递公共代码所需的参数。

如果有多个块，只需有多个方法。

从每个原始方法中适当地调用这些方法。

如果您想在这些类之间创建层次关系（只有在合乎逻辑的情况下才应该这样做），只需让它们都继承一个公共类型，并使上面的方法成为该公共类的受保护方法。然后只需从原始方法中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:39:18.543

```
public class MyActions
{
    public ISomeType DoJob(ISomeParam item)
    {
    }
}

public class SomeTypeA : ISomeType 
public class SomeTypeB : ISomeType 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T15:48:21.433

你对继承的想法是好的。从您考虑让项目 1 从项目 2 继承的两行之间阅读的问题。这是一种可能性，但可能不是最佳解决方案。这是我的建议。

为两个项目都扩展的 MyActions 创建一个超类。您可以将在两个项目之间共享的所有代码（您的方法的 80% 代码）移动到此类中。然后在每个项目中的 MyAction 中的具体实现根据需要实现 DoJob 方法，并利用超类中提供的方法。

一旦你废弃了项目 1，就不需要对项目 2 的代码进行任何更改。你最终得到了一个超级类，尽管在这种情况下你真的不需要更多了。但是，您不会在任何地方重复自己。

我还不熟悉 java 和 C# 之间的确切差异，如果有差异，请多多包涵。这就是代码在 java 中的样子。

```
abstract class AbstractMyActions {

    protected SomeType commonMethodForBothProjects() {
        ...
    }
}

public class MyActionsA extends AbstractMyActions {

     public SomeType doJob(SomeParameter ..., SomeParameter ...) {
         $this->commonMethodForBothProjects();
         // Additional steps
     }
} 
```

你明白了。

# jquery - 通过 CSS3 像循环一样滑动

> ID：13531920
> 
> 赞同：2
> 
> 时间：2012-11-23T15:27:12.813
> 
> 标签：jquery, css

我有这个结构。

HTML：

```
<div id="sequence">
            <img class="prev" src="themes/bc/imagesx/bt-prev.png" alt="Previous" />
            <img class="next" src="themes/bc/imagesx/bt-next.png" alt="Next" />
            <ul>
                <li>
                    <div class="info animate-in">
                        <h2>Built using Sequence.js</h2>
                        <p>The Responsive Slider with Advanced CSS3 Transitions</p>
                    </div>
                    <img class="sky animate-in" src="themes/bc/imagesx/bg-clouds.png" alt="Blue Sky" />
                    <img class="balloon animate-in" src="themes/bc/imagesx/balloon.png" alt="Balloon" />
                </li>
                <li>
                    <div class="info">
                        <h2>Creative Control</h2>
                        <p>Create unique sliders using CSS3 transitions -- no jQuery knowledge required!</p>
                    </div>
                    <img class="sky" src="themes/bc/imagesx/bg-clouds2.png" alt="Blue Sky" />
                    <img class="aeroplane" src="themes/bc/imagesx/aeroplane.png" alt="Aeroplane" />
                </li>
                <li>
                    <div class="info">
                        <h2>Cutting Edge</h2>
                        <p>Supports modern browsers, old browsers (IE7+), touch devices and responsive designs</p>
                    </div>
                    <img class="sky" src="themes/bc/imagesx/bg-clouds3.png" alt="Blue Sky" />
                    <img class="kite" src="themes/bc/imagesx/kite.png" alt="Kite" />
                </li>
            </ul>
        </div> 
```

CSS：

```
.sky {
    width: 100%;
    right: -100%;
    opacity: 1;
    top: auto;
    bottom:-25px;
    vertical-align: middle;

    -webkit-transition-property: left top;
    -moz-transition-property: left top;
    -o-transition-property: left top;
    -ms-transition-property: left top;
    transition-property: left top;
    z-index: 1;
}

.sky.animate-in {
    right: 0%;
    opacity: 1;
    top: auto;
    bottom:-25px;

    -webkit-transition-duration: 4s;
    -moz-transition-duration: 4s;
    -o-transition-duration: 4s;
    -ms-transition-duration: 4s;
    transition-duration: 4s;

    -webkit-transition-property: left top;
    -moz-transition-property: left top;
    -o-transition-property: left top;
    -ms-transition-property: left top;
    transition-property: left top;
    z-index: 1;
    ransition-timing-function: ease;
-moz-transition-timing-function: ease; /* Firefox 4 */
-webkit-transition-timing-function: ease; /* Safari and Chrome */
-o-transition-timing-function: ease; /* Opera */

}

.sky.animate-out {
    right: 100%;
    opacity: 1;
    top: auto;
    bottom:-25px;

    -webkit-transition-duration: 4s;
    -moz-transition-duration: 4s;
    -o-transition-duration: 4s;
    -ms-transition-duration: 4s;
    transition-duration: 4s;

    -webkit-transition-property: left top;
    -moz-transition-property: left top;
    -o-transition-property: left top;
    -ms-transition-property: left top;
    transition-property: left top;
    z-index: 1;
    transition-timing-function: ease;
-moz-transition-timing-function: ease; /* Firefox 4 */
-webkit-transition-timing-function: ease; /* Safari and Chrome */
-o-transition-timing-function: ease; /* Opera */
} 
```

我正在使用[Sequence JS](http://www.sequencejs.com/)插件。一切正常。但我希望 bgclouds 和 bgclouds2 在过渡时不要分开。同一时间开始，同一时间结束。但现在，一帆风顺。

我可以通过 CSS3 制作该结构吗？[http://css3.bradshawenterprises.com/sliding/](http://css3.bradshawenterprises.com/sliding/)点击image 2，进入image1，直接启动image2。

对不起我的严厉表达。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T07:46:26.217

您可能想研究 CSS 中的 @keyframes。这些允许您设置项目在动画中开始和停止的时间。

# ajax - WooCommerce 插件，通过 Ajax 向购物车添加变化

> ID：13531923
> 
> 赞同：2
> 
> 时间：2012-11-23T15:27:21.923
> 
> 标签：ajax, wordpress, woocommerce

我正在寻找通过 Ajax 添加产品变体的解决方案。

正如我发现的所有 WooCommerce 基本功能只允许将产品添加到购物车中，前提是它不是变体项目。

我`<?php echo woocommerce_template_loop_add_to_cart() ?>`用来显示添加到购物车按钮，但此按钮是常规提交按钮。

如何使用 Ajax 添加到购物车使变量项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T10:23:39.020

我为这样的可变产品创建了 AJAX 并将其添加到购物车：

抱歉耽搁了，这是扩展的答案：

我包含了一个名为 added-to-cart.js 的新 js 文件，该文件包含以下代码。有一些额外的代码用于处理弹出窗口并增加您可能想要删除的购物车计数器。

/* 开始 */

```
jQuery(function($) {

/* event for closing the popup */
$("div.close").hover(
                function() {
                    $('span.ecs_tooltip').show();
                },
                function () {
                    $('span.ecs_tooltip').hide();
                }
            );

$("div.close").click(function() {
    disablePopup();  // function close pop up
})

$("a.close").click(function() {
    disablePopup();  // function close pop up
});

$(this).keyup(function(event) {
    if (event.which == 27) { // 27 is 'Ecs' in the keyboard
        disablePopup();  // function close pop up
    }
});

    $("div#backgroundPopup").click(function() {
    disablePopup();  // function close pop up
});

$('a.livebox').click(function() {
    //alert('Hello World!');
return true;
});

setAjaxButtons(); // add to cart button ajax

function loading() {
    $("div.loader").show();
}
function closeloading() {
    $("div.loader").fadeOut('normal');
}

// AJAX buy button for variable products
function setAjaxButtons() {
   $('.single_add_to_cart_button').click(function(e) {
      var target = e.target;
      loading(); // loading
      e.preventDefault();
      var dataset = $(e.target).closest('form');
      var product_id = $(e.target).closest('form').find("input[name*='product_id']");
      values = dataset.serialize();

        $.ajax({
          type: 'POST',
          url: '?add-to-cart='+product_id.val(),
          data: values,
          success: function(response, textStatus, jqXHR){
                loadPopup(target); // function show popup
                updateCartCounter();
            },
        });    
      return false;
   });    

}

function updateCartCounter() {
    var counter = $('.widget_shopping_cart_content').text().replace(/\s/g, '');
    if (counter == '') {
        $('.widget_shopping_cart_content').text("1");
    }
    else {
        $('.widget_shopping_cart_content').text(++counter);
    }
}

var popupStatus = 0; // set value

function loadPopup(target) {

    var currentPopup = $(target).parents(".single_variation_wrap").find("#toPopup");
    var currentBgPopup = $(target).parents(".single_variation_wrap").find("#backgroundPopup");

    if(popupStatus == 0) { // if value is 0, show popup
        closeloading(); // fadeout loading
        currentPopup.fadeIn(0500); // fadein popup div
        currentBgPopup.css("opacity", "0.7"); // css opacity, supports IE7, IE8
        currentBgPopup.fadeIn(0001);
        popupStatus = 1; // and set value to 1
    }
}

function disablePopup() {
    if(popupStatus == 1) { // if value is 1, close popup
        $(".single_variation_wrap > div:nth-child(2)").fadeOut("normal");
        $(".single_variation_wrap > div:nth-child(4)").fadeOut("normal");
        popupStatus = 0;  // and set value to 0
    }
}
}); // jQuery End 
```

# linux - 如何通过Linux上的命令行发送嵌入在邮件中的png文件？

> ID：13531924
> 
> 赞同：5
> 
> 时间：2012-11-23T15:27:29.880
> 
> 标签：linux, image, email, embed

我试图通过命令行在电子邮件正文中发送 png 文件。我一直在使用以下命令：

```
uuencode file.png file.png| mail user@example.com 
```

但它会将文件附加到邮件中，而不是将其嵌入正文中。你能告诉我如何发送邮件中嵌入了 png 文件的邮件吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T16:32:54.040

您想创建一个 mime HTML 电子邮件，例如：

[如何在电子邮件中嵌入图像](https://stackoverflow.com/questions/4312687/how-to-embed-images-in-email/4312865#4312865)

然后获取标题（第一个边界之前的所有行），从该输入中删除它们并在邮件之后使用 -a 命令单独添加它们，例如：

[https://stackoverflow.com/a/12262421/2244213](https://stackoverflow.com/a/12262421/2244213)

# c# - 如何从 Metro W8 获取元素属性？

> ID：13531928
> 
> 赞同：0
> 
> 时间：2012-11-23T15:27:50.893
> 
> 标签：c#, .net, silverlight, windows-8, microsoft-metro

我是自动化测试工程师并使用 SilkTest 执行自动化

有什么方法可以获取活动的 Metro 窗口元素（例如名称、样式、坐标、子元素）？

最新的 SilkTest 13.5 版本根本看不到 Metro 对象 :(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T05:55:03.293

从评论中无法确定您是否正在查看 SilkTest 以外的选项。如果您这样做，请查看**支持**Metro 应用程序的[RIATest 。](http://www.cogitek.com/riatest/features/technologies/windows.html)

 **从 6.0 版开始，RIATest 中的一些特性专门针对 Metro 风格的应用程序自动化，特别是：

*   能够始终掌握 Metro UI，让您可以同时查看 Metro 应用程序和 RIATest IDE，并在自动化 Metro 应用程序时最大限度地减少从桌面到 Metro 屏幕的切换。

*   记录在本机 Windows GUI 元素（包括 Metro GUI）上执行的操作。记录器分析您的脚本代码并重用您的变量名称以生成更清晰的记录脚本，类似于您手动编写自动化脚本的方式。

*   Metro UI 中 Windows UI 自动化实施中[此类错误](https://connect.microsoft.com/VisualStudio/feedback/details/779279/ui-automation-tree-is-broken-for-windows-8-store-application)的无缝解决方法。

*免责声明：我在 RIATest 公司 Cogitek 工作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T18:11:43.600

来自[SilkTest 13.5](http://supportline.microfocus.com/Documentation/books/ASQ/SilkTest/135/en/SilkTest_ReleaseNotes.pdf)发行说明

![在此处输入图像描述](../Images/e00bcce4192451429c97e271cdfeb7ed.png)**

# php - 如何将json数据转换成jquery代码？

> ID：13531929
> 
> 赞同：0
> 
> 时间：2012-11-23T15:27:53.383
> 
> 标签：php, jquery

php json_encode($object) 结果是

```
[{"price_id":"1","website_id":"0","price_qty":2,"price":"90.0000"},
 {"price_id":"2","website_id":"0","price_qty":5,"price":"80.0000"},
 {"price_id":"3","website_id":"0","price_qty":8,"price":"70.0000"}] 
```

有人告诉我，`var sorted = arrayWithJsonData.sort(function(a,b){}`

如何使用上面的 php json_encode($object) 到 arrayWithJsonData。我使用了以下方式，但它显示 TypeError: object.sort is not a function

首先：在php中我做了：`echo '<div style="display:none;" id="object">'.$object.'</div>';`然后在jquery中使用

```
var object=jQuery("#object").text(); // first sort the array var sorted = object.sort(function(a,b){} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:41:02.653

```
 var arrayWithJsonData = $.parseJSON($('#object').text()); 
```

`$.parseJSON`是一个 jQuery 实用程序，用于将格式良好的 json 字符串转换为 json 对象（jQuery 文档：[http](http://api.jquery.com/jQuery.parseJSON/) ://api.jquery.com/jQuery.parseJSON/ ）。在我们的例子中，`$('#object').text()`匹配元素的方法返回格式良好的 json 字符串，它是 PHP 函数的输出`json_encode($object)`。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:29:30.323

您需要先解析对象，以便 javascript(jQuery) 可以理解它：

```
JSON.parse(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:35:00.540

```
var arrayWithJsonData = <?php json_encode($object) ?>;
var sorted = arrayWithJsonData.sort(function(a, b){
    // Sort criteria between a and b
}); 
```

# c - 将指针交给 C 中的另一个函数

> ID：13531933
> 
> 赞同：0
> 
> 时间：2012-11-23T15:28:03.353
> 
> 标签：c, function, pointers, struct

我在处理这段代码时遇到了问题。当我执行“PrepareEncryption”（例如）时，代码返回一个有效的指针，但是当我将它传递给“EncryptBig”时它不再有效（指向随机数）。我最好的选择是删除原始结构。那么，如果这是问题所在，我该如何保存它呢？而且我知道顺便说一句有内存泄漏。

```
struct filecrypt
{
    FILE* bestand;
    FILE* nieuwbstnd;
    unsigned int positie;
    unsigned int size;
    unsigned int huidig;
    float procentum;
};

struct filecrypt *PrepareEncryption(char* locatie)
{
    struct stat file_status;
    struct filecrypt origineel, *mirror;
    int error;
    char* nieuw;

    if (stat(locatie, &file_status) != 0)
        return NULL;

    error = fopen_s(&origineel.bestand, locatie, "rb");
    if (error != 0)
        return NULL;

    error = strlen(locatie)+5;
    nieuw = (char*)malloc(error);
    if (nieuw == NULL)
        return NULL;
    strcpy_s(nieuw, error-3, locatie);
    strcat_s(nieuw, error, ".cpt");

    error = fopen_s(&origineel.nieuwbstnd, nieuw, "wb+");
    if (error != 0)
        return NULL;

    origineel.huidig = 0;
    origineel.positie = 0;
    origineel.procentum = 0.0f;
    origineel.size = file_status.st_size;
    mirror = &origineel;
    return mirror;
}

float EncryptBig(struct filecrypt *handle)
{
    int i, index = 0;
    float calc;
    char buf, *bytes = (char*)malloc(10485760); // 10 MB
    if (bytes == NULL)
    {
        handle = NULL;
        fcloseall();
        return -1.0f;
    }

    for (i = handle->huidig; i < (handle->huidig+10485760); i++)
    {
        if (i > handle->size)
            break;

        fseek(handle->bestand, i, SEEK_SET);
        fread_s(&buf, 1, 1, 1, handle->bestand);

        __asm
        {
            mov         eax, dword ptr [bytes]  
            add         eax, dword ptr [index]  
            mov         cl, byte ptr [buf]
            xor         cl, 18
            xor         cl, 75
            not         cl
            mov         byte ptr [eax], cl 
            mov         eax, dword ptr [index]  
            add         eax, 1  
            mov         dword ptr [index], eax
        }
    }

    fwrite(bytes, 1, i, handle->nieuwbstnd);
    fseek(handle->nieuwbstnd, i, SEEK_SET);

    handle->huidig += i;
    calc = (float)handle->huidig;
    calc /= (float)handle->size;
    calc *= 100.0f;

    if (calc == 100.0)
    {
        // GEHEUGEN LEK!
        // MOET NOG BIJGEWERKT WORDEN!
        fcloseall();
        handle = NULL;
    }
    return calc;
}

void example(char* path)
{
    float progress;
    struct filecrypt* handle;

    handle = PrepareEncryption(path);
    do
    {
        progress = EncryptBig(handle);
        printf_s("%f", progress);
    }
    while (handle != NULL);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T15:32:12.143

这是因为您返回一个指向局部变量的指针。

局部变量存储在堆栈中，当一个函数返回时，堆栈的该区域被其他函数重用，并且您留下一个指针，该指针现在指向未使用的内存或现在被其他东西占用的内存。这是*未定义的行为*，有时可能会起作用，有时可能会给您“垃圾”数据，有时可能会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:32:46.070

在 PrepareEncryption 中，您将返回指向 的指针`struct filecrypt origineel`，该指针分配在堆栈（本地对象）上。这就是问题。就在函数返回（结束执行）之后，占用的内存`origineel`变得无效。您需要通过调用 malloc 在堆上分配它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:33:59.913

你做：

```
mirror = &origineel;
return mirror; 
```

`origineel`是一个局部变量。以上等价于：

```
return &origineel; 
```

...您正在返回一个指向局部变量的指针，该指针在函数末尾超出范围。它有时似乎返回一个有效指针的事实只是机会。

使用`malloc`，或者更好的是，将指向目标位置的指针地址作为参数传递给您的函数并且不返回它：

```
int *PrepareEncryption(struct filecrypt *origineel, char* locatie);

struct filecrypt myStruct;
PrepareEncryption(&myStruct, "abc"); 
```

# ssl - 使用 SSL 连接发送 CDO 电子邮件

> ID：13531934
> 
> 赞同：3
> 
> 时间：2012-11-23T15:28:08.743
> 
> 标签：ssl, cdo.message, hmail-server

我有一个 asp 页面，它使用 CDO 通过电子邮件发送表单的详细信息。到目前为止，我已经通过与 hmail 服务器的明确连接使用 smtp 端口 25 完成了此操作。

我现在需要使用 SSL 连接。我创建了一个安全证书并将 hmail 服务器设置为使用端口 465 和 ssl。

但是，由于某种原因，当我尝试发送表单时，我收到错误 500 并且电子邮件未发送。

我也尝试过使用端口 587，但它也不起作用。

我使用的CDO代码如下：

```
If request.Form("submit") <> "" then

Set myMail=CreateObject("CDO.Message")
myMail.Subject="xxxxxxx"
myMail.From=Request.Form("email")
myMail.To= "xxxxxxxxxxx"

myMail.TextBody = "Name:"& Request.Form("name")& vbcrlf & vbcrlf & _

"Email:" & Request.Form("email") & vbcrlf & vbcrlf &  _

"Telephone:" & Request.Form("telephone") & vbcrlf & vbcrlf & _

"Location:" & Request.Form("location") & vbcrlf & vbcrlf & _

"Other location:" & Request.Form("other_location") & vbcrlf & vbcrlf & _

"Comments:" & Request.Form("comments")

myMail.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/sendusing")=2
'Name or IP of remote SMTP server
myMail.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpserver") _
="127.0.0.1"
'Server port
myMail.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpserverport") _
=465
MyMail.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = True
myMail.Configuration.Fields.Update
myMail.Send
set myMail=nothing 
```

有谁知道可能出了什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-23T19:36:53.273

我在使用旧版 ASP 代码时遇到了同样的问题。以下代码适用于亚马逊。注意：似乎只有端口 25 或 465 可以工作并且 smtpusessl = 1（在 VBScript True==-1 中）

```
' Create Connection
Function GetEmailConnection ()
    Set oMail = CreateObject("CDO.Message")
    Set GetEmailConnection = oMail
End function
Function GetConfiguration()
    Set oConfig = CreateObject("CDO.Configuration")
    Set GetConfiguration = oConfig  
End Function

' Send Email

    Sub SendEmail (subject, fromAddress, toAddress, body)
        set objMessage = GetEmailConnection()

    Set objConfiguration = GetConfiguration()

    Set fields = objConfiguration.Fields

    Const cdoSendUsingPort = 2

    With fields
    .Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = cdoSendUsingPort 
    .Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "email-smtp.us-east-1.amazonaws.com"
    .Item("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = 1
    .Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25 ' 
    .Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1 'basic 
    .Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "password"
    .Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = "user"
    .Item("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 10
    .Update
    End With
    With objMessage
    set .Configuration = objConfiguration
    .Subject = subject 
    .From = fromAddress 
    .To= toAddress
    .TextBody = body
    .Send
    End With
    set objMessage = nothing        
end Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:11:35.713

这个帖子有点老了，你已经解决了吗？

如果没有，您能否提供错误消息（通用 500 除外）？

我只有 2 个可能的想法而没有看到实际的错误消息：

1）它可能会超时。尝试添加 myMail.Configuration.Fields.Item _ ("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 60

2) 可能证书与“127.0.0.1”IP 地址不匹配，因此 SSL 通信被拒绝。

# java - 仅在 Google 地图上显示行程（Xml 格式？，2012）

> ID：13531935
> 
> 赞同：0
> 
> 时间：2012-11-23T15:28:12.370
> 
> 标签：java, android, google-maps

因此，自 2012 年 7 月 21 日以来，我听说不可能再使用 KLM 在 2 个 GeoPoint 之间绘制路径，我遵循了这个：

[为什么使用 KML 数据检索适用于 Android 的 Google 路线不再有效？](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo/11745316#11745316)

但我得到一个错误，这里是我的活动中的 onCreate() 方法：

```
 Route route = directions(new GeoPoint((int)(26.2*1E6),(int)(50.6*1E6)), new     GeoPoint((int)(26.3*1E6),(int)(50.7*1E6)));
 RouteOverlay routeOverlay = new RouteOverlay(route, Color.BLUE);
 mapView.getOverlays().add(routeOverlay);
 mapView.invalidate(); 
```

Activity 中调用的方法：

```
 private Route directions(final GeoPoint start, final GeoPoint dest) {

//Changed from Parser to GoogleParser beacause i had Error
 GoogleParser parser;
//https://developers.google.com/maps/documentation/directions/#JSON <- get api
String jsonURL = "http://maps.googleapis.com/maps/api/directions/json?";
final StringBuffer sBuf = new StringBuffer(jsonURL);
sBuf.append("origin=");
sBuf.append(start.getLatitudeE6()/1E6);
sBuf.append(',');
sBuf.append(start.getLongitudeE6()/1E6);
sBuf.append("&destination=");
sBuf.append(dest.getLatitudeE6()/1E6);
sBuf.append(',');
sBuf.append(dest.getLongitudeE6()/1E6);
sBuf.append("&sensor=true&mode=driving");
parser = new GoogleParser(sBuf.toString());
Route r =  parser.parse();
return r;
 } 
```

日志输出：

```
 11-23 16:07:50.126: E/AndroidRuntime(24124): FATAL EXCEPTION: main
 11-23 16:07:50.126: E/AndroidRuntime(24124): java.util.NoSuchElementException
 11-23 16:07:50.126: E/AndroidRuntime(24124):   at      java.util.ArrayList$ArrayListIterator.next(ArrayList.java:572)
   11-23 16:07:50.126: E/AndroidRuntime(24124):     at         com.xxx.xxx.xxx.RouteOverlay.redrawPath(RouteOverlay.java:90)
  11-23 16:07:50.126: E/AndroidRuntime(24124):  at    com.xxx.xxx.xxx.RouteOverlay.draw(RouteOverlay.java:60)
 11-23 16:07:50.126: E/AndroidRuntime(24124):   at   com.google.android.maps.Overlay.draw(Overlay.java:179)
 11-23 16:07:50.126: E/AndroidRuntime(24124):   at 
```

ETC ...

线路错误（RouteOverlay.java）：

```
 prj.toPixels(it.next(), p); 
```

上 ：

```
 private void redrawPath(final MapView mv) {
        final Projection prj = mv.getProjection();
        path.rewind();
        final Iterator<GeoPoint> it = routePoints.iterator();
        //Crash Here 
        prj.toPixels(it.next(), p);
        path.moveTo(p.x, p.y);
        while (it.hasNext()) {
                prj.toPixels(it.next(), p);
                path.lineTo(p.x, p.y);
        }
        path.setLastPoint(p.x, p.y);
} 
```

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:45:35.577

好像有些事情发生了变化，你现在没有得到任何积分？要修复崩溃，请使您的方法更健壮：

```
 if (it.hasNext()) {
    prj.toPixels(it.next(), p);
    path.moveTo(p.x, p.y);
    while (it.hasNext()) {
            prj.toPixels(it.next(), p);
            path.lineTo(p.x, p.y);
    }
    path.setLastPoint(p.x, p.y);
  } 
```

不知道为什么数组现在是空的。

# wcf - 温莎城堡 WcfFacility 错误。忘记注册组件？

> ID：13531938
> 
> 赞同：2
> 
> 时间：2012-11-23T15:28:17.047
> 
> 标签：wcf, castle-windsor, wcffacility

我正在尝试让 Castle Windsor 使用 WcfFacility 创建我的 WCF。我按照本教程进行操作。[http://www.codeproject.com/Articles/426770/Dependency-Injection-in-WCF-using-Castle-Windsor](http://www.codeproject.com/Articles/426770/Dependency-Injection-in-WCF-using-Castle-Windsor)但它似乎对我不起作用。我收到以下错误。

**找不到名称为 ActionService.ServiceImplementations.ActionWebService 的组件，您忘记注册了吗？**

我的应用程序的结构方式如下。

一个 web 服务项目（只有 svc 文件，没有代码，web.config 和 global.asax）

合同和实施的第二个项目。这是 IActionWebService 和 ActionWebservice 所在的位置。

我有后者的参考到第一个。

这是我的全球 asax。

```
public class Global : System.Web.HttpApplication
{
    IWindsorContainer container;
    protected void Application_Start(object sender, EventArgs e)
    {
        container = new WindsorContainer();

        container.AddFacility<WcfFacility>()
            .Register(
            Component.For<IAuthService>().ImplementedBy<AuthService>(),
            Component.For<IUserRepository>().ImplementedBy<UserRepository>(),
            Component.For<IActionWebService>().ImplementedBy<ActionWebService>().Named("ActionWebService")
            );
    } 
```

这是我的 svc 文件。

```
 <%@ ServiceHost 
Language="C#" 
Debug="true" 
Service="ActionService.ServiceImplementations.ActionWebService"
Factory="Castle.Facilities.WcfIntegration.DefaultServiceHostFactory, Castle.Facilities.WcfIntegration" %> 
```

我已经在这里和其他博客中解决了其他问题，但他们的解决方案对我没有任何帮助:(。

任何人都可以指出错误可能发生在哪里？

编辑我附加了一个监视窗口捕获。在那里您可以看到所有对象似乎都已加载。但这并不能解决它们。

![在这里，您可以看到实际对象已加载到容器中。 它只是不能解决它们](../Images/89a0656d421b716d6b2bc2525380ff8f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:15:35.027

我有同样的错误

为了在注册的字符串参数中解决它，我把它放在完整的命名空间中，就像这样。

```
protected void Application_Start(object sender, EventArgs e)
    {
        IWindsorContainer container = new WindsorContainer();

        container.AddFacility<WcfFacility>().Register(
          Component.For<IActivityLogsRepository>().ImplementedBy<ActivityLogsRepository>(),
            Component.For<IActivityLogsService>().ImplementedBy<ActivityLogsService>()
                .Named("Company.ServiceImplementation.ActivityLogsService"), 
```

我希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-22T19:18:58.380

我遇到了同样的问题，这是因为我们项目的输出 dll 名称已更改，而 svc 文件标记代码仍引用旧的 dll 名称：

```
<%@ ServiceHost Language="C#" Debug="true" Service="[Namespace.ClassName],[DllName]" Factory="Castle.Facilities.WcfIntegration.DefaultServiceHostFactory, Castle.Facilities.WcfIntegration" %> 
```

# c# - 在屏幕上搜索像素

> ID：13531939
> 
> 赞同：5
> 
> 时间：2012-11-23T15:28:17.343
> 
> 标签：c#, search, find, screen, pixel

我想从屏幕上找到一个特定的像素坐标。这是我的代码（我是超级新手，我今天刚开始使用 C#：

```
static string GetPixel(int X, int Y)
{
    Point position = new Point(X, Y);
    var bitmap = new Bitmap(1, 1);
    var graphics = Graphics.FromImage(bitmap);

    graphics.CopyFromScreen(position, new Point(0, 0), new Size(1, 1));

    var _Pixel = bitmap.GetPixel(0, 0);
    return "0x" + _Pixel.ToArgb().ToString("x").ToUpper().Remove(0, 2);
    //it returns a pixel color in a form of "0xFFFFFF" hex code
    //I had NO idea how to convert it to hex code so I did that :P
}

static void Main()
{
    // for x = 1 to screen width...
    for (int x = 1; x <= Screen.PrimaryScreen.Bounds.Bottom; x++)
    {
        // for x = 1 and y = 1 to screen height...
        for (int y = 1; y <= Screen.PrimaryScreen.Bounds.Height; y++)
        {
            string pixel = GetPixel(x, y);
            if (pixel == "0x007ACC") //blue color
            {
                MessageBox.Show("Found 0x007ACC at: (" + x + "," + y + ")");
                break; //exit loop
            }
        }
    }
} 
```

编辑：这是我运行此脚本时出现的错误：

> mscorlib.dll 中出现“System.ArgumentOutOfRangeException”类型的未处理异常
> 
> 附加信息：索引和长度必须引用字符串中的位置

我有 AutoIt 的经验，这是我使用 C# 的第一天 ^^ 问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:39:53.270

欢迎来到 SO。

大多数坐标和其他东西都是从 0 开始的，就像在数组中一样。

话虽如此，最好对循环使用 Bounds 的 X/Y/Width 和 Height 属性：

```
var bounds = Screen.PrimaryScreen.Bounds;
for (int x = bounds.X; x < bounds.Width; x++) {
  for(int y = bounds.Y; y < bounds.Height; y++) {
    .. 
```

将 ARGB 值转换为十六进制的正确方法是使用[string.Format()](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)方法：

`string hex = string.Format("0x{0:8x}", argb);`

**编辑：**显然`Graphics.CopyFromScreen`泄漏句柄就像没有明天一样，这会导致在没有更多句柄可用时引发奇怪的异常（[源](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/474450b9-e260-4369-9efb-0d57a5b2e06d/)）

针对您的场景的快速解决方法可能是捕获整个屏幕一次，然后在位图中搜索，即`Graphics.CopyFromScreen(new Position(0, 0), new Position(0, 0), new Size(bounds.Width, bounds.Height));`

不幸的是，这在 .Net 4.0 中没有得到解决（不知道 4.5），所以唯一合适的解决方案似乎是 P/Invoke 本机 GDI 函数，如此[处](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/474450b9-e260-4369-9efb-0d57a5b2e06d/)所述。

# google-apps-script - 如何使用 FastButtons 让他们在移动设备上工作？

> ID：13531941
> 
> 赞同：0
> 
> 时间：2012-11-23T15:28:17.463
> 
> 标签：google-apps-script, web-applications

我已阅读此内容（以及其他相关内容）：

[https://developers.google.com/mobile/articles/fast_buttons?hl=fi#conclusion](https://developers.google.com/mobile/articles/fast_buttons?hl=fi#conclusion)

但我不明白如何在 Google Apps 脚本中使用它。我使用 GUI Builder 制作了 UI，现在我希望这些按钮也可以在移动设备上使用。

有人可以用一个代码示例向我解释如何更改我的按钮以在移动设备上也可以使用吗？

* * *

在 PC 上运行正常但在移动设备上运行正常的代码：

```
var handler109 = app.createServerClickHandler('func109');
var but109 = app.getElementById('Button109');
but109.addClickHandler(handler109); 
```

如何使用客户端处理程序？app.createClientHandler('func109') 生成错误，app.createClientClickHandler('func109') 生成错误...如何定义应该调用的函数 func109？

```
var handler109 = app.createClientHandler();
var but109 = app.getElementById('Button109');
but109.addClickHandler(handler109); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:47:54.150

首先，您分享的文章适用于移动设备，而不适用于 Google Apps 脚本。

但是，您在 Google Apps 脚本中制作的按钮也可以在移动设备上使用。但是，如果您只在按钮上设置了服务器处理程序，则用户看到按钮的操作需要相当长的一段时间。

Google Apps 脚本还具有[客户端处理程序](https://developers.google.com/apps-script/class_clienthandler?hl=en)，您可以使用它们显示比服务器处理程序更快的响应。

[问题 1086](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1086)可能与您的情况相关

# c# - 更新面板中的 Page.Unload 事件

> ID：13531944
> 
> 赞同：2
> 
> 时间：2012-11-23T15:28:36.810
> 
> 标签：c#, javascript, asp.net, user-controls, updatepanel

我有一个图像按钮声明为，

```
<div>
    <asp:ImageButton ID="btnDoWork" runat="server" ImageUrl="/_LAYOUTS/1033/IMAGES/row.png" ValidationGroup="Page" />
</div>
<div>
    <asp:RequiredFieldValidator runat="server" ID="reqName" ControlToValidate="txtEmail" ValidationGroup="Page" ErrorMessage="enter a email" />
    <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ValidationExpression="^([\w\.\-]+)@([\w\-]+)((\.(\w){2,3})+)$" ControlToValidate="txtEmail" ValidationGroup="Page" ErrorMessage="enter a email" />
</div> 
```

在更新面板中，

现在在代码后面我正在做这样的事情，

```
btnDoWork = (ImageButton)this.control.FindControl("btnDoWork"); //this code is in childcontrols method
btnDoWork.Click += new ImageClickEventHandler(btnDoWork_Click); 
```

然后

```
protected void btnDoWork_Click(object sender, ImageClickEventArgs e)
        {

//Process a bit of code and at end,

this.Page.Unload += new EventHandler(Page_Unload_MessageBox); 
```

然后在按钮单击事件中，

```
public static void Page_Unload_Page_Unload_MessageBox(object sender, EventArgs e)
        {
            System.Globalization.CultureInfo _culture = Thread.CurrentThread.CurrentUICulture;
            StringBuilder sb = new StringBuilder();
            sb.Append("<script language=\"javascript\">");
            sb.Append("$('body').append(\"<div id='M'><span id='text'>" +
               SPUtility.GetLocalizedString("$Resources:abc", "def", (uint)_culture.LCID) +
               "</span><br/><div id='BB' onclick='return BB();'><a href='' onclick='return BB();'>" +
               SPUtility.GetLocalizedString("$Resources:OK", "def", (uint)_culture.LCID) +
               "</a></div></div>\");");
            sb.Append("function BB() { $('#M').remove(); $('#E').remove(); return false; }");
            sb.Append("function dM(){   var browser = navigator.appName; if (browser == 'Netscape') { $('#M').css({ 'top': '5%' }, 500);    } }");
            sb.Append("</script>");

            // Write the JavaScript to the end of the response stream.
            HttpContext.Current.Response.Write(sb.ToString()); 
```

现在，如果我输入电子邮件地址时会出错，而当它尝试思考时`Response.Write`，我想知道有什么替代方法，例如，我可以在更新面板或任何其他事件或其他东西中使用触发器。

这是我现在得到的错误，

![在 Chrome 和 IE 上](../Images/3e3d1b5f0d99857c9cd0dd6af12ac827.png)

**注意：我更改了所有变量名称，所以如果不匹配，请不要混淆**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:08:04.717

消息很清楚，你不能`HttpContext.Current.Response.Write`在更新面板上添加这个命令，因为不知道如何处理它，因为更新面板返回一个结构体，javascript 使用它来重绘页面的某些部分。

解决方案是在 UpdatePanel 中添加一个文字控件，在您希望添加额外 html 代码的地方，并将该控件的渲染编写为：

```
txtLiteralID.Text = sb.ToString(); 
```

但是，在这里您遇到了与正常情况不同的情况，您赢得了渲染和**运行**脚本。

主要问题是如何触发脚本运行。唯一的方法是使用这个标准代码的 UpdatePanel 处理程序：

```
<script type="text/javascript"> 
   // if you use jQuery, you can load them when dom is read.
   $(document).ready(function () {
       var prm = Sys.WebForms.PageRequestManager.getInstance();    
       prm.add_initializeRequest(InitializeRequest);
       prm.add_endRequest(EndRequest);

    });        

    function InitializeRequest(sender, args) {
    }

    function EndRequest(sender, args) {
       // after update occur on UpdatePanel run the code.
       UnloadMsgBox();
    }
</script> 
```

现在`EndRequest`你需要调用你的脚本，它可能都存在于你的代码中：

```
function UnloadMsgBox()
{
    // render your code of the javascript.
    $('body').append(\"<div id='M'><span id='text'></span><br/><div id='BB' onclick='return BB();'><a href='' onclick='return BB();'></a></div></div>\");

    function BB() { $('#M').remove(); $('#E').remove(); return false; }"
    function dM(){   var browser = navigator.appName; if (browser == 'Netscape') { $('#M').css({ 'top': '5%' }, 500);    } }"
} 
```

并且不需要在 UpdatePanel 上呈现它。

总结一下：

*   在更新面板上，您不能使用`Response.Write`来渲染某些东西，而是使用文字控件来渲染他。
*   在更新面板上，您无法呈现 javascript 代码并期望运行，要运行您需要使用 UpdatePanel 附带的 EndRequest 处理程序的 javascript 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:09:54.620

MS Ajax 调用执行全页渲染，计算原始差异，将差异发送到客户端，然后神奇地在浏览器中合并差异。

如果您只是发送 javascript 作为响应，这是框架不期望的，它会抛出消息。

请参阅有关如何从 UpdatePanel 调用 javascript的[先前答案。](https://stackoverflow.com/questions/1952817/asp-net-javascript-inside-ajax-updatepanel/1953122#1953122)

# android - addIntentOptions() 是如何工作的？安卓

> ID：13531945
> 
> 赞同：1
> 
> 时间：2012-11-23T15:28:37.267
> 
> 标签：android, menu

在文档中，

```
addIntentOptions (int groupId, int itemId, int order, ComponentName caller, 
    Intent[] specifics, Intent intent, int flags, MenuItem[] outSpecificItems) 
```

应该收到一个`groupId`，但在下面的代码中它有一个`Menu.CATEGORY_ALTERNATIVE`作为groupId，这是什么意思？做`CATEGORY_ALTERNATIVE`什么？

```
 menu.addIntentOptions(
                Menu.CATEGORY_ALTERNATIVE,  // Add the Intents as options in the alternatives group.
                Menu.NONE,                  // A unique item ID is not required.
                Menu.NONE,                  // The alternatives don't need to be in order.
                null,                       // The caller's name is not excluded from the group.
                specifics,                  // These specific options must appear first.
                intent,                     // These Intent objects map to the options in specifics.
                Menu.NONE,                  // No flags are required.
                items                       // The menu items generated from the specifics-to-
                                            // Intents mapping
            ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:19:18.750

您的代码可能来自 \docs\resources\samples\NotePad 方法 menu.addIntentOptions 中的第一个参数表示：项目应属于的组标识符。这也可用于定义批次状态更改的项目组。

实际上，您可以为其指定任何 int 值。Menu.NONE 效果很好！但正如它所暗示的，.it 也可用于定义用于批量状态更改的项目组。跟随您的代码和 else 子句的后续代码行

```
}else{
        // If the list is empty, removes any alternative actions from the menu
        menu.removeGroup(Menu.CATEGORY_ALTERNATIVE);
    } 
```

并且只有在之前指定了组 ID 时才能执行批量状态更改

# jquery - 如何保持图像的位置动态

> ID：13531947
> 
> 赞同：2
> 
> 时间：2012-11-23T15:28:50.653
> 
> 标签：jquery, html

我有一棵树，上面放着其他较小的图像。现在，当树长大时，我希望较小的图像改变位置以保持在树的边缘。我该怎么做呢？

[**我的 jsfiddle 在这里**](http://jsfiddle.net/n2Mkc/1/)

这是我的 javascript

```
var target = [ {gift : '<p class="gifts one"></p>'},{gift: '<p class="gifts two"></p>'}, {gift : '<p class="gifts three"></p>'},{gift : '<p class="gifts four"></p>'},{gift: '<p class="gifts five"></p>'},{gift:'<p class="gifts six"></p>'},{gift:'<p class="gifts seven"></p>'}];

var currIndex = 0;
function gifFunc(){$('#gifts').append(target[currIndex].gift);currIndex ++;}

$("#add-gift").click(function(){$('#tree').animate({'width':'+=10px'}, 1000);
    gifFunc();
}); 
```

这是HTML：

```
<html>
    <body>
<div id="Page-cont">
<div id="form"><button id="add-gift">Add gift</button></div>
<div id="img-sec">
    <img src="http://i.imgur.com/ujF7L.png" alt="Christmas Tree" width="250px" id="tree" />
    <div id="gifts"></div>
    <div class="clearfloat"></div>
</div>
</div>
</body>
</html>​ 
```

这是CSS：

```
#Page-cont{width:100%;float:left;}
#form{width:40%;float:left;}
#img-sec{float:left;width:60%;}
#tree{position:relative;}
.gifts{background: url(http://www.rangde.org/images/christmas/gifts.png) -43px -70px no-repeat;height: 18px;width: 30px;position: absolute;}
.one{top: -330px;left: 160px;}
.two{top: -300px;left: 70px;}
.three{top: -130px;left: 140px;}
.four{top: -230px;left: 100px;}
.five{top: -280px;left: 200px;}
.six{top: -250px;left: 70px;}
.seven{top: -450px;left: 170px;}
.clearfloat {clear: both;height: 0;font-size: 1px;line-height: 0px;}
#gifts{position:absolute;}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:32:38.407

在说其他话之前，如果您想要像您一样动态调整大小的内容，您需要停止使用`pixels`并开始使用。`percentages`

# django - 在 Model 中的所有 CharField 中按特定模式过滤

> ID：13531948
> 
> 赞同：0
> 
> 时间：2012-11-23T15:28:52.770
> 
> 标签：django, django-models, django-forms

我的项目中有一个搜索框，问题是用户可以输入任何关键字，并且我的 ModelForm 过滤了我明确告诉过滤的字段，我在我的表单中使用以下代码：

```
def get_matching_siniestros(self):
    if self.cleaned_data['keywords'] is None:
        return None
    matching = []
    for kw in self.cleaned_data['keywords']:
        numero_ajuste = Siniestro.objects.filter(
            numero_ajuste__icontains=kw
        )

        nombre_contratante = Siniestro.objects.filter(
            poliza__contratante__nombre__icontains=kw
        )

        matching = chain(
            numero_ajuste, 
            nombre_contratante,
            matching
        )

    # verify not repeated Siniestro
    non_rep_siniestros = []
    for siniestro in matching:
        if siniestro not in non_rep_siniestros:
            non_rep_siniestros.append(siniestro)

    return non_rep_siniestros 
```

我想要做的是以编程方式过滤模型中的任何 CharField，如果可能的话，还可以过滤嵌套关系的任何 CharField，在这个例子中 Siniestro 有一个 poliza 的 FK 和 poliza 有一个 contratante 的 FK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:05:36.480

您可以遍历每个字段并做任何您喜欢的事情，例如：

```
[process(field) for field in model._meta.fields if field.__class__ == CharField] 
```

其中 process 可以是一个函数，或者你需要的任何东西。

也就是说，我真的应该指出，你试图涉及的复杂性必然会变得混乱。IMO，看看[django-haystack](http://haystacksearch.org/)。索引应该是要走的路。

# svg - SVG 蒙版在 IE9 中不起作用

> ID：13531961
> 
> 赞同：0
> 
> 时间：2012-11-23T15:29:25.250
> 
> 标签：svg, internet-explorer-9

有人能告诉我[这个 SVG](http://jsfiddle.net/6AL6B/)有什么问题吗？IE9 根本不应用掩码。

我发现了一些在 IE9 中工作的 svg 掩码示例，但没有发现与我的代码有任何差异。

我正在使用具有径向渐变的蒙版。但即使是简单的纯色，也行不通。

```
<mask id="mask">
    <rect fill="white" x="15" y="0" width="10" height="200" stroke-width="0"/>
    <rect fill="url(#radialGradient)" x="15" y="10" width="10" height="180" stroke-width="0"/>
</mask> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:38:30.623

我在 jsFiddle 上运行了你的代码。问题是当你画线时，x1 等于 x2。我已将线的 x2 更改为 21，并且有效。

# python - 访问远相关的 Django 模型的最佳实践

> ID：13531964
> 
> 赞同：1
> 
> 时间：2012-11-23T15:29:33.220
> 
> 标签：python, django, django-models, coding-style, standards

假设我们有一长串 Django 模型，其中每个模型都通过一个`ForeignKey`字段引用上面的模型：

```
class One(models.Model):
    # fields

class Two(models.Model):
    one = models.ForeignKey(One)

...

class Ten(models.Model):
    nine = models.ForeignKey(Nine) 
```

好的！现在想象一下，如果你愿意的话，有一个`Ten`模型的实例并想要获取相关的`One`实例。这可能会导致像这样的长行属性链接：

```
ten_instance.nine.eight.seven.six.five.four.three.two.one 
```

我想知道解决这个琐碎问题的标准方法是什么。我们是否保持原样，本质上具有描述性和可读性。还是我们的目标是缩短这样一条线以使事情更简单：

```
ten_instance.one 
```

##  但是这里的最佳实践是什么？还是有更简单的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:29:33.220

## 使用属性

我目前的方法是`property`在`Ten`模型中添加一个，抽象出该属性链：

```
class Ten(models.Model):
    nine = models.ForeignKey(Nine)

    @property
    def one(self):
        return self.nine.eight.seven.six.five.four.three.two.one 
```

但是，我可以看到这种策略的不利之处，那就是所涉及的神秘主义。实例实际上是否`Ten`与模型有关系`One`？如果不亲自检查模型，我将无法判断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T18:19:28.423

您可能希望将 django-mptt 用于复杂的层次模型，尽管它可能有点 ott。如果您想要一个简单的层次结构，请向 self 添加一个 ForeignKey：

```
class Number(models.Model):
    parent = models.ForeignKey('self', blank=True, null=True,
        related_name='child') 
```

那么查询将是这样的，基于一个唯一的字段，比如 slug：

```
Number.objects.get(parent__slug='one') 
```

# c# - MVVM Light - ViewModel 序列化

> ID：13531967
> 
> 赞同：1
> 
> 时间：2012-11-23T15:29:37.220
> 
> 标签：c#, serialization, mvvm-light

我正在创建具有 DocumentViewModel 类的小型图形编辑器（继承自我的 PaneViewModel 类，该类继承自 GalaSoft.MVVMLIGHT.ViewModelBase）。DocumentViewModel 代表一个图像（应用程序一次可以处理几个图像，所以我决定收集 DocumentViewModel）。我想在保存项目时序列化 DocumentViewModel 并在加载项目时反序列化。但是我不能这样做，因为应用程序在序列化时抛出异常（“GalaSoft.MvvmLight.ViewModelBase 未标记为可序列化）。这个问题有什么解决方法吗？使用序列化作为加载/保存机制是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:49:00.890

听起来您想序列化应用程序状态。如果您想使用 MVVM Light 执行此操作，则创建一个注入到视图模型中的应用程序状态服务/对象。使用它来管理您的应用程序状态（哪个视图模型处于活动状态等）。

让您的应用程序状态服务在检测到应用程序正在保存时自行保存。让它在启动时检查序列化对象并使用它来重新加载应用程序状态当前设置。Viewmodels 使用它来确保状态是一致的。

# html - w3 验证器 - facebook 小部件

> ID：13531973
> 
> 赞同：0
> 
> 时间：2012-11-23T15:30:05.830
> 
> 标签：html, facebook, validation, widget, w3c

我对 Facebook 小部件有错误

小部件是：

```
 <script type="text/javascript">
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like-box" data-href="http://www.facebook.com/pages/..mypage" data-width="364" data-show-faces="true" data-stream="false" data-header="true"></div> 
```

错误消息：没有属性“data-href”

```
<div class="fb-like-box" data-href="http://www.facebook.com/pages/ 
```

错误消息：没有属性“数据宽度”

```
…-" data-width="364" data-show-faces="true" data-stream… 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:17:21.263

我相信您需要一个支持 data-href 等的文档类型。 [W3C 验证错误与 data-href](https://stackoverflow.com/questions/9774376/w3c-validation-error-with-data-href)

也许尝试 `<!DOCTYPE html>`

这和你昨天问的问题不一样吗？

[w3c 验证错误消息 - Facebook 小部件](https://stackoverflow.com/questions/13529363/w3c-validation-error-message-facebook-widget)

# android - cwac-locpoll 可以使用多个位置提供程序吗？

> ID：13531974
> 
> 赞同：2
> 
> 时间：2012-11-23T15:30:05.887
> 
> 标签：android, commonsware-cwac

Android 库[`cwac-locpoll`](https://github.com/commonsguy/cwac-locpoll)使用哪些位置提供程序来查找位置？它是否仅限于 GPS，还是也可以使用其他来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:34:44.950

引用[文档](https://github.com/commonsguy/cwac-locpoll)：

> [ `Intent`for `LocationPoller`] 应该有另一个额外的，由 键控`LocationPoller.EXTRA_PROVIDER`，带有您希望使用的位置提供程序的名称。

文档中的示例代码说明了这一点：

```
mgr=(AlarmManager)getSystemService(ALARM_SERVICE);

Intent i=new Intent(this, LocationPoller.class);

i.putExtra(LocationPoller.EXTRA_INTENT,
                     new Intent(this, LocationReceiver.class));
i.putExtra(LocationPoller.EXTRA_PROVIDER,
                     LocationManager.NETWORK_PROVIDER);

pi=PendingIntent.getBroadcast(this, 0, i, 0);
mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                                    SystemClock.elapsedRealtime(),
                                    PERIOD,
                                    pi); 
```

# ios - 具有可变单元格大小的 UICollectionView

> ID：13531975
> 
> 赞同：5
> 
> 时间：2012-11-23T15:30:07.143
> 
> 标签：ios, xamarin.ios, ios6, uicollectionview, uicollectionviewcell

我正在为 UICollectionView 中的单元格大小而苦苦挣扎。在 android 中，您可以轻松地“包装”单元格的大小。就像在 iOS 中一样，您有一个名为“GetCell”的函数，您可以决定它有多大。

iOS 的不同之处在于，在（UICollectionViewController 的）“getCell”函数中，您似乎无法选择单元格（或内容视图）的大小。如果我更改大小，它将忽略它并使用 CollectionView 的一般“ItemSize”（所有单元格都相同）。

这有时会导致视图不是很漂亮。例如，如果我有一个包含图像的水平列表，我希望图像之间的距离相同，如果一个图像是 200x200 而另一个是 400x200，则独立。所以单元格大小也应该不同。

可以为不同的单元格定义不同的大小。您可以使用 Collectionview 委托和 GetSizeForItem（= ObjC 中的 sizeForItemAtIndexPath）函数。问题是，这个函数是在实际的 GetCell 函数之前调用的。

因此，如果我有一个更复杂的单元格，例如一些标签。在我的“GetCell”函数中，我构建了这个 Cell，最后，当返回 Cell 时，我知道它**应该**是什么大小。但是，在 GetSizeForItem 函数中，该信息尚不可用，因为 Cell 仍为“空”。

我能做到的唯一方法是在调用“GetSizeForItem”时为单元格实际构建 UIView（以便我可以请求大小）。但这似乎不是一个好的设计，因为我在“GetCell”之前构建 UIView，我将在其中再次构建它。

有什么我忽略的吗？

问候， 马特

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T21:44:39.043

事实上，GetSizeForItem 与 GetCell 是分开调用的。这样做是因为创建 UIViews 是一项非常耗时和消耗内存的任务，并且您的应用程序要么内存不足，要么必须处理其他视图才能处理大列表。

在呈现视图之前，UICollectionView（和 UITableView）会询问列表中所有（或大多数）元素的大小和位置，因此它可以知道在哪里绘制它们。但是其中许多元素将不可见，因此 collectionView 避免了创建它们。这就是为什么 GetSizeForItem 被预先调用，而 GetCell 只是在以后被调用的原因。

在您的情况下，尝试将计算视图大小的逻辑与视图本身分开。使它成为一个简单的数学公式，不需要视图存在，因此它足够快，可以预先运行。

# jquery - 获取分隔符前的文本

> ID：13531978
> 
> 赞同：1
> 
> 时间：2012-11-23T15:30:23.053
> 
> 标签：jquery

我有这个复选框值：`10/07-08/24_NOV`，我有这个代码：

```
$(window).load(function() {
    $('input:checkbox').change(function() { 
    var tot = 100;
    $('input:checkbox:checked').each(function() {
        tot -= parseInt($(this).val());
    });
    $('#outputDiv').html(tot)
});
}); 
```

我需要 jQuery 只给我第一个分隔符之前的第一个值，数字 10。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T15:31:35.820

您可以使用[**split()**](http://www.w3schools.com/jsref/jsref_split.asp)函数来获取 first 之前的值`/`，

**[现场演示](http://jsfiddle.net/D8fYf/)**

```
$(this).val().split('/')[0] 
```

# data-binding - 如何绑定控件属性？

> ID：13531980
> 
> 赞同：0
> 
> 时间：2012-11-23T15:30:26.110
> 
> 标签：data-binding, mvvm, windows-runtime, caliburn.micro, caliburn

我正在使用来自 Caliburn.Micro 的基于约定的绑定，但我有一个小问题：

如何设置绑定应绑定到的属性？如果我创建一个带有 的控件`x:Name="SomeProperty"`，我该如何选择是否`SomeProperty`应该将 的值绑定到我的控件的`Value`属性、我的控件的`OnClick`事件或不同的东西，如`Content`或`Tag`属性？

示例：我`HyperlinkButton`想要绑定到特定 URL，并且想将其绑定`OnClick`到 ViewModel 中的事件处理程序。

```
<HyperlinkButton x:Name="BookDetailsViewModel_InfoLink" Content="Read more" /> 
```

然而，Content 属性不是用 URL 的值填充的，`Read more`而是用 URL 的值填充的。在此示例中，我如何：

*   将导航 URI 设置为我的 ViewModel 属性中的 URL 值
*   将内容设置为“阅读更多”
*   在我的 ViewModel 中指定一个事件处理程序来处理点击

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:28:32.780

您可以在 CM 中为每个元素类型自定义 ConventionManager。默认的开箱即用实现应用于任何没有显式自定义的元素

要添加新约定，您只需调用 ConventionManager.AddElementConvention

该方法看起来像这样（来自 CM 源）

```
/// <summary>
/// Adds an element convention.
/// </summary>
/// <typeparam name="T">The type of element.</typeparam>
/// <param name="bindableProperty">The default property for binding conventions.</param>
/// <param name="parameterProperty">The default property for action parameters.</param>
/// <param name="eventName">The default event to trigger actions.</param>
public static ElementConvention AddElementConvention<T>(DependencyProperty bindableProperty, string parameterProperty, string eventName)
{
    return AddElementConvention(new ElementConvention
    {
        ElementType = typeof(T),
        GetBindableProperty = element => bindableProperty,
        ParameterProperty = parameterProperty,
        CreateTrigger = () => new EventTrigger { EventName = eventName }
    });
} 
```

如您所见，它需要一些参数 - 您需要为绑定、操作和触发器传递默认属性，例如

```
ConventionManager.AddElementConvention<HyperlinkButton>(HyperlinkButton.NavigateUri, "NavigateUri", "Click"); 
```

（假设点击事件称为Click）

由于您不再绑定该`Content`属性（因为约定现在绑定 NavigateUri），您可以保持原样，它应该保持“阅读更多...”

所以现在你有一个`HyperlinkButton`控件，它应该按照约定绑定到，并在触发事件`NavigateUri`时调用共享它的名称的方法。`Click`

编辑：

*我可能会澄清一下，我认为您不能同时绑定到**同一**VM 上的方法和属性，因为您不能拥有共享相同名称的方法和属性，但我确信 CM 会冒泡如果您在 VM 上没有适当的方法，则将操作消息向上传递到 VM 层次结构……但没有尝试过。要绑定操作，请参阅下面的我的其他编辑*

不要忘记，您总是可以使用显式语法来完成所有这些操作！

```
<HyperlinkButton Content="Read more..." NavigationURI="{Binding SomeUri}" cal:Message.Attach="[Event Click] = [Action HyperlinkClicked($this.NavigateUri)" /> 
```

但最好走公约路线:)

编辑：

可能会添加如何获取约定以从超链接中获取属性值 -

```
<HyperlinkButton x:Name="SomeLink" Content="Read more..." cal:Message.Attach="HyperlinkClicked(SomeLink)" /> 
```

CM 知道，由于您设置`NavigateUri`为默认操作参数，它应该抓住这个并将其传递给您在操作绑定中指定的方法。我想知道是否`$this`也可以工作（您可能需要`$this.NavigateUri`）。您可以跨控件执行此操作，例如

```
<TextBox x:Name="SomeTextBox" />
<HyperlinkButton x:Name="SomeLink" Content="Read more..." cal:Message.Attach="HyperlinkClicked(SomeTextBox)" /> 
```

默认情况下，上面会将`Text`文本框的属性传递给`HyperlinkClicked`方法。

# python - python 正则表达式：使用第一个空白作为 sep 但保留其余空白序列

> ID：13531985
> 
> 赞同：2
> 
> 时间：2012-11-23T15:31:08.760
> 
> 标签：python, regex, whitespace

我现在在这个正则表达式上战斗太久了。拆分应使用空白作为分隔符，但将剩余的以空白序列保持到下一个标记

```
'123 45   678    123.0'
=>
'123', '45', '  678', '   123.0' 
```

我的数字也是浮点数，组数未知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:44:07.090

使用后向断言怎么样？：

```
>>> import re
>>> regex = re.compile(r'(?<=[^\s])\s')
>>> regex.split('this  is a   string')
['this', ' is', 'a', '  string'] 
```

正则表达式分解：

```
(?<=...)  #lookbehind.  Only match if the `...` matches before hand
[^\s]     #Anything that isn't whitespace
\s        #single whitespace character 
```

在英语中，这翻译为“如果前面没有空白字符，则匹配单个空白字符”。

或者您可以使用否定的lookbehind断言：

```
regex = re.compile(r'(?<!\s)\s') 
```

这可能会稍微好一些（如评论中所建议的那样），并且应该相对容易弄清楚它是如何工作的，因为它与上述非常相似。

# php - 矩阵组合逻辑

> ID：13531987
> 
> 赞同：5
> 
> 时间：2012-11-23T15:31:16.990
> 
> 标签：php, matrix, logic

**注意：**请阅读所有其他相关问题**：**

这是我提出这个问题的第一次和第二次尝试：

*   [确定测试矩阵结果的有效方法](https://stackoverflow.com/questions/13139723/efficient-way-to-determine-the-outcome-of-test-matrix)
*   [笛卡尔积会是最好的方法吗](https://stackoverflow.com/questions/13282688/would-cartesian-product-be-the-best-approach-for-this)

这是问题所在：

*   我有几个（比如 20 个）布尔验证（真/假）
*   所有布尔验证作为一个整体也有一个验证结果

我正在尝试找到测试所有验证以及验证结果的最佳解决方案。我正在研究一个矩阵来保存所有可能的组合，但这可能是一种矫枉过正。

这是一个示例（ 1 - 20 ）：

*   test_1 = 有 30 次击杀
*   test_2 = 已找到地图 1
*   test_3 = 已掌握 1 级
*   test_4 = 已达到 Grunt 状态
*   test_5 = 拥有突击武器
*   test_6 = 有刀
*   test_7 = 有手榴弹
*   test_x = 等等...

因此，当 Player 将所有这些验证都设置为 TRUE 时，我可以给出关卡结果

*   if test_1, test_2, test_3 (三者的任意组合): level = green

所有组合为 ( 15 )：

*   测试_1
*   测试_2
*   测试_3
*   测试_1，测试_2
*   测试_1，测试_3
*   test_2, test_1 (重复的可以跳过)
*   测试_2，测试_3
*   test_3, test_1 (重复可以跳过)
*   test_3, test_2 (重复的可以跳过)
*   测试_1、测试_2、测试_3
*   test_1、test_3、test_2（重复的可以跳过）
*   test_2, test_1, test_3 (重复可以跳过)
*   test_2, test_3, test_1 (重复可以跳过)
*   test_3, test_1, test_2 (重复的可以跳过)
*   test_3, test_2, test_1 (重复的可以跳过)

所以独特的组合是（ 7 而不是 15 ）：

*   测试_1
*   测试_2
*   测试_3
*   测试_1，测试_2
*   测试_1，测试_3
*   测试_2，测试_3
*   测试_1、测试_2、测试_3

现在，我正在尝试找到最佳解决方案，为所有 20 个验证找到唯一组合，并从该矩阵中得出一个级别验证。

更新：

另外我只需要找到真正的组合，这样你就可以像这样阅读独特的组合：

*   测试_1
*   测试_2
*   测试_3
*   测试_1，测试_2
*   测试_1，测试_3
*   测试_2，测试_3
*   测试_1、测试_2、测试_3

验证测试的布尔值结果

*   对，错，错
*   假，真，假
*   假，假，真
*   对，对，错
*   对，错，对
*   错误，正确，正确
*   真的，真的，真的

所以这些组合中的任何一个都是绿色级别。

我还需要知道测试验证的顺序以及矩阵顺序以比较级别分配。所以对于 GREEN 级别，我只需要测试 1、2 和 3 的验证结果组合矩阵。所以我可以忽略测试 4 - 20

更新#2：

我知道这看起来像一个简单的 OR 条件，但我想取出组合逻辑将级别设置为矩阵。我可以使用组合矩阵来确定级别逻辑，而无需编写额外的代码或修改代码本身中的当前逻辑。我只想比较一组给定测试的验证结果，并为这些结果分配一个级别。验证组合的不同排列将导致不同的级别分配。

我知道我可以在代码本身中添加组合逻辑，但由于这个逻辑看起来非常不稳定，我认为这可能会提供更灵活的解决方案。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:51:48.373

（为了清楚起见，删除了我之前的两个答案）

在您最后一次编辑之后，我想首先确保 100% 了解您想要的“**级别检测算法”，而不是直接回答。**

如果我理解得很好，您想定义/维护一个简单的配置结构，告诉哪些测试给出了哪个级别。

例如，使用关联数组：

```
array(
  'green' => array('test1', 'test2', 'test3'),
  'orange' => array('test2', 'test3', 'test5')
  ...
  ); 
```

含义：如果满足列表中的一个或多个测试，则将该级别（数组键）分配给玩家。这样的逻辑可以很容易地涵盖相当多的组合，并且可以避免处理一个巨大的矩阵。

例如，您可能想扩展逻辑来告诉测试列表中至少有 N 个测试得到满足。

```
array(
  'green' => array(
      'tests' => array('test1', 'test2', 'test3'),
      'nb_required' => 2
    ),
  ...
  ); 
```

那是你要的吗？

顺便说一句，你为什么不使用经典的 XP/升级系统？:-p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:59:38.323

**介绍**

您可以轻松获得这样的组合：

```
echo "<pre>";
$test = ["test_1","test_2","test_3"];

// Get Combination
$return = uniqueCombination($test);

//Sort
sort($return);

//Pretty Print
print_r(array_map(function($v){ return implode(",", $v); }, $return));

function uniqueCombination($in, $minLength = 1, $max = 10) {
    $count = count($in);
    $members = pow(2, $count);
    $return = array();
    for($i = 0; $i < $members; $i ++) {
        $b = sprintf("%0" . $count . "b", $i);
        $out = array();
        for($j = 0; $j < $count; $j ++)
            $b{$j} == '1' and $out[] = $in[$j];

        count($out) >= $minLength && count($out) <= $max and $return[] = $out;
    }
    return $return;
} 
```

输出

```
Array
(
    [0] => test_1
    [1] => test_2
    [2] => test_3
    [3] => test_1,test_2
    [4] => test_1,test_3
    [5] => test_2,test_3
    [6] => test_1,test_2,test_3
) 
```

**问题**

它们是关于`1,048,576`组合的，我相信这不是你想要的那种数组我会建议基于条件的组合而不是所有可能的组合

例子

```
// Game Conditions
$game = new Game();
$game->addCondition(new Condition(new Level(1), new Kill(30)));
$game->addCondition(new Condition(new Level(2), new Map(1), new Kill(10)));
$game->addCondition(new Condition(new Level(3), new Grunt(10)));
$game->addCondition(new Condition(new Level(4), new Knife(1), new Ak47(1)));
$game->addCondition(new Condition(new Level(5), new Grenade(1), new Combo(7)));
$game->addCondition(new Condition(new Level(6), new Kill(100), new Blow(10), new Stab(10)));
$game->addCondition(new Condition(new Level(7), new Herb(10), new Medipack(1), new Map(1), new Artwork(1)));
$game->addCondition(new Condition(new Level(8), new Grenade(20),new Artwork(5)));

// User Starts Game
$user = new User($game);

$user->task(new Map(1));
$user->task(new Herb(5));
$user->task(new Kill(10));
$user->task(new Kill(10));
$user->task(new Herb(10));
$user->task(new Kill(10));
$user->task(new Kill(10));
$user->task(new Ak47(1));
$user->task(new Knife(1));
$user->task(new Map(1));
$user->task(new Grunt(17));
$user->task(new Kill(60));
$user->task(new Combo(1));
$user->task(new Kill(40));
$user->task(new Medipack(1));
$user->task(new Artwork(1));
$user->task(new Grenade(1));
$user->task(new Combo(10));
$user->task(new Blow(10));
$user->task(new Stab(5));
$user->task(new Blow(10));
$user->task(new Stab(5));
$user->task(new Stab(5));

printf("\n<b>Total Point %s",number_format($user->getPoint(),0)); 
```

输出

```
+Task Map   Added  (1)
+Task Herb  Added  (5)
+Task Kill  Added  (10)
^Task Kill  Updated (20)
^Task Herb  Updated (15)
^Task Kill  Updated (30)

*Level 1 Completed* 

*Level 2 Completed* 

^Task Kill  Updated (40)
+Task Ak47  Added  (1)
+Task Knife     Added  (1)
^Task Map   Updated (2)
+Task Grunt     Added  (17)

*Level 3 Completed* 

*Level 4 Completed* 

^Task Kill  Updated (100)
+Task Combo     Added  (1)
^Task Kill  Updated (140)
+Task Medipack  Added  (1)
+Task Artwork   Added  (1)
+Task Grenade   Added  (1)
^Task Combo     Updated (11)

*Level 5 Completed* 

+Task Blow  Added  (10)
+Task Stab  Added  (5)
^Task Blow  Updated (20)
^Task Stab  Updated (10)

*Level 6 Completed* 

*Level 7 Completed* 

^Task Stab  Updated (15)

<b>Total Point 1,280</b> 
```

使用的类

```
class Task {
    private $no;

    function __construct($no = 1) {
        $this->no = $no;
    }

    function getNo() {
        return $this->no;
    }

    function getName() {
        return get_called_class();
    }

    function merge(Task $task) {
        $this->no += $task->getNo();
        return $this;
    }
}
class User {
    private $game;
    private $point;
    private $tasks = array();

    function __construct(Game $game) {
        $this->game = $game;
    }

    function getPoint() {
        return $this->point;
    }

    function getTask() {
        return $this->tasks;
    }

    function task(Task $task) {
        if (isset($this->tasks[$task->getName()])) {
            $this->tasks[$task->getName()]->merge($task);
            printf("^Task %s \tUpdated (%s)\n", $this->tasks[$task->getName()]->getName(), $this->tasks[$task->getName()]->getNo());
        } else {
            printf("+Task %s \tAdded  (%s)\n", $task->getName(), $task->getNo());
            $this->tasks[$task->getName()] = $task;
        }

        $this->point += $task->getNo() * $task->d;
        $this->game->notify($this);
    }
}
class Condition {
    private $task = array();
    private $status = false;

    function __construct(Level $level) {
        $this->level = $level;
        $tasks = func_get_args();
        array_shift($tasks);
        $this->task = new SplObjectStorage($tasks);
        foreach ( $tasks as $task )
            $this->task->attach($task);
    }

    function update(Game $game, User $user) {
        if ($this->status)
            return;
        $n = 0;
        foreach ( $this->task as $cTask ) {
            foreach ( $user->getTask() as $task ) {
                if ($cTask->getName() == $task->getName()) {
                    if ($task->getNo() >= $cTask->getNo())
                        $n ++;
                }
            }
        }
        if ($n === count($this->task) && ($game->getLevel()->getNo() + 1) == $this->level->getNo()) {
            $this->status = true;
            $game->setLevel($this->level);
            printf("\n*Level %d Completed* \n\n", $this->level->getNo());
        }
    }

    function getStatus() {
        return $this->status;
    }
}
class Game {
    private $taskCondition;
    private $level;

    public function __construct() {
        $this->taskCondition = new SplObjectStorage();
        $this->level = new Level(0);
    }

    function setLevel(Level $level) {
        $this->level = $level;
    }

    function getLevel() {
        return $this->level;
    }

    function addCondition($condition) {
        $this->taskCondition->attach($condition);
    }

    public function notify($user) {
        foreach ( $this->taskCondition as $conditions ) {
            if ($conditions->getStatus() === true) {
                // detached completed condition
                $this->taskCondition->detach($conditions);
                continue;
            }
            $conditions->update($this, $user);
        }
    }

    public function hasCondition() {
        return count($this->taskCondition);
    }
}

class Level extends Task{}
class Action extends Task{};
class Weporn extends Task{};
class Skill extends Task{};
class Tresure extends Task{};
class Medicine extends Task{};

class Kill extends Action{public $d = 5 ;};
class Blow extends Action{public $d = 7 ;};
class Stab extends Action{public $d = 10 ;};

class Map extends Tresure{public $d = 10 ;};
class Artwork extends Tresure{public $d = 20 ;};

class Knife extends Weporn{public $d = 5 ;};
class Grenade extends Weporn{public $d = 10 ;};
class Ak47 extends Weporn{public $d = 10 ;};

class Jump extends Skill{public $d = 2 ;};
class Grunt  extends Skill{public $d = 4 ;};
class Combo extends Skill{public $d = 7 ;};

class Medipack extends Medicine{public $d = 5 ;};
class Herb extends Medicine{public $d = 5 ;}; 
```

[简单的在线演示](http://codepad.viper-7.com/xKsEX8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T17:25:03.870

不完全回答你的问题，但似乎你错过了一些东西。

假设您有 20 个测试，标记为 1 虽然*n*。决定 test *n*是否要对其进行验证。要么包含验证测试，要么不包含。这是每次测试的两个选择。继续 ( *n* -1) 直到您没有更多的测试。对于*n* =20，即 2^20 = 1048576 种可能的测试组合（包括一种您不选择任何测试的组合），这意味着 1048576 个结果。现在我仍然不明白你所说的“验证级别”是什么意思，但我不得不想知道为什么你首先需要这么多的测试组合。

编辑：嗯，一个测试矩阵（可以这么说）可以工作....但你仍然必须生成矩阵。您可能不会手动编码所有 1048576 组合。但是假设您已经创建了映射，那么您只有一个零索引数组作为查找表，其中包含您想要的 1048576 个值，您就完成了！将测试结果映射到矩阵所需要做的就是为每个测试分配一个二进制数字（test1 是一个位置，test2 是 2 的位置，等等）

我怀疑您真正想要的是一种快速生成*映射*的方法，因为您可能会在 php 中编码一些更广泛的规则......但这里有一些有趣的部分。如果您有一些代码为任何一组测试生成矩阵，那么矩阵就是多余的；您的代码本质上是矩阵的*压缩表示*。在另一个上使用一个的唯一要点是一个是否会比另一个更快。

看来您真的并不关心所有 1048576 组合。我怀疑将测试划分为他们自己的一组测试（一个用于红色，一个用于蓝色等）可能会对您有所帮助。例如，如果您将测试分成 5 个组，并且每个组有 3 种不同的可能性（而不是 16 种），那么您只使用（每组 3 个不同的结果）^（4 组）= 81独特的结果。81 个独特的结果比超过 100 万个更易于管理。

看来您可能还需要为不同的独立事物使用不同的分区。只要*其中一定数量的*测试是真的，即使哪些测试结果为真也可能无关紧要，即“目标：满足 5 个蓝色目标中的 3 个”“目标：满足 10 个红色和蓝色目标中的 7 个”或其他. 这些测试必须独立访问，并且它们不一定与其他测试的结果相乘——如果你的蓝色目标都没有得到满足，那么 10 个红色和蓝色目标中永远不会有 7 个得到满足（我会承认，如果没有例子，这很难进一步解释）。

所以，真的，没有快速的答案。**要么单独**处理所有 1048576 个组合，要么为测试创建*和编码*某种通用分组方案，以大幅减少组合。您当然可以通过所述方案创建完整的矩阵方案，甚至可以为给定的组合动态生成完整的 1048576 元素矩阵。但是你不能只烧一半就烧掉整根蜡烛。

编辑二（和三）：

我再做一个猜测。您提出的级别似乎与每个（和前一批）完成的目标数量有关。因此，将您的结果编码为一串（“T”和“F”）并计算每个批次的“F”并从那里确定。如果 Fs 的计数是字符串中的字符数，则该批次的目标没有完成，如果 Fs 的数量为零，则该批次的所有目标都已完成。

可以说蓝色之后的批次是紫色的。有人可以在不完成所有绿色批次的情况下实现紫色目标吗？如果是这样，您可以为这种可能性分配另一种颜色；如果不是，那么，我会假设这些级别是有序的（绿色和蓝色之间的橙色，也许是“棕色”或蓝色和紫色之间的东西——你可以说我是凭空捏造出来的——它应该相当简单通过这些计数级联来确定当前的“级别”。

如果没有排序，那么和我上面提到的情况很相似：每个组都有一个结果{“没有完成目标”，“完成一些目标”，“完成所有目标”}。有些`x`组意味着`3^x`可能的结果。您应该将水平矩阵基于*这些*结果，而不是前面提到的测试结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T16:01:56.670

正如您所提到的，我已经找到了您问题的图形显示。

```
|0|1|2|3|4|5|6|7|8|9|
|1|T|T|T|T|T|T|T|T|T|
|2|F|T|T|T|T|T|T|T|T|
|3|F|F|T|T|T|T|T|T|T|
|4|F|F|F|T|T|T|T|T|T|
|5|F|F|F|F|T|T|T|T|T|
|6|F|F|F|F|F|T|T|T|T|
|7|F|F|F|F|F|F|T|T|T|=>[7,9] if this is the answer
|8|F|F|F|F|F|F|F|T|T|
|9|F|F|F|F|F|F|F|F|T| 
```

在我看来，您应该以反向对角线顺序检查条件，然后从左到右。这意味着

首先检查 [9,9]

如果失败检查 [8,8]

如果失败，请检查 [7,7]

如果它给出真正的检查 [7,8]

如果这给出了错误的检查 [7,9] 这一定是答案和简单的快捷方式，

这种方法将减少所有处理时间。

# git - git line endings : renormalize 似乎没有检出正确的行尾

> ID：13531988
> 
> 赞同：7
> 
> 时间：2012-11-23T15:31:31.177
> 
> 标签：git, line-endings, gitattributes

我决定通过一个文件以正确的方式设置行尾`.gitattributes`，例如[此处详述](http://timclem.wordpress.com/2012/03/01/mind-the-end-of-your-line/)- 所以我将 core.autocrlf 设置为 false 并创建并提交了一个 .gitattributes 文件：

```
*.java text eol=native
*.jsp text eol=native
*.css text eol=native
*.html text eol=native
*.js text eol=native
*.xml text eol=native
*.sql text eol=native
*.MF text eol=native

# git files
*.gitignore text eol=native
*.gitattributes text eol=native

#eclipse files
*.classpath text eol=native
*.project text eol=native
*.prefs text eol=native
*.properties text eol=native 
```

[然后我按照这里](https://help.github.com/articles/dealing-with-line-endings)的建议发出`git rm --cached -r .`然后`git reset --hard`（也尝试过） 。现在所有文件都有 LF 行结尾。不应该是 CRLF 吗？我想念什么？我在 Windows 7 上，.`git checkout HEAD``git version 1.8.0.msysgit.0`

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T15:48:43.523

它一定是一个[错误](http://lists-archives.com/git/727778-convert-the-native-line-ending-is-r-n-on-mingw.html)。奇怪的是它并没有真正修复或报告 - 这整个混乱都是关于 Windows 的，它不能在 Windows 上精确工作？此外，任何地方都没有提到它（？）

编辑：从 mingw“最新存储库目录”安装 - g++、gcc、ObjC + MinGW Developer Toolkit 和 MSYS-1.0.11。相同的行为。每当我尝试提交 CRLF 文件时，我都会得到*CRLF 将被替换为 LF*（在结帐时暗示）警告。

编辑2：[似乎](http://permalink.gmane.org/gmane.comp.version-control.git/221320)即将修复

编辑 3：这已在 Git 1.8.4 中修复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T23:18:59.370

对于您要执行的操作，我认为您需要以下内容。请注意，根据 gitattributes 手册页的 eol 属性可能是“lf”或“crlf”。Native 用于 core.eol 配置设置。

将 core.autocrlf 设置为 false 以显式控制规范化。现在只有用 text 属性标记的文件才会进行规范化。

对于特定文件类型，将 eol 属性显式设置为 lf 或 crlf（例如：shell 脚本可能需要 lf 才能在 unix 上工作，.csproj 文件可能需要 crlf 在 Windows 上）。如果未设置 eol 属性，则应使用 core.eol 的值。如果您将 core.eol 设置为 crlf，那么您的文本文件将以 crlf 结尾。

这是一个 git 测试脚本来说明这一点（从 gi​​t/t/ 运行）：

```
#!/bin/sh
test_description='check native crlf setting'
. ./test-lib.sh

has_cr() {
        tr '\015' Q <"$1" | grep Q >/dev/null
}

test_expect_success 'test native elf' '
  printf "*.txt text\n" > .gitattributes
  printf "one\r\ntwo\r\nthree\r\n" > filedos.txt
  printf "one\ntwo\nthree\n" > fileunix.txt
  git init &&
  git config core.autocrlf false &&
  git config core.eol crlf &&
  git add . &&
  git commit -m "first" &&
  rm file*.txt &&
  git reset --hard HEAD &&
  has_cr filedos.txt && has_cr fileunix.txt
'

test_done 
```

使用上述配置和属性，对于 Windows 1.8.0 的 Git，这两个文件在重置后都被规范化并包含 crlf 行结尾。

可能存在错误的地方是，如果 core.eol 变量未设置（或设置为“本机”），则此测试失败，因为在这种情况下文件被规范化为 lf 行结尾。您上面提到的路径也无助于这种情况。因此，根据我的测试，您必须将 core.eol 显式设置为 crlf 才能使您计划的方法成功。

# objective-c - UIScrollView 和 UIPageControl，我做错了什么？

> ID：13531990
> 
> 赞同：0
> 
> 时间：2012-11-23T15:31:36.097
> 
> 标签：objective-c, ios, uiscrollview, uipagecontrol

我有一个类，它预定义了一些标签并将它们的值绑定在 UIScrollView 中。

我已经设法显示这些标签，但现在我坚持在 ScrollView 的第二部分放置标签。

我已将我的项目推送到[gitHub](https://github.com/daneoke/xcode-project)。

我可以在已经可见的部分更改标签的位置，但我必须忽略某些东西。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationItem.title = _detail.name;
    UIColor *bgColor = [UIColor blackColor];
    UIColor *txtColor = [UIColor grayColor];
    CGRect frame;
    frame.origin.x = 0;
    frame.origin.y = 0;

    frame.size.width = _scrollView.frame.size.width *2;

    NSString *phoneNr = (_detail.phoneNr == nil) ? @"Not specified" : _detail.phoneNr;

    _telLabel = [self prepareLabel:phoneNr textColor:txtColor bgColor:bgColor page:0 y:telNrYAxis];

    _webLabel = [self prepareLabel:@"Visit website" textColor:txtColor bgColor:bgColor page:0 y:websiteYAxis];

    _detail.address = [_detail.address stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"\n\t "]];
    NSArray *addressArrComponents = [_detail.address componentsSeparatedByString:@","] ;

    _addressLabel =  [self prepareLabel:[addressArrComponents componentsJoinedByString:@"\n"] textColor:txtColor bgColor:bgColor page:0 y:addressYAxis];

    UILabel *lbl = [self prepareLabel:@"Derp" textColor:txtColor bgColor:bgColor page:1 y:0];

    _detailView = [[UIView alloc] initWithFrame:frame];
    _detailView.backgroundColor = [UIColor blackColor];

    [_detailView addSubview:_webLabel];
    [_detailView addSubview:_addressLabel];
    [_detailView addSubview:_telLabel];
    [_detailView addSubview:lbl];

    [_scrollView addSubview:_detailView];
    NSLog(@"%f",self.view.frame.size.height - (_scrollView.frame.origin.y + _scrollView.frame.size.height) );

    _pageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(self.view.frame.size.width/2, self.view.frame.size.height - 250 , self.view.frame.size.width/4, 120)];
    _pageControl.numberOfPages=2;
    _pageControl.currentPage=0;

    [_pageControl addTarget:self action:@selector(pageChange:) forControlEvents:UIControlEventTouchDown];
    _scrollView.contentSize = CGSizeMake(800,800);
    _scrollView.delegate=self;
    _scrollView.backgroundColor = [UIColor blackColor];
    _scrollView.pagingEnabled=YES;

    _scrollView.showsHorizontalScrollIndicator = NO;
    _scrollView.showsVerticalScrollIndicator = NO;
    _scrollView.scrollsToTop = NO;
    [self pageChange:0];
    [self.view addSubview:_pageControl];
    // Do any additional setup after loading the view.
}

-(UILabel*)prepareLabel:(NSString*) text textColor:(UIColor*)textColor bgColor:(UIColor*)backgroundColor page:(int)page y:(int) yPos{
    int lines = [[text componentsSeparatedByString:@"\n"] count];

    CGRect labelFrame = CGRectMake(_detailView.frame.size.width * page +20,yPos,self.view.frame.size.width, [UIFont systemFontSize]*lines);

    UILabel *returnLabel = [[UILabel alloc] initWithFrame:labelFrame];
    returnLabel.text = text;
    returnLabel.backgroundColor = backgroundColor;
    returnLabel.textColor = textColor;

    [returnLabel setNumberOfLines:lines];
    [returnLabel sizeToFit];

    return returnLabel;
}
- (void)loadScrollViewWithPage:(int)page {
    NSLog(@"Derped");
}

-(IBAction)pageChange:(id)sender{

    int page=_pageControl.currentPage;
    CGRect frame = _scrollView.frame;
    frame.origin.x = _scrollView.frame.size.width * page;
    frame.origin.y = 0;

    //CGRect frame= (page == 0) ? _detailFrame : _reviewFrame;
    NSLog(@"%f",frame.origin.x);
    [_scrollView scrollRectToVisible:frame animated:YES];
} 
```

代表`-(IBAction)pageChange:(id)sender`被解雇了，但我一定在某处对框架做错了什么：s

请看一下！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:46:06.433

Try to implement this method may help you :

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGFloat pageWidth = self.scrollView.frame.size.width; 
    float fractionalPage = self.scrollView.contentOffset.x / pageWidth;
    NSInteger page = lround(fractionalPage);
    self.pageControl.currentPage = page; 
} 
```

# joomla1.5 - 锚标记图像 joomla

> ID：13531991
> 
> 赞同：1
> 
> 时间：2012-11-23T15:31:37.630
> 
> 标签：joomla1.5, joomla2.5, virtuemart

如何使用图像按钮而不是以下代码中的文本

```
JHTML::link ($product->link, JText::_ ('COM_VIRTUEMART_PRODUCT_DETAILS'), array('title' => $product->product_name, 'class' => 'product-details')) 
```

在 HTML 中，它呈现为`<a href="blah blah">Product details`

如何在上述 php 代码中的 HREF 标记中使用图像而不是产品详细信息

```
JHTML::link ($product->link, JText::_ ('COM_VIRTUEMART_PRODUCT_DETAILS'), array('title' => $product->product_name, 'class' => 'product-details')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:45:58.217

`$product`是一个 PHP 对象，而 joomla 使用 JHTML！输出链接的框架

实际上你的代码：

```
JHTML::link ($product->link, JText::_ ('COM_VIRTUEMART_PRODUCT_DETAILS'), array('title' => $product->product_name, 'class' => 'product-details')) 
```

等于纯 HTML

```
<a href="<?php echo $product->link; ?>" title="<?php echo $product->product_name ?>" class="product-details"> <?php JText::_ ('COM_VIRTUEMART_PRODUCT_DETAILS');?></a> 
```

JText 用于输出基于语言/LANGUAGE_ID/文件夹中的语言 INI 文件中的单词和短语。对于英语语言和美德玛特组件，您的字符串位于 /language/en-GB/en-GB.com_virtuemart.ini

为了使用图像链接尝试

```
<a href="<?php echo $product->link; ?>" title="<?php echo $product->product_name ?>" class="product-details"> <img=src="myimage.png" /></a> 
```

# android - Android GoogleTv 搜索按钮

> ID：13531995
> 
> 赞同：1
> 
> 时间：2012-11-23T15:31:56.357
> 
> 标签：android, google-tv

在我的应用程序中，按 googletv 键盘搜索按钮会出现标准 quiq Search.activity。我可以以某种方式覆盖我的应用程序中按下的搜索按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:25:19.243

不 - 不幸的是，Google TV 上的搜索是全球性的。如果你想在你的应用中进行本地搜索，你需要在你的应用中添加一个突出的搜索功能。

如果您的 apk 有自己的搜索提供程序，您当然可以（在用户选项下）加入全局搜索。