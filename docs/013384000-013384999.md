# StackOverflow 问答 13384000-13384999

# c# - 使用 Open XML SDK 对幻灯片进行排序和删除

> ID：13384003
> 
> 赞同：3
> 
> 时间：2012-11-14T17:28:34.267
> 
> 标签：c#, openxml, openxml-sdk

我正在处理这个例程，我需要以编程方式删除“隐藏”的 PowerPoint 幻灯片。我对 Open XML 了解不多，我修改了一段代码，该代码最初删除了一张幻灯片，其中该方法将幻灯片索引作为参数，如本文所述[如何：从演示文稿中删除幻灯片 (Open XML SDK)](http://msdn.microsoft.com/en-us/library/office/cc850840.aspx)文章。

但是，我了解到，通过 SlideParts 集合的迭代默认情况下会按照幻灯片最后一次编辑的顺序对幻灯片进行排序，而不是按照它们在演示文稿中出现的顺序。为此，必须[按照使用 OpenXml SDK 迭代 SlideParts](http://dormantdevelopment.com/wordpress/index.php/2011/05/29/iterating-of-slideparts-with-the-openxml-sdk/#comment-1011) 文章中的建议遍历 SlideIdList。

在包含遍历 SlideList 的 foreach 循环的代码中，我需要获取幻灯片的 Show 属性以获取隐藏幻灯片的索引。

如果我在循环中使用 SlideIdList，有谁知道如何获得 Show 属性？在代码中查看我的评论。谢谢！里绍。

```
public static void DeleteSlide(string presentationFile)
    {
        using (PresentationDocument presentationDocument = PresentationDocument.Open(presentationFile, true))
        {
            // Get the presentation part from the presentation document. 
            PresentationPart presentationPart = presentationDocument.PresentationPart;

            // Get the presentation from the presentation part.
            Presentation presentation = presentationPart.Presentation;

            // Get the list of slide IDs in the presentation.
            SlideIdList slideIdList = presentation.SlideIdList;

            int slideIdx = -1;
            foreach (SlideId _slideId in presentation.SlideIdList)
            {
                slideIdx++;

                string relId = _slideId.RelationshipId.Value;

  >>>>>         // Here is where I need to checkf for Slide.Show.HasValue as
                // as the code suggests but this property belongs to a 
                // presentationDocument.PresentationPart.SlideParts object as in
                // foreach(Slide slide in presentationDocument.PresentationPart.SlideParts.

                if (slide.Slide.Show != null)
                {
                    if (slide.Slide.Show.HasValue != null)
                    {

                        // Pass the presentation to the next CountSlide method
                        // and return the slide count.
                        //return CountSlides(presentationDocument);

                        // Get the slide ID of the specified slide
                        SlideId slideId = slideIdList.ChildElements[slideIdx] as SlideId;

                        // Get the relationship ID of the slide.
                        string slideRelId = slideId.RelationshipId;

                        // Remove the slide from the slide list.
                        slideIdList.RemoveChild(slideId);

                        // Removed code that looks for a custom presentation

                        // Save the modified presentation.
                        presentation.Save();

                        // Get the slide part for the specified slide.
                        SlidePart slidePart = presentationPart.GetPartById(slideRelId) as SlidePart;

                        // Remove the slide part.
                        presentationPart.DeletePart(slidePart);
                        break;
                    }
                }
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:43:32.660

在我发布此内容一分钟后，我意识到要获得我需要执行此操作的特定幻灯片：`SlidePart slidePart = presentationPart.GetPartById(slideRelId) as SlidePart;`就在 foreach 循环之前。

# php - 如何在 PHP 中将数组作为对象返回？

> ID：13384004
> 
> 赞同：1
> 
> 时间：2012-11-14T17:28:35.173
> 
> 标签：php

```
function myfunc ()
{
    $a['foo'] = 'bar';
    $a['baz'] = 'qux';

    return $a;
} 
```

你是如何做到的，这样当你打电话时`$a = myfunc();`你可以使用`echo $a->foo;`它并且它会输出`bar`？

附加问题：有了上面那个简单的函数，返回数组还是对象更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T17:30:00.447

只需将其转换为对象即可。

```
function myfunc ()
{
    $a['foo'] = 'bar';
    $a['baz'] = 'qux';

    return (object)$a;
} 
```

至于你要哪一个，就看你自己了。这取决于您对返回的对象或数组所做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:42:07.270

1-我会这样做：

```
function myfunc ()
{
    $a['foo'] = 'bar';
    $a['baz'] = 'qux';
    $array = new ArrayObject($a);
    return $array;
} 
```

[ArrayObject](http://php.net/manual/en/class.arrayobject.php)从 php 版本 5 得到支持

2-如果您返回数组或对象并不重要，这是您的决定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:32:44.863

如果您返回一个数组，则必须以`$a['foo']`. `->`确实是一个oop运算符。要使用它，您需要创建一个对象而不是数组，*但这*意味着您必须首先定义一个类。这再次意味着这两个成员`foo`必须`baz`存在于此类对象的*所有*实例中。所以这是完全不同的事情。

# php - PHP -> 正则表达式 | 密码验证不起作用

> ID：13384008
> 
> 赞同：3
> 
> 时间：2012-11-14T17:28:44.750
> 
> 标签：php, regex, validation, passwords

我使用这个（几乎）复杂的密码验证：

```
function is_password($password) {
    return preg_match("^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$", $password);
} 
```

所以它必须包含：

*   0-9 的一位数，
*   一个小写字符，
*   一个大写字符，
*   至少 6 个字符
*   最多 20 个字符

这似乎不起作用。每当我输入某些字符时，例如`e`、`t`、`o`、和; 如果允许的长度正确，该函数返回 true。所以大写和数字没有被验证..`j``c``b`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T17:40:56.667

你忘了使用[分隔符](http://php.net/manual/en/regexp.reference.delimiters.php)。请改用此代码：

```
return preg_match("/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/", $password); 
```

或者您可以拆分每个条件并使用以下代码：

```
return mb_strlen($password)>=6 && mb_strlen($password)<=20
       && preg_match("/[a-z]+/", $password) && preg_match("/[A-Z]+/", $password)
       && preg_match("/[0-9]+/", $password); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T17:45:36.593

我会将其分解为多个检查。这将允许您智能地向用户（或日志）反馈密码选择失败的原因。

```
<?php
function is_password($password){
    if (strlen($password) < 6) {
        // too short
        return false;
    }
    if (strlen($password) > 20) {
        // too long
        return false;
    }
    if (!preg_match("/[A-Z]/", $password) {
        // no upper
        return false;
    }
    if (!preg_match("/[a-z]/", $password) {
        // no lower
        return false;
    }
    if (!preg_match("/[0-9]/", $password) {
        // no digit
        return false;
    }
    return true;
}
?> 
```

# javascript - 跨域谷歌分析

> ID：13384011
> 
> 赞同：1
> 
> 时间：2012-11-14T17:28:50.090
> 
> 标签：javascript, google-analytics, cross-domain

我知道这类事情有很多，但我无法让我的工作。我只担心跨域而不是子域。

我有 2 个站点，例如**www.siteA.com**和**www.siteB.org**。

**SiteA有一个指向我在****SiteB**上的注册页面的链接。

在**SiteA**上，我有以下脚本（在我的 layoutpage/master 上）：

```
<script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', '##AnalyticsIDA##']);
        _gaq.push(['_setAllowLinker', true]);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script> 
```

在**SiteB**上，我有以下脚本（在我的 layoutpage/master 上）：

```
<script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', '##AnalyticsIDA##']);
        _gaq.push(['_setAllowLinker', true]);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script> 
```

我在**SiteA上有一个链接**

```
<a href="www.siteB.org" onclick="_gaq.push(['_link', 'www.siteB.org']); return false;">testing</a> 
```

这会将我带到带有所有正确参数的**www.siteB.org （与我的****SiteA** cookie 值相同），但**SiteB 的cookie 与****SiteA**具有不同的值。

**编辑**

此外，我也尝试过使用`_gaq.push(['_setDomainName', 'siteA.com']);`，`_gaq.push(['_setDomainName', 'siteB.com']);`但我仍然在**siteB上获得新的 cookie**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:59:43.800

您是否尝试过`_setDomainName`在您的 GA 代码中使用？来自[跨域文档](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#yourDomainName)：

> (_setDomainName) 当您想将顶级域和子域视为一个实体并在同一配置文件中进行跟踪时，请使用此选项。当您想要**跨多个顶级域**及其子域进行跟踪时，也可以使用它。在这种情况下，您将需要在顶级域之间使用链接，而不是在顶级域与其子域之间使用链接。

在您的情况下，在**SiteA**

```
 _gaq.push(['_setAccount', '##AnalyticsIDA##']);
    _gaq.push(['_setDomainName', 'siteA.com']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']); 
```

在**站点 B上**

```
 _gaq.push(['_setAccount', '##AnalyticsIDA##']);
    _gaq.push(['_setDomainName', 'siteB.com']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T21:32:46.763

尝试更改`onClick`为：

```
onclick="_gaq.push(['_link', '.siteB.org']); return false;" 
```

# css - 纯 CSS 下拉菜单在 IE8 中无法正确显示

> ID：13384017
> 
> 赞同：0
> 
> 时间：2012-11-14T17:29:01.980
> 
> 标签：css, drop-down-menu, internet-explorer-8

我的纯 CSS 下拉菜单适用于除 IE8 之外的所有主要浏览器。有两个问题。

1) 直到鼠标滑过其中一个菜单项时，菜单的背景颜色才会显示。（见下面链接中的照片）

[http://www.searchtransparency.net/stackoverflow/2.jpg](http://www.searchtransparency.net/stackoverflow/2.jpg)

2）如果菜单从父链接（治疗）退出，它会留下背景显示的缩短版本。（见下面链接中的照片）

[http://www.searchtransparency.net/stackoverflow/1.PNG](http://www.searchtransparency.net/stackoverflow/1.PNG)

**CSS：**

```
.menu,
.menu ul,
.menu li,
.menu a {
    margin: 0;
    padding: 0;
    border: none;
    outline: none;
    z-index:3;
}
.menu {
    height: 53px;
    width: 994px;
}
.menu li {
    position: relative;
    list-style: none;
    float: left;
    display: block;
    height: 38px;
    padding-top: 15px;
}
.menu li a {
    display: block;
    padding-left: 44px;
    padding-right: 44px;
    -webkit-transition: color .2s ease-in-out;
    -moz-transition: color .2s ease-in-out;
    -o-transition: color .2s ease-in-out;
    -ms-transition: color .2s ease-in-out;
    transition: color .2s ease-in-out;
    margin-top: 0px;
    margin-right: 0;
    margin-bottom: 0px;
    margin-left: 0;
    padding-top: 0;
    padding-bottom: 0;
}
.menu li:first-child a { border-left: none; }
.menu li:last-child a{ border-right: none; }
.menu li:hover > a { color:#CCC; }
.menu ul {
    position: absolute;
    top: 53px;
    left: 0;
    opacity: 0;
    -webkit-border-radius: 0 0 5px 5px;
    -moz-border-radius: 0 0 5px 5px;
    border-radius: 0 0 5px 5px;
    -webkit-transition: opacity .25s ease .1s;
    -moz-transition: opacity .25s ease .1s;
    -o-transition: opacity .25s ease .1s;
    -ms-transition: opacity .25s ease .1s;
    transition: opacity .25s ease .1s;
    -webkit-box-shadow: 0px 0px 5px 0px #333;
    box-shadow: 0px 0px 5px 0px #333;
    background-color: #222;
    padding-bottom: 15px;
    visibility: hidden;
    behavior: url(PIE.htc);
}
.menu li:hover > ul {
    opacity: 1;
    visibility: visible;
}
.menu ul li {
    height: 0;
    overflow: hidden;
    padding: 0;
    -webkit-transition: height .25s ease .1s;
    -moz-transition: height .25s ease .1s;
    -o-transition: height .25s ease .1s;
    -ms-transition: height .25s ease .1s;
    transition: height .25s ease .1s;
}
.menu li:hover > ul li {
    height: 25px;
    overflow: visible;
}
.menu ul li a {
    width: 175px;
    margin: 0;
    font-size: 12px;
    text-shadow: none;
    border: none;
    padding-left: 25px;
    height: 20px;
    padding-top: 5px;
}
.menu ul li:last-child a { border: none; }
.menu li li:hover > a {
    background-color: #666;
} 
```

**HTML：**

```
<ul class="menu">
    <li><a href="index.html" title="Home"><img src="images/icon-home.png" alt="Home" width="18" height="18" border="0"></a></li>
    <li><a href="meet-the-doctor.html" title="Meet The Doctor">Meet The Doctor</a></li>
    <li class="icon-dropdown-arrow"><a href="#" title="Treatments">Treatments</a>

        <ul>
            <li style="font-size:14px; padding-left:15px; padding-top:10px; margin-top:10px;">Skin Resurfacing</li>
            <li><a href="fraxel-restore.html" title="Fraxel Restore">Fraxel&reg; Restore</a></li>
            <li style="font-size:14px; padding-left:15px; padding-top:10px; margin-top:0px;">Skin Tightening</li>
            <li><a href="thermage.html" title="Thermage">Thermage&reg;</a></li>
            <li><a href="refirme-photo-rejuvenation.html" title="Refirme Photo-Rejuvenation">Refirme&reg; Photo-Rejuvenation</a></li>
            <li style="font-size:14px; padding-left:15px; padding-top:10px; margin-top:0px;">Cellulite Treatments</li>
            <li><a href="lpg-lipomassage.html" title="LPG Lipomassage">LPG Lipomassage&trade;</a></li>
            <li><a href="velashape.html" title="VelaShape">VelaShape&trade;</a></li>
            <li><a href="thermage.html" title="Thermage">Thermage&reg;</a></li>
            <li><a href="ionithermie-treatment.html" title="Ionithermie Treatment">Ionithermie Treatment</a></li>
            <li style="font-size:14px; padding-left:15px; padding-top:10px; margin-top:0px;">Injectibles</li>
            <li><a href="dermal-fillers.html" title="Dermal Fillers">Dermal Fillers</a></li>
            <li><a href="botox-cosmetic.html" title="Botox Cosmetic">Botox&reg; Cosmetic</a></li>
            <li style="font-size:14px; padding-left:15px; padding-top:10px; margin-top:0px;">Other</li>
            <li><a href="laser-hair-removal.html" title="Laser Hair Removal">Laser Hair Removal</a></li>
            <li><a href="skin-treatments.html" title="Skin Treatments (Face &amp; Body)">Skin Treatments (Face &amp; Body)</a></li>
            <li><a href="skin-rejuvenation.html" title="Skin Rejuvenation">Skin Rejuvenation</a></li>
            <li><a href="plastic-surgery.html" title="Plastic Surgery">Plastic Surgery</a></li>
            <li><a href="massage.html" title="Massage">Massage</a></li>
        </ul>

    </li>
    <li><a href="specials.html" title="Specials">Specials</a></li>
    <li><a href="reviews.html" title="Reviews">Reviews</a></li>
    <li><a href="contact.html" title="Contact">Contact</a></li>
</ul> 
```

[JsFiddle.net 上的代码](http://jsfiddle.net/FS6Tt/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:52:46.840

*   我记得 IE 理解 :hover**仅**适用于“a”标签。
*   :last-child 也不支持，[关于 :last-child 的问题](https://stackoverflow.com/questions/1293369/using-last-child-in-css)

# drupal - Drupal 7：节点加载后更改nid

> ID：13384019
> 
> 赞同：0
> 
> 时间：2012-11-14T17:29:06.993
> 
> 标签：drupal, drupal-7

我在网站网站的新开发中有一个非常奇怪的案例。我制作了一个块（带有自定义模块）并制作了一个 node_load。这里一切正常，节点加载，块显示。但是如果我更改节点的 nid（例如设置 null）并且什么都不做（没有 node_save，没有函数调用，没有这个对象），我会注意到不同的模块（比如 3 或 4 个模块）。我知道这只是通知，但我会理解为什么永远不会使用更改变量的简单事实，会触发一些错误.....示例：

```
$tmp = node_load(arg(1));
$tmp->nid=null; 
```

=> 错误（不同名称函数中有很多“试图在...中获取非对象的属性”）

```
$tmp = node_load(arg(1));
$node=$tmp;
$node->nid=null; 
```

=> 错误（不同名称函数中有很多“试图在...中获取非对象的属性”）

```
$tmp = node_load(arg(1));
$node = new stdClass();
//Copy via une boucle sinon on a des erreurs.
foreach ($tmp as $key => $value) {
  if ($key != 'nid') $node->{$key} = $value;
} 
```

=> 一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:15:52.287

好的，最后它是引用对象php的组成部分，我们必须在对象上应用[Clone php](http://php.net/manual/en/language.oop5.cloning.php)方法进行复制，否则该对象将被引用

# magento - MySQL主主复制错误-插入时Magento中的重复键

> ID：13384022
> 
> 赞同：0
> 
> 时间：2012-11-14T17:29:17.103
> 
> 标签：magento, magento-1.7

我们正在尝试为数据库进行主主复制，而 Magento 的数据库给我们带来了问题：

查询时出现键“PRIMARY”的错误“重复条目“hle9agote6b43tvnrl3c3n9g76”。默认数据库：'magento_d'。查询：'INSERT INTO `core_session`( `session_expires`, `session_data`,`session_id`）VALUES（ '1352860963'，“K6uI7suW8PVkzYh6wxLoKjy_gyxavZpSUfNN2QwDkjw85sRHcGN1EjDFHhOH22uof3qvTOwDUHJISln-f8jYENR6SDGZgSxYtzw_cqZZP0yVB1rY6WwMH-AEEHvJAhGeZWCv6-QEbQR1iA83KE0-nxgqcUR0KGpyFBt5LvWcX9osNXMFcrN5aPII3JXJQw4F2bprP_HiF2qNh3NqWsU4LBq3mLN9GYTaHBprLkeQ4LyOkpI0IL67jWuBnvc8wzg3eHWbbesETSXSgjv59mKJOmN2vqpabhBaqLgyItLDNLo4v8jotbf1evrKvpYTbfpht1bDe89HMgJT-5fRenOkyddTwlHzoKK7uKaDpUN7kdkzcDUOFZNDTlBRKo447R_zTP4jk_6UQlDcAO10QKiW8L9PQkF5qB-GB_7xsJyEoH5e7Ysef27BGtztpjdO-PCLwgUQ4GJ4oftOv4RYj-EtKD5WL6TKDcvxxJzCnE2aSAINVW92bu0oYwhJQn3-cy4JhxQsh48PAJq1xcG9gVpsuzaJ4rbDrQZ45_yN41-MVpHaiM73M24tFsZdGe5LLVnb7zRxMfdTF1ZfTuuaK-8TB4mPsFIVDRuJEGBjHlsx2BXDHFucaLxnfR5ibGjgiGZaDKUS2CmLyAAsHV7rSKGOy0ArSIS4PJrnh4vQbylodN4JK4z19nPRDt1yxbsn8uf0zSYa11G2SLZsPFz0vk7AUVWlCtKsmKdCBtR6F3lNg_9M88JMtVirbpwhNQbCDIQZ-4nm793wrQmfuuT1bloA0ZpMfQi1ouEZEjL

据我所知，我认为 magento_d 在其中一位大师（shop2）上的 auto_inc 需要有所不同。

[Mysql截断表，自动增量不起作用](https://stackoverflow.com/questions/10744547/mysql-truncate-table-auto-increment-not-working/10744675#10744675)

**检查第 38、39 页：** [http ://www.percona.com/files/presentations/percona-live/PLMCE2012/PLMCE2012-Diagnosing_Failures_in_MySQL_Replication.pdf](http://www.percona.com/files/presentations/percona-live/PLMCE2012/PLMCE2012-Diagnosing_Failures_in_MySQL_Replication.pdf)

所以，我需要做的就是在其中一个 master 上使 magento_d 的 core_session 表自动递增不同？你们将如何处理这个问题。我只是不想破坏任何东西并导致自己更多的工作/头痛。

最好的问候，乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:54:04.707

此问题已得到解决。

我们所做的是：

1.  以 root 用户身份登录 MySQL
2.  使用表 core_session 切换到数据库 ...-> 使用 magento_d
3.  从 core_session 中删除内容...-> 从 core_session 中删除；
4.  更改了 core_session 的自动增量值以避免将来发生冲突...-> alter table core_session AUTO_INCREMENT = 10;
5.  master 主复制现在可以工作并且没有冲突

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T17:56:05.580

您可以通过向 core_resource 表添加适当的索引，或将会话保存到 Redis 或 Memcache，或截断整个表来解决这个问题，这将暂时解决问题，但不一定......其他问题（重复，外键）会出现在其他表中并停止复制。

为了解决这个问题，您应该使用 MySql 基于行的复制和行格式的二进制日志，否则这些错误将继续停止复制。

如果您仍然遇到此问题，请尝试一下，让我们知道您的结果。

干杯。

# jquery - 如何在 jQuery 滑块中获取更多数据点？

> ID：13384023
> 
> 赞同：0
> 
> 时间：2012-11-14T17:29:16.147
> 
> 标签：jquery, jquery-ui, slider, jquery-ui-slider

我正在使用 jQuery 1.7.3 和 jQuery UI 1.9.1。

我正在使用 jQuery 范围滑块 (http://jqueryui.com/slider/#range)。我在页面上设置了几个滑块，效果非常好，有些效果很差。我的想法是，jQuery 并不确切知道如何创建正确的数据点以使它们顺利运行，或者在低数字和高数字之间没有足够的数据点。

这些范围滑动得非常好，因为它们滑动顺畅：

```
Impedance 50ohm - 64ohm
Width 1.4in - 5.8in
Cable length 300cm - 1500cm
Cable length 2ft - 250ft
Depth 6.392in - 12.5in
Depth 161mm - 318mm 
```

这些范围的滑动非常糟糕，因为它们的滑动很生涩：

```
Shipping Weight 0.2kg - 2.2kg
Depth 0.9in - 1.16in
Shipping Weight 1lbs - 2lbs
Shipping Weight 0.008kg - 0.5kg 
```

有什么方法可以定义滑块应具有的数据点数量吗？有什么方法可以创建更平滑的滑块吗？我没有找到可以帮助解决此问题的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:45:27.367

我遇到了一个类似的问题，我必须创建一个平滑的滑块，我做了以下操作使滑块看起来非常平滑（[这里](http://beriah.net/speedy2)的一个实现- 请参阅季度/年度滑块）

1.  非常小的步长值（我使用了 0.0025 的值，而每一步所需的值是 1 个单位）
2.  将功能分配给滑块和/或滑块的更改事件。此函数会将滑块的实际值（0.0025 的倍数）转换为我们想要的步长值（1,2,3 等）并用于任何计算
3.  为滑块的停止事件分配一个函数，将滑块从滑块的当前值滑动到所需的值（1、2、3 等）。

**例子**

```
// Slider init 
$('#my-slider').slider({
    value : 6,
    min : 1,
    max : 6,
    animate : true,
    step : 0.0025,
    slide : slide_fn,
    change : slide_fn,
    stop : stop_fn,
});

// Slide function
function slide_fn(e, ui) {
    var value = get_desired_value(ui.value);
    // Do your stuff
}

// Stop function
function stop_fn(e, ui) {
    var value = get_desired_value(ui.value);
    // slide to the desired value
    setTimeout(function() {
        $("#my-slider").slider("value" , value);
    }, 300);
}

// get desired value - can be modified as per your requirements
// idea here is to assign anything between 0.5 to 1.5 to value 1, 1.5 to 2.5 to 2 and so on 
function get_desired_value(ui_value) {
    var float_value = parseInt(parseFloat(ui_value) * 1000) / 1000;
    var int_value = parseInt(float_value);
    if (float_value > int_value - 0.5 && float_value <= int_value + 0.5) {
        return int_value;
    } else if (float_value > int_value + 0.5) {
        return (int_value + 1);
    }
} 
```

我没有测试过上面的代码，但你应该明白了

# python - Qt：如何在相机视频流上渲染 3D 动画形状？

> ID：13384025
> 
> 赞同：3
> 
> 时间：2012-11-14T17:29:24.830
> 
> 标签：python, opengl, qt4, video-streaming, gstreamer

我的任务是创建一个增强现实应用程序，它的 GUI 与[这个](http://www.youtube.com/watch?v=VXZ6Hj2IOPE)类似（覆盖路径和 FollowMe 概念）。该任务的有趣部分是应用程序应该在 Qt 框架的帮助下在桌面操作系统（Debian/Ubuntu）上完成。Python 是应用程序的首选语言。

因此，与上述移动应用程序的最大区别在于，我的应用程序将使用插入 PC 的 USB 摄像头。

我尝试了几种不同的方法，但似乎都没有满足要求：

*   [这个例子](https://stackoverflow.com/questions/12275989/how-to-overlay-a-qt-phonon-video-with-an-opengl-scene "如何用 OpenGL 场景覆盖 Qt Phonon 视频？") 不起作用；
*   [该解决方案](https://stackoverflow.com/questions/4473709/play-a-video-with-custom-overlay-graphics "播放带有自定义叠加图形的视频") 使用“两层”方法，但是当我尝试渲染上部小部件时，它完全覆盖了底部小部件；
*   [这个解决方案](http://www.mateuszstankiewicz.eu/?cat=5) 有效，但它有两个缺点：`OpenCV`主要用途不是视频流渲染（错误的工具，我想`GStreamer`可能更适合），而且它只渲染简单的 4 点形状，它不允许任何复杂的带孔的多边形；

我还浏览了诺基亚的 Qt camerality[源代码](http://projects.developer.nokia.com/camerality)，但似乎这个问题在 Symbian 上以完全不同的方式解决，这在 PC 上不适用（嵌入式摄像头 API 与 PC 上的通用 USB 摄像头）。

我倾向于认为这个问题可以分为两个问题：

*   在 Qt PC 应用程序中渲染相机视频流的最佳方式是什么？
*   在 Qt PC 应用程序中的相机视频流上叠加动画 3D 图像（可能是 OpenGL 生成）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:25:09.530

If you are targeting a desktop I would use openGL for the whole process.
Use a quad in the background with a texture streaming the video (ie draw each video frame to the openGL texture) then render all your 3D model in openGL ontop of this.

Generaly all the video player frameworks (phonon, directshow etc) all work well as long as you ONLY want to do the simplest "show video in a box" task - as soon as you try and mix them with anything else it's harder than just drawing the images.

(Of course I may be wrong and I would love it if phonon allowed showing a video in an openGL quad with a couple of lines of code!)

# android - Android 处理程序冻结 GUI

> ID：13384028
> 
> 赞同：0
> 
> 时间：2012-11-14T17:29:38.357
> 
> 标签：android, timer, handler

我正在尝试将 PC Java 程序移植到 Android 平台。PC 应用程序使用 Swing.Timer 每秒触发一次更新。关联的侦听器在被调用时从数据库中获取新数据，然后使用 Graphics2D 更新/重绘屏幕。我已经学会了如何使用 Android 的 Canvas 来绘制与我使用 PC 应用程序相同的东西。现在我正在尝试学习如何在 Android 中使用等效的 Timer。不幸的是，在 Android 平台上，事情似乎并不那么简单。有 Timers、Handlers、AlarmManagers 和 AsyncTasks。似乎 AsyncTasks 和 AlarmManagers 更适合一次性（重型？）任务（对吗？错了？）关于 Timers 和 Handlers，我看到很多帖子说不要使用 Timer，而是使用 Handlers。我在网上某处找到了下面代码中使用的方法并尝试了它。似乎它应该做我想做的事，但是每当我单击停止按钮时它都会挂起 GUI。有谁知道它为什么这样做？

感谢一百万比尔

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    dateFormat = new SimpleDateFormat(dateFormatString);
    mHandler = new Handler();
    mUpdateTimeTask = new MyRunnable();
    Button button = (Button) findViewById(R.id.start_button);
    button.setOnClickListener(new MyStartListener());
    button = (Button) findViewById(R.id.stop_button);
    button.setOnClickListener(new MyStopListener());
}

class MyStartListener implements View.OnClickListener {
    public void onClick(View v) {
        if (startUptimeMillis == 0L) {
            startUptimeMillis = SystemClock.uptimeMillis();
            mHandler.removeCallbacks(mUpdateTimeTask);
            mHandler.postDelayed(mUpdateTimeTask, 100);
        }
    }
};

class MyStopListener implements View.OnClickListener {
    public void onClick(View v) {
        mHandler.removeCallbacks(mUpdateTimeTask);
   }
};

class MyRunnable implements Runnable {
    public void run() {
        final long start = startUptimeMillis;
        long millis = SystemClock.uptimeMillis() - start;
        int seconds = (int) (millis / 1000);
        int minutes = seconds / 60;
        seconds = seconds % 60;
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        TextView tv = (TextView) findViewById(R.id.time_textView);
        tv.setText(dateFormat.format(calendar.getTime()));
        mHandler.postAtTime(this, (((minutes * 60) + seconds + 1) * 1000));
    }
 }; 
```

编辑：问题是 postAtTime 需要一个**绝对**的开始时间，而不是我的示例使用的延迟。（[请参阅此处的 postAtTime](http://developer.android.com/reference/android/os/Handler.html)）所以我用下面的代码替换了上面的所有时间代码，它做了我想要的！！：

```
long millis = SystemClock.uptimeMillis();
mHandler.postAtTime(this, millis+1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:39:01.663

我看不出这会如何挂起您的应用程序，除非您的意思是开始按钮不再起作用...也许您想将其添加到停止侦听器中：

```
public void onClick(View v) {
    startUptimeMillis = 0l; // Reset startUptimeMillis
    mHandler.removeCallbacks(mUpdateTimeTask);
} 
```

* * *

至于 Timers、AsyncsTask 等……你是对的，在不久的将来在 Android 中编写事件的最佳方法是使用 Handler 和 Runnable。AlarmManagers 不适用于动画中的快速回调，而 AsyncTasks 更适合重型计算。

我想提供一个更简单的更新 Runnable：

```
class MyRunnable implements Runnable {
    public void run() {
        // You should make this a class variable and initialize it in onCreate(), 
        //   there is no need to search for the same View every second.
        TextView tv = (TextView) findViewById(R.id.time_textView);

        final long now = System.currentTimeMillis();
        tv.setText(dateFormat.format(now));
        mHandler.postAtTime(this, 1000 - (now - start) % 1000); // Accounts for millisecond offsets over time
        // mHandler.postDelayed(this, 1000); // Effected by minute offsets
    }
}; 
```

# c# - 多对多插入更新和删除我完成了一部分（Code First EF 5.0）

> ID：13384036
> 
> 赞同：0
> 
> 时间：2012-11-14T17:30:14.203
> 
> 标签：c#, asp.net-mvc, entity-framework

简单的多对多关系 ![在此处输入图像描述](../Images/423b7f3650a2a6e50cb55f203b040bda.png)

这是我想要完成的所有案例

*   案例1.文件和类别都是新的
*   案例2。文件不是新的，类别不是新的。
*   案例3.文件是新的，但类别不是新的
*   案例编号 4。文件是新的，但 categirt 不是新的。

## 案例 1 解决方案：这里一切正常

```
 using (MyContext DbCtx = new MyContext())
    {

        var FileCategory = new FileCategory { 
            Active=true, 
            Category="W",  
            File = new List<File>()  
        };
        var File = new File
        {
            FileName = "a",
            FileTypeId = 1,
            RevisionDate = DateTime.Now,
            UploadDate = DateTime.Now,
            FileCategory = new List<FileCategory>()
        };
        DbCtx.FileCategory.Add(FileCategory);
        FileCategory.File.Add(File);
        DbCtx.SaveChanges(); 
    } 
```

## 案例 2：我收到一个错误：NullReferenceException (

我认为 MyExistingFile 中的 FileCategory 导航属性为空。不确定延迟加载是否在这里得到了最好的我。

```
 using (MyContext DbCtx = new MyContext())
            {
                var MyExistingFile = DbCtx.File.Find(1);
                var MyExistingCategory = DbCtx.FileCategory.Find(1);
                //with the line below i am trying to say we dint change anything on File since it already exist
                DbCtx.Entry<File>(MyExistingFile).State = EntityState.Unchanged;
                //I am just trying to add the category to a file. Since a file can multiple categories.
                MyExistingFile.FileCategory.Add(MyExistingCategory);
                DbCtx.SaveChanges(); 
            } 
```

我猜一旦有人告诉我为什么案例 2 是错误的，我将能够解决其余的问题。

# 更新：Slauma 给出了解决方案

我在我的所有 poco 属性和导航属性中添加了 virtual 像这样

```
 public class FileCategory
    {
        [Key]
        public virtual int FileCategoryId { get; set; }
        public virtual string Category { get; set; }
        public virtual bool Active { get; set; }    
        public virtual ICollection<File> File { get; set; }
    } 
```

然后我能够写这个，它适用于案例 2

```
 using (MyContext DbCtx = new MyContext())
        {
            var MyExistingFile = DbCtx.File.Find(1);
            var MyExistingCategory = DbCtx.FileCategory.Find(1);
            MyExistingFile.FileCategory.Add(MyExistingCategory);
            DbCtx.SaveChanges(); 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:53:13.927

只需创建一个空列表：

```
using (MyContext DbCtx = new MyContext())
{
    var MyExistingFile = DbCtx.File.Find(1);
    var MyExistingCategory = DbCtx.FileCategory.Find(1);
    MyExistingFile.FileCategory = new List<FileCategory>();
    MyExistingFile.FileCategory.Add(MyExistingCategory);
    DbCtx.SaveChanges(); 
} 
```

在这种情况下，实际上最好避免延迟加载，因为它会`FileCategory`从数据库中加载集合。但是您不需要此集合来创建新关系。

`Unchanged`不需要手动将状态设置为，因此我删除了该行。

# javascript - onbeforeUnload 不返回或不显示对话框

> ID：13384042
> 
> 赞同：4
> 
> 时间：2012-11-14T17:30:25.700
> 
> 标签：javascript, jakarta-ee, browser, richfaces

我正在使用 Richfaces 在 Java EE 中开发一个 Web 应用程序。有一个链接，可以注销用户。当用户离开页面或关闭浏览器时，我应该注销用户，因为我必须知道他何时离开我们的页面。这是一个片段：

```
 function fireEvent(obj,evt){

      var fireOnThis = obj;
      if( document.createEvent ) {
          var evObj = document.createEvent('MouseEvents');
          evObj.initEvent( evt, true, false );
          fireOnThis.dispatchEvent(evObj);
      } else if( document.createEventObject ) {
          fireOnThis.fireEvent('on'+evt);
      }
  }

  var popit = true;
  window.onbeforeunload = function() {
      if(popit == true) {
         fireEvent(document.getElementById("logout_form:logout_link"),'click');
      }
  } 
```

这仅适用于关闭浏览器，而不是导航或刷新。我将 fireEvent(...) 更改为返回“”。一切正常。如果我在 fireEvent(...) 之后输入 return "" 效果很好，只是我不想显示对话框。我怎么能做这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T01:58:42.877

使用[同步](http://debugtheweb.com/test/xhr/sync.asp)AJAX 调用，然后将您的关闭方法放在回调中：

```
 window.onbeforeunload = function() {
   // This template uses no error checking, it's just concept code to be
   // expanded on.

   // Create a new XMLHttpRequest object
   var AJAX=new XMLHttpRequest();  

   // Handle ready state changes ( ignore them until readyState = 4 )
   AJAX.onreadystatechange= function() { if (AJAX.readyState!=4) return false; }

   // we're passing false so this is a synchronous request.
   // The script will stall until the document has been loaded.
   // the open statement depends on a global variable titled _userID.
   AJAX.open("GET", 'about:blank', false);
   AJAX.send(null);
} 
```

# wordpress - Category.php 中的 Wordpress 内容类型

> ID：13384044
> 
> 赞同：0
> 
> 时间：2012-11-14T17:30:29.963
> 
> 标签：wordpress, content-type, taxonomy

非常简单的设置，我使用 1 个模板进行多种分类。所以例子：

我有基本类别+ customtypetaxonomy。他们都有条款。我在同一个模板 - category.php 中显示这些术语的帖子。哪个效果很好，我想要它。

但是，我想根据它从中获取帖子的分类法对此模板进行一些小的更改。但我无法弄清楚我需要使用什么功能来获得它。

例如：single_cat_title() 给我这个词的标题（类别）

但我需要的是蛞蝓或身份证。有没有办法做到这一点？像 single_cat_id 或 single_cat_slug 之类的东西。我试过 $cat 但它没有给我任何输出。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:55:29.787

使用 WP_Query。像这样：

```
 $ThisQuery = new WP_Query( array( 'category_name'  => 'MyCategory',
                                      'meta_key'       => 'MyCustomFieldValue',
                                      'posts_per_page' => 10 ) ); // Number of posts

    if ( $ThisQuery->have_posts() ) : while ( $ThisQuery->have_posts() ) : $ThisQuery->the_post();
...

    endwhile;
    endif;
    wp_reset_postdata(); 
```

修改数组以包含标识您要获取的帖子的元素

另一个例子：

```
<?php
$Args = array( //Category
  'cat'           => 5,  // Category id.
  'category_name' => 'MyCategory',  // Category Name.
  //Taxonomy
  'tax_query'     => array( 'relation' => 'AND', // Could be OR
                            array( 'taxonomy' => 'MyTaxonomy1',
                                   'field'    => 'MySlug1',
                                   'terms'    => array( 'MyTerm11',
                                                        'MyTerm12' ), ),
                            array( 'taxonomy' => 'MyTaxonomy2',
                                   'field'    => 'MySlug2',
                                   'terms'    => array( 'MyTerm21',
                                                        'MyTerm22',
                                                        'MyTerm23' ), ) ), );
$ThisQuery = new WP_Query( $Args );
if ( $ThisQuery->have_posts() ) : while ( $ThisQuery->have_posts() ) : $ThisQuery->the_post();
  // Do Stuff
endwhile;
endif;
?> 
```

# iphone - CoreData NSManagedObject 不保存

> ID：13384053
> 
> 赞同：1
> 
> 时间：2012-11-14T17:30:47.557
> 
> 标签：iphone, objective-c, core-data, nsmanagedobject

到目前为止，我有一个非常简单的应用程序基础，两个文本字段，用户在其中输入一个人的名字和姓氏，然后当他们点击保存按钮时，以下代码运行：

```
person = (Person *)[NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:managedObjectContext];

NSError *err;
    if (![managedObjectContext save:&err])
    {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", err, [err userInfo]);
        exit(-1);  // Fail
    } 
```

所以我有一个`Person`对象，我在用户输入文本字段时设置名字和姓氏，然后在选择保存时插入对象。但是，保存后，名字和姓氏显示为`(null)`。我的所有出口和方法都已正确连接，所有代码都在运行以设置和保存名称/对象。

但是，如果我在主视图中执行此操作：

```
Person *p = (Person *)[NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:managedObjectContext];

PersonDetailViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"PersonDetail"];
    vc.managedObjectContext = fetchedResultsController.managedObjectContext;
    vc.person = p; 
```

然后保存我的对象，值不是`(null)`. 我在决定保存后尝试插入新对象，而不是创建它然后在取消时删除它以获得更清晰和更合乎逻辑的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:58:05.047

原来我的`Person`对象返回零。

解决方案：用 nil 上下文初始化一个`Person`对象，这样它就不会被插入但不是 nil。这样我可以确保它的变量来存储诸如名字和姓氏之类的东西，然后插入如下所示。

```
person = [[Person alloc] initWithEntity:[NSEntityDescription entityForName:@"Person" inManagedObjectContext:managedObjectContext] insertIntoManagedObjectContext:nil];

Person *p = (Person *)[NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:managedObjectContext];
        p.firstName = person.firstName;
        p.lastName = person.lastName; 
```

这帮助我达到了这一点： [有没有办法在不插入的情况下实例化 NSManagedObject？](https://stackoverflow.com/questions/3868514/is-there-a-way-to-instantiate-a-nsmanagedobject-without-inserting-it)

# css - 谷歌浏览器中嵌入 youtube 视频的奇怪错误

> ID：13384055
> 
> 赞同：0
> 
> 时间：2012-11-14T17:30:48.407
> 
> 标签：css, google-chrome, youtube

在谷歌浏览器中查看网页时出现了一个奇怪的问题。在 ie9 / safari 中查看时，嵌入的 youtube 视频工作正常，但由于某种原因，在 chrome 中它只是在页面加载时显示一个黑框。奇怪的是页面与之交互的那一刻，即。用户向下滚动，视频将正确显示。我不确定出了什么问题。

有问题的页面是：[http ://core.slnmedia.com/inspiration/](http://core.slnmedia.com/inspiration/)

页面上有一个脚本可以检测大图块右侧的可用宽度，如果有足够的空间，弹出面板将显示在右侧。如果没有，面板将显示在左侧。如果您调整浏览器窗口的大小，使“bevis 标记”图块位于屏幕的右上角，并且右侧只有少量可用空间，然后单击它，您会看到我的效果谈论。

改变磁贴位置的 javascript 函数如下：

```
$('.large-tile').hover(function() {
    $(this).find('.bw-photo').hide();
    $(this).find('.inspiration-detail-wrapper').show();    
    $(this).css("z-index", "2");   

    var profile = $(this).find('.inspiration-detail');
    if(profile.find('.content').text().trim().length == 0) {
      showData($(this).attr('id').substring(1, $(this).attr("id").length));  
    }          

    // **Depending on how much window space is available, position the panel on**left/right        
    var available = $(window).innerWidth() - ($(this).offset().left + 300);
    if(available >= 412) {
      // If enough space then show panel on right
      profile.css("left", "320px");          
    }
    else {
      // Otherwise attach left
      profile.css("left", "-368px");          
    }
    profile.show();

    $('.scrollbar-wrapper').tinyscrollbar({ size: 252 }); 
  },
  function() {
    $(this).find('.bw-photo').show();
    $(this).find('.profile').hide();        
    $(this).css("z-index", "1"); 
    $(this).find('.inspiration-detail-wrapper').hide();     
  }); 
```

奇怪的是行 profile.css("left", "320px"); 是什么导致了麻烦。如果您不包含此行，则视频将正确显示。由于某种原因，定位导致视频无法正确显示。

我希望我已经正确解释了这个问题 - 有没有人知道我在哪里出错了？快把我逼疯了！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:26:35.403

微软更新后我遇到了麻烦。我上周清除了缓存和 cookie，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T03:09:20.797

这对我有用：

```
<iframe allowfullscreen frameborder="0" height="315"
src="http://www.youtube.com/embed/A3pIrBZQJvE?wmode=transparent" width="420"
wmode="Opaque"></iframe> 
```

[资源](https://stackoverflow.com/questions/14410162/youtube-embedded-overlays-on-each-tab-for-ie10)

# url - Symfony2.1 使用带有方法 GET 的表单

> ID：13384056
> 
> 赞同：7
> 
> 时间：2012-11-14T17:30:50.820
> 
> 标签：url, symfony-forms, symfony-2.1

我需要有关使用带有 method=GET 和干净 URL 空间的 Symfony2.1 表单的帮助。

我正在创建一个我想在 URL 中设置的“过滤器”，以便人们可以为他们的链接添加书签。

所以，非常简单的代码：

```
$form = $this->createFormBuilder($defaultData)
    ->add('from', 'date', array('required' => false, 'widget' => 'single_text', 'format' => 'dd.MM.yyyy')) 
```

我渲染表单小部件，一切都很好。

但是，当我提交表单时，它会产生非常难看的 GET 参数：

```
/app_dev.php/de/event?form%5Bfrom%5D=17.11.2012 
```

这是因为输入的名字当然是`form[from]`

所以为了清理 URL 空间，我给自己做了一个主题：

```
{% block widget_attributes %}
{% spaceless %}
    id="{{ id }}" name="{{ id }}"{% if read_only %} disabled="disabled"{% endif %}{% if required %} required="required"{% endif %}{% if max_length %} maxlength="{{ max_length }}"{% endif %}{% if pattern %} pattern="{{ pattern }}"{% endif %}
    {% for attrname,attrvalue in attr %}{{attrname}}="{{attrvalue}}" {% endfor %}
{% endspaceless %}
{% endblock widget_attributes %} 
```

我`name="{{ full_name }}"`用`name="{{ id }}"`.

这很好用——我的 URL 空间更干净：

```
/app_dev.php/de/event?form_from=17.11.2012 
```

我想我可以忍受 - 尽管理想情况下`from=xxx`会更好。这是第一个也是更小的问题。

* * *

第二个问题是我无法再绑定表单了——这很明显，因为不再设置参数“form”——“form_from”已经替换了它，但是当你进行绑定时，它仍然期待 form[] .

我试图像这样解决这个问题：

```
$fromDate = $this->get('request')->query->get('form_from', null);
$request->query->set('form', array('from' => $fromDate); 
```

但这不起作用。我也怀疑我现在正在挖掘一个巨大的黑客漏洞。

所以，问题是：我应该只使用`form%5Bfrom%5D`url，还是有更好的方法来完成所有这些（显然不使用 POST）？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-20T13:41:29.967

您可以将根表单的名称设置为空，那么您的字段名称将为`form`. 通过这样做

```
// the first argument to createNamedBuilder() is the name
$form = $this->get('form.factory')->createNamedBuilder(null, 'form', $defaultData)
    ->add('from', 'date', array(
        'required' => false,
        'widget' => 'single_text',
        'format' => 'dd.MM.yyyy'
    )); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-15T13:17:03.967

旧线程，但值得一提的是 symfony 3`getName`完全忽略了。

但是，`getBlockPrefix`如果您需要将表单名称留空，您也可以这样做。

```
public function getBlockPrefix() {
    return null;
} 
```

这将导致表单字段被命名为不带前缀。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-23T15:46:47.943

`return null;`在你的实现中使用`AbstractType::getName`这些天似乎有同样的效果。

# php - php mysql 最大执行时间超过300秒_fatal错误

> ID：13384058
> 
> 赞同：0
> 
> 时间：2012-11-14T17:31:01.550
> 
> 标签：php, mysql, sql, phpmyadmin

我正在从数据库中查询数据，查询子句随天而变。换句话说，我想通过在 unix 时间戳中计算秒来以一天为单位获取数据。

所以，我为一日查询所做的是，

```
SELECT IDnum, Timestamp FROM table_name
WHERE CONVERT(Timestamp, UNSIGNED INTEGER) >= ($start_tim-86400*($i+1))
  AND CONVERT(Timestamp, UNSIGNED INTEGER) < ($start_time-86400*$i) 
```

因为表中的Timestamp属性是varchar(32)，所以我在where子句中使用CONVERT()将其转换为int，并与86400的int类型进行比较。

到目前为止，此查询子句有效，但我设置 ini_set('max_execution_time', 300) 至少需要 5 分钟。5 分钟后，它显示“致命错误：C:\www\LineChartOne\generateJSONdata.php 第 90 行的最大执行时间超过 420 秒”，但仍未完成。

我的问题是为什么它需要这么多时间，因为我在“where 子句”中使用了函数调用？或者“where子句”有问题，否则它不应该运行那么慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:52:44.187

我猜这`CONVERT()`是超级低效的。使用`UNIX_TIMESTAMP()`or`FROM_UNIXTIME()`或[date 函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)，如`DATE_SUB()`or`DATE_DIFF()`来比较日期。

如果它*仍然*需要很长时间，那么要么出现问题并且您没有数千万行，那么很可能是：

1.  您的 PHP 代码效率低下。
2.  此查询比您显示的内容更多。
3.  您的 Web 和/或 mySQL 服务器承受着来自其他用户的沉重负载。

## 编辑：

亲爱的耶稣，你评论中的代码让我的大脑发痒。此外，我刚刚意识到您的`Timestamp`列是 VARCHAR 而不是 TIMESTAMP。*坏用户*。不要将数字或日期存储为字符串。去角落坐下。

*   选项 1：将其设为 INT。[适用于您现有的代码]
*   选项 2：将其设为 DATETIME。[通常更灵活]

你没有得到的东西：

1.  `FROM_UNIXTIME()`将整数时间戳转换为`DATETIME`类型。如果你给它一个字符串，它会做一个隐式转换。[转换很*慢*]
2.  `UNIX_TIMESTAMP()`接受一个日期字符串, `DATE`, or`DATETIME`并返回一个整数。

您提供的代码`UNIX_TIMESTAMP(FROM_UNIXTIME(Timestamp))`将字符串转换为 int，将日期转换为 int。[文档在这里，请阅读它。](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

查询需要这么长时间的绝大多数原因是 mySQL 必须将`Timestamp`from中的所有值转换`VARCHAR`为`INTEGER`. 更改列类型，您可以进行简单的整数比较，这将*更快*。

`$start_time-86400*($i+1)`通过在 PHP 中预先计算表达式可以获得更小的性能增益。mySQL*应该*优化为只计算一次，但是当您的查询变得更复杂并且它可能开始为每一行计算时，优化器可以做一些时髦的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:57:03.063

mysql 查询解析器正在努力转换这些列，您需要为要存储的值使用正确的数据类型，即：int 表示 int，varchar 表示字符串，datetime 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T15:30:58.797

```
ini_set('max_execution_time', 300); //300 seconds = 5 minutes 
```

把它放在你的 PHP 脚本的顶部，让你的脚本松散！

取自[使用 ini_set() 增加 PHP 脚本执行时间限制](http://davidwalsh.name/increase-php-script-execution-time-limit-ini_set)

# antlr - ANTLR 日期和整数匹配

> ID：13384064
> 
> 赞同：3
> 
> 时间：2012-11-14T17:31:32.363
> 
> 标签：antlr

我正在评估一种相对简单的 IF/THEN 语言，但遇到了一个问题：我需要匹配格式为 YYYYMMDD 的整数和日期。如果我可以编写一个真正的正则表达式，我可以很容易地解决这个问题，但还没有找到一个 ANTLR 解决方案。

语法看起来像这样：

```
//overall rule to evaluate a single expression
singleEvaluation returns [boolean evalResult]
  : integerEvaluation {$evalResult = $integerEvaluation.evalResult;}
  | dateEvaluation {$evalResult = $dateEvaluation.evalResult;}
  // etc
  ;

dateEvaluation returns [boolean evalResult]
  : expr1=(INTEGER|'TODAY'|DATE_FIELD_IDENTIFIER) (leftOp=('+'|'-') leftModifier=INTEGER leftQualifier=DATE_QUALIFIER)? 
    operator=(EQ|NE|LT|LE|GT|GE) 
    expr2=(INTEGER|'TODAY'|DATE_FIELD_IDENTIFIER) (rightOp=('+'|'-') rightModifier=INTEGER rightQualifier=DATE_QUALIFIER)?
{ // code }

integerEvaluation returns [boolean evalResult]
  : expr1=(NUM_FIELD_IDENTIFIER|INTEGER) 
    operator=(EQ|NE|LT|LE|GT|GE) 
    expr2=(NUM_FIELD_IDENTIFIER|INTEGER)
  { // code
  }
  ;

fragment DIGIT: '0'..'9';
INTEGER: DIGIT+;
DATE_FIELD_IDENTIFIER: ('DOB'|'DATE_OF_HIRE');
NUM_FIELD_IDENTIFIER: ('AGE'|'DEPARTMENT_ID');
DATE_QUALIFIER:('YEAR'|'YEARS'|'MONTH'|'MONTHS'|'DAY'|'DAYS'|'TODAY');
EQ:'=';
NE: '<>';
LT: '<';
LE: '<=';
GT: '>';
GE: '>='; 
```

需要解析的语句示例类似于“65 > AGE”或“AGE < 65”或“DOB > 19500101”。

有人可以建议一种方法让解析器区分 INTEGER 和 8 位日期格式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:41:16.003

在词法分析器匹配 a 之后`INTEGER`，您可以检查其匹配的文本（通过 引用`$text`），并根据该自定义检查，决定将其类型从 更改`INTEGER`为`DATE`。该`DATE`规则可以作为一个空`fragment`规则，然后可以在解析器规则中使用，就像它是一个普通的词法规则一样。

快速演示：

```
INTEGER
 : DIGIT+
   {
     // If this token starts with either '19' or '20', followed 
     // by 6 digits, change it to a DATE-token.
     if ($text.matches("(19|20)\\d{6}")) {
       $type = DATE;
     }
   }
 ;

fragment DATE : /* empty! */ ; 
```

然后在解析器规则中，您可以使用`DATE`：

```
dateEvaluation
 : DATE ...
 ; 
```

# javascript - 来自 Guardian API 的 Json 数据

> ID：13384066
> 
> 赞同：0
> 
> 时间：2012-11-14T17:31:33.023
> 
> 标签：javascript, json, web-scraping

我有一个监护人 json 数据提要，我想将其在线拉入我的页面。

[http://content.guardianapis.com/world/cuba?format=json&show-fields=trail-text%2Cheadline&order-by=newest&api-key=c3rr449rqqebmuxua9k5mdcz](http://content.guardianapis.com/world/cuba?format=json&show-fields=trail-text%2Cheadline&order-by=newest&api-key=c3rr449rqqebmuxua9k5mdcz)

我已经使用了这个 javascript，但似乎没有任何东西可以从 json 中获取正确的内容；

```
$(document).ready(function() {  
$.ajax({
    type: "GET",
    dataType: "jsonp",
    cache: false,
    url: "http://content.guardianapis.com/world/cuba?format=json&show-fields=trail-text%2Cheadline&order-by=newest&api-key=c3rr449rqqebmuxua9k5mdcz",
    success: function(data) {
        for (var i = 0; i < 12; i++) {
        $("#cuban-news").append("<div class='guardian'><a target='_blank' href='" + webTitle + "'>Link</a></div>");
        }
        console.log(data);
    }
}); 
```

});

这不会在错误方面抛出任何东西。

我最好使用像骨干网或下划线这样的js服务吗？

对此的任何帮助都会令人惊叹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:06:36.410

利用

```
data.response.results[i].webTitle 
```

代替

```
webTitle 
```

错误是
*Uncaught ReferenceError: webTitle is not defined*

```
$(document).ready(function() {  
$.ajax({
    type: "GET",
    dataType: "jsonp",
    cache: false,
    url: "http://content.guardianapis.com/world/cuba?format=json&show-fields=trail-text%2Cheadline&order-by=newest&api-key=c3rr449rqqebmuxua9k5mdcz",
    success: function(data) {
        for (var i = 0; i < data.response.results.length; i++) {
        $("#cuban-news").append("<div class='guardian'><a target='_blank' href='" 
            + data.response.results[i].webTitle + "'>Link</a></div>");
            }
            console.log(data);
        }
    });
 });​ 
```

[JSFiddle](http://jsfiddle.net/QrwfL/)

# mysql - Mysql重复行（忽略id +时间戳）而不命名查询中的所有其他列？

> ID：13384074
> 
> 赞同：4
> 
> 时间：2012-11-14T17:32:03.393
> 
> 标签：mysql, duplicates

我试图在标题中使这个问题简洁。

有很多类似问题的答案，但都涉及命名查询中表中的每一列。

我想要的是一个查询来显示重复的行，但忽略一两列，我希望能够像这篇文章中显示的那样[返回重复记录](https://stackoverflow.com/questions/5885602/return-duplicate-records)，但不必显式命名表中的每一列.

可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-06T21:09:08.243

*注意：由于这是“工作台如何复制一行”的最高谷歌结果，我倾向于为该问题提供答案。如果版主认为这不合适；随时帮助解决挪用问题。*

1.  从单个表中选择所有列（或您的目标列），没有连接或限制编辑器内插入的任何其他内容。

    例如：`SELECT * FROM mytable ORDER BY id DESC`

2.  右键单击要复制的行，`Copy Row`

3.  转到选择结果的底部，`end`，应该有一行全`null`是

4.  右键单击空行，`Paste Row`

    > 不要忘记取消或设置为默认值，您要保留的任何列；像主索引/ID，或任何唯一的约束列！

5.  要插入重复的行，请使用`Apply`右下角的按钮。

Workbench 将打开一个对话框并显示您生成的插入语句并提供为您执行它们。允许没有错误，您只是复制了一行！

再次运行您的 select 语句以查看结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:39:53.340

我不认为有其他方法。我会右键单击 MySQL Workbench 中的表，选择“Send to SQL Editor”和“Select All Statement”作为起点。

# sql - Azure 存储过程输出值

> ID：13384075
> 
> 赞同：0
> 
> 时间：2012-11-14T17:32:05.830
> 
> 标签：sql, database, azure, azure-sql-database

我一直在尝试在我的 Azure 数据库上组装一个存储过程，当它运行查询时，它会从一个特定的列返回一个输出值。

多个结果的可能性为零，因为被查询的表有 3 列，并且查询必须马赫数 2。然后它从另一个表中获取数据。关键是我需要第一个查询来输出值才能开始第二个查询。

目前我有2个程序，我想要一个。

查询目前是这样的：

```
select 
    customers_catalogs_define.catalog_id 
from 
    customers_catalogs 
left outer join    
    customers_catalogs_define on customers_catalogs.catalog_id = customers_catalogs_define.catalog_id 
where 
    customers_catalogs.catalog_unique_identifier = @catalog_unique 
    AND customers_catalogs_define.customer_id = @customer_id 
```

输出当然是`catalog_id`. 从那我把它带到另一个查询中，我有这个查询来进行实际的列表检索。至少我想添加一条简单说明的行`@catalog_id = output`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:43:55.753

您基本上有两种选择来完成这项工作：

由于我还没有看到您的第二个查询，因此请确保它查询下面列出的正确表`CUSTOMERS_CATALOGS_DEFINE`

*按照您的建议使用变量：*

```
DECLARE @CATALOG_ID INT

SET @CATALOG_ID = (
    SELECT CUSTOMERS_CATALOGS_DEFINE.CATALOG_ID 
    FROM CUSTOMERS_CATALOGS 
    LEFT OUTER JOIN CUSTOMERS_CATALOGS_DEFINE 
    ON CUSTOMERS_CATALOGS.CATALOG_ID = CUSTOMERS_CATALOGS_DEFINE.CATALOG_ID 
    WHERE CUSTOMERS_CATALOGS.CATALOG_UNIQUE_IDENTIFIER = @CATALOG_UNIQUE 
    AND CUSTOMERS_CATALOGS_DEFINE.CUSTOMER_ID = @CUSTOMER_ID )

SELECT * 
FROM CUSTOMERS_CATALOGS_DEFINE
WHERE CATALOG_ID = @CATALOG_ID 
```

第二种选择是在一个查询中执行此操作：

```
SELECT * 
FROM CUSTOMERS_CATALOGS_DEFINE
WHERE CATALOG_ID IN (
    SELECT CUSTOMERS_CATALOGS_DEFINE.CATALOG_ID 
    FROM CUSTOMERS_CATALOGS 
    LEFT OUTER JOIN CUSTOMERS_CATALOGS_DEFINE 
    ON CUSTOMERS_CATALOGS.CATALOG_ID = CUSTOMERS_CATALOGS_DEFINE.CATALOG_ID 
    WHERE CUSTOMERS_CATALOGS.CATALOG_UNIQUE_IDENTIFIER = @CATALOG_UNIQUE 
    AND CUSTOMERS_CATALOGS_DEFINE.CUSTOMER_ID = @CUSTOMER_ID
) 
```

# android - 全屏 Webview 中的 adjust_pan 行为

> ID：13384076
> 
> 赞同：2
> 
> 时间：2012-11-14T17:32:10.713
> 
> 标签：android

我正在尝试解决在我的 Webview 中，当用户选择一个文本字段时，出现的键盘会覆盖下面的文本字段的问题。相反，我需要一种将文本字段移动到键盘正上方的行为，就像标志 SOFT_INPUT_ADJUST_PAN 会做的那样。

根据测试，默认情况下，Webview 似乎在字段下方显示键盘。但是我的 WebView 是全屏的。我在我的活动中调用 this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN)); 这似乎使 android 停止执行默认的“平移和扫描”行为。

我试图调用 getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN) 甚至 getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE) 但这并没有解决它。

我需要将活动设置为全屏，因为我想隐藏标题栏和状态栏，因此除非有另一种隐藏状态栏的方法，否则删除它不是一个选项。

关于如何解决这个问题的任何想法？

洛朗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:44:34.643

您需要删除 FLAG_FULLSCREEN 标志。操作系统机器中的某个地方存在一个错误，经过一些挖掘，我发现了以下内容：

*   在 web 视图周围没有任何额外的滚动视图，adjustPan 从来没有为我工作过。不幸的是，添加滚动视图也并不总是有帮助。
*   当 webview 所在的活动不存在 FLAG_FULLSCREEN 时，adjustScroll 对我有用。

所以总结一下，当涉及到 WebView 时，最安全的选择是 adjustResize 而不是全屏活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-05T16:01:14.247

对我来说，这很有效：

```
getDialog().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

# xsd - 使用 schemagen 时 xmlns:tns 来自哪里

> ID：13384081
> 
> 赞同：2
> 
> 时间：2012-11-14T17:32:21.023
> 
> 标签：xsd, jaxb, schemagen, annotated-pojos

我们正在使用[schemagen](http://jaxb.java.net/nonav/2.0.2/docs/schemagenTask.html)从一些带注释的 POJO 创建 XSD。

这是我们的蚂蚁目标

```
<target name="generate-xsd" depends="compile">
    <taskdef name="schemagen" classname="com.sun.tools.jxc.SchemaGenTask" 
                     classpathref="xjc.classpath"/>
    <schemagen srcdir="src" destdir="generated" includeantruntime="false">
        <include name="com/acme/exam/delivery/records/**"/>
        <schema namespace="http://www.acme.com/deliverylog" 
                            file="deliverylog.xsd"/>
        <schema namespace="" file="supplemental.xsd"/> 
    </schemagen>
</target> 
```

这正在生成

```
<xs:schema elementFormDefault="qualified" version="1.0" 
           targetNamespace="http://www.acme.com/deliverylog" 
           xmlns:tns="http://www.acme.com/deliverylog" 
           xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
```

**tns 命名空间来自哪里，它意味着什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:34:05.983

该信息来自`@XmlSchema`可以在`package-info`类中找到的包级别注释。请参阅下面的示例。

**包信息**

```
@XmlSchema(
    namespace = "http://www.acme.com/deliverylo",
    elementFormDefault = XmlNsForm.QUALIFIED)
package example;

import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

**示例 XML**

`elementFormDefault`指定哪些元素应该是命名空间限定的（true = all，false = 只有全局元素），并`targetNamespace`定义命名空间是什么。

```
<foo xmlns="http://www.acme.com/deliverylog">
    <bar>Hello World</bar>
</foo> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

# asp.net - ASP.NET：如何访问动态创建的控件

> ID：13384089
> 
> 赞同：2
> 
> 时间：2012-11-14T17:32:49.757
> 
> 标签：asp.net, dynamic, checkbox

我正在动态创建一堆复选框：

```
CheckBox chkRead = new CheckBox();
chkRead.ID = "chk1";
chkRead.AutoPostBack = true;
chkRead.CheckedChanged += new EventHandler(CheckBox_CheckedChanged);

CheckBox chkPost = new CheckBox();
chkRead.ID = "chk2";
chkPost.AutoPostBack = true;
chkPost.CheckedChanged += new EventHandler(CheckBox_CheckedChanged);

 protected void CheckBox_CheckedChanged(object sender, EventArgs e)
 {
     CheckBox chk = (CheckBox)sender;

 } 
```

我想要做的是以下内容：当我检查**chkPost** CheckBox 我希望**chkRead** CheckBox 也被检查

在**CheckBox_CheckedChanged**事件中，我只能访问被单击的 CheckBox，但我不知道如何检查该事件中的另一个复选框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:38:27.050

这是来自记忆，但您可以执行以下操作：

```
protected void CheckBox_CheckedChanged(object sender, EventArgs e)
{
    CheckBox chk = (CheckBox)sender;
    CheckBox chkPost = (CheckBox) chk.NamingContainer.FindControl("chk2");
    CheckBox chkRead = (CheckBox) chk.NamingContainer.FindControl("chk1");
    if(chk == chkPost && chk.Checked)
    {  
        chkRead.Checked = true;
    }
} 
```

这是假设您想在回发后在代码隐藏中执行所有这些操作。如果你想用javascript来做，那是一个不同的问题。

这也假设`chk1`和`chk2`在同一个命名容器中。如果不是，事情就会变得复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:38:23.137

由于是您的代码创建了复选框，因此您可以将它们的引用存储在列表或字典中，并在需要时通过 id 检索它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:38:48.660

如果您想动态执行此操作，您可以向您感兴趣的复选框添加一个属性 - 然后您可以遍历 Page.Controls 集合并测试您循环的控件是否具有该属性，然后您可以检查，或者取消选中它。

一些伪代码：

```
foreach(var control in Page.Controls)
  if(typeof(Control) is CheckBox and ((CheckBox)control).Attributes["myAttr"] != null)
     //check or uncheck it 
```

在阅读您关于嵌套控件的评论时（这可能有点麻烦），我倾向于同意 Igor 的观点，即您应该将 id 放在一个集合中，因为它们是动态添加的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:43:00.807

您可以在创建这些复选框的位置粘贴代码吗？是“OnInit”还是其他地方？您是将这些复选框放入容器中，您是将这些控件存储为全局变量还是在方法中创建它们？

# objective-c - 将对象（ UIViewController ）转换为它们的未知子类

> ID：13384090
> 
> 赞同：0
> 
> 时间：2012-11-14T17:32:52.657
> 
> 标签：objective-c, ios

我已经开发了一个用于滑动 UIView 的通用控制器，并且我管理 UIViewController （显然是子类）并且只有当 UIViewController 的子类响应此方法时才必须调用特定方法（冻结）：

```
-(void)freezeRootViewController
{
    if([_rootViewController respondsToSelector:@selector(freeze)])
        [ ((id) _rootViewController) freeze];
} 
```

我不知道 _rootViewController 的类，但我知道它是 UIViewController 的子类，因此我尝试将我的 _rootViewController 转换为 ID，但我无法编译：

环境：XCode 4.5.1，带 ARC 的 iOs 4.3+

错误：“不知道选择器‘冻结’的实例方法”

注意：我不能强制开发人员为 _rootViewController 使用特定的 UIViewController 子类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:58:17.440

检查“通用”类型是否响应选择器后，如果它是简单的 0-1 参数方法，则使用`performSelector:`/调用它`performSelector:withObject:`，否则使用[`NSInvocation`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html). 由于`freeze`没有参数，您只需使用`performSelector:`.

```
-(void)freezeRootViewController
{
    if([_rootViewController respondsToSelector:@selector(freeze)])
        [_rootViewController performSelector:@selector(freeze)];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:36:20.690

这似乎是一个*警告*而不是错误 - 您*应该*能够编译您的代码并忽略此诊断消息。但是，如果您想完全摆脱它，您可以声明一个协议并执行以下转换：

```
@protocol MyProtocol <NSObject>

- (void)freeze;

@end

[(id <MyProtocol>)_rootViewController freeze]; 
```

# active-directory - 如何为活动目录转储所有用户哈希

> ID：13384091
> 
> 赞同：-1
> 
> 时间：2012-11-14T17:32:52.240
> 
> 标签：active-directory

我想为活动目录转储所有用户哈希。可以做到？如果可以的话，你能给我一个工具或代码吗？我可以找到用户名属于网络中的哪个 IP 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:15:05.973

您可以使用**Windows 密码恢复工具**从 Active Directory 中转储哈希。问题是为什么要转储 Active Directory 哈希？（转储 AD 哈希的正当理由很少。）

# php - 表单提交后的对话框

> ID：13384093
> 
> 赞同：1
> 
> 时间：2012-11-14T17:33:18.983
> 
> 标签：php, javascript, forms, modal-dialog

我整天在stackoverflow上搜索正确的答案，也找不到帮助我的东西。

有一个像这样的简单形式：

```
<form action="process.php" method="post">
    <input type="text" name="email">
    <input type="password" name="password" id="password">
    <button value="Login" type="submit" name="submit" onclick="formhash(this.form, this.form.password);"></button>
</form> 
```

**当前：**提交表单重定向到 process.php，显示成功消息并在一段时间后重定向到另一个页面。

**我需要的是：**而不是重定向到 process.php 模式对话框应该打开做工作并显示成功消息，一段时间后关闭对话框，然后刷新实际的一面。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:41:06.893

使用 ajax 提交，JQuery 已经支持这个。尝试 JQuery API [http://api.jquery.com/](http://api.jquery.com/)尤其是[http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)该站点上也提供了示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:43:17.780

这可能是您正在寻找的：

[消息框打开然后消失](http://www.codeguru.com/csharp/csharp/cs_misc/userinterface/article.php/c10139/Form-Fade-InOut-Effect-and-Notification-Window.htm)

stackoverflow上也有类似的问题：[Link](https://stackoverflow.com/questions/9959207/messagebox-without-buttons-in-c-sharp)

# asp.net-mvc - 在 Html.EditorFor() 中传递 TimeSpan

> ID：13384103
> 
> 赞同：1
> 
> 时间：2012-11-14T17:34:00.120
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我遇到了一个非常奇怪的异常。
我有一个具有 TimeSpan 属性的模型并尝试创建一个视图。

```
public class Clock {

    [DataType(DataType.Time)]
    [DisplayFormat(DataFormatString = @"{0:hh\:mm}", ApplyFormatInEditMode = true)]
    public TimeSpan Time {get;set;}
}

@Html.EditorFor(model => model.Time) 
```

这就是我得到的

```
[InvalidOperationException: The model item passed into the dictionary is of type 'System.TimeSpan', but this dictionary requires a model item of type 'System.String'.]
System.Web.Mvc.ViewDataDictionary`1.SetModel(Object value) +321071
System.Web.Mvc.ViewDataDictionary..ctor(ViewDataDictionary dictionary) +377
System.Web.Mvc.WebViewPage`1.SetViewData(ViewDataDictionary viewData) +48 
```

我在另一个项目中使用了这种技术并且它有效，但在我当前的项目中它失败了，我不知道我的。也许我错过了某些东西或某些东西被禁用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-15T15:53:04.937

使用 时`@Html.EditorFor()`，MVC 首先查看是否可以使用默认约定（或者您可能在 custom 中定义的约定`ViewEngine`）找到模板。

如果它找不到一个——在你的情况下，你没有定义一个——然后它使用内置模板。在 的情况下`TimeSpan`，它试图对一个`String`类型使用模板，这导致了您看到的异常。

您将需要明确定义一个`TimeSpan.cshtml`模板，使用`@model TimeSpan`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T13:49:49.137

我的回答与其说是一种解决方法，不如说是一种解决方法，因为我不确定异常的原因，但对我来说，如果我从 TFS 进行干净的结帐，它就会起作用。

# c++ - 使用 libjpeg / C++ 的文件中的 JPEG 编码位图 (BMP) 图像

> ID：13384104
> 
> 赞同：3
> 
> 时间：2012-11-14T17:34:01.417
> 
> 标签：c++, image-processing, jpeg, libjpeg

我们使用 IJG 的 libjpeg 库的 8d 版从 24 位 Windows 位图 (.bmp) 文件创建 JPEG 图像。

IJG 的 example.c 中的 write_JPEG_file() 函数未经任何修改即可使用，如下所示：[http://code.google.com/p/sumatrapdf/source/browse/trunk/ext/libjpeg-turbo/example.c? r=2397](http://code.google.com/p/sumatrapdf/source/browse/trunk/ext/libjpeg-turbo/example.c?r=2397)

执行的步骤顺序如下：

```
BITMAPFILEHEADER bfh;
BITMAPINFO bi; 
BITMAPINFOHEADER *bih;
FILE *input;
int image_height;
int image_width;

fopen_s( &input, "image.bmp", "rb" ); // Open existing file

// Read bitmap file header
fread_s( &bfh, sizeof(BITMAPFILEHEADER), 1, sizeof(BITMAPFILEHEADER), input );

// Read bitmap info header
fread_s( &bi, sizeof(BITMAPINFO), 1, sizeof(BITMAPINFO), input );

bih = &bi.bmiHeader;
image_height = bih->biHeight;
image_width = bih->biWidth;
int data_size = image_width * image_height * 3; // Compute image data size

// Allocate image buffer; this is the buffer write_JPEG_file() will use
JSAMPLE * image_buffer = (JSAMPLE *)malloc( data_size );

// Read image pixel data from file
fread_s( image_buffer, data_size, 1, data_size, input );

fclose( input );

write_JPEG_file( "image.jpg", 100 /* quality */ ); 
```

尽管一切正常，但生成的 JPEG 图像与原始位图图像的颜色不同，例如，红色和蓝色交换，黄色和青色相同......

我们尝试使用 fseek() 将输入文件光标设置为 bfh.bfOffBits，但颜色仍然关闭。

是否需要任何其他步骤来确保正确完成 JPEG 编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:39:30.047

BMP 文件以 BGR 顺序使用像素颜色编码，JPEG 库需要 RGB 顺序。您必须将每组 3 个中的红色和蓝色字节反转。

BMP 文件也以文件顶部的底线进行组织，您也需要反转它。

# connection - 我不能在 2 个不同的连接上在 mongoose 中使用 2 个具有相同名称的模式，因为只使用了第一个？

> ID：13384107
> 
> 赞同：0
> 
> 时间：2012-11-14T17:34:09.567
> 
> 标签：connection, mongoose

```
var mongodbHost = 'mongodb://localhost:9000/';
var connectionA = require('mongoose').createConnection(mongodbHost + 'A', function(err){
    var schema = require(path.resolve(__dirname, 'migrations', 'v01_00_001', 'models', 'index')).schemas.Serial;
    debugger;
    connectionA.model('Test', schema);
    console.log('First check:', schema.statics.___XXX === connectionA.models.Test.___XXX);
}.bind(this));

var connectionB = require('mongoose').createConnection(mongodbHost + 'B', function(err){
    var schema = require(path.resolve(__dirname, 'models', 'index')).schemas.Serial;  
    debugger;
    connectionB.model('Test', schema);
    console.log('First check:', schema.statics.___XXX === connectionA.models.Test.___XXX);
    console.log('Second check:', schema.statics.___XXX === connectionB.models.Test.___XXX);
}.bind(this));
// output is true, false, false

    // While it should be: true, false, true 
```

有人知道我会做什么吗？问题是，当我执行第一个 require('mongoose') 时，我得到了一个新的 mongoose 实例，因此其余的 requires 也将得到相同的实例。猫鼬在连接之间共享模式：s

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:12:53.633

[https://github.com/LearnBoost/mongoose/issues/1211](https://github.com/LearnBoost/mongoose/issues/1211)

```
var mongooseA = new (require('mongoose').Mongoose)();
var mongooseB = new (require('mongoose').Mongoose)(); 
```

然后创建连接2连接...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:38:35.413

为模型指定不同的名称，但仍为两者使用相同的集合名称：

```
connectionA.model('TestA', schema, 'Tests');
...
connectionB.model('TestB', schema, 'Tests'); 
```

# git - Git：当工作分支中的文件被删除时，如何使 *git rebase upstream/master* 工作？

> ID：13384112
> 
> 赞同：3
> 
> 时间：2012-11-14T17:34:36.360
> 
> 标签：git, rebase

我是 GIT 的新手，有一个可能很愚蠢的问题，但到目前为止我搜索到没有帖子提到这一点。情况如下：

```
 A                A'
upstream/master-+---+----+----+-----+
                    |
myworkingbranch     +---+---+---
                    A   B   C 
```

我在 A 点 fork 一个 repo，然后做出我自己的提交 B，C，...同时，原始 repo 提交了它的提交 A'。通常，通过应用 git rebase，我可以基于 A' 而不是基于 A 来制作 B、C、...。但是，在提交 B 中，我删除了一些文件，这些文件仍保留在 A' 中。然后，每次我执行 git rebase 时，它​​都会抱怨删除/删除文件的冲突，这意味着我需要通过 mergetool 或其他方式手动解决冲突。

我从 github 的帮助页面中得知，这个问题似乎分为两部分：

1.  通过 git rebase，提交 B、C 将被取消，myworkingbranch 将返回缓存中的 A。在此期间，B中删除的文件如何？他们会恢复吗？我认为不是，因为如果它会，那么就不会有问题。

2.  如果删除的文件没有恢复，当我从上游/主应用提交 A' 时，其中包含对已删除文件的更改，存在冲突。并且每次变基时，都需要手动解决冲突。由于可能有数百个这样的文件，这很糟糕。

**Qestion：**虽然应用了包含更改 myworking 分支中删除的文件的上游/主提交，但是否有一种优雅的 git rebase 方法，可以**自动省略**引用那些已删除文件的更改？在我上面提到的问题的两个部分？

我确实发现对于 git merge，我可以使用`.gitattribute`file 来省略上游分支中的某些文件。它适用于 git rebase 吗？我想这不会是因为，如果我`.gitattribute`通过提交添加这些文件，比如在 myworkingbranch 中添加 D，那么当 git rebase 时，状态 A 将在缓存中，而不是 D，它再次不包含任何`.gitattribute`文件，并且在修补 A 期间会发生冲突'

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:44:48.760

您可以激活并记住*一次*[`git rerere`](http://git-scm.com/2010/03/08/rerere.html)冲突解决方案。

 *随后的变基不会因相同的冲突而停止。

* * *

> 在此期间，删除的文件如何`B`？他们会恢复吗？我认为不是，因为如果它会，那么就不会有问题。

是的，rebase 从检出新基 ( `A'`) 开始：文件在索引中恢复。
然后它适用`B`和`C`。*

# c - Linux 控制台；CLS 未找到错误

> ID：13384116
> 
> 赞同：-1
> 
> 时间：2012-11-14T17:34:46.997
> 
> 标签：c, console, system, ubuntu-12.04

我正在尝试编译我在使用 Windows 时编写的 C 项目。我正在尝试在 Linux（Ubuntu 12.04）中使用相同的 IDE（ **Code::Blocks ）编译相同的项目。**我的程序中使用了几个`System("CLS")`函数。但是 linux 控制台说 我已经包含了和（当然还有几个）。
`sh: 1:CLS: not found
Segmentation fault (core dumped)`
`<stdlib.h>``<stdio.h>`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T17:37:20.757

问题是命令 CLS 只存在于 Windows 上。对于 Linux，您需要的命令是：`clear`.

无论如何，这只能部分解决问题：a）如果您将程序移植到 Windows 机器，您将遇到同样的问题，并且 b）没有理由产生分段错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T17:36:09.393

该`system`命令在本地系统上运行 shell 命令。 `cls`是一个有效的 DOS/Windows 命令，但它在 Linux 上不存在。Linux 上的`clear`命令提供了类似的功能。

分段错误表明您没有正确处理错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:36:34.557

CLS 是一个旧的 MS-DOS 命令，不太可能在您的 Linux 机器上找到。您不应依赖生成另一个进程来为您清除控制台文本。您可以调用`clear`或[使用 ANSI 转义码](https://stackoverflow.com/questions/4062045/clearing-terminal-in-linux-with-c-code)来为您完成工作。两者都不是便携式的，但两者都被广泛使用。

# mongodb - MongoDB 的木偶配方

> ID：13384122
> 
> 赞同：-1
> 
> 时间：2012-11-14T17:35:12.757
> 
> 标签：mongodb, puppet

我正在寻找可以在我的机器上安装和运行 Mongodb 2.2 的 puppet recipe。通过谷歌搜索，我找到了这个模块[http://forge.puppetlabs.com/puppetlabs/mongodb](http://forge.puppetlabs.com/puppetlabs/mongodb)但我不明白我该怎么做？它说我必须先在 puppet 节点上安装模块。究竟是什么意思？比方说，我有一组必须通过 puppet 配置的机器。为了达到这个目标，我必须在 puppet 食谱中添加什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-10T16:57:58.317

我遇到了麻烦，遇到了这个问题。对我有用的语法是：

```
#Class instances are declared like any other resource.
class { 'mongodb' :
    init => 'upstart',
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:53:27.773

方向其实很清楚，我想。您需要在 puppet master 的模块目录中安装 mongo 模块（如图所示）。

然后，在您的节点定义中，添加：

```
class mongodb {
  init => 'sysv',
} 
```

如果这对您没有意义，您应该真正备份并阅读 Puppet 文档。 [http://docs.puppetlabs.com/learning/](http://docs.puppetlabs.com/learning/)

# postgresql - 如何将数据库从 SAP DB 迁移到 PostGres？

> ID：13384124
> 
> 赞同：0
> 
> 时间：2012-11-14T17:35:18.150
> 
> 标签：postgresql, migration, sap

任何想法如何通过工具来做到这一点（首选）。任何替代方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:28:21.503

使用 [maxdb 工具](http://maxdb.sap.com/doc/7_6/4e/a0bc40597a8431e10000000a1550b0/content.htm)生成数据库的 SQL 文本导出。然后在 PostgreSQL 中[导入](http://www.postgresql.org/docs/9.2/static/backup.html)这个文件，幸运的是你不需要预先处理数据转储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:03:49.220

[你可以在这里](http://www.enterprisedb.com/downloads/add-on-components-bundles)查看 EnterpriseDB 的迁移工作室，虽然我没有这方面的经验。

但是，与自己做没有可比性 - 如果您不熟悉 Postgres，那么这会让您熟悉，如果您熟悉，那么除了数据输入方面，这应该是老帽子。

# javascript - JavaScript API | JS API

> ID：13384128
> 
> 赞同：0
> 
> 时间：2012-11-14T17:35:33.990
> 
> 标签：javascript

如果你想搜索以下的库 API，你去他们各自的链接：

[jQuery](http://api.jquery.com/)

[节点](http://nodejs.org/docs/latest/api/)

[我的 SQL (C)](http://dev.mysql.com/doc/refman/5.0/en/c.html)

Javascript 本身的 API**在**哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:36:34.230

规范的将是 ECMA-262 规范： http: [//www.ecma-international.org/ecma-262/5.1](http://www.ecma-international.org/ecma-262/5.1)。但请记住，不同浏览器的语言支持并不一致。为此，有多种第三方资源：

*   [怪癖模式](http://quirksmode.org/)
*   [Mozilla 开发者网络](https://developer.mozilla.org)
*   [我可以用吗...](http://caniuse.com/)

# heroku - heroku：使用插件设置本地开发

> ID：13384129
> 
> 赞同：2
> 
> 时间：2012-11-14T17:35:48.400
> 
> 标签：heroku, foreman

我想用neo4j插件开发一个heroku应用程序，我已经按照 [这里](https://devcenter.heroku.com//articles/neo4j#local-setup-get-neo4j)的说明进行操作，但是我不知道如何将类似heroku的环境变量集成到我的本地开发环境中。

我的主要目标：

1.  使事物的行为尽可能与已部署的应用程序相似。
2.  允许我在本地运行自动化测试套件。
3.  允许我在本地运行应用程序，以便快速开发迭代。

我发现的唯一一篇处理这个问题的heroku帮助中心文章（[这里](https://devcenter.heroku.com/articles/multiple-environments)）似乎建议总是部署，但这意味着我必须签入并推送我所做的每一个小编辑、语法错误等等，并且不允许在本地运行自动化测试。

似乎应该有一种方法可以让我编辑我的 Foreman Procfiles 以获得所需的行为，但我不知道如何在不影响部署流程的情况下做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:03:51.503

这篇文章似乎是我需要的，虽然我仍然不确定我应该如何找到它：[https ://devcenter.heroku.com/articles/config-vars#local-setup](https://devcenter.heroku.com/articles/config-vars#local-setup)

总之，您可以在`heroku config > .env`本地安装生产环境，然后根据需要编辑文件。Foreman 然后使用这个文件来设置环境变量。

该文章建议将`.env`文件添加到`.gitignore`，但据我所知，签入它是安全的，因为似乎 heroku 似乎已经覆盖了它。

# php - 将值传递给 PHP

> ID：13384132
> 
> 赞同：0
> 
> 时间：2012-11-14T17:36:12.493
> 
> 标签：php, ajax, jquery

我需要将一个变量`$option`传递给 php 脚本。位于`$option`名为“选项”的隐藏字段上。

基本上，用户有一些项目可以通过使用拖放等方式重​​新排列。这些项目存储在一个数组中，一旦项目重新排列，数组就会重新排序并保存。

`get_option($option);`更改为“`get_option('myoption');`我必须`$option`从隐藏字段中获取”无法解决问题。

我花了很多时间在网上搜索示例，解决方案和教程，没有希望，这对我来说太多了。

```
 array_walk($_POST['order'], 'strip_text_menu_editor');
            $order_array = $_POST['order'];
            $current_menu = get_option($option);    
            $new_order = array();
            foreach($order_array as $order) {
                foreach($current_menu as $key => $value) {
                    if($order == $key) {
                        $new_order[] = $value;
                    }
                }
            }
            update_option($option, $new_order);
            echo '<script type="text/javascript" >
            jQuery(document).ready(function($) {
            var i = 0';
            echo "jQuery('#sortable li').each(function(){
                    var name = 'listItem_' + i;
                    i++;
                });
            });
            </script>";
            die(true); 
```

jQuery

```
 jQuery(document).ready(function(jQuery) {
                jQuery('#sortable li:odd').addClass('stripe');
                jQuery('#sortable').sortable({
                    handle : '.handle', 
                    update: function(event, ui) {
                        jQuery('#sortable li').removeClass('stripe');
                        jQuery('#sortable li:odd').addClass('stripe');
                        var order = jQuery('#sortable').sortable('toArray');
                        var data = {
                            action: 'menu_editor_special_action',
                            order: order,
                        };
                        jQuery.post(ajaxurl, data, function(response){
                            jQuery('#response').html('Got this from the server: ' + response);
                        });
                    }
                });
            }); 
```

HTML

```
<ul>
<li id="listItem_0" class="">Item A</li>
<li id="listItem_1" class="stripe">Item B</li>
<li id="listItem_2" class="">Item C</li>
<li id="listItem_3" class="stripe">Item D</li>
<li id="listItem_4" class="">Item E</li>
<li id="listItem_5" class="stripe">Item F</li>
</ul> 
```

在 PHP 脚本上调用

```
function strip_text_menu_editor(&$value, $key) {
        $value = str_replace('listItem_', '', $value);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:56:31.523

从您发布的 jQuery 片段中我可以看到，您需要将“选项”值添加到帖子中的数据数组中。

```
var data = {
    action: 'menu_editor_special_action',
    order: order,
    option: $('input[name=option]').val(),  //This part is new
};
jQuery.post(ajaxurl, data, function(response){
    jQuery('#response').html('Got this from the server: ' + response);
}); 
```

当然，我不知道您在“选项”中存储了什么样的数据，也不知道您的 get_option() 等函数正在使用它做什么，以了解您需要如何为服务器端代码发送它理解，但这应该让你开始。

# bash - 从终端启动 GUI 程序而不会发送垃圾邮件的优雅而有效的方式（Bash 或任何 Posix shell）

> ID：13384139
> 
> 赞同：7
> 
> 时间：2012-11-14T17:36:36.180
> 
> 标签：bash, shell, user-interface, posix, stdout

每隔一段时间，我就必须从我的终端会话中启动一个 GUI 程序来做某事。通常是 Chrome 来显示一些 HTML 文件是一些类似的任务。然而，这些程序到处都会发出警告，写任何东西实际上会变得很荒谬，所以我一直想将`stderr`/重定向`stdout`到`/dev/null`.

虽然`($PROGRAM &) &>/dev/null`看起来不错，但我决定为它创建一个简单的 Bash 函数，这样我就不必每次都重复自己了。

所以现在我的解决方案是这样的：

```
#
# silly little function
#
gui ()
{
  if [ $# -gt 0 ] ; then
    ($@ &) &>/dev/null
  else
    echo "missing argument"
  fi
}

#
# silly little example
#
alias google-chrome='gui google-chrome' 
```

所以我想知道的是：

*   有没有办法没有无穷无尽的别名列表仍然很活泼？
*   是否有不同的策略来实现这一目标？
*   其他外壳是否提供不同的解决方案？

在提出这些问题时，我想指出您的策略和解决方案可能与我的大相径庭。将输出重定向到 /dev/null 并为其设置别名是我知道的唯一方法，但可能有完全不同的方法更有效。

因此这个问题:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:08:58.610

正如其他人在评论中指出的那样，我认为真正的问题是在命令行上区分 gui 与非 gui 应用程序的方法。因此，我能想到的最简洁的方法是把这部分的脚本：

```
 #!/bin/bash

  if [ $# -gt 0 ] ; then
    ($@ &) &>/dev/null
  else
    echo "missing argument"
  fi 
```

放入一个名为 的文件`gui`中，然后`chmod +x`将其放入您的`~/bin/`（确保`~/bin`在您的`$PATH`）中。现在您可以使用以下命令启动 gui 应用程序：

```
`gui google-chrome` 
```

在提示上。

**或者**，您可以执行上述操作，然后使用`bind`：

```
bind 'RETURN: "\e[1~gui \e[4~\n"' 
```

这将允许您执行以下操作：

```
google-chrome 
```

在提示符下，它会`gui`在之前自动附加`google-chrome`

或者，您可以将上述操作绑定到`F12`而不是`RETURN`with

```
bind '"\e[24~": "\e[1~gui \e[4~\n"' 
```

将您想要`gui`与非 gui 启动的内容分开。

更多关于绑定[here](https://superuser.com/questions/117227/a-command-before-every-bash-command)和[here](https://superuser.com/questions/167283/is-there-a-way-to-preprocess-input-to-bash)的讨论。

这些替代方案为您提供了摆脱无尽别名的方法；混合：

*   放入`gui`你的`~/bin/`, 和
*   `gui`to的绑定使用`F12`如上图

似乎是最理想的（尽管很老套）的解决方案。

* * *

**更新 - @Enno Weichert 的最终解决方案：**

四舍五入这个解决方案......

这将处理别名（虽然以某种古怪的方式）和不同的转义编码（以更实用而不是详尽的方式）。

把这个放进去`$(HOME)/bin/quiet`

```
#!/bin/bash -i

if [ $# -gt 0 ] ; then
  # Expand if $1 is an alias
  if [ $(alias -p | awk -F "[ =]" '{print $2}' | grep -x $1) > 0 ] ; then
    set -- $(alias $1 | awk -F "['']" '{print $2}') "${@:2}"
  fi
  ($@ &) &>/dev/null
else
  echo "missing argument"
fi 
```

而这在`$(HOME)/.inputrc`

```
#
# Bind prepend `quiet ` to [ALT][RETURN]
#
# The condition is of limited use actually but serves to seperate
# TTY instances from Gnome Terminal instances for me.
# There might very well be other VT emulators that ID as `xterm`
# but use totally different escape codes!
#
$if $term=xterm
  "\e\C-j": "\eOHquiet \eOF\n"
$else
  "\e\C-m": "\e[1~quiet \e[4~\n"
$endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:22:49.867

虽然它是一个丑陋的黑客，但我有时会[`nohup`](http://manpages.ubuntu.com/manpages/precise/en/man1/nohup.1.html)用于类似的需求。它具有重定向命令输出的副作用，并使程序独立于终端会话。

对于在桌面环境中运行 GUI 程序的情况，资源泄漏的风险很小，因为程序无论如何都会以窗口管理器会话结束。尽管如此，还是应该考虑到这一点。

还可以选择打开另一个终端会话。例如，在 Gnome 中，您可以使用`gnome-terminal --comand 'yourapp'`.
但这会导致打开许多无用的终端窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T01:14:57.567

首先，从终端启动 GUI 应用程序是个好主意，因为这样可以减少鼠标的使用。它在选项和参数方面更快，更方便。以浏览器为例。假设您在剪贴板中有 URL，可以粘贴了。只需键入（例如`ice`Iceweasel）并按 Shift-Insert（粘贴）和 Enter。将此与单击图标（可能在菜单中）进行比较，等待窗口加载（如果有启动页面则更糟），然后单击 URL 栏（或按 Ctrl-L），然后按 Ctrl-V.. . 所以我理解你希望这个工作。

但是，我不明白这将如何需要一个“无限”的别名和函数列表。您真的在使用那么多 GUI 应用程序吗？即便如此，别名也是一行 - 对于处理参数可能更实用的函数可能是 1-5 行（稀疏）代码。而且，不要觉得你需要一劳永逸地设置它们 - 当你需要时，一个接一个地设置它们。不久之后，你就会拥有它们。

此外，如果您有一个选项卡式终端，例如 urxvt（有一个 Perl 扩展），您将从“GUI:s”移动到“CLI:s”中受益：下载，有 rtorrent；对于 IRC，irssi；而不是 XEmacs (或`emacs`), `emacs -nw`; vlc 有一个用于流式传输音乐的 CLI 接口；对于邮件，Emacs 的 rmail；等等等等！去打猎:)

（我认为唯一可悲的例外是浏览器。Lynx、W3M 等从技术角度来看可能很棒，但这并不总是重要的，因为现代网页是根本就没有在设计时考虑到那些纯文本浏览器。老实说，很多页面在这些浏览器中看起来**不太**清晰。）

提示：要充分利用选项卡式终端，您需要“关闭”“更改选项卡”快捷键（例如，Alt-J 用于上一个选项卡，Alt-K 用于下一个选项卡，而不是箭头键你到达）。

最后，一种可以绕过这个问题的解决方案，即`&`在您的`~/.xinitrc`（包括您的终端仿真器）中将“GUI:s”作为后台进程（使用 ）启动。不是很灵活，但非常适合您每次使用计算机时总是使用的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-21T21:26:12.990

好的，所以我一直认为一个功能应该足够了。没有别名，没有 bashisms，没有废话。但在我看来，在不影响常规使用（例如扩展和完成）的情况下，唯一的方法是将函数放在命令的末尾。这并不像人们最初想象的那么容易。

首先，我考虑了一个附加到末尾的函数，我会调用它，例如，`printf "%b" "\u"`为了剪切当前行，插入另一个`printf`，将其粘贴回去，并在开头加上一两个引号，然后在结束。我不知道如何使这项工作，但我很抱歉。即使我这样做了，由于shell解释`escape`序列的方式不同，我也不希望这种方法有任何真正的可靠性/可移植性，更不用说它们运行的​​终端仿真器了。也许`stty`可以提供沿着这些思路前进的方法，但是如果是这样，你不会在这里找到它......现在，无论如何。

我最终改为将当前命令实际复制`/proc/{PID}/cmdline`到一个变量中，然后（可耻地）完全杀死它，最后按照我的喜好包装它。从好的方面来说，这很容易完成，很快就完成了（尽管我可以想象以任何一种方式争论它的“效率”），并且无论原始输入如何，无论是别名、变量还是函数等。我相信它也是 POSIX 可移植的（虽然我不记得是否需要`kill SIGNALS`为 POSIX 指定名称），而且绝对不是废话。

另一方面，它的优雅当然还有很多不足之处，虽然它可能不值得担心，但它确实完全浪费了一个`PID.`，它并不能*完全*阻止shell 垃圾邮件；也就是说，在我的 shell 中，我启用了后台`jobs`报告，`set`因此，当第一次运行时，shell 友好地通知我我刚刚打开并浪费了`PID`两行。另外，因为我复制`../cmdline`而不是直接与`0`文件描述符接口，所以我希望管道`;`等会出现问题。我可以而且很可能会很快解决这个问题。

我将解决这个问题，也就是说，如果我无法找到一种方法来代替使用，正如我怀疑可以做到的那样，`SIGTSTP`+`SIGCONT`首先在子shell 之外暂停进程，然后在重定向子shell 的输出后在一个进程中继续它。由于我尚未发现的原因，这似乎不可靠，但我认为它很有希望。也许`nohup`和一个`trap`（实际上`rehup`是）是需要的，但我也不确定如何将它们放在一起......

Amyway，不用多说，我的半中止，向后的 gui 启动器：

```
% _G() { ( 
    _gui_cmd="$(tr '\0' ' ' </proc/"$\!"/cmdline )" ; 
    kill -9 "$\!" ; 
    exec eval "${_gui_cmd} &" ) 
    &>/dev/null 2&>1 
}
% google-chrome-beta --disk-cache-dir="/tmp/cache" --disk-cache-size=100000000 &_G                                                   
[1] 2674
[1]  + 2674 killed     google-chrome-beta --disk-cache-dir="/tmp/cache" --disk-cache-   
% 
```

因此，如果尝试进行类似操作，可能会遇到的另一个问题是 shell 假定的扩展顺序。如果没有像我这样的技巧，在前面的命令将它作为参数之前，你肯定会遇到一些严重的困难来扩展你的函数。我相信我已经通过简单地将我的`_G`函数调用附加到原始命令的`&`背景指令上来防止这种情况发生而没有不必要的冗余。只需添加`&_G`到您希望运行的命令的末尾，祝您好运。

-麦克风

PS 好的，所以写最后一句话让我想到可以用`tee`.

# c# - 将多参数传递给 xaml 中的 CommandParameter

> ID：13384143
> 
> 赞同：4
> 
> 时间：2012-11-14T17:36:55.520
> 
> 标签：c#, wpf

我想通过 xaml 中的命令参数将薮参数传递给命令。

```
<i:InvokeCommandAction Command="{Binding HideLineCommand, ElementName=militaryLineAction}"
                       CommandParameter="{Binding ID, ElementName=linesSelector}"/> 
```

在上面的示例中，我想将其他变量传递给 ID 变量旁边的命令。我怎样才能实现它？十分感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T18:41:08.770

您可以将**MultiBinding**与**转换器**一起使用。

检查这个例子。

假设您有 Person 类。

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

并且您希望此类作为您的命令参数。

您的 XAML 应如下所示：

```
<Button Content="Start"
                DataContext="{Binding SourceData}"
                >
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <i:InvokeCommandAction Command="{Binding SendStatus, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}">
                        <i:InvokeCommandAction.CommandParameter>
                            <MultiBinding Converter="{StaticResource myPersonConverter}">
                                <MultiBinding.Bindings>
                                    <Binding Path="Name" />
                                    <Binding Path="Age" />
                                </MultiBinding.Bindings>
                            </MultiBinding>
                        </i:InvokeCommandAction.CommandParameter>
                    </i:InvokeCommandAction>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Button> 
```

`SourceData`Person 对象在哪里。

并且`myPersonConverter`是一个 PersonConverter 对象。

```
public class PersonConverter : IMultiValueConverter
    {   
        public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (values != null && values.Length == 2)
            {
                string name = values[0].ToString();
                int age = (int)values[1];

                return new Person { Name = name, Age = age }; 
            }
            return null;
        }

        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

在您的命令中，您可以使用 Person 对象作为参数：

```
 public ICommand SendStatus { get; private set; }
    private void OnSendStatus(object param)
    {
        Person p = param as Person;
        if (p != null)
        {

        }
    } 
```

# winforms - Winforms 防止 DataGridView 失去焦点

> ID：13384144
> 
> 赞同：0
> 
> 时间：2012-11-14T17:36:55.243
> 
> 标签：winforms, datagridview, focus

我正在使用 vb.net 在 winforms 中编写代码，并且我试图在存在某些用户业务规则错误条件时防止 datagridview 失去焦点。当错误存在时，我在离开事件中有代码，它将焦点重新设置回自身。但是，这似乎并不完全有效，因为仍然可以单击表单上的按钮。有谁知道如何将注意力集中在 datagridview 上，并且在用户输入 datagridview 时不允许在不禁用按钮的情况下单击按钮？我正在编写一个自定义 datagridview 控件，并且想要一个通用例程来保持对 datagridview 控件的关注，并且不允许单击表单上的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:35:08.430

在焦点从一个控件转移到另一个控件的过程中，会发生一系列事件。[在这个 msdn 链接中](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)有一个描述。

我建议找到一种方法使您的业务规则适合该模式，因为这是控件验证挂钩的目的。特别是如果您正在创建自己的控件，您也可以使用这些事件封装一些验证逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T16:05:00.930

要防止表单更改对验证错误的关注，请将表单的 AutoValidate 属性设置为 EnablePreventFocusChange。[http://msdn.microsoft.com/en-us/library/system.windows.forms.autovalidate(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.autovalidate%28v=vs.100%29.aspx)。

要防止按钮在存在验证错误时提交，请将按钮的 CausesValidation 属性设置为 true。[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.causesvalidation(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.causesvalidation%28v=vs.110%29.aspx)

# php - 在禁用 javascript 的情况下模拟点击功能

> ID：13384146
> 
> 赞同：0
> 
> 时间：2012-11-14T17:37:00.740
> 
> 标签：php, javascript, html

我的页面中有以下输入单选按钮（除其他外），它在选中该单选按钮时显示一个选择输入框。

这是使用 javascript 实现的。现在，如果禁用了 javascript，客户端还希望在单击单选按钮时显示此选择框。

没有javascript，这甚至可能吗？我看到的唯一另一种方式是有一个中间表单提交按钮来处理？我不知道该怎么做。任何帮助，将不胜感激！

到目前为止，这是我的代码：

```
<td style="visibility:<?= $Visible;?>" id="rmark1"><span>Mark question?</span></td>
<td style="visibility:<?= $Visible;?>" id="rmark2" nowrap>
<input type="radio" id="mail1" name="mail" value="GE" onClick="showMark();" <?= $check;?> >
            <select id="ReturnMarkings" name="ReturnMarkings">
                <option value=''>Please Choose One:</option>
                <option value='1' <?= $Array[1];?>>Mark 1</option>
                <option value='2' <?= $Array[2];?>>Mark 2</option>

            </select>

function showMark() {
    var pcRMark1=document.getElementById('rmark1');
    var pcRMark2=document.getElementById('rmark2');

    pcRMark1.style.visibility="visible";
    pcRMark2.style.visibility="visible";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:52:13.067

根据浏览器的 CSS 支持，这可能有效：

```
#ReturnMarkings{ display: none; }
#mail1:checked+#ReturnMarkings { display:inline; }​ 
```

请参阅[jsfiddle 演示](http://jsfiddle.net/wMYXL/)。

它依赖于 CSS 相邻兄弟选择器，根据[caniuse.com](http://caniuse.com/#search=adjacent%20sibling) ，IE8+ 支持该选择器。我还依赖于[`:checked`](https://developer.mozilla.org/en-US/docs/CSS/%3achecked)伪类，根据 MDN，它是 IE9+。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T17:54:52.353

要达到类似的效果，您需要结合使用 PHP 和 CSS。必须应用以下更改。（抓紧，这不会很漂亮）

单选按钮需要更改为链接，假设您的页面名为 form.php，链接必须变成这样：

```
<a href='form.php?showmark=true'>Show Mark</a> 
```

在您的选择框下方添加以下逻辑，PHP 将通过该逻辑注入 CSS，这将使您的下拉列表可见：

```
<select id="ReturnMarkings" name="ReturnMarkings">
     <option value=''>Please Choose One:</option>
     <option value='1' <?= $Array[1];?>>Mark 1</option>
     <option value='2' <?= $Array[2];?>>Mark 2</option>
</select>

<?
   if(isset($_GET["showmark"])) {
?>

        <style type='text/css'>
        #ReturnMarkings {
            visibility:visible!important;
        }​
        </style>
<?
   }
?> 
```

我不特别建议混合 PHP / Markup / CSS，但这可能是你唯一的解决方案

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T18:40:40.020

@bfavaretto 和 @lostsource 的答案很棒——但这不需要 PHP 并且可以在 Chrome 中使用：

```
<style type="text/css">
    #ReturnMarkings {
        display: none;
    }
    :target {
        display: inline !important;
    }
</style>

<input type="radio" id="mail1" name="mail" value="GE"><a style='width:12px; height:12px; display:inline-block; margin-left:-12px;' href='#ReturnMarkings'></a>  

<select id="ReturnMarkings" name="ReturnMarkings">
                <option value=''>Please Choose One:</option>
                <option value='1'>Mark 1</option>
                <option value='2'>Mark 2</option>
            </select> 
```

单选按钮链接代码的 @lostsource 道具

演示[@http://jsfiddle.net/MT5db/](http://jsfiddle.net/MT5db/)

**编辑**：

正如评论中所指出的，这实际上并没有“检查”单选按钮。这是一个修复的廉价黑客，未经 jsfiddle 外部测试：

[http://jsfiddle.net/MT5db/1/](http://jsfiddle.net/MT5db/1/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-14T17:38:20.743

不，没有 JavaScript 是不可能的。

# jquery - 无论如何退出全屏，都切换全屏按钮？

> ID：13384148
> 
> 赞同：0
> 
> 时间：2012-11-14T17:37:02.297
> 
> 标签：jquery, fullscreen

我正在使用[这个](https://github.com/kayahr/jquery-fullscreen-plugin/)jQuery 全屏插件，我想拥有它，以便“全屏”/“退出全屏”按钮将正确切换该按钮是否用于退出全屏或用户点击 Esc 或使用浏览器的退出全屏按钮。

目前，如果仅使用该按钮，则该按钮将正确切换。这可以在[这里](http://new.element17.com)看到（按钮在右上角）。但是，如果进入全屏模式，然后使用按钮以外的任何方法退出，则当前不会切换回进入全屏按钮。

这是我到目前为止用于设置按钮和切换它们的 jQuery：

```
$('#expand').toggle(
    $(document).fullScreen() != null
);

$('#expand').click(function() {
    $(document).toggleFullScreen();
    $(this).toggle();
    $('#contract').toggle();
});

$('#contract').click(function() {
    $(document).toggleFullScreen();
    $(this).toggle();
    $('#expand').toggle();
}); 
```

这是他们的标记：

```
<img src="images/expand.png" id="expand" class="screen_control fadein button" alt="Fullscreen">
<img src="images/contract.png" id="contract" class="screen_control fadein button" alt="Exit Fullscreen"> 
```

如何检测全屏状态，以便无论用户如何退出全屏模式都会显示正确的按钮？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:10:30.547

我已经更详细地查看了您的网站，您应该使用以下代码：

```
$(document).on("fullscreenchange", function() {
   $('#expand,#contract').toggle();
} 
```

您可以使用变量进行更高级的用法：

```
var isFullscreen;
$(document).on("fullscreenchange", function() {
   isFullscreen = !!$(document).fullScreen();
} 
```

# android - 如何设置android Horizo ntalScrollView从右到左的行为（默认从右侧选择选项卡，而不是左侧）

> ID：13384149
> 
> 赞同：4
> 
> 时间：2012-11-14T17:37:02.927
> 
> 标签：android, android-ui, android-tabs

如何设置 Horizo​​ntalScrollView 以从右到左的方式运行？默认行为是显示的第一个选项卡（默认选项卡）从左侧开始。我希望选项卡反向排序，以便第一个“默认”选项卡位于屏幕右侧。

我怎么做？我使用了 layout_gravity 但它没有用..

这是我的布局代码，包含 tabhost 和 Horizo​​ntalScrollView ：

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <HorizontalScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:fillViewport="true"
        android:scrollbars="none">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </HorizontalScrollView>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</LinearLayout>

</TabHost> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-18T13:38:50.450

一种有效的解决方法：

```
final HorizontalScrollView view = (HorizontalScrollView) findViewById(R.id.scroller);
        view.postDelayed(new Runnable() {

            @Override
            public void run() {
                view.fullScroll(HorizontalScrollView.FOCUS_RIGHT);
            }
        }, 10); 
```

这个想法是程序化滚动需要延迟才能工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-13T05:44:15.080

我敢肯定这为时已晚，但对于其他有类似问题的人来说：

```
horizontalScrollView.post {
        horizontalScrollView.fullScroll(View.FOCUS_RIGHT)
    } 
```

你不应该使用延迟版本的帖子。因为 post 将被添加到消息队列的末尾。

# c# - 安装 .NET 4.5 后在 WCF 中将字典作为 DataMember

> ID：13384151
> 
> 赞同：1
> 
> 时间：2012-11-14T16:37:34.813
> 
> 标签：c#, .net, wcf, visual-studio-2012

使用 Visual Studio 2012 安装 .NET Framework 4.5 后，每当我想从 WCF 服务获取引用时，我的字典都会更改为数组。例如，`Dictionary<int, double>`更改为`ArrayOfKeyValueOfintdoubleKeyValueOfintdouble`.

这发生在 Visual Studio 2012 和 2010（都是 Express）中。

我查看了我的配置，服务参考配置中的字典数据类型是`System.Collection.Generic.Dictionary`. 改变这一点并没有什么不同。

恢复为仅使用 Visual Studio 2010 和 .NET 4.0 不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:33:13.990

尽管这是作为迁移请求的，但我已经在这里并且可以输入答案。你需要告诉你的服务引用你想使用什么类型的数据结构。默认情况下，Visual Studio 对服务使用数组。

右键单击您的服务参考并选择`Configure Service Reference...`

在`Data Type`您将看到集合类型的部分下，选择适当的类型。

# objective-c - Finder NSService 上下文菜单错误：找不到选择器的服务提供者

> ID：13384152
> 
> 赞同：0
> 
> 时间：2012-11-14T17:37:13.730
> 
> 标签：objective-c, xcode, macos, contextmenu, finder

**更新1：越来越近**

IRC 上有人提到我的 NSPortName 应该是我的应用程序，而不是 Finder。我改变了这个，现在我在选择上下文菜单时在我的应用程序中看到一条日志消息：

```
Cannot find service provider for selector shareFile:userData:error: or shareFile:: for service shareFile 
```

考虑到我确实注册了这样一个对象，这似乎很奇怪。

* * *

我正在尝试为 Finder 设置一个 NSService 上下文菜单，以在某些文件上触发我的应用程序。

这些文件的扩展名是 *.acxx，操作只是分享。*注意：我已将捆绑包的所有引用更改为针对此发布的通用引用：com.mycompany.myproject。*

我的 infoPlist 的 NSServices 部分如下所示：（注意我也为 *.acxx 设置了文档类型/UTI）

```
<key>NSServices</key>
    <array>
        <dict>
            <key>NSRequiredContext</key>
            <dict>
                <key>NSTextContent</key>
                <array>
                    <string>URL</string>
                    <string>FilePath</string>
                </array>
            </dict>
            <key>NSSendFileTypes</key>
            <array>
                <string>com.mycompany.myproject.acxx</string>
            </array>
            <key>NSPortName</key>
            <string>Finder</string>
            <key>NSMessage</key>
            <string>shareFile</string>
            <key>NSMenuItem</key>
            <dict>
                <key>default</key>
                <string>Share with myproject</string>
            </dict>
        </dict>
    </array> 
```

我的代码中有一个对象设置，定义了以下方法：

```
- (void)shareFile:(NSPasteboard*)pboard userData:(NSString*) error:(NSString**)err 
```

我在我的代码中的其他地方注册了这个：

```
// Register services
if (self.shareSvcMgr == nil)
{
    self.shareSvcMgr = [[ACAShareServiceManager alloc] init];
}
[NSApp setServicesProvider:self.shareSvcMgr];
NSUpdateDynamicServices(); 
```

现在，当我运行应用程序并确保它已使用 pbs 注册时，它看起来很好：

```
/System/Library/CoreServices/pbs -debug en|grep -i myproj
        NSBundleIdentifier = "com.mycompany.myproject";
        NSBundlePath = "/Users/me/Library/Developer/Xcode/DerivedData/myproject-gihhiqhnzhwqbchflymzyafwxvws/Build/Products/Debug/myproject.app";
            default = "Share with myproject";
            "com.mycompany.myproject.acxx" 
```

因此，当我转到 Finder 并单击 *.acxx 文件时，果然在 Finder -> Services 中，我的菜单项 Share with myproject 出现了。

**问题：**

一切都很好，花花公子对吗？好吧，没有。当我单击“与我的项目共享”时，没有任何反应。我在 shareFile 方法中设置了断点，程序正在运行，但什么也没发生，它永远不会被命中，等等。

我读过我可以使用 -NSDebugServices 调试 Finder，但我似乎无法让它正常工作。我已经执行了：

```
/System/Library/CoreServices/Finder.app/Contents/MacOS/Finder -NSDebugServices com.mycompany.myproject 
```

这似乎启动了一个过程，但我没有尝试与之交互的 Finder 窗口。

我不确定下一步该去哪里。当然，这个想法是在发送 Share 时将文件名或文件内容传递给我的应用程序，然后我可以从那里做需要的事情。

SendFileTypes 是否设置不正确或此模型的其他内容？任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T14:09:50.217

我遇到了同样的问题，并且能够通过删除派生数据来解决这个问题。

我认为发生的事情是我试图通过创建一个虚拟应用程序来测试某些东西，并且我为服务使用了相同的消息名称。通过从虚拟应用程序中删除派生数据，一切都开始工作了。

您应该能够在此路径的某个目录中找到派生数据：

```
~/Library/Developer/Xcode/DerivedData/ 
```

删除旧的东西，它可能会为你解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:32:08.717

好吧。IRC 上有人指出我的方法定义缺少一些东西：

```
- (void)shareFile:(NSPasteboard*)pboard userData:(NSString*) error:(NSString**)err 
```

它缺少一个变量定义（这会完全弄乱选择器匹配）。所以应该是这样的：

```
- (void)shareFile:(NSPasteboard*)pboard userData:(NSString*)***udata*** error:(NSString**)err 
```

一旦我改变了它，选择器终于开始被调用=）

# java - 在没有第三方库的情况下读取 CSV 文件

> ID：13384156
> 
> 赞同：0
> 
> 时间：2012-11-14T17:37:38.533
> 
> 标签：java, csv, arraylist, stringtokenizer

我正在尝试将 csv 文件读入 ArrayList 或 String [][] 数组。在此，我试图将其读入列表，然后使用标记器将列表形成为数组。csv 文件有 7 列 (A - G) 和 961 行 (1-961)。我的二维数组的 for 循环不断返回一个空指针，但我认为它应该可以工作..

```
public class FoodFacts
{
    private static BufferedReader textIn;
    private static BufferedReader foodFacts;
            static int numberOfLines = 0; 
            static String [][] foodArray;
    public static String  aFact;
    static  int NUM_COL = 7;
    static int NUM_ROW = 961;
    // Make a random number to pull a line
    static Random r = new Random();

    public static void main(String[] args)
    {
        try 
        {
            textIn = new BufferedReader(new InputStreamReader(System.in));
            foodFacts= new BufferedReader(new FileReader("foodfacts.csv"));
            Scanner factFile = new Scanner(foodFacts);
            List<String> facts = new ArrayList<String>();

            String fact;
            System.out.println("Please type in the food you wish to know about.");
            String request = textIn.readLine();
            while ( factFile.hasNextLine()){
                fact = factFile.nextLine();
                StringTokenizer st2 = new StringTokenizer(fact, ",");
                //facts.add(fact);
                numberOfLines++;
                while (st2.hasMoreElements()){
                    for ( int j = 0; j < NUM_COL ; j++) {
                        for (int i = 0; i < NUM_ROW ; i++){
                            foodArray [j][i]= st2.nextToken();  //NULL POINTER HERE
                            System.out.println(foodArray[j][i]);
                        }
                    }
                }
            }
        }
        catch (IOException e)
        {
            System.out.println ("Error, problem reading text file!");
            e.printStackTrace();
        }
     }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:44:10.867

`foodArray`像`foodArray = new String[NUM_ROW][NUM_COL];`使用它之前一样初始化你的。

**此外，当您一次读取一行时，**不需要内部`for`循环。

 **用作`numberOfLines`行：

```
 while ( factFile.hasNextLine() && numberOfLines < NUM_ROW){
                 fact = input.nextLine();
                 StringTokenizer st2 = new StringTokenizer(fact, ",")    ;
                 //facts.add(fact);
                while (st2.hasMoreElements()){
                  for ( int j = 0; j < NUM_COL ; j++) {
                    foodArray [numberOfLines][j]= st2.nextToken(); 
                    System.out.println(foodArray[numberOfLines][i]);
                 }
                }  
                 numberOfLines++;
            } 
```

或者，我认为您可以使用`split`一次来获取所有列，例如

```
 while ( factFile.hasNextLine() && numberOfLines < NUM_ROW){
           fact = input.nextLine();
           foodArray [numberOfLines++] = fact.split(",");
        } 
```

**一个问题：**将所有变量声明为静态类变量是否有任何特定目的？它们中的大多数都适合作为方法内的局部变量，例如`numberOfLines`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:57:14.107

您可以使用此`String [][] foodArray = csvreadString(filename);`方法。它实际上读取了两次文件，但我不知道如何在不读取数据的情况下获取 csv 维度（您需要维度才能初始化数组），与我尝试的其他方法相比，这非常快。

```
 static public class PairInt {

        int rows = 0;
        int columns = 0;
    }
   static PairInt getCsvSize(String filename) throws Throwable {
        PairInt csvSize = new PairInt();
        BufferedReader reader = new BufferedReader(new FileReader(new File(filename)));
        String line;
        while ((line = reader.readLine()) != null) {
            if (csvSize.columns == 0) {
                csvSize.columns = line.split(",").length;
            }
            csvSize.rows++;
        }
        reader.close();
        return csvSize;
    }
    static String[][] csvreadString(String filename) throws Throwable {
        PairInt csvSize = getCsvSize(filename);
        String[][] data = new String[csvSize.rows][csvSize.columns];
        BufferedReader reader = new BufferedReader(new FileReader(new File(filename)));
        for (int i = 0; i < csvSize.rows; i++) {
            data[i] = reader.readLine().split(",");
        }
        return data;
    } 
```**

# html - Adblock Plus 阻止我网站的非广告内容

> ID：13384158
> 
> 赞同：0
> 
> 时间：2012-11-14T17:37:41.667
> 
> 标签：html, css, adblock

Adblock firefox 插件会屏蔽我主页的主要内容 - [http://ad4you.eu](http://ad4you.eu)

我应该怎么做才能防止这种情况发生？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:48:36.960

首先将“ad1”、“ad2”等“id”和“class”名称更改为其他

您能指定 Adblock 影响哪些内容吗？

# vba - 防止 Word 2003 中的小数截断

> ID：13384160
> 
> 赞同：1
> 
> 时间：2012-11-14T14:54:00.893
> 
> 标签：vba, ms-word

我有一个通过外部 Web 服务自动填充的文档模板。传入的数据以货币形式存在（例如 3.10），但是当它被传递到 Word 文档模板时，变量会被截断以删除任何尾随的 0。我需要数字始终以 2 位小数出现，即使它们都是 0。

这是 2003 版的 Word，我没有测试过其他版本，因为我们所有的文档模板都需要使用该版本的 Word 生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:37:01.093

您应该能够在宏中使用 Format 函数来执行此操作：

```
 Format(yourValue, "Currency") 
```

为了让用户输入的文本框只能接受货币格式的值，我使用了这样的宏：

```
Private Function getValue(text As String) As Currency
    If text = "" Then
        getValue = 0
    Else
        getValue = CCur(Val(RemoveNonNumeric(text)))
    End If
End Function

Private Function RemoveNonNumeric(inputStr As String) As String
    Const NUMERIC_CHARS = "0123456789."

    Dim result As String
    Dim currCharIndex As Long
    Dim currentString As String
    Dim deciCount As Integer
    Dim afterDeciCount As Integer

    deciCount = 0
    afterDeciCount = 0

    For currCharIndex = 1 To Len(inputStr)
        currentString = Mid$(inputStr, currCharIndex, 1)

        If currentString = "." Then deciCount = deciCount + 1

        If InStr(1, NUMERIC_CHARS, currentString) > 0 And deciCount < 2 And afterDeciCount < 3 Then
            result = result + currentString
            If deciCount > 0 Then afterDeciCount = afterDeciCount + 1
        End If
    Next

    result = result

    RemoveNonNumeric = result
End Function 
```

# c# - 为什么我得到“序列不包含元素”？

> ID：13384162
> 
> 赞同：5
> 
> 时间：2012-11-14T17:37:49.010
> 
> 标签：c#, linq

**注意：请参阅底部的编辑。我是一个白痴。**

我*有*以下代码来处理一组标签名称并识别/处理新的：

```
IEnumberable<string> tagNames = GetTagNames();
List<Tag> allTags = GetAllTags();

var newTagNames = tagNames.Where(n => !allTags.Any(t => t.Name == n));

foreach (var tagName in newTagNames)
{
    // ...
} 
```

...这很好，除了它无法处理有一个名为“Foo”的标签并且列表包含“foo”的情况。换句话说，它没有进行不区分大小写的比较。

我将测试更改为使用不区分大小写的比较，如下所示：

```
var newTagNames = tagNames.Where(n => !allTags.Any(t => t.Name.Equals(n, StringComparison.InvariantCultureIgnoreCase))); 
```

...当foreach 运行（并调用MoveNext）newTagNames 时突然抛出异常。异常说：

> 序列没有元素

我对此感到困惑。为什么要`foreach`坚持序列非空？如果我正在调用`First()`，我希望看到该错误，但在使用时不会`foreach`？

* * *

**编辑**：更多信息。

这正在变得越来越奇怪。因为我的代码在异步方法中，而且我很迷信，所以我认为在引发异常的点与捕获和报告异常的点之间存在太多的“距离”。因此，我在有问题的代码周围放置了一个 try/catch，希望验证抛出的异常是否真的是我认为的那样。

所以现在我可以在调试器中单步执行 foreach 行，我可以验证序列是否为空，并且我可以单步执行调试器突出显示单词“in”的位置。再迈一步，我就在我的异常处理程序中。

**但是**，不是我刚刚添加的异常处理程序，不！它位于我最外层的异常处理程序中，而无需访问我最近添加的异常处理程序！它不匹配`catch (Exception ex)`，也不匹配普通的`catch`. （我也确实放入了一个`finally`, 并验证它确实会在出路时访问它）。

我一直相信这样的异常处理程序会捕获*任何*异常。我现在很害怕。我需要一个成年人。

* * *

**编辑 2**：

好的，所以嗯，误报......我的本地 try/catch 没有捕获到异常，只是因为它没有被我认为的代码引发。正如我上面所说，我看到调试器中的执行从直接的“in”跳转`foreach`到外部异常处理程序，因此我的（错误）假设是错误所在。但是，对于空枚举，这只是函数内执行的最后一条语句，并且由于某种原因，调试器没有向我显示函数的步骤或在调用点执行下一条语句 - 这是在事实上导致错误的那个。

向所有回复的人道歉，如果您想创建一个说我是白痴的答案，我很乐意接受。也就是说，如果我再次在 SO 上露脸……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:57:43.710

它不是那么正确或干净，但它是如何工作的：

```
var newTagNames = tagNames.Where(n => !allTags.Any(t => t.Name.ToUpper() == n.ToUpper())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:59:36.170

延迟操作的异常处理很有趣。在枚举查询之前，不会执行 Enumerable.Where 方法（和大多数 linq 方法）。

```
IEnumerable<int> query = Enumerable.Empty<int>();
int myNum = 0;
try
{
  query = Enumerable.Range(1, 100).Where(i => (i/myNum) > 1);
}
catch
{
  Console.WriteLine("I caught divide by zero"); //does not run
}

foreach(int i in query) //divide by zero exception thrown
{
  //..
} 
```

* * *

在您的特定情况下：

```
IEnumberable<string> tagNames = GetTagNames(); 
```

我敢打赌`GetTagNames`，里面有一个 Enumerable.First 或 Enumerable.Single。如果 GetTagNames 的结果被延迟，您必须枚举该结果以使异常发生。这就是为什么评论者建议您在 GetTagNames 的结果上调用 ToList - 枚举它并在复杂查询中使用 tagNames 之前发生异常。

# c# - 如何在列表中查找字符串的公共部分 在 C# 中

> ID：13384163
> 
> 赞同：1
> 
> 时间：2012-11-14T17:37:49.557
> 
> 标签：c#, linq

我正在寻找一种巧妙的方法来在字符串列表中找到字符串的最大公共部分。我想要一种从看起来像的列表中走出来的方法

```
{"1 Some Street, Some Town, XYZ" ,
"2 Some Street, Some Town, ABC" ,
"3 Some Street, Some Town, XYZ" ,
"4 Some Street, Some Town, ABC" } 
```

返回单个字符串`"Some Street, Some Town, "`。我不知道字符串的公共部分是在输入列表中字符串的开头、结尾还是中间，我认为应该有一种巧妙的方法来做到这一点，但我想不出其中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:23:12.790

改编自 gloomy.penguin 的评论，使用[http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Longest_common_substring](http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Longest_common_substring)。

```
static void Main(string[] args)
{
    var values = new List<string>
    {"1 Some Street, Some Town, XYZ" ,
    "2 Some Street, Some Town, ABC" ,
    "3 Some Street, Some Town, XYZ" ,
    "4 Some Street, Some Town, ABC" };

    Console.WriteLine(LongestCommonSubstring(values));

    Console.ReadLine();
}

public static string LongestCommonSubstring(IList<string> values)
{
    string result = string.Empty;

    for (int i = 0; i < values.Count - 1; i++)
    {
        for (int j = i + 1; j < values.Count; j++)
        {
            string tmp;
            if (LongestCommonSubstring(values[i], values[j], out tmp) > result.Length)
            {
                result = tmp;
            }
        }
    }

    return result;
}

// Source: http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Longest_common_substring
public static int LongestCommonSubstring(string str1, string str2, out string sequence)
{
    sequence = string.Empty;
    if (String.IsNullOrEmpty(str1) || String.IsNullOrEmpty(str2))
        return 0;

    int[,] num = new int[str1.Length, str2.Length];
    int maxlen = 0;
    int lastSubsBegin = 0;
    StringBuilder sequenceBuilder = new StringBuilder();

    for (int i = 0; i < str1.Length; i++)
    {
        for (int j = 0; j < str2.Length; j++)
        {
            if (str1[i] != str2[j])
                num[i, j] = 0;
            else
            {
                if ((i == 0) || (j == 0))
                    num[i, j] = 1;
                else
                    num[i, j] = 1 + num[i - 1, j - 1];

                if (num[i, j] > maxlen)
                {
                    maxlen = num[i, j];
                    int thisSubsBegin = i - num[i, j] + 1;
                    if (lastSubsBegin == thisSubsBegin)
                    {//if the current LCS is the same as the last time this block ran
                        sequenceBuilder.Append(str1[i]);
                    }
                    else //this block resets the string builder if a different LCS is found
                    {
                        lastSubsBegin = thisSubsBegin;
                        sequenceBuilder.Length = 0; //clear it
                        sequenceBuilder.Append(str1.Substring(lastSubsBegin, (i + 1) - lastSubsBegin));
                    }
                }
            }
        }
    }
    sequence = sequenceBuilder.ToString();
    return maxlen;
} 
```

注意：这假设在出现平局时先到先得。

# jquery - JQuery 调用未命中 $.post 上的服务器

> ID：13384171
> 
> 赞同：0
> 
> 时间：2012-11-14T17:38:16.927
> 
> 标签：jquery, python, django, post

我正在尝试使用 Django 向服务器发出简单的 POST 请求。我可以使用另一个 api 客户端进行 post 调用只是为了对其进行测试，但是在使用 jquery 时它永远不会返回任何内容或显示来自回调函数的警报。下面是我的 jquery 和 django 代码。我已经替换了 api 调用，但我知道它是正确的。

```
$(document).ready(function(){
  $("#signInSubmit").click(function(){
    alert("Posting email: "+$("#email").val()+" guests: "+$("#guests").val());
    $.post("apicall",
    {
      'email':$("#email").val(),
      'guests':$("#guests").val(),
      'event':"1"
    },
    function(data,status) {
               alert("Data: " + data + "\nStatus: " + status);
    });
  });
}); 
```

这是被击中的 django 视图：

```
@csrf_exempt
def participant_info(request):
    if request.method == 'GET':
        participant_email = request.GET.get('email')
        participant = Participant.objects.get(email = participant_email)

        #serialized_obj = serializers.serialize('json', [ participant, ])

        response = HttpResponse()
        response.content = serialized_obj = serializers.serialize('json', [ participant, ])
        response['Content-Type'] = 'application/json'
        return response

        #return HttpResponse(response, mimetype="application/json")

    if request.method == 'POST':
        participant_email = request.POST.get('email', '')
        numguests = request.POST.get('guests', '')
        eventid = request.POST.get('event', '')

        participantkey = Participant.objects.get(email = participant_email)
        eventkey = Event.objects.get(id=eventid)
        per = Participant_Event_Record(guests = numguests, event = eventkey, participant = participantkey)
        per.save()

        response = HttpResponse()
        response.content = serialized_obj = serializers.serialize('json', [ per, ])
        response['Content-Type'] = 'application/json'
        return response 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:58:17.403

我认为可能发生了几件事：

1.  在 jQuery 调用中指定内容类型，确保它显示“应用程序/json”（http://api.jquery.com/jQuery.ajax/），因为您正在序列化假设它是 JSON，但它默认为“应用程序/x” -www-form-urlencoded'。

2.  您的 POST url 在其 URL 的末尾需要一个 /，并且您正在发布到没有 / 的端点，这使得 Django 发出重定向到 / URL。您可以通过设置 APPEND_SLASH 设置来禁用它（https://docs.djangoproject.com/en/1.4/ref/settings/#append-slash），但实际上最好始终在末尾使用“/”调用所有端点，所以我会说不要使用 $.post("apicall", ...) 发布，而是尝试 $.post("apicall/", ...) 看看是否有帮助。

否则，您可以发布尝试时遇到的错误吗？来自 Django 控制台和 Chrome 中的 Javascript 控制台？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:07:15.703

原来它被包裹在我没有注意到的 HTML 正文中的一个表单中。删除表单包装后，它工作得很好。

# xcode - Xcode：标签式工作流程

> ID：13384180
> 
> 赞同：0
> 
> 时间：2012-11-14T17:38:35.583
> 
> 标签：xcode, tabs, behavior

在 Xcode 中，我使用基于任务的选项卡式工作流程（用于编辑、UI/建模、构建、调试等的单独选项卡）。我使用行为来完成此操作（请参阅所附屏幕截图中的自定义部分）。当我创建一个新项目时，我使用按 ⌘+1、⌘+2 等来快速设置我的所有任务选项卡。

我的问题是，当我为新创建的项目执行此操作时，所有选项卡都会显示我最近打开的项目中的源代码、故事板等。您认为这是有用的还是期望的行为的频率？我意识到选项卡的一大优点是它们可以记住自己的状态，这很有帮助。但就最初显示的源文件而言，这是一个真正的痛苦。我不想看到来自其他（通常不相关的）项目的文件。

现在我刚刚做的实验是打开项目 A 并设置我的所有选项卡并确保每个选项卡都包含来自项目 A 的源文件。然后我退出 Xcode 并将项目 A 移动到文件系统上的新位置。当我打开项目 B 并创建所有选项卡时，它们根据需要是空的。

我意识到我将在这里收到规范的“归档雷达”，但如果有解决方法（不移动文件）或我可以设置的偏好，我想我至少会问。

提前致谢， CS

![在此处输入图像描述](../Images/dc0b7a72b3810359b5940d15546ec57f.png)

# c++ - C 和 C++ 中的宏重新定义

> ID：13384182
> 
> 赞同：5
> 
> 时间：2012-11-14T17:38:42.117
> 
> 标签：c++, c

我知道这段代码在 C 和 C++ 中都有效：

```
#define FOO 0
#define FOO 0 
```

**ISO/IEC 14882:2011**

> 16.3 宏替换[cpp.replace]
> 
> 2 当前定义为类对象宏的标识符可以由另一个#define 预处理指令重新定义，前提是第二个定义是类对象宏定义并且两个替换列表相同，否则程序格式错误。同样，当前定义为类函数宏的标识符可以由另一个#define 预处理指令重新定义，前提是第二个定义是具有相同数量和参数拼写的类函数宏定义，并且两个替换列表相同, 否则程序是非良构的。

但是这段代码呢？

```
#define FOO 0
#define FOO FOO 
```

替换列表在预处理开始时并不相同（仅在第一次替换发生时）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:42:22.177

这在 C 或 C++ 中都是不允许的。替换列表必须相同。您所说的（在第一遍之后）是处理替换列表¹的结果，而不是替换列表本身。由于替换列表本身并不相同，因此不允许使用该代码。

* * *

¹或者至少如果预处理器以一种与实际不同的特定方式工作，结果会是什么。

# css - 如果容器内容很小（响应式），则显示背景图像

> ID：13384189
> 
> 赞同：1
> 
> 时间：2012-11-14T17:39:06.037
> 
> 标签：css, background-image, responsive-design

我正在开发一个使用画笔笔触作为按钮背景的响应式网站（使用 Foundation 3）。我很难 1) 让图像与响应式设计的其余部分一起缩放 2) 无论容器 div 有多大，都可以显示全尺寸背景图像。

几个屏幕截图：

当浏览器全宽时 - [http://www.screencast.com/t/3Lu86fhnsZkk](http://www.screencast.com/t/3Lu86fhnsZkk)（我是新用户无法发布图片）

当浏览器在宽度上缩放时- [http://www.screencast.com/t/3Lu86fhnsZkk](http://www.screencast.com/t/3Lu86fhnsZkk)

CSS：

```
h4.reserve{
background: url(../images/reserve_spot_bkg.png) no-repeat;
width: 290px;
height: 63px;
padding-top: 20px;
margin: 0 0 0 -10px;} 
```

让背景图像 1）即使内容很小也能显示全尺寸和 2）保持响应的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:44:22.787

为了使背景适合它所属的容器，`background-size`请将`cover`

```
h4.reserve {
background: url(../images/reserve_spot_bkg.png) no-repeat;
background-size: cover;
width: 60%;
min-width: 100px;
} 
```

[http://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

当您调整容器元素的大小时，图像将调整大小，因此使用宽度/高度的百分比值或使用媒体查询使容器元素具有响应性。使用 min-width 和 max-width 来防止元素变得太小或太宽。

# c# - 如何在关闭事件中从 wpf 窗口中移除焦点？

> ID：13384191
> 
> 赞同：4
> 
> 时间：2012-11-14T17:39:11.850
> 
> 标签：c#, wpf, focus

我想从我的 wpf 窗口中移除焦点并将焦点设置回最后一个“windows 窗口”，就像我关闭普通 wpf 窗口时发生的那样。

我的 WPF 窗口就像普通“Windows 窗口”上的一层。我只是不想在每次单击“层 WPF Windows”上的某些内容时失去焦点。

我的解决方法是使用 Button_Click 事件方法将焦点设置回最后一个“Windows 窗口”。

希望您能帮助我，因为我无法在互联网上找到有关此不常见问题的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:52:59.017

你需要用 P/Invoke 弄脏你的手。我们将需要 WinAPI 中的这些函数：

```
[DllImport("user32.dll")]
static extern IntPtr GetWindow(IntPtr hWnd, uint wCmd);
const uint GW_HWNDNEXT = 2;

[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool SetForegroundWindow(IntPtr hWnd);

[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool IsWindowVisible(IntPtr hWnd); 
```

如何使用它们：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    // Get the WPF window handle
    IntPtr hWnd = new WindowInteropHelper(Application.Current.MainWindow).Handle;

    // Look for next visible window in Z order
    IntPtr hNext = hWnd;
    do
        hNext = GetWindow(hNext, GW_HWNDNEXT);
    while (!IsWindowVisible(hNext));

    // Bring the window to foreground
    SetForegroundWindow(hNext);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:55:37.817

您可以做的是最小化窗口。这会将焦点放在“最后一个窗口”上。

```
window.WindowState = System.Windows.WindowState.Minimized; 
```

# linker - 如何在 Microsoft Visual Studio 中链接“.so”库

> ID：13384199
> 
> 赞同：1
> 
> 时间：2012-11-14T17:39:42.280
> 
> 标签：linker, .a, vs-android

我想知道是否有人知道如何在 Microsoft Visual Studio 中链接 .so 动态库（或该母校的 .a 静态库）。以下步骤不适用于 .a 或 .so。

我正在使用vs-android插件在Android NDK中使用MVS进行开发，并且我正在尝试向项目添加一个编译为.so的自定义库。

1 - 在同一个解决方案中，我在示例项目之一（san-angeles 项目）旁边创建了一个动态库 (.so) 项目。

2 - 我已经设置了 .so 项目，我们称它为“引擎”作为 san-angeles 的依赖项。engine.so 文件生成没有任何问题，并出现在 {SolutionFolder?}/Android/Debug 文件夹中。

3 - 我已将 engine.so 添加到链接器中，附加包括 san-angeles 和 {SolutionFolder?}/Android/Debug 文件夹（作为完整路径，类似于 C:/projects/.../Debug）到额外的链接器目录。

但是当我编译 san-angeles 时，我得到了错误：

“arm-linux-androideabi-g++.exe：engine.so：没有这样的文件或目录”

所以我猜我需要做其他事情才能将 .so/.a 添加到项目中？也许将名称更改为 libengine.so 或类似的名称？很多默认包含都有 lib 前缀，所以我不知道它是否符合这些要求。

谢谢你的帮助，詹姆

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-15T12:13:35.480

好的，所以在我的情况下，这是通过以下方式解决的：

1 - 将生成的 engine.a 命名为 libengine.a

2 - 我没有从 MVS 将 engine.a 添加到 Preferences/Linker/Additional Dependencies，而是添加到 Preferences/Linker/Command Line -l"engine"

有了这个，该项目终于设法找到和engine.a

希望这对其他人有帮助。:)

# android - 在android上使用opencv 2.4.2合并两个图像

> ID：13384202
> 
> 赞同：1
> 
> 时间：2012-11-14T17:39:51.657
> 
> 标签：android, image, opencv

我实际上是在 Android 上开发一个应用程序，并且我正在使用 OpenCV 2.4.2 的库。我正在尝试将两个图像合并为一个：事实上，我有两个相同大小但在不同照明值下的图像（一个比另一个更亮）我正在尝试对这两个图像进行转换一种方式：例如：0.4*image1 + 0.6*image2 它将两个图像组合成一个图像（在这种情况下将具有大约中等的照明值）。如何在 android 上使用 openCV 2.4.2 做到这一点？我实际上是从两个图像中得到一个 MAT 矩阵： Mat image1 = Highgui.imread(imgFile1.getAbsolutePath()); Mat image2 = Highgui.imread(imgFile2.getAbsolutePath());

这里的问题是我不能将 MAT 矩阵乘以一个标量值，让我做这样的操作（image3= a*image1 +b*image2），然后将它（image3）转换为位图并显示它！还有另一种方法吗？或者有人对此有解决方案吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:08:37.593

您正在寻找[`addWeighted`](http://docs.opencv.org/java/org/opencv/core/Core.html#addWeighted%28org.opencv.core.Mat,%20double,%20org.opencv.core.Mat,%20double,%20double,%20org.opencv.core.Mat%29)功能。

# winapi - 滚动图

> ID：13384205
> 
> 赞同：1
> 
> 时间：2012-11-14T17:39:53.647
> 
> 标签：winapi, graph, scrollbar, wm-paint

我正在尝试绘制一个带有滚动条的图形，
该图形使用 x 轴的时间，我希望有一个有限的 x 轴（1 分钟）
，所以直到 1 分钟，滚动条的页面是长度滚动条，
之后页面应该是“60 秒长”，并且
当您拖动它跟踪的滚动条并拉起图形的相关位时，滚动条最大值应该是“经过时间”长。
图表应该自动滚动直到它被拖走（并且一旦它被拖回最大值就自动滚动）

这就是我到目前为止所拥有的

在 wndproc 的顶部定义
`static SCROLLINFO sci = {sizeof(SCROLLINFO),SIF_RANGE|SIF_POS|SIF_PAGE|SIF_TRACKPOS,0,0,0,0,0};`

在 WM_HSCROLL 事件中：

```
GetScrollInfo((HWND)lParam, SB_CTL, &sci);
        int pos;
        pos = sci.nPos;
        switch(LOWORD(wParam))
        {
            case SB_PAGELEFT:
                pos -= sci.nPage;
                break;
            case SB_LINELEFT:
                pos -= (sci.nMax/10);
                break;
            case SB_PAGERIGHT:
                pos += sci.nPage;
                break;
            case SB_LINERIGHT:
                pos += (sci.nMax/10);
                break;
            case SB_THUMBTRACK:
                tsTracking = true;
                pos = sci.nTrackPos;
                break;
            case SB_THUMBPOSITION:
                tsTracking = false;
                pos = sci.nTrackPos;
                break;
        }
        if (pos < sci.nMin) pos = sci.nMin;
        if (pos > sci.nMax) pos = sci.nMax;
        if (pos != sci.nPos)
        {
            sci.fMask = SIF_POS;
            sci.nPos = pos;
            if(sci.nPos >= (sci.nMax-(sci.nPage*1.2)-1))    //this should detect when the thumb has reached the end of the scrollbar
                sci.nPos = sci.nMax;
            SetScrollInfo((HWND)lParam, SB_CTL, &sci, TRUE);
            PostMessage(hWnd, WM_COMMAND, IDM_DISPLAYRESULTS, 0);
        }
        break; 
```

在从 WM_PAINT 调用的绘图代码中
（是的，我意识到我不应该在此处设置滚动条的信息，我打算在其正常工作后将其放在适当的位置）

在绘图功能的顶部：

`static SCROLLINFO sci = {sizeof(SCROLLINFO),SIF_RANGE|SIF_POS|SIF_PAGE|SIF_TRACKPOS,0,0,0,0,0};`

在绘图功能中：

```
__int64 
    elapsed_time = g_h_maxX-g_h_minX,                                   //the elapsed time
    windowLengthMS,                                                     //the current window length in ms (between 0 and MAX_TIME_WIDTH_MS)
    start,                                                              //the start of the current window
    end;                                                                //the end of the current window
static UINT32 windowMaxS = 1;                                           //how long the window max is (used for x sub-divisions)
double 
    xTickStep,                                                          //x division step
    yTickStep,                                                          //y division step
    xScale,                                                             //x-scale (used to get the time relative to the elapsed time and size of the graph)
    yScale;                                                             //y-scale (used to get the data being plotted relative to its max, and the size of the graph)
if(!tsTracking)                                                         //a global bool, checking if the scrollbar's thumb is being dragged
{
    GetScrollInfo(get_chwnd(IDCW_HARMONICSRESULTSTIMESHIFTSB),SB_CTL,&sci); //gets the scroll info for the scrollbar
    int pos = sci.nPos*(double(elapsed_time)/double(sci.nMax - sci.nMin));  //gets the position relative to the new max     
    sci.nMin = g_h_minX;                                                    //sets min (should always be the same, done for completeness)
    sci.nMax = (((g_h_maxX-MAX_TIME_WIDTH_MS)>0)?(g_h_maxX):0);             //sets max to either max, or 0 (if max isnt bigger then page length)
    sci.nPage = MAX_TIME_WIDTH_MS;                                          //sets the page length to the window length
    sci.nPos = pos;                                                         //sets position to its new value
    if(sci.nPos >= (sci.nMax-(sci.nPage*1.2)-1))                                    //if position is one "page" from the end
        sci.nPos = sci.nMax;                                                    //set it to max
    SetScrollInfo(get_chwnd(IDCW_HARMONICSRESULTSTIMESHIFTSB),SB_CTL,&sci,true);  
}                                                                           //set scroll info

if (elapsed_time > MAX_TIME_WIDTH_MS)                                   //if elapsed time is longer then the max window length
{
    end = ((double)sci.nPos / double(sci.nMax)) * g_h_maxX;                 //set the end to current (scroll position / scroll max) * latest time -> this should put end relative to the scrollbar
    start = end-MAX_TIME_WIDTH_MS;                                          //sets start to end - window length
    if (start < 0)                                                          //if start is now less than zero                                                    
    {
        end = MAX_TIME_WIDTH_MS;                                                //set end to window length
        start = 0;                                                              //set start to 0
    }
}
else                                                                    //if (elapsed_time <= MAX_TIME_WIDTH_MS)                            
{
    start = g_h_minX;                                                       //start is min
    end = g_h_maxX;                                                         //end is max
}
windowLengthMS = (end-start);                                           //find the current window length
if(_MSTOSECS(windowLengthMS) > windowMaxS)                              //if the current window length beats one fo the markers
    windowMaxS = ((windowMaxS < 10)?windowMaxS+1:(windowMaxS==40)?windowMaxS*1.5:windowMaxS*2); //change subdiv scaling
xScale = double(graph_width)/double(windowLengthMS);                    //set x-scale to width / window length
yScale = (double)(graph_height)/((double)g_h_maxY - (double)g_h_minY);  //set y-scale to height / (maxVal-minVal)

int ticks = _MSTOSECS(elapsed_time);                                    //ticks = full seconds elapsed
xTickStep = double(graph_width)/double(ticks+1);                        //tickstep = seconds+1 (accounts for 0)
yTickStep = double(graph_height)/double(Y_TICKS);                       //6 y-ticks, constant.

SelectObject(hDC,hThickPen);
{                                                                       //scope to clear variables!
    double x;                                                               //x to store subdiv x-location
    for(i = ticks; i >= 0; i--)                                             //for each subdiv
    {
        if(((windowMaxS>40)?(!(i%3)):(windowMaxS >20)?(!(i%2)):i))          //have if <=20 secs, each second is shown on x, >20 <=40, every second second is shown, >40 seconds, every 3rd second is shown
        {
            x = round((_SECSTOMS(i)*xScale));                                   //find x-pos
            sprintf(buf,"%d",(i+_MSTOSECS(start)));                                             //print to buffer
            SetRect(&rc, fr.left+x-5, fr.bottom+5, fr.left+x+xTickStep, fr.bottom+25); //get text rectangle
            DrawText(hDC, buf, -1, &rc, DT_SINGLELINE | DT_VCENTER | DT_LEFT);  //draw text
        }
        if (i!=ticks && (windowMaxS>40)?(!(i%6)):(windowMaxS >20)?(!(i%4)):(windowMaxS>10)?(!(i%2)):i)//every <10, each sec gets a subdiv, <20 each second tick gets a subdiv, <40 each 6th tick gets a subdiv
        {
            MoveToEx(hDC, GRAPH_XL_OFFSET+x, graph_bottom, NULL);               //draw the line
            LineTo(hDC, GRAPH_XL_OFFSET+x, graph_bottom-graph_height);          //draw the line
        }
    }
} 
```

至于全局变量：
`g_h_minX`是开始时间，
`g_h_maxX`是最后一个结果时间
`MAX_TIME_WIDTH_MS`是毫秒的“窗口长度”->我想要滚动条页面多长时间（60秒）

所以我们的想法是设置`end`滚动条所在的位置，并`start`通过从中获取窗口长度`end`，并计算出我们要查看的图形的哪一部分。

在过去的两天里，我一直在摆弄这个，我的想法已经不多了。我确定我很接近，但我无法弄清楚，

编辑：
稍微更新了代码
似乎我也忘了说问题是什么。
scolling 代码不能正常工作，当有新数据进入时它会自动滚动，
但是当我将拇指拖离滚动条的末端时，它只是捕捉到开始，并且不会移动。仔细观察，箭头有效，右键菜单上的“page-right”“page-left”有效，只是没有跟踪

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:38:24.527

我设法找到了问题，我最终将所有内容转换为秒并使用它，最终工作，所以我一定遇到了一些缩放问题。
代码最终是这样的：

```
case WM_HSCROLL:
    {
        SCROLLINFO sci = {sizeof(SCROLLINFO),SIF_RANGE|SIF_POS|SIF_PAGE|SIF_TRACKPOS,0,0,0,0,0};
        GetScrollInfo((HWND)lParam, SB_CTL, &sci);
        int pos;
        pos = sci.nPos;
        switch(LOWORD(wParam))
        {
            case SB_PAGELEFT:
                pos -= sci.nPage;
                break;
            case SB_LINELEFT:
                pos -= 2;
                break;
            case SB_PAGERIGHT:
                pos += sci.nPage;
                break;
            case SB_LINERIGHT:
                pos += 2;
                break;
            case SB_THUMBTRACK:
                tsTracking = true;
                pos = sci.nTrackPos;
                break;
            case SB_THUMBPOSITION:
                tsTracking = false;
                pos = sci.nTrackPos;
                break;
            case SB_LEFT:
                pos = sci.nMin;
                break;
            case SB_RIGHT:
                pos = sci.nMax;
                break;
        }
        if (pos < sci.nMin) pos = sci.nMin;
        if (pos > sci.nMax) pos = sci.nMax;
        if (pos != sci.nPos)
        {
            sci.fMask = SIF_POS;
            sci.nPos = pos;
            //if(sci.nPos >= (sci.nMax-sci.nPage))      //this should detect when the thumb has reached the end of the scrollbar
            //  sci.nPos = sci.nMax;
            SetScrollInfo((HWND)lParam, SB_CTL, &sci, TRUE);
            PostMessage(hWnd, WM_COMMAND, IDM_DISPLAYRESULTS, 0);
        }
    }
    break; 
```

对于滚动代码和

```
 __int64 
    elapsed_time = g_h_maxX-g_h_minX,                                   //the elapsed time
    windowLengthMS,                                                     //the current window length in ms (between 0 and MAX_TIME_WIDTH_MS)
    start,                                                              //the start of the current window
    end;                                                                //the end of the current window
static UINT32 windowMaxS = 1;                                           //how long the window max is (used for x sub-divisions)
double 
    xTickStep,                                                          //x division step
    yTickStep,                                                          //y division step
    xScale,                                                             //x-scale (used to get the time relative to the elapsed time and size of the graph)
    yScale;                                                             //y-scale (used to get the data being plotted relative to its max, and the size of the graph)
    GetScrollInfo(get_chwnd(IDCW_HARMONICSRESULTSTIMESHIFTSB),SB_CTL,&sci); //gets the scroll info for the scrollbar

if (elapsed_time >= MAX_TIME_WIDTH_MS)                                  //if elapsed time is longer then the max window length
{
    start = _SECSTOMS(sci.nPos);                                            //sets start to end - window length
    end = start+MAX_TIME_WIDTH_MS;                                          //set the end to current (scroll position / scroll max) * latest time -> this should put end relative to the scrollbar

}
else                                                                    //if (elapsed_time <= MAX_TIME_WIDTH_MS)                            
{
    start = g_h_minX;                                                       //start is min
    end = g_h_maxX;                                                         //end is max
}
windowLengthMS = (end-start);                                           //find the current window length
if(_MSTOSECS(windowLengthMS) > windowMaxS)                              //if the current window length beats one fo the markers
    windowMaxS = ((windowMaxS < 10)?windowMaxS+1:(windowMaxS==40)?windowMaxS*1.5:windowMaxS*2); //change subdiv scaling
xScale = double(graph_width)/double(windowLengthMS);                    //set x-scale to width / window length
yScale = (double)(graph_height)/((double)max - (double)g_h_minY);   //set y-scale to height / (maxVal-minVal)
if(!(g_h_maxY-g_h_minY))
    yScale = 1;
if(!windowLengthMS)
    xScale = 1;
int ticks = _MSTOSECS(elapsed_time);                                    //ticks = full seconds elapsed
xTickStep = double(graph_width)/double(ticks+1);                        //tickstep = seconds+1 (accounts for 0)
yTickStep = double(graph_height)/double(Y_TICKS);                       //6 y-ticks, constant. 
```

对于图形 x 缩放

# java - Selenium WebDriver 的 Keys.chord() 函数在 Internet Explorer 中不起作用（9）

> ID：13384208
> 
> 赞同：1
> 
> 时间：2012-11-14T17:40:08.313
> 
> 标签：java, internet-explorer, selenium, internet-explorer-9

我一直在 Selenium 中使用键盘快捷键来执行 UI 功能，并且我一直在使用 Keys.chord() 来模拟同时按键。它们在 Firefox 和 Chrome 中运行良好，但在 Internet Explorer 中却不行。在 IE 中，似乎每个按键都是单独执行的，而不是一起执行的。

以下行在 Firefox 和 Chrome 中有效，但在 IE 中无效： `driver.findElement(By.id(id)).sendKeys(Keys.chord(Keys.SHIFT, Keys.ARROW_LEFT));`

我也尝试过 IE 中的 Actions 类，但无济于事：

```
Actions builder = new Actions(driver);
builder.keyDown(driver.findElement(By.id(id)), Keys.SHIFT).sendKeys(Keys.ARROW_LEFT).perform(); 
```

如果有人可以帮助我找到解决方法（或者如果它应该工作并且我只是做错了），将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T15:35:42.587

当前具有默认选项的驱动程序 (2.45) 使用 PostMessage，这对于模拟修饰键 [1] [2] 是不可靠的。如果您将 IE 选项“RequireWindowFocus”设置为 true，则驱动程序将使用 SendInput，这将起作用。

如果使用 C#，您将创建如下驱动程序：

```
var options = new InternetExplorerOptions();
options.RequireWindowFocus = true;

var driver = new InternetExplorerDriver(options); 
```

1.  [http://blogs.msdn.com/b/oldnewthing/archive/2005/05/30/423202.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/30/423202.aspx)
2.  [PostMessage WM_KEYDOWN 发送多个键？](https://stackoverflow.com/questions/7732633/postmessage-wm-keydown-send-multiply-keys)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:04:14.370

我[今天早些时候发布了一个类似的问题](https://stackoverflow.com/questions/14479870/webdriver-key-commands-in-internet-explorer/14485192#14485192)。无法提出硒解决方案，因此改用此解决方法：

```
import java.awt.Robot
...
Robot robot;
try { 
  robot = new Robot();          
  robot.keyPress(KeyEvent.VK_SHIFT);
  robot.keyPress(KeyEvent.VK_ARROW_LEFT);
  robot.keyRelease(KeyEvent.VK_ARROW_LEFT);
  robot.keyRelease(KeyEvent.VK_SHIFT);
}catch (AWTException e) {
  e.printStackTrace();
} 
```

希望这可能会有所帮助

# php - 将 jpegcam 插件照片保存到服务器（快照）

> ID：13384210
> 
> 赞同：1
> 
> 时间：2012-11-14T17:40:27.293
> 
> 标签：php, plugins, jpeg, webcam, photo

我正在尝试在我的网站上实现一个网络摄像头“插件”。我搜索了很多并找到了一些选项：

*   jquery webcan 插件
*   Jpeg cam 插件 -jquery 网络摄像头（来自 Mackers Mcmackers）

但是，我看到的唯一一个可以拍摄快照并自动将其保存（并显示）到服务器的实时示例是 jpeg cam: [live example](http://bowser.effectgames.com/~jhuckaby/jpegcam/stealth.html)。

它的下载包附带一个 PHP 示例，用于将图像保存到服务器：

```
<?php

/* JPEGCam Test Script */
/* Receives JPEG webcam submission and saves to local file. */
/* Make sure your directory has permission to write files as your web server user! */

$filename = date('YmdHis') . '.jpg';
$result = file_put_contents( $filename, file_get_contents('php://input') );
if (!$result) {
    print "ERROR: Failed to write data to $filename, check permissions\n";
    exit();
}

$url = 'http://' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['REQUEST_URI']) . '/' . $filename;
print "$url\n";

?> 
```

在本地运行时，它不会保存图像。我猜它应该在服务器上工作，但是在本地它至少显示上传文本和上传确认，在服务器上它就像它不会启动 test.php。

这是 jquery 中的保存选项（在 .html 上）：

```
<script language="JavaScript">
        webcam.set_hook( 'onComplete', 'my_completion_handler' );

        function take_snapshot() {
            // take snapshot and upload to server
            // document.getElementById('upload_results').innerHTML = '<h1>Uploading...</h1>';
            webcam.snap();
        }

        function my_completion_handler(msg) {
            // extract URL out of PHP output
            if (msg.match(/(http\:\/\/\S+)/)) {
                var image_url = RegExp.$1;
                // show JPEG image in page
                document.getElementById('upload_results').innerHTML = 
                    '<h1>Upload Successful!</h1>' + 
                    '<h3>JPEG URL: ' + image_url + '</h3>' + 
                    '<img src="' + image_url + '">';
            }
            else alert("PHP Error: " + msg);
        }
    </script> 
```

以及您指向将接收照片的 .php 的部分（插入 API 的一部分）：

```
<script language="JavaScript">
        webcam.set_api_url( 'test.php' );
        webcam.set_quality( 90 ); // JPEG quality (1 - 100)
        webcam.set_shutter_sound( false ); // no shutter click sound
        webcam.set_stealth( true ); // enable stealth mode
    </script> 
```

有人能帮助我吗？提前致谢！

# command-line - 从 SSH 自动卸载密钥

> ID：13384211
> 
> 赞同：1
> 
> 时间：2012-11-14T17:40:32.790
> 
> 标签：command-line, github, ssh, ssh-keys

为什么会出现以下错误（在之前已正确设置 github 连接的*同一台机器上）？*意思是，它在前一天工作（例如我可以`push`，`pull`等没有问题），但第二天没有。

```
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

当我这样做时`ssh-add`：

```
$ ssh-add -l
The agent has no identities. 
```

之前加载到 SSH 中的密钥是否有可能被自动卸载？

以下解决了该问题（供参考）：

```
ssh-add ~/.ssh/github_rsa
Enter passphrase for /Users/admin/.ssh/github_rsa: 
Identity added: /Users/admin/.ssh/github_rsa (/Users/admin/.ssh/github_rsa) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T16:51:49.190

在 Mac 上，您添加的身份通常不会消失，除非您明确删除它们 (ssh-add -d)、重新启动计算机或注销然后重新登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:06:02.747

最新的 Github for (Mac|Windows) 包括一个凭证助手（如“[如何将 git 与 gnome-keyring 集成](https://stackoverflow.com/questions/13385690/how-to-use-git-with-gnome-keyring-integration/13386417#13386417)”中所述）。

这意味着，如果您需要输入密码（因为您的私有 ssh 密钥受密码保护），它将在会话期间由 git 存储。
但在下一次会话中，您将需要再次输入密码（一次）。

# javascript - jquery data() 没有附加值

> ID：13384214
> 
> 赞同：4
> 
> 时间：2012-11-14T17:40:35.747
> 
> 标签：javascript, jquery

我正在尝试使用来自 jquery调用的 jquery 将一些数据附加到特定类`options`的菜单中。但是当我尝试调用它时，我得到了它没有附加的错误。或者，更准确地说，它根本没有被应用，因为下面的倒数第二行代码给了我错误`select``data()``ajax()``console.log($(this).data('address'.vendorName));``Uncaught TypeError: Cannot read property 'vendorName' of undefined`

内部`$.each()`循环是最后一次尝试，因为我认为可能只是 using `$('.vendor_address_id_' + id).data....`并没有应用于该类的所有元素。但我真的不认为它应该是必要的。我究竟做错了什么？

```
$.each(returnedData, function (key, val) {
    var id = val.id;

    //attach address information to each select option for display in .vendor_full_address_table
    $('.vendor_address_id_' + id).each(function (k, v) {

        $(this).data('address', {
            'vendorName': val.vendor_name,
            'address1': val.address1,
            'address2': val.address2,
            'city': val.city,
            'state': val.state,
            'zip': val.zip
        });
        //gives error: Uncaught TypeError: Cannot read property 'vendorName' of undefined 
        console.log($(this).data('address').vendorName);
    });
});

//console.log(returnedData);
Object
    address_0: Object
        address1: "street address1"
        address2: ""
        city: "Kalamazoo"
        id: "15"
        state: "MI"
        vendor_name: "companyA"
        zip: "123456"
    address_1: Object
        etc...
        etc...
        etc...
    address_2: Object
        etc...
        etc...
        etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:47:44.950

代替

```
val.vendor_name 
```

采用

```
returnedData.vendor_name 
```

这里**val**`returnedData[key]`是迭代中特定值的值。

您正在尝试从原始类型访问属性，即此处的**val**。

# python - 在pylab中以不同颜色显示多个蒙版

> ID：13384221
> 
> 赞同：6
> 
> 时间：2012-11-14T17:41:16.083
> 
> 标签：python, matplotlib, image-masking

我有一个数组，其中包括体面的观察、不相关的观察（我想屏蔽掉）和没有观察到的区域（我也想屏蔽掉）。我想将此数组显示为具有两个单独蒙版的图像（使用 pylab.imshow），其中每个蒙版以不同的颜色显示。

我找到了某种颜色的单个掩码（[此处）的代码，但没有找到两个不同掩码的代码：](https://stackoverflow.com/questions/2578752/how-can-i-plot-nan-values-as-a-special-color-with-imshow-in-matplotlib)

```
masked_array = np.ma.array (a, mask=np.isnan(a))
cmap = matplotlib.cm.jet
cmap.set_bad('w',1.)
ax.imshow(masked_array, interpolation='nearest', cmap=cmap) 
```

如果可能的话，我想避免使用严重失真的颜色图，但接受这是一种选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:54:44.820

您可以根据某些条件简单地将数组中的值替换为某个固定值。例如，如果要屏蔽大于 1 且小于 -1 的元素：

```
val1, val2 = 0.5, 1
a[a<-1]= val1
a[a>1] = val2
ax.imshow(a, interpolation='nearest') 
```

`val1`并且`val2`可以修改以获得您想要的颜色。

您也可以显式设置颜色，但这需要更多工作：

```
import matplotlib.pyplot as plt
from matplotlib import colors, cm

a = np.random.randn(10,10)

norm = colors.normalize()
cmap = cm.hsv
a_colors = cmap(norm(a))

col1 = colors.colorConverter.to_rgba('w')
col2 = colors.colorConverter.to_rgba('k')

a_colors[a<-0.1,:] = col1
a_colors[a>0.1,:] = col2
plt.imshow(a_colors, interpolation='nearest')
plt.show() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-04T02:23:35.197

对我来说，最简单的方法是直接用 imshow 绘制蒙版，传递不同的颜色图。颜色图的最大值和最小值用于 True 和 False 值：

```
mask1=np.isnan(a)
mask2=np.logical_not(mask1)
plt.imshow(mask1,cmap='gray')
plt.imshow(mask2,cmap='rainbow') 
```

[![在此处输入图像描述](../Images/500869d4b7ec558c047f3609e97cb2a8.png)](https://i.stack.imgur.com/IWNma.png)

然而，这个（和建议的其他方法）也绘制了 False 值，覆盖了以前的图。如果您想避免绘制 False 值，可以通过将数组转换为浮点数后将它们替换为 np.nan 来完成（np.nan 的类型为浮点数，不能包含在布尔掩码中）。未绘制 nan 值：

```
mmm=mask.astype(np.float)
mmm[np.where(mmm==0)]=np.nan
#the substitution can be done also in one line with:
#mmm=np.where(mask,mask.astype(np.float),np.nan)
plt.imshow(mmm,cmap='rainbow',vmin=0,vmax=1)) #will use only the top color: red. vmin and vmax are needed if there are only one value (1.0=True) in the array.
plt.colorbar()
#repeat for other masks... 
```

[![在此处输入图像描述](../Images/0182aec66c68c92261228ff86259a3fa.png)](https://i.stack.imgur.com/6FZQm.png) 而且我希望我不会偏离主题，但是可以使用相同的技术来绘制具有不同颜色图的数据的不同部分，方法是将绘图命令替换为：

```
plt.imshow(mmm*data,cmap='rainbow') 
```

[![在此处输入图像描述](../Images/229cdccacfcef2b6339989942bcef651.png)](https://i.stack.imgur.com/0AM24.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-25T07:30:10.383

为了将一些像素着色为红色，另一些像素为绿色，如下图所示，我使用了下面的代码。（有关详细信息，请参阅代码注释。）

[![两个掩码与 matplotlib 矩阵图一起使用的示例](../Images/f03ff1ce9ecb0f7f21b8cf60ba3be53a.png)](https://i.stack.imgur.com/dErl8.png)

```
import numpy as np              #Used for holding and manipulating data
import numpy.random             #Used to generate random data
import matplotlib as mpl        #Used for controlling color
import matplotlib.colors        #Used for controlling color as well
import matplotlib.pyplot as plt #Use for plotting

#Generate random data
a = np.random.random(size=(10,10))

#This 30% of the data will be red
am1 = a<0.3                                 #Find data to colour special
am1 = np.ma.masked_where(am1 == False, am1) #Mask the data we are not colouring

#This 10% of the data will be green
am2 = np.logical_and(a>=0.3,a<0.4)          #Find data to colour special
am2 = np.ma.masked_where(am2 == False, am2) #Mask the data we are not colouring

#Colourmaps for each special colour to place. The left-hand colour (black) is
#not used because all black pixels are masked. The right-hand colour (red or
#green) is used because it represents the highest z-value of the mask matrices
cm1 = mpl.colors.ListedColormap(['black','red'])
cm2 = mpl.colors.ListedColormap(['black','green'])

fig = plt.figure()                          #Make a new figure
ax = fig.add_subplot(111)                   #Add subplot to that figure, get ax

#Plot the original data. We'll overlay the specially-coloured data
ax.imshow(a,   aspect='auto', cmap='Greys', vmin=0, vmax=1)

#Plot the first mask. Values we wanted to colour (`a<0.3`) are masked, so they
#do not show up. The values that do show up are coloured using the `cm1` colour
#map. Since the range is constrained to `vmin=0, vmax=1` and a value of
#`cm2==True` corresponds to a 1, the top value of `cm1` is applied to all such
#pixels, thereby colouring them red.
ax.imshow(am1, aspect='auto', cmap=cm1, vmin=0, vmax=1);
ax.imshow(am2, aspect='auto', cmap=cm2, vmin=0, vmax=1);
plt.show() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:47:49.147

我不知道数组中的值是什么，但是您可以转换遮罩区域，使 X 值变为 RGB(A) 值（元组`(R,G,B,A)`），在这种情况下，根据[文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow)， cmap 将被忽略.

> • cmap: [ 无 | 颜色图]
> 
> 一个 matplotlib.colors.Colormap 实例，例如。厘米喷射。如果没有，默认为 rc image.cmap 值。*当 X 具有 RGB(A) 信息时忽略 cmap*

# magento - 将 Magento 1.6.1 安装迁移到新的专用服务器时出现无效 uri 错误

> ID：13384222
> 
> 赞同：0
> 
> 时间：2012-11-14T17:41:20.357
> 
> 标签：magento

将 Magento 安装迁移到新的专用服务器时出现以下错误

我在克隆和迁移 Magento 方面非常有经验，但我不知道这里出了什么问题。

我已经检查了新服务器的兼容性，这很好..

当 uri 中有下划线时，通常会引发此错误。我尝试了不同的子域，但不断收到错误消息。我刚刚将同一个站点迁移到我的开发服务器，它工作正常 - 有什么想法吗？

```
Trace:
/home/shushush/public_html/shoponline/magento/lib/Zend/Uri.php(143): Zend_Uri_Http->__construct('http', '//www.shushusho...')
1 /home/shushush/public_html/shoponline/magento/app/code/core/Mage/Core/Model/Store.php(712): Zend_Uri::factory('http://www.shus...')
2 /home/shushush/public_html/shoponline/magento/app/code/core/Mage/Core/Controller/Varien/Front.php(313): Mage_Core_Model_Store->isCurrentlySecure()
3 /home/shushush/public_html/shoponline/magento/app/code/core/Mage/Core/Controller/Varien/Front.php(161): Mage_Core_Controller_Varien_Front->_checkBaseUrl(Object(Mage_Core_Controller_Request_Http))
4 /home/shushush/public_html/shoponline/magento/app/code/core/Mage/Core/Model/App.php(349): Mage_Core_Controller_Varien_Front->dispatch()
5 /home/shushush/public_html/shoponline/magento/app/Mage.php(640): Mage_Core_Model_App->run(Array)
6 /home/shushush/public_html/shoponline/magento/index.php(80): Mage::run('', 'store')
7 {main} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-17T08:17:10.210

问题是由于 '_' 造成的。它不会识别下划线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:30:24.747

查看您的调用堆栈，看来这是触发您看到的错误/异常的方法

```
Zend_Uri_Http->__construct 
```

跳转到该文件的源代码，我猜（因为您没有包含错误文本）这是您看到的异常。

```
#File: lib/Zend/Uri/Http.php
protected function __construct($scheme, $schemeSpecific = '')
{
    //...
    if ($this->valid() === false) {
        #require_once 'Zend/Uri/Exception.php';
        throw new Zend_Uri_Exception('Invalid URI supplied');
    }
    //...
} 
```

看一下`valid`方法的定义

```
public function valid()
{
    // Return true if and only if all parts of the URI have passed validation
    return $this->validateUsername()
       and $this->validatePassword()
       and $this->validateHost()
       and $this->validatePort()
       and $this->validatePath()
       and $this->validateQuery()
       and $this->validateFragment();
} 
```

您可以看到 Zend/Magento 调用的 7 种方法来确定 URI 是否有效。其中之一是失败。我建议添加一些临时调试代码来确定哪个方法返回 false

```
public function valid()
{
    var_dump($this->validateUsername());
    var_dump($this->validatePassword());
    var_dump($this->validateHost());
    var_dump($this->validatePort());
    var_dump($this->validatePath());
    var_dump($this->validateQuery());
    var_dump($this->validateFragment());

    // Return true if and only if all parts of the URI have passed validation
    return $this->validateUsername()
       and $this->validatePassword()
       and $this->validateHost()
       and $this->validatePort()
       and $this->validatePath()
       and $this->validateQuery()
       and $this->validateFragment();
} 
```

然后，一旦您知道这一点，您就可以查看返回 false 的方法的定义，并确定它在哪些字符上失败。

# java - 在我的打印课上出现 PDF 打印问题

> ID：13384225
> 
> 赞同：0
> 
> 时间：2012-11-14T17:41:29.250
> 
> 标签：java, swt

我创建了一个类来打印 PDF 文件。

该类打开一个带有开始按钮的应用程序窗口。

单击开始按钮时，它会打开一个运行我的 PrintFile 类的 ProgressMonitorDialog，该类允许用户选择本地打印机并将打印作业发送到我的打印方法。

一切运行正常，但打印作业永远不会发送到打印机。

我知道那是通过打印电话

```
try {
    System.out.println("before\n");         
    pjob.print();
    System.out.println("after\n"); 
} 
```

但是 print 方法永远不会执行？所以我不确定什么 pjob.print(); 是在做。

```
 public class AplotPdfPrintLocal extends ApplicationWindow {

   private String userSelectedFile;

   /////////////////////////////////////////////////////////////////////////
   //                         Constructor                                 //
   /////////////////////////////////////////////////////////////////////////
   public AplotPdfPrintLocal(String pdfFilePath) {
      super(null);
      this.userSelectedFile = "c:/Teamcenter/Tc8.3/portal/temp/james.pdf";
   }

   /////////////////////////////////////////////////////////////////////////
   //                             run()                                   //
   /////////////////////////////////////////////////////////////////////////
   public void run() {
      setBlockOnOpen(true); // Don't return from open() until window closes
      open();  // Opens the main window
      Display.getCurrent().dispose();  // Dispose the display
   }

/////////////////////////////////////////////////////////////////////////
//                         configureShell()                            //
/////////////////////////////////////////////////////////////////////////
protected void configureShell(Shell shell) {
   super.configureShell(shell);
   shell.setText("Print PDF");
}

/////////////////////////////////////////////////////////////////////////
//                         createContents()                            //
/////////////////////////////////////////////////////////////////////////
protected Control createContents(Composite parent) {
  Composite composite = new Composite(parent, SWT.NONE);
  composite.setLayout(new GridLayout(1, true));

  //final Button indeterminate = new Button(composite, SWT.CHECK);
  //indeterminate.setText("Indeterminate");

  // Create the ShowProgress button
  Button showProgress = new Button(composite, SWT.NONE);
  showProgress.setText("Select Printer");

  final Shell shell = parent.getShell();

  // Display the ProgressMonitorDialog
  showProgress.addSelectionListener(new SelectionAdapter() {
     public void widgetSelected(SelectionEvent event) {
        try {
           new ProgressMonitorDialog(shell).run(true, true, new PrintFile(userSelectedFile, true));
        } 
        catch (InvocationTargetException e) {
           MessageDialog.openError(shell, "Error", e.getMessage());
        } 
        catch (InterruptedException e) {
           MessageDialog.openInformation(shell, "Cancelled", e.getMessage());
        }
     }
   });
   parent.pack();
   return composite;
}

//===============================================================
//    PrintFile Class
// =============================================================== 
class PrintFile extends Thread implements Printable, IRunnableWithProgress  {

  private String filename;
  private Boolean setupPaper;
  private File file; 
  private PrinterJob pjob;
  private FileInputStream fis;
  private FileChannel fc;
  private ByteBuffer bb;
  private PDFFile pdfFile;
  private PDFPrintPage pages;
  private PageFormat pfDefault;
  private Label pagenumlabel;

  public PrintFile(String filename, boolean setupPaper) {
     this.filename = filename;
     this.setupPaper = setupPaper;
  }

  /////////////////////////////////////////////////////////////////////////
  //                              run()                                  //
  /////////////////////////////////////////////////////////////////////////
  @Override
  public void run(IProgressMonitor arg0) throws InvocationTargetException, InterruptedException {
     try {
        System.out.println("File: " + filename + "\n");
        file = new File(filename);
        fis = new FileInputStream(file);
        fc = fis.getChannel();
        bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
        pdfFile = new PDFFile(bb); 
        pages = new PDFPrintPage(pdfFile);

        pjob = PrinterJob.getPrinterJob();
        pfDefault = PrinterJob.getPrinterJob().defaultPage();
        Paper defaultPaper = new Paper();
        defaultPaper.setImageableArea(0, 0, defaultPaper.getWidth(), defaultPaper.getHeight());
        pfDefault.setPaper(defaultPaper);
        if (setupPaper) {
           pfDefault = PrinterJob.getPrinterJob().pageDialog(pfDefault);
        }
        pjob.setJobName(file.getName());
        //System.out.println("File Name : " + file.getName() + "\n");
        if (pjob.printDialog()) {
           pfDefault = pjob.validatePage(pfDefault);
           Book book = new Book();
           book.append(pages, pfDefault, pdfFile.getNumPages());
           pjob.setPageable(book);
           try {
              pjob.print();
           }
           catch (PrinterException e) {
              e.printStackTrace();
           }
        }
     }
     catch (FileNotFoundException e) {
        e.printStackTrace();
     }
     catch (IOException e) {
        e.printStackTrace();
     }
  }

  /////////////////////////////////////////////////////////////////////////
  //                             print()                                 //
  /////////////////////////////////////////////////////////////////////////
  @Override
  public int print(Graphics g, PageFormat format, int index) throws PrinterException {
     System.out.println("Got in the Print\n");       
     int pagenum = index + 1;
     if ((pagenum >= 1) && (pagenum <= pdfFile.getNumPages())) {
        if (pagenumlabel != null) {
           pagenumlabel.setText(String.valueOf(pagenum));
        }
        Graphics2D g2 = (Graphics2D) g;
        PDFPage page = pdfFile.getPage(pagenum);
        double pwidth = format.getImageableWidth();
        double pheight = format.getImageableHeight();
        double aspect = page.getAspectRatio();
        double paperaspect = pwidth / pheight;
        if (paperaspect < 1.0) {
           switch (format.getOrientation()) {
              case PageFormat.REVERSE_LANDSCAPE:
              case PageFormat.LANDSCAPE:
                   format.setOrientation(PageFormat.PORTRAIT);
                   break;
              case PageFormat.PORTRAIT:
                   format.setOrientation(PageFormat.LANDSCAPE);
                   break;
           }
           pwidth = format.getImageableWidth();
           pheight = format.getImageableHeight();
           paperaspect = pwidth / pheight;
        }
        Rectangle imgbounds;
        int width;
        int height;
        if (aspect > paperaspect) {
           height = (int) (pwidth / aspect);
           width = (int) pwidth;
        } 
        else {
           width = (int) (pheight * aspect);
           height = (int) pheight;
        }
        imgbounds = new Rectangle((int) format.getImageableX(),
               (int) format.getImageableY(),
               width, height);

        PDFRenderer pgs = new PDFRenderer(page, g2, imgbounds, null, null);
        try {
           page.waitForFinish();
           pgs.run();
        } 
        catch (InterruptedException ie) {
        }
          return PAGE_EXISTS;
     } 
     else {
        return NO_SUCH_PAGE;
     }
   }
 }
} 
```

我觉得我错过了一些简单的东西，但不知道它是什么？
我真的被这个问题困住了，真的需要帮助来解决这个问题。

感谢所有可以帮助我的人

**编辑** 如果我注释掉以下代码

```
if (pjob.printDialog()) { 
```

打印出来了！

但是当它没有被注释掉时，打印机选择对话框打开，单击 OK 按钮，打印机对话框关闭并且什么也没有发生

***编辑***

经过一些测试，我发现问题出在 pjob.printDialog() 上。

我删除了 if 语句并像这样设置它。

```
 boolean ok = pjob.printDialog();
    System.out.println("OK value " + ok + "\n");
    //if (ok) {
       pfDefault = pjob.validatePage(pfDefault);
       Book book = new Book();
       book.append(pages, pfDefault, pdfFile.getNumPages());
       System.out.println("Print Job After : " + pjob + "\n");
       pjob.setPageable(book);
       try {
          pjob.print();
       }
       catch (PrinterException e) {
          e.printStackTrace();
       } 
```

printDialog 打开，我单击 OK - 打印作业被发送到打印机，但没有打印出来。我单击取消 - 根据需要打印打印作业

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:36:55.290

我不是 100% 确定为什么，但是如果我使用跨平台 printDialog 而不是本机 printDialog - 代码按预期工作。

这是工作代码

```
 PrinterJob pjob = PrinterJob.getPrinterJob();
           PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
           PageFormat pfDefault = pjob.pageDialog(aset);
           pjob.setJobName(file.getName());
           pages.show(pjob);
           if (pjob.printDialog(aset)) {
              pfDefault = pjob.validatePage(pfDefault);
              Book book = new Book();
              book.append(pages, pfDefault, pdfFile.getNumPages());
              pjob.setPageable(book);
              try {

                 pjob.print(aset);

              }
              catch (PrinterException exc) {
                 System.out.println(exc);
              } 
```

# android - 从库中加载图片被旋转

> ID：13384226
> 
> 赞同：0
> 
> 时间：2012-11-14T17:41:35.287
> 
> 标签：android, android-imageview

我正在编写一个 android 应用程序，并为用户提供从库中加载图片的能力。

图片已加载但旋转了 90 度。有时它会旋转 -90 度。当您通过库查看图片时，如何“以相同的方式”加载图片？因此，如果它旋转了，那么一定要加载它旋转它。但如果是正确的，那么它应该以同样的方式加载

非常感谢你

对不起，我应该添加我的代码，这里是：

```
 try {
            Intent choosePictureIntent = new Intent(Intent.ACTION_PICK, Images.Media.INTERNAL_CONTENT_URI);
            startActivityForResult(choosePictureIntent, REQUEST_CHOOSE_IMAGE);
        } catch (Exception e) {
            e.printStackTrace();
        }
        break;
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
        super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

        switch(requestCode) { 
        case REQUEST_CHOOSE_IMAGE:
            if(resultCode == RESULT_OK){  
                Uri selectedImage = imageReturnedIntent.getData();
                InputStream imageStream;
                try {
                    imageStream = getContentResolver().openInputStream(selectedImage);
                    BitmapFactory.Options options=new BitmapFactory.Options();
                    options.inSampleSize = 8;
                    Bitmap yourSelectedImage = BitmapFactory.decodeStream(imageStream, null, options );
                    ivPictureChosen.setImageBitmap(yourSelectedImage); //ivPictureChosen is image view to display the picture

                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Toast.makeText(this, "Couldn't pick image", Toast.LENGTH_SHORT).show();
                }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:22:11.610

我正在*尝试*下面的代码。它检查图像的方向，然后相应地旋转它。我遇到的问题是内存不足，并且还没有找到超出 VM buget 的解决方案。这应该适用于较小的图像，并且当您的应用程序尚未使用大量内存时。

```
ExifInterface ei = new ExifInterface(filePath);
                int orientation = ei.getAttributeInt(
                        ExifInterface.TAG_ORIENTATION,
                        ExifInterface.ORIENTATION_NORMAL);

                switch (orientation) {
                case ExifInterface.ORIENTATION_ROTATE_90:
                    rotateBitmap(bitmap, 90);
                    break;
                case ExifInterface.ORIENTATION_ROTATE_180:
                    rotateBitmap(bitmap, 180);
                    break;

                }

public static void rotateBitmap(final Bitmap source, int mRotation){
    int targetWidth=source.getWidth();
    int targetHeight=source.getHeight();
    Bitmap targetBitmap = Bitmap.createBitmap(targetWidth, targetHeight, source.getConfig());
    Canvas canvas = new Canvas(targetBitmap);
    Matrix matrix = new Matrix();
    matrix.setRotate(mRotation,source.getWidth()/2,source.getHeight()/2);
    canvas.drawBitmap(source, matrix, new Paint());
} 
```

# objective-c - 将 NSURLConnecion 委托与 NSURLConnection +sendAsynchronousRequest 一起使用

> ID：13384232
> 
> 赞同：1
> 
> 时间：2012-11-14T17:42:04.400
> 
> 标签：objective-c, ios, nsurlconnection

使用时如何使用 NSURLConnection 委托回调

```
+ (void)sendAsynchronousRequest:(NSURLRequest *)request
                      queue:(NSOperationQueue*) queue
          completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*)) 
```

方法？

我希望能够访问处理完成块的队列上的缓存委托回调。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:17:39.467

你没有。您需要使用 NSURLConnection 方法 initWithRequest:delegate: 而不是 sendAsynchronousRequest 来使用委托回调方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T06:30:01.257

像这样使用它

```
NSURL *url = [NSURL URLWithString:kURL];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL      :   url
                                                        cachePolicy     :   NSURLRequestReloadIgnoringCacheData
                                                        timeoutInterval :   30];
NSString *params = [NSString stringWithFormat:@"param=%d",digits];

[request setHTTPMethod:@"POST"];
[request setHTTPBody:[params dataUsingEncoding:NSUTF8StringEncoding]];

[NSURLConnection sendAsynchronousRequest:request 
                                   queue:[NSOperationQueue mainQueue]  
                       completionHandler:^(NSURLResponse *response, NSData *taxiData, NSError *error) {

 //Snippet - Do sth. (block)

} 
```

希望这有帮助。

编辑：对不起，我没有清楚地阅读你的问题。+sendAsynchronousRequest 不需要委托方法。

EDIT2：或者，也许，[这](https://stackoverflow.com/questions/9270447/how-to-use-sendasynchronousrequestqueuecompletionhandler)会帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:59:16.887

为了使用委托方法，`NSURLConnection`您需要实例化一个`NSURLConnection`变量。自从

```
+ (void)sendAsynchronousRequest:(NSURLRequest *)request
                  queue:(NSOperationQueue*) queue
      completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*)) 
```

是一个超类方法，你不能使用它。

# python - 如何在 Python 中对字符串进行哈希处理？

> ID：13384234
> 
> 赞同：3
> 
> 时间：2012-11-14T17:42:04.387
> 
> 标签：python

我的代码可以输出给定字符列表中所有可能的字符组合，如下所示：

```
def charList():
    charSet = string.ascii_letters + string.digits
    for wordchars in product(charSet, repeat=8):
        print(''.join(wordchars)) 
```

现在我需要将输出字符串转换为 DES 哈希，然后将输出与用户输入进行比较，以查看是否找到任何匹配项。

一直在做一些研究，并没有取得太大进展。所以想知道这里是否有人可以提供帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:53:15.317

如果要散列字符串（而不是加密它们），可以使用内置的[hashlib](http://docs.python.org/2/library/hashlib.html#module-hashlib)模块：

```
>>> import hashlib
>>> m = hashlib.md5()
>>> m.update("Nobody inspects")
>>> m.update(" the spammish repetition")
>>> m.digest()
'\xbbd\x9c\x83\xdd\x1e\xa5\xc9\xd9\xde\xc9\xa1\x8d\xf0\xff\xe9' 
```

**编辑**：正如评论中所说，更喜欢`hashlib.sha256()`今天更安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:44:55.837

快速搜索 DES 和 Python 给了我这些库：

*   [http://pypi.python.org/pypi/pycrypto/2.6](http://pypi.python.org/pypi/pycrypto/2.6)
*   [http://packages.python.org/passlib/lib/passlib.hash.des_crypt.html](http://packages.python.org/passlib/lib/passlib.hash.des_crypt.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T17:49:00.737

[http://docs.python.org/2/library/crypt.html](http://docs.python.org/2/library/crypt.html)

> 平台：Unix
> 
> 该模块实现了 crypt(3) 例程的接口，该例程是基于改进的 DES 算法的单向散列函数；有关详细信息，请参阅 Unix 手册页。可能的用途包括允许 Python 脚本接受用户输入的密码，或尝试用字典破解 Unix 密码。
> 
> 请注意，此模块的行为取决于运行系统中 crypt(3) 例程的实际实现。因此，当前实现中可用的任何扩展也将在此模块上可用
> 
> **crypt.crypt（字，盐）**
> 
> word 通常是在提示符或图形界面中键入的用户密码。salt 通常是一个随机的两个字符的字符串，它将用于以 4096 种方式之一扰乱 DES 算法。salt 中的字符必须在集合 [./a-zA-Z0-9] 中。以字符串形式返回散列密码，该字符串由与 salt 相同的字母组成的字符（前两个字符代表 salt 本身）。
> 
> 由于一些 crypt(3) 扩展允许不同的值，在 salt 中具有不同的大小，因此建议在检查密码时使用完整的加密密码作为 salt。
> 
> 一个说明典型用法的简单示例：
> 
> ```
> import crypt, getpass, pwd 
> def login():
>         username = raw_input('Python login:')
>         cryptedpasswd = pwd.getpwnam(username)[1]
>         if cryptedpasswd:
>             if cryptedpasswd == 'x' or cryptedpasswd == '*':
>                 raise NotImplementedError(
>                     "Sorry, currently no support for shadow passwords")
>             cleartext = getpass.getpass()
>             return crypt.crypt(cleartext, cryptedpasswd) == cryptedpasswd
>         else:
>             return 1 
> ```

# grails - Grails Fields 插件 - 如何让 datePicker 包含约束

> ID：13384242
> 
> 赞同：1
> 
> 时间：2012-11-14T17:42:21.433
> 
> 标签：grails, datepicker, grails-plugin, grails-2.1

Grails 2.1
字段插件 1.3

我试图弄清楚如何自定义 Dates 的字段渲染，以便包括域类中定义的约束（属性）。

根据我找到的[Fields 插件文档](http://freeside.co/grails-fields/guide/customizingFieldRendering.html)和其他信息，我应该能够通过 Dates 的默认 _input.gsp 来做到这一点。
grails-app/views/_fields/date/_input.gsp

目前，Fields 插件没有考虑约束。以下结果是日期字段的年份从 1912 到 2112：birthDate( attributes: ["precision" : "day", "years" : 2016..1970])

即使精度已设置为月份，这也会导致年份、月份和日期的日期字段，我得到 1912-2112 年： expireDate(attributes: ["precision" : "month", "years" : 2007 ..2016])

如何设置 _input.gsp 以使用 datePicker 的约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:08:08.813

我能够找到一个解决方案，它可能不是最好的解决方案，但它适用于我的应用程序。

使用`grails-app/views/_fields/date/_input.gsp`

```
<%@ page defaultCodec="html" %>

<g:if test="${constraints.nullable == true}">
    <g:datePicker name="${property}" value="${value}" precision="${constraints.attributes.precision}" years="${constraints.attributes.years}" default="none" noSelection="['': '']" />
</g:if>
<g:else>
<g:datePicker name="${property}" value="${value}" precision="${constraints.attributes.precision}" years="${constraints.attributes.years}"/>
</g:else> 
```

# jquery - 听在文本框上输入按键

> ID：13384243
> 
> 赞同：3
> 
> 时间：2012-11-14T17:42:25.950
> 
> 标签：jquery, knockout.js

我想在文本框中按回车键时看到警报文本。在 jquery 中，我可以检查每个按键事件，如果是 13 个按键代码，我可以发出警报。

这是一个我可以轻松使用击倒的地方吗？

如何在输入类型文本中按回车键触发功能

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T18:34:59.150

你当然可以。使用[`event`](http://knockoutjs.com/documentation/event-binding.html)绑定为`keypress`事件添加处理程序并执行您想要的操作。处理程序的第二个参数是事件对象。当您检测到输入被按下时，您可以做任何您想做的事情。

```
<input type="text" data-bind="value: message, event: { 'keypress': keypress }"/> 
```

```
function ViewModel(data) {
    var self = this;
    self.message = ko.observable(data.message);

    var KBD_ENTER = 13;
    self.keypress = function (data, event) {
        if (event.which == KBD_ENTER) {
            alert('hey! you pressed enter.');
        }

        // let the event propagate (if you want)
        return true;
    };
} 
```

[演示](http://jsfiddle.net/jeff1203/8fB4t/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T17:45:51.747

使用 jQuery：

```
$("#div").bind("keypress", function(event) {
    if(event.which == 13) {
    event.preventDefault();
        // TRIGGER YOUR FUNCTION
    }
}); 
```

# ios - 根据 UITableViewCell CGRect 添加子视图

> ID：13384244
> 
> 赞同：0
> 
> 时间：2012-11-14T17:42:26.077
> 
> 标签：ios, uitableview, tableview

我正在尝试根据 tableview 的单元格将子视图添加到视图中。我已经完成了这段代码

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    VerseCell *cell = (VerseCell *)[tableView cellForRowAtIndexPath:indexPath];

    rowSelected = indexPath.row;

    CGRect  cellRect = cell.frame;

    UIView *cellView =[[UIView alloc]initWithFrame:CGRectMake(cellRect.origin.x+4, cellRect.origin.y+15, cellRect.size.width-20, 70)];

  UIImageView* background =[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"FavoritePanelBackground"]];
    background.frame =CGRectMake(cellRect.origin.x+4, cellRect.origin.y+15, cellRect.size.width-20, 70);
    [cellView addSubview:background];
    [cellView setBackgroundColor:[UIColor redColor] ];
    UIButton * favoritsB = [[UIButton alloc]initWithFrame:CGRectMake(cellRect.origin.x+10, cellRect.origin.y+15, 60, 40)];
    [favoritsB setBackgroundImage:[UIImage imageNamed:@"MofadalatNormalIcon.png"] forState:UIControlStateNormal];
    [favoritsB setBackgroundImage:[UIImage imageNamed:@"MofadalatTappedIcon.png"] forState:UIControlStateHighlighted];
  [favoritsB addTarget:self action:@selector(favorite) forControlEvents:UIControlEventTouchUpInside];

    [cellView addSubview:favoritsB];

    cellView=nil;

} 
```

问题是..此代码仅在第一行按预期工作..当单击下一个单元格时，它会在预期位置显示主 UIVIew（我用红色背景标记），而它的子视图是真的走得很远......所以我在这里做错了什么......如果这不起作用，还有另一种方法可以解决我正在做的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:26:50.447

你想在哪里添加这些视图？在表格视图单元格内？如果是这样，您永远不会将 cellView 添加为单元格的子视图。如果这就是您要执行的操作，请在 cellView = nil 上方添加此行：

[单元格添加子视图：单元格视图]；

# mfc - 在选项卡控件中嵌入对话框。但它不在选项卡控件中

> ID：13384245
> 
> 赞同：0
> 
> 时间：2012-11-14T17:42:31.007
> 
> 标签：mfc

这是我的来源：

```
void CCCRView::OnInitialUpdate()
{
.
.
.
    VERIFY(dlg1.Create(CaaaqweqweqweDlg::IDD, this));
    VERIFY(dlg1.SetWindowPos(GetDlgItem(IDC_TAB2),100, 100,200, 200, SWP_SHOWWINDOW|SWP_NOSIZE|SWP_NOMOVE));
    dlg1.ShowWindow(SW_SHOW);
} 
```

与：IDC_TAB2：是选项卡控件............ dlg1：我想要嵌入的对话框...... ...... CaaaqweqweqweDlg：类对话框的名称。（CaaaqweqweqweDlg dlg1;）............ …………………………………………………………………………………………………………

这是我的设计：

![在此处输入图像描述](../Images/08f91afdf2d75e212006c541d8f923a0.png)

这是我的结果： ![在此处输入图像描述](../Images/004e3730b1e4a315755e42a9f6c8601b.png)

我们可以看到对话框不在选项卡控件中。来人帮帮我？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:01:53.550

如果要正确放置子对话框，则必须：

*   获取参考选项卡控件位置以正确放置对话框
*   删除 SWP_NOSIZE|SWP_NOMOVE 以应用此位置

它看起来像这样（未经测试）：

```
dlg1.Create(CaaaqweqweqweDlg::IDD, this);

CRect Rect;
GetDlgItem(IDC_TAB2)->GetWindowRect(Rect);
Rect.InflateRect(-10, -10);
ScreenToClient(Rect);

dlg1.SetWindowPos(&wndTop, Rect.left, Rect.top, Rect.Width(), Rect.Height(), SWP_SHOWWINDOW); 
```

这`wndTop`将确保对话框位于任何其他控件之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:38:02.797

对话框或其他控件不是选项卡的子项，它们也是选项卡本身所在的任何窗口的子项。您所做的是使用 CTabCtrl 的 AdjustRect() 来计算选项卡内容的位置。另外，您必须手动管理选项卡更改并处理要执行的操作（通常，这意味着隐藏除您希望成为选项卡一部分的控件之外的所有内容）。

从历史上看，您会在 CTabCtrl 上编写自己的抽象，以便它可以包含控件或窗口，并且您可以将选项卡与其所在的窗口分离。然而，由于 MFC Next 有一个 CMFCTabCtrl 的行为就像你所期望的那样，所以使用它，你会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:16:56.457

您必须将对话框样式更改为`CHILD`。您可能已经`POPUP`设置了样式。

# android - Android ProgressDialog 和 AlertDialog 与 AsyncTask 不兼容？

> ID：13384246
> 
> 赞同：0
> 
> 时间：2012-11-14T17:42:34.597
> 
> 标签：android, android-asynctask, progressdialog, android-alertdialog

我已经隔离了在执行 AsyncTask 时显示 ProgressDialog 然后在执行 onPostExecute 时尝试显示 AlertDialog 时遇到的问题。重现的步骤是：

1-运行任务

2-任务完成前按主页按钮

3-当您假设任务完成时返回应用程序

4-AlertDialog 未显示，并且显示了低亮度（如禁用）屏幕。

我发现将 dialog.dismiss() 行移到 onPostExecute 方法的末尾可以解决问题……但这很奇怪，不是吗？

源代码：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void onClickButton(View view) {
    new MyAsyncTask(this).execute();
}

private class MyAsyncTask extends AsyncTask<Void, Void, Void>
{
    ProgressDialog dialog;
    Context ctx;

    public MyAsyncTask(Context ctx) {
        this.ctx = ctx;
    }

    @Override
    protected void onPreExecute() {
        dialog = new ProgressDialog(ctx);
        dialog.setMessage("Loading");
        dialog.show();
    }

    @Override
    protected Void doInBackground(Void... params) {
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void value) {
        dialog.dismiss();

        AlertDialog.Builder alertbox = new AlertDialog.Builder(ctx);
        alertbox.setNeutralButton("OK", null);
        alertbox.setMessage("Message");
        alertbox.setIcon(android.R.drawable.ic_dialog_alert);
        alertbox.show();

        // dialog.dismiss(); If I remove it from above and put this line here, it will work ok
    }
}
} 
```

# ios - Facebook 登录错误 400

> ID：13384247
> 
> 赞同：0
> 
> 时间：2012-11-14T17:42:36.593
> 
> 标签：ios, xcode, facebook

我以这种方式登录facebook：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

[FBSession openActiveSessionWithReadPermissions:nil
                                   allowLoginUI:YES
                              completionHandler:
 ^(FBSession *session,
   FBSessionState state, NSError *error) {
     [self sessionStateChanged:session state:state error:error];
 }];

return YES;
 }

 - (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                  error:(NSError *)error
  {
switch (state) {
    case FBSessionStateOpen:
        if (!error) {
            // We have a valid session
            //NSLog(@"User session found");

            // Initiate a Facebook instance
            self.facebook = [[Facebook alloc]
                             initWithAppId:FBSession.activeSession.appID
                             andDelegate:nil];

            // Store the Facebook session information
            self.facebook.accessToken = FBSession.activeSession.accessToken;
            self.facebook.expirationDate = FBSession.activeSession.expirationDate;
        }
        break;
    case FBSessionStateClosed:
    case FBSessionStateClosedLoginFailed:
        [FBSession.activeSession closeAndClearTokenInformation];
        // Clear out the Facebook instance
        self.facebook = nil;
        break;
    default:
        break;
}

if (error) {
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:error.localizedDescription
                              delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
    [alertView show];
}
 }

 - (BOOL)application:(UIApplication *)application
         openURL:(NSURL *)url
   sourceApplication:(NSString *)sourceApplication
      annotation:(id)annotation {
// attempt to extract a token from the url
self.openedURL = url;
// attempt to extract a token from the url
return [FBSession.activeSession handleOpenURL:url];
 } 
```

...我收到错误：错误：HTTP 状态代码：400

我已经在 plist 中设置了 URL 方案。为什么我会得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:36:08.030

检查应用程序仪表板。查看您的基本设置。您的沙盒模式可能设置为已启用。当您的应用退出沙盒模式时，错误应该会消失。

# ruby-on-rails - 我将如何编写等效项。Rails 中的这个查询？

> ID：13384250
> 
> 赞同：0
> 
> 时间：2012-11-14T17:42:56.957
> 
> 标签：ruby-on-rails

我想使用此查询（在[此处](http://www.movable-type.co.uk/scripts/latlong-db.html)找到）查询 rails 中的表：

```
 Select ID, Postcode, Lat, Lon, 
       acos(sin($lat)*sin(radians(Lat)) + cos($lat)*cos(radians(Lat))*cos(radians(Lon)-$lon))*$R As D
From MyTable 
Where acos(sin($lat)*sin(radians(Lat)) + cos($lat)*cos(radians(Lat))*cos(radians(Lon)-$lon))*$R < $rad 
```

（查找位于给定点一定半径内的所有点）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:51:39.177

答案是使用[GeoKit-Rails](http://geokit.rubyforge.org/)（或[GeoKit-Rails3](https://github.com/jlecour/geokit-rails3)）。然后您的查询将如下所示：

```
Store.find(:all, :origin => @somewhere, :within=>10) 
```

或 Rails3 版本：

```
Location.within(5, :origin => @somewhere) 
```

`@somewhere`点 ( `[37.792,-122.393]`)、邮编、地址等在哪里？

# actionscript-3 - AS3 图像从 xml 加载

> ID：13384254
> 
> 赞同：0
> 
> 时间：2012-11-14T17:43:14.257
> 
> 标签：actionscript-3

我有这段代码可以从 xml 加载我的数据。我想使用这些数据来播放一些声音并加载 3 张图像。

```
function loadthexml():void {

    var numRecs:int = xmlContent.paths.length();
    var t_name: String;
    var t_sound: String;
    var t_age: String;
    var t_place: String;
    var t_everyday: String;
    var t_youwill: String;
    var t_pic1: String;
    var t_pic2: String;
    var t_pic3: String;
    var i:int;

    for (i=0; i<numRecs; i++) {

    t_name=String(xmlContent.paths[i].thename); 
    txtOutput2.text = t_name;

    t_sound=String(xmlContent.paths[i].soundpath);  
    txtOutput3.text = t_sound;

    t_age=String(xmlContent.paths[i].theage);   
    txtOutput4.text = t_age;

    t_place=String(xmlContent.paths[i].theplace);   
    txtOutput5.text = t_place;

    t_everyday=String(xmlContent.paths[i].everyday);    
    txtOutput6.text = t_everyday;

    t_youwill=String(xmlContent.paths[i].youwill);  
    txtOutput7.text = t_youwill;

    t_pic1=String(xmlContent.paths[i].t_pic1);  
    t_pic2=String(xmlContent.paths[i].t_pic2);  
    t_pic3=String(xmlContent.paths[i].t_pic3);

    pic1holder.addChild(t_pic1);
pic2holder.addChild(t_pic2);
pic3holder.addChild(t_pic3);

    } 
```

所以我有 3 个实例名称为 pic1holder - picholder - pic3holder 的电影剪辑，但我的代码无法加载这三张图片。

我哪里错了？

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:38:33.113

好的，我解决了：

```
var myLoader:Loader = new Loader();
var fileRequest:URLRequest = new URLRequest(t_pic1);
myLoader.load(fileRequest);
pic1holder.addChild(myLoader);

var myLoader2:Loader = new Loader();
var fileRequest2:URLRequest = new URLRequest(t_pic2);
myLoader2.load(fileRequest2);
pic2holder.addChild(myLoader2);

var myLoader3:Loader = new Loader();
var fileRequest3:URLRequest = new URLRequest(t_pic3);
myLoader3.load(fileRequest3);
pic3holder.addChild(myLoader3); 
```

谢谢大家的回复！

# c# - Bloomberg .NET API CAS 权限集

> ID：13384268
> 
> 赞同：0
> 
> 时间：2012-11-14T17:43:58.137
> 
> 标签：c#, security, bloomberg

我正在开发一个使用 Bloomberg API 并通过其门户使用的应用程序。这是一个 .NET4.0 应用程序。它未能通过安全验证，抛出如下异常：

```
System.Windows.Markup.XamlParseException occurred
  Message='Set connectionId threw an exception.' Line number '6' and line position '14'.
  Source=PresentationFramework
  LineNumber=6
  LinePosition=14
  StackTrace:
       at System.Windows.Markup.XamlReader.RewrapException(Exception e, IXamlLineInfo lineInfo, Uri baseUri)
       at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
       at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
       at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
       at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
       at Application2.MainView.InitializeComponent()
       at Application2.MainView..ctor()
  InnerException: System.IO.FileLoadException
       Message=Could not load file or assembly 'MyCustomDll, Version=1.5.4700.39806, Culture=neutral, PublicKeyToken=b55dd9efe817e823' or one of its dependencies. Failed to grant minimum permission requests. (Exception from HRESULT: 0x80131417)
       Source=Application2
       FileName=MyCustomDll, Version=1.5.4700.39806, Culture=neutral, PublicKeyToken=b55dd9efe817e823
       StackTrace:
            at Application2.MainView.System.Windows.Markup.IComponentConnector.Connect(Int32 connectionId, Object target)
            at MS.Internal.Xaml.Runtime.ClrObjectRuntime.SetConnectionId(Object root, Int32 connectionId, Object instance)
       InnerException: System.Security.Policy.PolicyException
            Message=Required permissions cannot be acquired.
            Source=mscorlib
            StackTrace:
                 at System.Security.SecurityManager.ResolvePolicy(Evidence evidence, PermissionSet reqdPset, PermissionSet optPset, PermissionSet denyPset, PermissionSet& denied, Boolean checkExecutionPermission)
                 at System.Security.SecurityManager.ResolveCasPolicy(Evidence evidence, PermissionSet reqdPset, PermissionSet optPset, PermissionSet denyPset, PermissionSet& denied, Int32& securitySpecialFlags, Boolean checkExecutionPermission) 
```

在彭博文件中，符合安全标准的指导方针非常模糊，说：

> 应用门户应用允许的 CAS 权限：
> 1\. IsolatedStorageFilePermission, Allowed="AssemblyIsolationByUser" UserQuota="2048000"
> 2\. SecurityPermission, Flags="Execution, ControlThread, SerializationFormatter"
> 3\. UIPermission, Unrestricted="true"
> 4\. MediaPermission, Audio= "NoAudio" Video="NoVideo" Image="SafeImage"
> 5\. PrintingPermission, Level="DefaultPrinting"

失败的 DLL（我们有源代码）已在异常中重命名为“MyCustomDll.dll”。此 Dll 不使用不安全代码或平台调用，仅使用 .NET4.0 和 WPF。

我想知道有什么方法可以通过检查 .NET 程序集的安全权限来测试*为什么会失败？*

# linux - 使用 grep 在文件内容中搜索行首的特定字符数

> ID：13384269
> 
> 赞同：-1
> 
> 时间：2012-11-14T17:44:07.857
> 
> 标签：linux, shell

我在文件中有以下数据

```
Muhammad,Ali    House 12 Mazhar Colony Rawalpindi   0333-5438855
Bushra,Qadir    Gulberg Society Lahore  0234-5321998
Muhammad,Imtiaz Sector E-11/4 Islamabad 0331-4320988
Ehtasham Ul,Haq Chinar House Islamabad  0432-2294712
Summaya,Mumtaz  NUST Hostel-3 Islamabad 0321-7659832
Junaid,Riaz Sadar Road Rawalpindi   0331-5332222 
```

我需要使用`grep`. 我尝试了许多不同的代码，但运气还没有对我有利。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:49:36.790

您可以尝试以下方式：

```
grep -E '^\w{5},\w{3,4}\s' 
```

文件内容：

```
Muhammad,Ali    House 12 Mazhar Colony Rawalpindi   0333-5438855  
Bushr,Qadi    Gulberg Society Lahore  0234-5321998
Muham,Imt Sector E-11/4 Islamabad 0331-4320988
Ehtasham Ul,Haq Chinar House Islamabad  0432-2294712
Summaya,Mumtaz  NUST Hostel-3 Islamabad 0321-7659832
Junaid,Riaz Sadar Road Rawalpindi   0331-5332222 
```

输出：

```
Bushr,Qadi    Gulberg Society Lahore  0234-5321998
Muham,Imt Sector E-11/4 Islamabad 0331-4320988 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:39:49.070

> 我尝试了许多不同的代码，但运气还没有对我有利。

运气与它无关。您正在搜索五个字母，后跟一个逗号，然后是三个或四个字母，然后是一个空格。

```
^    is the beginning of a line
\w   is "a letter"
{n}  means "this many repetitions"
\s   is "a whitespace" (space, tab, nonbreaking space etc.) 
```

您只需将它们放在一起并获得正则表达式：

```
^\w{5},\w{3,4}\s 
```

# ruby-on-rails - OmniAuth 创建后回调？

> ID：13384272
> 
> 赞同：0
> 
> 时间：2012-11-14T17:44:19.597
> 
> 标签：ruby-on-rails, omniauth

当使用 OmniAuth（任何策略）创建新用户时，我必须运行一些代码（订阅外部邮件列表）。该设置与 Ryan Bates 的截屏视频几乎相同：

[http://railscasts.com/episodes/241-simple-omniauth?view=asciicast](http://railscasts.com/episodes/241-simple-omniauth?view=asciicast)

到目前为止，我还没有找到一个合适的点来挂钩中间件的代码。当控制权返回到 Rails 级别时，数据被传递为`user = User.from_omniauth(env["omniauth.auth"])`，没有任何东西表明用户是否刚刚创建。

解决方法可能是用户上的一个标志，该标志默认为 false，并在 session#create 中设置为 true。但是必须有更好的方法，不是吗？:-)

感谢您的提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:38:17.333

您可以使用该`:params`选项来构建 URL，如下所示

```
omniauth_authorize_path(:user, :facebook, {var: 'value', var2: 'value2'} 
```

然后在回调中，您将返回 request.env['omniauth.params']

这里的一些例子 - [https://github.com/intridea/omniauth/issues/390](https://github.com/intridea/omniauth/issues/390)

同样在这里-[将随机 url 参数传递给 OmniAuth](https://stackoverflow.com/questions/7999907/passing-random-url-params-to-omniauth)

# javascript - VideoJS：保持控件可见

> ID：13384276
> 
> 赞同：13
> 
> 时间：2012-11-14T17:44:29.620
> 
> 标签：javascript, html, video.js

我喜欢videoJS，但找不到让控制栏始终可见的方法（播放时不会淡出）。我搜索了相关信息并找到[了一个关于它的主题](http://help.videojs.com/discussions/questions/417-show-video-controls-all-the-time-not-just-on-mouse-hover)，他们建议像这样覆盖函数隐藏：

> /*覆盖控件自动隐藏fn* /
> 
> > 隐藏 = function(){ /* 什么都没有 */ };

但这可能已经过时了，因为它在这里不起作用。（版本 3.2.0）

有谁知道我怎么能做到这一点？

非常感谢 ！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-06-16T00:20:31.170

只是这里多了一点死灵法...

虽然 Peter Kitts 的最后一个答案可以正常工作，但另一个选项是将 设置`inactivityTimeout`为 0，这将完全禁用不活动超时。

```
<link href="http://vjs.zencdn.net/4.12/video-js.css" rel="stylesheet">
<script src="http://vjs.zencdn.net/4.12/video.js"></script>

<video id="my_video_1" class="video-js vjs-default-skin" controls preload="auto" width="640" height="268" 
  data-setup='{ "inactivityTimeout": 0 }'>
  <source src="http://vjs.zencdn.net/v/oceans.mp4" type='video/mp4'>
  <source src="http://vjs.zencdn.net/v/oceans.webm" type='video/webm'>
</video>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-02T08:48:25.050

我知道这个问题现在已经有几年了，但我也需要这样做，并且上面的答案使控件保持在视频的顶部。我在自己的 CSS 文件中使用了以下 CSS 来覆盖 videoJS 样式，以在视频开始播放后保持控件可见并将它们保持在视频下方。

```
.vjs-default-skin.vjs-has-started .vjs-control-bar {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  bottom: -3.4em !important;
  background-color: rgba(7, 20, 30, 1) !important;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T11:09:10.497

谢谢 ！我找到了另一个解决方案，因为我想避免破解原始文件，添加这是我的 CSS ：

```
.vjs-fade-in,.vjs-fade-out {
visibility: visible !important;
opacity: 1 !important;
transition-duration: 0s!important;
} 
```

谢谢 ！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T18:12:13.840

从video-js.css的and类中注释掉/删除`visibility:hidden`and`opacity:0`规则。`.vjs-fade-out``.vjs-default-skin .vjs-controls`

```
.vjs-fade-out {
    /*visibility: hidden!important;
    opacity: 0!important;*/
    -webkit-transition: visibility 0s linear 1.5s,opacity 1.5s linear;
    -moz-transition: visibility 0s linear 1.5s,opacity 1.5s linear;
    -ms-transition: visibility 0s linear 1.5s,opacity 1.5s linear;
    -o-transition: visibility 0s linear 1.5s,opacity 1.5s linear;
    transition: visibility 0s linear 1.5s,opacity 1.5s linear
}

.vjs-default-skin .vjs-controls {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    margin: 0;
    padding: 0;
    height: 2.6em;
    color: #fff;
    border-top: 1px solid #404040;
    background: #242424;
    background: -moz-linear-gradient(top,#242424 50%,#1f1f1f 50%,#171717 100%);
    background: -webkit-gradient(linear,0% 0,0% 100%,color-stop(50%,#242424),color-stop(50%,#1f1f1f),color-stop(100%,#171717));
    background: -webkit-linear-gradient(top,#242424 50%,#1f1f1f 50%,#171717 100%);
    background: -o-linear-gradient(top,#242424 50%,#1f1f1f 50%,#171717 100%);
    background: -ms-linear-gradient(top,#242424 50%,#1f1f1f 50%,#171717 100%);
    background: linear-gradient(top,#242424 50%,#1f1f1f 50%,#171717 100%);
    /*visibility: hidden;
    opacity: 0*/
} 
```

# c# - 使用实体框架 Codefirst 和 Nunit 进行通用存储库的集成测试

> ID：13384278
> 
> 赞同：1
> 
> 时间：2012-11-14T17:44:42.030
> 
> 标签：c#, entity-framework, ef-code-first, nunit, integration-testing

我使用通用存储库和工作单元模式以及实体框架代码优先构建了一个数据访问层。对存储库进行单元测试对我来说似乎毫无价值，所以我决定改为创建一些集成测试。为此，我创建了一个专门用于集成测试的项目，并添加了一个自定义数据库初始化程序，该初始化程序将使用一些测试数据为数据库播种，当然使用不同的连接字符串。

我的问题是：如何以及何时在测试代码中初始化数据库？我正在使用 Nunit。另外我想知道 - 由于我的存储库使用通用实现 - 我应该测试我的工作单元中的每个存储库还是只选择一个随机的？

我的代码如下所示：

```
public interface IRepository<T> where T:class, IEntity
{
    void Add(T entity);
    T GetById(int id);
    IQueryable<T> All();
    IQueryable<T> Where(Expression<Func<T, bool>> filter);
    void Update(T entity);
    void Delete(T entity);
}

 public interface IUnitOfWork : IDisposable
 {
        IRepository<Album> Albums { get; }
        IRepository<Genre> Genres { get; }
        IRepository<Artist> Artists { get; }
        void Commit();
  }  

public class EFRepository<T> : IRepository<T> where T : class,IEntity
{
    private DbContext _context;
    private DbSet<T> _set;

    public EFRepository(IMvcStoreContext context)
    {
        if (context == null)
            throw new NullReferenceException("context is null");

        _context = context as DbContext;

        _set = _context.Set<T>();

    }

    public void Add(T newEntity)
    {
        _set.Add(newEntity);
    }

    public T GetById(int id)
    {
        return _set.Find(id);
    }

    public IQueryable<T> All()
    {
        return _set;
    }

    public IQueryable<T> Where(Expression<Func<T, bool>> filter)
    {
        return _set.Where(filter);
    }

    public void Update(T entity)
    {
        throw new NotImplementedException("method not implemented");
    }

    public void Delete(T entity)
    {
        _set.Remove(entity);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:28:58.693

我来这里是为了寻找你第二个问题的答案，所以我没有那个答案。对于数据库测试，我使用[NDBUnit](http://code.google.com/p/ndbunit/wiki/QuickStartGuide)。我将设置和拆卸放在 TestFixureXXX 方法中，因此每次测试只需为数据库播种一次；这使得慢速测试运行得更快一些。如果您需要有关 NDBUnit 的帮助，请告诉我。

埃里克

# jquery - 如何在 jqgrid 中从服务器加载所有记录

> ID：13384281
> 
> 赞同：0
> 
> 时间：2012-11-14T17:44:51.177
> 
> 标签：jquery, jqgrid

我有一个从服务器获取数据的网格。我不需要在这个网格上分页，我希望一次加载所有记录。我尝试过使用`loadonce`属性，但它不起作用。我怎样才能做到这一点？

这是我的网格

```
jQuery("#rowed4").jqGrid({
    url:'server.php?q=2',
    datatype: "json",
    colNames: ['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'], 
    colModel: [
        {name:'id',index:'id', width:55}, 
        {name:'invdate',index:'invdate', width:90, editable:true}, 
        {name:'name',index:'name', width:100,editable:true}, 
        {name:'amount',index:'amount', width:80, align:"right",editable:true}, 
        {name:'tax',index:'tax', width:80, align:"right",editable:true}, 
        {name:'total',index:'total', width:80,align:"right",editable:true}, 
        {name:'note',index:'note', width:150, sortable:false,editable:true}
    ], 
    rowNum: 10,
    rowList: [10, 20, 30],
    pager: '#prowed4',
    sortname: 'id',
    viewrecords: true, 
    sortorder: "desc",
    editurl: "server.php",
    caption: "Full control"
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T18:44:57.970

如果不使用`loadonce: true`服务器应该*只返回第一页数据*。在您的情况下，您使用`rowNum: 10`. 所以服务器应该返回最多 10 条记录。所以服务器应该根据jqGrid发送的参数返回结果的子集给`page`服务器`rows`

如果使用`loadonce: true`服务器应该返回*所有记录*。服务器应该*忽略* jqGrid 发送的参数`page`。`rows`jqGrid 会将所有数据保存在内部参数中`data`，`_index`并将在本地为您实现分页、排序和过滤/搜索（无需向服务器发出任何额外请求）。

其余的应该自动工作。

# .net - 如何将同步文件图标添加到特定文件夹中的文件？

> ID：13384282
> 
> 赞同：1
> 
> 时间：2012-11-14T17:44:54.317
> 
> 标签：.net, vb.net, .net-4.0, directory

我正在创建一个类似于 Dropbox 的程序，用于将文件内容与服务器同步。我需要添加 subversion 和 Dropbox 在同步文件时添加到文件中的迷你 sycing 图标。我不知道该怎么做。我假设它弄乱了 thumbs.db 文件或其他东西。（正在同步、未同步、已同步、不可同步 - 4 个不同的图标）

我将 VB.net 与最新的 Windows 框架（4 或更少）一起使用。

# email - ant 任务发送电子邮件 - 邮件类型不支持嵌套的“附件”元素

> ID：13384284
> 
> 赞同：3
> 
> 时间：2012-11-14T17:44:57.487
> 
> 标签：email, ant, task

Ant 任务发送电子邮件 - 邮件类型不支持嵌套的“附件”元素。

我正在使用 maven 使用 TestNG 运行测试自动化脚本。我正在使用 maven antrun 插件在附件中发送带有测试 NG 报告的电子邮件。

不幸的是，我无法发送带有附件的电子邮件并收到错误消息

**嵌入式错误：mail> 类型不支持嵌套的“附件”元素。**

这是我的 pom.xml

```
 <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.1</version>
            <executions>
                <execution>
                    <configuration>
                        <tasks>
                            <mail
                                    tolist=""
                                    from=""
                                    subject="Report"
                                    mailhost=""
                                    mailport=""
                                    user=""
                                    password="">
                                <message>Please find the Attached automation report.
                                      Note: This is an automatic generated e-mail
                                </message>
                                <attachments>
                                    <fileset dir="target">
                                        <include name="**/*.html"/>
                                    </fileset>
                                </attachments>
                            </mail>
                           </tasks>
                    </configuration>
                    <phase>test</phase>
                    <id>SentEmail</id>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:55:11.610

您需要将 java 激活框架和 java 邮件 jar 添加到您的类路径中。它们不附带 Ant 或 Java，可以在[这里下载](http://www.oracle.com/technetwork/java/javamail/index.html)

下载 2 个 jar，将它们添加到您的 ant 类路径中，它应该可以正常工作。

顺便说一句，Ant 文档在[邮件任务](http://ant.apache.org/manual/Tasks/mail.html)的手册页上[告诉了](http://ant.apache.org/manual/install.html#librarydependencies)您这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:59:28.853

Maven邮递员插件对我来说很好用。谢谢你的帮助。

```
 <plugin>
            <groupId>ch.fortysix</groupId>
            <artifactId>maven-postman-plugin</artifactId>
            <executions>
                <execution>
                    <id>send a mail</id>
                    <phase>test</phase>
                    <goals>
                        <goal>send-mail</goal>
                    </goals>
                    <inherited>false</inherited>
                    <configuration>
                        <from>xxxxxxxx</from>
                        <subject>Regression Report</subject>
                        <failonerror>true</failonerror>
                        <mailhost>xxxxx</mailhost>
                        <mailport>xxx</mailport>
                        <mailuser>xxxxxx</mailuser>
                        <mailpassword>xxxxx</mailpassword>
                        <htmlMessage>Please find the Attached automation report.
                            Note: This is an automatic generated e-mail</htmlMessage>
                        <receivers>
                            <receiver>email@email.com</receiver>
                        </receivers>
                        <fileSets>
                            <fileSet>
                                <directory>${basedir}/target</directory>
                                <includes>
                                    <include>**/emailable-report.html</include>
                                   <!-- <include>**/*.zip</include> -->
                                </includes>
                            </fileSet>
                        </fileSets>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

# perl - 不推荐使用哈希作为参考 - Perl

> ID：13384287
> 
> 赞同：1
> 
> 时间：2012-11-14T17:45:10.700
> 
> 标签：perl, hash, reference, deprecated

我正在尝试在我的 Windows 平台上安装 scmbug。我在以下方法中将哈希作为参考错误。查看“HERE”注释以了解它发生的位置。

我应该用其中的 $mail 替换每个 %mail 吗？

我试过这个，但有其他错误。说

全局符号“$mail”需要明确的包名

如何解决这个问题？

```
sub mail_notification_send_mail {
   my $self = shift;
   my ($request, $subject, $message, $mailing_list) = ( @_ );
   my %mail;

   # Set values. This permits users to override the default behavior
   # of Mail::Sendmail
   %mail = \%{ $request->{ policies }->{ mail_notification }->{ mail_settings } };
   %mail->{ 'X-Mailer' } = "Mail::Sendmail version $Mail::Sendmail::VERSION";  HERE
   %mail->{ Subject } = $subject; HERE
   %mail->{ Message } = $message; HERE

   #
   # Since we just reset %mail to values, we haven't really picked up
   # the To,From,Reply-To that were computed. We do this next
   #

   # Don't blindly ignore the To list that was computed
   my $mailing_list_to = $self->emails_to_csv( $mailing_list->{ To } );
   %mail->{ To } = $mailing_list_to; HERE

   # Don't blindly ignore the From list that was computed
   my $mailing_list_from = $self->emails_to_csv( $mailing_list->{ From } );
   %mail->{ From } = $mailing_list_from; HERE

   # Don't blindly ignore the 'Reply-To' list that was computed
   my $mailing_list_replyto = $self->emails_to_csv( $mailing_list->{ 'Reply-To' } );
   %mail->{ 'Reply-To' } = $mailing_list_replyto; HERE

   if ( !sendmail(%mail) ) {
   my $msg = "Sending mail on " . $request->{ name } .
       " failed. Log error was:\n" . $Mail::Sendmail::error . "\n";
   $request->add_result(1, $msg);
   }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:46:26.447

文档：[perldoc perlref](http://perldoc.perl.org/perlref.html)

你有一个 hashref，但你正在使用一个 hash 的印记。全部替换`%mail`为`$mail`。

你有：

```
%mail = \%{ $request->{ policies }->{ mail_notification }->{ mail_settings } }; 
```

告诉 perl 取消对哈希的`\%`引用并返回一个 hashref，但是您将它分配给一个哈希。我敢打赌你也会在那里收到警告。该行应该是：

```
$mail = $request->{ policies }->{ mail_notification }->{ mail_settings }; ## change all `%mail` to `$mail` 
```

或者

```
%mail = %{ $request->{ policies }->{ mail_notification }->{ mail_settings } }; ## change all `%mail->{something}` to `$mail{something}`. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:46:32.393

用于`$mail->{ ... }`取消引用。但是在您的情况下，您有一个哈希`%mail`而不是引用，因此访问其成员的正确方法是没有取消引用运算符`->`。一个`$mail{...}`就足够了。

# matlab - 是否可以在matlab文件夹内的文件中搜索特定的表达式/条目？

> ID：13384294
> 
> 赞同：2
> 
> 时间：2012-11-14T17:45:38.617
> 
> 标签：matlab

是否有命令在matlab中搜索“文件夹中存在的文件中的特定条目”？就像我想在文件夹 A 中的所有文件中搜索单词“hello”一样。

```
allFiles = dir( 'G:\folder\myfilename' );
allNames = { allFiles.name }; 
```

只允许我在特定文件夹中搜索特定文件。:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:47:52.900

您可以使用通配符：

```
 allFiles = dir( 'G:\folder\myfilename\*hello*.*' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:39:02.097

请参阅[此答案](https://stackoverflow.com/a/2654459/201800)以获取目录中所有文件的列表。

然后您可以使用[`regexpi`](http://www.mathworks.com/help/matlab/ref/regexpi.html)来识别任何包含该字符串的文件`'hello'`。

或者正如彼得 D 指出的那样：

> 我发现将正则表达式内置到函数中很有用。
> 
> ```
> if ~isempty(fileList)     
>    fileList = cellfun(@(x) fullfile(dirName,x),'UniformOutput',false);
>    matchstart =  regexp(fileList, pattern); 
>    fileList = fileList(~cellfun(@isempty,  matchstart));
> end 
> ```
> 
> 并将函数签名更改为
> 
> `getAllFiles(dirName, pattern)`（也在倒数第二行）

# c - 在 C 中读取输入文件

> ID：13384296
> 
> 赞同：-3
> 
> 时间：2012-11-14T17:45:42.387
> 
> 标签：c, file-io

我需要使用 C 编程语言从输入文件中读取数据来完成我的一项任务。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    char *input = readFromFile(argv);
    return 0;
}

char *readFromFile(char *argv[])
{
    FILE *fp;
    fp = fopen(argv[1],"r");
    char *input, c;
    int i = 0;

    while(!feof(fp))
    {
        c = fgetc(fp);
        input[i++] = c;
    }
    fclose(fp);
    return input;
} 
```

我想在另一个函数中执行此读取操作，而不是在函数中`main()`。我试过了，但做不到。

当我尝试使用上面的代码执行此操作时，我收到一条错误消息，内容为：

> 冲突的类型`readFromFile()`

我该如何解决这个错误并做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:46:37.107

您必须`readFromFile`在使用前声明。最好的方法是添加一个原型：

```
char *readFromFile(char *argv[]); /* note that the identifier is useless here */ 
```

**注意**：顺便说一句，您的源代码中还有很多其他错误。主要的一个是你没有为`input`. 因此，您将尝试取消引用未初始化的指针：这会导致未定义的行为。由于您要返回指针，因此您需要使用动态分配。

```
#include <stdlib.h>
char *input = malloc(SIZE); 
```

此外，您的使用`feof`是错误的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-14T18:00:56.763

首先，您可以在这些之间进行选择：

**1**、声明函数原型；
**2.**在main之前声明函数。

通过这种方式，函数在 main 中被识别。为了快速，我总是在 main 之前声明函数。在 readFromFile 中，你没有分配你需要的内存，为你修复它：

```
#include <stdio.h>
#include <stdlib.h>

char *readFromFile(char *argv[])
{
    FILE *fp;
    fp = fopen(argv[1],"r");
    char *input, c;
    int i = 0;
    size_t size=100*sizeof(char);
    input=(char*)malloc(size);

    while( (c = fgetc(fp)) != EOF )
    {
        if(++i == size)
        {
            size+= 100*sizeof(char);
            input=(char*)realloc(input,size);
        }
        input[i-1] = c;
    }
    fclose(fp);
    return input;
}

int main(int argc, char *argv[])
{
    char *input = readFromFile(argv);
    return 0;
} 
```

# php - 如何更改 jquery 对话框中数据表中的单元格？

> ID：13384297
> 
> 赞同：0
> 
> 时间：2012-11-14T17:45:48.163
> 
> 标签：php, javascript, jquery, html, datatables

所以我有一个独特的对话框打开，点击一个按钮。在对话框中，我有一个数据表（在加载原始页面时预加载）。现在我要做的是在用户单击 jquery 对话框中的按钮时更改单元格文本。我给了单元格一个唯一的 id 和所有内容，但由于某种原因，我无法通过 javascript 中的回调更新单元格中的文本。我已经能够在没有对话框的情况下做到这一点，但由于某种原因我不能在对话框中做到这一点。有谁知道为什么？我使用的简单javascript是

```
document.getElementById('boldStuff_' id).innerHTML = 'gasgsadg'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:56:45.353

它应该是：

```
document.getElementById('boldStuff_' + id).innerHTML = 'gasgsadg'; 
```

请注意缺少的“+”，它在此实例中用于将字符串与**id**的值连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:47:30.637

好的，如果其他人有同样的问题，那就有答案了。好的，所以基本上所有弹出窗口都被写入 DOM，因此我对每个弹出窗口中的行使用相同的 ID。我所做的只是添加第二个标识符：

```
$('#groups_check_'+result[i]+'_'+grppk).addClass('ui-icon ui-icon-check'); 
```

# c# - 最高公因数 C#

> ID：13384309
> 
> 赞同：0
> 
> 时间：2012-11-14T17:46:37.027
> 
> 标签：c#

我有当前的编码，我觉得它好像接近我需要的，但我似乎无法让它为我想要的工作。我试图让它输出输入的两个数字的最高公因数。

```
 i = myInt;

            {
                if (myInt % i == 0 && myInt2 % i == 0)
                {
                    Console.Write("Your GCF is...");
                    Console.Write("{0} ", i);
                    Console.ReadLine();

                }
                else
                    i--;
                goto;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:22:23.650

正如其他人在评论中所说，你真的应该避免`goto`陈述，因为它们是不好的做法，特别是当你学习你的大学编程课程时（通常应该符合结构化编程）。而是使用`while`带有两个条件的循环（或任何其他），如您在示例中所见。另外，我认为您应该从较小的数字开始搜索（第一个输入的不需要较小的数字），这在性能方面有一点改进。这是代码：

```
static void Main(string[] args)
{    
    string myInput;
    int myInt;
    string myInput2;
    int myInt2;
    int i;

    Console.Write("Please enter a number: ");
    myInput = Console.ReadLine();
    myInt = Int32.Parse(myInput);

    Console.Write("Please enter another number: ");
    myInput2 = Console.ReadLine();
    myInt2 = Int32.Parse(myInput2);

    i = myInt > myInt2 ? myInt2 : myInt;
    bool found = false;
    while(!found && i>0)
    {
        if (myInt % i == 0 && myInt2 % i == 0)
        {
            Console.Write("Your GCF is...");
            Console.Write("{0} ", i);
            Console.ReadLine();
            found = true;
        }
        else
            i--;
    }
} 
```

**编辑：**感谢@Servy，我包含了其他可能的解决方案

```
bool found = false;
for( i = Math.Min(myInt, myInt2); !found && i>0; i--)
{
    if (myInt % i == 0 && myInt2 % i == 0)
    {
        Console.Write("Your GCF is...");
        Console.Write("{0} ", i);
        Console.ReadLine();
        found = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T17:51:57.617

```
 {
label:
            if (myInt % i == 0 && myInt2 % i == 0)
            {
                Console.Write("Your GCF is...");
                Console.Write("{0} ", i);
                Console.ReadLine();

            }
            else
                i--;
            goto label;
        } 
```

会做。然而，这是一个非常糟糕的主意。而是学习如何使用`while`.

# php - 数组中的 PHP 搜索

> ID：13384314
> 
> 赞同：0
> 
> 时间：2012-11-14T17:46:58.760
> 
> 标签：php, arrays

我有一个名为 results_array 的数组：

```
var_dump($results_array):
0 => php,mysql,jquery,ruby,html,css,lamp
1 => mouse,keyboard,laptop,pad
2 => table,sofa,caption
3 => control,television,control television,television control 
```

我有一个**$q**代表查询，我想在 $results_array 中搜索并删除与查询无关的项目，所以如果我设置`$q=a`然后结果数组应该是这样的：

```
0 => lamp
1 => keyboard,laptop,pad
3 => table,sofa,caption
4 => empty 
```

现在，我想把上面的结果放在results_array的每个索引中，最后results_array应该是：

```
0 => lamp
1 => keyboard
2 => laptop
3 => pad
4 => table
5 => sofa
6 => caption 
```

我的代码是：

```
foreach($results_array as &$row) {
            $row = explode(',', $row);
        }
        unset($row);
        $results_array = call_user_func_array('array_merge_recursive', $results_array);

        foreach ($array as $k => $v) {
            if(strpos($v, 'a') === false) unset($array[$k]);
        }
        $results_array = array_values($results_array); 
```

这正是我需要的，现在我设置了我的 $q = 'tele co'，现在在应用上面的代码集 $ = 'tele co' 之后，它返回 emtpy，但它不应该是因为：

```
3 => control,television,control television,television control 
```

“控制电视，电视控制”应该返回，但不是，所以我将代码更改为：

```
foreach($results_array as &$row) {
            $row = explode(',', $row);
        }
        unset($row);
        $results_array = call_user_func_array('array_merge_recursive', $results_array);
// HERE IS CHANGED ****
        $q = preg_split('/\s+/', trim($q));
        foreach ($results_array as $key => $value) {
            foreach ($q as $query) {
                if (stripos($value, $query) === false) {
                    unset($results_array[$key]);
                    break;
                }
            }
        }
// ****
        $results_array = array_values($results_array); 
```

它仍然无法正常工作，通过传递 $q = 'tele co' 我需要返回 'television control' 和 'control TV'，因为他们都得到了 $q 中的 'tele' AND 'co'

我感谢任何形式的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:51:33.053

**假设：**

```
$q = 'a c';
$results_array = array(
    'php,mysql,jquery,ruby,html,css,lamp',
    'mouse,keyboard,laptop,pad',
    'table,sofa,caption',
    'control,television,control television,television control'
); 
```

**解决方案：**

```
$result = array_map(function ($element) use ($q) {
    $words = explode(',', $element);
    return array_filter($words, function ($word) use ($q) {
        $qwords = explode(' ', $q);
        return count(array_filter($qwords, function ($qword) use ($word) {
            return strpos($word, $qword) !== false;
        })) > 0;
    });
}, $results_array); 
```

**输出** `print_r($result);`**：**

```
Array
(
    [0] => Array
        (
            [5] => css
            [6] => lamp
        )

    [1] => Array
        (
            [1] => keyboard
            [2] => laptop
            [3] => pad
        )

    [2] => Array
        (
            [0] => table
            [1] => sofa
            [2] => caption
        )

    [3] => Array
        (
            [0] => control
            [2] => control television
            [3] => television control
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:51:43.800

如果我正确理解您的问题，您正在寻找这个：

```
$result = array();
$parts = explode( ' ', $q);
foreach($results_array as $words){
     foreach( explode(',', $words) as $word){
         $good = true;

         foreach( $parts as $p){
             if( strpos( $word, $p) === false){
                 $good = false;
                 break;
             }
         }

         if( $good){
            $result[] = $word;
         }
     }
} 
```

# foreign-keys - Entity Framework 5 + Ninject：外键的 AutoDetectChanges 问题

> ID：13384315
> 
> 赞同：2
> 
> 时间：2012-11-14T17:47:01.607
> 
> 标签：foreign-keys, ninject, repository-pattern, entity-framework-5, unit-of-work

我正在尝试将洋葱模式与通用存储库 + 工作单元 + Entity Framework 5 + Ninject 与 Asp.net MVC4 一起使用，但我遇到了 EF“DetectChanges”功能的问题，我不明白为什么我需要将其设置为“假”。请你帮助我好吗？

我的解决方案是在 FindingBugContext.cs 文件的构造函数中添加以下行：

```
Configuration.AutoDetectChangesEnabled = false; 
```

在以下代码的注释行中，我将更清楚地解释我的问题。这是一个非常简单（而且可能很愚蠢）的代码，它重现了我不理解的问题，并且我没有包含所有接口的代码，因为我认为弄清楚它非常简单。

这是我的服务类“RobotService.cs”：

```
public class RobotService : IRobotService
{
    private readonly IRepository<Body> _repoBody;
    private readonly IRepository<BodyPart> _repoBodyPart;
    private readonly IRepository<Robot> _repoRobot;

    private readonly IUnitOfWork _unitOfWork;

    public RobotService(
        IRepository<Body> repoBody,
        IRepository<BodyPart> repoBodyPart,
        IRepository<Robot> repoRobot,
        IUnitOfWork unitOfWork)
    {
        _repoBody = repoBody;
        _repoBodyPart = repoBodyPart;
        _repoRobot = repoRobot;
        _unitOfWork = unitOfWork;
    }

    public Robot Get(int id)
    {
        Robot robot = new Robot();
        robot = _repoRobot.Get(id);

        if (robot != null)
        {
            Body body = _repoBody.Get(robot.BodyId);
            /* FROM NOW ON:
             * robot.BodyId = 0 --> instead of 1: WHY???
             * robot.Name = "Robby1"
             */

            if (body != null)
            {
                BodyPart head = new BodyPart();
                head = _repoBodyPart.Get(body.HeadId);
                body.Head = head;
                /* FROM NOW ON:
                 * body.BodyId = 0 --> instead of 1: WHY???
                 * body.HeadId = 0 --> instead of 1: WHY???
                 * body.LeftArmId = 0 --> instead of 2: WHY???
                 * body.RightArmId = 0 --> instead of 3: WHY???
                 * body.BodyName = "Body1" --> doesn't change
                 */

                BodyPart leftArm = new BodyPart();
                leftArm = _repoBodyPart.Get(body.LeftArmId);
                body.LeftArm = leftArm;

                BodyPart rightArm = new BodyPart();
                rightArm = _repoBodyPart.Get(body.RightArmId);
                body.RightArm = rightArm;

                robot.Body = body;
            }
        }
        return robot;
    } 
```

这是我通过 NuGet 包“Ninject.MVC3”安装后在 NinjectWebCommon.cs 文件中的自定义代码：

```
private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind(typeof(IRepository<>)).To(typeof(RepositoryBase<>)).InRequestScope();
        kernel.Bind<IDbContextFactory>().To<DbContextFactory>().InRequestScope();
        kernel.Bind<IUnitOfWork>().To<UnitOfWork>().InRequestScope();
        kernel.Bind<IRobotService>().To<RobotService>();
    } 
```

这是我的 DbContext 类“FindingBugContext.cs”：

```
public class FindingBugContext : DbContext
{
    public FindingBugContext()
        : base("FindingBugContext")
    {

        //Configuration.AutoDetectChangesEnabled = false; //This is the solution
    }

    public virtual void Commit()
    {
        base.SaveChanges();
    }

    private IDbSet<Robot> _robots;
    private IDbSet<Body> _bodies;
    private IDbSet<BodyPart> _bodyParts;

    public virtual IDbSet<T> DbSet<T>() where T : class
    {
        return Set<T>();
    }

    public IDbSet<Robot> Robots
    {
        get { return _robots ?? (_robots = DbSet<Robot>()); }
    }

    public IDbSet<Body> Bodies
    {
        get { return _bodies ?? (_bodies = DbSet<Body>()); }
    }

    public IDbSet<BodyPart> BodyParts
    {
        get { return _bodyParts ?? (_bodyParts = DbSet<BodyPart>()); }
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        Database.SetInitializer(new DropCreateFindingBugWithSeedData());

        modelBuilder.Configurations.Add(new RobotConfiguration());
        modelBuilder.Configurations.Add(new BodyConfiguration());
        modelBuilder.Configurations.Add(new BodyPartConfiguration());
    }

    public class DropCreateFindingBugWithSeedData : DropCreateDatabaseAlways<FindingBugContext>
    {
        protected override void Seed(FindingBugContext context)
        {
            BodyPart head = new BodyPart() { Type = PartType.Head, PartName = "Head" };
            BodyPart leftArm = new BodyPart() { Type = PartType.LeftArm, PartName = "LeftArm" };
            BodyPart rightArm = new BodyPart() { Type = PartType.RightArm, PartName = "RightArm" };

            Body body = new Body() { BodyName = "Body1", Head = head, HeadId = 1, LeftArm = leftArm, LeftArmId = 2, RightArm = rightArm, RightArmId = 3 };

            Robot robot = new Robot() { Name = "Robby1", BodyId = 1, Body = body };
            context.Robots.Add(robot);
        }
    }

    public class RobotConfiguration : EntityTypeConfiguration<Robot>
    {
        public RobotConfiguration()
        {
            ToTable("Robots");

            HasKey(r => r.RobotId)
                .Property(r => r.RobotId)
                .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

            HasRequired(r => r.Body)
                .WithMany()
                .HasForeignKey(r => r.BodyId);
        }
    }

    public class BodyConfiguration : EntityTypeConfiguration<Body>
    {
        public BodyConfiguration()
        {
            ToTable("Bodies");

            HasKey(b => b.BodyId)
                .Property(b => b.BodyId)
                .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

            HasRequired(b => b.Head)
                .WithMany()
                .HasForeignKey(b => b.HeadId)
                .WillCascadeOnDelete(false);

            HasRequired(b => b.LeftArm)
                .WithMany()
                .HasForeignKey(b => b.LeftArmId)
                .WillCascadeOnDelete(false);

            HasRequired(b => b.RightArm)
                .WithMany()
                .HasForeignKey(b => b.RightArmId)
                .WillCascadeOnDelete(false);
        }
    }

    public class BodyPartConfiguration : EntityTypeConfiguration<BodyPart>
    {
        public BodyPartConfiguration()
        {
            ToTable("BodyParts");

            HasKey(b => b.BodyPartId)
                .Property(b => b.BodyPartId)
                .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        }
    }
} 
```

这些是我的实体：

```
public class Robot
{
    public Robot() { Body = new Body(); }

    public int RobotId { get; set; }
    public string Name { get; set; }
    public int BodyId { get; set; }
    public Body Body { get; set; }
} 
```

公共类身体{公共身体（）{头=新的身体部分（）；LeftArm = new BodyPart(); RightArm = new BodyPart(); }

```
 public int BodyId { get; set; }
    public string BodyName { get; set; }

    public int HeadId { get; set; }
    public BodyPart Head { get; set; }

    public int LeftArmId { get; set; }
    public BodyPart LeftArm { get; set; }

    public int RightArmId { get; set; }
    public BodyPart RightArm { get; set; }
} 
```

公共类 BodyPart { 公共 int BodyPartId { 获取；放; } 公共 PartType 类型 { 获取；放; } 公共字符串 PartName { 获取；放; } }

```
public enum PartType
{
    Head,
    LeftArm,
    RightArm
} 
```

这是工作单元代码：

```
public class UnitOfWork : IUnitOfWork
{
    private readonly IDbContextFactory _dbContextFactory;
    private FindingBugContext _context;

    public UnitOfWork(IDbContextFactory dbContextFactory)
    {
        _dbContextFactory = dbContextFactory;
    }

    protected FindingBugContext FindingBugContext
    {
        get { return _context ?? (_context = _dbContextFactory.Get()); }
    }

    public void Commit()
    {
        FindingBugContext.Commit();
    }
} 
```

这是通用存储库代码：

```
public class RepositoryBase<T> : IRepository<T> where T : class
{
    private FindingBugContext _context;
    private readonly IDbSet<T> _dbSet;

    public RepositoryBase(IDbContextFactory dbContextFactory)
    {
        DbContextFactory = dbContextFactory;
        _dbSet = FindingBugContext.Set<T>();
    }

    public IDbContextFactory DbContextFactory
    {
        get;
        private set;
    }

    public FindingBugContext FindingBugContext
    {
        get { return _context ?? (_context = DbContextFactory.Get()); }
    }

    //Read
    public T Get(int id)
    {
        return _dbSet.Find(id);
    }
} 
```

这是我的 ContextFactory 代码：

```
public class DbContextFactory : Disposable, IDbContextFactory
{
    private FindingBugContext _context;

    public FindingBugContext Get()
    {
        if (_context == null)
        {
            _context = new FindingBugContext();
            return _context;
        }
        else
        {
            return _context;
        }
    }

    public void Dispose()
    {
        if (_context != null)
        {
            _context.Dispose();
        }
    }
} 
```

# sql - 在数据库中查找日期时间列中没有时间的行

> ID：13384316
> 
> 赞同：6
> 
> 时间：2012-11-14T17:47:01.607
> 
> 标签：sql, coldfusion

在测试期间，我没有注意到某些订单的数据库中的日期/时间输入不正确。而不是输入日期和时间，我只输入了日期。我使用了正确的时间戳，`createodbcdatetime(now())`但是我用它来`cfsqltype="cf_sql_date"`将其输入数据库。

我很幸运能够正确记录订单日期/时间，这意味着我可以使用订单日期/时间字段中的时间。

我的问题是我可以过滤表中只输入日期的所有行。我的数据如下；

表名：**tbl_orders**

```
uid_orders    dte_order_stamp
2000          02/07/2012 03:02:52
2001          03/07/2012 01:24:21
2002          03/07/2012 08:34:00 
```

表名：**tbl_payments**

```
uid_payment  dte_pay_paydate      uid_pay_orderid
1234         02/07/2012 03:02:52  2000
1235         03/07/2012           2001
1236         03/07/2012           2002 
```

我需要能够选择没有从 tbl_payments 输入时间的所有付款，然后我可以循环从我的订单表中获取时间的结果，将其添加到我的付款表中的日期，并使用新的日期/时间更新该字段。

我几乎可以处理重新插入日期/时间。它只是选择我不确定的无时间行？

任何帮助，将不胜感激。

以下是订单和付款的选择语句以及是否需要加入它们。（仅供参考）

SQL Server 2008，冷融合 9

```
 SELECT 
  dbo.tbl_orders.uid_orders,
  dbo.tbl_orders.dte_order_stamp,
  dbo.tbl_payment.dte_pay_paydate,
  dbo.tbl_payment.uid_pay_orderid
  FROM
  dbo.tbl_orders
  INNER JOIN dbo.tbl_payment ON (dbo.tbl_orders.uid_orders = dbo.tbl_payment.uid_pay_orderid)

  SELECT 
  dbo.tbl_orders.uid_orders,
  dbo.tbl_orders.dte_order_stamp
  FROM dbo.tbl_orders

SELECT 
  uid_paymentid,
  uid_pay_orderid,
  dte_pay_paydate,
FROM 
  dbo.tbl_payment 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T17:57:21.173

选择小时、分钟、秒和毫秒值为零的记录。

```
select *
from table
where datePart(hour, datecolumn) = 0
and datePart(minute, datecolumn) = 0
and datePart(second, datecolumn) = 0
and datePart(millisecond, datecolumn) = 0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T17:51:32.457

您可能可以通过[转换](http://msdn.microsoft.com/en-us/library/ms187928.aspx)为[时间](http://msdn.microsoft.com/en-us/library/bb677243.aspx)并检查 0 来获得这些值：

```
SELECT * FROM table WHERE CAST(datetimecolumn AS TIME) = '00:00' 
```

不过，这可能不是特别有效，具体取决于 SQL Server 索引的智能程度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T17:51:40.187

像这样的东西应该工作：

```
....
WHERE CAST(CONVERT(VARCHAR, dbo.tbl_payment.dte_pay_paydate, 101) AS DATETIME) = 
          dbo.tbl_payment.dte_pay_paydate 
```

这将返回缺少时间的所有行。

# android - 如何判断我的 Android 应用是否可以在平板电脑的 Google Play 上使用？

> ID：13384321
> 
> 赞同：3
> 
> 时间：2012-11-14T17:47:50.440
> 
> 标签：android, google-play

我们的一位客户尝试使用他的平板电脑在 Google Play 上找到我们的应用程序，但找不到。

在我的清单文件中，我设置了电话权限，如下所示：

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

我假设大多数平板电脑不支持这一点。我还假设 Google Play 过滤器在我的清单文件中看到了这个电话权限，并使应用程序对不支持它的设备不可见。

我在某处的论坛中读到，如果我在清单文件中添加以下行，非电话设备应该能够使用它：

```
<uses-feature android:name="android.hardware.telephony" android:required="false"></uses-feature> 
```

这是准确的吗？这是否允许平板电脑在 Google Play 上看到我的应用程序？

我在办公室没有可以测试的 Android 平板电脑，有没有更好的方法来判断应用程序是否会在 Google Play 上的平板电脑上可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:25:26.477

从 Google Play 商店的[平板电脑应用质量检查表](http://developer.android.com/distribute/googleplay/quality/tablet.html#google-play)部分，他们说您应该能够在开发者控制台中检查 APK 设备兼容性的完整列表。

具体来说（使用截至 2012 年 11 月的“新设计”控制台），单击应用程序的“APK”部分，然后查看“支持的设备”部分。单击“查看支持的设备”以查看一长串设备（目前列出了 2116 个设备！）。您可以按受支持或不受支持的设备查看列表。这里没有任何细节说明“平板电脑”或为什么任何特定设备被列为不受支持。

如果您搜索“GT-P7510”，那就是三星 Galaxy Tab Wi-Fi 平板电脑，应该会回答您的具体问题。但是，鉴于您可以出于各种原因（显示密度、尺寸等）消除设备，可能很难弄清楚为什么通常不支持设备......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:52:22.800

我们之前回答过这个问题。

是这样的：

```
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
<uses-feature android:name="android.hardware.telephony" android:required="false"></uses-feature> 
```

这里是完全[分离](https://stackoverflow.com/questions/10443964/my-app-is-not-available-for-tablet-device-on-google-play)

[其他好答案](https://stackoverflow.com/questions/11691775/why-my-app-is-not-showing-up-on-tablets-in-google-play)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T22:47:26.700

更好的是`Optimization Tips`在`Developer Console`. 该`To Do`选项卡将向您显示提示并提供有关哪些功能/权限（例如上面提到的电话）阻止您的应用显示为可用于平板电脑等的更多详细信息的链接。

# facebook - 一篇文章如何只显示在 Newsfeed 上？（我不想在时间轴上显示）

> ID：13384323
> 
> 赞同：2
> 
> 时间：2012-11-14T17:47:53.743
> 
> 标签：facebook, feed

我使用 Graph API
[https://graph.facebook.com/](https://graph.facebook.com/) /feed

执行 API 的结果如下。
一个。文章显示在用户的时间轴上。
湾。文章显示在用户的新闻源上。
C。文章显示在用户朋友的新闻源上。

但我想只显示**b**使用 Graph API。
（我不想在时间轴上显示）

可能吗？或者有没有其他好的方法？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:36:48.233

不，这通过 API 是不可能的，我也想不出将来会成为可能的任何原因。

# actionscript-3 - as3 air unloadAndStop() 事件监听器或定时器

> ID：13384327
> 
> 赞同：0
> 
> 时间：2012-11-14T17:48:13.427
> 
> 标签：actionscript-3, air

我的空中应用程序一遍又一遍地播放外部 swf，直到播放下一个外部 swf。为了避免内存泄漏，我使用了 unloadAndStop()。我正在使用两个计时器。第一个 unloadAndStops swf。第二个等待两秒钟，然后再次加载它。

这种方法（加上使用弱引用）似乎可以控制内存。但是，我宁愿不使用计时器，而是使用事件侦听器。当 unloadAndStop 完成然后再次加载 swf 时，是否有一个事件侦听器。

这是我的想法：

```
var TIMER_INTERVAL:int = int(duration);
var t:Timer = new Timer(TIMER_INTERVAL);
t.addEventListener(TimerEvent.TIMER,updateTimer,false,0,true);
t.start();

private function updateTimer(e:TimerEvent):void 
{
    swfLoader.unloadAndStop(true);      
    swfLoader.addEventListener(Event.UNLOAD,onSWFUnloadComplete,false,0,true);
}

private function updateTimer(e:TimerEvent):void 
{
    var swfSource2:String = File.applicationStorageDirectory.nativePath.toString();
    swfLoader.load(swfSource2+'\\'+name_xml);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:32:40.320

`unloadAndStop`不是异步方法，因此卸载事件不会真正相关。幕后可能发生的情况是，完全处理电影对象/侦听器需要 1 个完整帧，这就是为什么您在同一代码块中再次加载它时遇到问题的原因。

如果您在再次加载之前只等待一帧，您应该会得到您期望的结果。

现在，当然最好的解决方案是进入您加载的 swf 的源文件并修复内存泄漏。

# ios - 使用 Monotouch 在 iPhone 上重用音频和录音

> ID：13384328
> 
> 赞同：1
> 
> 时间：2012-11-14T17:48:25.930
> 
> 标签：ios, audio, xamarin.ios, recording

我刚刚开始在实际的 iPhone 设备上测试这个非常简单的录音应用程序，它是通过 Monotouch 构建的。我遇到了一个问题，似乎是第一次使用`AVAudioRecorder`and`AVPlayer`对象后的重用，我想知道如何解决它。

**基本概述**

该应用程序由以下三个部分组成：

*   记录列表*（TableViewController）*
*   记录细节*（ViewController）*
*   新记录*（视图控制器）*

**工作流程**

创建录音时，用户将单击“录音列表”区域中的“添加”按钮，应用程序会推送新的录音视图控制器。

在 New Recording Controller 中，可以使用以下变量：

```
AVAudioRecorder recorder;
AVPlayer player; 
```

每个都在使用之前初始化：

```
//Initialized during the ViewDidLoad event
recorder = AVAudioRecorder.Create(audioPath, audioSettings, out error); 
```

和

```
//Initialized in the "Play" event
player = new AVPlayer(audioPath); 
```

在 New Recording Controller 区域的初始加载中，这些工作中的每一项都按预期工作，但是任何进一步的尝试似乎都不起作用（*没有音频播放*）

详细信息区域还有一个播放部分，允许用户播放任何录音，但是，与新录音控制器非常相似，播放在那里也不起作用。

**处理**

它们都按如下方式处理（退出/离开视图时）：

```
if(recorder != null)
{
    recorder.Dispose();
    recorder = null;
}

if(player != null)
{
    player.Dispose();
    player = null;
} 
```

我还尝试删除任何可能使任何对象保持“活动”状态的观察者，希望能够解决问题并确保它们在每次显示新录制区域时都被实例化，但是在之后我仍然没有收到音频播放初始录制会话。

如有必要，我很乐意提供更多代码。（*这是使用 MonoTouch 6.0.6*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:31:22.403

经过进一步调查，我确定问题是由`AudioSession`同一控制器中发生的录制和播放引起的。

我确定的两个解决方案如下：

**解决方案 1** *（AudioSessionCategory.PlayAndRecord）*

```
//A single declaration of this will allow both AVAudioRecorders and AVPlayers
//to perform alongside each other.
AudioSession.Category = AudioSessionCategory.PlayAndRecord;

//Upon noticing very quiet playback, I added this second line, which allowed
//playback to come through the main phone speaker
AudioSession.OverrideCategoryDefaultToSpeaker = true; 
```

**解决方案 2** *（AudioSessionCategory.RecordAudio & AudioSessionCategory.MediaPlayback）*

```
void YourRecordingMethod()
{
     //This sets the session to record audio explicitly
     AudioSession.Category = AudioSessionCategory.RecordAudio;
     MyRecorder.record();  
}

void YourPlaybackMethod()
{
     //This sets the session for playback only
     AudioSession.Category = AudioSessionCategory.MediaPlayback;
     YourAudioPlayer.play();
} 
```

有关使用 的更多信息`AudioSession`，请访问**[Apple 的 AudioSession 开发区。](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Basics/Basics.html)**

# iphone - 当触摸移出触摸对象时停止 NStimer

> ID：13384329
> 
> 赞同：0
> 
> 时间：2012-11-14T17:48:27.630
> 
> 标签：iphone, ios, xcode, ipad, ios6

我的应用程序有一些问题。因此，当手指移出触摸对象（按钮）时，我需要停止 NStimer。所以有一个代码：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSSet *allTouches = [event allTouches];
    for (UITouch *touch in allTouches)
    {
        CGPoint location = [touch locationInView:touch.view];

        if ([testButton.layer.presentationLayer hitTest:location]) {

            timer = 60;
            time = [NSTimer scheduledTimerWithTimeInterval:(1.0) target:self selector:@selector(randomVoid) userInfo:nil repeats:YES];
        } else if (![testButton.layer.presentationLayer hitTest:location]){
            [time invalidate];
        }
    } 

     }

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    [time invalidate];
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:59:45.840

`touchesBegan`当您在屏幕上按下手指时执行事件。如果您移动手指，`touchesMoved`则每次移动都会调用，而当您抬起手指时，`touchEnd`则会调用。

所以，基本上你应该添加代码来测试是否需要的按钮被触摸到`touchMoved`方法。

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    if (![testButton.layer.presentationLayer hitTest:location]){
        [time invalidate];
        time = nil;
    }
} 
```

# actionscript-3 - Flex SOAP WebService 是否调度 ProgressEvents？

> ID：13384332
> 
> 赞同：0
> 
> 时间：2012-11-14T17:48:31.970
> 
> 标签：actionscript-3, apache-flex, soap

我目前正在构建一个将使用一些 SOAP Web 服务的应用程序。我已经让他们在`mx.rpc.soap.WebService`课堂上工作得很好，但现在我第一次看到设计，他们需要一个进度条。查看[mx.rpc live docs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/package-detail.html)，我没有找到任何类似于`ProgressEvent`这个包的东西。`ProgressEvent`这些类是否调度了一个（或类似的）？

# python - 抓取一个非常典型的文本块

> ID：13384333
> 
> 赞同：2
> 
> 时间：2012-11-14T17:48:32.847
> 
> 标签：python, web-scraping, beautifulsoup

我正在尝试刮掉这个块：

```
<b>Address:</b></br>
First Line</br>
Second Line</br>
City, State Zip</br>
 <b>Phone: 718-555-2121</br>
 <b>Fax:</b> 718-555-1212</br>
 <b>Email:</b> ex@example.com</br> 
```

可靠地进入字典。

```
dict = {
    'address':'First Line\n Second Line\n City, State Zip\n',
    'phone':'718-555-2121',
    'Fax:':'718-555-1212',
    'Email:':'ex@example.com',
    } 
```

如果我查找粗体，然后查找 next_sibling，我可以得到电话号码、传真和电子邮件，但地址是几个兄弟姐妹。

```
for nut in soup.find_all("b"):
    print nut,
    try:
        print nut.next_sibling.tag
    except:
        print nut.next_sibling 
```

如果我查找粗体，然后查找 next_siblings，我会得到所有兄弟姐妹：

```
for nut in soup.find_all("b"):
    print nut
    for s,sibling in enumerate(nut.next_siblings):
        print s, (repr(sibling)) 
```

有没有一种干净的方式（`while`？）说继续组装 next_siblings 直到你找到一个大胆的兄弟姐妹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:06:56.110

好的，所以我用你的方法做了一点工作，我想出了这个。

```
b = soup.b
results = []
result = str()
while b != None:
    try:
        if b.name == 'b':
            results.append(result)
            result = b.text
    except AttributeError:
        result = result + b
    b = b.nextSibling
results.append(result) 
```

有点丑，我觉得。但是，它应该很容易遵循。

`b.nextSibling`返回两种不同类型的对象，`NavigableString`（在它是 a 的情况下`<\br>`）或 a `Tag`，在它是一个新`<b>`元素的情况下。 `.name`是 a 的有效方法`Tag`，但不是a 的有效方法`NavigatableString`。使用它，您可以使用 try/except 子句区分这两种情况。 当元素耗尽时`b.nextSibling`返回，循环中断。`None`最后一行附加了最后一个对象。

# iphone - 如何在 Cocos2d 中制作类似于 Panda Mania 的游戏？

> ID：13384334
> 
> 赞同：-1
> 
> 时间：2012-11-14T17:48:32.027
> 
> 标签：iphone, cocos2d-iphone, box2d

我是这个论坛和 cocos2d 世界的新手。我想制作一个像 Panda Mania 这样的游戏，在其中我必须使用 swipe/fick 来发射带有力和重力的箭。我需要一些指导如何在游戏世界中取得进步，以及在 iphone 中实现滑动/轻弹的最佳选择是什么，我应该使用 cocos2d 还是 box2d。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:11:43.470

Anam，就像阿里提到的那样，你一次问了很多事情。

一般来说，您可以查找示例并查看事情是如何完成的，然后从那里开始。一个不错的页面是 www.raywenderlich.com Cocos2D 还提供了大量示例，您可以从中受益。

您的帖子会想到本教程：[http ://www.raywenderlich.com/14302/how-to-make-a-game-like-fruit-ninja-with-box2d-and-cocos2d-part-1](http://www.raywenderlich.com/14302/how-to-make-a-game-like-fruit-ninja-with-box2d-and-cocos2d-part-1)

另一方面，Cocos2D Vs Box2D 可能是一个误导性的问题，因为 Box2D 的主要目标是成为一个物理引擎，而不是像 Cocos2d 这样的通用游戏引擎。根据游戏的不同，您可以将它们一起使用，或者将 Cocos2D 与 Chipmunk 或其他东西一起使用。

但是 Wenderlich 网站上的许多教程会更清楚地说明这一点。

# mysql - Mysql分区索引

> ID：13384343
> 
> 赞同：2
> 
> 时间：2012-11-14T17:49:13.370
> 
> 标签：mysql, indexing, partitioning

我想从批处理数据创建一个表以进行数据挖掘。我每天将有大约 2500 万行数据进入这个表。表上定义了几个索引，所以插入（我做批量插入）速度很慢。如果没有索引，我可以粘贴 40K 行，而使用索引则更像是 3-4 K，这使得整个事情变得不可行。所以想法是按天对数据进行分区，禁用键，然后进行当天的插入，然后重新启用索引。对一天的数据重新启用索引需要 20 分钟，这很好。这让我想到了我的问题。当您重新启用索引时，它是否必须重新计算所有分区上的索引，还是仅针对那一天？很明显，对于分区所在的索引（在这种情况下为日期），它应该仅适用于那一天。但是其他指数呢？如果需要重新计算所有分区的索引，则无法在合理的时间内完成。有人知道吗？

显示创建是这样的：

```
sts | CREATE TABLE `sts` (
`userid` int(10) unsigned DEFAULT NULL,
`urlid` int(10) unsigned DEFAULT NULL,
`geoid` mediumint(8) unsigned DEFAULT NULL,
`cid` mediumint(8) unsigned DEFAULT NULL,
`m` smallint(5) unsigned DEFAULT NULL,
`t` smallint(5) unsigned DEFAULT NULL,
`d` tinyint(3) unsigned DEFAULT NULL,
`requested` int(10) unsigned DEFAULT NULL,
`rate` tinyint(4) DEFAULT NULL,
`mode` varchar(12) DEFAULT NULL,
`session` smallint(5) unsigned DEFAULT NULL,
`sins` smallint(5) unsigned DEFAULT NULL,
`tos` mediumint(8) unsigned DEFAULT NULL,
PRIMARY KEY (userid, urlid, requested),
KEY `id_index` (`m`),
KEY `id_index2` (`t`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

它当前未分区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T18:05:17.163

您禁用/启用**table**上的索引。这意味着索引将在表的所有部分上被禁用/启用。

考虑这个加载新数据的场景：

1.  创建一个临时表，定义您需要的所有分区
2.  将数据加载到没有索引的临时表中。
3.  在这个表上创建索引。
4.  将分区移动到目标表，该表的分区与登台表相同。
5.  删除临时表上的索引

要以可控的方式对现有数据进行分区，您可以使用相同的逻辑将数据移动到新的分区表。

# jquery - 如果延迟状态被解决，什么时候被拒绝

> ID：13384347
> 
> 赞同：0
> 
> 时间：2012-11-14T17:49:25.050
> 
> 标签：jquery, jquery-deferred

```
var promise = $.when(sba_dfd.promise(), sbb_dfd.promise(), sbc_dfd.promise(), sbd_dfd.promise(), sbe_dfd.promise());
if (sbf_dfd.state() || sbg_dfd.state() == "resolved") {promise.state()=="rejected"}; 
```

这个声明中的内容是什么？我猜这是语法，但我就是不能指望它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:16:26.163

我认为这可以通过一些逆解析逻辑来解决，即。响应拒绝而解决的延迟对象，*反之亦然*。

首先是进行反转的函数：

```
function inverse_resolve(promise) {
    var dfrd = $.Deferred();
    promise.done(dfrd.reject).fail(dfrd.resolve);
    return dfrd.promise();
} 
```

现在，我们可以组成一个相当常规的`when()`表达式，它通常响应`sba`, `sbb`, `sbc`, `sbd`，但响应and`sbe`的逆状态。`sbf``sbg`

```
$.when(sba_dfd, sbb_dfd, sbc_dfd, sbd_dfd, sbe_dfd, inverse_resolve(sbf_dfd), inverse_resolve(sbg_dfd)).done(function() {
    //do something
}); 
```

为清楚起见，我`.promise()`在每种情况下都省略了。在实践中，`.promise()`没有必要像`.when()`响应承诺一样响应延迟。

正如我所说，我认为这会奏效。它完全未经测试。

# facebook - 应该修复的 facebook Open Graph 警告

> ID：13384353
> 
> 赞同：0
> 
> 时间：2012-11-14T17:50:10.960
> 
> 标签：facebook, button, facebook-like

我网站上的 facebook like 按钮在 1 个月内运行良好 昨天我发现它坏了

我通过它给我的 facebook 调试工具检查它：http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fmezo.me%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fmezo.me%2F)

那么有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:43:23.560

缺少元标记，请使用以下内容

```
 <meta property="og:type"       content="website" /> 
  <meta property="og:url"        content="http://womenwants.me/chat1/" /> 
  <meta property="og:title"      content="Fun Group Chat" /> 
  <meta property="og:image"      content="http://www.rijewelers.com/product_images/uploaded_images/chat-icon.jpg" /> 
```

# api - 从本机 API 调用中捕获异常

> ID：13384355
> 
> 赞同：1
> 
> 时间：2012-11-14T17:50:22.613
> 
> 标签：api, exception, try-catch, native

如果 windows 处理消息时发生异常，我该如何捕捉它？当我在按键事件处理程序中引发异常时，下面的代码会崩溃。

```
try{
    WindowsNative.SendMessage(form.Handle, WM_KEYDOWN, KeyValue, 0);
}catch{} 
```

# java - 使用 != 的字符串比较未按预期失败

> ID：13384357
> 
> 赞同：-1
> 
> 时间：2012-11-14T17:50:48.343
> 
> 标签：java, string, junit, equality

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

`true`我有一个布尔语句，由于不正确地使用`!=`比较字符串，它应该评估为：

```
public int calculateWeight( String hostname, String parameter, 
         String parInstance ) throws InvalidWeightException
{
    if ( parameter != "*" && hostname != "*" && parInstance != "*" )
    {
        return 1;
    }
    ...
} 
```

在调试调用此方法的 JUnit 测试时，if 语句正在评估为 true（通过 Eclipse Inspect），但该`return`语句*没有执行*。传递给`parInstance`变量的值实际上是`"*"`. 如果我们使用`!(.equals())`，Eclipse Inspect`false`会按预期显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:54:08.327

在 != vs && 和括号上查找运算符绑定。

# android - Android 的 ListView 自动调整大小

> ID：13384361
> 
> 赞同：1
> 
> 时间：2012-11-14T17:51:08.173
> 
> 标签：android, xml, android-listview, textview

我有`ListView`多个`TextView`s。请注意，有时这些`TextView`s 并未全部使用。仍然做的单个列表`ListView`总是具有相同的大小。

我怎样才能改变它，以便`ListView`只占用必要的空间？

# asp.net - 如何为不同的客户定制网络应用程序（页面和 UI）

> ID：13384371
> 
> 赞同：0
> 
> 时间：2012-11-14T17:51:40.667
> 
> 标签：asp.net, customization

我们有一个难以维护的 ASP.NET Web 应用程序，我正在寻找如何重新设计它的想法。这是一个员工管理系统，可以为我们的每个客户高度定制。让我解释一下它现在是如何工作的：

在默认页面上，我们有一个菜单，用户可以在其中选择任务，例如创建员工或查看时间表。我将使用 Create Employee 作为示例。

当用户从菜单中选择 Create Employee 时，会加载一个 ASPX 页面，其中包含所选菜单项的动态加载用户控件，例如，对于 Create Employee，这将是 AddEmployee.ascx

如果用户单击控件上的保存，它将导航到默认页面。
一些菜单项涉及多个步骤，因此如果用户在多步骤流程上单击“下一步”，那么它将导航到流程中的下一页，依此类推，直到到达最后一步，单击“保存”导航到默认页面。

一些客户可能需要在创建员工流程中执行额外的步骤（例如 SecurityClearance.ascx），但其他客户可能不需要。

不同的客户可能使用相同的 ASCX 用户控件，因此在 AddEmployee.OnInit 中我们可以为该客户自定义字段，即使某些字段隐藏或只读或强制。

以下内容可根据客户进行定制：

*   菜单项
*   每个流程中的步骤（ascx 控件名称）
*   每个 ascx 中的隐藏字段
*   每个 ascx 中的必填字段
*   与每个 ascx 相关的规则，允许在该客户的代码中使用某些逻辑

每个客户的定制都保存在一个巨大的 XML 文件中，该文件可能长达 7500 行。

是否有任何框架或规则引擎可以用来以这种方式自定义我们的应用程序？其他应用程序如何管理每个客户的定制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:07:57.853

如果您的常规数据保存在数据库中，我不完全确定您为什么要将所有客户特定信息保存在 xml 文件中。将其移动到数据库中。

接下来，有许多不同种类的规则引擎。考虑到您使用的是 asp.net，您可能希望至少查看 Windows Workflow 中的一些内容。您可能会阅读以下内容：http: [//karlreinsch.com/2010/02/05/microsoft-rule-engines/](http://karlreinsch.com/2010/02/05/microsoft-rule-engines/)

很久以前，我使用了一款名为 Haley Rules 的产品来驱动 ac# web 应用程序。它控制着从可用屏幕到出现的字段以及是否需要它们的所有内容。让团队了解它的工作方式需要一段时间，但是一旦发生这种情况，引入一个新客户就非常简单了。海莉后来被甲骨文收购，但可能是绝对最好的。

您可能感兴趣的其他内容是[NxBRE](http://sourceforge.net/projects/nxbre/)甚至[nCalc](http://ncalc.codeplex.com/)。NxBRE 是一个实际的规则引擎，它是为 java 构建的一个端口。另一方面，nCalc 本身并不是一个规则引擎。但是，如果您可以用简单的布尔语句来表达您的逻辑，那么它会非常快。我目前正在使用它来驱动我们的一个应用程序中的页面流。

一些商业的包括：[FlexRule](http://www.flexrule.com/)，[iLog](http://www-01.ibm.com/software/websphere/ilog/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:51:28.013

Your existing rule engine tool supports your web application, which means it meets your needs already. You can use other "Rule Engine" like MS work flow, but IMO it can also end with a hard to maitain situation.

Let's say there is registration portal. It collects general user infomation and save them into database. Simple. we build one protal for one client with several ASCXs and Rules.Then for another client,we add more rules and more controls to these ASCXs. Working in this way, sooner or later we will reach the final straw client. At that time the code base is hard to maitain and devs lost themselves in lots of rules. It is what happened to me.

So to me, it is not about which Rule engine to use.

Then How?

I have raised a question, and one of the [answer](https://stackoverflow.com/a/12267135/407183) makes sense to me( thought not a picked answer). In this answer, the guy mentioned what kind of company you are. In your question it is more like which department you are or do you want to seperate your dev teams.

If you are in a archetect teams, build a framework with a rule engine. Create a basic registraion portal as a sample portal.Make DAO,BO decoupled with UI (Seperate layers).

If you are in a customise teams, create customised user control (dont reuse these user control in basic version). What you will recreate is just UI, you can still use DAO,BO as they are not defined in user control, they are at other layers. In this way you get the freedom to define your client specified rules without worring about contaminating other clients rules or introducing new bugs to other client's registrations.

Just realise it is not like an answer to your question. Anyway it is my thoughts after limited xp of working on a engine rule based ,multi-clients web application.

# javascript - 通过单击自定义 html 元素（内部代码）检查或选择复选框/列表框中的多个项目

> ID：13384372
> 
> 赞同：0
> 
> 时间：2012-11-14T17:51:42.880
> 
> 标签：javascript, jquery, html

基本上我想将一堆复选框项目或列表框中的项目绑定到一组相应的自定义图像，以便当我单击或选择多个图像时，它会选择或检查相应的列表框/复选框项目。

下面的示例仅适用于 lsitbox，但不能选择多个项目。[http://jsfiddle.net/tnkboy/hvfF9/](http://jsfiddle.net/tnkboy/hvfF9/)

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JQuery Dropdown Selection</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="styles.css" type="text/css">

<style type="text/css">
body { background-color:#efefef; font-family:Arial, Helvetica, sans-serif; margin:60px; }

h2 { background: url(1326911803_kteatime.png) no-repeat; line-height:38px; padding:0 0 0 50px; font-size:18px; color:#666; }

ul#customselect { margin:0; padding:0; display:block; height:auto; overflow:hidden; margin:0 0 20px 0 !important; }

ul#customselect li { float:left; display:inline-block; margin:0 10px 0 0; cursor:pointer; }

#customselect li a { width:60px; height:60px; padding: 5px; background:#FFF; float: left; border:6px solid #CCC; border-radius:12px; text-decoration:none; text-align:center; font-weight:bold; color:#666; font-size:38px; letter-spacing:-2px; }

#frm_options { clear:both; display:block; }

#customselect li a span { display:block; font-size:11px; letter-spacing:0; }

.selected { border: 6px solid #4a7329 !important; color:#4a7329 !important; background:#dbeccd !important; }

</style>
</head>
<body>
<form action="#" method="post">
  <h2>How do you take it?</h2>
  <ul id="customselect">
    <li><a href="1" class="link">0 <span>Sugar</span></a></li>
    <li><a href="2" class="link">1 <span>Sugar</span></a></li>
    <li><a href="3" class="link">2 <span>Sugars</span></a></li>
  </ul>
  <select name="options" id="frm_options" multiple>
    <option value="Nothing Selected">Nothing Selected</option>
    <option value="1">No Sugar</option>
    <option value="2">1 Sugar</option>
    <option value="3">2 Sugars</option>
  </select>
  <div >
  <INPUT NAME="options" TYPE="CHECKBOX" value="1"> Option 1<BR>
  <INPUT NAME="options" TYPE="CHECKBOX" value="2"> Option 2<BR>
  <INPUT NAME="options" TYPE="CHECKBOX" value="3"> Option 3<BR>
    </div>
</form>

<script type="text/javascript">
    $(document).ready(function() {
        $('.link').click(function() { 
            $('#frm_options').val($(this).attr('href')); 
            $('.link').removeClass('selected');
            $(this).addClass('selected'); 
            return false; 
        });
    });
</script>
</body>
</html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:06:28.943

我更新了您的小提琴以选择多个项目，请在此处查看[http://jsfiddle.net/gnel/hvfF9/1/](http://jsfiddle.net/gnel/hvfF9/1/)

下面的代码：

```
$(document).ready(function() {
          $('.link').click(function() {
            elem = $('#frm_options [value='+$(this).attr('href')+']');
              if (elem.is(':selected')) {
                  elem.removeAttr('selected');
                  $(this).removeClass('selected');
              } else {
                  elem.attr('selected','true');
                  $(this).addClass('selected');
              }
            return false;
        });
    }); 
```

**更新：**
我添加了对选择/取消选择列表中单个项目的支持，请参阅[http://jsfiddle.net/gnel/hvfF9/2/](http://jsfiddle.net/gnel/hvfF9/2/)

在下面添加代码：

```
$('#frm_options option').on('mousedown', function() {
        elem = $('#customselect .link[href='+$(this).val()+']');
        if ($(this).is(':selected')) {
            $(this).removeAttr('selected');
            elem.removeClass('selected');
        } else {
            $(this).attr('selected','true');
            elem.addClass('selected');
        }
        return false;
}); 
```

# android - 带有整数数组的微调器

> ID：13384374
> 
> 赞同：4
> 
> 时间：2012-11-14T17:51:43.687
> 
> 标签：android, integer, spinner, android-arrayadapter

我正在尝试创建一个具有整数值（1、5、10 等）的 Spinner。我已经有一个带字符串的 Spinner，一切正常。

```
private static final String[] daysOfWeek = {"Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"};
Spinner spinner_days =(Spinner)findViewById(R.id.spinner_days);
spinner_days.setOnItemSelectedListener(this);

ArrayAdapter<String> aa = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, daysOfWeek);
aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner_days.setAdapter(aa); 
```

当我试图做同样的事情时

```
private static final int[] options = {1, 3, 5, 10, 15, 20, 30, 40, 45, 50, 60}; 
```

那么当我尝试创建 ArrayAdapter 时出现错误，因为我认为只能使用 String 数组来做到这一点？

有人可以帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:59:28.297

您不能创建一个`ArrayAdapter`整数，因此您可以尝试创建一个包含数字的字符串数组。试试这个 -

```
public static final String [] options = {"1", "3", "5", "10", "15", "20", "30", "40", "50", "60"} 
```

或者，您可以使用 an`Integer`而不是`int`

```
Integer[] options = new Integer[]{1, 3, 5, 10, 15, 20, 30, 40, 50, 60}; 
```

# linux - 无法在 Shell 脚本中重命名文件

> ID：13384375
> 
> 赞同：0
> 
> 时间：2012-11-14T17:51:48.920
> 
> 标签：linux, shell

在这段代码中我做错了什么吗？

```
OLD_NAME="$FILE"
NEW_FILE=`${OLD_NAME | tr ' ' '_'}`
/bin/mv "$OLD_NAME" "$NEW_FILE" 
```

我想要的只是重命名提供的文件并用下划线替换所有空格。我收到`bad substitution`错误消息。我似乎无法让重命名工作:-(

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:54:36.140

您需要将 OLD_NAME 回显到 tr 中：

```
OLD_NAME="$FILE"
NEW_FILE="$( echo "$OLD_NAME" | tr ' ' '_' )"
/bin/mv "$OLD_NAME" "$NEW_FILE" 
```

但也许你更喜欢：

```
NEW_FILE=${OLD_NAME// /_} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:58:04.097

您可以在没有管道的情况下更简单/更易读地进行替换，并`tr`使用以下命令：

```
NEW_FILE=${OLD_NAME// /_} 
```

有关更多详细信息，请参见[此处](http://www.cyberciti.biz/tips/bash-shell-parameter-substitution-2.html)。

# java - 从复选框中获取值并显示在其他活动中

> ID：13384376
> 
> 赞同：0
> 
> 时间：2012-11-14T17:51:54.333
> 
> 标签：java, android, checkbox

我需要从复选框中获取 te 值并显示在其他活动中并显示在 textview 中。

这是代码 FormSupervisar。

```
public class FormSupervisar extends Activity {  
    CheckBox Si;      
    @Override       
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);            
        setContentView(R.layout.formsupervisar);           
        Si=(CheckBox)findViewById(R.id.chBoxSi);  
    }
    public void btnEnviar(View view){
        if (Si.isChecked()){        
            Intent i = new Intent(this,FormBotonSi.class);
            i.putExtra("Si",Si.getText().toString().trim());     
            startActivity(i);  
        }      
    } 
```

当我调用字符串并在 TextView 中显示字符串时的活动

```
public class FormBotonSi extends Activity {   
    private String ,Si ;     
    private TextView tvTipoInspeccion;                     
    @Override      
    public void onCreate(Bundle savedInstanceState)      
    {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.formbotonsi);                                           
         Bundle bn1 = getIntent().getExtras();  
         Si = bn1.getString(Si);          
         tvTipoInspeccion.setText(Si.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:56:51.747

采用

```
Si = bn1.getString("Si"); 
```

代替

```
Si = bn1.getString(Si); 
```

在第二个活动中获得价值，因为您将“Si”设置为第一个活动中的关键（在 FormSupervisar 中）

或者您可以将 Si String 初始化为：

```
private String Si="Si";    
Si = bn1.getString(Si); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:09:51.630

试试这个方法......

```
public class FormBotonSi extends Activity {

......
......

String Si = getIntent().getExtras().getString("Si");  // its "Si" instead of Si

} 
```

还有一件事......当您使用 Java 编码时，您必须遵循 Camel 案例。字段和方法始终以小写字母开头，而类、接口、枚举、构造函数以大写字母开头。

# php - Magento - 与 Facebook 链接/喜欢时不显示右侧缩略图

> ID：13384379
> 
> 赞同：0
> 
> 时间：2012-11-14T17:51:57.467
> 
> 标签：php, javascript, facebook, magento

我有一个 Magento 网站，上面有 Facebook Like 链接。单击它可以让我在我的 FB 墙上分享该产品......但它有时会显示正确的缩略图和描述，有时则不会。

任何人都可以帮我解决这个问题吗？这是一个已知的错误还是我需要调整才能修复它的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:38:36.300

一旦您在您的网站中更改了图像，该图像将不会在 facebook 中更改，直到它再次刮掉它。要再次刮掉它，您可以使用以下网址

```
http://developers.facebook.com/tools/debug 
```

# asp.net-mvc-3 - 部署到 IIS 7 后未加载静态内容

> ID：13384380
> 
> 赞同：2
> 
> 时间：2012-11-14T17:52:09.893
> 
> 标签：asp.net-mvc-3, iis-7

将站点部署到 IIS 后，我的样式表和图像无法加载。它在视觉工作室和本地 IIS 中运行良好。

我认为它正在尝试对静态内容进行身份验证，因为 css 源显示`LogOn?ReturnUrl=%2fContent%2fstyle.css`在 Chrome 检查器中。如果我检查 css 的源代码，它只是我的登录页面。

我确保服务器设置为提供静态文件，并且 IIS 用户可以访问所有文件。

我还尝试将以下代码添加到我的 web.config 中：

```
<authorization>
         <allow users="*" />
  </authorization> 
```

我在类似的堆栈溢出问题中发现了这一点，但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:02:06.660

我想到了。我必须设置匿名身份验证才能使用 app_pool 身份。

# javascript - 使用 Facebook 图表自动填写表格

> ID：13384382
> 
> 赞同：2
> 
> 时间：2012-11-14T17:52:11.683
> 
> 标签：javascript, facebook, forms, facebook-graph-api

我有两个由我的同事编写的脚本，用于使用来自 facebook graph-api 的信息自动填写表单。我想弄清楚哪些以更有效的方式编码？

这是第一个。 [http://jsfiddle.net/TcGGZ/30/](http://jsfiddle.net/TcGGZ/30/)

```
$('#account_get').click(function(){
    $.getJSON('http://graph.facebook.com/'+$('#facebook').val(), function(fd) {
        $('#id').val(fd.id);
        $('#name').val(fd.name);
        $('#first_name').val(fd.first_name);
        $('#last_name').val(fd.last_name);
        $('#link').val(fd.link);
        $('#username').val(fd.username);
        $('#gender').val(fd.gender);
        $('#locale').val(fd.locale);
    });
});​ 
```

这是我要决定的第二个。 [http://jsfiddle.net/VuY2b/46/](http://jsfiddle.net/VuY2b/46/)

```
var facebook_account = '';

function fillForm() {
    facebook_account = $('#facebook').val();

    $.getJSON('http://graph.facebook.com/' + facebook_account, function(data) {
        var facebook_data = data;
        console.log(facebook_data);
        var inputs = $('form > input');
        for (var key in facebook_data) {
            for (var l = 0; l < inputs.length; l++) {
                if (inputs[l].getAttribute('name') === key) {
                    inputs[l].value = facebook_data[key];
                }
            }
        }
    });

}

var x = document.getElementById('account_get');
x.addEventListener("click", fillForm, false);​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:34:21.710

第一个简单，第二个复杂。

根据我的说法，第二种方法很有效，因为如果您的网站表单属性不同，第二种方法会检查正确的匹配属性并正确填写。所以我更喜欢第二种。

# jquery - 在 ContentEditable 元素中编辑文本后按 Enter 键执行功能

> ID：13384383
> 
> 赞同：3
> 
> 时间：2012-11-14T17:52:13.057
> 
> 标签：jquery, contenteditable

我有一个已设置为 ContentEditable =“true”的 h1 元素。在该元素中，我想将文本限制为仅一行，并且在按下第一个输入后将焦点设置到页面的另一个元素。

所以我设置了带有 nowrap 和 overflow hidden 的 css，这在视觉上将 css 限制为一行。现在按回车键，我想设置焦点，所以我开始使用以下基本 jquery 来检测按回车键，但警报不起作用？

```
$(document).ready(function() {
 $('.edit').keypress(function(e) {
     if(e.which == 13) {
    alert('You pressed enter!');
}
 });
 }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:57:13.303

使用`keydown` [jsfiddle](http://jsfiddle.net/dCLgT/1/)

```
$(document).ready(function() {
 $('.edit').keydown(function(e) {
     if(e.which == 13) {
        $(this).blur().next().focus();
        return false;
      }
 });
 }) 
```

# telerik - KendoUI 网格本地分页不适用于远程数据？

> ID：13384385
> 
> 赞同：0
> 
> 时间：2012-11-14T17:52:15.043
> 
> 标签：telerik, kendo-ui

我正在尝试使用 Kendo-UI 来管理页面上的网格，但是我很难使用以下特定设置：

数据是从远程源获取的，但是，我想在客户端而不是服务器端进行分页。

整个问题可以很容易地用下面的 jsfiddle 来概括：http: [//fiddle.jshell.net/dimodi/4eNu4/](http://fiddle.jshell.net/dimodi/4eNu4/)

当 时`serverPaging: true`，一切都按预期工作，但是当 时`serverPaging: false`，第一页之后没有显示任何条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:53:26.113

问题是您定义了一个不返回任何数据的 dataBound 事件函数。

将您的功能定义为：

```
function resizeGrid(d) {
    var gridElement = $("#grid");
    var dataArea = gridElement.find(".k-grid-content");
    var newHeight = gridElement.parent().innerHeight() - 2;
    var diff = gridElement.innerHeight() - dataArea.innerHeight();
    gridElement.height(newHeight);
    dataArea.height(newHeight - diff);
    return d;
} 
```

我添加了一个参数`d`，我在您的处理结束时返回。

更新小提琴： http: [//fiddle.jshell.net/4eNu4/253/](http://fiddle.jshell.net/4eNu4/253/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T17:52:34.843

您真正需要做的就是删除`serverPaging: true`配置选项。然后只需`pageSize: 10`在架构中设置 a ，然后添加`pageable: true`到网格的配置中以允许客户端分页。

更新了你的小提琴[http://jsfiddle.net/4eNu4/247/](http://jsfiddle.net/4eNu4/247/)希望这就是你要找的。

# c# - 我的 Outlook 加载项如何获取用户在我的自定义菜单中右键单击的附件对象？

> ID：13384389
> 
> 赞同：3
> 
> 时间：2012-11-14T17:52:21.663
> 
> 标签：c#, outlook, vsto, outlook-addin, ribbonx

**我想在上下文菜单中右键单击它并单击自定义按钮时获取当前选定的嵌入式附件对象。**

这些是我到目前为止所做的步骤：

*   为 ContextMenuInlinePicture 功能区上下文菜单添加了自定义按钮

    ```
    <customUI ...>
        <contextMenus>
        <contextMenu idMso="ContextMenuInlinePicture">
            <button id="SendInlinePictureToHbbButton"
                    label="Send to HBB"
                    onAction="OnSendInlinePictureToHbbButtonClick" />
        </contextMenu>
        </contextMenus>
    </customUI> 
    ```

*   通过右键单击它，我正在调用我的函数 OnSendInlinePictureToHbbButtonClick：

    ```
     public void OnSendInlinePictureToHbbButtonClick(IRibbonControl control)
    {
        var msg = "OnSendMailToHbbButtonClick \n\n";
        if (control.Context is Explorer)
        {
            msg = "Context=Explorer \n";
            var explorer = control.Context as Explorer;
            if (explorer.AttachmentSelection.Count >= 1)
            {
                msg += "AttachmentSelection \n";
                msg = explorer.AttachmentSelection
                    .Cast<Attachment>()
                    .Aggregate(msg, (current, attach) => current + attach.DisplayName + "\n");
            }
            else
            {
                var selection = explorer.Selection;
                msg += "MailItemSelection \n";
                if (selection.Count == 1)
                {
                    var olItem = new OutlookItem(selection[1]);
                    msg = msg + olItem.Subject + "\n" + olItem.LastModificationTime;
                }
                else
                {
                    msg = msg + "Multiple Selection Count=" + selection.Count;
                }
            }
        }
        MessageBox.Show(msg);
    } 
    ```

*   运行加载项时，我可以在右键单击嵌入图像/附件时看到自定义上下文菜单项。

![在此处输入图像描述](../Images/1c101e366150b178b5121aa4db860f3a.png)

*   单击该按钮后，运行上述方法，但我无法获得“AttachmentSelection”。相反，我得到“MailItemSelection”。

![在此处输入图像描述](../Images/1570c1a8016d45e83b95531db139ccf7.png)

*   **我怎样才能让附件对象用户右键单击**，所以我可以使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:33:53.153

我已通过 MSDN 订阅事件解决方案联系了 Microsoft，他们告诉我这无法完成。

附加 MS 响应：

> 您好 Martin，我来自消息传递开发人员支持团队，现在已经接管了这个案例。对于延迟，我深表歉意，但我的团队目前的工作量非常大，这影响了我们的响应时间。我已经查看了 [我的 Outlook 加载项如何获取用户在我的自定义菜单中右键单击的附件对象中描述的问题？](https://stackoverflow.com/questions/13384389/how-to-get-currently-selected-item-while-clicking-on-custom-button-context-menu) ，简单的答案是不可能使用 Outlook 对象模型做你想做的事情。您的代码正在执行预期的操作，因为您正在查询 Explorer 对象以获取其选定项目——并且您正在返回 MailItem。这是 Explorer 对象中的选定项。预览窗格没有显示任何事件/属性，因此无法确定在那里选择了哪个对象。如果有帮助的话，可以找到当前所选项目的所有内联附件，但您所追求的功能不可用。如果您想了解更多信息，请告诉我。

# mysql - 在触发器中引用时，MySQL 表 .new 应该不存在

> ID：13384391
> 
> 赞同：1
> 
> 时间：2012-11-14T17:52:37.587
> 
> 标签：mysql, triggers

我在数据库中有以下三个（InnoDB-）表`MySQL`：

```
Entity (DLID)
Category (CatID, CatName)
hasCategory (DLID, CatID) 
```

现在，在插入表格时，`hasCategory`我想确保每个`Entity`都与至少一个相关联`Category`。因此，我编写了以下触发器：

```
delimiter |

create trigger Max before insert on hasCategory for each row begin
    if  (exists (select distinct DLID from Entity where not exists (select distinct new.DLID from new))) then
        signal sqlstate '45000'
            set message_text = 'Min of 1 category per entity required';
    end if;
end|

delimiter ; 
```

现在，当我执行以下查询时：`insert into hasCategory values (1, 1);`我得到了错误`error code 1146: table mydb.new does not exist`。我创建了一些与此类似的其他触发器，也指的是新表，它工作得非常好。然而，我不明白是什么导致了这个特定触发器中的错误。

该`select`声明是否可能引起一些麻烦？我读过只有`select into`语句在程序中有效，但我不知道这是否与此有关。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:56:16.387

```
select distinct new.DLID from new 
```

`new`就像错误状态一样，您的数据库中没有表。您可以使用`NEW`将插入触发器中的记录，但不能将其用作表名并从中进行选择。

尝试

```
if (select 1 from Entity where DLID = new.DLID) = 1 then 
```

# dynamic - PLSQL : 动态表记录持有者

> ID：13384394
> 
> 赞同：0
> 
> 时间：2012-11-14T17:53:09.290
> 
> 标签：dynamic, plsql, cursor

如果我想从表中获取记录（表名是动态的输入），如何定义记录持有者或如何从这个定义的表中获取数据？ **p_table_name%rowtype**将不符合要求，因为 p_table_name 是一个参数，而不是表名。

```
PROCEDURE do_scan(p_table_name IN VARCHAR2
    ,p_min_num IN NUMBER
    ,p_time_range IN NUMBER
    ,p_problem_desc OUT
    ,p_result_code OUT) 
IS
    TYPE ObjCurTyp  IS REF CURSOR;
    v_obj_cursor    ObjCurTyp;
    v_obj_record     ???????(p_table_name%rowtype)
BEGIN
    v_stmt_str := 'Select * from :t where date_started > TRUNC(SYSDATE-3)';
    OPEN v_obj_cursor FOR v_stmt_str USING p_table_name;

    LOOP
        FETCH v_obj_cursor INTO v_obj_record;
            EXIT WHEN v_obj_cursor %NOTFOUND;

    END LOOP;

END do_scan; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:15:44.577

您可以将该代码作为动态 PL/SQL 块放在 EXECUTE IMMEDIATE 语句中。

```
PROCEDURE do_scan
(
    p_table_name    IN VARCHAR2
    p_min_num       IN NUMBER
    p_time_range    IN NUMBER
    p_problem_desc  OUT
    p_result_code   OUT
) 
IS
BEGIN
    EXECUTE IMMEDIATE
        'DECLARE '                                           ||
        '    TYPE ObjCurTyp  IS REF CURSOR; '                ||
        '    v_obj_cursor    ObjCurTyp; '                    ||
        '    v_obj_record   ' || p_table_name || '%rowtype; '||
        'BEGIN '                                             ||
        '    v_stmt_str := ''Select * from :t where '        || 
        '        date_started > TRUNC(SYSDATE-3)''; '        ||
        '    OPEN v_obj_cursor '                             ||
        '        FOR v_stmt_str USING '                      || 
                 p_table_name || '; '                        ||
        '    LOOP '                                          ||
        '        FETCH v_obj_cursor INTO v_obj_record; '     ||
        '           EXIT WHEN v_obj_cursor %NOTFOUND; '      ||
        '    END LOOP; '                                     ||
        'END;';
END do_scan; 
```

问候，

达里约什

# .htaccess - joomla 页面的 htaccess 重定向

> ID：13384402
> 
> 赞同：1
> 
> 时间：2012-11-14T17:53:41.410
> 
> 标签：.htaccess, joomla

如何对以下内容进行 htaccess 重定向

```
http://goozga.com/demo/index.php?option=com_content&view=article&id=70 
```

需要将上面的网址改写为

```
http://goozga.com/demo/index.php?option=com_content&view=article&id=73 
```

请帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:30:30.827

尝试类似：

```
RewriteCond %{QUERY_STRING} option=com_content&view=article&id=70$
RewriteRule .* index.php?option=com_content&view=article&id=73 [L] 
```

请注意，您的问题与 Joomla 无关，而是取决于 Apache `mod_rewrite`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:37:57.410

在 Joomla 中，您还可以使用重定向组件。您只需添加一个新的重定向规则，第一个 URL 作为源，第二个作为目标 URL。

# json - 无法将 Json 解析为 .net 对象

> ID：13384403
> 
> 赞同：1
> 
> 时间：2012-11-14T17:53:42.783
> 
> 标签：json, parsing

我研究过其他类似的问题，但我做的不对。我的 vb.net 类是错误的或什么的。我的班级应该只尝试代表候选人还是什么？我需要反序列化此 json 的帮助：

```
{
  "spatialReference" : {
    "wkid" : 2286
  },
  "candidates" : [
    {
      "address" : "100 MAIN ST",
      "location" : {
        "x" : 1144782.9490543604,
        "y" : 81361.525678694248
      },
      "score" : 100,
      "attributes" : {

      }
    },
    {
      "address" : "100 E MAIN ST",
      "location" : {
        "x" : 1120908.3257195801,
        "y" : 169917.71846333146
      },
      "score" : 77,
      "attributes" : {

      }
    }
  ]
} 
```

我正在使用以下代码进行反序列化：

```
Public Shared Function Deserialise(Of T)(ByVal json As String) As T
      Dim obj As T = Activator.CreateInstance(Of T)()

      Using ms As MemoryStream = New MemoryStream(Encoding.Unicode.GetBytes(json))
         Dim serializer As DataContractJsonSerializer = New       DataContractJsonSerializer(obj.GetType())
         obj = serializer.ReadObject(ms)
         Return obj
      End Using
   End Function 
```

我的 vb.net 类看起来像这样：

```
<DataContract()> _
Public Class SearchResults
   Private mCandidates() As candidate

   <DataContract()> _
   Public Class SpatialReference
      Private mwkId As String

      <DataMember()> _
      Public Property wkid() As String
         Get
            Return mwkId
         End Get
         Set(ByVal value As String)
            mwkId = value
         End Set
      End Property
   End Class

   <DataMember()> _
   Public Property Candidates() As candidate()
      Get
         Return mCandidates
      End Get
      Set(ByVal value As candidate())
         mCandidates = value
      End Set
   End Property
End Class

<DataContract()> _
   Public Class candidate
   Private mAddress As String
   Private mLocation As Location
   Private mScore As String
   Private mAttr As String

   <DataMember()> _
Public Property address() As String
      Get
         Return mAddress
      End Get
      Set(ByVal value As String)
         mAddress = value
      End Set
   End Property

   <DataMember()> _
   Public Property location() As Location
      Get
         Return mLocation
      End Get
      Set(ByVal value As Location)
         mLocation = value
      End Set
   End Property

   <DataMember()> _
   Public Property score() As String
      Get
         Return mScore
      End Get
      Set(ByVal value As String)
         mScore = value
      End Set
   End Property

   <DataMember()> _
   Public Property attributes() As String
      Get
         Return mAttr
      End Get
      Set(ByVal value As String)
         mAttr = value
      End Set
   End Property
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:12:40.297

I dont know .net but i can tell you it related to JAVA. You can relate this with .Net

When we need to serialize or deserialize our class objects to json or from json we need Gson,

In Java we generally import tha package Gson package create its object for example:-

Suppose i have a class User, whose object you wanna serialize. Now to do this

take the whole object covert it to JSON with some key name with the help of Gson

```
jsonObject.put("KEYFORTHISjsonObject", gson.toJson(userClassObject)); 
```

Now you have serialized it to JSON, While deserializing it

just create ur User object. Get Json Object from Json file

```
JSONObject jsonObject = new JSONObject(jsonFile.toString())
    userObject2 =  gson.fromJson(jsonObject.toString(), User.class); 
```

so now userObject2 has all the values that you serialized earlier.

if you are not familiar with JAVA then Read about Gson for .net or you can read this link as well [http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

# pascal - 为什么编译器期望在我在函数声明中放置“，”的地方出现“）”？

> ID：13384408
> 
> 赞同：1
> 
> 时间：2012-11-14T17:54:00.020
> 
> 标签：pascal, freepascal, turbo-pascal

在我的 AS 级计算课程中，我们使用的是 Turbo Pascal，而对于扩展工作，我的任务是制作 Blackjack/21 风格的纸牌游戏。我决定为通用纸牌游戏数据结构制作一个单元：

```
unit CardLib;

interface

type
    CardSuite = (clubs, diamonds, hearts, spades);

    Card = record
        name:String;
        value:Integer;
        suite:CardSuite;
    end;

    CardDeck = object
        cards: Array[0..51] of Card;
        freeIndex: Integer;
        constructor init;
        procedure addNewCard(suite:CardSuite, name:String, value:Integer);
        procedure addCard(c:Card);
        function drawCard:Card;
        destructor done;
    end;

    CardHand = object
        cards: Array[0..51] of Card;
        freeIndex: Integer;
        constructor init(deck:CardDeck, size:Integer);
        function getLowestTotal:Integer; {Aces are worth 1}
        function getHighestTotal:Integer; {Aces are worth 11}
        procedure addCard(c:Card);
        destructor done;
    end;
... 
```

我在 Turbo Pascal 兼容模式下使用 Free Pascal 编译此代码，但出现以下错误：

```
CardLib.pas(18,39) Fatal: Syntax error, ")" expected but "," found
Fatal: Compilation aborted
Error: /usr/bin/ppcarm returned an error exitcode (normal if you did not specify a source file to be compiled) 
```

如果我注释掉 addNewCard 过程，我会在 CardHand 构造函数中得到相同的错误。任何想法是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:01:34.953

使用分号分隔参数。

```
procedure addNewCard(suite:CardSuite; name:String; value:Integer); 
```

# sql-server-2008 - 有没有办法在类似的符号（例如）中替换可变长度的可变字符？

> ID：13384410
> 
> 赞同：0
> 
> 时间：2012-11-14T17:54:13.827
> 
> 标签：sql-server-2008, tsql

一列中的项目 `name`

```
Tritton AX 180: Universal Gaming Headset (PS3/Xbox 360/PC/Mac)
Rome: Total War - White Label (PC DVD)
Railworks3 - Train Simulator 2012 (PC) 
```

我想得到：

```
Tritton AX 180: Universal Gaming Headset
Rome: Total War - White Label
Railworks3 - Train Simulator 2012 
```

我调查过`replace()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:02:01.503

```
DECLARE @s VARCHAR(100) = 
       'Tritton AX 180: Universal Gaming Headset (PS3/Xbox 360/PC/Mac)'

SELECT SUBSTRING(@s, 0, CHARINDEX('(',@s)) 
```

`name`因此，如果您的列名是

```
SELECT SUBSTRING(name, 0, CHARINDEX('(',name) ) 
```

# django-crispy-forms - django-crispy-forms 将什么模板变量用于表单集表单？

> ID：13384413
> 
> 赞同：0
> 
> 时间：2012-11-14T17:54:20.363
> 
> 标签：django-crispy-forms

我的模板代码中有以下内容：

```
{% crispy form.meters_formset form.meters_formset.form.helper %} 
```

这会呈现一个表单集，它是我的表单的实例变量。这就是我处理带有嵌入式表单集的表单的方式。

在表单集表单 ( ) 的助手中`form.meters_formset.form.helper`，我在布局中有一个`HTML`元素，我想在其中访问附加到该表单集表单的实例。我该怎么做？Crispy 表单必须执行一个 for 循环来遍历表单集的表单，但它使用的是什么模板变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:09:26.973

我通过替换解决了这个问题

```
{% crispy form.meters_formset form.meters_formset.form.helper %} 
```

和

```
{% for subform in form.meters_formset %}
{% crispy subform %}
{% endfor %} 
```

并使用`{{ subform.instance }}`.

# asp.net - HTML5 / CSS3 在一行中水平和垂直居中 2 个项目

> ID：13384417
> 
> 赞同：1
> 
> 时间：2012-11-14T17:54:24.513
> 
> 标签：asp.net, asp.net-mvc, html, css

我有 2 个项目：一个日历组件和一个按钮。它们的高度/宽度不同。

如何将它们水平和垂直居中排列？

桌子？分区？...

我认为每个对象都有 50% 的区域并以该区域为中心。但是，我可能愿意将它们水平居中（彼此之间有间隙）。然后将它们垂直居中作为一对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:31:24.350

这对我有用：http: [//jsfiddle.net/bpkH4/](http://jsfiddle.net/bpkH4/)。一些 CSS 纯粹是装饰性的。

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
    #btn
    {
        background-color:#FF0000;
        width:100px;
        height:30px;
    }

    #comp
    {
        background-color:#00FFFF;
        width:200px;
        height:200px;
    }

    #container
    {
        width:500px;
        height:300px;
        overflow:auto;
        background-color:#CCCCCC;           

        text-align:center;
    }

    .contain
    {

        background-color:#AAAAAA;
        float:left;
        width:50%;
        height:100%;
        position: relative;
    }

    .elem
    {
        position: absolute;
        top:0;
        bottom:0;
        left:0;
        right:0;
        margin:auto;
    }
    </style>
</head>
<body>
    <div id="container">
        <div class="contain">
            <div class="elem" id="comp">Component in Here</div>
        </div>
        <div class="contain">        
            <div class="elem" id="btn">Button</div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:59:06.663

将它们放在容器 div 中并设置边距：0 auto; 在每个上将它们水平居中。您还可以使用相同的技术在页面上水平居中容器。

[CSS 水平对齐](http://www.w3schools.com/css/css_align.asp)

[居中：自动宽度边距](http://bluerobot.com/web/css/center1.html)

对于容器的垂直居中：

[6种使用CSS垂直居中的方法](http://www.vanseodesign.com/css/vertical-centering/)

# c - c中一个基本但棘手的语法

> ID：13384422
> 
> 赞同：4
> 
> 时间：2012-11-14T10:13:24.350
> 
> 标签：c

gcc编译器上的foll基本代码输出3。

但是当我替换`{}`它时`()`它输出 4

```
 int i={3,2,4};printf("%d",i); 
```

有人可以解释这种行为吗？运算符遵循从左到右的`,`评估，但在`{}`.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-14T10:25:29.937

当您使用 {3,2,4} 时，您使用的是标量初始化，但您提供的元素比您应该提供的更多。这将触发编译器的警告，但是它会编译和执行，并且标量初始化的第一个元素将归因于变量 i。

当您使用 (3,2,4) 时，您基本上是在使用逗号运算符（需要括号，因为您正在初始化变量）。逗号运算符计算第一个操作数并丢弃结果，然后计算第二个操作数并返回结果。所以这里你计算 3，丢弃它，然后计算 2，返回它（这个返回值用作第二个逗号的左操作数），最后计算 4，并返回它，所以 4 归于变量 i。

这是另一个有趣的操作：

```
int i;
i = 3,4;
printf("%d\n",i); 
```

这将打印 3，因为首先 i=3 将被计算（因为这是逗号的左操作数），其结果将被丢弃。然后 4 将被评估并返回其结果，但不归因于变量。

为了让事情变得更有趣：

```
int i,j;
j = (i = 3,4);
printf("%d %d\n",i,j); 
```

这将打印“3 4”。换句话说，我上面描述的一切都会发生，但是当 4 被评估并返回时，它现在将归因于 j。

# vb.net - 记录保存在单独的表单上后刷新/重新查询表单上的组合框

> ID：13384432
> 
> 赞同：0
> 
> 时间：2012-11-14T17:55:11.890
> 
> 标签：vb.net, .net-4.0

我整个早上都在谷歌搜索和浏览这个网站，但没有发现任何似乎有用的东西。我在 form1 上有一个组合框，它从数据源 tblCardTypeDD 获取其显示值。其显示成员为 sCardType，其值成员为 iCardTypeID。它选择的成员是来自 tblInventory 的 fkCardTypeID。

当我单击一个按钮时，form2 会弹出一个简单的 datagridview，它允许我添加更多要在下拉列表中使用的卡片类型。目前我一直在尝试将代码添加到保存按钮单击方法，但我只是找不到实际更新组合框的组合。

我一直在尝试以下方法：

```
frmInventory.SEquipTypeComboBox.DataSource = Nothing
frmInventory.SEquipTypeComboBox.DataSource = Me.EngDBbeDataSet.tblCardTypeDD 
```

但执行上述操作后下拉列表变为空白。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:45:45.990

你应该检查这个页面，也许它会帮助你：

[http://msdn.microsoft.com/en-us/library/w67sdsex.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1](http://msdn.microsoft.com/en-us/library/w67sdsex.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

如果没有：

如果您将断点放在“重置”组合框数据源绑定的位置，请检查数据源是否包含您希望在组合框中看到的新值。听起来可能很愚蠢，但这是一个经常发生的错误，如果是这种情况，您就知道问题不在于绑定

同样，在没有数据源并以您所做的方式再次添加数据源之后，您应该告诉哪一列将再次成为显示成员，如下所示：

```
ComboBox1.DisplayMember = "Column1" 
```

虽然如果您查看我告诉您的站点，您应该查看说明如何暂停和恢复绑定，而不是像那样删除数据源并再次添加它。

尽管如果您使用的是数据表，则值应该会自动更改，并且没有理由删除并重新绑定组合框。

--

为了证明您不需要重新绑定，我很快就制作了一段非常脏的代码来证明这一点。

form1 有一个绑定到数据表的组合框，它还有一个按钮来调用名为 form2 的第二个表单。

form2 有一个按钮，可以将 2 行添加到 Datatable，然后返回到第一个屏幕。

代码形式 1：

```
Public Class Form1

    Private dataSet As New DataSet("DataSet1")
    Private dataTable As DataTable = dataSet.Tables.Add("DataTable1")

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

        dataTable.Columns.Add("Column1")

        Dim row1 As DataRow = dataTable.NewRow()
        row1("Column1") = "Data1"
        dataTable.Rows.Add(row1)
        Dim row2 As DataRow = dataTable.NewRow()
        row2("Column1") = "Data2"
        dataTable.Rows.Add(row2)

        ComboBox1.DataSource = dataTable
        ComboBox1.DisplayMember = "Column1"
    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim form2 As New Form2(dataTable)
        form2.Show()
    End Sub

End Class 
```

代码表格2：

```
Public Class Form2

    Private _dataTable As DataTable

    Public Sub New(ByVal dataTable As DataTable)
        InitializeComponent()
        _dataTable = dataTable
    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

        Dim row3 As DataRow = _dataTable.NewRow()
        row3("Column1") = "Data3"
        _dataTable.Rows.Add(row3)
        Dim row4 As DataRow = _dataTable.NewRow()
        row4("Column1") = "Data4"
        _dataTable.Rows.Add(row4)
        Me.Close()
    End Sub
End Class 
```

# ruby-on-rails - 在 RSpec 请求规范中测试购买过程

> ID：13384434
> 
> 赞同：1
> 
> 时间：2012-11-14T17:55:17.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, rspec, integration-testing

我正在尝试通过填写购买表格来测试请求规范中的订单流程：

```
describe "CC order" do
  before do
    visit order_path "product"
    fill_in "full_name", with: "test name"
    fill_in "email", with: "test@email.com"
    fill_in "card_number", with: "4242424242424242"
    fill_in "card_cvc", with: "123"
    # etc...

    click_on "complete-button"
  end

  it "should display confirmation message" do
    page.should have_content "Thanks for your order!"
  end
end 
```

提交购买表单并在开发中正确保存后，应保存新的用户和订单。但是，我的测试失败了，因为它没有处理订单，而是告诉我数据库已锁定：

![数据库锁定](../Images/253edd6975fb477cbab0a9e110b01836.png)

我确实打开了事务性固定装置，并且我的一些其他测试使用了它们。还有其他方法可以测试我的订单流程吗？

`page`编辑：当我在 it 块中使用时，它似乎打开了。如果我只是让测试块为空，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:03:01.117

我的想法已经用完了，所以我在开发 + 测试中从 sqlite 切换到了 postgresql。这解决了问题。

# google-chrome - CSS3灵活框布局（最新）最大高度

> ID：13384436
> 
> 赞同：2
> 
> 时间：2012-11-14T17:55:24.103
> 
> 标签：google-chrome, css, webkit, flexbox

我正在使用[最新](http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/)的灵活框规范（据我所知，目前仅受最新的 Chrome 支持）并试图阻止 flex 项目超过最大高度。

**最好用一个例子来解释：http: [//jsbin.com/efedof/2/edit](http://jsbin.com/efedof/2/edit)**

第一个例子`.content`（加上两个`.bar`元素）没有超过 的高度`300px`，所以是正确的。但是对于第二个示例，文本将底部`.content`向下推到`.box`div 之外。

如何强制三个组合的 flex 项目的最大总高度，以便该`.content`区域变得可滚动而不是拉伸到外部并将`.box`推出？`.bar``.box`

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T21:17:33.217

[找到了答案！](https://stackoverflow.com/questions/12022288/how-to-keep-a-flex-item-from-overflowing-due-to-its-text). 诀窍是添加`min-height: 0;`到`.content`div。

# hosting - 有没有办法在 Google 代码托管网站上的 wiki 页面发生更改时收到通知？

> ID：13384439
> 
> 赞同：1
> 
> 时间：2012-11-14T17:55:36.817
> 
> 标签：hosting, wiki, google-code

有没有办法在谷歌代码托管网站上的 wiki 页面发生更改时自动收到通知（通过电子邮件）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:49:14.180

我将使用[http://code.google.com/p/mutagen/wiki/FAQ](http://code.google.com/p/mutagen/wiki/FAQ)作为示例。该页面有一个编辑的 RSS 提要，[http://code.google.com/feeds/p/mutagen/svnchanges/basic](http://code.google.com/feeds/p/mutagen/svnchanges/basic?path=/wiki/FAQ.wiki) ?path=/wiki/FAQ.wiki 。

如果您想知道 wiki 中的任何页面何时被编辑，那么 wiki 索引页面及其关联的 RSS 提要（例如[http://code.google.com/p/mutagen/w/list](http://code.google.com/p/mutagen/w/list)和[http://code. google.com/feeds/p/mutagen/svnchanges/basic?path=/wiki/](http://code.google.com/feeds/p/mutagen/svnchanges/basic?path=/wiki/)）应该可以完成这项工作。

使用[IFTTT 提要](https://ifttt.com/feed)或更专用的服务，例如[Blogtrottr](http://blogtrottr.com/)。输入 RSS 提要 URL 和您的电子邮件地址，然后就可以开始了。

编辑：事实上，Blogtrottr 使用 wiki 页面的 URL，无需计算 RSS URL。IFTTT 也可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:02:47.963

好的，我想我找到了一种更简单的做事方式。

1.  转到：[https ://code.google.com/hosting/settings](https://code.google.com/hosting/settings)
2.  单击“每当其他用户向 wiki 页面添加评论时，给我发送电子邮件”复选框
3.  为您希望收到通知的 wiki 页面加注星标。

# ruby-on-rails - 在 s3 上使用 redirect_to 文件时。如何显示图像或下载文件

> ID：13384441
> 
> 赞同：4
> 
> 时间：2012-11-14T17:55:44.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Rails 3 AttachmentsController 中，我有以下内容：

```
 def show
    attachment = Attachment.find_by_id(params[:id])
    redirect_to(attachment.authenticated_url())
  end 
```

其中 authenticated_url 只是 S3 访问文件的 URL。

问题是文件总是由浏览器下载。我想要发生的是，如果文件是图像/pdf，浏览器可以呈现的东西，在浏览器中显示文件并且只下载非浏览器友好的文件。

你以前见过这个吗？关于从哪里开始的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T18:25:12.597

send_file 也可用于远程 url

```
file = open("http://cdn2.example.com/somefile.pdf")
send_file(file, :filename => "example.pdf", :type => "application/pdf" , :disposition => "attachment") 
```

这里将下载example.pdf。如果你想在浏览器本身中打开 pdf 使用这个

```
file = open("http://cdn2.example.com/somefile.pdf")
send_file(file, :filename => "example.pdf", :type => "application/pdf" , :disposition => "inline") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:04:07.827

```
redirect_to @attachment.url 
```

我也在使用回形针，它在浏览器中显示图片。你必须做一些与此不同的事情吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:06:33.943

我想你会想要研究 rails send_file 方法。

1) [http://apidock.com/rails/ActionController/DataStreaming/send_file](http://apidock.com/rails/ActionController/DataStreaming/send_file)

:disposition 选项可让您决定是下载文件还是内联显示文件。我在我的 Rails 应用程序中使用它来让用户下载 mp3 文件。

希望这可以帮助。

# key-management - 开源密钥管理解决方案

> ID：13384443
> 
> 赞同：14
> 
> 时间：2012-11-14T17:55:49.243
> 
> 标签：key-management

我正在研究密钥管理解决方案以符合 PCI 标准。我已经与该领域的许多供应商进行了交谈，虽然我喜欢他们的产品，但成本超出了我的预算。有人知道密钥管理的任何开源或低成本解决方案吗？我使用 Windows/.NET 环境，因此我更喜欢针对该环境的解决方案，但是我有兴趣了解那里的任何内容。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-19T04:20:22.337

看看[KeyManager](https://wiki.openstack.org/wiki/KeyManager)，它是 OpenStack 套件的关键管理组件。该应用程序可以用作 OpenStack 之外的独立密钥管理解决方案。

作为 OpenStack 的一个组件，KeyManager 正在积极开发中，新功能计划以六个月为周期。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T18:47:03.383

我们和你有过类似的经历。我们需要一个用于 PCI 合规性的密钥管理解决方案，而我们看到的所有商业产品都太贵了。对于小客户来说，一些关键经理的成本比我们的产品还高！

我们最终制作了一个基于软件的密钥管理器。我们提出要求，离岸开发人员对其进行编码。有一次，他们正在寻找其他客户来使用它。我不知道他们是否还在。

让我解释一下我们探索的选项。首先要记住的是，PCI 合规性和安全性是不同的东西，你可以是 PCI 合规的，但不是很安全。

选项 0 - 为每个 DB 列分配一个键，并将键存储在 DLL 文件中。您的应用程序链接在 DLL 文件中以访问用于加密和解密数据的密钥。没有人知道钥匙。对于定期密钥替换，您使用新密钥创建一个新的 DLL，使用旧密钥解密所有数据并使用新密钥重新加密数据。然后使用带有新密钥的新 DLL 重新启动您的应用程序。（请注意，如果您考虑恢复数据库备份，则需要保留旧密钥。）

我第一次听说选项 0 时，我很惊讶它符合 PCI 标准。我们不使用选项 0。

改进选项 0 的方法。

如果您的环境中有 HSM，请使用 HSM 加密 DLL 文件中的密钥。当您的应用程序启动时，它将使用 HSM 解密密钥。如果您想要更高的安全性，请在每次需要时解密密钥。

加密密钥后，将它们存储在数据库表中是安全的。如果您为每个密钥（旧的和新的）分配一个小的整数密钥 ID，则可以将密钥 ID 与加密数据一起存储。这使您可以进行增量密钥替换并避免停机。

在许多进程中将您的密钥清晰地保存在内存中，会增加您遭受内存扫描攻击以查找密钥的风险。您可以创建一个新进程，该进程是唯一解密密钥的进程。您的应用程序与这个新流程对话以加密和解密数据。这种新工艺应该在一个“表面积”很小的盒子上进行保护。由于敏感数据现在正在通过网络传输，因此应该对这种通信进行加密。SSL 是一个不错的选择。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-28T00:35:03.767

我意识到这是一个旧线程，但有几个选项：

1.  一个完全免费的开源密钥管理解决方案位于[http://sourceforge.net/projects/strongkey](http://sourceforge.net/projects/strongkey)。我承认，该软件有点过时并且设置起来相当复杂，因为它假设您有一个 PKI 来向应用程序客户端颁发数字证书，以便与密钥管理服务器进行通信，并保护客户端设备上的密钥。
2.  三年前，最初的 StrongKey 软件被大幅简化，并集成到带有加密硬件模块（TPM 和 HSM）的设备中，以提供更强大的密钥管理。不幸的是，尽管设备上的软件都是 FOSS，但集成解决方案本身并不是免费的 - 其价格列在其网站 ( [http://www.strongauth.com/products/key-appliance.html](http://www.strongauth.com/products/key-appliance.html) ) 上。

但是，选项 #2 有很多优点，因为它允许您在完全符合 PCI 的同时利用公共云（搜索“Regulatory Compliant Cloud Computing (RC3)”并单击 IBM 上的链接 - 我只能发布两个链接在我的回答中）在旧金山举行的 RSA 2013 上发布了更多关于如何利用此设备的公告。

我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-05T10:04:34.743

KLMS over KMIP 是很好且易于使用的密钥管理解决方案。这是一个用 Java 编写的开源解决方案。请参阅以下链接以供参考。[http://www.ibm.com/developerworks/library/se-kmip4j/](http://www.ibm.com/developerworks/library/se-kmip4j/)

名为 stubInterface 的包将包含使用 KLMS over KMIP 所需的所有 api。

**KLMS** : 关键生命周期管理系统

**KMIP** : 密钥管理互操作性协议

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-15T18:40:36.740

我将添加到此列表中，因为我在搜索中找到了它，其他人可能会从扩展列表中受益。

我最近发现了似乎是 alpha 的[KeyWhiz 。](https://square.github.io/keywhiz/ "钥匙精灵")

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-03T14:14:01.920

SNipeit 是我见过的最好的开源软件，非常健壮且非常易于使用，即使对于非技术人员也是如此。

[https://snipeitapp.com/demo/](https://snipeitapp.com/demo/)

看看那里。

# java - 在我的部署中设置 Cache-Control no-cache, no-store 是什么？

> ID：13384447
> 
> 赞同：4
> 
> 时间：2012-11-14T17:56:05.507
> 
> 标签：java, spring, jboss, primefaces, spring-webflow

我有一个问题，我的应用程序部署总是返回响应标头：

```
Cache-Control: no-cache
Cache-Control: no-store
Expires:Thu, 01 Jan 1970 00:00:00 GMT
Pragma:no-cache 
```

我正在使用：

Spring 3.1.2.RELEASE

Primefaces JSF 3.4.1

Spring Webflow 2.3.0.RELEASE

JBoss AS 7.0.1

我已经尝试了几乎所有我能找到的应用程序方面的解决方案：

1.  配置 WebContentInterceptor（尝试了它的各种排列）[开箱即用的缓存控制标头过滤器？](https://stackoverflow.com/questions/3234907/right-out-of-the-box-cache-control-header-filter)
2.  编写添加不同 Cache-Control 标头的自定义拦截器（使用 Cache-Control: private 测试）
3.  编写添加 HTTP 响应参数的客户过滤器。在 web.xml 中使用 Cache-Control: private as init-params 配置它
4.  使用 context.xml 文件（在 META-INF/ 和 WEB-INF/ 中都尝试过）禁用 JBoss/Tomcat 中的 Cache-Control [http://daveharris.wordpress.com/2007/07/09/how-to-在 tomcat 中配置缓存控制/](http://daveharris.wordpress.com/2007/07/09/how-to-configure-cache-control-in-tomcat/)

在上述所有情况下，响应头永远不会不同，总是 no-cache，no-store，1970 expires，pragma: no-cache

我的想法不多了，有谁知道在我的响应中设置这些标头是什么，以便我可以针对适当的部署组件来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:04:47.497

导致这种情况的根代码在 Spring MVC 中，从 WebContentGenerator 调用。该类用作 MVC/Webflow 堆栈中几个类的基类：WebContentInterceptor（MVC 拦截器）、AbstractController（MVC 控制器）、AbstractHandlerMethodAdapter（MVC HandlerAdapter）、AnnotationMethodHadlerAdapter（MVC HandlerAdapter）、FlowHandlerAdapter（Webflow HandlerAdapter）、JsfFlowHandlerAdapter（Webflow + JSF 处理适配器）

CacheControl 秒设置为 0 调用 preventCaching 方法。因此，应用程序似乎默认设置为 0。

org.springframework.web.servlet.support.WebContentGenerator

```
protected final void preventCaching(HttpServletResponse response) {
    response.setHeader(HEADER_PRAGMA, "no-cache");
    if (this.useExpiresHeader) {
        // HTTP 1.0 header
        response.setDateHeader(HEADER_EXPIRES, 1L);
    }
    if (this.useCacheControlHeader) {
        // HTTP 1.1 header: "no-cache" is the standard value,
        // "no-store" is necessary to prevent caching on FireFox.
        response.setHeader(HEADER_CACHE_CONTROL, "no-cache");
        if (this.useCacheControlNoStore) {
            response.addHeader(HEADER_CACHE_CONTROL, "no-store");
        }
    }
} 
```

我发现由于我使用的是 JSF + Webflow，因此 JsfFlowHandlerAdapter 首先处理服务器对流/视图的请求。这就是为什么配置拦截器没有帮助的原因，因为此时 JsfFlowHandlerAdapter 已经设置了 Cache-Control 和其他 HTTP 标头。事实证明，我已经扩展了 JsfFlowHandlerAdapter 以处理 FlowExecutionRestorationFailureException（请参阅[Sping Web Flow 防止返回按钮使用](https://stackoverflow.com/questions/7354503/sping-web-flow-preventing-back-button-use)），所以我需要做的就是设置我想要的配置（因为配置属于基类 WebContentGenerator）[。](https://stackoverflow.com/questions/3234907/right-out-of-the-box-cache-control-header-filter)

自定义 JsfFlowHandlerAdapter

```
public class MyAppFlowHandlerAdapter extends org.springframework.faces.webflow.JsfFlowHandlerAdapter {
     ...
    } 
```

webmvc-config.xml

```
<!-- Dispatches requests mapped to flows to FlowHandler implementations -->
    <bean
        class="com.myapp.MyAppFlowHandlerAdapter">
        <property name="flowExecutor" ref="flowExecutor" />
            <!-- Disable built in Cache-Control settings -->
        <property name="cacheSeconds" value="-1" />
        <property name="useExpiresHeader" value="false" />
        <property name="useCacheControlHeader" value="false" />
        <property name="useCacheControlNoStore" value="false" />
    </bean>

<!-- Maps request paths to flows in the flowRegistry; e.g. a path of /hotels/booking 
    looks for a flow with id "hotels/booking" -->
<bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
    <!-- snip out unimportant -->
    <property name="interceptors">
        <list>
            <ref bean="cacheControlInterceptor" />  
        </list>
    </property>
</bean>
    <bean id="cacheControlInterceptor"
    class="com.myapp.CacheControlInterceptor"> 
```

CacheControlInterceptor（设置您自己的 HTTP 标头。在 WebContentGenerator 中执行此操作的方法是最终的，因此不能 @Override）

```
public class CacheControlInterceptor extends HandlerInterceptorAdapter {

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
            //Example below: set your Cache-Control, expires, pragma headers here
        response.setHeader("Cache-Control", "private");

        return true;
    }
} 
```

# javascript - Backbone model.save() 发送的是 PUT 而不是 POST

> ID：13384448
> 
> 赞同：21
> 
> 时间：2012-11-14T17:56:14.037
> 
> 标签：javascript, http, backbone.js

我用这个调用保存：

```
console.log(this.model.isNew());
console.log(this.model);

this.model.save({}, {
    success: function (model, response, options) {
        console.log(response);
    },
    error: function (model, xhr, options) {
        console.log(xhr.result.Errors);
    }   
}); 
```

`isNew()`返回错误。但输出`this.model`的 ID 为 0。（this.model.id 也是 0）

我的网址是`url: ROOTAREA + "/Expenses/Entry/",`

更新工作正常，并按预期使用 PUT。

编辑：这是我模型的一部分：

```
 defaults: function () {
        return {
            DocumentDate: "",
            JobNo_: "",
            PhaseCode: "",
            WorkTypeCode: "",
            Description: "",
            Quantity: 0,
            UnitCost: 0,
            ExpenseCurrencyCode: "",
            ReimbursementCurrencyCode: "",
            UnitofMeasureCode: "DIEM",
            LineNo_: 0
        };
    },
    idAttribute: "LineNo_", 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-14T18:00:51.540

新条目的 ID 甚至不应该存在。问题在于您没有显示的部分 - 在您实例化、创建和填充模型的部分。

这是来自[Backbone 文档](http://backbonejs.org/#Model-isNew)的引用：

> 如果模型还没有`id`，则认为它是新的。

从您的代码中可以清楚地看出您正在分配一个 id 属性。你的后端应该这样做。而且由于您是在客户端上执行此操作，因此骨干网假定它不是新的，并使用`PUT`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-07-23T16:27:39.683

上面的答案是正确的，因为如果`model`你`.save`有一个`id`属性主干将做 a`PUT`而不是 a `POST`。

`type: 'POST'`只需添加到您的保存块即可覆盖此行为：

```
var fooModel = new Backbone.Model({ id: 1});

fooModel.save(null, {
  type: 'POST'
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-01T08:09:45.277

您可以在默认值中指定 ID，只需确保将其设置为`null`（isNew 将设置为 true）。

在你的情况下，它必须是

```
LineNo_: null 
```

# javascript - 绑定为对象值的函数的javascript返回值

> ID：13384452
> 
> 赞同：1
> 
> 时间：2012-11-14T17:56:21.753
> 
> 标签：javascript, jquery

我不能使用以下约定返回值 bools / strings。

[http://jsfiddle.net/eQWyY/](http://jsfiddle.net/eQWyY/)

```
<input id="lol" type="text" value="ahh" />

<script>
function test() {
    var flag = false;
    if ($('#lol').val()) {
        alert($('#lol').val()); //"sanity check - pass"
        flag = true;
    }
    return flag;
};

function modal() {};
var m = new modal();

modal.prototype.init = function(x) {
    this.input = x;
    this.modals = {};
    this.initModalFrames();
    this.executeLogic();
}

modal.prototype.initModalFrames = function() {
    for (i in this.input) {
        this.modals[i] = {
            handle :    this.input[i].handle,
            frame :     this.input[i].frame,
            logic :     this.input[i].logic ? this.input[i].logic : null
        };
    }
}

modal.prototype.executeLogic= function() {
    var s = this;
    $.each(this.modals, function(i, o) {
        if(s.modals[i].logic != null) {
            var x = s.modals[i].logic.call();
            if(x) {
                alert('true');
            }
            else {
                //Always evaluates to false
                alert('false');
            }
        }
    });
}

m.init([
      {handle: '#handle1', frame: '#frame2', logic: function() {test();}},
]);

</script> 
```

该函数似乎没有返回任何东西，并且总是评估为假。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:03:11.500

您的`logic`处理程序应返回`test`执​​行结果：

```
{ handle: '#handle1', frame: '#frame2', logic: function() { return test(); } } 
```

或更简单：

```
{ handle: '#handle1', frame: '#frame2', logic: test } 
```

**演示：http:** [//jsfiddle.net/eQWyY/1/](http://jsfiddle.net/eQWyY/1/)

# mongodb - MongoDB 中的 $pull 操作对我不起作用

> ID：13384453
> 
> 赞同：1
> 
> 时间：2012-11-14T17:56:25.247
> 
> 标签：mongodb

我有一个包含以下键数组对的文档：

```
"home" : [
        "Kevin Garnett",
        "Paul Pierce",
        "Rajon Rondo",
        "Brandon Bass",
        " 5 sec inbound",
        "Kevin Seraphin"
    ] 
```

我想`" 5 sec inbound"`从数组中删除元素并使用以下命令（在 MongoDB shell 中）：

```
>coll.update({},{"$pull":{"home":" 5 sec inbound"}}) 
```

正如查询所验证的那样，这不起作用：

```
>coll.findOne({"home":/5 sec inbound/})
"home" : [
        "Kevin Garnett",
        "Paul Pierce",
        "Rajon Rondo",
        "Brandon Bass",
        " 5 sec inbound",
        "Kevin Seraphin"
    ] 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:32:22.570

同样的陈述对我有用：

```
> db.test.insert({"home" : [
...         "Kevin Garnett",
...         "Paul Pierce",
...         "Rajon Rondo",
...         "Brandon Bass",
...         " 5 sec inbound",
...         "Kevin Seraphin"
...     ]})
> db.test.find({"home":/5 sec inbound/}).count()
1
> db.test.update({},{"$pull":{"home":" 5 sec inbound"}})
> db.test.find({"home":/5 sec inbound/}).count()
0 
```

# java - 使用正则表达式拆分简单的 JSON 结构

> ID：13384454
> 
> 赞同：10
> 
> 时间：2012-11-14T17:56:24.980
> 
> 标签：java, regex, json, split

我以前从未使用过正则表达式，我希望拆分一个包含一个或多个 JSON 对象的文件，JSON 对象不是用逗号分隔的。所以我需要将它们拆分为“}{”并保留两个花括号。这是字符串的样子：

```
{id:"123",name:"myName"}{id:"456",name:"anotherName"} 
```

我想要一个字符串数组，比如使用`string.split()`

```
["{id:"123",name:"myName"}", "{"id:"456",name:"anotherName"}"] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T17:59:05.300

如果您的对象并不比您显示的更复杂，您可以使用如下[环顾四周](http://www.regular-expressions.info/lookaround.html)：

```
String[] strs = str.split("(?<=\\})(?=\\{)"); 
```

例子：

```
String str = "{id:\"123\",name:\"myName\"}{id:\"456\",name:\"yetanotherName\"}{id:\"456\",name:\"anotherName\"}";
String[] strs = str.split("(?<=\\})(?=\\{)");
for (String s : strs) {
    System.out.println(s);          
} 
```

印刷

```
{id:"123",name:"myName"}
{id:"456",name:"anotherName"}
{id:"456",name:"yetanotherName"} 
```

如果您的对象更复杂，则正则表达式可能不起作用，您将不得不解析您的字符串。

# jquery - 通过 jquery 实现 ajax

> ID：13384465
> 
> 赞同：1
> 
> 时间：2012-11-14T17:57:12.270
> 
> 标签：jquery, ajax

我想使用 Ajax 调用页面，当一个 Ajax 调用完成时，其他通过单击按钮`.first`Ajax 调用起作用，但在第二个 ajax 调用不起作用。

```
$('document').ready(function(){
    $('.next').click(function(){
        var a=$("#cs_brief").val();
        var dataObj = {cs_brief : a};
        $.get('b.php',dataObj, function(data) {
            $('#division').html(data);
        });                 
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:03:35.500

如果您需要等待 2 个回调完成，您可以使用[$.when](http://api.jquery.com/jQuery.when/) 例如：

```
var promiseA = $.get('a.php');
var promiseB = $.get('b.php');

$.when( promiseA, promiseB).done( function (dataA, dataB){
  $('#division').html(dataB);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:23:28.693

此功能是通过使用一个简单的队列来实现的，在该队列中，ajax 调用一个接一个地执行。

为此，设置一个简单的队列，就像 Gnarf 在以下答案中描述的那样：[Sequencing ajax requests](https://stackoverflow.com/questions/3034874/sequencing-ajax-requests)，参考如下：

```
(function($) {
  var ajaxQueue = $({});
  $.ajaxQueue = function(ajaxOpts) {
    var oldComplete = ajaxOpts.complete;
    ajaxQueue.queue(function(next) {
      ajaxOpts.complete = function() {
        if (oldComplete) oldComplete.apply(this, arguments);
        next();
      };
      $.ajax(ajaxOpts);
    });
  };
})(jQuery); 
```

并像使用它一样

```
function executeAjaxCallsUsingQueue(variants) {
  for (var i = 0; i < variants.length; i++) {
    var variant = variants[i];
    $.ajaxQueue({
        url:  '/url_to_process' ,
        type:     'post', 
        data:  variant ,
        dataType: 'json' , 
        success:  function(response) { }
    });
  }
} 
```

# php - 如何从 PHP 应用程序将图像发布到 Facebook 页面？

> ID：13384468
> 
> 赞同：0
> 
> 时间：2012-11-14T17:57:14.713
> 
> 标签：php, facebook

我正在尝试从 PHP 应用程序将图像发布到 Facebook 页面。我检查了这个站点中的许多资源、文档、一些演示代码和几个问题，但无法完成一个工作应用程序。

这是我的代码：

```
$facebook = new Facebook(array(
  'appId'  => $appId,
  'secret' => $appSecret
));

$fbuser = $facebook->getUser();

$facebook->setFileUploadSupport(true);

$post_url = '/443513955707619/photos';

$msg_body = array(
                'source' => '@/www/www.gbart.hu/public_html/facebook/megosztos_app/img/winner/winner_'.(int)$round[0].'.jpg',
                //'image' => 'http://www.gbart.hu/facebook/megosztos_app/img/winner/winner_'.(int)$round[0].'.jpg',
                'message' => 'http://www.facebook.com/WangMesterKinaiKonyhaja/app_322145727882829',
                'access_token' => $access_token
                );
try {
    $postResult = $facebook->api($post_url, 'post', $msg_body);
}
catch (FacebookApiException $e) {
    echo $e->getMessage();
} 
```

这是我对该应用程序的权限： $fbPermissions = 'email, publish_actions, publish_stream, photo_upload, manage_pages';

我有所需的 appID、app_secret、access_token 参数（应用程序的其他部分正在工作）。

我收到了一些不同的错误消息，例如无效的专辑 ID 或无效的访问令牌。我解决了这些，现在没有任何错误消息，但照片没有出现在任何地方。

在此代码的先前版本中，我尝试将图像发布到页面墙而不是相册，但这产生了一个奇怪的结果：将图像发布到我的用户个人资料的墙上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:26:26.673

尝试发布类似下面的内容

```
$url =    "https://graph.facebook.com/443513955707619/photos?access_token=".$token."&message=hello&url=http://imagetopost.com/hi.jpg&method=post";
$response = file_get_contents($url); 
```

# python - 快速排序返回递归深度错误

> ID：13384473
> 
> 赞同：0
> 
> 时间：2012-11-14T17:57:44.717
> 
> 标签：python, algorithm, quicksort

我有一个简单的快速排序实现，但它返回了超出递归深度的错误，我正在对少于 30 个元素的列表进行测试。此外，几天前我的实现正在处理 10,000 个列表，我唯一改变的是将它从一个类移动到一个全局函数。有人看到可能是什么原因造成的吗？

```
def quickSort(m, left, right):
    if len(m[left:right]) <= 1:
        return m
    pivot = m[left]
    i = left + 1
    j = left + 1
    for j in range(j, right):
        if m[j] <= pivot:
            m[j], m[i] = m[i], m[j]
            i += 1
    m[left], m[i-1] = m[i-1], m[left]
    m = quickSort(m, left, i)
    m = quickSort(m, i, right)
    return m 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:31:22.727

您的递归调用之一导致异常（您可能已经猜到了:-)，还请注意您对列表进行了排序，因此没有必要返回列表

```
def quickSort(m, left, right):
    if right - left  <= 1:
        return

    pivot = m[left]
    i = left + 1 
    j = left + 1 
    for j in range(j, right):
        if m[j] <= pivot:
            m[j], m[i] = m[i], m[j]
            i += 1
    m[left], m[i-1] = m[i-1], m[left]
    quickSort(m, left, i-1)
    quickSort(m, i, right) 
```

# jquery - jQuery的简单乘法

> ID：13384474
> 
> 赞同：0
> 
> 时间：2012-11-14T17:57:48.610
> 
> 标签：jquery, multiplication

我似乎无法弄清楚如何将 2 个 div 相乘并在另一个 div 中显示总数。我的几次尝试都没有成功。例如，最终结果将如下所示：

```
<div class="itemOne">2</div>
<div class="itemTwo">5</div>
<div class="total">10</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T18:00:23.630

尝试这个...

```
var one = parseInt($(".itemOne").text(), 10);
var two = parseInt($(".itemTwo").text(), 10);
$(".total").text(one * two); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:01:31.263

这里不需要 jQuery。在纯 JavaScript 中尝试：

```
​var a = document.getElementsByClassName('itemOne')[0].innerHTML;
var b = document.getElementsByClassName('itemTwo')[0].innerHTML;
document.getElementsByClassName('total')[0].innerHTML = parseInt(a,10)*parseInt(b,10);​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/2cpnw/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T17:59:54.317

尝试这个，

**[现场演示](http://jsfiddle.net/Zhevp/)**

```
$('.total').text( parseFloat($('.itemOne').text()) * parseFloat($('.itemTwo').text())) 
```

# salesforce - 将 ID 发送到控制器并保存..？

> ID：13384476
> 
> 赞同：0
> 
> 时间：2012-11-14T17:57:55.533
> 
> 标签：salesforce, apex-code

```
<apex:commandlink action="{!removeline}" onclick="if(confirm('Are you sure?')) "   reRender="thePB" target="_top" > <img src="{!$Resource.Red_Cross}" alt="Remove" title="Remove" />
<apex:param name="deleteid" value="{!op.Id}" assignTo="{!deleteid}"/>
</apex:commandlink > 
```

我在每条记录前面都有交叉图像。单击该图像时，我将 id 发送到控制器。但问题是当我单击交叉 2 条记录，然后单击删除按钮时，仅删除了 1 条记录。谁能建议我如何在控制器中保存 ids（超过 1 条记录）并在删除点击时删除记录。我正在学习 salesforce

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:30:47.853

您可以使用actionFunction并通过javaScript发送ids之类的

```
<script>  
 function removelines(){     
   var deleteIds = ....;
   removeline(deleteIds )
</script> 
<input type="button" class="btn" onClick="onclick="if(confirm('Are you sure?'))"/>
<apex:actionFunction action="{!removeline}" name="removeline">
   <apex:param name="deleteIds" assignTo="{!deleteIds}" value="" />
</apex:actionFunction> 
```

# java - 从 URL 获取文件的 MD5 哈希

> ID：13384478
> 
> 赞同：3
> 
> 时间：2012-11-14T17:57:56.757
> 
> 标签：java, android, md5

我得到的结果是相同类型的文件返回相同的 md5 哈希值。例如，两个不同的 jpg 给了我相同的结果。但是，jpg 与 apk 会给出不同的结果。

这是我的代码...

```
public static String checkHashURL(String input) {
    try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        InputStream is = new URL(input).openStream();

        try {
            is = new DigestInputStream(is, md);

            int b;

            while ((b = is.read()) > 0) {
                ;
            }
        } finally {
            is.close();
        }
        byte[] digest = md.digest();
        StringBuffer sb = new StringBuffer();

        for (int i = 0; i < digest.length; i++) {
            sb.append(
                    Integer.toString((digest[i] & 0xff) + 0x100, 16).substring(
                            1));
        }
        return sb.toString();

    } catch (Exception ex) {
        throw new RuntimeException(ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:13:35.093

这已破了：

```
while ((b = is.read()) > 0) 
```

您的代码将在流的第一个字节 0 处停止。如果两个文件在第一个 0 字节之前具有相同的值，您将失败。如果你*真的*想调用 byte-at-a-time 版本`read`，你需要：

```
while (is.read() != -1) {} 
```

无[参数`InputStream.read()`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28%29)方法在到达流的末尾时返回 -1。

（没有必要给 赋值`b`，因为你没有使用它。）

最好一次读取一个缓冲区：

```
byte[] ignoredBuffer = new byte[8 * 1024]; // Up to 8K per read
while (is.read(ignoredBuffer) > 0) {} 
```

这次条件是有效的，因为[`InputStream.read(byte[])`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28byte%5B%5D%29)如果你传入一个空缓冲区，它只会返回 0。否则，它将尝试读取至少一个字节，如果已到达流的末尾，则返回读取的数据长度或 -1。

# objective-c - Objective-C 基础：用字符串创建函数

> ID：13384481
> 
> 赞同：2
> 
> 时间：2012-11-14T17:58:06.553
> 
> 标签：objective-c

我对 Objective-C 很陌生。我已经用 VB.NET 开发了几十个桌面应用程序，并且用 REAL Stupid for Macs 开发了几十个。我已经阅读了几本关于 Objective-C 函数的精装书和 PDF 书。他们只谈论如何使用整数创建函数。我想超越整数。例如，以下简单的 VB.NET 函数涉及一个字符串，返回 true 或 false（布尔值）。这非常简单明了。

```
Function SayBoolean (ByVal w As String) As Boolean
If w = "hello" Then
    Return True
Else
    Return False
End if
End Function 
```

以下函数返回一个字符串（文件扩展名）和一个字符串（文件路径）。

```
Function xGetExt(ByVal f As String) As String
    'Getting the file extension    
    Dim fName1 As String = Path.GetFileName(f)
    Dim fName2 As String = Path.GetFileNameWithoutExtension(f)
    Dim s As String = Replace(Replace(fName1, fName2, ""), ".", "")
    Return s
End Function 
```

那么在使用 Objective-C 创建函数时，如何指定字符串参数并返回布尔值或字符串？到目前为止，Objective-C 对我来说非常困难。

感谢您的帮助。

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:07:49.423

示例 1

```
//The return value is a boolean (BOOL)
- (BOOL)sayBoolean:(NSString*)w //w is the string parameter
{
    //Use isEqualToString: to compare strings
    return [w isEqualToString:@"hello"]; 
} 
```

示例 2

```
//The return value is a string
- (NSString*)xGetExt:(NSString*)f
{
   //pathExtension exists as an NSString method in a category
   // and returns a string already.
   return [f pathExtension]; 
} 
```

* * *

为什么需要使用`isEqualToString:` [理解 NSString 比较](https://stackoverflow.com/questions/3703554/understanding-nsstring-comparison-in-objective-c)

# android - GC_CONCURRENT 释放的消息泛滥，而不是我的应用程序

> ID：13384487
> 
> 赞同：2
> 
> 时间：2012-11-14T17:58:25.053
> 
> 标签：android, garbage-collection

我在 LogCat 中收到大量 GC_CONCURRENT 释放的消息，**它们不是来自我自己的应用程序**（我强制关闭了我的应用程序以确保）。释放的内存非常一致（大约 1430K），每秒大约发生 6 次。

我该如何解决这个问题？

它干扰了我的应用程序开发，因为它会淹没 LogCat 并将有价值的日志语句从缓冲区中强制输出，并且还会导致 LogCat “抖动”，因为每次 GC_CONCURRENT 事件发生时，会话过滤器都会上下跳动一行。

该手机是运行 Android 2.3.5 的摩托罗拉 Atrix 2。我只将手机用于开发，因此它几乎没有其他应用程序，而不是来自 AT&T 的股票过时软件。

```
11-14 10:50:14.117: D/dalvikvm(724): GC_CONCURRENT freed 1426K, 52% free 4712K/9671K, external 2357K/2773K, paused 3ms+3ms
11-14 10:50:14.273: D/dalvikvm(724): GC_CONCURRENT freed 1426K, 52% free 4714K/9671K, external 2357K/2773K, paused 2ms+3ms
11-14 10:50:14.429: D/dalvikvm(724): GC_CONCURRENT freed 1431K, 52% free 4712K/9671K, external 2357K/2773K, paused 2ms+3ms
11-14 10:50:14.585: D/dalvikvm(724): GC_CONCURRENT freed 1426K, 52% free 4714K/9671K, external 2357K/2773K, paused 2ms+3ms
11-14 10:50:14.742: D/dalvikvm(724): GC_CONCURRENT freed 1428K, 52% free 4714K/9671K, external 2357K/2773K, paused 2ms+3ms
11-14 10:50:14.898: D/dalvikvm(724): GC_CONCURRENT freed 1430K, 52% free 4713K/9671K, external 2357K/2773K, paused 2ms+3ms
11-14 10:50:15.054: D/dalvikvm(724): GC_CONCURRENT freed 1427K, 52% free 4714K/9671K, external 2357K/2773K, paused 2ms+3ms
11-14 10:50:15.210: D/dalvikvm(724): GC_CONCURRENT freed 1432K, 52% free 4711K/9671K, external 2357K/2773K, paused 2ms+3ms
11-14 10:50:15.367: D/dalvikvm(724): GC_CONCURRENT freed 1426K, 52% free 4712K/9671K, external 2357K/2773K, paused 3ms+2ms
11-14 10:50:15.523: D/dalvikvm(724): GC_CONCURRENT freed 1426K, 52% free 4714K/9671K, external 2357K/2773K, paused 2ms+3ms
11-14 10:50:15.679: D/dalvikvm(724): GC_CONCURRENT freed 1432K, 52% free 4711K/9671K, external 2357K/2773K, paused 3ms+3ms
11-14 10:50:15.835: D/dalvikvm(724): GC_CONCURRENT freed 1426K, 52% free 4712K/9671K, external 2357K/2773K, paused 3ms+2ms
11-14 10:50:15.992: D/dalvikvm(724): GC_CONCURRENT freed 1426K, 52% free 4714K/9671K, external 2357K/2773K, paused 2ms+2ms
11-14 10:50:16.148: D/dalvikvm(724): GC_CONCURRENT freed 1429K, 52% free 4713K/9671K, external 2357K/2773K, paused 3ms+3ms
11-14 10:50:16.304: D/dalvikvm(724): GC_CONCURRENT freed 1429K, 52% free 4712K/9671K, external 2357K/2773K, paused 3ms+3ms
11-14 10:50:16.460: D/dalvikvm(724): GC_CONCURRENT freed 1426K, 52% free 4714K/9671K, external 2357K/2773K, paused 2ms+3ms
11-14 10:50:16.617: D/dalvikvm(724): GC_CONCURRENT freed 1430K, 52% free 4713K/9671K, external 2357K/2773K, paused 3ms+3ms
11-14 10:50:16.773: D/dalvikvm(724): GC_CONCURRENT freed 1429K, 52% free 4712K/9671K, external 2357K/2773K, paused 3ms+3ms
11-14 10:50:16.929: D/dalvikvm(724): GC_CONCURRENT freed 1426K, 52% free 4714K/9671K, external 2357K/2773K, paused 3ms+3ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:46:58.810

进程 ID 显示在消息中（在上面，它是 pid 724）。您可以使用`adb shell ps`获取 Linux 进程转储；找到 pid 724 的条目以查看它是哪个应用程序。

或者，如果您使用的是开发人员设备，则可以在 Eclipse/ADT/DDMS 中打开“设备”视图并查看所有进程。选择具有匹配 pid 的应用程序（第二列），然后打开“线程”视图。这显示了应用程序中的所有线程。在“utime”和“stime”列中寻找具有高值的线程。如果您双击它几次，您将看到堆栈跟踪的快照，这可能表明导致所有 GC 的原因。

# java - 已编辑；Android应用SQLite异常不同的模拟器

> ID：13384488
> 
> 赞同：2
> 
> 时间：2012-11-14T17:58:29.043
> 
> 标签：java, android

已编辑；

我的应用程序在 android 模拟器中运行良好。现在我已经在“Bluestacks”中安装了 .apk，这是一个用于在您的 PC 和 android-x86 VM 上运行 android 应用程序的客户端。当我按下按钮进入下一个活动时，无论是崩溃还是重启。

在确保只显示主活动的已安装图标后，我启动应用程序，一旦按下一个链接到下一个活动的意图的按钮，主活动就会在 bluestacks 中重新启动，并在 VM 中出现崩溃错误.

此行为未显示在 android 模拟器上。这可能是什么原因？

安卓清单：

```
....
<application
    android:name="MainApplication"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".activities.MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.NewAuditActivity"
        android:label="@string/title_activity_index" >
       <intent-filter>
           <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
.... 
```

在主要活动中，我这样做；

```
public void viewNewAudits(View view) {

    Intent intent = new Intent(this, NewAuditActivity.class);
    TextView auditorView = (TextView) findViewById(R.id.MainViewAuditor);
    intent.putExtra("auditor", auditorView.getText());
    startActivity(intent);
} 
```

在 xml 视图中单击的按钮正确调用了 onclick:"viewNewAudits" 方法。

应用程序不继续下一个活动的原因可能是什么？当 android 模拟器运行应用程序时，我无法找出崩溃的原因可能是什么错误/异常。

编辑：

我在 VBox VM 上搜索日志让我使用 adb logcat 命令进行了一些实验。我从 VM 中找到了一些日志，它给出了 SQLite 异常。这是有道理的，因为在第二个活动中我开始实例化我的数据库和查询管理器。奇怪的是，sqliteexception 是一个语法错误。有什么方法可以使 SQLite 语法在另一个模拟器上有所不同？一小段 logcat 日志：

```
I/ActivityManager( 2039): Starting activity: Intent { cmp=..../.activ
ities.NewAuditActivity (has extras) }
I/Database( 2797): sqlite returned: error code = 1, msg = near ",": syntax error

D/AndroidRuntime( 2797): Shutting down VM
W/dalvikvm( 2797): threadid=1: thread exiting with uncaught exception (group=0xb
5891290)
E/AndroidRuntime( 2797): FATAL EXCEPTION: main
E/AndroidRuntime( 2797): java.lang.RuntimeException: Unable to start activity Co
mponentInfo{.....activities.NewAuditActivity}: androi
d.database.sqlite.SQLiteException: near ",": syntax error: , while compiling: IN
SERT INTO Criteria (auditTemplateId, code, requirement, MOE, description) VALUES
('145', '.A.25(a)', 'Facility, size and segregation', '1.8-2.7 exhibit 5-2.3', ...... *more of the same inserts with a lot of comma's 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:08:57.887

我建议您在 android 模拟器或真实设备上使用您的应用程序.. 否则您最终会花时间在第三方工具的错误上.. 如果它在模拟器上运行良好，那么您正在使用的 Bluestacks 客户端中可能存在错误...在真机上试...

当您没有适合每个开发人员的设备时，模拟器会很有帮助。模拟器可用于检查基本 UI 和应用程序的流程。

应使用真实设备来检查像素完美 UI、性能、基于位置的功能、基于网络连接的功能。ETC..

因此，在每次发布功能之前在真实设备上进行测试非常重要。

EDIT1：以下链接也对模拟器与真实设备进行了非常有趣的讨论：

[Android 模拟器与真实设备](https://stackoverflow.com/questions/1115413/android-emulator-vs-real-device)

EDIT2：在 NewAuditActivity 类中，如果`auditor`in的`intent extra`值为`null`or ，您是否处理这种情况`empty string`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:31:48.667

..*叹息*..

似乎另一个模拟器包含稍旧版本的 android，它对代码没有影响，但使用了稍旧版本的 SQLite DB。当我试图用复合插入查询填充数据库时，这导致了一个错误。这使我的问题与此处的问题相同：[插入时出现 SQLite 错误](https://stackoverflow.com/questions/12518653/sqlite-error-on-insert?lq=1)

附加信息：此视频非常清楚地展示了如何在 virtualbox 上设置 android-x86 项目作为现有模拟器的替代方案：[http ://www.youtube.com/watch?v=fFCan01I6QQ](http://www.youtube.com/watch?v=fFCan01I6QQ)

为了能够检查此设备的日志，您可以使用视频中所示的 adb，但这次您使用的是：'adb -s < *Emulator serial number* > logcat'。这会将完整的 logcat 日志打印到命令行。

至于蓝叠。这个客户端没有显示任何类型的错误，它只是完美地重置了应用程序，没有任何通知。使用此软件时可能需要牢记这一点。

# php - 用php删除文本文件中的重复数据

> ID：13384490
> 
> 赞同：7
> 
> 时间：2012-11-14T17:58:30.747
> 
> 标签：php

我需要打开一个文本文件（file.txt），其中包含以下格式的数据

```
ai
bt
bt
gh
ai
gh
lo
ki
ki
lo 
```

最终我想删除所有重复的行，所以每个数据只剩下一个。所以结果看起来像这样

```
ai
bt
gh
lo
ki 
```

对此的任何帮助都会很棒

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-14T18:07:49.570

这应该可以解决问题：

```
$lines = file('file.txt');
$lines = array_unique($lines); 
```

[`file()`](http://www.php.net/manual/en/function.file.php)读取文件并将每一行放入一个数组中。

[`array_unique()`](http://www.php.net/manual/en/function.array-unique.php)从数组中删除重复元素。

此外，要将所有内容放回文件中：

```
file_put_contents('file.txt', implode($lines)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:00:17.247

取php[函数file()](http://php.net/manual/de/function.file.php)读取文件。您从文件中获得一组行。之后，使用[array_unique](http://php.net/manual/de/function.array-unique.php)踢出重复项。

最后，你会有类似的东西

```
$lines = array_unique(file("your_file.txt")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T16:38:46.930

这可能有效：

```
$txt = implode('\n',array_unique(explode('\n', $txt))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-08T09:07:34.667

```
$lines = file_get_contents('file.txt');
$lines = explode('\n', $lines);
$lines = array_unique($lines);
$lines = implode('\n', $lines);
file_put_contents('file.txt', $lines); 
```

# sql - 需要将行更改为动态列

> ID：13384491
> 
> 赞同：1
> 
> 时间：2012-11-14T17:58:32.667
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我有这样的场景

```
User | Session | Response
 u1  |   s1    |    r1
 u1  |   s1    |    r2
 u1  |   s2    |    r3
 u2  |   s2    |    r4
 u2  |   s2    |    r5 
```

并且输出需要像

输出表

```
User  | Session  | response1  | response2  | Session.....n
u1    |  s1      |   r1       |  r2       
u1    |  s2      |   r3       |  NULL   
u2    |  s2      |   r4       |  r5 
```

该会话列可能是 n 次，具体取决于响应数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T18:08:41.607

您可以实现该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数来执行这种数据转换。如果您有已知数量的值，则可以对查询进行硬编码：

```
select *
from 
(
  select [user], session, response, 
    'response'+ cast(row_number() over(partition by [user], session order by response) as varchar(10)) rn
  from yourtable
) src
pivot
(
  max(response)
  for rn in ([response1], [response2])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c8d69/7)

但是，如果您有未知数量的响应，那么您将需要使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('response'+ cast(row_number() over(partition by [user], session order by response) as varchar(10))) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT [user], session, ' + @cols + ' from 
             (
              select [user], session, response, 
                ''response''+ cast(row_number() over(partition by [user], session order by response) as varchar(10)) rn
              from yourtable
            ) x
            pivot 
            (
                max(response)
                for rn in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/fa1db/1)

两者都会产生相同的结果：

```
| USER | SESSION | RESPONSE1 | RESPONSE2 |
------------------------------------------
|   u1 |      s1 |        r1 |        r2 |
|   u1 |      s2 |        r3 |    (null) |
|   u2 |      s2 |        r4 |        r5 | 
```

# c++ - 等效于 C++ 中的 maya.cmds

> ID：13384492
> 
> 赞同：0
> 
> 时间：2012-11-14T17:58:33.657
> 
> 标签：c++, python, maya

我想知道 C++ 中是否有任何等同于 maya.cmds 的东西！

我会想象它是这样的：

```
MPxCommand *objectTypeCmd = MPxCommand::getCommand("objectType");
MArgList args;
args.add("particleShape1");
objectTypeCmd->doIt(args);

if (objectTypeCmd->currentResultType()== MPxCommand::kString)
  MGlobal::displayInfo(objectTypeCmd->currentStringResult()); 
```

有什么比从 C++ 代码调用 MEL 或 Python 更直接的方法吗？

请注意，此处用于 MPxCommand 的函数有一半使用不当或根本不存在！这只是为了解释我想要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:39:34.610

不，脚本接口和 C++ 接口有不同的用途。这些目的不重叠。您甚至无法使用 Maya C++ API 完成脚本界面中可用的一半事情。如果可能，c 等效代码比脚本代码长数千倍。继续调用脚本。

但是python本身确实有ac接口，所以你可以用这个接口调用python命令（见[embedding python](http://docs.python.org/2/extending/embedding.html)）。然而，它确实是繁重的工作，您仍将调用脚本层（具有所有速度和其他含义）。

欲了解更多信息，请阅读：[Api 新手？然后读这个！](http://www.creativecrash.com/forums/api/topics/new-to-the-api-then-read-this-33)这篇文章早于 python 接口，但它仍然非常准确。

# signal-processing - 脉冲响应在卷积中的翻转

> ID：13384493
> 
> 赞同：1
> 
> 时间：2012-11-14T17:58:52.003
> 
> 标签：signal-processing, convolution

在对信号进行卷积期间，为什么在此过程中需要脉冲响应的翻转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:09:02.793

当然，您不必翻转其中一个信号，但在这种情况下，它称为互相关，其中不仅需要反转，还需要信号的复共轭。请参阅[此问题](https://dsp.stackexchange.com/questions/2654/what-is-the-difference-between-convolution-and-cross-correlation/)和答案。

# php - PHP 数组从 17 - 395

> ID：13384498
> 
> 赞同：1
> 
> 时间：2012-11-14T17:59:09.857
> 
> 标签：php, arrays

我正在尝试使用 17 - 395 的值创建一个数组，但我不想输入每个数字，必须有更好的方法来做到这一点......有吗？

```
$x = array(17, 18, 19, 20,... 395); 
```

谢谢，J

我想做的是这个

```
$x = array(17, 395);

foreach ($x as $y => $z){
    echo 'This is number '. $z . '';
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T18:02:34.173

只需使用[范围](http://www.php.net/manual/en/function.range.php)。

```
$x = range(17, 395); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:01:19.693

您应该使用循环 -[因为](http://php.net/manual/en/control-structures.for.php) 如果您执行 $array[] = $x，它会自动将 $x 添加到数组的末尾。

# java - 多视图应用

> ID：13384501
> 
> 赞同：0
> 
> 时间：2012-11-14T17:59:15.623
> 
> 标签：java, android, android-activity

我正在尝试创建一个应用程序，使用重量 * 行星力来配置每个行星上某人的行星重量。他们在第一个屏幕上输入自己的体重，然后在下一个屏幕上选择他们想从哪个星球上看到自己的体重。我大部分时间都记下来了，但是当谈到如何在 Java 中配置每个表单时，我迷失了……

我的第一个 xml，activity_main.xml，是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/askwtTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="17dp"
    android:layout_marginTop="19dp"
    android:text="@string/askwt" />

<EditText
    android:id="@+id/inputwtEditText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/askwtTextView"
    android:layout_below="@+id/askwtTextView"
    android:layout_marginTop="26dp"
    android:ems="10"
    android:inputType="numberDecimal" />

<Button
    android:id="@+id/enterButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/inputwtEditText"
    android:layout_below="@+id/inputwtEditText"
    android:layout_marginTop="38dp"
    android:text="@string/enter" />

</RelativeLayout> 
```

行星.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/planetTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/planet" />

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/mercuryRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/mercury" />

    <RadioButton
        android:id="@+id/venusRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/venus" />

    <RadioButton
        android:id="@+id/earthRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/earth" />

    <RadioButton
        android:id="@+id/marsRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/mars" />

    <RadioButton
        android:id="@+id/jupiterRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/jupiter" />

    <RadioButton
        android:id="@+id/saturnRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/saturn" />

    <RadioButton
        android:id="@+id/uranusRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/uranus" />

    <RadioButton
        android:id="@+id/neptuneRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/neptune" />

    <RadioButton
        android:id="@+id/plutoRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/pluto" />
</RadioGroup>

<Button
    android:id="@+id/selectButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/select" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     />

</LinearLayout> 
```

而 JAVA，计算 *2 是我可能需要的另一个等式的占位符......我认为：

```
package com.deitel.planetaryweight;

import android.os.Bundle;
import android.app.Activity;
import android.widget.*;
import android.view.View;
import android.view.Menu;

public class MainActivity extends Activity {

//Global variable
double calculation = 0.0;
private Button select;  // creates a button 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    select = (Button) findViewById(R.id.selectButton);

    //Start with first screen
    setContentView(R.layout.activity_main);
}

//buttonclick for form 1
public void buttonclick(View view){

    TextView t = (TextView) findViewById(R.id.textView1);
     //take the value of the text in the textview and multiply by 2
      calculation = Double.parseDouble(t.getText().toString()) * 2;

      //switch views to screen 2
       setContentView(R.layout.main2);
     //change the value of the textview on screen 2 to the calculation value
       TextView t2 = (TextView)findViewById(R.id.textViewform2);
       t2.setText(Double.toString(calculation));

        }

        //buttonclick for form 2!
        public void buttonclick2(View view){
            setContentView(R.layout.planets);

            RadioButton mercury = (RadioButton) findViewById(R.id.mercuryRadio);
            RadioButton venus = (RadioButton) findViewById(R.id.venusRadio);
            RadioButton earth = (RadioButton) findViewById(R.id.earthRadio);            
            RadioButton mars = (RadioButton) findViewById(R.id.marsRadio);
            RadioButton jupiter = (RadioButton) findViewById(R.id.jupiterRadio);
            RadioButton saturn = (RadioButton) findViewById(R.id.saturnRadio);
            RadioButton uranus = (RadioButton) findViewById(R.id.uranusRadio);
            RadioButton neptune = (RadioButton) findViewById(R.id.neptuneRadio);
            RadioButton pluto = (RadioButton) findViewById(R.id.plutoRadio);

            //Makes a variable for the entered amount
            Double mercurypf;
            Double venuspf;
            Double earthpf;
            Double marspf;
            Double jupiterpf;
            Double saturnpf;
            Double uranuspf;
            Double neptunepf;
            Double plutopf;
            Double weight;

            // constants
            final double mercuryforce = 0.38; 
            final double venusforce = 0.91; 
            final double earthforce = 1.00; 
            final double marsforce = 0.38; 
            final double jupiterforce = 2.34; 
            final double saturnforce = 1.06; 
            final double uranusforce = .92;
            final double neptuneforce = 1.19;
            final double plutoforce = 0.06;

            //Receives the input from the inputwt edittext, converts it to a double  (number).
            weight = Double.parseDouble(inputwt.getText().toString());

        }
    } 
```

我不想要答案和如何一步一步完成任务，我只想从这里得到一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:38:13.083

根据您的问题标题，您将需要至少两个活动。第一个为用户输入他们的体重，第二个用于选择行星。如果您在第二个“视图”上显示他们的行星重量，那么您不需要第三个。

为此，您将希望创建类似于您已经实现的方式的第一个视图，除了您`OnClickListener`将为`enterButton`. 输入重量值后，用户点击`enterButton`，您`OnClickListener`应该创建一个`Intent`，将重量值作为额外的 ( `putExtra`) 传递并启动 2nd `Activity`。

您不需要/想要第一个中的任何 planet.xml 布局`Activity`。

完成第一个最简单的方法`Activity`是让它实现`OnClickListener`，例如：

```
public class MainActivity extends Activity implements OnClickListener{ 
```

并实现处理点击的`onClick`方法`enterButton`。

从`onClick`开始，开始第二个活动（在单独的方法中或直接在`onClick`方法中。类似：

```
 Intent selectPlanetIntent = new Intent(this, PlanetActivity.class);
    selectPlanetIntent.putExtra("UserWeight", userWeight);
    startActivity(selectPlanetIntent); 
```

在您的第二个活动中，`setContentView`您的星球布局。使用 获取用户的体重`getFloatExtra`。就像是：

```
 Intent startingIntent = getIntent();
    float userWeight = startingIntent.getFloatExtra("UserWeight", 0f); 
```

# php - 删除以大写开头的单词

> ID：13384502
> 
> 赞同：-2
> 
> 时间：2012-11-14T17:59:17.330
> 
> 标签：php

我有一个字符串，例如 FastFood，如何删除 Food 并只留下第一个单词？也可以是 VeryFastFood，然后应该留下 Very，等等。

一些字符串可能包含 3 个大写字母。我只需要留下这 3 个字母。例如 YOUProblem - 必须是你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:55:08.880

```
preg_match(/^[A-Z]([A-Z]{2}|[A-Z][a-zA-Z]|[a-z]{2})[a-z]*/), $stringToCheck, $matches);

$matches[0] //has your string 
```

像这样的东西应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:28:15.097

这是一个也可以为您完成的功能：

```
function removeUppercase($word){
   if(ctype_upper(substr($word,0,3))) //Check for first 3 uppercase and return those
       return substr($word,0,3);
   for($a=1;$a<strlen($word);$a++){ //Otherwise loop through letters until uppercase is found
      if(ctype_upper($word[$a]))
         return substr($word,0,$a);
   }
   return $word;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T18:05:57.837

这是一个骇人听闻的解决方案，我首先想到的

```
<?php

$string = "VeryFastFood";

$found = false;
$tmp = '';
for($i = 0; $i < strlen($string); ++$i)
{
    $char = $string[$i];
    if(ctype_upper($char))
    {
        if($found)
        {
            break;
        }
        else
        {
            $found = true;
        }
    }
    $tmp .= $char;
}

$string = $tmp;
var_dump($string); 
```

# javascript - 节点不记录更深的子对象

> ID：13384503
> 
> 赞同：0
> 
> 时间：2012-11-14T17:59:18.437
> 
> 标签：javascript, json, node.js

这可能已经回答了，但我确实搜索过。

在 .js 文件中：

```
console.log({
  a: 1,
  b: { c: 1},
  d: [{e:1},{f:1}],
  g: [{h:[1,2,3]}]
}); 
```

这是实际打印的内容：

```
{ a: 1,
  b: { c: 1 },
  d: [ { e: 1 }, { f: 1 } ],
  g: [ { h: [Object] } ]
} 
```

注意'h'值，我可以打印吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:04:41.930

1.  阅读[util.inspect()的文档](http://nodejs.org/api/util.html#util_util_inspect_object_showhidden_depth_colors)

    它允许您指定打印深度： `The default is to only recurse twice. To make it recurse indefinitely, pass in null for depth.`

    要使用它，您可以致电`console.log(util.inspect(yourObj, true, null));`

2.  [console.dir()](http://nodejs.org/api/stdio.html#stdio_console_dir_obj)说它使用`util.inspect()`，但不显示修改`inspect()`调用的参数，所以它也可能只会递归两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:02:45.590

你可以用`for loop` 它来迭代它..

```
var obj = {
    a: 1,
    b: {c: 1},
    d: [{e: 1}, { f: 1}],
    g: [{  h: [1, 2, 3]}]
};

var data = obj.g[0].h ;

for(var i =0; i <data.length ; i++){
    console.log(data[i])
}​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/RS5EW/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T20:38:25.407

我已经用`JSON.stringify()`它来实现了，可以用参数来确定格式。

如上所述，`util.inspect()`也有效。

# android - 添加到 FrameLayout 的 ImageView 的维度为零

> ID：13384506
> 
> 赞同：0
> 
> 时间：2012-11-14T17:59:29.330
> 
> 标签：android, android-layout, android-widget

我正在开发一个包含多个视图的自定义 ViewGroup。在构造函数中，我创建了许多 FrameLayout，每个都包含两个 ImageView。每个 Framelayout 和子视图都是使用以下代码创建的。

```
FrameLayout frame = new FrameLayout(context);

ImageView digitView = new ImageView(context);
digitView.setScaleType(ScaleType.CENTER_CROP);
frame.addView(digitView,
        new FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.MATCH_PARENT));

ImageView bezelView = new ImageView(context);
bezelView.setScaleType(ScaleType.CENTER_CROP);
bezelView.setImageResource(R.drawable.bezel);
frame.addView(bezelView);

this.addView(frame, params); 
```

在 onMeasure 回调中，我设置了自定义 ViewGroup 的尺寸

```
 this.setMeasuredDimension(254, 43); 
```

在 onLayout 回调中，我计算每个 FrameLayouts 的尺寸并为每个 FrameLayouts 调用布局方法

```
@Override
protected void onLayout (boolean changed, int left, int top, int right, int bottom)
{
    if (changed)
    {
        float width = (float)(right - left) / (float)this.digits;

        if ((int)(width/ASPECT_RATIO) > bottom- top)
            width = (float)(bottom - top) * ASPECT_RATIO;
        this.digitWidth = (int)width;
        this.digitHeight = (int)(width/ASPECT_RATIO);

        this.xOffset = ((right - left) - (this.digits * this.digitWidth))/2;
        this.yOffset = ((bottom - top) - this.digitHeight)/2;

        for (int i = this.digits-1; i >=0; i--)
        {
            int x = xOffset + i * this.digitWidth;
            this.placeFrames.get(i).layout(x, this.yOffset, x + this.digitWidth, yOffset + this.digitHeight); 

        }
    }
} 
```

我遇到的问题是 FrameLayouts 在自定义 GroupView 中的大小和位置正确，但 ImageViews 没有被 FrameLayouts 调整大小 - 它们的宽度和高度为零。我使用 HierarchyViewer 验证了这一点。

我想我错过了一些东西 - 我假设 FrameLayout 上的布局方法会根据在将子 ImageView 作为子项添加到 FrameLayout 时传入的布局参数来调整子 ImageViews 的大小，但似乎不是。

非常感谢指向正确方向的指针。

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:56:23.253

> 我假设 FrameLayout 上的布局方法会根据作为子项添加到 FrameLayout 时传入的布局参数来调整子 ImageViews 的大小，但似乎不是。

你自己不是`layout()`这些 ImageView 对象，也不是调用`super.onLayout()`..

# php - php表关联

> ID：13384509
> 
> 赞同：0
> 
> 时间：2012-11-14T17:59:39.127
> 
> 标签：php, mysql, database-design

我对 2 个表之间的关联有疑问：我有

```
table 1 "flowers": "id", "flower";
table 2 "colors": "id", "color";
table 3 "association_flowers_colors": "id", "id_flower", "id_color"; 
```

现在，一朵花可以有多种颜色，现在的问题是父亲的所有信息都在一个数组中。es：如果我得到第一个表中的所有信息并获取它们，我将拥有

```
array([0](array[id]=>0, [flower]=>rose), [1]array([id]=>1, [flower]=>tulip)); 
```

那么如果我从第二张桌子上收集所有信息，我将拥有

```
array([0]array([id]=>0, [color]=>red)[1]), [1]array([id]=>1, [color]=>white)); 
```

现在的问题：我需要得到一个数组

```
array([0]array([id]=>0, [flower]=>rose, [color]=>red, [color]=>white), [1]array([id]=>1, [flower]=>tulip, [color]=>red, [color]=>white)); 
```

有没有一种简单的方法可以通过一个详细的查询来完成，或者我应该使用 while 循环或类似的东西，然后合并我得到的信息？

谢谢

编辑：

```
function get_flowers(){
    include('../actions/db_connection.php');
        $result = mysqli_query($db_connection, "select * 
            from flowers f
            left outer join association_flowers_colors a on f.id = a.id_flower
            left outer join colors c on c.id = a.id_color");
        mysqli_close($db_connection);
         $flowers = array();
          while ($row = mysqli_fetch_array($result, MYSQL_ASSOC)) {
         $flowers[] =  $row;
        };

    return $flowers;
} 
```

在阅读了 juergen 的回复后，我最终得到了这个，看起来它有效的问题是它为我提供了每种颜色的数组（总共 4 个数组），而不是只给我 2 个包含两种颜色的数组（总共2个数组）。

edit2：好的，我没有找到一种方法来检索 2 个数组（而不是 4 个）中的所有信息，但无论如何我设法以可读的方式打印它们：

```
while($row = mysqli_fetch_array($flowers)){

    if ($flowerID != $row['id_flower']) {
        echo "<div class='flowerContainer'>";
        echo "<input type='hidden' name='flowerID' value='".$row['id_flower']."'>";
        echo "Name: ".$row['flower']."<br />";
        }

    echo $row['color']."<br />";
    if ($flowerID == $row['id_flower']) {
        echo "</div>";
        echo "<hr>";
    }

    $flowerID = $row['id_flower'];
    } 
```

这样，即使循环重复每个数组的所有信息，它也只会在有新条目时输出信息，并且不会重复任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:02:46.773

```
select * 
from flowers f
left outer join association_flowers_colors a on f.id = a.id_flower
left outer join colors c on c.id = a.id_color 
```

# opengl - GLEW 链接器错误（未定义对 `__glewBindVertexArray' 的引用）

> ID：13384510
> 
> 赞同：3
> 
> 时间：2012-11-14T17:59:42.773
> 
> 标签：opengl, mingw, codeblocks, glew

我最近决定使用我正在使用非折旧技术重新编写一些游戏的 OpenGL 代码。我没有使用 glBegin() 和 glEnd() 绘制基元，而是尝试坚持使用顶点数组对象等。我正在尝试从[http://www.opengl-tutorial.org/beginners-tutorials/tutorial-2-the-first-triangle/](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-2-the-first-triangle/)获取要编译的代码。我以前做过很多链接，但由于某种原因这不起作用。我正在尝试将 GLEW 链接到我的项目，其中 CodeBlocks 作为我的 IDE，MinGW GCC 作为我的编译器。我该如何解决这个问题？是的，我确实链接了“glew32.lib”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T23:49:09.597

如果您静态链接 GLEW，通常会发生这种情况，但不要通知标头这会发生。为此，您必须定义预处理器标记“GLEW_STATIC”。这最好作为编译器选项来完成。如果是 GCC，请添加`-DGLEW_STATIC`到编译器命令行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-28T07:19:04.820

试试这个：

```
pkg-config --libs --static glew 
```

在终端。然后，复制它给你的库并粘贴到你的 gcc/g++ 语句之后：

```
g++ <your-file-name>.cpp -o <output-file-name> -lGL -lGLU -lglfw3 -lrt -lm -ldl -lXrandr -lXinerama -lXcursor -lXext -lXrender -lXfixes -lX11 -lpthread -lxcb -lXau -lXdmcp -lGLEW -lGLU -lGL -lm -ldl -ldrm -lXdamage -lX11-xcb -lxcb-glx -lxcb-dri2 -lxcb-dri3 -lxcb-present -lxcb-sync -lxshmfence -lXxf86vm -lXfixes -lXext -lX11 -lpthread -lxcb -lXau -lXdmcp 
```

（上面重复了一些，因为我也使用了 glfw）

这应该可以解决您的问题，因为通常不会声明这些库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-16T22:28:04.647

如果您使用 Linux、FLTK ui 库和 OpenGL，请参阅 LDLIBS 的 .../bin/fltk-config 文件。它还应该包含“-lGLEW”，或者您可以在编译时将此选项添加到 LDLIBS 参数中。当然应该安装“libglew-dev”。

# xml - Flash 更新后 Flash 电影停止加载 xml

> ID：13384513
> 
> 赞同：1
> 
> 时间：2012-11-14T17:59:47.407
> 
> 标签：xml, flash, actionscript-2

我正在加载一个调用另一个调用 XML 文件的 flash 电影。在最近的 Flash 播放器更新之前，它一直可以正常工作。现在我不知道如何让它工作。似乎加载了所有内容。任何帮助将不胜感激！

这是调用 XML 的操作脚本

```
 var feedMovie;
 //load the XML data
 mein_xml = new XML();
 mein_xml.ignoreWhite = true;
 mein_xml.load("data.xml");
 mein_xml.onLoad = function(status) {
    if (status) {
        content_xml = mein_xml.firstChild.childNodes;
        PhotoLoaderMC.loadMovie(content_xml[0].attributes.MapImage);
        delete mein_xml;
        initMenu();
    }
 };

    // via this function, we set the detail's points position according to XML X&Y values
 function SetPoints() {
    var j = 0;
    for (i=item; i<maxItems; i++) {
        nName = "PointerMC"+j;
        attachMovie("PointerMC", nName, j++);
        if (content_xml[i] != undefined) {
            this[nName]._y = content_xml[i].attributes.PY;
            this[nName]._x = content_xml[i].attributes.PX;
            this[nName].num.text = i+1;
            this[nName].id_txt.text = content_xml[i].attributes.id;
            this[nName].onPress = function() {
                    _global.detailMCClose = false;
                    daten = content_xml[this.num.text-1];
                    // this calls the detailMC for each detail point.
                    if (daten.attributes.PartID == "Image") {
                        attachMovie("detailMC-Image", "detailMCImage", 1000);
                        detailMCImage._alpha = 90;
                        detailMCImage._visible = true;
                        detailMCImage._x = 240;
                        detailMCImage._y = 200;
                        detailMCImage.photo = daten.attributes.photo;
                        detailMCImage.DescMC.desc.htmlText = daten.firstChild.firstChild.nodeValue;
                        detailMCImage.onEnterFrame = function() {
                            if (detailMCClose) {
                                removeMovieClip("detailMCImage");
                                _global.detailMCClose = false;
                            }
                        };
                        // this close detailMC for Image!
                        detailMCImage.CloseButton.onPress = function() {
                            _global.detailMCClose = true;
                        };
                    }
                    if (daten.attributes.PartID == "Movie") {
                        attachMovie("detailMC-Movie", "detailMCMovie", 1000);
                        detailMCMovie._alpha = 100;
                        detailMCMovie._visible = true;
                        detailMCMovie._x = 200;
                        detailMCMovie._y = 200;
                        detailMCMovie.feedMovie = daten.attributes.movie;
                        detailMCMovie.DescMC.desc.htmlText = daten.firstChild.firstChild.nodeValue;
                        detailMCMovie.onEnterFrame = function() {
                            if (detailMCClose) {
                                removeMovieClip("detailMCMovie");
                                _global.detailMCClose = false;
                            }
                        };
                        // this close detailMC for Movie!
                        detailMCMovie.CloseButton.onPress = function() {
                            _global.detailMCClose = true;
                        };
                    }
            };
        }
    }
 }
 function initMenu() {
    numbers = content_xml.length;
    max = content_xml.length;
    maxItems = content_xml.length;
    item = 0;
 } 
```

这是 XML 文件的示例。我尝试添加允许域等。

```
 <?xml version="1.0" encoding="utf-8"?>
    <contents>

        <Item PartID="Image" PX="570"  PY="240" photo="/images/network/FlashMap/centers/UH.gif" MapImage="/images/network/FlashMap/image/Counties.png" Number="1">
            <details>
                <![CDATA[<b><font size="+1" color="#ffffff">University of Houston SBDC <br>2302 Fannin, Suite 200 <br>Houston, TX 77002 <br>713-752-8444<br>Third Ward:   713-520-7303<br></font></b><br><a href="http://www.sbdc.uh.edu" target="_blank">www.sbdc.uh.edu</a><br><br>Counties served: Harris-East End, Fifth   Ward and Third Ward]]></details>
        </Item>

        <Item PartID="Image" PX="675"  PY="40" photo="/images/network/FlashMap/centers/angelina.jpg" Number="2">
            <details><![CDATA[<b><font size="+1" color="#ffffff">Angelina College SBDC, Lufkin<br>3500 South First St. <br>Lufkin, TX   75901-1768 <br>936-633-5400<br><br></font></b><br><a href="http://www.angelina.cc.tx.us/" target="_blank">www.angelina.cc.tx.us </a><br><br>Counties served: Angelina, Polk, Trinity, Tyler]]></details>
        </Item>

</content> 
```

# c++ - 如何在 C++ 中使用类构建程序

> ID：13384515
> 
> 赞同：0
> 
> 时间：2012-11-14T17:59:51.760
> 
> 标签：c++, makefile

我必须编写一个简单的类库。有两个类`Element`和`Permutation`。

文件元素.h

```
#ifndef ELEMENT_H
#define ELEMENT_H

class Element
{
public: 
    virtual ~Element()=0;
    virtual bool IsEven()=0;
    virtual bool IsNeutral()=0;
};

#endif 
```

文件排列.h

```
#ifndef PERMUTATION_H
#define PERMUTATION_H

#include "Element.h"

class Permutation: public Element
{
private:
    int* numbers; 

public:
    const int k;
    Permutation(const int, int*); 
    Permutation(const int); 
    Permutation(); 
    ~Permutation(); 
    int NumberOfInversions(); 
    bool IsEven(); 
    bool IsNeutral(); 

    friend Permutation operator+(const Permutation&, const Permutation&); 
    friend Permutation operator-(const Permutation&); 
};

#endif 
```

我有实现类 Permutation 的 Permutation.cpp。类元素是抽象的，所以它没有任何实现的.cpp 文件。所以，我想编写一个使用类 Permutation 的简单测试程序（带有 main）。我应该如何构建我的项目？我在 linux 平台上使用 g++ 编译器。

这是我的 Makefile 不起作用：

```
all: permutation_test

permutation_test: fuf.o Permutation.o 
    g++ fuf.o Permutation.o -o permutation_test
fuf.o: fuf.cpp
    g++ -c fuf.cpp 
Permutation.o: Permutation.cpp 
    g++ -c Permutation.cpp 

clean:
   rm -rf *o permuatation_test 
```

（fuf.cpp 包含 main 方法。）
错误：
Permutation.o：在函数«Permutation::Permutation(int, int*)»中：
Permutation.cpp:(.text+0xd)：未定义引用«Element::Element( )»
Permutation.o: 在函数 «Permutation::Permutation(int)»:
Permutation.cpp:(.text+0x3c): 未定义引用 «Element::Element()»
Permutation.cpp:(.text+0xac):未定义引用 «Element::~Element()»
Permutation.o: 在函数 «Permutation::Permutation()»:
Permutation.cpp:(.text+0xcd): 未定义引用 «Element::Element()»
Permutation.o ：在函数«Permutation::~Permutation()»中：
Permutation.cpp:(.text+0x11e)：未定义引用«Element::~Element()»
collect2：错误：ld返回1退出状态

现在可以了。感谢您的回复。我刚刚在 Element 类中用虚拟和删除的构造函数替换了纯虚拟析构函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:39:47.733

即使你将析构函数设为纯虚拟，你仍然需要为它提供定义，否则子类的析构函数永远不能调用它，就像它必须的那样。

要修复编译错误，请添加

```
inline Element::~Element() {} 
```

到 Element.h。

（您可以为纯虚函数提供定义，这一点并不为人所知。）

在Herb Sutter[的本周](http://www.gotw.ca/gotw/031.htm)老 Guru 中，有一些关于为纯虚拟提供定义的讨论。

**另一方面：**
我必须说，在这种情况下，拥有一个纯虚析构函数毫无意义——我想不出任何其他用途，除了在没有任何其他类的情况下使类抽象虚函数。

最好的解决方案是`Element`完全放弃 的析构函数，因为它除了引起混乱之外没有其他用途。

# asp.net - UserProfile 更改不保存 ASP.NET MVC

> ID：13384517
> 
> 赞同：1
> 
> 时间：2012-11-14T17:59:55.780
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

我想让用户可以更改他的个人资料详细信息（除了用户 ID、用户名和密码（密码在另一个视图中更改））

所以在我的方法中，当我这样做时

```
 public void SaveUser(UserProfile user)
    {
        context.Entry(user).State = System.Data.EntityState.Modified;
        context.SaveChanges();
    } 
```

我收到错误存储更新、插入或删除语句影响了意外的行数 (0)。之后我浏览了stackoverflow，有人建议用另一种方式，所以我编辑了我的SaveUser方法

```
 public void SaveUser(UserProfile user)
     {
        var objectContext = ((System.Data.Entity.Infrastructure.IObjectContextAdapter
                   )context).ObjectContext;
        try
        {
            objectContext.SaveChanges();
        }
        catch (OptimisticConcurrencyException)
        {
            objectContext.Refresh(RefreshMode.ClientWins, context.UserProfiles);
            objectContext.SaveChanges();
        }
     } 
```

在这些更改之后，我不再收到此错误，但是我的个人资料详细信息没有更改。

我的 HttpPost 编辑方法（HttpGet 检索正确信息）

```
[HttpPost]
    public ActionResult Edit(UserProfile user)
    {
        if (ModelState.IsValid)
        {
            repository.SaveUser(user);
            return View(user);
        }
        return View();
    } 
```

在我的编辑视图中，我只有 LabelFor 和 EditorFor 的所有内容（Id、用户名和密码除外）和提交按钮。

整天试图解决这个问题，但还没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:08:55.850

您的用户的主键`UserId`属性值很可能是`0`因为您没有`UserId`在视图中使用。`0`然后，您尝试使用数据库中不存在的键值更新实体并导致异常。

将一个隐藏的表单字段放入您的视图中，该字段`UserId`在客户端和服务器之间来回传递用户：

```
@Html.HiddenFor(model => model.UserId) 
```

通常，如果您使用默认路由，您应该有一个 route `http://www.mysite.com/{controller}/{action}/{id}`。如果 url 是，则`http://www.mysite.com/User/Edit/3`MVC 尝试将值绑定`3`到具有名称的属性`id`（大写或小写无关紧要）。您的更新应该可以工作。但我猜你的主键属性`User`不是`Id`，而是其他类似的东西`UserId`。在这种情况下，模型绑定器无法找到您的键属性并将其值保留为默认值 (= `0`)。

因此，作为隐藏字段的替代方案，您可以为用户的关键属性命名`Id`或专门`UserId`用作参数的路由。

# xsd - XML 模式可以通过属性值来指定吗？

> ID：13384520
> 
> 赞同：0
> 
> 时间：2012-11-14T18:00:11.340
> 
> 标签：xsd

如果我有以下 XML：

```
 <variables>
        <variable name="age">92</variable>
        <variable name="school">Fairview</variable>
        <variable name="birthdate">11/13/2012</variable>
    </variables> 
```

有没有办法创建一个模式，其中基于名称属性值，然后定义节点值（如十进制、字符串、日期）？如果是这样，怎么做？

**更新：**这是用于 C# 中的代码，因此我需要使用 >NET 运行时获取此架构信息。

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:32:26.067

这是您在 Relax NG 中的示例的架构

```
datatypes xsd = "http://www.w3.org/2001/XMLSchema-datatypes"

element variable {
  ((
  attribute name {'age'},
  xsd:int) |  
  (
  attribute name {'school'},
  text) |  
  (
  attribute name {'birthdate'},
  xsd:date))
} 
```

# computer-science - 对自身“产生输入”的状态机有特殊名称吗？

> ID：13384525
> 
> 赞同：3
> 
> 时间：2012-11-14T18:00:21.183
> 
> 标签：computer-science, state-machine

在被困在一些 c**p SM 代码中时，我最终想知道是否有状态机的名称可以执行导致进一步输入的操作？例如，转换操作`Start--(PowerOn)-->Initialized` 可能会导致`Play`生成，然后状态机将 Play 作为输入并执行转换`Initialized--(Play) -->Playing`。所以我有点需要这种机器的名称，这样我就可以把它变成我认为的普通 SM（又名 SM，它根据输入进行转换，只要它们不结束，ofc 对转换的操作也可以影响输入）。

这太抽象了：我有一个发送和接收消息的“SM”，问题是发送部分会导致回复，而不是作为输入处理。这使得很难推断机器的行为，这反过来又使得修改代码变得困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T18:51:15.733

它们被命名为：

> 递归状态机 (RSM)。

更多信息见[http://research.microsoft.com/en-us/um/people/pg/public_psfiles/toplas2005.pdf](http://research.microsoft.com/en-us/um/people/pg/public_psfiles/toplas2005.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:59:41.137

**如果您担心状态机递归调用自身，那么如何：**

按照我在评论中链接的文章中的建议实现状态机，您将拥有一个 Moore 风格的输出函数、一个 Mealy 风格的输出函数、一个转换函数和一个下一状态确定函数。

[然后，您可以将其与Ambroz Bizjak](https://stackoverflow.com/users/1020667/ambroz-bizjak)在[长堆栈溢出帖子](https://stackoverflow.com/a/10065950/225292)或[较短（但更简洁）的programmers.stackexchange帖子](https://softwareengineering.stackexchange.com/a/158637/57138)中描述的排队技术结合起来，将传入的输入排队到机器，然后让机器转换函数循环和阻塞等待此队列中的输入。机器的所有输入都应该排队进入队列，而不是直接调用转换函数；这样，任何会导致新输入发生的输出都会将输入排队，而不是进行递归转换调用。

**您也可以尝试**将您的机器拆分为发送机器和接收机器，然后有一种`u`结构：

```
 input        output
     |             ^
     v             |
+---------+   +---------+
|   rx    |   |   tx    |
| machine |-->| machine |
+---------+   +---------+ 
```

这将有助于将逻辑分开一点。这在过去对我有用。

至于这个场景的名字？我一个都不知道。

# android - 如何从 Android 的收件箱中读取最后 3 条短信？

> ID：13384529
> 
> 赞同：5
> 
> 时间：2012-11-14T18:00:46.583
> 
> 标签：android, sms, inbox

我用了这段代码

```
 String msgData = "";
    Cursor cursor = getContentResolver().query(Uri.parse("content://sms/inbox"), null, null, null, null);
    cursor.moveToFirst();

    do{

       for(int idx=0;idx<cursor.getColumnCount();idx++)
       {
           msgData += " " + cursor.getColumnName(idx) + ":" + cursor.getString(idx);
       }
    }while(cursor.moveToNext()); 
```

..它有效，但它返回的数据比我想要的多。

如何阅读最后 3 条短信（只有短信和发件人）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T18:03:36.587

只需按日期对结果进行排序并使用 limit 子句：

```
getContentResolver().query(SMS_INBOX, new String[] {body, address}, 
    null, null, "date desc limit 3"); 
```

# ruby - 如何在主机分割的不同磁带中录制/播放？

> ID：13384530
> 
> 赞同：1
> 
> 时间：2012-11-14T18:00:48.567
> 
> 标签：ruby, vcr

在我正在进行的项目中，我们使用 VCR 来存储本地和外部服务的磁带。本地的是不断修改的微服务，而外部的几乎没有修改。

由于这个原因，再加上外部服务需要很长时间才能重新录制，这对我们大部分时间只重新录制本地磁带是有意义的。

为了解决这个问题，我们尝试在不同的文件夹（cassettes/localhost 和cassettes/external/sample.com）中分离磁带。

然后我们想出了：

```
VCR.configure do |config|
  config.around_http_request do |request|
    host = URI(request.uri).host
    vcr_name = VCR.current_cassette.name
    folder = host
    folder = "external/#{folder}" if host != 'localhost'
    VCR.use_cassette("#{folder}/#{vcr_name}", &request)
  end
  [...]
end 
```

但问题是我们有一些测试需要重复请求（完全相同的请求），服务器返回不同的结果。因此，使用上面的代码可以为每个 http 调用重置磁带。第一个请求被记录下来，第二个是第一个请求的回放，即使预期的响应会有所不同。

然后我们尝试了一种使用标签和嵌套磁带的不同方法：

```
RSpec.configure do |config|
  config.around(:each) do |spec|
    name = spec.metadata[:full_description]
    VCR.use_cassette "external/#{name}", tag: :external do
      VCR.use_cassette "local/#{name}", tag: :internal do
        spec.call
      end
    end
  end
  [...]
end

VCR.configure do |config|
  config.before_record(:external) do |i|
    i.ignore! if URI(i.request.uri).host == 'localhost'
  end

  config.before_record(:internal) do |i|
    i.ignore! if URI(i.request.uri).host != 'localhost'
  end
  [...]
end 
```

但这也行不通。结果是所有 localhost 请求都记录在内部磁带上。VCR 忽略了其余的请求。

那么你有什么建议来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:16:47.843

> 然后我们尝试了一种使用标签和嵌套磁带的不同方法……但这也行不通。

是的，我在设计盒式嵌套时并没有考虑到这种用例。HTTP 交互总是记录到最里面的磁带，但可以从任何嵌套级别播放（它首先尝试最里面的磁带，然后向上搜索父链）。我想到的嵌套盒式磁带的主要用例是黄瓜：您可能希望在整个场景中使用单个盒式磁带，但随后您可能希望将特定盒式磁带用于单个步骤定义（即，对于任何使用那一步）。内盒在使用时“接管”，但外盒在弹出内盒时仍然可用。

这是一个有趣的用例，不过……如果您认为 VCR 应该以这种方式工作，请考虑为它打开一个 github 问题，我们可以进行更多讨论。

至于你原来的问题：我认为@operand 的回答会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:46:31.517

我认为您想研究使用 :match_requests_on 设置。在此处阅读文档：[https ://www.relishapp.com/myronmarston/vcr/v/2-3-0/docs/request-matching](https://www.relishapp.com/myronmarston/vcr/v/2-3-0/docs/request-matching)

这应该允许您记录对同一个 URL 的多个请求，但让它们按顺序重放。

除此之外，我认为您将磁带分成不同目录的方法听起来不错。我过去为强制重新录制特定磁带所做的一件事就是在重新运行规范之前删除磁带本身。在您的情况下，这应该很容易，因为您已经很好地将它们分开了。

代替或除此之外，当您知道这是一个本地请求时，您可以使用 :all 记录设置，并将其修补到您的配置块中。就像是：

```
VCR.configure do |config|
  config.around_http_request do |request|
    host = URI(request.uri).host
    vcr_name = VCR.current_cassette.name
    folder = host
    if host != 'localhost'
      folder = "external/#{folder}"
      record_mode = :once
    else
      record_mode = :all
    end
    VCR.use_cassette("#{folder}/#{vcr_name}", :record => record_mode, &request)
  end
  [...]
end 
```

请注意，我还没有测试过这个，所以请仔细检查我。当然，当您只想回放内容时，您也不想使用 :all 记录设置。也许您可以在调用测试时以某种方式开发开关。

这不是一个完整的答案，但我希望这会有所帮助。

# ios - 通过登录验证的应用程序使用 APNS 的最佳方式

> ID：13384535
> 
> 赞同：1
> 
> 时间：2012-11-14T18:01:01.723
> 
> 标签：ios, apple-push-notifications

我需要为应用程序实现推送通知，它确实在有效的用户和密码下工作。此身份验证现在使用服务器端的一些 Web 服务进行处理，并且想知道哪种方式是为此类应用程序发送推送通知的最佳方式，因为用户可能没有在应用程序上登录，那么他/她应该无法看到推送通知。当另一个用户在同一设备上登录时也是如此。

没有找到太多这方面的信息，但认为最好的办法是应用程序将状态信息（登录、注销）发送到服务器，因此服务器在发送推送通知之前会检查用户是否在应用程序上登录，以及哪个用户已登录。这可能会出现一些问题，因为可能会发生应用程序崩溃或手机关机，并且应用程序无法向服务器发送注销状态，这将导致推送通知登录的设备。这种方法可能还有其他问题。

任何想法或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:28:33.723

你的假设是正确的。您当然可以在登录/注销时告诉服务器，但登录状态总是有可能在设备和服务器之间变得不同步。您可以在应用程序运行时通过保持与服务器的持久连接并仅在连接存在时发送推送通知来实现所需的功能；如果应用程序崩溃或退出，连接将中断并且推送通知将停止。但是，如果您想在应用程序退出或后台接收通知，这将无济于事。

# ldap - 无法在 openLDAP 中使用通配符搜索“成员”

> ID：13384539
> 
> 赞同：0
> 
> 时间：2012-11-14T18:01:33.120
> 
> 标签：ldap, openldap

. 我有一个奇怪的问题，我似乎无法使用通配符搜索组的“成员”或“唯一成员”属性。

考虑以下：

```
cn=myusers,ou=groups,dc=example,dc=com
objectClass=groupOfNames
objectClass=top 
```

这返回正常：

```
ldapsearch -h ldap-server -p 389 -D "cn=admin,dc=example,dc=com" -w Password -s sub -b "ou=groups,dc=example,dc=com" "(objectclass=groupOfNames)" member

cn=myusers,ou=groups,dc=example,dc=com
member=cn=user1234,ou=groups,dc=example,dc=com 
```

如果我使用它，它也可以正常工作：

```
ldapsearch -h ldap-server -p 389 -D "cn=admin,dc=example,dc=com" -w Password -s sub -b "ou=groups,dc=example,dc=com" "(&(member=cn=user1234,ou=groups,dc=example,dc=com)(objectclass=groupOfNames)" member 
```

但是，假设我想找到所有组，成员名称以“用户”开头。我试试这个：

```
ldapsearch -h ldap-server -p 389 -D "cn=admin,dc=example,dc=com" -w Password -s sub -b "ou=groups,dc=example,dc=com" "(&(member=cn=user*)(objectclass=groupOfNames))" member 
```

但没有任何回报！

现在我尝试将索引添加到“成员”和“唯一成员”属性为：

```
member pres,eq,approx,sub
uniquemember pres,eq,approx,sub 
```

...但是得到一个返回的错误'附加信息：属性“成员”的近似索引被禁止'，所以我留下了：

```
member pres,eq
uniquemember pres,eq 
```

即使在更改之后，我仍然无法使用“member”或“uniquemember”属性执行通配符搜索。有任何想法吗？

.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T19:13:14.247

这可以与[UnboundID Directory Server](https://www.unboundid.com/products/directory-server.php)一起按预期工作。尝试更新目录服务器软件 - OpenLDAP 论坛上有一些类似的问题，通过修复 DN 规范化解决了这个问题。

此外，没有“通配符”搜索之类的东西。您引用的断言值会导致所谓的“子字符串”搜索。为了提高性能，服务器应该索引子字符串 ( ) 的`member`和`uniqueMember`属性值`sub`，假设旧版 OpenLDAP 服务器支持为子字符串索引这些属性。

# matrix - 在 OpenCL 中减少矩阵行

> ID：13384542
> 
> 赞同：1
> 
> 时间：2012-11-14T18:01:35.637
> 
> 标签：matrix, sum, opencl, gpgpu, reduction

我有一个在 GPU 中存储为一维数组的矩阵，我正在尝试制作一个 OpenCL 内核，它将在该矩阵的每一行中使用归约，例如：

假设我的矩阵是 2x3，元素为 [1, 2, 3, 4, 5, 6]，我想要做的是：

```
[1, 2, 3] = [ 6]
[4, 5, 6]   [15] 
```

显然，正如我所说的减少，实际的回报可能是每行不止一个元素：

```
[1, 2, 3] = [3, 3]
[4, 5, 6]   [9, 6] 
```

然后我可以在另一个内核或 CPU 中进行最终计算。

好吧，到目前为止，我所拥有的是一个内核，它进行缩减但使用数组的所有元素，如下所示：

```
[1, 2, 3] = [21]
[4, 5, 6] 
```

执行此操作的实际缩减内核是那个（实际上是我在 stackoverflow 中从这里得到的）：

```
__kernel void
sum2(__global float *inVector, __global float *outVector,
     const unsigned int inVectorSize, __local float *resultScratch)
{
  const unsigned int localId = get_local_id(0);
  const unsigned int workGroupSize = get_local_size(0);

  if (get_global_id(0) < inVectorSize)
    resultScratch[localId] = inVector[get_global_id(0)];
  else
    resultScratch[localId] = 0;

  for (unsigned int a = workGroupSize >> 1; a > 0; a >>= 1)
  {
    barrier(CLK_LOCAL_MEM_FENCE);
    if (a > localId)
      resultScratch[localId] += resultScratch[localId + a];
  }

  if (localId == 0)
    outVector[get_group_id(0)] = resultScratch[0];
  barrier(CLK_LOCAL_MEM_FENCE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:16:19.897

我想一种解决方案是修改你的缩减内核，这样它就可以缩减数组的一部分。

```
__kernel void
sum2(__global float *inVector,
     __global float *outVector,
     unsigned int   inVectorOffset,
     unsigned int   inVectorSize,
     __local float  *resultScratch)
{
  const unsigned int localId = get_local_id(0);
  const unsigned int workGroupSize = get_local_size(0);

  if (get_global_id(0) < inVectorSize)
    resultScratch[localId] = inVector[inVectorOffset + get_global_id(0)];
  else
    resultScratch[localId] = 0;

  for (unsigned int a = workGroupSize >> 1; a > 0; a >>= 1)
  {
    barrier(CLK_LOCAL_MEM_FENCE);
    if (a > localId)
      resultScratch[localId] += resultScratch[localId + a];
  }

  if (localId == 0)
    outVector[get_group_id(0)] = resultScratch[0];
  barrier(CLK_LOCAL_MEM_FENCE);
} 
```

然后，您可以减少矩阵的一行，将行的开头作为 inVectorOffset 提供，并将行中元素的数量作为 inVectorSize 提供。

# ruby - 在主元素为 nil 的辅助元素上对多维数组进行排序

> ID：13384546
> 
> 赞同：1
> 
> 时间：2012-11-14T18:02:12.970
> 
> 标签：ruby

我有一个多维数组，其中主数组中的每个数组元素都有两个子元素，第二个子元素有时可以为零。我想对第二个子元素的主数组进行排序，除非第二个子元素为 nil，在这种情况下，我希望排序查看第一个子元素以找出顺序。

所以，这个数据

```
[[7, nil], [5, 4], [3,9]] 
```

会这样排序

```
[[5, 4], [7, nil], [3,9]] 
```

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:09:38.967

```
1.8.7 > [[7, nil], [5, 4], [3,9]].sort_by{|a| a.last.nil? ? a.first : a.last}
 => [[5, 4], [7, nil], [3, 9]] 
```

# iis - 启用 IIS 8.0 (windows 8 pro) 动态压缩

> ID：13384550
> 
> 赞同：5
> 
> 时间：2012-11-14T18:02:33.997
> 
> 标签：iis, windows-8, compression, iis-7.5, iis-8

我在 IIS 8（Windows 8 Pro）下遇到压缩问题。

它在 IIS 7.5 下的 Windows 7 中运行良好，但在 Windows 8 Pro 中它不起作用。

在深入研究之后，我比较了 applicationHost 配置文件（Windows 7 和 Windows 8），我发现了一些有趣的东西......

1.  在 Windows 7 中，我在 globalModules 下的 applicationHost 中有标签`<add name="DynamicCompressionModule" image="%windir%\System32\inetsrv\compdyn.dll" />`，我在 System32\inetsrv 中找到了文件 compdyn.dll

2.  在 Windows 8 中，我在 globalModules 下的 applicationHost 文件中没有该行，并且在 System32\inetsrv 中缺少 compdyn.dll

所以实际上我确定这个问题，任何人都知道为什么 Windows 8 Pro (IIS 8) 没有附带那个 dll 吗？

有什么我必须做的吗？

非常感谢，希望有人能帮助我。

**固定的**

简单的解决方案：必须为 IIS 安装动态内容模块，仅此而已。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-01T23:31:08.820

您必须在 Windows 8 Pro 机器上安装该功能。从开始，键入程序和功能。单击左侧栏中的打开或关闭 Windows 功能。展开 Internet 信息服务/万维网服务/性能特征/。勾选动态内容压缩并单击确定。只要安装了所需的所有其他功能，该功能就会启用，并且您的站点应该可以正常工作。

# javascript - 任何+时间中的字符串到javascript日期

> ID：13384551
> 
> 赞同：0
> 
> 时间：2012-11-14T18:02:36.530
> 
> 标签：javascript

我正在使用一个名为 Any+Time 的 javascript 库：http: [//www.ama3.com/anytime/](http://www.ama3.com/anytime/)

我执行以下操作：

```
 var defaultConv = new AnyTime.Converter();
  var dateTime = $("#DateTimeDemo").val();
  var date = defaultConv.parse(dateTime);
  alert(date); 
```

dateTime 被初始化为字符串`2012-11-14 19:01: CE` 但 date 以“无效数据”结尾？？为什么？解析器不工作还是我做错了什么？

编辑：通过查看 JS 库源代码，我认为我必须在创建时传递初始化值`new AnyTime.Converter`但我不是 100% 确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:09:12.327

是的，从外观上看，您必须将值传递给 AnyTime.Converter()，这是我的：

```
var defaultConv = new AnyTime.Converter(
    { format: "%Y-%m-%d %H:%i: %E",
        formatUtcOffset: "%: (%@)",
        hideInput: true,
        placement: "inline"
    }
  ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:10:18.077

这是因为 dateTime 的日期格式无效：

> 2012-11-14 19:01: CE

它应该是

```
2012-11-14 19:01:00 CE 
```

我包括了秒

# javascript - 如何将页面的滚动条绑定到div？

> ID：13384552
> 
> 赞同：-2
> 
> 时间：2012-11-14T18:02:40.477
> 
> 标签：javascript, jquery, html

如何将页面的滚动条绑定到特定的 div 而不是整个页面。有关此功能的示例，请参见 Google Plus。！ [http://i.stack.imgur.com/Ab82L.png](http://i.stack.imgur.com/Ab82L.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:38:56.153

您可以在左侧和顶部使用[位置固定面板。](http://davidwalsh.name/css-fixed-position)正文仍会正常滚动，但侧面的面板会使其看起来只有部分页面在滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:24:36.070

如果您不想弄乱浏览器的本机滚动条，您可以随时

1.  创建一个容器
2.  将容器的高度和宽度设置为 100%
3.  将溢出设置为滚动（或自动）

这样您就可以创建自己的视口并拥有更多控制权。

# login - 如何使用 autoit 登录到 webbrowser windows promt

> ID：13384553
> 
> 赞同：0
> 
> 时间：2012-11-14T18:02:40.910
> 
> 标签：login, phpmyadmin, prompt, autoit

我想登录phpmyadmin，它弹出一个窗口，不是webform，是一个提示。

我对完成这件事没有任何想法。我的尝试是这样，但我不知道。

```
$oIE = _IECreate ("http://www.aersss.com/dh_phpmyadmin/mysql.aersss.com/index.php?db=mydb_compu_com")

_IELoadWait ($oIE)

Send("login")
Send("{tab}")
Send("password") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:59:15.743

我假设您的意思是基本身份验证（可以设置 phpMyAdmin 以使用它）。在这种情况下，您可以使用以下内容：

```
http://username:password@www.aersss.com/dh_phpmyadmin/mysql.aersss.com/index.php?db=mydb_compu_com 
```

# resultset - DBIx 类：在结果集中重载 new()

> ID：13384554
> 
> 赞同：1
> 
> 时间：2012-11-14T18:02:44.713
> 
> 标签：resultset, dbix-class

你好亲爱的社区成员。

我有以下问题。说，我有一个用户表。在我的编程过程中，我为此表创建了很多搜索查询。然后，后来，我意识到我需要始终只选择“活动”用户，即“活动”列设置为 TRUE。现在，不是使用额外的过滤器（active =>“true”）调整我对用户表的所有查询，而是可以在结果集类中重载 new() 或者做一些全局改变我所有查询的方法我需要？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:04:57.873

向您的 User ResultSet 类添加一个返回过滤结果集的方法，例如：

```
sub search_active {
    my $self = shift;
    return $self->search({ active => 1 });
} 
```

另请参阅有关“预定义搜索”的 DBIx::Class 文档以获取更多信息。

# r - 跨多行的字符串延续，没有换行符

> ID：13384555
> 
> 赞同：13
> 
> 时间：2012-11-14T18:02:44.823
> 
> 标签：r, newline, word-wrap, rodbc, end-of-line

我正在使用 RODBC 库将数据带入 R。我有一个很长的查询，我想将一个变量传递给，就像[这个](https://stackoverflow.com/questions/4330072/pass-r-variable-to-rodbcs-sqlquery)SO 用户一样。

问题是 R 将我的查询中的空格/回车解释为换行符`'\n'`。

[这个问题](https://stackoverflow.com/questions/6329962/split-code-over-multiple-lines-in-an-r-script)的公认解决方案建议简单地将文本分成块然后`paste()`一起 - 这有效，但理想情况下我希望保持空白完整 - 使得在数据库中测试/验证查询的行为变得更加容易在粘贴到 R 之前。

在我熟悉的其他语言中，有一个简单的续行字符 - 事实上，关于已接受答案的一些[评论](https://stackoverflow.com/a/6330066/561698)正在寻找类似于 python 的`\`.

`strwrap`我在 R 讨论列表的深处找到了一个解决方法，所以为了让互联网变得更好，我会在这里发布。但是，如果有人可以指出更优雅/直接的解决方案的方向，我会很乐意接受您的回答。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-14T18:15:14.793

我不知道您是否会发现这有帮助，但我最终倾向于将我的 SQL 与我的 R 脚本分开。将查询保留在我的 R 脚本中，除了非常短的查询，我发现很快就会变得不可读。

这些天来，我倾向于将超过一行的查询保存在自己单独的 .sql 文件中。然后我可以在一个漂亮的文本编辑器中保持它们的格式和可读性，并根据需要通过以下方式将它们读入 R：

```
read_sql <- function(path){
    stopifnot(file.exists(path))
    sql <- readChar(path,nchar = file.info(path)$size)
    sql
} 
```

为了将参数绑定到查询中，我只需`%s`在 .sql 文件中保留参数的位置，然后使用 .sql 在 R 中添加参数`sprintf`。

I've been much happier this way, as I was finding that cluttering up my R scripts with really long `paste` statements and multi-line character objects was making my code really hard to read.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-14T18:02:44.823

[根据文档](http://stat.ethz.ch/R-manual/R-patched/library/base/html/strwrap.html)， R`strwrap`将破坏空格，包括换行符。

本质上，您可以通过最初让 R 引入换行符/换行符`\n`，然后立即将它们剥离来获得所需的行为。

```
#make query using PASTE
query_1 <- paste("SELECT map.ps_studentid 
      ,students.first_name || ' ' || students.last_name AS full_name
      ,map.testritscore
      ,map.termname
      ,map.measurementscale
FROM map$comprehensive_with_growth map
JOIN students 
  ON map.ps_studentid = students.id
WHERE map.termname = '",map_term,"'", sep='')

#remove newline characters introduced above.  
#width is an arbitrary big number-
#it just needs to be longer than your string.
query_1 <- strwrap(query_1, width=10000, simplify=TRUE)

#execute the query 
map_njask <- sqlQuery(XE, query_1) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-03-21T15:28:43.773

```
query <- gsub(pattern='\\s',replacement="",x=query) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:29:35.777

Try using sprintf to get variable substitution, and then replacing all newlines and whitespace.

See [my answer](https://stackoverflow.com/a/15684342/1165112) to a similar question for details.

# javascript - 使用 JQuery Deferred 和 Promise

> ID：13384564
> 
> 赞同：1
> 
> 时间：2012-11-14T18:03:21.623
> 
> 标签：javascript, jquery

我有一个函数，我想使用 deferred 并承诺链接动画。

第一个动画是一个类型编写器插件，使用[https://github.com/stephband/jticker/blob/master/js/jquery.jticker.js](https://github.com/stephband/jticker/blob/master/js/jquery.jticker.js)。第二个是包含其他动画的函数。

我想要做的是运行第一个动画，当动画完成后，运行第二个。

```
 $(function () {            
        var ticker =setTimeout(runTicker(), 8000);           
        $.when(ticker).done(function(){
            setTimeout(Other(),16000)});
    });

  function runTicker() {
        $("#ticker").ticker({
            cursorList: " ",
            rate: 50,
            delay: 18000
        }).trigger("play").trigger("stop");
    } 
```

我已经尝试了许多延迟的例子，但仍然无法得到它。

我终于清除了所有示例，以便让自动收报机再次工作。

我将如何使用 deferred 和 promise 来运行 Other() 函数？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:56:38.590

不知道如何使用适当的基于回调的解决方案来解决您的实际问题（关于您使用的 Ticker 插件的信息不足），但我可以解释您当前代码中出了什么问题：

```
var ticker = setTimeout(runTicker(), 8000); 
```

不要`runTicker`马上打电话。您想要的是将函数本身（而不是其调用的结果）传递给[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout). 将返回一个 [纯整数] 数字并分配给`ticker`. 它可用于在通过[`clearTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)- 而不是其他任何地方中止它时识别超时。

```
$.when(ticker)... 
```

现在创建一个新的 Deferred。看看[它的文档](http://api.jquery.com/jQuery.when/)：它将 Deferred 对象相互结合，并为*任何其他值*（如数字）创建立即解析的 Promise。因此，您的`done`回调也被立即调用，并且您再次犯了错误，执行`Other`而不是将其传递给`setTimeout`.

* * *

由于您使用的插件在回调方面似乎非常有限，所以我现在已经编写了自己的插件（只是为了好玩:-)。它从[这个以前的答案](https://stackoverflow.com/a/11665782/1048572)改编了我的解决方案，它非常优雅地使用了纯 DOM 方法。它被编写为标准的 jQuery 插件，甚至支持`stop`和`go`方法，并且 - 最重要的是 - 很好地集成在[jQuery`fx`队列](https://stackoverflow.com/q/1058158/1048572)中。这意味着您将能够像使用[`animate()`](http://api.jquery.com/animate/)回调和链接一样使用它，如果您想使用 Deferreds，您可以调用该[`promise()`方法](http://api.jquery.com/promise/)来获取队列结束的 Promise。示例调用：

```
$('#ticker').fadeOut().delay(2000).typewriter({framerate:1000/30}, function() {
    // the typewriter effect has just ended
}). ... .promise().done(function() {
    // effect queue has ended - start Other()
});

jQuery(".stop").click($.fn.typewriter.bind($("#ticker"), "stop")); 
```

## → [jsfiddle.net 上的代码](http://jsfiddle.net/T5kZM/45/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:10:39.620

`setTimeout`显然不会返回 jQuery *Deferred 对象*，它是这里的原生 Javascript 方法。你需要像这样重写它：

```
function runTicker() {
    return jQuery.Deferred(function( promise ) {
        setTimeout(function() {
            $("#ticker").ticker({
                cursorList: " ",
                rate: 50,
                delay: 18000
            }).trigger("play").trigger("stop");

            promise.resolve();
        }, 8000);
    }).promise();
} 
```

然后你可以这样称呼它

```
var ticker = runTicker();

jQuery.when( ticker ).done(function() {
    setTimeout(Other,16000)});
}); 
```

# eclipse - 在 Eclipse 中查找项目依赖项

> ID：13384568
> 
> 赞同：0
> 
> 时间：2012-11-14T18:03:45.617
> 
> 标签：eclipse, apache-flex, ant

我正在使用 Eclipse 中的几个 Java/Flex 项目开发一个遗留应用程序，包括项目 P1，它使用 Ant 将（通过 mxmlc）属性文件编译成 SWF 文件。（我不知道 Flex 是否与这个问题有关。）

当我在 Eclipse 中通过 Ant/build.xml 构建 P1 时，它会构建其他项目：P2、P3、P4。我想找到这些依赖项，以便删除它们。

我已经尝试了这些，但无济于事：

*   右键单击 P1 -> 属性 -> 构建器
*   右键单击 P1 -> Java 构建路径 -> 项目、订单和导出等
*   右键单击 P1 -> 项目参考
*   检查 P1 文件夹中的“.classpath”和“.project”

但没有关于 P2、P3、P4 的内容。

作为健全性检查，我重命名了 build.xml 并执行了：

*   右键单击 P1 -> 导出 -> Ant 构建文件

它会生成一个 build.xml，清楚地显示对 P2、P3、P4 的依赖关系。

我还能在哪里找到配置？必须有另一种选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:49:06.093

您的 P2、P3、P4 项目可能具有来自 P1 的链接文件。然后，如果您使用 P1 中的构建更改这些文件或文件夹，它可以触发 P2、P3 或 P4 上的构建。链接文件可以在操作系统级别和 eclipse 中创建。

请参阅[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-13.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-13.htm)

还要检查 P2,P3,P4 项目建设者的建设者，也许你会发现一些东西。

您在 P1、P2、P3、P4 项目中有哪些项目方面？

不可能，P1 的 ant 脚本只是用“..\P2”之类的路径引用触及 P2、P3、P4 吗？

# google-app-engine - 谷歌联盟和服务器到服务器加密

> ID：13384571
> 
> 赞同：2
> 
> 时间：2012-11-14T18:03:54.620
> 
> 标签：google-app-engine, xmpp

我正在尝试设置 XMPP 服务器，以便我的服务用户可以与其他服务的 XMPP 用户通信。我有两个要求

1) 其他服务的用户必须仍然能够使用他们当前使用的任何客户端和聊天服务（例如 gmail Web 客户端）与我的客户交谈。

2) 客户端与服务器、服务器与服务器之间的通信必须加密。（后面更难）

我设置了一个 XMPP 服务器并与 gmail 联合，发现服务器到服务器的通信没有加密。接下来我将我的 XMPP 服务器与 jabber.org 联合起来，从我的服务器到 jabber.org 的连接被加密，让我确信我的服务器配置是正确的。有什么方法可以加密我的 XMPP 服务器和 Google 之间的通信是否有任何 XMPP 服务器支持与 Google 的 TLS 假设 Google 目前不支持，他们是否计划将来在服务器上添加 TLS 到服务器通信？预计什么时候？

代替加密的服务器到服务器的通信，是否还有其他可能性（鉴于上述要求）？谷歌应用引擎应用程序是否会在 gmail 服务器和我的谷歌应用引擎应用程序之间加密通信并满足第一个要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:32:07.930

对于服务器到服务器的通信，您可以使用 AES 对所有通信进行加密，对于密码，您可以使用 RSA 发送。如果您使用的是 python，则可以使用 pycrypto，尽管要在开发服务器中测试它必须安装该库。

关于客户端和服务器通信我不确定您是否可以使用相同的加密。

# sql - 计算列公式 ( yyMMdd## )

> ID：13384572
> 
> 赞同：0
> 
> 时间：2012-11-14T18:03:56.117
> 
> 标签：sql, sql-server, tsql

我需要一个计算列公式来给我这个`yyMMdd##`。

我有一个标识列 ( `DataID`) 和一个日期列 ( `DataDate`)。

这是我到目前为止所拥有的。

```
(((right(CONVERT([varchar](4),datepart(year,[DataDate]),0),(2))+
right(CONVERT([varchar](4),datepart(month,[DataDate]),0),(2)))+
right(CONVERT([varchar](4),datepart(day,[DataDate]),0),(2)))+
right('00'+CONVERT([varchar](2),[DataID],0),(2))) 
```

这给了我：

```
12111201
12111202
12111303
12111304
12111405
12111406
12111407
12111508 
```

我想要的是：

```
12111201
12111202
12111301
12111302
12111401
12111402
12111403
12111501 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:16:09.787

我**假设**您希望每个日期都有一个从 1 开始的序列 - 对吧？如果不是：请**解释**您真正想要/需要什么。

您将无法使用`IDENTITY`列和计算列规范来执行此操作。一`IDENTITY`列返回不断增加的数字。

您**可以**做的不是将这些值存储在磁盘上 - 而是使用 CTE 和`ROW_NUMBER() OVER (PARTITION BY....)`构造动态创建这些数字 - 每当您需要选择它们时。或者有一份工作定期根据这样的 CTE 设置这些值（例如，每小时一次左右）。

该 CTE 可能看起来像这样 - 再次**假设**它`DataDate`确实是类型`DATE`（而不是`DATETIME`或类似的东西）：

```
;WITH CTE AS
(
    SELECT 
       DataID, DataDate,
       RowNum = ROW_NUMBER() OVER (PARTITION BY DataDate ORDER BY DataID)
    FROM
       dbo.YourTable
)
SELECT 
    DataID, DataDate, RowNum
FROM
    CTE 
```

# c# - 在 C# 中向 SQL Server 数据库添加新条目

> ID：13384573
> 
> 赞同：0
> 
> 时间：2012-11-14T18:03:59.837
> 
> 标签：c#, sql-server, wpf, visual-studio-2012

我是论坛和一般编程的新手，所以这可能很明显，但我发现关于这个主题的所有内容是如何通过 Visual Studio Express 创建一个新数据库（我正在使用版本 2012 for windows Desktop）UI . 我已经创建了数据库和一个新表，其中包含“id”、“用户名”和“密码”列。

现在，当用户单击 WPF 按钮时，我想在此表中添加一个新条目。按钮旁边有一个带有用户名的文本框和一个用于密码的密码框。添加新条目时，应使用这两个框中的数据填写相应的列。ID 应自动增加到下一个更高的值。

稍后我希望能够使用相同的两个 Box 和另一个按钮将输入的信息与数据库中的表进行比较，并授予用户对其他功能的访问权限。

如何才能做到这一点？

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:30:03.217

阅读 SqlDataAdapter、SqlCommand、DataTable 和 SqlCommand。这些将帮助您到达那里。

# c++ - C++ std::sort() 调用析构函数

> ID：13384576
> 
> 赞同：4
> 
> 时间：2012-11-14T18:04:02.550
> 
> 标签：c++

我重载了我的类' *()*运算符以将其用作排序比较器函数。使用*std::sort()*时，出于某种原因，它会多次调用类的析构函数（显然取决于向量中的条目数量）。我在 ~RANK() 中有更多描述。

```
#include <stdio.h>
#include <stdlib.h>
#include <vector>
#include <algorithm>

class RANK
{
    struct COMBO
    {
        int x;
    };

    std::vector<COMBO *> data;
public:
    RANK()
    {
        printf("RANK()\n");
    }

    ~RANK()
    {
        printf("~RANK()\n");

        /*
         * Here is the problem.
         * Since my vector consists of pointers to COMBO objects,
         * I delete them upon RANK object's destruction. However,
         * std::sort() calls RANK's destructor many times and
         * throws some runtime error, unless commented out.
         */
        //for (unsigned int i = 0, n = data.size(); i < n; i++)
        //  delete data[i];
    }

    void Add(int x)
    {
        COMBO *combo = new COMBO();
        combo->x = x;

        data.push_back(combo);
    }

    unsigned int Size()
    {
        return data.size();
    }

    void Sort()
    {
        std::sort(data.begin(), data.end(), *this);
    }

    int operator[](unsigned int pos)
    {
        return data[pos]->x;
    }

    bool operator()(COMBO *combo1, COMBO *combo2)
    {
        return combo1->x > combo2->x;
    }
};

int main()
{
    RANK rank;
    rank.Add(1337);
    rank.Add(9001);
    rank.Sort();

    for (unsigned int i = 0, n = rank.Size(); i < n; i++)
        printf("%d ", rank[i]);
        printf("\n");

    system("pause");

    return 0;
} 
```

输出（带有注释的析构函数）：

```
RANK()
~RANK()
~RANK()
~RANK()
~RANK()
~RANK()
9001 1337 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T18:09:52.130

std::sort 的比较函数是按值传递的。通过使用 RANK 对象作为比较器，您将一个副本传递给`std::sort`（作为最后一个值），它可能会在内部多次复制它。

我建议将 COMBO 的比较运算符从 RANK 类中分离出来

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:23:33.567

第一个问题是你打破了[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。您的类需要一个重要的析构函数来释放其资源，因此它需要正确可复制或不可复制，以避免多个对象拥有相同的资源。最简单的解决方案是通过删除复制构造函数和复制赋值运算符来防止复制：

```
RANK(RANK const &) = delete;
void operator=(RANK const &) = delete; 
```

或者，如果您使用的是 2011 年之前的编译器，请将它们声明为私有且没有实现。

或者，您可以考虑存储智能指针，例如`std::unique_ptr`（防止复制）或`std::shared_ptr`（允许共享所有权）；如果您这样做，那么您的类将具有与您选择的指针相同的（安全）复制语义。

防止复制将使第二个问题变得明显：您将`RANK`对象用作`std::sort`. 比较器按值取值，因此对象被复制到那里。这很容易通过为比较器定义一个单独的类型来解决：

```
struct CompareCOMBO {
    bool operator()(COMBO *combo1, COMBO *combo2) {
       return combol1->x > combo2->x;
    }
};

std::sort(data.begin(), data.end(), CompareCOMBO()); 
```

或者，如果您可以使用 lambda：

```
std::sort(data.begin(), data.end(), 
    [](COMBO *combo1, COMBO *combo2){
         return combo1->x > combo2->x;
    }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T18:07:07.743

提供一个复制构造函数并在其中放置一个断点以查看调用它的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:14:43.287

通过将 *this 作为比较对象传递，它会在排序过程中被复制（这就是为什么你看不到构造弹出，如果你有一个复制构造函数，你会看到对它的调用）。

考虑[这个线程](https://stackoverflow.com/questions/1380463/sorting-a-vector-of-custom-objects)来对你的对象进行排序

# c# - SharePoint 2010 允许特定页面的代码块

> ID：13384578
> 
> 赞同：1
> 
> 时间：2012-11-14T18:04:16.257
> 
> 标签：c#, sharepoint-2010, codeblocks

我正在尝试在 SharePoint 2010 的 aspx 页面中使用 C# 代码。我不断收到“不允许代码块”错误。

我的 aspx 页面位于（服务器）/SitePages/ajax.aspx：（如果重要，在 SharePoint Designer 2010 中编辑）

```
<%@ Page Language="C#" %>
<script runat="server">
    Response.Write("Hello world");
</script> 
```

我在 C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\CONFIG 的 web.config 中添加了以下内容

```
<PageParserPath VirtualPath="/SitePages/ajax.aspx" CompilationMode="Always" AllowServerSideScript="true" /> 
```

这是我添加到 web.config 中的同一行，在上下文中显示：

```
<SharePoint>
  <SafeMode 
        MaxControls = "200"  
        CallStack = "false"
        DirectFileDependencies ="10"
        TotalFileDependencies = "50"
        AllowPageLevelTrace = "false"
        >
        <PageParserPaths>
            <PageParserPath VirtualPath="/SitePages/ajax.aspx" CompilationMode="Always" AllowServerSideScript="true" />
        </PageParserPaths> 
```

为什么我仍然收到“代码块”错误？某处是否有另一个安全开关？

（我知道自定义 Web 部件是首选解决方案，但我认为这还不够，因为返回值应该是 json - 这是一个通过 ajax 访问以获取数据的页面。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:13:38.610

When you upload an aspx page to a document library (which is what you're doing when you use SharePoint Designer) that aspx page can't have inline code blocks and it can't have a code behind. This is primarily a security mechanism. It prevents any old user from uploading an aspx page with malicious content that will then be executed with full privileges on your server, and also serving content to (potentially) any user.

For an aspx page to execute code it needs to be compiled into a WSP and deployed to the GAC on the server. When you do that you can either use inline code blocks or, better yet, have an aspx page with a code behind. To publish that page to the site you would need to compile the project in visual studio into a WSP, deploy that to the server by logging into the machine with sufficient privileges, and then add and deploy the code. This ensures that non-developers can't upload executable code to your site.

Finally, on a more unrelated note, since you don't actually want to display a page, but just JSON content, you probably shouldn't use an aspx page at all (although you *can*). You should probably just create an HTTP handler or a web service that writes the appropriate content out.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:21:59.780

I suppose, you have to define PageParserPath element in an Web application web.config that is located C:\inetpub\wwwroot\wss\VirtualDirectories[application folder]\web.config.

# php - 逗号的简单正则表达式

> ID：13384580
> 
> 赞同：0
> 
> 时间：2012-11-14T18:04:26.787
> 
> 标签：php, regex

您好，有人可以帮我解决这个正则表达式吗

这是我的 $lang_file：

```
define(words_picture,"Снимка");
define(words_amount,"бр.");
define(words_name,"Име");
define(words_price_piece,"Ед. цена");
define(words_total,"Обща цена");
define(words_del,"Изтрий");
define(words_delivery,"Доставка,но няма"); 
```

这是我的代码：

```
$fh = fopen($lang_file, 'r');
$data = str_replace($rep,"",fread($fh, filesize($lang_file)));
fclose($fh); 
preg_match_all('/define\((.*?)\)/i', $data,$defines,PREG_PATTERN_ORDER); 
```

当我打印 $defines 我得到这个：

```
[0] => words_picture,"Снимка"
[1] => words_amount,"бр."
[2] => words_name,"Име"
[3] => words_price_piece,"Ед. цена"
[4] => words_total,"Обща цена"
[5] => words_del,"Изтрий"
[6] => words_delivery,"Доставка" //here is the part that is missing and i need it :-) 
```

因此，当字符串中有逗号时，它会在那里破坏字符串，并且不会返回正确的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:13:02.987

Try `(koko.*?)` as the match. That'll return `koko` for `koko,goko`. If you want it to return `koko,goko`, remove the `?`. Make it `(koko.*)`. That will return `koko,goko` for `koko,goko`.

Here's a site that I use to test my regex against a number of cases:

[http://www.cyber-reality.com/regexy.html](http://www.cyber-reality.com/regexy.html)

based on your edit I'd say you're looking for `(koko.*)`. If your code worked for everything else, use this:

```
preg_match_all('\(/define.*)\)/i', $data,$defines,PREG_PATTERN_ORDER); 
```

# mysql - 无法在 MYSQL 错误 1064 (42000) 中创建函数

> ID：13384581
> 
> 赞同：0
> 
> 时间：2012-11-14T18:04:29.943
> 
> 标签：mysql, function

嗨，我正在使用 MySQL 创建一个函数：

```
CREATE FUNCTION INSERTGROUP(name VARCHAR(50))
RETURNS INT
NOT DETERMINISTIC
BEGIN
DECLARE 'idGroup' INT;

IF (NOT EXISTS (SELECT groupID FROM groupsTable WHERE groupName = 'name'))
THEN INSERT INTO groupsTable (groupName) VALUES ('name');

SELECT groupID INTO 'idGroup' FROM groupsTable WHERE groupName='name';

RETURN 'idGroup';
END// 
```

但是当我尝试创建它时出现此错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near
''idGroup' INT;

IF (NOT EXISTS (SELECT groupID FROM serverGroupsTable WHERE gro' at line 5 
```

我已经通过论坛和其他类似的问题，但我不能让它创建功能。

我做错了什么？语法是否正确？我需要添加其他东西吗？

好的，这就是我尝试过的：

```
CREATE FUNCTION INSERTGROUP(name VARCHAR(255))
RETURNS INT
NOT DETERMINISTIC
BEGIN
DECLARE idGroup INT;

IF (NOT EXISTS (SELECT groupID FROM groupsTable WHERE groupName = name))
THEN INSERT INTO groupsTable (groupName) VALUES (name);

SELECT groupID INTO idGroup FROM groupsTable WHERE groupName=name;

RETURN idGroup;
END// 
```

和

```
CREATE FUNCTION INSERTGROUP(name VARCHAR(255))
RETURNS INT
NOT DETERMINISTIC
BEGIN
DECLARE idGroup INT;

IF (NOT EXISTS (SELECT groupID FROM groupsTable WHERE groupName = 'name'))
THEN INSERT INTO groupsTable (groupName) VALUES ('name');

SELECT groupID INTO idGroup FROM groupsTable WHERE groupName='name';

RETURN idGroup;
END// 
```

最后两个我得到了这个错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near
'' at line 13 
```

和上面的一样

我也做`DELIMITER //`改变它`;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T18:05:18.143

从声明中删除引号

```
DECLARE idGroup INT; 
```

并且您忘记了函数开头的分隔符更改

```
delimiter //
CREATE FUNCTION INSERTGROUP(name VARCHAR(255)) 
```

你忘了结束你的`if`陈述

```
end if; 
```

无论你想让它在哪里结束

# objective-c - 为什么我们有 mutableOrderedSetValueForKey 而没有 OrderedSetValueForKey？

> ID：13384582
> 
> 赞同：0
> 
> 时间：2012-11-14T18:04:30.397
> 
> 标签：objective-c, xcode, core-data

如果我们只是想看看那里有什么而不​​是想改变一些东西然后我们想通过它的键而不是使用点符号来访问它呢？

例如：

我有一个叫做的对象`CatalogData`

我可以做得到`CatalogData.Images`页面。

但是，假设我有一个返回的函数，`NSManagedObject`我想传递`@"Images"`给该函数。

所以，最终它会得到类似的东西

```
[anNSManagedObjectThatisactuallyaCatalogData orderdSetforKey:@"Images"] 
```

好吧，我们不能这样。

所以为什么？

我们应该使用旧的`objectForKey`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:09:20.157

你可以使用

```
[anNSManagedObjectThatisactuallyaCatalogData valueForKey:@"Images"] 
```

它返回一个`NSOrderedSet`if “Images” 是一个有序的对多关系。

# java - 跨平台下Java Swing GUI Size

> ID：13384584
> 
> 赞同：1
> 
> 时间：2012-11-14T18:04:47.117
> 
> 标签：java, swing, user-interface, cross-platform

我有一个摆动 gui，它在 windows 平台上具有适当的`JPanel`尺寸`JDialog`，屏幕尺寸从 13 英寸到 15 英寸。我所说的适当大小是正确显示其中的所有组件`JPanel`和消息`JDialog`。

但是，当在带有 Genome/Kde 桌面的 Ubuntu linux 下运行时，我发现并非所有组件或消息都完全显示，并且似乎宽度或高度都不够，并且 GUI 界面被裁剪

有人对如何解决它有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:37:29.043

在显示之前为您的 JDialog调用[Window.pack()](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#pack%28%29)以使窗口大到足以容纳其中的所有组件。这要求您使用布局管理器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T18:21:12.543

要在多个平台上拥有一致的 UI，您必须使用 LayoutManagers。

[http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

有几个图形编辑器支持使用 LayoutMaganers 创建 Swing 用户界面。一个例子是 Eclipse 的 WindowBuilder：http: [//www.eclipse.org/windowbuilder/](http://www.eclipse.org/windowbuilder/)

# c++ - 两个 for 循环和其中的一个 if 语句

> ID：13384587
> 
> 赞同：1
> 
> 时间：2012-11-14T18:04:53.947
> 
> 标签：c++, c, if-statement, for-loop, break

我的代码是这样的： -

```
for() //outer for
{
   for() //inner for
   {
      if()
      {
         break;
      }
   }
} 
```

如果break语句执行，下一次执行将是哪个for循环？我知道这是一个非常抽象的问题，但我真的没有时间编写完整的代码。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T18:06:01.097

该`break`语句终止它出现的最近的封闭`do`, `for`, `switch`, or语句的执行。`while`在这种情况下，这意味着只突破内部`for`。

**编辑：** 标准参考： **6.6.1 break 语句 [stmt.break]**

> 1 break 语句应仅出现在迭代语句或 switch 语句中，并导致最小的封闭迭代语句或 switch 语句终止；控制传递到终止语句之后的语句（如果有）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T18:07:17.370

`break`只会打破内在`**loop**`。**它只在它被调用的地方打破最近的循环。**

在您的示例中，如果满足您的`if`条件，它将停止内部 for 循环的迭代并移回（继续）外部 for 循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T06:09:09.190

如果你愿意，你也可以使用 goto 来打破外循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:09:47.593

您需要一种方法来打破外部循环，因为`break`它只会离开其封闭范围。你用来管理状态的东西可以是任何东西，但在最简单的形式中，你可以使用一个布尔值并检查它以及最外层循环中的原始条件。

```
bool breakLoop = false;
for(...; ... && !breakLoop; ...) //outer for
{
   for() //inner for
   {
      if()
      {
         breakLoop = true;
         break;
      }
   }
} 
```

# javascript - 动态添加元素并尝试使用选择器 .click 事件 jQuery

> ID：13384588
> 
> 赞同：0
> 
> 时间：2012-11-14T18:05:05.523
> 
> 标签：javascript, html, jquery, jquery-events, dynamic-data

我正在尝试动态添加元素并在 JQuery 中为它们设置点击侦听器。无论出于何种原因，`removeGroup`当我单击元素“删除”按钮时，事件都不会触发。任何帮助都会很棒。

```
$('.removeGroup').click(function(event){
    alert();
});

cartPopper.click(function(event){
    $('#selectedGroupList').find('.selected').remove();
    for(group in selectedGroups)
    {
        var group_id = selectedGroups[group];
        var name = $('.' + group_id).text();
        $('#selectedGroupList')
            .append
            (
            '<li style="font-size:20px" class="selected ' + group_id + '">'
            + '<a href="javascript: void(0);" class="">'
            + '<button class="btn btn-danger removeGroup" type="button">'
            + 'Remove'
            + '<text class="groupValue" style="display: none;">'
            + group_id + '</text></button></a>'
            + name
            + '</li>'
            );
     }
     cartPop.show();
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:06:35.187

通俗地说，您编写的代码仅将单击事件绑定到已存在的元素，而不将其绑定到新创建的元素。

通过使用事件委托模型，您可以使其绑定到当前和未来的元素。我认为我真的不擅长解释，所以请参阅[delegate()](http://api.jquery.com/delegate/)和[on](http://api.jquery.com/on/)了解更多信息。

代替

```
$('.removeGroup').click(function(event){
    alert();
}); 
```

和

```
$(document).on('click', '.removeGroup', function(event){
    alert();
}); 
```

# r - R中的质量变量声明和赋值？

> ID：13384593
> 
> 赞同：8
> 
> 时间：2012-11-14T18:05:22.480
> 
> 标签：r, variable-assignment

如果这是一个愚蠢的问题，我深表歉意——但这是我第一次尝试使用`R`，我最终编写了一些代码，如下所示：

```
some <- vector('list', length(files))
thing <- vector('list', length(files))
and <- vector('list', length(files))
another <- vector('list', length(files))
thing <- vector('list', length(files)) 
```

有没有更好的（干）方法来做到这一点`R`？

换句话说，我想一次将相同的值分配给多个变量（根据@Sven Hohenstein 的回答）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-14T18:32:27.207

如果要一次将相同的值分配给多个变量，请使用：

```
some <- thing <- and <- another <- thing <- vector('list', length(files)) 
```

# algorithm - 将一个矩形放入另一个矩形

> ID：13384594
> 
> 赞同：6
> 
> 时间：2012-11-14T18:05:23.180
> 
> 标签：algorithm, function, geometry, pseudocode

我经常将一个矩形拟合到另一个矩形中，以便它很好地适合并且居中。我会在白板上画一些东西，拍一张照片，看看逻辑是什么，但是天色变暗了，烛光让它变得不那么有趣了。

无论如何，它非常简单易懂。这是我不得不再次从头开始编写的函数（这次是在 PHP 中）：

```
// Fit rectangle 2 into rectangle 1 to get rectangle 3
// Rectangle 3 must be centered
// Return dimensions of rectangle and position relative to rectangle 1

function fitrect($w1,$h1,$w2,$h2){

    // Let's take a chance with rectangle 3 width being equal to rectangle 1 width
    $w3=$w1;
    $h3=$w3*($h2/$w2);

    // Check if height breaks rectangle 1 height
    if($h3>$h1){
        // Recalculate dimensions and then position
        $h3=$h1;
        $w3=$h3*($w2/$h2);
        $x3=($w1-$w3)/2;
        $y3=0;
    }else{
        // Just calculate position
        $y3=($h1-$h3)/2;
        $x3=0;
    }

    // Tidy up
    $x3=round($x3);
    $y3=round($y3);
    $w3=round($w3);
    $h3=round($h3);

    // Result array
    $res=array($x3,$y3,$w3,$h3);

    return($res);

} 
```

我想了解这个算法和它的其他版本，这样我的大脑就会摸索基础，这样我就不必再依赖笔和纸（或白板）了。

那么，你会怎么做呢？什么绒毛可以去除？

编辑：作为一个例子 - 假设我们有矩形 1 的尺寸为 256x256，矩形 2 的尺寸为 44x167。然后我们需要将矩形 2 缩放到 67x256 并将其定位在相对于矩形 1 的 94,0 处，使其最大化并集中在矩形 1 中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T18:31:13.183

这就是我将如何做到的。

让我们定义一个术语，肥胖，它等于矩形的宽度与其高度的比率。一个高度为 1 宽度为 10 的矩形的胖度为 10。一个高度为 20 宽度为 10 的矩形的胖度为 0.5。当你调整一个矩形的大小时，它的粗细不会改变。

当您将矩形 2 的大小向上或向下缩放以使其宽度等于矩形 1 时，只要矩形 2 比矩形 1 胖，它就*不会溢出顶部或底部。如果 1 比矩形 2 胖，**它将*溢出。现在您提前知道是否要调整大小以适应合适的宽度或高度。此外，两种情况的翻译逻辑相同，因此可以超出 if/else 块。

在伪代码中：（对不起，我不知道 PHP）

```
fatness1 = w1 / h1
fatness2 = w2 / h2

#adjust scaling
if fatness2 >= fatness1:
    #scale for a snug width
    scaleRatio = w1 / w2
else:
    #scale for a snug height
    scaleRatio = h1 / h2
w3 = w2 * scaleRatio
h3 = h2 * scaleRatio

#adjust rectangle 3's center so it is the same as 1's center
xCenterOf1 = x1 + (w1 / 2)
yCenterOf1 = y1 + (h1 / 2)

x3 = xCenterOf1 - (w3 / 2)
y3 = yCenterOf1 - (h3 / 2)

return (x3, y3, w3, h3) 
```

在 python 中测试，假设矩形 1 在 (0,0)，`scale(256,256, 44, 167)`返回`(0.0, 94.3, 256.0, 67.4)`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-22T21:17:58.823

这是一个用 Java 编写的方便的函数。

```
public static RectF fitRectWithin(Rect inner, Rect outer) {
    float innerAspectRatio = inner.width() / (float) inner.height();
    float outerAspectRatio = outer.width() / (float) outer.height();

    float resizeFactor = (innerAspectRatio >= outerAspectRatio) ?
    (outer.width() / (float) inner.width()) :
    (outer.height() / (float) inner.height());

    float newWidth = inner.width() * resizeFactor;
    float newHeight = inner.height() * resizeFactor;
    float newLeft = outer.left + (outer.width() - newWidth) / 2f;
    float newTop = outer.top + (outer.height() - newHeight) / 2f;

    return new RectF(newLeft, newTop, newWidth + newLeft, newHeight + newTop);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-25T04:16:38.820

这就是我的做法。（此算法对图像非常有效。）假设您有一个矩形和一个容器（也是一个矩形）：

```
aspectRatio = screen.width / screen.height

if (rectangle.width >= rectangle.height)
{
   resizeFactor = container.width / rectangle.width
   rectangle.width = rectangle.width * resizeFactor
   rectangle.height = rectangle.height * resizeFactor * aspectRatio
}
else
{
   resizeFactor = container.height / rectangle.height
   rectangle.width = rectangle.width * resizeFactor / aspectRatio
   rectangle.height = rectangle.height * resizeFactor
} 
```

您可以通过将第 6 行更改为：

```
rectangle.width = container.width 
```

如果您愿意，则与第 13 行相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-10T15:15:00.530

我只需要处理类似的事情：让我们调用 rectangle2`image`和 rectangle1 `window`。所以我们的任务是将图像放入窗口中。

同样在我的场景中，`image`和`window`都有一个“内部”坐标系`[-1,1]X[-1,1]`。事实上，在窗口内部，有一个`viewport`（问题中的 rectangle3）`image`将被投影，因此我们的任务是找到与具有相同纵横比（宽度/高度）的最大`viewport`（内部矩形） 。`window``image`

[![在此处输入图像描述](../Images/7d1797fdadb89e683b43670ea2261476.png)](https://i.stack.imgur.com/y1KR7.jpg)

由的`viewport`宽度/高度的一部分确定`image`：

```
viewport_width = scale_w * window_w
viewport_height = scale_h * window_h 
```

所以我们的目标是找到 的宽度和高度的正确缩放比例`window`，这样`viewport`将具有与 相同的纵横比（宽度/高度）`image`：

```
# goal: 
scale_w * window_w == image_w
scale_h * window_h == image_h 
```

这意味着我们正在寻找的规模满足：

```
(scale_w / scale_h) == ((image_w / image_h) / (window_w / window_h)) 
```

`s`让我们暂时用 表示这个等式的右手边。

由于我们正在寻找最大的`viewport`，肯定至少有一个`scale_w`和`scale_h`将等于 1。所以 - 如果`s<1`，意味着`window`比 宽`image`，我们将有`scale_w=s, scale_h=1`（这对应于上图，带有`scale_w=0.5`）。如果`s>1`, 意义`image`比 更广泛`window`, 我们将拥有`scale_w=1, scale_h=1/s`.

在 python 代码中，它看起来像这样：

```
def compute_viewport_scale(image_size, window_size):
    image_w, image_h = image_size
    window_w, window_h = window_size
    im_ratio, win_ratio = image_w / image_h, window_w / window_h

    scale = im_ratio / win_ratio
    if scale > 1:  # image is wider than screen
        scale_w = 1
        scale_h = 1 / scale
    else:  # window is wider then image
        scale_w = scale
        scale_h = 1

    viewport_w, viewport_h = window_w * scale_w, window_h * scale_h
    assert (round(viewport_w / viewport_h, 5) == round(image_w / image_h, 5))

    return scale_w, scale_h 
```

因为我想绝对确定我已经涵盖了所有案例，所以我构建了一个尺寸示例列表，以确保这个公式确实是正确的。事实上，如果你运行所有这些行，你将不会得到任何断言错误:)

```
# aspect ratio = 1
compute_viewport_scale((100, 100), (100, 100))
compute_viewport_scale((100, 100), (200, 200))
compute_viewport_scale((200, 200), (100, 100))

# image is wider than screen: (im_w / im_h) > (win_w / win_h)  [ i.e. im_ratio > win_ratio ]
# (im_ratio < 1 and win_ratio > 1 cant happen)
# im_w > win_w and im_h > win_h
compute_viewport_scale((300, 200), (100, 90))  # im_ratio > 1 and win_ratio > 1
compute_viewport_scale((200, 300), (100, 200))  # im_ratio < 1 and win_ratio < 1
compute_viewport_scale((300, 200), (100, 150))  # im_ratio > 1 and win_ratio < 1
# im_w > win_w and im_h < win_h
compute_viewport_scale((150, 50), (110, 100))  # im_ratio > 1 and win_ratio > 1
compute_viewport_scale((200, 300), (100, 400))  # im_ratio < 1 and win_ratio < 1
compute_viewport_scale((300, 100), (100, 150))  # im_ratio > 1 and win_ratio < 1
# (im_w < win_w and im_h > win_h cant happen)
# im_w < win_w and im_h < win_h
compute_viewport_scale((150, 50), (200, 100))  # im_ratio > 1 and win_ratio > 1
compute_viewport_scale((90, 100), (100, 200))  # im_ratio < 1 and win_ratio < 1
compute_viewport_scale((110, 100), (100, 200))  # im_ratio > 1 and win_ratio < 1

# image is wider than screen: (im_w / im_h) < (win_w / win_h)  [ i.e. im_ratio < win_ratio ]
# (im_ratio > 1 and win_ratio < 1 cant happen)
# im_w > win_w and im_h > win_h
compute_viewport_scale((300, 200), (100, 50))  # im_ratio > 1 and win_ratio > 1
compute_viewport_scale((200, 400), (100, 150))  # im_ratio < 1 and win_ratio < 1
compute_viewport_scale((200, 400), (150, 100))  # im_ratio < 1 and win_ratio > 1
# (im_w > win_w and im_h < win_h cant happen)
# im_w < win_w and im_h > win_h
compute_viewport_scale((150, 100), (200, 50))  # im_ratio > 1 and win_ratio > 1
compute_viewport_scale((200, 400), (380, 390))  # im_ratio < 1 and win_ratio < 1
compute_viewport_scale((200, 400), (390, 380))  # im_ratio < 1 and win_ratio > 1
# im_w < win_w and im_h < win_h
compute_viewport_scale((300, 200), (600, 300))  # im_ratio > 1 and win_ratio > 1
compute_viewport_scale((200, 300), (500, 600))  # im_ratio < 1 and win_ratio < 1
compute_viewport_scale((50, 100), (300, 200))  # im_ratio < 1 and win_ratio > 1 
```

# jquery - 如何为jqgrid中列的所有单元格启用编辑单元格

> ID：13384597
> 
> 赞同：0
> 
> 时间：2012-11-14T18:05:34.930
> 
> 标签：jquery, jqgrid

我有一个可编辑的网格。当网格加载时，我希望特定列的所有单元格都处于编辑模式，即准备好进行数据捕获。我已经尝试过了，但它只将最后一个单元格置于编辑模式。我怎样才能做到这一点？

```
function doGridComplete()
{
    var ids = $("#myGrid").jqGrid('getDataIDs');
    var grid = $("#myGrid");

    var marksColIdx = getColumnIndexByName(grid, 'marksObtained');

    var rowId = 1;
    for(var i = 0; i < ids.length; i++)
    {
    //Edit all cells
    grid.jqGrid('editCell', rowId, marksColIdx, true);
    rowId++;
    }
}

var getColumnIndexByName = function(gr,columnName) {
    var cm = gr.jqGrid('getGridParam','colModel');
    for (var i=0,l=cm.length; i<l; i++) {
    if (cm[i].name===columnName) {
        return i; // return the index
    }
    }
    return -1;
}; 
```

`doGridComplete()`我在`loadComplete`ie 中调用函数`loadComplete : doGridComplete`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:17:46.410

我不建议你这样做。

如果将每个单元格都设置为单元格编辑模式，网格会有什么优势？网格的加载会慢很多。如果某个单元格处于编辑模式，它会显示*未保存*的数据。只有在停止编辑时才会保存单元格。因此，用户可能会修改数据，而修改后的值**根本不会保存**。所以有些改变会消失。

此外，您将无法使用 和 之类的方法`getCell`，`getRowData`因为这些方法不适用于编辑单元格。

因此，如果您实施您所要求的，您将不得不做许多额外的工作以使用户的更改不会被丢弃，并且您将无法访问数据。我可以重复我回答的第一句话：我不建议你这样做。

# c# - 时间戳和日期时间？

> ID：13384603
> 
> 赞同：-1
> 
> 时间：2012-11-14T18:06:20.213
> 
> 标签：c#, mysql, console

我在“更新”字段上使用了时间戳，每次创建或更新新字段时，我都希望它获取当前时间戳。创建字段后，我得到 00-00 00:00:00 即使我只在创建时传递 '' 。我如何解决它？

```
updated timestamp       on update CURRENT_TIMESTAMP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:08:27.277

传入`null`插入语句

[SQLFiddle 示例](http://sqlfiddle.com/#!2/dc916/2)

# internet-explorer-10 - 在 IE10 中的 .NET 1.1 应用程序中导航时出现空白屏幕

> ID：13384605
> 
> 赞同：0
> 
> 时间：2012-11-14T18:06:22.620
> 
> 标签：internet-explorer-10, asp.net-1.1

我有一个不能在 IE10 中运行的 ASP.NET 1.1 应用程序。当我尝试在任何地方导航时，我得到一个空白屏幕。空白屏幕的 html 如下所示：

```
<asp_smartnav_rdir url="/MyWebFormName.aspx"/> 
```

我已经看到了针对 .NET 2 到 4 的类似问题的修复，但 .NET 1.1 中没有 App_Browsers 文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:45:24.963

我解决这个问题的解决方法是简单地禁用智能导航。反正我没有使用这些功能。我不确定为什么它在 IE10 而不是其他浏览器中被破坏，但我可以没有它。

我通过在我的 aspx 页面`smartNavigation="False"`的指令中设置来禁用它。`@Page`它也可以通过覆盖`OnInit`方法和设置以编程方式在 aspx.cs 文件中设置`this.SmartNavigation = false`。

# iphone - 创建带有圆边的自定义加载条

> ID：13384606
> 
> 赞同：3
> 
> 时间：2012-11-14T18:06:23.453
> 
> 标签：iphone, ios, ipad

我想创建一个简单的自定义加载栏，它由我拥有的两张图像组成：一张用于纯色背景，一张用于对角线。我是 iOS 新手，所以我的方法是创建一个自定义 UIView，它使用两个 UIImageView，每个图像一个，并带有一个动画块，用于从左到右移动对角线图像。

我采用这种方法是因为我已经熟悉 UIImageViews 和动画块。我的问题是...

1.  你会建议一个更好的方法吗？我完全不熟悉层，并且由于时间限制，现在不想阅读它们，但如果它能够提供更好的实现，我愿意这样做。
2.  我怎样才能“圆”加载条的末端？以我目前的方法，这就是我要得到的......

![在此处输入图像描述](../Images/c6c3ce6dcfb52f88ad4824c3ce235aac.png)

非常感谢你的智慧！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:16:15.593

看看[WNProgressView](https://github.com/n8chur/WNProgressView)，它可能会满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:05:01.933

您可以使用以下两种方式实现此目的：

1-将此类导入您的代码 `#import <QuartzCore/QuartzCore.h>`

然后将以下两行添加到`-(void)viewDidLoad`方法中，以便在加载视图时栏将被舍入，或者您可以将其添加到您希望栏开始对其进行舍入的位置。

```
barImageView.layer.cornerRadius = 10.0f;
barImageView.layer.masksToBounds = YES; 
```

2-另一种方法是使用以下代码：

```
-(void)roundCorners:(UIRectCorner)rectCorner forView:(UIView*)view
{
    UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:view.bounds 
                                                   byRoundingCorners:rectCorner
                                                         cornerRadii:CGSizeMake(20.0, 20.0)];
    // Create the shape layer and set its path
    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = view.bounds;
    maskLayer.path = maskPath.CGPath;

    // Set the newly created shape layer as the mask for the image view's layer
    view.layer.mask = maskLayer;
} 
```

添加以下行和 viewDidLoad 或您要开始舍入栏的位置

```
[self roundCorners:UIRectCornerTopRight|UIRectCornerTopLeft|UIRectCornerBottomRight|UIRectCornerBottomLeft forView:[self.view.subviews objectAtIndex:0] withAngle:10]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T18:12:28.740

Have your 'solid colored background' view be a container view for the 'diagonals' imageView. (diagonals is a subview of background)

Then set 'clipsToBounds' = YES on the diagonals subview and re-adjust the frame as necessary. (Assuming your diagonals imageView represents 100% progress)

If your loading bar imageView doesn't have rounded corners you can just use CALayer's cornerRadius property.

```
imageView.layer.cornerRadius = 6.0f; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:10:29.360

作为 iOS 新手，使用 UIProgressView 可能会更好。它可能看起来不那么好，但它具有相同的目的并且会更容易。还有一个 UIActivityIndi​​catorView，它是一个像齿轮一样旋转的圆圈。两者都比自定义解决方案更易于使用。

参考：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIProgressView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIProgressView_Class/Reference/Reference.html)

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityIndi​​catorView_Class/Reference/UIActivityIndi​​catorView.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityIndicatorView_Class/Reference/UIActivityIndicatorView.html)

# stdout - sudo：从另一个脚本启动的脚本不会重定向标准输出

> ID：13384608
> 
> 赞同：0
> 
> 时间：2012-11-14T18:06:31.597
> 
> 标签：stdout, sudo

我正在使用 AIX 5.3 和 sudo 1.6.9p23。Sudoers 文件授予用户 fcomartin 以用户 oas 身份运行任何命令的权限：

```
fcomarti ALL=(oas) ALL 
```

用户 oas 有一个名为 menu 的 bash 脚本，它会根据所选选项从该脚本启动另一个脚本。问题是一些辅助脚本将标准输出重定向到 oas 用户拥有的文本文件“temp”，当这种情况发生时，系统告诉我用户没有正确的写入权限。

用户 fcomarti 使用 ksh，那么使用的命令如下：

```
sudo -u oas bash menu 
```

（bash 因为用户 oas 使用 bash） 菜单启动，菜单启动 monitorAv 脚本，在 monitorAv 内是 echo > temp 行，然后它告诉用户 fcomarti 它没有正确的写入权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:11:16.770

该脚本以 user 身份运行`oas`，而不是以 user 身份运行`fcomarti`，因此如果它试图写入`fcomarti`它所拥有的目录中的文件，则可能不会具有适当的权限。

您可以让用户`oas`与用户共享一个组，`fcomarti`然后授予组对某些目录的写入权限，或者您可以将脚本输出到`oas`用户可写入的位置（例如，`/tmp`或您为此目的明确创建的某个目录，例如`HOME`用户的目录`oas`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:45:27.763

我终于解决了这个问题，sudo的sintaxis如下：

```
sudo -u oas bash -c "cd /Oas/bin; menu" 
```

这是因为菜单启动的一些辅助脚本需要绝对路径才能工作。

# .net - 可以创建不需要 .NETFramework 的 .NET 应用程序

> ID：13384613
> 
> 赞同：1
> 
> 时间：2012-11-14T18:06:46.957
> 
> 标签：.net, clr, executable

> **可能重复：**
> [在没有 .NET Framework 的情况下运行基于 .net 的应用程序](https://stackoverflow.com/questions/953146/running-net-based-application-without-net-framework)

我们能否在任何 .Net 框架上创建一个 .NET 应用程序或可执行文件，而不需要 .Net 框架来运行？也许将应用程序需要的框架固定装置嵌入到应用程序本身中？或者应用程序托管 CLR 的任何方式？

我自己提出了这个问题，因为在此[页面](http://nikosbaxevanis.com/2010/12/01/building-a-metro-ui-with-wpf/)中写道：“如果它是非托管应用程序，至少它在其进程中托管 CLR。​​（任何 Windows 应用程序都可以托管 CLR）。”。他们在谈论 Zune 应用程序。

# c - 需要在C中将全局变量转换为局部变量

> ID：13384614
> 
> 赞同：2
> 
> 时间：2012-11-14T18:06:49.477
> 
> 标签：c, variables, global-variables, opencl, local

基本上，我草率地编写了一个 OpenCL 程序来使用这些全局变量进行赋值：

```
int devType = CL_DEVICE_TYPE_GPU;

cl_int err;         /* Error code returned from api calls.  */
size_t global;      /* Global domain size for our calculation.  */
size_t local;           /* Local domain size for our calculation.  */

cl_platform_id cpPlatform;  /* openCL platform.  */
cl_device_id device_id; /* Compute device id.  */
cl_context context;     /* Compute context.  */
cl_command_queue commands;  /* Compute command queue.  */
cl_program program;     /* Compute program.  */
cl_kernel kernel;       /* Compute kernel.  */

/* Create data for the run.  */
float *data = NULL;     /* Original data set given to device.  */
float *results = NULL;  /* Results returned from device.  */
unsigned int correct;       /* Number of correct results returned.  */
cl_mem input;           /* Device memory used for the input array.  */
cl_mem output;      /* Device memory used for the output SUM.  */

int rc = EXIT_FAILURE; 
```

现在我正在尝试将它们全部本地化以整理程序。

我通过将全局变量 N 从上面的变量移到 main() 函数中来转换它。然后，我将每个使用 N 的函数头更新为将“int N”作为参数，并将 N 传递给任何需要它作为参数的函数调用。该程序按预期工作。

所以我想我要问的是，对于其余的这些变量，会这么简单吗？我了解通过引用和值传递的概念，并意识到某些函数可能会更改变量，因此我需要使用指针引用/取消引用。我担心的是我的指针理论有点粗糙，我担心我会遇到问题。我也不确定我定义的函数是否可以采用所有这些 cl 变量。

另外，在函数中使用相同的变量名有什么问题吗？

编辑：

正如我所担心的，在尝试本地化 device_id 时，以下函数确实会出现问题：

```
void deviceSetup(int devType) {
    cl_platform_id cpPlatform;  /* openCL platform.  */

    /* Connect to a compute device.  */
    if (CL_SUCCESS != clGetPlatformIDs (1, &cpPlatform, NULL))
        die ("Error: Failed to find a platform!");

    /* Get a device of the appropriate type.  */
    if (CL_SUCCESS != clGetDeviceIDs (cpPlatform, devType, 1, &device_id, NULL))
        die ("Error: Failed to create a device group!");
}

/* Create a compute context.  */
void createContext(cl_int err){
    context = clCreateContext (0, 1, &device_id, NULL, NULL, &err);
    if (!context || err != CL_SUCCESS)
        die ("Error: Failed to create a compute context!");
}

/* Create a command commands.  */
void createCommandQueue(cl_int err) {
    commands = clCreateCommandQueue (context, device_id, 0, &err);
    if (!commands || err != CL_SUCCESS)
        die ("Error: Failed to create a command commands!");
}       

void createAndCompile(cl_int err){
    /* Create the compute program from the source buffer.  */
    program = clCreateProgramWithSource (context, 1,
                                         (const char **) &KernelSource,
                                         NULL, &err);
    if (!program || err != CL_SUCCESS)
        die ("Error: Failed to create compute program!");

    /* Build the program executable.  */
    err = clBuildProgram (program, 0, NULL, NULL, NULL, NULL);
    if (err != CL_SUCCESS)
    {
        size_t len;
        char buffer[2048];

        clGetProgramBuildInfo (program, device_id, CL_PROGRAM_BUILD_LOG,
                               sizeof (buffer), buffer, &len);
        die ("Error: Failed to build program executable!\n%s", buffer);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:10:39.983

你真的回答了你自己的问题。是的，这就是它的全部。如果你发现你已经为你的函数生成了大量的参数列表，你可能想要考虑将大量**相关**变量组合到一个结构中，并只传递一个指向该结构的指针，但仅此而已。（与传递给任何函数的参数数量有关的性能考虑很小，但我认为现在这是一个不必要的复杂程度，你可以不用！）

虽然理解 C 中的指针是不可避免的（通过引用传递的唯一方法），所以像这样的小项目可能是加强这些知识的理想时机！

好吧，让我们举个例子，生活总是这样更好地解释。

我们有：

```
int cheddar;
int montereyjack;
int brie;

void print_cheeses(void)
{
    printf("I have %d cheddar %d montereyjack and %d brie\n", cheddar, montereyjack, brie);
}

void add_cheeses(void)
{
   cheddar = cheddar + 1;
   montereyjack = montereyjack + 1;
   brie = brie + 1;
   print_cheeses();
}

int main(int argc, char *argv[])
{
    add_cheeses();
    printf ("Now I have %d cheddars %d jacks %d bries\n", cheddar, montereyjack, brie);
} 
```

我们需要达到的是：

```
// By value here because we're not changing anything
void print_cheeses(int cheds, int jacks, int bries)
{
    printf("I have %d cheddar %d montereyjack and %d brie\n", cheds, jacks, bries);
}

// Pointers here because we need to change the values in main
void add_cheeses(int *cheese_one, int *cheese_two, int *cheese_three)
{
   *cheese_one = *cheese_one + 1; // We're following the pointer to get to the data we want to change
   *cheese_two = *cheese_two + 1;
   *cheese_three = *cheese_three + 1;
   print_cheeses(*cheese_one, *cheese_two, *cheese_three); // We're following the pointer to get to the data we want to print
}

int main(int argc, char *argv[])
{
    int cheddar = 0;
    int montereyjack = 0;
    int brie = 0;

    add_cheeses(&cheddar, &montereyjack, &brie);

    printf ("Now I have %d cheddars %d jacks %d bries\n", cheddar, montereyjack, brie);
} 
```

但是每次传递所有三个值可能会很痛苦，并且由于它们是相关的，因此您可以将它们捆绑在一个结构中，然后将指针传递给该结构。

# sql-server - tsql-使用 group by 连接表

> ID：13384616
> 
> 赞同：0
> 
> 时间：2012-11-14T18:07:00.900
> 
> 标签：sql-server, tsql

有2张桌子TableA

```
 StudentID   MeetingID  TeacherID   Date
     001         1002581    1056      10-12-2012
     001         1006789    1056      10-13-2012
     001         1006754    1058      10-13-1012 
```

再来一张B桌

```
 StudentID      MeetingID    TeacherID     Date        Value
         001          1002581      1056         10-12-201     15
         001          1002856      1056         10-20-2012    21 
```

条件是表 A 中特定学生教师会议的 max(date) 与表 B 中同一学生教师会议的 max(date) 与值相匹配。我希望看到结果集类似于

```
 StudentID       MeetingID     TeacherID     Date          Value
   001             1006789       1056          10-20-2012     21 
```

我怎样才能达到上述结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:23:55.277

First, I'm curious why you have the same data in two separate tables instead of linking them via ID. I.e. Meetings -> Values

Per your requirements, this should work. This finds the most recent meeting which is present in *both* tables.

```
SELECT B.* 
FROM B INNER JOIN A ON B.StudentID = A.StudentID AND B.MeetingID = A.MeetingID AND B.Date = A.Date
WHERE B.Date = (SELECT MAX(Date) FROM A WHERE A.StudentID = B.StudentID AND A.MeetingID = B.MeetingID) 
```

Here's the Fiddle: [http://sqlfiddle.com/#!6/d15ca/4](http://sqlfiddle.com/#!6/d15ca/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:03:43.787

```
SELECT TOP 1 c.StudentID,c.MeetingID,c.TeacherID,c.tab1_dates,c.VALUE
FROM 
(
    SELECT a.StudentID,a.MeetingID,a.TeacherID,a.Dates AS tab1_dates,b.Dates AS tab2_dates,b.VALUE,
    ROW_NUMBER() OVER (ORDER BY a.Dates,b.Dates) AS RN1
    FROM tab2 b
    INNER JOIN
    (
      SELECT StudentID,MeetingID,TeacherID,Dates FROM tab1
    ) a
    ON b.StudentID = a.StudentID
    AND b.TeacherID = a.TeacherID
        ) c
ORDER BY RN1 DESC 
```

--SQL 小提琴 - [http://www.sqlfiddle.com/#!3/c6cea/1](http://www.sqlfiddle.com/#!3/c6cea/1)

抱歉，格式不好。

# html - IE中的CSS显示表格

> ID：13384619
> 
> 赞同：3
> 
> 时间：2012-11-14T18:07:09.233
> 
> 标签：html, css, internet-explorer, css-tables

我有以下代码和 CSS。它在 Chrome 中运行良好，但在 IE 中不行。有没有办法让它在 IE 中也能工作？

CSS：

```
<style type="text/css">
        .table {width:100%;height: 1%;background-color: lime;display: table;border-collapse: collapse;}
        .row {display: table-row;}
        .centercell {vertical-align: top;display: table-cell;background-color: #0f0;}
        .top{background-color:yellow;width:100%;height:20px;z-index: 1;position: relative;}
        .bottom{background-color:yellow;width:100%;height:20px;z-index: 1;position: relative;}
        .middle{background-color:pink;width:100%;height: 100%;margin: -20px 0px;position: relative;padding: 20px 0px;}
        .rightcell {vertical-align: top;background-color: #f00;display: table-cell;width:155px;background-image: url('img/bg1.gif');background-repeat:repeat-y}
        .leftcell {vertical-align: top;background-color: #f00;display: table-cell;width:171px;}
    </style> 
```

HTML：

```
<div class="table">
<div class="row">
    <div class="leftcell">
        right column
    </div>
    <div class="centercell">
        <div class="top">center top</div>
        <div class="middle">center middle</div>
        <div class="bottom">center bottom</div>
    </div>
    <div class="rightcell">
        right column<br> 
        right column<br> 
        right column<br> 
        right column<br> 
        right column<br> 
        right column<br> 
        right column<br> 
        right column<br> 
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T18:15:44.157

IE7 不支持`display:table`，您的代码在 IE8、IE9 和 IE10 中看起来不错。所以要么你必须使用一个实际`<table>`的，或者，如果它是一个选项，使用`float`s 代替。

没有别的办法，我怕。

编辑：显然这是为您的**页面布局**。你不应该使用`<table>`or `display:table`。只是漂浮一些 DIV 的人！

# asp.net - 在 asp.net 网站中加载网络字体

> ID：13384622
> 
> 赞同：1
> 
> 时间：2012-11-14T18:07:13.097
> 
> 标签：asp.net, fonts, web, hosting

我一直在做 asp.net web 开发，但从未实现过一个完整的 asp.net 网站并托管它。我一直在研究一个 asp.net 网站并将其托管在 Windows 服务器上。

我有几个在网站中使用的自定义 Web 字体（付费字体）。我已经在我的项目文件夹中包含了 Web 字体和样式的文件，并在我的样式表中正确引用了它们。

我使用@font-face 来引用样式表中的字体：

```
@font-face {
font-family: 'fontname';
src: url('/fonts/webfonts/font.eot');
src: url('/fonts/webfonts/font.eot?#iefix') format('embedded-opentype'),
    url('/fonts/webfonts/font.woff') format('woff'),
    url('/fonts/webfonts/font.ttf') format('truetype');
font-weight: normal;
font-style: normal;
} 
```

但是，网络字体没有被加载到网站中。

经过一番研究，我发现我们需要在 web.config 类型中添加 mime 类型，以便 windows 服务器识别该字体格式。然后，我还在 web.config 文件中引用了 mime 类型，如下所示：

```
<system.webServer>
    <staticContent>
      <mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
    </staticContent>
</system.webServer> 
```

但是，它也不起作用。谁能告诉我，我们如何加载这些字体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T14:58:34.890

所以你还需要为`.eot`and添加一个 MIME 映射`.ttf`？

我们`Web.config`文件中的类似块读取：

```
<staticContent>
    <remove fileExtension=".svg"/>
    <remove fileExtension=".ttf"/>
    <remove fileExtension=".otf"/>
    <remove fileExtension=".woff"/>
    <remove fileExtension=".eot"/>
    <mimeMap fileExtension=".svg" mimeType="image/svg+xml"/>
    <mimeMap fileExtension=".ttf" mimeType="application/x-font-truetype"/>
    <mimeMap fileExtension=".otf" mimeType="application/x-font-opentype"/>
    <mimeMap fileExtension=".woff" mimeType="application/x-font-woff"/>
    <mimeMap fileExtension=".eot" mimeType="application/vnd.ms-fontobject"/>
</staticContent> 
```

请注意，我们首先删除所有映射，以防它们在某些时候被上游配置。

# maven - build-helper-maven-plugin : attach-artifact 不会将工件复制到存储库中

> ID：13384624
> 
> 赞同：1
> 
> 时间：2012-11-14T18:07:13.300
> 
> 标签：maven, artifacts

附加附加工件后，我是否需要将 install-file 和 deploy-file 添加到我的 pom 中？我相信我正确地添加了我的工件，但 maven 似乎认为工件已经到位，即使它不存在。

通过 attach-artifact 将我的附加工件添加到 pom 后，我看到 maven 尝试复制文件并在本地 repo *maven-metadata-local.xml*中列出该文件，但该文件没有被复制，因为它似乎没有改变。

仅供参考 - 这个工件是由程序集插件生成的，如果我删除了 build-helper，那么 maven 甚至不会尝试复制工件。

如果您有任何想法，请告诉我。

谢谢

彼得

*调试日志*

```
[INFO] Installing ./trunkProject/modules/mymodule/target/dist/added-artifact-lin64-1.0.0.59258.tar.gz 
    to ./m2repo/corp/prod/modules/mymodule/1.0.0-SNAPSHOT/added-artifact-1.0.0-SNAPSHOT-dist.tar.gz
[DEBUG] Skipped re-installing ./trunkProject/modules/mymodule/target/dist/aie-module-mymodule-lin64-1.0.0.59258.tar.gz 
    to ./m2repo/corp/prod/modules/mymodule/1.0.0-SNAPSHOT/added-artifact-1.0.0-SNAPSHOT-dist.tar.gz, 
    seems unchanged 
```

*Pom.xml*

```
 <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
        <executions>           
            <execution>             
                <id>attach-distribution-artifact</id>             
                <phase>package</phase>             
                <goals>               
                    <goal>attach-artifact</goal>             
                </goals>            
                <configuration>
                  <artifacts>
                    <artifact>
                      <file>${distTop}/${assemblyFinalName}-${real.os.full}-${prod.version}.${svn.revision}.tar.gz</file>
                      <type>tar.gz</type>
                      <classifier>dist</classifier>
                    </artifact>
                  </artifacts>
                </configuration>          
                </execution>         
        </executions>             
    </plugin> 
```

*装配文件*

```
<assembly>
  <id>dist</id>
  <formats>
    <format>${distCompressed.ext}</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <fileSets>
    <fileSet>
      <directory>${kitTop}</directory>
      <excludes>
        <exclude>**/Thumbs.db</exclude>
      </excludes>
      <outputDirectory>/</outputDirectory>
    </fileSet>
  </fileSets> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:38:59.120

问题是简单的操作顺序。该程序集是在安装阶段生成的，这意味着安装程序插件无法找到它。我没有证据证明这是如何阻止构建助手的，但我怀疑附加了 assemble-plugin，installer-failed 安装并记录了该项目。当 build-help 执行时，它可能一直在尝试使用已经尝试过的安装程序插件。

*解决方案*

*   删除构建助手
*   将程序集插件阶段从安装更改为*包*，确保工件在安装之前存在
*   在 pom 的 maven-assembly-plugin 配置中将 appendAssemblyId 设置为 true

# ruby-on-rails-3 - rails 3 - 使用连接生成的查询获取重复数据

> ID：13384625
> 
> 赞同：1
> 
> 时间：2012-11-14T18:07:16.180
> 
> 标签：ruby-on-rails-3, inner-join

我会很简短，直截了当。我正在尝试将三个表连接在一起，以获得所有**未归档**客户的总开票时间乘以开票费率。这是我目前在我的控制器中拥有的：

```
@total_due = Client.find(:all, :joins => [:invoices, :invoice_line_items], :select => "SUM(invoice_line_items.hours * invoice_line_items.rate) as total", :group => "clients.archive, invoices.paid_status HAVING clients.archive = false AND invoices.paid_status = false") 
```

我的模型如下所示：

```
# /models/clients.rb
class Client < ActiveRecord::Base
    has_many :invoices
    has_many :invoice_line_items, :through => :invoices
end

# /models/invoices.rb
class Client < ActiveRecord::Base
    belongs_to :client
    has_many   :invoice_line_items
end

# /models/invoice_line_items.rb
class Client < ActiveRecord::Base
    belongs_to :invoice
end 
```

因此，正如您从我的控制器中的代码中看到的那样，我正在尝试获取与**未归档**客户相关的所有发票的总工时费率，*但*他们尚未付款。我的控制器中的上述代码在某处复制数据，因为我的数字比它应该的高很多。

我正在尝试构建的查询是这样的：

```
SELECT SUM(invoice_line_items.hours * invoice_line_items.rate) AS total FROM clients INNER JOIN invoices ON clients.id = invoices.client_id INNER JOIN invoice_line_items ON invoices.id = invoice_line_items.invoice_id GROUP BY clients.archive, invoices.paid_status HAVING clients.archive = false AND invoices.paid_status = false 
```

有人可以解释或弄清楚为什么我在我的 rails 查询中得到重复的数据吗？我有一种感觉，它只是加入表格的方式与我预期的不同。我对 Rails 也还是很陌生。谢谢！

更新：这是 rails 正在生成的查询：

```
select sum(invoice_line_items.hours * invoice_line_items.rate) as total
from clients
inner join invoices on invoices.client_id = clients.id
inner join invoices invoices_clients_join on invoices_clients_join.client_id = clients.id 
inner join invoice_line_items on invoice_line_items.invoice_id = invoices_clients_join.id 
group by clients.archive, invoices.paid_status
having clients.archive = false and invoices.paid_status = false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:02:38.993

`invoices`好的，我只需删除控制器中的连接，就可以让 rails 生成我需要的查询。我想结合`invoice_line_items`加入和`:through`关系正在创建许多加入。

我的控制器现在看起来像这样：

```
@total_due = Client.find(:all, :joins => :invoice_line_items, :select => "SUM(invoice_line_items.hours * invoice_line_items.rate) as total", :group => "clients.archive, invoices.paid_status HAVING clients.archive = false AND invoices.paid_status = false") 
```

# c# - DataContractJsonSerializer 使用附加数据/未知类型反序列化

> ID：13384628
> 
> 赞同：3
> 
> 时间：2012-11-14T18:07:23.997
> 
> 标签：c#, json, serialization

我正在尝试将 Json 字符串反序列化为 ac# 对象。但是，Json 数据可以包含需要反序列化为对象中字符串字典的其他数据。

实现这一目标的最有效方法是什么？

我使用了 IExtensibleDataObject，但它只是将附加数据存储在我无法读取的 ExtensionDataObject 中。有没有其他选择？

下面的例子：

当dataContractJsonSerializer遇到Json字符串中的未知数据时，应该去AdditionalData属性。

```
Class Person
{
   public string Name {get;set;}
   public int Age {get;set;}

   //This should catch any other data in JSON, that is not strictly defined.
   public Dictionary<string,string> AdditionalData {get;set;}
} 
```

json示例：

```
{"Name" : "John". "Age" : "33" }
{"Name" : "John". "Age" : "33","Address" : "somecity" }
{"Name" : "John". "Age" : "33","Address" : "somecity","Gender" : "M" } 
```

# php - 使用php中生成的RSA私钥在c中加密

> ID：13384631
> 
> 赞同：0
> 
> 时间：2012-11-14T18:07:55.177
> 
> 标签：php, c, encryption, openssl, private-key

我有一个用 php 中的 openssl_pkey_new() 生成的 RSA 私钥。我把它保存在一个txt文件中。是否可以使用该密钥在 c 中进行解密。我试过这个但没有成功：

```
RSA *r = PEM_read_RSAPrivateKey("C:/xampp/htdocs/RSA/daten.txt", NULL, NULL, NULL);
resultDecrypt = RSA_private_decrypt( 128 /* resultEncrypt*/ , encrypted, decrypted, r, RSA_PKCS1_OAEP_PADDING);
printf("%d from decrypt: '%s'\n", resultDecrypt, decrypted);
RSA_free ( r ); 
```

谢谢！！

# asp.net - HttpContext.Current.User.Identity.Name 返回空白

> ID：13384634
> 
> 赞同：13
> 
> 时间：2012-11-14T18:08:00.783
> 
> 标签：asp.net, windows-identity

我正在使用 HttpContext.Current.User.Identity.Name 在使用 Web 应用程序时获取用户名。在开发过程中，我使用的是本地 iis，启用了集成的 Windows 身份验证并启用和禁用了匿名访问，并且我能够获取用户名。

现在，当我发布 Web 应用程序时，它返回空白。已发布服务器上的设置是相同的，我尝试使用 Page.User.Identity.Name，它也返回空白。

有谁知道这是为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-22T17:35:33.897

您可能启用了匿名身份验证以及 Windows 身份验证。关闭匿名。

所以，

```
<system.web>
    <authentication mode="Windows" />
</system.web> 
```

在应用程序的 IIS 配置中，查看身份验证选项卡

```
Set **Anonymous Authentication** to **Disabled** and
Set **Windows Authentication** to **Enabled** 
```

这应该可以工作，并且 Identity.UserName 现在应该正确显示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-02T18:27:54.017

HttpContext.Current.Request.LogonUserIdentity.Name 在 VS 2012 环境和 IIS 7 中始终为我工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-05T12:16:41.953

要解决此问题，您必须启用 Windows 身份验证功能。请按照以下步骤操作：

- 单击开始，然后单击控制面板。打开程序组。
- 在程序和 - 功能下，单击打开或关闭 Windows 功能。
- 展开标有 Internet 信息服务的项目。
- 展开标有万维网服务的项目。-展开项目安全性->
确保选择**Windows身份验证**

您还需要从 IIS 禁用匿名身份验证，如下所示： - 单击 IIS 中的应用程序 - 双击 IIS 组下的身份验证 - 单击匿名身份验证 - 单击操作下右侧的禁用。希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T15:23:20.740

使用 WIF 时，您应该使用 Thread.CurrentPrincipal.Identity.Name 而不是 User.Identity.Name。

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/magazine/ff872350.aspx](http://msdn.microsoft.com/en-us/magazine/ff872350.aspx)以了解有关 Windows Identity Foundation 的更多信息

类似的问题：[User.Identity.Name is null after authentication via WIF](https://stackoverflow.com/questions/15132220/user-identity-name-is-null-after-authenticate-via-wif/15139165#15139165)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-24T17:09:51.560

`<authentication mode="Forms">`在 web.config 文件中设置 &您的问题将解决。

使用以下代码测试您的网站

`if (Page.User.Identity.Name != "" ) { Label1.Text = "Hello"; } else { Response.Redirect("login.aspx?url=Upload.aspx"); }`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-16T14:48:53.100

这不会解决原始帖子，但无论如何都想把它放在这里，以防其他人在搜索为什么 user.identity 什么都不返回时偶然发现这个......

在我的情况下，User.Identity 在更新用户广告用户名（特别是 Windows 2000 之前的用户名）后开始不返回任何内容。

IIS 上的 LSA 缓存是问题所在。即使在对问题进行故障排除时重新启动 IIS 服务器后，问题仍然存在。直到添加此处概述的注册表设置，问题才得到解决：

[https://support.microsoft.com/en-us/help/946358/the-lsalookupsids-function-may-return-the-old-user-name-instead-of-the](https://support.microsoft.com/en-us/help/946358/the-lsalookupsids-function-may-return-the-old-user-name-instead-of-the)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T16:53:22.767

For a blank return, my solution ended up being the web.config. I'm using Visual Studio 2010, and the default web.config did not work. I replaced it with a nearly empty web.config and then success! Perhaps the default vs2010 web.config called too many references or configured the IIS incorrectly for the use of User.Identity.Name. My system is Windows7.

Default asp.net web site web.config from vs2010 was about 100-115 lines long. As you can see below the nearly empty web.config is about 20 lines long.

* * *

## the web.config that i used:

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

  <system.web>
   <authentication mode="Windows" />
   <authorization>
      <allow roles="Doman Name\Group Name" users="" />
      <deny users="*" />
   </authorization>

  </system.web>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
        <security>
            <authorization>
                <add accessType="Allow" users="" roles="Doman Name\Group Name" />
            </authorization>
        </security>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-04T23:21:23.753

1.  在 IIS 中：**单击您的站点**。
2.  在主页中：**身份验证**。
3.  在操作菜单中：**打开功能**。
4.  禁用**匿名身份验证**。
5.  **重新启动站点**。

[步骤 1,2,3](https://i.stack.imgur.com/BMHY3.png)

[第4步](https://i.stack.imgur.com/wf0tt.png)

# java - 向类添加未实现的方法时，有没有办法在 Eclipse IDE 中为该方法自动导入注释？

> ID：13384636
> 
> 赞同：1
> 
> 时间：2012-11-14T18:08:01.720
> 
> 标签：java, eclipse

如果我正在创建一个抽象类或接口并希望提供有关抽象方法的一些详细信息，有没有办法从该方法的抽象类/接口自动导入注释？

例如：`Letter`implements `Shippable`，我希望评论自动导入。我知道`${see_to_overridden}`，我更喜欢直接注入抽象方法的注释

```
public interface  Shippable{

    /*
     * returns boolean based on your class's criteria for if it needs to be insured
     * if your parcel type is not insurable just leave as false
     */
        boolean isInsured();

        String shippingMethod();

}

public class Letter implements Insurable{

        /*
     * returns boolean based on your class's criteria for if it needs to be insured
     * if your parcel type is not insurable just leave as false
     */
    boolean isInsured(){
             return false;
        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:10:05.297

在子类注释中，您可以使用[`{@inheritDoc}`](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javadoc.html#@inheritDoc)要插入超类文档的位置。您还需要使您的注释符合 JavaDoc 约定——最重要的是，它们以`/**`代替开头`/*`（感谢@Puce 指出）。

```
public interface Shippable{

    /**
     * returns boolean based on your class's criteria for if it needs to be insured
     * if your parcel type is not insurable just leave as false
     */
    boolean isInsured();

    String shippingMethod();
}

public class Letter implements Insurable{

    /**
     * some subclass-specific comments here (optional)
     * {@inheritDoc}
     * more subclass-specific comments here (optional)
     */
    boolean isInsured(){
        return false;
    }
} 
```

# asp.net - 将数据从一个表复制到另一个表（连同其他一些数据）

> ID：13384639
> 
> 赞同：0
> 
> 时间：2012-11-14T18:08:12.953
> 
> 标签：asp.net, sql, vb.net

是否可以将一个表中的数据与其他数据一起传输到一个空表中？是否可以使用单个 SQL 语句来做到这一点？到目前为止我所尝试的没有产生错误，但原始表中的数据不会传输到空表中。

我在下面包含了我的代码，我将不胜感激任何建议。我怀疑数据库连接有问题，但我还是编程新手，看不到问题。

```
Imports System.Data.SqlClient

Public Class uploadSuccess
    Inherits System.Web.UI.Page
    Dim con As SqlConnection
    Dim cmd As SqlCommand

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    End Sub

    Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
        con = New SqlConnection("Data Source=127.0.0.1; User Id=user;Password=pass;Initial Catalog=catalog;")
        con.Open()
        cmd = con.CreateCommand()
        cmd.Connection = con

        Dim intCount As Int32
        Dim getReceipt As Int32
        Dim femtocellrow As Int32
        Dim noreceipt As Int32
        Dim username As String
        Dim client As String
        Dim comName As String
        noreceipt = Session("recNo")
        username = Session("username")
        comName = Session("compName")

        'Response.Write("noreceipt" & noreceipt)
        cmd.CommandText = "SELECT COUNT(*) AS RETURNCOUNT FROM dbo.tempTable"
        intCount = cmd.ExecuteScalar
        ' Response.Write("count " & intCount)
        cmd.CommandText = "SELECT noDevices FROM dbo.Receipt WHERE receiptNo= @noreceipt"
        cmd.Parameters.AddWithValue("@noreceipt", noreceipt)
        getReceipt = cmd.ExecuteScalar
        'Response.Write("receipt " & getReceipt)
        cmd.CommandText = "SELECT COUNT(*) AS RETURNCOUNT FROM dbo.femtocell WHERE receiptNo= @norec"
        cmd.Parameters.AddWithValue("@norec", noreceipt)
        femtocellrow = cmd.ExecuteScalar
        'Response.Write("femrow " & femtocellrow)
        cmd.CommandText = "SELECT clientID FROM dbo.Receipt WHERE companyName=@comName"
        cmd.Parameters.AddWithValue("@comName", comName)
        client = cmd.ExecuteScalar
        'Response.Write("client " & client)
        con.Close()

        Dim rowsAffected As Integer = 0
        Dim myConnectionString As String = "Data Source=192.168.18.30; User Id=sa;Password=google;Initial Catalog=femtocell;"
        Dim myConnection As New SqlConnection(myConnectionString)
        If (femtocellrow < getReceipt) & (intCount < femtocellrow) Then
                'Dim myQuery As String = "SELECT ([uploadID],[clientID],[receiptNo],[compName],[state],[town],[district],[siteAddress],[latitude],[longitude],[type],[serialNo],[man],[model],[pwr],[appNo],[manAntenna],[modelAntenna],[height],[gain],[emission],[bhaul],[strucType],[covType],[cov],[spectBand],[txFreq],[rxFreq],[bw],[regFee],[uspArea],[commDate],[compName]) INTO dbo.femtocell (username,client,noreceipt,comName,[State],[Town],[District],[Site_Address],[Latitude],[Longitude],[Equipment_Type],[Equipment_Serial_No],[Equipment_Man],[Equipment_Model],[Equipment_Pwr_Mw],[Equipment_App_No],[Antenna_Man],[Antenna_Model],[Antenna_Height_m],[Antenna_Gain_Db],[antenna_emission],[Bhaul],[Struc_Type],[Cov_Type],[Cov_m],[Spect_Band],[Tx_Freq_MHz],[Rx_Freq_MHz],[Bw_KHz],[Reg_Fee_RM],[USP_area],[Comm_Date]) FROM dbo.tempTable"
                ' Dim myQuery As String = "INSERT INTO dbo.femtocell ([uploadID],[clientID],[receiptNo],[compName],[state],[town],[district],[siteAddress],[latitude],[longitude],[type],[serialNo],[man],[model],[pwr],[appNo],[manAntenna],[modelAntenna],[height],[gain],[emission],[bhaul],[strucType],[covType],[cov],[spectBand],[txFreq],[rxFreq],[bw],[regFee],[uspArea],[commDate],[compName]) VALUES (SELECT 'username','client','noreceipt','comName',[State],[Town],[District],[Site_Address],[Latitude],[Longitude],[Equipment_Type],[Equipment_Serial_No],[Equipment_Man],[Equipment_Model],[Equipment_Pwr_Mw],[Equipment_App_No],[Antenna_Man],[Antenna_Model],[Antenna_Height_m],[Antenna_Gain_Db],[antenna_emission],[Bhaul],[Struc_Type],[Cov_Type],[Cov_m],[Spect_Band],[Tx_Freq_MHz],[Rx_Freq_MHz],[Bw_KHz],[Reg_Fee_RM],[USP_area],[Comm_Date]FROM dbo.tempTable"
            Dim myQuery As String = "INSERT INTO dbo.femtocell ([state],[town],[district],[siteAddress],[latitude],[longitude],[type],[serialNo],[man],[model],[pwr],[appNo],[manAntenna],[modelAntenna],[height],[gain],[emission],[bhaul],[strucType],[covType],[cov],[spectBand],[txFreq],[rxFreq],[bw],[regFee],[uspArea],[commDate]) SELECT [State],[Town],[District],[Site_Address],[Latitude],[Longitude],[Equipment_Type],[Equipment_Serial_No],[Equipment_Man],[Equipment_Model],[Equipment_Pwr_Mw],[Equipment_App_No],[Antenna_Man],[Antenna_Model],[Antenna_Height_m],[Antenna_Gain_Db],[antenna_emission],[Bhaul],[Struc_Type],[Cov_Type],[Cov_m],[Spect_Band],[Tx_Freq_MHz],[Rx_Freq_MHz],[Bw_KHz],[Reg_Fee_RM],[USP_area],[Comm_Date]FROM dbo.tempTable"
                Dim myCommand As New SqlCommand(myQuery, myConnection)

                Try
                    myConnection.Open()
                    rowsAffected = myCommand.ExecuteNonQuery()
                Catch ex As Exception
                    Response.Write(ex.Message)
                Finally
                    myConnection.Close()
                End Try

        Else
            Dim message As String = "Number of devices submitted is invalid."

            Dim sb As New System.Text.StringBuilder()

            sb.Append("alert('")

            sb.Append(message)

            sb.Append("');")

            ClientScript.RegisterOnSubmitStatement(Me.GetType(), "alert", sb.ToString())
        End If

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:33:03.740

也许其中之一会有所帮助：

*   [SQL SERVER – 将数据从一个表插入到另一个表 – INSERT INTO SELECT – SELECT INTO TABLE
    *sqlauthority.com*](http://blog.sqlauthority.com/2007/08/15/sql-server-insert-data-from-one-table-to-another-table-insert-into-select-select-into-table/)

*   [将表的所有行复制到另一个表
    *stackoverflow.com*](https://stackoverflow.com/questions/12445613/copy-all-rows-of-a-table-to-another-table)

*   [C# – 使用 DataTables 将数据批量复制到 MS SQL Server
    *myadventuresincoding.wordpress.com*](http://myadventuresincoding.wordpress.com/2012/05/27/c-bulk-copying-data-into-ms-sql-server-with-datatables)

# .net - Umbraco vs DotNetNuke：无法决定哪个更合适

> ID：13384640
> 
> 赞同：5
> 
> 时间：2012-11-14T18:08:14.397
> 
> 标签：.net, asp.net-mvc, content-management-system, dotnetnuke, umbraco

想象一下 3-4 个不同的域（如`somesite.co.uk`, `somesite.com`, `somesite.com.sg`），每个域都支持不同的语言。所有页面的页数和内容类型都相同（只有内容会有所不同）。

因此，除了内容，用户还需要指定区域和语言。（我们可能还需要使用我们的一些控件来编辑 CMS 后端）。

我们无法决定哪种 .NET CMS 适合我们的需要。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T18:34:21.193

我认为两者都可能满足您的需求；我每天都在使用 DotNetNuke，所以我可以自信地说，DNN 可以处理任何你想扔给它的东西。我对 Umbraco 不太熟悉，但您的要求听起来不像是有任何东西可以排除通用 CMS（您可能还想调查[Orchard](http://www.orchardproject.net/)）。

就 DotNetNuke 而言，拥有多个相关站点的能力是核心概念之一。您还可以拥有一个显示不同语言的不同内容的网站（我不清楚这是否是您的域之间的主要分界线）。

如果您使用 DotNetNuke，自定义扩展的开发将在 WebForms 中完成，这可能是一个优点或一个缺点。如果这是一个缺点，那么最新版本中还有一个服务框架，它支持一种几乎忽略 WebForms 的 Web 服务开发方法（使用 knockout.js 或类似的库来完全在客户端上呈现丰富的界面）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T00:43:56.080

Umbraco 将很好地处理这种情况 - 您将在内容树中为每种语言创建一个新节点，然后通过节点的属性将域分配给它。

这种情况在 Umbraco 中比较常见——我最近推出了一个 6 个国家、8 种语言的站点（总共 19 个不同的国家/语言组合），从现有的比利时域映射到新的站点结构，没有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:19:53.663

当我进行了类似的分析后，我制作了一份需求清单，然后将它们细分为高、中、低优先级，然后再将它们与候选清单进行比较。建立候选名单是关键；通常，如果您有足够的要求，就会出现理想的候选人。

WaterAndStone 对 CMS 市场的年度分析值得一读，以确保您的候选名单是一个好的（并且您将使用的 CMS 有一个美好的未来）[http://www.waterandstone.com/book/2011-open-源 cms 市场份额报告](http://www.waterandstone.com/book/2011-open-source-cms-market-share-report)

请注意，所有“免费”的 CMS 在支持、功能、培训或附加组件方面都能赚到钱——请注意，做出正确的选择可以避免成本——尤其是如果成本偏向于您不感兴趣的领域中。唯一完全免费的免费 CMS 是那些根本不知道如何赚钱的 CMS。

DOTNETNUKE 正在尝试进入付费许可模式 (http://www.dotnetnuke.com/Products/Compare-Editions.aspx) - 虽然它仍然提供免费的“社区”版本，但不能保证它始终可用.

UMBRACO 一直说它永远是免费的，但常用的附加组件，如 Courier、Contour CMSImport，每个售价 99 欧元或更多。

至于您的选择，您所说的高级要求应该可以被大多数主流 CMS 轻松满足 - 因此，除非您有其他要求，否则您应该选择具有未来和您满意的成本模型的 CMS！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T14:41:32.713

根据[这些信息](http://humepc.com/blog/umbraco-vs-dotnetnuke/)， umbraco 是一个复杂得多的系统。安装后您无法使用站点。开发者需要进行准备操作。

Dotnetnuke 更容易。它有BSD协议，独立开发者可以编辑所有信息。

我更喜欢 DotnetNuke。但 Umbraco 也是一个强大的系统。这取决于使用目标。

# grails - 选择 Spring ROO 还是 Grails？

> ID：13384643
> 
> 赞同：1
> 
> 时间：2012-11-14T18:08:27.520
> 
> 标签：grails, spring-roo

两者孰优孰劣。Spring ROO 还是 GRAILS ？可以使用哪些变量在两者之间进行选择来实施项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:07:07.647

从个人的角度来看，它归结为 Spring Roo 使用了 AspectJ，但在其他方面都是 Java。所以我们选择了 Spring Roo，因为它没有将我们锁定在任何东西（除了 Spring 框架之外）并且很容易推入/推出类。

# objective-c - 如何确保我的可重用静态库不会强制我的项目包含多个框架？

> ID：13384644
> 
> 赞同：0
> 
> 时间：2012-11-14T18:08:28.273
> 
> 标签：objective-c

我尝试将一些可重用的函数放入我自己的静态库中，但我注意到了一个问题。

假设静态库有很多功能，有些需要quartz核心框架，有些需要messgeUI等。

当我构建一个新项目时，我将这个静态库项目包含到我的代码中，以便我可以重用这些函数。

现在，即使我只使用一个不需要任何框架的简单函数，我也被迫包含所有quartzcore、消息UI 框架，否则我将面临构建错误，因为静态库需要它们——但我不需要所有这些！

我如何设计一个更好的通用静态库，不强迫人们包含他们根本不使用的框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:13:12.770

您可以使用弱链接 - 如果使用弱链接，则在链接时不必存在未使用的符号（函数、方法、全局变量）。

# sql - 如何将多行字符串拆分为 tsql 中的列

> ID：13384645
> 
> 赞同：8
> 
> 时间：2012-11-14T18:08:29.130
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个数据库字段，其中包含存储为多行字符串的地址信息。

```
88 Park View
Hemmingdale
London 
```

谁能告诉我在选择语句中将第 1 行、第 2 行和第 3 行作为不同字段的最佳方法？

问候理查德

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T18:25:51.510

试试这样的东西？请注意，这有点脆弱

```
DECLARE @S VARCHAR(500), @Query VARCHAR(1000)
SELECT @S='88 Park View
           Hemmingdale
           London'

SELECT @Query=''''+ REPLACE(@S, CHAR(13),''',''')+''''
EXEC('SELECT '+@Query) 
```

结果

```
88 Park View | Hemmingdale | London 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T19:32:21.160

这是我提出的一个解决方案，我使用 CTE 递归迭代值表，并用 new line 将它们拆分出来`CHAR(13)`，然后使用 a`PIVOT`来显示结果。您只需将这些添加到`PIVOT`.

```
DECLARE @Table AS TABLE(ID int, SomeText VARCHAR(MAX))

INSERT INTO @Table VALUES(1, '88 Park View
Hemmingdale
London')

INSERT INTO @Table VALUES(2, '100 Main Street
Hemmingdale
London')

INSERT INTO @Table VALUES(3, '123 6th Street
Appt. B
Hemmingdale
London')

;WITH SplitValues (ID, OriginalValue, SplitValue, Level)
AS
(
    SELECT  ID, SomeText, CAST('' AS VARCHAR(MAX)), 0 FROM @Table

    UNION ALL

    SELECT  ID
    ,   SUBSTRING(OriginalValue, CASE WHEN CHARINDEX(CHAR(13), OriginalValue) = 0 THEN LEN(OriginalValue) + 1 ELSE CHARINDEX(CHAR(13), OriginalValue) + 2 END, LEN(OriginalValue))
    ,   SUBSTRING(OriginalValue, 0, CASE WHEN CHARINDEX(CHAR(13), OriginalValue) = 0 THEN LEN(OriginalValue) + 1 ELSE CHARINDEX(CHAR(13), OriginalValue) END)
    ,   Level + 1
    FROM    SplitValues
    WHERE   LEN(SplitValues.OriginalValue) > 0
)

SELECT  ID, [1] AS Level1, [2] AS Level2, [3] AS Level3, [4] AS Level4, [5] AS Level5
FROM    (
    SELECT  ID, Level, SplitValue
    FROM    SplitValues
    WHERE   Level > 0
    ) AS p
PIVOT   (MAX(SplitValue) FOR Level IN ([1], [2], [3], [4], [5])) AS pvt 
```

结果：

```
ID          Level1               Level2               Level3               Level4               Level5
----------- -------------------- -------------------- -------------------- -------------------- --------------------
1           88 Park View         Hemmingdale          London               NULL                 NULL
2           100 Main Street      Hemmingdale          London               NULL                 NULL
3           123 6th Street       Appt. B              Hemmingdale          London               NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:22:20.520

我知道这很可怕，但是这样你就有了 3 列中的 3 行，称为 l1、l2 和 l3：

```
declare @input nvarchar(max) =  'line 1' + CHAR(13) + CHAR(10) + 'line 2' + CHAR(13) + CHAR(10) + 'line 3' + CHAR(13) + CHAR(10) + 'line 4' + CHAR(13) + CHAR(10) + 'line 5'
declare @delimiter nvarchar(10) = CHAR(13) + CHAR(10)

declare @outtable table (id int primary key identity(1,1), data nvarchar(1000) )

declare @pos int = 1
declare @temp nvarchar(1000)

if substring( @input, 1, len(@delimiter) ) = @delimiter
begin
    set @input = substring(@input, 1+len(@delimiter), len(@input))
end

while @pos > 0
begin

    set @pos = patindex('%' + @delimiter + '%', @input)

    if @pos > 0
        set @temp = substring(@input, 1, @pos-1)
    else
        set @temp = @input

    insert into @outtable ( data ) values ( @temp )

    set @input = substring(@input, @pos+len(@delimiter), len(@input))

end

select
    top 1 ISNULL(a.data,'') as l1, ISNULL(b.data,'') as l2, ISNULL(c.data,'') as l3
from
    @outtable a
        left outer join @outtable b on b.id = 2
        left outer join @outtable c on c.id = 3 
```

sqlfiddle[在这里](http://sqlfiddle.com/#!6/d41d8/965)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:50:15.727

只是为了好玩，用 XML 解决方案更新。这应该处理'。问题并且可以很容易地扩展到更多行。

```
DECLARE @xml XML , @S VARCHAR(500) = '88 Park View
Hemmingdale
London'

SET @xml  = CAST('<row><col>' + REPLACE(@S,CHAR(13),'</col><col>') + '</col></row>' AS XML)

SELECT  
     line.col.value('col[1]', 'varchar(1000)') AS line1
    ,line.col.value('col[2]', 'varchar(1000)') AS line2
    ,line.col.value('col[3]', 'varchar(1000)') AS line3
FROM    @xml.nodes('/row') AS line(col) 
```

# android - 媒体播放器停止播放

> ID：13384652
> 
> 赞同：0
> 
> 时间：2012-11-14T18:09:01.553
> 
> 标签：android, media-player

在我们的 Gamefield 类中，我们是否想用这样的 Backgroundmusik 启动一个简单的 Mediaplayer

```
public GameField(Context context, int width, int height) {
    super(context);
    getHolder().addCallback(this);
    // get an instance of the gameLoop
    setFocusable(true); // events happen on this view

    //Starting soundloop
    MediaPlayer play = MediaPlayer.create(this.getContext(), R.raw.coryphee_coryphee);
    play.setLooping(true);
    play.start(); ...... 
```

这实际上在播放音乐一段时间后停止。在我们的 Mainacivity 中，我们是否启动了这样的 Mediaplayer，并且它不会停止播放。

为什么它会停止，如果修复它怎么办？我们通过在线程中运行它来修复它，但我认为它应该像这样工作。我能找到的每个教程都是这样做的，所以我有点无助

最好的问候和非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:39:39.480

看看这个，对你来说也是一样的。

[关联](https://stackoverflow.com/questions/6241687/mediaplayer-stop-playing-after-about-5-seconds)

但我认为这是你的情况。

# python - Imshow：范围和方面

> ID：13384653
> 
> 赞同：99
> 
> 时间：2012-11-14T18:09:03.327
> 
> 标签：python, matplotlib, imshow

我正在编写一个通过 3D 数据集可视化切片和投影的软件系统。我正在使用`matplotlib`并专门`imshow`用于可视化从分析代码中返回的图像缓冲区。

因为我想用绘图轴注释图像，所以我使用提供的 extent 关键字`imshow`将图像缓冲区像素坐标映射到数据空间坐标系。

不幸的是，`matplotlib`不知道单位。说（举一个人为的例子）我想绘制一个尺寸为`1000 m X 1 km`. 在这种情况下，程度将类似于`[0, 1000, 0, 1]`. 即使图像数组是正方形的，由于 extent 关键字所暗示的纵横比是 1000，因此生成的绘图轴也具有 1000 的纵横比。

是否可以强制绘图的纵横比，同时仍然保留我通过使用 extent 关键字获得的自动生成的主要刻度线和标签？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-11-15T02:36:17.230

您可以通过手动设置图像的纵横比（或让它自动缩放以填充图形的范围）来做到这一点。

默认情况下，`imshow`将绘图的纵横比设置为 1，因为这通常是人们想要的图像数据。

在您的情况下，您可以执行以下操作：

```
import matplotlib.pyplot as plt
import numpy as np

grid = np.random.random((10,10))

fig, (ax1, ax2, ax3) = plt.subplots(nrows=3, figsize=(6,10))

ax1.imshow(grid, extent=[0,100,0,1])
ax1.set_title('Default')

ax2.imshow(grid, extent=[0,100,0,1], aspect='auto')
ax2.set_title('Auto-scaled Aspect')

ax3.imshow(grid, extent=[0,100,0,1], aspect=100)
ax3.set_title('Manually Set Aspect')

plt.tight_layout()
plt.show() 
```

![在此处输入图像描述](../Images/7854cd0d57e1e418b593eca28bc81c7e.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-10-28T22:31:18.413

从[`plt.imshow()`](https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.imshow.html)官方指南中，我们知道 aspect 控制轴的纵横比。好吧，用我的话来说，方面正是 x **unit**和 y **unit**的比率。大多数情况下，我们希望将其保持为 1，因为我们不想无意中扭曲数字。但是，确实有一些情况需要我们指定aspect一个不是1的值。提问者提供了一个很好的例子，x和y轴可能有不同的物理单位。假设x以km为单位，y以m为单位。因此，对于 10x10 数据，范围应为 [0,10km,0,10m] = [0, 10000m, 0, 10m]。在这种情况下，如果我们继续使用默认的 aspect=1，那么图形的质量真的很差。因此，我们可以指定 aspect = 1000 来优化我们的图形。下面的代码说明了这种方法。

```
%matplotlib inline
import numpy as np
import matplotlib.pyplot as plt
rng=np.random.RandomState(0)
data=rng.randn(10,10)
plt.imshow(data, origin = 'lower',  extent = [0, 10000, 0, 10], aspect = 1000) 
```

[![在此处输入图像描述](../Images/19c27ea1a427bd800176c4a541a14a60.png)](https://i.stack.imgur.com/Tc3Q8.png)

不过，我认为有一个替代方案可以满足提问者的需求。我们可以将范围设置为 [0,10,0,10] 并添加额外的 xy 轴标签来表示单位。代码如下。

```
plt.imshow(data, origin = 'lower',  extent = [0, 10, 0, 10])
plt.xlabel('km')
plt.ylabel('m') 
```

[![在此处输入图像描述](../Images/d038c95f40eebf6e11e566ecb6f18e50.png)](https://i.stack.imgur.com/tXYl5.png)

要做出**正确**的数字，我们应该始终牢记`x_max-x_min = x_res * data.shape[1]`和`y_max - y_min = y_res * data.shape[0]`，其中`extent = [x_min, x_max, y_min, y_max]`。默认情况下，`aspect = 1`，表示单位像素为正方形。此默认行为也适用于具有不同值的 x_res 和 y_res。扩展前面的例子，假设 x_res 是 1.5 而 y_res 是 1。因此范围应该等于 [0,15,0,10]。使用默认方面，我们可以有矩形颜色像素，而单位像素仍然是正方形！

```
plt.imshow(data, origin = 'lower',  extent = [0, 15, 0, 10])
# Or we have similar x_max and y_max but different data.shape, leading to different color pixel res.
data=rng.randn(10,5)
plt.imshow(data, origin = 'lower',  extent = [0, 5, 0, 5]) 
```

[![在此处输入图像描述](../Images/cfddd75db0aa004129710ed778f147f5.png)](https://i.stack.imgur.com/p30iK.png) [![在此处输入图像描述](../Images/0e08883ae3375cdbb6a3aab6e641a8b5.png)](https://i.stack.imgur.com/qMkEg.png)

颜色像素的方面是`x_res / y_res`。将其方面设置为单位像素（即`aspect = x_res / y_res = ((x_max - x_min) / data.shape[1]) / ((y_max - y_min) / data.shape[0])`）的方面总是会给出方形颜色像素。我们可以将 aspect = 1.5 更改为 x 轴单位是 y 轴单位的 1.5 倍，从而得到一个正方形的颜色像素和正方形的整个图形，而不是矩形的像素单元。显然，它通常不被接受。

```
data=rng.randn(10,10)
plt.imshow(data, origin = 'lower',  extent = [0, 15, 0, 10], aspect = 1.5) 
```

[![在此处输入图像描述](../Images/b397ffb11cb21ba2b2440c724d96852c.png)](https://i.stack.imgur.com/u5XXV.png)

最不希望的情况是设置纵横比为任意值，如 1.2，这将导致既不会导致正方形单位像素也不会导致正方形颜色像素。

```
plt.imshow(data, origin = 'lower',  extent = [0, 15, 0, 10], aspect = 1.2) 
```

[![在此处输入图像描述](../Images/e3f4928f6a48593b41326590e2160a6e.png)](https://i.stack.imgur.com/Vr1AQ.png)

长话短说，设置正确的范围并让 matplotlib 为我们做剩下的事情总是足够的（即使 x_res!=y_res）！只有在必须时才改变方面。

# php - 移除 CURLOPT_HEADER 返回数据

> ID：13384658
> 
> 赞同：3
> 
> 时间：2012-11-14T18:09:14.823
> 
> 标签：php, curl

我正在做一些 curl 过程，必须设置一些站点`CURLOPT_HEADER, true`，以便获得 html 代码。

```
$ch2 = curl_init();
curl_setopt($ch2, CURLOPT_URL, $url);
curl_setopt($ch2, CURLOPT_HEADER, true);
curl_setopt($ch2, CURLOPT_RETURNTRANSFER, 1);
$html = curl_exec($ch2);
curl_close($ch2);
echo $html; 
```

返回数据如下：

```
HTTP/1.0 200 OK  Date: Wed, 14 Nov 2012 17:58:26 GMT  Expires: Wed, 14 Nov 2012 18:08:26 GMT  Cache-Control: max-age=600... 
<html... 
```

那么如何删除之前`<html>`的一些数据（CURLOPT_HEADER 返回数据：HTTP/1.0 200 OK...）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T18:10:38.450

`CURLOPT_HEADER`不影响网站返回给您的内容。你可以删除它，如果你得到空的内容 - 那么还有其他问题。

`CURLOPT_HEADER`只是为了您的方便，这样您就可以看到服务器对您的脚本说了什么。某些 Web API 在标头中传递数据，这允许您访问它。

您可以像这样从标题中拆分内容

```
list($header, $body) = explode("\r\n\r\n", $content, 2); // Notice the "2" limit! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-22T20:31:41.173

接受的答案中的解决方案既好又简单，但是如果重定向响应，它将无法按预期工作。

这是另一种适用于重定向的解决方案，但需要更多行：

```
$header_size=curl_getinfo($ch,CURLINFO_HEADER_SIZE);
$header=trim(substr($content,0,$header_size)); //Get the header and trim it to remove \r\n
$body=substr($content,$header_size); //Get the body 
```

# javascript - jQuery offset() 被主体位置打破：相对与元素边距相结合

> ID：13384660
> 
> 赞同：6
> 
> 时间：2012-11-14T18:09:21.540
> 
> 标签：javascript, jquery, css, position

这不是错误，因为在 Win7 上，FF、Chrome、IE9 和 Safari 的行为是一致的。

我正在开发的应用程序是主机页面的第 3 方，因此 CSS 是不可变的。脚本尝试将新 div 与现有元素对齐。

*   身体位置：相对
*   页面顶部有一个H1
*   H1 的边距似乎改变了计算主体 0,0 的位置 - 即使主体上的背景一直延伸到边缘，并且它的 offsetTop 属性报告为 0
*   在正文上设置边框可以解决问题 - 看起来很奇怪，但在浏览器中是一致的？（不是一个可行的解决方案）
*   删除 H1 边距可以解决问题（不是可行的解决方案）

此处示例，对复制每个案例的 JS 进行了注释：http:
[//codepen.io/anon/pen/EGvlb](http://codepen.io/anon/pen/EGvlb)

我不认为这是 jQuery 的错误 - 它似乎归结为 H1 边距和 body 元素之间的合法关系？

```
$(function(){

  /* Setting body to position:relative breaks offset()
     because H1 margin moves body down */
  $(document.body).css({position: "relative"});

  /* Strange: putting a border on body fixes things? */
  //$(document.body).css({border: "1px solid #000"});

  /* Removing H1 margin removes problem */
  //$("h1").css({margin: 0});

  $("#overlay").css({
      left: $("#existing").offset().left,
      top: $("#existing").offset().top
  })
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T22:17:21.040

> 我不认为这是 jQuery 的错误 - 它似乎归结为 H1 边距和 body 元素之间的合法关系？

是的：body 和 h1 的边距正在[collapsing](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)，所以不仅 h1 被其默认边距向下移动，body 也是如此。这就是为什么你能够做出这些观察：

> *   在正文上设置边框可以解决问题 - 看起来很奇怪，但在浏览器中是一致的？（不是一个可行的解决方案）
> *   删除 H1 边距可以解决问题（不是可行的解决方案）

无论如何，通过将 body 设置为`position: relative`，您就是在告诉`#overlay`以 body 的顶部偏移作为原点来绝对定位自己。然后，您的脚本将其相对于`#existing`. 它的值`offsetTop`是相对于视口的，它是根据这个盒子的位置来计算的……它本身是相对于h1的，因为它在正常流程中直接跟随h1。

因为 h1 和 body 元素的边距正在折叠，所以它们具有相同的渲染边距。然后发生的事情是双重的：

1.  `#existing`在正常流程中被 h1 作为其下一个兄弟下推。这会增加它与视口的偏移量（在您的 CodePen 测试用例中，它是预览窗格的顶部），从而导致它`offsetTop`更大。

2.  当 body 设置为 时`position: relative`，`#overlay`最终会定位到其原点设置为 body 的原点，由于与 h1 的边距折叠，它本身也被推下。这会增加其原点的顶部偏移量，如果您没有定位主体，则不会发生这种情况，因为那样会`#overlay`使用视口的原点，它永远不会移动。

`#existing`到视口顶部的距离被添加到`#overlay`从其原点（即身体）的偏移量上，从而产生这种效果。

总结：由于边距崩溃，浏览器最终不得不考虑 h1 和 body 的向下移动。h1`#existing`反过来影响它的，而当你相对定位它时`offsetTop`，body 会影响它。`#overlay`因此，转移效应出现了双重效果。

作为一种快速解决方法，您可以从偏移量中减去 h1 边距，以达到偏移量`#existing`的目的`#overlay`：

```
 $("#overlay").css({
      left: $("#existing").offset().left - $("h1").offset().left,
      top: $("#existing").offset().top - $("h1").offset().top
  }) 
```

[更新示例](http://codepen.io/anon/pen/nAxIt)

请注意，使用`$(document.body)`而不是`$("h1")`上面将不起作用。这是因为边距折叠纯粹是一种渲染效果，并且在您给它自己的边距之前实际上不会影响主体的偏移量（换句话说，主体边距仍然计算为零，因此 DOM 仍然不明智）。

* * *

与手头的问题没有直接关系，但无论如何都值得解决：

> *   H1 的边距似乎改变了计算主体 0,0 的位置 - 即使主体上的背景一直延伸到边缘，并且它的 offsetTop 属性报告为 0

上面已经讨论了这一点的第一部分和最后一部分。

至于主体背景：虽然它看起来一直延伸到边缘，但这个延伸的背景实际上并不属于主体——它从主体传播到根元素 (html) 和视口，因此属于根元素 (html) 和视口。请参阅[此答案](https://stackoverflow.com/questions/10947541/applying-a-background-to-html-and-or-body/10947583#10947583)以获取解释。

哦，还有这个：

> 这不是错误，因为在 Win7 上，FF、Chrome、IE9 和 Safari 的行为是一致的。

让我微笑。因为这一次，有人说得对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:22:56.400

如果您将位置更改为`overlay`from `absolute`，`fixed`则它可以正常工作。这意味着偏移值是正确的。我认为这与`overlay`元素相对于其前一个元素的位置有关。

# vbscript - vbScript 进程对象中的 NULL ExecutablePath

> ID：13384661
> 
> 赞同：0
> 
> 时间：2012-11-14T18:09:25.917
> 
> 标签：vbscript, executable-path

问候，

我有以下 VBScript：

```
Option Explicit
Dim objWMIService, objProcess, colProcess
Dim strComputer, strList

strComputer = "."

Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" _ 
& strComputer & "\root\cimv2") 

Set colProcess = objWMIService.ExecQuery _
("Select * from Win32_Process")

For Each objProcess in colProcess
   MsgBox(objProcess.ExecutablePath)
   'If InStr(objProcess.ExecutablePath, "EASE") <> 0 Then
   '   MsgBox("TERMINATING")
   '   objProcess.Terminate()
   'End If
Next 
```

出于某种原因，我在 MsgBox(objProcess.ExecutablePath) 行出现错误。它说“无效使用 Null：'ExecutablePath'”。奇怪的是，当我取消注释注释行并注释掉问题行时，我没有收到此错误。

如您所见，我正在尝试终止具有特定路径名的所有进程，但似乎字符串匹配不起作用，就像可执行路径有问题一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:25:15.303

由于`MsgBox`需要显示字符串并且 Null 不能被字符串化，因此您的`MsgBox`行（顺便说一句：不允许使用括号）将因 nasty 而失败`.ExecutablePathes`；但是，InStr() 允许第一个参数为 Null（请参阅文档）。证据：

```
>> MsgBox Null
>>
Error Number:       94
Error Description:  Invalid use of Null
>> p = Instr(Null, "whatever")
>>
>> WScript.Echo TypeName(p)
>>
Null 
```

因此，摆脱诊断或编写一个以适当方式处理 Null（以及可能其他边界线情况，如 Empty）的子/函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:56:29.283

Ekkehard 对这个问题给出了很好的解释，即 Null 不能隐式转换为字符串。现在这里有一种解决问题的方法。

在尝试使用 objProcess.ExecutablePath 检查它是否为空之前：

```
For Each objProcess in colProcess
   if not isnull(objProcess.ExecutablePath) then
    MsgBox objProcess.ExecutablePath
   'If InStr(objProcess.ExecutablePath, "EASE") <> 0 Then
   '   MsgBox("TERMINATING")
   '   objProcess.Terminate()
   'End If
   end if
Next 
```

# c#-4.0 - 传递动态参数会破坏流畅的接口

> ID：13384666
> 
> 赞同：1
> 
> 时间：2012-11-14T18:09:37.443
> 
> 标签：c#-4.0, dynamic, fluent

我有一组所谓的流畅接口，所以我可以使用如下语法：

a.With("abc").Do("this").Then("that);

每个方法都返回一个转换为相应接口的对象。在设计时，我可以使用 Intellisense 在 API 方法之间轻松导航。但是，如果我将其中一个参数转换为动态，我将无法再这样做：

a.With((动态)"abc").Do("this").Then("that);

不仅我在设计时失去了 Intellisense，这种转换还会影响运行时执行：在 With 返回动态类型的对象之后的所有后续调用都可能破坏执行逻辑。

我不明白为什么动态参数会影响只使用静态类型的合约。如果一个方法With被设计为返回一个ISomeInterface的实例并且实现返回SomeClass（即实现了ISomeInterface），为什么一个在不相关的地方使用的动态对象会感染所有后续的调用链？有什么办法可以预防吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:10:29.730

我相信 Erik Lippert 的这篇文章回答了这一切：

[http://blogs.msdn.com/b/ericlippert/archive/2012/10/22/a-method-group-of-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2012/10/22/a-method-group-of-one.aspx)

# php - 如何将输入的部分内容与输出相匹配

> ID：13384671
> 
> 赞同：-1
> 
> 时间：2012-11-14T18:09:46.997
> 
> 标签：php, mysql

好的，这是我的背景。我正在尝试创建一个接受输入并显示输出的页面。是的，容易吧？嗯，它比这复杂一点。首先，我试图为化学做这个。我正在研究阳离子和阴离子。可以在[此处](http://www.chemteam.info/Nomenclature/HO1-Anion-Cation-List.pdf)找到常见的简单列表。

我的目标是接受用户的输入，并根据该输入为他们提供适当的平衡方程和名称。可以在[此处](http://www.bowvalleycollege.ca/Documents/Learning%20Resource%20Services/Library%20Learning%20Commons/E-Resources/Study%20guides%202/chemistry%20rules_for_naming.pdf)找到执行此操作的过程。

我需要做的第一件事是解析信息，以找出它是什么元素以及它具有什么电荷。我相信最好的方法是创建一个包含化学符号、名称和电荷的数组。

在确定阳离子和阴离子是什么之后，我将使用“十字交叉”方法来找到平衡电荷。从那里我需要查找每个离子的元素名称。完成此操作后，我找到与公式匹配的名称，然后在名称之前添加每个元素的数量。

当我尝试将所有这些信息组合成一个字符串时，我的第一个问题就出现了。如何将这三个字符串加在一起。

我的第二个问题部分来自解析，部分来自数组。当有更复杂的离子时首先有两个原因。我解析信息的方式是大写字母。当人们使用这些较大的离子时，这产生了相当小的问题，因为那时我必须处理相当数量的这些离子。或者当他们试图代表多个相同的化合物时。即他们写了类似这样的 Mg(ClO/4)/2 （我使用正斜杠来表示该类型元素的数量）。我需要确保我有两个 ClO/4。您会如何发现我首先正确解析它以获取元素？我将如何确保我保持笔直谁有多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:22:10.577

我相信你需要的是[substr()](http://php.net/manual/en/function.substr.php)函数。也就是说，您只想选择前 2、3 或任何字母。但是在您需要自定义缩写形式的情况下，您需要以[关联数组](http://php.net/manual/en/language.types.array.php)或类似的形式提供它。

所以在数组里面你会有`$myarray = ["name"=>"MagnesiumWhatever", "abbreviation"=>"Mg24xy"]`

我认为您的 html 中还需要[下标/上标字母](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_sup)。

现在你有了如何做的链接。做一些研究。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:40:14.940

这将不是一个简单的应用程序。您需要从元素、离子、分子等的综合列表开始，以及它们的属性和名称的变体。之后，您将不得不使用各种[字符串函数](http://ca2.php.net/manual/en/ref.strings.php)将用户输入与该数据中的某些内容相匹配。

至于输出，您可以将 HTML/CSS 函数用于 sub/superscript （如 toninoj 提到的），对于更复杂的东西，您可能希望查看[LaTeX](http://en.wikibooks.org/wiki/LaTeX/Mathematics)。

可能有整个大学课程都涵盖了这样的内容，而商业软件包正是这样做的。

# c - 在 C 字符串中查找位置

> ID：13384676
> 
> 赞同：-2
> 
> 时间：2012-11-14T18:09:59.620
> 
> 标签：c, string, search

如果我有一个包含 * 的 C 字符串，并且我想在这个字符串中找到 3 星的位置。除了通过循环和逐字符检查之外，最好/更有效的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:14:21.690

您可能想使用[`strchr`](http://www.manpagez.com/man/3/strchr/). 由于您想要角色的第三个实例，因此您仍将在循环中执行它。

这是否真的会比自己编写循环更有效可能会有一些问题，但它可能不会更慢，并且任何阅读代码的人都会更清楚意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:15:21.080

C字符串实际上是字符数组，所以如果你想找到任何字符的位置，那么你必须遍历整个数组并返回特定的位置`char`。但是数组的索引从位置开始`0`。

找到一个角色位置

```
int str_chr_pos(const char *s,char c)
{
 for(i=0;s[i]!='\0';i++)
   if(c == s[i])
     return i;  // found at position i
 return -1;   //-1 means not found and check the returned value in the calling environment
} 
```

# java - JavaDoc 应该放在方法级注释之前还是之后？

> ID：13384694
> 
> 赞同：4
> 
> 时间：2012-11-14T18:10:53.130
> 
> 标签：java, coding-style, annotations, javadoc

为带有注解的方法放置 JavaDoc 的推荐位置是什么？注释之前还是之后？

```
@Test
/**
 * My doc
 */
public void testMyTest(){

} 
```

或者

```
/**
 * My doc
 */
@Test
public void testMyTest(){

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T18:12:11.757

我认为这并不重要，但第二种格式更好。`annotations`是代码的一部分，并根据其使用模式发挥关键作用。最好将所有与代码相关的条目放在一起。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T18:24:29.230

*通常*的样式似乎是在 Javadoc注释**之后有注释。**

原因是注释是代码的一部分，而不是文档的一部分——为什么文档应该介于两者之间。

`@Override`这对于and可能并不明显`@Test`，当然也有与文档相关的注释。但从技术上讲，注解是具有特定语法的**Java 代码。**

# javascript - 假 js 认为 url 有一个额外的参数

> ID：13384695
> 
> 赞同：1
> 
> 时间：2012-11-14T18:10:54.217
> 
> 标签：javascript, url, redirect, mbox

我的网站中包含一个脚本，该脚本读取 URL 上的变量，例如 www.test.com/?mboxDisable=1 所以我想知道如何在 www.test.com 上伪造它，所以 js 会“认为”有 mboxDisable= 1 我知道coldfusion，我可以通过在第一行使用但如何使用js来做到这一点？我尝试了 document.location.href += "mboxDisable=1" 但随后 js 将页面刷新到 www.test.com/?mboxDisable=1 有没有办法让 js 认为 url 中的参数实际上不在网址？

我忘了提及用法：我有一个 cookie，我检查用户是否要禁用 mbox，所以在伪代码中类似于 if cookieIsSet urlAppend("mboxDisable=1") endif

我无法更改的自动生成代码从 document.location 获取信息。有什么方法可以在不刷新页面的情况下编辑它？没有 html5 也没有 jquery。可以使用coldfusion和js。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:54:09.240

使用 HTML5 pushState 可以在不刷新页面的情况下修改页面的 URL。

[显示示例的链接](http://html5demos.com/history)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:51:17.970

使用 URL 哈希而不是参数：

`mysite.com?mboxDisable=1`变成：`mysite.com#mboxDisable=1`

然后，您可以`document.location.hash`在不刷新的情况下同时读取和设置此参数。当然，您的代码将需要能够读取此值。

所有其他更改 URL 的方法都将导致加载新页面。

# php - php 相当于 $.get

> ID：13384697
> 
> 赞同：0
> 
> 时间：2012-11-14T18:10:59.187
> 
> 标签：php, javascript, facebook-like

我有一个很好的解决方案：

```
$.get('getdbstuff.php?type=meta,'.$var_id, function(data){ 
    $(data).appendTo("head");)
} 
```

但那是 javascript，它不会被 facebook scraper 执行。是否有一些 php 等效于 $.get 加载的 getdbstuff.php 文件。将元标记加载到我的 index.php 的标题中...？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:12:45.543

There's whole extension in PHP dedicated to this called [cURL](http://php.net/manual/en/book.curl.php).

But you also may use [`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php) (I wouldn't because it relies on configuration to [allow URL `fopen`](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:15:50.127

是的。取决于您是否要通过 Web 服务器，只是获取内容或在本地执行内容，这将是其中之一

1.  `echo file_get_contents('http://yourdomain.com/path/file.php?params')`
2.  `echo file_get_contents('file.php')`或者
3.  `include('file.php')`

第一个以与 AJAX 调用相同的方式执行此操作，通过 Web 服务器。第二个在不执行的情况下输出文件的内容，可能不是您想要的，最后一个在没有 HTTP 调用的情况下执行 php 代码。第一个是与您现在所做的最接近的匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:17:27.860

php 中有一个与 jquery 并行的库，称为[querypath](http://querypath.org/)。有了它，您可以选择任何外部页面中的任何 DOM 元素。这很简单。您选择 DOM 元素的方式与在 jquery 中相同。

# jasper-reports - 如何将 JRBeanCollectionDataSource 列表传递给子报表

> ID：13384698
> 
> 赞同：8
> 
> 时间：2012-11-14T18:11:00.887
> 
> 标签：jasper-reports, ireport

我正在从 JRBeanCollectionDataSource 生成报告。这份报告是关于客户的订单的。

这是我的代码

```
public class Customer
{
    private String customerName;
    private String customerNo;
    private String customerAddress;
    private ArrayList<CustomerOrder> customerOrders;
    //Getters and Setters
}

private class CustomerOrder
{
    private String itemName;
    private BigDecimal amount;
    private int itemQuantity;
    //Getters and Setters
} 
```

当客户需要生成包含客户详细信息和客户订单列表的报告时。由于`JRBeanCollectionDataSource`需要收集，这就是我所做的。

```
Customer cust; //Customer Instance

ArrayList<Customer> custList = new ArrayList<Customer>();
custList.add(cust); 

JRBeanCollectionDataSource rptData = new JRBeanCollectionDataSource(custList); 
```

如何提取`CustomerOrder`列表`Customer`并将其作为子报告传递？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T14:24:34.100

您应该能够为子报表设置数据源表达式：

```
new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{customerOrders}) 
```

生成的 xml 应该有一个类似于以下内容的子报表标记：

```
<subreport>
    <reportElement uuid="e9fc4a60-3844-41b7-a38c-768f06f09b44" x="0" y="57" width="555" height="68"/>
    <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{customerOrders})]]></dataSourceExpression>
    <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "report2_subreport1.jasper"]]></subreportExpression>
</subreport> 
```

您需要检查的唯一另一件事是`Language`报告属性的 设置为`Java`。

# json - 如何强制 signalR 在 IE 上使用 POST 而不是 GET？（解决最大 RequestUrl 长度限制）

> ID：13384703
> 
> 赞同：3
> 
> 时间：2012-11-14T18:11:38.843
> 
> 标签：json, internet-explorer, post, signalr, long-polling

我正在使用 SignalR 将 JSON 数据从客户端提交到服务器。

这在 Firefox 和 Chrome 上运行良好，但**在 IE 上失败**。

深入挖掘，我发现虽然这三个都使用“长轮询”机制来提交数据，但 IE 使用 GET 请求，而其他两个使用 POST。请求失败，因为我的 json 数据太大，无法满足 GET 请求 url 允许的最大长度。

有没有办法强制 signalR 对 IE 使用 POST？或者有没有其他方法来处理这个？

如果您需要更多可能有帮助的信息，请告诉我。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:19:54.333

没有，除非您手动更改代码，并且在最新版本中，一切都是 GET。你达到了什么限制，你使用的是什么版本的 SignalR？

# jquery - 非常大的PNG图像动画优化

> ID：13384705
> 
> 赞同：1
> 
> 时间：2012-11-14T18:11:48.103
> 
> 标签：jquery

我有 3 个大（7000 像素宽）透明 PNG 图像，它们从左到右动画。性能不算太差，但也不算太好。

我需要帮助优化这些图像，以便使 jquery 动画流畅。

我尝试将它们全部分成几片（因此每个背景有 10 个单独的 PNG），这有所帮助，但仍然很不稳定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:18:57.113

最好把它作为一张图片，这样你的浏览器只执行一个 http 请求来获取图片，而且图片可以被更好地压缩并且比你将它分成 7 块并压缩每一个更轻，因为有将是它们之间的冗余数据。

对于优化 png 的程序，而不是在这里粘贴链接，我会给你两个问题，其中一些是：

*   [https://stackoverflow.com/questions/1060763/image-optimizer-for-images-used-on-the-web-jpg-gif-and-png](https://stackoverflow.com/questions/1060763/image-optimizer-for-images-used-on-the-web-jpg-gif-and-png)
*   [可以使用的好的图像优化器？](https://stackoverflow.com/questions/2109351/good-image-optimizer-that-can-be-used)

另请参阅这篇关于优化图像和最佳方法的[有趣文章。](http://css-tricks.com/css-sprites/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:00:55.467

`animate`您可以尝试使用[CSS3 动画](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_animations)，而不是使用 jquery ，这应该会产生更流畅的动画。

来自[Addy Osmani 的博客文章：带有 jQ​​uery Fallbacks 的 CSS3 过渡动画](http://addyosmani.com/blog/css3transitions-jquery/)：

> 过渡的好处是，与基于 JavaScript 的动画不同，它们在某些浏览器和移动设备中是硬件加速的，因此可能会产生比您通常体验的更流畅的整体动画。

# java - PrintWriter 与常规打印不同

> ID：13384706
> 
> 赞同：1
> 
> 时间：2012-11-14T18:11:48.170
> 
> 标签：java, parsing, printwriter

```
String[] strarray = new String[dataLine.size()];
strarray = dataLine.toArray(strarray);
PrintWriter pr = new PrintWriter("test.txt");    
for (int i=0; i<strarray.length; i++)
{
   pr.println(Arrays.toString(strarray));
}
pr.close(); 
```

当我为此查看 test.txt 时，与调用相比，它会输出一组我不想要的数据（特别是最后几个）

```
System.out.println(Arrays.toString(strarray)); 
```

知道为什么会发生这种情况以及如何解决这个问题吗？

谢谢！

编辑：

让我举一个更具体的例子。

System.out.println 输出

```
[1040, 0, 6, 1, 11/12/2012, 3, 0, 0, 1, 12/27/2011, 0, 0]
[1041, 0, 6, 1, 11/13/2012, 3, 0, 0, 1, 12/28/2011, 0, 0] 
```

而 pr.println(Arrays.toString(strarray)) 打印

```
[1041, 0, 6, 1, 11/13/2012, 3, 0, 0, 1, 12/28/2011, 0, 0]
[1041, 0, 6, 1, 11/13/2012, 3, 0, 0, 1, 12/28/2011, 0, 0] 
```

和 pr.println(strarray[i]); 印刷

```
1041
0
6
1
11/13/2012
3
0
0
1
12/28/2011
0
0 
```

我想要的输出文件上的所需输出是第一个。但是，最后两个没有为我提供这个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:13:59.950

我想你正在寻找

```
pr.println(strarray[i]); 
```

在你的 for 循环中。

与你的问题无关，你应该改变这个

```
String[] strarray = new String[dataLine.size()];
strarray = dataLine.toArray(strarray); 
```

至

```
String[] strarray = dataLine.toArray(new String[0]); 
```

因为您这样做的方式将首先创建一个所需大小的数组，然后将引用更改为另一个数组，这将使您的第一个数组有资格进行垃圾收集。所以不要创建它，如果你不需要它。

# ruby - 如何将日期转换为具有特定时区的 ActiveSupport::TimeWithZone？

> ID：13384708
> 
> 赞同：2
> 
> 时间：2012-11-14T18:11:51.017
> 
> 标签：ruby, timezone, activesupport

我有一个这样的 Date 对象：

```
>> the_date
=> Tue, 12 Jun 2012

>> the_date.class
=> Date 
```

以及存储为字符串的时区：

```
>> tz = "Pacific Time (US & Canada)"
=> "Pacific Time (US & Canada)" 
```

我希望在给定时区的给定日期的午夜生成一个 ActiveSupport::TimeWithZone （*不是*utc 中给定日期的午夜，然后转换为给定的时区）。到目前为止，我发现这样做的最好方法非常难看：

```
>> the_time = ActiveSupport::TimeZone.new(tz).parse(the_date.to_s)
=> Tue, 12 Jun 2012 00:00:00 PDT -07:00

>> the_time.class
=> ActiveSupport::TimeWithZone 
```

必须有更好的方法来生成它！有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:57:42.427

不是更好，但与您的解决方案不同：

```
the_date.to_time.in_time_zone
#=> Mon, 11 Jun 2012 22:00:00 UTC +00:00

the_date.to_time.in_time_zone(tz)
#=> Mon, 11 Jun 2012 15:00:00 PDT -07:00

Time.zone = tz
#=> "Pacific Time (US & Canada)"

the_date.to_time.in_time_zone
#=> Mon, 11 Jun 2012 15:00:00 PDT -07:00

the_date.to_time.in_time_zone.end_of_day
#=> Mon, 11 Jun 2012 23:59:59 PDT -07:00

(the_date.to_time.in_time_zone + 1.day).beginning_of_day
#=> Tue, 12 Jun 2012 00:00:00 PDT -07:00 
```

# c# - 字典列表中的唯一字典（c#）

> ID：13384709
> 
> 赞同：1
> 
> 时间：2012-11-14T18:11:51.993
> 
> 标签：c#, list, generics, dictionary

我想创建一个通用类来帮助我比较两个字典（键和值）

```
class DictionaryComparer : IEqualityComparer<Dictionary<TKey, TValue>> //doesn't work. But i want to make it generic

class DictionaryComparer : IEqualityComparer<Dictionary<string,string>> //works. Not generic 
```

我会使用 IEqualityComparer 的参考，`Distinct(IEqualityComparer<Dictionary<string,string>> comparer)`在`List<Dictionary<string,string>>`. 所以我在列表中只有唯一的字典。

有没有更好的方法在列表中拥有独特的词典

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T18:17:26.657

```
class DictionaryComparer<TKey, TValue> 
    : IEqualityComparer<Dictionary<TKey, TValue>> 
```

可能会奏效。

# python - 返回列表

> ID：13384710
> 
> 赞同：0
> 
> 时间：2012-11-14T18:11:55.483
> 
> 标签：python, file, list, nested

我有一个关于返回以下函数的问题，我得到了一个文件，其中包含一个看起来像这样的食物列表：

```
'''
bread
bun

milk
soya milk
''' 
```

我必须返回一份食物清单，例如，`[['bread','bun'], ['milk','soya milk']]`

我对 python 和编程非常陌生，因此我被困在 for 循环中以创建我的列表。任何输入将不胜感激 - kev

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:21:48.283

这样可行...

```
grocery_list_file = open('foods.txt','r').read()
foods = grocery_list_file.split("\n\n") #split on blank lines

result = []
for food in foods:
   newFood = food.split("\n") # split the lines, creating the output...
   result += [newFood]
return result 
```

在一行中：

```
print [f.strip().split("\n") for f in open('foods.txt','r').read().split("\n\n")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:21:58.033

您想在到达新类别时附加子列表，然后开始一个新的 sub_list。当您到达文件末尾时，将剩余的 sub_list 附加到末尾很重要。

```
new_list.append("\n")   #to make sure it appends the last category
for next_food in new_list:
        if next_food = "\n":
            result.append(sub_list)
            sub_list = []
        else:
            sub_list.append(next_food) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:26:18.547

这不是一个很好的解决方案……但它有一些有趣的技巧……

```
>>> s = '''
... bread
... bun
...
... milk
... soya milk
... '''
>>> import re
>>> parts = re.sub("[\[\]']","",str(s.strip().splitlines())).split(", ,")
>>> import string
>>> print [map(string.strip,p.split(",")) for p in parts]
[['bread', 'bun'], ['milk', 'soya milk']] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T19:52:19.733

如果输入文件小到可以完全读入内存，我会这样做：

```
with open('grocery_list.txt', 'rt') as grocery_list_file:
    data = grocery_list_file.read()

sublist = [item.strip().split('\n') for item in data.split('\n\n')] 
```

输出：

```
sublist: [['bread', 'bun'], ['milk', 'soya milk']] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T19:36:46.390

最简单且可读性强的方法是：

```
>>> [el.strip().split('\n') for el in text.split('\n\n')]
[['bread', 'bun'], ['milk', 'soya milk']] 
```

1.  拆分`\n\n`为一行，紧接着是一个空行

2.  `.strip()`删除前导和尾随换行符，因此只有元素之间的换行符 存在

3.  然后`split`将这些元素分解为一个列表，从而生成您的列表列表

或者，您可以使用`itertools.groupby`：

```
>>> [groups for groups in (list(g) for k, g in groupby(text.splitlines(), bool)) if groups[0]]
[['bread', 'bun'], ['milk', 'soya milk']] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T18:21:28.153

它非常接近。`while len(next_food) > 0:`当 next_food 为空白和非空白时，您应该使用 if 并处理这两种情况，而不是使用。就像您评论指出的那样，在返回之前，您应该包含最后一个子列表。

要检查的另一件事是 next_food 是否在末尾包含换行符。如果有换行符，您应该去掉它。最后，还有一个替代检查的快捷方式`if len(next_food):`。简单地写`if next_food:`就行了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-14T18:41:30.500

使用[itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
from itertools import groupby

def build_grocery_list():
    # using "with" to open the file - recommended way
    with open("foods.txt") as f:
        # lines will contain all the lines in the file, without "\n" characters
        lines = f.read().splitlines()

        # initialize result as an empty list
        result = []

        # Now for the fun part: group file lines basing on whether they are empty
        # (bool(string) is analogous to as using "if string:" -- will be True if
        #  the string is not empty)
        #
        # groupby works in such a way that it appends stuff to the group as long
        # as "key" condition is the same, returning (key, group) pairs.
        #
        # So, we get pairs: (bool(string), string-group) where:
        # - bool(string) is the group "key", delimiting empty and non-empty
        #   strings
        # - string-group is a lazy *generator*, hence the "list(group)"
        for nonblank, group in groupby(lines, bool):
            if nonblank:
                result.append(list(group))

    return result 
```

如果你正在学习 Python，我真的建议你熟悉一下优秀的[itertools](http://docs.python.org/2/library/itertools.html)模块——它非常方便！

# easeljs - easeljs - 模态对话框？

> ID：13384711
> 
> 赞同：2
> 
> 时间：2012-11-14T18:12:00.800
> 
> 标签：easeljs, createjs

我该如何实施？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-24T13:19:02.680

这就是我在easeljs中的做法：

```
var stage = new createjs.Stage('canvas');
stage.width = $('#canvas').width();
stage.height = $('#canvas').height();

// warning box / modal dialog for user infos
var warnbox = new createjs.Shape();
warnbox.graphics.beginFill('#000');
warnbox.alpha = 0.85;
warnbox.graphics.drawRect(0, 0, stage.width, stage.height);
warnbox.graphics.endFill();
stage.addChild(warnbox);
warnbox.visible = false;

// confirm button for modal dialog box
var buttonok = new createjs.Shape();
buttonok.graphics.beginFill('#428BCA');
buttonok.graphics.setStrokeStyle(2,'round').beginStroke('#357EBD');
buttonok.graphics.drawRoundRect(0, 0, 170, 50, 5);
buttonok.x = stage.width/2-85;
buttonok.y = stage.height/2+70;
buttonok.cursor = "pointer";
stage.addChild(buttonok);
buttonok.visible = false;

var label_info = new createjs.Text("Your message here", "30px Arial", "#F0F0F0");
label_info.x = stage.width/2;
label_info.y = stage.height/2-110;
label_info.textAlign = 'center';
label_info.lineWidth = 800;
label_info.lineHeight = 50;
stage.addChild(label_info);
label_info.visible = false;

var label_ok = new createjs.Text("Continue", "25px Arial", "#F0F0F0");
label_ok.x = buttonok.x+85;
label_ok.y = buttonok.y+13;
label_ok.textAlign = 'center';
label_ok.lineWidth = 100;
label_ok.lineHeight = 50;
label_ok.cursor = "pointer";
stage.addChild(label_ok);
label_ok.visible = false;

function dialogbox(msg) {
    warnbox.visible = label_info.visible = buttonok.visible = label_ok.visible = true;
    // bring warnbox to front
    stage.setChildIndex(warnbox, stage.getNumChildren()-1); 
    stage.setChildIndex(label_info, stage.getNumChildren()-1);  
    stage.setChildIndex(buttonok, stage.getNumChildren()-1);    
    stage.setChildIndex(label_ok, stage.getNumChildren()-1);    
    label_info.text = msg;
}

buttonok.on("click", function(evt) {
    warnbox.visible = label_info.visible = buttonok.visible = label_ok.visible = false;
    resetScene();
});
label_ok.on("click", function(evt) {
    warnbox.visible = label_info.visible = buttonok.visible = label_ok.visible = false;
    resetScene();
});

// trigger
dialogbox("Congratulations, this is your modal box!"); 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:38:24.267

我在 Flash 中实现的方法是将整个画布大小的透明图像放在所有内容上，然后在其上放置对话框。虚拟图像将捕获并忽略所有鼠标单击，不允许用户与对话框以外的任何内容进行交互。

这**应该**适用于 EaselJS。你也可以做一些事情，比如让虚拟图像变成半透明的灰色，这样它就可以让模态对话框之外的所有东西变暗。

如果您还需要停止框外的所有活动，我认为最简单的方法是使用 Ticker.setPause() 函数来停止发送 tick() 事件。

注意：这只是画布中的模式，不会影响浏览器或网页的其余部分。

# java - Android HTTP 异常

> ID：13384715
> 
> 赞同：1
> 
> 时间：2012-11-14T18:12:14.380
> 
> 标签：java, android

我正在使用以下代码登录 Dropbox，但它会引发异常。

代码：

```
 HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("https://www.dropbox.com/login");

    // set values you'd like to send
    List pairs = new ArrayList();
    pairs.add(new BasicNameValuePair("login_email", "my email id"));
    pairs.add(new BasicNameValuePair("login_password", "******"));
    /*'login_email' and 'login_password' i found html form fields name by viewing the page source of https://www.dropbox.com/login */

    try {
        post.setEntity(new UrlEncodedFormEntity(pairs));
        // set ResponseHandler to handle String responses
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        String response = client.execute(post, responseHandler);
        Log.v("HttpPost", "Response: " + response);
        if (response.contains("SUCCESS")){
            // express your joy here!
        } else {
            // pop a sad Toast message here...
        }
    } catch (Exception e) {
        Log.e("", String.valueOf(e));
    }
} 
```

日志猫

```
 11-14 23:17:35.734: E/Trace(900): error opening trace file: No such file or directory (2)
         11-14 23:17:38.793: D/dalvikvm(900): GC_CONCURRENT freed 251K, 4% free 8194K/8519K, paused 126ms+9ms, total 234ms
         11-14 23:17:39.895: E/(900): org.apache.http.client.HttpResponseException: Forbidden
         11-14 23:17:40.364: I/Choreographer(900): Skipped 75 frames!  The application may be doing too much work on its main thread.
         11-14 23:17:40.394: D/gralloc_goldfish(900): Emulator without GPU emulation detected.
         11-14 23:17:40.784: I/Choreographer(900): Skipped 62 frames!  The application may be doing too much work on its main thread.
         11-14 23:17:43.614: W/chromium(900): external/chromium/net/disk_cache/backend_impl.cc:1829: [1114/231743:WARNING:backend_impl.cc(1829)] Destroying invalid entry. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:20:04.620

```
I/Choreographer(900): Skipped 75 frames!  The application may be doing too much work on its main thread. 
```

始终建议使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在单独的线程而不是主线程上进行网络活动。

[这是关于连接到网络](http://developer.android.com/training/basics/network-ops/connecting.html)的android教程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:21:00.803

我尝试了您的来自 rest 插件的请求，并从服务器得到以下响应：

状态 403 禁止

```
<html>
<head><title>Dropbox - 403</title>
<link href="https://www.dropbox.com/static/css/main.css" rel="stylesheet" type="text/css">
<link rel="shortcut icon" href="/static/images/favicon.ico"/>
</head>
<body style="background-color:#fff">
<br/><br/>
<div align="center">
<table><tr><td width="600px">
<center><img id="errorimage" src="/static/images/lockbox.png"/></center>
<div id="errorbox">
<h1>Error (403)</h1>It seems you tried to do something we can't verify.  Did you log into a different Dropbox account in a different window?  Try clicking <a href="#" onclick="history.go(-1); return false;">here</a> to go back to the page you came from, or just go <a href="/home">home</a>.
</div>
</td></tr></table>
</div>

</body>
</html> 
```

您用于登录的 Dropbox API 定义在哪里？

您应该尝试使用他们的其余 API 来进行以下链接中定义的集成：

[https://www.dropbox.com/developers/reference/api](https://www.dropbox.com/developers/reference/api)

EDIT1：dropbx 也有可供您使用的移动平台的 sdk。检查[此链接](https://www.dropbox.com/developers/reference/sdk)以获取 SDK。

EDIT2：刚刚检查了保管箱的登录页面。以下是登录表单中的相关 HTML：

```
<form action="https://www.dropbox.com/login" method="post"><input type="hidden" name="t" value="Hch4dxqGBwUN024pIuQbsxUQ" /><div class="sick-input small"><label for="login_email_elm">Email</label><input type="text" id="login_email_elm" name="login_email" tabindex="1" /></div><div class="sick-input small"><label for="login_password_elm">Password</label><input type="password" id="login_password_elm" name="login_password" tabindex="2" /></div><p style="margin-bottom: 0.5em; line-height: 28px;"><input style="vertical-align: middle; margin-left: 0;" name="remember_me" class="no-border" type="checkbox" id="remember_me" tabindex="3" /><label style="vertical-align: middle; cursor: pointer; " for="remember_me">Remember me</label><input tabindex="4" type="submit" class="freshbutton-blue" value="Sign in" id="toplogin-submit" /><input type="hidden" name="cont" value="https://www.dropbox.com/" /></p><p class="create-account"><a href="/register" id="login-create-an-account">Create an account</a></p></form> 
```

它有两个带有自动生成值的隐藏参数`t`，我猜 Dropbox 使用它来阻止人们使用它来解释你使用它的原因。另一个是具有`cont`硬编码价值的`https://www.dropbox.com/`

任何方式我都尝试了这两个参数的请求，并且能够获得成功响应。以下是我使用 chrome 的其余插件的请求和响应的详细信息：

请求 URI：`https://www.dropbox.com/login`

请求内容类型：application/x-www-form-urlencoded

请求发布数据：

> login_email=bscscomsats@gmail.com&login_password=yourpassword&t=Hch4dxqGBwUN024pIuQbsxUQ&cont=https://www.dropbox.com/

回应：`To:https://www.dropbox.com/ with status: 302`

响应标头：

```
Server: nginx/1.2.3 
Date: Wed, 14 Nov 2012 18:29:36 GMT 
Content-Type: text/html; charset=utf-8 
Transfer-Encoding: chunked 
Connection: keep-alive
set-cookie: lid=AACt_twZtlN8Tz7TDINxpJFUFvG44oy3YAKZ7ht0umJMxA; Domain=www.dropbox.com; Path=/; secure; httponly
set-cookie: forumjar=eyJ2ZXJpZmllZCI6IDAsICJ1aWQiOiAxMjEwMjcwODYsICJleHBpcmVzIjogMTM1MzAwNDE3NiwgInBhaWQiOiAwLCAibG5hbWUiOiAiQ2xvdWRldHMiLCAiZm5hbWUiOiAiUG9ja2V0IiwgImRpc3BsYXlfbmFtZSI6ICJQb2NrZXQgQ2xvdWRldHMiLCAiZW1haWwiOiAiYnNjc2NvbXNhdHNAZ21haWwuY29tIn0%3D; Domain=dropbox.com; Path=/; httponly
set-cookie: blid=AACUWWo4_oPc00S7cf-xtgZ8dkkXXIkiyP8uQazNqQXjXw; Domain=dropbox.com; Path=/; secure; httponly
set-cookie: oscar=; Domain=www.dropbox.com; expires=Wed, 14-Nov-2012 18:29:36 GMT; Path=/; httponly
set-cookie: jar=W3sidWlkIjogMTIxMDI3MDg2LCAiaCI6ICJBQUNiSHJrUElzeWtiYUltak5MZWVnWE52OGYtRmxtZXJubXVXc0xnbnRlallRIiwgImV4cGlyZXMiOiAxMzUzMDA0MTc2LCAibnMiOiAxOTU2NzYxNjcsICJyZW1lbWJlciI6IGZhbHNlfV0%3D; Domain=www.dropbox.com; Path=/; secure; httponly
set-cookie: checkpoint=; Domain=www.dropbox.com; expires=Wed, 14-Nov-2012 18:29:36 GMT; Max-Age=0; Path=/; httponly
set-cookie: t=vmmVuSRbO6xqVJTJ9meSJVkf; Domain=dropbox.com; expires=Fri, 14-Dec-2012 18:29:36 GMT; Path=/; secure; httponly
set-cookie: grouch=; Domain=www.dropbox.com; expires=Wed, 14-Nov-2012 18:29:36 GMT; Path=/; httponly
set-cookie: bjar=W3sic2Vzc19pZCI6IDY3MDc1MTI0NDU3NDk5NzkwMTQ3OTg2NzExOTY1Njc4MDQ1NTA1LCAiZXhwaXJlcyI6IDEzNTMwMDQxNzYsICJ1aWQiOiAxMjEwMjcwODZ9XQ%3D%3D; Domain=dropbox.com; Path=/; secure; httponly
set-cookie: forumlid=NTM1NmJmYTU0NzQ2ZjgzMTNhZDI0YWE5ZjljZjZjNzViY2IxMzliYw%3D%3D; Domain=dropbox.com; Path=/; httponly
strict-transport-security: max-age=2592000; includeSubDomains
location: https://www.dropbox.com/
pragma: no-cache
cache-control: no-cache
x-frame-options: SAMEORIGIN 
```

重定向响应：

```
Status
200 OK 
```

响应头：

```
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
Content-Type: application/x-www-form-urlencoded 
Accept: */*
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US
Accept-Charset: UTF-8,*;q=0.5
Cookie: gvc=NjcwNzUxMjQ0NTc0OTk3OTAxNDc5ODY3MTE5NjU2NzgwNDU1MDU%3D; t=Hch4dxqGBwUN024pIuQbsxUQ; __utma=74146836.1139928866.1352917086.1352917086.1352917086.1; __utmb=74146836.4.10.1352917086; __utmc=74146836; __utmz=74146836.1352917086.1.1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided) 
```

可以在此[pastebin](http://pastebin.com/BkTRP7Rw)链接中找到响应数据。

因此，由于`t`登录表单中的参数值是由 Dropbox 自动生成的，而且我肯定会在几分钟后过期，所以我建议不要使用这种方法进行登录。

# php - 使用来自数据库的 php 变量用于 JavaScript？

> ID：13384716
> 
> 赞同：1
> 
> 时间：2012-11-14T18:12:20.173
> 
> 标签：php, javascript, database, function

我有个问题。我从数据库中得到一个变量，我们称之为车牌号：

```
$data = mysql_fetch_array($result); 
```

然后查看车号：

```
echo $data["carnumber"]; 
```

现在我需要这个带有for循环的javascript函数中的车号：

```
function example(text){
var mdstring ="";
var i=0;
var s;
var carnr = **"**<?php echo $data["carnumber"];?>**"**;
for(i=0;i<carnr;i++){
      //run MD5
}
s=plain;
return s;
} 
```

但是这个例子不起作用。带引号（强）或不带引号。那么我该如何解决这个错误，我可以在 javascript 函数中使用我的 $data["carnumber"] 呢？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:13:40.497

使用 json_encode：

```
var carnr = <?php echo json_encode($data['carnumber']); ?>; 
```

它将获取您的本机 php 数据并将其转换为语法上有效的 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:38:03.553

这里的问题是这`$data`是一个 PHP 变量。您正在尝试通过 JavaScript 访问它。与在服务器 (PHP) 上处理页面创建的内容和在客户端 (JavaScript) 上发生的事情没有直接联系。

如果需要动态访问数据，则需要再次查询服务器，专门询问`$data`.

考虑看一下`jQuery`，它是一个简单的框架，允许您[调用 ajax()](http://api.jquery.com/jQuery.ajax/)并通过 JavaScript 从服务器获取新值。

# ruby-on-rails - PG之类的查询不起作用

> ID：13384720
> 
> 赞同：0
> 
> 时间：2012-11-14T18:12:26.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, heroku

所以我在我的博客应用程序中建立了一个搜索。我的开发环境在我的本地主机上运行 mysql2。以下代码在开发环境中完美运行：

```
class SearchController < ApplicationController

def index
 if params[:s]== ""
   #do nothing
 elsif params[:s]== "all posts"
   @posts = Post.page(params[:page]).per_page(7).order("id DESC").all
 else
   @posts = Post.page(params[:page]).per_page(7).order("id DESC").find(:all, :conditions=> ["title like ?", "%"+params[:s] + "%"])
 end
end 
```

但是当我推送到使用 PG 的 Heroku 时，它不再起作用。有什么我需要改变的东西`@posts = Post.page(params[:page]).per_page(7).order("id DESC").find(:all, :conditions=> ["title like ?", "%"+params[:s] + "%"])`才能让它在 pg 中工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T19:04:25.097

您的第一个错误是您在开发和生产环境中使用不同的数据库。这是一个非常糟糕的主意，尤其是当其中一个数据库像 MySQL 一样草率而另一个像 PostgreSQL 一样严格时。不要对自己这样做，如果要在 PostgreSQL 之上部署，请在开发环境中设置 PostgreSQL，并确保在两个环境中使用相同的 PostgreSQL 版本。

您的第二个错误与您的第一个错误有关：[MySQL`LIKE`](http://dev.mysql.com/doc/refman/5.5/en/string-comparison-functions.html#operator_like)通常不区分大小写：

> 以下两个语句说明字符串比较不区分大小写，除非操作数之一是二进制字符串：
> 
> ```
> mysql> SELECT 'abc' LIKE 'ABC';
>         -> 1
> mysql> SELECT 'abc' LIKE BINARY 'ABC';
>         -> 0 
> ```

但 PostgreSQL 区分大小写并提供[`ILIKE`不区分大小写的匹配](http://www.postgresql.org/docs/current/interactive/functions-matching.html#FUNCTIONS-LIKE)：

> `ILIKE`根据活动区域设置，可以使用关键字而不是`LIKE`使匹配不区分大小写。

所以你想使用

```
Page.where('title ilike ?', "%#{params[:s]}%")... 
```

与 PostgreSQL。而且，如果您希望两者的工作方式或多或少相同，则可以手动降低所有内容：

```
Page.where('lower(title) like lower(?)', "%#{params[:s]}%")... 
```

不过，您可能想研究一个全文搜索系统，LIKE 查询通常只是创建表扫描的一种简单方法，没有人喜欢表扫描。

# javascript - Fancybox2 不工作

> ID：13384721
> 
> 赞同：-1
> 
> 时间：2012-11-14T18:12:27.807
> 
> 标签：javascript, jquery, fancybox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:33:09.687

我不得不不同意@DavidMuller ...问题不在于`lorempixel.com`服务。`type`真正的问题是，fancybox 无法从 url 中找出内容

```
<a class="fancybox" rel="group" href="http://lorempixel.com/1000/500/"><img src="http://lorempixel.com/500/250/" alt="" /></a>​ 
```

...因为它没有图像扩展名（或者`jpg`，`png`或`gif`）所以你必须告诉它是一个`image`.

您有不同的选项来设置`type`内容

1）。使用`type`API 选项

```
$(document).ready(function() {
    $(".fancybox").fancybox({
        type: "image"
    });
});​ 
```

**[JSFIDDLE](http://jsfiddle.net/y6ktT/)**

2）。使用`data-fancybox-type`(HTML5) 属性

```
<a class="fancybox" data-fancybox-type="image" rel="group" href="http://lorempixel.com/1000/500/"><img src="http://lorempixel.com/500/250/" alt="" /></a>​ 
```

**[JSFIDDLE](http://jsfiddle.net/Vf9UN/1/)**

有关更多信息，请查看[http://fancyapps.com/fancybox/#support](http://fancyapps.com/fancybox/#support)常见问题选项卡，第 5 号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:31:48.167

**<更新>**

正如 JFK 在他的回答中所说，问题在于 fancybox 无法确定内容类型，因为 lorempixel-url 上没有扩展名。

**</更新>**

呼，我花了很长时间才弄清楚这一点。问题确实是“lorempixel.com”服务。我已将小提琴更新为“真实”图像，瞧 ;)。

```
<a class="fancybox" rel="group" href="http://farm9.staticflickr.com/8434/7786420744_8a1f692248_c.jpg"><img src="http://lorempixel.com/500/250/" alt="" /></a>
<a class="fancybox" rel="group" href="http://farm9.staticflickr.com/8434/7786420744_8a1f692248_c.jpg"><img src="http://lorempixel.com/500/250/" alt="" /></a> 
```

​</p>

[http://jsfiddle.net/mnuRw/3/](http://jsfiddle.net/mnuRw/3/)

# asp.net-mvc-3 - MVC3 中的参数无效

> ID：13384728
> 
> 赞同：1
> 
> 时间：2012-11-14T18:12:50.270
> 
> 标签：asp.net-mvc-3, invalid-argument

我无法编译此代码。我是 MVC/Stackoverflow/programming 的新手，并试图按照教程进行操作。此外，我尝试查找一些东西并看到一些具有 Nullable 值的选项，但运气不佳。

```
public class ReviewsController : Controller
{
    OdeToFoodDB _db = new OdeToFoodDB();
    //
    // GET: /Reviews/

    //default action
    public ActionResult Index()
    {
        var model = _db.Reviews.FindTheLatest(3);
        return View(model);
    } 
```

这是 FindTheLatest 的定义

```
public static IEnumerable<RestaurantReview> FindTheLatest(this IList<RestaurantReview>        
reviews, int numberOfReviews)
    {
        return reviews.OrderByDescending(r => r.Created)
                      .Take(numberOfReviews);
   } 
```

如果需要，这也是 OdeToFood 的定义。

```
namespace OdeToFood.Models
{
public class OdeToFoodDB : DbContext
{
    public DbSet<Restaurant> Restaurants { get; set; }
    public DbSet<RestaurantReview> Reviews { get; set; }
}
} 
```

我收到一条错误消息：“System.Data.Entity.DbSet”不包含“FindTheLatest”的定义和最佳扩展方法重载“OdeToFood.Queries.RestaurantReviewQueries.FindTheLatest(System.Collections.Generic.IList, int) ' 有一些无效的参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:16:08.803

将扩展方法更改为 use ，这是和`IEnumerable<T>`共享的通用基本类型：`DbSet<T>``List<T>`

```
public static IEnumerable<RestaurantReview> FindTheLatest(
           this IEnumerable<RestaurantReview> reviews, int numberOfReviews) 
```

# php - I need a vertical display of a row using php

> ID：13384729
> 
> 赞同：0
> 
> 时间：2012-11-14T18:13:00.520
> 
> 标签：php, mysql

At the command window I can get a **vertical** display just by adding \G to the end of the query. SELECT * FROM members WHERE member_id = '1234567'\G; I've tried replicating the same thing from php but it isn't working. Can this be done?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:15:46.847

`\G`是 mySQL CLI 程序中的一个功能，而不是 mysql 本身。您将不得不编写一个循环来执行此操作。

# c - Multibyte Integers Variables in C

> ID：13384731
> 
> 赞同：3
> 
> 时间：2012-11-14T18:13:05.917
> 
> 标签：c, ascii

I'd like to know, how to calculate integer values of strings in single quotes `' '`.

My sample code is:

```
#include <stdio.h>

int main()
{
    int c = 'aA';
    int d = 'Aa';

    printf( "%d %d" , c, d);

    return 0;
} 
```

And the output is:

```
24897 16737 
```

What are those numbers? Is there any formula to calculate them ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:16:26.803

这些是：

1.  **不是字符串！**

2.  多字节整数，其值由实现定义，但通常使用以下公式计算：

    `integer value of 1st character multiplied by (2 << CHAR_BITS) + integer value of 2nd character`

因此，假设您的 C 语言环境使用 ASCII 并且您有 8 位字节，`'aA'`则变为

```
97 * 256 + 65 
```

这是24897。

多字符文字属于`int`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:16:30.317

它是存储在变量中的多字符字符的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T18:24:02.083

The value of a multi-character constant is implementation-defined.

> **§ 6.4.4.4 Character constants**
> The value of an integer character constant containing more than one character (e.g., `'ab'`), or containing a character or escape sequence that does not map to a single-byte execution character, is implementation-defined.

# java - Java：使用 String.indexOf() 检查撇号字符

> ID：13384736
> 
> 赞同：1
> 
> 时间：2012-11-14T18:13:14.960
> 
> 标签：java

我正在尝试解析一个字符串，我需要使用子字符串来完成它。该字符串包含撇号字符。我的问题是，如何使用 temp 获取 String.indexOf 来获取撇号字符的索引？

```
//temp variable currently contains the string 'hello' including the apostrophe character
String finalWord = temp.substring(temp.indexOf('''), temp.indexOf('.')); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T18:14:47.343

您的变量名错误（`final`是保留字），您应该使用转义字符：

```
String finalword = temp.substring(temp.indexOf('\''), temp.indexOf('.')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:18:23.600

根据您的最后一条评论，该评论声明了您*实际*尝试做的事情......

有一个简单的单行解决方案可以从输入中提取每个用撇号引用的字符串：

```
String[] quotedStrings = input.replaceAll("^.*?'|'[^']*$", "").split("'.*?('|$)"); 
```

下面是一些测试代码：

```
public static void main(String[] args) {
    String input = "xxx'foo'xxx'bar'xxx'baz'xxx";
    String[] quotedStrings = input.replaceAll("^.*?'|'[^']*$", "").split("'.*?('|$)");
    System.out.println(Arrays.toString(quotedStrings));
} 
```

输出：

```
[foo, bar, baz] 
```

# language-agnostic - 有没有更简洁的方法来构建这些条件？

> ID：13384737
> 
> 赞同：0
> 
> 时间：2012-11-14T18:13:17.003
> 
> 标签：language-agnostic, if-statement

这只是关于条件的基本编程问题`if`。假设我有这样的事情：

```
if(a == 1 || a == 2 || a == 3)
{
   var $myvar = 10;
   // do stuff if the value of a is either 1, 2 or 3
}

if(a == 1)
{
   var total = $myvar + 1;
   // do stuff if the value of a is 1
}

if(a == 2 || a == 3)
{
   var total = $myvar + 1;
   // do stuff if the value of a is either 2 or 3
} 
```

很清楚我在上面的代码中要做什么。如您所见，我们在这里有一些常见的条件（例如，`a == 1`在 3 个条件中的 2 个中是常见的）。另外，请注意我有一个变量，我只想在其他两个条件下访问它`$myvar`时才声明它。`a == 1 || a == 2 || a == 3`任何人都可以想到另一种（可能更清洁）的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T18:16:08.087

```
if(a == 1 || a == 2 || a == 3)
{
   var $myvar = 10;
   // do stuff if the value of a is either 1, 2 or 3
  if(a == 1)
  {
     var total = $myvar + 1;
     // do stuff if the value of a is 1
  }
  else
  {
     var total = $myvar + 1;
     // do stuff if the value of a is either 2 or 3
  }

} 
```

或者更好

```
if(a == 1 || a == 2 || a == 3)
{
   var $myvar = 10;
   // do stuff if the value of a is either 1, 2 or 3
   var total = $myvar + 1;

  if(a == 1)
  {
     // do stuff if the value of a is 1
  }
  else
  {
     // do stuff if the value of a is either 2 or 3
  }

} 
```

两者之间的差异很小，如果它使代码更清晰，您可能会使用第一个 - 此外，某些语言会根据变量的声明位置更改变量的范围，这可能会影响您的使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:18:01.550

在不知道具体要求的情况下，您确实不需要做太多的事情来改进它。

根据您的要求：

你可以试试switch语句

```
switch(a)
{
    case 1:
    case 2:
    case 3:
        //logic for if a is 1, 2, or 3
    break;
    default:
        //if a is something else
    break;
} 
```

和

```
if(a == 2 || a == 3) 
```

可以改为

```
else if(a == 2 || a == 3) 
```

但这主要是装饰性的，对运行时的影响很小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:16:56.570

您可以尝试以下方法：

```
if(a == 1 || a == 2 || a == 3)
{
   var $myvar = 10;
   // do stuff if the value of a is either 1, 2 or 3

   if(a == 1)
    {
       var total = $myvar + 1;
       // do stuff if the value of a is 1
    }

    if(a == 2 || a == 3)
    {
       var total = $myvar + 1;
       // do stuff if the value of a is either 2 or 3
    }
} 
```

这样，`$myvar`外部 if 块内的所有内容都可以访问该变量。我不完全确定 PHP 的范围规则，但在 c++（该语言最初是用它标记的）中，`$myvar`将无法在 if 块之外访问。

但是，在 Javascript 中，由于其范围规则，仍然`$myvar` *可以*在 if 块之外访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:30:43.420

倒着做：

```
if (a < 1 || a > 3)
{ 
   return;
}
else
{
   var $myvar = 10;
   if (a == 1)
   {
      var total = $myvar + 1;
      // do a == 1 stuff 
   }
   else
   {
      total = $myvar + 1;
      // do a == 2 or a == 3 stuff
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T18:20:17.257

```
var $myvar=0,total=0;
switch(a){
    case 1:
    case 2:
    case 3:
        $myvar = 10;
    case 1:
        total =$myvar + 1;
        break;
    case 2:
    case 3:
        total = $myvar + 1;
        break;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T18:21:40.180

```
switch (a){
    case 1:
         do stuff;
         //DONOTBREAK HERE
    case 2:
    case 3:
         if(a== 2 || a == 3){
              //do stuff exclusive to 2 and 3
         }
         //do stuff universal to 1,2,3
         break;
    default:
       //failing case
} 
```

# php - 'php-mobile-detect' 和 if 语句的一些问题

> ID：13384739
> 
> 赞同：0
> 
> 时间：2012-11-14T18:13:23.950
> 
> 标签：php, mobile, if-statement

我正在使用一个名为[php-mobile detect](http://code.google.com/p/php-mobile-detect/)的小脚本来识别正在使用的设备，从而使下载页面更加友好。

我正在使用的代码有一些问题。在计算机上运行此程序时，会输出所需的值，但是，当访问移动设备上的代码时（我可以使用的设备是 iPhone），我收到一个 PHP 错误，指出`$deviceType`未定义。我有一种强烈的感觉，我在声明中做错了什么`if`。

```
<?php
require_once 'Mobile_Detect.php';
$detect = new Mobile_Detect;
//Detect Platform
if($detect->isMobile()):

    if($detect->isPhone()):
        if($detect->isiPhone()):
            $deviceType = 'iPhone';
        elseif($detect->isAndroid()):
            $deviceType = 'Android Phone';
        elseif($detect->isWindowsPhoneOS()):
            $deviceType = 'Windows Phone';
        elseif($detect->isGenericPhone()):
            $deviceType = 'Phone';

    endif;//End if Phone

    elseif($detect->isTablet()):
        if($detect->isiPad()):
            $deviceType = 'iPad';
        elseif($detect->isAndroid()):
            $deviceType = 'Android Tablet';
        elseif($detect->isKindle()):
            $deviceType = 'Kindle';
        elseif($detect->isGenericTablet()):
            $deviceType = 'Tablet';
    endif;//End ifTablet

endif;//End ifMobile

//If not mobile it must be a computer
else:
    $deviceType = 'computer';
endif;// End Detect Platform

?>

<p>This is a <b><?php echo $deviceType; ?> 
```

任何帮助将不胜感激。

问候，

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:49:44.997

`$deviceType`（显然）在您使用 iPhone 时没有设置。消除错误的一种方法是`$deviceType`在顶部声明。不过，这并不能完全解决您的问题（您的 iPhone 仍未被检测到）。

查看 Mobile-Detect 的文档，我看不到`isPhone()`任何地方。这是一个真正的功能吗？

--

（可能）与您的问题无关，但您可能还想`else`在每组 if/else 之后添加一个通用语句，以捕获任何情况，无论出于何种原因，不满足`isGenericPhone()`or `isGenericTablet()`。事实上，我会摆脱那些并只使用`else`.

顺便说一句，替代 if/else 语法很烦人，并且使代码难以阅读。

# extjs - extjs 面板的可拖动事件

> ID：13384740
> 
> 赞同：0
> 
> 时间：2012-11-14T18:13:29.040
> 
> 标签：extjs, extjs4, panel, draggable, extjs4.1

当我使给定的面板“可拖动”时，是否有一个拖动结束事件的侦听器？我发现我可以通过在其初始配置中启用“可拖动”属性来使面板在另一个面板内可拖动，但我想在拖动发生时捕获事件。查看文档，我发现我可以添加像“load”这样的监听器，但我没有看到我可以监听的所有受支持事件的列表。这可以在配置中处理还是应该使用 addListener()？无论哪种方式，语法是什么，我如何使用文档来解决这个问题？每次我的可拖动面板围绕其容器移动时，我都希望能够触发一个函数。谢谢。

```
var panel = Ext.create('Ext.tree.Panel', {
     draggable: true,
     width: 200,
     height: 200,
}); 
```

我希望我能做这样的事情......

```
var panel = Ext.create('Ext.tree.Panel', {
    draggable: true,
    width: 200,
    height: 200,
    listeners: {            
       dragging: function(e) { 
           // being dragged
       },
       dropped: function(e) { 
           // dropped
       },
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:08:50.377

在这种情况下，您不会对听众这样做。您可以覆盖四种模板方法

*   **[onBeforeStart](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.ComponentDragger-method-onBeforeStart)**
*   **[拖动](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.ComponentDragger-method-onDrag)**
*   **[结束](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.ComponentDragger-method-onEnd)**
*   **[开始](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.ComponentDragger-method-onStart)**

所以你可以这样做：

```
var panel = Ext.create('Ext.tree.Panel', {
     draggable: {
         onDrag: function(e) {
              // do what you like
         },
         onEnd: function(e) {
              // do what you like
         }
     },
     width: 200,
     height: 200,
}); 
```

注意参数**[e](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.EventObject)**是事件对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T21:53:19.960

我正在尝试`Ext.window.Window`在拖动开始之前修改 a 上的组件，并在 sencha 论坛中发现一个`draggable`窗口监听`dragstart`事件，也许它也可以与 a 一起使用`Panel`。

我使用了这段代码：

```
listeners: {
    dragstart: function() {
        console.log('we are starting the drag');
    }
} 
```

并且像魅力一样工作。在我的应用程序中工作，使用 Ext JS 4.1.0

对于拖尾，我发现该`move`事件`Ext.window.Window`适合需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-22T14:14:22.957

要在 Ext.panel.Panel 中使用 dragstart 侦听器，您需要设置 simpleDrag: true。

但是当 simpleDrag 处于活动状态时，您不能放下，只需将面板作为窗口拖动/移动。

# c# - 缺少滑块控件？

> ID：13384741
> 
> 赞同：2
> 
> 时间：2012-11-14T18:13:30.247
> 
> 标签：c#, winforms, controls

我有一个奇怪的问题。我过去在我的 C# 中使用过 Slider 控件，但现在它不见了。我在引用列表中找不到 System.Windows.Controls，当我尝试添加它时，它不会显示在“.NET”选项卡中。它更奇怪，因为我认为没有任何其他控件丢失。如何恢复 Slider 控件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T19:22:00.670

You can try this:

1.  Right click on the Toolbox and select "Choose Items..." from the context menu.
2.  In the ".NET Framework Components" tab, check if TrackBar is selected.

![enter image description here](../Images/9084c9ac7b48cbec1e52ae7a66a4442f.png)

And if is not selected, you should select it.

MSDN link:

WinForms TrackBar:

[http://msdn.microsoft.com/en-us/library/system.windows.forms.trackbar(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.trackbar%28v=vs.100%29.aspx)

# jms - 带有 WebSphere MQ v7 的 WebSphere Application Server V7 中的 rollback()

> ID：13384742
> 
> 赞同：1
> 
> 时间：2012-11-14T18:13:35.427
> 
> 标签：jms, ibm-mq, websphere-7, ibm-was

我在事务回滚中遇到问题（无法将消息推回原始队列）。

部署在 WAS v7 中的 MDB（容器管理 TX）正在侦听 WebSphere MQ v7 中配置的远程队列。

当我标记 MessageDrivenContext.setRollbackOnly() 时，我可以在 ffdc WAS 日志中看到以下详细信息

com.ibm.websphere.csi.CSITransactionRolledbackException：事务在 com.ibm.ejs.csi.TransactionControlImpl.postInvoke(TransactionControlImpl.java:561) 的 com.ibm.ejs.csi.TranStrategy.postInvoke(TranStrategy.java:222) 标记为 rollbackonly ）在 com.ibm.ejs.container.EJSContainer.postInvoke(EJSContainer.java:4512) 在 com.ibm.ejs.container.MDBWrapper.onMessage(MDBWrapper.java:107) 在 com.ibm.ejs.container.MDBWrapper。 onMessage(MDBWrapper.java:132) 在 com.ibm.ejs.jms.listener.ServerSession.run(ServerSession.java:496) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1527)

看起来事务正在成功回滚，但我无法在队列中看到相同的消息。（队列为空/消息已删除）。

有人能告诉我如何将消息保留在队列中并再次处理吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:26:35.843

我发现回滚的消息放在 SYSTEM.DEAD.LETTER.QUEUE 中。

我检查了 websphere mq 队列管理器的以下属性

1) BOTHRESH(5)
2) BOQNAME（错误队列名称）。

即使在回退计数达到最大值 BOTHRESH 之前，消息也会被放置在默认队列中，而不是配置的错误队列中。

有人可以告诉配置中有什么问题吗？

# android - vustom SimpeCursorAdapter 中错误组件上的 ViewHolder

> ID：13384745
> 
> 赞同：0
> 
> 时间：2012-11-14T18:13:35.607
> 
> 标签：android, button, simplecursoradapter

我在 DialogFragment 中有一个自定义 SimpleCursorAdapter，我无法理解 setTag 和 getTag 的使用。从我的 LogCat 输出来看，我似乎在 LinearLayout 上设置标签并试图从 Button 中检索标签。如何定位正确的组件以访问 ClickListener 中的标签？

```
 @Override
    public View getView(final int position, View convertView, final ViewGroup parent) {
        if (mCursor.moveToPosition(position)) {
            ViewHolder holder;
            final String label;
            final int label_index = mCursor.getColumnIndex(ProfilesColumns.USERNAME);
            label = mCursor.getString(label_index);

            if (convertView == null) {
                convertView = mInflater.inflate(layout, null);

                holder = new ViewHolder();
                holder.name = (Button) convertView.findViewById(R.id.title);
                holder.logout = (Button) convertView.findViewById(R.id.logout);
                holder.id = getItemId(position);
                convertView.setTag(holder);
                Log.d(DEBUG_TAG, "getView view " + convertView);//Returns LinearLayout
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.logout.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(final View v) {
                    ViewHolder holder;
                    if (v == null) {
                        Log.d(DEBUG_TAG, "logout view null ");
                    } else {
                        Log.d(DEBUG_TAG, "logout view " + v);//Returns Button
                        holder = (ViewHolder) v.getTag();
                        if (holder == null) {
                            Log.d(DEBUG_TAG, "logout holder null ");
                        } else {
                            Log.d(DEBUG_TAG, "logout holder.id   " + holder.id);
                            String[] argument = { "" + holder.id };
                            ContentResolver cr = getActivity().getContentResolver();
                            int count = cr.delete(ProfileProvider.URI_LOADEDPROFILETABLE, CommonDatabaseHelper._ID
                                    + "=?", argument);
                            Log.d(DEBUG_TAG, "logout count       " + count);
                        }
                    }
                }
            });
        }
        return convertView;

    } 
```

这是布局，profileselect_list_item：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:padding="0dp" >

<Button
    android:id="@+id/title"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1" />

<Button
    android:id="@+id/logout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/logout" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:20:19.560

简短的回答是您没有`setTag()`在按钮上使用过，您只在其父级 LinearLayout 上使用过它。所以在你的 OnClickListener 里面改变这个：

```
holder = (ViewHolder) v.getTag(); 
```

至：

```
holder = (ViewHolder) ((View) v.getParent()).getTag(); 
```

还有这一行：

```
holder.id = getItemId(position); 
```

每行都会发生变化，而 OnClickListener 不会。您应该将上面的行移到*外面*`if(convertView == null)`并将 OnClickListener 移到*里面*。

* * *

**更长的答案**
你正在扩展一个 CursorAdapter，它们有三个很棒的方法`newView()`，`bindView()`和`getView()`。

*   `newView()`创建新视图。覆盖此方法并将所有`if(convertView == null) { ... }`代码移至此处。

*   `bindView()`可以直接访问光标。似乎 SimpleCursorAdapter 的默认方法会为您解决这个问题......

*   覆盖`getView()`并不总是必要的，因为 和`newView()`令人敬畏`bindView()`。

# magento - Memcached 在 Magento 中不工作

> ID：13384747
> 
> 赞同：1
> 
> 时间：2012-11-14T18:13:37.997
> 
> 标签：magento, session, caching, memcached, scalr

我使用 Scalr.net 在 AWS 上设置了一个集群。我正在运行 Magento CE 1.7：

*   1 Nginx 负载均衡服务器
*   2 Apache Web 服务器
*   1 个数据库服务器
*   1 个 Memcached 服务器

目的是在 memcached 服务器上存储文件缓存和会话缓存。我已经这样设置了magento local.xml：

```
<session_save><![CDATA[memcache]]></session_save>
<session_save_path><![CDATA[tcp://XX.XX.XX.XX:11211?persistent=1&weight=2&timeout=10&retry_interval=10]]></session_save_path>
<session_cache_limiter><![CDATA[]]></session_cache_limiter>
<cache>
        <backend>memcached</backend>
        <slow_backend>database</slow_backend>
        <slow_backend_store_data><![CDATA[]]></slow_backend_store_data>
        <auto_refresh_fast_cache><![CDATA[]]></auto_refresh_fast_cache>
        <lifetime>259200</lifetime>
    <backend_options>
    <servers>
    <server>
        <host><![CDATA[XX.XX.XX.XX]]></host>
        <port><![CDATA[11211]]></port>
        <persistent><![CDATA[0]]></persistent>
        <weight><![CDATA[2]]></weight>
        <timeout><![CDATA[10]]></timeout>
        <retry_interval><![CDATA[10]]></retry_interval>
        <status><![CDATA[1]]></status>
    </server>
    </servers>
        <compression><![CDATA[0]]></compression>
    </backend_options>
</cache> 
```

但 Memcached 无法正常工作。这是我的统计数据：

```
root@ec2-XX.XX.XX.XX:~# telnet ip-XX.XX.XX.XX 11211
Trying XX.XX.XX.XX...
Connected to ip-XX.XX.XX.XX.ec2.internal.
Escape character is '^]'.
stats
STAT pid 1086
STAT uptime 79364
STAT time 1352912987
STAT version 1.4.2
STAT pointer_size 64
STAT rusage_user 2.340000
STAT rusage_system 0.000000
STAT curr_connections 5
STAT total_connections 11
STAT connection_structures 6
STAT cmd_get 0
STAT cmd_set 0
STAT cmd_flush 0
STAT get_hits 0
STAT get_misses 0
STAT delete_misses 0
STAT delete_hits 0
STAT incr_misses 0
STAT incr_hits 0
STAT decr_misses 0
STAT decr_hits 0
STAT cas_misses 0
STAT cas_hits 0
STAT cas_badval 0
STAT bytes_read 28
STAT bytes_written 2194
STAT limit_maxbytes 67108864
STAT accepting_conns 1
STAT listen_disabled_num 0
STAT threads 4
STAT conn_yields 0
STAT bytes 0
STAT curr_items 0
STAT total_items 0
STAT evictions 0
END 
```

此外，该网站会引发以下错误：

```
a:4:{i:0;s:29:"cache_dir must be a directory";i:1;s:1097:"#0 /var/www/includes/src/Zend_Cache_Backend_File.php(154): Zend_Cache::throwException('cache_dir must ...')
#1 /var/www/includes/src/Zend_Cache_Backend_File.php(121): Zend_Cache_Backend_File->setCacheDir('')
#2 /var/www/includes/src/__default.php(60504): Zend_Cache_Backend_File->__construct(Array)
#3 /var/www/includes/src/__default.php(60445): Zend_Cache::_makeBackend('File', Array, true, true)
#4 /var/www/includes/src/Mage_Core_Model_Cache.php(124): Zend_Cache::factory('Varien_Cache_Co...', 'File', Array, Array, true, true, true)
#5 /var/www/includes/src/__default.php(23463): Mage_Core_Model_Cache->__construct(Array)
#6 /var/www/app/Mage.php(462): Mage_Core_Model_Config->getModelInstance('core/cache', Array)
#7 /var/www/includes/src/__default.php(20134): Mage::getModel('core/cache', Array)
#8 /var/www/includes/src/__default.php(20028): Mage_Core_Model_App->_initCache(Array)
#9 /var/www/includes/src/__default.php(20070): Mage_Core_Model_App->baseInit(Array)
#10 /var/www/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#11 /var/www/index.php(87): Mage::run('', 'store')
#12 {main}";s:3:"url";s:1:"/";s:11:"script_name";s:10:"/index.php";} 
```

如果我在后端选项中包含以下内容：

```
 <cache_dir><![CDATA[]]></cache_dir>
        <hashed_directory_level><![CDATA[]]></hashed_directory_level>
        <hashed_directory_umask><![CDATA[]]></hashed_directory_umask>
        <file_name_prefix><![CDATA[]]></file_name_prefix> 
```

对你的帮助表示感谢。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T06:55:54.603

我的 local.xml`<memcache>`里面有一个部分，`<cache>`并且`<backend>Memcached</backend>`大写：

```
 ...
    <cache>
            <backend>Memcached</backend>
            <slow_backend>database</slow_backend>
            <backend_options>
    ...
            </backend_options>
            <memcached>
                    <servers>
                            <server>
                                    <host><![CDATA[127.0.0.1]]></host>
                                    <port><![CDATA[11211]]></port>
                                    <persistent><![CDATA[0]]></persistent>
                            </server>
                    </servers>
                    <compression><![CDATA[0]]></compression>
                    <cache_dir><![CDATA[]]></cache_dir>
                    <hashed_directory_level><![CDATA[]]></hashed_directory_level>
                    <hashed_directory_umask><![CDATA[]]></hashed_directory_umask>
                    <file_name_prefix><![CDATA[]]></file_name_prefix>
            </memcached>
    </cache>
    ... 
```

此外，您需要运行两个 memcache 实例，即使用端口 11211 进行会话，使用端口 11212 进行缓存。我有两个文件：/etc/memcache_1.conf 和 /etc/memcache_2.conf 设置这些不同的实例。这样，当您清除缓存时，它不会注销所有用户！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-22T04:06:26.137

我在我的系统中看到了这个问题。一件非常重要且容易错过的事情...如果您使用的是 memcache，则 save_path 必须具有“tcp://”前缀，如果您使用的是 memcached，则 save_path 不应具有“tcp://”前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T04:45:09.093

我有完全相同的问题，craigtadlock 建议的解决方案效果很好。这是完整的配置：

```
<session_save><![CDATA[memcached]]></session_save>
<session_save_path><![CDATA[127.0.0.1:11211?persistent=1&weight=2&timeout=10&retry_interval=10]]></session_save_path> 
```

请注意 session_save 中的值是“memcached”，而不是 local.xml.additional 中的“memcache”。

# python - 如何使用 QWebView 显示 html。Python？

> ID：13384749
> 
> 赞同：12
> 
> 时间：2012-11-14T18:13:44.193
> 
> 标签：python, pyqt, qwebview

如何在控制台中以 HTML 格式显示网页。

```
import sys
from PyQt4.QtGui import QApplication
from PyQt4.QtCore import QUrl
from PyQt4.QtWebKit import QWebView

app = QApplication(sys.argv)
view = QWebView()
view.load(QUrl('http://example.com')
# What's next? how to do something like:
# print view.read() ???
# to display something similar to that:
# <html><head></head><body></body></html> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-14T19:42:33.833

*由于 QT 是一个异步库，如果您在调用load*后立即尝试查看 webview 的 html 数据，您可能不会有任何结果，因为它会立即返回，并在结果可用时触发*loadFinished信号。**您当然可以尝试在调用load*后立即以与我在 _result_available 方法中相同的方式访问 html 数据，但它会返回一个空页面（这是默认行为）。

```
import sys
from PyQt4.QtGui import QApplication
from PyQt4.QtCore import QUrl
from PyQt4.QtWebKit import QWebView

class Browser(QWebView):

    def __init__(self):
        QWebView.__init__(self)
        self.loadFinished.connect(self._result_available)

    def _result_available(self, ok):
        frame = self.page().mainFrame()
        print unicode(frame.toHtml()).encode('utf-8')

if __name__ == '__main__':
    app = QApplication(sys.argv)
    view = Browser()
    view.load(QUrl('http://www.google.com'))
    app.exec_() 
```

# c# - 粘贴到系统中任意位置的光标位置

> ID：13384753
> 
> 赞同：0
> 
> 时间：2012-11-14T18:13:56.223
> 
> 标签：c#, visual-studio, paste

我希望能够在桌面上的任何位置“粘贴”文本。因此，如果我在使用 word doc 或任何其他可以使用粘贴命令并按 F5 的程序工作，则会弹出一个表单并从预格式化的文本切片列表（我已经为此准备了键盘挂钩）我遇到问题的部分是如何让程序将预格式化的文本粘贴到选择器弹出之前光标所在的位置。

提前感谢您的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:28:17.440

最简单的方法是注册一个全局/系统热键。我建议尽管有一些独特的组合，因为很多程序只使用 F5 来执行功能（即浏览器刷新、Visual Studio 构建等）

查看本教程： [http ://www.dreamincode.net/forums/topic/180436-global-hotkeys/](http://www.dreamincode.net/forums/topic/180436-global-hotkeys/)

您还需要在触发事件时跟踪当前窗口，然后将内容粘贴到该窗口，要进行实际粘贴，请查看：http: [//blogs.msdn.com/b/bill/archive /2012/06/09/programmatically-paste-clipboard-text-to-a-cmd-window-c-or-c.aspx](http://blogs.msdn.com/b/bill/archive/2012/06/09/programmatically-paste-clipboard-text-to-a-cmd-window-c-or-c.aspx)

# c# - 字节数组到显示的图像

> ID：13384754
> 
> 赞同：0
> 
> 时间：2012-11-14T18:13:58.207
> 
> 标签：c#, image

您好我正在尝试从数据库中获取字节数组并将其转换为可用于在我的 .aspx 页面中显示来自数据库的图像的东西。我正在使用严格的 c#。

这是我的代码。

```
SqlCommand picCommand = connection.CreateCommand();
picCommand.CommandText = ("SELECT ItemImage FROM Inventory WHERE ItemName = '" +         DropDownList1.SelectedItem.Text + "';");
connection.Open();

object returnPic; 
returnPic = picCommand.ExecuteScalar();//value that is read as the byte array or intended to be read as byte array.

    connection.Close();

    UTF8Encoding utf8 = new UTF8Encoding();
    //where i intend to convert the 
    byte[] image = utf8.GetBytes(returnPic.ToString()); 

    System.Drawing.Image myImage;

    using (MemoryStream inStream = new MemoryStream())
    {
        inStream.Write(image, 0, image.Length);

        myImage = Bitmap.FromStream(inStream);
    }

    this.ItemImageBox.Equals(myImage); 
```

代码编译并运行，但是当它执行 myImage = Bitmap.FromStream(instream) 行时，我收到此错误 System.ArgumentException: Parameter is not valid。我实际上是通过查看各种不同的来源获得了这段代码，所以也许这里有人可以告诉我我是否做错了什么。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:16:57.457

你可以尝试这样的事情，它应该适合你

```
public static Image LoadImage(byte[] imageBytes)
{
     Image image = null;
     using (var inStream = new MemoryStream(imageBytes))
     {
        image = Image.FromStream(ms);
     }
     return image;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:59:00.353

这是我必须将字节数组转换为位图的扩展方法在此示例中，我使用将数据保存到 Sql Server 2008R2 数据库

```
 protected void btnParent1Upload_Click(object sender, EventArgs e)
    {
        ScriptManager.GetCurrent(this).RegisterPostBackControl(this.btnParent1Upload);
        FileUpload FileUpload1 = file_ImageParent1;
        string virtualFolder = "~/UpImages/";
        string physicalFolder = Server.MapPath(virtualFolder);
        FileUpload1.SaveAs(physicalFolder + FileUpload1.FileName);
        lbl_ResultParent1.Text = "Your file " + FileUpload1.FileName + " has been uploaded.";
        Parent1Pic.Visible = true;
        Parent1Pic.ImageUrl = virtualFolder + FileUpload1.FileName;
        byte[] imageBytes = PopulateImageBytes(physicalFolder + FileUpload1.FileName);
        ParentsInfo.Parent1Pic = imageBytes;
        imageBytes = null;
        FileUpload1 = null;
    }

    private static byte[] PopulateImageBytes(string p)
    {
        byte[] imageBytes = File.ReadAllBytes(p);
        return imageBytes;
    } 
```

我有 StudentPic 定义如下

```
public byte[] StudentPic { get; set; } 
```

我的 SQL 参数之一定义如下

```
sqlcmd.Parameters.AddWithValue("@Picture", (object)StudentPic ?? noImage); 
```

这应该可以帮助您了解执行此操作的不同方法之一

# java - 如何生成介于 -1 和 1 之间的随机数？

> ID：13384757
> 
> 赞同：2
> 
> 时间：2012-11-14T18:14:07.197
> 
> 标签：java, arrays, random, grid, numbers

我正在尝试生成一个随机网格并表示一个空白空间、非空白空间和一个玩家所在的空间，我分别在二维数组中使用 -1、0 和 1。

我希望能够在运行时生成一个随机图并用 -1 和 0 填充网格。我该怎么做呢？

我看过一些例子，但他们很困惑：SI 知道 Java 中有一个 Random 类，但它没有我可以做类似 nextInt(-1, 1) 之类的方法，我可以在其中设置起始范围.

任何帮助都会很棒。

干杯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T18:16:22.170

`nextInt(3) -1`将为您提供所需范围内的随机整数。

将[`random.nextInt(3)`](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt%28int%29)生成一个 0/​​1/2 的随机整数，并通过减少 1 - 你得到一个相等（均匀）的概率来获得 -1/0/1 中的每一个

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T18:16:22.113

您可以使用

```
Random random = new Random();
int someInt = random.nextInt(3) - 1; 
```

# visual-studio-2010 - 标签中的服务器错误应用程序无法加载母版页标签

> ID：13384758
> 
> 赞同：0
> 
> 时间：2012-11-14T18:14:10.547
> 
> 标签：visual-studio-2010, master-pages

我有这个错误，我不知道如何修复它，母版页在那里并正确链接：

```
Server Error in '/' Application. 
```

解析器错误描述：解析服务此请求所需的资源时发生错误。请查看以下特定的解析错误详细信息并适当地修改您的源文件。

解析器错误消息：文件“/AEDMasterPage.master”不存在。

源错误：

第 1 行：<%@ Page Title="" Language="C#" MasterPageFile="~/AEDMasterPage.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %> 第 2 行：
行3：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:27:22.417

改变

```
_Default 
```

至

```
Default 
```

并确保主文件的路径正确这是文件路径无效的简单错误

# grails - 按顺序获取 Grails 域持久属性

> ID：13384763
> 
> 赞同：0
> 
> 时间：2012-11-14T18:14:28.493
> 
> 标签：grails, grails-orm, grails-2.0

是否有某种方法可以按照我在类中声明它们的相同顺序检索域类的持久属性？

```
class MyDomainClass {
  String prop1
  String prop2
  String prop3
}

def domainClass = grailsApplication.getDomainClass(MyDomainClass)
def props = domainClass.persistentProperties //this not retrieve them in order. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:56:37.707

# c++ - 我们是否应该将指向类实例的智能指针存储在大型 std::vector 中以获得更好的性能？

> ID：13384766
> 
> 赞同：6
> 
> 时间：2012-11-14T18:14:45.117
> 
> 标签：c++, performance, vector, c++11, move-semantics

当在 a 中存储*大量*自定义类的实例（不是“简单”类，例如不是 a `std::string`、不是 a`std::complex`等）时`std::vector`​​，我们应该选择一个简单的`std::vector<X>`，还是`std::vector<std::unique_ptr<X>>`更好的选择？

我写了一些基准代码（从这篇关于 C++03 的 C++11 移动语义改进的[博客文章](http://blogs.msdn.com/b/vcblog/archive/2009/06/23/stl-performance.aspx)`vector<unique_ptr<X>>`中扩展代码），它似乎为 1,500,000 项向量提供了更好的性能。事实上，在装有 Windows 7 64 位、Intel Core i5 四核 CPU 和 8 GB RAM 的 PC 上，我得到了以下结果 ( `test.exe 1500`)：

1.  `vector<unique_ptr<MyObject>>`: 1.5 秒
2.  `vector<shared_ptr<MyObject>>`: 1.6 秒
3.  `vector<MyObject>`: 1.8 秒

因此，在 C++03 中（where`std::unique_ptr`不可用），似乎最好的选择是`vector<shared_ptr<X>>`; 相反，在 C++11 中，启用移动语义`std::unique_ptr`似乎提供了最好的结果。

我在这里错过了什么吗？这是一个很好的 C++ 指南，在 big `vector`s 中存储（智能）*指向*类实例的指针比存储类实例本身更好吗？

基准代码如下：

```
////////////////////////////////////////////////////////////////////////////////
//
// Test vector<X> vs. vector<unique_ptr<X>> vs. vector<shared_ptr<X>>.
//
// Original benchmark code from:
//   http://blogs.msdn.com/b/vcblog/archive/2009/06/23/stl-performance.aspx
//
////////////////////////////////////////////////////////////////////////////////

#include <exception>    // std::invalid_argument
#include <iostream>     // std::cout
#include <memory>       // std::shared_ptr, std::unique_ptr
#include <ostream>      // std::endl
#include <stdexcept>    // std::exception
#include <string>       // std::wstring
#include <utility>      // std::move
#include <vector>       // std::vector

#include <Windows.h>    // Win32 Platform SDK (high performance counters, etc.)

using namespace std;

// Measure time.
class Stopwatch
{
public:

    Stopwatch()
        : m_start(0),
          m_finish(0)
    {
    }

    static void PerfStartup()
    {
        // to confine the test to run on a single processor 
        // in order to get consistent results for all tests.
        SetThreadAffinityMask(GetCurrentThread(), 1);
        SetThreadIdealProcessor(GetCurrentThread(), 0);
        Sleep(1);
    }

    void Start()
    {
        m_finish = 0;
        m_start = Counter();
    }

    void Stop()
    {
        m_finish = Counter();
    }

    // Elapsed time, in seconds
    double ElapsedTime() const
    {
        return (m_finish - m_start) * 1.0 / Frequency();
    }

    void Reset()
    {
        m_start = m_finish = 0;
    }

private:
    long long m_start;
    long long m_finish;

    static long long Counter() 
    {
        LARGE_INTEGER li;
        QueryPerformanceCounter(&li);
        return li.QuadPart;
    }

    static long long Frequency() 
    {
        LARGE_INTEGER li;
        QueryPerformanceFrequency(&li);
        return li.QuadPart;
    }

// Ban copy
private:
    Stopwatch(const Stopwatch&);
    Stopwatch& operator=(const Stopwatch&);
};

// Measure execution time of a block of code.
class ScopedStopwatch
{
public:

    ScopedStopwatch()
    {
        m_sw.Start();
    }

    ~ScopedStopwatch()
    {
        m_sw.Stop();
        cout << "Elapsed time: " << m_sw.ElapsedTime() << " sec" << endl;
    }

private:
    Stopwatch m_sw;

    ScopedStopwatch(const ScopedStopwatch&);
    ScopedStopwatch& operator=(const ScopedStopwatch&);
};

// User Defined Type
class MyObject
{
public:
    wstring name;
    wstring address;
    wstring telephone;
    wstring name2;
    wstring address2;
    wstring telephone2;

    // Default constructor
    MyObject()
    {
    }

    // Copy Constructor
    MyObject(const MyObject& other)
        : name(other.name),
          telephone(other.telephone),
          address(other.address),
          name2(other.name2),
          telephone2(other.telephone2),
          address2(other.address2)
    {
    }

    // Copy assignment operator
    MyObject& operator=(const MyObject& other)
    {
        if (this != &other)
        {
            name = other.name;
            telephone = other.telephone;
            address = other.address;
            name2 = other.name2;
            telephone2 = other.telephone2;
            address2 = other.address2;
        }

        return *this;
    }

    // Move constructor
    MyObject(MyObject&& other)
        : name(move(other.name)),
          telephone(move(other.telephone)),
          address(move(other.address)),
          name2(move(other.name2)),
          telephone2(move(other.telephone2)),
          address2(move(other.address2))
    {
    }

    // Move assignment operator
    MyObject& operator=(MyObject&& other)
    {
        if (this != &other)
        {
            name = move(other.name);
            telephone = move(other.telephone);
            address = move(other.address);
            name2 = move(other.name2);
            telephone2 = move(other.telephone2);
            address2 = move(other.address2);
        }

        return *this;
    }
};

MyObject MakeTestObject()
{
    MyObject obj;
    obj.name = L"Stephan T. Lavavej Stephan T. Lavavej Stephan T. Lavavej";
    obj.telephone = L"314159265 314159265 314159265 314159265 314159265";
    obj.address = L"127.0.0.0 127.0.0.0 127.0.0.0 127.0.0.0 127.0.0.0 127.0.0.0";
    obj.name2 = L"Mohammad Usman. Mohammad Usman. Mohammad Usman. ";
    obj.telephone2 = L"1234567890 1234567890 1234567890 1234567890 1234567890";
    obj.address2 = L"Republik Of mancunia. Republik Of mancunia Republik Of mancunia";

    return obj;
}

unique_ptr<MyObject> MakeUniqueTestObject()
{
    unique_ptr<MyObject> obj( new MyObject() );
    obj->name = L"Stephan T. Lavavej Stephan T. Lavavej Stephan T. Lavavej";
    obj->telephone = L"314159265 314159265 314159265 314159265 314159265";
    obj->address = L"127.0.0.0 127.0.0.0 127.0.0.0 127.0.0.0 127.0.0.0 127.0.0.0";
    obj->name2 = L"Mohammad Usman. Mohammad Usman. Mohammad Usman. ";
    obj->telephone2 = L"1234567890 1234567890 1234567890 1234567890 1234567890";
    obj->address2 = L"Republik Of mancunia. Republik Of mancunia Republik Of mancunia";

    return obj;
}

shared_ptr<MyObject> MakeSharedTestObject()

{    
    auto obj = make_shared<MyObject>();
    obj->name = L"Stephan T. Lavavej Stephan T. Lavavej Stephan T. Lavavej";
    obj->telephone = L"314159265 314159265 314159265 314159265 314159265";
    obj->address = L"127.0.0.0 127.0.0.0 127.0.0.0 127.0.0.0 127.0.0.0 127.0.0.0";
    obj->name2 = L"Mohammad Usman. Mohammad Usman. Mohammad Usman. ";
    obj->telephone2 = L"1234567890 1234567890 1234567890 1234567890 1234567890";
    obj->address2 = L"Republik Of mancunia. Republik Of mancunia Republik Of mancunia";

    return obj;
}

void Test(int count)
{
    Stopwatch::PerfStartup();

    cout << "Inserting " << count << " items in vector.\n";

    cout << "\nTesting vector<MyObject>\n";
    {
        ScopedStopwatch sw;

        vector<MyObject> v;
        for (int i = 0; i < count; i++)
        {
            v.push_back(MakeTestObject());
        }
    }

    cout << "\nTesting vector<unique_ptr<MyObject>>\n";
    {
        ScopedStopwatch sw;

        vector<unique_ptr<MyObject>> v;
        for (int i = 0; i < count; i++)
        {
            v.push_back(MakeUniqueTestObject());
        }
    }

    cout << "\nTesting vector<shared_ptr<MyObject>>\n";
    {
        ScopedStopwatch sw;

        vector<shared_ptr<MyObject>> v;
        for (int i = 0; i < count; i++)
        {
            v.push_back(MakeSharedTestObject());
        }
    }
}

int main(int argc, char * argv[])
{
    static const int kExitOk = 0;
    static const int kExitError = 1;

    try
    {
        if (argc != 2)
        {
            throw invalid_argument("Bad syntax. Pass insertion count (x 1,000).");
        }

        const int countK = atoi(argv[1]);
        Test(countK * 1000);

        return kExitOk;
    }
    catch (const exception & e)   
    {
        cerr << "*** ERROR: " << e.what() << endl;
        return kExitError;
    }
}

//////////////////////////////////////////////////////////////////////////////// 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:24:04.067

> Should we store smart pointers to class instances in large std::vector's for better performance?

Unless your class instances are gigantic and moving or copying them will require a lot of work, I'd consider this too early to worry about it. If each move operation requires moving dozens or hundreds of bytes, it will make a much more significant difference. As it is, the vast majority of the operation is vector overhead anyway.

I'll assume you're using a 64 bit system. Right now, `sizeof(MyObject)` will, I think, equal 24 (It does [here](http://ideone.com/6KR1bw) anyway). Otherwise you'll be dealing with unique pointers, which are probably sized at 12 bytes, or shared pointers, which are, I think, are sized at 16.

You're saving about 0.3 seconds for 1,500,000 operations, or about 200 nanoseconds for each operation. Is it really worth it? Are you really going to be dealing with many millions of elements in your vector? Could you simplify the whole thing by just storing a pointer to the vector and sharing that (since you're using move semantics and not copy, you should be able to make this work somehow)?

Seems an awful lot like premature optimization to me. So I'm going to say, **No, you shouldn't store a vector of smart pointers to instances instead of a vector to instances. Yet.**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T18:21:00.783

这取决于你如何使用它。如果您经常复制项目，那么使用指针而不是值会更快，因为您只需复制/移动指针。请注意，在插入项目时，复制占主导地位，因为当重新分配向量的内存时，所有项目都必须移动/复制到新位置。

当您更经常地读取或修改向量中的项目时，将项目存储为值会更快，因为间接性更少，内存局部性更好（更好地使用 CPU 缓存）。如果直接存储项目，则使用的内存也更少。`reserve`使用和可以避免插入速度较慢的小缺点`emplace_back`。那么它很可能会比使用指针向量更快。

除非我需要其他代码指向对象，否则我将始终使用值向量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T20:35:28.627

在`C++11`中，如果您***没有使用启用移动的对象***，那么您应该使用`std::unique_ptr<T>`from的向量`#include <memory>`。`std::unique_ptr<T>`重量更轻，具有相似的语义，`std::shared_ptr<T>`但在一个重要方面有所不同：对象所有权是明确的。在 的情况下`vector`，`vector`拥有它包含的对象。现在，如果您***正在使用启用移动的对象***，只需使用`vector`您的对象，因为它通常会“足够快”。所有支持 STL 的容器`C++11`都使用了移动语义（即，是的，速度稍慢，但您会在生产力方面有所收获）。如果性能是一个问题，您可以回退到`std::unqiue_ptr<T>`下面列出的原因。

如果您使用的是 C++11 之前的版本，`boost::shared_ptr<T>`这不是您可以做的最糟糕的事情，并且可能是一个合适的过渡路径，直到`std::unique_ptr<T>`您可以使用。的使用`boost::shared_ptr<T>`涉及原子增量和指针的分配。两者都非常便宜，但比`std::unique_ptr<T>`.

移动构造函数比移动更昂贵并不让我感到惊讶，`std::unique_ptr<T>`因为移动构造函数仍在分配对象（即使它的内脏/内容被借用、移动、重定位），而移动 a`std::unique_ptr<T>`只是一个整数/指针分配. 使用[jemalloc(3)](http://www.canonware.com/jemalloc/)可能会降低 Move 构造函数的成本，但这仅在 *NIX 平台上可用。

由于最后一点，基准并不完全是苹果对苹果。如果您正在寻找一致的性能，`std::unique_ptr<T>`这可能是要走的路（无分配），但如果您正在寻找一种“本机”开发习惯，它可以促进简单的开发方法，其中性能不是最重要的方面（即生产力比性能更重要），然后使用带有移动构造函数的普通对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T18:36:01.253

这一切都取决于类本身和用例。如果您有一个多态类，那么除了存储指针（指向基类）之外别无他法。这些指针可以是原始指针或智能指针。在第一种情况下，每次从向量中删除元素或销毁它时，您都必须记住正确的清理。后一个对用户更友好，并且`unique_ptr`与原始指针相比，不应该提供任何开销（速度、大小等）。shared_ptr 将在内存（共享状态可能有 24-48 个字节）和速度（线程安全引用计数）方面增加大量开销。

如果您的课程不是多态的，则再次取决于。如果您的类很小或易于移动（例如，具有指向数据而不是数据成员的指针），那么按值存储它应该更好，因为动态分配、释放和指针间接的数量较少。`std::vector`如果您使用可预测的模式进行，缓存位置也会对您有很大帮助。但是，如果您的班级很大，因此移动起来很重，这又取决于。如果它是一种 POD 类型，`std::vector`则可能会`memmove`用于复制非常快的内存，并且不会影响您的性能。对于其他类，将为每个项目调用 copy(move)-constructor，这将花费你一些性能。在这种情况下，使用指针可能会为您提供更好的性能。或者，您可以考虑使用其他容器，例如`std::deque`或`std::list`这限制了按值存储的元素所需的副本数。

# jquery - 一个简单的ajax请求post空

> ID：13384771
> 
> 赞同：2
> 
> 时间：2012-11-14T18:14:59.310
> 
> 标签：jquery, python, ajax, django

我有一个简单的 ajax 发布请求。请求已发送。但是为什么当我在views.py中打印request.POST时，它会说：`request.POST: <QueryDict: {}>`.

```
if (start <= end) {
   // fire a request to /tryit
       var args = {
       type: "POST",
       url: "/tryit/",
       data: {'x':x1, 'y': y1},
       error: function() {
          console.log("Error occurs");
       },
       success: function() {
          console.log("save_modification works");
       },
       complete:done
    };
    $.ajax(args);
    alert("ajax request is sent");
} 
```

在views.py中，

```
def tryit(request):
    print "request: ", request 
```

这是我打印请求信息时的输出。输出包括如下。

```
[Wed Nov 14 14:50:44 2012] [error] post request:  <WSGIRequest
[Wed Nov 14 14:50:44 2012] [error] path:/tryit/,
[Wed Nov 14 14:50:44 2012] [error] GET:<QueryDict: {}>,
[Wed Nov 14 14:50:44 2012] [error] POST:<QueryDict: {}>,
[Wed Nov 14 14:50:44 2012] [error] COOKIES:{'sessionid': 'f997a4c4ba0f576fe11141e0c0dcd38
 d'},
[Wed Nov 14 14:50:44 2012] [error] META:{'CONTENT_LENGTH': '128',
[Wed Nov 14 14:50:44 2012] [error]  'CONTENT_TYPE': 'application/x-www-form-urlencoded',
[Wed Nov 14 14:50:44 2012] [error]  'DOCUMENT_ROOT': '/var/www',
[Wed Nov 14 14:50:44 2012] [error]  'GATEWAY_INTERFACE': 'CGI/1.1',
[Wed Nov 14 14:50:44 2012] [error]  'HTTP_ACCEPT': '*/*',
[Wed Nov 14 14:50:44 2012] [error]  'HTTP_ACCEPT_ENCODING': 'gzip, deflate',
[Wed Nov 14 14:50:44 2012] [error]  'HTTP_ACCEPT_LANGUAGE': 'en-ca',
[Wed Nov 14 14:50:44 2012] [error]  'HTTP_CONNECTION': 'Keep-Alive',
[Wed Nov 14 14:50:44 2012] [error]  'HTTP_COOKIE': 'sessionid=f997a4c4ba0f576fe11141e0c0d
cd38d',
[Wed Nov 14 14:50:44 2012] [error]  'HTTP_PRAGMA': 'no-cache',

[Wed Nov 14 14:50:44 2012] [error]  'HTTP_USER_AGENT': 'Mozilla/5.0 (compatible; MSIE 9.0
; Windows NT 6.0; Trident/5.0)',
[Wed Nov 14 14:50:44 2012] [error]  'HTTP_X_REQUESTED_WITH': 'XMLHttpRequest',
[Wed Nov 14 14:50:44 2012] [error]  'PATH_INFO': u'/tryit/',
[Wed Nov 14 14:50:44 2012] [error]  'PATH_TRANSLATED': 'django.wsgi/tryit/',
[Wed Nov 14 14:50:44 2012] [error]  'QUERY_STRING': '',

[Wed Nov 14 14:50:44 2012] [error]  'REQUEST_METHOD': 'POST',
[Wed Nov 14 14:50:44 2012] [error]  'REQUEST_URI': '/tryit/',
[Wed Nov 14 14:50:44 2012] [error]  'SCRIPT_FILENAME': 'django.wsgi',
[Wed Nov 14 14:50:44 2012] [error]  'SCRIPT_NAME': u'',

[Wed Nov 14 14:50:44 2012] [error]  'SERVER_ADMIN': 'webmaster@localhost',

[Wed Nov 14 14:50:44 2012] [error]  'SERVER_PORT': '80',
[Wed Nov 14 14:50:44 2012] [error]  'SERVER_PROTOCOL': 'HTTP/1.1',
[Wed Nov 14 14:50:44 2012] [error]  'SERVER_SIGNATURE': '<address>Apache/2.2.22 (Ubuntu)
[Wed Nov 14 14:50:44 2012] [error]  'SERVER_SOFTWARE': 'Apache/2.2.22 (Ubuntu)',

[Wed Nov 14 14:50:44 2012] [error]  'mod_wsgi.callable_object': 'application',
[Wed Nov 14 14:50:44 2012] [error]  'mod_wsgi.enable_sendfile': '0',
[Wed Nov 14 14:50:44 2012] [error]  'mod_wsgi.handler_script': '',
[Wed Nov 14 14:50:44 2012] [error]  'mod_wsgi.input_chunked': '0',
[Wed Nov 14 14:50:44 2012] [error]  'mod_wsgi.listener_host': '',
[Wed Nov 14 14:50:44 2012] [error]  'mod_wsgi.listener_port': '80',
[Wed Nov 14 14:50:44 2012] [error]  'mod_wsgi.process_group': '',
[Wed Nov 14 14:50:44 2012] [error]  'mod_wsgi.queue_start': '1352926244930263',
[Wed Nov 14 14:50:44 2012] [error]  'mod_wsgi.request_handler': 'wsgi-script',
[Wed Nov 14 14:50:44 2012] [error]  'mod_wsgi.script_reloading': '1',
[Wed Nov 14 14:50:44 2012] [error]  'mod_wsgi.version': (3, 4),
[Wed Nov 14 14:50:44 2012] [error]  'wsgi.errors': <mod_wsgi.Log object at 0xa8224c78>,
[Wed Nov 14 14:50:44 2012] [error]  'wsgi.file_wrapper': <built-in method file_wrapper of
 mod_wsgi.Adapter object at 0xa8210218>,
[Wed Nov 14 14:50:44 2012] [error]  'wsgi.input': <mod_wsgi.Input object at 0xa8205ef8>,
[Wed Nov 14 14:50:44 2012] [error]  'wsgi.multiprocess': True,
[Wed Nov 14 14:50:44 2012] [error]  'wsgi.multithread': True,
[Wed Nov 14 14:50:44 2012] [error]  'wsgi.run_once': False,
[Wed Nov 14 14:50:44 2012] [error]  'wsgi.url_scheme': 'http',
[Wed Nov 14 14:50:44 2012] [error]  'wsgi.version': (1, 0)}>

But when I use fiddler, I can see the query parameter string. I am stuck here for a day. Please help. Thanks. 
```

新更新：我使用 chrome，在 Network 选项卡中，它说存在内部服务器错误，并且发起程序是 jquery.min.js:16。我不理解这些信息。这是否包含一些信息？

如果我从 POST 更改为 GET，则服务器可以接收到查询参数。但是如果我使用 POST，则无法发布查询参数。怎么解释呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:59:55.653

您需要使用控制台并检查 ajax 调用的内容和标头。

您可以在 firebug 中执行此操作（我希望您在 firefox 中安装了 firebug），或者在 Chrome 中右键单击 &inspect 元素。

在打开的窗口中，您应该有 NET 面板（萤火虫）或 Chrome 中的网络。

在那里，您将看到对服务器的每个调用的详细信息，以及它的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:09:05.710

`data`应该是一个字典。你的 js 应该是这样的：

```
if (start <= end) {
   // fire a request to /tryit
   var args = {
      ... 
      data: {"mydata" : mydata },
      ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:20:03.697

在 firebug 中调试 javascript 时出现错误“未定义 x1”。

你打算 x1 和 y1 是字符串吗？如果是这样试试这个...

```
data: {'x':'x1', 'y': 'y1'}, 
```

希望这可以帮助，

安德鲁

# c++ - 将向量拆分为块 - 这是正确的吗？

> ID：13384772
> 
> 赞同：1
> 
> 时间：2012-11-14T18:15:00.697
> 
> 标签：c++, matlab, vector

我正在将一个函数从 MatLab 转换为 C++，该函数接受一个向量并分成包含 600 个值并以 200 个间隔更改的块。这是函数（在 MatLab 中）：

```
function f = block(v, N, M)

% This function separates the vector  
% into blocks.  Each block has size N.
% and consecutive blocks differ in
% their starting positions by M
% 
% Typically
%    N = 30 msec (600 samples)
%    M = 10 msec (200 samples)

n = length(v);
maxblockstart = n - N + 1;
lastblockstart = maxblockstart - mod(maxblockstart-1 , M);

% Remove the semicolon to see the number of blocks
% numblocks = (lastblockstart-1)/M + 1
numblocks = (lastblockstart-1)/M + 1;

f = zeros(numblocks,N);

for i = 1:numblocks
 for j = 1:N
  f(i,j) = v((i-1)*M+j);
end 
```

结尾

以及 C++ 中的函数：

```
vector< iniMatrix > Audio::something(vector<double>& theData, int N, int M)
{
//How many blocks of size N can we get?
int num_blocks = theData.size() / N;

int n = theData.size();
int maxblockstart = n - N;
int lastblockstart = maxblockstart - (maxblockstart % M);
int numbblocks = (lastblockstart)/M + 1;

this->width = N;

//Create the vector with enough empty slots for num_blocks blocks
vector<iniMatrix> blocked(num_blocks);

//Loop over all the blocks
for(int i = 0; i < num_blocks; i++) {
    //Resize the inner vector to fit this block            
    blocked[i].resize(N);

    //Pull each sample for this block
    for(int j = 0; j < N; j++) {
        blocked[i][j] = theData[i*N+j];
    }
}
return blocked; 
```

}

这看起来正确吗？我知道这是一个奇怪的问题，我可能会得到负面反馈但是，我尝试计算过零的数量并且它显示了错误的答案，所以，也许我拆分向量的方式有问题。

编辑：

iniMatrix 是 2D 向量的 typedef

产生 96 个块（包含 600 个值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:55:19.120

你有

```
f(i,j) = v((i-1)*M+j); 
```

在 Matlab 代码的最后一个循环中，但在 C++ 代码中是

```
blocked[i][j] = theData[i*N+j]; 
```

似乎有可能导致错误的印刷错误。例如，您需要使用 C++ 编写代码：

```
blocked[i][j] = theData[i*M+j]; 
```

# wordpress - Wordpress 需要输入 ftp 登录/通过

> ID：13384773
> 
> 赞同：0
> 
> 时间：2012-11-14T18:15:01.707
> 
> 标签：wordpress

我想更新插件和 WordPress。当我按下刷新按钮时，wordpress 需要输入 FTP 用户名和密码。当我输入正确的数据时，脚本就会运行。不幸的是，出现了白色窗口，并且 WordPress 和插件没有更新。我认为存在问题，因为文件夹或进程没有某些权限。我试图将权限放入该文件夹，但问题仍然存在。

问候，丹尼斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:43:18.733

很可能 Wordpress 没有太多时间通过 FTP 更新所有插件。

将 chmod 0777 临时放入 /wp-content 和 /wp-content/plugins。如果 WP 有权编辑此目录中的文件，它将直接更新插件文件，而不使用 FTP。它可以更快。

# cappuccino - 卡布奇诺拖放错误

> ID：13384774
> 
> 赞同：0
> 
> 时间：2012-11-14T18:15:10.003
> 
> 标签：cappuccino

我正在尝试在卡布奇诺中实现拖放，但是当我在 CPView 上放置图像时不断出现错误，我从下面的控制台复制了错误消息。

CPInvalidArgumentException: - [CPImage removeFromSuperview] 无法识别的选择器发送到实例 0x0051bd

我正在从包含在 CPScrollView 中的 CPCollectionView 中拖动图像并将其放到 CPView 上。我按照[ScrapBook](http://cappuccino.org/learn/tutorials/scrapbook-tutorial-2/)教程中的示例进行操作。

下面是我的 CPView 上用于删除的代码，此代码会导致控制台输出

```
- (void)performDragOperation:(CPDraggingInfo)aSender
{
    var data = [[aSender draggingPasteboard] dataForType:PhotoDragType];
    [self addSubview:[CPKeyedUnarchiver unarchiveObjectWithData:data]];
} 
```

我在 AppController.j 中定义了我的拖动类型，因为我的 CPScrollView 定义了它们，不知道这是否会导致问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:23:09.050

拖放粘贴板中的内容不是视图，而是集合视图项的代表对象。（在您的情况下为 CPImage 对象）。

这里的解决方案是创建一个新的 CPImageView 并将其添加到下拉视图中，然后将该图像视图的图像设置为粘贴板数据（假设它始终是图像）。

# php - Zend Framework 会话命名空间调试 print_r 或等效

> ID：13384775
> 
> 赞同：3
> 
> 时间：2012-11-14T18:15:11.413
> 
> 标签：php, zend-framework, session

使用 Zend 和 Sessions 命名空间，尝试调试我正在运行的问题，我认为应该设置一些东西，但似乎不是，所以我想找到一种查看整个命名空间对象的方法，但是当我尝试`print_r()`或尝试`var_dump()`，我得到的只是

```
Zend_Session_Namespace Object ( [_namespace:protected] => msp ) 
```

所以我想知道因为我在这个主题的其他任何地方都找不到任何东西，目前有没有办法查看那个对象？是否有一种调试方法可以通过 zend 以某种方式启用/禁用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T18:35:44.263

您可以轻松地将其调试为

```
print_r($_SESSION) or print_r($_SESSION['YourNameSpace']) or
print_r(Zend_Session::namespaceGet('YourNameSpace')); 
```

因为每当我们尝试在 zend_session_namespace 对象上设置属性时，这就是它在内部所做的

```
 $_SESSION[$this->_namespace][$name] = $value; 
```

其中 $name 指的是我们试图用 vale $value 设置的属性。

# jquery - Jquery Flippy 在 Firefox 中不断翻转 mouseenter

> ID：13384776
> 
> 赞同：1
> 
> 时间：2012-11-14T18:15:13.457
> 
> 标签：jquery, mouseevent, flippy

我使用 Flippy 插件[http://blog.guilhemmarty.com/flippy/](http://blog.guilhemmarty.com/flippy/)。我已经实现了它，它在歌剧中运行良好，但在 FF 中它不断翻转[http://dev.barchick.com/barchicks-high-fives/](http://dev.barchick.com/barchicks-high-fives/)（悬停在图像上）。

主要代码

```
<div class="high " style="background-color:#28282A">
            <img src="http://barchick/wp-content/themes/barchick-v3/scripts/timthumb.php?src=http://barchick/wp-content/uploads/2012/11/park2.jpg&w=193&h=282" />
                <div id="highroll" >
                <a href="http://www.google.com" target="_blank"><span class="highbold">1\. Camden Town Brewery,</span> NW5</a><br/>
                <a href="http://www.google.com" target="_blank"><span class="highbold">2\. Brewdog,</span> NW1</a><br/>
                <a href="http://www.google.com" target="_blank"><span class="highbold">3\. The Euston Tap,</span> NW1</a><br/>
                <a href="http://www.google.com" target="_blank"><span class="highbold">4\. Duke's Brew & Cue,</span> N1</a><br/>
                <a href="http://www.google.com" target="_blank"><span class="highbold">5\. Jagaur Shoes,</span> N2</a>
                </div>
            <h5 id="hightext">Best bars near parks</h5>
        </div>

                <!--    Added by Alex   -->
    <script type="text/javascript">
    $(function(){
        $(".high").bind('mouseenter', function(){
            $(".high").flippy({
                content:$(".high"),
                direction:"TOP",
                duration:"750",
                onFinish:function(){
                    $('#highroll').show();
                    $('#hightext').hide();
                    $(".high").css('backgroundColor', '#28282A');
                }
            });
        })
        $(".high").bind('mouseleave', function(){
            $(".high").flippy({
                content:$(".high"),
                direction:"TOP",
                duration:"750",
                onFinish:function(){
                    $('#highroll').hide();
                    $('#hightext').show();
                    $(".high").css('backgroundColor', '#28282A');
                }
            });
        })
    })
    </script> 
```

你能告诉我出了什么问题以及如何解决吗？

# java - Felix：将捆绑缓存位置配置到临时文件夹

> ID：13384788
> 
> 赞同：0
> 
> 时间：2012-11-14T18:15:59.447
> 
> 标签：java, osgi, apache-felix

在 Windows 中，我想将 felix 的捆绑缓存位置设置为`%TEMP%/myApp`. 据我所知，使用的`configurations.property`文件`org.osgi.framework.storage`只会使用使用`${property}`符号的 felix 系统属性，而不是环境变量。

我如何在其中获得 %TEMP% ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:11:24.490

还没有尝试过这个 Windows，但你可以为你的 Temp 设置一些系统属性，例如

```
java -Dsystem.temp=%TEMP% -jar bin/felix.jar 
```

然后在您的配置中使用该系统属性，例如

```
org.osgi.framework.storage: ${system.temp}/myApp 
```

# python - App Engine 导入 ssl 失败

> ID：13384792
> 
> 赞同：3
> 
> 时间：2012-11-14T18:16:08.310
> 
> 标签：python, google-app-engine, dropbox-api

我有一个应用程序引擎应用程序，我正在使用 Dropbox sdk，但在导入 ssl 行中出现错误。

追溯

`File "/base/data/home/apps/s~email-dropbox/1.363170643114750340/dropbox/rest.py", line 11, in <module> import ssl File "/base/python27_runtime/python27_dist/lib/python2.7/ssl.py", line 60, in <module> import _ssl # if we can't import it, let the error propagate ImportError: No module named _ssl`

我知道 ssl.py 是 SSL C 库的包装器，而 appEngine 只处理纯 python。但是，没有办法解决这个问题吗？或者任何人都可以将我链接到适用于应用程序引擎的 Dropbox sdk 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-20T05:55:50.293

答案迟到了，但这是导入 SSL 库的方法

在你里面`app.yaml`，添加这个

```
libraries:
- name: ssl
  version: latest 
```

这对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T11:46:13.460

所以我找到了一个解决方案。我将这个发布给任何可能遇到问题的人。

Google App Engine 支持一些依赖于 C 后端的 python 模块，如 ssl 模块和其他一些模块。因此，您不能将原始 Dropbox SDK 与它一起使用。但是，可以对原始 SDK 进行修补以与 AppEngine 一起使用，并且一些人已经这样做了。我使用了cklein的这个补丁版本，它就像一个魅力。

[https://github.com/cklein/dropbox-client-python](https://github.com/cklein/dropbox-client-python)

# python - 使用内置 pandas 频率来模拟半年频率

> ID：13384795
> 
> 赞同：0
> 
> 时间：2012-11-14T18:16:18.140
> 
> 标签：python, pandas

我正在使用以 a 为索引的 pandas 时间序列`DatetimeIndex`，并且我需要支持半年频率。基本的半年频率有`1H=Jan-Jun`和`2H=Jul-Dec`，尽管有些系列的最后一个月可能是 12 月以外的月份，例如`1H=Dec-May`和`2H=Jun-Nov`。

我想我当然可以通过创建一个派生自 pandas 类的自定义类来实现我想要的`DateOffset`。但是，在我这样做之前，我很好奇是否有一种方法可以简单地使用内置频率，例如 6 个月的频率？我曾尝试这样做，但无法按照我想要的方式重新采样。

例如：

```
import numpy as np
import pandas as pd
from datetime import datetime

data = np.arange(12)
s = pd.Series(data, pd.date_range(start=datetime(2007,1,31), periods=len(data), freq="M"))
s.resample("6M")

Out[11]:
2007-01-31    0.0
2007-07-31    3.5
2008-01-31    9.0
Freq: 6M 
```

请注意 pandas 是如何使用从 8 月到 1 月和 2 月到 7 月的窗口进行聚合的。在这个基本情况下，我想要 Jan-Jun 和 Jul-Dec。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:39:03.303

您可以使用这两个`Series.resample()`参数的组合`loffset=`和`closed=`。

例如：

```
In [1]: import numpy as np, pandas as pd

In [2]: data = np.arange(1, 13)

In [3]: s = pd.Series(data, pd.date_range(start='1/31/2007', periods=len(data), freq='M'))

In [4]: s.resample('6M', how='sum', closed='left', loffset='-1M')
Out[4]: 
2007-06-30    21
2007-12-31    57 
```

我曾经`loffset='-1M'`告诉 pandas 聚合一个比默认时间早的时间段（将我们移至一月至六月）。

我曾经`closed='left'`使聚合器包含示例窗口的“左”端并排除“右”端（`closed='right'`是默认行为）。

注意：我过去`how='sum'`只是为了确保它按照我的想法做。您可以使用任何适当`how`的 .

# java - 在 Jelly Bean (Android 4.1) 中发生错误 -> 打开失败：EMFILE (打开的文件太多)

> ID：13384801
> 
> 赞同：1
> 
> 时间：2012-11-14T18:16:32.727
> 
> 标签：java, android, linux

我正在开发一个下载应用程序并同时运行多个线程以快速下载。但是我遇到了 android 4.1 jelly bean 的问题，它产生了打开的文件太多（打开失败：EMFILE（打开的文件太多））的异常。据我所知，一个进程只能打开 1024 个文件。但问题只发生在果冻豆而不是 ICS。

有没有人可以帮助解决这些问题。由于文件很多，因此在 10 多个线程中下载文件很重要。

请提出任何想法。以程序方式解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T02:45:45.933

也许 httpClient “有更多错误”并且已被弃用，但 JellyBean 的这个问题是一个大问题。我正在使用 Ksoap2，所以我尝试了所有建议的答案。

*   System.setProperty("http.keepAlive", "false");
*   httpTransportSE.getServiceConnection().setRequestProperty("Connection", "close");
*   httpTransportSE.getServiceConnection().disconnect();

没有任何效果 - 我的解决方案是将我正在使用的 Ksoap2 版本从 3.1.1 回滚到 2.6.5。使用 2.6.5 大大减少了问题。仍在测试，但甚至可能已解决。

可能是旧版本的 KSoap2 对我有用的原因是它使用的是 httpClient 而不是 httpUrlConnection。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T08:16:10.653

几周前我只在 Jellybean 中遇到了同样的问题，终于找到了解决方法。见[https://stackoverflow.com/a/20417556/976367](https://stackoverflow.com/a/20417556/976367)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T18:37:06.990

linux 操作系统上每个进程打开文件的数量有一个硬性限制。如果您具有系统级访问权限，则该数字是可配置的，但不能通过 Android。除了编写您的应用程序之外别无他法，因此一次打开的文件更少。

尽管实际上，如果您遇到此问题，您可能会在某处泄漏文件句柄。确保关闭所有打开的文件——限制是同时打开的文件，如果你关闭一个文件，你总是可以打开一个新文件来代替它。

# ruby-on-rails - 将 Rails 部分渲染到图像

> ID：13384806
> 
> 赞同：1
> 
> 时间：2012-11-14T18:16:56.273
> 
> 标签：ruby-on-rails, image, view, paperclip, partial

所以，我有一个问题，我最初的问题是：**这可能吗？**

我允许人们使用 css 自定义某些东西的外观，然后一旦他们保存它，我想将其转换为缩略图以用于在其他各个地方显示它（以其他尺寸保持相同的纵横比）。

所以问题是，是否有可能在我渲染该部分的地方做一些事情，然后将其保存到我可以使用回形针上传到各种尺寸的aws等的图像中？一旦我得到图像，我就可以做回形针部分，但是渲染 html/css 并将其保存到图像中会变得部分......想法？

只要知道，任何帮助和/或想法都会很棒！

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:36:10.750

这可能会帮助您：

> [rails 将 html 转换为图像](https://stackoverflow.com/questions/4563707/rails-convert-html-to-image)

# html - 如何仅为密件抄送设置 mailto

> ID：13384808
> 
> 赞同：41
> 
> 时间：2012-11-14T18:17:11.570
> 
> 标签：html, email, mailto

我有一个 mailto 链接，我只想填充密件抄送。那可能吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-14T18:20:23.393

`mailto:?bcc=mailaddress`会做的！

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-14T18:22:42.807

一些示例，包括实际的 HTML 代码，如下所示：

简单的邮件

`<a href="mailto:astark1@unl.edu">`

MailTo 与多个收件人

`<a href="mailto:astark1@unl.edu,ASTARK1@UNL.EDU">`

带主题的邮件

`<a href="mailto:astark1@unl.edu?subject=Comments from MailTo Syntax Page">`

MailTo 与副本

`<a href="mailto:astark1@unl.edu?cc=ASTARK1@UNL.EDU">`

MailTo 与密件副本

`<a href="mailto:astark1@unl.edu?bcc=ASTARK1@UNL.EDU">`

邮件已在正文中启动的 MailTo

`<a href="mailto:astark1@unl.edu?body=I am having trouble finding information on ">`

正文中带有多行消息的 MailTo

`<a href="mailto:astark1@unl.edu?body=The message's first paragraph.%0A%0aSecond paragraph.%0A%0AThird Paragraph.">`

[来源](http://zoomquiet.org/res/scrapbook/ZqSKM/data/20100419224556/)

# java - UNIX 信号到 AUTOSYS

> ID：13384813
> 
> 赞同：0
> 
> 时间：2012-11-14T18:17:28.850
> 
> 标签：java, unix, autosys

我们有一堆 java 进程要在 AUTOSYS 服务器中的不同时间运行。大多数 java 进程没有退出语句，因此我们编写了一些停止作业，如在 shell 脚本中以终止在预定停止时间运行的进程。当我们终止这些进程时，Autosys 作业状态设置为已终止，因此我们收到了不必要的警报。

目前我们正在使用 KILL -9 PROCESS_ID 命令来终止将 autosys 作业设置为 TE 的进程。

是否有任何 UNIX 命令可以顺利退出进程，从而将 AUTOSYS 状态更改为 SU（成功）？.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:36:38.357

最简单的做法是将 java 的调用包装在读取终止退出代码的 shell 脚本中，并在读取表示通过信号终止的退出代码时，然后以 0 返回代码退出。

例如

```
#!/bin/bash -p

java dothestuff
rc=$?
if [ $rc -eq 130 ]; then
    echo "Killed by SIGINT"
    exit 0
fi
exit $rc 
```

# javascript - javascript/jquery 堆叠水平滑动图片库

> ID：13384816
> 
> 赞同：0
> 
> 时间：2012-11-14T18:17:40.820
> 
> 标签：javascript, jquery, image

所以，我把这个网站放在一起。我的图片库非常基本，但无论如何都不需要动态，所以我不介意。

我的问题是……我的动作已经停止，但我不知道如何在不压缩内容的情况下折叠图像。

我要么希望它们很好地滑出#container div，要么让垂直条在图像之间擦除......不知道如何在文本中解释这一点。

这是有问题的网站：

[http://intwind.com/test/](http://intwind.com/test/)

# javascript - 需要用 JS 检查 SQlite 中是否存在表

> ID：13384817
> 
> 赞同：1
> 
> 时间：2012-11-14T18:17:46.770
> 
> 标签：javascript, sqlite, exists

我无法找到我的数据库中是否存在表。我用这样的 JS 打开/创建它：

```
DEMODB = openDatabase(shortName, version, displayName, maxSize); 
```

接着：

```
DEMODB.transaction(function(tx) {
   tx.executeSql("SELECT COUNT(*) FROM sqlite_master WHERE type='table' and name='MyTable'", [],
      function(tx, result) {
         //console.log(result.rows);
         cont = result.rows.length;
      },
      function(tx, error){
         // error occured
      }
   );
}); 
```

*cont*始终为 1（如果函数已执行）。我也试过这个：

```
pragma table_info('abreviations' 
```

但我收到错误“缺少授权”。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:58:09.720

您会返回一条记录，因为即使该表丢失，此类表的*计数*仍存在（但为零）。

检查您返回的*值*是零还是一。

或者，只需尝试从表中读取并处理错误。

# jquery - 为所有孩子动态分配名称值？

> ID：13384818
> 
> 赞同：-1
> 
> 时间：2012-11-14T18:17:47.097
> 
> 标签：jquery, html, loops, dynamic

我正在克隆字段集，并且每次都需要将名称值增加 1。

这是jQuery：

```
i = 2;
$("#AddOne").click(function () {
    if (i < 11) {
        var itemNum = "<div class='iSep'>Item "+ i +"</div>";
        $("#cloneSet").clone().prepend(itemNum).appendTo("#cloneRet");
        i++;
    }
}); 
```

这是相关的HTML：

```
<div id="cloneSet">
<label for="ModelNumber1">Model Number:</label>
<input type="text" name="ModelNumber1" class="required"><br />
<label for="SerialNumber1">Serial Number:</label>
<input type="text" name="SerialNumber1" class="required"><br />
<label for="ConditionofUnit1">Condition of Unit:</label>
<select name="ConditionofUnit1" class="required">
<option value="">Choose an option</option> 
<option value="Open: Defective">Open: Defective</option>
<option value="Open: Non-defective">Open: Non-defective</option>
<option value="Factory Sealed">Factory Sealed</option>
</select><br />
</div>

<div id="cloneRet"></div> 
```

因此，在包括标签在内的所有表单元素上，我想为所有 for 和 name 值增加 1 到 i ..有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:22:43.233

在进行过程中更新所有 for 和 name 属性

老实说，不知道您为什么要这样做，我建议您使用课程

然而，这不是你的问题。

```
i = 2;
$("#AddOne").click(function () {
    if (i < 11) {
        var itemNum = "<div class='iSep'>Item "+ i +"</div>";
        $("#cloneSet:first").clone().prepend(itemNum).appendTo("#cloneRet")
        .children().each(function(){
             $(this).attr('name',$(this).attr('name').replace(i,i+1))
             $(this).attr('for',$(this).attr('for').replace(i,i+1))
        });
        i++;
    }
}); 
```

# ruby-on-rails - 向表中添加值 - ActiveRecord::DangerousAttributeError: update 由 ActiveRecord 定义

> ID：13384819
> 
> 赞同：0
> 
> 时间：2012-11-14T18:17:50.143
> 
> 标签：ruby-on-rails, ruby

好的，伙计们，我有一个问题 - 因为我创建了一个模型和表 AdminUser，然后我尝试向它添加值，然后控制台打印我......有什么想法吗？

```
1.9.3-p286 :020 > AdminUser
 => AdminUser(id: integer, first_name: string, last_name: string, email: string, pass: string, date_reg: datetime, update: datetime) 

1.9.3-p286 :021 > AdminUser.all
  AdminUser Load (0.2ms)  SELECT "admin_user".* FROM "admin_user" 
 => [] 

1.9.3-p286 :022 > me =  AdminUser
 => AdminUser(id: integer, first_name: string, last_name: string, email: string, pass: string, date_reg: datetime, update: datetime) 
1.9.3-p286 :023 > me.new
ActiveRecord::DangerousAttributeError: update is defined by ActiveRecord
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/attribute_methods.rb:91:in `instance_method_already_implemented?'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activemodel-3.2.8/lib/active_model/attribute_methods.rb:263:in `block in define_attribute_method'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activemodel-3.2.8/lib/active_model/attribute_methods.rb:260:in `each'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activemodel-3.2.8/lib/active_model/attribute_methods.rb:260:in `define_attribute_method'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activemodel-3.2.8/lib/active_model/attribute_methods.rb:256:in `block in define_attribute_methods'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activemodel-3.2.8/lib/active_model/attribute_methods.rb:256:in `each'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activemodel-3.2.8/lib/active_model/attribute_methods.rb:256:in `define_attribute_methods'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/attribute_methods.rb:66:in `block in define_attribute_methods'
    from <internal:prelude>:10:in `synchronize'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/attribute_methods.rb:63:in `define_attribute_methods'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/attribute_methods.rb:168:in `respond_to?'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:398:in `__run_callback'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_initialize_callbacks'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.8/lib/active_record/base.rb:501:in `initialize'
    from (irb):23:in `new'
    from (irb):23
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
    from /home/wojtek/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'1.9.3-p286 :024 > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:28:55.843

您的问题是这`update`是模型中的一列。但是update也是Active Record定义的一种方法。因此，如果您尝试访问，rails 将不知道您在谈论哪个`admin.update`。如果您将`update`列重命名为其他名称，您应该没问题。

您可能想查看时间戳。[http://guides.rubyonrails.org/migrations.html#special-helpers](http://guides.rubyonrails.org/migrations.html#special-helpers)它在我看来就像你想对`update`专栏做的事情。

# jquery - 来自 jquery 填充字段的值，不保存到模型

> ID：13384822
> 
> 赞同：1
> 
> 时间：2012-11-14T18:18:02.863
> 
> 标签：jquery, asp.net-mvc

我正在开发一个 ASP MVC 应用程序。我有一个从视图模型（任务名称）填充的选择列表。根据选定的项目，十进制值将放置在 TaskValue 的文本框中。jquery 端正在工作，该值显示在字段中，但提交时，TaskValue 字段为空。如何获取要提交的值？

视图模型：

```
namespace MyJobs.Models
{
    public class ViewModel
    {
        public CompletedTask CompTaskModel { get; set; }
        public TaskList TaskListModel { get; set; }

        public IEnumerable<SelectListItem> Tasks { get; set; }
    }
} 
```

CompletedTasks 模型：

```
namespace MyJobs.Models
{
    [MetadataType(typeof(CompTaskData))]
    public partial class CompletedTask
    {
    }

    public class CompTaskData
    {
        public string TaskName { get; set; }
        public decimal TaskValue { get; set; }
        public DateTime CompDate { get; set; }
    }
} 
```

任务列表模型

```
namespace MyJobs.Models
{
    [MetadataType (typeof(TaskListData))]
    public partial class TaskList
    {
    }

    public class TaskListData
    {
        public string TaskName { get; set; }
        public decimal TaskValue { get; set; }

    }
} 
```

风景：

```
 <div class="editor-field">
        @Html.DropDownListFor(m => m.CompTaskModel.TaskName, new SelectList(Model.Tasks, "Value", "Text"), "Select a Job")
        @Html.ValidationMessageFor(model => model.CompTaskModel.TaskName)
    </div> 
```

jQuery：

```
$(document).ready(function () {
    $("#CompTaskModel_TaskName").change(function () {
        var v = 0;
//        var value = $("#CompTaskModel_TaskValue").val();
        var task = $("#CompTaskModel_TaskName").val();

        switch (task) {
            case "1":
                v = "$0.50";
            break;
            case "2":
                v = "$0.75";
            break;
            case "3":
                v = "$0.50";
            break;
            case "4":
                v = "$0.75";
                break;
            default:
                v = "Select a Job!";
            }

           $("#CompTaskModel_TaskValue").val(v);
     });
   }); 
```

控制器：

```
 public ActionResult Index()
    {
        ViewModel vm = new ViewModel();

        vm.Tasks = from e in db.TaskList.ToArray()
                   select new SelectListItem
                   {
                       Value = e.TaskId.ToString(),
                       Text = e.TaskName
                   };

        return View(vm);
    } 
```

谢谢您的帮助。

编辑：在视图的 dropdownfor 行上，我也收到一个错误“对象引用未设置为对象的实例”：

```
 @Html.DropDownListFor(m => m.CompTaskModel.TaskName, new SelectList(Model.Tasks, "Value", "Text"), "Select a Job") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:24:33.253

My guess is what is happening is the model binder is having an issue with binding the value to a decimal. I've encountered this before.

Take a look at this: [Model Binding Decimal Values](http://haacked.com/archive/2011/03/19/fixing-binding-to-decimals.aspx)

See if that helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:45:59.573

从我在代码中看到的，您没有将值分配给`TaskValue`，只有您将值分配给`$("#CompTaskModel_TaskValue").val(v)`。

此外，错误可能是当您创建标签`input`时`TaskValue`，也许您只是分配了`id`没有属性的`name`属性。

正确的例子：

```
<input type="hidden" name="TaskValue" id="TaskValue" value="" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-30T18:33:46.503

设置其值后，触发此输入字段的更改事件。

```
$("yourInputSelector").hide();
$("yourInputSelector").val("your Value");
$("yourInputSelector").trigger("change"); 
```

# java - 查询数据存储时 Google 应用引擎出现未知错误

> ID：13384824
> 
> 赞同：0
> 
> 时间：2012-11-14T18:18:04.693
> 
> 标签：java, google-app-engine, jdo, datanucleus, jdoql

我有下面的代码从谷歌应用引擎的数据存储中获取值。

```
PersistenceManager pm = JDOUtil.get().getPersistenceManager();
Extent extent = pm.getExtent(LeaderBoard.class, true);

Query q = pm.newQuery(extent);
q.setFilter("game =='"+game+"'");
q.setOrdering("time DESC,createdDate DESC");

List<LeaderBoard> leaderBoard = (List<LeaderBoard>) q.execute();
pm.close(); 
```

但是当我尝试它给我一个奇怪的错误时，我在下一行不熟悉。

```
List<LeaderBoard> leaderBoard = (List<LeaderBoard>) q.execute(); 
```

下面是堆栈跟踪。这有时会起作用。但它现在不工作。我正在使用谷歌应用引擎和 jdo。

```
ERROR :java.lang.ClassCastException: org.datanucleus.query.evaluator.memory.InMemoryFailure cannot be cast to java.lang.Comparable
stackTrace  :java.lang.ClassCastException: org.datanucleus.query.evaluator.memory.InMemoryFailure cannot be cast to java.lang.Comparable
    at org.datanucleus.query.QueryUtils$3.compare(QueryUtils.java:1317)
    at java.util.Arrays.mergeSort(Arrays.java:1446)
    at java.util.Arrays.legacyMergeSort(Arrays.java:1356)
    at java.util.Arrays.sort(Arrays.java:1345)
    at org.datanucleus.query.QueryUtils.orderCandidates(QueryUtils.java:1288)
    at org.datanucleus.query.evaluator.JavaQueryEvaluator.ordering(JavaQueryEvaluator.java:471)
    at org.datanucleus.query.evaluator.JavaQueryEvaluator.execute(JavaQueryEvaluator.java:220)
    at com.google.appengine.datanucleus.query.JDOQLQuery.performExecute(JDOQLQuery.java:153)
    at org.datanucleus.store.query.Query.executeQuery(Query.java:1789)
    at org.datanucleus.store.query.Query.executeWithArray(Query.java:1666)
    at org.datanucleus.store.query.Query.execute(Query.java:1639)
    at org.datanucleus.api.jdo.JDOQuery.execute(JDOQuery.java:221)
    at com.googlecreativelab.dao.LeaderBoardDAO.isTopScore(LeaderBoardDAO.java:68)
    at com.googlecreativelab.dao.LeaderBoardDAO.saveTopScore(LeaderBoardDAO.java:26)
    at com.googlecreativelab.service.GameDataService.processRequest(GameDataService.java:188)
    at com.googlecreativelab.service.GameDataService.doGet(GameDataService.java:290)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

下面是排行榜类

```
@PersistenceCapable
public class LeaderBoard implements Serializable {

    private static final long serialVersionUID = 3671283388721366564L;
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;
    @Persistent
    private String name;
    @Persistent
    private Integer avatar;
    @Persistent
    private String game;
    @Persistent
    private Integer time;
    @Persistent
    private Date scoredDate;

    //Setter and getters 
```

而且我发现只有在“时间”列中存在相同值并且我试图通过“排序依据”查询对它们进行排序时才会出现错误。例如，在数据存储中，我有两行，“时间”列的值为 955。然后我不能按顺序进行，如果它的 955、966 类似于该订单查询有效。希望我说清楚了:)。这是一个错误还是什么。我传递给游戏的价值是“运行”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:52:42.740

因此，您启用了内存查询，但它无法评估数据存储区中的所有查询，并且您使用的内存评估器的功能无法满足该查询。大概使用了 GAE JDO 插件的 v2.0.x（如果能实际引用所用软件的版本就好了）。

使用 GAE JDO 插件 v2.1.1（带有 DataNucleus 3.1.x），它具有更完整的内存查询功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:30:04.180

解决了这个问题:)，问题出在我有“scoredDate”的实体中，我试图按“createdDate”排序。男生问题:)。但是 GAE 仍然没有给出适当的例外。很坏

# wcf - Odata 压缩 - 有任何支持吗？（用于 WinRT 的 WCF 数据服务 5.0）

> ID：13384827
> 
> 赞同：5
> 
> 时间：2012-11-14T18:18:18.123
> 
> 标签：wcf, windows-8, windows-runtime, wcf-data-services, odata

上下文：当前使用带有 Odata 的 WCF 数据服务 5.0 用于 Windows 8 应用商店应用程序。

今天一直在尝试压缩从我的服务通过网络传输的 OData，并遇到了很多围绕支持的问题。

*   不支持二进制序列化。

*   不支持 json（Content-Type 标头中当前不支持库抛出“application/json”）

*   json lite 尚未发布

*   在 http 响应中添加 gzip 请求有效（服务器返回压缩） - 但客户端库似乎不想反序列化它。（xml解析异常）

我今天的最后一次尝试是尝试获取 http 响应，并自己手动反序列化流（GZipStream 不可用，但我知道有第 3 方替代方案） - 但我找不到任何**Microsoft.Data。**将向我公开流的**Services.Client.WindowsStore事件/覆盖。**

我想实施 OData 以利用标准 WCF Web 服务的性能和效率提升 - 但无法通过线路压缩流，我什么也得不到。

有没有人有这方面的经验，或如何处理的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:15:06.427

您是否按照此处相同的步骤获取 json 响应。客户端必须发送 MaxDataServiceVersion 标头：http: [//blogs.msdn.com/b/astoriateam/archive/2012/04/11/what-happened-to-application- json-in-wcf-ds-5-0.aspx](http://blogs.msdn.com/b/astoriateam/archive/2012/04/11/what-happened-to-application-json-in-wcf-ds-5-0.aspx)

我还检查了 Odata 5.1.0 是否已在 nuget 上发布。这有更好的 json 支持： [https ://nuget.org/packages/Microsoft.Data.Services/5.1.0](https://nuget.org/packages/Microsoft.Data.Services/5.1.0)

您的另一个选择是使用 asp.net web api 并尝试 odata 支持： [http ://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData](http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData)

# javascript - 如何在 Chrome 中找到调用方法的位置？

> ID：13384829
> 
> 赞同：2
> 
> 时间：2012-11-14T18:18:27.937
> 
> 标签：javascript, html, debugging, google-chrome

有一个网站我想调试。[http://www.mapcrunch.com/](http://www.mapcrunch.com/)我想看看 javascript 在哪里挂钩到中间巨大的 GO 按钮。

到目前为止，通过检查我发现的元素：

```
<button id="gobutton" class="button" style="display:none;" title="Click to go!">
   <span>Go!</span>
</button> 
```

当我单击按钮时，在“网络”视图中，我发现它调用了。[http://www.mapcrunch.com/json/rand.php?c=35&d=0](http://www.mapcrunch.com/json/rand.php?c=35&d=0)但我找不到实际调用的位置。我想找到发出此请求的函数或行。有没有办法在 Chrome 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:22:28.283

假设单击 go 按钮会更改 DOM，您可以右键单击开发工具中的 HTML 标记，然后单击“Break on... Subtree modify”。然后单击开始按钮。这将在正在执行的 javascript 上暂停。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:23:07.977

从站点解压缩[JS 文件](http://www.mapcrunch.com/js/maps.min.js?v=14)，然后搜索 #gobutton

# ruby-on-rails - 使用完整引擎的 Rails Full Engine

> ID：13384832
> 
> 赞同：0
> 
> 时间：2012-11-14T18:18:50.070
> 
> 标签：ruby-on-rails, design-patterns, rails-engines

我有这个带有 X 功能的完整的 Rails 引擎 Foo。

我想制作另一个引擎，引擎 Bar，它几乎相同，但用 y 覆盖功能 x。（它基本上是一样的，但是一些控制器动作和视图的实现方式不同）。

（我稍后可能会将其拆分为几个可安装的引擎，但现在，这将是设置：项目 Baz，使用引擎 Bar，使用引擎 Foo）

我想知道是否有任何陷阱。好像不是经常使用的模式？还有其他人使用这种“某种引擎继承”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:57:20.940

Ruby OpenClassing 是您想要做的。例如，

```
# in Engine Foo
#   this code creates functionality x

Foo::SomeRubyClass
  # functionality x
  def some_method
    0.10
  end
end

# in Engine Bar
#   this code opens and reevaluates the functionality x in Foo Engine

Foo::SomeRubyClass.class_eval do
  # functionlity x method
  def some_method
    0.05
  end
end 
```

使用 Rails 模型/视图/控制器进行更全面的解释。 [http://edgeguides.rubyonrails.org/engines.html#overriding-models-and-controllers](http://edgeguides.rubyonrails.org/engines.html#overriding-models-and-controllers)

# c# - 表单身份验证和会话到期

> ID：13384840
> 
> 赞同：1
> 
> 时间：2012-11-14T18:19:11.567
> 
> 标签：c#, .net, forms-authentication

我有一个要求，当用户登录网站和注销时，我需要将其存储在哪里。这很简单。问题是有时用户不会退出，而只是关闭浏览器。在这种情况下，我想存储他们的会话过期的日期时间来代替他们注销的日期时间。问题是这是如何实现的？是否有一些事件被触发或类似的东西我可以用来“捕获”会话到期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:05:44.517

在您的 global.asax 文件中，您可以捕获会话结束。

```
protected void Session_End(Object sender, EventArgs e)
{
    // log out user
} 
```

如果需要，您可以为用户添加自定义标识符，而不是检查 session_end

```
 void Session_Start(object sender, EventArgs e) 
    {
       // Code that runs when a new session is started
       Session["CustomSessionId"] = Guid.NewGuid();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:14:46.517

如果您不想通过 GUID 进行跟踪，您也可以执行以下操作

```
void Session_Start(object sender, EventArgs e) 
{
   // Code that runs when a new session is started
   var sessionId = Session.SessionID();
} 
```

# python - 在python列表中交换元组/列表中的值？

> ID：13384841
> 
> 赞同：16
> 
> 时间：2012-11-14T18:19:18.227
> 
> 标签：python, list, tuples, swap

我有一个这样的元组列表：

```
[('foo','bar'),('foo1','bar1'),('foofoo','barbar')] 
```

python（在非常低的cpu / ram机器上运行）交换这样的值的最快方法是什么......

```
[('bar','foo'),('bar1','foo1'),('barbar','foofoo')] 
```

我目前正在使用：

```
for x in mylist:
    self.my_new_list.append(((x[1]),(x[0]))) 
```

有没有更好或更快的方法？？？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-14T18:27:57.980

你可以使用地图：

```
map (lambda t: (t[1], t[0]), mylist) 
```

或列表理解：

```
[(t[1], t[0]) for t in mylist] 
```

当需要 lambda 时，列表推导是首选并且据说比 map 快得多，但是请注意，列表推导具有严格的评估，也就是说，如果您担心内存消耗，它将在绑定到变量时立即评估*生成器*代替：

```
g = ((t[1], t[0]) for t in mylist)
#call when you need a value
g.next() 
```

这里有更多细节：[Python List Comprehension Vs。地图](https://stackoverflow.com/questions/1247486/python-list-comprehension-vs-map)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-02-19T17:39:51.823

你可以`reversed`这样使用：

```
tuple(reversed((1, 2)) == (2, 1) 
```

要将其应用于列表，您可以使用`map`或列表/生成器理解：

```
map(tuple, map(reversed, tuples))     # map
[tuple(reversed(x)) for x in tuples]  # list comprehension
(tuple(reversed(x)) for x in tuples)  # generator comprehension 
```

如果您主要对运行时速度感兴趣，我只能建议您分析各种方法并选择最快的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-08T11:26:11.483

使用**列表理解**，我发现使用单独的变量而不是单个变量的索引更优雅和更容易理解，就像@iabdalkader 提供的解决方案一样：

```
[(b, a) for a, b in mylist] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-08T20:59:08.453

一种奇特的方式：

```
[t[::-1] for t in mylist] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-04T16:40:09.670

要就地修改当前列表，最有效的方法是：

```
my_list[:] = [(y, x)  for x, y in my_list] 
```

它分配给覆盖*整个列表的**列表切片*，而不在内存中创建列表的额外副本。另请参阅[此答案](https://stackoverflow.com/a/1208792/967621)。

# mysql - 有限的 SQL 查询返回所有行而不是一个

> ID：13384842
> 
> 赞同：5
> 
> 时间：2012-11-14T18:19:25.750
> 
> 标签：mysql, select, limit

我尝试了 SQL 代码：

```
explain SELECT * FROM myTable LIMIT 1 
```

结果我得到：

```
id select_type table   type possible_keys key  key_len ref  **rows**
1  SIMPLE      myTable ALL  NULL          NULL NULL    NULL **32117** 
```

你知道为什么查询会运行所有行而不是简单地选择第一行吗？我可以在查询（或我的表）中更改什么以减少类似结果的行数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:23:26.253

显示的行数只是要检查的行数的*估计值*。它并不总是等于运行查询时检查的*实际*行数。

尤其：

> 估计行数时不考虑 LIMIT 即使您有限制检查行数的 LIMIT，MySQL 仍然会打印完整的行数。

[来源](http://www.mysqlperformanceblog.com/2006/07/24/mysql-explain-limits-and-errors/)

当查询实际运行时，只会检查一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:21:54.330

**编辑使用子选择：**

假设主键是 "my_id" ，使用`WHERE`. 例如：

```
select * from mytable
where my_id = (
select max(my_id) from mytable
) 
```

虽然一开始这似乎效率较低，但结果在解释中是这样的，导致只返回一行并读取索引以找到最大值。我不建议对 MySQL 中的分区表执行此操作：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   PRIMARY mytable const   PRIMARY PRIMARY 4   const   1    
2   SUBQUERY    NULL    NULL    NULL    NULL    NULL    NULL    NULL    Select tables optimized away 
```

# ruby - Ruby - 未定义的方法“空？” 对于零：NilClass

> ID：13384846
> 
> 赞同：0
> 
> 时间：2012-11-14T18:19:42.067
> 
> 标签：ruby, ruby-on-rails-3, methods, associations, string

超过 3 小时我试图解决非常简单的错误（乍一看）：

```
undefined method `empty?' for nil:NilClass 
```

但仍然没有成功。

我有 DB 表`products`，其中包含列`category_id`和`manufacturer_id`.

协会：

```
class Product < ActiveRecord::Base
  belongs_to :manufacturer
  belongs_to :category
  ...
end
class Category < ActiveRecord::Base # the same for Manufacturer
  has_ancestry
  has_many :products

end 
```

试图获取一些数据：

```
Product.where('category_id IS NOT NULL AND manufacturer_id IS NOT NULL').each do |product|
  ...
  puts product.manufacturer.name # here's the error
  puts product.category.name # here's the error
  ...
end 
```

我获取了所有行，列中的值不是 NIL`manufacturer_id`并且`category_id`......那么我怎样才能得到这个错误？

另外，我试过：

```
 ...
  puts product.manufacturer.name unless product.manufacturer_id.nil?
  puts product.category.name unless product.category_id.nil?
  ... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:52:10.107

您很可能删除了制造商或类别，因此没有对应的记录与外键匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:56:06.223

考虑到您的查询，可能是数据库上的业务逻辑问题。

恕我直言，您正在调用一些无效的对象。检查您的数据库以查看是否所有寄存器都参与您的验证逻辑。

# php - 获取 Json API 结果

> ID：13384848
> 
> 赞同：0
> 
> 时间：2012-11-14T18:19:58.180
> 
> 标签：php, jquery, json, api

我对此进行了搜索，但与此相关的大多数问题都是针对其他服务的 API 的。

我正在构建一个 API，允许游戏开发人员从我的数据库中发送和检索用户信息。

我终于能够将 API 放在一起，但现在我需要调用 API。

第一次当游戏启动时，它会向我们发送游戏开发者密钥他们的开发者 ID 和游戏 ID。

```
//Game loads, get developer key, send token and current high score

// == [ FIRST FILTER - FILTER GET REQUEST ] == //
$_GET = array_map('_INPUT', $_GET); // filter all input

// ====================================== //
// ============[ ACTION MENU ]=========== //
// ====================================== //

if(!empty($_GET['action']) && !empty($_GET['user']) && !empty($_GET['key']) &&  !empty($_GET['email']) && !empty($_GET['password'])): // if key data exists

switch($_GET['action']):

//athenticate game developer return and high score
case 'authenticate':

    $db = new PDO('mysql:host=localhost;dbname=xxxx', 'xxxx', 'xxxx');
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);

    $st = $db->prepare("SELECT * FROM `game_developers_games` WHERE `id` = :gameid AND `developer_id`=:user AND `key`= :key AND `developer_active` = '1'"); // need to filter for next auction
    $st->bindParam(':user', $_GET['user']); // filter
    $st->bindParam(':key', $_GET['key']); // filter
    $st->execute();
    $r = $st->fetch(PDO::FETCH_ASSOC);

    if($st->rowCount() == 0):

        $return = array('DBA_id'=>'0000');
        echo json_encode($return);

    else:

        $token = initToken($_GET['key'],$_GET['user']);

        if($token == $r['API_Token']):

            $return = array(
            'DBA_id'=>$token,
            'DBA_servertime'=>time(),
            'DBA_highscore'=>$r['score'],
            );

            echo json_encode($return);                

        endif;

    endif;

    break; 
```

这是游戏开发者必须添加到游戏中以在游戏加载时获取数据的脚本。在另一个stackoverflow问题上找到了这个，但它不起作用。

```
 $.getJSON("https://www.gamerholic.com/gamerholic_api/db_api_v1.php? user=1&key=6054abe3517a4da6db255e7fa27f4ba001083311&gameid=1&action=authenticate",           function () {
        alert("aaa");

              }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:55:44.617

尝试添加**&callback=?** 到您正在构建的网址的末尾。这将启用 cors 接受的 jsonp。

```
$.getJSON("https://www.gamerholic.com/gamerholic_api/db_api_v1.php?user=1&key=6054abe3517a4da6db255e7fa27f4ba001083311&gameid=1&action=authenticate&callback=?",           function () {
   alert("aaa");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:40:51.207

根据跨域来源策略，您无法使用 jquery getJson 函数访问跨域 url。

使用 json 管理跨域请求需要回调，并且需要在服务器端和客户端上进行处理。

还要确保使用 firebug 或类似工具检查响应，因为目前它返回的响应代码为 200。

我在这里提到两个线程可以指导您正确的方式

[jquery getJSON 跨域问题](https://stackoverflow.com/questions/760993/jquery-getjson-cross-domain-problems)

[http://www.fbloggs.com/2010/07/09/how-to-access-cross-domain-data-with-ajax-using-jsonp-jquery-and-php/](http://www.fbloggs.com/2010/07/09/how-to-access-cross-domain-data-with-ajax-using-jsonp-jquery-and-php/)

# bash - 无法将 $PWD 与 sed、bash 一起使用

> ID：13384855
> 
> 赞同：2
> 
> 时间：2012-11-14T18:20:32.720
> 
> 标签：bash, path, sed, pwd

我正在尝试创建一个用绝对路径替换子字符串的脚本，所以我正在使用

```
sed s/TEMPDIR/$PWD/ file.py > newfile.py 
```

所以很明显我想用绝对路径替换TEMP，但我一直在

> sed: -e 表达式 #1, char 12: `s' 的未知选项

我认为这可能是因为路径包含'/'，但我不知道如何解决它。有任何想法吗？

此外，鉴于我不处理链接，deos PWD 保证绝对路径？

谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T18:22:20.733

使用不同的分隔符：

```
sed "s@TEMPDIR@$PWD@" file.py > newfile.py 
```

使用 PWD 可能并不能保证绝对路径。（取决于外壳）。但是`pwd`会返回一个绝对路径，所以使用：

```
sed "s@TEMPDIR@$(pwd)@" file.py > newfile.py 
```

请注意，如果您的路径包含`@`. 选择一个两者都没有出现的分隔符。请注意 shell 标准中的以下内容：

*在将 PWD 设置为 pwd -P 输出的路径名的情况下，如果当前工作目录或该目录的任何父目录没有足够的权限来确定该路径名是什么，则 PWD 的值为未指定。对此变量的赋值可能会被忽略。如果应用程序设置或取消设置 PWD 的值，则未指定 cd 和 pwd 实用程序的行为。*

因此，您可能可以依赖 $PWD。请注意，既不`pwd`也`$PWD`不会解析符号链接，因此您可能更喜欢使用`readlink -f .`

# php - foreach 中的爆炸变量，但在第一个数组之后，数组从 1 而不是 0 开始

> ID：13384857
> 
> 赞同：0
> 
> 时间：2012-11-14T18:20:43.333
> 
> 标签：php, arrays, foreach, explode

我正在列出姓名并将姓氏放在第一位。当我使用explode创建$name数组时，名字的名字在数组位置0，姓在位置1，但其他名字都以名字在位置1，姓在位置2。

我从另一个执行类似操作的脚本中复制了这段代码，但在该代码中，所有的名字，包括第一个实例，都从数字 1 开始（至少是一致的）。

我猜我错过了一些基本的东西。感谢您的帮助。

代码如下。

```
$_511a = 'Maria Smith, Lance Farquardt, Daniel Berquist, John Barton, Milo Silver';
echo '511a: ' . $_511a . '<br />';
$castsplit = explode(',' , $_511a);
foreach($castsplit as $cast) {
    $name = explode(' ',$cast);
    $lastname = end($name);
    if(count($name) >= 4){
        $middlename = $name[2];
    } else {
        $middlename = null;   
    }
    $firstname = $name[1];
    if($middlename){
        $castmembers[] = $lastname . ', ' . $firstname .  ' ' . $middlename;
    } else {
        $castmembers[] = $lastname . ', ' . $firstname;
    }
}
echo "Corrected names: <br />";
foreach($castmembers as $castmember) {
    echo $castmember . '<br />';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:26:12.227

在列表中的第一个名字之后，所有名字前面都有一个空格。`explode()`计算该空间，在结果数组的 0 索引中放置一个空白字符串。

改变：

```
$name = explode(' ',$cast); 
```

到：

```
$name = explode(' ',ltrim($cast)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:29:18.990

问题是名称之间的逗号后有空格。要么只使用“，”或“，”作为分隔符，要么使用正则表达式来分割字符串。

```
$castsplit = preg_split('/,\s*/', $_511a); 
```

以上将接受所有与此类似的分隔符：`<comma><zero or more spaces>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:36:43.870

尝试一下：

```
$castsplit = explode(", ", $_511a);

//your variable name cast is ambiguous.  I changed it
foreach($castsplit as $member) {
  $nameArr = explode(' ', $member);
  $first = $nameArr[0];
  $last = end($nameArr);
  str_replace($first, $last, $member, 1);
  str_replace($last, $first, $member, 1);

  echo $member;
} 
```

注意第一个爆炸中逗号后的空格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:39:52.097

字符串 '$_511a' 之间有空格，因此explode 函数也必须有空格。所以 $name 的索引也会改变，因为现在我们在 0 索引上的第一个元素。

更改代码

```
$castsplit = explode(',' , $_511a); 
```

到

```
$castsplit = explode(', ' , $_511a); 
```

和

```
$firstname = $name[1]; 
```

到

```
$firstname = $name[0]; 
```

# html - 带有粘性页脚的全高侧边栏，具有固定宽度的内容

> ID：13384858
> 
> 赞同：0
> 
> 时间：2012-11-14T18:20:44.650
> 
> 标签：html, css, layout, fixed-width

我正在寻找一个带有全高侧边栏解决方案的粘性页脚，并在此处部分找到它：

[又一个 HTML/CSS 布局挑战 - 带有粘性页脚的全高侧边栏](https://stackoverflow.com/questions/6837603/yet-another-html-css-layout-challenge-full-height-sidebar-with-sticky-footer)

标记为正确答案的帖子解释了一个简洁的解决方案，但我想知道是否可以将流体内容 div 转换为固定的，与页脚相同。（固定我的意思是固定宽度）。

内容 div 和页脚应覆盖整个屏幕的可见宽度，并且在调整大小时，它们不应随窗口调整大小。它们应该保持不变，而是出现一个滚动条。

此外，我追求的另一件特别的事情是让侧边栏有一些额外的左边距。这是小提琴：

[http://jsfiddle.net/2NbMg/](http://jsfiddle.net/2NbMg/)

```
<div id="wrapper">
            <div id="content">
                <div id="sidebar">Sidebar<br/>Sidebar<br/>Sidebar<br/></div>
                <div id="main">
            Content
                </div>
            </div>
            <div class="push"></div>
        </div>
<div id="footer"><div id="footer-content">Footer</div></div> 
```

（可以在 fiddle 上找到 CSS 以保持这篇文章整洁）。

哦，如果有办法让内容从侧边栏的右侧跨越，而不是从窗口跨越，那就太棒了！

两天来我一直在寻找并试图实现这一目标，但没有成功。如果有人可以提供帮助，我将非常感激..

**稍后编辑**@toninoj：

再次感谢您的意见，我很抱歉没有这么明确。基本上，我希望页脚占据全宽，尤其是在宽屏和笔记本电脑上。我想远离 100% 宽度的原因是我希望我的页脚在调整窗口大小（变小）时仍然很大，而不是在调整大小或根据窗口大小进行调整。页脚将包含大量数据，并且在调整大小时看起来很糟糕。

我可以投入大量像素以保持其宽度固定，但这不会在笔记本电脑上造成问题吗？（滚动条出现虽然不是必需的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:44:28.260

您需要指定元素的确切宽度，例如`width:200px;`，您应该给它`position:fixed`以使其具有粘性。你也应该给它`overflow:scroll;`

如果您想要一个没有滚动条的固定宽度页脚，您只需指定类似

```
width:1600px;
overflow:hidden; 
```

# python - scipy中样条插值的系数

> ID：13384859
> 
> 赞同：11
> 
> 时间：2012-11-14T18:20:50.417
> 
> 标签：python, matlab, scipy

我想通过 scipy 计算样条插值的系数。在 MATLAB 中：

```
x=[0:3];
y=[0,1,4,0];
spl=spline(x,y);
disp(spl.coefs); 
```

它会返回：

```
ans =

   -1.5000    5.5000   -3.0000         0
   -1.5000    1.0000    3.5000    1.0000
   -1.5000   -3.5000    1.0000    4.0000 
```

但是我不能通过 scipy 中的 interpolate.splrep 来做到这一点。能告诉我怎么计算吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T15:12:20.973

我不确定有什么方法可以从 scipy.xml 获得这些系数。给你`scipy.interpolate.splrep`的是b样条的结系数。Matlab 的样条曲线给你的似乎是描述连接你传入的点的三次方程的部分多项式系数，这让我相信 Matlab 样条曲线是基于控制点的样条曲线，例如 Hermite 或 Catmull-Rom 而不是b样条。

但是，`scipy.interpolate.interpolate.spltopp`确实提供了一种获取 b 样条的部分多项式系数的方法。不幸的是，它似乎不太好用。

```
>>> import scipy.interpolate
>>> x = [0, 1, 2, 3]
>>> y = [0, 1, 4, 0]
>>> tck = scipy.interpolate.splrep(x, y)
>>> tck
Out: 
    (array([ 0.,  0.,  0.,  0.,  3.,  3.,  3.,  3.]),
    array([  3.19142761e-16,  -3.00000000e+00,   1.05000000e+01,
        0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
        0.00000000e+00,   0.00000000e+00]),
    3)

>>> pp = scipy.interpolate.interpolate.spltopp(tck[0][1:-1], tck[1], tck[2])

>>> pp.coeffs.T
Out: 
    array([[ -4.54540394e-322,   0.00000000e+000,   0.00000000e+000,
           0.00000000e+000],
        [ -4.54540394e-322,   0.00000000e+000,   0.00000000e+000,
           0.00000000e+000],
        [ -4.54540394e-322,   0.00000000e+000,   0.00000000e+000,
           0.00000000e+000],
        [  0.00000000e+000,   0.00000000e+000,   0.00000000e+000,
           0.00000000e+000],
        [  0.00000000e+000,   0.00000000e+000,   0.00000000e+000,
           0.00000000e+000]]) 
```

请注意，每个结有一组系数，而不是每个传入的原始点都有一个系数。此外，将系数乘以 b 样条基矩阵似乎不是很有帮助。

```
>>> bsbm = array([[-1,  3, -3,  1], [ 3, -6,  3,  0], [-3,  0,  3,  0], 
                 [ 1,  4,  1,  0]]) * 1.0/6
Out: 
    array([[-0.16666667,  0.5       , -0.5       ,  0.16666667],
        [ 0.5       , -1\.        ,  0.5       ,  0\.        ],
        [-0.5       ,  0\.        ,  0.5       ,  0\.        ],
        [ 0.16666667,  0.66666667,  0.16666667,  0\.        ]])

>>> dot(pp.coeffs.T, bsbm)
Out: 
    array([[  7.41098469e-323,  -2.27270197e-322,   2.27270197e-322,
           -7.41098469e-323],
        [  7.41098469e-323,  -2.27270197e-322,   2.27270197e-322,
           -7.41098469e-323],
        [  7.41098469e-323,  -2.27270197e-322,   2.27270197e-322,
           -7.41098469e-323],
        [  0.00000000e+000,   0.00000000e+000,   0.00000000e+000,
           0.00000000e+000],
        [  0.00000000e+000,   0.00000000e+000,   0.00000000e+000,
           0.00000000e+000]]) 
```

FORTRAN 分段多项式包[PPPack](http://people.sc.fsu.edu/~jburkardt/f_src/pppack/pppack.html)有一个`bsplpp`从 B 样条转换为分段多项式形式的命令，可以满足您的需求。不幸的是，目前还没有 PPPack 的 Python 包装器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-11T12:40:59.047

如果您安装了 scipy 版本 >= 0.18.0，则可以使用 scipy.interpolate 中的 CubicSpline 函数进行三次样条插值。

您可以通过在 python 中运行以下命令来检查 scipy 版本：

```
#!/usr/bin/env python3
import scipy
scipy.version.version 
```

如果您的 scipy 版本 >= 0.18.0，您可以运行以下示例代码进行三次样条插值：

```
#!/usr/bin/env python3

import numpy as np
from scipy.interpolate import CubicSpline

# calculate 5 natural cubic spline polynomials for 6 points
# (x,y) = (0,12) (1,14) (2,22) (3,39) (4,58) (5,77)
x = np.array([0, 1, 2, 3, 4, 5])
y = np.array([12,14,22,39,58,77])

# calculate natural cubic spline polynomials
cs = CubicSpline(x,y,bc_type='natural')

# show values of interpolation function at x=1.25
print('S(1.25) = ', cs(1.25))

## Aditional - find polynomial coefficients for different x regions

# if you want to print polynomial coefficients in form
# S0(0<=x<=1) = a0 + b0(x-x0) + c0(x-x0)^2 + d0(x-x0)^3
# S1(1< x<=2) = a1 + b1(x-x1) + c1(x-x1)^2 + d1(x-x1)^3
# ...
# S4(4< x<=5) = a4 + b4(x-x4) + c5(x-x4)^2 + d5(x-x4)^3
# x0 = 0; x1 = 1; x4 = 4; (start of x region interval)

# show values of a0, b0, c0, d0, a1, b1, c1, d1 ...
cs.c

# Polynomial coefficients for 0 <= x <= 1
a0 = cs.c.item(3,0)
b0 = cs.c.item(2,0)
c0 = cs.c.item(1,0)
d0 = cs.c.item(0,0)

# Polynomial coefficients for 1 < x <= 2
a1 = cs.c.item(3,1)
b1 = cs.c.item(2,1)
c1 = cs.c.item(1,1)
d1 = cs.c.item(0,1)

# ...

# Polynomial coefficients for 4 < x <= 5
a4 = cs.c.item(3,4)
b4 = cs.c.item(2,4)
c4 = cs.c.item(1,4)
d4 = cs.c.item(0,4)

# Print polynomial equations for different x regions
print('S0(0<=x<=1) = ', a0, ' + ', b0, '(x-0) + ', c0, '(x-0)^2  + ', d0, '(x-0)^3')
print('S1(1< x<=2) = ', a1, ' + ', b1, '(x-1) + ', c1, '(x-1)^2  + ', d1, '(x-1)^3')
print('...')
print('S5(4< x<=5) = ', a4, ' + ', b4, '(x-4) + ', c4, '(x-4)^2  + ', d4, '(x-4)^3')

# So we can calculate S(1.25) by using equation S1(1< x<=2)
print('S(1.25) = ', a1 + b1*0.25 + c1*(0.25**2) + d1*(0.25**3))

# Cubic spline interpolation calculus example
    #  https://www.youtube.com/watch?v=gT7F3TWihvk 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-25T22:19:02.097

以下是我如何获得类似于 MATLAB 的结果：

```
>>> from scipy.interpolate import PPoly, splrep
>>> x = [0, 1, 2, 3]
>>> y = [0, 1, 4, 0]
>>> tck = splrep(x, y)
>>> tck
Out: (array([ 0.,  0.,  0.,  0.,  3.,  3.,  3.,  3.]),
 array([  3.19142761e-16,  -3.00000000e+00,   1.05000000e+01,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00]),
 3)

>>> pp = PPoly.from_spline(tck)
>>> pp.c.T
Out: array([[ -1.50000000e+00,   5.50000000e+00,  -3.00000000e+00,
      3.19142761e-16],
   [ -1.50000000e+00,   5.50000000e+00,  -3.00000000e+00,
      3.19142761e-16],
   [ -1.50000000e+00,   5.50000000e+00,  -3.00000000e+00,
      3.19142761e-16],
   [ -1.50000000e+00,   5.50000000e+00,  -3.00000000e+00,
      3.19142761e-16],
   [ -1.50000000e+00,  -8.00000000e+00,  -1.05000000e+01,
      0.00000000e+00],
   [ -1.50000000e+00,  -8.00000000e+00,  -1.05000000e+01,
      0.00000000e+00],
   [ -1.50000000e+00,  -8.00000000e+00,  -1.05000000e+01,
      0.00000000e+00]]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T02:40:07.127

[scipy.interpolate.splrep](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.splrep.html#scipy.interpolate.splrep)上的文档说您可以获得系数：

```
Returns:

  tck : tuple

  (t,c,k) a tuple containing the vector of knots, the B-spline coefficients, and the degree of the spline. 
```

# ios - 如何在 OpenAL 中使用基于磁盘的缓冲区？

> ID：13384864
> 
> 赞同：1
> 
> 时间：2012-11-14T18:21:21.720
> 
> 标签：ios, buffer, disk, openal

在我的 iOS 应用程序中，我有大型 PCM 文件。我了解 OpenAL 缓冲区驻留在内存中。是否可以让缓冲区从磁盘流式传输？

谢谢。

# html - 在中心对齐 div 不起作用

> ID：13384865
> 
> 赞同：1
> 
> 时间：2012-11-14T18:21:23.893
> 
> 标签：html, css, alignment, center

这是页面：[http ://trozato.com/](http://trozato.com/)

我尝试将整个时事通讯（mailchimp）div 居中，但它不起作用。我已经输入了以下代码：

```
#mc_embed_signup {
margin: 0 auto; 
```

使其居中。我希望尺寸为 400 像素，当我尝试更改提交按钮的尺寸以使其相同时，在浏览器（chrome 工具）上使用以下代码它可以工作，但是当我将其放入代码中时不是。

```
#mc_embed_signup input.button {
display: block;
width: 58%;
margin: 0 0 10px 0;
min-width: 90px;
} 
```

应该做的 `width: 58%;`工作..不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:28:37.840

简单：将 Input 元素的 margin-left 和 margin-right 设置为“auto”。

示例 CSS：

```
#mce-EMAIL
{
   margin-left: auto;
   margin-right: auto;
}

#mc-embedded-subscribe
{
   margin-left: auto;
   margin-right: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:44:30.810

尝试这个：

```
#mc_embed_signup input.button {
display: block;
width: 35%;
margin: 0 auto;
min-width: 90px;
}

#mc_embed_signup input.email {
display: block;
padding: 8px 0;
text-indent: 5px;
width: 58%;
min-width: 130px;
} 
```

# css - 水平堆叠不同的背景图像？

> ID：13384871
> 
> 赞同：0
> 
> 时间：2012-11-14T18:21:55.710
> 
> 标签：css, background-image

我的应用程序中有一个元素需要三个不同的背景，这些背景应该水平堆叠（？），一个接一个。

SliceA 是 3 个中的第一个，宽度为 66px，然后我希望 SliceB 在 SliceA 结束后立即开始，并重复-x 直到它在 SliceC 开始之前停止（最后一个切片有 21px - 如果重要的话）。

现在，如果我这样做：

```
background-image: url('imgs/hint1_sliceA_66x29.png'), url('imgs/hint1_sliceB_1x29.png'), url('imgs/hint1_sliceC_21x29.png');
background-repeat: no-repeat, repeat-x, no-repeat; 
```

SliceB 实际上会在 x 轴上重复，但会贯穿元素的整个宽度（请注意，这些切片具有透明度，因此您最终可以查看其中一个背景切片是否位于另一个背景切片之下）。无论如何，我天真地尝试了这个：

```
background-position: left bottom, 66px -21px bottom, right bottom; 
```

但它显然不允许我定义背景元素之一的左右边距。

有没有人可以解决我如何实现这一目标？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:33:48.777

如果您的图像没有任何透明度，那么只要您更改背景的顺序（即将中间的重复背景移动到列表中的最后一个），您所拥有的就会起作用，[例如这里](http://jsfiddle.net/6WbBs/)。在此示例中，背景图像确实具有透明背景，这使您可以看到重叠的背景。您可能想测试它的浏览器兼容性，它适用于 Linux 上的 Chrome 和 Firefox。

```
 background-image: 
        url('imgs/hint1_sliceA_66x29.png'),
        url('imgs/hint1_sliceC_66x29.png'),
        url('imgs/hint1_sliceB_66x29.png');
    background-position: left bottom, right bottom, left bottom;
    background-repeat: no-repeat, no-repeat, repeat-x;​ 
```

如果不是这种情况并且您的情况允许，将您的图像转换为没有透明度元素的图像可能是最简单的。

或者，您可以使用填充和`background-clip`属性，[例如](http://jsfiddle.net/Djt9x/1/)：

```
 background-clip: border-box, border-box, content-box;
    -webkit-background-clip:border-box, border-box, content-box;
    padding: 0 66px; 
```

# git - Github Windows 客户端“加载提交失败”

> ID：13384875
> 
> 赞同：10
> 
> 时间：2012-11-14T18:22:07.137
> 
> 标签：git, github, github-for-windows

我有一个较大的（如 ~15,000 次提交）Git 存储库，从命令行 Git 访问时似乎很好，但是当我在 Github Windows 客户端中打开存储库时，我总是收到错误“加载提交失败 - 加载提交失败存储库的历史记录。您可能需要打开一个 shell 并调试此存储库的状态。”

如果我取消该错误消息，那么事情似乎很好。我的直接问题是是否有办法告诉客户端尝试运行的 local-git 或 web-github 命令失败了。不过，更一般地说，Github 客户端是否有诊断模式或日志，如果可能的话，我可以告诉 UI 正在启动的命令吗？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T00:57:21.983

回答我自己的问题...

我联系了 Github 支持，并获得了有关如何为客户端获取日志的说明：

[https://help.github.com/articles/accessing-the-github-for-windows-log](https://help.github.com/articles/accessing-the-github-for-windows-log)

我遇到的问题在日志中很明显，结果证明这是 LibGit2Sharp 中的一个已知错误，由分支名称中的“@”符号引起。

希望这个答案对将来的某人有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-15T17:45:34.300

我有同样的问题，但它真的很容易解决。你只需要走

```
C:\Users\User 
```

然后删除 .gitconfig 文件。

（可选）创建所有存储库的备份，但是您必须克隆所有存储库。

# git - 从现有克隆重建 GIT 存储库

> ID：13384882
> 
> 赞同：1
> 
> 时间：2012-11-14T18:22:36.167
> 
> 标签：git, version-control

我正在尝试使用以下步骤从现有克隆重建 git repo：

```
git init --bare project.git
git remote add project project.git
git push --all project 
```

我注意到这不会推动所有分支。它只推送主分支。

我不想为每个分支重复这个过程。是否有一个命令可以完成此操作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:26:01.360

`--mirror`您可以通过其他方式使用该选项进行克隆。然后只需复制回购。如果您需要推送所有这些并且它们没有设置为跟踪，您可以：

```
git checkout HEAD 
```

变得无头，因此您在分支输出中没有星号。

```
git branch | xargs git push origin 
```

使用 xargs 将每个分支作为`git push origin`. 可以选择添加`-u`到设置跟踪，以便下次您可以`git push`同步。

# wcf - WCF Streaming - 谁关闭文件？

> ID：13384886
> 
> 赞同：5
> 
> 时间：2012-11-14T18:22:46.977
> 
> 标签：wcf, streaming

根据 Microsoft 的示例，以下是通过 WCF 流式传输文件的方式：

```
 // Service class which implements the service contract
    public class StreamingService : IStreamingSample
    {

        public System.IO.Stream GetStream(string data)
        {
            //this file path assumes the image is in
            // the Service folder and the service is executing
            // in service/bin 
            string filePath = Path.Combine(
                System.Environment.CurrentDirectory,
                ".\\image.jpg");
            //open the file, this could throw an exception 
            //(e.g. if the file is not found)
            //having includeExceptionDetailInFaults="True" in config 
            // would cause this exception to be returned to the client
            try
            {
                FileStream imageFile = File.OpenRead(filePath);
                return imageFile;
            }
            catch (IOException ex)
            {
                Console.WriteLine(
                    String.Format("An exception was thrown while trying to open file {0}", filePath));
                Console.WriteLine("Exception is: ");
                Console.WriteLine(ex.ToString());
                throw ex;
            }
        }
... 
```

现在，我如何知道传输完成后谁负责释放 FileStream？

编辑：如果代码放在“使用”块内，则流在客户端收到任何内容之前被关闭。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:07:04.600

服务应该清理而不是客户端。WCF 的 OperationBehaviorAttribute.AutoDisposeParameters 的默认值似乎是 true，因此它应该为您处理。虽然这似乎没有一个固定的答案。

您可以尝试使用[OperationContext.OperationCompleted Event](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.operationcompleted.aspx)：

```
OperationContext clientContext = OperationContext.Current;
clientContext.OperationCompleted += new EventHandler(delegate(object sender, EventArgs args)
   {
      if (fileStream != null)
         fileStream.Dispose();
   }); 
```

把它放在你回来之前。

检查这个[博客](http://devdump.wordpress.com/2008/12/07/disposing-return-values/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:26:08.467

简短的回答：调用代码，通过一个`using`块。

长答案：示例代码永远不应被视为良好实践的典范，它只是为了说明一个非常具体的概念。真正的代码永远不会有这样的`try`块，它不会给代码增加任何价值。错误应该记录在最顶层，而不是最深处。记住这一点，样本变成了一个表达式，`File.OpenRead(filePath)`，它可以简单地插入到`using`需要它的块中。

**更新**（查看更多代码后）：

只需从函数返回流，WCF 将决定何时处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:57:05.603

流需要由负责读取它的一方关闭。例如，如果服务将流返回给客户端，则客户端应用程序负责关闭流，因为服务不知道或无法控制客户端何时完成读取流。此外，WCF 不会再次关闭流，因为它不知道接收方何时完成读取。:)

HTH，阿米特·巴蒂亚

# visual-studio - 我的 CSS 图像无法在 Windows Azure 上运行

> ID：13384890
> 
> 赞同：6
> 
> 时间：2012-11-14T18:23:20.120
> 
> 标签：visual-studio, azure, visual-studio-lightswitch, azure-web-app-service

我有一个非常奇怪的情况，即站点部署到 Windows Azure 后 CSS 图像不显示。

1.  图像是项目的一部分（所有文件和子文件夹都包含在项目中）

2.  所有图像都有内容的构建动作

3.  我没有使用相对路径，总是在我的视图 /content/path/to/images 上使用绝对路径，但在 CSS 上有相对路径 url(../img/image.png) 但这应该不是问题。

4.  静态文件正常（CSS 和 Javascript 工作正常），除了图片没有显示。

我使用 git 进行部署，但即使使用发布向导，我也得到了相同的结果。

如果我用完整路径请求它们，图像就在那里。这是“不真实的”；）

我一定在这里忽略了一个关键的东西，但找不到它。谢谢你的时间。

编辑：

图像通过 img 标签工作。因此，只有毫无意义的 CSS 图像才能在本地正常工作。

我想我可以分享链接，这样你就可以看到这个东西了；）

[http://receivably.azurewebsites.net](http://receivably.azurewebsites.net)

看看左上角的标志，什么都没有出现，这里是 HTML 和 CSS（这在几个部署前运行良好，在本地运行良好。

```
<a class="brand" href="/">name</a> 
```

在 CSS 中：

```
.navbar .brand {
    display: block;
    width: 180px;
    height: 34px;
    padding-top: 0;
    padding-bottom: 0;
    margin-top: 2px;
    margin-left: 10px;
    overflow: hidden;
    font-size: 18px;
    line-height: 600px;
    color: #333;
    background: url(../img/logo.png) no-repeat 0 0;
} 
```

如果我们直接请求文件，它就在那里：[http ://receivably.azurewebsites.net/content/site/img/logo.png](http://receivably.azurewebsites.net/content/site/img/logo.png)

CSS 文件放在 /content/site/css 中，图像放在 /content/site/img 中。

我可以补充一下，我现在无法 git push。只有发布向导起作用。我在 Azure 上的那个网站有很多问题，我的其他 3 个应用程序运行完美。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T18:55:21.653

我认为您的 css 捆绑器正在破坏事物。

这是我在主页上[捆绑的 CSS](http://receivably.azurewebsites.net/bundles/base?v=srAv3QORTX5sDB2QdhAsp6BNRW89pNi8-6boF4qqT3M1)中看到的内容（我已经将其缩小了一点）：

```
.brand
{
    display:block;width:180px;height:34px;padding-top:0;padding-bottom:0;margin-top:2px;
    margin-left:10px;overflow:hidden;font-size:18px;line-height:600px;color:#333;
    background:url(../img/logo.png) no-repeat 0 0
} 
```

注意： **background:url(../img/logo.png)**从执行的 CSS 可能不正确`/bundles/`

它应该说：

```
../content/site/img/logo.png 
```

或者如你所说`/content/site/img/logo.png`

这可以解释为什么它可以在本地（非捆绑）甚至在以前的部署中工作——因为捆绑相关的代码最近可能已经改变。这是一个典型的发布时间问题，这也是为什么打开捆绑全时（不仅仅是在发布模式下）是明智的原因之一，即使在编译时需要额外的 0.500 秒。:-)

希望有帮助。

# objective-c - NSDictionary 在 1 返回时返回错误

> ID：13384898
> 
> 赞同：0
> 
> 时间：2012-11-14T18:23:44.877
> 
> 标签：objective-c, nsdictionary

当我得到超过 1 个对象时，一切正常，但是当它只有 1 个时，它的反应很奇怪，我找不到它的解决方案。

首先，我将所有内容都设置在一个数组中：

```
NSArray *array = [[[dictionary objectForKey:@"Response"] objectForKey:@"objecten"] objectForKey:@"object"];
if (array == nil) {
    NSLog(@"Expected 'results' array");
    return;
} 
```

然后我在字典上使用 for 循环

```
for (NSDictionary *resultDict in array) {

    SearchResult *searchResult;

NSString *wrapperType = [resultDict objectForKey:@"type"];    

 if ([wrapperType isEqualToString:@"rent"]) 
 {
        searchResult = [self parseHuur:resultDict];

 }

        if (searchResult != nil) {
            [searchResults addObject:searchResult];
        }} 
```

因此，当结果返回超过 1 时，一切正常，但是当只有一个返回时，我得到：

```
-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x6e52c30
*** Terminating app due to uncaught exception 
'NSInvalidArgumentException', reason: '-[__NSCFString objectForKey:]: 
unrecognized selector sent to instance 0x6e52c30' 
```

它指向这一行：

```
NSString *wrapperType = [resultDict objectForKey:@"type"]; 
```

我真的不明白...我在浏览器中使用相同的链接检查了 api 的结果，它确实返回了 1 个对象，但是当我记录 resultDict（NSlog 它）时，我只得到一个答案：id 而不是带有所有参数的整个对象（我不知道这是否是正确的名称）

怎么可能 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:32:16.923

您的一些结果不是完整的 NSDictionaries，而只是 NSStrings。你可以检查一下：

```
for (id result in array) {
   if ([result isKindOfClass:[NSDictionary class]]) {
      NSDictionary *resultDict = (NSDictionary *)result;
   ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:34:57.787

当您对 NSDictionary 使用快速枚举时，迭代变量来自字典中的键集而不是值。

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T01:05:03.580

根据您的评论，`array`并不总是您提到的数组。它可以是数组或字典。所以试试这个，

```
id someObject = [[[dictionary objectForKey:@"Response"] objectForKey:@"objecten"] objectForKey:@"object"]; //naming it as someObject since it is not always an array

if (someObject == nil) {
    NSLog(@"Expected 'results' array");
    return;
}

if ([someObject isKindOfClass:[NSDictionary class]]) { //Just add this
    someObject = [NSArray arrayWithObject:someObject];
} 

NSArray *array = (NSArray *)someObject;//type cast to an array now

for (NSDictionary *resultDict in array) {

   SearchResult *searchResult;
   NSString *wrapperType = [resultDict objectForKey:@"type"];    

   if ([wrapperType isEqualToString:@"rent"]) 
   {
        searchResult = [self parseHuur:resultDict];
   }
   if (searchResult != nil) {
        [searchResults addObject:searchResult];
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:33:53.343

resultDict 不是 NSDictionary，因此您不能在此对象上调用 objectForKey:。

更好的解决方案是在 for 循环中将 resultDict 视为[id 类型](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html)，并在使用它之前检查其类类型是否为 NSDictionary。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T18:34:52.800

```
-[__NSCFString objectForKey:] 
```

所以它`objectForKey:`在一个`NSString`. 您用于获取对象的 API 似乎遵循一个常见的习惯用法：它使用鸭子类型/多态（使用这些与 OO 相关的漂亮词），如果它有多个结果，它会返回一个对象*数组*，或单个对象（而**不是**一个元素的数组），当它只有一个结果时。因此，您必须使用反射（OMG，甚至更多 OO 术语！）来检查返回的对象是否实际上是一个数组 - 要么

```
id result = [dictionary objectForKey:@"Response"];
id value;
if ([result isKindOfClass:[NSDictionary class]]) {
    value = [[result object objectForKey:@"objecten"] objectForKey:@"object"];
} else {
    value = result;
} 
```

或者

```
id value;
if ([dictionary isKindOfClass:[NSDictionary class]]) {
    value = [[[dictionary objectForKey:@"Result"] result object objectForKey:@"objecten"] objectForKey:@"object"];
} else {
    value = dictionary;
} 
```

两者都试一下，哪个都行。

# c# - 当我将 RoutedEventArgs 事件标记为已处理时，为什么会引发异常？

> ID：13384899
> 
> 赞同：3
> 
> 时间：2012-11-14T18:23:43.710
> 
> 标签：c#, wpf, wpf-controls

我正在尝试将事件标记为已处理，但是当我尝试这样做时会引发异常。

我有以下函数在[`LostFocus`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.lostfocus.aspx)a 事件中被调用`TextBox`：

```
private void TextBox_LostFocus(object sender, RoutedEventArgs e)
{
   // ...
   // do something
   // ...

   e.Handled = true;
} 
```

但是，一旦`e.Handled = true`执行，就会引发以下异常：

> PresentationCore.dll 中出现“System.InvalidOperationException”类型的未处理异常
> 
> 附加信息：每个 RoutedEventArgs 都必须有一个与之关联的非空 RoutedEvent。

我曾尝试`e.Handled`在函数中的其他代码之前移动该行，但这无济于事。

为什么会引发异常以及有哪些可能的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:12:17.467

弄清楚了。`TextBox_LostFocus`正在从应用程序的其他地方调用，事件参数为`null`.

`TextBox_LostFocus`因此，对于某些对,的函数调用`e.Handled`不起作用（因为`e`为空），但在其他一些场景中起作用（当它实际被框架调用时）。

# jquery - Ajax Loading Icon Not Displaying on Ajax function - Codeigniter

> ID：13384900
> 
> 赞同：3
> 
> 时间：2012-11-14T18:23:44.527
> 
> 标签：jquery, ajax, codeigniter, codeigniter-2

For some reason, my Ajax loader icon is not showing and hiding as it should. Here's my snippet of jQuery code that handles the ajax call. I can see the #loading DIV with Chrome's Developer Tools...the problem lies is that jQuery is not showing the DIV (inline style set to `display:none` on the div itself). If I remove that inline style, it shows up where it should...

Anything I'm missing here?

```
//website URL grab - Ajax call
$('.loadBTN').on("click", function(){

    var check_url = $('#web_address').val();

    if (!check_url || check_url == 'http://') { // form validation
        //alert('Please enter valid URL');
        // Do nothing
        return false;
    };

    var web_url = {
        url: $('#web_address').val(),
        ajax: '1' // needed for controller, to verify that request is ajax
    };         

    //display ajax loader animation
    $('#loading').show();

    $.ajax({
        url: 'ajax/web_embed',
        type: 'POST',
        data: web_url,
        success: function(msg) {
            $('#ajaxContent').html(msg); // output success in this container
            $('#loading').hide();
        } 
    });        

    return false;
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:31:13.373

我建议订阅所有 ajax 启动/停止事件，而与谁负责无关：

```
$("#loading")
    .ajaxStart(function(){ $(this).show(); })
    .ajaxStop(function(){ $(this).hide(); }); 
```

加载将在有 ajax 请求时立即出现，然后在没有 ajax 请求正在进行时隐藏...

见[http://api.jquery.com/ajaxStart/](http://api.jquery.com/ajaxStart/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:54:53.807

一个更干净的 Ajax 请求 IMO。利用`Context`和`BeforeSend`

```
var scope = $("#container"); // wrap in a container div to use as the context

    $.ajax({
        url: 'ajax/web_embed',
        type: 'POST',
        data: web_url,
        context : scope,
        beforeSend : function(){ // use beforeSend 
            $('#loading').animate({
                'display'   :   'block'
            });
        },
        success: function(msg) {
            $(this).html(msg); // $(this) == context => #container
        } 
    }); 
```

# asp.net-mvc - Grid into Grid Popup Editor - Passing ID parameter in sub grid

> ID：13384901
> 
> 赞同：3
> 
> 时间：2012-11-14T18:23:45.290
> 
> 标签：asp.net-mvc, razor, kendo-ui

I have a Grid with Employes. There is a Edit button and the edit mode is set to Popup. In the EditorTemplate of the entity I want to edit, there is another grid that has a history of Salary with a incell or inline edit mode.

Both grids uses Ajax datasources. The problem is with the inner grid binding. The controller action feeding a Json result to the ajax call requires the ID of the employe we are editing to return the appropriate Salary history. However, Kendo UI ASP.NET MVC wrapper will render some sort of template of the editor before knowing which employee we want to edit, then it will edit it when we are requesting the popup.

How can I feed the Employe ID in the Read Ajax call?

**Main Grid**

```
@(Html.Kendo().Grid<MyProject.Business.Models.EmployeDTO>().Name("EmployeGrid")
.ToolBar(toolbar => toolbar.Create())
.Columns(cols =>
{
    cols.Bound(o => o.someData).Title("Some Data");
    cols.Bound(o => o.moreData).Title("More Data");
    cols.Command(o =>
    {
            o.Edit();
        o.Destroy();
    }).Title("&nbsp;");
})
.Editable(editor => editor
    .Mode(GridEditMode.PopUp)
    .Window(window => window.Draggable().Resizable().HtmlAttributes(new { @style = "width:700px;" })))
.Sortable()
.Filterable()
.Groupable()
.DataSource(datasource => datasource
    .Ajax()
    .Model(model => model.Id(o => o.id))
    .Read(read => read.Action("GetAll", "EmployesAjax"))
    .Update(update => update.Action("Update", "EmployesAjax"))
    .Create(create => create.Action("Create", "EmployesAjax"))
    .Destroy(destroy => destroy.Action("Destroy", "EmployesAjax"))
    )
) 
```

**Inner Grid** (In Views/Shared/EditorTemplates/EmployeDTO.cshtml)

```
@Html.Kendo().Grid<MyProject.Business.Models.SalairyDTO>().Name("SalaryGrid")
.Columns(cols =>
{
    cols.Bound(o => o.someInfo).Title("Some Info");
})
.DataSource(datasource => datasource
    .Ajax()
    .Model(model =>
    {
        model.Id(o => o.id);
        model.Field(o => o.employe_id).DefaultValue(Model.id);
    })

    // NEED THE ID HERE
    .Read(read => read.Action("GetByEmployeId", "SalairyAjax", new { id = "" }))

    .Update(update => update.Action("Update", "SalairyAjax"))
    .Create(create => create.Action("Create", "SalairyAjax"))
    .Destroy(destroy => destroy.Action("Destroy", "SalairyAjax")))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:35:37.000

基本上，我建议您将内部 Grid 的 AutoBind 选项设置为 false 并使用外部 Grid 的编辑事件来执行读取请求并将值作为附加参数传递。

这是一个例子：

```
function onEditOfEmployeGrid(e){
    $('#SalaryGrid').data().kendoGrid.dataSource.read({id:e.model.EmployeeID})
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:55:59.823

您可以简单地使用网格中的 addtionaldata 参数从网格中传递值。然后可以使用 ViewData["RouteID"] 在网格弹出编辑器中引用（左侧）上的 RouteID。我希望这会有所帮助

```
 .Editable(editable => editable.Mode(GridEditMode.PopUp)
         .TemplateName("busStop")
         .DisplayDeleteConfirmation(true)
         .Window(window => window.Modal(true).Resizable().Draggable())
         .AdditionalViewData(new { RouteID = Model.RouteID })) 
```

# windows - How can I get a clock time accurate to 1ms in windows?

> ID：13384904
> 
> 赞同：-1
> 
> 时间：2012-11-14T18:23:56.717
> 
> 标签：windows, time, clock

I've seen lots of questions about high precision timers in windows, but what I really need is something that gives me the clock time in windows that's more accurate than the 10-15ms granularity GetLocalTime() offers.

I couldn't find any existing and simple solution so I came up with one of my own, not completely flushed out, but the basic idea works until midnight. Sharing it here so it can be helpful to others.

Store an anchor time when the program starts and use timeGetTime() to get the system uptime in ms (which is granular to less than 1 ms) and adjust the anchortime accordingly.

Code is in the answer.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T18:23:56.717

First time you run it, it gets the time and the tickcount so they're in sync and we have something to measure by. The init section isn't threadsafe and it doesn't wrap over midnight, but that's easily added by following the carry form below....

```
// this solution is limited to 49+ days of uptime
int timeinitted = 0;
SYSTEMTIME anchortime;
DWORD anchorticks; 

void GetAccurateTime(SYSTEMTIME *lt)
  {
    if (timeinitted == 0)
      { // obviously this init section isn't threadsafe. 
        // get an anchor time to sync up with system ticks. 
        GetLocalTime(&anchortime);
        anchorticks = timeGetTime();
        timeinitted = 1;
      }

     DWORD now = timeGetTime();
     DWORD flyby = now - anchorticks;

     // now add flyby to anchortime
     memcpy (lt, &anchortime, sizeof(anchortime));
     // you can't do the math IN the SYSTEMTIME because everything in it is a WORD (16 bits)
     DWORD ms = lt->wMilliseconds + flyby;
     DWORD carry = ms / 1000;
     lt->wMilliseconds = ms % 1000;
     if (carry > 0)
       {
         DWORD s = lt->wSecond + carry;
         carry = s / 60;
         lt->wSecond = s % 60;
         if (carry > 0)
           {
             DWORD m = lt->wMinute + carry;
             carry = m / 60;
             lt->wMinute = m % 60;
             if (carry > 0) // won't wrap day correctly.
               lt->wHour = (((DWORD)lt->wHour + carry)) % 24;
           }
         // add day and month and year here if you're so inspired, but remember the 49 day limit
       }
  } 
```

# c++ - 析构函数和构造函数

> ID：13384911
> 
> 赞同：0
> 
> 时间：2012-11-14T18:24:13.667
> 
> 标签：c++

有人可以向我解释为什么我会收到“错误：未在此范围内声明”吗？

num 和 denom 是类 Rationalnumber 的私有成员。

谢谢！

```
Rationalnumber::Rationalnumber(){
num = 0;
denom = 1;
int * n = new int;
int * d = new int;
*n = num;
*d = denom;
}

Rationalnumber::~Rationalnumber(){
delete n;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:26:39.497

`n`是类构造函数中的局部变量。当构造函数完成时超出范围时，应用程序的任何其他部分都不再可见；那个内存已经泄露了。

在调用析构函数时没有调用局部变量或成员变量`n`，因此：未在此范围内声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:25:57.913

“n”是构造函数中的局部变量。

您可能希望它成为类中的成员变量：

```
class Rationalnumber {
    int* n;
    int* d;
    .........
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T18:27:20.263

```
Rationalnumber::~Rationalnumber(){
delete n;
} 
```

是`n`班级成员吗？如果不是，那么它将给出错误，因为`n`既没有在析构函数中声明，也不是该类的成员。

但是，您已`n`在构造函数中声明，但这仅对构造函数是*本地*的。析构函数（或任何其他函数）无法访问该变量（在另一个函数或构造函数中声明）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:27:29.750

您在构造函数的范围内定义 n 。这段代码非常简单，你甚至不应该使用`new`整数`delete`。只需存储`n`并`d`作为班级成员。你的代码，即使是固定的，也会在你新的时候泄漏，但不要删除它。

# javascript - Add active class and change css of other items

> ID：13384912
> 
> 赞同：2
> 
> 时间：2012-11-14T18:24:26.640
> 
> 标签：javascript, jquery, html, ajax

I have this menu

```
 <ul id="menu" class="clearfix">
                <li>
                    <a href="">Product 1</a>
                </li>
                <li>
                    <a href="">Product 2</a>
                </li>
                <li>
                    <a href="">Product 3</a>
                </li>
                <li class="last">
                    <a href="">Product 4</a>
                </li>
            </ul> 
```

I want to make this effect. when you enter the page the text color of the menu items are white. If you click on one item it becomes active (keeping the white color text) and all the other items change it's color to gray, also when you hover over one the affected items are all the others.

I have tried with the .addClass but I have only managed to add the active class to the current item, but not change the others that aren´t active after the first click.

Anyone know the best jquery approach to this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:36:04.450

```
$("#menu li").hover(function() {
    $(this).removeClass('grey').siblings().addClass('grey');
}, function() {
    $(this).addClass('grey').siblings('.active').removeClass('grey');
    //
}).on('click', function() {
    $(this).removeClass('grey').addClass('active').siblings().addClass('grey').removeClass('active')
});​ 
```

[http://jsfiddle.net/y7Cn5/](http://jsfiddle.net/y7Cn5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:31:02.277

也许是这样的：

## 更新，具有悬停功能

# [jsFiddle](http://jsfiddle.net/SpYk3/2nZdg/)

```
$("#menu > li").on("click", function(e) {
    e.stopPropagation();
    $(".active").removeClass("active");
    $(this).removeClass("non-active").addClass("active").siblings().addClass("non-active");
})
.hover(function(e) {
    $(".non-hover").removeClass("non-hover");
    $(this).addClass("hover").siblings().addClass("non-hover");
}, function(e) {
    $(".hover, .non-hover").removeClass("hover non-hover");
}) 
```

如果这不能回答问题，那么问题就没有被理解，需要重新措辞，这就是问题中所问的一切

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:27:31.087

Here you go (siblings) 选择同一节点中的所有 OTHER 项

```
$("#menu li").click(function(){
  $(this).addClass("active").css("color","white")
  $(this).siblings().css("color","gray")
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:44:55.937

尝试

```
$("#menu > li").hover( function( ) {
    $(this).removeClass("hovered").siblings().addClass("hovered");
}, function( ) {
    $(this).addClass("hovered");
});

$("#menu > li").click( function( ) {
    $(this).addClass("active").siblings().removeClass("active");
}); 
```

# python - Highlight Active Navigation: django 1.4.2

> ID：13384918
> 
> 赞同：1
> 
> 时间：2012-11-14T18:24:40.260
> 
> 标签：python, django, templates, navigation

I am trying to set a base django template whose navigation elements will highlight when they are active. I have tried the following posts to create a templatetag to append an active value to the markup:

[Blog Post](http://ilostmynotes.blogspot.com/2010/03/django-current-active-page-highlighting.html)

[110j's answer to this Stack Overflow Question (not the accepted answer)](https://stackoverflow.com/questions/340888/navigation-in-django)

Both are suggesting using a templatetag to check if user is on selected page, then use that to add an active value to the navigation in the template. However, I get an `AttributeError` saying that: `'str' object has no attribute 'path'`. After searching, I cannot figure out how to remedy this problem..

How do I achieve the most de-coupled method of highlighting active navigation on Django 1.4.2 + python 2.7? Thank you very much for your input!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:04:41.413

老问题，但我有同样的问题。问题出在`settings.py`文件配置中。尝试在之后添加`TEMPLATE_LOADERS`：

```
TEMPLATE_CONTEXT_PROCESSORS = ('django.core.context_processors.request',
                               'django.contrib.auth.context_processors.auth',
                               'django.core.context_processors.static',
                              ) 
```

# linux - find folders in a directory, without listing the parent directory

> ID：13384922
> 
> 赞同：23
> 
> 时间：2012-11-14T18:24:52.357
> 
> 标签：linux, bash, find

Having trouble listing the contents of a folder I'm not in, while excluding the actual folder name itself.

ex:

```
root@vps [~]# find ~/test -type d
/root/test
/root/test/test1 
```

However I want it to only display /test1, as the example.

Thoughts?

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-21T11:24:26.947

简单的没有错

```
find ~/test -mindepth 1 
```

同样，这将产生相同的效果：

```
find ~/test/* 
```

因为它匹配其中包含的所有内容，`~/test/`但不匹配`~/test`自身。

顺便说一句，您几乎肯定会发现`find`该选项会在任何其他开关之后抱怨`-mindepth n`，因为排序通常很重要，但`-(min|max)depth n`开关会影响整体行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T18:37:23.870

你可以用`-exec`and做到这一点`basename`：

```
find ~/test -type d -exec basename {} \; 
```

**解释：**

*   如您所知，该`find ~/test -type d`部分递归地在 下查找所有目录。`~/test`
*   该`-exec basename {} \;`部件在`basename`上运行命令`{}`，这是将最后一步的所有结果代入的位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T18:26:30.463

然后你需要`-type f`代替`-type d`.

或者，如果您想显示文件夹列表，不包括父文件夹`-mindepth 1`( `find ~/test -type d -mindepth 1`)。

现在你编辑了它，我想你想要的可能是

```
find ~/test -type d -mindepth 1 |cut -d/ -f3- 
```

但我认为你需要更具体;-)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-17T02:09:45.450

我只是用`sed`

```
find $BASE -type d \( ! -iname "." \)|sed s/$BASE//g 
```

`$BASE`初始文件夹名称在哪里。

# iphone - iPhone 4 to iPhone 5 - toolbar doesn't move to the bottom

> ID：13384924
> 
> 赞同：1
> 
> 时间：2012-11-14T18:24:55.000
> 
> 标签：iphone, uitableview, toolbar

I have an app that is designed for the iPhone 4\. This app has a toolbar that was drag-dropped in Interface Builder to the bottom of the screen. When testing on simulator's iPhone 5 "device", the toolbar does NOT automatically go to the bottom of the screen.

My question is - is there some kind of a trick or technique, that will let all the UITables "stretch" to populate all the new available space, and toolbars go to the bottom no matter what kind iPhone it is being connected to? It would be painful, to do this programmatically - that is figure out what kind of an iPhone I am and then, programmatically reposition all the ui. If this is in fact a must, should any new iPhone apps be designed for 4" retina, and then programmatically shrink everything for iPhone 4 size, or is it better to design for 3.5", and then stretch and push down toolbars in case it is an iPhone 5 with 4" screen.

Thanks for any input..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:35:43.967

如果您只使用 iOS 6，最简单的方法是使用 Auto Layout 并在 Interface Builder 中添加约束。约束将描述工具栏的底部边缘应该等于超级视图的底部边缘。您不必专门为单个设备编写代码。为了让 UITableView 拉伸以填充所有可用空间，我再次建议使用***UIScrollView***上的约束（不是 UITableView，它位于滚动视图内）来描述这种行为，例如滚动视图的顶部边缘应该等于超级视图的顶部，左侧edge 应该等于 superview 的左侧，bottom edge 应该等于 UIToolbar 的顶部（在 IB 中，间距约束指定 UIToolbar 和 UIScrollView 之间的间距应等于 0），

如果不能使用约束，则使用 struts 和 springs 系统指定此行为，该系统利用视图上的 autoresizingMask 属性，指定 UITableView 的父 UIScrollView 具有灵活的宽度和高度，而 UIToolbar 具有固定的高度和灵活的和。您可以手动定位 UIScrollView 和 UIToolbar，方法是设置它们各自的 frame 属性，该属性描述左上边缘的 x、y 坐标以及视图的宽度和高度。

*   [iOS 视图编程指南 - 在运行时调整视图的大小和位置](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)
*   [Cocoa 自动布局指南：关于 Cocoa 自动布局](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW15)

# javascript - jQuery UI 不正确的变量替换

> ID：13384931
> 
> 赞同：0
> 
> 时间：2012-11-14T18:25:21.467
> 
> 标签：javascript, jquery, variables, user-interface, global

在我的一个应用程序中使用 jQuery UI 时，我收到一个奇怪的错误。我使用通用功能打开我的对话框，它被称为 `OpenDialog()`

这是代码：

```
function OpenDialog(href,parameters,width,botoes,dialog_name,dialog_id,modal,onOpen,onClose) 
{
    load("start");
    _id = dialog_id+'_'+Date.now();

    $.post(href,parameters, function(data){
        $(data).dialog({
            title               :   dialog_name,
            draggable           :   (modal) ? false : true,
            modal               :   modal,
            resizable           :   (modal) ? false : true,
            dialogClass         :   'dialog',
            width               :   width+'px',
            close               :   function(event,ui){
                                        if (typeof onClose !== 'undefined' && onClose !== false) { onClose(); }
                                        $(this).dialog("destroy").remove();                                                 
                                    },
            open                :   function(event,ui) {
                                        $(this).attr("id",_id);
                                        _id='#'+_id;
                                        if (typeof onOpen !== 'undefined' && onOpen !== false) { onOpen(_id); }
                                        execMaskOntoThis(_id);
                                        load("end");
                                    },
            buttons             :   botoes
        });
    });
} 
```

因此，当我创建一个新对话框时，它会为我生成一个唯一的 ID。我的问题是，当我为某些按钮使用变量 _id 时，出现了一些问题，并且“事件”显示在最后一个打开的对话框中。

难道我做错了什么？您对如何使用我的功能控制对话框中的唯一值有任何提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:51:06.730

试试这个：

```
function OpenDialog(href,parameters,width,botoes,dialog_name,dialog_id,modal,onOpen,onClose) 
{
    load("start");
    var _id = dialog_id+'_'+Date.now(); // _id is now part of the local scope of OpenDialog

    $.post(href,parameters, function(data){
        $(data).dialog({
            title               :   dialog_name,
            draggable           :   (modal) ? false : true,
            modal               :   modal,
            resizable           :   (modal) ? false : true,
            dialogClass         :   'dialog',
            width               :   width+'px',
            close               :   function(event,ui){
                                        if (typeof onClose !== 'undefined' && onClose !== false) { onClose(); }
                                        $(this).dialog("destroy").remove();                                                 
                                    },
            open                :   function(event,ui) {
                                        $(this).attr("id",_id);
                                        _id='#'+_id;
                                        if (typeof onOpen !== 'undefined' && onOpen !== false) { onOpen(_id); }
                                        execMaskOntoThis(_id);
                                        load("end");
                                    },
            buttons             :   botoes
        });
    });
} 
```

# javascript - 更改函数输入提交到 id

> ID：13384933
> 
> 赞同：1
> 
> 时间：2012-11-14T18:25:38.453
> 
> 标签：javascript

我在这里查看一些以 type="submit" 为目标的代码，我试图将其更改为 dom 中输入或按钮的 id="go"。我怎样才能将其重写为仍然有效。

```
 t.addEventListener("submit", function (A) {
    A.preventDefault();
    var C = w();
    var B = new C;
    B.append(q.value || q.placeholder);
    saveAs(B.getBlob("text/plain;charset=" + s.characterSet), (h.value || h.placeholder) + ".html")
    }, false); 
```

# c++ - 错误 C2062：类型 int 意外

> ID：13384935
> 
> 赞同：1
> 
> 时间：2012-11-14T18:25:45.293
> 
> 标签：c++, python, swig

我是 C++ 和 SWIG 的新手

我正在 Windows 环境中使用 SWIG 创建一个 python 模块。

创建包装类（example_wrap.cxx）后。开始使用 (python setup.py build_ext --inplace) 创建 python 模块。

但我得到***example_wrap.cxx(3090) : error C2062: type 'int' unexpected***

分级复杂.h：

```
class GradedComplex
{
public:
  typedef std::complex<double> dcomplex;
  typedef Item<dcomplex> item_type;
  typedef ItemComparator<dcomplex> comparator;
  typedef std::set<item_type, comparator> grade_type;

private:
  int n_;
  std::vector<grade_type *> grade_;
  std::vector<double> thre_;

public:
  GradedComplex(int n, double *thre);
  ~GradedComplex();

  void push(item_type item);
  void avg(double *buf);
};

#endif 
```

分级复杂.cc

```
GradedComplex::GradedComplex(int n, double *thre)
{
  n_ = n;
  for (int i = 0; i < n_; ++i)
  {
    thre_.push_back(thre[i]);
    grade_.push_back(new grade_type());
  }
} 
```

然后我构建它以使用 SWIG 生成 python 模块。

Swig 接口文件 (example.i) GradedComplex(int n, double *thre);

我不是 SWIG 接口文件的专家

生成的包装类有大量代码，所以我粘贴的很少。

代码：example_wrap.cxx

```
3083: #define SWIG_FILE_WITH_INIT
3084: #include "Item.h"
3085: #include "GradedComplex.h"
3086: typedef std::complex<double> dcomplex;
3087: typedef Item<dcomplex> item_type;
3088: typedef ItemComparator<dcomplex> comparator;
3089: typedef std::set<item_type, comparator> grade_type;   
3090: GradedComplex(int n, double *thre);
3091: void push(item_type item);
3092: void avg(double *buf);
3093: #include <string>
3094: #include <complex> 
3095: #include <iostream>
3096: #if PY_VERSION_HEX >= 0x03020000
3097: # define SWIGPY_SLICE_ARG(obj) ((PyObject*) (obj))
3098: #else
3099: # define SWIGPY_SLICE_ARG(obj) ((PySliceObject*) (obj))
3100: #endif 
```

GradedComplex 构造函数：

```
GradedComplex::GradedComplex(int n, double *thre)
{
  n_ = n;
  for (int i = 0; i < n_; ++i)
  {
    thre_.push_back(thre[i]);
    grade_.push_back(new grade_type());
  }
} 
```

请提出一个纠正这个错误的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:37:42.803

在 c++ 中不能有没有返回类型的函数。您应该为函数设置返回类型`GradedComplex`。构造函数不能这样声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:40:32.173

您显然`GradedComplex`在某个头文件（`GradedComplex.h`？）的某处声明了类

稍后您尝试在此行中使用此名称

```
GradedComplex(int n, double *thre); 
```

对于人类读者来说，这行代码可能看起来像是声明一个独立函数的尝试`GradedComplex`。从技术上讲，拥有与现有类同名的函数是合法的。但是，由于您没有为此函数指定返回类型，因此编译器不会将其视为函数声明。编译器认为您正在尝试使用声明`GradedComplex`符周围的冗余括号声明类型的对象，如

```
GradedComplex (a); 
```

出于这个原因，它的出现会`int`让人感到困惑，并导致`int`在第 3090 行出现关于意外的错误报告。

你想做什么？如果您尝试为 定义构造函数`GradedComplex`，那么您已经知道如何去做（您自己发布了正确的定义）。3090行的目的是什么？你为什么写那行？

# jquery - 使用 Jquery 更新输入值不起作用

> ID：13384940
> 
> 赞同：3
> 
> 时间：2012-11-14T18:26:03.237
> 
> 标签：jquery, input, drupal-7

我有一个 Drupal 7 站点，我正在尝试使用 Jquery 来修改使用 Jquery 的公开过滤器搜索表单。它适用于某些输入字段，但不是我想要的。使用下面的代码，**test-input-one**和**test-input-two**工作正常，但 Drupal 生成的输入字段**edit-field-s-city-value**不能。Jquery 代码构建一个下拉列表，然后应该在用户选择某些内容时更新其他输入框。

我正在使用 drupal_add_js('misc/jscodefile.js'); 在我的 ..views.tpl.php 文件中包含我的 Jquery 代码。

*材料*Jquery 代码（我添加了 // 注释）

```
$(document).ready(function($) {     
                ...           
                select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.label :
                    "Nothing selected, input was " + this.value);
                $("#test-input-one").val(ui.item.mcity);  // this works!
                $("#test-input-two").val(ui.item.mstate); // this works!            
                $("#edit-field-s-city-value").val(ui.item.mcity);  // this does not work!!
                 ...
                }); 
```

drupal 用 PHP 生成的 HTML 是：

```
 <div id="edit-field-s-city-value-wrapper" class="views-exposed-widget views-widget-filter-field_s_city_value">
                  <label for="edit-field-s-city-value">
            City          </label>
                        <div class="views-widget">
          <div class="form-item form-type-textfield form-item-field-s-city-value">
 <input type="text" id="**edit-field-s-city-value**" name="field_s_city_value" value="" size="20" maxlength="30" class="form-text" />
</div>
        </div>
              </div>
          <div id="edit-field-s-zip-value-wrapper" class="views-exposed-widget views-widget-filter-field_s_zip_value">
                  <label for="edit-field-s-zip-value">
            Zip (field_s_zip)          </label>
                        <div class="views-widget">
          <div class="form-item form-type-textfield form-item-field-s-zip-value">
 <input type="text" id="edit-field-s-zip-value" name="field_s_zip_value" value="" size="10" maxlength="10" class="form-text" />
</div>
        </div>
              </div>
                    <div class="views-exposed-widget views-submit-button">
      <input type="submit" id="edit-submit-test-view" name="" value="Apply" class="form-submit" />    </div>
      </div>

  <input type="text" id="test-input-one" name="one_value" value="" size="18" maxlength="40" class="form-text">
  <input type="text" id="test-input-two" name="two_value" value="" size="6" maxlength="10" class="form-text"> 
```

我在想嵌套的 div、css 标签或其他东西有些有趣，但我不知所措。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:26:56.013

我能想象这会出错的唯一方法是当 id "edit-field-s-city-value" 不是唯一的。

# php - PHP脚本错误注意：未定义的变量

> ID：13384943
> 
> 赞同：0
> 
> 时间：2012-11-14T18:26:10.100
> 
> 标签：php

我正在编写一个用于高级搜索的 PHP 脚本，但发生了错误。请帮助
**代码：**

```
$key    = $_GET['key'];
$auth   = $_GET['auth'];
$lang   = $_GET['lang'];
$pub    = $_GET['pub'];

if(isset($key) OR isset($auth) OR isset($lang) OR isset($pub))
{
    if ($key    != NULL){$keyword   = "AND (native_name LIKE '%".$key."%' OR unique_name LIKE '%".$key."%')";}
    if ($auth   != 0)   {$auther    = "AND auth_id=".$auth."";}
    if ($lang   != 0)   {$language  = "AND lang_id=".$lang."";}
    if ($pub    != 0)   {$publisher = "AND pub_id=".$pub."";}

    $search_query = "SELECT native_name from books WHERE status=1 ".$keyword." ".$auther." ".$language." ".$publisher."";
    print $search_query;
} 
```

**错误：**

注意：未定义变量：第 90 行 FILE_PATH 中的关键字
注意：未定义变量：第 90 行 FILE_PATH 中的 auther 注意：未定义变量：第 90
行 FILE_PATH 中的语言
注意：未定义变量：第 90 行 FILE_PATH 中的发布者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:32:56.820

如果您通过 if 语句创建变量，则可能不会创建这些变量。

您的情况有几种不同的选择。

1、使用三元语法

```
$keyword = $key != NULL ? "AND (native_name LIKE '%".$key."%' OR unique_name LIKE '%".$key."%')" : "";
$author = $auth !=0 ? "AND auth_id=".$auth : "";
$language = $lang !=0 ? "AND lang_id=".$lang : "";
$publisher = $pub !=0 ? "AND pub_id=".$pub : ""; 
```

2、预定义变量

```
$keyword = "";
$author = "";
$language = "";
$publisher = "";

if ($key    != NULL){$keyword   = "AND (native_name LIKE '%".$key."%' OR unique_name LIKE '%".$key."%')";}
if ($auth   != 0)   {$auther    = "AND auth_id=".$auth."";}
if ($lang   != 0)   {$language  = "AND lang_id=".$lang."";}
if ($pub    != 0)   {$publisher = "AND pub_id=".$pub."";} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:28:53.247

$keyword/$auther/etc.. 仅在设置了 _POST 中的相应值时才被分配。如果没有传入数据，$key/$auth/etc...将为空字符串或null，等于0/null。尝试：

```
if ($key != null) {
   $keyword = ...;
} else {
   $keyword = some default value;
} 
```

其他的也是如此。

# php - Netbeans, xdebug : 从浏览器开始调试

> ID：13384947
> 
> 赞同：2
> 
> 时间：2012-11-14T18:26:18.900
> 
> 标签：php, debugging, browser, netbeans, xdebug

`PHP files`我在`Netbeans`使用调试时遇到以下问题`xdebug`：当我直接调试时，`PHP file`一切正常。

但：

如果我调试整个文件（从 开始`index.html`）并且在单击执行我的提交按钮后`PHP file`，断点在哪里，它不起作用。我想设置断点以`PHP file`查看我从`HTML`页面中的表单收到的信息。

我想在通过 ajax 发送的这两个变量之后停止程序：

```
$username = $_REQUEST["username"];
$password = $_REQUEST["password"]; 
```

甚至可能吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T20:14:33.203

对于 Netbeans 设置[，请查看我](https://stackoverflow.com/a/13021858/1322642)的答案，它适用于 linux，但可能会对您有所帮助。

**在你的 index.html 中替换你** `action=`的

```
<form action="yourphpfile.php?XDEBUG_SESSION_START=netbeans-xdebug" method="post" name="FormName"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-23T21:05:18.550

正如此处另一个答案所建议的那样，无需修改表单代码即可启用调试。

1.  转到项目属性 > 运行配置 > 高级... > 调试 URL 并选中“不要打开 Web 浏览器”。
2.  不要在 Debugger Proxy 下设置 Host。
3.  保存这些设置。
4.  在项目窗口中，转到调试 > 调试项目 (Ctrl-F5)。这开始侦听调试连接。没有启动浏览器，但您会在状态栏（底部）中看到“等待连接...”。
5.  [安装在启动调试器](http://xdebug.org/docs/remote)的第三步中列出的浏览器插件之一。
6.  使用刚刚安装的浏览器插件启用调试。
7.  点击您要调试的 URL，填写表格并提交。

这个答案部分来自[在 Netbeans 中的 Launch XDebug on an external request](https://stackoverflow.com/questions/1531391/launch-xdebug-in-netbeans-on-an-external-request)。

# ios - iOS API 方法询问应用加载和启动的声音是否仍在播放

> ID：13384948
> 
> 赞同：0
> 
> 时间：2012-11-14T18:26:22.727
> 
> 标签：ios, audio, sdk, status, playback

iOS SDK 是否提供了一种方法来允许应用程序启动加载的声音，并知道它何时完成或仍在播放？

我正在使用[这个](http://stormyprods.com/SoundEngine/)音频库，但它缺少那种功能

这些是我一直在使用的功能

加载音效或背景音乐：

```
OSStatus  SoundEngine_LoadBackgroundMusicTrack(const char* inPath, Boolean inAddToQueue, Boolean inLoadAtOnce)

OSStatus  SoundEngine_LoadEffect(const char* inPath, UInt32* outEffectID)

OSStatus  SoundEngine_LoadLoopingEffect(const char* inLoopFilePath, const char* inAttackFilePath, const char* inDecayFilePath, UInt32* outEffectID) 
```

玩它们

```
OSStatus  SoundEngine_StartBackgroundMusic()

OSStatus  SoundEngine_StartEffect(UInt32 inEffectID) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:01:31.010

[这个](https://stackoverflow.com/questions/1046315/getting-notified-when-a-sound-is-done-playing-in-openal)问题的答案非常有帮助，因为 Stormyprods 的声音引擎是 OpenAL 的包装器

我使用了以下代码：

```
ALint sourceState;
alGetSourcei(soundID, AL_SOURCE_STATE, &sourceState);

if (sourceState != AL_PLAYING)
{
    SoundEngine_StartEffect(soundID);
}
else
{
    printf("already playing sfx %d\n", soundID);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:29:00.040

我敢打赌，由于隐私问题，这是不可能的，但我不确定。

# windows - 如何在 64 位操作系统上并排安装 Windows 32 位和 64 位调试工具？

> ID：13384955
> 
> 赞同：3
> 
> 时间：2012-11-14T18:26:49.323
> 
> 标签：windows, debugging, windbg

我有一个 64 位 Windows 2008R2 VM，我在其中安装了来自 SDK 的 Windows 64 位调试工具。现在我希望安装 32 位，甚至从[http://www.microsoft.com/en-us/download/details.aspx?id=8442下载相应的 ISO - GRMSDK_EN_DVD.iso](http://www.microsoft.com/en-us/download/details.aspx?id=8442)

但是，该死的东西认为没有什么要安装的，因为64位已经安装了。

我怎么还能安装它？

## 编辑

好的，我卸载了64位版本。现在，它无法安装这个可爱的消息：

```
Setup could not find the file WinSDK_amd64\WinSDK_amd64.msi at any of the specified source locations E:\Setup 
```

Microsoft 支持站点声称我可能正在尝试安装错误的体系结构。但是 ISO 文件名是 GRMSDK_EN_DVD.iso 并且[http://www.microsoft.com/en-us/download/details.aspx?id=8442](http://www.microsoft.com/en-us/download/details.aspx?id=8442)说它是针对 x86 的。

如果我无法在 64 位操作系统上安装 x86，那么如何在我的 64 位操作系统上安装 32 位 windbg？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:48:36.177

适用于 Windows 7（例如）ISO 映像的 Windows SDK 包含安装程序`Setup\WinSDKDebuggingTools`和`Setup\WinSDKDebuggingTools_amd64`文件夹。

这适用于 32 位或 64 位 SDK ISO，您不需要安装 SDK 本身。

通过将调试器安装程序放在`Installers`文件夹下，Windows 8 SDK ISO 在此处进行了一些更改，`X64 Debuggers And Tools-x64_en-us.msi`并且`X86 Debuggers And Tools-x86_en-us.msi`. 两者都安装后，你可以在下面找到它们`C:\Program Files (x86)\Windows Kits\8.0\Debuggers`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T02:27:19.960

找到了这个好撒玛利亚人 - [http://rxwen.blogspot.ca/2010/04/standalone-windbg-v6120002633.html](http://rxwen.blogspot.ca/2010/04/standalone-windbg-v6120002633.html)

谢谢你，谢谢你，谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T22:39:27.833

以前微软直接在他们的网站上发布了安装程序；这比目前的方法容易得多。现在您必须[下载 SDK 安装程序](http://msdn.microsoft.com/en-us/windows/hardware/hh852363)，选择两个调试器，让它们下载，然后找出它们下载到的位置并将它们复制到某个地方以便将来轻松访问。除非您还想要其余的 SDK 组件，否则 ISO 太过分了。

# php - 防止重复条目mysql

> ID：13384956
> 
> 赞同：0
> 
> 时间：2012-11-14T18:26:58.580
> 
> 标签：php, mysql, foreach

大家好，我的脚本有问题

```
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = 'root';
$dbname = 'site';
  $con = mysql_connect($dbhost, $dbuser, $dbpass);
    if (!$con)
    {
    die(mysql_error());
    }
mysql_select_db($dbname, $con);
$sql = "REPLACE INTO stiri (id, titlu, continut, link, categorie, data) VALUES   ('','$titlu','$text','$link','Liga 1','$data')"; 
mysql_query($sql);
mysql_close($con); 
```

这部分在 php foreach 部分中，每次运行脚本时都会出现重复条目​​，如何防止这种情况发生？我可以使用 UNIQUE 约束，但我希望链接是唯一的，长度超过 125 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:31:39.930

我猜`id`是你表中的主键字段？您正在尝试在其中插入一个空字符串 ( `''`)。如果这是一个 INT 字段，mysql 将转换`''`为 0。在第一次这样的插入之后，你会遇到重复键的问题。

更改`id`为 auto_increment 字段，并插入一个`null`值，例如

```
REPLACE INTO stiri (id, ...) VALUES (null, ....) 
```

所以mysql可以自动为你生成一个ID。

# applescript - AppleScript——检查文件是否存在不起作用

> ID：13384957
> 
> 赞同：5
> 
> 时间：2012-11-14T18:27:03.103
> 
> 标签：applescript

出于某种原因，当我检查文件是否存在时，它总是返回 true：

```
display dialog (exists (homePath & "Desktop/11-14.csv" as POSIX file as string)) 
```

无论我的桌面上是否有一个名为它的 csv，它都会返回 true。我想创建一个通过文件存在工作的 if 函数，但是因为它总是返回为真，所以它搞砸了我的 if 函数。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T10:37:34.897

一些解释：它总是返回true的原因是文件类存在而不是驱动器上的文件。就像说*存在“Hello World！”一样。*它总是返回 true，因为字符串 "Hello World!" 确实存在。默认情况下，exists 命令只检查给定值是否缺失。当它缺少值时返回false，否则返回true。但是，有些应用程序会覆盖标准存在命令，例如 System Events 和 Finder。因此，要对文件使用存在命令并想要检查文件是否存在，您应该将代码包装在告诉应用程序“系统事件”或“查找器”块中，就像在 adayzdone 示例代码中一样。

有更多方法可以剥这只猫的皮。

```
set theFile to "/Users/wrong user name/Desktop"

--using system events 
tell application "System Events" to set fileExists to exists disk item (my POSIX file theFile as string)

--using finder
tell application "Finder" to set fileExists to exists my POSIX file theFile

--using alias coercion with try catch
try
    POSIX file theFile as alias
    set fileExists to true
on error
    set fileExists to false
end try

--using a do shell script
set fileExists to (do shell script "[ -e " & quoted form of theFile & " ] && echo true || echo false") as boolean

--do the actual existence check yourself
--it's a bit cumbersome but gives you an idea how an file check actually works
set AppleScript's text item delimiters to "/"
set pathComponents to text items 2 thru -1 of theFile
set AppleScript's text item delimiters to ""
set currentPath to "/"
set fileExists to true
repeat with component in pathComponents
    if component is not in every paragraph of (do shell script "ls " & quoted form of currentPath) then
        set fileExists to false
        exit repeat
    end if
    set currentPath to currentPath & component & "/"
end repeat
return fileExists 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:30:00.383

尝试：

```
set xxx to (path to desktop as text) & "11-14.csv"
tell application "System Events" to exists file xxx 
```

# sql - 在 Interbase 中使用 Order by 创建视图或插入

> ID：13384959
> 
> 赞同：0
> 
> 时间：2012-11-14T18:27:13.690
> 
> 标签：sql, firebird, interbase

我在对 interbase 中的数据进行排序时遇到问题，我的时间戳位于年、月、日等的单独列中，因此我需要按该顺序排序（尽管在这种情况下，即使按单个字段排序也行不通） . 由于某种原因，当与 CREATE VIEW 或 INSERT INTO 结合使用时，ORDER 命令会引发“令牌未知”错误。我在这里犯了一个愚蠢的语法错误，还是我尝试使用 ORDER 命令的方式存在更根本的问题？

```
CREATE VIEW HOURLY_AVES_SORT (MEASYEAR,MEASMONTH,MEASDAY,MEASHOUR,GH,GK,GDH,TA) as
SELECT
  HOURLY_AVES_ALL.MEASYEAR, HOURLY_AVES_ALL.MEASMONTH, HOURLY_AVES_ALL.MEASDAY,
  HOURLY_AVES_ALL.MEASHOUR, /*HOURLY_AVES.MEASMIN, HOURLY_AVES_ALL.MEASSECOND, */
  HOURLY_AVES_ALL.GH, HOURLY_AVES_ALL.GK, HOURLY_AVES_ALL.GDH, HOURLY_AVES_ALL.TA

FROM HOURLY_AVES

ORDER BY
   HOURLY_AVES_ALL.MEASYEAR, HOURLY_AVES_ALL.MEASMONTH, HOURLY_AVES_ALL.MEASDAY,
  HOURLY_AVES_ALL.MEASHOUR 
```

试图将数据复制到另一个表而不是视图中，会引发相同的未知错误，即：

```
INSERT INTO HOURLY_AVES_SORTED 
(MEASYEAR,MEASMONTH,MEASDAY,MEASHOUR,GH,GK,GDH,TA)

SELECT 
HOURLY_AVES_ALL.MEASYEAR, HOURLY_AVES_ALL.MEASMONTH, HOURLY_AVES_ALL.MEASDAY,
HOURLY_AVES_ALL.MEASHOUR, /*HOURLY_AVES.MEASMIN, HOURLY_AVES_ALL.MEASSECOND, */
HOURLY_AVES_ALL.GH, HOURLY_AVES_ALL.GK, HOURLY_AVES_ALL.GDH, HOURLY_AVES_ALL.TA

FROM HOURLY_AVES

ORDER BY
(MEASYEAR, MEASMONTH, MEASDAY,MEASHOUR, GH, GK,GH, TA) 
```

非常欢迎任何提示，布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:32:11.210

Interbase 不支持视图语句中的`ORDER BY`子句。[请参阅数据定义指南中](http://docs.embarcadero.com/products/interbase/IBXE3/DataDef.pdf)`SELECT`的文档，第 8-4页（从书签“使用视图”->“创建视图”->“使用 SELECT 语句”中选择时会找到该页面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:32:49.577

尝试使用列号：

```
CREATE VIEW HOURLY_AVES_SORT (MEASYEAR,MEASMONTH,MEASDAY,MEASHOUR,GH,GK,GDH,TA) as
SELECT
  h.MEASYEAR, h.MEASMONTH, h.MEASDAY, h.MEASHOUR, 
  h.GH, h.GK, h.GDH, h.TA

FROM 
  HOURLY_AVES h

ORDER BY
   1, 2, 3, 4 
```

# java - Google 应用引擎部署导致 500 服务器错误

> ID：13384966
> 
> 赞同：1
> 
> 时间：2012-11-14T18:27:30.960
> 
> 标签：java, google-app-engine, jsp, servlets, ubuntu-12.04

我只是直接从仪表板粘贴日志。任何人都可以指导幕后发生的事情以及出了什么问题，因为它在开发服务器上运行良好。

```
182.19.30.169 - - [14/Nov/2012:10:16:14 -0800] "GET / HTTP/1.1" 500 0 - "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11" "cloudcvapp.appspot.com" ms=281 cpu_ms=129 instance=00c61b117c07c18415a7a2919a158e127eee2796
W 2012-11-14 23:46:14.822
Failed startup of context com.google.apphosting.utils.jetty.RuntimeAppEngineWebAppContext@1d81ec9{/,/base/data/home/apps/s~cloudcvapp/1.363170872947752764}
java.lang.IllegalStateException: No forced path servlet for /WEB-INF/index.jsp
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:679)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:219)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
C 2012-11-14 23:46:14.823
Uncaught exception from servlet
javax.servlet.UnavailableException: Initialization failed.
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:228)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T20:47:32.853

再次将应用程序重新部署到谷歌应用引擎。

# c# - 如何创建一个对键盘输入完全无响应的 CheckedListBox WinForm 控件？

> ID：13384967
> 
> 赞同：0
> 
> 时间：2012-11-14T18:27:31.023
> 
> 标签：c#, .net, winforms, checkedlistbox

我尝试创建一个自定义 CheckedListBox 并覆盖 OnKeyUp、OnKeyPress、OnKeyDown、OnPreviewKeyDown 方法，但我无法完成我想要完成的任务。

现在基本上发生的事情是，如果用户在 CheckedListBox 具有焦点时按下一个键，则所选项目会发生变化。例如，如果用户按下向上或向下键，则选中 CheckedListBox 中的下一个/上一个项目。如果用户按下“A”，则选择以字母“A”开头的第一个项目。

我希望 CheckedListBox 的行为方式是它对按键完全没有响应（但仍然对鼠标点击有响应）。

有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:36:58.373

我认为可以通过从 CheckedListBox 继承并覆盖它的[ProcessCmdKey()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.processcmdkey.aspx)方法以返回 true 来实现这一点。那应该忽略所有命令。

我会在解决方案中尝试一下并报告:)

**更新：**

有用。我使用的代码：

```
using System.Windows.Forms;

public class CheckedListBoxIgnoreKeyboard : CheckedListBox
{
    protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
    {
        return true;
    }
} 
```

控件需要重建才能显示在工具箱中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:48:13.297

您是否尝试过使用 KeyDown 事件？

```
 e.SuppressKeyPress = true; 
```

看来，在我这边工作

# c - 将文本添加到 C 中的文件中

> ID：13384968
> 
> 赞同：6
> 
> 时间：2012-11-14T18:27:38.627
> 
> 标签：c, file, io

我想使用 C 向文件（或文件组）添加标准头。这些文件可能非常大，因此将它们加载到内存中或将它们复制到临时文件中（我认为）是个坏主意。

有没有办法简单地将标题直接添加到每个文件？

标头本身很小，不超过 1 KB

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T18:30:36.890

您不能将数据插入文件。

但是，无需将整个文件加载到内存中。只需创建一个新文件，写入要插入的数据，然后将原始文件的内容复制到新文件中（逐块执行，而不是将整个文件加载到内存中）。

最后，删除原文件并重命名新文件以匹配原文件。

这是执行此操作的最有效方法，并且相当有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T18:36:55.393

没有临时文件应该是可能的 - 您可以从末尾读取文件，逐块，将每个块写回`(original_position + header_size)`. 第一个块将被写回到`header_size`，为标题留出空间。

但是，您并不想这样做。如果中止它会损坏文件（想想：磁盘空间不足、其他 I/O 错误、断电等等）。

因此，您实际上应该使用临时文件 - 将您需要的所有内容写入其中，然后将其重命名为原始文件的名称（假设您在同一文件系统上创建临时文件，否则您需要复制）。

**编辑：**澄清我的意思，当整个文件适合 RAM 时简化解决方案：

*   分配与文件相同大小的缓冲区
*   打开文件，并将其读入缓冲区
*   seek(file, header_size) 并在此处写入缓冲区
*   seek(file, 0) 写入头部

`file_size - buffer_size`如果文件太大，您可以分配较小的缓冲区并从 read at和 write at开始重复读/写`file_size - buffer_size + header_size`。然后重复下一个块在 处读取，在 处`file_size - 2 * buffer_size`写入`file_size - 2 * buffer_size + header_size`，依此类推。

但让我重复一遍：**如果文件失败，您可能会损坏文件！**

# .net - 获取文本框中字符的坐标？

> ID：13384969
> 
> 赞同：3
> 
> 时间：2012-11-14T18:27:51.133
> 
> 标签：.net, wpf, textbox

我想通过在所选字段上方和下方添加一个 Adorner来增强此[WPF DateTimePicker 控件，例如](https://gist.github.com/1150228)

![日期时间选择器](../Images/5deefde232a9ec65c332afdd5a0ffcab.png)

为此，我需要找出 TextBox 中选择的开始和结束的 X 坐标。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:33:27.793

（编辑：Derp - 我错过了你的“只有选择”部分......这会给你全文长度）

您要查找的属性`ExtentWidth`在 TextBox 上：

（对不起，手头只有 LINQPad，所以必须努力做到这一点......）

```
var wnd = new Window();
var panel = new StackPanel();
wnd.Content = panel;

var textBox = new TextBox();
textBox.Name = "theTextBox";
textBox.FontFamily = new FontFamily("Arial");
textBox.FontSize = 20;
textBox.Text = "This is some text I want to measure";
panel.Children.Add(textBox);

wnd.Show();

var showWidth = new TextBlock();
showWidth.Text = "This should show the size of the text";
var binding = new System.Windows.Data.Binding();
binding.Path = new PropertyPath("ExtentWidth");
binding.Source = textBox;
binding.Mode = System.Windows.Data.BindingMode.OneWay;
showWidth.SetBinding(TextBlock.TextProperty, binding);
panel.Children.Add(showWidth); 
```

编辑#2：好的，试试这个：（同样，只有LINQPad）

```
void Main()
{
    var wnd = new Window();
    var panel = new StackPanel();
    var textBox = new TextBox();
    textBox.FontSize = 20;
    textBox.Text = "This is some text I want to measure";
    textBox.SelectionChanged += OnSelectionChanged;
    showWidth = new TextBlock();
    panel.Children.Add(textBox);
    panel.Children.Add(showWidth);
    wnd.Content = panel;
    wnd.Show();
}

private TextBlock showWidth;

private void OnSelectionChanged(object sender, EventArgs args)
{
    var tb = sender as TextBox;
    double left = tb.GetRectFromCharacterIndex(tb.SelectionStart).Left;
    showWidth.Text = string.Format("{0:0}px", left);
    showWidth.Margin = new Thickness(left, 0, 0, 0);
} 
```

# facebook - 为什么我不能输入我的雇主？

> ID：13384978
> 
> 赞同：-4
> 
> 时间：2012-11-14T18:28:26.433
> 
> 标签：facebook, profile

我创建了一个品牌/业务页面，我想将其作为我个人帐户中的工作内容，但我不断收到“您输入的雇主无效”。为什么是这样？我的品牌页面不应该出现在记录中吗？为什么我不能输入任何我想要的雇主？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T18:32:47.797

有时 Facebook 的“智能感知”/“自动完成”不是很灵敏/详尽。在雇主字段中，尝试输入您的 Facebook 页面的确切名称，然后点击“输入”。它应该出现。

# ruby-on-rails - 在模型或控制器中运行 ruby 文件

> ID：13384980
> 
> 赞同：0
> 
> 时间：2012-11-14T18:28:34.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有以下文件，我用我现有的所有文件创建了一个动态 CSS 菜单。但这仅在重新启动服务器时运行。如何在我的模型或控制器上运行它？

菜单图标.scss.erb

```
li [class^="icon-menu"], li [class*=" icon-menu"] {
  background-position: left center;
  background-repeat: no-repeat;
  height: 16px;
  vertical-align: middle;
  width: 22px;
}

<% Menu.all.each do |m| %>
  .icon-menu<%= m.id %> {
    background-image: url('/icons/<%= m.icon_file_name %>');
  }
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:23:47.903

如果你想做的是生成一些动态 CSS，为什么不使用普通的香草`erb`部分然后[`content_for`](http://guides.rubyonrails.org/layouts_and_rendering.html#using-the-content_for-method)喜欢

```
<% content_for :menu do %>
  <% Menu.all.each do |m| %>
    .icon-menu<%= m.id %> {
      background-image: url('/icons/<%= m.icon_file_name %>');
    }
  <% end %>
<% end %> 
```

然后每当你想显示菜单时，使用`yield`它来渲染它。

但这感觉像是对问题的“错误”解决方案......

# javascript - AJAX 加载页面并在成功后重新加载/添加

> ID：13384989
> 
> 赞同：0
> 
> 时间：2012-11-14T18:29:00.553
> 
> 标签：javascript, jquery, ajax, load

所以我有一个页面，可以在请求时更新我的​​数据库。例如，当我访问它时，`database_update.php`它只是更新数据库并且不显示任何内容。

`Index.php`显示用户数据库内容。

所以我在 JavaScript 中调用了一个函数，`update`它必须使用 AJAX 来运行这个页面，并且在页面加载之后（在所有查询成功运行之后）它必须加载`index.php`并向用户显示更新的页面（重新加载页面而没有刷新效果）。

我的代码是这样的：

```
$.get('ajax_update_table.php', {
    // The following is important because page saves to another table
    // users nick which call update:
    update: UserLogin
}, function (output) {
    // The following is unimportant:
    $(myDiv).html(output).show();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:34:22.007

两个建议：

1.  从您的 database_update 脚本返回“成功”或“错误”代码。返回 JSON 字符串非常简单。例如：

    ```
    echo '{"success":"success"}'; 
    ```

2.  使用 $.ajax 函数。然后添加成功、错误和完成参数。当 AJAX 请求完成时，您可以调用任何 javascript 函数。

    ```
    $.ajax({
        url: 'update_database.php',
        dataType: 'json',
        success: function (data) {successFunction(data)},
        error: function () { error(); },
        complete: function () { complete(); }
    });

    function successFunction(data) {
        if ('success' in data) {
            // Do success stuff here.
        } else {
            // Show errors here
        }
    }
    // .... etc 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:00:49.583

我可能遗漏了一些东西，但我会尽力回答你的问题。

我会设置一个空白页面，在加载它时将 index.php 发送到该页面上的 div。例如，制作一个标题为blank.php 的页面。

blank.php 将具有以下内容：

```
function Index(){
$.ajax({
    url:"index.php",
    type: "GET",
    success:function(result){
        $("#web-content").html(result);
    }
});
}

<script type="text/javascript">Index();</script>
<div id="web-content"></div> 
```

然后，您将让您的索引执行 Index 函数以使用 index.php 数据更新 web-content div，而无需重新加载 blank.php 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:42:38.523

让它工作！

我的 index.php

```
<html>
<head>
    <script type="text/javascript" language="Javascript" SRC="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" language="Javascript">
    function update_and_replace()
        {
            $.ajax({
                url: 'ajax_update_table.php',
                dataType: 'json',
                success: function (data) {successFunction(data)},
                error: function () { error(); },
                complete: function () { complete(); }
            });
        }

        function successFunction(data) {
            if ('success' in data) {
                $("#content").load("index.php");
            } 
        }

    </script>
</head>
<body>
<div id='content'>
Now is: <?php echo date("Y-m-d, H:i:s");?>
<br/><br/><br/><br/>
<a href="javascript:void(0);" onClick="update_and_replace();">Aktualizuj</a>
</div>
</body>
</html> 
```

Ajax_update_table.php

```
<?php echo '{"success":"success"}'; ?> 
```

谢谢大家的帮助。我知道我的英语不好，但在你的帮助下我做到了！

# php - 变量中的 codemirror 选项

> ID：13384992
> 
> 赞同：0
> 
> 时间：2012-11-14T18:29:03.920
> 
> 标签：php, textarea, codemirror

使用 codemirror 2，我有一些选项，例如 lineNumbers、gutter 等等……我想知道如何设置那些读取变量的选项，例如：

```
var ln = 'true';
editor = CodeMirror.fromTextArea(textarea.get(0), {
        height : "140px",
        lineWrapping : true,
        lineNumbers : ln,
        gutter : true,
        mode: 'application/xml',    
    } 
```

这个想法是，您填写一个带有您希望与 codemirror 一起使用的选项的 php 表单，然后 cm 使用这些选项构建 textarea。

lineNumbers : ln 似乎不起作用......它对 textarea 没有影响

如何在加载 codemirror 之前让 vars 设置选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:38:45.547

您的选项确实可以提前构建并传入。上面示例的唯一错误是变量 ln 已设置为字符串“true”而不是布尔值 true。

```
var ln = true; //not string 'true';
var options = {
    height : "140px",
    lineWrapping : true,
    lineNumbers : ln,
    gutter : true,
    mode: 'application/xml',  
}
var editor = CodeMirror.fromTextArea(textarea.get(0), options); 
```

# r - 摆脱箱线图标签中的科学数字

> ID：13384993
> 
> 赞同：1
> 
> 时间：2012-11-14T18:29:09.187
> 
> 标签：r

我正在创建箱线图，如下所示：

```
data<-read.table("roughness_elevation.txt",header=T,na.strings="Na")
attach(data)

xle<-expression(Elevation~(m))
xlr<-expression(Roughness)

cvalue2<-cut(value2,breaks=c(1000,1100,1200,1300,1400,1500,1600))

png("G:/Users/.../Desktop/MSC/figures/bproughness.png")
plot(value1~cvalue2,xlab=xle,ylab=xlr,main="",outline=FALSE)
dev.off() 
```

现在（海拔在 1000 到 2000 之间并且浮动），R 总是在我的 x-label 上写科学数字。我该如何改变呢？

我用 scipen=999 和 formatC(..) 进行了尝试，但没有一个成功（例如 formatC 抛出错误，因为 cvalue2 是一个因素）。

谢谢你的帮助！

编辑：

这是第一行，大约有 300 万行：

```
value1  value2
0.6222  1150.0098
0.6400  1149.3142
0.6364  1148.9984
0.6417  1149.0300
0.6385  1149.6849
0.6475  1150.3357
0.6554  1150.4762
0.6474  1150.4563 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:35:09.810

将 dig.lab=4 添加到您的 cut() 函数中：

```
cvalue2<-cut(value2,breaks=c(1000,1100,1200,1300,1400,1500,1600), dig.lab=4) 
```

默认值为 3，因此 cut() 使用科学记数法来格式化范围。或者，您可以在每个组的中点指定标签：

```
cvalue2<-cut(value2, breaks=c(1000,1100,1200,1300,1400,1500,1600), 
labels=seq(1050, 1550, by=100)) 
```

# ruby - 使用 ruby 连接到 torrent "swarm" 或 DHT

> ID：13384994
> 
> 赞同：2
> 
> 时间：2012-11-14T18:29:17.907
> 
> 标签：ruby, p2p, bittorrent, dht

我可能对 BitTorrent、DHT 和“swarm”的工作原理缺乏一些基本的了解，因为我什至不确定 DHT 和“swarm”是否是一回事。

但是，我正在尝试从其磁力链接（和哈希）中查找对等点、对等点的数量以及一些有关种子的统计信息。

我已经寻找了一些库来实现这一点，但它们似乎已经过时或不相关，或者只是对事物进行了编码。

如何连接和请求信息？一个简短的解释将是令人愉快的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T02:37:40.793

官方规格： http: [//www.bittorrent.org/beps/bep_0000.html](http://www.bittorrent.org/beps/bep_0000.html)
非官方规格：[http ://wiki.theory.org/BitTorrentSpecification](http://wiki.theory.org/BitTorrentSpecification)

*BEncoding*是在 bittorrent 中用于多种目的的数据序列化格式

DHT 是一个全局的、分散的、迭代的、基于 UDP 的查找系统，可用于根据*infohash定位参与特定**swarm*的客户端，该信息可以直接从*磁力链接*获得，也可以从*.torrent*元数据文件计算.

 ***如果您有*跟踪器*的公告 URL （torrent 文件或磁力链接的可选部分），您可以直接从跟踪器获取客户端地址。

一旦你获得了特定群的客户端地址，你就可以连接到它们——或者如果你已经向 DHT/负责任的跟踪器宣布自己，它们将连接到你——使用 bittorrent 有线协议，它基本上是一个异步的二进制消息传递协议.

要获得功能齐全、最先进的 bittorrent 客户端，您必须实现以下内容：

*   一个 DHT 节点（基于 UDP 的编码）
*   跟踪器宣布和抓取协议（使用基于 HTTP 的编码和基于 UDP 的自定义二进制协议）
*   bittorrent 有线协议（基于 TCP 的自定义二进制协议，带有可选的扩展层。一些消息是经过编码的。一种称为 µTP 的基于 UDP 的拥塞避免传输协议也可以替代 TCP）
*   一个 torrent 文件解析器（显然是编码）
*   一般的东西，如排队活动种子、文件管理、高并发网络 IO

这是很多工作，据我所知，在 ruby​​ 中还没有完成。因此，要么你有很多事情要做，要么你可能想使用用不同语言编写的bittorrent库（例如libtorrent）或与提供Web服务（例如传输）的客户端接口。***

# python - 如何在 sqlalchemy 声明性中设置属性默认值？

> ID：13384996
> 
> 赞同：14
> 
> 时间：2012-11-14T18:29:24.627
> 
> 标签：python, sqlalchemy

在 SQLAlchemy 声明式中，如何为列设置默认值，以便瞬态或挂起的对象实例具有这些默认值？一个简短的例子：

```
from sqlalchemy import Column, Integer, String
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class A(Base):
  __tablename__ = "A"
  id = Column(Integer, primary_key=True)
  word = Column(String, default="adefault")

a = A()
print a.word 
```

天真地，我希望这个输出是`adefault`. 当然，输出实际上是`None`. 即使添加到会话中，它也会保持不变`None`，并且只有在我提交（或刷新）会话时才会被填充，并从数据库中重新读取实例值。

有没有办法在不将实例刷新到数据库的情况下设置属性默认值？我尝试调查`ColumnDefault`文档，似乎没有一种明显的方法来检查类型/python 值，以便在自定义声明性基类中手动设置它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T01:33:44.377

向您的类添加一个构造函数并在那里设置默认值。从数据库加载行时，构造函数不会运行，因此可以这样做。

```
class A(Base):
    __tablename__ = "A"
    id = Column(Integer, primary_key=True)
    word = Column(String)

    def __init__(self):
        self.word = "adefault"

a = A()
print a.word 
```

[SA Docs](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html#declare-a-mapping)`__init__`中有以类似方式使用的示例。

# android - 我想在 Bundle 中打包一个枚举值并作为枚举获取

> ID：13384997
> 
> 赞同：12
> 
> 时间：2012-11-14T18:29:55.440
> 
> 标签：android

我有这样的枚举

```
 enum Status {READY, DISCONNECTED, RECEIVING, ... more } 
```

我想通过 Bundle 将此枚举的值发送到另一个线程。

另一个线程想从 Bundle 中提取枚举值，

这怎么能做到，聪明？

```
 Bundle createBundle(Status status); 
```

和

```
 Status getStatus(Bundle b); 
```

谢谢，

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-11-26T15:00:55.813

由于 Enum 是可序列化的，我们可以使用以下命令将 enum 打包到包中：

```
public static String MY_ENUM = "MY_ENUM";
myBundle.putSerializable(MY_ENUM, enumValue); 
```

要检索，请使用：

```
MyEnum myEnum = (MyEnum) myBundle.getSerializable(MY_ENUM); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-14T18:37:44.633

好问题！我不知道直接打包枚举的方法。我总是用这个来打包：

```
int intValue = myEnum.ordinal(); 
```

然后解压：

```
MyEnum enumValue = MyEnum.values()[intValue]; 
```