# StackOverflow 问答 14238000-14238999

# ruby-on-rails - 如何使用变量在 html.erb 文件中分配 css id？

> ID：14238005
> 
> 赞同：2
> 
> 时间：2013-01-09T14:57:09.557
> 
> 标签：ruby-on-rails, escaping, erb

我在 .html.erb 视图文件中有一个类，我想根据变量给出一个 id。

我想做这样的事情：

```
<ul id="#{store}"> 
```

where`store`是一个包含字符串“store1”的变量。

我希望这能产生这样的 ul: `<ul id=store1>`，但我得到`<ul id=#{store}>`了。

我是否需要创建一个助手来帮助实现这一点，或者是否有一些我忽略的语法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T14:59:21.690

试试这个：

```
<ul id="<%= yourvariable %>"> 
```

# php - 如何在另一个类中使用一个类？

> ID：14238006
> 
> 赞同：1
> 
> 时间：2013-01-09T14:57:10.413
> 
> 标签：php

我有一个类，它有一些关于帐户管理的功能，我还有一个验证电子邮件地址、用户名等的类。

如何在帐户类中使用验证类？我如何轻松地包含它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:01:37.077

您可以实例化验证类并将其作为参数传递给帐户类，并将其设置为帐户构造方法中帐户类中的属性吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:03:39.907

如果一个类是专门为验证目的而设计的，而另一个类是为包含特定于实例的信息而设计的，那么您可以采用三种不同的方法。

**1）静态引用验证器（*推荐*）：**

```
<?php
class Validation {
  public static function validateEmail($email) {
    return filter_var($email, FILTER_VALIDATE_EMAIL);
  }
}

class AccountManagement {
  public $email;
  public function __construct($email) {
    $this->email = $email;

    // Validate the e-mail. If not valid, an exception is thrown.
    if(!Validation::validateEmail($this->email)) {
      throw new InvalidArgumentException('$email argument supplied must contain a valid e-mail address');
    }
  }
} 
```

**2）扩展您的实例类以从您的验证类继承**

```
<?php
class Validation {
  public function validateEmail($email) {
    return filter_var($email, FILTER_VALIDATE_EMAIL);
  }
}

class AccountManagement extends Validation {
  public $email;
  public function __construct($email) {
    $this->email = $email;

    // Validate the e-mail. If not valid, an exception is thrown.
    if(!$this->validateEmail($this->email)) {
      throw new InvalidArgumentException('$email argument supplied must contain a valid e-mail address');
    }
  }
} 
```

**3）从您的实例类中实例化您的验证类（不推荐）：**

```
<?php
class Validation {
  public function validateEmail($email) {
    return filter_var($email, FILTER_VALIDATE_EMAIL);
  }
}

class AccountManagement extends Validation {
  public $email;
  public function __construct($email) {
    $this->email = $email;

    $validator = new Validation;

    // Validate the e-mail. If not valid, an exception is thrown.
    if(!$validator->validateEmail($this->email)) {
      throw new InvalidArgumentException('$email argument supplied must contain a valid e-mail address');
    }
  }
} 
```

**测试你的实现**

一旦您选择了最适合您需求的方法（无论您选择哪一种），您就可以使用以下代码对其进行测试：

```
// Valid, should not throw an exception and should print success.
try {
  $account = New AccountManagement('me@myself.com');
  print "AccountManagement object successfully instantiated.<br />\r\n";
} catch(Exception $e) {
  print 'Error: Encountered ' . $e;
}

// Invalid, should throw an InvalidArgumentException exception
try {
  $account = New AccountManagement('myself.com');
  print "AccountManagement object successfully instantiated.<br />\r\n";
} catch(Exception $e) {
  print 'Error: Encountered ' . $e;
} 
```

**奖金示例：**

有时，您可能希望专门捕获验证错误，并让某些东西处理可能遇到的任何其他异常。在这种情况下，我们可以为我们的验证器创建一个特殊的异常，并允许验证器是抛出异常的那个：

```
<?php
class ValidationException extends Exception {
  // Will use default Exception behavior.
}

class Validation {
  public static function validateEmail($email) {
    if(!filter_var($email, FILTER_VALIDATE_EMAIL)) {
      throw new ValidationException('E-mail address supplied is not valid');
    }
  }
}

class AccountManagement {
  public $email;
  public function __construct($email) {
    $this->email = $email;

    // Validate the e-mail.
    Validation::validateEmail($this->email);
  }
}

// Valid, should not throw an exception and should print success.
try {
  $account = New AccountManagement('me@myself.com');
  print "AccountManagement object successfully instantiated.<br />\r\n";
} catch(Exception $e) {
  print 'Error: Encountered ' . $e;
}

// Invalid, should throw an ValidationException exception
try {
  $account = New AccountManagement('myself.com');
  print "AccountManagement object successfully instantiated.<br />\r\n";
} catch(ValidationException $e) {
  print 'Error: Encountered ' . $e;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T15:06:18.640

您可以使用方法创建第三类“AccountsManagementValidator”

```
validate(AccountManagement): void
hasErrors(): boolean
getErrors(): List<Error> 
```

有很多不同的实现，但我描述的是 PlayFramework 验证器实现。

当然，您的“验证器”类会重用您的常用方法来验证电子邮件、用户等......

# java - 使用动态ID为jQuery中的隐藏字段分配值？

> ID：14238013
> 
> 赞同：0
> 
> 时间：2013-01-09T14:57:18.480
> 
> 标签：java, javascript, jquery, web

好的，所以我得到了这张桌子。该表是通过后端循环动态生成的。像这样：

```
<%int iterator = 0;    
for(Iterator it = pd.getEntries().iterator();it.hasNext();){
   EntryData entry = (EntryData)it.next();
%>
<tr>
   <td><div id="oldvalue1_<%=iterator%>" class="editable_select"><%=entry.getIdentifiertype()%></div></td>
   <td><input type="hidden" id="newValue1_<%=iterator%>" value=""></td>
   <td></td>
   <td><div id="oldvalue2_<%=iterator%>" class="editable"" ><%=entry.getIdentifier()%></div>
   <input type="hidden" id="newValue2_<%=iterator%>" value=""></td>
   <td></td>  
</tr>
<% iterator++;} %> 
```

我想在这张桌子上完成的是“就地编辑”，有点......我在 jQuery 中得到了这个函数，它将 oldvalue1_* 变成一个选择框，如下所示：

```
$(window).load(function(){
var clickFunction = function(){
 var id = $(this).attr("id");
 var smallId = id.substr(10);//yeah, this is a temporary hack...
 var select = '<select name="select" id="select" onChange="THIS IS WHAT I NEED">';
 var options = ["ITEMNUMBER", "GROUP", "ALLITEMS"];
  for(var i = 0; i < options.length;i++)
    select += '<option value="'+options[i]+'">'+options[i]+'</option>';
    select += '</select>';
    $(this).html(select);
    $(this).unbind('click',clickFunction);
}
$("div.editable_select").bind('click',clickFunction);
}); 
```

我希望得到帮助的是使用 onChange 将新的 selectet 值传递给隐藏的。我在这里得到了正确的心态，我认为： onChange="$("#newValue1_"+smallId).value($(this).val());"> 但是 "s 和 's 的数量让我很生气，它只是不会工作。那么，我该怎么办？

我也为另一个表格元素得到了这个：

```
$(document).ready(function(){
   $("div.editable").click(function(){
    var newInput = "<input type ='text' class='newInput' value=\""+$(this).text()+"\">";
    $(this).html(newInput);
    var id = $(this).attr("id");    
    $("input.newInput").focus();
    $("input.newInput").keydown(function(event){
    if(event.which == 13){  
       var lastDigit = id.substr(10);//Yeah...
       var valNumber = id.substr(8);//These are ugly, im working on it so don't hate on me  :P
       var value = $(this).val();
       $(this).parent().text(value);
       if(valNumber == 2){
        var changedtext = $("#editable2_"+lastdigit).val();//This right
        $("newValue2_"+lastDigit).val(changedtext);// here wont work
       }
    }
   });
}); 
```

这也是我将值传递给隐藏字段的问题。我检查了警报功能，我得到了 var 的值，这只是我遗漏的最后一点。我将感谢所有帮助，我在这里真的需要它。而且，请记住，我在 jQuery 中完全是 n00b，所以像“你应该使用 .[insert function name]”这样的答案不会有太大帮助。

非常感谢！<3（我不知道如何在代码中获得时髦的颜色，对不起）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:18:13.360

你真的很接近这个。

```
onChange="$("#newValue1_"+smallId).value($(this).val());"> 
```

您需要记住的是对 onchange 持有者使用一组引号，而对内部的任何内容使用另一组引号。所以...

```
<select name="dothis" onChange="$('#newValue1_'+smallId+'').val($(this).val());"> 
```

应该管用。我做了一个小提琴来确定。[http://jsfiddle.net/MatthewDavis/Rb3cs/](http://jsfiddle.net/MatthewDavis/Rb3cs/)

编辑：我看到你所看到的关于生成的行的内容。我在这里更新了小提琴：http: [//jsfiddle.net/MatthewDavis/Rb3cs/1/](http://jsfiddle.net/MatthewDavis/Rb3cs/1/)并去掉了创建选择的变量内的双引号，并将它们替换为 xml 表示。

似乎工作。有它。

编辑我的编辑：另外，对于任何需要帮助但不想看小提琴的人，这里是定义选择的行。

```
var select = "<select name=&quot;dothis&quot; onChange=&quot;$('#newValue1_'+smallId+'').val($(this).val());&quot;><option value='one'>1</option><option value='two'>2</option><option value='three'>3</option></select>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:09:02.260

不能只是在最后一行中缺少 # 吗？

```
$("#newValue2_"+lastDigit).val(changedtext); 
```

代替

```
$("newValue2_"+lastDigit).val(changedtext);// here wont work 
```

# mysql - 如何允许用户在 Rails 中安排重复的 cron 作业

> ID：14238020
> 
> 赞同：1
> 
> 时间：2013-01-09T14:57:25.320
> 
> 标签：mysql, ruby-on-rails, ruby, linux, cron

我正在 Rails 中构建一个小型提醒应用程序，我想为我的用户添加能够创建 cron 作业的功能。cron 作业将在每周、每月甚至一次的给定日期运行，具体取决于用户的选择和保存。

因此，用户创建偶数，选择它是每周、每天还是一次，然后它创建 cron 作业以在 linux 中运行命令行。

有什么宝石可以更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:08:07.153

常见的方法是使用可能的数据库表：

状态 | linux_command | 执行_at

并且每 10 分钟运行一次 cronjob 女巫检查数据库并执行命令。

# css - 让左 div 在右 div 移动到左 div 之下之前包装其内容

> ID：14238021
> 
> 赞同：2
> 
> 时间：2013-01-09T14:57:27.377
> 
> 标签：css, html, tablelayout

如何使用 DIV 实现[**此布局**](http://jsfiddle.net/fFkNW/)（使用表格构建）？

基本上我想在同一行上有两个 div：Div1 和 Div2。Div1 应向左对齐，Div2 应向右对齐。Div2 还设置了最小宽度。当它们的宽度都不够时，Div1 必须将其内容包装起来，为 Div2 留出空间。无论我尝试过什么，在包装 Div1 的内容之前，总是将 Div2 移动到 Div1 下。

所以我想出了用桌子制作的解决方案。如何使用 DIV 构建相同的布局？

* * *

用表解决：

```
<!DOCTYPE html>
<html>

<head>
<style>
#table {
  width: 100%;
  word-wrap: break-word;
}

#div1 {
  border: 1px solid red;
}

#div2 {
  width: 30%;
  min-width: 250px;
  text-align: right;
  border: 1px solid green;
}
</style>
</head>

<body>

  <table id="table">
    <tr>
      <td id="div1">This text should wrap when window is made smaller.
      <td id="div2">This takes 30% but not less than 250px;
  </table>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:02:42.100

HTML：

```
<div id="wrapper">
  <div id="left"></div>
  </div id="right"></div>
</div> 
```

CSS：

```
#wrapper {
  width: 100%;
  float: left;
}

#left {
  border: 1px solid red;
  float: left;
}

#right {
  width: 30%;
  min-width: 250px;
  text-align: right;
  border: 1px solid green;
  float: left;
} 
```

没有测试它，但它应该工作。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:01:23.667

尝试查看[CSS box-flex](http://www.html5rocks.com/en/tutorials/flexbox/quick/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:03:15.873

这是你要找的东西吗？[http://jsfiddle.net/fFkNW/3/](http://jsfiddle.net/fFkNW/3/)

我更改了要使用的标记`divs`并更新了要使用的 CSS`floats`

如果将窗口缩小，您可以看到红色框开始环绕绿色框。

**HTML**

```
 <div id="div2">This takes 30% but not less than 250px.</div>
  <div id="div1">This text should wrap when window is made smaller.</div> 
```

**CSS**

```
#div1 {
  border: 1px solid red;
}

#div2 {
  width: 30%;
  min-width: 250px;
  float: right;
  border: 1px solid green;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T15:04:38.247

执行此操作的最高保真度方法之一是简单地使用显示为表格的 div：

```
#table {
  width: 100%;
  word-wrap: break-word;
  display: table;
}
#table > div {
  display: table-row;
}
#div1, #div2 {
  display: table-cell;
} 
```

你可以[在这里](http://jsfiddle.net/GNXAf/)看到它看起来完全一样。

# hex - Intel Hex 文件扩展段地址和扩展线性地址

> ID：14238023
> 
> 赞同：3
> 
> 时间：2013-01-09T14:57:31.417
> 
> 标签：hex

我正在为我目前正在处理的应用程序编写一个 Intel Hex 文件阅读器。

我在英特尔十六进制文件规范 (http://microsym.com/editor/assets/intelhex.pdf) 中不清楚的一件事是，如果十六进制文件具有扩展段地址和扩展线性地址，该怎么办。包含这两个记录（02 和 04）的文件是否合法，还是应该被拒绝？

如果是合法的，如何处理？在读取扩展段地址时，应该清除扩展线性地址（反之亦然）还是应该以某种方式组合它们？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-08T17:24:11.910

[我在 Microchip 的AN1388](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=1824&appnote=en554836)的源代码中遇到了这个问题

在 Framework.c 的 WriteHexRecord2Flash() 中，看起来他们添加了从 02 和 04 记录派生的两个偏移量。我并不是说这是正确的做事方式，但这是迄今为止我遇到的唯一解决此问题的方法。

该规范似乎没有指定在这种情况下要做什么。

# c# - 将项目添加到 ListBox 并获取 ListBoxItem

> ID：14238026
> 
> 赞同：1
> 
> 时间：2013-01-09T14:57:39.780
> 
> 标签：c#, wpf, listbox

***更新：***

我上传了一个演示，试图清楚地解释我的问题。[在这里](https://www.box.com/s/5gltokm5wreara2xg19k)下载。

我正在开发一个处理列表框选择的管理器类。（ListBox提供的默认选择功能不能满足我的要求）

因此，**当一个项目添加到 ListBox 时，我的管理器类应该获取相应的 ListBoxItem**并使其被选中或取消选中。

虽然我认为**`ItemContainerGenerator.ItemsChanged`应该告诉新添加的项目的一些信息，但它在`ListBox.Items.Add`多次调用时提供相同的事件arg（使用不同的参数）**，这让我很困惑。谁能告诉我如何为新添加的项目获取新生成的 ListBoxItem。

演示问题的代码：

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:System="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <Button Content="Add two items" Click="Button_Click_1"/>
        <ListBox Name="listBox">
            <System:Int32>1</System:Int32>
            <System:Int32>2</System:Int32>
            <System:Int32>3</System:Int32>
        </ListBox>
    </StackPanel>
</Window>

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        SelectionManager selectionManager = new SelectionManager();
        selectionManager.Join(listBox);
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        listBox.Items.Add(4);
        listBox.Items.Add(5);
    }
} 
```

这里，在Button_Click 中，listBox 添加了两个item，selectionManager 应该同时获取ListBoxItem。

```
class SelectionManager
{
    public void Join(ListBox element)
    {
        element.ItemContainerGenerator.ItemsChanged += ItemContainerGenerator_ItemsChanged;
    }

    private List<int> listBoxItemPendingJoinIndexes = new List<int>();

    void ItemContainerGenerator_StatusChanged(object sender, EventArgs e)
    {
        Contract.Requires(listBoxItemPendingJoinIndexes.Count > 0);
        ItemContainerGenerator generator = (ItemContainerGenerator)sender;
        if (generator.Status != GeneratorStatus.ContainersGenerated)
            return;
        generator.StatusChanged -= ItemContainerGenerator_StatusChanged;

        foreach (var index in listBoxItemPendingJoinIndexes)
        {
            ListBoxItem listBoxItem = (ListBoxItem)generator.ContainerFromIndex(index);
            Join(listBoxItem);
        }
        listBoxItemPendingJoinIndexes.Clear();
    }

    void ItemContainerGenerator_ItemsChanged(object sender, ItemsChangedEventArgs e)
    {
        ItemContainerGenerator generator = (ItemContainerGenerator)sender;
        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Add:
                listBoxItemPendingJoinIndexes.Add(e.Position.Index
                      + e.Position.Offset);//same e.Position
                generator.StatusChanged += ItemContainerGenerator_StatusChanged;
                break;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:46:30.253

I'm not sure if i fully understand the question. But if it is only about how to manipulate a newly created ListBoxItem *once* before it is displayed, you could create a derived ListBox and just override the [PrepareContainerForItemOverride](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.preparecontainerforitemoverride.aspx) method.

```
public class MyListBox : ListBox
{
    protected override void PrepareContainerForItemOverride(
        DependencyObject element, object item)
    {
        base.PrepareContainerForItemOverride(element, item);

        var listBoxItem = element as ListBoxItem;
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:08:00.490

如果您的项目来源是`ObservableCollection`，您可以使用[`OnCollectionChanged`](http://msdn.microsoft.com/en-us/library/ms654934.aspx)事件，它具有[`NotifyCollectionChangedEventArgs`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.notifycollectionchangedeventargs.aspx)检查`NewItems`更改中涉及的新项目的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:09:03.560

也许创建一个cutsom列表框类并覆盖这些方法？

```
 public class SafeListBox : ListBox 
    { 
        delegate void insertDelegate(int i, object o); 

        public SafeListBox() 
        { 
            this.Items = new CustomObjectCollection(this); 
        } 

        public new CustomObjectCollection Items 
        { 
            get; 
            set; 
        } 

        public class CustomObjectCollection : ListBox.ObjectCollection 
        { 
            private ListBox listBox = null; 

            public CustomObjectCollection(ListBox listBox) : base(listBox) 
            { 
                this.listBox = listBox; 
            } 

            public new void Insert(int index, object item) 
            { 
                if (listBox.InvokeRequired) 
                { 
                    insertDelegate setTextDel = delegate(int i, object o) 
                    { 
                        base.Insert(i, o); 
                    }; 

                    try 
                    { 
                        listBox.Invoke(setTextDel, new object[] { index, item }); 
                    } 
                    catch 
                    { 
                    } 
                } 
                else 
                { 
                    base.Insert(index,item); 
                } 
            } 
        } 
    } 
```

# sql - 从 DBMS_UTILITY.LNAME_ARRAY 中选择数据

> ID：14238027
> 
> 赞同：1
> 
> 时间：2013-01-09T14:57:43.213
> 
> 标签：sql, oracle, plsql

```
DECLARE
ltab_vals DBMS_UTILITY.LNAME_ARRAY;
  v_tablen BINARY_INTEGER;
BEGIN

DBMS_UTILITY.COMMA_TO_TABLE(list   => 'AA,B,CC,DEF'
                              ,tablen => v_tablen
                              ,tab    => ltab_vals);

END;
/ 
```

如何在 select 语句中使用 ltab_vals 变量？我需要写这样的东西：

```
SELECT val INTO variable_ FROM v_tablen WHERE ...; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:16:31.523

您只能在 SQL 语句中使用 SQL 类型。所以你必须将该 PL/SQL 数组转换为 SQL 数组。

例如，如果我们创建一个`your_array`类型。

```
SQL> create table your_table(col varchar2(3));

Table created.

SQL> insert into your_table values ('AA');

1 row created.

SQL> insert into your_table values ('DEF');

1 row created.

SQL> create type your_array as table of varchar2(4000);
  2  /

Type created.

SQL> DECLARE
  2  ltab_vals DBMS_UTILITY.LNAME_ARRAY;
  3    v_tablen BINARY_INTEGER;
  4     v_t your_array := your_array();
  5  BEGIN
  6
  7    DBMS_UTILITY.COMMA_TO_TABLE(list   => 'AA,B,CC,DEF'
  8                                ,tablen => v_tablen
  9                                ,tab    => ltab_vals); 
```

将数组复制到 SQL 中：

```
 10    for idx in 1..ltab_vals.count
 11    loop
 12      v_t.extend;
 13      v_t(v_t.last) := ltab_vals(idx);
 14    end loop;
 15 
```

现在使用该`table()`功能形成选择。基数提示应该是对数组中元素数量的合理猜测。如果没有这个提示，您可能会发现 oracle 选择了一个更糟糕的计划（默认情况下，它将假定数组中有大约 8k 行）。

```
 17    for r_row in (select /*+ cardinality(p, 10) */ t.*
 18                    from your_table t
 19                         inner join table(v_t) p
 20                                 on t.col = p.column_value)
 21    loop
 22      dbms_output.put_line(r_row.col);
 23    end loop;
 24
 25  END;
 26  /
AA
DEF

PL/SQL procedure successfully completed. 
```

# haskell - 为什么 Happstack (toResponse) 默认使用 text/plain？

> ID：14238028
> 
> 赞同：1
> 
> 时间：2013-01-09T14:57:43.987
> 
> 标签：haskell, happstack

我正在使用`HStringTemplate`数据结构来渲染一个非常简单的模板来填充“漏洞”。模板渲染的结果只是`String`我吃`toResponse`的。

即使这个呈现的模板是有效的 html happstack`text/plain`用于`Content-Type`.

**这是什么原因？不应该`text/html`是默认的，因为它是一个网络服务器？** 我真的需要自己使用`toResponseBS`和设置`text/html`吗？

这是创建`ServerPart Response`

```
data Person = Person                                                                                                                                                                                                
    { name :: String                                                                                                                                                                                                
    , age ::Int                                                                                                                                                                                                     
    } deriving (Data, Typeable)                                                                                                                                                                                     

buildTemplate :: Person -> String -> FilePath -> ServerPart Response                                                                                                                                                
buildTemplate fields name template = do                                                                                                                                                                             
    unrendered <- liftIO $ readFile template                                                                                                                                                                        
    ok $ toResponse $ renderTemplate name fields unrendered                                                                                                                                                         

renderTemplate :: String -> Person -> String -> String                                                                                                                                                              
renderTemplate name fields unrendered = toString rendered                                                                                                                                                           
    where rendered = setAttribute name fields $ newSTMP unrendered 
```

这是网络服务器的输出：

**头**

```
Connection:Keep-Alive
Content-Type:text/plain; charset=UTF-8
Date:Wed, 09 Jan 2013 14:51:27 GMT
Server:Happstack/7.1.1
Transfer-Encoding:chunked 
```

**身体**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Memlikweb</title>
    </head>
    <body>
        <h1>Hello, Richard!<h1>
        <p>Do you have 25 for me?</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:15:45.517

If you pass Text.Html to toResponse the content type will be text/html. You are passing a string, which toResponse takes to mean that the content type is plain text.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T09:34:44.070

happstack [-hstringtemplate](http://hackage.haskell.org/package/happstack-hstringtemplate)包提供了一个实例，`ToMessage StringTemplate`这意味着如果您导入它然后`toResponse`在模板上使用而不渲染它，它将做正确的事情。

# solr - 当元数据有空格和冒号 QUERY LUCENE 3.5 时在 Solr 错误中搜索

> ID：14238032
> 
> 赞同：0
> 
> 时间：2013-01-09T14:57:59.920
> 
> 标签：solr

我有类似这样的 mi 元数据：

<数据>

<d>顶部：Usuarios:Usuarios Tecnologia:Programador</d>

</数据>

<数据>

<d>顶部:Usuarios:Usuarios Tecnologia:Analista</d>

</数据> <数据>

<d>顶部：Usuarios:Usuarios:Abogado</d>

</数据>

我想搜索这样的东西（在正则表达式中）： Top:Usuarios:Usuarios Tecnologia.+ 我有 solr 3.5 如果是正则表达式查询或任何其他。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:57:25.040

> 我想搜索这样的东西（在正则表达式中）：顶部：Usuarios：Usuarios Tecnologia。

您需要使用反斜杠对那些特殊字符（冒号）进行分隔 [1,2]。你用什么客户端搜索？

**卷曲**
`curl http://localhost:8983/solr/select?select?q=d:Top\\:Usuarios\\:Usuarios Tecnologia\\:Analista`

**网页浏览器**
`http://localhost:8983/solr/select?select?q=d:Top\:Usuarios\:Usuarios Tecnologia\:Analista`

[1] [http://wiki.apache.org/solr/SolrQuerySyntax#NOTE:_URL_Escaping_Special_Characters](http://wiki.apache.org/solr/SolrQuerySyntax#NOTE:_URL_Escaping_Special_Characters)
[2] [http://lucene.472066.n3.nabble.com/Best-Solr-escaping-td3365943.html](http://lucene.472066.n3.nabble.com/Best-Solr-escaping-td3365943.html)

# r - R中的lowess拟合曲线

> ID：14238037
> 
> 赞同：1
> 
> 时间：2013-01-09T14:58:15.750
> 
> 标签：r, curve-fitting

这段代码给了我平均值，但我不知道如何获得 +1sd 和 -1 sd 线。

```
y<-lowess(x[,1],x[,2],f=0.01) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:27:05.017

嗯，也许 msir:::loess.sd() 做你想做的事：

```
require(graphics)
plot(cars, main = "lowess(cars)")

require(msir)
low <- loess.sd(cars[ ,1], cars[ ,2])
lines(low$x, low$y)
lines(low$x, low$upper)
lines(low$x, low$lower) 
```

![在此处输入图像描述](../Images/0ddc6cd93637d6532182933b253bab93.png)

# ruby-on-rails - carrierwave_direct 异常空文件

> ID：14238041
> 
> 赞同：0
> 
> 时间：2013-01-09T14:58:22.057
> 
> 标签：ruby-on-rails, ruby, carrierwave

我使用 carrierwave_direct 上传文件，但是当上传的文件为空时，我收到了这样的错误：

```
<Error><Code>EntityTooSmall</Code><Message>Your proposed upload is smaller than the minimum allowed size</Message><MinSizeAllowed>1</MinSizeAllowed><ProposedSize>0</ProposedSize><RequestId>FE2FE66371A06E29</RequestId><HostId>k3aJ8EtnmPvVxJszZukKYbtEO5Ddrjq/a+FdhqTyL1nZ7afy+msTAA1MiwX8lXvH</HostId></Error> 
```

如何捕捉这个异常？我的代码：

```
collection_action :new_import do
    @uploader = @organization.import_file
    @organization.save
    @uploader.success_action_redirect = import_admin_organization_rooms_url(@organization)
  end

  collection_action :import do
    RoomImportWorker.perform_async(params[:bucket],params[:key],@organization.id,current_user.id)
    redirect_to admin_organization_rooms_path(@organization), :notice => "Your request has been accepted! We will inform you via email about the results!"
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:10:16.860

我猜这个验证看起来不错：

[https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Validate-attachment-file-size](https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Validate-attachment-file-size)

# jenkins - 将“成本”分配给 Jenkins 奴隶？

> ID：14238053
> 
> 赞同：0
> 
> 时间：2013-01-09T14:58:57.767
> 
> 标签：jenkins, continuous-integration, jenkins-plugins

我有一个 Jenkins 主设置，在我们的主数据中心有几个从站，在我们的 DR/BC（灾难恢复/业务连续性）数据中心有一个从站。

我希望定期在 DR 从站上运行作业，以确保它与所需的软件保持同步并且不会过时，但由于我们的 DR 中心在地理上远离构建和测试中使用的资源（SAN、DB等）作业的运行时间要长 4 到 10 倍。这对于 DR 场景来说很好，但对于日常生活来说却很痛苦。

看来 Jenkins 会按字母顺序对从站进行排序以选择在哪个上运行作业，这是不幸的，因为我们的机器命名约定是基于数据中心位置的，并且总是首先选择 DR 从站。

有没有办法指定詹金斯如何挑选奴隶？还是一种指定从属设备的“成本”（如路由成本）的方法，以便减少选择它的频率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:20:08.270

我已经确定的解决方案：

*   将 DR 从属可用性配置为“在需要时使该从属联机，在空闲时使该从属脱机”
*   创建一个“BuildAll”作业以同时启动所有集成构建。
*   安排 BuildAll 在凌晨 3 点重复运行 ( 0-10 3 * * * )

这将强制 DR 从站联机，并运行几次随机作业，这将显示该从站是否落后于任何所需的软件、补丁等。

# excel - VBA 初学者：大于

> ID：14238061
> 
> 赞同：2
> 
> 时间：2013-01-09T14:59:12.357
> 
> 标签：excel, vba

我在第 1 行中输入了数值，从列`A`到`IA`. 我想创建一个循环，将一个单元格与其之前的单元格进行比较（又名 Cell `B1`to`A1`或 cell `F`to `E`）。让我们以`B1`and`A1`为例。它查看单元格中的值，看看`B1`它是否大于单元格中的值`A1`。如果它更大，那么我希望`+`在 Cell 中输入a `B2`。此外，如果`B1`将`< A1`a`-`放入 Cell `B2`。我希望程序能够循环此过程，以便它对所有列执行此操作`A-AI`。以下是我希望程序执行的操作（当然，不包括正负号周围的破折号和括号）。

```
        ABCDF
1 33.12 34.52 34.92 35.19 34.97
2 (+) (+) (+) (-)

```

我意识到这个任务很容易在 excel 中执行（不使用 VBA），但我正在尝试学习 VBA，以便我可以执行更复杂的任务。我已经编写了基本代码来完成简单的任务，但我不确定如何循环它，所以它会为我的所有单元格执行此操作！

```
Sub EnterFormula()

    Dim x As Integer
    Dim y As Integer

    x = Worksheets("Sheet2").Range("C2").Value
    y = Worksheets("Sheet2").Range("B2").Value

    If x > y Then
        Worksheets("Sheet2").Range("C4") = "+"
    End If

End Sub 
```

好的，所以对于我的程序的下一部分。它变得更加复杂。我们移动到第 3 行。第 3 行将要么有一个 U（代表向上）或一个 D（代表向下），要么什么都没有。

让我们从 C 列开始。C1 列的值为 34.92，C2 的值为 +（因为 34.92 大于前一天的 33.02）。现在我们转到前面的第一个“+”，中间至少有一个相反的符号（在本例中为“-”）。因此，在这种情况下，即为 A 行（B 行下方中间有一个“-”）。现在，如果 C1 (34.92) 中的数值大于 A (33.12) 中的数值，那么我们在 C3 中指定一个“U”。如果它不是更大，我们将在 C3 中留下一个空单元格。

让我们进入 D 列。D1 列的值为 35.19，大于 C1 的值 34.92，这就是 D2 有“+”的原因。接下来我们转到前面的第一个“+”，中间至少有一个相反的符号（在本例中为“-”）。所以在这种情况下，这又是 A 行。由于 D1 (39.19) 中的数值大于 A1 (33.12) 中的数值，因此 D3 得到一个 U。

移至 F 列（32.97）...注意：我将值从原始 F 更改了一点。32.97 比 35.19（D1）少，这就是为什么 F2 是“-”。接下来，我们转到前一个“-”，中间至少有一个相反的符号（在本例中为“+”）。所以在这种情况下，这是 B 行（中间有两个“+”号）。现在因为我们这次处理的是“-”符号，所以我们看看 F1 中的数值是否小于 B1 中的数值……它是，所以在 F3 中输入了一个“D”。如果 F1 大于 B1，则该单元格将为空。

在 G 列 (35.21) 上。这大于 32.97 (F1)，因此在 G2 中获得“+”。接下来我们转到前面的第一个“+”，中间至少有一个相反的符号（在本例中为“-”）。所以在这种情况下，这是 D 行（中间有一个“-”）。由于 G1 的数值大于 D1 的数值，我们指定为“U”。如果它不是更大，我们会将单元格留空。

```
        ABCDFGHI
1 33.12 33.02 34.92 35.19 32.97 35.21 35.60 35.90
2 (+) (-) (+) (+) (-) (+) (+) (+)
3 呜呜呜

```

到目前为止，这是我的代码。我已添加到创建“+”符号和“-”符号的原始代码中。

```
Sub Comparison()

    Dim targetCell As Range
    Dim targetSignCell As Range
    Dim currentSign As String
    Dim currentNumericalCell As Currency

    ' Find out what sign (+ or -) the current Cell has in it
    currentSign = Worksheets("Sheet2").Range("H3").Value
    'Variable to associate the numerical number above the current Cell
    currentNumericalCell = Worksheets("Sheet2").Range("H2").Value

    ' Here we iterate through each cell in a specified range
    ' Since you know you want to start at B1 and go until E1,
    ' you can ues the following syntax to go through each cell
    For Each Cell In Range("B2:H2")

    ' Get the value of the current cell with the .Value property
currentValue = Cell.Value 
```

' 现在获取它之前的单元格的值（按列） previousValue = Cell.Offset(0, -1).Value

```
' Create a variable for our target cell
Set targetCell = Cell.Offset(1, 0)

' Here are the basic comparisons
If currentValue > previousValue Then
    targetCell.Value = "+"
ElseIf currentValue < previousValue Then
    targetCell.Value = "-"
ElseIf currentValue = previousValue Then
    targetCell.Value = "="
Else
    ' Not sure how it would happen, but this
    ' is your catch-all in case the comparisons fail
    targetCell.Value = "???"
End If

' Now go to the next cell in the range
Next Cell

'Alex starting to code
For Each Cell In Range("H3:B3")
' Find out what the sign is in the cell before it
previousSign = Cell.Offset(0, -1).Value
'Variable used to find the first cell with an
'Opposite sign as the current cell
oppositeSign = Cell.Offset(0, -2).Value
'Variable to associate the numberical number above the first Opposite Sign Cell
oppositeNumericalCell = Cell.Offset(-1, -2).Value
' Create a Variable for Target Cell
Set targetSignCell = Cell.Offset(1, 0)
If currentSign.Value = "+" And currentSign.Value <> previousSign.Value And oppositeSign.Value = currentSign.Value And currentNumericalCell.Value > oppositeNumericalCell.Value Then
targetSignCell = "U"
ElseIf currentSign.Value = "-" And currentSign.Value <> previousSign.Value And oppositeSign.Value = currentSign.Value And currentNumericalCell.Value < oppositeNumericalCell.Value Then
targetSignCell = "D"
Else
End If
Next Cell
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:56:32.890

我同意@JohnBus​​tos 的观点，即公式会更有效，但是如果这确实是一个学习练习，那么这里有一个简单的例子，可以满足你的要求：

```
Sub Comparison()

Dim targetCell As Range

' Here we iterate through each cell in a specified range
' Since you know you want to start at B1 and go until E1,
' you can ues the following syntax to go through each cell
For Each cell In Range("B1:E1")

    ' Get the value of the current cell with the .Value property
    currentValue = cell.Value

   ' Now get the value of the cell that is before it (column-wise)
    previousValue = cell.Offset(0, -1).Value

    ' Create a variable for our target cell
    Set targetCell = cell.Offset(1, 0)

    ' Here are the basic comparisons
    If currentValue > previousValue Then
        targetCell.Value = "+"
    ElseIf currentValue < previousValue Then
        targetCell.Value = "-"
    ElseIf currentValue = previousValue Then
        targetCell.Value = "="
    Else
        ' Not sure how it would happen, but this
        ' is your catch-all in case the comparisons fail
        targetCell.Value = "???"
    End If

' Now go to the next cell in the range
Next cell

End Sub 
```

如果你要作为一个公式来做，它可能是这样的（输入`B2`并复制到范围的末尾）：

```
=IF(B1>A1,"+",IF(B1<A1,"-","=")) 
```

这将比较公式上方的单元格和该单元格左侧的单元格并添加适当的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T19:36:18.527

假设您要工作的范围内没有空单元格，您可以这样做：

```
Range("b2").Select
Do Until IsEmpty(ActiveCell.Offset(-1, 0))
If ActiveCell.Offset(-1, 0).Value > ActiveCell.Offset(-1, 1).Value Then
ActiveCell.Formula = "+"
End If
If ActiveCell.Offset(-1, 0).Value < ActiveCell.Offset(-1, 1).Value Then
ActiveCell.Formula = "-"
End If
ActiveCell.Offset(0, 1).Select
Loop 
```

如果范围内有空单元格，则不要使用“直到”

```
dim I 
for I = 1 to ..

next I 
```

# java - 带有 JAXB 的嵌套元素，其中元素同时保存属性和元素值

> ID：14238062
> 
> 赞同：4
> 
> 时间：2013-01-09T14:59:14.973
> 
> 标签：java, jaxb, marshalling, moxy

环境：带有 EclipseLink MOXy 的 JAXB 2.1.2

要求：

我想在编组时得到这样的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<root id="id123">
   <email>test@gmail.com</email>
   <address type="short">...</address>
</root> 
```

我用这两个类对此进行建模：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="root")
public class ClassA {

    @XmlAttribute(name="id")
    private String id = null;

    @XmlElement(name="address")
    private Address addr = new Address();

    // and some getters setters
} 
```

和

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Address {

    @XmlElement(name="address")
    private String address = null;

    @XmlAttribute(name="type")
    private String type = null;

} 
```

我得到的是这个，地址被嵌套两次：

```
<?xml version="1.0" encoding="UTF-8"?>
<root id="id123">
   <email>test@gmail.com</email>
   <address type="short">
      <address>...</address>
   </address>
</root> 
```

如何删除一个层次结构？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T15:01:48.700

您可以执行以下操作`@XmlValue`：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Address {

    @XmlValue
    private String address = null;

    @XmlAttribute(name="type")
    private String type = null;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html](http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html)

# c# - FluentAssertions：ShouldBeEquivalentTo 方法仍然调用 Object.Equals()？

> ID：14238064
> 
> 赞同：4
> 
> 时间：2013-01-09T14:59:22.073
> 
> 标签：c#, unit-testing, fluent-assertions

我有一个类，我们称之为它`Foo`，它是一个值类型，因此会覆盖`Equals`/`GetHashCode()`方法。在一个单独的测试夹具中，我想断言 Foo 上的所有属性都已正确设置，而不仅仅是用于相等的属性。出于这个原因，我的测试断言专门使用了该`ShouldBeEquivalentTo`方法，如果“两个对象图具有相同名称的具有相同值的属性，而与这些对象的类型无关”，文档建议该方法将认为两个对象是等效的。

但是，似乎`ShouldBeEquivalentTo`调用`Foo.Equals`方法，得到一个真实的结果，然后继续短路`ShouldBeEquivalentTo`承诺的基于反射的属性匹配。

这是预期的行为吗？如果是这样，在检查 FA 源时，我发现没有简单的方法来改变这种行为（`IEquivalencyStep`被声明为内部的）。还有其他方法可以解决这个问题吗？

编辑：丹尼斯：是的，我比较的两个对象属于同一类型。总而言之，我已经覆盖`Equals` 了类 Foo，但不希望 FA 在我的单元测试中使用这种相等的概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:52:54.823

I think you cannot alter behavior of this function, it assumes that if you override `Equals` - than you want comparison to be the same way. You can try the following function:

```
dto.ShouldHave().SharedProperties().EqualTo(foo); 
```

Or you can implement in Foo class `NativeEquals` method which will be calling `base.Equals()` , and then use this method explicitly for comparison, it will work great for value types.

# repository - 如何从代码中引导 Jackrabbit

> ID：14238066
> 
> 赞同：0
> 
> 时间：2013-01-09T14:59:23.237
> 
> 标签：repository, jackrabbit

我正在尝试从应用程序运行 jackrabbit 存储库。有什么方法可以引导 jackrabbit 启动存储库。我无法使用 jackrabbit 手册中提到的任何部署模型，因为我需要从数据库中动态获取存储库位置。我正在寻找从 java 代码中声明/关闭存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:53:18.753

你有两个选择：

*   从您的数据库中获取连接参数并使用 JcrUtils 连接到存储库。
*   启动需要配置文件 (repository.xml) 和存储库主目录的存储库。[您在Silverpeas 代码](https://github.com/ehsavoie/Silverpeas-setup/blob/feature_82/src/main/java/org/silverpeas/migration/jcr/util/RepositoryManager.java)中有一些示例。

# asp.net-mvc - 在 IIS7 上部署 ASP.NET 应用程序

> ID：14238067
> 
> 赞同：0
> 
> 时间：2013-01-09T14:59:25.377
> 
> 标签：asp.net-mvc, iis

我正在用 C# 开发一个 ASP.NET MVC 4.5 应用程序。当我在本地 IIS Express 上编译后运行它时，它可以完美运行。但是，当我尝试将其上传到远程服务器时，它似乎无法识别其根目录中的任何内容。它只显示默认的欢迎屏幕。

我尝试重新配置 web.config 文件以指向 Global.asax 文件，但没有成功。我可以通过根据站点结构修改 URL 来加载单个图像。

ASP.NET MVC 4.5 上的初始“起始文件”是什么？如何配置 IIS7 来加载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:12:52.927

检查您的服务器配置（如果可能），首先启用 Web 服务器 (IIS) 角色（可以从服务器管理器或 PowerShell 添加），然后安装 .NET Framework，或使用 .net 框架文件夹（C:\Windows）中的 aspnet_regiis.exe \Microsoft.NET\Framework\v4.0.30319 和 C:\Windows\Microsoft.NET\Framework64\v4.0.30319），如果服务器已配置 iis Web 角色和已安装但配置不正确的 .net 框架。如果不确定要添加哪些角色功能，请使用 Web PI 并添加 IIS 推荐配置 (http://www.microsoft.com/web/downloads/platform.aspx)

注意：在 MVC 4 Web 应用程序的 Visual Studio 2012 项目模板中，作为来自 NuGet 的复制本地 MVC 程序集引用，因此您不需要在 Web 服务器上安装 MVC 4。

使用 IIS 注册当前 .NET 版本的命令（从您正在执行此实用程序的文件夹中执行，首先是 32 位，然后是 64 位操作系统上的 64 位）：

```
aspnet_regiis -i 
```

PowerShell 添加 Web 服务器角色：

```
PS> Import-Module ServerManager
PS> Add-WindowsFeature Web-Server 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:20:47.843

如果您看到默认的 IIS 欢迎屏幕，则可能是由于不正确的网站绑定 (IP:port:hostheader)。每当 IIS 无法找到具有特定绑定的网站时，它会将请求返回到带有 *:80 绑定的“默认网站”，您可能会观察到。

# python - 如何从 booggie 2 中的脚本访问外部 python 模块？

> ID：14238069
> 
> 赞同：-2
> 
> 时间：2013-01-09T14:59:34.680
> 
> 标签：python, booggie

这是图转换工具 booggie 用户的一个问题：

在脚本中，有没有办法在任意 .py 文件中导入外部 python 模块并像脚本中的常规 python 模块一样使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:37:00.803

编写一个在 Python 环境中添加所需目录的*setEnvironment* -script 是一种很好的做法。由于目录的位置可能因不同的计算机而异，因此添加计算机名称开关会很有帮助。

脚本如下所示：

```
def setEnvironment():
""" GrGenSignature:  setEnvironment(): boolean     """

import sys
import os

# Asking your computer for its name
computer_name = os.getenv("COMPUTERNAME")   

# Define path for PC1\. That's where your modules are.
# Make sure to use two backslashes!
if computer_name == "PC1":
    source_path = "D:\\path\\to\\your\\project\\source" 

# Add src folder to python enironment
sys.path += [ os.path.join(source_path) ]

# For those who want some info during the transformation
print(("----------- Setting the environment for your project -----------"))
print("This is computer:" + computer_name)
print("Source path: " + str(source_path))
print("----------------------------------------------------------------------") 
```

现在，您可以在任何规则中导入 *source_path* 中的模块，即 .py 文件。确保在脚本中导入，以便在添加路径后完成导入。如果你想继续在你的 python 模块中编码，如果你总是重新加载模块，你可以确保总是获得最新版本。因此，您可以在任何脚本中添加它（假设 myHelper.py 位于源路径中）：

```
import myHelper
reload(myHelper) 
```

# ivy - 在 Ivy 中，如何选择最新版本的传递依赖？

> ID：14238073
> 
> 赞同：1
> 
> 时间：2013-01-09T14:59:46.007
> 
> 标签：ivy, conflicting-libraries

有没有办法告诉 Ivy 在传递依赖项中更喜欢特定库的最新版本，而不会将传递依赖项转变为直接依赖项？

在检索构建所需的工件后，我最终得到了同一个库的两个版本，都作为传递依赖项。我已经运行了一份报告，所以我知道这些库的来源，但我不希望最终在我的 ivy.xml 文件中引用可传递库。

常春藤手册指出“如果没有定义特定的冲突管理器，则对所有模块使用默认冲突管理器。当前的默认冲突管理器是'最新版本'冲突管理器”。显然这不适用于传递依赖。

有没有办法在不直接引用传递库的情况下实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:09:19.480

传递依赖项是您的依赖项的依赖项，因此当引用同一库的一个或多个版本时可能会发生冲突。这是冲突管理器功能发挥作用的地方。默认情况下，ivy 将选择最新版本，假设大多数库向后兼容。如果您查看[报告任务](http://ant.apache.org/ivy/history/latest-milestone/use/report.html)生成的报告，您会看到其他版本被标记为“驱逐”。

您的问题似乎提出了另一种操作模式？也许一个例子会有所帮助。

# matlab - 使用matlab进行洪水填充

> ID：14238083
> 
> 赞同：4
> 
> 时间：2013-01-09T15:00:17.980
> 
> 标签：matlab, flood-fill

我是 MATLAB 新手，我正在尝试在 matlab 中使用这个[算法](http://en.wikipedia.org/wiki/Flood_fill#Stack-based_recursive_implementation_.28Four-way.29)来实现洪水填充，我不知道我做错了什么可能是我没有正确使用递归函数，但我仍然没有出什么问题，这段代码让我的 matlab 关闭我我正在使用以下代码我从早上开始尝试调试它但未能找到问题

```
function [ colored_Image ] = floodFill( image, target_Loc_x, target_Loc_y, targetColor, replacementColor )
colored_Image = image;

if (target_Loc_x >= 1) && (target_Loc_x <= size(image,1)) && (target_Loc_y >= 1) && (target_Loc_y <= size(image,2))
    if image(target_Loc_x,target_Loc_y) == targetColor
        colored_Image(target_Loc_x,target_Loc_y) = replacementColor;
        colored_Image = floodFill(colored_Image,target_Loc_x ,target_Loc_y + 1, targetColor, replacementColor); 
        colored_Image = floodFill(colored_Image,target_Loc_x + 1,target_Loc_y, targetColor, replacementColor);
        colored_Image = floodFill(colored_Image,target_Loc_x,target_Loc_y - 1, targetColor, replacementColor);
        colored_Image = floodFill(colored_Image,target_Loc_x - 1,target_Loc_y, targetColor, replacementColor);
    end

end

end 
```

使用调用此函数

```
image = floodFill(im,1,1,0,127);
imshow(image); 
```

我是我的 200 x 200 的矩阵图像我想要我的黑色（0）到灰色（127），任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:35:05.103

您可能正在达到 Matlab 的递归限制。我的计算机没有崩溃，但会生成此错误：

> 达到最大递归限制 500。使用 set(0,'RecursionLimit',N) 更改限制。请注意，超出可用堆栈空间可能会使 MATLAB 和/或您的计算机崩溃。

解决这个问题的方法是重写 floodFill 使其不使用递归。维基百科上有一些[替代算法](http://en.wikipedia.org/wiki/Flood_fill#Alternative_implementations)。

另外：[aardvarkk 的回答](https://stackoverflow.com/a/14238692/1339280)对 Matlab 的[列主](http://en.wikipedia.org/wiki/Row-major_order#Column-major_order)索引很重要。您可以通过交换所有 x 和 y 变量来修复您的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T15:30:19.273

我认为这有两个问题：

a）您似乎`image`正在按顺序索引矩阵`(x,y)`。MATLAB 矩阵按列顺序排列，因此您必须（不直观地）按顺序对它们进行索引`(y,x)`。所以这一行：

`image(target_Loc_x,target_Loc_y)`

应该是：

`image(target_Loc_y,target_Loc_x)`

在彩色图像中设置值时也是如此。另请注意，这`size(image,1)`将给出`y`方向的大小，而不是`x`！

b）您正在使用递归函数来执行非常简单的操作。它很快就达到了 MATLAB 的递归限制。在 200x200 图像中，您将有 40,000 深度的调用堆栈，而 MATLAB 默认情况下仅允许递归限制为 500。为什么不尝试这样的事情：

```
colored_image = image;
colored_image(colored_image == targetColor) = replacementColor; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-02T23:30:58.630

```
    %（假设您的图像已加载到 img 并且您正在填充“值”）

函数洪水（x，y，img，值）

    %MATLAB 没有友好队列？使用java   
    导入 java.util.LinkedList
    q = 链表（）；

    %洪水填充图像
    初始 = img(y,x);

    q.add([y, x]);

    而 q.size() > 0

        pt = q.removeLast();
        y = pt(1);
        x = pt(2);

        if (img(y+1, x) == 初始)
            img(y+1,x) = 值；
            q.add([y+1, x]);
        结尾
        如果（img（y-1，x）==初始）
            img(y-1,x) = 值；
            q.add([y-1, x]);
        结尾
        if (img(y, x+1) == 初始)
            img(y,x+1) = 值；
            q.add([y, x+1]);
        结尾
        如果（img（y，x-1）==初始）
            img(y,x-1) = 值；
            q.add([y, x-1]);
        结尾
    结尾
结尾

```

因为 matlab 的递归限制非常低，所以我从来没有使用递归调用来填充洪水。另外，因为它似乎没有合适的队列（如果我错了，请纠正我），从 java.util 中导入一个更容易。

这没有做任何边界检查（所以如果洪水击中边缘就会失败......简单的解决方法是在你的图像周围放置一个边框，或者在索引 img 之前只检查 x 和 y 范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-21T15:50:00.953

对@Jason 的回答进行了一些修复 - 我添加了边界检查，即填充颜色与初始颜色不同（否则为无限递归）并返回结果的保护。工作但很慢。

```
function img = flood(x,y,img,value)
    % http://stackoverflow.com/questions/14238083/flood-fill-using-matlab
    import java.util.LinkedList
    q = LinkedList();

    initial = img(y,x);
    dims = size(img);
    if (value == initial) 
        error('cant flood fill as initial==value');
    end

    q.add([y, x]);

    while q.size() > 0

        pt = q.removeLast();
        y = pt(1);
        x = pt(2);

        if (y < dims(1) && img(y+1, x) == initial) % step down
            img(y+1,x) = value;
            q.add([y+1, x]); 
        end
        if (y > 1 && img(y-1, x) == initial) % step up
            img(y-1,x) = value;
            q.add([y-1, x]); 
        end
        if (x < dims(2) && img(y, x+1) == initial) % step right
            img(y,x+1) = value;
            q.add([y, x+1]); 
        end
        if (x > 1 && img(y, x-1) == initial) % step left
            img(y,x-1) = value;
            q.add([y, x-1]); 
        end
    end
end 
```

# php - 在php中获取一个JS值

> ID：14238084
> 
> 赞同：0
> 
> 时间：2013-01-09T15:00:18.253
> 
> 标签：php, javascript

我有一个 js 函数来返回一首歌曲的标题和另一个返回同一首歌曲的艺术家。然后我有另一个函数，它生成一个组合名称和艺术家的字符串。最后我想在 php 中打印该字符串。这是我的js：

```
function getName(){

      return artist+ ", " + title;
  } 
```

这是我的 php：

```
echo '<script>getName();</script>'; 
```

但这不会返回任何东西。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:04:31.733

您仍然必须输出返回值：
`echo '<script>document.write(getName());</script>';`不需要 jQuery，而是简单的 vanilla javascript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:01:43.457

你没有把它放在屏幕上。

`alert(getName());`会工作。同样适用`$('.element').text(getName());`或类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:09:49.303

在标准配置上没有可行的方法来执行此操作。在 PHP 之后评估 Javascript。PHP 执行，然后服务器将结果发送到客户端浏览器。然后浏览器呈现该结果，然后执行 javascript。我可以问你为什么这样做吗？似乎过于复杂。为什么不只是：`document.write(getName());`？

# zend-framework - 在包含不同 URL 的向导 iframe 中配置 URL 目标

> ID：14238091
> 
> 赞同：1
> 
> 时间：2013-01-09T15:00:38.277
> 
> 标签：zend-framework, google-analytics

我开始使用谷歌分析，我的问题如下。我正在尝试设置不同的 url 目标，但问题是我在 iframe 中有一个注册过程，就像一个向导。对于谷歌分析，所有过程都发生在同一个视图中，但在 iframe 中，url 一直在变化。我需要帮助来在管理面板中配置我的目标以及我必须在代码中做什么。我正在使用 Zend 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:41:46.227

在 iframe html 中添加标准跟踪代码。

如果您的 iframe 在同一个域上，则可以正常工作。

如果没有，请参阅[文档上的](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite?hl=fr#trackingIFrames)说明：

> 使用 JavaScript 加载 iFrame 并使用 _getLinkerURL() 方法传入 cookie 信息

```
_gaq.push(function() {
    var pageTracker = _gat._getTrackerByName();
    var iframe = document.getElementById('myIFrame');
    iframe.src = pageTracker._getLinkerUrl('http://www.my-example-iframecontent.com/');
}); 
```

# php - PHP正则表达式：匹配最接近的一个

> ID：14238095
> 
> 赞同：1
> 
> 时间：2013-01-09T15:00:54.330
> 
> 标签：php, regex, html-parsing

我有一个这样的字符串

```
<div><span style="">toto</span> some character <span>toto2</span></div> 
```

我的正则表达式：

```
/(<span .*>)(.*)(<\/span>)/ 
```

我使用了 preg_match 它返回整个字符串

```
<span style="">toto</span> some character <span>toto2</span> 
```

我希望它返回：

```
<span style="">toto</span>
and
<span>toto2</span> 
```

我需要做什么才能实现这一目标？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T15:07:58.723

这个怎么样：

```
/(<span[^>]*>)(.*?)(<\/span>)/ 
```

[在PHP preg_match Repetition](http://php.net/manual/en/regexp.reference.repetition.php)查看文档：

> 默认情况下，量词是“贪婪的”，即尽可能匹配

和

> 但是，如果量词后跟问号，则它会变得懒惰，而是匹配可能的最小次数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:10:16.590

即使我猜所有以前的答案都是正确的，我只想补充一点，因为您只想捕获整个表达式（即 from to ），您不必捕获正则表达式中`()` 的所有内容以下内容可以满足您的期望而无需捕获附加表达式

```
/(<span\w*[^>]*>[^<]*<\/span>)/ 
```

（在[http://rubular.com/](http://rubular.com/)上测试过）

编辑：当然，PHP 和 ruby​​ 正则表达式实现之间可能存在一些差异，但想法是一样的 :)

# ios5 - 使用launchImage但在iphone5中保持边界

> ID：14238096
> 
> 赞同：0
> 
> 时间：2013-01-09T15:00:55.100
> 
> 标签：ios5, ios6, retina-display, iphone-5

无论如何我可以使用“Default-568@2x.png”添加启动图像，但不能以 4" 原始分辨率运行并保持边界。

我想要一个启动图像，但想要保持其他所有内容相同，并且想要保持黑色边界，以便视图的背景不会拉伸。

我支持 ios5，所以我不能使用 Autolayout。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:04:25.507

恐怕不是，因为使用`Default-568@2x.png`方法：我在 4" 工作...

# c# - 如何使用序列化将 datagridview 转换为 xml 文件？

> ID：14238097
> 
> 赞同：0
> 
> 时间：2013-01-09T15:00:55.563
> 
> 标签：c#, xml, datagridview

如何使用序列化将 datagridview 转换为 xml 文件？

以下代码不起作用，因为`dt`总是`null`.

```
 DataTable dt = new DataTable();
 dt = dataGridView1.DataSource as DataTable;
 DataSet ds = new DataSet();
 ds.Tables.Add(dt);
 ds.WriteXml(@"e:\results.xml", System.Data.XmlWriteMode.IgnoreSchema); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:54:42.097

```
 BindingSource bs = new BindingSource();
        DataTable dt = new DataTable();
        DataSet ds = new DataSet();

        dt.Columns.Add("1", typeof(int));
        dt.Columns.Add("2");
        dt.Columns.Add("3");
        dt.Columns.Add("4");
        dt.Columns.Add("5");

        string[] row = {null,"dsadxaxsa","xasxsa","","dsad"};
        string[] row1 = { "1", "ddd", "gg", "hh", "ff" };
        string[] row2 = { "2", "h", "hhhh", "sas", "dsad" };
        string[] row3 = { "3", "h", "hhhh", "sas", "dsad" };
        string[] row4 = { null, "h", "hhhh", "sas", "dsad" };
        dt.Rows.Add(row);
        dt.Rows.Add(row1);
        dt.Rows.Add(row2);
        dt.Rows.Add(row3);
        dt.Rows.Add(row4);

        bs.DataSource = dt;
        dataGridView1.DataSource = bs;

        ds.Tables.Add(dt);
        ds.WriteXml("e:\\results.xml", System.Data.XmlWriteMode.IgnoreSchema); 
```

# batch-file - 此 CMD 代码检查 x32 或 x64 ，但它不起作用？

> ID：14238101
> 
> 赞同：1
> 
> 时间：2013-01-09T15:01:05.687
> 
> 标签：batch-file, cmd, 64-bit

所以我正在创建一个 LEGIT Office 2013 激活器，它使用我们的 Genuine 密钥并运行 /act 脚本来激活它。

因此，为了检查 Office 的 x32 或 x64 位，我让 cmd 搜索名为 ospp.vbs 的文件，如果在 x86 中找到则为 x32，如果在程序文件中找到则为 x64。但是如果在 x32 中没有找到它，它会继续下一步，但它告诉我 /microsoft 不是预期的，然后它会关闭？这是我的 CMD 文件：

```
@echo off
echo.Microsoft Office 2013 Activator
pause >nul
cls
NET SESSION >nul 2>&1
IF %ERRORLEVEL% EQU 0 (
    goto :Start
) ELSE (
echo.
echo.
echo.
echo.           ERROR: YOU ARE NOT AN ADMIN!
ECHO.   PLEASE RUN THIS TOOL AS AN ADMIN IN ORDER FOR IT TO WORK PROPERLY
ECHO.              PRESS ANY KEY TO EXIT THE TOOL
PAUSE >NUL
EXIT
)

:Start
type "C:\program files (x86)\microsoft office\office15\ospp.vbs" >NUL 2>NUL
if %ERRORLEVEL% EQU 0 (
echo.x32 Office 2013 on x64 Machine Found.
echo.Why did you get x32 Office on an x64 Machine?
echo.Preparing to activate...
pause >nul
cls
goto :x32
) ELSE (
goto :x64check
)
:x64check
type "C:\program files\microsoft office\office15\ospp.vbs" >NUL 2>NUL
if %ERRORLEVEL% EQU 0 (
    echo.x64 Office 2013 on x64 Machine Found 
echo.or
echo.x32 Office 2013 on x32 Machine Found
echo.Preparing to Activate...
pause >nul
cls
goto :x64
) ELSE (
echo.Office 2013 Could not be found on this machine...
echo.Are you sure Office 2013 is installed?
echo.If it is installed , search for ospp.vbs in C:\program Files (x86)\Microsoft Office\Office 15\
pause >nul
cls
)

:x32
cd "C:\program files (x86)\microsoft office\Office15\"
cls
cscript ospp.vbs /remhst
cls
cscript ospp.vbs /act
cls
cscript ospp.vbs /dstatus
pause >nul
echo Check the Above to see if Activation succeded or press any key to open winword and check it maunally.
pause >nul
start winword

:x64
cd "C:\program files\microsoft office\Office15\"
cls
cscript ospp.vbs /remhst
cls
cscript ospp.vbs /act
cls
cscript ospp.vbs /dstatus
pause >nul
echo Check the Above to see if Activation succeded or press any key to open winword and check it maunally.
pause >nul
start winword 
```

你能告诉我我的问题在哪里吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:22:25.103

该错误消息的原因是这一行：

```
echo.If it is installed , search for ospp.vbs in C:\program Files (x86)\Microsoft Office\Office 15\ 
```

右括号`)`被解释为`else`. 将它们用作文字时转义括号，并且它们不包含在引号中。

```
echo.If it is installed , search for ospp.vbs in C:\program Files ^(x86^)\Microsoft Office\Office 15\ 
```

# hibernate - hibernate搜索通配符短语查询

> ID：14238104
> 
> 赞同：1
> 
> 时间：2013-01-09T15:01:14.737
> 
> 标签：hibernate, lucene, hibernate-search

如何配置 lucene + hibernate 并开发通过该字段值的任何确切部分匹配某个字段的通配符查询？例如，如果我们对某个字段“标题”进行了索引，并且它只有两个条目：“我的第一个通配符查询”。和“我的第二个通配符查询。”；那么如果我们查询“irsT WiLdCaRd q”，那么它必须只返回第一个。它也不必区分大小写。

我试过这样的事情：

```
 FullTextSession ftSession = org.hibernate.search.Search.getFullTextSession((Session) em.getDelegate());
    QueryContextBuilder qbc = ftSession.getSearchFactory().buildQueryBuilder();
    EntityContext entityContext = qbc.forEntity(Book.class);
    QueryBuilder qb = entityContext.get();
    org.apache.lucene.search.Query q = qb.keyword().wildcard().onField("title")
            .ignoreAnalyzer().matching("*" + QueryParser.escape("irsT WiLdCaRd q").toLowerCase() + "*").createQuery();
    FullTextEntityManager ftEm = org.hibernate.search.jpa.Search.getFullTextEntityManager(em);
    final FullTextQuery ftq = ftEm.createFullTextQuery(q, Book.class);
    List list = ftq.getResultList(); 
```

并且它不起作用，因为它是面向关键字的，并且没有用于短语的通配符的类比。使用直接 WildcardQuery 也不起作用（

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:41:27.787

Lucene 不支持短语查询中的通配符。关于如何在索引中表示数据的策略可以让您完成它。

您正在将查询视为关键字，它会出现。在这种情况下，您应该在索引时真正将字段视为关键字，在这种情况下，您可以将整个标题作为单个词进行搜索。带有空格的短语和关键字与 Lucene 非常不同，您不能互换使用它们。

但是，更好的解决方案可能是依靠评分来为一组术语查询提供最佳匹配。如果您仅使用标准分析器将您指示的查询减少为一组三个术语：`*irsT` `WiLdCaRd`and `q*`，虽然您指示的两个术语都会被找到，但您想要的术语将首先返回，并且得分明显更高。您可以在某种程度上磨练可接受的找到的文档，使用所需的术语进行搜索，例如： `+title:*irsT +title:WiLdCaRd +title:q*`. 这将消除任何不包含所有三个术语的匹配项，尽管它们的顺序或其他术语的存在不会阻止匹配。

另外，另一个注意事项：`*irst`除非您将其设置为启用前导通配符，否则不允许查询。如果可以避免，通常不鼓励这样做。使用前导通配符进行搜索可能会非常慢，除非您已经为它们优化了索引（例如，参见 SOLR 的[ReversedWildcardFilterFactory](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/analysis/ReversedWildcardFilterFactory.html)）。

# asp.net - asp.net 在自定义 httpHandler 中使用会话

> ID：14238105
> 
> 赞同：0
> 
> 时间：2013-01-09T15:01:16.250
> 
> 标签：asp.net

我在 app_code 文件夹中有一个自定义的 httphandler，我想在这个类中使用会话但是有一个异常消息，这里是代码

```
public void ProcessRequest(HttpContext context)
{
    HttpRequest request = context.Request;
    HttpResponse response = context.Response;

    HttpContext.Current.Session["UserID"] = "ABC";
    response.Write(HttpContext.Current.Session["UserID"].ToString());

} 
```

错误信息：

```
Object reference not set to an instance of an object.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object. 
```

有谁知道是什么问题>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:03:42.757

您需要使您的处理程序实现`IReadOnlySessionState`或`IRequiresSessionState`（用于写访问）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:03:34.537

如果要在 HttpHandler 中启用会话状态，则应从标记接口[IRequiresSessionState继承处理程序](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate.aspx)

```
 using System.Web.SessionState;

    public class handler: IHttpHandler, IRequiresSessionState
    {

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:04:47.797

您需要实现[`IReadOnlySessionState`](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.ireadonlysessionstate.aspx)能够从 HttpHandler 访问 Session。

[这是](http://www.hanselman.com/blog/GettingSessionStateInHttpHandlersASHXFiles.aspx)一个很好的例子。

请注意，没有要实现的方法，只需让您的处理程序实现接口即可。

# amazon - 亚马逊产品广告 API，如何判断产品是否由亚马逊提供

> ID：14238108
> 
> 赞同：4
> 
> 时间：2013-01-09T15:01:30.413
> 
> 标签：amazon, amazon-product-api

我正在使用亚马逊产品广告 API 为我的网站获取产品。我需要能够判断响应中的新商品是来自亚马逊还是来自第三方。直到 2012 年 11 月 1 日 API 之前，这似乎可以通过以下方式实现：

```
<ItemLookupResponse>
   <Items>
      <Item>
         <Offers>
             <Offer>
                <Merchant>
                   <MerchantId>ATVPDKIKX0DER</MerchantId>
                   <Name>Amazon.com</Name> 
```

但是，**MerchantId**现在已从 API 的 Offers 响应组中删除。 **IsFulfilledByAmazon**是另一个已被删除的。

我现在能找到的唯一可以确定该商品是否由亚马逊提供的东西是：

```
<Offer>
   <OfferListing>
      <IsEligibleForSuperSaverShipping>1</IsEligibleForSuperSaverShipping> 
```

，因为带有 SuperSaverShipping 的商品始终由亚马逊提供 - 但我不确定这是否可靠？

有人对如何做到这一点有更好的想法吗？

在API更改之前有一篇关于如何做到这一点的旧文章，但现在已经过时了：[亚马逊产品广告API，我怎么知道哪个产品属于亚马逊，哪个属于亚马逊市场](https://stackoverflow.com/questions/7954331/amazon-product-advertising-api-how-do-i-know-which-product-belongs-to-amazon-an)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:39:15.117

那么您可以通过将请求中的 MerchantId 设置为“Amazon”来过滤结果。这将仅返回亚马逊商家提供的优惠。

请注意，您只能将此变量设置为“Amazon”或“All”...

# multithreading - epoll 是否存在线程安全问题？

> ID：14238113
> 
> 赞同：1
> 
> 时间：2013-01-09T15:01:45.440
> 
> 标签：multithreading, epoll

这是问题 14221339 的后续内容。

我有一个在`epoll_wait()`循环内运行的线程池。

一个外部线程调用`epoll_ctl()`并添加一个侦听器套接字

`(EPOLLET | EPOLLONESHOT | EPOLLIN)`.

当线程池只有一个线程时，它会间歇性地无法接收`EPOLLIN`第一次（也是唯一一次）连接尝试的事件。如果我将线程池增加到两个，它几乎总是无法接收到`EPOLLIN`事件。

我的理解是 epoll API 是线程安全的，但这种观察似乎表明并非如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T15:53:36.540

With edge-triggered semantics, an incorrect sequence of calls can result in a race condition. There are three system calls involved:

1.  epoll_ctl() to activate notifications (and reactivate if EPOLLONESHOT is used).
2.  epoll_wait() to receive notifications.
3.  system input: read()/recv()/accept() in a loop until error EAGAIN.

If executed (repeatedly) in this order, a race between #3 and #1 is possible: when the input event in the kernel occurs after EAGAIN has been returned but before epoll_ctl() can be acted on. In general, the re-activation needs to be done before the I/O.

1.  epoll_ctl() to activate notifications (and reactivate if EPOLLONESHOT is used).
2.  system input: read()/recv()/accept() in a loop until error EAGAIN.
3.  epoll_wait() to receive notifications.

(Obviously, the I/O needs to be non-blocking.)

# python - cx_freeze 无法在运行时导入 psycopg2 共享库

> ID：14238118
> 
> 赞同：0
> 
> 时间：2013-01-09T15:01:52.247
> 
> 标签：python, postgresql, shared-libraries, psycopg2, cx-freeze

我在本地机器上使用 cxfreeze（在 python3.2 virtualenv 中）构建了一个可执行文件。可执行文件在本地机器上正确运行。

我正在尝试在单独的目标机器（具有相同的操作系统和架构）上运行可执行文件，但出现以下错误：

```
 ...
  File "/home/chris/.virtualenvs/python3env/lib/python3.2/site-packages/psycopg2/__init__.py", line 67, in <module>
  File "ExtensionLoader_psycopg2__psycopg.py", line 18, in <module>
  ImportError: No module named None 
```

在目标机器上满足所有共享库依赖项（根据`ldd`）。

根据跟踪我的猜测是 psycopg2 正在尝试加载共享库`_psycopg.cpython-32mu.so`（本地`python3.2/site-packages/psycopg2/_psycopg.cpython-32mu.so`）但在运行时找不到它。

我尝试将库与可执行文件放在同一目录中并设置 LD_LIBRARY_PATH，但都没有解决（假设的）问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:59:44.147

在每个进程上运行后`strace`，似乎是纯python版本正在寻找文件`_psycopg.cpython-32mu.so`

```
open("/home/chris/.virtualenvs/python3env/lib/python3.2/site-packages/psycopg2/_psycopg.cpython-32mu.so", O_RDONLY|O_CLOEXEC) = 8 
```

而 cxfreeze 构建的二进制文件正在寻找文件`psycopg2._psycopg.so`

```
open("/path/to/psycopg2._psycopg.so", O_RDONLY|O_CLOEXEC) = 3 
```

`md5sum`显示这些文件是相同的，因此 cxfreeze 进程似乎更改了动态库的预期名称。值得注意的是，该库的一个版本正确地命名为目标*包含*在`dist`cxfreeze 输出的目录中。

# php - Purpose of complex (curly) syntax outside a string representation

> ID：14238120
> 
> 赞同：5
> 
> 时间：2013-01-09T15:01:56.610
> 
> 标签：php

I understand the usage of complex (curly) syntax within a string, but I don't understand it's purpose outside of a string.

I just found this code in CakePHP that I cannot understand:

```
// $class is a string containg a class name
${$class} =& new $class($settings); 
```

If somebody could help me understand why is used here, and what is the difference between this and:

```
$class =& new $class($settings); 
```

Thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:11:46.557

Easiest way to understand this is by example:

```
class FooBar { }

// This is an ordinary string.
$nameOfClass = "FooBar";

// Make a variable called (in this case) "FooBar", which is the
// value of the variable $nameOfClass.
${$nameOfClass} = new $nameOfClass();

if(isset($FooBar))
    echo "A variable called FooBar exists and its class name is " . get_class($FooBar);
else
    echo "No variable called FooBar exists."; 
```

Using `${$something}` or `$$something`. is referred to in PHP as a "variable variable".

So in this case, a new variable called `$FooBar` is created and the variable `$nameOfClass` is still just a string.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-07T19:40:20.973

An example where the usage of the complex (curly) syntax outside of a string would be necessary is when forming a variable name out of an expression, consisting of more than just one variable. Consider the following code:

```
$first_name="John";
$last_name="Doe";
$array=['first','last'];
foreach ($array as $element) {
    echo ${$element.'_name'}.' ';
} 
```

In the code above the echo statement will output the value of the variable $first_name during the first loop, and the value of the variable $last_name during the second loop. If you were to remove the curly brackets the echo statement would try to output the value of the variable $first during the first loop and the value of the variable $last during the second loop. But since these variables were not defined the code would return an error.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:11:35.763

The first example creates a dynamically named variable (name is the value of the class variable), the other overwrites the value of the class variable.

# xquery - xquery - 将 xsi:type 与不同的命名空间前缀进行比较

> ID：14238121
> 
> 赞同：0
> 
> 时间：2013-01-09T15:01:56.923
> 
> 标签：xquery

```
declare namespace xf = "http://example.com"
declare namespace my = "http://example.com" 
```

我怎么能比较像

```
<1 xsi:type="xf:myDef">
<1 xsi:type="my:myDef"> 
```

上面这两个元素是相等的，但是将属性作为字符串比较它会失败。如何比较前缀和类型，解析 URI？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T16:13:17.880

如上所述：

> 在 W3 XML 规范中，对属性的值没有特殊的解释（除了 XML 命名空间中的少数全局属性，例如 xml:space、xml:lang 等。标准的 XPath 2.0 deep-equal() 函数无论前缀如何，都考虑相同命名空间中的相同元素或属性名称。属性值不是这样。XML 发生在 XSD 之前并且不知道它。

# php - php - 如何根据十进制值将数字数据字符串排序到数组中？

> ID：14238122
> 
> 赞同：0
> 
> 时间：2013-01-09T15:01:56.910
> 
> 标签：php

我有一组数据，它是国际电话号码前缀的通话费用明细。我需要解析数据，以便知道拨打任何号码的每分钟费用。格式是成本后跟前缀。这是一个大混乱。数据如下所示：`cost,prefix,prefix,prefix,cost,prefix,prefix,prefix,prefix`。

前缀的数量各不相同，但成本始终为 0.something (eg. `0.345`)

例子：

`0.43,123,124,125,0.64,567,568,569`

我需要重新格式化数据，以便以编程方式获取调用任何前缀的成本，因此我知道调用前缀 123 的成本为 0.43 美元，调用 567 的成本为 0.64 美元等。例如，也许我可以查找所需的前缀并找到之前的成本。

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:09:42.387

您可以通过使用[`explode()`](http://php.net/explode)字符串重新格式化数据，并对其进行迭代以查找成本，如下所示：

```
$string = '0.43,123,124,125,0.64,567,568,569';
$costs = array(); $current_price = null;
foreach( explode( ',', $string) as $value) {
    if( $value < 1) {
        $current_price = $value;
    } else {
        $costs[ $value ] = $current_price;
    }
} 
```

现在，您有一个以前缀为键的查找表，您可以通过访问前缀的索引来查找成本，如下所示：

```
echo "It costs " . $costs[ 125 ] . " to call prefix 125"; 
```

实际上，您的`$costs`数组如下所示：

```
Array
(
    [123] => 0.43
    [124] => 0.43
    [125] => 0.43
    [567] => 0.64
    [568] => 0.64
    [569] => 0.64
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:16:01.073

这是您可以使用的示例代码：

```
 <?php

$string = "0.43,123,124,125,0.64,567,568,569";

$arr = explode (',',$string);

$callrates =[];
$rate;
foreach($arr as $key=>$value){
    if(strstr($value,'.')){
        $rate = $value;
    }else{
        $callrates[$value]  = $rate;
    }
} 
```

测试`print_r($callrates);`产生

```
Array
(
    [123] => 0.43
    [124] => 0.43
    [125] => 0.43
    [567] => 0.64
    [568] => 0.64
    [569] => 0.64
) 
```

但是随后接受的答案已经做了同样的事情

# jquery - 使用 jquery 执行 ajax 请求

> ID：14238123
> 
> 赞同：1
> 
> 时间：2013-01-09T15:01:58.550
> 
> 标签：jquery, html, ajax

当我的 html 页面加载时，我正在尝试使用 jquery 执行 3 个 ajax 请求。我已经尝试过队列，将异步设置为“false”以及所有可以想象的事情。

我正在向 web 服务发送请求，然后查询数据库，然后 web 服务以 json 格式返回结果。

问题是当我访问该页面时，他执行了一个请求，或者两个或全部。每次我刷新页面，结果都不一样。

这是我的代码：

```
$(window).load(function() {

    $.ajax({

        url : "/api/apiJ.php?request=getProfileInfo&id=" + $.cookie("id") + "&token=" + $.cookie("token"),
        type : "GET",
        success : function(data) {

            console.log("Dados: " + data);

            var profile = jQuery.parseJSON(data);

            if (profile.resp == "true") {

                $("#username").html(profile.Nome);

                $("#avatar").html('<img src="' + profile.Avatar + '" alt=""/>');

                $("#nome").html(profile.Nome);
                $("#email").html(profile.Email);
                $("#local").html(profile.Cidade + ", " + profile.Pais);

                $.cookie("token", profile.token);

                $(document).dequeue();

            }
        }
    });

    $.ajax({

        url : "/api/apiJ.php?request=getMyContacts&id=" + $.cookie("id") + "&token=" + $.cookie("token"),
        type : "GET",
        success : function(data) {

            var cont = jQuery.parseJSON(data);

            console.log("Contatos: " + data);

            if (cont.resp == "true") {
                var htmls = '<ul>';

                for (var i = 0; cont[i] != null; i++) {
                    //htmls += '<li class="thumbnail" >';
                    htmls += '<li class="thumbnail" style="position: absolute; top: 0px; left: ' + (6 + 128 * i) + 'px; display: list-item;">';

                    if (cont[i].Colega.Avatar == "")
                        htmls += '<a title="' + cont[i].Colega.PrimeiroNome + ' ' + cont[i].Colega.UltimoNome + '" href="gallery/blank-profile.jpg" rel="gallery" class="cboxElement"> <img src="gallery/blank-profile.jpg" alt="" /></a>';
                    else
                        htmls += '<a title="' + cont[i].Colega.PrimeiroNome + ' ' + cont[i].Colega.UltimoNome + '" href="' + cont[i].Colega.Avatar + '" rel="gallery" class="cboxElement"> <img src="' + cont[i].Colega.Avatar + '" alt="" /></a>';

                    htmls += '<p>' + '<a href="javascript:void(0)" title="Apagar"><i class="icon-trash"></i></a>' + '<a href="javascript:void(0)" title="Editar"><i class="icon-pencil"></i></a>' + '<span>' + cont[i].Colega.PrimeiroNome + ' ' + cont[i].Colega.UltimoNome + '</span>' + '</p></li>';
                }

                htmls += '</ul>';

                $("#small_grid2").html(htmls);

                $.cookie("token", cont.token);

                $(document).dequeue();

            }
        }
    });

    $.ajax({

        url : "/api/apiJ.php?request=getFileListFromUser&id=" + $.cookie("id") + "&token=" + $.cookie("token"),
        type : "GET",
        success : function(data) {

            var files = jQuery.parseJSON(data);

            if (files.resp == "true") {

                var htmls = '';

                for (var i = 0; files.Ficheiros[i] != null; i++) {

                    htmls += '<dt><a id=\"' + files.Ficheiros[i].idFicheiro + '\" href=\"' + files.Ficheiros[i].url + '\" style=\"color\:\#000\">' + files.Ficheiros[i].nome + '</a></dt>' + '<dd class="profile_files">' + files.Ficheiros[i].nome + ' <p align="right" >';

                    htmls += '<a href="javascript:void(0)" title="Apagar"><i class="icon-trash"></i></a><a href="javascript:void(0)" title="Editar"><i class="icon-pencil"></i></a></p> </dd>';

                }

                $("#listaFicheiros").html(htmls);

                $.cookie("token", files.token);

            } else {
                var htmls = '<dt><a href="#" style="color:#000">Não existem ficheiros para este utilizador</a></dt>' + '<dd class="profile_files"> 0 ficheiros encontrados </dd>';

                $("#listaFicheiros").html(htmls);
            }
        }
    });

}); 
```

这真让我抓狂...

# javascript - Windows 8 JavaScript 应用程序：是否可以与 SkyDrive 同步数据？

> ID：14238127
> 
> 赞同：1
> 
> 时间：2013-01-09T15:02:01.107
> 
> 标签：javascript, windows-8, onedrive

我有一个 JavaScript Windows 8 应用程序，它将其数据存储在本地存储中的 JSON 文件中。我想将此 JSON 文件同步到 SkyDrive，以使用户能够在不同的机器上使用该应用程序。这是可能的吗，有没有人看到一个很好的资源来实现这个？

另一个注意事项，我正在构建一个 Win8 Phone 配套应用程序，所以我希望手机也可以访问数据。

我考虑过使用漫游存储，但是有数据限制，不想那样限制应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:08:22.217

在此处查看文档：http: [//msdn.microsoft.com/en-us/library/live/hh243643.aspx](http://msdn.microsoft.com/en-us/library/live/hh243643.aspx)

看来 WL.backgroundDownload 和 WL.backgroundUpload 是你想要的

# jsf-2 - 忽略 IntelliJ IDEA 自动完成中不相关的资源包

> ID：14238130
> 
> 赞同：1
> 
> 时间：2013-01-09T15:02:06.147
> 
> 标签：jsf-2, autocomplete, intellij-idea

在编辑 JSF XHTML 文件并为资源包键使用自动完成功能时，IntelliJ 似乎会扫描整个项目，包括所有属性文件的库 - 这非常烦人，因为您将数千个不相关的键与您自己的小型 JSF 声明的资源包混合在一起。是否可以忽略库属性文件？例如，这是 Netbeans 中的默认行为，这是 IntelliJ 中真正让我烦恼的事情之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:23:45.413

不幸的是，在当前的 IDEA 版本（12）中无法控制它，始终扫描所有文件。请[提交请求](http://youtrack.jetbrains.net/issues/IDEA)以使其可配置，我们将考虑在未来的更新中实施它。

# angularjs - Breeze 和 Angular 'ToDo' 应用程序不适用于 IE 8

> ID：14238134
> 
> 赞同：6
> 
> 时间：2013-01-09T15:02:11.790
> 
> 标签：angularjs, internet-explorer-8, breeze, defineproperty

我已经从[http://www.breezejs.com/documentation/download下载了示例“Breeze 0.83.5”应用程序](http://www.breezejs.com/documentation/download)

Angular 'ToDo' 示例不适用于 IE8。

我在 Breeze 脚本参考上方包含了以下脚本参考。

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T18:30:28.050

Breeze 的 Angular 支持利用了“backingStoreAdapter”，而后者又依赖于浏览器实现的 ES5 Javascript 的“defineProperty”方法。这在 IE8 中没有实现，不幸的是，不能通过使用 shim 来补充。

这是唯一具有此限制的适配器，微风淘汰赛和骨干适配器，都使用 ES5 垫片与 IE8 一起工作。

对不起！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:42:12.123

*在Breeze*的未来版本中，它也不适用于*IE8*。

 *> Todo-Angular 在现代浏览器中运行，例如 IE9、IE10，以及最近的 Chrome、Safari、Firefox 和 WebKit 浏览器。Breeze 不支持在缺少 ECMAScript 5 属性 getter 和 setter 的旧浏览器中运行的 AngularJS 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T15:56:32.813

Breeze 使用托管 MVVM 框架的 ViewModel。这通常是一个不错的决定。此外，对实体的更改跟踪是微风.js 的一个基本概念（对于实体框架也是如此）。如果 MVVM 框架使用带有真正 getter 和 setter 的 Observables（例如 Knockout），跟踪更改是一件容易的事。另一方面，AngularJS 与普通的 JavaScript 对象一起工作。这使得变更跟踪变得困难。唯一可靠的两种方法是 ES5 属性（简单，但 IE8 不支持）或在 $digest 循环中非常深入的集成。微风团队选择了第一选择——对于必须支持 IE8 的项目来说真是太可惜了！

好的，我们来分析一下问题的根源：**变更跟踪**

你真的需要那个功能吗？至少在我们的项目中，我们决定使用breeze.js/OData 进行阅读，并在编写时采用更“宁静”的方法。如果您不需要这些高级功能，那么以下脚本应该可以解决问题：

```
/********************************************************
 * A replacement for the "backingStore" modelLibrary
 * 
 * This is a bare version of the original backingStore,
 * without ANY change tracking - that's why it will work in IE8!
 * (Object.defineProperty not required any more)
 *
 * This adapter is a "drop in" replacement for the "backingStore" adapter in Breeze core.
 * It has the same adapter name so it will silently replace the original "backingStore" adapter
 * when you load this script AFTER the breeze library.
 * WARNING: For obvious reasons a lot of breeze magic will be lost!
 *
 * Author: Johannes Hoppe / haushoppe-its.de
 *
 * Copyright 2014 IdeaBlade, Inc.  All Rights Reserved.  
 * Use, reproduction, distribution, and modification of this code is subject to the terms and 
 * conditions of the IdeaBlade Breeze license, available at http://www.breezejs.com/license
 ******************************************************/

(function (definition, window) {
    if (window.breeze) {
        definition(window.breeze);
    } else if (typeof require === "function" && typeof exports === "object" && typeof module === "object") {
        // CommonJS or Node
        var b = require('breeze');
        definition(b);
    } else if (typeof define === "function" && define["amd"] && !window.breeze) {
        // Requirejs / AMD 
        define(['breeze'], definition);
    } else {
        throw new Error("Can't find breeze");
    }
}(function (breeze) {
    "use strict";

    var core = breeze.core;

    var ctor = function () {
        this.name = "backingStore";
        this.A_BIG_FAT_WARNING = "This is a bare version of the backingStore! Change tracking won't work!";
    };

    var protoFn = ctor.prototype;

    protoFn.initialize = function() {

    };

    protoFn.getTrackablePropertyNames = function (entity) {
        var names = [];
        for (var p in entity) {
            if (p === "entityType") continue;
            if (p === "_$typeName") continue;

            var val = entity[p];
            if (!core.isFunction(val)) {
                names.push(p);
            }
        }
        return names;
    };

    protoFn.initializeEntityPrototype = function (proto) {

        proto.getProperty = function (propertyName) {
            return this[propertyName];
        };

        proto.setProperty = function (propertyName, value) {
            this[propertyName] = value;
            return this;
        };
    };

    // This method is called when an EntityAspect is first created - this will occur as part of the entityType.createEntity call.
    // which can be called either directly or via standard query materialization
    // entity is either an entity or a complexObject
    protoFn.startTracking = function (entity, proto) {

        // assign default values to the entity
        var stype = entity.entityType || entity.complexType;
        stype.getProperties().forEach(function (prop) {

            var propName = prop.name;
            var val = entity[propName];

            if (prop.isDataProperty) {
                if (prop.isComplexProperty) {
                    if (prop.isScalar) {
                        val = prop.dataType._createInstanceCore(entity, prop);
                    } else {
                        val = breeze.makeComplexArray([], entity, prop);
                    }
                } else if (!prop.isScalar) {
                    val = breeze.makePrimitiveArray([], entity, prop);
                } else if (val === undefined) {
                    val = prop.defaultValue;
                }

            } else if (prop.isNavigationProperty) {
                if (val !== undefined) {
                    throw new Error("Cannot assign a navigation property in an entity ctor.: " + prop.Name);
                }
                if (prop.isScalar) {
                    // TODO: change this to nullstob later.
                    val = null;
                } else {
                    val = breeze.makeRelationArray([], entity, prop);
                }
            } else {
                throw new Error("unknown property: " + propName);
            }
            entity[propName] = val;
        });
    };

    breeze.config.registerAdapter("modelLibrary", ctor);
}, this)); 
```

下载地址：[https ://gist.github.com/JohannesHoppe/72d7916aeb08897bd256](https://gist.github.com/JohannesHoppe/72d7916aeb08897bd256)

这是原始 backingStore 的裸版，没有任何更改跟踪 - 这就是它可以在 IE8 中工作的原因！（不再需要 Object.defineProperty）此适配器是 Breeze 核心中“backingStore”适配器的“插入式”替代品。它具有相同的适配器名称，因此当您在微风库之后加载脚本时，它将默默地替换原始的“backingStore”适配器。

这是证明功能的演示：http:
[//jsfiddle.net/Johannes_Hoppe/bcav9hzL/5/](http://jsfiddle.net/Johannes_Hoppe/bcav9hzL/5/)

JsFiddle 不支持 IE8，请使用此直接链接：http:
[//jsfiddle.net/Johannes_Hoppe/bcav9hzL/5/embedded/result/](http://jsfiddle.net/Johannes_Hoppe/bcav9hzL/5/embedded/result/)

干杯!*

# qt - heightForWidth 标签

> ID：14238138
> 
> 赞同：6
> 
> 时间：2013-01-09T15:02:23.337
> 
> 标签：qt, pyqt

4-5 年我需要一个具有以下属性的小部件

*   显示文本包括。HTML
*   文本应分多行
*   将小部件放入布局时，应调整小部件的高度以使文本完全适合小部件几何形状

此子小部件应在布局中使用，以提供有关布局中其他 GUI 元素如何工作的一些详细信息，但仅占用最小空间来显示其内容。

我认为这很容易——但每次我回到挑战中，我总是以放弃告终。

主要问题是在实现 heightForWidth() 并使用带有 setHeightForWidth(True) 的 QSizePolicy 时布局会崩溃。它可以缩小到无限小。显然这是 Qt 错误。

另一种方法是在发生 resizeEvent() 时调用 updateGeometry() 并使用与宽度相关的高度调用 setFixedHeight(h)。但这也引起了一些奇怪的布局行为。

如果有人对如何解决这个问题有任何好的建议，请告诉我。

下面我包含一个片段，它重现了布局调整大小的行为。

此致，

麦兹

```
import sys
from PyQt4 import QtCore, QtGui

class Square(QtGui.QLabel):
    def __init__(self, parent=None):
        QtGui.QLabel.__init__(self, parent)
        self.setAutoFillBackground(True)

        palette = QtGui.QPalette()
        palette.setColor(QtGui.QPalette.Window, QtGui.QColor('red'))
        self.setPalette(palette)

        policy = self.sizePolicy()
        policy.setHeightForWidth(True)
        self.setSizePolicy(policy)

    def sizeHint(self):
        return QtCore.QSize(128, 128)

    def heightForWidth(self, width):
        return width

class Widget(QtGui.QWidget):
    def __init__(self, parent=None):
        # Call base class constructor
        QtGui.QWidget.__init__(self, parent)

        # Add a layout
        layout = QtGui.QVBoxLayout()
        self.setLayout(layout)

        # Add Square
        label = Square()
        layout.addWidget(label)

        spacerItem = QtGui.QSpacerItem(20, 40, QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Expanding)
        layout.addItem(spacerItem)

        # Some dummy button
        self._push_button = QtGui.QPushButton('Press me')
        layout.addWidget(self._push_button)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)

    widget = Widget()
    widget.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-16T12:06:49.407

我发现这非常有问题。我认为问题的核心如下：

*   Qt 布局通常分配给一个小部件，我们可以称之为父小部件（带有`parentwidget->setLayout(layout)`）。
*   布局向其子小部件（或子布局）询问其尺寸偏好（最小尺寸、尺寸提示 [首选尺寸] 和最大尺寸）。这是通过`QLayoutItem`派生类（例如`QWidgetItem`）以稍微复杂的方式完成的。
*   Height-for-width (HFW) 小部件——那些拥有`hasHeightForWidth() == true`和提供的小部件——`int heightForWidth(int width)`描述它们对布局的约束的能力有限，因为它们可以提供 a `minimumSizeHint()`、 a`sizeHint()`和 a `heightForWidth(width)`。如有必要，它们还可以调用 和 之类`setMinimumSize()`的函数`setMaximumSize()`。但是大多数 Qt 布局，例如`QVBoxLayout`,`QHBoxLayout`和，在向其父级提供自己的最小/首选/最大尺寸时`QGridLayout`并没有特别注意结果，因为它们是通过,和-- 没有一个被调用的信息关于布局的目标大小（在类似 Catch-22 的情况下），所以他们不能轻易地为他们的孩子提供价值。`heightForWidth(width)``QLayout::minimumSize()``QLayout::sizeHint()``QLayout::maximumSize()``width`
*   因此，布局在没有太多 HFW 想法的情况下询问其子级他们想要多大，从而设置其自己的最小/首选/最大尺寸（可能与其他约束一起确定父小部件的尺寸）。
*   在布局告诉它的父级（及其父级等）它需要多少空间之后，Qt 计算出它认为一切都应该有多大。布局通过其`setGeometry(const QRect& layout_rect)`. 现在布局知道它有多大。它用 为其子代分配空间`child->setGeometry()`。
*   但**只有在这一点**上，布局才发现了它的最终宽度。所以到目前为止，它无法为其子级提供最终宽度，因此 HFW 小部件在最终布局之前无法知道它们的最终宽度。此时，布局及其父级可能已经设置为错误的高度（可能太大；可能太小）。
*   小部件/布局交互的出色描述位于[http://kdemonkey.blogspot.co.uk/2013/11/understanding-qwidget-layout-flow.html](http://kdemonkey.blogspot.co.uk/2013/11/understanding-qwidget-layout-flow.html)；除此之外，您最好查看 Qt 源代码本身。

因此，您会看到两类解决方案，正如您在上面所概述的，其中大小需要“适当地”限制在所需的范围内。

首先：

*   HFW 小部件，如`QLabel`使用自动换行的派生类，或想要固定其纵横比的图像，可以为其最小和最大尺寸提供合理的值，以及合理的`sizeHint()`（即他们想要的尺寸*）*。
*   然后，当它们被布置时，它们 (1) 拦截`QWidget::resizeEvent(QResizeEvent* event)`以找出它们的新宽度（例如从`event->size()`）；（2）通过自己的`heightForWidth()`函数计算他们的首选高度；和 (3) 强制它们的高度，例如，`setFixedHeight(height)`后跟`updateGeometry()`.
*   这往往是合理的，*除了*任何想要将其大小匹配到这样的 HFW 小部件的父小部件必须做同样的事情，例如拦截`resizeEvent`，并且如果父小部件的布局具有`hasHeightForWidth() == true`，则执行类似的操作`setFixedHeight(layout->heightForWidth(width())); updateGeometry();`。
*   这会导致 faff，因为您必须在很长的父母身份中修改潜在的任意小部件。
*   它还可能导致大量重绘，这可能会很慢并导致视觉闪烁。

第二：

*   重写布局。
*   我发现最好的方法是让布局计算他们孩子的几何形状，假设某种标准矩形（Qt 本身在起草布局时通常以 640x480 开头）；根据该草案提供高度信息；然后，当调用 setGeometry() 时，如果结果高度（基于可能的新宽度）与之前宣传的布局不匹配，则通过调用`parent->setFixedHeight()`.
*   这允许您使用任意小部件，并且 HFW 小部件只需要支持`hasHeightForWidth()`并`heightForWidth()`让新布局（及其父小部件，以及使用此机制的任何祖先布局）调整其高度。
*   它可能会导致一些重绘，但通常不会太多，因为它发生在每个布局而不是每个小部件的基础上。

我已将 C++ 代码放在[http://egret.psychol.cam.ac.uk/code/2017_01_16_qt_height_for_width/](http://egret.psychol.cam.ac.uk/code/2017_01_16_qt_height_for_width/)用于以下布局：

*   `BoxLayoutHfw`, `VBoxLayoutHfw`, `HBoxLayoutHfw`-- 替换`QBoxLayout`等
*   `GridLayoutHfw`- 替换`QGridLayout`.
*   `FlowLayoutHfw`-- 替换 Qt `FlowLayout`( [http://doc.qt.io/qt-5/qtwidgets-layouts-flowlayout-example.html](http://doc.qt.io/qt-5/qtwidgets-layouts-flowlayout-example.html) )。

和以下小部件：

*   `AspectRatioPixmapLabel`-- 图像保持其纵横比；
*   `LabelWordWrapWide`-- 自动换行标签，尝试在自动换行之前使用尽可能多的水平空间。
*   `VerticalScrollArea`-- 顾名思义，一个垂直滚动区域，但完全支持宽度换高。

...加上一些基础设施代码（`#define`s 等），应该使布局恢复到其 Qt 等效行为，以及一些支持文件（包括`gui_defines.h`并使`layouts.h`布局和基础小部件的选择取决于您在这方面的偏好）。

我没有成功解决的一个遗留问题是，我认为在某些情况下，样式表`QLabel`的 's`heightForWidth()`似乎返回了稍微错误的值（稍微高估了它的空间需求）。我怀疑问题出在哪里，`QLabelPrivate::sizeForWidth`但我只是通过计算一些样式表边界来不完美地解决它；它仍然不太正确，但高估（导致空白）比低估（导致剪辑）好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T12:01:25.003

除固定策略外，大小提示不会指示子小部件的大小。如果类似自动调整大小的策略将被父级过剩。

# .net - 实体框架中的种子数据库，带有数据库生成的标识列

> ID：14238143
> 
> 赞同：3
> 
> 时间：2013-01-09T15:02:39.823
> 
> 标签：.net, visual-studio-2012, entity-framework-5

如何在不创建新条目的情况下使用数据库生成的 ID 列为我的数据库播种？例如：

```
public class Stuff
{
     [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
     public Guid Id { get; set; }
} 
```

和种子方法：

```
 var project1Id = new Guid("8853EDF3-BA20-43F8-B8D6-06984116CF8C");
 context.Projects.AddOrUpdate(p => p.Id, new Project 
 {
      Id =  project1Id,
      Statuses = new List<Status> 
      { 
             new Status { Comments = "Comment 1", LastUpdated = DateTime.Now, Type = StatusType.Internal },
             new Status { Comments = "Comment 2", LastUpdated = DateTime.Now, Type = StatusType.Business }
       }
  }); 
```

问题在于它忽略了我指定的 GUID，而是在我每次运行时自动生成一个新的`update-database`。我正在使用 VS2012 和 EF5。

# r - 在 RStudio 中打开项目时如何自动加载包

> ID：14238148
> 
> 赞同：15
> 
> 时间：2013-01-09T15:02:47.180
> 
> 标签：r, rstudio

每次我重新启动 RStudio 时，它都需要我重新加载之前在工作区中加载的所有包。我似乎无法弄清楚问题是什么，RStudio 在关闭项目时正在保存它们。

当我打开项目时，如何确保 RStudio 重新加载必要的包？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-09T15:28:21.270

我假设您想说您必须**重新加载**之前在工作区中加载的所有包。这不是错误，这是设计使然。

如果您想在项目启动时加载一些包，您可以通过在项目目录中创建一个名为的文件`.Rprofile`来实现，并指定您希望 RStudio 在加载项目时运行的任何代码。

例如：

```
cat("Welcome to this project.\n")
require(ggplot2)
require(zoo) 
```

将在控制台中打印一条欢迎消息，并在每次打开项目时加载`ggplot2`和加载。`zoo`

另请参阅[http://www.rstudio.com/ide/docs/using/projects](http://www.rstudio.com/ide/docs/using/projects)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-19T03:48:21.107

**通常，RStudio 中的默认包加载与 R 中的默认包加载没有什么不同（[如何在 R 中自动加载包？](https://stackoverflow.com/questions/10300769/how-to-load-packages-in-r-automatically)）。启动时，R 检查`.Rprofile`本地或失败的文件，主目录或安装目录**（在 Mac/Linux:`./.Rprofile`或 else上`~/.Rprofile`）并执行它，因此`options(defaultPackages...))`它包含的任何或其他与包加载相关的命令。

唯一的小区别是**RStudio 在启动前“有用地”更改了您的默认路径，** [请参阅“RStudio：使用项目”](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects)，因此您可能会加载不同或缺少的 .Rprofile 或错误的 .Rprofile，具体取决于您是否打开了 RStudio项目或只是普通文件，以及您的 RStudio 默认工作目录设置为什么。并不总是清楚你在哪个目录，所以有时这会导致真正的悲伤。

我倾向于在不将我的代码定义为 RStudio 项目的情况下使用 RStudio，仅仅是因为它很笨拙，并且在不添加任何内容的情况下创建了更多文件和目录（无论如何，对于我的用例）。因此**，我发现维护 .Rprofile 并确保加载正确的解决方案是从项目目录到我的可靠的旧 Unix 链接 ~**

```
ln -s ~/.Rprofile ./.Rprofile 
```

（如果你在 Windows 上，那就更痛苦了。）

您不需要拥有一个全局 .Rprofile，您可以为不同类型的项目或树保留特定于任务的文件，或者（比如说）.Rprofile.nlp、.Rprofile.financial、.Rprofile.bio 等等. 此外`options(default.packages`，您还可以收集所有与主题相关的设置：scipen、width、data.table/dplyr-specific options、searchpath...

电源提示：

*   显然保留您宝贵的 .Rprofile(s) 的备份或 SCM。一定要确保 git 正在跟踪它，所以不要把它放在 .gitignore
*   如果您有多个 .Rprofile，`cat("Loading .Rprofile.foo")`请在每个中添加一行，这样您就可以从控制台看到正确的 .Rprofile.xyz 已加载
*   在每个项目之后，修改、修剪、调整您的 .Rprofile；添加新的用例内容，注释掉不相关的内容，将更改提交到 git

# session - javamail中的Session和SMTP Connection有什么关系？

> ID：14238149
> 
> 赞同：0
> 
> 时间：2013-01-09T15:02:52.473
> 
> 标签：session, smtp, connection, jakarta-mail, transport

在我的电子邮件发送应用程序中，我在 SenderImpl 中持有一个单例会话实例。对于每封电子邮件，我从会话中检索传输实例以进行发送，并在发送完成后关闭它。

现在我想重用 SMTP 连接来发送批量电子邮件，所以我想弄清楚会话、传输和底层套接字连接（SMTP 连接）之间的关系是什么？

传输实例对应于单个底层 Socket 连接，对吗？

Session 和底层 Socket Connection 之间没有关联，对吗？

所有回应将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T17:39:13.663

一个传输对应一个连接。

Session 保存配置信息。

# c# - .Net Toolstrip/MenuStrip 焦点问题

> ID：14238151
> 
> 赞同：2
> 
> 时间：2013-01-09T15:03:02.270
> 
> 标签：c#, winforms, menu, focus, toolstrip

无论情况如何，我都能 100% 地重现这个烦人的问题。创建一个 .Net 项目、C# 或 VB.Net。将 ToolStrip 控件添加到窗体。创建一些包含至少 2 个菜单项的简单 DropDownButton(s)。添加您希望的任何其他控件、一个列表框（填充它以便它可以正确接收焦点）和一个 ComboBox 控件。分配快捷键或在 ToolStrip 上启用 TabStop 以便它可以通过键盘接收焦点。

运行项目（调试/发布，随你喜欢）。使用键盘为 ToolStrip 提供焦点（通过选项卡或快捷键）。向下箭头进入子项。现在选择退出键以折叠工具条子菜单。Tab 到包含一些项目的列表框或组合框。一切看起来都很棒对吧？现在使用箭头键在这些控件中导航...惊喜！您在 ToolStrip 上的背影，而您认为有焦点的控件却没有！

我尝试了多种方法来强制将注意力集中在 ListBox 上。一个例子是我为 OnEnter (ListBox.Enter+=...) 添加事件处理程序并添加一些代码，例如：

```
ListBox.Focus();
ListBox.Select(); 
```

没有什么是成功的...似乎一旦菜单在工具条上展开，您将永远使用键盘卡在此控件上...这对我来说很重要，因为我与使用的盲人用户一起工作仅键盘导航...这是错误吗？我无法在 MFC 中重现它...

有什么建议么？

***更新*** 我能够找到一个不会重现这种奇怪的控件......

System.Windows.Forms.MainMenu 是唯一与其他“工具栏对象”不同的“工具栏对象”...

不过，我仍然希望对上述内容有一些反馈（对他人和我自己的帮助）......

***更新 2*** 根本问题在 [ToolStripObject].TabFocus 属性内...如果设置为 false 一切似乎都可以正常工作...将焦点返回给“看起来”像集中了焦点的控件。但是，拥有允许盲人用户通过选项卡浏览所有 UI 控件的能力是一个方便实现的事情......太糟糕了，这个属性不能像它应该的那样工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:34:05.027

我通过覆盖 ToolStripMenuItem 让它工作：

```
public class ToolStripMenuItemEx : ToolStripMenuItem {

  protected override bool ProcessCmdKey(ref Message m, Keys keyData) {
    if (keyData == Keys.Escape) {
      ToolStripDropDownButton tb = this.OwnerItem as ToolStripDropDownButton;
      if (tb != null) {
        tb.HideDropDown();
        return false;
      }
    }
    return base.ProcessCmdKey(ref m, keyData);
  }
} 
```

# html - 将图像与表格单元格顶部对齐

> ID：14238153
> 
> 赞同：12
> 
> 时间：2013-01-09T15:03:05.773
> 
> 标签：html, css, wordpress

![在此处输入图像描述](../Images/ccb99c50f97637c5dccf7ec35e9c4f55.png)

我正在 wordpress 编辑器中设计一个 wordpress 页面，但我不知道如何让灰色图像占位符与表格单元格的顶部对齐。只要左侧单元格中的文本不低于灰色图像，一切都很好。但是，一旦文本低于图像底部，图像就会向下推。这是代码：

```
<table border="1">
<tbody>
<tr>
<td style="vertical-align: top;">
<img class="alignleft size-full wp-image-71" alt="webi" src="#" 
width="437"     height="114" />                                                                      
&nbsp;
<p>
SOME TEXT
</p>
</td>
<td style="width: 355px;">
<img class="alignright size-full wp-image-61"   alt="palvelut_kuvapaikka" 
src="#"  
align="top" width="355" height="355" /> 
 </td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-09T15:04:43.860

把`vertical-align: top`属性也设置在右边`td`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T15:04:55.667

要将其与表格顶部对齐，您需要在 css 中使用：`vertical-align: top`

# asp.net - 如何滚动到 DataGrid 中的选定项？

> ID：14238154
> 
> 赞同：1
> 
> 时间：2013-01-09T15:03:09.797
> 
> 标签：asp.net, datagrid

我正在显示这样的 Datagrid 并邀请用户进行选择...

```
<div id="gradesDiv" style="overflow: auto; width: 380px; height: 300px">
    <asp:DataGrid id="gradesGrid"
                  BorderWidth="1"
                  CellPadding="3"
                  AutoGenerateColumns="true"
                  runat="server">
        <Columns>
             <asp:ButtonColumn HeaderText="Select&nbsp;Item"
                               ButtonType="LinkButton"
                               Text="Select"
                               CommandName="Select">
             </asp:ButtonColumn>
        </Columns>
    </asp:DataGrid>
 </div> 
```

（在代码隐藏中添加了其他三列）。但是当用户进行选择时，会执行回发并且滚动位置丢失。我希望能够重置 div 以显示所选项目。有谁知道如何做到这一点？

我试过添加

```
MaintainScrollPositionOnPostback="true" 
```

到asp，但它没有帮助。我试图在代码隐藏中保持滚动位置，但 GradesDiv 似乎对代码隐藏不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:10:21.913

网上有很多关于如何做到这一点的创造性方法。只需搜索 -*在回发时保持 div 滚动位置*。这只是其中一个示例：

```
<script type="text/javascript">
    $(document).ready(function () {
        var xPos, yPos;
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_beginRequest(BeginRequestHandler);
        prm.add_endRequest(EndRequestHandler);

        var divId = 'gradesDiv';

        function BeginRequestHandler(sender, args) {
            xPos = $get(divId).scrollLeft;
            yPos = $get(divId).scrollTop;
        }
        function EndRequestHandler(sender, args) {
            $get(divId).scrollLeft = xPos;
            $get(divId).scrollTop = yPos;
        }
    });
</script> 
```

# android - 想要根据字符串预设单选按钮

> ID：14238158
> 
> 赞同：-1
> 
> 时间：2013-01-09T15:03:22.837
> 
> 标签：android, string, radio-button

嗨，我正在为数据库创建一个编辑页面，我想

获取我通过意图传递的字符串

然后取决于字符串是否等于“on”或“off”

我想更改单选按钮的选择

到目前为止我有这个

```
radiogroup = R.id.radioGroup1;

if (switch.equals("on")){
    radiogroup.check(R.id.radio1);
    R.id.radio1.setChecked(true);
} else {
    radiogroup.check(R.id.radio0);
    R.id.radio1.setChecked(true);
} 
```

顺便说一句，这是在我的 oncreate 中，因为我希望它在 Activity 打开后立即运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:19:35.113

膨胀你的单选按钮，例如

```
RadioButton radio1 = findViewById(R.id.radio1); 
```

然后你可以使用

```
radio1.setChecked(true/false) 
```

就像你在尝试一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:25:55.407

你需要找到`RadioButtons`这样的：

`RadioButton radio1 = (RadioButton) findViewById(R.id.radio1);`

之后你可以打电话

`radio1.setChecked(true);`或者`radio1.setChecked(false);`

# java - 如何升级 javascript 以利用 phonegap 2.3 自定义插件？

> ID：14238170
> 
> 赞同：0
> 
> 时间：2013-01-09T15:03:48.440
> 
> 标签：java, javascript, android, cordova

我已经构建了一个名为 TCPIPCommPlugin 的自定义插件，它使用 Phonegap/Cordova 1.6.1。一切都很好，回调/插件结果工作得很好。但是我需要将它升级到 Cordova 2.3。原因是我们现在开始在 Win8 以及 iOS/Android 上进行开发。

除此之外，我在 javascript 中有以下代码。

```
var TCPComm = function() {
};

TCPComm.prototype.Open = function(Cmd,successCallback, failureCallback) {
 return PhoneGap.exec(    successCallback,    //Success callback from the plugin
                          failureCallback,     //Error callback from the plugin
                          'TCPIPCommPlugin',  //Tell PhoneGap to run "DirectoryListingPlugin" Plugin
                          'Open',              //Tell plugin, which action we want to perform
                          [Cmd]);        //Passing list of args to the plugin
}; 
```

此代码继续对插件进行大约 10-12 个不同的函数调用，然后以...结束

```
PhoneGap.addConstructor(function() {
    PhoneGap.addPlugin("TCPComm", new TCPComm());
}); 
```

在 javascript 本身中，实际的函数调用如下所示。

```
window.plugins.TCPComm.Open(g_IpAddr, OpenOK,OpenFail); 
```

此外，这里是 JAVA 插件的样子。

```
@Override
    public PluginResult execute(String action, JSONArray data, String callbackId) {
           PluginResult result = null;
        try {
            Actions currentAction = Actions.valueOf(action.toUpperCase());
            JSONObject Resp = new JSONObject();
            String RespStr;
            switch(currentAction){
            case OPEN:
            {
                       //do work
                    }catch (JSONException jsonEx) { 
        System.out.println(jsonEx.toString());
        result = new PluginResult(Status.JSON_EXCEPTION);
    }
    return result;} 
```

这适用于 Cordova 1.6.1。然而，Cordova 2.xx 并没有那么多。现在说了这么多，我已经仔细阅读了网络，试图找到一种转换 JAVA 的方法。我想出了以下内容。

公共布尔执行（字符串操作，JSONArray 数据，CallbackContext 回调上下文）{

```
 PluginResult result = null;
    try {
        Actions currentAction = Actions.valueOf(action.toUpperCase());
        JSONObject Resp = new JSONObject();
        String RespStr;
        switch(currentAction){
        case OPEN:
        {
                       //do work
                     }catch (JSONException jsonEx) {    
        System.out.println(jsonEx.toString());
        result = new PluginResult(Status.JSON_EXCEPTION);
    }
    return true;
} 
```

这似乎与更新的代码相匹配。我找不到的是一种更新 JAVASCRIPT 调用以使该插件与更新后的 CORDOVA 一起使用的方法。

任何正确方向的帮助/点将不胜感激！

我使用了以下文档但没有成功。 [http://docs.phonegap.com/en/2.3.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)

[https://github.com/apache/cordova-android/tree/master/framework/src/org/apache/cordova](https://github.com/apache/cordova-android/tree/master/framework/src/org/apache/cordova)

**更新**

感谢西蒙的回复。在此期间，我用以下内容替换了我的 javascript。我需要将它恢复到以前的状态吗？

```
cordova.define("cordova/plugin/TCPIPCommPlugin", function(require, exports, module){
    var exec = require('cordova/exec');
    var TCPComm = function() {};
//  var TCPCommError = function(code, message) {
//        this.code = code || null;
//        this.message = message || '';
//    };

    TCPComm.prototype.Open = function(success,fail) {
          return cordova.exec(              successCallback,    //Success callback from the plugin
                                  failureCallback,     //Error callback from the plugin
                                  'TCPIPCommPlugin',  //Tell PhoneGap to run "DirectoryListingPlugin" Plugin
                                  'Open',              //Tell plugin, which action we want to perform
                                  [Cmd]);
    };
    var TCPIPCommPlugin = new TCPComm();
    module.exports = TCPIPCommPlugin;
}); 
```

**更新 #2 - 修复了一些错误**

我回到旧的 javascript 并将其全部替换，所以现在看起来像这样..

```
var TCPComm = function() {}; 

TCPComm.prototype.Open = function(Cmd, successCallback,failureCallback) {
      return cordova.exec(              successCallback,    //Success callback from the plugin
                              failureCallback,     //Error callback from the plugin
                              'TCPIPCommPlugin',  //Tell PhoneGap to run "DirectoryListingPlugin" Plugin
                              'Open',              //Tell plugin, which action we want to perform
                              [Cmd]);
}; 
```

我还用..替换了构造函数

```
 if(!window.plugins) {
    window.plugins = {};
}
if (!window.plugins.TCPComm) {
    window.plugins.TCPComm = new TCPComm();
} 
```

现在，当我在 Chrome 中运行它（UI 调试）时，我可以看到在函数内部使用所有正确函数构建的插件。

Java 很好，我忘了在论坛代码中包含返回值。哎呀。

现在我尝试像往常一样调用该函数，并且在关闭/打开的第一个 JAVASCRIPT 调用中得到一个 Object # has no method 'exec'。

```
 window.plugins.TCPComm.Close("", Dummy, Dummy);
window.plugins.TCPComm.Open(g_IpAddr, OpenOK,OpenFail); 
```

我在执行时在 Java 中设置了断点，让我知道插件何时成功调用 Java，但仍然没有运气。

还有其他想法吗？再次感谢您的洞察力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T17:20:11.097

将 PhoneGap.exec 替换为以下代码：

```
var TCPComm = function() {
}; 

TCPComm.prototype.Open = function(Cmd,successCallback, failureCallback) {
 return cordova.exec(    successCallback,    //Success callback from the plugin
                      failureCallback,     //Error callback from the plugin
                      'TCPIPCommPlugin',  //Tell PhoneGap to run "DirectoryListingPlugin" Plugin
                      'Open',              //Tell plugin, which action we want to perform
                      [Cmd]);        //Passing list of args to the plugin
}; 
```

add 构造函数方法已被弃用，所以这样做：

```
if(!window.plugins) {
    window.plugins = {};
}
if (!window.plugins.videoPlayer) {
    window.plugins.TCPComm = new TCPComm();
} 
```

对于您的 Java 代码，您已经完成了大部分工作，但您需要返回结果：

```
public boolean execute(String action, JSONArray data, CallbackContext callbackContext) {

    PluginResult result = null;
    try {
        Actions currentAction = Actions.valueOf(action.toUpperCase());
        JSONObject Resp = new JSONObject();
        String RespStr;
        switch(currentAction){
        case OPEN:
            //do work
            this.callbackContext.sendPluginResult(
                new PluginResult(PluginResult.Status.OK, results));
    } catch (JSONException jsonEx) {    
        System.out.println(jsonEx.toString());
        result = new PluginResult(Status.JSON_EXCEPTION);
    }
    return true;
} 
```

那应该让你升级。

# c# - 当内容资源设置为更新时如何移动内容资源？

> ID：14238173
> 
> 赞同：0
> 
> 时间：2013-01-09T15:03:56.403
> 
> 标签：c#, .net, visual-studio, resources, buildaction

我`Dependencies`在项目中放入文件夹的资源很少。 **复制到输出目录**设置为**如果更新则复制**

默认行为是它将复制到`\bin\Dependencies\*`

我想将其设置为复制到`\bin\*`

如何做到这一点？

![在此处输入图像描述](../Images/f398f9525dc03b426d9f658b1e55d2e2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:47:48.240

如果需要将它们放在 bin 文件夹中，则需要将文件放在项目的根目录中。

我能想到的唯一另一种方法是在项目中添加一个构建后事件，每次都复制它们：

```
copy "$(ProjectDir)Dependencies\*" "$(TargetDir)" 
```

# c++ - 导入 VC++2005 时 CString 出错？

> ID：14238174
> 
> 赞同：1
> 
> 时间：2013-01-09T15:03:57.563
> 
> 标签：c++, visual-c++, mfc, visual-c++-6, visual-c++-2005

我在 VC++6.0 中编写代码并将其导入到 VC++2005 中。我现在在插入 unicode 时遇到模棱两可的错误？

```
CString s;

s.Format("%f\r\n", (double)timebTime.time + (double)timebTime.millitm / 1000);
s+="RAMP,"; 
s+=0x00b5;  // <-- Error: VC++(2005):  "error C2593: 'operator +=' is ambiguous"
s+="m"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:00:18.117

注意VC++6.0的默认编译模型是ANSI/MBCS（即`TCHAR`是a `char`,`CString`是`char`'s的序列等），而VC++2005的默认编译模型是**Unicode**（即`TCHAR`is `wchar_t`,`CString`实际上是a `CStringW`,ie一个`wchar_t`字符串）。

我只是使用 Unicode 模型（不要打扰 ANSI/MBCS 兼容性和`TCHAR`,`_T("...")`等），然后像这样调整你的代码：

```
static const wchar_t microSign = 0x00B5;

CString s;  
s.Format(L"%f\r\n", 
    static_cast<double>(timebTime.time) +
    static_cast<double>(timebTime.millitm) / 1000.0);
s += L"RAMP,"; 
s += microSign;
s += L"m"; 
```

请注意，使用命名常量（如`microSign`）使代码比*“幻数”* （如）更具可读性`0x00B5`。

此外，我会将格式字符串（包括“ `RAMP,µm`”部分）存储在应用程序资源中并从那里加载它，而不是在源代码中构建它。

# php - 您可以使用 php LinkedIn API 获取您的连接标签名称吗？

> ID：14238178
> 
> 赞同：0
> 
> 时间：2013-01-09T15:04:07.963
> 
> 标签：php, api, linkedin

我正在开发一个与 LinkedIn 通信的应用程序。我正在使用官方 PHP LinkedIn API (REST API) 来获取我的连接列表。但我的问题是，是否可以获得我的连接所属的组名或标签名（例如同学、同事、亲密朋友等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:24:50.507

目前，Connections API 不会公开您的“联系人”页面中提供的任何功能或元数据（这包括标签或连接组等数据）。

有关与 Connections API 相关的受支持用例和字段的当前列表，请参阅此页面：[https ://developer.linkedin.com/documents/connections-api](https://developer.linkedin.com/documents/connections-api)

# php - 如何在mysql中获得不重复的结果

> ID：14238180
> 
> 赞同：2
> 
> 时间：2013-01-09T15:04:11.473
> 
> 标签：php, mysql

我试图通过不让特定字段重复超过 5 次来从 mysql 获取结果。

例如，假设我有一张这样的表：

```
-------------
Name        City    
person1     Nashville
person2     Nashville
person3     Nashville
person4     Nashville
person5     Nashville
person6     Nashville
person7     New York
------------- 
```

我希望它返回的是：

```
-------------
Name        City    
person1     Nashville
person2     Nashville
person3     Nashville
person4     Nashville
person5     Nashville
person7     New York
------------- 
```

城市领域不能重复超过五次的地方！如果重复超过修复次数，则只返回前五个结果。

这个问题可能是不可能的（这就是我的猜测），但如果有解决方案或无论如何可以解决我想要实现的目标，请告诉我！我可以使用 PHP。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T15:08:51.307

像这样使用变量检查当前行到前一行的东西怎么样，如果它们相同，那么行号将增加，如果它们不是行号将重置：

```
select name, city
from
(
  select name, 
    city,
    @row:=(case when @prev=city then @row else 0 end) + 1 as rownum,
    @prev:=city pcity
  from yourtable
  order by city, name
) src
where rownum <= 5 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/45501/8)

结果是：

```
|    NAME |      CITY |
-----------------------
| person1 | Nashville |
| person2 | Nashville |
| person3 | Nashville |
| person4 | Nashville |
| person5 | Nashville |
| person7 |  New York | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:12:48.277

```
 SELECT x.*
      FROM my_table x 
      JOIN my_table y
        ON y.name <= x.name 
       AND y.city = x.city 
     GROUP 
        BY x.city
         , x.name 
    HAVING COUNT(*) <= 5; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T15:18:02.353

您是否允许执行多个 MySql 命令？如果是这样，您可以尝试进行两个单独的调用-

```
SELECT name, city FROM table WHERE city = 'Nashville' ORDER BY name LIMIT 5;
SELECT name, city FROM table WHERE city <> 'Nashville' ORDER BY name; 
```

有人可能需要对此进行检查，但总体思路是成立的。唯一的问题是您的最终结果不会按名称排序表。相反，它会让这个城市的人首先拥有“纳什维尔”，然后是其他所有人。

# javascript - nodejs中的C scanf等价物

> ID：14238187
> 
> 赞同：4
> 
> 时间：2013-01-09T15:04:30.023
> 
> 标签：javascript, node.js

如果我想从我写的**C中的输入流中读取 .，** **NodeJS**`scanf`中是否有等效的方法来做同样的事情？

 **例如，这是**C中的代码**

```
int n,
    m,
    i;

scanf("%d", &n);

for (i = 0; i < n; i++) {
    scanf("%d", &m);

    ............

} 
```

这是我在 Node 中开始的地方...... *TODO*表明我被困在哪里：

```
process.stdin.resume();
process.stdin.setEncoding("ascii");

process.stdin.on("data", function (input) {
    var n = +input;
    for (var i = 0; i < n; i++) {
        // TODO
    }
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T15:37:00.643

对于初学者来说，NodeJS 中可读流的调用`scanf`和`data`事件是不等价的。在 NodeJS 示例中，您需要解析收到的输入块。

您可以通过用简单的方法替换 on 方法的主体来检查这些块是如何发送给您的：

```
process.stdout.write('onData: ' + input + '\n'); 
```

鉴于`input`then 如何包含您的数据，您需要使用某种方法来提取感兴趣的字符串，然后使用`parseInt`. 假设每个 1 个整数，也许是一种天真的方法来解决您的问题`input`：

```
var n = 0;
var m = 0;
var state = 0;
process.stdin.on('data', function (input) {
    switch (state)
    {
    case 0:
        // we're reading 'n'
        n = parseInt(input.trim(), 10);
        state++;
        break;

    default:
        // we're reading 'm'
        m = parseInt(input.trim(), 10);

        if (state++ == n)
        {
            // we've read every 'm'
            process.exit();
        }
        break;
    }
}); 
```

我不是非常喜欢这种将数据获取到 NodeJS 事件循环的方法，您应该查看命令行参数、配置/输入文件或其他一些方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-25T03:47:30.620

检查[sget](https://www.npmjs.org/package/sget)。

```
var sget = require('./sget');

var width = sget('Width?'),
    height = sget('Height?'),
    area = width * height;

console.log('Area is', area); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-07T23:04:11.667

此功能将执行您的要求：

```
function readNums(s) {
   // Split it up into numbers and spaces
   var array = s.split(/(\d+)/);

   // Keep just the numbers
   array = array.filter(function(i) {return "" + +i == i});

   // Convert back to a number
   array = array.map(function(i) {return +i});

   // How many elements should there have been?
   var maxLen = array.shift();

   if (array.length < maxLen) {
     throw "Not enough enough numbers";
   } else {
     array.length = maxLen;
   }

   return array; 
}

console.log(readNums("4 10 20 30 40 50 60 70")); 
```

结果：

```
[10, 20, 30, 40] 
```**

# c++ - 通过构造函数参数推断模板参数

> ID：14238197
> 
> 赞同：2
> 
> 时间：2013-01-09T15:04:50.150
> 
> 标签：c++, templates, boost-python, template-meta-programming

可以使用以下方法“剥离”函数参数类型：

```
void foo_double(double a)
{
}

void foo_int(int a)
{

}

template <class R, class A0>
void bar(R (*fp)(A0))
{   
    // Do something related with A0
}

int main()
{
    bar(foo_double); // A0 is double
    bar(foo_int);    // A0 is int
} 
```

是否可以对类构造函数执行相同的“参数类型剥离”？

## 编辑：

我相信我没有在原始代码片段中清楚地解释自己。这是完整的场景。

我有多个类`C1,...,Cn`，我需要将它们作为函数公开给 python。让我们假设所有类都有一个共同的`void Run()`方法。但是，这些类的构造函数接受不同的参数。为了向 python 公开函数，我使用 boost.python 自动将函数导出到适当的 python 函数，同时处理所有类型转换（主要是原语）。

我的第一个解决方案是：

```
class C1 
{
public:
    C1() {}
    void Run();
};

class C2
{
public:
    C2(double a) {}
    void Run();
};

template <class T>
void python_wrapper()
{
    T instance();
    instance.Run();
}

template <class T, class A0>
void python_wrapper(A0 a0)
{
    T instance(a0);
    instance.Run();
}

BOOST_PYTHON_MODULE(_pythonmodule)
{
    // This is boost.python stuff
    python::def("f1", python_wrapper<C1>);
    python::def("f2", python_wrapper<C2, double>);
} 
```

而且......它的工作原理。

我现在想要完成的是使用`python_wrapper<C2>`而不是`python_wrapper<C2, double>`同时推断构造函数参数类型。

正如我在原帖中展示的那样。如果我包装函数而不是类，我可以完成类似的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T21:17:03.180

无法推断类型的构造函数的参数。

C++98/03 和 C++11 规范明确列出了可能发生类型推导的上下文（请参阅第 14.8.2 节及其小节）。扣除是模板编程的生活增强资格，而不是强制性的。任何可以通过演绎完成的事情，也可以通过显式调用来实现。因此，为了使推论成为可能，需要可以显式地为函数模板提供构造函数。

然而，这是不可能的。如 C++98/03 和 C++11 规范的第 12.1 节所述，构造函数没有名称。此外，C++98/03 的第 12.1.12 节和 C++11 的第 12.1.10 节规定不得采用构造函数的地址。因此，无法提供标识符；因此，不能进行扣除。

* * *

由于不可能进行扣除，因此可能值得考虑替代解决方案。每个解决方案都有自己的优缺点集，但所有这些都需要在构造函数之外的某些上下文中显式列出参数类型：

*   将构造函数的参数类型提供给函数模板。
    *   优点：
        *   相当简单。
    *   缺点：
        *   类型和类型的构造函数的参数类型之间的关联不是很明显。
        *   该关联不可重复使用。例如，如果将关联传递给多个函数模板或类模板，则需要复制关联。
        *   对于具有 arity 为 1 或更大的构造函数的每种类型都是必需的。
*   保持与类型特征的关联。
    *   优点：
        *   可重复使用的。
        *   类型和类型的构造函数的参数类型之间的关联更加明显。
        *   并不过分复杂。
    *   缺点：
        *   编码比直接提供与函数模板的关联稍微复杂一些。
        *   对于具有 arity 为 1 或更大的构造函数的每种类型都是必需的。
*   为每种类型创建一个工厂函数。
    *   优点：
        *   非常简单。
        *   可重复使用的。
        *   类型和类型的构造函数的参数类型之间的关联非常明显。
    *   缺点：
        *   每种类型都需要，即使 arity 为 0。这可以通过侵入性工厂函数来缓解，因为不会因范围而产生歧义。对于非侵入式工厂函数，签名可能会发生冲突，因此函数名称必须是唯一的。
*   大量使用元编程来获得构造函数参数类型的向量。然后模板代码将遍历不断增长的列表，试图识别一个可行的匹配。
    *   优点：
        *   如果类型具有相似的构造函数，则向量中的单个条目可以作为多种类型的可行匹配。
    *   缺点：
        *   复杂得多。
        *   可能需要修改编译器参数以支持模板深度。

鉴于您的环境所描述的情况：

*   有很多类。
*   有些已经存在，不应更改。
*   其中更多是每天写的。
*   构造函数是独一无二的。

当考虑到 C++ 规范时，我相信我们已经定义了一个[Kobayashi Maru](http://en.wikipedia.org/wiki/Kobayashi_Maru)。您必须权衡利弊，以确定哪种方法可以适应您的环境。最简单的方法可能已经是您现有的方法，因为它只需要一个位置来更改代码，因为创建了更多类型。

* * *

然而，这是一种使用类型特征的方法，它以非侵入方式提供有关类型构造函数的信息。如果没有 C++11 功能，例如可变参数模板，就会有一些样板代码。此外，实现可能不会涵盖所有情况，例如多个构造函数。

使用原始问题中提供的类：

```
class C1 
{
public:
  C1();
  void Run();
};

class C2
{
public:
  C2(double a);
  void Run();
}; 
```

将使用表示构造函数特征的模板。我使用[Boost.MPL](http://www.boost.org/doc/libs/1_52_0/libs/mpl/doc/index.html)提供的类型列表来表示构造函数的参数类型。默认值`constructor_traits`表示不需要任何参数。

```
/// @brief constructor_traits is a type_trait that is used to noninvasively
///        associated T with constructor meta information, such as T'
///        constructor's argument types.
///
///        For example, if Foo has a constructor that accepts a single
///        integer, then constructor_traits<Foo>::type should be
///        boost::mpl::vector<int>.
template <typename T>
struct constructor_traits
{
  typedef boost::mpl::vector<> type;
}; 
```

然后，此特征专门用于具有接受参数的构造函数的类型，例如`C2`.

```
/// Specialize constructor_traits for C2 to indicate that its constructor
/// accepts a double.
template <>
struct constructor_traits<C2>
{
  typedef boost::mpl::vector<double> type;
}; 
```

[`boost::mpl::vector`](http://www.boost.org/doc/libs/1_52_0/libs/mpl/doc/refmanual/vector.html)是表示构造函数参数的类型列表。它通过提供随机访问[`boost::mpl::at`](http://www.boost.org/doc/libs/1_52_0/libs/mpl/doc/refmanual/at.html)。为了提供对元素的更简洁的访问，引入了一个辅助类型：

```
/// @brief Helper type that makes getting the constructor argument slightly
///        easier.
template <typename Vector,
          std::size_t Index>
struct get_constructor_arg
  : boost::mpl::at<Vector, boost::mpl::int_<Index> >
{}; 
```

将函数公开给 Boost.Python 时，所需的语法是只提供一种类型。函数模板或类模板都可以用来解决这个问题。我决定使用类模板，因为它减少了一些样板代码。

```
/// @brief runner type is used to provide a static run function that
///        will delegate the construction and running of type T based
///        on T's constructor_traits.
template <typename T,
          typename Args = typename constructor_traits<T>::type,
          std::size_t = boost::mpl::size<Args>::value>
struct runner
{
  static void run()
  {
    T().Run();
  }
}; 
```

然后，此模板专门针对构造函数接受的参数数量。下面专门接受一个论点。这是由特化`1`的模板参数列表中的 决定的。

```
/// Specialization for runner for types with have a single argument
/// constructor.
template <typename T,
          typename Args>
struct runner<T, Args, 1>
{
  static void run(typename get_constructor_arg<Args, 0>::type a0)
  {
    T(a0).Run();
  }
}; 
```

函数模板也可以用来解决这个问题。我决定使用类模板，因为：

*   不需要 SFINAE。需要使用`enable_if`构造来选择正确的模板。
*   能够为类模板提供默认模板参数可以避免`constructor_trait`多次获取。

生成的 Boost.Python 调用如下所示：

```
BOOST_PYTHON_MODULE(_pythonmodule)
{
  boost::python::def("f1", &runner<C1>::run);
  boost::python::def("f2", &runner<C2>::run);
} 
```

* * *

这是完整的代码：

```
#include <iostream>
#include <boost/mpl/vector.hpp>
#include <boost/python.hpp>

class C1 
{
public:
  C1() {}
  void Run() { std::cout << "run c1" << std::endl; }
};

class C2
{
public:
  C2(double a) : a_(a) {}
  void Run() { std::cout << "run c2: " << a_ << std::endl;}
private:
  double a_;
};

/// @brief constructor_traits is a type_trait that is used to noninvasively
///        associated T with constructor meta information, such as T'
///        constructor's argument types.
///
///        For example, if Foo has a constructor that accepts a single
///        integer, then constructor_traits<Foo>::type should be
///        boost::mpl::vector<int>.
template <typename T>
struct constructor_traits
{
  typedef boost::mpl::vector<> type;
};

/// Specialize constructor_traits for C2 to indicate that its constructor
/// accepts a double.
template <>
struct constructor_traits<C2>
{
  typedef boost::mpl::vector<double> type;
};

/// @brief Helper type that makes getting the constructor argument slightly
///        easier.
template <typename Vector,
          std::size_t Index>
struct get_constructor_arg
  : boost::mpl::at<Vector, boost::mpl::int_<Index> >
{};

/// @brief runner type is used to provide a static run function that
///        will delegate the construction and running of type T based
///        on T's constructor_traits.
template <typename T,
          typename Args = typename constructor_traits<T>::type,
          std::size_t = boost::mpl::size<Args>::value>
struct runner
{
  static void run()
  {
    T().Run();
  }
};

/// Specialization for runner for types with have a single argument
/// constructor.
template <typename T,
          typename Args>
struct runner<T, Args, 1>
{
  static void run(typename get_constructor_arg<Args, 0>::type a0)
  {
    T(a0).Run();
  }
};

BOOST_PYTHON_MODULE(example)
{
  boost::python::def("f1", &runner<C1>::run);
  boost::python::def("f2", &runner<C2>::run);
} 
```

和测试输出：

```
>>> import example
>>> example.f1()
run c1
>>> example.f2(3.14)
run c2: 3.14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:17:22.933

您不能获取构造函数的地址（C++98 标准 12.1/12 构造函数 - “12.1-12 构造函数 - “不应获取构造函数的地址。”）

如果所有类共享一个基类，那么您可以创建一个工厂，但如果没有 C++11 可变参数模板，我不知道如何进行参数转发。

```
template <typename type>
static type*  construct(){
    return new type();
}

auto value = &construct<int>; 
```

你现在有一个可绑定的函数，当被调用时，它会产生一个类型*

```
auto value = &construct<int>;
int* newInt = (*value)();
delete newInt; 
```

为了允许不同的构造函数输入，这使用 C++11

```
template <typename type>
class constructor {

public:
    template<typename ...Args>
    static std::shared_ptr<type>  alloc(Args&& ...args){
        return std::shared_ptr<type>(new type(std::forward<Args>(args)...));
    }
    // placement new
    template<typename ...Args>
    static std::shared_ptr<type>  realloc( std::shared_ptr<type>& object,Args&& ...args){
        (new (&(*object)) type(std::forward<Args>(args)...));
        return object;
     }
};

class fooBar{
public:
    fooBar(int x,float f){
    }
};
typedef std::shared_ptr<fooBar> fooBarPtr; 
```

用法：

```
fooBarPtr a = constructor<fooBar>::alloc(5,0.0f); 
```

或者这可能更接近操作人员想要的。

```
class fooy{
    int _x = 0;
public:
    fooy(int argCount, va_list& list){
        if( argCount > 0){
            _x = va_arg(list, int);
        }
    }
};

template <typename type>
std::shared_ptr<type> alloc(int argCount,...) {
    va_list list;
    va_start(list, argCount);
    auto result = std::shared_ptr<type>( new type(argCount,list) );
    va_end(list);
    return result;
} 
```

用法：

```
auto foo1 = alloc<fooy>(0); // passing zero args
auto foo2 = alloc<fooy>(1,1234); // passing one arg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T09:25:37.827

由于您不想更改现有类，因此无法在 C++ 中*自动*扣除这些类。通过从源代码中提取签名信息，您可以在 C++ 之外为这些类执行此操作。此提取可以手动完成，也可以通过脚本甚至 C++ 程序自动完成。

对于每个现有的类 E，使用提取的信息来定义类模板的特化，该类模板定义了一个静态成员函数，该函数`func`将其参数（如果有）传递给类 E 的构造函数并调用该`Run`方法。

对于新类，只需要求它们定义`func`，并让类模板默认使用现有的`func`.

然后，一般的 Python 包装器定义代码可以推断 的参数`func`，您已经向您展示了如何做到这一点。

这意味着定义类的人只需要开始添加`func`新的此类。

* * *

在稍高一点的层面上，我认为值得花一些时间让相关人员参与进来，并通过定义无数的类来找出一个不好的设计是如何被采用和巩固的。目的是防止这种情况在未来再次发生。我认为如何处理这将取决于它是如何发生的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:21:08.223

我不确定这将如何与 python::def 交互，但总的来说，这就是可变参数模板的用途：

```
struct C1{
  C1(){}
  void run(){}
};

struct C2{
  C2(int){}
  void run(){}
};

template<typename CLASS, typename... PARAMS>
void call(PARAMS... params) {
  CLASS inst(params...);
  inst.run();
}

main() {
  call<C1>();
  call<C2>(42);
} 
```

它是 c++11，但从 4.3 版开始在 gcc 中受支持

# excel - excel和访问集成

> ID：14238198
> 
> 赞同：-1
> 
> 时间：2013-01-09T15:04:50.023
> 
> 标签：excel, vba

我有我的前端在 excel 和后端作为访问。我每天将这些文件发送给客户。我不希望其他人看到数据库。有没有办法在excel中集成访问，如果我只传输excel文件，访问文件也会自动传输，其他人不知道我的数据库？
数据库应仅保留访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:52:58.280

您可以将 Access 数据库作为对象嵌入您的 Excel 文件 ( `Insert->Object->Create from file`, 选择`Display as icon`) 并要求用户提取和删除它。但是，如果您手动进行，这对双方来说都有些麻烦。

如果要自动化该过程，请使用以下代码：

```
Private Const cStrSheetName As String = "Sheet1"
Private Const cStrObjName As String = "EmbeddedFile"

子嵌入文件（）
    暗淡 strFile 作为字符串
    暗淡为工作表

    设置 ws = Sheets(cStrSheetName)

    strFile = Application.GetOpenFilename("任何文件 (*.*), *.*", 1, _
        “请选择要嵌入的文件”）

    如果 strFile = "False" 然后退出 Sub

    出错时继续下一步
    ws.Shapes(cStrObjName).Delete

    On Error GoTo ErrorHandler
    ws.OLEObjects.Add(文件名:=strFile, 链接:=False, _
        DisplayAsIcon:=True, IconFileName:="", _
        IconIndex:=0, IconLabel:=strFile).Select
    Selection.Name = cStrObjName

    MsgBox "文件嵌入成功！"

    退出子

错误处理程序：
    MsgBox "无法嵌入文件。错误：" & _
        Err.Number & " - " & Err.Description

结束子

子 ExtractEmbeddedFile()
    暗淡为工作表

    设置 ws = Sheets(cStrSheetName)

    出错时继续下一步
    ws.OLEObjects(cStrObjName).Copy

    If Err.Number Then
        MsgBox "没有嵌入文件！"
        退出子
    万一

    On Error GoTo ErrorHandler
    CreateObject("Shell.Application").Namespace(ActiveWorkbook.Path) _
        .Self.InvokeVerb “粘贴”

    If MsgBox("文件成功解压到" & ActiveWorkbook.Path _
        & vbCrLf & vbCrLf & "你要删除嵌入的" & _
        “从此工作簿中的文件以减小其大小？”，vbYesNo) _
        = vb是 那么
        ws.Shapes(cStrObjName).Delete
    万一

    退出子

错误处理程序：
    MsgBox "提取文件时出错：" & _
        Err.Number & " - " & Err.Description

结束子

```

这将为您提供两个宏 (`EmbedFile`和`ExtractEmbeddedFile`)，您可以将它们分配给工作表中的按钮。

请注意，您需要`"Sheet1"`在第一行修改为要存储嵌入文件的工作表的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:11:22.140

您不能通过电子邮件或 FTP 不可见地发送 Access 文件，但可以将数据移动到可从 Internet 访问的 SQL Server（或其他）数据库。
然而，这带来了几个问题：
1) 安全
2) odbc DSN
3) 客户端计算机上 odbc 驱动程序的可用性

# php - 检查文件是 JPEG、PDF 还是 TIFF

> ID：14238200
> 
> 赞同：6
> 
> 时间：2013-01-09T15:04:56.547
> 
> 标签：php, file

我将如何检查文件是 jpeg、pdf 还是 tiff？我的意思是实际检查，而不仅仅是从 mime 类型和文件扩展名。

我可以访问原始文件数据（此检查是上传程序的一部分），我需要验证这些文件是 jpeg、pdf 还是 tiff。我假设我必须检查文件中的某种标题，但我不知道要查找什么以及从哪里开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:13:06.343

Exif_imagetype 对此非常有用：[http ://us2.php.net/manual/en/function.exif-imagetype.php](http://us2.php.net/manual/en/function.exif-imagetype.php)

它扫描文件的初始字节以确定图形类型。它支持大量的图形格式（如果不能识别格式则返回 false）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:13:16.303

如果您有权访问原始文件，则可以检查文件头的[幻数](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)。这个数字定义了文件的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:13:38.677

这可能很棘手，因为所有文件都必须遵循某种具有“神奇数字”的 ISO 标准，这基本上是格式的“标题”。

我发现了这个关于不同签名的维基页面：[http ://en.wikipedia.org/wiki/List_of_file_signatures](http://en.wikipedia.org/wiki/List_of_file_signatures)

因此，在最好的情况下，您只需要验证这些第一个字节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T15:14:54.710

您需要实现字节序列测试。

[这](http://www.mikekunz.com/image_file_header.html)是检查最常见图像格式的字节序列的指南。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T15:15:21.027

要检查图像类型，您可以使用[exif_imagetype](http://php.net/manual/en/function.exif-imagetype.php)函数。对于 pdf：您必须打开文件并读取第一个字节并查看它是否以 '%PDF' 开头

```
$fp = fopen($pdf, 'r');
if(fgets($fp, 4) == '%PDF')
{ 
    ... is pdf
}
fclose($fp); 
```

# c# - 实体框架 .Find with Where 子句

> ID：14238201
> 
> 赞同：0
> 
> 时间：2013-01-09T15:04:58.463
> 
> 标签：c#, entity-framework

我的代码中有以下内容：

```
 dbContext.Progs
               .Remove(dbContext.Progs.Find(pNum));
      dbContext.SaveChanges(); 
```

我无法弄清楚如何`where`在语句中添加子句`Find`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:09:02.150

您不能`Find`仅按主键搜索。如果您想使用条件，请使用,`Single`或代替。`First``FirstOrDefault``SingleOrDefault`

# android - 网络视图问题

> ID：14238203
> 
> 赞同：-1
> 
> 时间：2013-01-09T15:05:02.907
> 
> 标签：android

在我的应用程序中，我混合使用了 html 和本机。在我的网页视图中，我加载了一个 html 页面，其中包含一个图像。单击图像时，我调用了一个 java 脚本函数，该函数又调用了本机代码。我的html标签如下：

```
<img onclick=nextLevel('0'); id="d2"> 
```

我的javascript方法如下：

```
function nextLevel(index) 
```

`{ Android.displayNextLevel(index); }`

在 displayNextLevel 方法中，我开始下一个活动。问题是当我多次单击 html 页面上的图像时，事件被多次触发并且活动多次打开。我错过了什么吗？我如何克服这个问题？请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:14:06.280

I guess you could fiddle around in the html/js to make sure you can only click it once every now and then.

You could also ditch your function and instead use the [JavascriptInterface](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29) so you can handle stuff in your Java code instead.

# android - 将 Android 应用程序移植到黑莓时，西里尔文应用程序名称编码错误

> ID：14238204
> 
> 赞同：1
> 
> 时间：2013-01-09T15:05:08.747
> 
> 标签：android, blackberry-android

我在 PlayBook 和 BB10 模拟器上显示西里尔应用程序名称时遇到了小问题。看起来它的俄语编码不正确。将 bb eclipse 插件从 1.3 版更新到 1.5 后出现问题，使用插件 v.1.3 可以正常工作。

我将不胜感激任何帮助或想法。

这是bb10模拟器的截图： ![在此处输入图像描述](../Images/04d7827d56ee8ef91fcdcf0d14f82f7c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:13:17.990

我自己找到了解决方法。

当我遇到用 bb eclipse 插件编码的问题时，我决定用命令行工具做同样的事情。

在工具设置（唱键、调试令牌等）之后，我尝试使用此命令重新打包我的 apk 文件（源 apk 文件在 apk/ 文件夹中，bar 文件的目标是 bar/ 文件夹）

```
./apk2bar apk/ -d bbplaybookdebugtoken.bar -t bar/ -a "zasadnyy" -cg 
```

当我有 .bar 文件时，我已经使用命令安装了它：

```
/batchbar-deploy bar/ 192.168.1.35 mysecretpass 
```

不幸的是结果不成功，应用名称再次被错误编码。在第一次失败后，我阅读了更多文档并尝试使用这种方法：http: [//developer.blackberry.com/android/documentation/creating_a_custom_manifest_file_2016828_11.htm](http://developer.blackberry.com/android/documentation/creating_a_custom_manifest_file_2016828_11.htm) ...

当我解压缩 bar 文件并打开时`MANIFEST.MS`- 我发现了这一行：

```
Application-Name: –ì–µ—Ä–æ–∏ 
```

根据文档解决方案应该非常紧张： 1\. 重命名`MANIFEST.MS`为`<you apk name>.mf` 2\. 更新不正确的属性，在我的情况下，我已将行从上面更改为`"Application-Name: Герои"` 3\. 将编辑的清单文件放在与参数相同的文件夹中`<your apk name>.apk`并重新运行`apk2bar`带有`**-m**`参数的工具，例如：

```
./apk2bar apk/ -d bbplaybookdebugtoken.bar -t bar/ -a "zasadnyy" -m -cg 
```

重新打包、部署、运行和......然后再次**失败**。应用程序名称为“–ì–µ–Ä–æ–∏”。

在第二次失败后，我决定进行肮脏的破解，我`MANIFEST.MF`直接在重新打包的 bar 文件中进行了编辑（解压缩 -> 编辑清单 -> zip -> 将文件扩展名更改为 .bar）。**将更新的.bar**
文件部署到剧本和....是的，我们有西里尔应用程序名称！

 ****结论和修复：**

*   如果 apk2bar 工具清单编码配置错误，则在 1.5 版本中看起来像（在 1.3 版中它工作正常）
*   为了解决问题：解压缩未签名的 bar 文件 -> 编辑清单 -> zip -> 将文件扩展名更改回**.bar**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T12:59:06.917

我相信我有同样的问题，但症状有所不同。我什至无法在我的测试设备上安装该应用程序，并且显式运行**blackberry-signer -verify**时遇到了**Manifest 的无效签名文件摘要。**错误。

MANIFEST.MF 文件似乎已被 apk2bar 工具正确编码为 utf-8，但以下签名过程似乎使用平台的默认编码读取此文件。**我在blackberry-signer.bat**以及命令行工具的**apk2bar.bat**批处理文件脚本中添加了以下 java 参数，以使其正常工作：

```
-Dfile-encoding=utf-8 
```

（这适用于工具的 1.5.2 版本）**

# c# - C# (Linq) 中的 SQL 查询

> ID：14238205
> 
> 赞同：4
> 
> 时间：2013-01-09T15:05:09.980
> 
> 标签：c#, sql, linq

我在我的 C# 文件中有这个查询，它工作正常：

```
from var in db.database_1 
where var.database_2.primarycat.Length > 0 && var.meditype.Contains("All")   
xxx               
select new XElement("id", new XElement("temp", var.database_2.name) 
```

现在，我想将此查询插入到**xxx**的 where 参数中：

```
AND name IN (
SELECT primarycat
from database_2
GROUP BY primarycat
HAVING COUNT(*) > 1) 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:14:09.700

A simple sub query should do this:

```
from var in db.database_1 
where var.database_2.primarycat.Length > 0
    && var.meditype.Contains("All")   
    && (from cat in db.database_2
        group cat by cat.primarycat into g
        where g.Count() > 1
        select g.Key).Contains(var.name)
select new XElement("id", new XElement("temp", var.database_2.name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:11:10.497

使用子选择。看看这个回答几乎相同的问题的线程。

[如何在 LINQ 中进行子查询](https://stackoverflow.com/questions/418609/how-to-do-subquery-in-linq)

# php - php邮件密件抄送多个收件人

> ID：14238207
> 
> 赞同：21
> 
> 时间：2013-01-09T15:05:15.547
> 
> 标签：php, email, bcc

如何制作密件抄送邮件？如果我发送那封邮件，它会显示所有收件人！

```
$to=array();
$members_query = mysql_query("select email from members");
while( $row = mysql_fetch_array($members_query) )
{
    array_push($to, $row['email']);
}

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=UTF-8' . "\r\n";

// Additional headers
//$headers .= 'To: '.$newName.' <'.$newEmail.'>' . "\r\n";
$headers .= 'From: SmsGratisan.com <admin@website.com' . "\r\n";

mail(implode(',', $to), $title, $content, $headers); 
```

谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-09T15:08:47.313

将您的`mail`to 字段设置为`null`，然后`$to`在标题中内爆您的数组

```
$headers .= 'From: SmsGratisan.com <admin@website.com>' . "\r\n";
$headers .= 'BCC: '. implode(",", $to) . "\r\n";

mail(null, $title, $content, $headers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:09:08.827

```
$headers .= 'Bcc: mail@example.com' . "\r\n"; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-09T15:08:39.597

CC 和 BCC 可以作为标头发送（参见： http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)）。

您还可以使用其他邮件库 - PEAR Mail 库使发送电子邮件更加面向对象。[http://pear.php.net/package/Mail/redirected](http://pear.php.net/package/Mail/redirected)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-11-03T19:15:29.130

请使用 pass Just Array 而不是做任何类型的 Implode、设置引号、逗号等。

例子：

```
 $bcc = array();

    foreach ($users as $user) 
    {
        $bcc[] = $user['User']['email'];
    } 
```

并将其传递给`Mail`函数：

```
 $email->from($from)
//            ->to($from)
              ->bcc($bcc) 
```

谢谢，安基特帕特尔

# python - 使用 Python 从嵌套 json 字典中获取信息的问题

> ID：14238209
> 
> 赞同：1
> 
> 时间：2013-01-09T15:05:31.563
> 
> 标签：python, json, python-2.7, beautifulsoup, typeerror

我正在尝试从使用 javascripts 加载数据的网站获取有关设备的定价信息。我正在 JSON 字典结构中获取数据。下面是我正在使用的代码：

```
# -*- coding: cp1252 -*-
import csv
import urllib2
import sys
import time
import re
import json
from bs4 import BeautifulSoup
from itertools import islice
from pprint import pprint

page = urllib2.urlopen('http://www.vodafone.de/privat/tarife/red-smartphone-tarife.html').read()
soup = BeautifulSoup(page)
x = [None]*1000

i = 0
j = 0
k = 0
scripts = soup.find_all('script')
script = next(s.text for s in scripts if s.string and 'window.rates' in s.string)
datastring = script.split('phones=')[1].split(';window.')[0]
datastring = re.sub(ur'([{,])([a-z]\w*):', ur'\1"\2":', datastring)
data = json.loads(datastring)

for d in data:
    for j in data[d]:
        pprint(data[d]['name']) 
        x[i] = data[d]['name']
        i = i + 1 
```

这部分为我提供了网页中的设备列表。

但是，当我使用相同的方法获取 JSON 数据字典中的更高级别的定价信息（如下所述）时，我得到`TypeError: string indices must be integers`-

```
for d in data:
    for j in data[d]:
        for k in data[d][j]:
            pprint(data[d][j][k]) 
            x[i] = data[d][j][k]
            i = i + 1 
```

这是我正在抓取的 JSON 数据结构片段，我需要从中提取信息：

```
{u'deliveryTime': u'Lieferbar innerhalb 48 Stunden',
 u'image': u'/images/m707491_300465.jpg',
 u'name': u'BlackBerry Bold 9900',
 u'sku1104261': {u'e': u'169.90', u'p': u'prod974431'},
 u'sku1444275': {u'e': u'129.90', u'p': u'prod974431'},
 u'sku1444283': {u'e': u'89.90', u'p': u'prod974431'},
 u'sku1444286': {u'e': u'49.90', u'p': u'prod974431'},
 u'sku1444291': {u'e': u'49.90', u'p': u'prod974431'}}
{u'deliveryTime': u'Vorauss. verf&#252;gbar ab Mitte Januar',
 u'image': u'/images/m1327474_300658.jpg',
 u'name': u'HTC One X+ mit limitiertem Beats-Headset',
 u'sku1444277': {u'e': u'249.90', u'p': u'prod1624433'},
 u'sku1444285': {u'e': u'119.90', u'p': u'prod1624433'},
 u'sku1444287': {u'e': u'99.90', u'p': u'prod1624433'},
 u'sku1444292': {u'e': u'99.90', u'p': u'prod1624433'},
 u'sku1474223': {u'e': u'399.90', u'p': u'prod1624433'}} 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:11:06.733

根据您发布的 JSON 结构，它应该是这样的：

```
price = 0
for key, value in data.items():
    if key.startswith(u'sku') and isinstance(value, dict): 
        price += value.get(u'e', 0) 
```

实际上，这里有几个基本概念：

*   验证您是否需要密钥（跳过不以“sku”开头的密钥）
*   验证子键是字典
*   对 dicts使用`.get()`方法而不是直接引用。此方法允许您指定如果 dict 中没有这样的键将返回的默认值（并且不会引发异常）

# python - 在 Python 中嵌套 3 个类时语法错误？

> ID：14238214
> 
> 赞同：3
> 
> 时间：2013-01-09T15:05:59.680
> 
> 标签：python, syntax, nested-class

是否有一种简单的方法可以在保持所有 3 个级别的同时修复此错误？

从对象派生 ClassA 没有帮助。

提前致谢！

```
>>> class classA:
...     class classB(object):
...         def __init__(self):
...             self.b = 3
...         class classC(classA.classB):
...             def __init__(self):
...                 super(classC, self).__init__()
...                 self.c = 4
...
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in classA
  File "<stdin>", line 5, in classB
NameError: name 'classA' is not defined 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T15:09:38.737

不。在您定义`classC`时，`classA`尚不存在。

它仅在其主体完全执行后创建。（从主体执行创建的 dict 是类创建调用的一个参数`class = type('classname', (superclass_1, superclass_2, superclass_3), said_dict})`。）

最简单的方法是将它们定义在同一级别。

如果绝对需要，您可以稍后修改它们：

```
class classA:
    pass
class classB(object):
    def __init__(self):
        self.b = 3
class classC(classB):
    def __init__(self):
        super(classC, self).__init__()
        self.c = 4
classA.classB = classB
classB.classC = classC 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T15:13:32.647

也许这样的事情会起作用：

```
class classA:
    pass

class classB(object):
    def __init__(self):
        self.b = 3
classA.classB = classB

class classC(classA.classB):
    def __init__(self):
        super(classC, self).__init__()
        self.c = 4

classA.classB.classC = classC 
```

# mysql - 如何优化我的查询？使用类别和标签列表导出 Wordpress 帖子

> ID：14238215
> 
> 赞同：2
> 
> 时间：2013-01-09T15:06:00.880
> 
> 标签：mysql, wordpress, query-optimization

我为导出帖子写了查询。

```
SELECT

post_name,
post_content,

Categories, 
Tags 

FROM

-- posts
    wp_posts as p

-- categories
    LEFT JOIN 
        (SELECT 
            object_id as cat_obj_id, 
            GROUP_CONCAT(cat_term.name) as Categories

        FROM
            wp_term_relationships AS cat_r 
            JOIN wp_term_taxonomy AS cat_tax 
                ON cat_r.term_taxonomy_id = cat_tax.term_taxonomy_id
            JOIN wp_terms AS cat_term 
                ON cat_tax.term_id = cat_term.term_id

        WHERE cat_tax.taxonomy="category"
        GROUP by object_id) 
    as c

    ON p.id = c.cat_obj_id

-- tags
    LEFT JOIN
        (SELECT 
            object_id as tag_obj_id, 
            GROUP_CONCAT(tag_term.name) as Tags

        FROM
            wp_term_relationships AS tag_r 
            JOIN wp_term_taxonomy AS tag_tax 
                ON tag_r.term_taxonomy_id = tag_tax.term_taxonomy_id
            JOIN wp_terms AS tag_term 
                ON tag_tax.term_id = tag_term.term_id

        WHERE tag_tax.taxonomy="post_tag"
        GROUP by object_id) 
    as t

    ON p.id = t.tag_obj_id 
```

表模式：

```
CREATE TABLE `wp_term_taxonomy` (
  `term_taxonomy_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `term_id` bigint(20) unsigned NOT NULL DEFAULT '0',
  `taxonomy` varchar(32) NOT NULL DEFAULT '',
  `description` longtext NOT NULL,
  `parent` bigint(20) unsigned NOT NULL DEFAULT '0',
  `count` bigint(20) NOT NULL DEFAULT '0',
  PRIMARY KEY (`term_taxonomy_id`),
  UNIQUE KEY `term_id_taxonomy` (`term_id`,`taxonomy`),
  KEY `taxonomy` (`taxonomy`)
) ENGINE=MyISAM AUTO_INCREMENT=11 DEFAULT CHARSET=utf8$$

CREATE TABLE `wp_term_relationships` (
  `object_id` bigint(20) unsigned NOT NULL DEFAULT '0',
  `term_taxonomy_id` bigint(20) unsigned NOT NULL DEFAULT '0',
  `term_order` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`object_id`,`term_taxonomy_id`),
  KEY `term_taxonomy_id` (`term_taxonomy_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8$$

CREATE TABLE `wp_terms` (
  `term_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(200) NOT NULL DEFAULT '',
  `slug` varchar(200) NOT NULL DEFAULT '',
  `term_group` bigint(10) NOT NULL DEFAULT '0',
  PRIMARY KEY (`term_id`),
  UNIQUE KEY `slug` (`slug`),
  KEY `name` (`name`)
) ENGINE=MyISAM AUTO_INCREMENT=11 DEFAULT CHARSET=utf8$$

CREATE TABLE `wp_posts` (
  `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `post_author` bigint(20) unsigned NOT NULL DEFAULT '0',
  `post_date` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `post_date_gmt` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `post_content` longtext NOT NULL,
  `post_title` text NOT NULL,
  `post_excerpt` text NOT NULL,
  `post_status` varchar(20) NOT NULL DEFAULT 'publish',
  `comment_status` varchar(20) NOT NULL DEFAULT 'open',
  `ping_status` varchar(20) NOT NULL DEFAULT 'open',
  `post_password` varchar(20) NOT NULL DEFAULT '',
  `post_name` varchar(200) NOT NULL DEFAULT '',
  `to_ping` text NOT NULL,
  `pinged` text NOT NULL,
  `post_modified` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `post_modified_gmt` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `post_content_filtered` longtext NOT NULL,
  `post_parent` bigint(20) unsigned NOT NULL DEFAULT '0',
  `guid` varchar(255) NOT NULL DEFAULT '',
  `menu_order` int(11) NOT NULL DEFAULT '0',
  `post_type` varchar(20) NOT NULL DEFAULT 'post',
  `post_mime_type` varchar(100) NOT NULL DEFAULT '',
  `comment_count` bigint(20) NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`),
  KEY `post_name` (`post_name`),
  KEY `type_status_date` (`post_type`,`post_status`,`post_date`,`ID`),
  KEY `post_parent` (`post_parent`),
  KEY `post_author` (`post_author`)
) ENGINE=MyISAM AUTO_INCREMENT=9082 DEFAULT CHARSET=utf8$$ 
```

解释： ![在此处输入图像描述](../Images/8242bcf42be2a7b8e676c724ad48ce41.png)

在 1000 个帖子数据库上运行此查询需要 72 秒（在 1 秒内执行，获取需要永远）。有没有办法让它更快，没有临时表来存储类别和标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:48:24.950

我发现，当其中一个子查询没有记录时，我的大查询运行速度非常慢，即`LEFT JOIN`'ed。

为了解决这个问题 - 我从子查询创建了临时表，并用这些临时表替换了子查询。

这是我的 SQL。

```
-- 1.1\. Creating table for post categories
create table if not exists temp_categories
(
    ID bigint not null AUTO_INCREMENT,
    Categories text not null,
    PRIMARY KEY (ID)
) DEFAULT CHARSET=utf8;

-- 1.2\. Filling table temp_categories
INSERT INTO temp_categories(ID, Categories)
SELECT 
    'object_id' AS ID, -- post ID
    GROUP_CONCAT(cat_term.name ORDER BY cat_term.name) AS Categories -- comma separated category list
FROM
    wp_term_relationships AS cat_r 
    JOIN wp_term_taxonomy AS cat_tax 
        ON cat_r.term_taxonomy_id = cat_tax.term_taxonomy_id
    JOIN wp_terms AS cat_term 
        ON cat_tax.term_id = cat_term.term_id
WHERE cat_tax.taxonomy="category"
GROUP by object_id;

-- 2.1\. Creating table for post tags
create table temp_tags
(
    ID bigint not null AUTO_INCREMENT,
    Tags text not null,
    PRIMARY KEY (ID)
) DEFAULT CHARSET=utf8 ;

-- 2.2\. Filling table temp_tags

INSERT INTO exp_tagi(ID, Tagi)
SELECT 
    object_id AS ID, --post ID
    GROUP_CONCAT(tag_term.name ORDER BY tag_term.name) AS Tags -- comma separated tag list
        FROM
    wp_term_relationships AS tag_r 
    JOIN wp_term_taxonomy AS tag_tax 
        ON tag_r.term_taxonomy_id = tag_tax.term_taxonomy_id
    JOIN wp_terms AS tag_term 
        ON tag_tax.term_id = tag_term.term_id

WHERE tag_tax.taxonomy="post_tag"
GROUP by object_id;

-- 3\. Exporting posts

SELECT
    p.id AS id,
    p.post_title AS Title,
    p.post_content AS Content,
    k.Categories AS Categories,
    t.Tags AS Tags,
    IF(p.post_status = 'publish', 1, 0) AS Published
FROM 
    wp_posts p
    left join temp_categories k 
        on p.id = k.id
    left join temp_tags t 
        on p.id = t.id
WHERE post_status in('publish', 'draft')
ORDER BY id;

-- 4\. Deleting temporary tables
DROP TABLE temp_categories;
DROP TABLE temp_tags; 
```

我可以使用`TEMPORARY`表（不需要删除，当 MySQL 会话结束时它们会消失），但我没有因为我的 PHP 应用程序在每次查询后结束 MySQL 会话。

# localization - 如何在 Middleman 中使用带有 Haml 的本地化 (i18n)

> ID：14238223
> 
> 赞同：2
> 
> 时间：2013-01-09T15:06:30.050
> 
> 标签：localization, internationalization, haml, middleman

Middleman 网页上的示例是在 ERB 中的，但我喜欢使用 HAML。

[http://middlemanapp.com/advanced/localization/](http://middlemanapp.com/advanced/localization/)

这是他们的示例本地化 YAML 文件：

```
---
es:
  hello: "Hola" 
```

这就是他们使用 ERB 访问它的方式。

```
<%= I18n.t(:hello) %> World 
```

但我更喜欢 HAML 而不是 ERB。上述行如何转换为 HAML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T12:34:21.447

这只是：

```
= I18n.t(:hello)
World 
```

不过，您可能希望将问候语放入本地化文件中：

```
es:
  hello: "Hola %{name}" 
```

并像这样从你的 HAML 调用它

```
= I18n.t(:hello, :name => 'World') 
```

# regex - 这封电子邮件 RegExp 有什么问题？

> ID：14238224
> 
> 赞同：0
> 
> 时间：2013-01-09T15:06:31.670
> 
> 标签：regex, jquery-validate

我正在尝试实现[这个](http://www.regular-expressions.info/email.html)（页面底部的那个）RegExp 来使用 jquery 验证插件来验证电子邮件地址。

这是我的代码：

```
$.validator.addMethod("email_address", function(value, element, param) {
  var email_regexp = new RegExp("[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*@(?:a-z0-9?.)+(?:[A-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)\b", "g");
  var result = value.match(email_regexp);
  return result ? result.length >= param : false;
}, "Invalid email address"); 
```

没有显示 JS 错误，但它仍然没有验证任何东西！已经玩了一个小时，但无法正常工作！

有什么不对？

**编辑：**我也尝试使用`//`分隔符：

```
$.validator.addMethod("email_address", function(value, element, param) {
  var result = value.match(/[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*@(?:a-z0-9?.)+(?:[A-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)\b/g);
  return result ? result.length >= param : false;
}, "Invalid email address"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:10:35.590

```
~-]+(?:\.[a-z0-9!#$
//     ^^ 
```

对于 Javascript 字符串，这`\.`将需要再次转义：

```
~-]+(?:\\.[a-z0-9!#$
//     ^^^ 
```

或者，最好使用`//`分隔符而不是`RegExp`从字符串构造对象。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:48:36.287

**为什么要为 jQuery Validate 插件编写自定义正则表达式函数，因为它已经`email`内置了规则？**

[http://docs.jquery.com/Plugins/Validation/Methods/email](http://docs.jquery.com/Plugins/Validation/Methods/email)

**jQuery：**

```
$(document).ready(function() {

    $('#myform').validate({
        rules: {
            field: {
                required: true,
                email: true
            }
        }
    });

}); 
```

**HTML：**

```
<form id="myform">  
     <input type="text" name="field" />  <br/>  
     <input type="submit" />
</form> 
```

**工作演示：**

[http://jsfiddle.net/sRwHc/](http://jsfiddle.net/sRwHc/)

* * *

**`.validate()`插件中使用的默认正则表达式函数，仅供参考：**

```
email: function(value, element) {
    // contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
    return this.optional(element) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value);
} 
```

# eclipse - Eclipse + JBoss Tools -> 选择默认使用的文本包

> ID：14238226
> 
> 赞同：1
> 
> 时间：2013-01-09T15:06:36.120
> 
> 标签：eclipse, jboss-tools

我正在使用 Eclipse (Indigo) 和 JBoss Tools 来编辑`.xhtml`文件。（作为 JSF 2 项目的一部分）

我有几个文本包，我希望其中一个是默认的（所以当我选择文本并将其外部化时，它会检查它是否存在于我选择的默认文本包中并提供将其添加到那里）

现在，我自动选择了一些深奥的文本包（可能按字母顺序），并且每次都必须手动切换。恼人的！

![在此处输入图像描述](../Images/87fd827a21e1ac674d5db1e97448a648.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:31:35.620

由于没有人回答...

我不得不更改资源的名称，以便默认情况下我想使用的资源是按字母顺序排列的第一个。

荒谬，我知道，但我找不到其他方法。

# ruby - 无法在 Sinatra 应用程序中更改会话

> ID：14238227
> 
> 赞同：3
> 
> 时间：2013-01-09T15:06:38.263
> 
> 标签：ruby, session, sinatra

我目前正在使用 Sinatra 应用程序，并且正在努力重新设置我的会话变量。这不是典型的“我的会话消失”问题 - 问题是我无法更改或更改我设置的会话。也许这是一个愚蠢的问题，它们不应该改变，但这对我的项目来说似乎没有什么价值，因为我需要设置然后更改会话变量。下面的一般代码概念 -

```
get '/' do 
    session[:data] = {:key, 'default'}
  p session[:data] #{"key","default"}
end 

post '/:data' do
  p params[:data] #"data"
  session[:data] = {:key, params[:data]}
end

get '/anotherpage' do
  p session[:data] #{"key","default"} as result, even after posting to /:data
end 
```

session[:data] 在各种路线上持续存在没问题，但我无法更新、删除、更改任何内容。有任何想法吗？

# jquery - 捕捉画布图像上所写内容的宽度

> ID：14238230
> 
> 赞同：0
> 
> 时间：2013-01-09T15:06:46.463
> 
> 标签：jquery, image, canvas

JsFiddle： http: [//jsfiddle.net/K34a7/](http://jsfiddle.net/K34a7/) 我正在创建一个 div 并在其中保存图像。我想知道如何检测图像中写入的部分的宽度，以便我可以动态分配 div 的宽度大小而不是整个图像？

```
document.getElementById('text').addEventListener('keyup', function (){
tCtx.canvas.width = tCtx.measureText(this.value).width;
var t = this.value.split('\n');
tCtx.canvas.height = t.length*10;

console.log(t);
var y = 10;
for(var i=0; i<t.length; i++, y+=10) {
tCtx.fillText(t[i], 0, y);
}

//console.log('Value: ' + this.value);
imageElem.src = tCtx.canvas.toDataURL();
//console.log(imageElem.src);
}, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:34:05.710

您已经`measureText`在代码中使用了。只需像这样添加对宽度的引用

```
var textWidth = tCtx.measureText(this.value).width; 
```

`textWidth`将包含画布上文本的宽度。

[演示](http://jsfiddle.net/loktar/K34a7/1/)

# javascript - 获取变量的未定义索引

> ID：14238236
> 
> 赞同：2
> 
> 时间：2013-01-09T15:07:21.570
> 
> 标签：javascript, jquery, ajax

我有一个 div 类`.excelDL`。div 的 OnClick 我正在使用 AJAX 提交表单，而不刷新页面，这似乎工作正常。

我遇到的问题是我需要在`$_GET['excel']`提交表单后检测是否已在我的`mail.php`脚本中设置为 1，并且我收到**未定义的索引**错误。添加提交触发器后，我开始收到未定义的索引错误。

我是 ajax 新手，我想知道是否有人可以帮助我解决这个未定义的索引问题。

我的表单需要触发器的原因是表单中的所有 $_POST 值都将位于将创建的 excel 文件中。

提前谢谢了

邮件.php

```
if($_GET['excel']==1){
    echo '<h1>hello</h1>';
} 
```

AJAX

```
 $('.excelDL').click(function(){
                $('#myForm').trigger('submit', function(e){
                    $.post('mail.php?excel=1', $(this).serialize(), function (data) {
                    //SUCCESS
                    $('.successORfail').html(data);
                        setTimeout(function(){
                            $(".successORfail").fadeOut("slow", function () {
                                $(".successORfail").empty().show();
                            });
                        }, 4500);
                    }).error(function() {
                        alert("Fatal Error: mail.php not found!");
                    });
                    e.preventDefault();
                });         
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:09:54.000

不要发出 HTTP POST，而是使用 HTTP GET。也不要将参数放在请求 URL 中，而是放在参数中。

# windows-phone-8 - WP8 AET 的 MIME 类型

> ID：14238239
> 
> 赞同：8
> 
> 时间：2013-01-09T15:07:30.037
> 
> 标签：windows-phone-8, windows-phone-8.1, in-house-distribution

我正在寻找 aetx 文件的 Mime 类型。

在内部分发 windows phone 8 应用程序时使用此文件。用户下载并将其安装到他们的手机上。但是，当您下载此文件时，手机不会提供安装此注册令牌的选项。我只能猜测 Web 服务器未设置为正确的 MIME 类型，因此手机响应正确。

有时我的谷歌技能让我失望了，微软的文档……在这个问题上很少见。

谢谢你的帮助。

马丁

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T15:53:53.187

终于找到了。在生成这些令牌之一时创建的 aet.xml 文件中，您可以看到它的 x509 证书文件。

因此，mime 类型是：

“应用程序/c-x509-ca-cert”

所以你可以把它托管在一个安全的网站上，然后设置你的用户下载的 mime 类型，希望它可以节省其他人一些时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-19T10:52:22.977

虽然 Martin 的答案对于 Windows Phone 8.0 是正确的，但它不适用于 Windows Phone 8.1。

如果您在 8.1 中使用**“application/c-x509-ca-cert”**，. **aetx**文件将转换为**.cer**，您会收到错误**0x8028a001** *“您的手机无法添加一个或多个证书，因为证书文件可能不受支持或腐败……”*。

8.1 的正确类型是**"application/octet-stream"**。将令牌作为电子邮件附件发送时使用的相同 mime 类型。

但是使用**"application/octet-stream"**，WindowPhone 8.0 不会将 aetx 文件视为令牌并将其内容显示给用户。

解决方案是使用 servlet（或等效的，如果您不使用 java）来动态设置 mime 类型。

# magento-1.7 - 安装扩展管理面板后在 Magento 中无法加载

> ID：14238241
> 
> 赞同：2
> 
> 时间：2013-01-09T15:07:47.133
> 
> 标签：magento-1.7, magento-1.4, magento-1.6, magento

由于我已分配从事 magento 工作，根据我们的要求，我尝试为 magento 安装阿拉伯语扩展。扩展已成功安装。稍后刷新管理面板，它显示找不到 URL。Stores FrontEnd CMS 主页正在加载，但是当我点击任何产品时，它再次显示 URL 未找到..

我该如何解决这个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:15:25.090

在诊断这样的事情时，请尝试以下..

1.  删除（或移动到另一个文件夹）/var/www/var/cache 中的文件
2.  删除（或移动到另一个文件夹）/tmp 中的文件
3.  从外壳，运行

    /var/www/shell$ php indexer.php --reindexall

您刚刚手动清除了缓存并重新索引了您的数据。看看你的系统是否恢复了活力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-13T06:29:06.240

对我来说，安装扩展程序后，我从 MagentoConnect 重定向到错误的 URL。

**我的管理员网址**：<-hostname->/index.php/admin

**重定向到**：<-主机名->/admin

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-03T13:20:43.497

当我手动添加扩展时，我遇到了同样的问题。通过 shell 命令检查时我可以找到问题并返回缺少表错误。这是我手动安装模块时发生的问题。

# android - android：在模拟器中工作但不在手机上的联系人提供程序

> ID：14238242
> 
> 赞同：1
> 
> 时间：2013-01-09T15:07:48.387
> 
> 标签：android, android-contacts, contactscontract, android-syncadapter

我正在使用同步适配器为 android 构建联系人提供程序。现在，我有要添加的联系人的 ArrayList。当我在模拟器上运行它时它工作得很好，但是当我在手机（三星 Galaxy S Plus、索尼爱立信 Xperia X8）上运行它时，我可以在设置中添加帐户，但没有“同步联系人”选项. 任何猜测可能是错误的还是我应该发布一些代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T07:04:42.603

问题出在我定义首选项屏幕的 xml 文件中。

# jqgrid - 页面 jqGrid 的正确方法

> ID：14238243
> 
> 赞同：0
> 
> 时间：2013-01-09T15:07:51.743
> 
> 标签：jqgrid, jqgrid-asp.net

我需要使用 jqGrid 显示许多“动态”网格。动态我的意思是网格的定义和数据都是从数据库中检索的。页面有很多网格，所以我尽量减少服务器的行程次数，而且数据量很大，所以服务器端的分页是必须的。

我的工作流程是

*   在每个网格初始化时，在*一次*服务器调用中检索网格定义和第一页数据。
*   如果用户排序/分页，则从服务器检索一页数据

因为我想在一次调用中检索网格定义和第一页数据，所以我不能使用 datatype: 'json', url: '###' 方法；相反，我这样做：

```
grid.jqGrid({
    mtype: 'post',
    ...        
    datatype: function (postdata) {
        if (!init.data) {
            var request = {
                screenId: settings.screenId,
                pageNumber: postdata.page,
                pageSize: postdata.rows,
                sortColumn: postdata.sidx,
                sortDirection: postdata.sortd,
                date: settings.date
            };
            site.callWs("/MyService", request, function (pageResponse) {
                //WHAT TO CALL HERE TO SET A PAGE OF DATA?
            });
        } else {
            //WHAT TO CALL HERE TO SET A PAGE OF DATA?
            init.data = null;
        }
    }
}); 
```

我的数据对象（pageResponse 或 init.data）看起来像这样

![数据对象](../Images/2d93d6b2abb8888910e99eb70971f6c9.png)

一旦返回一页数据，我不确定在 jqGrid 上调用什么方法。我考虑过 addJSONData，但是将 JSON 转换回字符串然后使用 EVAL() 似乎效率很低。此外，考虑 addRowData 或设置*数据*属性，但我很困惑如何指示 jqGrid 我正在做服务器端分页 - 如果我将*数据*属性设置为一页记录，我需要做什么来告诉 jqGrid总共有 50 条记录，这是 10 页中的第 1 页。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:30:24.363

这是一个用户错误（我的:)。我在 jqGrid 的 loadComplete 中有一些显示/隐藏逻辑，但是调用 addJSONData 时不会触发此事件。

当提供结构正确的 JavaScript 对象时，addJSONData 工作得很好。

# java - 带有正确数字后缀的 Joda DateTimeFormat

> ID：14238246
> 
> 赞同：3
> 
> 时间：2013-01-09T15:07:57.100
> 
> 标签：java, jodatime

我需要以`DateTime`例如 的形式打印 a `Wednesday, January 9th`，其中月份中的日期会自动获得正确的后缀，例如 1 月 2 日将是`January 2nd`。我怎样才能得到一个`DateTimeFormatter`这样做的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:05:04.617

Joda 不支持此功能，但有一些限制，您可以使用[ICU 库](http://site.icu-project.org/)，因为它包含用于格式化序数的本地化规则：

```
import com.ibm.icu.text.RuleBasedNumberFormat;
import com.ibm.icu.text.SimpleDateFormat;

...

SimpleDateFormat sdf = 
    new SimpleDateFormat("EEEE, MMMM d", Locale.ENGLISH);

sdf.setNumberFormat(
    new RuleBasedNumberFormat(
        Locale.ENGLISH, RuleBasedNumberFormat.ORDINAL));

System.out.println(sdf.format(new Date())); 
```

请注意，您只能为 SimpleDateFormat 实例指定一个 NumberFormat 实例，因此这种方法仅在“日期”是日期模式中唯一的数字时才有效。将“yyyy”添加到日期模式将例如将年份格式化为“2,013th”。

ICU 类与标准 API 中的 Date 和 Calendar 类接口，因此如果您确实必须首先使用 Joda，则必须从 Joda DateTime 实例创建 java.util.Date。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:29:42.387

在 Joda 中，为了简单地获得月份日期的正确后缀，如下简单的事情就足够了：

```
 String dayOfMonth = now.dayOfMonth().getAsText();

        String suffix = "";
        if(dayOfMonth.endsWith("1")) suffix = "st";
        if(dayOfMonth.endsWith("2")) suffix = "nd";
        if(dayOfMonth.endsWith("3")) suffix= "rd";
        if(dayOfMonth.endsWith("0") || dayOfMonth.endsWith("4") || dayOfMonth.endsWith("5") || dayOfMonth.endsWith("6")
                || dayOfMonth.endsWith("7") || dayOfMonth.endsWith("8") || dayOfMonth.endsWith("9")) suffix = "th"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T14:08:44.633

我不喜欢使用另一个库的解决方案，所以我使用正则表达式来预处理字符串并删除序数后缀来解决这个问题

```
val dateString1 = "6th December 2016"
dateString1.replaceFirst("^(\\d+).*? (\\w+ \\d+)", "$1 $2")
val dtf = DateTimeFormat.forPattern("dd MMMM yyyy").withLocale(Locale.ENGLISH)
val d1 = dtf.parseLocalDate(cured) 
```

现在 d1 应该是`d1: org.joda.time.LocalDate = 2016-12-06`

# json - ExtJS：Ext.picker.Date 接受哪些值？

> ID：14238253
> 
> 赞同：1
> 
> 时间：2013-01-09T15:08:09.573
> 
> 标签：json, extjs, extjs4

我的表单中有一个`datepicker`，它以 JSON 格式从 form.load 中获取值。日期选择器支持哪些值？
因为它不会绑定这个值：`\/Date(1241215200000)\/`.

我已经有了 JSON 格式的转换功能，但我无法使用 a`convert`或`renderer`config 配置该字段。

```
convertDate = function (value) {
    if (value == null) return null;
    return new Date(parseInt(value.replace("/Date(", ""), 10));
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:17:20.777

该值必须是有效的 JavaScript 日期或`Ext.Date`. 所以你应该像这样绑定它

```
new Date(1241215200000) 
```

例如，Newtonsoft JSON 序列化程序能够返回给定日期的这个。但是如果一切都失败了，你可以考虑覆盖`setValue()`选择器并在那里应用你的转换器

**以下仅适用于`Ext.field.Date`** （*我对日期选择器的第一个但错误的答案*）

我建议您使用`ISO 8601 date`日期格式。有了这个，您需要将**submitFormat**设置为**c**

```
submitFormat: 'c' 
```

像**[Newtonsoft.Json](http://james.newtonking.com/archive/2012/03/20/json-net-4-5-release-1-iso-dates-async-metro-build.aspx)**这样的工具支持`ISO 8601 date`开箱即用（并且从 .Net 4.5 版本 1 开始作为默认设置）。

# wpf - 创建后如何检索控件的视图模型？

> ID：14238259
> 
> 赞同：1
> 
> 时间：2013-01-09T15:08:23.587
> 
> 标签：wpf, mvvm

我有一个窗口和一个用户控件。UserControl 创建自己的视图模型，如下所示：

```
<UserControl x:Class="UiInteraction.UserControl3"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:UiInteraction"
             mc:Ignorable="d" d:DesignHeight="300" d:DesignWidth="300">

    <UserControl.DataContext>
        <local:UserControl3Vm/>
    </UserControl.DataContext>

    <StackPanel>
        <TextBlock Text="{Binding String1}"/>
    </StackPanel>

</UserControl> 
```

当窗口实例化用户控件时，我希望窗口的视图模型能够检索用户控件的视图模型。

```
<Window x:Class="UiInteraction.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:UiInteraction"
        Title="MainWindow" Height="350" Width="525">

    <Window.DataContext>
        <local:MainWindowVm/>
    </Window.DataContext>

    <StackPanel>
        <local:UserControl3 DataContext="{Binding UserControl3Vm, Mode=OneWayToSource}"/>
    </StackPanel>

</Window> 
```

Window 的视图模型具有对象类型的可公开设置的属性。通过 DataContext 绑定，我期望一旦创建 UserControl3，其 DataContext 的值（这是对其视图模型的引用）将被分配给窗口视图模型上的 UserControl3Vm 属性。

实际发生的是 Window.UserControl3Vm 属性设置器以 null 值调用。

为什么会发生这种情况，实现我的想法的最佳方法是什么？

我知道将 UserControl 的 viewmodel 实例化为 Window 的 viewmodel 上的属性并让 UserControl 简单地绑定到它会更容易，（这也可以最大限度地减少视图与其视图模型的耦合）。但是在我工作的地方，它们有点疯狂，并且更喜欢先查看 MVVM 而不是先查看视图模型，所以我正在寻找最解耦的方法，以使视图模型在视图模型由它们的视图创建时有效地协作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:18:50.960

我认为在`OneWayToSource`没有一些代码隐藏的情况下使用绑定是行不通的。

最初，您`UserControl.DataContext`被设置为 的实例`UserControl3vm`，但是您将替换`UserControl3vm`为 Binding，因此您的原始`UserControl3vm`文件不再在任何地方引用。

要使`OneWayToSource`绑定起作用，您必须首先将 设置`DataContext`为`OneWayToSource`绑定，然后将绑定的 Source 设置为`UserControl3vm`UserControl 内部的新实例。

如果我没记错的话，您可以使用[BindingOperations.GetBindingExpression](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingoperations.getbindingexpression.aspx)获取绑定，并更新它的[DataItem](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingexpression.dataitem%28v=vs.95%29.aspx)属性。您不能简单地设置，`UserControl.DataContext`因为它会覆盖您的`OneWayToSource`绑定。

`Loaded`就我个人而言，我会在事件背后的代码中做到这一点

如果他们坚持 View-First MVVM，那么 View 正在控制应用程序流，我看不出有任何理由将应用程序逻辑排除在 View 的代码隐藏之外。

所以只需在 Loaded 事件中设置你的`Window.DataContext.UserControl3Vm`属性:)`UserControl3.DataContext`

```
<Window x:Name="MyWindow"
        Loaded="MyWindow_Loaded" 
        ... >
    <StackPanel>
        <local:UserControl3 x:Name="MyUserControl" />
    </StackPanel>
</Window>

void MyWindow_Loaded(object sender, EventArgs e)
{
    ((MainWindowVm)MyWindow.DataContext).UserControl3Vm 
        = MyUserControl.DataContext;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:31:32.610

这可以在 XAML 中使用一些解决方法（破解`DataContext`对主机元素的访问）。[这里](http://www.wpfmentor.com/2008/11/adding-bindings-to-clr-properties-in.html)提到了该方法。它使用[Freezables](http://msdn.microsoft.com/en-us/library/system.windows.freezable.aspx)。

XAML 是

```
<Window x:Class="VM2VMBindingInXaml.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vw="clr-namespace:VM2VMBindingInXaml.View"
        xmlns:vm="clr-namespace:VM2VMBindingInXaml.ViewModel"
        Title="MainWindow" Height="350" Width="525" >
    <Window.Resources>
             <vm:UserControl1ViewModel x:Key="childVM"></vm:UserControl1ViewModel>
        <vm:DataResource x:Key="childVmBinding" BindingTarget="{Binding ElementName=child, Path=DataContext}"/>
    </Window.Resources>
    <Window.DataContext>
        <vm:MainWindowViewModel x:Name="mainViewModel" >
            <vm:MainWindowViewModel.ChildViewModel>
                <vm:DataResourceBinding DataResource="{StaticResource childVmBinding}">

                </vm:DataResourceBinding>
            </vm:MainWindowViewModel.ChildViewModel>
        </vm:MainWindowViewModel>
    </Window.DataContext>
    <Grid>
        <vw:UserControl1 x:Name="child" DataContext="{Binding Source={StaticResource ResourceKey=childVM}}">
        </vw:UserControl1>
    </Grid>
</Window> 
```

# javascript - 在 JavaScript 中手动将 yyyy-MM-ddTHH:mm:ss.fffZ 转换为 DateTime

> ID：14238261
> 
> 赞同：9
> 
> 时间：2013-01-09T15:08:29.483
> 
> 标签：javascript, datetime, string-formatting, nsdateformatter

我从 Web 服务收到一个带有以下格式日期的字符串：

```
yyyy-MM-ddTHH:mm:ss.fffZ 
```

我需要使用 JavaScript 将该字符串转换为正常的 DateTime 但不使用新的`Date('yyyy-MM-ddTHH:mm:ss.fffZ')`，因为我使用的是不支持该转换的旧版本的 JavaScript。我可以拆分该字符串并获得：

*   年
*   月
*   天
*   时间

但是如何操纵时区有`"fffZ"`什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T15:37:17.267

[这是来自John Resig](http://ejohn.org/files/pretty.js)的一个班轮：

```
var date = new Date((time || "").replace(/-/g,"/").replace(/[TZ]/g," ")), 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T17:07:01.097

我已经建立了解决方案。请检查[http://webcloud.se/log/JavaScript-and-ISO-8601/](http://webcloud.se/log/JavaScript-and-ISO-8601/)

```
Date.prototype.setISO8601 = function (string) {
    var regexp = "([0-9]{4})(-([0-9]{2})(-([0-9]{2})" +
        "(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?" +
        "(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";
    var d = string.match(new RegExp(regexp));

    var offset = 0;
    var date = new Date(d[1], 0, 1);

    if (d[3]) { date.setMonth(d[3] - 1); }
    if (d[5]) { date.setDate(d[5]); }
    if (d[7]) { date.setHours(d[7]); }
    if (d[8]) { date.setMinutes(d[8]); }
    if (d[10]) { date.setSeconds(d[10]); }
    if (d[12]) { date.setMilliseconds(Number("0." + d[12]) * 1000); }
    if (d[14]) {
        offset = (Number(d[16]) * 60) + Number(d[17]);
        offset *= ((d[15] == '-') ? 1 : -1);
    }

    offset -= date.getTimezoneOffset();
    time = (Number(date) + (offset * 60 * 1000));
    this.setTime(Number(time));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:31:42.350

如果您知道它将采用这种形式（[ISO 8601](http://www.w3.org/TR/NOTE-datetime)，[wiki](http://en.wikipedia.org/wiki/ISO_8601)），您可以使用 RegExp 或字符串方法进行解析。`Z`这是一个 RegExp 示例，可让您使用 timezone`+hh`或`+hh:mm`.

```
var dateString = '2013-01-08T17:16:36.000Z';

var ISO_8601_re = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?(Z|[\+-]\d{2}(?::\d{2})?)$/,
    m = dateString .match(ISO_8601_re);

var year = +m[1],
    month = +m[2],
    dayOfMonth = +m[3],
    hour = +m[4],
    minute = +m[5],
    second = +m[6],
    ms = +m[7], // +'' === 0
    timezone = m[8];

if (timezone === 'Z') timezone = 0;
else timezone = timezone.split(':'), timezone = +(timezone[0][0]+'1') * (60*(+timezone[0].slice(1)) + (+timezone[1] || 0));
// timezone is now minutes

// your prefered way to construct
var myDate = new Date();
myDate.setUTCFullYear(year);
myDate.setUTCMonth(month - 1);
myDate.setUTCDate(dayOfMonth);
myDate.setUTCHours(hour);
myDate.setUTCMinutes(minute + timezone); // timezone offset set here, after hours
myDate.setUTCSeconds(second);
myDate.setUTCMilliseconds(ms);

console.log(myDate); // Tue Jan 08 2013 17:16:36 GMT+0000 (GMT Standard Time) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-01-05T23:02:49.433

[momentjs](http://momentjs.com/)可以解决这个问题以及您可能遇到的许多其他日期问题。虽然不清楚您将在何处以及如何使用所需的日期，也不是所需的格式，但我认为 momentjs 可以为您提供一些所需的任务，我会将模块添加到我的解决方案中并用作（下面是 parse.com 云代码）：

```
Parse.Cloud.define("momentFormat", function(request, response){
    var message;

    var date = momento('2013-01-08T17:16:36.000Z');
    response.success("original format date: " + date.format("YYYY-MM-DDTHH:mm:ss.SSSZ") + " new format date: " + date.format("dddd, MMMM Do YYYY, h:mm:ss a"));
}); 
```

输出：

```
{"result":"original format date: 2013-01-08T17:16:36.000+00:00 new format date: Tuesday, January 8th 2013, 5:16:36 pm"} 
```

# visual-studio-2010 - Visual Basic 2010 连接 PHPMYADMIN 失败（离线）

> ID：14238264
> 
> 赞同：0
> 
> 时间：2013-01-09T15:08:40.413
> 
> 标签：visual-studio-2010, phpmyadmin

我的登录系统遇到问题。这是我的编码：我已经在我的表单中添加了引用 MySQL.Data。当我单击按钮时，会显示此错误消息。**（在 mscorlib.dll 中发生了“System.Collections.Generic.KeyNotFoundException”类型的第一次机会异常）**。

```
Imports MySql.Data.MySqlClient
Public Class Form1
    Public conn As MySqlConnection
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        conn = New MySqlConnection("server=localhost; user id=root; password=; database=test")
        Try
            conn.Open()
            Dim sqlquery As String = "SELECT * FROM yy WHERE Username = '" & TextBox1.Text & "';"
            Dim data As MySqlDataReader
            Dim adapter As New MySqlDataAdapter
            Dim command As New MySqlCommand
            command.CommandText = sqlquery
            command.Connection = conn
            adapter.SelectCommand = command
            data = command.ExecuteReader
            While data.Read()
                If data.HasRows() = True Then
                    If data(2).ToString = TextBox2.Text Then
                        MsgBox("Login")
                    Else
                        MsgBox("Failed Login")

                    End If
                Else
                    MsgBox("Failed Login")
                End If
            End While

        Catch ex As Exception

        End Try
    End Sub
End Class 
```

# iis - 使用 Powershell 在 IIS 中设置网站的应用程序池

> ID：14238270
> 
> 赞同：7
> 
> 时间：2013-01-09T15:08:54.817
> 
> 标签：iis, powershell, application-pool

我需要一个相当于在 IIS 中添加网站的 Powershell 命令，但需要“应用程序池”的绑定：

![在此处输入图像描述](../Images/0e4e5a54d0807953fbf0056180a648c2.png)

到目前为止，我可以添加一个这样做的网站：

```
New-Item iis:\Sites\swmarket -bindings @{protocol="http";bindingInformation="80:swmarket"} -physicalPath c:\inetpub\wwwroot 
```

但我不知道如何在新网站中设置“应用程序池”。有什么办法可以查看所有绑定？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T15:53:12.653

```
Set-ItemProperty iis:\Sites\swmarket -Name applicationpool -Value swmarket 
```

或者，使用 Powershell 3，您可以这样做：

```
New-WebAppPool -Name $WebSiteName
New-Website -Name $WebSiteName -ApplicationPool $WebSiteName -HostHeader $WebSiteName -PhysicalPath $PathInfo -Port 80
Set-Content $PathInfo\default.htm “PSCreated Default Page” 
```

在此处查看 MS Technet 描述[。](http://technet.microsoft.com/en-us/library/ee807831.aspx)

# c# - AutoMapper.AutoMapperMappingException

> ID：14238273
> 
> 赞同：5
> 
> 时间：2013-01-09T15:09:00.713
> 
> 标签：c#, automapper, mappingexception

我知道有很多关于这个主题的问题，但没有一个为我的问题提供答案。这就是为什么我要创建一个新问题。

我在 google 和 here 上查看了答案，并发现了一些改进了我的 AutoMapper 设置的方法。（即只创建一次映射）

我的问题是我有时会遇到异常，有时却不会。我完全不知道如何解决它。我已经搜索了一整天，但我找不到任何东西。

当我运行 Mapper.AssertConfigurationIsValid(); 它成功了。

我尝试添加以下内容：

```
Mapper.Configuration.AllowNullDestinationValues = true;
Mapper.AllowNullDestinationValues = true; 
```

我仍然得到错误：s

我的设置如下：

在我的 global.asax 文件中，我调用 AutoMapperSetup.SetupAutoMapper()。

```
protected void Application_Start(object sender, EventArgs e)
    {
        ...
        AutoMapperSetup.SetupAutoMapper();
    } 
```

AutoMapperSetup 类描述如下：（我确实知道我的静态构造函数正在执行。如果我放置了一个断点，它就会被命中。所以该代码确实被执行）

```
public static class AutoMapperSetup
{

static AutoMapperSetup()
    {
        #region GetPlanning
        Mapper.CreateMap<GetPlanningResult_v3, FWSGetPlanningResult>()
            .ForSourceMember(x => x.ItemSelection, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<ExecutionResult, FWSExecutionResult>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<ExecutionResult.Error, FWSExecutionResult.FWSError>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<ExecutionResult.Warning, FWSExecutionResult.FWSWarning>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<GetPlanningHistoricalSelectionResult_v3, FWSGetPlanningHistoricalSelectionResult>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<PlanningResult_v3, FWSPlanningResult>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Anomaly, FWSAnomaly>()
            .ForSourceMember(x => x.AnomalyID, y => y.Ignore())
            .ForSourceMember(x => x.Dispatcher, y => y.Ignore())
            .ForSourceMember(x => x.IsDealed, y => y.Ignore())
            .ForSourceMember(x => x.AnomalyDateTime, y => y.Ignore())
            .ForSourceMember(x => x.Trip, y => y.Ignore())
            .ForSourceMember(x => x.Place, y => y.Ignore())
            .ForSourceMember(x => x.Job, y => y.Ignore())
            .ForSourceMember(x => x.Product, y => y.Ignore())
            .ForSourceMember(x => x.Vehicle, y => y.Ignore())
            .ForSourceMember(x => x.Driver, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<CommentHistoricalResult, FWSCommentHistoricalResult>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));

        Mapper.CreateMap<IdentifierResult, FWSIdentifierResult>()
            .ForSourceMember(x => x.Code, y => y.Ignore())
            .ForSourceMember(x => x.ID, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<IdentifierPerson, FWSIdentifierPerson>()
            .ForSourceMember(x => x.LastName, y => y.Ignore())
            .ForSourceMember(x => x.FirstName, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<IdentifierVehicleResult, FWSIdentifierVehicleResult>()
            .ForSourceMember(x => x.LicensePlate, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<TripResult_v3, FWSTripResult>()
            .ForSourceMember(x => x.ModificationDate, y => y.Ignore())
            .ForSourceMember(x => x.ModificationID, y => y.Ignore())
            .ForSourceMember(x => x.ModificationNumber, y => y.Ignore())
            .ForSourceMember(x => x.EndDate, y => y.Ignore())
            .ForSourceMember(x => x.ExternalSynchStatus, y => y.Ignore())
            .ForSourceMember(x => x.CreatedByDriver, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Trip, FWSTrip>()
            .ForSourceMember(x => x.References, y => y.Ignore())
            .ForSourceMember(x => x.TypeCustom, y => y.Ignore())
            .ForSourceMember(x => x.CustomNr, y => y.Ignore())
            .ForSourceMember(x => x.StartTripAct, y => y.Ignore())
            .ForSourceMember(x => x.StopTripAct, y => y.Ignore())
            .ForSourceMember(x => x.OrderSeq, y => y.Ignore())
            .ForSourceMember(x => x.Overwrite, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<PlaceResult_v2, FWSPlaceResult>()
            .ForSourceMember(x => x.ModificationDate, y => y.Ignore())
            .ForSourceMember(x => x.ModificationID, y => y.Ignore())
            .ForSourceMember(x => x.ModificationNumber, y => y.Ignore())
            .ForSourceMember(x => x.SessionID, y => y.Ignore())
            .ForSourceMember(x => x.Export, y => y.Ignore())
            .ForSourceMember(x => x.ReadDateTime, y => y.Ignore())
            .ForSourceMember(x => x.Format, y => y.Ignore())
            .ForSourceMember(x => x.Documents, y => y.Ignore())
            .ForSourceMember(x => x.TachoActivities, y => y.Ignore())
            .ForSourceMember(x => x.EndDate, y => y.Ignore())
            .ForSourceMember(x => x.DriverInfo, y => y.Ignore())
            .ForSourceMember(x => x.AlarmDateTime, y => y.Ignore())
            .ForSourceMember(x => x.ExternalSynchStatus, y => y.Ignore())
            .ForSourceMember(x => x.CreatedByDriver, y => y.Ignore())
            .ForSourceMember(x => x.Comments, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Place, FWSPlace>()
            .ForSourceMember(x => x.References, y => y.Ignore())
            .ForSourceMember(x => x.CustomNr, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Consultation, FWSConsultation>()
            .ForSourceMember(x => x.ModificationDate, y => y.Ignore())
            .ForSourceMember(x => x.ConsultationID, y => y.Ignore())
            .ForSourceMember(x => x.Vehicle, y => y.Ignore())
            .ForSourceMember(x => x.Driver, y => y.Ignore())
            .ForSourceMember(x => x.Position, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<ExtraInfo, FWSExtraInfo>()
            .ForSourceMember(x => x.Date, y => y.Ignore())
            .ForSourceMember(x => x.InfoID, y => y.Ignore())
            .ForSourceMember(x => x.Export, y => y.Ignore())
            .ForSourceMember(x => x.Activity, y => y.Ignore())
            .ForSourceMember(x => x.Vehicle, y => y.Ignore())
            .ForSourceMember(x => x.Driver, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Activity, FWSActivity>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<PlaceIdentifier, FWSPlaceIdentifier>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<TripIdentifier, FWSTripIdentifier>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));

        Mapper.CreateMap<Position, FWSPosition>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<PlanningItem, FWSPlanningItem>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<GeofencingResult, FWSGeofencingResult>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Geofencing, FWSGeofencing>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Comment, FWSComment>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<JobResult_v2, FWSJobResult>()
            .ForSourceMember(x => x.Author, y => y.Ignore())
            .ForSourceMember(x => x.Export, y => y.Ignore())
            .ForSourceMember(x => x.CreatedbyDriver, y => y.Ignore())
            .ForSourceMember(x => x.ExternalSynchStatus, y => y.Ignore())
            .ForSourceMember(x => x.Transfer, y => y.Ignore())
            .ForSourceMember(x => x.CancelStatus, y => y.Ignore())
            .ForSourceMember(x => x.ModificationDate, y => y.Ignore())
            .ForSourceMember(x => x.ModificationID, y => y.Ignore())
            .ForSourceMember(x => x.ModificationNumber, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<ProductResult_v2, FWSProductResult>()
            .ForSourceMember(x => x.ModificationDate, y => y.Ignore())
            .ForSourceMember(x => x.ModificationID, y => y.Ignore())
            .ForSourceMember(x => x.ModificationNumber, y => y.Ignore())
            .ForSourceMember(x => x.Format, y => y.Ignore())
            .ForSourceMember(x => x.ProductType, y => y.Ignore())
            .ForSourceMember(x => x.Export, y => y.Ignore())
            .ForSourceMember(x => x.Transfer, y => y.Ignore())
            .ForSourceMember(x => x.ExternalSynchStatus, y => y.Ignore())
            .ForSourceMember(x => x.CreatedByDriver, y => y.Ignore())
            .ForSourceMember(x => x.TnrPlace, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Job, FWSJob>()
            .ForSourceMember(x => x.OrderSeq, y => y.Ignore())
            .ForSourceMember(x => x.DriverDisplay, y => y.Ignore())
            .ForSourceMember(x => x.Comment, y => y.Ignore())
            .ForSourceMember(x => x.CustomNr, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Product, FWSProduct>()
            .ForSourceMember(x => x.References, y => y.Ignore())
            .ForSourceMember(x => x.CustomNr, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<ViaRouteItemResult, FWSViaRouteItemResult>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Customer, FWSCustomer>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Shipper, FWSShipper>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<ActivityPlace, FWSActivityPlace>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<Transfer, FWSTransfer>()
            .ForSourceMember(x => x.SendDateTime, y => y.Ignore())
            .ForSourceMember(x => x.TransferCancelID, y => y.Ignore())
            .ForSourceMember(x => x.TransferDateTime, y => y.Ignore())
            .ForSourceMember(x => x.TransferID, y => y.Ignore())
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));

        Mapper.CreateMap<enumPlanningStatus, FWSEnumPlanningStatus>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<enumSynchronisationStatus, FWSEnumSynchronisationStatus>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<enumCancelStatus, FWSEnumCancelStatus>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<enumTransferStatus, FWSEnumTransferStatus>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<enumGeoFencingEventType, FWSenumGeoFencingEventType>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        Mapper.CreateMap<enumPositionFormat, FWSenumPositionFormat>()
            .ForAllMembers(op => op.Condition(x => !x.IsSourceValueNull));
        #endregion

        #region InsertUpdatePlanning
        Mapper.CreateMap<FWSPlanningInsert, PlanningInsert>();
        Mapper.CreateMap<FWSPlanning, Planning>();
        Mapper.CreateMap<FWSTripInsert, TripInsert>()
            .ForMember(x => x.References, y => y.Ignore())
            .ForMember(x => x.TypeCustom, y => y.Ignore())
            .ForMember(x => x.CustomNr, y => y.Ignore())
            .ForMember(x => x.StartTripAct, y => y.Ignore())
            .ForMember(x => x.StopTripAct, y => y.Ignore())
            .ForMember(x => x.OrderSeq, y => y.Ignore())
            .ForMember(x => x.Overwrite, y => y.Ignore());
        Mapper.CreateMap<FWSTrip, Trip>()
            .ForMember(x => x.References, y => y.Ignore())
            .ForMember(x => x.TypeCustom, y => y.Ignore())
            .ForMember(x => x.CustomNr, y => y.Ignore())
            .ForMember(x => x.StartTripAct, y => y.Ignore())
            .ForMember(x => x.StopTripAct, y => y.Ignore())
            .ForMember(x => x.OrderSeq, y => y.Ignore())
            .ForMember(x => x.Overwrite, y => y.Ignore());
        Mapper.CreateMap<FWSPlaceInsert, PlaceInsert>()
            .ForMember(x => x.References, y => y.Ignore())
            .ForMember(x => x.CustomNr, y => y.Ignore());
        Mapper.CreateMap<FWSPlace, Place>()
            .ForMember(x => x.References, y => y.Ignore())
            .ForMember(x => x.CustomNr, y => y.Ignore());
        Mapper.CreateMap<FWSJobInsert, JobInsert>()
            .ForMember(x => x.OrderSeq, y => y.Ignore())
            .ForMember(x => x.DriverDisplay, y => y.Ignore())
            .ForMember(x => x.Comment, y => y.Ignore())
            .ForMember(x => x.CustomNr, y => y.Ignore());
        Mapper.CreateMap<FWSJob, Job>()
            .ForMember(x => x.OrderSeq, y => y.Ignore())
            .ForMember(x => x.DriverDisplay, y => y.Ignore())
            .ForMember(x => x.Comment, y => y.Ignore())
            .ForMember(x => x.CustomNr, y => y.Ignore());
        Mapper.CreateMap<FWSProductInsert, ProductInsert>()
            .ForMember(x => x.References, y => y.Ignore())
            .ForMember(x => x.CustomNr, y => y.Ignore());
        Mapper.CreateMap<FWSProduct, Product>()
            .ForMember(x => x.References, y => y.Ignore())
            .ForMember(x => x.CustomNr, y => y.Ignore());
        Mapper.CreateMap<FWSIdentifier, Identifier>();
        Mapper.CreateMap<FWSIdentifierVehicle, IdentifierVehicle>();
        Mapper.CreateMap<FWSIdentifierSite, IdentifierSite>();
        Mapper.CreateMap<FWSenumIdentifierType, enumIdentifierType>();
        Mapper.CreateMap<FWSenumIdentifierVehicleType, enumIdentifierVehicleType>();
        Mapper.CreateMap<FWSenumIdentifierSiteType, enumIdentifierSiteType>();
        Mapper.CreateMap<FWSReference, Reference>();
        Mapper.CreateMap<FWSActivity, Activity>();
        Mapper.CreateMap<FWSGeofencing, Geofencing>();
        Mapper.CreateMap<FWSPosition, Position>();
        Mapper.CreateMap<FWSIdentifierViaRoute, IdentifierViaRoute>();
        Mapper.CreateMap<FWSViaPointInsert, ViaPointInsert>();
        Mapper.CreateMap<FWSViaPoint, BusinessFramework.Data.ViaRoute.ViaPoint>();
        Mapper.CreateMap<FWSViaRouteInsert, ViaRouteInsert>();
        Mapper.CreateMap<FWSViaRoute, ViaRoute>();
        Mapper.CreateMap<FWSActivityPlace, ActivityPlace>();
        Mapper.CreateMap<FWSenumGeoFencingEventType, enumGeoFencingEventType>();
        Mapper.CreateMap<FWSenumPositionFormat, enumPositionFormat>();
        Mapper.CreateMap<FWSReferenceProduct, ReferenceProduct>();
        Mapper.CreateMap<FWSenumIdentifierViaRouteType, enumIdentifierViaRouteType>();
        Mapper.CreateMap<FWSenumViaRouteType, enumViaRouteType>();
        Mapper.CreateMap<FWSenumViaRoutePlanningType, enumViaRoutePlanningType>();
        Mapper.CreateMap<FWSIdentifierAddress, IdentifierAddress>();
        Mapper.CreateMap<FWSenumIdentifierAddressType, enumIdentifierAddressType>();
        Mapper.CreateMap<FWSCustomer, Customer>();
        Mapper.CreateMap<FWSShipper, Shipper>();
        #endregion

        #region InsertUpdateSettings
        Mapper.CreateMap<FWSUpdateInsertSettings, UpdateInsertSettings>();
        #endregion

        #region Cancel Planning
        Mapper.CreateMap<FWSPlanningItemSelection, PlanningItemSelection>();
        #endregion
    }

public static void SetupAutoMapper()
    {

    }
} 
```

当我启动我的 WebServices 时，它会被调用。下一步是从 DB 中获取数据并将其映射到我的 DTO：

```
FWSGetPlanningResult resultToReturn = Mapper.Map<GetPlanningResult_v3, FWSGetPlanningResult>(result); 
```

执行上面的代码行给了我映射异常错误。下面是异常的详细信息：

```
AutoMapper.AutoMapperMappingException occurred
HResult=-2146233088
Message=Missing type map configuration or unsupported mapping.

Mapping types:
GetPlanningResult_v3 -> FWSGetPlanningResult
BusinessFramework.Data.Planning.Result.GetPlanningResult_v3 -> BusinessFramework.Data.Planning.FWSGetPlanningResult

Destination path:
FWSGetPlanningResult

Source value:
BusinessFramework.Data.Planning.Result.GetPlanningResult_v3
Source=AutoMapper
StackTrace:
   at Desktop.Web.Fleet.DBFactory.ConvertFromGetPlanningResult(GetPlanningResult_v3 result) in c:\TFSProjects\Tx-Framework\Framework\Main\Source\BusinessFramework\Services.Fleet\Classes\DB\Factories\Planning.cs:line 593
InnerException: 
```

我希望有人能给我解决方案..正如您在对象数量上看到的那样..我并不急于开始手动映射所有内容。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:53:37.850

我的问题已经解决了。问题如下：

在我们的解决方案中，我们最近开始与 IOC 合作。有人使用 AutoMapperTypeAdapter 作为引用实体创建了一个 TypeAdapter。

当在我们的应用程序中打开或输入某个模块时，Automapper 再次被初始化，我在 global.asax 中创建的映射被删除。

在修改我的代码以使用 TypeAdapter 后，我的问题得到了解决。

感谢所有试图帮助我的人！

# mysql - SELECT 查询，其中 1 列等于 2 个变量

> ID：14238278
> 
> 赞同：2
> 
> 时间：2013-01-09T15:09:04.667
> 
> 标签：mysql, sql

问题：我想选择 option_value_id 为 1 和 3 的产品。但是，如您所见，它还会显示只有 option_value_id 中的 1 个的产品。

我尝试添加 AND 而不是 IN 但这显然不会显示任何结果。

答案可能很简单，但我现在似乎无法弄清楚。有人可以帮我吗？即使是一个小提示也可以理解。

![在此处输入图像描述](../Images/bd8b5dbdf9b6003fef25ad61f423f009.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:10:34.290

这称为[*Relation Division*](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)，这是一种方法：

```
SELECT *
FROM TABLEName 
WHERE Product_ID IN(SELECT Product_ID
            FROM Tablename
            WHERE option_value_id IN(1, 3)
            GROUP BY Product_ID
            HAVING COUNT(option_value_id) = 2); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/f0214/5)

这会给你：

```
| ID | PRODUCT_ID | OPTION_VALUE_ID |
-------------------------------------
|  1 |          1 |               1 |
|  3 |          1 |               3 |
| 13 |          2 |               3 |
| 14 |          2 |               1 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:12:54.523

这是将事物视为一组的示例。我认为最好的方法是使用 SQL 的聚合，尤其是 having 子句。在 MySQL 语法中，这看起来像：

```
select pa.product_id
from Product_Attributes pa
group by pa.product_id
having max(pa.option_value_id = 1) = 1 and
       max(pa.option_value_id = 3) = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:13:35.397

这是一个常见的问题，叫做Relational Division，在SO中甚至有一个标签：**[sql-match-all](https://stackoverflow.com/questions/tagged/sql-match-all?sort=votes)**

通常， 有一个唯一约束`(product_id, option_value_id)`，因此一种解决方案是使用 2 个连接（如果要检查 N 个属性，则使用 N 个连接）：

```
SELECT p.*                 -- whatever columns you need 
FROM product AS p          -- from the `product` table
  JOIN products_attributes AS pa1
    ON  pa1.option_value_id = 1
    AND pa1.product_id = p.product_id
  JOIN products_attributes AS pa2
    ON  pa2.option_value_id = 3
    AND pa2.product_id = p.product_id ; 
```

有一个类似的问题，有超过 10 种不同的方法来实现相同的结果（以及 Postgres 的基准）：**[How to filter SQL results in a has-many-through relationship](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T15:30:46.370

试试这个：

```
SELECT * 
FROM products_attributes 
WHERE option_value_id IN (1, 3) 
GROUP BY product_id 
HAVING COUNT(*) = 2 
```

# java - Java 7 中的套接字不接收输入

> ID：14238281
> 
> 赞同：0
> 
> 时间：2013-01-09T15:09:07.500
> 
> 标签：java, sockets, networking, java-7, java-6

我在尝试将我的一个应用程序从 Java 6 升级到 Java 7 时遇到了一个有趣的问题。它是一个简单的 Java 套接字程序。它向 COM 套接字发送命令并接收响应。它在 Java 6 环境中完美运行，但是当我尝试在 Java 7 环境中运行相同的代码时，套接字似乎在 InputStream 中没有收到任何内容。

我可以确认它连接的 COM 套接字确实接收到命令并发送响应。这在两种情况下都在完全相同的机器上运行，并且禁用了防火墙，并且两次运行的代码完全相同。

Java 7 中是否发生了一些变化，我是否有一些更深层次的缺陷，或者这仅仅是一个 Java 错误？

这是代码的略微剥离版本。

```
public static void main(String[] arguments) throws Exception {
  InetAddress server = InetAddress.getByName(serverAddress);
  Socket sock = SSLSocketFactory.getDefault().createSocket(server.getHostAddress(), port);
  InputStream in = sock.getInputStream();
  OutputStream out = sock.getOutputStream();
  out.write(command.getBytes()); //Is valid command
  String token = "";
  responseReader: while (true) {
    try {
      Thread.sleep(1);
    }
    catch (InterruptedException exception) {}
    byte[] d = new byte[in.available()];
    int avail = in.read(d);
    for (int i = 0; i < avail; i++) {
      if (d[i] == fieldSeperator) {
        token = "";
      }
      else if (d[i] == commandSeperator) {
        break responseReader;
      }
      else {
        token += (char) d[i];
      }
    }
  }
} 
```

我已经尽我所能尝试了，大多数时候都知道这不重要。使用不同的方法读取流，转换为 SSLSocket 并进行不同的调用，添加一些睡眠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:49:37.350

代码是错误的。你不应该那样使用 available() 。如果没有可用数据，您将分配一个零长度缓冲区并执行零长度读取，这将返回零而不会阻塞。使用像 8192 这样的常量作为缓冲区大小，并在循环外分配缓冲区。并摆脱 sleep() 。

available() 的正确用法很少（如果有的话），这不是其中之一。

请注意，对于 SSLSocket，available() 始终返回零，并且在 Java 1.3 和单独的 JSSE 下载中始终如此。所以我无法接受相同的代码在 Java 6 中也能工作。

# ios - 在 iOS 中将错误代码转换为文本

> ID：14238287
> 
> 赞同：2
> 
> 时间：2013-01-09T15:09:30.747
> 
> 标签：ios, logging, error-code, commoncrypto

我有一个使用 CommonCryptor 加密和解密的包装器。有时解密过程会失败，在这种情况下，我会填写如下错误：

```
if (result == kCCSuccess) {
    cipherData.length = outLength;
} else {
    if (error) {
        *error = [NSError errorWithDomain:kBridgeEncryptorErrorDomain
                                     code:result
                                 userInfo:nil];
    }

    return nil;
} 
```

然后我记录这样的错误：

```
if (error != nil) {
    DDLogError(@"Decrypt fail %i, %@", [error code], [error localizedDescription]);
} 
```

但是，这最终会生成如下字符串：

```
2013-01-09 09:15:19.753 [BridgeEncrypter decryptDataFromData:] [Line 83] E: Decrypt fail -4304, The operation couldn’t be completed. (com.***.bridgecrypt error -4304.) 
```

其中 -4304 可能是 CommonCryptor.h 中的任何错误代码（-4300 到[-4305](http://www.opensource.apple.com/source/CommonCrypto/CommonCrypto-36064/CommonCrypto/CommonCryptor.h)）。有没有一种将错误代码映射到其字符串值的好方法，或者我是否需要一个`switch`手动调整字符串的语句？如果我必须依赖 a `switch`，最佳做法是将其放在记录问题或生成错误的位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:45:58.727

I'm not sure what you're looking for here. I'm not familiar with CommonCryptor or how error messages are handled in it.

I can recommend that you lean on NSError and it's userInfo and NSLocalized*Key feature.

For example, if you set a `NSLocalizedDescriptionKey` in the userInfo dictionary, error:

```
NSDictionary userInfo = @{
    NSLocalizedDescriptionKey : @"This is the error message I want users to see"
};
*error = [NSError errorWithDomain:kBridgeEncryptorErrorDomain
                             code:result
                         userInfo:userInfo]; 
```

Then `This is the error message I want users to see` is the string returned by `-localizedDescription`. Then the calling code can use the string to display a message to the user without needing to reinterpret it.

As to the question of how to link error codes to messages you want users to see, there could be a CommonCryptor function that converts error codes to human readable string. If not, then you could write your own. I would recommend using a switch.

```
NSString *MyCodeToLocalizedDescription(CCCryptorStatus cryptorStatus)
{
    switch(cryptorStatus) {
    case kCCDecodeError: return @"This is the error message I want users to see";
    …
    default: return @"Oh noes, unknown error";
    }
} 
```

At that point setting the error is:

```
NSDictionary userInfo = @{
    NSLocalizedDescriptionKey : MyCodeToLocalizedDescription(result)
};
*error = [NSError errorWithDomain:kBridgeEncryptorErrorDomain
                             code:result
                         userInfo:userInfo]; 
```

# perl - 在 Perl 中向 PayMill 发送 CURL 请求

> ID：14238290
> 
> 赞同：4
> 
> 时间：2013-01-09T15:09:36.340
> 
> 标签：perl, curl, paymill

我的卷曲超出了我的深度。我想将 PayMill 集成到我的网站（用 Perl 编写）。Paymill 还没有 Perl 库，所以我需要通过 curl 连接到它们。

我已经完成了前端 JS Paymill 的集成，并从 PayMill 收到了一个支付令牌。

我现在需要将从 Paymill 收到的令牌传递到我的后端，并使用 curl 要求 PayMill 完成交易并向用户收费。在这一点上，我被困住了。

要进行交易，PayMill 文档说我必须执行以下操作：

```
curl https://api.paymill.de/v2/transactions \
-u b94a7550bd908877cbae5d3cf0dc4b74: \
-d "amount=4200" \
-d "currency=EUR" \
-d "token=098f6bcd4621d373cade4e832627b4f6" \
-d "description=Test Transaction" 
```

我相信 -u 是验证我的请求的 Paymill 密钥，尽管此处的文档不清楚。

我已经查看了 WWW::Curl::Easy、Net:Curl::Easy 和 LWP::Curl，但是这些方法的文档中没有任何内容让我很清楚如何形成上面的查询。

我已经尝试过（并不真正相信它会起作用），只是如上所述在 perl 中编码一个字符串；

```
my $request = '-u ' . $private_key . " ";
foreach my $key (keys %$params_in) {
    $request .= '-d "' . lc($key) .'='.$params_in->{$key} . ' ';
} 
```

然后将 $request 传递给我的 curl 尝试，如下所示；

```
my $curl = WWW::Curl::Easy->new;
$curl->setopt(WWW::Curl::Easy::CURLOPT_HEADER(), 1);
$curl->setopt(WWW::Curl::Easy::CURLOPT_URL(), $paymill_server);
$curl->setopt(WWW::Curl::Easy::CURLOPT_POST(), 1);
$curl->setopt(WWW::Curl::Easy::CURLOPT_POSTFIELDS(), $request);

my $response;
$curl->setopt(WWW::Curl::Easy::CURLOPT_WRITEDATA(), \$response);

my $retcode = $curl->perform; 
```

但是，由于访问被拒绝错误而失败，我认为这是因为 Paymill 没有找到我的密钥，因为我弄乱了 Curl（假设 -u 应该是 secret_key）。

我觉得我在这里遗漏了一些明显的东西。

有人可以指出我正确的方向，重新如何做到这一点？谢谢

更新

很好的答案，谢谢大家的帮助，它现在正在工作。我最终选择了 Matthias 的解决方案，最终完成交易的完整解决方案如下所示；

```
use LWP::UserAgent;
use MIME::Base64;
use JSON::XS;

my $ua = LWP::UserAgent->new;
$ua->default_header(Authorization => "Basic " . encode_base64(private_key));

my $response = $ua->post(https://api.paymill.de:443/v2/transactions , $params );
if ( $response->is_success ) {
    my $obj = eval { decode_json $response->content } || {};
    etc
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T09:38:31.563

与其他答案一样，建议最好的方法是使用 LWP::UserAgent 来执行请求。

**编辑：**由于 PAYMILL 一段时间以来一直在发送挑战响应，因此我更新了代码。

~~由于 Paymill 不符合 RFC 2616，第 14.47 节（API 不发送质询响应）LWP::UserAgent 和类似的在发送带有凭据的第二个请求时失败。解决方案是“强制” LWP::UserAgent 通过将凭据添加为标头来发送第一个请求的凭据：~~

```
use LWP::UserAgent;
use MIME::Base64;

my $ua = LWP::UserAgent->new;
# Use the following line no longer:
# $ua->default_header(Authorization => "Basic " . encode_base64("your PRIVATE key"))
$ua->credentials('api.paymill.de:443', '', 'YOUR PRIVATE KEY');

# Dumping only
use Data::Dumper;
print Dumper($ua->get("https://api.paymill.de:443/v2/clients")); 
```

披露：我在 Paymill 工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:55:21.923

我不知道用户/密码和您的令牌的身份验证部分是否正确，因为我不知道“领域”应该是什么。不过，还是试试[LWP](http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP/UserAgent.pm)吧。不是我不喜欢Curl，我只是不知道，但我确实知道LWP。

```
use strict; use warnings;
use LWP::UserAgent;
my $ua = LWP::UserAgent->new;
$ua->credentials(
  'api.paymill.de:80',
  'Realm?',
  'b94a7550bd908877cbae5d3cf0dc4b74'
);
my $response = $ua->post(
  ' https://api.paymill.de/v2/transactions',
  {
    amount      => "4200",
    currency    => "EUR",
    token       => "098f6bcd4621d373cade4e832627b4f6",
    description => "Test Transaction",
  }
);
if ( $response->is_success ) {
  print $response->decoded_content;    # or whatever
} else {
  die $response->status_line;
} 
```

* * *

**编辑**：我在[Paymill 文档](https://www.paymill.com/de-de/dokumentation/referenz/api-referenz/index.html)中阅读了一些内容。它说：

> 验证
> 
> 例子
> 
> % 卷曲[https://api.paymill.de/v2/clients](https://api.paymill.de/v2/clients) \ -u e73fa5e7b87620585b5ea5d73c4d23bb：
> 
> 要在 Paymill API 上进行身份验证，您需要测试或真实账户的私钥。您必须使用 http 基本访问身份验证。您的密钥必须设置为用户名。不需要密码，您也不必插入密码。但是，如果您愿意，可以随意插入任意字符串。
> 
> 笔记
> 
> ```
> Please keep your private keys secure and don’t pass them to anybody. These private keys have extreme secure information for 
> ```
> 
> 处理您商店的交易。您的所有请求都必须通过 https 进行。将以另一种方式发出的请求将失败。这是出于提交数据的安全原因。

还有一个指向[http://en.wikipedia.org/wiki/HTTP_Secure](http://en.wikipedia.org/wiki/HTTP_Secure)`-u`的链接，我相信它几乎可以清除这部分内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T17:24:39.470

您可以使用[LWP::Protocol::Net::Curl](https://metacpan.org/module/LWP%3a%3aProtocol%3a%3aNet%3a%3aCurl)将 LWP 和 libcurl*有机地*集成在一起。检查这个：

```
#!/usr/bin/env perl
use common::sense;

use Data::Printer;
use JSON::XS;
use LWP::Protocol::Net::Curl verbose => 1;
use LWP::UserAgent;

# create user agent
my $ua = LWP::UserAgent->new;

# POST request
my $res = $ua->post(
    'https://b94a7550bd908877cbae5d3cf0dc4b74:@api.paymill.de/v2/transactions',
    'Accept-Encoding' => 'gzip',
    Content => {
        amount      => 4200,
        currency    => 'EUR',
        token       => '098f6bcd4621d373cade4e832627b4f6',
        description => 'Test Transaction',
    },
);

# parse received data
my $obj = eval { decode_json $res->content } // {};

# output
p $obj; 
```

输出：

```
* About to connect() to api.paymill.de port 443 (#0)
*   Trying 62.138.241.3...
* Connected to api.paymill.de (62.138.241.3) port 443 (#0)
* Connected to api.paymill.de (62.138.241.3) port 443 (#0)
* successfully set certificate verify locations:
*   CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: none
* SSL connection using RC4-SHA
* Server certificate:
*    subject: OU=Domain Control Validated; OU=PositiveSSL Wildcard; CN=*.paymill.de
*    start date: 2012-07
*    expire date: 2013-10
*    subjectAltName: api.paymill.de matched
*    issuer: C=GB; S
*    SSL certificate verify ok.
* Server auth using Basic with user 'b94a7550bd908877cbae5d3cf0dc4b74'
> POST /v2/transactions HTTP/1.1
Authorization: Basic Yjk0YTc1NTBiZDkwODg3N2NiYWU1ZDNjZjBkYzRiNzQ6
User-Agent: libwww-perl/6.04 libcurl/7.28.0 OpenSSL/1.0.0e zlib/1.2.3.4 libidn/1.22 libssh2/1.2.8
Host: api.paymill.de
Accept: */*
Accept-Encoding: gzip
Content-Length: 92
Content-Type: application/x-www-form-urlencoded

* upload completely sent off: 92 out of 92 bytes
< HTTP/1.1 200 OK
< Server: nginx
< Date: Wed, 09 Jan 2013 17:22:54 GMT
< Content-Type: application/json
< Transfer-Encoding: chunked
< Connection: close
< Set-Cookie: PHPSESSID=rmdo5a8c6u107gma28lotmmn24; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
< Pragma: no-cache
< X-Server: hrtt-frn5-de13
< 
* Closing connection #0
Printing in line 28 of paymill.pl:
\ {
    data   {
        amount             4200,
        client             {
            created_at     1357752174,
            description    undef,
            email          undef,
            id             "client_85cb0bfc837f31c81015",
            payment        [],
            subscription   undef,
            updated_at     1357752174
        },
        created_at         1357752174,
        currency           "EUR",
        description        "Test Transaction",
        id                 "tran_c672daa0538e2a04e919",
        livemode           false,
        origin_amount      4200,
        payment            {
            card_holder    undef,
            card_type      "visa",
            client         "client_85cb0bfc837f31c81015",
            country        undef,
            created_at     1357752174,
            expire_month   12,
            expire_year    2014,
            id             "pay_2732689f44928301c769",
            last4          1111,
            type           "creditcard",
            updated_at     1357752174
        },
        preauthorization   undef,
        refunds            undef,
        status             "closed",
        updated_at         1357752174
    },
    mode   "test"
} 
```

# ruby-on-rails - 从另一个应用程序调用 rails 应用程序

> ID：14238294
> 
> 赞同：0
> 
> 时间：2013-01-09T15:09:45.520
> 
> 标签：ruby-on-rails, ruby, api, web-applications, rack

我有一个具有一些模型和服务的应用程序。我需要来自另一个目录的另一个应用程序的那些实体。我怎样才能分享它们？我不想通过互联网使用公共 API 或 REST 接口，而只是在本地调用服务。我可以用 Rack 配置它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:28:28.370

如果您想共享代码，那么 rails 方法是将它们制作为`gems`并在您的应用程序中使用它们。

如果您使用的是 rails > 3 ，最好的方法是通过[rails 引擎](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)来完成，它易于学习且更优雅。

但最简单**且不推荐**的方法是将您的方法作为 ruby​​ 模块/类，然后在您的每个项目中使用（通过将它们放在您的 lib 目录中或一些之前）

高温高压

# ruby-on-rails - 使用carrierwave限制文件上传量

> ID：14238297
> 
> 赞同：1
> 
> 时间：2013-01-09T15:09:52.520
> 
> 标签：ruby-on-rails, file-upload, carrierwave

我有一个用户模型和一个带有载波的图像模型。

我想限制用户可以上传的图片数量，因为我有第二种形式，用户可以在其中上传图片，我希望他只能上传 3 张图片。有没有一个优雅的解决方案？还是我必须制作一个自定义验证器来计算用户的图像数量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T15:15:53.973

I guess your model is somehow similar to that :

```
class User
  has_many :photos
end

class Photo
  belongs_to :user
  mount_uploader :file, PhotoUploader
end 
```

So that means you could simply add a validation on the user on how many photos it can have. You can see that post : [Limit number of objects in has_many association](https://stackoverflow.com/q/2263267/919641)

You would end up with something like that in your photo model :

```
LIMIT = 3

validate do |record|
  record.validate_photo_quota
end

def validate_photo_quota
  return unless self.user
  if self.user.photos(:reload).count >= LIMIT
    errors.add(:base, :exceeded_quota)
  end
end 
```

# actionscript-3 - 为什么 AS3 垃圾收集器不捡起这个？

> ID：14238300
> 
> 赞同：1
> 
> 时间：2013-01-09T15:09:58.027
> 
> 标签：actionscript-3, flash, apache-flex, memory-management, garbage-collection

我开始遇到严重的问题，垃圾收集器部分处理了这个问题，但仍然让大部分对象在没有引用的情况下在后台启动并运行：

```
m_win = new MyWindow(arr);
m_win.open();
m_win.addEventListener(Event.CLOSE, onClose);

.
.
.

private function onClose(pEvent:Event):void
{
    m_win.removeEventListener(Event.CLOSE, onClose);
    m_win.close();
    m_win = null;
    // RAM usage for m_win is only reduced about 20-40%.  I can see the garbage
    // collector has run as a result of that reduction, but the other 60-80% are
    // a serious problem.
} 
```

这是我添加到 m_win 的唯一事件侦听器，也是我的代码对 m_win 的唯一引用。MyWindow 基本上是一个独立的 AIR 项目（尽管它嵌套在与其自己的 Main 类不同的类中以使其适应这种情况；否则相同）。MyWindow 具有 NetConnections、NetStreams 等，它们在垃圾收集器运行后仍保持活动状态。

因此，我尝试的第一件事就是进入并断开其 NetConnections 和 NetStreams。但这没有用。然后我遇到了这些博客：

[http://tomgabob.blogspot.com/2009/11/as3-memory-management.html](http://tomgabob.blogspot.com/2009/11/as3-memory-management.html)

我在另一个遇到同样问题的人的另一个博客中找到了该链接：假设如果 AS3 的垃圾收集器找到一个达到临界质量的“孤岛”（根据我的经验，可能是 30 MB？），它只是拒绝用它做任何事情。因此，我接受了这个人的建议，至少尝试将所有引用归零，删除每个事件侦听器，在必要时调用 removeAllElements() 和/或 removeChildren()，并在整个 MyWindow 中手动调用“析构函数”函数，唯一的例外是没有真正用于 m_win 的 Main 类。

它没有用，除非我搞砸了。但即使我不遗余力地留下几块石头，它仍然应该足以破坏岛屿以使其工作。我一直在研究此问题的其他原因和解决方法，并尝试了其他方法（例如手动告诉垃圾收集器运行），但没有什么能正确清理混乱。唯一有效的方法是在退出时断开 NetConnection/NetStream 的连接，但仍有 25-30 MB 的空间未被收集。

如何解决这个问题？谢谢！

编辑：鉴于 Adob​​e 在[http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/garbage-collection.html](http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/garbage-collection.html)上的声明：

```
"GCRoots are never garbage collected." 
```

和：

```
"The MMgc is considered a conservative collector for mark/sweep. The MMgc can't
tell if certain values in memory are object pointers (memory addresses) or a
numeric value. In order to prevent accidentally collecting objects the values
may point to, the MMgc assumes that every value could be a pointer. Therefore,
some objects that are not really being pointed to will never be collected and
will be considered a memory leak. Although you want to minimize memory leaks to
optimize performance, the occasional leaks that result from conservative GC tend
to be random, not to grow over time, and have much less of an impact on an
application's performance than leaks caused by developers." 
```

在这一点上，我可以看到这与“大岛”理论之间存在某种联系——假设该理论是正确的，但我不是。Adobe 在这一点上几乎承认，至少在第二个声明中，至少存在与孤儿被跳过的良性问题。他们表现得好像没什么大不了的，但是就这样离开它并假装什么都不是，这可能只是典型的 Adob​​e 邋遢。如果他们提到的那些罕见的遗漏孤儿之一在其中有一个大的、完全活动的对象层次结构怎么办？如果您不能完全防止那里的内存泄漏，我绝对可以看到在丢失引用之前如何通过和执行诸如在整个层次结构中清空引用之类的事情通常会做很多事情来最大程度地减少内存泄漏量.

我的想法是垃圾收集器通常仍然能够清除该岛内的大部分东西，而不是该岛本身。此外，其中一些据称能够真正使用“大岛”理论的人所看到的可能是 Adob​​e 所承认的一些“不太良性”的表现。不过，这仍然是一个假设。

编辑：在我再次检查析构函数并解决了几个问题后，我确实看到了显着的改进。我留下这个问题并继续下去的原因是，不仅有机会我仍然错过了我可以做的其他事情来释放内存，而且我到目前为止使用的主要解释不是官方的或经过验证的.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:43:37.713

试着打电话

```
try {
new LocalConnection().connect('foo');
new LocalConnection().connect('foo');
} catch (e:*) {}
// the GC will perform a full mark/sweep on the second call. 
```

强制垃圾收集。这是无证的，但有效.. 归功于 Grant Skinner，他在他的[博客上解释了更多](http://gskinner.com/blog/archives/2006/06/as3_resource_ma.html)

# c# - asp.net mvc 可以自动为 js 代码生成时间戳吗？

> ID：14238306
> 
> 赞同：1
> 
> 时间：2013-01-09T15:10:15.610
> 
> 标签：c#, javascript, asp.net-mvc, visual-studio-2012

我们有一个问题：每当我们部署新版本时

必须在每个浏览器上清除缓存以刷新 js 和 css 代码。

是否有任何内置工具可以在 js 名称中生成唯一的时间戳？

**更新1**

我试图捆绑我的 js，但没有自动生成图章

捆绑：

```
 `bundles.Add(new ScriptBundle("~/bundles/abTestingAdmin").Include( "~/Scripts/abTestingAdmin.js"));` 
```

aspx：

`<script src="<%: Url.Content("~/bundles/abTestingAdmin") %>" type="text/javascript"></script>`

从浏览器控制台

`<script src="/bundles/abTestingAdmin" type="text/javascript"></script>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:13:32.463

如果您使用 Bundles 注册您的 CSS 文件和 JS 文件（[此处为完整示例](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)），两种类型的文件都将被缩小、组合，并且在您部署应用程序时将自动添加唯一的 URL 参数，以便浏览器再次抓取它.

# google-chrome - Chrome 本地存储限制

> ID：14238313
> 
> 赞同：1
> 
> 时间：2013-01-09T15:10:30.690
> 
> 标签：google-chrome, local-storage

据我了解并能够测试，到目前为止，Chrome（Windows 上的 v 19）将本地存储“限制”为 2.49 Mb，这是我自己验证的数字。但是，我必须处理的存储场景相当复杂。我有一个类似 IDE 的界面，当用户将鼠标悬停在相关内容上时，我会从服务器获取上下文相关的帮助。完成此操作后，我会将帮助文本（HTML 通常在 120 到 1024 个字符之间）存储到 localStorage。到目前为止没有问题。但是，IDE 是一个非常大且复杂的IDE，并且在适当的时候localStorage 将包含100 甚至1000 键。我不清楚的是 - 相当基本的 localStorage 限制测试的结果（我自己的和我在网上遇到的）仍然有效 - 测试是通过在一个键下存储一个长字符字符串来完成的与我上面描述的有很大不同。我假设至少存在与密钥存储本身消耗的空间相关的开销。

# svn - Subversion：将 repo 与已下载的项目同步。（尽量避免重新下载）

> ID：14238314
> 
> 赞同：2
> 
> 时间：2013-01-09T15:10:31.993
> 
> 标签：svn

我的机器上已经有一个`svn`项目的副本，并希望将其连接到`svn`repo 并避免重新下载。

我试过：

```
svn co --depth empty 
```

并将已经下载的文件复制到其中，但这不起作用。

有没有办法做到这一点，还是我真的必须删除我的本地副本并`svn`结帐并重新下载所有内容？

更多细节：有 2 台电脑和 1 个 repo，都有良好的工作副本。1 台计算机链接到 svn 并具有所有 .svn 元数据，并且 svn 状态返回最新。另一台计算机没有这个，我想将它链接到存储库而不重新下载所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:34:41.710

我会建议您从 repo 浏览器再次签出该项目，但您可以试试这个。我假设您的工作区中有一个现有项目，并且该项目已经是一个有效的工作副本。选择要连接SVN的项目，右键选择`Team > Share Project`。

![在此处输入图像描述](../Images/28475333dff5842ec81cec5686b82549.png)

这将开始`Share Project wizard`. 选择`SVN`作为存储库类型并单击`Next`。

![在此处输入图像描述](../Images/be09e3e36f7577c3818f9b3c9166986a.png)

该向导将检查`.svn metadata`您最初选择共享的项目根目录中的有效文件夹。如果它找到这些文件夹，那么您将看到一个类似上面的屏幕。如果您没有看到此屏幕，而是看到当这是一个新项目时您会看到的屏幕，那么您应该取消该向导。这意味着向导不会将其识别为现有的工作副本。如果您继续，向导将把它当作一个新项目来导入到您的存储库中。否则，假设您确实看到了上面的屏幕，只需单击 Finish 将项目与 SVN 连接。该向导将通过启动提交对话框来提交任何本地修改的文件来完成该过程。如果此时您不想提交任何内容，您可以取消对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:56:17.040

> 将已经下载的文件复制到其中，但这不起作用。

很抱歉，但“……那不起作用”不是对问题的描述。您必须在表格中提供更具体的细节

1.  我做了...
2.  我期望 ...
3.  我有 ...

co --depth "empty" + copy + update 必须为您工作，并附上一些注释

*   `svn co --depth empty URL`是完全正确的。您有空的 WC，链接到您的存储库，只有基本目录已签出
*   将项目的树复制到您创建的 WC
*   更新您的工作副本以将您的树与存储库树同步。因为您想要更新**树**，所以您必须使用选项重新定义更新和后续操作的深度`--set-depth`：`svn up --set-depth infinity`会很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:32:26.017

我想你已经通过 svn 下载了项目，例如从命令行：

```
 svn co <URL> . 
```

然后将自己指向项目的根目录并编写：

```
 svn update 
```

这会将您的[工作副本](http://www.cl.cam.ac.uk/local/web/subversion/introduction/workingdirectory.html)更新到最新版本。参考：

*   [svn结账](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.checkout.html)
*   [svn更新](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.update.html)

# java - 以编程方式访问 Netbeans 代码完成变量列表

> ID：14238322
> 
> 赞同：1
> 
> 时间：2013-01-09T15:10:52.220
> 
> 标签：java, c++, parsing, netbeans

我有一个适用于 Netbeans 的教育 Java 调色板模块，它可以帮助一年级学生学习编程的基础知识，而无需过多担心语法。

当学生从调色板中拖动一个项目时，他们会得到一个弹出窗口，允许他们填写要删除的代码的详细信息，例如变量名称或值。我`ComboBoxes`列出了文档中的所有变量。对于 Java 版本的调色板，我只是简单地使用**JavaParser**来获取变量、方法名称、类等的列表。

现在，我正在为 C++ 学生制作这个调色板的一个版本。这一次，我宁愿不使用 JavaParser、javacc、ANTLR 等，因为它看起来有点矫枉过正。当您点击 时，NetBeans 已经有了我需要的列表`Ctrl+space`，但我找不到从表单访问该列表的方法。Geertjan 有一个关于使用代码完成[的很棒的教程](https://blogs.oracle.com/geertjan/entry/jtextfield_code_completion)`JEditorPane`， 其中解决了实现你自己的代码完成提供程序的问题，这让我回到了原点。

[此页面](http://netbeans-org.1045718.n5.nabble.com/Question-about-generating-a-list-of-variables-in-use-at-a-certain-time-td2916905.html)表明 NetBeans 只是从调试器堆栈中获取变量列表。调试器 API 没有建议任何直接的方法来请求我可以识别的变量列表。

关于使用 Netbeans API 从 C++ 源文件中获取变量列表而不是求助于解析器的任何建议？

# angularjs - 带有过滤器覆盖值的Angularjs ngInit

> ID：14238323
> 
> 赞同：0
> 
> 时间：2013-01-09T15:10:55.087
> 
> 标签：angularjs

我试图初始化一个过滤值但没有成功。我将使用 partial/ng-include 所以变量的名称不能改变。

我使用 angularjs v1.0.2，我也尝试使用 v1.1.1

```
<script>
    function Ctrl($scope) {
      $scope.trains = [ 1, 2];
    }
</script>

<div ng-app ng-controller="Ctrl">
  <div ng-init="t = (trains | filter:1)">    
    {{ t }}
    {{ trains | filter:1 }}
  </div>
  <div ng-init="t = (trains | filter:2)">
    {{ t }}
    {{ trains | filter:2 }}
  </div>
</div> 
```

输出

```
[2] [1]
[2] [2] 
```

这是这个例子-> [http://jsfiddle.net/9q5D4/4/](http://jsfiddle.net/9q5D4/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:56:13.177

小心使用`ng-init`表达式（尤其是在初始化新变量时）。在您的示例中，您正在运行 2 个单独的表达式：`t = trains`和`filter:<X>`.

你应该使用`t = (trains | filter:<X>)`：

```
<div ng-app ng-controller="Ctrl">
  <div ng-init="t = (trains | filter:1)">    
    {{ t }}
    {{ trains | filter:1 }}
  </div>
  <div ng-init="tt = (trains | filter:2)">
    {{ tt }}
    {{ trains | filter:2 }}
  </div>
</div> 
```

**jsfiddle：http:** [//jsfiddle.net/9q5D4/2/](http://jsfiddle.net/9q5D4/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T06:23:41.953

不确定这是您想要的...但是您可以使用指令来结合 ng-init 和 ng-include：

HTML：

```
<div ng-app="myApp" ng-controller="Ctrl">    
    <my-directive field-name=1 train=2></my-directive>
    <my-directive field-name=2 train=17></my-directive>
</div> 
```

JS：

```
function Ctrl($scope, $filter) {
  $scope.trains = [1, 2]; 
}

angular.module("myApp", [])
.directive("myDirective", function() {
    return {
        restrict: "E",
        scope: 'isolate',
        template: "<div>{{exposeAttribute}} {{anotherOne}}</div>",
        controller: Ctrl,
        //templateUrl: "mytemplate.html",
        link: function(scope, element, attr) {
            scope.exposeAttribute = attr.fieldName;
            scope.anotherOne = attr.train;
        }
    };
}); 
```

输出是：

1 2

2 17

[http://jsfiddle.net/9q5D4/5/](http://jsfiddle.net/9q5D4/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:27:07.300

您是否尝试遍历 $scope.trains？在这种情况下，您应该使用 ng-repeat。我不相信过滤器适用于 ng-init。

[http://jsfiddle.net/gtmuh/](http://jsfiddle.net/gtmuh/)

```
<div ng-app ng-controller="Ctrl">
  <div ng-repeat="t in trains | filter:1">
    {{ t }}
    {{ trains | filter:1 }}
  </div>
  <div ng-repeat="t in trains | filter:2">
    {{ t }}
    {{ trains | filter:2 }}
  </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-06T21:16:56.763

我还没有检查出确切的原因或方式，但似乎在 ng-init 使其工作之前放置了一个 ng-if 属性。

在角度 1.2+ 上测试；

```
<div ng-app ng-controller="Ctrl">
    <div ng-init="t = (trains | filter:1)">    
        {{ t }}
        {{ trains | filter:1 }}
    </div>
    <div ng-if="true" ng-init="t = (trains | filter:2)">
    {{ t }}
    {{ trains | filter:2 }}
    </div>
</div> 
```

# sql - 查找导致视图中重复行的表

> ID：14238325
> 
> 赞同：1
> 
> 时间：2013-01-09T15:10:59.780
> 
> 标签：sql, sql-server

我在 sql server 中有一个视图，每个项目应该返回一行。一些项目有多个行。该视图有很多表连接，所以我不想在每个表上手动运行脚本来找出哪个导致重复。有没有一种快速的自动化方法来找出哪个表是问题表（也就是具有重复行的表）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:18:09.360

我发现最快的方法是：

1.  找一个例子欺骗
2.  复制查询
3.  注释掉所有连接
4.  一次添加一个连接，直到你得到另一行

无论连接是您开始被欺骗的地方，都是您拥有多条记录的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:53:36.697

My technique is to make a copy of the view and modify it to return every column from every table in the order of the FROM clause, with extra columns between with the table names as the column name (see example below). Then select a few rows and slowly scan to the right until you can find the table that does NOT have duplicate row data, and this is the one causing dupes.

```
SELECT
   TableA = '----------', TableA.*,
   TableB = '----------', TableB.*
FROM ... 
```

This is usually a very fast way to find out. The problem with commenting out joins is that then you have to comment out the matching columns in the select clause each time, too.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:46:27.607

I used a variation of SpectralGhost's technique to get this working even though neither method really solves the problem of avoiding the manual checking of each table for duplicate rows.
My variation was to use a divide and conquer method of commenting out the joins instead of commenting out each one individually. Due to the sheer number of joins this was much faster.

# sql - 学习数据（基础）建模 - 创业指导

> ID：14238330
> 
> 赞同：0
> 
> 时间：2013-01-09T15:11:08.477
> 
> 标签：sql, database, oracle, database-design

我想学习数据库建模。尽管我在 Oracle DB 上从事数据库应用程序开发工作（我知道业务模型和数据库模型之间的关系以及产品数据库如何支持业务模型），但我还没有接触过数据库建模。
如果您能指导我*从头开始学习数据库建模*，那您真是太好了。
我的做法是——

1.  我目前对数据建模基础知识的理解程度。
2.  学习基础知识并刷新已知项目。
3.  学习中间体，建立样本数据模型，体验挑战。

要遵循上述方法，我需要以下详细信息。-

1.  衡量我当前对数据建模（基础知识）的理解程度的工具。
2.  开始学习数据库建模的好地方。（一个网站/一本推荐的书/一个很好的视频教程（免费是最好的选择！））
3.  一个体面的数据模型练习可能带有答案/建议，以便我可以实现我的努力。

如果方法或细节不符合初学者的水平，请告诉我，并指导我。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:47:43.737

我建议你在斯坦福学习这门课程（免费，在线）：[http ://db.class2go.stanford.edu](http://db.class2go.stanford.edu)

coursera 上提供了类似的课程（免费，在线）：[https ://www.coursera.org/course/db](https://www.coursera.org/course/db)

您没有提到，您想学习数据库建模的目的是什么。如果数据仓库也在你的技能列表中，你应该考虑以下书籍：

*   敏捷数据仓库设计：协作维度建模，从白板到星型模式
*   数据仓库工具包：维度建模完整指南（第二版）
*   Star Schema 完整参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:09:30.117

[这](http://www.sqlcourse.com/index.html)是一个让您入门的好网站

在你对数据库有一个基本的了解之后，我建议你去 SQL Zoo 亲自动手：

[http://sqlzoo.net/](http://sqlzoo.net/)

# facebook - 我可以汇总 Facebook 点赞、推文和 Google Plus 吗？

> ID：14238332
> 
> 赞同：2
> 
> 时间：2013-01-09T15:11:10.367
> 
> 标签：facebook, facebook-like, google-plus, tweets

我正在我的新网站cabinethardware.org 上构建一个投票应用程序。我希望以这样一种方式进行投票，即当有人投票支持一个项目（获得 1000 美元的重建赠款）时，鼓励他们通过社交网络插入该项目。我的程序员在使用该应用程序时遇到了困难，我想到一种方法是在网站上放置点赞、推文和 G+ 按钮并将它们添加到一起。因此，如果一个项目获得 24 个赞、12 个推文和 18 个 G+，那么它将获得 64 票。如果有人对所有三个引擎都投票，我不会打扰。

在一个项目有资格获得资助之前，它必须获得 100 票。我的问题是，有没有一种方法可以汇总点赞、推文和 G+，这样我就可以在后端查看每个项目有多少票，而无需去每个项目并手动添加它们？另外，我想向客户显示合并后的总数。

有谁知道结合这三个计数的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:57:02.190

对于 Google+，您只需对将搜索 Google+ 公共数据的 Google+ API 执行一次 API 调用。[API explorer 中演示了如何](https://developers.google.com/apis-explorer/#p/plus/v1/plus.activities.search?query=http%253A%252F%252Fgusclass.com%252Fblog&_h=1&)搜索 Google+ 公共数据。

帖子回复包含有关转发和 +1 的信息：

```
 "verb": "post",
   "object": {
   "objectType": "note",
    "content": "Setting up a server-side flow project that accesses Google+ data using the .NET stack can be a little tricky, I walk you through it in this blog post.",
    "url": "https://plus.google.com/109716647623830091721/posts/g8LjdGAXdDc",
    "replies": {
     "totalItems": 0,
     "selfLink": "https://www.googleapis.com/plus/v1/activities/z125srm50lf1slxrd04cfftatqyoglnoqio/comments"
    },
    "plusoners": {
    "totalItems": 6,
    "selfLink": "https://www.googleapis.com/plus/v1/activities/z125srm50lf1slxrd04cfftatqyoglnoqio/people/plusoners"
    },
    "resharers": {
     "totalItems": 0,
     "selfLink": "https://www.googleapis.com/plus/v1/activities/z125srm50lf1slxrd04cfftatqyoglnoqio/people/resharers"
    }, 
```

对于 Facebook，您可以使用 Pages API 来计算您页面的点赞数，您可以[在他们的 API explorer 中进行试验](https://developers.facebook.com/tools/explorer/?method=GET&path=19292868552)。

以下数据显示了他们的响应数据：

```
{
  "about": "Build and distribute amazing social apps on Facebook.    https://developers.facebook.com/ ", 
  "company_overview": "Facebook Platform enables anyone to build social apps on Facebook, mobile, and the web.\n\n", 
  "is_published": true, 
  "talking_about_count": 39241, 
  "username": "FacebookDevelopers", 
  "website": "http://developers.facebook.com", 
  "were_here_count": 0, 
  "category": "Product/service", 
  "id": "19292868552", 
  "name": "Facebook Developers", 
  "link": "https://www.facebook.com/FacebookDevelopers", 
  "likes": 952596, 
  "cover": {
    "cover_id": "10151121467948553", 
    "source": "https://fbcdn-sphotos-f-a.akamaihd.net/hphotos-ak-ash4/s720x720/299374_10151121467948553_45631061_n.png", 
    "offset_y": 0
  }
} 
```

喜欢只是响应数据中的一个成员。

对于 twitter，您可以使用[他们的搜索 API](https://dev.twitter.com/docs/api/1.1/get/search/tweets)查询用户的提及，并将用户的搜索字符串作为@user 传递。结果中的对象计数将成为您的提及计数。响应数据有点太多，无法在此处粘贴，但这是[使用其 API 的示例查询](http://search.twitter.com/search.json?q=@stackoverflow)。

# exception - gwt、rpc 服务、StatusCodeException 和无可用日志

> ID：14238334
> 
> 赞同：2
> 
> 时间：2013-01-09T15:11:13.937
> 
> 标签：exception, gwt, service, rpc

对不起，如果我的英语不好。

我在调用我的一项 GWT 服务时遇到问题。在客户端，我有以下错误。

```
 [ERROR] com.google.gwt.user.client.rpc.StatusCodeException: 500 The call failed on the server; see server log for details
    [ERROR]     at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:209)
    [ERROR]     at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    [ERROR]     at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
... 
```

不幸的是，我在服务器日志中找不到与此错误相关的任何信息。我处于开发模式，我在码头唯一能看到的是

```
 [ERROR] 500 - POST /my/maping (127.0.0.1) 57 bytes 
```

但是，我知道我的服务实现被调用并且它返回一个结果而不抛出任何异常（因为我在返回之前使用日志......）。

我已经看到这个问题可能是一个序列化问题，但我真的看不出我错过了使我的对象可序列化的地方，（另外，gwt 编译器通常会在某些东西不可序列化时告诉我）。

并且我的/映射应该被精细定义，因为它以前可以工作，而且我很确定我没有修改任何与此相关的东西......

最后，我没有找到任何有趣的答案来解决我的问题。如果您有任何想法，请提前感谢您的帮助。

ps：我用的是gwt 2.5.0-rc2。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T15:20:16.193

这个问题主要与忘记实现isSerializable或Serializable接口的类有关。还要检查该类中的所有子类是否也实现 isSerializable 或 Serializable 接口。

然后验证所有类都有一个默认的无参数构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-03T12:14:36.317

如果您使用 JPA 并且类关系设置不正确，则会抛出一般 500 而没有特定错误消息

# progressdialog - 可在进度对话框崩溃时运行

> ID：14238335
> 
> 赞同：0
> 
> 时间：2013-01-09T15:11:17.320
> 
> 标签：progressdialog, runnable

下面的代码是错误的来源。我想要的是提出`loginDialog1`之后`loginRedirectCheck`是真的。但不是显示`progressDialog`，而是应用程序崩溃。我做错什么了吗？我该如何解决？谢谢你。

```
Runnable myRunnable = new Runnable() {
    @Override
    public void run() {
        while(loginCheck){
            if(loginRedirectCheck){
                loginCheck = false;
                new Handler().post(new Runnable() {
                    @Override
                    public void run() {
                        loginDialog1.show();
                    }
                });
            }
        }
    }
};

Thread myThread = new Thread(myRunnable);
myThread.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:09:21.543

> 我做错什么了吗？

是的，您正在创建`Handler`新线程的内部。这导致它的发布`Runnables`在那里执行，这导致`loginDialog1.show();`在新线程内部执行，但我猜它必须在 UI 线程中执行。

> 我该如何解决？

在您的 UI-Thread 中创建您的处理程序（例如，作为包含 的对象的实例变量`myThrad.start()`）和`post()`您的可运行到该处理程序而不是新创建的处理程序。

编辑：

我认为在您的情况下，最终的局部变量会很好：

```
final Handler myHandler = new Handler();

Runnable myRunnable = new Runnable() {
 [...]
                loginCheck = false;
                myHandler.post(new Runnable() {
                    @Override
 [...] 
```

# apache - .htaccess RewriteRule redirectinf /foo ，但不是 /fooofake

> ID：14238337
> 
> 赞同：0
> 
> 时间：2013-01-09T15:11:18.633
> 
> 标签：apache, .htaccess

当我使用以下规则声明时：

```
RewriteRule ^foo foo.php 
```

当我访问`localhost/foo`成功时显示`foo.php`，但是当我访问`localhost/foofake`or时`localhost/fooanythingelse`，它仍然显示 foo.php。如何防止这种情况并改为显示 404 错误页面？

PS：我知道[这个问题](https://stackoverflow.com/questions/11357304/why-does-htaccess-rewriterule-foo-also-match-foobar)但是我在这里尝试做的是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:13:49.713

You need to tell the server to only redirect an URL that doesn't have any text following the "foo", by adding an "end string" sign (`$`).

```
RewriteRule ^foo$ foo.php 
```

To make it also work for a trailing slash, add another line:

```
RewriteRule ^foo/$ foo.php 
```

# ruby - RSpec 模拟对象和（状态）变量

> ID：14238339
> 
> 赞同：1
> 
> 时间：2013-01-09T15:11:34.200
> 
> 标签：ruby, rspec, mocking, zeromq

我在 Ruby 应用程序中使用 ZMQ::Poller 并想编写一些 rspec 测试。由于轮询器提供了一个`register`-Method 来注册一个套接字，以后可以使用 访问它`readables`，所以我需要以某种方式将注册的套接字保存在我的模拟对象中。

我认为这种模式如下：

```
 @int_var = 'a'
  tst_mock = mock('Test')
  tst_mock.stub(:save_method) do |arg|
    @int_var = arg
  end
  tst_mock.stub(:return_method).and_return(@int_var)

  puts "##########"
  puts tst_mock.return_method
  tst_mock.save_method('b')
  puts tst_mock.return_method
  puts "##########" 
```

是否有机会实现将“b”存储在@int_arg 中？并稍后访问它以获得所需的输出：

```
##########
a
b
########## 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T19:05:10.610

您的存根每次都会`:return_method`返回，因为这是注册存根时传递给它的值。`a`

您希望它是动态的，因此将一个块传递给您的存根以返回正确的值。

```
@int_var = 'a'
tst_mock = mock('Test')
tst_mock.stub(:save_method) do |arg|
  @int_var = arg
end

# Passing a block, defer calculating of response until needed
tst_mock.stub(:return_method) do
  @int_var
end

puts "##########"
puts tst_mock.return_method
tst_mock.save_method('b')
puts tst_mock.return_method
puts "##########" 
```

将输出：

```
##########
a
b
########## 
```

# php - AngularJS 无法保存到数据库

> ID：14238346
> 
> 赞同：-2
> 
> 时间：2013-01-09T15:11:47.720
> 
> 标签：php, angularjs

我最近才开始使用 Angular，但我仍然遇到一些困难......

我似乎无法用我的角度数据更新我的数据库，但是我可以从我的数据库中获取数据。

这是我想尝试发布数据的代码。

```
$scope.submit = function(infographic){
    var data = {
            id: infographic.PK_InfoID,
            label: infographic.label,
            value: infographic.value
        };
        console.log(data);
       $http.put("dataout.php", data).success(function(data) {
                                console.log(data);
                                                });
   }; 
```

这是我使用的 PHP：

```
if(isset($_POST['id'])){

    $id = $_POST['id'];
    $label = $_POST['label'];
    $value = $_POST['value'];
    $query = "UPDATE tblInfo SET label = '".$label"', value = '".$value"' WHERE PK_InfoID = '$id'";
    mysql_query($query);
} 
```

有人能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:24:07.490

Angular 会将请求数据作为 json 编码的字符串发送。PHP 将无法解析该字符串，因此`$_POST`为空。

使用类似的东西：

```
<?php
$data = json_decode(file_get_contents('php://input'), true);
if (json_last_error() === JSON_ERROR_NONE) {
  // use $data instead of $_POST
  print_r($data);
} 
```

在接收方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:16:50.067

调试您的 PHP 文件：

```
file_put_contents('/tmp/postContents.txt', print_r($_POST, true)); 
```

这将告诉您您的 PHP 脚本是否接收到您期望的数据。

另外：确保您没有创建 SQL 注入安全问题。您应该转义这些值（$label 等）。谷歌“sql injection php”获取信息。

# html - 多行锚链接 CSS

> ID：14238353
> 
> 赞同：0
> 
> 时间：2013-01-09T15:12:27.817
> 
> 标签：html, css

我需要在其 div / li 和多行中创建一个锚点/链接。

这是一个 JSFiddle 来说明我的意思[http://jsfiddle.net/x5nPx/](http://jsfiddle.net/x5nPx/)

```
<div class="locked-content">
  <ul>
    <li>
      <a>www.example.com/39083904398980/93943430943098438094/test/example/long/link/here</a>
    </li>
  </ul>
</div>

<style>
  .locked-content {
    background: purple;
    width: 200px;
    height: 400px;
  }
</style> 
```

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:15:33.993

[小提琴](http://jsfiddle.net/svineet/x5nPx/1/)
您必须使用以下 css 属性-

```
word-wrap:break-word; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:19:05.410

```
-ms-word-break: break-all;
     word-break: break-all;

     /* Non standard for webkit */
     word-break: break-word;

-webkit-hyphens: auto;
   -moz-hyphens: auto;
        hyphens: auto; 
```

通过：[http ://css-tricks.com/snippets/css/prevent-long-urls-from-break-out-of-container/](http://css-tricks.com/snippets/css/prevent-long-urls-from-breaking-out-of-container/)

# mysql - 声纳、Maven、Jenkins、MySQL - 无法创建类“com.mysql.jdbc.Driver”的 JDBC 驱动程序

> ID：14238354
> 
> 赞同：2
> 
> 时间：2013-01-09T15:12:30.157
> 
> 标签：mysql, maven, jenkins, debian, sonarqube

# 情况

* * *

我们正在使用 MySQL 数据库、jenkins 和使用 maven 的构建环境运行声纳。

# 问题

* * *

执行 jenkins 作业时，它会中止并显示以下消息：

> [错误] 无法在项目 playground_eb 上执行目标 org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli)：无法执行声纳：无法连接到数据库：无法创建类 'com 的 JDBC 驱动程序.mysql.jdbc.Driver' 用于连接 URL 'http://192.168.1.220:3306'：没有合适的驱动程序

# 配置

* * *

## 服务器

* * *

192.168.1.220 (Debian 6.0.6):
  - 运行 Jenkins (@ port 8080)
  - Sonar (@ port 9000)
  - MySQL Database (@ port 3306)
192.168.1.221 (Windows 7):
  - 运行 Maven 和整个构建环境

## 配置

数据库在 sonar.properties 文件中配置 - 使用 localhost。Sonar 及其数据库是通过 jenkins Web 界面配置的 - 使用 IP。我猜这可能会导致错误，但在 sonar.properties 文件中配置 IP 会导致声纳不再启动。

# 完整的异常堆栈

* * *

```
    org.apache.maven.lifecycle.LifecycleExecutionException：无法在项目 playground_eb 上执行目标 org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli)：无法执行 Sonar
        在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:217）
        在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:153）
        在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        在 org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        在 org.apache.maven.lifecycle.internal.LifecycleStarter.execute（LifecycleStarter.java:161）
        在 org.apache.maven.DefaultMaven.doExecute（DefaultMaven.java:320）
        在 org.apache.maven.DefaultMaven.execute（DefaultMaven.java:156）
        在 org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        在 org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        在 org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        在 java.lang.reflect.Method.invoke(Method.java:601)
        在 org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced（Launcher.java:290）
        在 org.codehaus.plexus.classworlds.launcher.Launcher.launch（Launcher.java:230）
        在 org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        在 org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
    引起：org.apache.maven.plugin.MojoExecutionException：无法执行声纳
        在 org.codehaus.mojo.sonar.Bootstraper.executeMojo（Bootstraper.java:118）
        在 org.codehaus.mojo.sonar.Bootstraper.start（Bootstraper.java:65）
        在 org.codehaus.mojo.sonar.SonarMojo.execute（SonarMojo.java:90）
        在 org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo（DefaultBuildPluginManager.java:101）
        在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:209）
        ... 19 更多
    原因：java.lang.IllegalStateException：连接数据库失败
        在 org.sonar.core.persistence.DefaultDatabase.start（DefaultDatabase.java:74）
        在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        在 java.lang.reflect.Method.invoke(Method.java:601)
        在 org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:110)
        在 org.picocontainer.lifecycle.ReflectionLifecycleStrategy.start(ReflectionLifecycleStrategy.java:89)
        在 org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.start(AbstractInjectionFactory.java:84)
        在 org.picocontainer.behaviors.AbstractBehavior.start(AbstractBehavior.java:169)
        在 org.picocontainer.behaviors.Stored$RealComponentLifecycle.start(Stored.java:132)
        在 org.picocontainer.behaviors.Stored.start(Stored.java:110)
        在 org.picocontainer.DefaultPicoContainer.potentiallyStartAdapter(DefaultPicoContainer.java:1009)
        在 org.picocontainer.DefaultPicoContainer.startAdapters（DefaultPicoContainer.java:1002）
        在 org.picocontainer.DefaultPicoContainer.start（DefaultPicoContainer.java:760）
        在 org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:72)
        在 org.sonar.batch.bootstrap.Module.start（Module.java:67）
        在 org.sonar.batch.bootstrap.BootstrapModule.doStart（BootstrapModule.java:83）
        在 org.sonar.batch.bootstrap.Module.start（Module.java:68）
        在 org.sonar.batch.bootstrapper.Batch.startBatch(Batch.java:75)
        在 org.sonar.batch.bootstrapper.Batch.execute(Batch.java:60)
        在 org.sonar.maven3.SonarMojo.execute（SonarMojo.java:142）
        在 org.codehaus.mojo.sonar.Bootstraper.executeMojo（Bootstraper.java:113）
        ... 23 更多
    原因：org.apache.commons.dbcp.SQLNestedException：无法为连接 URL 'http://192.168.1.220:3306' 创建类 'com.mysql.jdbc.Driver' 的 JDBC 驱动程序
        在 org.apache.commons.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1452)
        在 org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)
        在 org.apache.commons.dbcp.BasicDataSource.getLogWriter(BasicDataSource.java:1098)
        在 org.apache.commons.dbcp.BasicDataSourceFactory.createDataSource(BasicDataSourceFactory.java:350)
        在 org.sonar.core.persistence.DefaultDatabase.initDatasource（DefaultDatabase.java:131）
        在 org.sonar.core.persistence.DefaultDatabase.start（DefaultDatabase.java:68）
        ... 44 更多
    原因：java.sql.SQLException：没有合适的驱动程序
        在 org.apache.commons.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1443)
        ... 49 更多

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:26:06.400

才发现问题。

在 Jenkins 中，Sonar 数据库 URL 设置为

```
http://192.168.1.221:3306/sonar 
```

现在我将它设置为整个 JDBC-URL（包括 jdbc: ...），就像在 sonar.properties 文件中一样......现在它可以工作了。

# c# - Formatting textbox c# and using it unformatted value

> ID：14238355
> 
> 赞同：0
> 
> 时间：2013-01-09T15:12:37.423
> 
> 标签：c#, .net, winforms, textbox, string-formatting

I´m using some textboxes to show totals, subtotals and discounts. I´m converting decimals to string to represent them in the textbox. Also, I would like to have the `"$"` at the beginning.

I have achieved this by using this:

```
tbx_total.Text = total.ToString("$ ##0.##"); 
```

Graphically, this is working great, but my big problem is that I need that textbox value to calculate other ones. Basically, I get a formatting error during runtime when I try to convert that textbox text to decimal. Obviously, this is due to the `ToString("$ ##0.##")` format. Is there any way to get the value without the format?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:22:27.290

一个简单的解决方案是：

```
tbx_total.Text = total.ToString("$ ##0.##");
tbx_total.Tag = total; 
```

然后使用`tbx_total.Tag`属性进一步使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:37:29.667

作为替代方案，您可以在读取值时执行此操作：

```
double value = 0;
if (!double.TryParse(tbx_total.Text.TrimStart(new char[] { '$', ' ' }), out value))
{
      //Ooops... not a valid number
} 
```

所以在这里你基本上删除了数字之前添加的'$'和空格，使你能够将它解析为双精度数。通过这种方式，您可以检查数字是否输入正确（前提是用户可以编辑文本框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:21:54.313

在读回它时，您可以使用 NumberStyles 进行解析以获得您想要的效果。NumberStyles 上有许多按位操作，所以我建议研究如何使用它们以获得更大的灵活性：

```
double.Parse(total, NumberStyles.Currency); 
```

此外，我更喜欢这种方式来格式化货币，但纯粹是风格上的。

```
String.Format("{0:C}", total); 
```

注意：来回解析确实会产生一些开销，因此根据数据量，将值卸载到对象并在再次需要十进制值时引用它可能更明智。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T15:47:35.503

我认为您应该将原始值（十进制）存储在一个`DataTable`或其他一些集合中，并使用这些值来计算您需要的值。

因此，您可以将十进制值格式化为您喜欢的任何格式，而无需担心如何从字符串转换回来。

# c++ - c++静态库中的模板方法

> ID：14238361
> 
> 赞同：1
> 
> 时间：2013-01-09T15:12:52.697
> 
> 标签：c++, templates

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

我在非模板类中编写了模板方法。这个项目是静态库。然后我编写了测试控制台应用程序并想使用这种方法。但是有编译错误（未解决的外部）。然后我问了谷歌并找到了论坛（[http://cboard.cprogramming.com/cplusplus-programming/108544-static-libraries-template-functions.html](http://cboard.cprogramming.com/cplusplus-programming/108544-static-libraries-template-functions.html)），其中'matsp'说：“整个模板实现需要在使用模板时的头文件。”。我确实像他说的那样，效果很好。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:14:31.973

因为这就是*C++*中模板的方式……它们的定义必须在使用的每个翻译单元中可见。

# mysql - 如何为所有行中所有字段中的所有表替换 MySQL 数据库中的字符串？

> ID：14238362
> 
> 赞同：8
> 
> 时间：2013-01-09T15:12:52.723
> 
> 标签：mysql, sql, replace, records

我有一个已迁移到另一台服务器的 Moodle 安装，我需要更改对旧域的多个引用。

**对于搜索所有表、所有字段和所有行**的给定数据库，如何将字符串替换为 MySQL 中的另一个字符串？

 **我不需要更改字段名称，只需更改值。

* * *

相关：[如何使用 mySQL replace() 替换多条记录中的字符串？](https://stackoverflow.com/questions/4271186/how-can-i-use-mysql-replace-to-replace-strings-in-multiple-records)

但是标记为答案的解决方案意味着我强烈键入表名，我需要将其触发到整个数据库中，而不是手动处理运行脚本 N 次的每个表。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T15:17:16.207

这可能看起来有点……丑陋。但也许只是将数据库转储到 sql/txt 文件，替换所有字符串并使用修改后的转储重新创建数据库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T15:31:13.820

您可以运行以下代码来创建执行更新所需的所有 udpate 语句。它将更新数据库中每个表中的每个字段。您需要运行此代码，并复制结果并运行它们。

警告 - 请务必在测试环境中进行测试。你不想要任何不愉快的惊喜。根据需要进行修改。

```
SELECT concat('UPDATE ', TABLE_NAME, ' SET ', COLUMN_NAME, ' = REPLACE(', COLUMN_NAME, ', ''STRING_TO_REPLACE'', ''REPLACE_STRING'')')
FROM INFORMATION_SCHEMA.COLUMNS c
WHERE TABLE_SCHEMA = 'YOUR_DATABASE_NAME'
      AND DATA_TYPE IN ('char', 'varchar')
; 
```

我将此限制为仅 char 和 varchar 字段。您可能需要添加其他数据类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T15:24:27.823

我会考虑查询`INFORMATION_SCHEMA.COLUMNS`和动态搜索列和表。尝试创建数据库中所有列和表的游标：

```
DECLARE col_names CURSOR FOR
SELECT column_name, table_name
FROM INFORMATION_SCHEMA.COLUMNS 
```

然后遍历每个表中的每个列并运行动态/准备的 sql 以更新字符串存在的位置。

这里有几个很好的帖子可以让你朝着正确的方向前进：

[https://stackoverflow.com/a/4951354/1073631](https://stackoverflow.com/a/4951354/1073631)

[https://stackoverflow.com/a/5728155/1073631](https://stackoverflow.com/a/5728155/1073631)**

# javascript - 单击 td 时，单击文本框

> ID：14238363
> 
> 赞同：0
> 
> 时间：2013-01-09T15:12:54.080
> 
> 标签：javascript, jquery, html, css

> **可能重复：**
> [jQuery - 单击 div 时的 on() 函数，但单击该 div 的子项时不会](https://stackoverflow.com/questions/14176099/jquery-on-function-when-a-div-is-clicked-but-not-when-a-child-of-that-div-i)

```
$(oTrPlanning).prev().children('td').each(function () {
    this.onclick = setCountClick;
}); 
```

点击 TD`setCountClick()`被调用，但 TD 还包含一个`Textbox`：

```
<td> 
    <input class="Input-InlineFilter" id="TextFirst"  type="text" value="">
</td> 
```

因此，当我开始在 上输入内容时`Textbox`，`setCountClick()`再次调用。我想在`setCountClick()`点击 TD 时打电话，但不是`Textbox`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:16:03.473

click 事件使 DOM 从`textbox`到`td`，一直到`body`. 如果您不希望`textbox`点击触发`td`点击处理程序，则需要停止冒泡：

```
$('#TextFirst').click(function (e) {
    e.stopPropogation();
}); 
```

[stopPropagation 的文档](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)

为了扩展，您应该利用这种冒泡只为所有s绑定**一个**事件处理程序：`td`

```
// bind one handler to all tds
$(oTrPlanning).prev().on('click', 'td', function (e) {
    // ensure the clicked element is a TD
    if (this.nodeName === 'TD') {
        setCountClick(e);
    }
}); 
```

[nodeName 的文档](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeName)

`this`请注意，如果您在 内部的任何地方都依赖操作员`setCountClick`，它可能不再按预期工作。要解决这个问题，您需要考虑使用`$.proxy`或`bind`调用时`setCountClick`：

```
setCountClick.bind(this)(e); 
```

`bind`返回一个新函数，该函数使用您传递的`this`参数作为新函数内部的参数。然后执行该函数并将常规参数传递给它。

[绑定文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:23:32.820

问题是事件是从孩子传播给父母的。你可以这样绑定：

```
$(oTrPlanning).prev().on('click', 'td', setCountClick); 
```

您的方法`setCountClick`将接收`event`作为它的第一个参数，您可以像这样检查它：

```
function setCountClick(event) {  
   // make sure the click was on a TD and not something else
   if ($(event.target).is('td')) {
        // you've hit a TD, run your code here
   }

} 
```

# android - 列表和地图标记点击

> ID：14238366
> 
> 赞同：2
> 
> 时间：2013-01-09T15:12:55.517
> 
> 标签：android, google-maps-markers, google-play-services

我有一个`Activity`，`ListFragment`左边有一个[`SupportMapFragment`](https://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html)，右边有一个。

List 和 Map 都由相同的数据支持。地图上数据的可视化表示是[`Markers`](https://developer.android.com/reference/com/google/android/gms/maps/model/Marker.html).

我希望能够单击列表项**或标记****，并在****其他视觉表示**中获取相应的项。

**框架和我的数据的限制是：**

1.  Marker 类是最终的，并且 Marker 的 id 没有修饰符。这就是为什么我不能使用最简单的方法。

2.  > “重要的是不要持有超出视图生命周期的对象（例如标记）。否则会导致内存泄漏，因为视图无法释放。” （参见[SupportMapFragment](https://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html)）

3.  标记的标题可以出现多次。这就是为什么昂贵的字符串比较不是我可以采用的方法。

是否有人对此问题有有效的解决方案，或者可以提供正确方向的推动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:45:22.047

如果您希望能够注册点击标记，则需要覆盖[`InfoWindowAdapter`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.InfoWindowAdapter).

您可以为标记的标题和片段提供唯一信息，并以这种样式实现接口的方法：

```
@Override
public View getInfoWindow(Marker marker) {
  // do nothing here in order to obtain the original info window border.
  return null;
}

@Override
public View getInfoContents(Marker marker) {
  // Create your own view here. Obtain the unique information stored
  //  in title / snippet of the current marker.
  return createdView;
} 
```

现在您可以设置[`OnInfoWindowClickListener`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnInfoWindowClickListener)并使用存储在那里的唯一信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T23:56:56.007

这是另一种选择。最新的 API 提供了[OnMarkerClickListener](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnMarkerClickListener)接口。

[https://developers.google.com/maps/documentation/android/marker#marker_click_events](https://developers.google.com/maps/documentation/android/marker#marker_click_events)

# windows-8 - WPF 桌面应用程序中的 Windows 8 漫游存储？

> ID：14238384
> 
> 赞同：0
> 
> 时间：2013-01-09T15:13:40.850
> 
> 标签：windows-8, storage, windows-store-apps, roaming

我计划创建一个 Windows 8 应用商店应用程序，但不情愿地切换到桌面应用程序。我发现 Windows 8 商店应用程序无法检测到第二个屏幕，这对我来说是必要的。

目的仍然是尽可能地模仿 Windows Store App 的行为。部分是为了教育自己，同时也是为了使用现代漂亮的设计。我使用具有非常相似设计的 WPF（应用栏、导航栏、快速等待异步模式等）

现在我到了需要存储设置的地方！我真的很想使用通过 Microsoft Live 登录提供的非常方便的中央存储。即使我没有 Windows 应用商店应用程序，这可能吗？客户端可能是 Windows 7 或 Windows 8。我可以让用户登录 Microsoft Live 并使用这些设施吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T17:03:32.787

除了 Windows 应用商店应用程序之外，桌面应用程序还提供了许多 WinRT API。 [Windows.Storage.ApplicationData](http://msdn.microsoft.com/en-US/library/windows/apps/windows.storage.applicationdata)似乎支持桌面应用程序。查看文档中的“要求”部分：

> 支持的最低客户端：Windows 8 [Windows Store 应用程序、***桌面应用程序***]

英特尔的某个人发布了有关[如何在桌面应用程序中使用 WinRT API 的](http://software.intel.com/en-us/articles/using-winrt-apis-from-desktop-applications)帖子。该帖子来自 2012 年 9 月，屏幕截图似乎是针对旧版本的 MSDN 文档。要时刻铭记在心。

Microsoft 的 Dave Bennett 有一篇有用的博客文章，它将向您介绍[漫游应用程序数据](http://blogs.msdn.com/b/windowsappdev/archive/2012/07/17/roaming-your-app-data.aspx)。

我可能误解了你，但我认为我上面提到的是你想要的，而不是使用[Live Connect APIs](http://msdn.microsoft.com/en-us/library/live/hh533665.aspx)。

# networking - Is it more effective to obtain real-time sensor information using TCP or UDP

> ID：14238385
> 
> 赞同：0
> 
> 时间：2013-01-09T15:13:42.550
> 
> 标签：networking, tcp, udp, sensors, ethernet

I am working on a project which requires sensor information to be obtained from multiple embedded devices so that it may be used by a master machine. The master currently has classes which contain backing fields for each sensor. Data is continuously read on each sensor and a packet is then written and sent to the master to update that sensor's backing field. I have little experience with TCP/UDP so I am not sure which protocol would work better with this setup.

I am currently using TCP to transfer the data because I am worried about data on our rotary encoders being received out of order. Since my experience with this topic is limited, I am not sure if this is this a valid concern.

Does anyone with experience in this area know any reasons that I should prefer one approach over the other?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:22:46.493

*   你有多在乎知道一个数据包已经送达了？
*   您有多在乎是否知道交付的数据包是 100% 正确的？
*   您有多在意数据包传递的顺序？
*   您对当前连接的对等点有多关心？

如果答案是**“我很在乎”**，那么您更愿意继续使用 TCP，因为它可以确保所有四点。

对应的是，如果您管理小数据包，UDP 可以更轻量级和更快地处理。

无论如何，选择这个或那个并不容易。试试看嘛。

并阅读这个简短的解释：[http ://www.cyberciti.biz/faq/key-differences-between-tcp-and-udp-protocols/](http://www.cyberciti.biz/faq/key-differences-between-tcp-and-udp-protocols/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:19:38.637

我不是专家，但似乎这可能是相关的：

你可以丢失数据吗？

如果是这样，请使用 TCP。错误恢复是自动的。

如果没有，请使用 UDP。丢失的数据包不会重新发送。我也相信不能保证在这里订购。

# json - JqG rid 尝试将大数据从服务器发送到网格，但在使用 JSON JavaScriptSerializer 进行序列化或反序列化期间出现错误

> ID：14238388
> 
> 赞同：0
> 
> 时间：2013-01-09T15:13:48.047
> 
> 标签：json, model-view-controller, serialization, jqgrid

我有一个问题，我从服务器接收大量数据，然后将其转换为 Json 格式，然后在 JqGrid 中查看。它适用于少量数据，例如 200 行，但是当对 10000 行执行此操作时，它会引发以下错误

System.InvalidOperationException：使用 JSON JavaScriptSerializer 进行序列化或反序列化期间出错。字符串长度超过 maxJsonLength 属性设置的值

我尝试使用 javascript 序列化程序并将其设置为 maxjsonLenght = int32.MaxValue 但仍然没有运气

以下是我的代码，请给我一些建议，例如如何解决这个问题？谢谢大家！

网格配置

```
 public JqGridConfig(String db, String jobGroup, String jobName, String detailTable,       String filterBatchControl, String filterDate, String filterTime, int page)
    {
        var entityhelper = new EntityHelper();
        var s = new JsonSerializer();

        try
        {
            //Populate Grid Model, Column Names, Grid Column Model, Grid Data
            entityhelper.PopulateDetailGridInit(db, jobGroup, jobName, detailTable, filterBatchControl, filterDate, filterTime);

            JqGridDetailAttributes = entityhelper.GridDetailAttributes;
            JqGridDetailColumnNames = entityhelper.GridDetailColumnNames;
            //JqGridDetailsColumnNamesForExport = entityhelper.GridDetailColumnNamesForExport;
            JqGridDetailColumnModel = entityhelper.GridDetailColumnModel;

            //Dynamic Data
            JqGridDynamicDetailData = entityhelper.GridDetailData;

            #region Column Model
            foreach (KeyValuePair<String, JqGridColModel> kvp in entityhelper.GridDetailColumnModel)
            {
                s.Serialize(kvp.Key, kvp.Value.Attributes);
            }

            JqGridDetailColumnModelJson = s.Json();
            #endregion

            #region Concrete data.  1\. List<dynamic> populated, 2\. Convert to Json String, 3: Convert back to List<Detail>
            JqGridDetailData = JsonSerializer.ConvertDynamicDetailsToJson(JqGridDynamicDetailData); // this is where the error occurs

            }
        catch (Exception ex)
        {
            //TODO: Logging
            System.Diagnostics.Debug.WriteLine(ex.Message);
        }
    } 
```

Json 序列化器

```
 public static IList<Detail> ConvertDynamicDetailsToJson(IList<dynamic> list)
    {
        if (list.Count == 0)
            return new List<Detail>();

        var sb = new StringBuilder();
        var contents = new List<String>();

        sb.Append("[");

        foreach (var item in list)
        {
            var d = item as IDictionary<String, Object>;

            sb.Append("{");
            foreach (KeyValuePair<String, Object> kvp in d)
            {    
                contents.Add(String.Format("{0}: {1}", "\"" + kvp.Key + "\"", JsonConvert.SerializeObject(kvp.Value))); 
            }
            sb.Append(String.Join(",", contents.ToArray()));
            sb.Append("},");
        }

        sb.Append("]");

        //remove trailing comma
        sb.Remove(sb.Length - 2, 1);
        var jarray = JsonConvert.DeserializeObject<List<Detail>>(sb.ToString());

        return jarray;
    } 
```

从服务器返回 Json 结果的控制器

```
 public JsonResult DetailGridData(TheParams param)
    {

        dynamic config= "";
        switch (param.JobGroup)
        {
            case "a":
                config = new BLL.abcBLL().GetDetailGridData("rid", "desc", 1, 20, null,
                                                                             param.FilterBatchControl,
                                                                             param.JobName, param.DetailTable,
                                                                             param.JobGroup, param.BatchDate,
                                                                             param.Source);
                break;
        }

        return Json(config, JsonRequestBehavior.AllowGet);  // this reurns successfully json result
    } 
```

查看 Jqgrid 存在且不填充网格的位置

```
 <script type="text/javascript">

var jobGroup = '@ViewBag.JobGroup';
var jobName  = '@ViewBag.JobName';
var detailTable = '@ViewBag.DetailTable';
var filterBatchControl = '@ViewBag.FilterBatchControl';
var controlDate = '@ViewBag.ControlDate';
var controlTime = '@ViewBag.ControlTime';
var source = '@ViewBag.DetailSource';
var page = '@ViewBag.page';

function loadDetailData() {
    var param = new Object();
    param.BatchDate = controlDate;
    param.BatchTime = controlTime;
    param.JobGroup = jobGroup;
    param.JobName = jobName;
    param.DetailTable = detailTable;
    param.FilterBatchControl = filterBatchControl;
    param.Source = source;
    param.page = page;

    window.parent.loadingDetailsHeader();        

    $.ajax({
        url: "/control/detailgriddata",
        dataType: 'json',
        type: 'POST',
        data: param,
        async: false,
        success: function (response) {
            try {
                jgGridDetailColumnNames = response.JqGridDetailColumnNames;
                //jqGridDetailColumnData = response.JqGridDetailData;
                jqGridDetailColumnData = response.config;
                $('#detailGrid').jqGrid('setGridParam', {colNames: jgGridDetailColumnNames});
                $('#detailGrid').jqGrid('setGridParam', {data: jqGridDetailColumnData}).trigger('reloadGrid');
                parent.loadingDetailsHeaderComplete();
            }
            catch(e) {
                window.parent.loadingDetailsHeaderException(e.Message);
            }
            return false;
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
        }
    });
}

function exportdetails(date) {
    var param = new Object();
    param.db = source;
    param.jobGroup = jobGroup;
    param.jobName = jobName;
    param.detailTable = detailTable;
    param.filterBatchControl = filterBatchControl;          
    param.filterDate = date;
    param.filterTime = "NULL";

    $.ajax({
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        url: '@Url.Action("ExportDetailsCsv", "Control")',
        dataType: 'json',
        data: $.toJSON(param),
        async: false,
        success: function (response) {
            window.location.assign(response.fileName);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert("Details Export Exception: " + xhr.status);
        }
    });
}

//<![CDATA[
$(document).ready(function () {
    'use strict';

    $(window).resize(function () {
        $("#detailGrid").setGridWidth($(window).width());
    }).trigger('resize');

    var dgrid = $("#detailGrid");

    $('#detailGrid').jqGrid('clearGridData');
    loadDetailData();

    dgrid.jqGrid({
        datatype: 'json',
        data: jqGridDetailColumnData,
        colNames: jgGridDetailColumnNames,
        colModel: [ @Html.Raw(@ViewBag.ColModelDetail) ],
        rowNum: 25,
        rowList: [25, 50, 100],
        pager: '#detailPager',
        gridview: true,
        autoencode: false,
        ignoreCase: true,
        viewrecords: true,
        altrows: false,
        autowidth: true,
        shrinkToFit: true,
        headertitles: true,
        hoverrows: true,
        height: 300,
        onSelectRow: function (rowId) {
            //This is a demo dialog with a jqGrid embedded
            //use this as the base for viewing detail data of details
            //$('#dialogGrid').dialog();
            //gridDialog();
        },
        loadComplete: function (data) {},
        gridComplete: function (data) {
            //if (parseInt(data.records,10) < 50) {
            $('#detailPager').show();
            //} else {
            //$('#detailPager').show();
            //}
        }
    }).jqGrid('navGrid', '#detailPager', { edit: false, add: false, del: false, search: false }, {});
});
 //]]>
 </script>
 <table id="detailGrid">
<tr>
    <td />
</tr>
</table>

 <div id="detailPager"></div>

 <div id="dialogGrid"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:41:13.113

也许您应该考虑使用*服务器端分页*而不是向客户端返回 10000 行？SQL 数据的服务器端分页可以*更有效地*实现为客户端分页（在 JavaScript 程序中对大型非索引数据进行排序）。

您还有一个选择是使用*另一个*JSON 序列化程序。例如，它可以是[protobuf-net](http://code.google.com/p/protobuf-net/)、[ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text/)（也请参见[此处](http://www.servicestack.net/)）、[Json.NET](http://json.codeplex.com/releases/view/97986)等。与`JavaScriptSerializer`.

# css - Line crossing borders

> ID：14238390
> 
> 赞同：1
> 
> 时间：2013-01-09T15:13:48.760
> 
> 标签：css

I would like to have a border around my page witch are dashed. In the corners I would like the lines to cross. This is what I got so far:

```
#main {
    border-width: 1px;
    border-style: dashed;
    margin: 10px !important;
} 
```

The lines are not crossing. Is there anyone who knows how to do this? Thanks

# python - Requests 1.0.4 异步请求

> ID：14238398
> 
> 赞同：1
> 
> 时间：2013-01-09T15:14:11.603
> 
> 标签：python, http, asynchronous, python-requests

我使用 Python 请求库。今天我从 Requests 0.12.1 升级到 1.0.4。

升级后*异步*模块不再工作，建议您使用*grequests*。但是，*grequests*不适用于 Requests 1.0.4。

我已经在 lib 的 GitHub 中提交了一个问题：[https ://github.com/kennethreitz/grequests/issues/29](https://github.com/kennethreitz/grequests/issues/29)

有人对此问题有解决方法或补丁吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:17:53.803

查看[https://github.com/sigmavirus24/grequests](https://github.com/sigmavirus24/grequests)

我正在努力将 grequests 更新到 1.0.4，但还没有得到适当的测试以确保它完美运行。如果您愿意，请在我的项目上发布问题，以便我在[https://github.com/kennethreitz/grequests](https://github.com/kennethreitz/grequests)设置的拉取请求将是完美的。

# jquery - Using jQueryMobile AND bootstrap together

> ID：14238400
> 
> 赞同：2
> 
> 时间：2013-01-09T15:14:16.130
> 
> 标签：jquery, jquery-mobile, twitter-bootstrap, responsive-design, fuelphp

Right now I'm building a web app, and I would like the device to use jquerymobile for resolutions under 780 pixels, and bootstrap for above 780 pixels.. Is this even possible? I've tried searching around and I can't figure out a solution. I would like to use bits and pieces of both, the problem is this strongly conflict with each other... I don't want to build two separate sites because that would ruin the responsiveness.

Twitter bootstrap: [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)
jQueryMobile: [http://jquerymobile.com](http://jquerymobile.com)

Here's my head...

```
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <?php echo Asset::js('jquery.js'); ?>
    <?php echo Asset::css('bootstrap.min.css'); ?>
    <?php echo Asset::js('bootstrap.min.js'); ?>
    <?php echo Asset::css('bootstrap-responsive.css'); ?>
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:36:37.583

由于两个库之间标记 javascript 和 css 的差异，您不能简单地在窗口调整大小时从 Bootstrap（或相反）切换到 jQM，而不会将用户一起发送到不同的页面。但是，您可以让引导程序显示一个用于较低分辨率屏幕的按钮，将它们带到您站点的 jQM 版本。

另一个选项是在页面加载时检查设备宽度并进行重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T02:36:01.910

[Adapt.js](http://adapt.960.gs)可能适合您。它是一个轻量级的 JavaScript，它检查你的窗口宽度，然后提供适当的 CSS。理论上，您为 780 以下的窗口宽度指定 jquerymobile css，并为 780 以上的引导程序指定。

我以前单独使用过 adapt.js，它就像一个魅力。如果没有实际对整个想法进行测试，我不确定是否会有任何 javascript 冲突。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:41:15.580

你也可以试试我的 jQuery Mobile Bootstrap 主题：

[https://github.com/commadelimited/jQuery-Mobile-Bootstrap-Theme](https://github.com/commadelimited/jQuery-Mobile-Bootstrap-Theme)

它托管在 Github 上，并确认可以与当前版本的 jQuery Mobile (1.2) 一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T15:31:11.837

您可以尝试仅针对超过 780px 的分辨率包含引导 css

```
<link href="bootstrap.min.css" rel="stylesheet" media="only screen and (min-width:780px)">
<link href="bootstrap-responsive.css" rel="stylesheet" media="only screen and (min-width:780px)"> 
```

至于 jqueryMobile，它通常需要一些标记，因此您无法仅使用媒体查询来启用/禁用它

# php - 将php表单验证错误消息传递回提交表单

> ID：14238402
> 
> 赞同：0
> 
> 时间：2013-01-09T15:14:22.383
> 
> 标签：php

我正在尝试将来自函数中的服务器端表单验证器的错误消息传递回它提交的表单。验证器正在工作，因为它阻止了其余代码按计划将其保存到数据库中。但是我无法将其传递回表单以显示错误

```
function saveComment(){
    $validate = array();
    $id = isset($_POST["articleId"]) ? $_POST["articleId"] : '';

    if ( isset( $_POST['saveChanges'] ) ) {

    if ( $_POST['name'] == "" ){
         $validate['errorMessage'] = "Please fill out your name.";
      header( "Location:".HOME_PATH."/.?action=viewArticle&articleId=".$_POST['articleID']."");
    } 
```

我想把它传回给这个

```
if ( isset( $validate['errorMessage'] ) ) {
    echo $validate['errorMessage'];
} 
```

当我删除`if`显示功能时，我收到错误`unidentified index`

我需要做什么才能让表单显示错误消息。我需要将数组传递给处理文章显示的函数吗？

**回馈**

对于任何可能觉得这很有用的人，我几乎没有改变使用@OliverBS post 方法。

还要感谢@lethal-guitar，因为他的解释帮助我了解了哪里出了问题以及可用于解决此问题的各种方法+1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:26:19.357

您正在`$validate`为当前正在执行的脚本设置一个变量。之后，您发送一个重定向标头。这将导致您的浏览器发出新请求，从而结束当前执行的脚本并废弃变量。新请求将触发另一个脚本调用，其中变量不再为人所知，因为它仅在第一个请求期间存在。

HTTP 是无状态的，因此您在服务器端设置的每个变量都只会存在，直到您完成当前请求并响应客户端。您需要一种将此变量传递给处理第二个请求的脚本的方法。有几种方法可以做到这一点：

*   传递一个 GET 参数。您可以将类似内容附加`"&validationError=" . $validate['errorMessage']`到您传递给 Location 标头的 URL，然后在显示页面中通过`$_GET`.
*   将验证状态保存在`$_SESSION`. PHP 手册包含很多关于会话的信息（也许你已经在使用它们了？）
*   以一种不会在错误时重定向但在成功时重定向的方式重组代码。

关于第三个提案的更多信息：您编写了一个 PHP 脚本来显示表单**并**处理表单发布请求。如果验证失败，您只需重新显示并插入`echo`您已有的语句。如果成功，您将重定向到某个成功页面。这样，变量将保持可访问性，因为它仍然是相同的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:16:47.857

当您执行标题位置时，您会将用户重定向到新页面。您将不得不在查询字符串中传递错误，或者理想情况下将其作为会话中的变量传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:31:03.383

快速浏览一下试试这个

**会话方式**

`session_start();`确保通过在 saveComment 所在的文件顶部执行并检查 isset来启动会话。

```
function saveComment(){

    $id = isset($_POST["articleId"]) ? $_POST["articleId"] : '';

    if ( isset( $_POST['saveChanges'] ) ) {

    if ( $_POST['name'] == "" ){
         $_SESSION['errorMessage'] = "Please fill out your name.";
         header( "Location:".HOME_PATH."/.?action=viewArticle&articleId=".$_POST['articleID']."");
    }

if ( isset( $_SESSION['errorMessage'] ) ) {
    echo $_SESSION['errorMessage'];
} 
```

或者你可以试试

**POST方式**

```
function saveComment(){

        $id = isset($_POST["articleId"]) ? $_POST["articleId"] : '';

        if ( isset( $_POST['saveChanges'] ) ) {

        if ( $_POST['name'] == "" ){
             $error = urlencode('Please fill out your name');
             header( "Location:".HOME_PATH."/.?action=viewArticle&articleId=".$_POST['articleID']. "&error=" . $error);
        }

    if ( isset( $_GET['error'] ) ) {
        echo urldecode($_GET['error']);
    } 
```

我没有对此进行测试，但您应该了解该做什么的基本概念。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T15:31:44.163

我建议在一个文件中完成所有这些，即表单和验证作为一个文件。

然后你可以这样做：

```
<?php
    //set success to 0
    $success = 0;
    $errormsgs = array();

    //check for post
    if(isset($_POST['submit'])){

        //get the data from the form post and validate it
        $valid = validateFuntion($_POST['data'])
            //the is function will validate the data. If it is not valid, it will add a message to $errormsgs

        //check for errors
        if(!$errormsgs){
            //data validation was successful, do stuff

        }
    }//if validation fails, it will fall out of the this code block and move on
?>

<html>
<body>
<?php
//check for errors
if($errormsgs){
    $content .= '<ul class="errors">';
                    foreach($errormsgs as $error){
                        $content .= "<li>" . $error . "</li>";  
                    }
    $content .= "</ul>";
    echo $content;
}
?>
<form name="name" action="" method="post">
    <input name="name" value="<?= (isset($_POST['data']) ? $_POST['data'] : '') ?>" type="text">
</form>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T15:17:31.057

`header`您正在使用该语句将用户重定向到“错误”页面。问题是，当然，这是一个全新的页面，没有剩余状态，所以你的变量都不存在了。

有两种方法可以做到这一点，要么将其传递给查询字符串（因此添加 &error=...）并在模板中解析它，要么将其保存到会话中。

当然，您确实应该在使用不同的方式呈现您的模板之前执行此操作，但这是对您的代码的完全修改。

# c++ - C++ OpenGL - 颜色

> ID：14238408
> 
> 赞同：0
> 
> 时间：2013-01-09T15:14:37.080
> 
> 标签：c++, opengl

我正在尝试绘制一个 8 位风格的游戏角色（来自 Zelda 的链接），因为我正在练习 OpenGL。我从他的脸开始，也就是右边的大方块，然后画了他的眼睛，在他的脸开始的右边两个街区……（6个街区，最左边的2个是眼睛）

眼睛的顶部（绿色块上方的块）应该是深绿色（见代码），但它一直采用第一个较大块（脸）的颜色。

我希望这是有道理的......请看这张照片： ![8 位字符](../Images/c1ce781f597b252127269e904d2a72bd.png)

我做错了什么让它不断改变它的颜色？

我假设我需要做更多的事情才能接受 RGB 颜色？`glColor3f(29, 137, 59);`...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T15:21:43.833

`glColor3f`接受浮点参数。通过这样做，大数字将被转换为浮点数，因此变为 29.0f、137.0f 和 59.0f。给定颜色在 0-1 的范围内表示，这些颜色会被限制在 0-1 的范围内，当然会显示为白色（1.0、1.0、1.0）。

改为使用`glColor3ub`。它接受一个无符号字节作为其参数，范围为 0-255，这可能是您最习惯的。还有其他形式，例如`glColor3i`, `glColor3s`,等`glColor3ui`，`glColor3us`它们接受整数和短裤（及其无符号变体），它们在整数和短裤的范围内定义。这些只是在内部转换为十进制变体（例如`decimal = int / INT_MAX`）。

# c++ - 过滤 QStandardItemModel 或 QTreeView 中的项目

> ID：14238409
> 
> 赞同：3
> 
> 时间：2013-01-09T15:14:38.357
> 
> 标签：c++, qt, filtering, qtreeview, qstandarditemmodel

我用**QStandardItemModel在****QTreeView**中表示相同的数据。数据是表 - 我有行和列，我使用 QSqlQuery 从数据库中获取它。如何根据某些列值过滤行？例如，我有第三列一些整数值，通过单击某个按钮，我只想显示该*数字 > 10*的行。我可以执行另一个**QSqlQuery.exec**，但是可以使用**QTreeView**或**QStandardItemModel**执行此操作吗？

 ******** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:40:18.433

要过滤掉数据，您可以使用[QSortFilterProxyModel](http://qt-project.org/doc/qt-4.8/qsortfilterproxymodel.html)。通过覆盖其他方法，您可以在底层模型中格式化数据，因此无需自己填充 QStandardItemModel 而是使用 QSqlTable 模型作为源。*******

# android - 如何在 Android 中直接拨打电话

> ID：14238410
> 
> 赞同：4
> 
> 时间：2013-01-09T15:14:40.230
> 
> 标签：android, android-intent, phone-call

我知道这样做很简单，但我遇到了一个非常奇怪的问题。只需点击一个按钮，我就必须在危险情况下报警。所以我用下面的代码来调用。

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("tel:100"));
            callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            ctx.startActivity(callIntent); 
```

在. `CALL_PHONE`_ `AndroidManifest.xml`问题是它在拨号盘上打开 100 但没有直接拨打电话。我希望当用户单击按钮时立即发生这种情况。

当我尝试将 +91 放在 100 之前时，它会自动呼叫该号码，但为什么这些号码需要加号。所以有人帮我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:29:09.227

从以下文档`ACTION_CALL`：

> 注意：哪些应用可以发起呼叫会有限制；大多数应用程序应该使用 ACTION_DIAL。
> 
> 注意：此 Intent 不能用于拨打紧急号码。但是，应用程序可以使用 ACTION_DIAL 拨打紧急号码。

因此，这种行为似乎是故意的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:26:48.370

可能存在android系统无法识别`100`为有效电话号码的问题，相反，如果您将国家代码放在其前面，则它可以正常工作。要解决此类问题，请查看此库[libnhonenumber](http://code.google.com/p/libphonenumber/)。你可以像这样使用它

```
public static ArrayList<String> extractPhoneNumber(String content) {

    ArrayList<String> numbers = new ArrayList<String>(0);

    PhoneNumberUtil instance = PhoneNumberUtil.getInstance();

    //Change IT with your contry code
    Iterable<PhoneNumberMatch> matches = instance.findNumbers(content, "IT");

    Iterator<PhoneNumberMatch> iterator = matches.iterator();

    while (iterator.hasNext()) {
        numbers.add(instance.format(iterator.next().number(), PhoneNumberFormat.INTERNATIONAL));
    }

    return numbers;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T06:14:41.933

```
private void phoneCall()
{
 String phoneCallUri = "tel:91";
 Intent phoneCallIntent = new Intent(Intent.ACTION_CALL);
 phoneCallIntent.setData(Uri.parse(phoneCallUri));
 startActivity(phoneCallIntent);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-15T10:52:47.417

无需用户干预直接调用的最佳方式..

```
String uri = "tel:" + num.trim();
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse(uri));
startActivity(intent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-11T10:16:12.550

呼叫/开始呼叫有两种意图：ACTION_CALL 和 ACTION_DIAL。ACTION_DIAL 只会打开填写了号码的拨号器，但允许用户实际拨打或拒接电话。ACTION_CALL 将立即呼叫该号码并需要额外的权限。所以确保你有权限

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-26T13:25:09.877

很久过去了。但可能会帮助别人。如果你想直接调用，你应该使用[requestPermissions](https://developer.android.com/reference/android/support/v4/app/ActivityCompat.html#requestPermissions(android.app.Activity,%20java.lang.String[],%20int))方法。

**1.**将此行添加到您的清单文件中：

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

**2.**在activity类中定义一个类变量：

```
private static Intent phoneCallIntent; //If use don't need a member variable is good to use a static variable for memory performance. 
```

**3.**将这些行添加到活动的**onCreate**方法中：

```
final String permissionToCall = Manifest.permission.CALL_PHONE;
//Assume that you have a phone icon.
(findViewById(R.id.menuBarPhone)).setOnClickListener(new OnClickListener(){
    public void onClick(View view) {
        phoneCallIntent = new Intent(Intent.ACTION_CALL);
        phoneCallIntent.setData(Uri.parse(getString(R.string.callNumber))); //Uri.parse("tel:your number")
        if (ActivityCompat.checkSelfPermission(MainFrame.this, permissionToCall) != PackageManager.PERMISSION_GRANTED) {
            ActivityCompat.requestPermissions(MainFrame.this, new String[]{permissionToCall}, 1);
            return;
        }
        startActivity(phoneCallIntent);
    }
}); 
```

**4.点击****允许按钮**后立即拨打电话，覆盖[onRequestPermissionsResult](https://developer.android.com/reference/android/support/v4/app/ActivityCompat.OnRequestPermissionsResultCallback.html#onRequestPermissionsResult(int,%20java.lang.String[],%20int[]))方法：

```
@Override
public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults){
    super.onRequestPermissionsResult(requestCode, permissions, grantResults);
    if(requestCode == 1){
        final int permissionsLength = permissions.length;
        for (int i = 0; i < permissionsLength; i++) {
            if(grantResults[i] == PackageManager.PERMISSION_GRANTED){
                startActivity(phoneCallIntent);
            }
        }
    } 
```

当用户授予权限后，下次不会出现对话框，直接拨打电话。

# c# - How to obtain a serial number of scanner with TWAIN?

> ID：14238414
> 
> 赞同：2
> 
> 时间：2013-01-09T15:15:14.473
> 
> 标签：c#, pinvoke, twain

I would like to obtain the serial number of a scanner in C# using `twain_32.dll`.
I've found out it has to be done with dscap method with the `icap_serialnumber` capability.

Can anyone give me an example how to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:36:31.723

您已确认您的扫描仪驱动程序支持此功能？我在 TWAIN 规范中发现它为 CAP_SERIALNUMBER (0x1024)。它是可选的——你不能假设扫描仪支持它。

如果您在尝试获取该功能时获得 TWRC_FAILURE，请检查条件代码。您的库或组件应该提供一种在 GET 之后获取条件代码的方法。TWCC_CAPUNSUPPORTED 的值意味着扫描仪驱动程序不支持该功能。TWAIN 规范中描述了其他条件代码，尽管有时需要一点想象力才能猜出驱动程序想说什么......

对于此类问题， [TWAIN 工作组论坛可能是一个更好的地方。](http://twainforum.org)

# c++ - 是否需要 const 和通用引用的重载？

> ID：14238429
> 
> 赞同：2
> 
> 时间：2013-01-09T15:16:11.430
> 
> 标签：c++, c++11, overloading

考虑一个用于检查参数值等的“合同”函数：

```
 template< class T >
  const T& AssertNotEmpty( const T& val )
  {
    //raise hell if val empty/0/...
    return val;
  } 
```

例如可以如下使用：

```
void foo( const std::shared_ptr< int >& val )
{
  AssertNotEmpty( val );
  //use *val
}

class Bar98
{
public:
  Bar98( const std::shared_ptr< int >& val ) : myVal( AssertNotEmpty( val ) ) {}
private:
  std::shared_ptr< int > myVal;
};

std::shared_ptr< int > x;
//...
AssertNotEmpty( x ); //(1) 
```

现在进入 C++11，我们希望 Bar98 按值获取构造函数参数并从中移出：

```
class Bar11
{
public:
  Bar11( std::shared_ptr< int > val ) :
    myVal( AssertNotEmpty( std::move( val ) ) )
  {}
private:
  std::shared_ptr< int > myVal;
}; 
```

为此，AssertNotEmpty 需要重写，我相当天真地认为可以通过使用通用引用来工作：

```
 template< class T >
  T&& AssertNotEmpty( T&& val )
  {
    //...
    return std::move( val );
  } 
```

这似乎适用于所有情况，除了最后一种 (1)，其中 VS 给出`warning C4239: nonstandard extension used : 'return' : conversion from 'std::shared_ptr<int>' to 'std::shared_ptr<int> &'`. 据我所知，这是因为编译器看到`AssertNotEmpty( x )`哪个是`AssertNotEmpty( T& && x )`哪个崩溃`AssertNotEmpty( T& )`而您无法从中移动`T&`，如果我错了，请纠正我。

为了解决这个问题，我将通用引用添加为仅对非左值引用启用的重载，以强制编译器在遇到 (1) 中的普通左值引用时也选择 const 引用：

```
 template< class T >
  const T& AssertNotEmpty( const T& val )
  {
    //...
    return val;
  }

  template< class T >
  T&& AssertNotEmpty( T&& val, typename std::enable_if< !std::is_lvalue_reference< T >::value, int >::type* = 0 )
  {
    //...
    return std::move( val );
  } 
```

似乎按预期工作，编译器在我尝试的所有情况下都选择了正确的，但这是解决这个问题的“正确”C++11 方法吗？有没有可能的陷阱？没有不需要重复的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:19:57.920

我认为您不应该从该函数返回任何内容。但是，这可能会如您所愿。

```
template<class T>
auto AssertNotEmpty(T&& val) -> decltype(std::forward<T>(val))
{
    //...
    return std::forward<T>(val);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T15:27:16.897

严格来说，这不是您问题的答案，但我认为`AssertNotEmpty`不应修改其论点或返回任何内容。由于*逗号运算符*，您仍然可以在构造函数中使用它，如下所示：

```
template< class T >
void AssertNotEmpty( T const& val )
{
  /* assert( val not empty ) */
}

class Bar11
{
public:
  Bar11( std::shared_ptr< int > val ) :
    myVal( ( AssertNotEmpty( val ), std::move( val ) ) )
  {}
private:
  std::shared_ptr< int > myVal;
}; 
```

请注意，额外的括号是必需的，因此对两个表达式求值，结果是最后一个表达式的结果。

否则，您应该重命名您的函数。`AssertNotEmptyThenMove`想到了什么……

# c++ - 如何发现 std::vector 的大小/长度（以字节为单位）？

> ID：14238430
> 
> 赞同：22
> 
> 时间：2013-01-09T15:16:12.010
> 
> 标签：c++, vector, std

我有一个向量，我想将其写入文件并将其读取到文件中，但无法使用`sizeof`运算符确定向量的逻辑大小。

那我该怎么办？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-09T15:17:14.133

C++ std::vector 有一个`size()`返回其大小的方法。

编辑：据我所知，您需要计算给定向量使用的内存。您不能为此使用 sizeof ，因为向量使用动态内存并且仅存储包含其元素的动态数组的指针。所以我最好的建议是将每个元素所需的内存乘以元素的数量。请注意，如果对象存储指向某些动态分配的对象的指针，这将再次不起作用 - 您将再次单独计算它们的大小。

据我所知，没有简单的方法可以在 C++ 中计算内存向量大小（以字节为单位）。

# ios - 用户是否可以将他们的整个应用程序目录发送给我以进行分析？

> ID：14238432
> 
> 赞同：1
> 
> 时间：2013-01-09T15:16:20.370
> 
> 标签：ios, xcode, debugging, document

我的应用程序的非 beta 用户是否可以将他们的整个应用程序目录发送给我以进行分析？

我知道通过 Xcode Organizer 下载整个应用程序目录的方式。但是，最终用户是否也可以保存/导出包含所有文档文件的应用程序包并通过电子邮件向我发送此包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:26:34.030

[如果不使用PhoneView](http://www.ecamm.com/mac/phoneview/)或[iExplorer](http://www.macroplant.com/iexplorer/)等第三方工具，最终用户无法访问应用程序目录及其内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:26:51.407

是的。我确信有很多更便宜的方法可以做到这一点，但我发现[PhoneView](http://www.ecamm.com/mac/)对于浏览设备和复制完整的应用程序文件夹非常方便。

我认为另一种方法——对用户来说更容易，但对你来说更难——是实现文件共享，以便用户可以通过 iTunes 从你的应用程序中拖动东西。这取决于您需要从用户那里获得多少/什么样的数据，您将如何实现这一点。

# scala - 在 Scala 中使用 Google Caliper

> ID：14238435
> 
> 赞同：0
> 
> 时间：2013-01-09T15:16:28.260
> 
> 标签：scala, noclassdeffounderror, caliper

我正在尝试在 Eclipse Juno(4.2) 中使用 Caliper 和 Scala(2.10)。首先，我设置了一个简单地在数组上迭代 foreachloop 的基准。

```
import com.google.caliper.Param
import com.google.caliper.SimpleBenchmark

class Benchmark extends SimpleBenchmark {

  @Param(Array("10", "100", "1000", "10000"))
  val length: Int = 0
  var array: Array[Int] = _

  override def setUp() {
    array = new Array(length)
  }

  def timeForeach(reps: Int) = {
    var result = 0
    array.foreach {
      result += _
    }
    result
  } 
```

当我开始基准测试时：

```
object myRunner {
 def main(args: Array[String]) {
   Runner.main(classOf[Benchmark], args)
 }
} 
```

我得到了这些我不明白的异常

```
0% Scenario{vm=java, trial=0, benchmark=Foreach, length=10}  Failed to execute java -cp C:\Users\bob\workspace\myBenchmark\bin;C:\Users\bob\workspace\caliper\caliper\target>\classes;C:\Users\bob\workspace\caliper\caliper\target\test-classes;C:\Users\bob\.m2\repository\com\google\code\findbugs\jsr305\1.3.9\jsr305-1.3.9.jar;C:\Users\bob\.m2\repository\com\google\code\gson\gson\1.7.1\gson-1.7.1.jar;C:\Users\bob\.m2\repository\com\google\guava\guava\11.0.1\guava-11.0.1.jar;C:\Users\bob\.m2\repository\com\google\code\java-allocation-instrumenter\java-allocation-instrumenter\2.0\java-allocation-instrumenter-2.0.jar;C:\Users\bob\.m2\repository\asm\asm\3.3.1\asm-3.3.1.jar;C:\Users\bob\.m2\repository\asm\asm-analysis\3.3.1\asm-analysis-3.3.1.jar;C:\Users\bob\.m2\repository\asm\asm-commons\3.3.1\asm-commons-3.3.1.jar;C:\Users\bob\.m2\repository\asm\asm-tree\3.3.1\asm-tree-3.3.1.jar;C:\Users\bob\.m2\repository\asm\asm-util\3.3.1\asm-util-3.3.1.jar;C:\Users\bob\.m2\repository\asm\asm-xml\3.3.1\asm-xml-3.3.1.jar;C:\Users\bob\.m2\repository\junit\junit\3.8.2\junit-3.8.2.jar com.google.caliper.InProcessRunner --warmupMillis 3000 --runMillis 1000 --measurementType TIME --marker //ZxJ/ -Dbenchmark=Foreach -Dlength=10 org.example.Benchmark
Exception in thread "main" java.lang.NoClassDefFoundError: scala/Function1
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at com.google.caliper.ScenarioSelection.getClassByName(ScenarioSelection.java:154)
    at com.google.caliper.ScenarioSelection.prepareSuite(ScenarioSelection.java:123)
    at com.google.caliper.ScenarioSelection.select(ScenarioSelection.java:83)
    at com.google.caliper.InProcessRunner.run(InProcessRunner.java:38)
    at com.google.caliper.InProcessRunner.main(InProcessRunner.java:103)
Caused by: java.lang.ClassNotFoundException: scala.Function1
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 7 more

An exception was thrown from the benchmark code.
com.google.caliper.ConfigurationException: Failed to execute java -cp C:\Users\bob\workspace\myBenchmark\bin;C:\Users\bob\workspace\caliper\caliper\target\classes;C:\Users\bob\workspace\caliper\caliper\target\test-classes;C:\Users\bob\.m2\repository\com\google\code\findbugs\jsr305\1.3.9\jsr305-1.3.9.jar;C:\Users\bob\.m2\repository\com\google\code\gson\gson\1.7.1\gson-1.7.1.jar;C:\Users\bob\.m2\repository\com\google\guava\guava\11.0.1\guava-11.0.1.jar;C:\Users\bob\.m2\repository\com\google\code\java-allocation-instrumenter\java-allocation-instrumenter\2.0\java-allocation-instrumenter-2.0.jar;C:\Users\bob\.m2\repository\asm\asm\3.3.1\asm-3.3.1.jar;C:\Users\bob\.m2\repository\asm\asm-analysis\3.3.1\asm-analysis-3.3.1.jar;C:\Users\bob\.m2\repository\asm\asm-commons\3.3.1\asm-commons-3.3.1.jar;C:\Users\bob\.m2\repository\asm\asm-tree\3.3.1\asm-tree-3.3.1.jar;C:\Users\bob\.m2\repository\asm\asm-util\3.3.1\asm-util-3.3.1.jar;C:\Users\bob\.m2\repository\asm\asm-xml\3.3.1\asm-xml-3.3.1.jar;C:\Users\bob\.m2\repository\junit\junit\3.8.2\junit-3.8.2.jar com.google.caliper.InProcessRunner --warmupMillis 3000 --runMillis 1000 --measurementType TIME --marker //ZxJ/ -Dbenchmark=Foreach -Dlength=10 org.example.Benchmark
    at com.google.caliper.Runner.measure(Runner.java:309)
    at com.google.caliper.Runner.runScenario(Runner.java:229)
    at com.google.caliper.Runner.runOutOfProcess(Runner.java:378)
    at com.google.caliper.Runner.run(Runner.java:97)
    at com.google.caliper.Runner.main(Runner.java:423)
    at com.google.caliper.Runner.main(Runner.java:436)
    at org.example.myRunner$.main(myRunner.scala:7)
    at org.example.myRunner.main(myRunner.scala) 
```

我想我的类路径有一些问题，但我不确定。

我希望有一个人可以帮助我 ：）

在此先感谢达夫拉姆·巴舍尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:38:35.890

Caliper 看起来非常像是在运行一个新的 JVM，并且不知道它需要在类路径中包含 Scala 库。

[此问题](https://stackoverflow.com/questions/3626002/can-java-run-a-compiled-scala-code)描述了如何使用`java`命令行上的命令运行 Scala 应用程序。这应该是解决这个问题的一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-25T17:57:14.203

即使您在 Eclipse 中编辑 scala 源代码，您仍然可以使用[sbt](http://www.scala-sbt.org/0.13.0/docs/home.html)来运行您的代码。Sbt 是管理项目类路径的绝佳工具，此外还提供了一个插件系统来提供诸如运行 Caliper 基准测试等各种功能。我最近在一个我需要的项目中工作，并将其分解为已发布的[sbt 插件](https://github.com/softprops/cappi#readme)。这也可能对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:00:06.437

谢谢你的帮助。正如预期的那样，问题出在愚蠢的类路径上。我已经从 googlecode 下载了 caliper 项目并添加了 scala 依赖项。现在我已经构建了自己的 jar-with-dependencies，它工作得很好。

无论如何感谢您的回答:-)

# android - 如何从代码中删除 TextView 的 ellipsized 属性？

> ID：14238436
> 
> 赞同：25
> 
> 时间：2013-01-09T15:16:28.653
> 
> 标签：android, textview

我将我的 textView 设置为在 xml 中被省略。现在点击我希望它扩展并且变得不椭圆。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-09T15:22:40.817

用于[`setEllipsize()`](http://developer.android.com/reference/android/widget/TextView.html#setEllipsize(android.text.TextUtils.TruncateAt))更改 a 的椭圆大小行为`TextView`。例如，要关闭 ellipsize，请使用以下命令：

```
myTextView.setEllipsize(null); 
```

# python - 在 Pybrain 中创建共享权重连接

> ID：14238444
> 
> 赞同：3
> 
> 时间：2013-01-09T15:16:50.107
> 
> 标签：python, machine-learning, neural-network, pybrain

我正在尝试在 PyBrain 中创建一个利用共享权重连接的神经网络，但这样做时遇到了麻烦。我没有找到太多使用这些类型连接的示例，但我认为我已经从我找到的那些和源代码中收集了使用它们的方法。但显然我没有那么幸运。

作为一个简单的例子，我正在尝试创建以下共享权重神经网络： [![一个简单的 SWNN](../Images/49940237e86c6464ab135a370a31a657.png)](https://i.stack.imgur.com/CzgXN.jpg)

我希望共享矩形中显示的连接，因为沿每条路径的权重是相同的（将输入向量 [x,y] 与 [y,x] 交换应该产生相同的输出）。

我尝试使用以下代码构建此架构：

```
from pybrain.structure.modules.linearlayer import LinearLayer
from pybrain.structure.modules.sigmoidlayer import SigmoidLayer
from pybrain.structure.moduleslice import ModuleSlice
from pybrain.structure.networks.feedforward import FeedForwardNetwork
from pybrain.structure.connections.shared import MotherConnection,SharedFullConnection

net=FeedForwardNetwork()

# make modules
inp=LinearLayer(2,name='input')
h1=SigmoidLayer(2,name='hidden')
outp=LinearLayer(1,name='output')

# now add modules
net.addOutputModule(outp)
net.addInputModule(inp)
net.addModule(h1)

# now we need to create the connections
mc=MotherConnection(2,name='mother') 
mc2=MotherConnection(2,name='mother2')
topInput=ModuleSlice(inp,outSliceFrom=0,outSliceTo=1)
bottomInput=ModuleSlice(inp,outSliceFrom=1,outSliceTo=2)
topHidden=ModuleSlice(h1,inSliceFrom=0,inSliceTo=1)
bottomHidden=ModuleSlice(h1,inSliceFrom=1,inSliceTo=2)
net.addConnection(SharedFullConnection(mc,topInput,topHidden))
net.addConnection(SharedFullConnection(mc,bottomInput,bottomHidden))
net.addConnection(SharedFullConnection(mc2,topHidden,outp))
net.addConnection(SharedFullConnection(mc2,bottomHidden,outp))

# finish up
net.sortModules()

#print net.activate([2,1]) 
```

在上面的代码中，我创建了两个 MotherConnections，mc 和 mc2，想法是这两个对象将分别在我的第一个和第二个矩形中保存共享权重，如图所示。然后我使用 ModuleSlice 将输入模块和隐藏模块分成两组。然后我尝试使用 mc 和 mc2 容器添加连接来连接这些路径。

通过运行上面的代码，我没有收到错误。但是，如果我尝试通过取消注释最后的 net.activate 语句来测试网络，我会收到以下错误：

```
Traceback (most recent call last):
  File "test.py", line 38, in <module>
    print net.activate([2,1])
  File "/usr/local/lib/python2.7/dist-packages/PyBrain-0.3.1-py2.7.egg/pybrain/structure/networks/feedforward.py", line 19, in activate
    return super(FeedForwardNetworkComponent, self).activate(inpt)
  File "/usr/local/lib/python2.7/dist-packages/PyBrain-0.3.1-   py2.7.egg/pybrain/structure/modules/module.py", line 123, in activate
    self.forward()
  File "/usr/local/lib/python2.7/dist-packages/PyBrain-0.3.1-py2.7.egg/pybrain/structure/modules/module.py", line 75, in forward
    self.outputbuffer[self.offset])
  File "/usr/local/lib/python2.7/dist-packages/PyBrain-0.3.1-  py2.7.egg/pybrain/structure/networks/feedforward.py", line 32, in _forwardImplementation
    c.forward()
  File "/usr/local/lib/python2.7/dist-packages/PyBrain-0.3.1-py2.7.egg/pybrain/structure/connections/connection.py", line 77, in forward
    self.outmod.inputbuffer[outmodOffset, self.outSliceFrom:self.outSliceTo])
  File "/usr/local/lib/python2.7/dist-packages/PyBrain-0.3.1-py2.7.egg/pybrain/structure/connections/shared.py", line 64, in _forwardImplementation
    FullConnection._forwardImplementation(self, inbuf, outbuf)
  File "/usr/local/lib/python2.7/dist-packages/PyBrain-0.3.1-py2.7.egg/pybrain/structure/connections/full.py", line 19, in _forwardImplementation
    outbuf += dot(reshape(self.params, (self.outdim, self.indim)), inbuf)
  File "/usr/lib/python2.7/dist-packages/numpy/core/fromnumeric.py", line 171, in reshape
    return reshape(newshape, order=order)
ValueError: total size of new array must be unchanged 
```

所以我想我一定对这种设置方式有误解。非常感谢任何能指出我对这些命令的理解在哪里误入歧途的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:50:03.943

我可能已经弄清楚了问题所在。我想我应该在 topHidden 和 bottomHidden 的隐藏层定义中包含 outSlices，例如

```
topHidden=ModuleSlice(h1,inSliceFrom=0,inSliceTo=1,outSliceFrom=0,outSliceTo=1)
bottomHidden=ModuleSlice(h1,inSliceFrom=1,inSliceTo=2,outSliceFrom=1,outSliceTo=2) 
```

天真地我想我认为这没有必要，因为隐藏层中所有内容的输出都连接到输出层。但是，如果不这样做，那么隐藏层似乎没有正确的 outdim(ension) 并导致上述错误。
此外，MotherConnections 应该这样定义：

```
mc=MotherConnection(1,name='mother')
mc2=MotherConnection(1,name='mother2') 
```

我还没有广泛测试这个网络，但它似乎不再有上述问题。

# windows - 在 Windows 8 中以编程方式设置 mailto：协议处理程序

> ID：14238446
> 
> 赞同：3
> 
> 时间：2013-01-09T15:16:53.230
> 
> 标签：windows, windows-8, desktop-application, mailto

在 Windows 8 之前，添加`mailto:`协议处理程序的方法很简单（如此处所述[，以编程方式使用 mailto 协议注册 Windows 程序](https://stackoverflow.com/questions/231/register-windows-program-with-the-mailto-protocol-programmatically)）

从 Windows 8 开始，旧方法不再有效。Win8 似乎强制执行以下键：`HKEY_CURRENT_USER\Software\Microsoft\Windows\Shell\Associations\URLAssociations\‌​MAILTO\UserChoice`.

似乎`ProgID`所选应用程序的 已散列并且无法伪造，至少我不能说。

有没有人有一个工作方法，或者可以指向一个实用程序类/代码，它将概述如何以编程方式完成这个？

对于代码，任何语言都可以。

**编辑**

其他讨论要求我指定一个用例，所以我认为这在这个问题的背景下会有所帮助。请考虑此屏幕截图[https://github.com/shellscape/Gmail-Notifier-Plus/raw/master/Promotional/prefs-account.png](https://github.com/shellscape/Gmail-Notifier-Plus/raw/master/Promotional/prefs-account.png)和允许用户指定 mailto 处理的复选框。在这个用例中，没有人强迫用户，用户可以控制并做出决定。虽然 Windows 8 商店应用程序（metro/modern）有一个可用的应用程序清单条目，可以自动执行上述缺失的过程，但桌面应用程序似乎并不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T06:08:05.283

您可以将您的应用程序设置为通过自定义协议（如 mailto:) 激活。当用户安装您的应用程序时，如果没有其他应用程序支持该协议，则不会提示他们，并且您会自动分配到该协议。

但是，如果用户已经有一个处理该协议的应用程序，那么将提示他们支持该协议的应用程序列表以及选择默认协议的选项。您不能强制用户做出特定选择。

此外，如果用户点击一个协议（如 myprotocol:）并且他们没有安装处理该协议的应用程序，那么他们将被发送到商店（应用程序），该商店会自动搜索支持该协议的所有应用程序。然后用户安装他们想要的任何东西。您不能强制用户做出特定选择（如果有的话）。

我写了一篇关于协议激活的文章。您可能会感兴趣：http: [//blog.jerrynixon.com/2012/10/walkthrough-using-windows-8-custom.html](http://blog.jerrynixon.com/2012/10/walkthrough-using-windows-8-custom.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T16:01:35.260

因此，我通过将字符串值“mailto”添加到 HKCU\Software\Clients\StartMenuInternet\FIREFOX.EXE\Capabilities\URLAssociations 并将“mailto”的值设置为等于ProgID 或“FirefoxURL”。然后我删除了 HKEY_CURRENT_USER\Software\Microsoft\Windows\Shell\Associations\URLAssociations\‌​MAILTO\UserChoice 中的密钥，以允许我再次选择默认客户端，这次 Firefox 可供我选择。

这个问题的本质似乎是不能再接管任何协议的默认客户端（Windows 8 之后）。用户必须选择。但是，如果您想打破操作系统约定，您可以挂接调用以创建选择默认对话框，这需要研究、努力，并且只是暂时的杂物，并且需要“打破”操作系统，或者您可以发送双重单击对话框为用户选择，假设您的程序具有提升的权限，以便它可以将点击发送到管理窗口。这可能是最简单的方法，用户永远不会知道发生了什么，只需快速闪一下。确实，在将自己注册为协议处理程序之后，我认为任何程序都不应删除默认的协议处理程序注册表项，从而迫使用户重新选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-29T11:04:48.423

这是在 Windows 8、8.1、2012、2012R2 中手动简单地设置 mailto 协议的方法

添加新的注册表分支`HKEY_CURRENT_USER\Software\Microsoft\Windows\Shell\Associations\UrlAssociations\mailto\UserChoice`

然后单击`mailto:`您的网络浏览器中的任何链接，例如 IE，最后在一个程序列表中供您选择以前不可用的。

MAILTO 现在也出现在 Control Panel\All Control Panel Items\Default Programs 中。没有其他选项可以从那里添加/删除协议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T20:15:30.440

在 Windows 8 中，您不能再让您的应用程序直接接管文件关联。这里有关于如何处理 Windows 应用商店和桌面应用程序的指南：http: [//msdn.microsoft.com/en-us/library/窗口/应用程序/hh700321.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700321.aspx)

# ruby-on-rails - 如何将 JQuery 作为包含文件？

> ID：14238452
> 
> 赞同：0
> 
> 时间：2013-01-09T15:17:00.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

现在，我的 application.html.erb 中有这个 JQuery
但我在我网站的每个 html 中都看到了这个。所以我想把它放进去`refresh_post.js`，它是在`/assets/javascripts`

但如您所知，application.html.erb 调用目录中的所有 JavaScript 文件。因为我用了很多，把这个

```
<%= javascript_include_tag "application" %> 
```

仅当用户登录时，我如何才能调用此 JQuery。我应该在哪里进行`refresh_post.js`以便除非用户登录，否则它不会被加载？这样做的目的是为了 SEO。我不想将 JavaScript 放在 HTML 中。

**意见/application.html.erb**

```
<% if current_user %>
    <%= javascript_tag do %>
        jQuery(document).ready(function () {
            refreshPartialPost();
            setInterval(refreshPartialPost, 1000)
        });

        function refreshPartialPost() {
          $.ajax({
            url: "/posts/refresh_partial",
            type: "GET",
            dataType: "script",
          });
        }
    <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:23:43.577

看看[这个](https://stackoverflow.com/questions/7134034/using-rails-3-1-assets-pipeline-to-conditionally-use-certain-css)，即使这是针对 CSS 的，也可以应用于 js

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:25:01.117

`application`这对你的布局怎么样：

```
<%= javascript_include_tag 'application' %>
<% if current_user %>
<%= javascript_include_tag 'refresh_post' %>
<% end %> 
```

# android - 在 Android 视图之间翻转

> ID：14238453
> 
> 赞同：3
> 
> 时间：2013-01-09T15:17:05.980
> 
> 标签：android, android-fragments, viewflipper

我正在编写一个应用程序，该应用程序的活动可以为最终用户提供两种格式的数据，一个使用 Teechart api 的条形图视图（可在此处获得：http: [//www.steema.com/teechart/mobile](http://www.steema.com/teechart/mobile)）和一个 listview 本机在安卓。目前我有一些这样的逻辑

首先我初始化一个`boolean flag = true;`

然后我使用这个按钮逻辑在视图之间切换。

```
OnClickListener changeViewListener = new OnClickListener(){

  public void onClick(View v){
    if(!flag){
       listLayout.setVisibility(View.GONE);
       chartView.setVisibility(View.VISIBLE);
       changeView.setText("List");
       flag = true;
    }else{
       listLayout.setVisibility(View.VISIBLE);
       chartView.setVisibility(View.GONE);
       changeView.setText("Graph");
       flag = false;
    }
  }
}; 
```

这段代码效果很好，没有给我带来麻烦，我只是想问是否可以用更好的方式来完成，比如使用视图翻转器？如果是这样，我如何实现视图翻转器代码以在这两个视图之间切换？

或者我应该为每个视图使用片段？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T15:22:45.710

也许这对你有帮助： [视图之间的动画](http://twigstechtips.blogspot.com/2010/11/android-animate-between-views.html)

它给出了一个通用的例子，也许你可以调整它以获得你想要的翻转效果。

**更新：** 该教程还提供了各种动画文档的链接。由此，我认为您可以使用[旋转动画](http://developer.android.com/reference/android/view/animation/RotateAnimation.html#RotateAnimation%28float,%20float,%20float,%20float%29)来创建翻转效果。您可以给出旋转角度和旋转视图所围绕的枢轴。

这个概念是您将一个视图**向外**旋转**并在**另一个视图中旋转。

**更新：**

View Flipper 是视图之间动画的实现。我发布的上述方法是通用的，您可以玩弄值并创建动画，让您拥有更精细的控制。您可以在其他人可能从未尝试过的视图之间创建转换。

View Flipper 的步骤：

**1.**在 View Flipper 中，您在 Layout XML 文件中定义一个 Flipper 元素。向这个鳍状肢元素添加两个子元素，它们可能只是两个视图或两个布局或一个视图和一个布局。View Flipper 在您定义的这两个 View 之间翻转。

**2.**`/res/anim`一旦你在 XML 中创建了这么多，你就可以为以下类型的进入和退出转换创建四个动画规则：

**一种。**留在

**湾。**被排除在外

**C。**就在

**d。**马上出来

**3.**在 1 和 2 之后，您现在在代码中添加 Touch 或 Gesture 侦听器，以侦听 Touch 和 Listen 事件。在这些侦听器中，然后您使用`vf.setInAnimation()`或启动动画`vf.setOutAnimation()`，`vf`您的 ViewFlipper 实例在哪里。

你可以在这里找到完整的代码：

**1.** [查看Flipper教程1](http://www.techrepublic.com/blog/app-builder/a-dog-limps-into-a-saloon-a-tutorial-on-androids-viewflipper-widget/634)

**2.** [查看Flipper教程2](http://shenhengbin.wordpress.com/2012/03/20/android-practice-viewflipper-sample/)

**更新：** 必须进行一些调整才能使 View Flipper 与 ListView 一起使用。我发现了另一个 SO question，其中通过少量编辑解决了相同的问题。[在这里](https://stackoverflow.com/questions/8924817/viewflipper-not-flipping-with-child-listview)查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:39:00.987

如果您只想在两个视图之间切换，那么这种方法就足够了。但是，您可以使用视图分页器来实现这一点，如果您有多个视图，这样的方法将特别有用，这样您就不会一次渲染它们并浪费内存。ViewPager 将管理何时创建和销毁视图。

1.  在布局中定义

    ```
    <android.support.v4.view.ViewPager
     android:id="@+id/viewPager"
     android:layout_width="match_parent"
     android:layout_height="match_parent" /> 
    ```

2.  创建适配器

    ```
    class MyPagerAdapter extends PagerAdapter {

        public int getCount() {
            return 2;
        }

        public Object instantiateItem(View collection, int position) {
            LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);

            // Inflate the correct view based on position
            View view = inflater.inflate(R.layout.yourLayoutHere, null);

            // ... Setup the view

            ((ViewPager) collection).addView(view, 0);
            return view;
        }

        @Override
        public void destroyItem(View arg0, int arg1, Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);
        }

        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);
        }

        @Override
        public Parcelable saveState() {
            return null;
        }
    } 
    ```

3.  设置适配器

    ```
    ViewPager viewPager = findViewById(R.id.viewPager);
    viewPager.setAdapter(new MyPagerAdapter()); 
    ```

现在单击按钮，您可以设置视图寻呼机的当前项目。

```
 viewPager.setCurrentItem(position); 
```

# iphone - 分别为 AVPlayer 和 MPMoviePlayerController 设置音量

> ID：14238460
> 
> 赞同：1
> 
> 时间：2013-01-09T15:17:18.420
> 
> 标签：iphone, avplayer, mpmovieplayer

我有一个在后台播放 mp3 的 AVPlayer 和一个对播放另一个 mp3 的用户可见的 MPMoviePlayer 我可以使用 MPMoviePlayer 设置音量

```
[[MPMusicPlayerController applicationMusicPlayer] setVolume:cObj_VolumeLevel]; 
```

但它正在改变 AVPlayer 和 MPMoviePlayer 的音量我想分别控制两者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:39:44.417

只是把它作为答案而不是评论......

MPMoviePlayerController setVolume 设置设备的音量，这将调整来自 ios 设备的任何内容的音量。AVPlayer 在能够为每个播放器单独设置音量方面更进一步。

# c# - XNA 内容目录迭代

> ID：14238461
> 
> 赞同：0
> 
> 时间：2013-01-09T15:17:19.647
> 
> 标签：c#, c#-4.0, xna, xna-4.0

是否有任何对象或函数可以遍历 XNA Content 中设置目录中的文件？

我的游戏内容目录中有一组图像，但随着项目的进行，我将添加更多图像。但是，我不想每次添加新图像时都必须添加一行代码，如果我能够遍历目录中的每个文件并将它们加载到数组中会更好。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:56:58.290

您可以使用这种方便的扩展方法

```
public static class Extension Methods
{
        public static List<T> LoadContentFolder<T>(this ContentManager contentManager, string contentFolder)
        {
            DirectoryInfo dir = new DirectoryInfo(contentManager.RootDirectory + "/" + contentFolder);
            if (!dir.Exists)
                throw new DirectoryNotFoundException();
            List<T> result = new List<T>();

            FileInfo[] files = dir.GetFiles("*.*");
            foreach (FileInfo file in files)
            {
                result.Add(contentManager.Load<T>(contentFolder + "/" + file.Name.Split('.')[0]));
            }
            return result;
        }
} 
```

如果您不想扩展类，请从构造函数中删除“this”关键字。你可以像这样使用它：

```
Dictionary<string,Texture2D> folderContent = Content.LoadContentFolder<Texture2D>("FolderName"); 
```

FolderName 只是您的内容文件夹中的一个子文件夹

并通过做访问`folderContent["MyAssetName"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:56:27.890

不在 XNA 4.0 中。MS 决定在 XNA 3.1 中隐藏一些使这成为可能的方法。这是一个示例项目，它显示了一个供您查看的解决方法——它最终在构建过程中构建了一个文件列表，这是一个杂乱无章的问题，但我认为它可以让您到达您想要的位置。

[内容清单扩展示例](http://xbox.create.msdn.com/en-US/sample/contentmanifestextensions)

# ios - Filemaker Pro 12 在 iOS 上将当前“正在浏览的记录”导出为 Excel

> ID：14238471
> 
> 赞同：0
> 
> 时间：2013-01-09T15:17:55.257
> 
> 标签：ios, csv, filemaker

我正在管理 Filemaker Pro 12 解决方案来创建采购订单并通过电子邮件发送给 iPad，但 iOS 平台不允许导出 Excel 文件。

目前我们将订单作为 .pdf 文件发送，但仓库必须手动批准每个订单。我们考虑的解决方案是发送一个 .csv 文件附加到电子邮件中，以减少仓库的工作量。

我正在使用 3 个不同的表来创建订单。存储产品的表、容器表（用于设置数量、折扣等）和订单本身的表。因此，您可以按顺序创建三个产品 A 和两个产品 B，这样可以正常工作。我的 PDF 解决方案使用了额外的布局并且工作正常。在 PC 或 Mac 上，您可以使用脚本和“*将记录另存为 Excel* ”功能导出 Excel 文件，但这在 iOS 上不可用，所以我正在寻找替代方案。

我想出的通过电子邮件发送 .csv 文件的脚本如下所示：

```
Set Error Capture [On]
Freeze Window
Go to Related Record [Show only related records; From table "Orders_Container"; Using Layout: "MailLayout" (Orders_Container); New Window]
If( Get (LastError) = 0)
    Sort Records[ Restore; No dialog]
    Set Variable[ $FILE; Value:Get (TemporaryPath ) & "file.csv" ]
    Export Records [No dialog; "$FILE"; Windows(ANSI)]
    Send Mail[Send via E-mail Client; To: "customer@web.com"; Subject: "Order"; "$FILE"]
End If
Close Windows [Current Window] 
```

我尝试使用“*导出记录*”功能，但它导出当前客户的所有记录，而不是仅可用于 PDF 导出的“**正在浏览的记录”。**我试过这样做[，](https://stackoverflow.com/a/6252620/1278949)但在 iOS 上你无法创建要导出的新文件，我也想不出别的办法。我不希望用户使用*菜单 -> 导出 -> 电子邮件*，因为他们每次都必须输入 3-4 个电子邮件地址，这非常耗时（这也会导出所有记录而不是当前的记录被浏览）。有什么方法可以导出当前打开的记录，将它们保存在 .csv 文件中并发送附有文件的邮件？提前致谢。

**编辑：**具有讽刺意味的是，在使用不同的脚本进行了一些测试之后，我在这里发布的脚本现在可以正常工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:35:44.880

该`Export Records`函数导出当前搜索结果 - 与`Records Being Browsed`. 这表明其他问题使您的脚本无法正常工作。您可能希望查看相关记录以及找到的集合。在调用函数之前使用临时暂停`Import Records`以查看存在的集合。

另外，请记住，如果您的`Go to Related Record`通话出现错误，则不会发生任何事情。由先前导出创建的记录将保留在原处，这可能会显示与您预期不同的记录集。

# android - BroadcastReceiver 不会唤醒手机

> ID：14238476
> 
> 赞同：1
> 
> 时间：2013-01-09T15:18:08.797
> 
> 标签：android, broadcastreceiver

我有一个警报应用程序。我大致知道接收器的生命周期以及如何使用 WakeLock。

然而今天，一位用户联系了我，他向我发送了一个非常奇怪的日志，并抱怨他的警报直到他自己解锁手机后才开始。在接收器完成工作后和活动开始之前，我曾经遇到过手机重新进入睡眠状态的问题，但在接收器中创建 WakeLock 似乎可以解决问题。至少直到今天 - 从日志看来，在用户自己解锁手机之前，根本没有调用 onReceive 方法。

事实：

*   这是我听说的第一个案例
*   它发生在用户身上几次，但不是每次
*   日志是通过向 SQLite 数据库添加文本来准备的。它似乎并没有以任何重要的方式延迟申请
*   来自 onReceive 的信息是在预期警报开始时间后 100 秒内记录的。这是 onReceive 中的第一个方法调用
*   在用户解锁手机后立即启动警报
*   我使用 AlarmManager.RTC_WAKEUP 标志
*   用户说他没有任何自定义ROM。如果他有任何自定义/特殊锁屏，我等待答案
*   手机型号为 Sony Xperia U ST25A，Android 4.0.4

任何想法可能导致此问题？BroadcastReceiver 的“内部”WakeLock 是否有可能无法以某种方式工作？

编辑：

我想在这里强调这个问题——BroadcastReceiver 应该在其整个 onReceive 方法期间保持手机处于唤醒状态。但是在我的情况下，要么是

*   电话在 onReceive 方法结束之前进入睡眠状态（甚至在完成“记录呼叫”之前）
*   电话根本没有被接收器唤醒

另外，我想指出一个事实，用户已经明确表示 - 当他自己解锁手机时，警报就开始了。几次。

一些代码：

```
@Override
public void onReceive(Context context, Intent intent) {
    Logger.initialize(context, "AlarmReceiver");
    ...
} 
```

记录器方法：

```
public synchronized static void initialize(Context context, String text) {
    try {
        if (mInstance == null) { // this is the block that is runned
            BugSenseHandler.initAndStartSession(context, BUGSENSE_ID);
            mInstance = new Logger(context);
            log("== Logger initialized == from "
                    + (text != null ? text : "")); // it stores times as well. Said 
                                                   // that alarm was started over 100 
                                                   // seconds after it should
        } else {
            log("logger initialized again from "
                    + (text != null ? text : ""));
        }
    } catch (Exception e) {
        try {
            BugSenseHandler.sendException(e);
            mInstance = null;
        } catch (Exception e2) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:26:09.233

看看[Commonsware](https://github.com/commonsguy/cwac-wakeful/blob/master/README.markdown)的 WakefulIntentService

# java - 如何基于外部输入运行 Junit / TestNG 测试？

> ID：14238477
> 
> 赞同：0
> 
> 时间：2013-01-09T15:18:09.860
> 
> 标签：java, selenium, junit, testng, junit4

我有一个 Excel 文件，我在其中存储测试用例名称/ID。

现在，如果我的测试用例名称（在 excel 中）以 'test' 开头，我想执行我的 Junit / TestNG test 之一。如果我的测试用例名称（在 excel 中）以“check”开头，我想执行另一个 Junit / TestNG 测试。同样，我想根据 excel 中的 ID 执行不同的测试。

我怎么能做到这一点？有人可以发布一个对我有很大帮助的例子。

谢谢，迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:17:18.070

我认为您想要做的是根据您的 excel 表动态构建测试。这就是您可以通过[编程](http://testng.org/doc/documentation-main.html)方式运行 testng 的方式。

您需要做的是从您的 excel 中读取数据，创建 XmlClass 并根据您的方法的测试名称设置 xmlclass 的方法。将 xmlclass 添加到 XmlSuite。所以基本上你是在运行时根据你的 excel 中的测试用例名称生成一个动态套件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:25:47.720

您正在寻找的是一种称为反射的东西。在您的 xml 中，您将拥有要运行的类和方法名称。在java中，您将使用反射来获取类，并迭代方法以确定是否有任何匹配您想要的。反射通常不是一种有效的做事方式，但出于测试的目的，它可以做你想做的事。

一个例子是

```
for(Method method : this.getClass().getMethods()){
{
    if(method.getName().equals(name)){
         method.invoke();
    }
} 
```

请阅读[http://docs.oracle.com/javase/tutorial/reflect/class/index.html](http://docs.oracle.com/javase/tutorial/reflect/class/index.html)了解详情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T16:58:00.397

我使用 testNG 做了类似的事情。我的要求是运行用户将从测试用例列表中选择的测试用例。我使用 Jenkins 而不是 excel 表让用户从列表中选择测试用例。逻辑也可能对你有用。就这个：

我没有弄清楚要运行哪种方法，而是为所有测试用例指定了一个唯一的测试组名称。该组名应与您在 Excel 工作表中的组名相同。唯一需要的逻辑是创建 testng.xml 以使用输入组名称运行测试。这可以使用 testNG 对象或使用 dom4j 或类似的东西创建 tesNG.xml 来完成。

# python - pickle 加载错误“__init__() 恰好需要 2 个参数（给定 1 个）”

> ID：14238479
> 
> 赞同：3
> 
> 时间：2013-01-09T15:18:16.580
> 
> 标签：python, pickle

我的问题是自定义类已与 pickle.dump 一起保存，因为这些文件已保存自定义类已更改，现在当我使用 pickle.load 时出现此错误。是不是保存的文件有问题？

错误：

```
File "/cprprod/extern/lib/python2.7/pickle.py", line 1378, in load
return Unpickler(file).load()
File "/cprprod/extern/lib/python2.7/pickle.py", line 858, in load
dispatch[key](self)
file "/cprprod/extern/lib/python2.7/pickle.py", line 1070, in load_inst
self._instantiate(klass, self.marker())
File "/cprprod/extern/lib/python2.7/pickle.py", line 1060, in _instantiate
value = klass(*args) 
```

我可以做些什么来加载文件吗？

编码

```
file = open(filename,'rb')
obj = pickle.load(file) 
```

会给我错误。

* * *

这是一些可以重现错误的最小代码：

```
import pickle

class foo:
    def __init__(self,a):
        self.a = a

    def __str__(self):
        return str(self.a)

obj = foo(1)

with open('junk','wb') as f:
    pickle.dump(obj,f)

class foo:
    def __init__(self,a,b):
        self.a = a
        self.b = b
    def __str__(self):
        return '%s %s'%(self.a,self.b)

    def __getinitargs__(self):
        return (self.a,self.b)

with open('junk','rb') as f:
    obj = pickle.load(f)
    print str(obj) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:53:34.590

If you added `__getinitargs__()` then it is up to you to make sure your new class can handle the arguments passed to `__init__()`. Old data that doesn't have the `__getinitargs__` data will still lead to `__init__` to be called but with *no* arguments.

Make the arguments to `__init__` optional via keyword arguments:

```
def __init__(self, otherarg=None):
    if otherarg is None:
        # created from an old-revision pickle. Handle separately.
        # The pickle will be loaded *normally* and data will still be set normally
        return
    self.otherarg = otherarg 
```

When loading the old-style pickle, the data for these classes will still be restored. You can use `__setstate__()` to transform the internal state as needed.

Alternatively, temporarily *remove* the `__getinitargs__` method from the class:

```
initargs = foo.__getinitargs__.__func__
del foo.__getinitargs__
obj = pickle.load(f)
foo.__getinitargs__ = initargs 
```

and re-dump your pickles from the now-loaded objects with `__getinitargs__` reinstated.

I've tested both methods and in both cases the old data is loaded correctly and you can then dump your objects again to a new pickle file *with* `__getinitargs__` just fine.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:07:24.813

鉴于我代表您在问题中发布的人为代码，我们可以将这个错误“修复”为：

```
with open('junk','rb') as f:
    try:
        obj = pickle.load(f)
    except Exception as e:
        print e
        position = f.tell()
        a = foo.__getinitargs__
        del foo.__getinitargs__
        f.seek(position)
        obj = pickle.load(f)
        foo.__getinitargs__ = a

    print str(obj) 
```

现在我们看到该实例已取消腌制并且不再具有属性`b`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:24:22.860

您可能希望修改自定义类以选择性地需要第二个参数。这将保持与您的腌制对象的奖励兼容性。

# postgresql - 通过动态 sql 将 UUID 添加到表中时出错

> ID：14238485
> 
> 赞同：0
> 
> 时间：2013-01-09T15:18:37.110
> 
> 标签：postgresql, plpgsql

我想使用动态 sql 将 uuid 添加到表中。Hier 是我的代码：

```
CREATE OR REPLACE FUNCTION "Surrogate_gen"(tblname text) RETURNS void AS
$BODY$DECLARE 
uid UUID;
tablename text;
BEGIN
uid:=(select uuid_generate_v1());
tablename:=tblname;
execute 'INSERT INTO public."'||tablename||'"(surrogate) VALUES('||uid||')';
END
$BODY$
LANGUAGE plpgsql 
```

但是发生了这样的错误： *INSERT INTO public."produkt"(surrogate) VALUES(ed520ad0-5aba-11e2-961b-1c4bd605a98d) Syntaxerror: »aba«* that is in my uid

如果我不使用动态 sql 可以在此表中添加 uuid。请告诉我为什么会发生这个错误？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:22:22.010

最简单的方法是将 to 移到`select`字符串内部：

```
BEGIN
tablename:=tblname;
execute 'INSERT INTO public."'||tablename||'"(surrogate) select uuid_generate_v1()';
END 
```

# javascript - 在 IE 8 中使用 javascript 进行文件验证

> ID：14238486
> 
> 赞同：1
> 
> 时间：2013-01-09T15:18:42.563
> 
> 标签：javascript

我正在尝试使用 javascript 验证来验证文件大小。它适用于其他浏览器但不适用于 Internet Explorer 请在这方面帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:12:12.953

使用 javascript 无法在 IE 和 safari 中获取文件对象。您可以使用适用于所有浏览器的 jquery 插件 uploadify。有许多选项来检查文件大小、类型等。要保存文件的值，如名称、大小或其他，您可以使用 uplodify 返回响应。将这些值保存在隐藏字段中，并在发布后将它们保存在您的数据库中。

请访问以下链接。[http://www.uploadify.com/documentation/](http://www.uploadify.com/documentation/)

# wix - 自定义 Wix Burn 引导程序未检测到 MSI 安装状态

> ID：14238488
> 
> 赞同：2
> 
> 时间：2013-01-09T15:18:48.843
> 
> 标签：wix, windows-installer, wix3.6, bootstrapper, burn

我正在创建一个基于 Wix/Burn（3.6 发行版）的自定义向导式引导程序。我基于 Wix 3.6 引导程序代码。

问题是我无法让引导程序检测作为捆绑包一部分的 setup.msi 的安装状态。

据我了解，所需要的只是调用 Engine.Detect()，其中 Engine 是 Bootstrapper 应用程序中的 Wix 引擎的一个实例。那时我应该能够查看 Bootstrapper.Command.Action 以查看所需的启动操作是什么。

我的包包含两个项目：.NET 4（网络安装）和我的 setup.msi。

我怀疑我缺少一个步骤来确定是否应该将我的向导置于维护模式与安装模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T17:10:05.510

首先，要确定是否检测到包，您可以检查当前用户临时目录中的日志文件。它会告诉您是否已检测到包裹。

现在要确定是否进入维护模式与安装模式，您可以通过订阅 DetectPackageComplete 事件来检查包状态。在下面的示例中，我的 UI 使用两个属性 InstallEnabled 和 UninstallEnabled 来确定要呈现给用户的“模式”。

```
private void OnDetectPackageComplete(object sender, DetectPackageCompleteEventArgs e)
    {
        if (e.PackageId == "DummyInstallationPackageId")
        {
            if (e.State == PackageState.Absent)
                InstallEnabled = true;
            else if (e.State == PackageState.Present)
                UninstallEnabled = true;
        }
    } 
```

[上面的代码示例来自我关于创建自定义 WiX 托管引导程序应用程序](http://bryanpjohnston.com/2012/09/28/custom-wix-managed-bootstrapper-application/)所需的最少部分的博客文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T14:18:52.310

确定您的 Bundle 是否已安装的一种简单方法是使用该`WixBundleInstalled`变量。成功安装 Bundle 后，该值将设置为非零。

此外，在 WiX v3.7+ 中，`OnDetectBegin`回调现在会告诉您是否安装了捆绑包，因此您不必正常查询变量。

进行这些更改是为了更容易检测维护模式，以避免@BryanJ 建议的完全合理的解决方案。

# javascript - 在单元测试 AngularJS 服务时注入依赖服务

> ID：14238490
> 
> 赞同：52
> 
> 时间：2013-01-09T15:18:50.650
> 
> 标签：javascript, unit-testing, angularjs, jasmine, karma-runner

我正在测试服务 A，但服务 A 依赖于服务 B（即服务 B 被注入服务 A）。

我见过[这个问题](https://stackoverflow.com/q/10551986/295797)，但我的情况有点不同，因为在我看来，*模拟*服务 B 而不是注入服务 B 的实际实例更有意义。我会用茉莉花间谍来模拟它。

这是一个示例测试：

```
describe("Sample Test Suite", function() {

  beforeEach(function() {

    module('moduleThatContainsServiceA');

    inject([
      'serviceA', function(service) {
        this.service = service;
      }
    ]);

  });

  it('can create an instance of the service', function() {
    expect(this.service).toBeDefined();
  });
}); 
```

我得到的错误是：

> 错误：未知提供者：serviceBProvider

我怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-09T16:33:42.200

实际上在 AngularJS 中，依赖注入使用“最后胜利”规则。因此，您可以在包含模块和依赖项之后在测试中定义您的服务，然后当您正在测试的服务 A 将使用 DI 请求服务 B 时，AngularJS 将提供服务 B 的模拟版本。

这通常是通过定义像 MyAppMocks 这样的新模块，将模拟的服务/值放在那里，然后将该模块添加为依赖项来完成的。

种类（示意图）：

```
beforeEach(function() {
  angular.module('MyAppMocks',[]).service('B', ...));
  angular.module('Test',['MyApp','MyAppMocks']);
  ... 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-06-13T21:53:48.667

我在 CoffeeScript 中这样做并发现了一个额外的问题。（此外，我发现此页面上的代码简洁得令人困惑。）这是一个完整的工作示例：

```
describe 'serviceA', ->
   mockServiceB = {}

   beforeEach module 'myApp' # (or just 'myApp.services')

   beforeEach ->
      angular.mock.module ($provide) ->
         $provide.value 'serviceB', mockServiceB
         null

   serviceA = null
   beforeEach inject ($injector) ->
      serviceA = $injector.get 'serviceA'

   it 'should work', ->
      expect( true ).toBe( true )
      #serviceA.doStuff() 
```

在没有明确返回 null 之后`$provide.value`，我不断得到`Error: Argument 'fn' is not a function, got Object`. 我在这个[Google Groups 线程](https://groups.google.com/forum/#!msg/angular/gCGF_B4eQkc/XjkvbgE9iMcJ)中找到了答案。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-05-20T18:48:22.380

Valentyn 解决方案对我有用，但还有另一种选择。

```
beforeEach(function () {

    angular.mock.module("moduleThatContainsServiceA", function ($provide) {
                $provide.value('B', ...);
            });
}); 
```

然后，当 AngularJS 服务 A 通过依赖注入请求服务 B 时，将提供服务 B 的模拟，而不是来自 moduleThatContainsServiceA 的服务 B。

这样你就不需要创建一个额外的角度模块来模拟一个服务。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-27T10:37:21.640

我发现最简单的方法就是注入服务 B 并模拟它。例如，服务车取决于服务引擎。现在我们需要在测试 Car 时模拟 Engine：

```
describe('Testing a car', function() {
      var testEngine;

  beforeEach(module('plunker'));
  beforeEach(inject(function(engine){
    testEngine = engine;
  }));

  it('should drive slow with a slow engine', inject(function(car) {
    spyOn(testEngine, 'speed').andReturn('slow');
    expect(car.drive()).toEqual('Driving: slow');
  }));
}); 
```

参考：[https ://github.com/angular/angular.js/issues/1635](https://github.com/angular/angular.js/issues/1635)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-12T13:57:49.477

这对我有用。关键是定义要模拟的真实模块。调用 angular.mock.module 使真正的模块可模拟并允许连接事物。

```
 beforeEach( ->
        @weather_service_url = '/weather_service_url'
        @weather_provider_url = '/weather_provider_url'
        @weather_provider_image = "test.jpeg"
        @http_ret = 'http_works'
        module = angular.module('mockModule',[])
        module.value('weather_service_url', @weather_service_url)
        module.value('weather_provider_url', @weather_provider_url)
        module.value('weather_provider_image', @weather_provider_image)
        module.service('weather_bug_service', services.WeatherBugService)

        angular.mock.module('mockModule')

        inject( ($httpBackend,weather_bug_service) =>
            @$httpBackend = $httpBackend
            @$httpBackend.when('GET', @weather_service_url).respond(@http_ret)
            @subject = weather_bug_service
        )
    ) 
```

# c# - LINQ group by with count 问题

> ID：14238491
> 
> 赞同：0
> 
> 时间：2013-01-09T15:18:52.133
> 
> 标签：c#, linq, fluent-nhibernate

我正在尝试运行以下查询，但由于某种原因`MemberTransactionCount`，并且`NonMemberTransactionCount`以完全相同的值返回。这些`.Where()`条款似乎没有像我们期望的那样起作用。

希望有人能指出我可能出错的地方。

```
from trans in transactions
orderby trans.TransactionDate.Year , trans.TransactionDate.Month
group trans by new {trans.TransactionDate.Year, trans.TransactionDate.Month}
into grp
select new MemberTransactions
{
    Month = string.Format("{0}/{1}", grp.Key.Month, grp.Key.Year),
    MemberTransactionCount =
        grp.Where(x => x.Account.Id != Guid.Empty || x.CardNumber != null)
           .Sum(x => x.AmountSpent),
    NonMemberTransactionCount =
        grp.Where(x => x.Account.Id == Guid.Empty && x.CardNumber == null)
           .Sum(x => x.AmountSpent)
} 
```

**编辑** 我已经在数据库中验证了结果不是他们应该的。它似乎将所有内容**加**在一起，而没有考虑到`Account`我们正在研究的标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:01:00.287

我最终用两个单独的查询解决了这个问题。这并不完全如我所愿，但它完成了这项工作，而且似乎和我希望的一样快。

```
var memberTrans = from trans in transactions
              where trans.Account != null
                    || trans.CardNumber != null
              orderby trans.TransactionDate.Month
              group trans by trans.TransactionDate.Month
              into grp
              select new
                  {
                      Month = grp.Key,
                      Amount = grp.Sum(x => x.AmountSpent)
                  };
var nonMemberTrans = (from trans in transactions
                  where trans.Account == null
                        && trans.CardNumber == null
                  group trans by trans.TransactionDate.Month
                  into grp
                  select new
                      {
                          Month = grp.Key,
                          Amount = grp.Sum(x => x.AmountSpent)
                      }).ToList();

var memberTransactions = new List<MemberTransactions>();
foreach (var trans in memberTrans)
{
var non = (from nt in nonMemberTrans
           where nt.Month == trans.Month
           select nt).FirstOrDefault();

var date = new DateTime(2012, trans.Month, 1);
memberTransactions.Add(new MemberTransactions
    {
        Month = date.ToString("MMM"),
        MemberTransactionCount = trans.Amount,
        NonMemberTransactionCount = non != null ? non.Amount : 0.00m
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:14:29.270

我认为这里的主要问题是您怀疑结果，尽管它可能是正确的。

添加另一个属性进行验证：

```
TotalAmount = grp.Sum(x => x.AmountSpent) 
```

# prolog - Prolog 匿名变量

> ID：14238492
> 
> 赞同：12
> 
> 时间：2013-01-09T15:18:53.407
> 
> 标签：prolog, prolog-toplevel, prolog-anonymous-variable

这是我对 Prolog 变量的理解。

1.  单个下划线代表匿名变量，每次出现时就像一个新变量。

2.  像 _W 这样以下划线开头的变量名不是匿名变量。或者，在 Prolog 中生成的变量名，比如 _G189，不被认为是匿名的：

```
?- append([1,2],X,Y).
X = _G189
Y = [1, 2|_G189] 
```

你能帮我理解吗？

顺便说一句，我从一些教程中得到了上面的例子，但是当我在 SWI-Prolog 版本 6 中运行它时，我得到以下信息：

```
?- append([1,2],X,Y).
Y = [1, 2|X]. 
```

感谢您。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T18:20:37.623

## 变量

匿名变量`_`是唯一的变量，其中不同的出现代表不同的变量。其他以开头的变量`_` 不是匿名的。不同的出现是指相同的变量（在相同的范围内）。但是，如果一个不以下划线开头的变量只出现一次，许多像 SWI 这样的 Prologs 会警告你：

```
?- [user].
a(V).
Warning: user://1:9:
        Singleton variables: [V] 
```

您必须重命名该变量`_V`以避免该警告。这有助于程序员更好地发现变量名中的拼写错误。在许多系统中还有更多这样的限制。

```
a(_V,_V).
Warning: user://1:12:
        Singleton-marked variables appearing more than once: [_V] 
```

同样，这只是一个警告。如果您希望以 开头的变量`_`应该出现两次（没有警告），请改写`__`。但最好坚持使用更有意义的名称而不用开头`_`。

## 答案

你从 Prolog 的顶层循环中得到的是答案；尤其是答案替换。它们用于代表解决方案（这是我们真正感兴趣的）。有几种方法可以表示答案替换。您正在使用的教程似乎是指一个非常旧的 SWI 版本。我会说这个版本可能有 15 到 20 年的历史。

```
?- append([1,2],X,Y).
X = _G189
Y = [1, 2|_G189] 
```

然而，给出的答案并没有错：`_G189`引入了一个新的辅助变量。

较新版本的 SWI 和许多其他系统试图最小化输出，避免辅助变量。所以

```
?- append([1,2],X,Y).
Y = [1, 2|X]. 
```

一样好。这是“较新”版本（也有 6 年历史）的答案。请注意，此答案比第一个答案告诉您更多：它不仅更紧凑地向您显示答案替换，而且还告诉您确实有*这个*答案（仅此而已）。看到最后的点`.`了吗？这意味着：这里没有更多的答案。否则会有`;`下一个答案。

# javascript - 对复杂的类结构和 Knockout 感到困惑

> ID：14238493
> 
> 赞同：2
> 
> 时间：2013-01-09T15:19:00.153
> 
> 标签：javascript, knockout.js

进入淘汰赛并慢慢习惯它。试图在一个新项目中使用它，但很难让事情排成一行。虽然我理解并且可以做一些简单的例子（文本框绑定到 ko.observables 的简单表单，或者绑定到 ko.observableArray 的表或列表），但我无法获得正确的组合语法，特别是如果我想将数据转换为 JSON 格式，以便通过 Web 服务将其传输到数据库中。

基本上它是一个数据输入表单，带有一些文本输入框，然后是一个项目列表（想想公司信息+它的员工列表）。

我在这里有一个示例小提琴：http: [//jsfiddle.net/rhzu6/](http://jsfiddle.net/rhzu6/)

在 saveData 函数中，我只是不知道如何将数据打包。做 ko.toJS(self) 只显示“对象”。

我尝试将数据定义为对象，但很快就迷路了：

```
function Company(CompanyName, ZipCode) {

    var self = this;
    self.ZipCode = ko.observable(ZipCode);
    self.CompanyName = ko.observable(CompanyName );
    self.Employees = ko.observableArray();
}

function Employee(FirstName, LastNameB) {
    var self = this;
    self.FirstName = ko.observable(FirstName);
    self.LastName = ko.observable(LastName);
} 
```

然后 ViewModel 看起来像：

```
function viewModel() {
    var self = this;
    self.Company = ko.observable(); // company?
    self.Employees = ko.observableArray(); // ?
} 
```

但是遇到了同样的问题。并且还有绑定问题 - data-bind:"value: CompanyName" 抛出异常说它不知道 CompanyName 是什么......

把我难住了。我敢肯定，我只是错过了一些简单的事情。

任何和所有的帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:20:58.750

您正在寻找`ko.toJSON`哪个将首先在您的 ViewModel 上调用 ko.toJS ，然后再调用`JSON.stringify`。

`ko.toJS`会将您的淘汰模型转换为一个简单的 JavaScript 对象，从而将所有可观察对象等替换为它们各自的值。

我更新了你的[小提琴](http://jsfiddle.net/rhzu6/2/)来演示。

有关更多信息，请查看 Ryan Niemeyers 博客中的这篇[文章](http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html)。

另一种方法是使用`ko.utils.postJson`：

```
ko.utils.postJson(location.href, {model: ko.toJS(viewModel) }); 
```

再次注意`ko.toJS`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:31:16.423

在我看来，好像您（语义上）想要提交表单。因此，我认为您应该使用[提交绑定](http://knockoutjs.com/documentation/submit-binding.html)。最大的好处是您监听了提交事件，它允许通过其他方式提交，例如 Ctrl+Enter 或您想要的任何其他键盘组合。

这是有关 submitEvent 处理程序外观的示例。请注意，它使用[ko.mapper](http://knockoutjs.com/documentation/plugins-mapping.html)，这是从您想要的任何 JS/JSON 对象创建 viewModel 的好方法。通常，你会

**[后端模型]** ->*序列化*-> **[JS/JSON-ojbect]** -> *ko.mapper.fromJSON(obj)* ->**淘汰有线 viewModel**。

```
viewModel.submitEvent = function () {
    if (viewModel.isValid()) { //if you are using knockout validate
        $.ajax(
            {
                url: '/MyBackend/Add',
                contentType: 'application/json',    
                type: 'POST',
                data: ko.mapping.toJSON(viewModel.entityToValidateOnBackend),
                success: function (result) {
                    ko.mapping.fromJSON(result, viewModel);
                }
            }
        );
    }
}; 
```

祝你好运！

# mdx - 高级 MDX 查询

> ID：14238498
> 
> 赞同：0
> 
> 时间：2013-01-09T15:19:36.533
> 
> 标签：mdx, business-intelligence

我正在为数据挖掘目的制作 OLAP 多维数据集。

域是运行测试的仪器，测试的状态 id 为 1,2,3，表示正常、警告和错误。我已经部署了立方体并且它工作得很好。我的衡量标准是我的测试之和。我有一个与测试表关联的时间表，用于测试运行的时间。

我有四个维度：

仪器：保存有关仪器的信息。

测试：包含所有测试以及有关其运行时间的信息。

状态：包含上述三种状态。

时间：及时整理测试

我的问题是，我还有另一个名为“NotRun”的状态。与其他状态一样，NotRun 测试不能保存在数据库中，而是通过查询计算得出。

Notrun 的计算方法是从仪器表中选择所有仪器，然后提取在给定时间段内要在测试表中找到的仪器。

我想使用 MDX 来做上面提到的事情，但是我不想给一个时间段，而是希望多维数据集为我动态地处理它。

我不想选择特定的年份，而是想用我的时间维度动态地处理它。

其中（[日期].[日历年].&[2002]）

我真的被困住了。知道我们如何在 Business Studio Intelligence 2008 中实现这一目标吗？

一切顺利，哈桑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:03:58.060

要回答“我如何让 MDX 自行选择日期成员”的问题，请参阅我在[此处输入链接描述的回答](https://stackoverflow.com/questions/3536359/how-to-get-latest-date-in-mdx/3557849#3557849)

或者您是否希望 Business Studio Intelligence 每次运行报告时弹出一个框并询问日期？

# django - Django Admin 中的 Django-tinymce - “找不到变量：tinyMCE”

> ID：14238501
> 
> 赞同：1
> 
> 时间：2013-01-09T15:19:45.597
> 
> 标签：django, tinymce, django-tinymce

我正在尝试使用 django-tinymce 在 django admin 中编辑字段。

我已经在我的 virtualenv ( `django-tinymce==1.5.1b4`) 中安装了该应用程序。它列在我安装的应用程序中 -

```
INSTALLED_APPS = (
    #...

    'tinymce',

    #...
) 
```

我的设置包括以下

```
TINYMCE_DEFAULT_CONFIG = {
'theme': "advanced",
'theme_advanced_toolbar_location': "top",
'theme_advanced_buttons1': "bold,italic,underline,separator,"
    "bullist,separator,outdent,indent,separator,undo,redo",
'theme_advanced_buttons2': "",
'theme_advanced_buttons3': "",
}

TINYMCE_SPELLCHECKER = True
TINYMCE_COMPRESSOR = True 
```

而且我有可用的文件`/MEDIA_ROOT/js/tiny_mce`（默认）。

我的模型看起来像 -

```
from tinymce import models as tinymce_models

class MyModel(models.Model)

    post = tinymce_models.HTMLField() 
```

当我转到模型管理页面时，该字段显示为普通文本字段，我的浏览器告诉我该字段的内联 js 脚本有错误。它说它不识别变量`tinyMCE`。看起来页面甚至没有尝试加载 js 文件（我没有得到 404 - 我看不到任何正在加载的迹象）。

我不确定我错过了什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:16:06.787

1.  先生，您完成了`python manage.py collectstatic`吗？
2.  什么值变量`settings.py`在`TINYMCE_JS_ROOT`和`TINYMCE_JS_URL`
3.  如果未设置变量`TINYMCE_JS_URL`，请检查您，先生，是否在`/MEDIA_ROOT/js/tiny_mce/tiny_mce.js`. 如果没有，请尝试从`django-tinymce`'s egg 手动复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:45:54.970

好的，看起来它可能是 django_tinymce 代码中的错误。我已经恢复到 1.5.1b2 并且一切都按预期工作。我想我应该考虑提交错误报告。

# windows-phone - 在 Windows Phone PhoneTextBox 上设置焦点会引发异常，并显示消息“0x8000ffff”

> ID：14238507
> 
> 赞同：0
> 
> 时间：2013-01-09T15:19:59.950
> 
> 标签：windows-phone, silverlight-toolkit

在我的 WP7.1 应用程序上，Windows Phone Toolkit PhoneTextBox 在设置焦点时偶尔会抛出异常消息“0x8000ffff”（通过点击 PhoneTextBox）。问题是这样重现的：

1.  确保 PhoneTextBox.IsReadOnly 设置为 true。
2.  按后退按钮转到上一页。
3.  导航回包含 PhoneTextBox 的页面。
4.  点击 PhoneTextBox 使其获得焦点。

我针对版本 4.2012.10.30 向 Windows Phone Toolkit 报告了这个问题：http: [//phone.codeplex.com/workitem/10726](http://phone.codeplex.com/workitem/10726)

如果 PhoneTextBox.IsReadOnly 在按下后退按钮时设置为 false，则不会引发异常。由于 false 是默认值，因此如果不修改 PhoneTextBox.IsReadOnly 属性的值，则根本不会发生此异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:19:59.950

在 WP Toolkit 中修复此问题之前，一种解决方法是在 OnNavigatingFrom 事件处理程序中将 PhoneTextBox.IsReadOnly 设置为 false（在 OnNavigatedTo 中执行此操作不起作用）。

```
 protected override void OnNavigatingFrom(NavigatingCancelEventArgs e)
    {
        ProblematicPhoneTextBox.IsReadOnly = false;
        base.OnNavigatingFrom(e);
    } 
```

# powershell - 基本文件操作

> ID：14238514
> 
> 赞同：0
> 
> 时间：2013-01-09T15:20:26.563
> 
> 标签：powershell

请参考我在 PS 中的第一个代码，如下：我创建了一个`Test.ps1`文件并包含以下代码：

```
$path = D:\Five-Levels_Deep_Subfolder\Data

$file = A_Very_Long_INI_FileName.ini 

#If $file exists, Delete it: 
if (Test-Path + $path) { Remove-Item $path + $file } 

#Run the following Application: 
& $path + myApplication.exe 
```

但是，结果试图用一些可怕的错误消息来吓唬我。事实上，上述代码行都没有错误。

请忍受 PS 中的蹒跚学步的孩子，并帮助我取得巨大成功:-)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:26:07.240

试试这个

```
$path = "D:\Five-Levels_Deep_Subfolder\Data"    
$file = "A_Very_Long_INI_FileName.ini"    
$filepath = join-path $path $file    
#If $filepath exists, Delete it:     
if (Test-Path  $filepath) { Remove-Item $filepath}     
#Run the following Application: 
& ($path + "\myApplication.exe") 
```

# c# - System.IO.Directory.GetFiles() 可以使用多个搜索字符串进行搜索吗？

> ID：14238516
> 
> 赞同：1
> 
> 时间：2013-01-09T15:20:32.110
> 
> 标签：c#, visual-studio-2005, .net-2.0

我想搜索所有结尾`.vcproj`或`.sln`目录中的文件。从文档中我不清楚是否`searchPattern`可以指定多个过滤器或者我是否必须运行单独的搜索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:23:15.910

不可以，您只能指定一个过滤器。

您可以将每次搜索的结果添加到 a`HashSet<string>`以获得与这两个搜索匹配的唯一文件列表。A`List<string>`在两个不同的通配符搜索模式可以匹配同一个文件的边缘情况下不起作用。

更新

`HashSet<T>`仅在 .NET 3.5 及更高版本中可用。由于您使用的是 2.0，因此您可以使用 a `List<T>`，但您应该在添加之前检查每个项目是否已经存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:24:42.577

因为[`GetFiles()`](http://msdn.microsoft.com/en-us/library/system.io.directory.getfiles.aspx)您可以使用 1 个过滤器选项。你应该分别得到它们。

```
string[] file1 = System.IO.Directory.GetFiles(path, "*.vcproj");
string[] file2 = System.IO.Directory.GetFiles(path, "*.sln "); 
```

# c# - 为什么 .NET 中这么多命名集合没有实现 IEnumerable ?

> ID：14238523
> 
> 赞同：12
> 
> 时间：2013-01-09T15:20:42.437
> 
> 标签：c#, ienumerable

随机示例：

```
ConfigurationElementCollection 
```

.Net 有大量这些`WhateverCollection`没有实现`IEnumerable<T>`的小类，这意味着我不能使用 Linq 来使用它们开箱即用的对象。甚至在 Linq 之前，你会认为他们会想要使用泛型（我相信在 C# 2 中一直引入）

似乎我一直在遇到这些烦人的小集合类型。有什么技术原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T17:05:31.303

答案在问题标题中：“命名集合”。这是在泛型可用之前您必须使集合类型安全的方式。其中有很多可以追溯到 .NET 1.x 的代码，尤其是 Winforms。没有合理的方法来使用泛型重写它们，这会破坏太多现有代码。

因此，命名集合类型是类型安全的，但问题是 System.Collections.IEnumerator.Current，它是 Object 类型的属性。您可以使用 OfType() 或 Cast() 对这些集合进行 Linqify。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:09:16.947

正如 Adam Houldsworth 在评论中所说，您只需要使用 Cast<> 方法。

例子：

```
var a = new DogCollection();
var allFidos = a.Cast<Dog>().Where(d => d.Name == "Fido"); 
```

# jquery - jQuery滑动效果不起作用

> ID：14238525
> 
> 赞同：-1
> 
> 时间：2013-01-09T15:20:42.263
> 
> 标签：jquery, sliding

嗨，我想在我的网页上做左右滑动效果。但它似乎无法正常工作。请任何人都可以纠正它并工作它。

而不是数字有图像。

我为此创建了一个 JS Fiddle

[http://goo.gl/kz3JX](http://goo.gl/kz3JX)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:21:48.383

下载任何 jQuery 滑块并插入：

[http://www.tripwiremagazine.com/2012/12/jquery-slider.html](http://www.tripwiremagazine.com/2012/12/jquery-slider.html)

# android - 当用户滚动时，Listview 项目从内存中删除位图

> ID：14238532
> 
> 赞同：11
> 
> 时间：2013-01-09T15:21:12.903
> 
> 标签：android, listview

我正在开发一个安卓应用程序。我有一个包含列表视图的活动。

列表视图有很多项目，每个项目都包含一个位图图像。

因为列表非常大并且包含很多图像，所以在加载位图时，在某些旧设备上会出现内存不足错误。

所以我正在寻找一种对旧设备执行以下操作的方法：

*   加载视图中（或附近）项目的位图
*   当用户向下滚动时，我加载应该显示给他**的位图并删除现在隐藏的位图**。
*   因此，在任何时候，只有视图中（或附近）的图像被加载到堆中，而其他图像在视图中不再存在时被删除。

有没有办法做到这一点？

**附加信息：**

我遵循了关于如何有效加载位图图像的所有说明和代码（在 android 文档和我能找到的任何网站上），我还确保没有内存泄漏，我回收每个位图并确保 GC 正常工作最后，在旧设备上，我使图像的分辨率尽可能小。但是列表的大小导致内存不足仍然出现在某些设备上。

所以我想知道我是否可以执行上述建议的解决方案。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T15:30:14.727

您应该考虑查看 Google I/O 2012 中的 Sample Gallery App。您需要的一切都在那里实现。

[来自 Google I/O 的关于图库应用的视频](http://www.youtube.com/watch?v=gbQb1PVjfqM&list=PL46069800A957F535&index=10)

源代码可在 [Google Code](http://code.google.com/p/iogallery/)上找到，它是构建图库的绝佳示例。您还应该考虑查看 Romain Guy 的[演示文稿](http://www.youtube.com/watch?v=N6YdwzAvwOA)（开始），其中他解释了性能问题`ListView`并教授如何有效地使用适配器。（ViewHolder 模式和重用视图）。

这是 GridView 的 RecycleListener（可从 API 级别 1 获得）。RecyclerListener 用于在将 View 放置在 RecycleBin 的废料堆中时接收通知。此侦听器用于释放与放置在 RecycleBin 中的视图关联的资源。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.album);

    mAdapter = new PhotoAdapter(this);

    mGridView = (GridView) findViewById(android.R.id.list);
    mGridView.setAdapter(mAdapter);

    mGridView.setRecyclerListener(new RecyclerListener() {
        @Override
        public void onMovedToScrapHeap(View view) {
            // Release strong reference when a view is recycled
            final ImageView imageView = (ImageView) view.findViewById(android.R.id.icon);
            imageView.setImageBitmap(null);
        }
    });

    // Kick off loader for Cursor with list of photos
    getLoaderManager().initLoader(LOADER_CURSOR, null, mCursorCallbacks);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:25:19.220

您想搜索一些“延迟加载”的教程和示例。
一个可能的例子是：[https ://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:37:10.257

使用[Universal Image Loader 之](https://github.com/nostra13/Android-Universal-Image-Loader)类的库可以为您提供缓存图像和内存管理的选项。您应该能够通过它设置最大缓存大小，并且它还负责在后台线程上加载图像。

ListView 负责回收您放入图像的视图，并在这方面更容易占用内存。

# c++ - 请一些指导

> ID：14238535
> 
> 赞同：-6
> 
> 时间：2013-01-09T15:21:30.287
> 
> 标签：c++, function

我有这段代码，基本上是我在尝试学习 c++，但我不明白为什么我不断收到这两个错误

> 错误：在“cInputChar”中请求成员“length”，它是非类类型“char [0]”

和

> 错误：从 'char*' 到 'char' 的无效转换

我认为这与我声明 char 变量的方式有关`cInputChar`。问题肯定与`getChar`功能有关。

**我的代码如下：**

```
int getInteger(int& nSeries);
char getChar(char& cSeriesDecision, int nSeries);

int main()
{
int nSeries = 0;
char cSeriesDecision = {0};

getInteger(nSeries);

getChar(cSeriesDecision, nSeries);

return 0;
}

//The function below attempts to get an integer variable without using the '>>'    operator.
int getInteger(int& nSeries)
{

//The code below converts the entry from a string to an integer value.

string sEntry;
stringstream ssEntryStream;

 while (true)
 {
  cout << "Please enter a valid series number: ";
   getline(cin, sEntry);
   stringstream ssEntryStream(sEntry);

   //This ensures that the input string can be converted to a number, and that the series number is between 1 and 3.
   if(ssEntryStream >> nSeries && nSeries < 4 && nSeries > 0)
   {
       break;
   }
   cout << "Invalid series number, please try again." << endl;
 }
 return nSeries;
 }

 //This function tries to get a char from the user without using the '>>' operator.
 char getChar(char& cSeriesDecision, int nSeries)
 {
 char cInputChar[0];

 while (true)
 {
   cout << "You entered series number " << nSeries << "/nIs this correct? y/n: ";
   cin.getline(cInputChar, 1);

   if (cInputChar.length() == 1)
   {
     cSeriesDecision = cInputChar;
     break;
   }
  cout << "/nPlease enter a valid decision./n";
}

return cSeriesDecision;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:22:54.317

```
 char cInputChar[0]; 
```

你真的需要一个大小数组`0`吗？`0`在 C++中不能有一个大小数组。这根本不合法。

你需要类似的东西：

```
#define MAX_SIZE 256

char cInputChar[MAX_SIZE]; 
```

最好简单地使用`std::string`而不是 c 样式的字符数组。

* * *

从评论中的讨论：

@Inafune：请拿起一本**[好书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)**。您不会通过添加和删除语法来学习任何编程语言，只是为了编译代码。永远不要在不了解其背后的目的的情况下编写任何一行代码。

# forms - 表单文本框 - 在页面加载期间保持焦点

> ID：14238536
> 
> 赞同：1
> 
> 时间：2013-01-09T15:21:31.433
> 
> 标签：forms, textbox, focus

在我的主页上，我有一个带有搜索文本框的表单。如果您在页面仍在加载时单击输入并开始输入，则某些内容会窃取焦点，因此您必须在输入文本框中单击返回。

有没有办法防止这种情况发生？我需要找到什么在偷走焦点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:22:07.443

听起来你的一个脚本正在设置一些专注于负载的东西。

把它放在 HTML 的底部，就在`</body>`. 您的控制台将向您显示获得焦点的项目的 HTML。

```
<script>
$(window).load(function() { // NB not document ready
    console.log($(':focus')[0]);
    // alert($(':focus')[0]); // if you don't know what console is
});
</script> 
```

希望元素中有一个 ID，您可以搜索您的脚本，或者有足够的线索让您找到被告知要关注负载的内容。然后您可以删除/更改该行。

**附录**

原来这是罪魁祸首

```
$('#f input#livesearch').clearableTextField(); 
```

仅当用户使用该字段时才需要该可*清除功能，因此让我们使其具有上下文关系，即仅当它获得焦点时，才使该功能可用。*这应该会阻止顽皮的插件窃取焦点。

```
$('#f input#livesearch').on('focus', function(){
    $(this).clearableTextField();
}); 
```

通常最好根据上下文编写——你会发现页面有几十个绑定和在 onload 上设置的“实时”事件，但它们很少使用。如果在用户做某事或您可以告诉用户将要做某事之前不需要发生某些事情，那么就这样写。

# asp.net - 从客户 httphander 类中的 aspx 页面获取会话

> ID：14238547
> 
> 赞同：-1
> 
> 时间：2013-01-09T15:22:15.123
> 
> 标签：asp.net, httphandler

我在同一个域中有一个 aspx 页面和自定义 httphandler。在 aspx 页面（test.aspx）中，我使用

```
<%@ Page Language="C#" %>
<%

    HttpContext.Current.Session["UserID"] = "ABC";

%> 
```

创建一个会话变量，但是当我想在 httphandler 中调用该变量时

```
public class JpgHttpHandler : IHttpHandler, IRequiresSessionState
{
    public void ProcessRequest(HttpContext context)
    {
         response.Write(HttpContext.Current.Session["UserID"].ToString());
    }
} 
```

当我切换 httphandler 时出现错误消息：

```
Object reference not set to an instance of an object.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object. 
```

我如何从 httphandler 调用会话？

谢谢

***更新***

将代码更改为

```
if (context.Session["UserID"] != null)
response.Write(context.Session["UserID"].ToString()); 
```

奇怪的是，当我使用 ip 访问网页时，它可以工作。但是我使用域名访问页面，它显示为空白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:30:47.940

始终检查会话是否为空。

```
//Check session variable null or not
if (HttpContext.Current.Session["UserID"] != null)
{
    //Retrieving User ID from Session
}
else
{
 //Do Something else
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:30:26.143

首先使用`context`第二个检查它是否为空，然后再使用它

```
public class JpgHttpHandler : IHttpHandler, IRequiresSessionState
{
    public void ProcessRequest(HttpContext context)
    {
         if(context.Session["UserID"] != null)
             response.Write(context.Session["UserID"].ToString());
    }
} 
```

如果处理程序没有看到会话可能是因为您没有设置正确的 cookie，并且会话基于 cookie。`domain`在 web.config 上的 cookies 行上设置，没有`www.`as：

```
<httpCookies domain="youdomain.com" httpOnlyCookies="false" requireSSL="false" /> 
```

# regex - 一串纬度经度对的正则表达式

> ID：14238550
> 
> 赞同：1
> 
> 时间：2013-01-09T15:22:29.597
> 
> 标签：regex

我在我的程序中收到这样的输入

> lat1,long1;lat2,long2;lat3,long3

由列分隔的纬度经度对。

不，我想验证这个输入，这样我就不会收到错误的数据。

我创建了一个正则表达式：

```
((^(\-?\d+(\.\d+)?),(\-?\d+(\.\d+)?));?) 
```

问题是它只验证一个对而不是由 ; 分隔的一串对 如我所愿。

如果您能帮我想出一个表达式来验证我的数据，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:34:09.520

您的表达式仅检查字符串开头的一对，后跟一列。

你可以试试这个：

```
^\-?\d+(\.\d+)?,\-?\d+(\.\d+)?(;\-?\d+(\.\d+)?,\-?\d+(\.\d+)?)*$ 
```

那是您的正则表达式（没有一些括号 inutiles），后面是 0 次或更多次一列和一对。

[用你的 4 个例子进行测试。](http://rubular.com/r/G4KD6HTPiQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:35:53.457

这样的事情怎么样？

```
(-?[\d\.]+,-?[\d\.]+)+;?+ 
```

我在[Rubular.com (permalink)](http://rubular.com/r/ZXlUF6tll1)上试过，测试字符串如下：

```
-10,10;10.5,-10.337 
```

结果？

```
Match 1
1\.  -10,10
Match 2
1\.  10.5,-10.337 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:59:26.203

`.2`我会使用以下模式，它也可以接受像`0.2`.

```
^-?(\d+(\.\d+)?|\.\d+),-?(\d+(\.\d+)?|\.\d+)(;-?(\d+(\.\d+)?|\.\d+),-?(\d+(\.\d+)?|\.\d+)){2}$ 
```

这是故障。

```
^                 # beginning of string
    -?                # optional minus sign
    (                 # either
        \d+(\.\d+)?   # an integer with an optional decimal part
        |             # or
        \.\d+         # a decimal number
    )
    ,                 # a comma
    -?                # optional minus sign
    (                 # either
        \d+(\.\d+)?   # an integer and an optional decimal part
        |             # or
        \.\d+         # a decimal number
    )
    (
        ;                 # a semicolon
        -?                # optional minus sign
        (                 # either
            \d+(\.\d+)?   # an integer and an optional decimal part
            |             # or
            \.\d+         # a decimal number
        )
        ,                 # a comma
        -?                # optional minus sign
        (                 # either
            \d+(\.\d+)?   # an integer and an optional decimal part
            |             # or
            \.\d+         # a decimal number
        )
    ){2}              # with 2 repetitions (of the pattern)
$                 # end of string 
```

# orchardcms - IUserEventHandler 在 Orchard 1.6 中的位置在哪里？

> ID：14238556
> 
> 赞同：1
> 
> 时间：2013-01-09T15:22:40.827
> 
> 标签：orchardcms, orchardcms-1.6

我正在尝试使用 IUserEventHandler 扩展 Orchard 登录过程，就像在[此处](https://stackoverflow.com/questions/11585608/orchard-cms-sign-out-log-off-confirmation-page)完成的那样。无论我多么努力地查看 Orchard 程序集，我都找不到 Orchard.Users.Events 命名空间，它应该是 IUserEventHandler 的家。

哪个 Orchard 程序集包含该接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:30:47.620

找到了。它实际上是一个 Orchard 模块，位于 /Modules/Orchard.Users 下。

# c# - "'无法加载文件或程序集 'Elmah' 或其依赖项之一。在 NuGet 中使用 Elmah.MVC 后系统找不到指定的文件''

> ID：14238561
> 
> 赞同：8
> 
> 时间：2013-01-09T15:22:48.000
> 
> 标签：c#, .net, asp.net-mvc, elmah

我有一个 MVC 应用程序，我使用[http://nuget.org/](http://nuget.org/)为 MVC 安装 Elmah，我能够安装它并连续运行它。

几周后重新打开 Visual Studio 我得到这个错误：

```
Could not load file or assembly 'Elmah' or one of its dependencies. The system cannot find the file specified. 

Error
<httpModules>
Line 73:       <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" /> 
```

我试图在项目中添加对 Elmah.Mvc 的引用，但没有成功。你能指出我如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T15:33:15.930

我的建议是通过 NuGet 重新安装 Elmah.Mvc。如果这没有帮助，请尝试重新安装 elmah.corelibrary NuGet 包（作为 Elmah.Mvc 的依赖项）。

# objective-c - 如果从后台线程运行，则不调用 Facebook startForPostWithGraphPath completionHandler 块

> ID：14238562
> 
> 赞同：1
> 
> 时间：2013-01-09T15:22:50.403
> 
> 标签：objective-c, facebook, objective-c-blocks

我正在向向 Facebook 发布消息的代码添加错误处理，但遇到了我试图理解的奇怪行为。在我的 FB startForPostWithGraphPath 完成处理程序中，我检查是否有错误，如果有，我会等待几秒钟，然后再尝试再次发布。我遇到的问题是，当我尝试再次调用该方法来发布此消息时，我在主线程上运行它，它工作正常。如果我尝试在后台线程上运行它，它会静默失败。就像在完成处理程序中一样，它永远不会被第二次调用。

作品

```
dispatch_after(popTime, dispatch_get_main_queue(),
               ^(void){
                    [MYSocial shareToOpenGraph:poll];
               }); 
```

失败

```
dispatch_after(popTime, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),
               ^(void){
                 [MYSocial shareToOpenGraph:poll];
               }); 
```

我很好奇是否有人对需要在主线程上调用的 FB 请求方法有任何经验。在我看来，在后台线程上调用重试逻辑是正确的行为，但显然由于某种原因不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T23:02:09.990

我可以确认该请求在我的应用程序的主线程上有效并且在后台线程上失败。

# html - 不同缩放级别的定位表格

> ID：14238563
> 
> 赞同：0
> 
> 时间：2013-01-09T15:22:51.737
> 
> 标签：html, css, forms, positioning

请帮助正确布局两个表格。**我使用位置方法，但是当浏览器缩放级别**更改时它会失败。第二个按钮稍微向上或向下移动。这是我的代码：

```
<div id="container">
<form id="form1">
    <p>Some text here</p>
    <p><input name="submitName1" class="button" id="input1_id" value="Submit1" type="submit" /></p>
</form>
<form id="form2"><input id="input2_id" value="Submit2" disabled="disabled" type="submit" /></form>
</div>

#form1 
{
    bottom: 15px;
    position: relative;
}

#form2 
{
    bottom: 50px;    
    left: 73px;
    position: relative;
} 
```

同样，当用户的浏览器具有与我的浏览器相同的缩放级别时，一切正常，但如果不是，则用户会为第二种表单设置错误的按钮。

**更新：**见[这个](http://jsfiddle.net/B4SeR)例子。即使在 JSFiddle 渲染环境中，按钮位置也会发生变化，而 Firefox 会更改缩放级别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:52:31.813

实际问题出在按钮上，它是一个与浏览器/操作系统相关的元素。而且您没有以像素为单位为其提供特定的高度/宽度。

由于您的问题专门与垂直放置有关，因此**您需要为输入元素指定高度：** `height: 24px;` .

因此我的结论是，您以特定数量（即百分比或像素）指定的属性（边框宽度、高度/宽度等）越多，您的布局对于浏览器中的不同缩放级别就越一致。

您可以使用（作为示例）为 CSS 中的所有输入指定默认高度：

```
input
{
    height: 24px;
} 
```

当然，您应该在此处添加更多属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T07:49:55.780

在制作表单时尝试使用等宽字体，否则缩放可能会使某些元素变得疯狂。

# java - Java slick，html 找不到 AppletLoader

> ID：14238568
> 
> 赞同：2
> 
> 时间：2013-01-09T15:23:01.743
> 
> 标签：java, html, applet, slick2d

我已经使用基于光滑状态的游戏制作了一个 java 游戏，因为我的游戏扩展了 StatBasedGame 它不是一个真正的小程序，因为它没有扩展 JApplet，所以为了解决这个问题，有一个内置的方法可以在 html 中使用。

我找到了这个链接，它向我展示了如何做到这一点：http: [//ninjacave.com/slickapplet](http://ninjacave.com/slickapplet) 并做了它要求我做的一切，我使用 eclipse（我的编译器）制作了我的游戏的 jar 文件，下载了最新版本lwjgl 并修改了上面显示的网站上的代码以与我的游戏一起使用：

```
 <applet code="org.lwjgl.util.applet.AppletLoader" 
        archive="lwjgl_util_applet.jar" 
        codebase="." 
        width="640" height="480">

  <param name="al_title" value="Ham Blaster"> 
  <param name="al_main" value="org.newdawn.slick.AppletGameContainer"> 
  <param name="game" value="org.javagame.Game">

  <param name="al_jars" value="racegame.jar, lwjgl.jar, slick.jar"> 

  <param name="al_windows" value="windows_natives.jar"> 
  <param name="al_linux" value="linux_natives.jar"> 
  <param name="al_mac" value="macosx_natives.jar"> 

  <param name="separate_jvm" value="true"> 
</applet> 
```

我检查了我的 lwjgl 里面是否有一个使用 winrar 的 AppletLoader 类，因为错误说它找不到它，我进入 lwjgl_util_applet.jar 并发现以下内容：

> AppletLoader$1.class,AppletLoader$2.class... 到...AppletLoader$6.class 和 AppletLoader

这意味着 AppletLoader 在那里，那么为什么我会收到错误消息？

有人可以告诉我为什么会这样吗？

# azure - 在 Azure Web 角色上强制启动应用程序

> ID：14238569
> 
> 赞同：6
> 
> 时间：2013-01-09T15:23:04.210
> 
> 标签：azure, iis-7.5, webrole

我在 azure 上有一个网络角色，我想强制 Application_Start 而不等待第一个请求。

我设法在我的网站上将“自动启动”属性设置为 true

[在 Azure WebRole 上自动启动 WCF](https://stackoverflow.com/questions/13703908/autostart-a-wcf-on-azure-webrole)

但是 Application_Start 直到第一个请求到来时才被调用。

我不知道我是否在这里遗漏了一些重要的东西。服务器是W2008 R2，IIS版本是7.5

谢谢！

**解决方案**

我把解决方案代码放在这里。我希望能帮助某人。我刚刚添加了一个 WebRole.cs，然后将该代码设置为每 30 秒执行一次 ping。请注意我正在浏览 Service.svc，因为这是我的端点，您的端点可能是另一个端点。请注意，我要的是“Endpoint1”。如果您有多个端点，则应查看该行。

```
public class WebRole : RoleEntryPoint
{        
    public override void Run()
    {            
        var localuri = new Uri( string.Format( "http://{0}/Service.svc", RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["Endpoint1"].IPEndpoint ) );

        while (true)
        {
            try
            {                    
                var request = (HttpWebRequest)WebRequest.Create(localuri);
                request.Method = "GET";
                var response = request.GetResponse();
            }
            catch { }
            System.Threading.Thread.Sleep(30000);
        }            
    }

    public override bool OnStart()
    {               
        return base.OnStart();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:12:18.817

IIS 只会在第一个请求到达时启动。`OnStart`解决方法是从内部或您的`RoleEntryPoint`后代向同一 VM 发送 HTTP 请求- 这很容易使用`WebRequest`或等效类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:46:45.000

Jordi，我最近遇到了同样的问题。

根据我的测试 Application_Start() 仅在 WebApp 的第一个请求 ISS 时调用。（如果您尝试在 Debug 中启动 VS 而不打开任何页面（请参阅 proj/debug 中的选项），您将看到如果您不在 Azure 中运行 WebApp，Application_Start() 也不会被调用）

我想你需要在 WebRole 启动时做一些事情，把你的代码放在**WebRole.cs**中；）在这里你可以覆盖**OnStart()**和 OnStop() 并把你的代码放在 WebRole 启动时将被执行的代码。

我已经用这种方式运行了一个 BakgroundWorker，它独立于 IIS 来执行一些计划任务。

我希望这会有所帮助。戴维德。

注意：1 - 如果你没有 WebRole.cs 在项目的根目录中创建它并在里面写： public class WebRole : RoleEntryPoint { public override bool OnStart() { ...你的代码... return base.OnStart( ); } }

2 - 如果您需要**调试**代码，请注意您需要在调试中使用将WebApp**称为“运行项目”的****Azure 项目**运行 VS ，**否则不会调用 WebRole**

 ***** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:43:36.117

您可以尝试在您的 WebRole.cs 中添加一些代码，以从您的网站请求一些 URL。我已经尝试过了，它似乎有点工作。但是调试起来很痛苦，所以我从来没有真正确定它。

另一种选择是使用[IIS Application Initialization](http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-application-initialization)。您不能在 IIS 7.5 上使用它，但如果您将角色升级到 Windows 2012（在 .cscfg 中设置 osFamily="3"），则可以获得 IIS 8。****

# java - JCalendar - 使用正确的格式在 Java 中正确设置日期

> ID：14238570
> 
> 赞同：0
> 
> 时间：2013-01-09T15:23:06.943
> 
> 标签：java, sql, database, sqlite, date

我在`JCalendar`这里使用：[http](http://www.toedter.com/en/jcalendar/)`SqLite` ://www.toedter.com/en/jcalendar/ 我已经使用 JDateChooser 在表单中设置日期并以格式 导入`yyyy-MM-dd`。当我尝试`yyyy-MM-dd`使用以下代码从数据库中检索相同格式的日期时：

```
Date date = rs.getDate(10);
            fieldClose.setDate(date); //displays 01-Jan-1970 - I want (2013-01-08), one   that is similar in database. 
```

我查看了stackoverflow，并且存在一些类似的帖子，但未能在格式`yyyy-MM-dd`和考虑`jCalender`和SQLite方面显示建议，所以我不得不发布这个。任何想法如何实现类似于数据库的日期，以插入相同的格式和相同的类型。

我刚刚试过这个：

```
String date =rs.getString(10); 
                ((JTextField)fieldClose.getDateEditor().getUiComponent()).setText(date); 
```

返回：

2013-05-22 // 出现红线，表示 jDatechooser 无法识别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:53:10.353

Use SimpleDateFormat, try this example

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
   Date date=null;
   try{
        date=sdf.parse(rs.getString(10));
   } catch (ParseException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
   }
   fieldClose.setDate(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T08:57:43.820

您可以使用 String.format。让我帮你写代码

```
Date o = jDateChooser1.getDate();   //Import java.util not java.sql
String x = String.format("%1$ty-%1$tm-%1$td",o); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:59:45.113

1.  要么你可以在 java 中使用 SimpleDateFormat
2.  或在 Mysql SELECT 查询中使用 DATE_FORMAT('ColumnName', "Date Pattern") 。

# amazon-web-services - Amazon BrowseNodes 数据库

> ID：14238571
> 
> 赞同：3
> 
> 时间：2013-01-09T15:23:11.297
> 
> 标签：amazon-web-services, amazon

我想将亚马逊的 Browsenodes 存储在我的数据库中。我在这个网址[http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/BrowseNodeIDs.html](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/BrowseNodeIDs.html)上找到了这个的完整列表。我认为这些只是对我来说很好的父节点。

你们中是否有人拥有 Amazon Browsenodes 的数据库，在数据库中手动对其进行编码或在网络上抓取它太麻烦了。

您的帮助将不胜感激和奖励！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-12T14:01:57.620

[您可以在aFeeds](http://afeeds.net/download/)上下载 Amazon USA 节点的 mySQL 数据库。获取整个数据库需要少量费用，但有一个包含所有 Book 节点的免费示例。

# c++ - ostream::write 实际写入了多少字节？

> ID：14238572
> 
> 赞同：9
> 
> 时间：2013-01-09T15:23:13.887
> 
> 标签：c++, buffer, iostream

假设我向ostream::write发送了一个大缓冲区，但实际上只有开头部分写入成功，其余部分没有写入

```
int main()
{
   std::vector<char> buf(64 * 1000 * 1000, 'a'); // 64 mbytes of data
   std::ofstream file("out.txt");
   file.write(&buf[0], buf.size()); // try to write 64 mbytes
   if(file.bad()) {
     // but suppose only 10 megabyte were available on disk
     // how many were actually written to file???
   }
   return 0;
} 
```

什么 ostream 函数可以告诉我实际写入了多少字节？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T15:27:06.833

您可以使用[`.tellp()`](http://en.cppreference.com/w/cpp/io/basic_ostream/tellp)知道流中的输出位置来计算写入的字节数：

```
size_t before = file.tellp(); //current pos

if(file.write(&buf[0], buf.size())) //enter the if-block if write fails.
{
  //compute the difference
  size_t numberOfBytesWritten = file.tellp() - before;
} 
```

请注意，不能保证*确实*`numberOfBytesWritten`是写入文件的字节数，但它应该适用于大多数情况，因为我们没有任何可靠的方法来获取写入文件的*实际字节数。*

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:34:24.740

我没有看到任何等同于`gcount()`. 直接写入streambuf（带`sputn()`）会给你一个指示，但你的请求中有一个基本问题：写入被缓冲并且故障检测可以延迟到有效写入（刷新或关闭）并且没有办法获得访问权限操作系统真正写的内容。**

# java - Primefaces gmap 获取位置

> ID：14238574
> 
> 赞同：0
> 
> 时间：2013-01-09T15:23:19.307
> 
> 标签：java, jsf, primefaces

我有一个 bean，用于显示拖动标记的更新位置。这是我的代码：

```
@SessionScoped
@ManagedBean
public class MarkerLocationer implements Serializable {

    private static final long serialVersionUID = 1L;
    private MapModel draggableModel;
    private Marker marker;

    public MarkerLocationer() {
        draggableModel = new DefaultMapModel();

        //Shared coordinates  
        LatLng coord1 = new LatLng(41.017599, 28.985704);

        //Draggable  
        draggableModel.addOverlay(new Marker(coord1, "Projenin olduğu yere sürükleyin."));

        for (Marker marker2 : draggableModel.getMarkers()) {
            marker2.setDraggable(true);
        }
    }

    public Marker getMarker() {
        return marker;
    }

    public void setMarker(Marker marker) {
        this.marker = marker;
    }

    public MapModel getDraggableModel() {
        return draggableModel;
    }
    public String lon, lat;

    public void onMarkerDrag(MarkerDragEvent event) {

        marker = event.getMarker();
        addMessage(new FacesMessage(FacesMessage.SEVERITY_INFO, "Proje lokasyonu belirlendi.", "X:" + marker.getLatlng().getLat() + " Y:" + marker.getLatlng().getLng()));

        lon = String.valueOf(marker.getLatlng().getLng());
        lat = String.valueOf(marker.getLatlng().getLat());

    }

    public void addMessage(FacesMessage message) {
        FacesContext.getCurrentInstance().addMessage(null, message);
    }
} 
```

我在希望用户填写的表单中使用上面的 bean。用户填写表格，将标记拖到所需位置并保存信息。这是我的另一个将信息保存到数据库的 bean。

```
 @ManagedBean
@ViewScoped
public class AddProjectToDB {

    String lat = new MarkerLocationer().lat;
    String lon = new MarkerLocationer().lon;

    //genel
    private String projectName, projectExp, projectCoordLong, projectCoordLat;
    /**
     * Creates a new instance of AddProjectToDB
     */
    static private FileHandler fileTxt;
    static private SimpleFormatter formatterTxt;
    int getter;

    public String Save() throws Exception {

            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/projetakip?useUnicode=true&characterEncoding=utf-8", "root", "");
            Statement stmt = con.createStatement();

            String SQL = "insert into `projects`(`id`,`projectName`,`projectExp`,`projectCoordLat`,`projectCoordLon`) values "
                    + "(NULL,'"
                    + projectName + "','"
                    + projectExp + "','"
                    + lat + "','"
                    + lon + "')";
            int Res = stmt.executeUpdate(SQL);
            ResultSet rs = stmt.getGeneratedKeys();
            getter = rs.getInt(1);
            rs.close();
            stmt.close();

        return "0";

    }
} 
```

这是我的JSF：

```
<h:outputLabel value="Proje Adı: " />  
                            <p:inputTextarea value="#{addProjectToDB.projectName}" id="projectName" autoResize="true"/>  

                            <h:outputLabel value="Proje Detayı: " />  
                            <p:inputTextarea value="#{addProjectToDB.projectExp}" id="projectExp" autoResize="true"/>  

                            <h:outputLabel value="Proje Koordinatları: " />
                            <h:inputHidden value="#{addProjectToDB.projectCoordLat}" id="lat" />
                            <h:inputHidden value="#{addProjectToDB.projectCoordLong}" id="lon" />

                            <h:form>
                                <p:growl id="growl" showDetail="true"/>
                                <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
                                    <p:gmap center="41.017599,28.985704" zoom="13" type="HYBRID"  model="#{markerLocationer.draggableModel}" style="width:600px;height:400px"> 
                                        <p:ajax event="markerDrag" listener="#{markerLocationer.onMarkerDrag}" update="growl"/>
                                        </p:gmap>
                                    </h:form>
    <p:commandButton  value="Projeyi Kaydet" icon="ui-icon-disk" action="#{addProjectToDB.Save}"  oncomplete="infDialog.show()" /> 
```

我的问题是当我尝试保存表单时，它会将位置设为空。但是，当我拖动标记时，我可以看到 long 和 lati。如何正确从 MarkerLocationer bean 中检索 long 和 lati？提前致谢。

* * *

好的。我找到了解决方案。这是我基本上是这样做的：

```
 FacesContext facesContext = FacesContext.getCurrentInstance();
            Application application = facesContext.getApplication();
            ValueBinding binding = application.createValueBinding("#{markerLocationer}");
            MarkerLocationer userInfo = (MarkerLocationer) binding.getValue(facesContext);
            projectCoordLat = String.valueOf(userInfo.getMarker().getLatlng().getLat());
            projectCoordLong = String.valueOf(userInfo.getMarker().getLatlng().getLng()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:03:33.653

您只需将 MarkerLocationer 注入 AddProjectToDB 并从那里检索值。无需使用隐藏字段。像这样：

**MarkerLocationer.java（更新）**

```
@ManagedBean
@SessionScoped
public class MarkerLocationer implements Serializable {

    private static final long serialVersionUID = 4288587129736579882L;

    private MapModel draggableModel;

    public MarkerLocationer(){
        draggableModel = new DefaultMapModel();

        //Shared coordinates
        LatLng coord1 = new LatLng(41.017599, 28.985704);

        //Draggable
        draggableModel.addOverlay(new Marker(coord1, "Projenin olduğu yere sürükleyin."));

        for (Marker marker : draggableModel.getMarkers()) {
            marker.setDraggable(true);
        }
    }

    public MapModel getDraggableModel() {
        return draggableModel;
    }

    public void setDraggableModel(MapModel draggableModel) {
        this.draggableModel = draggableModel;
    }

    public void onMarkerDrag(MarkerDragEvent event) {
        // since marker's state is already kept in draggableModel you do not necessarily
    }

    public LatLng getMarkerPosition(){
        return draggableModel.getMarkers().get(0).getLatlng();
    }
} 
```

**AddProjectToDB.java（更新）**

```
@ManagedBean
@ViewScoped
public class AddProjectToDB {

    @ManagedProperty(value = "#{markerLocationer}")
    private MarkerLocationer markerLocationer;

    public void setMarkerLocationer(MarkerLocationer markerLocationer) {
        this.markerLocationer = markerLocationer;
    }

    public void save() {

        double lat = markerLocationer.getMarkerPosition().getLat();
        double lon = markerLocationer.getMarkerPosition().getLng();

        //.. your stuff

    }
} 
```

**和 JSF 页面**

```
<h:form>
    <p:growl id="growl" showDetail="true" />
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <p:gmap center="41.017599,28.985704" zoom="13" type="HYBRID" model="#{markerLocationer.draggableModel}"
        style="width:600px;height:400px">
        <p:ajax event="markerDrag" listener="#{markerLocationer.onMarkerDrag}" update="growl" />
    </p:gmap>
    <p:commandButton value="Projeyi Kaydet" icon="ui-icon-disk" action="#{addProjectToDB.save}"/>
</h:form> 
```

# ruby-on-rails - 可以更改的 Mongoid 可嵌入评论和用户信息

> ID：14238576
> 
> 赞同：1
> 
> 时间：2013-01-09T15:23:23.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, database-design, mongoid

我有一个带有嵌入式评论的列表文档。除了用户在视图中的评论，我还想显示他们的屏幕名称和个人资料图片。个人资料图片可以更改，屏幕名称也可以更改。

我试图确定这里的最佳设计实践是什么。为了最好地利用 Mongo，嵌入的评论看起来应该如下所示：

评论模型

```
class Comment
  include Mongoid::Document
  field :user_id
  field :username
  field :profile_pic_url
  field :content
  field :created_at, type: Date
  embedded_in :list, :inverse_of => :comments
end 
```

但风险在于，如果用户更改评论数据（用户的屏幕名称和个人资料图片），它们就会变得陈旧，除非在 User 模型上有一个 after_save 过滤器，例如，它希望更新评论中的所有实例。

有关正确设计的任何指导？我可以做到不嵌入评论，让用户有很多评论，列表有很多评论，但我正在努力发挥 Mongo 的优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:07:04.743

您的应用程序、它的访问模式、扩展和性能要求胜过后端问题。使用 SQL，规范化和链接/引用几乎是您唯一的选择，但使用 MongoDB，您可以嵌入。

MongoDB 提供了将模式匹配到应用程序需求的灵活性，您可以根据需要选择规范化/链接/引用或反规范化/嵌入，而 Mongoid 使其易于选择。

(a) 归一化减少冗余，遵循不要重复自己 (DRY) 的良好原则。(b) 非规范化引入了冗余，遵循缓存或记忆等常见做法以提高性能。

一般来说，根据您的应用程序的需要：

需要高一致性 - 是：规范化/链接，否：非规范化/嵌入

需要高读取性能 - 是：非规范化/嵌入，否：规范化/链接

需要高写入性能 - 是：规范化/链接，否：非规范化/嵌入

需要高缩放 - 是：规范化/链接，否：非规范化/嵌入

关系：

一对一 - 是：非规范化/嵌入，否：...

一对多 - 是：非规范化/嵌入，否：...

多对多 - 是：规范化/链接，否：...

有多种处理一致性的技术，例如，后台或夜间进程以实现最终一致性，后备缓存以实现即时一致性等。

坏消息是没有不需要思考的公式。好消息是 MongoDB 可以灵活地匹配您的应用程序。10gen 提供有关模式设计的讲座。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:22:22.720

我会引用一个用户，而不是把每个字段放在每个评论中。

```
class User
  include Mongoid::Document
  include Mongoid::Timestamps
  field :user_id
  field :username
  field :profile_pic_url
  has_many :comments
end

class Comment
  include Mongoid::Document
  include Mongoid::Timestamps
  field :content
  belongs_to :user
  embedded_in :list, :inverse_of => :comments
end 
```

[您可以在http://mongoid.org/en/mongoid/docs/relations.html#has_many](http://mongoid.org/en/mongoid/docs/relations.html#has_many)找到有关 has_many 关系的文档

我还继续使用了额外的时间戳，并删除了记录在[http://mongoid.org/en/mongoid/docs/extras.html#timestamps](http://mongoid.org/en/mongoid/docs/extras.html#timestamps)中的 created_at 字段。

# intellij-idea - IntelliJ 说“警告：java: foo/bar/Baz.java 使用未经检查或不安全的操作”，但它没有说明它指的是哪一行

> ID：14238578
> 
> 赞同：19
> 
> 时间：2013-01-09T15:23:25.170
> 
> 标签：intellij-idea, warnings, compiler-warnings, javac, unchecked

我收到此警告：

![截屏](../Images/30ffe63060223b35d8a3be5e4238076d.png)

当我单击图像时，它只会打开关联的编辑器，但不会说出引发警告的行号。我不想添加`@SuppressWarning("unchecked")`整个班级...

任何解决方法/修复？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-04-25T08:28:16.967

要`-Xlint:unchecked`在 IntelliJ IDEA 中编译：

*   转到`Settings`对话框（`Ctrl`+ `Alt`+`S`或`⌘` + `,`）
*   选择`Compiler`>`Java Compiler`
*   在字段中添加以下内容`Additional command line parameters`：

    `-Xlint:unchecked`

*   再次运行你的编译

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-20T21:18:16.877

### IntelliJ IDEA 15

更快的解决方案：

*   按`Ctrl`+ `Shift`+`A`
*   键入“附加 com”并按`Enter`：

    [![附加命令行参数](../Images/458f744f0016b814cfa6de62d1fd7df3.png)](https://i.stack.imgur.com/3HRUa.png)

*   类型`-Xlint:unchecked`> 确定

    [![Xlint 未选中](../Images/d3bd3781ec2c91c152028699f9aeef14.png)](https://i.stack.imgur.com/iihqc.png)

*   按`Ctrl`++重新编译（或转到 Build > Compile ... `Shift`）`F9`

    *   您可以从项目树中选择一个类/模块来指定要重新编译的内容
*   您将看到出现问题的行和列

    例如：警告:( **5** , **27** ) java: unchecked ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T16:50:13.110

我不确定为什么您的 IDE 没有向您显示一般警告，但您可以尝试编译

```
-Xlint:unchecked 
```

了解更多详情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-13T07:44:04.063

我还没有评论的声誉，但要添加到@ROMANIA_engineer 的答案 - 如果您使用的是 Mac，则快捷方式是 Shift-Command-A。

菜单条目是帮助/查找操作。

# c# - LINQ GroupBy x 其中有多个 x 并且 y 是唯一的

> ID：14238585
> 
> 赞同：2
> 
> 时间：2013-01-09T15:23:52.393
> 
> 标签：c#, linq, linq-to-objects

假设有一个像这样的对象：

```
class foo
{
    public String x{ get; set; }
    public String y{ get; set; }
}

var bar = new List<foo> {
 new foo{ x= "u", y= "w"},
 new foo{ x= "s", y= "q"},
 new foo{ x= "u", y= "r" },
 new foo{ x= "1", y= "0" },
 new foo{ x= "1", y= "0" },
}; 
```

我想将这些分组，其中 x 相同但 y 不同。

这将使我得到 x 相同并且不止一个的 foos。

```
 bar.GroupBy(x => x.x).Where(x => x.Count() > 1).ToList(); 
```

这是我得到的：

```
foo{ x= "u", y= "w"}
foo{ x= "u", y= "r" }
foo{ x= "1", y= "0" }
foo{ x= "1", y= "0" } 
```

这是我想要得到的：

```
foo{ x= "u", y= "w"}
foo{ x= "u", y= "r" } 
```

那么如何过滤掉 y 相同的那些呢？

**更新**

bar 中有 3,999,996 个对象，所有这三个对象都可以正常工作。

```
bar.GroupBy(f => f.x).Where(a => a.Select(f => f.y).Distinct().Skip(1).Any()).ToList(); // Elapsed ms = 702,715,779,666 AVG = 715
bar.GroupBy(f => f.x).Where(a => a.Count() > 1 && a.Any(b => b.y!= a.First().y)).ToList(); // Elapsed ms = 753,701,728,749 AVG = 732
bar.GroupBy(f => f.x).Where(a => a.Skip(1).Any() && a.Any(b => b.y!= a.First().y)).ToList(); //  Elapsed ms = 734,751,758,745 AVG = 747 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:27:26.977

就快到了！

```
bar.GroupBy(f => f.x)
   .Where(g => g.Select(f => f.y).Distinct().Skip(1).Any())
   .ToList(); 
```

`g.Select(f => f.y).Distinct().Count()`说“`y`从组中的 s 中获取所有值`foo`，丢弃所有重复项，*然后*计算它们”。

**编辑**：`.Skip(1).Any()`比`.Count() > 1`找到第二个项目时它停止查找要好，而不是找到一百万然后去`a million > 1`。通常我第一次就做对了...

（请注意，您的结果不是`foo`s 的列表，而是 s 组的列表，`foo`其中每个组都有一个常量`x`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:28:39.143

试试这个：

```
bar
  .GroupBy(a => a.x)
  .Where(a => a.Count() > 1 && a.Any(b=>b.y != a.First().y))
  .ToList(); 
```

# iphone - CoreTelephony 崩溃

> ID：14238586
> 
> 赞同：7
> 
> 时间：2013-01-09T15:23:53.957
> 
> 标签：iphone, ios, objective-c, crash, core-telephony

我从`TestFlight`一个有趣的崩溃中收到了这个回溯。

据我了解，在使用`CoreTelephony`. 在用户使用应用程序时有人“打电话”可能吗？

据我所知，该应用程序没有使用`CoreTelephony Framework`. 异常原因是`SIGSEGV`并且崩溃线程是0

谢谢你！

```
PRIMARY THREAD THREAD 0

0 GPIreland 0x00113a1a testflight_backtrace + 238
1 GPIreland 0x00114704 TFSignalHandler + 264
2 libsystem_c.dylib 0x359d1e92 _sigtramp + 42
3 CoreTelephony 0x330078b4 <redacted> + 32
4 CoreFoundation 0x333465de __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 14
5 CoreFoundation 0x33346290 __CFRunLoopDoTimer + 272
6 CoreFoundation 0x33344f00 __CFRunLoopRun + 1232
7 CoreFoundation 0x332b7ebc CFRunLoopRunSpecific + 356
8 CoreFoundation 0x332b7d48 CFRunLoopRunInMode + 104
9 GraphicsServices 0x3b0b52ea GSEventRunModal + 74
10 UIKit 0x3ab732f8 UIApplicationMain + 1120
11 GPIreland 0x00036f8a main (main.m:4)
12 GPIreland 0x0000d5a7 start + 39
Hide Other Threads

COM.APPLE.NSURLCONNECTIONLOADER

0 CoreFoundation 0x33344da2 __CFRunLoopRun + 882
1 CoreFoundation 0x332b7ebc CFRunLoopRunSpecific + 356
2 CoreFoundation 0x332b7d48 CFRunLoopRunInMode + 104
3 Foundation 0x34ed7bcc +[NSURLConnection(Loader) _resourceLoadLoop:] + 308
4 Foundation 0x34f5b67c __NSThread__main__ + 972
5 libsystem_c.dylib 0x359aa310 _pthread_start + 308
6 libsystem_c.dylib 0x359aa1d7 thread_start + 7
COM.APPLE.CFSOCKET.PRIVATE

0 libsystem_c.dylib 0x359aa1d7 thread_start + 7
THREAD 10

0 libsystem_c.dylib 0x3599f8a3 start_wqthread + 7
THREAD 11

0 libsystem_c.dylib 0x3599f8a3 start_wqthread + 7
WEBTHREAD

0 CoreFoundation 0x33344da2 __CFRunLoopRun + 882
1 CoreFoundation 0x332b7ebc CFRunLoopRunSpecific + 356
2 CoreFoundation 0x332b7d48 CFRunLoopRunInMode + 104
3 WebCore 0x37613a44 <redacted> + 444
4 libsystem_c.dylib 0x359aa310 _pthread_start + 308
5 libsystem_c.dylib 0x359aa1d7 thread_start + 7
THREAD 8

0 libsystem_c.dylib 0x3599f8a3 start_wqthread + 7
THREAD 12

0 libsystem_c.dylib 0x3599f8a3 start_wqthread + 7
THREAD 1

0 CoreLocation 0x39148d26 <redacted> + 350
1 CoreLocation 0x3917f072 <redacted> + 346
2 libxpc.dylib 0x349377e8 _xpc_connection_mach_event + 772
3 libdispatch.dylib 0x35970df8 _dispatch_mach_msg_invoke$VARIANT$up + 124
4 libdispatch.dylib 0x3596095c _dispatch_queue_drain$VARIANT$up + 84
5 libdispatch.dylib 0x3597106e _dispatch_mach_invoke$VARIANT$up + 154
6 libdispatch.dylib 0x3596095c _dispatch_queue_drain$VARIANT$up + 84
7 libdispatch.dylib 0x35960894 _dispatch_queue_invoke$VARIANT$up + 36
8 libdispatch.dylib 0x3596095c _dispatch_queue_drain$VARIANT$up + 84
9 libdispatch.dylib 0x35960894 _dispatch_queue_invoke$VARIANT$up + 36
10 libdispatch.dylib 0x3596f214 _dispatch_root_queue_drain + 192
11 libdispatch.dylib 0x3596f3b8 _dispatch_worker_thread2 + 84
12 libsystem_c.dylib 0x3599fa10 _pthread_wqthread + 360
13 libsystem_c.dylib 0x3599f8a3 start_wqthread + 7
THREAD 2

0 0xffffffff 0xffffffff
THREAD 3

0 libdispatch.dylib 0x3596f258 _dispatch_root_queue_drain + 260
1 libdispatch.dylib 0x3596f3b8 _dispatch_worker_thread2 + 84
2 libsystem_c.dylib 0x3599fa10 _pthread_wqthread + 360
3 libsystem_c.dylib 0x3599f8a3 start_wqthread + 7
THREAD 6

0 CoreLocation 0x391491f0 <redacted> + 136
1 CoreLocation 0x3918065c <redacted> + 36
2 CoreLocation 0x3917efee <redacted> + 214
3 libxpc.dylib 0x34930b40 do_mach_notify_port_destroyed + 160
4 libxpc.dylib 0x34930a9a _Xmach_notify_port_destroyed + 126
5 libxpc.dylib 0x34930a16 notify_server + 90
6 libxpc.dylib 0x3493789c _xpc_connection_mach_event + 952
7 libdispatch.dylib 0x35970df8 _dispatch_mach_msg_invoke$VARIANT$up + 124
8 libdispatch.dylib 0x3596095c _dispatch_queue_drain$VARIANT$up + 84
9 libdispatch.dylib 0x3597106e _dispatch_mach_invoke$VARIANT$up + 154
10 libdispatch.dylib 0x3596095c _dispatch_queue_drain$VARIANT$up + 84
11 libdispatch.dylib 0x35960894 _dispatch_queue_invoke$VARIANT$up + 36
12 libdispatch.dylib 0x3596095c _dispatch_queue_drain$VARIANT$up + 84
13 libdispatch.dylib 0x35960894 _dispatch_queue_invoke$VARIANT$up + 36
14 libdispatch.dylib 0x3596f214 _dispatch_root_queue_drain + 192
15 libdispatch.dylib 0x3596f3b8 _dispatch_worker_thread2 + 84
16 libsystem_c.dylib 0x3599fa10 _pthread_wqthread + 360
17 libsystem_c.dylib 0x3599f8a3 start_wqthread + 7
THREAD 7

0 CoreFoundation 0x33344da2 __CFRunLoopRun + 882
1 CoreFoundation 0x332b7ebc CFRunLoopRunSpecific + 356
2 CoreFoundation 0x332b7d48 CFRunLoopRunInMode + 104
3 Foundation 0x34eae78e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 254
4 Foundation 0x34f5205c -[NSRunLoop(NSRunLoop) run] + 80
5 GPIreland 0x0012999c -[TFNetworkManager networkRunLoopThreadEntry] + 124
6 Foundation 0x34f5b67c __NSThread__main__ + 972
7 libsystem_c.dylib 0x359aa310 _pthread_start + 308
8 libsystem_c.dylib 0x359aa1d7 thread_start + 7
LOAD ADDRESS

0x0000b000

REGISTER VALUES

cpsr: 536870960
exception: 0
far: 2180846006
fsr: 7
lr: 855668917
pc: 874685872
r0: 534160688
r1: 855823900
r10: 999295808
r11: 534104888
r12: 998755496
r2: 0
r3: 534160688
r4: 2180845998
r5: 534381712
r6: 534465568
r7: 803163884
r8: 854411733
r9: 213955975
sp: 803163868 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T21:14:09.617

**编辑**：这里有针对 sdk 1.3.0-beta.2 中的这个错误的修复：[https ://testflightapp.com/sdk/download/](https://testflightapp.com/sdk/download/)

我在 TestFlight 工作。我们最近才发现了这个错误。这是 CoreTelephony 的 iOS 错误。TestFlight SDK 使用 CoreTelephony。所以这有时会导致崩溃。我们有一个很快就会准备好的修复程序。它将包含在下一个测试版中（可能是 1.3.0-beta.2）。我很抱歉给您带来麻烦！

杰森

对于那些感兴趣的人，有关崩溃的更多信息：

有一个 iOS 错误会导致`CTTelephonyNetworkInfo`类的实例在它们被释放后有时会收到通知。而不是实例化、使用和释放实例，您必须保留而不是释放它们来解决错误。

# entity-framework - 基于完整对象查询的实体框架方法

> ID：14238590
> 
> 赞同：0
> 
> 时间：2013-01-09T15:24:10.977
> 
> 标签：entity-framework, linq-to-sql, entity-framework-4, linq-to-entities, entity-framework-4.1

如何在实体框架中实现以下查询方法，下面是 NHibernate 文档[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html的片段](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)

```
 Example example = Example.create(cat)
    .excludeZeroes()           //exclude zero valued properties
    .excludeProperty("color")  //exclude the property named "color"
    .ignoreCase()              //perform case insensitive string comparisons
    .enableLike();             //use like for string comparisons
 List results = session.createCriteria(Cat.class)
    .add(example)
    .list(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:11:50.620

实体框架是基于 LINQ 的。据说 Linq 是一种声明性语言，这意味着告诉*我们*要做什么而不是*如何*去做（命令式）。像这样的声明

```
context.Orders.Select(o => o.OrderDate).Distinct(); 
```

如果您愿意，它是一个声明式快捷方式，用于“仪式”`foreach`语句，`OrderDate`如果之前未将 s 添加到列表中，则将其添加到列表中。

我不是 NHibernate 或其标准 API 方面的专家，但标准 API 似乎比 linq 更具声明性。这使得很难比较它们。几个区别：

*   主要的：在EF中无法通过示例查询。
*   linq 无法为整个查询设置行为。例如，如果要排除零值属性，则必须在`where`谓词中指定它们中的每一个（这更接近于告诉*如何*过滤）。
*   EF 中的大小写敏感性完全不发达。例如，像这样的语句

    `People.Where(c => string.Compare( c.Name, "z", false) > 0)`

    将生成与

    `People.Where(c => string.Compare( c.Name, "z", true) > 0)`

    数据库排序规则确定字符串比较的大小写敏感性。

*   您可以进行`LIKE`查询，但再次为每个谓词指定：

    `People.Where (c => c.Name.Contains("a"))`

    （再次：不区分大小写）

所以我不能真正给出你的标准查询的 linq 翻译。我必须知道类属性才能指定所有单独的谓词。

# android - 尝试使用 Android 签入 Foursquare 时出现 FileNotfoundException

> ID：14238591
> 
> 赞同：0
> 
> 时间：2013-01-09T15:24:12.243
> 
> 标签：android, foursquare

自最近几天以来，我一直在尝试寻找答案，但没有运气，即使是一些 stackoverflow 答案也无济于事。

我试图在通过 Android 收到他的 UserToken 后检查用户。我得到了一个`FileNotfoundException`at `getInputStream()`，未经身份验证的 API，比如 `"https://api.foursquare.com/v2/venues/categories"`运行良好。我错过了什么吗？

```
 URL url = new URL("https://api.foursquare.com/v2/checkins/add?oauth_token="+token);
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    conn.addRequestProperty("venueId","12238");
    conn.setDoInput(true);
    conn.setRequestMethod("POST");
    conn.setAllowUserInteraction(true);
    conn.connect();
    InputStream is = conn.getInputStream();
    String response = streamToString(is);
    return response; 
```

经过一番努力，终于解决了这个问题。请看下面我的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T17:07:25.260

该类`HttpURLConnection`具有误导性，因为它将`FileNotFoundException`为任何 400 或更高的 HTTP 错误代码抛出一个。

所以它不一定是一个不正确的 URL (404)，它可能是 400（错误请求）、403（禁止）、500（内部服务器错误）等。

使用该[`getResponseCode`](http://developer.android.com/reference/java/net/HttpURLConnection.html#getResponseCode%28%29)方法可以更准确地指示问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T01:38:12.217

尝试使用与添加场所 ID 相同的方法添加 oauth_token。此外，您的场地 ID 无效，因此请确保您将用户签入到真实场地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:38:27.387

Okie 我终于设法解决了这个问题，我不知道我上面的代码到底是什么问题，但下面的工作。

此 API 需要 POST 调用，但即使场地 ID 也必须是 URL 的一部分，并且 addRequestProperty 似乎没有正确发送场地 ID。因此我将代码更改为

```
URL url = new URL("https://api.foursquare.com/v2/checkins/add?venueId=12238&oauth_token="+token); 
```

这解决了问题。谢谢大家

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:57:59.200

**首先**：Yoy 有 https url，并尝试创建 HttpURLConnection。您应该使用 HttpsURLConnection。

**第二**：您可以尝试添加conn.setDoOutput(true)，“post”请求需要它。没有它，尽管在 conn.setRequestMethod("POST") 上，服务器仍可以尝试向您发出 get 请求。您还可以从浏览器插件中检查标题，并将它们放入您的请求中。

# web-services - 来自 Jenkins 的 Web 服务调用

> ID：14238593
> 
> 赞同：6
> 
> 时间：2013-01-09T15:24:16.640
> 
> 标签：web-services, jenkins

我需要编写一个 web 服务客户端并从 Jenkins 调用它。以下是我的问题：

*   从 Jenkins 调用 Web 服务的最佳方式是什么？有没有可用的默认插件？我需要将 XML 数据作为输入传递给 Web 服务。
*   如果插件不是选项，请告诉我我们可以实现此目的的其他方法是什么（ANT + JAVA 等）？
*   如果您有任何示例代码，那就太好了。

谢谢阿拉文德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:54:15.507

很高兴知道您只需要调用您的客户端作为某些复杂流程的一部分，作为 Jenkins 作业实现，或者您想专注于 Web 服务测试。

WillieT 为您指出了几个可用于解决一些基本任务的简单方法。如果您需要更多功能、更好的报告、一些附加功能，请考虑以下内容：

**Apache JMeter**（[详情](http://jmeter.apache.org/)）

*   [构建 WebService 测试计划](http://jmeter.apache.org/usermanual/build-ws-test-plan.html)
*   [JMeter 中的 Web 服务测试](http://www.youtube.com/watch?v=IsmrHK6FPjA)
*   [使用 JMeter 进行 Web 服务测试](http://theholyjava.wordpress.com/2010/06/04/webservice-testing-with-jmeter-passing-data-from-a-response-to-another-request/)

JMeter 可以使用[Performance plugin](https://wiki.jenkins-ci.org/display/JENKINS/Performance+Plugin)集成到 Jenkins 中。报告示例：

![在此处输入图像描述](../Images/bc8b869ed36928f7a7d4e9713ede7c5f.png)

**磨床**（[详情](http://grinder.sourceforge.net/)）

我更喜欢使用这个工具，但它可能对你来说很复杂/繁重。

*   [磨床脚本库](http://grinder.sourceforge.net/g3/script-gallery.html)
*   [如何使用 Grinder 测试 REST Web 服务](http://sub-second.blogspot.com/2012/03/how-to-test-rest-web-service-using.html)

Grinder 可以使用[Grinder 插件](https://wiki.jenkins-ci.org/display/JENKINS/Grinder+Plugin)集成到 Jenkins 中。报告示例：

![在此处输入图像描述](../Images/92631823434b30388e60b533e32c8a6b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-10T09:37:04.140

[![在此处输入图像描述](../Images/7f6f749752cbb59c951e33d8fed59682.png)](https://i.stack.imgur.com/rVZAG.png)我使用了“HTTP 请求”插件。这个插件适用于 REST 和 SOAP api。在此处输入图像描述 插件图像[![在此处输入图像描述](../Images/9a3619e32d5df47e733f88efb13a2cac.png)](https://i.stack.imgur.com/9Zw3G.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T06:21:51.563

如果您开发插件，例如扩展 hudson.tasks.Builder，请在 pom.xml 中为 JAX-RS 客户端包含以下内容：

```
 <dependency>
        <groupId>javax.ws.rs</groupId>
        <artifactId>javax.ws.rs-api</artifactId>
        <version>2.0.1</version>
    </dependency>
    <dependency>
        <groupId>org.glassfish.jersey.core</groupId>
        <artifactId>jersey-client</artifactId>
        <version>2.25.1</version>
    </dependency> 
```

一个示例 JAX-RS 客户端：

```
import javax.ws.rs.client.Client;
import javax.ws.rs.client.ClientBuilder;
import javax.ws.rs.client.WebTarget;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.UriBuilder;
import org.glassfish.jersey.client.ClientConfig;

public class RestClient {

    private static String BASE_URL = "http://localhost:8090/rest";
    private static String ACCESS_TOKEN = "8900***bc1";

    public static String query(String path) {

        ClientConfig config = new ClientConfig();
        Client client = ClientBuilder.newClient(config);
        WebTarget target = client.target(getBaseURI());

        // token authentication
        String result = target.path(path).request().header("Authorization", "Token " + ACCESS_TOKEN)
            .accept(MediaType.APPLICATION_JSON).get(String.class);
        return result;
    }

    private static URI getBaseURI() {
        return UriBuilder.fromUri(BASE_URL).build();
    }
} 
```

其中[http://localhost:8090/rest](http://localhost:8090/rest)是 Jenkins 环境之外的基本 rest url。在插件代码的任何地方，您都可以根据需要简单地调用它：

```
String rsData = RestClient.query("/project_type"); 
```

假设完整的 REST Web 服务 URL 是

```
http://localhost:8090/rest/project_type 
```

您也可以使用[Apache HttpClient](https://hc.apache.org/httpcomponents-client-ga/index.html)或[OkHttp](http://www.vogella.com/tutorials/JavaLibrary-OkHttp/article.html)

# templates - 用于设置类成员变量的用户定义属性和编译时评估

> ID：14238598
> 
> 赞同：2
> 
> 时间：2013-01-09T15:24:42.937
> 
> 标签：templates, attributes, tuples, d

我正在尝试更多地了解 D 的编译时评估，并了解它的模板、mixin、属性等是如何工作的。我想做的一件事是找出一种优雅的方法来将类的成员标记为可序列化或可从数据库加载。在下面的示例中，我创建了一个元组，其中列出了在读取或（稍后）序列化实例时要使用的成员。

我的第一个问题是，如下所示，这是对元组的正确用法吗？其次，如果是这样，有没有办法在编译时使用我分配给相关成员变量的用户定义属性自动生成这个元组？我已经浏览了各种文档页面，例如[http://dlang.org/attribute.html](http://dlang.org/attribute.html)和[http://dlang.org/phobos/std_traits.html](http://dlang.org/phobos/std_traits.html)但我似乎无法弄清楚如何正确使用它们这个目的（即遍历一个类的成员并确定哪些变量具有所需的属性）。如果我对应该如何使用属性有完全错误的想法，我也不太确定。任何有关解决此问题的最佳方法的建议将不胜感激。

```
enum ENCODABLE = 1;
alias string[string] Row;
template Tuple (T...) { alias T Tuple; }

class A {
    @(ENCODABLE) string name;
    @(ENCODABLE) int x;
    int* p;

    alias Tuple!("name","x") encodables;

    this(Row row) {
        foreach (var; encodables) {
            __traits(getMember, this, var) = to!(typeof(__traits(getMember, this, var)))(row[var]);
        }
    }
}

void main() {
    Row row = ["name":"Asdf", "x":"120"]; // Simulated database row
    auto a = new A(row);
    writefln("%s,%d,%d", a.name, a.x, a.p); // Asdf,120,null
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:33:53.870

这不是一个很好的答案，但我通过定义自己的帮助模板并将结构用作 UDA（其值指示参数）来使用它们。帮助模板在这里：

[https://github.com/Cyber​​Shadow/ae/blob/master/utils/meta.d#L133](https://github.com/CyberShadow/ae/blob/master/utils/meta.d#L133)

它们在这里使用，以允许覆盖 JSON 序列化器/反序列化器的 JSON 字段：

[https://github.com/Cyber​​Shadow/ae/blob/master/utils/json.d#L505](https://github.com/CyberShadow/ae/blob/master/utils/json.d#L505)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:21:15.940

我已经设法让它与以下代码一起工作，并根据 Cyber​​Shadow 的答案中提供的代码从 isValueInTuple 模板中获得一点帮助。它仍然感觉有点笨拙，但似乎完成了工作。如果我正在做一些违反模板性质的可怕事情，欢迎评论/批评！

```
enum {
    ENCODABLE = "ENCODABLE",
};
alias string[string] Row;
template Tuple(T...) { alias T Tuple; }
template isValueInTuple(string s, T...) {
    static if (T.length == 0) {
        enum bool isValueInTuple = false;
    } else static if (T.length == 1) {
        static if (is(typeof(T[0]) == typeof(s))) {
            enum bool isValueInTuple = T[0] == s;
        } else {
            enum bool isValueInTuple = false;
        }
    } else {
        enum bool isValueInTuple = isValueInTuple!(s, T[0]) || isValueInTuple!(s, T[1..$]);
    }
}
template GenEncodables(U) {
    string GenEncodables() {
        string ret = "alias Tuple!(";
        int fn = 0;
        foreach (index, field; __traits(allMembers, U)) {
            static if (field != "Monitor") { // better way to avoid compilation errors here?
                static if (isAssignable!(typeof(mixin(U.stringof~"."~field)))) {
                    static if (isValueInTuple!(ENCODABLE, __traits(getAttributes, mixin(U.stringof~"."~field)))) {
                        if (fn++)
                            ret ~= ",";
                        ret ~= `"`~field~`"`;
                    }
                }
            }
        }
        ret ~= ") encodables;";
        return ret;
    }
}
mixin template Encodables() {
    mixin(GenEncodables!(typeof(this)));
}

class A {
    @ENCODABLE string name;
    @ENCODABLE int x;
    int *p;

    this() {}

    mixin Encodables; // must come after this() definition, apparently!

    this(Row row) {
        foreach (var; encodables) {
            pragma(msg, "Reading parameter "~var~" from row");
            __traits(getMember, this, var) = to!(typeof(__traits(getMember, this, var)))(row[var]);
        }
    }
} 
```

# visual-studio-2010 - 在 Visual Studio 2010（Visual C++）中使用来自 dll 的函数

> ID：14238601
> 
> 赞同：0
> 
> 时间：2013-01-09T15:24:52.253
> 
> 标签：visual-studio-2010, visual-c++, dll

我从我的项目中制作了一个 dll 并使用 extern "C" 导出一个函数，如下面的代码：

主文件

```
extern "C" __declspec(dllexport) void __cdecl  VectorOfMarker(char*     InAdd,vector<NewMarker>& VectorMarkers)
 {
    DetectSeg d;
    d.VectorOfMarker(InAdd,VectorMarkers);
 } 
```

我构建了项目并成功创建了 .dll 和 .lib 文件。然后我创建了一个新的 Visual c++ 项目并尝试使用这个 dll 和其中提到的函数。虽然我将 .dll 和 .lib 文件复制到同一个目录，但我不能使用 extern "C" 将我的函数导入到第二个项目。我认为我需要更改 Visual Studio 2010 中的一些设置才能使用这些功能有人可以帮我吗？如何使用导出的函数？

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:02:02.890

我认为您对正在构建的 dll 类型感到困惑。

有两种类型的动态链接隐式和显式。要隐式动态链接 dll，您需要创建导出一些函数和/或变量的 dll。这将创建一个 DLL 模块和 .lib 导入库。使用这种类型的 dll 的模块，必须有带有函数原型的头文件，并且必须与 .lib 导入库链接。所以你在编译时链接。由于导出是使用 __declspec(dllexport) 和 __declspec(dlleimport) 完成的，并且导出的函数名称被修饰（损坏）。它们看起来像？ExportedTest@@YAXPAD@Z。

另一种类型是显式链接，这很可能是您正在做的事情。通常这种类型的 DLL 函数使用 .def 文件导出以生成未修饰的函数名称。这也可以通过使用 extern "C" 修饰符来告诉 C++ 编译器将函数编译为 C 风格来实现，因此导出的函数没有修饰并且使用 _（下划线）。

要使用这种类型的 DLL，您必须声明函数类型和参数，调用 Load library 和 GetProcAddress 以获取函数指针。然后，您将能够拨打以下电话：

```
typedef void (*DLLVectorOfMarker)(char*, vector<int>&);

HMODULE hMod = LoadLibrary(_T("ExportTest.dll")); // your lib name goes here

DLLVectorOfMarker pfnVectorOfMarker = (DLLVectorOfMarker)GetProcAddress(hMod, "VectorOfMarker");

vector <int> VectorMarkers;

pfnVectorOfMarker("some string", VectorMarkers); 
```

# linq - 如何确定哪些 Linq 函数不会多次调用 sql？

> ID：14238605
> 
> 赞同：4
> 
> 时间：2013-01-09T15:24:59.407
> 
> 标签：linq, entity-framework, c#-4.0, entity-framework-5

```
 var costCenters = from c in dbContext.CostCenters //no sql call here
                          orderby c.DisplayRank descending
                          select c;

            List<CostCenter> lstCostCenter = costCenters.ToList();//Immediate execution to sql the first time

            lstCostCenter = costCenters.ToList();//no Sql call ??

            int test = costCenters.Count();//Call Sql everytime
            test = costCenters.Count();//Call Sql again??? 
```

我正在使用实体框架 5

我开始学习Linq。我真的很困惑，哪些立即执行函数每次都会调用 SQL。正如您在上面的示例中看到的，ToList() 和 Count() 都是立即执行函数，但只有 Count() 会在子序列调用时连接到 sql。ToList() 连接 sql 1 次，但 Count() 每次都会连接 Sql。
如何确定哪些 linq 函数不会多次调用 sql？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:31:04.427

首先， ToList() 从不使用延迟执行。它总是立即实现信息。它不会每次都返回数据库，因为它已经抓取了所有实体。

要知道哪些运营商在做什么，只需看看[这个链接](http://msdn.microsoft.com/en-us/library/bb882641.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T16:03:49.307

不同之处在于您第一次调用 ToList() 时，它将 IQueryable（它只是一个查询的定义）转换为一个 IEnumerable 列表（查询数据库）。换句话说，您会返回一个现在在内存中的对象列表，因此对结果列表的任何进一步 LINQ 调用都使用适用于内存中对象的 IEnumerable 版本。此外，EF 具有缓存结果的功能，因此即使您在原始 IQueryable 引用上调用 ToList，它也可能使用内存中的对象，而不是从数据库中获取它们。我**猜**Count 再次命中数据库而不是计算缓存的结果，因为对 count 的查询与对 ToList 的查询不同（它是一种聚合/分组），而且可能是这样设计的，因为数据库引擎是更有效地提供计数。

在您的示例中，`costCenters`是一个 IQueryable，因为您所做的只是定义一个查询，但还没有调用 ToList。 `lstCostCenter`是表示使用 ToList 执行后查询的内存中结果的 IEnumerable。通常在 IQueryable 上执行时产生结果的立即调用、.Count、.ToList 等将导致 DB 调用（例外是当它找到可以重用的缓存结果时），并调用 IEnumerable 对象（在你的情况下`lstCostCenter`) 将在内存中运行。

要获得更可预测的结果，请先在 IQueryable 上调用 ToList，然后在 IEnumerable 上进行所有进一步的调用。换句话说，你调用的任何东西`lstCostCenter`都保证不会命中数据库。这通常是处理它的最佳方法，除非您希望生成的列表很大。例如，如果 lstCostCenter 最终有 10,000 个对象，那么您可能不想这样做，`lstCostCenter.Where(x=>x.Blah > 5)`因为这将遍历内存中的所有 10,000 个对象以过滤它们。在这种情况下，最好先通过将附加调用附加到 IQueryable 然后调用 ToList 来修改查询，以便我们利用更擅长处理大型集合的 DB 引擎：`costCenters.Where(x=>x.Blah > 5).ToList()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T16:31:22.583

[http://msdn.microsoft.com/en-us/library/bb738633.aspx](http://msdn.microsoft.com/en-us/library/bb738633.aspx)

区别在于“强制执行”。如果您强制立即执行查询，则会缓存结果。并且转换运算符如 ToList()、ToArray() 甚至 foreach 都归类为强制执行，因此进一步的调用只会对内存缓存进行操作。其中 Count()、First()、Max() 和 Average() 不被视为强制执行......它们是查询的一部分......我猜。

# aem - 在 CQ5 发布实例中设置响应标头

> ID：14238610
> 
> 赞同：2
> 
> 时间：2013-01-09T15:25:27.283
> 
> 标签：aem

我想禁用 CQ 组件中的缓存，并且我的 jsp （[文档](http://helpx.adobe.com/dispatcher/kb/DispatcherNoCache.html)）中有以下行：

```
response.setHeader("Dispatcher", "no-cache"); 
```

如果我将组件插入页面并将页面加载到创作实例中，一切都会按预期工作，我会得到一个名为`Dispatcher`content的 HTTP 标头`no-cache`。

现在，如果我在发布实例（具有相同配置`CQ_RUNMODE='publish'`和相同内容）上执行相同操作，则该组件可以工作，但用于设置 HTTP 标头。

关于为什么这两个实例的行为可能不同的任何想法？

**更新**

我尝试设置其他标头，并且实例的行为方式相同：在创作模式下，标头不是在发布模式下生成的（相同的配置，但用于`CQ_RUNMODE`）

**更新 2**

我试图通过从页面中删除所有不必要的内容（布局、页眉代码、页脚......）来减少我的示例，并且我注意到在一定大小阈值之后我的页眉被正确生成。

换句话说，通过从页面中删除内容（甚至是简单的 HTML），我达到了标题出现的某个点（如果页面足够小）。

关于为什么 CQ 只为非常小的页面生成标题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T22:42:05.673

如果您尝试在页面下方的组件中设置标题，您可能会遇到在[响应已提交](https://stackoverflow.com/questions/2030152/srtservletres-w-warning-cannot-set-header-response-already-committed)后尝试编写它的问题。

如果您需要将页面标记为未缓存并且无法避免将代码放在缓冲区中的较高位置，则可以改为在 JSP 的开头写入此节点类型的检查（`node.listChildren()`例如使用），或提供页面属性让编辑器控制页面是否被缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T08:51:35.867

您没有指出您使用的是哪个版本的 CQ5 - 我只是在 CQ 5.5 GA 发布实例上使用最小 JSP 脚本进行了测试，并且标头已正确设置：

```
$ curl -u admin:admin http://localhost:4503/tmp/x.tidy.json
{
  "sling:resourceType": "x",
  ...
}

$ curl -u admin:admin http://localhost:4503/apps/x/x.jsp
<%
response.setHeader("Dispatcher","no-cache");
%>
Here's the content.

$ curl -D - -u admin:admin http://localhost:4503/tmp/x.html
HTTP/1.1 200 OK
Connection: Keep-Alive
...
Dispatcher: no-cache

Here's the content. 
```

您可能想从这个最小的测试开始，并与您正在做的事情进行比较。

# java - 从基类创建子类实例

> ID：14238614
> 
> 赞同：1
> 
> 时间：2013-01-09T15:25:35.893
> 
> 标签：java, reflection

我有许多类型的异常，它们都具有相同的特征：它们拥有一个始终非零的状态（int）字段。代码通常检查状态变量，如果它不为零，则抛出相应的异常（取决于上下文）。IE：

```
if (status != 0) throw new AStatusException(status);
... // other context
if (status != 0) throw new BStatusException(status);
... // other context
if (status != 0) throw new CStatusException(status); 
```

出于好奇，我想我可能会在`throwIfNotZero`基类的静态方法中实现这个通用功能，`StatusException`并让各种`A, B, CStatusException`类都继承该类。这有望让我编写如下代码：

```
AStatusException.throwIfNonZero(status);
... // other context
BStatusException.throwIfNonZero(status);
... // other context
CStatusException.throwIfNonZero(status); 
```

可悲的是，我得到的最接近的是我在帖子末尾附加的代码，这不是很令人满意。有没有更好的方法来做到这一点，也许不使用反射和/或避免传递看起来多余的类实例的要求（参见“用法”）？

### 基本例外

```
import java.lang.reflect.InvocationTargetException;

public class StatusException extends Exception {
    public int status;
    public StatusException (int status) {
        this.status = status;
    }

    public static <T extends StatusException> void raiseIfNotZero(Class<T> klass, int code) throws T{
        try {
            if (code != 0) throw klass.getConstructor(Integer.TYPE).newInstance(code);
        } catch (NoSuchMethodException e) {
            throw new RuntimeException(e);
        } catch (InstantiationException e) {
            throw new RuntimeException(e);
        } catch (IllegalAccessException e) {
            throw new RuntimeException(e);
        } catch (InvocationTargetException e) {
            throw new RuntimeException(e);
        }
    }

} 
```

### 用法：

```
AStatusException.raiseIfNotZero(AStatusException.class, status);
BStatusException.raiseIfNotZero(BStatusException.class, status); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:09:11.097

您可以在超类 StatusException 中重载函数 raiseIfNotZero()。

像这样称呼它

```
StatusException.raiseIfNotZero(AStatusException.class, status);
StatusException.raiseIfNotZero(BStatusException.class, status); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:56:14.607

```
public static int final STATUS_EXCEPTION_A=1;
public static int final STATUS_EXCEPTION_A=2;

raiseIfNotZero(int type, int status)
{
   switch(type)
   { case STATUS_EXCEPTION_A: throw new AStatusException(); break;
     case STATUS_EXCEPTION_B: throw new BStatusException(); break;
     ...
   }
} 
```

# javascript - getJSON 超时处理

> ID：14238619
> 
> 赞同：22
> 
> 时间：2013-01-09T15:25:56.190
> 
> 标签：javascript, jquery, ajax, json

我正在使用 jQuery`getJSON()`函数。这个函数获取数据没有问题。但有时等待，等待等待......我的加载栏在页面中心显示加载加载加载。所以jQuery`ajax()`函数有一个超时变量。但我想使用`getJSON`功能。而且我认为我可以使用`ajaxStart()`和`ajaxStop()`功能。但是怎么做？

```
$('.loadingDiv')
    .hide()
    .ajaxStart(function() {
        $(this).fadeIn();
        setTimeout("throw '';",15000) //i used this but didn't work
        setTimeout("return;",15000) //i used this but didn't work
        setTimeout("abort();",15000) //i used this but didn't work.(Abort all ajax events)
    })
    .ajaxStop(function() {
        $(this).fadeOut();
    }); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T15:30:22.290

`getJSON()`只是以下内容的简写：

```
$.ajax({
    dataType: "json",
    url: url,
    data: data,
    success: success
}); 
```

因此，您可以根据需要使用`$.ajax()`和指定`timeout`选项。另见：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-09T15:30:27.220

`getJSON()`返回一个可以调用`abort`函数的promise：

```
var p = $.getJSON(..., function(){ alert('success');});
setTimeout(function(){ p.abort(); }, 2000); 
```

**编辑：**但是如果您的目标只是在花费太多时间时中止，那么致命吉他的答案会更好。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-09T15:40:38.220

正如 lethal-guitar 提到`getJSON()`的那样，function 只是`$.ajax()`. 如果您想检测是否发生超时而不是实际错误，请使用以下代码。

```
var request = $.ajax({
    dataType: "json",
    url: url,
    data: data,
    success: function( ) { },
    timeout: 2000
}).fail( function( xhr, status ) {
    if( status == "timeout" ) {
        // do stuff in case of timeout
    }
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-02T20:25:06.703

也总是有核路线：

```
//Set AJAX timeout to 10 seconds
$.ajaxSetup({
  timeout: 10*1000
}); 
```

这会将你的程序发出的所有 AJAX 请求（甚至通过 $.getJSON）设置为 10 秒（或者你有什么）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T15:33:39.127

setTimeout 函数在全局范围内指定的毫秒数之后执行一组代码。

getJSON 函数（这里的 jQuery 文档[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)）是以下的简写：

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  success: success
}); 
```

所以你会想这样打电话：

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  success: success,
  timeout: 15000
});

$('.loadingDiv')
    .hide()
    .ajaxStart(function() {
        $(this).fadeIn();
    })
    .ajaxStop(function() {
        $(this).fadeOut();
    }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-09T19:32:04.533

我认为这些答案中的任何一个都不理想。我知道这已经晚了很多年，但是您要做的是`.ajax();`在接收 JSONP 响应时使用该方法的成功/错误回调选项。

我将如何构建它的示例：

```
 // Call
    $.ajax({

      // URL you want to get
      url: 'http://example.com/json?callback=?',

      // Set a realistic time in milliseconds
      timeout: 3000,

      // Put in success callback function here, this example
      // shows you the data you got back from the call
      success: function(data) {
        console.log(data);
      },

      // Put in an error handling function, just an alert in this case
      error: function(badData) {
        alert('The call was unsuccessful');
      },

      type: 'POST'
    }); 
```

# java - 如何通过轮询检索新的传入数据并将其反馈

> ID：14238620
> 
> 赞同：2
> 
> 时间：2013-01-09T15:26:04.380
> 
> 标签：java, oop, object, methods, long-polling

在这里，该方法读取具有唯一 ID 且序列号不断增加的数据库，因为我是 java 初学者，我能知道如何实现这种重复轮询并每次检查新的传入消息。

```
public void run() {
int seqId = 0;
    while(true) {
        List<KpiMessage> list = null;
        try {
            list = fullPoll(seqId);
            if (!list.isEmpty()) {
                seqId = list.get(0).getSequence();
                incomingMessages.addAll(list);
                System.out.println("waiting 3 seconds");
                System.out.println("new incoming message");
                Thread.sleep(3000);

            }
        } catch (Exception e1) {
            e1.printStackTrace();
        }

    }
}

//Method which defines polling of the database and also count the number of Queries
public List<KpiMessage> fullPoll(int lastSeq) throws Exception {
    Statement st = dbConnection.createStatement();
    ResultSet rs = st.executeQuery("select * from msg_new_to_bde where ACTION =  804 and SEQ >" + lastSeq + "order by SEQ DESC");     
    List<KpiMessage> pojoCol = new ArrayList<KpiMessage>();
    while (rs.next()) {
        KpiMessage filedClass = convertRecordsetToPojo(rs);
        pojoCol.add(filedClass);
    }
    for (KpiMessage pojoClass : pojoCol) {
        System.out.print(" " + pojoClass.getSequence());
        System.out.print(" " + pojoClass.getTableName());
        System.out.print(" " + pojoClass.getAction());
        System.out.print(" " + pojoClass.getKeyInfo1());
        System.out.print(" " + pojoClass.getKeyInfo2());
        System.out.println(" " + pojoClass.getEntryTime());
    }
    //          return seqId;           
    return pojoCol;
} 
```

我的目标是从数据库中轮询表并检查是否有新的传入消息，我可以从表中的 Header 字段 SequenceID 中找到该消息，该字段是唯一的，并且会不断增加新条目。现在我的问题是

1.假设我第一次轮询后，它会读取所有条目并使线程休眠 6 秒，同时如何获取新的传入数据并再次轮询？

2.还有如何添加新数据，当它第二次轮询并将新数据传递给另一个类时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:46:21.117

Poller 每 6 秒调用一次 fullPoll 并将 lastSeq 参数传递给它。最初 lastSeq = 0。当 Poller 获取结果列表时，它将 lastSeq 替换为最大 SEQ 值。fullPoll 只检索 SEQ > lastSeq 的记录。

```
void run() throws Exception {
    int seqId = 0;
    while(true) {
          List<KpiMessage> list = fullPoll(seqId);
          if (!list.isEmpty()) {
            seqId = list.get(0).getSequene();
          }
          Thread.sleep(6000); 
    }
}

public List<KAMessage> fullPoll(int lastSeq) throws Exception {
       ...
       ResultSet rs = st.executeQuery("select * from msg_new_to_bde where ACTION =  804 and SEQ > " + lastSeq + " order by SEQ 
      DESC");     
      .. 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:59:36.413

这是一些您可以用来开始工作的代码。我尝试使用观察者模式使其非常灵活；这样您就可以将多个“消息处理器”连接到同一个轮询器：

```
public class MessageRetriever implements Runnable {
    private int lastID;
    private List<MessageListener> listeners;

   ...

    public void addMessageListener(MessageListener listener) {
        this.listeners.add(listener)
    }

    public void removeMessageListener(MessageListener listener) {
        this.listeners.remove(listener)
    }

    public void run() {
        //code to repeat the polling process given some time interval    
    }  

    private void pollMessages() {
        if (this.lastID == 0)
            this.fullPoll()
        else
            this.partialPoll()           
    }

    private void fullPoll() {
        //your full poll code

        //assuming they are ordered by ID and it haves the ID field - you should
        //replace this code according to your structure
        this.lastID = pojoCol.get(pojoCol.length() - 1).getID() 

        this.fireInitialMessagesSignal(pojoCol)
    }

    private void fireInitialMessagesSignal(List<KAMessage> messages) {
        for (MessageListener listener : this.listeners)
            listener.initialMessages(messages)
    }

    private void partialPoll() {
        //code to retrieve messages *past* the lastID. You could do this by 
        //adding an extra condition on your where sentence e.g 
        //select * from msg_new_to_bde where ACTION = 804 AND SEQ > lastID order by SEQ DESC
        //the same as before
        this.lastID = pojoCol.get(pojoCol.length() - 1).getID() 

        this.fireNewMessagesListener(pojoCol)
    }

    private void fireNewMessagesListener(List<KAMessage> messages) {
        for (MessageListener listener : this.listeners)
            listener.newMessages(messages)
    }

} 
```

还有界面

```
public interface MessageListener {
    public void initialMessages(List<KAMessage> messages);
    public void newMessages(List<KAMessage> messages)
} 
```

基本上，使用这种方法，检索器是一个可运行的（可以在它自己的线程上执行）并负责整个过程：进行初始轮询并在给定的时间间隔内继续进行“部分”轮询。

不同的事件触发不同的信号，将受影响的消息发送给注册的侦听器，然后这些侦听器根据需要处理消息。

# css - Scss mixin 函数变量作用域

> ID：14238626
> 
> 赞同：1
> 
> 时间：2013-01-09T15:26:12.883
> 
> 标签：css, compass-sass, sass

如果这是一个范围问题，则不确定，请考虑以下事项：

```
$custom : #f20;

@mixin colorbyclass($class) {
  .#{$class} {
    background: $class;
  }
}

//scss
@include colorbyclass(custom);

//compiles
.custom { color:custom; } 
```

我的问题是我希望 $class 成为函数内部变量的引用。
[http://jsfiddle.net/yTkqp/](http://jsfiddle.net/yTkqp/)

我很乐意为替代解决方案提供建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:09:28.313

Sass 中不存在变量变量。对于您提供的 mixin，您可以将包含 2 个值的单个列表传递给它，也可以传递 2 个值。

选项1：

```
$custom : #f20;
@mixin colorbyclass($value) {
  &.#{nth($value, 1)} {
    background: nth($value, 2);
  }
}
.container {
  div {
    width:20px;
    height:20px;
    @include colorbyclass(custom $custom);
  }
} 
```

选项#2：

```
$custom : #f20;
@mixin colorbyclass($class, $color) {
  &.#{$class} {
    background: $color;
  }
}
.container {
  div {
    width:20px;
    height:20px;
    @include colorbyclass(custom, $custom);
  }
} 
```

不过，它们看起来就像根本不使用 mixin 一样冗长：

```
.container {
  div {
    width:20px;
    height:20px;
    &.custom {
        background: $custom; // could easily be replaced with a mixin that sets a bg color + other stuff
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:38:00.347

我认为您不能在 sass 中使用可变变量。This other question似乎回答了您的问题： [使用带有scss的哈希](https://stackoverflow.com/questions/6354613/using-hash-with-scss)

# ios - iOS越狱设备开发：如何转储方法调用

> ID：14238632
> 
> 赞同：0
> 
> 时间：2013-01-09T15:26:35.550
> 
> 标签：ios, objective-c, jailbreak

我对越狱的 iOS 设备的开发非常陌生。从我正在阅读的内容中，我了解到要能够完成所有在非越狱手机上无法完成的酷事情，您必须连接到给定的类并覆盖它的一些行为。由于没有文档，开发人员如何跟踪他应该挂钩的确切类？
我想，例如，如果我想让我的应用程序响应给定事件，例如电话启动、通话挂断或用户单击图标，我将手动生成给定事件并查看已进行了哪些调用。这是跟踪您应该在哪里挂钩代码的正确方法吗？如果是，它是如何完成的。
注意我对上面提到的那些事件不感兴趣，我对一般的方法更感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:58:49.327

有几种方法：

*   反汇编二进制文件

您可以反汇编二进制文件或仅使用类转储之类的转储类。因此，您可以看到类的整个层次结构。

*   查找转储类

大多数主要的 iOS 子系统已经被某人拆解了。你可以找到很多有用的东西。

作为例子。谷歌搜索“跳板标题”得到了[这个](https://github.com/peterhajas/SpringBoard-4.x-Headers)

*   在运行时转储类。

看看这个问题的解释：[List selectors for Objective-C object](https://stackoverflow.com/questions/330030/list-selectors-for-obj-c-object)

# css - 如何在 JQuery Mobile 中显示全尺寸图像？（边到边）

> ID：14238633
> 
> 赞同：0
> 
> 时间：2013-01-09T15:26:38.207
> 
> 标签：css, jquery-mobile, image-processing

下午，我想知道是否有人可以帮助解决以下问题。

我有一个非常简单的 JQuery Mobile Web-App，我一直在玩，这是我的 CSS。我试图让“特色图像”显示为从边缘延伸到边缘的全角图像。

```
featured-image{width: 100%; height: 100px; padding: 0 !important; margin: 0;} 
```

我也尝试使用 !important 将填充设置为 0，但它不起作用。我的 HTML 如下所示。如果有人可以提出任何建议，我会很高兴。

```
 <div class="featured-image">
    <img src="inc/images/keynote-full.jpg">
 </div> 
```

# prolog - prolog dcg 限制

> ID：14238644
> 
> 赞同：6
> 
> 时间：2013-01-09T15:27:20.103
> 
> 标签：prolog, dcg, failure-slice

我想用 DCGs 作为发电机。截至目前，语法是

```
s-->a,b.
a-->[].
a-->a,c.
c-->[t1].
c-->[t2].
b-->[t3].
b-->[t4]. 
```

我想生成所有`s`长度`a`为`< someNumber`.

使用`?- phrase(a,X),length(X,Y),Y<4.`i 可以得到 `a`少于 4 个项目的所有项目。但是，当所有组合都用尽时，系统 (SWI-Prolog 6.2.5) 似乎停止运行。以前，[这里也有人问](https://stackoverflow.com/questions/6524722/prolog-combining-dcg-grammars-with-other-restrictions)过类似的问题。但是，作为 Prolog 的新手，我无法使其与上述语法一起使用。有任何想法吗？

更新：（canrememberthename）有一条评论被删除了，不知何故。无论如何，建议使用`between(1,4,Y),length(X,Y),phrase(a,X).`设置限制。在将我的代码更改为之后，这很好用`a-->c,a.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T17:13:26.117

进入 Prolog 的第一步通常有点困难。但你走在正确的轨道上：

目前，您的问题是您得到了一些预期的答案/解决方案，但随后系统停止；实际上，它处于无限循环中。你耐心地敲击就发现了`SPACE`。这可能适用于一小部分解决方案，但使用更大的解决方案会很乏味。想想看所有短于 20 的句子。

有一种简单的键盘和腕管友好方式来模拟击球空间：只需**`false`**在末尾添加一个目标，如下所示：

```
?- 短语(a,X),length(X,Y),Y<4, false。

```

Prolog 能回答这样一个问题吗？既然**`false`**在最后，Prolog 就没有太多选择：要么自己回答；要么自己回答`false`；或者它循环（或产生错误或产生一些副作用）。在这种情况下，它会循环。

**`false`**现在，我们可以通过在您的程序中添加更多目标来缩小问题范围。

```
?- 短语(a,X),length(X,Y), false , Y<4, false。
**循环**

```

为了使这更具可读性，我将只使用一个**`false`**目标并遍历查询的其余部分：

```
?- 短语(a,X),length(X,Y), false , Y<4。
**循环**

```

让我们进一步减少它：

```
?- 短语(a,X), false , length(X,Y),Y<4。
**循环**

```

他们都在循环！但是我们得到了一些有趣的见解：由于这些**`false`**修饰的查询不会终止，因此原始程序也不会终止。因此，当您查看查询时，第一个目标不会自行终止，因此整个查询也不会终止（有关更多信息，请参阅末尾的细则）。

*因此：您必须以某种方式*解决第一个目标！

我的第一次尝试是交换`length`和`phrase`：

```
?- 长度（X，Y），短语（a，X），Y<4。

```

这行得通吗？看看第一个循环的目标：

```
?- 长度（X，Y），假，短语（a，X），Y<4。

```

所以这又不会终止。

您必须再次更改程序：

```
?- between(1,3,Y), length(X,Y), false , phrase(a,X)。
错误的。

```

所以这就结束了。如果会出现终止问题，`phrase(a,X)`现在必须承担责任：

```
?- between(1,3,Y), length(X,Y), phrase(a,X), false。
**循环**

```

您可能很想查看实际答案：

```
?- 在（1,3,Y）之间，长度（X,Y），短语（a,X）。
Y = 1,
X = [t1] ;
Y = 1,
X = [t2] ;
错误：超出本地堆栈

```

您可能会得出结论，这种行为比您最初的定义更糟糕。毕竟，我们现在得到的答案比以前*少了。*但正是这种推理并不能帮助您改善终止：*两者*都具有相同的不正确性，您必须首先解决这个**问题**。因此，通过隐藏答案，您可以更好地专注于其余部分。**`false`**

 ***但是为什么你的语法有问题？我们可以继续使用我们的技术来插入目标**`false`**以缩小范围。但这次在你的语法范围内。装饰有目标的程序**`false`**称为[失败切片](/questions/tagged/failure-slice "显示标记为“故障切片”的问题")。

> 只是一个实用的评论：当我在你的程序中插入目标错误时，我将保存程序并输入`make`SWI：这样程序会快速重新编译。

尝试了一下后，我得到了以下最小的故障片。请注意，在 DCG 中，**`false`**必须写为**`{false}`**.

```
?- between(1,3,Y)，长度(X,Y)，短语(a,X)，假

s--> **{false}** , a,b。

a-->[], **{false}**。
a-->a, {false} , c。

c--> **{false}**， [t1]。
c--> **{false}** , [t2]。

b--> **{false}**， [t3]。
b--> **{false}**， [t4]。

```

几乎你所有的代码库都属于`false`！所以你必须解决微小的可见剩余部分。在其他地方改变一些东西是没有意义的。这`a --> a, ...`必须改变！事实上，改变它来`a --> c, s`解决问题。

当初为什么要写`a --> a, c.`？我怀疑您想以公平的方式列举所有解决方案。新版本没有：

```
?- 短语（a，X）。
X = [] ;
X = [t1] ;
X = [t1, t1] ;
X = [t1, t1, t1] ;
X = [t1, t1, t1, t1] ;
X = [t1, t1, t1, t1, t1] ;
X = [t1, t1, t1, t1, t1, t1] ;
X = [t1, t1, t1, t1, t1, t1, t1] ...

```

这看起来非常吓人。事实上，它看起来是错误的。不是吗？但是不要让您对此感到困惑：我们这里有无限的句子集。所以 Prolog 唯一正确的反应是产生无限多的答案。因为，如果它们是有限的，就会丢失一些列表！但是，当然，您希望看到以公平的方式列举它们。要得到这个，只需写：

```
?- 长度（X，N），短语（a，X）。
X = [],
N = 0 ;
X = [t1]，
N = 1 ;
X = [t2]，
N = 1 ;
X = [t1, t1],
N = 2;
X = [t1, t2],
N = 2;
X = [t2, t1],
N = 2;
X = [t2, t2],
N = 2;
X = [t1, t1, t1],
N = 3 ...

```

这是 Prolog 程序中的一个要点：始终首先寻求最佳（可能）终止属性。并且不要看 Prolog 如何枚举答案的精确顺序。因为，如果一个程序具有更好的终止属性，那么使用它以公平的方式枚举所有解决方案几乎是微不足道的。但是：以公平的方式以终止为代价枚举无限多个解决方案的程序不能用于更有趣的情况。

[**精美印刷品**
[请参阅此答案](https://stackoverflow.com/a/13351469/772868)。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:47:15.517

the nonterminal a//0 is *both* left recursive and 'epsilon' (generate the empty sequence), and phrase/2 will loop immediately after the empty production.

You can solve your problem bounding list' length:

```
?- between(1,4,Y),length(X,Y),phrase(a,X). 
```

and, as you have already done, removing the left recursion.***

# jsf - 如何转义 f:selectItem itemLabel 属性

> ID：14238646
> 
> 赞同：6
> 
> 时间：2013-01-09T15:27:32.587
> 
> 标签：jsf, jsf-2

如何转义`f:SelectItem itemLabel`属性以便我可以在标签中添加超链接？

使用以下代码，我能够逃脱`h:outputText`，但不能`f:selectItem`。

```
 <h:outputText value="MyLink &lt;a href=&quot;http://google.com&quot; &gt;Google &lt;/a&gt;" escape="false"/>              
            <h:selectOneRadio id="p" value="#{bean.somevalue}" required="true" >
                <f:selectItem escape="false" escapeItem="false" itemLabel="One &lt;a href=&quot;http://google.com&quot; &gt;Google &lt;/a&gt;" itemValue="O" />
                <f:selectItem escape="false" escapeItem="false" itemLabel="Two &lt;a href=&quot;http://stackoverflow.com&quot; &gt;Stackoverflow&lt;/a&gt;" itemValue="T" />
            </h:selectOneRadio> 
```

我想要如下图所示的东西

![在此处输入图像描述](../Images/c7203fb376e88ecf588c4e505fd1bfcf.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T16:37:14.330

这是 JSF 中的一个记录错误。[实际属性](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.faces/jsf-api/2.1.13/javax/faces/component/UISelectItem.java#UISelectItem.setItemEscaped%28boolean%29)名为，而`itemEscaped`不是`escapeItem`（[如 VDL 中错误记录的那样](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/selectItem.html)）或`escape`（Eclipse 自动完成确实出于某种未知原因自动建议，但实际上在 VDL 中完全不存在）。

以下构造应该对您有用（至少，它在 Mojarra 2.1.17 上对我有用）：

```
<h:selectOneRadio>
    <f:selectItem itemEscaped="false" itemLabel="One &lt;a href=&quot;http://google.com&quot; &gt;Google &lt;/a&gt;" itemValue="O" />
    <f:selectItem itemEscaped="false" itemLabel="Two &lt;a href=&quot;http://stackoverflow.com&quot; &gt;Stackoverflow&lt;/a&gt;" itemValue="T" />
</h:selectOneRadio> 
```

# php - cakephp 2.X 为 2 个模型/表进行更新/保存

> ID：14238648
> 
> 赞同：1
> 
> 时间：2013-01-09T15:27:52.533
> 
> 标签：php, sql, cakephp, save, cakephp-2.1

我有 2 个表/模型（彼此之间没有任何关系）必须同时更新，如果其中一个无法完成更新过程，另一个将不会更新...... .

如果我尝试

```
if($this->model1->save($data))
   $this->model2->save($data) 
```

无论model2是否成功保存，model1都会更新。

如果第二个保存操作失败，这是我撤消第一个保存操作的任何回滚功能吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:27:32.133

*正如Ross*在评论中所建议的那样，您可以显式地开始和提交/回滚事务。

但是 CakePHP 甚至通过[`saveAssociated()`](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array). 您可以为两个模型传递数据：

> 为了保存一条记录及其具有 hasOne 或 belongsTo 关联的相关记录，数据数组应该是这样的：
> 
> ```
> $data = array(
>       'User' => array('username' => 'billy'),
>       'Profile' => array('sex' => 'Male', 'occupation' => 'Programmer'),
> );
> 
> $Article->saveAssociated($data); 
> ```

有一个选项`atomic`可以控制交易的使用：

> atomic：如果为 true（**默认值**），将尝试将所有记录保存在单个事务中。如果数据库/表不支持事务，则应设置为 false。

如果其中一个模型的验证失败，则另一个模型也不会被保存。

请注意，您的数据库需要支持事务。对于 MySQL，只有 InnoDB 存储引擎支持事务，MyISAM 没有。请参阅[MySQL 存储引擎的比较](https://dev.mysql.com/doc/refman/5.5/en/storage-engines.html#id1110239)。

# c++ - 多线程客户端的 BOOST 教程？

> ID：14238650
> 
> 赞同：2
> 
> 时间：2013-01-09T15:27:59.037
> 
> 标签：c++, boost

除了 BOOST 网站上的那个之外，还有关于多线程客户端的好的教程吗？可以处理向服务器发送数据的多线程客户端，同时还打印服务器正在发送的内容。例如：用户输入内容并将其发送到服务器的线程，以及处理套接字并从服务器接收信息并将其打印到 cout 的线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:23:35.290

您提供的链接是有关如何使用 boost::asio 库的出色指南。一旦你了解它是如何工作的，你就可以在没有多个线程的情况下做你想做的事。

asio（异步 IO）的思想是一旦 io_service 对象完成一个操作就回调你。每当你调用 aync_xxx 时，你都会向它传递一个函数指针（或函子），一旦操作完成，就会调用它。通过这种方式，您不必在轮询 IO 上设置单独的线程阻塞。

例如，一旦完成，您想从服务器读取消息。调用 do_something（消息和消息）。这正是示例代码所做的。

因为 TCP 是基于流的协议，没有自然消息边界，所以您必须在其上定义自己的消息格式。在示例中，它为此目的定义了一个 chat_message 类。

为了读取消息，客户端遵循以下步骤，每个步骤都是在之前的 async_xxx 操作完成后作为回调的结果触发的。它还依赖于 async_read 仅在读取指定的确切字节数或发生错误时才完成的事实。

1.  调用 async_connect，将 handle_connect 作为其回调传递。
2.  handle_connect 调用 async_read，将 handle_read_header 作为其回调传递
3.  handle_read_header 调用 async_read，将 handle_read_body 作为其回调传递。
4.  handle_read_body 最终将调用 async_read，将 handle_read_header 作为其回调传递，以便该过程为下一条消息重复自身。

请注意，在示例中，它在调用 async_read 之前在步骤 4 中执行了“cout.write...”。 **您需要做的就是用您的 do_something(msg) 替换“cout.wirte..”部分。**

写入部分遵循类似的回调链，唯一的区别是当没有更多消息要写入时链中断，因此我们需要检查条件并重新启动它。

# c# - 如何绑定随机数列？

> ID：14238651
> 
> 赞同：0
> 
> 时间：2013-01-09T15:28:02.537
> 
> 标签：c#, asp.net-mvc, binding

`dynamic`如何将此 ( ) 表绑定到`IList<IList<string>>`或其他类型

html:

```
@using (Html.BeginForm())
{
    <table>
        <thead>
            <tr><th>column1</th><th>column2</th></tr>
        </thead>
        <tbody>
            @for (int i = 0; i < 10; i++)
            {
                <tr><td><input type="text" value="@i" name="column1_@(i)"/></td><td><input type="text" value="@(Guid.NewGuid())" name="column2_@(i)"/></td></tr>
            }
        </tbody>
    </table>
    <input type="submit" value ="send"/>
} 
```

我需要获取列和行

**更新：**

也许我可以拿 String[][]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:07:12.210

我的第一个想法是使用 a `Dictionary<string, string>`，但这不是可索引的，因此您必须编写自定义模型绑定器。不是那么难，但仍然如此。然后我考虑使用 a `List<KeyValuePair<string, string>>`，但`KeyValuePair`s 有私人设置器，所以，再次，你需要一个自定义活页夹。所以我认为最好的方法是：

创建自定义类型

```
public class MyItems
    {
        public string Key { get; set; }
        public string Value { get; set; }
    } 
```

现在，将此类型的列表作为属性添加到您的视图模型

```
public List<MyItems> MyItems  { get; set; } 
```

而且，在填充列表并强输入视图之后，当然，您可以使用内置的 html 帮助器呈现您的表格，以确保模型绑定不会出现任何问题

```
@for (int i = 0; i < Model.MyItems.Count( ); i++ )
            {
                <tr>
                    <td>@Html.TextBoxFor( m => m.MyItems[i].Key )</td>
                    <td>@Html.TextBoxFor( m => m.MyItems[i].Value)</td>
                </tr>
            } 
```

然后在控制器中捕获模型并访问您的数据

```
 [HttpPost]
        public ActionResult Index(Model viewModel)
        {
            foreach (var item in viewModel.MyItems)
            {
                string columnOneValue = viewModel.MyItems[0].Key;
                string columnTwoValue = viewModel.MyItems[0].Value; 
            } 
```

# facebook - 使用 Opengraph 将生成的个人图像分享到 FB

> ID：14238652
> 
> 赞同：1
> 
> 时间：2013-01-09T15:28:04.390
> 
> 标签：facebook, gd, facebook-opengraph, sharing

我已经被这个问题困扰了几个星期，并将尝试在下面给出一个简短而详细的解释：

**情况**

[访问网站的用户可以选择使用GD-library](http://php.net/manual/en/book.image.php)生成图像。所以每个用户都生成了个人形象。很简单……直到现在。生成图像后，用户可以选择将此图像分享到 Facebook。这是通过 OpenGraph 协议完成的。

**什么工作（是的！）**

生成图像工作得很好。向 Facebook 分享内容也很有效。

**问题**

尽管以下代码用于共享图像 ( `fbrefresh=CAN_BE_ANYTHING`)。FB 剧照拉出一张旧图。有时这是一个非常旧的图像，有时它是一个更新的图像。但绝不是刚刚生成的图像。

**现在？**

如前所述，我已经尝试过`fbrefresh=CAN_BE_ANYTHING`. 同样在调试工具中没有显示正确的图像，但这可能是因为生成的图像具有从用户 cookie 生成的唯一 ID。所以这个id只有在用户点击生成并分享生成的图像时才可用。

互联网上有没有使用相同策略并且有效的示例？我已经搜索了一半的互联网并没有找到它，但它变得越来越令人沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:55:00.040

> 生成图像后，用户可以选择将此图像分享到 Facebook。这是通过 OpenGraph 协议完成的。

你说的后者到底是什么意思？您只是将该图像上传到用户的墙/他们的一个相册，还是发布一个带有用户生成的照片的 Open Graph 对象？（顺便说一句，*用户生成的照片*字面意思是 OG 动作——你应该只使用用户在执行动作时使用他们的手机相机拍摄的照片。我怀疑 GDlib 生成的图像是否适合那个描述。）

> 尽管以下代码用于共享图像 (fbrefresh=CAN_BE_ANYTHING)。FB 剧照拉出一张旧图。

你所说的“拉”到底是什么意思？您是否将照片作为 HTTP POST 上传上传，是否通过 URL 上传，是否将其指定为 og:image 用于 OG 对象，还是在发布操作时将其作为用户生成的照片传递？

* * *

现在，对于请求客户端正确刷新 URL 引用的资源，通常最简单的方法是将不同的值附加到查询字符串/作为 GET 参数 - fe 当前的 unix 时间戳：`…/image.php?1984372634`或`…/image.php?foo=bar&forcerefresh=1984372634`

由于这个值每秒都在变化，它使这些 URL 中的每一个都成为*不同*的URL，并且请求客户端*绝对别无选择*，只能请求该资源，因为他已经无法在其缓存中拥有它。

# jquery - 如何过滤动态组合框？

> ID：14238653
> 
> 赞同：0
> 
> 时间：2013-01-09T15:28:11.800
> 
> 标签：jquery, combobox

我正在使用 jQuery。

```
$('#ranges').on('change', '.combo', function() {
        var selectedValue = $(this).val();
        var s = $(this).parent("div").attr("class");
        if ($(this).find('option').size() > 2) {
            var newComboBox = $(this).clone();
            var thisComboBoxIndex = parseInt($(this).attr('data-index'), 10);
            var newComboBoxIndex = thisComboBoxIndex + 1;

        $('div.'+s+' .parentCombo' + thisComboBoxIndex).remove();

        if (selectedValue !== '') {
            newComboBox.attr('data-index', newComboBoxIndex);
            newComboBox.attr('id', 'combo' + newComboBoxIndex);
            newComboBox.addClass('parentCombo' + thisComboBoxIndex);
            newComboBox.find('option[val="' + selectedValue + '"]').remove();
            $('div.'+s).append(newComboBox);
        } 
```

});

[小提琴](http://jsfiddle.net/JaVVe/6/)

我如何保证之前的价值总是高于下一个？可能会提醒用户该问题或将该 combobox_text_value 变为“红色”或阻止用户提交。

在小提琴例如。如果我在第一个组合中选择 2，我应该只在下一个组合中选择 3。

ps：如果您需要更多代码，请注意我。

使用值处理动态组合框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:48:44.290

请参阅工作 jsfiddle：

[http://jsfiddle.net/JaVVe/22/](http://jsfiddle.net/JaVVe/22/)

```
$('body').on('change', '.combo', function() {
    var selectedValue = $(this).val();

    if ($(this).find('option').size() > 2) {
        var $newComboBox = $(this).clone();
        var thisComboBoxIndex = parseInt($(this).data('index'), 10);
        var newComboBoxIndex = thisComboBoxIndex + 1;

        $('.parentCombo' + thisComboBoxIndex).remove();

        if (selectedValue !== '') {
            $newComboBox.data('index', newComboBoxIndex)
                        .attr('id', 'combo' + newComboBoxIndex)
                        .addClass('parentCombo' + thisComboBoxIndex)
                        .find('option')
            .filter(function(){return this.value<=selectedValue && this.value}).remove();
            if($('option',$newComboBox).size() > 1)
               $('body').append($newComboBox);
        }
    } 

}); 
```

# c# - 如何调试 .NET 运行时中的内部错误？

> ID：14238657
> 
> 赞同：68
> 
> 时间：2013-01-09T15:28:16.487
> 
> 标签：c#, .net

我正在尝试调试一些处理大文件的工作。代码本身*可以工作*，但 .NET 运行时本身会报告零星错误。就上下文而言，这里的处理是一个 1.5GB 的文件（仅加载到内存中一次）在循环中处理和释放，故意尝试重现这个不可预测的错误。

我的测试片段基本上是：

```
try {
    byte[] data =File.ReadAllBytes(path);
    for(int i = 0 ; i < 500 ; i++)
    {
        ProcessTheData(data); // deserialize and validate

        // force collection, for tidiness
        GC.Collect(GC.MaxGeneration, GCCollectionMode.Forced);
        GC.WaitForPendingFinalizers();
    }
} catch(Exception ex) {
    Console.WriteLine(ex.Message);
    // some more logging; StackTrace, recursive InnerException, etc
} 
```

（加上一些时间和其他东西）

对于不确定的迭代次数，循环将**完全成功地**处理 - 没有任何问题；然后该过程将突然终止。异常处理程序未命中。该测试确实涉及大量内存使用，但它在每次迭代期间都非常好地锯齿（没有明显的内存泄漏，而且我有足够的空间 -在锯齿中**最糟糕**的点有 14GB 未使用的主内存） . 该进程是 64 位的。

Windows 错误日志包含 3 个新条目，其中（通过退出代码 80131506）表明执行引擎错误 - 一个讨厌的小动物。一个[相关的答案](https://stackoverflow.com/a/4367865/23354)，暗示了一个 GC 错误，并带有一个“修复”来禁用并发 GC；然而，这个“修复”并不能阻止这个问题。

澄清：这个低级错误不会影响`CurrentDomain.UnhandledException`事件。

澄清：`GC.Collect`这只是为了监视锯齿状内存，检查内存泄漏并保持可预测性；删除它不会让问题消失：它只是让它在迭代之间保留更多内存，并使 dmp 文件更大；p

通过添加更多控制台跟踪，我观察到它在以下每个过程中都会出现故障：

*   在反序列化期间（大量分配等）
*   在 GC 期间（在 GC“方法”和 GC“完成”之间，使用 GC 通知 API）
*   在验证期间（只是`foreach`在一些数据上） - 奇怪的**是在**验证期间 GC“完成”之后

所以很多不同的场景。

我可以获得崩溃转储（dmp）文件；我如何进一步调查这个问题，看看系统在发生如此严重的故障时在做什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-16T00:02:14.027

如果您有内存转储，我建议您使用 WinDbg 来查看它们，假设您还没有这样做。

尝试运行注释`!EEStack`（混合本机和托管堆栈跟踪），并查看堆栈跟踪中是否有任何可能跳出的内容。在我的测试程序中，我发现这是发生 FEEE 的堆栈跟踪之一（我故意破坏堆）：

```
0:000> !EEStack
---------------------------------------------
线程 0
当前帧：ntdll!NtWaitForSingleObject+0xa
Child-SP RetAddr 调用者、被调用者
00000089879bd3d0 000007fc586610ea KERNELBASE!WaitForSingleObjectEx+0x92，调用 ntdll!NtWaitForSingleObject
00000089879bd400 000007fc5869811c KERNELBASE!RaiseException+0x68，调用 ntdll!RtlRaiseException
[...]
00000089879bec80 000007fc49109cf6 clr!WKS::gc_heap::gc1+0x96，调用 clr!WKS::gc_heap::mark_phase
00000089879becd0 000007fc49109c21 clr!WKS::gc_heap::garbage_collect+0x222，调用 clr!WKS::gc_heap::gc1
00000089879bed10 000007fc491092f1 clr!WKS::GCHeap::RestartEE+0xa2，调用 clr!Thread::ResumeRuntime
00000089879bed60 000007fc4910998d clr!WKS::GCHeap::GarbageCollectGeneration+0xdd，调用 clr!WKS::gc_heap::garbage_collect
00000089879bedb0 000007fc4910df9c clr!WKS::GCHeap::Alloc+0x31b，调用 clr!WKS::GCHeap::GarbageCollectGeneration
00000089879bee00 000007fc48ff82e1 clr!JIT_NewArr1+0x481

```

由于这可能与垃圾收集器的堆损坏有关，我会尝试该`!VerifyHeap`命令。至少您可以确保堆完好无损（并且您的问题在其他地方）或发现您的问题实际上可能与 GC 或某些 P/Invoke 例程损坏它有关。

如果您发现堆已损坏，我可能会尝试发现有多少堆已损坏，您可以通过`!HeapStat`. 不过，这可能只是显示整个堆从某个点损坏。

很难建议任何其他方法通过 WinDbg 进行分析，因为我对您的代码在做什么或它的结构没有真正的线索。

我想如果你发现它是堆的问题，因此意味着它可能是 GC 怪异，我会查看 Windows 事件跟踪中的[CLR GC 事件](http://msdn.microsoft.com/en-us/library/ff356162.aspx)。

* * *

如果您获得的小型转储没有切割它*并且*您使用的是 Windows 7/2008R2 或更高版本，则可以在进程无异常终止时使用全局标志 (gflags.exe) 附加调试器，如果您正在没有收到 WER 通知。

在`Silent Process Exit`选项卡中，输入可执行文件的名称，*而不是*它的完整路径（即。`TestProgram.exe`）。使用以下设置：

*   选中启用静默进程退出监控
*   检查启动监视器进程
*   对于监控进程，使用 `{path to debugging tools}\cdb.exe -server tcp:port=5005 -g -G -p %e`.

并应用设置。

当您的测试程序崩溃时，cdb 将附加并等待您连接到它。启动 WinDbg，键入 Ctrl+R，然后使用连接字符串：`tcp:port=5005,server=localhost`.

您可能可以跳过使用远程调试，而是使用`{path to debugging tools}\windbg.exe %e`. 但是，我建议使用远程的原因是`WerFault.exe`，我认为读取注册表并启动监视进程的 会在会话 0 中启动调试器。

您可以使会话 0 交互并连接到窗口站，但我不记得是如何完成的。这也很不方便，因为如果您需要访问已打开的任何现有窗口，则必须在会话之间来回切换。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T16:20:40.190

`Tools->Debugging->General->Enable .Net Framework Debugging`

+

`Tools->IntelliTace-> IntelliTaceEbents And Call Information`

+

`Tools->IntelliTace-> Set StorIntelliTace Recordings in this directory`

并选择一个目录

应该允许您进入 .net 代码并跟踪每个函数调用。我在一个小型示例项目上进行了尝试，它可以工作

在每个调试会话之后，它应该创建调试会话的记录。如果我没记错的话，即使 CLR 死了，它也是设置的目录

这应该允许您在 CLR 崩溃之前进行确切的调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T15:37:22.070

尝试编写一个通用的异常处理程序，看看是否有未处理的异常杀死你的应用程序。

```
 AppDomain currentDomain = AppDomain.CurrentDomain;
    currentDomain.UnhandledException += new UnhandledExceptionEventHandler(MyExceptionHandler);

static void MyExceptionHandler(object sender, UnhandledExceptionEventArgs e) {
        Console.WriteLine(e.ExceptionObject.ToString());
        Console.WriteLine("Press Enter to continue");
        Console.ReadLine();
        Environment.Exit(1); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-13T21:51:30.170

我通常用 Valgrind 和 gdb 研究与内存相关的问题。

如果你在 Windows 上运行你的东西，有很多很好的替代品，例如 callgrind 的verysleepy，如下所示：
[Windows 有没有好的 Valgrind 替代品？](https://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows)

如果你真的想调试 .NET 运行时的内部错误，你的问题是既没有类库也没有 VM 的源。

由于你无法调试你没有的东西，我建议（除了用 ILSpy 反编译有问题的 .NET 框架库，并将它们添加到你的项目中，这仍然不包括 vm）你可以使用单声道运行时。
那里既有类库的来源，也有 VM 的来源。
也许你的程序在单声道上运行良好，那么你的问题就会得到解决，至少只要它只是一个一次性处理任务。

如果没有，有一个关于调试的广泛常见问题解答，包括**[GDB](http://www.gnu.org/software/gdb/)支持**
[http://www.mono-project.com/Debugging](http://www.mono-project.com/Debugging)

Miguel 也有这篇关于 valgrind 支持的帖子：http:
[//tirania.org/blog/archive/2007/Jun-29.html](http://tirania.org/blog/archive/2007/Jun-29.html)

除此之外，如果您让它在 Linux 上运行，您还可以使用[strace](http://en.wikipedia.org/wiki/Strace)来查看系统调用中发生了什么。如果您没有大量使用 winforms 或 WinAPI 调用，.NET 程序通常在 Linux 上运行良好（对于文件系统区分大小写的问题，您可以循环挂载不区分大小写的文件系统和/或使用[MONO_IOMAP](http://www.mono-project.com/IOMap)）。

如果你是以 Windows 为中心的人，[这篇文章](https://stackoverflow.com/questions/3847745/systrace-for-windows) 说 Windows 最接近的是 WinDbg 的 Logger.exe，但 ltrace 信息没有那么广泛。

Mono 源代码可在此处获得：http:
[//download.mono-project.com/sources/](http://download.mono-project.com/sources/)

您可能对最新单声道版本的来源感兴趣
[http://download.mono-project.com/sources/mono/mono-3.0.3.tar.bz2](http://download.mono-project.com/sources/mono/mono-3.0.3.tar.bz2)

如果您需要框架 4.5，则需要 mono 3，您可以在此处找到预编译包
[https://www.meebey.net/posts/mono_3.0_preview_debian_ubuntu_packages/](https://www.meebey.net/posts/mono_3.0_preview_debian_ubuntu_packages/)

如果你想修改源代码，编译方法如下：
[http ://ubuntuforums.org/showthread.php?t=1591370](http://ubuntuforums.org/showthread.php?t=1591370)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T21:27:36.960

存在无法捕获的 .NET 异常。查看：http: [//msdn.microsoft.com/en-us/magazine/dd419661.aspx](http://msdn.microsoft.com/en-us/magazine/dd419661.aspx)。

# c# - 有什么方法可以控制 TableLayoutPanel 中单元格边框的厚度？

> ID：14238659
> 
> 赞同：1
> 
> 时间：2013-01-09T15:28:22.710
> 
> 标签：c#, winforms, tablelayoutpanel

我正在开发一个有很多`TableLayoutPanel`用途的 Winform 应用程序。

如果可能的话，我想将单元格边框的厚度设置为零或非常小，因为分层使用`TableLayoutPanel`减少了实际单元格内容的宽度和高度。

我试图在 MSDN 和 Google 中搜索，但没有成功。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T16:12:58.710

设置`Padding`和`Margin`你`TableLayoutPanel`的`0|0|0|0`

![在此处输入图像描述](../Images/cef2e31334d60963140827852d90bed0.png)

# python - 如何使用 XML 和 AS3 从 Flash 批量创建 SWF 文件？

> ID：14238660
> 
> 赞同：1
> 
> 时间：2013-01-09T15:28:25.140
> 
> 标签：python, xml, actionscript-3, flash, sockets

我目前正在`.SWF`使用`Flash`,`XML`和`Action Script 3`. 我使用来自`XML`（图片、文本）`.FLA`和 &的数据`AS3`来使图像和文本在动画中移动。

```
.FLA > .XML > AS3 > .SWF 
```

我必须一个一个地创建文件，这需要很长时间。我有很多`XML`文件要转换成`swf`.所以我想使用 Python 向 Flash 发送命令，这样我可以创建一批视频（swf）而不必使用 Flash（手动）并一个一个地创建它.

但我正在寻找我得到的选项，但并不是很清楚：

有

`Python XML Socket`,

`Adobe Air`,

`XMLSocket`.

有人可以帮助我更好地了解我们拥有的选项以及如何将其应用到我的项目中。

我需要一种与`Python`, `Flash`, `XML`,通信的方法`AS3`来最终创建`.swf`文件。

谢谢

# google-oauth - 可以将公共 IP 地址用作 Google OAuth 重定向 URI 吗？

> ID：14238665
> 
> 赞同：54
> 
> 时间：2013-01-09T15:28:39.573
> 
> 标签：google-oauth

我正在尝试设置一个需要用户谷歌纬度信息的网络服务，所以我使用谷歌 OAuth 来获取用户授权信息。

但是，当尝试在 Google API 控制台中为 Web 应用程序客户端 ID 设置重定向 URI 时，如果尝试将其设置为“http://PUBLIC_IP/”，则会收到消息错误。

我需要用非本地用户测试它（因此不能使用 localhost），所以我想知道是否必须有一个 web 域才能使用 Google 的 OAuth。如果没有，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-10T16:20:57.990

目前不支持此功能。我提交了功能请求，并将更新进度。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-10-12T21:51:48.093

您可以使用 xip.io 来解决它。

例如：“192.168.0.50.xip.io:3000”将解析为“192.168.0.50:3000”

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-30T18:21:10.637

我也遇到了这个问题，所以我输入了一个带有 .com 扩展名的 URL，并将其输入到我的`/etc/hosts`文件中。奇迹般有效。

不过，我的整个应用程序现在必须在一个明显的“实时”域上开发，这完全是糟透了。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-07T11:55:35.293

我使用了我的公共主机名。如果您有一个静态 IP 地址，它会有所帮助。我使用[http://www.displaymyhostname.com/](http://www.displaymyhostname.com/)来获取我的主机名。当我创建一个新的**Web Application Client ID**时，我将它直接插入**Authorized JavaScript origins**字段。

 **PS我的主机名看起来像这样：111.111.111.111.static.exetel.com.au

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-15T12:38:11.037

您可以使用动态 DNS。我使用了提供免费解决方案的 ddns.net。基本上，您输入您的 FQDN：yourcompany.ddns.net 作为您的域。查找 IP 地址时，.net 域指向 ddns；查找 ddns.net 时，它会在其数据库中查找贵公司，并返回 IP。所以我的看起来像这样：[https](https://wigwam.ddns.net) ://wigwam.ddns.net一切正常。您不需要购买域名，您可以替换您已知的 IP，Google 对此很满意。

当然，您的 IP 必须是静态的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-02-22T20:50:09.830

是的，到目前为止，您仍然需要拥有一个域名才能在您的应用程序中使用 Google OAuth。如果您有一个静态公共 IP 并且不想购买域名，您可以使用[FreeDNS](http://freedns.afraid.org)的免费子域链接到您的公共 IP。使用 Django 应用程序对我来说似乎工作得很好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-08T23:54:19.380

呼应布雷诺在回应他之前的评论时所说的话：

抱歉这里没有更新。基本的应用程序验证活动继续使基于 IP 地址的应用程序的支持不太可能。这些验证活动对于防止滥用用户帐户是必要的。此外，自从请求此功能以来，设置专用域的成本已大大降低。请在此处阅读有关可能选项的其他回复。

您可以阅读有关 Google 应用验证要求 [1] 和 Google 要求安全处理数据的政策 [2] 的更多信息。

[1] [https://support.google.com/cloud/answer/9110914?hl=en](https://support.google.com/cloud/answer/9110914?hl=en)

[2] [https://developers.google.com/identity/protocols/oauth2/policies#secure-response-handling](https://developers.google.com/identity/protocols/oauth2/policies#secure-response-handling)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-09-20T23:23:04.820

xip.io 不再起作用，您可以以相同的方式使用 nip.io，例如：
**10.0.0.1.nip.io** :8000将解析为**10.0.0.1:8000**

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2014-10-08T23:52:32.617

尝试使用完整的服务器名称。

它是从 MyPC/Properties 获得的......类似`http://mypcname.mydomain.name:8080`**

# vim - vi 从行首到光标处删除

> ID：14238669
> 
> 赞同：72
> 
> 时间：2013-01-09T15:29:09.817
> 
> 标签：vim, text-editor, vi

我们如何使用 vim 删除从行首到光标处的字符。比如说，当光标在“w”上时，我们有一个字符串“hello world”。我们如何从“h”删除到“w”。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-01-09T15:31:11.960

试试`d0`。`0`表示行的开头。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-01-09T15:31:36.690

我相信以下应该有效（`d``^`）：

```
d^ 
```

这假设您只想删除它，`h`即使它前面有空格。它将离开空白区域。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-06-28T07:04:50.747

TLDR： **最简单的方法是执行以下操作**

*   使用导航模式
*   将光标设置在您想要的任何行

    > *   按 dgg - 这将删除从光标到开头的所有内容
    > *   按 dG - 这将删除从光标到文档末尾的所有行。

**但为什么？**

```
gg - goes to the begin of the document
G - navigates at its very end
d - delete mode 
```

我也在寻找一些带有 d 符号和行号的组合，当你编辑像 GB 这样的大文件时，我发现它有点烦人。喜欢删除前 3 行，你需要这样做**:0,d3**，但是当文档超过 100 万行时，我的眼睛很难读懂这些废话......

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-01-12T16:12:39.543

其他建议对我不起作用，但我使用视觉模式来实现这一点。

我将光标移动到我想删除的位置，然后点击`v`进入视觉模式。然后我点击`^`选择回到当前行的开头，然后`d`删除所有突出显示的文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-17T11:34:55.740

> 不知道发生了什么，但是当我输入 d0 时，该行从我的光标位置删除到该行的开头。– YouAreAwesome 2017 年 12 月 14 日在 6:43

确认这有效。这似乎是最简单的方法。（您不能对评论进行投票，因此我将其添加为自己的答案。）

示例：在 .ssh/authorized_keys 中，我有：

> no-port-forwarding,no-agent-forwarding,no-X11-forwarding,command="echo '请以用户 "centos" 而不是用户 "root" 登录。';echo;sleep 10" ssh-rsa AAAAB3NzaC1yc2 ...

这是 Amazon AWS 阻止您以 root 身份登录的方式。

我将光标放在 ssh-rsa 中的 s 上并点击 'd0' 并完美删除行首。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-20T15:32:00.270

好吧，如果您的光标在“w”上，您将向后删除...

您可以使用 vim 的 "till" `t`，但向后移动它需要一个大写字母`T`。对于“查找”`f`向后移动它的`F`.

因此，在您的情况下，您可以删除“直到”引号符号： `d``T``"`

或者，如果更喜欢定位/查找“h”： `d``F``h`

尝试先在没有删除的情况下跳来跳去感受一下，然后您可以将动作分层作为前缀。

快乐维明！:)

# c++ - 这是微软实现 std::thread 的一个大错误吗？

> ID：14238670
> 
> 赞同：4
> 
> 时间：2013-01-09T15:29:10.650
> 
> 标签：c++, visual-c++, memory-leaks, c++11, stdthread

```
#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h>
#include <thread>

using namespace std;

void Hello()
{}

int main()
{
    {
        std::thread(Hello).join();
    }    

    _CrtDumpMemoryLeaks();
} 
```

输出窗口显示：（VC++ 编译器版本：2012 年 11 月 CTP）

```
The thread 0x5ab8 has exited with code 0 (0x0).
Detected memory leaks!
Dumping objects ->
{261} normal block at 0x002A2E00, 44 bytes long.
 Data: <                > 01 00 00 00 00 00 00 00 00 00 00 00 0A 00 00 00 
Object dump complete.
The thread 0x5abc has exited with code 0 (0x0).
The thread 0x5ab4 has exited with code 0 (0x0).
The program '[0x5A94] C++11.exe' has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T09:55:06.997

查看以下 MS Connect 条目：

[http://connect.microsoft.com/VisualStudio/feedback/details/757212/vs-2012-rc-std-thread-reports-memory-leak-even-on-stack](http://connect.microsoft.com/VisualStudio/feedback/details/757212/vs-2012-rc-std-thread-reports-memory-leak-even-on-stack)

# sql-server - SQL Server 2012 的 select * 返回列的顺序是否发生了变化？

> ID：14238672
> 
> 赞同：2
> 
> 时间：2013-01-09T15:29:15.437
> 
> 标签：sql-server, sql-server-2012

SQL Server 2012 的 select * 返回列的顺序是否发生了变化？

例如，对于具有列 a1、a2、a3 的表 t，`select * from t`对于 2012 年之前的 SQL Server 版本，该列以 a1、a2、a3 的顺序返回列，并且在迁移到 2012 之后，该顺序更改为其他顺序，例如，a3，a1，a2。

有没有其他人注意到这一点？

为什么会发生这种变化？

我个人很好奇为什么会发生这种情况。转换到 SS 2012 可能有问题？

（不，我的应用程序不依赖于列排序，我知道我应该按照我想要的顺序指定我需要的列，而不是使用`select *`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:31:52.467

它取决于表中每一列的`ordinal_position`值`information_schema.columns`。

该表中的每一列都有一个条目，其中包含表名和序号位置。尝试这个：

```
SELECT column_name, ordinal_position
FROM information_schema.columns 
WHERE table_name = 'table name'; 
```

这应该返回与前一个实例相同的值。

# php - AddThis - 将可变分数发布到 Facebook 和 Twitter

> ID：14238673
> 
> 赞同：0
> 
> 时间：2013-01-09T15:29:15.313
> 
> 标签：php, javascript, jquery, addthis

是否可以让 facebook 和 twitter 的“AddThis”链接从游戏中提取用户的分数？

我正在开发一个简单的 HTML5“测验”。有一个分数计数器设置，我希望能够回应 Twitter 和 Facebook 共享选项，但我似乎无法完成这项工作，我不确定它是否可能......

计数器通过 JS 处理，并在“#score”中动态显示：

```
<div id="score-counter"><span id="score"></span<span>/20</span></div> 
```

我希望能够分享类似“我在这场比赛中获得 '__'/20，你能打败我吗？”之类的话。

浏览了大量文档，但似乎仍然无法弄清楚......有人可以建议如何去做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T05:18:00.950

由于开放图本质上是一个页面抓取工具，因此您无法通过 javascript 动态生成元标记。从本质上讲，这个[答案](https://stackoverflow.com/a/8877506/339698)可能是最终将您引向这个[问题/答案的正确答案](https://stackoverflow.com/questions/8431694/generating-facebook-open-graph-meta-tags-dynamically)。

您基本上需要创建一个单独的共享 url，您将在其中传递要读取的页面的查询参数，以便动态地吐出正确的元标记以供打开的图表查看。

# html - 在Javascript中将图像放在另一个图像上

> ID：14238675
> 
> 赞同：0
> 
> 时间：2013-01-09T15:29:32.023
> 
> 标签：html, css, image

我正在使用 JavaScript。我面临一个问题，即我想将图像放在另一个图像上。我的代码如下：

```
<div>
  <img src="1.jpg" style="z-index:1;"/>
  <img src="2.png" style="z-index:2; left:-100px;"/>
</div> 
```

问题是当我运行代码时，它会将图像放在 DIV 的右下角而不是图像上。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:42:43.993

[**工作演示**](http://jsfiddle.net/Qu3vZ/)

`position: absolute`在 CSS 中使用：

```
img { position:absolute; }

<div>
  <img src="1.jpg"/>
  <img src="2.png"/>
</div> 
```

注意：您无需指定`z-index`是否希望最后一张图片显示在顶部。这是默认浏览器行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:31:18.923

您需要将位置属性添加到图像样式中，例如 ->

```
position:relative 
```

[https://developer.mozilla.org/en-US/docs/CSS/position](https://developer.mozilla.org/en-US/docs/CSS/position)

另外，这不是 javascript，它是 CSS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:31:58.833

```
 <div>
  <img src="1.jpg" />
  <img src="2.png" style=" left:-100px; position:relative"/>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T15:32:54.770

尝试：

```
<div style="position:relative">
  <img src="1.jpg" style="z-index:1;"/>
  <img src="2.png" style="z-index:2; position:absolute;top:0;left:0;"/>
</div> 
```

# c# - ServiceStack 如何处理并发调用？

> ID：14238680
> 
> 赞同：16
> 
> 时间：2013-01-09T15:29:50.033
> 
> 标签：c#, rest, servicestack

ServiceStack 如何处理并发调用？我在 WCF 中寻找等效的 ConcurrencyMode.Multiple 。

我的 WCF 服务具有以下属性集：

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Multiple, UseSynchronizationContext = false)] 
```

我是否需要在 ServiceStack 中启用任何功能以使其每次调用都使用多个线程？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T16:12:30.693

ServiceStack 没有每个 AppHost 的可配置并发模型，它取决于您选择托管 ServiceStack 服务的 AppHost：

### ASP.NET 主机 (AppHostBase)

对于 ASP.NET Web 主机，ServiceStack**本身不会创建任何新线程**，请求只是在处理请求的同一 IIS/Nginx/etc ASP.NET HTTP WebWorker 上处理。

### HttpListener 自宿主 (AppHostHttpListenerBase)

ServiceStack 仅在您调用时在**Startup**上创建一个新线程`new AppHost().Start(url)`。在运行时没有创建新线程，即请求在 HttpListener 异步回调线程上处理。

### HttpListener 长时间运行的自主机 (AppHostHttpListenerLongRunningBase)

这是 ServiceStack 的另一个自托管 HttpListener 选项，它使用自己的托管线程池来执行请求（释放 HttpListener 异步回调线程）。ThreadPool 的默认 poolSize 是**500 个**线程，尽管这可以在`AppHostHttpListenerLongRunningBase(poolSize)`构造函数中配置。

### RedisMQ 主机 (RedisMqServer)

管理长时间运行的任务的一个不错的选择是将请求委托给[Redis MQ 主机](https://github.com/ServiceStack/ServiceStack/wiki/Messaging-and-redis)，它是一个轻量级 MQ 服务器，允许您在托管后台线程中延迟和处理请求。默认情况下，RedisMqServer 为每种消息类型（即请求）生成一个后台线程，尽管这可以在启动时进行配置，例如：在下面的示例中，使用**2 个后台线程**来处理`PostTwitter`请求，而每个后台线程仅使用 1 个处理`CallFacebook`和`EmailMessage`请求：

```
mq.RegisterHandler<PostTwitter>(ServiceController.ExecuteMessage, noOfThreads:2);
mq.RegisterHandler<CallFacebook>(ServiceController.ExecuteMessage);
mq.RegisterHandler<EmailMessage>(ServiceController.ExecuteMessage); 
```

# html - 绝对存在的文件的 404 错误

> ID：14238681
> 
> 赞同：0
> 
> 时间：2013-01-09T15:29:50.497
> 
> 标签：html, http-status-code-404

对于绝对存在的文件，我收到 404 错误。

它在位置`domain.com/video/videoname.mp4`。当我尝试使用 Flash 播放它时，它说找不到视频或拒绝访问。

它不断给出未找到的错误。

当我导航到 时`domain.com/video/`，videoname.mp4 在那里非常清晰地显示。但是，当我单击它时，它会给出 404 错误。

这会是权限问题吗？

这是一个 Windows 服务器，我用处不大。还有一个 IIS 安装，但它并未用于此特定站点的实际管理。

我的猜测是服务器设置或权限设置，但我正在尝试在这里进行健全性检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:47:58.563

您可以将 IIS 服务器设置为在没有访问问题的特定帐户下运行。我只是确保您创建一个应用程序帐户来执行此操作，而不是将其放在用户帐户上。我知道有IUSR 帐户是IIS 使用的默认帐户，这些默认帐户可能存在权限问题。

另一种可能性是视频的 MIME 类型设置不正确。您可以在此目录中放置一个基本的 html 文件来测试以查看扩展 MIME 映射是否有问题。

# sql - SQL TOP 5000 比结果行少于 5000 行的普通查询快？

> ID：14238682
> 
> 赞同：14
> 
> 时间：2013-01-09T15:29:51.640
> 
> 标签：sql, sql-server, tsql

我注意到一些奇怪的行为：

运行此查询：

```
SELECT TOP 5000  t1.f1,t1.f2,t1.f3 
FROM t1
JOIN t2 on t1.f1 = t2.f1
WHERE t2.f1 IS NOT NULL AND (t1.f5 != t2.f3) 
```

在 2 秒内生成 3447 行。

运行这个：

```
SELECT t1.f1,t1.f2,t1.f3 
FROM t1
JOIN t2 on t1.f1 = t2.f1
WHERE t2.f1 IS NOT NULL AND (t1.f5 != t2.f3) 
```

永远运行，直到我停止它（至少 120 分钟！！）。

表`t1`并`t2`保存大约 500k 条记录。

`TOP`如果总行数低于该数字，我一直认为该语句无关紧要，但是，似乎存在非常显着的差异。这是正常的（如果是，为什么）还是只是侥幸？

**编辑：**

按照要求：

**t1：**

```
CREATE TABLE [dbo].[t1](
    [f1] [int] NOT NULL,
    [f2] [varchar](10) NULL,
    [f3] [varchar](4) NULL,
    [f4] [int] NOT NULL,
    [f5] [varchar](max) NULL,
 CONSTRAINT [PK_t1] PRIMARY KEY CLUSTERED 
(
    [f1] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

**f2：**

```
CREATE TABLE [dbo].[t2](
    [f1] [nchar](10) NOT NULL,
    [f2] [nchar](10) NOT NULL,
    [f3] [varchar](max) NOT NULL,
    [f4] [nchar](10) NULL,
    [f5] [date] NULL,
    [f6] [date] NULL,
    [f7] [nchar](1) NULL,
 CONSTRAINT [PK_t2] PRIMARY KEY CLUSTERED 
(
    [f1] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

**执行计划：**

带顶： ![顶部执行](../Images/15b63695da8ac60b9cbd18254d6e9486.png)

没有顶部： ![Exec w/o top](../Images/58fd2958b9902f7a8780f6c76a2b2e97.png)

看着这个，我不得不得出结论`sorting`（为什么这样做？？）导致延迟......你同意吗？

Edit2：根据要求，带有循环选项的执行计划没有顶部： ![在此处输入图像描述](../Images/01825cc866f0a45424945f767afcc366.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T15:03:55.207

问题是您的两个表 [t1] 和 [t2] 对于 JOIN 列具有完全不同（并且很大程度上不兼容）的数据类型`f1`。

这使得查询优化器无法准确估计这两个 500,000 行表之间要匹配的行数。它似乎使用默认的“猜测”，在这种情况下是对实际数字（3477）的总体*高估*。因此，当您不使用 TOP 时，它认为排序然后合并行 (O(NLogN)) 比嵌套循环 (O(N^2)) 更有效，因为它确实没有意识到（合并）JOIN 实际上会消除几乎所有的行。

当您打开 TOP 5000 时，它会意识到嵌套循环更好，因为它会在不超过 5000 时被切断（远小于 500k^2，甚至小于 500k * Log(500k) ）。但与嵌套循环不同，合并排序不能增量完成，它必须首先拥有所有行进行排序。因此，在 5000 处切断输出，根本不会为您节省太多，因此嵌套循环显然是更好的选择（即使 JOIN 估计不好）。

* * *

这里的根本问题是列 T2.f1 是一个 NCHAR(10) ，对于看起来应该包含整数的东西来说，这是一个非常糟糕的选择。最好的解决方案是将该列的数据类型更改为 INT。

如果由于某种原因你不能这样做，那么根据你的 SQL Server 版本，你可以通过添加一个计算 [f1] 的 INT 转换值的持久计算列来结束运行它，然后在其上抛出一个兼容*索引*. 这将允许索引和统计再次为这样的查询工作。

作为最后的手段，您还可以使用查询提示。我通常不推荐它们，因为它们往往是权宜之计，以后会引起问题。但是，如果您觉得这是您唯一的选择，那么添加`OPTION (FAST 1000)`到查询的末尾可能会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:39:24.570

SQL 查询可以通过许多不同的方式进行优化。两种常见的方式是“最快的第一行”和“最快的最后一行”。也就是说，您是否希望最小化获得任何结果的时间或获得完整结果集的时间。

我猜这两个版本的优化方式不同。正如 Aaron 建议的那样，您可以通过查看执行计划来检查这一点。我通常的赌注是慢版本使用嵌套循环连接。您可以使用优化器提示解决此问题，例如：

```
<your query>
option (MERGE JOIN, HASH JOIN) 
```

还有其他可能性。也许这些表正在更新，而当您运行第二个查询时，这些表恰好具有完整的表锁。您可以使用`sp_who2`.

# c++ - C++函数拍照框

> ID：14238684
> 
> 赞同：-6
> 
> 时间：2013-01-09T15:29:55.453
> 
> 标签：c++, function, picturebox

我正在尝试制作一个将图片框作为参数的函数。我怎么做？

前任：

```
void functionName(picturebox a){
    if (... == ...){
        a->Load("filePath")
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:37:30.147

您的错误很可能来自您的图片框被复制。

看到函数如何返回 void，您打算编辑图片框，但通过值传递它，该值调用复制构造函数并为该函数调用创建一个新的临时对象。

如果这是问题所在，请尝试通过引用传递图片框对象。

```
void functionName(picturebox& a){
    if (... == ...){
        a->Load("filePath")
    }
} 
```

# php - PHP <5.3 中的真正闭包

> ID：14238686
> 
> 赞同：3
> 
> 时间：2013-01-09T15:30:01.977
> 
> 标签：php, functional-programming, closures

有没有办法在 PHP 中为早于 5.3 的语言版本编写真正的闭包（因为 5.3 添加了`use`匿名函数的关键字）？

我 PHP 5.3+ 我可以写：

```
function make_adder($x) {
    return function($to) use ($x) {
        return $to + $x;
    };
}
$add5 = make_adder(5);
$add5(100); # => 105 
```

如何使用这种在函数内部定义函数的模式并且内部函数可以访问外部函数变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:33:50.050

在这种简单的情况下，以下内容将起作用：

```
function make_adder($x) {
    return create_function('$to', 'return '.var_export($x, true).' + $to;');
}
$add5 = make_adder(5);
$add5(100); # => 105 
```

但这并不是严格意义上的关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:52:32.720

简单的答案：您所要求的无法在 5.3 之前的 PHP 版本中完成。抱歉，该功能根本不可用。甚至没有任何有用的解决方法（当然除了使用全局变量之外）。

但是，如果您使用的 PHP 版本早于 5.3，我*强烈*建议您升级。

5.2 于两年前被宣布终止，从那时起支持或安全修复为零——它不受支持且不安全。

此外，缺乏支持也延伸到操作系统。对于大多数服务器操作系统，当前操作系统版本不存在 5.2 及更早版本的安装程序。这意味着如果您正在运行 PHP 5.2，那么您很可能也在运行过时的操作系统版本。这也有安全隐患。

任何值得他付出的系统管理员都不会允许他的网络在可公开访问的系统上运行已知不安全的软件，因此，如果您还没有升级，那么您现在真的需要这样做。

如果您使用尚未升级的网络托管公司，您应该考虑将您的业务转移到关心其网络安全的公司。

# php - CodeIgniter 自定义分页助手

> ID：14238688
> 
> 赞同：0
> 
> 时间：2013-01-09T15:30:10.297
> 
> 标签：php, codeigniter, pagination

我想在 CodeIgniter 中创建自己的助手，但我不知道出了什么问题。我将复制我的帮助文件，并在我的另一个文件中初始化此帮助文件并尝试回显，但没有任何显示。

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

     if (!function_exists('pagination'))

{

    function prikazi($per_page, $page, $url, $total)
    {
        $CI =& get_instance();
           $adjacents = "2";

    $page = ($page == 0 ? 1 : $page); 
    $start = ($page - 1) * $per_page;                              

    $prev = $page - 1;                         
    $next = $page + 1;
    $lastpage = ceil($total/$per_page);
    $lpm1 = $lastpage - 1;

    $pagination = "";
    if($lastpage > 1)
    {  
       $pagination .= "<ul class='pagination'>";
           $pagination .= "<li class='details'>Page $page of $lastpage</li>";
        if ($lastpage < 7 + ($adjacents * 2))
        {  
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<li><a class='current'>$counter</a></li>";
                else
                    $pagination.= "<li><a href='{$url}$counter'>$counter</a></li>";                   
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))
        {
            if($page < 1 + ($adjacents * 2))    
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<li><a class='current'>$counter</a></li>";
                    else
                        $pagination.= "<li><a href='{$url}$counter'>$counter</a></li>";                   
                }
                $pagination.= "<li class='dot'>...</li>";
                $pagination.= "<li><a href='{$url}$lpm1'>$lpm1</a></li>";
                $pagination.= "<li><a href='{$url}$lastpage'>$lastpage</a></li>";     
            }
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {
                $pagination.= "<li><a href='{$url}1'>1</a></li>";
                $pagination.= "<li><a href='{$url}2'>2</a></li>";
                $pagination.= "<li class='dot'>...</li>";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<li><a class='current'>$counter</a></li>";
                    else
                        $pagination.= "<li><a href='{$url}$counter'>$counter</a></li>";                   
                }
                $pagination.= "<li class='dot'>..</li>";
                $pagination.= "<li><a href='{$url}$lpm1'>$lpm1</a></li>";
                $pagination.= "<li><a href='{$url}$lastpage'>$lastpage</a></li>";     
            }
            else
            {
                $pagination.= "<li><a href='{$url}1'>1</a></li>";
                $pagination.= "<li><a href='{$url}2'>2</a></li>";
                $pagination.= "<li class='dot'>..</li>";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<li><a class='current'>$counter</a></li>";
                    else
                        $pagination.= "<li><a href='{$url}$counter'>$counter</a></li>";                   
                }
            }
        }

        if ($page < $counter - 1){
            $pagination.= "<li><a href='{$url}$next'>Next</a></li>";
           // $pagination.= "<li><a href='{$url}$lastpage'>Last</a></li>";
        }else{
            //$pagination.= "<li><a class='current'>Next</a></li>";
           // $pagination.= "<li><a class='current'>Last</a></li>";
        }
        $pagination.= "</ul>\n";     
    }          
        return $pagination;
    }
} 
```

在我的另一个文件中，我尝试像这样回显：

```
 $this->load->helper('pagination');
    echo prikazi($bypage,$page,$link,$total); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:46:48.023

When you look at

```
$lastpage = ceil($total/$per_page);
$lpm1 = $lastpage - 1;

$pagination = "";
if($lastpage > 1)
{  
...
} else
return $pagination; 
```

it probably boils down that $lastpage is 0, so an empty string is returned.

You might want to have a look at

```
 if (!function_exists('pagination'))

{

function prikazi($per_page, $page, $url, $total)
{ 
```

too because the function names don't match

# c# - 数组获取最小值大于其他值

> ID：14238690
> 
> 赞同：5
> 
> 时间：2013-01-09T15:30:16.380
> 
> 标签：c#, linq

我有以下数组：

```
float[] arr = { 0, 0.1f, 0, 0.1f, 0, 0.2f }; 
```

选择大于**0**或大于其他值的最小值的最优雅方法是什么？

我试过使用`Min()`，`Select...From...OrderBy...First()`但直到现在还没有运气。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-09T15:31:56.427

使用 LINQ 方法[`Where`](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://msdn.microsoft.com/en-us/library/system.linq.enumerable.where.aspx&ei=o43tUP2OHYeW0QX95IGYBw&usg=AFQjCNFYjmbxJrWOUMGvAlxO7yuAnwouZA&bvm=bv.1357316858,d.d2k)过滤掉零值，然后使用 LINQ 方法[`Min`](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=http://msdn.microsoft.com/en-us/library/system.linq.enumerable.min.aspx&ei=rY3tUKSiNoHA0QWi_oDgCg&usg=AFQjCNEOoKZI5CSToClKVGdEbidMXiKfLg&bvm=bv.1357316858,d.d2k)检索结果集合的最小值。

```
arr.Where(f => f > 0).Min(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T15:32:03.493

您可以使用排除值`Where`，然后应用`Min`：

```
array.Where(a => a > 1 && a < 10).Min(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T15:32:36.757

尝试使用[`Where`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.where.aspx)过滤器；

> 根据谓词过滤一系列值。

以及使用后[`Min()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.min.aspx)的方法。

> 返回值序列中的最小值。

```
arr.Where(a => a > 0).Min(); 
```

这是一个[`DEMO`](http://ideone.com/sAhNts).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T15:37:21.223

如果所有数据都小于您的“其他值”，则所有当前答案都会出现异常。因此，如果这不是您想要的，您将`null`在这种情况下使用以下代码：

```
float[] arr = { 0, 0.1f, 0, 0.1f, 0, 0.2f };
var someOtherValue = 0;

var min = arr.Where(x => x > someOtherValue)
            .Cast<float?>()
            .Min(); 
```

# database-design - 电子邮件列表数据库设计

> ID：14238694
> 
> 赞同：1
> 
> 时间：2013-01-09T15:30:21.473
> 
> 标签：database-design, relational-database, database-schema

为电子邮件列表数据库存储已发送电子邮件的有效方法是什么？我很难弄清楚。

现在，为了简化我有这样的事情：

```
Lists:
ID,
Name

Subscribers:
ID
Email
Name

ListSubscribers:
ID
SubscriberID
ListID

Messages:
ID
Title
Content
ListID 
```

到目前为止一切都很好......问题是弄清楚什么是存储已发送和要发送的电子邮件以及电子邮件发送状态的有效方法。

例如，我可能有数百个列表，每个列表都有数万订阅者。要知道每封邮件的状态，我必须存储每封邮件的详细信息：

```
MessageStatus:
ID
MessageID
SubscriberID
Status (processing, sent, soft bounce, hard bounce) 
```

凭借少数列表和数十万订阅者，这可以在短短几天内激增至数百万条消息。

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:47:01.603

*   列表（表）：ListID（PK），ListName

*   订阅者（表）：订阅者 ID（PK）、列表 ID（FK）、名字、姓氏、电子邮件地址

*   电子邮件（表）：EmailID(PK)、ListID(FK)、主题、内容、SendDate

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:04:52.810

既然你在问这个问题，我会假设桌子占用的空间量`MessageStatus`对你来说是个问题。然而，你应该挑战这个假设。

鉴于您需要管理 的空间`MessageStatus`，您可以从***工作列表***而不是***审核日志***的角度进行操作- 当然，除非您出于某种原因需要拥有审核日志。

为此，请`MessageStatus`按照定义的方式使用表，但当记录进入“SENT”状态时，删除它而不是更新它。这样，您只拥有与尚未发送的电子邮件一样多的记录。

# ios - 如何确定 iOS 设备是否具有启动重大更改位置服务的蜂窝功能？

> ID：14238698
> 
> 赞同：0
> 
> 时间：2013-01-09T15:30:31.077
> 
> 标签：ios

如何检查 iOS 设备是否具有启动重大更改位置服务的蜂窝功能？

据我所知，使用蜂窝塔来定位您的设备位置的位置服务发生了重大变化。所以我想在开始/不开始重大变化的位置服务之前检查我设备上的蜂窝功能。

我也谷歌，我找到了可达性，但可能是可达性只检测当前的活动连接。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:35:04.577

这可能会有所帮助。 [UIDevice- 扩展](https://github.com/erica/uidevice-extension)

# java - 如何从tomcat7中的jar中获取txt文件

> ID：14238699
> 
> 赞同：2
> 
> 时间：2013-01-09T15:30:31.143
> 
> 标签：java, jar, tomcat7

我有一个`txt`文件。我已经将它打包在一个 zip 和一个 jar 中，使用`jar cf0...`. 我已经尝试过这两种方法来让它发挥作用。

```
models.zip/models.jar
 |
 |_subfolder
     |
     |_MyFile.txt 
```

在某些代码中，我有...

```
InputStream in = getClass().getClassLoader().getResourceAsStream(path);
BufferedReader reader = new BufferedReader(new InputStreamReader(in)); 
```

我已经尝试设置路径...

```
MyFile.txt
/MyFile.txt
/subfolder/MyFile.txt
classpath:/subfolder/MyFile.txt
models.zip/subfolder/MyFile.txt
models.jar/subfolder/MyFile.txt
models.zip!/subfolder/MyFile.txt
models.jar!/subfolder/MyFile.txt 
```

我也试过把`jar/zip`in`WEB-INF/classes`和`WEB-INF/lib`.

这些都不起作用，`in`始终为空。

你知道，当我把 MyFile.txt 放在 WEB-INF/classes 中时，我可以得到它。

请提供一个久经考验的答案！请不要只是从另一个答案中复制和粘贴代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:35:25.500

尝试

```
InputStream is = getClass().getClassLoader().getResourceAsStream  ("/subfolder/MyFile.txt"); 
```

并将您的 jar 文件放入 WEB-INF/lib/

编辑：您应该相信自己的代码，这是我正在运行的 web 应用程序的一个片段。类在包“it.sft.utils.props”中，相关属性文件通过 ant int 打包在同一个 jar 的同一个文件夹中。这完美无缺。

在您的特定场景中，您的类路径中可能没有 jar

```
 private void loadFromProperties() throws IOException {
            if (currencies == null) {
                currencies = new Properties();
                InputStream is = this.getClass().getClassLoader().getResourceAsStream  ("/it/sft/utils/props/currencies.props");
            if (is != null) {

                currencies.load(is );

                for (String key : currencies.stringPropertyNames()) {
                    String value = currencies.getProperty(key);
                    try {
                        String [] tmp = value.split(",");
                        String code = tmp[0];
                        int decs = Integer.parseInt(tmp[1]);
                        String text = tmp[2];
                        Logger.getLogger(CurrencyResolver.class).debug("Adding " + key + " with code " + code + " [" + text + "]");
                        storeValutaIso4217(new ValutaIso4217(key, code, decs, text));
                    }catch (Exception e) {
                        // Ignore
                        Logger.getLogger(CurrencyResolver.class).warn("Cannot handle " + key + " >" + value + "<");
                    }
                }
            }
        }
    } 
```

还是您偶然从某种 IDE（NetBeans 或 Eclipse）运行它？

只是因为偏执： jar 文件实际上可以被 tomcat 运行用户读取，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:40:57.223

我认为问题`/`在于`/subfolder/MyFile.txt`.

spring [ClassPathResource](http://static.springsource.org/spring/docs/3.1.3.RELEASE/javadoc-api/org/springframework/core/io/ClassPathResource.html)类使用几乎与您使用的操作相同的操作，但[javadoc 明确指出](http://static.springsource.org/spring/docs/3.1.3.RELEASE/javadoc-api/org/springframework/core/io/ClassPathResource.html#ClassPathResource%28java.lang.String%29)：

> 为 ClassLoader 使用创建一个新的 ClassPathResource。前导斜杠将被删除，因为 ClassLoader 资源访问方法将不接受它。

因此，如果没有弹簧，它将是：

```
Thread.currentThread().getContextClassLoader().getResourceAsStream("subfolder/M‌​yFile.txt"); 
```

此外，您的 jar 必须放入，`WEB-INF/lib`或者如果您想单独放入文本文件，请将其放入`WEB-INF/classes/subfolder/`.

如果您使用的是spring（我的猜测是因为您使用的是伪url类路径：）直接使用这个：

```
InputStream is = new ClassPathResource("subfolder/MyFile.txt").getInputStream(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T16:28:20.747

我觉得自己像个笨蛋！问题是在 lib 和 classes 文件夹中都有 models.jar。它应该只是在 lib 文件夹中。

# c - char数组写入文件

> ID：14238703
> 
> 赞同：0
> 
> 时间：2013-01-09T15:30:44.767
> 
> 标签：c, arrays, string

我有一个名为 Product 的结构，其中有一个名为 prodname 的变量：

```
char prodname[30]; 
```

该结构的实例称为产品

我写了一个方法来检查用户输入的名字是否唯一。在这个方法中，我将用户输入的值传递给名为 checkprodname(char n[30]) 的方法

在主要方法中

```
if(checkprodname(prodName) == 0)
    {
        gotoxy(21,13);
        printf("The Product Name that you have entered already exists.");
        getch();
        addproduct();
        return 0;
    } 
```

然后在此之后我有这行代码：

```
product.prodname = prodName; 
```

为了将临时变量 prodName 中的值分配给实际的结构。当然，我会让他们继续将所有这些保存到文件中。但直到现在我得到一个错误，因为这是我得到的错误：

```
incompatible types when assigning to type char[30] from type char** 
```

我已经对有效的 prodid 使用了相同的逻辑；但是，当使用字符串时，我不知道如何将值实际分配到实际结构中，因为我遇到了那个错误。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:05:09.203

如果您使用 C++，请考虑将 char 数组替换为 std::string。并不是说它有很大的不同，但 std::strings 通常更容易使用。（恕我直言）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:32:57.423

您不能使用该符号在 C 中分配数组。对于字符串，使用`strcpy()`; 对于其他数组，使用`memmove()`or `memcpy()`。在所有情况下，请确保目标中有足够的空间来存储源中的内容。

通常，我希望写：

```
strcpy(product.prodname, prodName); 
```

鉴于您收到的编译警告，您似乎需要使用：

```
strcpy(product.prodname, *prodName); 
```

鉴于下面评论中的讨论，看来第一个替代方案毕竟是正确的，但我认为这意味着编译错误适用于不同的行，而不是显示的分配。

# flash - Flash 视频可在一台服务器上运行，但不能在另一台服务器上运行

> ID：14238706
> 
> 赞同：0
> 
> 时间：2013-01-09T15:30:47.287
> 
> 标签：flash

我得到了一个 Flash 模块，可以放在我们的内部网站上。该网站位于 Microsoft IIS 6 服务器上。模块中有一些幻灯片有一个框架，应该运行它自己的嵌入式 Flash 视频，但是框架是空白的，它只是一个白屏，他们应该播放的视频没有显示出来。但是 Flash 视频的其余部分运行良好。

为了解决这个问题，我尝试从硬盘驱动器上运行视频，整个过程都可以正常工作。我已将它上传到我自己的网站，该网站位于 Apache 服务器上，并且运行良好。我已经手动将文件移动到内部站点，它没有工作。我虽然可能是长文件名将 url 推到了最大 225 个字符的限制之上，所以我缩短了 url，但这不起作用。我已经在文件中搜索了任何奇怪的字符，但我找不到任何东西。我还可以尝试哪些其他事情？为什么这个视频可以在一台服务器上正常播放，而在另一台服务器上却不能？我还能如何解决这个问题？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:47:15.813

当您发布 swf 时，您是否授予 swf 从网络加载的“权限”？（仅发布设置->本地播放安全到接入网络）

# sql-server-2008 - ADO.Net：重用打开的 SqlConnection 还是每次都获取一个新的？

> ID：14238720
> 
> 赞同：5
> 
> 时间：2013-01-09T15:31:19.707
> 
> 标签：sql-server-2008, c#-4.0, ado.net, sql-server-2008-r2

在发布这个问题之前，我已经阅读了这个网站上的几个答案：[like this](https://stackoverflow.com/questions/8649096/open-connection-before-every-single-nonquery-or-one-connection-for-the-whole)和[this](https://stackoverflow.com/questions/9807268/is-it-best-to-pass-an-open-sqlconnection-parameter-or-call-a-new-one-in-each-me)。每个人似乎都同意“c# 应用程序池针对对同一数据库的多次调用进行了优化”。

但是，如果我从池中获得连接，我仍然会观察到显着的性能损失。这是我的基准：

```
 private const string localConnString = "Data Source=(local);Integrated Security=SSPI;database=MyTest;Pooling=true";

    [Test]
    public void GetNewConnectionEveryTime()
    {
        var stopwatch = new Stopwatch();
        stopwatch.Start();
        for (var i = 0; i < 1000; i++)
        {
            using (var conn = new SqlConnection(localConnString))
            {
                conn.Open();
                const string saveTrancount = "EXEC dbo.TestTran";
                ExecuteSql(conn, saveTrancount);
            }
        }
        stopwatch.Stop();
        Console.WriteLine("Time elapsed: {0}", stopwatch.Elapsed);
        //Time elapsed: 00:00:00.5576016
    }

    [Test]
    public void ReuseOneConnection()
    {
        var stopwatch = new Stopwatch();
        stopwatch.Start();
        using (var conn = new SqlConnection(localConnString))
        {
            conn.Open();
            for (var i = 0; i < 1000; i++)
            {
                const string saveTrancount = "EXEC dbo.TestTran";
                ExecuteSql(conn, saveTrancount);
            }
        }
        stopwatch.Stop();
        Console.WriteLine("Time elapsed: {0}", stopwatch.Elapsed);
        //Time elapsed: 00:00:00.1110324
    }

    private void ExecuteSql(SqlConnection conn, string sql, int timeout = 0)
    {
        var command = conn.CreateCommand();
        command.CommandText = sql;
        command.CommandType = CommandType.Text;
        command.CommandTimeout = timeout;
        command.ExecuteNonQuery();
    } 
```

显然，从池中获取连接所花费的时间（00:00:00.5576016 - 00:00:00.1110324 appr 0.44）比实际工作（第二个基准测试中的 00:00:00.1110324）多四倍。我错过了什么？

编辑：我针对在 RAM 磁盘上创建的数据库运行这些基准测试，因此我所有的数据库操作都非常快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T17:05:36.393

你的基准对我来说很有意义。如果您在没有连接池的情况下为每次迭代打开和关闭连接，情况会更糟，但这是一个完全不同的故事。但是，当您关闭一个池连接时，您会将其返回到池中：在幕后，SNAC 发出 sp_reset_connection 并将连接放回池中。通常，这是一个非常快的操作（除非发生阻塞），但它必须花费一些小但非零的时间。
重复使用相同的连接而不关闭和打开每次迭代，避免了这种小的滞后。
但是，如果您比较池连接和非池连接的*相同用途，对我来说会更有意义。*你试过吗？

这是[关于 sp_reset_connection 的有趣帖子](http://www.sqlnotes.info/2012/02/01/few-things-about-pooled-connections/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:24:55.640

+1 to @spaghettidba - I agree, and to add some comments.....

My approach in the past has been to use the same connection multiple times - save having to even go to the connection pool to get a connection each time which I've always assumed (not measured) has *some* cost as @spaghettidba said.

The main performance benefit of the pool, is the scenario where it doesn't make sense/can't reuse the same connection instance - in which case getting a previously used connection from the pool is much faster as it doesn't actually need to go off and actually try to connect to the server, it just assumes it's there and available - i.e. connection.Open() in my experience doesn't error for a pooled connection even if the server is down - it will just error when you try to execute anything against the connection.

# python - python中的“预期::”错误

> ID：14238721
> 
> 赞同：1
> 
> 时间：2013-01-09T15:31:24.947
> 
> 标签：python, eclipse, python-2.7

开始学习python，如果这是初级的，很抱歉。为什么此代码调用错误“Expected::”：

```
cur.execute('''SELECT error FROM WT_enercon_bawnmore WHERE error <> 0;''')
count = 0
for key in d:
    for i in cur:
        if key = i:
            count += 1
    d[key] = count 
```

Eclipse 表示第五行是问题的路径。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T15:35:04.173

你需要写：

```
if key == i: 
```

由于您检查它，而不是分配它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:40:09.500

在 Python 中编程时，您使用`'='`为变量赋值，如果要比较，则必须使用`'=='`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T16:31:31.330

你得到的错误是它期望得到一个它可以评估的表达式。相反，它会看到您正在尝试在`if`语句中进行变量赋值。

```
key = i # assign i to key
key == i # evaluate equality of i and key 
```

`if`语句期望可以评估为`True`或的东西`False`，例如`key == i`。

# jquery - 当我单击列表项时，如何将其滚动到页面顶部？

> ID：14238723
> 
> 赞同：1
> 
> 时间：2013-01-09T15:31:30.377
> 
> 标签：jquery, jquery-mobile, scroll, focus, scrollview

我正在使用 jQuery mobile，我有一个长长的无序列表，如下所示：

```
<div id="wrapper" />
<div id="scroller" />
<div class="trans" />
<ul id="thelist" data-corners="false" 
<div class="theListItem" data-role="collapsible-set" data-collapsed="false">
    <div data-role="collapsible" class="my-collapsible" data-collapsed="false" data-theme="a" data-iconpos="right">
        <h3>$111.58   -  10/30/2012   -   McDonalds Restaurant  -  Chicago Il</h3>
        <div data-role="controlgroup" data-type="horizontal">
            <a class="green" href="categorize.html" data-transition="slide" data-direction="reverse" data-role="button">Yes</a>
            <a class="red" href="#" data-role="button">Not deductible</a>
            <a class="blue" href="IDontKnow.html" data-transition="slide" data-role="button">I don't know</a>
        </div>
        <div data-role="collapsible" class="my-collapsible" data-collapsed="false" data-theme="a" data-iconpos="right">
            <h3>$111.58   -  10/30/2012   -   McDonalds Restaurant  -  Chicago Il</h3>
            <div data-role="controlgroup" data-type="horizontal">
                <a class="green" href="categorize.html" data-transition="slide" data-direction="reverse" data-role="button">Yes</a>
                <a class="red" href="#" data-role="button">No</a>
                <a class="blue" href="IDontKnow.html" data-transition="slide" data-role="button">I don't know</a>
            </div>
            <div data-role="collapsible" class="my-collapsible" data-collapsed="false" data-theme="a" data-iconpos="right">
                <h3>$111.58   -  10/30/2012   -   McDonalds Restaurant  -  Chicago Il</h3>
                <div data-role="controlgroup" data-type="horizontal">
                    <a class="green" href="categorize.html" data-transition="slide" data-direction="reverse" data-role="button">Yes</a>
                    <a class="red" href="#" data-role="button">No</a>
                    <a class="blue" href="IDontKnow.html" data-transition="slide" data-role="button">I don't know</a>
                </div>
            </div>
            </ul>
        </div>
    </div>
</div> 
```

而且，我正在努力做到这一点，以便当我单击任何列表项时，该列表项会突出显示并滚动到我的视口顶部，就在标题下方。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:33:52.023

查看`$.scrollTo()`插件和 jQuery UI`highlight`功能。

也检查这个问题，它有一个很好的滚动到元素的解决方案：[jQuery scroll to element](https://stackoverflow.com/questions/6677035/jquery-scroll-to-element)

[http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

[http://docs.jquery.com/UI/Effects/Highlight](http://docs.jquery.com/UI/Effects/Highlight)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:17:55.260

试试这个：

```
$('a').click(function(){
    $("#scroller").css('top','0');
}); 
```

# vb.net - 如何在 VB.Net 中创建单独的空间

> ID：14238726
> 
> 赞同：-1
> 
> 时间：2013-01-09T15:31:36.830
> 
> 标签：vb.net

如何打造独立空间？

示例：我想将 ASCII 转换为十六进制

> 你好 - 48656C6C6F

但我希望它像这样格式化

> 你好 - 48 65 6C 6C 6F

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:38:04.753

你可以使用[`Encoding.ASCII`](http://msdn.microsoft.com/en-us/library/system.text.encoding.ascii.aspx)和[`BitConverter`](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx)类。

```
Dim asciiBytes = Encoding.ASCII.GetBytes("Hello")
Dim hex = BitConverter.ToString(asciiBytes).Replace("-", " ") 
```

`hex`就是现在`48 65 6C 6C 6F`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T15:57:47.333

或者在一条线上

```
Dim hex = String.Join(" ", "Hello" _
    .Select(Function(c) Convert.ToByte(c).ToString("x2"))) 
```

没有`Replace`.

* * *

如果要显示高字节（因为每个`Char`实际上是两个`Byte`s 因为字符串是 Unicode）

```
Dim hex = String.Join(" ", "Hello" _
    .SelectMany(Function(c) BitConvertor.GetBytes(c)) _
    .Select(Function(b) b.ToString("x2"))) 
```

# haskell - 从单个项目生成多个可执行文件

> ID：14238729
> 
> 赞同：22
> 
> 时间：2013-01-09T15:31:48.343
> 
> 标签：haskell, cabal

具有以下项目结构：

```
src/FirstExecutable.hs
src/SecondExecutable.hs
my-amazing-project.cabal 
```

和以下阴谋集团设置：

```
name:               my-amazing-project
version:            0.1.0.0
build-type:         Simple
cabal-version:      >=1.8

executable first-executable
  hs-source-dirs:   src
  main-is:          FirstExecutable.hs
  ghc-options:      -O2 -threaded -with-rtsopts=-N
  build-depends:    base == 4.5.*

executable second-executable
  hs-source-dirs:   src
  main-is:          SecondExecutable.hs
  ghc-options:      -O2 -threaded -with-rtsopts=-N
  build-depends:    base == 4.5.* 
```

运行`cabal install`失败，输出如下：

```
Installing executable(s) in
/Users/mojojojo/Library/Haskell/ghc-7.4.2/lib/my-amazing-project-0.1.0.0/bin
cabal: dist/build/second-executable/second-executable: does not exist
Failed to install my-amazing-project-0.1.0.0
cabal: Error: some packages failed to install:
my-amazing-project-0.1.0.0 failed during the final install step. The exception
was:
ExitFailure 1 
```

我在做什么错还是这是阴谋集团的错误？

* * *

可执行模块的内容如下：

```
module FirstExecutable where

main = putStrLn "Running FirstExecutable" 
```

和

```
module SecondExecutable where

main = putStrLn "Running SecondExecutable" 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-09T16:00:46.807

cabal 期望可执行文件的模块是`Main`. 您应该跳过模块行或使用`module Main where`.

好的，这是可能的原因。`Main`当您实际编译程序时没有生成模块时，不会生成 haskell 程序的可执行文件。运行可执行文件时使用模块的`main`功能。`Main`一个可能的 ghc 解决方法是`-main-is`flag。所以你可以有类似的东西

```
name:               my-amazing-project
version:            0.1.0.0
build-type:         Simple
cabal-version:      >=1.8

executable first-executable
  hs-source-dirs:   src
  main-is:          FirstExecutable.hs
  ghc-options:      -O2 -threaded -with-rtsopts=-N -main-is FirstExecutable
  build-depends:    base == 4.5.*

executable second-executable
  hs-source-dirs:   src
  main-is:          SecondExecutable.hs
  ghc-options:      -O2 -threaded -with-rtsopts=-N -main-is SecondExecutable
  build-depends:    base == 4.5.* 
```

# mysql - 更新现有数据库和表中的结构修改

> ID：14238732
> 
> 赞同：0
> 
> 时间：2013-01-09T15:31:53.867
> 
> 标签：mysql, data-structures, sql-update

我们面临的问题是：

我们有 4 名开发人员共同创建一个新程序。为了存储他们的数据，他们使用 Mysql 数据库。他们每个人都在使用自己的具有相同结构的数据库。问题是当一个开发人员完成表并引入他的修改时，他将其导出到 sql 文件中，因此其他开发人员可以在需要时将其导入到他的数据库中。但是当他尝试导入 sql 文件文件时，他得到了这个表已经存在或这个数据库已经存在等错误。有没有办法只导入修改？

或者开发人员在数据库中交换他们的修改的方式？

# c++ - 需要澄清匿名管道

> ID：14238734
> 
> 赞同：1
> 
> 时间：2013-01-09T15:31:57.033
> 
> 标签：c++, ipc, anonymous-pipes

我正在阅读 MSDN 上的匿名管道。他们说：“进程还可以使用 DuplicateHandle 函数复制管道句柄，并使用某种形式的进程间通信（例如 DDE 或共享内存）将其发送到不相关的进程。”

我不相信这个说法。正如我们已经知道的那样，管道对于父子之间的通信很有用，并且重复句柄与原始句柄引用相同的对象。 [http://msdn.microsoft.com/en-us/library/windows/desktop/aa365141%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365141%28v=vs.85%29.aspx)

# c# - sql 和 c# 代码的异常

> ID：14238744
> 
> 赞同：1
> 
> 时间：2013-01-09T15:32:44.677
> 
> 标签：c#, sql, sql-server

我是 C# 和 sql 的新手。我在 c# 中有一个函数，它在数据库表中搜索特定记录我的函数是

```
 public string returnstudentdata(string primarykey, string table, string regno, string column)
    {
        string temp = "";
        if (conn.State == ConnectionState.Closed)
        {
            conn.Open();
        }

        SqlCommand newCmd = conn.CreateCommand();
        newCmd.Connection = conn;
        newCmd.CommandType = CommandType.Text;
        newCmd.CommandText = "SELECT" + column + "FROM" + table + "WHERE" + primarykey + "=" + regno + "";
        SqlDataReader dr = newCmd.ExecuteReader();
        while (dr.Read())
        {
            temp = dr[column].ToString();
        }
        dr.Close();
        conn.Close();
        return temp;
    } 
```

这段代码可以正确执行，但是当涉及到 SqlDataReader dr = newCmd.ExecuteReader(); 它抛出一个异常，说明：

System.Data.dll 中出现“System.Data.SqlClient.SqlException”类型的未处理异常

附加信息：“=”附近的语法不正确。

调用语句是

```
 string regno = txtRegNo.Text;
 txtFName.Text = update.returnstudentdata("Regno","student",regno,"Fname"); 
```

我的代码有什么问题。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:34:55.650

至少您的 sql 语句中需要空格：

```
newCmd.CommandText = "SELECT " + column + " FROM " + table + " WHERE " + primarykey + "=" + regno + ""; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:35:22.880

在引号内的 SQL 关键字周围放置一些空格，您的字符串不会生成有效的 SQL 代码：

```
newCmd.CommandText = "SELECT " + column + " FROM " + table + " WHERE " + primarykey + "=" + regno + ""; 
```

此外，出于安全原因，我建议使用参数化查询而不是自组装字符串。您的代码容易受到例如 SQL 注入攻击。

有关更多解释，请参阅此 SO 线程：[参数化查询如何帮助防止 SQL 注入？](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:35:11.100

此行不会给出有效的 SQL。没有空间。-

```
newCmd.CommandText = "SELECT" + column + "FROM" + table + "WHERE" + primarykey + "=" + regno + ""; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T15:36:36.797

试试这个：

```
newCmd.CommandText = "SELECT " + column + " FROM " + table + " WHERE " + primarykey + " = '" + regno + "'"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T15:36:51.413

您`CommandText`的 或 Sql 查询可能会出现很多错误。

首先是 SQL 关键字之间没有空格，例如`SELECT`, 和你的变量（假设你的变量没有用空格填充）：

```
newCmd.CommandText = "SELECT" + column + "FROM" + table + "WHERE" + primarykey + "=" + regno + ""; 
```

您应该首先添加这样的空格：

```
newCmd.CommandText = "SELECT " + column + " FROM " + table + " WHERE " + primarykey + "=" + regno + ""; 
```

第二个是你没有`regno`用引号包裹你的价值。现在，这可能是因为该值是数字的；如果是这种情况，您可以忽略引号，并且您的查询应该可以正常执行（在添加上述空格之后）。但是，如果它是一个字符串，您需要将值用引号括起来，如下所示：

```
newCmd.CommandText = "SELECT " + column + " FROM " + table + " WHERE " + primarykey + "=\"" + regno + "\""; 
```

但是，无论该值是数字还是字符串，我实际上都建议您使用准备好的语句。您可以通过以下方式完成此操作：

```
newCmd.CommandText = "SELECT " + column + " FROM " + table + " WHERE " + primarykey + "=@regNo";
newCmd.Parameters.AddWithValue("@regNo", regno); 
```

准备好的语句将有助于减轻记住将值括在引号中的需要（它将为您处理），并且还将通过帮助防止 SQL 注入来增加查询的安全性。

# c++ - 奇怪地使用枚举作为常量

> ID：14238745
> 
> 赞同：3
> 
> 时间：2013-01-09T15:32:48.100
> 
> 标签：c++, enums

> **可能重复：**
> [是否有理由使用枚举在 C++ 代码中定义单个常量？](https://stackoverflow.com/questions/1377695/is-there-a-reason-to-use-enum-to-define-a-single-constant-in-c-code)

我刚刚在一些旧代码中遇到了以下代码段，奇怪地使用了枚举：-

```
class MyClass
{
public:
  enum {MAX_ITEMS=16};
  int things[MAX_ITEMS];
...
} ; 
```

这比 好，`#define MAX_ITEMS 16`但与 有什么不同`static const int MAX_ITEMS=16;`？

回到记忆的迷雾中，我记得一些 C++ 编译器不允许你在类中初始化 const，而是需要一个单独的......

`const int MyClass::MAX_ITEMS = 16;`

...在 .cpp 源文件中。这只是一个旧的解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:34:01.523

这是用于在类定义中初始化数组的古老***“[枚举黑客](http://www.linuxtopia.org/online_books/programming_books/thinking_in_c++/Chapter08_023.html)” 。***

传统上，在 C++03 之前，不可能`static` `const`在类声明中初始化 a。由于数组声明在声明中需要一个编译时常量索引。***enum hack***被用作一种解决方法。

```
class A 
{
    enum { arrsize = 2 };
    static const int c[arrsize] = { 1, 2 };

}; 
```

# multithreading - 用于图像处理的同步线程 Delphi

> ID：14238746
> 
> 赞同：3
> 
> 时间：2013-01-09T15:32:52.733
> 
> 标签：multithreading, delphi, synchronization, delphi-xe3, tthread

我必须以主要形式处理一张图像，但是对于我使用线程的 inc 速度来说，处理速度很低......

我的线程代码：

```
type
  TPaintThread = class(TThread)
    Source,Mask :TBitmap ;
    image : TImage;
    public
       procedure SetAll(src,msk:TBitmap;img:TImage);
    private
     procedure  DoWritePix;
    var
       mBit : TBitmap ;

    protected
      procedure Execute; override;
  end;

implementation

procedure TPaintThread.SetAll(src: TBitmap; msk: TBitmap; img: TImage);
begin
      Source := src ;
      mask := msk ;
      img := img ;
      mBit := TBitmap.Create ;
end;

procedure TPaintThread.DoWritePix;
begin
  image.Picture.Bitmap := mBit ;
end;

procedure TPaintThread.Execute;
var
    i: Integer;
    j: Integer;
begin
  mBit.Width := Source.Width ;
  mBit.Height := Source.Height ;
  for i := 1 to Source.Width do
    for j := 1 to Source.Width do
    begin
      // my processing event
    end;
    // result := mBit ;
    // write on form image 
    Synchronize(DoWritePix);
end; 
```

我正在使用它`timer`：

```
procedure TForm1.tmr1Timer(Sender: TObject);
var
    pThread  : TPaintThread ;
begin
  pThread := TPaintThread.Create(True) ;
  pThread.SetAll(MyBmp,mask,img1);
  pThread.Resume ;
  pThread.FreeOnTerminate := True ;
end; 
```

但我`DoWritePix`在运行时出错：

```
First chance exception at $005A81DE. Exception class $C0000005 with message 'access violation at 0x005a81de: read of address 0x000001b8'. Process myexe.exe (6032)
First chance exception at $754E9617\. Exception class EAccessViolation with message 'Access violation at address 005A81DE in module 'myexe.exe'. Read of address 000001B8'. Process myexe.exe (6032) 
```

我的问题：这种方式对于以主要形式编辑图像是否正确？如果不是什么是正确的方式访问和写入线程？如果是，我该如何解决问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T15:49:29.063

这段代码是错误的：

```
procedure TPaintThread.SetAll(src: TBitmap; msk: TBitmap; img: TImage);
begin
  Source := src ;
  mask := msk ;
  img := img ; // OOPS!
  mBit := TBitmap.Create ;
end; 
```

当你写作时，`img := img;`你什么都不做——那是无操作。你的意思是写：

```
image := img; 
```

这就是`image`解释访问冲突`nil`的原因。`DoWritePix`

遇到运行时错误时不要束手无策。在调试器下运行代码，让调试器告诉你哪个变量没有初始化。

# html - 从代码隐藏中获取背景颜色

> ID：14238753
> 
> 赞同：0
> 
> 时间：2013-01-09T15:33:29.527
> 
> 标签：html, css, stylesheet

这个问题可能看起来很有趣，但我在语法上苦苦挣扎:(

我的代码后面的文件中有背景颜色，需要在此处修复语法，因此我的表显示正确的背景颜色：

```
<Table style="background-color:" '<%=BGColor %>' """> 
```

我在语法上做错了什么

`BGColor`在调试期间在代码隐藏中显示正确的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:48:59.640

它应该看起来像这样：

```
<Table style="background-color:<%=BGColor %>;"> 
```

所以最后它看起来像：

```
<Table style="background-color:#cecece;"> 
```

或者

```
<Table style="background-color:Green"> 
```

请注意，十六进制格式 ( `cecece`) 应该`#`在开头。而命名颜色（如绿色、黄色、白色）则不需要。

# php - php(2474) malloc: *** mmap(size=1...0) 失败（错误代码=12）

> ID：14238756
> 
> 赞同：1
> 
> 时间：2013-01-09T15:33:33.133
> 
> 标签：php, malloc, mmap

我正在编写一个要在终端上运行的 php 脚本，该脚本开始运行，但在某些时候我每次都会收到以下错误。我有一台带有 Mountain Lion 的 iMac。我通过系统使用apache和php，通过brew安装mysql。

```
php(2474) malloc: *** mmap(size=18446744071562072064) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug 
```

这可能是什么原因造成的？怎么修？谢谢

# javascript - Javascript - 如何比较数组中的 2 个索引？

> ID：14238758
> 
> 赞同：0
> 
> 时间：2013-01-09T15:33:35.150
> 
> 标签：javascript, arrays

我正在尝试学习 JavaScript，我正在尝试创建一个基本的比较游戏，我将卡号放在一个数组中，我随机调用其中 2 个，并且我想比较 2 个随机调用中的哪一个有更高的价值？请帮我。我已经设法编写程序来随机处理 2 张牌，我只需要有关如何比较抽出的 2 张牌的指导。

谢谢你。

```
{
// This is my attempt to create a basic game for a simplified version of ta siau
//where players choose a card, and compares it with dealer's card. Bigger card wins the round

var cards = [2,3,4,5,6,7,8,9,10,"jack","queen","king","ace"]; //available cards in the deck
confirm("start game now?");

var playerCard = cards[Math.floor(Math.random() * cards.length)]; //choose a random card for player

console.log(playerCard);

var dealerCard = cards[Math.floor(Math.random() * cards.length)]; //choose a random card for dealer

console.log(dealerCard);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:40:20.700

尝试这个：

```
if (cards.indexOf(playerCard) > cards.indexOf(dealerCard)) {
   alert("Player wins!");
}
else {
   alert("Dealer wins");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:36:21.303

有什么问题？

```
var playerVal=Math.floor(Math.random() * cards.length);
var playerCard = cards[playerVal];

var dealerVal=Math.floor(Math.random() * cards.length);
var dealerCard = cards[dealerVal]; 

        if(playerVal>dealerVal){
        //player wins
    } 
```

卡是隔离的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:36:18.480

你应该努力提高你的接受率，但你检查值与其他值的主要方法是`if`

```
if(playerCard === dealerCard){
    console.log('cards are the same');
} else {
    console.log('cards are different');
} 
```

注意`===`. 在大多数编程语言中，您使用`==`. 在 JavaScript 中，你可以这样做，但奇怪的事情`[] == false`会评估为真。`===`需要严格遵守，所以`[] === false`确实是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T15:40:31.543

您应该操作卡片索引

```
var playerCardIndex = Math.floor(Math.random() * cards.length)
    var playerCard = cards[playerCardIndex];

    var dealerCardIndex = Math.floor(Math.random() * cards.length)
    var dealerCard = cards[dealerCardIndex]

    if (playerCardIndex > dealerCardIndex) {...} 
```

# android - android阻止EditText自动请求焦点

> ID：14238765
> 
> 赞同：7
> 
> 时间：2013-01-09T15:33:58.460
> 
> 标签：android, android-edittext

我有一个非常简单的布局，带有一个 EditText 和一个按钮。问题是键盘在活动开始后立即出现并且 EditText 获得焦点。我`</requestFocus>`从 XML 中删除了，我也没有在代码中这样做。如何防止 EditText 的这种行为，以便键盘仅在用户点击 editText 后出现？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T15:38:34.620

在你`manifiest.xml`写下面的代码`activity`

```
android:windowSoftInputMode="adjustNothing" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T15:40:47.390

在您的`manifest.xml`文件中，在活动标签下，放置以下内容：

```
android:windowSoftInputMode="stateHidden" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-11T10:27:41.703

试试这个

在你的`AndroidManifest.xml`文件中写下这些行

```
<activity
        android:configChanges="keyboardHidden|orientation"
        android:name=".YourActivityName"
        android:windowSoftInputMode="stateHidden" /> 
```

我刚刚添加了细节..

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-21T08:59:08.953

从我的 POV 来看，一个更优雅的解决方案是：

1.  在 XML 中，将这些行添加到主布局中：

    ```
    <LinearLayout
        android:id="@+id/mainLayout"
        android:focusable="true"
        android:focusableInTouchMode="true"
        ...
        .../> 
    ```

2.  在 Java 中的 onCreate() 中：

    ```
     LinearLayout mainLayout = (LinearLayout) findViewById(R.id.mainLayout);
      mainLayout.requestFocus(); 
    ```

# sql - MSSQL：使用参数内部值的子字符串值

> ID：14238774
> 
> 赞同：0
> 
> 时间：2013-01-09T15:34:10.300
> 
> 标签：sql, sql-server

我有两个变量。第一个变量`@WhereClause`包含值： `c1='v111' and c2='v222' and c3='v333' and c4='v444'`。

第二个变量`@ConditionFields`包含值：`c2,c4`。

现在，我怎样才能只得到 c2 和 c4 的值。像`@NewWhereClause`值将是：`c2='v222' and c4='v444'`。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:09:09.297

这似乎是一种奇怪的方法，但它确实有效——我相信这也可以优化，并且有几种不同的“拆分”字符串的方法，我只是觉得这是一个很酷的方法。

```
DECLARE @WhereClause varchar(MAX)
DECLARE @NewWhereClause varchar(MAX)
DECLARE @ConditionFields varchar(MAX)
DECLARE @Delimiter char(1)
DECLARE @X xml
DECLARE @TempCondition varchar(MAX)
DECLARE @TempWhereClause varchar(MAX)

SET @WhereClause = 'c1=''v111'' and c2=''v222'' and c3=''v333'' and c4=''v444'''
SET @ConditionFields = 'c2,c4'
SET @Delimiter = ','
SET @NewWhereClause = ''

SELECT @X = CONVERT(xml,'<root><s>' + REPLACE(@ConditionFields,@Delimiter,'</s><s>') + '</s></root>')

DECLARE ColCursor CURSOR FOR 
SELECT [Value] = T.c.value('.','varchar(20)')
FROM @X.nodes('/root/s') T(c)
WHERE T.c.value('.','varchar(20)') <> ''

OPEN ColCursor   
FETCH NEXT FROM ColCursor INTO @TempCondition   

WHILE @@FETCH_STATUS = 0   
BEGIN   
    SELECT @TempWhereClause = SUBSTRING(@WhereClause, CHARINDEX(@TempCondition, @WhereClause), CHARINDEX(' ', @WhereClause))
    IF @NewWhereClause = ''
    BEGIN
        SET @NewWhereClause = @TempWhereClause
    END
    ELSE
    BEGIN
        SET @NewWhereClause += ' and ' + @TempWhereClause
    END

    FETCH NEXT FROM ColCursor INTO @TempCondition   
END   

CLOSE ColCursor   
DEALLOCATE ColCursor

SELECT @NewWhereClause 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/d41d8/7617)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:52:32.613

首先，我同意帖子上留下的评论；这个实现非常难看。也就是说，我很无聊，所以你去吧。

```
/*
This will work assuming your variable formats are always consistent with no leading or trailing spaces:
@WhereClause format (SingleValue:"c1='v111'"; MultipleValues:"c1='v111' and c2='v222' and x#='...' and 'c156='anything'"
@ConditionFields format (SingleValue:"c2"; MultipleValues:"c2,c4,c7,...,c156"
*/

Create  Function dbo.ApplyConditionFields (@WhereClause Varchar(Max), @ConditionFields Varchar(Max))
Returns Varchar(Max)
With    Execute As Caller
As
Begin
        Declare @output Varchar(Max)

        If      @WhereClause Like '%=%'
        Begin
                ;With   parsedWhere As
                (
                        Select  Left(@WhereClause,CharIndex('=',@WhereClause)-1) As parsedVar,
                                Substring(@WhereClause,CharIndex('=',@WhereClause)+1,CharIndex(' ',@WhereClause+' ')-CharIndex('=',@WhereClause)-1) As parsedVal,
                                LTrim(Replace(Right(@WhereClause+' and ',Len(@WhereClause+' and ')-CharIndex(' and ',@WhereClause + ' and ')+2),' and ',' ')) As rest
                        Union   All
                        Select  Left(rest,CharIndex('=',rest)-1) As parsedVar,
                                Substring(rest,CharIndex('=',rest)+1,CharIndex(' ',rest)-CharIndex('=',rest)-1) As parsedVal,
                                Right(rest,Len(rest)-CharIndex(' ',rest)+1) As rest
                        From    parsedWhere
                        Where   rest <> ' '
                ),      parsedFields As
                (
                        Select  Left(@ConditionFields+',',CharIndex(',',@ConditionFields + ',')-1) As parsedVar,
                                Right(@ConditionFields+',',Len(@ConditionFields+',')-CharIndex(',',@ConditionFields+',')) As rest
                        Union   All
                        Select  Left(rest,CharIndex(',',rest + ',')-1) As parsedVar,
                                Right(rest,Len(rest)-CharIndex(',',rest+',')) As rest
                        From    parsedFields
                        Where   rest <> ''
                )   
                Select  @output = Coalesce(@output+' and ','')+pw.parsedVar+'='+pw.parsedVal
                From    parsedWhere pw
                Join    parsedFields pf
                        On  pw.parsedVar = pf.parsedVar
        End

        Return(@output)
End 
```

# c# - 在指定位置打开“ColorDialog”对话框

> ID：14238777
> 
> 赞同：5
> 
> 时间：2013-01-09T15:34:14.800
> 
> 标签：c#, .net, winforms, dialog, positioning

> **可能重复：**
> [设置 OpenFileDialog/SaveFileDialog 的开始位置](https://stackoverflow.com/questions/1256130/setting-the-start-position-for-openfiledialog-savefiledialog)

我必须在用户单击的按钮上方显示一个 ColorDialog。

目前我找不到如何指定这个位置：

1.  没有`StartPosition`/`Location`属性（[使用ShowDialog显示时如何控制对话框的位置？](https://stackoverflow.com/questions/998675/how-can-i-control-the-location-of-a-dialog-when-using-showdialog-to-display-it)）
2.  构造函数只取一个windows一个参数并将其放在中间

我需要将它直接放在我的光标上方，指定一个 X;Y。

关于如何实现这一目标的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T16:17:03.367

我终于找到了一种方法，不是最漂亮的东西，但它有效：

```
public class ColorDialogExtension : ColorDialog
{
    #region private const
    //Windows Message Constants
    private const Int32 WM_INITDIALOG = 0x0110;

    //uFlag Constants
    private const uint SWP_NOSIZE = 0x0001;
    private const uint SWP_SHOWWINDOW = 0x0040;
    private const uint SWP_NOZORDER = 0x0004;
    private const uint UFLAGS = SWP_NOSIZE | SWP_NOZORDER | SWP_SHOWWINDOW;
    #endregion

    #region private readonly
    //Windows Handle Constants
    private static readonly IntPtr HWND_TOPMOST = new IntPtr(-1);
    private static readonly IntPtr HWND_NOTOPMOST = new IntPtr(-2);
    private static readonly IntPtr HWND_TOP = new IntPtr(0);
    private static readonly IntPtr HWND_BOTTOM = new IntPtr(1);
    #endregion

    #region private vars
    //Module vars
    private int _x;
    private int _y;
    private string _title = null;
    #endregion

    #region private static methods imports
    //WinAPI definitions

    /// <summary>
    /// Sets the window text.
    /// </summary>
    /// <param name="hWnd">The h WND.</param>
    /// <param name="text">The text.</param>
    /// <returns></returns>
    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern bool SetWindowText(IntPtr hWnd, string text);

    /// <summary>
    /// Sets the window pos.
    /// </summary>
    /// <param name="hWnd">The h WND.</param>
    /// <param name="hWndInsertAfter">The h WND insert after.</param>
    /// <param name="x">The x.</param>
    /// <param name="y">The y.</param>
    /// <param name="cx">The cx.</param>
    /// <param name="cy">The cy.</param>
    /// <param name="uFlags">The u flags.</param>
    /// <returns></returns>
    [DllImport("user32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int x, int y, int cx, int cy, uint uFlags);
    #endregion

    #region public constructor
    /// <summary>
    /// Initializes a new instance of the <see cref="ColorDialogExtension"/> class.
    /// </summary>
    /// <param name="x">The X position</param>
    /// <param name="y">The Y position</param>
    /// <param name="title">The title of the windows. If set to null(by default), the title will not be changed</param>
    public ColorDialogExtension(int x, int y, String title = null)
    {
        _x = x;
        _y = y;
        _title = title;
    }
    #endregion

    #region protected override methods
    /// <summary>
    /// Defines the common dialog box hook procedure that is overridden to add specific functionality to a common dialog box.
    /// </summary>
    /// <param name="hWnd">The handle to the dialog box window.</param>
    /// <param name="msg">The message being received.</param>
    /// <param name="wparam">Additional information about the message.</param>
    /// <param name="lparam">Additional information about the message.</param>
    /// <returns>
    /// A zero value if the default dialog box procedure processes the message; a nonzero value if the default dialog box procedure ignores the message.
    /// </returns>
    protected override IntPtr HookProc(IntPtr hWnd, int msg, IntPtr wparam, IntPtr lparam)
    {
        //We do the base initialization
        IntPtr hookProc = base.HookProc(hWnd, msg, wparam, lparam);
        //When we init the dialog
        if (msg == WM_INITDIALOG)
        {
            //We change the title
            if (!String.IsNullOrEmpty(_title))
            {
                SetWindowText(hWnd, _title);
            }
            //We move the position
            SetWindowPos(hWnd, HWND_TOP, _x, _y, 0, 0, UFLAGS); 

        }
        return hookProc;
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T15:43:16.873

你不能！事实上，这既不是 ColorDialog 的问题，也不是另一个 Common Dialog 的问题。如果要显示模态对话框，您将直接使用或不使用“DialogBox.Show”方法，在这种情况下，由操作系统决定位置。唯一的解决方案是使用无模式对话框，并使用 DialogBox.Show 方法，但您还需要重新创建整个对话框！

# javascript - 从 Google Apps 脚本中的变量添加数字变得奇怪

> ID：14238779
> 
> 赞同：0
> 
> 时间：2013-01-09T15:34:18.093
> 
> 标签：javascript, google-apps-script, rounding-error

添加我从 CSV 中提取的数字时，这是我得到的日志文件：

```
var costs = Number(csvData[i][9].replace(",","."));  // need to replace , with . and    
total_costs_overeenkomst=total_costs_overeenkomst+costs;   // add variables
Logger.log("Kosten: "+costs);
Logger.log("Subtotaal:"+total_costs_overeenkomst); 
```

这是日志，直到第 3 天，我得到一个奇怪的舍入错误：

```
Kosten:4.8
Subtotaal:4.8
Kosten:49.92
Subtotaal:54.72
Kosten:4.8
Subtotaal:59.519999999999996
Kosten:2.4
Subtotaal:61.919999999999995
Kosten:2.57
Subtotaal:64.49
Kosten:22.18
Subtotaal:86.66999999999999
Kosten:34.56
Subtotaal:121.22999999999999
Kosten:4.8
Subtotaal:126.02999999999999 
```

为什么会这样？

亲切的问候，瑞尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:49:43.113

浮点运算在 javascript 和 apps-script 中容易出现舍入错误。请参阅[浮点数学是否损坏？](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken). 您还可以在[此处](http://www.merlyn.demon.co.uk/js-round.htm)找到非常完整的概述，包括解决方案，特别是有关[欧元或美分](http://www.merlyn.demon.co.uk/js-round.htm#EoC)的部分。

为了演示，我修改了您的代码以移动小数点：

```
function calcCosts() {
  var csvData = ["4,8","49,92","4,8","2,4","2,57","22,18","34,56","4,8"];
  var total_costs_overeenkomst = 0;

  for (i in csvData) {
    var costs = Number(csvData[i].replace(",","."));  // need to replace , with . and    
    total_costs_overeenkomst=(100*total_costs_overeenkomst+100*costs)/100;   // add variables
    Logger.log("Kosten: "+costs);
    Logger.log("Subtotaal:"+total_costs_overeenkomst);
  }
} 
```

这是其中的日志-我认为它们看起来像您期望的那样。

```
Kosten: 4.8
Subtotaal:4.8
Kosten: 49.92
Subtotaal:54.72
Kosten: 4.8
Subtotaal:59.52
Kosten: 2.4
Subtotaal:61.92
Kosten: 2.57
Subtotaal:64.49
Kosten: 22.18
Subtotaal:86.67
Kosten: 34.56
Subtotaal:121.23
Kosten: 4.8
Subtotaal:126.03 
```

有些人主张使用整数执行所有货币计算，以消除舍入误差。Javascript 和 apps-script 没有`integer`作为类型，只是`number`. 您仍然可以以“美分”进行计算，并将“美元”/“欧元”的表达式保留为显示函数。

# javascript - 如何在 HighChart 的 yAxis 上仅显示整数值？

> ID：14238780
> 
> 赞同：42
> 
> 时间：2013-01-09T15:34:19.617
> 
> 标签：javascript, highcharts

我们有一组包含事件实例计数的数据。这些只能是整数。当我们显示具有足够高 yValue 的数据时，yAxis 标签是整数。但是，当我们放大到 y = 5 以下的数据范围时，我们会看到刻度标记显示 0.5、0.75、1.5 等。我们如何强制 yAxis 标签只显示整数值？

[这](http://jsfiddle.net/wergeld/uDg9k/)是带有一些数据的示例代码。当您放大到图表的较低值区域时，您可以明白我的意思。这是当前的 yAxis 设置：

```
yAxis: {
  labels: {
    style: {
      fontSize: '9px',
      width: '175px'
    }
  },
  title: {
    text: ''
  }
}, 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-01-09T15:53:38.413

Set the `allowDecimals` option in the y axis to false in order to prevent non integer tick marks from being displayed:

```
yAxis: {
    allowDecimals: false,
    labels: {
        style: {
            fontSize: '9px',
            width: '175px'
        }
    },
    title: {
        text: ''
    }
} 
```

Here is a demonstration: [http://jsfiddle.net/sBC9K/](http://jsfiddle.net/sBC9K/)

# ios - 拍照后如何显示 UIView？

> ID：14238783
> 
> 赞同：0
> 
> 时间：2013-01-09T15:34:26.267
> 
> 标签：ios, uiview, addsubview

拍照后我需要显示 UIView（UIView 显示加载消息）。

每次我需要显示加载消息时，我都会使用以下代码：

```
NSArray* loading = [[NSBundle mainBundle] loadNibNamed:@"LoadingViewController"
                                                     owner:self
                                                   options:nil];

self.loadingView = [ loading objectAtIndex: 0];

[self.view addSubview:self.loadingView];
[self.view bringSubviewToFront:self.loadingView];
self.loadingView is the loading UIView. 
```

按下“完成”按钮（拍照后）后，我需要显示 UIView loadingView，我尝试这样做：

```
- (void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSArray* loading = [[NSBundle mainBundle] loadNibNamed:@"LoadingViewController"
                                                     owner:self
                                                   options:nil];

    self.loadingView = [ loading objectAtIndex: 0];

    [picker.navigationBar addSubview:self.loadingView];
    [picker.navigationBar bringSubviewToFront:self.loadingView];
    /*image processing*/
} 
```

但不工作。我也尝试改变：

```
[picker.navigationBar addSubview:self.loadingView];
[picker.navigationBar bringSubviewToFront:self.loadingView]; 
```

和

```
[picker.view addSubview:self.loadingView];
[picker.view bringSubviewToFront:self.loadingView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:44:42.030

首先，我建议您使用库来加载 UIView，例如[SVProgressHUD](https://github.com/samvermette/SVProgressHUD)

此外，您需要使用 Threads 来做您想做的事情，看看[这个链接](http://www.raywenderlich.com/1888/how-to-create-a-simple-iphone-app-tutorial-part-33)

# php - 使用 MYSQL LAST_INSERT_ID() 检索插入行的 ID？

> ID：14238784
> 
> 赞同：5
> 
> 时间：2013-01-09T15:34:27.210
> 
> 标签：php, mysql, select, lastinsertid

我有一个表，其中有一列`AUTO INCREMENT`。插入新行时，我必须检索该列的值（我需要新行的值）。我已经阅读了很多关于它并找到了不同的解决方案，一种是使用`SELECT LAST_INSERT_ID()`. 我听说过很多不同的事情。我可以或不可以使用这个吗？我担心另一个连接可能会在我能够调用之前插入一个新行`SELECT LAST_INSERT_ID()`，从而得到错误的 ID。

总结一下，使用安全`SELECT LAST_INSERT_ID()`吗？如果没有，我怎样才能以安全的方式检索最后插入的 id？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T15:39:41.420

我认为您不必担心您在这里提到的情况。

**来自 Mysql 文档：**
生成的 ID 在服务器中基于每个连接进行维护。这意味着函数返回给给定客户端的值是为影响该客户端列的`AUTO_INCREMENT`最近语句生成的第一个值。`AUTO_INCREMENT`此值不会受到其他客户端的影响，即使它们生成`AUTO_INCREMENT`自己的值。这种行为确保每个客户端都可以检索自己的 ID，而不用担心其他客户端的活动，也不需要锁或事务。

有关详细信息，请参阅[**`this`**](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

虽然，如果他们有不同的意见，我很乐意从其他人那里阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:39:36.483

如果拥有表的最后一个 id 对您来说很重要，您可以锁定表以进行写入，然后生成`SELECT MAX(id) FROM table_name`然后解锁表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:40:31.277

生成的 ID 是基于每个连接的，所以你不应该有任何问题！[这篇](https://softwareengineering.stackexchange.com/questions/162773/is-it-safe-to-use-last-insert-id-in-a-system-like-point-of-sale)文章更详细。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T15:40:43.150

是的，根据官方文档，它是安全的：

> 生成的 ID 在每个连接的基础上维护在服务器中。这意味着函数返回给给定客户端的值是为影响该客户端的 AUTO_INCREMENT 列的最新语句生成的第一个 AUTO_INCREMENT 值。此值不受其他客户端的影响，即使它们生成自己的 AUTO_INCREMENT 值。这种行为确保每个客户端都可以检索自己的 ID，而不用担心其他客户端的活动，也不需要锁或事务。

取自：[MYSQL 文档 12.13。信息功能](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T16:06:49.103

如果您使用的是 PDO，请使用`PDO::lastInsertId.`

如果您使用的是 mysql，请使用`mysqli::$insert_id.`

是的，使用它是安全的`AI`这是这样说的帖子：http: [//dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)

而不是直接使用 select 语句，而是尝试使用`preparedStatement.`

你也可以使用[锁](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/lock-tables.html)

# php - 参数 Google Drive API

> ID：14238785
> 
> 赞同：1
> 
> 时间：2013-01-09T15:34:28.303
> 
> 标签：php, google-drive-api

嘿伙计们，我在使用 Google Drive API 返回某些文件时遇到问题。

```
 function retrieve_all_files($service,$parameters) {

    $result = array();
    $pageToken = NULL;

    do {
        try {
            $parameters = array();

            if ($pageToken) {
                $parameters['pageToken'] = $pageToken;
            }
            $files = $service->files->listFiles($parameters);

            $result = array_merge($result, $files->getItems());
            $pageToken = $files->getNextPageToken();

        } catch (Exception $e) {

            print "An error occurred: " . $e->getMessage();
            $pageToken = NULL;

        }
    } while ($pageToken);

    return $result;

}

$format = DateTime::RFC3339;
$date = new DateTime('now');
$date->modify('-3 days');
$date_str = $date->format($format);

$parameters = array('q' => "trashed = false and modifiedDate < '$date_str'");

echo count(retrieve_all_files($service, $parameters)); 
```

出于某种原因，参数选项返回所有文件，而不是根据特定条件返回的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:45:58.620

您的代码总是用一个空数组替换传递给retrieve_all_files 的参数值：

```
...
$parameters = array();
... 
```

这就是您的参数被忽略的原因。

# ios - 从具有不同隐藏子视图的父视图中实现像 facebook 这样的侧滑菜单

> ID：14238786
> 
> 赞同：0
> 
> 时间：2013-01-09T15:34:32.110
> 
> 标签：ios, objective-c, swipe-gesture

我需要在其中一个子视图中创建一个右侧滑动菜单，例如 facebook 应用程序中的一个。我提到了像 Inferis/ViewDeck 这样的示例代码。

但我的问题是我想在 Y 视图控制器上实现侧滑。在应用程序委托中，最初设置了 X 视图控制器。当时在 X viewcontroller 中，我将 Z viewcontroller 设置为隐藏在后台。然后，当我单击 X 视图的一个按钮时，会显示 Z 视图控制器。我想从 Z 视图控制器执行滑动以打开/关闭 Y 视图控制器。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:02:07.663

这里的诀窍是 z-index。

您有一个用户正在查看的视图（视图 A）。这背后可能是另一个等待揭示的观点（观点B）。单击视图 A 上的按钮，或者可能在视图 A 上滑动，会导致它向右移动 - 显示视图 B 在下面等待。使用视图 B 完成工作，然后将视图 A 滑回原位。

同样的想法可以用来审查多个级别的视图。视图 B 可以滑动以显示视图 C，依此类推。

# maven - Jenkins 是否设置了 Maven 属性？

> ID：14238787
> 
> 赞同：1
> 
> 时间：2013-01-09T15:34:33.763
> 
> 标签：maven, jenkins

问题其实很简单。

我倾向于记得在这里看到过对 maven/jenkins 问题的回答，解释说可以通过使用 Jenkins 在启动 maven 构建时给出的属性激活这些配置文件来激活 Jenkins 中 maven 构建的某些部分。

但是詹金斯财产的名字是什么？那个财产价值是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T17:17:15.513

您可以使用将由 Jenkins 中的环境变量自动激活的配置文件。

您可以使用以下方法之一，例如 JENKINS_HOME 或 JENKINS_URL 来激活配置文件：

```
BUILD_NUMBER
    The current build number, such as "153"
BUILD_ID
    The current build id, such as "2005-08-22_23-59-59" (YYYY-MM-DD_hh-mm-ss)
JOB_NAME
    Name of the project of this build, such as "foo" or "foo/bar"
BUILD_TAG
    String of "jenkins-${JOB_NAME}-${BUILD_NUMBER}". Convenient to put into a resource file, a jar file, etc for easier identification.
EXECUTOR_NUMBER
    The unique number that identifies the current executor (among executors of the same machine) that's carrying out this build. This is the number you see in the "build executor status", except that the number starts from 0, not 1.
NODE_NAME
    Name of the slave if the build is on a slave, or "master" if run on master
NODE_LABELS
    Whitespace-separated list of labels that the node is assigned.
WORKSPACE
    The absolute path of the directory assigned to the build as a workspace.
JENKINS_HOME
    The absolute path of the directory assigned on the master node for Jenkins to store data.
JENKINS_URL
    Full URL of Jenkins, like http://server:port/jenkins/
BUILD_URL
    Full URL of this build, like http://server:port/jenkins/job/foo/15/
JOB_URL
    Full URL of this job, like http://server:port/jenkins/job/foo/
SVN_REVISION
    Subversion revision number that's currently checked out to the workspace, such as "12345"
SVN_URL
    Subversion URL that's currently checked out to the workspace. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:23:39.813

我这样做有点不同。例如，如果我想通过 Jenkins 启动集成测试，我有一个配置文件可以启动和停止集成测试服务器：

```
 <profile>
        <id>integration-test-wrapper</id>
        <activation>
            <property>
                <name>ci</name>
            </property>
        </activation>
        ... 
```

在**Jenkins Build Config** (Goals and Options) 我只是添加了参数`-Dci`

这将激活该配置文件。

# ruby-on-rails - 在 Ruby on Rails 中，创建动态输入（订单）页面的最简单方法是什么？

> ID：14238788
> 
> 赞同：0
> 
> 时间：2013-01-09T15:34:37.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, web-applications, dynamicform

我是 Web 开发的新手（我在服务器端有几年的经验）。我需要创建一个输入订单信息的页面。例如：项目名称、数量、价格然后可以单击“添加”按钮，将出现另一行输入，用户可以填写。最后，用户点击“提交”并处理订单。

现在我知道如何制作一个可以做到这一点的winforms应用程序，但我是rails新手，一般来说是web开发，有人可以指点我正确的技术/包吗？

也许有人有相关教程的链接？（我已经完成了大部分的 Rails 教程，但在那里没有看到类似的东西）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:56:07.973

您需要有单个订单项目的`Order`型号和`OrderItem`型号（名称、数量、价格）。`Order`模型与 具有多对一的关系`OrderItem`。`Order`接受订单项目的嵌套属性。与属性`Order`字段一起创建表单。`OrderItem`对于`Add button`功能使用[Cocoon](https://github.com/nathanvda/cocoon)。您现在需要做的就是将其保存在`create`行动中。

[Cocoon](https://github.com/nathanvda/cocoon)的主页包含几个可以适应您的问题的示例 -与关系`project/tasks`相同`order/order_items`。另请查看讨论类似主题的[#196 Nested Model Form Part 1](http://railscasts.com/episodes/196-nested-model-form-part-1)。

如果不能解决您的问题，这应该可以为您提供 Google 的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:02:18.453

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)
[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

这 2 个屏幕截图可能与您要完成的内容几乎相同，只是上下文不同。它们很旧，但基础知识仍然适用。这些天我可能会以不同的方式处理 javascript 部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T16:06:19.833

您需要**[动态嵌套模型表单](http://railscasts.com/episodes/196-nested-model-form-part-1)**。

这是一个**[让它开箱即用的宝石](https://github.com/ryanb/nested_form)**

注意：您将需要使用 jquery 或原型 javascript 框架。

最常见的陷阱之一：

确保父模型具有**attr_accessible :children_attributes**。

示例：**School has_many :students** ，您的**School**模型中需要**attr_accessible :students_attributes**

 **您可以在 RailsAPI 页面上阅读此内容以及更多信息，以获取接受嵌套的属性**[_for](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-09T15:53:02.750

If you are new to rails and want to get quickly into it, then check this guide:

[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

The point 5 (Generate a Scaffold) fits your needs.

After creating a new rails application you could run:

```
rails generate scaffold Order name:string quantity:string price:integer 
```

This generates you Controller, Model and Views related to the ordering process.

Run

```
rake db:setup
rake db:migrate 
```

to prepare the database

Now everything should be fine and you got a page where the user can enter the order information and save it (witch should fit your start needs). Start the Server with

```
rails s 
```

and check it out.**

# ios - 即使存在外部键盘，也会触发 UIKeyboardDidShowNotification 事件

> ID：14238789
> 
> 赞同：3
> 
> 时间：2013-01-09T15:34:38.523
> 
> 标签：ios, uikeyboard

我需要知道是否连接了外接键盘。我熟悉使用 NSNotificationCenter 并获取 UIKeyboardDidShowNotification 事件来确定是否显示了虚拟键盘。我遇到的问题是，当连接了外部键盘并单击文本字段时，底部会显示一个带有“上一个”和“下一个”按钮的小视图。UIKeyboardDidShowNotification 事件会在发生这种情况时触发，即使连接了外部键盘也是如此。因此，即使连接了外部键盘，它看起来也好像正在显示虚拟键盘。

无论如何，是否可以禁用带有“上一个”和“下一个”按钮的小视图，并希望 UIKeyboardDidShowNotification 事件不会被触发。

否则，似乎无法以可靠的方式使用 NSNotificationCenter 来确定键盘是否已连接。我当然不想使用私有 API 来检测是否连接了键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:32:52.393

这是我能找到的最佳解决方案....如果留下空白，他们在答案下方的评论中也有相关说明：[如何从虚拟键盘 IOS 中删除 prev next 按钮](https://stackoverflow.com/questions/8470984/how-to-remove-prev-next-button-from-virtual-keyboard-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T00:03:29.127

您不应该试图绕过正常的设备行为来进行硬件检测。忘记尝试使事件不触发。相反，请查看使用外部键盘与屏幕键盘触发时的不同之处。

通过调试，我注意到无论是否连接了外部键盘，视图的大小都不会有任何不同。相反，视图的原点发生了变化，因此只有键盘的顶部工具栏被绘制在屏幕范围内。

```
- (void)keyboardDidShow:(NSNotification *)notification {

    NSDictionary *userInfo = [notification userInfo];
    CGRect kbRect = [[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];

    if(kbRect.origin.x != 0 || kbRect.origin.y != 0) {
        //external keyboard
    }
    else {
        //onscreen keyboard
    }
} 
```

以上应该可以工作，但您始终可以调试您的应用程序并更改“if”语句以更好地满足您的需求。例如，因为我只允许横向布局，所以我只需要检查`kbRect.origin.x`，而不是检查它是否非零，而是使用从调试中获得的数字。

我想这已经晚了一年，但我在研究时遇到了这个问题，并认为它仍然值得一个很好的答案。

# c++ - Winsock UDP 服务器

> ID：14238791
> 
> 赞同：0
> 
> 时间：2013-01-09T15:34:41.737
> 
> 标签：c++, winsock

嗨，我目前正在做一个项目，我们正在创建一个 UDP 服务器来与 KUKA 机器人通信。我们能够建立与机器人的连接并来回交换数据，但是当发生事件时，例如由于电机扭矩过大而导致机器人故障或我们无法跳出服务器循环，因为 recvfrom 函数是仍然坐在那里等待答复。你们对我们如何解决这个问题有什么建议吗？

```
#include "stdafx.h"
#include "HapticRobot.h"

#include "CMaths.h"
using namespace chai3d;

#include <winsock.h>
using namespace std;
#pragma comment(lib, "Ws2.lib")
#include <fstream>
#include <string>
#include <sstream>

#define REFRESH_INTERVAL  0   // sec

const int kBufferSize = 1024;

extern HapticDevice hd;
extern HWND g_hWndHapticBox;
extern bool bRobotInMotion, bRobotConnectInit, bRobotConnected;
extern Handles hc;
bool err;
std::string stSend, stSendXML, stLine;
std::string stRobotStatus , stAppend;
TCHAR *chRobotStatus;

//// Prototypes ////////////////////////////////////////////////////////

SOCKET SetUpListener(const char* pcAddress, int nPort);
void AcceptConnections(SOCKET ListeningSocket);
bool EchoIncomingPackets(SOCKET sd);
DWORD WINAPI EchoHandler(void* sd_);

//// DoWinsock /////////////////////////////////////////////////////////
// The module's driver function -- we just call other functions and
// interpret their results.

int DoWinsock(const char* pcAddress, int nPort)
{
    int nRetval = 0;

    ifstream inFile("HardDisk/ExternalData.xml");
    if (inFile.is_open())
    {
        while ( inFile.good() )
        {
            getline ( inFile, stLine);
            stSendXML.append(stLine);
        }
        inFile.close();
    }
    else
    {
        SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)L"Unable to open XML file");
    }

    SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)L"Establishing the listener...");
    SOCKET ListeningSocket = SetUpListener(pcAddress, htons(nPort));
    if (ListeningSocket == INVALID_SOCKET)
    {

        stRobotStatus = WSAGetLastErrorMessage("establish listener");
        chRobotStatus = GetStatus(stRobotStatus);
        SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)chRobotStatus);
        return 3;
    }

    SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)L"Waiting for connections...");
    bRobotConnectInit = true;
    SetDlgItemText(g_hWndHapticBox, IDC_STATIC_RobotStatus, _T("Waiting for robot"));
    while (1)
    {
        if (!EchoIncomingPackets(ListeningSocket))
        {
        SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)WSAGetLastErrorMessage("Echo incoming packets failed"));
        nRetval = 3;
        }
        SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)L"Shutting connection down...");
        if (ShutdownConnection(ListeningSocket))
        {
            SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)L"Connection is down.");
        }
        else
        {
            SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)WSAGetLastErrorMessage("Connection shutdown failed"));
            nRetval = 3;
        }
        bRobotConnected = false;
        bRobotConnectInit = true;

        SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)L"Acceptor restarting...");

    }

#if defined(_MSC_VER)
    return 0;   // warning eater
#endif
}

//// SetUpListener /////////////////////////////////////////////////////
// Sets up a listener on the given interface and port, returning the
// listening socket if successful; if not, returns INVALID_SOCKET.

SOCKET SetUpListener(const char* pcAddress, int nPort)
{
    u_long nInterfaceAddr = inet_addr(pcAddress);
    if (nInterfaceAddr != INADDR_NONE)
    {
        SOCKET sd = socket(AF_INET, SOCK_DGRAM, 0);
        if (sd != INVALID_SOCKET)
        {
            sockaddr_in sinInterface;
            sinInterface.sin_family = AF_INET;
            sinInterface.sin_addr.s_addr = nInterfaceAddr;
            sinInterface.sin_port = nPort;
            if (bind(sd, (sockaddr*)&sinInterface, 
                    sizeof(sockaddr_in)) != SOCKET_ERROR)
            {
            //listen(sd, SOMAXCONN);

            //DWORD nThreadID;
            //CreateThread(0, 0, EchoHandler, (void*)sd, 0, &nThreadID);

                return sd;
            }
            else
            {
                stRobotStatus = WSAGetLastErrorMessage("bind() failed");
                chRobotStatus = GetStatus(stRobotStatus);
                SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)chRobotStatus);
                //cerr << WSAGetLastErrorMessage("bind() failed") <<
                //        endl;
            }
        }
    }

    return INVALID_SOCKET;
}

//// EchoHandler ///////////////////////////////////////////////////////
// Handles the incoming data by reflecting it back to the sender.

DWORD WINAPI EchoHandler(void* sd_) 
{
    DWORD Priority = CeGetThreadPriority(GetCurrentThread());
    CeSetThreadPriority(GetCurrentThread(),Priority - 2);
    //Below is scan time in ms
    CeSetThreadQuantum(GetCurrentThread(),10);

    int nRetval = 0;
    SOCKET sd = (SOCKET)sd_;

    if (!EchoIncomingPackets(sd))
    {
        SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)WSAGetLastErrorMessage("Echo incoming packets failed"));
        nRetval = 3;
    }
    SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)L"Shutting connection down...");
    if (ShutdownConnection(sd))
    {
        SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)L"Connection is down.");
    }
    else
    {
        SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)WSAGetLastErrorMessage("Connection shutdown failed"));
        nRetval = 3;
    }
    bRobotConnected = false;
    bRobotConnectInit = true;
    return nRetval;
}

//// AcceptConnections /////////////////////////////////////////////////
// Spins forever waiting for connections.  For each one that comes in, 
// we create a thread to handle it and go back to waiting for
// connections.  If an error occurs, we return.

void AcceptConnections(SOCKET ListeningSocket)
{
    sockaddr_in sinRemote;
    int nAddrSize = sizeof(sinRemote);

    while (1)
    {
        SOCKET sd = accept(ListeningSocket, (sockaddr*)&sinRemote,
                &nAddrSize);
        if (sd != INVALID_SOCKET)
        {
            stRobotStatus = inet_ntoa(sinRemote.sin_addr);
            stAppend = "Accepted connection from ";
            stAppend.append(stRobotStatus);
            chRobotStatus = GetStatus(stAppend);
            SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)chRobotStatus);

            //chRobotStatus = GetStatus(stRobotStatus);
            //SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)chRobotStatus);

            //stRobotStatus = ntohs(sinRemote.sin_port);
            //chRobotStatus = GetStatus(stRobotStatus);
            //SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)chRobotStatus);

            bRobotConnectInit = false;
            bRobotConnected = true;
            SetDlgItemText(g_hWndHapticBox, IDC_STATIC_RobotStatus, _T("Connected to Robot"));

            //SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_ADDSTRING, 0, (LPARAM)inet_ntoa(sinRemote.sin_addr));
            //SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_ADDSTRING, 0, (LPARAM)ntohs(sinRemote.sin_port));

            DWORD nThreadID;
            CreateThread(0, 0, EchoHandler, (void*)sd, 0, &nThreadID);
        }
        else
        {
            SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)WSAGetLastErrorMessage("accept() failed"));
            return;
        }
    }
}

//// EchoIncomingPackets ///////////////////////////////////////////////
// Bounces any incoming packets back to the client.  We return false
// on errors, or true if the client closed the socket normally.

bool EchoIncomingPackets(SOCKET sd)
{
    // Read data from client

    std::string stReceive;
    std::string stIPOC;
    std::wstring stTime;
    int nStartPos, nEndPos;
    char acReadBuffer[kBufferSize], acWriteBuffer[512];
    int nReadBytes;

    struct sockaddr_in clientAddr;
    int sockAddrSize = sizeof(struct sockaddr_in);

    //declarations for the low pass filter
    int CURRENT_VALUE = 2;
    double T = .004, w_co, OMEGA_co, f_co;

    do
    {

        nReadBytes = recvfrom(sd, acReadBuffer, sizeof(acReadBuffer), 0, (struct sockaddr*)&clientAddr, &sockAddrSize);

        if (nReadBytes > 0)
        {
            if (bRobotConnectInit)
            {
                bRobotConnectInit = false;
                bRobotConnected = true;
                SetDlgItemText(g_hWndHapticBox, IDC_STATIC_RobotStatus, _T("Connected to Robot"));
            }

            bRobotConnectInit = false;
            bRobotConnected = true;
        }

        stSend = stSendXML;
        stReceive = acReadBuffer;

        nStartPos = stReceive.find ("<IPOC>") + 6;
        nEndPos = stReceive.find ("</IPOC>");
        stIPOC = stReceive.substr (nStartPos, nEndPos - nStartPos);

        nStartPos = stSend.find ("<IPOC>") + 6;
        nEndPos = stSend.find ("</IPOC>");
        stSend.replace(nStartPos, nEndPos - nStartPos, stIPOC);

        //Raw sensor data
        nStartPos = stReceive.find ("RFx=") + 5;
        nEndPos = stReceive.find ("RFy=") - 2;
        hd.stRFx = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szRFx = hd.stRFx.c_str();
        hd.RFx = strtod(hd.szRFx, NULL);
        hd.RFx = hd.RFx * 0.22;

        nStartPos = stReceive.find ("RFy=") + 5;
        nEndPos = stReceive.find ("RFz=") - 2;
        hd.stRFy = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szRFy = hd.stRFy.c_str();
        hd.RFy = strtod(hd.szRFy, NULL);
        hd.RFy = hd.RFy * 0.22;

        nStartPos = stReceive.find ("RFz=") + 5;
        nEndPos = stReceive.find ("Fx") - 2;
        hd.stRFz = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szRFz = hd.stRFz.c_str();
        hd.RFz = strtod(hd.szRFz, NULL);
        hd.RFz = hd.RFz * 0.22;

        //Sensor data to be filtered
        nStartPos = stReceive.find ("Fx=") + 4;
        nEndPos = stReceive.find ("Fy=") - 2;
        hd.stFx = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szFx = hd.stFx.c_str();
        hd.Fx = strtod(hd.szFx, NULL);
        hd.Fx = hd.Fx * 0.22;

        nStartPos = stReceive.find ("Fy=") + 4;
        nEndPos = stReceive.find ("Fz=") - 2;
        hd.stFy = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szFy = hd.stFy.c_str();
        hd.Fy = strtod(hd.szFy, NULL);
        hd.Fy = hd.Fy * 0.22;

        nStartPos = stReceive.find ("Fz=") + 4;
        nEndPos = stReceive.find ("<IPOC>") - 3;
        hd.stFz = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szFz = hd.stFz.c_str();
        hd.Fz = strtod(hd.szFz, NULL);
        hd.Fz = hd.Fz * 0.22;

        //*Added by JMM for reading start cartesian position
        nStartPos = stReceive.find ("X=") + 3;
        nEndPos = stReceive.find ("Y=") - 2;
        hd.stRobotXPosition = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szRobotXPosition = hd.stRobotXPosition.c_str();
        hd.RobotXPosition = strtod(hd.szRobotXPosition, NULL);

        nStartPos = stReceive.find ("Y=") + 3;
        nEndPos = stReceive.find ("Z=") - 2;
        hd.stRobotYPosition = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szRobotYPosition = hd.stRobotYPosition.c_str();
        hd.RobotYPosition = strtod(hd.szRobotYPosition, NULL);

        nStartPos = stReceive.find ("Z=") + 3;
        nEndPos = stReceive.find ("A=") - 2;
        hd.stRobotZPosition = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szRobotZPosition = hd.stRobotZPosition.c_str();
        hd.RobotZPosition = strtod(hd.szRobotZPosition, NULL);  

        //Data to be passed from the HMI
        nStartPos = stReceive.find ("ForThresh=") + 11;
        nEndPos = stReceive.find ("StifFree=") - 2;
        hd.stForThresh = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szForThresh = hd.stForThresh.c_str();
        hd.ForThresh = strtod(hd.szForThresh, NULL);
        hd.ForThresh = hd.ForThresh/100;

        nStartPos = stReceive.find ("StifFree=") + 10;
        nEndPos = stReceive.find ("StifStick=") - 2;
        hd.stStifFree = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szStifFree = hd.stStifFree.c_str();
        hd.StifFree = strtod(hd.szStifFree, NULL);
        hd.StifFree = hd.StifFree/100;

        nStartPos = stReceive.find ("StifStick=") + 11;
        nEndPos = stReceive.find ("StifCont=") - 2;
        hd.stStifStick = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szStifStick = hd.stStifStick.c_str();
        hd.StifStick = strtod(hd.szStifStick, NULL);
        hd.StifStick = hd.StifStick/100;

        nStartPos = stReceive.find ("StifCont=") + 10;
        nEndPos = stReceive.find ("KForce=") - 2;
        hd.stStifCont = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szStifCont = hd.stStifCont.c_str();
        hd.StifCont = strtod(hd.szStifCont, NULL);
        hd.StifCont = hd.StifCont/100;

        nStartPos = stReceive.find ("KForce=") + 8;
        nEndPos = stReceive.find ("LScale=") - 2;
        hd.stKForce = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szKForce = hd.stKForce.c_str();
        hd.KForce = strtod(hd.szKForce, NULL);
        hd.KForce = hd.KForce/100;

        nStartPos = stReceive.find ("LScale=") + 8;
        nEndPos = stReceive.find ("<HMI") - 3;
        hd.stLScale = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szLScale = hd.stLScale.c_str();
        hd.LScale = strtod(hd.szLScale, NULL);

        nStartPos = stReceive.find ("HapFeed=") + 9;
        nEndPos = stReceive.find ("<IPOC>") - 3;
        hd.stHapFeed = stReceive.substr (nStartPos, nEndPos - nStartPos);
        hd.szHapFeed = hd.stHapFeed.c_str();
        hd.HapFeed = atoi(hd.szHapFeed);

//data the is to be sent to the robot

        if (hd.FirstTimePosition)
        {
            hd.RobotXStartPosition = hd.RobotXPosition;
            hd.RobotYStartPosition = hd.RobotYPosition;
            hd.RobotZStartPosition = hd.RobotZPosition;         
            hd.FirstTimePosition = false;
        }

        //tells the filter to turn on or off
        if (hd.LinearScale == 0 || hd.LinearScale == 0.5 || hd.LinearScale == 1)
        {
            hd.NewScaletoRobot = 1;
            hd.stScaletoRobot = dtostr(hd.NewScaletoRobot);
            nStartPos = stSend.find ("SCX=") + 5;
            stSend.replace(nStartPos, 1, hd.stScaletoRobot);

            hd.stScaletoRobot = dtostr(hd.NewScaletoRobot);
            nStartPos = stSend.find ("SCY=") + 5;
            stSend.replace(nStartPos, 1, hd.stScaletoRobot);

            hd.stScaletoRobot = dtostr(hd.NewScaletoRobot);
            nStartPos = stSend.find ("SCZ=") + 5;
            stSend.replace(nStartPos, 1, hd.stScaletoRobot);
        }
        else
        {
            hd.NewScaletoRobot = 0;
            hd.stScaletoRobot = dtostr(hd.NewScaletoRobot);
            nStartPos = stSend.find ("SCX=") + 5;
            stSend.replace(nStartPos, 1, hd.stScaletoRobot);

            hd.stScaletoRobot = dtostr(hd.NewScaletoRobot);
            nStartPos = stSend.find ("SCY=") + 5;
            stSend.replace(nStartPos, 1, hd.stScaletoRobot);

            hd.stScaletoRobot = dtostr(hd.NewScaletoRobot);
            nStartPos = stSend.find ("SCZ=") + 5;
            stSend.replace(nStartPos, 1, hd.stScaletoRobot);
        }

        if(hd.LinearScale == 4)
        {
            f_co = 0.5;
        }
        else if (hd.LinearScale == 3)
        {
            f_co = 0.5;
        }
        else if (hd.LinearScale == 2)
        {
            f_co = 1;
        }
        else if (hd.LinearScale == 1)
        {
            f_co = 2;
        }
        else if (hd.LinearScale == 0.5)
        {
            f_co = 2;
        }
        else
        {
            f_co = 0.5;
        }

        w_co = f_co * C_TWO_PI;
        OMEGA_co = (2/T) * cTanRad((w_co * T) / 2);

        hd.raw_x[CURRENT_VALUE] = hd.XtoRobot;
        hd.raw_y[CURRENT_VALUE] = hd.YtoRobot;
        hd.raw_z[CURRENT_VALUE] = hd.ZtoRobot;

        hd.filtered_x[CURRENT_VALUE] = (pow(((OMEGA_co) / ((2 / T) + OMEGA_co)), 2)) * 
            ((hd.raw_x[CURRENT_VALUE]) + (2 * hd.raw_x[CURRENT_VALUE - 1] + hd.raw_x[CURRENT_VALUE - 2])) 
            - (((2 * (OMEGA_co - (2 / T))) / ((2 / T) + OMEGA_co)) * hd.filtered_x[CURRENT_VALUE - 1])
            - ((pow(((OMEGA_co - (2 / T)) / ((2 / T) + OMEGA_co)),2)) * hd.filtered_x[CURRENT_VALUE - 2]);

        hd.filtered_y[CURRENT_VALUE] = (pow(((OMEGA_co) / ((2 / T) + OMEGA_co)), 2)) * 
            ((hd.raw_y[CURRENT_VALUE]) + (2 * hd.raw_y[CURRENT_VALUE - 1] + hd.raw_y[CURRENT_VALUE - 2])) 
            - (((2 * (OMEGA_co - (2 / T))) / ((2 / T) + OMEGA_co)) * hd.filtered_y[CURRENT_VALUE - 1])
            - ((pow(((OMEGA_co - (2 / T)) / ((2 / T) + OMEGA_co)),2)) * hd.filtered_y[CURRENT_VALUE - 2]);

        hd.filtered_z[CURRENT_VALUE] = (pow(((OMEGA_co) / ((2 / T) + OMEGA_co)), 2)) * 
            ((hd.raw_z[CURRENT_VALUE]) + (2 * hd.raw_z[CURRENT_VALUE - 1] + hd.raw_z[CURRENT_VALUE - 2])) 
            - (((2 * (OMEGA_co - (2 / T))) / ((2 / T) + OMEGA_co)) * hd.filtered_z[CURRENT_VALUE - 1])
            - ((pow(((OMEGA_co - (2 / T)) / ((2 / T) + OMEGA_co)),2)) * hd.filtered_z[CURRENT_VALUE - 2]);

        hd.raw_x[CURRENT_VALUE - 2] = hd.raw_x[CURRENT_VALUE - 1];
        hd.raw_y[CURRENT_VALUE - 2] = hd.raw_y[CURRENT_VALUE - 1];
        hd.raw_z[CURRENT_VALUE - 2] = hd.raw_z[CURRENT_VALUE - 1];

        hd.raw_x[CURRENT_VALUE - 1] = hd.raw_x[CURRENT_VALUE];
        hd.raw_y[CURRENT_VALUE - 1] = hd.raw_y[CURRENT_VALUE];
        hd.raw_z[CURRENT_VALUE - 1] = hd.raw_z[CURRENT_VALUE];

        hd.filtered_x[CURRENT_VALUE - 2] = hd.filtered_x[CURRENT_VALUE - 1];
        hd.filtered_y[CURRENT_VALUE - 2] = hd.filtered_y[CURRENT_VALUE - 1];
        hd.filtered_z[CURRENT_VALUE - 2] = hd.filtered_z[CURRENT_VALUE - 1];

        hd.filtered_x[CURRENT_VALUE - 1] = hd.filtered_x[CURRENT_VALUE];
        hd.filtered_y[CURRENT_VALUE - 1] = hd.filtered_y[CURRENT_VALUE];
        hd.filtered_z[CURRENT_VALUE - 1] = hd.filtered_z[CURRENT_VALUE];

        //hd.CommGain = 0.001;

        //hd.XtoRobot = hd.XtoRobot / (1+(hd.CommGain * abs(hd.Fx - hd.PreviousFx)));
        //hd.YtoRobot = hd.YtoRobot / (1+(hd.CommGain * abs(hd.Fy - hd.PreviousFy)));
        //hd.ZtoRobot = hd.ZtoRobot / (1+(hd.CommGain * abs(hd.Fz - hd.PreviousFz)));

        //hd.CurrentXtoRobot = hd.XtoRobot - hd.PreviousXtoRobot;
        hd.stXtoRobot = dtostr(hd.filtered_x[CURRENT_VALUE]);
        nStartPos = stSend.find ("X=") + 3;
        stSend.replace(nStartPos, 6, hd.stXtoRobot);

        //hd.CurrentYtoRobot = hd.YtoRobot - hd.PreviousYtoRobot;
        hd.stYtoRobot = dtostr(hd.filtered_y[CURRENT_VALUE]);
        nStartPos = stSend.find ("Y=") + 3;
        stSend.replace(nStartPos, 6, hd.stYtoRobot);

        //hd.CurrentZtoRobot = hd.ZtoRobot - hd.PreviousZtoRobot;
        hd.stZtoRobot = dtostr(hd.filtered_z[CURRENT_VALUE]);
        nStartPos = stSend.find ("Z=") + 3;
        stSend.replace(nStartPos, 6, hd.stZtoRobot);

        //hd.CurrentGtoRobot = hd.GtoRobot - hd.PreviousGtoRobot;
        //hd.stGtoRobot = dtostr(hd.GtoRobot);
        //nStartPos = stSend.find ("A=") + 3;
        //stSend.replace(nStartPos, 6, hd.stGtoRobot);

        //hd.CurrentBtoRobot = hd.BtoRobot - hd.PreviousBtoRobot;
        //hd.stBtoRobot = dtostr(hd.BtoRobot);
        //nStartPos = stSend.find ("B=") + 3;
        //stSend.replace(nStartPos, 6, hd.stBtoRobot);

        //hd.CurrentAtoRobot = hd.AtoRobot - hd.PreviousAtoRobot;
        //hd.stAtoRobot = dtostr(hd.AtoRobot);
        //nStartPos = stSend.find ("C=") + 3;
        //stSend.replace(nStartPos, 6, hd.stAtoRobot);

        //hd.PreviousXtoRobot = hd.XtoRobot;
        //hd.PreviousYtoRobot = hd.YtoRobot;
        //hd.PreviousZtoRobot = hd.ZtoRobot;

        //hd.PreviousAtoRobot = hd.AtoRobot;
        //hd.PreviousBtoRobot = hd.BtoRobot;
        //hd.PreviousGtoRobot = hd.GtoRobot;

        strcpy( static_cast<char*>( &acWriteBuffer[0] ), stSend.c_str() );

        if (nReadBytes > 0)
        {
            int nSentBytes = 0;
            int SendLength = strlen(acWriteBuffer);
            while (nSentBytes < SendLength)
            {
                int nTemp = sendto(sd, acWriteBuffer, SendLength, 0, (struct sockaddr*)&clientAddr, sockAddrSize);

                if (nTemp > 0)
                {
                    nSentBytes += nTemp;
                }
                else if (nTemp == SOCKET_ERROR)
                {
                    return false;
                }
                else
                {
                    // Client closed connection before we could reply to
                    // all the data it sent, so bomb out early.
                    SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)L"Peer unexpectedly dropped connection!");
                    return true;
                }
            }
        }
        else if (nReadBytes == SOCKET_ERROR)
        {
            return false;
        }
    } while (nReadBytes != 0);

    SendDlgItemMessage(g_hWndHapticBox, IDC_LIST_Server, LB_INSERTSTRING, 0, (LPARAM)L"Connection closed by peer.");
    bRobotConnected = false;
    bRobotConnectInit = true;
    SetDlgItemText(g_hWndHapticBox, IDC_STATIC_RobotStatus, _T("Waiting for robot"));
    SetDlgItemText(g_hWndHapticBox, IDC_STATIC_RobotInMotion, _T("Robot not in motion"));

    return true;
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-09T15:42:03.293

我认为您需要研究异步套接字，这是一个介绍如何使用它们的 URL：http: [//www.win32developer.com/tutorial/winsock/winsock_tutorial_7.shtm](http://www.win32developer.com/tutorial/winsock/winsock_tutorial_7.shtm)

# magento - 什么是限制magento中可下载产品购买数量的好方法

> ID：14238793
> 
> 赞同：2
> 
> 时间：2013-01-09T15:34:47.390
> 
> 标签：magento, download, limit, product

首先：我得到了 magento 的 mvc 和 php，但我并不完全了解它的“内置功能”可以做什么。

当用户选择我的 BOOK 可配置产品之一作为 epub 或 pdf 版本时，我正在研究一种将 QTY 限制为 1 的方法。如果选择不是“物理”，我正准备开始在主题中使用一些 jQuery voodoo 来隐藏 QTY 选项。我希望有人可能知道这样做的方法或以前有这样做的经验。

随意回答“在管理员中执行此操作”或“编写类似的代码”

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:43:17.497

您可以通过编辑特定商品并转到“库存”选项卡来限制购物车中允许的商品数量。有两种设置：“购物车允许的最小数量”和“购物车允许的最大数量”。取消选中“允许的最大数量”的“使用配置设置”并将其设置为一个。

默认情况下，这两个都是“使用配置”，这意味着它也可以在系统 -> 配置 -> 库存选项卡中进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:04:03.703

下面是我如何在导入系统中实现它以遵循您的答案。所有未来的产品都将具有您所说的配置，而当前的产品将通过 jQuery 处理

```
catalogInventoryStockItemUpdateEntity stock;

if (this.deliveryType != DeliveryTypes.Simple)
{
    stock = new catalogInventoryStockItemUpdateEntity
                {
                    use_config_manage_stockSpecified = true,
                    use_config_manage_stock = 0,
                    manage_stockSpecified = true,
                    manage_stock = 0,
                    backorders = 0,
                    is_in_stockSpecified = true,
                    is_in_stock = 1,
                    use_config_max_sale_qtySpecified = true,
                    use_config_max_sale_qty = 0,
                    max_sale_qtySpecified = true,
                    max_sale_qty = 1
                };
}
else
{

    stock = new catalogInventoryStockItemUpdateEntity
                {
                    manage_stockSpecified = true,
                    is_qty_decimal = 1,
                    is_qty_decimalSpecified = true,
                    qty = this.InventoryQuantity.ToString(CultureInfo.InvariantCulture),
                    backorders = 0,
                    is_in_stockSpecified = true,
                    is_in_stock = 1,
                    manage_stock = 1
                };
}

return stock; 
```

下面是我如何让前端看起来更好一点。我添加了一个小的淡入淡出效果，并且数量发生了变化并解释了它为什么会发生变化。我将以下内容插入到我的主题 /var/www/app/design/frontend/NKI/default/template/catalog/product/view.phtml

```
<script type="text/javascript">

jQuery(document).ready(function() {
    jQuery('#attribute501').change(function() {
            var x = jQuery(this).val();
            // If its not a physical book
            var qtyInput = jQuery('#theQty').find('#qty');
            jQuery(qtyInput).val(1);
            var qtyExplain = jQuery('#qtyExplain');

            if (x) {

                    if (x != 3) {
                            jQuery(qtyExplain).fadeIn('slow');
                            jQuery(qtyInput).attr("disabled",true);
                    } else {
                            jQuery(qtyExplain).fadeOut('slow');
                            jQuery(qtyInput).attr("disabled",false);
                    }
            } else {
                    jQuery(qtyExplain).fadeOut('slow');
                    jQuery(qtyInput).attr("disabled",false);

            }
    });

});

</script> 
```

同样在 /var/www/app/design/frontend/NKI/default/template/catalog/product/view/addtocart.phtml 我把它改成了这个

```
<?php $_product = $this->getProduct() ?>

<?php if($_product->isSaleable()): ?>
    <div class="add-to-cart" style="width: 365px">
        <?php if(!$_product->isGrouped()): ?>
        <div id="qtyExplain" style="display:none">
                <p>Downloads are unlimited. Quantity is limited to one item.</p>
        </div>

        <div id="theQty" style="display: inline" >
        <label for="qty"><?php echo $this->__('Qty:') ?></label>
        <input type="text" name="qty" id="qty" maxlength="12" value="<?php echo $this->getMinimalQty($_product) ?>" title="<?php echo $this->__('Qty') ?>" class="input-text qty" />
        </div>
        <?php endif; ?>
        <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="productAddToCartForm.submit()"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
        <?php echo $this->getChildHtml('', true, true) ?>
    </div>
<?php endif; ?> 
```

另外，对于购物车，我在第 154 行 /var/www/app/design/frontend/NKI/default/template/checkout/cart/item/default.phtml 附近的以下文件中添加了以下代码

```
 <?php
        if ($_item->getIsVirtual()): ?>
                <span><?php echo $_item->getQty();?></span>
        <?php else: ?>

        <input name="cart[<?php echo $_item->getId() ?>][qty]" value="<?php echo $this->getQty() ?>" size="4" title="<?php echo $this->__('Qty') ?>" class="input-text qty" maxlength="12" />
        <?php endif; ?> 
```

# c# - 在 radgridview 中更改组标题

> ID：14238794
> 
> 赞同：2
> 
> 时间：2013-01-09T15:34:51.243
> 
> 标签：c#, asp.net, telerik, radgridview

当我组默认时，`radgridview`由 Telerik 列的名称和单元格的值像组的标题一样放置

```
{Column Title}: {Cell Value} 
```

![在此处输入图像描述](../Images/4ac198a61fbf4fef62469b3f0a77fa0b.png)

但我需要改变它`{Cell Value}`

有什么办法可以用 C# 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:41:36.930

如果您要在分组后从值中删除预先固定的列名，您可以订阅该`GroupSummaryEvaluate`事件，然后覆盖默认格式。

例如，如果您的列名是“Rotulo”和“Termino”，如您的示例中所示：

```
void radGridView_GroupSummaryEvaluate(object sender, Telerik.WinControls.UI.GroupSummaryEvaluationEventArgs e)
{
    if ((e.SummaryItem.Name == "Rotulo") || (e.SummaryItem.Name == "Termino"))
    {
        e.FormatString = e.Value.ToString();
    }
} 
```

# css - CSS：基本字体大小（在浏览器中设置）和响应式设计

> ID：14238799
> 
> 赞同：7
> 
> 时间：2013-01-09T15:35:00.830
> 
> 标签：css, font-size

我试图设计尽可能响应网站（除非为 iPhone 设置了特殊的样式表）。为此，我已将所有字体大小设置为“em”。我们的网站刚刚从测试开发中上线，我的一位同事给我发了一张他家用电脑的屏幕截图，他的 Firefox 的基本字体大小已设置为 24pt。（[参见此处的屏幕截图。]）如此大的基本字体大小（恕我直言）不是我在设计中考虑的。我知道覆盖用户默认值不是一个好习惯，但这是一种主要基于图形的体验（尤其是在首页上），并且文本需要保留在指定的框中 - 如您所见，较大的字体大小会破坏设计。

以下是我认为从 css 中提取的重要内容：

```
body {
    background: white;
    font-family: Arial, Helvetica, "Nimbus Sans L", sans-serif;
    font-size: 1em;
    color: #858585;
}

.item.news.priority h2 {
    font-size: 1.25em;
}
.item.news h2 {
    font-size: 0.9em;
} 
```

您可以在 www.loeuf.com 上实时访问它。

你有什么建议？用像素值覆盖正文字体大小，或者只是破坏设计的 h2 元素？最佳做法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T17:40:59.467

虽然我在某种程度上同意 c_kick 关于使用 的评论，但`em`真正响应式设计的一部分是允许用户设置发挥作用。这意味着让浏览器默认保持默认。毕竟，您不知道查看您网站的人是否几乎是盲人并且因此需要大文本。`px`因此，在 上设置默认值`body`将使这种类型的“响应性”无效，我相信这部分是您想要的。

现在，如果您不关心这一点，c_kick 设置`px`基础的解决方案`body`是有效的（也是最简单的）。

如果您希望保持该用户的响应能力，但让它在图形上运行良好，那么您需要尝试做两件事中的一件（我不确定第二件是否可以很容易地工作，这只是一个被抛弃的想法与#1相反，我确信它可以工作）：

1.  要么设置并允许图像与字体大小成比例缩放（因此`em`基于图像的缩放，或者让文本大小驱动图像然后缩放到的容器高度），或者......
2.  将这些图像（但不是文本框）的周围`margin`或周围设置为大小，以便图像周围的“间隙”与文本的缩放方式成一定比例。`padding``em`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-12T16:41:34.857

`font-size`我发现在**pt**中指定 base并在**em中指定*****所有***其他大小非常有用。

 **因此，例如，指定以下设置：

```
html * {
    font-size: 12pt;
} 
```

我绝对知道每个文字的字母`font-size: 1em`都会占据

**12pt = 12 * (1/72 英寸) = 12 * 0.35 mm = 4.2 mm**宽

无论分辨率如何 - 无论是**800x600**、**1024x768**还是**1920x1200**。

它显着简化了网站的设计，因为如果我指定`width: 10em`例如按钮，我肯定知道该按钮的大小**为 12pt * 10 = 4.2mm * 10 = 4.2 cm**。

此外，在分辨率为**1920x1200的****15"显示器上设计的站点在分辨率为****1024x768的****15"**显示器上看起来***几乎***相同- 这对于设计来说非常方便。

 *******所以目前我只关心实际（物理）**显示尺寸**和**纵横比**，它们的变化不像分辨率那么大，而且更容易预测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-03T23:07:38.453

```
body { font-size: 100%;}

@media all and (max-width: 800px) {
   body { font-size: 200%;}
}

If screen is less than 800 the size of font increase 200%

In your example:

body {
    background: white;
    font-family: Arial, Helvetica, "Nimbus Sans L", sans-serif;
    font-size: 100%;
    color: #858585;
}

.item.news.priority h2 {
    font-size: 110%; /* +10% */ 
}
.item.news h2 {
    font-size: 90%;  /* -10% */ 
} 
```*********

# java - 比较相似词的两个字符串列表并测量出现词的频率 - JAVA

> ID：14238805
> 
> 赞同：1
> 
> 时间：2013-01-09T15:35:09.377
> 
> 标签：java, arraylist, hashset

我意识到我在这里同时问了两个不同的问题，但我认为它们是相关的（即使只是轻微的）。无论如何，我想做的是比较两个字符串列表（不一定是 Java 列表）并删除两个列表中出现的单词。我正在考虑使用 an`ArrayList`或 a `HashSet`，`HashSet`因为列表没有排序，但我对 HashSet 的问题是我读过它们不允许重复。这与我的其他要求略有冲突，因为我希望能够计算每个单词出现的次数，但只显示一次……如果这有意义的话。想想一个 WordCloud 的例子。

这是我目前拥有的，将两个文本文件的内容保存到两个`ArrayList`s：

```
ArrayList<String> words = new ArrayList<String>();
        File file = new File(fileName);
        Scanner scanner = new Scanner(file).useDelimiter("$");
        while(scanner.hasNext())
        {               
            String wrd = scanner.nextLine();
            words.add(wrd);
        } 
```

我不得不使用两种不同的方式来保存数据，因为这两个文本文件的结构不同

```
ArrayList<String> webWords = new ArrayList<String>();
    File webFile = new File(webFileName);
    BufferedReader br = new BufferedReader(new FileReader(webFileName));
    String testLine = "", str = "";
    int count = 0;
    String s;
    while ((testLine = br.readLine()) != null) {
            str += testLine + " ";
    }
    StringTokenizer st = new StringTokenizer(str);
    while (st.hasMoreTokens()) {
            s = st.nextToken();
            webWords.add(s);
            count++;
    } 
```

现在我可以轻松地以类似的方式创建两个 HashSet，但我目前正在使用 ArrayList，因为它允许重复，我仍然不确定哪个最适合我的需要。

我需要将第二个列表与第一个进行比较，并删除第二个列表中出现在第一个列表中的所有单词。

我的第二个问题是试图确定（在我删除常用词之后）哪些词最常出现。

任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:59:26.937

如果我正确理解了要求，那么我们可以将 a`HashMap<String, Integer>`并将 list1 中的所有单词作为键放入其中，从而避免重复

```
for(String w : list1) {
      map.put(w, 0);
} 
```

然后我们可以遍历地图条目，计算词频并将其作为条目值

```
for(Entry<String, Integer> e : map.entrySet) {
      int n = Collections.frequency(list2, e.getKey());
      e.setValue(n);
} 
```

**更新**：“我希望能够从 list2 中删除出现在 list1 中的单词。然后遍历 list2 中的剩余单词以找出每个单词出现的次数”

```
 list2.removeAll(list1);

   for(String w : list2) {
          map.put(w, 0);
    }

    for(Entry<String, Integer> e : map.entrySet) {
          int n = Collections.frequency(list2, e.getKey());
          e.setValue(n);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:48:13.773

要删除一个集合中存在于另一个集合中的所有元素，请使用[`removeAll`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#removeAll%28java.util.Collection%29). 这是 Collection 接口中的可选操作，ArrayList 和 HashSet 都实现了它。

```
words.removeAll(webWords); 
```

要构建频率表，您*不能*使用集合，因为集合只保留每个元素中的一个。您需要使用 List 并创建一个`Map<String, Integer>`将每个单词映射到它出现的次数。要构建它，您可以执行以下操作：

```
for (String word : words) {
    if (freqMap.containsKey(word)) {
        freqMap.put(word, freqMap.get(word) + 1); // increment
    } else {
        freqMap.put(word, 1); // begin at 1 if it was not present
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:48:02.437

组合术语和计数的简单方法是使用 HashMap，其中单词作为键，出现次数作为值。我不记得 Java 的确切表示法，但我希望是这样的：

```
HashMap words = new HashMap();
while ( st.hasMoreTokens())
{
   s = st.nextToken();
   if ( words.containsKey(s) )
    {
        // probably not how indexing is done, but would be in most languages :p
        words[s]= words[s]+1;
     }
   else 
     {
       words.put( s, 1 );
     }
} 
```

这样，您最终会得到一个包含所有唯一单词的 HashMap 以及每个单词的出现次数。

# php - 在 Eclipse 中远程开发 php，无需在本地机器上复制。

> ID：14238808
> 
> 赞同：0
> 
> 时间：2013-01-09T15:35:14.157
> 
> 标签：php, eclipse, svn, remote-access

我想知道是否有好的插件/远程开发方法。项目将在主服务器 ubuntu 上，程序员将通过笔记本电脑访问它。那么我有什么选择来实现这一目标？

1) 程序员不应该能够在笔记本电脑上复制项目文件。开发、编译应该在远程机器上。2) 如何记录程序员的操作，如登录/复制/删除操作？这是针对本地项目的，我是 Eclipse 开发的新手！谢谢。

# maps - google maps api 3 同时平移和缩放

> ID：14238811
> 
> 赞同：1
> 
> 时间：2013-01-09T15:35:18.977
> 
> 标签：maps, zooming, panning

我已经编写了与 2 个谷歌地图窗口（api 3 版本）同时平移的代码。我也希望能够同时缩放。我已经让它在 api2 中工作，但我没有让它在 ap3 版本的谷歌地图中工作。有没有人建议？提前致谢

[当前代码的示例工作](http://www.websites-maken.nl/tmp/test.html)

```
var map;
var map2;
function load(x,y) {

var myOptions = {
  zoom: 7,
  center: new google.maps.LatLng(x,y),
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map"), myOptions);

var myOptions2 = {
  zoom: 7,
  center: new google.maps.LatLng(x,y),
  mapTypeId: google.maps.MapTypeId.SATELLITE
}
map2 = new google.maps.Map(document.getElementById("map2"), myOptions2);

        var map_moving = 0;
        var map2_moving = 0;

        var zoomLevel = map.getZoom();  

   google.maps.event.addListener(map, 'bounds_changed', function() {

                            map2_moving = true;
            if (map_moving == false) {
                map2.setCenter(map.getCenter(), map.getZoom());
                                    infowindow.setContent('Zoom: ' + zoomLevel);
            }
                            map_moving = false;
                            map2_moving = true;
});

  google.maps.event.addListener(map2, 'bounds_changed', function() {
                        map_moving = true;
            if (map2_moving == false) {
                        map.setCenter(map2.getCenter(), map2.getZoom());
                                    infowindow.setContent('Zoom: ' + zoomLevel);
            }
                            map_moving = true;
                            map2_moving = false;

});

var infowindow = new google.maps.InfoWindow(
{ 
size: new google.maps.Size(150,50)
});
}
  //]]> 
```

问候巴斯

# vb.net - 此提供程序仅支持跳过有序查询吗？

> ID：14238814
> 
> 赞同：-2
> 
> 时间：2013-01-09T15:35:35.280
> 
> 标签：vb.net, linq-to-sql

我收到以下错误消息...此提供程序仅支持跳过返回实体或包含所有标识列的投影的有序查询，其中查询是单表（非联接）查询，或者是不同的，除了，相交或联合（不是 Concat）操作。

```
 <asp:DropDownList ID="ddlModels" runat="server" 
                          DataSourceID="ldsListOfModelNos" 
                          DataTextField="EngineModel" 
                          DataValueField="EngineModel" 
                          AppendDataBoundItems="True" 
                          AutoPostBack="true">
      </asp:DropDownList>

       <br/>

       <br />

       <asp:LinqDataSource ID="ldsListOfModelNos" 
                          runat="server" >                              
      </asp:LinqDataSource>

 <asp:GridView ID="gvPriceListByModel" runat="server" EmptyDataText="No Price Info Available"                                                   AutoGenerateColumns="False" CellPadding="4" CellSpacing="4" ForeColor="#333333" GridLines="None" AllowPaging="True"                                             DataSourceID="ldsPBM2" DataKeyNames="EngineSpec">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
            <Columns>
                 <asp:BoundField DataField="EngineModel" HeaderText="EngineModel" 
                      Visible="False" />
                 <asp:BoundField DataField="EngineSpec" HeaderText="ItemNo"  />
                 <asp:BoundField DataField="NewOrRebuilt" HeaderText="NR" Visible="False" />
                 <asp:BoundField ConvertEmptyStringToNull="False" DataField="RetailPrice" 
                      DataFormatString="{0:c}" HeaderText="Retail Price" />
                 <asp:BoundField DataField="DistributorPrice" DataFormatString="{0:c}" 
                      HeaderText="Distributor Price" />
                 <asp:BoundField DataField="CorePrice" DataFormatString="{0:c}" 
                      HeaderText="Core Price" />
            </Columns>
            <EditRowStyle BackColor="#999999" />
            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
            <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
            <SortedAscendingCellStyle BackColor="#E9E7E2" />
            <SortedAscendingHeaderStyle BackColor="#506C8C" />
            <SortedDescendingCellStyle BackColor="#FFFDF8" />
            <SortedDescendingHeaderStyle BackColor="#6F8DAE" />

       </asp:GridView> 
```

```
Protected Sub ldsPriceListByModel2_Selecting(sender As Object, e As  System.Web.UI.WebControls.LinqDataSourceSelectEventArgs) Handles ldsPriceListByModel2.Selecting
      If Not IsPostBack Then
           Dim sd As SessionData = Session("SessionData")
           sd.CmpCode = "95102"
           Dim cmpCode = sd.CmpCode
           Dim interimResult = dataUtil.GetQueryablePriceList(cmpCode)

           e.Result = interimResult.Where(Function(m) m.EngineModel = ddlModels.SelectedValue).OrderBy(Function(o) o.EngineSpec)
      End If

 End Sub

                Public Class DataUtils

                Private dc As DataAccess

                 Public Function GetQueryablePriceList(cmpCode As String) As IQueryable(Of PriceInfo)

  dc = New DataAccessClass(ConfigurationManager.ConnectionStrings("xxx").ConnectionString.ToString())

      Dim PriceListQuery = (From ms In dc.dbo.v_ModelSpecs
              Join pl In dc.dbo.v_pricelists
              On ms.item_no Equals pl.item_no
              Join ci In dc.dbo.cxabcx_VWs
              On pl.accounttypecode Equals ci.AccountTypeCode
              Where (pl.price <> 0 And ci.cmp_code = cmpCode)
          Select New PriceInfo() With {.EngineModel = ms.Model,
                                       .EngineSpec = ms.item_no,
                                       .NewOrRebuilt = IIf(pl.item_desc_1 = "ENGINE - NEW", "N", "R"),
                                       .RetailPrice = pl.price, .DistributorPrice = pl.disc_price,  .CorePrice = pl.sls_price}).AsQueryable()

      Return PriceListQuery
 End Function

Public Class PriceInfo

 Public Sub New()

 End Sub

 Public Property EngineModel As String

 Public Property EngineSpec As String

 Public Property NewOrRebuilt As Char

 Public Property RetailPrice As Decimal

 Public Property DistributorPrice As Decimal

 Public Property CorePrice As Decimal

End Class 
```

这是一个经典的一对多场景，一个引擎模型许多引擎规格......gridview 由下拉列表（ddlModels）中的一个键选择驱动。选择一个发动机型号，您将在 gridview 表中获得价格表详细信息。我的 LINQ 查询被隔离在一个名为 DataUtils 的数据访问类中。在 LINQDATASOURCE(lds) 的选择事件中，我将 e.Results 属性分配给初始查询的结果，但最终用户通过 ddlModels 选择的 EngineModel 过滤了它（WHERE）。网格视图仅启用了分页而不是排序。为什么我会收到此错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:41:02.130

我将用参数化的存储过程替换此 Linq to SQL 查询以检索数据。由于 SP 可以在视图中查询数据，因此它应该可以工作。

要么，要么一起放弃 DevExpress

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:29:06.457

简短的回答是您似乎遇到了 linqdatasource 对象的限制。您可能需要尝试手动绑定而不使用数据源。在大多数情况下，我经常避免使用 LinqDataSource，除非我只是处理简单的平面表映射。

或者，您可以尝试将属性添加到 PriceInfo 对象定义中的列，但此选项未经测试。

您可能想通过此搜索查看各种论坛帖子中的建议：http: [//www.bing.com/search? q=%22This+provider+supports+Skip+only+over+ordered+queries+returning+entities +or+projections+that+contain+all+identity+columns%22&qs=n&form=QBRE&pq=%22this+provider+supports+skip+only+over+ordered+query+returning+entities+or+projections+that+contain+全部+标识+列%22&sc=0-0&sp=-1&sk=](http://www.bing.com/search?q=%22This+provider+supports+Skip+only+over+ordered+queries+returning+entities+or+projections+that+contain+all+identity+columns%22&qs=n&form=QBRE&pq=%22this+provider+supports+skip+only+over+ordered+queries+returning+entities+or+projections+that+contain+all+identity+columns%22&sc=0-0&sp=-1&sk=)

# android - MotionEvent up 在按钮之外不起作用

> ID：14238817
> 
> 赞同：0
> 
> 时间：2013-01-09T15:35:36.553
> 
> 标签：android

我有一个 ImageButton，当我按下它并按住手指时它变得不可见，当我抬起手指时它又变得可见。

但是当我按下按钮并且当我的手指向下时我将它从它移开并将它抬起它不会再次变得可见

代码看起来像这样

```
final ImageButton b=(ImageButton)findViewById(R.id.timer_btn);

        b.setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction()) {

                  case MotionEvent.ACTION_UP: 
                        b.setVisibility(View.VISIBLE);
                        Log.w("app", "Action up");
                        return true;
                  case MotionEvent.ACTION_DOWN: 
                        b.setVisibility(View.INVISIBLE);
                        Log.w("app", "Action down");

                       }
                    return false;
            }
        }); 
```

我尝试使用

```
case MotionEvent.ACTION_OUTSIDE: 
                            b.setVisibility(View.VISIBLE);
                            Log.w("app", "Action outside");

                           } 
```

但它不起作用，无论它是在按钮外部还是内部，它都会被调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:48:13.980

你必须使用`ACTION_CANCEL`. 我猜 ACTION_OUSIDE 是在实际屏幕之外的。

系统将始终调用 UP 或 CANCEL。

**编辑：**

我相信这应该有效：

```
 case MotionEvent.ACTION_CANCEL: 
              case MotionEvent.ACTION_UP: 
                    b.setVisibility(View.VISIBLE);
                    Log.w("app", "Action up");
                    return true; 
```

# iphone - BarButton不会出现在导航菜单中Objective -C

> ID：14238821
> 
> 赞同：0
> 
> 时间：2013-01-09T15:35:46.870
> 
> 标签：iphone, ios, objective-c

故事：

我尝试创建一个简单的登录应用程序（用户名和密码保存在`SQlite`数据库中）我有 3 个属性两个`Labels`和一个`BarButton`. 标签正在工作，但`BarButton` 不会出现我真的不知道为什么..我尝试了几次，但不知何故我无法找到我的错误，我正在使用`Xcode 4.5.2`/developing on `iPhone SDK 6.0 /Master-Detail Application Layout`，我没有使用`Storyboard`im 使用 a `Xib-File`。

```
-(void) keyboardAppearance{
    if(isKeyboardVisible == FALSE){
        isKeyboardVisible = true;
        UIBarButtonItem *btnGo = [[UIBarButtonItem alloc]initWithTitle:@"Login" style:UIBarButtonItemStyleBordered target:self action:@selector(loginAction)];
        self.navigationItem.rightBarButtonItem = btnGo;
    }
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:09:05.353

我的猜测是 self.navigationItem 为零，这意味着您的 UIViewController 不包含在 UINavigationController 中。为此，您需要执行以下操作：

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:myController]; 
```

然后显示“navController”而不是“myController”。

希望有帮助。

# python - 无法使用 cx-Oracle 插入 Unicode

> ID：14238824
> 
> 赞同：17
> 
> 时间：2013-01-09T15:35:55.690
> 
> 标签：python, oracle, unicode, cx-oracle

我在将 unicode 插入 Oracle 架构时遇到问题，我认为数据库是 Oracle 11g 实例，但目前还不确定。我在 OS X 10.6.8 上使用 python 2.6.1（这是 python 的系统版本）并使用从 sourceforge.net 下载的 cx-Oracle 驱动程序模块版本 5.1，构建并安装到 virtualenv 1.6.1 实例网站包可见。我的脚本如下

```
 import cx_Oracle

  connection = cx_Oracle.connect(
      "<name>/<password>@<host>/<service-name>"
      )
  cursor = connection.cursor()
  result = cursor.execute(u"create table UNICODE_TEST (id NUMBER(6), text NCLOB not NULL)")

  raw_text = open("test.txt",'r').read()
  if isinstance(raw_text,str):
      raw_text = raw_text.decode("utf_8")

  statement = u"insert into UNICODE_TEST (id, text) values (1,'%s')" % raw_text
  result = cursor.execute(statement) 
```

我创建一个连接，创建游标，执行一个语句来创建一个测试表，其中包含 NUMBER 和 NCLOB 类型的 id 和文本字段。我打开一个文件，其中包含我知道的以 UTF-8 编码的文本，将字符串解码为 un​​icode。在 unicode 字符串中创建一个插入语句并执行该语句，结果就是这个错误。

```
 Traceback (most recent call last):
    File "unicode-test.py", line 19, in <module>
      result = cursor.execute(statement)
  UnicodeEncodeError: 'ascii' codec can't encode character u'\u2122' in position 170: ordinal not in range(128) 
```

在将我的语句插入 Oracle 模式之前，有些东西试图将其编码为 ASCII。所以我开始四处寻找以更好地了解 cx-Oracle 如何处理 unicode，并在我从 sourceforge.net 下载的 cx-Oracle 源代码的 HISTORY.txt 中找到了这一点

> 从 5.0.4 到 5.1 的更改
> 1) 删除对 UNICODE 模式的支持，并允许在任何可能传入字符串的地方传递 Unicode。这意味着字符串将使用 Python 中的 NLS_LANG 环境变量的值传递给 Oracle 3.x 也是如此。这样做消除了使用 UNICODE 模式发现的一堆问题，还消除了 Python 2.x 中一个不必要的限制，例如 Unicode 不能用于连接字符串或 SQL 语句。...

我的假设是 NLS_LANG 环境变量设置为“ascii”或其他等效变量，因此我尝试将 NLS_LANG 设置为“AL32UTF8”，我认为这是 unicode 的正确值，并在创建连接之前设置新值。

```
 os.environ["NLS_LANG"] = "AL32UTF8"
  connection = cx_Oracle.connect(
      "<user>/<password>@<host>/<service-name>"
      )
  cursor = connection.cursor()
  ... 
```

但我得到这个错误。

```
 Traceback (most recent call last):
    File "unicode-test.py", line 11, in <module>
      "<user>/<password>@<host>/<service-name>"
  cx_Oracle.DatabaseError: ORA-12705: Cannot access NLS data files or invalid environment specified 
```

所以看起来我无法篡改 NLS_LANG 值。

这是我现在的问题。我是否遗漏了一些简单的东西，例如不正确的列类型？是 cx-Oracle 驱动程序的问题吗？在构建 cx-Oracle 模块时，我是否需要设置“WITH_UNICODE”环境变量，我该怎么做？是 Oracle 实例的问题吗？我对 Oracle 的经验很少，也从未与 Oracle 和 python 一起工作过。我花了两天时间来解决这个问题，并希望在我去 DBA 小组之前更好地了解这个问题是什么。

谢谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T05:49:34.820

设置环境变量是正确的方法，但“AL32UTF8”不是 NLS_LANG 的正确值。要获得在您的 Oracle 实例中使用的 NLS_LANG 的正确值，请执行

```
SELECT USERENV ('language') FROM DUAL 
```

# bitbake - 谁能告诉我 RRECOMMENDS 和 RDEPENDS 的区别

> ID：14238825
> 
> 赞同：5
> 
> 时间：2013-01-09T15:36:12.533
> 
> 标签：bitbake

我很少用`RRECOMMENDS`，也不知道它的真正用途是什么。似乎只安装一个包..

```
-RDEPENDS_${PN} = "kernel-module-tun"
+RRECOMMENDS_${PN} = "kernel-module-tun" 
```

谁能解释一下上面两行代码的区别？

是否`RRECOMMENDS`安装`kernel-module-tun`？如果不是，那么它是用来做什么的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T14:42:01.890

我会尽力。这两个变量都定义了配方依赖性。

```
-RDEPENDS_${PN} = "kernel-module-tun" 
```

RDEPENDS 是一个硬性的运行时依赖项。因此，列出的任何内容都扩展了它所应用的功能，但必须安装才能使包正确运行。如果列出的包不存在或尚未构建，则依赖包仍然能够成功构建。YoctoProject 参考手册包含对这个变量的一个很好的描述。请参阅[参考手册](http://www.yoctoproject.org/docs/latest/ref-manual/ref-manual.html)

```
+RRECOMMENDS_${PN} = "kernel-module-tun" 
```

RRECOMMENDS 是一个软的运行时依赖项。因此，列出的任何内容都扩展了它所应用的功能，但不是构建的要求。还有一些关于 RRECOMMENDS 的怪癖，您可能希望在 YoctoProject 参考手册中查找，这似乎是目前此类材料的最佳资源： [参考手册](http://www.yoctoproject.org/docs/latest/ref-manual/ref-manual.html)

因此，要回答您的问题，如果可用，`RRECOMMENDS`将安装。`kernel-module-tun`如果不是，则构建将继续。相反的是使用该`RDEPENDS`语句，如果`kernel-module-tun`找不到，将在构建过程中导致错误。

# html - 使用 Jquery-mobile 无法正确显示 HTML5“范围”输入

> ID：14238826
> 
> 赞同：1
> 
> 时间：2013-01-09T15:36:16.263
> 
> 标签：html, jquery-mobile

我正在尝试使用 JQuery 移动。“范围”输入在 chrome 和 opera 移动模拟器中均未正确显示。我得到的是双滑块。在铬我得到这个

[http://dl.dropbox.com/u/29535923/desktop%20view.jpg](http://dl.dropbox.com/u/29535923/desktop%20view.jpg)

在歌剧手机上我得到了这个

[http://dl.dropbox.com/u/29535923/mobileview.jpg](http://dl.dropbox.com/u/29535923/mobileview.jpg)

我使用了 Jquery 移动网站的标准代码。这就像

```
 <label for="slider-1">Input slider:</label>
 <input type="range" name="slider-1" id="slider-1" value="60" min="0" max="100" /> 
```

请告知这里有什么问题。非常感谢，

# python - pip install psycopg2 说没有部分错误'build_ext'

> ID：14238831
> 
> 赞同：2
> 
> 时间：2013-01-09T15:36:30.987
> 
> 标签：python, virtualenv, pip, psycopg2

我正在尝试在 Ubuntu 12.04 机器上的 virtualenv 中安装 psycopg2。已安装所有相关软件包（python-dev、libpq-dev 等...）

当我在激活 virtualenv 的情况下运行 pip install psycopg2 时，我得到以下输出。这似乎是一个路径遍历问题。setup.cfg 显然在最顶部有一个 [build_ext] 部分，所以我认为 setup.py 没有找到正确的文件。有什么帮助吗？

```
Downloading/unpacking psycopg2
  Running setup.py egg_info for package psycopg2
    Traceback (most recent call last):
      File "<string>", line 16, in <module>
      File "/home/vagrant/outland_env/build/psycopg2/setup.py", line 459, in <module>
        use_pydatetime  = int(parser.get('build_ext', 'use_pydatetime'))
      File "/home/vagrant/outland_env/local/lib/python2.7/site-packages/configparser.py", line 798, in get
        d = self._unify_values(section, vars)
      File "/home/vagrant/outland_env/local/lib/python2.7/site-packages/configparser.py", line 1154, in _unify_values
        raise NoSectionError(section)
    configparser.NoSectionError: No section: 'build_ext'
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 16, in <module>

  File "/home/vagrant/outland_env/build/psycopg2/setup.py", line 459, in <module>

    use_pydatetime  = int(parser.get('build_ext', 'use_pydatetime'))

  File "/home/vagrant/outland_env/local/lib/python2.7/site-packages/configparser.py", line 798, in get

    d = self._unify_values(section, vars)

  File "/home/vagrant/outland_env/local/lib/python2.7/site-packages/configparser.py", line 1154, in _unify_values

    raise NoSectionError(section)

configparser.NoSectionError: No section: 'build_ext'

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /home/vagrant/outland_env/build/psycopg2
Storing complete log in /tmp/tmpoeLbaP 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-25T14:29:54.510

不确定这是否有帮助，但我只需要 cd 进入 setup.py 所在的下载安装目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:10:33.053

我有同样的问题，但我尝试了一个旧版本`psycopg2==2.3.3`，没有问题。

我注意到我还必须删除`build/psycopg2`目录才能 pip 安装新版本。

这是我在 virtualenv 中所做的：

```
rm -rf build/psycopg2
bin/pip install psycopg2==2.3.3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T14:34:59.993

我有同样的问题，至少在我的情况下，原因似乎是我们的服务器上安装了一个奇怪的 configparser 版本，即 configparser Python 3 backport 的错误版本。（我确实更喜欢这个大大改进的 Python 3 版本；我只是惊讶地发现它安装在我们的系统上。）

[此处解释了](https://bitbucket.org/ambv/configparser/issue/4)（已解决的）错误。

简而言之，`setup.py`当前 psycopg2 的 加载文件`setup.cfg`如下：

```
parser = configparser.ConfigParser()
parser.read('setup.cfg') 
```

该`read`方法可以采用文件名列表中的单个文件名。在这种情况下，如果文件在 Python 2 下运行，则将文件名指定为字节串（在 Python 2 中也称为字符串）。但是，后向端口用于测试 to 的第一个参数是否是而不是`read`的实例，因此它将每个字母作为单独的文件处理。由于预期的覆盖机制，如果找不到文件，它会静默失败，我们最终得到一个空配置。`unicode``basestring`

解决方案当然是升级到当前版本的 Python 3 backport 或使用 Python 2.7 版本（但 Python 3 版本要酷得多）。

# python - 如何解开其类存在于不同命名空间（python）中的对象？

> ID：14238837
> 
> 赞同：13
> 
> 时间：2013-01-09T15:36:50.647
> 
> 标签：python, pickle

如果我有一个定义类的脚本：

```
script = """

class myClass:
    def __init__(self):
        self.name = 'apple'
        self.color = 'green'

""" 
```

然后在它自己的命名空间字典中执行这个脚本：

```
NS = {}
exec script in NS 
```

然后创建该类的一个实例并腌制它：

```
a = NS['myClass']()

import pickle

save = pickle.dumps(a) 
```

现在，如果我尝试解开它：

```
load = pickle.loads(save) 
```

我得到错误

```
AttributeError: 'module' object has no attribute 'myClass' 
```

我认为这不起作用，因为 python 不知道在哪里可以找到 myClass 以重建对象。但是 myClass 确实存在于 NS 字典中。有没有办法告诉泡菜在哪里可以找到它正在加载的对象的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:17:18.920

您实际上可以更进一步，让对象将自身重构为您想要的任何类型。

```
import pickle
import copy_reg

class myClass(object):
    def __init__(self):
        self.apple = 'banana'

class otherclass(object):
    def __init__(self):
        self.apple = 'existential woe'

def pickle_an_object(o):
    print "pickling %s" % str(o)
    return otherclass, (o.apple,)

copy_reg.pickle(myClass, pickle_an_object)

foo = myClass()

s = pickle.dumps(foo)

del myClass
del otherclass

class otherclass(object):
    def __init__(self, appletype):
        self.apple = 'not %s' % appletype

o2 = pickle.loads(s)

print o2.apple 
```

基本思想是将您的类打包成某种“特洛伊木马”，其中它的重建会导致与原来的不同类的实例化。

酸洗面的内容*无关紧要*。`otherclass`重要的是它与“目标”类存在于相同的模块路径中 -`pickle`只是将模块名称的字符串表示形式放入序列化流中。

因此，要详细分解上述代码中发生的事情：

*   我们为`myClass`. 这可以通过`copy_reg`或`__reduce_ex__`函数来完成。
*   我们的自定义pickler 说“pickle this as an instance of `otherclass`”（这是一个虚拟的。你**不需要**在pickle 方面的“真实”内容`otherclass`，因为进入pickle 的只是模块/类名）。
*   我们腌制对象并“通过电线发送”到真实版本`otherclass`存在的地方。
*   在远程端，`otherclass`使用自定义酸洗函数返回的元组中的数据进行实例化。

Python可以非常强大！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T20:12:46.107

我发现了一个解决方案。似乎问题是在 dict 中执行代码会阻止 python 找出类的定义位置。解决方案是创建一个空模块，执行模块中的代码，然后将模块添加到 sys.modules 以便 python 知道它。

```
script = """
class myClass:
    def __init__(self):
        self.name = 'apple'
        self.color = 'green'
"""

import imp, sys

moduleName = 'custom'

module = imp.new_module(moduleName)

exec script in module.__dict__

sys.modules[moduleName] = module 
```

现在可以腌制和取消腌制类的实例：

```
import pickle
a = module.myClass()
s = pickle.dumps(a)
b = pickle.loads(s) 
```

# zend-framework - HtmlTag 装饰器上的 Zend_Form_Element 条件类（错误时）

> ID：14238841
> 
> 赞同：1
> 
> 时间：2013-01-09T15:37:00.803
> 
> 标签：zend-framework, zend-form, zend-form-element, zend-decorators

在我使用 Zend Framework 构建的一个 Web 项目中，我有一个具有以下结构的表单：

```
<form>
  <fieldset>
    <h2>Header</h2>
    <ul>
      <li>
        <label />
        <div>
          <input />
          <small>Helptext</small>
        </div>
      </li>
      <li class="error"> <!-- This one has errors -->
        <label />
        <div>
          <input />
          <ul class="errors">
            <li>Error message</li>
          </ul>
          <small>Helptext</small>
        </div>
      </li>
    </ul>
  </fieldset>
</form> 
```

我可以使用 Zend 框架的标准装饰器来构建这个结构，除了一件事。我需要能够在`error`具有验证错误等的元素的 li 上添加类。我使用以下验证器：

*   视图助手
*   错误
*   html标签 ( `'tag' => 'small', 'placement' => 'append'`)
*   html标签 ( `'tag' => 'div'`)
*   标签
*   html标签 ( `'tag' => 'li'`)

默认验证器被禁用。（我`$element->setDecorators()`在`init()`扩展 Zend_Form 的自定义表单类的方法中使用。）所以我的问题归结为当元素上有任何验证错误时将类“错误”添加到最后一个装饰器。

有人知道这样做的方便方法吗？我想我可以覆盖元素的默认渲染方法以检查是否存在任何验证错误，然后将类选项添加到命名装饰器，但这并不是很优雅。我想知道是否有一些标准化的方法可以做到这一点......顺便说一下，我正在使用 Zend Framework 1.11。

干杯，埃里克

Tl;博士：

当出现验证错误时，如何在 Zend_Form_Element 上的 HtmlTag 装饰器中添加类选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:48:42.743

当您只需要几个元素的错误类时，您可以简单地使用类属性的回调。这将类似于以下内容：

```
$form->addElement('text', 'test', array(
    'decorators' => array(
        'ViewHelper',
        array(
            'HtmlTag',
            array(
                'tag' => 'li',
                'class' => array(
                    'callback' => function($decorator) {
                        if($decorator->getElement()->hasErrors()) {
                            return 'error';
                        }
                    }
                )
            )
        )
    )
)); 
```

如果您使用 PHP5.2 或更早版本，则需要将闭包替换为基于数组的回调（例如`array($this, 'getLiClassAttribute')`）

如果您想对所有元素使用错误类，最好编写自定义装饰器。

# redis - 如何使用 Redis 作为 Ember 数据存储的持久性？

> ID：14238842
> 
> 赞同：2
> 
> 时间：2013-01-09T15:37:05.003
> 
> 标签：redis, ember-data

如何使用 redis 作为 ember-data 数据存储的后端？看起来我可能需要一个自定义适配器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T18:27:24.417

由于 Ember 是一个客户端框架，我会说你需要两个适配器（服务器端和客户端）。

事实上，Redis 并非旨在通过非安全网络直接访问。因此，如果您的客户端在浏览器中运行，那么您绝对需要在客户端和 Redis 之间建立一个服务器端中间层。

一种可能性是将[Webdis](http://webd.is/)包用作服务器端适配器，然后调整 Ember 数据中提供的 JSON/REST[客户端适配器](https://github.com/emberjs/data/tree/master/packages/ember-data/lib/adapters)以符合 Webdis 类 REST 协议。

# c# - 使用c#从outlook中检索特定于用户的任务

> ID：14238844
> 
> 赞同：6
> 
> 时间：2013-01-09T15:37:07.303
> 
> 标签：c#, asp.net, outlook, office-interop

我正在使用下面的代码从`Outlook 2007`.

```
 public class c_tasks : IDisposable
    {
        private Microsoft.Office.Interop.Outlook.Application objOutlook = null;
        private Microsoft.Office.Interop.Outlook.NameSpace objNamespace = null;
        private Microsoft.Office.Interop.Outlook.MAPIFolder objFolder = null;
        private string strType; // this is type "Tasks"
        private int iItemCounter;

        public c_tasks()
        {
            objOutlook = new Microsoft.Office.Interop.Outlook.ApplicationClass();
            objNamespace = objOutlook.GetNamespace("MAPI");
            strType = "Tasks";
        }

        public void Dispose()
        {
            if (objOutlook != null) objOutlook.Quit();
        }

        public void iGetAllTaskItems()
        {
            int iReturn = 0;
            Microsoft.Office.Interop.Outlook.TaskItem item;

            try
            {
                objFolder = objNamespace.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderTasks);
                item = (Microsoft.Office.Interop.Outlook.TaskItem)objFolder.Items[1];
                for (int ii = 2; ii <= objFolder.Items.Count; ii++)
                {
                    string sub = item.Subject;
                    string own = item.Owner;
                }
            }
            catch (System.Exception e)
            {

            }
            return iReturn;
        }
    } 
```

它工作正常，我得到了结果。但假设我有`2 Users`Outlook 数据。如何检索特定用户的特定任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-08T09:13:33.143

1.  绑定使用 =`using Outlook = Microsoft.Office.Interop.Outlook;`
2.  创建列表 =`public static List<Outlook.TaskItem> Aufgaben = new List<Outlook.TaskItem>();`
3.  拿我的代码

    ```
     Outlook.MAPIFolder task = Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderTasks);
        foreach (Outlook.TaskItem task2 in task.Items)
        {
            //MessageBox.Show(task2.ConversationTopic);
            Aufgaben.Add(task2);
        } 
    ```

4.  开心点 :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:39:08.393

您的程序将在某些用户的凭据下运行。当您调用 GetDefaultFolder 时，它会检索该用户的任务。

为了检索其他用户的任务，您必须调用[GetSharedDefaultFolder](http://msdn.microsoft.com/en-us/library/office/ff869575.aspx)，并且当前用户必须有权打开该共享文件夹。请注意 GetSharedDefaultFolder 链接的备注部分，您无法使用该方法访问一些特殊文件夹。

# smartcard - JavaCard：applet 的实例如何在另一个实例的上下文中调用方法？

> ID：14238849
> 
> 赞同：3
> 
> 时间：2013-01-09T15:37:18.440
> 
> 标签：smartcard, javacard

考虑一个具有多个实例的 Java Card Classic 小程序，这些实例需要共享 byte[] 变量中的一些数据（例如持久可变，即 EEPROM/Flash），其中包含所有实例共有的信息。

一个静态的 byte[] 变量将是一个完美的选择，但这些恰好被强加给我的验证规则所禁止（我被告知：作为一种全面的方式来证明取消实例化实例会释放它在实例化时分配的内容）。

如果从属实例可以在主实例的上下文中调用小程序的方法之一（可能最初由 AID 标识，或/和/然后以某种其他方式），这将得到解决。如何才能做到这一点？有什么例子吗？

* * *

更新：[this other question](https://stackoverflow.com/q/12394579/903600) ~~中的代码旁边是做我想要的~~共享对象，但似乎没有在另一个实例的上下文中*调用*方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:36:10.070

正如承诺的那样，一个经过测试的示例：

```
package nl.owlstead.javacard.sharedarray;

import javacard.framework.*;

/**
 * The master and slave AID should only differ in the last byte; the master should end with the 'm' ASCII character.
 * This applet is for demonstration purposes only.
 * 
 * @author owlstead@stackoverflow
 */
public class SharingApplet extends Applet {

    public interface SharedArray extends Shareable {
        public byte[] getSharedArray();
    }

    public static class SharedArrayImpl implements SharedArray {
        private byte[] sharedArray;

        public SharedArrayImpl(final byte[] arrayToShare) {
            this.sharedArray = arrayToShare;
        }

        public byte[] getSharedArray() {
            return sharedArray;
        }
    }

    private static final short MAX_AID_SIZE = 16;
    private static final short START = 0;
    private static final byte SHARABLE_PARAM = 0;
    private static final byte PARAM_SHARED_ARRAY = 0;

    public static void install(byte[] bArray, short bOffset, byte bLength) {
        final byte aidLength = bArray[bOffset++];
        final byte lastAIDByte = bArray[(short) (bOffset + aidLength - 1)];
        final boolean isMaster = lastAIDByte == 'm';
        final SharingApplet applet = new SharingApplet(isMaster);
        applet.register(bArray, bOffset, aidLength);
        applet.setMasterAID();
    }

    // if null, it is not the master
    private final SharedArray sharedArray;
    private AID masterAID;

    public SharingApplet(final boolean isMaster) {
        if (isMaster) {
            final byte[] sa = new byte[] { 'm' };
            sharedArray = new SharedArrayImpl(sa);
        } else {
            sharedArray = null;
        }
    }

    public void process(APDU apdu) {
        if (selectingApplet()) {
            return;
        }

        byte[] buf = apdu.getBuffer();
        switch (buf[ISO7816.OFFSET_INS]) {
        case (byte) 0x00: {
            final SharedArray theSharedArray;
            if (sharedArray == null) {
                theSharedArray = (SharedArray) JCSystem.getAppletShareableInterfaceObject(masterAID, SHARABLE_PARAM);
            } else {
                theSharedArray = sharedArray;
            }
            final byte[] sa = theSharedArray.getSharedArray();
            Util.arrayCopy(sa, START, buf, START, (short) sa.length);
            apdu.setOutgoingAndSend(START, (short) sa.length);
            break;
        }
        case (byte) 0x02: {
            final SharedArray theSharedArray;
            if (sharedArray == null) {
                theSharedArray = (SharedArray) JCSystem.getAppletShareableInterfaceObject(masterAID, SHARABLE_PARAM);
                final byte[] sa = theSharedArray.getSharedArray();
                sa[START] = 's';
            } else {
                theSharedArray = sharedArray;
                final byte[] sa = theSharedArray.getSharedArray();
                sa[START] = 'm';
            }
            break;
        }
        default:
            ISOException.throwIt(ISO7816.SW_INS_NOT_SUPPORTED);
        }
    }

    private void setMasterAID() {
        final byte[] workspace = new byte[MAX_AID_SIZE];
        final AID slaveOrMasterAID = JCSystem.getAID();
        final byte aidLength = slaveOrMasterAID.getBytes(workspace, START);
        workspace[(short) (aidLength - 1)] = 'm';
        this.masterAID = new AID(workspace, START, aidLength);
    }

    public Shareable getShareableInterfaceObject(AID clientAID, byte parameter) {
        if (sharedArray == null || parameter != PARAM_SHARED_ARRAY) {
            return null;
        }
        return sharedArray;
    }
} 
```

# java - Hibernate SqlFragment 内存泄漏？

> ID：14238855
> 
> 赞同：5
> 
> 时间：2013-01-09T15:37:28.980
> 
> 标签：java, spring, hibernate, garbage-collection

我在 Tomcat 服务器上部署了一个简单的 webapp。webapp 是一个 REST web 服务，每个 web 资源从 MySQL 数据库加载数据并返回一个 XML 或 JSON 文档。我使用以下框架堆栈：Jersey (1.14) + Spring (3.1) + Hibernate (4.1) + EHCache (2.5.1)。

我用 jMeter 测试了 webapp：我启动了 5 个线程来请求 web 资源。几分钟后，堆开始慢慢填满，达到 99%，最后返回 OOM 异常。我不知道这是否是内存泄漏，但是当我*`org.hibernate.hql.internal.ast.tree.SqlFragment`*在内存堆中看到大量对象时？！

```
/usr/java/jdk/bin/jmap -histo:live 17047 > /tmp/histo.txt

 num     #instances         #bytes  class name
----------------------------------------------
   1:        720143       69133728  org.hibernate.hql.internal.ast.tree.SqlFragment
   2:        510537       63559320  [C
   3:        360221       34581216  org.hibernate.hql.internal.ast.tree.BinaryLogicOperatorNode
   4:        704652       33823296  java.util.HashMap$Entry
   5:        360223       31699624  org.hibernate.hql.internal.ast.tree.SqlNode
   6:        697354       27894160  java.lang.String
   7:        370975       26710200  org.hibernate.hql.internal.ast.tree.Node
   8:        171241       25623320  <constMethodKlass>
   9:        208125       24948176  [Ljava.lang.Object;
  10:        171241       20568632  <methodKlass>
  11:         16012       17827384  <constantPoolKlass>
  12:        383070       16623136  [I
  13:         34829       15170176  [Ljava.util.HashMap$Entry;
  14:        226869       12885896  <symbolKlass>
  15:         16012       12590168  <instanceKlassKlass> 
```

这是我的 jvm 选项：

```
JAVA_OPTS="-Xms1g -Xmx1g -XX:MaxPermSize=512m -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:CMSInitiatingOccupancyFraction=30" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:17:03.920

我将我的 jvm 从 1.6 update 21 更新到 1.6 update 38 并且泄漏似乎已修复。现在我在压力期间只有 17 个 SQLFragment 实例。

```
/usr/java/jdk/bin/jmap -histo:live 5612 | grep org.hibernate.hql.internal.ast.tree.SqlFragment
 912:            17            952  org.hibernate.hql.internal.ast.tree.SqlFragment
/usr/java/jdk/bin/jmap -histo:live 5612 | grep org.hibernate.hql.internal.ast.tree.SqlFragment
 910:            17            952  org.hibernate.hql.internal.ast.tree.SqlFragment
/usr/java/jdk/bin/jmap -histo:live 5612 | grep org.hibernate.hql.internal.ast.tree.SqlFragment
 980:            17            952  org.hibernate.hql.internal.ast.tree.SqlFragment 
```

## **注意：JDK 更新没有解决问题！！**

我用 jmeter 测试了我所有的 REST 资源，以确定哪些资源泄漏。我找到了 1 个资源，现在我可以用 jmeter 在不到 30 秒的时间内填充所有内存堆。我发现了创建大量 SqlFragment 的 HQL 查询：

```
String q = "select p from PhysicalItem p where p.product.id=:itemid and p.fileType in (:filetypes) order by p.id desc";
return sessionFactory.getCurrentSession().createQuery(q).setParameter("itemid", logicalItemID).setParameterList("filetypes", fileTypes).list(); 
```

这里是刚启动 Tomcat 后的 SqlFragment 的数量。

```
jmap -histo:live 27472 | grep -i SqlFragment
 608:            15            840  org.hibernate.hql.internal.ast.tree.SqlFragment 
```

以及 1 个 http 请求 + 一个完整垃圾后的 SqlFragment 数量

```
jmap -histo:live 27472 | grep -i SqlFragment
 503:            37           2072  org.hibernate.hql.internal.ast.tree.SqlFragment 
```

为了快速解决这个问题，我将 HQL 请求重写为 SQL：

```
String sql = "select p.* from physical_item p where p.id_logical = :itemid and p.file_type in (:filetypes) order by p.id desc";
            List<String> names = new ArrayList<String>();
            for (FileType fileType : fileTypes) {
                names.add(fileType.getName());
            }
            return sessionFactory.getCurrentSession()
                                .createSQLQuery(sql)
                                .addEntity(PhysicalItem.class)
                                .setParameter("itemid", logicalItemID)
                                .setParameterList("filetypes", names)
                                .list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:56:28.500

直方图是一个好的开始，现在您知道要寻找什么了。

接下来，收集堆转储并查看`SqlFragment`实例的来源。分析`Eclipse MAT`- 这可能会向您显示代码作为“问题嫌疑人”，您可以从那里开始 - 分析这些类的输入/输出引用。还要检查终结器。

此外，jProfiler 快照可以告诉您谁在分配`SqlFragment`- 这将向您显示谁负责该分配 - 无论是您的代码还是休眠。

此外，我还建议在 OOM 异常之前收集线程转储，以便您了解系统中发生的情况。

# javascript - 在 2 个 jquery 同位素实例之间切换

> ID：14238859
> 
> 赞同：0
> 
> 时间：2013-01-09T15:37:33.130
> 
> 标签：javascript, jquery, jquery-isotope

我有 2 个 jquery-isotope 实例，它们可以在彼此之间“交换”元素。这可行，但由于某种原因，我在 jquery-isotopes 之间得到了空格。有人知道我如何删除这些空格，以便同位素的排列正确。我做了一个 jsfiddle：http: [//jsfiddle.net/XEYds/](http://jsfiddle.net/XEYds/)

干杯!

```
var $container = $('#product-masonry');
var $trash = $('#trash-masonry');

$container.isotope({
    itemSelector: '.item',
});
$trash.isotope({
    itemSelector: '.item',
});

// remove item if clicked

  $container.delegate( '.remove', 'click', function(){
  var remove_id = $(this).data('item');
  $trash.isotope( 'insert',$('#' + remove_id) );
  });
  $trash.delegate( '.remove', 'click', function(){
  var remove_id = $(this).data('item');
  $container.isotope( 'insert',$('#' + remove_id) );
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:49:01.797

我在 jquery isotope 插件中创建了 2 个新功能：

```
throwaway : function( $content, callback ) {
  // remove elements immediately from Isotope instance
  this.$allAtoms = this.$allAtoms.not( $content );
  this.$filteredAtoms = this.$filteredAtoms.not( $content );
  // remove() as a callback, for after transition / animation
  var instance = this;
  var removeContent = function() {
    $('#trash-masonry').append( $content ).isotope( 'appended', $content );
    setTimeout(function(){ $('#trash-masonry').isotope() }, 400);
    setTimeout(function(){ $('#product-masonry').isotope() }, 400);
  };

  if ( $content.filter( ':not(.' + this.options.hiddenClass + ')' ).length ) {
    // if any non-hidden content needs to be removed
    this.styleQueue.push({ $el: $content, style: this.options.hiddenStyle });
    this._sort();
    this.reLayout( removeContent );
  } else {
    // remove it now
    removeContent();
  }

},    

putback : function( $content, callback ) {
  // remove elements immediately from Isotope instance
  this.$allAtoms = this.$allAtoms.not( $content );
  this.$filteredAtoms = this.$filteredAtoms.not( $content );
  // remove() as a callback, for after transition / animation
  var instance = this;
  var removeContent = function() {
    $('#product-masonry').append( $content ).isotope( 'appended', $content );
    setTimeout(function(){ $('#trash-masonry').isotope() }, 400);
    setTimeout(function(){ $('#product-masonry').isotope() }, 400);
  };

  if ( $content.filter( ':not(.' + this.options.hiddenClass + ')' ).length ) {
    // if any non-hidden content needs to be removed
    this.styleQueue.push({ $el: $content, style: this.options.hiddenStyle });
    this._sort();
    this.reLayout( removeContent );
  } else {
    // remove it now
    removeContent();
  }

}, 
```

和

```
$container.delegate( '.remove', 'click', function(){
    var remove_id = $(this).data('item');
    $container.isotope( 'throwaway',$('#' + remove_id) );
});
$trash.delegate( '.remove', 'click', function(){
    var remove_id = $(this).data('item');
    $trash.isotope( 'putback',$('#' + remove_id) );
}); 
```

奇迹般有效 ：）

# ios - 顶部的 UITableViewCell 自定义视图

> ID：14238860
> 
> 赞同：0
> 
> 时间：2013-01-09T15:37:33.123
> 
> 标签：ios, uitableview

我想在`UIView`我的`UITableviewCell`.

我`UITableview`的风格是分组的，问题是我`UIView`的不是圆形的，`UITableviewCell`也没有剪裁这个视图。

这是`awakeFromNib`for的代码`CustomCell`

```
-(void) awakeFromNib
{
    self.clipsToBounds=YES;
    self.headerView.layer.masksToBounds=YES;
} 
```

这是我想要达到的最终结果 ![更新](../Images/51d7dcc291b4f5bb2a6dc3547251ee45.png)

我得到的结果 ![我得到的结果](../Images/4ac835262a7939bdfdda34a7a9e06543.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:03:03.500

编辑：这可能是问题，因为 clipToBounds 无法在 backgroudView 或 contentView 上工作： [https ://stackoverflow.com/a/919408/480415](https://stackoverflow.com/a/919408/480415)

> 我相信 Grouped 样式的圆角实际上是表格单元格的背景。因此，您不能只替换白色部分，因为它不是带有绘制边框的纯色 - 它是 ImageView 作为单元格的背景视图（根据单元格行和部分中的行数使用不同的图形）。

如果是这种情况，您可能已经使用 Core Graphics 并根据自己的喜好自定义单元格。[这是 Ray Wenderlich 的一个很好的教程](http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients)

* * *

我会尝试几件事：

首先..看看这是否有任何影响：

```
self.backgroundView.clipsToBounds = YES; 
```

和

```
self.contentView.clipsToBounds = YES; 
```

如果没有，我会尝试舍入 headerView

```
self.headerView.layer.cornerRadius = 5; //try different ints here 
```

# javascript - 如何在 Safari 中安装扩展后访问 DOM

> ID：14238861
> 
> 赞同：2
> 
> 时间：2013-01-09T15:37:33.080
> 
> 标签：javascript, dom, safari, safari-extension

完成安装 Safari 扩展后是否可以访问 DOM？我有兴趣访问正在安装此扩展程序的页面的 HTML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:00:07.413

您可以通过注入 JS 脚本来实现这一点。注入的脚本可以访问它们被注入的网页的 DOM。注入的脚本与从网页主机执行的脚本具有相同的访问权限。

[您可以在此处](http://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/InjectingScripts/InjectingScripts.html)找到更多信息。

**从注入的脚本调用函数**

1.  项目清单
2.  使用 Extension Builder 创建一个扩展文件夹。复制
3.  列表进入文本编辑器并保存为 Injected.js 和 Global.html。
4.  将 Injected.js 和 Global.html 拖到您的扩展文件夹中。点击
5.  Extension Builder 中的 Extension Global Page 并选择 Global.html。
6.  单击 End Scripts 中的 New Script 并选择 Injected.js。设置
7.  将网站访问级别扩展到所有。单击安装。

**代码**注入.js

```
var initialVal=1;
var calculatedVal=0 ;

function doBigCalc(theData) {
    safari.self.tab.dispatchMessage("calcThis",theData);
}

function getAnswer(theMessageEvent) {
    if (theMessageEvent.name === "theAnswer") {
        calculatedVal=theMessageEvent.message;
        console.log(calculatedVal);
    }
}
safari.self.addEventListener("message", getAnswer, false);

doBigCalc(initialVal); 
```

**代码**Global.html

```
<!DOCTYPE HTML>
<html>
<head>
<title>global HTML page</title>
<script type="text/javascript">

function bigCalc(startVal, event) {
    // imagine hundreds of lines of code here...
    var endVal = startVal + 2;
    // return to sender
    event.target.page.dispatchMessage("theAnswer", endVal);
}

function respondToMessage(theMessageEvent) {
    if(theMessageEvent.name === "calcThis") {
        var startVal=theMessageEvent.message;
        bigCalc(startVal, theMessageEvent);
    }
}

    safari.application.addEventListener("message",respondToMessage,false);
</script>
</head>
<body>
</body>
</html> 
```

# css - 按钮内任意宽度的右对齐图标

> ID：14238863
> 
> 赞同：7
> 
> 时间：2013-01-09T15:37:46.890
> 
> 标签：css, icons, css-float

这应该很简单，但我在获得强大的解决方案时遇到了问题。基本上我正在努力实现这一目标：

![按钮示例](../Images/4c9273497e7a3983ecee25e5bc469941.png)

因此，一个带有图标右对齐的元素（`a`或），使用图标字体。`button`我需要确保：

1.  按钮可以是任意宽度
2.  没有图标，按钮上没有多余的填充
3.  文本和图标始终保持在同一行（不要换行）

这是HTML：

```
<button class="btn">Download <span data-icon="+"></span></button> 
```

和（S）CSS：

```
.btn {
    margin: 0;
    padding: 3px 6px;
    vertical-align: middle;
    border: none;
    background-color: #535B99;
    color: white;
    text-align: left;
    text-decoration: none;
    white-space: nowrap;
    cursor: pointer;
    text-transform: uppercase;
    [data-icon] {
        float: right;
        padding-left: 10px;
        &:before { content: attr(data-icon); }
    }
} 
```

您可以在[jsFiddle](http://jsfiddle.net/cherryflavourpez/GyA8F/)中看到这一点。问题是，除非我为类添加宽度，否则`.btn`图标总是会掉线。绝对定位会起作用，但是我无法满足上面的（2），因为它需要一些填充。我错过了什么？

**编辑**

我错过了另一个标准：

4.) 在 100% 宽度时，图标向右对齐（不在文本旁边）

所以在某些情况下，它看起来像：

![100% 宽度版本](../Images/57a044c0b87d15cec5d7eb7e80325ff1.png)

这就是为什么`float`在我的 CSS 中是必要的。

**解决方案**

几乎完全基于@Riskbreaker 的解决方案，[这](http://jsfiddle.net/cherryflavourpez/R3V3E/)就是我所决定的：

```
<button data-button-icon="+" class="btn" href="#">Click Me :P</button>

.btn {
    display: inline-block;
    margin: 0 0 10px 0;
    padding: 3px 6px;
    border: medium none;
    background-color: #535B99;
    color: #FFFFFF;
    cursor: pointer;
    text-align: left;    
    text-decoration: none;
    white-space: nowrap;
    &:after {
      content: attr(data-button-icon);
      float: right;
      padding-left: 1em;
    }
} 
```

基本上，放弃分离`span`并仅使用`button`元素，这具有减少无关标记的好处。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T15:57:24.510

只需**float:right 就可以**了`[data-icon]`

[**演示**](http://jsfiddle.net/Riskbreaker/GyA8F/4/)

如果您需要指定宽度（像素或百分比），那么是的，您确实需要**float: 对**，因此您需要一个内部 div 来控制两者：

```
<div>Create Advert HELLO YOU ALL <span aria-hidden="true" data-icon="+"></span></div> 
```

[**带有浮动的演示：对**](http://jsfiddle.net/Riskbreaker/GyA8F/28/)

如您所见，我添加了 width: 300px 和 width: 100% 的作品，但这是更手动的......这明显更手动（意味着特定于你的按钮）......但它有效。

所以要么*没有宽度/没有浮动：*需要右或*添加宽度/浮动：*需要。

==================================================== ============================== 好的，所以你的困境是***你不想处理尺寸***，我没有使用你的方法，但根本不使用跨度...这是我的最后一个建议：

**[http://jsfiddle.net/Riskbreaker/st3m2/1/](http://jsfiddle.net/Riskbreaker/st3m2/1/)**

您在这里看到的是**:before 或 :after**（*只要您有正确的填充和浮动方法*就可以了）方法是获得此解决方案的最佳方法，我的课程添加了内容：加号。删除“添加”类将使按钮看起来正确，添加 100% 将始终具有正确的图标 :)

# android - 将 EditText 限制为带符号的十进制数

> ID：14238866
> 
> 赞同：3
> 
> 时间：2013-01-09T15:38:01.270
> 
> 标签：android, android-widget

我正在编写必须向用户显示动态创建的 EditText 小部件表的应用程序。

我当前的代码：

```
 /**
      * Create and display the table of EditTexts on the screen
      * @param x Number of columns
      * @param y Number of rows
      */
        private void createTable(int x, int y) {
            TableLayout table = (TableLayout) findViewById(R.id.TableLayout01);
            etGrid = new EditText[y][x];
            for (int i = 0; i < y; i++) {
                TableRow row = new TableRow(this);
                for (int j = 0; j < x; j++) {
                    EditText et = new EditText(this);

                    et.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL 
                              | InputType.TYPE_NUMBER_FLAG_SIGNED);

                    et.setSingleLine();
                    et.setMinimumWidth(getWindowManager().getDefaultDisplay().getWidth()/x);
                    etGrid[i][j] = et;
                    row.addView(et);
                }
                table.addView(row,new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            }

        } 
```

问题出在这一行，它根本不起作用：

```
et.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL 
                                  | InputType.TYPE_NUMBER_FLAG_SIGNED); 
```

在我的 Kindle Fire 上，我可以限制为带有`InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL`或带符号的十进制值`InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_SIGNED`，但不能限制为带符号的十进制。代码有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-21T08:44:06.360

在其他选项之前*始终*拥有非常重要： ，否则键盘将不是数字！`InputType.TYPE_CLASS_NUMBER``InputType.TYPE_NUMBER_FLAG_SIGNED | InputType.TYPE_NUMBER_FLAG_DECIMAL`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-09T16:06:23.227

尝试这个：

```
et.setRawInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_SIGNED | InputType.TYPE_NUMBER_FLAG_DECIMAL); 
```

参考：[setRawInputType](https://stackoverflow.com/a/6919416/556975)

**编辑：**

我试过这个，它对我有用。

只要确定这一点：

**您必须**`android:inputType`从文件的编辑文本中删除此属性。否则不会反映更改。`et` **`xml layout``setRawInputType`**

 **谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:44:14.593

事实证明，这确实是亚马逊安卓系统中的一个错误。由于我正在为自己编写应用程序，因此有一个非常适合我的解决方法：

1.  放`InputType.TYPE_CLASS_PHONE`
2.  实施自定义密钥过滤器以强制执行正确的格式。我用过[这个](https://stackoverflow.com/a/5208823/685948)。**

# android - Android：动态加载共享库

> ID：14238867
> 
> 赞同：2
> 
> 时间：2013-01-09T15:38:02.893
> 
> 标签：android, c, linux, android-ndk, shared-libraries

我有 2 个共享库：**lib1.so**和**lib2.so**。

**lib1.so包含一些在****lib2.so**中定义的函数。从 C 程序中，我使用以下调用加载**lib1.so ：**

```
dlopen( "lib1.so", RTLD_NOW ); 
```

这两个库都显示在当前目录中。我的程序可以在桌面 Linux（Ubuntu、Debian）下运行，但不能在 Android 下运行。在 Android 下 dlopen 返回一个错误并退出。我试图设置：

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:. 
```

但这无济于事。

我很困惑，为什么这段代码在 Android 下不起作用。我在 Android 的动态链接器上找不到任何好的文档。所以，我没有解释为什么它不起作用。

细节：

1.  带有 Linux 内核 2.6.35 armv7l 的 Android
2.  objdump 显示 lib1.so 需要 libc.so 和 lib2.so
3.  objdump 显示 lib2.so 只需要 libc.so

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:42:26.653

行。我刚刚找到了解决方案。将 -lgcc 添加到 lib1.so 的链接器选项已解决该问题。看起来编译器已经自动生成了一些对来自 libgcc 的特殊内置函数的调用。它还需要 -lc，因为编译器还会自动生成对 memcpy 的特殊调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:32:54.350

如果`dlopen`由于某种原因无法正常工作，您是否尝试过打电话`dlerror`找出真正的问题是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:07:17.427

我不太确定你的项目。但我认为，最好使用 System.loadLibrary 从服务中加载库）。

System.loadLibrary(lib.so); 在您的情况下，首先加载 lib2.so，然后仅加载 lib1.so

# c# - 在 Crystal Reports 2011 中找不到新版本的 ReportDocument 类

> ID：14238869
> 
> 赞同：0
> 
> 时间：2013-01-09T15:38:03.100
> 
> 标签：c#, crystal-reports

我的任务是将 VB6 应用程序转换为 DotNet。这个应用程序基本上使用位于应用程序引用的 Crystal Reports ActiveX 运行时库中的 Report 对象（类）加载几个 Crystal Reports v8.5 (.rpt) 文件。该应用程序循环浏览 .rpt 报告，将它们加载到内存中，更改数据源，并将它们作为 PDF 文件导出到另一个文件夹中，每周一次。

现在我们需要将此应用程序转换为 C# 并使用 Crystal Reports 2011 (v14.0)。我设法将定义文件 (.rpt) 转换为新版本格式。但是当我尝试编写 C# 代码来加载报表、更改数据源并将它们导出为 PDF 文件时，我了解到为了使用 ReportDocument 类，我仍然需要引用旧的 CrystalDecisions.CrystalReports.Engine。 dll。

但新版 Crystal Reports (2011) 不附带此 DLL。我不得不从以前的安装中挖掘这个文件。我想知道 ReportDocument 类是否在我需要在我的 C# 应用程序中引用的另一个较新的 DLL 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:56:35.170

首先，当您在安装 Visual Studio 之后在计算机上安装 Crystal Reports 时，它会识别出您已安装 VS.NET 并安装相应的开发人员 DLL。如果这没有发生，请尝试重新安装。

其次，您可以安装CR的开发者版本，但它不如CR 2011单独附带的版本完整。但它与 CR 2011 兼容，并且可以与 VS.NET 一起使用，而无需在您的计算机上安装 CR 2011。这是一个链接：

[https://www.sap.com/campaign/ne/free_trial/crystal_reports_visual_studio/index.epx?url_id=reg-us-crvs&kNtBzmUK9zU=1](https://www.sap.com/campaign/ne/free_trial/crystal_reports_visual_studio/index.epx?url_id=reg-us-crvs&kNtBzmUK9zU=1)

这是另一个链接，它比我更详细地解释了这一点。单击适合您项目的网格单元格。 [http://scn.sap.com/docs/DOC-25513](http://scn.sap.com/docs/DOC-25513)

# objective-c - Cocoa，objective-c如何调整png图像的大小？

> ID：14238870
> 
> 赞同：5
> 
> 时间：2013-01-09T15:38:12.967
> 
> 标签：objective-c, cocoa, nsimage

我是可可的新手，我想做的是调整 NSImage 的大小，但看起来我做错了什么，因为我的图像没有调整大小。我查看了其他问题，这种方法看起来应该可行：

```
- (void)scaleIcons:(NSString *)outputPath{
NSImage *anImage;
NSSize imageSize;
NSString *finalPath;

anImage = [self image];

imageSize = [anImage size];
imageSize.width = 512;
imageSize.height = 512;
[anImage setSize:imageSize];

finalPath = [outputPath stringByAppendingString:@"/icon_512x512.png"];

NSData *imageData = [anImage TIFFRepresentation];
NSBitmapImageRep *rep = [NSBitmapImageRep imageRepWithData:imageData];
NSData *dataToWrite = [rep representationUsingType:NSPNGFileType properties:nil];
[dataToWrite writeToFile:finalPath atomically:NO];
} 
```

一切正常，除了我的图像没有被缩放。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T15:56:11.653

因此，您的代码片段省略了缩放/转换图像实际所需的操作。在尝试保存图像之前，通过这样的方法传递图像：

```
- (NSImage *)scaleImage:(NSImage *)image toSize:(NSSize)targetSize
{
  if ([image isValid])
  {
    NSSize imageSize = [image size];
    float width  = imageSize.width;
    float height = imageSize.height;
    float targetWidth  = targetSize.width;
    float targetHeight = targetSize.height;
    float scaleFactor  = 0.0;
    float scaledWidth  = targetWidth;
    float scaledHeight = targetHeight;

    NSPoint thumbnailPoint = NSZeroPoint;

    if (!NSEqualSizes(imageSize, targetSize))
    {
      float widthFactor  = targetWidth / width;
      float heightFactor = targetHeight / height;

      if (widthFactor < heightFactor)
      {
        scaleFactor = widthFactor;
      }
      else
      {
        scaleFactor = heightFactor;
      }

      scaledWidth  = width  * scaleFactor;
      scaledHeight = height * scaleFactor;

      if (widthFactor < heightFactor)
      {
        thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5;
      }

      else if (widthFactor > heightFactor)
      {
        thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
      }

    NSImage *newImage = [[NSImage alloc] initWithSize:targetSize];

    [newImage lockFocus];

     NSRect thumbnailRect;
     thumbnailRect.origin = thumbnailPoint;
     thumbnailRect.size.width = scaledWidth;
     thumbnailRect.size.height = scaledHeight;

     [image drawInRect:thumbnailRect
              fromRect:NSZeroRect
             operation:NSCompositeSourceOver
              fraction:1.0];

    [newImage unlockFocus];
  }

  return newImage;
} 
```

如果将其集成到现有方法中：

```
- (void)scaleIcons:(NSString *)outputPath{

    NSSize outputSize = NSMakeSize(512.0f,512.0f);
    NSImage *anImage  = [self scaleImage:[self image] toSize:outputSize];

    NSString *finalPath = [outputPath stringByAppendingString:@"/icon_512x512.png"];
    NSData *imageData = [anImage TIFFRepresentation];
    NSBitmapImageRep *rep = [NSBitmapImageRep imageRepWithData:imageData];
    NSData *dataToWrite = [rep representationUsingType:NSPNGFileType properties:nil];
   [dataToWrite writeToFile:finalPath atomically:NO];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-11T11:13:18.643

关于 Parag Bafna 的回答，调整大小应该是“resample”而不是“crop”：

```
sips --resampleHeightWidth 10 10 input.png --out output.png 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T09:57:57.400

您还可以使用`sips`（可编写脚本的图像处理系统）命令。

```
sips --cropToHeightWidth 10 10 input.png --out output.png 
```

# php - 如何向浏览器“提示”将动态图像保存到磁盘的文件名？

> ID：14238872
> 
> 赞同：3
> 
> 时间：2013-01-09T15:38:17.720
> 
> 标签：php, http

> **可能重复：**
> [如何将“另存为...”对话框中显示的文件名从 .php 更改为 .png](https://stackoverflow.com/questions/13181948/how-to-change-the-filename-displayed-in-the-save-as-dialog-from-php-to-pn)

我的 PHP 生成的 GUI 显示动态生成的 PNG 图像：

```
<img src="someScript.php?dataId=xyz&width=250&height=200" alt="Chart" /> 
```

根据`dataId`参数，图像内容是动态且唯一的：

```
<?php
header('Content-Type: image/png');
// output image based on $_GET['dataId']
?> 
```

但是当我的用户尝试在 IE、Firefox 或 Chrome 中右键单击并另存为时，建议的文件名是`someScript.php.png`. 这不是唯一的，也不是很有用。

**我如何向浏览器“提示”“另存为”文件名应该是什么？**

浏览器总是可以做他们喜欢的事情，但是 HTTP 设置的先例`Content-Disposition: attachment; filename=<filename>`对我来说意味着可能有某种方式来暗示文件名。这个 HTTP 标头本身是不合适的，因为我希望`Content-Disposition`保持[默认的`inline`](https://www.rfc-editor.org/rfc/rfc6266#section-4.2).

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T15:38:17.720

该`filename`论点[也](https://www.rfc-editor.org/rfc/rfc6266#section-4.3)支持[`Content-Disposition: inline`](https://stackoverflow.com/questions/1395151/content-dispositionwhat-are-the-differences-between-inline-and-attachment)：

> `[RFC6266]`: **4.3。处置参数：“文件名”**
> 
> 不区分大小写匹配的参数“filename”和“filename*”提供了有关如何构造用于存储消息有效负载的文件名的信息。
> 
> 根据处置类型，**可能会立即使用此信息**（在“附件”处置类型引起的“另存为...”交互中），或者**稍后（例如，当用户决定保存正在显示的当前页面）。**

所以：

```
<?php
$filename = "image_" . $_GET['dataId'] . ".png";

header("Content-Type: image/png");
header("Content-Disposition: inline; filename=\"{$filename}\"");

// output image based on $_GET['dataId']
?> 
```

# hbase - 如何使 hbase 尊重现有区域数据的 hregion.max.filesize

> ID：14238875
> 
> 赞同：1
> 
> 时间：2013-01-09T15:38:28.607
> 
> 标签：hbase

我正在使用 HBase 的默认配置。每个区域服务器都有很多区域。

我发现我可以配置区域的最大大小 - 例如不是 256MB，而是 4GB。所以我添加了以下配置并重新启动集群：

```
<property>
    <name>hbase.hregion.max.filesize</name>
    <value>4294967296</value>
</property> 
```

然后我执行了major_compaction - 但什么也没发生。

如何强制 HBase 合并 hfile 以尊重现有数据的此配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:39:22.873

压缩合并 StoreFiles，它不合并区域。

您可以使用以下方法手动合并现有区域：

```
$ bin/hbase org.apache.hbase.util.Merge <tablename> <region1> <region2> 
```

有一些可用的工具和补丁可以使隐式区域合并成为可能。

看看这里：[https ://issues.apache.org/jira/browse/HBASE-7846](https://issues.apache.org/jira/browse/HBASE-7846)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T00:52:33.493

这里有几件事，我认为您应该至少重新启动 Hmaster 以获取更改的值。我还设置了字节值，在你的情况下它应该是 4294967296 (4GB)。我认为在这些更改之后，Hbase 应该手动拆分大于指定 max.filesize 的区域。否则，您也可以手动执行major_compact 甚至拆分。

# .htaccess - .htaccess 正确阻止一个目录，另一个不正确。

> ID：14238876
> 
> 赞同：0
> 
> 时间：2013-01-09T15:38:29.293
> 
> 标签：.htaccess

我在我的根目录中使用这个 .htaccess 将所有内容重定向到 index.php

```
RewriteEngine On

RewriteRule !\.(mp3|js|ico|txt|gif|jpg|png|css)$ index.php 
```

然后在我的目录中 .htaccess 我用它来阻止直接访问

```
RewriteEngine On

deny from all 
```

然后让我的 html5 音频播放，我把这个 .htaccess 放在音频目录中

```
RewriteEngine On

deny from all

allow from index 
```

但是当我将相同的 .htaccess 文件放在我的 javascript 目录中时，我无法访问我的 js 文件。为什么它适用于音频目录而不适用于这个目录？

提前致谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:15:33.213

这是因为您正在从客户端计算机访问 javascript 文件。MP3 文件从服务器端加载，它允许这种方法。这就是为什么你会得到 403 禁止页面。尝试通过 HTTP_REFERER 拒绝它：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !\.(mp3|js|ico|txt|gif|jpg|png|css)$ [NC] 
RewriteCond %{HTTP_REFERER} !^$ 
RewriteRule . - [F] 
```

# sql-server - 基于同一表中的结果集在循环中更新表的问题

> ID：14238877
> 
> 赞同：1
> 
> 时间：2013-01-09T15:38:32.257
> 
> 标签：sql-server, tsql, dbi

考虑以下（半伪代码）：

```
CREATE TABLE foobar (
    id INT NOT NULL
    message VARCHAR(40) NOT NULL
)

INSERT INTO foobar (1, "hello");
INSERT INTO foobar (2, "world");

my $resultset = "SELECT * FROM foobar";
while(!$resultset->EOF) {
    "UPDATE foobar SET message='blah' WHERE id = ".$resultset->id;
    $resultset->moveNext;
} 
```

本质上，我试图从一个表中选择所有记录，然后循环遍历每一个更新几个字段。但是，当我这样做时，我收到以下错误：

[Microsoft][SQL Server Native Client 10.0][SQL Server]触发器返回了一个结果集和/或在另一个未完成的结果集处于活动状态时以 SET NOCOUNT OFF 运行。(SQL-42000) 在 Continuous.pl 第 493 行。

问题是我没有运行任何触发器。我认为这可能是因为我正在尝试更新活动结果集，所以我添加了将所有数据选择到临时表中的中间步骤，然后遍历临时表以更新原始表，但我仍然得到同样的错误。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:00:26.967

嗯，我觉得很愚蠢。我确实在桌子上有一个触发器，它确实将 nocount 设置为 on，但是，在触发器中设置 nocount on 之前，有一行代码仅在极少数情况下运行，而它恰好运行这个时间。修复触发器解决了我的问题。我应该多喝点咖啡。

我在循环而不是单个更新语句中执行此操作的原因是因为真正的查询非常复杂（格式很好，大约 100 行），并且正在更新的数据部分依赖于正在更新的行中的数据，以及数据库中的其他表。当然，我可能会使用一组巧妙的连接，但这是其中一种情况，因为它非常复杂，我更愿意稍后进行优化。

# c++ - 设计一个旋钮 - 径向分布线

> ID：14238878
> 
> 赞同：1
> 
> 时间：2013-01-09T15:38:34.083
> 
> 标签：c++, user-interface, geometry

假设我在 C++ 中有一个绘图函数来绘制这样的线条：

```
drawLine(float startX>, float startY, float endX, float endY); 
```

如下图所示在旋钮周围绘制径向分布线的公式是什么：

![在此处输入图像描述](../Images/49ee396249a7a6d4ffc6c3aed80d76ba.png)

好的，这段代码工作正常：

```
float length, x1, y1, x2, y2;
length = 40;
float radius = 80;
int sliderSteps = 8;
float rotaryStartAngle = radians(-110);
float rotaryEndAngle = radians(110);
float theta = rotaryStartAngle;
//distance between segments
float angleAmount = (rotaryEndAngle - rotaryStartAngle) / sliderSteps;

for(int i =0; i<=sliderSteps; i++){
x1 = width/2 + cos(theta)*radius;
y1 = height/2 + sin(theta)*radius;
x2 = x1+cos(theta)*length;
y2 = y1+sin(theta)*length;
theta += angleAmount;
line(x1, y1, x2, y2); 
} 
```

# html - 如果 tr 有类，则悬停整个 TR

> ID：14238886
> 
> 赞同：0
> 
> 时间：2013-01-09T15:39:00.747
> 
> 标签：html, css, html-table

我有两个类要分配给 TR，因为它们正在构建到我的数据表中。但是，当我悬停 TD 时，我无法让悬停以突出显示整个 TR 的方式运行。

附加的 jsfiddle 仅悬停在我目前卡住的 td 上。

```
.accessible :hover{
    background-color: rgb(206,246,206);
}
.inAccessible :hover{
    background-color: rgb(255,87,87);
} 
```

[http://jsfiddle.net/Y3JDd/](http://jsfiddle.net/Y3JDd/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:41:50.813

摆脱类和之间的空间`:hover`：

```
.accessible:hover{
    background-color: rgb(206,246,206);
}
.inAccessible:hover{
    background-color: rgb(255,87,87);
} 
```

# android - 从活动中运行 LG android 手机上的 quickmemo 功能或以编程方式同时按下两个音量键

> ID：14238891
> 
> 赞同：0
> 
> 时间：2013-01-09T15:39:16.490
> 
> 标签：android, events, key

我正在尝试创建一些应用程序来实现 LG 的 QuickMemo 功能（在我的例子中是 Optimus G）。

我可以为按钮创建一些侦听器来启动 QuickMemo 吗？我可以通过同时按音量增大和音量减小键来运行它，但是如何从我的活动中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:17:31.107

如果可能，您应该查看此应用程序清单文件并检查活动的`android:exported`价值并检查其意图过滤器。这将告诉您是否可以从另一个应用程序启动它。

这篇文章可能会帮助您 [如何从 APK 文件中查看 AndroidManifest.xml？](https://stackoverflow.com/questions/4191762/how-to-view-androidmanifest-xml-from-apk-file)

> 可以直接使用 aapt l -a name.apk 命令查看 manifest.xml。
> 
> 此链接可能对[http://elinux.org/Android_aapt有所帮助](http://elinux.org/Android_aapt)
> 
> （这也将转储资源表。）

# php - 使用 php 和 ajax 提交表单

> ID：14238894
> 
> 赞同：0
> 
> 时间：2013-01-09T15:39:25.687
> 
> 标签：php, javascript, html, ajax

我正在尝试将 ajax 添加到我的表单中，这样我就可以在不刷新的情况下提交表单，但是 php echo 命令不起作用。如果我取出 ajax，它可以正常工作，但会在提交时刷新。我认为这是一个试图让他们一起工作的案例。我现在只是在学习ajax，所以我对这一切都不太了解。请看看我哪里出错了

```
<script type="text/javascript"
 src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>   
<script type="text/javascript">
    $(function() {
        $('form').bind('submit', function(){
            $.ajax({
                type: "POST",
                url: "ajax.html",
                data: $("form").serialize(),
                success: function() {
                    alert("form was submitted");
                }
            });
            return false;
        });
    });
</script>

<?php
    if(isset($_POST['submit'])){
          $a=$_POST['a'];
          $b=$_POST['b'];

           echo $a.$b;
       }
?>

<html>
 <form method='POST'>
    first name:<input type="text" name="a">
    last name: <input type="text" name="b">
               <input type='submit' name='submit'>
  </form>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:40:57.643

查看它，您正在向“ajax.html”发送一个 ajax 请求，并且在“ajax.html”中有您的 php 标签，您需要将其重命名为“ajax.php”以允许 php 标签工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:42:27.593

您的成功函数只会触发包含静态文本的警报。

```
success: function() {
    alert("form was submitted");
} 
```

如果您想查看响应数据，您必须对其进行处理。

```
success: function(data) {
    alert(data);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:48:12.383

1.  将 .html 更改为 .php 否则它将不会被 php 解释器解析。当然，除非您已将 apache 配置为解析 .html 文件。
2.  您是否正在向上述页面发出 ajax 请求？您知道您将获得的不仅仅是 $a.$b 的回声，对吗？您也将收到返回的 html 部分。我建议创建另一个脚本并发布到该脚本，一个没有表单标签的脚本。
3.  在您的 ajax 请求中，您需要`console.log( data )`或`alert( data )`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T15:48:12.257

可能值得注意的是，您的 echo'd PHP 代码将不可见，因为 ajax 响应将获取该信息。这不是如何使用 ajax 的一个很好的例子，因为您没有显示 ajax 调用的结果。这样的事情会更有意义：

“ajax.php”PHP 文件：

```
<?php
    if(isset($_POST['submit']))
    {
       $a=$_POST['a'];
       $b=$_POST['b'];
       //Add user name to database here or something
       die($a." ".$b); //Prevents anything after this from being returned
    }
?>

<script type="text/javascript"
 src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>   
<script type="text/javascript">
    $(function() {
        $('form').bind('submit', function(){
            $.ajax({
                type: "POST",
                url: "ajax.php",
                data: $("form").serialize(),
                success: function(data) {
                    alert("Hello " + data);
                }
            });
            return false;
        });
    });
</script>

<html>
 <form method='POST'>
    first name:<input type="text" name="a">
    last name: <input type="text" name="b">
               <input type='submit' name='submit'>
  </form>
</html> 
```

# ios - iOS核心数据NSInternalInconsistencyException在第二个故事板视图中出错

> ID：14238896
> 
> 赞同：0
> 
> 时间：2013-01-09T15:39:26.740
> 
> 标签：ios, core-data, storyboard

我试图进入整个 CoreData 的事情。我开始使用原始示例，您在使用情节提要和 Coredata 开始一个干净的“Master-Detail-View”时获得。

1.  我编辑了核心数据模型并创建了第二个“表”。
2.  我复制了 MasterViewController 更改了 fetchedResultsController 中的@"Strings"

当我构建并运行时，应用程序在切换到修改后的 masterviewcontroller 时崩溃。原来的 masterviewcontroller 工作正常！

故事板中的数据源已链接。

附加信息：“NSInternalInconsistencyException”，原因：“+entityForName：找不到实体名称“RaumType”的 NSManagedObjectModel

# javascript - JS动画缩放背景图像

> ID：14238897
> 
> 赞同：0
> 
> 时间：2013-01-09T15:39:32.837
> 
> 标签：javascript, jquery, css

我想重复这个效果： [http](http://www.google.com/culturalinstitute/#!home) ://www.google.com/cultureinstitute/#!home （在 chrome 中查看，图像在 2-3 秒后开始缩放）

我尝试使用 jquery animate 和 background-size 属性来做到这一点：

```
$(document).ready(function(){
  $('.bg').animate({'background-size':'105%'}, 5000)
}) 
```

但是图像在每个流行的浏览器中都会退缩

感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:30:15.620

如果您使用内联图像而不是背景图像，它应该会更平滑。使用 z-index 解决内容重叠问题。

因此，您将改为为 img 设置动画：

```
$(document).ready(function(){
  $('.bg').animate({'width':'105%'}, 5000);
}) 
```

这是一个例子-> [http://jsfiddle.net/frUvf/](http://jsfiddle.net/frUvf/)

# css - 在 CSS 中使用 Twitter Bootstrap 字形图标

> ID：14238905
> 
> 赞同：21
> 
> 时间：2013-01-09T15:40:09.530
> 
> 标签：css, image, twitter-bootstrap, glyphicons

我想添加一个 Twitter 引导 glyphicon 来替换下面 CSS 文件中的图像引用，但不确定如何。

```
.edit-button {
  background: url('../img/edit.png') no-repeat;
  width: 16px;
  height: 16px;
} 
```

在 HTML 中，我将其添加如下：

```
<i class="icon-search icon-white"></i> 
```

有任何想法吗？

更新 - 尽管它只在 Firefox 的萤火虫中显示宽度和高度，但尝试了以下操作：

```
.edit-button
{
  /* background: url('../img/edit.png') no-repeat; */
  background: url(../img/glyphicons-halflings.png) no repeat -96px -72px !important;
  width: 16px;
  height: 16px;
} 
```

不知道为什么它没有被捡起？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2014-02-26T16:27:48.530

我喜欢使用 :after 或 :before 方法...

**HTML**

```
<a href="http://glyphicons.com/" class="arrow">Click Here</a></div> 
```

**CSS**

```
.arrow:after {
  font-family: "Glyphicons Halflings";
  content: "\e080";
} 
```

假设您拥有 glyphicon 字体（它们随 Bootstrap 免费提供），这应该可以工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:47:51.520

那你为什么不使用`<i>`标签作为编辑**按钮**呢？尝试这个：

```
<button type="submit" name="edit" class="edit-button btn btn-primary">
   <i class="icon icon-edit icon-white"></i>
   Edit
</button> 
```

# web-services - REST，工作单元，业务事务

> ID：14238923
> 
> 赞同：2
> 
> 时间：2013-01-09T15:41:03.273
> 
> 标签：web-services, rest, architecture, transactions, unit-of-work

我是否正确理解“工作单元”的概念与“REST”的概念相冲突？

UoW 的实现应该向服务器发送一组 [有序] 不同类型的更改对象。这会导致 PUT 和 DELETE 动词和 URI 的混合，并且不能使用 REST 样式的一个 HTTP 请求来完成。

更一般地说，没有办法以 REST 样式实现涵盖对不同类型对象的不同类型更改的业务事务。

你如何解决这个问题？创建一些可以接受相应数据或做其他事情的专用URI“/transaction”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:53:03.557

只需定义一个作为您的工作单元的资源（和表示），并将其发布到您的服务以进行数据处理——根据 POST 的 HTTP 规范。

（POST 也可以看作是“附加”动词，您将一个项目附加到概念工作列表；））

如果你想让它异步，POST 一个工作单元并获取某种 ID，然后你可以 GET 那个 id 来查看它的进展情况。

通常，您希望使用诸如乐观锁定之类的技术来分解此类操作以供客户端处理，但是如果需要，您始终可以将资源真正广泛地定义为某种工作文档。

# sql - Oracle SQL 选择 Clob 字段不为空/空的位置

> ID：14238924
> 
> 赞同：5
> 
> 时间：2013-01-09T15:41:04.680
> 
> 标签：sql, oracle10g, clob

我正在尝试从存档数据库中获取行以填充测试环境数据库。我需要一个名为“AUDIT_LOG”的特定字段（CLOB）不能为空的行。

我尝试了以下简单的选择语句，但我得到了

> ORA-00932: 不一致的数据类型: 预期 - 得到 CLOB

我尝试过的陈述：

```
SELECT * FROM SIEBEL.S_AUDIT_ITEM WHERE AUDIT_LOG = ''

SELECT * FROM SIEBEL.S_AUDIT_ITEM WHERE AUDIT_LOG != NULL

SELECT * FROM SIEBEL.S_AUDIT_ITEM WHERE AUDIT_LOG = 0 
```

CLOB 中的 NULL 是否等同于空字符串。我有一种感觉，也许长度可以用于列。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T15:47:39.920

要检查 NULL，无论数据类型如何，都可以使用`IS NOT NULL`或`IS NULL`

```
WHERE AUDIT_LOG IS NOT NULL 
```

但请记住，对于 CLOB，an`EMPTY_CLOB()`没有字符，但与 NULL 不同。如果要排除`EMPTY_CLOB()`，请使用@user3837669 使用`LENGTH`比较的答案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-14T16:14:24.503

```
SELECT * FROM SIEBEL.S_AUDIT_ITEM WHERE length(AUDIT_LOG) > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-07T11:52:09.630

在 Oracle 10g 中，上述方法都不适合我：我必须以一种糟糕的方式编写它：

`select * from SIEBEL.S_AUDIT_ITEM where to_char(AUDIT_LOG) != 'null' ;`

# java - 模拟开始编写servlet响应

> ID：14238925
> 
> 赞同：1
> 
> 时间：2013-01-09T15:41:04.503
> 
> 标签：java, servlets, response, apache-poi, outputstream

我们有一个 servlet，它将服务器端生成的 Excel 文件打印到响应输出流。Excel 文件由一个方法生成，该方法返回 POI 工作簿对象中的完整文件。

我们的问题是生成文件的方法持续了将近 30 秒才能执行。客户端一直在等待响应，直到我们开始将文件写入响应。

有没有办法在响应中写“某事”以使客户端导航器触发下载对话框？

就像是...

```
response.getOutputStream().write(null);
workbook.write(response.getOutputStream()); 
```

*（在 outputStream 中写入 null 会引发 NullPointerException）*

这样，虽然文件尚未生成，但下载似乎已经开始。

# c# - 如何从后面的代码中操作 li 元素？

> ID：14238926
> 
> 赞同：0
> 
> 时间：2013-01-09T15:41:08.500
> 
> 标签：c#, asp.net, html

我有从一些模板生成一些页面的应用程序。我的模板是`.aspx`包含一个`li`和一些内容的文件。生成的页面上有多个模板，所以我**无法**使用：

```
<li runat="server" id="myLi">
...
this.form1.FindControl("myLi") 
```

我真的需要`li`通过后面的代码添加一些数据，因为我使用数据库中的数据。我怎样才能做到这一点？也许其他一些解决方案？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:53:58.040

为什么不使用[FormView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.aspx)或[DetailsView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.aspx)？它们旨在显示一项（当时）与[ListItem](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.aspx)结合使用。

如果要使用显式 li DOM 元素作为服务器控件，则需要使用[HtmlGenericControl](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlgenericcontrol.aspx)

在这种情况下，您需要有一些选择器 - 类或属性才能仅获取您需要的 li 。

```
using System.Web.UI.HtmlControls;

HtmlGenericControl liItem = (HtmlGenericControl) ctl.FindControl("liItemID");
liItem.Attributes.Add("class", "someCssClass"); 
```

结合和类型检查

```
foreach(Control ctrl in Page.Controls) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T15:49:05.943

您不能直接在 ASP 中操作 li 元素，因为它不是控件。

但是，这可能有助于给您一些想法：[从代码隐藏 C# Asp.net 添加到列表](https://stackoverflow.com/questions/3530965/add-to-list-from-codebehind-c-sharp-asp-net)

# javascript - 搜索 parse.com 数据表单 html 输入

> ID：14238928
> 
> 赞同：1
> 
> 时间：2013-01-09T15:41:19.107
> 
> 标签：javascript, html, jquery-mobile, parse-platform

我可以使用以下方法从特定的解析对象中获取数据：

HTML

```
<input type="text" name="searchnumber" id="searchnumber" value="" placeholder="Customer Number"/>  
<button type="submit" id="search" data theme="a">Search</button> 
```

JS

```
var retrieve = new Parse.Query(CustomerObject);  
retrieve.get("xQz2oXkrq5", {  
    success: function(retrieve)  
        {  
        var cname = retrieve.get("customername");  
        var cnumber = retrieve.get("customernumber"); 
```

我希望能够使用在 HTML 搜索框中输入的数字来搜索特定条目，而不是像 JS 中显示的那样使用硬编码的 ObjectID。任何想法我怎么能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:01:21.283

[您可以使用Parse.Query](https://parse.com/docs/js_guide#queries-basic)根据客户名称或编号搜索现有对象。

```
var CustomerObject = Parse.Object.extend("CustomerObject");
var query = new Parse.Query(CustomerObject);
query.equalTo("customername", "Dan Stemkoski");
query.find({
  success: function(results) {
    // results is an array of CustomerObjects
    alert("Successfully retrieved " + results.length + " customers.");
  },
  error: function(error) {
    alert("Error: " + error.code + " " + error.message);
  }
}); 
```

# javascript - 如何在 jQuery 中将 removeClass 添加到选择器

> ID：14238929
> 
> 赞同：2
> 
> 时间：2013-01-09T15:41:22.387
> 
> 标签：javascript, jquery, css

我在一个页面上有两个菜单（如果需要，请参阅下面的 jsfiddle ......它是响应式的，因此您需要最小化窗口）。目前，当打开一个并单击另一个时，它们都保持打开状态。我将如何编辑 javascript，以便当一个打开时，另一个关闭？我知道我需要添加一个 removeClass 但我不确定如何实现它。非常感谢您的帮助。

[http://jsfiddle.net/Jq6sZ/](http://jsfiddle.net/Jq6sZ/)

```
$(document).ready(function() {
    $('body').addClass('js');
    var $menu = $('#menu'),
        $menulink = $('.menu-link'),
        $menuTrigger = $('.has-subnav > a');

    $menulink.click(function(e) {
        e.preventDefault();
        $menulink.toggleClass('active');
        $menu.toggleClass('active');
    });

    $menuTrigger.click(function(e) {
        e.preventDefault();
        var $this = $(this);
        $this.toggleClass('active').next('ul').toggleClass('active');
    });

});

$(document).ready(function() {
    $('body').addClass('js');
    var $menu = $('#menu2'),
        $menulink = $('.menu-link2'),
        $menuTrigger = $('.has-subnav > a');

    $menulink.click(function(e) {
        e.preventDefault();
        $menulink.toggleClass('active');
        $menu.toggleClass('active');
    });

    $menuTrigger.click(function(e) {
        e.preventDefault();
        var $this = $(this);
        $this.toggleClass('active').next('ul').toggleClass('active');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:47:11.830

You could check whether or not the other menu [`hasClass`](http://api.jquery.com/hasClass/) of `active`. For example, in your click event for `menu-link` you would have something like:

```
if($('.menu-link2').hasClass("active")){
    $('.menu-link2').trigger("click");
} 
```

Then use [`trigger`](http://api.jquery.com/trigger/) to trigger a `click` event on the other menu.

[http://jsfiddle.net/Jq6sZ/1/](http://jsfiddle.net/Jq6sZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:09:53.297

您的代码可以更简单、更短，您有 2 个 docready 语句，并且您两次将 body 类设置为“js”。这可以缩短。总体而言，您受到 HTML 布局方式的限制，但有一种方法：

```
$(document).ready(function() {
    $('body').addClass('js');

    var $menulink = $('.menu-link, .menu-link2'), 
        $menuTrigger = $('.has-subnav > a');

    $menulink.click(function(e) {
        var menu_to_toggle = $(this).next(); //which menu will this button toggle?
        e.preventDefault();
        $menulink.not($(this)).removeClass('active'); //remove active class from all menu links, but not this one
        $(this).toggleClass('active'); //toggle active class for this link
        $('.menu.active').not(menu_to_toggle).removeClass('active'); //remove active class from all menus, but not this one
        menu_to_toggle.toggleClass('active'); //toggle active class for the menu
    });

    $menuTrigger.click(function(e) {
        e.preventDefault();
        var $this = $(this);
        $this.toggleClass('active').next('ul').toggleClass('active');
    });
}); 
```

[看到这个小提琴演示](http://jsfiddle.net/c_kick/HE37E/)

注意：脚本不会重新折叠子菜单。

# actionscript-3 - Flex/AIR Loop 在 60 秒后停止执行（超时）

> ID：14238931
> 
> 赞同：0
> 
> 时间：2013-01-09T15:41:24.457
> 
> 标签：actionscript-3, apache-flex, air, flex4, httpservice

这是我遇到的一个奇怪问题，大约 60 秒后（定时 4 次）。我正在运行一个执行 HTTPService 调用的循环（只需要几秒钟），当它全部完成时，它会返回函数并重复添加到计数器。

代码适用于较小的测试样本（从未超过 92 个项目）。在我的情况下，项目是文件夹名称。

不需要用户输入的代码是否存在某种超时？我现在已经检查了很多次我的代码，但没有什么是不应该的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:47:31.467

也许该服务正在阻止您，因为它是可疑的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:23:18.970

好的，这对我来说很有趣，我发现了这个：

"max-execution-time 值指定 ActionScript 事件处理程序在 Flash Player 假定它已挂起并中止它之前可以执行的最大持续时间（以秒为单位）。默认值为 60 秒。您不能将此值设置为高于 60秒。”

所以，我关于使用计时器分手的评论可能是你最好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:44:11.950

最后证明是循环使用方式的错误。只是一个巧合，它在大约 60 秒时停止运行。我通过将一系列循环分解为在所有请求完成时而不是立即调用下一步/函数的函数来解决它。

# validation - a4j 中字段的验证消息：重复

> ID：14238933
> 
> 赞同：0
> 
> 时间：2013-01-09T15:41:30.760
> 
> 标签：validation, jsf, loops

我在使用 a4j:repeat 中的组件的 validatorMessage 属性显示验证消息集时遇到问题。

这是代码：

```
<a4j:repeat value="#{array}" var="value">

   <h:inputText id="someId" validatorMessage="custom message" required="true" value="#{someValue}">
   <h:message for="someId" />
</a4j:repeat> 
```

验证正在工作，但打印一些带有长 ID 的消息。我猜它正在使用生成的ID。即
j_id333049330_13d9ed7d:j_id333049330_13d9ef4c:0:someId: 验证错误：需要值。

不能将 EL 放在 id 属性中。

谢谢，拉维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:11:50.400

这是验证消息的标签部分。这通常由 设置`<h:inputText label>`，但是当它不存在时，实际上默认情况下将使用组件的客户端 ID。

只需手动设置标签：

```
<h:inputText ... label="Some ID" /> 
```

# assembly - 将值传递到程序集中的内存位置访问冲突

> ID：14238934
> 
> 赞同：1
> 
> 时间：2013-01-09T15:41:33.183
> 
> 标签：assembly, access-violation, masm

我将从这段代码开始：

```
mov   eax, 5
mov   DWORD PTR [eax], 123 
```

我试图将值 123 移动到地址 5 的内存位置，但我遇到写访问冲突。我唯一能猜到的是内存位置已经被保留或正在使用中。但无论我使用什么地址，都是一样的。如果我要从同一位置读出，请说：

```
mov   eax, 5
mov   ebx, DWORD PTR [eax] 
```

我没有错误。我错过了什么？

（如果有帮助，我正在使用 MASM、Win 7、4 GB 内存进行编码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:26:21.703

您会遇到保护错误，因为您的进程不拥有该特定地址空间。事实上，第一兆字节的地址空间被 Windows 禁止用于任何进程。

# javascript - 使用 Javascript 的带有 OAuth2.0 的 Google 电子表格 API

> ID：14238935
> 
> 赞同：12
> 
> 时间：2013-01-09T15:41:47.373
> 
> 标签：javascript, oauth-2.0, google-spreadsheet-api

我正在尝试使用 Javascript 访问私有 Google 电子表格。我已成功获得 OAuth2.0 授权，并且可以看到我所有的 Google Drive 文档的列表。我似乎无法做的是进入特定的电子表格。代码如下，函数“retrieveAllFiles”中的相关电子表格代码。其中很多都是从谷歌教程中挑选出来的。

```
var clientId = 'working';
var apiKey = 'working';
var scopes = 'https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive https://spreadsheets.google.com/feeds';

function handleClientLoad() {
    console.log('inside handleClientLoad function');
    gapi.client.setApiKey(apiKey);
    window.setTimeout(checkAuth,1);
}

function checkAuth() {
    console.log('inside checkAuth function');
    gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
    console.log('finished checkAuth function');
}

function handleAuthResult(authResult) {
    console.log('inside handleAuthResult function');
    var authButton = document.getElementById('authButton');
    authButton.style.display = 'none';
    if (authResult && !authResult.error) {
        //Access token has been succesfully retrieved, requests can be sent to the API.
        apiCalls();
    } else {
        //No access token could be retrieved, show the button to start the authorization flow.
        authButton.style.display = 'block';
        authButton.onclick = function() {
            gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
        };
    }
}

function apiCalls() {
    console.log('inside apiCalls function');
    gapi.client.load('drive', 'v2', function() {
         retrieveAllFiles(callback);
    });
}

function retrieveAllFiles(callback) {
     $.get('http://spreadsheets.google.com/feeds/spreadsheets/private/full', function(data) {
        console.log('get request processed');
        console.log(data);
    });
    console.log('inside retrieveAllFiles function');
    var retrievePageOfFiles = function(request, result) {
        request.execute(function(resp) {
        result = result.concat(resp.items);
        var nextPageToken = resp.nextPageToken;
        if (nextPageToken) {
            request = gapi.client.drive.files.list({
                'pageToken': nextPageToken
            });
            retrievePageOfFiles(request, result);
        } else {
            callback(result);
        }
        });
    }
    var initialRequest = gapi.client.drive.files.list();
    retrievePageOfFiles(initialRequest, []);
}

function callback(result) {
    console.log('all should be loaded at this point');
    console.log(result);
    $('#drive-list').append('<ul class="items"></ul>');
    $.map(result, function(v,i){
        $('.items').append('<li>' + v.title + ':' + v.id + '</li>');
    });
} 
```

所以需要明确的是，目前的最终结果是我所有的 Google Drive 文档的列表，但没有用于“获取数据处理”的 console.log。我在控制台中没有收到任何错误消息，所以我不知道发生了什么。

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-14T07:20:10.343

从一堆不同的来源编译的最终解决方案，希望这会对某人有所帮助。

```
var scopes = 'https://spreadsheets.google.com/feeds';
var clientId = 'working';
var apiKey = 'working';

function handleClientLoad() {
    console.log('inside handleClientLoad function');
    gapi.client.setApiKey(apiKey);
    window.setTimeout(checkAuth,1);
}

function checkAuth() {
    console.log('inside checkAuth function');
    gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
    console.log('finished checkAuth function');
}

function handleAuthResult(authResult) {
    console.log('inside handleAuthResult function');
    console.log(gapi.auth.getToken());
    var authButton = document.getElementById('authButton');
    authButton.style.display = 'none';
    if (authResult && !authResult.error) {
        //Access token has been successfully retrieved, requests can be sent to the API.
        loadClient();
    } else {
        //No access token could be retrieved, show the button to start the authorization flow.
        authButton.style.display = 'block';
        authButton.onclick = function() {
            gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
        };
    }
}

function loadClient() {
    console.log('inside loadClient function');
    var token = gapi.auth.getToken().access_token;
    var urlLocation = ''; //Get this from the URL of your Spreadsheet in the normal interface for Google Drive.

    //This gives a spitout of ALL spreadsheets that the user has access to.
    var url = 'https://spreadsheets.google.com/feeds/spreadsheets/private/full?access_token=' + token;

    //This gives a list of all worksheets inside the Spreadsheet, does not give actual data
    var url = 'https://spreadsheets.google.com/feeds/worksheets/' + urlLocation + '/private/full?access_token=' + token;

    //This gives the data in a list view - change the word list to cells to work from a cell view and see https://developers.google.com/google-apps/spreadsheets/#working_with_cell-based_feeds for details
    var url = 'https://spreadsheets.google.com/feeds/list/' + urlLocation + '/od6/private/full?access_token=' + token;

    console.log(url);
    $.get(url, function(data) {
        console.log(data);
    });
} 
```

# java - 为什么我的特定 id 的 h:message 没有在我的动态表单中正确显示？更多描述

> ID：14238937
> 
> 赞同：2
> 
> 时间：2013-01-09T15:41:50.590
> 
> 标签：java, jsf, jsf-2

我有一个表单，用户可以从表单中动态添加和删除一组表单字段（名字、姓氏和电子邮件）。那部分工作正常，但当然我需要对这些字段进行一些验证，如果我只提交带有第一组字段的表单，它会很好，并且我会在每个字段上得到验证。添加下一组字段并提交后，我会在第一组中收到验证消息，而第二组中只有一个字段。我不太确定发生了什么，但这是`.xhtml`文件的外观：

```
<h:form>
    <ui:repeat var="i" value="#{bean.list}">
        <h:panelGrid columns="5" rowClasses="newRoow">
             <h:inputText id="firstName" value="#{i.first_name}"
             required="true" requiredMessage="Please enter a First Name" />
             <h:inputText id="lastName" value="#{i.first_name}"
             required="true" requiredMessage="Please enter a LastName" />
             <h:inputText id="email" value="#{i.first_name}"
             required="true" requiredMessage="Please enter an Email Address"> />
             <h:commandButton value="+">
                 <f:ajax event="click" render="@form" 
                 listener="#{bean.addItemFromList}" />
             </h:commandButton>
             <h:commandButton value="-">
                 <f:ajax event="click" render="@form" 
                 listener="#{bean.removeItemFromList(i)}" />             
             </h:commandButton>

             <h:message for="firstName" errorClass="warnings" showSummary="true" />
             <h:message for="lastName" errorClass="warnings" showSummary="true" />
             <h:message for="email" errorClass="warnings" showSummary="true" />
        </h:panelGrid>
    </ui:repeat>

    <h:commandButton value="Submit"
    actionListener="#{bean.someFunction}"
    action="nextPage" />
</h:form> 
```

关于为什么这会失败的任何想法？

正如您在此处看到的那样，使用第一个字段设置效果很好：http: [//i.imgur.com/uMrrO.png](http://i.imgur.com/uMrrO.png)验证位于每个字段下方。

对于第二个和以下字段集，它看起来像这样：http: [//i.imgur.com/FeZ3T.png](http://i.imgur.com/FeZ3T.png)或有点不同，因为它似乎每次按下添加按钮时都会验证一个字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:28:43.013

后来我发现这不是我为这个问题编写的代码/标记的问题，而是来自包含的`.js`文件。这其中有一些代码与从标签生成的`.js`所有元素混淆。`class="warnings"``<h:messages />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:26:09.013

这里在提交整个表单时将提交同一表单中的两个组件，因此您将收到验证错误消息。

# scripting - for /f 在批处理脚本中

> ID：14238945
> 
> 赞同：0
> 
> 时间：2013-01-09T15:42:28.730
> 
> 标签：scripting, batch-file

echo %DATE% 将显示如下内容：

斯里兰卡 09.01.2013

这是脚本：

```
for /f "tokens=2-4 usebackq delims=. " %%i in ('%DATE%') do set fileName=testing_%%i_%%j_%%k
echo %fileName% 
```

当我运行这个脚本时，我得到这样的输出：
系统找不到文件？§♦ź♫↕。
testing_09_01_2013

如您所见，连接的字符串很好，但为什么我收到系统无法找到最后带有一些垃圾的文件的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:56:01.143

明白了.. 而不是 ('%DATE%') 应该是 (`date /t`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:40:02.483

问题是括号中的值必须是*用引号括起来的字符串*或*用撇号括起来的命令*。尽管您使用 COMMAND 解决了问题，但使用STRING`('date /t')`会更高效、更简单：`("%DATE%")`

```
for /f "tokens=2-4 usebackq delims=. " %%i in ("%DATE%") do set fileName=testing_%%i_%%j_%%k
echo %fileName% 
```

# ios - 是否可以在 iOS 应用程序中嵌入 iBook？

> ID：14238947
> 
> 赞同：1
> 
> 时间：2013-01-09T15:42:31.620
> 
> 标签：ios, ibooks

我需要为 iBooks 构建 iBook 标题。但是现在他们添加了真正不适合 iBook 的新要求，所以我想我会制作一个引用 iBook 的应用程序，但要为更复杂的功能提供额外的屏幕。

为了引用 iBook 的内容，我认为将 iBook 嵌入到应用程序的一个屏幕上会比较理想，所以问题是：你能这样做吗？是否有适用于 iOS 的 iBooks 小部件可以让我在应用程序中嵌入 iBook 标题？或者是否有其他一些分页控件可以让我在应用程序中跨页面流动文本？

如果做不到这一点，是否可以将 iBook 作为 iBooks 中的常规标题安装，并从应用程序链接到它，这样我至少可以直接从应用程序跳转到这本书？而且，理想情况下，跳回，我可以在 iBook 中的哪个链接跳转到应用程序中的特定屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:48:24.790

It looks like Chevron packaged an iBook into an App. It uses several of the features of an iBook, which I guess could be recreated as an app. But I wonder if there's an easier way to embed an ibook into an App.

[[https://itunes.apple.com/en/app/next](https://itunes.apple.com/en/app/next)*-chevrons-technology/id556105038?mt=8]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:37:38.413

将 ibook 嵌入应用程序是不可能的，但可以进行交叉链接。这并不是说交联会很容易，或者做你提到的一切。用户图书馆中的每本 ibook 都有一个 ibooks: url，它将打开该书。问题是知道那个 URL，因为我相信它在设备之间不是唯一的（这可能是错误的，但可能不是）。而且我认为您可以从任何地方的链接启动应用程序，但我不知道如何进行深度链接的具体细节。

在任何情况下，您都可以查看支持使用 Apple 仪表板小部件的 ibooks author。您可以使用 dashcode 在 ibook 文件中创建可嵌入的 HTML 5 应用程序。

# asp.net - 将某些 IP 地址视为已登录，以便在 .Net 网站上抓取安全内容

> ID：14238951
> 
> 赞同：1
> 
> 时间：2013-01-09T15:42:51.007
> 
> 标签：asp.net, forms-authentication, google-search-appliance

使用表单身份验证的网络网站，将由 Google Mini 设备抓取以进行站点搜索。GMini 有点旧，显然不支持使用表单身份验证抓取网站。据推测，Gmini 不会保留 auth cookie，或者它只是不理解登录表单。

有没有一种方法可以说服 IIS/.Net 将来自 GMini 的 IP 地址的所有请求视为已作为有权访问受保护内容的特定用户登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:44:08.397

`global.asax`你可以使用并`Application_AuthenticateRequest`检查用户是否来自ips列表，你会自动登录为：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
    // check that is not all ready logged in.
    if(HttpContext.Current.User == null || HttpContext.Current.User.Identity == null || !HttpContext.Current.User.Identity.IsAuthenticated)
    {
        // check if its on your Ip List, or check if(HttpContext.Current.Browser.Crawler)
        if(ListWithPassIps.Contains(HttpContext.Current.Request.UserHostAddress))
        {
            FormsAuthentication.SetAuthCookie("CrowlerLeftToSeethen@email.com", true);
        }
    }
} 
```

可能存在的问题是爬虫没有保存 cookie，但我认为这至少记录了他的那个会话。`"CrowlerLeftToSeethen@email.com"`可以是您为查看您喜欢的页面而创建的用户。

您还可以`request.Browser.Crawler`通过更难找到主要搜索引擎之一的 ip 来检查它是否存在。

# c++ - 这个 C++ 项目可以用 .NET Reflector 之类的工具反编译吗？

> ID：14238953
> 
> 赞同：1
> 
> 时间：2013-01-09T15:43:00.443
> 
> 标签：c++, .net, native-code, managed-code, .net-reflector

我使用 Microsoft Visual Studio 2012，我想用原生 C++ 编写一个应用程序。我不想使用 Manged Code (.NET) 的原因是因为我不希望我的应用程序被使用 .NET Reflector 之类的工具反编译回源代码，但如果我仍然可以使用它会很好我的应用程序中的 UI（CLR Windows 窗体）。

但是当我将 UI（CLR Windows 窗体）添加到我的 Win32 项目时，会弹出此消息：

![信息](../Images/5f0b312e4f3c1a5a8fefd7fbe2c4a373.png)

这是否意味着从现在开始我的所有项目都不会被编译为本机代码，并且有可能使用 .NET Reflector 等工具反编译整个应用程序？

或者它将是“混合”（本机代码+托管代码）项目，并且无法使用诸如.NET Reflector之类的工具对整个应用程序进行反编译，而只有其中一部分负责UI？

PS 是的，我知道任何应用程序都可以被反编译（！！！），但我询问的是基于 .NET 的应用程序的反编译工具。使用 .NET Reflector，您可以从 .NET 应用程序中“取回原始源代码”。所以我的问题是，是否有可能从此应用程序“取回原始源代码”，或者它会以某种方式“混合”代码（管理 + 本机）并且不可能将其反编译回原始代码带有.NET Reflector 之类的工具的源代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:57:03.317

如果“反编译”意味着“取回原始源”，在可执行文件中没有任何符号表的情况下，这是不可能的。

如果“反编译”的意思是“得到一个用户可修改的代码，它在语义上等同于原始代码，并且可以被编译回可执行程序”，那么这总是可能的（即使直接修改机器代码本身：有人理解它！ ）。这对于广大观众来说是如何理解的，那是另一回事了。

营销的一般规律说：“唯一不能复制的就是永远卖不出去的！” 这是与软件的物理性质有关的问题。没有解决方法（除了为另一个宇宙工作）

# ios - iPhone4 上的闪屏切换

> ID：14238954
> 
> 赞同：0
> 
> 时间：2013-01-09T15:43:02.903
> 
> 标签：ios, splash-screen, ios4

我正在开发一个 iOS 应用程序，由于某些原因，启动画面在启动时会向上移动几个像素或拉伸（很难说）。这只发生在我的 iPhone 4 设备上。我注意到，如果我将我的应用程序设置为全屏（手机顶部没有状态栏以延长电池寿命等），则不会发生移位。

此外，iPhone 5 上没有问题。

我检查了我的 Default.png 初始屏幕的图像大小，它们是 640 x 960。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:08:24.123

要做到这一点，您确实应该拥有多个默认文件：

`Default.png`(320 x 480) 支持原始 iPhone 至 iPhone 3GS

`Default@2x.png`(640 x 960) 支持 iPhone 4 和 4S

`Default-568h@2x.png`(640 x 1136) 支持 iPhone 5

尝试对所有不同尺寸的屏幕使用一个默认值可能在技术上可行，但您肯定不会获得最佳质量。

# c# - double 到字符串的转换

> ID：14238958
> 
> 赞同：1
> 
> 时间：2013-01-09T15:43:22.570
> 
> 标签：c#, wpf, string-formatting

我正在使用以下代码：

```
string.Format("{0:###,###,###,###,###.00}",12005557590928.143); 
```

将双精度值转换为字符串。

它给出的输出为“12,005,557,590,928.10”

如果我将其更改为

```
string.Format("{0:###,###,###,###,###.##}",12005557590928.143); 
```

我明白了。“12,005,557,590,928.1”。

如何获得“12005557590928.143”的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:48:07.600

由于您用于数字的数据类型，您会看到精度错误。尝试使用定点数类型（在本例中为 a `decimal`）：

```
string.Format("{0:###,###,###,###,###.###}", 12005557590928.143m); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:45:52.943

I believe you want `string.Format("{0:###,###,###,###,###.000}",12005557590928.143);` (note the extra zero at the end)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:46:58.793

You can use

```
(12005557590928.143).ToString("R") 
```

The **custom** numeric format strings will never reveal more than 15 decimal digits of a `System.Double`. Consider using `System.Decimal` if you need greater precision.

If your goal is to reveal "hidden" digits of the `Double`, use **standard** numeric format strings `"R"` ("round-trip") or `"G17"` ("general" 17 digits).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T15:47:54.197

尝试`.ToString("R")`

```
Console.WriteLine((12005557590928.143).ToString("R")); 
```

这里有一个[`DEMO`](http://ideone.com/4Z2Oo2).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T15:57:58.017

```
Console.Write(string.Format("{0:0.000}", (12005557590928.143m))); 
```

# mysql - 为什么 default_week_format 变量适用于 WEEK 但不适用于 YEARWEEK

> ID：14238959
> 
> 赞同：1
> 
> 时间：2013-01-09T15:43:24.737
> 
> 标签：mysql, datetime, global-variables, system-variable

我之前发布了一个问题，该问题得到了正确的回答，并导致我发现我的 YEARWEEK() 函数正在使用默认模式为零，并且给了我不想要的结果。我阅读了 YEARWEEK 的手册，其中提到了关于模式的 WEEK，它说，如果没有使用模式参数，则使用 default_week_format 值。我决定需要模式 6，因此我采取了必要的步骤将变量更改为 6。但是，只有 WEEK() 函数受此更改影响。

我得到以下结果：

```
SELECT YEARWEEK(NOW())
  201301
SELECT YEARWEEK(NOW(), 6)
  201302
SELECT WEEK(NOW())
  2
SELECT WEEK(NOW(), 6)
  2 
```

这是 MySQL 的问题还是我做错了什么？我读了几次手册，它在 YEARWEEK 描述中明确指出，“模式参数的工作方式与 WEEK() 的模式参数完全一样”。但是，它并没有明确说明（就像在 WEEK 描述中所做的那样），“如果省略了 mode 参数，则使用 default_week_format 系统变量的值”。

如果没有提供变量值，YEARWEEK() 不应该使用变量的值，还是我在这方面错了？在我看来，这两个函数的行为应该是相同的，尤其是因为一个函数在其描述的这个特定部分引用另一个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:53:55.213

> Shouldn't YEARWEEK() use the variable's value if none is provided or am I wrong in that regard?

**No.**

While I understand the argument, this is documented and therefore *expected behavior*. From the docs on [`default_week_format`](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_default_week_format):

> The default mode value to use for the `WEEK()` function.

So this system variable is **only** used for `WEEK()`. However, as you noted, both functions allow `week_format` as a second argument. As such, I would encourage you not to set this at the server level, but in your code for clarity.