# StackOverflow 问答 14779000-14779999

# python - Python 在操作期间更改 int

> ID：14779001
> 
> 赞同：0
> 
> 时间：2013-02-08T18:27:37.827
> 
> 标签：python, python-2.7

我正在尝试循环一个脚本，但我希望“a”成为“b”最终成为的任何东西。例如，如果我的输入是 10 b = 1000 ...然后我将其循环回来但希望“a”变为 1000（b 最终成为什么）...。

```
import threading
import time
while True:
    print time.time ()
    a=900 
    input=int(raw_input("enter a number,"))
    b=int(((input-5)*20)+a)
    print b 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T18:29:32.037

`a`在循环外 定义：

```
import threading
import time
a=900
while True:
    print time.time ()
    input=int(raw_input("enter a number,"))
    b=int(((input-5)*20)+a)
    a = b
    print b 
```

# java - 多线程 GAE 应用程序需要同步吗？

> ID：14779003
> 
> 赞同：0
> 
> 时间：2013-02-08T18:27:40.323
> 
> 标签：java, multithreading, google-app-engine, concurrency

如果您将线程`ThreadManager.currentRequestThreadFactory()`与`ExecutorService`. 因此，为了允许同一个前端实例同时处理多个 servlet 请求，我计划编写如下所示的代码：

```
public class MyServlet implements HttpServlet {
    private RequestDispatcher dispatcher;

    // Getter and setter for 'dispatcher'.

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) {
        MyResponse resp = dispatcher.dispatch(request);

        PrintWriter writer = response.getWriter();

        // Use the 'resp' and 'writer' objects to produce the resultant HTML
        // to send back to the client. Omitted for brevity.
    }
}

public class RequestDispatcher {
    private ThreadFactory threadFactory =
        ThreadManager.currentRequestThreadFactory();

    private Executor executor;

    // Getters and setters for both properties.

    public MyResponse dispatch(HttpServletRequest request) {
        if(executor == null)
            executor = Executors.newCachedThreadPool(threadFactory);

        // MyTask implements Callable<MyResponse>.
        MyTask task = TaskFactory.newTask(request);

        MyResponse myResponse = executor.submit(task);
    }
} 
```

所以现在*我相信*我们有一个设置，每个前端都有一个 servlet，可以同时接受多达 10 个（我相信这是 GAE 允许的最大值）请求，并同时处理所有这些请求而不会阻塞。所以首先，如果我错误地`ThreadManager`使用它并且没有正确使用它，或者如果我对这种类型的并发行为的设置不正确，**请先纠正我！**

假设我或多或少走上了正轨，我对 Google App Engine 线程如何利用对象下方的对象树有一些与并发相关的担忧`MyTask`。

可`MyTask`调用对象负责实际处理 HTTP 请求。在 EJB 领域，这将是“业务逻辑”代码，它执行以下操作：(1) 将消息放入队列，(2) 访问 Google Datastore 获取数据，(3) 将内容保存到缓存等。也就是说，当它的`call()`方法由`Executor`.

**我是否必须使从内部创建的每个对象都是`MyTask#call`线程安全的？为什么或者为什么不？**提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:58:08.950

您不需要所有这些来使实例能够同时处理多个请求。**如果您需要在处理单个给定请求**时并行执行多个任务，GAE 允许您生成线程。

例如，如果您需要同时联系多个外部 URL 以获取响应给定请求所需的信息，它可能很有用。这将比按顺序联系所有 URL 更有效。

# python - 在没有 Popen 或 os.system 的情况下从 python 运行 python

> ID：14779006
> 
> 赞同：0
> 
> 时间：2013-02-08T18:27:42.563
> 
> 标签：python

我有一个包装 python 脚本，它通过重复调用另一个 python 脚本`os.system`。这工作得很好，但是调用子 shell 并一次又一次地导入模块会对性能造成很大影响。我怎样才能将其转换为更优雅和高性能的东西？

```
counter = 0
for thing in list_of_stuff:
    os.system("python inner_script.py %s result_%s" % (thing, counter)
    counter += 1 
```

我宁愿在包装器中完成这一切，但如果这是唯一或最好的方法，可以修改*inner-script.py 。*

如果相关，环境是 Windows 上的 Python 2.7。

**编辑：**我不只是导入 inner_script 因为它不理解命令行参数：

```
import inner_script    
counter = 0
for thing in ['TR2','TR5']:
    inner_script('%s result_%s' % (thing, counter))
counter += 1 
```

结果：

```
C:\> python xx-wrapper.py

inner_script [input features] [output workspace] 
```

这是inner_script.py返回的使用信息：

```
if len(sys.argv) < 3:
    print usage
    exit()

in_features = sys.argv[1]
out_folder  = sys.argv[2]

main(in_features, out_folder) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T18:51:17.110

目标是能够编写：

```
from inner_module import some_function

for counter, thing in enumerate(list_of_stuff):
    some_function(thing, counter) 
```

要实现它，请将处理代码从内部脚本移动到单独的函数中。您可以将它放在一个新模块中或重命名脚本并将函数留在那里。例如`inner-script.py`：

```
import sys
# tons of other imports..

# parse args
thing, counter = sys.argv[1:]

# do something..
print thing, counter 
```

可以转换为`inner_module.py`：

```
import sys
# tons of other imports..

def some_function(thing, counter):
    print thing, counter

def main():
    # parse args
    thing, counter = sys.argv[1:]

    # do something..
    some_function(thing, counter)

if __name__=="__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T18:30:45.183

在`inner-script.py`围绕脚本执行的任务创建一个类。

```
for thing in list_of_stuff:
    x = __import__('inner-script')
    x.className(thing, counter) 
```

这应该足够有效。

* * *

或者，如果您不能/不会修改 inner-script.py，这是一种从 python 中调用它并将变量作为脚本可以读取的 local() 或 global() 变量传递的方法......就像你在您的示例中执行时传递了参数：

```
x = __import__('inner-script', globals(), (thing, counter), [], -1) 
```

然后无论您想成为什么，[都可以在这里找到更多信息](http://docs.python.org/2/library/functions.html#__import__)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:05:11.817

感谢[Torxed 的回答](https://stackoverflow.com/a/14779052/14420)和随附的评论，我有一些似乎适用于“不要修改 inner_script”场景的东西。虽然最初的目标已经完成，但在构建过程中，我清楚地知道最好的办法是按照[JF Sebastian 的模板](https://stackoverflow.com/a/14779353/14420)`inner-script`重铸成`inner_script`模块。有太多的东西可能会或可能不会适用于此，但是，这*是*一个答案，所以我把它留给其他可能需要它的人：

 *```
counter = 0
for thing in ['1st','2nd', '3rd']:
    output = '%s_%s' % (thing, counter)
    sys.argv.insert(1, thing)
    sys.argv.insert(2, output)

    if counter == 0:
        x = __import__('inner_script', sys.argv)
    else:
        reload(x)

    del sys.argv[2] # in reverse order so as not to change index #'s before done
    del sys.argv[1] 
    counter += 1 
```

结果：

```
Processing 1st into 1st_0
Processing 2nd into 2nd_1
Processing 3rd into 3rd_2 
```*

# python - Django：HTML标签显示为文本

> ID：14779008
> 
> 赞同：1
> 
> 时间：2013-02-08T18:28:17.747
> 
> 标签：python, django

在我的 Django 应用程序中，`<acronym>...</acronym>`标签显示为`&lt;acronym title=&#39;Особо охраняемая прирордная территория&#39;&gt;ООПТ&lt;/acronym&gt;`.

模板如下所示（首字母缩略词标记出现在 中`cur_goal.description`）。

```
{% extends "base.tpl.html" %}

{% block title %}{{ genplan.name }}{% endblock %}

{% block content %}
    <h2>{{ category_name }}</h2>
    {% for cur_goal in goals %}
        <li>{{ cur_goal.description }}</li>
    {% endfor %}
{% endblock %}

{% block right_sidebar %}
{% endblock %} 
```

如何更改代码以正确显示首字母缩略词标记（大括号不替换为`&lt;`and `&gt;`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:32:14.867

正如 DM 所说，autoscape 标签，或者......安全过滤器

```
 <li>{{ cur_goal.description|safe }}</li> 
```

或者`mark_safe`从 python 方面。

[https://docs.djangoproject.com/en/dev/ref/utils/#django.utils.safestring.mark_safe](https://docs.djangoproject.com/en/dev/ref/utils/#django.utils.safestring.mark_safe)

# java - Java 客户端-服务器通信问题（使用 Java 的第 3 天）

> ID：14779011
> 
> 赞同：0
> 
> 时间：2013-02-08T18:28:22.600
> 
> 标签：java, sockets, client, serversocket

几天前在大学开始学习Java（主题是“服务器编程”），我们开始编写两个代码，分别充当客户端和服务器，因此客户端向服务器发送了一个包含3个数值的字符串，这必须应用一个数学公式（我不记得什么公式，但这没关系），然后将结果返回给客户端，客户端必须在屏幕上打印它或其他什么。

这是我的代码。我使用了老师讲授的一些课程，例如Socket和ServerSocket，但我知道代码中有一些错误，我找不到原因。在客户端联系服务器并且服务器为它打开一个套接字后，它停止工作。

客户端代码：

```
 int capital = 300000;
    int interes = 4;
    int plazos = 360;
    String IP_servidor = "127.0.0.1";
    int puerto_servidor = 8801;

    try{

        // Connect with server
        Socket servidor = new Socket (IP_servidor,puerto_servidor); // Se crea un socket para el servidor, con su IP para mandarle luego datos       
        //Server connected

        //Preparing data
        String datos = capital + ";" + interes + ";" + plazos;
        //Data prepared

        //Sending data
        PrintWriter conexion = new PrintWriter(servidor.getOutputStream(),true);   //Object "conexion" will be the one to which we'll write data the server will receive
        conexion.println(datos);
        //Data sent

        // Server processes data and returns it

        //Receiving data
        Socket recepcion = new Socket (IP_servidor,puerto_servidor); 
        BufferedReader lector = new BufferedReader (new InputStreamReader (recepcion.getInputStream()));
        String operacion = new String("");
        operacion = lector.readLine();
        //Data received back

        // End

    }

     catch (IOException Err){
        System.out.println("Error");
        System.out.println(Err.getMessage());
    } 
```

和服务器的代码：

```
 int puerto_servidor = 8801;

    try{

        // Server starts and connects with client
        ServerSocket miServidor = new ServerSocket(puerto_servidor);
        System.out.println("Socket created");
        Socket cliente = miServidor.accept();
        System.out.println("Petition from " + cliente.getInetAddress() + " received...");
        // Server started and client connected

        //Receiving data
        Socket cliente2 = new Socket (cliente.getInetAddress(),puerto_servidor); // Creating socket for client, so we can send data there after this
        BufferedReader lector = new BufferedReader (new InputStreamReader (cliente2.getInputStream()));
        String operacion = new String("");
        operacion = lector.readLine();        //Copy from the client to a string to decode afterwards
        System.out.println("Received string \"" + operacion + ".");
        //Data received

        //Preparing data
        String[] datos;
        datos = operacion.split(";"); //En 'datos' (0,1,2) se guardan separados los valores que se recibieron
        capital = Integer.parseInt(datos[0]);
        interes = Integer.parseInt(datos[1]);
        plazos = Integer.parseInt(datos[2]);
        System.out.println("String was cut to 3 pieces: \"" + capital + "\", \"" + interes + "\" y \"" + plazos + "\".");
        int resultado = capital*interes*plazos;
        //Data prepared

        // Se devuelve el resultado al cliente
        PrintWriter way_back = new PrintWriter(cliente.getOutputStream(),true);   
        way_back.println("Result is: " + resultado);
        System.out.println("Result was returned");
        // Se ha devuelto el resultado

        // End

    }

     catch (IOException Err){
        System.out.println("Error");
        System.out.println(Err.getMessage());
    } 
```

（两个代码都在 main 函数中）另外，我知道服务器代码中的 System.out.println(...) 只显示在服务器中，客户端也是如此。我只是这样做，以便我可以看到应用程序的进度:)

我希望你能帮助我。我知道有一个错误（嗯......超过 1 个哈哈）但我不确定在哪里，有 2 个单独的项目/应用程序意味着 2 个共享行的代码，我必须混合一些功能或其他什么，并且一个星期左右，老师将无法帮助我。我可以等待，但我真的希望它能够发挥作用，只是为了让您感到有成就感，正如您可能理解的那样。

我不是要一个工作代码，而是一些指导，这样我就可以自己修复代码，就像我在课堂上所做的那样。

再见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:33:20.450

为什么要为服务器-> 客户端通信创建一个新套接字？

使用 accept() 调用返回的套接字！

# c++ - 一个类中的两个类

> ID：14779018
> 
> 赞同：-1
> 
> 时间：2013-02-08T18:29:00.130
> 
> 标签：c++, class, derived

在 C++ 中实现这一点的更好方法是什么（没有 if-else）。在 CI 中可以初始化函数指针，然后调用函数指针。所以如果你看C类，C类的一些对象只使用A类和一些B类。我对C比C++更熟悉。

```
class A {
public:
   int func1();
   int func2();
   int func3();
};

class B:A {
public:
   int func1() {x=1; A::func1();}
   int func2()  {A::func2(); x=1;}
   int func3()  {x=1; A::func2();}
};

class C {
public:
    C::C(bool class_a) {_class_a = _class_a;}

    void func_c_1()
    {
        if(_class_a) a.func1();
        else b.func1();
    }
    void func_c_2()
    {
        if(_class_a) a.func2();
        else b.func2();
    }
    void func_c_3()
    {
        if(_class_a) a.func3();
        else b.func3();
    }
private:
    bool _class_a;
    A a;
    B b;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T18:38:19.297

您的代码无法编译，我可能会完全误解您，但是如果您想要一个根据创建方式执行不同操作的类，则可以通过使用具有纯虚函数的虚拟基并从中派生 A 和 B 来覆盖那些虚函数。

```
class Base
{
public:
    virtual int func1() = 0;
    virtual int func2() = 0;
    virtual int func3() = 0;
    virtual ~Base(){}         //it is important that this is virtual 
};

class A: public Base
{
    public:
    virtual int func1(){
        //do something
    }
    virtual int func2(){
        //do something
    }
    virtual int func3(){
        //do something
    }
};

class B: public A
{
    public:
    virtual int func1(){
        //do something else
        ((A*)this)->func1(); //call A's func1()
    }
    virtual int func2(){
        //do something else
    }
    virtual int func3(){
        //do something else
    }
};
Base *a = new A;
Base *b = new B;

Base *c = a;
c->func1();     //does something
c=b;
c->func1();     //does something else 
```

否则，如果您本质上想要两个不同的类（具有不同的类型），您可以使用模板。如果这是您想要评论的内容，我将添加示例代码。

还应该注意的是，没有什么能阻止你在 C++ 中使用函数指针，尽管我不推荐它。这是一个仅用于咯咯笑的示例代码：

```
#include <functional>
class A
{
public:
    int func1(){
    //do something
        return 1;
    }
    int func2(){
    //do something
        return 1;
    }
    int func3(){
    //do something
        return 1;
    }
};

class B
{
public:
    int func1(){
    //do something else
        return 1;
    }
    int func2(){
    //do something else
        return 1;
    }
    int func3(){
    //do something else
        return 1;
    }
};

class C
{
public:
    C(bool useA)
    {
        if(useA)    {
            func1 = std::bind(&A::func1,a_);
            func2 = std::bind(&A::func2,a_);
            func3 = std::bind(&A::func3,a_);
        }
        else    {
            func1 = std::bind(&B::func1,b_);
            func2 = std::bind(&B::func2,b_);
            func3 = std::bind(&B::func3,b_);
        }
    }
    std::function<int()> func1;
    std::function<int()> func2;
    std::function<int()> func3;
private: 
    A a_;
    B b_;
};

C c(true);
C c2(false);
c.func1(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:39:44.567

在我看来，您正在尝试理解 C++ 中的继承。您的代码看起来像是试图获得不同的行为，具体取决于您告诉它是 A 类还是 B 类。如果是这样，这应该会有所帮助：

```
#include <iostream>
using namespace std;

class A
{
    public:
        void foo() { cout << "A::foo\n"; }
        void bar() { cout << "A::bar\n"; } 
};

class B : public A
{
    public:
        void foo() { cout << "B::foo\n"; }
        void fee() { cout << "B::fee\n"; }
};

main()
{
    A* a = new A();
    B* b = new B();

    a->foo();
    a->bar();
    b->foo();
    b->bar();
    b->fee();
    ((a)b)->foo();
    ((a)b)->bar();
} 
```

我创建了 A 类，并（公开）使 B 类继承自它。在 main 中，前 5 行显示了您期望的行为，但是如果您希望`b`对象充当`A`，我只需将其强制转换为它，它就可以了。（如果您运行此代码，您将看到最后`foo`一行发出 A::foo。）因此该行为在构造时不是强制的。当你构造对象时，B::foo 会覆盖 A::foo。但只需转换为超类，您就可以访问原始函数。

请注意，如果您想`b.foo()`始终发出“B::foo”，请将 A 中的 foo 函数设置为虚拟：

```
class A
{
    public:
        virtual void foo() { cout << "A::foo\n"; }
        void bar() { cout << "A::bar\n"; } 
        virtual ~foo() { /* any destructor code for the base class */ }
}; 
```

在这种情况下，无论您使用`b->foo()`或`((A*)b)->foo()`，输出都是“B::foo”。运行时将使用对象的原始类型，而不是使用您将其转换为的类型。 **重要**- 一旦你在你的类中创建了任何虚拟函数，你必须为该函数创建一个虚拟析构函数。如果你不这样做，当你的对象被删除时，只会调用基类的析构函数。（当您使用虚拟析构函数时，每个析构函数都从派生最多的类调用到基类，本质上是在构造对象时展开的工作。）

希望这可以帮助...

# c# - WCF VS Windows 控制台应用程序

> ID：14779019
> 
> 赞同：0
> 
> 时间：2013-02-08T18:29:00.257
> 
> 标签：c#, vb.net, wcf, asmx

**环境：C#.NET VS 2012**

我们需要编写一个订单交付流程。基本上，它会遍历订单表并每晚创建一个文件，其中包含当天收到的订单。

传统上，我们使用 Windows 控制台应用程序构建它，并且计划任务在每晚（或每 6 小时）唤醒此控制台应用程序以传递文件

我们计划重新编写这个控制台应用程序。我们倾向于这两种方法，即

**方法一：**计划任务每​​晚运行以交付订单

**方法 2：** ASP.NET Web 应用程序，它也将交付订单。

我是 WCF 新手，还没有尝试过，这是使用 WCF 的好情况吗？如果是这样，有人可以告诉我一些基本要点如何实现这一点。

*仅供参考：我为其他一些客户端实现了另一种方法，我们有一个 ASMX Web 服务来完成这项工作，而控制台应用程序只调用 Web 服务。我们使用这种方法的一个缺点是，文件创建和交付以及一切都是通过 IIS 完成的，如果需要从 Windows 调度程序调用它，我们不喜欢使用 IIS。这是出于性能原因。*

谢谢

苏雷什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T18:34:53.880

把事情简单化。将控制台应用程序作为计划任务运行。

IIS 应用程序（WCF 服务或 WebApi）只有在您收到工作请求时才有用，即充当服务器。

# security - 安全存储需要用作纯文本的 API 凭据

> ID：14779030
> 
> 赞同：7
> 
> 时间：2013-02-08T18:29:26.230
> 
> 标签：security

我创建了一个应用程序，它充当 2 个不同 API（WebEx 和 Exchange Web 服务）和电子邮件之间的桥梁。用户向一个特殊的电子邮件地址发送日历邀请，该应用程序解析 ICS 并创建一个 WebEx 会议，然后连接到 Exchange Web 服务并将 WebEx 邀请信息放入原始邀请中。

这是因为 WebEx 没有 Mac 电子邮件/日历集成而创建的。

问题是要使用 WebEx API 和 Exchange API，我显然需要这两个 API 的凭据。我使用 AES 256 位加密将凭据安全地存储在数据库中，但要访问 API，我需要原始纯文本凭据（API 中不支持 oAuth 或令牌）。当然，它们是通过 SSL 安全传输的。

安全风险不在于密码被盗，因为加密密钥是安全存储的。我希望解决的问题是，客户担心他们的企业凭据现在的存储方式允许有权访问这些密钥的人（我或开发团队中的某个人）解密他们的信息并获得对凭据的访问权限.

该应用程序的价值是巨大的——它可以节省大量时间，但我怎样才能避免这种恐惧，同时仍然允许这种方法发挥作用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:44:12.347

现实情况是，如果您的代码需要发送密码，那么如果开发人员拥有源代码**和**加密密码，他们就可以访问纯测试密码。解决此问题的唯一方法是拒绝开发团队访问加密密码，并拒绝拥有加密密码的人员访问源代码。您可以通过让开发团队远离生产数据库来实现这一点。

安全风险是您可以访问存储密钥的生产数据库。消除该访问权限，并消除他们的担忧。提供可用于配置密钥的实用程序（桌面或基于 Web） - 无论如何都是一个好主意，因为将来需要更改这些密码。

让客户创建一个数据库，然后通过更改连接字符串将应用程序指向数据库。客户可以使用该实用程序设置密码。

# c++ - 如何在 Windows 上清理命名管道？

> ID：14779037
> 
> 赞同：1
> 
> 时间：2013-02-08T18:29:49.500
> 
> 标签：c++, winapi, asynchronous, named-pipes

我正在考虑使用命名管道来调试 DLL 的输出。我的 DLL 由一个专有的封闭源程序加载，该程序时不时崩溃。问题是当程序崩溃时，我当前的一些日志输出会丢失，因为 Windows 在写入磁盘之前会清理所有内容。

所以我的问题是，如果我在一个单独的进程中创建一个命名管道并从我的 DLL 连接到它，并且我的 DLL 崩溃并被清理的进程，我是否仍然能够读取刚刚写入命名管道的数据我的第二个过程的崩溃？

我必须在非阻塞（缓冲）庄园中写入命名管道，以尽可能少地影响时间，最好的配置是什么？IO重叠？有人可以给一个好的阅读链接吗？（我不是 C++ 初学者，但我是 WinAPI 初学者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:02:50.253

我不相信命名管道缓冲数据能在一个合作伙伴的失败中幸存下来。即使您设法重新打开管道，旧实例中的任何数据都将消失。

您可以改用内存映射文件（用于进程间共享内存的 Windows 机制），但您必须小心处理共享数据空间的状态 - 当进程再次唤醒时在哪里恢复写入新数据？也许是水槽发出的某种“我已经读到这里”的指示。您还必须在源中写入数据时刷新数据，以避免您在此问题中认识到的问题，这可能会使性能低于标准，但您可以先测试，然后再调整。

# ticket-system - Seapine Surround SCM 票创建

> ID：14779041
> 
> 赞同：0
> 
> 时间：2013-02-08T18:30:01.577
> 
> 标签：ticket-system, surroundscm, testtrack

我对 Seapines SurroundSCM API 比较陌生，所以我可能只是遗漏了一些明显的东西。有没有办法生成一张票，然后在使用 SurroundSCM API 签入文件时将其发送到 TestTrack？有人告诉我有办法做到这一点，但我在文档或他们的网站上找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:55:16.153

无法从 Surround SCM API 执行此操作，因为创建缺陷/票证是 TestTrack 操作。这里有两种可能的方法。

(1) 您的应用程序可以使用 TestTrack API 中的 addDefect 函数来创建新的缺陷/票证。因此，您的应用程序将使用 Surround SCM API 签入文件并使用 TestTrack API 创建缺陷/票证。

(2) 您可以创建第二个应用程序以通过 TestTrack API 创建新的缺陷/票证。第二个应用程序可以作为环绕 SCM 触发事件的结果运行。您可以将 SCM 触发器的先决条件配置为仅限于特定用户组或特定存储库。

# postgresql - plpgsql 函数中的表锁定

> ID：14779048
> 
> 赞同：1
> 
> 时间：2013-02-08T18:30:36.083
> 
> 标签：postgresql, plpgsql, postgresql-9.2, table-locking

假设我编写了执行以下操作的 plpgsql 函数：

```
CREATE OR REPLACE FUNCTION foobar (_foo_data_id bigint)
RETURNS bigint AS $$
BEGIN

    DROP TABLE IF EXISTS tmp_foobar;

    CREATE TEMP TABLE tmp_foobar AS
    SELECT *
    FROM foo_table ft
    WHERE ft.foo_data_id = _foo_data_id;

    -- more SELECT queries on unrelated tables

    -- a final SELECT query that invokes tmp_foobar

END; 
```

**第一个问题：**

如果我同时调用此函数两次，是否可以在第一次调用仍在运行时第二次调用`foobar()`删除`tmp_foobar`表？`foobar()`

我知道`SELECT`语句会创建一个`ACCESS SHARE`锁，但是该锁会持续到语句完成还是直到函数末尾`SELECT`隐含？`COMMIT`

**第二个问题：**

如果后者是真的，第二次`foobar()`无限期地重试`DROP TABLE IF EXISTS tmp_foobar;`直到锁被删除还是会在某个时候失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:38:57.057

如果您同时调用一个函数两次，这意味着您正在使用两个单独的会话来执行此操作。临时表不在会话之间共享，因此第二个会话不会从第一个会话“看到” tmp_foobar，并且不会有交互。请参阅[http://www.postgresql.org/docs/9.2/static/sql-createtable.html#AEN70605](http://www.postgresql.org/docs/9.2/static/sql-createtable.html#AEN70605)（“临时表”）。

锁一直持续到事务结束（无论您如何获取它们；例外是咨询锁，但这不是您正在做的事情。）

第二**个问题**不需要回答，因为前提是假的。

还有一件事。在您的临时表上创建索引并分析它可能很有用；这可能会导致最终查询更快。

# sql - 直接访问比使用函数慢？

> ID：14779049
> 
> 赞同：2
> 
> 时间：2013-02-08T18:30:42.400
> 
> 标签：sql, sql-server, performance

我正在进行一些性能测试，发现了一些非常奇怪的东西。我已经设置了一个简短的脚本来计算执行某些操作需要多长时间。

```
declare @date date
declare @someint int
declare @start datetime
declare @ended datetime
set @date = GETDATE()

DECLARE @count INT
SET @count = 0

set @start = GETDATE()

WHILE (@count < 1000)
BEGIN

--Insert test script here 

END

set @ended = GETDATE()

select DATEDIFF( MILLISECOND, @start, @ended) 
```

我运行测试的表包含 3 列`MDay`， 和`CalDate`。每个日历日期都有一个对应的 M（制造）日。该表可能如下所示：

```
MDay  |  CalDate
  1   | 1970-01-01
  2   | 1970-01-02 
```

我想测试我们的一项功能的效率。这个函数只接受 a`date`并返回`int MDay`值。我用的是直接访问，没有这个功能基本是一样的，结果这个方法的测试时间是原来的**两倍**！下面提供了我插入循环的代码。我使用随机日期试图消除缓存（如果存在）。

功能

```
select @someint = Reference.GetMDay(DATEADD( D, convert(int, RAND() * 1000) , @date)) 
```

上述定义

```
create Function [Reference].[GetMDay]
    (@pCaLDate smalldatetime
    )
    Returns int
as

Begin
Declare @Mday  int

Select @Mday = Mday 
from Reference.MDay
where Caldate = @pCaLDate 
```

直接的

```
select @someint = MDay from Reference.MDay where CalDate = DATEADD( D, convert(int, RAND() * 1000) , @date) 
```

我什至尝试对我的直接代码使用静态`@date`，并且时间差异可以忽略不计，所以我知道`convert`调用并没有阻止它。这到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:35:06.743

看看[http://msdn.microsoft.com/en-us/library/ms178071%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms178071%28v=sql.105%29.aspx)这两种方法在你的 sql server 上的执行计划是一样的吗？

# tomcat - 配置 grails.serverURL 获取动态端口

> ID：14779056
> 
> 赞同：3
> 
> 时间：2013-02-08T18:31:00.390
> 
> 标签：tomcat, grails

在我的 Config.groovy 文件中，我为开发设置了 grails.serverURL，但端口被硬编码为 8080。

一些开发人员配置了不同的端口以防止其他正在运行的应用程序发生冲突（例如本地开发 SOA）。

我所尝试的并没有给我带来快乐的结果。

1.  我`-Dserver-port=8090`在我的运行应用程序命令中设置
2.  在 grails.serverURL 字符串中`${server.port}`和两者中引用`${grails.server.port.http}`

如何引用`-Dserver-app`在 Config.groovy 中使用的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-02T09:42:44.467

您可以使用 System.getProperty() 访问您的系统属性

例如，使用以下命令运行您的 grails 应用程序：

```
grails -Dserver-app="foobar" run-app 
```

然后在 Config.groovy 中：

```
def ServerApp = System.getProperty("server-app"); //returns "foobar" 
```

# python - 如何使正则表达式不接受某些值？

> ID：14779057
> 
> 赞同：4
> 
> 时间：2013-02-08T18:31:04.980
> 
> 标签：python, regex

我希望我的正则表达式匹配一些值，但不接受其他值。基本正则表达式是`^/.+/.+$`

`/`我想不接受最后一部分的问号，不接受`people`或`dungen`作为第一`/`部分。

```
MATCH: /a/b/c/d
MATCH: /a/b
NO MATCH: /people/b/c/d
MATCH: /peoples/b/c/d
NO MATCH: /a/b/c?x=y 
```

我知道你可以使用`[^ABCD]`为了不匹配字符，但它不适用于整个字符串。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T18:33:25.677

在最后一个之后拒绝问号`/`很容易 - 使用字符类`[^?]`而不是`.`：

```
^/.+/[^?]+$ 
```

要拒绝`people`或`dungen`介于两者之间`/`，可以使用[否定前瞻](http://www.regular-expressions.info/lookaround.html)。由于您想拒绝`/people/`但接受`/peoples/`前瞻，因此一直到字符串的末尾。

```
^/(?!(?:people|dungen)/.+$).+/.+$ 
```

所以将两者结合起来：

```
^/(?!(?:people|dungen)/[^?]+$).+/[^?]+$ 
```

让我们测试一下。

```
>>> import re
>>> r = re.compile(r'^/(?!(?:people|dungen)/[^?]+$).+/[^?]+$')
>>> for s in ['/a/b/c/d', '/a/b', '/people/b/c/d', '/peoples/b/c/d', '/a/b/c?x=y']:
...     print not not r.search(s)
...
True
True
False
True
False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T18:49:57.843

你可以使用

```
^/(?!(people|dungen)/).+/[^?]+$ 
```

# broken-links - 如何构建断开的链接检查器工具？

> ID：14779059
> 
> 赞同：0
> 
> 时间：2013-02-08T18:31:14.543
> 
> 标签：broken-links, link-checking

我计划为网站构建一个断开的链接检查器工具。你们能否让我知道在构建工具时我需要使用哪些工具。我有 JavaScript、ExtJS、jQuery 和 PHP 方面的经验。任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:35:31.107

看看这个 WP 插件：

[http://wordpress.org/extend/plugins/broken-link-checker/](http://wordpress.org/extend/plugins/broken-link-checker/) [断链检查器]

它已经完成了这项工作。

您可以对其进行逆向工程，也可以将其用作概念工具来制作自己的

# git - 在 GitHub 中 - 如何从 master 中取消合并分支？

> ID：14779066
> 
> 赞同：0
> 
> 时间：2013-02-08T18:31:51.843
> 
> 标签：git, github

我正在使用 GitHub 进行版本控制

不幸的是，我使用以下代码将分支与 master 合并

```
git checkout master
git merge updating-users 
```

现在，我只想知道，如何从 master 中取消合并分支（更新用户）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:35:05.120

从内部`master`，做一个`git reset --hard #commit_id`到最近的好提交`master`。（您可以通过 go 获取提交 ID `git log`。）`updating-users`分支将不受影响。

如果您已经将合并推送到 GitHub，则必须再次推送并通过，`--force`因为您已经覆盖了历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:40:27.587

[如何将 Git 存储库恢复到以前的提交？](https://stackoverflow.com/questions/4114095/git-revert-to-previous-commit-how)

[http://www.kernel.org/pub/software/scm/git/docs/git-revert.html](http://www.kernel.org/pub/software/scm/git/docs/git-revert.html)：

> 给定一个或多个现有提交，还原相关补丁引入的更改，并记录一些记录它们的新提交。这要求您的工作树是干净的（不修改 HEAD 提交）。注意： git revert 用于记录一些新的提交，以扭转一些早期提交的效果（通常只是一个错误的提交）。如果您想丢弃工作目录中所有未提交的更改，您应该看到 git-reset(1)，尤其是 --hard 选项。如果你想提取另一个提交中的特定文件，你应该看到 git-checkout(1)，特别是 git checkout -- 语法。请注意这些替代方案，因为它们都会丢弃工作目录中未提交的更改。

如果您只想撤消主服务器上的一次提交：

```
git revert #commit_id_to_undo 
```

git revert 的功能类似于[`patch -R file.patch`](http://linux.die.net/man/1/patch).

# wpf - WPF - 使用 Int32.Parse 后出错

> ID：14779071
> 
> 赞同：0
> 
> 时间：2013-02-08T18:32:12.653
> 
> 标签：wpf, xaml

`Int32.Parse`在课堂上使用后`ComboBoxNotEmptyValidationRule`出现错误：

```
Input string was not in a correct format. 
```

当我添加到 XAML 时：

```
<local:ComboBoxNotEmptyValidationRule x:Name="Number" ValidatesOnTargetUpdated="True"/> 
```

程序运行正常，此验证工作正常。在设计窗口中我没有任何内容，只有`FormatException: Input string was not in a correct format.`消息。当我在 XAML 中评论这一行时，一切都很好。

```
class ComboBoxNotEmptyValidationRule : ValidationRule
    {
        public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
        {
            int str = -1;
              str = Int32.Parse(value as string);
            if (str > 0)
            {
                if (str > 0)
                    return ValidationResult.ValidResult;
            }
            return new ValidationResult(false, "please fill required field");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:02:39.393

你可以使用`int32.TryParse`

```
class ComboBoxNotEmptyValidationRule : ValidationRule
{
    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        int str;
        if (Int32.TryParse(value as string, out str))
        {
            if (str > 0)
                return ValidationResult.ValidResult;
        }
        return new ValidationResult(false, "please fill required field");
    }
} 
```

或者，您可以捕获`FormatException`并返回您的错误验证结果。

```
class ComboBoxNotEmptyValidationRule : ValidationRule
{
    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        int str = -1;
        try
        {
            str = Int32.Parse(value as string);
            if (str > 0)
            {
                if (str > 0)
                    return ValidationResult.ValidResult;
            }
            return new ValidationResult(false, "please fill required field");
        }
        catch (FormatException)
        {
            return new ValidationResult(false, "please fill required field");
        }
    }
} 
```

# r - 将具有 x、y 和 z 的列表转换为数据框，其中 x、y 和 z 在 R 中的长度不相等

> ID：14779076
> 
> 赞同：0
> 
> 时间：2013-02-08T18:32:25.323
> 
> 标签：r, geor

我有一个带有离散点的 x、y 和 z 数据的情况。我使用 akima 包插入 x、y 和 z 点，如下所示。

```
library(akima) library(geoR) data1 <- read.csv("contour.csv")

x<-data1$X 
y <-data1$Y 
z <- data1$Salinity

jd <- interp(x,y,z) 
```

当我查看变量 jd 的摘要时显示如下：

```
> summary(jd)
  Length Class  Mode   
x   40   -none- numeric
y   40   -none- numeric
z 1600   -none- numeric

 head(jd)
$x
 [1] 438562.6 439291.8 440021.0 440750.1 441479.3 442208.4 442937.6 443666.8 444395.9 445125.1 445854.3 446583.4 447312.6 448041.7 448770.9
[16] 449500.1 450229.2 450958.4 451687.6 452416.7 453145.9 453875.0 454604.2 455333.4 456062.5 456791.7 457520.9 458250.0 458979.2 459708.3
[31] 460437.5 461166.7 461895.8 462625.0 463354.2 464083.3 464812.5 465541.6 466270.8 467000.0

$y
 [1] 3348039 3348686 3349334 3349982 3350630 3351277 3351925 3352573 3353221 3353868 3354516 3355164 3355811 3356459 3357107 3357755 3358402
[18] 3359050 3359698 3360346 3360993 3361641 3362289 3362936 3363584 3364232 3364880 3365527 3366175 3366823 3367470 3368118 3368766 3369414
[35] 3370061 3370709 3371357 3372005 3372652 3373300

$z
      [,1]     [,2]     [,3]     [,4]     [,5]     [,6]     [,7]     [,8]     [,9]    [,10]    [,11]    [,12]    [,13]    [,14]    [,15]
 [1,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA
 [2,]   NA       NA       NA       NA       NA 18.71574 17.10335 16.62478 16.11543 15.14366 14.17188 13.50601       NA       NA       NA
 [3,]   NA       NA       NA       NA 21.89464 18.81536 16.80370 16.75368 15.95741 15.02082 14.34328 13.85912 12.88734 11.91557 10.94380
 [4,]   NA       NA       NA       NA 22.32342 18.91173 16.57913 16.82675 15.81215 15.20209 14.47508 13.74807 13.02107 12.29406 11.53566
 [5,]   NA       NA       NA 25.74385 22.41979 19.00810 16.11968 16.39897 15.01279 14.38055 13.80891 13.29606 12.56905 12.65366 12.04914
 [6,]   NA       NA       NA 25.92784 22.51616 19.10447 15.52771 16.29400 14.73203 14.32337 13.73605 13.18126 13.19240 13.28013 13.02879
 [7,]   NA       NA 29.43590 26.02421 22.61253 18.65089 15.64738 16.18430 15.38269 14.48052 13.74105 14.49734 14.23075 13.81929 13.11640
 [8,]   NA       NA 29.53227 26.07000 21.88580 17.51887 15.65061 16.51800 16.08679 15.72274 15.37834 14.93771 14.39266 13.65679 13.00940
 [9,]   NA 33.00112 29.52736 25.76968 22.06680 18.03948 16.60009 17.40118 16.34181 15.93678 15.44747 14.76168 14.08747 13.75458 12.90974
[10,]   NA 34.22111 30.52862 27.20880 23.08026 19.24614 16.69817 17.74406 16.51232 15.97623 15.43038 14.96491 14.67791 13.64814 12.57191
[11,]   NA 33.33584 30.19036 27.40987 24.95383 22.71728 19.14584 17.22947 17.06058 15.93447 16.00417 15.61906 14.57890 13.59449 12.74819
[12,]   NA 32.90973 27.97481 26.46768 26.32858 23.57614 19.04108 17.54636 16.85564 16.84410 16.55817 15.75915 14.91284 14.06654 12.76555
[13,]   NA 34.48335 31.53412 26.40919 22.00703 24.10761 17.11776 18.16298 17.14980 16.65305 16.88235 16.23120 15.38490 14.09612 12.51837
[14,]   NA 33.66080 32.32938 28.23699 21.05087 22.55036 18.07438 18.34346 17.26064 16.51573 16.86190 16.70325 15.42668 13.84894 12.27120
[15,]   NA       NA 32.41577 29.66875 23.59776 20.60085 18.09717 17.93024 19.64474 17.06719 17.15981 16.64390 15.17950 13.60176 12.02402
[16,]   NA       NA 31.56142 30.10294 23.92506 22.73337 20.53772 18.25641 16.26291 20.01113 17.57097 15.98826 14.70423 13.35458 11.89578
[17,]   NA       NA       NA 29.94705 27.19926 23.00028 19.70647 17.21280 16.38213 19.79163 15.16939 15.20904 14.29653 13.11519 13.00132
[18,]   NA       NA       NA 29.33084 28.51597 21.33761 21.11167 19.88850 21.18758 21.76292 20.27480 18.46781 16.55054 14.42923 14.87981
[19,]   NA       NA       NA       NA 27.36045 22.13575 17.01404 20.52726 18.72622 18.82724 18.85308 20.72224 18.76567 14.56480 14.44485
[20,]   NA       NA       NA       NA 27.10025 23.49826 17.95038 22.34124 18.63271 17.23419 17.17958 19.85733 19.49158 16.88207 15.02271
[21,]   NA       NA       NA       NA 26.27491 23.71870 20.22969 21.84924 18.03093 16.74750 15.35027 19.24918 20.43676 18.37605 16.37196
[22,]   NA       NA       NA       NA       NA 24.60396 20.52089 20.44391 17.54888 15.76986 15.65422 18.82818 19.31466 19.08708 16.56192
[23,]   NA       NA       NA       NA       NA 23.90008 20.54693 20.33115 18.08830 15.17747 18.01053 18.71607 18.60055 19.52322 17.53979
[24,]   NA       NA       NA       NA       NA       NA 21.80912 21.22678 20.60361 15.95443 18.29648 18.53598 18.55362 19.41405 18.73032
[25,]   NA       NA       NA       NA       NA       NA 21.87026 21.86509 22.53911 16.75394 16.79886 17.89577 18.53257 18.69387 18.72339
[26,]   NA       NA       NA       NA       NA       NA       NA 20.10637 21.40663 17.30416 15.89197 17.00273 18.30305 18.66460 18.48645
[27,]   NA       NA       NA       NA       NA       NA       NA       NA 20.61700 19.09812 16.24669 16.56761 17.56362 18.22984 18.37394
[28,]   NA       NA       NA       NA       NA       NA       NA       NA       NA 22.52313 21.05539 18.47191 16.18376 16.96282 18.06727
[29,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA 23.57581 20.84710 18.27427 16.83716 17.17981
[30,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA 21.12011 18.10776 17.24194
[31,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA 21.67675 18.66440
[32,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA
[33,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA
[34,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA
[35,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA
[36,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA
[37,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA
[38,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA
[39,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA
[40,]   NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA
          [,16]     [,17]     [,18]     [,19]     [,20]     [,21]     [,22]     [,23]     [,24]     [,25]     [,26]     [,27]     [,28]
 [1,]        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA
 [2,]        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA
 [3,]  9.972027  9.000255  8.505946        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA
 [4,] 10.272009  9.419573  8.994529  7.932493        NA        NA        NA        NA        NA        NA        NA        NA        NA
 [5,] 10.628849 10.142518  9.572304  7.610474  7.093811        NA        NA        NA        NA        NA        NA        NA        NA
 [6,] 11.986533 10.561038  9.107557  7.679234  7.233490  6.787747        NA        NA        NA        NA        NA        NA        NA
 [7,] 11.888592 10.371188  8.979108  7.879674  7.373170  6.927426  6.481682        NA        NA        NA        NA        NA        NA
 [8,] 11.697496 10.298497  8.925107  8.216355  7.559136  7.067105  6.621361  6.208683        NA        NA        NA        NA        NA
 [9,] 11.625176 10.378138  9.262446  8.553036  7.895817  7.238597  6.761041  6.315297        NA        NA        NA        NA        NA
[10,] 11.495688 10.340829  9.599784  8.889718  8.232498  7.575279  6.918059  6.454976  6.009232        NA        NA        NA        NA
[11,] 11.434992 10.672104  9.937123  9.226399  8.569180  7.911960  7.254741  6.597521  6.148912  5.703168        NA        NA        NA
[12,] 11.229570 11.003378 10.274462  9.563080  8.905861  8.248641  7.591422  6.934203  6.288591  5.842847  5.397103        NA        NA
[13,] 11.124544 11.334652 10.611801  9.899762  9.242542  8.585323  7.928103  7.270884  6.613664  5.982527  5.536783  5.138636        NA
[14,] 11.656609 11.665927 10.949140 10.236443  9.579223  8.922004  8.264785  7.607565  6.950346  6.293126  5.676462  5.230718  4.904737
[15,] 12.188674 11.997201 11.286479 10.573124  9.915905  9.258685  8.601466  7.944246  7.287027  6.629808  5.972588  5.370398  4.924654
[16,] 12.720738 12.328475 11.621555 10.909806 10.252586  9.595367  8.938147  8.280928  7.623708  6.966489  6.309269  5.652050  5.064333
[17,] 13.252803 12.659750 11.952829 11.246487 10.589267  9.932048  9.274829  8.617609  7.960390  7.303170  6.645951  5.988731  5.331512
[18,] 14.017727 12.991024 12.284103 11.583168 10.925949 10.268729  9.611510  8.954290  8.297071  7.639851  6.982632  6.325413  5.668193
[19,] 14.196394 13.838348 12.615378 11.919849 11.262630 10.605411  9.948191  9.290972  8.633752  7.976533  7.319313  6.662094  6.004874
[20,] 14.370035 14.310887 13.427372 12.416445 11.599311 10.942092 10.284872  9.627653  8.970434  8.313214  7.655995  6.998775  6.341556
[21,] 15.695481 15.142743 13.795384 13.002303 12.455859 11.568308 10.680758  9.964334  9.307115  8.649895  7.992676  7.335456  6.678237
[22,] 16.456171 15.552775 14.141661 13.504749 13.105627 12.491000 11.603449 10.715899  9.828349  8.986577  8.329357  7.672138  7.014918
[23,] 16.934712 15.899248 14.641009 14.007196 13.755396 13.222379 12.526141 11.638590 10.751040  9.863489  8.975939  8.088389  7.351600
[24,] 18.098146 14.823018 14.305684 14.509643 14.405165 13.811861 13.415789 12.561281 11.673731 10.786181  9.898630  9.011080  8.123530
[25,] 18.896169 18.164800 17.329164 16.414607 14.662011 14.461630 13.868326 13.483973 12.596422 11.708872 10.821322  9.933771  9.046221
[26,] 18.621266 18.439477 17.960360 17.620380 17.060328 15.719245 14.367434 14.075171 13.519114 12.631563 11.744013 10.856463  9.968912
[27,] 18.253482 17.770501 17.001711 16.480688 16.773926 16.670537 16.265960 15.360243 14.647604 13.251814 12.396193 11.540572 10.684951
[28,] 16.721203 17.426353 16.779299 16.247087 16.154149 16.049045 15.841822 15.546302 15.547080 13.065873 12.834513 11.985632 11.130011
[29,] 16.981816 17.040490 16.186935 15.970621 15.994599 15.721584 15.036518 14.351451 15.037422 14.594160 13.886201 11.627806 10.995717
[30,] 17.534112 16.770798 16.050900 15.497960 15.294562 15.091164 14.773093 14.017256 13.206314 12.931739 13.716036 13.084514 12.010938
[31,] 16.566571 16.843269 16.322830 15.816088 15.180315 14.442201 14.130865 13.927467 13.089489 13.043633 13.654607 13.057380 11.000264
[32,] 19.221045 16.208694 15.860814 15.791481 15.062323 14.555494 14.084018 13.567595 12.967169 12.743139 13.126719 12.833004 10.317035
[33,]        NA        NA 16.765338 15.416288 14.906881 14.537702 13.801816 13.294901 12.823424 12.487549 11.854199 12.398868 11.924874
[34,]        NA        NA        NA 17.321982 14.606861 14.305550 14.009046 13.277195 12.541308 12.034308 11.617390 11.860948 12.026635
[35,]        NA        NA        NA        NA        NA 14.866276 13.861024 13.194812 12.752575 12.016688 11.280801 11.324801 11.434212
[36,]        NA        NA        NA        NA        NA        NA 15.422920 13.416497 12.750285 12.226610 11.492068 10.721466 11.441209
[37,]        NA        NA        NA        NA        NA        NA        NA        NA 12.967213 12.305759 11.639547 11.030140 11.264064
[38,]        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA 11.861233 11.195021 10.984987
[39,]        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA 11.416707 11.233573
[40,]        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA        NA
          [,29]     [,30]     [,31]     [,32]     [,33]    [,34]    [,35]    [,36]    [,37]    [,38]    [,39] [,40]
 [1,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
 [2,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
 [3,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
 [4,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
 [5,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
 [6,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
 [7,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
 [8,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
 [9,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
[10,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
[11,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
[12,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
[13,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
[14,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
[15,]        NA        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
[16,]  4.618589        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
[17,]  4.758269  4.312525        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA
[18,]  5.010974  4.452204  4.068474        NA        NA       NA       NA       NA       NA       NA       NA    NA
[19,]  5.347655  4.690436  4.146140  3.834689        NA       NA       NA       NA       NA       NA       NA    NA
[20,]  5.684336  5.027117  4.369897  3.840075  3.600790       NA       NA       NA       NA       NA       NA    NA
[21,]  6.021018  5.363798  4.706579  4.049359  3.534011       NA       NA       NA       NA       NA       NA    NA
[22,]  6.357699  5.700479  5.043260  4.386041  3.728821 3.230396       NA       NA       NA       NA       NA    NA
[23,]  6.694380  6.037161  5.379941  4.722722  4.065502 3.408283 2.998206       NA       NA       NA       NA    NA
[24,]  7.235979  6.373842  5.716623  5.059403  4.402184 3.744964 3.087745 2.764642       NA       NA       NA    NA
[25,]  8.158671  7.271120  6.383570  5.496019  4.738865 4.081646 3.424426 2.767207 2.530743       NA       NA    NA
[26,]  9.081362  8.193811  7.306261  6.418711  5.531160 4.643610 3.761107 3.103888 2.449432 2.296844       NA    NA
[27,]  9.829330  8.973709  8.118088  7.262467  6.406845 5.551224 4.678751 3.791201 2.903650 2.160129       NA    NA
[28,] 10.274390  9.418768  8.563147  7.625692  6.544549 5.463407 4.382265 3.301123 2.219981 2.936358 2.362119    NA
[29,]  9.950485  9.184824  8.250277  7.319160  6.393031 5.356377 4.223331 2.702818 3.936342 2.967897 2.483721    NA
[30,] 10.182827  8.018503  6.591706  6.424867  5.900775 4.966228 5.220405 3.723734 3.590249 3.456763 3.243517    NA
[31,]  9.508168  8.016073  6.523977  5.063101  3.568153 7.207894 5.725591 4.563291 4.429806 4.296321       NA    NA
[32,]  9.269526  7.777430  6.285335  5.223145  6.372415 7.671605 6.315327 5.402849 5.269364       NA       NA    NA
[33,]  9.008944  8.117673  7.707511  8.466802  9.649717 8.224953 6.905063 6.242406       NA       NA       NA    NA
[34,] 11.611925 10.173731  9.978024  9.809090  9.650137 8.756020 7.494799 7.081964       NA       NA       NA    NA
[35,] 11.278298 10.791298 10.795251 10.460363 10.134704 9.757141 8.084535       NA       NA       NA       NA    NA
[36,] 11.332906 11.160940 10.793515 10.545474 10.130166 9.733947       NA       NA       NA       NA       NA    NA
[37,] 11.492599 11.355787 11.003180 10.726600 10.481233 9.925862       NA       NA       NA       NA       NA    NA
[38,] 11.349030 11.360750 11.217397 10.880931 10.515334       NA       NA       NA       NA       NA       NA    NA
[39,] 11.284212 11.355039 11.116186 10.880957        NA       NA       NA       NA       NA       NA       NA    NA
[40,] 11.132210        NA        NA        NA        NA       NA       NA       NA       NA       NA       NA    NA 
```

似乎我有一个由 x 和 y 点组成的网格，并且对于每个 x,y 数据集，我都有对应的 z。我想知道是否可以从此列表中创建一个数据框。

我尝试使用以下代码来创建数据框。

```
df <- as.data.frame(do.call(rbind,jd)) 
```

但是，当我尝试使用以下命令查看数据时，出现错误。

```
df 
```

我得到的错误是

```
> df
Error in data.frame(V1 = c(" 438562.6", "3348038.8", "       NA", "       NA",  : 
  duplicate row.names: 
```

数据可以在[https://www.dropbox.com/s/dbzulncdfz7pqwr/contour.csv上找到](https://www.dropbox.com/s/dbzulncdfz7pqwr/contour.csv)

**编辑：关于如何解释数据的想法。**

我认为数据格式如下所示：

```
 X1  X2  X3  X4  X5  X6  X7  X8  X9  X10 X11 X12 X13 X14 X15 X16 X17 X18 X19 X20 X21 X22 X23 X24 X25 X26 X27 X28 X29 X30 X31 X32 X33 X34 X35 X36 X37 X38 X39 X40
Y1                                                                                                                                                              
Y2                                                                                                                                                              
Y3                                                                                                                                                              
Y4                                                                                                                                                              
Y5                                                                                                                                                              
Y6                                                                                                                                                              
Y7                                                                                                                                                              
Y8                                                                                                                                                              
Y9                                                                                                                                                              
Y10                                                                                                                                                             
Y11                                                                                                                                                             
Y12                                                                                                                                                             
Y13                                                                                                                                                             
Y14                                                                                                                                                             
Y15                                                                                                                                                             
Y16                                                                                                                                                             
Y17                                                                                                                                                             
Y18                                                                                                                                                             
Y19                                                                                                                                                             
Y20                                                                                                                                                             
Y21                                                                                                                                                             
Y22                                                                                                                                                             
Y23                                                                                                                                                             
Y24                                                                                                                                                             
Y25                                                                                                                                                             
Y26                                                                                                                                                             
Y27                                                                                                                                                             
Y28                                                                                                                                                             
Y29                                                                                                                                                             
Y30                                                                                                                                                             
Y31                                                                                                                                                             
Y32                                                                                                                                                             
Y33                                                                                                                                                             
Y34                                                                                                                                                             
Y35                                                                                                                                                             
Y36                                                                                                                                                             
Y37                                                                                                                                                             
Y38                                                                                                                                                             
Y39                                                                                                                                                             
Y40 
```

所以，我相信我需要创建一个数据框，这样我应该有 1600 个点与 X 和 Y 数据的组合。因为我有 40 X 和 40 Y，所以应该可以创建 1600 个网格点，然后所有的 z 点将是这些点的对应 z。我可能错了。

谢谢。贾巴巴

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:51:27.167

我怀疑

```
data.frame(x = rep(jd$x, each = 40), y = rep(jd$y, times = 40), z = as.vector(jd$z)) 
```

是你需要的。

# html - 控制组中的 Twitter 引导和跨度

> ID：14779084
> 
> 赞同：0
> 
> 时间：2013-02-08T18:32:50.453
> 
> 标签：html, css, forms, twitter-bootstrap

我正在尝试实现一个简单的界面，其中有一系列按钮（复选框），它们是组的一部分。

我想拆分组，所以每行最多只能有 3 个。

```
<div class="container">
  <div class="control-group">
    <p class="pull-left"><label class="control-label" for="Languages">Lingue</label></p>
    <div class="controls">
      <div class="btn-group btn-group-horizontal" data-toggle="buttons-checkbox">
        <input type="checkbox" value="1" id="Languages_0" name="Languages" checked />
        <label class="btn btn-info btn-small active" for="Languages_0">Italiano</label>
        <input type="checkbox" value="2" id="Languages_1" name="Languages" checked />
        <label class="btn btn-info btn-small active" for="Languages_1">Francese</label>
        <input type="checkbox" value="3" id="Languages_2" name="Languages" checked />
        <label class="btn btn-info btn-small active" for="Languages_2">Inglese</label>
        <input type="checkbox" value="4" id="Languages_3" name="Languages"  />
        <label class="btn btn-info btn-small " for="Languages_3">Spagnolo</label>
        <input type="checkbox" value="5" id="Languages_4" name="Languages"  />
        <label class="btn btn-info btn-small " for="Languages_4">Tedesco</label>
        <input type="checkbox" value="6" id="Languages_5" name="Languages"  />
        <label class="btn btn-info btn-small " for="Languages_5">Portoghese</label>
        <input type="checkbox" value="7" id="Languages_6" name="Languages"  />
        <label class="btn btn-info btn-small " for="Languages_6">Bulgaro</label>
        <input type="checkbox" value="8" id="Languages_7" name="Languages"  />
        <label class="btn btn-info btn-small " for="Languages_7">Lettone</label>
      </div>
    </div>
  </div>
</div> 
```

我试图将 span3 放在任何地方，但它似乎只在 IE 中有效。[你可以在这里](http://jsfiddle.net/vandalo/ArUuV/)看到小提琴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T18:45:33.997

您需要分解每组三个复选框/标签，并`div`使用类名将它们放在自己的位置`controls`。

```
<div class="container">
    <div class="control-group">
        <p class="pull-left">
            <label class="control-label" for="Languages">Lingue</label>
        </p>
        <div class="controls">
            <div class="btn-group btn-group-horizontal" data-toggle="buttons-checkbox">
                <input type="checkbox" value="1" id="Languages_0" name="Languages" checked
                />
                <label class="btn btn-info btn-small active" for="Languages_0">Italiano</label>
                <input type="checkbox" value="2" id="Languages_1" name="Languages"
                checked />
                <label class="btn btn-info btn-small active" for="Languages_1">Francese</label>
                <input type="checkbox" value="3" id="Languages_2" name="Languages"
                checked />
                <label class="btn btn-info btn-small active" for="Languages_2">Inglese</label>/></div>
        </div>
        <div class="controls">
            <div class="btn-group btn-group-horizontal" data-toggle="buttons-checkbox">
                <input type="checkbox" value="4" id="Languages_3" name="Languages" />
                <label class="btn btn-info btn-small " for="Languages_3">Spagnolo</label>
                <input type="checkbox" value="5" id="Languages_4" name="Languages"
                />
                <label class="btn btn-info btn-small " for="Languages_4">Tedesco</label>
                <input type="checkbox" value="6" id="Languages_5" name="Languages"
                />
                <label class="btn btn-info btn-small " for="Languages_5">Portoghese</label>
            </div>
        </div>
        <div class="controls">
            <div class="btn-group btn-group-horizontal" data-toggle="buttons-checkbox">
                <input type="checkbox" value="7" id="Languages_6" name="Languages" />
                <label class="btn btn-info btn-small " for="Languages_6">Bulgaro</label>
                <input type="checkbox" value="8" id="Languages_7" name="Languages"
                />
                <label class="btn btn-info btn-small " for="Languages_7">Lettone</label>
            </div>
        </div>
    </div>
</div> 
```

[这是 jsFiddle 上的一个工作示例](http://jsfiddle.net/htmled/erD9T/)。

# javascript - 通过 css 和 javascript 处理背景图像的 y 位置问题

> ID：14779085
> 
> 赞同：0
> 
> 时间：2013-02-08T18:32:51.720
> 
> 标签：javascript, css, background-image, parallax

我根据我找到的教程实现了视差滚动效果。效果很好。但是，当我指定背景图像时，我无法控制 y（垂直）轴。这会导致问题，因为我正在尝试在多个分层图像上设置位置。

对导致问题的原因有任何想法吗？

这是一个外部脚本：

```
$(document).ready(function(){
$('#nav').localScroll(800);

//.parallax(xPosition, speedFactor, outerHeight) options:
//xPosition - Horizontal position of the element
//inertia - speed to move relative to vertical scroll. Example: 0.1 is one tenth the speed of scrolling, 2 is twice the speed of scrolling
//outerHeight (true/false) - Whether or not jQuery should use it's outerHeight option to determine when a section is in the viewport
$('#mainimagewrapper').parallax("50%", 1.3);
$('#secondaryimagewrapper').parallax("50%", 0.5);
$('.image2').parallax("50%", -0.1);
$('#aboutwrapper').parallax("50%", 1.7);
$('.image4').parallax("50%", 1.5); 
```

})

这是另一个外部脚本：

```
(function( $ ){
var $window = $(window);
var windowHeight = $window.height();

$window.resize(function () {
    windowHeight = $window.height();
});

$.fn.parallax = function(xpos, speedFactor, outerHeight) {
    var $this = $(this);
    var getHeight;
    var firstTop;
    var paddingTop = 0;

    //get the starting position of each element to have parallax applied to it      
    $this.each(function(){
        firstTop = $this.offset().top;
    });

    if (outerHeight) {
        getHeight = function(jqo) {
            return jqo.outerHeight(true);
        };
    } else {
        getHeight = function(jqo) {
            return jqo.height();
        };
    }

    // setup defaults if arguments aren't specified
    if (arguments.length < 1 || xpos === null) xpos = "50%";
    if (arguments.length < 2 || speedFactor === null) speedFactor = 0.1;
    if (arguments.length < 3 || outerHeight === null) outerHeight = true;

    // function to be called whenever the window is scrolled or resized
    function update(){
        var pos = $window.scrollTop();              

        $this.each(function(){
            var $element = $(this);
            var top = $element.offset().top;
            var height = getHeight($element);

            // Check if totally above or totally below viewport
            if (top + height < pos || top > pos + windowHeight) {
                return;
            }

            $this.css('backgroundPosition', xpos + " " + Math.round((firstTop - pos) * speedFactor) + "px");
        });
    }       

    $window.bind('scroll', update).resize(update);
    update();
};
})(jQuery); 
```

这是一个部分的CSS：

```
#aboutwrapper {
background-image: url(../images/polaroid.png);
background-position: 50% 0;
background-repeat: no-repeat;
background-attachment: fixed;
color: white;
height: 500px;
width: 100%;
margin: 0 auto;
padding: 0;
}

#aboutwrapper .image4 {
background: url(../images/polaroid2.png) 50% 0 no-repeat fixed;
height: 500px;
width: 100%;
margin: 0 auto;
padding: 0;
}

.image3{
margin: 0 auto;
min-width: 970px;
overflow: auto;
width: 970px; 
} 
```

这两个都被调用来实现视差滚动。我真的只想更具体地控制背景图像的位置。我试过弄乱 CSS 背景位置，也弄乱了第一个 javascript 片段。没运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:50:17.347

只是一个快速的镜头，您是否尝试过实际放置图像，无论是在 div 中还是仅使用 img src 标签来实际移动元素而不是操纵背景图像的 y 轴？

# version - Nuget 版本控制是否忽略 + 内部版本号 SemVer 的表示法？

> ID：14779087
> 
> 赞同：0
> 
> 时间：2013-02-08T18:32:54.353
> 
> 标签：version, nuget, nuget-package

参考： [Nuget 版本控制](http://docs.nuget.org/docs/reference/versioning) [SemVer](http://semver.org/)

nuget 版本控制文档内容如下：

> SemVer 还为那些创建每日或连续构建的人引入了内部版本号的概念。公共 NuGet.org 库不支持此功能。

它说它在 nuget.org 库中不受支持，但我想知道VS`nuget.exe -update`中`-install`的包控制台是如何处理它的……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T17:53:15.047

看看[`SemanticVersion.cs`](https://github.com/NuGet/NuGet2/blob/861741bd780225a542c73a1d0904dd33b33a7a3d/src/Core/SemanticVersion.cs#L18)Nuget[代码库](https://github.com/NuGet/NuGet2)。这提供了以下正则表达式来验证提供的版本。如果正则表达式不匹配，则版本无效：

```
new Regex(@"^(?<Version>\d+(\s*\.\s*\d+){0,3})(?<Release>-[a-z][0-9a-z-]*)?$", 
            RegexOptions.Compiled 
          | RegexOptions.IgnoreCase 
          | RegexOptions.ExplicitCapture); 
```

预发布字符串的格式严格必须以破折号开头，然后是字母，然后是破折号和字母数字的任意组合。否`+`或`.`允许。

尝试`pack`使用有效版本以外的任何内容，您将获得：

```
Attempting to build package from 'ConsoleApplication1.csproj.nuspec'.
'1.0.1+421.500' is not a valid version string. 
Parameter name: version 
```

如果你不知何故得到了一个版本无效的包，那么 nuget 打包过程肯定被绕过了，我只能假设尝试推送它会产生不可预知的结果。

# javascript - 有什么方法可以检查 Chrome 浏览器的安全设置吗？

> ID：14779088
> 
> 赞同：0
> 
> 时间：2013-02-08T18:32:54.867
> 
> 标签：javascript, security, google-chrome, https

我想从 https:// 网站的 http:// 源访问一些代码。我有一个弹出窗口提示用户更改他们的安全设置，但我不希望每次访问网站主页时都显示弹出窗口。有什么方法可以检查他们的 Google Chrome 浏览器设置，以表明他们是否已经启用了不安全元素的显示？

目前我有：

```
function alertLoadData() {
    var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
    var secure = isSecure();
    if (is_chrome && secure) {
    alert('Please click on the shield to the right of the address bar to show the contents of the site. NOTE: the contents come from an insecure http:// address.');
    }
} 
```

Where`isSecure()`检查它们是否在网站的 https:// 部分。我想要类似的东西：`alreadyEnabledSecurity()`它检查用户是否已经启用了不安全的内容来显示，如果是这样：

```
function alertLoadData() {
    var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
    var secure = isSecure();
    var settings = alreadyEnabledSecurity();
    if (is_chrome && secure && !settings) {
    alert('Please click on the shield to the right of the address bar to show the contents of the site. NOTE: the contents come from an insecure http:// address.');
    }
} 
```

# perl - 在 Mac OS X 10.7 上安装 CitrusPerl 中的 Event::Lib

> ID：14779090
> 
> 赞同：0
> 
> 时间：2013-02-08T18:33:14.243
> 
> 标签：perl, cpan, perl-module, libevent

我正在开发一个需要 Event::Lib 的 Perl 项目。我在 MacOS 10.7 上，并且正在运行[Citrus Perl](http://www.citrusperl.com/ "柑橘类 Perl")而不是系统 Perl。我从源代码安装了[libevent](http://libevent.org/ "libevent")，它编译得很好。但是，当我去安装 Event::Lib 时，我遇到了一些错误：

```
cp Lib/Event/Lib.pm blib/lib/Event/Lib.pm
Skip blib/lib/Event/Lib.pm (unchanged)
/Users/username/code/CitrusPerl/bin/perl /Users/username/code/CitrusPerl/lib/ExtUtils/xsubpp  -typemap /Users/username/code/CitrusPerl/lib/ExtUtils/typemap -typemap typemap  Lib.xs > Lib.xsc && mv Lib.xsc Lib.c
gcc -c  -I/usr/local/include -fno-common -DPERL_DARWIN -no-cpp-precomp -arch i386 -B/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/gcc -B/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/lib/gcc -isystem /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include -F/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/System/Library/Frameworks -mmacosx-version-min=10.6 -DUSE_SITECUSTOMIZE -Duselargefiles -DPERL_RELOCATABLE_INCPUSH -fno-merge-constants -fno-strict-aliasing -pipe -fstack-protector  -O3   -DVERSION=\"1.03\" -DXS_VERSION=\"1.03\"  "-I/Users/username/code/CitrusPerl/lib/CORE"  -DHAVE_CONFIG_H  Lib.c
Lib.xs: In function ‘boot_Event__Lib’:
Lib.xs:275: error: ‘LOG_LEVEL’ undeclared (first use in this function)
Lib.xs:275: error: (Each undeclared identifier is reported only once
Lib.xs:275: error: for each function it appears in.)
make: *** [Lib.o] Error 1 
```

有人对接下来要尝试什么有任何想法吗？

编辑：尝试一些“o conf”选项后：

```
cpan[1]> o conf makepl_arg "INC=-I/usr/local/include LIBS=-L/usr/local/lib -levent"                                                             
    makepl_arg         [INC=-I/usr/local/include LIBS=-L/usr/local/lib -levent]
Your /Users/username/code/CitrusPerl/vendor/lib/CPAN/Config.pm file
is not writable. I will attempt to write your configuration to
/Users/username/.cpan/CPAN/MyConfig.pm instead.

Old configuration file /Users/username/.cpan/CPAN/MyConfig.pm
    moved to /Users/username/.cpan/CPAN/MyConfig.pm.bak
commit: wrote '/Users/username/.cpan/CPAN/MyConfig.pm'

cpan[2]> install Event::Lib                                                                                                                     
Reading '/Users/username/code/CitrusPerl/cpan/Metadata'
  Database was generated on Thu, 07 Feb 2013 21:53:02 GMT
Fetching with LWP:
http://www.perl.org/CPAN/authors/01mailrc.txt.gz
Reading '/Users/username/code/CitrusPerl/cpan/sources/authors/01mailrc.txt.gz'
............................................................................DONE
Fetching with LWP:
http://www.perl.org/CPAN/modules/02packages.details.txt.gz
Reading '/Users/username/code/CitrusPerl/cpan/sources/modules/02packages.details.txt.gz'
  Database was generated on Thu, 14 Feb 2013 15:41:03 GMT
............................................................................DONE
Fetching with LWP:
http://www.perl.org/CPAN/modules/03modlist.data.gz
Reading '/Users/username/code/CitrusPerl/cpan/sources/modules/03modlist.data.gz'
............................................................................DONE
Writing /Users/username/code/CitrusPerl/cpan/Metadata
Running install for module 'Event::Lib'
Running make for V/VP/VPARSEVAL/Event-Lib-1.03.tar.gz
Fetching with LWP:
http://www.perl.org/CPAN/authors/id/V/VP/VPARSEVAL/Event-Lib-1.03.tar.gz
Checksum for /Users/username/code/CitrusPerl/cpan/sources/authors/id/V/VP/VPARSEVAL/Event-Lib-1.03.tar.gz ok
Scanning cache /Users/username/code/CitrusPerl/cpan/build for sizes
............................................................................DONE

  CPAN.pm: Building V/VP/VPARSEVAL/Event-Lib-1.03.tar.gz

Checking existance of libevent...ld: warning: directory not found for option '-L/sw/lib'
ld: warning: directory not found for option '-L/opt/local/lib'
yes
Checking capabilities...
  event_set_log_callback...no
  event_priority_init...no
Additional defines:  

Checking if your kit is complete...
Looks good
Writing Makefile for Event::Lib
Writing MYMETA.yml and MYMETA.json
cp Lib/Event/Lib.pm blib/lib/Event/Lib.pm
Skip blib/lib/Event/Lib.pm (unchanged)
/Users/username/code/CitrusPerl/bin/perl /Users/username/code/CitrusPerl/lib/ExtUtils/xsubpp  -typemap /Users/username/code/CitrusPerl/lib/ExtUtils/typemap -typemap typemap  Lib.xs > Lib.xsc && mv Lib.xsc Lib.c
gcc -c  -I/usr/local/include -fno-common -DPERL_DARWIN -no-cpp-precomp -arch i386 -B/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/gcc -B/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/lib/gcc -isystem /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include -F/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/System/Library/Frameworks -mmacosx-version-min=10.6 -DUSE_SITECUSTOMIZE -Duselargefiles -DPERL_RELOCATABLE_INCPUSH -fno-merge-constants -fno-strict-aliasing -pipe -fstack-protector  -O3   -DVERSION=\"1.03\" -DXS_VERSION=\"1.03\"  "-I/Users/username/code/CitrusPerl/lib/CORE"  -DHAVE_CONFIG_H  Lib.c
Lib.xs: In function ‘boot_Event__Lib’:
Lib.xs:275: error: ‘LOG_LEVEL’ undeclared (first use in this function)
Lib.xs:275: error: (Each undeclared identifier is reported only once
Lib.xs:275: error: for each function it appears in.)
make: *** [Lib.o] Error 1
  VPARSEVAL/Event-Lib-1.03.tar.gz
  /usr/bin/make -- NOT OK
Running make test
  Can't test without successful make
Running make install
  Make had returned bad status, install seems impossible
Failed during this command:
 VPARSEVAL/Event-Lib-1.03.tar.gz              : make NO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:17:59.647

我能够在大约 10 分钟的时间内完成这项工作。

*   使用[http://perlbrew.pl](http://perlbrew.pl)
*   使用[http://mxcl.github.com/homebrew](http://mxcl.github.com/homebrew)

然后：

*   酿造安装 libevent
*   perlbrew 安装 perl-5.16.0
*   perlbrew 切换 perl-5.16.0
*   perl -MCPAN -e '安装事件::Lib'

我认为以上是提供可以切换的适当开发环境的最佳实用程序；IE 你可以切换 Perl 版本的飞。此外，它们不会影响您的本机系统。无论如何，如果您决定不使用上述内容，那么您的特定错误看起来与缺少头文件有关。我会断言 libevent 标头确实在 /usr/local/include 中。

祝你好运。

# objective-c - Objective C 委托和类方法与实例方法

> ID：14779095
> 
> 赞同：-1
> 
> 时间：2013-02-08T18:33:41.767
> 
> 标签：objective-c, delegates, class-method, instance-methods

在以下[链接](https://stackoverflow.com/questions/10562515/how-to-use-delegation-or-pass-messages-from-class-methods)中有一个类似的问题， 但它并没有完全回答我的问题。

我正在为 Facebook 设置一个助手类（遵循委托模式）。类方法之一的示例是：

```
+ (void)openSession:(id)delegate; 
```

此方法调用 Facebook`openActiveSessionWithReadPermissions`方法，该方法需要一个 completionHandler 块。在块中调用委托方法是否有意义，`sessionStateChanged`如下所示？

```
[delegate sessionStateChanged]; 
```

或者最好使用 Facebook 帮助程序类的实例方法并`[self.delegate sessionStateChanged]`在 completionHandler 块中调用委托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:58:25.343

如果仅用于单个回调，则最好使用块参数而不是委托作为参数。

`+ (void)openSession:(void (^)(void))sessionStateChangedBlock`

这样您就不必担心定义委托协议。

如果要使用委托，则必须在类级别定义委托变量。您不能使用`[self.delegate sessionStateChanged]`，因为您将委托保存为类变量。`self`仅在类的实例中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:53:53.027

我尝试了这两种方法，即使用类和实例方法。它们中的任何一个都可以，尽管遵循正确的委托模式，我相信使用实例方法更合适。

# asp.net - 在asp.net MVC 4中为问卷答案呈现复杂的编辑视图

> ID：14779096
> 
> 赞同：2
> 
> 时间：2013-02-08T18:33:43.543
> 
> 标签：asp.net, asp.net-mvc

我有一种情况，我正在尝试使用 Web 界面重新创建一种记录纸质问卷表格的方法。

我有一组我认为适合该目的的数据库表，但我正在努力寻找一种解决方案来创建允许用户管理答案的编辑视图。

首先我的表结构如下所示： ![用于存储问题和答案的数据库结构](../Images/58e9557cbd2d63eecb978268dc78cec2.png)

我省略了数据库的其余部分，因为它与手头的问题并不真正相关。

基本上，我有不同的评估，它们有一个表格类型。表单类型有一组与之关联的问题。一个问题具有与其相关联的各种数据，即答案的预期格式，可以是文本、值、单选或多选。最后有一个表格来记录每个问题的答案。如果一个问题是多项选择，则此处可能有多个条目。

我已经到了这样的阶段，我意识到我需要在渲染时创建一组答案并显示一个合适的编辑器。我需要编辑器考虑格式，如果它是多选或单选显示下拉或复选框数组。

这就是我的智商让我失望的地方！

我正在进行的代码如下所示：

首先，我有一个简单的类来存储视图模型的问题和答案的所有细节。

```
public class InitialAssessmentAnswerDTO
{
    public int QuestionID { get; set; }
    public string Question { get; set; }
    public string Format { get; set; }
    public IEnumerable<QuestionPossibleAnswer> PossibleAnswers { get; set; }

    //different answer types
    public bool AnswerYesNo { get; set; }
    public int? AnswerID { get; set; }
    public string AnswerText { get; set; }
    public int? AnswerValue { get; set; }
    public string QuestionSection { get; set; }

    public InitialAssessmentAnswerDTO(IEnumerable<QuestionPossibleAnswer> answers)
    {
        PossibleAnswers = answers;
    }

    public InitialAssessmentAnswerDTO()
    {

    }
} 
```

然后我有一个 repo 方法，可以创建或获取表单的现有答案。

...

```
var form = Context.Forms.FirstOrDefault(p => p.FormName == "Initial Assessment");
        var initialAnswers = new List<InitialAssessmentAnswerDTO>();

        if (form != null)
        {
            var questions = form.QuestionsForForms;

            foreach (var question in questions)
            {
                var a = new InitialAssessmentAnswerDTO();
                a.QuestionID = question.QuestionID;
                a.Question = question.Question.QuestionText;
                a.QuestionSection = question.Question.Section;
                a.Format = question.Question.QuestionAnswerFormat.Format;
                a.PossibleAnswers = question.Question.QuestionPossibleAnswers;

                var answer = ia.InitialAssessmentAnswers.FirstOrDefault(p => p.QuestionID == question.QuestionID);
                if (answer == null)
                {
                    //set some default values here
                }
                else
                {
                    a.AnswerID = answer.id;
                    a.AnswerValue = answer.AnswerValue;
                }
            }
        } 
```

所以从理论上讲，我应该最终得到一个 Viewmodel，它可以为每个问题提供答案。我的问题是我不知道最好的方法：

*   A - 以可管理的方式呈现对象列表
*   B - 显示下拉列表或复选框数组

我是否走错了方向？有没有更简单的方法？我是否过度考虑了解决方案？

感谢您的时间，并为类似问题的文章道歉。

# loops - 千里马 For 循环

> ID：14779099
> 
> 赞同：2
> 
> 时间：2013-02-08T18:33:54.647
> 
> 标签：loops, for-loop, maxima

我正在尝试编写一个最大值循环，该循环将 i 通过值 1 到 21 进行迭代，对于 i 的每个单独值，变量 j 将通过值 1 到 21 进行迭代。在 j 的每个值处，将两者与每个值进行比较其他，如果我

```
for i:1 while i<=21 do(for j:1 while j<=21  do 
(if i<j then aa:realpart(c1[-j+i+21]))) and do aa1:makelist(aa,i,1,21,1); 
```

wxmaxima 上什至什么都没有显示，它表现得好像没有看到这部分代码。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:19:03.720

有人刚刚在 Maxima 邮件列表上问了一个相当相似的[问题](http://thread.gmane.org/gmane.comp.mathematics.maxima.general/41113)，在两天前跟进了他们[之前的一个问题。](http://thread.gmane.org/gmane.comp.mathematics.maxima.general/41076)

现在，一位名叫 Rupert Swarbrick 的非常好的小伙子建设性地回答了这两个问题。他**太好**了，他会再次回复（还）。看起来你正在尝试做的是制作一个矩阵，`aa`，这样它`aa[i,j]`在对角线上或之下为零，并且等于`c1[-j+i+21]`对角线之上。假设是这种情况，请尝试以下操作：

```
genmatrix (lambda ([i,j], if i<j then realpart(c1[-j+i+21]) else 0), 21); 
```

如果你想要别的东西，你将不得不问一个更具体的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T02:26:06.283

让我们看看你的代码：

```
for i:1 while i<=21 do(for j:1 while j<=21  do 
(if i<j then aa:realpart(c1[-j+i+21]))) and do aa1:makelist(aa,i,1,21,1); 
```

更清楚地格式化它，它是：

```
for i:1 while i<=21 do
   (for j:1 while j<= 21 do
       (if i<j then aa:realpart(c1[-j+i+21])
       )
   ) 
and 
do aa1:makelist(aa,i,1,21,1); 
```

好吧，“and”是一个布尔运算符，将它应用于两个循环并不是很有意义（除非循环返回布尔值），尽管 Maxima 允许您编写它。您可能想要编写 (a,b)，而不是 (a and b) 或 (a and do b)，它执行 a 然后 b。

嵌套可能也不是您想要的。

第二个循环是“做 aa1:...”。在 Maxima 中，“do xxx”相当于“while true do xxx”，即无限循环。这可以解释为什么此代码从未返回。

顺便说一句，写“for i:1 while i<=21 do...”的更简单的方法是“for i thru 21 do...”。

希望这可以帮助。

```
 -s 
```

# nuget - Nuget 文件被打包到错误的位置

> ID：14779100
> 
> 赞同：5
> 
> 时间：2013-02-08T18:33:57.750
> 
> 标签：nuget, nuget-package, nuspec

我有一个带有文件规范的 nuget 规范文件：

```
 <files>
     <file src="content\App_Start\*" target="content\App_Start" />
     <file src="content\Views\*" target="content\Views" />
     <file src="content\web.config.transform" target="content" />
     <file src="readme.txt" target="" />
   </files> 
```

这曾经是：

```
 <files>
     <file src="content\*" target="content" />
     <file src="readme.txt" target="" />
   </files> 
```

但这也有奇怪的行为（特别是 App_Start 没有被包括在内，尽管仍然为视图添加了额外的内容文件夹......见下面的描述）

项目本身按格式排列

```
 \<root>
 |_ readme.txt
 |_ content
      |_ Views
      |    |_ Home
      |         |_ <viewname>.cshtml
      |         |_ <viewname2>.cshtml
      |_ App_Start
           |_ <PreprocessFilename>.cs.pp 
```

然而，对我来说似乎很奇怪的行为是 NuGet 包正在生成一个具有以下结构的 zip 文件：

```
 \<root>
 |_ readme.txt
 |_ content
      |_ content
      |    |_ Views
      |         |_ Home
      |              |_ <viewname>.cshtml
      |              |_ <viewname2>.cshtml
      |_ App_Start
      |    |_ <PreprocessFilename>.cs.pp
      |_ readme.txt 
```

所以关于nuget打包文件路径：

*   为什么 readme.txt 在两个地方重复？
*   为什么视图被赋予第二个“内容”子文件夹？（而 App_Start 不是）
*   如何使内容文件夹的副本准确反映实际结构？
*   如何返回`<file src="content\*" target="content" />`指令以使 nuspec 文件更“可维护”

如果它是相关的，我正在使用一个`.csproj`文件来创建包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-22T17:22:51.057

行为似乎是，当您打包 .csproject 时`nuget pack MyProject.csproj`，它会首先根据您的项目结构安排包，然后查看 nuspec 以获取更多说明。但是，当您按项目打包时，似乎没有任何方法可以让您的 nuspec*删除*上一步中添加的内容。

因此，如果默认项目结构导致您的包中包含不需要的内容，您应该依赖直接由 .nuspec 打包。`nuget pack MyProject.nuspec`然后它只会获取在您的 nuspec 中指定的内容，您可以在其中准确地定义您想要的内容。

如果您有一个*几乎*具有您想要的结构的大项目，那么首先从项目构建包可能会很方便，使用[Nuget 包资源管理器](http://npe.codeplex.com/)从该包中提取一个 nuspec，稍后您可以调整它以满足您的需要，最后您打包反对。这样您就不必从头开始构建它。

**编辑**

或者...您可以在 .csproj 上使用[-Exclude 参数](https://docs.nuget.org/consume/command-line-reference#pack-command-options)执行打包，告诉它忽略某些特定文件并在 .nuspec 中为这些文件编写自定义规范，该规范将自动读取以获取其他数据。

不过，我个人认为将 .nuspec 作为包的唯一定义更为简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T17:56:47.583

我遇到了同样的问题，我能够解决它，但有点像 IMO。我希望看到一个更好的解决方案，以便我的项目可以在最终包中包含我想要的目录树，但我今天需要它来工作所以......

为了解决这个问题，我必须做的是将内容目录中的所有子目录拉出并放置在根级别，然后将目标设置为我希望它最终进入的子目录。

```
<file src="Scripts\" target="content\Scripts" /> 
```

# php - 检查目录中是否存在不在 mysql 数据库中的文件

> ID：14779103
> 
> 赞同：0
> 
> 时间：2013-02-08T18:34:05.100
> 
> 标签：php, mysql, file

我有这段代码检查我的数据库表“文件”中是否有不在目录“视频/测试”中的文件名。我一直在尝试编辑此代码，以便它执行相反的操作，即它检查目录“video/test”中是否有任何不在数据库表“files”中的文件名。我在将内容切换到条款的另一边时遇到了一些麻烦。我收到 mysql 语法错误。谁能帮我解决这个问题

```
$filenames = scandir("video/test");
$sql = sprintf( 'SELECT * FROM files WHERE filename not in ("%s")', implode( '","', $filenames ) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:08:09.103

像这样的东西：

```
$filenames = scandir("video/test");
$files = implode(",", $filenames );
$sql = sprintf( "SELECT * FROM files WHERE filename not in (".$files.")" ); 
```

试试看 ;）

萨卢多斯。

# mysql - MySQL：如何允许远程连接到 mysql

> ID：14779104
> 
> 赞同：412
> 
> 时间：2013-02-08T18:34:05.003
> 
> 标签：mysql, mysql-workbench

我已经在我的本地机器上安装了 MySQL Community Edition 5.5，我想允许远程连接，以便我可以从外部源连接。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：854
> 
> 时间：2013-02-08T18:43:25.487

默认情况下，MySQL 允许这样做。

默认情况下禁用的是远程`root`访问。如果要启用它，请在本地运行此 SQL 命令：

```
 GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'password' WITH GRANT OPTION;
 FLUSH PRIVILEGES; 
```

然后在你的文件中找到以下行并将**其注释掉**`my.cnf`，该文件通常存在`/etc/mysql/my.cnf`于 Unix/OSX 系统上。在某些情况下，该文件的位置是 /etc/mysql/mysql.conf.d/mysqld.cnf)。

如果是 Windows 系统，你可以在 MySQL 安装目录中找到它，通常是这样`C:\Program Files\MySQL\MySQL Server 5.5\` 的，文件名是`my.ini`.

换线

```
 bind-address = 127.0.0.1 
```

到

```
 #bind-address = 127.0.0.1 
```

并重新启动 MySQL 服务器（[Unix/OSX](https://superuser.com/questions/282115/how-to-restart-mysql)和[Windows](https://stackoverflow.com/questions/12972434/restart-mysql-server-on-windows-7)）以使更改生效。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2016-05-12T06:32:47.410

完成上述所有操作后，我仍然无法`root`远程登录，但 Telnetting 到端口`3306`确认`MySQL`正在接受连接。

我开始查看 MySQL 中的用户，发现有[多个 root 用户](https://serverfault.com/questions/235593/mysql-log-shows-3-root-users-2-without-passwords-why)使用不同的密码。

```
select user, host, password from mysql.user; 
```

所以在`MySQL`我再次[为root设置了所有密码](http://www.cyberciti.biz/faq/mysql-change-root-password/)，我终于可以远程登录了`root`。

```
use mysql;
update user set password=PASSWORD('NEWPASSWORD') where User='root';
flush privileges; 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2017-11-14T12:51:12.283

只是根据我的经验，您可以在此路径下找到配置文件`/etc/mysql/mysql.conf.d/mysqld.cnf`。

（我挣扎了一段时间才找到这条路）

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2015-09-22T10:03:46.293

就我而言，我试图连接到 cent OS 上的远程 mysql 服务器。经过很多解决方案（授予所有权限、删除 ip 绑定、启用网络）问题仍然没有得到解决。

事实证明，在研究各种解决方案时，我遇到了 iptables，这让我意识到 mysql 端口 3306 不接受连接。

这是关于我如何检查和解决此问题的小说明。

*   检查端口是否接受连接：

```
telnet (mysql 服务器 ip) [portNo]
```

*   添加 ip table 规则以允许端口上的连接：

```
iptables -A INPUT -i eth0 -p tcp -m tcp --dport 3306 -j ACCEPT
```

*   不建议将其用于生产环境，但如果您的 iptables 配置不正确，添加规则可能仍无法解决问题。在这种情况下，应执行以下操作：

```
服务 iptables 停止
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2020-04-03T12:39:03.280

远程登录的所有过程。远程登录默认关闭。您需要为所有 ip 手动打开它..以授予所有 ip 访问权限

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'password'; 
```

具体IP

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'your_desire_ip' IDENTIFIED BY 'password'; 
```

然后

```
flush privileges; 
```

您可以检查您的用户主机和密码

```
SELECT host,user,authentication_string FROM mysql.user; 
```

现在你的职责是改变这一点

```
bind-address = 127.0.0.1 
```

你可以找到这个

```
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf 
```

如果你在那里找不到这个然后试试这个

```
sudo nano /etc/mysql/my.cnf 
```

在此发表评论

```
#bind-address = 127.0.0.1 
```

然后重启Mysql

```
sudo service mysql restart 
```

现在享受远程登录

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2017-12-30T13:52:37.720

请按照下面提到的步骤为 MySQL 用户设置通配符远程访问。

> (1) 打开cmd。
> 
> (2) 导航到路径 C:\Program Files\MySQL\MySQL Server 5.X\bin 并运行此命令。
> 
> **mysql -u 根目录 -p**
> 
> (3) 输入root密码。
> 
> (4) 执行以下命令提供权限。
> 
> **将 *.* 上的所有权限授予由“密码”标识的“用户名”@“IP”；**
> 
> USERNAME：您希望连接到 MySQL 服务器的用户名。
> 
> IP：您希望允许访问 MySQL 服务器的公共 IP 地址。
> 
> PASSWORD：使用的用户名的密码。
> 
> IP 可以替换为 % 以允许用户从任何 IP 地址进行连接。
> 
> (5) 执行命令刷新权限并退出。
> 
> **同花顺特权；**
> 
> **出口;** 或**\q**

[![在此处输入图像描述](../Images/4fde151a1b9f9f80644df0b5f7defced.png)](https://i.stack.imgur.com/8bD4d.png)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-02-08T18:42:20.253

如果您的 MySQL 服务器进程仅在 127.0.0.1 或 ::1 上侦听，那么您将无法远程连接。如果您有一个`bind-address`设置，`/etc/my.cnf`这可能是问题的根源。

您还必须为非`localhost`用户添加权限。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-07-04T14:48:29.383

如果您从`brew`它安装 MySQL，则默认情况下确实只侦听本地接口。要解决此问题，您需要编辑`/usr/local/etc/my.cnf`并将`bind-address`from更改`127.0.0.1`为`*`.

然后运行`brew services restart mysql`。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-10-06T09:12:54.890

在使用**MySQL**服务器作为数据库的**Java 项目**上工作时，我不得不面对这个挑战。

 ****我是这样做的**：

首先，确认你的**MySQL**服务器配置允许远程连接。使用您喜欢的文本编辑器打开 MySQL 服务器配置文件：

```
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf 
```

向下滚动到**bind-address**行并确保将其**注释掉**或替换为`0.0.0.0`（以允许所有远程连接）或替换为您想要远程连接的**IP 地址**。

进行必要的更改后，保存并退出配置文件。通过重新启动 MySQL 服务来应用对 MySQL 配置文件所做的更改：

```
sudo systemctl restart mysql 
```

接下来，登录到安装它的服务器上的 MySQL 服务器控制台：

```
mysql -u root -p 
```

输入你的**mysql用户密码**

检查您想要的用户已经可以访问的**主机。**在我的情况下，用户是`root`：

```
SELECT host FROM mysql.user WHERE user = "root"; 
```

这给了我这个输出：

```
+-----------+
| host      |
+-----------+
| localhost |
+-----------+ 
```

接下来，我运行以下命令以授予`root`用户对名为的数据库的远程访问权限`my_database`：

```
USE my_database;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'my-password'; 
```

**注意**：`%`授予用户从网络上所有主机的远程访问权限。您可以使用以下命令指定要授予用户访问权限的各个主机的 IP 地址 -`GRANT ALL PRIVILEGES ON *.* TO 'root'@'Ip-Address' IDENTIFIED BY 'my-password';`

之后，我检查了用户现在可以访问的**主机。**在我的情况下，用户是`root`：

```
SELECT host FROM mysql.user WHERE user = "root"; 
```

这给了我这个输出：

```
+-----------+
| host      |
+-----------+
| %         |
| localhost |
+-----------+ 
```

最后，您可以尝试使用以下命令从另一台服务器连接到 MySQL 服务器：

```
mysql -u username -h mysql-server-ip-address -p 
```

其中**u**代表**user**，**h**代表**mysql-server-ip-address**，**p**代表**password**。所以在我的情况下是：

```
mysql -u root -h 34.69.261.158 -p 
```

输入你的**mysql用户密码**

您应该根据您的**MySQL**服务器版本获得此输出：

```
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 4
Server version: 5.7.31 MySQL Community Server (GPL)

Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
```

**资源**：[如何允许远程连接到 MySQL](https://phoenixnap.com/kb/mysql-remote-connection)

就这样。

**我希望这有帮助**

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-12-13T21:13:55.383

仅供参考，我用这个问题解决了几个小时。最后我打电话给我的托管服务提供商，发现在我的情况下使用云服务器，在 1and1 的控制面板中，他们有一个二级防火墙，你必须克隆并添加端口3306\. 添加后我直接进入..

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-12-02T12:21:26.003

对于需要它的人，如果您的防火墙服务正在运行，请检查防火墙端口 3306 是否也打开。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-11-25T08:39:23.970

这篇博客[How to setup a MySQL server on Local Area Network](https://medium.com/@kasunsiyambalapitiya/how-to-setup-a-mysql-server-on-local-area-network-lan-c3c5012c7d6b)将有助于`MySQL`从头开始设置

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-05-24T20:00:21.790

如果`mysqld`将[绑定地址](https://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_bind-address)设置为环回/本地地址（例如`127.0.0.1`），则无法从远程主机访问服务器，因为无法从任何远程主机访问环回接口。

将此选项设置为`0.0.0.0`（`::`对于 IPv4+6）以接受来自任何主机的连接，或者如果您只想允许一个接口上的连接，则设置为另一个外部可访问地址。

[来源](https://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_bind-address)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-05-19T12:07:46.840

对于 OS X 用户，请注意 bind-address 参数通常设置在 launchd plist 中，而不是 my.ini 文件中。所以就我而言，我`<string>--bind-address=127.0.0.1</string>`从`/Library/LaunchDaemons/homebrew.mxcl.mariadb.plist`.

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-01-30T11:56:03.287

启用远程 root 访问可能很危险。如果您要设置具有更多限制性权限的用户帐户，那将是更好的选择。以下三个步骤应该可以做到。

1.  确保以开头的行`bind-address ...`至少在您的 my.ini 或 my.cnf 文件中被注释掉。如果它不存在，请继续。`C:\ProgramData\MySQL\MySQL Server 8.0`您可以在 Windows中找到此文件。

2.  然后，检查您正在与之建立连接的用户帐户是否`localhost`在“限制主机匹配”字段中没有。虽然不建议这样做，但您可以改为`%`输入该字段以进行测试。您可以通过使用 MySQL Workbench 打开与服务器的本地连接，然后从菜单栏中转到服务器>用户和权限并找到要连接的用户帐户来执行此操作。

“限制主机匹配”字段是不允许您在非本地连接的。即，它将接受的连接限制为 IP 地址模式。理想情况下，您应该从静态 IP 地址或子网访问 MySQL 服务器，以便尽可能限制。

3.  显然，您的防火墙应该允许 MySQL 服务器应用程序通过您想要的端口进行通信。您和您的服务器之间的物理网络设备应该允许在您要连接的端口上进行通信。（通常为 3306 端口）

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-07-16T19:00:21.587

有时需要**在 Windows 上使用 pc 的名称**

**第一步）**放入mysql的配置文件：

> mysqld.cnf SET 绑定地址= 0.0.0.0

（让 recibe 通过 tcp/ip 连接）

**第二步）**在 mysql 中创建用户，表用户，**在 windows 属性上使用 pc 名称**，而 **不是 ip**

[![在此处输入图像描述](../Images/e3e7e8b9a090580891981c0cce540cbb.png)](https://i.stack.imgur.com/bXLab.png)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2022-02-09T08:19:04.450

*   检查远程服务器授予通配符访问端口 3306 的权限：

> 须藤 lsof -i -P -n | grep 听

它不应该是这样的：

> mysqld 23083 mysql 21u IPv4 145900142 0t0 TCP `127.0.0.1`:3306 (LISTEN)

在这种情况下，我们需要更新 /etc/mysql/mysql.conf.d/mysqld.cnf 或 /etc/mysql/mariadb.conf.d/50-server.cnf ：

绑定地址 = 127.0.0.1 --> 0.0.0.0

然后重启mysql“sudo service mysql restart”

为了测试来自客户端的 mySQL 连接：

> nc -vz <主机地址> 3306**

# php - 这是获取日期时间的不正确方法吗？

> ID：14779106
> 
> 赞同：2
> 
> 时间：2013-02-08T18:34:12.203
> 
> 标签：php, datetime

我通过这种方式获得日期时间：

```
class DB_Functions extends DB_Connect{

    private $dbConnect = "";
    public $dtime;

    public function __construct() {
        $this->dbConnect = $this->pdo_connect();
        $this->dtime = new DateTime();
    }

    public function destruct() {
        $this->dbConnect = null;
    }

    public function exampleInsert() {
        .
        .
        .
        $result->bindParam(':dateCreation',$this->dtime->format("Y-m-d H:i:s"),PDO::PARAM_STR);
    }
} 
```

然后当我使用**dtime**插入表时，如下所示：

```
Line 1708: $result->bindParam(':dateCreation',$this->dtime->format("Y-m-d H:i:s"),PDO::PARAM_STR); 
```

显示此错误：

```
<b>Strict Standards</b>:  Only variables should be passed by reference in <b>include\DB_Functions.php</b> on line <b>1708</b><br /> 
```

我获得日期时间的声明是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:39:26.273

问题是您使用`bindParam()`的是实际将变量绑定到查询中的参数。这必须是一个变量，而不是返回值的方法调用。

这允许使用如下：

```
$value = 'somevalue';
$result->bindParam(':some_field', $value);
$value = 'someothervalue';
$result->execute(); // executes query with 'someothervalue' passed as parameter. 
```

在您的情况下，您可能想要使用`bindValue()`. 它实际上以不可变的方式将值绑定到参数。要么将格式化的日期时间存储到不同的类变量中，然后继续使用`bindParam()`该新变量。

# wpf - 将滚动条添加到框架 WPF

> ID：14779109
> 
> 赞同：2
> 
> 时间：2013-02-08T18:34:19.807
> 
> 标签：wpf, scrollbar, frame, scrollviewer

我加载到框架中的页面之一比框架本身大得多。我已经尝试了在[Frame on a resizable Window 上找到的说明应该显示 Scrollbar](https://stackoverflow.com/questions/8469548/frame-on-a-resizable-window-should-show-scrollbar)，我生成的 xaml 看起来像这样：

```
<ScrollViewer>
<Frame 
    ScrollViewer.VerticalScrollBarVisibility="Visible" 
    ScrollViewer.CanContentScroll="True" 
    Content="" 
    Name="mainFrame" 
    Grid.Row="1" 
    NavigationUIVisibility="Hidden" 
    Source="LoginPage.xaml"/>
</ScrollViewer> 
```

不幸的是，当我运行这个 WPF 应用程序时，页面和/或框架是完全隐藏的。删除代码顶部和底部的 2 个 ScrollViewer 标签允许我再次导航，但问题页面仍然没有滚动条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T18:39:17.037

我的第一个猜测是你正在通过嵌套丢失你想要的网格行。尝试这个：

```
<ScrollViewer Grid.Row="1" >
<Frame 
    ScrollViewer.VerticalScrollBarVisibility="Visible" 
    ScrollViewer.CanContentScroll="True" 
    Content="" 
    Name="mainFrame" 
    NavigationUIVisibility="Hidden" 
    Source="LoginPage.xaml"/>
</ScrollViewer> 
```

# android - 如何更改 android 的 MediaPlayer 的采样率

> ID：14779110
> 
> 赞同：0
> 
> 时间：2013-02-08T18:34:25.613
> 
> 标签：android, android-mediaplayer

我想知道是否有办法改变 MediaPlayer 播放数据的采样率。我想对其进行调整并以比编码慢的速度播放数据。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:14:44.267

This might not be doable with MediaPlayer, but for audio you can do it with [SoundPool](http://developer.android.com/reference/android/media/SoundPool.html):

> The playback rate can also be changed. A playback rate of 1.0 causes the sound to play at its original frequency (resampled, if necessary, to the hardware output frequency). A playback rate of 2.0 causes the sound to play at twice its original frequency, and a playback rate of 0.5 causes it to play at half its original frequency. The playback rate range is 0.5 to 2.0.

You didn't mention this in your original question, but if you want to maintain pitch while changing the frequency, you'd need to provide a pitch-shift algorithm. Perhaps there's one in the [android.media.audiofx](http://developer.android.com/reference/android/media/audiofx/package-summary.html) package - there's a [queryEffects()](http://developer.android.com/reference/android/media/audiofx/AudioEffect.html#queryEffects%28%29) method that might return some type of pitch shifter.

For MediaPlayer, you might look at the [attachAuxEffect](http://developer.android.com/reference/android/media/MediaPlayer.html#attachAuxEffect%28int%29) method that would let you process the audio stream.

# c - 如何比较C中的字符串以获取条件

> ID：14779112
> 
> 赞同：1
> 
> 时间：2013-02-08T18:34:26.817
> 
> 标签：c, string

我在比较 C 中的两个字符串以查看它们是否相等时遇到了麻烦。

```
switch(i) {
case 1:
  printf("Got in case 1\.  TextA=%s    word=%s \n",TextA,word);
  if(TextA == word) {       
    SubTypeOption = 1;
    printf("SubTypeOptioon = %d",SubTypeOption);
  } 
```

在我的输出中，我得到“Got in case 1\. TextA=SupTypeA word=SupTypeA SubTypeOption = 0” //所以它没有以某种方式改变

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T18:36:44.827

`==`运算符比较*指针*。只有当两者`char*`指向内存中的相同地址时，它才会成功。在 C 中比较字符串的*内容*需要调用[`strcmp`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcmp.html)or [`strncmp`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strncmp.html)：

```
if (strcmp(TextA, word) == 0) {
    // Strings are identical
} 
```

注意与零的比较：这是必需的，因为`strcmp`函数按*字典顺序*比较字符串，当字符串相等时返回零。您需要包含`<strings.h>`才能使用`strcmp`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T18:36:37.337

利用`strcmp`

不是 '==' 运算符

[http://www.cplusplus.com/reference/cstring/strcmp/](http://www.cplusplus.com/reference/cstring/strcmp/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T18:36:54.513

您不能使用该`==`符号比较字符串，因为您正在比较它们是否放置在相同的内存位置。`TextA`并且`word`是指向每个 c 字符串的第一个字符的指针。

用于比较字符串的`strcmp()`or函数。`strlcmp()`如果两个字符串相等，它们将返回 0

```
#define STREQ(a,b) (strcmp((a),(b))==0)
if (STREQ(TextA, word)){

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T19:17:39.200

您不能将字符串（或任何其他数组类型）的内容与标准关系运算符（如`==`、`<`、`>`等）进行比较。您将需要使用`strcmp`库函数：

```
#include <string.h>
...
if (strcmp(TextA, word) == 0)
{
  // strings are equal
} 
```

`strcmp``TextA`如果按字典顺序小于，则返回整数值 < 0，如果按字典`word`顺序相等，则返回 0，如果按字典顺序大于 ，则返回 > `TextA`0 `word`。

请注意，在 C 语言环境中，这意味着字符串将按“ASCII 顺序”排序；也就是说，任何以 开头`'a'`的字符串都将出现在以 开头的字符串之后`'Z'`，因为 ASCII 代码`'a'`大于`'Z'`。

那么为什么不能`==`用于比较字符串呢？

除非它是`sizeof`, `_Alignof`, 或一元运算符的操作数`&`，或者是用于在声明中初始化数组的字符串文字，“N-element array of `T`”类型的表达式将被转换为“pointer”类型的表达式to `T`"，其值将是数组第一个元素的地址。

这意味着，在 condition`TextA == word`中，表达式`TextA`和`word`都被转换为指针值；我们不是比较两个数组的内容，而是比较它们的地址。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T18:37:24.217

简单 - 使用[strcmp](http://linux.die.net/man/3/strcmp) - 这是您需要的功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T18:37:45.153

```
switch(i) {
case 1:
  printf("Got in case 1\.  TextA=%s    word=%s \n",TextA,word);
  if(strcmp(TextA,word)==0) {       //something like that
    SubTypeOption = 1;
    printf("SubTypeOptioon = %d",SubTypeOption);
  } 
```

[http://www.cplusplus.com/reference/cstring/strcmp/](http://www.cplusplus.com/reference/cstring/strcmp/)

# c# - 如果 exe 运行正常，如何在 C# 中进行测试？

> ID：14779116
> 
> 赞同：0
> 
> 时间：2013-02-08T18:34:43.340
> 
> 标签：c#

我有一个在启动时从“模型”文件夹`viewer.exe`加载一些模型（ ）。`*.mdl`部分机型崩溃`viewer.exe`：“viewer.exe 已停止工作。Windows 可以在线查看问题的解决方案”。
我可以做的是移动`.mdl`“源”文件夹中的所有文件，然后手动测试`.mdl`移动到“模型”的每个文件（如果`viewer.exe`正在运行），但是有很多文件需要检查。如何将每个`*.mdl`文件从“源”移动到“模型”并以编程方式测试是否`viewer.exe`运行正确？

这是我用于解决第一个问题的代码：移动`.mdl files`“模型”中的“源”文件夹子目录。一些文件具有相同的名称但大小不同：

```
String mask = "*.mdl";
String source = @"c:\Source\";
String destination = @"c:\Models\";

String[] files = Directory.GetFiles(source, mask, SearchOption.AllDirectories);
foreach (String file in files)
{
    if (File.Exists(file) && !File.Exists(destination + new FileInfo(file).Name))
    {
        File.Move(file, destination + new FileInfo(file).Name);
    }
    else
    {
        FileInfo f = new FileInfo(file);
        long s = f.Length;
        FileInfo f2 = new FileInfo(destination + new FileInfo(file).Name);
        long s2 = f2.Length;
        if (s >= s2)
        {
            File.Delete(destination + new FileInfo(file).Name);
            File.Move(file, destination + new FileInfo(file).Name);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:53:09.883

包围在 try-catch 语句中可能失败的操作

```
try {
    File.Delete(destination + new FileInfo(file).Name);
} catch (Exception ex) {
    // File could not be deleted
}
try {
    File.Move(file, destination + new FileInfo(file).Name);
} catch (Exception ex) {
    // File could not be moved
} 
```

在 catch 语句中做任何你想做的事情，以防文件无法被处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T18:41:53.963

使用 process.start(startInfo) （参见[http://msdn.microsoft.com/en-gb/library/0w4h05yb.aspx](http://msdn.microsoft.com/en-gb/library/0w4h05yb.aspx)）

等待几秒钟，检查进程是否已经终止，然后返回 process.hasexited ( [http://msdn.microsoft.com/en-us/library/system.diagnostics.process.hasexited.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.hasexited.aspx) )

然后无论如何使用 process.kill() 杀死它（参见[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)）

您可能需要关闭 Windows 错误报告： http: [//msdn.microsoft.com/en-us/library/bb513638 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/bb513638(VS.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:27:27.893

I have disabled windows error reporting and this is how the program looks like now:

```
 String mask = "*.mdl";
        String source = @"c:\source\";
        String destination = @"C:\Viewer\Models\";
        String[] files = Directory.GetFiles(source, mask, SearchOption.AllDirectories);

       foreach (String file in files)
       {
           if (File.Exists(file) && !File.Exists(destination + new FileInfo(file).Name))
           {
               File.Move(file, destination + new FileInfo(file).Name);
           }
           else
           {
               FileInfo f = new FileInfo(file);
               long s = f.Length;
               FileInfo f2 = new FileInfo(destination + new FileInfo(file).Name);
               long s2 = f2.Length;
               if (s >= s2)
               {
                   File.Delete(destination + new FileInfo(file).Name);
                   File.Move(file, destination + new FileInfo(file).Name);
               }
           }

    //mycompiledapp.exe is placed in Viewer folder for this to work
        Process myprocess = Process.Start(@"viewer.exe"); 
        Thread.Sleep(3000);

        if (myprocess.HasExited) //Process crashes, exiting automatically
        {
    //Deletes the file that makes the viewer.exe crash
            File.Delete(destination + new FileInfo(file).Name); 
        }
        else
        {
            myprocess.Kill();
        }
       } 
```

# ios - 在 iPhone 应用程序中存储“花费的总时间”的值

> ID：14779117
> 
> 赞同：0
> 
> 时间：2013-02-08T18:34:44.723
> 
> 标签：ios, sqlite, core-data, nsdate

我正在开发一个 iPhone 应用程序，它存储在某个活动上花费的总时间。我让用户按下一个按钮来启动活动，然后停止。如何存储一个值，以小时、分钟和秒的形式不断增加活动所花费的时间？（在核心数据或其他方面）。例如：它可以显示为

**一周内花费的总时间：08:12:05** 可能意味着用户在特定活动上花费了 8 小时 12 分 5 秒。

NSDate 无法做到这一点。我查看了 NSTimer ，但这与我正在寻找的相反。我对 iOS 的所有 api 并不彻底，但有什么我可以使用的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T18:40:05.723

`NSDate`每次用户启动活动时，我都会简单地将s 存储为开始和停止时间。花费的时间可以从这些日期得出`-timeIntervalSinceDate:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:55:48.037

我基本同意斯科特的观点。如果是我，我会创建一个单独的实体来保存活动时间，每个实体都有开始和结束时间以及该活动所需的任何其他数据。

如果您真的更喜欢存储累积时间值，只需将秒数存储为数字类型之一即可。在它与小时数、分钟数和秒数之间进行转换很简单。

# css - 垂直居中动态图像

> ID：14779120
> 
> 赞同：2
> 
> 时间：2013-02-08T18:34:54.613
> 
> 标签：css, vertical-alignment

这是我的情况：我有一个不同大小（总是不同）的不断变化的图像被带到我们飞溅的区域。几天前我发布了一个关于这个的问题，并采用了有人建议的解决方案。但是，我还必须处理其他问题

首先，这是页面：[http ://americanart.si.edu/index_newsplash3m.cfm](http://americanart.si.edu/index_newsplash3m.cfm)

这是我们博客在滑块下方的中间图像。这是代码和css：

代码：

```
 <div class="middle">
    <div class="middleimage">

            <img src="http://americanart.si.edu/eyelevel/images/luce_eyes.jpg" id="middleimg" alt="Blog: Eye Level Image" /><br />

        </div>

    <div id="middletext">

            <p>
<a href="http://americanart.si.edu/collections/search/artwork/?id=19670"><i>The Dying Tecumseh</i></a> by Ferdinand Pettrich has returned to the second floor galleries at American Art after his extended stay with the National Portrait Gallery for the exhibition, <a href="http://www.npg.si.edu/exhibit/exh1812.html"><i>1812: A Nation Emerges</i></a>. Visit his new spot among the ...

                </i>

            <span class="red"><a href="http://eyelevel.si.edu/">Read more...</a></span> </p>

        </div>
        </div> 
```

这是CSS：

```
.middle {
    float: left;
    width: 30.5%;
    margin-right: 2.1%;
    margin-bottom: 2% ;
    background-color: #fff;
    min-height: 100%;
    background: url(/@res/img/americanart_blog_test.jpg) no-repeat #fff;
    padding-top: 31px;
    text-align: center;
    position: relative;
}

div.middleimage { height: 207px;
}

div#middletext {margin-right: 2.1%;
    margin-bottom: 2% ;
    background-color: #fff;
    min-height: 100%;
}
div.middle img#middleimg { max-height: 207px;
    max-width: 291px; 
    bottom:0;
    left:0;
    right:0;
    margin:auto;
    vertical-align: middle;
    position: relative;
} 
```

当图像高度较小时，我必须在图像和文本周围创建一些新的嵌套 div，以防止文本进入图像区域。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:42:55.960

要`div.middleimage`添加此 css 规则：

```
display:table; 
```

然后将 div 包裹在您的实际 img 标签周围，如下所示：

```
<div id="imagewrap"><img src="http://americanart.si.edu/eyelevel/images/luce_eyes.jpg" id="middleimg" alt="Blog: Eye Level Image"></div> 
```

并将此规则添加到您的 CSS 中：

```
#imagewrap {
display:table-cell;
vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T18:46:14.217

您也可以在没有任何表格的情况下执行此操作，只需添加`line-height: 207px;`到您的中间图像类并且应该将图像居中放在里面。

```
div.middleimage {
line-height: 207px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:00:10.530

据我所知，在 CSS 中垂直居中几乎是不可能的。有一篇我一直想读的文章可能会对你有所帮助：http: [//designshack.net/articles/css/how-to-center-anything-with-css/](http://designshack.net/articles/css/how-to-center-anything-with-css/)

# android - Iphone 和 Android Unity 方法

> ID：14779121
> 
> 赞同：0
> 
> 时间：2013-02-08T18:34:59.073
> 
> 标签：android, ios, unity3d

我有一些问题。

我在 Unity 上工作了大约一个月，我们对 Unity 的想法是我们有一个多平台框架，而且它会更便宜，但是我可以看到很多东西是 iphone 或 android，例如触摸输入。

我应该如何处理需要同时在两个平台上的游戏？

这些不同输入之间的主要区别是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:30:07.750

我强烈建议使用Unity3D 中的 Asset Store 提供的[FingerGestures 。](http://fingergestures.fatalfrog.com/)我们从事具有各种目标的项目，并且由于该库，我们在处理输入方面没有问题。它很便宜，并且使用委托来订阅事件！

我的项目中经常包含的两个库是 FingerGestures 和[iTween](http://itween.pixelplacement.com/index.php)（包括附加的 GameObject 集成）。

# xml - 如果 xml 中不存在子节点，则使用 xslt 删除父节点

> ID：14779124
> 
> 赞同：4
> 
> 时间：2013-02-08T18:35:04.720
> 
> 标签：xml, xslt

我正在尝试使用 xslt 转换给定的 XML。需要注意的是，如果给定的子节点不存在，我将不得不删除父节点。我确实做了一些模板匹配，但我被卡住了。任何帮助，将不胜感激。

输入 xml：

```
 <Cars>
      <Car>
        <Brand>Nisan</Brand>
        <Price>12</Price>
     </Car>
     <Car>
        <Brand>Lawrence</Brand>
     </Car>
     <Car>
       <Brand>Cinrace</Brand>
       <Price>14</Price>
     </Car>
   </Cars> 
```

我想删除其中没有价格元素的汽车。所以预期的输出是：

```
 <Cars>
      <Car>
        <Brand>Nisan</Brand>
        <Price>12</Price>
     </Car>
     <Car>
       <Brand>Cinrace</Brand>
       <Price>14</Price>
     </Car>
   </Cars> 
```

我试过用这个：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />
 <xsl:output omit-xml-declaration="yes"/>

    <xsl:template match="node()|@*">
      <xsl:copy>
         <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
    </xsl:template>
<xsl:template match="Cars/Car[contains(Price)='false']"/>
</xsl:stylesheet> 
```

我知道 XSLT 是完全错误的，请指教。

**更新**

更正了一个有效的:)

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <!--Identity template to copy all content by default-->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Car[not(Price)]"/>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:38:23.180

超级接近。只需将您的最后一个模板更改为：

```
<xsl:template match="Car[not(Price)]"/> 
```

此外，这不是不正确的，但您可以结合您的 2 个`xsl:output`元素：

```
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:38:42.607

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <!--Identity template to copy all content by default-->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Car[not(Price)]"/>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:20:11.093

另一种解决方案是使用“xsl:copy-of”元素。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <xsl:output method="xml" />

    <xsl:template match="Cars">
        <xsl:copy>
            <xsl:copy-of select="Car[Price]" />
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

# windows - 录屏我的编程工作

> ID：14779129
> 
> 赞同：2
> 
> 时间：2013-02-08T18:35:25.907
> 
> 标签：windows, visual-studio, ide, recording

我看到有人编写 NES 模拟器的很酷的[视频](http://www.youtube.com/watch?v=y71lli8MS8s)。如果您观看它，您会发现没有停顿，没有犹豫，.. 他在他的网站上提供了一些有关[如何完成此操作的信息。](http://bisqwit.iki.fi/jutut/kuvat/programming_examples/nesemu1/FAQ.txt)这个想法是基于工具辅助的视频游戏快速运行。

有谁知道可用于在现代 IDE 中创建类似效果的工具，例如 Visual Studio？像 CamStudio 这样的普通视频捕捉程序不会削​​减它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:20:25.243

*   您需要以高清晰度捕获，以便文本可读。没有什么比 YouTube 上的编程教程更糟糕的了，您无法阅读该人正在输入的内容。
*   您还希望能够在没有发生任何事情的情况下剪切部分录音。例如，犹豫和停顿思考。
*   切换到低屏幕分辨率（可能是 1024x768）并以全屏模式运行 IDE 可能是个好主意，这样视频中就不会出现不必要的混乱并且代码很容易看到。

看看 SQLGuru 为一个视频捕获程序创建的列表，该列表是最合适的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T12:39:07.207

我已经设法找到了 17 个可以为您解决问题的潜在应用程序列表。

在这里查看它们：[http ://www.freetech4teachers.com/2012/09/17-free-tools-for-creating-screen.html](http://www.freetech4teachers.com/2012/09/17-free-tools-for-creating-screen.html)

# javafx-2 - javafx tableview 自动滚动到最后一个

> ID：14779135
> 
> 赞同：7
> 
> 时间：2013-02-08T18:35:37.940
> 
> 标签：javafx-2, tableview

当出现滚动条时，我想显示在表格视图中添加的最后一项。有没有相同的方法，如果可以的话，将不胜感激。

我检查了具有水平和垂直 setValue() 属性的滚动窗格。表格视图滚动条有没有类似的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T19:24:27.930

检查[TableView.scrollTo()](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableView.html#scrollTo%28int%29)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-13T16:40:34.627

这是一个完整的通用解决方案：

```
public static <S> void addAutoScroll(final TableView<S> view) {
    if (view == null) {
        throw new NullPointerException();
    }

    view.getItems().addListener((ListChangeListener<S>) (c -> {
        c.next();
        final int size = view.getItems().size();
        if (size > 0) {
            view.scrollTo(size - 1);
        }
    }));
} 
```

# mysql - 仅对父查询的结果运行子查询

> ID：14779136
> 
> 赞同：0
> 
> 时间：2013-02-08T18:35:44.063
> 
> 标签：mysql, optimization, sum, subquery, match

我正在为收集`element`与查询匹配的网站运行搜索查询。但是，可能有也可能没有一个或多个`items`链接到`element`. 所以，我有一个子查询来计算所有`items`链接到`element`.

这个查询确实有效。但慢得令人难以置信。目前我需要大约 50 秒。如果我放弃子查询，它会快得多。

```
SELECT DISTINCT e.id, 
    MATCH (e.heading) AGAINST ('+(room)') AS h_score, 
    MATCH (e.text) AGAINST ('+(room)') AS t_score, 
    ( 
        SELECT SUM( MATCH (item.heading, item.text) AGAINST ('+(room)') ) AS itemscore 
             FROM item LEFT JOIN _element_item ON item.id = _element_item.item_id 
             WHERE _element_item.item_id = e.id 
             AND MATCH (item.heading, item.text) AGAINST ('+(room)')
    ) AS i_score 

    FROM element AS e 
    LEFT JOIN _element_brand ON e.id = _element_brand.element_id 
    LEFT JOIN _element_language ON e.id = _element_language.element_id 
    LEFT JOIN _element_region ON e.id = _element_region.element_id 
    LEFT JOIN _element_type ON e.id = _element_type.element_id 
    LEFT JOIN _element_group ON e.id = _element_group.element_id     

    WHERE _element_brand.brand_id = 1 
    AND _element_language.language_iso = 'en' 
    AND _element_region.region_id = 1 
    AND _element_type.type_id = 1 
    AND _element_group.group_id = 1 
    AND e.replacement_id IS NULL 
    AND e.status = 1 
    AND MATCH (e.heading, e.text) AGAINST ('+(room)') 
    ORDER BY t_score + h_score DESC LIMIT 100 
```

有没有办法让它运行得更快？

我猜它`element`在匹配`element`? 我可以让它只对父查询中的匹配项运行子查询吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:52:10.970

让我尝试为您的示例场景澄清左连接。

```
select e.heading
   FROM element AS e
           LEFT JOIN _element_brand 
              ON e.id = _element_brand.element_id 
   WHERE 
          e.SomeColumn = 'test'
      AND _element_brand.brand_id = 1 
```

是一样的

```
select e.heading
   FROM element AS e
           JOIN _element_brand 
              ON e.id = _element_brand.element_id 
   WHERE 
          e.SomeColumn = 'test'
      AND _element_brand.brand_id = 1 
```

因为 WHERE 子句强制只返回具有匹配的_element_brand 记录且该记录的brand_id = 1 的记录。所以这将只返回“e.SomeColumn = 'test'”和brand_id = 1 的记录。

现在，看看一个真正的左连接

```
select e.heading
   FROM element AS e
           LEFT JOIN _element_brand 
              ON e.id = _element_brand.element_id 
             AND _element_brand.brand_id = 1 
   WHERE 
      e.SomeColumn = 'test' 
```

这将返回元素中具有“e.SomeColumn = 'test'”的所有记录，无论 _element_Brand 表中是否有条目且 _element_brand.brand_id = 1。

因此，如果您有 100 个元素的 SomeColumn = 'test'，其中 50 条记录在 _element_brand 表中具有对应 ID 的有效记录。在这 50 个中，只有 20 个专门有一个 brand_id = 1...

前两个示例查询（与 WHERE 的左连接和连接）将仅返回专门包含 20 条记录的 20 条记录。

LAST 查询仍将返回刚刚基于“测试”合格的 100 条记录。

如果根据您的数据场景，希望这可以澄清......有时在书或文档中看到可能实际上并不能澄清试图掌握它的人。

```
SELECT DISTINCT 
      STRAIGHT_JOIN
      e.id, 
      MATCH (e.heading) AGAINST ('+(room)') AS h_score, 
      MATCH (e.text) AGAINST ('+(room)') AS t_score, 
      ( SELECT SUM( MATCH (item.heading, item.text) AGAINST ('+(room)') ) 
           FROM _element_item
              JOIN item 
                 ON _element_item.item_id = item.id  
                AND MATCH (item.heading, item.text) AGAINST ('+(room)')
           WHERE 
              e.id = _element_item.item_id ) AS i_score 
   FROM 
      element AS e 
         JOIN _element_brand 
            ON e.id = _element_brand.element_id 
            AND _element_brand.brand_id = 1 

         JOIN _element_language 
            ON e.id = _element_language.element_id 
            AND _element_language.language_iso = 'en' 

         JOIN _element_region 
            ON e.id = _element_region.element_id 
           AND _element_region.region_id = 1 

         JOIN _element_type 
           ON e.id = _element_type.element_id 
          AND _element_type.type_id = 1 

         JOIN _element_group ON e.id = _element_group.element_id     
          AND _element_group.group_id = 1 
   WHERE 
          e.status = 1 
      and e.replacement_id IS NULL 
      AND MATCH (e.heading, e.text) AGAINST ('+(room)') 
   ORDER BY 
      t_score + h_score DESC 
   LIMIT 100 
```

我已经重组为加入。此外，稍微更改了您的字段 select sum() for i_score，这似乎正在杀死您的查询。我还在顶部添加了关键字“STRAIGHT_JOIN”，以告诉查询按显示的顺序运行。

我对字段选择的唯一评论问题...您正在加入

e.id 到 _element_item.item_id，然后从 _element_item.item_id 到 item.id....

所以，也就是说，它可能被简化为

e.id = item.id 如果它们确实相同，您可以完全删除 _element_item 表，但它似乎是一个桥表，对于给定的元素可能有许多项目。

# php - 如何在h1标签下的正文内容中显示页面标题

> ID：14779145
> 
> 赞同：1
> 
> 时间：2013-02-08T18:36:31.770
> 
> 标签：php, joomla

我已经使用 RSSEO 插件来优化我的 joomla 网站，但是我希望自定义组件和页面中的 h1 标签与页面标题相似。在下面试过

```
 <h1>
 <script type="text/javascript">
 <!--
 document.write(document.title);
  //-->
  </script></h1> 
```

上面的脚本能够显示 h1 标签，但是当检查源代码时，它不像显示脚本那样对 seo 友好

我想我需要服务器端 php 代码，尝试过使用

```
 <h1><?php echo $PageTitle ?></h1> 
```

但上面没有显示任何值。只会导致空白的 h1 标签

任何人都可以建议和建议请有效地做到这一点

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:44:51.007

尝试这个：

HTML：

```
<h1 id="pagetitle"></h1> 
```

JavaScript：

```
document.getElementById('pagetitle').innerHTML = document.title; 
```

如果您希望脚本内联：

```
<h1 id="pagetitle"></h1>
<script>
    document.getElementById('pagetitle').innerHTML = document.title;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:52:01.333

尝试这个 ：

```
 <?php
    $url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];

    $page = fread(fopen($url, "r"), 2048);   // first 2KB

    if(preg_match("/<title>(.+)<\/title>/i",$page,$result))
       {
           echo "The title of $url is $result[1]</b>";
       }
      else
     {
                   echo "The page doesn't have a title tag";
       }

?> 
```

这将根据需要更快地加载：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T09:06:59.210

Joomla $document 将包含标题，因此只需将其注入您的组件/模板中：

```
<?php
$document = JFactory::getDocument();
echo "<h1>".$document->getMetaData('title')."</h1>";
?> 
```

这应该可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T13:13:40.547

这适用于 Joomla！2.5.x：

```
<?php
$document = JFactory::getDocument();
?>
<h1><?php echo $document->getTitle(); ?></h1> 
```

# python - 设置 ADB_TRACE=adb 时如何获取 cmd 中的信息

> ID：14779146
> 
> 赞同：1
> 
> 时间：2013-02-08T18:36:32.667
> 
> 标签：python, cmd, adb, environment

将文件推送到设备时，我试图获得进度。当我在 cmd 中“设置 ADB_TRACE=adb”时它起作用（在[此页面](https://stackoverflow.com/questions/6595374/adb-push-pull-with-progress-bar)中找到）

然后我想在 python 2.7 中使用它。

```
cmd = "adb push file /mnt/sdcard/file"
os.putenv('ADB_TRACE', 'adb')
os.popen(cmd)
print cmd.read() 
```

它什么也没显示。我怎样才能得到这些细节？

操作系统：win7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:44:10.460

[`os.popen`](http://docs.python.org/2/library/os.html?highlight=os.popen#os.popen)已弃用：

> 2.6 版后已弃用：此功能已过时。使用 `subprocess`模块。`subprocess`尤其要检查用模块部分替换旧功能。

改用[`subprocess`](http://docs.python.org/2/library/subprocess.html)：

```
import subprocess as sp

cmd = ["adb","push","file","/mnt/sdcard/file"]
mysp = sp.popen(cmd, env={'ADB_TRACE':'adb'}, stdout=sp.PIPE, stderr=sp.PIPE)
stdout,stderr = mysp.communicate()

if mysp.returncode != 0:
    print stderr
else:
    print stdout 
```

# r - getOutliersI 的默认限制方法是什么？

> ID：14779148
> 
> 赞同：0
> 
> 时间：2013-02-08T18:36:39.583
> 
> 标签：r, statistics, outliers

使用`extremevalues`R 中的包进行单变量异常值检测。我对统计数据的理解公认有限，但我试图从概念上掌握一些 getOutliersI 函数在确定异常值时所做的工作。我试过查看包的文档，但没有找到。

对我的数据调用该函数会产生符合常识的结果：

```
getOutliersI(data) 
```

由于我没有提供任何 rho 或 FLim 参数，它正在为我计算限制——但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:58:49.027

我不确定你的问题。但一个简单的答案是，如果您不提供参数，它将使用可选参数。

> getOutliersI(y, rho=c(1,1), FLim=c(0.1,0.9), distribution="normal")

所以在这里它将使用带参数的正态分布`rho=c(1,1)`并`FLim=c(0.1,0.9`计算高斯限制。

# xslt - 使用 xsl 通过按属性值对元素进行分组来更改元素层次结构，而不假设属性值？

> ID：14779160
> 
> 赞同：3
> 
> 时间：2013-02-08T18:37:26.800
> 
> 标签：xslt, xpath, node-set

# 问题

使用 xsl，如何通过按属性值对元素进行分组来更改元素层次结构，而不假设属性值？

## 问题描述

文档的上下文如下：`<releaseHistory/>`随着新版本的发布（），xml 跟踪软件框架的更改说明（ `<build/>`）。这个框架有几个应用程序/组件（`<changes app='LibraryA|Driver|...'/>`）。更改说明记录了新功能或错误修复 ( `<list kind='New|Enhancement'/>`)。

我想转换此文档，以便将不同构建中的所有更改说明合并到按“app”属性值和“种类”属性值分组的列表中，列表项（`<li/>`）按“优先级”属性排序。

此外，不应假设“app”和“kind”属性值。请注意，如果需要，如果架构不理想，我可以更改 xml 的架构。

## 当前状态

*   我能做的：
    *   检索唯一“app”和“kind”属性值的列表。
    *   一个模板，它以“app”和“kind”为参数，并遍历 xml 文档以合并其属性与参数匹配的所有元素
*   什么不见​​了：
    *   在上面的唯一属性值列表上“循环”并应用模板

## 输入和预期输出

xml文档：

```
<?xml version="1.0" encoding="UTF-8"?>

<releaseHistory>

 <build>
   <description>A killer update</description>
   <changes app='LibraryA'>
     <list kind='New'>
       <li priority='4'>Added feature about X</li>
       <li priority='2'>Faster code for big matrices</li>
     </list>
     <list kind='Enhancement'>
       <li priority='1'>Fixed integer addition</li>
     </list>
   </changes>
   <changes app='Driver'>
     <list kind='New'>
       <li priority='3'>Supporting new CPU models</li>
       <li priority='4'>Cross-platform-ness</li>
     </list>
   </changes>
 </build>

 <build>
   <description>An update for Easter</description>
   <changes app='LibraryA'>
     <list kind='New'>
       <li priority='1'>New feature about Y</li>
     </list>
     <list kind='Enhancement'>
       <li priority='2'>Fixed bug 63451</li>
     </list>
   </changes>
   <changes app='LibraryVector'>
     <list kind='Enhancement'>
       <li priority='5'>Fixed bug 59382</li>
     </list>
   </changes>
   <changes app='Driver'>
     <list kind='New'>
       <li priority='0'>Compatibility with hardware Z</li>
     </list>
   </changes>
 </build>

</releaseHistory> 
```

预期文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<mergedHistory>

  <changes app='LibraryA'>
   <list kind='New'>
     <li priority='1'>New feature about Y</li>
     <li priority='2'>Faster code for big matrices</li>
     <li priority='4'>Added feature about X</li>
   </list>
   <list kind='Enhancement'>
      <li priority='1'>Fixed integer addition</li>
      <li priority='2'>Fixed bug 63451</li>
   </list>
  </changes>

  <changes app='Driver'>
    <list kind='New'>
      <li priority='0'>Compatibility with hardware Z</li>
      <li priority='3'>Supporting new CPU models</li>
      <li priority='4'>Cross-platform-ness</li>
    </list>
  </changes>

  <changes app='LibraryVector'>
    <list kind='Enhancement'>
      <li priority='5'>Fixed bug 59382</li>
    </list>
  </changes>

</mergedHistory> 
```

## 部分解决方案

我“已经”能够使用 xsl 列出唯一的“app”和“kind”属性。让我们详细介绍一下 xsl 的当前状态

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common" extension-element-prefixes="exsl"
> 
```

**检索所有不同的“应用程序”属性值**（LibraryA、Driver、...）`<changes app='...'/>`并将它们存储在一个变量中（可能是一个参数）：

```
<xsl:key name="appDistinct" match="changes" use="@app"/>
<xsl:variable name="applicationListVarTmp">
  <list>
    <xsl:for-each select="//changes[generate-id() = generate-id(key('appDistinct', @app)[1])]">
      <li>
        <xsl:value-of select="normalize-space(@app)"/>
      </li>
    </xsl:for-each>
  </list>
</xsl:variable> 
```

**检索所有不同的“种类”属性值**（新，增强）`<list kind='...'/>`：

```
<xsl:key name="kindDistinct" match="changes/list" use="@kind"/>
<xsl:variable name="kindListVar">
  <list>
    <xsl:for-each select="//changes/list[generate-id() = generate-id(key('kindDistinct', @kind)[1])]">
      <li>
        <xsl:value-of select="normalize-space(@kind)"/>
      </li>
    </xsl:for-each>
  </list>
</xsl:variable> 
```

**`<li/>`将所有给定的“应用程序”和“种类”**（按优先级排序）与参数**合并的模板：**

```
<xsl:template name="mergeSameKindChangesForAnApp">
  <xsl:param name="application" />
  <xsl:param name="kindness" />
  <list><xsl:attribute name='kind'><xsl:value-of select="$kindness"/></xsl:attribute>
    <xsl:for-each select="//changes[@app=$application]/list[@kind=$kindness]/li">
      <xsl:sort select="@priority" data-type="number" order="ascending"/>
      <xsl:copy>
        <xsl:copy-of select="@*"/>
        <xsl:copy-of select="./*"/>
      </xsl:copy>
    </xsl:for-each>
  </list>
</xsl:template> 
```

现在，**我被困**的地方是关于“循环”`appListVar`并`kindListVar`应用模板。

如果所有 'app' 和 'kind' 都是硬编码的，我可以拨打几个电话，例如：

```
<xsl:call-template name="mergeSameKindChangesForAnApp">
  <changes app='LibraryA'>
    <xsl:with-param name="application">
      LibraryA
    </xsl:with-param>
    <xsl:with-param name="kindness">
      New
    </xsl:with-param>
  </changes>
</xsl:call-template> 
```

但我想循环在 xml 文档中找到的 'app's 和 'kind's。`exsl:node-set()`例如，我可以这样做

```
<xsl:param name="applicationListVar" select="exsl:node-set($applicationListVarTmp)" />

<xsl:call-template name="mergeSameKindChangesForAnApp">
  <changes app='LibraryA'>
    <xsl:with-param name="application">
      <xsl:value-of select="$applicationListVar/list/li[2]"/>
    </xsl:with-param>
    <xsl:with-param name="kindness">
      New
    </xsl:with-param>
  </changes>
</xsl:call-template> 
```

但是，如何循环`$applicationListVar/list/li`元素？“循环”听起来不像 xslt-ilish，可能（肯定？）这不是正确的方法。

这个问题很长，与实际情况相比，我试图简化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:24:42.830

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:key name="kChange" match="changes" use="@app" />

  <!-- A key for locating <list>s by the combination of their @app and @kind-->
  <xsl:key name="kList" match="changes/list" use="concat(../@app, '+', @kind)" />

  <!-- A node-set of the first instance of each <list> for each distinct
       pair of @app + @kind -->
  <xsl:variable name="distinctLists"
                select="//changes/list[generate-id() = 
                           generate-id(key('kList', 
                                           concat(../@app, '+', @kind) )[1]
                                      )]"/>

  <!-- Identity template -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <mergedHistory>
      <!-- Apply templates on distinct <changes> elements -->
      <xsl:apply-templates select="build/changes[generate-id() = 
                                   generate-id(key('kChange', @app)[1])]" />
    </mergedHistory>
  </xsl:template>

  <!-- Each distinct <changes> (based on @app) will be sent to this template -->
  <xsl:template match="changes">
    <changes>
      <xsl:apply-templates select="@*" />

      <!-- Apply templates on each distinct <list> with the same @app
           as the current context-->
      <xsl:apply-templates select="$distinctLists[../@app = current()/@app]" />
    </changes>
  </xsl:template>

  <!-- Each distinct <list> (based on @app and @kind) will be 
       sent to this template -->
  <xsl:template match="list">
    <list>
      <xsl:apply-templates select="@*" />

      <!-- Apply templates on all <li>s below <list>s with the same @app and @kind
           as the current one -->
      <xsl:apply-templates select="key('kList', concat(../@app, '+', @kind))/li">
        <xsl:sort select="@priority" order="ascending" data-type="number"/>
      </xsl:apply-templates>
    </list>
  </xsl:template>
</xsl:stylesheet> 
```

这里要注意的一种技术是基于一对值而不是单个值在项目上设置一个键，并使用它来根据一对值查找不同的实例，然后查找具有相同值对的*所有*实例.

当这在您的示例输入上运行时，它会产生请求的输出：

```
<mergedHistory>
  <changes app="LibraryA">
    <list kind="New">
      <li priority="1">New feature about Y</li>
      <li priority="2">Faster code for big matrices</li>
      <li priority="4">Added feature about X</li>
    </list>
    <list kind="Enhancement">
      <li priority="1">Fixed integer addition</li>
      <li priority="2">Fixed bug 63451</li>
    </list>
  </changes>
  <changes app="Driver">
    <list kind="New">
      <li priority="0">Compatibility with hardware Z</li>
      <li priority="3">Supporting new CPU models</li>
      <li priority="4">Cross-platform-ness</li>
    </list>
  </changes>
  <changes app="LibraryVector">
    <list kind="Enhancement">
      <li priority="5">Fixed bug 59382</li>
    </list>
  </changes>
</mergedHistory> 
```

# excel - Mac Office 2011 Excel 中的 VBA 保护密码

> ID：14779164
> 
> 赞同：2
> 
> 时间：2013-02-08T18:37:42.487
> 
> 标签：excel, vba, macos

当我在 MS Excel 2003 中设置电子表格 (.xls) 的 VBA 保护密码时，在 Mac Office 2011 Excel 中打开它时无法取消保护。它一直说密码无效。

有什么想法吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:23:49.327

Windows 版本的 Office 上使用的数字签名与 Mac 版本的 Office 不兼容。因此，您将无法在 Windows 版本中设置 VBA 密码并在 Mac 上解锁。

首先尝试在 Mac 版本的 Excel 中设置密码，它应该在 Windows 中解锁。只要您知道锁定 VBA 项目不会阻止有一点了解的人进入。

有关数字证书的更多信息，请参见此处：[http ://answers.microsoft.com/en-us/mac/forum/macoffice2011-macexcel/does-excel-2011-support-digitally-signing-a-macro/9fe660c0 -98af-4220-9f0d-dc11c56e3af0?msgId=45d02f39-4ceb-4655-b09e-c7d1e4f3f9bb](http://answers.microsoft.com/en-us/mac/forum/macoffice2011-macexcel/does-excel-2011-support-digitally-signing-a-macro/9fe660c0-98af-4220-9f0d-dc11c56e3af0?msgId=45d02f39-4ceb-4655-b09e-c7d1e4f3f9bb)

# xml - 具有属性和子元素的元素的 XSD 表示形式是什么？

> ID：14779179
> 
> 赞同：0
> 
> 时间：2013-02-08T18:39:00.657
> 
> 标签：xml, xsd

我的 XML 看起来像这样：

```
<root>
  <elt att1="bla" att2="ble">
    <subelt satt1="bli" satt2="1" />
    <subelt satt1="blo" satt2="18" />
    <subelt satt1="blu" satt2="4" />
  </elt>
</root> 
```

任何elt都可能有1。elt 的任何子带都可能有 1。我尝试针对此实用程序验证我的架构：[http](http://www.utilities-online.info/xsdvalidation) ://www.utilities-online.info/xsdvalidation 。这是我的xsd：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="elt" minOccurs="1" maxOccurs="unbounded">
          <xs:complexType>
            <xs:attribute name="att1" type="xs:string" use="required"/>
            <xs:attribute name="att2" type="xs:string" use="required"/>
            <xs:sequence>
              <xs:element name="subelt" minOccurs="1" maxOccurs="unbounded">
                <xs:complexType>
                  <xs:attribute name="subatt1" type="xs:string" use="required"/>
                  <xs:attribute name="subatt2" type="xs:integer"/>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

问题来自具有属性和子元素（序列）的元素。我尝试在序列周围放置一个 xs:complexType ，但仍然得到不同的错误。我是 XML 模式的初学者，所以我有点难以理解我应该如何格式化它。你能给我一些建议吗？谢谢。

（我的文件中可能有一些拼写错误，因为我更改了元素和属性名称）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:55:04.877

由于历史原因，XSD 复杂类型首先指定元素的内容模型，然后是属性。所以`elt`元素的复杂类型应该类似于：

```
<xs:complexType>
  <xs:sequence>
    <xs:element name="subelt" minOccurs="1" maxOccurs="unbounded">
      <xs:complexType>
        <xs:attribute name="subatt1" type="xs:string" use="required"/>
        <xs:attribute name="subatt2" type="xs:integer"/>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
  <xs:attribute name="att1" type="xs:string" use="required"/>
  <xs:attribute name="att2" type="xs:string" use="required"/>
</xs:complexType> 
```

# jquery - 在 jQuery 中找到父级下的控件——这是最干净的方法吗？

> ID：14779182
> 
> 赞同：-1
> 
> 时间：2013-02-08T18:39:05.570
> 
> 标签：jquery

如果我想在页面上找到一个元素，我会使用 $('#Foo');

现在，我有一个场景，其中我的“this”上下文是一个 jQuery 元素。我想在“this”下面找到一个元素。

我在用：

```
$(this).find('#Foo'); 
```

我只是想确保没有一种更简洁的方式来表达这一点。如果我不在这个上下文中，我可能会使用类似 $('#this #Foo') 的东西。当我明确引用 'this' jQuery 元素时，我的 jQuery 选择器查询变得更长，这似乎令人惊讶。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:42:42.663

首先，由于元素 id 对文档来说是唯一的，因此您不需要在另一个元素的上下文中找到一个。但是对于一个好的语法，我喜欢

$('.foo', this) 将找到所有具有“foo”类的孩子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T18:41:33.430

比[`.children()`](http://api.jquery.com/children/)快[`.find()`](http://api.jquery.com/find/)。

```
$(this).children('#Foo'); 
```

**解释**

原因是，`.children()`仅查看节点的直接子节点，同时`.find()`遍历节点下方的整个 DOM，因此在等效实现的情况下**`.children()`应该更快。**`find`但是，使用本机浏览器方法，而`children`使用在浏览器中解释的 JavaScript。在我的实验中，典型情况下的性能差异不大。

**参考**

1.  [jQuery 中最快的 children() 或 find() 是什么？](https://stackoverflow.com/a/648014/462627)
2.  [遍历`.children()`](http://docs.jquery.com/Traversing/children#expr)
3.  [遍历`.find()`](http://docs.jquery.com/Traversing/find#expr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T18:40:46.490

ID 应该是唯一的，所以`#Foo`在 jQuery 中选择的最快方法就是

```
$('#Foo') 
```

为了回答您的问题，该`.children()`方法比`.find()`大多数浏览器更快，并且只要您处理直系后代，它的工作原理就相同。

```
$(this).children('#Foo') 
```

我整理了一个[JSPerf](http://jsperf.com/quickest-selectors)来演示这一点。请记住，在大多数情况下，性能差异可以忽略不计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T19:03:15.507

如果您通过 id 查找元素，则不需要预先选择 $(this)。元素 ID 应该是唯一的。没有两个元素应该具有相同的 id。也就是说，如果您选择其他内容，例如类，则需要使用 $(this).find(".myclass") 来选择子元素。

# javascript - 当我已经有一个工作网站时如何创建 Facebook 应用程序

> ID：14779184
> 
> 赞同：0
> 
> 时间：2013-02-08T18:39:13.043
> 
> 标签：javascript, facebook, html

我有 .XML、.JS 和一些用于 HTML5 中的 3D-pano 的 .JPG 文件，这些文件在我的网站 3d-arriving.ru/fotopanorams/html5 上可以正常工作。现在我想让它可以直接在 facebook 上查看。我已经注册为 facebook 开发者并且在 Heroku 上有一个帐户。但我只能“模糊地”想象我在 facebook 上实现我的 3D-pano 应用程序的步骤。我认为，它必须是一个页面选项卡，但下一步是什么？有没有一种简单的方法可以将我的文件上传到 facebook 或 Heroku，编写少量代码并使其工作？一种？:) 谢谢大家，谁来帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:50:20.117

如果您已经有一个在线网站，则无需创建新网站。Facebook 应用程序只是与 Facebook 连接的网站。如果您希望用户进行任何交互，例如登录，您必须将登录对话框添加到您的网站。你用 JS 标记了这个问题，所以我建议你检查[JavaScript SDK reference](https://developers.facebook.com/docs/reference/javascript/)。无论您想做什么，如果您想在 Page Tab 中将您的网站设置为应用程序，请阅读[此](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)。

创建应用程序并配置标签页的 URL 后，您所要做的就是在页面上为具有管理员角色的人员提供以下 URL：

```
https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&redirect_uri=URL_OWNED_BY_YOUR_FB_APP 
```

之后，输入此 URL 的人将能够选择她或他想要使用此应用程序为其创建选项卡的页面。当然，只有该人具有管理员角色的页面才会可见。因此，您可以将其添加到您的页面中，如果我有的话，我也可以将其添加到我自己的页面中。

但是你必须考虑你是否真的需要在 FB 上的页面，并且你想在那里添加这个应用程序。如果没有，您可以简单地留在[画布应用程序](https://developers.facebook.com/docs/guides/canvas/)中。

# java - Javadoc 生成不允许 JComboBox 中的参数

> ID：14779186
> 
> 赞同：0
> 
> 时间：2013-02-08T18:39:14.960
> 
> 标签：java, swing, parameters, javadoc, jcombobox

我正在尝试使用以下变量生成我的 javadoc：

```
private JComboBox<String> monthsBox; 
```

我的问题是 javadoc 出现以下错误：

> type javax.swing.JComboBox 不带参数 private JComboBox 月框；

我试图用[这样](https://stackoverflow.com/a/2015998/1754625)的答案来解决它：

```
/**
* Shows up a list of the available months.
 * 
 * @param<String>
 *            Names of the month.
 */
private JComboBox<String> monthsBox; 
```

仍然出现同样的问题。也许我只是在寻找错误的主题。

请帮帮我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:23:55.290

再次感谢 Reimeus 的快速建议。只是没有提醒这种类型的声明从 jdk 7 开始可用。

刚刚安装了**java-7-openjdk-i386**并使用了那个 javadoc。现在一切正常（只需要删除@param 解决方案）。

# optimization - 预处理器标志与（例如）布尔标志

> ID：14779189
> 
> 赞同：0
> 
> 时间：2013-02-08T18:39:21.273
> 
> 标签：optimization, coding-style, preprocessor, flags

我正在熟悉科学的流体动力学代码。代码几乎总是使用预处理器指令，例如

```
#ifdef PARTICLES
    int nghost = 5
#else
    int nghost = 4
#endif 
```

而不是更简单的 C 标志，例如，

```
int nghost = 4;
if( particlesFlag ) { nghost = 5; } 
```

预处理器标志的缺点是（在此框架中）它需要在每次构建之前为每个问题设置进行配置（创建头文件），而使用 c 代码标志只需要重新编译。

**这种方法的优点是什么？**

似乎任何效率的提高都会非常小——尤其是因为这段代码（例如）只在程序初始化时运行一次，而所有真正的工作都发生在不同处理器的循环中，等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:48:34.553

假设我有数千个使用 nghost 的 API。如果已经定义了 PARTICLES，则在预处理期间所有这些变量将被 5 else by 4 替换。

您在谈论单个实例，大型项目是预处理有用的地方。

想想这个。

```
int x() { int a = nghost *5; }
int ab() { return (nghost+10); } 
```

每次，如果使用，它的运行时间消耗

```
int x() { 
int a;
int nghost = 4;
if( particlesFlag ) { nghost = 5;}
a=nghost*5;
}

int ab() { 
int nghost = 4;
if( particlesFlag ) { nghost = 5;}
return (nghost+10); 
```

}

等等。

并考虑一下。

认为

```
#ifdef PARTICLES
int nghost = 5
int aghost = 5
int bghost = 5
int cghost = 5
int dghost = 5
int eghost = 5
int fghost = 5
#else
int nghost = 4
int aghost = 4
int bghost = 4
int cghost = 4
int dghost = 4
int eghost = 4
int fghost = 4
#endif 
```

# javascript - 在单页应用中，处理错误 URL（404 错误）的正确方法是什么？

> ID：14779190
> 
> 赞同：61
> 
> 时间：2013-02-08T18:39:21.577
> 
> 标签：javascript, angularjs, http-status-code-404, singlepage, single-page-application

我目前正在使用 angularjs 编写一个 Web 应用程序，但我认为这个问题适用于任何在客户端进行路由的客户端 javascript 框架（[就像 angular 一样](https://docs.angularjs.org/api/ngRoute)）。

在单页应用中，处理错误 URL 的正确方法是什么？

查看一些主要网站，我发现如果您在[https://mail.google.com/mail/](https://mail.google.com/mail/)下方键入任何随机 URL，gmail 将重定向到收件箱。这发生在服务器端（使用 http 300 代码）或客户端，具体取决于错误路径是在 # 字符之前还是之后。另一方面，twitter 显示任何无效 URL 的真实 HTTP 404。第三个选项是显示一个“软”404，一个纯粹的客户端错误页面。

这些解决方案似乎适用于不同的情况。Twitter 希望到 twitter 用户和推文的链接是真正的链接，因此人们可以分享它们，将它们发布在新闻文章中等，因此重要的是要识别无效链接（如果我在我的网站，一个简单的抓取就会告诉我）。另一方面，在 gmail 中，您不应该将链接共享到您的收件箱中，而且我什至不确定这些链接是否真的是永久的/持久的：似乎 url 更新主要用于浏览器历史导航中的目的单页应用。第三种给出软错误的方法可能适用于类似于 gmail 的情况，但没有合理的“默认”页面。

经过这么长的介绍，这里有一些具体的问题：

*   提供“软”错误页面而不是 404 错误是否可以接受，或者如果 url 无效，单页应用程序是否应该始终重定向到真正的 404？
*   Gmail 的代码可能完全没有错误，但如果它确实存在导致无效链接最终重定向回收件箱的错误，那可能比错误页面更让用户感到困惑。对于大多数 Web 应用程序，它们的测试不如 gmail 好，显示错误页面会更好吗？
*   要为单页应用程序实现真正的 404，似乎有必要在服务器端复制路由逻辑。有没有办法解决？
*   当重定向到 404 时，我认为用户应该能够看到导致错误的 URL，可能在 URL 栏中。使用 html5 history api，我认为这可以通过简单地触发当前页面的重新加载（使用错误的 url），结合上面提到的服务器端路由来完成。对于不支持此功能或使用 hashbang 表示法的浏览器，这似乎是不可能的。支持所有浏览器的最佳方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-11-20T20:19:53.450

如果您关心 SEO，[angular.io 能够解决此问题](https://github.com/angular/angular/issues/21317)的方法之一（至少与 Google 一样）是使用[noindex 元标记](https://support.google.com/webmasters/answer/93710?hl=en)“来指示软 404 状态，这将阻止爬虫爬取内容页”。显然它可以通过 JavaScript 添加到文档中。

或者，使用 JavaScript，您可以重定向到将响应实际 HTTP 404 状态代码的页面。Google 可以很好[地理解 JavaScript 重定向。](https://youtu.be/vjj8B4sq0UI?t=1896)您的原始`/does-not-exist`页面在重定向到 时`/404-error?from=does-not-exist`，将与服务器返回的 404 状态码相关联。URL 结构无关紧要，这里只有状态码和重定向很重要。

您的其他选项是 SSR（Nuxt.js、Next.js、Angular Universal 等）或预渲染（prerender.io、puppeteer 等），Google 称之为[动态渲染](https://www.youtube.com/watch?v=PFwUbgvpdaQ&feature=youtu.be)，您可以使用预渲染版本响应搜索机器人请求而人类用户则获得您正常的客户端渲染应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T15:57:16.357

**tl;dr：**如果您关心 SEO，请放弃 hashbang 支持并选择类似[PJAX的行为。](https://github.com/defunkt/jquery-pjax)

您是在制作应用程序还是网站？如果您需要返回网站，`404`以免混淆 google。它需要是真实的`404`，而不仅仅是显示未找到页面的消息（即`200`带有“未找到页面”的消息非常糟糕）。另外，您希望支持哪些浏览器？

我的观点是应该避免整个 hashbang 服务器端渲染（即讨厌的 Google SEO `#!`hack）。如果不支持 pushstate 的浏览器的 URL 发生更改（不是哈希更改），请使用真正的 pushstate 或重新呈现整个页面。

现在这很重要的原因是 a`#!`永远不应该返回 a`404`因为它没有意义并且不可能模仿服务器端，因为服务器永远不会在`#!`没有运行 Javascript 的情况下得到什么。

因此，如果您真的关心 SEO，我会做类似 PJAX 的事情，并且只使用真正的 pushstate 进行路由，然后就无法使用旧的 web 1.0。因此，我建议您共享的链接确实是`404`不应该有的（只要页面内容不发生剧烈变化，`#!`传统上就可以了）。`#`

最后，这`404`主要不是问题，而是`30X`重定向响应。那是因为浏览器将自动处理重定向，因此您的 Javascript AJAX 调用将永远不会看到 a `30X`（他们将获得重定向响应......即 200）。要处理`30X`响应，您必须为每个请求发回一个标头，以指示重定向的 URL 是/曾经是什么（即您被重定向到什么），这样您就不会弄乱 Pushstate 历史记录。

当然，如果您也需要像 Twitter 那样支持 hashbang（[而且它们甚至杀死了 hashbang](http://www.digitaltrends.com/social-media/twitter-kills-the-hashbang-promises-5x-faster-page-loads/)），您可以利用 Google Sitemaps[`rel=nofollow`](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=96569)来尝试减轻不良的 SEO。

# haskell - 与 GADT 的模式匹配

> ID：14779193
> 
> 赞同：2
> 
> 时间：2013-02-08T18:39:35.740
> 
> 标签：haskell

我正在实现一个表达式求解器，但我在模式匹配方面遇到了一些问题。我有以下代码

```
data Expression a where
                Const   ∷  Int → Expression Int
                Add ∷  Expression Int → Expression Int → Expression Int
                Sub ∷  Expression Int → Expression Int → Expression Int

eval ∷  Expression a → a
eval (Const a) = a

eval (Add exp1 exp2) = (val1 + val2)
  where
    val1 = eval exp1
    val2 = eval exp2

eval (Sub exp1 exp2) = (val1 - val2)
  where
    val1 = eval exp1
    val2 = eval exp2 
```

但是由于 eval Add 和 eval Sub 非常相似，我可能想要另一个操作，我虽然做一个更通用的实现，但我遇到了一些问题。我虽然喜欢

```
data Op = Add | Sub

data Expression a where
                Const   ∷  Int → Expression Int
                Op ∷  Expression Int → Expression Int → Expression Int

eval (Op exp1 exp2) = case Op of
                           Add → (val1 + val2)
                           Sub → (val1 - val2)
                      where
                        val1 = eval exp1
                        val2 = eval exp2 
```

但它不起作用。有可能做这样的事情吗？提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T18:50:19.890

这不起作用，因为您同时定义`Op`为数据构造函数和类型。该类型`Op`有两个构造函数`Add`和`Sub`，但该 `Expression`类型有一个`Op`构造函数。这段代码混淆了两者。

您的函数的 case 语句`eval`尝试匹配 value `Op`，但`Op`它是一个在此上下文中接受两个参数的构造函数，因此您无法对其进行模式匹配。我怀疑你会做这样的事情

```
data Op = Add | Sub

data Expression a where
                Const ::  Int -> Expression Int
                Op ::  Op -> Expression Int -> Expression Int -> Expression Int

eval (Const c)         = c
eval (Op op exp1 exp2) = case op of
                           Add -> (val1 + val2)
                           Sub -> (val1 - val2)
                      where
                        val1 = eval exp1
                        val2 = eval exp2 
```

您必须在`Op`构造函数中包含一个字段，该字段表示要执行的操作。由于无论如何您都必须匹配该操作，因此坚持 . 的原始定义可能会更好 `Expression`。

另一种更简单、更容易扩展的可能性可能类似于以下内容

```
data Expression a where
    Const ::  Int -> Expression Int
    Op    ::  (a -> b -> c) -> Expression a -> Expression b -> Expression c

eval :: Expression a -> a
eval (Const c)        = c
eval (Op f exp1 exp2) = f (eval exp1) (eval exp2) 
```

其中 an`Op`用它包装了实际功能。您将无法做一些好的事情，例如打印出表达式并知道它对应的函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T20:51:15.067

翻阅评论：

```
data Op a b c where
    Add :: Op Int Int Int
    Sub :: Op Int Int Int
    Less :: Op Int Int Bool

interpretOp :: Op a b c -> a -> b -> c
interpretOp Add = (+)
interpretOp Sub = (-)
interpretOp Less = (<)

data Expression a where
    Const :: Int -> Expression Int
    Op :: Op a b c -> Expression a -> Expression b -> Expression c

eval :: Expression a -> a
eval (Const x) = x
eval (Op op a b) = interpretOp op (eval a) (eval b) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T16:52:40.047

重复luqui的回答：

```
{-# LANGUAGE TypeFamilies, MultiParamTypeClasses, GADTs #-}
class OpLike op a b where
    type Result op a b
    interpret :: op -> a -> b -> Result op a b

data Expression a where
    Const :: a -> Expression a
    Op :: OpLike op a b => op -> Expression a -> Expression b -> Expression (Result op a b)

eval :: Expression a -> a
eval (Const x) = x
eval (Op op a b) = interpret op (eval a) (eval b) 
```

现在，您可以在程序中的任何位置添加运算符，而无需更改诸如 luqui 的`Op`数据类型之类的内容。这是一个非常人为的例子：

```
data Add = Add
add x y = Op Add x y

instance OpLike Add Int Int where
    type Result Add Int Int = Int
    interpret Add x y = x + y

instance OpLike Add Int Bool where
    type Result Add Int Bool = String
    interpret Add x y = if y then reverse (show x) else show x    

example = (Const (3::Int) `add` Const (10::Int)) `add` (Const True) 
```

`example`有类型`Expression String`并且`eval`适用于`"31"`:-)

# .net - 转换器不使用 DataView 执行

> ID：14779199
> 
> 赞同：1
> 
> 时间：2013-02-08T18:40:02.683
> 
> 标签：.net, wpf, inotifypropertychanged, dataview

我正在使用 DevExpress 的网格控件。我已将网格绑定到 DataView：

```
m_dvResponses = New DataView(...)
m_dvResponses.Sort = "SEQUENCENUMBER"

GridResponses.ItemsSource = m_dvResponses 
```

一切似乎都很好。当底层数据发生变化时，网格会自动更新，这很好。

问题是我在特定列上使用转换器为某些单元格着色：

```
<dxg:GridColumn FieldName="AGENCYNAME" CellStyle="{StaticResource AgencyCellStyle}"/>

<Style x:Key="AgencyCellStyle" BasedOn="{StaticResource {dxgt:GridRowThemeKey ResourceKey=CellStyle}}" TargetType="{x:Type dxg:CellContentPresenter}">
        <Setter Property="BorderThickness" Value="8,0,0,0"/>
        <Setter Property="BorderBrush" Value="{Binding Path=RowData.Row, Converter={StaticResource AgencyBackgroundColorConverter}, ConverterParameter=AGENCY}" />
        <Setter Property="Foreground" Value="{Binding Path=RowData.Row, Converter={StaticResource AgencyForegroundColorConverter}, ConverterParameter=AGENCY}" />
</Style> 
```

当数据更改时，值会更新，但转换器似乎没有执行。转换器仅在网格自己绘制时执行。

![前 ...](../Images/31beb68c79e06111f8cd55ff1455f46f.png)

![后 ...](../Images/cd4375ed710ce7cbb43d1b463965a88e.png)

请注意新的“p1”是如何没有为自己着色的，因为转换器没有在更新时触发。

我的问题是：数据更新时 DataView 会触发转换器吗？转换器是否依赖于实现 INotifyPropertyChanged 接口的对象？

谢谢你的帮助！

# java - 使用蛮力求解 2Sat CNF 形式

> ID：14779201
> 
> 赞同：0
> 
> 时间：2013-02-08T18:40:04.910
> 
> 标签：java, algorithm, 2-satisfiability

我目前正在为考试研究 2SAT 问题，但我真的不明白如何使用蛮力检查解决方案是否存在。我知道这看起来有点奇怪，但我了解如何更好地实现蕴含图，但我不太确定如何实现蛮力策略。

有人可以分享一些见解吗？也许在伪代码或java中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:15:18.703

公式中的变量可以编码为整数值中的位。然后，蛮力方法归结为积分“容器”可能采用的所有可能值的范围。

换句话说，你有一个整数数组，它代表你公式的所有变量，你用进位递增整数，并在每一步检查它代表的解决方案与你的公式。当解决方案匹配时，您停止。

对于这样的变量容器，这是一个非常简单的实现：

```
class OverflowException extends RuntimeException {}

public class Variables {
    int[] data;
    int size;

    public Variables(int size_){
        size = size_;
        data = new int[1 + size/32];
    }
    public boolean get(int i){
         return (data[i/32] & (1 << i%32)) != 0;
    }
    public void set(int i, boolean v){
        if (v)
            data[i/32] |= (1 << i%32);
        else
            data[i/32] &= ~(1 << i%32);
    }
    public void increment(){
         int i;
         for (i=0; i < size/32; i++){
             data[i]++;
             if (data[i] != 0) return;
         }
         if (size%32 != 0){
             data[i]++;
             if ((data[i] & ~((1 << (size%32)) - 1)) != 0)
                 throw new OverflowException();
        }
    }
} 
```

*（警告购买者：未经测试的代码）。*

变量数组也可以更简单地表示为一个`boolean`容器，但是由于增量步骤，您可能会损失一些性能（尽管可以通过使用[格雷码](http://en.wikipedia.org/wiki/Gray_code)而不是简单的二进制编码来进行增量操作来缓解这种情况，但是这个[实现](http://ozark.hendrix.edu/~burch/logisim/docs/2.5.0/en/guide/jar/incr.html)的复杂性似乎表明相反，如果你选择一个复杂的解决方案，它也可能是一个好的 sat2 求解器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:16:40.087

这就是我们不使用蛮力解决方案的原因:)，它们消耗大量资源。我的算法不是创建一个具有所有可能性的矩阵。但是要创建一个作业，然后立即对其进行测试。然后创建下一个。当您找到第一个解决方案时，您可以停止。

# unity3d - unity3d中可调整大小的游戏对象

> ID：14779204
> 
> 赞同：0
> 
> 时间：2013-02-08T18:40:18.347
> 
> 标签：unity3d

我是新来的团结。只是想要一些帮助。任何人都可以有任何想法...与通过 Android 设备的触摸事件调整 Gameobject 的大小有关。实际上，我想用手指在多点触控上重新调整对象的大小。就像我们在手机中使用放大和缩小一样。假设我有一个立方体形状的对象。所以我可以在触摸事件上动态重新缩放它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T05:44:41.867

使用它来确定用户使用多点触控调整多少

```
if (Input.touchCount >= 2)
{
    Vector2 touch0, touch1;
    float distance;
    touch0 = Input.GetTouch(0).position;
    touch1 = Input.GetTouch(1).position;

    distance = Vector2.Distance(touch0, touch1);
} 
```

这是另一个脚本[http://answers.unity3d.com/questions/301951/how-can-i-make-a-gameobject-scaleresize-with-mouse.html](http://answers.unity3d.com/questions/301951/how-can-i-make-a-gameobject-scaleresize-with-mouse.html)。使用从这里到该脚本的距离。看起来您要的是整个脚本，您只需将上面的代码组合在一起并使其协同工作。

# java - 非静态变量 this 在创建类的实例时不能从静态上下文中引用

> ID：14779205
> 
> 赞同：4
> 
> 时间：2013-02-08T18:40:19.173
> 
> 标签：java

当我尝试将 Edge 类（子类？）的新实例添加到我的数组列表时，出现“无法从静态上下文引用的非静态变量”错误。我无法弄清楚我做错了什么！

```
public class stuff{

    public static void main(String[] args){

        ArrayList<Edge> edges = new ArrayList<Edge>();
        edges.add(new Edge(1,2, 3, 4) );
    }

    public class Edge{

        private int x1;
        private int y1;
        private int x2;
        private int y2;
        private double distance;
        private boolean marked;

        //constructors      
        public Edge(int point1_x, int point1_y, int point2_x, int point2_y){
            x1 = point1_x;
            y1 = point1_y;
            x2 = point2_x;
            y2 = point2_y;

            int x_dist = x1 - x2;
            int y_dist = y1 - y2;
            distance = Math.hypot((double)x_dist, (double)y_dist);

            marked = false;
        }

        //methods
        public void mark(){
            marked = true;
        }
        public boolean isMarked(){
            return marked;
        }
        public double weight(){
            return distance;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T18:42:34.880

您需要制作`Edge`嵌套类`static`：

```
public static class Edge {
    ...
} 
```

否则，嵌套类保持非静态，这意味着它保留对其外部类实例的引用。因此，只有实例方法或您有权访问外部类实例的其他地方才能实例化内部类。

一般来说，公共静态类是顶级类的良好候选者。例外情况是，当它们与外部类绑定到扩展时，它们在其上下文之外毫无意义。例如，[`Map.Entry`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html)在其外部`Map`接口之外没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:46:33.153

```
non-static variable this cannot be referenced from a static context" 
```

此错误表明您正在访问没有对象的非静态变量。要访问非静态变量，您需要该类型的对象。只有静态变量可以在没有任何对象的情况下访问。

该解决方案与提供的@dasblinkenlight 相同。

# git - git区分大小写的麻烦

> ID：14779209
> 
> 赞同：1
> 
> 时间：2013-02-08T18:40:38.643
> 
> 标签：git, case-sensitive, case-insensitive

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:00:46.977

我没有尝试过，但我建议：

```
git mv Dir\file Dir\x-file
git mv Dir\x-file dir\file 
```

理论上，您最终会`dir\file`在您的存储库和工作树中。

# c - How to detect the other side has called shutdown() on a TCP socket?

> ID：14779211
> 
> 赞同：1
> 
> 时间：2013-02-08T18:40:44.650
> 
> 标签：c, windows, sockets, tcp, winsock

Say, a tcp client has connected to a tcp server on socket s. Next, the client call `shutdown(s);` then how should the server detect that the client has did that operation?

PS: I have known the server will receive FD_CLOSE. However, I don't know how to check that flag on the server side.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T18:43:38.113

来自winsock的[recv](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740121%28v=vs.85%29.aspx)描述：

> 如果连接已正常关闭，则返回值为零。

`recv`从, `WSARecv`（或）获取零字节数`ReadFile`是了解对方已关闭连接的常用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:46:38.630

xmllmx - 不要调用 recv() 来检查套接字是否已关闭，使用 select() 并要求它在套接字可读或可写时发出信号。另请注意，除非您只是为类编写演示，否则您很可能希望将套接字设置为非阻塞模式，因为使用太大的缓冲区调用 recv() 会导致它阻塞，因此会导致 send()带有无法放入操作系统缓冲区的缓冲区等...

最后，在 Winsock 中使用 select() 也很糟糕；您可能想要使用其中一种形式的重叠 I/O，例如完成例程或完成端口。

# sql - 尝试从链接服务器中选择的灾难性失败

> ID：14779212
> 
> 赞同：10
> 
> 时间：2013-02-08T18:40:44.817
> 
> 标签：sql, sql-server, tsql, sql-server-2012, linked-server

我已经从 SQL SERVER 2012 创建了与 Pervasive SQL 的链接 oledb/odbc 连接：

```
USE [master]
GO

/****** Object:  LinkedServer [KSLAP208]    Script Date: 2/8/2013 10:38:55 AM ******/
EXEC master.dbo.sp_addlinkedserver @server = N'KSLAP208', @srvproduct=N'Pervasive ODBC Interface', @provider=N'MSDASQL', @datasrc=N'C003', @location=N'localhost'
 /* For security reasons the linked server remote logins password is changed with ######## */
EXEC master.dbo.sp_addlinkedsrvlogin @rmtsrvname=N'KSLAP208',@useself=N'False',@locallogin=NULL,@rmtuser=NULL,@rmtpassword=NULL

GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'collation compatible', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'data access', @optvalue=N'true'
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'dist', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'pub', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'rpc', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'rpc out', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'sub', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'connect timeout', @optvalue=N'0'
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'collation name', @optvalue=null
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'lazy schema validation', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'query timeout', @optvalue=N'0'
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'use remote collation', @optvalue=N'true'
GO

EXEC master.dbo.sp_serveroption @server=N'KSLAP208', @optname=N'remote proc transaction promotion', @optvalue=N'true'
GO 
```

测试连接成功。

但是，当我尝试从数据库中进行选择时：

```
select * from [KSLAP208].[C003]..PA_Profile_BASE_1119 
```

我立即得到返回的字段名称，然后立即收到此错误：

```
Msg 7399, Level 16, State 1, Line 1
The OLE DB provider "MSDASQL" for linked server "KSLAP208" reported an error. The provider reported an unexpected catastrophic failure.
Msg 7330, Level 16, State 2, Line 1
Cannot fetch a row from OLE DB provider "MSDASQL" for linked server "KSLAP208". 
```

我究竟做错了什么？为什么我不能选择？我能够看到链接服务器上的所有数据库和表。

**如果我选择少量数据选择 field1,field2 它可以正常工作。**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T18:57:25.727

我想我记得当我创建一个 postgresql 链接服务器时这是一个问题。我认为您可能需要将此设置为 false 重新创建链接服务器（或者只需在链接服务器属性->服务器选项中更改它）：

```
EXEC master.dbo.sp_serveroption @server=N'KSLAP208', 
    @optname=N'remote proc transaction promotion', @optvalue=N'false' 
```

此外，尝试使用[`OPENQUERY`](http://msdn.microsoft.com/en-us/library/ms188427.aspx)对链接运行它

```
SELECT * 
FROM OPENQUERY(KSLAP208,'SELECT * FROM PA_Profile_BASE_1119'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T18:47:19.517

当我访问远程表时，我需要完整的 4 部分命名。试试这个：

```
select * from [KSLAP208].[C003].dbo.PA_Profile_BASE_1119 
```

我从来没有调查过为什么。我刚刚养成了包括所有部分的习惯。

您可以使用以下方法获取列列表：

```
select column_name
from [KSLAP208].[C003].INFORMATION_SCHEMA.COLUMNS
where table_name = 'PA_Profile_BASE_1119' 
```

（和 schema_name = 如果你需要的话）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T18:47:50.640

无法回答原因，但您可以这样尝试；

```
--link server and login
EXEC master.sys.sp_addlinkedserver N'KSLAP208',N'SQL Server';
EXEC master.sys.sp_addlinkedsrvlogin @rmtsrvname='KSLAP208', 
                  @useself='false',
                  @rmtuser='username',
                  @rmtpassword='password';

        --DO YOUR JOB HERE 
        SELECT  TOP (10) * FROM  [KSLAP208].dbName.dbo.[tableName]

--drop server link and login
EXEC sp_droplinkedsrvlogin 'KSLAP208', NULL
EXEC sp_dropserver 'KSLAP208', NULL; 
```

# php - CodeIgniter manage records from database

> ID：14779215
> 
> 赞同：0
> 
> 时间：2013-02-08T18:40:48.453
> 
> 标签：php, codeigniter

I am having a trouble coming up with the concept of this. My application is stored in `http://localhost` (duh) and I have an admin panel, which can be accessed by going to `http://localhost/admin`. I have admin panel menu and one of the menus is Manage Pages, accessed by going to `http://localhost/admin/manage_pages`. Manage Pages page brings up results from database which have title, description and ID. Now, my question is, if I want to edit lets say the third row's title, how would I do this? would it be `http://localhost/admin/manage_pages/3`? But for that case I would have to create a function in controller? I am confused.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:35:03.280

如果您喜欢 URI 的格式：localhost/admin/manage_pages/3，那么您唯一缺少的就是为您的控制器函数接受一个变量。在这种情况下，如果没有传递任何内容，我更喜欢设置默认值，并且使用 if else 语句，您有一个方法可以加载指定页面，或者在没有传递任何内容时加载所有页面。

控制器管理员：

```
public function manage_pages($page_id='')
{
    if ($page_id == '')
    {    LOAD ALL RESULTS }
    else
    {    LOAD 1 RESULT    }
} 
```

# php - 密码哈希：Keccak 与否

> ID：14779216
> 
> 赞同：3
> 
> 时间：2013-02-08T18:40:48.737
> 
> 标签：php, python, blowfish, sha-3, keccak

哈希算法竞赛的获胜者`SHA-3`已被选中。获胜者的算法是**Keccak**。

我使用 Blowfish 并且非常喜欢它，但据说 Keccak 更好。是否值得将其用于在我的网站上存储用户密码？

如果是，是否有任何用于 Web 编程的 PHP、Python、Ruby 或任何其他语言的 Keccak 实现？

我希望这个问题对其他人也有帮助。谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-13T20:51:21.763

*简短的回答：*

不，而且可能永远不会。对于密码散列，BCrypt 和 PBKDF2-HMAC- *xxx*是比任何简单的 SHA-1/2/3 算法更好的*选择*。在 SHA-1/2 实际发布可行的原像攻击之前，SHA-3 实际上是*最糟糕*的选择，特别*是因为*它的速度和低缓存占用。

*更长的答案：*

不同密码散列算法的相对安全性的一个主要因素是：与您相比，专门的攻击者散列密码的速度有多快？也就是说，他们的软件/硬件组合（为了密码散列的明确目的而购买）与服务器上的软件（软件的现成 C 实现，为应用程序的需要购买的硬件）相比要快多少。

SHA-3 的主要标准之一是应该在嵌入式架构上高效运行，这些架构以少量的片上缓存、寄存器等为代表。但这也描述了现代 GPU：更少的寄存器/累加器，更小的片上缓存；但另一方面，他们的芯片经过优化，可以在大量数据上并行执行相同的任务。这对于您的攻击者的蛮力尝试来说是完美的：对于在硅片上花费的每一美元，您的攻击者通过购买另一个 GPU 获得的 SHA3 哈希/秒比购买更好的 CPU 获得的多。

出于这个特定原因，BCrypt 被设计为对内存表进行大量读取/写入，该内存表目前比大多数 GPU 的缓存还大。这意味着当前基于 GPU 的 BCrypt 实现甚至无法与它们的 CPU 对应。因此，仅通过选择 BCrypt，您就可以通过迫使攻击者购买与您相同的 CPU 来减缓攻击者每花费一美元的优势。

这就是为什么原始速度是密码散列的敌人。*您想选择一种算法，其最快的软件/硬件组合为您的攻击者提供的每美元优势比您将使用的商品软件/硬件的优势最小*。现在，那是 BCrypt，或者 PBKDF2-HMAC- *xxx*的稍微少一点的选择。由于 GPU 可能只会在 SHA3 方面做得更好，我怀疑它永远不会是正确的选择。我没有关于 SHA3 的数字，但“哪个更安全”并不是一个模糊的相对术语——上面的规则可以用来精确量化它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-07T18:15:01.813

这是一个老问题，但听起来大家又被[密码学术语](https://paragonie.com/blog/2015/08/you-wouldnt-base64-a-password-cryptography-decoded)弄糊涂了。让我们澄清一些事情。

*   Keccak 是一个加密哈希函数。
*   Blowfish 是一种分组密码（具有 64 位块大小，不应再用于加密）。
*   Bcrypt 是一个**密码散列函数**，它的用例与单纯的加密散列函数不同。Bcrypt 基于 Blowfish，但它不是 Blowfish。

我不只是迂腐。这些区别很重要，因为 Keccak 不是在与 bcrypt 竞争，而是在与 SHA-256 竞争。

[这是在 PHP 中安全存储密码](https://paragonie.com/blog/2016/02/how-safely-store-password-in-2016#php)的简单方法：

1.  使用`password_hash()`,`password_verify()`和`password_needs_rehash()`

就是这样。您甚至不需要关心这些函数的作用，您只需要使用它们（除非您使用的是 libsodium 之类的东西）。

目前，该接口提供bcrypt。Bcrypt 大部分都很好，除了一些需要注意的脚子弹：

1.  它会在 72 个字符后截断密码，这会降低具有低熵每字符密钥空间的长密码的安全性。
2.  如果您尝试通过预散列来规避前一个脚注，请注意不要将原始二进制文件传递给 bcrypt，因为它也会在`NUL`字符之后截断。

如果您担心这些问题，[password_lock](https://github.com/paragonie/password_lock)中存在临时权宜之计。

在 PHP 7.2 中，很可能可以通过此接口使用 Argon2i（假设 RFC 通过）。

In a few years (circa PHP 7.5, assuming no major version bumps) we may see `PASSWORD_ARGON2I` become the new value for `PASSWORD_DEFAULT`, but maybe not. We've got a few years for cryptography researchers to gain confidence in it.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-08T18:57:36.087

`I use Blowfish and really like it, but Keccak is said to be better.`

“更好”是一个相对的术语。在什么方面更好？安全性、性能、可扩展性、可移植性……？

如果您只想为散列用户密码提供更高的“安全性”，那么 Keccak 可能**不是**一个好的选择。Blowfish 将为您提供更好的“安全性”，因为如果发现散列，则暴力破解散列将花费更长的时间。

话虽如此，如果您正在寻找在嵌入式架构上运行的东西，或者如果您想要更大的可移植性，Keccak 是一个不错的选择。[这是github上的一个PHP实现](https://github.com/strawbrary/php-sha3)，[这里是另一个](https://github.com/Dexus/php-keccak-hash) 你也可以通过[下载Keccak源码](http://keccak.noekeon.org/files.html)来做你自己的语言扩展。

但是，老实说，最好坚持你所知道的。如果黑客可以轻松获取您当前使用的河豚散列，那么问题不在于散列算法，而在于对数据库的访问。另请注意，PHP 扩展必须安装在所有使用它的服务器上，如果您使用共享主机，这可能会也可能不会。

实际上，您可能应该坚持现有的。很有可能它足够安全，一旦 Keccak 实现被移植到标准 PHP 核心，您就可以移动（如果需要）。只是我的两分钱。

# javascript - 启用和禁用按钮不起作用

> ID：14779220
> 
> 赞同：-1
> 
> 时间：2013-02-08T18:41:24.133
> 
> 标签：javascript, html, forms, input, disabled-input

我正在尝试处理表格。目前，该按钮已禁用。但是，当您单击复选框时，该按钮应启用，如果您没有单击复选框，则应再次禁用该按钮。当我单击复选框时，我无法启用按钮。我的循环可能有问题。循环在函数 checkAge 中。有什么解决办法吗？

Javascript

```
function checkAge(e){

var theTarget = e.target ? e.target : e.srcElement;
alert(theTarget.id);

var form = document.getElementById("form");
if (document.getElementById("content")) {
    form.removeChild(document.getElementById("content"));
}

if(theTarget.id == "fourteen"){
    var newDiv = document.createElement("div");
    newDiv.setAttribute("id", "content");

    var br = document.createElement("br");
    newDiv.appendChild(br);
    var br = document.createElement("br");
    newDiv.appendChild(br);

    newDiv.appendChild(document.createTextNode("Vilka seriefigurer träffade du?"));

    var br = document.createElement("br");
    newDiv.appendChild(br);

    var musse = document.createElement('input');
    musse.setAttribute("type", "checkbox");
    musse.setAttribute("name", "musse");
    musse.setAttribute("value", "musse");
    musse.setAttribute("id", "musse");
    newDiv.appendChild(musse);
    newDiv.appendChild(document.createTextNode("Musse"));

    var br = document.createElement("br");
    newDiv.appendChild(br);

    var adi = document.createElement('input');
    adi.setAttribute("type", "checkbox");
    adi.setAttribute("name", "adi");
    adi.setAttribute("value", "adi");
    adi.setAttribute("id", "adi");
    newDiv.appendChild(adi);
    newDiv.appendChild(document.createTextNode("Ådi"));

    var br = document.createElement("br");
    newDiv.appendChild(br);

    var bamse = document.createElement('input');
    bamse.setAttribute("type", "checkbox");
    bamse.setAttribute("name", "bamse");
    bamse.setAttribute("value", "bamse");
    bamse.setAttribute("id", "bamse");
    newDiv.appendChild(bamse);
    newDiv.appendChild(document.createTextNode("Bamse"));

    var br = document.createElement("br");
    newDiv.appendChild(br);

    var input = document.createElement("input");
    input.setAttribute("type", "submit");
    input.setAttribute("name", "submit");
    input.setAttribute("id", "submit");
    input.setAttribute("value", "Skicka");
    newDiv.appendChild(input);

    form.appendChild(newDiv);

    var inputs = document.getElementsByTagName("input");
    for(i=0; i<inputs.length; i++){
        input.disabled = true;
        if(inputs[i].type == "checkbox" && inputs[i].checked){
            input.disabled = false;
        }
        else{
            input.disabled = true;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:52:27.303

创建复选框时，您不会将任何事件附加到它们。禁用输入的循环仅在您创建表单的 checkAge 部分时发生，并且永远不会再次执行。如果您将偶数附加到复选框，那么它应该可以解决您的问题。

此外，您的 checkAge 函数将复选框输入添加到文档中，但您永远不会更新`inputs`数组以包含复选框。

您可能需要考虑最初将所有 HTML 元素添加到页面，并使用 display:none/display:block 隐藏/显示元素。

# ruby - 许多实例变量或具有许多键的散列？

> ID：14779224
> 
> 赞同：-3
> 
> 时间：2013-02-08T18:41:38.250
> 
> 标签：ruby, sinatra, rack

在 Sinatra 应用程序中，我有一个代码

```
gef '/123' do
  @var1 = # some calculations
  @var2 = # some calculations
  #..... many of them

  haml(:"view123")
end 
```

并且所有实例变量都在`view123`. 我想知道，使用哈希而不是像这样的许多变量会有什么好处：

```
gef '/123' do
  hash_var = {}
  hash_var[:var1] = # some calculations
  hash_var[:var2] = # some calculations
  #..... many of them

  haml(:"view123")
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:50:49.340

我认为您走在正确的轨道上，很难在这种非常抽象的意义上提出建议，但总的来说，这`# some calculations`看起来像业务逻辑。业务逻辑属于模型。

换个模型怎么样？创建一个执行这些计算的新类，然后实例化它并将实例传递给您的视图。您的控制器/路由处理程序保持精简和干净，并且许多计算行都隐藏在专门用于该事物的文件中。干净整洁。

```
get '/123' do
  @calc = CrazyCalculator.new
  haml(:view123)
end 
```

view123.erb：

```
<ul>
  <li>Calc1: <%= @calc.calc1 %></li>
  <li>Calc2: <%= @calc.calc2 %></li>
  <li>Calc3: <%= @calc.calc3 %></li>
  <li><!-- many other calculation methods --></li>
</ul> 
```

# javascript - sencha touch 嵌套列表的 Javascript 或 jquery 版本？

> ID：14779225
> 
> 赞同：0
> 
> 时间：2013-02-08T18:41:40.140
> 
> 标签：javascript, jquery, css, sencha-touch-2

我真的很喜欢 secha touch 2 中的滑动嵌套列表模式：

[http://senchalearn.github.com/Nested-list-demo/](http://senchalearn.github.com/Nested-list-demo/)

我也将其视为 ios 模式，我想知道是否有任何纯 javascript 或 jquery 模块可以让我在 sencha touch 框架之外使用它？

或者，如果没有，关于如何使用 html5、css3 和 javascript（如果必要的话可能还有 jquery）来实现这一点的任何模糊的、随意的想法？

我见过没有滑动效果的 jquery 移动嵌套列表 - 不像 sencha touch 版本那么酷:)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:03:42.443

查看[文档](http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html)中的 jQuery 移动过渡效果。它们可以应用于嵌套列表链接以创建您想要的任何效果

[http://jsfiddle.net/k5ZG8/](http://jsfiddle.net/k5ZG8/)

```
<div data-role="page" id="main">
<div data-role="header">main</div>
<div data-role="content">
    <ul data-role="listview">
        <li><a href="#other" data-transition="slide">other</a></li>
    </ul>
</div>
</div>
<div data-role="page" id="other">
<div data-role="header">other</div>
<div data-role="content">
    <ul data-role="listview">
        <li><a href="#main" data-transition="slide">main</a></li>
    </ul>
</div>
</div> 
```

# node.js - socket.io 无法获取房间内的客户端数量

> ID：14779226
> 
> 赞同：2
> 
> 时间：2013-02-08T18:41:42.090
> 
> 标签：node.js, socket.io

我正在制作一个游戏，我想创建 2 用户房间，当我尝试获取用户数量时

```
io.sockets.emit('roomUsers', io.sockets.clients(openRoom).lenght); 
```

node.js 崩溃

这是我得到的日志，我不知道这是什么意思：

```
/Users/ilya/game-app-1/node_modules/socket.io/lib/parser.js:75
      data = JSON.stringify(ev);
                  ^
TypeError: Converting circular structure to JSON
    at Object.stringify (native)
    at Object.exports.encodePacket (/Users/ilya/game-app-1/node_modules/socket.io/lib/parser.js:75:19)
    at SocketNamespace.packet (/Users/ilya/game-app-1/node_modules/socket.io/lib/namespace.js:154:23)
    at SocketNamespace.emit (/Users/ilya/game-app-1/node_modules/socket.io/lib/namespace.js:188:15)
    at Socket.<anonymous> (/Users/ilya/game-app-1/app.js:101:14)
    at Socket.EventEmitter.emit [as $emit] (events.js:96:17)
    at SocketNamespace.handlePacket (/Users/ilya/game-app-1/node_modules/socket.io/lib/namespace.js:335:22)
    at Manager.onClientMessage (/Users/ilya/game-app-1/node_modules/socket.io/lib/manager.js:488:38)
    at WebSocket.Transport.onMessage (/Users/ilya/game-app-1/node_modules/socket.io/lib/transport.js:387:20)
    at Parser.<anonymous> (/Users/ilya/game-app-1/node_modules/socket.io/lib/transports/websocket/hybi-16.js:39:10) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:50:31.670

JSON.stringify() 无法转换具有循环引用的对象。无论“ev”是什么，它都以某种方式在自身内部引用自己。

例如，DOM 节点有`ownerDocument`s，它指的是`document`. `document`最终通过`document.body.ownerDocument`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T18:45:27.897

这意味着它正在尝试将对象转换为 json，并且树下有一个成员指向它的父对象之一。由于递归，这将创建一个无限深的 json 文件

# codeigniter - 无法加载 Codeigniter 自定义库

> ID：14779231
> 
> 赞同：0
> 
> 时间：2013-02-08T18:42:32.500
> 
> 标签：codeigniter

图书馆

```
class getLang {
   public function getText($en, $ar) {
      $CI =& get_instance();
      $lang = $CI->session->userdata('language');
      if ($lang == 'en') {
         $string = $en;
      } else if ($lang == 'ar') {
         if (!empty($ar)) {
            $string = $ar;   
         } else if (empty ($ar)) {
            $string = $en;
         }
      }
      return $string;
   }
} 
```

控制器

```
class Home extends MY_Controller {
   public function test() {
      $this->load->library('getLang');
      return $this->getLang->getText('text', '');
   }
} 
```

当我运行 home/test 时，我收到此错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: Home::$getLang

Filename: controllers/home.php

Line Number: 6 
```

我已经在 config/autoload 中加载了自定义库。看起来库没有加载，我也尝试在控制器中加载它，仍然无法正常工作！我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T18:58:11.810

CodeIgniter 的文档明确指出类名和文件名必须大写。从[文档中](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)：

> 1.  文件名必须大写。例如：Myclass.php
> 2.  类声明必须大写。例如：类 Myclass
> 3.  类名和文件名必须匹配。

这可能是它没有正确加载的原因。

在旁注中，一个名为的类`getLang`听起来是错误的。这听起来像是一种方法。我会建议一个名字，如`Language`, `Translator`, ...

编辑：文档还要求使用名称的小写版本来访问您的库。例子：`$this->getlang->getText(...)`

# c# - FubuMvc：如何在 Razor 中使用布局？

> ID：14779237
> 
> 赞同：1
> 
> 时间：2013-02-08T18:42:44.787
> 
> 标签：c#, razor, fubumvc

非常简单的 helloworld fubumvc 应用程序，我无法使用 Razor 使其与布局一起使用。

这是一个示例代码： [https ://gist.github.com/anonymous/4740987](https://gist.github.com/anonymous/4740987)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:08:51.353

我将 Application.cshtml 保存在项目根目录的 /Shared 文件夹下，并且没有显式设置 @Layout 属性，一切都很好。

也许您缺少 NuGet 中的一些包。

从提供的文件中不清楚您最终遇到的问题类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:05:50.807

FubuMVC 也依赖于使用布局指令而不是代码块。

示例：@layout 应用程序

# ios - 从xcode中单元格内的文本字段获取值

> ID：14779242
> 
> 赞同：1
> 
> 时间：2013-02-08T18:43:18.153
> 
> 标签：ios, objective-c, uitableview

所以我有一个显示 3 个名称的弹出表视图。我想要得到的是，当用户从弹出表中选择一个名称时，它将关闭弹出窗口并将该名称显示在原始视图控制器的标签或文本字段上。这是我到目前为止所拥有的：

（selectedName 是我在原始视图控制器上的标签名称）

```
- (void) tableView: (UITableView *) tableView didSelectRowAtIndexPath: (NSIndexPath *) indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    selectedName.text = cell.textLabel.text;

} 
```

它不起作用，我也在寻找一种方法，让单击单元格时弹出窗口消失。有任何想法吗？

编辑：（设置单元格标签文本的代码）

```
cell.textLabel.text = [[myArray objectAtIndex:indexPath.row] objectForKey:@"Name"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:05:37.477

您可以做的是定义一个协议，您的 tableview 可以使用该协议与演示者进行通信。这是一种常见的做法。

这是一个粗略的例子：

```
@protocol MyTableViewDelegate<NSObject>
-(void)myTableView:(TheTableViewClass *)tableView didSelectValue:(NSString *)value;
@end

@interface TheTableViewClass : UITableViewController
@property (nonatomic, assign) id<MyTableViewDelegate> d;
@end

@implementation TheTableViewClass
@synthesize d;
- (void) tableView: (UITableView *) tableView didSelectRowAtIndexPath: (NSIndexPath *) indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    [self.d myTableView:self didSelectValue:cell.textLabel.text];
}
@end

@implementation MyPresenter
-(void)present
{
    self.myTableViewClass = [MyTableViewClass ....];
    self.myTableViewClass.d = self;
    //present myTableViewClass...
}
-(void)myTableView:(TheTableViewClass *)tableView didSelectValue:(NSString *)value
{
    //Set some label to the value passed in
    //Dismiss self.myTablViewClass
}
@end 
```

一些附加阅读：[使用协议](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html)

# multithreading - 需要示例代码解释 Tomcat 中的 Workmanager

> ID：14779246
> 
> 赞同：1
> 
> 时间：2013-02-08T18:43:30.693
> 
> 标签：multithreading, tomcat, asynchronous, workmanagers, commonj

我想知道如何在 Tomcat 7 中使用 WorkManager。我遇到了开源库**Foo-CommonJ**，但我没有找到解释用法的示例代码。FooWorkManager 的构造函数的输入参数是 commonj.work.work 类的一个实例，因为没有人提供**commonj.work.work**类（tomcat 和 foo-commonj 都没有）。基本上我需要一个示例代码来解释在 tomcat 中 WorkManager (FooCommonj jar) 的用法。如果 Foo-Commonj 不能正确支持 workmanager，那么还有其他选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:53:17.537

JSR-237 已被撤销，但已与 JSR-236 合并。 [http://jcp.org/en/jsr/detail?id=237](http://jcp.org/en/jsr/detail?id=237) 原因：JSR 237 已与 JSR 236 合并，为 Java EE 并发提供单一、一致的规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-10T11:23:38.047

## 老学校的方式

复制到 jars 之后的 tomcat\lib 文件夹：

*   commonj-xxx.jar
*   tomcat-commonj-xxx.jar

在您的应用程序或 tomcat 的 context.xml 中创建一个新的 WorkManager 实例：

```
<Resource name="wm/myWorkManager" type="commonj.work.WorkManager" auth="Container"
      factory="de.myfoo.commonj.work.FooWorkManagerFactory"
      maxThreads="10"
      minThreads="5" /> 
```

使用 JNDI 获取此实例。例如使用 web.xml：

```
<resource-ref>
  <description>Work manager example</description>
  <res-ref-name>wm/myWorkManager"</res-ref-name>
  <res-type>commonj.work.WorkManager</res-type>
  <res-auth>Container</res-auth>
  <res-sharing-scope>Unshareable</res-sharing-scope>
</resource-ref> 
```

任何其他方式都应该有效。

# tfs - microsoft visual studio scrum 2.0 与 MSF for Agile Software Development 6.0 有什么区别

> ID：14779250
> 
> 赞同：20
> 
> 时间：2013-02-08T18:43:52.857
> 
> 标签：tfs, scrum, tfs-process-template, ms-solution-framework

Microsoft Visual Studio Scrum 2.0 与 MSF for Agile Software Development 6.0 有什么区别。

我希望获得有关 Visual Studio 和 TFS 用于敏捷开发的最佳模板的反馈。我主要想知道是否有人能告诉我 Visual Studio 中两个最新模板之间的区别。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-08T20:41:58.627

Scrum 模板是专门为尽可能遵循 Scrum 流程和术语而创建的，并且是 Microsoft 和 scrum.org 之间的合作成果。

敏捷模板的 MSF 最初是作为敏捷开发的通用过程模板创建的。

如果你要做 Scrum，这是目前最常见的敏捷流程，那么 Scrum 流程模板是最合乎逻辑的选择。

如果您想遵循另一个敏捷过程，那么敏捷的 MSF 可能更合适，因为它应该可用于大多数敏捷过程。命名可能不完全匹配，但进程可能会映射到它。

此处解释了差异：[https ://msdn.microsoft.com/Library/vs/alm/work/guidance/choose-process](https://msdn.microsoft.com/Library/vs/alm/work/guidance/choose-process)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-28T10:14:43.770

其他解释总结成一张图片

![](../Images/31e00df3658d9cbafadfdffba285707c.png)

阅读[https://nkdagility.com/agile-vs-scrum-process-templates-team-foundation-server/](https://nkdagility.com/agile-vs-scrum-process-templates-team-foundation-server/)

简而言之：

在 SCRUM 中，错误转到产品日志，但在敏捷中没有。

# javascript - 引用闭包外的数组会导致内存泄漏吗？

> ID：14779251
> 
> 赞同：0
> 
> 时间：2013-02-08T18:43:54.860
> 
> 标签：javascript, closures

我有一组数组，我在我的闭包中调用它们，它们在另一个名为 utils 的文件中声明。

实用程序.js

```
var array1 = [];
var array2 = [];
var array3 = [];
var array4 = []; 
```

我的 Closures.js

```
(function() {

myObject.createWindow= function() {
     someField.value = array1;
})(); 
```

1.  如果我将其他文件中的 array1 对象引用到另一个闭包的 js 文件中，是否会导致内存泄漏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T18:45:18.897

如果您的数组位于文件的根目录，则它是一个全局变量。

当然，这需要记忆，但没有特定的理由让这种记忆增长。

所以这里没有特定的内存泄漏风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T18:53:18.477

当无法再访问分配的内存时，将对其进行垃圾回收。所以，如果一个数组在一个仍然可以被调用的闭包中被引用，它就不会被垃圾回收。

例如：

```
f = function() {
    var arr1 = [];
    var arr2 = [];

    return function() {
        return arr1;
    }
};

v = f(); 
```

arr2 可以立即被垃圾收集，但 arr1 不能直到 v 的值更改为其他值，因为仍然可以访问 arr1。

所以，在你的情况下，你有

```
var arr1 = [];
var arr2 = [];

...

f = function() {
    return arr1;
} 
```

所以 arr2 可以被垃圾收集（假设它已经超出范围并且没有在其他任何地方被引用），但是 arr1 在没有更多引用之前不能被收集。具体来说，在您的情况下， createWindow 指的是array1，因此绝对不能被垃圾收集。

但正如在另一篇文章中指出的那样，如果它们都具有全局范围，那么两者都不会，因为它们仍然可以在任何地方被引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T19:07:56.860

内存在应该释放的时候没有被释放，就被认为是泄漏了。将数组附加到全局命名空间意味着它们将在全局命名空间存在时被释放。换句话说，对于他们来说，这将是因为浏览器故障。在页面失去范围之前，它们几乎永远不会被收集。在页面失去您可以在代码中引入的范围后，没有什么可以影响它们。

如果您希望您的数组被垃圾收集，那么将它们放在一个在某个时候会失去作用域的作用域中。当范围失去其范围时，数组将有*资格*进行垃圾收集（但不会立即进行垃圾收集）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-08T18:45:46.383

如果文件-> 对象解析和垃圾收集（javascript 管理内存的一般方式）完全相互关联，那将是非常令人惊讶的。它不应该导致内存泄漏。

# c# - 为什么 Process.Start 会意外返回 false

> ID：14779252
> 
> 赞同：3
> 
> 时间：2013-02-08T18:43:56.730
> 
> 标签：c#, .net, windows, service, process

使用[Process.Start时](http://msdn.microsoft.com/en-us/library/e8zac0ca.aspx)外壳另一个可执行文件（不是文件类型）为什么它会返回 false 并且无法启动可执行文件而不是抛出异常？更清楚地说，文档提到返回为“如果启动了流程资源，则返回 true；如果没有启动新的流程资源（例如，如果重用现有流程），则返回 false”。“重用现有进程”的所有解释似乎都是为了启动在处理它们的程序的现有实例中打开的文件（例如启动在现有图像编辑器实例中打开的 .jpg）。在这种情况下启动的可执行文件是内部编写的，不会阻止新实例的执行。不存在应用程序甚至尝试启动的日志记录或其他迹象。找不到关于为什么该过程没有开始的反馈。

值得注意的是，快速连续启动的可执行文件数量越多，该问题的重现性就越高。生产环境中的相同代码似乎没有失败，但负载在许多机器上分布得更好。在测试环境中，100 多个进程在单台机器上快速连续启动，并且几乎一致的是最后 7-10 个进程是唯一无法启动的进程。控制进程能够在启动时检测到已经运行的进程，并且只会启动那些当前未运行的进程。这似乎工作正常，当我们完全重新启动时（所有 100 多个实例都被验证已停止，然后我们启动它们）7 左右无法启动，但我们可以重新启动控制过程和相同的可执行文件相同的设置成功运行。知道所有启动的进程都是具有不同命令行参数的相同可执行文件可能很有用。控制进程是一个 Windows 服务，生成的可执行文件是命令行应用程序，不依赖于标准输入或输出流。

在解决此问题的过程中，为了安全起见，我已确保启动外部应用程序的线程在单线程单元中运行，因为 ShellExecuteEx 可以依赖于此，尽管我相信框架现在可以解决此问题。我尝试在进程执行之间添加 Thread.Sleep 延迟，这似乎不会影响未启动的应用程序的数量（尝试从 100 毫秒到 300 毫秒的不同延迟，最近每个实例达到 1500 毫秒左右后延迟增加）。

Windows 是否存在最大数量的子进程，或者当 Windows 尝试同时启动大量进程时可能会发生一些错误？对于执行失败的*原因*，我无法找到合理的答案。以下是启动可执行文件本身的位（一些内部内容已编辑，但所有框架代码都完好无损）：

```
 if (!Path.IsPathRooted(processPath)) 
        {
            processPath = Path.GetFullPath(Path.Combine(
                Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location),
                processPath));
        }

        ProcessStartInfo psi =
                new ProcessStartInfo(processPath, args);
        psi.UseShellExecute = true;
        psi.CreateNoWindow = true;

        Trace("Starting {0} {1}", processPath, args);

        using (Process process = new Process())
        {
            process.StartInfo = psi;
            bool success = process.Start();
            if (!success)
            {
                // this is what doesn't make sense
            }
        }

        Trace("Started {0} {1}", processPath, args); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-30T21:47:15.943

我有点惊讶它没有抛出 Win32Exception。尝试在 Process.Start() 失败后检索最后一个 Win32 错误。你这样做：

```
var errorCode = Marshal.GetLastWin32Error(); 
```

然后，假设您将收到 Win32 错误，请在此站点上查找：

[https://msdn.microsoft.com/en-us/library/windows/desktop/ms681381(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms681381(v=vs.85).aspx)

# objective-c - 通过按钮操作清除文本字段中的文本或单元格中的标签

> ID：14779258
> 
> 赞同：0
> 
> 时间：2013-02-08T18:44:14.963
> 
> 标签：objective-c, cocoa-touch, uitableview

我在 tableView 的单元格中有一些文本字段和标签，我需要在按下按钮时重置为空。我无法通过 reloadData 调用并将 cellForRowAtIndexPath 中的所有内容设置为 @"" 来执行此操作，因为在某些情况下会重新加载表并且我需要保留值。

所以唯一的选择是让我以某种方式遍历每个文本字段或标签，并将它们的文本单独设置为@""。但是我如何访问一个单元格，然后拉出文本字段或标签？请记住，我的表格还包含不同类型的自定义单元格。

我认为最好用标签来做，但我不知道如何访问单元格的“viewWithTag”调用。如果还有这样的事情。

*编辑*在其中创建文本字段的添加代码块

```
 BaseTableViewCell *baseCell = (BaseTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellWithIdentifier];
    if (baseCell == nil){
        baseCell = [[BaseTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellWithIdentifier];

        BaseTextField *rightText = [[BaseTextField alloc] initWithFrame:CGRectMake(150, 7, 150, 31)];
        rightText.placeholder = tableValues.key;
        rightText.font = [UIFont systemFontOfSize:14];
        rightText.tag = (indexPath.section + 1) + (indexPath.row + 1);
        rightText.delegate = self;
        [baseCell addSubview:rightText];
    }
    NSLog(@"resetting text");
    baseCell.selectionStyle = UITableViewCellSelectionStyleNone;
    baseCell.backgroundColor = [UIColor clearColor];
    baseCell.backgroundView = [[UIView alloc] initWithFrame:CGRectZero];
    baseCell.textLabel.text = tableValues.value;

    return baseCell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:55:27.380

如果您拥有“数据模型”并将其视为“真相”，此类问题往往会自行解决。换句话说，始终从数据中填充表格视图的每个单元格。你可以有一个或两个简单的数组，或者更复杂的东西。如果您想删除任何内容，请删除模型中的值并重新加载表格。

如果您想以这种方式做事，这个[SO 答案将帮助您循环浏览您的表格视图；](https://stackoverflow.com/questions/14564077/reload-only-a-subview-of-a-custom-uitableviewcell/14564367#14564367)但是，我建议您更新数据并调用 reload tableview。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:51:49.893

使用 UITableViews

```
- (NSArray *)visibleCells 
```

它为您提供所有单元格，然后循环遍历单元格子视图并重置标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T18:55:22.440

UIView 有一个你可以设置的标签属性。

```
UITextField *textField = [UITextField alloc] initWithFrame:CGRectMake(10, 10, 200, 28)];
textField.tag = 20; 
```

通常，UITableView 会重用单元格，因此当单元格重新加载不同的内容时，您可能会遇到问题。

您应该考虑将数据与表视图分开管理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T18:56:56.627

如果我理解你的问题是正确的，你不要通过访问单元格来做到这一点，而是通过更改用于填充单元格的数组。将自定义对象中的任何字段或字典中的值（如果您使用字典数组）设置为 @""。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T18:53:13.737

有一个名为 的 UITableView 属性`visibleCells`，它是您可以看到的所有单元格的数组。这就是你需要改变的全部吗？否则，您将需要遍历所有单元格并将文本字段设置为 @"" 就像您说的那样，使用`-numberOfSections`,`-numberOfRowsInSection`和`-cellForRowAtIndexPath:`

# android - 获取布局的背景颜色

> ID：14779259
> 
> 赞同：73
> 
> 时间：2013-02-08T18:44:17.670
> 
> 标签：android, background-color

我想从我的代码中找到布局的背景颜色。有没有办法找到它？像`linearLayout.getBackgroundColor()`什么？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-02-08T18:57:41.247

如果您的背景是纯色，这只能在 API 11+ 中完成。

```
int color = Color.TRANSPARENT;
Drawable background = view.getBackground();
if (background instanceof ColorDrawable)
    color = ((ColorDrawable) background).getColor(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-08-17T07:27:46.530

要获取布局的背景颜色：

```
LinearLayout lay = (LinearLayout) findViewById(R.id.lay1);
ColorDrawable viewColor = (ColorDrawable) lay.getBackground();
int colorId = viewColor.getColor(); 
```

如果它是RelativeLayout，那么只需找到它的id并使用那里的对象而不是LinearLayout。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-07-30T02:24:37.020

ColorDrawable.getColor() 仅适用于 API 级别 11 以上，因此您可以使用此代码从 API 级别 1 支持它。使用 API 级别 11 以下的反射。

```
public static int getBackgroundColor(View view) {
        Drawable drawable = view.getBackground();
        if (drawable instanceof ColorDrawable) {
            ColorDrawable colorDrawable = (ColorDrawable) drawable;
            if (Build.VERSION.SDK_INT >= 11) {
                return colorDrawable.getColor();
            }
            try {
                Field field = colorDrawable.getClass().getDeclaredField("mState");
                field.setAccessible(true);
                Object object = field.get(colorDrawable);
                field = object.getClass().getDeclaredField("mUseColor");
                field.setAccessible(true);
                return field.getInt(object);
            } catch (NoSuchFieldException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }
        }
        return 0;
    } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-03-02T13:03:14.140

简短而简单的方法：

```
int color = ((ColorDrawable)view.getBackground()).getColor(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-03-18T01:46:28.940

对于 kotlin 粉丝

```
fun View.getBackgroundColor() = (background as? ColorDrawable?)?.color ?: Color.TRANSPARENT 
```

# c++ - 尽管使用 -fPIC 编译，但链接器错误“针对未定义符号重定位 R_X86_64_PC32”

> ID：14779260
> 
> 赞同：5
> 
> 时间：2013-02-08T18:44:21.523
> 
> 标签：c++, gcc, linker-errors, ld, fpic

我正在使用命令行编译一个 c++ 程序

```
g++ -c prog.cc -std=c++11 -march=native -fPIC -fopenmp 
```

然后尝试通过

```
g++ prog.o -shared -fopenmp -o lib/libprog.so 
```

这一直有效。但今天我得到：

```
/usr/bin/ld: prog.o: relocation R_X86_64_PC32 against undefined symbol 
  `_ZTVN12_GLOBAL__N_111handle_baseE' can not be used when making a shared
  object; recompile with -fPIC
/usr/bin/ld: final link failed: Bad value
collect2: error: ld returned 1 exit status 
```

符号`_ZTVN12_GLOBAL__N_111handle_baseE`de-mangles 为 `vtable for (anonymous namespace)::handle_base` (`handle_base`是在 prog.cc 的匿名命名空间中定义的多态类，是的，我确实调用了`dynamic_cast<handle_base>()`。)

我正在使用 gcc 版本 4.7.0 (GCC) 和 GNU ld (GNU Binutils; openSUSE 11.1) 2.19。任何人都可以提供帮助（建议解决方案[除了没有共享对象或`dynamic cast`]）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T01:22:16.527

I just ran into something similar when upgrading to ubuntu 14.04\. I had to add -fkeep-inline-functions to the source file that defined the 'missing' symbol. No idea if your problem is similar.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T06:02:42.297

您只需要为您的基类（handle_base）隐藏默认可见性。您可以通过 -

```
#define VISIBILITY __attribute__((visibility("hidden")))
class VISIBILITY handle_base; 
```

# azure-sql-database - sql azure 查询的奇怪行为

> ID：14779263
> 
> 赞同：1
> 
> 时间：2013-02-08T18:44:28.480
> 
> 标签：azure-sql-database

我遇到了 SQL Azure 数据库的奇怪行为。在调查为什么存储过程突然开始超时（经过几个月的正常工作而没有任何问题）时，我发现了以下行为（代码来自我的 SQL Server mgmt studio 控制台，而不是来自存储过程，以及实际的表/字段名称替换，但它说明了问题）

我正在运行一个非常简单的查询

```
select * from dbo.mytable with (nolock) where field1 = 'somevalue' 
```

查询只是挂在那里，状态栏中的指示器正在旋转，状态为“正在执行查询”，没有任何反应。作为一个实验，我让它执行了几个小时，但什么也没发生。SQL Azure 监视器不显示任何死锁。

任何其他字段过滤的类似查询会立即执行。但这是有趣的部分 - 如果我在 sql mgmgt studio 中打开另一个窗口并在第一个数据库挂起时在**同一个数据库**上运行**相同的查询**- 它会立即执行而没有任何问题。一旦我在第一个窗口中取消查询，如果我在第二个窗口中运行查询，它就会停止，并且它在并行窗口中运行的任何其他实例都可以正常执行。到目前为止，只有一个表才会发生这种情况，并且只有在按此特定字段过滤的情况下才会发生。不幸的是，这是数据库中的主表。

 **当我查询 sys.dm_exec_requests 时，它显示查询 wait_type 是 SE_REPL_SLOW_SECONDARY_THROTTLE，并且状态最初是*running*但随后更改为*suspend*。同时，另一个窗口中的相同查询以SOS_SCHEDULER_YIELD 的 wait_type*运行。*但它正在运行，而第一个没有。

一些背景信息：
SQL Azure 实例，1GB，已用空间 35MB，36 个活动连接
**mytable** - 61K 行，15 列，30MB，在标识主键上有一个聚集索引，在日期字段上有一个非聚集索引。
**field1**是从 varchar(16) null 派生的用户定义数据类型，但是 field 本身被定义为非 null。
mytable 中还有其他字段具有相同的数据类型并且也不为空，并且通过它们进行过滤显示没有问题。
mytable 包含应用程序的事务信息，插入率高。插入发生在小事务中，应该没有锁定问题。事务之外的所有读取都使用 nolock 提示进行。

不仅选择查询具有这种行为方式，而且该表上涉及该特定字段的任何类型的查询。

我将尝试在另一台服务器上创建此数据库，复制数据并查看问题是否仍然存在，但我感觉它在数据库实例中。

谢谢**

# laravel - Laravel 导出到我的域服务器？

> ID：14779270
> 
> 赞同：0
> 
> 时间：2013-02-08T18:45:12.200
> 
> 标签：laravel

在尝试上传我的 laravel 网站时，我真的感到一头雾水。我需要一个虚拟主机来访问我的本地主机上的公用文件夹。如何在我的网站上做到这一点？我目前得到这个：

www.smks.co.uk

如果我访问 public 得到一个奇怪的错误

www.smks.co.uk/public

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:44:23.300

如果您使用共享主机，您的主机提供商可能不允许构建虚拟主机。您需要稍微更改目录和配置。我已经使用[这种方法](http://forums.laravel.io/viewtopic.php?id=4977)将几个网站上传到共享主机。

# asp.net - 我需要在 Visual Studio 2012 中调整哪些设置来编辑内联标记，并在调试时刷新浏览器时查看更改？

> ID：14779275
> 
> 赞同：1
> 
> 时间：2013-02-08T18:45:28.793
> 
> 标签：asp.net, css, visual-studio-2012

我刚刚迁移到 Visual Studio 2012，并且正在为 Web 应用程序进行一些 CSS 更改。在 Visual Studio 2010 中，我曾经能够在调试器中启动 Web 应用程序，编辑局部视图的内联标记，刷新浏览器，并立即看到这些更改反映在浏览器中。

现在，当我在 Visual Studio 2012 中做同样的事情时，我根本看不到变化。在浏览器中进行硬刷新，甚至转储缓存都不会这样做。我可以编辑 CSS 文件，这些更改将在刷新浏览器时出现。

但是当我编辑局部视图的标记端时，除非我停止调试、关闭浏览器并重新启动调试器，否则不会显示该更改。这很乏味，而且我在短时间内要做很多 CSS 更改。

谢谢你的帮助。

# wpf - WPF 可拉取视图从顶部显示警报/通知，如 iOS 设备

> ID：14779280
> 
> 赞同：0
> 
> 时间：2013-02-08T18:45:44.383
> 
> 标签：wpf, xaml

谁能建议如何从顶部实现可拉视图以在 WPF 中显示类似于 iOS 设备的警报/通知？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:15:21.437

抱歉这么久才回复，忙于自己的项目。无论如何，最简单的路线就是点击，这很容易。这是一个概念示例；

```
<Grid>
                <Grid.Resources>
                <Storyboard x:Key="SlidePanelDown">
                    <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="grid">
                        <EasingThicknessKeyFrame KeyTime="0:0:0.3" Value="0"/>
                    </ThicknessAnimationUsingKeyFrames>
                </Storyboard>
                <Storyboard x:Key="SlidePanelUp">
                    <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="grid">
                        <EasingThicknessKeyFrame KeyTime="0:0:0.3" Value="0,-225,0,0"/>
                    </ThicknessAnimationUsingKeyFrames>
                </Storyboard>
            </Grid.Resources>
            <Grid.Triggers>
                <EventTrigger RoutedEvent="ToggleButton.Checked" SourceName="button">
                    <BeginStoryboard Storyboard="{StaticResource SlidePanelDown}"/>
                </EventTrigger>
                <EventTrigger RoutedEvent="ToggleButton.Unchecked" SourceName="button">
                    <BeginStoryboard x:Name="SlidePanelUp_BeginStoryboard" Storyboard="{StaticResource SlidePanelUp}"/>
                </EventTrigger>
            </Grid.Triggers>

            <Grid x:Name="grid" Width="100" Height="250" VerticalAlignment="Top" Margin="0,-225,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                       <Rectangle Fill="Green"/>
                       <ToggleButton x:Name="button" Grid.Row="1" Content="Click Me" Cursor="Hand"/>

                  </Grid>   
     </Grid> 
```

要让它真正可拖动，它需要更多的努力，但如果你真的想要那种效果是可能的，但这应该是一个好的开始。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:32:36.923

我用的是弹窗控件，比较适合我的情况。[您可以在此处](https://docs.microsoft.com/en-us/dotnet/framework/wpf/controls/popup-overview)找到文档。

# apache - Apache 配置仅路由 example.com 和 example.com/ 而不是 example.com/something

> ID：14779282
> 
> 赞同：0
> 
> 时间：2013-02-08T18:45:46.663
> 
> 标签：apache, apache2, cgi

我在我的网站上使用基于 php 和 python 的页面。我希望我的根页面 example.com 和 example.com/ 使用 python 提供服务，并通过 php say (example.com/url) 保留所有页面。

如果我为 / 添加一个 scriptalias 指令，则所有请求都被转发到 python 并且 php 被饿死。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:31:34.510

使用 ScriptAliasMatch ^/$ 代替 ScriptAlias /

# python - 如何将 %d 添加到 argparse 帮助文本

> ID：14779289
> 
> 赞同：4
> 
> 时间：2013-02-08T18:46:22.657
> 
> 标签：python, python-2.6, argparse

我在使用 python 2.6.1 argparse 0.8 时遇到了这个问题，我需要添加`%d`帮助描述，例如

```
import argparse
parser = argparse.ArgumentParser()

parser.add_argument('--range', metavar='range', type=str,
       help='generates a list of host from given range e.g. "host%d.example.com 1 224"')

args = parser.parse_args() 
```

它抛出错误

```
$ ./args.py  -h
...
python2.6/site-packages/argparse.py", line 458, in _expand_help
    return action.help % params
TypeError: %d format: a number is required, not dict 
```

我能理解，所以我试图逃避，`%`例如

```
parser.add_argument('--range', metavar='range', type=str,
       help='generates a list of host from given range e.g. "host%%d.example.com 1 224"') 
```

但我仍然得到另一个错误

```
$ ./args.py  -h
...
python2.6/site-packages/argparse.py", line 252, in format_help
    help = self._root_section.format_help() % dict(prog=self._prog)
TypeError: %d format: a number is required, not dict 
```

所以我不确定如何正确转义，以便在帮助输出`%`中看到`%d`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:55:56.783

由于 argparse 两次格式化字符串，给出 2 个错误，解决方案是双重转义`%`：

```
parser.add_argument('--range', metavar='range', type=str,
       help='generates a list of host from given range e.g. "host%%%%d.example.com 1 224"') 
```

那是4`%`秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:18:57.363

如果 4 `%`s 冒犯了你的眼睛，这是一个轻微的选择。

```
 parser.add_argument('--range', metavar='range', type=str,
        help=r'generates a list of host from given range e.g. "host%s.example.com 1 224"' % "%%d") 
```

# mongodb - 在 MongoDB 中使用 Scala - java.lang.NoClassDefFoundError: com/mongodb/DBObject

> ID：14779290
> 
> 赞同：0
> 
> 时间：2013-02-08T18:46:26.623
> 
> 标签：mongodb, scala

我创建了一个简单的项目。

“sbt run”工作正常。

在我运行“sbt package”后出现 jar 文件，但它不起作用。

```
$ scala target/scala-2.9.2/hello_2.9.2-0.1.jar 
```

出现以下错误：

```
java.lang.NoClassDefFoundError: com/mongodb/DBObject 
```

这是我的文件：

你好.scala

```
package greeter
object Hello extends App {
    import com.mongodb.casbah.Imports._
    val mongoClient =  MongoClient()
    println("Connected to MongoDB")
    val collection = mongoClient("test")("foo")
    val doc = MongoDBObject("msg" -> "Hi from Scala!")
    collection.insert(doc)
    println("Doc inserted");
} 
```

构建.sbt

```
name := "hello"

mainClass := Some("greeter.Hello")

version := "0.1"

scalaVersion := "2.9.2"

libraryDependencies += "org.mongodb" % "casbah_2.9.2" % "2.5.0"

resolvers += "snapshots" at "https://oss.sonatype.org/content/repositories/snapshots"

resolvers += "releases"  at "https://oss.sonatype.org/content/groups/scala-tools" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:02:39.477

`scala`运行命令时，您需要将库依赖项添加到类路径中。假设您下载了 lib 文件夹中的所有库 jar，您将需要运行：

```
scala -cp "lib/*" target/scala-2.9.2/hello_2.9.2-0.1.jar 
```

在 build.sbt 中，使用以下设置自动下载 lib_managed 文件夹中的所有 jar：

```
retrieveManaged := true 
```

# xml - 在 Http Service 上抛出什么样的错误

> ID：14779298
> 
> 赞同：0
> 
> 时间：2013-02-08T18:47:02.233
> 
> 标签：xml, http, exception, mule

我正在开发`Mule 3.3.0`应用程序，并且在 2 个入站端点上有消息侦听器。一个端点公开 a `Soap service`，另一个是 a `Http Service`。我`Soap Fault`在 Soap 服务端点上抛出异常条件。我想知道当Http Service发生错误时会抛出什么样的异常（异常结构）。

`Soap Fault`对我来说，使用 Http 服务似乎是不对的。该服务应以`XML`格式接收输入请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:02:01.627

[从 HTTP 支持的错误状态代码中](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)挑选最能代表错误性质的错误状态代码。

您还可以将正文实体添加到 HTTP 响应以进一步详细说明错误。如果 HTTP 服务的客户端处理 XML 消息，那么也使用 XML 表示。

# vim - 文件保存期间语法突出显示随机消失

> ID：14779299
> 
> 赞同：8
> 
> 时间：2013-02-08T18:47:11.187
> 
> 标签：vim, syntax-highlighting, vi, vim-syntax-highlighting

我正在使用 vim 编辑一些 python 文件，最近在我将缓冲区保存在 vim 后偶尔会出现语法突出显示消失的情况。我试图重置`syntax on`，`set filetype=python`但无济于事。我根本不知道是什么导致了这个问题，所以现在我的诊断信息很少。但是以前有没有人遇到过这种情况，或者事情可能在哪里发生故障？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T07:39:16.347

这不是一个解决方案，但很难在评论中写/读。

我的意思是当我开始修复自己的语法/突出显示时，我正在搞乱`.vimrc`，这就是我注意到它的原因。
`syntax on`/`syntax enable`只是为文件加载做准备（添加很多`au`到`BufNewFile / BufRead`）。因此，如果某些插件在编写文件时弄乱了语法/突出显示设置，则必须再次加载文件以使所有“魔术”发生，仅设置`filetype`. 执行`:au BufRead`此操作，您将看到启动语法时添加的所有自动命令。但是必须加载该文件才能获取所有设置。
看到这个：>[`syntax-loading`](http://vimdoc.sourceforge.net/htmldoc/syntax.html#syntax-loading)

如果您不想重新加载文件，请尝试`syntax enable`，我认为这与`syntax on`.
或尝试也这样做`:doautocmd filetypedetect BufRead %`，请参阅>[`autocmd-execute`](http://vimdoc.sourceforge.net/htmldoc/autocmd.html#autocmd-execute)

我不知道是什么导致了问题，可能是你吗？如果您添加了一些自动命令，或者使用自己的颜色/语法？
否则，在您得到解决方案之前，您也许可以尝试`autocmd BufWritePost * <with the commands above that works>`在 , 末尾添加`.vimrc`，在这种情况下使用`augroup`。

这是一个例子：

```
augroup myResetSyntax
  au!
  autocmd BufWritePost * syntax enable | doautocmd filetypedetect BufRead "%"
augroup END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:13:35.213

现在过了一会儿，我意识到扭曲的突出显示是由折叠引起的，而不是与文件保存相关的任何神秘力量，所以一个简单的修复*是将以下内容放入我的 vimrc

```
noremap <F9> <Esc>:syntax sync fromstart<CR>
inoremap <F9> <C-o>:syntax sync fromstart<CR> 
```

并在发生奇怪的事情时按 F9。

*   从[这里发现的解决方案](http://vim.wikia.com/wiki/Fix_syntax_highlighting)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-02T05:30:24.370

您还可以通过简单地通过以下方式重新加载缓冲区来恢复语法：

```
:e 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-25T08:22:58.037

您可以先保存文件

```
:w 
```

然后刷新缓冲区

```
:e 
```

# python - 从 GML 文件中提取数据

> ID：14779305
> 
> 赞同：3
> 
> 时间：2013-02-08T18:47:44.010
> 
> 标签：python, python-3.x, networkx, graph-modelling-language

我有一个 GML（图形（不是涂鸦）建模语言）文件，我想从中创建 ID 到标签的映射。我不知道如何做到这一点，因为我的列表操作似乎不起作用。我尝试使用指定如何使用两个分隔符的示例，但它不适用于我的文件。

有人可以指导我吗？

GML文件排列如下：

```
graph [
  node [
    id 0
    label "24"
  ]
  node [
    id 1
    label "25"
  ]
  node [
    id 2
    label "26"
  ]
  node [
    id 3
    label "27"
  ]
  node [
    id 4
    label "20"
  ]
  node [
    id 5
    label "21"
  ]
(... some more nodes)
  edge [
    source 0
    target 75
    weight 4
  ]
  edge [
    source 0
    target 68
    weight 2
  ]
(many more edges)
] 
```

我想提取每个节点块中的数据并创建节点 ID 到节点标签的映射。例如，第一个节点的映射将是 0->24 等等。我不担心边缘信息。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T15:54:50.333

如果您可以使用 NetworkX (Python)，您可以像这样读取文件（t.gml 是您的文件）并获取映射

```
In [1]: import networkx as nx

In [2]: G = nx.read_gml('t.gml')

In [3]: G.node
Out[3]: 
{0: {'id': 0, 'label': u'24'},
 1: {'id': 1, 'label': u'25'},
 2: {'id': 2, 'label': u'26'},
 3: {'id': 3, 'label': u'27'},
 4: {'id': 4, 'label': u'20'},
 5: {'id': 5, 'label': u'21'}} 
```

例如

```
In [4]: G.node[0]['label']
Out[4]: u'24' 
```

# activereports - 如何防止用户在报表资源管理器中添加/修改/删除数据源/数据集

> ID：14779309
> 
> 赞同：0
> 
> 时间：2013-02-08T18:48:07.053
> 
> 标签：activereports

报告资源管理器树出现了，因为我无法获得正确的拖放项目来让设计器正常运行......有什么想法吗？我让这种方式变得很难吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:20:54.113

我认为从长远来看，编写自己的 ReportExplorer 是您的最佳选择，因为您将对事物拥有最大的控制权。在更旧版本的 AR 中处理拖放曾经是可能的。有关它过去如何工作的详细信息，请参阅[本文。](http://www.datadynamics.com/forums/104088/ShowPost.aspx)您可以在这个版本中尝试这种方法（即自己处理 DragOver 事件）。

如果这些事件不起作用并且拖放非常重要，请联系 ComponentOne 支持，看看他们是否会为您提供有关您需要将哪些拖放数据放入拖动事件以使设计表面响应的确切信息。和/或询问他们是否会恢复上述文章中的行为。

另一种选择是向您的应用程序添加一些按钮，例如“插入文本框”，当用户单击它时，您以编程方式将项目添加到报告中。对于我们这些极客来说，这起初可能看起来很粗糙，但根据我的经验，拖放对于最终用户来说并不是那么直观，因此它可能是一个完全可以接受的选择。不过，这取决于您的用户，您更清楚该采用哪种方法。

# asp.net - 将 WebMatrix 项目迁移到 VS2010

> ID：14779313
> 
> 赞同：2
> 
> 时间：2013-02-08T18:48:16.187
> 
> 标签：asp.net, visual-studio-2010, projects-and-solutions, webmatrix

所以我最近问了一个关于如何在 ASP.NET 中使用数据库的问题，我收到的答案建议我使用 WebMatrix。好吧，我可以说我绝对喜欢 WebMatrix 的简单性。使用 Visual Studio 2010，我不知道如何为我的站点创建数据库，而使用 WebMatrix 则非常非常简单。但是在我的项目工作过程中，当我开始输入我的一个文件时，WebMatrix 崩溃了。所以我重新打开它，打开同一个文件，输入同样的代码，它又崩溃了，和以前一样。

我使用 Visual Studios Just In Time Debugger 来查看问题所在，这是应用程序崩溃时出现的异常：

```
An unhandled exception of type 'System.AggregateException' occurred in mscorlib.dll

Additional information: A Task's exception(s) were not observed
either by Waiting on the Task or accessing its Exception property.
As a result, the unobserved exception was rethrown by the finalizer thread. 
```

我不是要你告诉我为什么它崩溃了，但我想我会把它包括在内，以防万一有人对此有话要说。

无论如何，对我来说很明显 WebMatrix 不是很稳定。起初我以为是我的电脑，但我能够完全复制崩溃的事实告诉我不然。所以，既然每次我尝试编辑这个文件时 WebMatrix 都会崩溃，我想使用另一个 IDE。

我想回到 Visual Studio 2010 Ultimate 的家 :( 但我首先离开它的原因是因为我不知道如何使用数据库，但我宁愿坚持下去，弄清楚如何使用我的网站数据库与 Visual Studio 2010，并恢复了一些稳定性！

好的，在这里总结一下：（**如何）当我第一次使用 WebMatrix 创建项目时，我可以使用 VS2010 开发我的网站吗？开发是否相同（C# 文件位于`App_Code`文件夹中，页面是`.cshtml`具有 Razor 语法的文件，而不是`.aspx`文件）？WebMatrix 数据库管理轻而易举，VS2010 是如何完成数据库管理的（我在服务器资源管理器中搞砸了，寻找一种方法来做到这一点，但无法弄清楚）？**

关于数据库管理的最后一部分，这部分问题不必回答，如果我可以成功地使用我的网站与 VS2010，那么这对我来说已经足够了，我会弄清楚其余的 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T17:11:13.150

使用 Visual Studio 中的“打开网站”选项并浏览到包含您的网站的文件夹。或者，在 WebMatrix 中打开站点，然后在文件工作区中单击带有 Visual Studio 图标的启动按钮。这将在 Visual Studio 中打开您的站点。

如果要在 Visual Studio 2010 中使用 SQL CE 4.0 数据库，则需要安装 SP1。

# bash - 在程序 xmllint 的 XPath 中使用 Bash 变量

> ID：14779317
> 
> 赞同：0
> 
> 时间：2013-02-08T18:48:39.767
> 
> 标签：bash, variables, xpath, xmllint

我想在程序 xmllint 的 XPath 中使用 Bash 变量。

以下工作代码说明了我想要实现的总体目标：

```
 functionInformationTagContent="$(echo "${functionInformation}"\
                | xmllint --xpath '/functionInformation/description/text()' -\
                | xargs -i echo -n "{}")" 
```

以下非工作代码说明了我想要实现的具体目标：

```
 functionInformationTag="${1}"
    functionInformationTagContent="$(echo "${functionInformation}"\
                | xmllint --xpath '/functionInformation/<clever code>"${functionInformationTag}"<clever code>/text()' -\
                | xargs -i echo -n "{}")" 
```

您可以看到我希望能够在 XPath 参数中使用 Bash 变量来进行泛化。你知道我怎么能做到这一点吗？你能指出我正确的方向吗？

感谢一百万您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:30:35.353

您的第二条评论非常接近正确。

回想一下，当最外层的引号是单引号时，变量永远不会被扩展。您应该能够在单引号和 dbl 引号之间来回“切换”，只要它们相互“接触”以将字符串全部保留为一个参数。尝试 ：

```
xmllint --xpath '/functionInformation/<clever code>'"${functionInformationTag}"'<clever code>/text()' -\
#--------------------------------------------------^^-------------------------^^---- 
```

IHTH

# ruby-on-rails - 在 Rails 中，我可以一次保存创建具有多个关系的产品吗？

> ID：14779318
> 
> 赞同：0
> 
> 时间：2013-02-08T18:48:39.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有一个具有如下关系的产品模型：

`has_many :product_images`
`has_many :product_specs`

这些关系运作良好，我对此感到高兴。

创建新产品时，我将控制器设置为在创建产品后保存 product_image 和 product_spec。问题是：*我需要多个规格和产品图片*。有没有办法在新产品的表单中添加多个 product_images 和多个 product_specs 并在创建产品时同时创建它们？此外，用户将决定他们需要添加多少图像和规格。

我感谢任何人的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:51:24.703

我建议看一下`nested form`Ryan Bates 的宝石。这正是您正在寻找的。

这是[链接](https://github.com/ryanb/nested_form)。它的 Railscasts 在[这里](http://railscasts.com/episodes/196-nested-model-form-part-1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T18:57:48.107

您应该更深入地阅读 ruby​​onrails api ;)[链接](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

```
class Member < ActiveRecord::Base
  has_many :posts
  accepts_nested_attributes_for :posts
end 
```

您现在可以通过属性散列设置或更新关联帖子模型的属性。

对于每个没有 id 键的散列，将实例化一条新记录，除非散列还包含评估为 true 的 _destroy 键。

```
params = { :member => {
  :name => 'joe', :posts_attributes => [
    { :title => 'Kari, the awesome Ruby documentation browser!' },
    { :title => 'The egalitarian assumption of the modern citizen' },
    { :title => '', :_destroy => '1' } # this will be ignored
  ]
}}

member = Member.create(params['member'])
member.posts.length # => 2
member.posts.first.title # => 'Kari, the awesome Ruby     documentation browser!'
member.posts.second.title # => 'The egalitarian assumption of the modern citizen' 
```

# plone - 如何干净地删除 blobstorage ZEO 服务器中的 plone.app.imaging 缩放 blob？

> ID：14779321
> 
> 赞同：1
> 
> 时间：2013-02-08T18:48:53.113
> 
> 标签：plone, dexterity, blobstorage

这个问题的一部分已经用[另一个stackoverflow问题](https://stackoverflow.com/questions/13938983)解决了，但似乎它并没有清理所有东西。

步骤是：

*   创建带有图像字段的文档
*   看到 blobstorage 有**一个**文件
*   打开具有该图像的缩放版本的视图
*   看到 blobstorage 现在有*两个*文件，图像和缩放图像
*   按照另一个问题的建议，做`zeopack`0**天**
*   看到 blobstorage 上还有**一个 blob**，缩放后的图像

所以问题是：如何从 blobstorage 中删除这些缩放的图像？

我尝试运行`zeopack`两次但没有成功，缩放的斑点仍然存在。

**更新：**正如所`vangheem`指出的，Archetypes`Image`内容类型不会发生这种情况。尽管如此，这个问题仍然有效，对于具有图像字段的基于敏捷的内容类型。

仅当您删除文档时才删除比例尺，这不是我的用例，我只想删除图像（图像信用已过期，无法再显示图像）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:27:03.557

删除内容项也应删除其比例。

我只是在 plone 4.2.4 中测试。这是我的步骤：

1.  删除现有的 blobstorage 和文件存储
2.  启动克隆
3.  创建新站点
4.  添加图像，看到创建了 2 个 blobstorage 文件。一个是原始的，另一个是迄今为止创建的一个比例
5.  删除图像，两个文件仍在 blobstorage 中以支持撤消
6.  将数据库打包到 0 天，这两个文件现在都从 blobstorage 中删除

所以一切似乎都正常工作。

在您的帖子中，您提到您正在创建一个文档。如果您指的是新闻项目，那么这些图像不会存储在 blobstorage 中。

现在，如果您有一个自定义内容类型，其中有一个图像字段，并且您只是尝试删除图像字段和从该字段生成的比例，但不删除整个类型，您需要手动删除比例. 我认为它会是这样的：

```
del doc.__blob_scales['image']['preview'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:00:34.450

找到了！

要删除刻度，您实际上必须删除 plone.scale 注释：

```
# assume 'document' is a Dexterity-based content type that has a NamedBlobImage field 
from zope.annotation.interfaces import IAnnotations
annotations = IAnnotations(document)
if 'plone.scale' in annotations:
    del annotations['plone.scale']
if getattr(document, 'image', None) is not None and document.image is not None:
    del document.image
    document.reindexObject() 
```

# ubuntu-10.04 - Ubuntu 10.04 上的 libxml2 2.8

> ID：14779322
> 
> 赞同：0
> 
> 时间：2013-02-08T18:49:00.797
> 
> 标签：ubuntu-10.04, libxml2

我需要让 libxml2 2.8+ 在我的 Ubuntu 10.04 环境中工作，但我似乎找不到操作系统所需的版本。我可以升级到 12.04，因为它默认安装了 2.8，但这比我想要处理的要多。

有什么办法可以在 Ubuntu 10.04 上安装 libxml2 2.8+？使用源和捆绑器？

我找到了这篇文章，但我不确定如何在 Ubuntu 上完成它：

[警告：Nokogiri 是针对 LibXML 版本 2.7.3 构建的，但已动态加载 2.7.8](https://stackoverflow.com/questions/11452380/warning-nokogiri-was-built-against-libxml-version-2-7-3-but-has-dynamically-lo/11452381#11452381)

我已经下载并解压了源代码，下一步是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:09:48.053

首先，使用您想要的版本尝试 apt-get。例如（我还没有查看 2.8.0 是否在默认的 10.4 Ubuntu 存储库中）

```
$ sudo apt-get install libxml2=2.8.0 
```

但请谨慎使用，因为它可能导致依赖关系降级和 APT 问题。你有来源，这通常是一个更好的地方。

源代码包是围绕 GNU autotools 构建的

```
$ ./configure
$ make
$ make check
$# if all is ok, then
$ sudo make install 
```

有关选项和对功能的更多控制，请从

```
$ ./configure --help 
```

看看你是否需要*--with-run-debug 之*类的东西。

对于 autotools 源代码构建，您可能必须四处寻找某些依赖项所需的开发头文件。./configure 通常会通知您缺少什么，然后去寻找包的**-dev**版本。你不需要它，因为你有源代码树，但作为一个例子*apt-get install libxml2-dev*

apt-get 的默认安装顶层通常是**/usr**，而对于 GNU 自动工具和源代码构建，它通常是**/usr/local**。这是一件好事，但可以让寻找图书馆（从人类的角度来看）有点棘手，直到你习惯了这片土地。

# sql - Sql Server版股票估值查询

> ID：14779324
> 
> 赞同：1
> 
> 时间：2013-02-08T18:49:07.500
> 
> 标签：sql, database, sql-server-2008-r2

我想计算平均股票价格并得到以下解决方案 [Inventory Average Cost Calculation in SQL](https://stackoverflow.com/questions/5396827/inventory-average-cost-calculation-in-sql)

这个查询看起来很棒，因为它正是我需要的

但我使用的是 SQL Server 2008。这个查询的 Sql Server 版本是什么？

计算公式为 ((old_stock x old unit price)+(New_Purchase_qty x New unit price))/(old stock qty + new purchase qty) 记录为

```
TrancDate   ProID   Qty CostRate    TrancType  closingStock    closingCostRate
02/06/2013  1   10.000  2.00               P             10                2
02/08/2013  1   7.000   0.00               S             3                 2
02/15/2013  1   15.000  3.00               P             18                2.83
02/16/2013  1   8.000   0.00               S             10                2.83
02/25/2013  1   20.000  4.00               P             30                3.61 
02/26/2013  1   9.000   0.00               S             21                3.61
02/26/2013  1   1.000   0.00               S             20                3.61 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:19:12.387

如果计算是我认为的那样：

```
select t.*, cumetot / cumeqty
from (select t.*,
             (select SUM(qty)
              from t t2
              where t2.tranctype = 'P' and t2.proid = t.proid and t2.trancdate <= t.trancdate
             ) as cumeqty,
             (select SUM(qty*ClosingCostRate)
              from t t2
              where t2.TrancType = 'P' and t2.proid = t.proid and t2.trancdate <= t.trancdate
             ) as cumetot
      from t
     ) t 
```

SQL Server 2012 具有累积总和和计数，但没有 2008。

# php - 用于存档的 Wordpress 重写规则

> ID：14779329
> 
> 赞同：3
> 
> 时间：2013-02-08T18:49:36.300
> 
> 标签：php, wordpress

所以我在 WordPress 中遇到了重写规则的问题。

当我输入一个不存在的自定义查询时，它会恢复为 index.php，但我不希望它这样做，因为我正在处理 archive-(page).php 中的查询变量。

```
<?php
    add_filter('query_vars', 'cat_query_vars');
    function cat_query_vars($qvars) {
        $qvars[] = 'a_type';
        return $qvars;
    }

    add_action('init', 'create_type_rewrite');
    function create_type_rewrite() {
        add_rewrite_rule('^atype/([^/]+)/?', 'index.php?post_type=cars&a_type=$matches[1]', 'top');
    }
?> 
```

如果我输入“Mercedes”并且它在系统中，它将转到archive-cars.php，并使用get_posts($args)，其中我有'a_type' => $wp_query->query_vars['a_type']; . 有一个全局 $wp_query。

我仍然有一个问题，比如说如果我有一个自定义分类法“梅赛德斯”，它会拉出所有与“梅赛德斯”相关的结果，但如果我输入“sadfasdf”，它会默认为 index.php 一些原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:52:44.857

您添加这样的查询变量...

```
function add_my_query_var($vars) {
    $vars[] = 'my_var';
    return $vars;
}

add_filter('query_vars', 'add_my_query_var'); 
```

过滤器函数传递了一个现有查询变量的数组，您需要附加该数组然后返回它。

# jquery - Toggle 让我在响应式设计中发疯

> ID：14779330
> 
> 赞同：0
> 
> 时间：2013-02-08T18:49:37.127
> 
> 标签：jquery, toggle, responsive-design

我是 jQuery 的初学者，我在设计一个响应式网站时遇到了很多麻烦。它们是桌面站点上的 2 个水平菜单，当屏幕尺寸达到 657 像素或更少时，我需要将水平菜单变成下拉菜单。

我以为我一切正常，直到我意识到当屏幕尺寸小于 657 像素并且我打开和关闭（切换？）下拉菜单也会以更大的尺寸打开和关闭，这很有意义，但我没有知道如何阻止它这样做，所以基本上我需要的是出现在 657px 和更少尺寸的下拉菜单，而不是水平菜单。

我尝试在 >=657 处向水平菜单添加 .show 以确保它始终显示，但这只会导致下拉菜单的内容在按下之前显示。我认为这一定是不可能的，直到我看到许多做得很好的网站（例如 bostonglobe.com）。

我认为这个问题非常相似，但我真的不明白解决方案：[Jquery toggle on responsive site](https://stackoverflow.com/questions/11879509/jquery-toggle-on-responsive-site)

我的 HTML（这是一个阿拉伯语网站）

```
 <button id="categories-dd" class="unactive-main"></button>
    <nav id="main-navigation">
        <ul id="menu">
            <li class="leaf" id="dd-mainnav">
                <a href="Main.html">الرئيسية</a>
            </li>
            <li class="leaf1" id="dd-mainnav">
                <a href="politics-html.html">سياسة</a>
            </li>
            <li class="leaf2" id="dd-mainnav">
                <a href="sports-html.html">رياضة</a>
            </li>
            <li class="leaf3" id="dd-mainnav">
                <a href="business-html.html">أعمال</a>
            </li> 
            <li class="leaf4" id="dd-mainnav">
                <a href="culture-html.html">ثقافة</a>
            </li>
            <li class="leaf5" id="dd-mainnav">
                <a href="opinion-html.html">رأي</a>
            </li>
            <li class="leaf6" id="dd-mainnav">
                <a href="tech-html.html">تكنلوجيا</a>
            </li> 
            <li class="leaf7" id="dd-mainnav">
                <a href="lifestyle-html.html">نمط الحياة</a>
            </li>
            <li class="leaf8" id="dd-mainnav">
                <a href="multimedia-html.html">فيديو</a>
            </li>
        </ul>
    </nav>
    <!--END: MAIN NAVIGATION-->

    <!--SECONDARY NAVIGATION-->
    <button id="countries-dd" class="unactive-sec">البلد</button>
    <nav id="secondary-navigation">
        <ul id="menu2">
            <li class="subleaf">
                <a href="arab-news-html.html">الإمارات</a>
            </li>
            <li class="subleaf">
                <a href="arab-news-html.html">عمان</a>
            </li>
            <li class="subleaf">
                <a href="arab-news-html.html">اليمن</a>
            </li>
            <li class="subleaf">
                <a href="arab-news-html.html">السعودية</a>
            </li>
            <li class="subleaf">
                <a href="arab-news-html.html">البحرين</a>
            </li>
            <li class="subleaf">
                <a href="arab-news-html.html">قطر</a>
            </li>
            <li class="subleaf">
                <a href="khalij-html.html">الكويت</a>
            </li>
            <li class="subleaf">
                <a href="iraq-html.html">العراق</a>
            </li>
            <li class="subleaf">
                <a href="syria-html.html">سوريا</a>
            </li>
            <li class="subleaf">
                <a href="lebanon-html.html">لبنان</a>
            </li>
            <li class="subleaf">
                <a href="jordan-html.html">الأردن</a>
            </li>
            <li class="subleaf">
                <a href="palestine-html.html">فلسطين</a>
            </li>
            <li class="subleaf">
                <a href="egypt-html.html">مصر</a>
            </li>
            <li class="subleaf">
                <a href="sudan-html.html">السودان</a>
            </li>
            <li class="subleaf">
                <a href="libya-html.html">ليبيا</a>
            </li>
            <li class="subleaf">
                <a href="tunisia-html.html">تونس</a>
            </li>
            <li class="subleaf">
                <a href="algeria-html.html">الجزائر</a>
            </li>
            <li class="subleaf">
                <a href="morocco-html.html">المغرب</a>
            </li>
            <li class="subleaf">
                <a href="mauritania-html.html">موريتانيا</a>
            </li>
        </ul>
    </nav>
    <!--END: SECONDARY NAVIGATION--> 
```

我的 jQuery（请不要笑）：

```
$(document).ready(function(){
    $('#countries-dd,#categories-dd').on('click', function(){
        $(this).next().toggle();
        });

    $(document).ready(function(){
        $('#categories-dd').on('click',function(){
        $('#categories-dd').toggleClass('active-main');
        });
    });

    $(document).ready(function(){
        $("#countries-dd").on('click',function(){
        $("#countries-dd").toggleClass("active-sec");
        });
    });
    });

     $(window).resize(function() {   
        if($(window).width() > 657)
        {
             $('#main-navigation, #secondary-navigation').show();
        }

    }); 
```

非常感谢任何帮助....谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:04:14.070

您有几个具有相同 ID 的元素`dd-mainnav`。这是不允许的。改为使用多个类：

```
<li class="leaf7 dd-mainnav"> 
```

一旦你这样做了（并相应地重写你的 JS 和 CSS），在`click`处理程序中添加一个窗口宽度的测试：

```
$('#categories-dd').on('click',function(){
    if ($(window).width > 657){
        $(this).toggleClass('active-main');
    }
}); 
```

但是让你的 JS 保持原样并在你的移动样式表中添加新样式可能会更容易：

```
#categories-dd, #categories-dd.active-main {
    display: block; /* or whatever */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:08:33.653

首先，为什么有这么多的 document.ready 函数……为什么不只是父级，里面有所有的东西？您不需要嵌套准备。一切准备就绪。此外，您不需要两个 onclick 函数。在你的选择器中，说

```
$('#categories-dd, #countries-dd').on 
```

另外，我建议使用父选择器。例如，如果#categories 和#countries 的父选择器是-出于本说明的目的-#daddy .....

```
$('#daddy').on('click','#categories-dd, #countries-dd',function(){
    // code goes here  
}); 
```

此外，您有很多相同的 id。ID 是唯一标识符。如果需要，可以使用多个类，但每个项目的 ID 应该是唯一的。

例如

```
<a class="this that theother someotherclass howevermanyclasses" id="uniquetome">see?</a> 
```

我建议在您的 on 功能中，执行以下操作：

```
 $('#menuINoLongerWant').toggle(); 
```

# c++ - 代码中的天真编译错误

> ID：14779331
> 
> 赞同：1
> 
> 时间：2013-02-08T18:49:48.017
> 
> 标签：c++

我有这个代码：

```
#include<iostream>
#include<algorithm>

#define mod 1000000007

using namespace std;
unsigned long long int pow(int);
unsigned long long int binomialCoeff(int ,int );
int i,j;
int T[1000][1000];

int main()
{
    unsigned long long int t,k,n,ans;
    cin>>t;
    while(t--)
    {
        ans=0;
        cin>>n;
        int a[n];
        for(i=0;i<n;i++)
        cin>>a[i];

        if(n%2==0)
            ans=(pow(n-1)-((binomialCoeff(n,n/2))/2))%mod;
        else
            ans=pow(n-1)%mod;

        printf("%lld\n",ans);
    }

    system("pause");
}

unsigned long long int binomialCoeff(int na,int rb)
{

    for(i=0;i<na-rb+1;i++)
        **T[i,0]=1;**

    for(i=0;i<rb+1;i++)
        **T[i,i]=1;**

    for(j=1;j<rb+1;j++)
    {           
        for(i=j+1;i<na-rb+j+1;i++)
            **T[i,j]=T[i-1,j-1]+T[i-1,j];**
    }
    return (T[na,rb]);
}

unsigned long long int pow(int n)
{
    int k;

    if(n==0)
        return 1;
    else if(n%2==0)
        {k=pow(n/2);return ((k%mod)*(k%mod))%mod;}
    else
        {k=pow(n/2);return ((((k%mod)*(k%mod))%mod)*2)%mod;}
} 
```

我有这个算法：

```
2^(n-1) - ((1+(-1)^n)/4)*binomial(n, n/2) 
```

...[对于这个问题](http://www.codechef.com/FEB13/problems/LECARDS)。

但是在我的编译器中，我遇到了编译错误：

```
In function `long long unsigned int binomialCoeff(int, int)': 
   incompatible types in assignment of `int' to `int[1000]' 
   invalid operands of types `int[1000]' and `int[1000]' to binary `operator+' 
   invalid conversion from `int*' to `long long unsigned int' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T18:53:02.470

您的数组访问语法错误。尝试：

```
T[i][0] = 1; 
```

在您对多维数组的所有使用中都是如此。例如，稍后，这个：

```
// Bad code from original post
T[i,j]=T[i-1,j-1]+T[i-1,j] 
```

应该写成：

```
T[i][j]=T[i-1][j-1]+T[i-1][j]; 
```

# tridion - Tridion 2011 SP1 HR1 和 Content Porter SP2 更新关键字时出错

> ID：14779338
> 
> 赞同：2
> 
> 时间：2013-02-08T18:50:24.583
> 
> 标签：tridion, content-porter-2009

尝试导入仅包含带有某些关键字的单个类别的 Content Porter 包时出现错误。

该类别存在于目标服务器上，不同之处在于附加到关键字的元数据模式。

该类别代表导航，我想用来自 UAT 服务器的元数据更新生产服务器上的元数据。但是，它似乎不是更新目标服务器上的关键字，而是尝试创建新关键字，因此出现错误：

```
<tcm:Token>tcm:0-0-0</tcm:Token></tcm:Line>
<tcm:Line ErrorCode="80040329" Cause="true">
<![CDATA[Name, Key must all be unique for items of type: Keyword within this Category and its BluePrint context. Source or sources of conflict: tcm:4-13012-1024.]]>   
<tcm:Token>Name , Key</tcm:Token>
<tcm:Token>RESID_15309</tcm:Token><tcm:Token>RESID_15293</tcm:Token>
<tcm:Token>tcm:4-13012-1024</tcm:Token> 
```

我肯定在 tcmn:0-4-1 出版物（01 Schemas）中导出。我原以为它会像使用组件一样匹配名称和更新。

有没有人见过这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T18:58:30.270

关键字的标题（名称）和它的字段 Key 都必须是唯一的。我认为您的情况是标题不同，但密钥相同。因此 Content Porter 尝试创建一个新的关键字（因为不同的 Title），但它失败了，因为另一个具有相同 Key 的关键字 (tcm:4-13012-1024) 已经存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T19:46:08.227

听起来您在以下 Content Porter 修补程序中有类似的描述：

> CP_2009.0.67032 最小化文本
> 
> 如果项目已本地化和重命名，Content Porter 将找不到其父共享项目并尝试创建一个新项目。[错误]对于以下类型的项目，键必须是唯一的：此类别中的关键字及其蓝图上下文。

[您可以从https://www.sdltridionworld.com/downloads/hotfixes/ContentPorter_2009/index.aspx](https://www.sdltridionworld.com/downloads/hotfixes/ContentPorter_2009/index.aspx)下载修补程序（需要登录）

# node.js - 使用 node.js 只是读取文件路径

> ID：14779341
> 
> 赞同：0
> 
> 时间：2013-02-08T18:50:28.877
> 
> 标签：node.js, filesystems

是否可以仅从尝试将内容上传到服务器的用户读取文件名/路径？

例如，当用户在实际上传到服务器之前选择了一些要上传的文件时，我想读取文件信息。

[fs.readdir](http://nodejs.org/api/fs.html#fs_fs_readdir_path_callback)可用于读取目录的内容，但用户选择的文件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:28:28.487

你不能。浏览器只允许在您上传文件时发送文件名。这样做意味着将您的目录结构暴露给服务器。（非常糟糕的主意）

这是一个安全标准和一个好的做法，不要放弃您发送到服务器的文件的完整位置。应该有单独的路径来处理服务器和客户端上的文件。

# ios - IOS自定义后退按钮

> ID：14779345
> 
> 赞同：2
> 
> 时间：2013-02-08T18:50:40.610
> 
> 标签：ios, cocoa-touch

如何使用barmetrics在iOS中制作没有文本的自定义后退按钮？

我想做类似[http://a397.phobos.apple.com/us/r1000/081/Purple/v4/e6/be/2d/e6be2d9e-dc95-7e44-b1ed-9386fa9f4d02/mzl.zwjkpepo.320x480-75 .jpg](http://a397.phobos.apple.com/us/r1000/081/Purple/v4/e6/be/2d/e6be2d9e-dc95-7e44-b1ed-9386fa9f4d02/mzl.zwjkpepo.320x480-75.jpg "这个")

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T18:57:58.580

```
[[UIBarButtonItem appearance]
            setBackButtonBackgroundImage:[UIImage imageNamed:@"back_button.png"]
            forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

您可以将它放在您的应用程序委托中，它会将背景图像设置为应用程序中的所有后退按钮（当然，对于该控件状态和条形指标）。

**编辑：** 如果您想要不同的东西，请使用以下代码：

```
- (void)setBackButton
{
    UIButton *backButton =  [UIButton buttonWithType:UIButtonTypeCustom];
    [backButton setImage:[UIImage imageNamed:@"BackButton.png"] forState:UIControlStateNormal];
    [backButton addTarget:self action:@selector(backButtonTapped:) forControlEvents:UIControlEventTouchUpInside];[button setFrame:CGRectMake(0, 0, 32, 32)];

    self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:backButton] autorelease];
}

- (void)backButtonTapped:(id)sender
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:59:06.607

像这样的东西怎么样？

```
UIButton *backButton = [[UIButton alloc] initWithFrame:CGRectMake(YourFrame)];

[backButton setTitle:@"<" forState:UIControlStateNormal];

[backButton addTarget:self action:@selector(callSelectorMethod) forControlEvents:UIControlEventTouchUpInside];

self.navigationItem.rightBarButtonItem  = [[[UIBarButtonItem alloc] initWithCustomView:backButton] autorelease];

[backButton release],backButton=nil; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T03:50:42.343

**这是解决方案：**

```
 UIButton *button =  [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:[UIImage imageNamed:@"BackButton.png"] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(popBack) forControlEvents:UIControlEventTouchUpInside];
    [button setFrame:CGRectMake(0, 0, 32, 32)];
    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

感谢[最佳编码员](https://stackoverflow.com/users/1091348/best-coder)

# embedded - 为Cortex m3编程实现USB接口的困惑

> ID：14779349
> 
> 赞同：-2
> 
> 时间：2013-02-08T18:50:52.613
> 
> 标签：embedded, usb, arm, bootloader, cortex-m3

我正在考虑用 NXP - LPC1756FBD80 创建一个 PCB。它上面有一个皮质m3芯片。我希望能够使用可以直接连接到笔记本电脑的 USB 电缆对 pcb 上的芯片进行编程。但我不确定我这样做是否正确，我检查了芯片的数据表，它有一节关于建议的 USB 接口解决方案。本节有一个电路，但我不确定这是否足以实现我想要的功能。你们的任何意见将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T01:22:08.017

对于新芯片，您需要通过 JTAG 端口或芯片的串行 (UART) 端口和主引导加载程序等方式将代码输入其中。“开箱即用”，您无法通过 USB 将新代码加载到其中。

您需要实现在 MCU 的片上引导加载程序运行后运行的辅助引导加载程序。

查看 NXP 的[**应用笔记 AN10866**](http://www.element14.com/community/servlet/JiveServlet/downloadBody/48329-102-3-259149/Nxp.Application_Notes_14.pdf) -“LPC 1700 Secondary USB Bootloader”。

这是应用笔记开头的文字：

> 辅助引导加载程序是一段代码，它允许使用主引导加载程序（片上）使用的标准 UART0 以外的替代通道下载用户应用程序代码。主引导加载程序是驻留在微控制器引导 ROM 块中的固件，在上电和复位时执行。启动 ROM 执行后，将执行辅助引导加载程序。然后，辅助引导加载程序将依次执行最终用户应用程序。
> 
> 本应用笔记使用 USB 作为在 LPC1700 系列微控制器上开发辅助引导加载程序的示例。

如果这听起来像你需要的（我相信它是），恭喜。LPCWARE 也有一些与该主题相关的文件和信息。

# fortran - SUNDIALS-CVODE的fortran接口坏了？

> ID：14779350
> 
> 赞同：0
> 
> 时间：2013-02-08T18:50:56.473
> 
> 标签：fortran

我试图在 fortran 程序中使用 SUNDIALS-CVODE。但`fcvmalloc()`总是返回错误标志。

日晷包中包含的 fortran 示例程序也不起作用。中也有同样的问题`fcvmalloc()`。但是 c 示例效果很好。

我已经在 ubuntu 和 debian sid 上尝试了来自 apt 的包以及本地编译的包。这些组合都不起作用，它们只是在`fcvmalloc()`.

感谢您查看此问题，以下是简化的测试用例。

```
program test
  integer*4,parameter::nEq=2
  integer ier
  integer*4 ipar(1),iout(25)
  double precision rpar(1),rout(10)
  double precision t,dt,u(nEq)

  t=0d0
  u=[1d0,2d0]
  call fnvinits(1,nEq,ier)
  call fcvmalloc(t,u,1,1,1,1d-5,1d-5,iout,rout,ipar,rpar,ier)
  call fcvspgmr(0,1,50,0d0,ier)
  dt=1d-1
  do i=1,10
    call fcvode(t+dt,t,u,1,ier)
    write(*,*),t,u
  end do
  call fcvfree()
end program

subroutine fcvfun(t,u,du,ipar,rpar,ier)
  double precision t
  double precision u(*)
  double precision du(*)
  integer ipar(*)
  double precision rpar(*)
  integer ier

  du(1)=-0.5d0*u(1)
  du(2)=-3d0*u(2)
  ier=0
end subroutine 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T11:11:23.403

在现代 fortran 的情况下，您可以使用 iso_c_binding 并在 fcvode.h 头文件中声明与 C 类型兼容的参数和变量，即

```
 integer(c_long ),parameter::nEq=2
  integer(c_int ) ier
  integer(c_long ) ipar(1),iout(21)
  real(c_double ) rpar(1),rout(10)
  real(c_double ) t,dt,u(nEq) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T05:41:25.830

尝试对 meth、itmeth、iatol、rtol 和 atol 使用变量名，而不是数值；从 Fortran 调用 C 库例程时可能会导致问题。还要确保将 cvcode 构建为双精度或扩展精度，而不是单精度。

# c++ - 使用 Xcode 的综合工具包

> ID：14779351
> 
> 赞同：1
> 
> 时间：2013-02-08T18:51:11.660
> 
> 标签：c++, synthesis

我正在尝试使用带有 xcode 的 STK 构建一个项目。我在我的项目文件夹中添加了所有 STK 的文件（.cpp 和 .h），我`__MACOSX_CORE__`在 Build Settings 菜单中添加了 pthread、CoreAudio、CoreMidi 和 CoreFoundation 框架（构建阶段、链接二进制与库）和预处理器宏。没有语法错误，但没有链接（架构的未定义符号......）。我不知道我做错了什么。有人能帮我吗 ？我正在尝试编译STK官方教程中给出的代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T19:33:01.423

我按照本教程进行操作，效果很好：[http](http://arielelkin.github.io/articles/mandolin) ://arielelkin.github.io/articles/mandolin 。也许您可以跟踪教程中的步骤并手动将这些步骤与您的步骤匹配。希望有帮助。

# android - ajmrtd 项目上的 java.lang.VerifyError

> ID：14779354
> 
> 赞同：1
> 
> 时间：2013-02-08T18:51:17.543
> 
> 标签：android, nfc

[我从http://sourceforge.net/projects/ajmrtd/?source=directory](http://sourceforge.net/projects/ajmrtd/?source=directory)下载了 ajmrtd android 应用程序，我试图使用它来读取 android.nfc.tech.IsoDep 但是当我调试程序时我遇到了以下错误，我该如何解决？

```
02-08 20:36:17.344: E/AndroidRuntime(21799): FATAL EXCEPTION: main
02-08 20:36:17.344: E/AndroidRuntime(21799): java.lang.VerifyError: de/maxmg/mrtd/readerapp/service/MRTDConnection
02-08 20:36:17.344: E/AndroidRuntime(21799):    at de.maxmg.mrtd.readerapp.ReadAct.handleIsoDepFound(ReadAct.java:197)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at de.maxmg.mrtd.readerapp.ReadAct.resolveIntent(ReadAct.java:133)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at de.maxmg.mrtd.readerapp.ReadAct.onCreate(ReadAct.java:103)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at android.app.Activity.performCreate(Activity.java:5191)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at android.os.Looper.loop(Looper.java:137)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at java.lang.reflect.Method.invokeNative(Native Method)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at java.lang.reflect.Method.invoke(Method.java:511)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
02-08 20:36:17.344: E/AndroidRuntime(21799):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:01:03.513

java.lang.VerifyError 可能是您针对与运行时使用的库不同的库进行编译或类和方法发生更改时的结果，因此在运行时找到的方法签名与编译时的签名不匹配-时间。

我建议您确保对项目进行全面清理，并检查构建路径是否包含所有正确的库和配置。

# c++ - 嵌套向量的动态分配

> ID：14779355
> 
> 赞同：1
> 
> 时间：2013-02-08T18:51:18.807
> 
> 标签：c++

我做了类似的事情：

```
Grid(int row, int col):num_of_row_(row), num_of_col_(col) {
     grid_ = new vector<vector<bool> > (row, col);  
} 
```

它动态分配嵌套向量。它是否正确？我的意思是使用这种语法：

```
new vector<vector<type> > (outersize, innersize) 
```

其中 ** outersize、innersize 都是“int”变量。**

更新：我实际上使用了这段代码，并且它有效。我只是想找出原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:56:44.710

传递给构造函数的第二个参数是要重复`outersize`次数的向量元素。您应该使用以下语法：

```
new vector<vector<type> > (outersize, vector<type>(innersize, elementValue)); 
```

例如，要制作一个`bool`初始设置为50x25 的网格`true`，请使用：

```
vector<vector<bool> > *grid = new vector<vector<bool> >(50, vector<bool>(25, true)); 
```

# sql-server - 如何在测试期间强制锁升级（以清除死锁问题）？

> ID：14779358
> 
> 赞同：3
> 
> 时间：2013-02-08T18:51:37.623
> 
> 标签：sql-server, locking

*在这里发布问题和一个答案。也许有人有更好的答案...*

如果开发人员不小心打开了与数据库的第二个连接而不是重用现有的连接（可能已经有一个打开的事务），那么**即使是单个用户也**可以编写触发死锁的代码。某些 O/RM 和 LINQ 框架使这个错误变得容易。

以下是纯 SQL 术语中的场景：

```
--Setup:
CREATE TABLE Vendors(VendorID int NOT NULL, VendorName nvarchar(100) NOT NULL, ExtraColumn int not null, CONSTRAINT PK_Vendors PRIMARY KEY CLUSTERED(VendorID))
GO
INSERT INTO Vendors(VendorID,VendorName,ExtraColumn) VALUES (1, 'Microsoft', 12345)
INSERT INTO Vendors(VendorID,VendorName,ExtraColumn) VALUES (2, 'Oracle', 12345)

--Connection 1:
BEGIN TRANSACTION
UPDATE Vendors SET ExtraColumn = 222 WHERE VendorID = 2

--Connection 2:
BEGIN TRANSACTION
SELECT VendorName FROM Vendors WHERE VendorID = 1 
```

当数据很小时，此代码（以及生成它的 c#/java/ORM/LINQ/任何生成它的代码）可能会在开发/测试中愉快地运行，但是当数据/内存配置文件在生产中更改并且锁从行升级到页到表。

**那么如何在我的测试环境中强制将锁升级到表级别，以便我可以清除任何这样**的错误（代码打开第二个连接）？

锁升级完全由 SQL Server 数据库引擎控制，无法预测何时会从行锁升级到表锁。我不会重复您可以在[此处](http://msdn.microsoft.com/en-us/library/ms184286%28v=sql.100%29)找到的所有详细信息，但需要特别注意的是：*“当...数据库引擎实例中的锁数量超过内存或配置阈值时，将触发锁升级。”* 这意味着它可能与我精心设计的代码和完美选择的索引完全无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:51:37.623

一种方法是：

1.  在测试环境中，运行如下脚本来禁用所有索引的行和页锁定（使其直接进入表锁定）
2.  运行测试
3.  再次运行脚本将其设置回正常锁定

```
--
-- Script to disable/enable row & page locking on dev/test environment to flush out deadlock issues
-- executes statement like this for each table in the database:
-- ALTER INDEX indexname ON tablename SET ( ALLOW_ROW_LOCKS  = OFF, ALLOW_PAGE_LOCKS  = OFF )
--
-- DO NOT RUN ON A PRODUCTION DATABASE!!!!
--
set nocount on
declare @newoption varchar(3)
--------------------------------------------------------------------
-- Change variable below to 'ON' or 'OFF' --------------------------
--   'OFF' means row & page locking is disabled and everything 
--      triggers a table lock
--   'ON' means row & page locking is enabled and the server chooses
--     how to escalate the locks (this is the default setting)
set @newoption = 'OFF'
--------------------------------------------------------------------

DECLARE    @TableName varchar(300)
DECLARE    @IndexName varchar(300)
DECLARE @sql varchar(max)

DECLARE inds CURSOR FAST_FORWARD FOR
SELECT tablename, indname
FROM (
    select top 100 percent
    so.name as tablename
         , si.indid
         , si.name as indname
         , INDEXPROPERTY( si.id, si.name, 'IsPageLockDisallowed') as IsPageLockDisallowed
         , INDEXPROPERTY( si.id, si.name, 'IsRowLockDisallowed') as IsRowLockDisallowed
    from   sysindexes si
    join sysobjects so on si.id = so.id
    where  si.status & 64 = 0
      and  objectproperty(so.id, 'IsMSShipped') = 0
      and si.name is not null
      and so.name not like 'aspnet%'
      and so.name not like 'auditLog%'
    order by so.name, si.indid
) t

OPEN inds
FETCH NEXT FROM inds INTO @TableName, @IndexName

WHILE @@FETCH_STATUS = 0
BEGIN

    SET @sql = 'ALTER INDEX [' + @IndexName + '] ON [dbo].[' + @TableName + '] SET ( ALLOW_ROW_LOCKS  = ' + @newoption + ', ALLOW_PAGE_LOCKS  = ' + @newoption +' )'
    PRINT @sql
    EXEC(@sql)

    FETCH NEXT FROM inds INTO @TableName, @IndexName
END

CLOSE inds
DEALLOCATE inds

PRINT 'Done' 
```

其他注意事项：

*   我从别人的文章中得到了上述脚本的核心，但我早就忘记了在哪里。对缺乏归属表示歉意。
*   请注意，上述脚本将覆盖您的表上任何现有的自定义锁升级设置。您可以通过首先运行内部选择 ("SELECT TOP 100 PERCENT so.name...") 查看现有设置来检查这些设置。

# javascript - 试图在视频之上制作视频控件

> ID：14779371
> 
> 赞同：2
> 
> 时间：2013-02-08T18:52:35.577
> 
> 标签：javascript, html, css, html5-video

我正在做一个任务，我们必须使用 HTML5 创建一个包含三个视频的网站。这就是我现在所拥有的：http: //jumpshare.com/v/hVQnbW?b= [47ZPmk](http://jumpshare.com/v/hVQnbW?b=47ZPmk)

我熟悉如何创建视频播放器的播放/暂停等功能。但是我不知道将控件放在视频上的最佳方法是什么。

我想创造一些像大多数玩家一样工作的东西；控件在悬停时显示，中间有一个按钮可以在视频关闭时启动视频。

我最初的想法是我必须在视频标签内创建一个 div 标签（所以边框不会超出父级（）。从那里有一个 CSS 规则：

```
#video div{
       opacity: 0;
}

#video div:hover {
       opacity: 0.6;
} 
```

是的，这没有意义。如果我悬停它只会使导航不透明，但如果我悬停视频我想要它：/

这只是一个猜测和我最初的直觉，但老实说，我不知道实现这一点的正确方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T20:08:02.787

[jsFiddle 上的工作示例](http://jsfiddle.net/htmled/5eAXs/)。

这样的事情应该可以解决问题：

HTML：

```
<div class="video">
    <video width="640" height="360">
        <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" type="video/mp4">
        <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.ogv" type="video/ogg">
        Your browser does not support the video tag.
    </video>

    <div class="controls">
        <span class="pause">pause</span>
    </div>
</div> 
```

CSS：

```
.video {
    position: relative;
}
.controls {
    display: none;
    background: #000;
    opacity: .7;
    color: #fff;
    font-size: .9em;
    position: absolute;
    bottom: .9em;
    left: 0;
    line-height: 2em;
    z-index: 3;
}
.controls span {
    background: #222;
    padding: 1em 1em;
    cursor: pointer;
} 
```

JavaScript：

```
var $video = $(".video"),
    $controls = $video.find(".controls");

$video.hover(
    function () {
        $controls.fadeIn();
    },
    function () {
        $controls.fadeOut();
    }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T20:01:35.940

您必须创建一个包装元素来包装视频元素和控件。

```
<div id="vid-container">
    <video src="video.mp4"></video>
    <div id="controls">... control stuff goes here ...</div>
</div>

<style>
    #vid-container {
        position: relative;
        width: 400px; // Make this the width of the video
    }

    // Place the controls to be at the bottom of the video, and on top, and invisible
    #controls {
        position: absolute;
        left: 0;
        bottom: 0;
        z-index: 2;
        opacity: 0;
    }

    // Make the controls show when the video container is hovered
    #vid-container:hover #controls {
        opacity: 0.6;
    }
</style> 
```

# ms-access - 如何在 Access 表单中显示超链接（数据表视图）

> ID：14779372
> 
> 赞同：5
> 
> 时间：2013-02-08T18:52:37.977
> 
> 标签：ms-access

该表的一个字段是包含文件完整路径的备注字段。

我将在数据表视图的表单中将路径显示为超链接。

这是我在该列的“属性”窗口中所做的：

*   是否超链接：是
*   显示为超链接：始终

现在该列的值确实像超链接一样显示为蓝色并带有下划线。但是，如果我单击超链接，它不会带我到任何地方。

有一个名为“Hyperlink Target”的属性，我认为它必须是修复它的地方。但是我在任何地方都找不到该属性值的文档。我尝试了“_blank”，就好像它是 Html 一样，但它失败了。谁能告诉我该属性中应该包含什么以便超链接起作用？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T19:20:05.180

在表单的记录源查询中，将哈希字符 ( `#`) 连接到备注字段值的两端。

```
SELECT '#' & your_field & '#' AS URL
FROM YourTable; 
```

然后，如果您的字段包含`https://www.google.com/webhp?source=search_app`，则文本框值将是`#https://www.google.com/webhp?source=search_app#`。单击绑定到该 URL 的文本框将使用该`FollowHyperlink`方法在关联的应用程序中打开它。

如果您谈论的是本地文件路径而不是 Web URL，则该方法仍然有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T19:10:57.537

你真的认同这个想法吗？我不推荐它，因为它使编辑数据变得很麻烦。我更喜欢双击事件中的FollowHyperlink。FollowHyperlink 将打开大部分内容：

```
 FollowHyperlink "c:\docs\word.doc"
 FollowHyperlink "mailto:sample@example.com"
 FollowHyperlink "http://stackoverflow.com
 FollowHyperlink Me.MyDocs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T15:06:46.090

我一直试图通过另外添加一个字段来解决这个问题。我找到的解决方案是编写一个 SQL 更新查询：

```
UPDATE TableName
SET Yahoo = [FieldName]&'.Y'&"#"&"http://finance.yahoo.com/q?s="& [FieldName] & "&ql=0"&"#"
WHERE [FieldName]IS NOT NULL 
```

我的具体用途是链接到股票代码，但它可以用于其他目的。这为我解决的问题是 Access 错误地认为“#”是一个日期。

# javascript - RaphaelJS 上的可拖动字体

> ID：14779375
> 
> 赞同：0
> 
> 时间：2013-02-08T18:53:00.507
> 
> 标签：javascript, svg, raphael

我试图使一些使用 print() 可拖动的文本添加。我发现了一些 SO 帖子，但代码不起作用 - 我已将其作为[小提琴重新](http://jsfiddle.net/cyberwombat/XmMzm/3/)发布 - 在 chrome 和 FF 上，文本飞离屏幕。如果我将 getBBox() 参数设置为 false，它会在第一次拖动时起作用，但是在随后的拖动中，鼠标会发生偏移。

```
var w = document.body.clientWidth,
    h = document.body.clientHeight,
    paper = Raphael(0, 0, w, h);

var font = paper.getFont("Vegur");
var text = paper.print(20,20,"my dragable text",font,50);

var start = function () {
    text.oBB = text.getBBox();
},
move = function (dx, dy) {
  var bb = text.getBBox(true); // Setting to false works once
  text.transform('...T'+[text.oBB.x - bb.x + dx, text.oBB.y - bb.y + dy]);
},
up = function () {

};

text.drag(move, start, up); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:55:22.937

弄清楚了...

```
var start = function() {
  //get original position before any transform
  var obb = this.getBBox(true);
  //get position after last transform
  var nbb = this.getBBox(false);
  //store difference
  this.ox = nbb.x - obb.x
  this.oy = nbb.y - obb.y;
},
move = function(dx, dy) {
  //apply difference to mouse moves
  this.transform('T' + [this.ox + dx, this.oy + dy]);
},
up = function() {
}; 
```

# c# - 更改用 C# 创建的 Excel 图表上的轴标签

> ID：14779376
> 
> 赞同：5
> 
> 时间：2013-02-08T18:53:01.583
> 
> 标签：c#, excel, charts

所以我一直在尝试解决这个问题，但似乎无处可去。我正在使用 C# 创建一个 Excel 电子表格。我的电子表格包含一个图表。除了更改 X 轴标签外，我可以用图表做所有事情。我已经尝试了几乎所有我能找到的东西，但没有任何效果。

```
Excel.ChartObjects xlChart = (Excel.ChartObjects)xlWorkSheet.ChartObjects(Type.Missing);
Excel.ChartObject myChart = (Excel.ChartObject)xlChart.Add(1420, 660, 320, 180);
Excel.Chart chartPage = myChart.Chart;
chartPage.ChartType = Excel.XlChartType.xlXYScatterLines;
chartPage.HasTitle = true;
chartPage.ChartTitle.Text = "Title Text";
chartPage.HasLegend = false;

var yAxis = (Excel.Axis)chartPage.Axes(Excel.XlAxisType.xlValue,Excel.XlAxisGroup.xlPrimary);
yAxis.HasTitle = true;
yAxis.AxisTitle.Text = "Y-Axis Title text";
yAxis.MaximumScale = 20;
yAxis.AxisTitle.Orientation = Excel.XlOrientation.xlUpward;

Excel.Range Data_Range = xlWorkSheet.get_Range("A10", "C10");//Data to be plotted in chart
Excel.Range XVal_Range = xlWorkSheet.get_Range("A1", "C1");//Catagory Names I want on X-Axis as range
var x_labels = new List<string>() { "Val1", "Val2", "Val3" }; //Catagory Names I want on X-Axis as text array

Excel.SeriesCollection oSeriesCollection = (Excel.SeriesCollection)myChart.Chart.SeriesCollection(misValue);
Excel.Series Data = oSeriesCollection.NewSeries();
Data.Values = Data_Range;
Data.Name = "Plot Data";

Excel.Axis valueAxis = (Excel.Axis)chartPage.Axes(Excel.XlAxisType.xlCategory, Excel.XlAxisGroup.xlPrimary);
/*
Methods I've tried with no luck:
1) Data.XValues = XVal_Range;
2) Data.XValues = x_labels.ToArray();
3) valueAxis.CategoryNames = x_labels.ToArray();
4) valueAxis.CategoryNames = XVal_Range;
*/ 
```

每次它只显示默认数值......我很茫然

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T19:34:56.090

好的，所以我发现了问题...您无法更改 Scatter 类型图上的 X 轴。我将图表的类型更改为`Excel.XlChartType.xlLineMarkers;`，它工作正常。

这是整个片段：

```
Excel.ChartObjects xlChart = (Excel.ChartObjects)xlWorkSheet.ChartObjects(Type.Missing);
Excel.ChartObject myChart = (Excel.ChartObject)xlChart.Add(1420, 660, 320, 180);
Excel.Chart chartPage = myChart.Chart;
chartPage.ChartType = Excel.XlChartType.xlLineMarkers;
chartPage.HasTitle = true;
chartPage.ChartTitle.Text = "Title Text";
chartPage.HasLegend = false;

var yAxis = (Excel.Axis)chartPage.Axes(Excel.XlAxisType.xlValue,Excel.XlAxisGroup.xlPrimary);
yAxis.HasTitle = true;
yAxis.AxisTitle.Text = "Y-Axis Title text";
yAxis.MaximumScale = 20;
yAxis.AxisTitle.Orientation = Excel.XlOrientation.xlUpward;

Excel.Range Data_Range = xlWorkSheet.get_Range("A10", "C10");//Data to be plotted in chart
Excel.Range XVal_Range = xlWorkSheet.get_Range("A1", "C1");//Catagory Names I want on X-Axis as range

Excel.SeriesCollection oSeriesCollection = (Excel.SeriesCollection)myChart.Chart.SeriesCollection(misValue);
Excel.Series Data = oSeriesCollection.NewSeries();
Data.Values = Data_Range;
Data.Name = "Plot Data";

Excel.Axis xAxis = (Excel.Axis)chartPage.Axes(Excel.XlAxisType.xlCategory, Excel.XlAxisGroup.xlPrimary);
xAxis.CategoryNames = XVal_Range; 
```

# python - 在 Plone 中清理用户输入的代码

> ID：14779378
> 
> 赞同：1
> 
> 时间：2013-02-08T18:53:05.900
> 
> 标签：python, plone, zope

在 Plone 或 Zope 中，我在哪里可以找到清理用户文本输入的代码？

这种逻辑可以删除 HTML、Javascript 和所有类型的恶意或不需要的文本。

我想做类似的事情：

```
from plone.someplace.toolbox import sanityseUserInput

def mySanitizer(text):
    text = sanityseUserInput(text)
    # Do my work here
    return text 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T11:02:59.063

所有清理工作都由 portal_transforms 管理。请参阅[http://pypi.python.org/pypi/Products.PortalTransforms](http://pypi.python.org/pypi/Products.PortalTransforms)

默认情况下，它是用于所有富文本字段的安全 html。如果您想要一个新的转换，您可以创建它并注册它。

# android - 如何使用 runOnUiThread 更改 ImageView

> ID：14779381
> 
> 赞同：0
> 
> 时间：2013-02-08T18:53:16.920
> 
> 标签：android

我试图在每次声音完成时更改图像视图，所以我使用了 runOnUIThread 但图像只是在循环时向我显示最后一个图像，而我将更改图像完成并在代码下方。

```
public class PrincipalActivity extends ClassePai {

MediaPlayer avemarias,misterios;
ImageView imagem ;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_principal);

    avemarias = MediaPlayer.create(this, R.raw.teste);

    imagem = (ImageView) findViewById(id.imageViewGoz);

    while(contador<3){

        mudaImagem(imagem,avemarias,misterios);

    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_principal, menu);
    return true;
} 
```

}

```
public class ClassePai extends Activity {
protected static int contador = 0;

protected void mudaImagem(final ImageView imagem,
        final MediaPlayer avemaria, final MediaPlayer misterios) {

    runOnUiThread(new Runnable() {

        @Override
        public void run() {

                if(contador >= 0){

                    avemaria.start();
                }else if (contador == 11){

                    misterios.start();
                }else if (contador == 21){
                    misterios.start();
                }

                if (avemaria.isPlaying()||misterios.isPlaying()) {

                    imagem.setImageResource(com.willamydotcom.osantoterco.R.drawable.goz_quar+contador);

                while (avemaria.isPlaying()) {

                }
                    contador++;

                }

        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:24:18.317

这不起作用：

```
imagem.setImageResource(
        com.willamydotcom.osantoterco.R.drawable.goz_quar + contador); 
```

您正在尝试更改 ImageView 的图像资源，但您将资源名称与代码中的实际资源 ID 混淆了。

查看您的 Logcat：Android 找不到这些资源，并且您可能会因堆栈跟踪而崩溃。

您必须编写一个 switch 语句来正确处理这个问题：

```
switch(contador) {
case 0:
    imagem.setImageResource(
            com.willamydotcom.osantoterco.R.drawable.goz_quar0);
    break;
case 1:
    imagem.setImageResource(
            com.willamydotcom.osantoterco.R.drawable.goz_quar1);
    break;
case 2:
    imagem.setImageResource(
            com.willamydotcom.osantoterco.R.drawable.goz_quar2);
    break;
} 
```

您的代码还有其他问题：`mudaImagem()`从执行`onCreate()`，然后执行`runOnUiThread()`没有任何目的。

# r - 如何使用 R 2.15.2 让 Rtools 在 Windows 上运行？

> ID：14779386
> 
> 赞同：6
> 
> 时间：2013-02-08T18:53:41.460
> 
> 标签：r

在为 Windows 安装 Rtools 3.0 之后，我在 R 控制台上运行了以下命令：

```
> library(devtools)
WARNING: Rtools is required to build R packages, but no version of Rtools compatible with R 2.15.2 was found.
(Only the following incompatible version(s) of Rtools were found:3.0)

Please download and install Rtools 2.16 from http://cran.r-project.org/bin/windows/Rtools/ and then run find_rtools().
> find_rtools()
WARNING: Rtools is required to build R packages, but no version of Rtools compatible with R 2.15.2 was found.
(Only the following incompatible version(s) of Rtools were found:3.0)

Please download and install Rtools 2.16 from http://cran.r-project.org/bin/windows/Rtools/ and then run find_rtools(). 
```

但是，网页[http://cran.r-project.org/bin/windows/Rtools/](http://cran.r-project.org/bin/windows/Rtools/)没有列出 2.16 版本。此外，它表示版本 3.0 与所有版本的 R > 2.15.1 兼容。有人知道如何让 Rtools 在 Windows 上与 R 2.15.2 一起工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T18:19:47.043

正如@Hadley 在 OP 评论中所述，这似乎已在 2013 年 2 月初通过将新版本推送到 CRAN 得到解决。

这个对我有用...

# android - CardsUI - 在 OnDismissCallback 上从数据库中删除一行

> ID：14779389
> 
> 赞同：1
> 
> 时间：2013-02-08T18:53:44.887
> 
> 标签：android, android-view

**序幕**

我正在使用Nadav [Fima](https://bitbucket.org/nadavfima/cardsui-for-android)的 CardsUI 构建一个片段。我迭代了一个 List< Weight > 以用卡片填充卡片视图：

```
list = wom.getWeights();
    if (list != null) {
        for (Weight w : list) {
            cardsview.addCard(new WeightCard(w), true);
        }
    } 
```

权重长id；双倍重量；整数数量；作为具有相应 get/set 方法的变量。我使用这个类来使用 stORM 构建数据库，所以有一个数据库（使用 wom.getWeights()）我得到一个 List<Weight>。

这是 WeightCard 类：

```
public class WeightCard extends Card {

private Weight weight;

public WeightCard(Weight w) {
    this.weight = w;
}

@Override
public View getCardContent(Context context) {
    View view = LayoutInflater.from(context).inflate(R.layout.weight_card,
            null);

    ((TextView) view.findViewById(R.id.tvWeight)).setText(""
            + Double.toString(weight.getWeight()));
    ((TextView) view.findViewById(R.id.tvQuantity)).setText(""
            + Integer.toString(weight.getQuantity()));

    return view;
}

} 
```

**问题**

我想使用滑动来取消列表中的一个权重。为此，我使用库中的回调 OnDismissCallback。但是，我不知道如何获得支持卡的重量的 id。

我知道我应该使用 onDismiss(View v, Object token) 方法，但我不知道怎么做。

# c# - 具有泛型类型的类和接口的 C# 3.0 隐式转换错误

> ID：14779390
> 
> 赞同：1
> 
> 时间：2013-02-08T18:53:46.837
> 
> 标签：c#, oop, generics, casting

我实现了一些依赖项（这是 MVP 模式的一部分）。现在，当我尝试执行强制转换时，VS 会通知一个错误。

定义：

```
interface IView
{
     void setPresenter(IPresenter<IView> presenter);
}

interface IViewA : IView
{
}

interface IPresenter<T> where T : IView
{
    void setView(T view);
}

class PresenterA : IPresenter<IViewA>
{
} 
```

隐式转换：

```
IPresenter<IView> presenter = new PresenterA(); 
```

编译错误：无法将类型“PresenterA”隐式转换为“IPresenter”。存在显式转换（您是否缺少演员表？）

显式演员表：

```
IPresenter<IView> presenter = (IPresenter<IView>)new PresenterA(); 
```

运行时错误：InvalidCastException

我该如何解决它以保持这个概念？具有泛型类型的概念（我之前的概念没有它）。我已经尝试过其他帖子中提到的方差和逆变问题（进出），但也有错误（在 VS 2010 下）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:00:06.750

`IViewA`源自的事实`IView`并不自动意味着`IPresenter<IViewA>`源自`IPresenter<IView>`。实际上`IPresenter<IViewA>`和`IPresenter<IView>`是两种不同的类型，它们之间没有继承关系。他们唯一的共同祖先是`object`。

让我们看一个例子。假设我们有一个类`Animal`，一个`Cat`派生自`Animal`的类和一个`Dog`派生自的类`Animal`。现在让我们声明两个列表

```
List<Animal> animals;
List<Cat> cats = new List<Cat>(); 
```

我们还假设以下分配是可能的：

```
animals = cats;
animals.Add(new Cat()); // OK
animals.Add(new Dog()); // Ooops! 
```

该列表实际上是一个猫列表，我们正在尝试添加一只狗！`List<Animal>`因此这两种类型`List<Cat>`不允许赋值兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T19:51:01.420

This question is really about covariance and contravariance of generic types. We have

> an `IViewA` is an `IView`

but that does not automatically mean that

> an `IPresenter<IViewA>` is an `IPresenter<IView>`

*When* the conclusion holds, we say that `IPresenter<T>` is ***covariant*** in `T`. In C# one makes an interface covariant by putting an `out` keyword before the type parameter in question (here `T`), as in:

```
interface IPresenter<out T>  ... 
```

Since you didn't put the `out` keyword, what you do is not allowed.

But it is only safe to make a type covariant in `T` if all the uses of `T` goes "out". For example it is okay to use `T` as return type of methods or as property type for `get`-only properties.

Your interface uses `T` in an "in" position, namely as a value parameter (i.e. a parameter without the `ref` (or `out`) modifier). So it would be illegal to make your interface covariant. See some of the other answers for examples of what could happen if this restriction wasn't there.

Then there's the notion of ***contravariance***, which for `IPresenter<>` means that

> an `IViewA` is an `IView`

implies that

> an `IPresenter<IView>` is an `IPresenter<IViewA>`

Notice how the order changes with contravariance. Contravariance is only safe (and only allowed) when the type parameter is used in "in" positions, such as value parameters.

Based on the only member, it would be legat to declare your interface contravariant:

```
interface IPresenter<in T>  ... 
```

where `in` means contravariant, of course. But it will reverse the "direction" in which implicit conversions are allowed.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T19:02:09.600

通过将 a 存储`PresenterA`在 an 中`IPresenter<IView>`，您是在说“这个对象有一个`setView`可以接受任何方法的方法`IView`”。

但是，`PresenterA`的方法`setView`只接受一个`IViewA`. 如果你通过它`IViewSomethingElse`，你*期望*会发生什么？

它不起作用，所以编译器不允许它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T19:09:10.913

你试图做的事情没有意义。想象一下以下情况（包括一个有意义的变量）：

```
interface IView {}

interface IViewA : IView {}
class ViewA : IViewA {}

interface IViewB : IView {}
class ViewB : IViewB {}

interface IPresenter<in T> where T : IView
{
    void setView(T view);
}

class PresenterA : IPresenter<IViewA>
{
    public void setView(IViewA view) {}
}

class PresenterB : IPresenter<IViewB>
{
    public void setView(IViewA view) {}
} 
```

现在，如果您尝试进行的转换是有效的，您可以这样做：

```
IPresenter<IView> presenter = new PresenterA();
presenter.setView(new ViewB()); 
```

如您所见，这不是类型安全的。即，您认为类型之间存在的关系不存在。

差异让你做的恰恰相反：

```
class Presenter : IPresenter<IView>
{
    public void setView(IView view) {}
}

IPresenter<IViewA> presenter = new Presenter(); 
```

`Presenter.setView()`可以接受任何`IView`参数，因此它可以接受`IViewB`. 这也是编译器提到显式转换的原因。这是为了让您执行以下操作：

```
IPresenter<IViewA> presenterA = new Presenter();
IPresenter<IView> presenter = (IPresenter<IView>) presenterA; 
```

也就是说，检查您`presenter`在运行时分配的值是否恰好是“足够通用”的值，即使它的编译时类型不是。

# php - 如何包含另一个作为变量存储的 PHP 文件？

> ID：14779397
> 
> 赞同：0
> 
> 时间：2013-02-08T18:54:08.997
> 
> 标签：php, include

我正在尝试使用 include 语句加载另一个页面，但我不断收到错误消息：

```
Warning: include(AccountView.php?id=) [function.include]: failed to open stream: No such file or directory in /home/public_html/InsertAccount.php on line 62 
```

* * *

```
$return = "AccountView.php?id=".$ID;
include $return; 
```

我不确定我缺少什么才能使其正确执行。另一双眼睛真的很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:56:17.023

没有具有此名称的文件：

```
AccountView.php?id= 
```

这`?id=`部分正在杀死你。您试图在其中包含 URL，而不是文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T18:56:56.193

除非您有一个名为 的文件`AccountView.php?id=.php`，否则这是行不通的。

您要做的是设置变量 ( `$ID`)，包含您的文件，然后`$ID`在包含的文件中使用：

```
$ID = '5';
$return = "AccountView.php";
include $return; 
```

# c# - 在使用 WebClient 时，是否有一种优雅的方式来确定我是否在代理后面？

> ID：14779400
> 
> 赞同：0
> 
> 时间：2013-02-08T18:54:13.090
> 
> 标签：c#, webproxy

现在我正在使用 a`try-catch`来处理 a`WebException`以确定我是否需要使用代理 - 这很难看。

而不是`try-catch`用来控制程序执行，**我想提前知道是否需要使用代理**。

这是我的代码：

```
private bool m_useDefaultWebProxy;

public void DownloadFile(String url, String fileName) {
    try {
        using (WebClient webClient = new WebClient()) {
            if (m_useDefaultProxy) {
                this.SetDefaultProxy(webClient)
            }
            webClient.DownloadFile(url, fileName);
        }
    }
    catch (WebException ex) {
        this.HandleWebProxyError(ex);
    }
}

private void HandleWebProxyError(WebException ex) {
    HttpStatusCode = ((HttpWebResponse)ex.Response).StatusCode;
    if (statusCode == HttpStatusCode.ProxyAuthenticationRequired) {
        this.m_useDefaultWebProxy.Checked = true;        
    }
}

private void SetDefaultWebProxy(WebClient webClient) {
    IWebProxy proxy = WebRequest.GetSystemWebProxy();
    proxy.Credentials = CredentialCache.DefaultNetworkCredentials;
    webClient.Proxy = proxy;
} 
```

# java - 是否可以在 MigLayout 中指定深度？

> ID：14779401
> 
> 赞同：1
> 
> 时间：2013-02-08T18:54:15.790
> 
> 标签：java, swing, user-interface, miglayout

我正在将 MigLayout 库用于 Swing GUI。

我想覆盖两个JPanel，如下所示：

```
+----+-----------------------+
| 1  |         2             |
|    |                       |
+----+                       |
|                            |
|                            |
|                            |
|                            |
+----------------------------+ 
```

很像电子游戏中的[小地图](http://en.wikipedia.org/wiki/Mini-map)。

* * *

在我看来，有两种方法可以实现这一目标：

**JLayeredPane**

```
JPanel main = new JPanel();
main.setBounds(0, 0, WIDTH, HEIGHT);
// ... fill it with Swing components ...
JPanel minimap = new JPanel();
minimap.setBounds(10, 10, 100, 100);
/// ... fill it with Swing components ...
JLayeredPane layer = new JLayeredPane();
layer.add(main, new Integer(0));
layer.add(minimap, new Integer(1)); 
```

但是，这种方法很脆弱，因为我必须指定`WIDTH`and `HEIGHT`。如果调整了窗口大小，那么似乎我必须再次计算这些值。

**JLayeredPane & MigLayout**

```
JPanel main = new JPanel();
// ... fill it with Swing components ...
JPanel minimap = new JPanel();
/// ... fill it with Swing components ...
JLayeredPane layer = new JLayeredPane();
layer.setLayoutManager(new MigLayout());

CC positioning;

positioning = // ??? something specified in percents and z-order?
layer.add(main, positioning, new Integer(0));

positioning = // ??? something specified in percents and z-order?
layer.add(minimap, positioning, new Integer(1)); 
```

是否可以使用允许使用 MigLayout 进行叠加的内容填充定位代码，同时让我指定百分比值（与第一个示例中的像素分辨率相反`WIDTH`）`HEIGHT`？

**编辑**：

这是一个*部分*有效的解决方案：

```
positioning = new CC().width("100%").height("100%");
// ...
positioning = new CC().pos("10", "10"); 
```

但是，显示抖动，有时是不可见的。我相信这与不确定的渲染顺序有关（尽管这只是直觉）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T20:52:05.487

> 我也尝试过 setComponentZOrder，但这似乎没有任何效果

我不知道 MigLayout 在幕后是如何工作的，但我认为 ZOrder 很重要。

查看使用 ZOrder 对组件进行布局的[Overlap Layout](http://tips4java.wordpress.com/2009/07/26/overlap-layout/)，并对我对 ZOrder 工作原理的理解进行了一些说明。

也许文章中提到的**isOptimizedDrawingEnabled()**方法在这种情况下也很重要，

# sql - 仅选择对审计日志表中值的更改

> ID：14779405
> 
> 赞同：0
> 
> 时间：2013-02-08T18:54:39.227
> 
> 标签：sql, sql-server-2008, audit-tables

在 MS SQL Server 2008 R2 中，我有一个表 Foo，对于 Foo 的每次插入和更新，我还将日期、用户、PK FooId 和 Foo 的其他一些列插入到 FooAuditLog 中，包括一个数值，叫它cxp。

我现在需要检索给定 FooId 随时间变化的 cxp 更改历史记录。但是可以在不更改 cxp 的情况下保存 Foo，我需要忽略这些值。

例如，如果特定 Foo (ie `select date, user, cxp from FooAuditLog where fooId=17`) 的审核日志条目如下所示：

```
Date      User     Cxp
-------------------------
10/26     Fred     42
10/28     George   38
11/7      Tom      38
11/9      Fred     38
11/12     Joe      33
11/14     Tom      33
11/18     George   38 
```

然后我需要修改查询以仅返回：

```
Date      User     Cxp
-----------------------------
10/26     Fred     42
10/28     George   38
11/12     Joe      33
11/18     George   38 
```

并忽略 11/7、11/9 和 11/14 的条目。我曾考虑过`select distinct (cpx) ... group by date`，但我确实需要捕获值变回先前值的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:59:33.703

您需要获取先前的值。此版本使用 MySQL 语法和相关子查询来获取结果：

```
select t.*
from (select t.*,
             (select cxp from t t2 where t2.date < t.date order by date desc limit1
             ) as prevcxp
      from t
     ) t
where prevcxp is NULL or prevcxp <> cxp 
```

在其他数据库中，您可能会使用`lag()`而不是子查询，`limit`可能会被替换为 a`top`甚至`fetch first 1 row`.

# java - 你如何匹配军事时间？

> ID：14779413
> 
> 赞同：2
> 
> 时间：2013-02-08T18:54:51.833
> 
> 标签：java, regex

我正在尝试创建一个有效的 Java 正则表达式来匹配代表标准“军事时间”的字符串：

```
String militaryTimeRegex = "^([01]\d|2[0-3]):?([0-5]\d)$"; 
```

这给了我一个编译器错误：

> 无效的转义序列（有效的是 \b \t \n \f \r \" \' \ ）

我哪里错了？！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T18:56:05.057

确保使用双反斜杠转义字符：

```
String militaryTimeRegex = "^([01]\\d|2[0-3]):?([0-5]\\d)$"; 
```

单反斜杠表示转义序列的开始。您需要使用`\\`来获取出现在`String`.

* * *

要回答您的评论，您目前只匹配`19:00`。您需要考虑模式`:00`末尾的额外内容`String`：

```
String militaryTimeRegex = "^([01]\\d|2[0-3]):?([0-5]\\d):?([0-5]\\d)$"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T18:56:18.443

`\`在 Java 中，您需要对所有字符进行双重转义：

```
String militaryTimeRegex = "^([01]\\d|2[0-3]):([0-5]\\d):([0-5]\\d)$"; 
```

为什么？因为`\`是字符串的转义字符，如果您需要文字`\`出现在字符串中的某处，那么您也必须对其进行转义：`\\`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T18:56:20.960

根据错误信息`\d`不存在。逃脱它`\\d`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T18:56:51.187

虽然`\d`是有效的正则表达式语法，但您需要转义 Java 字符串中的反斜杠：

```
String militaryTimeRegex = "^([01]\\d|2[0-3]):?([0-5]\\d)$"; 
```

# qt - QComboBox:focus Qt 样式表

> ID：14779414
> 
> 赞同：4
> 
> 时间：2013-02-08T18:55:01.470
> 
> 标签：qt, qcombobox

我在输入表单上有一个*可编辑*的组合框，当它获得焦点时，它的背景必须改变。以下代码适用于 QLineEdit，但对 QComboBox 没有影响。

```
QLineEdit, QComboBox { background-color: green; }
QLineEdit:focus, QComboBox:focus { background-color: red; } 
```

**是否可以仅使用 Qt 样式表**使 QComboBox 的行为与 QLineEdit 一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:28:33.960

您可能需要通过子类化 QLineEdit 并将其安装到组合框中（使用`QComboBox::setLineEdit()`）来完成此操作。然后，覆盖 QLineEdit 的 focusIn() 和 focusOut() 函数，并在这些函数中设置具有适当背景颜色的样式表。

另一种方法是在组合框（和/或其关联的 QLineEdit）上安装事件处理程序并捕获焦点输入/输出事件，然后更改样式表。

# c# - 分组并在 DataTable 行中查找 MAx 值

> ID：14779415
> 
> 赞同：0
> 
> 时间：2013-02-08T18:55:05.870
> 
> 标签：c#, ado.net, datatable

我现有的代码运行良好，它在数据表中找到数据列的最大值。现在我想改进它并找到每个 empid 的最大值。需要什么改变？我不想使用 LINQ。

我现在正在使用这个：memberSelectedTiers.Select("Insert_Date = MAX(Insert_Date)") 我需要按 Empid 对它进行分组。

我的代码如下。

```
 DataTable memberApprovedTiers = GetSupplierAssignedTiersAsTable(this.Customer_ID, this.Contract_ID);

        //get row with maximum Insert_Date in memberSelectedTiers
        DataRow msRow = null;
        if (memberSelectedTiers != null && memberSelectedTiers.Rows != null && memberSelectedTiers.Rows.Count > 0)
        {
           DataRow[]  msRows = memberSelectedTiers.Select("Insert_Date = MAX(Insert_Date)");
           if (msRows != null && msRows.Length > 0)
           {
               msRow = msRows[0];
           }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:09:23.450

您可以使用 LINQ 来实现这一点。我认为以下将起作用（没有要测试的VS）：

```
var grouped = memberSelectedTiers.AsEnumerable()
                                 .GroupBy(r => r.Field<int>("EmpId"))
                                 .Select(grp => 
                                     new { 
                                         EmpId = grp.Key
                                       , MaxDate = grp.Max(e => e.Field<DateTime>("Insert_Date"))
                                     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-22T20:43:00.697

Daniel Kelley，您的回答对我有帮助，这很好，但是您是否注意到 OP 表示他不想使用 LINQ？

# mysql - libmysqlclient_r.so.15：无法打开共享对象文件：没有这样的文件或目录 Dreamhost

> ID：14779417
> 
> 赞同：0
> 
> 时间：2013-02-08T18:55:20.430
> 
> 标签：mysql, ruby-on-rails, capistrano, dreamhost

我的 Rails 应用程序运行良好，但最近 Dreamhost 移出了他们的服务器（* 类似的东西），现在我无法通过 capistrano 部署..

我收到此错误消息：

`libmysqlclient_r.so.15: cannot open shared object file: No such file or directory - /home/soprojetos/cap/shared/bundle/ruby/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.so`

原始版本：

`[direct.soprojetos.com.br] executing command ** [out :: direct.soprojetos.com.br] /usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler.rb:199: warning: Insecure world writable dir /home/soprojetos/cap/shared/bundle/ruby/1.8/bin in PATH, mode 040777 ** [out :: direct.soprojetos.com.br] /home/soprojetos/cap/shared/bundle/ruby/1.8/bundler/gems/capistrano-ea5b03b4d38e/capistrano.gemspec:15: warning: Insecure world writable dir /home/soprojetos/cap/shared/bundle/ruby/1.8/bin in PATH, mode 040777 ** [out :: direct.soprojetos.com.br] /home/soprojetos/cap/shared/bundle/ruby/1.8/bundler/gems/kendoui_rails-dc276aceb446/kendoui-rails.gemspec:18: warning: Insecure world writable dir /home/soprojetos/cap/shared/bundle/ruby/1.8/bin in PATH, mode 040777 ** [out :: direct.soprojetos.com.br] /home/soprojetos/cap/shared/bundle/ruby/1.8/bundler/gems/pagseguro-fa2c22e88177/pagseguro.gemspec:15: warning: Insecure world writable dir /home/soprojetos/cap/shared/bundle/ruby/1.8/bin in PATH, mode 040777 ** [out :: direct.soprojetos.com.br] /usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler/runtime.rb:132: warning: Insecure world writable dir /home/soprojetos/cap/shared/bundle/ruby/1.8/bin in PATH, mode 040777 ** [out :: direct.soprojetos.com.br] rake aborted! ** [out :: direct.soprojetos.com.br] libmysqlclient_r.so.15: cannot open shared object file: No such file or directory - /home/soprojetos/cap/shared/bundle/ruby/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.so ** [out :: direct.soprojetos.com.br] /home/soprojetos/cap/shared/bundle/ruby/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.so ** [out :: direct.soprojetos.com.br] /home/soprojetos/cap/shared/bundle/ruby/1.8/gems/mysql2-0.3.11/lib/mysql2.rb:9 ** [out :: direct.soprojetos.com.br] /home/soprojetos/cap/releases/20130208183759/config/application.rb:14 ** [out :: direct.soprojetos.com.br] /home/soprojetos/cap/releases/20130208183759/Rakefile:5:in`require' ** [out :: direct.soprojetos.com.br] /home/soprojetos/cap/releases/20130208183759/Rakefile:5 ** [out :: direct.soprojetos.com.br] （通过运行查看完整跟踪带有 --trace) 命令的任务在 9957 毫秒内完成 *** [deploy:update_code] 回滚 * 执行 "rm -rf /home/soprojetos/cap/releases/20130208183759; true" 服务器：["direct.soprojetos.com.br"] [direct.soprojetos.com.br] 执行命令命令在 13266 毫秒内完成 ***[pushover:notify_deploy_started] 回滚失败：“env PATH=$PATH:/usr/lib/ruby/gems/1.8/bin/ sh -c 'cd -- /home/soprojetos/cap/releases/20130208183759 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile && cp -- /home/soprojetos/cap/shared/assets/manifest.yml /home/soprojetos/cap/releases/20130208183759/assets_manifest.yml'”在direct.soprojetos.com上。 br`

谁能救我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-19T09:07:54.180

我猜有一个操作系统升级，在某些时候与mysql相关的东西要么被删除要么没有升级。

这在 Ubuntu 16.04.4 上对我有用：

```
gem uninstall mysql2
sudo apt-get install libmysqlclient-dev
gem install mysql2 
```

您可能需要重新启动 apache 或任何给您错误的服务。

请注意，如果你这样做

```
gem uninstall mysql2
gem install mysql2 
```

你的系统应该告诉你需要安装什么才能安装 mysql2 gem，在我的例子中是上面的 apt-get 命令。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T20:08:20.837

尝试换成 mysql2 gem [https://rubygems.org/gems/mysql2](https://rubygems.org/gems/mysql2)

# android - Halo 黑暗主题进度条

> ID：14779418
> 
> 赞同：-2
> 
> 时间：2013-02-08T18:55:20.863
> 
> 标签：android

我想在我的 android 2.3.3 应用程序中使用 android 4.2 Halo 主题 wiggets。我该怎么做。例如[http://japan.widgetfolder.com/uploadfiles/japanwidgetfoldercom-1350092012/list-of-free-holo-themed-apps-for-android_32.jpg](http://japan.widgetfolder.com/uploadfiles/japanwidgetfoldercom-1350092012/list-of-free-holo-themed-apps-for-android_32.jpg)就像这张图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:03:55.893

您可以使用[HoloEveryWhere](https://github.com/ChristopheVersieux/HoloEverywhere)在预 HoneyComb 设备上安装 Holo 主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:58:05.117

阅读精彩的手册：http: [//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

> Android 平台提供了大量可以在应用程序中使用的样式和主题。您可以在 R.style 类中找到所有可用样式的参考。要使用此处列出的样式，请将样式名称中的所有下划线替换为句点。例如，您可以使用“@android:style/Theme.NoTitleBar”应用 Theme_NoTitleBar 主题。

# java - 从 SAX 或 Dom 中的 XML 读取元素内的元素

> ID：14779425
> 
> 赞同：1
> 
> 时间：2013-02-08T18:55:40.807
> 
> 标签：java, xml, dom, sax

```
<rootNode>
    <Movies>
    <Movie id=1>
         <title> title1</title>
         <Actors>
            <Actor>Actor1</Actor>
            <Actor>Actor2</Actor>
         <Actors>
    </Movie>
    </Movies>
    <performers >
        <performer id=100>
             <name>name1</name>
             <movie idref=1/>
        </performer>
    </performers>
</rootNode> 
```

问题1：我只想得到电影下的电影。我尝试了 DOM 和 SAX。它还返回表现不佳的人。如何通过使用 SAX 或 DOM 来避免这种情况

```
DOM:
doc.getElementsByTagName("movie");
SAX:
public void startElement(String uri, String localName,String qName, 
                Attributes attributes) throws SAXException {

        if (qName.equalsIgnoreCase("movie")) 
```

问题2：如何使用DOM或SAX获取元素内的元素（电影下的演员）？

基本上，我想要做的是按顺序输出数据。

```
1,title, Actor1,Actor2
100,name1,1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:34:07.747

```
doc.getElementsByTagName("movies")[0].childNodes; 
```

获取所有`movies/movie`节点（注意小写/大写！）。有关简短教程，请参见此处[http://www.w3schools.com/dom/dom_intro.asp](http://www.w3schools.com/dom/dom_intro.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:03:24.150

[XPath](http://developer.android.com/reference/javax/xml/xpath/package-summary.html)专为这种类型的提取而设计。对于您的示例文件，查询将类似于以下内容。为简单起见，我假设您的 xml 在 a 中`res/raw`，但实际上您需要`InputSource`从您获取 xml 的位置创建。

```
 XPath xpath = XPathFactory.newInstance().newXPath();
    String expression = "/rootNode/Movies/Movie";
    try {
        NodeList nodes = (NodeList) xpath.evaluate(expression, doc,XPathConstants.NODESET);
    } catch (XPathExpressionException e) {
         e.printStackTrace();
    } 
```

# visual-studio-2010 - Visual Studio 2010 MVC 3 中的 HTML 5 验证错误

> ID：14779431
> 
> 赞同：4
> 
> 时间：2013-02-08T18:55:54.430
> 
> 标签：visual-studio-2010, html, html5-audio

我很困惑为什么 Visual Studio 2010 在我的源标记上给我以下验证错误。

> 验证 (HTML5)：元素“源”不能嵌套在元素“音频”中

下面是我在 cshtml 视图中的代码：

```
@{
    ViewBag.Title = "Audio";
    string audioURL = Url.Content("~/Content/Audio/untitled.mp3");
}

<div>
  <audio id ="myAudio" controls preload="auto">  
      <source src="@audioURL" type="audio/mpeg" />   
  </audio> 
</div> 
```

我一直在环顾四周，我看到标签中对多个 src 属性的引用很多。但这并不能回答我的问题，为什么会出现验证错误？是真的正确，但是VS2010认为错误，还是真的不正确，如果是，为什么不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T00:04:36.367

我发现了这个问题，它是 Visual Studio 2010 中的一个错误，查看他们的文档我发现了这个链接 [Web Standards Update for Visual Studio 2010 SP1](http://blogs.msdn.com/b/webdev/archive/2011/06/15/web-standards-update-for-visual-studio-2010-sp1.aspx?PageIndex=2)

这就是他们所说的问题，更新应该可以解决它。

> SP1 中包含的 HTML 5 支持为许多新元素（如视频和源元素）添加了智能感知和验证。但是，存在错误，其中之一是您在视频元素中添加源元素时会看到的错误。此更新已修复此问题，因此您现在还可以获得源元素的智能感知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:09:35.713

它是 audioURL 字符串中的 ~ 字符..

[引用forums.asp.net](http://forums.asp.net/t/1782459.aspx/1?Validation%20HTML5%20Element%20source%20cannot%20be%20nested%20within%20element%20audio%20)上的类似问题

> src 属性中的 ~ 字符不会在 HTML 标记中被识别！
> 
> 除非它是服务器控件，否则您不能使用 tilder 标记转到根级别。使用 .. 转到上层目录等等。这就是您应该如何定义 HTML 控件的相对路径。例如：src="../Mp3/RonaldReaganChallengerAddress.mp3"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:43:52.897

从源 src 属性中删除引号。它已经是一个字符串

```
 <audio id ="myAudio" controls preload="auto">  
      <source src = @audioURL type="audio/mpeg" />   
  </audio> 
```

# c# - 如何覆盖 DependencyProperty windows 8？

> ID：14779433
> 
> 赞同：1
> 
> 时间：2013-02-08T18:56:06.000
> 
> 标签：c#, xaml, windows-8

我正在扩展 TextBox 的功能。如何覆盖 Text DependencyProperty？

我需要在`set`方法中添加一些代码，并且我不能使用 TextChanged 事件，因为我需要在分配之前执行代码。

# c# - 类似“数据库”的对象是否有标准数据结构？

> ID：14779435
> 
> 赞同：1
> 
> 时间：2013-02-08T18:56:10.157
> 
> 标签：c#, database, data-structures

我正在设计对旧 C++ 程序集的升级，并希望（重新）正确执行此操作。

情况是，我有一个基本上是“数据库”的对象（它是经过大量时间步长获取的各种数据位）。问题是我不知道每个“列”在运行时会保留什么。

大约有 30 个列名的可能性。速度是一个主要问题。

旧结构使用一个数组来存储列名（它们是枚举），并使用一个数组数组来保存数据。您将在标题数组中找到列名，然后使用该列索引在当前数据“行”中找到正确的数据位。这是一个完全可行的想法，但似乎有点……过时了。

我会将每个可能的列作为属性包含在“行”对象中，这似乎会大大增加内存使用量和创建时间（这是不可接受的）。

这种东西有标准结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:58:37.340

是的，看看System.Data 命名空间中的[DataSet类。](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)

[DataSet 是DataTables](http://msdn.microsoft.com/en-us/library/system.data.dataset.tables.aspx)、[Relations](http://msdn.microsoft.com/en-us/library/system.data.dataset.relations.aspx)和其他“类似数据库”对象的顶级容器。在 DataTables 中，您可以根据需要定义[列](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.aspx)并填充[行](http://msdn.microsoft.com/en-us/library/system.data.datarow.aspx)。您还可以通过序列化轻松地持久化整个事情。

# java - android中的文本字段

> ID：14779438
> 
> 赞同：0
> 
> 时间：2013-02-08T18:56:16.483
> 
> 标签：java, android, textfield

我希望有人能帮帮忙！我对 android 还很陌生，并且遇到了文本字段的问题。我有 3 个文本字段要求用户输入信息，当单击注册按钮时，一条消息将让用户知道他们已注册并将他们重定向到登录活动。我的问题是我想检查用户是否已完成所有 3 个文本字段，如果没有显示错误消息并允许他们重试。我可以显示错误消息，但即使如果单击 reg 按钮，所有文本字段都不完整，它仍然会告诉用户他们已注册并将用户重定向到登录活动，如果有人能告诉我我出错了，我已经发布了我的代码， 提前致谢！

```
@Override
  public void onClick(View arg0) {
   // TODO Auto-generated method stub
   String data1 = inputName.getText().toString();
        if(data1.trim().equals("")){
            Toast.makeText(RegisterActivity.this, "Please enter your name",
                    Toast.LENGTH_SHORT).show();
}
   String data2 = inputEmail.getText().toString();
        if(data2.trim().equals("")){
            Toast.makeText(RegisterActivity.this, "please enter email address",
                    Toast.LENGTH_SHORT).show();
        }
   String data3 = inputPassword.getText().toString();
        if(data3.trim().equals("")){
            Toast.makeText(RegisterActivity.this, "Please enter a password",
          Toast.LENGTH_SHORT).show();
        }

   if(data1 != null && data2 != null && data3!= null){
   mySQLiteAdapter.insert(data1, data2, data3);
   updateList();
   Toast.makeText(RegisterActivity.this, "You are now registered",
           Toast.LENGTH_SHORT).show();

   startActivity(new Intent(getApplicationContext(), LoginActivity.class));
   inputName.setText("");
   inputEmail.setText("");
   inputPassword.setText("");
  }
        else Toast.makeText(RegisterActivity.this, "Error please try again!",
               Toast.LENGTH_SHORT).show();
  }

   }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T18:59:16.177

这里：

```
if(data1 != null && data2 != null && data3!= null) 
```

那些不是`null`，只是空字符串（`""`）。这总是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:30:20.937

感谢您的有用回答，我想我已经解决了我的问题！希望我的解决方案对其他人有所帮助！

```
@Override
  public void onClick(View arg0) {
   // TODO Auto-generated method stub
   String data1 = inputName.getText().toString();
   String data2 = inputEmail.getText().toString();
   String data3 = inputPassword.getText().toString();

   boolean invalid = false;

    if(data1.equals("")){
        invalid = true;
        Toast.makeText(getApplicationContext(), "Username Missing", Toast.LENGTH_SHORT).show();
    }else if(data2.equals("")){
        invalid = true;
        Toast.makeText(getApplicationContext(), "Email ID Missing", Toast.LENGTH_SHORT).show();
    }else if(data3.equals("")){
        invalid = true;
        Toast.makeText(getApplicationContext(), "Password Missing", Toast.LENGTH_SHORT).show();
    }

    if(invalid == false){
        mySQLiteAdapter.insert(data1, data2, data3);
           updateList();
           Toast.makeText(RegisterActivity.this, "You are now registered",
                   Toast.LENGTH_SHORT).show();

        Intent i_register = new Intent(RegisterActivity.this, LoginActivity.class);
        startActivity(i_register);

        inputName.setText("");
        inputEmail.setText("");
        inputPassword.setText("");
        finish();
    }   

   /*mySQLiteAdapter.insert(data1, data2, data3);
   updateList();
   Toast.makeText(RegisterActivity.this, "You are now registered",
           Toast.LENGTH_SHORT).show();

   startActivity(new Intent(getApplicationContext(), LoginActivity.class));*/

  }

   }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:07:06.623

你也可以使用`TextUtils.isEmpty(string)`

```
 if (!TextUtils.isEmpty(data1) && !TextUtils.isEmpty(data2) && !TextUtils.isEmpty(data2)) {
        Log.d(TAG, "All three Strings are not empty or null!");
    } 
```

# c# - 在 CSV 中显示逗号而不使用逗号字符

> ID：14779442
> 
> 赞同：6
> 
> 时间：2013-02-08T18:56:30.677
> 
> 标签：c#, csv, character-replacement

我有一个**CSV 格式的日志，**我们为某个日志记录操作写出。但是，其中一个字段允许**用户输入**，我需要确保*如果他们在字段中输入逗号，我们会将其解析出来并将其替换为*Excel 将能够读取并在其中显示逗号的内容位置（因此 csv 阅读器不会认为它是列的结尾）。

目前我将逗号替换为，`&#44;`但这在 Excel中**显示为文字字符串。**

是否有一种标准方法可以在不使用实际逗号字符的情况下在 CSV 文件中显示逗号？即使是仅适用于 excel 的解决方案也可以使用，因为我们的大多数客户将使用 Excel 来查看此文件。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T18:59:27.933

处理嵌入逗号的最佳方法是正确引用 CSV 文件：

*   应引用包含逗号的列
*   包含引号的带引号的列应该对引号进行转义

例子：

> 乔·史密斯，“小乔·史密斯”，“乔”“男人”“小史密斯”

我写了一个扩展方法来帮助解决这个问题：

```
static public string CsvQuote(this string text)
{
    if (text == null) return string.Empty;

    bool containsQuote = false;
    bool containsComma = false;
    int len = text.Length;

    for (int i = 0; i < len && (containsComma == false || containsQuote == false); i++)
    {
        char ch = text[i];
        if (ch == '"')
        {
            containsQuote = true;
        }
        else if (ch == ',' || char.IsControl(ch))
        {
            containsComma = true;
        }
    }

    bool mustQuote = containsComma || containsQuote;

    if (containsQuote)
    {
        text = text.Replace("\"", "\"\"");
    }

    // Quote the cell and replace embedded quotes with double-quote or just return as is
    return mustQuote ? "\"" + text + "\"" : text;
} 
```

**用法：**

```
logger.Write(myString.CsvQuote());

var csv = string.Join(",", listOfStrings.Select(CsvQuote)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:02:59.610

Including your string inside of quotation marks will let you use commas.

`"please sir,", can I, have some more?`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T18:59:49.753

CSV 也是“字符分隔值”，而不仅仅是逗号。

您可以使用任何字符作为分隔符，但`tab`or`\t`被广泛用于此，因为它通常不用于用户输入。

CSV 的 RFC 是[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)

它建议使用数据字段和字段分隔符。这里是原文，请注意（5）中Microsoft Excel的特殊部分

> ```
> 5\.  Each field may or may not be enclosed in double quotes (however
>    some programs, such as Microsoft Excel, do not use double quotes
>    at all).  If fields are not enclosed with double quotes, then
>    double quotes may not appear inside the fields.  For example:
> 
>    "aaa","bbb","ccc" CRLF
>    zzz,yyy,xxx
> 
> 6\.  Fields containing line breaks (CRLF), double quotes, and commas
>    should be enclosed in double-quotes.  For example:
> 
>    "aaa","b CRLF
>    bb","ccc" CRLF
>    zzz,yyy,xxx
> 
> 7\.  If double-quotes are used to enclose fields, then a double-quote
>    appearing inside a field must be escaped by preceding it with
>    another double quote.  For example:
> 
>    "aaa","b""bb","ccc" 
> ```

另请注意，Excel 开箱即用地识别 Tab

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T19:01:09.723

You can put a quotes around the entire field. Most CSV parsers will understand that the comma is part of the data and not the end of the field.

Or use a different separator. This will require you use the text import wizard in Excel instead of just being able to open the file directly. I typically use`~` or `|`.

# sql - 如何在sql server中对一个非常大的表的非索引字段执行高效搜索

> ID：14779450
> 
> 赞同：2
> 
> 时间：2013-02-08T18:56:57.520
> 
> 标签：sql, sql-server, search, indexing

我有一个非常大的表，上面只有 6 个字段。行数大约为 2000 万。我有一个包含一个整数字段的聚集索引。但是，有一个我经常需要搜索的 nvarchar(max) 字段（不一定是唯一的，但永远不会为空），问题是我无法在其上建立索引，因为 SQL 对索引大小有最大限制。我有什么解决这个问题的选择？我对 SQL 不太熟悉，所以请避免使用技术术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:01:46.823

听起来您需要使用[全文搜索](http://msdn.microsoft.com/en-us/library/ms142571.aspx)：

> SQL Server 中的全文搜索允许用户和应用程序对 SQL Server 表中基于字符的数据运行全文查询。
> 
> ...
> 
> 这些列可以具有以下任何数据类型：`char`, `varchar`, `nchar`, `nvarchar`, `text`, `ntext`, `image`, `xml`, 或`varbinary(max)`

您不仅需要全文索引才能将索引添加到大文本列……而且如果您要搜索这一大块文本以查找部分匹配项，例如搜索特定单词或在大文档中间的短语中，普通索引将毫无用处，因为`WHERE TextField LIKE '%Specific word or phrase%'`搜索中的前导通配符（即 ）会阻止使用非全文索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T21:48:29.020

没有索引的搜索效率不高。

`char, varchar, nvarcahr`可以对列进行全文搜索。但是，如果您创建全文索引，它总是会更好。

它在某些列上没有索引的原因是允许全文搜索的扩展功能：语义、单词距离、停用词等。

# c# - C# DLL 可以调用调用本机 C++ 静态库的 C++/CLI 托管包装器吗？

> ID：14779460
> 
> 赞同：0
> 
> 时间：2013-02-08T18:57:40.423
> 
> 标签：c#, c++, dll

我遇到了一个 DLL 异常：

```
 response threw exception: Could not load file or assembly  or one of its dependencies. An attempt was made to load a program with an incorrect format. 
```

我有以下 DLL/库组合的所有源代码。我想弄清楚我是否有一个奇怪的组合或者我需要检查什么以确保它运行。我在一个静态库中有一个本机 C++ 代码，它由受管理的 C++ CLR 支持的 DLL 调用。在接下来的点之前，一切似乎都运行良好。

我创建了一个测试 C# EXE 控制台应用程序来调用托管 C++ CLR 支持的 DLL。这按预期工作。当有一个 C# 类库调用这个相同的托管 C++ CLR 支持的 DLL 时引发异常的区别。这是完全支持还是这是引发异常的原因？如果此组合不正确，是否有任何解决方法可以让 C# 类 DLL 调用托管的 C++ CLR 支持的 DLL。

一切都是使用带有 Visual Studio 2012 的 Windows 7 64 位创建的。所有项目都处于发布模式，并选择了 x64 位平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:04:13.693

在我见过的每种情况下，这都是 32 位 C# 应用程序试图加载 64 位 C++ 或 C++/CLI DLL 或 64 位 C# 应用程序试图加载 32 位 C++ 或 C++/命令行 DLL。

我通常采取的下一步是使用 Dependency Walker 加载 C++/CLI dll。Dependency walker 将向您显示您的 DLL 尝试加载的 DLL。在某些情况下，我有一个与 64 位 DLL 同名的 32 位 DLL 首先出现在路径中，因此它会尝试加载错误的 DLL。

请注意，Dependency Walker 将在 64 位 DLL 旁边的图标上显示 64，并将显示一条消息，如下所示：“错误：找到具有不同 CPU 类型的模块。” 在底部的信息框中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:59:56.907

我最好的选择是 c++ dll 编译为 win32 你的 c# dll 设置为任何 CPU 并且你在 64 位系统上运行......

# r - R中的相对频率问题

> ID：14779465
> 
> 赞同：2
> 
> 时间：2013-02-08T18:57:54.597
> 
> 标签：r

我想在 R 中绘制这些数据的相对频率直方图：

0.1575850 0.1378830 0.1462112 0.1303224 0.3538677 0.2497142 0.2359662 0.1647894 0.1861195 0.3957871 0.2135463 0.1584121 0.1690736 0.4232640 0.2058885 0.1615527 0.3250968 0.1529143 0.5984977 0.2334365 0.2141899 0.1495538

我想将 seq(0,1,0.2) 用于参数“breaks”，并设置 freq=FALSE 来获取 DENSITY（而不是计数）图。根据 hist 函数帮助的说明，我希望相对频率直方图的总面积（或 $density 的总和）等于 1，但我得到的是：

> cc$密度[1] 2.5000000 2.0454545 0.4545455 0.0000000 0.0000000

对可能发生的事情有什么建议吗？我尝试使用 {lattice} 的直方图函数，直方图看起来不错，但我无法使用常规参数（cex.lab 和 cex.axis）更改标签和轴测试的大小。

感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:39:11.370

**提示**：`sum(cc$density) == 5`和`5 * 0.2 == 1`。（你可以在这里停止阅读，或者......）

要计算条形图曲线下的面积，您必须将每个条的高度（这是`cc$density`给您的）乘以每个条的宽度，在您的情况下为 0.2。

# ruby-on-rails - 如何在 Serel gem 中添加 body 参数（stackoverflow api）

> ID：14779466
> 
> 赞同：3
> 
> 时间：2013-02-08T18:57:57.437
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, stackexchange-api

实际上，当我尝试使用 serel gem（它是 stackoverflow api 的 ruby​​ 包装器）访问问题时，我得到一个没有包含正文参数的对象。

```
questions = Serel::Question.find(id) 
```

请参阅[http://api.stackoverflow.com/1.1/usage/methods/questions-by-ids](http://api.stackoverflow.com/1.1/usage/methods/questions-by-ids)。据此，我们需要将body参数设为true。

如何将参数“body”设为真。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:16:56.333

所以我终于想通了，这应该对你有用：

```
Serel::Question.filter(:withbody).find(id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:05:27.540

尝试这个：

```
 questions = Serel::Question.find(id).body.get 
```

# javascript - 外部网页的 HTML 源代码作为字符串

> ID：14779467
> 
> 赞同：0
> 
> 时间：2013-02-08T18:57:57.550
> 
> 标签：javascript, html, ajax

我网站上的用户将在`textbox`. 我想将该页面的 HTML 源代码作为字符串获取。如何使用客户端脚本来做到这一点？

以下是我为加载 url 所做的事情。但无法弄清楚如何获取 html。

```
<!DOCTYPE html>
<head>
<script>
function myFunction()
{
document.getElementById("site").src=document.getElementById("web").value;
}
</script>
</head>
<body> 
<input id="web" type="text" name="user">
<input type="submit" value="Submit"  onclick="myFunction()"> <br/>
<iframe id="site" src="" width="1200" height="1200"></iframe>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:00:00.743

在您的服务器上创建一个脚本，并使用 AJAX 调用它，然后`cURL`像这样使用：

```
 $ch = curl_init();
 $timeout = 10;
 curl_setopt($ch, CURLOPT_URL, $url);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);

 $data = curl_exec($ch);

 curl_close($ch); 
```

并将`$data`包含内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T19:09:01.693

[由于同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)，我担心您网站上的 javascript 无法访问其他网站的源代码。这是为了防止[跨站点脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)攻击。例如，如果用户登录了他们的电子邮件帐户，同源策略会阻止在同一浏览器中打开的其他网站尝试访问您的电子邮件。

你最好的选择是：

*   通过 AJAX 将 url 发送到您的应用程序服务器
*   从您的应用程序服务器执行 HTTP GET（在 Java / PHP 等中）
*   用对方网站的文字回复AJAX请求
*   然后向您的用户显示源代码

# iphone - iPhone 4 与 iPhone 5 TestFlight 问题

> ID：14779475
> 
> 赞同：1
> 
> 时间：2013-02-08T18:58:23.100
> 
> 标签：iphone, xcode, distribution, testflight

通过 TestFlight 分发构建。临时构建在 iPhone 5 上运行良好，但会在 iPhone 4 和 4s 上打开然后崩溃。如果通过 Xcode 编译和运行（直接到带有开发配置文件的电话），则构建在 iPhone 5、4s 和 4 上运行。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:27:33.170

调试 testflight 错误（或任何其他错误）的第一件事是获取错误日志，并阅读和理解错误消息。在这种情况下，错误是：

```
failed to launch in time 
```

如果您的应用程序在一定时间内没有完成启动（我相信这基本上是从该`application:DidFinishLaunchingWithOptions:`方法返回），它就会被系统杀死。要么你有一个无限循环，要么你试图在该方法中做太多事情。在这种情况下，应用程序以该方法缓存图像，这显然足以在 iPhone 5 上及时完成，但不是更早的。解决方案是将在后台缓存图像的`dispatch_async`调用（参见[Dispatch Queues ）排队，并从应用程序启动方法快速返回。](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)

# android - 这些方法是否返回永久值？

> ID：14779478
> 
> 赞同：0
> 
> 时间：2013-02-08T18:58:26.257
> 
> 标签：android

`activity.getPreferences(mode)``sharedPreferences.edit()` 我可以这样做吗？

（在一些活动课上）：

```
//...
private SharedPreferences pref;
private Editor editor;

onCreate() {
    pref = getPreferences(Activity.MODE_PRIVATE);
    editor = pref.edit();
}

onDestroy() {
    int someSavedInt = pref.getInt("SomeInt", 0);
    editor.putInt("SomeInt", someSavedInt * 2);
}
//... 
```

或者总是在使用之前我应该​​得到`pref`and的值`editor`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:03:18.343

您也可以创建共享偏好的静态变量。或者每次都能拿到，两者都很好。

请记住，您必须`editor.commit();`始终保存/提交这些值。

# html - 为什么锚标签适用于图像的某些区域？

> ID：14779480
> 
> 赞同：-2
> 
> 时间：2013-02-08T18:58:35.033
> 
> 标签：html, css, wordpress

我正在做一个项目[http://www.node.au.com/](http://www.node.au.com/) 我面临的问题是我有一个徽标图像，周围有一个锚标签，但是当我将鼠标悬停在徽标上时，它仅适用于左侧区域但不是整个图像我搜索了很多解决方案，但没有人可以将解决方案发送给我。

请将鼠标悬停在图像的左侧并提前查看问题非常感谢。

这是代码：

```
<a  href="<?php echo get_option('home'); ?>"><img style="margin-left:-17px;margin-top:20px;"src="http://www.node.au.com/wp-content/themes/folio-two/images/main-logo.png" alt="NODE &ndash; 3D Visualisation"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:14:59.310

```
use this class on logo image

.logo {
    cursor: pointer;
    display: block;
    margin-left: -17px;
    margin-top: 20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:07:53.693

2件事：1.添加“显示：块；” 到标签，这将允许它与其中的图像一样大。2\. （菜单）覆盖它，使其无法点击。去掉margin-top: -130px，你就可以正常点击了。

不过，我不知道为什么 UL 的顶部有这么多空间。看起来您无论如何都不需要 UL，并且可以只使用 div，因为其中只有一个 li 元素。

-朱利安

# c++ - 用GPU计算小于某个值的像素数

> ID：14779483
> 
> 赞同：1
> 
> 时间：2013-02-08T18:58:45.840
> 
> 标签：c++, image, directx, gpu

假设您有一个 2D GPU 纹理资源。使用 GPU（使用 DirectX，有或没有着色器）计算小于某个值的纹素数量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:40:48.843

你可以用两个着色器来计算这个。

1.  将所有 rgb 值替换为 1 或 0，具体取决于值如何超过阈值。

2.  使用过滤器内核逐步减小纹理的大小，该过滤器内核汇总了纹素。假设您的纹理大小为 64x64。首先你把它缩小到 32x32 并总结输入纹理的 4 个相关纹素。重复直到您拥有 4x4 或 8x8 纹理并将其锁定在 CPU 端并将其余部分相加。结果是您想要的 texelcount。您可以使用更大的内核（如 4x4）来减少绘制调用并将更多工作转移到着色器上。

# tfs - TFS 部署到 Azure 多个预留实例网站 - 部署期间站点是否不可用？

> ID：14779484
> 
> 赞同：0
> 
> 时间：2013-02-08T18:58:48.670
> 
> 标签：tfs, msbuild, web-deployment, azure-web-app-service

我有一个关于部署到 Azure 网站的问题，希望有人能提供帮助。

假设我在 Azure 上以保留模式运行我的大型网站，并使用 3 个实例进行扩展。我们链接 TFS 发布，因此我们可以将构建排队并自动部署到服务器。

我的问题是：对于多个预留实例服务器，部署是否在幕后做了一些聪明的事情以确保站点永远不会关闭 - 例如在将其从池中删除然后将其放回池中后一次部署到一台服务器? 或者如果部署需要几分钟时间，是否所有三台服务器同时停机？如果是这样，在不关闭站点的情况下将更新部署到实时 Azure 网站服务器的最佳做法是什么——尽管是短暂的？

背景 - 我们正处于 Azure 的研发阶段，计划将我们的电子商务网站从内部托管转移到 Azure。到目前为止，我们已经在云服务上运行了很多测试，并且喜欢发布到登台的简单方法，然后能够快速地从登台切换到发布。但是，如果可能，我们更愿意使用网站，因为它们消除了使用云服务的一些缺点。但是，我们不能在每次发布期间让我们的网站停机——即使只是一小段时间。

希望有人可以帮助或指出我们正确的方向！

谢谢，

理查德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:27:25.083

您是否看过 Nir ​​Mashkowski 的 TechEd 视频，它深入探讨了 WAWS 的工作原理。您可以在 Channel 9 上找到它。在他的会议中，他谈到了每个请求所经过的存储和域解析过程。

[http://channel9.msdn.com/Events/TechEd/Europe/2012/AZR305](http://channel9.msdn.com/Events/TechEd/Europe/2012/AZR305)

他也在 Web Camps TV 上讨论了这个问题，在这里：[http ://channel9.msdn.com/Shows/Web+Camps+TV/Windows-Azure-Web-Sites-Internals-with-Nir-Mashkowski](http://channel9.msdn.com/Shows/Web+Camps+TV/Windows-Azure-Web-Sites-Internals-with-Nir-Mashkowski)

这些文件实际上并未在每个预留实例中复制。相反，您的文件*存储*在 WAZ Storage 的驱动器中，然后从实例中提供这些*文件*。如果实例出现问题、过载或在最典型的情况下（当您想要扩展到多个实例时），这就是如何轻松复制站点的方式。

因此，当您的代码发布时，它实际上只*落在*一个驱动器上，然后从实例中提供服务。Nir 的谈话比我的描述做得更好，所以请查看更深入的细节。

# python - 诅咒Windows的替代品

> ID：14779486
> 
> 赞同：41
> 
> 时间：2013-02-08T18:59:01.260
> 
> 标签：python, curses

python 有没有其他的curses模块可以在windows中使用？我在 python 文档中查找，但其中提到它用于在 unix 中使用。我对这些不太熟悉，所以有没有办法在 windows 中使用 curses 模块，或者有一些专门用于 windows 的类似模块？[我正在使用 Python 3.3]

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-11-08T03:50:21.040

我很高兴地报告，现在有一个 Windows 版本的 Curses 可作为 Windows 上的 Python 的扩展，来自[这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/#curses)。（不是我写的，也不知道是谁维护的。）

您可以运行安装程序，并`import curses`让 curses 运行。（已在 64 位 Windows 7 和 Windows 8 上验证。）

@ArtOfWarfare 指出，您可以通过 Pip 安装它，并带有以下推荐：

```
pip install http://www.lfd.uci.edu/~gohlke/pythonlibs/xugyqnq9/curses-2.2-cp27-none-win32.whl 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-09-03T20:50:56.113

最初的问题是在 Windows 上是否有*替代*诅咒的方法。

一种答案是使用[Win32 控制台 API](https://msdn.microsoft.com/en-gb/library/windows/desktop/ms682073(v=vs.85).aspx)。如果您已经熟悉控制台 API，则可以使用出色的 pywin32 包直接在 Python 中进行编程。

但是，我发现这对于我最近的项目来说太低了。我也不太热衷于强迫我的用户构建/安装 PDcurses，此外，我还发现对于像 Python 这样的现代 OO 语言来说，curses 的级别太低了。

因此，我整合了一个高级跨平台 API 来完成大多数人想要从他们的终端/控制台完成的所有事情。[asciimatics](https://github.com/peterbrittain/asciimatics)包将满足您的大部分输入和输出需求。如果您使用的是 Linux，这是一种更人性化的 curses 编程方式。如果您在 Windows 上，则相同的类可以正常工作，没有外部二进制依赖项。请参阅下面的示例屏幕截图：

[![样本输出](../Images/643b73bf92cad43b204cdff084ecc883.png)](https://i.stack.imgur.com/QmnFJ.png)

您可以在[图库](https://github.com/peterbrittain/asciimatics/wiki)中找到许多其他可用的效果和小部件，但如果您需要额外的功能，请告诉我，我会看看我能做些什么。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-08T19:08:40.723

那你恐怕就不​​走运了。没有真正的跨平台版本或curses / ncurses端口，有一个“对话”端口可以工作，但功能有限。

最好的办法是运行 CygWin 或 MinGW32，用“松散的术语”来说，两者都是 Linux 系统+终端仿真器，其中包含您需要的许多二进制文件。他们可以在终端内运行本机 Linux/Unix 二进制文件并随时访问您的“主机”系统文件，所以这就像用一个踢屁股的终端为 Windows 打补丁，里面装满了您来自 Linux 世界的所有好东西。你仍然需要一些 Linux 的基本知识以及命令等如何工作，但你会弄明白的。

![MinGW 和 CygWin 的截图](../Images/4daa280f3de34fa3dd21e895dc6628b9.png)

## 这是一个 Pyglet GUI 示例：

```
import pyglet
from pyglet.gl import *

class main (pyglet.window.Window):
    def __init__ (self):
        super(main, self).__init__(800, 600, fullscreen = False)
        self.button_texture = pyglet.image.load('button.png')
        self.button = pyglet.sprite.Sprite(self.button_texture)

        ## --- If you'd like to play sounds:
        #self.sound = pyglet.media.load('music.mp3')
        #self.sound.play()

        self.alive = 1

    def on_draw(self):
        self.render()

    def on_close(self):
        self.alive = 0

    def on_mouse_press(self, x, y, button, modifiers):
        if x > self.button.x and x < (self.button.x + self.button_texture.width):
            if y > self.button.y and y < (self.button.y + self.button_texture.height):
                self.alive = 0

    def on_key_press(self, symbol, modifiers):
        if symbol == 65307: # [ESC]
            self.alive = 0

    def render(self):
        self.clear()
        self.button.draw()
        self.flip()

    def run(self):
        while self.alive == 1:
            self.render()

            # -----------> This is key <----------
            # This is what replaces pyglet.app.run()
            # but is required for the GUI to not freeze
            #
            event = self.dispatch_events()

x = main()
x.run() 
```

这是该代码的输出：

![在此处输入图像描述](../Images/551c996922c4dc396c9e34038db6c92b.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-06T15:03:09.160

以下是如何通过 pip[在他们的答案中安装ashes999 链接的内容：](https://stackoverflow.com/a/19851287/901641)

```
pip install http://www.lfd.uci.edu/~gohlke/pythonlibs/xugyqnq9/curses-2.2-cp27-none-win32.whl 
```

这可能应该被添加到 PyPI 以使 pip 安装更加容易（因此它可以通过名称而不是 URL 安装。）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-09-24T13:30:43.013

你可以试试这个。我曾经为此做过Win64端口（在那里合并）。但是，您需要编写一些不同的 Python 代码。这会将所有 curses 调用重定向到 UNIX 上的本机 Python 版本，但在 Windows 上调用 PDCURSES.DLL（单独下载 DLL）。据我记得它支持unicode：

[http://sourceforge.net/projects/pyunicurses/](http://sourceforge.net/projects/pyunicurses/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-06-04T15:51:17.890

这不是一个新的解决方案，只是对前一个解决方案的编辑。

如果*pip*命令出现 404 错误，您可以尝试从[http://www.lfd.uci.edu/~gohlke/pythonlibs/#curses](http://www.lfd.uci.edu/~gohlke/pythonlibs/#curses)下载数据包 ，然后编写类似

```
pip install C:\..packetPath..\curses-2.2-cp35-none-win_amd64.whl 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-02T18:11:42.683

官方文档提出以下建议（[在](https://docs.python.org/3.3/howto/curses.html#what-is-curses)段落底部）：

> Windows 版本的 Python 不包含[curses](https://docs.python.org/3.3/library/curses.html#module-curses)模块。有一个名为[UniCurses](https://pypi.python.org/pypi/UniCurses)的移植版本可用。您还可以尝试Fredrik Lundh 编写[的 Console 模块](http://effbot.org/zone/console-index.htm)，它不使用与 curses 相同的 API，但提供光标可寻址的文本输出和对鼠标和键盘输入的完全支持。

# c# - 如何过滤递归对象？

> ID：14779487
> 
> 赞同：5
> 
> 时间：2013-02-08T18:59:01.567
> 
> 标签：c#

在我当前的项目中，我无法控制的方法向我发送了一个此类对象：

```
public class SampleClass
{
    public SampleClass();

    public int ID { get; set; }
    public List<SampleClass> Items { get; set; }
    public string Name { get; set; }
    public SampleType Type { get; set; }
}

public enum SampleType
{
    type1,
    type2,
    type3
} 
```

我在 a 中显示这些数据`TreeView`，但我只想显示以属性设置为的`SampleClass`对象结尾的路径，无论这片叶子的深度如何。`Type``type3`

我完全不知道该怎么做，有人可以帮助我吗？

提前致谢 ！

# 编辑

为了解释我在 Shahrooz Jefri 和 dasblinkenlight 提出的解决方案中遇到的问题，这里有一张图片。左列是原始数据，没有过滤，右列是过滤后的数据。两种方法提供相同的结果。红色是问题所在。

![在此处输入图像描述](../Images/591c65f3cbd3d736944a1b0cb88168c1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:55:39.910

使用此过滤器方法：

```
public void Filter(List<SampleClass> items)
{
    if (items != null)
    {
        List<SampleClass> itemsToRemove = new List<SampleClass>();

        foreach (SampleClass item in items)
        {
            Filter(item.Items);
            if (item.Items == null || item.Items.Count == 0)
                if (item.Type != SampleType.type3)
                    itemsToRemove.Add(item);
        }

        foreach (SampleClass item in itemsToRemove)
        {
            items.Remove(item);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:37:12.710

除了最初确定要显示哪些项目之外，如果数据量很大并且您希望用户经常折叠和展开部分，那么在每次点击后过滤我会导致缓慢的 ui 响应。

考虑使用装饰器模式或使用相关信息标记每个节点的其他方式，以便在每次单击后不需要过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:12:22.400

试试这个方法：

```
static bool ShouldKeep(SampleClass item) {
    return (item.Type == SampleType.type3 && item.Items.Count == 0)
        || item.Items.Any(ShouldKeep);
}

static SampleClass Filter(SampleClass item) {
    if (!ShouldKeep(item)) return null;
    return new SampleClass {
        Id = item.Id
    ,   Name = item.Name
    ,   Type = item.Type
    ,   Items = item.Items.Where(ShouldKeep).Select(x=>Filter(x)).ToList()
    };
} 
```

上面的代码假设`Items`叶子是空列表，而不是`null`s。

# sql - Sql Server 将自然键转换为代理键

> ID：14779492
> 
> 赞同：1
> 
> 时间：2013-02-08T18:59:22.130
> 
> 标签：sql, sql-server, sql-server-2008-r2, data-warehouse, business-intelligence

我正在尝试找到一种方法来将我正在导入的某些数据上的自然键转换为某种代理键。

例子：

假设我有一个名为的表`OrderFact`，其中包含有关我的订单的所有信息：

```
CREATE TABLE OrderFact
(
     Id INT IDENTITY PRIMARY KEY
    ,OrderId INT NOT NULL
    ,Amount INT NOT NULL
    ,Cost MONEY NOT NULL
    ,SaleDate DATE NOT NULL
);
GO    

INSERT INTO OrderFact (OrderId, Amount, Cost, SaleDate)
VALUES (1, 2, 12.00, '1/1/2012'), (3, 1, 6.00, '12/29/2011'), (4, 5, 1.00, '1/1/2012'); 
```

现在我从一些供应商的 POS 系统中获取所有订单数据，所以我的暂存表如下所示：

```
CREATE TABLE OrderStaging
(
     OrderId INT
    ,Vendor INT
    ,Amount INT
    ,Cost MONEY
    ,SaleDate DATE
);
GO

INSERT INTO OrderStaging (OrderId, Vendor, Amount, Cost, SaleDate)
VALUES (1, 1, 2, 12.00, '1/1/2012'), (3, 2, 1, 6.00, '12/29/2011'), (4, 1, 5, 1.00, '1/1/2012'); 
```

现在我不关心谁在下订单，但我想跟踪同一供应商在同一天下的订单，因为它们算作`Bulk Order`我应用特别折扣的订单。

有没有一种方法可以构建数据库，以便我可以跟踪哪些订单是批量订单，有效地将 , 的自然键`Vendor`转换`SaleDate`为某种代理键，以便我可以查找`OrderFact.Id`它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:32:40.983

我最终创建了一个`RelatedOrder`表，其中代理键作为主键，自然键作为其列。然后，我创建了一个表，用于将 a by`RelatedOrderMapping`映射到 Fact 表。示例（用于 SQL Server 2008 R2 的 T-SQL）：`RelatedOrder``OrderId`

```
--Create our RelatedOrder table which contains the Natural Key as its columns
CREATE TABLE RelatedOrder
(
     Id INT IDENTITY PRIMARY KEY
    ,VendorId INT NOT NULL
);
GO

--Create our mapping table for linking OrderFact to RelatedOrder
CREATE TABLE RelatedOrderMapping
(
     Id INT IDENTITY PRIMARY KEY
    ,RelatedOrderId INT NOT NULL REFERENCES RelatedOrder (Id)
    ,OrderFactId INT NOT NULL REFERENCES OrderFact (Id)
    ,OrderId INT NOT NULL
);
GO

--Insert one instance of each VendorId
INSERT INTO RelatedOrder (VendorId)
SELECT DISTINCT VendorId FROM OrderStaging;
GO

--Create a temp table to hold our output clause
CREATE TABLE #RelatedOrder
(
     Id INT IDENTITY PRIMARY KEY
    ,RelatedOrderId INT NOT NULL REFERENCES RelatedOrder (Id)
    ,OrderFactId INT NOT NULL REFERENCES OrderFact (Id)
    ,OrderId INT NOT NULL
);
GO

--Create our precomputed table to speed up the MERGE
CREATE TABLE #OrderStaging
(
     OrderId INT NOT NULL
    ,Amount INT NOT NULL
    ,Cost MONEY NOT NULL
    ,SaleDate DATE NOT NULL
    ,RelatedOrderId INT NOT NULL
);
GO

--Precompute our MERGE statement
INSERT INTO #OrderStaging(OrderId, Amount, Cost, SaleDate, RelatedOrderId)
SELECT OrderId, Amount, Cost, SaleDate, RelatedOrderId
FROM OrderStaging os
JOIN RelatedOrder ro
ON ro.VendorId = os.VendorId

--Insert our data into the fact table and output the result into our #RelatedOrder
MERGE OrderFact AS [Target]
USING #OrderStaging AS [Source]
ON 1 = 0
WHEN NOT MATCHED BY TARGET THEN
    INSERT(OrderId, Amount, Cost, SaleDate)
    VALUES([Source].OrderId, [Source].Amount, [Source].Cost, [Source].SaleDate)
    OUTPUT Inserted.Id, [Source].OrderId, [Source].RelatedOrderId
    INTO #RelatedOrder(OrderFactId, OrderId, RelatedOrderId)
;

--Insert our mappings
INSERT INTO RelatedOrderMapping(RelatedOrderId, OrderFactId, OrderId)
SELECT RelatedOrderId, OrderFactId, OrderId FROM #RelatedOrder;
GO

--Done 
```

# c# - 如何从数据中“下载”：URI？

> ID：14779497
> 
> 赞同：2
> 
> 时间：2013-02-08T18:59:34.777
> 
> 标签：c#, .net, data-uri

`WebClient`我有一个 data: URI，我需要使用普通的 .Net / “下载”（读取：作为流或字节数组加载）`WebRequest`。我怎样才能做到这一点？

我需要这个，因为我想显示一个从 SVG 生成的 XAML 文件，其中包括一些使用 data: URI 的图像。我不想总是解析 XAML，将图像保存到磁盘，然后将 XAML 更改为指向文件。我相信 WPF`WebRequest`在内部使用来获取这些图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T18:59:34.777

你可以用它[`WebRequest.RegisterPrefix()`](http://msdn.microsoft.com/en-us/library/system.net.webrequest.registerprefix.aspx)来做到这一点。您将需要实现`IWebRequestCreate`返回一个 custom`WebRequest`并返回一个 custom `WebResponse`，它最终可用于从 URI 获取数据。它可能看起来像这样：

```
public class DataWebRequestFactory : IWebRequestCreate
{
    class DataWebRequest : WebRequest
    {
        private readonly Uri m_uri;

        public DataWebRequest(Uri uri)
        {
            m_uri = uri;
        }

        public override WebResponse GetResponse()
        {
            return new DataWebResponse(m_uri);
        }
    }

    class DataWebResponse : WebResponse
    {
        private readonly string m_contentType;
        private readonly byte[] m_data;

        public DataWebResponse(Uri uri)
        {
            string uriString = uri.AbsoluteUri;

            int commaIndex = uriString.IndexOf(',');
            var headers = uriString.Substring(0, commaIndex).Split(';');
            m_contentType = headers[0];
            string dataString = uriString.Substring(commaIndex + 1);
            m_data = Convert.FromBase64String(dataString);
        }

        public override string ContentType
        {
            get { return m_contentType; }
            set
            {
                throw new NotSupportedException();
            }
        }

        public override long ContentLength
        {
            get { return m_data.Length; }
            set
            {
                throw new NotSupportedException();
            }
        }

        public override Stream GetResponseStream()
        {
            return new MemoryStream(m_data);
        }
    }

    public WebRequest Create(Uri uri)
    {
        return new DataWebRequest(uri);
    }
} 
```

这仅支持 base64 编码，但可以轻松添加对 URI 编码的支持。

然后你像这样注册它：

```
WebRequest.RegisterPrefix("data", new DataWebRequestFactory()); 
```

是的，这确实适用于检索数据：XAML 文件中的图像。

# php - 带有可选文件上传字段的 Codeigniter-form 意外工作

> ID：14779501
> 
> 赞同：0
> 
> 时间：2013-02-08T18:59:51.047
> 
> 标签：php, forms, codeigniter

我有一个表格，要求提供用户名和描述以及一个可选的图像上传字段。当用户上传图像时，我希望更改图像名称并将其存储到数据库中，如果没有上传图像，则将默认名称存储在数据库中。如果用户上传图像，它可以正常工作，但如果他不上传，则不会将任何内容上传到数据库中。这是控制器功能：

```
function store()
{
    $this->load->model('campus_m');
    $config['upload_path'] = './uploads/';
    $config['allowed_types'] = 'gif|jpg|png|jpeg';
    $config['max_size'] = '100';
    $config['max_width']  = '1024';
    $config['max_height']  = '768';
    $config['file_name'] = preg_replace('/[^a-z0-9]+/i','-',iconv('UTF-8','ASCII//TRANSLIT',$this->input->post('name')));
    $config['file_name'] = trim($config['file_name'],'-').now().'.jpg';                         

    $this->load->library('upload', $config);

    $this->load->helper(array('form', 'url'));

    $this->load->library('form_validation');

    $this->form_validation->set_rules('goods', 'Goods', 'required');
    $this->form_validation->set_rules('name', 'Name', 'required|max_length[12]');
    if ($this->form_validation->run() == FALSE)
    {
        $this->load->view('campus_write_v');
    }
    else
    {
        print_r($_FILES['userfile']);
        if (empty($_FILES['userfile'])) {
            if(!$query = $this->campus_m->create_review("Marla-overdoses1360186300.jpg")){
                $data['write_campus'] = 'The answer has not been stored.';
                $this->load->view('campus_write_v', $data);
            }
            else {
                $data['write_campus'] = 'The answer has been stored. ';
                $this->load->view('campus_write_v', $data);
            }   
        }
        else
        {
            if($this->upload->do_upload()){
                if(!$query = $this->campus_m->create_review($config['file_name'])){
                    $data['write_campus'] = 'The answer has not been stored.';
                    $this->load->view('campus_write_v', $data);
                }
                else {
                    $data['write_campus'] = 'The answer has been stored. ';
                    $this->load->view('campus_write_v', $data);
                }
            }
            else
            {
                $error = array('error' => $this->upload->display_errors());
                foreach ($error as $rows => $r)
                {
                    echo $r ;                 
                }
                $this->load->view('campus_write_v');                             
            }
        }
    }
} 
```

这是视图：

```
<?php
                $attributes = array('id' => 'contactform');
                echo form_open_multipart('campus/store', $attributes);
                ?>
                <div>
                <?php
                echo form_label('Title of Area');
                $data = array(
                    'name'        => 'name',
                    'id'          => 'name',
                    'placeholder' => 'Location and name of the place',
                    'required' => 'required',
                    'value'       => set_value("name") 
                    );

                echo form_input($data);    
                ?>
                </div>

                <div>
                <?php
                    $data = array(
                    'name'        => 'goods',
                    'id'          => 'goods',
                    'placeholder' => 'Tell us about the place',
                    'required' => 'required',
                    'value'       => set_value("goods"),
                    'rows'   => '20',
                    'cols'        => '50'
                    );

                echo form_textarea($data);    
                ?>
                </div>
                <div>
            <input type="file" id="userfile" name="userfile" size="20" />
        </div>

                <div>
                    <?php
                    $data = array(
                    'class'        => 'button',
                    'value'       => 'Submit',
                    'id'          =>"submit"
                    );

                echo form_submit($data);
                    ?>

        </div>
                  <?php     echo form_close();
                    ?>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:20:26.100

我将以这种方式解决这个问题：

```
$config['upload_path'] = './uploads/'; 
$config['allowed_types'] = 'gif|jpg|png';

$this->load->library('upload');
$this->upload->initialize($config);

if($this->upload->do_upload('userfile')){
    $data = $this->upload->data();
    $photo['image'] = $data['file_name']; // Name of image
} else {
    $photo['image'] = "Name"; // Name that you want
} 
```

这是上传控制器的短代码。

# matlab - 找出一个向量是否是另一个向量的旋转的最简单方法是什么？

> ID：14779502
> 
> 赞同：2
> 
> 时间：2013-02-08T18:59:51.867
> 
> 标签：matlab

假设我们 有`a = [1 2 3 4]`和。找出是 的 转移而不是 的转移的最简单方法是什么？`b = [3 4 1 2]``c = [1 2 4 3]``b``a``c``a`

矩阵有一些功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:14:03.483

我建议你使用`strfind`. 如果`a`是 的旋转`b`，那么`a`应该在里面找到`[b b]`：

```
strfind([b b],a)
ans =
     3

>> strfind([c c],a)
ans =
     [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:15:55.560

You can rotate `a` `size(a)` times and check if the newly rotated vector is the same with `b`:

```
for i = 1:length(a),
    a = a([end 1:end-1])
    if(a == b)
        disp('true')
    end
end 
```

# ios - UIImagePickerController 作为应用程序的主视图控制器和导航控制器后显示

> ID：14779511
> 
> 赞同：0
> 
> 时间：2013-02-08T19:00:38.290
> 
> 标签：ios, uinavigationcontroller, uiimagepickercontroller

我的目标是创建一个应用程序，它将相机作为出现的第一个视图，然后在拍照后转到导航控制器中的一系列视图。与我想做的最接近的现有应用程序是 Snapchat。

我已经为此苦苦挣扎了好几天，这就是我尝试过的（这些似乎都不起作用）。

1.  根视图（导航控制器内部）呈现一个模态 UIImagePickerController，然后转到下一个视图。[不继续]

2.  与 1 相同，但关闭模态控制器然后继续。[有点工作。在加载 UIImagePicker 以及转换到下一个视图时显示背景]

3.  使用 UIIMagePickerController 的子类作为根视图。[有效但不允许显示导航栏，否则在显示 UIImagePickerController 时崩溃][

4.  使用 3 并且不要嵌入到导航控制器中（推理：因为 UIImagePickerController 是导航控制器的子类，这应该可以工作）。[不起作用。]

我已经尝试了大约 10 种其他方法来做同样的事情，它们属于这一类：[有点工作。大多数崩溃或看起来很难看]。

做这个的最好方式是什么？任何帮助或建议将不胜感激！

同样，如果这令人困惑，只需打开 snapchat 并使用流程（相同的流程，实际应用程序的完全不同的想法 - 即。不是 snapchat 克隆 :)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T23:07:10.367

如果您从导航控制器的根视图控制器模态显示图像选择器，没有动画，那么您将首先看到选择器。When you dismiss it, you'll see that root controller, which should be what ever you want to see first when the picker goes away. 那是你要的吗？此代码将在根控制器中：

```
-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    static int first = 1;
    if (first) {
        UIImagePickerController *picker = [[UIImagePickerController alloc] init];
        picker.sourceType = 0;
        [self presentViewController:picker animated:NO completion:nil];
        first = 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:32:44.060

第一个建议：

制作一个主控制器并添加按钮（取决于您拥有多少个视图控制器），当单击按钮时，每个按钮将加载不同的视图控制器。

```
// appDelegate.h

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) MainViewController *mainController;

//appDelegate.m

self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

self.mainController = [[[MainViewController alloc] initWithNibName:@"MainViewController" bundle:nil] autorelease];
self.window.rootViewController = self.viewController;

//each button clicked has following IBAction:

-(IBAction)button1Clicked:(id)sender

{

        FirstViewController *firstVC = [[FirstViewController alloc]initWithNibName:@"FirstViewController" bundle:[NSBundle mainBundle]];
        UINavigationController *navController = [[[UINavigationController alloc] initWithRootViewController:firstVC]autorelease];
        [self presentModalViewController:navController animated:NO];
        [addVC release];
}

//in FirstViewController.m

-(void)viewDidLoad 

{

        [super viewDidLoad];

        self.title = @"xxxx ";

        self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel 
                            target:self action:@selector(cancel_Clicked:)]autorelease];

}

-(void) cancel_Clicked:(id)sender {

        [self dismissModalViewControllerAnimated:YES];
} 
```

笔记 ：

ViewController 要嵌入到导航控制器中，必须使用以下代码；

```
UINavigationController *navController = [[[UINavigationController alloc] initWithRootViewController:firstVC]autorelease]; 
```

# google-api - 为什么我在谷歌饼图上的百分比显示出来了？

> ID：14779517
> 
> 赞同：2
> 
> 时间：2013-02-08T19:00:57.190
> 
> 标签：google-api, google-visualization

我的谷歌饼图百分比显示被削减，我不知道为什么，这是绘制此类图表的 javascript 函数

```
function drawChart(arr, id, title)
{
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Topping');
  data.addColumn('number', 'Slices');
  console.log(arr);
  data.addRows(arr);
  var options = {'title': title,
  'width':350,
  'height':200};

  var chart = new google.visualization.PieChart(document.getElementById(id));
  chart.draw(data, options);
} 
```

这是`drawChart(arr, 'ajAcChart', 'répartition académique des <?php echo $this->ajDemands; ?> demandes d\'informations');`调用的结果

以及[由此产生](http://uppix.net/9/9/d/6410cfe083c17ea5b9770194cce39.png)的图像

如您所见，66.7% 未正确显示，如果我突出显示文本，我会看到 0.7。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T23:08:16.543

看起来图表 API 在确定如何将文本放入您指定的大小 ( `'width':350,'height:200'`) 时遇到问题。

我创建了一个 jsFiddle 并弄乱了`fontSize`and`fontFamily`选项，它似乎更适合一些调整。

[http://jsfiddle.net/Jeff_Meadows/v2UPh/1/](http://jsfiddle.net/Jeff_Meadows/v2UPh/1/)

# c++ - C++ memory_order_consume、kill_dependency、dependency-ordered-before、synchronizes-with

> ID：14779518
> 
> 赞同：3
> 
> 时间：2013-02-08T19:00:58.120
> 
> 标签：c++, c++11, atomic, lock-free, memory-model

我正在阅读Anthony Williams 的[C++ Concurrency in Action](http://www.manning.com/williams/)。目前我在他描述memory_order_consume的地方。

在那个块之后有：

> 现在我已经介绍了内存排序的基础知识，是时候看看更复杂的部分了

这让我有点害怕，因为我不完全理解几件事：

* * *

之前的依赖排序与同步有什么不同？他们都创造了“事前发生”的关系。确切的区别是什么？

* * *

我对以下示例感到困惑：

```
int global_data[]={ … };
std::atomic<int> index;
void f()
{
    int i=index.load(std::memory_order_consume);
    do_something_with(global_data[std::kill_dependency(i)]);
} 
```

kill_dependency 到底是做什么的？它杀死了哪个依赖？哪些实体之间？以及编译器如何利用这些知识？

* * *

memory_order_consume 的所有出现都可以安全地替换为 memory_order_acquire 吗？即它在所有意义上都更严格吗？

* * *

在代码清单 5.9 中，我可以安全地替换吗

```
std::atomic<int> data[5]; // all accesses are relaxed 
```

和

```
int data[5] 
```

? 即获取和释放可以用来同步访问非原子数据吗？

* * *

他通过一些小隔间里的男人的例子来描述放松、获得和释放。seq_cst和consume有没有类似的简单描述？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:24:01.860

至于倒数第二个问题，答案需要更多解释。当多个线程访问相同的数据时，可能会出现三件事：

1.  系统可能会在读取或写入过程中切换线程，从而产生一半值和一半值的结果。

2.  编译器可能会移动代码，假设没有其他线程查看所涉及的数据。

3.  处理器可能会在其本地缓存中保留一个值，而不会在更改该值后更新主内存或在另一个线程更改主内存中的值后重新读取它。

内存顺序**仅**寻址数字 3。原子函数寻址 1 和 2，并且根据内存顺序参数，也可能是 3。所以 memory_order_relaxed 的意思是“不要打扰数字 3。代码仍然处理 1 和 2。在这种情况下，您将使用获取和释放来确保正确的内存排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T04:20:26.190

memory_order_consume 要求原子操作发生在所有依赖于它的数据的非原子操作之前。数据依赖项是指在不使用该数据的情况下无法评估表达式的任何依赖项。例如，在 x->y 中，如果不先计算 x，就无法计算 x->y。

kill_dependency 是一个独特的功能。所有其他函数对其参数都有数据依赖性。Kill_dependency 明确没有。当您知道数据本身已经同步时，它会显示出来，但是您需要获取数据的表达式可能未同步。在您的示例中，允许 do_something_with 假设 globalldata[i] 的任何缓存值都可以安全使用，但 i 本身实际上必须是正确的原子值。

**如果**对数据的所有更改都通过匹配的 memory_order_release 正确释放，则memory_order_acquire 会更严格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T19:17:22.143

> 之前的依赖排序与同步有什么不同？

从 1.10/10 开始：“[注意：关系“之前是依赖排序的”类似于“同步于”，但使用发布/使用代替发布/获取。-结束注释]”。

> kill_dependency 到底是做什么的？

一些编译器进行数据依赖性分析。也就是说，他们跟踪变量中值的变化，以便更好地确定必须同步的内容。`kill_dependency`告诉此类编译器不要进一步跟踪，因为代码中发生了编译器无法理解的事情。

> memory_order_consume 的所有出现都可以安全地替换为 memory_order_acquire 吗？即它在所有意义上都更严格吗？

我想是的，但我不确定。

# vb.net - 如果某个列值等于某个值，则获取行索引

> ID：14779521
> 
> 赞同：1
> 
> 时间：2013-02-08T19:01:06.570
> 
> 标签：vb.net, datatable

在这个数据表中没有重复项，我需要列 x 值等于 2 的行索引。我会这样做：

```
Dim rowIndex As Integer = 0
For i = 0 To mtable.Rows.Count - 1
            If mtable.Rows(i)("x") = 2 Then
                rowIndex = i
                Exit For
            End If
        Next 
```

我将每秒多次调用此过程。在 .NET 中是否有更快的方法来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:19:16.387

DataTable select 可以工作，我认为它应该比迭代行集合更快。

```
 var index = mtable.Rows.IndexOf(mtable.Select("x = 2").FirstOrDefault()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:08:29.593

每秒多次有点模糊 - 数万或数千？

您可以创建一个哈希表，将“x”的值映射到行号：

```
Dim nLookups = mtable.Rows.Count - 1
Dim lookupHash As New Hashtable(nLookups)
For i = 0 To nLookups
    lookupHash.Add(CInt(mtable.Rows(i)("x")), i)
Next 
```

然后

```
Dim rowSought As Integer = -1
If lookupHash.ContainsKey(2) Then
    rowSought = lookupHash(2)
End If 
```

或者，如果“x”的可能值范围合适，您可以使用数组将值映射到行号。

# cuda - cuda虚实架构的区别

> ID：14779523
> 
> 赞同：11
> 
> 时间：2013-02-08T19:01:08.820
> 
> 标签：cuda, nvcc

试图了解 cuda 的虚拟和真实架构之间的差异，以及不同的配置将如何影响程序的性能，例如

```
-gencode arch=compute_20,code=sm_20
-gencode arch=compute_20,code=sm_21
-gencode arch=compute_21,code=sm_21
... 
```

NVCC手册中给出了以下解释，

> GPU 编译是通过中间表示 PTX ([...]) 执行的，它可以被视为虚拟 GPU 架构的组装。与实际的图形处理器相反，这样的虚拟 GPU 完全由它提供给应用程序的一组能力或特性来定义。特别是，虚拟 GPU 架构提供（大部分）通用指令集，并且二进制指令编码不是问题，因为 PTX 程序总是以文本格式表示。因此，一个 nvcc 编译命令总是使用两种架构：一个计算架构来指定虚拟中间架构，以及一个真正的 GPU 架构来指定要在其上执行的预期处理器。要使这样的 nvcc 命令有效，真正的架构必须是虚拟架构的实现（以某种方式）。这将在下面进一步解释。选择的虚拟架构更多地是对应用程序所需的 GPU 功能的说明：使用最小的虚拟架构仍然允许第二个 nvcc 阶段使用最广泛的实际架构。相反，指定一个提供应用程序未使用的功能的虚拟架构会不必要地限制可以在第二个 nvcc 阶段指定的可能 GPU 集。使用最小的虚拟架构仍然允许第二个 nvcc 阶段使用最广泛的实际架构。相反，指定一个提供应用程序未使用的功能的虚拟架构会不必要地限制可以在第二个 nvcc 阶段指定的可能 GPU 集。使用最小的虚拟架构仍然允许第二个 nvcc 阶段使用最广泛的实际架构。相反，指定一个提供应用程序未使用的功能的虚拟架构会不必要地限制可以在第二个 nvcc 阶段指定的可能 GPU 集。

但仍然不太了解不同配置对性能的影响（或者，可能只影响物理 GPU 设备的选择？）。特别是，这句话让我最困惑：

> 特别是，虚拟 GPU 架构提供（大部分）通用指令集，并且二进制指令编码不是问题，因为 PTX 程序总是以文本格式表示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T02:40:17.253

NVIDIA CUDA 编译器[驱动程序 NVCC](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html)用户指南部分关于[GPU 编译](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#gpu-compilation)提供了对虚拟和物理架构以及如何在构建过程中使用这些概念的非常全面的描述。

虚拟架构指定代码所针对的功能集。下表显示了虚拟架构的一些演变。编译时，您应该指定具有足够功能集的最低虚拟架构，以使程序能够在最广泛的物理架构上执行。

虚拟架构功能列表（来自用户指南）

```
compute_10   Basic features
compute_11   + atomic memory operations on global memory
compute_12   + atomic memory operations on shared memory
             + vote instructions
compute_13   + double precision floating point support
compute_20   + Fermi support
compute_30   + Kepler support 
```

物理架构指定了 GPU 的实现。这为编译器提供了指令集、指令延迟、指令吞吐量、资源大小等，以便编译器可以优化地将虚拟架构转换为二进制代码。

可以为编译器指定多个虚拟和物理架构对，并让编译器将最终的 PTX 和二进制文件返回到单个二进制文件中。在运行时，CUDA 驱动程序将为已安装的物理设备选择最佳表示。*如果fatbinary*文件中未提供二进制代码，则驱动程序可以使用 JIT 运行时实现最佳 PTX 实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T21:24:01.510

“虚拟架构”代码将由即时编译器编译，然后再加载到设备上。AFAIK，它与 NVCC 在离线构建“物理架构”代码时调用的编译器是同一个编译器 - 所以我不知道最终的应用程序性能是否会有任何差异。

基本上，每一代 CUDA 硬件都与上一代二进制不兼容——想象一下下一代英特尔处理器采用 ARM 指令集。通过这种方式，虚拟架构提供了可以为兼容硬件编译的 CUDA 应用程序的中间表示。每一代硬件都引入了需要新指令的新特性（例如原子、CUDA 动态并行）——这就是您需要新虚拟架构的原因。

基本上，如果你想使用 CDP，你应该为 SM 3.5 编译。您可以将其编译为设备二进制文件，该二进制文件将具有用于特定 CUDA 设备生成的汇编代码，或者您可以将其编译为 PTX 代码，该代码可以编译为任何提供这些功能的设备生成的设备汇编。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T19:14:07.390

虚拟架构指定了 GPU 具有哪些功能，而真实架构指定了它是如何做到的。

我想不出任何具体的例子。一个（可能不正确的）示例可能是一个虚拟 GPU，它指定了卡的核心数量，因此生成的代码针对该核心数量，而真正的卡可能有更多的冗余（或者由于制造而减少了一些）错误）和一些映射到实际使用的内核的方法，这些方法可以放在第一步生成的更通用的代码之上。

您可以认为 PTX 代码有点像汇编代码，它以特定架构为目标，然后可以编译为特定处理器的机器代码。一般来说，针对正确类型的处理器的汇编代码将生成更好的机器代码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T19:24:02.123

通常情况下，nvidia 写的文档会导致人们（包括我自己）变得更加困惑！（也许只有我！）

你关心性能，基本上这说的是不要（可能）但你应该。基本上GPU架构就像大自然。他们在上面运行了一些东西，然后发生了一些事情。然后他们试图解释它。然后他们把它喂给你。

最后可能应该运行一些测试，看看什么配置给出了最好的结果。

虚拟架构旨在让您自由思考。您应该遵守这一点，尽可能多地使用线程，您几乎可以将所有内容分配为线程和块的数量，没关系，它将被转换为 PTX 并且设备将运行它。

唯一的问题是，如果您为每个块分配超过 1024 个线程，您将得到 0 作为结果，因为设备（真正的架构）不支持它。

或者例如您的设备支持 CUDA 1.2，您可以在代码中定义双指针变量，但同样会得到 0 作为结果，因为设备无法运行它。

性能方面，您必须知道每 32 个线程（例如 warp）必须访问内存中的一个位置，否则您的访问将被序列化等等。

所以我希望你现在已经明白了，这是一门相对较新的科学，而 GPU 是一个非常复杂的硬件架构，每个人都在努力充分利用它，但这是一个测试游戏，对实际情况有一点了解CUDA 背后的架构。我建议搜索 GPU 架构，看看虚拟线程和线程块是如何实际实现的。

# node.js - Meteor 不适用于 Windows7 64 位

> ID：14779531
> 
> 赞同：2
> 
> 时间：2013-02-08T19:01:47.443
> 
> 标签：node.js, meteor, fibers

我只是在我的 Windows 7 企业 64 位机器上试用 Meteor。我通过 MSI 从[http://win.meteor.com](http://win.meteor.com)安装它，重新启动机器并在命令提示符（管理员）中执行以下操作：

> cd /dc:\var
> meteor create testapp
> （控制台绝对没有响应）

然后我保证 node.exe 正在工作。我创建了一个带有基本 hello world 示例的 test.js 并且它有效（我浏览到 localhost:xxx 并受到欢迎）。

> 节点测试.js

然后我直接进入meteor.js代码，在遇到process.stderr.write在fiber(...)里面时，我决定在fiber外面的文件开头调用同样的代码。
process.stderr.write("外部光纤");
（此消息已打印；确认纤维存在问题）

现在经过研究，我偶然发现

> npm 测试光纤
> （输出：错误：测试`already-running.js`失败。代码：-1073741819 ....）

然后我做了

> npm 移除纤维
> npm 安装纤维

但是，测试光纤的错误仍在继续，meteor 命令的绝对无输出也是如此。

有人可以帮忙吗？我没有选择，这是我第一次尝试meteor/nodejs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:04:01.837

我发现了节点光纤的问题（在 Windows 上）并进行了初步修复 - 至少它为我解决了这个问题，我很想看看它是否也为其他人解决了这个问题。

最终问题显然是由于堆栈溢出和访问冲突而突然死亡。然而，根本原因是线程本地没有在光纤交换机上正确切换。

有关详细信息，请参阅[https://github.com/TomWij/meteor/issues/66#issuecomment-15994548](https://github.com/TomWij/meteor/issues/66#issuecomment-15994548)。

请参阅相关的堆栈溢出问题：[Windows 上的流星：流星命令不输出任何内容](https://stackoverflow.com/q/15425953/1129543)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T18:12:36.280

你需要知道，到目前为止，meteor 还没有正式支持 windows。我可以建议您尝试在虚拟机中使用 virtualbox 和 linux 发行版。

# mysql - 即使在第二个表中找不到匹配项，也从第一个表中获取结果 - MySQL

> ID：14779542
> 
> 赞同：1
> 
> 时间：2013-02-08T19:02:03.400
> 
> 标签：mysql, select, left-join

我有两张表，其结构如下

```
Table name = counter
ref_id INT NOT NULL
count INT NOT NULL 
```

* * *

```
Table name = favs
disqus_id VARCHAR(32) NOT NULL
user_id INT NOT NULL
dormant VAHCHAR(10) NOT NULL 
```

我运行这个查询 =>`SELECT count, dormant FROM counter AS c LEFT JOIN favs AS f ON c.ref_id = f.disqus_id WHERE ref_id = 'post_5' AND user_id = '1'.`

但如果在第二个表中找不到匹配项，它不会返回任何行`favs`。我想要的是，如果找到结果，它应该返回两列，否则返回两列，第二列是`NULL`

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:03:40.950

`ON`子句中用户的条件

```
SELECT c.count, f.dormant 
FROM   counter AS c 
       LEFT JOIN favs AS f 
          ON c.ref_id = f.disqus_id  AND f.user_id = '1'
WHERE  c.ref_id = 'post_5' 
```

或者如果仍然不起作用，请移动两者：

```
SELECT c.count, f.dormant 
FROM   counter AS c 
       LEFT JOIN favs AS f 
          ON c.ref_id = f.disqus_id  AND 
             f.user_id = '1' AND
             c.ref_id = 'post_5' 
```

# android - 为什么物理身体会在andengine gles2锚中心动态壁纸中自动向上移动

> ID：14779554
> 
> 赞同：3
> 
> 时间：2013-02-08T19:03:00.020
> 
> 标签：android, andengine, game-physics, live-wallpaper

我正在尝试使用 andengine gles2 锚中心开发动态壁纸，并带有一些物理特性。但是当我添加一个物理对象时，它正在向上移动。而不是由于重力而向下移动我犯了什么错误，
请帮助我解决问题

这是我的代码

```
FixtureDef FIXTURE_DEF = PhysicsFactory.createFixtureDef(1, 0.5f,
                0.5f);
mPhysicsWorld = new PhysicsWorld(new Vector2(0,
                        SensorManager.GRAVITY_EARTH), false);
final AnimatedSprite animatedSprite;
animatedSprite = new AnimatedSprite(500, 250,
                        this.mBoxFaceTextureRegion, this.getVertexBufferObjectManager());

body = PhysicsFactory.createBoxBody(this.mPhysicsWorld, animatedSprite,
                        BodyType.DynamicBody, FIXTURE_DEF);

scene.attachChild(animatedSprite);
animatedSprite.animate(200);
mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(
                        animatedSprite, body, true, true)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T03:37:47.730

只需乘以`SensorManager.GRAVITY_EARTH`-1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T08:01:42.207

设置负重力没有正确响应传感器数据。通过在覆盖方法中为传感器数据添加加速度`**onAccelerationChanged()**`，可以使物体在传感器平坦的情况下坠落。

`public void onAccelerationChanged(final AccelerationData pAccelerationData) { /* Add constant value for vertical gravity*/ final Vector2 gravity = Vector2Pool.obtain(pAccelerationData.getX(), pAccelerationData.getY() + 4.0); this.mPhysicsWorld.setGravity(gravity); Vector2Pool.recycle(gravity); }`

这将使您的物理世界处于真实的重力体验中，并且您将正确地获得受传感器数据影响的对象

# forms - 从 grails 中的表单中获取集合

> ID：14779556
> 
> 赞同：0
> 
> 时间：2013-02-08T19:03:03.763
> 
> 标签：forms, grails, checkbox, gsp

我有一个相册视图，用户可以在其中检查要删除的照片。我目前正在这样做：

```
<g:form action="delete">
    <g:each in="${pictures}">

        <div id="images2">
            <img id="images2" src="${it.urlThumb}" alt="no Picture"/><br>
            <g:checkBox name="myCheckbox"/>
        </div>

    </g:each>
    <g:submitButton name="Submit"/>
</g:form> 
```

问题是这会动态创建表单，因此复选框的每个名称都是相同的。理想情况下，我希望将一个集合返回到包含每个已检查图像的控制器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:25:45.197

在`<g:checkBox>`您需要指定一个值。每个复选框都将使用相同的名称但不同的值创建。当表单提交并选中不同的复选框时，您将在控制器中获得一个列表。

看法：

```
<g:each in="${pictures}">
    <div id="images2">
        <img id="images2" src="${it.urlThumb}" alt="no Picture"/><br>
        <g:checkBox name="myCheckbox" value="it.id"/>
    </div>
</g:each> 
```

控制器：

```
def checked = params.list('myCheckbox') 
```

# python - 使用 Tide SDK 打包 Python 应用程序不起作用，而 Launch App 可以

> ID：14779566
> 
> 赞同：0
> 
> 时间：2013-02-08T19:03:44.417
> 
> 标签：python, tidesdk

我一直在用 Python 为 Leap Motion 开发一个应用程序，当我测试它时，当我单击 Launch App 时它运行良好。没有打开应用程序窗口，但 Python 代码一切正常。

但是，当我打包应用程序并启动它时，它确实显示了一个应用程序窗口并且 Python 根本不工作......我错过了什么吗？

这是我的 index.html 的代码：

```
<html>
    <head>
        <script>
            Titanium.include("PyLeapMouse.py");
            Titanium.include("Geometry.py");
            Titanium.include("Leap.py");
            Titanium.include("LeapFunctions.py");
            Titanium.include("Mouse.py");
        </script>
        <script type="text/python">
            import Leap
            import Mouse
            import LeapFunctions
            import time
            import sys

            def main():
                cursor = Mouse.cursor()
                listener = LeapFunctions.Listener(cursor)

                controller = Leap.Controller()
                print "Adding Listener."
                controller.add_listener(listener)#Attach the listener

                print "Press Enter to quit..."
                sys.stdin.readline()
                controller.remove_listener(listener)

            main()
        </script>
    </head>
    <body style="background-color:#1c1c1c;margin:0">
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T06:35:21.220

尝试以下列方式包含您的 Python 模块：

```
<script type="text/python" src="PyLeapMouse.py" />
<script type="text/python" src="Geometry.py" />
<script type="text/python" src="Leap.py" />
<script type="text/python" src="LeapFunctions.py" />
<script type="text/python" src="Mouse.py" /> 
```

我知道全局命名空间从更改`Titanium`为`Ti`也，所以如果这不起作用，您可能想尝试`Ti.include`与`Titanium.include`.

希望有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T14:41:25.627

包含已从 1.3.1 beta 版本中删除

[https://github.com/TideSDK/TideSDK/wiki/TideSDK-1.3.1-beta-release](https://github.com/TideSDK/TideSDK/wiki/TideSDK-1.3.1-beta-release)

# emacs - 使用 nrepl.el 时如何更新 Clojure 依赖项？

> ID：14779567
> 
> 赞同：19
> 
> 时间：2013-02-08T19:03:47.123
> 
> 标签：emacs, clojure

据我了解，当我执行时，`nrepl-jack-in`REPL 会与 project.clj 中定义的所有依赖项一起加载。如果我然后更新 project.clj 以添加新的依赖项，我需要终止服务器并重新运行`nrepl-jack-in`还是有办法更新当前 REPL 中的依赖项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T19:59:01.390

**更新：也许有一些希望，见[https://github.com/cemerick/pomegranate](https://github.com/cemerick/pomegranate)**

之前：

简短的回答是肯定的——你必须重新启动 JVM 进程。

我知道没有好的方法来更新实时 repl 中的依赖项。Leiningen（由 nrepl-jack-in 调用）将管理依赖项并仅在重新启动时设置类路径。尝试做一些充满活力和聪明的事情是非常脆弱的。

下面被删除的文字实际上是真实的，但经过片刻的反思，我认为这是一个糟糕的建议，我将其标记为......

~~如果您有本地依赖项（例如 jar 文件），您可能会在 repl 中使用长期**不推荐使用**的功能。`add-classpath`但是您将进入 java 类加载器的龙出没的沼泽。~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-24T23:29:57.210

重新启动 REPL 似乎是最简单的方法。这可以通过以下方式完成：

```
M-x cider-restart 
```

这似乎也完成了一个`lein deps`. 因此，添加新依赖项的整个过程只需将 . 添加`require`到您的`project.clj`然后调用`cider-restart`.

* * *

另一种（非常方便）的方法是使用 [clj-refactor](https://github.com/clojure-emacs/clj-refactor.el)。添加*工件*（`C-c m a p`或`cljr-add-project-dependency`）将提示您输入所需的版本，**自动**将新依赖项放入您的`project.clj`文件中，并**重新加载您的会话**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T00:30:48.480

在 pomegranate 存在之前，我编写了自己的库来动态加载依赖项。

[https://github.com/bmillare/dj](https://github.com/bmillare/dj)

在发布了 lein2 以及它如何在幕后使用 pomegrante 之后，我重写了 dj 以在下面使用它。所以，即使你不使用 'dj'，它也可能是一个有用的参考，看看它在做什么。

# c# - 错误：集合已修改；枚举操作可能无法执行

> ID：14779568
> 
> 赞同：2
> 
> 时间：2013-02-08T19:03:53.767
> 
> 标签：c#, exception, iterator

我一直在现场处理这个异常。我不明白如何在迭代时修改集合。我在方法开始时将所有内容复制到局部变量。

```
 public void Flush() {
            var tempEntities = attachedEntities.Select(item => item).ToList();
            attachedEntities.Clear();

            var tempEntitiesToDelete = entitiesToDelete.Select(item => item).ToList();
            entitiesToDelete.Clear();

            foreach (var attachedEntity in tempEntities) {
                var isTransient = (bool)GetPrivateField(attachedEntity.GetType(), attachedEntity, "isTransient");
                if (isTransient)
                    db.Insert(attachedEntity);
                else
                    db.Update(attachedEntity);
            }

            foreach (var entity in tempEntitiesToDelete)
                db.Delete(entity);
        } 
```

堆栈跟踪

```
System.InvalidOperationException: Collection was modified; enumeration operation may not execute.
  at System.Collections.Generic.List`1 Enumerator[Compass.Mobile.Core.DataAccess.IEntity].VerifyState () [0x00000] in <filename unknown>:0 
  at System.Collections.Generic.List`1 Enumerator[Compass.Mobile.Core.DataAccess.IEntity].MoveNext () [0x00000] in <filename unknown>:0 
  at System.Linq.Enumerable <CreateSelectIterator>c__Iterator1D`2[Compass.Mobile.Core.DataAccess.IEntity,Compass.Mobile.Core.DataAccess.IEntity].MoveNext () [0x00000] in <filename unknown>:0 
  at System.Collections.Generic.List`1[Compass.Mobile.Core.DataAccess.IEntity].AddEnumerable (IEnumerable`1 enumerable) [0x00000] in <filename unknown>:0 
  at System.Collections.Generic.List`1[Compass.Mobile.Core.DataAccess.IEntity]..ctor (IEnumerable`1 collection) [0x00000] in <filename unknown>:0 
  at System.Linq.Enumerable.ToList[TSource] (IEnumerable`1 source) [0x00000] in <filename unknown>:0 
  at Compass.Mobile.Core.DataAccess.Session.Flush () [0x00000] in <filename unknown>:0 
  at Compass.Mobile.Core.DataAccess.Session.Commit () [0x00000] in <filename unknown>:0 
  at Compass.Mobile.Core.Bootstrap.CommandBus.Flush () [0x00000] in <filename unknown>:0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:06:40.697

替换这个：

```
foreach (var entity in tempEntitiesToDelete)
     db.Delete(entity); 
```

和：

```
for (var i = tempEntitiesToDelete.Count - 1; i >= 0; i--)
   db.Delete(tempEntitiesToDelete[i]); 
```

当我在循环中尝试删除时遇到了这个问题；它试图修改项目列表。因此，向后循环为我修复了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T19:16:17.107

Judging by the stack trace, it's not failing inside your `foreach` (or enumerating `tempEntities` which is a plain list) but inside one of `ToList` calls, when `Select` iterator's underlying list checks its state before moving on to next item.

This line in your stack trace makes me believe so:

```
at System.Linq.Enumerable <CreateSelectIterator>c__Iterator1D`2[Compass.Mobile.Core.DataAccess.IEntity,Compass.Mobile.Core.DataAccess.IEntity].MoveNext () [0x00000] in <filename unknown>:0 
```

Your foreach loop variable is just a list, so it doesn't go through `Select`. This leads me to believe that either `attachedEntities` or `entitiesToDelete` change while you're doing `Select` over them:

```
/* Failing here... */
var tempEntities = attachedEntities.Select(item => item).ToList();
attachedEntities.Clear();

/* ...or here*/
var tempEntitiesToDelete = entitiesToDelete.Select(item => item).ToList();
entitiesToDelete.Clear();

/* ...but not here! */
foreach (var attachedEntity in tempEntities) {
   // ...
} 
```

It could very well be a concurrency issue.

By the way, you really don't need `Select (item => item)`, it would just be an identity projection.

# css - FlexSlider：如何更改多方向导航的样式？

> ID：14779570
> 
> 赞同：1
> 
> 时间：2013-02-08T19:03:56.673
> 
> 标签：css, flexslider

我正在使用 flexslider 作为具有默认样式的主 Slider 和另一个页面上的另一个 flexslider 轮播。但轮播需要不同的方向导航样式。默认情况下，方向导航的类是 flexslider.css 中的“.flex-direction-nav a”。我们可以编辑它。但是我们如何将另一个类分配给其他方向导航呢？控制导航也是如此。我想在@max-width 450px 上隐藏轮播的控制导航，但不隐藏主滑块....那么我怎样才能只为 CSS 中的特定滑块解决控制导航？

```
.flex-direction-nav a {
      width: 30px; height: 30px; margin: -20px 4px; 
      display: block; background: url(../img/bg_direction_nav.png) no-repeat 0 0;
      position: absolute; top: 50%; z-index: 10; cursor: pointer; 
      text-indent:-9999px; opacity: 0; -webkit-transition: all .3s ease;}

.flex-direction-nav .flex-next {
      background-position: 100% 0; right: -36px; }

.flex-direction-nav .flex-prev {
      left: -36px;} 
```

上面是来自默认 Flexslider CSS 的示例，它正在寻址 .flex-direction-nav 类，并且这个类是从 JS 生成的。但是我们如何添加另一个类，例如。“.flex-direction-nav-1”所以我们可以通过 CSS 改变它的样式和位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:46:01.197

为滑块/轮播使用默认 CSS

```
/* Direction Nav */
.flex-direction-nav {height: 0;}
.flex-direction-nav a {width: 30px; height: 30px; margin: -20px 0 0; display: block; background: url('/images/system/bg_direction_nav.png') no-repeat 0 0; position: absolute; top: 50%; z-index: 3; cursor: pointer; text-indent: -9999px; opacity: 1; -webkit-transition: all .3s ease;} 
```

然后给你想要表现不同的轮播它自己的 id，然后像这样将 CSS 应用到那个 id：

```
#carousel .flex-direction-nav {height: 0;}
#carousel .flex-direction-nav a {width: 30px; height: 30px; margin: -20px 0 0; display: block; background: url('/images/system/bg_direction_nav_sml.png') no-repeat 0 0; position: absolute; top: 40px; z-index: 3; cursor: pointer; border: solid 1px #c8c8c8; text-indent: -9999px; opacity: 1; -webkit-transition: all .3s ease;} 
```

# objective-c - 用命令修改多个 NSTextView

> ID：14779573
> 
> 赞同：0
> 
> 时间：2013-02-08T19:04:12.773
> 
> 标签：objective-c, cocoa, nstextview

我想知道是否有人知道是否可以使用菜单栏命令修改多个 NSTextView。例如，如果用户从菜单栏中选择“粗体”，则选择的不同 NSTextView 会更新其所有内容以显示粗体。

这是我的设置：

```
@interface MyCustomTextField : NSView <NSTextViewDelegate>{
    NSTextView *textView;
    BOOL selected;
    ...
} 
```

所以基本上我有自己的自定义类，并且在每个自定义类中我都有一个 NSTextView、一个决定是否选择此视图的 var 以及其他一些东西。

我可以选择多个字段，但是从我在 Apple 文档中阅读的内容中，窗口中的每个 NSTextView 都共享一个字段编辑器。当用户编辑 NSTextView 时，他们实际上是在向字段编辑器发送命令，该编辑器对其进行处理并将其路由到 NSTextView。如果是这种情况，这是否意味着我需要创建自己的自定义字段编辑器并将命令路由到所有自定义选择的文本类？

==**编辑**==
我的 CustomTextField 类有一个名为“selected”的变量（见上文），通过按住 shift 或 apple 键，我可以“选择”多个 CustomTextField 实例（我在 NSTextView 实例前面放置了一个掩码它捕获 mouseDown 消息）。

所以通过这个选择，多个实例的“selected”属性设置为true。至于窗口的第一响应者，它将被设置为在所有 NSTextView 周围显示蓝色光环的掩码。

我想知道我是否可以告诉应用程序接受默认的 NSTextView 命令（例如粗体、斜体等），并且如果我提供自定义字段编辑器，它会将所有适当的消息传递给选定的 CustomTextFields 然后传递把它放到 NSTextViews 上。

在我的脑海中，消息会这样传递：

**用户提交文本工具栏命令**>**自定义字段编辑器**> **MyCustomTextField** > **NSTextView**

希望我的解释是有道理的，或者我现在在 LaLa 土地上。

# php - 循环只通过一组数据

> ID：14779578
> 
> 赞同：1
> 
> 时间：2013-02-08T19:04:21.210
> 
> 标签：php, mysqli

`All`在一个或两个相关下拉菜单中选择一个选项时，我在循环数据时遇到问题。它不会遍历所有记录并显示它们，它只是通过一组数据。假设显示每个学生和他们参与的每个问题的详细信息。但它只显示一个学生和一个问题，仅此而已。

下面是它应该显示的内容：

![在此处输入图像描述](../Images/1b83a90363528154ddac92e79b0d8e60.png)

但目前它只是显示这个：

![在此处输入图像描述](../Images/6781a4ab9622e2ec0ba8e2c88b9456be.png)

我相信导致这个问题的原因是我设置的动态 WHERE 子句。以下是动态 WHERE 子句的工作原理：

*   强制 WHERE 条件`q.SessionId = ?`
*   如果用户从学生下拉菜单中选择单个学生，则添加`AND sa.StudentId = ?`到 WHERE 子句
*   如果用户 `All`从学生下拉菜单中选择学生选项，`AND sa.StudentId = ?`则从 WHERE 子句中删除或不显示
*   如果用户从问题下拉菜单中选择单个问题，则添加`AND q.QuestionId = ?`到 WHERE 子句
*   如果用户 `All`从问题下拉菜单中选择问题选项，`AND q.QuestionId = ?`则从 WHERE 子句中删除或不显示

我有三个下拉菜单（下面是示例数据的样子）：

**会议：**

```
<select name="session" id="sessionsDrop">
<option value="26">POKUB1</option>
<option value="27">POKUB2</option>
</select> 
```

**学生：**

```
<select name="student" id="studentsDrop">
<option value="0">All</option>
<option value="39">Luke Mcfadzen</option>
<option value="40">Chris Tucker</option>
</select> 
```

**问题：**

```
<select name="question" id="questionsDrop">
<option value="0">All</option>
<option value="72">1</option>
<option value="73">2</option>
</select> 
```

不要忘记我在上面这个问题中提到的 WHERE 条件是如何工作的。假设从会话下拉菜单中选择的会话是`POKUB 1, drop down value: 26`.

如果您选择一个学生和一个问题，那么它会正确显示详细信息，例如

*   **学生：** Luke McFadzen - 下拉值：39
*   **问题：** 1 - 下拉值：72

所以 WHERE 条件是`q.SessionId = 26 AND sa.StudentId = 39 AND q.QuestionId = 72`。

但是，如果我`All`在学生和问题下拉菜单中的一个或两个中选择一个选项，那么输出只显示一个学生和一个问题，并且出于某种奇怪的原因，它结合了所有问题的答案并将所有学生的答案结合到单个输出中。

现在`All`两个下拉菜单中的选项都有一个下拉值`0`，现在`0`不是从数据库中选择的值，但是我们在动态 where 子句中已经说明，如果`0`从特定下拉菜单中选择了一个值，则从中删除相关条件WHERE 子句，例如：

*   `All`学生和单个问题（价值`72`） -`WHERE q.SessionId = 26 AND q.QuestionId = 72`
*   单身（价值`39`）学生和`All`问题 -`WHERE q.SessionId = 26 AND sa.StudentId = 39`
*   `All`学生和`All`问题 -`WHERE q.SessionId = 26`

**上述场景存在问题**

如果我只是使用静态 WHERE 子句离开查询，`WHERE q.SessionId = ?`那么如果我选择`All`学生和`All`问题，它会正确输出详细信息，但我需要查询适用于从下拉菜单中选择的所有不同可能选项，因此我需要动态 WHERE条款。我怎样才能让它工作，以便输出正确的细节？

代码：

```
 $selectedstudentanswerqry = "
        SELECT
        sa.StudentId, StudentAlias, StudentForename, StudentSurname, q.SessionId, 
        q.QuestionId, QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, 
        GROUP_CONCAT( DISTINCT Answer ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
        GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, 
        (
        SELECT sum( StudentMark )
        FROM Student_Answer sta
        WHERE sa.StudentId = sta.StudentId
        AND sa.QuestionId = sta.QuestionId
        )StudentMark
        FROM Student st
        INNER JOIN Student_Answer sa ON (st.StudentId = sa.StudentId)
        INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId) AND sa.QuestionId = sr.QuestionId
        INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
        INNER JOIN Answer an ON q.QuestionId = an.QuestionId
        LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
        LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
        ";

        // Initially empty
        $where = array('q.SessionId = ?');
        $parameters = array($_POST["session"]);
        $parameterTypes = 'i';

        //check if POST is empty

        // Check whether a specific student was selected
        $p_student = empty($_POST["student"])?'':$_POST["student"];

        switch($p_student){
        case 0:
            //dont' add where filters
            break;
        default:
            $where[] = 'sa.StudentId = ?';
            $parameters[] .= $_POST["student"];
            $parameterTypes .= 'i';
        }

        // Check whether a specific question was selected
        $p_question = empty($_POST["question"])?'':$_POST["question"];

        switch($p_question){
        case 0:
            //dont' add where filters
            break;
        default:
            $where[] = 'q.QuestionId = ?';
            $parameters[] .= $_POST["question"];
            $parameterTypes .= 'i';
        }

        // If we added to $where in any of the conditionals, we need a WHERE clause in
        // our query
        if(!empty($where)) {
            $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
            global $mysqli;
            $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
            // You only need to call bind_param once

            if (count($where) == 1) {
            $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0]);
        }
        else if (count($where) == 2) {
            $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
        }
        else if (count($where) == 3) {
            $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1], $parameters[2]);
        }

        }

        $selectedstudentanswerqry .= "
          GROUP BY sa.StudentId, q.QuestionId
          ORDER BY StudentAlias, q.SessionId, QuestionNo
        ";

    // get result and assign variables (prefix with db)
    $selectedstudentanswerstmt->execute(); 
    $selectedstudentanswerstmt->bind_result($detailsStudentId,$detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname,$detailsSessionId,
    $detailsQuestionId,$detailsQuestionNo,$detailsQuestionContent,$detailsOptionType,$detailsNoofAnswers,$detailsAnswer,$detailsReplyType,$detailsQuestionMarks,
    $detailsStudentAnswer,$detailsResponseTime,$detailsMouseClick,$detailsStudentMark); 

    $selectedstudentanswerstmt->store_result();
    $selectedstudentanswernum = $selectedstudentanswerstmt->num_rows(); 

 while ($selectedstudentanswerstmt->fetch()) {

                //Check if the student data exist.
                if (!isset($questions[$detailsStudentId])) {
                    $questions[$detailsStudentId] = array(
                        'studentalias' => $detailsStudentAlias,
                        'studentforename' => $detailsStudentForename,
                        'studentsurname' => $detailsStudentSurname,
                        'questions' => array()
                    );
                }

                $questions[$detailsStudentId]['questions'][$detailsQuestionId] = array(
                    'questionno'=>$detailsQuestionNo,
                    'content'=>$detailsQuestionContent,
                    'optiontype'=>$detailsOptionType,
                    'noofanswers'=>$detailsNoofAnswers,
                    'answer'=>$detailsAnswer,
                    'replytype'=>$detailsReplyType,
                    'questionmarks'=>$detailsQuestionMarks,
                    'studentanswer'=>$detailsStudentAnswer,
                    'responsetime'=>$detailsResponseTime,
                    'mouseclick'=>$detailsMouseClick,
                    'studentmark'=>$detailsStudentMark
                );
            }

            $selectedstudentanswerstmt->close();

    foreach ($questions as $studentId => $studentData) {
        echo '<p>'.$studentData['studentalias'].' - '.$studentData['studentforename'].' '.$studentData['studentsurname'].'</p>';

        foreach ($studentData['questions'] as $questionId => $questionData) {
            echo '<p><strong>'.$questionData['questionno'].': '.$questionData['content'].'<br/>';
            echo $questionData['optiontype'].' - '.$questionData['noofanswers'].' - '.$questionData['answer'].' - '.$questionData['replytype'].' - '.$questionData['questionmarks'].'<br/>';
            echo $questionData['studentanswer'].' - '.$questionData['responsetime'].' - '.$questionData['mouseclick'].' - '.$questionData['studentmark'].'</strong></p>';
        }
    } 
```

以下是 和 的可能`$_POST['student']`var_dumps `$_POST['question']`：

**单个学生和单个问题：**

*   学生：Chris Tucker - string(2) "40"
*   问题：1 - 字符串（2）“72”

**单身学生和所有问题：**

*   学生：Chris Tucker - string(2) "40"
*   问题：全部 - 字符串（1）“0”

**所有学生和一个问题：**

*   学生：全部 - 字符串（1）“0”
*   问题：1 - 字符串（1）“72”

**所有学生和所有问题：**

*   学生：全部 - 字符串（1）“0”
*   问题：全部 - 字符串（1）“0”

以下是`var_dump($questions);`我选择`All`学生和`All`问题的示例：

```
array(1) { 
[39]=> array(4) { 
["studentalias"]=> string(8) "u4838229" 
["studentforename"]=> string(5) "Chris" 
["studentsurname"]=> string(6) "Tucker" 
["questions"]=> array(1) { 
[72]=> array(11) { 
["questionno"]=> int(1) 
["content"]=> string(14) "What is a RAM?" 
["optiontype"]=> string(3) "A-E" 
["noofanswers"]=> int(1) 
["answer"]=> string(7) "B,C,D,E" 
["replytype"]=> string(6) "Single" 
["questionmarks"]=> int(5) 
["studentanswer"]=> string(9) "A,B,C,D,E" 
["responsetime"]=> string(8) "00:00:07" 
["mouseclick"]=> int(1) 
["studentmark"]=> string(1) "2" } } } } 
```

**更新：**

如果我仅在仅检查时使用静态 WHERE 子句保留 mysqli 查询`q.SessionId = ?`，那么当我`All`在 etiher 或两个下拉菜单中选择选项时，它输出结果没问题，只会枯萎我需要的动态 where 子句包括作为用户我能够选择`All`选项无法正常工作的个人学生和/或个人问题。以下是使用静态 WHERE 子句时的工作 mysqli 代码：

```
$selectedstudentanswerqry = "
    SELECT
    sa.StudentId, StudentAlias, StudentForename, StudentSurname, q.SessionId, 
    q.QuestionId, QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, 
    GROUP_CONCAT( DISTINCT Answer ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
    GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, 
    (
    SELECT sum( StudentMark )
    FROM Student_Answer sta
    WHERE sa.StudentId = sta.StudentId
    AND sa.QuestionId = sta.QuestionId
    )StudentMark
    FROM Student st
    INNER JOIN Student_Answer sa ON (st.StudentId = sa.StudentId)
    INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId) AND sa.QuestionId = sr.QuestionId
    INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
    INNER JOIN Answer an ON q.QuestionId = an.QuestionId
    LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
    LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
    LEFT JOIN Session_Taken sta ON (st.StudentId = sta.StudentId)
      WHERE q.SessionId = ?
      GROUP BY sa.StudentId, q.QuestionId
      ORDER BY StudentAlias, q.SessionId, QuestionNo
    ";
    global $mysqli;
$selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
$selectedstudentanswerstmt->bind_param('i',$_POST['session']);
// get result and assign variables (prefix with db)
$selectedstudentanswerstmt->execute(); 
$selectedstudentanswerstmt->bind_result($detailsStudentId,$detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname,$detailsSessionId,
$detailsQuestionId,$detailsQuestionNo,$detailsQuestionContent,$detailsOptionType,$detailsNoofAnswers,$detailsAnswer,$detailsReplyType,$detailsQuestionMarks,
$detailsStudentAnswer,$detailsResponseTime,$detailsMouseClick,$detailsStudentMark); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:01:38.493

我相信您的问题的根源是：

```
 // Check whether a specific student was selected
    $p_student = empty($_POST["student"])?'':$_POST["student"];

    switch($p_student){
    case 0:
        //dont' add where filters
        break;
    default:
        $where[] = 'sa.StudentId = ?';
        $parameters[] .= $_POST["student"];
        $parameterTypes .= 'i';
    } 
```

将学生添加到 where 子句的代码只执行一次，不支持选择多个学生。

假设您修改代码以从表单中传递一组学生 ID，这样的事情应该可以工作：

```
if (!empty($_POST['student'])) {

    $students = filter_input_array(INPUT_POST, 'student', FILTER_SANITIZE_NUMBER_INT);

    if ($students !== false) {
        $num_students = count($students);
        $where[]      = 'sa.StudentId IN (' . rtrim(str_repeat('?,', $num_students), ',') . ')';
        $parameters   = array_merge($parameters, $students);
    }
} 
```

几件事：

*   永远不要相信未经清理的数据，在使用前始终进行清理/过滤。
*   如果您添加`[]`到表单字段的名称（即：`<select name="student[]">`PHP 会将其解释为 $_POST 中的数组）。
*   这应该使您的 SQL 查询返回多个结果，这意味着`$questions`将保存所有这些结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:43:08.260

empty() 将 '0' 视为空[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)，因此`$p_student = empty($_POST["student"])?'':$_POST["student"];`当 $_POST["student"] 为 '0' 时 $p_student 为真...结果，下面的情况总是'默认'，所以如果为空（），你应该将 $p_student 设置为'0'，它应该没问题......我认为......（这对于 $p_student 和$p_question 当然...）。`

```
 $p_student = empty($_POST["student"])?0:$_POST["student"];  // Now if $_POST['student'] is either 0 or empty $p_student will be 0

    switch($p_student){
    case 0:
        //dont' add where filters
        break;
    default:
        $where[] = 'sa.StudentId = ?';
        $parameters[] .= $_POST["student"];
        $parameterTypes .= 'i';
    }

    // Check whether a specific question was selected
    $p_question = empty($_POST["question"])?0:$_POST["question"]; // Same here, if $_POST['question'] is either 0 or empty $p_question will be 0
    switch($p_question){
    case 0:
        //dont' add where filters
        break;
    default:
        $where[] = 'q.QuestionId = ?';
        $parameters[] .= $_POST["question"];
        $parameterTypes .= 'i';
    }` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:43:43.737

我认为你错过了一个结束 } 之后

```
// You only need to call bind_param once 
```

现在你的

```
if(!empty($where)) { 
```

没有在它应该结束的地方结束......

# c# - 如何在 C# 中关闭包含阻塞方法的线程

> ID：14779581
> 
> 赞同：1
> 
> 时间：2013-02-08T19:04:36.537
> 
> 标签：c#, multithreading, methods, blocking, terminate

我创建了一个线程来处理我的代码中的阻塞方法。这样，除了运行该阻塞方法之外，我的代码还可以做其他事情。

问题：如何正确终止线程？我是否必须解除阻塞方法，然后终止线程。还是我可以终止线程而不用担心任何丑陋的崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:59:15.313

好的，找到了我的答案。我必须声明线程，以便可以对它们进行引用。然后，我首先结束嵌套线程（具有 HandleClientComm()），然后关闭 TCP_Client（如果不为空）和 TCP_Listener。然后我结束 ListenThread()。此外，这里提到的 TCP_Listener.Pending() 方法必须实现[停止 TcpListener 的正确方法。](https://stackoverflow.com/questions/365370/proper-way-to-stop-tcplistener)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:02:36.060

你有一些选择。如果您不关心应用程序关闭时操作是否完成，您最好通过[QueueUserWorkItem](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx)使用 ThreadPool 线程， 或者（如 Servy 在评论中建议的那样）将线程的[IsBackground](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)属性设置为 true，这将允许该过程在线程不退出的情况下退出。

如果您确实关心操作的完成和/或需要在关闭时运行的清理逻辑，那么您可能并不真的想使用 Thread.Abort，至少不是作为您的 goto 策略。我使用的是与此类似的东西：

```
public abstract class DisposableThread : IDisposable
{
    private ManualResetEvent exiting = new ManualResetEvent(false);
    private Thread theThread;
    private  TimeSpan abortTimeout;

    public DisposableThread():
        this(TimeSpan.FromMilliseconds(100))
    {
    }

    public DisposableThread(TimeSpan abortTimeout)
    {
        this.abortTimeout = abortTimeout;
        theThread = new Thread((_) => ThreadProc());
    }

    protected virtual void ThreadProc()
    {
        while(!exiting.WaitOne(0))
        {
            WorkUnit(exiting);
        }
        ThreadCleanup();
    }

    public void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        exiting.Set();
        if (!theThread.Join(abortTimeout))
        {
            // logme -- the thread didn't shutdown gracefully
            theThread.Abort();
            while (!theThread.Join(1000))
            {
                // logme -- the thread is doing something dumb in an exception handler
            }
        }
        exiting.Dispose();
    }

    // WorkUnit should return as quickly as safe if the exiting handle is set
    // If it doesn't the thread will be aborted if it takes longer than abortTimeout
    protected abstract void WorkUnit(WaitHandle exiting);

    // override if you need to cleanup on exit
    protected virtual void ThreadCleanup() { }
} 
```

这使您的线程有机会优雅地退出，并且只有在优雅退出失败时才会中止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:06:22.897

打电话`yourthread.Abort()`。这不像在过去，当资源和锁没有被释放时，这会导致你破坏一切，现在这会引发一个非常好的异常，可以用正常的方式处理......

[http://msdn.microsoft.com/en-us/library/system.threading.thread.abort.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.abort.aspx)

当我说“正常方式”时，似乎线程中止异常自动重新引发（相当不错的技巧）

[http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx)

但这并不能阻止你成为一个混蛋并在接球区开始另一件大事......

# jquery - CSS 装饰按钮变为非活动且不可点击

> ID：14779582
> 
> 赞同：3
> 
> 时间：2013-02-08T19:04:42.677
> 
> 标签：jquery, css, button, click, submit

使用 CSS 自定义按钮后，装饰已正确应用，但按钮变为非活动状态，我无法单击它并且它不会提交。

这是代码：

```
.addToCart {
width: 100px;
border-radius: 4px/4px;
border: 2px #E8CD00;
height:20px;
text-align: center;
vertical-align: center;
font-family: "Trebuchet MS", sans-serif;
font-size: 13px;
font-weight: bold;
padding: 1px;
background-color: #E8CD00;
color: black;
}

<form name="cartAdding">
<input type="hidden" name="productid" />
<input type="hidden" name="command" />
</form>
<input type="submit" value="ADD TO CART" class="addToCart" onclick="addtocart(<?php $itemId?>)" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T19:06:28.433

您需要将 移动`input`到`form`元素中。

```
<form name="cartAdding">
    <input type="hidden" name="productid" />
    <input type="hidden" name="command" />
    <input type="submit" value="ADD TO CART" class="addToCart" onclick="addtocart(<?= $itemId ?>)" />
</form> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T19:06:02.243

把按钮放在里面

```
<form> 
```

标签。另请记住，单击按钮将提交表单，除非您的 Javascript 函数返回 false，否则您可能会看到意外活动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T19:06:32.760

您需要将提交按钮放在表单中，如下所示：

```
<form name="cartAdding">
  <input type="hidden" name="productid" />
  <input type="hidden" name="command" />
  <input type="submit" value="ADD TO CART" class="addToCart" onclick="addtocart(<?php $itemId?>)" />
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T19:08:25.773

编辑：实际上，其他人都更正确 -`<input type="submit" />`需要在`<form></form>`标签内。仍然存在奇怪的 php 代码的问题。

`echo`检查您生成的 HTML - 您在`onclick`处理程序上忘记了一个。

```
 <input type="submit" value="ADD TO CART" class="addToCart" onclick="addtocart(<?php $itemId?>)" />
                                                                                        ^^ - add echo here 
```

您生成的 HTML 可能是这样的：

```
 <input type="submit" value="ADD TO CART" class="addToCart" onclick="addtocart()" /> 
```

或更糟糕的是，其中包含一些 PHP 错误消息。无论哪种方式，被调用的 JS 函数`addtocart()`都可能因为没有得到正确的参数而死掉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T19:10:05.227

您的按钮被按下，检查您的 addtocart 方法的语法，我稍微更改了代码，它运行良好。这是[jsfiddle](http://jsfiddle.net/ZC2M5/)

```
<form name="cartAdding">
<input type="hidden" name="productid" />
<input type="hidden" name="command" />
</form>
<input type="submit" value="ADD TO CART" class="addToCart" onclick="alert('click!!');" /> 
```

# c - (C) 如何将 strncat() 与 **argv 一起使用？

> ID：14779585
> 
> 赞同：-3
> 
> 时间：2013-02-08T19:04:49.390
> 
> 标签：c, pointers, argv

```
int main(int argc, char * argv[]){

   char file_extension[10];

   strncat(file_extension, argv[2][5], 6); 
```

当我这样做时，我得到“警告：传递 'strncat' 的 arg 2 使指针从整数而不进行强制转换'。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:08:17.967

`argv[2]`是 a `char *`，所以这会使`argv[2][5]`a`char`

`strncat`只接受`char *`参数！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T19:13:45.163

因此，如果我最终设法正确理解了您所有模棱两可的评论：您似乎想复制字符串的一部分。

```
const char foo[] = "abcdefghijklm";
const size_t start = 3;
const size_t len = 5;

char the_copy[len + 1];
memcpy(the_copy, foo + start, len);
the_copy[len] = 0; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T19:08:55.540

`argv[2][5]`只是一个字符。

尝试使用`argv[2]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T19:10:15.307

你有几个问题：

*   `argv[2][5]`是单个字符：第 3 个输入参数的第 6 个字符，但 的第二个参数`strncat`采用*指向字符*（即 C 字符串）的指针，而不是单个字符
*   `file_extension`开始时不是空终止的（它是未初始化的），所以调用它是未定义的`strncat`行为
*   的最后一个参数`strncat`是要连接的源字符串的最大字符数，而不是输出缓冲区的大小——它不能保护您免受缓冲区溢出的影响。
*   如果您实际上打算写`strncpy`而不是`strncat`，那么您还需要注意[`strncpy` **不一定会以空值终止输出**](https://stackoverflow.com/questions/1453876/why-does-strncpy-not-null-terminate)

这些问题有一些简单的解决方法，但对您来说最好的解决方法取决于您将要做什么：文件扩展名是只读的吗？你在构建一个新的文件名吗？它会发生什么？

我*强烈*建议你买一本关于 C 字符串和 C 编程的好书，而不是在没有充分理解它在做什么的情况下盲目地编写字符串代码，尤其是当代码编写不正确时存在缓冲区溢出和内存损坏的高风险.

# c++ - 如何加速此代码实现的 OpenCV

> ID：14779586
> 
> 赞同：2
> 
> 时间：2013-02-08T19:04:49.923
> 
> 标签：c++, multithreading, opencv, gpu, tbb

我需要对下面需要大量处理时间的示例代码的建议。我正在 OpenCV 上开发项目，并且有这样的代码块（其中一些是图片）。我应该使用什么来提高速度？比如，OpenMP 或 TBB（这是 OpenCV 中的新功能，更复杂，也许一些示例更有帮助）或 GPU（实现整个项目）或 Boost 库或其他我不知道的第三方库。

我以前没有在 C++ 上写过多线程

谢谢你现在的帮助

示例代码片段：

```
for ( int j = 0; j < 90000000; j++ )
  for ( int i = 0; i < 90000000; i++ )
    for ( int k = 0; k < 90000000; k++ )
             // float point operations 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T20:01:44.107

首先，您应该确保可以线性访问您的内存。例如，如果您有一个矩阵：

```
cv::Mat mat(nrows, ncols, CV_32FC1); 
```

线性访问是：

```
for(int r = 0; r < mat.rows; r++)
{
  for(int c = 0; c < mat.cols; c++)
  {
    mat.at<float>(r,c) ... do something
  }
} 
```

没有线性访问和慢得多将是：

```
for(int c = 0; c < mat.cols; c++)
{
   for(int r = 0; r < mat.rows; r++)
   {
     mat.at<float>(r,c) ... do something
   }
} 
```

因为它拒绝缓存。此外，OpenMP 或 TBB 等技术更可取。但是，如果您能够使用 8 位值进行计算，那么通过 Streaming SIMD Extensions (SSE) 进行并行化也可以将每个内核的代码提高 8 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:33:57.387

OpenMP 是最简单的选项之一。我们可以只使用一些预处理器来并行化 for 循环。这是一个使用 OpenMP 进行点积的简单示例

```
double Dot( int n, double x[], double y[] )
{
  int i;
  double dot_product = 0.0;

# pragma omp parallel \
  shared ( n, x, y ) \
  private ( i )

# pragma omp for reduction ( + : dot_product )

  for ( i = 0; i < n; i++ )
  {
    dot_product = dot_product + x[i] * y[i];
  }

  return dot_product;
} 
```

# javascript - Draw2D：如何将端口用作多个连接的源/目标？

> ID：14779587
> 
> 赞同：1
> 
> 时间：2013-02-08T19:04:54.777
> 
> 标签：javascript, html5-canvas, draw2d-js

所以，我正在尝试将我的课程设置为个人项目，我决定使用 Draw2D，因为我认为它非常完整。我将课程表示为矩形并设置它们之间的连接以显示哪些是其他课程的先决条件，如下所示：

![具有依赖关系的课程列表](../Images/7375a143bd58951d50a8a2eae097fd2b.png) 我遇到的问题是，当试图将同一个端口作为两个连接的源时，它只需要一个而忽略另一个。有任何想法吗？下面是一个快速示例：

```
$(window).load(function () {
    // Create the paint area. The id in the constructor must be
    // an existing DIV 
    var canvas = new draw2d.Canvas("gfx_holder");

    // create and add two nodes which contains Ports (In and OUT)
    var start = new draw2d.shape.node.Hub();
    var startLocator = new draw2d.layout.locator.BottomLocator(start);
    var startLocator2 = new draw2d.layout.locator.BottomLocator(start);

    var startPort = start.createPort("output", startLocator);
    var end   = new draw2d.shape.node.End();
    var end2   = new draw2d.shape.node.End();

    canvas.addFigure( start, 400,100);
    canvas.addFigure( end, 200,150);
    canvas.addFigure( end2, 600,150);

    var c = new draw2d.Connection();
    c.setTargetDecorator(new draw2d.decoration.connection.ArrowDecorator());
    c.setSource(startPort);
    c.setTarget(end.getInputPort(0));
    canvas.addFigure(c);

    var c2 = new draw2d.Connection();
    c2.setTargetDecorator(new draw2d.decoration.connection.ArrowDecorator());
    c2.setSource(startLocator2);
    c2.setTarget(end2.getInputPort(0));
    canvas.addFigure(c2);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:12:10.133

我怀疑您的问题在于 setSource 函数调用。

```
c.setSource(startPort);
c2.setSource(startLocator2); 
```

一个似乎指定了一个端口，另一个似乎指定了一个定位器。

# c++ - 使用大括号符号 C++ 填充动态数组

> ID：14779589
> 
> 赞同：2
> 
> 时间：2013-02-08T19:05:01.743
> 
> 标签：c++, c, arrays, c++11, initialization

c++中有没有办法填充这样分配的数组

```
int **a = new int[4][2]; 
```

这样它就会像这样在一行中填充值

```
int a [4][2] = {{2,3,4},{5,6,7}}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T19:17:20.543

您可以使用[通用初始化符号](http://www.informit.com/articles/article.aspx?p=1852519)在 C++11 中执行此操作：

```
int(*a)[2] = new int[2][2]{{1,2},{3,4}}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:07:41.003

向量的向量可以工作，但仅在 C++11 中。我想你必须为此放弃 C 兼容性

```
#include <vector>

int main()
{
   std::vector<std::vector<int>> v = {{2,3,4},{5,6,7}};   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:16:02.257

如果您的编译器具有足够的 C++11 支持，则首选 std::array 而非 C 样式数组：

```
#include <array>

int main()
{
    std::array<std::array<int,3>,3> v = {1,2,3,4,5,6,7,8,9};
} 
```

# asp.net-mvc-3 - RedirectToAction — 无限循环

> ID：14779590
> 
> 赞同：2
> 
> 时间：2013-02-08T19:05:05.017
> 
> 标签：asp.net-mvc-3

如果 URL 包含错误数据，我会得到一个无限循环。

此 URL 要求查看 ID 相关列表，但提供的 ID 错误

```
<siteroot>/<client>/Class/Index/-1 
```

我检测到那个错误`RedirectToAction("Index")`的 ID，并在没有 ID 的情况下执行该操作，而应该显示一个通用列表。但是当重定向被路由时，错误的 ID 仍然存在！

请注意，ID 对于 Index 方法是可选的`public ActionResult Index(int? id, int? yid)`

谢谢，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:12:00.857

在重定向中显式传递 id 的空值

```
 int? badId = null;
 return RedirectToAction("Index", new {id = badId}); 
```

不能`id = null`直接在匿名路由值对象中赋值，所以需要上一行将id设置为null。我不知道是什么`yid`，但您可能还需要明确设置它，以免错误的 id 落入该参数。

# php - 从 IPv6 字符串 (php) 增加单个 IP

> ID：14779592
> 
> 赞同：3
> 
> 时间：2013-02-08T19:05:13.293
> 
> 标签：php, ipv6

从 IPv6 字符串中列出前 x 个 IPv6 IP 的简单、优雅的方法是什么？

例如，

listIPs("2600:f333:10:c000::0", 4)

回声

*   2600:f333:10:c000::1
*   2600:f333:10:c000::2
*   2600:f333:10:c000::3
*   2600:f333:10:c000::4

这是一个可能适用于 IPv4 的代码示例，因为它转换为 int：

```
$input = "2600:f333:10:c000::/51";
$max = 4;

list($block, $cidr) = explode("/", $input);

$first = inet_pton( $block );
echo inet_ntop($first) . "\n";

for ($i = 1; $i < $max; $i++) {
   //todo: die if it has exceeded block size based on $cidr
   echo inet_ntop($first + $i) . "\n"; //doesn't work, packed binary?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:57:02.400

这是一个用 C 编写的示例程序（因为我不懂 C++）。它相当快，但我对此并不满意。也许有人可以帮助我改进它。

**编辑：**显然，我在它变成一个仅限 PHP 的问题之前写了这个。将其转换为 PHP 留给读者作为练习 (ew)。

```
#include <arpa/inet.h>
#include <string.h>
#include <stdlib.h>
#include <errno.h>
#include <stdio.h>
#include <ctype.h>

/*
 * Syntax: ./ipv6_list <ip>/<cidr-prefix>
 */
int main(int argc, char **argv) {
    uint8_t start[16];
    uint8_t address[16];
    uint8_t mask[16] = { 0 };

    uint8_t prefix = 128;
    char *prefix_location;

    int i;

    /* This is the octet that, when changed, will result in <IP> & <mask> != <start IP> */
    int mask_check_octet = 0;

    if(argc != 2)
        return 1;

    /* Find prefix */
    if((prefix_location = strstr(argv[1], "/")) != NULL) {
        char *prefix_search = prefix_location + 1;
        char *prefix_remaining;
        long prefix_test;

        if(!isdigit(*prefix_search))
            return 2;

        errno = 0;
        prefix_test = strtol(prefix_search, &prefix_remaining, 10);
        if(errno == ERANGE || prefix_test < 0 || prefix_test > 128 || strcmp(prefix_remaining, "") != 0)
            return 2;

        prefix = (uint8_t)prefix_test;
        *prefix_location = '\0'; /* So we can just pass argv[1] into inet_pton(3) */
    }

    /* Convert prefix into mask */
    for(i = 0; i < 16; i++) {
        if(prefix == 0)
            break;

        mask_check_octet = i;
        if(prefix < 8) {
            mask[i] = ~((1 << (8 - prefix)) - 1);
            break;
        }
        else
            mask[i] = UINT8_MAX;

        prefix -= 8;
    }

    /* Find address */
    if(inet_pton(AF_INET6, argv[1], start) != 1)
        return 3;

    /* Start at the beginning of the network */
    for(i = 0; i < 16; i++) {
        start[i] &= mask[i];
        address[i] = start[i];
    }

    /* Iterate */
    while((address[mask_check_octet] & mask[mask_check_octet]) == start[mask_check_octet]) {
        char address_str[INET6_ADDRSTRLEN];
        inet_ntop(AF_INET6, address, address_str, sizeof(address_str));
        printf("%s\n", address_str);

        /* Add one to the address */
        for(i = 15; i >= 0; i--) {
            if(address[i] != UINT8_MAX)
                break;
        }
        address[i]++;
        for(i++; i < 16; i++)
            address[i] = 0;
    };

    return 0;
} 
```

你可以使用标准的 shell 命令来限制它的输出（或者只是修改`while`循环）：

```
nfontes@brioche:~$ ./ipv6_list '2607:fc50:0:d00::0/106' | head -n 200
2607:fc50:0:d00::
2607:fc50:0:d00::1
2607:fc50:0:d00::2
2607:fc50:0:d00::3
2607:fc50:0:d00::4
2607:fc50:0:d00::5
2607:fc50:0:d00::6
2607:fc50:0:d00::7
2607:fc50:0:d00::8
2607:fc50:0:d00::9
2607:fc50:0:d00::a
2607:fc50:0:d00::b
2607:fc50:0:d00::c
2607:fc50:0:d00::d
2607:fc50:0:d00::e
[...]
2607:fc50:0:d00::c0
2607:fc50:0:d00::c1
2607:fc50:0:d00::c2
2607:fc50:0:d00::c3
2607:fc50:0:d00::c4
2607:fc50:0:d00::c5
2607:fc50:0:d00::c6
2607:fc50:0:d00::c7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T19:49:39.933

类似的东西（在 PHP 中）。它接受一个 IPv4/IPv6 地址并按给定值递增：

```
// Takes an IPv4/IPv6 address in string format, and increments it by given value
function incrementIp($ip, $increment)
{
  $addr = inet_pton ( $ip );

  for ( $i = strlen ( $addr ) - 1; $increment > 0 && $i >= 0; --$i )
  {
    $val = ord($addr[$i]) + $increment;
    $increment = $val / 256;
    $addr[$i] = chr($val % 256);
  }

  return inet_ntop ( $addr );
} 
```

# model-view-controller - MVC - 视图变量？

> ID：14779594
> 
> 赞同：0
> 
> 时间：2013-02-08T19:05:21.887
> 
> 标签：model-view-controller

使用 MVC 模式说我有一个视图和一个控制器：

```
Controller
  User

View
  User
    login
    logout
    dashboard 
```

用户控制器具有以下操作：

```
loginAction
logoutAction
dashboardAction 
```

登录视图有一个简单的登录表单，现在我的问题是：

表单应该从哪里获取其操作 url？

这是否应该在视图中进行硬编码，例如：

```
<form action="/post.php" method="post"> 
```

控制器应该告诉视图似乎不正确，那么这还能去哪里呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:01:14.683

控制器告诉视图它需要的一切，视图显示它。视图不知道控制器。

```
@using (Html.BeginForm("Login", "Account", FormMethod.Post, new { @class = "form-signin", ReturnUrl = ViewBag.ReturnUrl }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

    <h2 class="form-signin-heading">Please sign in</h2>            
    <br />
    @Html.TextBoxFor(m => m.UserName, new { @class = "input", type = "text", placeholder = "Username" })     
    <br />
    @Html.PasswordFor(m => m.Password, new { @class = "input", type = "password", placeholder = "Password" });
    <br /><br />
    <button type="submit">Sign in</button>            
} 
```

在该登录表单中，控制器上方法的链接是（“Login”，“Account”），其中“Login”是方法名称，“Account”是控制器名称。

# ruby - 远程服务器上的 Capistrano git 需要密码

> ID：14779595
> 
> 赞同：0
> 
> 时间：2013-02-08T19:05:24.680
> 
> 标签：ruby, ruby-on-rails-3, capistrano

我正在尝试使用 Capistrano 进行部署。我的远程服务器使用 ssh 密码访问 github。Capistrano "cap deploy:update" 命令可以访问 Github，然后登录到远程服务器，我可以看到它设置的命令：

```
git clone -q <github link> 
```

然后，在远程服务器上，它似乎不知道它必须要求提供 SSH 密码。（所以我得到 Permission denied (publickey) 错误）

我尝试了一些建议的解决方案，例如 config/deploy.rb 文件中的 ssh-options，但它们不起作用。我怎样才能让 Capistrano 知道在远程服务器上询问 SSH 密码？这是我试过的：

ssh_options[:forward_agent] = true

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:17:27.710

如果向远程服务器添加 GitHub 部署密钥，情况会好很多。Capistrano 不能很好地使用基于密码的身份验证。

# php - 如何仅加载 Zend Framework 2 数据库模块

> ID：14779600
> 
> 赞同：2
> 
> 时间：2013-02-08T19:05:46.213
> 
> 标签：php, zend-framework2, database-abstraction

Zend Framework 2 声称有一个“随意使用”的设计，允许您轻松使用它的任何模块，而无需提交完整的堆栈。我需要一个好的数据库访问层，并且从在线文档和建议中，我喜欢 Zend\Db 的外观。我已将 Zend/Db 文件夹放在我的 /lib 目录中，但我无法让 PHP 识别 Zend\Db\Adapter\Adapter 类。当我尝试使用它时，我不断收到一个致命错误：

> 致命错误：在第 6 行的 /home/username/public_html/test.php 中找不到类“Zend\Db\Adapter\Adapter”

我尝试在我的 .htaccess 中设置 ZF2_PATH： `SetEnv ZF2_PATH /home/username/public_html/lib/Zend`

我尝试在我的代码中设置包含路径： `set_include_path( $_SERVER['DOCUMENT_ROOT'] . '/lib' . PATH_SEPARATOR . get_include_path() );`

我已经尝试显式加载和实例化 Zend\Loader：

```
require_once 'lib/Zend/Loader/StandardAutoloader.php';
$zendLoader = new Zend\Loader\StandardAutoloader();
$zendLoader->register(); 
```

这些都没有任何效果。我尝试明确要求 Zend/Db/Adapter/Adapter.php，这确实解决了我看到的错误，但随后我得到了它的一个依赖项的相同错误，所以这不是一个实际的解决方案。

我在这里做错了什么？ZF2 是否真的不是为这种模块化使用而设计的，还是我遗漏了什么？

编辑：我通过编写自己的自动加载函数来实现这一点：

```
function autoloader($class) {
    $path = explode('\\', $class);
    foreach ($path as $p) {
        $cp .= DIRECTORY_SEPARATOR . $p;
    }
    include __DIR__ . '/lib/' . $cp . '.php';
}
spl_autoload_register(autoloader); 
```

这是有道理的——显然，如果我使用 db 模块而不使用框架的其余部分，我不能指望框架为我自动加载——除了我仍然不明白为什么手动加载 Zend\Loader没有解决问题。Zend\Loader 不是处理自动加载的重点吗？无论如何，我现在有一个可行的解决方案，但如果有更好的解决方案，我很想听听。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T21:32:44.260

我强烈建议您查看[composer](http://getcomposer.org/)。它确实简化了管理大量现代 PHP 库之间的依赖关系以及自动加载。

例如，如果你开始你的项目，并且你知道你想要引入 zend-db，你会做这样的事情：

```
$ mkdir myproject
$ cd myproject
$ curl -s https://getcomposer.org/installer | php   
$ ./composer.phar require zendframework/zend-db:2.1.1 
```

最后一行将导致作曲家开始行动。它将创建一个名为“vendor”的目录，其中保存了它管理的所有库。然后它将在那里检查 zend-db 的 2.1.1 版本，并设置您在项目中需要的 vendor/autoload.php。

然后你可以测试一下。像这样创建 myproject/index.php：

```
<?php
require_once "vendor/autoload.php";

$adapter = new Zend\Db\Adapter\Adapter(array(
   'driver' => 'Pdo_Sqlite',
   'database' => 'path/to/sqlite.db'
)); 
```

它只是工作。

稍后，如果您决定也需要 Zend\Mail，您只需：

```
$ ./composer.phar require zendframework/zend-mail:2.1.1 
```

composer 将安装它以及一些依赖项，并确保它对自动加载器可用。

Composer 也不是 ZF 特定的。有一个完整的代码生态系统可供探索。 [Packagist](https://packagist.org/explore/)是一个很好的起点。

# javascript - Indesign CS6, Javascript

> ID：14779602
> 
> 赞同：0
> 
> 时间：2013-02-08T19:05:49.153
> 
> 标签：javascript, adobe-indesign

我是一个 javascript 初学者。我在 indesign CS6 工作。我已经为整个文档中使用的所有字体分配了段落和字符样式。使用字符样式，我将某些类型的颜色更改为紫色。紫色文本用于引起对该文本的特别注意。但是我希望能够打开和关闭紫色文本。当我关闭紫色时，我希望文本变为灰色。我确实需要能够将它改回紫色。反正有没有使用脚本来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:19:20.617

您可以创建专用色板并更改其颜色成分以适合您的口味。所有引用，例如来自样式内部的引用都将遵循。

```
// assuming the swatch is already created
var swatch = app.activeDocument.swatches.itemByName("purple");
swatch.properties = {model:1886548851, space:1129142603, colorValue:[0, 0, 0, 30]}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-25T04:00:59.597

以下脚本将指定字符样式的内部颜色设置从“紫色”命名的样本更改为“灰色”命名的样本，反之亦然。

```
var myDoc = app.activeDocument;   
var charStyle = myDoc.characterStyles.item('My Character Style');
var purple = myDoc.colors.item('purple');
var grey = myDoc.colors.item('grey');
if (charStyle.fillColor == purple)
    charStyle.fillColor = grey;
else charStyle.fillColor = purple; 
```

如果设置为紫色，则更改为灰色，如果设置为灰色，则更改为紫色。

（更改样本名称和字符样式以满足您的需要）

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-08T19:09:02.813

你可以试试这个：

[http://forum.jquery.com/topic/toggle-change-row-color](http://forum.jquery.com/topic/toggle-change-row-color)

尝试为您的“紫色文本”创建一个类，并添加/删除该类以更改颜色。

这个链接有一个类似的问题：

[您如何切换链接以保持某种颜色，直到再次单击](https://stackoverflow.com/questions/6712672/how-do-you-toggle-links-to-stay-a-certain-color-until-clicked-again)

# html - @font-face 问题。我似乎无法让它工作

> ID：14779603
> 
> 赞同：1
> 
> 时间：2013-02-08T19:05:58.770
> 
> 标签：html, css, fonts, font-face

我有一个不会在任何浏览器上加载的 .otf 字体。我觉得我遵循了@font-face 规则，所以我很困惑。它位于我的投资组合网站底部，即社交媒体按钮。它们读作 af 和 i，但它们应该是 facebook 和linkedin 图标。有任何想法吗？谢谢

[我的投资组合网站](http://wrobbins.me)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:31:08.277

您的字体 url 对我来说似乎也没有找到，所以我做了一个快速的谷歌搜索，[这](https://stackoverflow.com/questions/10361200/css-defined-font-not-found)听起来与您的问题相似。可能是您需要告诉您的站点如何处理该特定文件扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:08:47.810

Font Squirrel 有一个很棒的生成器。

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

我建议使用它来生成您的 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:09:59.300

您的资源没有提取 socialico.otf 字体...确保它位于正确的目录中。

见：[http](http://wrobbins.me/fonts/socialico.otf) ://wrobbins.me/fonts/socialico.otf (404)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T19:09:31.727

在 Chrome 中，它说找不到您的字体网址。

**编辑**

我用谷歌搜索，[这个](https://stackoverflow.com/questions/4051826/font-face-problem-in-chrome)答案提到它是一个服务器问题。

# sql - 带有日期的 Oracle 时间戳转换

> ID：14779610
> 
> 赞同：0
> 
> 时间：2013-02-08T19:06:23.880
> 
> 标签：sql, oracle, date, timestamp

假设这有一个简单的解决方案，但我找不到它。

我正在尝试对 Oracle 中的 DATE 字段执行一些逻辑。我的愿望是获取一个 DATE 字段并从中减去 X 小时。

例如：`SELECT A.MyDATE - 100 Hours from dual;`

但是，我需要时间戳格式“YYYY-MM-DD hh:mm”的结果。

我试过`CAST(A.MyDATE as TIMESTAMP) - NUMTODSINTERVAL(100/24,'day')`但是没有用。

我发现问题在于 MyDATE 字段在转换为时间戳时仍然包含一些剩余时间元素。我怎样才能重置这些？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:13:46.983

你可以用减法来做到这一点：

```
select a.MyDate - 100.0/24 
```

要转换为 varchar：

```
select to_char(a.MyDate - 100.0/24, 'YYYY-MM-DD') 
```

而且，如果你想摆脱约会的那个讨厌的时间：

```
select trunc(a.MyDate - 100.0/24) as JustTheDate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T19:15:31.540

我的示例中的格式和日期可以更改为任何其他格式和日期：

```
SELECT To_Timestamp(To_Char(Sysdate - INTERVAL '100' HOUR, 'MM/DD/YYYY HH24:MI'), 'MM/DD/YYYY HH24:MI')
 FROM dual
/

Output:

2/4/2013 10:18:00.000000000 AM

To remove time element add Trunc() to any of your dates...:

SELECT Trunc(To_Timestamp(To_Char(Sysdate - INTERVAL '100' HOUR, 'MM/DD/YYYY HH24:MI'), 'MM/DD/YYYY HH24:MI'))
FROM dual
/

Output: 2/4/2013

Conversion/Casting - when using other dates in place of sysdate then add formats as in my other examples:

SELECT CAST(SYSDATE AS TIMESTAMP) - INTERVAL '100' HOUR FROM dual
/

Output: 2/4/2013 10:26:35.000000000 AM

SELECT start_date tstamp_to_date, CAST(start_date AS timestamp) date_to_tstamp FROM
 (
  SELECT to_date(to_char(to_timestamp ('2013-02-07 10:07:47.000' , 'YYYY-MM-DD HH24:MI:SS.FF'),'DD-MON-YYYY HH24:MI:SS'), 'DD-MON-YYYY HH24:MI:SS') start_date
  FROM dual
 )
/

Output:

tstamp_to_date          date_to_tstamp 
-------------------------------------------------------
2/7/2013 10:07:47 AM    2/7/2013 10:07:47.000000 AM 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T19:26:22.457

在 Oracle 中，a`DATE`始终具有日期和时间组件。根据您使用的工具和会话的不同`NLS_DATE_FORMAT`，当您查看数据时，该工具完全有可能不显示时间组件。但这只是一个显示问题，它对实际数据没有影响。

如果您想从`MyDate`代表的那一天的午夜减去 100 小时

```
SELECT TRUNC(MyDate) - interval '100' hour
  FROM dual 
```

这将返回一个`DATE`. 如果要返回特定格式的字符串

```
SELECT TO_CHAR( TRUNC(MyDate) - interval '100' hour,  'YYYY-MM-DD hh:mi am' )
  FROM dual 
```

请注意，我假设您的问题中有错字。我假设您想要显示小时 ( `mi`) 之后的分钟，而不是月份 ( `mm`)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:52:01.903

我正在尝试获取超过 30 天的记录（来自 Mod_date），我正在使用以下查询，它正在返回所有数据，我只想要 30 天前的数据。

示例：- Mod_date 03-NOV-12 12.00.00.000000000 AM

询问 ：-

从 fil_cnfact 中选择 Mod_date 其中 Mod_date <= sysdate -30 order by Mod_date asc ；

# windows-8 - 在 Windows 8 上等效的 UserExtendedProperties.GetValue("ANID")

> ID：14779614
> 
> 赞同：0
> 
> 时间：2013-02-08T19:06:32.243
> 
> 标签：windows-8

在 Windows Phone 7 上，您可以这样做以获取当前用户的匿名唯一 ID。

```
UserExtendedProperties.GetValue("ANID") 
```

我已经搜索了一段时间以找到我当前的 Windows 8 (WinRT) 的等价物，但我似乎找不到它。我找到的所有结果都讨论了如何获取受支持的硬件/设备特定 ID，这不是我需要的。

在此先感谢，马德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:16:58.513

多亏了 xamlgeek 和其他人，我们发现在 Windows 8 中无法获得唯一用户 ID - 至少目前是这样。

所以我不得不退回到设备 ID，这远非我所需要的，但发现这个代码片段非常完美（C#）：

[http://bartwullems.blogspot.co.uk/2012/09/windows-8-uniquely-identifying-device.html](http://bartwullems.blogspot.co.uk/2012/09/windows-8-uniquely-identifying-device.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T20:20:18.407

答案一点都不好，因为用户可以升级他的 PC 配置（通过插入蓝牙适配器或其他任何东西）。好的答案是使用对象：

`Windows.Storage.ApplicationData.Current.RoamingSettings.Values["HighPriority"]`

它通过云上应用程序的不同安装同步，更多信息在这里：HighPriority 密钥是特殊的，因为它是在新安装应用程序期间自动获取的。

[http://blogs.msdn.com/b/windowsappdev/archive/2012/07/17/roaming-your-app-data.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/07/17/roaming-your-app-data.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T15:50:17.813

使用 GetPackageSpecificToken 是不明智的。即使用户只是将 USB 设备插入他的 PC/标签，或者打开/关闭 Wifi，此 ID 也会改变。实际上这是一个非常不稳定的事情，不知道为什么 MSFT 会成功。

我改用 LiveConnect（仅需要 Liveconnect 用户 ID，并且在所有用户设备上都相同）。它更可靠。在这里查看我的帖子：[https ://stackoverflow.com/a/22389679/1656824](https://stackoverflow.com/a/22389679/1656824)

# c# - FileSystemWatcher 用于监视文件夹/文件打开

> ID：14779616
> 
> 赞同：7
> 
> 时间：2013-02-08T19:06:38.497
> 
> 标签：c#, .net, wpf, filesystemwatcher

我已经浏览过，但找不到任何关于我正在寻找的信息，如果有另一个帖子已经涵盖了这个，那么我道歉。

我正在寻求有关代码的帮助，该代码将监视特定文件夹何时被其他人打开或打开所述文件夹下的文件。此时我可以看到用户何时打开和修改任何文件，但如果他们只是打开文件来查看它，即使我添加 LastAccessed，它也不会引发事件。任何信息或帮助将不胜感激。

文件夹名称是 C:\Junk

C# 4.0 中的代码：

```
 [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    public static void Run()
    {

        FileSystemWatcher watcher = new FileSystemWatcher();
        watcher.Path = @"C:\";
        watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
           | NotifyFilters.FileName | NotifyFilters.DirectoryName;
        watcher.Filter = "junk";

        // Add event handlers.
        watcher.Changed += new FileSystemEventHandler(OnChanged);
        watcher.Created += new FileSystemEventHandler(OnChanged);
        watcher.Deleted += new FileSystemEventHandler(OnChanged);
        watcher.Renamed += new RenamedEventHandler(OnRenamed);
        watcher.IncludeSubdirectories = true;
        watcher.EnableRaisingEvents = true;

        // Wait for the user to quit the program.
        Console.WriteLine("Press \'q\' to quit the sample.");
        while (Console.Read() != 'q') ;
    }

    // Define the event handlers. 
    private static void OnChanged(object source, FileSystemEventArgs e)
    {
        // Specify what is done when a file is changed, created, or deleted.
        Console.WriteLine("File: " + e.FullPath + " " + e.ChangeType);
    }

    private static void OnRenamed(object source, RenamedEventArgs e)
    {
        // Specify what is done when a file is renamed.
        Console.WriteLine("File: {0} renamed to {1}", e.OldFullPath, e.FullPath);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:13:28.393

> 即使我添加 LastAccessed，它也不会引发事件。

因为`NotifyFilters.LastAccessed`指定您希望检索该属性，而不是要订阅的事件。可用的事件是`Changed`、`Created`或`Deleted`，它们都不符合您的要求。

您应该查看[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465(v=vs.85).aspx)[`ReadDirectoryChangesW`](http://www.pinvoke.net/default.aspx/kernel32.readdirectorychangesw)记录的 Win32 函数。它可以传递一个标志，这似乎提供了你想要的东西：`FILE_NOTIFY_CHANGE_LAST_ACCESS`

> 对监视目录或子树中文件的最后访问时间的任何更改都会导致更改通知等待操作返回。

编辑：忽略这一点，`FileSystemWatcher`确实在内部传递`NotifyFilters.LastWrite`为 int 32，这与`FILE_NOTIFY_CHANGE_LAST_ACCESS`, to相同`ReadDirectoryChangesW`。然后该功能仍然不会通知文件访问，我已经尝试过了。

也许这是由[这个](http://blogs.technet.com/b/filecab/archive/2006/11/07/disabling-last-access-time-in-windows-vista-to-improve-ntfs-performance.aspx)引起的：

> Last Access Time 具有松散的粒度，仅保证时间精确到一小时以内。在 Windows Vista 中，我们禁用了对上次访问时间的更新以提高 NTFS 性能。如果您正在使用依赖此值的应用程序，则可以使用以下命令启用它：
> 
> ```
> fsutil behavior set disablelastaccess 0 
> ```
> 
> 您必须重新启动计算机才能使此更改生效。

如果您在命令提示符下执行该操作，则可能`LastAccess`会写入该事件并触发该事件。我不打算在我的 SSD 上试用，也没有准备好 VM，但在 Windows 7 上`disablelastaccess`似乎是开箱即用的。

如果禁用该行为后仍然无法正常工作，请等待 Raymond Chen（或他自己）的建议箱出现，通常有一个非常合乎逻辑的解释来解释为什么文档似乎没有正确描述您遇到的行为。;-)

您也可以循环扫描目录并查看文件的 LastAccessed 属性。*当*用户打开某个文件时，您想做什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-28T09:47:02.953

要获得 On-Access 文件路径，有一种 minifilter 驱动程序解决方案。您必须实现 minifilter 驱动程序才能实现要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:50:30.423

what you really need is [NtQuerySystemInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724509%28v=vs.85%29.aspx) enumeration and a timer, that way you can scan the directory and see if any of the files are open. the filesystemwatcher will not give you this info

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T19:13:15.347

你应该设置

```
watcher.Path = @"C:\junk"; 
```

`watcher.Filter`如果事件应该为所有文件触发，则删除行

使用[Filter](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.filter.aspx)属性，您可以为匹配的文件设置通配符，例如`*.txt`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-14T09:01:50.913

```
public void OnChanged(object sender, FileSystemEventArgs e)
{
    string FileName = System.IO.Path.GetFileName(e.FullPath);

    if(IsAvailable(System.IO.Path.Combine(RecievedPath,FileName)))
    {
        ProcessMessage(FileName);
    }
}

private void ProcessMessage(string fileName)
{
    try
    {
       File.Copy(System.IO.Path.Combine(RecievedPath,fileName), System.IO.Path.Combine(SentPath,fileName));
        MessageBox.Show("File Copied");
    }
    catch (Exception)
    { }
}

private static bool IsAvailable(String filePath)
{
    try
    {
        using (FileStream inputStream = File.Open(filePath, FileMode.Open, FileAccess.Read, FileShare.None))
        {
            if (inputStream.Length > 0)
            {
                return true;
            }
            else
            {
                return false;
            }

        }
    }
    catch (Exception)
    {
        return false;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-24T12:23:43.547

Digvijay Rathore 已经给出了答案，在我看来这是唯一好的答案，即使有点太短了。

我只想添加几句话和一个感兴趣的用户可以开始的链接。

FileSystemWatcher 仅用于监视受监视文件夹内发生的事情，但它无法监视和拦截用户（或操作系统）正在执行的操作。

例如，使用 FSW (FileSystemWatcher)，您可以监视何时以某种方式创建、删除、重命名或更改文件/文件夹，并且这些事件在操作完成后释放，而不是之前或期间。

一个简单的 FSW 无法知道用户是否正在从受监视的文件夹启动可执行文件，在这种情况下，它根本不会生成任何事件。

要在启动可执行文件之前捕获可执行文件的启动时间（以及大量其他“事件”）并在可执行文件的代码加载到内存之前执行一些操作，您需要在较低（内核）级别编写一些内容，即您需要构建一个驱动程序，在这种特定情况下是一个（微过滤器）文件系统驱动程序。

这是开始了解 Minifilter Windows 驱动程序基础的一个很好的起点：

[https://docs.microsoft.com/en-us/windows-hardware/drivers/ifs/file-system-minifilter-drivers](https://docs.microsoft.com/en-us/windows-hardware/drivers/ifs/file-system-minifilter-drivers)

# javascript - highcharts：对象不支持此属性或方法 IE8

> ID：14779620
> 
> 赞同：1
> 
> 时间：2013-02-08T19:06:53.020
> 
> 标签：javascript, highcharts

使用 highcharts 时，我似乎在 IE8 中收到此错误：对象不支持此属性或方法
在 Chrome 中，同一站点可以完美运行！
我在 Chrome 调试器中没有收到任何错误。

网址：http: [//63.gradernord.no](http://63.gradernord.no)

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:28:59.383

如果 javascript 变量与 html 元素具有相同的名称，Internet Explorer 有时会出错。将您的 javascript 变量名称切换为 windspeed，它应该可以工作 [https://stackoverflow.com/a/14003088/2033671](https://stackoverflow.com/a/14003088/2033671)

# django - 使用 Django 的注册和登录与 Django-allauth

> ID：14779621
> 
> 赞同：1
> 
> 时间：2013-02-08T19:06:57.527
> 
> 标签：django

我一直在尝试向我的应用程序添加一项功能，以便用户可以将他们在我的网站上创建的帖子推送到 Facebook、Twitter 和 G+ 个人资料。

所以我决定[django-allauth](https://github.com/pennersr/django-allauth)是一个很好的方法。但我想要的是用户使用 Django 的身份验证后端注册和登录，一旦他们进入系统，他们就可以选择链接他们的 FB、Twitter 和 G+ 个人资料。

有没有办法使用 django-allauth 实现这种功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T19:54:24.500

鉴于我们上面的评论讨论，您最初的问题并不是您真正想要的。

如果其他人感兴趣，仍然要提供该原始问题的答案：`allauth`现在 (*) 支持`is_open_for_signup(self, request, sociallogin)`您可以覆盖的方法。它位于 DefaultSocialAccountAdapter 上。只需在此处返回 false 即可禁用社交注册。

(*) 自[https://github.com/pennersr/django-allauth/commit/6794afedcdeaafa907f1184772371f44e742514f](https://github.com/pennersr/django-allauth/commit/6794afedcdeaafa907f1184772371f44e742514f)

# phantomjs - phantomjs中奇怪的页面宽度

> ID：14779628
> 
> 赞同：4
> 
> 时间：2013-02-08T19:07:36.607
> 
> 标签：phantomjs, screen-capture

这是脚本代码：

```
var page = require('webpage').create();

page.paperSize = {
  format: 'A4', 
  orientation: "landscape"
};

page.open('http://www.google.com', function () {

  var arr = page.evaluate(function () {
     var pageWidth = document.body.clientWidth;
     var pageHeight = document.body.clientHeight;

     return [pageWidth, pageHeight];
  });

  console.log('pagwWidth: ' + arr[0] + '; pageHeight: ' + arr[1]);

  page.render('google.pdf');
  phantom.exit();    
}); 
```

我正在尝试获取 document.body 页面的 clientWidth 和 clientHeight。当我执行此脚本时，我得到以下值：

```
pagwWidth: 400; pageHeight: 484 
```

为什么上面的宽度是400px？我想我应该更宽。

* * *

感谢您的答复。但后来我不明白下面的事情。当我使用 viewportSize = {width: 1024, height: 800}

```
var page = require('webpage').create();

page.paperSize = {
  format: 'A4', 
  orientation: "landscape"
};

page.viewportSize = {width: 1024, height: 800};
page.open('http://www.google.com', function () {

  page.render('google.pdf');
  phantom.exit();    
}); 
```

我得到以下文件： ![在此处输入图像描述](../Images/aa7174012cfdf9b62953231e6b7e008a.png)

但是如果我使用 viewportSize = {width: 400, height: 400}

```
var page = require('webpage').create();

page.paperSize = {
  format: 'A4', 
  orientation: "landscape"
};

page.viewportSize = {width: 400, height: 400};
page.open('http://www.google.com', function () {

  page.render('google.pdf');
  phantom.exit();    
}); 
```

我也一样： ![在此处输入图像描述](../Images/64ec009849c114ca25e7c213bf897333.png)

所以我不明白 viewportSize 对视图有何影响？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T04:21:56.683

文档受视口大小而不是纸张大小的影响。沿着这条线思考，网页在您的网络浏览器中的外观与您当前的打印机设置无关。

`viewportSize`如果您想影响页面布局，请使用：

```
page.viewportSize = { width: 1024, height: 800 }; 
```

# ios - 移动时淡入和淡出 UIView

> ID：14779633
> 
> 赞同：6
> 
> 时间：2013-02-08T19:07:51.140
> 
> 标签：ios, animation, uiview

动画视图很容易：

```
[UIView animateWithDuration:1.0
                     animations:^{theView.center = newCenter; theView.alpha = 0;}
                     completion:^(BOOL finished){
                         [theView removeFromSuperview];
                     }]; 
```

问题是当我将它添加为子视图时，我希望它淡入并且看起来已经在移动。现在它立即出现，然后移动并淡出。

所以，我需要将它的初始 alpha 设置为零，在它移动时快速淡化它，然后淡出它。这可能与 UIView 动画吗？我不能让两个相互竞争的动画块在同一个对象上工作，对吧？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T19:27:21.517

您需要做的就是连续应用 2 个动画。像这样的东西::

```
theView.alpha = 0;
[UIView animateWithDuration:1.0
                 animations:^{
                     theView.center = midCenter;
                     theView.alpha = 1;
                 }
                 completion:^(BOOL finished){
                     [UIView animateWithDuration:1.0
                                      animations:^{
                                          theView.center = endCenter;
                                          theView.alpha = 0;
                                      }
                                      completion:^(BOOL finished){
                                          [theView removeFromSuperview];
                                      }];
                 }]; 
```

所以在第一秒它会在移动时出现，然后在下一秒它会淡出

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T19:24:20.393

将初始 alpha=0 放在动画块之外。

```
theView.alpha = 0;
[UIView animateWithDuration:1.0
                 animations:^{
                     theView.center = newCenter; 
                     theView.alpha = 1;
                 }
                 completion:^(BOOL finished){
                     // Do other things
                 }]; 
```

# c# - 在多态对象图之间转换

> ID：14779636
> 
> 赞同：0
> 
> 时间：2013-02-08T19:07:58.747
> 
> 标签：c#, architecture

*前面冗长的软件架构问题*

**清晰度编辑**：我正在尝试将包含 `NodeA`, `NodeB`, ...等类型的对象图转换为包含`*My*NodeA`, ... 等类型的对象图，`*My*NodeB`反之亦然。类型中的属性`NodeX`对应于类型中的相似属性`MyNodeX`，但在许多情况下，它*不仅仅是*一个简单的赋值。

如果我有两个类似的类结构：

`// pure model, i.e. minimal information that is convenient for storage`

```
abstract class Node
{
    public int BaseProperty { get; set; }
    public NodeCollection Children { get; private set; } // : Collection<Node>
}

class NodeA /* NodeB, NodeC ... */ : Node
{
    public int DerivedAProperty { get; set; }
} 
```

和

`// objects that are convenient for being used by the application`

```
abstract class MyNode
{
    public int MyBaseProperty { get; set; }
    public MyNodeCollection Children { get; private set; } // : Collection<MyNode>
}

class MyNodeA /* MyNodeB, MyNodeC ... */ : MyNode
{
    public int MyDerivedAProperty { get; set; }
} 
```

，并且我需要将`NodeX`类型的对象图转换为其中一种`MyNodeX`类型，反之亦然，根本*不更改任何`NodeX`类*，我发现自己经常使用这种模式：

**NodeX -> MyNodeX**

```
// USAGE / external code
Node node = ...
MyNode myNode = MyNode.Load(node, ARGS); // static factory
```

```
abstract class MyNode
{
    ...
    // factory
    public static MyNode Load(Node node, ARGS)
    {
        var type = node.GetType();
        MyNode myNode;
        // no 'is' usage because NodeB could be derived from NodeC etc.
        if (type == typeof(NodeA))
            myNode = new MyNodeA(ARGS); // arbitrary ctor
        else if (...)
            ...
        myNode.Load(Node);
        return myNode
    }
    public virtual void Load(Node node)
    {
        this.MyBaseProperty = node.BaseProperty;
        foreach (var child in node.Children)
            this.Children.Add(MyNode.Load(child, this.ARGS));
    }
}
class MyNodeA : MyNode
{
    ...
    public override void Load(Node node)
    {
        var m = (NodeA)node; // provoke InvalidCastException if coding error
        base.Load(node);
        this.MyDerivedAProperty = m.DerivedAProperty;
    }
} 
```

**MyNodeX -> 节点X**

```
// USAGE / external code
MyNode myNode = ...
Node node = myNode.Commit();
```

```
abstract class MyNode
{
    ...
    // 'kind of' factory
    public abstract Node Commit();
    public virtual Commit(Node node)
    {
        node.BaseProperty = this.MyBaseProperty;
        foreach (var child in this.Children)
            node.Children.Add(child.Commit());
    }
}
class MyNodeA : MyNode
{
    ...
    public override Node Commit()
    {
        var m = new NodeA(); // "factory" method for each type
        this.Commit(m);
        return m;
    }
    public override void Commit(Node node)
    {
        var m = (NodeA)node; // provoke InvalidCastException if coding error
        base.Commit(node);
        m.DerivedAProperty = this.MyDerivedAProperty;
    }
} 
```

我已经多次成功地使用了这种方法，而且我一般都喜欢它，因为必须添加到类中的方法是直截了当的，外部代码也是如此。`base.Load(node)`此外，它通过调用/来避免代码重复`base.Commit(node)`。但是，我真的不喜欢静态`Load`工厂方法中的 if/else 阶梯。

**对于Node -> MyNode** ( ) 情况，我希望在每种类型中都有一个工厂方法`Load`，类似于在**MyNode -> Node** ( `Commit`) 情况下的情况。但是`static`，`virtual`显然有点问题。我也宁愿不做我现在必须做的两个演员。

以某种方式实现这样的事情是可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:42:33.980

我的建议是逐步解决问题。首先，您需要一些东西来遍历树并沿途转换每个节点：

```
public static class NodeExtensions
{
    public static MyNode ToMy( this Node node ) 
    {
        var result = node.Transform();
        result.Children = node.Children.Select( ToMy ).ToList();
    }

    public static Node FromMy( this MyNode node ) 
    {
        var result = node.Transform();
        result.Children = node.Children.Select( ToMy ).ToList();
    }

    public static MyNode Transform( this Node node )
    {
        // TODO code to transform any single node here
    }

    public static Node Transform( this MyNode node )
    {
        // TODO code to transform any single node here
    }
} 
```

既然你提到从 Node 到 MyNode 的转换不是简单的复制属性的事情，还表明会有很多这样的事情发生，我最初的想法是这是[AutoMapper](https://github.com/AutoMapper/AutoMapper)的任务。

AutoMapper 允许您创建一个“转换配置文件”，描述要映射的属性以及要应用于任何给定映射的任何特殊规则。此外，它提供了泛型和非泛型方法，因此即使您在编译时不知道类型也可以使用它。它通常用于在实体和视图模型之间进行转换，因此您会在此处找到与其在其他地方的用法相关的大量问题和答案。

定义类型映射基本上包括许多这样的调用：

```
Mapper.CreateMap<Node,MyNode>(); // no special rules for this map 
```

您必须查阅[AutoMapper 文档](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started)以了解有关如何创建特殊映射的详细信息，例如拆分属性或执行类型转换。您还需要创建双向地图，以便能够在任一方向进行地图绘制。

定义完所有映射后，Transform 扩展方法可以很简单：

```
 public static MyNode Transform( this Node node )
    {
        return Mapper.Map( node.GetType(), node.GetMatchingMyType(), node );
    }

    public static Type GetMatchingType( this Node node )
    {
        // you can use a dictionary lookup or some other logic if this doesn't work
        var typeName = "My" + node.GetType().Name;
        return typeof(MyNode).Assembly.GetTypes().Single( t => t.Name == typeName );
    } 
```

一切就绪后，您可以通过以下方式转换整个树：

```
var myTree = node.ToMy();
// and back
node = myTree.FromMy(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:21:41.537

所有的东西都像你上面提到的那样一致吗？

如果是这样，您可以构建一组使用反射的通用 convert-to convert-from 函数。

这是我的想法（这是意识流，未经验证的编译代码）：

```
<T> ConvertTo<TMy, T>(TMy object)
{
  // create an object of type T
  T newObj = new T();

  // iterate the members of T using reflection
  foreach(member in T)
  {
    // find the equavalent My members in TMy
    // transfer the data
  }
  return newObj;
} 
```

我将对此进行更多研究，并可能在本周末的某个时候生成工作代码。

# android - 电话停止响时关闭手电筒？

> ID：14779638
> 
> 赞同：2
> 
> 时间：2013-02-08T19:08:08.823
> 
> 标签：android, phone-call, flashlight

我正在制作一个应用程序，它可以在手机开始响铃时打开手电筒，并在它停止响铃时将其关闭。问题是当电话开始响铃时相机被锁定，并且对它的对象引用丢失了，所以我不知道以后如何将其关闭。

我正在使用 BroadcastReceiver 来打开/关闭它：

```
@Override
public void onReceive(Context context, Intent intent) {
    String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);

    if (TelephonyManager.EXTRA_STATE_RINGING.equals(state)) {
        if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)) {   
            cam = Camera.open();
            Parameters p = cam.getParameters();
            p.setFlashMode(Parameters.FLASH_MODE_TORCH);
            cam.setParameters(p);
            cam.startPreview();
        }
    }

    if (TelephonyManager.EXTRA_STATE_IDLE.equals(state)) {
        cam = Camera.open();
        cam.stopPreview();
        cam.release();
    }
} 
```

有谁知道如何保留对相机对象的引用或任何解决方法？我想到了使用服务，但市场上的其他应用程序似乎没有使用服务来完成相同的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:14:16.560

感谢 Paul Lammertsma 的建议。我通过添加保存相机对象的服务解决了这个问题。

收货人代码：

```
public class Receiver extends BroadcastReceiver {
SharedPreferences prefs = null;
boolean enabled = false;
@Override
public void onReceive(Context context, Intent intent) {
    prefs = PreferenceManager.getDefaultSharedPreferences(context);

    AudioManager am = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
    int ringState = am.getRingerMode();
    enabled = prefs.getBoolean("full", false);
    if (!enabled || ringState != AudioManager.RINGER_MODE_NORMAL) {
        return;
    }

    String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);

    if (TelephonyManager.EXTRA_STATE_RINGING.equals(state) ||
            TelephonyManager.EXTRA_STATE_IDLE.equals(state) ||
            TelephonyManager.EXTRA_STATE_OFFHOOK.equals(state)) {
        context.startService(new Intent(context, MyService.class).putExtra("state", state));
    }
}
} 
```

服务代码：

```
public class MyService extends Service {
Camera cam = null;
boolean offhook = false;

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    String state = intent.getStringExtra("state");

    if (TelephonyManager.EXTRA_STATE_RINGING.equals(state)) {
        if (getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH) && !offhook) {
                    cam = Camera.open();
                    Parameters p = cam.getParameters();
                    p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                    cam.setParameters(p);
        }
    }

    if (TelephonyManager.EXTRA_STATE_IDLE.equals(state)) {
        if (!offhook) {
            if (cam != null) {
                cam.release();
                cam = null;
            }
            this.stopSelf();
        } else {
            offhook = false;
        }
    }

    if (TelephonyManager.EXTRA_STATE_OFFHOOK.equals(state)) {
        offhook = true;
        if (cam != null) {
            cam.stopPreview();
            cam.release();
            cam = null;
        }
        this.stopSelf();
    }

    return super.onStartCommand(intent, flags, startId);
}

@Override
public void onDestroy() {
    if (cam != null) {
        cam.release();
        cam = null;
    }
    super.onDestroy();
}   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T22:08:05.323

根据[有关控制相机的文档](http://developer.android.com/training/camera/cameradirect.html)，您应该在类中保存对 Camera 对象的引用，并在完成后释放它。他们通过字段寻址对象来做到这一点。

您也许可以通过执行相同的操作来简单地解决您的问题：

```
public TelephonyReceiver extends BroadcastReceiver {

    Camera mCamera;

    @Override
    public void onReceive(Context context, Intent intent) {
        String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);

        if (TelephonyManager.EXTRA_STATE_RINGING.equals(state)) {
            if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)) {   
                mCamera = Camera.open();
                Parameters p = mCamera.getParameters();
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                mCamera.setParameters(p);
                mCamera.startPreview();
            }
        }

        if (TelephonyManager.EXTRA_STATE_IDLE.equals(state) && mCamera != null) {
            mCamera.stopPreview();
            mCamera.release();
            // Make sure to clear the reference, otherwise we might attempt to
            // release the camera a second time
            mCamera = null;
        }
    }

} 
```

如果您是通过服务执行此操作，我建议您还添加用于释放相机的逻辑，`onDestroy()`以确保正确释放相机。甚至可能在固定的最长持续时间后释放它，以防止它长时间停留。

听起来像一个漂亮的应用程序！

# git - 与 git cherry-pick 相对？

> ID：14779640
> 
> 赞同：32
> 
> 时间：2013-02-08T19:08:14.467
> 
> 标签：git

git cherry-pick 有有效的反面吗？例如，前一段时间，由于业务流程尚未准备好，我不得不进行一些临时更改以禁用一组功能。现在该业务流程已准备就绪，我想简单地删除提交及其影响。虽然我当然可以只查看这些提交的差异并找出所有需要完成的事情，但如果知道这些历史上的提交是否可以在不重置和丢失之后的所有内容的情况下取消完成，将会很有趣他们。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-08T23:30:04.593

`git revert`不是相反的`git cherry-pick`。 `git rebase -i`是。

`git revert`添加一个新的提交，删除一个或多个旧提交所做的更改。它不会删除原始提交。

`git rebase -i`将向您显示当前提交的提交列表，返回到不在上游分支上的最后一次提交。然后，您可以编辑、重新排列、更改提交消息，甚至从该列表中删除提交。

请记住，如果您已经推送了要删除的提交，则需要与您的队友一起确定删除它们，因为一旦您推送带有已删除提交的新历史记录，他们就必须进行调整。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-08T19:20:16.940

撤消另一个提交所做更改的自动方法是`git revert`.

# c# - 提取 RTF 中的嵌入图像对象

> ID：14779647
> 
> 赞同：7
> 
> 时间：2013-02-08T19:08:35.360
> 
> 标签：c#, .net, image, rtf

我有`rtf`包含嵌入对象（图像）的文档。我需要将其提取为`Image`对象（或任何其他可用格式）。我已经查看了这篇[CodeProject 文章](http://www.codeproject.com/Articles/27431/Writing-Your-Own-RTF-Converter)，但默认应用程序无法正确呈现它（它们呈现“默认图像”图像，而不是图像本身），所以我继续前进。

![这是写字板中的 RTF 屏幕](../Images/e5ac1c1ec80d1f0b30608cc20b50a752.png)

这是 RTF 代码的示例（由于大小，我不得不缩短它）：

```
{\rtf1\ansi\deff0{\fonttbl{\f0\fnil\fcharset0 MS Sans Serif;}}
\viewkind4\uc1\pard\lang1033\f0\fs18{\object\objemb{\*\objclass Package}\objw855\objh810{\*\objdata 
01050000
02000000
08000000
5061636b61676500
00000000
00000000
1f900000
02007369675f5f2e6a706700433a5c55736572735c726563657074696f6e5c4465736b746f705c
5369676e6174757265735c7369675f5f2e6a7067000000030034000000433a5c55736572735c52
45434550547e315c417070446174615c4c6f63616c5c54656d705c7369675f5f20283132292e6a
706700c18e0000ffd8ffe000104a46494600010101004800470000ffdb00430001010101010101
010101010101010101010101010101010101010101010101010101010101010101010101010101
010101010101010101010101010101010101ffdb00430101010101010101010101010101010101
010101010101010101010101010101010101010101010101010101010101010101010101010101
010101010101010101ffc0001108012c03e803012200021101031101ffc4001f00010002030002
0301000000000000000000090a07080b050602030401ffc4003f10000006030001040201030301
04070900000203040506010708090a11121314152116172223314118192532591a24576598d6d8
2933384651788497b7ffc4001a010101000301010000000000000000000000030204050106ffc4
002b11010003010100020103030402030000000002030401051112130614211522230731415124
32536162ffda000c03010002110311003f00bfc000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000
...
005c0072006500630065007000740069006f006e005c004400650073006b0074006f0070005c00
5300690067006e006100740075007200650073005c007300690067005f005f002e006a00700067
00
01050000
00000000
}{\result{\pict\wmetafile8\picw2010\pich1905\picwgoal855\pichgoal810 
0100090000033b0700000200210600000000050000000b0200000000050000000c02350038001c
000000fb02f4ff000000000000900100000001000000005365676f65205549000e0a52104c2308
00dd1900d894ef758001f3758d0e664a040000002d010000050000000902000000000500000001
02ffffff00a5000000410bc600880020002000000000002000200000000c002800000020000000
400000000100010000000000000100000000000000000000000000000000000000000000ffffff
...
0021001c001c000000fb021000070000000000bc02000000000102022253797374656d00008d0e
664a00000a0022008a0100000000ffffffff8cdd1900040000002d010100030000000000
}}}\par
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-15T11:14:40.370

这是一段可以从 RTF 流中提取所有对象（“包”类对象）的代码：

```
 public static void ExtractPackageObjects(string filePath)
    {
        using (StreamReader sr = new StreamReader(filePath))
        {
            RtfReader reader = new RtfReader(sr);
            IEnumerator<RtfObject> enumerator = reader.Read().GetEnumerator();
            while(enumerator.MoveNext())
            {
                if (enumerator.Current.Text == "object")
                {
                    if (RtfReader.MoveToNextControlWord(enumerator, "objclass"))
                    {
                        string className = RtfReader.GetNextText(enumerator);
                        if (className == "Package")
                        {
                            if (RtfReader.MoveToNextControlWord(enumerator, "objdata"))
                            {
                                byte[] data = RtfReader.GetNextTextAsByteArray(enumerator);
                                using (MemoryStream packageData = new MemoryStream())
                                {
                                    RtfReader.ExtractObjectData(new MemoryStream(data), packageData);
                                    packageData.Position = 0;
                                    PackagedObject po = PackagedObject.Extract(packageData);
                                    File.WriteAllBytes(po.DisplayName, po.Data);
                                }
                            }
                        }
                    }
                }
            }
        }
    } 
```

以下是此代码使用的实用程序类。有一个简单的基于流的 RTF 解析器，可以获取有趣的控制字。

还有一个实用程序可以从序列化的 Object Packager 实例中提取数据。Object Packager 几乎是 20 年前的[OLE1.0](http://en.wikipedia.org/wiki/Object_Linking_and_Embedding)东西，序列化的二进制格式没有记录（据我所知），但它是可以理解的。

这适用于您提供的示例，但您可能需要调整周围的东西。

```
public class RtfReader
{
    public RtfReader(TextReader reader)
    {
        if (reader == null)
            throw new ArgumentNullException("reader");

        Reader = reader;
    }

    public TextReader Reader { get; private set; }

    public IEnumerable<RtfObject> Read()
    {
        StringBuilder controlWord = new StringBuilder();
        StringBuilder text = new StringBuilder();
        Stack<RtfParseState> stack = new Stack<RtfParseState>();
        RtfParseState state = RtfParseState.Group;

        do
        {
            int i = Reader.Read();
            if (i < 0)
            {
                if (!string.IsNullOrWhiteSpace(controlWord.ToString()))
                    yield return new RtfControlWord(controlWord.ToString());

                if (!string.IsNullOrWhiteSpace(text.ToString()))
                    yield return new RtfText(text.ToString());

                yield break;
            }

            char c = (char)i;

            // noise chars
            if ((c == '\r') ||
                (c == '\n'))
                continue;

            switch (state)
            {
                case RtfParseState.Group:
                    if (c == '{')
                    {
                        stack.Push(state);
                        break;
                    }

                    if (c == '\\')
                    {
                        state = RtfParseState.ControlWord;
                        break;
                    }
                    break;

                case RtfParseState.ControlWord:
                    if (c == '\\')
                    {
                        // another controlWord
                        if (!string.IsNullOrWhiteSpace(controlWord.ToString()))
                        {
                            yield return new RtfControlWord(controlWord.ToString());
                            controlWord.Clear();
                        }
                        break;
                    }

                    if (c == '{')
                    {
                        // a new group
                        state = RtfParseState.Group;
                        if (!string.IsNullOrWhiteSpace(controlWord.ToString()))
                        {
                            yield return new RtfControlWord(controlWord.ToString());
                            controlWord.Clear();
                        }
                        break;
                    }

                    if (c == '}')
                    {
                        // close group
                        state = stack.Count > 0 ? stack.Pop() : RtfParseState.Group;
                        if (!string.IsNullOrWhiteSpace(controlWord.ToString()))
                        {
                            yield return new RtfControlWord(controlWord.ToString());
                            controlWord.Clear();
                        }
                        break;
                    }

                    if (!Char.IsLetterOrDigit(c))
                    {
                        state = RtfParseState.Text;
                        text.Append(c);
                        if (!string.IsNullOrWhiteSpace(controlWord.ToString()))
                        {
                            yield return new RtfControlWord(controlWord.ToString());
                            controlWord.Clear();
                        }
                        break;
                    }

                    controlWord.Append(c);
                    break;

                case RtfParseState.Text:
                    if (c == '\\')
                    {
                        state = RtfParseState.EscapedText;
                        break;
                    }

                    if (c == '{')
                    {
                        if (!string.IsNullOrWhiteSpace(text.ToString()))
                        {
                            yield return new RtfText(text.ToString());
                            text.Clear();
                        }

                        // a new group
                        state = RtfParseState.Group;
                        break;
                    }

                    if (c == '}')
                    {
                        if (!string.IsNullOrWhiteSpace(text.ToString()))
                        {
                            yield return new RtfText(text.ToString());
                            text.Clear();
                        }

                        // close group
                        state = stack.Count > 0 ? stack.Pop() : RtfParseState.Group;
                        break;
                    }
                    text.Append(c);
                    break;

                case RtfParseState.EscapedText:
                    if ((c == '\\') || (c == '}') || (c == '{'))
                    {
                        state = RtfParseState.Text;
                        text.Append(c);
                        break;
                    }

                    // ansi character escape
                    if (c == '\'')
                    {
                        text.Append(FromHexa((char)Reader.Read(), (char)Reader.Read()));
                        break;
                    }

                    if (!string.IsNullOrWhiteSpace(text.ToString()))
                    {
                        yield return new RtfText(text.ToString());
                        text.Clear();
                    }

                    // in fact, it's a normal controlWord
                    controlWord.Append(c);
                    state = RtfParseState.ControlWord;
                    break;
            }
        }
        while (true);
    }

    public static bool MoveToNextControlWord(IEnumerator<RtfObject> enumerator, string word)
    {
        if (enumerator == null)
            throw new ArgumentNullException("enumerator");

        while (enumerator.MoveNext())
        {
            if (enumerator.Current.Text == word)
                return true;
        }
        return false;
    }

    public static string GetNextText(IEnumerator<RtfObject> enumerator)
    {
        if (enumerator == null)
            throw new ArgumentNullException("enumerator");

        while (enumerator.MoveNext())
        {
            RtfText text = enumerator.Current as RtfText;
            if (text != null)
                return text.Text;
        }
        return null;
    }

    public static byte[] GetNextTextAsByteArray(IEnumerator<RtfObject> enumerator)
    {
        if (enumerator == null)
            throw new ArgumentNullException("enumerator");

        while (enumerator.MoveNext())
        {
            RtfText text = enumerator.Current as RtfText;
            if (text != null)
            {
                List<byte> bytes = new List<byte>();
                for (int i = 0; i < text.Text.Length; i += 2)
                {
                    bytes.Add((byte)FromHexa(text.Text[i], text.Text[i + 1]));
                }
                return bytes.ToArray();
            }
        }
        return null;
    }

    // Extracts an EmbeddedObject/ObjectHeader from a stream
    // see [MS -OLEDS]: Object Linking and Embedding (OLE) Data Structures for more information
    // chapter 2.2: OLE1.0 Format Structures 
    public static void ExtractObjectData(Stream inputStream, Stream outputStream)
    {
        if (inputStream == null)
            throw new ArgumentNullException("inputStream");

        if (outputStream == null)
            throw new ArgumentNullException("outputStream");

        BinaryReader reader = new BinaryReader(inputStream);
        reader.ReadInt32(); // OLEVersion
        int formatId = reader.ReadInt32(); // FormatID
        if (formatId != 2) // see 2.2.4 Object Header. 2 means EmbeddedObject
            throw new NotSupportedException();

        ReadLengthPrefixedAnsiString(reader); // className
        ReadLengthPrefixedAnsiString(reader); // topicName
        ReadLengthPrefixedAnsiString(reader); // itemName

        int nativeDataSize = reader.ReadInt32();
        byte[] bytes = reader.ReadBytes(nativeDataSize);
        outputStream.Write(bytes, 0, bytes.Length);
    }

    // see chapter 2.1.4 LengthPrefixedAnsiString
    private static string ReadLengthPrefixedAnsiString(BinaryReader reader)
    {
        int length = reader.ReadInt32();
        if (length == 0)
            return string.Empty;

        byte[] bytes = reader.ReadBytes(length);
        return Encoding.Default.GetString(bytes, 0, length - 1);
    }

    private enum RtfParseState
    {
        ControlWord,
        Text,
        EscapedText,
        Group
    }

    private static char FromHexa(char hi, char lo)
    {
        return (char)byte.Parse(hi.ToString() + lo, NumberStyles.HexNumber);
    }
}

// Utility class to parse an OLE1.0 OLEOBJECT
public class PackagedObject
{
    private PackagedObject()
    {
    }

    public string DisplayName { get; private set; }
    public string IconFilePath { get; private set; }
    public int IconIndex { get; private set; }
    public string FilePath { get; private set; }
    public byte[] Data { get; private set; }

    private static string ReadAnsiString(BinaryReader reader)
    {
        StringBuilder sb = new StringBuilder();
        do
        {
            byte b = reader.ReadByte();
            if (b == 0)
                return sb.ToString();

            sb.Append((char)b);
        }
        while (true);
    }

    public static PackagedObject Extract(Stream inputStream)
    {
        if (inputStream == null)
            throw new ArgumentNullException("inputStream");

        BinaryReader reader = new BinaryReader(inputStream);
        reader.ReadUInt16(); // sig
        PackagedObject po = new PackagedObject();
        po.DisplayName = ReadAnsiString(reader);
        po.IconFilePath = ReadAnsiString(reader);
        po.IconIndex = reader.ReadUInt16();
        int type = reader.ReadUInt16();
        if (type != 3) // 3 is file, 1 is link
            throw new NotSupportedException();

        reader.ReadInt32(); // nextsize
        po.FilePath = ReadAnsiString(reader);
        int dataSize = reader.ReadInt32();
        po.Data = reader.ReadBytes(dataSize);
        // note after that, there may be unicode + long path info
        return po;
    }
}

public class RtfObject
{
    public RtfObject(string text)
    {
        if (text == null)
            throw new ArgumentNullException("text");

        Text = text.Trim();
    }

    public string Text { get; private set; }
}

public class RtfText : RtfObject
{
    public RtfText(string text)
        : base(text)
    {
    }
}

public class RtfControlWord : RtfObject
{
    public RtfControlWord(string name)
        : base(name)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T20:57:16.313

好的，这应该适合你。为了演示我的解决方案，我创建了一个带有 PictureBox 的 WinForms 项目，其绘制事件处理程序映射到以下函数：

```
 private void rtfImage_Paint(object sender, PaintEventArgs e)
    {
        string rtfStr = System.IO.File.ReadAllText("MySampleFile.rtf");
        string imageDataHex = ExtractImgHex(rtfStr);
        byte[] imageBuffer = ToBinary(imageDataHex);
        Image image;
        using (MemoryStream stream = new MemoryStream(imageBuffer))
        {
            image = Image.FromStream(stream);
        }
        Rectangle rect = new Rectangle(0, 0, 100, 100);
        e.Graphics.DrawImage(image, rect);                        
    } 
```

此代码依赖于[System.Drawing.Image.FromStream()](http://msdn.microsoft.com/en-us/library/system.drawing.image.fromstream.aspx)方法，以及两个“帮助”函数：

## 字符串提取器：

```
 string ExtractImgHex(string s)
    {
        // I'm sure you could use regex here, but this works.
        // This assumes one picture per file; loops required otherwise
        int pictTagIdx = s.IndexOf("{\\pict\\");
        int startIndex = s.IndexOf(" ", pictTagIdx)+1;
        int endIndex = s.IndexOf("}", startIndex);
        return s.Substring(startIndex, endIndex - startIndex);
    } 
```

## ...和一个二进制转换器：

```
 public static byte[] ToBinary(string imageDataHex)
    {
        //this function taken entirely from:
        // http://www.codeproject.com/Articles/27431/Writing-Your-Own-RTF-Converter
        if (imageDataHex == null)
        {
            throw new ArgumentNullException("imageDataHex");
        }

        int hexDigits = imageDataHex.Length;
        int dataSize = hexDigits / 2;
        byte[] imageDataBinary = new byte[dataSize];

        StringBuilder hex = new StringBuilder(2);

        int dataPos = 0;
        for (int i = 0; i < hexDigits; i++)
        {
            char c = imageDataHex[i];
            if (char.IsWhiteSpace(c))
            {
                continue;
            }
            hex.Append(imageDataHex[i]);
            if (hex.Length == 2)
            {
                imageDataBinary[dataPos] = byte.Parse(hex.ToString(), System.Globalization.NumberStyles.HexNumber);
                dataPos++;
                hex.Remove(0, 2);
            }
        }
        return imageDataBinary;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-29T05:33:25.807

下面的代码可以提取所有类型的嵌入对象。包括带有原始文件名的图像/文档/邮件等。并将它们保存在本地路径中。

```
string MyDir = @"E:\temp\";
Document doc = new Document(MyDir + "Requirement#4.rtf");

NodeCollection nodeColl = doc.GetChildNodes(NodeType.Shape, true);
foreach (var node in nodeColl)
{
    Shape shape1 = (Shape)node;
    if (shape1.OleFormat != null)
    {
        shape1.OleFormat.Save(MyDir + shape1.OleFormat.SuggestedFileName + shape1.OleFormat.SuggestedExtension);
    }
}
```

# javascript - 以编程方式安装凉亭？

> ID：14779662
> 
> 赞同：4
> 
> 时间：2013-02-08T19:09:13.623
> 
> 标签：javascript, node.js, bower, gruntjs

我正在编写一个繁重的任务，我想以编程方式安装一个依赖项。但是，我似乎无法弄清楚如何使用他们的 API。

这工作得很好，但解析响应很脆弱，因为它使用 CLI：

```
grunt.util.spawn({
  cmd: 'bower',
  args: ['install', '--save', 'git@github.com:foo/bar.git']
}, function(none, message) {
  grunt.log.writeln(message);
}); 
```

这不起作用：

```
bower.commands.install.line(['--save', 'git@github.com:foo/bar.git'])
    .on('end', function(data) {
      grunt.log.writeln(data);
      done();
    })
    .on('err', function(err) {
      grunt.log.fail(err);
      done();
    }); 
```

我收到以下错误：

```
$ grunt my-task
Running "my-task:default_options" (my-task) task
Fatal error: Could not find any dependencies 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T12:15:54.493

该`line()`函数需要整个 argv，因此应该是：

`bower.commands.install.line(['node', 'bower', '--save', 'git@github.com:foo/bar.git']);`

但是，您应该直接将路径和选项传递给`install()`方法：

`bower.commands.install(['git@github.com:foo/bar.git'], {save: true});`

# android - 使用 ActivityUnitTestCase 和 PreferenceManager 对 Android 进行单元测试

> ID：14779663
> 
> 赞同：7
> 
> 时间：2013-02-08T19:09:13.927
> 
> 标签：android, unit-testing, sharedpreferences

我有一个`Activity`我正在单元测试。我想单独测试`Activity`，所以[ActivityUnitTestCase](http://developer.android.com/reference/android/test/ActivityUnitTestCase.html)非常适合我的目的。

我的`onCreate`方法`Activity`使用存储在首选项中的值。我想在我的测试用例中为此设置一个值。

问题是我不知道如何`Preference`提前设置。中没有`getContext()`方法`ActivityUnitTestCase`，并且`getActivity()`应该返回一个`context`，在我调用之前为空`startActivity()`。这不是一个选项，因为调用`startActivity`将触发该`onCreate`方法，这就是首选项代码所在的位置。

关于如何获得`context`可用于操纵单元测试首选项的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T20:35:40.133

您可以通过仪器获取上下文。

要获取仪器的上下文（测试运行器）：

```
getInstrumentation().getContext() 
```

但是您可能需要检测应用程序的上下文：

```
getInstrumentation().getTargetContext() 
```

# html - 在不使用 Javascript 的情况下单击了哪个按钮？

> ID：14779664
> 
> 赞同：0
> 
> 时间：2013-02-08T19:09:16.087
> 
> 标签：html, ruby

有一个html代码

```
<form>
  <button type="submit" name="button-name" value="btn1">button1</button>
  <button type="submit" name="button-name" value="btn2">button2</button>
</form> 
```

有什么方法可以确定在服务器端单击了哪个按钮？我不想使用 javascript，也不想用`input`.

这很有趣，但我`nil`有`params["button-name"]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:11:31.883

您应该能够检查`button-name`服务器端的参数值以确定单击了哪个按钮。在体面的浏览器中，它将是 value 属性的值，但在 IE 中，您将收到每个按钮的内部 html。

例如，如果我单击第一个按钮并在服务器端使用 Java：

在 IE 中

```
String param = reqeust.getParameter("button-name");
System.out.println(param); // Prints button1 
```

在火狐中

```
String param = reqeust.getParameter("button-name");
System.out.println(param); // Prints btn1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:12:33.313

如果您在服务器端使用 PHP，这将起作用。

```
if(isset($_GET['button-name']))
    echo $_GET['button-name']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T02:35:21.097

如果您要使用 PHP，这将起作用（假设您使用 GET 而不是 POST）：

if((isset($_GET['button-name'])) && ($_GET['button-name'] === 'btn1' || $_GET['button-name'] === 'btn2' )){

}

# shell - awk 语法错误：awk：第 29 行：在或附近出现语法错误：

> ID：14779671
> 
> 赞同：2
> 
> 时间：2013-02-08T19:09:40.410
> 
> 标签：shell, awk

我写了一个`awk`脚本，但我不断收到以下错误：

`awk: line 29: syntax error at or near :`

我不明白为什么我不断收到此错误。

脚本如下（脚本很大，但错误仅在顶部。为了完整起见，刚刚添加了脚本。已为错误行标记了一个标志）。

```
#!/bin/sh

tshark -V -r $1 > .pcap_out1_ver.txt
tshark -r $1 > .pcap_out_summ.txt

awk -F ":" '
BEGIN {
#Packet types and subtypes.
    frame_id[0] = "Association Request";
    frame_id[1] = "Association Response";
    frame_id[2] = "Association Response";
    frame_id[3] = "Reassociation Response";
    frame_id[4] = "Probe Request";
    frame_id[5] = "Probe Response";
    frame_id[6] = "Reserved";
    frame_id[7] = "Reserved";
    frame_id[8] = "Beacon";
    frame_id[9] = "ATIM";
    frame_id[10] = "Disassociation";
    frame_id[11] = "Authentication";
    frame_id[12] = "Deauthentication";
    frame_id[13] = "Action";
    for(x=14; x<24; ++x) {
        frame_id[x] = "Reserved";   
    }
    frame_id[24] = "Block Ack Request";
    frame_id[25] = "Block Ack";
    frame_id[26] = "PS-Poll";
    frame_id[27] = "RTS";     #******Error here****
    frame_id[28] = "CTS";
    frame_id[29] = "ACK";
    frame_id[30] = "CF-end";
    frame_id[31] = "CF-end + CF-ack";
    frame_id[32] = "Data";
    frame_id[33] = "Data + CF-ack";
    frame_id[34] = "Data + CF-poll";
    frame_id[35] = "Data + CF-ack +CF-poll";
    frame_id[36] = "Null";
    frame_id[37] = "CF-ack";
    frame_id[38] = "CF-poll";
    frame_id[39] = "CF-ack + CF-poll";
    frame_id[40] = "QoS data";
    frame_id[41] = "QoS data + CF-ack";
    frame_id[42] = "QoS data + CF-poll";
    frame_id[43] = "QoS data + CF-ack + CF-poll";
    frame_id[44] = "QoS Null";
    frame_id[45] = "Reserved";
    frame_id[46] = "QoS + CF-poll (no data)";
    frame_id[47] = "Qos + CF-ack (no data)";
    packet_type[0] = "Management";
    packet_type[1] = "Control";
    packet_type[2] = "Data";
#Variables for storing stats.
    captured_length = 0;
    for(x=0; x<50; ++x) {
        count[x]=0;
        traffic[x]=0;
    }
#Counter for Epoch Time. Avg data rates.
    next_mark=0;
    j=0;
    first_epoch_time = 0;
    cur_epoch_time = 0;
#Counter for rssi values.
    k=0;
}
{
    gsub(/^[ \t]+/, "", $1);
    if($1=="Frame Control") { 
        gsub(/^[ \t]+/, "", $2);
        intRep = sprintf("%d", "0x" substr($2, 4, 2));
        traffic[intRep] += captured_length;
        count[intRep] += 1;
    } else if($1=="Capture Length") {
        gsub(/^[ \t]+/, "", $2);
        gsub(/ [^\0]*/,"", $2);
        captured_length = $2;
    } else if($1=="Epoch Time") {
        gsub(/^[ \t]+/, "", $2);
        gsub(/ [^\0]*/, "", $2);
        if(next_mark<$2) {
            if(next_mark==0) {
                next_mark = $2+60;
                first_epoch_time = $2;
            } else {
                next_mark += 60;
                j++;
            }
            #initialization of array element before using.
            traffic_per_min[j] = 0;
            count_per_min[j] = 0;
            data_rate[j] = 0;
        }
        cur_epoch_time = $2;
        traffic_per_min[j] += captured_length;
        count_per_min[j] += 1;
    } else if($1=="SSI signal") {
        gsub(/^[ \t]+/, "", $2);
        print "ssi signal"
        if( substr($2, 0, 1) == "-") {
            rssi_v[k] = $2;
            rssi_t[k] = cur_epoch_time;
            print rssi_v[k];
            print rssi_t[k];
            k++;
        }
    } else if($1=="Data Rate") {
        gsub(/^[ \t]+/, "", $2);
        gsub(/ [^\0]*/, "", $2);
        data_rate_avg[j] += $2;
        data_rate[k] = $2;
    }
}
END {
#   print "Packet Subtype" "No. of Packets" "Amount of traffic"
    for(x=0; x<48; ++x) {
        if(count[x] != 0) {
            print frame_id[x]":"count[x]":"traffic[x];
        }
    }
    print "-----"
    for(x=0; x<=j; ++x) {
        print x traffic_per_min[x]/count_per_min[x];
    }

}
' .pcap_out1_ver.txt > .parsed.txt

awk -F " \t" '
BEGIN {
    for(x=0; x<6; ++x)
        count[6] = 0;
    protocol[0] = "HTTP";
    protocol[1] = "ARP";
    protocol[2] = "SMTP";
    protocol[3] = "DNS";
    protocol[4] = "FTP";
    protocol[5] = "DHCP";
}
{
    if($5==protocol[0]){
        count[0] += 1;
    } else if($5==protocol[1]) {
        count[1] += 1;
    } else if($5==protocol[2]) {
        count[2] += 1;
    } else if($5==protocol[3]) {
        count[3] += 1;
    } else if($5==protocol[4]) {
        count[4] += 1;  
    } else if($5==protocol[5]) {
        count[5] += 1;  
    }
}
END {
    for(x=0; x<6; ++x) {
        print protocol[x]:count[x]
    }
}
' .pcap_out_summ.txt > .app_net.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:14:45.770

You have this line in the END block:

```
print protocol[x]:count[x] 
```

It should be replaced with:

```
print protocol[x]":"count[x] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T20:19:57.007

除了您的语法错误之外，我能否就您的 awk 脚本提出建议或 2：

1.  摆脱所有那些空语句（虚假的尾随分号）。
2.  您似乎没有掌握 awks 关联数组的强大功能。以您的第二个脚本为例。它可以重写为：

    ```
    awk -F " \t" '
       BEGIN { n=split("HTTP ARP SMTP DNS FTP DHCP",protocol,/ /) }
       { count[$5]++ }
       END { for(x=0;x<n;++x) print protocol[x]":"count[protocol[x]]+0 }
    ' .pcap_out_summ.txt > .app_net.txt 
    ```

您可能想看看 Arnold Robbins 的《Effective Awk Programming, Third Edition》一书 ( [http://www.oreilly.com/catalog/awkprog3/](http://www.oreilly.com/catalog/awkprog3/) )。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:14:49.087

As awk tells you, this line of your *second* `awk` script is wrong:

```
print protocol[x]:count[x] 
```

You probably meant to *print* a colon:

```
print protocol[x] ":" count[x] 
```

# javascript - Javascript 中的一切都是函数

> ID：14779674
> 
> 赞同：1
> 
> 时间：2013-02-08T19:09:51.203
> 
> 标签：javascript

过去有人告诉我：“Javascript 中的一切都是函数”。我很好奇这有多少真实性。作为一个例子，我引用了 Chrome JS 控制台：

```
> String
function String() { [native code] }
> Number
function Number() { [native code] }
> Object
function Object() { [native code] }
> Array
function Array() { [native code] }
> Function
function Function() { [native code] } 
```

文字，运算符呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:20:15.503

> “Javascript 中的一切都是函数”

需要引用。

您在那里的证明实际上证明了构造函数是函数。构造函数是 JavaScript 最接近类的句柄。

试试这个：

```
> typeof String
"function"

> var a = new String("testing123");
> typeof a
"object" 
```

但实际上，函数只是一种特殊的对象。

所以我会修改你的陈述，改为：

> *Javascript 中几乎*所有东西都是对象，包括函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:13:01.540

不知道函数，但我一直听说 JavaScript 中的一切都是对象。

# c# - jQuery 将 null 而不是 JSON 发布到 ASP.NET Web API

> ID：14779679
> 
> 赞同：17
> 
> 时间：2013-02-08T19:10:08.097
> 
> 标签：c#, jquery, asp.net-web-api, http-post

我似乎无法让它工作......我在客户端上有一些这样的jQuery：

```
$.ajax({
    type: "POST",
    url: "api/report/reportexists/",
    data: JSON.stringify({ "report":reportpath }),
    success: function(exists) {
        if (exists) {
            fileExists = true;
        } else {
            fileExists = false;
        }
    }
}); 
```

在我的 Web.API 控制器中，我有一个这样的方法：

```
[HttpPost]
public bool ReportExists( [FromBody]string report )
{
    bool exists = File.Exists(report);
    return exists;
} 
```

我只是检查文件是否存在于服务器上，并返回一个关于它是否存在的布尔值。我发送的报告字符串是一个 UNC 路径，所以报告路径看起来像 '\\some\path\'。

我可以很好地触发脚本，并在我的 ReportExists 方法中打断点，但报告变量始终为空。

我究竟做错了什么？

我还看到了一种使用 .post 和 postJSON 发布的方法。也许我应该使用其中之一？如果是这样，我的格式是什么？

**更新：** 可能还有一条线索——如果我删除 [FromBody]，那么我的断点根本不会被命中——“没有找到与请求匹配的 http 资源”。我正在查看的示例表明不需要 [FromBody] ......？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-11T20:25:40.287

所以我找到了问题，并找到了解决方案。所以，第一件事。contentType 不能是“application/json”，它必须是空白的（我相信默认为 application/x-www-form-urlencoded）。尽管您似乎必须发送 json，但名称值对中没有名称。使用 JSON.stringify 也会把这搞砸。所以完整的工作jQuery代码是这样的：

```
$.ajax({
    type: "POST",
    url: "api/slideid/reportexists",
    data: { "": reportpath },
    success: function(exists) {
        if (exists) {
            fileExists = true;
        } else {
            fileExists = false;
        }
    }
}); 
```

在 Web.API 方面，您必须在参数上具有 [FromBody] 属性，但除此之外，它非常标准。（对我来说）真正的问题是帖子。

在 Fiddler 中，请求正文看起来像这样“=%5C%5Croot%5Cdata%5Creport.html”

[这篇](https://stackoverflow.com/questions/10984040/post-parameter-is-always-null)文章确实有答案，并且链接到[这篇](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1#sending_simple_types)文章也很有帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-08T19:55:37.540

`jQuery.ajax()`默认情况下将 contentType 设置为`application/x-www-form-urlencoded`. `application/json`您可以改为发送请求。此外，您应该将数据作为字符串发送，它会将模型绑定到`report`您的 post 方法的参数：

```
$.ajax({
    type: "POST",
    url: "api/report/reportexists/",
    contentType:  "application/json",
    data: JSON.stringify(reportpath),
    success: function(exists) {
        if (exists) {
            fileExists = true;
        } else {
            fileExists = false;
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-27T13:01:37.877

这对我有用，所有其他方法都没有：

```
function addProduct() {
        var product = { 'Id': 12, 'Name': 'Maya', 'Category': 'newcat', 'Price': 1234 };             
        $.ajax({
            type: "POST",
            url: "../api/products",
            async: true,
            cache: false,
            type: 'POST',
            data: product,
            dataType: "json",
             success: function (result) {

            },
            error: function (jqXHR, exception) {
                alert(exception);
            }
        });
    } 
```

服务器端：

```
 [HttpPost]
    public Product[] AddNewProduct([FromBody]Product prod)
    {
        new List<Product>(products).Add(prod);
        return products;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-16T16:02:24.643

如果您使用 MVC 的`FromBody`属性，MVC 绑定器会将其视为可选参数。这意味着即使您只有一个参数，您也需要*明确*`FromBody`参数名称。

您应该能够使用像这样简单的东西：

**控制器：**

```
[HttpPost]
public bool ReportExists( [FromBody]string report )
{
    bool exists = File.Exists(report);
    return exists;
} 
```

**Javascript**：

```
$.ajax({
    type: "POST",
    url: "api/report/reportexists/",
    data: { "report":reportpath },
    success: function(exists) {
    ... 
```

**您必须确保 jQuery 中的数据对象与您的控制器的参数名称*完全*匹配。**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-10T07:09:18.397

$.post 为我服务。从 webapi 中删除 [FromBody] 并在 jquery 客户端中 $.post 的 url 参数中给出 url。有效！

# javascript - 使用 Jquery 和 servlet 检索图像不显示图像

> ID：14779683
> 
> 赞同：1
> 
> 时间：2013-02-08T19:10:24.727
> 
> 标签：javascript, jquery, html, css, image

我需要从我的数据库中检索图像。为此，我使用 jquery 和 servlet 来检索存储在表中的所有图像。但是当我运行代码时，它不显示图像。图像采用 JSON 字节数组格式，我认为这是阻塞图像。

HTML：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Skypark Image Gallery</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
    <meta name="description" content="Responsive Image Gallery with jQuery" />
    <meta name="keywords" content="jquery, carousel, image gallery, slider, responsive, flexible, fluid, resize, css3" />
    <meta name="author" content="Codrops" />
    <link rel="shortcut icon" href="../favicon.ico"> 
    <script type='text/javascript' src='resources/js/jquery-1.8.3.js'></script>
    <script type="text/javascript" src="resources/js/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="resources/js/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="resources/js/jquery.elastislide.js"></script>
    <script type="text/javascript" src="resources/js/gallery.js"></script>
   <link rel="stylesheet" type="text/css" href="resources/css/style.css" />
   <link rel="stylesheet" type="text/css" href="resources/css/demo.css" />
    <link rel="stylesheet" type="text/css" href="resources/css/elastislide.css" />
    <link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow&v1' rel='stylesheet' type='text/css' />
    <link href='http://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css' />
    <noscript>
        <style>
            .es-carousel ul{
                display:block;
            }
        </style>
    </noscript>
        <script id="img-wrapper-tmpl" type="text/x-jquery-tmpl">    
        <div class="rg-image-wrapper">
            {{if itemsCount > 1}}
                <div class="rg-image-nav">
                    <a href="#" class="rg-image-nav-prev">Previous Image</a>
                    <a href="#" class="rg-image-nav-next">Next Image</a>
                </div>
            {{/if}}
            <div class="rg-image"></div>
            <div class="rg-loading"></div>
            <div class="rg-caption-wrapper">
                <div class="rg-caption" style="display:none;">
                    <p></p>
                </div>
            </div>
        </div>
    </script>

    <style type="text/css">
    DIV#loader.loading ul li {
 background: url(img/ajax-loader.gif) no-repeat center center;
    </style>

</head>
<body>
    <div class="container">
        <div class="header">
        <div class="clr"></div>
        </div><!-- header -->

        <div class="content">
            <h1>Responsive Image Gallery <span>A jQuery image gallery with a thumbnail carousel</span></h1>
            <div id="rg-gallery" class="rg-gallery">
                <div class="rg-thumbs">
                    <!-- Elastislide Carousel Thumbnail Viewer -->
                    <div class="es-carousel-wrapper">
                        <div class="es-nav">
                            <span class="es-nav-prev">Previous</span>
                            <span class="es-nav-next">Next</span>
                        </div>
                        <div class="es-carousel" id="loader">
                        <ul class="es-carousel">
                        </ul>
                        </div>
                    </div>
                    <!-- End Elastislide Carousel Thumbnail Viewer -->
                </div><!-- rg-thumbs -->
            </div><!-- rg-gallery -->

        </div><!-- content -->
    </div><!-- container -->
</body> 
```

JavaScript：

```
$(window).load(function() 
            {
            $.ajax({
               type: "GET",
                url: "RetriveIm",
                dataType: "json",
                success: function( data, textStatus, jqXHR) 
                {
                    if(data.success)
                      {

                        alert(console.log(data));
                         var items = [];
                           $.each(data, function(i, item) 
                        {
                          items.push('<li><a href="#"><img src=data:image/png;base64,'+ item.thumbarray +' data-large=data:image/png;base64,' + item.imageInfo.fullarray + ' data-description=' + item.imageInfo.disc + ' alt=' + item.imageInfo.name + ' data-id='+ item.imageInfo.imageid +'/></a></li>');  // close each()
                          $('ul.es-carousel').append( items.join('') );
                        });
                      };
                  },
             error: function(jqXHR, textStatus, errorThrown)
              {
                 alert("error");
                   console.log("Something really bad happened " + textStatus);
              },
              });       
             }); 
```

服务器端代码在这个[问题中](https://stackoverflow.com/questions/14777159/retrieving-images-using-jquery-and-servlet-produces-http-status-500-error)

请任何人帮我解决这个问题......谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:34:18.017

在获得更多信息之后，下面是一个示例解决方案。当前的 servlet 一次只返回一个图像。我创建了一个示例来处理当前 json，另一个示例来处理返回多个图像的 json。

[http://jsfiddle.net/Mj4YL/](http://jsfiddle.net/Mj4YL/)

html

```
<ul class="es-carousel"></ul> 
```

javascript

```
/* only one image*/
data = {
    "success": true,
    "imageInfo": {
        "name": "A",
        "disc": "1st image",
        "imageid": 1,
        "albumid": 1,
         "thumbarray": "iVBORw0KGgoAAAANSUhEUgAAAGQAAABkC??AIAAAD/gAIDAA.....CYII=",
        "fullarray": "iVBORw0KGgoAAAANSUhEUgAAAGQAAABk.....ORK5CY??II="
    }
};

if (data.success) {
    $('ul.es-carousel').append('<li>' + data.imageInfo.name + '<a href="#"><img src="data:image/png;base64,' + data.imageInfo.thumbarray + '" alt="' + data.imageInfo.disc + '"/></a></li>');
}

/*multiple images*/
data = {
    "success": true,
    "imageInfo": 
    [
    {
        "name": "A",
        "disc": "1st image",
        "imageid": 1,
        "albumid": 1,
        "thumbarray": "iVBORw0KGgoAAAANSUhEUgAAAGQAAABkC??AIAAAD/gAIDAA.....CYII=",
        "fullarray": "iVBORw0KGgoAAAANSUhEUgAAAGQAAABk.....ORK5CY??II="
    }, 
    {
    "name": "B",
        "disc": "2nd image",
        "imageid": 2,
        "albumid": 2,
        "thumbarray": "iVBORw0KGgoAAAANSUhEUgAAAGQAAABkC??AIAAAD/gAIDAA.....CYII=",
        "fullarray": "iVBORw0KGgoAAAANSUhEUgAAAGQAAABk.....ORK5CY??II="
    }
    ]
};

if (data.success) {
    $.each(data.imageInfo, function (i, item) {
        $('ul.es-carousel').append('<li>' + item.name + '<a href="#"><img src="data:image/png;base64,' + item.thumbarray + '" alt="' + item.disc + '"/></a></li>');
    });
} 
```

# ruby-on-rails - Ruby on Rails - 在方法之间传递参数

> ID：14779684
> 
> 赞同：1
> 
> 时间：2013-02-08T19:10:24.993
> 
> 标签：ruby-on-rails, ruby

路线文件：

```
resources :tournaments do
    resources :game, :only => [:new, :index, :create, :update, :destroy]
end 
```

Rake Routes 显示：

```
 new_tournament_game GET    /tournaments/:tournament_id/game/new(.:format)          game#new 
```

我打电话：

```
<td><%= link_to 'Add Game',  new_tournament_game_path(tournament) %></td> 
```

游戏模型：

使用以下 URL 将我带到查看游戏视图：http://local host:3000/tournaments/2/game/new

并查看：

```
<h1>New Game in <%= @tournament.name %> Tournament</h1>

<fieldset>
   <%= form_for [:tournament, @game], :url => tournament_game_index_path do |f| %>
    <table>
      <td>
       .... More fields .....
      </td>
  <div class="form-actions">
    <%= f.submit "Create %>
  </div>
<% end %> 
```

单击创建时会产生错误：

```
undefined method `game_url' for #<GamesController:0xb6131e40> 
```

**问题：**
我应该使用嵌套路由还是隐藏字段？
我是否需要单独的锦标赛游戏控制器/视图来处理锦标赛游戏调用？
单击“创建”按钮时，如何让它寻找正确的创建路线？
当我想在两个表之间建立关系时，我只需要嵌套资源和 has_many/belongs_to 调用还是仍然需要诸如 Tournament 之类的外键列？

很抱歉在一个线程中的所有问题。您能提供的任何帮助将不胜感激！

谢谢你。

编辑：

错误引用了第 39 行，这将是创建控制器的行。

```
 class GamesController < ApplicationController
  # GET /game
  # GET /game.json
  def index
    @game = Game.all
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @game }
    end
  end

  # GET /game/1
  # GET /game/1.json
  def show
    @game = Game.find(params[:id])
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @game }
    end
  end

  # GET /game/new
  # GET /game/new.json
  def new
    @game = Game.new
    @tournament = Tournament.find(params[:tournament_id])

  end

  # GET /game/1/edit
  def edit
    @game = Game.find(params[:id])
  end
  # POST /game
  # POST /game.json
  def create
    @tournament = Tournament.find(params[:tournament_id])
    @game = @tournament.game.build(params[:game])

    respond_to do |format|
        if params[:commit] != 'Cancel'
          if @game.save
            format.html { redirect_to @game, notice: 'Game was successfully created.' }
            format.json { render json: @game, status: :created, location: @game }
            format.json { render json: @game }            
          else
            format.html { render action: "new" }
            format.json { render json: @game.errors, status: :unprocessable_entity }
          end
        else
          format.html { redirect_to @game, alert: 'Game was not updated.' }
        end
    end
  end

  # PUT /game/1
 # PUT /game/1.json
  def update
    @game = Game.find(params[:id])

    respond_to do |format|
      if params[:commit] != 'Cancel'
        if @game.update_attributes(params[:game])
          format.html { redirect_to @game, notice: 'Game was successfully updated.' }
          format.json { render json: @game }      
        else
          format.html { render action: "edit" }
          format.json { render json: @game.errors, status: :unprocessable_entity }
        end
      else
          format.html { redirect_to @game, alert: 'Game was not updated.' }
      end
    end
  end

  # DELETE /game/1
  # DELETE /game/1.json
  def destroy
    @game = Game.find(params[:id])
    @game.destroy

    respond_to do |format|
      format.html { redirect_to game_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:16:15.900

试试这个：

```
<%= form_for @game, :url => tournament_games_path(@tournament) do |f| %> 
```

这将调用控制器的`create`方法`games`

游戏控制器：

```
def create
  @tournament = Tournament.find(params[:tournament_id])
  @game = @tournament.games.build(params[:game])
  if @game.save
    flash[:success] = "Game created successfully"
    redirect_to tournaments_path
  else
    render new_tournament_game_path
  end
end 
```

路线：

```
resources :tournaments do
   resources :games, :only => [:new, :index, :create, :update, :destroy]
end 
```

# ocaml - 使用 Ocamlbuild 构建带有配置文件信息的本机可执行文件

> ID：14779685
> 
> 赞同：3
> 
> 时间：2013-02-08T19:10:26.390
> 
> 标签：ocaml, ocamlbuild, ocamlfind

如何使用 Ocamlbuild 使用启用的配置文件信息进行构建？那里似乎`-p`行不通。

现在，我用`ocamlopt`这个。例如，

```
$ ocamlfind ocamlopt -c -p -thread -package core test.ml
$ ocamlfind ocamlopt -p -o test -thread -package core -linkpkg test.cmx 
```

如何做同样的事情

```
ocamlbuild -user-ocamlfind test.native 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T20:07:58.140

您可以显式传递参数，

```
ocamlbuild -cflags -p 
```

或在您的`_tags`文件中，

```
true : profile 
```

文件名也有一个规则，

```
ocamlbuild test.p.native 
```

# python - 如何在python中为多行字符串赋值添加内联注释

> ID：14779686
> 
> 赞同：16
> 
> 时间：2013-02-08T19:10:28.197
> 
> 标签：python, comments

如何在 python 中为多行赋值添加注释，就像在 C 中一样，语法如下：

```
char sc[] = "\x31\xdb"                  /* xor %ebx, %ebx       */
            "\x31\xc9"                  /* xor %ecx, %ecx       */
            "\xb8\x46\x00\x00\x00"      /* mov $0x46, %eax      */
            "\xcd\x80"                  /* int $0x80            */
            "\x31\xdb"                  /* xor %ebx, %ebx       */
            "\xb8\x01\x00\x00\x00"      /* mov $0x1, %eax       */
            "\xcd\x80";                 /* int $0x80            */ 
```

但在 python 中也是一样，使用转义换行符

```
sc = "\x31\xdb" \   # xor %ebx, %ebx
     "\x31\xc9" \   # xor %ecx, %ecx
     "…" 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-08T19:12:31.683

你可以写

```
sc = ("\x31\xdb"      # xor %ebx, %ebx
      "\x31\xc9"      # xor %ecx, %ecx
      "…") 
```

如果你想。

# android - 使用LinearLayout将按钮放在屏幕底部？

> ID：14779688
> 
> 赞同：156
> 
> 时间：2013-02-08T19:10:38.807
> 
> 标签：android, xml, android-layout, button, android-linearlayout

我有以下代码，如何使 3 个按钮位于底部？

```
 <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="60dp"
        android:gravity="center"
        android:text="@string/observer"
        android:textAppearance="?android:attr/textAppearanceLarge"
        tools:context=".asdf"
        android:weight="1" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="145dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal|center"
            android:text="1" />

        <Button
            android:id="@+id/button2"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="145dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal|center"
            android:text="2" />

        <Button
            android:id="@+id/button3"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="145dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal|center"
            android:text="3" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：296
> 
> 时间：2013-02-08T19:27:42.893

您需要确保四件事：

*   你的外面`LinearLayout`有`layout_height="match_parent"`
*   你的内心`LinearLayout`有`layout_weight="1"`和`layout_height="0dp"`
*   你`TextView`有`layout_weight="0"`
*   你已经在你的内心正确地设置了重力`LinearLayout: android:gravity="center|bottom"`

请注意，`fill_parent`这并不意味着“占用所有可用空间”。但是，如果您使用`layout_height="0dp"`with `layout_weight="1"`，则视图将占用所有可用空间（[Can't get proper layout with "fill_parent"](https://stackoverflow.com/questions/5254018/cant-get-proper-layout-with-fill-parent)）。

这是我快速编写的一些代码，它以与您的代码类似的方式使用两个线性布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/db1_root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="@string/cow"
        android:layout_weight="0"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:gravity="center|bottom"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="145dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal|center"
            android:text="1" />

        <Button
            android:id="@+id/button2"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="145dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal|center"
            android:text="2" />

        <Button
            android:id="@+id/button3"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="145dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal|center"
            android:text="3" />
    </LinearLayout>

</LinearLayout> 
```

结果与此类似：

![在此处输入图像描述](../Images/c6ba6f2794b18404823ef063f049574c.png)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-02-08T19:15:09.633

You can use a `RelativeLayout` and align it to the bottom with `android:layout_alignParentBottom="true"`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-10-09T09:15:04.187

创建相对布局并在该布局内使用此行创建您的按钮

```
android:layout_alignParentBottom="true" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-12T04:48:20.477

您可以通过将 Frame 布局作为父布局然后将线性布局放入其中来做到这一点。这是一个例子：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
 >
<LinearLayout
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical">

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:textSize="16sp"/>

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="5dp"      
    android:textSize="16sp"
    />

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:textSize="16sp"/>

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="5dp"
     android:textSize="16sp"/>

</LinearLayout>

<Button
    android:id="@+id/button2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
    android:layout_gravity="bottom"
    />
 </FrameLayout> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-08T19:18:27.363

首先创建文件名，`footer.xml` 将此代码放入其中。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="78dp"
    android:layout_gravity="bottom"
    android:gravity="bottom"
 android:layout_weight=".15"
    android:orientation="horizontal"
    android:background="@drawable/actionbar_dark_background_tile" >
    <ImageView
        android:id="@+id/lborder"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/overlay" />
    <ImageView
        android:id="@+id/unknown"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/notcolor" />
    <ImageView
        android:id="@+id/open"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/openit"
        />
    <ImageView
        android:id="@+id/color"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/colored" />
        <ImageView
        android:id="@+id/rborder"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/frames"
        android:layout_weight=".14" />

</LinearLayout> 
```

然后创建**header.xml**并将此代码放入其中。：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="@dimen/action_bar_height"
    android:layout_gravity="top"
    android:baselineAligned="true"
    android:orientation="horizontal"
    android:background="@drawable/actionbar_dark_background_tile" >
    <ImageView
        android:id="@+id/contact"
        android:layout_width="37dp"
        android:layout_height="wrap_content"
        android:layout_gravity="start"
        android:layout_weight=".18"
        android:scaleType="fitCenter"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/logo"/>

    <ImageView
        android:id="@+id/share"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="start"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/share" />

    <ImageView
        android:id="@+id/save"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/save" />

    <ImageView
        android:id="@+id/set"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/set" />

    <ImageView
        android:id="@+id/fix"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/light" />

    <ImageView
        android:id="@+id/rotate"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/ic_menu_rotate" />

    <ImageView
        android:id="@+id/stock"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/stock" />

</LinearLayout> 
```

然后在你的`main_activity.xml`里面，把这段代码放进去：-

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="fill_parent"
tools:context=".MainActivity"
android:id="@+id/relt"
android:background="@drawable/background" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="78dp"
    android:id="@+id/down"
    android:layout_alignParentBottom="true" >

    <include
        android:layout_width="fill_parent"
        android:layout_height="78dp"
        layout="@layout/footer" >
    </include>
</LinearLayout>
<ImageView
    android:id="@+id/view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/down"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/inc"
   >  
    </ImageView> 
    <include layout="@layout/header"
        android:id="@+id/inc"
        android:layout_width="fill_parent"
        android:layout_height="50dp"></include> 
```

快乐编码:)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-03-22T05:46:16.513

```
<LinearLayout
 android:id="@+id/LinearLayouts02"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="vertical"
 android:gravity="bottom|end">

<TextView
android:id="@+id/texts1"
android:layout_height="match_parent"
android:layout_width="match_parent"
android:layout_weight="2"
android:text="@string/forgotpass"
android:padding="7dp"
android:gravity="bottom|center_horizontal"
android:paddingLeft="10dp"
android:layout_marginBottom="30dp"
android:bottomLeftRadius="10dp"
android:bottomRightRadius="50dp"
android:fontFamily="sans-serif-condensed"
android:textColor="@color/colorAccent"
android:textStyle="bold"
android:textSize="16sp"
android:topLeftRadius="10dp"
android:topRightRadius="10dp"/>

</LinearLayout> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-08T19:12:42.973

只需在具有按钮的 linearLayout 中添加 layout_weight="1" 即可。

**编辑：-**让我简单点

遵循以下内容，标签名称可能不正确，这只是一个想法

```
<LL>// Top Parrent LinearLayout
   <LL1 height="fill_parent" weight="1" "other tags as requirement"> <TV /><Butons /></LL1> // this layout will fill your screen.
   <LL2 height="wrap_content" weight="1"  orientation="Horizontal" "other tags as requirement"> <BT1 /><BT2/ ></LL2> // this layout gonna take lower part of button height of your screen

<LL/> TOP PARENT CLOSED 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-15T15:02:55.310

即使您的父布局是线性的，您也可以将您的**按钮**捆绑在一个 **相对布局中。**确保最外面的父级将**android:layout_height**属性设置为**match_parent**。在那个 Button 标签中添加 **'android:alignParentBottom="True" '**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-16T19:49:43.863

就我而言，我试图在线性布局的底部放置一个完整的线性布局。当我尝试使用“layout_gravity”到底部时，它不起作用。所以我将根布局更改为框架布局，它工作得很好。

因此，如果您想在底部放置布局，请尝试使用框架布局并将其他所有内容放在嵌套的线性或相对布局中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-28T16:53:33.187

添加`android:windowSoftInputMode="adjustPan"`到清单 - 到相应的活动：

```
 <activity android:name="MyActivity"
    ...
    android:windowSoftInputMode="adjustPan"
    ...
  </activity> 
```

# java - Hibernate 1:n 关系带来空值

> ID：14779689
> 
> 赞同：0
> 
> 时间：2013-02-08T19:10:56.147
> 
> 标签：java, hibernate

我有两节课

Alocacao 和 Responsavel

我有一个 1:n

响应类

```
@Entity
@Cache(usage=CacheConcurrencyStrategy.READ_WRITE)
@Table(name="Responsavel")
public class Responsavel {

@Id
@Column(name="idResp")
private int idResp;

@Column(name="nomeResp")
private String nomeResp;

@Column(name="emailResp")
private String email;

@ManyToOne(fetch=FetchType.EAGER)
@JoinColumn(name="idGrupResp")
private GrupoResponsavel grupo;

@Column(name="idPovUser")
private int povUser;

@ManyToMany(mappedBy="responsavel", fetch=FetchType.EAGER)
private List<TarefaBackLog> tarefa;

public Responsavel() {
    super();
}
//getters and setters 
```

Alocacao 类

```
@Entity
@Table(name = "responsavel_alocacao")
public class Alocacao {
@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name = "idRespAloc")
private int idAlocacao;

@ManyToOne
@JoinColumn(name="idResponsavel", referencedColumnName="idResp")
private Responsavel idResponsavel;

@JoinColumn(name="idPeriodo")
private PeriodoPov idPeriodo;

@Column(name="Alocacao")
private double alocacao;
//getters and setters 
```

但是当我尝试使用“findAll()”获取所有 Alocacao 对象时，它会给 idPeriodo 和 idResponsavel 带来空值。有什么想法吗？

谢谢

# geonames - 地名获取附近的地方

> ID：14779692
> 
> 赞同：1
> 
> 时间：2013-02-08T19:11:16.587
> 
> 标签：geonames

我想知道如何使用 Geonames Web 服务来返回接近某个纬度组合的所有地方。我想做的例子是[here。](http://www.geonames.org/maps/google_-29.536_31.214.html)查看表格底部列出的所有城镇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:15:33.050

On that page:

[http://www.geonames.org/export/ws-overview.html](http://www.geonames.org/export/ws-overview.html)

You find all web services available.

Service No.9 findNearby is a good candidate for your task.

In that "findNearby" Service you pass in:
Parameters : lat,lng, featureClass,featureCode, radius: radius in km (optional), maxRows : max For featureClass and Code you have to read a bit the docu.

# java - Java MouseListener 一旦添加到另一个类就不起作用

> ID：14779698
> 
> 赞同：1
> 
> 时间：2013-02-08T19:11:47.893
> 
> 标签：java, user-interface, jlabel, mouselistener

基本上我有两个类，一个`Infantry`用于在游戏中创建单位，一个`Map`用于将所有内容（即单位、建筑物等）绘制到屏幕上。我的班级中有一个`MouseListener`在`Infantry`单击时获取鼠标坐标，将图像的 x 和 y 变量设置为这些变量，然后在屏幕上重新绘制图像。当我直接`Infantry`在我的 JFrame 类中创建一个对象时，这工作正常，但我看不到`Map`该类是事先绘制的。当我在`Map`类本身中创建对象时（这是我的主要目标），`MouseListener`不起作用，因为它不会注册单击或任何方法（我尝试了控制台打印输出来测试它）。现在我对为什么这不起作用有点迷茫，任何帮助将不胜感激。步兵班：

```
public class Infantry extends JLabel{

private Image img;
private int bx;
private int by;
private MouseListener move = new Move();

public Infantry(String file, int Bx, int By){
    img = new ImageIcon(file).getImage();
    bx = Bx;
    by = By;
    setOpaque(false);
    addMouseListener(move);
}

public void paintComponent(Graphics g){

    super.paintComponents(g);

    g.drawImage(img, bx, by, null);

}

private class Move implements MouseListener{

    @Override
    public void mouseClicked(MouseEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseEntered(MouseEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseExited(MouseEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mousePressed(MouseEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseReleased(MouseEvent e) {
        // TODO Auto-generated method stub
        bx = e.getX();
        by = e.getY();
        repaint();
    }

} 
```

}

# r - 如何使用 data.table 处理空/不完整的子集

> ID：14779700
> 
> 赞同：2
> 
> 时间：2013-02-08T19:11:49.753
> 
> 标签：r, data.table

我有一个包含年份、国家和公司标识符的数据面板。我想将 logit 模型拟合到使用`data.table`. 如果我在每个年份国家子集中有足够的条目来拟合模型，我没有问题，但是如果年份国家子集中没有足够的数据，则会`glm`引发错误并且我无法拟合所有模型. （我得到基本上相同的错误`lm`。）

里面有解决办法`data.table`吗？或者我应该在上游整理我的数据以确保没有数据不足的年份国家子集？

谢谢！

```
library(data.table)

# similar data
DT <- data.table(year=rep(2001:2010, each=100),
                 country=rep(rep(1:10, each=10), 10), 
                 firm=rep(1:100, 10), 
                 y=round(runif(100)), 
                 x=runif(100)
                 )
setkey(DT, year, country)

# no problems if there are enough data per year-country subset
DT2 <- DT[, as.list(coef(glm(y ~ x), family="binomial")), by="year,country"]

# but `lm` throws and error if there are missing data
DT[(DT$year == 2001) & (DT$country == 1), "y"] <- NA
DT3 <- DT[, as.list(coef(glm(y ~ x, family="binomial"))), by="year,country"] 
```

产量

```
> DT3 <- DT[, as.list(coef(glm(y ~ x, family="binomial"))), by="year,country"]
Error in family$linkfun(mustart) : 
  Argument mu must be a nonempty numeric vector 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:33:07.783

这个怎么样？

```
fn <- function(x, y) {
  if (length(na.omit(y)) == 0)
    NULL
  else
    as.list(coef(glm(y ~ x, family="binomial")))
}

DT3 <- DT[, fn(x, y), by="year,country"] 
```

您显然可以`fn`为您的特定目的定制错误检查。

**更新**。如果您想`fn`潜在地处理数据表中的多个列，这是一个解决方案：

```
fn <- function(df) {
  if (length(na.omit(df$y)) == 0)
    NULL
  else
    as.list(coef(glm(df$y ~ df$x, family="binomial")))
}

DT3 <- DT[, fn(.SD), by="year,country"] 
```

* * *

**从马修编辑**

这不是你应该使用的方式`data.table`。无需定义函数。只需像这样直接使用变量：

```
DT3 <- DT[, 
  if (length(na.omit(y)) == 0)
    NULL
  else
    as.list(coef(glm(y ~ x, family="binomial")))
, by="year,country"] 
```

不建议重复`df$`inside`fn()`和 call ，除非您确实使用了所有列，例如 using 。有相当大的多行是很常见的。`fn(.SD)``data.table``.SD``.SDcols``{ ... }``j`

# php - $.getJSON 在有效 JSON 上失败？

> ID：14779701
> 
> 赞同：0
> 
> 时间：2013-02-08T19:11:51.233
> 
> 标签：php, jquery, json

`$.getJSON`我在函数响应没有意义的 JQuery/JSON 问题上大发雷霆。

所以这是我的 Javascript 代码摘录：

```
var jqxhr = $.getJSON("myPHPFunction.php", function() {
      alert("success");
    })
    .success(function() { alert("second success"); })
    .error(function() { alert("error"); })
    .complete(function() { alert("complete"); }); 
```

PHP 函数返回的 JSON 是这样的：

```
{"sid":"12", "name":"somename", "email":"someemail"} 
```

完整回复：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head><title>Untitled Document</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body> {"sid":"12", "name":"somename", "email":"someemail"}
</body>
</html> 
```

当我运行脚本时，我得到一个对话框，说`error`.

一些在线验证器报告 JSON 语法正确。那为什么 JQuery 会失败呢？注意 php 和脚本都在同一个文件夹（在服务器上）和同一个域中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:19:24.420

从评论中，您无法将 JSON 封装在 HTML 标记中。您需要确保返回的数据（“查看源代码”是验证这一点的好工具）是纯 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:14:00.227

您的回复不得包含任何 HTML！

可能您还需要设置正确的内容类型：

```
header("Content-Type: application/json");
echo('{"sid":"12", "name":"somename", "email":"someemail"}');
exit(); 
```

上面的代码应该可以工作。

请注意，您不得在标题行之前输出任何其他代码。

# c# - 使用 AutoMapper 对邻接列表模型进行数据映射

> ID：14779702
> 
> 赞同：0
> 
> 时间：2013-02-08T19:11:51.817
> 
> 标签：c#, automapper, adjacency-list, data-mapping

所以有一个模型对象`TreeNode`：

```
Public Class TreeNode{
  Public int NodeId {get;set;}
  Public String Name {get;set;}
  Public int ParentId {get;set;}
  Public TreeNode Parent {get;set;}
  Public List<TreeNode> Children {get;set;}
} 
```

该结构由使用[邻接列表模式](http://docs.sqlalchemy.org/en/latest/orm/relationships.html#adjacency-list-relationships)的数据库提供支持。我正在使用带有[AutoMapper](http://automapper.codeplex.com/)的 WCF 服务来填充我的模型类。

我想做这样的事情：

```
public static void ConfigureMappings()
{
  Mapper.CreateMap<TreeNodeDto, Taxonomy>()
  .AfterMap((s, d) =>
  {  
     //WCF service calls to get parent and children
     d.Children =  Mapper.Map<TreeNodeDto[], TreeNode[]>(client.GetTreeChildren(s)).ToList();
     d.Parent = Mapper.Map<TreeNodeDto, TreeNode>(client.GetTreeParent(s));
  });
} 
```

但显然这会导致无限循环（如果我只映射孩子，它确实有效）。有什么方法可以使用 AutoMapper 填充我的树结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:17:33.550

我找到了这个部分解决方案。起初我认为这是我正在寻找的东西，但经过进一步检查，它只有在你从树顶开始时才有效。如果您从中间开始，它不会填充父节点。

[如何使用 AutoMapper 将父引用分配给子属性](https://stackoverflow.com/questions/4377377/how-to-assign-parent-reference-to-a-property-in-a-child-with-automapper?rq=1)

```
public static void ConfigureMappings()
{
  Mapper.CreateMap<TreeNodeDto, Taxonomy>()
  .AfterMap((s, d) =>
  {  
     //WCF service calls to get parent and children
     d.Children =  Mapper.Map<TreeNodeDto[], TreeNode[]>(client.GetTreeChildren(s)).ToList();
    foreach( var child in d.Children)
    {
       child.Parent = d;
    }
} 
```

# c# - 用两个相似的算法设计代码复制和测试？

> ID：14779703
> 
> 赞同：0
> 
> 时间：2013-02-08T19:11:54.997
> 
> 标签：c#, unit-testing, architecture, moq

我正在开发一个程序来操纵成本历史并最终进行预测。

我面临的问题是我想计算将用于成本历史的修饰符以消除季节差异。我需要两种不同的方法来计算它们，这两种方法几乎相同，除了它将是乘法而不是加法的地方。

一个例子是：

```
 private void CalculAndSumEveryPeriodeModifier()
    {
        List<double> averages = MovingAverage.Averages;

        for (int i = 0; i < averages.Count; ++i)
        {
            averages[i] = costsList[i + NbPeriode / 2] / averages[i] // Division changed to substraction
            modifiers[((i + NbPeriode / 2) % NbPeriode)] += averages[i];
        }
    } 
```

我尝试了一个抽象类，它有一个需要两个双精度的私有抽象方法。然后具体的类可以实现这个方法来在算法中的某些点除或减双精度数。

这种方法的问题是我不知道如何对其进行单元测试。如果可以，我可以使用 moq 框架测试抽象类吗？否则我需要测试两个将重复代码的具体类，因为测试是相同的。

有没有办法对我的尝试进行单元测试，还是有更好的方法？

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:16:20.753

Why not factor out the common code of the two unit test methods into a shared method?

```
private int[] input = new int[] { 2, 8, 6, 1, 5, 1, 7, 5, 2, 4 };

[TestMethod]
public void TestVariantA() 
{
    var obj = new ConcreteA();
    DoTest(obj, input, new int[] { -2.8, 3, 1.4, -3.2, 1 });
}

[TestMethod]
public void TestVariantB() 
{
    var obj = new ConcreteB();
    DoTest(obj, input, new int[] { 0.2632, 1.7500, 1.3397, 0.2381, 1.2500 });
}

private void DoTest(AbstractType obj, int input, int expected)
{
    ...
} 
```

# apache - 身份验证服务器和网络服务器的反向代理

> ID：14779704
> 
> 赞同：1
> 
> 时间：2013-02-08T19:11:57.300
> 
> 标签：apache, http, authentication, reverse-proxy, varnish

一段时间以来，我和我的团队一直在使用客户端开发 API 服务器。我们想使用一个单独的服务器作为认证服务器。考虑下图。

```
+----------+
|          |
|  Client  |
|          |
+-^------+-+
  |      |
 (6)    (1)
  |      |
  |      |
+-+------v-+            +----------+
|          +----(2)----->          |
|  Proxy   |            |   Auth   |
|          <----(3)-----+          |
+-^------+-+            +----------+
  |      |
 (5)    (4)
  |      |
  |      |
+-+------v-+
|          |
|  Apache  |
|          |
+----------+ 
```

现在我们已经将 Varnish Cache 设置为这个反向代理，它可以很好地解决一个非常重要的问题。为了实现上面的流程，我们必须在客户端轮询认证服务器*以确认头部中*提供的某些访问令牌的有效性之后重新启动清漆循环。这里的怪癖是，当发送 POST 请求（也需要进行身份验证）时，varnish 将在重启循环后省略 POST 请求正文。API 永远不会收到任何 POST 数据 ( [https://www.varnish-cache.org/trac/ticket/652](https://www.varnish-cache.org/trac/ticket/652) )。这就是我们卡住的地方。

主要问题是：我们如何实现我们试图在图中完成的流程？理想情况下，我们继续使用 varnish 作为反向代理*和*缓存机制，但如果我们需要设置不同的反向代理并让 Varnish 只是代理和 API 之间的缓存服务器，我没有任何问题。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:22:23.747

正如您所注意到的，Varnish（目前）几乎没有处理请求或响应主体。但是，它与标题相当不错。

您能否更改应用程序，以便有足够的信息仅通过标头进行身份验证？

POST 到其中嵌入了身份验证令牌的 URL，或添加其他请求标头。(X-auth-token: foo)

我还建议使用[CURL VMOD](https://github.com/varnish/libvmod-curl)调用身份验证服务器，而不是使用重新启动。使 VCL 更具可读性和易于调试。

# php - Wordpress 图像 URL 中的端口号

> ID：14779718
> 
> 赞同：0
> 
> 时间：2013-02-08T19:12:35.390
> 
> 标签：php, wordpress, wordpress-theming

我在本地机器上使用 Wordpress，但由于一个奇怪的问题而卡住了。我的每张图片的 URL 都显示了一个端口号：

```
http://localhost:81/sitename/wp-content/uploads/2013/02/logo_dbl1.png 
```

因此，Wordpress 显示的是断开的链接而不是图像。当我尝试上传它们时，它会在上传文本框中显示一个虚假的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:58:51.407

这很可能是因为您在 wordpress 设置中的通用博客地址设置为使用端口 81。尝试转到

```
Dashboard > Settings > General blog address 
```

并确保它具有正确的 URL（或正确的端口，如果您使用`localhost`

# php - Facebook 许可“生日”给了我错误的年龄

> ID：14779722
> 
> 赞同：1
> 
> 时间：2013-02-08T19:12:57.080
> 
> 标签：php, mysql, facebook

我正在尝试拉生日以获取使用 Facebook 在我的页面上登录的用户的年龄。我一直尝试使用我的个人资料登录，但它给了我错误的年龄。下面是我在 process_facebook.php 中的代码（我有一个数据库，其中包含一个名为“age”的字段，该字段采用 int）：

```
function getAge($birthday) {
        $dt = strtotime($birthday);
        // convert the birthday to a standard format (UNIX epoch)
        $a = gmdate('Y') - gmdate('Y',$dt);
        // find the difference of years
        $a = (int)$a;
        return $a; // return the age.
    } 
```

在典型的 process_facebook.php 框架中，我有这个：

```
$birthday = $me['birthday'];

$age = getAge($birthday); 
```

我知道我在 Facebook 上的生日是 1987 年 1 月 4 日（应该在 $birthday 中作为字符串“01/04/1987”拉出）。但是当我的数据库中的字段被填充时，它的数字是 43。

我试过单独运行代码，将它作为 $birthday 输入“01/04/1987”，它吐出 26 个罚款。

我不确定发生了什么（Facebook 会不会给我一个错误的生日？）提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:25:15.437

如果您确实授予了您的应用程序权限，请检查[Graph API Explorer 。](https://developers.facebook.com/tools/explorer/)`user_birthday`在右上角的下拉列表中选择您的应用程序并用此填充文本框

```
me?fields=birthday 
```

如果输出中没有`birthday`字段，您可以点击`Get Access Token`查看您授予应用程序的权限。

我认为您没有授予`user_birthday`您的应用程序进行身份验证的权限并且`$me['birthday']`是空的。这就是为什么从 1970 年以来计算的年龄是 43 年，正如[Marc B](https://stackoverflow.com/users/118068/marc-b)在他的评论中指出的那样。要检查，只需使用`var_dump($me['birthday'])`.

并且一定要检查[这个评论](https://stackoverflow.com/questions/14779722/facebook-permission-birthday-giving-me-the-wrong-age/14779905#comment20695361_14779722)。

# java - How to hide INFO messages from LocalServiceTestHelper when running GAE/J test cases?

> ID：14779728
> 
> 赞同：4
> 
> 时间：2013-02-08T19:13:26.707
> 
> 标签：java, unit-testing, google-app-engine, testing, logging

Before deploying my GAE app, I am running several hundreds of [unit tests](https://developers.google.com/appengine/docs/java/tools/localunittesting) locally. I am using the [LocalServiceTestHelper](https://developers.google.com/appengine/docs/java/tools/localunittesting/javadoc/com/google/appengine/tools/development/testing/LocalServiceTestHelper) to use GAE services like memcache or the datastore. Setting up and tearing down the helper between tests creates a lot of log output.

*How can I re-configure [java.util.logging](http://docs.oracle.com/javase/7/docs/api/java/util/logging/package-summary.html) in order to avoid [INFO messages](http://docs.oracle.com/javase/7/docs/api/java/util/logging/Level.html) caused by LocalServiceTestHelper entirely?*

```
INFO: Local Datastore initialized: 
Type: Master/Slave
Storage: In-memory
Feb 08, 2013 7:01:52 PM com.google.appengine.api.taskqueue.dev.LocalTaskQueue init
INFO: LocalTaskQueue is initialized
Feb 08, 2013 7:01:52 PM com.google.appengine.api.taskqueue.dev.LocalTaskQueue init
INFO: Automatic task execution is disabled.
Feb 08, 2013 7:01:52 PM org.quartz.simpl.SimpleThreadPool initialize
INFO: Job execution threads will use class loader of thread: main
Feb 08, 2013 7:01:52 PM org.quartz.core.QuartzScheduler <init>
INFO: Quartz Scheduler v.null.null.null created.
Feb 08, 2013 7:01:52 PM org.quartz.simpl.RAMJobStore initialize
INFO: RAMJobStore initialized.
Feb 08, 2013 7:01:52 PM org.quartz.impl.StdSchedulerFactory instantiate
INFO: Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
Feb 08, 2013 7:01:52 PM org.quartz.impl.StdSchedulerFactory instantiate
INFO: Quartz scheduler version: null.null.null
Feb 08, 2013 7:01:52 PM com.google.appengine.api.taskqueue.dev.LocalTaskQueue start_
INFO: Local task queue initialized with base url http://localhost:8080
Feb 08, 2013 7:01:52 PM org.quartz.core.QuartzScheduler shutdown
INFO: Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutting down.
Feb 08, 2013 7:01:52 PM org.quartz.core.QuartzScheduler standby
INFO: Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED paused.
Feb 08, 2013 7:01:52 PM org.quartz.core.QuartzScheduler shutdown
INFO: Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutdown complete. 
```

**EDIT:**

I created the file src/test/resources/logging.properties. The file is copied to target/test-classes/ before the tests are executed. It has the following content:

```
com.google.appengine.api.taskqueue.dev.level=SEVERE
org.quartz.level=WARNING 
```

But I am still seeing the same log output while running the tests.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T14:29:49.713

While the logging.properties file in src/test/resources/ was well-formed, the maven-surefire-plugin was not aware of its location. As described [in another stackoverflow post](https://stackoverflow.com/a/3939549/1769636), you have to set the java.util.logging.config.file system property when configuring the plugin. After applying this simple change everything works as expected.

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <version>2.4.2</version>
  <configuration>
    <systemProperties>
      <property>
        <name>java.util.logging.config.file</name>
        <value>${project.build.directory}/test-classes/logging.properties</value>
      </property>
    </systemProperties>
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:35:50.350

Get a copy of `logging.properties` from your `appengine-java-sdk/config/user/` folder and put it into your project's classpath, for instance `src/test/resources` folder if using maven, and start configuring your own settings from here:

```
# A default java.util.logging configuration.
# (All App Engine logging is through java.util.logging by default).
#
# To use this configuration, copy it into your application's WEB-INF
# folder and add the following to your appengine-web.xml:
# 
# <system-properties>
#   <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
# </system-properties>
#

# Set the default logging level for all loggers to WARNING
.level = WARNING 
```

To configure log level for a particular package, using:

```
# Set logging level for particular package
com.google.appengine.api.taskqueue.dev.level = SEVERE
org.quartz.level = WARNING 
```

For a complete configuration guide, check out `lib/logging.properties` in your JRE installation folder.

# git - 应用从 git 所做的更改

> ID：14779736
> 
> 赞同：1
> 
> 时间：2013-02-08T19:13:56.030
> 
> 标签：git

我正在尝试改变我的工作流程并开始使用 git 而不是 ftp。我选择 Tower 来管理我的本地存储库。我在服务器上创建了一个裸 git 并通过 Tower 克隆了它。到现在为止还挺好。当我提交并推送我的更改时，我的文件不会更新（我通过 FTP 打开它们并且它们没有更改）。所以我删除了我的本地仓库并从远程服务器克隆，并且更改在那里，文件被更改。有谁知道为什么会这样？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:17:12.093

您需要了解工作副本（包含签出文件）和存储库（包含提交并在推送时更新）之间的区别。如果您想在相关存储库收到新提交时更新工作副本，您可能需要编写一个`post-receive`钩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T16:24:33.310

我正在使用类似的方法来部署我的主页。这是我的`post-receive`钩子的样子：

```
#!/bin/sh -eu
export GIT_DIR=/path/to/bare-git-repo
export GIT_WORK_TREE=/path/to/working-tree
cd "$GIT_WORK_TREE"
git reset --hard
git checkout 
```

请注意，我为 git 裸存储库本身及其工作树使用**单独的目录；**如果您有带有子目录的工作树`.git`，这应该足够了：

```
$ cat .git/hooks/post-receive 
#!/bin/sh -eu
git checkout -f 
```

您还必须在**接收存储库端**执行一次此命令：

```
git config receive.denyCurrentBranch ignore 
```

否则 git 将不接受使用已签出的工作树推送到 repo。

# entity-framework - 我可以在 EF 实体中嵌入对象（保存时序列化，访问时反序列化）吗？

> ID：14779740
> 
> 赞同：22
> 
> 时间：2013-02-08T19:14:08.857
> 
> 标签：entity-framework, ef-code-first

我有一个类，我想保留元数据——有几个交互场景，所以元允许我为不同的交互类型保留不同的元。

```
class Feed()
{
    Guid FeedId { get; set; }
    ObjectMetaDictionary Meta { get; set; }
} 
```

我希望 EF 序列化此 ObjectMetaDictionary 并将其作为字符串/VarChar 存储在数据库中。当我检索记录时，我希望将其反序列化为 ObjectMetaDictionary。

英孚支持吗？我该怎么做？

我首先使用实体​​框架代码。

**已解决：我在下面提供了一个答案，解决了我的问题。只要允许，我就会接受这个答案。**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-09T06:21:25.127

显然这实际上很容易。[多亏了这个以前的 SO answer](https://stackoverflow.com/questions/10904298/how-do-i-map-to-and-from-a-complex-type-in-ef4-3-code-first)的一些帮助，我才能让它工作。

流畅的配置`OnModelCreating`允许我们告诉 EF 使用什么作为值属性来序列化到数据库并再次退出。

这是我的解决方案：

```
public class Feed
{
    public virtual Guid FeedId { get; set; }

    public virtual FeedMetaData Meta { get; set; }

    public virtual string Title { get; set; }
    public virtual string Description { get; set; }

}

public class FeedMetaData
{
    public Dictionary<string, string> Data { get; set; }

    public string Serialized
    {
        get { return JsonConvert.SerializeObject(Data); }
        set
        {
            if(string.IsNullOrEmpty(value)) return;

            var metaData = JsonConvert.DeserializeObject<Dictionary<string, string>>(value);

            Data = metaData ?? new Dictionary<string, string>();
        }
    }

    // addl code removed...
}

public class FeedsDbContext : DbContext
{
    public DbSet<Feed> Feeds { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.ComplexType<FeedMetaData>()
                    .Property(p => p.Serialized)
                    .HasColumnName("Meta");
        modelBuilder.ComplexType<FeedMetaData>().Ignore(p => p.Data);

        base.OnModelCreating(modelBuilder);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:30:13.667

让您的 Entity Framework 对象简单，并为数据库中的列提供一个 String 属性。

```
class Feed()
{
    Guid FeedId { get; set; }
    String Meta { get; set; }
} 
```

创建这样保存和加载属性的方法：（自从我使用 EF 以来已经有一段时间了，所以我不确定您是否可以使用这些 getter/setter 创建瞬态属性，或者您是否需要其他东西）

```
//Reading from string column Meta
(ObjectMetaDictionary) XamlServices.Load(new StringReader(someFeed.Meta));

//Saving to string column Meta
someFeed.Meta = XamlServices.Save(value); 
```

不过，这会给您的项目带来另一个整体问题。更改您的`ObjectMetaDictionary`可能会导致它无法正确地从数据库中反序列化。您`ObjectMetaDictionary`基本上成为数据库架构的一部分，您将需要相应地处理版本控制或更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-30T20:52:07.897

[HasConversion](https://docs.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.metadata.builders.propertybuilder-1.hasconversion?view=efcore-2.1#Microsoft_EntityFrameworkCore_Metadata_Builders_PropertyBuilder_1_HasConversion__1_System_Linq_Expressions_Expression_System_Func__0___0___System_Linq_Expressions_Expression_System_Func___0__0___)功能挽救了我的生命。解锁所有 json 格式！好好享受！

```
public partial class Feed
{
    public int Id { get; set; }

    //this column will be mapped to a "nvarchar(max)" column. perfect!
    public Dictionary<string, string> Meta { get; set; }
}

public class FeedsDbContext : DbContext
{

    public FeedsDbContext(DbContextOptions<FeedsDbContext> options)
        : base(options)
    {
    }

    public virtual DbSet<Feed> Feed { get; set; }

    protected override void OnModelCreating(ModelBuilder builder)
    {
        base.OnModelCreating(builder);

        builder.Entity<Feed>(entity =>
        {
            entity.Property(p => p.Meta).HasConversion(
                x => JsonConvert.SerializeObject(x) //convert TO a json string
                , x => JsonConvert.DeserializeObject<Dictionary<string, string>>(x) //convert FROM a json string
            );
        });
    }

} 
```

# grails - grails 是否继承 hasMany 关系？

> ID：14779743
> 
> 赞同：0
> 
> 时间：2013-02-08T19:14:22.723
> 
> 标签：grails, inheritance

有人可以告诉我在以下情况下会发生什么吗？一个 hasMany 会覆盖另一个，还是两者都会受到尊重？

```
class Parent {
    static hasMany = [attributes: Attribute]
}

class Child extends Parent {
    static hasMany = [games: Game]
} 
```

当我尝试使用与上面类似的代码运行我的应用程序时，它会失败并显示“null”消息，这很有帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:43:47.003

是其他原因导致了问题，而不是实际代码本身。因此，为了回答我的问题，两个 hasMany 关系都在 Child 中得到支持。

# c# - Visual Studio Windows Forms Controls are overlapping on different machines

> ID：14779746
> 
> 赞同：1
> 
> 时间：2013-02-08T19:14:36.327
> 
> 标签：c#, winforms, visual-studio-2010, overlapping

I use Microsoft Visual Studio 2010 on a 64bits Windows 7 machine which has a screen monitor with 1080p resolution. I designed a window with the Designer in MS VS 2010\. Looked good on that machine.

Now I try to run this project on my laptop (also MS VS 2010 and Windows 7 64bits), which has probably a different system font and a different screen resolution.

This is the result: [http://puu.sh/1ZoRs](http://puu.sh/1ZoRs) *(not talking about the red lables)*

I searched the internet for a [fix](http://msdn.microsoft.com/en-us/library/ms229594.aspx), but nothing seems to help Also tried to edit some properties and changing the fonts to systemfonts in code. No luck.

Why does this happen? What's the fix for this? Why doesn't the window/controls resize automatically to fit everything?

# excel - 比较 Excel 中的 2 个列表？

> ID：14779747
> 
> 赞同：2
> 
> 时间：2013-02-08T19:14:37.860
> 
> 标签：excel, list-comparison

我在电子表格中有 2 列。一列比另一列多出大约 26 行。我一直在尝试各种公式来突出显示或以某种方式指示较小的列表中缺少哪些列...

我尝试用这个填充第三列：

```
=FIND(B1,A1:A1102) 
```

如果 b1 在列表 a1:a1102 中，我虽然返回 1 唉，这似乎不是真的。

有人有比较两个列表和隔离差异的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:27:04.440

要使用 MATCH，请使用以下内容：

```
 =IFERROR(MATCH(B1,$A$1:$A$1102,0),0) 
```

输入单元格 C1 并复制到 B 列中数据的末尾

当然，这假设 B 列包含较长的列表，而 A 列包含较短的列表。

MATCH 公式将返回 B1 在 A 中匹配的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T19:27:36.243

您可以使用 `if`,`iferror`和`vlookup`函数的组合。

```
=IF(IFERROR(VLOOKUP(B1,$A$1:$A$10,1,FALSE),"missing")="missing", 1, 0) 
```

这将在 A 列中为 B 列中的值找到匹配项。如果缺少该值，`iferror`则将报告它缺失 (#N/A)。然后该`if`函数将为缺失值输出 1，为找到的值输出 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T19:18:09.323

**编辑：**

我的错，我建议了错误的功能-除了绝对参考，您需要使用`MATCH`-正如其他答案中所建议的那样：`=MATCH(B1,$A$1:$A$1102,0)`或查找整列：`=MATCH(B1,A:A,0)`。

丢失的物品将被退回`#N/A`，但它很容易处理`IFERROR`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T19:17:31.510

我认为你需要使用`MATCH`而不是`FIND`

或者，如果您想对此更感兴趣，请查看此线程：

[https://superuser.com/questions/289650/how-to-compare-two-columns-and-find-differences-in-excel](https://superuser.com/questions/289650/how-to-compare-two-columns-and-find-differences-in-excel)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-26T20:51:31.770

我知道这有点老了，但我无法让 MATCH() 在同一个工作簿中的不同选项卡上工作。另外，如果不需要，我宁愿不添加列。对我有用的是使用条件格式：

1.  选择您要测试的一列（假设此示例为“Z”）
2.  选择条件格式 -> 新规则
3.  选择“使用公式...”
4.  使用`=COUNTIF('otherTab'!$A:$A, $Z1)`- 其中`'otherTab'`是另一个选项卡的名称，`'A'`是您要测试的选项`'Z'`卡中的列，并且是此选项卡中的列
5.  设置“我找到了匹配！”的配色方案。给你
6.  点击确定

然后，如果您需要同时检查两者，您可以在另一列上执行相同的操作。

# javascript - 如何从 JavaScript 更改 GMail 撰写窗口中的字体选择？

> ID：14779751
> 
> 赞同：3
> 
> 时间：2013-02-08T19:14:52.197
> 
> 标签：javascript, google-chrome-extension, gmail

我经常在我的电子邮件中提到代码，我喜欢在视觉上与文本的其余部分区分开来。不过，用当前的 UI 来做这件事是一个巨大的痛苦。

我想制作一个 Chrome 扩展程序，它添加了一个键盘快捷键，将 GMail 撰写窗口中的字体切换为“Courier New”并返回“Sans Serif”。这似乎相对困难，因为所有 JS 代码都被混淆了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T21:42:19.867

这不包括切换菜单，但您可以直接编辑电子邮件正文的 DOM。GMail 似乎是`<font face='courier new, monospace'>...</font>`用来设置字体的，所以你可以像[这个小书签](http://jsbin.com/ilopej/3/quiet)那样做。

```
javascript:(function(){var selection=window.getSelection().getRangeAt(0);var selectedText=selection.extractContents();var font=document.createElement('font');font.face='courier new, monospace';font.appendChild(selectedText);selection.insertNode(font);})(); 
```

# javascript - MongoDB Shell 脚本和 JavaScript 的区别？

> ID：14779761
> 
> 赞同：0
> 
> 时间：2013-02-08T19:15:35.577
> 
> 标签：javascript, node.js, mongodb, mongo-shell

由于这是一个家庭作业，我不想发布我的代码，因为它本质上提供了一个解决方案。我可以发布一些通用的片段。我将首先说我是 javascript 和 Mongo 的新手，并且基本上在昨晚几个小时内就学会了它们。

基本上我有代码，当我粘贴到 shell 中时，它工作得很好，但是当我将它保存到数据库中并尝试执行它时它不起作用。这是一个基本的例子。

```
db.system.js.save(
{
   _id: "istrue",
   value: function (x){ 
   if(x == true)
      print("true");
   else
      print("false");
   }
}) 
```

因此，如果我复制并粘贴此代码并先设置`var x = true`or`var x = false`则它可以工作，但是如果我这样做：

```
db.eval("istrue(true);"); 
```

然后它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:30:21.653

我找不到有关此行为的任何文档，但是一些测试表明您的代码运行得很好，但是存储的函数无法使用`print`或输出`print`到 stdout 以外的其他地方。如果你使用`return`字符串而不是打印它们，你会看到你所期望的。

我怀疑输出将发送到 MongoDB 日志，但我不确定我的安装将它们放在哪里。

# php - Yii CActiveRecord 类有 first() 方法吗？

> ID：14779763
> 
> 赞同：5
> 
> 时间：2013-02-08T19:15:42.917
> 
> 标签：php, yii

我只需要从 Yii CActiveRecord 派生类中获取第一条记录。在 Rails 中，我只能这样做：

```
post = Post.first 
```

我想我可以像这样对 Yii 做同样的事情：

```
$post = Post::model()->first(); 
```

但这种方法不存在。我是否必须找到条件才能获得第一条记录？

我在 CActiveRecord 的文档中没有看到 first()，所以我认为答案是否定的，它没有第一种方法。那么如何只查询第一条记录呢？

这可行，但肯定是一个丑陋的黑客。肯定有更好的办法。

```
$first = Post::model()->findAll(array('order'=>id, 'limit'=>1)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T20:52:03.783

Yii 不会对您的数据应该如何排序做出任何假设。良好的数据库设计要求如果您使用代理键，则该键应该具有无意义的值。这意味着不使用它来订购。

撇开这个问题不谈，这可能是进行查询的最佳方式：

```
$first = Post::model()->find(array('order'=>'id ASC')); 
```

通过使用`find`而不是`findAll`您自动将 a`LIMIT 1`应用于您的结果。我不会跳过 order by 子句的包含，因为这样可以确保数据库对结果进行一致的排序。

如果您经常使用此查询，则可以创建以下方法。**更新**：修改它以在 primaryKey 是复合或丢失时引发异常。我们也可以添加更多错误检查，但我们将其留给读者作为练习。;)

```
public function first($orderBy = null){
    if(!$orderBy){
       $orderBy = self::model()->tableSchema->primaryKey;
    }
    if(!is_string($orderBy)){
        throw new CException('Order by statement must be a string.');
    }
    return self::model()->find(array('order'=>$orderBy));
} 
```

然后将此方法包含在扩展 CActiveRecord 的类中，然后从该类扩展您的所有模型。

默认情况下，我编写的包装器将按主键排序结果，但如果您愿意，您可以选择传递不同的列和方向（ASC 或 DESC）。

然后，如果您为 post 类执行此操作，则可以像这样访问第一个模型：

```
$first = Post::model()->first(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T20:29:44.917

`CActiveRecord::find()`只返回一个模型。

```
$first=Post::model()->find(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-16T10:35:28.750

Yii2 在做 a 时要求一个条件`findOne()`。

您可以`find()`无条件执行以下操作，然后返回`one()`

```
$first= Post::find()->one(); 
```

要真正确定你可以在其中添加一个`orderBy`子句：

```
$first= Post::find()->orderBy(['id' => SORT_ASC])->one(); 
```

命令功能也是如此：

```
$first= \Yii::$app->myDatabase->createCommand('SELECT * FROM Post ORDER BY id ASC')->queryOne(); 
```

# winapi - 如何加快我的代码覆盖率工具？

> ID：14779764
> 
> 赞同：3
> 
> 时间：2013-02-08T19:15:49.993
> 
> 标签：winapi, testing, x86, code-coverage

我编写了一个小型代码覆盖实用程序来记录在 x86 可执行文件中命中了哪些基本块。它在没有源代码或目标调试符号的情况下运行，并且只丢失了它监视的基本块。

但是，它正在成为我的应用程序的瓶颈，它涉及单个可执行映像的重复覆盖快照。

当我试图加快速度时，它已经经历了几个阶段。我开始只是在每个基本块的开头放置一个 INT3，作为调试器附加，并记录命中。然后我尝试通过将计数器修补到任何大于 5 字节的块（JMP REL32 的大小）来提高性能。我在进程内存空间中写了一个小存根（'mov [blah], 1 / jmp backToTheBasicBlockWeCameFrom'），并为其打补丁。这大大加快了速度，因为没有例外，也没有调试器中断，但我想加快速度。

我正在考虑以下其中一项：

1) 使用我修补的计数器预先检测目标二进制文件（目前我在运行时执行此操作）。我可以在 PE 中创建一个新部分，将我的计数器放入其中，修补我需要的所有钩子，然后在每次执行后使用我的调试器从同一部分中读取数据。这将使我获得一些速度（根据我的估计大约为 16%），但我仍然需要在较小的块中拥有那些讨厌的 INT3，这确实会削弱性能。

2) 检测二进制文件以包含其自己的 UnhandledExceptionFilter 并结合上述处理其自己的 int3。这意味着在每个 int3 上都没有从调试对象到我的覆盖工具的进程切换，但是仍然会引发断点异常和随后的内核转换——我认为这实际上不会给我带来太多的性能是对的吗？

3）尝试使用英特尔的硬件分支分析指令做一些聪明的事情。这听起来非常棒，但我不清楚我将如何去做——在 Windows 用户模式应用程序中甚至可能吗？如果它相当简单，我可能会写一个内核模式驱动程序，但我不是内核编码器（我涉足一点）并且可能会让我自己很头疼。还有其他项目使用这种方法吗？我看到 Linux 内核有它来监控内核本身，这让我认为监控特定的用户模式应用程序会很困难。

4) 使用现成的应用程序。它需要在没有任何源代码或调试符号的情况下工作，可以编写脚本（所以我可以分批运行），最好是免费的（我很吝啬）。但是，付费工具并没有被排除在外（如果我可以在工具上花费更少并提高性能足以避免购买新硬件，那将是很好的理由）。

5) 别的东西。我在 Windows XP 上的 VMWare 中运行，在相当旧的硬件（Pentium 4-ish）上运行 - 有什么我错过的，或者我应该阅读的任何线索吗？我可以将我的 JMP REL32 减少到小于 5 个字节（并且在不需要 int3 的情况下捕获更小的块）吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:40:23.767

如果您坚持检测二进制文件，那么您最快的覆盖范围几乎是 5 字节跳出跳回技巧。（您正在涵盖二进制检测工具的标准基础。）

INT 3 解决方案将始终包含一个陷阱。是的，你可以在你的空间而不是调试器空间中处理陷阱，这会加快它的速度，但它永远不会与跳出/返回补丁相媲美。无论如何，您可能需要它作为备份，如果您正在检测的函数恰好短于 5 个字节（例如，“inc eax/ret”），因为您没有 5 个字节可以修补。

您可能会做一些优化事情的方法是检查修补的代码。没有这样的检查，带有原始代码：

```
 instrn 1
         instrn 2
         instrn N
  next: 
```

修补，一般看起来像这样：

```
 jmp patch
         xxx 
  next: 
```

通常必须有一个补丁：

```
 patch: pushf
          inc   count
          popf
          instrn1
          instrn2
          instrnN
          jmp   back 
```

如果你想要的只是*覆盖*，你不需要增加，这意味着你不需要保存标志：

```
 patch: mov    byte ptr covered,1
          instrn1
          instrn2
          instrnN
          jmp   back 
```

您应该使用一个*字节*而不是一个字来减小补丁大小。您应该在缓存行上对齐补丁，这样处理器就没有获取 2 个缓存行来执行补丁。

如果你坚持计数，你可以分析 instrn1/2/N 看他们是否关心 "inc" 愚弄的标志，如果需要只 pushf/popf，或者你可以在补丁中插入两个指令之间的增量那不在乎。您必须在某种程度上分析这些以处理诸如 instn 无论如何都会被删除**的**并发症；您可以生成更好的补丁（例如，不要“jmp back”）。

您可能会发现使用**add count,1**比使用**inc count**更快，因为这避免了部分条件代码更新和随之而来的管道互锁。这会稍微影响您的 cc-impact-analysis，因为**inc**不设置进位位，而**add**设置。

另一种可能性是 PC 采样。根本不检测代码；只需定期中断线程并获取样本 PC 值。如果您知道基本块在哪里，则基本块中任何位置的 PC 样本都可以证明整个块已被执行。这不一定会提供精确的覆盖数据（您可能会错过关键的 PC 值），但开销非常低。

如果你愿意修补*源*代码，你可以做得更好：只需插入“covered[i]=true;” 在第 i 个基本块的开始，让编译器负责所有各种优化。不需要补丁。最酷的部分是，如果嵌套循环中有基本块*，*并且像这样插入源探针，编译器会注意到探针分配相对于循环是幂等的，并将探针从循环中取出。Viola，循环内的零探测开销。你还想要什么？

# c# - Setting minOccurs=0 in a WSDL using "Specified" pattern not working

> ID：14779767
> 
> 赞同：2
> 
> 时间：2013-02-08T19:15:55.793
> 
> 标签：c#, web-services, soap, wsdl

OK, obviously I'm doing something wrong here. I'm trying to create a webservice and I want "dateShipped" to be optional which means in the WSDL, I want minOccurs="0"

```
[Serializable]
[XmlType]
public class CTShipment
{
    [XmlElement(Order = 0, IsNullable=false)] public CTDeliveryMethod DeliveryMethod;
    [XmlElement(Order = 1, IsNullable=false)] public CTShipmentAddress ShipmentAddress;
    [XmlIgnore] public bool dateShippedSpecified;
    [XmlElement(Order = 2, IsNullable=false)] public DateTime dateShipped;
} 
```

I want the WSDL to be generated like this:

```
<xs:complexType name="CTShipment">
  <xs:annotation>
     <xs:documentation>All details for the shipment of a suborder.</xs:documentation>
  </xs:annotation>
  <xs:sequence>
     <xs:element name="DeliveryMethod" type="CTDeliveryMethod" nillable="false"/>
     <xs:element name="ShipmentAddress" type="CTShipmentAddress" nillable="false"/>
     <xs:element name="dateShipped" type="xs:dateTime" nillable="false" minOccurs="0"/>
  </xs:sequence>
</xs:complexType> 
```

Instead what I am actually getting is this:

```
<xs:complexType name="CTShipment">
  <xs:sequence>
     <xs:element name="DeliveryMethod" nillable="true" type="tns:CTDeliveryMethod"/>
     <xs:element name="ShipmentAddress" nillable="true" type="tns:CTShipmentAddress"/>
     <xs:element name="dateShipped" type="xs:dateTime"/>
     <xs:element name="dateShippedSpecified" type="xs:boolean"/>
  </xs:sequence>
</xs:complexType> 
```

According to several things I've read (including [http://msdn.microsoft.com/en-us/library/zds0b35c%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/zds0b35c%28v=vs.90%29.aspx)) including the public bool "dateShippedSpecified" should make "dateShipped" optional (minOccurs=0). As you can see, not only is this not happening but "dateShippedSpecified" is showing up in the WSDL even though it is marked with "[XmlIgnore]". You may have noticed that there is another problem as well: even though I'm specifying "IsNullable=false", I still get nillable="true" in the WSDL.

That is no less than 4 problems I can't explain all related to the same thing:

1.  How can I set minOccurs to 0 in my WSDL?

2.  Why isn't the [fieldName]Specified pattern making [fieldName] optional (minOccurs = 0)?

3.  Even if it wasn't following the ___Specified pattern, why would dateShippedSpecified show up in the WSDL if it is marked with XmlIgnore?

4.  Why is everything marked as nillable="true" even though I'm specifying "IsNullable=false"?

    and as a bonus question, if anyone knows...

5.  How do I get the annotation (as shown below) to be included?

    ```
    <xs:annotation>
     <xs:documentation>All details for the shipment of a suborder.</xs:documentation>
    </xs:annotation> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-30T17:24:51.357

这是 .net 实现中的一个错误。

根据 W3C 规范（对于 wsdl） minOccurs="0" 可以在序列中使用。“<序列>”表示按顺序出现0次或多次的元素。

例如查看官方 W3C 对 wsdl 的定义：http: [//www.w3.org/TR/wsdl](http://www.w3.org/TR/wsdl)

您将看到以下元素：

```
<sequence>
         <element ref="wsdl:documentation" minOccurs="0"/>
 </sequence> 
```

现在何时需要与 .Net 兼容，使用 nillable="true" 这会给你 DateTime？（可为空的版本）而不是 DateTime。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T13:37:22.073

这是由于序列元素。它指定每个元素的 minOccurs= 1。并且 WSDL 使用 Sequence-Element 而不是“All”，因为您为它们指定了 Order。这要求每个值都存在。

因此，当您删除订单时，它应该可以正常工作。如果您真的需要订单，那么您将无法忽略该值。

# build - How can I not include a build task when I include a project in my settings.gradle file?

> ID：14779768
> 
> 赞同：2
> 
> 时间：2013-02-08T19:16:01.490
> 
> 标签：build, task, gradle

My `settings.gradle` file looks like:

```
include "serverTest", "shared" 
```

And the serverTest `build.gradle` file looks like:

```
group = 'gradle'
version = '1.0'
defaultTasks 'build'
apply plugin: 'java'
apply plugin: 'eclipse'
sourceCompatibility = JavaVersion.VERSION_1_6

dependencies
{
  compile project(':shared')
} 
```

The directory structure is: The top level holds the settings.gradle file and it has folders shared and serverTest in it. Then in the serverTest directory there is the build.gradle file.

When I run gradle at the top level it outputs:

```
:shared:compileJava UP-TO-DATE
:shared:processResources UP-TO-DATE
:shared:classes UP-TO-DATE
:shared:jar UP-TO-DATE
:serverTest:compileJava UP-TO-DATE
:serverTest:processResources UP-TO-DATE
:serverTest:classes UP-TO-DATE
:serverTest:jar UP-TO-DATE
:serverTest:assemble UP-TO-DATE
:serverTest:compileTestJava
:serverTest:processTestResources UP-TO-DATE
:serverTest:testClasses
:serverTest:test 
```

I don't want it to execute the task `:serverTest:test` though. I tried changing my defaultTasks to just compileJava but that didn't work, does anyone else have any ideas?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-10T10:19:09.640

好吧，这个问题已经以不同的方式提出，问题的主题是；

**如何排除构建任务的子任务？**

1\. **gradle build -x 测试**

从 CLI 执行 gradle build 命令时，上述指令很有帮助；这排除了测试任务，但我们想在 build.gradle 文件中以编程方式排除测试任务。在下面查看相应问题的答案。

2\. **check.dependsOn -= 测试**

将此小脚本复制到您的 build.gradle 文件中。现在，当您从 CLI 执行**gradle build**时，您的测试根本不会运行。

干杯！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T20:28:36.343

You could try to disable the task only if a build task is present... Something like:

```
project(":serverTest").test.onlyIf { !gradle.taskGraph.hasTask(":shared:build") } 
```

# web-applications - Synchronization in a Go-lang webapplication

> ID：14779769
> 
> 赞同：4
> 
> 时间：2013-02-08T19:16:01.750
> 
> 标签：web-applications, concurrency, sqlite, synchronization, go

I'm writing a golang web application. The web application accesses the file system (reading and writing) and an sqlite3 database file.

**Question 1:** How can I synchronize file system access in Go?

```
type DataObject struct {
  data []byte
}

func (*d DataObject) Write() {
   //
   // Synchronization ?
   //
   ioutil.WriteFile("file.name", d.data, 0644)
   //
   // Stop synchronization ?
   //
} 
```

* * *

**Question 2:** Do I need to synchronize sqlite3 database file access?

```
type SqlObject struct {
  sqldata string
}

func (*s SqlObject) Store() error {
  //
  // Open the file, do I need some sort of synchronization?
  //
  con, err := sqlite.Open("database/datafile.db")
  if err != nil {
    return err
  }
  defer con.Close()

  err = con.Exec("INSERT INTO data(sqldata) values(?)", s.sqldata)
  if err != nil {
    return err
  }
  return nil
} 
```

I'm using the gosqlite3 driver ([http://code.google.com/p/gosqlite/](http://code.google.com/p/gosqlite/)).

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T20:12:17.560

对于文件，这取决于您的应用程序。如果您只有一个 goroutine 写入文件，则不需要。如果不止一个，则取决于：

如果你在不同的进程（程序）之间进行协调，你可以使用[flock](http://golang.org/pkg/syscall/#Flock)（它可能不会很有趣）。

如果您在程序中协调多个 goroutine，您可以使用[互斥锁](http://golang.org/pkg/sync/)，或者您可以查看是否可以重新组织程序，以便只有一个例程写入文件，其他例程通过通道发送更新。

对于 SQLite，我相信最简单的方法是保持一个 sqlite 连接打开并从各种 goroutine 中使用它；尽管它确实支持同时打开多个进程，并且如果您的系统执行许多并发读取可能会更快（它使用全局锁进行写入）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T20:08:07.903

**问题 1**

" [sync"](http://golang.org/pkg/sync/)包提供 Lock 和 RWLock 用于以常规方式同步对资源的访问。虽然这没有什么问题，但我喜欢玩成语，所以我可能会做这样的[事情](http://play.golang.org/p/4xAW84Hnem)：

```
package main

import "fmt"

func SyncFile(path string) chan<- func(string) {
    ch := make(chan func(string))
    go func() {
        for process := range ch {
            process(path)
        }
    }()
    return ch
}

func main() {
    data := SyncFile("data.name")
    data <- func(path string) {
        fmt.Println(path)
    }
} 
```

那么如果你只通过这个funcs通道访问文件，访问将是同步的。这是可靠的，但是您也许可以找到更有效的方法。

**问题2**

gosqlite3 驱动程序只是与 libsqlite3 的 Go 绑定，因此适用[SQLite 常见问题解答](http://www.sqlite.org/faq.html#q5)（看起来您对此很清楚）。如果您希望这两者相互同步，那么只需将 SQLite 用法包装在文件访问同步代码中即可。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T07:05:25.910

1）您应该使用读/写互斥锁（在 go std 库中）。代码看起来像：

```
import "sync" // http://golang.org/pkg/sync/
const (
    filename = "file.name"
)
var globalFileLock sync.RWMutex

type DataObject struct {
  data []byte
}

func (*d DataObject) Write() {
   globalFileLock.Lock()
   defer globalFileLock.Unlock()
   ioutil.WriteFile(filename, d.data, 0644)
}

func (*d DataObject) Read() {
   globalFileLock.RLock()
   defer globalFileLock.RUnlock()
   d.data = ioutil.ReadFile(filename)
} 
```

2）由于您尚未从程序中发布“导入”部分，因此我不知道您使用的是哪个 sqlite 驱动程序。

如果您使用 database/sql 打开数据库连接，驱动程序提供 goroutine 之间的并发控制。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-26T19:26:47.390

我知道这是一个老问题，但由于我有同样的“数据库锁定”问题，并且一个事务为我解决了它，我想我会在这里提到它：

```
db, err := sql.Open("sqlite3", db_path)
if err != nil {
    log.Printf("Cannot connect to database: %s\n", err ) 
}
defer db.Close()
tx, _ := db.Begin() 
var value string
err = tx.QueryRow("SELECT X FROM Y").Scan(&value)
tx.Rollback() // or: tx.Commit() 
```

# jquery - Select and Organize DIV Using jQuery

> ID：14779771
> 
> 赞同：0
> 
> 时间：2013-02-08T19:16:02.383
> 
> 标签：jquery, select

I have the below layout for a bunch of inputs on a page and I would like to arrange them based on whether or not a value is present within an input field.

If the "parent" container has a `<tr class="Off">` then the entire thing should be moved into the `<div class="lowerParent">` and if it contains `<tr class="On">` then move it to the `<div class="upperParent">`.

The purpose behind this is that I have a page with potentially 50+ inputs, not all of which are going to be used, and I would like to move those which have values toward the top, so the user doesn't have to scroll down a huge page of input fields that are mostly not used.

```
<div class='upperParent'></div>
<div class='lowerParent'></div>

<div class="parent">
    <div class="collapsed">
        <table>
            <tr>
                <td class="headers">
                    <input type="text" name="ind1" value="0"><input type="text" name="ind2" value="1">
                </td>
            </tr>
            <tr class="On">
                <td class="subHeaders">Sub Header 1</td>
                <td><input type="text" name="datafieldtag_value[33]" value="1"></td>
            </tr>
            <tr class="On">
                <td class="subHeaders">Sub Header 2</td>
                <td><input type="text" name="datafieldtag_value[34]" value="2"></td>
            </tr>
            <tr class="On">
                <td class="subHeaders">Sub Header 3</td>
                <td><input type="text" name="datafieldtag_value[35]" value="3"></td>
            </tr>
        </table>
    </div>
</div>

<div class="parent">
    <div class="collapsed">
        <table>
            <tr>
                <td class="headers">
                    <input type="text" name="ind1" value="0"><input type="text" name="ind2" value="1">
                </td>
            </tr>
            <tr class="Off">
                <td class="subHeaders">Sub Header 1</td>
                <td><input type="text" name="datafieldtag_value[36]" value=""></td>
            </tr>
            <tr class="Off">
                <td class="subHeaders">Sub Header 2</td>
                <td><input type="text" name="datafieldtag_value[37]" value=""></td>
            </tr>
            <tr class="Off">
                <td class="subHeaders">Sub Header 3</td>
                <td><input type="text" name="datafieldtag_value[38]" value=""></td>
            </tr>
        </table>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:21:20.853

```
$('.parent').each(function(){
    if($('tr.Off', this).length > 0){
        $(this).appendTo('.upperParent');
    }else if($('tr.On', this).length > 0){
        $(this).appendTo('.lowerParent');
    }
}); 
```

对于每个div，检查是否存在a `tr.Off`，如果存在则将其放入upperParent，否则将其放入lowerParent。

示例：http: [//jsfiddle.net/6H6kp/1/](http://jsfiddle.net/6H6kp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:25:30.563

假设你有

```
<div class='upperParent'><table></table></div>
<div class='lowerParent'><table></table></div> 
```

你可以做

```
$('.upperParent table').append( $("tr.On").detach() );
$('.lowerParent table').append( $("tr.Off").detach() ); 
```

误读了问题。

# python - How to compare the modified date of two files in python?

> ID：14779775
> 
> 赞同：17
> 
> 时间：2013-02-08T19:16:23.383
> 
> 标签：python

I am creating a python script that will access each line from a Text file(say File.txt) one by one then search for corresponding '.py' and '.txt' file in the system directory. For example if "COPY"(the first line) is accessed from "File.txt" then search will be done for "COPY.py" and "COPY.txt". If both the files are found then their modification date will be compared. Code have no syntax error But I am getting the wrong output.

**My Python code is:**

```
for line in fileinput.input(r'D:\Python_Programs\File.txt'):
    line = line[0:-1]
    sc = ''.join((line,'.py'))
    lo = ''.join((line,'.txt'))
    for root, dirs, files in os.walk(r'D:\txt and py'):
        if sc in files:
            pytime = time.ctime(os.path.getmtime(os.path.join(root, sc)))
            print(sc, '   :', pytime)
            for root, dirs, files in os.walk(root):
                if txt in files:
                    txttime = time.ctime(os.path.getmtime(os.path.join(root, txt)))
                    print(txt, '  :', txttime)
                    if (txttime > pytime):
                        print('PASS', '\n')
                    else:
                        print('FAIL', '\n') 
```

**Output:**

```
COPY.py     : Mon Aug 27 10:50:06 2012
COPY.txt    : Mon Feb 04 11:05:31 2013
PASS        #Expected = PASS

COPY2.py    : Fri Feb 08 16:34:43 2013
COPY2.txt   : Sat Sep 22 14:19:32 2012
PASS        #Expected = FAIL

COPY3.py    : Fri Feb 08 16:34:53 2013
COPY3.txt   : Mon Sep 24 00:50:07 2012
PASS        #Expected = FAIL 
```

I am not getting why "COPY2" and "COPY3" are giving "PASS". May be I am doing it in a wrong way. As well as on changing the comparison as **"if (txttime < pytime)"** in the code. All results are showing as "FAIL" in output.

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-08T19:21:29.613

[`time.ctime()`](http://docs.python.org/2/library/time.html#time.ctime)将时间格式化为字符串，因此您正在比较字符串`"Fri Feb 08 16:34:43 2013"`和`"Sat Sep 22 14:19:32 2012"`文本。只是不要这样做并比较直接给您的`float`s ：`getmtime()`

```
pytime = os.path.getmtime(os.path.join(root, sc))
# ...
txttime = os.path.getmtime(os.path.join(root, txt))
# ...
if (txttime > pytime):
    # ... 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-08T19:19:01.717

`time.ctime`返回一个字符串和`'Fri Feb 08 16:34:53 2013' < 'Mon Sep 24 00:50:07 2012'`

# c++ - Use a const int* const pointer to point to an int

> ID：14779776
> 
> 赞同：1
> 
> 时间：2013-02-08T19:16:30.727
> 
> 标签：c++, pointers, constants

I don't understand something here. In the following code I have defined an integer and a constant integer.

I can have a constant pointer (int* const) point to an integer. See the fourth line of code.

The same constant pointer (int* const) can not point to a constant integer. See the fifth line.

A constant pointer to a const (const int* const) can point to a constant integer. That's what I would expect.

However, the same (const int* const) pointer is allowed to point to a non constant integer. See the last line. Why or how is this possible?

```
int const constVar = 42;
int variable = 11;

int* const constPointer1 = &variable;
int* const constPointer2 = &constVar; // not allowed
const int* const constPointer3 = &constVar; // perfectly ok
const int* const constPointer4 = &variable; // also ok, but why? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:22:27.637

```
int const constVar = 42;  // this defines a top-level constant
int variable = 11; 
```

`int *const constPointer1 = &variable;`

`int *const constPointer2 = &constVar; // not allowed because you can change constant using it`

`const int *const constPointer3 = &constVar; // perfectly ok. here you can't change constVar by any mean. it is a low level constant.`

`const int *const constPointer4 = &variable; // also ok, because it says you can't change the value using this pointer . but you can change value like variable=15 .`

`*constPointer4=5; //you get error assignment of readonly location.because that pointer is constant and pointing to read only memory location.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:19:04.980

const 的访问权限比非 const 少，这就是允许它的原因。您将无法通过指针更改“变量”，但这并不违反任何规则。

```
variable = 4; //ok
*constPointer4 = 4; //not ok because its const 
```

在调用函数时，您经常使用这种“指向非 const 变量的 const 指针”情况。

```
void f(const int * const i)
{
    i=4; //not ok
}

f(&variable); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T19:19:24.807

您始终可以决定不修改非常量变量。

```
const int* const constPointer4 = &variable; 
```

只需解析定义：`constPointer4` 是一个指向 const int （即）的 const （即您不能再更改它所指向的内容）的指针`variable`。这意味着您不能通过 修改`variable` **，** `constPointer4`即使您可以`variable`通过其他方式进行修改。

反过来（通过非常量指针访问 const 变量），您需要一个`const_cast`.

**为什么指向 const 的指针有用？**它允许您`const`在类中拥有成员函数，您可以向用户保证该成员函数不会修改对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T19:27:24.230

指向 const 对象的指针不能用于修改该对象。别人能不能修改没关系；它只是不能通过那个指针来完成。

```
int i;               // modifiable
const int *cip = &i; // promises not to modify i
int *ip = &i;        // can be used to modify i

*cip = 3; // Error
*ip = 3;  // OK 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T19:32:24.483

第 4 行

```
int* const constPointer2 = &constVar; 
```

此处不应允许，因为“int* const constPointer2”的 int* const 部分意味着指针是恒定的，然后当您继续将其分配给 &constVar

# r - ggplot polynomial fit with date as explanatory variable

> ID：14779777
> 
> 赞同：2
> 
> 时间：2013-02-08T19:16:35.263
> 
> 标签：r, ggplot2

I have data such that a subject is given a score on different days (in the POSIXct format).

```
head(test)
        Date Subject  score
1 2012-08-10   Black6     0
2 2012-08-11   Black6     0
3 2012-08-12   Black6     0
4 2012-08-13   Black6     0
5 2012-08-14   Black6     0
6 2012-08-15   Black6     0 
```

It is simple to fit a loess curve.

```
ggplot(test,aes(Date,score))+geom_smooth()+geom_point() 
```

![enter image description here](../Images/002d6515b0c7b954af38d50c21414994.png) What I'd like to do is fit a 3rd order polynomial line. If I type in the following I get an error:

```
ggplot(test,aes(Date,score))+stat_smooth(method = "lm", formula = score ~ poly(Date, 3), size = 1)+geom_point()
Error in eval(expr, envir, enclos) : object 'score' not found 
```

I get the same error if I designate Date as numeric within stat_smooth(). Is there any way to do this in ggplot?

Here's the data:

```
test<-structure(list(Date = structure(c(1344556800, 1344643200, 1344729600, 
1344816000, 1344902400, 1344988800, 1345075200, 1345161600, 1345248000, 
1345334400, 1345420800, 1345507200, 1345593600, 1345680000, 1345766400, 
1345852800, 1345939200, 1346025600, 1346112000, 1346198400, 1346284800, 
1346371200, 1346457600, 1346544000, 1346630400, 1346716800, 1346803200, 
1346889600, 1346976000, 1347062400, 1347148800, 1347235200, 1347321600, 
1347408000, 1347494400, 1347580800, 1347667200, 1347753600, 1347840000, 
1347926400, 1348012800, 1348099200, 1348185600, 1348272000, 1348358400, 
1348444800, 1348531200, 1348617600, 1348704000, 1348790400, 1348876800, 
1348963200, 1349049600, 1349136000, 1349222400, 1349308800, 1349395200
), class = c("POSIXct", "POSIXt"), tzone = "UTC"), Subject = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "Black6", class = "factor"), 
score = c(0, 0, 0, 0, 0, 0, 0, 0.25, 0.25, 0.25, 0.25, 0.25, 
0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 1, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 1.5, 1.5, 1.25, 1.25, 1.25, 1, 
1, 1, 1, 1, 1, 1, 1, 1.5, 1.5, 1.25, 1, 1, 1, 0.5, 0.5, 0.5, 
0.25, 0.25)), .Names = c("Date", "Subject", "score"), row.names = c(NA, 
57L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T19:33:00.547

公式参数 in`stat_smooth`必须根据美学`y`和指定`x`，而不是映射到这些美学的原始变量。

```
ggplot(test,aes(Date,score)) + 
  stat_smooth(method = "lm", formula = y ~ poly(x, 3), size = 1) + 
  geom_point() 
```

![在此处输入图像描述](../Images/2d2b3e370c6b01b6efa5ae9790df8e2c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T00:05:26.783

甚至问题是关于`ggplot2`，我给他使用`lattice`和`latticeExtra`包装的类似解决方案。

```
 library(lattice)
    library(latticeExtra)
    xyplot(score ~ Date, test,par.settings = ggplot2like()) +
          layer(panel.smoother(y ~ poly(x, 3), method = "lm"), style = 2) 
```

![在此处输入图像描述](../Images/624e4b23f97a064a6fdfad07e26d228f.png)

# heroku - Heroku 应用程序可以访问远程数据库吗？

> ID：14779779
> 
> 赞同：0
> 
> 时间：2013-02-08T19:16:40.487
> 
> 标签：heroku

我想在 Heroku 中托管一个应用程序，但不想使用 Heroku 数据库。我可以从我的 Heroku 应用程序连接到现有的远程数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:38:38.193

只要可以从 Heroku 的平台访问，您就可以使用 Heroku 中您喜欢的任何数据库。

只需在您的应用程序中使用您的数据库地址和凭据设置并使用正确的环境变量，它就应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:20:10.187

您当前的数据库托管在哪里？简而言之，答案很可能是肯定的。Heroku 使通过插件连接到 Amazon RDS 实例变得非常容易。这与许多其他数据库主机提供连接的方式相同，例如 ClearDB 或 MongoLab。如果您共享当前远程数据库的位置，则可以更轻松地为您提供更多信息。

# ruby-on-rails - Rails 使用 belongs_to 关联选择标签

> ID：14779781
> 
> 赞同：1
> 
> 时间：2013-02-08T19:17:04.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有以下型号：

产品：

```
class Product < ActiveRecord::Base
  belongs_to :user
...
end 
```

用户

```
class User < ActiveRecord::Base
  has_many :products
end 
```

在我的产品视图中，我需要一个用户下拉列表，当用户被选中时，它应该与该特定产品相关联。

这是我的看法：

```
<%= form_tag (update_user_products_path) do %>
<%@products.each do |product| %>
            <div class = "prod">
            <a href='<%= recommendations_path(:product_id => product.id, :rating_set_id => params[:rating_set_id]) %>' target="_blank"><img src='<%= product.cover_img %>' class='product_image_prods'></img></a>
            <div class= "title"><small><b><%= link_to truncate(product.title, :length =>30),  recommendations_path(:product_id => product.id, :rating_set_id => params[:rating_set_id]), :target => '_blank' %></b></small></div>
            <br/>
            <div><em>Current Rating: <%= product.rating %> </em></div>
            <%= hidden_field_tag :product_id, product.id %>
            <%= select_tag "user_id", options_for_select(User.all.collect {|u| [ u.name, u.id ] })%>
            </div>

            <% end %>
    <%= submit_tag %>
<% end %> 
```

我很困惑我是否应该使用 form_tag 并更新 Product.user_id，还是应该对我的产品中的用户模型使用nested_attributes？

**更新：**

产品控制器动作：

```
def update_user
    @product = Product.find(params["product_id"])
    @product.update_attribute(:user_id, params[:user_id])
    redirect_to :back, :flash => { :notice => "Updated users" }
  end 
```

也更新了我的看法。如何使用正确的 user_id 更新所有产品记录。目前，当我提交我的发件人时，它只更新 1 条产品记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:30:29.927

您所要做的就是确定哪个用户与哪个产品相关联。

例如（用 钩住标签`product.id`）

```
<%= form_tag(update_user_path, :id => "update_user_form") do %>
   <%@products.each do |product| %>
      <%= select_tag "user_id:#{product.id}", options_for_select(User.all.collect {|u| [ u.name, u.id ] })%>
   <% end %>
<% end %> 
```

当您提交时，您将获得带有产品 ID 和所选用户 ID 的密钥。

例如让我们说`product.id = 1`和`user.id = 2`

`params`会包括

```
key => user_id:1 value=> 2 
```

因此，获取密钥并将其拆分`:`将为您提供`product_id`然后获取该哈希条目的值将为您`user.id`提供该产品的选择。

# javascript - 主干模板不会留在 html 中

> ID：14779783
> 
> 赞同：0
> 
> 时间：2013-02-08T19:17:13.170
> 
> 标签：javascript, html, templates, backbone.js

所以我在我的 html 中插入了一个主干模板：

```
<div class = "outside of template">
<script id="personTemplate" type="text/template">
    <div class="view1">
      <input class="toggle" type="checkbox">   
      <input class="view" style="border:none;" value="<%= name %> <%= age %> - <%= occupation %>">
      <a class = "destroy"  />
    </div>  
    </script>
</div> 
```

但是当我运行我的脚本/打开我的页面时，模板的输出总是出现在我的下面

```
<div class = "outside of template"></div> 
```

那么如何使模板内容保留在我的 html div 或 table 或任何元素中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:39:56.143

您`Template`似乎在`div`元素之间。那是你的问题。

它一定要是：

```
<div class = "outside of template"></div>
<script id="personTemplate" type="text/template">
    <div class="view1">
      <input class="toggle" type="checkbox">   
      <input class="view" style="border:none;" value="<%= name %> <%= age %> - <%= occupation %>">
      <a class = "destroy"  />
    </div>  
</script> 
```

# iphone - 向核心数据实体添加属性

> ID：14779793
> 
> 赞同：0
> 
> 时间：2013-02-08T19:17:59.473
> 
> 标签：iphone, ios, xcode, core-data, core-data-migration

这已经讨论了很多，但我发现没有任何帮助我......我只想向单个实体添加一个属性。当然不会丢失我的数据。

[为此，我按照以下步骤操作](http://joshjustice.wordpress.com/2011/07/31/adding-an-attribute-to-a-core-data-entity-in-xcode-4/)

但我认为它根本不起作用。只要不尝试使用新属性就没有错误。但是在我的核心数据模型中（当我在 XCode 中打开 .xcdatamodel 时）它就在那里，甚至在我的实体的 NSManagedObject 子类中，新属性也作为属性存在。但是当我尝试使用它时，会发生这种情况：

`unrecognized selector sent to instance 0x74f8520`

或者

`the entity Name is not key value coding-compliant for the key "isFavoriteName".'`

键“isFavoriteName”是我刚刚添加的那个。就像我说的，我做了所有的步骤。我错过了什么吗？我认为，新的模型版本没有被使用，因为当我删除模型中的一些属性时，我的应用程序仍然可以工作并且仍然显示删除的信息......我已经将当前的核心数据模型版本设置为新的（步骤 6）。

我希望你能帮帮我！

缺口

编辑：我是否也可能需要更改代码中的某些内容？除了在创建persistentStoreCoordinator 时设置选项......因为我有，比如说myApp.xdatamodel，在其中，我知道有myApp.xdatamodel 和myApp 2,xdatamodel......但我的代码我仍然会做：

```
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"myApp" withExtension:@"mom"];

_managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:28:36.487

没错-您链接到的页面遗漏了适用于您的情况的一个步骤。即使您创建了模型的新版本，您的代码仍会按名称加载旧版本。

**不要**只是将其更改为加载版本 2。改为这样做：

```
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"myApp" withExtension:@"momd"]; 
```

这将在`momd`文件夹中查找并获取当前版本。在这种情况下，它将获得版本 2。如果您将来再次更改模型，它将获得当时的任何版本。

# c++ - 为什么这段代码可以工作

> ID：14779795
> 
> 赞同：0
> 
> 时间：2013-02-08T19:18:00.303
> 
> 标签：c++

我刚刚发现这段代码确实有效。我想知道为什么。row 和 col 都是变量。我试图动态分配一个二维向量。有人可以解释一下吗？谢谢！

row 和 col 都是“int”

```
grid_ = new vector<vector<bool> > (row, col); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:28:42.170

有几个[两个参数的构造](http://en.cppreference.com/w/cpp/container/vector/vector)`std::vector`函数。您尚未提供 and 的类型`row`，`col`但我怀疑您的代码不会达到您的预期。如果要在二维中初始化向量，则需要构造函数，该构造函数采用大小和值来初始化每个元素。在这种情况下，该值本身就是一个向量。

```
int row = 5;
std::vector<bool> col(5, false);
grid_ = std::vector<std::vector<bool>>(row, col); 
```

这将初始化一个 5x5 的布尔值网格，全部设置为`false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:32:52.080

给定原始代码

```
grid_ = new vector<vector<bool> > (row, col); 
```

其中“`row`和`col`”都是“int”，这是它的问题所在：

*   使用的`vector`构造函数创建一个`row`元素向量，初始化为该`col`值。这是有意的可能性几乎为零。

*   向量是动态分配的，这几乎不需要：`vector`是一个可调整大小的容器。

*   它使用`vector<bool>`，由于其不切实际的专业化（每个`bool`都可以存储为单个位，这意味着您无法获得对它的引用），通常会避免使用它。

相反，布尔值矩阵的一个很好的解决方案是使用单个向量，其中包含例如枚举类型的元素，并计算索引。

* * *

更新：检查一下，代码甚至没有编译，即**Q 中给出的信息不正确**。

```
#include <vector>
using namespace std;

int main()
{
    int row = 0;
    int col = 0;
    auto x = new vector<vector<bool> > (row, col);
} 
```

```
[D:\开发\测试]
> *g++ foo.cpp*
在 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.2/../../../../include/c++/4.7.2/ 中包含的文件中矢量：65：0，
                 从 foo.cpp:1:
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector。 h：在 'void std::vector::_M_initialize_dispatch(_Integer, _Integer, std::__true_type) 的实例化中 [with _Integer = int; _Tp = std::vector; _Alloc = std::allocat
或 >]':
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector。 h:393:4: 来自 'std::vector::vector(_InputIterator, _InputIterator, const allocator_type&) [with _InputIterator = int; _Tp = std::vector; _Alloc = std::all
ocator >; std::vector::allocator_type = std::allocator >]'
foo.cpp:8:49: 从这里需要
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector。 h:1137:4：错误：ca 没有匹配功能
ll 到 'std::vector >::_M_fill_initialize(std::vector >::size_type, int&)'
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector。 h:1137:4: 注意：候选人是：
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector。 h:1179:7: 注意: void std::vector::_M_fill_initialize(std::vector::size_type, const value_type&) [with _Tp = std::vector; _Alloc = std::allocator >; std::vector::size_type = unsigned int; std::vector::value_type = std::vector]
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector。 h:1179:7：注意：没有已知的 ar 转换
从'int'到'const value_type& {aka const std::vector&}'的gument 2

[D:\开发\测试]
> _

```

# python - Python 请求获取网页失败

> ID：14779798
> 
> 赞同：2
> 
> 时间：2013-02-08T19:18:13.543
> 
> 标签：python, python-3.x, python-requests

我正在使用 Python3 和包[请求](http://docs.python-requests.org/en/latest/)来获取 HTML 数据。

我试过运行这条线

`r = requests.get('https://github.com/timeline.json')`

，这是他们教程中的示例，但无济于事。但是，当我跑步时

`request = requests.get('http://www.math.ksu.edu/events/grad_conf_2013/')`

它工作正常。我收到错误，例如

```
AttributeError: 'MockRequest' object has no attribute 'unverifiable' 
Error in sys.excepthook: 
```

我认为这些错误与我尝试获取的网页类型有关，因为正在运行的 html 页面只是我编写的基本 html。

一般来说，我对请求和 Python 很陌生。我也是stackoverflow的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T06:56:51.547

作为一个小例子，这是我开发的一个小工具，用于从网站获取数据，在本例中为 IP 并显示它：

```
# Import the requests module
# TODO: Make sure to install it first
import requests

# Get the raw information from the website
r = requests.get('http://whatismyipaddress.com')
raw_page_source_list = r.text
text = ''

# Join the whole list into a single string in order
# to simplify things
text = text.join(raw_page_source_list)

# Get the exact starting position of the IP address string
ip_text_pos = text.find('IP Information') + 62

# Now extract the IP address and store it
ip_address = text[ip_text_pos : ip_text_pos + 12]

# print 'Your IP address is: %s' % ip_address
#           or, for Python 3 ...            #
# print('Your IP address is: %s' % ip_address) 
```

# jquery - 动画结尾闪烁

> ID：14779799
> 
> 赞同：0
> 
> 时间：2013-02-08T19:18:15.040
> 
> 标签：jquery, css, animation, width

编辑：通过删除 CSS 过渡来修复动画。

我实际上有两个问题。第一个是在宽度动画结束时 UL 闪烁。我不确定为什么而且似乎无法修复。

第二个是我试图让 UL 与 . 有没有办法改变动画功能，所以它添加`display:inline-block`而不是`display:block`？

```
// toggle filters
$(".filter .toggle").on('click', function(){
    $('.filter').find('.toggle').toggleClass('test').end()
                .find('ul').animate({width:'toggle'}, 1000);
});

.filter {
    padding-left:25px;
    padding-bottom:10px;
    width:500px;
}

.filter * {
    -webkit-transition: all 0.2s linear; -moz-transition: all 0.2s linear; -o-transition: all 0.2s linear; transition: all 0.2s linear;
}

.filter .toggle.test {
    padding:7px;
    color:#eee;
    background-image: linear-gradient(bottom, #272527 31%, #2f2c2e 66%, #373435 83%);
    background-image: -o-linear-gradient(bottom, #272527 31%, #2f2c2e 66%, #373435 83%);
    background-image: -moz-linear-gradient(bottom, #272527 31%, #2f2c2e 66%, #373435 83%);
    background-image: -webkit-linear-gradient(bottom, #272527 31%, #2f2c2e 66%, #373435 83%);
    background-image: -ms-linear-gradient(bottom, #272527 31%, #2f2c2e 66%, #373435 83%);
    font-size:15px;
    border-radius:5px 0 0 5px;
}

.filter .toggle {
    font-size:11px;
    border-radius:5px;
    display:inline-block;
    vertical-align:top;
    cursor:pointer;
    background:rgba(255,255,255,0.8);
    padding:4px;
    line-height:14px;
}
    .filter .toggle:before {
        font-family:icon;
        content:'\f0c9';
        padding-right:5px;
        color:#888;
    }

.filter ul {
    display:none;
    height:18px;
    vertical-align:top;
    overflow:hidden;
    background:white;
}

.filter li {
    display:inline-block;
    padding-right:10px;
    font-size:16px;
}

<div class="filter">
   <span class="toggle">Filters</span>
   <ul>
     <li class="active">All</li>
     <li>One</li>
     <li>Two</li>
     <li>Three</li>
     <li>Four</li>
  </ul>
</div> 
```

这是[一个小提琴](http://jsfiddle.net/6rCTX/)- 点击“过滤器”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:25:17.323

动画和 CSS 过渡之间存在冲突。如果您删除 CSS 转换规则，它似乎可以在没有闪烁的情况下工作（特别是`width`规则上的转换）。

如果您出于其他原因仍需要转换，请更具体地说明哪些原因。我无法根据 CSS 判断，但类似：

```
transition: border-radius .2s linear, padding .2s linear; 
```

顺便说一句，此时您可能只需要`-webkit`和非供应商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:27:18.240

去掉 CSS 中的这一行，一切都会正常

```
.filter * {
-webkit-transition: all 0.2s linear 0;
    -moz-transition: all 0.2s linear;
    -o-transition: all 0.2s linear;
    transition: all 0.2s linear;
} 
```

顺便说一句，这是一个特定于浏览器的问题。它影响 Chromium（可能是 Webkit），但不影响 Firefox 或 Opera。无法在 IE 和 Safari 中测试。删除上面的动画只会解决问题。

# wordpress - Wordpress 原生图库 - 自己的输出 - 排序难度

> ID：14779800
> 
> 赞同：1
> 
> 时间：2013-02-08T19:18:18.180
> 
> 标签：wordpress, gallery, wordpress-theming, shortcode

如您所见，我无法按照我想要的顺序对画廊进行排序。我正在尝试像在拖放界面中一样对其进行排序，您可以在其中编辑画廊。这与短代码中的 id 属性中的顺序相同。我只是不知道要为 $orderby 分配什么值。我尝试了“ID”、“menu_order”和“post__in”，但没有任何变化。你有什么建议吗。

```
add_filter('post_gallery', 'fgf_gallery', 10, 2);

function fgf_gallery($output, $attr) {
    global $post;

    static $instance = 0;
    $instance++;

    $id = $post->ID;
    $order = 'ASC';
    $orderby = 'ID'; 

    $attachments = get_children( array('post_parent' => $id, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => $order, 'orderby' => $orderby) );

    if ( empty($attachments) ) return;  

    $output = "<ul id='gallery-{$instance}' class='gallery'>";
    foreach ( $attachments as $id => $attachment ) {
        $output .= "<li class='gallery-item'>";
        $output .= "<img src='".$thumb_src."'>";

        $output .= "<h1>".$attachment->post_title."</h1>";

        if ( trim($attachment->post_excerpt) ) {
            $output .= "
            <p class='wp-caption-text gallery-caption'>
            " . wptexturize($attachment->post_excerpt) . "
            <p>";
        }
        $output .= "</li>";
    }
    $output .= "</ul>\n";
    return $output;
} 
```

谢谢。我也很感激任何对进一步文档的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T23:46:12.807

我在 wp-includes/media.php 文件中找到了我需要的内容

您使用“post__in”从您的简码中获得订单。

```
function fgf_gallery_2($output, $attr) {

    static $instance = 0;
    $instance++;

    $order = 'ASC';

    $orderby = 'post__in';
    $include = $attr['ids'];

    $_attachments = get_posts( array('include' => $include, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => $order, 'orderby' => $orderby) );
    $attachments = array();
    foreach ( $_attachments as $key => $val ) {
        $attachments[$val->ID] = $_attachments[$key];
    }

    if ( empty($attachments) ) return;  

    $output = "<ul id='gallery-{$instance}' class='gallery'>";
    foreach ( $attachments as $id => $attachment ) {
        /* do what you want here */
    }
    $output .= "</ul>\n";
    return $output;
} 
```

为我工作。

# python - 如何将多个选项卡放入单独的进程中

> ID：14779803
> 
> 赞同：1
> 
> 时间：2013-02-08T19:18:31.333
> 
> 标签：python, user-interface, matplotlib, pyqt, pickle

我一直在研究一个问题（我是一名化学工程师，所以我需要永远理解如何编写代码）如何让多个选项卡在自己的流程中运行，但每个选项卡都有自己的数据显示在`matplotlib`情节中。我遇到了很多酸洗错误，我想知道是否有人有任何简单的解决方案。我相信酸洗错误的主要原因是由于我试图作为属性传递给选项卡对象的对象。该对象包含一些数据以及许多其他有助于拟合它所持有的数据的对象。我觉得这些对象非常好而且相当必要，但我也意识到它们导致了酸洗问题。这是我的代码的一个非常简化的版本：（如果你想复制/粘贴来测试它，它仍然可以编译。）

```
import multiprocessing as mp
from PyQt4 import QtGui, QtCore
import numpy as np
import matplotlib
matplotlib.use('QtAgg')
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from matplotlib import figure
import sys
import lmfit

# This object will just hold certain objects which will help create data objects ato be shown in matplotlib plots
# this could be a type of species with properties that could be quantized to a location on an axis (like number of teeth)
#, which special_object would hold another quantization of that property (like length of teeth) 
class object_within_special_object:
    def __init__(self, n, m):
        self.n = n
        self.m = m
    def location(self, i):
        location = i*self.m/self.n
        return location
    def NM(self):
        return str(self.n) + str(self.m)
# This is what will hold a number of species and all of their properties, 
# as well as some data to try and fit using the species and their properties
class special_object:
    def __init__(self, name, X, Y):
        self.name = name
        self.X = X
        self.Y = Y
        self.params = lmfit.Parameters()
        self.things = self.make_a_whole_bunch_of_things()
        for thing in self.things:
            self.params.add('something' + str(thing.NM()) + 's', value = 3)
    def make_a_whole_bunch_of_things(self):
        things = []
        for n in range(0,20):
            m=1
            things.append(object_within_special_object(n,m))
        return things
# a special type of tab which holds a (or a couple of) matplotlib plots and a special_object ( which holds the data to display in those plots)
class Special_Tab(QtGui.QTabWidget):
    def __init__(self, parent, special_object):
        QtGui.QTabWidget.__init__(self, parent)
        self.special_object = special_object
        self.grid = QtGui.QGridLayout(self)
        # matplotlib figure put into tab
        self.fig = figure.Figure()
        self.plot = self.fig.add_subplot(111)
        self.line, = self.plot.plot(self.special_object.X, self.special_object.Y, 'r-')
        self.canvas = FigureCanvas(self.fig)
        self.grid.addWidget(self.canvas)
        self.canvas.show()
        self.canvas.draw()
        self.canvas_BBox = self.plot.figure.canvas.copy_from_bbox(self.plot.bbox)
        ax1 = self.plot.figure.axes[0]
    def process_on_special_object(self):
        # do a long fitting process involving the properties of the special_object
        return
    def update_GUI(self):
        # change the GUI to reflect changes made to special_object
        self.line.set_data(special_object.X, special_object.Y)
        self.plot.draw_artist(self.line)
        self.plot.figure.canvas.blit(self.plot.bbox)
        return
# This window just has a button to make all of the tabs in separate processes
class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent = None):
        # This GUI stuff shouldn't be too important
        QtGui.QMainWindow.__init__(self)
        self.resize(int(app.desktop().screenGeometry().width()*.6), int(app.desktop().screenGeometry().height()*.6))
        self.tabs_list = []
        central_widget = QtGui.QWidget(self)
        self.main_tab_widget = QtGui.QTabWidget()
        self.layout = QtGui.QHBoxLayout(central_widget)
        button = QtGui.QPushButton('Open Tabs')
        self.layout.addWidget(button)
        self.layout.addWidget(self.main_tab_widget)
        QtCore.QObject.connect(button, QtCore.SIGNAL("clicked()"), self.open_tabs)
        self.setCentralWidget(central_widget)
        central_widget.setLayout(self.layout)

    # Here we open several tabs and put them in different processes
    def open_tabs(self):
        for i in range(0, 10):
            # this is just some random data for the objects
            X = np.arange(1240.0/1350.0, 1240./200., 0.01)
            Y = np.array(np.e**.2*X + np.sin(10*X)+np.cos(4*X))
            # Here the special tab is created
            new_tab = Special_Tab(self.main_tab_widget, special_object(str(i), X, Y))
            self.main_tab_widget.addTab(new_tab, str(i))
            # this part works fine without the .start() function
            self.tabs_list.append(mp.Process(target=new_tab))
            # this is where pickling errors occur
            self.tabs_list[-1].start()
        return

if __name__ == "__main__":
    app = QtGui.QApplication([])
    win = MainWindow()
    win.show()
    sys.exit(app.exec_()) 
```

我注意到错误来自 matplotlib 轴（我不确定如何？）并给出错误`pickle.PicklingError: Can't pickle <class 'matplotlib.axes.AxesSubplot'>: it's not found as matplotlib.axes.AxesSubplot`。此外，我注意到注释掉 matplotlib 图也会产生酸洗错误`pickle.PicklingError: Can't pickle <function <lambda> at 0x012A2B30>: it's not found as lmfit.parameter.<lambda>`。我认为这是因为 lambda 函数不能被腌制，我猜 lmfit 在它的深处有一个 lambda ......但如果没有解决这些错误的方法，我真的不知道该怎么做。

奇怪的是，我从原始代码（不是此处显示的简化版本）中看到的错误略有不同，但在情感上仍然基本相同。我在其他代码中遇到的错误是`pickle.PicklingError: Can't pickle 'BufferRegion' object: <BufferRegion object at 0x037EBA04>`

有没有人可以通过移动对象来解决我通过它们的位置或任何其他想法来更好地解决这个问题？

我非常感谢您的时间和精力以及对此问题的任何帮助。

**编辑：**我以某种方式尝试了 unutbu 的想法，但对过程功能的位置进行了一些更改。所提出的解决方案的唯一问题是该`do_long_fitting_process()`函数调用另一个函数，该函数迭代地更新`matplotlib`图中的线。所以 do_long_fitting_process() 需要对`Special_Tab`属性进行一些访问才能更改它们并将更新显示到 GUI。
我已经尝试通过将`do_long_fitting_process()`函数推送到一个全局函数并调用它来做到这一点：

[代码] def open_tabs(self): for i in range(0, 10): ... self.tabs_list.append(new_tab)

```
 consumer, producer = mp.Pipe()
        process = mp.Process(target=process_on_special_object, args=(producer,))
        process.start()
        while(True):
            message = consumer.recv()
            if message == 'done':
                break
            tab.update_GUI(message[0], message[1])
        process_list[-1].join() 
```

[/code] 我`update_GUI()`通过 a传递数据的地方`mp.Pipe()`，但是一旦我启动进程，窗口就会转到“无响应”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:51:41.380

问题是并非`Axes`对象的所有部分都可以序列化，这是在进程之间移动数据所必需的。我建议稍微重新组织您的代码以将*计算*推向单独的进程（即任何需要花费不到一秒钟的时间），但将所有绘图保留在主进程上并且只将数据传回来回。

另一个选择是我们`QThread`看[需要保持 QThread 响应的 time.sleep() 吗？](https://stackoverflow.com/questions/14665636/time-sleep-required-to-keep-qthread-responsive/14666811#14666811)对于两种不同的实现方式（一种在问题中，一种在我的答案中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T20:16:57.560

将 GUI 代码与计算代码分开。GUI 必须在单个进程中运行（尽管它可能产生多个线程）。让计算代码包含在`special_object`.

当您想要执行长时间运行的计算时调用`Special_Tab`：`mp.Process`

```
class special_object:
    def do_long_fitting_process(self):
        pass    

class Special_Tab(QtGui.QTabWidget):    
    def process_on_special_object(self):
        # do a long fitting process involving the properties of the
        # special_object
        proc = mp.Process(target = self.special_object.do_long_fitting_process)
        proc.start()

class MainWindow(QtGui.QMainWindow):
    def open_tabs(self):
        for i in range(0, 10):
            ...
            self.tabs_list.append(new_tab)
            new_tab.process_on_special_object() 
```

# ruby-on-rails-3 - Rails heroku 错误为零

> ID：14779804
> 
> 赞同：0
> 
> 时间：2013-02-08T19:18:32.163
> 
> 标签：ruby-on-rails-3

我的应用程序在我正在开发的 iMac 上运行良好。但是，我在 Heroku 上收到以下错误（这是 Heroku 日志）：

```
ActionView::Template::Error (undefined method `name' for nil:NilClass):
    22:         <% end %>
    23:         <td><%= workorder.description %></td>
    24:         <% if workorder.location_id != nil %>
    25:             <td><%= workorder.location.name %></td>
  app/views/home/_myopenorders.html.erb:25:in `block in _app_views_home__myopenorders_html_erb__1134835514768073858_64792180'
  app/views/home/index.html.erb:66:in `_app_views_home_index_html_erb___3327722386939287121_60092520'   
    26:         <% else %>
    27:             <td></td>
  app/views/home/_myopenorders.html.erb:15:in `_app_views_home__myopenorders_html_erb__1134835514768073858_64792180'
    28:         <% end %> 
```

这是代码：

```
 <% if workorder.location_id != nil %>
        <td><%= workorder.location.name %></td>
    <% else %>
        <td></td>
    <% end %> 
```

有任何想法吗？

更新：

有时日志看起来像 Heroku 正在乱序运行 ruby​​ 代码。看这个：

```
 ActionView::Template::Error (undefined method `name' for nil:NilClass):
      22:         <% end %>
      26:         <% else %>
    app/views/home/index.html.erb:66:in `_app_views_home_index_html_erb__2268065945584360823_49285320'

    app/views/home/_myopenorders.html.erb:25:in `block in _app_views_home__myopenorders_html_erb___3485426105947531181_51160960'
      27:             <td></td>

    app/views/home/_myopenorders.html.erb:15:in `_app_views_home__myopenorders_html_erb___3485426105947531181_51160960'
      28:         <% end %>
      24:         <% if workorder.location_id != nil %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:00:10.967

对不起，我的错。一个位置被删除，我没有检查该位置是否被工单使用的代码。

# jquery - JQuery .is(':hover') 在 IE9 中无法正常工作

> ID：14779807
> 
> 赞同：0
> 
> 时间：2013-02-08T19:18:47.863
> 
> 标签：jquery, internet-explorer-9, hover, onmouseout

我在 IE9 中遇到了弹出 div 的问题，代码如下：

```
<li id="info001" class="listInfo" onmouseover="ShowPreview(this);" onmouseout="HidePreview();"> 
```

并且我的 HidePreview 检查以确保鼠标不在 listItem 或预览本身上，如下所示：

```
function HidePreview() {
    if (!($('#thePreview').is(':hover') || $('#info001').is(':hover'))) {
        $('#thePreview').hide();
    }
} 
```

这在 Chrome 和 Firefox 中运行良好，但在 IE9 中，当我移动 listItem 和预览时，预览开始闪烁，然后当我单独移动预览时，它会被隐藏。

有没有办法避免这种情况？

编辑：为清楚起见，thePreview div 与 info001 li 重叠，足以轻松地在它们之间移动鼠标。

编辑：http: [//jsfiddle.net/ControlFreak/QQsGS/](http://jsfiddle.net/ControlFreak/QQsGS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:34:40.390

尝试做这样的事情：

```
var $thePreview = $("#thePreview");

$(".listInfo").hover(
    function () {
        $thePreview.show();
    },
    function () {
        $thePreview.hide();
    }
); 
```

[jsFiddle 上的工作示例](http://jsfiddle.net/htmled/fg6H8/)。

您仍然可以使用该代码，只需将伪事件从 hover 更改为 mouseenter mouseleave（如果您运行的是 1.9+）。有关更多信息，请参见：jquery.com/upgrade-guide/1.9/#hover-pseudo-event

# navigation - 如何在sencha touch 2中确定导航视图后退事件的旧视图/新视图

> ID：14779809
> 
> 赞同：0
> 
> 时间：2013-02-08T19:18:53.543
> 
> 标签：navigation, sencha-touch-2, back

当在 ST2 导航视图中触发后退事件时，您如何确定要导航到哪个视图以及我们要导航到哪个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:04:44.520

所以我找到了另一种解决方法。我需要知道用于导航的旧视图和新视图，以便我可以更改应用于数据存储的一些过滤器。这就是我所做的，在返回的视图上，我添加了以下代码：

```
listeners: {
    deactivate: function() {
        ... do some stuff ...
    }
} 
```

虽然不是原始问题的解决方案，但这对我来说效果很好。

# java - 驱动类（主类）是关联、聚合还是组合？

> ID：14779819
> 
> 赞同：4
> 
> 时间：2013-02-08T19:19:17.470
> 
> 标签：java, oop, class, object, uml

我一直想知道主类（控制非 GUI 程序中的所有其他类）与其他类有什么样的关系？

例如，在包含 main 方法的类中实例化的类以及与 main 方法交互的类，例如获取返回值。

编辑：它甚至应该包含在 UML 中吗？因为我的教授包括了它（我什至不知道它被称为司机课）而且我正在阅读的书显然不包括它，不，这不是家庭作业。

它可能是一个关联，因为它与它交互。它也可以是一个聚合，因为它由几个类组成。一个类没有它就没有意义（在程序实现中），所以我认为它的组合是因为组合是一种聚合，而聚合又是一种关联。尽管已经发布了几个回复，但听起来我的回答是错误的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:21:54.533

都不是。主要方法是静态的。所以它不属于任何对象。所以你没有任何关联。main 方法*使用*其他类的实例，仅此而已。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T19:25:55.790

主类根本不必实例化，因此它不一定属于 UML 图中的任何位置，但它**可以**被实例化并涉及与程序其余部分的任何类型的关系。这本书和你的老师可能都适合他们各自的情况。

顺便说一句，不要将类之间的关联与`static`方法`main`引用的内容混淆。该`main`方法本身肯定在 UML 范式**之外。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T19:21:00.900

它只是一个 kickstarter 类，您可以对其进行修改以采用其中任何一种，但最好将其保留为初学者并从中构建类范式

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T19:26:46.910

关于将它包含在 UML 中 - 为什么不应该包含它。研究不同的设计模式——你将了解它们的关系和用法

这个[讨论](https://stackoverflow.com/questions/7643166/uml-how-do-i-do-this)可能会帮助你

# ruby-on-rails - 如何从今天开始捕获日期为 5 天的所有对象？

> ID：14779820
> 
> 赞同：1
> 
> 时间：2013-02-08T19:19:19.460
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, datetime

我正在尝试使用此范围执行此操作：

```
>> Job.last.application_date
  Job Load (0.4ms)  SELECT "jobs".* FROM "jobs" ORDER BY created_at ASC LIMIT 1
=> Wed, 13 Feb 2013
>> Date.today + 5.days
=> Wed, 13 Feb 2013
>> Job.where(application_date: Date.today + 5.days)
  Job Load (0.2ms)  SELECT "jobs".* FROM "jobs" WHERE "jobs"."application_date" = '2013-02-13' ORDER BY created_at DESC
=> [] 
```

*更新*

嗯，这不起作用，可能是因为某些数据格式。

```
>> Job.where("application_date = ?", Date.today + 5)
Job Load (0.3ms) SELECT "jobs".* FROM "jobs" WHERE (application_date = '2013-02-13') ORDER BY created_at DESC => [] 
>> Job.last.application_date Job Load (0.7ms)
 SELECT "jobs".* FROM "jobs" ORDER BY created_at ASC LIMIT 1 => Wed, 13 Feb 2013

# Schema jobs
#  application_date       :date 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:27:06.840

您可以使用：

```
where("application_date = ?", Date.today + 5) 
```

# django - 运行 manage.py runserver Django 时出现缩进错误

> ID：14779824
> 
> 赞同：0
> 
> 时间：2013-02-08T19:19:37.733
> 
> 标签：django, indentation

当我`python manage.py runserver`在 PowerShell 上运行时，出现以下错误：

```
File "C:\Python27\lib\site-packages\django\utils\importlib.py", line
__import__(name)
IndentationError: unexpected indent 
```

但是，我之前从未接触过该文件，当我在 Notepad++ 中打开该文件时，它会显示：

```
if name.startswith('.'):
    if not package:
        raise TypeError("relative imports require the 'package' argument")
    level = 0
    for character in name:
        if character != '.':
            break
        level += 1
    name = _resolve_name(name[level:], package, level)
    __import__(name)  #LINE 35
return sys.modules[name]` 
```

似乎有什么问题？我正在使用 Python 2.7 和 Django 1.4.2 在 Windows Vista x32 上工作，感谢您的帮助。

这是下的数据库信息`settings.py`：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'demo',                      # Or path to database file if using sqlite3.
        'USER': '****',                      # Not used with sqlite3.
        'PASSWORD': '*****',                  # Not used with sqlite3.
        'HOST': '127.0.0.1',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '3306',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

我也在`'django.contrib.admin'`同一个文件中取消了注释。我`url(r'^admin/', include(admin.site.urls)),` 在“urls.py”中取消注释以启用管理员。这是`urls.py`我从中得到的`python manage.py startproject`

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
# Examples:
# url(r'^$', 'demo.views.home', name='home'),
# url(r'^demo/', include('demo.foo.urls')),

# Uncomment the admin/doc line below to enable admin documentation:
# url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
url(r'^admin/', include(admin.site.urls)), 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T06:52:01.697

Using tab in Django is a bad practice. In order to fixed your problem you must use spaces only, I think 4 spaces. Try to backspace your codes and you'll see that it's tab indention, use only spaces.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T11:13:01.250

我今天遇到了同样的错误。就像 Dombey`python -m tabnanny -v *`报告了`Clean bill of health`我所有的文件一样。

我正在使用 git，所以我尝试运行 master 分支（以前运行良好），但我得到了相同的结果。

我不知道是什么触发了错误，但卸载重新安装 Django 为我解决了它。

# javascript - 更新滑块中的计数器

> ID：14779825
> 
> 赞同：0
> 
> 时间：2013-02-08T19:19:37.813
> 
> 标签：javascript, jquery, slider, counter, carousel

我有一个自己制作的滑块，它是一个无限循环的旋转木马。我想创建一个计数器（4 个中的 1 个，4 个中的 2 个）等，最后一个数字是当前幻灯片的总数和 1/2/3/4 显示您正在查看的幻灯片。

到目前为止，我的柜台是这样的：

```
var $tota = $('.past-project-container').find('span.total');
var $curr = $('.past-project-container').find('span.current');

function changeCurr(){
    $tota.text(numberOfProjects);
    $curr.text(1);
}
    changeCurr(); 
```

HTML：

```
<span class="slide-count-container">
   <span class="current">1</span> of <span class="total">1</span>
</span> 
```

如果有帮助，这是我的轮播 JS

```
var $carousel = $('.past-project-slider'), carW = $carousel.outerWidth(), intv;
$carousel.wrapInner('<div id="slider" />');
var $slider = $('#slider');
numberOfProjects = $('.past-project-each').length;
$slider.css({position:'absolute',left:0, width:carW*numberOfProjects}).find('.past-project-each').css({'float':'left'});

function move(cb){
  if(!$slider.is(':animated')){
    if(cb=='next'){
        $slider.animate({left:-carW},800,function(){
            $slider.append($('.past-project-each:first'));
            $slider.css({left:0});
        });    
    }else{
        $slider.prepend($('.past-project-each:last'));
        $slider.css({left:-carW});
        $slider.animate({left:0},800); 
    }
  }
}

$('#next-past-project, #prev-past-project').click(function(){  
    var btn = this.id=='next-past-project' ? move('next') : move('prev');  
}); 
```

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:24:30.827

与其不断读取和转换`$curr`元素的内容，不如在另一个变量中进行跟踪，如下所示：

```
var $tota = $('.past-project-container').find('span.total');
var $curr = $('.past-project-container').find('span.current');

var currentIndex = 0;

function changeCurr(){
    $tota.text(numberOfProjects);

    // If we've not reached the final index, add one, else return to the start
    currentIndex = (currentIndex == numberOfProjects) ? 1 : currentIndex + 1;
    $curr.text(currentIndex);
}

changeCurr(); 
```

这将一直计数到最后一张幻灯片。请务必调用`changeCurr()`每个幻灯片过渡。

# c# - GridLengthAnimation WinRT

> ID：14779829
> 
> 赞同：0
> 
> 时间：2013-02-08T19:19:55.883
> 
> 标签：c#, windows-runtime

有没有办法在 WinRT 中制作 GridLength 动画（在 RowDefinition.Heigt 上）？

在此先感谢 NeoKript

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:23:15.393

不，您可能不应该为一行的大小设置动画，因为它是一个依赖动画。如果您确实需要这样做 - 设置该行中内容的`RowDefinition.Height`to`Auto`并为其设置动画`Height`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T12:42:55.767

我不确定我是否完全同意上述关于如何为行大小设置动画的断言，在某些情况下您可能希望完全折叠行/列（即快照视图）。

您可以使用以下情节提要轻松地为高度/宽度设置动画。

```
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="100" x:Name="LeftSpacerColumn" />
    <ColumnDefinition Width="*" x:Name="QuoteColumn" />
    <ColumnDefinition Width="75" x:Name="MiddleSpacerColumn" />
    <ColumnDefinition Width="450" x:Name="ButtonSpacerColumn" />
    <ColumnDefinition Width="100" x:Name="RightSpacerColumn"/>
</Grid.ColumnDefinitions>

<Storyboard>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Grid.Width)" Storyboard.TargetName="LeftSpacerColumn">
       <DiscreteObjectKeyFrame KeyTime="0">
            <DiscreteObjectKeyFrame.Value>
                <GridLength>0</GridLength>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
    </ObjectAnimationUsingKeyFrames>
</Storyboard> 
```

# c# - 动态生成菜单条项

> ID：14779836
> 
> 赞同：0
> 
> 时间：2013-02-08T19:20:19.173
> 
> 标签：c#, variables

我有一个带有主键索引和 strUsername 的数据库行，我正在使用它们在菜单条中动态生成下拉项。该代码将用户名字符串作为文本值提供给下拉项，并创建一个事件处理程序。我想将主键整数传递给单击事件方法，但我得到的代码为所有单击事件方法提供了数据库`row.count`值。有人可以帮忙吗？

```
//  Generate drop down items from database

daUsers.Fill(dtUsers);

// Update mnuFileNew drop down list
if (dtUsers.Rows.Count != 0)
{
    mnuFileNew.DropDownItems.Clear();

    foreach (dbAutoBloggerDataSet.dbTblUsersRow row in dtUsers.Rows)
    {
        ToolStripMenuItem newItem = new ToolStripMenuItem(row.strUsername);
        newItem.Click += new EventHandler((sender, e) => mnuFileNewUser_Click(sender, e, row.nId));
        mnuFileNew.DropDownItems.Add(newItem);
    }
}

//  Drop down item event handler
private void mnuFileNewUser_Click(object sender, EventArgs e, int nId)
{
    frmLogin frmLogin = new frmLogin(nId);
    DialogResult result = frmLogin.ShowDialog();
    if (result == DialogResult.OK)
    {
        frmProfile frmProfile = new frmProfile(frmLogin.nId);
        frmProfile.ShowDialog();
        screenRefresh();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:23:27.867

我认为这个示例代码很有用

```
void AddMenuItem(string text, string action)
{
   ToolStripMenuItem item = new ToolStripMenuItem();
   item.Text = text;
   item.Click += new EventHandler(item_Click);
   item.Tag = action;

   //first option, inserts at the top
   //historyMenu.Items.Add(item);

   //second option, should insert at the end
   historyMenuItem.DropDownItems.Insert(historyMenuItem.DropDownItems.Count, item);
}

private void someHistoryMenuItem_Click(object sender, EventArgs e)
{
   ToolStripMenuItem menuItem = sender as ToolStripMenuItem;

   string args = menuItem.Tag.ToString();

   YourSpecialAction(args);
} 
```

# html - 在 iPad 上输入文本闪烁

> ID：14779837
> 
> 赞同：0
> 
> 时间：2013-02-08T19:20:23.117
> 
> 标签：html, css, wordpress, ipad

我的网站有问题，我在 上制作了自定义搜索文本`wordpress`，效果很好，但在 iPad 上它一直闪烁，我不知道为什么。

链接在这里

```
http://www.ibizapassion.net/product-category/bracelets/ 
```

我做错了什么？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:29:37.257

您的搜索框似乎正在调整整个页面的大小，即使只是几个像素，但随后页面检测到页面大小调整，并重新绘制搜索框，然后重新调整页面大小，然后重新绘制搜索框，无限。如果你想让它停下来，我建议在“body”元素上指定一个比页面大几个像素的最小宽度 CSS 属性。它不应该超过 20 个像素，而 2 个像素可能会起作用。

# c++ - 什么是“从这里需要”错误

> ID：14779839
> 
> 赞同：10
> 
> 时间：2013-02-08T19:20:33.117
> 
> 标签：c++, eclipse, mingw

它在我的 Eclipse 问题视图中。代码编译得很好，但是有一个错误说“ `required from here`”，指向一些 boost 头文件和行`state_data const current_state=interlocked_compare_exchange(&state,new_state,old_state);`

我不喜欢有错误或警告。有人知道那是什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T10:33:53.807

此行为是 eclipse CDT 错误解析器的错误：[https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=108720) ://bugs.eclipse.org/bugs/show_bug.cgi?id= 108720 实际上此错误是一个警告，boost 对此负责。您可以禁用这种特殊类型的警告以忽略它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T09:30:34.933

你真的回来了吗？并检查类型 &state new_state 和 old_state。如果您使用： int new_state; 在函数 compare_exchange(size_t &state, size_t new_state, size_t old_state) 你得到这个错误，我做到了:)

```
 state_data const current_state = interlocked_compare_exchange(&state,new_state,old_state); 
```

添加：

```
 return new_state; 
```

# windows-phone - Windows Phone 应用程序启动和独立存储

> ID：14779841
> 
> 赞同：1
> 
> 时间：2013-02-08T19:20:44.650
> 
> 标签：windows-phone, isolatedstorage

我有逻辑可以检查并创建隔离的存储目录以及与我的应用程序相关的文件。

我是否将这个逻辑放在`Application_Launching`方法内`App`？

还是我应该简单地在我的起始 XAML 页面的 Page_Load 上调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:46:34.703

好问题。我认为这在 Application_Launching 事件中会很棒。但是，请注意异常，因为可能会使您的应用程序崩溃。

我的 2 美分。

# django - django ForeignKey null = true

> ID：14779843
> 
> 赞同：3
> 
> 时间：2013-02-08T19:20:52.780
> 
> 标签：django, model

```
from django.db import models

class Story(models.Model):
    id = models.IntegerField(primary_key=True)
    news_type = models.CharField(max_length=255,null=True)
    category_id = models.CharField(max_length=255,null=True)
    title = models.CharField(max_length=255,null=True)
    created = models.DateTimeField(null=True)
    author = models.CharField(max_length=255, null=True)
    author_title = models.CharField(max_length=255, null=True)
    image_caption = models.TextField(null=True)
    image_credit = models.CharField(max_length=255,null=True)
    image_full_url = models.CharField(max_length=255,null=True)
    body = models.TextField(null=True)
    summary = models.TextField(null=True)
    video_id = models.CharField(max_length=255,null=True)
    external_url = models.CharField(max_length=255,null=True)
    order = models.IntegerField(null=True)

class StoryFactBox(models.Model):
    story = models.ForeignKey('Story', null = True)
    body = models.TextField()

class StoryKeyword(models.Model):
    story = models.ForeignKey('Story', null = True)
    keyword = models.CharField(max_length=255) 
```

哪些架构更改会`models.ForeignKey('Story', null = True)`导致发生？

我正在阅读文档：

我想使用 remove() 和 clear() ，这是文档的一部分。

为了防止数据库不一致，这个方法只存在于null=True的ForeignKey对象上。如果相关字段无法设置为无 (NULL)，则无法从关系中删除对象而不将其添加到另一个对象。在上面的例子中，从 b.entry_set() 中去掉 e 就相当于做 e.blog = None，并且因为博客 ForeignKey 没有 null=True，所以这是无效的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:31:46.810

它不会导致架构发生任何变化（只是澄清它只会创建表，不会修改），但是在 syncdb 上，会创建*没有* `NOT NULL`.

您可以通过查看表定义的 SQL 输出`python manage.py sqlall my_app`并亲自查看！

# mysql - Ubuntu 12.04 破解了 Mysql

> ID：14779844
> 
> 赞同：2
> 
> 时间：2013-02-08T19:20:58.757
> 
> 标签：mysql, ruby-on-rails-3, ubuntu-12.04, mysql2

我安装了 Ubuntu 12.04 并且我的（生产！）Rails 应用程序出现故障。

当我的网站完全关闭时，我急于尝试修复它。

```
A source file that the application requires, is missing.
It is possible that you didn't upload your application files correctly. Please check whether all your application files are uploaded.
A required library may not installed. Please install all libraries that this application requires.
Further information about the error may have been written to the application's log file.     Please check it in order to analyse the problem.
Error message:
libmysqlclient_r.so.16: cannot open shared object file: No such file or directory - /domains/myapp.com/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/mysql2.so 
```

我试过`sudo gem install mysql2`了，但它没有改变任何东西。请帮忙！我不知道出了什么问题，同时我的应用程序正在向我的用户显示堆栈跟踪！感谢您的任何想法！

我有一种预感，这可能是一个路径问题。例如，我尝试用`cd`我的方式找到那个`mysql2.so`丢失的文件并发现一条奇怪的消息：

```
cd /domains/myapp.com/shared/bundle/ruby/1.9.1/gems/
deploy@myserver:/domains/myapp.com/shared/bundle/ruby/1.9.1/gems$ cd mysql2-0.3.11/
mkdir: cannot create directory `/usr/local/rvm/gems/ruby-1.9.3-p0@mysql2': Permission denied
-bash: /usr/local/rvm/environments/ruby-1.9.3-p0@mysql2: Permission denied
Using /usr/local/rvm/gems/ruby-1.9.3-p0 with gemset mysql2
deploy@myserver:/domains/myapp.com/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11$ pwd
/domains/myapp.com/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11
deploy@myserver:/domains/myapp.com/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11$ ls -l 
```

这些信息本身就很奇怪。通常会`cd`触发? `mkdir`这是否以某种方式表明该文件存在，但我需要以某种方式为其添加路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:25:37.787

看起来您需要重新部署您的应用程序并使用系统依赖项重建您的 gem。在系统范围内安装 gem 不会有帮助。这是指示的，因为`shared/bundle`它在路径中。

# powershell - Powershell 查询在提示中有效，但在脚本中无效

> ID：14779851
> 
> 赞同：1
> 
> 时间：2013-02-08T19:21:31.017
> 
> 标签：powershell, windows-server-2008-r2, powershell-3.0, domaincontroller

我正在尝试制作一个输入主机名并告诉我当前登录用户的脚本。当我在 powershell 提示符下（以管理员身份）一一运行命令时它可以工作，但是当我运行实际脚本本身时不会产生预期的输出。

以下是相关代码：

```
$Row.Hostname = $Hostname
$getwmiobject = Get-WmiObject -class Win32_computersystem -computername $Hostname
$Username = $Getwmiobject.username

    if($UserName -eq $NULL) {
    $Row.Username = "No Current Logged on User"
    }
        else {$Row.Username = $Username
    }

$csvfile += $Row

$csvfile |sort-object Hostname | Export-Csv "foo.csv 
```

在命令行中运行时，我得到了正确的用户。当作为脚本运行时，我得到“没有当前登录用户”。我不知道为什么会这样。

编辑：我想重要的是要提到我将输出写入文件，并在上面的代码中进行了更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:41:54.137

检查您为`$Hostname`变量输入的任何额外字符，例如换行符``n`。当你输入它时，它可能不会给你一个错误并且工作，因为它不需要处理这样的事情。

# ajax - Primefaces ajax根据backbean结果更新不同的面板

> ID：14779852
> 
> 赞同：3
> 
> 时间：2013-02-08T19:21:32.183
> 
> 标签：ajax, jsf, primefaces

我是 JSF、Primefaces 和 Ajax 的新手，所以我想做的是如果我的后 bean 上的验证为真，则更新一个面板，并在它为假时更新另一个面板。

```
<h:panelGroup id="panel1">
    ...
    <h:commandButton id="btn1" action="#{bean.validate}">
        <p:ajax process="panel1" update="panel1"/>
    </h:commandButton>
</h:panelGroup>

<h:panelGroup id="panel2">
    ...
</h:panelGroup> 
```

回豆：

```
public void validate() {
    ...
    if(validatecondition) {
        // Update panel 1
    } else {
        // update panel 2
    }
} 
```

那么使用ajax可以做到这一点吗？提前致谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T20:14:25.033

当然，两种方式。由于您使用的是primefaces，因此两个选项中更容易的是

1.  使用[RequestContext](http://www.primefaces.org/showcase/ui/misc/requestContext.xhtml)对象有选择地更新面板。您的代码将如下所示：

    ```
     public void validate() {
       RequestContext context = RequestContext.getCurrentInstance();
       if(validatecondition) {
         context.update("panel1");
       } else {
         context.update("panel2");
       }
    } 
    ```

2.  JSF[`PartialViewContext`](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/api/javax/faces/context/PartialViewContext.html)可以做同样的工作，只需多输入一点

    ```
    FacesContext ctxt = FacesContext.getCurrentInstance(); //get your hands on the current request context
         if(validatecondition) {
             ctxt.getPartialViewContext().getRenderIds().add("panel1");
           } else {
             ctxt.getPartialViewContext().getRenderIds().add("panel2");
           } 
    ```

该`getRenderIds()`调用返回 JSF 将在响应完成时通过 ajax 更新的组件 ID 列表。这基本上是`RequestContext`primefaces在引擎盖下所做的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T20:20:30.017

这是可能的，如果您使用 PrimeFaces 也很容易。但首先我建议你让你的按钮更像“primefaces like”。将其重新组织为如下所示：

```
<p:commandButton id="btn1" action="#{bean.validate}" process="panel1"/> 
```

PrimeFaces 按钮默认启用 AJAX，因此不需要额外的标签。删除更新属性（我们将在支持 bean 中这样做）。

现在，您在支持 bean 中的方法：

```
public void validate() {
  // ...
  if(validatecondition) {
    RequestContext.getCurrentInstance().update("panel1");
  } else {
    RequestContext.getCurrentInstance().update("panel2");
  }
} 
```

`RequestContext`是一个非常有用的类，您可以使用它来更新、重置字段或在 AJAX 请求后执行一些 JavaScript。在此示例中，它仅用于有条件地更新 panel1 或 panel2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T21:44:19.863

JSF 页面代码将跟随在支持 bean 中，输入中的内容将检查并相应地启用正确的面板。在输入中输入 1 将激活面板 1，为面板 2 输入 2 并为两个面板留空。

JSF 是一个优秀的企业应用程序开发规范，它提供了更大的灵活性和关注点分离。您需要将用户界面元素远离业务逻辑组件的地方。我的解决方案是通过不引用支持 bean 中的 UI 元素 ID 来遵守该原则。

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        Hello from Facelets
        <h:form id="frm" >

            <h:commandButton value="click me" action="#{test2.aa()}">                
                <f:ajax execute="@form" render=":mainpanel" ></f:ajax> 
            </h:commandButton>
            <h:inputText id="intest" value="#{test2.selection}"></h:inputText> 

        </h:form>
        <h:panelGroup id="mainpanel">
            <h:panelGroup id="panel1" rendered="#{test2.prop1=='v'}">panel1
                <h:outputLabel id="lbl1" value="#{test2.prop1}" ></h:outputLabel>                
            </h:panelGroup>
            <h:panelGroup id="panel2" rendered="#{test2.prop2=='v'}">panel2
                <h:outputLabel id="lbl2" value="#{test2.prop2}"></h:outputLabel>
            </h:panelGroup>
        </h:panelGroup>
    </h:body>
</html> 
```

尽可能简单的支持 bean 代码我在请求范围内也可能使用了会话范围。

```
package test;

import javax.inject.Named;
import javax.enterprise.context.SessionScoped;
import java.io.Serializable;

@Named(value = "test2")
@SessionScoped
public class test2 implements Serializable {

    String prop1;
    String prop2;
    String selection;

    public String getProp1() {
        return prop1;
    }

    public void setProp1(String prop1) {
        this.prop1 = prop1;
    }

    public String getProp2() {
        return prop2;
    }

    public void setProp2(String prop2) {
        this.prop2 = prop2;
    }

    public test2() {
        prop1 = "v";
        prop2 = "v";
        selection = "";
    }

    public String getSelection() {
        return selection;
    }

    public void setSelection(String selection) {
        this.selection = selection;
    }

    public String aa() {
        if ("".equals(selection)) {
            prop1 = "v";
            prop2 = "v";
            return "";
        } else if ("1".equals(selection)) {
            prop1 = "v";
            prop2 = "h";
            return "";
        } else if ("2".equals(selection)) {
            prop1 = "h";
            prop2 = "v";
            return "";
        }
        return "";
    }
} 
```

# php - 将 joomla 1.5 用户插入 Mysql 会给出错误的密码

> ID：14779856
> 
> 赞同：0
> 
> 时间：2013-02-08T19:21:48.153
> 
> 标签：php, joomla

我正在制作一个自定义 joomla 帐户创建脚本，该脚本还会生成一个随机密码，并通过邮件发送给用户。帐户已创建，但密码始终无效。

我已经捕获了用户、电子邮件等。

```
$password = rand(1000,99999);
 $password2  = md5($password);
$query = "INSERT INTO jos_users          (username,email,name,usertype,sendEmail,gid,params,registerDate,password) 
VALUES (' $username','$email','$name','Registered','1','18','admin_language=
 language=
 editor=
helpsite=
timezone=0',NOW(),'$password2')";   
    $result = mysql_query($query);
     $uid=mysql_insert_id(); 
```

等…………等

我已经尝试过这些变化

```
 sha1($_POST['pword']); 
```

和

```
 $password = rand(1000,9999);
 $salt = md5(rand(1000,9999));
 $password2 = md5($password.$salt).":".$salt; 
```

仍然当我发送用户 $password 时它是错误的并且无法登录。我能错过什么吗？

```
 /////////////////////////////full script just in case///////////////////////////////

  $password = rand(1000,99999);
  $password2  = md5($password);
 die($password2);
 $query = "INSERT INTO jos_users     (username,email,name,usertype,sendEmail,gid,params,registerDate,password) 
 VALUES (' $username','$email','$name','Registered','1','18','admin_language=
language=
editor=
helpsite=
timezone=0',NOW(),'$password2')";   
    $result = mysql_query($query);
     $uid=mysql_insert_id();

    $query = "INSERT INTO #__spcClient (clientID,GSM,StartingUnits,Units) VALUES ('$uid','$GSM','$units','$units')";    
    $myfunctions->dbquery($query);

    $query = "INSERT INTO jos_core_acl_aro (section_value,value,name) VALUES ('users','$uid','$name')";
    $result = mysql_query($query);
     $uid2=mysql_insert_id();
    //$rowcount = $db->getAffectedRows($result);
    $query = "INSERT INTO jos_core_acl_groups_aro_map (group_id,aro_id) VALUES ('18','".$uid2."')";
    $result = mysql_query($query); 
```

////////////////////////////////////////

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:26:44.307

我不确定您为什么尝试了所有这些变体，但为了将来在 Joomla 中参考！你可以`/libraries/joomla/user/`特别看看你可能想看看`helper.php`其中包含的方法`getCryptedPassword()`。默认加密（'md5-hex'）切换到此代码：

```
case 'md5-hex' :
default :
    $encrypted = ($salt) ? md5($plaintext.$salt) : md5($plaintext);
    return ($show_encrypt) ? '{MD5}'.$encrypted : $encrypted; 
```

还值得研究绑定提交的数据并创建密码数组（包含盐和加密密码）的`bind()`方法。`user.php`

```
$array['password'] = $crypt.':'.$salt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:29:47.243

你让我朝着正确的方向前进。谢谢。我认为 joomla 有一个错误。我在插入后执行了数据库更新，它可以工作。我将密码重置为自身！

```
 '$query  = 'UPDATE #__users'
            . ' SET password = '.$db->Quote($password)
            . ' , activation = ""'
            . ' WHERE id = '.(int) $id
            . ' AND block = 0';

    $db->setQuery($query);

    // Save the password
    $db->query();' 
```

# c - C语言中的复杂逻辑问题

> ID：14779860
> 
> 赞同：-3
> 
> 时间：2013-02-08T19:22:08.457
> 
> 标签：c, logic

我很难想出下面的代码块并确保它有效。

我有三个可能的输入词，分别称为 A、B 和 C。

```
 //The following if-else block sets the variables TextA, TextB, and TextC to the    appropriate Supply Types.
if(strcmp(word,TextB)!=0 && strcmp(word,TextC)!=0 && i==1 && strcmp("",TextB)!=0) {
     strcpy(TextA,word);
}
else if(strcmp(word,TextA)!=0 && strcmp(word,TextC)!=0 && i==1 && strcmp("",TextC)!=0) {
  strcpy(TextB,word);
}
else if(strcmp(word,TextB)!=0 && strcmp(word,TextA)!=0 && i==1) {
  strcpy(TextC,word);
} 
```

我想要发生的是，如果 TextA 中没有任何内容（当 i = 1 时第一次在 AKA 附近；这一切都在一个循环中）然后将 word 写入 TextA。但是，如果 TextA 中确实包含某些内容，则将 word 写入 TextB。如果 TextB 中有内容，请将 TextC 设置为 word。我可以将单词重新复制到正确的位置，因为只有 3 个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:11:25.007

好的，您正在循环执行此操作，但是所有三个检查都有`i==1`，这意味着您一次只会进入这些块之一。（什么时候`i`是 1）。

`if`通常，当您在整个/条件块中进行相同的检查（逻辑与）时，`else if`您可以将其拉出块：

```
if (i == 1){
   //do all the other checks
} 
```

但是考虑一下这是否是您真正想要做的...根据您对要解决的问题的描述，我认为您根本不需要检查`i`。
如果您阅读了您在这个 SO 问题中所写的内容，那么代码实际上就是由此产生的：

> 如果 TextA 中没有任何内容，则将 word 写入 TextA
> 如果 TextA 中确实有某些内容，则将 word 写入TextB 如果 TextB 中有
> 某些内容，则将 TextC 设置为 word

所以遵循该逻辑的代码：

```
if (strlen(TextA) == 0)       // if TextA has nothing in it,
    strcpy(TextA, word);      // then write word to TextA
else if (strlen(TextB) == 0)  // else (if TextB doesn't have anything in it)
    strcpy(TextB, word);      // write word to TextB
else                          // if TextA and TextB already have something
    strcpy(TextC, word);      // then write word to TextC 
```

# javascript - 我们不能获得导航到外部站点的 iframe 的位置吗？

> ID：14779863
> 
> 赞同：-1
> 
> 时间：2013-02-08T19:22:25.797
> 
> 标签：javascript, html

我有一个 iframe，用户导航到该 iframe 中外部站点的某个位置。现在我有一个按钮，单击时会告诉该站点的位置（使用 .location.href），但它会发出未定义的警报？我的网站是 ideone.com。我怎样才能得到它的当前网址？任何更正或替代？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:49:44.023

由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您无法`iframe`从其位置设置为与父域不同的域访问任何信息。

如果您查看浏览器的控制台 (F12)，您可能会看到与此类似的错误（此错误来自 Chrome）

> 不安全的 JavaScript 尝试 从 URL [http://yoursite.com的框架访问具有 URL](http://yoursite.com) [http://othersite.com/](http://othersite.com/)的框架 。域、协议和端口必须匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:46:05.017

我认为你需要访问`window`iframe 的，根据[这个答案](https://stackoverflow.com/a/3999154/1883647)你应该可以通过：

```
document.getElementById('myframe').contentWindow.location.href 
```

当然，您可以根据需要获取对 iframe 的引用，因为关键是`.contentWindow`. 但是，正如该链接所示，如果它是另一个域，那么同源策略会阻止您获取`window`参考。

# git - Git pull --rebase 将空格转换为制表符

> ID：14779866
> 
> 赞同：5
> 
> 时间：2013-02-08T19:22:39.060
> 
> 标签：git, tabs, rebase, spaces, pull

这个问题快把我逼疯了。在 Github 上使用 Git。

我正在使用空格而不是制表符处理一个特定文件。我始终确保将所有制表符缩进更改为空格。差异确认我已将制表符更改为空格。我提交并推送代码（带有其他更改），一切都很好。

直到，我`git pull --rebase`。现在，我的文件 - 部分 - 有标签替换空格！请注意，这是文件的一部分，只有我曾经编辑过，而且我总是使用空格，而不是制表符。

当我做一个 normal 时，它不会发生`git pull`，只有在 rebase 时才会发生。

此外，合并到主集成分支的其他分支上的更改也可以。它只是发生在集成分支的变基上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-19T10:53:50.850

```
git apply --whitespace=fix 
```

似乎在变基期间发生这种情况。

也许设置

```
[apply]
    whitespace = warn 
```

在您的 gitconfig 中，看看它是否解决了您的问题。

另请参阅[“core.whitespace”设置](http://www.git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#idp16977232)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T09:25:13.147

此问题可能是由行尾设置引起的。[您可以使用此处](https://help.github.com/articles/dealing-with-line-endings)的说明配置您的 git 。

# c - 是什么导致linux中的系统调用以提升的权限运行

> ID：14779868
> 
> 赞同：1
> 
> 时间：2013-02-08T19:23:02.580
> 
> 标签：c, linux

在 linux 中，可以为实用程序分配某些用户/组，从而限制对它们的访问。我明白了，但是linux如何在系统调用级别应用权限。例如，如果我尝试通过 pthread_setschedparam 更改调度策略或提高线程的优先级，则调用将失败，除非我以 root 身份运行我的进程。

所以我的问题是linux中的哪个组件负责将权限应用于系统调用？如果我了解负责系统调用级别权限的组件，那么我可以请求系统管理员授予我的用户访问某些系统调用的权限。也许权限不是在系统调用中，而是在某些操作中，例如更改线程优先级。我需要告诉系统管理员什么，以便他可以让我有选择地访问这些操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T19:40:05.760

内核的源代码如下所示：

让我们以`settimeofday()`设置内核时间为例，这将需要root权限

有一个`security_settime()`检查安全性以设置时间的功能

它调用`cap_settime(`) 使用该`capable()`函数

`capable(int capability)`[内核/capability.c]

这将检查当前用户是否有能力做某些事情，并且在设定时间的情况下，该上限是`CAP_SYS_TIME`

* * *

```
int do_sys_settimeofday(const struct timespec *tv, const struct timezone *tz)
{
    static int firsttime = 1;
    int error = 0;

    if (tv && !timespec_valid(tv))
        return -EINVAL;

    error = security_settime(tv, tz);
    if (error)
        return error;

    if (tz) {
        sys_tz = *tz;
        update_vsyscall_tz();
        if (firsttime) {
            firsttime = 0;
            if (!tv)
                warp_clock();
        }
    }
    if (tv)
        return do_settimeofday(tv);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:42:20.887

这是不言自明的。系统调用是对内核的调用，因此内核负责将安全策略应用于某些系统调用。

从 Linux 2.6 开始，Linux 安全模块 (LSM) 框架已经到位，允许开发模块来控制内核中的某些访问。使用 LSM 的最常见的实现可能是[SELinux](http://selinuxproject.org)。另一个已知的实现是[AppArmor](http://wiki.apparmor.net/)。

此外，一些[`capabilities(7)`](http://www.kernel.org/doc/man-pages/online/pages/man7/capabilities.7.html)内置于 2.6+ 内核的功能允许您控制某些特权系统调用是否可以由非特权用户执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T19:49:55.103

在 pthread_setschedparam(3) 的特定情况下，答案取决于 Linux 内核版本，并且有点复杂。查看由. *_* _`sched_setscheduler(2)``pthread_setschedparam(3)`

通常，使用某些系统调用的权限可能由调用者的`capabilites(7)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T19:52:33.697

一旦 CPU 跳入内核空间，它就会有效地以`root`[*] 运行。

也就是说，它的工作方式与您从用户角度考虑的方式完全相反：`root`内核空间代码始终在运行，而不是以普通用户身份运行并且不得不以某种方式提升自己以访问您通常无法访问的文件/设备因为`root`并且必须进行用户权限检查，以确保它将代表用户所做的事情限制为仅允许该用户执行的操作。

* * *

[*]当然，像 SELinux 这样的[MAC](https://en.wikipedia.org/wiki/Mandatory_access_control)系统会对此进行修改。

# memory-leaks - 图表创建/渲染/销毁周期中的内存泄漏

> ID：14779876
> 
> 赞同：1
> 
> 时间：2013-02-08T19:23:35.497
> 
> 标签：memory-leaks, dojo, dojox.charting

我有一个非常基本的 Chart2d 问题。chart.destroy() 不应该删除和清理内存吗？如果是，为什么以下代码会占用内存？请注意，您不会看到任何图表，因为它会立即被销毁。我正在使用 Google Chrome 的任务管理器查看内存使用情况，20 分钟后它远远超过 200MB。

我知道 updateSeries()，但这不是我想要的，所有图形属性都可能在每次迭代中发生变化（标题、轴、图、数据、颜色等），所以我认为最简单的方法是销毁图表并重新创建它。即使有更好的方法来解决我的问题**，我想知道摆脱图表及其所有内存绑定的最佳方法是什么？**

附注：如果您删除 addPlot、addAxis 和 addSeries 行（因此只剩下 new、render 和 destroy），您仍然会得到相同的高内存使用率。另外，我使用的是 1.8.0。

谢谢，

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<script type="text/javascript" src="dojo/dojo.js" djconfig="isDebug: true"></script>

<script type="text/javascript">

  dojo.require("dojox.charting.Chart2D");

  runCharts = function() {
    setTimeout(makeCharts, 100);
  };

  makeCharts = function(){
    var chart1 = new dojox.charting.Chart2D("simplechart", {delayInMs:0});
    chart1.addPlot("default", {type: "Lines"});
    chart1.addAxis("x");
    chart1.addAxis("y", {vertical: true});
    chart1.addSeries("Series 1", [1, 2, 2, 3, 4, 5, 5, 7]);
    chart1.render();
    chart1.destroy();
    setTimeout(makeCharts, 100);
  };

  dojo.addOnLoad(runCharts);
</script>

<div id="simplechart" style="width: 250px; height: 150px;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:27:37.250

不知道这是否有帮助，试试这个：

```
 chart1.destroy();
    delete chart1; 
```

# android - 一张 320kb 的背景图片占用大约 30MB 的内存空间

> ID：14779877
> 
> 赞同：2
> 
> 时间：2013-02-08T19:23:39.153
> 
> 标签：android, bitmap, drawing, resolution

目前我正在开发一个应该在平板电脑和手机上运行的应用程序。我的主菜单背景图像的分辨率是 2000x1250，它会根据画布的宽度和高度进行调整。图像大小为 320KB (PNG)。但是，如果分辨率为 2000x1250，dalvikm 分配器会为这个单一背景图像分配高达 30MB 的内存。我已经阅读并应用了文章[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)，但是当分辨率为 2000x1250 时，位于的内存量保持不变（我在我的S3 分辨率为 1280x720）。这是我应该担心的事情吗？平板电脑是否有更多空间容纳更大的位图？

在此先感谢，-Z

编辑1：

LOGCAT

> > 申请开始

02-08 20:35:12.105: D/dalvikvm(27962): GC_FOR_ALLOC 释放 8804K，18% 释放 53293K/64775K，暂停 31ms，总共 31ms

02-08 20:35:12.110：I/dalvikvm-heap(27962)：将堆（碎片情况）增加到 61.693MB，分配 9000016 字节

02-08 20:35:12.145: D/dalvikvm(27962): GC_CONCURRENT freed 35206K, 59% free 26875K/64775K, paused 11ms+3ms,总共32ms

02-08 20:35:12.315: D/dalvikvm(27962): GC_FOR_ALLOC 释放 0K，59% 释放 26875K/64775K，暂停 10ms，总共 10ms

> > 这是主菜单打开的地方

02-08 20:35:12.330：I/dalvikvm-heap(27962)：将堆（碎片情况）增加到 61.643MB，分配 36000016 字节

02-08 20:35:12.350: D/dalvikvm(27962): GC_CONCURRENT freed 0K, 5% free 62031K/64775K, paused 11ms+3ms,总共23ms

教程中的功能：

```
public static int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
// Raw height and width of image
final int height = options.outHeight;
final int width = options.outWidth;
int inSampleSize = 1;

if (height > reqHeight || width > reqWidth) {

    // Calculate ratios of height and width to requested height and width
    final int heightRatio = Math.round((float) height / (float) reqHeight);
    final int widthRatio = Math.round((float) width / (float) reqWidth);

    // Choose the smallest ratio as inSampleSize value, this will guarantee
    // a final image with both dimensions larger than or equal to the
    // requested height and width.
    inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
}

return inSampleSize;
}

 public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
        int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeResource(res, resId, options);
 } 
```

我在 OnCreate 中的代码（不要介意弃用，这不是问题）：

```
final FrameLayout fr = (FrameLayout) findViewById(R.id.mainmenu_background);
//fr.setBackgroundResource(R.drawable.background_main_menu);
Display display = getWindowManager().getDefaultDisplay();
//Point size = new Point();
//display.getSize(size);
fr.setBackgroundDrawable(new BitmapDrawable(getResources(), decodeSampledBitmapFromResource(getResources(), R.drawable.background_main_menu, 2000, 1250))); 
```

XML中的代码：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/mainmenu_background"
> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:27:20.987

原因很简单，一张图片需要 4x2000x1250 字节的内存。每个像素都有一部分红、绿、蓝和阿尔法通道信息。

30 MB 有点奇怪，但 9MB 是正常的：4x2000x1250=10000000 Byte -> 9,5MB

确定你不会在某处寻找记忆吗？

一般来说，最好使用较小的图像。有一种称为[9-patch](http://developer.android.com/tools/help/draw9patch.html)的技术可以自动拉伸图像。

# javascript - 如何遍历 nodeList 功能样式

> ID：14779878
> 
> 赞同：3
> 
> 时间：2013-02-08T19:23:50.250
> 
> 标签：javascript, prototype

我经常想用 forEach 或 map 遍历 NodeList。我的简化代码是这样工作的：

```
var nodeListMap = Array.prototype.map;
var els = document.querySelectorAll('.classname');
nodeListMap.call(els, function(el){...}); 
```

这工作正常。但是，我宁愿不必这样`map.call`做，但如果我这样做......

```
var nodeListMap = Array.prototype.map.call;
var els = document.querySelectorAll('.classname');
nodeListMap(els, function(el){...}); 
```

然后它返回

```
TypeError: object is not a function 
```

我怎样才能修改代码，所以我只是这样做`nodeListMap(array, fn)`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-04-15T16:56:05.530

我遇到了同样的问题，我使用 ES6 的超级简单解决方案是：

```
const els = [...document.querySelectorAll('.classname')] 
```

这样 nodeList 就变成了一个普通的数组，你可以使用`map`，`reduce`等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T19:26:49.157

`Array.prototype.map.call`只是给你`call`函数（`Function.prototype.call`），没有上下文。您需要将其绑定到`map`函数：

```
var nodeListMap = Function.prototype.call.bind(Array.prototype.map); 
```

如果你不想使用`bind`，你也可以写

```
function nodeListMap(_list /* … */) {
    return Function.prototype.call.apply(Array.prototype.map, arguments);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T19:43:47.320

另一种选择是将此功能添加到原型 NodeList：

```
NodeList.prototype.map = function(step){
    return Array.prototype.map.call(this, step);
};
NodeList.prototype.forEach = function(step){
    return Array.prototype.forEach.call(this, step);
}; 
```

有了这个，你可以打电话：

```
els.map(function(el){...}); 
```

需要注意的是，这样修改 NodeList 的原型可能会有人不屑一顾，但我个人并不认为它有什么问题。

或者，如果您需要设置`this`对象：

```
NodeList.prototype.map = function(step){
    return Array.prototype.map.call(this, step, Array.prototype.slice.call(arguments, 1));
};
NodeList.prototype.forEach = function(step){
    return Array.prototype.forEach.call(this, step, Array.prototype.slice.call(arguments, 1));
}; 
```

**注意：**上面有一个副作用，当你不传递第二个参数时，`this`会变成一个空数组而不是`window`.

或者

```
NodeList.prototype.map = Array.prototype.map;
NodeList.prototype.forEach = Array.prototype.forEach; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T19:44:01.263

编写自己的“做正确的事”的函数可能是最简单的

```
function map() {
    var args = [].slice.call(arguments, 0);
    var ctx = args.shift();
    return [].map.apply(ctx, args);
} 
```

然后它将适用于*任何*伪数组对象。

**编辑**此代码已更新，以确保*所有*参数都传递给`.map`，即使 ECMA 将来添加更多。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-31T15:06:06.137

六年后，大多数浏览器的 NodeLists 上都可以使用`map`和`forEach`方法（IE 通常是奇怪的鸭子）。检查caniuse 上的`forEach`nodeList[支持](https://caniuse.com/#feat=mdn-api_nodelist_foreach)。

如果需要旧版浏览器支持，为了简洁明了（ES6+），我选择了以下内容：

`const els = Array.from(document.querySelectorAll('.selector'));`

然后，您可以简单地迭代为...

`els.forEach(el => doSomething)`

# ruby-on-rails-3 - 防止更改 Rails 模型中的一个字段

> ID：14779879
> 
> 赞同：24
> 
> 时间：2013-02-08T19:23:54.123
> 
> 标签：ruby-on-rails-3, validation, hobo

我有两个相关的模型 - 比如说`Activity`和`Step`。这意味着表`Activity has_many :steps`有一个列。`Step belongs_to :activity``steps``activity_id`

这是在 Hobo 1.3 中，所以在 Rails 3.0 中。

我想要的是确保*在`Step`创建*后无法将步骤移至另一个`Activity`. 我们不希望该`activity_id`领域发生变化。

我已经从编辑表单中删除了该字段，但我正在寻找更强大的约束。本质上，我想验证`update`（而不是`create`）该列没有被触及。Hobo 的文档并没有在 Hobo 中提出任何类似的建议，所以我正在查看[Rails 验证](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html)，但到目前为止，我还没有找到我记得的“仅在更新时执行此操作”约束，也没有验证某些东西不是' t 变化。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-08T20:53:53.330

您可以使用 将属性声明为 read_only `attr_readonly :your_field_name`。但是，如果您尝试编写此属性，这不会产生错误，它会静默失败。（所有 SQL 更新都将忽略此属性）

另一种选择可能是，为这种情况编写验证，可能如下所示：

```
class Step < ActiveRecord::Base
  validate :activity_id_not_changed

  private

  def activity_id_not_changed
    if activity_id_changed? && self.persisted?
      errors.add(:activity_id, "Change of activity_id not allowed!")
    end
  end
end 
```

`persisted?`如果这不是新记录并且没有被销毁，则返回 true。

链接：

[http://api.rubyonrails.org/classes/ActiveRecord/ReadonlyAttributes/ClassMethods.html#method-i-readonly_attributes](http://api.rubyonrails.org/classes/ActiveRecord/ReadonlyAttributes/ClassMethods.html#method-i-readonly_attributes)

[http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-persisted-3F](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-persisted-3F)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-04-24T08:26:26.000

验证包含：

```
 validates :activity_id,
            inclusion: { in: ->(i) { [i.activity_id_was] } },
            on: :update 
```

不需要额外的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T16:36:56.880

我认为您也可以使用 Hobo 权限系统执行此操作：http: [//hobocentral.net/manual/permissions](http://hobocentral.net/manual/permissions)

例如：

```
def update_permitted?
  acting_user.administrator && !activity_id_changed?
end 
```

# html - CSS 在为空时绘制必填字段

> ID：14779880
> 
> 赞同：0
> 
> 时间：2013-02-08T19:23:54.667
> 
> 标签：html, css, css-selectors

我想使用 CSS 在表单中绘制必填字段，以便用户知道必须填写它们。一旦字段具有值，我也希望这幅画消失。

这是我尝试过的一个例子：

**CSS**

```
input[type="text"]{
    display:block;
}
input.required[value=""] {
    background-color:yellow;
} 
```

**HTML**

```
Name:<input class="required" type="text" name="Name" value="" size="20">
Phone:<input type="text" name="Phone" value="" size="20"> 
```

必填字段绘制得很好，问题是一旦字段具有值，颜色就不会消失。

有没有办法让它与纯 CSS 一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:43:35.900

使用新浏览器：使用`:invalid`伪选择器和`required`属性。在较旧的浏览器中，您将需要 JavaScript。

如果您的框架妨碍了添加 HTML5 属性，我会质疑框架（或查看更新版本），但如果需要，您始终可以使用 shim 与（假设 jQuery）类似的东西：

```
$(function() {
    $(".required.").attr("required", "true");
}); 
```

不太理想，但足够简单，不会污染系统。

# ios - iOS 上的 FTS3 或 FTS4 入门

> ID：14779882
> 
> 赞同：2
> 
> 时间：2013-02-08T19:23:56.867
> 
> 标签：ios, sqlite, full-text-search

我们的数据库中有几个表，我们在 iOS 上使用 LIKE 进行搜索。数据增长得越大，速度就越慢。我被定向到 FTS3/FTS4，并阅读了一些文档。我有点不确定如何开始。（如果我的陈述不正确并且我误解了文档中的某些内容，请纠正我）。听起来虚拟表只是一个不存储在磁盘上的表。因此，如果我们目前使用 LIKE 搜索 4 列，我是否创建 4 个虚拟表，将原始表中的条目插入到我们的一个新虚拟表的行中，然后在我通常搜索该列的情况下，使用 MATCH 语法在新的虚拟表中搜索，如果该部分到目前为止是正确的，我有点不知道下一步该做什么。因为我'

还是人们将整个数据库的副本创建到虚拟表中，然后通过这种方式获取信息？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:36:44.780

虚拟表不*直接*存储在磁盘上，但它们通常使用几个内部“普通”表来实际存储数据，并且只是更改数据的访问方式。（见[影子表](http://www.sqlite.org/fts3.html#section_9_1)）

您可以将多个文本列放入一个 FTS 表中，然后[搜索其中一个或全部](http://www.sqlite.org/fts3.html#section_3)：

> 通常，令牌或令牌前缀查询与指定为 MATCH 运算符左侧的 FTS 表列匹配。或者，如果指定了与 FTS 表本身同名的特殊列，则针对所有列。

FTS 表[无法有效地执行“正常”查询](http://www.sqlite.org/fts3.html#section_1_4)，因此您可能仍需要原始表。FTS 表的`docid`列通常是原始表的主键。

如果您的原始表格还包含所有文本，您可以使用[外部内容 FTS 表格](http://www.sqlite.org/fts3.html#section_6_2)来节省一些空间。

# ms-access - MSAccess Link CSV 文件作为启动时的表

> ID：14779883
> 
> 赞同：1
> 
> 时间：2013-02-08T19:24:00.333
> 
> 标签：ms-access, csv, import

我在将表链接到 csv 文件时遇到问题。我通过 VBA 代码进行了附加，如下所示：

```
With CurrentDb
  Dim ts As DAO.TableDef
  Set ts = .CreateTableDef("cli")
  ts.SourceTableName = "CLI1.csv"
  ts.Connect = "Text;DSN=CLI1 Spec;FMT=Delimited;HDR=NO;IMEX=2;CharacterSet=850;DATABASE=C:\Users\user1\Desktop"
  .TableDefs.Append ts
  .TableDefs.Refresh
End With 
```

当手动调用它时，表格已正确附加。当在 autoexec 宏中自动调用它时，我收到一个错误 3625，说文本文件规范“CLI1 Spec”不存在......通过它！

也许是因为在运行 autoexec 宏时，上下文没有完全初始化……但是我该怎么做才能让它工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:27:02.707

尝试：

```
With CurrentDb
  Dim ts As DAO.TableDef
  Set ts = .CreateTableDef("cli")
  ts.SourceTableName = "CLI1.csv"
  ts.Connect = "Text;FMT=Delimited;HDR=NO;IMEX=2;CharacterSet=850;DATABASE=C:\Users\user1\Desktop"
  .TableDefs.Append ts
  .TableDefs.Refresh
End With 
```

如果不适合，使用 schema.ini 文件和 sql 并不太难，例如：[Handle TransferText Errors](https://stackoverflow.com/questions/14730093/handle-transfertext-errors/14730415#14730415)

# sql-server - 如何在 R 包中管理数据库连接

> ID：14779889
> 
> 赞同：7
> 
> 时间：2013-02-08T19:24:13.177
> 
> 标签：sql-server, r, rodbc

我正在构建一个 R 包，其主要目的是消除处理专有数据库的痛苦，该数据库需要一些相当复杂的 SQL 查询才能获取数据。

因此，与 Microsoft SQL Server 的连接（`odbcDriverConnect`由在 R。

我目前的想法是：

1.  让用户在调用任何函数之前确保他们有一个有效的连接。然后每个函数都有`connection`一个必须传递的参数。这给用户带来了负担。

2.  在每个函数中，每次调用`get.connection()`都会获得新的连接。然后允许旧连接自然超时，这似乎是一种草率的方法。

3.  如上，但每次都返回相同的连接。这似乎不是一个可行的提议，因为我无法阻止连接通过 R 超时。`autoReconnect=TRUE`我在不同语言中使用的其他技巧似乎没有效果。

在 Java 中，我可能会拥有一个填充了许多连接的 DatabaseConnectionPool，然后根据需要从该池中获取连接并将它们返回到该池。当我指定`autoReconnect=TRUE`.

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-20T04:57:03.370

`pool`是用于池连接（如数据库）的 R 包。如果您喜欢使用 github 包，请查看[https://github.com/rstudio/pool](https://github.com/rstudio/pool)。将根据需要重用或重新创建连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:35:06.430

似乎第二种和第三种方法的混合是一个合理的解决方案，即每次都获得相同的连接，但是在返回连接之前，您可以[检查它是否仍然打开](http://r.789695.n4.nabble.com/RODBC-package-how-to-check-whether-connection-is-open-td888610.html)，否则创建一个新连接。

基本上就像您在手动实施`autoReconnect=TRUE`

# c# - 在linux中使用mono从工作目录以外的文件夹中加载MEF导出

> ID：14779890
> 
> 赞同：1
> 
> 时间：2013-02-08T19:24:13.347
> 
> 标签：c#, mono, mef

我正在尝试使用 MEF（内置单声道的版本）作为一个简单的插件系统来扩展我的应用程序。我遵循了各种教程，这些教程在 Windows 下运行良好的 Microsofts .NET 框架，但是（相同的代码）在 linux（内核 3.7.3 - gentoo）下使用 mono-2.10.9 失败。

我创建了一个接口，所有导出（我的扩展）都必须在外部程序集中引用：

```
namespace PlugInInterface {

    [InheritedExport]
    public interface IPlugIn {

        void Execute(); 

    }

} 
```

然后我创建了一个 Hostapplication（一个 ConsoleApplication），它也引用了 PluginInterface：

```
namespace Host {

    class MainClass {

        private static PluginHost plugins;

        public static void Main(string[] args) {
            plugins = new PluginHost();
            foreach(IPlugIn plugin in plugins.plugins) {
                plugin.Execute();
            }
        }
    }

    class PluginHost{

        [ImportMany(typeof(IPlugIn))]
        public List<IPlugIn> plugins = new List<IPlugIn>();

        public PluginHost() {
            var catalog = new DirectoryCatalog("PlugIns");
            var container = new CompositionContainer(catalog);
            container.ComposeParts(this);   
        }   
    }
} 
```

以及一个在 Debug 目录的“PlugIns”子文件夹中编译的扩展，其中放置了主机应用程序：

```
namespace TestPlugin1 {
    [Export(typeof(IPlugIn))]
    public class TestPlugin1 : IPlugIn {
        public void Execute() {
            Console.WriteLine("Hello, my Name is TestPlugin_Implementation1");
        }
    }
} 
```

*DirectoryCatalog*加载插件的文件（“./PlugIns/TestPlugin1.dll”），但它不将其识别为导出（“部件”），因此`plugins`列表保持为空。如果我将 PluginFile 放在应用程序的工作目录中并将 DirectoryList 更改为： `var catalog = new DirectoryCatalog("");`

如果我使用单声道运行从 .NET 编译器编译的编译版本，则插件会加载两次。

我尝试通过加载插件文件手动替换*DirectoryCatalog*`System.Reflection.Assembly.LoadFile(...);`，然后使用*AssemblyCatalogs*加载所有找到的程序集：

```
class PluginHost{

    [ImportMany(typeof(IPlugIn))]
    public List<IPlugIn> plugins = new List<IPlugIn>();

    public PluginHost() {
        List<AssemblyCatalog> catalogs = new List<AssemblyCatalog>();
        foreach(string plfile in Directory.GetFiles("PlugIns", "*.dll", SearchOption.AllDirectories)) {
            catalogs.Add(new AssemblyCatalog(System.Reflection.Assembly.LoadFile(plfile)));
        }           
        var container = new CompositionContainer(new AggregateCatalog(catalogs));
        container.ComposeParts(this);   
    }   
} 
```

这可行，但与编译的 .NET 可执行文件相同：插件加载两次。

这是单声道的错误，它是 MEF 的实现，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:06:44.160

> 如果我使用单声道运行从 .NET 编译器编译的编译版本，则插件会加载两次。

发生这种情况是因为尽管您已经`IPlugIn`用. 目录将匹配这两个，因此导出两次。您只需要这两种方法中的一种。要么保留并且不使用 装饰任何实现，或者使用 装饰所有实现并从接口中删除。`InheritedExportAttribute``ExportAttribute``InheritedExportAttribute``ExportAttribute``ExportAttribute``InheritedExportAttribute`

我还没弄清楚为什么`DirectoryCatalog`不能在 Mono 上加载插件程序集。正如您所提到的，在 CLR 上可以正常工作。

# wordpress - WP：如何从一个类别中只获得一篇帖子并显示它

> ID：14779893
> 
> 赞同：0
> 
> 时间：2013-02-08T19:24:26.780
> 
> 标签：wordpress, post, categories

**大家好！** 好吧，我有这段代码，它显示了每个类别的一篇文章，但我只需要显示一篇文章，并且需要设置我正在尝试的类别的“名称”：

```
 <?php 
$cat_args = array(
  'orderby' => 'name',
  'order' => 'ASC',
  'child_of' => 0
);

$categories =   get_categories($cat_args); 

foreach($categories as $category) { 
    echo '<dl>';
    echo '<dt> <a href="' . get_category_link( $category->name ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a></dt>';

     $post_args = array(
      'numberposts' => 1,
      'category' => $category->term_id 
    );

    $posts = get_posts($post_args);

    foreach($posts as $post) {
    ?>
        <dd><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></dd>
                <div class="entry">
                            <?php the_content(); ?>
                        </div>
    <?php 
    } 
    echo '<dd class="view-all"> <a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>View all posts in ' . $category->name.'</a></dd>';
    echo '</dl>';
} 
?> 
```

然后我搜索了法典并没有找到按名称获取类别的方法，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:05:50.610

您正在寻找的是[get_cat_ID](http://codex.wordpress.org/Function_Reference/get_cat_ID)。

更改`$post_args`为这样的内容：

```
$post_args = array(
    'posts_per_page' => 1,
    'cat' => get_cat_ID( 'My Category Name' )
); 
```

让我知道事情的后续。:)

# sql - JDBC 规范是否阻止“？” 从被用作运算符（引号之外）？

> ID：14779896
> 
> 赞同：18
> 
> 时间：2013-02-08T19:24:34.600
> 
> 标签：sql, postgresql, jdbc, specifications

从[山姆麦克白的问题](https://stackoverflow.com/questions/11940401/escaping-hstore-contains-operators-in-a-jdbc-prepared-statement)：

> JDBC 规范中有什么允许的吗？被转义并成为参数占位符以外的任何东西？

例如，Postgres 允许您`?`用作运算符：

```
SELECT * FROM tbl WHERE tbl.data ? 'abc' 
```

一个 JDBC 驱动程序可以让您使用吗？作为操作员仍然是 JDBC 兼容的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-05-28T21:31:55.593

如果您有最新的 postgresql 驱动程序，您可以使用：

```
?? 
```

更改原始查询：

```
SELECT * FROM tbl WHERE tbl.data ?? 'abc' 
```

详细信息在此拉取请求中 - [https://github.com/pgjdbc/pgjdbc/pull/227](https://github.com/pgjdbc/pgjdbc/pull/227) 此更改是在原始问题之后很久才进行的，但值得注意的是现在有一个简单的答案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-09T08:55:53.570

我认为如果 JDBC 驱动程序允许`?`操作符不转义并按原样使用，那将是完全可以接受的，但它可能 1）使您的解析器复杂化以实际识别来自该操作符的参数，并且 2）可能会混淆人们（可能还有工具) 习惯于`?`仅表示参数占位符。

所以我的建议是提供某种转义（或替代运算符）。但是查看 JDBC 规范，驱动程序应该只使用 JDBC 转义语法来实现 JDBC 规范中定义的转义（13.4.2：“转义语法不打算用于调用用户定义的或供应商特定的标量函数。 “；虽然这是专门关于`{fn ...}`逃跑的）。

因此，要么您需要使用替代转义，要么“打破”规则（我认为没有人会介意）。如果您想要更权威的答案，可以将您的问题发送到[jdbc-spec-discuss 邮件列表](http://mail.openjdk.java.net/mailman/listinfo/jdbc-spec-discuss)。我相信 Lance Andersen（JDBC 规范负责人）会提供答案。

**编辑**：

同样有趣的是，JDBC 规范第 6.2 节（指南和要求）说：

> 驱动程序应该提供对底层数据源实现的每个特性的访问，包括扩展 JDBC API 的特性。目的是让使用 JDBC API 的应用程序能够访问与本机应用程序相同的功能集。

因此，基于您应该（不是必须）支持`?`-operator，您只需要找到一种实用的方法即可。

* * *

## [基于jdbc-spec-discuss 上的讨论进行](http://mail.openjdk.java.net/pipermail/jdbc-spec-discuss/2013-February/thread.html#48)更新

根据 Lance Andersen 的说法，关于问号，JDBC 规范遵循 SQL 规范：它们只能用作查询文本中的参数占位符（当然注释和引用文本除外），因为`?`在 PostgreSQL hstore 运算符中使用 as 会不被允许。（见此[消息](http://mail.openjdk.java.net/pipermail/jdbc-spec-discuss/2013-February/000053.html)）

可用的选项是为操作员提供别名或转义，前提是这与未来的更改不冲突（如果没有千里眼，这很难做到；）。最好的解决方案 - 防止未来 JDBC 更改出现问题 - 可能是自定义转义。

JDBC 实际上并没有定义供应商转义，但 Lance Andersen 确实提出了一种类似于 JDBC 转义的转义`{postgres <thing to be escaped>}`：在此转义中使用供应商名称或驱动程序名称将提供一种命名空间形式，以防止与规范冲突。（见此[消息](http://mail.openjdk.java.net/pipermail/jdbc-spec-discuss/2013-February/000058.html)）

为了符合“正常”的 JDBC 函数转义，我建议定义一个转义，允许您的问题中的查询表述为：

```
SELECT * FROM tbl WHERE {postgres containskey(tbl.data, 'abc')} 
```

我是根据[hstore 文档](http://www.postgresql.org/docs/9.2/static/hstore.html)中`containskey`的含义选择的。: ) 和:的类似建议。为了保持一致性，您也可以考虑对其他 hstore 运算符执行此操作。`?``?&``containsallkeys``?|``containsanykey`

您也可以决定只转义问号本身。例如用`{postgres '?'}`or转义`{postgres qm}`（qm 表示问号）。我确实认为可读性低于我的函数转义建议：

```
SELECT * FROM tbl WHERE tbl.data {postgres '?'} 'abc' 
```

* * *

## 根据 JDBC v.Next (4.4?) 的新提案进行了更新

下一个 JDBC 规范（可能编号为 4.4）可能会添加显式 JDBC 转义以完全转义查询片段，其明确意图是能够为不使用问号作为参数标记的数据库系统转义问号并且需要支持问号的其他用途。

建议的语法是`{\ <thing-to escape> \}`（Oracle JDBC 驱动程序已将其作为非标准转义支持）。使用这种语法，参数标记可以用`{\?\}`（在字符串文字中：）`{\\?\\}`转义，或者转义更大的片段以提高可读性。

另请参阅[SQL 2016 MATCH RECOGNIZE JDBC parameter Marker / Escape Characters](http://mail.openjdk.java.net/pipermail/jdbc-spec-discuss/2018-November/000464.html)和jdbc-spec-discuss 邮件列表上的[早期讨论。](http://mail.openjdk.java.net/pipermail/jdbc-spec-discuss/2018-October/000406.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-08T21:44:18.983

我在[JDBC 规范](http://download.oracle.com/otn-pub/jcp/jdbc-4_1-mrel-spec/jdbc4.1-fr-spec.pdf)中看不到任何允许`?`转义的内容。几乎所有它说的`?`是：

> 参数标记，用“?”表示 在 SQL 字符串中，用于指定在运行时可能会发生变化的语句的输入值。^([1])

然后...

> 参数序号是传递给适当的 setter 方法的整数，指的是语句中的参数标记（“？”），从 1 开始。^([2])

而且它只为一小组特性定义了转义语法，看起来它们都不能应用于`?`：

> JDBC 为以下内容定义了转义语法：
> 
> *   标量函数
> *   日期和时间文字
> *   外连接
> *   调用存储过程
> *   LIKE 子句的转义字符^([3])

总体而言，JDBC 规范似乎没有非常“严格”的语言（例如，与某些 W3C 规范文档相比，它大量使用*must*和*should*），所以我不知道是否允许使用的驱动`?`程序escaped 在技术上是不兼容的，但它可能不太兼容。

它甚至看起来甚至连 Postgres 驱动程序都不允许，因为驱动程序中实际解析 SQL 语句的方法`?` [不检查任何转义字符](https://github.com/pgjdbc/pgjdbc/blob/master/org/postgresql/core/v3/QueryExecutorImpl.java#LC118)。

* * *

^(1\. JDBC 4.1 规范，第 13.2 节 —`PreparedStatement`接口)
^(2\. JDBC 4.1 规范，第 13.3.2 节 — 设置参数)
^(3\. JDBC 4.1 规范，第 13.4 节 — 转义语法)

# asp.net-web-api - 在 Windows 2008 上返回的自托管 asp.net webapi 基本身份验证没有 401

> ID：14779902
> 
> 赞同：0
> 
> 时间：2013-02-08T19:24:58.320
> 
> 标签：asp.net-web-api

我开发了一个自托管的 asp.net webapi 服务，它使用消息处理程序使用基本身份验证（类似于：[http ://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using -消息处理程序/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/)）。当我从我的工作站（win 7 x64）运行它时，客户端会按预期使用。当我在预期的服务器（win 2008）上运行它时，客户端失败并显示错误代码 500。经过一些挖掘和网络跟踪后，看起来（工作的）win 7 框最初按预期响应 401，但 win 2008 框根本没有响应，它只是断开连接（客户端将此报告为 500）。

我已经在服务器上设置了一个远程调试，甚至没有一个堆栈跟踪可以继续。在我看来，我可能在服务器上缺少某些组件，导致 asp.net webapi 代码深处某处出现异常，但我无法确定。

我不太确定从这里去哪里。我能想到的唯一下一步是对它运行 procmon 并查看它是否为 dll 提供任何“未找到文件”类型的条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:23:14.140

我切换到使用 asp.net web 堆栈每晚构建，以便我可以获得更好的符号信息（[http://blogs.msdn.com/b/henrikn/archive/2012/04/29/using-nightly-nuget-packages -with-asp-net-web-stack.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/04/29/using-nightly-nuget-packages-with-asp-net-web-stack.aspx)）。有了它，并打开 .net 框架调试，我能够捕获正在引发的实际异常：

'WWW-Authenticate' 标头不能直接修改

谷歌搜索，我发现了几条线索，其中一条导致了[http://wcf.codeplex.com/discussions/287534](http://wcf.codeplex.com/discussions/287534)我得到了解决方案。基本上，切换到在身份验证模块中使用身份验证，而不是在消息处理中使用。所以更像这样：

```
HttpSelfHostConfiguration config = new HttpSelfHostConfiguration("http://0.0.0.0:" + FaxCommon.SERVICE_PORT.ToString());
config.UserNamePasswordValidator = new AuthenticationProvider(); 
```

其中 AuthenticationProvider 是 UserNamePasswordValidator 的子类

之后，代码在任何地方都可以使用。

# android - 删除ListActivity android中的数据库条目

> ID：14779903
> 
> 赞同：1
> 
> 时间：2013-02-08T19:25:02.140
> 
> 标签：android, database

我可以寻求帮助...我设法将数据添加到数据库..但我删除数据时遇到问题..因为我无法根据我的 ListView 中的 ID 删除...如何获取 ID ??。 .这是我的代码..

此类名称为 ViewActivity.java，我在其中显示我的数据库内容...我只在我的 ListView 中显示一列

```
 String query = "select * from " + helper.TABLE_PEKERJA;

        Cursor c = database.rawQuery(query, null);

        if(c!=null)
        {
            c.moveToFirst();
            int getNamaIndex = c.getColumnIndex(helper.COL_NAMA);

            if(c.isFirst())
            {
                do{
                    String nama = c.getString(getNamaIndex);
                    result.add(nama);
                }while(c.moveToNext());
            }
        }

        this.setListAdapter(new ArrayAdapter(this,  android.R.layout.simple_list_item_1,result));
        getListView().setTextFilterEnabled(true); 
```

在我的 DBHelper 中，我创建了一个从我的数据库表中删除行的方法。

```
public void deleteData(SQLiteDatabase db, String id)
{
    db.delete(TABLE_PEKERJA, COL_ID + " = " +id, null);
} 
```

然后仍然在 ViewActivity.java 类中，我实现方法 onListItemClick

```
 @Override
 protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    DBHelper helper = new DBHelper(this);
    database = helper.getWritableDatabase();        

    Object o = this.getListAdapter().getItem(position);
    String keyword = o.toString();
    helper.deleteData(database, keyword);
    Toast.makeText(this, "Data " + keyword + " removed" , Toast.LENGTH_SHORT).show();

} 
```

也有这个错误..这个错误只有我可以查看...这个错误部分

```
Object o = this.getListAdapter().getItem(position);

02-09 02:34:23.729: E/Database(28923):  at com.example.untukmuna.ViewContentActivity.onListItemClick(ViewContentActivity.java:69) 
```

所以，我的问题是

1）我如何删除我的数据库表行，当我在创建数据库时按 ID 2）的 ListView 中的项目时，有 db.open()...但是我应该在哪里关闭数据库购买 db.close() 。 ..??

谢谢~~希望大家能理解我的问题。。^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:24:14.397

常规完成的方式是您只需`id`从列表单击参数中获取。

```
protected void onListItemClick(ListView l, View v, int position, long id) <------ 
```

但是您不能立即执行此操作，因为您`ListView`连接到的是 an`ArrayAdapter`而不是 a `CursorAdapter`。现在，这`id`将始终为 0 或一些无意义的值。如果您需要执行此类任务，我建议您更改适配器。

但是，如果您需要按原样使用适配器，那么您可以做的是制作相应`id`的某种集合，当您循环访问数据库以填充`result`. `position`然后它就像从`onListItemClick`参数中获取然后`id`从 id 集合中获取一样简单。

当然，您必须确保在删除列表视图的行时从该集合中删除值。

* * *

尝试以下操作：

```
private DBHelper helper;
private SQLiteDatabase db;
private ArrayList<String> result = new ArrayList<String>();
private ArrayList<Long> idList = new ArrayList<Long>();
private ArrayAdapter<String> adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    helper = new DBHelper(this);
    db = helper.getWritableDatabase();      

    String query = "select * from " + helper.TABLE_PEKERJA;
    Cursor c = db.rawQuery(query, null);
    int getIdIndex = c.getColumnIndex(helper.COL_ID);
    int getNamaIndex = c.getColumnIndex(helper.COL_NAMA);

    while (c.moveToNext()) {
        idList.add(c.getLong(getIdIndex));
        result.add(c.getString(getNamaIndex));
    }

    adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, result);
    this.setListAdapter(adapter);
    getListView().setTextFilterEnabled(true);
}

public boolean deleteData(Long id) {
    return db.delete(TABLE_PEKERJA, COL_ID + " = " + id, null) > 0;
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Long idValue = idList.get(position);
    boolean isDeleted = deleteData(idValue);
    Toast.makeText(this, "boolean value for database deletion: " + String.valueOf(isDeleted), Toast.LENGTH_SHORT).show();

    idList.remove(position);
    result.remove(position);
    adapter.notifyDataSetChanged(); //refresh so that we can see listview changes
} 
```

# mysql - MySQL 在 EMPTY 表上更改列名，需要很长时间

> ID：14779904
> 
> 赞同：4
> 
> 时间：2013-02-08T19:25:05.967
> 
> 标签：mysql, performance

运行本地 Mysql 实例。在我的数据库中，我拼错了一个列名（stret to street）。所以我写了一个查询：

```
alter table address change Stret Street VARCHAR(20); 
```

该表刚刚创建并包含零条记录。我知道有很多线程在问为什么要花这么长时间，但他们所有的表都有 100,000 多行。我什么都没有！为什么这个查询需要 1 小时 13 分 15.76 秒？

我知道我可以删除并重新创建表，我只是好奇为什么这个“简单”的更改可能需要这么长时间？

编辑：找出原因。我正在调试一个使用此数据库的程序并在中间停止（不终止程序）以更改列名。一旦我停止了tomcat，一切都会再次发生。所以大概表被锁定了，所以查询被搁置了。我正在使用 InnoDB。谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:30:22.333

在执行此操作之前，您可能希望`TRUNCATE TABLE address`（非常快，但会重置`AUTO_INCREMENT`列计数器）或`OPTIMIZE TABLE address`（稍微慢一些，但不会更改数据）以清除已删除但未从数据库中清除的任何剩余数据.

另一种方法是`CREATE TABLE _address LIKE address`，运行对克隆的更改，然后切换`_address`为`address`使用`RENAME TABLE`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T19:33:01.800

从**[文档中引用](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)**

> 在大多数情况下，ALTER TABLE 会制作原始表的临时副本。MySQL 等待其他正在修改表的操作，然后继续。它将更改合并到副本中，删除原始表并重命名新表。

如果您使用的是 InnoDB，**即使对**单列重命名，它也会执行上述操作，而使用 时`MyISAM`，它不会创建副本并修改表的`frm`文件。这可以解释由于内存限制而对于大型表所花费的时间。

您可以尝试获取**[查询执行计划](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)**。

# dojo - 循环遍历 Dojo DataGrid 并将字段名称值绑定到数组

> ID：14779911
> 
> 赞同：0
> 
> 时间：2013-02-08T19:25:38.113
> 
> 标签：dojo, dojox.grid.datagrid

我有一个要用于文件列表的数据网格，如果该文件已经存在于数据网格（存储）中，我希望它只给他们一个 dijit 对话框，说明该文件已经存在。我的问题是更容易绑定到商店并查看文件是否已经存在或将字段的值存储在数组中并查看文件是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:44:13.727

我不会将值存储在额外的数组中（=开销）。

您可以使用存储访问数据网格的值：

> var store = new some.Datastore();
> 
> store.fetch({onComplete: function(items, request){
> 
> console.log("找到的项目数：" + items.length);
> 
> }});

来源：

[http://dojotoolkit.org/reference-guide/1.8/dojo/data/api/Read.html#fetching-all-the-items-from-the-store](http://dojotoolkit.org/reference-guide/1.8/dojo/data/api/Read.html#fetching-all-the-items-from-the-store)

# android - 如何将标签移动到底部？

> ID：14779919
> 
> 赞同：0
> 
> 时间：2013-02-08T19:26:38.660
> 
> 标签：android, android-tabhost

我尝试使用 TabHost 在 Android 中创建一个带有两个选项卡的选项卡视图。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:android1="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TabHost
        android1:id="@+id/tabhost"
        android1:layout_width="match_parent"
        android1:layout_height="match_parent" >

        <LinearLayout
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:orientation="vertical" >

            <TabWidget
                android1:id="@android:id/tabs"
                android1:layout_width="match_parent"
                android1:layout_height="wrap_content"
                android1:gravity="bottom" >
            </TabWidget>

            <FrameLayout
                android1:id="@android:id/tabcontent"
                android1:layout_width="match_parent"
                android1:layout_height="wrap_content" >

                <LinearLayout
                    android1:id="@+id/privacy_tab"
                    android1:layout_width="match_parent"
                    android1:layout_height="match_parent" >

                    <WebView
                        android1:id="@+id/privacy_web_view"
                        android1:layout_width="match_parent"
                        android1:layout_height="match_parent" />
                </LinearLayout>

                <LinearLayout
                    android1:id="@+id/about_tab"
                    android1:layout_width="match_parent"
                    android1:layout_height="match_parent" >

                    <WebView
                        android1:id="@+id/about_web_view"
                        android1:layout_width="match_parent"
                        android1:layout_height="match_parent" />
                </LinearLayout>
            </FrameLayout>
        </LinearLayout>
    </TabHost>

</LinearLayout> 
```

正如您在上面看到的，它是包含 tabhost 的 xml。但是，我想在布局底部制作标签。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:34:57.490

你在这里发帖之前用谷歌搜索过吗？

请参阅
[Android：底部的](https://stackoverflow.com/questions/2395661/android-tabs-at-the-bottom)
选项卡 或
[如何在 android 的底部设置选项卡栏？](https://stackoverflow.com/questions/5014002/how-to-set-tab-bar-at-the-bottom-in-android)

但是，不要使用底部标签，那不是安卓风格！
[http://developer.android.com/design/patterns/pure-android.html](http://developer.android.com/design/patterns/pure-android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:35:15.820

这

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<TabHost  
   android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <LinearLayout  xmlns:android1="http://schemas.android.com/apk/res/android"
        android1:layout_width="match_parent"
        android1:layout_height="match_parent"
        android1:orientation="vertical" >
        <FrameLayout
            android1:id="@android:id/tabcontent"
            android1:layout_width="match_parent"
            android1:layout_height="wrap_content" >

            <LinearLayout
                android1:id="@+id/privacy_tab"
                android1:layout_width="match_parent"
                android1:layout_height="match_parent" >

                <WebView
                    android1:id="@+id/privacy_web_view"
                    android1:layout_width="match_parent"
                    android1:layout_height="match_parent" />
            </LinearLayout>

            <LinearLayout
                android1:id="@+id/about_tab"
                android1:layout_width="match_parent"
                android1:layout_height="match_parent" >

                <WebView
                    android1:id="@+id/about_web_view"
                    android1:layout_width="match_parent"
                    android1:layout_height="match_parent" />
            </LinearLayout>
        </FrameLayout>
       <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:orientation="horizontal" />
    </LinearLayout>
</TabHost> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:49:45.210

## 在这里，我刚刚回答了类似的问题。使标签粘在底部的唯一方法是伪造它！

首先创建文件名，`footer.xml` 将此代码放入其中。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="78dp"
    android:layout_gravity="bottom"
    android:gravity="bottom"
 android:layout_weight=".15"
    android:orientation="horizontal"
    android:background="@drawable/actionbar_dark_background_tile" >
    <ImageView
        android:id="@+id/lborder"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/overlay" />
    <ImageView
        android:id="@+id/unknown"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/notcolor" />
    <ImageView
        android:id="@+id/open"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/openit"
        />
    <ImageView
        android:id="@+id/color"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/colored" />
        <ImageView
        android:id="@+id/rborder"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/frames"
        android:layout_weight=".14" />

</LinearLayout> 
```

然后创建**header.xml**并将此代码放入其中。：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="@dimen/action_bar_height"
    android:layout_gravity="top"
    android:baselineAligned="true"
    android:orientation="horizontal"
    android:background="@drawable/actionbar_dark_background_tile" >
    <ImageView
        android:id="@+id/contact"
        android:layout_width="37dp"
        android:layout_height="wrap_content"
        android:layout_gravity="start"
        android:layout_weight=".18"
        android:scaleType="fitCenter"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/logo"/>

    <ImageView
        android:id="@+id/share"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="start"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/share" />

    <ImageView
        android:id="@+id/save"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/save" />

    <ImageView
        android:id="@+id/set"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/set" />

    <ImageView
        android:id="@+id/fix"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/light" />

    <ImageView
        android:id="@+id/rotate"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/ic_menu_rotate" />

    <ImageView
        android:id="@+id/stock"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".14"
        android:background="@drawable/action_bar_left_button"
        android:src="@drawable/stock" />

</LinearLayout> 
```

然后在你的`main_activity.xml`里面，把这段代码放进去：-

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="fill_parent"
tools:context=".MainActivity"
android:id="@+id/relt"
android:background="@drawable/background" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="78dp"
    android:id="@+id/down"
    android:layout_alignParentBottom="true" >

    <include
        android:layout_width="fill_parent"
        android:layout_height="78dp"
        layout="@layout/footer" >
    </include>
</LinearLayout>
<ImageView
    android:id="@+id/view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/down"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/inc"
   >  
    </ImageView> 
    <include layout="@layout/header"
        android:id="@+id/inc"
        android:layout_width="fill_parent"
        android:layout_height="50dp"></include> 
```

快乐编码:)

# unix - 包含破折号 (-) 的通配字符串

> ID：14779920
> 
> 赞同：0
> 
> 时间：2013-02-08T19:26:46.263
> 
> 标签：unix

如何查找包含破折号 (-) 的字符串？

假设我想查找所有包含被“-”包围的两位数字的文件。

```
ls -[0-9][0-9]- 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:34:00.000

使用“--”，您可以告诉命令选项已完成，例如

```
rc@virtualdeb:/tmp/a$ touch -- -91- -88-
rc@virtualdeb:/tmp/a$ ls -l
total 0
-rw-r--r-- 1 rc rc 0 Feb  8 20:33 -88-
-rw-r--r-- 1 rc rc 0 Feb  8 20:33 -91-
rc@virtualdeb:/tmp/a$ ls -l -- -*-
-rw-r--r-- 1 rc rc 0 Feb  8 20:33 -88-
-rw-r--r-- 1 rc rc 0 Feb  8 20:33 -91- 
```

# c - 没有从文件中获取令牌？

> ID：14779923
> 
> 赞同：-1
> 
> 时间：2013-02-08T19:26:53.043
> 
> 标签：c

我正在尝试从文件中读取连续的行，并通过指向字符串数组的指针指向它们。但只有第一行按预期输出，之后输出未按预期显示。

```
input.txt:
Hi i am Michel
hello swing
how are you 
```

o/p 是：

```
LINE[1]=Hi i am Michel
st_arr[0]=Hi
st_arr[1]=i
st_arr[2]=am
st_arr[3]=Michel

LINE[2]=hello swing
st_arr[0]=Hi
LINE[3]=how are you 
st_arr[0]=Hi 
```

这是我的代码：

```
main()
{
    int i = 0,j=0,k=0,p=0;
    char lines[10][ 50];
    char words[10];
    char *st_arr[20];
    FILE *fp = fopen("input.txt", "r");
    while (fgets(lines[i], sizeof(lines[i]), fp))
    {
        lines[i][strlen(lines[i])-1] = '\0';
        i = i + 1;
    }
    fclose(fp);
    printf("The value of i=%d\n",i);
    for(j=0;j<i;j++)
    {
        printf("LINE[%d]=%s\n",j+1,lines[j]);
        {
            char *token=strtok(lines," ");
            while(token!=NULL)
            {
                st_arr[p]=malloc(strlen(token)+1);
                strcpy(st_arr[p],token);
                printf("\tst_arr[%d]=%s\n",p,token);
                token=strtok(NULL," ");
                p++;
            }
        }

        bzero(st_arr[j],sizeof(st_arr));
        p=0;

    }
} 
```

有什么我明显遗漏的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:26:13.533

看起来像这条线：

```
bzero(st_arr[j],sizeof(st_arr)); 
```

是超出堆栈的缓冲区溢出，清除部分“行”缓冲区。

更不用说通过 bzero 擦除 st_arr 中的这些分配所造成的内存泄漏：

```
st_arr[p]=malloc(strlen(token)+1); 
```

另一个错误是您在从文件读取的每个字符串之间填充空值，然后您从第一个字符串中读取：

```
 char *token=strtok(lines," "); 
```

这只会标记第一个空值，因此会丢失所有后续字符串。你的意思可能是：

```
 char *token=strtok(lines[j]," "); 
```

# php - SQL：获取两类文章的数量

> ID：14779924
> 
> 赞同：2
> 
> 时间：2013-02-08T19:26:58.620
> 
> 标签：php, mysql

在我的 MySQL 数据库中，我有一个存储文章和类别关联的表，列是 category_id 和 product_id。因此，属于类别#3 和#6 的文章#5 具有行(3,5)(6,5)。

现在我需要获取类别 1 和 6 中的文章数。获取一个类别中的文章数很容易，`SELECT count(category_id) from s_a_c where category_id=1`但是如何扩展此查询以检查是否有两只猫？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:29:53.917

这是一种有两种联接的方法（您要搜索的每个类别都有一个联接）：

```
SELECT COUNT(1)
FROM articles
INNER JOIN s_a_c c1 ON articles.product_id = c1.product_id
    AND c1.category_id = 1
INNER JOIN s_a_c c2 ON articles.product_id = c2.product_id
    AND c2.category_id = 6 
```

这是使用`HAVING`子句的另一种方式。`s_a_c`派生表从类别 1 和 6中提取所有产品，同时具有 ( `COUNT(1) = 2`)。这利用了`{product_id, category_id}`独一无二的事实：

```
SELECT COUNT(1)
FROM
(
    SELECT product_id
    FROM s_a_c
    WHERE category_id IN (1,6)
    GROUP BY product_id
    HAVING COUNT(1) = 2
) x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:31:21.567

您需要按产品对表进行分组，然后过滤符合您所需条件的组（使用`HAVING`子句，该子句在分组*后*评估，而`WHERE`子句在分组*前*评估）：

```
SELECT COUNT(*) FROM (
  SELECT   article_id
  FROM     s_a_c
  WHERE    category_id IN (1,6)
  GROUP BY product_id
  HAVING   COUNT(DISTINCT category_id) = 2
) t 
```

如果`(product_id,category_id)`保证是唯一的（例如，通过`UNIQUE`键强制执行的唯一性约束），您可以使用性能更高`COUNT(*)`的`COUNT(DISTINCT category_id)`.

如果您需要在组过滤器上实现更复杂的逻辑，您可以利用 MySQL 缺乏真正的布尔类型，因此：

```
SELECT   article_id
FROM     s_a_c
WHERE    category_id IN (1,3,6)
GROUP BY product_id
HAVING   SUM(category_id = 1)
     AND SUM(category_id = 6)
     AND NOT SUM(category_id = 3) 
```

请注意，我继续包含一个`WHERE`子句，以便 MySQL 可以使用索引来避免全表扫描。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T19:28:44.130

获取两个类别（一和二）中的所有文章（可能有重复）

```
SELECT count(category_id) from s_a_c where category_id=1 or category_id=2 
```

获取两个类别（一和二）中的所有文章（不重复）

```
SELECT count(category_id) FROM s_a_c WHERE category_id=1 or category_id=2 GROUP BY article_id 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T19:28:48.167

编辑：误读 - 如果存在于任一或类别中，则此原始查询确实存在：

`SELECT COUNT(*) FROM s_a_c WHERE category_id IN (1,6);`

两个类别中存在的正确查询：

`SELECT COUNT(*) FROM s_a_c WHERE category_id = 1 AND category_id 6;`

TBH，这一切都还为时过早，没有看到`s_a_c`.

# scheme - 列表/复合数据

> ID：14779925
> 
> 赞同：1
> 
> 时间：2013-02-08T19:27:00.327
> 
> 标签：scheme, racket

您将如何开发一个函数`one`来使用符号列表并返回相同的列表但每个实例都`'cat`加倍？

所以例如

```
 (one (cons 'animal(cons 'table (cons 'cat (cons 'bread
    empty))))) 
```

我会得到（我想）

```
 (cons 'animal (cons 'table (cons 'cat (cons 'cat (cons 'bread 
    empty))))) 
```

作为回报。我对这本书感到沮丧并试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:40:27.947

这是在构建另一个列表时如何递归遍历列表的最简单示例之一。你应该自己写，因为你正在学习。我将帮助您了解解决方案的一般结构，填写空白：

```
(define (copy lst)
  (if <???>                 ; is the list empty?
      <???>                 ; if so, return the empty list
      (cons <???>           ; otherwise `cons` the first element of the list (*)
            (copy <???>)))) ; and advance the recursion over the rest of the list 
```

(*) ...但如果元素是`'cat`，则 cons它的*两个*副本。

使用问题中的列表对其进行测试：

```
(copy (cons 'one (cons 'animal (cons 'table (cons 'cat (cons 'bread empty)))))) 
```

...这恰好等同于：

```
(copy '(one animal table cat bread)) 
```

无论哪种方式，结果都是具有相同元素的输入列表的副本（每个`'cat`找到的两个副本），但位于新的 cons-cells 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T20:14:20.167

Leppie（他告诉我“去玩你的流量中的突变；p”以回应我上面的`set-car!`/`set-cdr!`评论 ;-)）希望我写一个基于折叠的解决方案，所以就在这里！

```
(define (fun lst)
  (fold-right (lambda (e r)
                (case e
                 ((cat) (cons* e e r))
                 (else (cons e r))))
              '() lst)) 
```

# iphone - ios在用户之间共享数据

> ID：14779936
> 
> 赞同：0
> 
> 时间：2013-02-08T19:27:33.427
> 
> 标签：iphone, ios, data-sharing

在同一应用程序的用户之间共享数据的最佳方式是什么 - 例如只有 2 个特定用户可以查看和编辑的项目共享列表。我的问题是关于数据传输部分 - 我可以使用任何服务或框架吗？我想避免自己创建服务器部分。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:39:21.760

如果您不想处理自己的服务器端实现，则可以使用 PAS（平台即服务）提供商之一，例如 StackMob、Parse 或 Azure。它们都通过一个非常简单的 iOS API 提供持久存储。如果您的需求很简单，您可能可以免费使用 StackMob。Azure 或 Amazon 之类的东西会为您提供更多功能和灵活性，但在初始试用期结束后会花钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:36:02.523

目前没有这样的事情。就 API 功能而言，您可以获得的最接近的是 Game Center 中的回合制比赛，但比赛数据只能轮流操作，因此该 API 很可能不适合您。考虑到谷歌、亚马逊和其他公司提供的所有优惠，运行您自己的服务器一点也不可怕，而且会给您带来更大的灵活性。

# php - mongodb错误的php驱动程序

> ID：14779941
> 
> 赞同：0
> 
> 时间：2013-02-08T19:27:52.457
> 
> 标签：php, mongodb, xampp

我正在尝试按照此[链接](http://docs.mongodb.org/ecosystem/drivers/php/)中的说明安装 mongodb 的 php 驱动程序。我已经从 gitHub 下载了驱动程序，我尝试了所有 5.3 版本，我收到了这个错误：（`%1 is not a valid win32 application`在exampp 上启动 apache 时弹出错误）。我已在 ini 文件中添加了所需的行。这是我的php版本的屏幕截图：![在此处输入图像描述](../Images/9c8af4c9c4056e46005f843f9ac74b75.png)

请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:31:16.470

看来您应该在`-5.3-vc9.dll`最后安装 dll。这应该重命名为 php_mongo.dll 并添加到扩展文件夹中。

# ruby-on-rails - attr_accessible 中的模型

> ID：14779943
> 
> 赞同：0
> 
> 时间：2013-02-08T19:27:58.073
> 
> 标签：ruby-on-rails, rails-activerecord

Rails 中有很多关于模型之间关系的示例，但它们似乎都忽略了模型的 attr_accessible 部分。

我正在寻找一些关于 attr_accessible 的最佳实践，但我发现了相互矛盾的建议。我可以/应该：

-- 把外键放在 attr_accessible 里？

```
Class Post
  attr_accessible :name, :user_id

  belongs_to :user
end
Class User
  attr_accessible :first, :last

  has_many :posts
end 
```

-- 将完整的模型放在 attr_accessible 中？

```
Class Post
  attr_accessible :name, :user

  belongs_to :user
end
Class User
  attr_accessible :first, :last

  has_many :posts
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:09:54.890

与 Kaeros 所说的相反，我实际上建议不要允许外键字段可批量分配。原因是您在添加帖子时为某人提供了一种简单的方法来发送不同的 user_id。这可能就是您找到的示例不包括外键的原因。

解决此问题的最佳方法是在为用户添加新帖子时使用集合构建器方法：

```
user.posts.create(params[:post]) 
```

如果您选择不遵循该建议，那么这实际上取决于您如何批量分配这些值。如果您的哈希包含`:user_id`，那么您应该使其可访问，如果它包含`:user`，则使用该哈希。如果你不确定，你总是可以让两者都可以访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:39:39.053

在 attr_accessible 中使用外键似乎是正常的，也是我的默认选项。你可以[在这里](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)看到api指南也使用了这种形式。

将模型名称添加到 attr_accessible 也对我有用。

我更喜欢第一个选项，所以我很容易知道我正在处理外键

# java - 从数组加载地图（用于游戏）的问题

> ID：14779946
> 
> 赞同：0
> 
> 时间：2013-02-08T19:28:24.830
> 
> 标签：java, android, arrays, graphics

我正在使用文本文件来存储地图，但加载它们给我带来了一些麻烦。这些物体被挤在一起，我不知道为什么。这是“地图”文件（level_1_1.map）：

```
"level_1_1.png", ?600:400?;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0; 
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 ,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1;
1,1,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1;
1,1,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1;
1,1,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1;
1,1,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1;
1,1,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1;
0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0;
0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0; 
```

这是我加载它的类：

```
package org.awesome.Models;

public class Map{
int playerWidth = 50;
int playerHeight = 50;
int platformWidth = 20;
int platformHeight = 20;

int playerX, playerY;
List<Platform> platforms = new ArrayList<Platform>();
Bitmap bg;
int backgroundX, backgroundY;

private Context context;
private SurfaceView game;
public Map(Context context, SurfaceView game){
    this.context = context;
    this.game = game;
}

public void update(){

}

public void draw(Canvas canvas){

    for(Platform p : platforms)
        p.draw(canvas);
}

public boolean loadMap(String filename){
    //load the file into a string
    byte[] buffer = null;
    try {
        AssetManager am = context.getAssets();
        InputStream fis = am.open(filename);
        buffer = new byte[fis.available()];
        fis.read(buffer, 0, fis.available());
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    }
    String s = new String(buffer);
    //seperate the map image, the dimensions and the mapping itself
    s = s.substring(s.indexOf("\"") + 1);
    String bgname = s.substring(0, s.indexOf("\""));    
    bg = BitmapFactory.decodeFile(bgname);
    s = s.substring(s.indexOf(",") + 1);
    s = s.substring(s.indexOf("?") + 1);
    String dimensions = s.substring(0, s.indexOf("?"));
    //actual dimensions
    int width = Integer.parseInt(dimensions.substring(0, s.indexOf(":")));
    int height = Integer.parseInt(dimensions.substring(s.indexOf(":") + 1));

    s = s.substring(s.indexOf(";") + 1);
    String[] mapRows = s.split(";");
    //the actual mapping of things
    String[][] map = new String[mapRows.length][];
    for(int i = 0; i < mapRows.length; i++){
        map[i] = mapRows[i].split(",");
    }

    //now create the stuff
    for(int r = 0; r < map.length; r++){
        for(int c = 0; c < map[r].length; c++){
            map[r][c] = map[r][c].trim();
            int currentDigit = Integer.parseInt(map[r][c]);
            int x = c * 10;
            int y = r * 10;

            //Will create the object at the top left corner of the !!RECTANGULAR!! map representation.
            if(currentDigit == 0){

            }else if(currentDigit == 1 && isTopLeft(1, r, c, map)){
                Bitmap texture = BitmapFactory.decodeResource(game.getResources(), org.awesome.AndroidGame.R.drawable.brown_block_reg);
                Log.w("making platform", "" + x +  ", " + y);
                platforms.add(new Platform(x, y, texture));
            }else if(currentDigit == 2 && isTopLeft(2, r, c, map)){
                playerX = x;
                playerY = y;
            }else if(currentDigit == 3){

            }else if(currentDigit == 4){

            }else if(currentDigit == 5){

            }else if(currentDigit == 6){

            }else if(currentDigit == 7){

            }else if(currentDigit == 8){

            }else if(currentDigit == 9){

            }
        }
    }

    return true;
}

private boolean isTopLeft(int item, int r, int c, String[][] map){
    //width and height measured in # of map "steps" (10px ea)
    int width = 1;
    int height = 1;

    if(item == 0){

    }else if(item == 1){
        width = platformWidth/10;
        height = platformHeight/10;
    }else if(item == 2){
        width = playerWidth/10;
        height = playerHeight/10;
    }else if(item == 3){

    }else if(item == 4){

    }else if(item == 5){

    }else if(item == 6){

    }else if(item == 7){

    }else if(item == 8){

    }else if(item == 9){

    }

    //counts backwards and upwards to see how many blocks of the same type preceed it.
    int curR = r - 1;
    int prevWidthCount = 0;
    int prevHeightCount = 0;
    while(curR >= 0 && map[curR][c].equals("" + item)){
        curR -= 1;
        prevWidthCount += 1;
    }
    int curC = c - 1;
    while(curC >= 0 && map[r][curC].equals("" + item)){
        curC -= 1;
        prevHeightCount += 1;
    }

    if(prevWidthCount % width == 0 && prevHeightCount % height == 0){
        return true; 
    }

    return false;

}

public int countObjectsLeft(String[][] map, int r, int c){
    int counter = 0;
    while(c >= 0){
        if(isTopLeft(Integer.parseInt(map[r][c]), r, c, map))
            counter++;
        c -= 1;
    }
    return counter;
}
public int countObjectsUp(String[][] map, int r, int c){
    int counter = 0;
    while(r >= 0){
        if(isTopLeft(Integer.parseInt(map[r][c]), r, c, map))
            counter++;
        r -= 1;
    }
    return counter;
}

} 
```

这是结果（管道字符是每个块的结束位置），球是玩家（当前未从文件加载）。![在此处输入图像描述](../Images/de871b8afb5c576b54ccdfd875268ba8.png)

我坚持这一点，似乎块应该适合 (0, 0) 到 (19, 19) 和 (20, 20) 到 (39, 39)。对此的任何帮助将不胜感激:D:D

编辑1：

这是完整的平台类：

```
package org.awesome.Models;

public class Platform {
private int x, y;
private Bitmap texture;
public Platform(int x, int y, Bitmap texture){
    this.x = x;
    this.y = y;
    this.texture = texture;

}

public void draw(Canvas canvas) {
    Paint paint = new Paint();
    paint.setColor(Color.WHITE);
      canvas.drawBitmap(texture, x, y, null);
      canvas.drawText("|", x + texture.getWidth(), y - 2, paint);
  }

public int getX(){
    return x;
}

public int getY(){
    return y;
}

public Bitmap getBitmap(){
    return texture;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:50:10.890

在您的代码中，我看到您正在使用以像素为单位的尺寸，而 BitmapFactory.decodeResource 执行位图的缩放以适应当前设备的屏幕密度，这会使绘制的图像更大。如果要使用像素，则应使用选项禁用 decodeResource 中的缩放（将 inScaled 设置为 false 就足够了）版本：

```
decodeResource(Resources res, int id, BitmapFactory.Options opts) 
```

或者把你的drawables放进去

```
drawable-nodpi 
```

文件夹，什么会在加载过程中防止缩放

# linux - 确保安全数据保留在内存中

> ID：14779947
> 
> 赞同：0
> 
> 时间：2013-02-08T19:28:27.017
> 
> 标签：linux, security

在 Linux 系统上，您将如何构建程序（C/C++/Python/Java 等）以确保一段数据保留在易失性内存中并且永远不会缓存到磁盘或交换？

我特别关注安全应用程序，您希望确保手动输入的密码或加密密钥在系统断电时被遗忘且不可恢复，但仍可访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:31:13.233

看看[mlock(2)/munlock(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mlock.2.html)

# css - 通过绝对定位的内部元素或垂直对齐底部调整容器宽度

> ID：14779949
> 
> 赞同：0
> 
> 时间：2013-02-08T19:28:31.037
> 
> 标签：css, positioning, vertical-alignment, absolute

也是一个[小提琴](http://jsfiddle.net/KA2F5/1/)。

如何获取绝对元素的容器，根据其中绝对定位元素的宽度自动调整其宽度。

或者，可以删除定位，但不可能让元素（img）垂直对齐到底部。

```
ul {}
ul li {min-width:120px;height:200px;border:1px solid;float:left;margin:5px;position:relative;}
ul li img {position:absolute;bottom:0;display:block;}
ul li a {}

<ul>  

<li><a href="#">Andrew</a>
    <span><img src=http://ecx.images-amazon.com/images/I/51OcPyDBQ7L._SL160_.jpg></span> </li> 
 <li><a href="#">Splog</a>
     <span><img src=http://ecx.images-amazon.com/images/I/51uhWLjlvGL._SL160_.jpg></span></li> 

</ul> 
```

下图。

![在此处输入图像描述](../Images/80c04cd577f024017b11867eb1995a4e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:43:00.253

```
<!doctype html>
<html>
    <head>
        <title></title>
    </head>
    <body>
        <style>
            ul {}
            li {min-width:120px;height:200px;border:1px solid;float:left;margin:5px;position:relative;display: table;}
            li img {bottom:0;display:block;}
            li a {}
            li span {display: table-cell; vertical-align: bottom;}
        </style>

        <ul>  
            <li><a href="#">Andrew</a>
                <span><img src=http://ecx.images-amazon.com/images/I/51OcPyDBQ7L._SL160_.jpg> </span> </li>
             <li><a href="#">Splog</a>
                 <span><img src=http://ecx.images-amazon.com/images/I/51uhWLjlvGL._SL160_.jpg> </span></li>

        </ul>
    </body>
</html> 
```

神奇之处在于`display: table`,`display: table-cell`和`vertical-align: bottom`。您还必须从图像中删除绝对定位。

另请注意，我将所有出现的情况都更改`ul li`为`li`? 是的，那是因为所有`li`的s都在`ul`s里面！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:46:32.660

如果您在加载图像后运行此 Javascript 代码 (jQuery)，则可以解决问题：

[http://jsfiddle.net/turiyag/KA2F5/5/](http://jsfiddle.net/turiyag/KA2F5/5/)

```
$.each($("ul li"),function(idx,item) {
    var maxWidth = 0;
    var liElement = $(this);
    $.each(liElement.find("img"),function(idx2,imgelem) {
        if($(this).width() > maxWidth) maxWidth = $(this).width();
        liElement.css("width",maxWidth + "px");
    });

}); 
```

# css - 您如何使用 Bootstrap 将表单控件居中？

> ID：14779951
> 
> 赞同：2
> 
> 时间：2013-02-08T19:28:43.173
> 
> 标签：css, twitter-bootstrap

我不知道如何在 Bootstrap 中居中表单控件。我尝试将所有内容都包装在 .center div 中，但这会将某些内容居中并搞砸其他内容。

```
.center
{
  text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-25T10:11:21.067

您可以使用 text-center 类

```
<p class="text-center">Center aligned text.</p> 
```

其他文本对齐类是

```
<p class="text-left">Left aligned text.</p>
<p class="text-center">Center aligned text.</p>
<p class="text-right">Right aligned text.</p>
<p class="text-justify">Justified text.</p>
<p class="text-nowrap">No wrap text.</p> 
```

有关详细信息，请访问[http://getbootstrap.com/css/](http://getbootstrap.com/css/)

# python - 在类方法中，获取对象名称

> ID：14779956
> 
> 赞同：1
> 
> 时间：2013-02-08T19:28:59.220
> 
> 标签：python, class, object

让我们看看我的课（看看？？？？？？）

```
class MyInt(object):
    def set_value(_value):
        if type(_value)!=int:
            type_name = type(_value).__name__)
            raise Exception("value of %s cannot be %s" % (????,type_name))
        self.value = _value 
```

和 ...

```
x = MyInt()
x.set_value(1) 
```

没关系，而且...

```
x.set_value("A") 
```

我需要这个回复（最好的描述）：

```
value of x cannot be str 
```

我怎样才能得到“x”（在??????），或将变量名作为参数传递（隐式）

tnx

# c# - 即使我坐着不动，Kinect 也能识别过多的向右滑动手势

> ID：14779958
> 
> 赞同：0
> 
> 时间：2013-02-08T19:29:19.640
> 
> 标签：c#, kinect, swipe, gestures

这是来自我的主窗口：

```
foreach (Joint joint in skeleton.Joints)
{
    if (joint.TrackingState != JointTrackingState.Tracked)
        continue;

    if ((joint.JointType == JointType.HandRight) || (joint.JointType == JointType.HandLeft))
    {
        swipeGestureRecognizer.Add(joint.Position, kinectSensor, joint.JointType);
    }            
} 
```

我的手势是这样写的：

```
// Swipe to right
if (ScanPositions((p1, p2) => Math.Abs(p2.Y - p1.Y) < SwipeMaximalHeight, // Height
            (p1, p2) => p2.X - p1.X > -0.05f, // Progression to right
            (p1, p2) => Math.Abs(p2.X - p1.X) > SwipeMinimalLength, // Length
            SwipeMininalDuration, SwipeMaximalDuration)) // Duration
{
    if (jointul == JointType.HandLeft)
    {
        SetClothByGesture(1, 0);
        RaiseGestureDetected("SwipeToRight");
    }
    return;
}

// Swipe to left
if (ScanPositions((p1, p2) => Math.Abs(p2.Y - p1.Y) < SwipeMaximalHeight,  // Height
            (p1, p2) => p2.X - p1.X < 0.05f, // Progression to right
            (p1, p2) => Math.Abs(p2.X - p1.X) > SwipeMinimalLength, // Length
            SwipeMininalDuration, SwipeMaximalDuration))// Duration
{
    if (jointul == JointType.HandRight)
    {
        SetClothByGesture(-1, 0);
        RaiseGestureDetected("SwipeToLeft");
    }
    return;
} 
```

我的逻辑是，如果你用右手向左滑动，它会做一些事情，如果你用左手向右滑动，它会做其他事情。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:03:27.977

修改了代码，而不是滑动，如果右手或左手比头部更远 0.45f，那么它会执行命令。

# php - 显示从 php 程序到数据库的插入信息，然后显示插入的信息

> ID：14779961
> 
> 赞同：0
> 
> 时间：2013-02-08T19:29:29.093
> 
> 标签：php, html, mysql

在提交数据并插入数据库后，我试图显示用户从 php 程序输入的信息。当我运行它时，我看不到任何结果。我只是得到一个空白页。我在我的代码中找不到错误，希望你们能帮我找到它，这样我就可以修复它并继续前进。这只是我的代码的一部分，我想在我的数据库中插入一些信息，然后显示我插入的内容......

```
if ( $valid ) { 
    $lines = file('/home/user/Documents/file.txt');
    $uid = trim($lines[0]);
    $pw = trim($lines[1]);
    $dbserver = trim($lines[2]);
    $dbname = trim($lines[3]);

    //Connecting to mysql
    $link = mysqli_connect($dbserver, $uid, $pw, $dbname);
    or die('Could not connect: ' . mysql_error());

    //Our SQL Query
    $firstname = $_POST['firstname'];
    $lastname = $_POST['lastname'];
    $organization = $_POST['organization'];
    $emailaddress = $_POST['emailaddress'];
    $phonenumber = $_POST['phonenumber'];
    $sql_query = "INSERT INTO table VALUES ('$firstname','$lastname','$organization','$emailaddress','$phonenumber')";

        //Run our sql query
    $result = mysqli_query($link, $sql_query) or die('query failed'. mysql_error());

    // Get all records now in DB
    $sql_query = "SELECT * FROM table";
    //Run our sql query
    $result = mysqli_query($link, $sql_query) or die('query failed'. mysql_error());

    //iterate through result printing each record
    echo "<br>Names in DB: <br>";
    while($row = mysqli_fetch_assoc($result)) {
    echo $row['firstname'];
    echo $row['lastname'];
    echo $row['organization']; 
    echo $row['emailaddress'];
    echo $row['phonenumber'];
    echo "<br>";
    }

    // Free resultset (optional)
    mysqli_free_result($result);

    //Close the MySQL Link
    mysqli_close($link);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:48:24.390

更改 $sql_query =`"INSERT INTO table VALUES $firstname','$lastname','$organization','$emailaddress','$phonenumber')";`

至

```
$sql_query = "INSERT INTO table VALUES ($firstname','$lastname','$organization','$emailaddress','$phonenumber')"; 
```

此外，您编写的代码非常不安全，很容易受到 SQL 注入的攻击。

花一些时间学习[MySQLi](http://www.php.net/manual/en/class.pdo.php)或[PDO](http://www.php.net/manual/en/class.pdo.php) insead of Mysql_* 函数。下面是一个使用 mysqli 参数化查询的基本查询：

$query = $mysqli->prepare("SELECT COLUMN_LIST FROM TABLE WHERE COLUMN = ?"); $query->bind_param('s',$UNSAFE_VARIABLE); $查询->执行（）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:48:27.383

如果您坚持使用过时的 mysql 函数，那么您正在寻找的是[mysqli_insertid](http://www.php.net/manual/en/mysqli.insert-id.php) 我相信有一个类似的函数。

# for-loop - 批处理文件修改导出的十六进制注册表值中的一个字符

> ID：14779962
> 
> 赞同：1
> 
> 时间：2013-02-08T19:29:34.977
> 
> 标签：for-loop, batch-file, registry, hex, winpe

我正在寻找一种方法来修改作为导出注册表值的 .reg（或 .txt）文件。我已经可以导出注册表文件，我只需要一种方法来更改大约是该十六进制值中间的一个字符。下面是导出的注册表值的一部分，**粗体字**是我想要改变的。

> "F"=十六进制：02,00,01,00,00,00,00,00,b4,42,39,6f,86,fd,cd,01,00,00,00,00,00,00, 00,\
> 00,d7,2f,f1,d8,0e,e9,cd,01,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00 ,00,\
> f4,01,00,00,01,02,00,00, **11** ,02,00,00,00,00,00,00,00,00,2e,00,01,00,00, 00,00,\
> 00,00,00,88,52,35,00

我需要将**11**更改为**10**，然后将其保存到 reg 文件中，然后将其导入。似乎**FOR**命令可能是我需要的，但我已经阅读了**FOR**命令并且仍然对它感到困惑。

**更多信息：** 这将在 WinPE 3.0 环境中执行 此十六进制值因 PC 而异，但 11 将始终位于同一位置。

**更好** 的是：除了批处理/cmd 文件之外，还有什么东西可以用来修改加载的离线注册表配置单元来完成同样的事情吗？

在此先感谢
〜迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:02:42.957

首先将它放入一个变量中（我将使用X）

```
set x="F"=hex:02,00,01,00,00,00,00,00,b4,42,39,6f,86,fd,cd,01,00,00,00,00,00,00,00,\00,d7,2f,f1,d8,0e,e9,cd,01,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\f4,01,00,00,01,02,00,00,11,02,00,00,00,00,00,00,00,00,2e,00,01,00,00,00,00,\00,00,00,88,52,35,00 
```

然后你可以用 10 替换 11

```
set x=%x:11=10% 
```

注意：如果脚本中有两个 11，请不要使用此方法，因为它会将它们全部替换。

如果有更多的 11，但 11 在同一个确切位置（如果该行有 58 个字符，那么下一次必须有 58 个字符）所以你会计算到 11 的字符并取它X 变量并创建另一个名为 1 的变量，其内容如下所示：

```
set 1=%x:~0,178% 
```

然后找出从 11 到末尾有多少个字符，并将变量命名为 2 并添加 2，这样你最终会跳过 11：

```
set 2=%x:~180,70% 
```

然后在这种情况下，您只需在 10 之间输入新值，因此它将是：

```
set X=%1%10%2% 
```

然后你在 X 变量中有新的输出！

# matlab - Matlab AWGN 噪声表达式

> ID：14779968
> 
> 赞同：1
> 
> 时间：2013-02-08T19:30:05.600
> 
> 标签：matlab

我正在尝试将 awgn 噪声添加到信号中。信号为 s，接收信号为 y 通过以下方式获得：

```
 y = s+ n; 
```

我希望 n 是加性高斯白噪声。有人可以告诉我 AWGN 的确切数学表达式吗？我不想使用 matlab 的内置 AWGN 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:20:05.320

AWGN 基本上说噪声被添加到通道中，并且噪声是正态分布的。

您正在寻找的`n`是一个正态分布的随机变量。没有数学表达式可以告诉您`n`（尽管有一个[数学表达式](http://en.wikipedia.org/wiki/Normal_distribution)可以告诉您不同`n`值应该出现的频率，但该表达式是 PDF 或概率分布函数）

Matlab中`randn`的作用是从正态分布中生成一个随机数。

如果您真的想了解发生了什么，您应该研究如何在具有不同分布的计算机中生成“随机”数字，但这可能比您需要的更深。

我建议只使用`randn`Matlab 中的函数并阅读文档以了解如何更改分布的均值和标准差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:36:01.423

> 有人可以告诉我 AWGN 的确切数学表达式吗？

[`randn`](http://www.mathworks.co.uk/help/matlab/ref/randn.html).

> 我不想使用 matlab 的内置 AWGN 功能。

为什么不？

# algorithm - 去除子集的博弈算法 [硬件/研究]

> ID：14779975
> 
> 赞同：3
> 
> 时间：2013-02-08T19:30:27.187
> 
> 标签：algorithm, bit-manipulation

我们遇到了一个问题，我将其简化为以下内容：给您一个全为二进制数（例如 11111）和一组相同长度的二进制数（00101、10000、01100、00100、11100）。有两个玩家 A 和 B。在每一轮，玩家可以从主二进制数 (11111) 中减去任何一个较小的数字，这样 2 的二进制与就是较小的数字。然后下一个玩家可以从结果中减去，依此类推。不能再减去的玩家就输了。例如。

```
 A         B       
 11111     11010   // Now A cannot subtract 
-00101    -10000   // anymore in the next turn. 
-------   ------   // So B wins the game.
 11010     01010
-------   ------ 
```

如果两个玩家都发挥最佳（为他们的胜利做出最佳选择），我必须找出给定二进制数字组合的哪个玩家获胜。

我尝试过 O(n^2) 方法，但有更快的方法吗？

编辑： O(n^2) ：其中 n 是状态数。对于长度为 6 (111111) 的二进制数，可能有 2^6 种状态。所以我的复杂度是 O((2^6)^2)。

编辑：生成所有可能状态的我的代码：

```
void makeAllStates() /* Bottom Up Approach. Starting from 00000 and going to 11111 */
{
    // bool states[i] : True if state[i] is a winning position.
    // bool isWord[i] : True if the given state matches a smaller number. (eg. If the main number has been reduced to 10110 and there is a smaller number 10110, then isWord[i] is true.
    // bool visited[i] : True If the given state has been visited  
    // int statecount : Total number of states
    int temp;
    for(int xx=1;xx<stateCount;xx++)
    {
        for(int yy=1;yy<stateCount;yy++)
        {
            if(xx&yy)
                continue;
            if(!(isWord[xx] || isWord[yy]))
                continue;
            if(!visited[yy])
                continue;
            temp = xx^yy;
            if(isWord[temp])
                continue;
            if(states[temp])
                continue;
            if(isWord[xx] && isWord[yy])
                states[temp] = false;
            else
            {
                if(isWord[xx])
                    states[temp] = !states[yy];
                else
                    states[temp] = !states[xx];
            }
            visited[temp] = true;
            if(temp == stateCount-1 && states[temp])
            {
                return;
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T20:43:38.443

我不知道它是否会帮助你（你告诉过 O(n^2) 方法，但没有说 N 是什么意思）。尝试公平游戏的通用方法（Sprague-Grundy 理论）：

*   游戏中的位置是你的主号
*   找到所有“亏损”的头寸（你不能再减去任何东西的头寸）
*   对于所有“失去”的位置 x ：Grundy 函数 g(x) = 0;
*   然后，如果你想计算位置 y 的 grundy 函数：找到所有位置 x_1...x_k，这样你就可以从位置 y 转向位置 x_i。g(y) = mex(g(x_1),...,g(x_k))。“mex”是“最小排除项”——除 g(x_1),...,g(x_k) 之外的所有最小非负整数。例如，mex(2, 3, 4) = 0，mex(0, 1, 2, 5) = 3，mex(0, 1) = 2，等等。

请注意，您可以递归地考虑每个游戏位置，并且您将考虑位置 x 一次（在计算 g(x) 时），因此该算法~~与可能位置的数量成线性关系。~~与位置之间可能的转数成线性关系，即 O(N*K) 其中 N 是状态数，K 是较小数字集的大小（您可以在游戏中转数）

如果 g(START_POSITION) = 0，则起始位置为输局，第一个玩家输掉（每回合都会导致一个获胜位置）。如果 g(START_POSITION) > 0，则起始位置为获胜位置（存在转向位置 x 使得 g(x) = 0），因此第一个玩家获胜。

抱歉英语不好，希望对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:03:48.110

根据 K.Bulatov 的输入，这是最坏情况下时间复杂度为 O(n^2) 的最终代码。剪枝后，调用次数大大减少。主要功能如下：

```
//state : The state for which grundy number is being queried.
//visited[i] : If the grundy number of the state has already been calculated.
//wordStates[] : an array with all the smaller numbers stored.
//mex() : "minimal excludant" - the smallest non-negative integer not in array
int grundyNum(int state)
{
    if(visited[state])
        return grundy[state];
    int grundArr[wordStates.size()];
    int loc =0;
    visited[state] = true;
    for(int xx =0;xx<wordStates.size();xx++)
    {
        if((state&wordStates[xx]) == wordStates[xx])
        {
            grundArr[loc] = grundyNum(state^wordStates[xx]);
            loc++;
        }
    }
    grundy[state] =  mex(grundArr,loc);
    return grundy[state];
} 
```

只需使用以下内容调用该函数即可获得获胜者：

```
result = grundy(1111111);
winner = result==0?"B":"A"; 
```

# c# - NHibernate——回滚事务并关闭会话会导致抛出 GenericADOException

> ID：14779976
> 
> 赞同：0
> 
> 时间：2013-02-08T19:30:28.757
> 
> 标签：c#, nhibernate, transactions

我显然在这里做错了什么。我不明白为什么 NHibernate 试图在这种情况下提交任何东西。

我提供了一个长度超过 200 个字符的“描述”字段。我有一个名为：

```
Order.ValidateAndThrow(Order);
RuleFor(order => order.Description).Length(0, 200).WithName("Description"); 
```

因为我的描述长度超过 200 个字符——ValidateAndThrow 会抛出异常。

这是处理异常的 catch 块：

```
catch (Exception exception)
{
    Logger.Error(exception);
    NHibernateSessionManager.Instance.RollbackTransaction();
    throw;
}

public void RollbackTransaction()
{
    ITransaction transaction = ContextTransaction;

    try
    {
        if (HasOpenTransaction())
        {
            transaction.Rollback();
        }

        ContextTransaction = null;
    }
    finally
    {
        CloseSession();
    }
}

/// <summary>
/// Flushes anything left in the session and closes the connection.
/// </summary>
public void CloseSession()
{
    ISession session = ContextSession;

    if (session != null && session.IsOpen)
    {
        session.Flush();
        session.Close();
    }

    ContextSession = null;
} 
```

所以，我看到发生的是 transaction.Rollback() 语句成功执行，然后调用 CloseSession()。

在 CloseSession() 内部，执行 session.Flush()。显然，这会导致我的 Order 实体尝试保存到数据库中。不过，我以为我刚刚回滚了我的更改？

然而，调用 SessionClose() 会生成 GenericADOException。内部异常消息读取`"{"String or binary data would be truncated.\r\nThe statement has been terminated."}"`

在这种情况下，我应该如何正确退出我的交易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:36:46.193

根据[这里的文档](http://nhforge.org/doc/nh/en/index.html#manipulatingdata-endingsession)

> 如果您碰巧使用的是 ITransaction API，则无需担心这一步 [刷新会话]。它会在事务提交时隐式执行。

因此，如果您使用的是 NHibernate `ITransaction.Commit()`，则无需刷新。如果事务被回滚，你肯定不想刷新。只要确保你总是关闭会话。

# c# - 如何在文化更改后强制 WPF Toolkit DatePicker 在 UI 中刷新？

> ID：14779981
> 
> 赞同：0
> 
> 时间：2013-02-08T19:30:54.733
> 
> 标签：c#, wpf, xaml, datepicker, wpftoolkit

我正在为使用 .NET 3.5 的应用程序添加本地化。该应用程序使用 MVVM 模式和一个命令来改变文化。除了 DatePicker 控件在我单击它之前不会更改语言之外，一切都运行良好。此时，选定的日期文本将正确更改。在我将月份向前或向后移动一次之前，控件中的下拉日历也不会更改语言。

运行命令以更改文化后，如何强制控件以正确的语言刷新？

我尝试了几件事但没有成功，包括：

*   DatePickerControl.InvalidateVisual()
*   DatePickerControl.UpdateLayout()
*   在 VM 中 SelectedDate 的 CultureChanged 事件上触发 NotifyPropertyChanged
*   DatePickerControl.Dispatcher.Invoke（DispatcherPriority.Render，EmptyDelegate）

**应用程序.xaml.cs**

```
protected override void OnStartup(StartupEventArgs e)
    {
        ApplicationCulture.Instance.CultureChanged += Instance_CultureChanged;
        base.OnStartup(e);
    }

    private void Instance_CultureChanged(object sender, CultureChangedEventArgs e)
    {
        System.Threading.Thread.CurrentThread.CurrentUICulture = e.Culture;
        System.Threading.Thread.CurrentThread.CurrentCulture = e.Culture;
    } 
```

**看法**

```
<UserControl x:Class="ManageAppointmentsView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:toolkit="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit">
<StackPanel>
    <TextBlock Margin="5" FontSize="15" Text="{Binding LocalizedResources.Resource.Date}" />

    <toolkit:DatePicker SelectedDate="{Binding SelectedDate}" SelectedDateFormat="Long" FontSize="15" VerticalContentAlignment="Center" 
                                DisplayDateStart="{Binding StartDate}" CalendarStyle="{StaticResource CalendarStyle}" x:Name="DatePickerControl" />
</StackPanel>
</UserControl> 
```

**视图模型命令**

```
ChangeLanguageCommand = new SimpleCommand
                                    {
                                        ExecuteDelegate = x =>
                                                              {
                                                                  var newCulture = x == null
                                                                                       ? "en-US"
                                                                                       : x.ToString();

                                                                  ApplicationCulture.Instance.CurrentCulture =
                                                                      new CultureInfo(newCulture);
                                                              }
                                    }; 
```

**应用文化**

```
public class ApplicationCulture : INotifyCultureChanged
{
    private ApplicationCulture() { }

    private static ApplicationCulture _instance;
    public static ApplicationCulture Instance
    {
        get
        {
            if (_instance == null)
                _instance = new ApplicationCulture();

            return _instance;
        }
    }

    private CultureInfo _currentCulture = CultureInfo.InvariantCulture;
    public CultureInfo CurrentCulture
    {
        get { return _currentCulture; }
        set
        {
            if (!CultureInfo.Equals(value, _currentCulture))
            {
                _currentCulture = value;
                NotifyCultureChanged(value);
            }
        }
    }

    public event EventHandler<CultureChangedEventArgs> CultureChanged;
    private void NotifyCultureChanged(CultureInfo culture)
    {
        if (CultureChanged != null)
            CultureChanged(this, new CultureChangedEventArgs(culture));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:59:37.457

在这种情况下，解决方案可能是改变用户交互模式。在分页应用程序中，我会切换到单独的页面以选择语言，并在更改时切换回原始页面。因此，页面将被重新初始化，包括所有本地化但静态的资源。在非分页应用程序中，您可以使用对话框来更改 UI 语言，同时关闭并重新打开主窗口。

在这两种情况下，技巧都是在更改语言之前和之后保留 ViewModel 实例，以便在重新加载本地化资源时保留视图状态和输入的数据。

# javascript - Javascript 类中全局变量的范围

> ID：14779982
> 
> 赞同：0
> 
> 时间：2013-02-08T19:30:56.993
> 
> 标签：javascript, jquery, pass-by-reference, pass-by-value

我有一个自定义 Javascript 对象，如下所示：

```
var CustomClass = function(settings) {

this.var_1 = false;
this.var_2 = null;
this.var_3 = 0;

}

CustomClass.prototype.method_1 = function(){

  var reader = new FileReader();
reader.onload = (function(cropWidget) {
      this.var_1 = true; 
    });
}

CustomClass.prototype.method_2 = function(){

console.log(this.var_1); // logs 'false' onto the console  
if(this.var_1)
 { // proceed further and do something
 }
} 
```

CustomObject 被实例化：

```
$(document).ready(function{;  
  var customObj = new CustomClass({/*json values*/});
}); 
```

然后，另一个 DOM 事件将调用 method_1，例如：

```
$('#element1').click(function(){
   customObj.method_1(); // this is where var_1 is being set to true
}); 
```

当另一个元素在 DOM**中调用 method_2() 时，就会出现问题，如下所示：**

```
$('#element2').click(function(){
  customObj.method_2();
}); 
```

它**检查 var_1 的值，正如您所记得****的，当 customObj 调用 method_1 时**该值已设置为 true

 **this.var_1 是假的，而不是应有的真。这是否意味着 var_1 的范围仅在 method_1() 的范围内设置为 true 并且仍然保留它的旧值？IMO Javascript 是通过引用传递的，因此变量值应该在其原始位置设置为 true。

有人可以解释我哪里出错了，我可以如何设置 var_1 的值，以便它在 method_2 中也保留它的新值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T20:44:31.713

问题是您设置`var_1`为 true 的范围不是您想要的：

```
CustomClass.prototype.method_1 = function(){

  var reader = new FileReader();
  reader.onload = function(cropWidget) {
    this.var_1 = true;
  };
} 
```

您在回调中设置`var_`为，并且回调**中**`true`的值与`this`中的不同。**`method_1`**

 **你可以使用`self = this`成语来解决这个问题：

```
CustomClass.prototype.method_1 = function(){
  // "this" here refers to the CustomClass instance,
  // so let's store it in "self" so we can use it in the callback
  var self = this; 

  var reader = new FileReader();

  reader.onload = function(cropWidget) {
    // "this" here will not be the CustomClass instance, 
    // so we refer to the "self" variable from above.
    self.var_1 = true;
  };
} 
```

这应该可以解决您的问题，尽管仍然存在潜在的时间问题：如果在触发其事件`method_2`之前调用，则不会设置为.`FileReader``onload``var_1``true`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T19:43:29.420

> this.var_1 是假的，而不是应有的真。

这可能是因为您没有引用同一个对象。您的事件处理程序`function(){ var customObj = new CustomClass(…); }`创建一个实例并将其分配给一个*局部变量*。一旦函数运行，它将被垃圾收集。

> IMO javascript 是通过引用传递的，因此变量值应该在其原始位置设置为 true。

不，javascript 始终是按值传递的。然而，当您传递对象时，您实际上传递的是引用该对象的值，因此会有很多变量引用同一个“共享”对象。****

# iis-7 - 将 Crystal Reports XI 与经典 asp 一起使用

> ID：14779990
> 
> 赞同：0
> 
> 时间：2013-02-08T19:31:28.867
> 
> 标签：iis-7, asp-classic, crystal-reports-xi

我正在尝试使用 Crystal Reports XI 在经典 ASP 中查看/编辑报表。我在这一行遇到以下错误：

```
Set session ("oApp") = Server.CreateObject("CrystalRuntime.Application") 
```

错误：

> 服务器对象错误“ASP 0177：800401f3”
> 
> Server.CreateObject 失败

我浏览了网上找到的所有解决方案，但找不到解决方案。

我正在使用 IIS7。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:50:51.443

有许多必须注册的 DLL。最简单的方法是从 SAP（Crystal Reports 的制造商）安装运行时库。您可以在 SAP 网站上找到它们。没有确切的地址给你，因为它们不容易找到。如果我找到它，我会更新我的答案。

此外，除非您安装了多个版本并且想要使用低于最新版本的版本，否则不需要版本号。否则 Server.CreateObject("CrystalRuntime.Application") 将自动使用安装的最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T09:19:30.017

您将需要注册 DLL，但是手动注册这些 DLL 很复杂，因为某些 DLL 具有依赖关系，并且您必须按特定顺序注册它们。

而是安装运行时库，以下链接包含有关如何获取旧版本 Crystal Reports 和 Xcelsius 的运行时库的链接

[http://scn.sap.com/docs/DOC-27613](http://scn.sap.com/docs/DOC-27613)

# asp.net - 为什么gridview中的控件（在用户控件中）在回发后不保留它们的属性值？

> ID：14779991
> 
> 赞同：0
> 
> 时间：2013-02-08T19:31:38.303
> 
> 标签：asp.net, user-controls

我有一个页面，其中包含 5 个相同类型的用户控件。每个用户控件都有一个 gridview 和几个按钮。

我不明白为什么用户控件上的控件不能保留其价值。

# 编辑

下面是我如何在用户控件中填充 gridview。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var list = new List<CKListByDprtment>
        {
            new CKListByDprtment { ID = 1, TaskName = "New laptop needed", 
            CompletedBy = "My Boss", HMReq = true },
            new CKListByDprtment { ID = 2, TaskName = "New Workstation needed",
            CompletedBy = "My Boss", HMReq = false }
        };

        gvCKList.DataSource = list;
        gvCKList.DataBind();        

    }
    #endregion

    #region GridView Validation
    protected void cvValidateGrid_ServerValidate(object sender, ServerValidateEventArgs args)
    {
        ValidateGrid();
    }

    private void ValidateGrid()
    {
        foreach (GridViewRow gvRow in gvCKList.Rows)
        {
            CheckBox ckHMreq = gvRow.Cells[0].FindControl("ckHMreq") as CheckBox;
        }
    } 
```

我试图在主 aspx 页面上添加一个复选框。当页面回发时，checked 能够保留其价值。我也在用户控件上尝试过，但不在gridview内部。回发时，复选框保留其值。

看起来只有在网格视图内部，控件在回发后会丢失其值。我首先在 aspx 页面上添加了**ViewStateMode = "Enabled"**，然后是在 usercontrol 上，最后是在 gridview 本身上，但没有成功。

任何原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:09:01.883

在我看来，对于每一个`PostBack`你打电话的人`DataBind()`。你应该只调用`DataBind()`if `Page.IsPostBack`equals `false`。

# sql - 如何获得不会过时的 SQL？

> ID：14779992
> 
> 赞同：0
> 
> 时间：2013-02-08T19:31:38.680
> 
> 标签：sql, validation, date

我有一张这样的高级桌子：

```
id | user_id | start_date          | websize
 1 | 1       | 2012-08-05 10:10:10 | 1024 
```

保费帐户为一年。我想获得所有行`start_date and + 1 year is not > date('Y-m-d')`...

对不起英语不好..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:40:00.840

如果我理解正确，您希望获得所有`start_date`不超过一年的行：

使用 MySQL：

```
SELECT *
FROM premiumTable
WHERE start_date > DATE_SUB(NOW(), INTERVAL 1 YEAR) 
```

使用 MSSQL：

```
SELECT *
FROM premiumTable
WHERE start_date > DATEADD(year, -1, GETDATE()) 
```

# java - 基于注解的工厂方法

> ID：14779994
> 
> 赞同：14
> 
> 时间：2013-02-08T19:31:45.087
> 
> 标签：java, spring, annotations

我希望能够自动装配单例 bean ( `foo`)

```
@Component
public class FooUser {

  @Autowire Foo foo;
} 
```

由另一个单例方法 ( `FooFactory.createFoo`)创建

```
@Service
public class FooFactory {

  public Foo createFoo() {...}
} 
```

使用 xml 很简单`factory-method`。我如何使用注释来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-08T19:43:42.647

改用Java `@Configuration`：

```
@Configuration 
public class Config {

    @Bean
    public FooUser fooUser() {
        return new FooUser(foo());
    }

    @Bean
    public FooFactory fooFactory() {
        return new FooFactory();
    }

    @Bean
    public Foo foo() {
        return fooFactory().createFoo();
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T19:40:34.043

您需要 java-config -[注释](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/annotation/Bean.html)[。`@Bean`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/annotation/Bean.html)

将您的类定义为`@Configuration`，将您的方法定义为`@Bean`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-15T14:20:14.873

Spring Components 也可以定义工厂方法。从[文档](http://docs.spring.io/spring/docs/3.2.9.RELEASE/spring-framework-reference/html/beans.html#beans-factorybeans-annotations)中截取的：

```
@Component
public class FactoryMethodComponent {

  @Bean @Qualifier("public")
  public TestBean publicInstance() {
      return new TestBean("publicInstance");
  }

  public void doWork() {
      // Component method implementation omitted
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-22T15:30:51.957

使用 FactoryBean Spring 接口。然后你将能够自动连接 T 本身

* * *

编辑： BeanFactory 是 Spring 中的一个接口，如果你实现它，你可以创建一个对象工厂，例如：

```
public class FooFactoryBean implements FactoryBean<Foo>{
   .................. 
   } 
```

然后你可以初始化bean：

```
@Bean
public FooFactoryBean foo(){ 
      return new FooFactoryBean(); 
    } 
```

那么如果你自动装配 Foo 它Spring会理解 FooFactoryBean 是所需的工厂

```
 @Autowired
       Foo foo; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-13T11:38:36.280

Spring Boot：工厂方法

```
import java.util.HashMap;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.stereotype.Component;

enum ParsersConst {
    bofa, jpm, wellsforgo
}

interface Parser {
    String readFromFile(String file);
}

class JPM implements Parser {
    @Override
    public String readFromFile(String file) {
        System.out.println("From JPM Parser");
        //LOGIC to read file data
        return "JPM";
    }
}

class Bofa implements Parser {
    @Override
    public String readFromFile(String file) {
        System.out.println("From Bofa Parser");
        //LOGIC to read file data
        return "BOFA";
    }
}

class WellsForgo implements Parser {
    @Override
    public String readFromFile(String file) {
        System.out.println("From Wellsforgo Parser"); 
        //LOGIC to read file data
        return "WellsForgo";
    }
}

class ParserCreator {
    private Map<ParsersConst, Parser> parserMap;

    public Parser createParser(ParsersConst parsConst) {
        Parser parser = parserMap.get(parsConst);
        if (parserMap.get(parsConst) != null) {
            return parser;
        }
        throw new IllegalArgumentException("Unknown Parser");
    }

    public void setParserMap(Map<ParsersConst, Parser> parserMap) {
        this.parserMap = parserMap;
    }
}

@Configuration
class ParserConfig {

    @Bean
    public ParserCreator parserCreatorFactory() {
        ParserCreator factory = new ParserCreator();
        Map<ParsersConst, Parser> map = new HashMap<ParsersConst, Parser>();
        map.put(ParsersConst.bofa, new Bofa());
        map.put(ParsersConst.wellsforgo, new WellsForgo());
        map.put(ParsersConst.jpm, new JPM());
        factory.setParserMap(map);
        return factory;

    }

    @Bean
    public Parser bofa() {
        return parserCreatorFactory().createParser(ParsersConst.bofa);
    }

    @Bean
    public Parser wellsforgo() {
        return parserCreatorFactory().createParser(ParsersConst.wellsforgo);
    }

    @Bean
    public Parser jpm() {
        return parserCreatorFactory().createParser(ParsersConst.jpm);
    }
}

@Component
public class StaticFacotryDemo implements CommandLineRunner {
    @Autowired
    private ApplicationContext context;

    @Override
    public void run(String... args) throws Exception {

        Parser parser = (Parser) context.getBean(ParsersConst.jpm.toString());
        System.out.println(parser.readFromFile("jan_stmt.pdf"));

    }

} 
```

# autocomplete - SublimeCodeIntel：找不到 Python blob 'gtk'

> ID：14779996
> 
> 赞同：1
> 
> 时间：2013-02-08T19:31:46.937
> 
> 标签：autocomplete, sublimetext2

我在使用带有 Python 的 SublimeCodeIntel 时遇到了一些麻烦。例如 ：

```
 self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
 self.window.set_title("Mega Connector") 
 self.window.connect("delete_event", self.delete_event)
 self.window.connect("destroy", self.destroy)
 self.window.set_border_width(10)
 self.window. 
```

当 SublimeCodeIntel 试图找出可以应用于该对象的函数时，它会返回给我：`could not find data for Python blob 'gtk'`
并且它对我尝试使用它的每个函数都执行相同的操作。
我正在使用 Python2.7 和`import gtk`.
实际上我的代码工作正常，但自动完成似乎不起作用。我不知道为什么，有人可以解释一下为什么吗？

# asp.net-mvc-3 - 为什么 Html.Label() 不适用于句点？

> ID：14779999
> 
> 赞同：25
> 
> 时间：2013-02-08T19:32:03.110
> 
> 标签：asp.net-mvc-3

我正在使用 Html.Label(strings) 输出几个字符串。

当我传递一个带有句点的值时，它只输出空格

Html.Label（公司）

例如`<%: Html.Label("Bill Co.")%>`

公司是一个动态值，如果值是“Bill Co”，它将起作用，但如果它是“Bill Co.”，则不会，唯一的区别是那个时期。

我应该能够按照 HhtmlHelper.Label 通过 msdn 将任何字符串传递给它

```
 public IHtmlString Label(
        string labelText
    ) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-06-24T08:55:40.603

你也可以使用

```
<%= Html.Label("","Bill Co.")%> 
```

使用`Html.label()`时，参数需要是一个表达式，用于标识要显示的属性和 for 属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T19:53:07.840

When using [**Html.label()**](http://msdn.microsoft.com/en-us/library/ee310185%28v=vs.98%29.aspx), the parameter needs to be an expression that identifies the property to display. I don't think there is a property in your model named `Bill Co.`.

You need to specify it like this:

```
<%: Html.Label("Name")%> 
```

or this:

```
<%: Html.Label(model => model.Name)%> 
```

If you just need to output a constant value as a label use the `<label>` tag:

```
<label>Bill Co.</label> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T20:09:21.587

我使用了 ToHtmlString() 并解决了这个问题。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-02T08:49:56.960

使用简单的标签标签：

`<label>Bill co.</label>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-18T15:40:49.160

有点老了，但由于学习 asp.net core 意味着需要大量搜索，我提出了一个解决方案：

```
@Model.yourVar 
```

很多例子都在使用 @Html.DisplayName(Model.yourVar) 等等。除了 DisplayName() 不用于显示简单的字符串，并且文档是单行的，没有示例。